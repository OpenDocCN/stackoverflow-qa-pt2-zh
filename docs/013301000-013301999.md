# StackOverflow 问答 13301000-13301999

# delphi - 在 RAD Studio XE2 中，如何正确地将图像文件添加到项目中而不使其成为项目资源？

> ID：13301005
> 
> 赞同：1
> 
> 时间：2012-11-09T01:51:00.380
> 
> 标签：delphi, ide, delphi-xe2

我有几个图表/绘图/等作为项目文档的重要组成部分。由于它们很重要，我想立即从**项目经理**处获得它们。但是，IDE 坚持它们是什么资源，并不断将它们添加到**资源和图像**对话框中（还将它们绑定到生成的可执行文件，有效地使链接时间变得很长）。那么，如何在不侵入`.dproj`文件的情况下将图像用作项目的一部分，而不是作为项目资源？

# javascript - 如何将这些 javascript 对象解析为分组的二维数组？

> ID：13301008
> 
> 赞同：0
> 
> 时间：2012-11-09T01:51:48.607
> 
> 标签：javascript, arrays, data-structures

对 javascript 不熟悉，因此试图将我的头脑围绕在使用不同的数据结构上。

得到了一组对象，例如：

```
{id:1234, photo:"pathtosomejpg"}
{id:1234, photo:"pathtosomejpg2"}
{id:1234, photo:"pathtosomejpg3"}
{id:2234, photo:"pathtosomejpg4"}
{id:2235, photo:"pathtosomejpg5"} 
```

完成循环后，我想获得一个以 为键的二维数组，该值是与该 id 匹配`id`的所有值的数组。`photo`

这是我尝试过的：

```
var groupedImages = [];
var innerAlbumPhotos = [];

// foreach obj in collection
if groupedImages.hasOwnProperty(obj.id.toString())
 innerAlbumPhotos = groupedImages[obj.id.toString()];

innerAlbumPhotos.push(obj.photo);

groupedImages[obj.id.toString()] = innerAlbumPhotos; 
```

如何创建此处描述的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:08:54.887

尝试以下操作：

```
var results = [];
arr.forEach(function( v ) {
  var target = results[ v.id ];
  target 
    ? target.push( v.photo ) 
    : ( results[ v.id ] = [ v.photo ] );
}); 
```

**演示：http:** [//jsfiddle.net/elclanrs/YGNZE/4/](http://jsfiddle.net/elclanrs/YGNZE/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:12:19.673

我会为数组的每个元素使用一个循环。如果 id 不存在，我为它创建一个新数组，如果 id 存在，我将照片添加到其中。

```
var data = [{id:1234, photo:"pathtosomejpg"},
    {id:1234, photo:"pathtosomejpg2"},
    {id:1234, photo:"pathtosomejpg3"},
    {id:2234, photo:"pathtosomejpg4"},
    {id:2235, photo:"pathtosomejpg5"}];

var result = [];
for (var i = 0; i < data.length; i++) {
    if (result[data[i].id]) {
        result[data[i].id].push(data[i].photo);
    } else {
        result[data[i].id] = [data[i].photo];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:16:49.330

javascript 中的数组没有键，因此如果设置 arr[1000] = 1，则数组将有 1000 个元素。所以你应该使用一个对象。

```
var photo_index = {};
function indexPhoto( photo_object ){
  if( !photo_index[photo_object.id] )
    photo_index[photo_object.id] = [];
  photo_index[ photo_object.id ].push( photo_object.photo );
} 
```

然后，为您描述的所有对象调用 indexPhoto 。

# facebook - OmniAuth + 设计 - Facebook 提供商 - OAuthException 191

> ID：13301011
> 
> 赞同：3
> 
> 时间：2012-11-09T01:52:05.260
> 
> 标签：facebook, ruby-on-rails-3, devise, omniauth

## 问题

我收到以下错误：

```
"error": {
      "message": "Invalid redirect_uri: Given URL is not allowed by the Application configuration.",
      "type": "OAuthException",
      "code": 191
   } 
```

这是众所周知的，我找到了许多不同的解决方案来解决它，不幸的是，它们中的任何一个都为我工作。

我试图让它在本地运行`localhost:3000`，但不能让它工作。

我的配置是普通配置：

*配置/初始化程序/devise.rb*

```
config.omniauth :facebook, '396783260390829', 'a504939e60c3410ed1becc44f41d4b94', {client_options: {ssl: {ca_file: Rails.root.join('lib/assets/cacert.pem').to_s}}} 
```

*脸书配置：*

![在此处输入图像描述](../Images/6cab9aa4f8b4dd6a026eb792fd484fff.png)

*路由.rb*

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" }

devise_scope :user do
  get '/users/auth/:provider' => 'users/omniauth_callbacks#passthru'
end 
```

我已经尝试了以下方法：

**方法一：**

```
OmniAuth.config.full_host = '`http://localhost:3000/`' 
```

这个是我得到的最接近的，因为它把我重定向回来，但地址是 `http://localhost:3000//users/auth/facebook/callbacks?xxx`

我已经尝试不使用最后一个斜线`OmniAuth.config.full_host = 'http://localhost:3000'`，但后来我得到了 191。

**方法二**

普通初始化程序，没有破解。

**方法 3**

在 Facebook 配置页面中设置域。

**方法 4**

将*应用程序域*设置为 localhost

**方法 5**

将 Facebook 配置中的网站设置为`http://localhost:3000/users/auth/facebook`

**方法 6**

尝试使用我的 ip 地址而不是 localhost 并得到相同的错误，但不是在**失败**中`OmniauthCallbacksController`，而是在`graph.facebook.com/oauth/authorize?`

```
redirect_uri=http://localhost:3000/users/auth/facebook/callback 
```

**所有方法的结果**

在所有情况下，除了我内联解释的情况外，我得到了

> OAuthException 191

在我为处理回调而创建的 OmniauthCallbackController 的失败方法中。

如果您知道其他选择或想看到其他任何东西来帮助我，请随时提问或回答。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:52:56.940

Facebook 不允许重定向地址为 localhost。您必须使用真实 IP 地址或命名地址。查看类似问题的答案：[Facebook 应用程序 - 通过omniauth 登录 - OAuthException 191](https://stackoverflow.com/questions/9941031/facebook-app-login-through-omniauth-oauthexception-191)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T01:43:27.387

## 解决方案

正如@AshitakaI 所提到的，我必须删除我的 old 和 deprecated `omniauth.rb`，所以我的最终和工作配置如下：

*配置/初始化程序/devise.rb*

为了进行身份验证，我将 cacert 复制到我的资产中并在`devise.rb`

```
config.omniauth :facebook, 'xxxxxxxxxxxxxxx', 'a504xxxe60cxxxxed1bexxxxf41d4b94', {client_options: {ssl: {ca_file: Rails.root.join('lib/assets/cacert.pem').to_s}}} 
```

*脸书配置：*

![在此处输入图像描述][1]

*链接到 Facebook 身份验证*

```
/users/auth/facebook 
```

感谢您的帮助，这个问题花了我 5 个小时才解决。

# java - 在 linux 上运行 dmg 程序

> ID：13301014
> 
> 赞同：0
> 
> 时间：2012-11-09T01:52:15.393
> 
> 标签：java, linux, macos, dmg

我正在使用 linux，我下载了一个为 mac 编写并保存为 dmg 的程序（称为炒作）。然后我使用 dmg2img 程序将该程序作为图像文件挂载。成功完成之后，我打开了一个名为 MacOSX 的文件夹（因为它就是为此编写的）并找到了一个 java 类文件（hype.class）。我试图运行类文件，但它抛出了 ClassNotFoundException。

所以我用一个helloworld java类文件测试了我的java安装，它运行良好。

我不知道它是否不起作用，因为该程序是为 Mac 而不是 linux 编写的，或者是否需要不同的方法来运行该程序。我应该尝试运行 java 类文件以外的东西吗？

有人知道如何或是否可以让程序在 linux 上运行吗？

错误如下：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: Hype/class
Caused by: java.lang.ClassNotFoundException: Hype.class
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Hype.class. Program will exit. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:07:24.973

您`.class`在启动时将其作为类名的一部分包括在内 - 它应该只是`Hype`.

# ruby - 是否可以在 ruby 中“跟踪”文件？

> ID：13301018
> 
> 赞同：0
> 
> 时间：2012-11-09T01:53:14.673
> 
> 标签：ruby

我正在创建一个用于测试目的的库，它会产生大量的虚拟文件，这些文件很可能会被移动和重命名。我希望我的库跟踪文件，以便在测试完成后删除它们（或重置它们）。我还将存储对这些文件所做的更改以用于记录目的。

是否可以检测文件或目录何时移动，或被重命名并检测它们在脚本范围内移动到的位置？

**奖金**
是否可以检测何时在特定目录中创建新文件（非递归）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:04:25.520

Linux 中的[inotify](https://www.kernel.org/doc/man-pages/online/pages/man7/inotify.7.html)工具可能会帮助您完成您想做的事情。不过，我不知道是否有专门用于 inotify 的 Ruby 接口（但是，快速搜索出现了[ruby​​-inotify 示例？](https://stackoverflow.com/questions/7424212/ruby-inotify-example)）。

# android - 使用单个精灵表而不是多个图像可以提高 android 中 opengl 渲染的性能吗？

> ID：13301021
> 
> 赞同：1
> 
> 时间：2012-11-09T01:53:37.920
> 
> 标签：android, opengl-es, sprite

我想知道有 20 个独立的图像，如果我们只使用一个包含所有这些图像的精灵，性能会不会有任何改进？这会提高性能还是没有太大变化？顺便说一句，我正在尝试使用 opengl 进行渲染

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:06:30.993

如果最终效果是您更不频繁地更改活动纹理，它通常会提高性能。

这是因为 GPU 在主存储和绘图之间缓存纹理。如果您更改纹理，则该缓存将被刷新。如果您继续使用相同的纹理，那么缓存很可能会有效地工作，从而节省前往速度较慢的主存储的次数。

在手机上，物理 RAM 由 CPU 和 GPU 共享是很正常的，因此访问它的成本很高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:08:41.907

您的问题非常广泛，因为它取决于许多因素，但通常 - 是的，拥有组合资源通常会带来性能优势。主要原因是你在绘制框架时没有进行纹理切换，这意味着你不必改变硬件状态，多次上传数据等等。

但是，也有一些可能的缺点：如果您希望进行纹理包装，您可能会搞砸，精灵的不良包装可能会增加您的纹理大小等等。

总结一下：去做吧，但要明智:)

# android - 仅构建 android framework.jar

> ID：13301026
> 
> 赞同：5
> 
> 时间：2012-11-09T01:55:00.400
> 
> 标签：android

添加一些调试信息后`androd.opengl.GLSurfaceView`，我想`framework.jar` `only`在 android 源代码树中重建。我`mm`在 $ANDROID_ROOT 中做了一个，但这也会构建应用程序，有些应用程序无法编译，但我没有打扰这些应用程序。我怎样才能构建`framework.jar`唯一的？

此外，在 中`build/core/main.mk`，`incrementaljavac`据说可以加快编译速度。该标志如何在这里使用？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T00:35:10.587

好的。

`mm`中的命令`framework/base`将完成这项工作，但它同时编译了 framework.jar 和 framework-ext.jar。

# javascript - angularjs过滤器中的json解析导致无限循环

> ID：13301029
> 
> 赞同：0
> 
> 时间：2012-11-09T01:55:38.433
> 
> 标签：javascript, jquery, angularjs

我有一个过滤器函数，它可以进行同步 ajax 调用。该函数的回调返回一个 json 对象，然后将其传递给过滤器函数的变量，然后将其作为过滤器结果返回。仅当 ajax 调用的 dataType 设置为“json”时，才会进行 ajax 调用的无限循环。返回字符串时，没有无限循环。

为什么这段代码放在过滤器函数中时会导致递归无限循环？

```
 var result;
        that = this;
        $.ajax({
            url: '/url/',
            async: false,
            dataType: 'json',
            type: 'get',
            success: function (links) {

                that.result = links;
            }
        });

        return that.result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T14:49:34.047

1.  不要使用同步 ajax cals。
2.  不要在过滤器中使用长时间处理 = 在每个 $digest 循环中都会调用过滤器，因此您在过滤器中的长同步 ajax 调用只会一次又一次地冻结浏览器。

# javascript - 在 CasperJS 中使用 AJAX 获取页面的远程数据

> ID：13301031
> 
> 赞同：6
> 
> 时间：2012-11-09T01:56:01.977
> 
> 标签：javascript, phantomjs, casperjs

在执行 CasperJS 脚本的过程中，我需要从另一个站点获取和解析 JSON 数据，以便我可以使用该数据在我正在积极处理的站点上填写表单。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T08:46:40.847

您可以使用[`__utils__.sendAJAX()`](http://casperjs.org/api.html#clientutils.sendAJAX)：

```
var casper = require('casper').create();
var wsurl = 'https://raw.github.com/n1k0/casperjs/master/package.json';
var word;

casper.start('http://google.com/', function() {
    word = this.evaluate(function(wsurl) {
        try {
            return JSON.parse(__utils__.sendAJAX(wsurl, 'GET', null, false)).name;
        } catch (e) {
        }
    }, {wsurl: wsurl});
});

casper.then(function() {
    if (!word) {
        this.die('unable to retrieve word');
    }
    this.echo('searching for ' + word);
    this.fill('form[action="/search"]', {q: word}, true);
});

casper.run(function() {
    this.echo(this.getCurrentUrl());
    this.exit();
}); 
```

示例执行（不要忘记通过`--web-security=no`）：

```
$ casperjs test.js --web-security=no
searching for casperjs
http://www.google.fr/search?hl=fr&source=hp&q=casperjs&gbv=2&oq=&gs_l= 
```

希望能帮助到你。

# css - 推回内容的固定元素

> ID：13301034
> 
> 赞同：6
> 
> 时间：2012-11-09T01:56:35.173
> 
> 标签：css, fixed

我正在寻找一种在页面顶部有一个固定元素的方法，该元素会根据页面宽度改变高度，并且还会将下面的内容推回。到目前为止，我已经管理了一些事情，但我希望有一个更清洁的解决方案。我所做的是拥有两个具有相同内容的顶级元素。一个设置为固定位置，另一个设置为相对位置，但没有不透明度......

```
#top-1 { position: fixed; background-color:#fff}
#top-2 {position: relative; opacity:0;}
#content { background-color: #FFF; background-color:#CCC } 
```

我在这里设置了一个示例[http://jsfiddle.net/q3G7F/6/](http://jsfiddle.net/q3G7F/6/) 它完全按照我的需要工作，但也许有人有更好的主意？
谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:48:49.563

您可以使用一个小的 jQuery（或 javascript）片段来做到这一点。
将 CSS 更改为：

```
#top-1 { position: fixed; top: 0; background-color:#fff}
#content { background-color: #FFF; background-color:#CCC }​ 
```

在页面底部添加此脚本（需要 jQuery）。这应该为内容添加上边距并为您的顶部元素腾出空间。

```
<script>
    $(document).ready(function() {
       $('#content').css('margin-top', $('#top-1').height() + 'px');
    }); 
</script> 
```

这是一个工作示例：http: [//jsfiddle.net/g6CnA/](http://jsfiddle.net/g6CnA/)。

### 更新

您还需要监听窗口调整大小事件并在顶部元素的高度发生变化时调整边距。

```
$(document).ready(function() {
    $('#content').css('margin-top', $('#top-1').height() + 'px');   
}); 

$(window).resize(function() {
    $('#content').css('margin-top', $('#top-1').height() + 'px');        
}); 
```

​</p>

jsFiddle：http: [//jsfiddle.net/g6CnA/1](http://jsfiddle.net/g6CnA/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:36:51.737

`#top-1`在您的 CSS 中，如果您在和的父元素上设置显式高度（以 px 或任何非 % 为单位）`#content`，您应该能够将`height`的`#top-1`和 的`margin-top`设置`#content`为相同的百分比。这将为您提供所需的行为，但此特定方法*仅*在您可以显式设置其父级的高度时才有效。

# c# - C#中的循环引用依赖有什么办法吗？

> ID：13301036
> 
> 赞同：1
> 
> 时间：2012-11-09T01:57:07.647
> 
> 标签：c#, circular-reference

我有 3 个项目的解决方案

```
Project1 - main application
Project2 - graphing application
Project3 - graphing library 
```

从 Project1 中的对象访问数据。项目 1 引用了项目 2 来创建数据（表单）的显示，而 projectg 2 引用了项目 3 来完成渲染图形的实际繁重工作。

现在，项目 3 需要访问项目 1 的对象/方法，因为这是数据所在的位置。但是，当我将项目 3 的引用添加到项目 1 时，我收到有关循环引用的错误。

我该如何解决这个问题？

谢谢，礼萨

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T02:01:14.990

你需要保持一个方向的流动......向下。

为了解决这个问题，我通常有一个“模型”项目。数据模型全部单独存储在该项目中，并且该项目被需要它们的任何其他项目引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T02:02:40.013

不; 没有办法解决这个问题。你有一个循环依赖。您将需要重构应用程序的各个层。

就层数而言，我发现最适合我的东西（从最低到最高）

1.  全局方法和配置（例如基本类型扩展方法、系统消息等）。
2.  数据访问层。没有业务逻辑；只有数据 CRUD 逻辑。
3.  业务层。在此处添加业务逻辑。
4.  UI 增值层。这就是你的图形库之类的地方。（选修的）
5.  界面层。这是您构建最终用户看到的 UI 的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T02:03:36.340

处理循环引用的一种方法是重构您的应用程序。

创建项目4，将项目通用的接口放在那里。您可以从所有其他项目中包含项目 4。现在在其他三个项目之一中实现该项目的接口，并通过某种工厂机制使用实现（控制容器的反转也很好，但对于更简单的应用程序来说可能有点过分了）。

# php - 在 Windows 上使用 php 启动 exe

> ID：13301041
> 
> 赞同：3
> 
> 时间：2012-11-09T01:58:01.837
> 
> 标签：php, exec, wamp

> **可能重复：**
> [Windows 上的 nohup，无需等待完成即可执行](https://stackoverflow.com/questions/4197579/nohup-on-windows-exec-without-waiting-for-finish)

我将解释我正在尝试做的事情：我正在尝试编写一个 php 页面来通过单击图像来启动我的游戏。我正在尝试这样做，因为我已经使用 hdmi 将电视连接到我的电脑，并且我希望能够使用我的 android 手机启动游戏。

我在装有游戏的电脑上安装了 wamp。我正在尝试运行记事本以查看是否可以正常工作。问题是我现在拥有它的方式可以工作，但它不能像我需要的那样工作

```
<?php 
$notepad = '%windir%\system32\notepad.exe';
exec($notepad);
?> 
```

此命令在后台启动记事本，php 一直等待它关闭以继续（我认为这就是它正在做的事情，因为在我看来这是 exec 的正常行为）。

你们中的任何人都可以为我指出如何使用 php 运行游戏的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:05:24.520

您应该可以使用[start](http://zeroflag.wordpress.com/2007/05/12/start-command/)命令完成此操作 -

```
exec('start /b ' . $notepad); 
```

# asp.net-mvc - 在 mvc 控制器上调用使用 moq 验证方法

> ID：13301044
> 
> 赞同：0
> 
> 时间：2012-11-09T01:59:14.663
> 
> 标签：asp.net-mvc, unit-testing, moq

我正在测试一个 MVC 控制器，并想测试在我的一个存储库中是否调用了 Save 方法。控制器是一个正在尝试注册用户的 AccountController。My AccountRepository 有两种方法，Save 和 Register。经过一些检查后，Register 正在调用 Save。我不确定我是否应该只测试 Register 是否被调用并在我的存储库上运行单独的单元测试以验证 Save 是否作为调用 Register 的一部分被调用，或者我是否在测试中错误地设置了 Moq。

这是我的测试：

```
[TestMethod]
        public void register_post_saves_valid_registration()
        {
            _mockMemberRepository.Setup(r => r.GetByEmail(It.IsAny<string>())).Returns(_testMember);

        // Arrange
        RegisterViewModel model = new RegisterViewModel()
        {
            Email = "registerme@talentsite.com",
            Password = "test123",
            ConfirmPassword = "test123"
        };
        // Act
        ActionResult result = _controller.Register(model);
        // Assert
        _mockMemberRepository.Verify(r => r.Register(It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>()), Times.Once());
        _mockMemberRepository.Verify(r => r.Save(It.IsAny<Member>()), Times.Once());
    } 
```

这一行：

```
_mockMemberRepository.Verify(r => r.Register(It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>()), Times.Once()); 
```

通过了测试，但是当我介绍以下行时：

```
_mockMemberRepository.Verify(r => r.Save(It.IsAny<Member>()), Times.Once()); 
```

它失败。

这是我的存储库中的注册方法：

```
 public MembershipCreateStatus Register(string email, string password, string confirm)
    {
        if (password.Equals(confirm))
        {
            try
            {
                Member m = GetByEmail(email);
                if (m == null)
                {
                    int format = (int)PasswordFormatEnum.Encrypted;
                    string salt = GenerateSalt();
                    string pass = EncodePassword(password, format, salt);

                    m = new Member()
                    {
                        Email = email,
                        Password = pass,
                        PasswordSalt = salt,
                        PasswordFormat = format
                    };
                    Save(m);
                    return MembershipCreateStatus.Success;
                }
                else
                    return MembershipCreateStatus.DuplicateEmail;
                //"A user with that email address already exists. Please use the Forgotten Password link if you need to recover your password.";
            }
            catch (Exception ex)
            {
                _logger.LogError(ex);
                return MembershipCreateStatus.ProviderError;
            }
        }
        return MembershipCreateStatus.InvalidPassword;
    } 
```

我的`Save`方法只接受一个 Member 对象并且是一个 void 方法。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:10:01.680

从上面的代码看，Save 方法似乎是 Register 方法的一部分。如果是这种情况，那么 Register 方法是 mockRepository 的一部分，所以它被模拟了。因此，调用 Save 的真正实现将永远不会被调用。

假设上述情况属实（我相信这是真的，但由于我没有控制器代码而无法真正说出），您需要创建单独的测试：

1.  您现在拥有的那个，删除了保存验证。
2.  存储库的单元测试，并确保在调用 Register 时调用 Save。

# ruby-on-rails - Ruby on Rails - 无法将 nil 转换为字符串

> ID：13301045
> 
> 赞同：0
> 
> 时间：2012-11-09T01:59:29.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我编写了一个简单的小函数，它每 60 秒刷新一次页面，用于“Time.now.strftime”函数。但是，当我执行搜索并最终使用搜索结果刷新页面时，我收到以下错误，我无法弄清楚：

无法将 nil 转换为字符串

```
app/models/product.rb:37:in `+'
app/models/product.rb:37:in `fuzzy_search'
app/controllers/products_controller.rb:92:in `search'

def self.fuzzy_search(search_string)
    (LINE 37)   search_string = "%" + search_string + "%"
        self.find(:all, :conditions => ["title LIKE ?", search_string])
    end

(LINE 92) @products = Product.fuzzy_search(params[:search_string])
        if @products.empty?
            flash.now[:alert] = "No records found - displaying all records..."
            @products = Product.find :all, :order => 'title'
        end
        render :action => "index" 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:08:35.730

如果你连接你的字符串有点不同，搜索字符串是否为零无关紧要。试试这样，而不是：`search_string = "%#{ search_string }%"`. 这将导致任何东西都`#{}`被转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:12:12.137

该错误是由试图连接到 NilClass (nil) 的字符串“%”引起的。

最快的解决方法是执行以下操作。

第 37 行的代码：

```
search_string = "%" + search_string + "%" 
```

应改为：

```
search_string = "%#{search_string}%" 
```

Kyle 提出的重构方法的建议也是一个不错的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:11:01.467

你的参数`search_string`是`nil`

我会修改`fuzzy_search`

```
def self.fuzzy_search(search_string)
  return [] unless search_string
  self.find(:all, :conditions => ["title LIKE ?", "%#{search_string}%"])
end 
```

进行此更改后，`@products`它将为空，您的代码将达到`@products.empty?`条件并闪现错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T02:03:16.830

考虑如果您没有`search_string`在请求中提供参数会发生什么：

```
search_string = params[:search_string] # nil 
```

与其使用`nil`参数运行搜索，不如处理意外的空虚可能是有意义的：

```
unless params[:search_string].nil?
  @products = Product.fuzzy_search(params[:search_string])
else
  abort('Search with something!') # don't actually do this
end 
```

更好的是，只需检查`key`in 参数：

```
if params.key?(:search_string)
  # do search
else
  # panic
end 
```

# c++ - 使用指针时的奇怪行为

> ID：13301046
> 
> 赞同：10
> 
> 时间：2012-11-08T23:41:12.563
> 
> 标签：c++, pointers

当我在 MS VS C++ 2010 上运行此代码时：

```
#include <iostream>

int main() {
    const int a = 10;
    const int *b = &a;
    int *c = (int *)b;
    *c = 10000;
    std::cout << c << " " << &a << std::endl;
    std::cout << *c << " " << a << " " << *(&a) << std::endl;
    return 0;
} 
```

输出是：

```
0037F784 0037F784
10000 10 10 
```

编写该代码的动机是 Stroustrup 的“C++ 编程语言”中的这句话：“可以通过显式类型转换显式删除对指向 const 的指针的限制”。

我知道尝试修改常量在概念上是错误的，但我发现这个结果很奇怪。任何人都可以解释其背后的原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T23:48:49.383

让我们从显而易见的开始：其中一些是平台和编译器相关的。

对于初学者，请参阅这篇关于[Explicit Type Conversion](http://www.hpc.unimelb.edu.au/nec/g1af03e/node5.4.html)的文章，特别是：

> 指向类型对象的指针`const`可以转换为指向非`const`类型的指针。**结果指针将引用原始对象。**一个类型的对象`const`或一个类型的对象的引用 `const`可以转换为一个非`const`类型的引用。结果引用将引用原始对象。**尝试通过此类指针或引用修改该对象的结果将导致寻址异常或与原始指针或引用引用非常量对象相同。是否发生寻址异常取决于实现。**

因此，这解释了为什么它**可以**让您修改变量而不会发牢骚。

请注意，您可以直接使用强制转换运算符来实现相同的目的，因为这就是编译器将为您执行的操作，如[本文关于强制转换运算符](http://en.cppreference.com/w/cpp/language/explicit_cast)的说明，并给出了它们的优先顺序。

**然而，这里真正的诀窍在于内存模型。**像 const int a 这样的静态分配变量实际上可能在内存中永远不会有任何“物理”位置，而只是在编译时被替换。^(（我试图将手指放在实际参考上，但到目前为止，我能抓住的最接近和最好的是这个（非常好）所以[答案](https://stackoverflow.com/a/8290162/453590)是*[为从未使用过的静态变量分配内存？](https://stackoverflow.com/questions/8290132/is-memory-allocated-for-a-static-const-variable-whose-address-is-never-used) -如果有人找到实际参考，请告诉我们。）*)

所以这里编译器只是在取笑你，并试图尽可能多地理解你的指针算术，但最终用`a`实际值代替你第二次`cout`调用的最后两个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:43:28.420

原因是这是未定义的行为。

Stroustrup 引用可能是指未声明对象`const`但您只有一个`const`指向它的指针的情况。

即这是定义明确的（使用有问题的 c 样式转换）：

```
int a{10};
const int* pa = &a;

int* b = (int*)pa;
*b = 5; 
```

这是未定义的：

```
const int a{10};
const int* pa = &a;

int* b = (int*)pa;
*b = 5; 
```

尝试修改声明的对象`const`，但是你得到一个指向它的非常量指针，是 UB。

# python - 如何找到最短的堆栈移动序列以获得目标堆栈？

> ID：13301048
> 
> 赞同：4
> 
> 时间：2012-11-09T01:59:58.237
> 
> 标签：python, stack

我的任务是编写一些代码，找到将给定起始堆栈带到给定目标堆栈的最短移动序列。我得到了一个原始的书籍列表，描述了堆栈是如何开始的，还有一个书籍的目标列表，显示了我需要它们的目标顺序。问题在于标准排序算法不起作用，因为书籍是基于一个人的偏好，而不是任何特定的逻辑。

问题要你使用的系统如下：从书架的任何地方拉出一本书，一次一本书，然后把它放在书架的顶部。所以如果你有书 X、Y 和 Z，你可以选择取出 Y，按 Y、X、Z 的顺序排列。

最初的：

```
'1984 - George Orwell'
'Moby Dick - Herman Melville'
'To Kill A Mockingbird - Harper Lee'
'Atlas Shrugged - Ayn Rand'
'The Black Cat - Edgar Allen Poe' 
```

目标：

```
'Atlas Shrugged - Ayn Rand'
'To Kill A Mockingbird - Harper Lee'
'1984 - George Orwell'
'Moby Dick - Herman Melville'
'The Black Cat - Edgar Allen Poe' 
```

这是家庭作业。但是，我并不是在寻找人为我做这件事，因为这会破坏任务的目的。我只是在寻找一些开始的想法或技巧，因为我不知道从哪里开始。

注意：我打算将此标记为作业，但标记明确表示不要，所以我没有。如果这是错误的，请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:17:32.157

好的，主要问题是你只能放在上面，但你可以选择任何书。你想要的是提示，而不是方法，所以这里有一些：

1.  因为你只能放在顶部，所以总是开始看底部，因为它最难到达
2.  你显然永远不需要拉任何已经在正确位置的书
3.  您需要以正确的顺序拉出现在位于书上方的书下的所有书
4.  如果你把书堆在上面，你应该把它们按正确的顺序放在那里
5.  要将 ABGFCED 转换为字母顺序，您最好拉 E，然后是 F，然后是 G，如果您总是附加到末尾。

我希望这能让你开始，我没有明确表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:21:03.500

一个非常简单的算法是遍历堆栈，每次查找并取出属于底部的下一本书。对于小堆栈，线性搜索就足够了。

在您的示例中，您将退出`'The Black Cat - Edgar Allen Poe'`第一次迭代、`'Moby Dick - Herman Melville'`第二次、`'1984 - George Orwell'`第三次等。

这是一个 O(n^2) 算法。

# javascript - 第一次迭代时未设置 JS 全局变量

> ID：13301050
> 
> 赞同：1
> 
> 时间：2012-11-09T02:00:42.340
> 
> 标签：javascript, html

在处理了一些代码后，我试图给一个全局变量一个值。它没有按计划工作。

我所做的是在两个文本框中输入地址和城市。它进入最后一个函数并调用获取地址坐标的 codeAddress。

从那里我将坐标发送到 setLatLng，它工作正常。但我不能使用 getLatLng 调用 longlats 来查看设定值。

如果我添加地址和城市两次，它只会显示一个值。我认为 longlats 的初始化太晚了，以至于我没有及时看到正确的值。

有什么建议吗？

相关代码如下。

```
<script>
var longlats ="";

function setLatLng(x,y){
    longlats = x+","+y;
    alert(longlats) //shows value
}

function getLatLng(){
    alert(longlats);
    return longlats;
    //calling this gives undefined
}

function codeAddress() {

$('#map').show();
var geocoder = new google.maps.Geocoder();
var address = document.getElementById("address").value +"," + document.getElementById("city").value;

geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
    var lat = results[0].geometry.location.lat();
    var lng = results[0].geometry.location.lng();
    locationsall[counter] = new Array();
    locationsall[counter][0] = address;
    locationsall[counter][1] = lat; //has value
    locationsall[counter][2] = lng; //has value
    setLatLng(locationsall[counter][1],locationsall[counter][2]);

counter++;

} 

$(function() {
$("#locationadd").click(function() {
   codeAddress();
   var get = getLatLng();//value is undefined..
  //i want to do stuff with the values in longlats
}
)};

</script> 
```

编辑1

```
 $("#locationadd").click(function() {
var address = $("#address").val();
var city = $("#city").val();

if (address =="" || city =="") {
    $("#locationtext").text('*Please enter an address and city');
    return false;
} 
else {
    codeAddress(function(){
    var get = getLatLng();
    var longlat = get.split(",");
    var lat = longlat[0];
    var lng = longlat[1];

    var $tr2 = $('<tr>').css({
            'padding': '4px',
            'background-color': '#ddd'
    }).appendTo('#locationDeals');

    var location = [
            address,
            city
    ];
    locations.push(location);

    for (i = 0; i < 2; i++) {
        var $td2 = $('<td>').appendTo($tr2);
        $('<span>').text(location[i]).appendTo($td2);
        $('<input type="hidden">').attr({
            'name': 'loc[' + ctr + '][' + i + ']',
            'value': location[i]
        }).appendTo($td2);
    }
    var $tdRemoveRow2 = $('<td>').appendTo($tr2);
    $('<a>').attr({
        'href': '#',
        'id': 'submit-button'
    }).text("Remove").click(function() {
    var index2 = $tr2.index();
    $("#locationDeals input[type='hidden']").each(function() {
        this.name = this.name.replace(/\[(\d+)\]/, function(str2, number2) {
          return "[" + (+number2 > index2 - 1 ? number2 - 1 : number2) + "]";
        });
    });

    $tr2.remove();
    var tmp = locations.splice(locations.indexOf(location), 1);
    deleteMarker(tmp);
    return false;
    }).appendTo($tdRemoveRow2);

    ctr++;
    document.getElementById("address").value = "";
    document.getElementById("city").value = "";
    document.getElementById("address").focus();
    $("#locationtext").text('');

    return false;
    });
    } 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:26:46.490

问题`geocoder.geocode`是异步的。你不能这样做，因为你的`codeAddress`函数会在`longlats`设置之前返回。只有在谷歌地图返回结果后，您才需要更改编码样式以使用 longlats。

您需要从此更改您的代码：

```
$("#locationadd").click(function() {
   codeAddress();
   var get = getLatLng();//value is undefined..
  //i want to do stuff with the values in longlats
} 
```

对此：

```
$("#locationadd").click(function() {
   codeAddress(function(){
     var get = getLatLng();
     //do stuff with the values in longlats
   });
}); 
```

为此，您需要更改`copyAddress`为：

```
function codeAddress(callback) {

  /*
   * Some stuff
   */

  geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      /*
       * Some stuff
       */

      setLatLng(locationsall[counter][1],locationsall[counter][2]);

      callback(); // This is where/when the values are returned
                  // so this is where/when we want to execute code.  
    } 
  })
} 
```

* * *

## 补充说明：

从您的评论来看，您似乎仍在尝试这样做：

```
var val;
codeAddress(function(){
    val = getLatLng();
});
doStuffWith(val); 
```

这不起作用，因为 codeAddress 在 getLatLng 执行之前返回。你需要**改变你的编码风格**。你需要这样写：

```
codeAddress(function(){
    val = getLatLng();
    doStuffWith(val);
}); 
```

也就是说，您需要**将在调用 codeAddress 之后编写的所有代码移动到函数 INSIDE codeAddress**中。

原因是代码执行的方式是这样的：

*   浏览器进入 JAVASCRIPT 阶段：

    ```
     codeAddress is called
              |
              |
              |--------------> inside codeAddress a request to google maps
              |                is made which registers a callback function
              |                to be executed once it returns.
              v
       codeAddress returns
       note that at this point getLatLng isn't called yet
       this is because the browser haven't made the request
       to google maps yet because it's still executing the
       javascript engine.
              |
              v
       code written after codeAddress is executed
       (remember, the call to google maps still haven't happened yet)
              |
              v
       no more javascript to execute 
    ```

*   javascript 阶段结束，浏览器进入 DOM 渲染阶段

    ```
     The DOM gets updated and drawn on screen if there are any changes. 
    ```

*   DOM 渲染结束，浏览器进入网络阶段

    ```
     (note: in reality the network layer is asynchronous)

       Browser executes pending requests (images, iframes, XMLHttprequest etc.)
       Makes the necessary network connections and begins downloading stuff.
              |
              |
              v
       Browser services completed requests and schedules appropriate events
       (update DOM, trigger onreadystatechange etc.)
       Note that at this point no javascript or DOM updates actually happens.
       The browser does things in a loop, not recursively.
       It is at this point that the google maps request is made.
              |
              v
       No more network operations to service 
    ```

*   网络阶段结束，浏览器进入 JAVASCRIPT 阶段

    ```
     google maps request completes, onreadystatechange executes
              |
              |
              |----> inside onreadystatechange the callback to the
              |      google maps API is called
              |             |
              |             '-----> inside the google maps callback getLatLng
              |                     is called, then the callback to codeAddress
              |                     is called.
              |                          |
              |                          '------> inside the callback to
              |                                   codeAddress you can now
              |                                   use the returned values.
              |                                   This is the reason you need
              |                                   to move all your code here.
              v
       no more javascript to execute 
    ```

*   javascript 阶段结束，浏览器进入 DOM 渲染阶段

并且事件循环继续。

如您所见，您不能简单地从 codeAddress 返回值。相反，您需要将代码移动到 codeAddress 中以使其在正确的时间执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:19:39.860

你得到`undefined`是因为调用时`getLatLng()`的值`longlats`尚未设置。

您的函数`codeAddress()`发出异步请求，因此您需要使其能够接受回调作为参数。

```
codeAddress(function(longLat){
    // do something with longLat
}); 
```

声明函数 codeAddress 时，请确保执行回调并将 longLat 值传递给它。

[检查这个其他答案](https://stackoverflow.com/questions/2993563/how-do-i-return-a-variable-from-google-maps-javascript-geocoder-callback)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:21:14.027

Google 地理编码服务进行异步 AJAX 调用。当您调用`codeAddess()`它时，它会触发 AJAX 请求并立即返回。尚未收到响应，因此尚未设置您的变量，但`getLatLng()`无论如何您都尝试获取它，这会显示一个空的警报框（我想）。您要做的是将回调传递给地理编码函数并在那里进行后续工作。例如，

```
function codeAddress(fn) {
   /* Code here */
   if (status == google.maps.GeocoderStatus.OK){
     /* More code here */
     /* Call callback in the end or after setting*/
     fn();
  }
} 
```

你可以这样设置：

```
$("#locationadd").click(function() {
   codeAddress(getLatLng);
}); 
```

# c# - 特定扩展名的 Directory.GetFiles

> ID：13301053
> 
> 赞同：66
> 
> 时间：2012-11-09T02:00:59.347
> 
> 标签：c#, linq, directory, getfiles

有没有办法简化这个 linq 表达式，或者有更好的方法吗？

```
Directory.GetFiles(dir, "*.*", SearchOption.AllDirectories)
         .Where(s => s.EndsWith(".jpg", StringComparison.OrdinalIgnoreCase) ||
                     s.EndsWith(".gif", StringComparison.OrdinalIgnoreCase) ||
                     s.EndsWith(".png", StringComparison.OrdinalIgnoreCase) ||
                     ...); 
```

基本上我想返回某个扩展名的所有文件。不幸的是，这种方法不是很灵活。我宁愿能够将扩展名添加到列表并让 Directory.GetFiles 返回这些扩展名。那可能吗？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-11-09T02:05:47.583

如果您想在 LINQ 中进行过滤，可以这样做：

```
var ext = new List<string> { "jpg", "gif", "png" };
var myFiles = Directory
    .EnumerateFiles(dir, "*.*", SearchOption.AllDirectories)
    .Where(s => ext.Contains(Path.GetExtension(s).TrimStart(".").ToLowerInvariant())); 
```

现在`ext`包含允许的扩展列表；您可以根据需要从中添加或删除项目以进行灵活过滤。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-09T02:04:48.450

[`Directory.GetFiles(String, String)`](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)超载不是已经这样做了吗？你会做的`Directory.GetFiles(dir, "*.jpg", SearchOption.AllDirectories)`

如果要将它们放入列表中，只需将 替换为`"*.jpg"`迭代列表并将结果聚合到整体结果集中的变量。比单独指定它们要清楚得多。=)

就像是...

```
foreach(String fileExtension in extensionList){
    foreach(String file in Directory.GetFiles(dir, fileExtension, SearchOption.AllDirectories)){
        allFiles.Add(file);
    }
} 
```

（如果您的目录很大，使用[`EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd413379.aspx)而不是`GetFiles`可能更有效）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-06T10:08:37.117

我会只使用单行

```
List<string> imageFiles = Directory.GetFiles(dir, "*.*", SearchOption.AllDirectories)
      .Where(file => new string[] { ".jpg", ".gif", ".png" }
      .Contains(Path.GetExtension(file)))
      .ToList(); 
```

# javascript - 仅在 iPhone 上未定义的 TypeError -- JavaScript、HTML5 canvas_context.measureText

> ID：13301056
> 
> 赞同：1
> 
> 时间：2012-11-09T02:01:39.863
> 
> 标签：javascript, iphone, ios, undefined, typeerror

在 iOS Safari 上运行网页时遇到问题。

我正在使用[canvas-text 库](http://code.google.com/p/canvas-text/)来呈现在以下内容上完美运行的文本：

*   Ubuntu/Windows——铬、火狐
*   Mac——Safari
*   Android -- 默认、firefox、opera、dolphin

但是，它不适用于**iPhone**。

我在 iPhone 上启用了 javascript 控制台，但出现了一些错误：

> Javascript：错误未定义
> 
> 类型错误：“未定义”不是对象

控制台不显示行号，但通过在整个代码中放置警告框，我能够隔离问题发生的位置。这是产生错误的代码：

```
usedX = context.measureText(textUsername).width + context.measureText(textInput).width + paddingInput*2 + borderInput*2; 
```

问题存在于 context.measureText 中。我知道这一点是因为我尝试用以下代码替换以前的代码：

```
var usedX = context.measureText("why is this an error?"); 
```

我仍然在那条线上得到错误。

我确定 context 和 measureText 已定义，因为我已经完成了：

```
alert(context.measureText); 
```

警告：

> 函数 measureText(){[本机代码]}

正如我所说，问题似乎出在 measureText 中。我用谷歌搜索了很多，找不到解决方案。

我是一个 JavaScript 菜鸟，所以如果有一个简单的修复，我不会感到惊讶。但似乎代码一切正常，这是 iPhone 实现 measureText 的问题。

# ios - 将图像粘贴到 UITextView 会导致崩溃

> ID：13301058
> 
> 赞同：3
> 
> 时间：2012-11-09T02:02:03.573
> 
> 标签：ios, crash, uitextview, copy-paste, paste

谁能告诉我如何避免将图像粘贴到 UITextView 中导致的崩溃？

我的应用程序中有 UITextView，它允许对属性文本（iOS 6）进行一些基本的编辑。用户发现他们可以从网页复制文本和图像的组合，然后切换到我的应用程序并使用 UITextView 菜单 > 粘贴命令，它将使应用程序崩溃。我可以重现它，但我很难过如何处理它。崩溃的日志如下所示：

```
*** Assertion failure in -[NSHTMLReader _addAttachmentForElement:URL:needsParagraph:usePlaceholder:], /SourceCache/UIFoundation_Sim/UIFoundation-78/UIFoundation/TextSystem/NSHTMLReader.m:1478
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Unable to find missing_image.tiff!' 
```

当用户在另一个应用程序中使用复制命令时，我无法阻止他们选择图像。我也不想禁止在我的应用程序中粘贴。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T22:49:32.697

这是一个可怕的黑客攻击，但我确实找到了避免崩溃的方法。简而言之，我将 UITextView 子类化为覆盖粘贴命令，并将粘贴板转换为插入 UITextView 的字符串。

```
- (void)paste:(id)sender {    
    UIPasteboard *pasteBoard = [UIPasteboard generalPasteboard];
    NSString *string = pasteBoard.string;
    NSLog(@"Pasteboard string: %@", string);
//  [pasteBoard setValue:@"Please work you miserable bastard!" forPasteboardType:(NSString *)kUTTypeUTF8PlainText];
//  [super paste:sender]; // Doesn't work for unknown reason.
    [self insertText:string];
} 
```

欢迎任何更好的建议...

# php - 如何在php中将特定的工作日增加一？

> ID：13301061
> 
> 赞同：3
> 
> 时间：2012-11-09T02:02:22.053
> 
> 标签：php

假设我有一个变量`$day`。它可以是从`Monday`到 的任何东西`Sunday`。我如何使用该`$day`变量并将其递增`1 day`？

比方说，我有`$day = "Friday"`. 如何将其增加到 a `Saturday`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:15:43.893

使用[date()](http://php.net/manual/en/function.date.php)和[strtotime()](http://php.net/manual/en/function.strtotime.php)将 '+1 day' 添加到您的字符串中：

```
<?php
$day = "friday";
$day = date('D',strtotime($day.'+1 day'));
echo $day; // "Saturday"
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:08:58.400

使用数组。在不久的将来，工作日几乎不可能改变（讽刺）

```
// $weekday can be a string or a numeric value (1=Monday, 0,7=Sunday)
function getNextDayOfWeek($weekday, $count = 1) {
    static $weekdays = array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');

    if (!is_numeric($weekday)) {
        $weekday = (int) array_search(ucfirst(strtolower($weekday)), $weekdays);
    }
    // make $count positive!
    if ($count < 0) $count = ($count % -7) + 7;

    return $weekdays[($weekday + $count) % 7];
} 
```

如果您担心本地化，请使用翻译数组:)

```
$weekdays_fr = array('Monday' => 'lundi', 'Tuesday' => 'mardi', ...);

$nextDay_fr = $weekdays_fr[getNextDayOfWeek('Friday')];  //= 'samedi' 
```

****编辑****

这是使用内置 PHP 函数的另一种方法，但我仍然更喜欢数组解决方案。

```
$weekday = 'Friday';

$nextDay = strftime('%A', strtotime("{$weekday} +1 day")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T02:21:23.397

这是一个相当干净的解决方案，不使用数组：

```
$day = "Monday"
$NextDay = strtotime("+1 day", strtotime($day));
echo date("l", $NextDay); 
```

综合解决方案：

```
$day = "Monday";
echo date("l", strtotime("+1 day", strtotime($day))); 
```

请记住，`strtotime("Monday")`将从当前日期的下周一返回。干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T02:11:11.480

你最好使用一个数组：

```
$your_integer = 10;
$weekdays = array('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday');
print($weekdays[$your_integer % 7]); 
```

通过递增`$your_integer`，您将循环遍历`$weekdays`-array; 模运算 ( `%`) 使您保持在正确的范围内，因此 10 % 7 将产生 3，因此输出将是星期四。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T02:13:14.350

重复使用可能更简单一些：

```
$nextday = array(
    "Monday" => "Tuesday",
    "Tuesday" => "Wednesday",
    "Wednesday" => "Thursday",
    "Thursday" => "Friday",
    "Friday" => "Saturday",
    "Saturday" => "Sunday",
    "Sunday" => "Monday",
);

$day = $nextday[$day]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T02:13:32.560

对数组中的旋转模式进行很好的思考，但以防万一你试图复制时间函数，不要这样做。PHP 有一个简洁的**strtotime()**可以创造奇迹。

```
$ts = strtotime( "+3 day", strtotime("December 30, 2007"));
echo date("r", $ts ); 
```

这给了你：

`Wed, 02 Jan 2008 00:00:00 -0500`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T02:14:27.110

使用数组会更好。但这也可以。

```
$day = "Friday";
$next_day = date('l', strtotime("{$day} +1 DAY")); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-09T17:38:48.163

参见[strtotime()](http://www.php.net/manual/en/function.strtotime.php)和[strftime()](http://www.php.net/manual/en/function.strftime.php)

```
$time = strtotime(<your_date_as_a_string>) + (60*60*12); // seconds in 12 hours
$date = strftime(<format_you want>, $time); // or date(<same params>) 
```

# c++ - boost::adaptors::transformed 后跟 boost::adaptors::filtered 调用函数两次

> ID：13301062
> 
> 赞同：11
> 
> 时间：2012-11-09T02:02:24.617
> 
> 标签：c++, boost, functional-programming, boost-range

我正在尝试将 a （让我们称之为）链接`boost::adaptors::transformed`到`map`a `boost::adaptors::filtered`（让我们称之为`filter`） - 这个想法是映射 a在一个范围内`fun`返回“也许”（在我的情况下是 a `std::pair<bool, T>`）并仅输出部分结果。我的第一个实现：

```
define BOOST_RESULT_OF_USE_DECLTYPE // enable lambda arguments for Boost.Range
#include <boost/range/adaptor/filtered.hpp>
#include <boost/range/adaptor/transformed.hpp>

struct OnlyEven
{
    typedef int argument_type;
    typedef std::pair<bool, int> result_type;
    result_type operator()(argument_type x) const
    {
        std::cout << "fun: " << x << std::endl;
        return std::make_pair(x % 2 == 0, x);
    }
} only_even;

int main(int argc, char* argv[])
{
    auto map = boost::adaptors::transformed;
    auto filter = boost::adaptors::filtered;
    int v[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    auto s = v | map(only_even) | filter([](std::pair<bool, int> x)->bool{ return x.first; });
    for (auto i : s) {}
    return 0;
} 
```

当我运行它时，我得到：

```
fun: 1
fun: 2
fun: 2
fun: 3
fun: 4
fun: 4
fun: 5
fun: 6
fun: 6
fun: 7
fun: 8
fun: 8
fun: 9
fun: 10
fun: 10 
```

每次`predicate`is `true`，`fun` 都会被调用两次。这是预期的行为吗？我做错了什么，或者这是/是Boost中的一个错误（我使用的是1.48）？

**编辑**：我在 Boost 的主干版本上试过这个，它仍然会发生。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T02:21:23.017

第一次在传递给您的过滤器时调用它 - 在增量期间。

第二次在取消引用期间在您的基于范围的 - 中调用它。它不缓存结果。

即，只是通过范围：

```
++++++++++boost::begin(s); 
```

[给出](http://coliru.stacked-crooked.com/a/7845987537bed8c4)：

```
fun: 1
fun: 2
fun: 3
fun: 4
fun: 5
fun: 6
fun: 7
fun: 8
fun: 9
fun: 10 
```

检查[filter_iterator](http://www.boost.org/doc/libs/1_52_0/boost/iterator/filter_iterator.hpp)的实现（过滤是基于它）。它不做任何缓存。

> 如果转型成本高怎么办？

过滤不使用输入来自哪里的知识。

结果的缓存将需要增加过滤迭代器的大小。想想缓存结果应该存储在哪里。它应该被复制到过滤迭代器的某个成员中。

因此，基本上，在缓存空间和取消引用计数之间存在权衡。

* * *

编辑：我已经对 cached_iterator 进行了概念验证，它缓存了取消引用的结果，并在每次推进时使其无效。另外，我已经制作了相应的范围适配器。

这里是如何使用的：

```
auto s = v | transformed(only_even) | cached | reversed | cached | flt | flt | flt | flt | flt | flt; 
```

您应该将**缓存**放在要缓存结果的链中。

[现场演示](http://coliru.stacked-crooked.com/a/dd12bb0af33c4e67)

```
#include <boost/range/adaptor/filtered.hpp>
#include <boost/range/adaptor/transformed.hpp>
#include <boost/range/adaptor/reversed.hpp>
#include <boost/range/adaptor/map.hpp>
#include <boost/range/algorithm.hpp>

#include <iostream>
#include <ostream>

// ____________________________________________________________________________________________ //

#include <boost/iterator/iterator_adaptor.hpp>
#include <boost/range/iterator.hpp>
#include <iterator>

namespace impl
{

template<typename Iterator>
class cached_iterator : public boost::iterator_adaptor<cached_iterator<Iterator>,Iterator>
{
    typedef boost::iterator_adaptor<cached_iterator,Iterator> super;
    mutable bool invalidated;
    mutable typename std::iterator_traits<Iterator>::value_type cached;    
public:
    cached_iterator() : invalidated(true) {}
    cached_iterator(const Iterator &x) : super(x), invalidated(true) {}

    typename std::iterator_traits<Iterator>::value_type dereference() const
    {
        if(invalidated)
        {
            cached = *(this->base());
            invalidated=false;
            return cached;
        }
        else
        {
            return cached;
        }
    }
    void increment()
    {
        invalidated=true;
        ++(this->base_reference());
    }
    void decrement()
    {
        invalidated=true;
        --(this->base_reference());
    }
    void advance(typename super::difference_type n)
    {
        invalidated=true;
        (this->base_reference())+=n;
    }
};

template<typename Iterator> cached_iterator<Iterator> make_cached_iterator(Iterator it)
{
    return cached_iterator<Iterator>(it);
}

template< class R >
struct cached_range : public boost::iterator_range<cached_iterator<typename boost::range_iterator<R>::type> >
{
private:
    typedef boost::iterator_range<cached_iterator<typename boost::range_iterator<R>::type> > base;
public:
    typedef R source_range_type;
    cached_range( R& r )
        : base( make_cached_iterator(boost::begin(r)), make_cached_iterator(boost::end(r)) )
    { }
};

template<typename InputRange>
inline cached_range<const InputRange> cache(const InputRange& rng)
{
    return cached_range<const InputRange>(rng);
}

template<typename InputRange>
inline cached_range<InputRange> cache(InputRange& rng)
{
    return cached_range<InputRange>(rng);
}

struct cache_forwarder{};

cache_forwarder cached;

template< class InputRange >
inline cached_range<const InputRange>
operator|( const InputRange& r, cache_forwarder )
{
    return cache(r);
}

template< class InputRange >
inline cached_range<InputRange>
operator|( InputRange& r, cache_forwarder )
{
    return cache(r);
}

} // namespace impl

// ____________________________________________________________________________________________ //

struct OnlyEven
{
    typedef int argument_type;
    typedef std::pair<bool, int> result_type;
    result_type operator()(argument_type x) const
    {
        std::cout << "fun: " << x << std::endl;
        return std::make_pair(x % 2 == 0, x);
    }
} only_even;

int main()
{
    using namespace impl;
    using namespace boost::adaptors;
    using namespace std;

    int v[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    auto flt =  filtered([](std::pair<bool, int> x)->bool{ return x.first; });

    auto s = v | transformed(only_even) | cached | reversed | cached | flt | flt | flt | flt | flt | flt;

    boost::copy(s | map_values, ostream_iterator<int>(cout,"\n") );
    return 0;
} 
```

输出是：

```
fun: 10
10
fun: 9
fun: 8
8
fun: 7
fun: 6
6
fun: 5
fun: 4
4
fun: 3
fun: 2
2
fun: 1 
```

# android - 是否有日历事件的持久键

> ID：13301064
> 
> 赞同：0
> 
> 时间：2012-11-09T02:02:29.610
> 
> 标签：android, events, calendar

我的应用需要将信息与日历事件相关联。为此，它需要每个事件的持久 ID，以便它可以在事件时间更改时跟踪事件或检测事件何时被删除。

此外，我想要一个日历原生的 id，而不仅仅是特定设备上的唯一 ID，这样如果我的应用程序在另一个 android 设备甚至另一个平台上运行，它就会很有用。

我查看了 _ID 和 _SYNC_ID。似乎两者都仅在特定设备上是唯一且持久的，而不是跨设备。我想要的键是本机事件键，来自它所属的日历。例如，对于 Outlook 事件，我想我想要 Outlook 的密钥。

日历 api 是否提供这样的密钥？如果没有，是否有办法获得我正在寻找的本机密钥？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:25:36.707

据我所知，Event_ID 与您将获得的一样持久。它是 PK，因此除非在删除一行后重用 PK，否则它应该是可靠的。唯一的例外是用户清除日历数据库并重新同步。在那种情况下，我认为所有的 PK 都将是全新的。

下面是来自 CalendarDatabaseHelper.java 的一些源代码，显示 Event._ID 是 PK：

```
 db.execSQL("CREATE TABLE Events (" +
            "_id INTEGER PRIMARY KEY," +
            ACCOUNT_NAME + " TEXT," +
            ACCOUNT_TYPE + " TEXT," +
            "_sync_id TEXT," +
            "_sync_version TEXT," +
            "_sync_time TEXT," +            // UTC
            "_sync_local_id INTEGER," +
            "_sync_dirty INTEGER," +
            "_sync_mark INTEGER," + // To filter out new rows
            "calendar_id INTEGER NOT NULL," +
            "htmlUri TEXT," +
            "title TEXT," +
            "eventLocation TEXT," +
            "description TEXT," +
            "eventStatus INTEGER," +
            "selfAttendeeStatus INTEGER NOT NULL DEFAULT 0," +
            "commentsUri TEXT," +
            "dtstart INTEGER," +               // millis since epoch
            "dtend INTEGER," +                 // millis since epoch
            "eventTimezone TEXT," +         // timezone for event
            "duration TEXT," +
            "allDay INTEGER NOT NULL DEFAULT 0," +
            "visibility INTEGER NOT NULL DEFAULT 0," +
            "transparency INTEGER NOT NULL DEFAULT 0," +
            "hasAlarm INTEGER NOT NULL DEFAULT 0," +
            "hasExtendedProperties INTEGER NOT NULL DEFAULT 0," +
            "rrule TEXT," +
            "rdate TEXT," +
            "exrule TEXT," +
            "exdate TEXT," +
            "originalEvent TEXT," +  // _sync_id of recurring event
            "originalInstanceTime INTEGER," +  // millis since epoch
            "originalAllDay INTEGER," +
            "lastDate INTEGER," +               // millis since epoch
            "hasAttendeeData INTEGER NOT NULL DEFAULT 0," +
            "guestsCanModify INTEGER NOT NULL DEFAULT 0," +
            "guestsCanInviteOthers INTEGER NOT NULL DEFAULT 1," +
            "guestsCanSeeGuests INTEGER NOT NULL DEFAULT 1," +
            "organizer STRING," +
            "deleted INTEGER NOT NULL DEFAULT 0," +
            "dtstart2 INTEGER," + //millis since epoch, allDay events in local timezone
            "dtend2 INTEGER," + //millis since epoch, allDay events in local timezone
            "eventTimezone2 TEXT," + //timezone for event with allDay events in local timezone
            "syncAdapterData TEXT" + //available for use by sync adapters
            ");"); 
```

# ios - ios开发UIPanGesture

> ID：13301067
> 
> 赞同：0
> 
> 时间：2012-11-09T02:03:10.570
> 
> 标签：ios, uigesturerecognizer

我正在尝试使用 UIPanGestureRecognizer 移动视图。我的问题是状态结束，延迟了 1 秒。

它发生在模拟器中。这是正常的吗？还是我的代码有问题？

谢谢大家！

```
if(recognizer.state == UIGestureRecognizerStateEnded){
    float y = self.boxView.center.y;
    float move = 300;

    [UIView animateWithDuration:1.0 delay:0
                        options:UIViewAnimationCurveEaseOut
                     animations:^ {
                         self.boxView.center = CGPointMake(self.boxView.center.x, move);
                     }
                     completion:^(BOOL finished) {
                     }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:42:24.837

那是因为它花费了最后 1 秒的动画；你告诉它。尝试`self.boxView.center = CGPointMake(self.boxView.center.x, move);`不带`[UIView animateWithDuration...]`

# html - Flash 对象在 chrome 中的位置固定元素上

> ID：13301069
> 
> 赞同：1
> 
> 时间：2012-11-09T02:03:23.227
> 
> 标签：html, css, flash, google-chrome, cross-browser

我在网站的右上角有一个 absolute:position 下拉菜单（“Restaurantes”）。和一个闪光灯头。在 Firefox 和 IE 上我没有任何问题，但在 Chrome 上，固定下拉菜单位于 flash 元素后面。

flash 元素已经有 wmode:transparent 参数。

如果我将下拉菜单位置更改为绝对它可以工作，但我需要修复它。

您可以在以下地址找到该网站：

[http://ismapps.net/frisbysite/](http://ismapps.net/frisbysite/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:14:39.340

我通过将 of 设置`z-index`为`#flyout`上述任何内容来使其工作`5`：

```
#flyout {
   padding: 0px;
   margin: 0px;
   list-style: none;
   position: fixed;
   right: 0px;
   top: 0;
   display: block;
   z-index: 6; /* This is the fix */
} 
```

PS：那是一些美味的鸡肉:)

# plugins - ModX Revo：前端登录系统？

> ID：13301073
> 
> 赞同：0
> 
> 时间：2012-11-09T02:03:51.400
> 
> 标签：plugins, login, modx, modx-revolution

我想知道是否有人知道一个好的插件或为网络用户设置登录系统的方法，可以将他们带到我网站的私人页面（而不是管理部分）。

登录时，每个用户的登录页面都会不同。有人知道ModX是否可以做到这一点？或者编写一个自定义的 PHP 代码段会更好吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:26:31.087

你会为 modx 使用额外的登录 - 这将完成你想要完成的 90% 的工作。至于根据用户组成员身份将用户重定向到不同的页面或在登录后显示不同的内容，您有几个选择。

1.  编写一个片段以放置在 loginResourceId 参数指定的资源中，该资源可以检测用户的组并相应地重定向它们或仅显示不同的内容。

2.  编写一个在 onWebLogin 事件上触发的插件 [检查那个 - 我很确定这是名称，但不是 100%]，它与选项 1 基本相同，检测用户组并相应地重定向。

两者都可以，选项 2 更酷:)

# java - 如何在最短的时间内克隆 java 中的输入流

> ID：13301076
> 
> 赞同：6
> 
> 时间：2012-11-09T02:04:01.943
> 
> 标签：java, clone, inputstream, bufferedinputstream

有人能告诉我如何克隆输入流，尽可能少地花费创建时间吗？我需要多次克隆输入流以使用多种方法来处理 IS。我已经尝试了三种方法，但由于某种原因，事情不起作用。

方法 #1：感谢 stackoverflow 社区，我发现以下链接很有帮助，并将代码片段合并到我的程序中。

[如何克隆 InputStream？](https://stackoverflow.com/questions/5923817/how-to-clone-an-inputstream)

但是，使用此代码可能需要一分钟（对于 10MB 文件）来创建克隆的输入流，并且我的程序需要尽可能快。

```
 int read = 0;
    byte[] bytes = new byte[1024*1024*2];

    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    while ((read = is.read(bytes)) != -1)
        bos.write(bytes,0,read);
    byte[] ba = bos.toByteArray();

    InputStream is1 = new ByteArrayInputStream(ba);
    InputStream is2 = new ByteArrayInputStream(ba);
    InputStream is3 = new ByteArrayInputStream(ba); 
```

方法 #2：我也尝试使用 BufferedInputStream 克隆 IS。这很快（最慢的创建时间 == 1 毫秒。最快的 == 0 毫秒）。但是，在我发送 is1 进行处理后，处理 is2 和 is3 的方法抛出了一个错误，说没有要处理的内容，几乎就像下面所有 3 个变量都引用了同一个 IS。

```
 is = getFileFromBucket(path,filename);
    ...
    ...
    InputStream is1 = new BufferedInputStream(is);
    InputStream is2 = new BufferedInputStream(is);
    InputStream is3 = new BufferedInputStream(is); 
```

方法#3：我认为编译器在骗我。对于上面的两个示例，我检查了 is1 的 markSupported()。它返回了 true，所以我认为我可以运行

```
 is1.mark() 
    is1.reset() 
```

要不就

```
 is1.reset(); 
```

在将 IS 传递给我各自的方法之前。在上面的两个例子中，我都收到一个错误，说它是一个无效的标记。

我现在没有想法，所以提前感谢你能给我的任何帮助。

PS根据我从人们那里收到的评论，我需要澄清一些关于我的情况的事情：1）这个程序在VM上运行2）输入流是从另一种方法传递给我的。我没有从本地文件中读取 3) 输入流的大小未知

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T15:56:50.220

> *如何克隆输入流，尽可能减少创建时间？我需要多次克隆输入流以使用多种方法来处理 IS*

您可以创建某种自定义`ReusableInputStream`类，其中您还可以在第一次完整读取时*立即*写入内部 ，然后在读取最后一个字节时将[`ByteArrayOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)其包装在 a中，最后在随后自动翻转的完整读取中重用相同的内容当达到极限时。这使您免于像第一次尝试那样进行一次完整阅读。[`ByteBuffer`](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)`ByteBuffer`

这是一个基本的启动示例：

```
public class ReusableInputStream extends InputStream {

    private InputStream input;
    private ByteArrayOutputStream output;
    private ByteBuffer buffer;

    public ReusableInputStream(InputStream input) throws IOException {
        this.input = input;
        this.output = new ByteArrayOutputStream(input.available()); // Note: it's resizable anyway.
    }

    @Override
    public int read() throws IOException {
        byte[] b = new byte[1];
        read(b, 0, 1);
        return b[0];
    }

    @Override
    public int read(byte[] bytes) throws IOException {
        return read(bytes, 0, bytes.length);
    }

    @Override
    public int read(byte[] bytes, int offset, int length) throws IOException {
        if (buffer == null) {
            int read = input.read(bytes, offset, length);

            if (read <= 0) {
                input.close();
                input = null;
                buffer = ByteBuffer.wrap(output.toByteArray());
                output = null;
                return -1;
            } else {
                output.write(bytes, offset, read);
                return read;
            }
        } else {
            int read = Math.min(length, buffer.remaining());

            if (read <= 0) {
                buffer.flip();
                return -1;
            } else {
                buffer.get(bytes, offset, read);
                return read;
            }
        }

    }

    // You might want to @Override flush(), close(), etc to delegate to input.
} 
```

*（请注意，实际作业是在 in`int read(byte[], int, int)`而不是 in 中执行的`int read()`，因此当调用者本身也使用`byte[]`缓冲区进行流式传输时，预计会更快）*

您可以按如下方式使用它：

```
InputStream input = new ReusableInputStream(getFileFromBucket(path,filename));
IOUtils.copy(input, new FileOutputStream("/copy1.ext"));
IOUtils.copy(input, new FileOutputStream("/copy2.ext"));
IOUtils.copy(input, new FileOutputStream("/copy3.ext")); 
```

至于性能，每 10MB 1 分钟更可能是硬件问题，而不是软件问题。我的 7200rpm 笔记本电脑硬盘在 1 秒内完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T03:06:06.623

> 但是，使用此代码可能需要一分钟（对于 10MB 文件）来创建克隆的输入流，并且我的程序需要尽可能快。

复制流需要时间，并且（通常）这是克隆流的唯一方法。除非您收紧问题的范围，否则性能可以显着提高的可能性很小。

以下是可以改进的几种情况：

*   如果您事先知道流中的字节数，那么您可以直接读入最终的字节数组。

*   如果您知道数据来自文件，则可以为该文件创建一个内存映射缓冲区。

但根本问题是移动大量字节需要时间。10Mb 文件需要 1 分钟（使用问题中的代码）这一事实*表明*，真正的瓶颈根本不在 Java 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T06:49:18.267

关于您的第一种方法，包括将所有字节放入 ByteArrayOutputStream 中：

*   首先，这种方法会消耗大量内存。如果您不能确保您的 JVM 启动时分配了足够的内存，那么它将需要在处理您的流期间动态地请求内存，这非常耗时。
*   您的 ByteArrayOutputStream 最初是使用 32 字节的缓冲区创建的。每次您尝试将某些内容放入其中时，如果它不适合现有的字节数组，则会创建一个新的更大的数组并将旧字节复制到新的字节中。由于您每次都使用 2MB 输入，因此您将强制 ByteArrayOutputStream 一遍又一遍地将其数据复制到更大的数组中，从而每次将其数组的大小增加 2MB。
*   由于旧数组是垃圾，它们的内存很可能正在被垃圾收集器回收，这会使您的复制过程更加缓慢。
*   也许您应该使用指定初始缓冲区大小的构造函数来定义 ByArrayOutputStream。您设置的尺寸越准确，过程应该越快，因为需要的中间副本越少。

您的第二种方法是虚假的，您不能在不同的其他流中装饰相同的输入流并期望这些东西能够正常工作。由于字节被一个流消耗，内部流也被耗尽，并且无法为其他流提供准确的数据。

在我扩展答案之前，让我问一下，您的其他方法是否期望接收在单独线程上运行的输入流的副本？因为如果是这样，这听起来像是 PipedOutputStream 和 PipedInputStream 的工作？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T06:33:06.220

您是否打算将单独的方法并行或顺序运行？如果按顺序进行，我认为没有理由克隆输入流，因此我不得不假设您计划分拆线程来管理每个流。

我现在不在计算机附近进行测试，但是我认为您最好以块的形式读取输入，例如 1024 字节，然后将这些块（或块的数组副本）推送到您的带有附加到其线程末端的输入流的输出流。如果没有可用数据等，请让您的读者屏蔽。

# ruby - Lambda 作为参数传递给方法，错误数量的参数错误

> ID：13301078
> 
> 赞同：1
> 
> 时间：2012-11-09T02:04:11.790
> 
> 标签：ruby, syntax, lambda, argument-passing

尝试通过传递 lambda 对集合中的项目值求和。我认为这只是一些语法错误：

```
# inputs
setCosts = {["A"] => 3, ["B"] => 4, ["A", "B"] => 5 }
collectionOfSets= [[["A"], ["B"]], [["A"], ["A", "B"]]]
# method and lambda
getSetCost = ->(x) { setCosts[x] }
def SumEachBy(collec, &lamb)    # stack trace starts here
    sum = 0
    collec.each { |x| sum += lamb(x) }
    return sum
end
# process output
collecValues = Hash[collectionOfSets.map { |set| [set, SumEachBy(set, getSetCost)] }] 
```

我越来越：

```
ArgumentError: wrong number of arguments (2 for 1) 
```

我期望`collecValues`成为：

```
{[["A"], ["B"]] => 7, [["A"], ["A", "B"]] => 8} 
```

我的错误在哪里？

顺便说一句，如果在 Ruby 中有更好的方法可以做到这一点，也请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:13:05.847

在最后一个参数之前添加`&`意味着它将绑定到与方法调用一起使用的块，并且您希望将 lambda 作为参数传递。

只需删除它 ( `def SumEachBy(collec, lamb)`) 并享受您的 lambda :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T02:09:32.730

我不知道孔代码，但您可以使用注入更新总和部分：

```
def SumEachBy(collec, lamb) 
  collection.inject(0) { |sum, value| sum += value }
end 
```

我完全可以理解你的代码，你想在这里实现什么？

我按照安东的建议编辑答案。=)

# c# - 计算校验和相似度

> ID：13301079
> 
> 赞同：0
> 
> 时间：2012-11-09T02:04:15.037
> 
> 标签：c#, .net

我昨天发布了关于使用出现在 1 中而不是另一个中的单词数量来计算 2 个文件之间的差异百分比的相似性。这是一种糟糕的工作方式，所以我认为更好的方法是制作 MD5或两个文件的 CRC 校验和并使用它来计算差异 .. 制作校验和是很容易的部分，但我不确定如何确定差异，我知道获得百分比是这样的：

```
 double sameWordPercentage = (1.0 * n / m) * 100;
    Console.WriteLine(Math.Round(sameWordPercentage, 2)  + "% Similar"); 
```

感谢您的帮助.. 只是不知道我将如何做到这一点，也许一些伪代码也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:26:20.433

MD5 和 CRC 都是散列算法，它们为相似的输入输出非常不同的结果（这是设计使然）。

我认为您最好检查一些[Locality-sensitive 散列](http://en.wikipedia.org/wiki/Locality_sensitive_hashing)算法，例如[MinHash](http://en.wikipedia.org/wiki/MinHash)，正如他们在[这个问题](https://stackoverflow.com/questions/3247640/hash-function-to-index-similar-text)中推荐的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:23:25.040

任何正常含义的散列都会对大量信息松散，以使相似性比较有意义。加密哈希（MD5、SHA1/SHA256、...）几乎可以保证对于此类比较毫无用处，因为它们从相似的输入中显式地产生非常不同的值。

您需要构造一些特殊的“哈希”。即使用已知单词的索引列表（如“house”、“door”、“window”）作为哈希。比查看您计划比较的 2 个文件是否具有相似的单词列表（检查两个单词索引列表是否都已排序会非常便宜）。

# php - PHP重载，单例实例

> ID：13301081
> 
> 赞同：0
> 
> 时间：2012-11-09T02:04:30.430
> 
> 标签：php, singleton, overloading

我已经创建了自己的 MVC 框架，并且很好奇其他框架如何将属性从“控制器”发送到“视图”。Zend 做了一些事情，`$this->view->name = 'value';`我的代码是：

文件：services_hosting.php

```
class services_hosting extends controller {
    function __construct($sMvcName) {
        parent::__construct($sMvcName);

        $this->setViewSettings();
    }

    public function setViewSettings() {        
        $p = new property;
        $p->banner = '/path/to/banners/home.jpg';
    }
} 
```

文件：controller.php

```
class controller  {
    public $sMvcName = "home";

    function __construct($sMvcName) {
        if ($sMvcName) {
            $this->sMvcName = $sMvcName;
        }

        include('path/to/views/view.phtml');
    }

    public function renderContent() {
        include('path/to/views/'.$this->sMvcName.'.phtml');
    }
} 
```

文件：property.php

```
class property {

    private $data = array();
    protected static $_instance = null;

    public static function getInstance() {
        if (null === self::$_instance) {
            self::$_instance = new self();
        }

        return self::$_instance;
    }

    public function __set($name, $value) {
        $this->data[$name] = $value;
    }

    public function __get($name) {
        if (array_key_exists($name, $this->data)) {
            return $this->data[$name];
        }
    }

    public function __isset($name) {
        return isset($this->data[$name]);
    }

    public function __unset($name) {
        unset($this->data[$name]);
    }

} 
```

在我的 services_hosting.phtml “视图”文件中，我有：

```
<img src="<?php echo $this->p->banner ?>" /> 
```

这只是行不通。我是在做一些根本错误的事情还是我的逻辑不正确？我现在似乎在兜圈子。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:25:14.047

我的前控制器看起来像这样

```
class front {

    private $sMvcName = 'home';

    function __construct() {
        $aUriParts = $this->getUriParts();

        if ($aUriParts[0]) {
            $this->sMvcName = implode("_", $aUriParts);   
        }

        $this->constructController();
    }

    private function constructController() {
        $this->view = new property();
        $sControllerName = $this->sMvcName;
        new $sControllerName($this->sMvcName);
    }

    private function getUriParts() {
        $sUri = $_SERVER['REQUEST_URI'];
        $sUri = trim($sUri, "/");
        $sUri = str_replace("-", "_", $sUri);
        $aUriParts = explode("/", $sUri);
        return $aUriParts;
    }

} 
```

services_hosting.php 现在看起来像这样

```
class services_hosting extends controller {

    function __construct($sMvcName) {
        $this->setViewSettings();

        parent::__construct($sMvcName);
    }

    public function setViewSettings() {
        $this->view->banner = '/assets/images/banners/home_02.jpg';
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:25:30.453

你能检查这是否有效吗？

在您的 controller.php 中，您创建视图对象

```
 function __construct() {
    $this->view = new property();
} 
```

现在在我们的服务托管控制器中

```
class services_hosting extends controller {
function __construct($sMvcName) {
    parent::__construct($sMvcName);

$this->view->banner = '/path/to/banners/home.jpg';
} 
```

}

现在应该可以在您的视图文件中访问横幅变量。

```
<img src="<?php echo $this->banner ?>" /> 
```

希望这会奏效...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:47:40.280

```
 <img src="<?php echo $this->p->banner ?>" /> 
```

暗示你在一个类的实例中。你说它是一个外部文件，所以你可能会有类似的东西

```
 $a = new services_hosting(); 
```

在这种情况下，而不是

```
 $this->banner; 
```

你将会拥有

```
$a->banner; 
```

# svn - svndumpfilter2 vs svndumpfilter3

> ID：13301083
> 
> 赞同：2
> 
> 时间：2012-11-09T02:04:51.680
> 
> 标签：svn, svnadmin, svndumpfilter

我一直在 svndumpfilter2 中遇到内存问题（有人将 4Gb 的二进制文件签入到我的 subversion 中......），它只是在那个特定的提交上崩溃。

```
svnadmin dump repo/ | python svndumpfilter2 repo/ keep/this/path > myrepo.dump 
```

每次都崩溃

所以我尝试了 svndumpfilter3，来自[git repo](https://github.com/bmwiedemann/svndumpfilter3) 的最新副本当我查看 svndumpfilter3 的最新副本时 - 它正在寻找一个环境变量“MODULE”。

我找不到这个记录，当我设置它时，转储似乎不起作用。

有人有关于 svndumpfilter3 的更新指南吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:35:52.143

使用[https://github.com/bmwiedemann/svndumpfilter3.git](https://github.com/bmwiedemann/svndumpfilter3.git)中的 zerofilefix 分支——它对我有用。

zerofilefix 分支不包含模块环境变量代码。该代码是最近添加的，似乎是作者的本地环境变量。我在 python 或 subversion 文档中也找不到任何对它的引用。

# php - 大文件上传器

> ID：13301086
> 
> 赞同：3
> 
> 时间：2012-11-07T16:23:31.780
> 
> 标签：php

我使用 w3schools 教程（[这里](http://www.w3schools.com/php/php_file_upload.asp)）制作了一个基本的上传脚本，我基本上想知道是否有任何方法可以将上传大小增加到 5Gb 以上。我尝试更改脚本以上传大型视频文件，但它错误地告诉我文件太大。谁能帮助我解决我遇到的问题

自己尝试上传器（[上传](http://samstreettesting.webuda.com/)器），它接受 .mov 格式，但就像我说的那样，我的错误在于上传文件的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:21:21.203

正如评论中提到的其他人所提到的，您可以将文件“分块”成切片，然后逐个上传。上传所有切片后，服务器将合并文件。一个工作演示是[http://dnduploader.filkor.org](http://dnduploader.filkor.org)。
你可以从它的源代码中学习，你可以在 Github 上找到什么（参见页面上的常见问题解答部分）。

一般来说，创建这样一个上传器并不是一件容易的事，但从中你可以学到一些关于当前文件上传“趋势”的新想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:04:29.333

正如关键点所提到的，您很可能需要对上传进行分块。

还有许多其他附加因素需要注意 - 例如错误恢复和连接中断。

它可能不适合您的用途，但过去我曾成功使用过商业组件：

[http://www.aurigma.com/UploadSuite/](http://www.aurigma.com/UploadSuite/)

入门价格相当高，但提供了客户端和服务器端的多平台组件。与构建和故障排除自制解决方案相比，Aurigma 提供了巨大的投资回报率。

# php - 在 Bluehost 上使用 PEAR Mail 时 PHP 包含路径问题

> ID：13301087
> 
> 赞同：3
> 
> 时间：2012-11-09T02:05:41.873
> 
> 标签：php, path, include, gmail, pear

我正在尝试修改使用 PHP 从表单中通过电子邮件发送数据的 TemplateMonster 模板。它默认使用 localhost 作为电子邮件服务器，但我的客户已经使用了 gmail 的邮件交换服务器并且喜欢这种方式。我正在使用这个问题的最佳答案中的代码：[SO question](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

我想我已经设置得很好，除了主机将 PEAR 和 PHP 安装到一个预定义的文件夹并且我正在处理一个子域。尽管我已修改 php.ini 以尝试包含正确的路径，但我收到有关无法找到 mail.php 的错误。这是我的错误（为了保护我的客户的隐私而更改了一些名称）：

[08-Nov-2012 10:52:15] PHP 警告：require_once(../../mail.php) [function.require-once]：无法打开流：/home6/clientname 中没有这样的文件或目录/public_html/subdomainname/bin/contactFormHandler.php 在第 3 行 [2012 年 11 月 8 日 10:52:15] PHP 致命错误：require_once() [function.require]：无法打开所需的 '../../mail. /home6/clientname/public_html/subdomainname/bin/contactFormHandler.php 中的 php' (include_path='.:/usr/lib64/php:/usr/lib/php:/usr/share/pear:/usr/php')在第 3 行

这是树： /home6/clientname/php/mail.php 是我要包含的文件 /home6/clientname/public_html/subdomainname/bin/contactFormHandler.php 是引发错误的文件

这是我来自contactFormHandler.php的代码，包括：require_once“mail.php”；

我尝试了各种迭代，例如“../../../php/mail.php”无济于事。关于我需要做什么以便子域上的 PHP 文件可以“看到”我试图包含的 PEAR 文件的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:26:34.957

尝试 Mail.php 而不是 mail.php

PEAR 包的文件名是 Mail.php，Unix/Linux 系统区分大小写。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-20T11:47:36.150

首先，您需要联系 Bluehost 支持并确保 Mail 包已安装并在您的服务器上可用。

他们还将就 Mail.php 的正确相对路径向您提供建议

# c++ - 如何在 Code::Blocks (Windows) 上构建 Boost 库？

> ID：13301089
> 
> 赞同：1
> 
> 时间：2012-11-09T02:05:47.310
> 
> 标签：c++, boost

呃，我累了。我对这件事的所有搜索都是徒劳的。无论我找到多少解决方案，我都找不到构建 Boost 库的方法。

因此，我可以简单地将“boost”根目录放入代码块的“包含”中，并跳过构建大多数库。那么，我如何单独构建非仅标头库？

请注意，我对 .bat、cmd 和所有这些东西完全是外行。即使我尝试的任何我已经找到的假设解决方案实际上都可以工作，我只是无法对实际指示的任何内容做出正面或反面。

伙计，我只想能够使用 boost::thread 的。：一世

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T02:42:19.933

这是指南：[BoostWindowsQuickRef](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef)，但前半部分可能有点混乱和过时。

*   将 boost 解压缩到您选择的单独目录中（即`C:\boost_1_52_0`，**不要**只是将其放入 code::blocks 包含目录）
*   确保您可以从 Windows 命令行运行 gcc：

    ```
    C:\> gcc --version
    gcc (GCC) 4.6.2 
    ```

    如果此步骤失败，您必须添加`<mingw installation dir>\bin`到您的路径环境变量：

    ```
    c:\> PATH=%PATH%;C:\PathToMinGW\bin 
    ```

*   使用 gcc 作为参数运行 bootstrap 以使用 gcc 构建 boost.build 引擎：

    ```
    C:\boost_1_52_0> bootstrap.bat gcc 
    ```

*   运行 bjam 并指定工具集，在这种情况下也是 gcc，以构建库：

    ```
    C:\boost_1_52_0> b2.exe toolset=gcc 
    ```

*   按照 Code::Blocks 中的指南[将 Boost 添加到现有项目中](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef#Add_Boost_to_an_existing_project_in_Code%3a%3aBlocks)，了解如何设置 code::blocks 以进行 boost。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T19:35:07.573

“那么，我如何单独构建非仅标头库？”

例如，如果您使用 MinGW 作为编译器选择，则打开命令提示符，导航到您下载/提取的 boost 根目录，然后按以下方式运行 bootstrap.bat 命令：

> bootstrap.bat mingw
> 
> b2.exe

运行 bootstrap 命令将生成与 MinGW 相关的库文件（默认为 stage/lib 子目录），您需要在 Code::Blocks 中链接到这些文件，其中将包括 Boost.Threads 所需的库文件，例如：

![在此处输入图像描述](../Images/f255fd859fd80f733027b834efe1ee8e.png)

然后在 CodeBlocks 你需要

1.  在 Search 中设置 Boost 根目录的位置
2.  选择链接器选项卡并设置库文件的位置
3.  选择链接器设置选项卡添加必要的库名称，例如

有关更多屏幕截图和说明，请参阅此链接：

[http://www.technical-recipes.com/2014/configuring-codeblocks-to-use-the-boost-libraries/](http://www.technical-recipes.com/2014/configuring-codeblocks-to-use-the-boost-libraries/)

# grails - 在 Grails 中仅查看您自己的数据

> ID：13301090
> 
> 赞同：3
> 
> 时间：2012-11-09T02:05:51.957
> 
> 标签：grails, spring-security, grails-orm

这似乎是一个基本问题，但我还没有找到明确的答案。我正在使用带有 Grails 的 spring-security-core 插件，并且我的 S2Users 有很多 Portfolios，而 Portfolios 有很多 Transactions。

当我去脚手架视图检查事务时，我怎么知道每个用户只看到他自己的事务？相反，如何创建一个可以查看所有用户的所有交易的用户？

我不清楚默认行为是什么，以及 Grails/Spring-Security 如何知道特定域类是否应该对所有人可见，而不是仅对关联用户可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:33:03.767

> 当我去脚手架视图检查事务时，我怎么知道每个用户只看到他自己的事务？

您将不得不修改脚手架视图以使其正常工作：

```
@Secured(['ROLE_USER'])
def list() {
   def authenticatedUser = User.findByUsername(springSecurityService.principal.username)
   def transactions = Transaction.findAllByUser(authenticatedUser)
   [transactions: transactions]
} 
```

以上将只允许经过身份验证的用户访问 list() 方法，并将获取登录用户的所有事务。

> 相反，如何创建一个可以查看所有用户的所有交易的用户？

您不会创建一个可以查看所有内容的用户，而是在您的控制器中创建一个允许特定用户查看所有内容的方法，例如：

```
@Secured(['ROLE_USER', 'ROLE_ADMIN'])
def list() {

   def authenticatedUser = User.findByUsername(springSecurityService.principal.username)
   def transactions = []
   if (SpringSecurityUtils.ifAnyGranted('ROLE_ADMIN')) {
       transactions = Transaction.list()
   }else{
       transactions = Transaction.findAllByUser(authenticatedUser)
   }
   [transactions: transactions]
} 
```

反正就是这样。根据需要进行调整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T09:18:35.863

有一些插件可以帮助您解决这个问题。我正在使用[Hibernate Filter 插件](http://grails.org/plugin/hibernate-filter)来达到这个目的，它可以帮助您限制 SQL，以便每个用户只能看到他/她自己的数据。然后，您可以使用您自己的 HibernateFilterFilters 实现覆盖，如果用户具有 ROLE_ADMIN（从插件复制源并适应），则禁用所有过滤器。

还有一些用于多租户的插件，但我似乎不确定这些插件的维护。我喜欢 Hibernate Filter 插件，它简单明了——但你必须将所有 .get() 调用更改为 .findById()，因为插件如何与 Grails/GORM 挂钩。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T09:12:49.463

如果数据访问规则比较复杂，需要在所有应用代码中强制执行，可以使用[spring-security-acl](http://grails-plugins.github.com/grails-spring-security-acl/)插件。

# c# - 为什么我的 32 位应用程序无法访问 32 位注册表配置单元？

> ID：13301095
> 
> 赞同：5
> 
> 时间：2012-11-09T02:06:46.353
> 
> 标签：c#

我有一个 C# 应用程序，它调用：

```
Microsoft.Win32.Registry.CurrentUser.OpenSubKey(@"Software\MyApp") 
```

它设置为目标 x86，当我运行它时，我可以从任务管理器中看到它是一个 32 位进程。然而，这行代码奇怪地转到了 HKCU\Software\MyApp 的 64 位配置单元，而不是 HKCU\Software\Wow6432Node\MyApp 的 32 位配置单元。有任何想法吗？

我还启动了两个 Powershell 实例，一个是 32 位的，一个是 64 位的，然后运行下面的代码，但都返回了 64 位配置单元的值。

```
get-itemproperty -Path Registry::HKEY_CURRENT_USER\Software\MyApp 
```

任何想法这里可能出了什么问题？我已经三重检查了 32 位和 64 位配置单元的注册表设置也与 regedit 不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:21:01.537

因为您正在访问一个共享的密钥 (HKCU\Software)，而不是重定向。请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072(v=vs.85).aspx)和（更具体地说）[http://msdn.microsoft.com/en-us/库/windows/desktop/aa384253(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384253(v=vs.85).aspx)

从第一个链接（强调我的）：

> 在 64 位 Windows 上，**部分**注册表项分别为 32 位应用程序和 64 位应用程序存储，并使用注册表重定向器和注册表反射映射到单独的逻辑注册表视图，因为 64 位版本的应用程序可能使用与 32 位版本不同的注册表项和值。**还有一些未重定向或反映的共享注册表项。**

# ubuntu - python无法显示模块列表

> ID：13301100
> 
> 赞同：1
> 
> 时间：2012-11-09T02:07:23.297
> 
> 标签：ubuntu, python-2.7

我有新安装的 ubuntu 12.04 64 位。我有 python 2.7 并安装了 python 3.3 作为 python3 到目前为止没有问题，但安装是相当新的。当我尝试检查使用安装的模块时`help('modules')`出现错误：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> help('modules')

Please wait a moment while I gather a list of all available modules...

/usr/lib/python2.7/dist-packages/gobject/constants.py:24: Warning: g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  import gobject._gobject
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  from gtk import _gtk

** (python:20929): CRITICAL **: pyg_register_boxed: assertion `boxed_type != 0' failed
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: cannot register existing type `GdkDevice'
  from gtk import _gtk
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_type_get_qdata: assertion `node != NULL' failed
  from gtk import _gtk
Segmentation fault (core dumped) 
```

我不知道如何解释这个输出以及我应该做什么。显然，如果有一些问题，我想在操作系统安装后立即修复它，不要等到会丢失工作。任何人都有类似的问题并且知道应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T11:57:26.463

这似乎是较新的 ubuntu 版本上流行的 python 错误。它与具有不同绑定的模块的混合有关，请参见此处：

[http://blog.rabbitvcs.org/archives/312](http://blog.rabbitvcs.org/archives/312)

我也有这个问题，可以在这里找到一些解决方法的建议：

[https://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/896836](https://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/896836)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-07T06:45:38.843

使用`help()`函数，然后进入“交互式帮助”界面。

```
>>> help()

>>> help> 
```

然后输入：

```
>>> help> modules 
```

这种方式是**可以的。**

# sencha-touch-2 - 嵌套列表，多种布局

> ID：13301105
> 
> 赞同：3
> 
> 时间：2012-11-09T02:08:00.923
> 
> 标签：sencha-touch-2, nested-lists

在 Sencha Touch 2.1 中，我定义了以下嵌套列表：

```
xtype: 'NestedList',
docked: 'top',
ui: 'light',
store: treeStore,
detailCard: true,
detailContainer: // Reference to a Another Panel 
```

我可以让嵌套列表出现，但通过 JSON 添加项目被证明是有问题的。这是我的 JSON 示例：

```
[
    {
       "BranchID" : 4,
       "BranchName" : "Branch Name",
       "Jobs" : [
          {
             "JobOrderID" : 75,
             "JobTitle" : "Job Title",
             "leaf" : true
          }
       ]
    }
] 
```

这是我的树商店和列表项：

```
// Define a List Item:
Ext.define('Branch', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            'BranchID',
            'BranchName'
        ]
    }
});

var treeStore = Ext.create('Ext.data.TreeStore', {
    model: 'Branch',
    defaultRootProperty: 'items',
    proxy: {
        type: 'ajax',
        url: 'data/region.php'
    }
}); 
```

我可以看到 data/region.php 正在被调用，并且它正确返回 JSON - 但列表项没有显示。如何让列表项显示？

此外，我想为叶节点使用不同的布局 - 并让这些叶节点在单独的面板中拉出请求。如何识别面板，以便在我的 NestedList 的 DetailContainer 部分中引用它？

我在找什么：

1.  分行一览
2.  点击一个分支，列出所有工作
3.  点击一个工作，详细信息显示在其他面板中。

我已经阅读了文档，但在更复杂的实现上似乎有点稀疏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:21:48.407

根据我的煎茶经验，我的建议是永远不要使用`Ext.NestedList`. 当然，当您的模型非常简单但当您的模型包含关联时难以自定义时，它们非常方便。

所以我会做（并且做过）是在`Ext.navigation.View`你点击以前列表的项目时使用并推送新列表。这是与 a 完全相同的概念，`Ext.NestedList`因此它不会使您的应用程序过载。

[这是基于您的数据的示例](http://www.senchafiddle.com/#vsY1o)

如果您有任何问题，请随时提问

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:18:55.880

我认为您的 defaultRootProperty 对于 treeStore 是错误的。

它应该是

```
defaultRootProperty: 'Jobs', 
```

[API 参考](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.TreeStore-cfg-defaultRootProperty)

# ruby-on-rails - Rails 集合_选择多对多

> ID：13301108
> 
> 赞同：1
> 
> 时间：2012-11-09T02:08:33.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个包含两个 collection_select 字段的表单，第一个很简单，它只是获取一个名为 course 的模型，它显示课程名称，当然返回所选课程的 id，第二个是我遇到问题的那个其中，它是一个课程可能拥有的类似课程的集合选择。

课程模式：

```
class Course < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name, use: :slugged 
  attr_accessible :code, :credits, :name, :description, :active

  has_many :similars, dependent: :destroy
  has_many :similar_courses, through: :similars, source: :similar

end 
```

类似型号：

```
class Similar < ActiveRecord::Base
  attr_accessible :course_id, :similar_id

  belongs_to :course
  belongs_to :similar, class_name: "Course"

  validates :similar_id, presence: true
  validates :course_id, presence: true

end 
```

这是同源模型，这个模型的问题是，如果一个人想要转移课程和类似的东西，必须批准或拒绝一门课程：

```
class Homologation < ActiveRecord::Base
  attr_accessible :homologate_by, :homologate_course, :student_id
  belongs_to :user
end 
```

这是我遇到问题的形式：

```
<%= form_for(@homologation) do |f| %>
      <%= render 'shared/error_messages', object: @homologation %>
      <%= f.label :homologate_course %>
      <%= f.collection_select :homologate_course, Course.find(:all), :id, :name, :prompt => "Select a Course" %>

      <%= f.label :homologate_by %>
      <%= f.collection_select :homologate_by, Similar.find(:all), :similar_id, :name, :prompt => "Select a Similar Course" %>
    <div class="form-actions">
      <%= f.submit "Create Homologation", class: "btn btn-large btn-primary" %>
    </div>
    <% end %>
  </div> 
```

我收到以下错误

[http://dpaste.com/hold/827744/](http://dpaste.com/hold/827744/)

Bartolleti 的东西是我希望能够显示的课程的名称，这当然不是一种方法，但我不知道为什么会出现错误，我希望能够显示给定的类似课程的名称第一个收藏领域的课程...

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:58:34.373

从[collection_select 的文档中](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)：

`collection_select(object, method, collection, value_method, text_method, options = {}, html_options = {})`

然后使用您的代码`Course.find(Similar.find_by_id(:similar_id)).name`作为`text_method`，这就是您收到此错误消息的原因。

一种解决方案可能是在您身上添加一种方法`Similar model`来获得相似的课程名称：

```
def similar_name
  similar.name
end 
```

然后你可以将它用作`text_method`你的`collection_select`：

```
<%= f.collection_select :homologate_by, Similar.find(:all), :similar_id, :similar_name, :prompt => "Select a Similar Course" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:30:11.880

这里的问题是，

```
 <%= f.collection_select :homologate_by, Similar.find(:all), :similar_id, :name, :prompt => "Select a Similar Course" %>

          In this line :name is trying to find a record from course and the course name. 
```

因此，最好在控制器中编写 Similar.find(:all) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:23:59.990

首先，我建议将您的“类似”逻辑从表格中删除。因此，在控制器中对其进行 find.all 并在视图中将其用作实例变量 @similar_list 左右。

其次，在此处查看您的表单的 options_from_collection_for_select：

[http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select)

让我知道这是否对您有帮助。

# python - 如果我有多个 Python 版本，如何将第三方库安装到指定的 Python 版本中？

> ID：13301109
> 
> 赞同：0
> 
> 时间：2012-11-09T02:08:37.900
> 
> 标签：python, numpy, installation

我正在使用 ubuntu 10.04。Python 的默认版本是 2.6.5，但我需要 Python 2.7。

所以我根据这个网页[https://askubuntu.com/questions/101591/how-do-i-install-python-2-7-2-on-10-04](https://askubuntu.com/questions/101591/how-do-i-install-python-2-7-2-on-10-04)使用“make altinstall”安装 Python 2.7 。

```
./configure
make
sudo make altinstall 
```

但是当我使用新安装的python时：

```
$ python2.7 setup.py 
```

我之前安装的 numpy 库不再工作了。它引发了 ImportError：

```
ImportError: No module named numpy 
```

看来我必须重新安装它。我之前使用“apt-get”来安装 numpy。现在我想知道我是否应该下载 numpy 的源代码并指定它应该安装的位置。但我不知道如何指定路径。那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:14:11.757

如何使用[virtualenv](http://pypi.python.org/pypi/virtualenv)

这为您提供了具有指定 python 版本的虚拟环境。

# ruby - 尝试在 Mac 上安装 Ruby 1.9.3；无法运行二进制文件

> ID：13301113
> 
> 赞同：1
> 
> 时间：2012-11-09T02:08:50.453
> 
> 标签：ruby, installation, osx-mountain-lion

我正在使用 OS X Mountain Lion 10.8.2。我已经查看并按照说明在我的 MacBook Pro 上安装了最新版本的 Ruby，但它无法正常工作。那里有一个简单的 .DMG 安装程序吗？

每当我尝试从命令行运行 Ruby 二进制文件（例如，、、、`ri`）时`rvm`，`ruby`我都会得到`command not found`.

**编辑：**我试图发布我的终端历史记录，但由于超链接，该网站不允许我发布。

刚刚在侧边栏中找到了这个：[http](http://railsinstaller.org) ://railsinstaller.org 。这是合法的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:10:11.350

您缺少很多 Ruby 所需的依赖项。我建议在[railsinstaller.org](http://railsinstaller.org/)下载该工具包并按照分步说明进行操作（[Mac](http://railsinstaller.org/mac) / [Windows](http://railsinstaller.org/windows)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:57:06.543

或者，您可以通过自制软件包管理器安装[rbenv](https://github.com/sstephenson/rbenv)（RVM 的替代品，更轻量级）。Rbenv 将通过姊妹项目 ruby​​-build 帮助您安装最新的 ruby​​ 构建。使用自制软件，您将能够安装开发可能需要的大多数其他依赖项（Redis 等）。

# objective-c - 处理 layer-backed IKImageBrowserView、Z-ordering 和其他问题

> ID：13301118
> 
> 赞同：6
> 
> 时间：2012-11-09T02:09:24.067
> 
> 标签：objective-c, cocoa, catransition, ikimagebrowserview, ikimagebrowsercell

我正在做一个需要：

*   具有从包含 IKImageBrowserView 的视图到另一个视图的过渡动画；
*   当鼠标在视图中移动时，在每个 IKImageBrowserCell 上都有一个悬停覆盖；和
*   让 NSView 与图像浏览器视图的一部分重叠

我遇到的问题如下：

*   如果 IKImageBrowserView 不是层支持的，则 IKImageBrowserView 不尊重 z 顺序-> IKImageBrowserView 保持在顶部，即使视图位于其顶部（或就此而言）
*   如果图像浏览器视图是图层支持的，则 z 排序问题得到解决，但 IKImageBrowserView 中的自定义行为会中断（例如悬停）--> 例如，在 Mac 10.7 中，浏览器单元格的选择层和前景层不要与滚动视图的“反弹”区域中的图像一起移动。

我需要图层支持来做过渡动画。

出于性能原因，我知道 Apple 不建议兄弟视图重叠。虽然有些情况是无法避免的。

我已就此向 Apple 提交了技术支持事件。他们已将其上报给工程师，但他们也建议我提交错误报告。

以前有没有人遇到过这种情况，如果有，您采用了什么解决方法？

* * *

对于任何好奇的人，示例项目在这里[https://github.com/jdbenito/nerdery](https://github.com/jdbenito/nerdery)。在应用程序委托中，尝试注释/取消注释 -setWantsLayer: 行。

当 IKImageBrowserView 被 layer-backed 时，它开始表现出奇怪的行为。并且症状因操作系统而异（例如，在 Mac OS 10.6 中，悬停一直有效，直到您切换到另一个选项卡并返回 IKImageBrowserView。在 Mac OS 10.8 中，悬停层似乎无法在正确的单元格中呈现） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T15:54:35.293

NSView 兄弟姐妹绝对允许重​​叠。前段时间我有同样的问题，并得到了一些苹果工程师的确认：[是否允许层支持的 NSView 兄弟重叠？](https://stackoverflow.com/questions/10720062/are-layer-backed-nsview-siblings-allowed-to-overlap/10720063#10720063)

关于 IKImageBrowserView：我的印象是它或多或少被用作“黑匣子”，很像 iOS 上的 UITableView：您可以自定义单元格和一些行为，但最好不要弄乱它通过直接向其添加子视图来实现内部视图层次结构。如果您需要除了标准的、记录在案的行为之外的任何东西，您最好编写自己的解决方案。做起来应该不难，特别是因为您可以访问 Image I/O 来满足所有缩略图和预览需求：[https ://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/ImageIOGuide/ imageio_source/ikpg_source.html#//apple_ref/doc/uid/TP40005462-CH218-SW3](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/ImageIOGuide/imageio_source/ikpg_source.html#//apple_ref/doc/uid/TP40005462-CH218-SW3)

希望这可以帮助！

# wordpress - 在 Wordpress 博客主页中添加播放器，而不仅仅是帖子页面

> ID：13301120
> 
> 赞同：1
> 
> 时间：2012-11-09T02:09:35.853
> 
> 标签：wordpress, audio, media-player, blogs, mediaelement.js

我现在有一个 Wordpress 博客设置，并且媒体播放器在帖子中正确显示。但是，在主页上，它只向我显示了博客的链接。

如何将播放器也添加到主页？

感谢您的帮助，我对此很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:07:59.080

首先请从 wp-admin>>设置>>阅读>>首页显示检查您当前激活的主页。如果是您的最新帖子，那么您可以通过编辑当前主题的 index.php 页面对其进行编码。如果您不太了解 php，那么您可以从后端选择任何静态页面并在其中使用播放器的短代码

# regex - 正则表达式匹配和替换可变长度数字

> ID：13301125
> 
> 赞同：-1
> 
> 时间：2012-11-09T02:10:06.507
> 
> 标签：regex, perl

我有一个大约 4,000 项长的列表，用于我尝试格式化的主机名。该列表来自站点 ID，主机名使用站点 ID 格式化。数字部分以零为前缀，长度必须为 5 位，包括填充。我如何编写一个正则表达式来匹配和前置，以便格式与前 3 个条目匹配？一旦站点 ID 变为 4 位数字，简单地添加“s00”将不起作用。

```
s00119rtr1
s00119rtr1
s00120rtr1
120rtr1
120rtr1
120rtr1
121rtr1
121rtr1
121rtr1
124rtr1
124rtr1 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:36:54.530

Perl 解决方案：

```
s/^(\d+)/sprintf('s%05d', $1)/e; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T02:31:46.827

这是在python中：

```
import re

groups = re.match(r'(\d+)(.+)', host)
normalized_host = 's%05d%s' % (int(groups.group(1)), groups.group(2)) 
```

# ruby-on-rails - ActiveModel::AttributeMethods 实用性？

> ID：13301128
> 
> 赞同：0
> 
> 时间：2012-11-09T02:10:31.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

开发人员会在哪些情况下遇到最适合使用 rails AttributeMethodsPrefix 和 suffix 方法的情况。以下内容直接取自 Rails 源代码，我仍然不确定它们的实用性。

```
 #   class Person
  #     include ActiveModel::AttributeMethods
  #
  #     attr_accessor :name
  #     attribute_method_suffix '_short?'
  #     define_attribute_methods :name
  #
  #     private
  #
  #     def attribute_short?(attr)
  #       send(attr).length < 5
  #     end
  #   end
  #
  #   person = Person.new
  #   person.name = 'Bob'
  #   person.name          # => "Bob"
  #   person.name_short?   # => true 
```

感谢您的帮助；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:41:41.307

这用于例如提供`<attribute>_changed?`方法，以及来自[ActiveModel::Dirty的其他帮助器](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)

如何在代码中使用它取决于您。您可以使用这种方法轻松地提供方法，以检查用户输入的电子邮件或用户名是否仍然可用`email_taken?`。`username_taken?`

我想说，当您想了解模型的多个属性（或者可能跨模型）时，可以考虑使用它。

您发布的示例对我来说真的没有意义，因为它仅用于一个属性。如果他们使用`:first_name`and构建了示例`:last_name`，那么您可以更清楚地构建可重用的辅助方法，这些方法只需要定义一次。

# javascript - 这是在 Javascript 中进行继承的好方法吗？

> ID：13301131
> 
> 赞同：2
> 
> 时间：2012-11-09T02:10:49.050
> 
> 标签：javascript, node.js, inheritance

> **可能重复：**
> [在这里使用“新”关键字的原因是什么？](https://stackoverflow.com/questions/12592913/what-is-the-reason-to-use-the-new-keyword-here)

我正在研究 Mongoose（多么漂亮的软件......）并且看到了这个：

```
function Model (doc, fields, skipId) {
  Document.call(this, doc, fields, skipId);
};

/*!
 * Inherits from Document.
 */
Model.prototype.__proto__ = Document.prototype; 
```

哇，这是我见过的最简单的继承方式。我知道它不能用浏览器完成，但服务器端......它看起来像一个赢家：

*   派生类调用父类的构造函数
*   设置派生类的原型对象，使**proto**指向父类的原型。

就是这样！

这可能是在服务器端实现继承的最干净、最简单的方法吗？我问是因为我爱上了它，并且想知道我是否遗漏了一些限制/问题......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:22:46.647

好吧，一些浏览器的框架过去常常通过具有来模仿这一点`A.prototype = new B()`，但这有点hacky :) 两种方式的一个重要收获是猴子修补父类使后代能够使用父类的新/更改方法（事实并非如此和`A.prototype = $.extend({}, B.prototype)`类似的黑客）。

至于所描述的方法，它肯定看起来更干净，所以我会投票赞成“是”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:16:54.563

据我所知，这可以在客户端完成，例如：

```
Model.prototype = new Document();
Model.prototype.constructor = Model; 
```

# django - 非查询集数据排序

> ID：13301132
> 
> 赞同：1
> 
> 时间：2012-11-09T02:10:50.640
> 
> 标签：django, django-tables2

这似乎与[这个问题](https://stackoverflow.com/questions/11025565/non-queryset-data-ordering-in-django-tables2)非常相似。单击按 pass_count 排序的链接时，我得到：

> 无法将关键字 u'pass_count' 解析为字段。选项有：build、build_no

模型.py：

```
class Run(DashboardBaseModel):
class Meta:
    db_table = 'runs'

build_no   = models.CharField(max_length=200, db_index = True)
release    = models.CharField(max_length=200, db_index = True)
extra_fields = [
        'pass_count',
        ]

@property
def pass_count(self):
    passes = 0
    for build in self.build_set.all():
        passes += build.pass_count
    return passes 
```

表.py：

```
class CombineTable(tables.Table):
build_no = tables.LinkColumn('run', args=[A('release'), A('id')], verbose_name="Build")
pass_count = tables.Column(verbose_name="Passed", attrs={"td": {"class": "num"}, "th": {"class": "num"}}) 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T21:22:59.267

You'll need to convert your data to a dictionary to allow for non-db fields to be sortable.

```
runs = Run.objects.all()

table_data = []
for run in runs:
    passes = 0
    for build in run.build_set.all():
        passes += build.pass_count
    table_data.append(dict(
        build_no=run.build_no,
        release=run.release,
        pass_Count=passes,
    ))

table = CombineTable(table_data) 
```

Note: This will query the database once for each run. A solution to that would require a QuerySet on builds and a loop over all of the builds adding each build's pass_count to a dictionary based on runs.

# php - 在 CodeIgniter 中验证 count_all_results = 1

> ID：13301135
> 
> 赞同：1
> 
> 时间：2012-11-09T02:11:01.763
> 
> 标签：php, codeigniter, comparison-operators

我正在尝试完成获取当前用户会话（如果存在）然后将其与数据库进行比较，以及loggedIn值= 1（表示loggedIn）并计算存在与此where子句匹配的*单行。*如果存在，则显示已登录，否则，显示登录表单（如下`if{}` `else{}`所示）

我有一个具有功能的模型：

```
function check_if_loggedin(){
    #get user session id from db.
        $sess = $this->session->userdata('session_id');
    #set numerical value of successfully logged in equal 1
        $loggedInSetSuccess = 1;
    #compare session id to match in db (can only have only 1 match)
        $sessionsDbCompare = $this->db->get_where('Client',array('session_id'=>$sess,'loggedIn'=>$loggedInSetSuccess));

    if($sessionsDbCompare->count_all_results() = 1) {
    # User has valid session(valid sessID+loggedIn=0, show welcome
        echo 'Logged in baby';
        # show account pref   
    }
    else{
      # user doesnt have both a valid session and loggedIn is set to 0, show login form
      echo 'login form here';
    }  
} 
```

问题是 -`if($sessionsDbCompare->count_all_results() = 1) {`我的 IDe 正在警告我，我应该使用`count_all_results() == 1`or `count_all_results() === 1`. 抱歉，这有点新手，我想我有点困惑，因为 count_all_results() 是一个函数。（我确实理解比较运算符，例如“1”==“01”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:22:02.607

您应该`==`这样使用 if 语句：

```
if($sessionsDbCompare->count_all_results() == 1) { ... 
```

您始终可以使用`var_dump($sessionsDbCompare->count_all_results());`或类似方法来检查返回的值...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:21:26.447

你应该使用这个

```
count_all_results() == 1 
```

你拥有它的方式是**将**1 分配给它的剩余部分

IDE 还担心 count_all_results() 可能返回 false 和 0。这就是为什么它建议三个 === 但不要担心。两个等于将解决它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T02:21:42.453

这一行：

```
if($sessionsDbCompare->count_all_results() = 1) { 
```

应该：

```
if($sessionsDbCompare->count_all_results() == 1) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-16T09:06:55.580

你应该使用 $this->db->count_all() 而不是 $this->db->count_all_results()

# jquery - 如何在拖动时创建表格行的“幽灵”图像

> ID：13301137
> 
> 赞同：1
> 
> 时间：2012-11-09T02:11:18.270
> 
> 标签：jquery, drag-and-drop, clone

我创建了一个基本的 jQuery 脚本来允许拖放表格行来重新排序它们。一切都很好 - 我唯一不知道的是如何在拖动时创建行的“幽灵”图像。

我尝试克隆该行

```
$(this).clone().addClass('dragClone'); 
```

使用以下 CSS

```
.dragClone{opacity:0.4;position:absolute;z-index:1500;} 
```

但什么都没有出现。考虑到 TR 可能需要存在于表中，我克隆了整个表，清空了行并附加了选定的 TR，如下所示：

```
$('.dragTable').clone().addClass('dragClone');$('.dragClone').find('tbody').empty().append($('.origZone')); 
```

（origZone 是赋予被拖动的 TR 的类）

仍然没有任何显示。

我以前从未使用过克隆，所以我什至不知道我是否接近，或者根本就在正确的轨道上！目标是创建一个类似于 Redips_drag 插件 ( [http://www.redips.net/javascript/drag-and-drop-table-row/](http://www.redips.net/javascript/drag-and-drop-table-row/) )中使用的幽灵图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:33:23.000

我能够通过执行以下操作来解决此问题：

在页面上创建一个空 div：

```
if($('#dragContain').length<1){$('body').append('<div id="dragContain"style="width:96%;height:1px"></div>');} 
```

将包含表保存到变量中，克隆它，删除 tbody 内容并隐藏 thead，附加行，将其保存为变量，将其附加到前面提到的 div

```
$table=$(this).closest('.dragTable');$row=$(this).closest('tr').clone();

$table.find('tbody').remove();$table.find('thead').hide();$table.append($row);$('#dragContain').addClass('dragClone').append($table); 
```

我不确定这是否是实现它的最佳方法，但它确实有效。

仅供参考 - 我必须使用以下 CSS 来允许悬停效果在底层行上起作用

```
#dragContain{pointer-events:none;} 
```

希望这对某人有帮助！

# java - ListCellRenderer 每次都添加新标签？

> ID：13301139
> 
> 赞同：2
> 
> 时间：2012-11-09T02:11:48.813
> 
> 标签：java, swing, jlist, renderer, listcellrenderer

我编写了自己的 ListCellRenderer（下面的代码），它使我的单元格透明。现在如果我运行这个，每次我点击一个列表项，它都会变得比以前更白。会不会是，JList 总是添加这个新的 JLabel - 我创建的 - 并覆盖最后一个？

```
 jListPriority.setOpaque(true);
        jListPriority.setBackground(new Color(255, 255, 255, 10));
        jListPriority.setBorder(BorderFactory.createLineBorder(new Color(250, 250, 250)));

        jListPriority.setCellRenderer(new ListCellRenderer() {

                private JLabel label = new JLabel();

                public Component getListCellRendererComponent(JList list, Object value,   
                                 int index, boolean isSelected, boolean cellHasFocus) {

                    label.setOpaque(true);
                    label.setText(value.toString());
                    label.setForeground(new Color(250, 250, 250));
                    label.setFont(new Font("Lucida Grande", Font.PLAIN, 13));
                    label.setBorder(BorderFactory.createMatteBorder(0, 0, 1, 0, new Color(250, 250, 250, 50)));
                    label.setPreferredSize(new Dimension(label.getPreferredSize().width, label.getPreferredSize().height + 3));

                    if (isSelected) {
                        label.setBackground(new Color(255, 255, 255, 20));
                    } else {
                        label.setBackground(new Color(255, 255, 255, 10));
                    }

                    return label;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:19:21.080

默认*组合*for[`Graphics2D`](https://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html)使用`AlphaComposite.SRC_OVER`规则，因此结果是预期的。您需要为您想要的效果指定合适的模式。[你可能会从这个例子](https://stackoverflow.com/questions/2163544/re-paint-on-translucent-frame-panel-component/2166500#2166500)中得到一些想法。

[![图片](../Images/b7c54419534f88d88df9727e03fa94f2.png)](https://i.stack.imgur.com/tBk7v.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T04:45:22.147

我认为您不想创建太多 jlabel 实例。在您的示例中，您每次调用 get... 方法创建一个 jlabel 实例只需将变量标签转换为字段。

# php - 如何将字符串持续时间转换为 ISO 8601 持续时间格式？（例如“30 分钟”到“PT30M”）

> ID：13301142
> 
> 赞同：19
> 
> 时间：2012-11-09T02:12:03.590
> 
> 标签：php, duration, iso8601, dateinterval

有很多问题询问如何以另一种方式执行此操作（**从**这种格式转换），但我找不到任何关于如何在 PHP 中以 ISO 8601 持续时间格式输出的信息。

所以我有一堆人类可读格式的持续时间字符串 - 我想将它们即时转换为 ISO 8601 格式以打印 HTML5 微数据的持续时间。下面是一些输入字符串的示例，以及它们应该如何格式化

```
"1 hour 30 minutes" --> PT1H30M
"5 minutes" --> PT5M
"2 hours" --> PT2H 
```

我可以将字符串推送到 PHP 中的间隔对象中：

```
date_interval_create_from_date_string("1 hour 30 minutes"); 
```

但似乎没有 ISO 8601 输出选项

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T02:56:19.807

我会先将其转换为数字，然后再使用它。

首先，使用[`strtotime()`](http://php.net/manual/es/function.strtotime.php)：

```
$time = strtotime("1 hour 30 minutes", 0); 
```

然后你可以解析它的持续时间，并以`PnYnMnDTnHnMnS`格式输出。我会使用以下方法（受[http://csl.sublevel3.org/php-secs-to-human-text/](http://csl.sublevel3.org/php-secs-to-human-text/)启发）：

```
function time_to_iso8601_duration($time) {
    $units = array(
        "Y" => 365*24*3600,
        "D" =>     24*3600,
        "H" =>        3600,
        "M" =>          60,
        "S" =>           1,
    );

    $str = "P";
    $istime = false;

    foreach ($units as $unitName => &$unit) {
        $quot  = intval($time / $unit);
        $time -= $quot * $unit;
        $unit  = $quot;
        if ($unit > 0) {
            if (!$istime && in_array($unitName, array("H", "M", "S"))) { // There may be a better way to do this
                $str .= "T";
                $istime = true;
            }
            $str .= strval($unit) . $unitName;
        }
    }

    return $str;
} 
```

结果：[http ://codepad.org/1fHNlB6e](http://codepad.org/1fHNlB6e)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-23T10:08:34.870

这是 Eric`time_to_iso8601_duration()`函数的简化版本。它不会降低精度（大约一年 365 天）并且速度提高了大约 5 倍。根据[此](http://www.ostyn.com/standards/scorm/samples/ISOTimeForSCORM.htm)页面，输出不太漂亮，但仍兼容 ISO 8601。

```
function iso8601_duration($seconds)
{
    $days = floor($seconds / 86400);
    $seconds = $seconds % 86400;

    $hours = floor($seconds / 3600);
    $seconds = $seconds % 3600;

    $minutes = floor($seconds / 60);
    $seconds = $seconds % 60;

    return sprintf('P%dDT%dH%dM%dS', $days, $hours, $minutes, $seconds);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-17T17:23:31.167

另一种方法是编写基于[DateInterval](https://php.net/manual/en/class.dateinterval.php)对象的函数。[ISO 8601 持续时间格式](https://en.wikipedia.org/wiki/ISO_8601#Durations)有很好的描述。

这种方法的优点是它只输出相关的（当前的）表示并且它支持空的持续时间（通常表示为`'PT0S'`或`'P0D'`）。

```
function dateIntervalToISO860Duration(\DateInterval $d) {
    $duration = 'P';
    if (!empty($d->y)) {
        $duration .= "{$d->y}Y";
    }
    if (!empty($d->m)) {
        $duration .= "{$d->m}M";
    }
    if (!empty($d->d)) {
        $duration .= "{$d->d}D";
    }
    if (!empty($d->h) || !empty($d->i) || !empty($d->s)) {
        $duration .= 'T';
        if (!empty($d->h)) {
            $duration .= "{$d->h}H";
        }
        if (!empty($d->i)) {
            $duration .= "{$d->i}M";
        }
        if (!empty($d->s)) {
            $duration .= "{$d->s}S";
        }
    }
    if ($duration === 'P') {
        $duration = 'PT0S'; // Empty duration (zero seconds)
    }
    return $duration;
} 
```

一个例子：

```
echo dateIntervalToISO860Duration(
    date_diff(
        new DateTime('2017-01-25 18:30:22'), 
        new DateTime('2019-03-11 07:12:17')
    )
); 
```

输出：`P2Y1M13DT12H41M55S`

# java - 如何将枚举传递给构造函数？

> ID：13301145
> 
> 赞同：0
> 
> 时间：2012-11-09T02:12:25.430
> 
> 标签：java, constructor, enums, arguments

我想做这样的事情：

```
public class MyEnumTest {

    public enum MyEnum;
    private MyEnum value;

    public MyEnumTest(enum e)
    {
        this.MyEnum = e; 
        this.value = this.MyEnum.values[0]//Set value to the first enum value.
    }

    public void setValue(MyEnum e)
    {
        this.value = e; 
    }

    public MyEnum getValue()
    {
        return value;
    }

} 
```

并称其为：

```
MyEnumTest car = new MyEnumTest({HONDA, FORD, TOYOTA, HOLDEN}); 
MyEnumTest fruit = new MyEnumTest({APPLE, BANANA, CHERRY}); 

/* some operations occur*/ 

if (car.getValue() == car.FORD) System.out.println("Vrooom!"); 
if (fruit.getValue()) == fruit.APPLE) System.out.println ("Is red and round and delicious"); 
```

有什么想法吗？

对于奖励分数 - 是否可以使用枚举值设置初始值？例如类似的东西

```
MyEnumTest myET = new myEnumTest(new enum {RED, GREEN, BLUE, YELLOW}, BLUE); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T02:17:00.573

您可以使用（不带`enum`关键字）：

```
public MyEnumTest(MyEnum e)
{
    this.myEnum = e; 
    this.value = MyEnum.values()[0];
} 
```

对于第 2 部分，您可以定义一个重载的构造函数：

```
public MyEnumTest(MyEnum[] myEnums) { 
```

并使用：

```
MyEnumTest myET = new MyEnumTest(new MyEnum[] { MyEnum.FOO, ... }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T03:08:10.253

正如其他人所说，很难理解您要做什么，但这是我最好的猜测：

```
public enum Color {
    RED, GREEN, YELLOW, BLUE;
}

public class MyEnumTest<E extends Enum<E>> {
    private final Class<E> enumType;
    private final E value; 

    public Class<E> getEnumType() {
        return enumType;
    }

    public E getValue() {
        return value;
    }

    public MyEnumTest(Class<E> enumType, E value) {
        this.enumType = enumType;
        this.value = value;
    }

    public MyEnumTest(Class<E> enumType) {
        this(enumType, enumType.getEnumConstants()[0]);
    }

    public static void main(String... args) {
        // no initial value provided
        MyEnumTest<Color> myET = new MyEnumTest<Color>(Color.class);
        if (myET.getValue() == Color.RED) {
            System.out.println("It's probably an apple");
        }

        // providing an initial value
        myET = new MyEnumTest<Color>(Color.class, Color.YELLOW);
        if (myET.getValue() == Color.YELLOW) {
            System.out.println("It's probably a banana");
        }
    }
} 
```

另外，请记住枚举值是静态的......所以，像 myET.MyEnum.RED 这样的东西没有意义......你应该改用： Color.RED

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T02:28:46.687

很难说你想做什么。Reimeus 的回答显示了如何处理你的具体`MyEnum`作为论点。如果要实现类以使用任何枚举，请使用以下命令：

```
public class MyEnumTest<E extends Enum<E>> {

    private final E firstValue;

    public MyEnumTest(Class<E> enumType)
    {
        this.firstValue = enumType.getEnumConstants()[0];
    }

    ...
} 
```

并像这样实例化它：

```
MyEnumTest myET = new myEnumTest(MyEnum.class); 
```

# python - Python 通过一个类更新列表

> ID：13301147
> 
> 赞同：1
> 
> 时间：2012-11-09T02:12:29.347
> 
> 标签：python, list, class

我试图在调用函数时添加一个列表。例如，如果您按下按钮 1，则会调用一个函数，它将 5 添加到 listone，或者如果您按下按钮 2，则会将数字 10 添加到 listone。我希望列表 1 在更新时连续显示结果。例如，我创建了一个类 Class MyClass(object) def **init** (self): listone=[] then button1 button2 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:27:27.857

这样的事情有帮助吗？

```
class MyClass(object):
    my_list = []
    def __init__(self, initial_list):
        self.my_list = initial_list
    def button_1(self):
        self.my_list = [ele + 5 for ele in self.my_list]
        print(self.my_list)
    def button_2(self):
        self.my_list = [ele + 10 for ele in self.my_list]
        print(self.my_list) 
```

结果：

```
>>> a = MyClass([1,2,3])
>>> a.button_1()
[6, 7, 8]
>>> a.button_2()
[16, 17, 18] 
```

# python - django unittest 输出

> ID：13301150
> 
> 赞同：2
> 
> 时间：2012-11-09T02:12:53.917
> 
> 标签：python, django, unit-testing, subprocess, django-unittest

我想通过 python 子进程运行 django unittest，我想将所有数据（尤其是单词 Failure 或 OK）存储在一个变量中。但是，当我使用 subprocess 运行它时，输出仅包含以下部分：

“正在为别名 'default' 创建测试数据库......” “正在为别名 'default' 销毁测试数据库......”

其余的只是出现在屏幕上，这是我不想要的。如何将 django unittest 的所有输出转换为变量。

```
args_list = ['python', '/path/to/manage.py', 'test', 'myapp']
process=subprocess.Popen(args_list, stdout=subprocess.PIPE)
output, errors = process.communicate()
print output 
```

输出将等于：为别名“默认”创建测试数据库...销毁别名“默认”的测试数据库...

但是在我的屏幕上出现了 django unittest 的整个标准输出。如何将所有输出存储到变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-24T21:42:45.800

您需要将标准错误重定向到标准输出。这是固定代码：

```
args_list = ['python', '/path/to/manage.py', 'test', 'myapp']
process=subprocess.Popen(args_list, stderr=subprocess.STDOUT, stdout=subprocess.PIPE)
output, errors = process.communicate()
print output 
```

或者，在 shell 中，您可以键入如下内容：

```
python manage.py test myapp > stdout.txt 2> stderr.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:54:06.487

如果您真的想将 stdout 重定向到一个变量进行检查，那么您可以使用以下代码进行操作：

```
from cStringIO import StringIO
import sys

output = StringIO()
sys.stdout = output
print "Hello World!"
print 42
sys.stdout = sys.__stdout__
print output.getvalue()
>>>
Hello World!
42 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T02:38:53.513

您可以使用 unittest.TestResult 对象处理测试结果。有关示例，请参见[https://stackoverflow.com/a/284192/579461 。](https://stackoverflow.com/a/284192/579461)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-26T00:32:13.600

> 如何将所有输出存储到变量中。

将标准错误重定向到标准输出：

```
from subprocess import check_output, STDOUT

output = check_output(args_list, stderr=STDOUT)
print output, 
```

# jsf - h:outputText 值未显示在 h:outputLink 标记内

> ID：13301157
> 
> 赞同：2
> 
> 时间：2012-11-09T02:13:45.017
> 
> 标签：jsf, facelets

我在 h:outputlink 标记中有 h:outputText，但是 h:outputText 的文本没有显示在前端。

```
<h:outputLink id="test1" value="/aafdemo/pages/contact/createContact.seam"
    style="margin-left:5px"> 
    <h:outputText value="Contact" />
</h:outputLink> 
```

我可以在萤火虫内部看到它，它被渲染成这样。

```
<a style="margin-left:5px"
    href="/aafdemo/pages/opportunity/createOpportunity.seam">Opportunity</a> 
```

但是我在网页上没有看到。这是左侧菜单的一部分，它显示在所有页面上，并且没有在任何页面上显示“机会”字样。

奇怪的部分是 h:outputText 标签的值，如果我将其更改为其他内容，它将显示“Opportunity”标签。这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T16:01:34.923

也许有一些风格。我对相同的代码结构没有问题：

```
<h:outputText value="Please read the " />
<h:outputLink value="/termsAndConditions">
    <h:outputText value="Terms and Conditions." />
</h:outputLink> 
```

html结果是：

```
Please read the <a href="/termsAndConditions">Terms and Conditions.</a> 
```

# javascript - 基础 3.1 工具提示未显示

> ID：13301158
> 
> 赞同：0
> 
> 时间：2012-11-09T02:13:50.273
> 
> 标签：javascript, zurb-foundation

我正在尝试显示基础 3 工具提示，但是当我将鼠标悬停在 span 元素上时，它会显示标准工具提示。

![在此处输入图像描述](../Images/0d8a3cef065439a4fd88183d8e8140dd.png)

我正在引用以下 js 文件

```
<script src="/js/jquery-1.8.2.min.js" type="application/javascript"></script>   
<script src="/js/modernizr.foundation.js"  type="text/javascript"></script>
<script src="/js/app.js"  type="text/javascript"></script>
<script src="/js/jquery.foundation.forms.js"  type="text/javascript"></script>
<script src="/js/jquery.foundation.tooltips.js"  type="text/javascript" ></script> 
```

元素：

```
<span class="has-tip tip-top noradius" data-width="210" title="Bottom and the default position.">Your Target Price</span> 
```

我需要先初始化代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:47:38.130

脚本的引用顺序错误。`app.js`应该**总是**最后出现，因为它初始化插件。

```
<script src="/js/jquery-1.8.2.min.js" type="application/javascript"></script>   
<script src="/js/jquery.foundation.forms.js"  type="text/javascript"></script>
<script src="/js/jquery.foundation.tooltips.js"  type="text/javascript" ></script>
<script src="/js/app.js"  type="text/javascript"></script> 
```

也`modernizr.js`应该在`<head>`. [http://modernizr.com/docs/#installing](http://modernizr.com/docs/#installing)

```
<script src="/js/modernizr.foundation.js"  type="text/javascript"></script>
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T03:55:43.830

您可能忘记引用所有重要的样式表（foundation.min.css），将其添加到您引用 javascripts 的页面顶部：

```
 <link rel="stylesheet" href="/stylesheets/foundation.min.css"/>
  <link rel="stylesheet" href="/stylesheets/app.css"/> 
```

你也应该更新到 Zurb-Foundation 3.2

# css - 固定双标题，可滚动内容（移动应用）

> ID：13301164
> 
> 赞同：0
> 
> 时间：2012-11-09T02:14:38.517
> 
> 标签：css, html, blackberry-webworks

我在使用 WebWorks 为移动应用程序设计布局时遇到问题。页面布局如下：

```
----------------Title Header (div#title)-----------------
----------------Tabs Header(div#tabs)--------------------
-----------       content  (div#content)  ---------------- 
```

标记：

```
<body>
  <div id="mainContainer">
    <div id="title">Some title</div>
    <div id="tabs">Some navigation tabs</div>
    <div id="content>
      <!--- some contents that could be in contain in div or table populated from       
      database-->
    </div> 
  </div> 
```

div#title 和 div#tabs 是固定的标题。div#content 意味着可以垂直滚动而不重叠 div#title 和 div#tabs 并且也可以水平滚动但是 div#title 和 div#tabs 在水平滚动时不能移动或消失。

我尝试设置 positon: fixed to div#title 和 div#tabs 但是当尝试在 BlackBerry 手机中滚动时存在一些滞后问题，即 div#title 和 div#tabs 需要很长时间才能刷新和显示自身。

如果不能使用位置：固定，是否有人修复标题但使内容可滚动而不重叠或拉伸布局？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:08:06.540

我总是这样处理滚动：

`body { position: fixed; }`

`#title, #tabs { position: fixed; }`

`#content { overflow-y: scroll; -webkit-overflow-scrolling: touch; // for bb10 }`

请注意，如果您的目标是 BlackBerry 10，-webkit-overflow-scrolling: touch; 将允许您利用惯性滚动效果。

# c# - 使用 SQL Server 2008 的 ASP.NET Web 应用程序的更改通知系统

> ID：13301167
> 
> 赞同：0
> 
> 时间：2012-11-09T02:14:57.030
> 
> 标签：c#, asp.net, sql-server, web-applications, notifications

对于我们的 Intranet 站点，我们希望开始在按钮上包含视觉标志，这些标志指向用户尚未查看的内容已更改的部分。

为了实现这一点，我所能想到的就是，在每个 Page_Load 上，进行查询以将用户的最后访问日期与该部分的内容进行比较，以查看自上次访问以来是否添加了任何新内容。

例如，我们有一个“新闻”页面。URL 是 news.aspx，到达该页面的按钮显示“新闻”。我们的 News 表有一个 DateCreated 列，它指示文章的发布时间。所以首先我们得到用户最后一次访问 news.aspx 的日期时间。我们有一个名为 PageAccessLogs 的表，它只有三个简单的列：用户名、url 和访问时间。首先，我们将查询 PageAccessLogs 以找出该用户上次访问 news.aspx 的时间。假设结果是 2012-11-06 10:34:25。然后找出在 2012-11-06 10:34:25 之后发布了多少文章。如果从那时到现在有 1 篇文章，请在“新闻”按钮上方显示一个红色的“1”。如果从那时到现在有 2 篇文章，请在“新闻”按钮上方显示一个红色的“2”。等等。

我还没有实现它，但我很确定上面的方法会起作用。以我有限的知识，我想不出任何其他方法来实现我的目标，除了只是为每个用户在每个 Page_Load 上运行该查询。这是常用的方法吗？有没有一种方法可以实现相同的目标，而不必在每个 Page_Load 上查询服务器？

我想也许有某种技巧可以使用 cookie 来存储上次访问日期，但即使使用这种方法，也需要查询服务器以查看自上次更新以来是否有新文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:52:06.773

为什么不考虑额外的列“已见”默认为 false，因为加载新内容时假定它是不可见的，并且当用户阅读它/显示它时，该列的更新已完成以将其标记为已读。这样就没有混乱的时间戳问题。还消除了对重新计算已读/未读进行任何具体操作的需要

# python - python中的这个“POST for loop”是怎么回事？-- Python 菜鸟

> ID：13301171
> 
> 赞同：2
> 
> 时间：2012-11-09T02:15:08.013
> 
> 标签：python, pyscripter

我理解下面的代码，除了下面的 sum 函数调用。我不明白 sum 函数究竟接受什么作为其参数的逻辑？里面的for循环是什么？那是什么东西？？

```
def sim_distance(prefs,person1,person2):
  # Get the list of shared_items
  si={}
  for item in prefs[person1]:
    if item in prefs[person2]: si[item]=1

  # if they have no ratings in common, return 0
  if len(si)==0: return 0

  # Add up the squares of all the differences
  sum_of_squares=sum([pow(prefs[person1][item]-prefs[person2][item],2)
                      for item in si])

  return 1/(1+sum_of_squares) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:20:53.163

所以那里有两个概念在起作用——`sum`还有一个列表理解。

```
sum_of_squares=sum([pow(prefs[person1][item]-prefs[person2][item],2)
                      for item in si]) 
```

首先，列表理解。

```
[pow(prefs[person1][item]-prefs[person2][item],2) for item in si] 
```

这可以分解为`for`如下所示的循环：

```
result_list = [] # Note that this is implicitly created
for item in si:
    result_list.append(pow(prefs[person1][item]-prefs[person2][item], 2)) 
```

通过在每次迭代中运行`pow`函数、使用 each `item`in`si`并将结果附加到`result_list`. 假设循环会产生类似的结果`[1, 2, 3, 4]`- 现在`sum`所做的就是对列表的每个元素求和并返回结果。

至于`sum`函数接受什么作为参数的问题，它正在寻找一个可迭代的，它是可以迭代的任何东西（字符串、列表、字典的键/值等）。就像您在`for`循环中看到的一样，`sum`将每个项目添加到可迭代对象（在本例中为列表）并返回总数。还有一个可选`start`参数，但我会首先专注于理解基本功能:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:17:14.453

这只是一个[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)- 所以你的“for”循环用于构建一个 diff 值的列表，以 2 的幂为单位

它几乎是一样的：

```
lVals = []
for item in si:
    lVals.append(pow(prefs[person1][item]-prefs[person2][item],2))

sum_of_squares = sum(lVals) 
```

# android - adb shell 说没有找到设备，但是 adb -s 贝壳工程

> ID：13301172
> 
> 赞同：1
> 
> 时间：2012-11-09T02:15:19.763
> 
> 标签：android, windows, adb

我对`adb shell`命令有一个奇怪的情况。

```
adb devices 
```

显示我的设备按预期连接；但是当我尝试

```
adb shell 
```

没有参数，它会响应`error: no device found`。但是，当我跑步时

```
adb -s <device_serial_number_from_adb_devices> shell 
```

我能够成功进入外壳。这很好，除了我有一些其他与 adb 相关的问题，因为它没有与默认参数连接。

附加信息：

*   启用 USB 调试（再次，当我指定序列号时工作）
*   W7/64位笔记本电脑
*   adb shell 在另一台 macosx 机器上工作正常，所以问题似乎是我的 android 安装所特有的
*   我已经从 android SDK 卸载并重新安装了 google usb 驱动程序
*   重新启动 adb 服务器 (kill-server, start-server)
*   试过了`android adb update`

任何 adb 专家都可以解释一下吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:24:59.723

我不知道您是否仍在寻找答案，但我最近遇到了完全相同的问题。这是在系统变量中设置 ANDROID_SERIAL 变量的结果。我在尝试设置 CI 构建（Cukes 和 Units）以分别在物理设备和模拟器上运行时这样做（当两个构建都在同一个 phy 上运行时，ADB 表现不佳）

# ruby-on-rails - 我无法使用守护进程 gem 运行我的 Rails 应用程序

> ID：13301174
> 
> 赞同：1
> 
> 时间：2012-11-09T02:15:32.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, daemon

我想在我的 Rails 项目中使用 Daemons gem，这样我就可以使用 Monit 轻松监控它，这个 gem 将允许我创建 PID 并使用 start 和 stop 等命令。

无论如何，我似乎无法以某种方式将它与 rails 一起使用，我创建了一个文件并将其命名为 admin ：

```
require 'rubygems'
require 'daemons'

ROOT_PATH = File.expand_path("#{File.dirname __FILE__}/../")

require "#{ROOT_PATH}/config/environment"

Daemons.run("#{ROOT_PATH}/script/rails" , 
    :dir_mode => :system, 
    :log_output => true 
) 
```

当我尝试使用以下命令运行它时：

```
bundle exec ./bin/admin run -- s 
```

我收到此错误：

```
/Users/info/.rvm/gems/ruby-1.9.3-p286/gems/rake-0.8.7/lib/rake/alt_system.rb:32: Use RbConfig instead of obsolete and deprecated Config.
=> Booting WEBrick
=> Rails 3.0.5 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
configuration /config.ru not found
Exiting 
```

config.ru 文件肯定在那里。当我尝试使用命令行手动执行它时，我可以运行该应用程序，但由于某种原因，我可以守护进程 rails app 。

我会很感激任何帮助，因为我整天都在努力解决这个问题。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:42:27.357

可能是因为`daemons`没有在您的应用程序根目录中运行服务器？

更新

要从您的根应用程序目录以外的其他路径启动 Rails 服务器，请使用命令`-c`选项，该选项`rails server`需要您的`config.ru`文件的确切路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:48:17.113

我知道这并不能直接解决你的守护进程问题，但如果你在 linux 上，你可以使用 start-stop-daemon 基本上做同样的事情。而且你不需要它的脚本，只需要你的监视器配置中的一个衬里，它使用 start-stop-daemon 来守护进程。

# c# - 删除 CLOSELY 匹配的字符串 C#

> ID：13301175
> 
> 赞同：0
> 
> 时间：2012-11-09T02:15:32.863
> 
> 标签：c#

我有一条由紧密匹配的字符串组成的消息。我想从 message 中删除紧密匹配的字符串。接近我的意思是，如果两个字符串匹配到它们总长度的**80%**，那么其中一个应该被认为是重复的并被删除。

来自`System.Linq;`或类似策略的 distinct() 方法不会像我在下面实现的那样工作，因为即使是一个不匹配的字符。

```
string[] masg = {"Hello World","Hello World One","Hello-World","How are you","How are u"};

var distinctStr = masg.Distinct();
masg="";

foreach(string str in distinctStr)
    masg+=str+"~"; 
```

**期望的输出**

> 世界你好~你好吗

怎么做 。请提供我应该经历的想法或进一步的概念。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:25:02.323

您首先需要做的是定义字符串之间的距离，例如使用[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。之后，您只需要遍历字符串，将它们添加到集合中，只要该集合不包含另一个距离低于您想要的距离的字符串。

# multithreading - gtk 线程安全 python

> ID：13301187
> 
> 赞同：0
> 
> 时间：2012-11-09T02:17:00.763
> 
> 标签：multithreading, thread-safety, gtk, pygtk

我对 gtk 中的线程有一个基本的怀疑。我想在 gtk 中并行运行两个函数。如果我使用 gobject_timeoutadd 是否可以。如果是，我应该使用 gtk.thread_enter 和 gtk.thread_leave 吗？

我对程序的想法是这样的

```
import gtk,gobject

class Gtk_main:

    def __init__(self):
        self.a=2
        self.b=3
        gobject.timeout_add(1000,self.test_1)
        gobject.timeout_add(1000,self.test_2)        

    def test_1(self):

        return True

    def test_2(self):

        return True

Gtk_main()
gobject.threads_init()
gtk.gdk.threads_init()
gtk.main() 
```

此代码只是一个示例。当我真正使用 gtk.thread_enter 和 gtk.thread_leave 时，程序挂起。所以我想澄清我对 gtk 线程的理解。

提前致谢， thothadri

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:53:28.340

您的示例挂起，因为在进入循环之前和退出循环之后`gtk.main()`调用，所以如果您调用您的代码应该类似于以下代码。`gdk_threads_leave()``gdk_threads_enter()``gtk.gdk.threads_init()`

```
...
gobject.threads_init()
gtk.gdk.threads_init()
Gtk_main()
gtk.gdk.threads_enter()
gtk.main()
gtk.gdk.threads_leave() 
```

PS。我不确定`Gtk_main()`必须在线程初始化之后进行，但我认为它不会受到伤害。

正如 ptomato 所说，`timeout_add()`它不是线程安全的，但只有当您需要从不同的线程调用 gtk 函数时，这才是一个问题。一个简单的方法是：

```
import functools

def thread_safe(func):
    @functools.wraps
    def wrapper(*args, **kwds):
        gtk.gdk.threads_enter()
        try:
            return func(*args, **kwds)
        finally:
            gtk.gdk.threads_leave()
    return wrapper

threads_timeout_add = thread_safe(gobject.timeout_add) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:02:46.720

如果只使用超时，则不需要使用 GDK 线程。

如果您同时使用超时和线程，那么您不需要在超时回调中调用`threads_enter()`和`threads_leave()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:50:53.250

我总是在我的程序中使用 Python 而*不是*GTK 线程，效果很好。

但是，它仍然是必要的`gobject.threads_init()`，甚至可能`gtk.gdk.threads_init()` 取决于您的 GTK 版本。

您还需要`import threading`，您可以在官方 python 文档中找到极好的文档。

# jquery - 如何创建 jQuery 代码模式？

> ID：13301196
> 
> 赞同：1
> 
> 时间：2012-11-09T02:18:00.963
> 
> 标签：jquery

我使用本教程中的代码：[jacklmoore.com/notes/jquery-tabs](http://jacklmoore.com/notes/jquery-tabs)。

```
<ul class='tabs'>
    <li><a href='#tab1'>Tab 1</a></li>
    <li><a href='#tab2'>Tab 2</a></li>
    <li><a href='#tab3'>Tab 3</a></li>
</ul>
<div id='tab1'>
    <p>Hi, this is the first tab.</p>
</div>
<div id='tab2'>
    <p>This is the 2nd tab.</p>
</div>
<div id='tab3'>
    <p>And this is the 3rd tab.</p>
</div> 
```

脚本：

```
$('ul.tabs').each(function(){
    // For each set of tabs, we want to keep track of
    // which tab is active and it's associated content
    var $active, $content, $links = $(this).find('a');

    // If the location.hash matches one of the links, use that as the active tab.
    // If no match is found, use the first link as the initial active tab.
    $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
    $active.addClass('active');
    $content = $($active.attr('href'));

    // Hide the remaining content
    $links.not($active).each(function () {
        $($(this).attr('href')).hide();
    });

    // Bind the click event handler
    $(this).on('click', 'a', function(e){
        // Make the old tab inactive.
        $active.removeClass('active');
        $content.hide();

        // Update the variables with the new link and content
        $active = $(this);
        $content = $($(this).attr('href'));

        // Make the tab active.
        $active.addClass('active');
        $content.show();

        // Prevent the anchor's default click action
        e.preventDefault();
    });
}); 
```

如果我想在一个页面上有多个选项卡系统，我必须重复脚本代码：

```
$('ul.tabs2').each(function(){...});
$('ul.tabs3').each(function(){...}); 
```

我不想拥有许多类似代码的副本。是否可以从示例中为类似的代码行创建一种代码模式？

```
var = xxx
$('ul.tabs').each(function(){
  xxx
});
$('ul.tabs2').each(function(){
  xxx
});
$('ul.tabs3').each(function(){
  xxx
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:22:07.007

你可能想要的是把它变成一个 jQuery 插件，你可以在一组元素上调用它：

```
$.fn.myTabs = function() {

  return this.each(function() {

    // All code here

  });

};

$('.tabs2, .tabs3').myTabs(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:22:54.540

你可以有一个逗号分隔的选择器列表（就像在 CSS 中一样）：

```
var = xxx
$('ul.tabs, ul.tabs2, ul.tabs3').each(function(){
  xxx
}); 
```

在函数中，`$(this)`then 成为每个逗号分隔选择器的变量。该函数将运行在所有三个上。

# scala - 如何在 Regex Scala 中匹配方括号？

> ID：13301198
> 
> 赞同：3
> 
> 时间：2012-11-09T02:18:06.090
> 
> 标签：scala

我正在尝试匹配`[`and `]`。但是当我们也将两者用于正则表达式时，我该如何编写一些模式来匹配两个括号？Using`\[`不起作用，因为它给出了以下行的编译器错误：

```
 regex(new Regex("([^.#; \\t\\r\n(){}\[\]',`\"][^; \\t\\r\\n(){}\[\]',`\"]*|[.][^; \\t\\r\\n(){}\[\]',`\"]+)")) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T13:52:00.660

我会去

```
"""\[[^\]]+\]""".r 
```

对于正则表达式。

```
"""\[[^\]]+\]""".r findAllIn """[a], [b], [123 Hello]""" toList
res2: List[String] = List([a], [b], [123 Hello]) 
```

只要您不需要解析嵌套表达式，Regex 就可以正常工作

```
"""\[[^\]]+\]""".r findAllIn """[[a], [b]]""" toList
res4: List[String] = List([[a], [b]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:02:01.383

```
val Bracketed = """\[.*?\]""".r

def check(s: String) =
  (Bracketed findAllIn s).toSeq

check("Wrong (curved) thingies") // Nil
check("") // Nil
check("[Hi]") // [Hi]
check("[Hi][There]") // [Hi], [There]
check("[Hi]gap[There]gop") // [Hi], [There] 
```

# mysql - 键“P RIMARY”的重复条目“...”

> ID：13301199
> 
> 赞同：7
> 
> 时间：2012-11-09T02:18:18.367
> 
> 标签：mysql, primary-key, innodb

正如你我都知道的那样，关于这种错误消息有很多问题。

但是我找不到任何好的答案，因为答案太多了。

我有一个存储`nonce`从客户端发送的 s 的表。

但有时（偶尔）数​​据库会抱怨重复的主键插入，即使没有具有完全相同主键的记录。

这是 JVM 显示的内容。

```
[#|2012-11-09T11:06:52.098+0900|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=236;_ThreadName=Thread-2;|EJB5184:A system exception occurred during an invocation on EJB Nonce2Bean, method: public java.lang.Object kr.co.ticomms.gameground.business.AbstractEntityFacade.persist(java.lang.Object)|#]

[#|2012-11-09T11:06:52.099+0900|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=236;_ThreadName=Thread-2;|javax.ejb.EJBException
        ...
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'c8b4bdb84606fed0-c8b4bdb84606fed0_1352426820765_1880007534138556' for key 'PRIMARY'
Error Code: 1062
Call: INSERT INTO NONCE2 (NONCE, UDID, CREATED_DATE) VALUES (?, ?, ?)
        bind => [3 parameters bound]
Query: InsertObjectQuery(c8b4bdb84606fed0/c8b4bdb84606fed0_1352426820765_1880007534138556402)
        ...
        ... 29 more
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'c8b4bdb84606fed0-c8b4bdb84606fed0_1352426820765_1880007534138556' for key 'PRIMARY'
Error Code: 1062
Call: INSERT INTO NONCE2 (NONCE, UDID, CREATED_DATE) VALUES (?, ?, ?)
        bind => [3 parameters bound]
Query: InsertObjectQuery(c8b4bdb84606fed0/c8b4bdb84606fed0_1352426820765_1880007534138556402)
       ...
       ... 59 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'c8b4bdb84606fed0-c8b4bdb84606fed0_1352426820765_1880007534138556' for key 'PRIMARY'
|#] 
```

这是mysql显示的内容。

```
mysql> SHOW VARIABLES LIKE "%version%";
+-------------------------+-------------------------+
| Variable_name           | Value                   |
+-------------------------+-------------------------+
| protocol_version        | 10                      |
| version                 | 5.1.62-0ubuntu0.10.04.1 |
| version_comment         | (Ubuntu)                |
| version_compile_machine | x86_64                  |
| version_compile_os      | debian-linux-gnu        |
+-------------------------+-------------------------+
5 rows in set (0.00 sec)

mysql> DESC NONCE2;
+--------------+--------------+------+-----+-------------------+-------+
| Field        | Type         | Null | Key | Default           | Extra |
+--------------+--------------+------+-----+-------------------+-------+
| CREATED_DATE | timestamp    | NO   |     | CURRENT_TIMESTAMP |       |
| UDID         | varchar(255) | NO   | PRI | NULL              |       |
| NONCE        | varchar(255) | NO   | PRI | NULL              |       |
+--------------+--------------+------+-----+-------------------+-------+
3 rows in set (0.00 sec)

mysql> SHOW CREATE TABLE NONCE2;
+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                |
+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| NONCE2 | CREATE TABLE `NONCE2` (
  `CREATED_DATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `UDID` varchar(255) NOT NULL,
  `NONCE` varchar(255) NOT NULL,
  PRIMARY KEY (`UDID`,`NONCE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table  | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| NONCE2 |          0 | PRIMARY  |            1 | UDID        | A         |           7 |     NULL | NULL   |      | BTREE      |         |
| NONCE2 |          0 | PRIMARY  |            2 | NONCE       | A         |         403 |     NULL | NULL   |      | BTREE      |         |
+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
2 rows in set (0.00 sec)

mysql> 
```

我尝试删除并重新创建表，但出现了同样的问题。

我在 GlassFish 上使用 JPA。

有什么帮助吗？

- - - - - - - - - - - - - - - - - - - - - 更新

我正在与 JPA 合作。

身份证类。

```
public class NonceId implements Serializable {

    public static NonceId newInstance(final String udid, final String nonce) {
        if (udid == null) {
            throw new IllegalArgumentException("null udid");
        }
        if (nonce == null) {
            throw new IllegalArgumentException("null nonce");
        }
        final NonceId instance = new NonceId();
        instance.udid = udid;
        instance.nonce = nonce;
        return instance;
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 23 * hash + (this.udid != null ? this.udid.hashCode() : 0);
        hash = 23 * hash + (this.nonce != null ? this.nonce.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final NonceId other = (NonceId) obj;
        if ((this.udid == null) ? (other.udid != null) : !this.udid.equals(other.udid)) {
            return false;
        }
        if ((this.nonce == null) ? (other.nonce != null) : !this.nonce.equals(other.nonce)) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return udid + "/" + nonce;
    }

    private String udid;

    private String nonce;
} 
```

实体类。

```
@Entity
@IdClass(NonceId.class)
@Table(name = "NONCE2")
@XmlTransient
public class Nonce2 implements Serializable {

    public static final int UDID_SIZE_MIN = 1;
    public static final int UDID_SIZE_MAX = 255;
    public static final int NONCE_SIZE_MIN = 1;
    public static final int NONCE_SIZE_MAX = 255;

    public static Nonce2 newInstance(final String udid, final String nonce) {
        if (nonce == null) {
            throw new NullPointerException("null value");
        }
        final Nonce2 instance = new Nonce2();
        instance.udid = udid;
        instance.nonce = nonce;
        return instance;
    }

    public Date getCreatedDate() {
        return createdDate;
    }

    public String getUdid() {
        return udid;
    }

    public String getNonce() {
        return nonce;
    }

    @PrePersist
    protected void _PrePersist() {
        createdDate = new Date();
    }

    @Override
    public String toString() {
        return udid + "/" + nonce;
    }

    @Column(name = "CREATED_DATE", nullable = false, updatable = false)
    @Temporal(TemporalType.TIMESTAMP)
    @NotNull
    private Date createdDate;

    @Id
    @Column(name = "UDID", nullable = false, updatable = false)
    @NotNull
    @Size(min = UDID_SIZE_MIN, max = UDID_SIZE_MAX)
    private String udid;

    @Id
    @Column(name = "NONCE", nullable = false, updatable = false)
    @NotNull
    @Size(min = NONCE_SIZE_MIN, max = NONCE_SIZE_MAX)
    private String nonce;
} 
```

在我的过滤器中我做

```
@WebFilter(urlPatterns = {"/*"})
public class Filter_ implements Filter {

    @Override
    public void doFilter(final ServletRequest request,
                         final ServletResponse response,
                         final FilterChain chain)
        throws IOException, ServletException {

        // check whether nonce is already exist via em.find();

        chain.doFilter(request, response);

        // store nonce via em.persist(); // EXCEPTION IS HERE
        // THERE IS NO SUCH RECORD check direct SQL console.
    }
} 
```

我的 JPA 提供者似乎执行了这个语句。

```
INSERT INTO NONCE2 (NONCE, UDID, CREATED_DATE) VALUES (?, ?, ?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T03:20:55.580

您在表上定义了一个复合主键。

可能是您尝试在同一会话期间批量插入记录。并且批次可能包含所述键列的重复条目。请检查一下。

另请发布您的插入代码和示例数据。

# django - 从 S3 提供 Django 的静态和媒体文件

> ID：13301200
> 
> 赞同：8
> 
> 时间：2012-11-09T02:18:19.590
> 
> 标签：django, amazon-s3, django-storage

我有一个奇怪的问题，我不知道是什么原因造成的。这是我当前的配置（使用`Heroku`）：

```
MEDIA_URL = '/media/'
STATIC_URL = '/static/'

STATICFILES_DIRS = (
os.path.join(PROJECT_DIR, '../static'),
)

#Determine if local or deployed.
if 'DATABASE_URL' in os.environ:
    STATICFILES_STORAGE     = 'storages.backends.s3boto.S3BotoStorage'
    AWS_ACCESS_KEY_ID       = 'A...A' 
    AWS_SECRET_ACCESS_KEY   = '...R' 
    DEFAULT_FILE_STORAGE    = 'storages.backends.s3boto.S3BotoStorage'

    # PRODUCTION OR STAGING
    if 'PROD' in os.environ:
        AWS_STORAGE_BUCKET_NAME = 's3.project.com'
        STATIC_URL = "https://s3.amazonaws.com/project/"
    else:
        AWS_STORAGE_BUCKET_NAME = 'project-staging'
        STATIC_URL = "https://s3.amazonaws.com/project-staging/"
else:
    STATIC_ROOT = '' 
```

问题是，静态文件工作正常，链接如下所示：`https://s3.amazonaws.com/project-staging/img/homepage_left.png`.

第一个问题（管理员一半坏了）：

管理员工作了一半。CSS 文件服务良好：`https://project-staging.s3.amazonaws.com/admin/js/core.js?Signature=asdasdasd%3D&Expires=1352430664&AWSAccessKeyId=asdasdasA`但所有图像都损坏了：

`https://project-staging.s3.amazonaws.com/admin?Signature=%2asdasdad%3D&Expires=1352430664&AWSAccessKeyId=asdasdaimg/icon_calendar.gif`

我不知道为什么 Signature 和 AWSAccesskey 在那里 :(。如果我（手动）删除它们，URL 工作正常！

第二个问题（通过 ImageField/FileField 上传媒体）：

我正在使用`{{MEDIA_URL}}{{object.flyer}}`，它转换为`/media/media/flyers/poster_1.png`，我如何指出它到 s3？它应该是这样的：`https://project-staging.s3.amazonaws.com/media/flyers/poster_1.png`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:49:06.483

回答你的第二个问题：你需要`MEDIA_URL = https://project-staging.s3.amazonaws.com/media/`像你正在做的那样设置`STATIC_URL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T01:22:31.697

对于您的第一个问题，我认为您需要这样做：

```
AWS_QUERYSTRING_AUTH = False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T18:33:38.980

添加答案：

**第一个问题：** 确保您的存储桶设置为公共并将您的设置中的 AWS_QUERYSTRING_AUTH 设置为 False，这样您的文件将在没有签名部分的情况下提供

```
AWS_QUERYSTRING_AUTH = False 
```

**第二个问题：** 确保在 {{..url}} 末尾添加“url”

```
{{MEDIA_URL}}{{object.flyer.url}} 
```

# iphone - 从 UITableView 更改我推送到的视图中的 UILabel

> ID：13301201
> 
> 赞同：0
> 
> 时间：2012-11-09T02:18:22.873
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个名为“FirstViewController”的表格视图，当我选择表格中的任一单元格时，它将推送到“SecondViewController”。SecondViewController 有一个名为“randomTitle”的 UILabel，我需要根据 FirstViewController 上选定的单元格进行更改。

因此，如果选定的单元格被命名为“随机行”，我需要将 UILabel 更改为那个。

到目前为止，我尝试了这个，但运气不佳。这在 FirstViewController 中：

```
SecondViewController *secondView = [[SecondViewController alloc] init];
secondView.randomTitle.text = @"Test"; // hardcoding it for now

[self.navigationController pushViewController:secondView animated:YES]; 
```

但是标签没有改变。我错过了什么？笔尖连接正确。这是 SecondViewController 的 .h 的样子：

```
@interface SecondViewController : UIViewController
{
    UILabel *randomTitle;
}

@property (nonatomic, retain) IBOutlet UILabel *randomTitle; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:34:36.573

恭喜，您刚刚遇到了导致如此可怕的错误的事情，这被称为“您可以毫无问题地调用 nil 上的任何方法”。

当您将文本设置为标签时，它还没有设置到插座中（因为控制器没有开始加载它的视图；它会在您推送它之后立即执行）。

为了使您的代码保持干净和可维护，我建议创建一个属性来保存文本（或者，更好的是，与所选行关联的模型）并在第二个控制器的 viewWillAppear 中使用它来配置其表示。

PS为了证明我是对的，只需在推送后放置文本分配:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:30:16.773

在您希望设置其文本属性时，您的标签似乎尚未正确初始化。将以下代码添加到您的 SecondViewController 的`init`方法中：

```
randomTitle = [[UILabel alloc] init]; 
```

假设它在 IB 中正确连接，randomTitle 标签将采用您在 IB 中设置的所有属性。在任何情况下，您都需要显式地`alloc-init`设置标签，然后才能设置其文本，就像在 FirstViewController 方法中所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:36:24.003

注意：我知道使用故事板/segues 是如何工作的，但是对于没有 segues 的推送视图，以下内容应该适用于第二个视图控制器，但必须对第一个视图控制器进行一些调整

将`(nonatomic, copy)`属性用于`NSString`。

在`.h`您的第二个视图控制器的文件中，创建一个`NSString`充当“传输字符串”

```
@property (nonatomic, copy) NSString *transferString; 
```

在您`.m`的第二个视图控制器的文件中，合成和解除分配等以及您的 viewDidLoad：

```
-(void)viewDidLoad
{
    [super viewDidLoad];

    randomTitle.text = transferString;
} 
```

这会根据输入显示您想要的特定文本。现在要传递文本，您需要转到您的第一个视图控制器；所有这些都发生在`.m`文件中。首先，导入第二个视图控制器：

```
#import "SecondViewController.h" 
```

对于你的 Segue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"SegueName"]) 
    {        
        [[segue destinationViewController] setTransferString:[NSString stringWithFormat:@"%@", [yourArray objectAtIndex:yourTableView.indexPathForSelectedRow.row]]];
    }
} 
```

`yourArray`你用来填充的 NSArray在哪里`yourTableView`

# ios - MonoTouch：UIWeb 不播放 YouTube 嵌入式视频

> ID：13301202
> 
> 赞同：0
> 
> 时间：2012-11-09T02:18:27.763
> 
> 标签：ios, uiwebview, xamarin.ios

在我们的应用程序中，我们在 UINavigation 控制器中托管一个 UIWebView 控件并让它去获取网页。这些页面嵌入了 YouTube 视频。

在 iPad 上它可以正常工作，在 iPhone 上，视频弹出打开然后闪烁并死去返回应用程序，应用程序可以继续正常运行，所以它不是应用程序崩溃。

这是我从控制台得到的**iPhone**错误（不是很有帮助）：

```
 Nov  8 18:04:37 backboardd[26] <Warning>: Application 'UIKitApplication:com.apple.mobilesafari[0xf377]' exited abnormally with signal 9: Killed: 9
 Nov  8 18:04:37 ReportCrash[7703] <Notice>: 
          Not saving suspended-only Jetsam log because already dumped today. 
```

在**模拟器**中我得到这个：

```
[MPAVController] Autoplay: Enabling autoplay
[MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
setting movie path: http://o-o---preferred---sn-nx57yne7---v23---lscache8.c.youtube.com/videoplayback?upn=2-
[MPAVController] Autoplay: Enabling autoplay
[MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
[MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
setting movie path: http://o-o---preferred---sn-nx57yne7---v23---lscache8.c.youtube.com/videoplayback?upn=2-Jx_RQQ4Hs&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=90331
[MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1
[MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
[MPAVController] Autoplay: Enabling autoplay
[MPAVController] Autoplay: Enabling autoplay
[MPAVController] Autoplay: Disabling autoplay for pause
[MPAVController] Autoplay: Disabling autoplay 
```

# python - 如何在 Tastypie 中加载外键元素

> ID：13301206
> 
> 赞同：9
> 
> 时间：2012-11-09T02:18:46.573
> 
> 标签：python, django, tastypie

在我的 Django 模型中，我有 10 个字段，其中 3 个字段是外键。在从 GET 请求收到的 JSON 数据中，我得到了所有字段，但没有得到外键。

我也这样做了，但我仍然没有在 JSON 数据中获得这些字段：

```
DataFields = MyData._meta.get_all_field_names()
class MyResource(ModelResource):
       class Meta:
        queryset = MyData.objects.all()
        resource_name = 'Myres'
        serializer = Serializer(formats=['json'])
        filtering = dict(zip(DataFields, [ALL_WITH_RELATIONS for f in DataFields])) 
```

例如，我在模型中有字段 like `city`，但该字段在我从中获得的 JSON 中不可用。

有什么方法可以在 JSON 中`city:city__name`自动获取？

如果我这样做，那么我得到了城市，但我可以在不定义的情况下做到这一点：

```
def dehydrate(self, bundle):
        bundle.data["city_name"] = bundle.obj.city__name
        return bundle 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T03:35:15.250

您需要为外键字段创建[相关资源](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#creating-more-resources)并将它们嵌入到`MyResource`. 如果你制作嵌入的资源`full=True`，它会在获取时将其脱水`MyResource`，否则它会将其嵌入为相关的资源uri。

```
class RelatedResource(ModelResource):
    class Meta:
        ...

class MyResource(ModelResource):
    related = fields.ForeignKey(RelatedResource, full=True)

    class Meta:
        ... 
```

然后，您可以`?related__field=value`在 GET 请求中过滤到`MyResource`.

* * *

如果您只是想要模型返回的字段`__unicode__`，您可以尝试执行以下操作（而不是嵌入相关资源）：

```
class MyResource(ModelResource):    
    city = fields.CharField(attribute="city")

    class Meta:
        ... 
```

`MyData`其中“city”是模型上外键的字段名称。

# javascript - 如果使用 jquery 验证时存在其他输入元素，我如何禁用输入

> ID：13301208
> 
> 赞同：0
> 
> 时间：2012-11-09T02:18:56.360
> 
> 标签：javascript, jquery, html

我有一个表格。如果页面上存在第二个元素，我需要此脚本不验证 textarea。我无法从脚本中删除 textarea 验证，因为它用于验证另一个表单上的输入。

如果页面中存在我的第二个元素，是否有任何方法可以忽略此 if 语句？

这是我的js：

```
if ( $('textarea').val()=="") {
    showOverlay();
    errors[errors.length] = ' enter your feedback';
} 

if ( $("#edit-vertical-title").val()=="" ) {
    showOverlay();
    errors[errors.length] = ' enter your menu item';
} else {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:23:39.703

[只需使用jQuery length](http://api.jquery.com/length/)添加检查元素是否存在于第一个 if 语句中，如下所示：

```
if ($("#edit-vertical-title").length <= 0 && $('textarea').val()=="") {
    showOverlay();
    errors[errors.length] = ' enter your feedback';
} 

if ( $("#edit-vertical-title").val()=="" ) {
    showOverlay();
    errors[errors.length] = ' enter your menu item';
} else {
    // Do other stuff here
} 
```

# java - Digital Persona 一键式 sdk - 无法在 java 中执行验证

> ID：13301209
> 
> 赞同：1
> 
> 时间：2012-11-09T02:18:57.833
> 
> 标签：java, fingerprint

我已经使用小程序以字符串的形式捕获了一个功能集。我需要将该字符串转换回字节并反序列化以匹配它。但我不知道哪里出了问题，因为它没有将模板与功能集进行比较。我已经为此奋斗了几个星期，请任何人帮助我。

```
//Converting string stored in db back to template:
            byte[] byteArray = new byte[1];
            byteArray = hexStringToByteArray(dbTemplate);
            DPFPTemplate template = DPFPGlobal.getTemplateFactory().createTemplate();
            template.deserialize(byteArray);

//Converting featureset string captured by applet 
            byte[] fsArray = new byte[1];
            fsArray = hexStringToByteArray(ftsetstring);
            DPFPFeatureSet features = null;
            features.deserialize(fsArray);

//Comparing template with features acquired
            DPFPVerification matcher =   DPFPGlobal.getVerificationFactory().createVerification();
            DPFPVerificationResult fresult = matcher.verify(features, template);

                if (fresult.isVerified()) {

                    return "The fingerprint was VERIFIED.";

                } else {
                    return "The fingerprint was NOT VERIFIED."; 
```

我的错误在哪里？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T23:52:42.290

首先，您需要一个带有数据侦听器的捕获器来从指纹设备中获取特征：

```
DPFPCapture capturer=DPFPGlobal.getCaptureFactory().createCapture();
capturer.addDataListener(new DPFPDataListener(){
    public void dataAcquired(DPFPDataEvent e){
        DPFPSample sample=e.getSample();
        DPFPFeatureSet features=extractor.createFeatureSet(sample, DPFPDataPurpose.DATA_PURPOSE_ENROLLMENT);
        // Serialize or verify features
    }
}); 
```

如果您正在序列化：

```
DPFPEnrollment enroller=DPFPGlobal.getEnrollmentFactory().createEnrollment();
enroller.addFeatures(features);
if(enroller.getFeaturesNeeded()==0){
    byte[] result=enroller.getTemplate().serialize();
    // Save result in data base
} 
```

如果您正在验证：

```
// Get byte[] result from data base
DPFPTemplateFactory templateFactory=DPFPGlobal.getTemplateFactory();
DPFPVerificationResult verificator=verificator.verify(features, templateFactory.createTemplate(result));
if(verificator.isVerified()){
    // Grant access
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:26:37.030

我以前从未使用过 Digital Persona，但在任何 API 中，这是：

```
 DPFPFeatureSet features = null;
        features.deserialize(fsArray); 
```

会导致`NullPointerException`. 我试图查找如何正确使用该类，但您必须是 Digital Persona 的成员才能查看 javadoc。对不起！

# django - Django：显示动态原始查询

> ID：13301212
> 
> 赞同：0
> 
> 时间：2012-11-09T02:19:24.697
> 
> 标签：django, templates, loops

我有一个按类型过滤的查询，“水果”

水果 = { 苹果、橙子、芒果、菠萝等 }

但是在这种情况下，每种水果也有不同的物品。（对于开发人员：服务器内域的属性）

[http://i46.tinypic.com/35kj1o7.png](http://i46.tinypic.com/35kj1o7.png)

注意： - 水果的种类会因天而异，有些水果不是当季水果。- 对于开发人员：各个服务器可能拥有不同数量的域 - numType 字段可动态确定当天有多少不同的“水果”可用

主要目标： - 显示可用数据并将其分类到表格中。

[http://i48.tinypic.com/infhip.png](http://i48.tinypic.com/infhip.png)

在 view.py 上，我做了 2 个原始 sql 查询

1.  选择 * from main where cat =='fruit'
2.  选择 * from main where cat =='fruit' && name='numType'

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:31:37.970

不确定我是否完全遵循这个问题，但请尝试查看有关[Django template for loops](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for)的文档，您可以使用该标签遍历键/值对。

如果比这更复杂，您可以尝试多解释一下吗？

* * *

也许[重组](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)会做你想要的？

```
{% regroup fruit_list by [key] as apple_list %}

{% for apples in apple_list %}
    <table>
    {% for apple in apples %}
    <td>{{apple}}</td>
    {% endfor %}
    </table>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:10:06.627

我可能错了，可能有更好的方法，欢迎大家分享和讨论。

当前缺陷：dicts是无序的

在我看来.py：

*   我做了两个查询，

    1.  fruit_list = select * from main where type ="fruit"

    // 这将告诉我当天出售的可用水果类别

    1.  number_of_cat = 从 main 中选择价格，其中 type ="fruit" 和 name="numType"
*   // 将 django 返回的查询集转换成一个列表 fruitRows = list(fruit_list)

*   lenRow = len(fruitRows)

*   // 在 python masterFruitList = {} 中创建一个字典；

*   // 根据 for i in range(int(number_of_cat)) 的数量在 dict 中创建键：masterFruitList['fruit_Type'+ str(i+1)] = []

*   // 向字典中添加行

*   // 添加到上下文 return render_to_response('data.html', {'numdo' : masterFruitList })

模板.html：

关键是使用 .items 语法来迭代python字典

```
{% if numdo %}
    {% for key,value in numdo.items %}
         <p> hey! <b> {{ key }} </b>
            <table class = "tablebord">
                <tr>
                    <th> name </th>
                    <th> type </th>
                    <th> price </th>
                </tr>
                {% for x in value %}
                    <td class = "tablebord"> {{ x.name }} </td>
                    <td class = "tablebord"> {{ x.type }} </td>
                    <td class = "tablebord"> {{ x.price }} </td>
                </tr>
                {% endfor %}
            </table>
         </p>

    {% endfor %}
{% endif %} 
```

# mysql - 运行 GeoDjango 教程时字符串值不正确：“警告：字符串值不正确”

> ID：13301213
> 
> 赞同：0
> 
> 时间：2012-11-09T02:19:29.520
> 
> 标签：mysql, django, geodjango

注意：复制并详细说明此问题和答案来自：[https](https://groups.google.com/forum/?fromgroups=#!topic/django-users/OW_uSWCoObs) ://groups.google.com/forum/?fromgroups=#!topic/django-users/OW_uSWCoObs ：

嗨，我试图通过 GeoDjango 教程，当我尝试使用 LayerMapping 导入数据时，我收到以下错误：

```
 Warning: Incorrect string value: '\xC2\x85land...' for column 'name' at row 1 
```

我正在使用 MySQL，我的字符集和排序规则设置为 latin1（我也尝试过 utf8）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:19:29.520

在列中插入`iso-8859-1`( `latin1`) 字符`utf8`会导致 MySQL 抛出该错误。

这可以通过更改教程中 world/load.py 的行中的编码来解决：

```
lm = LayerMapping(WorldBorder, world_shp, world_mapping,
                  transform=False, encoding='iso-8859-1') 
```

对以下...

```
lm = LayerMapping(WorldBorder, world_shp, world_mapping,
                  transform=False, encoding='utf8') 
```

有关更多信息，请参阅[MySQL 在 Django 中保存 unicode 字符串时出现“不正确的字符串值”错误](https://stackoverflow.com/questions/2108824/mysql-incorrect-string-value-error-when-save-unicode-string-in-django)

通常，请参阅[http://bugs.mysql.com/bug.php?id=30131](http://bugs.mysql.com/bug.php?id=30131)了解更多详细信息，特别是如果您是 Windows 用户（不要被 URL 误导——这不是错误）。

# android - Android-如何在Listview中显示图像圆边

> ID：13301218
> 
> 赞同：0
> 
> 时间：2012-11-09T02:20:13.057
> 
> 标签：android

我想使用 SimpleAdapter，不想覆盖 Adapter。是不是通过写ListView Layout文件，上传后让图片显示圆边来实现的。我找到了一些参考，并编写了这样的代码。我不明白如何传递参数。任何人的正确方向都是感激的。

```
adapter.setViewBinder(new ViewBinder() {
    public boolean setViewValue(View view, Object data,
            String textRepresentation) {

        if(view instanceof ImageView  && data instanceof Bitmap){
            ImageView iv = (ImageView) view;

            iv.setImageBitmap((Bitmap) data);
            return true;
        }else
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:16:00.530

使用该标签在 XML 中创建一个圆角的可绘制对象。（您也可以使用形状标签做其他事情，例如定义颜色渐变）。

这是我在我的一个应用程序中使用的 XML 文件的副本，用于创建具有白色背景、黑色边框和圆角的可绘制对象：

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
    <solid android:color="#ffffffff"/>    

    <stroke android:width="3dp"
            android:color="#ff000000"
            />

    <padding android:left="1dp"
             android:top="1dp"
             android:right="1dp"
             android:bottom="1dp"
             /> 

    <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

# c# - 将字典信息转换为格式化字符串的最佳方法 (C#)

> ID：13301225
> 
> 赞同：0
> 
> 时间：2012-11-09T02:21:17.577
> 
> 标签：c#, user-interface, dictionary, formatting, categorization

我有一个单词字典和它们出现的次数（字符串，整数）。

在按字母顺序或频率对单词进行分类后，我需要获取此信息并将其显示到 GUI 中。分类将显示并以

“以字母_开头的单词”

或与

“出现_次的单词”

然后显示正确的信息。然而，单词 display 也必须格式化为用户可以更改的不同数量的列 (1-6)。

主要是我正在寻找有关如何对信息和格式进行分类的任何建议。

*另外，我必须使用一个按我已经拥有的 linq 排序的字典

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:23:50.297

您所说的分类在 LINQ 中称为“分组”。查看[分组示例](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea)。

# paypal - Paypal 预批日期

> ID：13301230
> 
> 赞同：0
> 
> 时间：2012-11-09T02:21:30.400
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

默认情况下，当我设置预批准详细信息（使用 SDK）时，它将现在作为开始日期的日期和结束日期 + 10 天。

收到 PA Key 后，我立即确认付款，并尝试执行 PAY Api。

但后来我得到以下回应：

> > [message] => 不能在开始日期之前或结束日期之后使用预批准密钥

这很奇怪，因为今天是 2012-11-09。MAChine 使用 UTC 时间。

当我使用昨天的开始日期时，付款工作正常，虽然 DOCS 状态我不能这样使用它：

> 开始日期 -
> 
> 预先批准有效的第一个日期。它不能在今天的日期之前或结束日期之后。

## 附加信息：

PA请求：

> requestEnvelope.errorLanguage=en_US&cancelUrl=http://example.com/cancel&Preapproval.php¤cyCode=USD&endingDate=2012-11-19&maxNumberOfPayments=10&maxTotalAmountOfAllPayments=50.0&returnUrl=http://example.com/done&startingDate=2012-11-09&feesPayer=SENDER

巴勒斯坦权力机构回应：

> responseEnvelope.timestamp=2012-11-08T18%3A17%3A02.047-08%3A00&responseEnvelope.ack=成功&responseEnvelope.correlationId=a63f86411f2ba&responseEnvelope.build=4110101&preapprovalKey=PA-1AH67555CK6636515

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:37:37.597

哦，我认为这是因为您没有在开始/结束日期中设置时区。因此，如果我没记错的话-我认为默认情况下它使用太平洋时区（加利福尼亚）。

您可以使用 Zulu 或 GMT 偏移格式设置起始日期和结束日期。如以下各个示例： 2010-09-10Z 2010-09-10T17:24:03.874-07:00

# algorithm - 大小为 n 的数组中缺少 m 个整数

> ID：13301234
> 
> 赞同：5
> 
> 时间：2012-11-09T02:21:50.640
> 
> 标签：algorithm

这是我不久前遇到的一个有趣的问题，但在解决它时遇到了一些麻烦。

> 有一个大小为**N**的未排序整数数组存储有数字*1,2..,N+M* ，其中缺少**M**个整数。**M**和**N**是事先已知的。编写一个算法以最有效的方式找到丢失的**M个整数。**

**曾尝试将其映射到大小为N** + **M**的数组，以便第*i*个索引包含值为*i*的元素，但这需要 2 次扫描（1 次用于映射，1 次用于查找**M**缺失的数字）。

我遇到的这本书提到了一个单一的扫描解决方案是可能的，但我无法达到它。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:40:11.043

您可以使用映射在数组顶部的双向链表来做到这一点。

```
position 1 2 3 4 5 6 ...
next     2 3 4 5 6 7 ...
prev     0 1 2 3 4 5 ... 
```

在通过输入时，您索引到与每个输入数字对应的位置并更新链表以从链表中删除（跳过）该位置。在输入结束时，链表将仅包含未访问的位置。

# asp.net-mvc-3 - 从 DropDownList 中选择一个值以便能够填写字段

> ID：13301235
> 
> 赞同：0
> 
> 时间：2012-11-09T02:21:53.673
> 
> 标签：asp.net-mvc-3, selectedvalue, html-select

我已经用以下内容填充了 DropDownList： 模型：

```
namespace VAGTC.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Organization
    {

        public int OrganizationID { get; set; }
        public string Name { get; set; }

} 
```

控制器：

```
public ActionResult Index()
{

    ViewBag.DropOrgID = ddp.OrganizationList();
    return View();
} 
```

视图模型：

```
namespace VAGTC.ViewModels
{
    public class OrgDrop
    {
        public Organization organization { get; set; }
        public IEnumerable<Organization> Organizations {get; set;}
    }
} 
```

帮手：

```
 public class DropDownPopulatorController : Controller
    {
        private VAGTCEntities db = new VAGTCEntities();

        public SelectList OrganizationList(int selectedOrg = 0)
        {
            var orgQuery = from d in db.Organizations
                           orderby d.Name
                           select d;
            return new SelectList(orgQuery, "OrganizationID", "Name", selectedOrg);
        }
    } 
```

然后，我只需将“@Html.DropDownList("DropOrgID")”放在我的索引视图中。

我必须完成的是通过根据 DropDownList 中选择的内容从我的数据库中获取数据来填充文本框（我尚未实现）。但我无法弄清楚 - 我觉得好像我错误地创建和填充了下拉列表。

我是 MVC 的新手，我正在慢慢学习！我一步一步来！现在专注于获取 SelectedValue。我尝试了许多创建和填充下拉列表的方法，但这是对我有用的方法。我查找了获取 SelectedValue 的教程，但它似乎不适用于我制作下拉菜单的方式。具体来说，我找到了[Cascading DropDownList](http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx)但我无法让它与我的下拉列表一起使用。

所以我的问题是：如何获取 SelectedValue，然后将值传递给控制器​​，然后传递给模型（我认为这就是它的工作原理？）根据选择来选择数据。

非常感谢任何帮助。

供参考：[这是我的下拉菜单](http://vagtc.net/)

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-09T05:57:35.383

您可以在 Controller 中的 Post Action 中获取下拉列表的选定值，

```
[HttpPost]
public ActionResult Index(FormCollection frm)
{
   var selectedValue = frm["DropOrgID"];
   return View();
} 
```

# jquery - jsdom：使用 jQuery 将脚本附加到正文

> ID：13301241
> 
> 赞同：2
> 
> 时间：2012-11-09T02:22:47.557
> 
> 标签：jquery, node.js, dom, jsdom

如何使用 jsdom 和 jQuery 将脚本附加到 DOM 主体？使用的明显答案`$('body').append('<script src="..."></script>')`实际上最终会在文档中添加脚本`head`。

这是我正在测试的基本 node.js 脚本：

```
var jsdom = require('jsdom');

jsdom.env(
    "http://google.com",
    ['http://code.jquery.com/jquery-1.6.min.js'],
    function(err, window) {
        var $ = window.jQuery;
        $('body').append('<script src="http://example.com/script.js"></script>');
        console.log($('html').html());
    }
); 
```

这会导致以下内容：

```
<head><script src="http://example.com/script.js?_=1352426933034"></script>... 
```

有趣的是，如果您在其中添加了一个空格，`<sc ript src="..."></script>`则会正确附加，所以某些东西（我希望是 jsdom）正在劫持这个脚本，因此它可以添加 cachebuster(?) 并将其放在标题中。是什么导致了这种情况，我该**如何防止它发生**，所以它会附加脚本？

物有所值，

```
$ npm ls
/Users/codyaray/dev/proxy/test
└─┬ jsdom@0.2.19
  ├─┬ contextify@0.1.3
  │ └── bindings@1.0.0
  ├── cssom@0.2.5
  ├── cssstyle@0.2.3
  ├── htmlparser@1.7.6
  └─┬ request@2.11.4
    ├─┬ form-data@0.0.3
    │ ├── async@0.1.9
    │ └─┬ combined-stream@0.0.3
    │   └── delayed-stream@0.0.5
    └── mime@1.2.7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T20:29:05.583

我刚刚在 jsdom 中遇到了这个问题，我只想`<script>`将`<head>`.

以下代码：

```
$('head').append('<script type="text/javascript" src="script.js"></script>'); 
```

结果是：

```
<head>
  <script type="text/javascript" src="script.js"></script>
  <script src="script.js?_=1352426933034"></script>
</head> 
```

这似乎只在附加已设置属性`<script>`的元素时发生。当你第一次追加空然后设置它`src`时，一切似乎都**很好**：`<script>`**`src`**

 **```
$('<script>').appendTo($('head')).attr('src','script.js'); 
```**

# android - 以英寸为单位动态设置视图的宽度

> ID：13301247
> 
> 赞同：0
> 
> 时间：2012-11-09T02:23:19.617
> 
> 标签：android, android-layout

可以使用 input.xml 文件以英寸为单位设置布局宽度：

```
<LinearLayout
android:layout_width="3in"> 
```

如何以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:40:41.647

您可以使用：

```
float pixels = TypedValue.applyDimension(
    TypedValue.COMPLEX_UNIT_IN, 3, getResources().getDisplayMetrics()); 
```

计算设备上 3" 的像素大小，然后设置布局宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:16:06.047

`getResources()`是一种方法，但它返回一个对象。
所以，`getResources.getDisplayMetrics() = (return object).getDisplayMetrics()`。

# python - 去除列表括号并用空格替换逗号

> ID：13301248
> 
> 赞同：0
> 
> 时间：2012-11-09T02:23:21.240
> 
> 标签：python

据我了解，该`re`库仅适用于字符串，而我有一个列表。我问的原因是因为我试图将此 Python 输出转换为与 r 兼容。这是我正在尝试做的事情：

```
list = [1, 2, 3, 4]
1 2 3 4 
```

让我在这里绊倒的是我不能说`output = 1 2 3 4`。我正在考虑尝试通过写入文件或其他东西来解决这个问题，但我不知道如何首先获得我喜欢的输出。有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:24:56.057

使用 join - 你会得到你想要的：

```
strToWrite = ' '.join(map(str, lVals)) #map will apply str to each element of lVals 
```

不要使用“列表”作为变量名——这不是一个很好的做法，因为它是保留的。

# java - java的日期时间不同步（tomcat 7）

> ID：13301255
> 
> 赞同：1
> 
> 时间：2012-11-09T02:24:20.513
> 
> 标签：java, date, tomcat, time, sync

我在 linux 机器上运行一个 tomcat 7 服务器。

我遇到了一个问题，当我使用“日期”命令更改后端时钟时，我从

```
new Date() 
```

不同步。

这是通过重新启动 tomcat 服务器来解决的。有什么办法可以解决这个问题吗？我已经通过 googld 搜索并没有真正找到答案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-23T15:18:36.323

如果您使用的是 Centos，请查找**/etc/sysconfig/clock**文件并相应地更改时区。

# macos - Git 没有在我的 $PATH 中使用第一个编辑器

> ID：13301260
> 
> 赞同：2
> 
> 时间：2012-11-09T02:25:18.860
> 
> 标签：macos, git, path, editor, homebrew

我使用的是 OS X 10.8，我使用 brew 安装了比 OS X 附带的更新版本的 emacs。

较新的 emacs 二进制文件安装在`/usr/local/bin`(24.2.1) 中，旧的“随 osx”安装在`/usr/bin`(22.1.1) 中。

我通过添加到它来更新我的`$PATH`环境变量。`/usr/local/bin`它在我的 shell 中运行良好（即输入`emacs`运行 24.2.1 版本），但是当 git 打开编辑器时，emacs 版本是 22.1.1。

git 不应该用来`$PATH`查找我想使用的编辑器吗？

附加信息：

```
$ type -a emacs
emacs is /usr/local/bin/emacs
emacs is /usr/bin/emacs
emacs is /usr/local/bin/emacs
$ env
PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin
SHELL=/bin/zsh
PAGER=most
EDITOR=emacs -nw
_=/usr/bin/env 
```

请注意，我不希望直接在我的 git conf 中设置我的编辑器的绝对路径，因为我在多个系统中使用这个 conf。

**编辑**：这是我的一点`.zshrc`：

```
# Mac OS X
if [ `uname` = "Darwin" ]; then
    # Brew binaries
    PATH="/usr/local/bin":"/usr/local/sbin":$PATH
else # Everyone else (Linux)
    # snip
fi 
```

所以，是的，我可以`export EDITOR='/usr/local/bin emacs -nw'`在第一行添加一行`if`，但我想了解为什么`git`不使用我的`PATH`变量:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:55:15.213

安装`git 1.8.0`解决了这个问题。

旧版本是`1.7.9.6 (Apple Git-31.1)`. 这很奇怪，因为我在更改日志中没有找到任何关于此类问题的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:18:53.427

最简单的解决方法是在环境变量中设置完整路径。

OSX 默认使用 bash(1)，因此`export EDITOR=/usr/local/bin/emacs -nw`请在您的某个位置`.bash_profile`设置所有交互式 bash shell 的变量。

# java - Java 模式创建对象

> ID：13301261
> 
> 赞同：1
> 
> 时间：2012-11-09T02:25:36.877
> 
> 标签：java

我最近的接触主要是非 OOP 语言，所以想知道下面的任何模式或实践。

我需要编写一个函数，它接受一个 json 字符串（对象的 json 数组）并生成对象列表（比如`Student`）。我检查了[创作模式](http://today.java.net/article/2009/10/28/applying-creational-design-patterns-java)，但似乎不适合。你认为我应该写一个帮助类来创建这些对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:27:03.567

如果您已经有一种`util`类，那么这种功能将非常适合该类。我不会为此创建一个完全独立的课程。例如，类似：

```
public static List<Student> parseJsonToStudents(String jsonData) ... 
```

但是，您可以在您的`Student`类中有一个构造函数，它接受一个 json String 作为参数并`Student`从中构造对象。 *那*肯定会利用 OO 原则。但是[GSON 包](http://code.google.com/p/google-gson/)使很多这种东西过时了，你可能不想自己编程。它包含解析数据`fromJson()`并`toJson()`为您构建对象的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:29:16.423

您可以编写一个采用 JSON 字符串和类对象并返回包含给定类型对象的列表的方法：

```
public static <T> List<T> parseJsonList(String json, Class<T> theClass) {
    // do stuff
} 
```

用法：

```
List<Student> studentList = parseJsonList(studentJsonText, Student.class);
List<Teacher> teacherList = parseJsonList(teacherJsonText, Teacher.class); 
```

* * *

*正如@Jeff 提到的，为Student*和*Teacher*创建接受 JSON 字符串的构造函数可能会更好。

或者，您可以在 Student 类中有一个静态方法，该方法从 JSON 字符串创建一个学生列表。

或者您可以创建一个 ObjectFactory 类来创建不同类型的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:18:06.020

```
public class Action {

  public static class Response {

    private int _resultCode;
    private int _count = 0;

    public Response() {}

    public int getResultCode() { return _resultCode; }
    public int getCount() { return _count; }

    public void setResultCode(int rc) { _resultCode = rc; }
    public void setCount(int c) { _count = c; }
  }

  private List<Response> responses = new ArrayList<Response>();
  private String _name;
} 
```

# python - 将数组的值从 nan 更改为零

> ID：13301262
> 
> 赞同：4
> 
> 时间：2012-11-09T02:25:54.400
> 
> 标签：python, arrays, numpy

我在 python 上有一个数组 A，其中有一些由 numpy.nan 创建的 nan 值。我想使用 将所有 nan 值设置为零`A[A==numpy.nan] = 0`。它根本不会改变数组。这是为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T02:27:45.513

你想要[`np.isnan`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.isnan.html)：

```
A[np.isnan(A)] = 0 
```

您的代码的问题在于（根据 IEEE），`nan`不等于任何东西——甚至它本身。

作为旁注，还有

*   `np.isinf`->（+/- 无穷大）
*   `np.isfinite`->（不是无穷大或 NaN）
*   `np.isposinf`-> (+ 无穷大)
*   `np.isneginf`-> (- 无穷大)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-20T02:29:11.330

您可以使用 numpy 函数将矩阵 x 处的所有 nan 值更改为零。

```
numpy.nan_to_num(x) 
```

# eclipse - 更改 Eclipse 中的默认库路径

> ID：13301263
> 
> 赞同：0
> 
> 时间：2012-11-09T02:26:12.417
> 
> 标签：eclipse

在eclipse上运行我的项目时，我收到了这个错误：

```
 Caused by: java.lang.ClassNotFoundException: org.apache.commons.lang.exception.NestableRuntimeException 
```

通过谷歌搜索，似乎缺少一些类定义，在这里，就我而言，我需要从[这里](http://commons.apache.org/lang/download_lang.cgi)下载库。我在我的项目中添加了它，但问题是，所需的类定义在 org.apache.commons.lang3 中。所以我问是否有办法将默认路径更改为 org.apache.commons.lang3。或者有没有其他方法可以解决这个问题？

顺便说一句，这里是代码：

```
import java.io.IOException;
import net.sf.json.JSONArray;

public class Main {
public static void main(String[] args) throws IOException {
    JSONArray jsonArray = JSONArray.fromObject( "['json','is','easy']" );  
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:48:09.633

没关系，我找到了。我只需要下载`commons-lang-2.6-bin.zip`而不是`commons-lang3-3.1-bin.zip`.

# eclipse - 如何构建 portlet 和 hook 类型的 Liferay 项目

> ID：13301264
> 
> 赞同：1
> 
> 时间：2012-11-09T02:26:18.000
> 
> 标签：eclipse, ant, liferay, hook, liferay-ide

我有一个 Liferay 项目，它最初是作为 portlet 类型创建的（即，在 下`${Liferay plugin SDK folder}/portlets`）。后来，随着 JSP 覆盖等被添加，它本质上变成了一种钩子类型。当我尝试通过运行来构建项目时`ant compile`，出现了类似`The import com.liferay.portal.util.CookieKeys cannot be resolved`. 当项目在能够识别混合类型的 Liferay 项目的 Liferay IDE 中编译时，我没有收到此错误。我想知道这里是否有人有从命令行编译此类 Liferay 项目的经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:51:22.787

确保您的根目录下的 build.${username}.properties`${Liferay plugin SDK folder}`具有以下设置：

```
app.server.type = tomcat
app.server.dir = /path/to/tomcat 
```

然后你应该能够从命令行重新编译。它在 Liferay IDE 中工作的原因是，如果您指定了 Liferay Tomcat 运行时，它会自动将编译依赖项添加到您的项目中。

# amazon-ec2 - 与 Chef 相比，Cloudformation 更胜一筹

> ID：13301278
> 
> 赞同：3
> 
> 时间：2012-11-09T02:27:44.570
> 
> 标签：amazon-ec2, amazon-web-services, chef-infra, amazon-cloudformation

我可以用 Cloudformation 做什么而不能用 Chef 做？看起来厨师支持 ec2 中的生成节点，我可以读回生成节点的信息（ip，..），那么为什么还需要 cloudformation 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T02:20:15.353

很少，但它的作用使它值得使用。

CloudFormation 的主要优势在于 Amazon 将创建的资源联系在一起。换句话说，如果您的应用程序包含一个数据库、四个网络服务器、一个自动缩放组、一个启动配置、入口规则、一些 VPC 子网、一个或两个互联网网关以及一个 VPN 连接，您可以在一个地方管理它们，作为CloudFormation 堆栈。想拍他们吗？这很容易。杀死堆栈，*每个*资源都会随之消亡。

当然，从技术上讲，您可以使用 Chef 和 A​​mazon API 做到这一点。CloudFormation 只不过是一种生成极其复杂的 AWS API 调用集 + Magic (tm) 的方法，因此您始终可以自己动手。[Netflix 使用他们的操作系统工具Asgard](http://techblog.netflix.com/2012/06/asgard-web-based-cloud-management-and.html)和 RightScale做到了这一点，其他服务或多或少也是如此。如果这些软件不能满足您的需求或者您买不起，CloudFormation 是 AWS 部署的一个很好的补充。事实上，你甚至不需要依赖它。[从 CloudFormation 启动 chef-solo](https://s3.amazonaws.com/cloudformation-examples/IntegratingAWSCloudFormationWithOpscodeChef.pdf)非常简单，它允许您利用两者的优势。

# extendscript - 获取文本图层阴影参数（ExtendScript CS5、Photoshop 脚本）

> ID：13301279
> 
> 赞同：3
> 
> 时间：2012-11-09T02:28:10.477
> 
> 标签：extendscript, photoshop-script

有什么方法可以使用 ExtendScript 在 Adob​​e Photoshop CS5 中获取文本（或任何其他）图层阴影参数，以进一步转换为文本字符串等 CSS3？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:02:33.723

有一种方法。

您必须使用 ActionManager：

```
var ref = new ActionReference();
ref.putEnumerated( charIDToTypeID("Lyr "), charIDToTypeID("Ordn"), charIDToTypeID("Trgt") ); 
var desc = executeActionGet(ref).getObjectValue(stringIDToTypeID('layerEffects')).getObjectValue(stringIDToTypeID('dropShadow'));
desc.getUnitDoubleValue(stringIDToTypeID('distance')) 
```

其中“dropShadow”是您要读取的图层效果，例如“distance”是将返回的参数。其他图层效果和参数仅称为 eventids。如果您需要其他 eventid，请查看文档（文档不完整）。

下一个 AM-Code 将检查是否有图层样式阴影。

```
var res = false;
var ref = new ActionReference();
ref.putEnumerated( charIDToTypeID("Lyr "), charIDToTypeID("Ordn"), charIDToTypeID("Trgt") ); 
var hasFX =  executeActionGet(ref).hasKey(stringIDToTypeID('layerEffects'));
if ( hasFX ){
var ref = new ActionReference();
ref.putEnumerated( charIDToTypeID("Lyr "), charIDToTypeID("Ordn"), charIDToTypeID("Trgt") ); 
res = executeActionGet(ref).getObjectValue(stringIDToTypeID('layerEffects')).hasKey(stringIDToTypeID('dropShadow'));
    }
return res; 
```

这将解释[http://forums.adobe.com/thread/714406](http://forums.adobe.com/thread/714406)更多。

如果您找到一种设置阴影的方法，而不设置其他参数，请告诉我...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:08:40.510

可能不是您正在寻找的答案，但实际上没有办法从extendscript 访问图层样式的各个属性。API（从 CS6 开始）中唯一引用图层样式的方法是`ArtLayer.applyStyle(name)`. 您实际上必须在 Photoshop 中创建一个样式并按名称保存到调色板才能使用它。

我唯一能想到的就是实际解析使用 C/C++`.asl`找到的文件。`adobe/Adobe Photoshop/presets/styles/`这些文件包含以专有格式保存的几种图层样式。我还没有找到任何库来解析这些文件，但它们可能存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:48:43.453

如果您有 Photoshop CS6.1（或更高版本），您可以查看“将 CSS 复制到剪贴板”功能的实现，了解如何访问投影参数。

在 Windows 上，源代码位于

```
Adobe Photoshop CS6\Required\CopyCSSToClipboard.jsx 
```

在 Mac 上，源代码位于：

```
Adobe Photoshop CS6/Adobe Photoshop CS6.app/Contents/Required/CopyCSSToClipboard.jsx 
```

（如果您在 Mac 上查看 Finder，您需要按住 Control 键单击 Photoshop 应用程序图标并选择“显示包内容”以进入 Contents/Required 文件夹）。

查找有关`cssToClip.addDropShadow`如何提取信息的示例的例程。如果您想在自己的代码中使用 CopyCSSToClipboard.jsx 中的例程，请将以下代码段添加到您的 JSX 文件中：

```
runCopyCSSFromScript = true; 
if (typeof cssToClip == "undefined")
    $.evalFile( app.path + "/" + localize("$$$/ScriptingSupport/Required=Required") + "/CopyCSSToClipboard.jsx" ); 
```

此外，在 的底部`CopyCSSToClipboard.jsx`，还有对 的示例调用`cssToClip.dumpLayerAttr`。这是探索您可能希望从脚本中访问的参数的有用方法，而这些参数无法从 Photoshop DOM 中访问。

请注意，Required 文件夹中的代码可能会在未来版本中发生变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-25T15:34:05.267

我能够制作一个 ActionPrinter 方法，该方法使用 C# 和 photoshop COM 包装器在操作中转储所有数据树。

PrintCurrentLayer 方法将转储图层中的所有数据，包括所有图层效果数据。

```
 static void PrintCurrentLayer(Application ps)
    {
        var action = new ActionReference();
        action.PutEnumerated(ps.CharIDToTypeID("Lyr "), ps.CharIDToTypeID("Ordn"), ps.CharIDToTypeID("Trgt"));
        var desc = ps.ExecuteActionGet(action);//.GetObjectValue(ps.StringIDToTypeID("layerEffects"));//.getObjectValue(ps.StringIDToTypeID('dropShadow'));
        ActionPrinter(desc);
    }

    static void ActionPrinter(ActionDescriptor action)
    {
        for (int i = 0; i < action.Count; i++)
        {
            var key = action.GetKey(i);

            if (action.HasKey(key))
            {
                //var charId = action.Application.TypeIDToCharID((int)key);
                //Debug.WriteLine(charId);

                switch (action.GetType(key))
                {
                    case PsDescValueType.psIntegerType:
                        Debug.WriteLine("{0}: {1}", (PSConstants)key, action.GetInteger(key));
                        break;
                    case PsDescValueType.psStringType:
                        Debug.WriteLine("{0}: \"{1}\"", (PSConstants)key, action.GetString(key));
                        break;
                    case PsDescValueType.psBooleanType:
                        Debug.WriteLine("{0}: {1}", (PSConstants)key, action.GetBoolean(key));
                        break;
                    case PsDescValueType.psDoubleType:
                        Debug.WriteLine("{0}: {1}", (PSConstants)key, action.GetDouble(key));
                        break;
                    case PsDescValueType.psUnitDoubleType:
                        Debug.WriteLine("{0}: {1} {2}", (PSConstants)key, action.GetUnitDoubleValue(key), (PSConstants)action.GetUnitDoubleType(key));
                        break;
                    case PsDescValueType.psEnumeratedType:
                        Debug.WriteLine("{0}: {1} {2}", (PSConstants)key, (PSConstants)action.GetEnumerationType(key), (PSConstants)action.GetEnumerationValue(key));
                        break;
                    case PsDescValueType.psObjectType:
                        Debug.WriteLine($"{(PSConstants)key}: {(PSConstants)action.GetObjectType(key)} ");
                        Debug.Indent();
                        ActionPrinter(action.GetObjectValue(key));
                        Debug.Unindent();
                        break;
                    case PsDescValueType.psListType:
                        var list = action.GetList(key);
                        Debug.WriteLine($"{(PSConstants)key}: List of {list.Count} Items");
                        Debug.Indent();
                        for (int count = 0; count < list.Count; count++)
                        {
                            var type = list.GetType(count);
                            Debug.WriteLine($"{count}: {type} ");
                            Debug.Indent();
                            switch (type)
                            {
                                case PsDescValueType.psObjectType:
                                    ActionPrinter(list.GetObjectValue(count));
                                    break;
                                case PsDescValueType.psReferenceType:
                                    var reference = list.GetReference(count);
                                    Debug.WriteLine("    Reference to a {0}", (PSConstants)reference.GetDesiredClass());
                                    break;
                                case PsDescValueType.psEnumeratedType:
                                    Debug.WriteLine("    {0} {1}", (PSConstants)list.GetEnumerationType(count), (PSConstants)list.GetEnumerationValue(count));
                                    break;
                                default:
                                    Debug.WriteLine($"UNHANDLED LIST TYPE {type}");
                                    break;
                            }
                            Debug.Unindent();
                        }
                        Debug.Unindent();
                        break;
                    default:
                        Debug.WriteLine($"{(PSConstants)key} UNHANDLED TYPE {action.GetType(key)}");
                        break;
                }
            }
        }
    } 
```

# java - 如何使用lxml更改android xml文件中的“android：text”等属性值

> ID：13301280
> 
> 赞同：2
> 
> 时间：2012-11-09T02:28:13.553
> 
> 标签：java, android, python, lxml

我想使用 lxml 来更改 android xml 文件的一些属性值。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <TextView android:id="@+id/version_label"
              android:layout_marginLeft="5sp"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:text="version"/>
</LinearLayout> 
```

我想改变“android:text”的值，但是

```
textViewTagNode.attrib['android:text'] = "new value" 
```

不能工作，也不能

```
textViewTagNode.set('android:text', 'new value') 
```

可以工作。我得到的只是“无效的属性名称 u'android:text'”

我知道这是命名空间问题，但我不知道如何解决。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:08:10.427

你的钥匙不是`'android:text'`但`'{http://schemas.android.com/apk/res/android}text'`

```
In [23]: s = '''<?xml version="1.0" encoding="utf-8"?> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <TextView android:id="@+id/version_label"
              android:layout_marginLeft="5sp"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:text="version"/> </LinearLayout>'''

In [24]: tree = etree.XML(s)                                          

In [25]: c = tree.getchildren()[0]

In [26]: c.items()
Out[26]:  [('{http://schemas.android.com/apk/res/android}id', '@+id/version_label'),  ('{http://schemas.android.com/apk/res/android}layout_marginLeft', '5sp'),  ('{http://schemas.android.com/apk/res/android}layout_width', 'fill_parent'),  ('{http://schemas.android.com/apk/res/android}layout_height', 'wrap_content'),  ('{http://schemas.android.com/apk/res/android}text', 'version')] 
```

# html - 为什么添加边框会改变背景颜色的行为？

> ID：13301281
> 
> 赞同：1
> 
> 时间：2012-11-09T02:28:23.173
> 
> 标签：html, css

在下面的示例中，为什么移除 #enclosure div 上的边框会使背景浅蓝色不再填充整个 div 背景？

```
#enclosing
{
  background: lightblue;
  margin: 0;
  border: 1px solid blue;
}

#outer
{
  margin: 40px;
}

#inner
{
  margin: 20px;
  border: 1px solid black;
}​

<div id="enclosing">
    <div id="outer">
      <div id="inner">This is nested div</div>
    </div>
</div> 
```

[JSFiddle](http://jsfiddle.net/Neodymium/v8juj/ "JSFiddle")上的示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:35:01.517

`outer`div 有边距，需要“推动”一些东西。

当封闭的 div 没有边框（或填充）时，`outer`div 的边距没有任何东西可以推动。

将边框或填充添加到 div 的顶部/底部为其提供了`outer`div 计算所需的包容性。

我相信这就是所谓的`collapsing margins`盒子[模型](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)

# wcf - 在 WcfPortal.svc 上没有可以接受消息的端点侦听

> ID：13301283
> 
> 赞同：0
> 
> 时间：2012-11-09T02:29:03.147
> 
> 标签：wcf, csla

我的 ASP.MVC 应用程序中有一个用例，我需要在其中保存大约 15k 条记录的集合（来自 CSV 文件上传）。我将其放入 CSLA 业务对象中，以便使用业务规则验证上传的数据。

我正在使用 WCF DataPortal。调用 save 时，大约 30 到 45 秒后出现此错误：

System.ServiceModel.EndpointNotFoundException：[我的数据门户主机地址]/WcfPortal.svc 上没有可以接受消息的端点侦听。

我已经确定，如果我将集合分解为更小的块，并在每个块上调用 save，则用例将毫无问题地完成。

我已将我的服务配置为使用如下最大值（在 Rocky 的书中推荐）（并根据其他指导增加了 sendTimeout）：

```
<binding name="wsHttpBinding_IWcfPortal" maxReceivedMessageSize="2147483647" sendTimeout="05:00:00">  
    <readerQuotas maxBytesPerRead="2147483647" maxArrayLength="2147483647"         maxStringContentLength="2147483647" maxNameTableCharCount="2147483647" maxDepth="2147483647"/>
</binding> 
```

现在我知道我的数据不超过 2147486347 大小限制的事实。此外，如果确实如此，我希望得到一个更有意义的错误消息来表明这一点（就像我在大小限制为默认值时所做的那样）。

我打开了 WCF 日志记录/跟踪，但没有显示任何内容。此错误似乎是在 WCF 堆栈出现之前遇到的一些通信级别错误。

请告知为什么我在尝试保存这个大型集合时会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:45:19.637

随着 WCF 多年来的变化，它们添加了一些您可以更改的其他限制。有关数据门户的 WCF 配置的最新信息可在两个地方获得：

*   [数据门户常见](http://www.lhotka.net/cslanet/faq/DataPortalFaq.ashx)问题页面
*   使用[CSLA 4：数据门户配置](http://store.lhotka.net/Default.aspx?tabid=1560&ProductID=26)电子书

# javascript - Jquery 发送值为空

> ID：13301286
> 
> 赞同：0
> 
> 时间：2012-11-09T02:29:17.153
> 
> 标签：javascript, jquery

我的 Javascript Jquery 提交有问题。提交表单后，问题是无法发送值，并且在我的表中值为空。

这是简短的 JS 代码：

```
var ID = $(this).attr("id");
var uid= $("#uid"+ID).val();
var comment= $("#ctextarea"+ID).val();
var dataString = 'comment='+ comment + '&msg_id=' + ID + '&uid=' + uid; 
```

我想在表中设置的是**uid**。我的 JS 是正确的还是该代码有问题？

感谢您的帮助。

# java - 在接口中返回等于无的东西

> ID：13301288
> 
> 赞同：0
> 
> 时间：2012-11-09T02:30:07.800
> 
> 标签：java, interface

我最近一直在用 Java 制作类似俄罗斯方块的游戏，我有一个 IBlocks 接口，它会遍历`ConsBlock`并且`EmptyBlock`（`ConsBlock`是一个列表，开头有一个块，`IBlock`结尾有一个列表，出于某种原因，这就是我老师想要的方式） .

我`getfirst()`在界面中有功能：

```
public interface IBlocks{
//returns the first block in a list of blocks
public Resting getfirst(); 
```

（A`Resting`是游戏中的一个方块）

然后，在 ConsBlock 类中，我有：

```
public class ConsBlock implements IBlocks{
//returns the first block in a list of blocks
public Resting getfirst(){
    return this.first; 
```

但是在`EmptyBlock`课堂上，我希望它返回类似于说没有的东西。我尝试返回`null`，但这给了我一个空指针异常，因为接口中的函数告诉它返回一个`Resting`. 在不返回带有随机数的 Resting 的情况下，表示空的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:33:18.853

```
public interface IResting;
public class Resting implements IResting; 
```

然后

```
public class EmptyResting implements IResting {
    @Override
    public Object sampleMethod() {
        // return what an empty block ought to return
    }
} 
```

进一步阅读：[http ://en.wikipedia.org/wiki/Null_Object_pattern](http://en.wikipedia.org/wiki/Null_Object_pattern)

回复您的评论：您仍然需要做：

```
public class EmptyBlock implements IBlocks {
    @Override
    public IResting getFirst() {
        return new EmptyResting();
    }
} 
```

请注意，您的`IBlocks`和`ConsBlock`类需要返回一个`IResting`not a`Resting`

请务必阅读该 wiki 链接！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:37:40.107

我可能对此不以为然，但是我相信您的方法标头要求返回 Resting。有什么方法可以创建一个布尔对象并返回它？也许将其命名为空，如果为空则返回true，如果不为空则返回false？另一个建议是手动将 Resting 设置为 0，如果它满足设置为零的条件，例如 if (condition is met) { returnedResting = 0; }。

# python - Python 网络速度极慢

> ID：13301289
> 
> 赞同：3
> 
> 时间：2012-11-09T02:30:11.273
> 
> 标签：python, performance, networking, dns, gethostbyname

我有两台服务器（让我将它们命名为 A 和 B）。

**事实：**

*   它们具有相同的 CPU、内存、主板、硬盘驱动器、上行链路速度。
*   它们都在带有 Python 2.7.3 和 Django 最新版本的 Ubuntu 12.04 上。
*   它们还位于具有相同名称服务器设置的同一数据中心中。
*   它们具有与名称服务器相似的 ping 和 traceroute 结果。

服务器 A 工作正常。我的问题是使用 python 连接到互联网时服务器 B 非常慢。

下面是我在两台服务器上进行的测试（domain_list_1 和 domain_list_2 是两个列表，每个列表中包含 100 个唯一域）：

**测试一：**

```
starttime = time.time()
for domain in domain_list_1:
    ip = socket.gethostbyname(domain)
print '%.1f items per second' % (100/(time.time()-starttime))
>> Server A Results: 3.3 items per second
>> Server B Results: 0.7 items per second 
```

**测试二：**

```
starttime = time.time()
for domain in domain_list_2:
    os.system('nslookup %s > /dev/null' % domain)
print '%.1f items per second' % (100/(time.time()-starttime))
>> Server A Results: 3.3 items per second
>> Server B Results: 3.3 items per second 
```

正如您在测试二中看到的，服务器 B 上的网络没有问题。

我用 urllib2 做了类似的测试，结果是一样的（服务器 A 没问题，但服务器 B 使用 urllib2 比使用 wget 或 curl 来做同样的工作要慢）。所以我相信这是一个Python问题。我只是不知道服务器 B 上的 Python 设置出了什么问题。

有没有办法可以剖析内部流程并找出代码的哪一部分减慢了整个流程？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:49:01.213

根据 Greg 给出的建议，我查看了 strace 的输出，发现如下：

**服务器 A：**

```
12879 21:29:24.182590 connect(5, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("206.251.73.9")}, 16) = 0 <0.000035>
12879 21:29:24.182694 poll([{fd=5, events=POLLOUT}], 1, 0) = 1 ([{fd=5, revents=POLLOUT}]) <0.000018>
12879 21:29:24.182778 sendto(5, "'!\1\0\0\1\0\0\0\0\0\0\njanadrakka\3com\0\0\1\0\1", 32, MSG_NOSIGNAL, NULL, 0) = 32 <0.000040>
12879 21:29:24.182881 poll([{fd=5, events=POLLIN}], 1, 5000) = 1 ([{fd=5, revents=POLLIN}]) <0.067000>
12879 21:29:24.249987 ioctl(5, FIONREAD, [130]) = 0 <0.000022>
12879 21:29:24.250100 recvfrom(5, "'!\201\200\0\1\0\1\0\2\0\2\njanadrakka\3com\0\0\1\0\1"..., 1024, 0, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("206.251.73.9")}, [16]) = 130 <0.000032>
12879 21:29:24.250287 close(5)          = 0 <0.000053> 
```

**服务器 B：**

```
4850  21:28:55.501276 connect(5, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("206.251.73.9")}, 16) = 0 <0.000019>
4850  21:28:55.501348 poll([{fd=5, events=POLLOUT}], 1, 0) = 1 ([{fd=5, revents=POLLOUT}]) <0.000014>
4850  21:28:55.501419 sendto(5, "\346\10\1\0\0\1\0\0\0\0\0\0\fdeghatgostar\3com\0\0\1"..., 34, MSG_NOSIGNAL, NULL, 0) = 34 <0.000036>
4850  21:28:55.501506 poll([{fd=5, events=POLLIN}], 1, 5000) = 1 ([{fd=5, revents=POLLIN}]) <0.615731>
4850  21:28:56.117335 ioctl(5, FIONREAD, [129]) = 0 <0.000033>
4850  21:28:56.117429 recvfrom(5, "\346\10\201\200\0\1\0\1\0\2\0\2\fdeghatgostar\3com\0\0\1"..., 1024, 0, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("206.251.73.9")}, [16]) = 129 <0.000011>
4850  21:28:56.117499 close(5)          = 0 <0.000009> 
```

**延迟发生在此系统调用上：**

**答：** 12879 21:29:24.182881 poll([{fd=5, events=POLLIN}], 1, 5000) = 1 ([{fd=5, revents=POLLIN}]) < **0.067000** >

**B:** 4850 21:28:55.501506 poll([{fd=5, events=POLLIN}], 1, 5000) = 1 ([{fd=5, revents=POLLIN}]) < **0.615731** >

**解决方案：**

似乎延迟是由服务器 B 上的 IPv6 dns 查找引起的。但是，我仍然不确定为什么服务器 A 没有这样的问题，但是在服务器 B 上进行的以下更改解决了它。

将以下行添加到 /etc/sysctl.conf 并重新启动服务器。

```
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1 
```

最后，感谢 Greg 的建议。

# hibernate - 强制急切刷新 Hibernate 对象

> ID：13301295
> 
> 赞同：3
> 
> 时间：2012-11-09T02:30:58.613
> 
> 标签：hibernate

我有一个从获取的 Cat 对象列表

```
session.createSQLQuery(...);
List<Cat> result = (List<Cat>)query.list(); 
```

无论 Cat 的配置文件中的惰性设置如何，我都想急切地刷新结果列表中的所有对象。有没有一种简单的方法来代替我自己发出进一步的查询？我希望有一个`session.eagerRefresh(obj)`我可以使用的电话，但似乎并非如此。

# java - java.sql.SQLException：找不到列错误？

> ID：13301296
> 
> 赞同：0
> 
> 时间：2012-11-09T02:31:05.980
> 
> 标签：java, ms-access, dao

我正在使用下面的代码查询 Microsoft Access 数据库。SELECT 语句中正确说明了数据库字段名称。试图弄清楚为什么我会收到这个错误。真的需要一些帮助..谢谢

```
public Item getIteminfo(String itemCode) throws ClassNotFoundException, SQLException {
     Statement myStatement = getConnection();
     Item item = null;
     String itemDescription;
     int itemPrice;
     String sql = "SELECT ItemDescription, ItemPrice FROM itemCatalog WHERE ItemCode = '"+itemCode+"'";
     ResultSet results = myStatement.executeQuery(sql);

     while (results.next()){
         itemDescription = results.getString("ItemDescription");
         itemPrice = results.getInt("ItemPrice");
         item = new Item(itemDescription, itemPrice);
     }
     closeConnection();
     return item;
 } 
```

这是错误消息：

```
java.sql.SQLException: Column not found
    at sun.jdbc.odbc.JdbcOdbcResultSet.findColumn(JdbcOdbcResultSet.java:1849)
    at sun.jdbc.odbc.JdbcOdbcResultSet.getString(JdbcOdbcResultSet.java:410)
    at checkoutsimulation.DAO.getIteminfo(DAO.java:52)
    at checkoutsimulation.ItemCatalog.getItemdetails(ItemCatalog.java:61)
    at checkoutsimulation.CheckoutSystem.bnPurchaseActionPerformed(CheckoutSystem.java:463)
    at checkoutsimulation.CheckoutSystem.access$100(CheckoutSystem.java:20) 
```

已编辑：字段相同，这是屏幕截图 ![在此处输入图像描述](../Images/a0423b7755eb164bdd2c9ac4d44bb56e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:50:04.307

我自己没有访问权限，所以我不能尝试这个，但这里有一些可能有用的东西。首先，我们打印出结果集中列的名称，以防在某些情况下区分大小写。

然后我们在 result.next 循环中使用位置参数 (1, 2, ..) 而不是名称来解决问题。无论名称是什么，这都应该使它工作。

一旦您弄清楚名称问题是什么，请将 1、2 等替换为正确的名称。

```
 ResultSet results = myStatement.executeQuery(sql);

 ResultSetMetaData meta = results.getMetaData();
 for (int index = 1; index <= meta.getColumnCount(); index++)
 {
    System.out.println("Column " + index + " is named " + meta.getColumnName(index);
 }
 while (results.next()){
     itemDescription = results.getString(1);
     itemPrice = results.getInt(2);
     item = new Item(itemDescription, itemPrice);
 } 
```

# c++ - 我可以/应该在 GPU 上运行此统计应用程序的代码吗？

> ID：13301309
> 
> 赞同：43
> 
> 时间：2012-11-09T02:33:44.063
> 
> 标签：c++, c, cuda, parallel-processing, gpu

我正在开发一个统计应用程序，该应用程序在一个数组中包含大约 10-3000 万个浮点值。

几种方法在嵌套循环中对数组执行不同但独立的计算，例如：

```
Dictionary<float, int> noOfNumbers = new Dictionary<float, int>();

for (float x = 0f; x < 100f; x += 0.0001f) {
    int noOfOccurrences = 0;

    foreach (float y in largeFloatingPointArray) {
        if (x == y) {
            noOfOccurrences++;
        }
    }
    noOfNumbers.Add(x, noOfOccurrences);
} 
```

当前的应用程序是用 C# 编写的，在 Intel CPU 上运行，需要几个小时才能完成。我不了解 GPU 编程概念和 API，所以我的问题是：

*   是否有可能（并且有意义）利用 GPU 来加速此类计算？
*   如果是：有谁知道任何教程或有任何示例代码（编程语言无关紧要）？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-15T07:24:10.250

**更新**GPU 版本

```
__global__ void hash (float *largeFloatingPointArray,int largeFloatingPointArraySize, int *dictionary, int size, int num_blocks)
{
    int x = (threadIdx.x + blockIdx.x * blockDim.x); // Each thread of each block will
    float y;                                         // compute one (or more) floats
    int noOfOccurrences = 0;
    int a;

    while( x < size )            // While there is work to do each thread will:
    {
        dictionary[x] = 0;       // Initialize the position in each it will work
        noOfOccurrences = 0;    

        for(int j = 0 ;j < largeFloatingPointArraySize; j ++) // Search for floats
        {                                                     // that are equal 
                                                             // to it assign float
           y = largeFloatingPointArray[j];  // Take a candidate from the floats array 
           y *= 10000;                      // e.g if y = 0.0001f;
           a = y + 0.5;                     // a = 1 + 0.5 = 1;
           if (a == x) noOfOccurrences++;    
        }                                      

        dictionary[x] += noOfOccurrences; // Update in the dictionary 
                                          // the number of times that the float appears 

    x += blockDim.x * gridDim.x;  // Update the position here the thread will work
    }
} 
```

这个我只是针对较小的输入进行了测试，因为我正在笔记本电脑上进行测试。尽管如此，它正在工作，但需要更多的测试。

**更新**顺序版本

我刚刚做了这个简单的版本，它在不到 20 秒（包括生成数据的函数所用的时间）内为一个包含 30,000,000 个元素的数组执行算法。

这个幼稚的版本首先对您的浮点数组进行排序。之后，将遍历已排序的数组并检查给定`value`值在数组中出现的次数，然后将该值连同它出现的次数一起放入字典中。

您可以使用`sorted`地图，而不是`unordered_map`我使用的地图。

继承人的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include "cuda.h"
#include <algorithm>
#include <string>
#include <iostream>
#include <tr1/unordered_map>

typedef std::tr1::unordered_map<float, int> Mymap;

void generator(float *data, long int size)
{
    float LO = 0.0;
    float HI = 100.0;

    for(long int i = 0; i < size; i++)
        data[i] = LO + (float)rand()/((float)RAND_MAX/(HI-LO));
}

void print_array(float *data, long int size)
{

    for(long int i = 2; i < size; i++)
        printf("%f\n",data[i]);

}

std::tr1::unordered_map<float, int> fill_dict(float *data, int size)
{
    float previous = data[0];
    int count = 1;
    std::tr1::unordered_map<float, int> dict;

    for(long int i = 1; i < size; i++)
    {
        if(previous == data[i])
            count++;
        else
        {
          dict.insert(Mymap::value_type(previous,count));
          previous = data[i];
          count = 1;         
        }

    }
    dict.insert(Mymap::value_type(previous,count)); // add the last member
    return dict;

}

void printMAP(std::tr1::unordered_map<float, int> dict)
{
   for(std::tr1::unordered_map<float, int>::iterator i = dict.begin(); i != dict.end(); i++)
  {
     std::cout << "key(string): " << i->first << ", value(int): " << i->second << std::endl;
   }
}

int main(int argc, char** argv)
{
  int size = 1000000; 
  if(argc > 1) size = atoi(argv[1]);
  printf("Size = %d",size);

  float data[size];
  using namespace __gnu_cxx;

  std::tr1::unordered_map<float, int> dict;

  generator(data,size);

  sort(data, data + size);
  dict = fill_dict(data,size);

  return 0;
} 
```

如果你的机器上安装了库推力，你应该使用这个：

```
#include <thrust/sort.h>
thrust::sort(data, data + size); 
```

而不是这个

```
sort(data, data + size); 
```

肯定会更快。

**原帖**

> 我正在开发一个统计应用程序，它有一个包含 10 - 30 百万个浮点值的大数组。
> 
> 是否有可能（并且有意义）利用 GPU 来加速此类计算？

是的。一个月前，我在 GPU 上运行了一个完整的分子动力学模拟。其中一个计算成对粒子之间的力的内核作为参数`6`数组接收，每个具有`500,000`双精度数，总共有`3`百万双精度数`(22 MB)`。

所以如果你打算放`30`百万个浮点数，大约`114 MB`是全局内存，那不是问题。

在您的情况下，计算次数会成为问题吗？根据我在分子动力学 (MD) 方面的经验，我会说不。顺序 MD 版本大约需要`25`几个小时才能完成，而 GPU 版本需要`45`几分钟。您说您的应用程序需要几个小时，同样基于您的代码示例，它看起来比 MD*更软。*

这是力计算示例：

```
__global__ void add(double *fx, double *fy, double *fz,
                    double *x, double *y, double *z,...){

     int pos = (threadIdx.x + blockIdx.x * blockDim.x); 

     ...

     while(pos < particles)
     {

      for (i = 0; i < particles; i++)
      {
              if(//inside of the same radius)
                {
                 // calculate force
                } 
       }
     pos += blockDim.x * gridDim.x;  
     }        
  } 
```

CUDA 中代码的一个简单示例可以是两个二维数组的总和：

在 C 中：

```
for(int i = 0; i < N; i++)
    c[i] = a[i] + b[i]; 
```

在 CUDA 中：

```
__global__ add(int *c, int *a, int*b, int N)
{
  int pos = (threadIdx.x + blockIdx.x)
  for(; i < N; pos +=blockDim.x)
      c[pos] = a[pos] + b[pos];
} 
```

在 CUDA 中，您基本上将每个*用于*迭代并分配给每个线程，

```
1) threadIdx.x + blockIdx.x*blockDim.x; 
```

每个块都有一个`ID`from `0`to `N-1`（N 块的最大数量），每个块都有`'X'`多个线程，`ID`从`0`to `X-1`。

1.  为您提供每个线程将根据其和线程所在块计算的*for*循环迭代；blockDim.x 是块拥有的线程数。`ID``ID`

因此，如果您有 2 个块，每个块都有`10`线程和`N=40`，则：

```
Thread 0 Block 0 will execute pos 0
Thread 1 Block 0 will execute pos 1
...
Thread 9 Block 0 will execute pos 9
Thread 0 Block 1 will execute pos 10
....
Thread 9 Block 1 will execute pos 19
Thread 0 Block 0 will execute pos 20
...
Thread 0 Block 1 will execute pos 30
Thread 9 Block 1 will execute pos 39 
```

查看您当前的代码，我制作了您的代码在 CUDA 中的样子的草稿：

```
__global__ hash (float *largeFloatingPointArray, int *dictionary)
    // You can turn the dictionary in one array of int
    // here each position will represent the float
    // Since  x = 0f; x < 100f; x += 0.0001f
    // you can associate each x to different position
    // in the dictionary:

    // pos 0 have the same meaning as 0f;
    // pos 1 means float 0.0001f
    // pos 2 means float 0.0002f ect.
    // Then you use the int of each position 
    // to count how many times that "float" had appeared 

   int x = blockIdx.x;  // Each block will take a different x to work
    float y;

while( x < 1000000) // x < 100f (for incremental step of 0.0001f)
{
    int noOfOccurrences = 0;
    float z = converting_int_to_float(x); // This function will convert the x to the
                                          // float like you use (x / 0.0001)

    // each thread of each block
    // will takes the y from the array of largeFloatingPointArray

    for(j = threadIdx.x; j < largeFloatingPointArraySize; j += blockDim.x)
    {
        y = largeFloatingPointArray[j];
        if (z == y)
        {
            noOfOccurrences++;
        }
    }
    if(threadIdx.x == 0) // Thread master will update the values
      atomicAdd(&dictionary[x], noOfOccurrences);
    __syncthreads();
} 
```

您必须使用`atomicAdd`，因为来自不同块的不同线程可能会`noOfOccurrences`同时写入/读取，因此您必须确保[互斥](https://en.wikipedia.org/wiki/Mutual_exclusion)。

这只是一种方法；您甚至可以将外部循环的迭代分配给线程而不是块。

**教程**

Dobbs 博士期刊系列[CUDA：Rob Farmer 的大众超级计算](http://www.ddj.com/cpp/207200659)非常出色，在其十四期中几乎涵盖了所有内容。它也开始相当温和，因此对初学者相当友好。

和其他人：

*   [第 I 卷：CUDA 编程简介](https://developer.nvidia.com/cuda-education-training)
*   [开始使用 CUDA](http://llpanorama.wordpress.com/2008/04/24/getting-started-with-cuda/)
*   [CUDA 资源列表](http://llpanorama.wordpress.com/cuda-tutorial/)

看看最后一项，你会发现很多学习 CUDA 的链接。

OpenCL：[OpenCL 教程 | 麦克研究](http://www.macresearch.org/opencl)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-09T03:37:54.943

我对并行处理或 GPGPU 知之甚少，但对于这个特定的示例，您可以通过对输入数组进行单次传递而不是对其进行一百万次循环来节省大量时间。对于大型数据集，如果可能，您通常希望一次性完成。即使您正在执行多个独立的计算，如果它在相同的数据集上，您可能会在同一遍中获得更快的速度，因为这样您将获得更好的参考位置。但由于代码复杂性的增加，这可能不值得。

另外，你真的不想像那样重复地向浮点数添加少量，舍入误差会加起来，你不会得到你想要的。我在下面的示例中添加了一个 if 语句来检查输入是否与您的迭代模式匹配，但如果您实际上不需要它，请忽略它。

我不知道任何 C#，但您的示例的单遍实现看起来像这样：

```
Dictionary<float, int> noOfNumbers = new Dictionary<float, int>();

foreach (float x in largeFloatingPointArray)
{
    if (math.Truncate(x/0.0001f)*0.0001f == x)
    {
        if (noOfNumbers.ContainsKey(x))
            noOfNumbers.Add(x, noOfNumbers[x]+1);
        else
            noOfNumbers.Add(x, 1);
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-13T09:56:06.693

> 是否有可能（并且有意义）利用 GPU 来加速此类计算？

*   绝对**是**的，这种算法通常是海量**数据并行**处理的理想候选者，GPU 非常擅长的事情。

> 如果是：有谁知道任何教程或有任何示例代码（编程语言无关紧要）？

*   当您想采用 GPGPU 方式时，您有两种选择：**CUDA**或**OpenCL**。

    CUDA 已经成熟，拥有很多工具，但以 NVidia GPU 为中心。

    OpenCL 是在 NVidia 和 AMD GPU 以及 CPU 上运行的标准。所以你真的应该赞成它。

*   对于教程，您有*Rob Farber*的 CodeProject 优秀系列：http : [//www.codeproject.com/Articles/Rob-Farber#Articles](http://www.codeproject.com/Articles/Rob-Farber#Articles)

*   对于您的特定用例，有很多使用 OpenCL 构建的直方图样本（请注意，许多是图像直方图，但原理是相同的）。

*   当您使用 C# 时，您可以使用**OpenCL.Net**或**Cloo**等绑定。

*   如果您的数组太大而无法存储在 GPU 内存中，您可以对其进行块分区并轻松地为每个部分重新运行 OpenCL 内核。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-09T03:49:05.993

除了上述海报的建议外，在适当的时候使用 TPL（任务并行库）在多个内核上并行运行。

上面的示例可以使用 Parallel.Foreach 和 ConcurrentDictionary，但是更复杂的 map-reduce 设置，其中数组被分成块，每个块生成一个字典，然后将其缩减为单个字典会给你更好的结果。

我不知道您的所有计算是否正确映射到 GPU 功能，但无论如何您都必须使用 map-reduce 算法将计算映射到 GPU 核心，然后将部分结果减少为单个结果，所以您在转移到不太熟悉的平台之前，不妨在 CPU 上执行此操作。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-12T05:13:37.597

鉴于需要从内存中检索“largerFloatingPointArray”值，我不确定使用 GPU 是否是一个很好的匹配。我的理解是 GPU 更适合自包含计算。

我认为将这个单进程应用程序转变为在许多系统上运行的分布式应用程序并调整算法应该会大大加快速度，具体取决于可用的系统数量。

您可以使用经典的“分而治之”的方法。我会采取的一般方法如下。

使用一个系统将“largeFloatingPointArray”预处理为哈希表或数据库。这将一次性完成。它将使用浮点值作为键，并将数组中出现的次数作为值。最坏的情况是每个值只出现一次，但这不太可能。如果每次运行应用程序时 largeFloatingPointArray 都在不断变化，那么内存中的哈希表是有意义的。如果它是静态的，那么该表可以保存在诸如 Berkeley DB 之类的键值数据库中。我们称其为“查找”系统。

在另一个系统上，我们称其为“主”，创建工作块并将工作项“分散”到 N 个系统中，并在结果可用时“收集”结果。例如，一个工作项可以像两个数字一样简单，表示系统应该工作的范围。当系统完成工作时，它会发回事件数组，并准备好处理另一块工作。

性能得到了提高，因为我们不再对 largeFloatingPointArray 进行迭代。如果查找系统成为瓶颈，则可以根据需要在尽可能多的系统上复制它。

如果有足够多的系统并行工作，则应该可以将处理时间减少到几分钟。

我正在为基于多核的系统（通常称为微服务器）开发用于 C 语言并行编程的编译器，这些系统是/或将使用系统内的多个“片上系统”模块构建的。ARM 模块供应商包括 Calxeda、AMD、AMCC 等。英特尔可能也有类似的产品。

我有一个可以工作的编译器版本，它可以用于这样的应用程序。该编译器基于 C 函数原型，生成 C 网络代码，实现跨系统的进程间通信代码 (IPC)。可用的 IPC 机制之一是 socket/tcp/ip。

如果您在实施分布式解决方案方面需要帮助，我很乐意与您讨论。

添加于 2012 年 11 月 16 日。

我对算法进行了更多思考，我认为这应该一次性完成。它是用 C 语言编写的，与您所拥有的相比，它应该非常快。

```
/*
 * Convert the X range from 0f to 100f in steps of 0.0001f
 * into a range of integers 0 to 1 + (100 * 10000) to use as an
 * index into an array.
 */

#define X_MAX           (1 + (100 * 10000))

/*
 * Number of floats in largeFloatingPointArray needs to be defined
 * below to be whatever your value is.
 */

#define LARGE_ARRAY_MAX (1000)

main()
{
    int j, y, *noOfOccurances;
    float *largeFloatingPointArray;

    /*
     * Allocate memory for largeFloatingPointArray and populate it.
     */

    largeFloatingPointArray = (float *)malloc(LARGE_ARRAY_MAX * sizeof(float));    
    if (largeFloatingPointArray == 0) {
        printf("out of memory\n");
        exit(1);
    }

    /*
     * Allocate memory to hold noOfOccurances. The index/10000 is the
     * the floating point number.  The contents is the count.
     *
     * E.g. noOfOccurances[12345] = 20, means 1.2345f occurs 20 times
     * in largeFloatingPointArray.
     */

    noOfOccurances = (int *)calloc(X_MAX, sizeof(int));
    if (noOfOccurances == 0) {  
        printf("out of memory\n");
        exit(1);
    }

    for (j = 0; j < LARGE_ARRAY_MAX; j++) {
        y = (int)(largeFloatingPointArray[j] * 10000);
        if (y >= 0 && y <= X_MAX) {
            noOfOccurances[y]++;
        }   
    }
} 
```

# google-app-engine - Google App Engine 免费版每天使用超过 1 GB 的传出带宽

> ID：13301311
> 
> 赞同：0
> 
> 时间：2012-11-09T02:34:04.243
> 
> 标签：google-app-engine, bandwidth, billing

我只是因为我的每日带宽似乎每天超过 1 GB 才启用计费。

但我从计费历史部分意识到，在启用计费的前几天，每日带宽已超过 1 GB（甚至曾达到 2.5 GB，最后一列显示为 0.18 美元），我没有被收取任何费用。

为什么免费版的应用引擎允许超过 1 GB 的带宽？如果是这样，则没有启用计费的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T08:11:46.440

如果您希望您的应用程序可靠地工作并满足所有请求，您应该在即将超过限制时启用计费。有时（例如，如果您使用 0.8GB 并且有人开始下载 500MB）您可能会超出配额，但这通常很少见，我不会尝试在此基础上建立我的业务。

# javascript - 在AngularJs中绑定标签名称

> ID：13301312
> 
> 赞同：1
> 
> 时间：2012-11-09T02:34:10.083
> 
> 标签：javascript, angularjs

我想将标签名称绑定到 AngularJs 中的变量。直接方式不起作用：

```
<div ng-app ng-init="list=['pre', 'div', 'em']">
Check the list: {{list}}
<div data-ng-repeat="item in list">
 {{item}}: <{{item}}>content</{{item}}>
</div>
</div> 
```

怎么做才对？​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:55:30.557

您将要创建一个[指令](http://docs.angularjs.org/guide/directive)并使用[$compile](http://docs.angularjs.org/api/ng.%24compile)服务模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:02:24.977

Angular 模板系统适用于 DOM 树，而不适用于字符串，因此模板必须是有效的 HTML，并且不可能使用 {{}} 作为标记名。我们可以为它编写自己的指令（参见 Max 答案），或者如果这里有一小部分选项，则可以更容易地使用 ng-include 和一组选项模板。

# javascript - 使 Table/iframe 随动画消失

> ID：13301314
> 
> 赞同：0
> 
> 时间：2012-11-09T02:34:35.950
> 
> 标签：javascript, jquery, html

我有一张桌子，里面有一个 iframe。我想要一个能让 iframe（或表格）在大约 2 秒内逐渐消失的脚本。感谢任何可以提供帮助的人。

```
<table align="center" id="table" border="1">
<tr>
<td>      
<iframe width="853" height="480" src="..." frameborder="0" id="iFrame" allowfullscreen>    </iframe>
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:00:39.723

你想把它附加到什么上面？Onclick/鼠标悬停..？

```
$(document).ready(function() {
    $('#SELECTOR HERE').click(function() {
        $('#table').fadeOut(2000);
    });
}); 
```

# jquery - 获取元素的子元素和子元素的父元素:)

> ID：13301317
> 
> 赞同：1
> 
> 时间：2012-11-09T02:34:46.493
> 
> 标签：jquery, jquery-selectors

好的，伙计们。我想要做的是创建一个无序列表（ul），其中包含嵌套（ul）。我正在尝试修改主要（ul）元素中的类，但我不知道如何做到这一点。让我给你举个例子。假设我有这个：

```
<ul id="mainNav">
<li><a href="#">Main Item 1</a></li>
<li><a href="#">Main Item 2</a>
   <ul>
    <li><a href="#">subitem1</a></li>
    <li><a href="#">subitem2</a></li>
   </ul>
</li>
<li><a href="#">Main Item 3</a></li>
<li><a href="#">Main Item 4</a>
   <ul>
    <li><a href="#">subitem3</a></li>
    <li><a href="#">subitem4</a></li>
   </ul>
</li>
</ul> 
```

我想要做的是在“mainNav”中找到嵌套的（ul），并使用 jquery 为它们应用一个类。此外，我需要将类和其他属性应用于嵌套（ul）的父（li）。我希望这是有道理的。输出看起来像这样：

```
<ul id="mainNav">
<li><a href="#">Main Item 1</a></li>
<li class="dropdown"><a href="#" DATA="BLAH">Main Item 2</a> <!-- STUFF GOES HERE -->
   <ul class="dropdown-submenu"> <!-- and here -->
    <li><a href="#">subitem1</a></li>
    <li><a href="#">subitem2</a></li>
   </ul>
</li>
<li><a href="#">Main Item 3</a></li>
<li class="dropdown"><a href="#" DATA="BLAH">>Main Item 4</a>
   <ul class="dropdown-submenu">
    <li><a href="#">subitem3</a></li>
    <li><a href="#">subitem4</a></li>
   </ul>
</li>
</ul> 
```

我希望这是有道理的。我正在尝试遍历子元素并向子元素（ul）添加类，然后转到父元素（li）并向其添加类以及（a）元素。我完全迷路了，如果你们能提供帮助，我将不胜感激！！！谢谢大家！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:38:16.347

使用单个 jQuery 行来做这件事相当简单：

`$('#mainNav ul').addClass('dropdown-submenu').parent('li').addClass('dropdown');`

请注意，使用 css 选择器，我们只是找到`ul`mainNav 的任何元素，然后添加一个类，然后我们链接另一个函数以找到它的父级，并在下拉列表中添加一个类。

**编辑：**
要根据问题中的示例将数据属性添加到 a 标记，请`find('a:first').attr('data', 'BLAH')`像这样链接位：

```
$('#mainNav ul').addClass('dropdown-submenu').parent('li').addClass('dropdown').find('a:first').attr("data", "BLAH"); 
```

**编辑 2：**
要解决 ul 子级的下一个级别，并且可能不会让所有子级 ul 具有相同的类，您可以使用以下脚本：

```
$('#mainNav > li > ul').addClass('dropdown-menu').parent('li').addClass('dropdown').find('a:first').attr('data-toggle', 'dropdown').addClass('dropdown-toggle');  
$('#mainNav ul ul').addClass('dropdown-child-menu').parent('li').addClass('dropdown-child');` 
```

注意第一行选择器的变化：这确保我们只得到`ul`顶层`li`元素的直接后代。

第二行选择器告诉它获取所有第三层+`ul`元素（它将获取所有第三层、第四层等`ul`元素）。

# wordpress - .htacess 自定义重定向规则与 Wordpress 重定向规则冲突

> ID：13301319
> 
> 赞同：1
> 
> 时间：2012-11-09T02:35:12.733
> 
> 标签：wordpress, .htaccess, redirect

我正在使用相同的域名将我当前的静态站点移动到 Wordpress。

旧站点和新站点的内容都在根文件夹中，并且文件名也相同，但是在新（Wordpress）站点上，我删除了当前站点上存在的 .php 扩展名并添加了尾部斜杠，根据 Wordpress永久链接。

所以我需要重定向所有旧页面（例如）：/contact-us.php -> /contact-us/

我已经尝试了有据可查的选项，例如（以及对此的变体）：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.php$ /$1 [R=301,L] 
```

但这似乎与 Wordpress .htaccess 规则相冲突：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
</IfModule> 
```

当我尝试访问 www.site.com/contact-us.php 时，我得到一个无限循环或重定向到 www.site.com/index（没有 .php，没有尾部斜杠），Wordpress 显示为404 页面。

我尝试过使用和不使用第一组重写条件（我看到它们在 Wordpress 规则中重复），并且还将我的规则放在了 Wordpress 规则之前和之后。没有喜悦。过去几个小时我也一直在谷歌搜索，但似乎没有人解决这个特定问题。我通常会通过搜索找到我要找的东西，所以我真的很绝望地在发帖（这就是为什么这是我的第一篇帖子！）

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:43:03.807

由于 php 后缀，您在尝试 .htaccess 重定向时似乎会遇到循环。也许其他人知道解决方案。

但是尝试一个名为[Redirection « WordPress Plugins 的插件。](http://wordpress.org/extend/plugins/redirection/)出于好奇，我尝试了从contact-us.php 到contact-us/ 的重定向，并且效果很好。该插件通过 php 重定向而不是写入 .htaccess，这可能是不同之处。

我一直使用该插件来主要记录 404 并进行一些重定向。它不需要太多的网站开销。

确保并将选项设置为不执行“URL 监控”，因为这将设置自动重定向到手动更改其永久链接的帖子/页面。并将您的 404 日志记录设置为一两天，因为日志会很​​快变大并导致巨大的数据库表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:45:23.120

尝试使用这个：

```
 <IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /

 #Rewrite /something.php to /something/
 RewriteRule (.*)/(.*)\.php$ $1/$2/ [R=301,L]

 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L] 
 </IfModule> 
```

此方法将重写： `/contact-us/test/hello.php`->`/contact-us/test/hello/`

如果您不想重写子目录，请将第 6 行替换为：

`RewriteRule /(.*)\.php$ /$1/ [R=301,L]`

# sharepoint - 具有引用 DLL 的可视 Web 部件不检查 GAC

> ID：13301321
> 
> 赞同：0
> 
> 时间：2012-11-09T02:35:34.840
> 
> 标签：sharepoint, web-parts, gac

我有一个带有可视 Web 部件的 SharePoint 项目（WebPartA 继承自 OtherWebPartC） - Web 部件引用了两个 DLL（ClassLibraryB 和 OtherWebPartC），它们包含在包中，设置为部署到 GAC。

当我部署项目时，DLL 已成功部署到 GAC，并且 Web 部件成功显示在 SharePoint 的库中。

但是，当我尝试将可视 Web 部件 (WebPartA) 添加到页面时，页面会中断 - 我启用了错误显示和堆栈跟踪 - 它说它找不到 ClassLibraryB.dll。我使用 fuslogvw 和 procmon 确定它正在尝试从典型位置（虚拟目录/bin、临时 asp.net 文件夹）加载 DLL，即使 DLL 不在这些位置（但正如我所说，它已成功部署到 GAC）。

所以我手动将 ClassLibraryB.dll 和 OtherWebPart.dll 添加到虚拟目录/bin，它工作成功。

如何让 SharePoint 在 GAC 中查看 ClassLibraryB.dll 和 OtherWebPart.dll？还是我必须手动将 DLL 部署到站点的虚拟目录/bin？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:20:38.033

尝试：

*   将 WebPart/assemblies 部署目标更改为“WebApplication”（而不是 GAC）；

*   撤回解决方案并从 GAC 中删除相应的程序集；

*   重新构建解决方案并将其与程序集一起重新部署到 SharePoint Bin 文件夹（选定的“WebApplication”部署目标）。

是否所有必要的程序集都复制到 Bin 文件夹中？解决方案在这种情况下有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-07T23:10:09.697

只是提醒大家挖掘这些古老的问题......我今天偶然发现了这个问题，所以我决定发表评论以澄清事情。大部分信息可以从[Waldek Mastykarz 的这篇精彩文章中获取](https://blog.mastykarz.nl/including-additional-assemblies-wsp-visual-studio-sharepoint-development-tools/)

1.  使用项目，您想打包`Controls`项目，包括`SafeControls`条目。
2.  双击`Package`项目项目，包设计器将打开。
3.  在包设计器中单击高级按钮。在“高级”视图中，单击“添加”按钮并从项目输出中选择“添加程序集” **（VS17 中的选项不同，但它们相似）** ...菜单选项。
4.  从源项目下拉列表中选择您的其他项目。
5.  然后在 Safe Controls 部分中，单击 Click here to add a new item 按钮以添加新的 Safe Controls 条目。
6.  使用该`$SharePoint.Project.AssemblyFullName$`标记，以便您可以指定要包含程序集的完全限定名称。

# ruby-on-rails - Heroku：有没有办法将开发中的数据库记录迁移到 Heroku？

> ID：13301322
> 
> 赞同：0
> 
> 时间：2012-11-09T02:35:41.407
> 
> 标签：ruby-on-rails, heroku

嗨，我目前在我的 rails 应用程序上使用carrierwave，没有 Amazon S3 或任何存储，所以我上传到我的 heroku 应用程序的图片不断消失。我想知道是否有办法事先将现有记录（在开发模式下制作）迁移到heroku，以便这些图片将永远存储在本地文件系统中而不是消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:38:55.037

如果您只想显示一些图片，您最终可以手动将它们添加到您的公共文件夹中，至少它们会正确显示。

例如，您可以将图片“/public/uploads/recipe/photo/5/chicken-wings.jpg”添加到您的 git repo 并推送到 heroku。

当然这不是完美的解决方案，因为您将此图像添加到您的 git 存储库中，这不是您在生产中启动应用程序时想要的，但由于 Heroku 是一个只读文件系统，这是存储文件的唯一方法他们的文件系统。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T04:48:07.417

你需要水龙头宝石

```
gem install taps 
```

然后做：

```
heroku db:push [options] 
```

如果您只需要上传特定的表格，请使用 --tables [您想要推送的表格数组]。

[资源](http://blog.heroku.com/archives/2009/3/18/push_and_pull_databases_to_and_from_heroku/)

# deployment - 如何诊断 Metro 应用程序部署错误？

> ID：13301323
> 
> 赞同：2
> 
> 时间：2012-11-09T02:36:17.660
> 
> 标签：deployment, microsoft-metro

在尝试从 VS 调试 Metro 项目时，我遇到了这个错误：

> DEP0700：应用注册失败。另一个用户已经安装了这个应用程序的打包版本。未打包的版本无法替代它。冲突的包是 PACKAGENAME，它是由 CN=some Guid 发布的。(0x80073cf9)

但是我已经从开始页面卸载了该应用程序，而且我可以确认添加/删除程序中没有留下任何条目。

而且由于对应用程序文件所在的“%PROGRAMFILES%\WindowsApps”文件夹的访问被阻止，所以我无法查看应用程序是否仍然存在。

但是，我仍然可以在注册表中找到许多“PACKAGENAME”的出现。

如何诊断？如何摆脱“打包版本”以便我可以从 VS 开始调试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:32:17.780

尝试再次从 Windows 商店安装该应用程序，然后从开始页面将其卸载。看来，当 Visual Studio 进行卸载时，它做得不对。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T20:38:49.503

1) 转到解决方案中的 Package.appxmanifest 文件
2) 转到标识标签。
`<Identity Name="xxxxxxx-yyyy-zzzz-tttt-bbbbbbbbbbbbb"`
`Publisher="CN=bigbob"`
`Version="1.0.0.0" />`

3) 更改身份名称的值（例如从 ...bbbbb 到 ...bbbbc）
4) 重建并运行

来源：
[http ://www.sempf.net/post/MetroUIAnother-user-has-already-installed-an-unpackaged-version-of-this-application.aspx](http://www.sempf.net/post/MetroUIAnother-user-has-already-installed-an-unpackaged-version-of-this-application.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:29:25.310

你确定你不只是取消固定应用程序吗？尝试搜索它，看看它是否仍然存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-30T03:19:44.227

我找到了[解决](https://stackoverflow.com/a/14406939/815938)问题的方法。据说它是一个“暂存包”，没有出现在我的起始页面中，所以我无法以正常方式卸载它。我按照这些步骤，并成功摆脱了那个“不可卸载”:) 包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T04:10:46.673

这篇[博](http://blogs.msdn.com/b/wsdevsol/archive/2013/01/28/registration-of-the-app-failed-another-user-has-already-installed-a-packaged-version-of-this-app-an-unpackaged-version-cannot-replace-this.aspx)文很有帮助，尽管经过一个小时左右的故障排除后，我发现我确实在**另一个用户帐户**下安装了该软件包。切换帐户并从开始屏幕卸载后，它工作正常。

# java - 在 Java 中模拟 C++-typedef

> ID：13301324
> 
> 赞同：1
> 
> 时间：2012-11-09T02:36:17.870
> 
> 标签：java, c++, generics, introspection

可以和通过代码中`typedef FooBar Bar;`的表达式获取类型FooBar`Foo::Bar`

```
#include <typeinfo>
#include <iostream>

class FooBar {};
class FooBat {};

class Foo
{
public:
    typedef FooBar Bar;
    typedef FooBat Bat;
};

int main()
{
    if( typeid(Foo::Bar) == typeid(FooBar) && 
        typeid(Foo::Bat) == typeid(FooBat) )
        std::cout << "All is well." << std::endl;
} 
```

被翻译成Java？

对类型的间接引用的 Java 等价物是什么？

STL 和 boost 中充满了诸如

```
typedef T              value_type;
typedef T*             iterator; 
```

我想知道Java是否支持类似的通用编程习惯。即使无法在编译时完成类型间接，我仍然对答案感兴趣。

**编辑** 这个问题（如何在 Java 中进行非平凡的泛型编程）并没有引起那些精通 Java 的人的兴趣。我现在添加“C++”作为标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:39:30.223

您可以将类与以下内容进行比较：

```
Object a = . . .;
Object b = . . .;
if (a.getClass().equals(b.getClass())) {
    // a and b are instances of the same class
}
if (a.getClass().isAssignableFrom(b.getClass())) {
    // the class of a is a superclass of b's class
} 
```

但是，Java 没有类似的东西`typedef`允许您使用一种类型名称作为另一种类型的别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T21:35:46.680

问题中的 C++ 程序转换为以下 Java 代码：

```
public class FooBat {}
public class FooBar {}

public class Foo {
    public static Class get_Bar() { return FooBar.class; }
    public static Class get_Bat() { return FooBat.class; }
}

public class Introspect {
    public static void main(String[] args) {
        if( Foo.get_Bar() == FooBar.class &&
            Foo.get_Bat() == FooBat.class )
            System.out.println( "All is well.\n" );
    }
} 
```

这不如 C++ 代码高效。类型在编译期间在 C++ 版本中确定。在 Java 版本中，它们是在运行时确定的。

一个更好的答案来解决这个问题是最受欢迎的。

# python - 如何使用 lxml objectify 获取 xmlns 属性？

> ID：13301325
> 
> 赞同：3
> 
> 时间：2012-11-09T02:36:20.843
> 
> 标签：python, attributes, lxml, xml-namespaces

我有几个我正在处理的 xml 文档。它们具有不同的根元素。这里是其中的一些。

```
<rss xmlns:npr="http://www.npr.org/rss/" xmlns:nprml="http://api.npr.org/nprml" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">
<rss version="2.0" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd">
<?xml-stylesheet type="text/xsl" media="screen" href="/~d/styles/rss2enclosuresfull.xsl"?><?xml-stylesheet type="text/css" media="screen" href="http://feeds.thisamericanlife.org/~d/styles/itemcontent.css"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" xmlns:feedburner="http://rssnamespace.org/feedburner/ext/1.0" version="2.0" xml:base="http://www.thisamericanlife.org"> 
```

我在上面的第一个示例中以下列方式使用 lxml。

```
>>> from lxml import objectify
>>> root = objectify.parse('file_for_first_example').getroot() # contains valid xml with first above element
>>> print root.tag
'rss'
>>> root.attrib.keys()
['version']
>>> for k in root.attrib.iterkeys():
>>>    print k
version
>>> print root.get("xmlns:npr")
None 
```

我只想能够感知这些“属性”值是什么，所以我相信，我可以推断出各种提要的格式。

我在这里先向您的帮助表示感谢。爱与和平。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T07:39:49.997

命名空间声明是命名空间节点。看起来你想要`.nsmap`财产[http://lxml.de/tutorial.html#namespaces](http://lxml.de/tutorial.html#namespaces)

```
xhtml.nsmap
{None: 'http://www.w3.org/1999/xhtml'} 
```

# python - 使用 subprocess.Popen() 打开程序时出错

> ID：13301327
> 
> 赞同：1
> 
> 时间：2012-11-09T02:36:29.120
> 
> 标签：python, linux, ubuntu

我正在运行 Ubuntu。如果我在终端中输入：

```
>>> import subprocess
>>> subprocess.Popen('firefox') 
```

这是返回的：

```
<subprocess.Popen object at 0xb76c080c>
>>> nvfx_screen_get_param:95 -  Warning: unknown PIPE_CAP 30
nvfx_screen_get_param:95 -  Warning: unknown PIPE_CAP 30
nvfx_screen_get_param:95 -  Warning: unknown PIPE_CAP 55
nvfx_screen_get_param:95 -  Warning: unknown PIPE_CAP 56
nvfx_screen_get_param:95 -  Warning: unknown PIPE_CAP 59
nvfx_screen_get_param:95 -  Warning: unknown PIPE_CAP 58
nvfx_screen_get_param:95 -  Warning: unknown PIPE_CAP 30 
```

它不会返回到 python 终端：`>>>`

我是 linux 上的 python 新手——谁能告诉我我做错了什么？谢谢。

编辑：

对于任何有兴趣解决此问题的人，我以这种方式解决了当前的问题：

```
from subprocess import PIPE,Popen
Popen('firefox',stdout=PIPE,stderr=PIPE) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:40:55.867

不是打开浏览器的最佳方式。也许试试这个：

```
import webbrowser
webbrowser.open("http://www.stackoverflow.com/") 
```

顺便说一句，它已经返回到您的 python 终端，我可以在输出中看到它。进程中的 stdout 或 stderr 有一些喋喋不休，可能已经覆盖了`>>> prompt`，但如果你按`Enter`几次，你可能会发现你仍然在[REPL](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)。

# android - 如何使用 SharedPreferences 设置简单的游戏分数？

> ID：13301331
> 
> 赞同：0
> 
> 时间：2012-11-09T02:37:13.697
> 
> 标签：android, sharedpreferences

我是一个新的安卓开发者。在过去的 4 天里，我一直在寻找这个答案。我正在开发一个安卓问答游戏。有一个名为 Level 1 的活动，以及可以通过该活动访问的几个活动（Level 1 --> Quiz 1、Quiz 2、Quiz 3...）这些 Quiz 活动中的每一个都有一个按钮，它告诉用户是否测验是正确的。如果答案是正确的，则会显示祝酒词并自动返回到级别 1 活动。使用 SharedPreferences，我希望此按钮保存分数（每个正确答案 = +1 分数，仅此而已），我想知道如何通过整个应用程序的 TextView 显示此分数。此外，是否可以在相同的 SharedPreferences 中添加一种将 ImageView (GONE) 变为 (VISIBLE) 的方法？

先感谢您。我为我糟糕的英语道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:00:30.047

是的，你可以这么做。只需在 Level1 中创建一个`SharedPreferences.Editor`，然后在按钮的 onClickListeners 中添加如下内容：

```
editor.putInt("score", prefs.getInt("score", 0)) 
```

你在哪里，`editor`是你的对象。`SharedPreferences.Editor``prefs``SharedPreferences`

至于更改 imageview，您可以检查是否在 SharedPreferences 中设置了特定的布尔值，并基于此更改 ImageView 的可见性。可以在[此处](http://developer.android.com/reference/android/content/SharedPreferences.html)找到有关 SharedPreferences 的更多信息。

# javascript - 浏览器调整大小时如何动态调整大小？

> ID：13301332
> 
> 赞同：0
> 
> 时间：2012-11-09T02:37:26.893
> 
> 标签：javascript, jquery, html

我有一个带有两个 div 的标题横幅，并将最小宽度设置为 770px，以便在浏览器调整大小时不允许第二个 div 进入第二行。

```
<div style="min-width:700px;">
  <div style="float:left;">Content1</div>
  <div style="float:right;">Content2</div>
</div> 
```

我还设置了一个边距`margin:30px 10% 0 10%;`以腾出空间。

但是我的问题是当浏览器调整元素的大小接近并且左侧的边距仍然是 10% 并且边距没有减少。它会减少直到浏览器达到 770 像素但在该元素不移动之后。如果我减少 min-宽度第二个 div 转到第二行。

如何实现此功能。请帮助我。Jquery，Javascript 什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:44:20.883

考虑使用[Twitter-Bootstrap](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)，他们的*FluidGridSystem*非常适合动态调整页面大小。

# c# - RedisClient.Get 的性能 C# 与 ServiceStack.Redis

> ID：13301334
> 
> 赞同：2
> 
> 时间：2012-11-09T02:37:31.933
> 
> 标签：c#, redis, json.net, servicestack

```
public class MyEntity
{
    public string Att1 { get; set; }
    public DateTime Att2 { get; set; }
    public KeyValuePair Att3 { get; set; }
    public Dictionary Att4 { get; set; }
}

var list = new List<MyEntity>(100);
//put to cache .....
var cached = RedisClient.Get<List<MyEntity>>(key) ; // take 9745.9745 ms
var raw = RedisClient.Get(key); //get raw of the same key just take < 10 ms 
```

我应该使用 Json.net 进行 json 序列化并改用 RedisClient.Get 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T03:32:50.090

您可能会受到第一次缓存命中惩罚的影响。从计时中取出每个 API 的每次调用中的第一个。

RedisClient 使用下面的 JsonSerializer，它做的事情完全一样，从 Redis 中拉出一个字符串并调用 JsonSerializer 来反序列化类型。

# python - 从 Python 列表中的列表创建总和？

> ID：13301339
> 
> 赞同：1
> 
> 时间：2012-11-09T02:37:58.707
> 
> 标签：python, python-3.x

我不太清楚如何问这个问题，而且我对编程的经验也不是很丰富，所以你必须原谅我。无论如何，我有一个问题。基本上，我需要得出一些数字的总和以及平均值。

该程序应该具有用户输入值。他们输入一个月和与该月相关的数字，然后我需要得到平均值。所以我有一个大列表，然后在该列表中列出。它基本上看起来像这样：

```
 months = [["January", 3.45], ["February", 7.1865], ["March", 4.56]] 
```

我想知道的是，我如何挑选出每个列表中的第二个元素？我在想我可以使用 for 循环并将数字编译到一个单独的列表中，但我尝试了，但我无法正确计算。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T02:49:20.057

还没有人说这个：

```
sum(x[1] for x in monthlist) 
```

正如下面评论中提到的，如果您知道 中的每个元素`monthlist`都是可迭代的并且恰好有 2 个元素，那么您可以通过解包元组来使这一点更加明确：

```
sum(value for month,value in monthlist) 
```

* * *

这不会创建一个中间列表，只是为了传递给 sum。这就是发电机的美妙之处。如果monthlist 是某种惰性迭代器（例如文件对象），这里真正的优点是。然后你可以对它进行求和，而不是一次在内存中存储一​​个以上的元素：

```
#code to sum the first column from a file:
with open(file) as f:
    first_col_sum = sum(float(line.split()[0]) for line in f) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T02:51:23.233

不妨将此作为答案而不是评论。该`zip`函数的工作方式有点像拉链，结合了匹配的元素：

```
>>> zip([1,2,3],[4,5,6])
<zip object at 0xb6e5beec>
>>> list(zip([1,2,3],[4,5,6]))
[(1, 4), (2, 5), (3, 6)] 
```

并且使用 * 运算符，它基本上将 f(*[a,b]) 转换为 f(a,b)，我们可以倒退：

```
>>> list(zip(*(zip([1,2,3],[4,5,6]))))
[(1, 2, 3), (4, 5, 6)] 
```

所以我们可以`zip`用来分解你的列表：

```
>>> list(zip(*months))
[('January', 'February', 'March'), (3.45, 7.1865, 4.56)]
>>> monthnames, numbers = zip(*months)
>>> monthnames
('January', 'February', 'March')
>>> numbers
(3.45, 7.1865, 4.56) 
```

如果您只关心其中一个，效率会稍低一些，但熟悉它是一个有用的习语。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T02:40:36.160

列表推导可以在这里为您提供帮助：

```
names = [item[0] for item in months]
numbers = [item[1] for item in months] 
```

如果您只使用普通`for`循环，事情会变得更加混乱：

```
names = []
numbers = []

for item in months:
    names.append(item[0])
    numbers.append(item[1]) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-09T02:40:34.767

要提取每个列表中的第二个元素：

```
numbers = [i[1] for i in months] 
```

如果你想得到所有数字的总和：

```
numbersum = sum(numbers) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T02:44:23.513

[itemgetter](http://docs.python.org/2/library/operator.html#operator.itemgetter)的另一种选择：

```
from operator import itemgetter

months = [["January", 3.45], ["February", 7.1865], ["March", 4.56]]
sum(map(itemgetter(1), months)) # what means sum all items where each item is retrieved from month using index 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T03:21:04.653

添加是因为我还没有看到它。

```
>>> map(None,*months)
[('January', 'February', 'March'), (3.4500000000000002, 7.1864999999999997, 4.5599999999999996)] 
```

`map(None, *months)[1]`您寻找的清单也是如此。

# javascript - 通过循环将日期添加到数组

> ID：13301342
> 
> 赞同：0
> 
> 时间：2012-11-09T02:38:26.807
> 
> 标签：javascript, date, for-loop

我正在经历一个 for 循环，在当前日期上添加一个时间，并将新日期添加到一个数组中。但是，当我在循环完成后输出数组时，它会填充 50 个相同日期的实例。然而，从循环中记录这些日期显示它们正在正确递增。这与已将数据推入数组后正在更新的数据有关吗？

```
var dates = new Array();
var currentDate = new Date();
for (var i =0; i < 50;i++){
    currentDate.setDate(currentDate.getDate()+2);
    console.log(currentDate);
    dates.push(currentDate);
}
console.log(dates); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:40:39.640

移入`var currentDate = new Date();` **for 循环**。否则，您将**修改同一个对象**并在数组中添加 50 个对它的引用。

最后，您会看到同一个对象使用最后更新的日期值打印了 50 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:58:29.883

您可以按照 Yogendra 的建议进行操作，或更改：

```
> dates.push(currentDate); 
```

到

```
dates.push(new Date(currentDate)); 
```

为数组的每个成员获取不同的日期对象。

# android - 在列表视图中显示图像

> ID：13301347
> 
> 赞同：1
> 
> 时间：2012-11-09T02:39:47.140
> 
> 标签：android, android-listview, android-imageview

我正在开发一个显示图像列表（来自 URL）和 ListView 中的一些文本的应用程序。看起来像这样（+ 是图像）：

```
-------------------------
|   +++       some text |  
|   +++       some text |  
-------------------------
|   +++       some text |  
|   +++       some text |  
-------------------------
|   +++       some text |  
|   +++       some text |  
-------------------------
|   +++       some text |  
|   +++       some text |  
------------------------- 
```

我通过解析包含某个网页的源代码的字符串来获取 URL 和文本，并且我正在使用 HttpGet 请求获取该源字符串。

所以这个应用程序需要下载一个网页，解析它，然后下载一些图像并显示在一个列表中。

我不确定最后一部分。我设法使用 asynctask 下载和解析 html 源代码，但其余的对我来说有点棘手。

我怎样才能做到这一点？

（我希望这足够清楚）

编辑：

我现在会尝试更准确 :) 我创建了一个名为 MediaObject 的对象，它有 3 个字符串（图像 URL、歌曲名称和歌曲的艺术家）。我还编写了一个函数，它获取一个字符串（包含一个 html 源代码），从中提取 URL 和名称，并返回一个 MediaObject 对象数组。

此时我只显示一首歌曲，使用 2 个异步任务： 1) 要获取 html 源代码，然后获取一个 MediaObject 对象并在文本视图中显示歌曲/艺术​​家名称。2) 下载图像并将其显示在图像视图中。

它工作正常，但仅适用于 1 个 MediaObject。我想在列表视图中显示几首歌曲（使用几个 MediaObject 对象）。

问题是我不知道该怎么做。我应该使用几个异步任务吗？每个图像的新异步任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:55:17.827

首先，把它分成几块。不要一起想。我推荐，以下。

*   编写一个junit测试用例，做http调用，解析和提取图片链接。
*   现在，创建一个新的 android junit 测试用例，将上面的代码放入异步任务中，创建一个只有 1 个图像的布局，并在其上渲染图像。
*   现在，您已准备好将其集成到您的应用程序中。

junit 的想法是，您将能够编写这段代码并快速连续地对其进行测试，因为您是第一次编写它。请记住，开发速度非常重要。

[我在这里](https://stackoverflow.com/questions/9671546/asynctask-android-example)找到了一个有趣的异步任务示例。

至于您的问题，您需要更清楚地了解您正在进行的 http 调用类型以及它提供的返回类型。Json，XML，什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:56:56.810

检查[链接](http://codinglookseasy.blogspot.in/2012/10/save-image-in-sdcard.html)。这里有一个名为 showImage() 的函数，它接受一个 url 作为参数并返回位图，您可以使用它来设置图像视图。对于用于显示图像的自定义列表视图，您需要像[这里](http://codinglookseasy.blogspot.in/2012/07/custom-list-view.html)一样自定义列表并使用类似 imageview1.setImageBitmap(bm); 的东西设置图像；

# asp.net - 使用 moq 验证方法在存储库中被调用

> ID：13301351
> 
> 赞同：1
> 
> 时间：2012-11-09T02:40:06.470
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, moq

我之前问[过这个问题，](https://stackoverflow.com/questions/13301044/using-moq-to-verify-a-method-is-called-on-an-mvc-controller)关于测试控制器操作并验证我的存储库中的方法是否被调用。答案回来了，我应该只在存储库的单独测试中测试在 Register 方法（都在同一个存储库中）内部调用的 Save 方法。这就是我的想法，但我来做测试，我不能让它工作。:(

这是存储库测试，我哪里出错了？

```
 [TestMethod]
    public void Register_calls_Save_method_when_Member_is_valid()
    {
        _mockMemberRepository.Setup(r => r.GetByEmail(It.IsAny<string>())).Returns((Member)null);            
        MembershipCreateStatus status = _mockMemberRepository.Object.Register(_testMember.Email, "password", "password");
        _mockMemberRepository.Verify(r => r.Save(It.IsAny<Member>()), Times.Once());
    } 
```

这是存储库中的 Register 方法：

```
public MembershipCreateStatus Register(string email, string password, string confirm)
    {
        if (password.Equals(confirm))
        {
            try
            {
                Member m = GetByEmail(email);
                if (m == null)
                {
                    int format = (int)PasswordFormatEnum.Encrypted;
                    string salt = GenerateSalt();
                    string pass = EncodePassword(password, format, salt);

                    m = new Member()
                    {
                        Email = email,
                        Password = pass,
                        PasswordSalt = salt,
                        PasswordFormat = format
                    };
                    Save(m);
                    return MembershipCreateStatus.Success;
                }
                else
                    return MembershipCreateStatus.DuplicateEmail;
                //"A user with that email address already exists. Please use the Forgotten Password link if you need to recover your password.";
            }
            catch (Exception ex)
            {
                _logger.LogError(ex);
                return MembershipCreateStatus.ProviderError;
            }
        }
        return MembershipCreateStatus.InvalidPassword;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:14:21.447

您不能使用 Moq 来验证您正在从该对象的另一种方法调用该对象的一种方法。您可以做的是验证在您的 Save() 方法中调用的内容是否被调用。

例如，如果我正在编写自己的存储库并使用 Ado.Net 更新数据库，我可以执行以下操作：

```
public class MyRepository : IRepository {
   private readonly IDatabase m_db;
   public MyRepository(IDatabase myDatabase){
      m_db = myDatabase;
   }

   public void Register(string email, string password, etc.){
      // ... do stuff ...
      Save(m);
      // ... do stuff ...
   }

   public void Save(Member member){
      // ... build sql query ...
      m_db.ExecuteNonQuery(sqlCommand);

   }
} 
```

然后，您将在测试中将模拟的数据库对象传递给您的存储库，并验证：

```
[TestMethod]
public void Register_calls_Save_method_when_Member_is_valid()
{
    Mock<IDatabase> _mockDB = new Mock<IDatabase>();
    // Setup mockDB with return values for GetByEmail(), etc.

    _repository = new MyRepository(_mockDB.Object);

    MembershipCreateStatus status = _repository.Register("Email@Email.com", "password", "password");
    _mockDB.Verify(r => r.ExecuteNonQuery(It.IsAny<SqlCommand>()), Times.Once());
} 
```

因此，您不是在验证 Save() 是否被显式调用，而是通过验证是否调用了正确的底层数据库调用，您可以验证 Save() 是否发生。

同样的方法也适用于其他框架。

# javascript - 使用css将文本适合容器？

> ID：13301352
> 
> 赞同：0
> 
> 时间：2012-11-09T02:40:23.450
> 
> 标签：javascript, html, css

我认为这个问题之前已经得到解答，但我想找到最好的解决方案，因为它将在性能相当高的东西上运行。

基本上给出了这个。

```
<div id="fit">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div> 
```

和

```
#fit {
  width: 400px;
  font-size: 20px;
} 
```

我希望缩小字体直到适合为止。

A) 有没有办法通过 CSS 做到这一点？

B) 我知道我可以用 javascript 来完成，但这会加载一些项目（400-2000，这是一个要求），所以如果我通过 javascript 实现它，它必须非常快。

C）另一个想法是实现一对额外的css类并根据字符串长度应用它们。这会增加很多额外的开销吗？现在在该页面没有缓存时渲染它最多可能需要 5 秒（还没有优化它，但是，原来的开发人员不再处理这个了）

谢谢

# php - 在一个范围内生成 3 个随机数并求和 3 个数字 = 这个范围

> ID：13301361
> 
> 赞同：0
> 
> 时间：2012-11-09T02:41:48.997
> 
> 标签：php, random, numbers

> **可能重复：**
> [如何制作 5 个总和为 100 的随机数](https://stackoverflow.com/questions/7289136/how-to-make-5-random-numbers-with-sum-of-100)

我是 php 新手。我能问一下如何使3个随机数的范围为3个数字的总和=该范围的最大值。

示例：我的范围为 0->900；3 随机数为 213 437 250

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:44:39.520

选择 0 到 900 之间的两个随机数。将 0 和 900 添加到列表中。对它们进行排序。您的数字是连续数字之间的 3 个差异。

例如，假设您选择 503 和 117。您的排序列表是 0、117、503、900。所以您的区别是：

117 - 0 = 117
503 - 117 = 386
900 - 503 = 397

所以你的三个数字是 117、386 和 397。

由于您只需要三个数字，因此可以简化过程：生成 0 到 900（含）之间的两个随机数。叫大 A 和小 B。你的数字是`B`和。`A - B``900 - A`

[见这里](https://stackoverflow.com/a/8064754/721269)。

# php - mysql_real_escape_string() 但允许名称带有撇号

> ID：13301362
> 
> 赞同：0
> 
> 时间：2012-11-09T02:41:48.467
> 
> 标签：php, mysql

这可能是一件常见的事情，但我有一个问题。允许使用撇号，同时仍保留`mysql_real_escape_string()`标签。

我有这个：`$name = stripslashes(mysql_real_escape_string($_POST['stadium_name']));`

我对此进行了测试：

```
$getInfoX = mysql_fetch_array(mysql_query("SELECT * FROM `stadiums` WHERE `stadium_name` = '$stadium_name'")) or die(mysql_error()); 
```

我可以做一个示例注入类似`x'; DROP TABLE members; --`或带有撇号`Stade de l'Aube`的名称...但是带有撇号的名称给我一个错误，例如：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Aube'' at line 1`

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:54:11.057

您链接结果，`mysql_real_escape_string`通过`stripslashes`它基本上删除`mysql_real_escape_string`了出于安全原因添加的所有内容。

因此，如果您有`$stadium_name= "Fred's Stadium";`作为输入的`mysql_real_escape_string($stadium_name)`返回值`"Fred\'s Stadium"`，可以将其包含在您的查询中，从而安全地生成

```
"SELECT * FROM `stadiums` WHERE `stadium_name` = 'Fred\'s Stadium'" 
```

作为 MySQL 查询。调用输出会删除 ' 前面的 \，以便您发送`stripslashes`查询`mysql_real_escape_string`

```
"SELECT * FROM `stadiums` WHERE `stadium_name` = 'Fred's Stadium'" 
```

到 MySQL 认为你的字符串是 'Fred' 后跟一些垃圾（这可能是危险的）。

解决方案是使用单独的变量来存储 mysql_real_escape_string 的结果，因为它在数据库查询中使用是正确的，但不适合显示给用户。

我希望这有帮助。

问候

TC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:53:57.277

你的问题是这样的：

```
$name = stripslashes(mysql_real_escape_string($_POST['stadium_name'])); 
```

[`stripslashes()`](http://php.net/stripslashes)撤消转义。

您可能已经看到该函数用作[`magic_quotes`](http://php.net/magic_quotes). 如果要应用它，请在数据库转义功能**之前执行此操作。**

# javascript - 如何从画布保存多个生成的文件

> ID：13301364
> 
> 赞同：1
> 
> 时间：2012-11-09T02:42:45.127
> 
> 标签：javascript, html, save, data-url

我创建了一个脚本，通过绘制图像并使用 dataURL 输出它们来生成图像，如下所示：

```
var dataURL = d.toDataURL();
var createElement = document.createElement('img');
createElement.setAttribute('id',imgNumber);
createElement.setAttribute('src',dataURL);
document.getElementById('showimage').appendChild(createElement); 
```

问题是，我想一次保存这些图像文件。由于安全问题，JavaScript 在很多方面都阻止了这种情况，但 HTML5 似乎有一些可能性。请任何人都可以建议一种一次性保存所有文件的方法。目前，如果我创建 10 张图片，我必须在 Chrome 中一遍又一遍地使用“另存为”来保存每张图片。任何想法，甚至是 JavaScript 之外的想法都会被考虑。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:46:22.273

你可以压缩它们，然后下载压缩包。 [http://stuk.github.io/jszip/](http://stuk.github.io/jszip/)

# objective-c - ObjC-为什么分开实现[alloc]和[init]方法不正确？

> ID：13301365
> 
> 赞同：0
> 
> 时间：2012-11-09T02:42:46.373
> 
> 标签：objective-c, init, alloc

切勿在未重新分配指向该对象的任何指针的情况下初始化对象。例如，不要这样做：

```
NSObject *someObject = [NSObject alloc];
[someObject init]; 
```

如果对 init 的调用返回一些其他对象，您将得到一个指向最初分配但从未初始化的对象的指针。

实际上，这是Apple的ObjC文档中的一个示例，但我对此不太清楚，即为什么`NSObject *someObject = [[NSObject alloc] init]`promise可以返回我们刚需要的对象，而`NSObject *someObject = [NSObject alloc]; [someObject init];`不能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:49:16.810

仅仅因为 -init 可能返回与 someObject 不同的东西。在您的示例中，您必须将指针重新分配给-init 的结果。

# java - 使用另一个类的数据库助手

> ID：13301366
> 
> 赞同：0
> 
> 时间：2012-11-09T02:42:59.727
> 
> 标签：java, android, database, sqlite

我正在为一个 android 应用程序编写一个数据库适配器类，并计划创建特定于表的适配器类。我将像肖恩在[这篇文章](https://stackoverflow.com/questions/4063510/multiple-table-sqlite-db-adapters-in-android)中所阐述的那样构建整个事物。拥有多个数据库助手类对我来说似乎是多余的，所以我想知道是否可以引用一个数据库助手类而不是创建多个。这是我正在谈论的部分：

```
public static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    public void onCreate(SQLiteDatabase db) {
        try {
            db.execSQL(DATABASE_CREATE);
        }
        catch (SQLException ex){
            ex.printStackTrace();
        }
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS Exercise");
        onCreate(db);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:12:17.717

我发现了对我来说看起来相当不错的解决方案，请考虑一下。创建一种基本数据库助手并在那里创建所有表

```
public static class BaseDbHelper extends SQLiteOpenHelper {
    BaseDbHelper (Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    public void onCreate(SQLiteDatabase db) {
        //Create all tables here
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        //Drop all tables here
        onCreate(db);
    }
} 
```

然后您可以从 BaseDbHelper 继承并为特定表创建特定方法。在这种情况下，您不会重复代码，也不会错过您首先调用的帮助程序的初始化。

# angularjs - AngularJS：扩展内置过滤器

> ID：13301367
> 
> 赞同：14
> 
> 时间：2012-11-09T02:43:01.803
> 
> 标签：angularjs

我想修改`currency`过滤器以处理输入值中的自定义货币格式。

（例如，`AUD 3.00 -> $3.00`）。

一种选择是从头开始编写我自己的过滤器。然而，这似乎有很多重复，鉴于现有的过滤器很棒，我只需要先修剪前面的几个字符。

理想情况下，我会有这样的事情：

```
.filter('money', function($filters) {
    return function(text){
        var currency = text.substring(4)
        return $filters('currency')(currency)
    };
}); 
```

是否可以：

*   从另一个过滤器调用一个过滤器？
*   访问内部方法（例如，[此处](https://github.com/angular/angular.js/blob/master/src/ng/filter/filters.js)`formatNumber()`显示

为此，我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-09T13:06:04.830

*   从另一个过滤器调用一个过滤器？

是的，我发现的最佳解决方案是创建一个新过滤器：

```
angular.module('ui.filters').filter('customCurrency',
    [ '$filter', function(filter) {
      var currencyFilter = filter('currency');
      return function(amount, currencySymbol) {
        return currencyFilter(amount.substr(4), currencySymbol);
      }
    } ]); 
```

这会将诸如“ **AUD 30.00** ”之类的值转换为“ **$30.00** ”

根据我的尝试，从 1.0.1 版开始，您不能覆盖过滤器。我尝试使用相同的名称创建过滤器并尝试引用原始过滤器会导致无限循环。

[这](https://groups.google.com/forum/?fromgroups=#!msg/angular/dzhMMAm6Vl4/MEu41yy99QAJ)是一个很好的考虑点：

> 但是，我建议不要这样做——即使这是允许的。预定义过滤器是 AngularJS 的公共 API。如果 AngularJS 的某些部分在内部使用其中的一些，或者有一天您安装了一些依赖于该过滤器的附加组件怎么办？

另请参阅，即使我相信 op 并不真正需要自定义过滤器，[也基本相同的结论。](https://stackoverflow.com/questions/12236905/how-to-extend-or-override-existing-filters-in-angularjs/12237229#12237229)

*   访问内部方法（例如，formatNumber()）？

如果该功能没有公开，那么作者认为它不是他们想要提供的公共 api。作者可能有一个特定的实现特定功能，可能不会马上显而易见。

**PS**：该模块是您需要过滤器的任何内容。我在不同的模块中分离了一些功能，并在构建主模块时需要它们

```
var App = angular.module('App', [ 'ui' ]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T06:22:18.357

最好的方法是，

`<div> {{amount | currency:'$'}} </div>`

在你的 html 中。这将自动撕掉与货币类型相对应的前几个字符，并将它们替换为您传递的字符串参数“$”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:40:06.780

> Angular 的货币过滤器允许您使用语言环境服务中的默认货币符号，或者您可以为过滤器提供自定义货币符号。如果您的应用仅在一种语言环境中使用，则可以使用默认货币符号。但是，如果您预计其他地区的观众可能会使用您的应用，您应该提供自己的货币符号以确保理解实际价值。
> 
> 例如，如果您想显示 1000 美元的帐户余额，并使用以下包含货币过滤器的绑定：{{ 1000 | currency }}，并且您的应用当前位于 en-US 语言环境中。将显示“$1000.00”。但是，如果其他本地（例如日本）的人查看您的应用程序，她的浏览器会将语言环境指定为 ja，而将显示余额 '¥1000.00'。这真的会让你的客户感到不安。
> 
> 在这种情况下，您需要通过在配置过滤器时为货币过滤器提供货币符号作为参数来覆盖默认货币符号，例如 USD$1,000.00。这样，Angular 将始终显示“1000 美元”的余额并忽略任何区域设置更改。

请参阅本地化说明： http: [//docs.angularjs.org/guide/i18n](http://docs.angularjs.org/guide/i18n)

# c++ - C++11 等价于 python 的 x, y, z = array

> ID：13301370
> 
> 赞同：10
> 
> 时间：2012-11-09T02:43:32.773
> 
> 标签：c++, c++11

是否有与此 python 语句等效的 C++11：

```
x, y, z = three_value_array 
```

在 C++ 中，您可以这样做：

```
double x, y, z;
std::array<double, 3> three_value_array;
// assign values to three_value_array
x = three_value_array[0];
y = three_value_array[1];
z = three_value_array[2]; 
```

在 C++11 中是否有更紧凑的方法来实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T02:48:36.893

您可以使用`std::tuple`and`std::tie`为此目的：

```
#include <iostream>
#include <tuple>

int main()
{
  /* This is the three-value-array: */
  std::tuple<int,double,int> triple { 4, 2.3, 8 };

  int i1,i2;
  double d;

  /* This is what corresponds to x,y,z = three_value_array: */
  std::tie(i1,d,i2) = triple;

  /* Confirm that it worked: */    
  std::cout << i1 << ", " << d << ", " << i2 << std::endl;

  return 0;
} 
```

# c++ - XCode 中的 LLVM-GCC ASM 到 LLVM

> ID：13301371
> 
> 赞同：2
> 
> 时间：2012-11-09T02:44:06.613
> 
> 标签：c++, c, llvm, xcode4.5, llvm-gcc

我得到了以下 2 个定义，使用 XCode LLVM-GCC 编译器可以很好地编译（和工作）：

```
#define SAVE_STACK(v)__asm { mov v, ESP }
#define RESTORE_STACK __asm {sub ESP, s } 
```

但是，当我将编译器更改为 Apple LLVM 时，出现以下错误：

```
Expected '(' after 'asm' 
```

我将 {} 替换为 () 但这并不能解决问题，我在那个错误上用谷歌搜索找不到任何有用的东西......有人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:25:43.190

内联汇编的`__asm {...}`样式是非标准的，clang 不支持。相反，C++ 将内联汇编语法指定为`asm("...")`，请注意引号。此外，clang 使用 AT&T 汇编语法，因此需要重写宏以确保安全。

但是，一些工作一直在进行以改进对 Microsoft 的非标准汇编语法以及 Intel 风格的汇编的支持。有一个选项`-fenable-experimental-ms-inline-asm`可以启用到目前为止所做的事情，尽管我不确定它是什么时候引入的，或者您使用的 clang 版本的支持有多好。对您显示的代码的简单尝试似乎适用于来自 SVN 主干的最新版本的 clang。

```
#define SAVE_STACK(v)__asm { mov v, ESP }
#define RESTORE_STACK __asm {sub ESP, s }

int main() {
    int i;
    int s;
    SAVE_STACK(i);
    RESTORE_STACK;
} 
```

`clang++ tmp.cpp -fms-extensions -fenable-experimental-ms-inline-asm -S -o -`

```
 .def     main;
        .scl    2;
        .type   32;
        .endef
        .text
        .globl  main
        .align  16, 0x90
main:                                   # @main
# BB#0:                                 # %entry
        pushq   %rax
        #APP
        .intel_syntax
        mov dword ptr [rsp + 4], ESP
        .att_syntax
        #NO_APP
        #APP
        .intel_syntax
        sub ESP, dword ptr [rsp]
        .att_syntax
        #NO_APP
        xorl    %eax, %eax
        popq    %rdx
        ret 
```

该命令`clang++ tmp.cpp -fms-extensions -fenable-experimental-ms-inline-asm`会生成一个可以运行的可执行文件。

它仍然会产生如下警告。

> 警告：不支持 MS 样式的内联汇编 [-Wmicrosoft]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-29T15:13:41.403

我在使用 XCode 开发环境时遇到问题，以下代码编译正确。切换到我的 makefile 我收到以下错误消息`Expected '(' after 'asm'`

```
#define DebugBreak()  { __asm { int 3 }; }
int main(int argc, const char *argv[])
{
    DebugBreak();
} 
```

请注意， 的定义`DebugBreak()`来自我在 Visual Studio 下编译的代码。

我在 make 文件中解决此问题的方法是添加参数`-fasm-blocks`

`CFLAGS += -std=c++11 -stdlib=libc++ -O2 -fasm-blocks`

# .net - ListBox 分割线 .NET Windows 窗体

> ID：13301372
> 
> 赞同：1
> 
> 时间：2012-11-09T02:44:09.073
> 
> 标签：.net, winforms, listbox

在 .NET Windows 窗体中，是否有添加水平分割线的简单方法？它应该是不可选择的。

[这个问题](https://stackoverflow.com/questions/8391441/adding-line-to-asp-net-to-listbox)，我相信，在 ASP.NET 中谈论同样的事情。

# java - 按边缘排列摆动组件

> ID：13301374
> 
> 赞同：3
> 
> 时间：2012-11-09T02:44:18.837
> 
> 标签：java, swing, alignment, vertical-alignment, layout-manager

是否可以排列摆动组件？这些组件位于单独的面板中，它们都使用流布局。这两个面板位于另一个使用网格布局的面板中。

![图片](../Images/d2f6043f43aebdbe6d133c058c1d28f3.png)

正如你所看到的，有一个细微的差别，我觉得这很烦人。我知道所有的 jlabels [蓝色/紫色的矩形都具有相同的大小，所以我认为这可能是因为“+”和“*”，但我不确定因为第一个的左侧两个盒子没有排成一行。

面板

```
JPanel panel2 = new JPanel(new GridLayout(4, 1));
JPanel panel2a = new JPanel(new FlowLayout());
JPanel panel2b = new JPanel(new FlowLayout()); 
```

前两个矩形（紫色）

```
add1 = new JLabel("", JLabel.CENTER);
add1.setTransferHandler(new TransferHandler("text"));
add1.setBorder(b2);
add2 = new JLabel("", JLabel.CENTER);
add2.setTransferHandler(new TransferHandler("text"));
add2.setBorder(b2); 
```

两个蓝色矩形

```
textFieldA = new JTextField();
textFieldA.setHorizontalAlignment(JTextField.CENTER);
textFieldA.setEditable(false);
textFieldA.setBorder(new LineBorder(Color.blue));
textFieldM = new JTextField();
textFieldM.setHorizontalAlignment(JTextField.CENTER);
textFieldM.setEditable(false);
textFieldM.setBorder(new LineBorder(Color.blue)); 
```

+ 和 *

```
opA = new JLabel("+", JLabel.CENTER);
opS = new JLabel("*", JLabel.CENTER); 
```

显示矩形大小相同

```
Dimension d = card1.getPreferredSize(); 
int width = d.width + 100;
int height = d.height + 50;

add1.setPreferredSize(new Dimension(width, height));
add2.setPreferredSize(new Dimension(width, height));
mult1.setPreferredSize(new Dimension(width, height));
mult2.setPreferredSize(new Dimension(width, height));

textFieldA.setPreferredSize(new Dimension(width, height));
textFieldM.setPreferredSize(new Dimension(width, height)); 
```

添加到面板

```
panel2a.add(add1);
panel2a.add(opA);
panel2a.add(add2);
panel2a.add(enterA);
panel2a.add(textFieldA);
panel2c.add(mult1);
panel2c.add(opM);
panel2c.add(mult2);
panel2c.add(enterM);
panel2c.add(textFieldM);
panel2.add(panel2a);
panel2.add(panel2c); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T03:02:59.313

跨容器布局管理实际上是不可能的（或者至少我从未见过这样做的布局管理器）。

但是，您可以仔细考虑您的布局要求并使用复合组件和布局管理器产生一些有趣的效果......

![在此处输入图像描述](../Images/49a1b24b418965c2834daef590fe7d81.png)

```
public class TestLayout {

    public static void main(String[] args) {
        new TestLayout();
    }

    public TestLayout() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridLayout(2, 0));
                frame.add(new CalculatePane("+"));
                frame.add(new CalculatePane("x"));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class CalculatePane extends JPanel {

        public CalculatePane(String operator) {
            setLayout(new GridBagLayout());
            Font font = UIManager.getFont("TextField.font").deriveFont(Font.BOLD, 24);
            JTextField field1 = new JTextField(2);
            JTextField field2 = new JTextField(2);
            JTextField field3 = new JTextField(2);
            field1.setFont(font);
            field2.setFont(font);
            field3.setFont(font);

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.fill = GridBagConstraints.BOTH;
            add(field1, gbc);
            gbc.gridx++;
            add(new JLabel(operator), gbc);
            gbc.gridx++;
            add(field2, gbc);
            gbc.gridx++;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(new JButton("="), gbc);
            gbc.fill = GridBagConstraints.BOTH;
            gbc.gridx++;
            add(field3, gbc);

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T04:49:34.347

AFAIU 这可以使用[`GroupLayout`](http://docs.oracle.com/javase/7/docs/api/javax/swing/GroupLayout.html). 这种布局需要 5 个水平组和 2 个垂直组。

![GroupLayout 垂直和水平组](../Images/f3d673b62ba9acb47439443d005caeac.png)

有关示例，请参见[如何使用 GroupLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html)（包括对该图像的讨论）。

另请参阅[此答案](https://stackoverflow.com/a/21659516/418556)以了解 MCVE。

![](../Images/8a2845c0cccf3a78e5bac556199e0a16.png)

# bash - 如果语句不遵循其条件

> ID：13301377
> 
> 赞同：0
> 
> 时间：2012-11-09T02:44:21.787
> 
> 标签：bash, shell

在我的滚动代码中，您只需编写 r 然后按回车键，但似乎没有读取它并转到重新启动 while 循环的 else 。让它滚动的唯一方法是输入除 r 以外的其他内容，而不是 (standard_in) 1: parse error。

```
#!/bin/bash
#this is a game that is two player and it is a race to get to 
#100 before the other player

echo "Player 1 name?"
read p1
echo "Player 2 name?"
read p2
echo "Okay $p1 and $p2\. $p1 will go first"
p1s=0
p2s=0
pt=1
while [ $pt -eq 1 ]; do
echo "roll or stay"
read choice
if [ $choice == r ]; then

die=$(($RANDOM%6+1))

elif [ $die -eq 1 ]; then
p1s=$(echo "$p1s-$count" |bc)
echo "You rolled a 1\. Your score is $p1s"
echo "$p2 turn now."
sleep 1
count=0
pt=2

elif [ $die -gt 1 ]; then
p1s=$(echo "$p1s+$die" |bc)
count=$(echo "$count+$die" |bc)
echo "You rolled a $die. Your score is $p1s"
pt=1

else

if [ $choice == s ]; then
echo "Okay $p1 your score is $p1s"
echo "$p2 turn now"
sleep 1
count=0
pt=2

else
if [ $p1s -gt 99 ]; then
echo "$p1 won. $p2 lost"
echo "would you like to play again?"
read again
elif [ $again  yes ]; then
echo "Okay one second."
sleep 1
clear
bash num.sh
elif [ $again == no ]; then
exit

else

pt=1
fi
fi
fi

done 
```

**不要担心他们不是第二个玩家的第二个。我把它删掉了，因为它与玩家二的代码完全相同。**

样本输入/输出

```
Player 1 name?
guy1
Player 2 name?
guy2
Okay guy1 and guy2\. guy1 will go first
roll or stay
r
roll or stay
rr
(standard_in) 1: parse error
You rolled a 5\. Your score is 5
roll or stay
roll
(standard_in) 1: parse error
You rolled a 5\. Your score is 10
roll or stay
s
(standard_in) 1: parse error
You rolled a 5\. Your score is 15
roll or stay 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T03:37:00.577

好的，关于您的代码的一些评论。

*   由于缺少缩进，这真的很难阅读。嵌套事物时，缩进嵌套的内容。使用缩进，您可以查看循环的开始和结束位置、哪些代码属于哪个 if/else 等。
*   在 bash 中，您应该始终引用变量以避免意外扩展。例如，如果有人输入星号 ( `*`) 而不是“r”，会发生什么情况？你的`if`陈述会做奇妙而神秘的事情。
*   您使用错误的运算符。在 bash 中，使用带有 的单方括号`if`，将字符串等效性与单个等号 ( `=`) 进行比较，而不是双等号。如果你想要数值相等，你有`-eq`. 尽管您可能想使用双方括号查看 bash 的扩展测试。（有关详细信息，请查看手册页。）
*   尽量不要将外部工具用于 bash 可以自己完成的事情。 `bc`例如，整数算术不需要。

所以......大家都说，这是你的一个代码段，重写了一点。

```
while [ "$pt" -eq 1 ]; do

    read -p "Roll or stay (r/s)? " choice

    if [ "$choice" = r ]; then

        die=$(($RANDOM%6+1))

    elif [ "$die" -eq 1 ]; then

        p1s=$((p1s - count))
        echo "You rolled a 1\. Your score is $p1s"
        echo "$p2 turn now."
        sleep 1 
        count=0 
        pt=2    

    elif [ $die -gt 1 ]; then

        p1s=$((p1s + die))
        count=$((count + die))
        echo "You rolled a $die. Your score is $p1s"
        pt=1    

    else 
```

请注意，我并没有就您的程序逻辑是否合理做出任何声明。

到底是`num.sh`什么？那很重要么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:12:40.177

在查看了正确缩进的代码之后（参见[ghoti](https://stackoverflow.com/users/1072112/ghoti)的重写代码段），我看到顶层 if 块是

```
if [ $choice == r ]; then
    die=... #roll the die
elif [ $die -eq 1 ]...
elif [ $die -gt 1 ]...
else
    do something...
fi 
```

问题是，如果`[ $choice == r ]`是真的，您将掷骰子并跳过其余的`elif`-`else`条目。所以你将不做任何事情就进入下一个迭代（除了掷骰子）

解决此问题的一种方法是检查`$choice`和`$die`作为单独的`if`块，即

```
if [ $choice == r ]; then
    #roll the die
else
    #break or something...
fi

if [ $die -eq 1 ]; then
    #do something
elif the rest of $die-related checks 
```

# actionscript-3 - AS3 中的动态类：监听属性创建？

> ID：13301379
> 
> 赞同：0
> 
> 时间：2012-11-09T02:44:30.770
> 
> 标签：actionscript-3

我目前正在从事一个涉及重新实现 Array 类的项目。出于兼容性原因，这个对象需要是一个数组，同时我还需要控制写入的内容。

我似乎找不到任何方法来检查 AS3 中动态对象内的属性创建。可以像 Event.ADDED_TO_STAGE 一样工作的东西，但又像 ClassEvent.PROPERTY_ADDED。

我覆盖了 push、splice 等方法，但我无法控制直接分配：MyArray[i] = ...

这样的事情甚至可能吗？

当然，我可以在其他地方进行某种验证，但这将涉及访问我无法修改的部分代码。

谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:38:23.443

我不确定我是否完全关注你，但你可能正在寻找 Proxy 类：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Proxy.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Proxy.html)

底部的示例向您展示了如何覆盖直接分配：

```
override flash_proxy function setProperty(name:*, value:*):void {
    _item[name] = value;
} 
```

使用它，您将能够调度一个自定义事件，该事件将在任何时候将项目添加到您的 ProxyArray 时触发

# java - 两个线程死锁但不知道为什么，用 notifyAll() 释放锁

> ID：13301385
> 
> 赞同：1
> 
> 时间：2012-11-09T02:45:18.563
> 
> 标签：java, concurrency, monitor

使用 JConsole，当 2 个线程尝试修改此对象时，我似乎遇到了死锁情况。

```
package com.steven.concurrent.assignment2.memoryallocator;
/*
 * This seems to deadlock... cant see why though.
 */
public class MemAllocMonitor implements IMemoryAllocator {

private final int MAX_FREE = 50;
private int freePages = MAX_FREE;

//I think this would work, without even the need for sync blocks.....
// But only in the situaion where i would not have to check the bounds of the updates. If it was just modification, this would be
// fine....
//private volatile int freePages = 50;

public MemAllocMonitor(int pages){
    assert(pages < MAX_FREE);
    this.freePages = pages;
}

public MemAllocMonitor(){

}

@Override
public synchronized void request(int number) {
    if(number < 0)
        throw new IllegalArgumentException();

    while(freePages - number < 0) {
        System.out.println("No space....waiting...");
        try {
            this.wait();                
        } catch (Exception e) {}
    }

        freePages -= number;
        System.out.println("Requested : " + number + " remaining " + freePages);

    this.notifyAll();

}

@Override
public synchronized void release(int number) {
    if(number < 0)
        throw new IllegalArgumentException();

    while(freePages + number > MAX_FREE) {
        System.out.println("page table full....would be " + (number + freePages) );
        try {
            this.wait();                
        } catch (Exception e) {}
    }

    freePages += number;
    System.out.println("Released : " + number + " remaining " + freePages);

    this.notifyAll();

}

@Override
public int getFreePages() {
    return freePages;
}

} 
```

该对象通过一个实现可运行的简单包装器访问，并调用任一方法，如下所示。

```
package com.steven.concurrent.assignment2.memoryallocator;

import concurrent.RandomGenerator;
import concurrent.Time;

public class MemAllocRequester implements Runnable, MemoryAllocatorAction{

private IMemoryAllocator memoryAllocator;
private volatile boolean shutdown = false;;

public MemAllocRequester(IMemoryAllocator memAlloc){
    this.memoryAllocator = memAlloc;

}

@Override
public void run() {
    while(!shutdown){
        Time.delay(500);
        memoryAllocator.request(RandomGenerator.integer(0, 30));
    }

}

public void ShutDown(){
    this.shutdown = true;
}

} 
```

和

```
package com.steven.concurrent.assignment2.memoryallocator;

import concurrent.RandomGenerator;
import concurrent.Time;

public class MemAllocReleaser implements Runnable, MemoryAllocatorAction{

private IMemoryAllocator memoryAllocator;
private volatile boolean shutdown = false;;

public MemAllocReleaser(IMemoryAllocator memAlloc){
    this.memoryAllocator = memAlloc;

}

@Override
public void run() {
    while(!shutdown){
        Time.delay(500);
        memoryAllocator.release(RandomGenerator.integer(0, 30));
    }

}

public void ShutDown(){
    this.shutdown  = true;
} 
```

}

它是这样开始的......

```
package com.steven.concurrent.assignment2.memoryallocator;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class MemAllocMain {

public static void main(String[] args){

    ExecutorService executor = Executors.newFixedThreadPool(10);

    //IMemoryAllocator memoryAllocator = new MemAllocSemaphore();
    IMemoryAllocator memoryAllocator = new MemAllocMonitor();

    System.out.println("Starting app with " + memoryAllocator.getFreePages() + " pages...");

    Thread t1 = new Thread(new MemAllocRequester(memoryAllocator));
    Thread t2 = new Thread(new MemAllocReleaser(memoryAllocator));

    t1.setName("MEMORY REQUESTER £££££££££££££££££££");
    t2.setName("MEMORY RELEASER £££££££££££££££££££");

    executor.submit(t1);
    executor.submit(t2);

}

} 
```

我已经使用信号量类实现了一个解决方案，但由于某种原因，这会导致使用默认的 java 监视器解决方案出现问题。它运行大约 30 秒，然后两个线程都进入等待状态，即使应该强制执行锁定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:31:48.330

问题是两个线程同时达到上限和下限（分别为 50 和 0）。下面的两个示例都突出了死锁。

方案 1

1.  请求(29) - freePages=21
2.  request(30) - 低于 0 所以等待
3.  release(30) - 超过 50 所以等待：死锁

方案 2

1.  请求(29) - freePages=21
2.  release(30) - 超过 50 个，请等待
3.  request(30) - 低于 0 所以等待：死锁

我不确定作业问题的确切要求是什么，但您需要重新访问发布和请求方法。我看到了两个可行的解决方案：

1.  更改释放方法，使其仅释放最多 MAX_FREE 但仍会返回
2.  更改释放方法，使其可以释放请求数量的子集，notifyAll，重新进入等待，以便可以释放剩余数量。

此外，您有点错误地使用了 ExecutionService。ExecutionService 是创建线程的原因，因此您没有理由像您正在做的那样创建线程。

```
Thread t1 = new Thread(new MemAllocRequester(memoryAllocator));
Thread t2 = new Thread(new MemAllocReleaser(memoryAllocator)); 
```

您正在创建的线程实际上永远不会作为线程“启动”。它仍然为您工作，因为 ExecutionService 线程将调用您的 Thread.run()，而后者将调用 MemAlloc*.run()。即您的 t1 和 t2 线程只是传递 run() 调用并且不提供任何值。

您的 MemAllocRequester 和 MemAllocReleaser 是 Runnables，因此只需将它们直接传递给 ExecutionService。

```
executor.submit(new MemAllocRequester(memoryAllocator));
executor.submit(new MemAllocReleaser(memoryAllocator)); 
```

# java - Java 程序在 starthandshake() 语句中挂起

> ID：13301386
> 
> 赞同：3
> 
> 时间：2012-11-09T02:45:43.903
> 
> 标签：java, sockets, ssl, network-programming

我有一个 Java 程序，它试图启动与远程主机的 ssl 握手。以下代码与远程主机列表一起成功使用。但是我遇到了一个主机问题，程序在握手步骤中挂起。它不执行异常语句，也不报告任何错误。我确保端口 443 和 https 服务在远程主机上。显然，问题与远程主机有关。谁能解释一下？我该如何解决它以便我的程序继续？

以下代码是相关部分：

```
SSLSocketFactory factory = HttpsURLConnection.getDefaultSSLSocketFactory(); 
System.out.println("Creating a SSL Socket For "+hostName+" on port "+port); 
SSLSocket socket=null;

socket = (SSLSocket) factory.createSocket(hostName, port);
System.out.println("Socket created");

try {
     socket.startHandshake(); //handshake
    } catch (IOException e1) {
      System.out.println("Handshake error: "+e1.getMessage());
      socket.close(); }

System.out.println("Handshaking Complete"); 
```

# vb.net - 没有可用文件名时禁用 Gridview 中的下载链接

> ID：13301389
> 
> 赞同：1
> 
> 时间：2012-11-09T02:45:55.607
> 
> 标签：vb.net

我是新手，但需要一些帮助。我研究了这个请求，但只找到了一个响应，看起来可以完成，但我不确定如何在 vb 和 VS2010 中物理完成。

基本上，我有一个带有下载链接和文件名的 webgrid。如果没有文件名，我希望禁用下载链接，因为没有什么可下载的（显然）。

我找到的这个解决方案是 -[这里](https://stackoverflow.com/questions/6033249/disable-gridview-link-on-rows-where-field-is-not-null)- 但是，不要真正遵循它，特别是因为我也在 vb 中这样做。

对此的任何帮助都会很棒。

谢谢

我的网格视图代码。

```
<asp:GridView ID="SearchErrorGridView" runat="server" AutoGenerateColumns="False" AllowPaging="True"
        AllowSorting="True" DataKeyNames="FileName" DataSourceID="SearchHelpDeskErrorMessages"
        PageSize="10" CssClass="mGrid" PagerStyle-CssClass="pgr" AlternatingRowStyle-CssClass="alt"
        EmptyDataText="No Applicable Data" SelectedRowStyle-BackColor="#99CCFF">
        <AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
        <Columns>
            <asp:BoundField DataField="RequestID" HeaderText="RequestID" ReadOnly="True" SortExpression="RequestID" />
            <asp:BoundField DataField="Name" HeaderText="Client Name" SortExpression="Name" />
            <asp:BoundField DataField="EmpName" HeaderText="Employee Name" SortExpression="EmpName" />
            <asp:BoundField DataField="Module" HeaderText="Module" SortExpression="Module" />
            <asp:BoundField DataField="Category" HeaderText="Category" SortExpression="Category" />
            <asp:BoundField DataField="ErrorMessage" HeaderText="Error Message" SortExpression="Error Message" />
            <asp:BoundField DataField="ShortDescription" HeaderText="ShortDescription" SortExpression="ShortDescription" />
            <asp:BoundField DataField="Resolution" HeaderText="Resolution" SortExpression="Resolution" />
            <asp:BoundField DataField="DateOfCall" HeaderText="Date Of Call" SortExpression="DateOfCall" />
              <asp:BoundField DataField="FileName" HeaderText="File Name" />
              <asp:TemplateField HeaderText="File Download">
                                      <ItemTemplate>
                            <asp:LinkButton ID="lnkDownload" runat="server" Text="Download" OnClick="lnkDownload_Click"></asp:LinkButton>
                        </ItemTemplate>
                    </asp:TemplateField>
            <asp:ButtonField CommandName="Select" Text="Select" />
        </Columns>
        <EmptyDataRowStyle CssClass="mGrid" />
        <PagerStyle CssClass="pgr"></PagerStyle>
    </asp:GridView> 
```

# xml - 当我在使用 SAXTransformerHandler 时在 XML 中创建一个 newLine 字符时..我得到了一些特殊字符

> ID：13301391
> 
> 赞同：1
> 
> 时间：2012-11-09T02:46:05.227
> 
> 标签：xml, rhapsody

```
<Test_Node>test</Test_Node>
<description>Responsible Architect:&#xD;
**&#xD;
Joerg Cunz, CES for CSW&#xD;
Christian Sussmann, CES for DDS&#xD;
Dirk Froehlich CHS, for EPB&#xD;
&#xD;
Rationale:&#xD;
&#xD;
</description>** 
```

当我在 java 中使用 SAXTransformerFactory 在 xml 文件中生成上述`<description>` 节点时。我在每行的末尾发现了一些特殊字符（ ）。我可以知道如何避免它。生成 xml 文件的代码如下： 使用的 JAVA CODE*

```
 >SAXTransformerFactory tf = (SAXTransformerFactory)      SAXTransformerFactory.newInstance();
  xmlHandler = tf.newTransformerHandler();
  Transformer serializer = xmlHandler.getTransformer();
   serializer.setOutputProperty(OutputKeys.ENCODING, "ISO-8895-1"); 
   serializer.setOutputProperty(OutputKeys.INDENT, "yes");
  //serializer.setOutputProperties();
   xmlHandler.setResult(streamResult);
   xmlHandler.startDocument();** 
```

# visual-studio-2010 - VS2010启动崩溃，在安全模式下运行，所有插件都删除了，仍然崩溃

> ID：13301392
> 
> 赞同：0
> 
> 时间：2012-11-09T02:46:11.627
> 
> 标签：visual-studio-2010, crash, startup, safe-mode

突然我的 VS2010 在启动时崩溃了。我在这里关注了其他帖子，我删除了所有插件，它仍然崩溃。但是它以安全模式启动。在安全模式下还有什么被禁用 扩展窗口中没有什么？当我从日志模式开始时，日志中的最后一个操作似乎已正确完成。

还有什么想法吗？

```
<entry>
    <record>228</record>
    <time>2012/11/09 02:21:48.731</time>
    <type>Information</type>
    <source>VisualStudio</source>
    <description>Entering function CVsPackageInfo::HrInstantiatePackage</description>
    <guid>{ED8979BC-B02F-4DA9-A667-D3256C36220A}</guid>
</entry>
<entry>
    <record>229</record>
    <time>2012/11/09 02:21:48.735</time>
    <type>Information</type>
    <source>VisualStudio</source>
    <description>Begin package load [Visual Studio COM+ Library Manager Package]               </description>
<guid>{ED8979BC-B02F-4DA9-A667-D3256C36220A}</guid>
</entry>
<entry>
    <record>230</record>
    <time>2012/11/09 02:21:48.737</time>
    <type>Information</type>
    <source>VisualStudio</source>
    <description>Loading UI library</description>
    <guid>{ED8979BC-B02F-4DA9-A667-D3256C36220A}</guid>
    <path>C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\*\msenvui.dll</path>
</entry>
<entry>
    <record>231</record>
    <time>2012/11/09 02:21:48.739</time>
    <type>Information</type>
    <source>VisualStudio</source>
    <description>End package load [Visual Studio COM+ Library Manager Package]</description>
<guid>{ED8979BC-B02F-4DA9-A667-D3256C36220A}</guid>
</entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:19:10.807

在 VS 崩溃后立即打开事件查看器，并在 VS 崩溃后尽可能接近地查找发生的错误。事件应位于 Windows Logs\Applications 下。

我目前遇到了相同症状的问题，这是由 VS 中的堆栈溢出异常引起的。就我而言，我有 2 个连续错误。第一个是 .NET 运行时错误，显示失败的应用程序、框架版本和描述，说明这是堆栈溢出异常。第二个错误是应用程序错误，提供 devenv.exe (Visual Studio) 的特定错误代码和详细信息。

希望您的日志将提供更多有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T11:29:46.043

我早上刚刚因为 VS2010 启动时挂起的问题浪费了两个小时。我尝试修复安装，安全模式，其他各种东西，但都没有奏效。最后我运行了 devenv.exe /resetsettings，它很快解决了这个问题：http: [//msdn.microsoft.com/en-us/library/ms241273 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms241273(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T18:52:02.297

我正在使用 VS 2010 Ultimate，它在启动时一直在崩溃。（Windows 2008 Std SP2 32 位，GB Ram 虚拟机）

像你一样，VS 2010 在安全模式下启动时正在工作

C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE> **devEnv /SafeMode**

**在谷歌搜索之后，这就是我找到问题的方式。**

转到安装 VS 2010 的目录并启动 devEnv，如下所示：

C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE> **devEnv /Log**

这会生成一个**ActivityLog.xml**

C:\Users\ user_folder\AppData\Roaming\Microsoft\VisualStudio\10.0

我查看了 ActivityLog.xml，以下条目被标记为警告

```
176 

Warning Component assembly is new or has been updated
          C:\Users\rickey.tom\AppData\Local\Microsoft\VisualStudio\10.0\Extensions\Red Gate\.NET Reflector Visual Studio Extension\7.7.0.236\RedGate.Reflector.VsPackage.dll   

Microsoft.VisualStudio.CommonIDE.ExtensibilityHosting 
```

就我而言，出于某种原因，RedGate.Reflector 组件存在问题。

我去了文件夹并删除了（Red Gate）扩展

C:\Users\rickey.tom\AppData\Local\Microsoft\VisualStudio\10.0\Extensions

现在 VS 2010 Ultimate 启动了。

这只是在此组件的上下文中如何解决问题的示例。我希望这种方法可以帮助解决其他启动问题。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T07:34:25.840

我的问题通过以下方式解决：

1) 转到路径 C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE 2) 运行

## devenv.exe.config

我的问题解决了:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-31T12:19:16.937

我刚刚在 vs2010 上遇到了同样的问题，我尝试使用 File>Open>Website 打开项目，一切似乎都正常。原因可能是删除 *.sln 文件，我更喜欢将它们保存在解决方案文件夹中，而不是项目所在的同一文件夹中。希望它对某人有所帮助。

# android - android每24小时显示一次活动

> ID：13301393
> 
> 赞同：1
> 
> 时间：2012-11-09T02:46:19.333
> 
> 标签：android

在启动屏幕旁边的应用程序中，我需要显示一个名为“提示页面”的活动。此活动每天显示一次。当用户在 24 小时内再次打开应用程序时，它不应显示。

首先，我尝试根据当前日期显示，当第一次显示活动时，我将`store the current date in shared preference`在下次打开应用程序时`check`显示`current date and date in shared preference are equal or not`. 如果相等，我将不显示该活动，否则我将显示该活动。

但是这里有一个逻辑错误，如果用户在某个日期的晚上 11 点午夜首先打开应用程序，然后在 t 小时后再次打开应用程序，提示活动将显示，但我需要在 24 小时后显示它，如何能做到吗？请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:10:18.183

Android 应用程序可以使用 android.os.Handler 和 java.lang.Runnable 类运行周期性计时器。如下所示的简单示例。

**要点** 1\. 扩展android.app.Service 的服务类应该实现onBind、onCreate & onDestroy、生命周期方法。2.periodicTask 是Runnable 实现的一个实例，它运行一个线程。执行 run() 将打印消息“Awake”。3\. mHandler是Handler的一个实例，附加在periodicTask线程上。4\. 通过 postDelayed 通知 Handler 每分钟执行一次线程。5\. 当服务被销毁时，通过调用removeCallbacks 从Handler 中移除periodicTask 实例。

**示例代码**

```
public class PeriodicTimerService extends Service {
    private Handler mHandler = new Handler();
    public static final int ONE_DAY = 86400000;
    private Runnable periodicTask = new Runnable() {
        public void run() {
            Log.v("PeriodicTimerService","Awake");
            mHandler.postDelayed(periodicTask, ONE_DAY );
        }
    };

   @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        mHandler.postDelayed(periodicTask, ONE_DAY );
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mHandler.removeCallbacks(periodicTask);
        Toast.makeText(this, "Service onDestroy() ", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:44:01.760

我认为您需要这样的流程，请参阅 Jason Hessley's Answer 的实现

```
 SharedPreferences settings = getSharedPreferences("Preferences",
            MODE_PRIVATE);

    long timeFromPrefs = settings.getLong("time", System.currentTimeMillis());
    final long TIME_DIFF = 24*60*60*1000; 

    if ((System.currentTimeMillis()-timeFromPrefs)>TIME_DIFF) {
        // show Activity...........
        Editor editor = settings.edit();
        editor.putLong("time", System.currentTimeMillis());
        editor.commit();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:52:36.490

如您在问题中所述，保存上次在共享首选项中开始活动的时间。然后从当前时间减去最后一次。如果超过 24 小时，请出示您的提示。

# java - 为什么使用 EasyMock.createMock 创建模拟时 junit 测试失败？

> ID：13301395
> 
> 赞同：2
> 
> 时间：2012-11-09T02:46:23.373
> 
> 标签：java, unit-testing, sockets, junit, easymock

我在编写 junit 测试时遇到了 EasyMock 的意外行为。最后，我删除了几行代码，直到剩下一行create mock 看看发生了什么。

```
@Test
public void testSimple() throws Exception {
    Socket socket = EasyMock.createMock(Socket.class);
} 
```

这个junit测试产生错误：

```
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0.052 sec 
```

当我只有正常的实例化时，情况并非如此：

```
@Test
public void testSimple() throws Exception {
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
} 
```

这个junit测试似乎对此很满意：

```
[junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.047 sec 
```

我想知道是否有人可以消除这种歧义。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T04:01:12.453

您正在尝试模拟一个具体的类（Socket 不是接口），因此您可能需要做一些额外的工作。

假设您使用的是 3.X 版本的 EasyMock，您可能需要添加类模拟所需的其他库：

> cglib (2.2) 和 Objenesis (1.2) 必须在类路径中才能执行类模拟

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T04:05:54.557

如果要模拟具体类，则需要使用 EasyMock 类扩展

[http://easymock.org/EasyMock2_2_2_ClassExtension_Documentation.html](http://easymock.org/EasyMock2_2_2_ClassExtension_Documentation.html)

链接显示如何。 [http://helpdesk.objects.com.au/java/how-do-i-mock-a-concrete-class-using-easymock](http://helpdesk.objects.com.au/java/how-do-i-mock-a-concrete-class-using-easymock)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-02T09:08:51.283

As of EasyMock 3.0 (the current version is 3.2), you can mock concrete classes so you would not get this error now.

# ruby-on-rails-3 - Mixpanel distinct_id 使用 Ruby 和 Javascript 库

> ID：13301396
> 
> 赞同：2
> 
> 时间：2012-11-09T02:46:36.040
> 
> 标签：ruby-on-rails-3, mixpanel

我不明白如何正确使用 distinct_id。我正在尝试使用 Rails 创建一个 Mixpanel 漏斗。目前我正在使用 distinct_id 执行此操作，因此 mixpanel 趋势非常准确，但依赖于唯一用户数的漏斗似乎不起作用。我应该如何使用 distinct_id 属性来解决这个问题？

我同时使用 Javascript 库和 Ruby 库。

漏斗步骤是：

1.) 用户受邀 2.) 受邀用户收到邀请电子邮件并点击邀请链接 3.) 页面加载 4.) 打开注册模块 5.) 创建帐户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:50:44.757

仅从 Ruby 发送数据可能最简单（顺便问一下，您使用的是哪个 Ruby 库？）因为链接和帐户创建必须在服务器端发送。

您必须选择一个 distinct_id 来识别整个过程中的用户。最简单的方法是只使用受邀者的电子邮件地址。这还有一个额外的好处，就是能够使用该电子邮件跟踪其他事件和“人员”数据，并将其与正确的用户相关联。

唯一棘手的部分是第 2 步。您需要生成一个链接，该链接看起来像 `http://api.mixpanel.com/track/?data=...&ip=1&redirect=http://www.your-site.com/invitation` 放在电子邮件中作为邀请链接。

有关重定向参数的更多信息，请参阅[文档](https://mixpanel.com/docs/api-documentation/http-specification-insert-data)。

# ruby - 如何对ruby多维数组中的子数组执行功能

> ID：13301397
> 
> 赞同：0
> 
> 时间：2012-11-09T02:46:38.333
> 
> 标签：ruby, multidimensional-array

我有一个像这样的红宝石多维数组：

```
a = [[1, 2, 3], [4, 5, 6], [7, 8, 9]] 
```

如何将“1”添加到每个元素。例如，我想得到这样的结果：

```
a = [[2, 3, 4], [5, 6, 7], [8, 9, 10]] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:51:20.753

可能有一个更聪明的班轮，但这很清楚。

```
a.map { |ar| ar.map { |e| e + 1 } } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T03:10:36.837

只是为了好玩 ：

```
class Array
  def increment
    map(&:next)
  end
end

#Tada!
a.map(&:increment) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T08:23:55.230

```
a.map { |xs| xs.map(&:succ) }
#=> [[2, 3, 4], [5, 6, 7], [8, 9, 10]] 
```

# ldap - 如何使用openLdap？

> ID：13301401
> 
> 赞同：0
> 
> 时间：2012-11-09T02:47:02.483
> 
> 标签：ldap, openldap

很抱歉，但我不确定这是否是正确的地方。但是有没有人可以教我如何使用 OpenLdap 的分步指南？没有任何 GUI，我不熟悉它。我正在尝试在那里创建一个用户。提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:59:14.763

使用 LDAP 浏览器。有许多免费的可用，例如 Userbooster Light、JXplorer、...

# alassetslibrary - 从 NSURL 获取 NSData

> ID：13301404
> 
> 赞同：0
> 
> 时间：2012-11-09T02:47:15.867
> 
> 标签：alassetslibrary

我正在尝试将我的应用中的照片上传到网络服务中。

我试图创建的流程如下：

> 1.  用户用相机拍照
> 2.  照片保存到自定义相册下的相机胶卷
> 3.  已保存照片的 URL 已提供给我的商店
> 4.  商店尝试将照片上传到 Web 服务。

我正在尝试使用`NSData *data = [NSData dataWithContentsOfURL:[item assetURL]]`where item 是包含相关 URL 的模型。但是，即使它产生了 URL，当我记录它时，这条线也不会产生数据：`"assets-library://asset/asset.PNG?id=28DBC0AC-21FF-4560-A9D6-5F4BCA190BDB&ext=PNG"`

代码片段如下：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    [self dismissViewControllerAnimated:YES completion:^(void){

        [library writeImageToSavedPhotosAlbum:image.CGImage orientation:image.imageOrientation completionBlock:^(NSURL* assetURL, NSError* error) {

            BCard *card = [[BCard alloc]init];

            //error handling
            if (error!=nil) {
                NSLog(@"[ERROR] - %@",error);
                return;
            }

            //add the asset to the custom photo album
            [library addAssetURL: assetURL
                         toAlbum:@"Business Cards"
             withCompletionBlock:^(NSError *error) {
                 if (error!=nil) {
                     NSLog(@"Custom Album Error: %@", [error description]);
                 }
             }];

            [card setAssetURL:assetURL];

            [[BCardStore sharedStore]addToQueue:card];
            int index = [[[BCardStore sharedStore]getQueue]count]-1;

            [[BCardStore sharedStore]uploadItemAtIndex:index withProgressBlock:nil withExitBlock:nil];

        }];
    }];

} 
```

和

```
-(void)uploadItemAtIndex:(NSUInteger)index withProgressBlock:(progressBlock)pBlock withExitBlock:(exitBlock)eBlock
{
    BCard *item = [uploadQueue objectAtIndex:index];
    NSURL *url = [NSURL URLWithString:@"http://192.168.0.116:8080"];
    NSData *data = [NSData dataWithContentsOfURL:[item assetURL]];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:url];
    numberedName = numberedName +1;
    NSString *name = [NSString stringWithFormat:@"%d",numberedName];

    NSLog(@"%@",[item assetURL]);

//upload data using AFNetworking here
} 
```

该片段`[library addAssetUrl:NSUrl toAlbum:NSString withCompletionBlock:^(NSError *error)]`来自我在[这里](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)找到的类别。

我真的在这里得到了正确的 URL 还是我使用`dataWithContentsOfURL`不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:16:19.890

唯一的方法是您可以使用 ALAsset URL 从 Photo-Library 检索 UIImage 并转换为 NSData。

**添加 ALAssetLibrary**

**导入 ALAssetLibrary 头文件**

```
-(void)uploadItemAtIndex:(NSUInteger)index 
       withProgressBlock:(progressBlock)pBlock 
           withExitBlock:(exitBlock)eBlock
{  

    ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
    {
        ALAssetRepresentation *rep;
        if([myasset defaultRepresentation] == nil) {
            return;
        } else {
            rep = [myasset defaultRepresentation];
        }
        CGImageRef iref = [rep fullResolutionImage];

        dispatch_sync(dispatch_get_main_queue(), ^{

            UIImage *myImage = [UIImage imageWithCGImage:iref];            
            NSData *data = //convert the myImage to NSData

            BCard *item = [uploadQueue objectAtIndex:index];
            NSURL *url = [NSURL URLWithString:@"http://192.168.0.116:8080"];  
            AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:url];
            numberedName = numberedName +1;
            NSString *name = [NSString stringWithFormat:@"%d",numberedName];

            //upload data using AFNetworking here

        });//end block

    };
    ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
    {
        NSLog(@"Cant get image - %@",[myerror localizedDescription]);
    };

    NSURL *asseturl = 
        [NSURL URLWithString:[self.photoPath objectAtIndex:[arrayIndex intValue] ]];
    //using ARC , you have to declare ALAssetsLibrary as member variable 
    ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init]; 

    [assetslibrary assetForURL:assetURL 
                   resultBlock:resultblock
                  failureBlock:failureblock]; 

} 
```

# r - 计算向量中第一个元素的相对差异

> ID：13301406
> 
> 赞同：1
> 
> 时间：2012-11-08T11:54:33.663
> 
> 标签：r

我有许多以下形式的向量：

```
vector1 <- c(42.000, 40.781, 40.625, 40.312, 40.375, 40.344, 39.531, 39.875, 40.344, 39.500, 39.125, 39.062, 39.656)

vector2 <- c(24.625, 25.625, 24.844, 25.250, 26.250, 26.344, 26.250, 26.375, 26.250, 25.812, 27.000, 26.469, 26.781) 
```

我想把它们放在一个共同的基础上，从 100 开始作为第一个值，并且对于每个新值，取第一个值和新值之间的差异。

我使用了以下代码：

```
i=13 

for (1 in 1:13) {

vector1[i]=(vector1[i]-vector1[i-1]) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:23:39.777

目前尚不清楚，您想要实现什么。“从 100 作为第一个值开始”是什么意思？

这给出了所有元素与第一个元素的差异：

```
vector1 <- c(42.000, 40.781, 40.625, 40.312)
vector1-vector1[1]
#[1]  0.000 -1.219 -1.375 -1.688 
```

这给出了第一个元素除以第一个元素的差异：

```
(vector1-vector1[1])/vector1[1]
#[1]  0.00000000 -0.02902381 -0.03273810 -0.04019048 
```

这给出了后续元素之间的差异：

```
diff(vector1)
#[1] -1.219 -0.156 -0.313 
```

# mysql - 这是在 datagridview 中通过 CellEndEdit 更新数据库的唯一方法吗？

> ID：13301409
> 
> 赞同：2
> 
> 时间：2012-11-09T02:47:39.683
> 
> 标签：mysql, vb.net, winforms, visual-studio-2010, datagridview

在使用 datagridview 几天，也许几周后，我开始真正开始自己和这里的人学习，我感谢大家，但同时我也开始感到困惑。`MySQL Database`我的问题是，`CellEndEdit`除了这段代码，还有其他方法可以更新吗？

```
 Me.Validate()
  Me.OutgoingdeliveriesBindingSource.EndEdit()
  Me.OutgoingdeliveriesTableAdapter.Update(Me.OutgoingDeliveriesDataSet1.outgoingdeliveries) 
```

任何建议或提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T15:05:20.090

下面是我使用的一个，可以修改为在您的实例中使用。这实际上似乎在我使用它时效果很好。

```
Private Sub FinancialBindingNavigatorSaveItem_Click(sender As System.Object, e As System.EventArgs) Handles FinancialBindingNavigatorSaveItem.Click
  FinancialDataGridView.CommitEdit(DataGridViewDataErrorContexts.CurrentCellChange)
  db.SaveChanges()
End Sub 
```

# c# - 如何在代码隐藏中操作 Site.Master 文件中的文本

> ID：13301410
> 
> 赞同：2
> 
> 时间：2012-11-09T02:47:40.187
> 
> 标签：c#, asp.net, login, code-behind, master-pages

我想在我的 Site.Master 页面中对用户名执行一些字符串操作，然后再将其呈现在页面上。

这是当前代码的样子：

```
<div class="login">
    <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
         <LoggedInTemplate>
             Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>
         </LoggedInTemplate>
    </asp:LoginView>
</div> 
```

出于某种原因，我不能引用 HeadLoginName.Text 或类似的东西。我在这里想念什么？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:40:12.993

**可能重复：**

[在 loginview 中查找控件](https://stackoverflow.com/questions/7769554/find-control-in-loginview)

需要先在“HeadLoginView”容器中找到“HeadLoginName”控件，然后指定其 Text 属性（有关详细信息，请参阅[Find Control with in LoginView 控件](http://weblogs.asp.net/sukumarraju/archive/2011/01/31/find-control-with-in-loginview-control.aspx)博客文章）：

```
LoginName ln = (LoginName)HeadLoginView.FindControl("HeadLoginName");
ln.Text = ...; 
```

# django - 使用 sqlite3 设置 Django？

> ID：13301419
> 
> 赞同：9
> 
> 时间：2012-11-09T02:48:49.933
> 
> 标签：django

我正在尝试按照 django 网站上的演练，我下载了 sqlite 并将其保存在`C:\Windows\System32`文件夹中。当我编辑`settings.py`文件时，我为该`Name`字段添加了什么？我必须建立一个数据库吗？django 文献说 API 应该为 sqlite 处理这个问题。当我运行时，`python manage.py syncdb`我只会收到一堆错误。我究竟做错了什么？

```
 Jason & Casey@SUPERBEAST ~/Desktop/mysite
$ python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "c:\Python27\lib\site-packages\django\core\management\__init__.py", line
443, in execute_from_command_line
    utility.execute()
  File "c:\Python27\lib\site-packages\django\core\management\__init__.py", line
382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "c:\Python27\lib\site-packages\django\core\management\__init__.py", line
252, in fetch_command
    app_name = get_commands()[subcommand]
  File "c:\Python27\lib\site-packages\django\core\management\__init__.py", line
101, in get_commands
    apps = settings.INSTALLED_APPS
  File "c:\Python27\lib\site-packages\django\utils\functional.py", line 184, in
inner
    self._setup()
  File "c:\Python27\lib\site-packages\django\conf\__init__.py", line 42, in _set
up
    self._wrapped = Settings(settings_module)
  File "c:\Python27\lib\site-packages\django\conf\__init__.py", line 93, in __in
it__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File "c:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in im
port_module
    __import__(name)
  File "c:\Users\Jason & Casey\Desktop\mysite\mysite\settings.py", line 21
    }
    ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T03:07:32.767

我没有在 windows 下尝试过 django，但 python 2.7 肯定自带 sqlite 开箱即用。

如何设置数据库？

在文件的顶部：

```
import os 
```

然后：

```
PROJECT_DIR = os.path.abspath(os.path.dirname(__file__))
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(PROJECT_DIR, 'yourdatabasename.db'),
    }
} 
```

最后一个 syncdb 应该可以解决问题。

如果它不起作用，介意粘贴回溯吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T04:17:06.753

问题是：

```
 File "c:\Users\Jason & Casey\Desktop\mysite\mysite\settings.py", line 21
    }
    ^
SyntaxError: invalid syntax 
```

检查括号或大括号周围没有正确关闭的语法`DATABASES`。

# android - android不同的区间变量

> ID：13301420
> 
> 赞同：0
> 
> 时间：2012-11-09T02:48:58.017
> 
> 标签：android, variables, broadcast

如何获取广播方法变量？

广播中只有一个变量。这是我的部分代码：

```
public void onCreate(Bundle savedInstanceState) {  
       super.onCreate(savedInstanceState);  
       setContentView(R.layout.main);  
       //I want to use a in here like textview.settext(a);
             IntentFilter intent = new IntentFilter();  
             registerReceiver(searchDevices, intent);
     }  
     private BroadcastReceiver searchDevices = new BroadcastReceiver() {      
     public void onReceive(Context context,  Intent intent) {  
               int a=0;
      }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:56:31.097

您可以将可打包变量放入 Intent 实例：

```
Intent i = new intent();
i.putExtra("a", 0); 
```

然后在您的接收器代码中，您将获得值：

```
int a = i.getIntExtra("a"); 
```

[该文档可能会有所帮助。](http://developer.android.com/training/sharing/index.html)

# compiler-construction - Yacc 和 Lex 错误编译

> ID：13301424
> 
> 赞同：0
> 
> 时间：2012-11-09T02:49:17.157
> 
> 标签：compiler-construction, yacc, lex, flex-lexer

我正在尝试编译并执行以下简单程序：

计算器.y

```
%{
    #include <stdio.h>
    int yylex(void);
    void yyerror(char *);
%}

%token INTEGER

%%

program:
    program expr '\n'       { printf("%d\n", $2); }
    |
    ;

expr:
    INTEGER                 { $$ = $1; }
    | expr '+' expr         { $$ = $1 + $3; }
    | expr '-' expr         { $$ = $1 - $3; }

%%

void yyerror(char *s) {
    fprintf(stderr, "%s\n", s);
}

int main(void) {
    yyparse();
    return 0;
} 
```

计算器.l

```
%{
    #include <stdlib.h>
    void yyerror(char *);
    #include "y.tab.h"
%}

%%

[0-9]+      {
                yylval = atoi(yytext);
                return INTEGER;
            }

[-+\n]      return *yytext;
[ \t]       ; /* skip whitespace */
.           yyerror("invalid character");

%%

int yywrap(void) {
    return 1;
} 
```

所以我用命令编译：

```
yacc -d calculator.y -> it generates "y.tab.c and y.tab.h"

lex calculator.l -> it generates "lex.yy.c" 
```

之后，我尝试将文件链接并编译：

```
cc lex.yy.c y.tab.h -ocalc 
```

但我有以下错误：

```
$ cc lex.yy.c y.tab.h -ocalc /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
0 has invalid symbol index 11 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
1 has invalid symbol index 12 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
2 has invalid symbol index 2 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
3 has invalid symbol index 2 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
4 has invalid symbol index 11 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
5 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
6 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
7 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
8 has invalid symbol index 2 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
9 has invalid symbol index 2 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
10 has invalid symbol index 12 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
11 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
12 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
13 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
14 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
15 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
16 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
17 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
18 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
19 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
20 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
21 has invalid symbol index 13 /usr/bin/ld:
/usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation
22 has invalid symbol index 21
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crt1.o: In
function `_start': (.text+0x18): undefined reference to `main'
/tmp/ccvaf6Nh.o: In function `yylex': lex.yy.c:(.text+0x1df):
undefined reference to `yylval' lex.yy.c:(.text+0x205): undefined
reference to `yyerror' collect2: ld returned 1 exit status 
```

任何人都知道如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:53:28.143

这看起来像是您的 C 库中的损坏。重新安装编译器。

您应该编译 y.tab.c，而不是 y.tab.h。

# c++ - 令牌粘贴和 __LINE__

> ID：13301428
> 
> 赞同：4
> 
> 时间：2012-11-09T02:49:36.560
> 
> 标签：c++, file, macros

我正在编写一个简单的宏来显示 TRACE 信息。

这就是我正在使用的，

```
#ifdef __DEBUG__
#define TRACE  { PrintErrorMsg("Trace exception at " __FILE__  "LineNo:"##(__LINE__) "Function: " __FUNCTION__ " " );}
#else 
#define TRACE 
#endif 
```

这适用于**FILE**，但似乎不适用于**LINE**，知道我该如何处理。我也已经尝试过穿线运算符。如下所示。

```
#ifdef __DEBUG__
#define TRACE  { PrintErrorMsg("Trace exception at " __FILE__  "LineNo:"#(__LINE__) "Function: " __FUNCTION__ " " );}
#else 
#define TRACE 
#endif 
```

并且没有 parms 和 double parms ，前 -`__LINE__`或`((__LINE__))` 任何想法我该如何处理这个问题？

我想出了这个，

```
#ifdef __DEBUG__
#define ERROR_MSG_BUF_SIZE 1024
#define TRACE  { char * error_msg_buffer = new char[ERROR_MSG_BUF_SIZE]; \
                 sprintf(error_msg_buffer,"Trace Exception at file: %s ,Line : %d , Function %s \n",__FILE__,__LINE__,__FUNCTION__);\
PrintErrorMsg(error_msg_buffer );\
delete[] error_msg_buffer;}
#else 
#define TRACE 
```

但我想在不使用 sprintf 的情况下做到这一点，只需通过字符串和令牌粘贴即可。任何的想法？

```
#endif 
```

- 提前致谢 -

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T03:19:14.857

当您尝试使用 对某些内容进行字符串化时`#x`，它`x`必须是一个宏参数：

```
#define FOO #__LINE__ /* this is not okay */
#define BAR(x) #x     /* this is okay */ 
```

但是你不能简单地说`BAR(__LINE__)`，因为这会将标记传递给`__LINE__`，`BAR`在那里它会立即变成一个没有扩展的字符串（这是设计使然），给出`"__LINE__"`. 标记粘贴运算符也会发生同样的事情`##`：它们的操作数的扩展永远不会发生。

解决方案是添加间接性。你应该总是在你的代码库中的某个地方有这些：

```
#define STRINGIZE(x) STRINGIZE_SIMPLE(x)
#define STRINGIZE_SIMPLE(x) #x

#define CONCAT(first, second) CONCAT_SIMPLE(first, second)
#define CONCAT_SIMPLE(first, second) first ## second 
```

现在`STRINGIZE(__LINE__)`转向`STRINGIZE_SIMPLE(__LINE__)`which 完全扩展为 (例如) `#123`，结果为“123”。呸！`STRINGIZE_SIMPLE`如果我想要原始行为，我会离开。所以你的代码会是这样的：

```
#include <iostream>

#define STRINGIZE(x) STRINGIZE_SIMPLE(x)
#define STRINGIZE_SIMPLE(x) #x

#define TRACE()                                                 \
        PrintErrorMsg("Trace exception in " __FILE__            \
                      " at line number " STRINGIZE(__LINE__)    \
                      " in function " __FUNCTION__ ".")

void PrintErrorMsg(const char* str)
{
    std::cout << str << std::endl;
}

int main()
{
    TRACE();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T03:14:56.920

不幸的是，你需要这种愚蠢。

```
#include <stdio.h>

#define TRACE2(f,l) printf("I am at file: " f " and line: " #l "\n")
#define TRACE1(f,l) TRACE2(f,l)
#define TRACE() TRACE1(__FILE__, __LINE__)

int main(void)
{
    TRACE();
    TRACE();
} 
```

> 我在文件：test.cpp 和行：9
> 我在文件：test.cpp 和行：10

# android - android应用程序活动在黑莓剧本上切换

> ID：13301429
> 
> 赞同：1
> 
> 时间：2012-11-09T02:49:49.490
> 
> 标签：android, mobile, blackberry-playbook

我有一个成功移植到黑莓剧本的安卓应用程序。我将我的剧本更新到 OS 2.1，突然间，当移植的 android 应用程序切换/启动一个新活动时，BB OS 的“多任务处理”窗口出现，显示剧本上“运行”的所有其他 android 应用程序。所以我必须再次点击我的应用程序窗口才能使其全屏显示。我的应用程序启动的每个活动都会发生这种情况，并且我的应用程序总共有大约 8 个活动......我需要在我的应用程序中更改什么以阻止这种情况在剧本上发生吗？谢谢

# iphone - LongPress 手势不适用于 iOS 5 和 iOS 5.1（但适用于 iOS 6）

> ID：13301434
> 
> 赞同：0
> 
> 时间：2012-11-09T02:51:01.090
> 
> 标签：iphone, ios, ipad, gestures

以下代码不适用于 iOS 5 和 iOS 5.1（但适用于 iOS 6）：

```
- (void)viewDidLoad {
    ...
    UILongPressGestureRecognizer* gesture = [[[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)] autorelease];
    [myWebView addGestureRecognizer:gesture];
}

- (void)handleLongPress:(UIGestureRecognizer*)gestureRecognizer {
  ...
} 
```

如何解决问题？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:01:10.873

正确的代码：

```
- (void)viewDidLoad {
    UILongPressGestureRecognizer* gesture = [[[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)] autorelease];
    gesture.delegate = self;
    [myWebView addGestureRecognizer:gesture];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:01:10.480

试试这个代码..

```
 UILongPressGestureRecognizer *longpressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressHandler:)];
    longpressGesture.minimumPressDuration = 5;
    [longpressGesture setDelegate:self];
    [myWebView addGestureRecognizer:longpressGesture];
    [longpressGesture release];

    - (void)longPressHandler:(UILongPressGestureRecognizer *)gestureRecognizer {
        NSLog(@"longPressHandler");
    } 
```

# r - 如何检查值是否为数字？

> ID：13301437
> 
> 赞同：4
> 
> 时间：2012-11-09T02:51:24.247
> 
> 标签：r, regex, decimal, numeric

有人可以帮我修改下面的函数以检查数字是否为数字吗？

```
# handy function that checks if something is numeric
check.numeric <- function(N){
  !length(grep("[^[:digit:]]", as.character(N)))
}

check.numeric(3243)
#TRUE
check.numeric("sdds")
#FALSE
check.numeric(3.14)
#FALSE 
```

我想在像 3.14 这样的小数时`check.numeric()`返回。`TRUE`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T04:34:22.803

您可以使用`is.finite`来测试该值是否为数字和非 NA。这适用于数字、整数和复数值（如果实部/虚部都是有限的）。

```
> is.finite(NA)
[1] FALSE
> is.finite(NaN)
[1] FALSE
> is.finite(Inf)
[1] FALSE
> is.finite(1L)
[1] TRUE
> is.finite(1.0)
[1] TRUE
> is.finite("A")
[1] FALSE
> is.finite(pi)
[1] TRUE
> is.finite(1+0i)
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-09T03:07:08.670

听起来你想要这样的功能：

```
f <- function(x) is.numeric(x) & !is.na(x) 
```

# javascript - Javascript For循环减慢进度事件侦听器触发

> ID：13301440
> 
> 赞同：1
> 
> 时间：2012-11-09T02:51:47.913
> 
> 标签：javascript, for-loop, upload, progress, xmlhttprequest-level2

我正在尝试根据上传进度更改元素背景颜色。我遇到的问题是，与触发的进度事件侦听器相比，for 循环速度较慢。对此我能做些什么吗？

```
var colors = [
    "#fff2f2",
"#ffe6e6",
"#ffd9d9",
"#ffcccc",
"#ffbfbf",
"#ffb3b3",
"#ff9999",
"#ff7373",
"#ff8080",
"#ff5959",
"#ff4d4d",
"#ff4040",
"#ff3333",
"#ff2626",
"#ff1919",
"#ff0d0d",
"#ff0000",
]

var first = 0;
var last = 5;
var xhr = new XMLHttpRequest();

xhr.upload.addEventListener("progress", updateProgress, false);

var foo = document.getElementById("uploadScreen");
var form = document.getElementById("uploadForm");
var percentComplete;

xhr.open("POST", "php/upload.php", true);
xhr.send(new FormData(form));

function updateProgress(event) {
    if (event.lengthComputable) {
        percentComplete = Math.round(event.loaded / event.total * 100);
        for (i=0; i < colors.length; i++) {
            if (percentComplete > first && percentComplete < last ) {
                console.log(foo.style.backgroundColor = colors[i]);
                break;
            }
        }
        first = first +5;
        last = last +5;
    } else {
        alert("no no");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:04:42.667

与其将整数作为百分比，不如将其保留为 0 到 1 之间的值。然后将其乘以数组的长度即可获得正确的索引。

```
var percentComplete = event.loaded / event.total;
var index = Math.round(percentComplete * (colors.length - 1)); // Subtract 1 to account for zero based indexing
foo.style.backgroundColor = colors[index]; 
```

[http://jsfiddle.net/h6bsU/](http://jsfiddle.net/h6bsU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:10:25.840

```
var colors = [
    "#fff2f2",
"#ffe6e6",
"#ffd9d9",
"#ffcccc",
"#ffbfbf",
"#ffb3b3",
"#ff9999",
"#ff7373",
"#ff8080",
"#ff5959",
"#ff4d4d",
"#ff4040",
"#ff3333",
"#ff2626",
"#ff1919",
"#ff0d0d",
"#ff0000",
]

var first = 0;
var last = 5;
var xhr = new XMLHttpRequest();

xhr.upload.addEventListener("progress", updateProgress, false);

var foo = document.getElementById("uploadScreen");
var form = document.getElementById("uploadForm");
var percentComplete;

xhr.open("POST", "php/upload.php", true);
xhr.send(new FormData(form));

function updateProgress(event) {
    if (event.lengthComputable) {
        percentComplete = Math.round(event.loaded / event.total * 100);
        var i=praseInt(percentComplete/5);
        console.log(foo.style.backgroundColor = colors[i]);
    } else {
        alert("no no");
    }
} 
```

我认为在这种情况下不需要使用 for 循环。

# c# - SQL Select 语句无法正常工作

> ID：13301445
> 
> 赞同：0
> 
> 时间：2012-11-09T02:52:53.550
> 
> 标签：c#, sql-server, ado.net

我在 SQL 查询中遇到了一些问题。我尝试在其他选择查询中使用选择结果来获取结果，但它不起作用。谁能指导我。以下是我在 WCF 中使用的代码。非常感谢。

```
SqlCommand command = new SqlCommand("select tName from dbo.tblBankBranch where nBankID=(select nID from dbo.tblBankBranch where tState='" + tBank + "')", con);
SqlDataReader reader = command.ExecuteReader(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:08:09.073

我猜你实际上得到了一个在某处被捕获并忽略的错误。SQL 语句看起来很可疑。

```
select tName
from dbo.tblBankBranch
where nBankID=(select nID from dbo.tblBankBranch where tState='{tbank}') 
```

只有当状态中有一个分支时它才会起作用，否则你会得到一个错误。

尝试将其编写为 JOIN。忽略这一点，为什么 tblBankBranch 在那里两次？

```
select tName
from dbo.tblBankBranch
where tState='{tbank}' 
```

如果字段 nBankID 和 nID 在**单个**表中确实不同，并且您确实希望以这种方式链接它们，那么 JOIN 形式是

```
select A.tName
  from dbo.tblBankBranch A
  join dbo.tblBankBranch B
    on A.nBankID=b.nID AND b.tState='{tbank}' 
```

我将把它留给你来扁平化在 C# 中使用的语句。

# php - 如何使用 html5 webstorage 保存页面？

> ID：13301449
> 
> 赞同：0
> 
> 时间：2012-11-09T02:54:02.617
> 
> 标签：php, mysql, ajax, cookies

我有以下页面，它适用于 MySQL、PHP 和 AJAX，如果我单击一个 NAME (id="orderN") 它会给我返回咨询的结果，它对名称进行降序或升序排序。如果您刷新（F5）页面，有什么方法可以将结果保存为关闭之前的状态（ASC 或 DESC）？我听说过 cookie 和 HTML5 Storage，这比 cookie 更好。如果你能用他们中的任何一个做到这一点，请告诉我

```
<html>
<head>
    <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
</head>
<body>
    <table>
        <tr><th><a href="#" id="orderN">Name</a></th></tr> 
    </table>
    <?
    $Conn = mysql_pconnect('localhost', 'root', '1234') or die('Error"');
    mysql_select_db('DATA');
    $consult = "SELECT NAME
            FROM STUDENTS";
    $query = mysql_query($consult);
    echo "<div id='DivConsult'><table>";
    while ($table = mysql_fetch_assoc($query)) {
        echo "<tr>";
        echo "<td>" . $table['NAME'] . "</td>";
        echo "</tr>  ";}
    echo "</table>";
    ?>
    <script>
        $(document).ready(function() {
            var contName = 0;
            $('#orderN').click(function() {
                contName++;
                if (contName % 2 !== 0) {
                    $.ajax({
                        type: "POST",
                        url: "reOrder.php",
                        data: "tipOrder=ASC",
                        success: function(data) {
                            $('#DivConsult').html(data);
                        }});
                }
                if (contName % 2 == 0) {
                    $.ajax({
                        type: "POST",
                        url: "reOrder.php",
                        data: "tipOrder=DESC",
                        success: function(data) {
                            //alert(data);
                            $('#DivConsult').html(data);
                        }});
                }
            });
        });
    </script>
</body> 
```

**阿贾克斯：**

```
<?php
$Conn = mysql_pconnect('localhost', 'root', '1234') or die('Error"');
mysql_select_db('DATA');

$consult = "";

if (isset($_POST['tipOrder'])) {

 if ($_POST['tipOrder'] == 'ASC') {
    $consult = "SELECT NOMBRE
            FROM STUDENTS ORDER BY NAME ASC";
}
if ($_POST['tipOrder'] == 'DESC') {
    $consult = "SELECT NAME
            FROM STUDENTS ORDER BY NAME DESC";
}}`
  $query = mysql_query($consult);

echo "<table>";

while ($table = mysql_fetch_assoc($query)) {
    echo "<tr>";
    echo "<td>" . $table['Name'] . "</td>";
    echo "</tr>  ";}

echo "</table>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:11:56.287

您可以这样做，但只需将容器（任何 div、span 甚至正文）保存为

```
localStorage.variableName = document.getElementById("id"); 
```

然后你可以通过使用访问

```
if(Storage!=="undefined" && localStorage.variableName!=null) 
```

现在您可以将值设置为

```
container.val = localStorage.variableName 
```

# c# - 将身份验证密码安全地存储在客户端上？

> ID：13301454
> 
> 赞同：0
> 
> 时间：2012-11-09T02:54:23.227
> 
> 标签：c#, security, hash, https, client

假设我们有一个客户端和一个服务器。如果客户端想要“连接”到服务器，它需要提供一个密码（明文，通过 https 传输）。如果客户要记住密码，就会打开很多漏洞。这些是可以避免的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:58:44.610

我假设您的意思是服务器是否要记住密码。客户记住密码是方便性和安全性之间的直接权衡，这里没有太多讨论。

通过“哈希”运行密码。这本质上是一个单向过程——您可以从密码获取哈希，但不能从哈希获取密码。在服务器端，您只存储哈希。当有人想要进行身份验证时，获取他们的密码，对其进行哈希处理，并将其与您存储的哈希值进行比较。您不必以这种方式以明文形式存储密码。

这是非常基本的密码处理内容。有一些微妙之处要让它正确。这里有一些关于 ac# 实现的讨论：[Hash and salt passwords in C#](https://stackoverflow.com/questions/2138429/hash-and-salt-passwords-in-c-sharp)

如果您的意思是客户记住密码，您仍然不需要存储密码本身。与服务器进行身份验证并让它返回一个在特定时间后过期的令牌。此令牌在有效时可用作登录凭据。您的客户只需要存储令牌。

# .net - 在 64 位计算机上定位“AnyCPU”时出现 BadImageFormatException

> ID：13301461
> 
> 赞同：0
> 
> 时间：2012-11-09T02:55:20.850
> 
> 标签：.net, visual-studio, 64-bit, badimageformatexception, anycpu

当我将源代码转移到`Win7 64-bit`机器上`BadImageFormatException`时，我会在尝试编译和运行解决方案时得到一个 target `AnyCPU`。

这不会发生在`XP 32-bit`.

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:26:07.727

It can typically occur when you changed the target framework of .csproj and reverted it back to what you started with.

Make sure 1 if supportedRuntime version="a different runtime from cs project target" under startup tag in app.config.

Make sure 2 That also means checking other autogenerated or other files in may be properties folder to see if there is no more runtime mismatch between these files and one that is defined in .csproj file.

These might just save you lot of time before you start trying different things with project properties to overcome the error.

# performance - AS3 中的不可见、可交互对象——如何编写高效的不可见性代码？

> ID：13301462
> 
> 赞同：0
> 
> 时间：2012-11-09T02:55:21.010
> 
> 标签：performance, actionscript-3, optimization, rendering, alpha

阿尔法隐形。

我目前将某些图像上的圆形区域定义为“热点”。例如，我可以在屏幕上显示我的照片并在我的头上覆盖一个圆圈。为了实时检查与我的头部的交互，我将返回Overlaps 并对与圆圈重叠的所有对象进行一些操作。为了调试，我用 alpha 0.5 将圆圈设为黄色，在发布时，我将 alpha 降低到 0，使圆圈不可见（应该如此）。

这会减慢程序的速度吗？是否有另一种方法可以使圆圈本身不可见，同时仍然能够进行交互？是否有某种方法可以在不使用（可能）昂贵的 alpha 0 的情况下将其着色为“不可见”？缓存为位图矩阵？或者其他一些不使用掩码解决“热点”检测的有效方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:32:38.330

只有几个不可见的显示对象不应该减慢它的速度，但有很多可以。我认为一个更简洁的选择可能是只在代码中处理它，而不是在舞台上实际不可见的显示对象。

对于圆，您将定义中心点和半径。然后如果有人点击它，你可以去：

```
var xDist:Number = circle.x - mousePoint.x;
var yDist:Number = circle.y - mousePoint.y;

if((xDist * xDist) + (yDist * yDist) <= (circle.radius * circle.radius)){
    // mousePoint is within circle
} else {
    // mousePoint is outside of circle
} 
```

如果您坚持使用显示对象来设置这些圆形命中区域（有时在视觉上会更容易，然后通过数字），您还可以编写一些代码来读取这些显示对象（并从渲染中删除它们）以获取它们的位置和半径大小。

* * *

添加方法：

```
// inputX and inputY are the hotspot's x and y positions, and inputRadius is the radius of the hotspot
function hitTestObj(inputA:DisplayObject, inputX:int, inputY:int, inputRadius:int):Boolean {
    var xDist:Number = inputX - inputA.x;
    var yDist:Number = inputY - inputA.y;
    var minDist:Number = inputRadius + (inputA.width / 2);
    return (((xDist * xDist) + (yDist * yDist)) =< (minDist * minDist))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:57:33.720

就渲染而言，alpha=0 并不是那么昂贵，因为 Flash 播放器会对此进行优化（查看[此处](http://www.developria.com/2008/11/visible-false-versus-removechi.html)查看实际数据）。位图缓存不会有任何帮助，因为精灵是不可见的。还有其他方法可以通过自己进行数学运算来执行碰撞检测（在具有数十甚至数百个精灵的游戏中更相关），但在您的情况下这将是过度杀伤力。

# sql - SQL 表与结构数组有何不同？（就使用而言，而不是实现）

> ID：13301463
> 
> 赞同：3
> 
> 时间：2012-11-09T02:55:25.263
> 
> 标签：sql, data-structures, struct, ddl

下面是一个简单的 SQL 表示例：

```
CREATE TABLE persons
(
    id INTEGER,
    name VARCHAR(255),
    height DOUBLE
); 
```

由于我没有经常使用 SQL，所以我还没有学会用它的术语来思考。实际上，我的大脑将上述内容转换为：

```
struct Person
{
    int id;
    string name;
    double height;

    Person(int id_, const char* name_, double height_)
    :id(id_),name(name_),height(height_)
    {}
};
Person persons[64]; 
```

然后，在 SQL 中插入一些元素：

```
INSERT INTO persons (id, name, height) VALUES (1234, 'Frank', 5.125);
INSERT INTO persons (id, name, height) VALUES (5678, 'Jesse', 6.333); 
```

...以及我的想法：

```
persons[0] = Person(1234, "Frank", 5.125);
persons[1] = Person(5678, "Jesse", 6.333); 
```

我读过 SQL 可以被认为是两个主要部分：数据操作和数据定义。我更关心首先组织我的数据，而不是查询和修改它。在那里，SQL 的区别立即显而易见。对我来说，数据如何以及应该如何在 SQL 中结构化的微妙之处似乎是一个更晦涩的话题。我自动为自己绘制的结构数组类比在哪里崩溃了？

举一个具体的例子，假设我希望我的`persons`表中的每个条目（或我的每个`Person`对象）都包含一个表示该人孩子姓名的字段（实际的水果孩子，而不是分层数据结构孩子）。实际上，这些可能是跨表引用（或指向对象的指针），但让我们保持简单，让该字段包含零个或多个名称。在我的 C++ 示例中，我会像这样修改声明：

```
vector<string> namesOfChildren; 
```

...并做这样的事情：

```
persons[0].namesOfChildren.push_back("John");
persons[0].namesOfChildren.push_back("Jane"); 
```

但是，据我所知，SQL 的典型用法并不反映这种方法。如果我错了，并且有一个简单、直接的解决方案，那就太好了。如果不是这样，我敢肯定，像我这样的 SQL 新手可以从对 SQL 表的数据库如何与裸露的通用数据结构进行对比这一主题的一点思考中受益匪浅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:35:47.457

> 对我来说，数据如何以及应该如何在 SQL 中结构化的微妙之处似乎是一个更晦涩的话题。

它被称为“数据（基础）建模”，介于工程学科和艺术之间（就像许多计算机编程一样）。如果您真的对该主题感兴趣，请查看[ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)。

> 我自动为自己绘制的结构数组类比在哪里崩溃了？

在持久性、并发性、一致性和可扩展性方面。

*   **持久性**：表自动保存到永久存储。它会留在那里并在重新启动后继续存在（并不是说真正的数据库服务器会重新启动很多），直到您明确删除它或发生灾难性硬件故障。DBMS 具有运行良好的备份程序，在后一种情况下应该会有所帮助。
*   **并发**性：表意味着被许多客户端同时访问和（需要）修改。采用锁定和[多版本并发控制](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)等机制，确保客户端不会“踩到对方的脚趾”。
*   **一致性**：您可以定义某些*约束*（例如唯一性、外键或检查），DBMS 将确保它们*永远不会*被破坏。此外，这通常可以以*声明*的方式完成，从而最大限度地减少出错的机会。最重要的是，您在数据库中所做的一切都是*事务*性的，因此您可以获得原子性、一致性、隔离性和持久性（又名[“ACID”](http://en.wikipedia.org/wiki/ACID)）的好处。简而言之，数据库将*保护自己*免受不良数据的侵害。
*   **可扩展性**：设计良好的数据库模式可以远远超出可用 RAM 的范围，并且仍然保持良好的性能，使用索引、分区、[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)等技术......此外，SQL 是声明性的和基于集合的，这意味着DBMS 可以为手头的数据选择最佳的“查询执行计划”，自动并行化查询，缓存结果以希望它们将被重用等等......而不改变查询的含义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:04:38.057

您对结构数组的类比还不错……一开始。

在此开始之后，差异开始与组织数据有关。数据库人员喜欢他们的“范式”法则。我们在 C++ 或类似的编程语言中没有这些定律。根据这些规律组织表中的数据有助于数据库引擎更好地发挥其魔力（查询、连接），即保持数据库紧凑并在几分之一秒内处理数百万行，并允许同时进行多个请求。它们不是绝对法则：99.9999% 的情况下遵循 1NF（第一范式），但数字越大（2NF、3NF、...），DB 规划者就越经常允许自己偏离它们。

[例如，可以在此处](http://www.anaesthetist.com/mnm/sql/normal.htm)找到对范式的描述。

我将尝试说明您的示例的差异。

在您的示例中，结构的字段对应于数据库表的列。将名称的向量添加为 struct 的新字段将对应于将名称的逗号分隔列表添加到表的新列中。这违反了 1NF，它要求一个单元格代表一个值 - 而不是值列表。要规范化您的数据，您需要有两个数组：一个是 Person 结构，另一个是用于 Child 的新结构。在 C++ 中，我们可以只使用指针将每个子项链接到其父项，而在 SQL 中，我们必须使用键的机制。您已经将 id 字段添加到 Person 结构中，现在我们需要将 ParentId 字段添加到 Child 结构中，以便数据库引擎可以找到 Parent。ParentId 列称为外键。另一种满足 1NF 的方法而不是为孩子创建新的表/结构是，我们可以切换到以孩子为中心的思维，并且只有一个表，每个孩子都有一个记录，其中包含有关孩子父母的所有信息。显然，有关父母的信息将在与该父母拥有的孩子一样多的记录中重复出现。

注意（这也被认为是 1NF 的一部分），虽然在结构数组中我们总是知道元素的顺序，但在数据库中，存储记录的顺序取决于引擎。它只是数学上无序的记录集，引擎可以根据需要在内部存储中对其进行各种优化。当您使用 SELECT 语句从数据库中检索记录时，如果您关心顺序，则需要提供 ORDER BY 子句。

2NF 是关于从你的记录中删除重复。想象一下，您将拥有与工作地点相关的字段，作为您的 Person 结构的一部分。想象一下，它将包括公司名称和公司地址。如果您的数据集中有很多人在同一家公司工作，您将在他们的记录中重复该公司的地址。可能我们也不会在 C++ 中进行这些重复，但是将这些重复提取到单独的表中将满足 2NF。严格来说，即使没有重复并且您的所有人员都在不同的地方工作，2NF 仍然需要将有关工作场所的数据提取到单独的表中，因为它要求一张表代表一个实体。

3NF 是关于消除传递依赖的，被认为是一种可选的，所以我不会在这里描述它。见上面的链接。

与传统的 C++ 数据结构编程完全不同的数据库的另一个特性是数据库索引。简而言之，索引只是将一列（或多列）（即垂直切片）复制到单独的表中，它们以固有的顺序存储在其中，并且索引中的每条记录都保留对整个记录的引用。因此，在您的示例中，要按高度创建索引，您将创建另一个包含 64 个新元素的数组

```
struct HeightIndexElem
{
    double height;
    Person* pFullRecord;
} 
```

并按此数组中的高度对它们进行排序。这将允许数据库引擎自动优化某些查询。数据库引擎本身决定何时使用某个索引。在 C++ 中，我们通常创建映射（C# 中的字典）来加快通过某些特征查找元素，但我们必须自己使用这些映射 - 那里没有自动方面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T03:10:47.937

有主要区别：-

*   SQL 表是持久化的——（英文翻译：写入磁盘）
*   它们是事务性的——（真正写入磁盘）
*   它们可以是任意大小——（几亿行的表很常见）
*   它们支持关系代数——（与其他表连接、过滤等）
*   关系代数是可证明的——对于给定的 SELECT 语句，只有一个可能的正确答案。

最大的区别是，当您“更新”和“提交”时，您知道您的数据已保存在数据库中，并且会一直存在，直到您决定“删除”它。当您更新数组中的结构时，机器关闭时它就消失了。

另一个很大的区别是规模。现代 DBMS 的大小仅受硬盘预算的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:40:54.967

[从学术的角度来看，我真的很喜欢 farfareast 的回答，但我也觉得有必要添加一个更实用的答案。]

正如您所说的 C++ 结构，SQL 表本身是“裸露的通用数据结构”。它们只是*不同*的数据结构：表*始终*是（固定大小）结构的数组，您可以使用的唯一指针是外键。

例如，当您向`vector<string>`结构添加 a 时，您已经在内部使用指针，因为`string`s 只是一种“花哨”的编写方式`char*`。这已经需要 SQL 中的第二个表（使用 secondayr 索引列来保持元素的顺序）。当然，像[postgresql 的数组](http://www.postgresql.org/docs/9.2/interactive/arrays.html)这样的东西可以在这种特定情况下提供帮助，但这些只是类似手写结构的“唯一”快捷方式。

数据结构和算法的真正区别在于您可以轻松添加索引结构的声明。假设您知道您需要*始终*`Person`按 s 的顺序访问s `height`。在 C++ 中，您将使用某种树或排序列表来保持它们的顺序。为此有一个 STL 容器。不利的一面是，当您需要以不同的顺序（例如按名称）访问它们时，您必须添加第二棵树并复制数据或开始使用指向`Person`s 的指针。如果添加 Person，则需要更新所有容器等。这变得很麻烦，很快你就会出现在[The Daily WTF的首页](http://thedailywtf.com/). 另一方面，SQL 表可以附加索引，这些索引会自动跟上新的和更改的数据。当然，它们的维护也必须以性能为代价，但它们的管理基本上是决定您的访问模式需要哪些——每种情况下都需要的东西——并定义它们。与必须重写应用程序的大部分内容相比，这是一种更有利的情况。

# java - 连接 4 Java，检查获胜条件？

> ID：13301464
> 
> 赞同：-1
> 
> 时间：2012-11-09T02:55:33.363
> 
> 标签：java

这是我的代码：

```
public boolean isGameOver() {
    if (getWinner() == null)
        return false;
    for (int i=0; i<BOARD_WIDTH; i++){
        if (board[0][i]!=null){
            return true;
        }
    }
    return true;
}

public Player getWinner() {
    Player winner = getToMove();
    if (checkRows() || checkCols() || checkLowDiag() || checkHighDiag() ){
        return winner;
    }
    return null;
}

public boolean checkRows(){
    for (int i=0;i<BOARD_HEIGHT; i++){
        for (int j = 0; j<BOARD_WIDTH; j++){
            if (getSquare(i, j) != null && getSquare(i, j) == getToMove()){
                if (getSquare(i, j) == getSquare(i, j+1) && getSquare(i, j+1) != null &&
                        getSquare(i, j) == getSquare(i, j+2) && getSquare(i, j+2) != null &&
                        getSquare(i, j) == getSquare(i, j+3) && getSquare(i, j+3) != null)
                    return true;
            }
        }
    }
    return false;
}

public boolean checkCols(){
    for (int i=0;i<BOARD_HEIGHT; i++){
        for (int j = 0; j<BOARD_WIDTH; j++){
            if (getSquare(i, j) != null && getSquare(i, j) == getToMove()){
                if (getSquare(i, j) == getSquare(i+1, j) && getSquare(i+1, j) != null &&
                        getSquare(i, j) == getSquare(i+2, j) && getSquare(i+2, j) != null &&
                        getSquare(i, j) == getSquare(i+3, j) && getSquare(i+3, j) != null)
                    return true;
            }
        }
    }
    return false;
}

public boolean checkLowDiag(){
    for (int i=0; i<BOARD_HEIGHT; i++){
        for (int j=0; j<BOARD_WIDTH; j++){
            if (getSquare(i, j) != null && getSquare(i, j) == getToMove()){
                if (getSquare(i, j) == getSquare(i+1, j+1) && getSquare(i+1, j+1) != null &&
                        getSquare(i, j) == getSquare(i+2, j+2) && getSquare(i+2, j+2) != null &&
                        getSquare(i, j) == getSquare(i+3, j+3) && getSquare(i+3, j+3) != null)
                    return true;
            }
        }

    }
    return false;
}

public boolean checkHighDiag(){
    for (int i=0; i<BOARD_HEIGHT; i++){
        for (int j=0; j<BOARD_WIDTH; j++){
            if (getSquare(i, j) != null && getSquare(i, j) == getToMove()){
                if (getSquare(i, j) == getSquare(i-1, j+1) && getSquare(i-1, j+1) != null &&
                        getSquare(i, j) == getSquare(i-2, j+2) && getSquare(i-2, j+2) != null &&
                        getSquare(i, j) == getSquare(i-3, j+3) && getSquare(i-3, j+3) != null)
                    return true;
            }
        }

    }
    return false;
} 
```

出于某种原因，我的游戏结束功能无法正常工作。我不确定为什么。它在游戏仍在进行时返回 true，在游戏结束时返回 false。顺便说一句，这是一个连接四游戏。提前致谢！

编辑： getToMove 给即将移动的玩家。它只是给出变量 Player toMove，其中 toMove 首先被确定为“x”。在 makeMove 函数中，我更改为移动到下一个玩家。以下是相关方法。

```
 public boolean makeMove(int col) {
    if (board[0][col] != null){
        return false;
    }
    else {
        for (int i=BOARD_HEIGHT-1; i>=0; i--){
            if (board[i][col] == null){
                board[i][col] = getToMove();
                saveRow.add(i);
                saveCol.add(col);
                if (getToMove() == x)
                    toMove = o;
                else if (getToMove() == o)
                    toMove = x;
                return true;
            }
        }
    }
    return false;
}

    public Player getSquare(int row, int col) {
    if (row > BOARD_HEIGHT-1 || row < 0 || col > BOARD_WIDTH-1 || col < 0)
        return null;
    else return board[row][col];
}

    public Player getToMove() {
    return toMove;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:48:31.507

首先 if 条件应该检查​​获胜者是否不为空，然后返回 true。因为如果已经有赢家，那么游戏就结束了。但是如果没有获胜者，那么您应该通过检查顶行中的所有单元格是否已填满来检查玩家是否已填满所有列。如果至少有一个单元格没有被填满，则游戏还没有结束，所以返回 false。否则返回真。

```
if (winner != null) game is over
else {
   if (one of top row cell is null) game is not over
   else game is over.
} 
```

在您当前的逻辑中，您检查是否没有获胜者，如果没有获胜者，则返回 false 而不检查游戏板是否已填满。仅当有赢家时，您才检查游戏板是否已填满。所以这个逻辑是不正确的。正确的逻辑就是我上面提到的。

# android - Android 上的 OpenGLES - IllegalStateException：已为此实例调用 setRenderer

> ID：13301468
> 
> 赞同：23
> 
> 时间：2012-11-09T02:56:02.333
> 
> 标签：android, eclipse, opengl-es

我是 Android 上 OpenGL-ES 的新手，所以请原谅我的愚蠢问题。我正在为 Android v2.2 - SDK#8 构建这个程序。我的平板电脑最高支持 Android v3.1

我正在尝试按照 developer.android.com 上的教程为 Android 设置 OpenGL-ES 环境。该程序编译良好，它应该在设备上显示一个简单的蓝屏。但是，当我尝试在我的 Android 设备上运行它时，我得到了“IllegalStateException：setRenderer 已为此实例调用”错误。

下面是我的代码：

```
public class TA_SpaceActivity extends Activity 
{
    private MyGLSurfaceView myGLView;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        myGLView = new MyGLSurfaceView(this); //NOTE: this is where the app crashed
        setContentView(myGLView);
    }
}

class MyGLSurfaceView extends GLSurfaceView
{
    public MyGLSurfaceView(Context context) 
    {
        super(context);
        setRenderer (new MyRenderer());
        setEGLContextClientVersion(2);
        setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
    }
}

class MyRenderer implements GLSurfaceView.Renderer
{
    public void onSurfaceCreated(GL10 unsued, EGLConfig config)
    {
        GLES20.glClearColor(0.0f, 0.0f, 1.0f, 1.0f);
    }

    public void onDrawFrame(GL10 unused)
    {
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
    }

    public void onSurfaceChanged(GL10 unused, int width, int height)
    {
        GLES20.glViewport(0, 0, width, height);
    }
} 
```

首先，我确保 OpenGLES 的 uses-feature 标记包含在 AndroidManifest.xml 文件中：

![在此处输入图像描述](../Images/a1b801b9f20f3a3c6b5d403531664960.png)

然后，当我进行调试运行时，ActivityThread.perfo 显示“未找到源”错误消息。所以，我添加了它的路径（我还确保 android.jar 文件存在于目录中）

![在此处输入图像描述](../Images/bf135cef6baaa367b7d016771f515615.png)

尽管如此，该应用程序还是在“myGLView = new MyGLSurfaceView(this)”行崩溃了。当我检查 LogCat 时，它显示程序在 setRenderer() 函数调用中抛出了 IllegalStateException。

![在此处输入图像描述](../Images/f86d711354f33d122e3f8cd21fbd11d3.png)

所以，我有两个我目前不明白的谜题：

1）为什么在项目中明确定义了指向源的链接时会抛出“未找到源”错误消息？

2) 为什么说“已为此实例调用了 setRenderer()”？我只在“MyGLSurfaceView”子类中调用过一次。

对于第一个难题，据我所知，当您犯的每个随机错误时，Eclipse 几乎总是会抛出“Source Not Found”消息。这样对吗？（如果没有，请纠正我）。

如果是这种情况，那么我认为问题的根本原因与我的子类中的 setRenderer() 方法有关。经过一整天的混乱，我找不到解决此问题的方法。有没有人能给我一些关于我可以尝试解决这个“IllegalStateException：setRenderer() 已为此实例调用”问题的指针？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-09T17:45:37.577

我想到了。在深入研究谷歌的文档后，我发现 setEGLContextClientVersion() 调用了 checkRenderThreadState(); 如果调用了 setRenderer()，则此函数抛出非法异常“已为此实例调用了 setRenderer()”。所以，我没有先调用 setRenderer()，而是先调用了 setEGLContextClientVersion()，程序编译运行没有问题。我现在看到漂亮的蓝屏出现在我的设备上。

这是我所做的更改：

```
public MyGLSurfaceView(Context context) 
{
    super(context);
    setEGLContextClientVersion(2);
    setRenderer (new MyRenderer());
    setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
} 
```

# python - 如何在 PyCharm 中运行独立文件

> ID：13301469
> 
> 赞同：19
> 
> 时间：2012-11-09T02:56:04.813
> 
> 标签：python, pycharm

我正在使用 PyCharm 进行小型项目开发。我使用 Pycharm 的智能感知功能。当我开发每段代码时，我喜欢偶尔运行它来测试它。我在开发时需要的只是能够运行该文件。但是，当我右键单击并尝试运行独立文件时，PyCharm 会尝试变得智能，并向我显示使用单元测试和其他花哨的测试噱头来运行我的代码的选项。我现在不想部署任何测试框架。

我想要的只是能够按原样运行任何文件。但不知何故，PyCharm 不允许我对每个文件都这样做。

如果有人可以为此提供解决方法，我将不胜感激。我正在使用 Python 273

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-30T21:39:55.197

您可以在项目视图中的文件的上下文菜单中简单地选择“运行”条目：

![在此处输入图像描述](../Images/1fa3d802e9aa3f81ecd2300d39ec9b25.png)

这将像您输入的一样运行文件

Python

从命令行，在包含文件的目录中。

第一次执行此操作时，工具栏也会添加一个条目，您只需单击一下即可运行文件

![在此处输入图像描述](../Images/7dca91709e1e8f15973468fe3bb0e2e4.png)

并提供用于自定义每次运行时自动提供的一系列选项的选项。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-07T13:17:32.920

我刚刚遇到了同样的问题。这是因为它在文件中有一个名为 TestClass 的类。我更改了类的名称，然后我能够正常运行该文件。

# extjs4.1 - 手风琴布局混乱

> ID：13301471
> 
> 赞同：1
> 
> 时间：2012-11-09T02:56:14.347
> 
> 标签：extjs4.1

我正在使用一个面板，它有一组手风琴说第一个孩子，第二个孩子，第三个孩子。

我发现当面板被实例化时第一个孩子

会自动展开。但是当我删除第一个孩子时，手风琴布局面板无法自动展开孩子。

对不起，我的英语很差，表达不清楚，有人可以帮忙解决一下吗

```
var firstChild ={
        id:'first',
        title: 'first child',
        html: 'first child'
    };

var acc=    Ext.create('Ext.panel.Panel', {
    title: 'Accordion layout',
    width: 300,
    height: 300,
    layout:'accordion',
    defaults: {
        bodyStyle: 'padding:15px'
    },
    layoutConfig: {
        titleCollapse: false,
        animate: false,
        activeOnTop: true,
        collapseFirst:true
    },
    items: [
        firstChild,
        {
        title: 'second child',
        html: 'second child'
    },{
        title: 'third child',
        html: 'third child'
    }],
    renderTo: 'demo'
});

acc.remove(Ext.getCmp("first")); 
```

删除第一个孩子后，不能自动展开孩子

新用户不能发图片，这是地址

[http://i.stack.imgur.com/im848.jpg](http://i.stack.imgur.com/im848.jpg) [http://i.stack.imgur.com/E1ze7.jpg](http://i.stack.imgur.com/E1ze7.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:37:55.870

你可以告诉它扩展：

```
Ext.onReady(function() {

    var acc = Ext.create('Ext.panel.Panel', {
        title: 'Accordion layout',
        width: 300,
        height: 300,
        layout: 'accordion',
        defaults: {
            bodyStyle: 'padding:15px'
        },
        layoutConfig: {
            titleCollapse: false,
            animate: false,
            activeOnTop: true,
            collapseFirst: true
        },
        items: [{
            id: 'first',
            title: 'first child',
            html: 'first child'
        }, {
            title: 'second child',
            html: 'second child'
        }, {
            title: 'third child',
            html: 'third child'
        }],
        renderTo: document.body
    });

    acc.remove('first');
    acc.items.first().expand();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:56:02.110

我认为这是一个报告的错误：

[http://www.sencha.com/forum/showthread.php?247396-4.1.3-Accordion-Layout-not-working-when-dynamically-adding-items](http://www.sencha.com/forum/showthread.php?247396-4.1.3-Accordion-Layout-not-working-when-dynamically-adding-items)

# matlab - 大矩阵的matlab除法

> ID：13301473
> 
> 赞同：0
> 
> 时间：2012-11-09T02:56:21.627
> 
> 标签：matlab, matrix, linear-algebra, equation-solving

> **可能重复：**
> [当 A 和 B 都是大矩阵时，在 MATLAB 中求解 AX=B 中的 X 的有效方法](https://stackoverflow.com/questions/12831889/efficient-way-to-solve-for-x-in-ax-b-in-matlab-when-both-a-and-b-are-big-matrice)

我试图通过做 X=A\b 来解决 matlab 中的方程 Ax=b。但是问题是 A 是一个巨大的矩阵（2048000x2048000），并且 matlab 在执行它时会崩溃。是否有另一种有效的方法来解决这个方程，使 matlab 不会崩溃？

# java - JSP/Servlet 如果错误停留在同一页面而不是转发

> ID：13301475
> 
> 赞同：1
> 
> 时间：2012-11-09T02:56:27.983
> 
> 标签：java, mysql, jsp

我是新来的，整个晚上都在努力。我知道这应该很简单，我只是错过了一些愚蠢的东西。我有一个 jsp 页面和一个 servlet（下面的代码）。我正在尝试从我的数据库中搜索一个客户，这很有效。但是，如果找不到客户，我想在同一个 jsp 页面上发布一条错误消息，以便用户可以重新输入电话号码，以防他们犯了错误。我不确定如何做到这一点。我可以很好地转发到新的“客户”页面，并且我已成功尝试重定向回同一页面，但我不知道如何将消息放在那里。请帮忙！

**jsp页面**：

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1" isELIgnored="false" %>
    <%@ page import="java.util.*" %>  
    <%@ include file="staticpages/pageHeader.html" %>
        <br />      
            <hr />
            <br />
            <form name="custform" method="POST" action="ChooseCustomer.do" >
            <span class="sectionheader">Look Up Customer by Phone Number:</span>

            <input type="text" name="phone1" size="3" maxlength="3" onKeyUp="checklen(this)" />             
            <input type="text" name="phone2" size="3" maxlength="3" onKeyUp="checklen(this)" />
            <input type="text" name="phone3" size="4" maxlength="4" onKeyUp="checklen(this)" />
            <input type="submit" name="formaction" value="Search" />
            <input type="submit" name="formaction" value="Enter New Customer" />
            </form> 
    <%@ include file="staticpages/pageFooter.html" %> 
```

**小服务程序代码**：

```
package pizzapkg;

import java.io.IOException;
import java.sql.ResultSet;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class ChooseCustomer
 */
@WebServlet("/ChooseCustomer")
public class ChooseCustomer extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /** @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)  */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Customer c = null;
        if (request.getParameter("formaction").equals("Search")) {

                Database db = (Database) getServletContext().getAttribute("db");
            /* Search Database for existing customer */
            String searchPhone = request.getParameter("phone1") 
                    + request.getParameter("phone2") 
                    + request.getParameter("phone3");
            String sql = "SELECT * FROM customers WHERE cust_phone=\"" + searchPhone + "\";";
            ResultSet rs;
            try {
                rs = db.runSqlQuery(sql);
                rs.next();
                c = new Customer(rs.getString("cust_id"), rs.getString("cust_fname"), 
                        rs.getString("cust_lname"), rs.getString("cust_address"), 
                        rs.getString("cust_city"), rs.getString("cust_state"), 
                        rs.getString("cust_zip"), rs.getString("cust_phone"),
                        rs.getString("cust_notes"));
            } catch (Exception e) { e.printStackTrace(); }
            request.setAttribute("customer", c);        
        }
        RequestDispatcher rd = request.getRequestDispatcher("/customer.jsp");
        rd.forward(request, response);
    }
} 
```

PS 这是我第一次构建 servlet，所以这对我来说是全新的。我喜欢示例，因此您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:14:38.590

如果找不到客户，您可以`request`在您的内部对象中设置一个标志，例如`servlet`

```
 request.setAttribute("customerFound", "No"); 
```

在你的 JSP 中，放置一个 JSP scriptlet 来检查请求属性并在任何你想要的地方打印消息，例如，如果你想要在`<HR/>`then 之后的消息：

```
 <hr />
        <% if("No".equals(request.getAttribute("customerFound")) { %>
            <div style="color: red">No customer found</div>
        <% } %>
        <br /> 
```

我正在分享实现您想要的结果的非常基本的方法。

# android - 无法刷新列表视图中的数据

> ID：13301479
> 
> 赞同：0
> 
> 时间：2012-11-09T02:56:58.433
> 
> 标签：android, listview

我正在尝试从我的数据库中检索所有成员数据，然后将其显示在列表视图上并且它能够工作。

现在我正在尝试搜索特定成员，并且我设法检索了记录（登录到 logcat），但它没有相应地刷新我的列表视图。

这是我用来检索搜索记录的列表视图代码。

```
 SimpleAdapter simpleAdapter = new SimpleAdapter(Search.this, productsList, R.layout.list_item, new String[] {TAG_COMPANY},
                    new int[] { R.id.name});
            lv = (ListView) findViewById(R.id.lst_name);
            lv.setAdapter(simpleAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:06:58.047

检查这些链接。通常它是向前紧张的。只需创建一个 Textwatcher 并将适配器绑定到更改的文本。或者你也可以实现可过滤接口并说 android:textFilterEnabled 为真。

[链接 1](https://stackoverflow.com/questions/3550024/android-search-listview)

[链接 2](https://stackoverflow.com/questions/5780289/filtering-listview-with-custom-object-adapter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:48:09.530

这是因为。您需要`ListView`告知您的数据发生了变化。要通知`ListView`更改，您需要致电：

```
simpleAdapter.notifyDataSetChanged(); 
```

如果由于某种原因它不起作用，您还可以重新分配您的适配器`ListView`：

```
simpleAdapter = new SimpleAdapter(...);
lv.setAdapter(yourAdapter);
simpleAdapter.notifyDataSetChanged(); 
```

# html5-video - Video.js 更改源并同时搜索

> ID：13301483
> 
> 赞同：2
> 
> 时间：2012-11-09T02:57:47.177
> 
> 标签：html5-video, video.js, seek

我正在尝试使用 video.js 构建一个站点来查看视频。我们需要切换视频，同时保持旧视频的 currentTime 值。我现在的工作方式是使用loadedmetadata 事件来设置currentTime。我看到的问题是视频的第一帧在播放器寻找正确的时间时会暂时显示。我是 JS 编程的新手，所以也许我做错了什么，但我在文档中看不到任何可以帮助我克服这个问题的东西。我正在尝试在 Chrome 中渲染 H.264/mp​​4 视频。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:23:46.300

在支持该设置的浏览器中将预加载设置更改为“元数据”可能会有所帮助。

```
preload="metadata" 
```

那么它应该只加载元数据并触发loadedmetadata事件，而不是显示第一帧。那是除非提供任何新的 src 强制预加载，而且我不确定我的头顶。

不幸的是，HTML5 视频并没有为我们提供很多无缝切换视频的选择。来自 Google/Microsoft/Netflix 的媒体源 API 提案旨在解决此问题。[http://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html](http://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:29:13.080

你可以试试这个：

[https://bitbucket.org/felixschwarz/videojs-hdtoggle/](https://bitbucket.org/felixschwarz/videojs-hdtoggle/)

正如[在](http://help.videojs.com/discussions/problems/1671-changing-video-source)旧 videoJS-Forum 上看到的那样，我认为您可能必须声明`preload="auto"`. 在链接的论坛威胁中，我还记录了一些更改。

# azure - 如何在 Windows Azure 上部署 IBM Worklight 项目？

> ID：13301484
> 
> 赞同：1
> 
> 时间：2012-11-09T02:58:00.483
> 
> 标签：azure, ibm-mobilefirst

如何在 Windows Azure 上部署 IBM Worklight 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:37:58.257

Worklight 可在 Windows 上运行。更多详细信息可在下面的链接中找到。 [http://www-01.ibm.com/support/docview.wss?uid=swg27024838](http://www-01.ibm.com/support/docview.wss?uid=swg27024838)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T07:23:54.633

据我所知，IBM worklight 仅适用于 Linux。这意味着您需要排除 Windows Azure 网站和 Windows Azure 云服务（Web 角色、工作角色、VM 角色）。

在 Windows Azure 中运行 Linux 的唯一方法是使用[Windows Azure 虚拟机](https://www.windowsazure.com/en-us/home/features/virtual-machines/)(IaaS)。IBM worklight 在 Windows Azure 虚拟机上的部署类似于在 Amazon EC2 上的部署。[遵循本指南](https://www.ibm.com/developerworks/mydeveloperworks/blogs/worklight/entry/how_to_install_worklight_server_on_amazon_ec21?lang=en)，但不要在 Amazon EC2 中创建 VM，而是在 Windows Azure 中创建它（例如使用库）。

# ruby - 是否可以从数据库动态生成 cattr_reader 哈希？

> ID：13301488
> 
> 赞同：0
> 
> 时间：2012-11-09T02:58:35.420
> 
> 标签：ruby, ruby-on-rails-3, metaprogramming

我想知道我是否可以在我的类中添加类似的东西并让它构建一个我可以在其他类中引用的类属性。我不想记住 id，也不想在权重表中的 id 发生变化时不断更新 id。我也不想将权重表锁定到一组特定的 ID 中。

所以我想做如下的事情：

```
class Weight < ActiveRecord::Base
  attr_accessible :name

  @@kind = {
    Weight.all.each do |weight|
      weight.name.delete(' ').underscore.to_sym: weight.id,
    end
  }
  cattr_reader :kind, :instance_accessor => false
end 
```

然后在代码的其他区域我可以做类似的事情。

```
scope :light, where(weight_id, Weight::kind(:light)) 
```

我敢肯定有一些神奇的红宝石方式，我只是不确定正确的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:05:32.163

这是迄今为止我最接近的一次。

```
def self.kinds
  kinds = Weight.all.map { |weight| { weight.name.delete(' ').underscore.to_sym => weight.id } }
  kinds.reduce({}, :update)
end 
```

进而...

```
scope :light, where(weight_id, Weight.kinds[:light]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:08:19.003

为什么不把 kind 访问器变成一个类方法，它会懒惰地从数据库中加载权重并查找必要的权重呢？

但是，您尝试做的事情似乎并不好。体重变化背后的表格是什么？在建立数据库连接之前（例如，在某些测试环境中），您的类将被加载？我建议用适当的名称将范围重写为内部连接重量模型......

# hibernate - 有没有办法在休眠中以编程方式进行级联持久化？

> ID：13301492
> 
> 赞同：2
> 
> 时间：2012-11-09T02:59:31.160
> 
> 标签：hibernate, hibernate-mapping

我知道可以通过持久类中的注释来做到这一点，但是有没有办法使用 API 来实现呢？例如传递一个参数来`saveOrUpdate`告诉会话传递持久化对象？

# database - 如何从模态中保存重建的 Dicom 文件

> ID：13301493
> 
> 赞同：1
> 
> 时间：2012-11-09T02:59:34.350
> 
> 标签：database, dicom

我的问题是：假设我有一个医疗模式，例如 MRI，在扫描病人后，它会生成重建的 dicom 数据，我想我有两种解决方案来保存 dicom 数据，

一是将dicom数据保存为dicom文件，然后将文件保存到文件夹结构系统中；另一种是将dicom数据保存到数据库系统中（例如：可能有一个患者表

是存储病人信息的，也可能有一个学习表来存储学习信息等）。我认为数据库解决方案比文件夹结构系统更好（您的意见是什么？）。

而如果我使用数据库解决方案，那么在选择Berkeley DB或MS SQL Server或Oracle或其他DB等数据库时，我应该选择哪个数据库系统？有没有什么特别的考虑

医疗用途？DB选择的标准是什么？

谁能给我一些建议？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:41:34.603

关于将图像存储在文件系统与数据库中的争论已久。参考其他 StackOverflow 问题（[此处](https://stackoverflow.com/q/561447/612265)和[此处](https://stackoverflow.com/q/3748/612265)的示例）。

在您推出自己的系统之前，我建议您查看一个名为[XNAT](http://www.xnat.org)的成像平台（披露：我是开发人员之一）。我们的平台开箱即用地处理 DICOM 以及其他成像格式。它还可以充当 C-STORE SCP（这意味着您可以直接从扫描仪向其发送数据）。XNAT 是开源的并且免费提供。如果您的企业是商业/临床项目，那么在这些领域也有项目的分支。

值得一提的是，我们的系统将图像元数据存储在数据库 (PostgreSQL) 中，并将 DICOM 文件本身存储在文件系统中。

# remote-desktop - 远程启动会话显示：0

> ID：13301494
> 
> 赞同：0
> 
> 时间：2012-11-09T02:59:56.730
> 
> 标签：remote-desktop, vnc

我正在远程工作，不得不重新启动。我可以启动一个 vnc 会话并登录。但是由于某种原因，我尝试使用的程序在我尝试启动它时会出现 GLX 错误。（我正在使用 xfce4）。

我过去通过在我的显示器中使用 x11vnc 会话来规避这个问题：0。为此，我打开一个常规的 vnc 会话，然后在终端中输入

```
x11vnc --display :0 --forever 
```

然后我关闭 vnc 会话，并登录到 x11vnc 会话。

但这现在不起作用，因为由于我不得不重新启动，我认为我并没有真正运行 display :0 因为我没有登录到现场的桌面会话。

问题是：有什么方法可以有效地远程登录桌面会话，所以就好像我已经在现场登录了我的计算机，然后可以使用我上面描述的 x11vnc。

（警告：我不是所有这些事情的专家，所以我可能使用了一些不正确的术语。但我认为问题很清楚）。

谢谢！

============== 添加================

也许澄清如下。我可以欺骗计算机认为我就坐在它前面吗？我可以远程启动会话，这样当我下次坐在电脑前时，它会显示我已经登录吗？我确信这会解决我的问题。VNCing 的其他组合似乎都不起作用。

============== 更多 ======================

我刚刚（远程）重新启动，ssh'd，然后输入

```
x11vnc --display :0 
```

这就是我得到的

```
** If NO ONE is logged into an X session yet, but there is a greeter login
   program like "gdm", "kdm", "xdm", or "dtlogin" running, you will need
   to find and use the raw display manager MIT-MAGIC-COOKIE file.
   Some examples for various display managers:

     gdm:     -auth /var/gdm/:0.Xauth
              -auth /var/lib/gdm/:0.Xauth
     kdm:     -auth /var/lib/kdm/A:0-crWk72
              -auth /var/run/xauth/A:0-crWk72
     xdm:     -auth /var/lib/xdm/authdir/authfiles/A:0-XQvaJk
     dtlogin: -auth /var/dt/A:0-UgaaXa 
```

但这些选项都没有奏效。我还尝试了其他建议，例如使用`-auth guess`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T03:14:56.607

Display :0 一直在运行，假设您有一个 X 会话正在运行并且您的计算机已经启动。该命令`x11vnc --display :0 --forever` **在您的机器上打开一个 VNC 侦听端口**，您可以使用 VNC 客户端连接到该端口。

如果您使用 SSH（远程 shell），则运行 x11vnc 命令的初始 vnc 连接并不是真正需要的。如果您安装 SSHD 并通过连接，`ssh username@hostname`您可以从那里运行命令`x11vnc --display :0 --forever`，从而无需初始 VNC 连接。

如果您没有运行 sshd，除非正在运行某种屏幕共享，否则您可能会不走运。要查看是否有任何方法可以远程访问您的计算机，请使用[NMAP](http://nmap.org/)运行端口扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:59:44.520

使用`tightvncserver`. 如果你有apt，你可以跑去`sudo apt-get install tightvncserver`获取它。

要运行服务器：`tightvncserver`，它将提示输入用于验证 VNC 连接的密码。

您应该会看到一条消息`New 'X' desktop is HOSTNAME:1`。您现在有两个 X 显示器正在运行。您可以在端口 5901 上连接到 VNC 服务器，因为tightvncserver 默认从端口 5900 递增。

第二个 X 显示 (:1) 与显示 :0 是分开的，因此对于站在远程计算机旁的人来说，他们只会看到登录屏幕。这将持续到下一次重新启动，尽管有一些方法可以在启动时执行此命令。

请记住，虽然tightvncserver 会提示输入密码，并将使用该密码进行身份验证，但已知VNC 存在漏洞。因此，如果您的计算机的安全性是一个问题，那么通过 ssh 和防火墙端口 5901 从除`localhost`.

# maven - 当 logger level = DEBUG 时，SLF4J 为 isDebugEnabled() 返回 false

> ID：13301497
> 
> 赞同：5
> 
> 时间：2012-11-09T03:00:38.253
> 
> 标签：maven, log4j, slf4j

我有一个特殊的问题。

```
if (logger.isDebugEnabled()) {  
    logger.debug("Message=\"About to get the application details\" GroupID={}", iGroupID);  
} 
```

我有这段代码，当检查记录器时。的级别`logger = DEBUG`，但该方法`logger.isDebugEnabled()`仅返回 false。

我正在使用 SLF4J 和 Maven 添加依赖项。

# facebook - 删除like box插件上的facebook粉丝页面个人资料图片

> ID：13301501
> 
> 赞同：3
> 
> 时间：2012-11-09T03:01:07.950
> 
> 标签：facebook, facebook-likebox, user-profile

我只是想问一个关于 Facebook 之类的简单问题[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)我只想删除粉丝页面的个人资料照片.. 有没有解决方案? 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:38:38.093

第一：在社交插件中更改或隐藏内容是违反 Facebook 规则的。

话虽如此，afaik 无法再在社交插件中使用自定义 css。很久以前，您可以将 css 文件的绝对 URL 传递给插件代码，但它不再起作用。

我建议使用一个简单的 Like 按钮。如果你真的也需要页面流，你可以使用一个应用程序自己阅读它们，在这种情况下，即使是你自己的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-01T13:30:01.810

我只是想回答这个问题，因为其他人将来可能需要这些信息。您需要做的就是减小 facebook like 框的宽度。而已。我已经在我的网站 www.bringhopes.ca 中做到了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:30:54.560

您可以添加以下 CSS 来隐藏图像

> ```
> img.profileimage
> {
>     display:none;
> } 
> ```

# facebook - 登录facebook但未授权时如何在facebook中获取user_id？

> ID：13301505
> 
> 赞同：0
> 
> 时间：2012-11-09T03:01:40.673
> 
> 标签：facebook

```
FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            // the user is logged in and has authenticated your
            // app, and response.authResponse supplies
            // the user's ID, a valid access token, a signed
            // request, and the time the access token 
            // and signed request each expire
            var uid = response.authResponse.userID;
            alert(uid);
        } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, 
            // but has not authenticated your app
            // logged in and connected user, someone you know
            var uid = response.id;
            alert(uid);
        } else {
            // the user isn't logged in to Facebook.
            alert("the user isn't logged in to Facebook.");
        }
    }); 
```

not_authorized 时如何获取 uid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:27:14.437

> not_authorized 时如何获取 uid？

一点也不。Facebook 不会向您提供此类信息，除非用户已授权您的应用。

这是一个隐私问题——想想看，网络上的每个站点都可以设置自己的应用程序，并且一旦你浏览它就会得到你的 FB 用户 ID。*您是否*想要一个随机的p0rn站点，您可能会从其他地方重定向到该站点，而您甚至不希望这种情况发生以获取您的 Facebook 用户 ID？你当然不会。

# c# - 用户存在检查在 LINQ to SQL 中不起作用

> ID：13301507
> 
> 赞同：1
> 
> 时间：2012-11-09T03:02:32.653
> 
> 标签：c#, .net, linq, linq-to-sql

我发现这个网站描述了一个非常简单的 LINQ to SQL 用户身份验证，如[codesamplez.com](http://codesamplez.com/database/linq-to-sql-c-sharp-tutorial)。

我在数据库中的数据如下所示

```
| id  | name | password |
+-----+------+----------+
| 1   | tic  | test     |
| 2   | tac  | test     |
| 3   | toe  | test     | 
```

由于某种奇怪的原因，当我打电话时，数据没有像我预期的那样验证

```
 bool b  = IsValidUser("tic" , "test"); 
```

这返回`FALSE`，但任何时候我传递相同的用户名和密码组合

```
 bool b  = IsValidUser("tic" , "tic"); 
```

或者

```
 bool b  = IsValidUser("a" , "a"); 
```

或者

```
 bool b  = IsValidUser("b" , "b"); 
```

它回来了`true`！

下面是与引用页面基本相同的代码。

```
public bool IsValidUser(string userName, string passWord)
{
    DataClasses1DataContext db = new DataClasses1DataContext();
    var users = from u in db.Users
                      where u.name == userName
                      && u.password == passWord
                      select u;

    return Enumerable.Count(users) > 0;
} 
```

**更新：** 用户类：

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Users")]
public partial class User
{
    private int _id;
    private string _name;
    private string _password;

    public User()
    {
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_id", DbType="Int NOT NULL")]
    public int id
    {
        get
        {
            return this._id;
        }
        set
        {
            if ((this._id != value))
            {
                this._id = value;
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_name", DbType="NChar(10)")]
    public string name
    {
        get
        {
            return this._name;
        }
        set
        {
            if ((this._name != value))
            {
                this._name = value;
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_password", DbType="NChar(10)")]
    public string password
    {
        get
        {
            return this._password;
        }
        set
        {
            if ((this._password != value))
            {
                this._password = value;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:37:34.663

谢谢大家，现在所有非常有用的信息。这是我自己的错误，数据库中没有我期望的数据。我有 2 个数据库服务器，新数据没有复制到开发服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:22:12.113

不确定您的问题是什么，但这应该可以为您提供更多信息：

```
public bool IsValidUser(string userName, string passWord)
{

    DataClasses1DataContext db = new DataClasses1DataContext();
    db.Log = System.IO.StringWriter(New StringBuilder());

    var users = from u in db.Users
                where u.name == userName
                && u.password == passWord
                select u;

    int userCount = users.Count();
    bool isSuccess = userCount > 0;

    return isSuccess;   //Breakpoint here, check the contents of db.Log
} 
```

如果你在 return 上设置一个断点，那么你可以检查`userCount`and `isSuccess`。您还可以查看`db.Log`运行了什么查询。

如果这不能解决您的问题，那么请在返回时使用这三个变量的值更新您的问题。

**更新** 我刚刚看到你的更新。听起来您引用了错误的`IsValidUser`方法。我会转到您调用它的位置，右键单击`IsValidUser`并选择“转到定义”以验证正在调用正确的方法。此外，验证您使用的是最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:24:35.510

试试这个：

```
public bool IsValidUser(string userName, string passWord)
{
    using (var db = ...)
    {
        ...
        return users.Any();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T03:28:40.953

试试这个，

```
public bool IsValidUser(string userName, string passWord)
{
    DataClasses1DataContext db = new DataClasses1DataContext();
    return db.Users.Any(u => u.name == userName && u.password == passWord);
} 
```

# django - 自动运行 django 单元测试

> ID：13301515
> 
> 赞同：0
> 
> 时间：2012-11-09T03:04:28.673
> 
> 标签：django

我想创建一个脚本来自动在 django 中运行测试。所以我想在 python 中执行相当于 python manage.py test myapp 并将测试是否失败存储为变量。

因此，如果测试有效：

```
variable = True 
```

如果测试不起作用：

```
variable = False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:41:52.710

您可以使用[suite_result](https://docs.djangoproject.com/en/dev/topics/testing/#django.test.simple.DjangoTestSuiteRunner.suite_result)使用您自己的测试运行器来执行此操作。相关代码[在这里](https://github.com/django/django/blob/master/django/test/simple.py#L343-344)

# bash - 在 bash 中正确展开命令行参数

> ID：13301516
> 
> 赞同：1
> 
> 时间：2012-11-09T03:04:35.927
> 
> 标签：bash, shell

我想显示我正在运行的内容，但是当命令包含空格参数时，它失败了。

```
#!/bin/bash
go() {
  echo "*** $*"
  $* || exit 1
}
go make NAME="Hi Here" 
```

这会得到错误的行为，比如

```
make NAME=Hi Here 
```

有没有更好的方法来改进 go() 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:09:02.157

将 $* 替换为 "$@"：

```
#!/bin/bash
go() {
  echo "*** $*"
  "$@" || exit 1
}
go make NAME="Hi Here" 
```

# android - Android 平板电脑序列号（不是 IMEI/DEVICE_ID/SERIAL）

> ID：13301518
> 
> 赞同：2
> 
> 时间：2012-11-09T03:04:46.770
> 
> 标签：android

我是新手

我正在使用 samsung tab P3100 (ICS 4.04)。在菜单设置->关于设备->状态上，我可以获得设备的序列号。如何以编程方式获取此序列号值？

请帮我...

android.os.Build.Serial <> 序列号

注意：序列号 <> IMEI <> android_id <> mac 地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T14:34:51.140

您可以在 adb shell 上使用 getprop 命令并检查哪些文件包含正确的序列号。很多时候序列号位于不同的文件中，并且代码必须是特定于设备的。

Foe samung Tab 3 您可以使用以下代码：

尝试 {

```
 Class<?> c = Class.forName("android.os.SystemProperties");

    Method get = c.getMethod("get", String.class, String.class);

    serialnum = (String) (get.invoke(c, "sys.serialnumber", "unknown"));

} catch (Exception ignored) {

    serialnum = "unknown";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:12:41.433

```
 public class Utility {
Context context;

public AdParameters(Context context) {
    this.context = context;
    metrics = context.getResources().getDisplayMetrics();
}

public String getDeviceName() {
    return android.os.Build.MODEL;
}

public String getIMEI() {

    TelephonyManager telephonyManager = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    return telephonyManager.getDeviceId();

}

public String getMobielNo() {

    TelephonyManager tm = (TelephonyManager) context
            .getSystemService(context.TELEPHONY_SERVICE);
    return tm.getLine1Number();

}

} 
```

[Android：如何以编程方式访问 AVD 管理器（API 版本 8）中显示的设备序列号](https://stackoverflow.com/questions/11029294/android-how-to-programmatically-access-the-device-serial-number-shown-in-the-av)。看看这个链接。

# css-position - 如何在 html 页面中通过垂直滚动和水平滚动保持表头位置固定

> ID：13301520
> 
> 赞同：0
> 
> 时间：2012-11-09T03:04:59.667
> 
> 标签：css-position, tableheader

当我使用水平或垂直滚动​​滚动 html 时，如何保持表头位置固定？非常感谢。

示例页面：[http ://para.maximintegrated.com/en/search.mvp?fam=stepdn&270=Internal%20Pwr.%20FETs&tree=powersupplies](http://para.maximintegrated.com/en/search.mvp?fam=stepdn&270=Internal%20Pwr.%20FETs&tree=powersupplies)

[我的失败案例](http://ppt.cc/yagx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:08:22.817

这个问题已经有人提出来了。只需通过这些链接，希望你能得到你想要寻找的东西。 [https://stackoverflow.com/questions/983031/jquery-how-to-freeze-table-header-and-allow-scrolling-of-the-rest-of-the-rows](https://stackoverflow.com/questions/983031/jquery-how-to-freeze-table-header-and-allow-scrolling-of-the-rest-of-the-rows)？

# ruby - 终生无法在 Mac OSX 10.7.5 上安装 Ruby

> ID：13301522
> 
> 赞同：0
> 
> 时间：2012-11-09T03:05:18.377
> 
> 标签：ruby, macos, osx-lion

我发誓，我已经看到了关于在 stackoverflow 上安装 Ruby 的所有讨论......没有任何帮助。我安装了 Xcode 4.1 以及 rvm 1.16.19。

libksba 已安装。

以某种方式安装了一些 Ruby 版本，但我不知道哪个版本——因为如果我执行任何类型的 Ruby 命令——“ruby”本身，“ruby --version”，无论如何，我没有得到响应，并且得到一个提示，我必须按 ctrl/c。

无论是否使用 RVM，每当我尝试安装任何版本的 Ruby 时，都会得到以下输出：

```
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/Users/Dauber/.rvm/usr/lib ./configure --enable-shared --disable-install-doc --prefix=/Users/Dauber/.rvm/rubies/ruby-1.9.3-p286', please read /Users/Dauber/.rvm/log/ruby-1.9.3-p286/configure.log
There has been an error while running configure. Halting the installation.
ruby-1.9.3-p286 is not installed. 
```

以下是上述 configure.log 的输出：

```
[2012-11-08 20:46:41] env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/Users/Dauber/.rvm/usr/lib ./configure --enable-shared --disable-install-doc --prefix=/Users/Dauber/.rvm/rubies/ruby-1.9.3-p286 --with-gcc=clang
checking build system type... x86_64-apple-darwin11.4.2
checking host system type... x86_64-apple-darwin11.4.2
checking target system type... x86_64-apple-darwin11.4.2
checking for C compiler default output file name... configure: error: C compiler cannot create executables
See `config.log' for more details. 
```

现在，一个奇怪的事情是系统中没有名为“config.log”的文件，所以我无法“看到”它“了解更多详细信息”。

另一件奇怪的事情......我在这台机器上使用 gcc 和 gcc-4.2 编译了几十个 C 程序——我又试了一次，它们工作正常，所以我不知道到底是什么交易......

我尝试从[https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)安装无济于事；它完全没有区别。

这一切都在我运行 OSX 10.7.5 的 MacBook 上。奇怪的是……我在运行完全相同版本的 Lion 的 iMac 上遇到了零问题……事实上，我什至不需要安装 Ruby——它恰好已经安装了 1.9.2；我只需要添加 Rails 并且一切都运行良好......到底有什么不同，以至于我无法让这些东西在我的 MacBook 上运行？？？

在 PRUSSWAN 的链接之后：长话短说，另一篇 prusswan 链接的帖子提到 Rails 安装程序中存在错误，需要更改 /etc/rvmrc。我进行了更改，但在尝试安装 ruby​​ 时收到了与以前完全相同的错误消息。不过，这就是 configure.log 现在所说的：

```
[2012-11-08 22:42:08] env LDFLAGS=-L/opt/sm/pkg/active/lib -L/Users/Dauber/.rvm/usr/lib CFLAGS=-I/opt/sm/pkg/active/include -I/Users/Dauber/.rvm/usr/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/Users/Dauber/.rvm/rubies/ruby-1.9.3-p286
current path: /Users/Dauber/.rvm/src/ruby-1.9.3-p286
command(8): env LDFLAGS=-L/opt/sm/pkg/active/lib -L/Users/Dauber/.rvm/usr/lib CFLAGS=-I/opt/sm/pkg/active/include -I/Users/Dauber/.rvm/usr/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/Users/Dauber/.rvm/rubies/ruby-1.9.3-p286
checking build system type... x86_64-apple-darwin11.4.2
checking host system type... x86_64-apple-darwin11.4.2
checking target system type... x86_64-apple-darwin11.4.2
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc-4.2 accepts -g... yes
checking for gcc-4.2 option to accept ISO C89... none needed
checking whether we are using the GNU C++ compiler... yes
checking whether g++-4.2 accepts -g... yes
checking how to run the C preprocessor... gcc-4.2 -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking whether gcc-4.2 needs -traditional... no
checking whether the linker is GNU ld... no
checking whether gcc-4.2 -E accepts -o... yes
checking for real target cpu... x86_64
checking for ranlib... ranlib
checking for ar... ar
checking for as... as
checking for objdump... no
checking for gobjdump... no
checking for objcopy... no
checking for gobjcopy... no
checking for nm... nm
checking whether ln -s works... yes
checking whether make sets $(MAKE)... yes
checking for a BSD-compatible install... /usr/bin/install -c
checking for a thread-safe mkdir -p...  -d
use 'mkdir -p' as MKDIR_P
checking for dot... no
checking for doxygen... no
checking for pkg-config... pkg-config
checking for AIX... no
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for cd using physical directory... cd -P
checking whether -Wno-unused-parameter is accepted... yes
checking whether -Wno-parentheses is accepted... yes
checking whether -Wno-long-long is accepted... yes
checking whether -Wno-missing-field-initializers is accepted... yes
checking whether -Werror=pointer-arith is accepted... yes
checking whether -Werror=write-strings is accepted... yes
checking whether -Werror=declaration-after-statement is accepted... yes
checking whether -Werror=shorten-64-to-32 is accepted... yes
checking whether -Werror=implicit-function-declaration is accepted... yes
checking whether -Wall -Wextra is accepted... yes
checking whether -ggdb is accepted... yes
checking whether -fvisibility=hidden is accepted... yes
checking whether -Wl,-unexported_symbol,_Init_* is accepted... yes
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... no
checking for _LARGE_FILES value needed for large files... no
checking whether byte ordering is bigendian... no
checking for an ANSI C-conforming const... yes
checking whether char is unsigned... no
checking for inline... inline
checking for working volatile... yes
checking for long long... yes
checking for off_t... yes
checking char bit... ./configure: line 8508: syntax error near unexpected token `rb_cv_char_bit,'
./configure: line 8508: `    AC_COMPUTE_INT(rb_cv_char_bit, CHAR_BIT,' 
```

所以看起来生成的 ./configure 文件带有拼写错误或其他东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:52:14.353

哇...我不敢相信，但我找到了我自己问题的答案，而且非常 DUH。

我应该使用“rvm remove”命令——试过了，突然之间，我现在可以随心所欲地安装任何和所有版本的 Ruby。

现在看看 Aptana 是否会让我创建一个新的 Rails 项目。:)

谢谢大家的反馈，...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:13:26.773

请遵循[本指南](http://ryanbigg.com/2011/06/mac-os-x-ruby-rvm-rails-and-you/)，该指南介绍了如何使用 RVM 设置 Ruby。

# javascript - 如何仅使用 javascript 设置服务器？

> ID：13301524
> 
> 赞同：-4
> 
> 时间：2012-11-09T03:05:27.047
> 
> 标签：javascript, webserver

当我查找此内容时，我会收到有关 node.js 的建议。但我不想使用我不理解的抽象。是否可以只使用javascript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T03:08:31.140

你需要一些东西来解释和执行 JavaScript。（据我所知，没有任何东西可以将 JavaScript 编译为可以独立运行的常规可执行文件。即使有，您最初仍然需要那个编译器。）

Node.js 使用 Google 的 V8 引擎来执行 JavaScript，并提供了一个小型函数库。您会注意到大多数这些函数实际上只是 JavaScript 本身。（许多确实与本机代码绑定。

简而言之，肯定有可能，但没有编译器或解释器就不行。Node.js 是最简单的入门方式。此外，它没有添加额外的抽象层，并且除非您需要内置库，否则不会加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:16:25.070

Node.js 是您将获得的最接近“仅 JavaScript”的东西。要执行 JavaScript，您需要一个 JavaScript 引擎，而 node.js 以 Google 的 V8 引擎的形式提供了它。如果你想在服务器上运行 JavaScript，我会说 Node.js 是要走的路。

# sql - 在 SQL Server 和 DB2 中将 UTC 日期/时间值转换为本地时间值

> ID：13301528
> 
> 赞同：1
> 
> 时间：2012-11-09T03:05:55.253
> 
> 标签：sql, sql-server

我想通过传入时区（例如 EST、CST 等）将存储在 UTC-0 (GMT) 中的日期/时间值转换为用户首选的时区值。但是，SQL Server 似乎没有采用时区的方法，但确实尊重偏移量。我想知道是否有人有运气这样做，以便日期/时间值反映 DST 更改，当 SQL 查询针对包含这些值的表时出现问题。Oracle 是唯一一个似乎尊重时区和偏移量的数据库。请指教。

# java - 我的开始规则的全部第二种选择

> ID：13301531
> 
> 赞同：5
> 
> 时间：2012-11-09T03:06:12.147
> 
> 标签：java, parsing, antlr3

我正在尝试为一种小查询语言编写 ANTLR 语法。查询是仅限于特定字段的搜索词列表：

字段 1：a 字段 2：b 字段 3：c

这应该返回一个实体列表，其中 field1 匹配 a，field2 匹配 b，依此类推。查询也可以完全不受限制：

美国广播公司

这应该返回具有与 abc 匹配的*任何字段的实体。*这是 ANTLR 语法：

```
@members {
  String unrestrictedQuery;
}

FIELD1_OPERATOR: 'field1:';
FIELD2_OPERATOR: 'field2:';
FIELD3_OPERATOR: 'field3:';
DIGIT: '0'..'9';
LETTER: 'A'..'Z' | 'a'..'z';

query: subquery (' ' subquery)*
  | UNRESTRICTED_QUERY=.* {unrestrictedQuery = $UNRESTRICTED_QUERY.text;}
  ; 
```

我希望不受限制的查询是与查询规则的第一个替代项不匹配的任何文本。

1）有没有更好的方法来获取第二种选择匹配的文本？

2) 当我将它插入我的网络服务器时，unrestrictedQuery 解析器字段解析为查询的最后一个字符。当我真的想要整个字符串时，似乎对查询的每个字符都调用了该操作。

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:55:11.530

“我希望不受限制的查询是与查询规则的第一个替代项不匹配的任何文本”。这是一个糟糕的设计决策。如果将来要添加 Field4 怎么办？然后出现不兼容。更好地更改语法，以便轻松识别不受限制的查询。用引号将字段值（a、b、c）括起来，或用冒号开始不受限制的查询：

```
field1:a :abc field2:b 
```

# cakephp - 带有子域的生产环境中的 CakePHP 安装

> ID：13301533
> 
> 赞同：0
> 
> 时间：2012-11-09T03:06:37.950
> 
> 标签：cakephp, installation, cakephp-1.3, setup-deployment

我已经在我的生产站点上安装了基于 Cakephp 的网站，如下所示

```
var/html/  
       app/  
       cake/
       .htaccess etc 
```

在我安装博客之前它工作得很好。为了使它工作，我将博客文件夹的内容移动到 webroot，现在我的结构是

```
var/html/  
       app/  
         webroot/  
           blog/  
       cake/  
       .htaccess etc 
```

这要归功于那些 .htacess 文件
现在我正在制作一个子域“m”，即`http://www.m.example.com` 我的问题是......

1.  我做得对吗？
2.  我应该将每个子域等移动到 webroot 吗？
3.  我应该修改 htaccess 以实现后续结构吗

    ```
    变量/html/  
           应用程序/
             网络根/
           蛋糕/
          .htaccess  
           博客/
           米/
           子域/

    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:15:13.297

我建议像这样分开它们。cake1.3 可以是您想要的任何名称，但想法是每个框架都应该有自己的描述性文件夹。

这使它变得更加简洁，当您将项目添加到 git 等存储库时，这绝对是必要的。然后，每个文件夹都可以拥有自己的 .htaccess 文件，并在您的 apache 配置中单独配置。

```
var/html/  

    cake1.3/
       app/ 
         webroot/
       cake/

    blog/ 
```

# c# - 使用 LINQ 访问 csv 文件

> ID：13301534
> 
> 赞同：0
> 
> 时间：2012-11-09T03:06:41.770
> 
> 标签：c#

我有 ac# 实验室问题：

这是我的代码 todo 从 csv 文件添加数据，编译后它给出一个错误名称“rows”在当前内容中不存在

```
foreach (string row in rows)
{
    if (string.IsNullOrEmpty(row)) continue;
    string[] cols = row.Split(',');
    DailyValues v = new DailyValues();

    v.Open = Convert.To*(cols[0]);
    v.High = Convert.To*(cols[1]);
    v.Low = Convert.To*(cols[2]);
    v.Close = Convert.To* (cols[3]);
    v.Volume = Convert.To* (cols[4]);
    v.AdjClose = Convert.To*(cols[5]);
    v.Date = Convert.To*(cols[6]);
    values.Add(v);

    return values;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:16:28.737

看起来您的 CSV 文件包含无法转换为小数的数据。在调试器中运行它，看看`row`什么时候抛出异常。

如果你使用`Decimal.TryParse()`，返回值会告诉你转换是否成功，没有抛出异常。

编辑：

作为 TryParse 的示例：

```
Decimal _Open, _High;
if (!Decimal.TryParse(cols[0], out _Open))
{
    Debug.Print("Error on row: {0}", row);
    continue;
}
v.Open = _Open;

if (!Decimal.TryParse(cols[1], out _High))
{
    Debug.Print("Error on row: {0}", row);
    continue;
}
v.High = _High; 
```

# c - 在一个数组的变量中，如何扫描每个数组索引？

> ID：13301536
> 
> 赞同：0
> 
> 时间：2012-11-09T03:06:51.283
> 
> 标签：c

假设有一个变量是字母[MAX]，我想扫描每个数组索引，如字母[1]、字母[2]等。这是怎么做的？

我试着做一个 for 循环，比如

```
for (i = 0; i < MAX; i++)
{
   printf ("Letter: ");
   scanf ("%d", &letters[i]);
} 
```

但这不能正常工作。我的意思是它有效，但它会继续扫描，直到我达到 MAX 是什么（在我的程序中是 100）并且我尝试将它放在一个 do while 循环中（字母！= 0）但它在 for 之外循环，当我输入 0 时不会结束循环。

所以我要做的是通过`scanf`'ing用户输入并在输入0时结束循环来为每个数组变量（字母[i]）分配一个值，但是我尝试过的代码不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:11:46.803

你可以加

```
if(letters[i]=='0')
   break; 
```

到你的 for 循环结束。这样，它会检查您刚刚输入的字母是否为 0 字符（因此是单引号）。

你最终得到

```
for (i = 0; i < MAX; i++)
{
   printf ("Letter: ");
   scanf ("%d", &letters[i]);
   if(letters[i]=='0')
      break;
} 
```

# iphone - UINavigationBar 弹出进出而不是滑动

> ID：13301540
> 
> 赞同：0
> 
> 时间：2012-11-09T03:07:10.323
> 
> 标签：iphone, ios, ipad, uinavigationcontroller

我有一个基于导航的应用程序，带有 2 个控制器：vA 和 vB。

vA 是导航控制器的根视图控制器，它是一个全屏控制器，所以当这个控制器显示时，导航栏是隐藏的。

然后我使用

[self.navigationController pushViewController:vB 动画:YES];

在 vB 的 viewDidLoad 我有这个：

```
self.navigationController.navigationBarHidden = NO;
// then I have navigation buttons defined here 
```

vB从右侧进入屏幕的动画是这样发生的：

1.  导航栏突然出现在 vA 上
2.  vB 从右侧滑动并填满屏幕。

当我弹出 vB 时，会发生这种情况

1.  vB 向左滑动，显示 vA 在后面。
2.  此时，我们看到顶部可见导航栏的 vA。记住 vA 应该没有可见的导航栏。然后，导航消失，vA 调整为全屏。

这部动画没有优雅，糟糕，笨拙和错误。

我想要的是这样的：导航与 vB 一起滑入和滑出。

我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:20:06.090

您需要使用您在vcB的viewDidLoad中使用的方法的动画版本：

```
[self.navigationController setNavigationBarHidden:NO animated:YES]; 
```

编辑后：在 viewDidLoad 或 viewWillAppear（但不是 viewDidAppear）中似乎工作正常。它需要在 viewWillDisappear 中才能返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T03:11:29.527

尝试以下操作：

```
- (void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES animated:animated];
    [super viewWillAppear:animated];
}

- (void)viewDidDisappear:(BOOL)animated {
    [self.navigationController setNavigationBarHidden:NO animated:animated];
    [super viewDidDisappear:animated];
}
// OR viewWillDisappear as mentioned by @RubberDuck 
```

而不是隐藏导航栏`viewDidLoad`，实现`viewWillAppear`和`viewDidDisappear`

# php - 如何使用 php 解析 HTML？

> ID：13301542
> 
> 赞同：0
> 
> 时间：2012-11-09T03:07:40.130
> 
> 标签：php, parsing

> **可能的重复：**
> [用于 PHP 的强大、成熟的 HTML 解析器](https://stackoverflow.com/questions/292926/robust-mature-html-parser-for-php)

我有 html 文件

```
<table class="example2" >
<td >15-06-2012</td>
 <td >154</td>
    <td >1.34</td>
    <td >60</td>
   <td >25</td>
    <td >15</td>
 <td >Doctors service, Nursing service, Auxiliary Service</td>
 </tr>
</table> 
```

实际上这些值来自数据库。并且可能超过200。我想用html 来粘贴。由于我是解析新手，请给我一个示例以使其易于理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:13:27.910

解析 HTML 可能是一件苦差事……由于 HTML 主要是一种表示标记语言，因此语法使得数据提取有点挑战。标签可能不是很平衡，像这样的标签`<b>`并不能真正提供数据上下文等。

最好的办法是使用现有的库，例如[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。

# php - 保存用户标记的文本将如何影响网站性能

> ID：13301543
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:07:42.413
> 
> 标签：php, ajax, performance, drupal, database-performance

我们有一个为学生提供教育内容的网站。

我目前正在这个网站上实现一个功能，每次用户从内容中标记文本时，都会运行 jquery 来选择标记的文本，并调用 ajax 将其保存到数据库中。这仅用于分析/热图目的。

自从我启用此功能以来不到 20 小时，我的桌子上已经有 16k（并且还在增加）记录。这会对整体网站速度和性能产生巨大影响吗？

您对如何更有效地完成此功能有什么建议或想法？

谢谢！

更新更多细节：数据库模式：MySQL，4个字段

*   整数（10）
*   varchar(255)
*   文本
*   日期（时间戳）

代码是一个非常简单的 jquery ajax - .get() 和我的 php 文件上的简单插入查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:35:06.373

显然，记录大量任意数据会影响性能。您的数据库（您未指定）正忙于编写人们在屏幕上随机点击的记录。您的 Web 服务器被成千上万的请求所淹没。所以是的，它会影响性能。唯一的问题是多少 - 我的朋友，必须通过测试找到。您可以使用 Selenium 来测试用户选择文本。您可以在启用或禁用此功能的高峰使用时间查看服务器的 RAM/CPU/网络级别。尽管所有这些都归结为 - 在浏览您的网站时是否会明显影响您的加载时间或交互？如果不是，那么就继续记录这个（有点奇怪的）数据。

我不能说跟踪这个的任何合法性。我怀疑几乎没有人会在意，除非你是 Facebook 并且有隐私监管机构对你的你知道的事情嗤之以鼻。如果您是 Facebook，请告知我们，以便我们有另一个理由停用我们的帐户。

# javascript - 从 json 对象中检索对象

> ID：13301544
> 
> 赞同：1
> 
> 时间：2012-11-09T03:07:44.097
> 
> 标签：javascript, jquery, json

我正在从我的数据库中获取一个如下所示的 JSON 对象：

```
products = [
    {"ID":1, "CODE":"code1", "DESCRIPTION":"abcd", "PRICE":100},
    {"ID":2, "CODE":"code2", "DESCRIPTION":"efgh", "PRICE":100},
    {"ID":3, "CODE":"code3", "DESCRIPTION":"ijkl", "PRICE":100}
]; 
```

然后我有一个 select 元素，其中每个产品的选项都有 text = CODE 和 value = ID。现在，当用户在下拉列表中选择产品时，我想用所选产品的说明和价格填充一些文本框。是否有任何内置函数可以执行以下操作：

```
var myObject = products("ID" = selectedValue) 
```

?

我想用

```
myObject.DESCRIPTION, myObject.PRICE 
```

填写我的文本框。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:06:36.830

现代 javascript 引擎（IE9 及更高版本、node.js 和符合标准的浏览器）也支持数组的功能列表方法：`map`、`reduce`和`filter`.

这是一个经典案例`filter`：

```
var myObject = products.filter(function(x){return x.ID == selectedValue})[0]; 
```

对于较旧的 bo​​rwsers，您可以实现此 shim：

```
if (!Array.prototype.filter) {
    Array.prototype.filter = function(callback, myself) {
        if (!myself) myself = this;
        var result = [];
        for (var i=0;i<myself.length;i++) {
            if (callback(myself[i],i,myself)) result.push(myself[i]);
        }
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:12:18.090

您可以使用`$.each`实用程序功能：

```
$('select').change(function(){
   var id = this.value;
   $.each(products, function(i, myObject){
      if (myObject.ID === id) {
        $('textarea').val(myObject.DESCRIPTION);
        return false;
      }
   })
}) 
```

# sql - 在 null where 条件下加入表

> ID：13301549
> 
> 赞同：1
> 
> 时间：2012-11-09T03:08:12.000
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有桌子`Member`和`Transaction`. 表`Member`有 2 列`MemberID`和`MemberName`. 表`Transaction`有 3 列，`MemberID`、`TransactionDate`和`MemberBalance`。

表中的行如下所示：

表`Member`：

```
MemberID           MemberName
=============================
1                  John
2                  Betty
3                  Lisa 
```

表`Transaction`：

```
MemberID        TransactionDate         MemberBalance
=====================================================
1               13-12-2012              200
2               12-12-2012              90
1               10-09-2012              300 
```

我想`MemberID, MemberName`查询`MemberBalance`每个.`TransactionDate``MemberID`

我的查询是这样的：

```
SELECT 
    t.MemberID, m.MemberName , t.MemberBalance
FROM 
    Member AS m 
INNER JOIN 
    Transaction AS t ON m.MemberID = t.MemberID 
WHERE 
    t.TransactionDate IN (SELECT MAX(TransactionDate)
                          FROM Transaction 
                          GROUP BY MemberID) 
```

此查询返回：

```
MemberID           MemberName         MemberBalance
===================================================
1                  John               200
2                  Betty              90 
```

我的问题是，我希望查询返回：

```
MemberID           MemberName         MemberBalance
===================================================
1                  John               200
2                  Betty              90
3                  Lisa               NULL 
```

即使该成员在表格`MemberID`中不存在，我也希望显示该成员。`Transaction`

我该怎么做呢？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T03:15:10.710

你也可以使用这样的东西：

```
SELECT m.MemberID, m.MemberName, t1.MemberBalance
FROM Member AS m 
LEFT JOIN
(
  select max(transactionDate) transactionDate, 
    MemberID
  from Transactions
  group by MemberID
) AS t 
  ON m.MemberID = t.MemberID 
left join transactions t1
  on t.transactionDate = t1.transactionDate
  and t.memberid = t1.memberid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d4820/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T03:13:00.333

> 即使其 MemberID 在 Transaction 表中不存在也要显示成员

您可以在 Member 表上使用 LEFT JOIN 将行保留到 Transaction 表。

> 其中 TransactionDate 是每个 MemberID 的最新（最大值）。

从 SQL Server 2005 开始，首选且性能更好的方法是使用[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

```
 SELECT MemberID, MemberName, MemberBalance
     FROM (
   SELECT m.MemberID, m.MemberName , t.MemberBalance,
          row_number() over (partition by m.MemberID order by t.TransactionDate desc) rn
     FROM Member AS m 
LEFT JOIN [Transaction] AS t ON m.MemberID = t.MemberID 
        ) X
    WHERE rn=1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T03:15:23.420

要将成员保留在结果集中，您需要外部联接。

另外，请不要忘记在 memberid 上为内部选择查询添加条件，因为当一个用户的最大日期与另一个用户的非最大日期匹配时，您可能会遇到问题（您的 where 条件将为第二个用户传递两次因为他的交易日期会出现在选择的结果中两次，一个是他的实际最大日期，另一个是与非最大日期匹配的某些用户的最大日期）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T03:15:28.370

你需要使用`LEFT JOIN`. 此外，您的查询中有一个错误，因为如果两个成员同时有交易，您可以获得两个用户的两行。

试试这个

```
SELECT t.MemberID, m.MemberName , t.MemberBalance
FROM Member AS m 
    LEFT JOIN Transaction AS t ON m.MemberID = t.MemberID AND t.TransactionDate=
    ( 
        SELECT MAX(TransactionDate)
        FROM Transaction T2
        WHERE T2.MemberID=t.MemberID
    ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T04:46:07.187

```
SELECT a.MemberId,a.MemberName,a.MemberBalance
FROM
(
SELECT m.MemberId,m.MemberName,t1.MemberBalance
      ,ROW_NUMBER() OVER(PARTITION BY m.MemberId ORDER BY t1.TransactionDate DESC) AS RN
FROM
@Member m OUTER APPLY (SELECT t.MemberId,t.MemberBalance,t.TransactionDate
                       FROM @Transaction t WHERE m.MemberId=t.MemberId) t1
)a
WHERE a.RN=1 
```

# google-closure-compiler - 如何更改未导出到命令行的 Closure Compiler 编译选项？

> ID：13301550
> 
> 赞同：1
> 
> 时间：2012-11-09T03:08:13.030
> 
> 标签：google-closure-compiler

我发现 CompilerOption 中的某些选项没有导出到命令行。

例如，`alias all strings`在 Closure Compiler 的 Java API CompilerOption 中可用，但我不知道如何在命令行中设置它。

我知道我可以创建一个新的 java 类，例如：

```
Compiler c = new Compiler();
ComppilerOptions opt = new ComppilerOptions();
opt.setAliasAllString(true);

c.compile(.....); 
```

但是我必须自己处理命令行参数。

有什么简单的想法吗？

==============================

为了尝试该`alias all string`选项，我编写了一个基于 compiler.jar 的简单命令行应用程序。

但是我发现，打开时得到的结果`alias all string`不是我所期望的。

例如：

```
a["prototype"]["say"]=function(){
  var a="something string";
} 
```

给定上面的代码，`something string`将被一个像这样的变量替换：

```
var xx="something string";

....
var a=xx;
.... 
```

这很好，但是字符串“say”怎么样？闭包编译器如何知道这应该是别名（替换它使用变量）或导出（导出此方法）？

这是现在编译的代码：

```
a.prototype.say=function(){....} 
```

它似乎导出它。

虽然我想要这个：

```
var a="prototype",b="say",c="something string";

xx[a][b]=function(){.....} 
```

其实这就是类似google_map的编译。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:55:59.843

如果您只想玩，修改[http://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/javascript/jscomp/CompilationLevel.java?r=706](http://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/javascript/jscomp/CompilationLevel.java?r=706)通常很容易有东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:19:21.703

并非所有选项都可从命令行获得 - 这包括 aliasAllStrings。对于其中一些，您有以下选择：

1.  构建自定义版本的编译器
2.  使用[Java API](http://code.google.com/p/closure-compiler/wiki/FAQ#How_do_I_call_Closure_Compiler_from_the_Java_API?)（[参见示例](http://blog.bolinfest.com/2009/11/calling-closure-compiler-from-java.html)）。
3.  使用[plovr](http://plovr.com/)

获得与 Maps API 相同级别的压缩和混淆需要专门为编译器编写的代码。如果编写得当，您会看到属性和命名空间崩溃、原型别名以及其他一大堆问题。有关以这种方式优化的代码样式示例，请查看[Closure Library](https://developers.google.com/closure/library/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:30:59.133

[Plovr](http://plovr.com/)（一个 Closure 构建工具）提供了一个名为 的选项[`experimental-compiler-options`](http://plovr.com/options.html#experimental-compiler-options)，文档如下：

> Closure Compiler 包含许多仅在 Java 中以编程方式可用的选项。其中许多选项是实验性的或尚未最终确定，因此它们可能不是 API 的永久部分。尽管如此，它们中的许多今天对你还是有用的，所以 plovr 尝试公开这些实验编译器选项选项。在底层，它使用 Java 中的反射，因此它相当 hacky，但在实践中，***它是一种无需编写 Java 代码即可试验 Closure Compiler 选项的便捷方式。***

# jquery - 有没有jquery倒计时模拟时钟

> ID：13301552
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:08:22.223
> 
> 标签：jquery, jquery-countdown

当有人单击我页面上的按钮时，我想显示倒计时模拟时钟。倒计时模拟时钟可能如下所示：

![在此处输入图像描述](../Images/02583bf13f1fc551b345efc7d5a297db.png)

我在谷歌上搜索过，但没有找到任何相关的东西，我想问一下有没有可以使用的 jquery 倒计时模拟时钟插件？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-09T03:20:37.723

请参阅页面。希望能帮助到你。[http://www.jquery4u.com/plugins/10-cool-jquery-clock-tutorials-analog-digital/](http://www.jquery4u.com/plugins/10-cool-jquery-clock-tutorials-analog-digital/)

# .net - 如何在数据网格中的模板列中触发文本更改事件

> ID：13301558
> 
> 赞同：1
> 
> 时间：2012-11-09T03:09:42.003
> 
> 标签：.net, silverlight, xaml, datagrid, silverlight-4.0

我是 Silverligt 和 Data Grid 的新手。我正在尝试为 Data Grid 中的 Template Column 触发 Text Changed 事件。但它不起作用。像这样的 Niether Grid 事件正在触发。

```
BeginningEdit="dataGrid1_BeginningEdit" 
TextInputStart="dataGrid1_TextInputStart"
TextInputUpdate="dataGrid1_TextInputUpdate" PreparingCellForEdit="dataGrid1_PreparingCellForEdit" 
```

我错过了什么吗？我正在绑定列表中的数据。

这是xml

```
 <sdk:DataGrid AutoGenerateColumns="False" Height="100" HorizontalAlignment="Left" Margin="142,96,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="120" BeginningEdit="dataGrid1_BeginningEdit"  TextInputStart="dataGrid1_TextInputStart" TextInputUpdate="dataGrid1_TextInputUpdate" PreparingCellForEdit="dataGrid1_PreparingCellForEdit" LoadingRow="dataGrid1_LoadingRow">

<sdk:DataGrid.Columns>
        <sdk:DataGridTemplateColumn CanUserReorder="True" CanUserResize="True" CanUserSort="True" Header="Test" Width="Auto"   >
            <sdk:DataGridTemplateColumn.CellTemplate>                        
                <DataTemplate>
                    <TextBox Text="{Binding Urgency}"  />
                </DataTemplate>
            </sdk:DataGridTemplateColumn.CellTemplate>

        </sdk:DataGridTemplateColumn>
        <sdk:DataGridTemplateColumn CanUserReorder="True" CanUserResize="True" CanUserSort="True" Header="Column2" Width="Auto" >
            <sdk:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox />
                </DataTemplate>
            </sdk:DataGridTemplateColumn.CellTemplate>
        </sdk:DataGridTemplateColumn>
    </sdk:DataGrid.Columns>

</sdk:DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:43:46.093

`CellTemplate`for`DataGrid`只是一个显示模板。`CellEditingTemplate`实际上会根据您的要求行事。

下面的代码将触发该`textchange`事件。

```
<sdk:DataGridTemplateColumn CanUserReorder="True" CanUserResize="True" CanUserSort="True" Header="Test" Width="Auto">
    <sdk:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Urgency}"/>
        </DataTemplate>
    </sdk:DataGridTemplateColumn.CellTemplate>
    <sdk:DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <TextBox Text="{Binding Urgency, Mode=TwoWay}" TextChanged="TextBox_TextChanged"/>
        </DataTemplate>
    </sdk:DataGridTemplateColumn.CellEditingTemplate>
</sdk:DataGridTemplateColumn> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:39:46.183

右键单击您的silverlight数据网格转到->属性，然后单击要添加选择更改事件的文本框，在属性工具栏中您找不到文本更改事件。

![在此处输入图像描述](../Images/f5dce5d336b77dede92dc1c80d3ebbfd.png)

然后它将自动为文本更改生成一个事件。

```
 private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
        {

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:05:28.913

您是否尝试过创建一个您绑定（或手动编码）的属性来处理 DataGrid 的“SelectedItem”，然后附加到“PropertyChanged”事件？然后，您可以“嗅探”任何选定项目的更改并执行您喜欢的任何操作。

另一个技巧是在 TextBoxes 的任何绑定中也定义“UpdateSourceTrigger=PropertyChanged”。这意味着当文本更改相对于 TextBox 失去焦点时（默认情况下），数据绑定更改完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T13:12:38.797

我认为您应该考虑将绑定更改为：

```
<TextBox Text="{Binding Urgency, Mode=TwoWay}"  /> 
```

然后处理由 Urgency 触发的 OnPropertyChanged 事件。

# python - 我如何在 django 的元类中使用类属性

> ID：13301559
> 
> 赞同：0
> 
> 时间：2012-11-09T03:09:45.650
> 
> 标签：python, django

我有这个代码

```
class DistrictResource(ModelResource):
    model=models.District
    res_name="district"
    class Meta:
        queryset = self.model.District.objects.active() 
```

如果我使用 self 时出现错误，我如何`self.model`在 meta 中使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T03:42:51.903

你需要使用

```
queryset = models.District.objects.active() 
```

代替

```
queryset = self.model.District.objects.active() 
```

在这种情况下。

编辑：

[由于Python 中的范围解析](http://docs.python.org/2/reference/executionmodel.html)规则，您*无法*访问`res_name`内部类：

> 块是作为一个单元执行的一段 Python 程序文本。以下是块：模块、函数体和类定义。
> 
> 范围定义了名称在块中的可见性。
> 
> 类块中定义的名称范围仅限于类块；它没有扩展到方法的代码块——这包括生成器表达式，因为它们是使用函数范围实现的。

关于 Python Scope 解析的一个简单规则是 LEGB 规则：

L. 局部变量，即在函数内分配的名称。

E. 封闭函数局部变量。

G. 全球

B. 内置插件。

* * *

`class Meta`Django/Tastypie 在使用元类构造类时将其用作配置选项。我不确定您为什么`Meta`要从内部访问外部变量`Meta`，而不仅仅是在内部定义它`Meta`。

# http - http 标头值安全字符

> ID：13301562
> 
> 赞同：0
> 
> 时间：2012-11-09T03:10:25.760
> 
> 标签：http, header

[我有一种方法可以使用Percent-Encoding](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)将一些键值条目编码为 ASCII 字符串。

结果值预计将用作 http 标头值。

有以下条目

```
("English", "love")
("한국어&quot;, "사랑") 
```

该方法生成

```
%ED%95%9C%EA%B5%AD%EC%96%B4=%EC%82%AC%EB%9E%91&English=love 
```

看起来像

```
key=value(&key=value)* 
```

1.  键和值被编码为[百分比编码](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)
2.  编码的键和值与 . 连接`=`。
3.  成对的编码键和值与`&`.

我的问题是，这个输出字符串是否可以用作 http 标头字段值？有什么问题或担忧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:20:11.853

只要您使用可打印的 US-ASCII，就应该没有问题。

# solr - 根据查询频率的 Solr 性能

> ID：13301565
> 
> 赞同：0
> 
> 时间：2012-11-09T03:10:47.147
> 
> 标签：solr

我每 10 分钟向 solr 发送查询（图 1），您可以看到许多“调用时间”大于 1000 毫秒（“len”表示 solr 的结果长度，每个窗口对应一个服务器）。但是，如果我更改查询频率 - 每 10 秒发送一次查询（图 2），几乎所有“调用时间”都会减少到 10 毫秒。我错过了 solrconfig 中的任何配置吗？（solr 版本 - 3.6，所有配置保留其默认值）。

![每 10 分钟发送一次查询](../Images/c53397034163e996f14c9ee5d4d5f980.png)

![每 10 秒发送一次查询](../Images/5f9ed950e08b2d621fc13640fcbbaca0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:50:54.817

检查 solrconfig.xml 文件中的[Solr 缓存](http://wiki.apache.org/solr/SolrCaching)配置。
缓存通常具有最大大小。如果超过最大尺寸，则会通过删除旧的和最近最少使用的尺寸为新尺寸让路。
可能，当您每 10 秒触发一次查询时，结果始终在缓存中可用，因此 Solr 在 10 毫秒内获取。
但是，当您每 10 分钟触发一次查询时，缓存可能已经丢失了条目并且必须再次重新获取它，前提是您有很多查询或缓存在该时间范围内无效。

检查 Solr 管理页面上的缓存统计信息并调整缓存设置/

# javascript - 在元素上使用滚动和滚动到

> ID：13301577
> 
> 赞同：0
> 
> 时间：2012-11-09T03:12:20.540
> 
> 标签：javascript

我知道 jQuery 方法`$.fn.scroll`并且`$.fn.scrollTop`存在，以及窗口方法`scroll`，`scrollTop`但是我将如何在特定元素上使用本机 javascript 函数之一，比如`document.getElementbyId('foo').scroll(function () { /* code */ });` ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:17:30.960

那么你正在寻找滚动事件。

```
document.getElementById("foo").onscroll = function() { console.log("Hello world") } 
```

我不确定滚动顶部，但我认为这是来自 jquery 的自定义事件。

# c++ - 如果我想写一个 C 程序，在 CodeBlocks 中选择 C 或 C++ 文件真的很重要吗？

> ID：13301579
> 
> 赞同：2
> 
> 时间：2012-11-09T03:12:24.267
> 
> 标签：c++, c, codeblocks

我真的只是在学习编程，并且在阅读 C++ Primer Plus（第 5 版）时，我遇到了“任何有效的 C 程序都是有效的 C++ 程序”的说法，我很想知道我能走多远。 .

这本书很好，但这种说法*一定*是真的吗？

尽管我打算只为特定项目编写 C 代码而不是选择将其称为 C 文件，但是否有任何理由**不在**CodeBlocks 中创建新文件并选择它是 C++ 文件？例如，也许我会开始用 C 编写一些东西，然后意识到我想开始使用一些 C++ 功能，因为我可以在之后更改文件扩展名，所以我一开始的决定是否无关紧要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T03:16:39.450

C 和 C++ 是两种截然不同的语言。是的，在大多数情况下，C++ 与标准 C 语法配合得很好。但是 C++ 是面向对象的，而 C 不是。两者之间的组织非常不同。

先学C。学习 C 之后学习 C++ 会容易得多，通常暗示您至少了解基本的 C 语法，然后才能使用 C++。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T05:56:32.037

该声明是完全错误的。有很多 C 程序不是有效的 C++ 程序，我什至可以说，**任何**正确编写的非平凡 C 程序都不是有效的 C++ 程序。提示：`char *p = malloc(n);`不是有效的 C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:25:05.653

大多数情况下没有，但我认为如果您选择 C，您可能无法访问某些库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:48:25.487

我记得如果你的文件是 C 语言文件（*.c），有些 C++ 语句无法编译，但通常是可以的，反之亦然。也许是因为 C++ 是 C 的超集。

而且我认为无论您创建 *.c 还是*.cc/* .cpp 文件都可以。在我看来，编写 C 程序和 C++ 程序时最重要的是思维方式。C 是一种过程语言，而 C++ 是一种 OO 语言。

# c# - 使用 .Net 4.5 读取 ashx jpg

> ID：13301584
> 
> 赞同：1
> 
> 时间：2012-11-09T03:13:19.827
> 
> 标签：c#, .net, windows-phone, .net-4.5, ashx

我的目标是从 ashx Url 读取 jpg 文件。我想用 Windows Phone 8 来做这件事，但我从 .Net 4.5 开始，因为这对我来说可能更简单。

这是一个示例网址： [http ://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=239959&type=card](http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=239959&type=card)

如果你在 IE 10 中访问这个 Url，你会看到一张图片。如何在 .Net 4.5 中下载图像？我试过使用：

```
HttpClient httpClient = new HttpClient();
httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("image/jpg"));
string resourceAddress = "http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=239959&amp;type=card";
HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, resourceAddress);

HttpResponseMessage response = await httpClient.SendAsync(request, HttpCompletionOption.ResponseContentRead);

byte[] responseBytes = await response.Content.ReadAsByteArrayAsync(); 
```

并且还使用 WebClient

```
string url = @"http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=220041&amp;type=card";
byte[] imageData;
using (WebClient client = new WebClient())
{                
    imageData = client.DownloadData(new Uri(url));
} 
```

这两种方法都不返回数据。如何获取数据并将其格式化为 jpg？我对使用 ashx 文件很陌生。我看到它们在 Asp.Net 网站中很容易使用，但找不到任何允许简单下载文件的东西。目标是下载 jpg 文件并将其显示在 windows phone 8 应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:13:21.653

看看那个网址。您已经对 & 进行了 URL 编码，因此确实没有返回任何内容

```
http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=220041&amp;type=card 
```

这

```
http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=220041&type=card 
```

但是，使用您的第一个代码示例在 Windows 8 中对我来说工作得很好。

顺便说一句，我看到你设置了 image/jpg 的 Accept 标头，ASHX 似乎将 Content-type 设置为 image/jpeg - 但它确实有效。

# iphone - 从另一个视图控制按钮文本

> ID：13301591
> 
> 赞同：0
> 
> 时间：2012-11-09T03:14:08.797
> 
> 标签：iphone, ios, uibutton

我有两个视图，我使用了两个视图控制器。从主视图中，我想用特定文本初始化第二个视图中的按钮。

如果我在第二个视图中按下按钮，那么我可以将该按钮引用存储到全局 UIButton，然后再更改文本。

但是第一次，我如何使用特定文本从我的主视图初始化第二个视图中的按钮文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:22:42.750

你不应该这样做：每个控制器都应该对自己的视图负责。句号。

您始终可以在第二个控制器上设置一些属性，并在屏幕上出现第二个视图时使用它来更改您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:39:10.943

您使用委托和@protocol 访问其他类[示例](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)，

[参考 ex](https://stackoverflow.com/questions/6903712/ios-protocols-and-delegates-on-the-example) , [ex1](http://www.tekritisoftware.com/ios-customized-protocol-iphone-development) ,[链接](http://agilewarrior.wordpress.com/2012/03/19/simple-objective-c-protocol-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:25:25.697

不知道你是怎么做到的。但是，如果您发布一些代码，它将有所帮助。如果您已经使上述代码正常工作，那么您需要具备以下条件才能实现您期望的工作。

假设您有 ViewControllerA、ViewControllerB 作为两个视图控制器。您绝对可以在创建 XIB 文件时初始化按钮中的文本。

但我假设您想以编程方式执行此操作。如果要访问另一个视图控制器中的按钮，则需要

一个。访问其他视图控制器。湾。一旦您可以访问另一个视图控制器，就可以访问该视图控制器中的 UIButton 变量。

因此，您可以在 ViewControllerA 代码中执行以下操作，

```
-(void)changeButtonTextOfVCB{
        viewControllerB.button setTitle:@"MyTitle" forControlState...
 } 
```

你可以在viewControllerA中有一个按钮，它会触发上面的方法。

话虽如此，我不确定你是否有整个工作，你甚至可以在视图控制器之间切换

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T05:27:31.717

如果您在 FirstViewController 中创建一个按钮并希望从第二个视图更改按钮属性（如 title..etc），那么您应该在 SecondViewController 中创建属性

```
 @property (nonatomic,assign) UIButton *button; 
```

当您将 firstViewController 导航到 secondViewController 时，只需传递按钮对象即可

```
obj = [SecondViewController alloc]...]
obj.button = button;//(FirstViewController button object) 
```

# drupal - Drupal / Ubercart 说它没有保存 CC 数据……那么“_save_cc_data_to_order”是什么？

> ID：13301592
> 
> 赞同：0
> 
> 时间：2012-11-09T03:14:20.840
> 
> 标签：drupal, drupal-6, ubercart, stripe-payments

我正在使用 Drupal 6、Ubercart 6.x-2.4 和 Stripe 支付模块。

我想再次检查我的 PCI 合规性并确保我没有将信用卡数据存储在我的数据库中，但我查看了我的数据库并在`uc_orders`表中发现了加密的 CC 数据。

里面有`modules/ubercart/payment/uc_credit/uc_credit.module`一个方法叫`_save_cc_data_to_order`. 如果我注释掉这个方法的内容，订单仍然通过我的测试网关，但数据库不再填充 cc 数据。

破解 ubercart 模块代码是停止在我的数据库中保存 cc 数据的有效方法，但我认为这不是必需的。

到底是怎么回事？我在管理员/商店/设置/付款中关闭了调试模式。我不明白为什么它会保存任何 cc 数据——我不需要持久用户并故意打开匿名结帐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:19:02.790

为了让自己确信 CC 数据没有在 Drupal / Ubercart 设置中保存到您的数据库中，请修改`modules/ubercart/payment/uc_credit/uc_credit.module`并注释掉函数的内容`_save_cc_data_to_order`。

您可以通过监视数据库中表的`data`列`uc_orders`或使用管理屏幕查看订单来验证此操作是否有效。进行更改后，将不会将任何 CC 数据（甚至最后 4 个）保存到数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:05:59.997

`_save_cc_data_to_order()`从 3 个地方调用：

*   `uc_credit_order()`的保存操作。当调试模式 ( `uc_credit_debug`) 打开时，它会保存完整的付款详细信息。当调试模式关闭时，它会保存信用卡号的最后 4 位数字（以及除 CVV 之外的所有其他付款详细信息）。
*   `uc_credit_order()`的提交操作。当调试模式打开时，它会保存完整的付款详细信息。当调试模式关闭时，它永远不会被调用。
*   `uc_credit_terminal_form_submit()`. 当调试模式打开时，它会保存完整的付款详细信息。当调试模式关闭时，它永远不会被调用。

因此，在正常情况下（调试模式关闭时），Ubercart 会存储一些经过清理的信息。我不能说这是否符合您的 PCI 合规要求水平，但[这个答案](https://security.stackexchange.com/a/19883/889)可能会有所帮助。

# objective-c - Objective-C：以反向顺序阻止数组枚举？

> ID：13301600
> 
> 赞同：4
> 
> 时间：2012-11-09T03:15:20.497
> 
> 标签：objective-c, ios, nsarray, objective-c-blocks

有`enumerateWithBlock`NSArray 的方法，但我需要以相反的顺序枚举，是否有这样做的块，或者我必须使用`for`循环代替，甚至不是快速循环，而是传统的循环`for (int i = array.count - 1 ; i >= 0 ; i--)`？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T03:27:19.077

您可以使用 enumerateObjectsWithOptions:usingBlock: 传递 NSEnumerationReverse 作为选项参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T03:19:42.440

您可以使用`reverseObjectEnumerator`

```
for (id someObject in [myArray reverseObjectEnumerator])
{
    // print some info
    NSLog([someObject description]);
} 
```

希望这可以帮助！

# ruby - 续集先得到？

> ID：13301602
> 
> 赞同：1
> 
> 时间：2012-11-09T03:15:27.453
> 
> 标签：ruby, sequel

您好，我已经构建了以下查询：

```
patron.where.first(:Queued => 1) 
```

这将返回整个记录，我只需要一个名为`time`. 就像是：

```
patron.where.first(:Queued => 1).get(:time) 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:20:17.767

```
patron.where(:Queued => 1).select(:time).first 
```

# ms-office - Powerpivot 2013 + 数据模型表名称

> ID：13301605
> 
> 赞同：1
> 
> 时间：2012-11-09T03:15:36.990
> 
> 标签：ms-office, powerpivot, office-2013

我只是在 Office 2013 中使用 PowerPivot。

当我在 PowerPivot 中创建模型时，它如下所示（包含三个表）

![在此处输入图像描述](../Images/db1a3bc3330ade832c4c57f63b5c2ffe.png)

当我尝试分析数据透视表中的数据时，它会出现

![在此处输入图像描述](../Images/53eb3a1992c3ee262b2f16ee00dbb3ff.png)

它说 Table1，Table2 而不是 Reseller Details，Calendar。

这在 Office 2010 powerpivot 中运行良好，它可以选择正确的表名。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:03:13.327

不知道他们为什么改变它，但我无法想象这是故意的。

如果您在字段列表中显示模型表名称（以及为什么不这样做），那么您需要更改 excel 表本身的名称，您可以在出现的“设计”选项卡中执行此操作当你在桌子上时。

![名称表](../Images/d168f07f52f537fc4d2e1efebf241038.png)

不理想，但至少有一个解决方法。雅各布

# rtmp - 使用 crtmpserver 进行直播 - 我找不到直播文件

> ID：13301609
> 
> 赞同：1
> 
> 时间：2012-11-09T03:16:36.833
> 
> 标签：rtmp, rtmps, rtmpd

我使用[crtmpserver](http://manpages.ubuntu.com/manpages/trusty/man1/crtmpserver.1.html)来制作我的[RTMP](http://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol)服务器。我使用 Adob ​​e [Flash Media Live Encoder](https://en.wikipedia.org/wiki/Adobe_Flash_Media_Live_Encoder) 3.2 将直播发布到服务器。没关系。我使用 webflash 播放器来接收直播。没关系。

现在，我想在服务器中找到实时文件，但找不到该文件。哪个文件夹是直播？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:08:36.597

**如果要流式传输 .flv 文件：**

在每个 crtmpserver 应用程序中，都有一个称为`mediaFolder`默认引用文件夹的属性`media`。

```
mediaFolder="./media", 
```

然后文件的流式 URL 为：

```
rtmp://<server IP address>/<application name>/<file name> 
```

**如果您想流式传输实时流：**

当您在接受器部分定义流接受器时，您可以通过以下方式指定流的名称`localStreamName`：

```
{
    ip="0.0.0.0",
    port=9005,
    protocol="inboundTcpTs",
    localStreamName="tcpchan5"
}, 
```

那么这个流的 URL 是：

```
rtmp://<server IP address>/<application name>/tcpchan5 
```

要接收输入流并提供给 RTMP 服务器，您可以使用[FFmpeg](http://en.wikipedia.org/wiki/FFmpeg)：

```
ffmpeg -i <input_stream> -vcodec libx264 -s 320x240 -vb 512k -async 1 -acodec libvo_aacenc -ab 32k -ac 1 -f mpegts tcp://<server IP address>:<server feed port> 
```

例如：

```
ffmpeg -i udp://224.11.11.11:2000 -vcodec libx264 -s 320x240 -vb 512k -async 1 -acodec libvo_aacenc -ab 32k -ac 1 -f mpegts tcp://127.0.0.1:9000 
```

# java - 如何在Java中舍入大于长类型最大值的数字？

> ID：13301612
> 
> 赞同：1
> 
> 时间：2012-11-09T03:17:18.313
> 
> 标签：java, type-conversion, rounding

我必须**处理非常大的 double 值**，并且必须将它们四舍五入到下一个完整数字。如果我将双精度值舍入，我总是会收到值**9.223372036854776E18**，这恰好是最大的 long 值。我如何舍入比这更大的值？

**编辑：**只是为了澄清：我不是 Java 程序员，来自 C 前端。我正在帮助一个朋友处理这个案子。我尝试了未签名（显然没有工作），谷歌搜索并找到了 BigDecimal 和 BigInteger。尝试铸造它们，它碰巧崩溃了。这就是我来这里的原因。谢谢你帮助我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T03:18:17.283

`BigDecimal`将是包含大于 long 的值的解决方案。

阅读这个[BigDecimal javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)

您需要实例化`BigDecimal(yourDoubleValue);`而不是强制转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T03:45:53.563

在本质上：

```
Math.floor(d+0.5) 
```

`d`但如果是负数，你必须调整减法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T03:19:02.770

使用[BigDecimal](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)

*   [如何使用 BigDecimal](http://www.opentaps.org/docs/index.php/How_to_Use_Java_BigDecimal%3a_A_Tutorial)

例如

```
BigDecimal decimalA = new BigDecimal("98765432123456789"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T03:23:34.467

BigDecimal 可以保存任何双精度和浮点值。要将 double 转换为 BigDecimal，请使用如下代码：

```
double reallyBigDouble
BigDecimal x = new BigDecimal(reallyBigDouble); 
```

要四舍五入到最接近的整数值，您可以使用如下代码：

```
BigDecimal roundedToInteger = x.round(new MathContext(MathContext.UNLIMITED)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-09T04:07:53.210

任何`double`太大而无法放入 a`long`的值已经表示一个整数值，并且对其进行四舍五入将无效。这是因为 double 的有效位仅保留 52 位精度，而 long 保留 64 位——因此，如果值对于 a 来说太大`long`，则`double`剩下的精度不足以容纳任何小数部分。

# c# - 从与显示值对应的组合框中获取 hiddenValue 时出错

> ID：13301613
> 
> 赞同：0
> 
> 时间：2012-11-09T03:17:21.650
> 
> 标签：c#, combobox, get, hidden

这是我从这个链接中找到的代码[Hidden Id With ComboBox Items?](https://stackoverflow.com/questions/3762981/hidden-id-with-combobox-items) .

```
class ComboBoxItem
{

       string displayValue;
       public string hiddenValue;

       //Constructor
       public ComboBoxItem (string d, string h)
       {
            displayValue = d;
            hiddenValue = h;
       }

       //Accessor
       public string HiddenValue
       {
           get
           {
               return hiddenValue;
           }
       }

       //Override ToString method
       public override string ToString()
       {
            return displayValue;
       }

} 
```

使用下面的代码

```
ComboBox.Items.Add(new ComboBoxItem("DisplayValue", "HiddenValue"); 
```

我能够显示我希望显示的值。例如，我保存了 ComboBox.Items.Add(new ComboBoxItem("Mike", "1");。它在组合框中显示 Mike 没有问题。但现在我需要的是从组合框。

为此，我运行了以下代码。

```
string hValue = ((ComboBoxItem)ComboBox.SelectedItem).HiddenValue; 
```

但是在运行时，它给我一个`NullReferenceException`. “对象引用未设置为对象的实例。”</p>

# microsoft-test-manager - 可以使用 MTM 2012 在 Windows XP 机器上运行手动测试吗？

> ID：13301614
> 
> 赞同：0
> 
> 时间：2012-11-09T03:17:26.220
> 
> 标签：microsoft-test-manager

我知道 Visual Studio Test Professional 不能安装在 XP 上并且它使用 .NET 4.5，但是有谁知道是否可以在 XP 机器上单独安装和使用 Test Runner 组件来运行手动测试？我一直在搜索 MS 站点，但无法找到答案，尽管我看到了在 XP 机器上运行*测试代理的参考。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:16:53.973

作为实验室环境的一部分，您也许可以这样做：http: [//msdn.microsoft.com/en-us/library/ee518930.aspx](http://msdn.microsoft.com/en-us/library/ee518930.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T17:00:40.860

您需要安装 MTM 才能启动测试运行器，测试运行器不能单独安装。要安装 MTM 2012，您需要 Visual Studio 2012 Ultimate、Visual Studio 2012 Premium 或 Test Professional 2012，它们都不能安装在 windows XP 机器上。

“测试代理”组件，用于在多机环境中运行自动化测试，并且该组件在 windows xp 上受支持。

欲了解更多信息：[http ://social.msdn.microsoft.com/Forums/vstudio/en-US](http://social.msdn.microsoft.com/Forums/vstudio/en-US)

# html - 我可以让这些元素水平左对齐吗

> ID：13301617
> 
> 赞同：0
> 
> 时间：2012-11-09T03:17:52.090
> 
> 标签：html, css

所有，我有如下的 html。我想要`H2`元素并`Div`水平左对齐。请帮我 。谢谢。

```
<html>
  <head>
  </head>
  <body>
    <div>
      <h2>xxx</h2><div>xxxx</div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:19:39.957

您可以像这样使用 css 规则：

```
h2{float: left;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T03:20:47.707

是的你可以。您应该为 h2 和 div 设置宽度，并确保它在页面宽度内。然后你应该使用`float: left`css 样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T03:21:55.093

您可以在代码中通过浮动对齐元素使 h2 和 div`float:left;`

**笔记：**

1.  绝对定位的元素会忽略 float 属性！
2.  当浮动元素比它所在的元素更宽或更高时，浮动元素可以与其他元素的边距、边框和填充区域重叠
3.  浮动元素之前的元素不受影响，只有浮动元素影响之后

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T03:22:42.783

您必须在 div 元素上使用 float: left 属性。这是一个带有示例的jsfiddle：

[jsFiddle](http://jsfiddle.net/jXMcn/)

```
<html>
  <head>
  </head>
  <body>
    <div>
      <h2>xxx</h2><div id="test">xxxx</div>
    </div>
  </body>
</html>​ 
```

然后在您的 CSS 中，您将拥有：

```
#test {

    float: left;
}​ 
```

或者，您可以将 h2 设置为显示为块元素。

```
h2 {
    display: block;
} 
```

这将导致您的 div 元素低于 h2 元素，因为将其呈现为块将占用所有水平空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T03:26:11.497

把它放在`<head>`和之间`</head>`

```
 <style>
      body{
           text-align:left;
      }
 </style> 
```

浮动也可以。奇怪的是，在您的浏览器上它还没有显示在左侧。

# user-input - 字段大小：ems（'W's or 'm's）的自然语言比例

> ID：13301621
> 
> 赞同：1
> 
> 时间：2012-11-09T03:18:31.723
> 
> 标签：user-input, typography, uitextinput

多年来，这对我来说一直是一个两难的境地，我只是想问一下。

假设我有一个字符限制，`input`或者`textarea`我想允许足够的可见区域供用户输入最大数量的字符。

限制：10

> iiiiiiiii

对比

> 万维网

最初我会根据 lorum 或随机文本猜测大小。

如果您考虑清楚：**最大大小基于`em`文本中的大小字符**数。

所以我经历了一个使最小可见字段大小`em`x 字符限制的阶段，尽管这显然是荒谬的，因为*不可能构建一个完全由 'w's 和 'm's*和 textareas 组成的句子变得愚蠢地大。

所以我的问题是：你可以在一个句子中放入的绝对**最大的字符是什么？** `em`

或者您将如何查找这些信息？作为一名开发人员，我在这里提出了问题，但是是否存在会知道的语言人员溢出？

会是土拨鼠吗？：

> 如果土拨鼠会扔木头，土拨鼠会扔多少木头？土拨鼠会扔掉他能扔掉的所有木头，如果土拨鼠会扔掉木头的话。

这里的比例是`14(ems)/155(chars)`——比如说不到 10%。

有没有更多的技术方法来确定这一点？是否有一些异常情况会超过这约 10%（比如 www.www.com）？

希望有了这些信息，我可以使输入/文本区域大致与需要的一样大：不更大；不小。

# mysql - 不同表的关键

> ID：13301623
> 
> 赞同：1
> 
> 时间：2012-11-09T03:18:47.080
> 
> 标签：mysql, sql, foreign-keys

我有一个`log`这样的表，可以将我的所有表的所有日志保存在我的 MySQL 数据库中：

```
+-------+-----------+-------------+-------------+-----------+--------+
| LogID | LogTypeID | LogDateTime | ReferenceID | TableName | UserID |
+-------+-----------+-------------+-------------+-----------+--------+
|     1 |         1 |  2012-10... |           1 |    client |      1 |
|     2 |         1 |  2012-10... |           1 |      plan |      1 |
|   ... |       ... |         ... |         ... |       ... |    ... |
+-------+-----------+-------------+-------------+-----------+--------+ 
```

*当我Insert*、*Update*或*Delete*时，该`log`表将所有日志保存到由我的列标识的数据库中的表中。该列是我的列中标识的表的*主键*，我所有的主键都具有相同的类型，并且对于该列也是相同的。***`LogTypeID``ReferenceID`*`TableName``int(10)``ReferenceID`****

 ***我总是使用我的`log`表来识别何时插入此数据，因此我无法清除日志。

**一开始我没有问题，但是现在`log`由于数据很多，使用表时我的查询变得很慢。**我[尝试提高我的数据库服务器的性能，](http://www.mysqlperformanceblog.com/2007/11/01/innodb-performance-optimization-basics/)它变得比以前快一点，但仍然很慢。`INNER JOIN`我对`log`表格的大部分查询。

我正在考虑将*外键*添加到`ReferenceID`所有使用该`log`表的表中，因为我认为键可以提高我的查询性能，但我不确定它是否可行。

我可以让我的`ReferenceID`列成为我所有表的外键吗？

我的数据库服务器是 MySQL Server 5.5.25，我的表都是 InnoDB。

请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:23:53.263

如果我理解正确并`ReferenceID`持有不同的表`PRIMARY KEY`值，您将无法将其定义为 a `FOREIGN KEY`，因为`FOREIGN KEY`约束只能引用单个表并且不能基于其他列值进行切换。

相反，您可以在每个`ReferenceID`和上创建一个索引`TableName`，或者甚至可以在它们之间创建一个复合索引：

```
CREATE INDEX `idx_referenceid` ON `log` (`ReferenceID`);
CREATE INDEX `idx_tablename` ON `log` (`TableName`); 
```

或者作为跨两列的复合索引，假设您总是需要同时查询`log`.

```
CREATE INDEX `idx_referenceid_tablename` ON `log` (`ReferenceID`,`TableName`); 
```***

# file - Symfony 2.0 使用 Memcache 来存储缓存文件

> ID：13301629
> 
> 赞同：2
> 
> 时间：2012-11-09T03:19:30.620
> 
> 标签：file, symfony, memcached, storage

我正在使用 symfony 2.0，我想使用 memcached 来将文件存储在 app/cache 上

是否有任何 config.yml 指令来执行此操作？

非常感谢您的回答。

# powershell - 批处理文件、Powershell 脚本、PSExec 和系统用户

> ID：13301633
> 
> 赞同：4
> 
> 时间：2012-11-09T03:19:55.927
> 
> 标签：powershell, batch-file, privileges, psexec, geneos

我正在尝试对 Windows 任务计划程序进行一些监视，我有一个运行以下内容的 Powershell 脚本：

```
$serverName = hostname
$schedule = new-object -com("Schedule.Service")
$schedule.connect($serverName)
$tasks = $schedule.getfolder("\").gettasks(0)
$tasks |select name, lasttaskresult, lastruntime 
```

这将返回运行它的服务器上的计划任务列表、最后一个任务结果和最后一次运行时间。这样做的目的是将数据集返回到我们的监控解决方案 (Geneos)，我们可以将其用于警报。

我们有一个大的 Win2008 资产，所以我希望脚本集中，允许任何 Geneos 探测器调用它并为它们的主机返回一个数据集。为此，我将 powershell 包装在一个 .bat 文件中，该文件执行以下操作：

```
\\fileserverhk\psexec.exe -accepteula -u admin -p "pwd" powershell.exe cpi \\fileserverhk\scripts\TaskSchedulerMonitor.ps1 -Destination C:\Monitor\TaskSchedulerMonitor.ps1
\\fileserverhk\psexec.exe -accepteula -u admin -p "pwd" powershell.exe -ExecutionPolicy Bypass -File C:\Monitor\TaskSchedulerMonitor.ps1 
```

第一步在本地复制 .ps1 文件以绕过 Powershell 不信任 UNC 路径，第二部分运行脚本。

如果我从测试服务器手动运行 .bat 文件，它可以正常执行（这是在管理员帐户下登录的）。但是，当我通过 Geneos（在 SYSTEM 帐户下运行）触发 .bat 文件时，我得到：

```
Access is denied.
PsExec could not start powershell.exe: 
```

所以基本上我的问题是，如何让 PsExec 在 SYSTEM 帐户下运行时切换用户？尽管 PsExec 为另一个帐户设置了凭据，但显然有一些东西阻止它在系统下运行时发生更改。

我阅读并尝试使用**-h**开关运行它，但出现以下错误：

```
The handle is invalid.
Connecting to local system...

Starting PsExec service on local system...

Connecting with PsExec service on <server>...

Starting powershell.exe on <server>...

Error communicating with PsExec service on <server>: 
```

除了上述错误之外，我最终将 PSExec 和 powershell 进程挂在了远程计算机上。有趣的部分是我可以看到 PSExec 和 PSEXEC.SVC 在 SYSTEM 下运行，而 powershell 在 admin 下运行，所以它几乎就在那里，但有些东西并不完全正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:45:24.067

我们设法在 Windows **schtasks**命令上使用了一个 powershell 包装器（[链接在这里](http://technet.microsoft.com/en-us/library/bb490996.aspx)）。Schtasks 可以在 SYSTEM 帐户下运行，并将返回所有必要的任务信息，因此我们不再需要为权限而烦恼，也不再需要环境上的明文密码（奖励）。

我们包裹：

```
schtasks.exe Query /FO CSV 
```

在 powershell 脚本中，并使用 PS 将输出格式化为 Geneos 期望的 csv 样式。

# datagridview - 如何将指定数据添加到datagridview中的列

> ID：13301634
> 
> 赞同：2
> 
> 时间：2012-11-09T03:19:57.313
> 
> 标签：datagridview

我想将我指定的数据添加到列中，但出现错误“索引超出范围。必须为非负数且小于集合的大小。参数名称：索引”

```
private void Button1Click(object sender, EventArgs e)
    {
        var result = _transactionService.GetTransactionReport(DateTime.Now.AddDays(-2), DateTime.Now);
        foreach (var transaction in result)
        {
            for (int r = 0; r < result.Count; r++)
            {
                dataGridView1.Rows[r].Cells[0].Value = transaction.Number;
                dataGridView1.Rows[r].Cells[1].Value = transaction.DateTime;
                dataGridView1.Rows[r].Cells[1].Value = transaction.Customer.Name;
            }
        }
    } 
```

如何将数据添加到行和列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:38:06.703

是否在此行抛出错误：

```
dataGridView1.Rows[r].Cells[0].Value = transaction.Number; 
```

我相信您会收到该错误，因为您正在引用 DataGridView 中不存在的行。有多种方法可以将行添加到 DataGridView。您可以使用该[`DataGridViewRowCollection.Add`方法](http://msdn.microsoft.com/en-us/library/fbs04kbx.aspx)添加新行并使用来自您的事务对象之一的值填充它：

```
private void Button1Click(object sender, EventArgs e) {
    var result = _transactionService.GetTransactionReport(DateTime.Now.AddDays(-2), DateTime.Now);
    foreach (var transaction in result) {
        for (int r = 0; r < result.Count; r++) {
            dataGridView1.Rows.Add(new object[] { transaction.Number, transaction.DateTime, transaction.Customer.Name });
        }
    }
} 
```

请注意，此代码假定您的 DataGridView 已经至少有三列。

# sencha-touch - sencha 生成应用程序不起作用

> ID：13301641
> 
> 赞同：2
> 
> 时间：2012-11-09T03:20:48.127
> 
> 标签：sencha-touch

我下载[了煎茶触摸](http://www.sencha.com/products/touch/download/)

并提取到一个文件夹中。

然后我下载[了sdk工具](http://www.sencha.com/products/sdk-tools/download)

并安装它。

使用windows 7 cmd，**cd**到 sencha touch 文件夹，然后运行**​​sencha generate app myapp ../myapp**，然后显示红色错误消息“当前工作目录不是有效的SDK目录。请'cd'进入SDK执行此命令之前的目录。”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T17:23:49.430

如果您使用的是 Sencha SDK 2.1.0，则必须使用 Sencha CMD 而不是 Sencha SDK Tools。

这是 Sencha CMD 的系统设置文档： [http ://docs.sencha.com/touch/2-1/#!/guide/command](http://docs.sencha.com/touch/2-1/#!/guide/command)

# php - PHP下拉仅选择列表中的最后一项

> ID：13301645
> 
> 赞同：0
> 
> 时间：2012-11-09T03:21:33.813
> 
> 标签：php, drop-down-menu

我在 PHP 中创建了一个下拉列表，它选择了列表的最后一项，我不知道为什么会这样。

当我回显 event_id （返回的值）时，它每次都是最后一项。该列表已正确填充。

```
$forms = mysql_query("select events.event_title, events.event_id, saved_forms.id from events
                     INNER JOIN saved_forms on saved_forms.id = events.event_id
                    where saved_forms.form_type = 'e' and events.event_by = '$my_username'");   

while($form = mysql_fetch_array($forms)){
    $form_id = $form['event_id'];
    $selection.="<OPTION VALUE=\"$form_id\">".$form['event_title']."</OPTION>";
}

?>
<div id="saved_forms">
<tr><td><select name ="saved_form" value ="<? echo $form_id; ?>" onchange="showUser(<? echo $form_id; ?>)">
<Option value="$form_id"><? echo $selection; ?></Select></td><td>Select Existing Form</td></tr>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:31:50.257

你的问题在这里

```
<select name="saved_form" value="<? echo $form_id; ?>" onchange="showUser(<? echo $form_id; ?>)"> 
```

通过给`select`标签一个值，`$form_id`您很有可能覆盖选项中设置的值。而且您不应该将值硬编码到`onchange`事件中。尝试从中删除值`select`并让`option`标签完成工作。

```
<select name="saved_form" onchange="showUser(this.value)"> 
```

# php - 在高流量 Web 开发中设计一个全局动作计数器

> ID：13301648
> 
> 赞同：1
> 
> 时间：2012-11-09T03:21:48.027
> 
> 标签：php, web-services, api, design-patterns

我们有一个 webapp 可以满足数百个同时登录的用户（在任何给定时间大约 10K-30K 用户）。该应用程序收集分析，特别是每秒可能发生几次的某些用户操作。

到目前为止，我们的应用程序设计已经非常解耦（很多 memcache/redis 具有延迟的 DB 写入），并且我们很好地避免了锁以确保没有任何东西是“中心化的”。

管理层最终决定构建一个实时分析面板，该面板应将这些操作汇总到全局计数器中（低至 1 秒粒度）。拥有这些“全球”计数器的最佳方式是什么？我们可以增加一些 memcache 键，但我们有一个 memcache 集群（EC2），因此迭代所有它们以计算键会延迟这个指标。DB 是不可能的，因为我们在这方面遇到了很多瓶颈，所以所有 DB 写入都通过消息队列（beanstalkd）延迟

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:37:27.930

这似乎适用于 NoSQL 转储操作，并定期聚合。在 EC2 上，您可以在正确的位置访问所需的工具。

您可以完全避免现有的网络服务器基础设施，方法是设置一个辅助网络服务器来记录所有操作，并注入一个单独的数据库服务器。或者，如果不合适，共享网络服务器，但仍卸载到单独的 NoSQL 服务器。

然后，如果“实时”可以延迟一小段时间（几秒钟或几分钟），您可以拥有一个清扫器功能，将 NoSQL 表聚合成更适合分析系统的格式，并注入您的“实时”数据库并清除已处理的 NoSQL 数据。

或者，您可以直接从 NoSQL 获取统计信息？

NoSQL 可能与使用 Memcached 一样快（各种基准测试报告各种结果，具体取决于谁编写了报告），但当您需要聚合时，它肯定会更快地将数据拉到一起。

# flash - 无法编译 JW 播放器

> ID：13301658
> 
> 赞同：0
> 
> 时间：2012-11-09T03:22:50.167
> 
> 标签：flash, apache-flex, flex3, flash-builder, jwplayer

我正在尝试编译 jw 播放器但无法获得它。我刚刚添加了安全令牌，这就是我所做的全部更改。我正在使用 ant 编译并拥有 flex sdk 3。

root@server1 [/home/hold/compile/trunk/fl5]# ant -buildfile build/build.xml build-lib Buildfile: build/build.xml

构建库：

clean-dir: [mkdir] 创建目录: /home/hold/compile/trunk/fl5/bin-release/sdk [exec] 加载配置文件 /home/hold/compile/flex_sdk_3/frameworks/flex-config.xml [exec ] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/HTTPMediaProvider.as：错误：无法明确解析多名称引用。视频（来自 /home/hold/compile/trunk/fl5/src/Video.as）和 flash.media:Video（来自 /home/hold/compile/flex_sdk_3/frameworks/libs/player/10/playerglobal.swc(flash /媒体/视频））可用。

```
 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/VideoMediaProvider.as: Error: Can not resolve a multiname reference unambiguously. Video (from /home/hold/compile/trunk/fl5/src/Video.as) and flash.media:Video (from /home/hold/compile/flex_sdk_3/frameworks/libs/player/10/playerglobal.swc(flash/media/Video)) are available.

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/RTMPMediaProvider.as: Error: Can not resolve a multiname reference unambiguously. Video (from /home/hold/compile/trunk/fl5/src/Video.as) and flash.media:Video (from /home/hold/compile/flex_sdk_3/frameworks/libs/player/10/playerglobal.swc(flash/media/Video)) are available.

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/HTTPMediaProvider.as: Error: Can not resolve a multiname reference unambiguously. Video (from /home/hold/compile/trunk/fl5/src/Video.as) and flash.media:Video (from /home/hold/compile/flex_sdk_3/frameworks/libs/player/10/playerglobal.swc(flash/media/Video)) are available.

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/VideoMediaProvider.as: Error: Can not resolve a multiname reference unambiguously. Video (from /home/hold/compile/trunk/fl5/src/Video.as) and flash.media:Video (from /home/hold/compile/flex_sdk_3/frameworks/libs/player/10/playerglobal.swc(flash/media/Video)) are available.

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/RTMPMediaProvider.as: Error: Can not resolve a multiname reference unambiguously. Video (from /home/hold/compile/trunk/fl5/src/Video.as) and flash.media:Video (from /home/hold/compile/flex_sdk_3/frameworks/libs/player/10/playerglobal.swc(flash/media/Video)) are available.

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/HTTPMediaProvider.as(26): col: 24 Error: Type was not found or was not a compile-time constant: Video.

 [exec]             protected var _video:Video;
 [exec]                                  ^

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/HTTPMediaProvider.as(85): col: 17 Error: Call to a possibly undefined method Video.

 [exec]                     _video = new Video(320, 240);
 [exec]                                  ^

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/VideoMediaProvider.as(21): col: 24 Error: Type was not found or was not a compile-time constant: Video.

 [exec]             protected var _video:Video;
 [exec]                                  ^

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/VideoMediaProvider.as(60): col: 17 Error: Call to a possibly undefined method Video.

 [exec]                     _video = new Video(320, 240);
 [exec]                                  ^

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/RTMPMediaProvider.as(59): col: 28 Error: Type was not found or was not a compile-time constant: Video.

 [exec]         private var _video:Video;
 [exec]                            ^

 [exec] /home/hold/compile/trunk/fl5/src/com/longtailvideo/jwplayer/media/RTMPMediaProvider.as(94): col: 26 Error: Call to a possibly undefined method Video.

 [exec]             _video = new Video(320, 240);
 [exec]                          ^

 [exec] Result: 12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T23:56:30.487

您需要 Flex SDK 4.1 来编译 Jw Player。

# model-view-controller - MVC 混乱，视图不是模板

> ID：13301660
> 
> 赞同：0
> 
> 时间：2012-11-09T03:23:06.370
> 
> 标签：model-view-controller, views, controllers

我已经阅读了很多次文章，但是我仍然无法理解某些部分。文章链接：[Model-View-Confusion 第 1 部分：为什么 MVC 中的视图访问模型](http://r.je/views-are-not-templates.html)

下面的代码是我认为我很困惑的代码。

```
class ListView extends View { 
    public $model; 
    public $template; 
    public $listTemplate; 
    public $errorTemplate; 
    public $itemName = 'items'; 

    public function output() { 
        $result = $this->model->findAll(); 
        if (count($result) > 0) { 
            $this->template = $this->getTemplate($this->listTemplate); 
            $this->template->addSet($this->itemName, $result); 
        } else { 
            $this->template = $this->getTemplate($this->errorTemplate);
        } 

        return $this->template->render(); 
    } 
} 
```

控制器看起来像这样：

```
class UserController extends Controller { 
    public $viewName = 'ListView'; 

    public function showList() { 
        $this->view->model = $this->model->user; 
        $this->view->listTemplate = 'UserList.tpl'; 
        $this->view->errorTemplate = 'ErrorNoUsers.tpl'; 

    } 
} 
```

据我所知，被分配给从命名传递`template`的方法继承的方法的结果，并使用来自 像这样命名的再次命名的方法`View``getTemplate``View``listTemplate``$this->getTemplate($this->listTemplate)`

我感到困惑的是`$template`突然有了一个方法，这意味着它变成了一个类。就在这里`$this->template->addSet($this->itemName, $result);`和`$this->template->render();

你知道那里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:16:01.713

首先，全面披露：我是那篇文章的作者。

它并不是一个完整的代码解决方案，而是一个应用完整的 MVC 关注点分离而不是大多数 PHP 社区声称是 MVC 的 PAC 模式的好处的示例。它如何在幕后工作超出了本文的范围。然而，它应该展示的是视图应该封装模板。在该示例中，模板对象可以是 Smarty 模板、Twig 实例或任何东西。

事后看来，我不应该将引用文件名的变量命名为“模板”。您的困惑是可以理解的： $this->listTemplate; 是对包含模板代码的文件的引用，$this->template; 是加载 listTemplate 中引用的文件的模板对象（可以是 smarty、twig 或其他任何东西）的实例。

我会看看修改它以使其更清晰。我是在两年前写的，如果我再写一遍，我会用不同的措辞和例子解释得更好一些。

# php - 将数组中的值相加到数组中

> ID：13301664
> 
> 赞同：0
> 
> 时间：2012-11-09T03:23:26.837
> 
> 标签：php, arrays, multidimensional-array

我正在尝试添加一个特定的变量（gq_numplayers）并显示它。如果数组在数组中，我该怎么做？如果您不明白发生了什么，我正在使用 GameQ (https://github.com/Austinb/GameQ/)。

编辑：var_dump ($results); [http://pastebin.com/BSeeWMEb](http://pastebin.com/BSeeWMEb)

```
 <?php
// Include the main class file
require '../GameQ.php';

// Define your servers,
// see list.php for all supported games and identifiers.
$servers = array(
    array(
        'id' => 'server 1',
        'type' => 'css',
        'host' => '216.52.148.30',
    ),
    array(
        'id' => 'server 2',
        'type' => 'css',
        'host' => '216.52.143.83',
    ),
    array(
        'id' => 'server 3',
        'type' => 'teamspeak3',
        'host' => 'voice.xenogamers.org:8730',
    )
);

// Init the class, only need this once
$gq = new GameQ();
$gq->addServers($servers);

//optional settings
$gq->setOption('timeout', 3); // Seconds
$gq->setOption('debug', TRUE);

// You can optionally specify some output filters,
// these will be applied to the results obtained.
$gq->setFilter('normalise');

// Send requests, and parse the data
$results = $gq->requestData();

//make total
$total = array_sum(?!?!?!??!?!?);

echo $results['server 1']['gq_numplayers'];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:43:06.720

只需遍历服务器并将玩家数量添加到运行总数中即可。

```
$num_players = 0;
foreach ($results as $server) {
    $num_players += (int)$server['gq_numplayers'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:44:21.010

如果你在 $ArrayA 中有 $ArrayB，那么你需要一个循环。像这样使用 foreach 循环 $ArrayA：

foreach ($ArrayA as $item) {

}

在该循环中，您需要添加代码以对 $item 进行操作。所以每次循环迭代时，$item 将是数组中的下一项！您可以使用在进入循环之前声明的变量（例如 $counter）将它们全部加起来。

但我也注意到您指出了这一点： echo $results['server 1']['gq_numplayers'];

那不是数组中的数组。那是一个单一的二维数组。所以我的回答甚至不会直接适用于它。你必须稍微改变一下循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:45:03.833

您可以尝试通过 array_walk() 自己添加它。

我不确定 requestData() 调用后的 $results 结构，但我们假设它看起来像下面的示例数组：

```
<?php
$results= array(
        array(
        'something'     => 'text',
        'gq_numplayers' => 1,   
        ),
        array(
        'something'     => 'text',
        'gq_numplayers' => 2,   
        ),
        array(
        'something'     => 'text',
        'gq_numplayers' => 3,   
        ),
    );
$total=0;
array_walk($results,function($value,$key) use(&$total) {
    $total+=(int)$value['gq_numplayers'];
});
print $total."\n"; 
```

# json - 使用 Google Http 客户端在 GET 请求中将对象作为参数传递

> ID：13301667
> 
> 赞同：0
> 
> 时间：2012-11-09T03:23:55.773
> 
> 标签：json, http, httpclient, jackson

我正在使用 Google Http Client 和 Jackson 将数据查询到后端（JSON API）。

我需要传递参数（一个 Java bean 对象）。该对象可能有很少或很多场。最初，我尝试将其作为内容传递，如下所示：

`HttpRequest request = requestFactory.buildGetRequest(getUrl(api)).setContent(new JsonCContent(jsonFactory, params));`

但是，我不允许在 GET 操作中设置 HTTP 内容。

有什么建议可以传递这些参数吗？

在一种情况下：我不想编写一个 util 方法来将此对象转换为 URL 参数字符串。但是如果已经有可重用的 API 来做这件事，那就没问题了。

如果可能的话，我需要通用解决方案。因为我要将它应用到 600 个 JSON API 调用。

我的最后一个选择是将后端更改为期望 POST 请求而不是 GET，然后我在客户端执行 POST 操作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-01T05:17:36.010

您可以使用 GenericUrl.put（从 GenericData 继承）来设置查询参数，而不是扩展 GenericUrl。例如：

```
GenericUrl genericUrl = new GenericUrl("http://yourapi.com/request");
genericUrl.put("user", "user name");
genericUrl.put("token", "token values");
HttpRequest request = requestFactory.buildGetRequest(genericUrl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:16:07.877

似乎预期的用途是扩展您用于`buildGetRequest()`呼叫的 URL 类。例如，假设您想提供两个额外的查询参数，称为“用户”和“令牌”。您可以使用以下方法执行此操作：

```
HttpRequest request = requestFactory.buildGetRequest(
    new CustomUrl("http://www.yourserver.com").setUser(userId).setToken(token)); 
```

其中`CustomUrl`类定义为：

```
public class CustomUrl extends GenericUrl {
    public CustomUrl(String encodedUrl) {
        super(encodedUrl);
    }

    @Key("user")
    private String mUserId;

    @Key("token")
    private String mToken;

    public CustomUrl setUser(String userId) {
        mUserId = userId;
        return this;
    }

    public CustomUrl setToken(String token) {
        mToken = token;
        return this;
    }
} 
```

这些值对于`@Key`注释不是必需的，但如果提供，将用作相应查询参数的名称。如果省略，将使用变量的名称（[参见示例](http://code.google.com/p/google-http-java-client/source/browse/dailymotion-simple-cmdline-sample/src/main/java/com/google/api/services/samples/dailymotion/cmdline/simple/DailyMotionSample.java?repo=samples#85)）

查看[google-http-client 的 javadoc](http://javadoc.google-api-java-client.googlecode.com/hg/1.0.10-alpha/com/google/api/client/http/GenericUrl.html)了解更多信息。

# mysql - 将表更改为全文时出现 MySQL 错误

> ID：13301668
> 
> 赞同：2
> 
> 时间：2012-11-09T03:24:03.513
> 
> 标签：mysql, database, full-text-search

`#1283 - Column 'title' cannot be part of FULLTEXT index`当我尝试在我的数据库中包含我想通过 FULLTEXT 更改的列时 出现错误。

```
ALTER TABLE users ADD FULLTEXT (`firstname`, `lastname`, `title`, `description`) 
```

我不明白为什么会显示此错误或如何解决此问题。将不胜感激任何想法或提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T03:37:21.890

`FULLTEXT`index 仅适用于`MyISAM`表，不适用于`InnoDB`. 您可以通过键入以下内容来检查您使用的存储引擎：

```
SHOW CREATE TABLE users; 
```

然后，您可以使用此命令`ALTER`在表中使用引擎：`MyISAM`

```
ALTER TABLE users ENGINE = MyISAM; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-02T04:08:42.743

从 Mysql 5.6 开始，INNODB 现在支持 FULLTEXT INDEX。现在，我在将 FULLTEXT 添加到我的表时也遇到了这个问题，并遇到了多个问题。

1.  您需要确保将 ibdata1 文件设置为自动扩展。[http://dev.mysql.com/doc/refman/5.0/en/innodb-data-log-reconfiguration.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-data-log-reconfiguration.html)

2.  我的磁盘空间快用完了。当 mysql 更改表时，mysql 使用 tmp 数据和内存来执行此操作。您需要确保 cnf 文件中的 tmp 目录指向一个有足够空间的目录。此外，由于它使用内存，它将使用您的虚拟内存。这意味着您的操作系统驱动器需要有足够的空间。如果这不是一个选项，请创建一个 tmp 重复 tmp 表并使用全文更改该表并正确插入 INSERT INTO `table`SELECT * FROM og_table

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:30:14.237

如果您的表是**InnoDB**，那么您不能使用它。并且需要放下它。

也可以参考 InnoDB 的限制@http: [//dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-01T13:04:43.680

INNODB 从 Mysql 5.6 开始支持 FULLTEXT INDEX

为避免错误“列 * 不能成为 FULLTEXT 索引的一部分”，请检查列的 TEXT INCODING ;) 它必须相同。

# c# - 字符串未正确拆分

> ID：13301669
> 
> 赞同：3
> 
> 时间：2012-11-09T03:24:27.917
> 
> 标签：c#, arrays, string, dictionary, split

我正在尝试将一个字符串拆分为一个字符串 []，该字符串由最初使用休闲代码保存的字符串组成。

```
 private string[] ConvertWordsFromFile(String NewFileText)
    {
        char[] delimiterChars = { ' ', ',', '.', ':', '/', '|', '<' , '>','/','@','#','$','%','^','&','*','"','(',')',';'};       
        string[] words = NewFileText.Split(delimiterChars);
        return words;

    } 
```

然后我使用它来将单词添加到与单词键及其频率值保持同步的字典中。所有其他重复的单词都不会作为键添加，只有值会受到影响。然而，最后一个词被算作一个不同的词，因此被制成一个新的键。我怎样才能解决这个问题？

这是我在字典中添加单词的代码：

```
public void AddWord(String newWord)
    {
       newWord = newWord.ToLower();
        try
        {
            MyWords.Add(newWord, 1);
        }
        catch (ArgumentException)
        {
            MyWords[newWord]++;
        }

    } 
```

为了澄清我遇到的问题，即使字符串末尾的单词是重复的，它仍然被视为一个新单词，因此是一个新字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T03:30:10.947

随机猜测 - 最后的空格会产生您不期望的空词。如果是 - 为[Split](http://msdn.microsoft.com/en-us/library/ms131448%28v=vs.100%29.aspx)使用正确的选项：

```
var words = newFileText.Split(delimiterChars,
   StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T04:21:17.983

拆分不是执行您想做的事情的最佳选择，因为您最终会遇到此类问题，并且您还必须指定所有分隔符等。

一个更好的选择是使用正则表达式而不是您的 ConvertWordsFromFile 方法，如下所示：

```
Regex.Split(theTextToBeSplitted, @"\W+") 
```

此行将返回一个包含所有“单词”的数组。一旦你有了它，下一步应该是创建你的字典，所以，如果你可以在你的代码中使用 linq，那么最简单、更简洁的方法就是：

```
var theTextToBeSplitted = "#Hi, this is a 'little' test: <I hope it is useful>";
var myDictionary = Regex.Split(theTextToBeSplitted, @"\W+")
                        .GroupBy(x => x)
                        .ToDictionary(x => x.Key, x => x.Count()); 
```

这就是你所需要的。

祝你好运！

# gnuplot - 如何在 GNUplot 中仅使用标签绘制迭代坐标（x，y）数据？

> ID：13301671
> 
> 赞同：0
> 
> 时间：2012-11-09T03:24:39.330
> 
> 标签：gnuplot

我有这样的数据集

> 0 268 195
> 1 353 199
> 2 318 209
> 3 268 232
> 4 370 238
> 5 326 253
> 6 246 265
> 7 372 284
> 8 313 290
> 9 258 297
> 0 268 196
> 1 353 199
> 2 318 209
> 3 268 233
> 4 370 238
> 5 325 253
> 6 246 265
> 7 372 284
> 8 313 290
> 9 258 297

我想将第一列用于标签，将第二列和第三列用于（x，y）图，但是，我想只绘制一个时间标签而不进行迭代。我应该怎么做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:00:07.457

你想要类似的东西：

```
plot 'datafile' u 2:3:1 with labels 
```

...我不太确定您所说的“我只想绘制一个没有迭代的时间标签”是什么意思...

在我看来，您只想使用 1 个唯一标签。例如，只有一个标签是`0`，只有一个标签是`1`等等。为简单起见，我将使用第一个小 python 脚本：

```
#test.py
import sys

seen = set()
with open(sys.argv[1]) as f:
    for line in f:
        num,rest = line.split(None,1)
        if num not in seen:
            seen.add(num)
            sys.stdout.write(line) 
```

现在我们可以在 gnuplot 中绘制我们的文件：

```
plot '< python test.py yourdatafile' u 2:3:1 w labels 
```

这是一个版本，`test.py`它将平均所有具有相同“值”的标签的位置。

```
import sys
from collections import defaultdict

d = defaultdict(list)
with open(sys.argv[1]) as f:
    for line in f:
        num,x,y = map(int,line.split())
        d[num].append((x,y))

#now average
for k,v in d.items():
    x,y = zip(*v)
    avg_x = float(sum(x))/len(x)
    avg_y = float(sum(y))/len(y)
    print k,avg_x,avg_y 
```

# javascript - Jquery on（'click'）在第一次点击后没有触发

> ID：13301672
> 
> 赞同：2
> 
> 时间：2012-11-09T03:24:44.243
> 
> 标签：javascript, jquery

我有一些 HTML：

```
<div class="post-container self">
    <a href="/user/Wiz">
        <img class="avatar" alt="Profile Picture" src="">
    </a>
    <div class="post-body">
        <div class="post" style="margin-left:0px;">
            <div class="post-timestamp" style="display:inline-block;float:right">
                <a href="/posts/80" style="color:#999">Oct 31</a>
            </div>
            <div class="post-functions dropdown displaynone" style="float:right;margin-right:5px;">
                <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">
                    <i class="icon-cog"> 
                    </i>
                </a>
                <ul class="dropdown-menu post-dropdown" role="menu" aria-labelledby="dLabel">
                    <a class="post-delete" href="javascript:void(0)"><i class="icon-trash"> </i>Delete</a>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

有了这个，我有一些 Jquery：

```
$('.posts-content').on('click', '.post-delete', function(e) {
                $('.post-dropdown').dropdown();
                if (confirm('Are you sure you want to delete this post?')) {
                    var $this = $(this);
                    $.ajax({
                        url: '/a/delete_post',
                        type: 'POST',
                        dataType: 'json',
                        data: {'p' : post_id},
                        success: function() {
                            //... 
                            return true;
                        }
                    });
                }
                return false;
            }); 
```

第一次单击时一切正常，但是如果我转到另一个帖子并尝试单击`.post-delete`，则该事件永远不会触发，并且控制台中不会显示任何内容。如果我使用它也可以`$.click()`，但我需要动态创建元素。为什么不`$.on('click')`触发第二次点击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:28:37.530

我的猜测是您使用的下拉插件会更改 DOM 结构。

```
$('.post-dropdown').dropdown(); 
```

顺便提一句，

`$this.parent().parent().parent().parent().parent()`这真的是非常糟糕的做法。
你应该`closest`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:27:50.493

如果您正在动态创建元素，请尝试：

```
$(document).on('click', '.post-delete', function(e) { }); 
```

# mysql - 过滤Form 2中的datagridview并将过滤后的数据返回到Form1中的datagridview

> ID：13301676
> 
> 赞同：0
> 
> 时间：2012-11-09T03:25:27.473
> 
> 标签：mysql, vb.net, winforms, visual-studio-2010, datagridview

请在这方面我真的需要帮助...我有 2 个表格`Form1`和`Form2`. 在`Form2`我过滤`DGV`依据`Textboxchanged event`

**待定代码**

```
Dim dvSection As DataView
    Dim tableAdapter As New testDataSetTableAdapters.testingTableAdapter
    Dim ds As New testDataSet
    dv.Table = TestDataSet.testing
    dv.RowFilter = "CONVERT(TransactionID, System.String) LIKE '%" & TextBox1.Text & "%'"
    TestingDataGridView.DataSource = dv 
```

`dv`我通过将 分配为新`DataSource`的 for 来返回过滤后的数据`Form1 DGV`。

**此代码有效**

```
 Form1.TestingDataGridView1.DataSource = dv 
```

在我的问题中，在`Form1`（带有过滤数据）中。我想`Edit`在`data`里面`DGV`然后`Update`我的`MySql Table "testing"`。我对此感到非常困惑，因为我以前从未这样做过。`Update`我通常使用 ff 代码`DGV`。`MySql Table`在这种情况下，ff 代码如何不起作用。

```
 If MsgBox("Save Changes Made in this Cell?", MsgBoxStyle.YesNo, MsgBoxStyle.Exclamation) = DialogResult.Yes Then
        Me.Validate()
        Me.TestingBindingSource.EndEdit()
        Me.TestingTableAdapter.Update(Me.TestDataSet.testing)

    End If 
```

我现在真的很困惑，有点帮助会非常好。谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:51:21.900

我现在终于可以更新数据视图了……让我在这里发布我的代码以供将来参考，以防万一有人也需要帮助。这是一个示例项目，所以我没有深入研究代码，而是直接讨论了我是如何解决它的。

`Form1`拥有`Datagridview(databound), 1 button "Form2"`

**表格 1 的代码**

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        `TODO: This line of code loads data into the TestDataSet.testing table. You can move, or remove it, as needed.`

        Me.TestingTableAdapter.Fill(Me.TestDataSet.testing)

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Form2.Show()
        ' Me.Hide()'
        Me.TestingBindingSource.DataSource = TestDataSet
        Me.TestingTableAdapter.Dispose()
        Me.TestingTableAdapter.Fill(Me.TestDataSet.testing)

    End Sub

    Private Sub TestingDataGridView1_CellEndEdit(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles TestingDataGridView1.CellEndEdit

        If MsgBox("Save Changes Made in this Cell?", MsgBoxStyle.YesNo, MsgBoxStyle.Exclamation) = DialogResult.Yes Then
            Me.Validate()
            Form2.TestingBindingSource().EndEdit()
            Me.TestingTableAdapter.Update(Me.TestDataSet.testing)

        End If
    End Sub
End Class 
```

`Form2`拥有`DGV (databound), 2Buttons, "Return", "Save", and a textbox`

```
 Private Sub TestingBindingNavigatorSaveItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TestingBindingNavigatorSaveItem.Click
        Me.Validate()
        Me.TestingBindingSource.EndEdit()
        Me.TableAdapterManager.UpdateAll(Me.TestDataSet)

    End Sub

    Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'TODO: This line of code loads data into the TestDataSet.testing table. You can move, or remove it, as needed.'
        Me.TestingTableAdapter.Fill(Me.TestDataSet.testing)

    End Sub

    Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged

        Dim tableAdapter As New testDataSetTableAdapters.testingTableAdapter
        Dim ds As New testDataSet

        dv.Table = TestDataSet.testing
        dv.RowFilter = "CONVERT(TransactionID, System.String) LIKE '%" & TextBox1.Text & "%'"
        TestingDataGridView.DataSource = dv
        Form1.TestingDataGridView1.DataSource = dv

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        Form1.Show()
        Me.Hide()

        Me.TestingTableAdapter.Dispose()
        Me.TestingTableAdapter.Fill(Me.TestDataSet.testing)
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        If MsgBox("Save Changes Made in this Cell?", MsgBoxStyle.YesNo, MsgBoxStyle.Exclamation) = DialogResult.Yes Then
            Me.Validate()
            Me.TestingBindingSource.EndEdit()
            Me.TestingTableAdapter.Update(Me.TestDataSet.testing)

        End If
    End Sub 
```

# google-chrome - 在 chrome-extension:// url 上运行用户脚本

> ID：13301677
> 
> 赞同：2
> 
> 时间：2012-11-09T03:25:49.113
> 
> 标签：google-chrome, google-chrome-extension, userscripts

用户脚本是否可以在 ( `@match`) 开头的 URL上运行`chrome-extension://`，即更改其他扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:49:12.457

是的，这是可能的。从[内容脚本，“匹配模式”文档](http://developer.chrome.com/extensions/match_patterns.html)：

> 匹配模式本质上是一个**以允许的方案**（http、https、文件、ftp 或**chrome-extension**）开头的 URL，并且可以包含“*”字符。特殊模式`<all_urls>`匹配任何以允许的方案开头的 URL。

（请注意，Chrome 中的用户脚本被转换为稍微专业化的“内容脚本”）

# objective-c - UIDatePicker 时区问题

> ID：13301678
> 
> 赞同：4
> 
> 时间：2012-11-09T03:25:52.763
> 
> 标签：objective-c, timezone, uidatepicker

我遇到了一个奇怪的问题`UIDatePicker`。我正在尝试制作一个允许我根据其他时区设置提醒的应用程序。IE。提醒我纽约下午 4 点。

使用 时`UIDatePicker`，返回的`NSDate`对象始终是手机时区中的选定时间，转换为 UTC。它不会尊重设置为另一个时区的时区或日历属性。

这是我所有的荣耀代码！

```
NSLog(@"Date: %@", [datePicker date]);
NSLog(@"DatePicker TimeZone: %@", [datePicker timeZone]);
NSLog(@"Calendar TimeZone: %@", [datePicker.calendar timeZone]);

NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"America/New_York"];

NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[cal setTimeZone:timeZone];
NSLog(@"New Calendar TimeZone: %@", [cal timeZone]);

NSLog(@"Updating timezones");
[datePicker setTimeZone:timeZone];
[datePicker setCalendar:cal];

NSLog(@"Date: %@", [datePicker date]);
NSLog(@"DatePicker TimeZone: %@", [datePicker timeZone]);
NSLog(@"Calendar TimeZone: %@", [datePicker.calendar timeZone]); 
```

并且输出...

```
2012-11-09 14:13:04.834 DatePickerTest[4524:c07] Date: 2012-11-09 03:12:59 +0000
2012-11-09 14:13:04.835 DatePickerTest[4524:c07] DatePicker TimeZone: (null)
2012-11-09 14:13:04.837 DatePickerTest[4524:c07] Calendar TimeZone: Australia/Sydney (GMT+11:00) offset 39600 (Daylight)
2012-11-09 14:13:04.837 DatePickerTest[4524:c07] New Calendar TimeZone: America/New_York (EST) offset -18000
2012-11-09 14:13:04.837 DatePickerTest[4524:c07] Updating timezones
2012-11-09 14:13:04.882 DatePickerTest[4524:c07] Date: 2012-11-09 03:12:59 +0000
2012-11-09 14:13:04.882 DatePickerTest[4524:c07] DatePicker TimeZone: America/New_York (EST) offset -18000
2012-11-09 14:13:04.883 DatePickerTest[4524:c07] Calendar TimeZone: America/New_York (EST) offset -18000 
```

返回的`NSDate`第一行是正确的，它是悉尼 14:12 的 UTC 时间，但是更改时区和日历后，返回的日期仍然是基于悉尼 14:12，而不是 14:13纽约。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-19T12:03:35.377

`UIDatePicker`在 Swift 4 中，您可以通过以下操作更改时区：

设置`datePickerMode`为`dateAndTime`, 以根据时区查看时间 `datePicker.datePickerMode = .dateAndTime`

使用您想要的时区创建常量 timeZone

`let timeZone = TimeZone.init(identifier: "America/New_York")`

执行可选绑定，因为 timeZone 包含可选值。

`guard let newTimeZone = timeZone else {return}`

将 newTimeZone 设置为 datePicker.timeZone

`datePicker.timeZone = newTimeZone`

# objective-c - 使用键值编码将 JSON 转换为 Objective-C 对象

> ID：13301681
> 
> 赞同：1
> 
> 时间：2012-11-09T03:26:25.180
> 
> 标签：objective-c, ios, json

我是来自 Java 世界的 Objective-C 新手，所以我试图找出如何做一些在 Java 中（相对）简单的事情。

在一个 iPhone 应用程序中，我正在访问一个返回 JSON 的休息网络服务。我正在使用 AFNetworking 框架，它支持使用添加到 iOS 5 的 NSJSONSerialization 类。我想知道是否有一种“自动”方法可以将返回的 JSON 对象转换为我的“强”类型类之一（例如，我的 UserAccount 类）。

换句话说，我正在尝试做类似的事情：

```
id json = ... call webservice that returns json, which AFNetworking parses ...
UserAccount myUserAccount = [UserAccount alloc] init];
//then here I'd like something that iterates through all the properties on the 
//json object and sets them on the myUserAccount object using key value coding 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:34:51.940

不，不是我所知道的。最常见的方法是向您的类添加一个构造函数，该构造函数`initWithDictionary`接受 JSON 字典并从中获取相关信息。

# bash - 远程脚本上的正则表达式

> ID：13301682
> 
> 赞同：1
> 
> 时间：2012-11-09T03:26:36.770
> 
> 标签：bash

我正在尝试使用 ssh 在远程机器（两台机器都使用 bash）上运行脚本，该脚本具有以下几行：

```
cd /home/invitado/
rm -r !(Desktop|Downloads|Videos|Pictures) 
```

所以当我运行时`ssh hostname './remove'`，我得到这个错误：

> 意外标记 `(' 附近的语法错误

我尝试将此行附加到脚本

```
shopt -s extglob 
```

但是我仍然有同样的错误，那我该怎么办？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:33:18.537

`shopt -s extglob`应该是之前`rm -r !(Desktop|Downloads|Videos|Pictures)`。

`extglob`要验证，通过运行 just 来查看原始值是多少`shopt`。

注意：就我而言，该值是在我`rm`直接从 shell 运行命令时设置的。但是当我把它放在脚本中时，它失败了。意识到从交互式 shell 运行时默认设置 extglob。& 在脚本内运行时默认禁用。

# c++ - 使用复制昂贵的类作为 std::map 中的映射值是否有效？

> ID：13301684
> 
> 赞同：0
> 
> 时间：2012-11-09T03:26:50.683
> 
> 标签：c++, boost, std, c++-standard-library

简而言之，使用它是否有效

```
std::map<int, std::set<int> > instead of
std::map<int, boost::shared_ptr<std::set<int>>? 
```

对于向量，我会选择 boost::shared_ptr。但是对于std::map，我不确定是否值得。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-13T16:33:44.190

文档`std::map::insert()`说[http://en.cppreference.com/w/cpp/container/map/insert](http://en.cppreference.com/w/cpp/container/map/insert)：

> 没有迭代器或引用无效。

对于`std::map::erase()` [http://en.cppreference.com/w/cpp/container/map/erase](http://en.cppreference.com/w/cpp/container/map/erase)

> 对已擦除元素的引用和迭代器无效。其他引用和迭代器不受影响。

这意味着无论是插入还是擦除都不会移动对象，因此您不必担心复制的费用，除非您需要将已经创建的大对象插入到地图中。但在这种情况下，我会使用`std::map::emplace()`方法和/或移动语义，而不是使用共享指针使代码复杂化。

# jquery - jquery $.ajax php端POST序列化表单

> ID：13301689
> 
> 赞同：0
> 
> 时间：2012-11-09T03:27:36.157
> 
> 标签：jquery

提前抱歉，我知道有一些关于这个话题的讨论，我只是对此很陌生，并且已经筋疲力尽地试图学习它，所以我必须问一下。

问题：我想将我的数据以表单形式发送到 php 文件，这就是我在 js 方面的内容

表单验证后..

```
else {      
    $.ajax({
        type: 'POST',
        url: 'entry.php',
        cache: false,
        data: $(".contact_form").serializeArray(),
        success: function (data) {
            if (data == "error") {
                $('.success_box').hide();
                $('.error_box').show();
            }
            else {
                $('#sname').val('');
                $('#email').val('');
                $('#title').val('');
                $('#message').val('');
                $('#photo1').val('');
                $('#photo2').val('');
                $('.error_box').hide();
                $('.success_box').show();
            }
        }
    });
} 
```

我的 html 表单有名称和 id's = sname 电子邮件标题消息

我不知道我的 javascript 当前是否正在将数据发送到我的 php 文件，因为我不知道如何在 php 页面上访问这些值？也因为它是一个 js/ajax 请求，我相信我不需要对 html 表单进行操作，就像我没有在 html 上调用我的 php 文件，只是在 js 上，如果这是错误的，请纠正我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:38:48.857

你的 PHP 页面会有这种效果......我实际上并不知道你的表单中有什么，所以我只是假设。

```
$sname=$_REQUEST['sname'];
$email=$_REQUEST['email'];
$title=$_REQUEST['title'];
$message=$_REQUEST['message'];
$photo1=$_REQUEST['photo1'];
$photo2=$_REQUEST['photo2']; 
```

然后我不知道你想用它做什么，但如果你将它发送到数据库，你会用 SQL 语句传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:33:06.760

发布到 PHP 的值应该在[`$_POST`superglobal](http://www.php.net/manual/en/reserved.variables.post.php)中可用。小心处理那里的信息，因为讨厌的人可以发送恶意字段/值。

您的浏览器应该有一个开发人员控制台，您可以使用它来检查发送到您的 PHP 脚本的请求，以防您在 PHP 端执行此操作时遇到问题。在 Firefox 中，安装 Firebug 扩展。在 Chrome 中，只需点击`F12`并查看“网络”选项卡。

这里有一个关于处理用户提供的数据的 StackOverflow 讨论：[在 php 中清理整个 $_POST 数组的好方法是什么？](https://stackoverflow.com/questions/3645131/what-is-a-good-method-to-sanitize-the-whole-post-array-in-php)

# iphone - 我可以使用 iPhone 或 ipad 设备作为服务器吗？

> ID：13301691
> 
> 赞同：0
> 
> 时间：2012-11-09T03:27:42.930
> 
> 标签：iphone, objective-c, ipad, webserver

我可以在不越狱的情况下将 iPhone 或 iPad 设备用作服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:05:21.607

uPnP 服务器？

即使您有无限数据计划，或连接到 Wi-Fi，将设备作为服务器也是不明智的。它不是为服务器而设计的。

但是您仍然可以实现 uPnP 的逻辑，并提供您的设备 IP 以供其他人连接到您的设备。但是，频繁使用网络会导致电池快速耗尽。你应该注意到这一点。

# android-emulator - 如何让 Eclipse 识别模拟器并在每次运行时重新加载应用程序

> ID：13301694
> 
> 赞同：1
> 
> 时间：2012-11-09T03:28:05.533
> 
> 标签：android-emulator, eclipse-plugin

与 adb 的连接已断开，出现严重错误。您必须重新启动 adb 和 Eclipse。squares_senior_project] 请确保 adb 正确位于 'C:\Users\Nick\android-sdks\platform-tools\adb.exe' 并且可以执行。

在过去的 4 天里，当我尝试运行我的应用程序时，我不断收到上述错误。我可以通过 AVDM 启动模拟器并运行已经加载的旧版本的应用程序，但由于某种原因，模拟器不会再更新应用程序，我不知道为什么。当模拟器启动并运行后我尝试运行它时，我收到错误：createRenderThread 无法连接。我已经重新启动了我的计算机、eclipse 和 adb。我认为这可能是我的防火墙阻止计算机识别模拟器的原因，但我看不到任何似乎与 eclipse 相关的东西，但我可能是错的。这是我的高级项目，截止日期快到了，我越来越绝望，所以任何和所有的建议都将不胜感激。谢谢你。

# javascript - 下载文件，在浏览器中打开新标签

> ID：13301695
> 
> 赞同：11
> 
> 时间：2012-11-09T03:28:07.980
> 
> 标签：javascript, jquery

在我的站点上执行一些操作后，用户可以下载文件。首先，我问用户：“你想下载文件吗”。这是用 fancybox 创建的模态对话框。有按钮：是和否。当用户单击“是”时，我想在浏览器中打开新选项卡并显示标准保存文件对话框。我有这个代码：

```
$(document).on('click', '#agentAcceptSave', function () {
        alert(1);
        window.open = '/ticket?orderId=' + $('#agentOrderId').val();
} 
```

但是，新标签未打开且 url 未调用，但显示警报。哪里有错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T03:40:14.343

我尝试了这段代码，它对我有用：

```
$(document).on('click', '#download', function() {  
    window.open('http://www.google.com');    
}); 
```

# python - Django Reddit 风格投票 - URL 关键字参数错误

> ID：13301696
> 
> 赞同：0
> 
> 时间：2012-11-09T03:28:21.383
> 
> 标签：python, html, django

使用[Django Reddit Style Voting Tutorial](http://code.google.com/p/django-voting/wiki/RedditStyleVoting)，并收到此错误。建立一个问答风格的网站，显示一个主题，然后是与该主题相关的问题，然后是与问题相关的答案。

```
TypeError at /home/1/
object_list() got an unexpected keyword argument 'movie_id' 
```

这是我的代码

```
#urlconf
url(r'^$', 'index'),
url(r'^(?P<movie_id>\d+)/$', object_list, dict(queryset = Question.objects.all(), 
        template_object_name = 'question', template_name = 'qanda/questions.html', 
        paginate_by = 15, allow_empty = True)), 
```

我的索引视图列出了所有主题并呈现在 index.html 上，然后每个主题都有一个 ID，然后与该 ID 关联的问题将呈现在下一页 questions.html 上。

```
#index.html
{% if latest_movie_list %}
    {% for movie in latest_movie_list %}
        <li><a href="/home/{{ movie.id }}/">{{ movie.title }}</a></li>
{% endfor %} 
```

如何修复错误？我需要movie_id b/c，这就是我呈现带有相关问题的下一页的方式，但我无法拉出下一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:26:46.437

我自己经历了那些过时文档的痛苦。这是我如何让它工作的：

[如何在不使用原始 sql 的情况下使用 Django 连接两个表？](https://stackoverflow.com/questions/11073698/how-do-you-join-two-tables-using-django-without-using-raw-sql)

此外，您可能希望将其添加到投票/urls.py

```
 url(r'^links/(?P<object_id>\d+)/(?P<direction>up|down|clear)vote/?$',                                                                                                                
     vote_on_object,                                                                                                                     
     dict(                                                                                                                               
         model=Movie,                                                                                                                     
         template_object_name='link',                                                                                                    
         template_name='movie/link_confirm_vote.html',                                                                                    
         allow_xmlhttprequest=True,                                                                                                      
         ),                                                                                                                              
     name="link_vote",) 
```

# shell - 使用 fakeroot/fakechroot 来 tar 包

> ID：13301700
> 
> 赞同：0
> 
> 时间：2012-11-09T03:28:46.423
> 
> 标签：shell, fakeroot

有一个 foo.tar.gz 源它将安装到 /lib/modules。但是，我不是root，没有足够的权限。我正在尝试编写一个脚本来自动构建包。

```
#!/bin/bash
tar xf foo.tar.gz
cd foo
make
fakeroot make install 
```

表明

```
mkdir: cannot create directory `/lib/modules/foo.so 
```

我不想真正放入/lib，也许我可以放入$HOME/rootfs。

使用 fakeroot 的正确方法是什么？或者，是否有一个简单的脚本可以让我追踪如何使用 fakeroot？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:46:53.337

您对 的角色感到困惑`fakeroot`。它*不*用于将特权提升到 root 以*安装*软​​件包。它在创建包时*使用*。由于您没有创建包，因此`fakeroot`您无能为力。另请参阅[fakeroot 的描述](http://linux.about.com/cs/linux101/g/fakeroot.htm)。

要临时提升权限，您应该使用`sudo`.

# git - 在 GIT 中维护分支而不与 master 合并

> ID：13301705
> 
> 赞同：2
> 
> 时间：2012-11-09T03:29:23.490
> 
> 标签：git, merge, branch, master

在我的办公室，我们有一个自制的内容管理系统。缓慢而稳定地，我们设置了 60 个 CMS 实例。是的，我们是一家大公司；一个非政府组织。

我们的大多数办公室都使用当前形式的 CMS。一些办公室定制了颜色、字体，基本上是皮肤。其他一些构建新功能，有时我们会将其带入核心。我的任务是更有效地管理源。

可以说 - 我正在管理“核心”，我有办公室“A”和办公室“B”。Office A 仅自定义颜色，但 Office B 对核心进行了一些更改（不是很多），并且它们的代码与核心不同。我只想对“核心”负责。当我开发一项新功能时，我想（在接受后）将这些更改与其他办公室同步。

我想创建永远不会与主人合并的分支。但是我在Master上做的改动不能去分支？？我应该采取什么方法，应该注意什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:34:25.043

这是一种可能的方法。

对于你想要应用到 master 的 office 分支中的提交，只需在 master 上挑选它们。如果你知道你在做什么，你也可以在 master 之上 rebase 一系列提交。

反过来说，合并确实是合适的；您将希望将 master 合并到 office 分支中，而不是相反。您将查看要将核心更改应用到的办公室分支，并且`git merge master`. 这将尝试合并，但只会触及办公室分支；master 分支不会被移动。

您可能还需要考虑提供默认颜色列表，并允许创建一个新文件来覆盖这些颜色。您将在其中列出覆盖文件名，`.gitignore`以便这些更改永远不会提交到 Git 存储库。您将能够更新 master 中的默认值并将其合并到 office 分支中，但除了已部署的副本之外，您永远不会看到 office 颜色覆盖。

# ruby - base64 编码长度参数

> ID：13301708
> 
> 赞同：4
> 
> 时间：2012-11-09T03:29:35.357
> 
> 标签：ruby, base64

我正在解码一个 base64 字符串，对其进行修改，然后用 Ruby 对其进行重新编码。我重新编码时的问题是 ruby​​ 编码库在 60 个左右的字符后添加了换行符。如何告诉它每行限制没有最大字符数？

```
val = "QmFzZTY0IGlzIGEgZ2VuZXJpYyB0ZXJtIGZvciBhIG51bWJlciBvZiBzaW1pbGFyIGVuY29kaW5nIHNjaGVtZXMgdGhhdCBlbmNvZGUgYmluYXJ5IGRhdGEgYnkgdHJlYXRpbmcgaXQgbnVtZXJpY2FsbHkgYW5kIHRyYW5zbGF0aW5nIGl0IGludG8gYSBiYXNlIDY0IHJlcHJlc2VudGF0aW9uLiBUaGUgQmFzZTY0IHRlcm0gb3JpZ2luYXRlcyBmcm9tIGEgc3BlY2lmaWMgTUlNRSBjb250ZW50IHRyYW5zZmVyIGVuY29kaW5nLg0KDQpCYXNlNjQgZW5jb2Rpbmcgc2NoZW1lcyBhcmUgY29tbW9ubHkgdXNlZCB3aGVuIHRoZXJlIGlzIGEgbmVlZCB0byBlbmNvZGUgYmluYXJ5IGRhdGEgdGhhdCBuZWVkcyBiZSBzdG9yZWQgYW5kIHRyYW5zZmVycmVkIG92ZXIgbWVkaWEgdGhhdCBhcmUgZGVzaWduZWQgdG8gZGVhbCB3aXRoIHRleHR1YWwgZGF0YS4gVGhpcyBpcyB0byBlbnN1cmUgdGhhdCB0aGUgZGF0YSByZW1haW5zIGludGFjdCB3aXRob3V0IG1vZGlmaWNhdGlvbiBkdXJpbmcgdHJhbnNwb3J0LiBCYXNlNjQgaXMgdXNlZCBjb21tb25seSBpbiBhIG51bWJlciBvZiBhcHBsaWNhdGlvbnMgaW5jbHVkaW5nIGVtYWlsIHZpYSBNSU1FLCBhbmQgc3RvcmluZyBjb21wbGV4IGRhdGEgaW4gWE1MLg=="

decoded_val = Base64.decode64(val)
encoded_val = Base64.encode64(val)

#=> QmFzZTY0IGlzIGEgZ2VuZXJpYyB0ZXJtIGZvciBhIG51bWJlciBvZiBzaW1p
#   bGFyIGVuY29kaW5nIHNjaGVtZXMgdGhhdCBlbmNvZGUgYmluYXJ5IGRhdGEg
#   YnkgdHJlYXRpbmcgaXQgbnVtZXJpY2FsbHkgYW5kIHRyYW5zbGF0aW5nIGl0
#   IGludG8gYSBiYXNlIDY0IHJlcHJlc2VudGF0aW9uLiBUaGUgQmFzZTY0IHRl
#   cm0gb3JpZ2luYXRlcyBmcm9tIGEgc3BlY2lmaWMgTUlNRSBjb250ZW50IHRy
#   YW5zZmVyIGVuY29kaW5nLg0KDQpCYXNlNjQgZW5jb2Rpbmcgc2NoZW1lcyBh
#   cmUgY29tbW9ubHkgdXNlZCB3aGVuIHRoZXJlIGlzIGEgbmVlZCB0byBlbmNv
#   ZGUgYmluYXJ5IGRhdGEgdGhhdCBuZWVkcyBiZSBzdG9yZWQgYW5kIHRyYW5z
#   ZmVycmVkIG92ZXIgbWVkaWEgdGhhdCBhcmUgZGVzaWduZWQgdG8gZGVhbCB3
#   aXRoIHRleHR1YWwgZGF0YS4gVGhpcyBpcyB0byBlbnN1cmUgdGhhdCB0aGUg
#   ZGF0YSByZW1haW5zIGludGFjdCB3aXRob3V0IG1vZGlmaWNhdGlvbiBkdXJp
#   bmcgdHJhbnNwb3J0LiBCYXNlNjQgaXMgdXNlZCBjb21tb25seSBpbiBhIG51
#   bWJlciBvZiBhcHBsaWNhdGlvbnMgaW5jbHVkaW5nIGVtYWlsIHZpYSBNSU1F
#   LCBhbmQgc3RvcmluZyBjb21wbGV4IGRhdGEgaW4gWE1MLg== 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T04:09:04.583

[RFC 4648：Base16、Base32 和 Base64 数据编码](https://www.rfc-editor.org/rfc/rfc4648#section-3.3)有这样的说法：

> **3.3\. 编码数据中非字母字符的解释**
> [...]
> 如果编码数据在解释基本编码数据时包含基本字母表之外的字符，则实现必须拒绝编码数据，除非引用本文档的规范另有明确说明。此类规范可能会像 MIME 所做的那样声明，在解释数据时应该简单地忽略基本编码字母表之外的字符（“在你接受的内容上保持自由”）。请注意，这意味着任何相邻的回车/换行 (CRLF) 字符构成“非字母字符”并被忽略。

所以换行符很好，几乎所有东西都会忽略它们，即使它们不严格符合 RFC 4648。

此外，[精美的手册](http://ruby-doc.org/stdlib-1.9.3/libdoc/base64/rdoc/Base64.html#method-i-decode64)有这样说：

> **编码64（bin）**
> 
> 返回 Base64 编码版本的`bin`. 此方法符合 RFC 2045。每 60 个编码字符添加换行符 [原文如此]。

因此，60 个字符的行长是有意指定的。如果您想要严格的 RFC 4648 Base64（即没有换行符），那么有[`strict_encode64`](http://ruby-doc.org/stdlib-1.9.3/libdoc/base64/rdoc/Base64.html#method-i-strict_encode64)：

> **strict_encode64(bin)**
> 
> 返回 Base64 编码版本的`bin`. 此方法符合 RFC 4648。不添加换行符。

所以你可以说`Base64.strict_encode64(val)`得到你正在寻找的输出。

作为参考，这里[是 RFC 2045 的相关部分](https://www.rfc-editor.org/rfc/rfc2045#section-6.8)：

> **6.8\. Base64 Content-Transfer-Encoding**
> [...]
> 编码的输出流必须以每行不超过 76 个字符的形式表示。解码软件必须忽略表 1 中未找到的所有换行符或其他字符。

所以 60 个字符的行长度有点随意，但符合 RFC 2045，因为`60 < 76`.

# regex - Prolog 中的正则表达式

> ID：13301709
> 
> 赞同：6
> 
> 时间：2012-11-09T03:29:40.273
> 
> 标签：regex, prolog

为了了解 Prolog 中的正则表达式，我正在尝试编写确定输入是否符合模式的函数；我的功能如下：

```
split(W, [[], W]).

split([X|W], [[X|W1], W2]) :- split(W, [W1, W2]).

match(eps, []).
match(symb(A), [ A ]).
match(union(R1, R2), W) :- match(R1, W).
match(union(R1, R2), W) :- match(R2, W).
match(conc(R1, R2), W)  :- split(W, [W1, W2]), W1 \= [], W2 \= [], match(R1, W1), match(R2, W2).
match(star(R), W)       :- match(R, eps).
match(star(R), W)       :- split(W, [W1, W2]), W1 \= [], match(R, W1), match(star(R), W2). 
```

我输入以下 SWIPL 并得到以下结果：

```
?- match(star(symb(a)),[a,a,a,a]).
false.

?- match(star(symb(b)),[b]).
false. 
```

据我所知，其他功能工作正常。有人能告诉我我在处理明星方面哪里出错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:47:20.083

啊，别管我是个傻瓜。我需要改变

```
match(star(R), W) :- match(R, eps). 
```

只是

```
match(star(R), []). 
```

我不断收到 stackoverflows，因为没有基本案例。生活和学习我猜！

# xaml - Silverlight 5：将命令绑定到 listboxitem

> ID：13301714
> 
> 赞同：1
> 
> 时间：2012-11-09T03:30:42.727
> 
> 标签：xaml, silverlight-5.0, listboxitem

我是 silverlight 的初学者，所有这些 mvvm 模式有点令人困惑。

在我的应用程序中，我有两个列表框，一个用于国家，一个用于州。

我想要做的是，当我从 listbox1 中选择一个国家/地区时，第二个列表框将显示所选国家/地区的州。

即我想将xaml 中的命令绑定到listboxitem。

我试图通过谷歌找到解决方案，但任何一种解决方案都太复杂了，我无法理解或使用不同的 mvvm 模式，如棱镜、光等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:42:02.137

有几种不同的方法可以做到这一点：

1：（**最简单！**）将第一个 ListBox 的 SelectedItem 绑定到您的 ViewModel。在 ViewModel 属性的 Setter 中，更改要绑定到第二个列表框的列表。请注意，您的 ViewModel 属性将需要使用 INotifyPropertyChanged 来通知列表已更改。

例如：如果您的 xaml 看起来像：

```
<ListBox ItemSource="{Binding ListOne}" SelectedItem="{Binding SelectedItem, Mode=TwoWay}"/>
<ListBox ItemSource="{Binding ListTwo}"/> 
```

那么你的 ViewModel 可能有点像：

```
public List<MyItem> ListOne { get; set; }

private MyItem _selectedItem
public MyItem SelectedItem
{
    get { return _selectedItem; }
    set
    {
        _selectedItem = value;
        ListTwo = _selectedItem.SubItems;
    }
}

private List<MyOtherItem> _listTwo
public List<MyOtherItem> ListTwo
{
    get { return _listTwo; }
    set
    {
        _listTwo = value;
        RaisePropertyChanged("ListTwo");
    }
} 
```

2：如果第二个列表的数据实际上是第一个列表中项目的属性，则可以使用 xaml 中的 Binding 直接将它们连接起来。

`ItemSource="{Binding Path=SelectedItem.MyItemsProperty, ElementName=MyFirstListBoxName}"`

3：您可以使用带有 EventToCommand 的 EventTrigger 将 SelectedItemChanged 事件转换为 Command 执行。您并没有将命令绑定到 ListBoxItem，而是将命令绑定到*change*。

我会推荐第一个选项，它最简单，可以让您很好地控制正在发生的事情而不会变得太复杂。

# mysql - 使用分区 MySQL 表的 Hibernate 映射

> ID：13301719
> 
> 赞同：4
> 
> 时间：2012-11-09T03:32:02.647
> 
> 标签：mysql, hibernate, jpa, partitioning

我有一个 MySQL 数据库，其中（大多数）表在 TENANT_ID 列上进行分区。每个表还有一个使用 AUTO_INCREMENT 的 ID 字段，因此在所有分区中都是唯一的。数据库主键是一个组合（ID，TENANT_ID），因为 MySQL 要求分区列是主键的一部分。

在我的 Java 代码中，我只映射了带有 @Id 注释的 ID 列。这主要是为了避免 Hibernate 中围绕复合键的许多问题。我现在面临的问题是，Hibernate 生成的大多数 SQL 语句只使用 ID 列。例如，由 Hibernate 生成的 UPDATE 语句将读作

```
UPDATE object SET value = ? WHERE ID = ? 
```

但是，由于此查询排除了 TENANT_ID 上的任何谓词，因此它没有充分利用分区，并且需要扫描每个分区，直到找到 ID。我希望生成的查询产生：

```
UPDATE object SET value = ? WHERE ID = ? AND TENANT_ID = ? 
```

我的问题是是否有一种简单的方法可以做到这一点，而不必求助于 JPA 中的复合键，因为我知道许多人不鼓励使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:53:05.727

您可以使用嵌入式实体，例如包含 id 和 EntityId 的 ObjectPK。而不是使用 @EmbeddedId 从 Object 实体中引用它。

# android - 输入焦点时 JQuery Mobile 不适合屏幕

> ID：13301721
> 
> 赞同：3
> 
> 时间：2012-11-09T03:32:39.330
> 
> 标签：android, jquery, cordova, jquery-mobile

我正在开发一个使用 PhoneGap 和 JQuery Mobile for Android 的应用程序。

我在登录页面上有 2 个输入，一切正常，但是当我关注一个输入时，页面将不适合屏幕并且可以水平滚动。解除输入框焦点后，页面再次适合屏幕。

不关注输入框
[http://imageshack.us/a/img90/9909/device20121109111004.png](http://imageshack.us/a/img90/9909/device20121109111004.png)

专注于输入框，页面右侧大约有2px
[http://img3.imageshack.us/img3/7078/device20121109111036.png](http://img3.imageshack.us/img3/7078/device20121109111036.png)

```
<div data-role="content">
        <form id="loginForm">
            <ul data-role="listview" data-inset="true">
                <li><div data-role="fieldcontain" class="ui-hide-label">
                        <input type="text" name="username" id="username" placeholder="username" autocomplete="off" />
                    </div>
                    <div data-role="fieldcontain" class="ui-hide-label" >
                        <input type="password" name="password" id="password" placeholder="password"/>
                    </div></li>
            </ul>
            <br /> <br /> <input type="submit" value="Login" name="btnSubmit" id="btnSubmit" />
        </form>
    </div> 
```

我该如何解决这个问题？我想在专注于输入框时适合屏幕谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:40:44.533

在`AndroidManifest.xml`文件中添加`android:windowSoftInputMode="adjustResize"`到您的主要活动。

例如：

```
<application
        android:name=".MyAndroidApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">
        <activity
            android:name=".MyAndroidActivity"
            android:configChanges="orientation|keyboardHidden"
            android:windowSoftInputMode="adjustResize"
            android:label="@string/app_name"> 
```

@查看[安卓活动](http://developer.android.com/guide/topics/manifest/activity-element.html)

# .net - 使用 LibTiff.net 将黑白 win 32 位图转换为 TIFF

> ID：13301722
> 
> 赞同：1
> 
> 时间：2012-11-09T03:32:42.403
> 
> 标签：.net, bitmap, libtiff.net

当我通过 libtiff.net 处理来自扫描仪的图像时，我正在观察“镜像”效果。

这是我的代码：

```
public static byte[] GetTiffImageBytes(byte[] win32Bitmap, WinApi.BITMAPINFOHEADER infoHeader)
{
    try
    {
        using (var ms = new MemoryStream())
        {
            using (Tiff tif = Tiff.ClientOpen("InMemory", "w", ms, new TiffStream()))
            {
                if (tif == null)
                    return null;

                tif.SetField(TiffTag.IMAGEWIDTH, infoHeader.biWidth);
                tif.SetField(TiffTag.IMAGELENGTH, infoHeader.biHeight);
                tif.SetField(TiffTag.COMPRESSION, Compression.CCITTFAX4);
                tif.SetField(TiffTag.PHOTOMETRIC, Photometric.MINISBLACK);
                tif.SetField(TiffTag.ROWSPERSTRIP, infoHeader.biHeight);

                // TODO: ? Used to be resolutions?
                tif.SetField(TiffTag.XRESOLUTION, infoHeader.biWidth);
                tif.SetField(TiffTag.YRESOLUTION, infoHeader.biHeight);

                tif.SetField(TiffTag.SUBFILETYPE, 0);
                tif.SetField(TiffTag.BITSPERSAMPLE, 1);
                tif.SetField(TiffTag.FILLORDER, FillOrder.MSB2LSB);
                tif.SetField(TiffTag.ORIENTATION, Orientation.TOPLEFT);

                tif.SetField(TiffTag.SAMPLESPERPIXEL, 1);
                tif.SetField(TiffTag.T6OPTIONS, 0);
                tif.SetField(TiffTag.RESOLUTIONUNIT, ResUnit.INCH);

                tif.SetField(TiffTag.PLANARCONFIG, PlanarConfig.CONTIG);

                // Image "stride" is a lenght in bytes of one pixel row
                var stride = infoHeader.biSizeImage / infoHeader.biHeight;
                var offset = infoHeader.biSize;

                // raster stride MAY be bigger than TIFF stride (due to padding in raster bits)
                for (int i = 0; i < infoHeader.biHeight; i++)
                {
                    var res = tif.WriteScanline(win32Bitmap, offset, i, 1);
                    if (!res) return null;

                    offset += stride;
                }
            }

            return ms.GetBuffer();
        }
    }
    catch (Exception ex)
    {
        return null;
    }
} 
```

我从以下示例改编了这段代码：http: [//bitmiracle.com/libtiff/help/convert-system.drawing.bitmap-to-a-black-and-white-tiff.aspx](http://bitmiracle.com/libtiff/help/convert-system.drawing.bitmap-to-a-black-and-white-tiff.aspx)

传入的 win32 位图具有标头（也作为参数复制）。基本上，我将数据行复制到 TIFF 中，我确实得到了图像，但它是镜像的，看起来像这样：我对 win32 代码非常陌生（这个位图来自 twain 驱动程序）并且不确定它是否与操作系统相关。

我通过 Silvrlight 的 P-Invoke 调用 win32，然后我得到位图并在 Silverlight 的 LibTiff.net 版本中进行处理。我想当我将扫描线添加到 TIFF 时我需要“镜像”扫描线，但我想知道我是否需要重新发明轮子，或者它已经以某种方式包含在库中？

看看当我使用上面的代码处理它时图像是如何出现的：

![在此处输入图像描述](../Images/c8632a347dc437a88a13717c31ff338d.png)

**编辑**

更改了以下行：

```
tif.SetField(TiffTag.ORIENTATION, Orientation.TOPLEFT); 
```

所以它说 BOTTOMLEFT 并为我的应用程序修复了它。当我使用 LibTiff 读取和显示数据时，它可以工作。但！它无法在 Windows 图像查看器中正确显示。只是翻转数据顺序更安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:41:37.190

Windows 位图与底线一起存储。基本上他们使用笛卡尔坐标系，将点（0,0）放在左下角。

因此，您可能应该只调整`for`编写扫描线的代码中的循环（使其以相反的顺序编写扫描线）。

使用`TiffTag.ORIENTATION`标签也是一种解决方案，但问题是：大多数观众完全忽略了这个标签。

# android - Android 2.3 和 Blackberry 将页面显示为可让您向右和底部滚动的列

> ID：13301724
> 
> 赞同：0
> 
> 时间：2012-11-09T03:32:54.247
> 
> 标签：android, html, css, blackberry

有谁知道可能导致这种行为的原因？如果您在 Android 2.3 或 Blackberry 上查看此页面，您应该会发现问题。

您可以直接滚动到页面末尾，然后滚动到永远存在的黄色背景。您也可以滚动页面的右侧来执行相同的操作。

它在 Android 4 和 iOS 5 上运行良好。

在此处查看有问题的网站：

> [http://wwwa1nbkclientsitecom.zippysites.com/](http://wwwa1nbkclientsitecom.zippysites.com/)

ps我昨天问过这个问题，但细节较少。然后我做了一些有意义的改变，但这些并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:59:24.887

这是页脚中的动态谷歌地图。这与我的页面布局或样式无关。我所做的一切都很好。删除动态谷歌地图修复了它。解决方案：替换为静态谷歌地图。无论如何，在移动设备的页面中使用嵌入的动态地图有点糟糕。

# c++ - Boost 单元测试在 Visual Studio 2012 中引发异常

> ID：13301727
> 
> 赞同：1
> 
> 时间：2012-11-09T03:33:11.300
> 
> 标签：c++, visual-c++, boost, visual-studio-2012, boost-test

我最近将我的笔记本电脑升级到了 Windows 8，以便我可以为 W8 和 WP8 进行开发。我有一些使用 Boost.Test 进行单元测试的 Visual Studio 2010 创建的项目。我尝试将项目转换为 VS2012 项目，但遇到了问题，所以我只是使用与以前相同的源代码创建了新的 VS2012 项目。但是，每个单元测试套件在我运行它时都会引发异常。我已经对其进行了调试，发现它在尝试`make_report`在`results_reporter.ipp`. 违规行是

```
case CONFIRMATION_REPORT:
    s_rr_impl().m_formatter->do_confirmation_report( framework::get<test_unit>( id ), *s_rr_impl().m_output ); 
```

在代码的某处，有一个`map`对象有一些不好的内存，因此出现了异常。我正在使用 Boost 1.50.0。我还尝试了最新版本 1.52.0，但结果相同。VS2012 是否存在错误，或者是否有一些我不知道的设置/配置，或者在 Windows 7 与 8 上开发的差异？

**编辑**

这是一个示例测试，它在我的 VS2012 和 Boost 1.50.0 环境中引发异常：

```
#define BOOST_TEST_MODULE exception.test
#include <boost/test/unit_test.hpp>

BOOST_AUTO_TEST_SUITE(SuiteTest)

BOOST_AUTO_TEST_CASE(exceptionTest){
    BOOST_REQUIRE(true);
}

BOOST_AUTO_TEST_SUITE_END() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:25:22.973

这是因为一些全局覆盖而发生的，`new`并且`delete`通过我项目中的另一个测试类意外导入。

# c# - 使用 C# VS2012 创建新文档时出现 System.MissingMethodException 错误

> ID：13301729
> 
> 赞同：1
> 
> 时间：2012-11-09T03:33:21.823
> 
> 标签：c#, visual-studio-2012, imanage

我正在尝试使用 iManage 扩展库（iManExt.dll）创建新文档。它在我的本地机器上运行良好。但是当我将它部署到其他机器时，即使所有 dll 都在那里，它也不起作用。我从桌面站点收到以下错误

```
System.MissingMethodException: Method not found: 'System.Type  
System.Runtime.InteropServices.Marshal.GetTypeFrom CLSID(System.Guid)'. 
```

以下是我用于创建新文档的 C# 代码。

```
private IManage.IManDocument NewDocumentProfile(IManage.IManFolder aFolder, String aFileName)
{
    IManage.IManDocument NewDocument;

    IMANEXTLib.ImportCmd MyCommand = new IMANEXTLib.ImportCmd();
    IMANEXTLib.ContextItems MyContext = new IMANEXTLib.ContextItems();

    MyContext.Add("ParentWindow", Helper.GetActiveWindow());
    MyContext.Add("ImanDestinationObject", aFolder);

    MyContext.Add("IManExt.Import.KeepCheckedOut", 0);
    MyContext.Add("IManExt.Import.FileName", aFileName);
    MyContext.Add("IManExt.CalledFromIntegration", false);
    MyContext.Add("IManExt.OpenCmd.NoCmdUI", false);

    MyCommand.Initialize(MyContext);
    MyCommand.Update();

    if (MyCommand.Status == (int)IMANEXTLib.CommandStatus.nrActiveCommand)
    {
        MyCommand.Execute();
        NewDocument = MyContext.Item("ImportedDocument");
    }
    else
    {
        NewDocument = null;
    }
    return NewDocument;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:14:48.373

感谢您的回答。我解决了那个问题。但是，我不知道为什么会这样。当我将该 dll (IMANEXTLib) 的嵌入互操作类型属性设置为 false 时，它​​工作正常。但是，当我将其设置为 true 时，它​​不起作用。

# javascript - 更改用于修改 div 显示/隐藏的链接的背景颜色

> ID：13301734
> 
> 赞同：0
> 
> 时间：2012-11-09T03:34:46.617
> 
> 标签：javascript, html, css

我有一个导航列表：

```
<ul>
<li><a href="#home">Home</a></li>
<li><a href="#contact">Contact Me</a></li>
</ul> 
```

单击 Home 或 Contact 时，会隐藏或显示相应的 div。

```
<script>

$("#tabs a").click(function(e){
    e.preventDefault();
    $(".toggle").hide();
    var toShow = $(this).attr('href');
    $(toShow).show();
});

</script>

<div id="home" class="toggle" style="display:none"> This is the Home page.</div> 
```

**问题**

如何在导航列表中显示对应的div时使单词的背景不同？

例如，当显示 div“home”时，导航中的“Home”一词具有蓝色背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:41:49.767

您需要将背景颜色添加到单击的元素，但您还需要确保从最后单击的元素中删除它。

```
$("#tabs a").click(function(e){
    e.preventDefault();
    $(".toggle").hide();
    var toShow = $(this).attr('href');
    // Remove the class from any siblings if it exists
    $("#tabs a").removeClass('yourClass');
    // Add the class to the clicked #tab a
    $(this).addClass('yourClass');
    $(toShow).show();
}); 
```

然后在你的 CSS 文件中创建一个类（例如，'yourClass'），它赋予背景颜色和/或任何你想编辑的东西。

```
.yourClass {
    background: #e2e2e2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T03:43:25.073

```
 <script>

    $("#tabs a").click(function(e){
        e.preventDefault();
        $(#tabs a).removeClass('yourClass');
        $(this).addClass('active');
        $(".toggle").hide();
        var toShow = $(this).attr('href');
        $(toShow).show();
    });

    </script> 
```

**css**

```
.active
{
background-color:blue;
} 
```

希望这可以帮助！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T03:45:44.780

一个例子：

```
$('ul a').click(function() {
    $(this).closest('ul').find('a').css('background-color', '');

    $(this).css('background-color', 'red')
    return false;
});​ 
```

[**一个演示**](http://jsfiddle.net/ECkFB/)

# c++ - 两个不同的类 不能一起工作的双链表和 Pair 类

> ID：13301735
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:34:50.040
> 
> 标签：c++, list, std-pair

我正在编写一个类似于 boggle 的程序，但难度要小得多。我的程序程序旨在接收字母的行数（所有相同数量的字母），然后在不同的行中接收字母。按照我要猜的单词数和我要猜的单词后的每一行进行；如下图所示：

```
5
SRENG
OLIOA
VISKE
THAOR
PDTAL
4
LORE
NOSE
ROILS
SAILORS 
```

输出显然是 board ，但是没有什么特别的需要，找到了哪些单词，哪些单词没有，以及成功单词的方向：

如：

```
LORE
"FOUND!"
"W, NE, E" 
```

所以现在这让我感到困惑。我有一个名为 scramble.cc 的主程序，其中包含解决实际问题的所有代码，而我正在使用的其他程序是 pair.h、pair.cc、list.h 和 list.cc（当然我的编译器也是如此）我的配对代码：

```
#include <iostream>
#include <cstdlib>
#ifndef PAIR
#define PAIR

using namespace std;

struct Pair{
 int r, c;
 Pair(size_t r1, size_t c1);
 Pair();
 void print(ostream & ostr)const;
 size_t get(size_t index);
};
ostream & operator<<(ostream & ostr, const Pair & p);
bool operator==(const Pair & p1, const Pair & p2);
bool operator!=(const Pair & p1, const Pair & p2);

#endif 
```

对.cc

```
#include <iostream>
#include <cstdlib>
#include "pair.h"
using namespace std;

Pair::Pair(size_t r1, size_t c1)
{
 r=r1;
 c=c1;
}

Pair::Pair()
{
r=c=0;
}

void Pair::print(ostream & ostr) const
{
 ostr << r << "," << c;
}

ostream & operator<<(ostream & ostr, const Pair & p)
{
 p.print(ostr)
 return ostr;
}

bool operator==(const Pair & p1, const Pair & p2)
{
 return p1.r == p2.r and p1.c == p2.c
}

bool operator!=(const Pair & p1, const Pair & p2)
{
 return not(p1==p2)
} 
```

我的清单.h：

```
#include <cstdlib>
#include <iostream>
#include "pair.h"
using namespace std;
class List
{
 public:
  typedef Pair ElementType;
  typedef int ElementType //this is what I used before putting in pair.h/.cc

 List();
 ~List();
 List(const List & orig)
 void add(const ElementType & item, size_t index);
 void removeAt(size_t index);
 void remove(const ElementType & item)
 size_t find(const ElementType & item) const;
 ELementType get(size_t index) const;
 size_t getSize() const;
 void output(std::ostream & ostr) const;

private:
 struct Node{
  Node *prev;
  ELementType data;
  Node*next;
  Node();
  Node(Node *p, Node *n);
  Node(Node *p, const ElementType & d, Node *n);
};

void _setCurrentIndex(size_t index) const;

size_t size;
mutable size_t currentIndex;
Node *front;
Node *rear;
mutable Node *current;

}; 
```

我的 list.cc 代码：

```
#include <iostream>
#include <cassert>
#include <cstdlib>
#include "list.h"

using namespace std;

List::Node::Node()
{
 prev = next = NULL;
}

List:: List()
{
 front = new Node()
 rear = new Node()
 front->next = rear;
 rear->prev = front;

 currentIndex=0;
 current = front->next;
 size=0;
}

List::~List()
{
 _setCurrentIndex(0);
 while(current)
  {
   Node *temp = current;
   current = current -> next;
   delete temp;
  }
//not showing deep copy function b/c it isn't important for this program
void List::add(const ElementType & item, size_t index)
{
 assert(0<=index && index <= size);
 _setCurrentIndex(index);
 size++;

 Node *born = new Node;
 born->data = item;
 born->prev = current->prev;
 born->prev->next = current;
 born->prev = born;
 current = born;
}

void List::removeAt(size_t index)
{
 assert(0<=index<=getSize());
 _setCurrentIndex(index);

 Node *old = current;
 current->prev->next = current->next;
 current->next->prev = current->prev;
 delete old;
 size--;
}

void List::remove(const ElementType & item)
{
 for(size_t i=0; i<size; i++)
  {
  _setCurrentIndex(i);
   if(find(item)<getSize())
    {
     Node *tempOld = current;
     current->next->prev = current->prev;
     current->prev->next = current->next;
     current = current->next;

     delete tempOld;
     size--;
    }
  }
}

size_t List::find(const ElementType & item) const
{
 for(size_t i=0; i<size; i++)
  {
   _setCurrentIndex(i)
   if(get(i) == item)
    return get(i);
  }
 return getSize();
}

List::ElementType List::get(size_t index) const
{
 assert(0 <= index < size);
 _setCurrentIndex(index);
 assert(current->next != NULL);
 return current->data;
}

size_t List::getSize() const
{
 return size;
}

void List::output(std::ostream & ostr) const
{
 for(size_t i=0; i<size; i++) 
  {
  _setCurrentIndex(i);
  ostr << current->data << " ";
  }
 ostr << endl;
}

void List:: _setCurrentIndex(size_t index) const
{
 int x;
 if(currentIndex > index)
  x = currentIndex - index;
 else
  x = index-currentIndex;

 if(index < (sizez_t)x)
  {
  current = front->next;
  curentIndex=0;
  while(currentIndex != index)
   {
   current = current->next;
   currentIndex++;
   }
  }
 else if((size-index) < (size_t)x)
  {
   current = rear;
   currentIndex = size;
   while(currentIndex != index)
    {
     current = current->prev;
     currentIndex--;
    }
  }
 else
  {
   if(currentIndex > index)
    {
    while(currentIndex!=index)
     {
      current = current->prev;
      currentIndex--;
     }
    }
   else
    {
     while(currentIndex!=index)
      {
       current = current->next;
       currentIndex++;
      }
    }
  }
} 
```

我的scramble.cc：

```
#include <iostream>
#include <cstdlib>
#include "list.h"
#include "pair.h"
using namespace std;

List history;
Pair p1 = Pair(1,1);

int main()
{

} 
```

我的 Makefile

```
scramble: scramble.o list.o pair.o
     g++ -o scramble scramble.o list.o pair.o
scramble.o: scramble.cc list.h pair.h
     g++ -c scramble.cc
list.o: list.cc list.h pair.h
     g++ -c list.cc
pair.o pair.cc pair.h
     g++ -c pair.cc 
```

这就是我的代码，我必须手动写出来，因为我使用的程序不会复制和粘贴，所以如果有小错误（例如忘记；或拼写错误），请原谅我。

所以我最大的问题是，当我尝试制作 Pairs 并将它们放入 List 时，它会给我带来无法转换`Pair`为`size_t`in 函数的错误，例如`Find`. 还有大量未定义的引用`List::List()`, `List::~List()`, `Pair::Pair(unsigned long, unsigned long)`, `List::add(Pair const&, unsigned long)`, `List::getSize() const`, `List::removeAt(unsigned long)`。

那么任何人都可以在这里帮助我了解我需要对我的 List 类和配对做些什么吗？我的目标是将对存储在列表中并能够删除它们，这是我的主要目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:51:17.167

作为一条建议，您应该在以后的帖子中包含更少的代码。如果您将问题缩小到特定的代码段，您更有可能获得帮助。此外，准确的错误消息非常有用。

至于你描述的问题，

> 它通过给我无法在 Find 等函数中将 Pair 转换为 size_t 的错误而吓坏了

您的问题出在此代码上：

```
size_t List::find(const ElementType & item) const
{
   ...
   if(get(i) == item)
    return get(i); 
   ...
}

List::ElementType List::get(size_t index) const 
```

请注意，`List::get`返回 a`List::ElementType`并`List::find`返回 a `size_t`。因此，该语句`return get(i);`试图`List::ElementType`在期望返回 a 的函数中返回 a `size_t`。您很可能希望它`return i;`改为。

# python - Python 3：递归查找数字是否为偶数

> ID：13301738
> 
> 赞同：-3
> 
> 时间：2012-11-09T03:35:12.063
> 
> 标签：python, recursion, python-3.x

我正在编写一个程序，它必须找出一个数字是否是偶数。它需要遵循这个模板。我可以找到它是否递归地查找数字是否偶数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T03:41:34.290

关键是您需要返回一个布尔值：

```
def isEven(num):
    if (num <= 0):
        return (num == 0)
    return isEven(num-2) 
```

对于较大的数字，尽管这很快超过了 Python 的默认最大递归深度。这可以通过调用`sys.setrecursionlimit(n)`where`n`是您想要允许的递归调用的数量来解决。 `n`反过来又受您所在平台的限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T03:45:12.367

试试这个，它适用于整数值`0 <= n <= sys.getrecursionlimit()-2`：

```
def even(n):
    return True if n == 0 else odd(n - 1)

def odd(n):
    return False if n == 0 else even(n - 1) 
```

这是一对相互递归函数的一个很好的例子。当然，这不是找到答案的最有效方法——但从学术的角度来看仍然很有趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T03:40:17.523

这个模板会有所帮助。您需要填写注释行。你在问题中的那个不起作用 - 你没有将任何东西传递给`isEven`. 这仅在 时才有效`n >= 0`，否则它将使您的程序崩溃。如果您需要处理负数，很容易解决。

```
def isEven(n):
    if n == 0:
        # Number is even
    elif n == 1:
        # Number is odd
    else:
        # Call the function again, but with a different n 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T04:24:33.287

一个非常愚蠢的递归用例，但无论如何这是我的版本

```
import random

def isEven(num):
    if random.random() < 0.5:
        # let's learn about recursion!
        return isEven(num)
    else:
        # let's be sane!
        return num % 2 == 0 
```

*免责声明：*如果您提交此内容，您可能会在老师面前打勾，并被视为聪明人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T04:57:09.280

接受 wim 的挑战，找到一种“不同”的方式来做到这一点：原型递归模式是`foo(cdr(x))`，有一个空的基本情况`list`……所以让我们围绕它来写：

```
def isEven(num):
  def isEvenLength(l):
    if not l:
      return True
    return not isEvenLength(l[1:])
  return isEvenLength(range(num)) 
```

# git - 为什么我的 git push 到 HostGator 共享主机失败？

> ID：13301748
> 
> 赞同：2
> 
> 时间：2012-11-09T03:36:11.497
> 
> 标签：git, shared-hosting, git-push

我正在尝试将本地存储库部署到远程目录。我已经`git init --bare`在这个远程目录中运行，并将正确的 ssh 路径添加到我的本地 git repo 分支（名为 dev）`git remote add server ssh://user@domain.com:2222/path/to/repo`。

当我运行时，`git push server dev`我得到以下输出：

```
Counting objects: 44, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (37/37), done.
Writing objects: 100% (44/44), 89.58 KiB, done.
Total 44 (delta 2), reused 27 (delta 2)
error: Could not read 551dd5c5d67e3b2da4074d8f15a59a324a063a03
fatal: Failed to traverse parents of commit 0615b940c3247e3547de1379ab09a4a6bb614252
error: Could not read 551dd5c5d67e3b2da4074d8f15a59a324a063a03
fatal: Failed to traverse parents of commit 0615b940c3247e3547de1379ab09a4a6bb614252
To ssh://user@domain.com:2222/path/to/repo
 ! [remote rejected] dev -> master (missing necessary objects)
error: failed to push some refs to 'ssh://user@domain.com:2222/path/to/repo' 
```

我不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:09:39.087

正如“ [git repository failed to traverse parent error](https://stackoverflow.com/a/9539126/6309) ”中提到的，这也可能是由浅克隆引起的。

但是，在您的情况下（测试存储库），从头开始重新启动是最简单的。

一般来说，你在[这个线程](http://git.661346.n2.nabble.com/fetch-and-bundle-don-t-work-in-semi-broken-repo-td5651528.html)中有一些有趣的建议：

> 1\. 用“ `git rev-list --objects`”找出是什么`40aaeb204dc`。
> 
> 如果这不起作用：
> 
> 2\. 运行“ `git fsck --full`”，包装完好无损。这需要一段时间。
> 结果将包括缺失对象的列表（如`40aaeb204dc`），最重要的是，它们的类型。
> 
> 遵循[howto/recover-corrupted-blob-object.txt](https://github.com/git/git/blob/master/Documentation/howto/recover-corrupted-blob-object.txt)将有助于识别损坏的松散对象。

# mysql - 什么是等同于 Oracle 的“开始于...连接”的标准 SQL 查询，但不是特定于 DBMS

> ID：13301750
> 
> 赞同：2
> 
> 时间：2012-11-09T03:36:30.363
> 
> 标签：mysql, sql, oracle, hierarchical-query

我想知道是否有与 Oracle 的分层语法等效的通用 SQL `start with...connect by`。我需要可以在任何数据库上使用的东西。这是我的意思的那种查询（使用 Oracle 的示例 EMP 表）：

```
SELECT empno , ename , job , mgr ,hiredate ,level 
FROM emp 
START WITH mgr IS NULL 
CONNECT BY PRIOR empno = mgr. 
```

递归公用表表达式适用于许多数据库实现，但不适用于 MySQL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T05:50:25.403

在 MySQL 中没有办法做到这一点。[Mike Hillyer 的一篇文章中列出了一些令人讨厌的 hack，](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)它们也可以用于其他数据库。但是在 Oracle 中使用像嵌套集模型这​​样不优雅的东西只是为了在 MySQL 上运行相同的代码似乎是不恰当的。

通用方式是 CTE，因为它们在 SQL-99 中指定，并且大多数 RDBMS 风格都支持它（甚至 Oracle 在 11gR2 中为其 CTE 添加了递归）。MySQL 中缺乏对 CTE 的支持[在 2006 年作为一个错误提出](http://bugs.mysql.com/bug.php?id=16244)。也许现在甲骨文拥有 MySQL，他们将开始实施它。

但是，这实际上取决于您需要通用解决方案的业务原因以及您真正需要涵盖的数据库版本。编写可以在任何 RDBMS 上运行的数据库应用程序是不言而喻的，但它们都不能在任何一个 RDBMS 上运行良好。

# javascript - Ajax/Javascript - 文件下载

> ID：13301751
> 
> 赞同：0
> 
> 时间：2012-11-09T03:36:47.847
> 
> 标签：javascript, ajax

1.  客户端（通过 XMLHttpRequest 请求）-> 服务器。
2.  服务器 [构建 CSV 并将其打印在响应的输出流中] -> 客户端。

现在第 3 步应该是 -> 客户端的浏览器应该显示一个下载对话框（保存、打开和取消）。由于内容类型是来自服务器的纯文本，并且没有设置内容处置，我们可以使用javascript创建文件并提示用户下载吗？

我知道这个问题有点愚蠢。但没有其他选择。我必须这样做。

更改服务器端脚本将使其成为一分钟的任务。但我必须在客户端这样做。XMLHttpRequest 对象的 responseText 属性将是纯文本，我必须显示文本文件的下载提示。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:38:34.647

不是我知道的。但是您可以只使用`location.href`（或表单，如果需要 POST 数据）来请求服务器端文件。使用正确的标题（`Content-Disposition: attachment`我认为还有另一个标题），您可以下载而不是显示响应。

编辑：更好的是，使用`iframe`隐藏的。这样，您仍然可以在主页中执行花哨的“正在加载，请稍候”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T03:47:16.697

从理论上讲，通过使用 Data URI's 是可能的

```
<a download = "yourfile.csv" href="data:application/octet-stream;charset=YOURCHARSET;base64,BASE64allthedata">Generate</a> 
```

# opengl - 使用 Arcball 输入光源位置

> ID：13301752
> 
> 赞同：0
> 
> 时间：2012-11-09T03:36:59.367
> 
> 标签：opengl, lighting, glui

我正在尝试使用 GLUI 在 OpenGL 中实现一个功能，以便使用“Arcball”控件输入光的位置。我不确定如何解决这个问题，因为轨迹球给出的旋转矩阵是 4x4 维度，而灯光位置是 3 个坐标的一维数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:09:48.463

围绕场景旋转灯光仅对定向灯光（即无限远位置）有意义。所以你不是在旋转一个点，而是一个方向，就像法线一样。很简单：让未旋转的光有方向（0,0,1,0）。然后围绕场景旋转它，将它乘以给定矩阵的转置逆。但既然你知道，这个矩阵确实只包含一个旋转，这是一个特殊情况，其中转置逆与原始矩阵相同。

因此，您只需将初始光线方向 (0,0,1,0) 与矩阵相乘。

我们可以进一步简化这一点。如果你看一下乘法，你会看到，它本质上只是提取了原始光位置向量为非零的矩阵的（加权）列。因此，如果我们真的从 (0,0,1,0) 的光线方向开始，您只需从轨迹球旋转矩阵中取出第 3 列。

# android - 未捕获的类型错误：无法读取未定义的属性“statusBarNotification”

> ID：13301765
> 
> 赞同：0
> 
> 时间：2012-11-09T03:38:21.200
> 
> 标签：android, cordova

我正在使用cordova 2.1.0，并尝试向状态栏添加通知。

我将相关的 java 文件和 js 脚本包含到项目中，并在 config.xml 中添加了以下行

```
<plugin name="StatusBarNotification" value="com.phonegap.plugins.statusBarNotification.StatusBarNotification"/> 
```

在我的 html 代码中，我在 head 标签中添加了以下几行

```
<script src="cordova-2.1.0.js"/>
<script src="statusbarnotification.js"/> 
```

在内容 div 页面的底部，我添加了以下脚本

```
<script>
window.plugins.statusBarNotification.notify("Message Header", "Message details");
</script> 
```

但是，当我在 android 4.0 的模拟器中运行它时，我遇到了错误：

> 未捕获的类型错误：无法读取未定义的属性“statusBarNotification”

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:56:16.747

好吧，我的错，这是一个虚惊。我将脚本文件放入一个 js 文件夹中，而不是放在与 cordova js 文件相同的文件夹中。将脚本 src 路径重命名为正确的路径后，它现在正在工作。不敢相信我在这上面花了几个小时！！

# sql - 按周分组日期？

> ID：13301771
> 
> 赞同：4
> 
> 时间：2012-11-09T03:39:17.110
> 
> 标签：sql, sql-server-2008, tsql

我正在尝试按周对一系列日期进行分组。到目前为止，我有以下内容：

```
SELECT  DATEPART(week, CONVERT(VARCHAR(50), e.event_date, 107)) AS 'Date' ,
        c.setting_secondary AS 'Workflow Cat' ,
        d.setting_main AS 'Error Type' ,
        SUM(e.event_count) AS 'Total'
FROM    marlin.support_events AS e
        INNER JOIN marlin.support_config AS c
            ON e.event_category = c.setting_code
            AND config_code = 60
        INNER JOIN marlin.support_config AS d
            ON e.event_type = d.setting_code
            AND d.config_code = 70
WHERE   e.event_date BETWEEN DATEADD(MONTH, -2, GETDATE()) AND GETDATE()
        AND c.setting_secondary = 'Expenditure Voucher'
        AND d.setting_main IN ( 'Unstarted' , 'Timeout' )
GROUP BY
        DATEPART(week, CONVERT(VARCHAR(50), e.event_date, 107)) ,
        c.setting_secondary ,
        d.setting_main ,
        e.event_summary 
```

这向我显示了周数，但不显示该周开始的日期，如下所示：

![在此处输入图像描述](../Images/52c86a8e56adfda47b7e76636a77d900.png)

如何显示本周开始的日期？

**回答：**

下面确定的答案以及我还找到了另一种方法：

```
DATEADD(dd, -(DATEPART(dw, e.event_date)-1), e.event_date) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T04:22:34.883

您可以从日期中获取年份部分，附加第一个月的第一天，然后添加`(#week - 1)`以获取 event_date 所属的一周的开始日期，如下所示：

```
SELECT EventDate, WorkflowCat, ErrorType, SUM(EventCount) AS 'Total'
FROM
(
SELECT  DATEADD(ww, 
           DATEPART(ww, e.event_date) - 1, 
           CONVERT(DATETIME, 
                   CONVERT(VARCHAR(4), DATEPART(yy, e.event_date)) + '-01-01')) AS 'EventDate' ,
        c.setting_secondary AS 'WorkflowCat' ,
        d.setting_main AS 'ErrorType',
        e.event_summary as 'EventSummary'
        e.event_count AS 'EventCount'
FROM    marlin.support_events AS e
        INNER JOIN marlin.support_config AS c
            ON e.event_category = c.setting_code
            AND config_code = 60
        INNER JOIN marlin.support_config AS d
            ON e.event_type = d.setting_code
            AND d.config_code = 70
WHERE   e.event_date BETWEEN DATEADD(MONTH, -2, GETDATE()) AND GETDATE()
        AND c.setting_secondary = 'Expenditure Voucher'
        AND d.setting_main IN ( 'Unstarted' , 'Timeout' )
)
GROUP BY EventDate, WorkflowCat, ErrorType, EventSummary 
```

# java - for循环中的随机变量

> ID：13301772
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:39:22.257
> 
> 标签：java, random, for-loop, double, scope

我正在尝试在 Graphics2D 实例上绘制 5 个正方形。5 个正方形中的每一个都应具有左上角 x 坐标和左上角 y 坐标的随机双精度值。

```
double pixelSize = 2.0;

g2d.setColor(color);

for (int i = 0; i < 5; i++) {
    double nextDouble = gen.nextDouble();
    System.out.println("nextDouble: "+nextDouble);
    double topLeftX = nextDouble*(maxX-minX) + minX;
    System.out.println("topLeftX: "+topLeftX);
    double topLeftY = nextDouble*(maxY-minY) + minY;
    System.out.println("topLeftY: "+topLeftY);

    Shape square = new Rectangle2D.Double(topLeftX, topLeftY, pixelSize, pixelSize);
    g2d.fill(square);
    repaint();
    revalidate();
} 
```

相反，我从`println`语句中看到的是，这些`nextDouble`值在循环的每次迭代中都会发生变化，但`topLeftX`并`topLeftY`保持不变，即使它们部分是从`nextDouble`.

我想`topLeftX`并且`topLeftY`每次都通过循环进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:05:54.650

它们正在改变，但仅在小数点后的数字中，正如人们所期望的那样，给定代码，以及 maxX-minX 和 maxY-minY 的单位差异：

```
nextDouble: 0.731057369148862
topLeftX: 394.73105736914886
topLeftY: 188.73105736914886
nextDouble: 0.07099203475193139
topLeftX: 394.07099203475195
topLeftY: 188.07099203475192 
```

...

# jenkins - 在 MacOS X Lion 上使用 Jenkins 构建 iOS 项目时出错

> ID：13301773
> 
> 赞同：1
> 
> 时间：2012-11-08T11:33:19.980
> 
> 标签：jenkins, version-control

Jenkins 成功地从 BitBucket 签出项目，但之后我收到以下错误消息：

> 由匿名用户发起
> 
> 在工作区/Users/Shared/Jenkins/Home/jobs/myprojectAdHocBuild/workspace 中构建
> 
> 结帐：工作区//Users/Shared/Jenkins/Home/jobs/myprojectAdHocBuild/workspace - hudson.remoting.LocalChannel@xxxxxxx
> 
> 使用策略：默认
> 
> 从 1 个远程 Git 存储库获取更改
> 
> 从 git@bitbucket.org:myuser/myproject.git 获取上游更改
> 
> 没有候选修订
> 
> 错误：找不到要构建的任何修订。验证此作业的存储库和分支配置。
> 
> 归档工件
> 
> 完成：失败

知道如何解决吗？

我的服务器系统信息：

> MacMini 运行 MACOSX Lion 10.8.2（全新安装）Jenkins 版本 1.489

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:30:22.060

顺便说一句，我找到了一个解决方案。我的错误是，在 Jenkins 作业配置区域中，当它区分大小写时，我将要构建标记的分支包含在小写字符中

# audio - 检测声音文件或设备中的回声或侧音

> ID：13301775
> 
> 赞同：1
> 
> 时间：2012-11-09T03:39:31.700
> 
> 标签：audio, phone-call, aec, acoustics

我需要从未静音的电话听筒中检测回声/侧音。

基本上，我在我的麦克风静音电脑上拨打电话听筒。然后我从电脑向手机播放声音，并记录听筒传入的音频。

我需要检测我拨打的电话是否静音。如果它没有静音，我应该在音频文件中看到一些侧音/回声。

目前，我在看到原始音频中的任何回声时遇到问题。

是否有任何软件或算法可以运行音频文件来检测回声/侧音？

我应该播放任何特定的音调或频率来产生最大的回声吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T21:43:09.270

回声和侧音通常是分开查看的，尽管它们确实重叠 - 侧音是从听筒中的麦克风“泄漏”到同一听筒中的扬声器的声音（泄漏可能在听筒、电话或有时在本地线路卡中）交换/PABX），而回声是从通话中的一方传播到通话远端的另一方，然后再次沿着连接“泄漏”回原来的一方的声音。

对于回声，如果距离很短，那么它的行为实际上与侧音相同，因为用户只需听到他们所说的部分内容，几乎在他们说话的同时播放。如果距离足够长以至于在用户说话后听到“回声”声音，那么它听起来更像是“回声”。

您应该能够通过在被测手机的麦克风中生成一个声音剪辑来直观地看到效果. 要测试回声，您通常需要以某种方式模拟延迟，否则回声看起来就像侧音。

# php - 运行多个函数 javascript

> ID：13301782
> 
> 赞同：0
> 
> 时间：2012-11-09T03:40:17.953
> 
> 标签：php, javascript, function

我目前有一个由 MySQL 表填充的表，反过来我想从这些单元格中获取数据并使用它们来创建模拟的实时更新，但是由于我使用 for 循环有多行，我让它工作了在 javascript 函数中，我相信这会导致其他函数无法运行，我无法找到解决方法。

Javascript代码：

```
var seconds = 5;
var divid = "status";
var url = "boo.php";
var timeout;

function refreshdiv(){

// The XMLHttpRequest object

var xmlHttp;
try{
xmlHttp=new XMLHttpRequest(); // Firefox, Opera 8.0+, Safari
}
catch (e){
try{
xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer
}
catch (e){
try{
xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
}
catch (e){
alert("Your browser does not support AJAX.");
return false;
}
}
}

// Timestamp for preventing IE caching the GET request

fetch_unix_timestamp = function()
{
return parseInt(new Date().getTime().toString().substring(0, 10))
}

var timestamp = fetch_unix_timestamp();
var nocacheurl = url+"?t="+timestamp;

// The code...

xmlHttp.onreadystatechange=function(){
if(xmlHttp.readyState==4){
document.getElementById(divid).innerHTML=xmlHttp.responseText;
setTimeout('refreshdiv()',seconds*1000);
}
}
xmlHttp.open("GET",nocacheurl,true);
xmlHttp.send(null);
}

// Start the refreshing process

var seconds;
window.onload = function startrefresh(){
setTimeout('refreshdiv()',seconds*1000);
}

function runningtime(int) {
if(int == 0) { //if there is data
console.log("int=0 so no data is present, int: " + int);

} else if(int == 1){
var isRunning = new Array();
isRunning[0] = " ";
for (var i=0; i < 3; i++) {
var bool = 'running' + i;
console.log("Running = " + bool);
running = document.getElementById(bool).innerHTML.substring(10,11);

console.log("running: " + running);

if(isRunning[i] == "1") {

var time = 'Time' + i;

a= document.getElementById(time).innerHTML;
console.log("a= " + a);

  hour=a.substring(0,2);
  min= a.substring(3,5);
  sec= a.substring(6,8);

  sec==sec++;

if (min<=9) { min="0"+min; }
if (sec<=9) { sec="0"+sec; }

time = (hour + ":" + min + ":" + sec + " ");

if (document.getElementById) { document.getElementById(time).innerHTML = time; }
else if (document.layers) {
 document.layers.theTime.document.write(time);
 document.layers.theTime.document.close(); }

} else {
//Do nothing
return;
}
}
timeout = setTimeout("runningtime(1)", 1000);
}
}

function experiencehour(exp) {
if(exp == 0) { //if there is dexphourtexphour
console.log("exp=0 so no data is present, exp: " + exp);

} else if(exp == 1){

var isRunning = new Array();
isRunning[0] = " ";
for (var i=0; i < 3; i++) {
var bool = 'running' + i;
console.log("Running = " + bool);
running = document.getElementById(bool).innerHTML.substring(10,11); //checks if bot running

console.log("running: " + running);

if(isRunning[i] == "1") {

var exph = 'Exph' + i;
var expg = 'Exp' + i;

exphour = document.getElementById(exph).innerHTML; //exphour
currexp = document.getElementById(exp).innerHTML; //current gained exp
exphour =parseInt(exphour);
currexp =parseInt(currexp);

console.log("currexp= " + currexp);
console.log("exphour= " + exphour);

expmin = exphour/60;
console.log("expmin= " + expmin);
expsec = Math.round(expmin/60);
console.log("expsec= " + expsec);

newtotalexp = currexp + expsec;
console.log("newtotalexp= " + newtotalexp);

if (document.getElementById) { document.getElementById(exp).innerHTML = newtotalexp; } //writing new exp
else if (document.lexphouryers) {
 document.lexphouryers.theTime.document.write(time);
 document.lexphouryers.theTime.document.close(); }

} else {
//Do nothing
return;
}
}
timeout = setTimeout("experiencehour(1)", 1000);
}
}

function variable1hour(var1) {
if(var1 == 0) { //if there is dvar1hourtvar1hour
console.log("var1=0 so no data is present, var1: " + var1);

} else if(var1 == 1){

var isRunning = new Array();
isRunning[0] = " ";
for (var i=0; i < 3; i++) {
var bool = 'running' + i;
console.log("Running = " + bool);
isRunning[i] = document.getElementById(bool).innerHTML.substring(10,11); //checks if bot running
console.log("isRunning = " + isRunning[i]);

if(isRunning[i] == "1") {

var varh = 'Varh' + i;
var varg = 'Var' + i;

console.log("Varh = " + varh);
console.log("Var = " + varg);

var1hour = document.getElementById(varh).innerHTML; //var1hour
currvar1 = document.getElementById(varg).innerHTML; //current gained var1
var1hour =parseInt(var1hour);
currvar1 =parseInt(currvar1);

console.log("currvar1= " + currvar1);
console.log("var1hour= " + var1hour);

var1min = var1hour/60;
console.log("var1min= " + var1min);
var1sec = Math.round(var1min/60);
console.log("var1sec= " + var1sec);

newtotalvar = currvar1 + var1sec;
console.log("newtotalvar= " + newtotalvar);

if (document.getElementById) { document.getElementById(varg).innerHTML = newtotalvar; } //writing new var1
else if (document.lvar1houryers) {
 document.lvar1houryers.theTime.document.write(time);
 document.lvar1houryers.theTime.document.close(); 
 }

} else {
//Do nothing
return;
}
}
 timeout = setTimeout("variable1hour(1)", 1000);
}
}

function stopScript() {
console.log("Stopping script");
clearTimeout(timeout);
}

function startScript(i) {
variable1hour(i);
experiencehour(i);
runningtime(i);
} 
```

关于如何解决这个问题的任何想法，以便我可以同时运行所有 3 个功能。

我检查了控制台，我没有收到任何会阻止它们运行的​​错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:50:28.780

你不能同时在 JS 中。但是你可以在 JS 中同时**模拟**一点。

看看下划线的`defer`方法。

[http://underscorejs.org/#defer](http://underscorejs.org/#defer)

它会这样工作：

*   获取循环体并将其包装在一个函数中
*   通过 for 循环的每次迭代，使用 defer 调用函数

基本上就是这样。这样做将允许其他函数“中断”任何给定的进程（函数），从而“共享”执行线程。

没有延迟的标准 JS 实现。我正在尝试模拟延迟的关闭。这里的关键点是，虽然调用仍然按照它们排队的顺序执行，但在它们中的任何一个完成之前都会“开始”。在 AJAX 异步请求的情况下，异步响应应该能够在任意两个循环迭代之间注入自身。您还可以通过使用轻微延迟来设置数据处理

[http://jsfiddle.net/t2z9A/](http://jsfiddle.net/t2z9A/)

```
for(var i = 0; i != 5; ++i)
{
    (function(index)
     {
         document.getElementById('id' + index).innerHTML = 'started...';

         setTimeout(function()
         {
             // kill some time
             var str = '';
             for(var j = 0; j != 10000000; ++j)
                 str = str + ' ';

             document.getElementById('id' + index).innerHTML = 'Function: 1\.  Index: ' + index + ' - ' + new Date().getTime();
         }, index);
     })(i);
}

for(var i = 5; i != 10; ++i)
{
    (function(index)
     {
         document.getElementById('id' + index).innerHTML = 'started...';

         setTimeout(function()
         {
             // kill some time
             var str = '';
             for(var j = 0; j != 1000000; ++j)
                 str = str + ' ';

             document.getElementById('id' + index).innerHTML = 'Function: 2\.  Index: ' + index+ ' - ' + new Date().getTime();
         }, 1);
     })(i);
} 
```

# python - 如何在 Python 中实现这样的 MVC？

> ID：13301783
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:40:25.017
> 
> 标签：python, model-view-controller, sqlalchemy, metaprogramming, metaclass

例如，我有一个名为 rule1.conf 的配置文件，如下所示：

```
[Basis]
user = "sunhf"
time = "2012-12-31"

[Bowtie]
path = "/usr/bin/bowtie"
index = "/mnt/Storage/sync/hg19" 
```

和这样的models.py（使用名为`magic.py`..的包）：

```
from magic import Section
class Conf:
    __confname__ = None
    basis = Section(["user", "time"])
    bowtie = Section(["path", "index"]) 
```

最后，像这样的 viewer.py ：

```
from models import Conf as my_conf
my_conf.__confname__ = "rule1.conf"  // bind to the config file, I have no ideas how to do this
print my_conf.basis.user    // output: `sunhf`
print my_conf.bowtie.index  // output: `/mnt/Storage/sync/hg19` 
```

当我`viewer.py`在命令行中运行时：

```
$ python viewer.py
sunhf
/mnt/Storage/sync/hg19 
```

有没有人对如何实施有任何想法`magic.py`？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:13:04.090

我把我的解决方案放在这里：

[https://github.com/hanfeisun/meta_model](https://github.com/hanfeisun/meta_model)

采用

```
python  test.py 
```

看结果

# css - 使用灰度悬停效果，在 FF 或 IE 中无法正常工作

> ID：13301785
> 
> 赞同：0
> 
> 时间：2012-11-09T03:40:47.450
> 
> 标签：css, hover

效果在 Chrome 中看起来很棒，但在 IE 和 FF 中失败。请在多个浏览器中查看此链接：

[http://thebc.co/our-work](http://thebc.co/our-work)

`.portfolio-img{filter: url("data:image/svg+xml;utf8,#grayscale");/* Firefox 10+ */filter: gray;/* IE6-9 */-webkit-filter:grayscale(100%);/* Chrome 19+ & Safari 6+ */-webkit-transition: all .6s ease;/* Fade to color for Chrome and Safari */-webkit-backface-visibility: hidden; /* Fix for transition flickering */-moz-box-shadow:0 0 2px rgba(0,0,0,0.2);-webkit-box-shadow:0 0 2px rgba(0,0,0,0.2);box-shadow:0 0 2px rgba(0,0,0,0.2)}`

`.portfolio-img:hover{filter:none;-webkit-filter:grayscale(0%);-moz-box-shadow:0 0 4px rgba(0,0,0,0.4);-webkit-box-shadow:0 0 4px rgba(0,0,0,0.4);box-shadow:0 0 4px rgba(0,0,0,0.4);-o-transition:.8s;-ms-transition:.8s;-moz-transition:.8s;-webkit-transition:.8s;transition:.8s}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:47:19.247

这是因为**IE**和**Firefox**版本 16 不支持过滤器

来自源[http://caniuse.com/css-filters](http://caniuse.com/css-filters)

# macos - 如何修复 Mac 上的 libiconv 错误？

> ID：13301786
> 
> 赞同：9
> 
> 时间：2012-11-09T03:40:57.510
> 
> 标签：macos, libiconv

我使用此命令从 Mac 卸载端口：

```
sudo port -fp uninstall installed 
```

然后当我使用 wget 下载文件时，它显示：

```
dyld: Library not loaded: /opt/local/lib/libiconv.2.dylib
  Referenced from: /opt/local/bin/wget
  Reason: Incompatible library version: wget requires version 8.0.0 or later, but libiconv.2.dylib provides version 7.0.0
Trace/BPT trap: 5 
```

怎么做？

※ Mac OS X 10.7.5

# 添加

当我跑

```
otool -L $(which wget) 
```

它给了我

```
/opt/local/bin/wget:
    /opt/local/lib/libiconv.2.dylib (compatibility version 8.0.0, current version 8.1.0)
    /opt/local/lib/libintl.8.dylib (compatibility version 10.0.0, current version 10.1.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
    /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.19.0)
    /opt/local/lib/libgnutls.26.dylib (compatibility version 49.0.0, current version 49.3.0)
    /opt/local/lib/libtasn1.3.dylib (compatibility version 5.0.0, current version 5.13.0)
    /opt/local/lib/libgcrypt.11.dylib (compatibility version 19.0.0, current version 19.0.0)
    /opt/local/lib/libgpg-error.0.dylib (compatibility version 9.0.0, current version 9.0.0)
    /opt/local/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.7)
    /opt/local/lib/libidn.11.dylib (compatibility version 18.0.0, current version 18.8.0) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T05:35:14.067

`wget`显然，当您从 MacPorts 安装时，您在本地构建并安装了一个副本，`libiconv`因此它动态链接到您现在已删除的那个库。如果要删除 MacPorts 的所有痕迹，则需要重建`wget`.

否则，您可以使用 MacPorts 安装一个副本，该副本`wget`还将安装所有依赖项，例如`libiconv`.

```
sudo port selfupdate
sudo port clean wget
sudo port install wget 
```

或者，`wget`您可以使用`curl`Apple 随 OS X 提供的版本，而不是 。

更新：根据您的更新，您似乎正在使用 MacPorts-installed `wget`。不知何故，您设法使依赖项不同步。（为什么使用`port -fp uninstall installed`？）建议您现在尝试：

```
sudo port selfupdate     # if not run recently   
sudo port clean libiconv
sudo port upgrade --force libiconv 
```

强制升级`libiconv`到当前版本。

更新 [2014-12]：重新审视这一点，问题也可能是由于不完整的 MacPorts 端口文件未注册`wget`端口依赖于`libiconv`. 我已经[打开了一个](https://trac.macports.org/ticket/46159)关于它的问题。[...] MacPorts 项目回答说，这可能是由于升级到新版本的 OS X 时未遵循 MacPorts 迁移说明造成的；此处有一个[MacPorts 问题热列表条目以了解`libiconv`兼容性](https://trac.macports.org/wiki/ProblemHotlist#libiconv-version)。

无论如何，可能的工作是`wget`从源代码重新安装。

```
sudo port selfupdate
sudo port -f uninstall wget
sudo port -s install wget 
```

如果这没有帮助，您可能需要阅读[迁移说明](https://trac.macports.org/wiki/Migration)并确保在升级后重新安装了所有端口。

# sql - SQL- 获取 WHERE 子句中使用的日期？

> ID：13301788
> 
> 赞同：0
> 
> 时间：2012-11-09T03:41:27.353
> 
> 标签：sql, oracle, date

我们有一个与 Crystal Reports 完美集成的 ERP。现在，我们可以通过这个应用程序添加过滤器，并将它们传递给报告（不是作为参数，而是以某种方式将其添加到 WHERE 子句中）。

问题是，在过滤日期时，我们无法在报告中确定用户选择的日期范围（因为我们希望在报告中显示此日期）。

知道如何通过 SQL 显示这一点吗？

我正在考虑使用双表，并选择一个巨大的日期列表，然后使用这些日期的 MIN 和 MAX 来确定选择了哪个。问题是，如果不添加很多行，我就无法将它加入到我的原始查询中。

到目前为止我有这个：

```
SELECT
  MIN(DTE) MIN_DTE,
  MAX(DTE) MAX_DTE
FROM
(
  SELECT
    TRUNC(SYSDATE)-(5*365) + ROWNUM AS DTE
  FROM
    DUAL
  CONNECT BY
    ROWNUM <= (10*365)
)
WHERE
  DTE >= '12-NOV-07'
  AND DTE <= '12-DEC-07' 
```

但问题是我无法弄清楚如何在不扰乱连续行的情况下将其加入到我的原始查询中。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:48:37.787

该查询仅返回一行，因此它根本不会扰乱行数，除非发生其他事情（例如，自动过滤可能在子查询中不起作用）。

否则，这应该按预期工作：

```
SELECT q.*, max_min.*
FROM ( ... put your original query here ...) q,
     ( ... put the subquery that returns one row with max & min here ...) max_min 
```

就是这样。

# jquery - 添加两个 Minicslider (nivoliders) 时修复 IE 错误

> ID：13301790
> 
> 赞同：1
> 
> 时间：2012-11-09T03:41:33.673
> 
> 标签：jquery, internet-explorer, compatibility, prestashop

我有以下错误。我的页面在 IE 上看起来很糟糕，但在所有其他浏览器中看起来都不错。当我尝试通过 NivoSlider 复制 Minicslider 模块时发生此问题。没有重复的 JQuery 调用，一切似乎都井然有序，但我不知道发生了什么。我在 Prestashop 下工作。

页面：www.adroid.cl/agualpalo

如果有人愿意在这方面帮助我，我将不胜感激。谢谢

PS：代码很长，所以我现在没有粘贴它们。但我会根据我被问到的。

# php - SQL JOIN 查询不显示任何内容 - PHP

> ID：13301791
> 
> 赞同：1
> 
> 时间：2012-11-09T03:41:35.273
> 
> 标签：php, mysql, sql

我正在做一个 sql 查询，但它没有从表中返回任何数据。我不知道为什么，我已经从`INNER`to`LEFT`但没有运气。我已经多次修改查询，但我找不到问题。关于为什么我没有得到任何显示的任何想法？

[表结构](http://webprolearner.ueuo.com/class_des/table_structure.php)

[表创建查询](http://webprolearner.ueuo.com/class_des/query_create.php)

**PHP**

```
$query = ("SELECT  class.class_name, class.class_caption, class.class_credit_hours, class.class_description, faculty_fname, faculty_lname
            FROM class
            LEFT JOIN section 
            ON class.id = section.class_id
            LEFT JOIN faculty 
            ON faculty.id = section.faculty_id OR faculty.id = office_hours.faculty_id
            LEFT JOIN faculty_titles
            ON faculty_titles.faculty_id = faculty.id
            LEFT JOIN faculty_education
            ON faculty_education.faculty_id = faculty.id 
            LEFT JOIN major_class_br
            ON major_class_br.class_id = class.id
            LEFT JOIN major_minor 
            ON major_class_br.major_minor_id = major_minor.id
            LEFT JOIN sched_sect_br 
            ON sched_sect_br.section_id =  section.id
            LEFT JOIN schedule
            ON schedule.id = sched_sect_br.schedule_id
            LEFT JOIN semester
            ON semester.id = schedule.semester_id
            LEFT JOIN office_hours
            ON schedule.id = office_hours.schedule_id AND faculty.id = office_hours.faculty_id       
                 ");
      //execute query
      $result = mysql_query($query);

     if ($result){

    $totalhours = 0;

    while ($row = mysql_fetch_assoc( $result ))
    {  
        print "<b>" . $row['class_name'] . "</b><br>";
        print $row['class_caption'] . "<br>";
        print $row ['class_credit_hours'] . "hrs. <br>";
            print $row ['faculty_lname'] . "hrs. <br>";
            print $row ['faculty_fname'] . "hrs. <br>";
        print $row['class_description'] . "<br>";      
        print "------------------------------<br />";
        $totalhours += $row['class_credit_hours']; 
    }   
    }

    print "<p>Total hours for Major: " . $totalhours . ".</p>"; 
```

**所需显示：**

```
Computer Programming I
CP1000
4
James Doe
This course offers introduction to programming. 
```

**更新：问题在这里找到，但我不知道为什么**

```
ON faculty.id = section.faculty_id OR faculty.id = office_hours.faculty_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:55:52.563

*   复制 SQL，转到 MySQL admin，在那里执行 SQL，看看它是否返回任何结果。

*   删除所有的 JOIN 并再次执行，你至少应该看到一些东西

*   一一添加JOIN

*   尝试确定哪个 JOIN 导致没有返回行

*   检查该联接的左侧和右侧，并确保实际上有有效数据要联接

或者使用 OUTER JOIN

# ios - UILocalNotification 可以用来唤醒后台的任务吗

> ID：13301793
> 
> 赞同：4
> 
> 时间：2012-11-09T03:41:38.113
> 
> 标签：ios, background, uilocalnotification

我想知道，是否有可能以某种方式“唤醒”后台任务，以快速检查网络上的某些内容。我认为这可以通过 UILocalNotification 来完成，但是，无论我尝试了什么，当应用程序在后台时，我无法让 didReceiveLocalNotification 执行任何操作。启动后，我立即按主页按钮关闭应用程序（本地通知触发有 10 秒延迟）。当应用程序处于前台时，此代码可以完美运行，并且只是坐在那里......

在应用程序委托头文件中：

```
 UILocalNotification *localNotif; 
```

为了测试，我设置了本地通知以在 appDelegate 启动时快速触发。

```
localNotif = [[UILocalNotification alloc] init];
localNotif.fireDate = [NSDate dateWithTimeIntervalSinceNow:10];  // the date you want the notification to fire.
localNotif.timeZone = [NSTimeZone defaultTimeZone];
[[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

NSLog(@"setup the timer for 10 seconds");

- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
UIApplicationState state = [application applicationState];
NSLog(@"getting kicked");
if (state == UIApplicationStateInactive) {

    // Application was in the background when notification was delivered.

    NSLog(@"INACTIVE..");
} else {
    NSLog(@"ACTIVE..");

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T03:51:20.453

用户有几个选择：#1）他们是否希望看到您的应用程序的通知。#2) 如果您的应用启用了通知，他们是否希望点击您的通知来启动您的应用。如果他们确实接受通知并在您的应用程序处于后台时打开您的通知， `application:didReceiveLocalNotification`则会调用。需要明确的是，用户必须接受通知（例如在通知下方滑动滑块）......否则会调用NOTHING。

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
    NSLog(@"%@", notification);
} 
```

如果您的应用程序已被终止`application:didFinishLaunchingWithOptions:`，则称为 -

```
- (BOOL)application:(UIApplication *) 
application didFinishLaunchingWithOptions:
(NSDictionary *)launchOptions {
    UILocalNotification *theNotification = 
      [launchOptions 
        objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    NSLog(@"%@", theNotification);

    return YES;
} 
```

# android - android中的数据绑定复杂列表

> ID：13301802
> 
> 赞同：1
> 
> 时间：2012-11-09T03:42:58.863
> 
> 标签：android, list, listview, layout

![小样](../Images/d4b1adf7bac7fcb8cc91b53fae6138ea.png) 所以我想在下面创建这个 UI。这是上大学的课，我的时间不多了。我的一切正常，但我无法全神贯注地列出事件列表。我有一个 java 类 eventList，它用数据库中的数据填充一个 List。有什么建议么？我是否必须动态添加 2 个按钮（向上/向下）和足够的文本视图来提供数据？如果我这样做，我将如何保持它的格式？我应该把它全部放在主页面的滚动视图中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:25:39.110

`ListView`使用自定义适配器使其成为一个。每一行都可以设计成一个`RelativeLayout`，所以你可以把你的活动名称、地点等放在那里。

适配器看起来像这样：（代码清理）

```
public class POPublicationAdapter extends ArrayAdapter<Wrap<POUserPublication>> {
    private final Context context;
    ... 
    private OnClickListener faveClick;
    private OnClickListener shortClick;
    ...

    public POPublicationAdapter( Context context, List<WrapPO<POUserPublication>> values, 
            OnClickListener faveClick, OnClickListener shortClick, ... ) {
        super(context, R.layout.row_publication, values);
        this.context = context;
        this.listId = listId;
        this.faveClick = faveClick;
        this.shortClick = shortClick;
            ...
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        WrapPO<POUserPublication> item = getItem(position);
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = null;

        if( item.item != null ){
            rowView = inflater.inflate(R.layout.row_publication, parent, false);
            rowView.setTag( item );
            TextView tvLabel = (TextView) rowView.findViewById(R.id....);
            ImageView ivPubFavorite = (ImageView) rowView.findViewById(R.id....);

            TextView tvSubLabel = (TextView) rowView.findViewById(R.id.publicationSublabel);
            tvLabel.setText( item.item.pub().get( PO.displayName ) );
            if( !item.item.pub().existsDefault() ) {

            }
            if( listId == POLayer.LIST_REQUIRED ) 
                tvSubLabel.setText(String.format("(Due on %1$TD)", item.item.asDate( PO.dueDate )));
            else if( listId == POLayer.LIST_PREVIEW )
                tvSubLabel.setText( String.format( "(Preview until %1$TD)", item.item.pub().asDate( PO.distributionDate ) ) );
            else
                tvSubLabel.setText( item.item.getTouchInfo() );

            if( this.listId == POLayer.LIST_FAVE ){
                setOfflineImage(ivPubFavorite, SG.isOnline, item.item.isFavorite() ? R.drawable.ls_star_remove : R.drawable.ls_star_grey );
            } else {
                setOfflineImage(ivPubFavorite, SG.isOnline, item.item.isFavorite() ? R.drawable.ls_star_gold : R.drawable.ls_star_grey );
            }
            ivPubFavorite.setClickable(true);
            ivPubFavorite.setTag(item);
            ivPubFavorite.setOnClickListener( faveClick );

            ivNot.setClickable( false );
            if( listId == POLayer.LIST_REQUIRED || listId == POLayer.LIST_UNREAD ) {
                ivNot.setTag(item);
                ivNot.setOnClickListener( notClick );
                if( item.item.isRequired() ) {
                    if( item.item.isComplete() ) {
                        setOfflineImage( ivNot, item.item.asString( PO.offlineUTC ).isEmpty(), R.drawable.ls_doc_confirmed );
                    } else {
                        ivNot.setClickable(true);
                        ivNot.setImageResource( R.drawable.ls_doc_pencil );
                    }
                } else {
                    if( item.item.isComplete() ) {
                        ivNot.setImageResource(R.drawable.ls_check_green);
                    } else {
                        ivNot.setClickable(true);
                        setOfflineImage( ivNot, SG.isOnline, R.drawable.ls_check_grey );
                    }
                }   
            } else {
                ivNot.setVisibility( View.GONE );
            }
        } else {
            switch( item.itemType ) {
            case WrapPO.HEADER_EMPTY:
                rowView = inflater.inflate( R.layout.row_header_empty, parent, false);
                break;
            case WrapPO.HEADER_MORE:
                rowView = inflater.inflate( R.layout.row_header_more, parent, false);
                break;
            default:
                rowView = inflater.inflate( R.layout.row_header, parent, false);
            }
            TextView tvLabel = (TextView) rowView.findViewById(R.id.tvHeader);
            tvLabel.setText( item.itemHeader );
        }
        rowView.setOnLongClickListener( longClick );
        rowView.setOnClickListener( shortClick );
        return rowView;
    }
    @Override
    public long getItemId(int position) {
        if( getItem( position ).item != null )
            return getItem(position).item.asInteger( PO.pubId );
        else
            return (long) -1;
    }
} 
```

这可能是您需要的一个更复杂的示例，但它显示了如何根据行的内容为行使用不同的布局，并且其中包含可单击的 ImageView，就像您需要投票按钮一样.

# jquery - jQuery图像加载顺序

> ID：13301805
> 
> 赞同：2
> 
> 时间：2012-11-09T03:43:23.483
> 
> 标签：jquery, image

我有一个包含许多大图像的站点，我想将它们的加载延迟到加载较小的 UI 图形之后。我像这样使用html：

```
 <span id="img0" class="preload" data-src="/images/tomato.jpg"></span>
 <span id="img1" class="preload" data-src="/images/squash.jpg"></span> 
```

我认为我可以收集“预加载”类的所有实例，然后按 ID 对它们进行排序，然后添加调用图像的 html。

问题是它每次都加载相同的图像。

这是**小提琴**：http: [//jsfiddle.net/nUFUW/](http://jsfiddle.net/nUFUW/)

* * *

**答案**：（如上的HTML）。要按其 ID 的顺序加载图像并具有将验证的 html：

```
jQuery(document).ready(function($) {

    $(".preload").each(loadImages);

        function loadImages (i, elem) {

            var numItems = $('.preload').length;
            for (var i = 0; i < numItems; i++) {

                $("#img" + i).each(function(){
                    var thisSource = $(this).data('src');
                    $(this).html('<img src="' + thisSource + '" alt=""/>');
                });
            }

    } //<end loadImages function>

}); 
```

请注意，页面中未用 Span 标签替换的任何图像都将在 Span 之前加载。我想那是因为这一切都发生在“文档准备就绪”触发之前。因此没有必要在 UI 中标记每个图像，只需要标记大图像。现在我的大图像最后加载，这就是我喜欢的方式。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:48:39.127

它应该是这样的：

```
jQuery(window).load(function($) {

    function loadImage(i){
        if($("#img" + i).size() == 0)
            return;
        $("#img" + i).load(function(){
            loadImage(i + 1);
        });
        $("#img" + i).attr('src', $("#img" + i).data("src"));
    }
    loadImage(0);

}); 
```

​ ​</p>

# php - 计数行并验证仅存在 1 个 Codeigniter

> ID：13301807
> 
> 赞同：0
> 
> 时间：2012-11-09T03:43:26.673
> 
> 标签：php, codeigniter

我有：

```
function check_if_loggedin(){
    #get user session id from db.
        $sess = $this->session->userdata('session_id');
    #set numerical value of successfully logged in equal 1
        $loggedInSetSuccess = 1;
    #compare session id to match in db (can only have only 1 match)
        $sessionsDbCompare = $this->db->get_where('Client',array('session_id'=>$sess,'loggedIn'=>$loggedInSetSuccess));

    if($this->db->num_rows($sessionsDbCompare) == 1) {
    # User has valid session(valid sessID+loggedIn=0, show welcome
        #show account settings with primary nav
            $this->load->view('v/supernavigationloggedin.php');
            $this->load->view('v/primarynavigation.php');    
    }
    else{
      # user doesnt have both a valid session and loggedIn is set to 0, show login form
            #show login form with primary nav
            $this->load->view('v/supernavigationnotloggedin.php');
            $this->load->view('v/primarynavigation.php');   
    }  
} 
```

但我收到错误：

```
Fatal error: Call to undefined method CI_DB_mysql_driver::num_rows() 
```

在以下行：

```
if($this->db->num_rows($sessionsDbCompare) == 1) { 
```

我验证了数据库库已加载到 autoload.php 中，并且活动记录肯定已打开。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T03:46:09.157

将该行更改为：

```
if($sessionsDbCompare->num_rows() == 1) { 
```

# delphi - 反编译帮助文件并提取上下文映射？

> ID：13301808
> 
> 赞同：1
> 
> 时间：2012-11-09T03:43:59.433
> 
> 标签：delphi, delphi-xe2, chm

我有一个旧的帮助文件项目，但原来的项目在硬盘崩溃中丢失了。原始文件是使用 HelpScribble 创建的，但现在我已将其反编译为 WinCHM。我在反编译原始编译的 CHM 文件后重新创建了帮助文件。但是，据我所知，无法识别映射以将应用程序定向到某些上下文 ID。

我想知道是否有办法读取已编译的 CHM 文件并提取帮助文件中每个主题的上下文 ID？我讨厌不得不从我在原始软件源中看到的从 0 到 5,000 的单个数字进行迭代。这是一个大型系统，软件中每个可能的场景都有相应的大型帮助文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:07:45.807

您可以使用[FreePascal](http://www.freepascal.org/)项目中的`chmls`工具。像这样调用它：

```
chmls extractalias MyHelpFile.chm 
```

输出是命名`MyHelpFile.ali`并`MyHelpFile.h`包含别名的 ID 和目标的文件。

# tomcat - 在 Web 上哪里可以找到 Tomcat 托管的 WAR

> ID：13301812
> 
> 赞同：0
> 
> 时间：2012-11-09T03:44:28.847
> 
> 标签：tomcat, configuration, war

给定一个完整的 TOMCAT 目录，我如何确定我的 WAR 将托管在哪里？

我的 WAR 已爆炸，但我不确定在浏览器中输入什么内容才能访问它。

请注意，我是通过 ssh 连接到另一台机器上的，所以我假设转发功能已启用。

这是我的一些 $TOMCAT_HOME/conf/server.xml：

```
<Server port="20310" shutdown="SHUTDOWN">
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <Listener className="org.apache.catalina.core.JasperListener" />
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />
  <Service name="Catalina">
    <Connector port="60310" protocol="AJP/1.3" redirectPort="8443" packetSize="65536"/>
    <Engine name="Catalina" defaultHost="localhost">
      <Host name="localhost"  unpackWARs="true" autoDeploy="true" appBase="webapps"/>
    </Engine>
  </Service>

  <Service name="App">
    <Connector port="45310" protocol="AJP/1.3" packetSize="65536"/>
    <Engine name="App" defaultHost="localhost">
      <Host name="localhost"  unpackWARs="true" autoDeploy="true" appBase="app"/>
    </Engine>
  </Service>
</Server> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:47:53.093

我认为您应该在 下找到它`$TOMCAT_HOME/webapps/`，因为这是我放置我的 webapp 以在 Tomcat Server 6.0 上运行的地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:48:28.097

Tomcat 托管 Web 应用程序，并且不像 Apache HTTPD 那样拥有单个 DocumentRoot。给定以下位置：

```
/path/to/tomcat/webapps 
```

和一个标准的 server.xml 包含：

```
<Engine name="Catalina" defaultHost="localhost">
  <Host name="localhost" unpackWARs="true" autoDeploy="true" appBase="webapps"/>
</Engine> 
```

那么默认应用程序（使用特殊名称“ROOT”）将在这里：

```
/path/to/tomcat/webapps/ROOT 
```

并将自行发布在：

```
http://<ip-address>:<connector-port>/ 
```

当部署了另一个命名应用程序时：

```
/path/to/tomcat/webapps/myapp 
```

它将在这里发布：

```
http://<ip-address>:<connector-port>/myapp 
```

在您的情况下，您已经配置了两个服务、两个连接器和两个主机，因此您有两个 appBase 位置，而您又拥有两个默认应用程序：

```
/path/to/tomcat/webapps/ROOT
/path/to/tomcat/app/ROOT 
```

它们在 AJP 端口 60310 和 45310 上可用。

这就是我们要停下来的地方，因为您没有告诉我们任何有关 Apache HTTPD 配置以及您是否已配置反向代理以将流量发送到 Tomcat 的信息。

你为什么使用 Apache HTTPD？

# unit-testing - 如何在 Visual Studio 2012 中禁用代码覆盖率/程序集检测？

> ID：13301817
> 
> 赞同：2
> 
> 时间：2012-11-09T03:45:36.387
> 
> 标签：unit-testing, visual-studio-2012, mstest, code-coverage, microsoft-test-manager

我有一个从 Visual Studio 2010 升级到 2012 的项目，并且 .testrunco​​nfig 文件包含在升级过程中。

我注意到可以在我运行的任何单元测试上单击“分析代码覆盖率”，它会正确显示结果。但是，我的测试运行配置（最初来自 VS 2010）禁用了代码覆盖率。

经过一番研究后，我了解到 VS 2010 配置文件已被弃用并被 .runsettings 文件取代。看起来 VS 2012 默认强制执行装配检测，这会产生大量开销。

因此，我想知道如何在 VS 2012 中禁用代码覆盖。根据我目前的发现，这似乎不是一项简单的任务。我最近阅读的一篇文章让我手动创建一个 XML 文件并将其命名为“MYCONFIGURATION.runsettings”并手动操作 XML 属性值。

有谁知道这应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:59:55.143

这是我从您的帖子中了解到的：

*   您有一个带有 .testsettings 文件的测试项目。您尚未在测试设置中启用代码覆盖率。

默认情况下，您的方案中未启用代码覆盖率检测。如果您从 VS 进行“分析代码覆盖率”，二进制文件将被检测。

附加信息：您可以通过从 Visual Studio 开发人员命令提示符运行以下命令来确认未生成 .coverage 文件：

```
vstest.console.exe /Settings:<your test settings file> test.dll 
```

只有在测试设置中启用了覆盖率时，才会生成覆盖率文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:52:19.030

代码覆盖仅通过使用数据驱动适配器的测试资源管理器启用。通过测试资源管理器运行的测试的元数据与直接从单元测试会话窗口运行的测试几乎完全不同。您是否尝试过直接从代码（MSTest gui 气泡）或单元测试会话窗口直接运行它？

# sql - 插入查询问题 - 使用外键

> ID：13301818
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:45:39.167
> 
> 标签：sql, sql-insert

我是 SQL 新手。需要你们的帮助:)

我正在构建一个 java appl 并陷入使用外键插入的场景之一。假设我有 2 个表**Employee_Type**和**Employee**：

表**Employee_Type** | 标识类型 | 职位 | | -------- | -------------- | | 1| 经理|

表**员工**

| empId | 企业名称 | emp_type |
| --- | --- | --- |
|  |  |  |

`FK (emp_type) reference Employee_type(idType)`

现在**Employee_Type**
*1,
Manager中的值*

我手动插入**员工**表

```
INSERT INTO
   employee (empId, name, emp_type) 
VALUES
   (
      10, 'prashant', 1
   ) 
```

在上面的插入中，我手动插入**emp_type**，即**FK**。我的问题，有没有办法像下面的例子一样使用 select 自动插入 FK 值？

```
INSERT INTO
   employee(empId, name, emp_type) 
VALUES
   (
      10, 'prashant', 
      (
         SELECT
            idType 
         FROM
            Employee_type,
            employee 
         WHERE
            employee.emp_type = employee_type.idtype
      )
   ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:48:29.237

您没有指定您的 RDBMS，因此语法可能会有所不同，但您应该能够重组语句以使用以下`INSERT INTO ... SELECT` 格式的文字值：

```
INSERT INTO employee (empId,name,emp_type) 
  SELECT 
    /* Build a SELECT statement which includes the static values as literals */
    '10' AS empId,
    'prashant' AS name,
    /* and the idType column */
    idType
  FROM Employee_type,employee 
  WHERE employee.emp_type=employee_type.idtype 
```

请注意，如果子句中没有任何其他内容，则上述语句将为语句匹配的每一行`WHERE`插入一行。`employee``SELECT`

# drupal - 有没有办法让多个用户或角色将照片上传到 drupal 7 中的一个画廊？

> ID：13301825
> 
> 赞同：3
> 
> 时间：2012-11-09T03:46:41.523
> 
> 标签：drupal, drupal-7, photo-gallery, drupal-roles

有没有办法让多个用户或角色将照片上传到 drupal 7 中的一个画廊？

用户现在可以将图像上传到他们自己的（自己创建的）画廊，但我希望他们也能够将图像上传到单个通用画廊。

这是关于一个小团体（家庭）的网站，每个用户都受到信任。它是一种内部网。

所有内容都是由用户自己添加的，他们都可以制作照片库并将照片添加到自己的画廊。

但现在我希望他们也能够将图像上传到单个通用画廊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:29:30.967

这完全取决于你如何做画廊。

最常见的解决方案是简单地创建带有文件上传的内容类型，然后授予为您希望能够上传的所有角色创建该内容类型的权限。然后画廊本身就是一个视图——如果你不想自己设计样式，有很多视图插件可以实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T09:10:28.250

尽管[Organic Groups 模块](https://www.drupal.org/project/og)可能会涉及一些内容，但它旨在将具有组角色和特定节点权限的用户分组。此外，它具有字段访问权限，可以将某些角色限制在这些节点内的字段中，而不是拥有整个节点。

# php - 为什么我必须使用 PDO 启动事务然后提交它才能从 MySQL DB 中删除数据

> ID：13301826
> 
> 赞同：2
> 
> 时间：2012-11-09T03:46:45.777
> 
> 标签：php, mysql, pdo

当我运行这段代码时

```
<?php

include '../bin/config.php';
connect();

if (isset($_GET['id']) && is_numeric($_GET['id'])){

    $id = $_GET['id'];
    $stmt = $conn->prepare("DELETE FROM noteline WHERE Nid = ?");
    $stmt->bindParam(1, $id, PDO::PARAM_INT);

    $outcome = $stmt->execute();

    if ($outcome){

        echo 'it was successfully deleted';
        header("Location: ../noteline");
    }else {

        echo 'it was not successful due to something';
    }
}

?> 
```

它回显“它已成功删除”但没有从我的数据库中删除任何内容......但是当我通过修改此代码开始事务时：

```
<?php

include '../bin/config.php';
connect();

if (isset($_GET['id']) && is_numeric($_GET['id'])){

    $id = $_GET['id'];
    $stmt = $conn->prepare("DELETE FROM noteline WHERE Nid = ?");
    $stmt->bindParam(1, $id, PDO::PARAM_INT);

    $conn->beginTransaction();
    $outcome = $stmt->execute();

    if ($outcome){

        $conn->commit();
        echo 'it was successfully deleted';
        header("Location: ../noteline");
    }else {

        echo 'it was not successful due to something';
    }
}

?> 
```

我的数据终于从我的 MySQL 数据库中删除了！我想知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:50:58.830

因为 PDO 连接在禁用自动提交模式的情况下运行。查看该`connect()`功能以确保您没有禁用此模式。

（另外，我看到您正在使用全局变量来存储连接对象。尽可能避免使用全局变量。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:53:26.413

听起来您的服务器可能已关闭自动提交？

[http://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

> 默认情况下，MySQL 在启用自动提交模式的情况下运行。这意味着一旦您执行更新（修改）表的语句，MySQL 就会将更新存储在磁盘上以使其永久化。

您的代码中可能有一行发送

```
SET autocommit=0; 
```

到你的服务器。

# objective-c - iOS - 如何使用存档保存和读取文件？

> ID：13301833
> 
> 赞同：0
> 
> 时间：2012-11-09T03:47:24.823
> 
> 标签：objective-c, ios, file, nskeyedarchiver, archiving

我是 Xcode 的新手，我真的需要这方面的帮助。

我正在尝试使用存档来保存包含一组项目的文件，并尝试读取它们并将它们放在表格视图中。

问题是当我关闭应用程序然后再次启动它时，当我将数据保存到文件中时，它会覆盖现有文件并且所有存储的数据都会消失。

我正在使用这种方法将数据存储在文件中：

```
-(id)init
{

    if(self = [super init])
    {
        _appSupportPath = [NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES)lastObject];

        if (!_appSupportPath)
            return nil;

        _repositoryPath = [_appSupportPath stringByAppendingPathComponent:FILE_NAME];

        if (_data == nil)
            _data = [[NSMutableDictionary alloc] init];
    }
    return self;
}

-(void)saveToFile
{

    dispatch_queue_t writeQueue = dispatch_queue_create("MyApp:file:write", NULL);

    NSMutableDictionary *localData = [NSMutableDictionary dictionaryWithDictionary:_data];

    dispatch_async(writeQueue, ^{
        NSFileManager *fileManager = [NSFileManager defaultManager];
        if(![fileManager fileExistsAtPath:_appSupportPath])
            [fileManager createDirectoryAtPath:_appSupportPath withIntermediateDirectories:YES attributes:nil error:NULL];
        [NSKeyedArchiver archiveRootObject:localData toFile:_repositoryPath];
    });

} 
```

有什么帮助吗？

如果有更好/更简单的方法来存储我不知道的文件，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:30:14.143

您正确保存它。在启动时阅读它：

```
_data = [[NSKeyedUnarchiver unarchiveObjectWithFile:_repositoryPath] retain];

if (_data == nil)
    _data = [[NSMutableDictionary alloc] init]; 
```

# php - 在发送邮件之前在 php 中确认消息

> ID：13301834
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:47:29.290
> 
> 标签：php, email, sendmail

我正在开发一个网站，其中将数据库中的名称作为链接列出。我已经知道，当一个用户单击该名称时，它会将名称的详细信息传递到另一个页面以查看电子邮件格式等。我只需要有关如何执行此操作的建议，因为我不是php专家呢。我还在研究更高级的代码。所以，

1.  点击名字，
2.  以电子邮件和确认按钮的形式查看详细信息，
3.  发送邮件。我只需要有关如何使这变得容易的建议。我开始了解 mail() 的脚本。谢谢

编辑：因为，有很多人认为这很令人困惑。我只需要关于如何将数据从一个页面传递到另一个页面然后通过电子邮件传递的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:37:29.297

将名称作为链接是什么意思？您在数据库中是否有与名称一起检索的链接字段？

这是基于我从您的模糊问题中了解到的解决方案：

您有从数据库中检索到的名称。还从数据库中检索 id。将这些名称显示为指向不同 PHP 页面的链接。让我们将 php 页面命名为 user.php。所以链接将是：

```
$name = "You go this name from USER TABLE";
$id = "YOU GOT THIS ID FROM USER TABLE";
<a href="/user.php?userID=<?php echo $id  ?>">$name</a> 
```

现在在您的 user.php 中，检索 id

```
$name = $_GET["userID"]; // make sure you do some parsing to avoid sql injection

// Retrieve all the information about this guy like email address etc from the database
// put everything into a form with a Confirm button which when clicked will mail it to the individual
// I think you should be able to figure out the mail part. 
```

# wordpress - WordPress 电子邮件、自定义帖子类型和电子邮件订阅

> ID：13301836
> 
> 赞同：0
> 
> 时间：2012-11-09T03:47:37.670
> 
> 标签：wordpress, email, wordpress-theming, custom-post-type

我有客户想要我构建的东西，我可以使用 wp_mail，但我想知道它应该如何构建是否可行 - 不，他们不想使用第三方网站或软件。

本质上，一个小部件将接收客户的电子邮件地址，我们可以：

*有某种界面，所以我们可以说每天、每周或每月发送 5、10、15 个类别 x、y、x 的帖子*

这并不难，但问题是：我将如何存储传入的电子邮件？新专栏？

*使用这些电子邮件和自定义帖子类型来创建可以在指定时间发送到一组电子邮件（在本例中为现在存储的所有电子邮件）的电子邮件模板、新闻通讯等。*

这个也不难，它是自定义帖子类型部分，我将如何创建自定义帖子类型，当帖子发布时，帖子的发布方式与帖子或页面不同。但相反，它像一个一样存储，但我可以在电子邮件正文中使用它的内容，而不是像帖子或页面一样显示它。

基本上我不应该去：site.come/email_templates/post_id

所以第二个有点复杂，但我想知道你们如何处理这种情况或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:27:19.457

以下是关于电子邮件订阅部分的一些想法。至于自定义帖子类型 - 我对这些没有太多经验，抱歉:)

如果您想要一个快速简单的电子邮件订阅解决方案，请创建一个 wp 选项（请参阅[http://codex.wordpress.org/Function_Reference/add_option](http://codex.wordpress.org/Function_Reference/add_option)），它本质上是一个将类别映射到表中键的哈希表。

对于散列表中的每个类别，存储订阅该类别的用户的用户 ID 和/或电子邮件数组。

一旦你有了这个数据结构，操作和使用 wp_mail 就相当容易了。这是我为我的一个插件编写的一些示例代码：

```
 $subscribers = get_option('subscribers');
        $categories = get_the_category($post->ID);

        if( !empty($categories) && !empty($subscribers)){
            $emails = array();
            //Go through each category and accumulate the necessary e-mail addresses
            foreach($categories as $category){
                $catID = $category->term_id;
                if( !empty($subscribers[$catID]) ){
                    foreach($subscribers[$catID] as $userID => $trash){
                        $user      = get_userdata($userID);
                        $userEmail = array( $userID => $user->user_email );
                        if( !in_array($userEmail, $emails) ){
                            $emails   = $emails + $userEmail; 
                            //you can use something like implode(", ", $emails)
                            //in the Bcc: part when you send out the e-mail.
                        }
                    }
                }
            }
        } 
```

需要注意的一些事项：

*   这是一个快速而肮脏的解决方案。如果类别的数量和订阅者的数量增长很大，您最好在数据库中创建一个表并以这种方式维护它
*   确保考虑删除类别时的情况（即在删除类别时挂钩操作）以及这将如何影响您的数据结构
*   假设类别不经常删除/添加，哈希表方法效果很好

祝你好运！

# javascript - 预测 Javascript 的 Math.random 的种子

> ID：13301839
> 
> 赞同：8
> 
> 时间：2012-11-09T03:48:15.343
> 
> 标签：javascript, random, seed

好的，所以我正在研究如何使用 Math.random 方法生成随机数。到目前为止，我了解到它以“随机”种子开始，并将该种子插入一些复杂的方程以创建随机数。如果种子永远一样，结果会永远一样吗？

我听说 Math.random 的种子是通过当前时间生成的，对吗？他们必须使用当前时间一直到毫秒或其他时间，因为如果你不这样做，你会得到相同的结果。

种子究竟是什么？是诸如“10:45”之类的时间还是诸如“10:45 11/8/12”之类的时间和日期或某种组合？

我怎样才能找到种子，所以我可以预测输出？

我希望能够插入这个：

```
alert(Math.floor((Math.random()*10)+1)); 
```

进入我的网址栏，并能够预测结果。那可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-09T06:12:31.310

我查看了 Rhino[源代码](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/NativeMath.java "Mozilla/犀牛")以找出它们使用的伪随机函数。显然，它们[回退到](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/NativeMath.java#L181 "Mozilla/犀牛")[Java 标准库](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#random() "Math (Java 2 Platform SE v1.4.2)")`Math.random`中定义的函数。

的文档`Math.random`说：

> 返回一个带正号的双精度值，大于或等于 0.0 且小于 1.0。返回值是伪随机选择的，从该范围（近似）均匀分布。
> 
> 当这个方法第一次被调用时，它会创建一个新的伪随机数生成器，就像通过表达式一样

```
new java.util.Random 
```

> 这个新的伪随机数生成器随后用于对该方法的所有调用，并且不会在其他任何地方使用。
> 
> 此方法已正确同步，以允许多个线程正确使用。但是，如果许多线程需要以很高的速率生成伪随机数，则可能会减少每个线程对拥有自己的伪随机数生成器的争用。

所以我检查了文档`java.util.Random`并找到[了这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#Random() "随机（Java 2 平台 SE v1.4.2）")（对于默认构造函数）：

> 创建一个新的随机数生成器。它的种子根据当前时间初始化为一个值：

```
public Random() { this(System.currentTimeMillis()); } 
```

> 在同一毫秒内创建的两个 Random 对象将具有相同的随机数序列。

所以现在我们确定种子是当前时间（以毫秒为单位）。此外，[第二个构造函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#Random(long) "随机（Java 2 平台 SE v1.4.2）")的文档说：

> 使用单个长种子创建一个新的随机数生成器：

```
public Random(long seed) { setSeed(seed); } 
```

> 由方法 next 用来保存伪随机数生成器的状态。

该方法的[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#setSeed(long) "随机（Java 2 平台 SE v1.4.2）")`setSeed`说：

> 使用单个长种子设置此随机数生成器的种子。setSeed 的一般约定是，它会更改此随机数生成器对象的状态，使其处于与刚刚使用参数种子作为种子创建时完全相同的状态。方法 setSeed 由 Random 类实现，如下所示：

```
synchronized public void setSeed(long seed) {
    this.seed = (seed ^ 0x5DEECE66DL) & ((1L << 48) - 1);
    haveNextNextGaussian = false;
} 
```

> 由 Random 类实现的 setSeed 恰好只使用给定种子的 48 位。然而，一般来说，覆盖方法可以使用长参数的所有 64 位作为种子值。注意：虽然种子值是一个 AtomicLong，但这个方法仍然必须同步，以确保 haveNextNextGaussian 的语义正确。

用于生成随机数的[实际方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextDouble() "随机（Java 2 平台 SE v1.4.2）")`nextDouble`是：

> 从该随机数生成器的序列中返回 0.0 到 1.0 之间的下一个伪随机、均匀分布的双精度值。

该`nextDouble`函数的实现如下：

```
public double nextDouble() {
    return (((long)next(26) << 27) + next(27))
        / (double)(1L << 53);
} 
```

显然它[取决于](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#next(int) "随机（Java 2 平台 SE v1.4.2）")功能`next`：

> 生成下一个伪随机数。子类应该覆盖它，因为它被所有其他方法使用。

该`next`函数的实现如下：

```
synchronized protected int next(int bits) {
    seed = (seed * 0x5DEECE66DL + 0xBL) & ((1L << 48) - 1);
    return (int)(seed >>> (48 - bits));
} 
```

这就是您正在寻找的伪随机函数。正如文档中所说：

> 这是一个线性同余伪随机数生成器，由 DH Lehmer 定义并由 Donald E. Knuth 在计算机编程艺术，第 2 卷：半数值算法，第 3.2.1 节中描述。

但是请注意，这只是 Rhino 使用的随机数生成器。Spidermonkey 和 V8 等其他实现可能有自己的伪随机数生成器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T03:55:31.537

种子可能比毫秒计数更多，因为您可以在同一毫秒内多次调用 Math.random() 并且每次都会返回不同的值。

```
for (var i = 0; i < 3; i++) {
    console.log(Math.random(), (new Date()).getTime());
}; 
```

我的输出：

```
0.0617244818713516 1352433709108
0.8024995378218591 1352433709108
0.2409922298975289 1352433709108 
```

如果我正在实现它，我可能会根据毫秒计数创建初始种子，然后在每次调用它时加 1，这样您就不会两次获得相同的种子值。

这是一种 100% 准确的预测输出的方法`Math.random()`：

```
Math.random = function () { return .5; }; 
```

现在`Math.random()`总会回来`.5`的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:52:03.433

种子是一个数值，所以我的猜测是，如果你调用它`Date.now()`（或者`new Date().getTime()`对于旧浏览器），它会是你得到的。

但是，我不确定何时获取该种子，或者该种子是否与当前页面隔离或对整个浏览器进程通用。预测随机数应该是非常困难或不可能的，这就是随机数的全部意义所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T05:34:03.407

不，您无法预测种子，但您可以先发制人地生成足够的数字，以便准确地蛮力匹配。

无论如何，首先阅读 RNG 上的 wiki 页面 - [http://en.wikipedia.org/wiki/Random_number_generation](http://en.wikipedia.org/wiki/Random_number_generation)，看看 PRNG 的实际实现。

# database - 将两个相似的查询合并为一个查询

> ID：13301840
> 
> 赞同：1
> 
> 时间：2012-11-09T03:48:16.357
> 
> 标签：database

请我需要将这两个相似的查询合并为一个查询

1.

```
SELECT avg(size) 
FROM (
    SELECT  size,addr,sha1 
    FROM data WHERE id >= (abs(random()) % (SELECT max(id) FROM data)) LIMIT 8000
); 
```

2.

```
SELECT sum(size2 * cnt), sum(cnt)  
FROM (
    SELECT size as size2, sha1, COUNT (*) as cnt 
    FROM 
        (
        SELECT size,addr,sha1 
        FROM data 
        WHERE 
            id >= (abs(random()) % (SELECT max(id) FROM data)) LIMIT 8000
        ) 
    GROUP BY sha1, size 
    HAVING count(*)>=2
    ); 
```

我会尝试喜欢这个，但它可能不正确。

```
SELECT sum(size2 * cnt), sum(cnt),  avg(sizeavg) 
FROM 
    (
    SELECT sizeavg, size as size2, sha1, COUNT (*) as cnt 
    FROM 
        (
        SELECT size, size as sizeavg,addr,sha1 
        FROM data 
        WHERE id >= (abs(random()) % (SELECT max(id) FROM data)) 
        LIMIT 8000
        ) 
    GROUP BY sha1, size 
    HAVING count(*)>=2
); 
```

# security - 为什么有人会扫描“/mstatic/sales/css/sales.css?v=6”？

> ID：13301841
> 
> 赞同：0
> 
> 时间：2012-11-09T03:48:21.517
> 
> 标签：security, web, sniffing

为什么中国的一个随机 IP 会尝试在“ ”发送对我的 Web 服务器的请求`/mstatic/sales/css/sales.css?v=6`？他们会扫描什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:05:59.110

我假设他们正在执行黑客的侦察阶段，或者他们是脚本小子，可以使用 google dork 来查找易受攻击的网站或节点。我建议您使用 .htaccess 并通过您的 cPanel 来禁用目录遍历来保护您的页面。这也被认为是危险的，因为攻击者可以利用任何可用信息来映射和学习目标。这些 CSS 行可能包含重要信息，即设计师留下的评论、电子邮件地址、全名等

# python - 我如何在模板中访问相关模型的属性

> ID：13301843
> 
> 赞同：0
> 
> 时间：2012-11-09T03:48:33.170
> 
> 标签：python, django, tastypie

当我得到 JSON 响应时，我得到这样的值

```
"objects": [
    {

        "created": "2012-11-01T10:25:25.019881",

        "district": {
            "created": "2012-10-31T05:48:36.883000",
            "description": "",
            "effective_from": "2012-10-31T05:48:36.882000",
            "effective_to": null,
            "id": 3,
            "modified": "2012-10-31T05:48:36.883000",

            "name": "bfdsfselt",
            "resource_uri": "",
            "slug": "fdfsf"
        },
        "effective_from": "2012-10-31T12:35:59.081232",
    }
] 
```

我有显示寺庙价值的通用功能

```
for field in fields
    <td>obj[field] </td> 
```

现在在我的地区字段中，它显示了地区的整个 json。有没有办法只显示名称。我已经在 unicode 中定义了它，但它没有出现在这里。

# ios - AFNetworking 在格式化 JSON 时将我的双打转换为带引号的字符串

> ID：13301845
> 
> 赞同：2
> 
> 时间：2012-11-09T03:48:44.090
> 
> 标签：ios, json, encoding, nsdictionary, afnetworking

我第一次尝试在一个项目上使用 AFNetworking 并且无法将浮点数设置`double`为 JSON 参数。我正在创建一个带有键值对的 NSDictionary。NSDictionary 仅接受对象，因此使用创建双精度值`[NSNumber numberWithDouble: 37.234567]`。都好。但是当我转储字典时，我得到：

```
Dict: {
    day = Wednesday;
    user = Meltemi;
    lat = "37.234567";
    long = "-120.123456";
} 
```

其中，当作为 HTTP 请求提交时，变为：`lat=%2237.234567%22`并且`long=%22-120.123456%22`Sinatra 将它们接收为：

```
params: { "lat"=>"\"37.750256\"", "long"=>"\"-120.123456\"", ... } 
```

我想要/需要的：

```
Dict: {
    day = Wednesday;
    user = Meltemi;
    lat = 37.234567;
    long = -120.123456;
} 
```

API 很可能不能容错，但**如何强制 AFNetworking 丢失引号？**

**编辑：添加 AFHTTPClient 子类的初始化程序：**

```
- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if(!self) return nil;
    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"application/json"];
    [self setParameterEncoding:AFJSONParameterEncoding];
    [self setAuthorizationHeaderWithUsername:@"user" password:@"pwd"];
    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];  // TODO: right place for this?

    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:11:33.057

看起来您是在查询字符串中以 URL 形式编码的形式提交参数；查询字符串中的所有内容都是字符串。

相反，您应该将参数作为 JSON 发送。将`parameterEncoding`HTTP 客户端的属性设置为 AFJSONParameterEncoding，一切都应该按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T15:04:56.063

要发送号码，您可以为您的经理使用“AFJSONRequestSerializer”。它解决了我同样的问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T05:21:15.367

JSON 几乎仅限于可以用 JavaScript 表达的内容（因为它是一个子集），并且 JavaScript 不支持超过 53 位浮点的大数字。由于双精度通常是 64 位，因此如果呈现为数字，它们会在解析过程中被截断，而在将它们呈现为字符串时会避免这种情况。

但这也意味着您的消费代码可以转换回双精度（或等效）。

# php - 在视频中嵌入照片的技术

> ID：13301850
> 
> 赞同：0
> 
> 时间：2012-11-09T03:49:31.520
> 
> 标签：php, flash, video

目前，我将创建一个网站，允许人们上传他们的照片并将它们嵌入到视频中。然后照片出现在视频中，具有许多效果，如缩放、定位等……一个示例站点是[http://www.onetruemedia.com/](http://www.onetruemedia.com/)

我想问一下如何创建可以实现该功能的视频。我想在 Adob​​e Flash 中创建一个视频，然后动态加载图像。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:29:39.830

使用 ffmpeg-PHP [http://ffmpeg-php.sourceforge.net/](http://ffmpeg-php.sourceforge.net/)

视频基本上是每秒运行的图像（帧）。ffmpeg 将让您做的是将视频作为输入将其划分为各种图像。现在您可以添加图像或操作从 ffmpeg 获得的任何图像，然后再次重新生成视频。

该文档将帮助您了解如何实现这一点。

# webserver - 如何检查网站使用哪个虚拟主机？

> ID：13301851
> 
> 赞同：1
> 
> 时间：2012-11-09T03:49:31.970
> 
> 标签：webserver, ip, web-hosting, ping

我正在尝试找出视频流媒体站点名称“ABC”使用的网络托管。

当我尝试ping“ABC”时，它给了我一个IP，我在互联网上查找..

这是一家名为[http://www.cloudflare.com/](http://www.cloudflare.com/)的公司，我认为这个网站提供了一些服务来防止 IP 攻击......

我的线索停在这里，然后点击视频播放器上的播放，它没有给我任何线索它使用哪个网络托管公司......或者视频位于亚马逊 s3 上？

有什么方法可以检查？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:10:23.360

如果您想知道他们正在运行什么服务器类型，您可以尝试

[http://netcraft.com/](http://netcraft.com/) -> 这个网站在运行什么？

但如果站点使用缓存服务之类的东西，它不会给你正确的答案。请参阅 microsoft.com

如果您想知道他们使用的托管公司，您可以尝试对 IP 运行反向查找以找出谁拥有它。

[http://www.ipchecking.com](http://www.ipchecking.com)

实际的托管公司可能会从所有者那里租用 IP，因此此信息将无用。您可以尝试询问 IP 所有者，但除非您有传票，否则您可能不会走得太远。

通过检查为域注册的名称服务器，您可能会很幸运。你会得到3个不同的答案。它们属于 dns 托管服务，而不是网络主机。它们属于虚拟主机。它们以域名本身命名。所以只有当他们使用 webhost dns 时才有用，然后 webhost 可能会为他们的 dns 服务使用不同的名称。

# php - 从 XML 到 PHP 到数组到 JSON 对象

> ID：13301853
> 
> 赞同：1
> 
> 时间：2012-11-09T03:50:16.183
> 
> 标签：php, javascript, jquery, arrays, json

正如标题所说，我得到一个 Xml 文件并读取 php 中的值并将它们保存在一个数组中。我的数组在 PHP 中完美运行。

我可以通过从数组中获取我的值一一返回：

```
echo myArray[0][1]; 
```

这将返回：文本

这是一个 var_dump：

```
array (size=2)
  0 => 
    array (size=5)
      0 => 
        object(SimpleXMLElement)[13]
          string 'text' (length=47)
      1 => 
        object(SimpleXMLElement)[14]
          string 'lol' (length=22)
      2 => 
        object(SimpleXMLElement)[15]
          string 'hehe' (length=8)
      3 => 
        object(SimpleXMLElement)[16]
          string 'thanks' (length=4)
      4 => null
  1 => 
    array (size=5)
      0 => 
        object(SimpleXMLElement)[17]
          string 'texxtttttttt' (length=34)
      1 => 
        object(SimpleXMLElement)[18]
          string 'text here' (length=16)
      2 => 
        object(SimpleXMLElement)[19]
          string 'alots of text i guess' (length=44)
      3 => 
        object(SimpleXMLElement)[20]
          string 'some more text' (length=23)
      4 => 
        object(SimpleXMLElement)[21]
          string 'some text here' (length=14) 
```

现在来解决问题。

```
var obj= <?php print json_encode($myArray); ?>; 
```

我无法再一一获取值了。我试图循环它并将值再次放入一个数组中

```
 var questions = new Array();
            $.each(obj , function(k, v) {  
                    $.each(v, function(k2, v2) {
                        $.each(v2, function(k3, v3) {
                              questions[k2] = v3;
                        });       
                    });
                }); 
```

这并没有给我想要的结果。我需要的是像我在 php ( myArray[0][1]; ) 中的数组中所做的那样一一保存这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:16:03.127

那么您想将 PHP 代码写入 Javascript 文件吗？我强烈反对这一点。将您的代码拆分为一个仅 PHP 的文件，该文件除了对您的数组进行 json 编码之外什么都不做：

```
<?php print json_encode($myArray); ?>; 
```

在您的 JS 文件中，您启动一​​个 ajax 请求以从您的 PHP 文件中获取字符串。jQuery 提供了[方便的方法](http://api.jquery.com/jQuery.getJSON/)来实现这一点：

```
jQuery.getJSON( url, [ data ], [ success(data, textStatus, jqXHR) ] ) 
```

这是另一个显示更复杂替代方案的资源： [Ajax Query to get JSON](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/)

# android - 如何使用 android-maven 在我的 Android APK 中包含第三方 jar？

> ID：13301862
> 
> 赞同：1
> 
> 时间：2012-11-09T03:51:05.713
> 
> 标签：android, android-maven-plugin

我正在使用[android-maven-plugin](http://code.google.com/p/maven-android-plugin/)来管理我的 android 项目。但是maven在生成apk的时候并没有打包第三方jar。我应该如何配置 pom.xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:53:06.813

我使用 Fat Jar，它是一个 Eclipse 插件，可以帮助您在导出时将 jar 包含到您的 apk 中。非常容易使用。

你可以在这里找到它：http: [//fjep.sourceforge.net/](http://fjep.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:59:52.597

这个例子可能会有所帮助，在此我添加和`ORM-Lite`库：`ABS``JUnit`

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>4.0.1.2</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android-test</artifactId>
            <version>4.0.1.2</version>
            <scope>provided</scope>
        </dependency>

        <!-- orm-lite dependecies -->
        <dependency>
            <groupId>com.j256.ormlite</groupId>
            <artifactId>ormlite-android</artifactId>
            <version>4.35</version>
        </dependency>

        <dependency>
            <groupId>com.j256.ormlite</groupId>
            <artifactId>ormlite-core</artifactId>
            <version>4.35</version>
        </dependency>

       <dependency>
            <groupId>com.actionbarsherlock</groupId>
            <artifactId>library</artifactId>
            <version>4.1.0</version>
            <type>apklib</type>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

# c++ - 是否可以设置 std::tr1::tuple 的默认值？

> ID：13301863
> 
> 赞同：1
> 
> 时间：2012-11-09T03:51:18.120
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, std

（我正在使用 Visual C++ 2010）假设我已经定义了一个像这样的元组：

```
typedef std::tr1::tuple<
int      //i want to set its default value to 9
, double //i want to set its default value to 3.3
, int    //i want to set its default value to 2
, double //i want to set its default value to -7.2
> Mytuple; 
```

我可以在结构中做到这一点。但我想知道是否可以在`std::tr1::tuple`.
此外，我想知道我应该什么时候使用`std::tr1:tuple`或`struct?`

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T05:36:39.637

A`tuple`不是结构的神奇替代品。他们的目的非常不同。结构首先是一种语言结构。A`tuple`是一个*库*结构。

结构有默认值是因为语言说你可以编写构造函数来给它们默认值。然后该语言负责调用该构造函数来初始化该结构。`tuple`，作为一个*库*结构，没有这样的能力，就像你可以给它一个总是自动使用`std::vector<T>`的默认值一样。`T`您可以为每个成员提供初始值，但不能给它*defaults*。

如果你考虑一下，你不会想要的。想象一下，如果有人可以说 every`tuple<int, float>`总是用 3 和 54.221 创建的*。*即使其他一些代码创建了对这个规则一无所知的代码，也必须遵循它，（就像在使用该类型的任何地方都使用该类型的构造函数一样）。请记住：每个`tuple<int, float>`都是相同的类型。

实际上，a`tuple`可以替代无法对结构执行反射并对其成员进行编译时迭代。它们存在的另一个主要原因是能够具有编译时动态结构（即，能够基于编译时参数创建类型聚合，而不是直接写入文件的静态列表）。

因此，除非您需要使用`std::tie`（为了有效地返回多个值）、迭代成员（即：为对象的每个成员调用一些模板函数）或一些类似的专用代码，否则您应该使用结构。

# javascript - RegEx 匹配字符串中的共享部分

> ID：13301869
> 
> 赞同：1
> 
> 时间：2012-11-09T03:52:05.797
> 
> 标签：javascript, regex, pcre

在以下代码中：

```
"a sasas b".match(/sas/g) //returns ["sas"] 
```

该字符串实际上包括两个`sas`字符串，`a [sas]as b`并且`a sa[sas] b`.

如何修改 RegEx 以匹配两者？

另一个例子：

```
"aaaa".match(/aa/g); //actually include [aa]aa,a[aa]a,aa[aa] 
```

请考虑一般问题，而不仅仅是上述情况。

首选纯 RexEx 溶液。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:58:03.830

如果您想匹配至少一个这样的“合并”事件，那么您可以执行以下操作：

```
"a sasas b".match(/s(as)+/g) 
```

如果您想将匹配项作为*单独*的结果检索，那么您还有更多工作要做；这不是正则表达式旨在处理的情况。基本算法将是：

*   尝试匹配。如果不成功，请停止。
*   提取您感兴趣的匹配项并使用它做任何您想做的事情。
*   取原始目标字符串的子字符串，从匹配中第一个字符之后的一个字符开始。
*   重新开始，使用这个子字符串作为新的输入。

（为了更有效，您可以匹配偏移量而不是使用子字符串；该技术在[此问题](https://stackoverflow.com/q/7853176/501250)中进行了讨论。）

例如，您将从`"a sasas b"`. 在第一场比赛之后，你有`"sas"`. 取匹配开始后开始一个字符的子字符串，我们将有`"asas b"`. 下一个匹配项将在`"sas"`此处找到，您将再次使用 重复该过程`"as b"`。这将无法匹配，因此您将完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:21:39.703

这个显着改进的答案归功于@EliGassert。

```
String.prototype.match_overlap = function(re)
    {
        if (!re.global)
            re = new RegExp(re.source,
                            'g' + (re.ignoreCase ? 'i' : '')
                                + (re.multiline  ? 'm' : ''));
        var matches = [];
        var result;
        while (result = re.exec(this))
            matches.push(result),
            re.lastIndex = result.index + 1;
        return matches.length ? matches : null;
    } 
```

@EliGassert 指出没有必要逐个字符地遍历整个字符串；*相反，我们可以在任何地方*找到匹配项（*即*没有锚点），然后在找到的匹配项的索引之后继续一个字符。在研究如何检索所述索引时，我发现用于跟踪应在何处*继续*`re.lastIndex`搜索的属性实际上是*可*设置的！这非常适合我们打算做的事情。`exec`

 **唯一需要进一步解释的可能是开始。在没有`g`标志的情况下，`exec`可能永远不会返回`null`（总是返回它的一个匹配项，如果存在的话），因此可能会进入无限循环。然而，`match_overlap` *由于设计*上寻求多个匹配，我们可以安全地将任何*非全局* `RegExp`重新编译为*全局* `RegExp`，如果设置，也可以导入`i`and`m`选项。

这是一个新的 jsFiddle：http: [//jsfiddle.net/acheong87/h5MR5/](http://jsfiddle.net/acheong87/h5MR5/)。

```
document.write("<pre>");
document.write('sasas'.match_overlap(/sas/));
document.write("\n");
document.write('aaaa'.match_overlap(/aa/));
document.write("\n");
document.write('my1name2is3pilchard'.match_overlap(/[a-z]{2}[0-9][a-z]{2}/));
document.write("</pre>");​ 
```

输出：

```
sas,sas
aa,aa,aa
my1na,me2is,is3pi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:16:37.287

```
var match = "a sasas b".match(/s(?=as)/g);

for(var i =0; i != match.length; ++i)
    alert(match[i]); 
```

离开 Q. Sheets 的评论和 cdhowie 的响应，我想出了上面的解决方案：它在正则表达式中消耗一个字符，并对匹配字符串的其余部分进行前瞻。通过这两部分，您可以在正则表达式中构造所有位置和匹配字符串。

我希望有一个“检查但不使用”运算符，您可以使用它来在结果中实际包含其余匹配（前瞻）字符串，但不幸的是没有——至少在 JS 中没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T04:45:20.247

这是一种**通用**的方法：

```
​String.prototype.match_overlap = function(regexp)
    {
        regexp = regexp.toString().replace(/^\/|\/$/g, '');
        var re = new RegExp('^' + regexp);
        var matches = [];
        var result;
        for (var i = 0; i < this.length; i++)
            if (result = re.exec(this.substr(i)))
                matches.push(result);
        return matches.length ? matches : null;
    } 
```

用法：

```
var results = 'sasas'.match_overlap(/sas/); 
```

回报：

*   一个`array`（重叠）匹配，或`null`.

**例子：**

这是[一个 jsFiddle](http://jsfiddle.net/acheong87/cDNBd/)，其中：

```
document.write("<pre>");​
document.write('sasas'.match_overlap(/sas/));
document.write("\n");
document.write('aaaa'.match_overlap(/aa/));
document.write("\n");
document.write('my1name2is3pilchard'.match_overlap(/[a-z]{2}[0-9][a-z]{2}/));
document.write("</pre>");​ 
```

返回这个：

```
sas,sas
aa,aa,aa
my1na,me2is,is3pi 
```

**解释：**

稍微解释一下，我们打算让用户将一个`RegExp` *对象*传递给这个新函数`match_overlap`，就像他或她通常使用 所做的那样`match`。从这里我们想创建一个`RegExp`在开头锚定的新对象（以防止重复的重叠匹配——这部分可能没有意义，除非你自己遇到问题——别担心）。然后，我们简单地匹配主题字符串的每个子字符串`this`并将结果推送到一个数组，如果非空则返回（否则返回`null`）。请注意，如果用户传入一个*已经*锚定的表达式，这*本质上是错误的*——起初我去掉了锚点，但后来我意识到我是在代替用户做一个假设，我们应该避免这种假设。最后，可以更进一步，以某种方式将生成的匹配数组合并为一个匹配结果，类似于该`//g`选项通常会发生的情况；并且可以*更进一步*并组成一个新标志，*例如* `//o`，它被解析以进行重叠匹配，但这有点疯狂。**

# objective-c - 在objective-c中的按钮上有一个图像在另一个图像之上

> ID：13301872
> 
> 赞同：1
> 
> 时间：2012-11-09T03:52:25.953
> 
> 标签：objective-c, ios, xcode, ios6

我想在另一张图片上显示一张图片。基本上我试图显示该框已选中。问题是，当单击未选中的图像时，会出现复选按钮，但复选框会熄灭。我希望复选符号出现在复选框的顶部。

代码如下所示：

```
if (ShopCartUnedited) {
            [button setBackgroundImage:[UIImage imageNamed:@"none.png"] forState:UIControlStateNormal];
            [arrOfObjects addObject:@"NO"];
        }
        else {
            if (counter+1 <= nQty) {
                [button setBackgroundImage:[UIImage imageNamed:@"check2.png"] forState:UIControlStateNormal];
                [arrOfObjects addObject:@"YES"];
            }
            else {
                [button setBackgroundImage:[UIImage imageNamed:@"none.png"] forState:UIControlStateNormal];
                [arrOfObjects addObject:@"NO"];
            } 
        } 
```

如果单击时，我如何更改 check2.png 位于 none.png 之上...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:56:59.217

您可以有两个不同的图像，一个带有复选标记，另一个没有复选标记，并在它们之间切换。如果这是不可能的，您需要在按钮顶部添加一个单独的图像视图`check2.png`

```
//create an imageview and add on button, adjust the frame as required.
[button addSubview:imageview];
imageview.userInteractionEnabled = NO;//if button is not accepting the touches
[button setBackgroundImage:[UIImage imageNamed:@"none.png"] forState:UIControlStateNormal];

        if (ShopCartUnedited) {
            [imageview setImage:nil];
            [arrOfObjects addObject:@"NO"];
        }
        else {
            if (counter+1 <= nQty) {
                [imageview setImage:[UIImage imageNamed:@"check2.png"]];
                [arrOfObjects addObject:@"YES"];
            }
            else {
                [imageview setImage:nil];
                [arrOfObjects addObject:@"NO"];
            } 
        } 
```

或者代替这个 if-else 块，只需使用

```
 if ((ShopCartUnedited) || (counter+1 > nQty)) {
            [imageview setImage:nil];
            [arrOfObjects addObject:@"NO"];
        } else {
             [imageview setImage:[UIImage imageNamed:@"check2.png"]];
             [arrOfObjects addObject:@"YES"];              
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:51:06.623

一个简单的方法是在选中状态和默认状态下使用框图像作为按钮的背景图像，同时将检查图像设置为选中状态的按钮上的图像。并管理选中或取消选中按钮的条件。

如下所示： btn.selected = !btn.selected;

谢谢

# grails - 部署在 tomcat 中的 Grails 测试战争给出错误

> ID：13301873
> 
> 赞同：0
> 
> 时间：2012-11-09T03:52:27.980
> 
> 标签：grails, verifyerror

即使在增加堆大小之后，我也会得到 Perm Gen 以及以下错误。

我首先得到以下内容，在反复尝试访问我的应用程序后，我得到了 Perm Gen

JDK：1.6
Grails：2.0.0
Tomcat 7

我不知道如何解决。

```
SEVERE: Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is java.lang.VerifyError: (class: org/codehaus/groovy/runtime/InvokerInvocationException, method: getMessage signature: ()Ljava/lang/String;) Illegal constant pool index
    at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:118)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.VerifyError: (class: org/codehaus/groovy/runtime/InvokerInvocationException, method: getMessage signature: ()Ljava/lang/String;) Illegal constant pool index
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:97)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1054)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:884)
    at groovy.lang.Closure.call(Closure.java:410)
    at org.codehaus.groovy.grails.plugins.DefaultGrailsPlugin.doWithApplicationContext(DefaultGrailsPlugin.java:489)
    at org.codehaus.groovy.grails.plugins.AbstractGrailsPluginManager.doPostProcessing(AbstractGrailsPluginManager.java:169)
    at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.performPostProcessing(GrailsRuntimeConfigurator.java:232)
    at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:172)
    at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:124)
    at org.codehaus.groovy.grails.web.context.GrailsConfigUtils.configureWebApplicationContext(GrailsConfigUtils.java:121)
    at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:104)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:07:02.813

你得到了一个 VerifyError，这意味着你的问题很可能是一个类路径问题，或者你使用与你正在运行的不同的 Java 版本进行编译。

# objective-c - 为视图应用阴影使我的文字模糊

> ID：13301875
> 
> 赞同：6
> 
> 时间：2012-11-09T03:52:41.030
> 
> 标签：objective-c, ios, calayer, uicollectionview

我的收藏视图单元格结构描述如下

![在此处输入图像描述](../Images/015f642f35f6e204e48679df953a79b4.png)

对于**`cellItemAtIndex`**，我执行以下操作

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell    *cell   =   [self.collectionView dequeueReusableCellWithReuseIdentifier:@"reusedCell" forIndexPath:indexPath];

    // Set shadow around the cell
    [cell.layer setMasksToBounds    :NO ];
    [cell.layer setShadowColor      :[[UIColor whiteColor ] CGColor ] ];// shadow's color
    [cell.layer setShadowOpacity    :0.65 ];                            // set the opacty
    [cell.layer setShadowRadius     :5.0 ];                             // set the blur radius
    [cell.layer setShadowOffset     :CGSizeMake( 0 , 0 ) ];             // set shadow position
    [cell.layer setShouldRasterize  :YES ];                             // tell the cell to render it’s CALayer as a bitmap
    [cell.layer setShadowPath       :[[UIBezierPath bezierPathWithRect:cell.bounds ] CGPath ] ];    // use a path to draw its shadow instead of using its
    ......................................................................
} 
```

当我在设备上运行应用程序时，会显示阴影。但是，我的标签文字很模糊。请查看以下从我的设备拍摄的图像

![在此处输入图像描述](../Images/bf03c2ceee148a10665fe80f46cb380e.png)

如果我取消注释用于放置阴影的 bode 块，则文本非常清晰，如下图所示 ![在此处输入图像描述](../Images/d15606a0e853331ff5545471f5fec07c.png)

我……完全迷路了。有没有人对这个问题有任何想法。请帮忙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T11:00:13.563

您正在栅格化图层，但默认栅格化比例为 1.0。对于视网膜显示器，需要将其设置为 2.0，否则该图层仅以一半分辨率呈现。

```
cell.layer.rasterizationScale=[[UIScreen mainScreen] scale]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T06:00:52.160

我会删除`setShouldRasterize`,`setShadowOffset`和`setShadowPath`. 没有它们也能正常工作。

# css - jQuery Mobile 和 fullcalendar css 冲突

> ID：13301876
> 
> 赞同：0
> 
> 时间：2012-11-09T03:52:42.673
> 
> 标签：css, jquery-mobile, fullcalendar, themeroller

我是 Android 和 jQuery Mobile 的新手。

我在 jQuery Mobile 中使用全日历。

如您所见，事件标题粗体且模糊，在三星 Galaxy II 上进行测试时，完整日历标题也不完全适合。原始的[fullcalendar](http://arshaw.com/js/fullcalendar-1.5.4/demos/agenda-views.html)字体既漂亮又清晰。

如果我测试删除这个 jQuery Mobile 主题 css 它将正常工作，我猜是 jQuery Mobile css 与 fullcalendar css 崩溃。抱歉，我在css方面没有太多经验。

```
<link rel="stylesheet" href="http://dl.dropbox.com/u/41465102/android-theme.min.css" /> 
```

所以，请指导我

1.  如何使事件标题字体与原始字体完全相同
2.  完整的日历标题非常适合移动设备

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:06:48.360

要修复事件标题字体，请使用以下 css 从中删除文本阴影：

```
.fc-event-title{
   text-shadow:none;
} 
```

更新小提琴 - [http://jsfiddle.net/JaaQg/5/](http://jsfiddle.net/JaaQg/5/)

# python - 从一组点创建凸层的有效算法

> ID：13301877
> 
> 赞同：3
> 
> 时间：2012-11-09T03:52:51.843
> 
> 标签：python, convex-hull

我有一个点列表，我试图在 python 中生成凸层。

目前我只是使用以下内容：

```
def convex_layers(points):
   points = sorted(set(points))
   layers = []
   while points:
      #Create the next convex hull
      hull = convex_hull(points)

      #Create the new list of points
      for point in hull:
         points.remove(point)

      #Update the list of layers
      layers.append(hull)
   return layers 
```

这只是一次创建一个凸包。虽然它有效，但它似乎很像试图通过重复加法来进行乘法运算。所以我要问的是是否有更有效的算法专门用于从一组点创建凸层

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T04:08:37.263

如果你使用[单调链算法](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain)，你只需要进行一次字典排序。然后可以在 O(n) 时间内找到每个连续的层。这应该比对每一层进行排序要快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T19:05:21.490

您可以尝试使用 scipy `spatial.convexHull`。

或者，我[在 GitHub 上发布了一些代码](https://github.com/trustdigits/convexhull)。

# error-handling - clojure 中的正确错误传播

> ID：13301879
> 
> 赞同：2
> 
> 时间：2012-11-09T03:53:25.390
> 
> 标签：error-handling, clojure

我目前正在从事我的第一个 clojure 重大项目，并且遇到了关于编码风格和最“clojure-esque”的做事方式的问题。基本上我有一个我正在编写的函数，它接受一个数据结构和一个模板，该函数将尝试将数据结构按摩到其中。模板结构将如下所示：

```
{
:key1 (:string (:opt :param))
:key2 (:int (:opt :param))
:key3 (:obj (:tpl :template-structure))
:key4 (:list (:tpl :template-structure))
} 
```

每个键都是一个原子，将在给定的数据结构中搜索，它的值将尝试与模板结构中给定的类型匹配。例如，它会查找`:key1`并检查它是否是一个字符串。返回值将是一个映射，它`:key1`指向给定数据结构中的值（函数可能会根据给定的选项更改值）。

在这种情况下，`:obj`它接受另一个模板结构，并在该值和模板结构上递归调用自己，并将结果放在返回中。但是，如果出现错误，我希望直接返回该错误。

同样，对于列表，我希望它基本上再次对函数进行映射，除非出现我想直接返回的错误。

我的问题是处理这些错误的最佳方法是什么？一些简单的异常处理将是最简单的方法，但我觉得它不是最实用的方法。我可以尝试用大量的 if 语句来一直跟踪错误，但这似乎也不是很有趣。有什么简单的我错过了，或者这只是一个丑陋的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T04:19:48.947

您可能对[原理图](https://github.com/flatland/schematic)感兴趣，它的功能非常相似。您可以看到它在[测试](https://github.com/flatland/schematic/blob/master/test/schematic/core_test.clj)和[实现](https://github.com/flatland/schematic/blob/master/src/schematic/core.clj#L107)中的使用方式。

基本上我定义了一个`error`函数，它为正确格式化的数据返回 nil，或者一个描述错误的字符串。相反，使用异常来做会使管道更容易，但会更难获得详细的错误消息，例如`"[person: [first_name: expected string, got integer]]"`.

# java - 在tomcat服务器中部署war文件

> ID：13301882
> 
> 赞同：21
> 
> 时间：2012-11-09T03:54:03.657
> 
> 标签：java, tomcat7, axis2, axis

我已经将 sample.war 文件复制到了 tomcat 的 webapps 目录中。

我可以访问 localhost:8080。

默认情况下，战争的部署是自动的 - 我已经检查了我的 webapps 文件夹以获取提取的文件夹“sample”

但它没有被提取。为什么没有提取战争文件。请给我解决方案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-09T04:17:01.623

`webapps/`从目录中删除该战争文件。`http://localhost:8080/`然后在您的网络浏览器中打开链接。单击***Tomcat Manager***，然后输入用户名和密码。在下一页中，您可以看到一个名为***“要部署的 WAR 文件”的***选项。从那里选择您的战争文件，然后单击***“部署”***按钮。

如果您希望在将文件复制到`webapp/`目录时自动部署。然后确保您`server.xml`的文件包含以下值：

```
autoDeploy="true"
unpackWARs="true" 
```

只需在`server.xml`文件中搜索这些值并编辑值，如上所示

有关详细信息，请[参阅从本地路径部署新应用程序](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Deploy_A_New_Application_from_a_Local_Path)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-08T15:54:46.553

通常，当您拥有 2 时会发生这种情况`Tomcats`。如果`CATALINA_HOME`指的是`Tomcat-A`并且您正试图`Tomcat-B`从`Tomcat-B/bin/startup.bat`. 它会运行`Tomcat-A`。因此，您尝试部署的战争`Tomcat-B`不会像`Tomcat-A`实际运行的那样被提取。

# java - 发送 botfarm 命令

> ID：13301885
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:54:30.807
> 
> 标签：java, multithreading, htmlunit, bots

我用 java 和 htmlunit 为浏览器游戏编写了一个机器人。我正在使用线程，所以我可以并行运行机器人。每个都运行一个特定的例程，但我希望能够在不重新启动的情况下有时向它们发出单个命令。什么是最好的解决方案？（即监视文件夹并将命令表示为文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:30:23.003

我会使用套接字将这些命令发送给机器人。如果需要，这将允许您将机器人推送到其他机器。创建一个控制过程，可以与机器人进行通信，并让它发送你想要的命令。您的控制过程可以是一个简单的命令行界面，列出可用的机器人，然后您选择机器人# 和要发送的命令。

您可以使用普通旧的`java.net.Socket`，但为了减轻您的配置负担，我会研究`java.net.MulticastSocket`. 他们基本上让你所有的机器人和控制进程连接到一个组，而不必担心让所有进程的所有 ip 和端口号都正确。

# three.js - 为子对象生成边界球

> ID：13301891
> 
> 赞同：1
> 
> 时间：2012-11-09T03:55:42.860
> 
> 标签：three.js

我们正在尝试为子对象生成边界球体。遗憾的是，我们不知道如何为他们找到合适的位置。即使子对象明显没有放在中心，位置向量仍然是 0,0,0

我们正在使用 UTF8Loader 来导入对象，并且无法访问“标准”顶点数组。

此外，看起来边界半径是通过距父中心的距离计算的。

有任何想法吗？

*现场演示：*

使用此演示帐户登录： [http ://threever.org/login](http://threever.org/login) **用户：**演示**密码：** demoacc

并访问：threever.org/editor

*问题图片：* [图片](http://threever.org/demos/problem/boundingspheres.jpg)

*以及遍历对象时的代码片段：*

```
object.traverse( function( node ) {
    if( node.geometry ) {
        if(node.geometry.boundingSphere){
            [...]
            var sphere = new THREE.Mesh( spheregeometry, material);
            sphere.position.copy(node.position);
            [...]
            _this.scene.add(sphere);
        }
    }
}); 
```

**编辑：** 我们尝试了描述的工作流程（感谢**@WestLangley**）来更新矩阵位置，但仍然没有运气。由于看起来边界球体也没有正确生成（通常到大），我们决定尝试另一种方法：我们生成边界几何体的唯一目的是为光线投射提供“选择网格”（这可能有点如果网格是`THREE.BufferGeometry`[不是？]）。因此，我们查看了`THREE.UTF8Loader`文件并尝试重建几何图形的创建`useBuffers`方式`false`。然后我们设置允许访问属性数组的`dynamic`标志。当生成网格时，我们使用我们的函数来生成一个简化的`THREE.BufferGeometry``true``createSelectionDummy``THREE.Geometry`使用属性数组的网格版本（无 uvs，合并顶点，法线向量（0,0,0））。你觉得这种技术怎么样？这对性能有好处`useBuffers:false`吗？

```
this.createSelectionDummy = function( indices, positions ) {

    var geom = new THREE.Geometry();

    for( var i = 0; i < indices.length; i += 3 ) {

        geom.vertices.push( new THREE.Vector3( positions[ i*3 ], positions[ i*3+1 ], positions[ i*3+2 ] ) );
        geom.vertices.push( new THREE.Vector3( positions[ i*3+3 ], positions[ i*3+4 ], positions[ i*3+5 ] ) );
        geom.vertices.push( new THREE.Vector3( positions[ i*3+6 ], positions[ i*3+7 ], positions[ i*3+8 ] ) );

        geom.faces.push( new THREE.Face3( indices[ i ], indices[ i + 1 ], indices[ i + 2 ], new THREE.Vector3(0,0,0) , null, 0 ) ); 

    }

    //reduce mesh size by 3
    geom.mergeVertices();
    geom.computeCentroids();
    geom.computeFaceNormals();

    return (new THREE.Mesh( geom, new THREE.MeshBasicMaterial({wireframe:true}) ));

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:20:20.857

您可以像这样获得对象的世界位置：

```
var position = object.matrixWorld.getPosition(); 
```

确保首先更新对象的世界矩阵很重要。这通常发生在每个渲染调用中。但如果由于某种原因不是，您可以先调用以下命令：

```
object.updateMatrixWorld( true ); 
```

您可以通过以下方式计算边界球半径`object.geometry.boundingSphere.radius`：

```
object.geometry.computeBoundingSphere(); 
```

# c - 带有 Visual Studio 的 OpenMP：竞争条件

> ID：13301897
> 
> 赞同：1
> 
> 时间：2012-11-09T03:56:33.527
> 
> 标签：c, visual-studio-2010, openmp

我最近尝试在 Visual Studio 中尝试使用 OpenMP 来学习如何对我的程序进行多线程处理。

如果我尝试串行执行此代码：

```
int totalSum = 0;

for(int x=0; x < 100; x++)
{
    for(int y=0; y < 100; y++)
    {
        totalSum = totalSum + x + y;
    }
} 
```

我最终得到的是**totalSum = 990000**

当我尝试通过以下方式仅添加 OpenMP 功能时：

```
#pragma omp parallel for
    for(int x=0; x < 100; x++)
    {

        for(int y=0; y < 100; y++)
        {
            totalSum = totalSum + x + y;
        }
    } 
```

我最终得到**totalSum = 491293**或 596865 或 638260 等...

显然正在发生的事情是竞争条件似乎正在发生，并且取决于哪个线程首先访问 totalSum，最终答案会有所不同。

我做错了什么？x 和 y 被正确定义为私有变量（因为它们是在并行区域内创建的）。

与串行执行程序相比，我可以做些什么来确保在对程序进行多线程处理时得到相同的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:07:20.777

解决方法是使用该`reduction`子句：

```
int totalSum = 0;

#pragma omp parallel for reduction(+:totalSum)  //  reduction
for(int x=0; x < 100; x++)
{

    for(int y=0; y < 100; y++)
    {
        totalSum = totalSum + x + y;
    }
} 
```

阅读 OpenMP 减少条款，然后您将了解它的工作原理。

# php - PHP MySQL为查询创建条件

> ID：13301898
> 
> 赞同：0
> 
> 时间：2012-11-09T03:56:57.887
> 
> 标签：php, mysql

我的 PHP 代码中有这样的代码：

```
 <?php
    require('../../server.php');
    $role = strtoupper($_POST['role']);
    $pool = strtoupper($_POST['pool']);
    $psh = strtoupper($_POST['comp']);

    if($role = "POOL")
    {
        $query2 = "INSERT INTO m_login (email, password, role, company_id)
                            VALUES ('$email', '$pass', '$role', '$pool')";
    }
    else
    {
        $query2 = "INSERT INTO m_login (email, password, role, company_id)
                            VALUES ('$email', '$pass', '$role', '$psh')";
    }

    if (mysql_query($query2))
    {
        $whatdo = strtoupper("add user ").$id;
        include_once('../../serverlog.php');
        $querys = "INSERT INTO m_log (user_id, description, waktu) VALUES ('$user', '$whatdo', '$input')";
        if(mysql_query($querys))
        {
          echo'<script>alert("Penambahan data berhasil!");</script>
          <meta http-equiv="refresh" content="0; url=index.php" />';
        }
        else
        {
          echo mysql_error();
        }
    }
    else
    {
        echo'<script>alert("Failed!");</script> <br/>'.mysql_error().'<meta http-equiv="refresh" content="10; url=index.php" />';
    }
?> 
```

我的问题是，为 query2 创建条件我错了吗？因为当我运行程序时，我的数据总是得到角色的 POOL 结果，虽然我选择了 Admin 或 Supervisor，但它总是返回 POOL

我用于在注册表单中选择角色。因此，当我选择选项 admin 时，它返回池，当我选择 spv 时，它返回池。

任何人都可以给我解决方案吗？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T03:58:40.283

这是错误的，应该是

```
if($role == "POOL") {
  /*Code goes here*/
} 
```

因为`=`会给`POOL`你的变量赋值`$role`，所以`==`用来比较，或者`===`比较相似的数据类型

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T03:58:46.257

`=`是赋值。`==`是比较。放`if($role == "POOL")`，它应该工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T04:01:47.463

您关心分配`if($role = "POOL")`使用中的值`==`应该是`if($role == "POOL")`

`=`是赋值运算符，`==`相等运算符。

1.  = 是赋值运算符。b = 1 将设置变量 b 等于值 1。

2.  == 是相等运算符。如果左侧等于右侧，则返回 true，如果不相等，则返回 false

# java - 如果将一个类更改为抽象类并在另一个类中扩展它，如何使用该类中的对象？

> ID：13301900
> 
> 赞同：0
> 
> 时间：2012-11-09T03:57:00.753
> 
> 标签：java

我想把我做的一个类变成一个抽象类并让另一个类来扩展它。这是因为类（粒子）严重依赖于我想要抽象的类（向量）。

我不确定我将如何使用我用 new 关键字实例化的所有这些对象，或者它是否会完全搞砸。我愿意尝试在我自己的示例中学习有关使用抽象类的知识，但是如果有人可以帮助我理解我在做什么，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:16:54.340

如果你的新类依赖于向量，那么不要继承它，而是尝试组合......所以假设你想创建自己的队列，那么从向量继承而不是拥有向量类型的数据成员不是一个好主意。这比继承有很多优势。如果您需要将容器更改为其他设置，您不必担心更改界面。您仍然会有一些添加和删除类的接口。因此客户端代码将独立于您用于生成队列的容器。只是旁注：考虑使用组合而不是继承。并查看一些设计模式并尝试了解何时需要组合以及何时无法避免继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:18:21.417

据我了解，您正在尝试转换`class MyClass`为`abstract class AbstractMyClass`

因此，如果您将 MyClass 转换为抽象类，则所有语句如

```
AbstractMyClass myClass=new AbstractMyClass(); 
```

会给你一个错误，因为你不能创建一个 AbstractMyClass 的实例。另外，如果情况是

```
abstract class AbstractMyClass
{
}
class ConcreteMyClass extends AbstractMyClass
{
} 
```

然后做可以做类似的事情

```
AbstractMyClass abstractMyClass=new ConcreteMyClass(); 
```

或通常的

```
ConcreteMyClass concreteMyClass=new ConcreteMyCLass(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:18:40.063

继承：是一种关系。更重要的是基类和子类的接口应该是一样的。在这里，您不希望客户端代码使用 push_back()（对于 C++）添加新元素，而是使用 add() 之类的方法。所以接口不同，清楚地表明错误使用了继承。组合：有一个并且“实现在条件”。这是来自 Scott Mayer 的有效 C++。与您的情况一样，您希望在某些方面实现新的 DataStrucutre。所以组合是你需要的。现在派生类不需要具有相同的接口。一般来说，如果你发现接口是相同的，它更像是继承，如果不是组合。组合在继承方面还有很多其他优势。只需谷歌或选择任何好的设计书籍。

# python - 返回多个整数作为单独的变量

> ID：13301901
> 
> 赞同：0
> 
> 时间：2012-11-09T03:57:03.887
> 
> 标签：python, python-3.x, return, return-value

我正在尝试制作一个程序，从用户那里获取 5 个整数，然后找到它们的平均值。我已将其设置为接收 5 个数字，但是如何将它们全部作为单独的变量返回，以便以后可以使用它们？谢谢！

```
def main():
    x = 0
    testScoreNumber = 1
    while x < 5:
        getNumber_0_100(testScoreNumber)
        x += 1
        testScoreNumber += 1

    calcAverage(score1, score2, score3, score4, score5)

    print(calculatedAverage)

def getNumber_0_100(testnumber):
    test = int(input("Enter test score " + str(testnumber) + ":"))
    testcount = 0
    while testcount < 1:
        test = int(input("Enter test score " + str(testnumber) + ":"))

        if test > 0 or test < 100:
            testcount += 1

    return test 
```

^这是问题所在，每次运行此函数时，我都希望它向不同的变量返回不同的值。前任。测试1，测试2，测试3。

```
def calcAverage(_score1,_score2,_score3,_score4,_score5):
    total = _score1 + _score2 + _score3 + _score4 + _score5
    calculatedAverage = total/5

    return calculatedAverage 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T04:04:51.983

您需要将结果存储在某处。动态创建变量名通常（总是？）是个坏主意（尽管可以使用`globals`）。存储结果的典型位置是列表或字典——在这种情况下，我会使用列表。

更改这部分代码：

```
x = 0
testScoreNumber = 1
while x < 5:
    getNumber_0_100(testScoreNumber)
    x += 1
    testScoreNumber += 1 
```

至：

```
results = []
for x in range(5):
    results.append( getNumber_0_100(x+1) ) 
```

可以进一步浓缩：

```
results = [ getNumber_0_100(x+1) for x in range(5) ] 
```

* * *

然后，您可以将该结果列表传递给您的下一个函数：

```
avg = get_ave(results[0],results[1],...)
print(avg) 
```

或者，您可以使用拆包运算符进行速记：

```
avg = get_ave(*results)
print(avg) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:05:23.087

返回函数不负责说明调用者对其返回值做了什么。在您的情况下，让 main 有一个添加返回值的列表会很简单。你可以这样做：

```
scores = []
for i in range(5):
    scores.append(getNumber_0_100(i))

calcAverage(*scores) 
```

请注意，这`*scores`是将列表作为参数传递给您的 calcAverage 函数。最好让 calculateAverage 成为一个通用函数，它接受一个值列表并计算它们的平均值（即不仅仅适用于五个数字）：

```
def calcAverage(numbers):
    return sum(numbers) / len(numbers) 
```

然后你会打电话给它`calcAverage(scores)`

编写第一部分的更 Pythonic 方式可能是`scores = [getNumber_0_100(i) for i in range(5)]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:05:30.040

Python 允许你返回一个元组，当你收到返回值时你可以展开这个元组。例如：

```
def return_multiple():
    # do something to calculate test1, test2, and test3
    return (test1, test2, test3)

val1, val2, val3 = return_multiple() 
```

不过这里的限制是您需要知道要返回多少个变量。如果输入的数量是可变的，则最好使用列表。

# java - 在 Tomcat 上播放框架 1.x - httpOnly cookie

> ID：13301902
> 
> 赞同：2
> 
> 时间：2012-11-09T03:57:25.717
> 
> 标签：java, cookies, playframework, tomcat6, playframework-1.x

我在 application.conf 中设置 application.session.httpOnly=true 并生成一个war文件并部署在tomcat上。

我仍然看到生成为 HttpOnly=No 的 cookie 并且它是可编辑的。

这是在 tomcat 6（即 servlet api 2.x）上运行的 play 1.x 的问题。显然，cookie 的 http only 标志仅在 servlet 3.0 中引入，因此仅在 tomcat 7+ 中可用

到目前为止，有没有人为此确定了解决方法（所以我可以在 tomcat 6.x 上播放 1.x 的 http only cookie）？tomcat 上下文中的 httpOnly 标志仅适用于 tomcat 的 jsessionid cookie...

另外，我可以在 servlet 3.0 上运行 play 1.x 应用程序吗？

PS：这也发布在播放框架的谷歌群组上，但我们没有收到回复，因此在 SO 上发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:50:46.463

您应该能够在 tomcat 7 中运行该应用程序。原因是尽管您将部署一个 War 文件，但 Play 没有使用任何 Servlet API，所以这应该不是问题。也就是说，问题可能是生成战争文件的插件，恐怕我没有经验。

在变通方法中，唯一的方法是使用 Play 提供的集成服务器。如果您在 Tomcat 中运行，Tomcat 会设置规则，因此不会为您设置 HttpOnly。如果您使用集成的 Netty，那么您将拥有它。

# android - 在无根的 android 手机上 su 和 busybox 的正确文件权限是什么？

> ID：13301904
> 
> 赞同：-1
> 
> 时间：2012-11-09T03:57:43.757
> 
> 标签：android, root, su

我正在开发一个嵌入式应用程序，我需要允许设备所有者按需 root 和取消 root 设备。

我可以通过存储在 rom 中的特殊版本的 SU 运行以下 shell 命令来启动设备：

```
chown 0.0 /system/xbin/su
chmod 06755 /system/xbin/su

chown 0.0 /system/xbin/busybox
chmod 0755 /system/xbin/busybox 
```

我现在需要能够扭转生根过程。因此，我需要恢复这两个文件的所有者和权限。问题是我不确定无根 android 设备上的默认权限和所有者是什么。

有人可以帮忙吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T07:37:02.573

```
stat {dir/file} 
```

应该向您展示您需要知道的内容，除此之外，我还想知道在通常的 755、644、777 交易之前这个数字是什么，尽管我知道在 Linux 上它很相似，但就像 0755、0644、0777 一样。我仍然不知道不知道 0 是干什么用的，或者他们为什么说 06755，这个答案很可能会帮助我获得 postgresql 打开套接字的权限。

我错了 644 是 rw,r,r; 你会看到的。请有人纠正我或告诉我我是否正确，但我认为它的所有者|组|其他和 1 是读，2 是写，3 是读/写，即 1 + 2 =3，4 是执行所以 4 +3=7 是读/写/执行，所以如果你只想让别人读你给它 771, 0771 （至于 android 06771，我不明白） 0|7|7|1 , Owner|group|其他，所有者=7 |组=7 | other =1 因此，如果您只希望所有者读取和写入但不执行用户名 x-man ，您将：

`chown x-man:[group] /home/x-man/somefile`

-接着-

`chmod 0310 /home/x-man/somefile`

这将允许所有者读/写，组成员（例如“cust-asist”）可以读取，而其他人无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:22:44.247

`ls -l`您可以通过在所在目录上`su`运行命令来读取权限位`busybox`，然后使用静态字段将权限设置回默认值。

在运行您的程序之前，请在 shell（设备上的终端，或通过`adb shell`）中运行这些命令

```
cd /system/xbin
ls -l

...output here.... su
...output here.... busybox 
```

**代码**（一旦您知道默认所有者和权限）：

```
public class RootAndUnroot{
private static String[] DEF_SU = {"0X.X", "0XXX"}; //Initialize these to the values found above
private static String[] DEF_BUSYBOX = {"0Y.Y", "0YYY"};
...
private void revertRoot(){
    setPermissions("/system/xbin/busybox", DEF_BUSYBOX);
    setPermissions("/system/xbin/su", DEF_SU);
} 
```

# javascript - 打开新的弹出窗口并返回值

> ID：13301908
> 
> 赞同：0
> 
> 时间：2012-11-09T03:57:58.503
> 
> 标签：javascript, html

我正在尝试打开一个新的弹出窗口，将值插入数据库，然后将一个值返回到当前窗口。在我打开一个新的弹出窗口并单击返回后，它会返回该值，但是当我单击提交并在此之后返回它时，该值不会被返回。我认为这是因为提交按钮刷新了新窗口。这就是它不返回值的原因。

主页

```
<form></form>

<form>
<input name="maparea" size="2" type="TEXT">
<input onclick='targetitem = document.forms[1].maparea; dataitem = window.open("popup.php", "dataitem", "toolbar=no,menubar=no,scrollbars=yes"); dataitem.targetitem = targetitem' value="Get Value" type="button">
</form> 
```

弹出窗口

```
<script>
   function select_item(item){
      targetitem.value = item;
      top.close();
      return false;
   }
</script>

<form  action="" method="post">
   <input type="submit" name="sub" value="Submit" />
   <input type="button" name="re" value="Return" onclick='return select_item("3")' />
</form> 
```

有什么解决办法吗？我想先提交我想要的，然后返回值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:21:30.680

在弹出窗口中，在提交按钮上挂钩 onclick 事件，以便在提交之前执行。然后在 onclick 处理程序中执行：

```
window.opener['dataitem'] = <your return value>; 
```

然后在提交之后，您的父窗口将具有该值，您可以像这样访问它：

```
var somevariable = window['dataitem']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:27:32.100

```
function setColor(color){ if (opener && !opener.closed){ opener.document.theForm.theField.value = color; opener.focus(); } window.close(); } ... <td width="30" bgcolor="#FFFF00" onclick="setColor(this.bgColor)">&nbsp;</td>
Read more at http://www.codingforums.com/showthread.php?t=61319#gkH9pd6gdgvxYqQZ.99 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:22:14.033

这个怎么样？

1.  打开你的弹出窗口。
2.  在弹出窗口中：*通过 AJAX*提交表单（以避免页面刷新）。
3.  在弹出窗口中：在 AJAX 调用的成功处理程序中，获取所需的值，使用 将其传回`window.opener`，然后关闭弹出窗口。

# ruby-on-rails - ActiveRecord 的保存！方法是从数据库中删除我的对象

> ID：13301910
> 
> 赞同：0
> 
> 时间：2012-11-09T03:58:11.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我这辈子都想不通。我正在使用 CanCan 和 InheritedResources。我想删除一个组，但撤销组中的用户（而不是从数据库中删除它们）。撤销是通过在用户上设置`revoked`来完成`true`的。在我的测试中，一开始有 2 个用户和一组。

```
class GroupsController < InheritedResources::Base
  load_and_authorize_resource

  def destroy
    p User.all # shows the correct value, 2!

    @group.users.each do |user|
      user.revoked = true
      p User.all # still shows 2 on the first loop iteration
      user.save!
      p User.all # shows 1 on the first iteration! The user was deleted?!
    end

    super # InheritedResources call to destroy the group
end 
```

为什么我的用户会被删除？最后，我没有组，也没有用户！`.save!`没有引发异常，我也尝试过`if user.save`，它返回 true。我尝试过使用和不使用`super`，所以我认为它与 InheritedResources 无关。在我的小组模型中，我有：

```
has_many :users 
```

没有`:dependent => ":destroy"`。这里发生了什么？我很惊讶和困惑，`save!`正在默默地删除我的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:43:03.137

从上面的上下文中，我不清楚为什么会发生这种情况......

尝试使用`user.update_column :revoked, true`代替`user.revoked = true`and `user.save!`。这将在没有回调的情况下保存它，这可能（可能？）会干扰某些东西。

# visual-c++ - printf 语句未显示

> ID：13301914
> 
> 赞同：1
> 
> 时间：2012-11-09T03:59:07.217
> 
> 标签：visual-c++, printf

我正在使用 Microsoft Visual C++ 6.0 并尝试调试其他人的程序。我尝试使用 printf 语句，但由于某种原因，这些语句在程序运行时没有显示在屏幕上。我可以使用 fprintf 将这些语句打印到文件中，但是当程序在执行过程中崩溃时这是无用的，因为那时文件将为空。

如何强制某些输出显示在屏幕上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-05T15:17:58.390

要强制输出到屏幕，请参阅下面的第一部分。下面的第二个和第三个选项也适用于调试此类程序崩溃。

**将 printf 与 fflush 一起使用（改进 Vishal Kumar 的答案）**

Vishal Kumar 的回答对我有用，但我必须做一些研究才能了解如何使用 fflush。我遇到了一个问题，我的程序在没有意义的 printf 语句“中间”崩溃了。这是我对他的回答的改进。在调试器难以使用的情况下（例如多线程），您可以在每个 printf（或 fprintf）语句之后使用 fflush。例如，“给你的代码加点料”：

```
... // code
printf("Part 1 executed successfully");
fflush(stdout); // flushes the stdout buffer
... // further code
printf("Part 2 executed successfully");
fflush(stdout);
... // repeat as necessary 
```

运行，观察输出，并在最后一个打印的语句和第一个不打印的语句之间放置更多的打印语句，直到找出问题为止。

**调试器**

如果您能够使用调试器，那么它是比在代码中添加上述输出语句更有效的选择，但在某些情况下您必须求助于它。

**瓦尔格林德**

如果您使用的是 Linux（我认为您不是因为它在 MS Visual C++ 中），valgrind 是查看代码崩溃位置（以及检测内存泄漏）的另一种选择。如果您的代码是为调试而编译的，如果您的程序名为“myProgram”，您可以从终端窗口调用，如下所示：

```
valgrind myProgram 
```

# android - 导入 Android 库时出错

> ID：13301915
> 
> 赞同：-2
> 
> 时间：2012-11-09T03:59:42.033
> 
> 标签：android, shared-libraries

[https://github.com/SimonVT/android-numberpicker](https://github.com/SimonVT/android-numberpicker)

我正在尝试使用这个库。

但我无法成功使用示例

1.  进口样品
2.  复制 lib 文件（除了清单，构建）

但样品仍然有一个错误`NumberPicker.java`

我的意思是 All(ever)`R.`给出一个错误，比如`R.id.np_decrement`, `R.attr.numberPickerStyle`, `R.integer.np_config_longAnimTime`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:07:02.217

尝试这种方式 1st[下载该项目文件](https://github.com/SimonVT/android-numberpicker/archive/master.zip) 2nd 打开存档，您将看到一个名为**android-numberpicker-master 的**文件夹将其解压缩到您的硬盘驱动器 3rd 在 eclipse goto File -> Import 并在 Android 选项卡下选择**Existing Code into workspace**![对话框](../Images/97b374419f91e81a0d1061f4345ec788.png)

并导入两个项目注意：两个项目必须在同一个文件夹中 第四右键单击属性并转到 android 选项卡，查看项目是否存在或添加它![在此处输入图像描述](../Images/80a8741121990bca06381da155081cb3.png)

如果库和项目不在同一个文件夹中，则会抛出错误，因此两者都必须在同一个文件夹中

现在尝试运行它，它会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:37:04.700

由于错误，未生成资源对象 (R.java)。您`targetSdkVersion`应该在清单中至少设置为 15，并且您还应该`theme.xml`从库的`res/values`文件夹中复制到您自己项目中的相同位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:52:24.393

首先查看开发人员提供的示例应用程序。

1.  右键单击您的包资源管理器。选择导入。选择“将现有 Android 代码导入工作区”。
2.  浏览到示例目录并导入。
3.  同样导入库并将其标记为库，其他项目正确引用它。
4.  确保 JDK 合规性设置为 1.6，并且您的项目针对 SDK 15 即 4.0.3。

# php - Magento DEBUG (7): 无法在 Gd2.php 中发送标头

> ID：13301917
> 
> 赞同：1
> 
> 时间：2012-11-09T03:59:54.263
> 
> 标签：php, debugging, magento, header

2012-10-31T10:49:49+00:00 调试 (7)：无法发送标头；标头已经发送到 /home/happiniess/public_html/magento/includes/src/Varien_Image_Adapter_Gd2.php，第 133 行

```
2012-10-31T10:49:49+00:00 DEBUG (7): HEADERS ALREADY SENT: <pre>[0] /home/happiniess/public_html/magento/includes/src/__default.php:17239 
[1] /home/happiniess/public_html/magento/includes/src/__default.php:17123 
[2] /home/happiniess/public_html/magento/includes/src/__default.php:17278 
[3] /home/happiniess/public_html/magento/includes/src/__default.php:17490 
[4] /home/happiniess/public_html/magento/includes/src/__default.php:20055 
[5] /home/happiniess/public_html/magento/app/Mage.php:683 
[6] /home/happiniess/public_html/magento/index.php:87 
</pre> 
2012-10-31T10:49:49+00:00 DEBUG (7): Array 
( 
[0] => Array 
( 
[name] => Content-Type 
[value] => text/html; charset=UTF-8 
[replace] => 
)

) 
```

当我检查代码 magento/lib/Varien/Image/Adapter/Gd2.php

```
public function display()
    {
        header(\"Content-type: \".$this->getMimeType());
        call_user_func($this->_getCallback(\'output\'), $this->_imageHandler); // 133 line
    } 
```

这不是BUG吗？

谁能提供更多如何调试的提示？

我已添加：/app/code/core/Mage/Core/Controller/Response/Http.php

```
Mage::log('HEADERS ALREADY SENT: '.mageDebugBacktrace(true, true, true)); 
```

/lib/Zend/Controller/Response/Abstract.php

```
Mage::Log('Cannot send headers; headers already sent in ' . $file . ', line ' . $line); 
```

然后得到错误信息：/home/happiness/public_html/magento/includes/src/Varien_Image_Adapter_Gd2.php，第 133 行

现在不知道怎么解决！！！

帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T02:15:00.090

试试看这个错误

1.  禁用编译并删除缓存

我认为新添加的文件不编译

# expressionengine - 在 Google Maps for ExpressionEngine 中覆盖地图缩放级别

> ID：13301920
> 
> 赞同：5
> 
> 时间：2012-11-09T04:00:08.673
> 
> 标签：expressionengine

我正在使用 ExpressionEngine 2.5.3 和 Google Maps for ExpressionEngine 3.0.190（又名 3.1 beta），代码如下：

```
{exp:gmap:init id="map1" class="gmap" scrollwheel="false" style="width:930px;height:500px" clusterStyles="{url: '/assets/images/cluster-icon-blue.png', textColor: '#fff', textSize: '12', height: 52, width: 53, anchor: [0, 0]}" overviewMapControl="true" overviewMapControlOptions="{opened:true}"}

{exp:channel:entries channel="people" status="open" disable="categories|category_fields|member_data|pagination" limit="1000" dynamic="no" sort="asc"}
    {cf_people_geo_location id="map1" show_one_window="true" icon="/assets/images/aabc-map-icon-white.png" infobox="true" offsetY="-45" offsetX="15" closeBoxMargin="5px" class="ui-infobox-dark" closeBoxURL="/themes/third_party/gmap/css/images/white-close-button.png" style="width: '250px'" clearanceX="10" show_one_window="true" clustering="true"}
        <p><a href="/register/{url_title}/" title="View {title}">View {title} &raquo;</a></p>
    {/cf_people_geo_location}
{/exp:channel:entries} 
```

是否可以设置地图在页面加载时使用的缩放级别？它似乎是根据正在绘制的点自动设置它，但我想覆盖这个值并放大几个缺口。

谢谢，

斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:43:29.970

使用 extend_bounds 参数并将其设置为“false”

[https://objectivehtml.com/google-maps/documentation/tag/marker#extend_bounds](https://objectivehtml.com/google-maps/documentation/tag/marker#extend_bounds)

尝试这个：

```
{exp:gmap:init id="map1" class="gmap" scrollwheel="false" style="width:930px;height:500px" clusterStyles="{url: '/assets/images/cluster-icon-blue.png', textColor: '#fff', textSize: '12', height: 52, width: 53, anchor: [0, 0]}" overviewMapControl="true" overviewMapControlOptions="{opened:true}" zoom="10"}

{exp:channel:entries channel="people" status="open" disable="categories|category_fields|member_data|pagination" limit="1000" dynamic="no" sort="asc"}
    {cf_people_geo_location id="map1" show_one_window="true" icon="/assets/images/aabc-map-icon-white.png" infobox="true" offsetY="-45" offsetX="15" closeBoxMargin="5px" class="ui-infobox-dark" closeBoxURL="/themes/third_party/gmap/css/images/white-close-button.png" style="width: '250px'" clearanceX="10" show_one_window="true" clustering="true" extend_bounds="false"}
        <p><a href="/register/{url_title}/" title="View {title}">View {title} &raquo;</a></p>
    {/cf_people_geo_location}
{/exp:channel:entries} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:07:40.503

gmap 标签有一个`zoom=""`参数，但有时我发现它不起作用（或者我没有以某种方式正确使用它）。

为了让它放大到我想要的水平，我在页面末尾手动添加了一些常规的谷歌地图（不是插件）代码：

```
<script>
  map1_map.setZoom(15);
</script> 
```

# python - python测试我的方法

> ID：13301921
> 
> 赞同：0
> 
> 时间：2012-11-09T04:00:20.320
> 
> 标签：python, testing

嘿伙计们，我有一个关于测试我的方法的快速问题。上周我是 python 新手，但我正在尝试。我的任务是制作一种方法，该方法可以获取卡片列表并以某种方式对它们进行排序。我知道我所有的检查和 if 语句和这样的工作，因为我在 python shell 中测试了它们，但我想如果我把我所有的代码都放到 shell 中，它会超出索引（正确的缩进）。因此，如果你们可以帮助我不确定的事情是如何实现我的方法。

这是我的方法：

```
def play(list):

    for k in list:
        a,x,z = 0
        #insert into the pile
        pile = []
        pile = pile + [[list[k]]]

        #check if the new card in the pile is compatible to the card 3 to the left

        #check in terms if the first char of each card is compatible 
        if( (((pile[a])[(len(pile[a]))-1])[0] ) == ((((pile[a-3])[(len(pile[a-3]))-1])[0])) ):
            #add card to the top of the card 3 to left
            pile[a-3] = pile[a-3] + [((pile[a])[(len(pile[a]))-1])]
            if (len(pile[a])) == 1:
                del pile[a]
            else:
                del (pile[a])[-1]

        #check in terms if the last char of each card is compatible 
        elif((((pile[a])[(len(pile[a]))-1])[(len((((pile[a])[(len(pile[a]))-1]))))-1]) == (((pile[a-3])[(len(pile[a-3]))-1])[(len((((pile[a-3])[(len(pile[a-3]))-1]))))-1])):
            #add card to the top of the card 3 to left
            pile[a-3] = pile[a-3] + [((pile[a])[(len(pile[a]))-1])]
            if (len(pile[a])) == 1:
                del pile[a]
            else:
                del (pile[a])[-1]

        #check if the new card in the pile is compatible to the card to the left 

        #check in terms if the first char of each card is compatible 
        elif((((pile[a])[(len(pile[a]))-1])[0] ) == ((((pile[a-1])[(len(pile[a-1]))-1])[0]))):
            pile[a-1] = pile[a-1] + [((pile[a])[(len(pile[a]))-1])]
            if (len(pile[a])) == 1:
                del pile[a]
            else:
                del (pile[a])[-1]

        #check in terms if the last char of each card is compatible 
        elif( (((pile[a])[(len(pile[a]))-1])[(len((((pile[a])[(len(pile[a]))-1]))))-1]) == (((pile[a-1])[(len(pile[a-1]))-1])[(len((((pile[a-1])[(len(pile[a-1]))-1]))))-1])):
            pile[a-1] = pile[a-1] + [((pile[a])[(len(pile[a]))-1])]
            if (len(pile[a])) == 1:
                del pile[a]
            else:
                del (pile[a])[-1]

        else:
            a = a + 1  

        #now go through and look for additional moves 
        #(if any match the 1 to the left or 3rd)

        while x < (len(pile)):
            if((((pile[x])[(len(pile[x]))-1])[0] ) == ((((pile[x-3])[(len(pile[x-3]))-1])[0]))):
                pile[x-3] = pile[x-3] + [((pile[x])[(len(pile[x]))-1])]
                if (len(pile[x])) == 1:
                    del (pile[x])[-1]
                    z = x + 1
                    while z < (len(pile)):
                        pile[z-1] = pile[z]
                        z = z + 1
                    del pile[(len(pile))-1]
                else:
                    del (pile[x])[-1]
                x = x + 1

            elif((((pile[x])[(len(pile[x]))-1])[(len((((pile[x])[(len(pile[x]))-1]))))-1]) == (((pile[x-3])[(len(pile[x-3]))-1])[(len((((pile[x-3])[(len(pile[x-3]))-1]))))-1])):
                pile[x-3] = pile[x-3] + [((pile[x])[(len(pile[x]))-1])]
                if (len(pile[a])) == 1:
                    del (pile[x])[-1]
                    z = x + 1
                    while z < (len(pile)):
                        pile[z-1] = pile[z]
                        z = z + 1
                else:
                    del (pile[a])[-1]        
                x = x + 1

            elif((((pile[x])[(len(pile[x]))-1])[0] ) == ((((pile[x-1])[(len(pile[x-1]))-1])[0]))):
                pile[x-1] = pile[x-1] + [((pile[x])[(len(pile[x]))-1])]
                if (len(pile[x])) == 1:
                    del (pile[x])[-1]
                    z = x + 1
                    while z < (len(pile)):
                        pile[z-1] = pile[z]
                        z = z + 1
                    del pile[(len(pile))-1]
                else:
                    del (pile[x])[-1]
                x = x + 1

            elif( (((pile[x])[(len(pile[x]))-1])[(len((((pile[x])[(len(pile[x]))-1]))))-1]) == (((pile[x-1])[(len(pile[x-1]))-1])[(len((((pile[x-1])[(len(pile[x-1]))-1]))))-1])):
                pile[x-1] = pile[x-1] + [((pile[x])[(len(pile[x]))-1])]
                if (len(pile[a])) == 1:
                    del (pile[x])[-1]
                    z = x + 1
                    while z < (len(pile)):
                        pile[z-1] = pile[z]
                        z = z + 1
                else:
                    del (pile[x])[-1]
                x = x + 1

            else:
                x = x + 1

        #end while loop
    #end of for loop
    return pile 
```

这就像我的老师给我的，就像测试用例一样：

```
import unittest
import solitaire

class Test(unittest.TestCase):

def test1(self):
    actual   = solitaire.play(['AC','2C','3C','4C','5C','6C','7C','8C','9C','TC','JC','QC','KC',
                               'AD','2D','3D','4D','5D','6D','7D','8D','9D','TD','JD','QD','KD',
                               'AH','2H','3H','4H','5H','6H','7H','8H','9H','TH','JH','QH','KH',
                               'AS','2S','3S','4S','5S','6S','7S','8S','9S','TS','JS','QS','KS'] )
    expected = [['AS','2S','3S','4S','5S','6S','7S','8S','9S','TS','JS','QS','KS','KH','QH','JH','TH','9H','8H','7H','6H','5H','4H','3H','2H','AH','AD','2D','3D','4D','5D','6D','7D','8D','9D','TD','JD','QD','KD','KC','QC','JC','TC','9C','8C','7C','6C','5C','4C','3C','2C','AC']]
    self.assertEqual    ( len(expected), len(actual), 'Incorrect result' )
    self.assertListEqual(     expected,      actual,  'Incorrect result' )
    pass

def test2(self):
    actual   = solitaire.play(['QS','5D','4S','8D','8H','3C','3H','5C','9H','6S','QD','2S','2C',
                               'KS','QC','7C','JC','4H','3D','5S','6C','KD','JS','9C','TS','2D',
                               '4D','AS','AC','7H','TC','AH','KH','6D','4C','8C','TD','AD','8S',
                               '3S','JH','KC','QH','TH','6H','7S','5H','2H','9S','7D','JD','9D'] )
    expected = [['8D','8H','3H','3C','JC','7C','QC','QD','4D','4S','6S','KS','KD','5D','5C','2C','2S','QS'],
                ['9C','4C','4H','9H'],
                ['6D','2D','3D'],
                ['JS','TS','TC','6C','AC','AS','5S'],
                ['KH','AH','7H'],
                ['8C'],
                ['AD','TD'],
                ['3S','8S'],
                ['6H','TH','JH'],
                ['KC'],
                ['2H','QH'],
                ['9D','JD','7D','7S'],
                ['5H'],
                ['9S']]
    self.assertEqual    ( len(expected), len(actual), 'Incorrect result' )
    self.assertListEqual(     expected,      actual,  'Incorrect result' )
    pass

def test3(self):
    actual   = solitaire.play(['5S','9H','QH','2H','8H','6H','3S','3H','AS','5H','JH','3C','KH',
                               '4H','6S','8S','8D','2D','JD','AH','KC','TD','TC','3D','6D','2C',
                               'AD','QS','9C','7C','6C','QD','JS','7H','7S','7D','KD','TS','5D',
                               'KS','9S','9D','4C','5C','8C','QC','JC','TH','4S','4D','2S','AC'] )
    expected = [['4D','5D','5C','8C','QC','JC','4C','4S','TS','AS','AH','4H','5H','7H','7S','JS','QS','QD','AD','6D','3D','TD','JD','2D','8D','8S','6S','KS','KD','7D','9D','9C','7C','6C','2C','TC','3C','KC','KH','JH','9H','QH','2H','8H','6H','3H','3S','5S'],
                ['9S'],
                ['TH'],
                ['2S'],
                ['AC']]
    self.assertEqual    ( len(expected), len(actual), 'Incorrect result' )
    self.assertListEqual(     expected,      actual,  'Incorrect result' )
    pass

def test4(self):
    actual   = solitaire.play(['7C','9S','QC','4H','9D','3S','AD','9C','8H','AC','2D','9H','AH',
                               '5D','6C','QD','3H','TC','QS','2S','8D','7D','QH','6H','4C','3C',
                               'JS','JD','7H','TS','4S','TD','5H','KD','8C','KS','JC','6D','2H',
                               '5C','3D','KH','8S','JH','TH','KC','2C','5S','AS','4D','7S','6S'] )
    expected = [['3S','9S','9D','AD','AC','7C'],
                ['QD','8D','7D','2D','5D','5H','8H','4H','9H','9C','QC'],
                ['AH'],
                ['TC','6C'],
                ['6H','3H'],
                ['JD','JS','2S','QS'],
                ['QH'],
                ['5C','JC','8C','3C','4C'],
                ['7H'],
                ['6D','TD','KD','KS','4S','TS'],
                ['2H'],
                ['3D'],
                ['TH','KH'],
                ['AS','5S','8S'],
                ['JH'],
                ['2C','KC'],
                ['4D'],
                ['6S','7S']]
    self.assertEqual    ( len(expected), len(actual), 'Incorrect result' )
    self.assertListEqual(     expected,      actual,  'Incorrect result' )
    pass

def test5(self):
    actual   = solitaire.play(['6C','AC','7C','7D','KC','6S','9H','5C','JS','3S','TS','9D','JH',
                               'QD','2D','8H','QS','8D','8C','2S','TC','9C','9S','5H','4D','3C',
                               'JD','QC','AS','3H','TD','7H','KS','KH','AD','TH','KD','4C','2C',
                               'QH','3D','5D','7S','4S','6D','2H','AH','JC','8S','4H','5S','6H'] )
    expected = [['JC','QC','2C','2H','QH','AH','4H','6H','6D','3D','5D','JD','TD','TH','7H','7S','4S','4C','TC','3C','3H','5H','KH','KS','KD','8D','4D','AD','AS','9S','9C','KC','5C','8C','8H','9H','JH','JS','TS','3S','6S','QS','2S','2D','QD','9D','7D','7C','AC','6C'],
                ['5S','8S']]
    self.assertEqual    ( len(expected), len(actual), 'Incorrect result' )
    self.assertListEqual(     expected,      actual,  'Incorrect result' )
    pass

def test6(self):
    actual   = solitaire.play(['8S','7C','AS','5H','7H','9D','8C','8H','3H','TC','AH','KH','JH',
                               'JC','AD','9C','AC','QS','6H','KC','KS','5C','TS','3C','9H','7D',
                               '3S','4D','TD','QD','5D','9S','3D','6S','6D','8D','JS','2S','4C',
                               '4S','5S','6C','2D','4H','7S','2H','KD','TH','JD','QH','QC','2C'] )
    expected = [['5S','7S','JS','2S','4S','4C','4H','TH','QH','QC','6C','9C','AC','KC','KS','QS','3S','3C','5C','5D','QD','7D','4D','TD','TS','9S','6S','6D','3D','8D','2D','2H','KH','6H','9H','9D','AD','AS','AH','3H','5H','JH','JC','8C','TC','7C','7H','8H','8S'],
                ['JD','KD'],
                ['2C']]
    self.assertEqual    ( len(expected), len(actual), 'Incorrect result' )
    self.assertListEqual(     expected,      actual,  'Incorrect result' )
    pass

if __name__ == "__main__":
#import sys;sys.argv = ['', 'Test.testName']
unittest.main() 
```

因为我刚刚学了很多python idk，但我只是不确定我将如何使用那个测试“类”，我猜它被称为。

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:19:54.413

似乎该`play`功能应该在`solitaire`正在导入的模块中。这意味着分配给变量的值`actual`：

```
 actual = solitaire.play() 
```

是存储在函数`pile`变量中的结果`play`。然后，测试函数将预期结果存储在变量 中`expected`。因此，您应该将`solitaire`模块和测试脚本放在同一目录中，然后运行：

```
 python test.py 
```

它应该会给你一些反馈。运行你所拥有的会产生一些错误。通过解释器运行`play`函数应该会给你一些关于哪里有错误的反馈。

**编辑：**

在OP的评论后编辑。

`pile`你在`play`函数中调用什么并不重要。它是由函数返回的，所以当你做类似`actual = solitaire.play()`的事情时，它会*返回*堆并将其分配给实际。

退一步说，你有两段代码：`play`函数和类`Test`。代码的设置方式应该在两个单独的文件中，我们称它们为 solitaire.py 和 test.py。`play`函数应该在 solitaire.py 文件中，而类`Test`应该在 test.py 中。test.py 脚本正在从 solitaire.py 文件中导入函数，其中包含以下行

`import solitaire`

这允许你做类似的事情。

`actual = solitaire.play()`

这一行基本上相当于说“从纸牌模块使用播放功能并将它返回的数据分配给变量实际。” 要运行脚本，请确保纸牌和测试文件位于同一目录中，并且该目录是终端中的工作目录。然后，您只需进入`python test.py`终端并让它运行。

如果您在理解 Python、如何运行脚本等方面需要进一步的帮助，请查看诸如[Learn Python the Hard Way 之](http://learnpythonthehardway.org/book/)类的内容。

# erlang - Erlang 在大带宽连接上的表现如何？

> ID：13301923
> 
> 赞同：3
> 
> 时间：2012-11-09T04:00:44.683
> 
> 标签：erlang, connect

我认为 Erlang 节点之间的消息不应该很大。如果我想构建一个流服务器，通常每个连接都需要很大的带宽，Erlang 能做到吗？如果是这样，是否有任何我可以学习的开源代码？我了解到 Erlang 可以很好地处理短消息，但我想知道它是否适合处理大带宽流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:56:03.253

我知道erlyvideo和flussonic。这些是用 erlang 编写的视频流服务器。

[https://github.com/erlyvideo/erlyvideo](https://github.com/erlyvideo/erlyvideo)

[https://github.com/erlyvideo/flussonic](https://github.com/erlyvideo/flussonic)

# maven - 这个 ant 开发工作流程的“maven 方式”是什么？

> ID：13301924
> 
> 赞同：1
> 
> 时间：2012-11-09T04:00:50.813
> 
> 标签：maven, maven-3

如何配置 maven 以支持这种类型的工作流：

**一次性设置**调用 maven 对开发人员机器进行一次性设置，例如

1.  创建为此应用程序配置的自定义版本的 tomcat
2.  在开发人员机器上创建本地 postgres 数据库
3.  将样本数据加载到数据库中
4.  运行 junit 测试以配置运行应用程序所需的其他资源

**集成测试**调用 maven 来运行集成测试，它应该执行以下操作

1.  创建集成测试数据库
2.  设置数据库
3.  针对数据库运行命令行集成测试
4.  运行包含应用程序的测试版 tomcat
5.  运行命令行 junit 测试，测试应用程序公开的 RESTful 服务

**Release Build**调用 maven 对系统进行发布构建

1.  完成集成测试的所有步骤
2.  生成用于服务器而非生产的资源和配置
3.  将最终结果存放在 git repo 中，提交并将更改推送到生产环境

**测试构建**调用 maven 对系统进行测试构建

1.  执行发布构建的所有步骤，但使用测试服务器配置配置测试发布包

我正在努力解决的主要问题是 maven 有一个单一的构建生命周期，其中包含明确定义的阶段序列，不确定我要构建的工作流是否适合 maven。

可以为这种类型的工作流配置 maven 吗？如果是的话，maven 的主要功能是什么，允许我想使用 maven 的四种主要方式的不同配置？

**更新**我所说的这个工作流程的意思是，我希望能够做类似的事情

```
mvn setup 
mvn integration 
mvn prod-release
mvn test-release 
```

我知道上面的例子看起来像蚂蚁，我是长期的蚂蚁用户和 maven 的总菜鸟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:06:18.210

你可以设置 Maven 来做这一切......

您可能会使用（震惊恐怖）配置文件来实现其中的一些......

**但你不想那样做**

您正在遵循 ANT 风格的思维......如果您喜欢这种思维方式，那么使用 ANT 或 Gradle 并感到高兴。

如果您想遵循 Maven 方式，那么您将以不同的方式解决问题。

来自Maven的方式，这是我的想法：

1.  为什么需要一次性设置？我通常有一个`run`配置文件，它可以动态配置正确的应用程序服务器，并在部署应用程序的情况下启动它，然后在我点击`^C`. 通常这涉及启动一两个数据库服务器......因此我开发的东西就像[cassandra-maven-plugin](http://mojo.codehaus.org/cassandra-maven-plugin/)。这样，当我在处理不同的项目时（可能需要 10 分钟的时间），我不必担心后台数据库服务器会占用我所有笔记本电脑的内存。

2.  当您进行上述工作时，集成测试实际上是微不足道的......事实上，我创建了[Maven Failsafe 插件](http://maven.apache.org/plugins/maven-failsafe-plugin/)，以便轻松地将插件执行绑定到集成测试的适当阶段。Maven 约定是有一个`run-its`用于运行集成测试的配置文件。

3.  发布版本与测试版本不同......呃！您应该构建与环境无关的工件。让他们从他们部署的环境中获取他们的配置。这消除了“测试”构建和“生产”构建之间发生变化的担忧。如果你真的需要捆绑配置，那么我通常会求助于一个单独的模块来获取不可知的工件并重新捆绑所需的配置。这样就很容易证明你有一个可重复的转换，并且在 QA 和 Ops 之间没有任何变化。

4.  我总是让发布版本包含集成测试。

所以通常我的项目是这样的

```
$ mvn -Prun 
```

将从零开始启动应用程序。点击 ^C 将再次删除所有内容，`mvn clean`或者在极端情况下，如果我有一个更复杂的设置过程并且需要一些缓存`mvn post-clean`（想想真的很干净）将删除`run`配置文件投入使用的任何内容

要运行我通常做的集成测试

```
$ mvn -Prun-its verify 
```

要发布，我通常会这样做

```
$ mvn release:prepare release:perform -B 
```

这是（在我看来）处理您需要的上述步骤的理想方式。

HTH。

顺便说一句，我不必专门使用 PostgreSQL（通常我的集成测试和`run`配置文件可以使用纯 java 数据库，例如[derby](http://db.apache.org/derby/)或[hsqldb](http://hsqldb.org/)，并且由于工件与环境无关，因此很容易让集成测试/开发 flyweight 应用程序服务器注入正确的 JDBC url) 所以你可能会遇到一些关于 PostgreSQL 的问题

# php - PHP 文件下载停止

> ID：13301934
> 
> 赞同：0
> 
> 时间：2012-11-09T04:01:52.283
> 
> 标签：php, download

我正在编写一个基本的许可证验证 PHP 下载脚本。目标文件大约 50MB，它适用于某些人。别人做不完，有时候重试也行。

这是脚本：

```
$method = $_GET['method'];
    if($method == "webdownload") {
        $airlineid = $_GET['airline'];

        $sql = "SELECT * FROM airlines WHERE airlineid='$airlineid'";   
        $result = mysql_query($sql) or die(mysql_error());
        $row = mysql_fetch_array($result);
        if($row['licensekey'] == "")
            die("Invalid airline id");

        $filename = $row['code'].'_installer.exe';
        $file_path = '../resources/application/files/'.$row['airlineid'].'/'.$row['clientversion'].'/application_installer.exe';
        if($row['licensestate'] != "OK")
            die("The license associated with this downloaded has been deauthorized.");

        if(!is_file($file_path))
            die("The file associated with this version for this airline appears to be invalid.");
        //download code here - it runs once only, if refreshed it will not allow it.                

        header('Content-type: application/exe');
        header("Content-Disposition: attachment; filename=".$filename);
        header("Content-Length: ".filesize($file_path));
        header("Content-Transfer-Encoding: binary");    

        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Pragma: public');   

        //header('X-Sendfile: '.$file_path); I tried this - it had no effect and I want the portability.

        $file = @fopen($file_path,"rb");
        while(!feof($file)) {           
            $buffer = fread($file, 1024 * 8);
            print($buffer);
            flush();            
        }
        close($file);       
    } 
```

编辑：根据建议，我发现脚本等非常容易受到 SQL 注入的攻击。我已使用此函数替换了直接变量 SQL 表达式：

```
 function secure_string($raw) {
    $sid = strtolower($raw);
    $sid = str_replace("'","_SINGLE_QUOTE", $sid);
    $sid = str_replace('"','_DOUBLE_QUOTE', $sid);

    $cmd[0] = "insert";
    $cmd[1] = "select";
    $cmd[2] = "union";
    $cmd[3] = "delete";
    $cmd[4] = "modify";
    $cmd[5] = "replace";
    $cmd[6] = "update";
    $cmd[7] = "create";
    $cmd[8] = "alter";

    for($index = 0; $index <= 8; $index++) {
        $sid = str_replace($cmd[$index],"_SQL_COMMAND", $sid);
    }

    return $sid;        
} 
```

这足以阻止 SQL 注入吗？

EDIT2：我已将此功能与 PDO 准备功能结合使用以消除此漏洞。感谢 100x 让我在没有灾难性后果的情况下学习了这一课。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:05:07.097

[`readfile()`](http://php.net/manual/en/function.readfile.php)是一个将整个文件一次性放入缓冲区的函数。可能会阻止 PHP 超时。使用它代替底部的`fopen()`and循环。`print()`

另一个解决方案是查看您的服务器是否具有[`mod_x_sendfile`](https://tn123.org/mod_xsendfile/)，因为这会将下载从 PHP 中取出并放入 apache 内部。

编辑：我注意到你说你已经尝试过 sendfile。如果你能让它工作，可能是一个更好的选择。

# delphi - 如何使 markdown.js 在 Delphi 的 TWebBrowser 中将 markdown 文档显示为 HTML？

> ID：13301935
> 
> 赞同：8
> 
> 时间：2012-11-09T04:01:53.620
> 
> 标签：delphi, markdown

如何使 markdown.js 在 Delphi 的 TWebBrowser 中将 markdown 文档显示为 HTML？

给定包含 Markdown 的字符串的内容，我如何让 markdown.js 将该 markdown 转换为 HTML，并在我的 Delphi 桌面应用程序中的 TWebBrowser 组件中显示该 HTML？

**更新：**

按照 Wouter 的例子（谢谢你，Wouter！），如果我只是这样做：

```
procedure TForm2.Button1Click(Sender: TObject);
begin
  WebBrowser1.Navigate('file://C:/junk/markdown/lib/markdown.js');
end; 
```

然后我收到一系列警告。首先，从Windows“保护”我免受javascript。我批准并运行一切，但最后我得到：

![在此处输入图像描述](../Images/bd4c585e967a9d699abb2938f2180cb6.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T09:23:24.483

好的，这有效：

![截屏](../Images/8623ae4b383cd4e9e13ee5405fe10f5f.png)

HTML：

```
<!DOCTYPE html>
<html>
    <head><style>body{font-family:Arial;font-size:small}</style></head>
<body>  
    <div id="markdown"></div>
    <input type="hidden" id="hidden" /> 
    <script type="text/javascript">
        hiddenEl=document.getElementById('hidden');
        markdownEl=document.getElementById('markdown');
    </script>
    <script src="lib/markdown.js"></script>
</body>
</html> 
```

德尔福代码：

```
procedure TForm38.Memo1Change(Sender: TObject);
begin
  WebBrowser1.OleObject.Document.GetElementByID('hidden').setAttribute('value', Memo1.Text);
  WebBrowser1.OleObject.Document.ParentWindow.execScript('markdownEl.innerHTML = markdown.toHTML(hiddenEl.value)');
end;

procedure TForm38.FormCreate(Sender: TObject);
begin
  WebBrowser1.Navigate('file://c:/!/markdown.html');
end; 
```

当然，这只是一个概念证明。尤其是 Delphi 代码应该检查文档是否已加载，但这种类型的代码只会分散本示例的注意力。

* * *

也许你想知道为什么我首先将 TMemo 的内容写入隐藏元素？这是因为在将 JavaScript 构建为字符串时，将带有换行符的文本传递给 JavaScript 函数很复杂。你会得到这样的东西：

```
window.alert("Hello
World"); 
```

* * *

**更新**`lib`在我的示例中，我在 html 文件 的子文件夹中有 markdown.js 。确保它`<script src="lib/markdown.js"></script>`确实指向 Markdown.js 的位置

# html - 我网站上的内容在屏幕外滚动

> ID：13301936
> 
> 赞同：0
> 
> 时间：2012-11-09T04:02:00.097
> 
> 标签：html, css, web

我有一个网站（madmonkeygunboats.com），我正在尝试解决一个页面宽度比内容宽的小问题。

如果您访问网站并按住鼠标中键 + 移动鼠标，工具栏和徽标会左右滑动。

我对网站开发真的很陌生，我想知道是否有任何方法可以减小页面宽度，从而停止过度滚动问题？

这是 style.css 文件：

```
 html, body {
    height:100%;
    padding: -100px;
    /*width:100%; /*Trying to lock horizontal scrolling*/
    overflow:hidden; /*Used to hide scroll bars*/
}
* {
    outline:none;
}
body {
    margin:0px;
    padding:0px;
    background:#000;
    font-family:'Century Gothic', arial, serif;
}
h1, h2, h3, h4, h5, h6, h7, h8 {
    font-family:"Jing Jing", "Jing Jing", sans-serif;
}
hgroup {
    position:absolute;
    z-index:3;
    left:0%;
    top:715px; /*Moving Logo*/
    padding:0px;
    color:#FFF;
    font-family:"Jing Jing", "Jing Jing", sans-serif;
    font-size: 30px;
    letter-spacing: 1px;
    text-shadow:#FFF 0 1px 1px;
}
hgroup h1 {
    margin: 0px;
    text-shadow:rgba(0, 0, 0, 1) 3px 2px 0;
    color:#F00;
    font-size: 150%;

}
hgroup h4 {
    font-family:'Century Gothic', arial, serif;
    font-size: 22px;
    font-weight:normal;
    text-indent:130px;
    margin: 0px;
    color:#FFF;
    text-shadow:rgba(0, 0, 0, 1) 3px 2px 0;

}
hgroup h7 {
    margin: 0px;
    text-shadow:rgba(0, 0, 0, 1) 3px 2px 0;
    color:#F00;
}
p1 {
    color:#FFF;
    font-family:'Century Gothic', arial, serif; 
}

hgroup a {
    text-decoration:none;
    color: #FFF;
    border-bottom: 1px dashed #FFF;
    -webkit-transition: all 1s ease-out;
    -moz-transition: all 1s ease-out;
    -o-transition: all 1s ease-out;
    -ms-transition: all 1s ease-out;
    transition: all 1s ease-out;
}
hgroup a:hover {
    background: rgba(0, 0, 0, 0.50);
    -webkit-transition: all 1s ease-out;
    -moz-transition: all 1s ease-out;
    -o-transition: all 1s ease-out;
    -ms-transition: all 1s ease-out;
    transition: all 1s ease-out;
}
#toolbar {
    position:fixed;
    z-index:3;
    right:10px;
    top:10px;
    padding:5px;
    /*background:url(images/fs_img_g_bg.png);*/

}
#Logo {
    position:fixed;
    z-index:4;
    left:10px;
    top:10px;
    padding:5px;
    background:url(images/fs_img_g_bg.png);

}
#toolbar img {
    border:none;
}
#img_title {
    position:fixed;
    z-index:3;
    right:10px;
    bottom: 55%;
    padding:10px;
    /*background:url(images/fs_img_g_bg.png);*/
    color:#FFF;
    font-family:"Myriad Pro", "Trebuchet MS", sans-serif;
    text-transform:camelcase;
    font-size: 30px;
    letter-spacing: 1px;
}
#bg {
    position:fixed;
    z-index:1;
    overflow:hidden;
    width:100%;
    height:100%;
}
#overlay {
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0px;
    left: 0px;
    /*background: url(images/dotted.png);*/
    opacity: 0.3;
}
#bgimg {
    display:none;
    -ms-interpolation-mode: bicubic;
}
#preloader {
    position:relative;
    z-index:3;
    width:32px;
    padding:20px;
    top:80px;
    margin:auto;
    background:#000;
}
#thumbnails_wrapper {
    z-index:2;
    position:fixed;
    bottom:100%;
    width:100%;
    height: 205px;
    top: -6px; /*Moving the Image slideshow thing*/
    background:url(images/empty.gif);
}
#outer_container {
    position:relative;
    padding:0;
    width:100%;
    margin:4px auto;
}
#outer_container .thumbScroller {
    position:relative;
    overflow:hidden;
    /*background:url(images/fs_img_g_bg.png);*/
    background: rgba(0,0,0,0.850);
}
#outer_container .thumbScroller, #outer_container .thumbScroller .container, #outer_container .thumbScroller .content {
    height:170px;
}
#outer_container .thumbScroller .container {
    position:relative;
    left:0;
}
#outer_container .thumbScroller .content {
    float:left;
}
#outer_container .thumbScroller .content div {
    margin:5px;
    height:100%;
}
#outer_container .thumbScroller img {
    border:3px solid #fff;
}
#outer_container .thumbScroller .content div a {
    display:block;
    padding:5px;
}
.nextImageBtn, .prevImageBtn {
    display:block;
    position:absolute;
    width:50px;
    height:50px;
    top:50%;
    margin:-25px 10px 0 10px;
    z-index:3;
    filter:alpha(opacity=40);
    -moz-opacity:0.4;
    -khtml-opacity:0.4;
    opacity:0.4;
    -webkit-transition:all .25s linear;
    -moz-transition:all .25s linear;
    -o-transition:all .25s linear;
    -ms-transition:all .25s linear;
    transition:all .25s linear;
}
.nextImageBtn:hover, .prevImageBtn:hover {
    filter:alpha(opacity=80);
    -moz-opacity:0.8;
    -khtml-opacity:0.8;
    opacity:0.8;
    -webkit-transition:all .25s linear;
    -moz-transition:all .25s linear;
    -o-transition:all .25s linear;
    -ms-transition:all .25s linear;
    transition:all .25s linear;
}
.nextImageBtn {
    right:0;
    background:#000 url(images/nextImgBtn.png) center center no-repeat;
}
.prevImageBtn {
    background:#000 url(images/prevImgBtn.png) center center no-repeat;
}
ul.menu {
    margin:0;
    margin-top: 0px;
    padding:0px;
    list-style: none;
    font-family:"Myriad Pro", "Trebuchet MS", sans-serif;
    font-size:14px;
    width:60%;   /*For adding new tabs 850, 1020px*/
    position:absolute;
    top:10%;
    /*left:40%*/
    right:-7%;  /*Moving Tab bar left or right*/
}
ul.menu a {
    text-decoration:none;
    outline:none;
}
ul.menu li {
    float:left;
    width:170px;
    height:85px;
    position:relative;
    cursor:pointer;
}
ul.menu li > a {
    position:absolute;
    top:70px;
    left:0px;
    width:170px;
    height:85px;
    z-index:12;
    background:transparent url(images/overlay.png) no-repeat bottom right;
    background-color: rgba(0, 0, 0, 0.75);
    -moz-box-shadow:0px 0px 2px #000 inset;
    -webkit-box-shadow:0px 0px 2px #000 inset;
    box-shadow:0px 0px 2px #000 inset;
}
ul.menu li a img {
    border:none;
    position:absolute;
    width:0px;
    height:0px;
    bottom:0px;
    left:85px;
    z-index:100;
    -moz-box-shadow:0px 0px 4px #000;
    -webkit-box-shadow:0px 0px 4px #000;
    box-shadow:0px 0px 4px #000;
}
ul.menu li span.wrap {
    position:absolute;
    top:25px;
    left:0px;
    width:170px;
    height:60px;
    z-index:15;
}
ul.menu li span.active {
    position:absolute;
    background: rgba(0, 0, 0, 0.75);
    top:85px;
    width:170px;
    height:0px;
    left:0px;
    z-index:14;
    -moz-box-shadow:0px 0px 4px #000 inset;
    -webkit-box-shadow:0px 0px 4px #000 inset;
    box-shadow:0px 0px 4px #000 inset;
    -webkit-box-shadow: 0px 0px 4px #000 inset;
    -moz-box-shadow: 0px 0px 4px #000 inset;
    box-shadow: 0px 0px 4px #000 inset;
    -webkit-border-bottom-right-radius: 15px;
    -webkit-border-bottom-left-radius: 15px;
    border-bottom-right-radius: 15px;
    -moz-border-radius-bottomright: 15px;
    border-bottom-left-radius: 15px;
    -moz-border-radius-bottomleft: 15px;
}
ul.menu li span span.link, ul.menu li span span.descr, ul.menu li div.box a {
    margin-left:15px;
    text-transform:uppercase;
    text-shadow:1px 1px 1px #000;
}
ul.menu li span span.link {
    color:#fff;
    font-size:24px;
    float:left;
    clear:both;
}
ul.menu li span span.descr {
    color:#0B75AF;
    float:left;
    clear:both;
    width:155px;
    font-size:10px;
    letter-spacing:1px;
}
ul.menu li div.box {
    display:block;
    position:absolute;
    width:170px;
    overflow:hidden;
    height:170px;
    top:85px;
    left:0px;
    display:none;
    background:#000;
}
ul.menu li div.box a {
    float:left;
    clear:both;
    line-height:30px;
    color:#0B75AF;
}
ul.menu li div.box a:first-child {
    margin-top:15px;
}
ul.menu li div.box a:hover {
    color:#fff;
}
article {
    display:none;
}
.image {
    border: 2px solid rgba(255, 255, 255, 0.15);
    border-radius: 5px;
    float: right;
    -webkit-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}
/* Pop Up */
#popupProject, #popupDesign, #popupModeling, #popupCoding, #popupDemo, #popupNews {
    height: 800px;
    width: 880px;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.80);
    border: 1px solid #cecece;
    z-index: 15;
    padding: 20px;
    color: #FFF;
    -webkit-box-shadow: 0px 0px 4px #000 inset;
    -moz-box-shadow: 0px 0px 4px #000 inset;
    box-shadow: 0px 0px 4px #000 inset;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    -o-border-radius: 10px;
    -ms-border-radius: 10px;
    -khtml-border-radius: 10px;
    border-radius: 10px;
    margin-top: -50px;
    visibility: hidden;
}
#popupProject p, #popupDesign p, #popupModeling p, #popupCoding p, #popupDemo p, #popupNews p {
    padding-left: 10px;
    font-size: 16px;
    line-height: 24px;
}
#popupProject h1, #popupDesign h1, #popupModeling h1, #popupCoding h1, #popupDemo h1, #popupNews h1 {
    text-align: left;
    font-size: 30px;
    letter-spacing: 1px;
    border-bottom: 1px dotted #D3D3D3;
    padding-bottom: 2px;
    margin: 0;
}
#popupProjectClose, #popupDesignClose, #popupModelingClose, #popupCodingClose, #popupDemoClose, #popupNewsClose {
    right: 0;
    top: 15px;
    position: absolute;
    display: block;
    opacity: 0.5;
    -webkit-transition:all .25s linear;
    -moz-transition:all .25s linear;
    -o-transition:all .25s linear;
    -ms-transition:all .25s linear;
    transition:all .25s linear;
}
#popupProjectClose:hover, #popupDesignClose:hover, #popupModelingClose:hover, #popupCodingClose:hover, #popupDemoClose:hover, #popupNewsClose:hover {
    opacity: 1;
    -webkit-transition:all .25s linear;
    -moz-transition:all .25s linear;
    -o-transition:all .25s linear;
    -ms-transition:all .25s linear;
    transition:all .25s linear;
}
.border {
    height: 3px;
    clear: both;
    border-bottom: 1px dotted #FFF;
}
*:focus {
    outline: none;/* Prevents blue border in Webkit */
}
form {
    font-family:'Century Gothic', arial, serif;
    width: 350px;
    margin-left: 25px;
}
input, textarea {
    font-family:"Myriad Pro", "Trebuchet MS", sans-serif;
    background-color: #fff;
    border: 1px solid #ccc;
    width: 300px;
    min-height: 30px;
    display: block;
    margin-bottom: 16px;
    margin-top: 8px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    -o-border-radius: 5px;
    -ms-border-radius: 5px;
    -khtml-border-radius: 5px;
    border-radius: 5px;
    -webkit-transition: all 0.5s ease-in-out;
    -moz-transition: all 0.5s ease-in-out;
    -o-transition: all 0.5s ease-in-out;
    -ms-transition: all 0.5s ease-in-out;
    transition: all 0.5s ease-in-out;
    color: #fff;
}
textarea {
    min-height: 200px;
    resize:none;
}
input:focus, textarea:focus {
    -webkit-box-shadow: 0 0 25px #ccc;
    -moz-box-shadow: 0 0 25px #ccc;
    box-shadow: 0 0 25px #ccc;
}
/*working on revision*/
input:not(:focus), textarea:not(:focus) {
    opacity: 0.5;
}
input:required, textarea:required {
 background: url("images/asterisk_orange.png") no-repeat 280px 7px;
}
input:valid, textarea:valid {
 background: url("images/tick.png") no-repeat 280px 5px;
}
input:focus:invalid, textarea:focus:invalid {
 background: url("images/cancel.png") no-repeat 280px 7px;
}
input[type=submit] {
    font-size: 24px;
    padding: 10px;
    background: none;
    opacity: 1.0;
}
.map {
    margin-top: -500px;
    margin-right: 25px;
    border: 5px solid rgba(255, 255, 255, 0.30);
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    -o-border-radius: 5px;
    -ms-border-radius: 5px;
    -khtml-border-radius: 5px;
    border-radius: 5px;
    float: right;
}
.date {
    float: left;
    position: relative;
    margin-right: 10px;
    padding: 44px 5px 0;
}
.date .month {
    text-transform: uppercase;
    font-size: 25px;
}
.date .day {
    font-size: 35px;
    line-height: 45px;
    position: absolute;
    left: 5px;
    top: 0;
}
.date .year {
    display: block;
    position: absolute;
    right: -5px;
    top: 15px;
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
    transform: rotate(-90deg);
} 
```

如果有人需要，我可以提供 html 文件。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:26:22.030

您可能想考虑将布局更改为更传统的布局。你熟悉背景图像的这种技术吗？

[http://webdesignerwall.com/tutorials/how-to-css-large-background](http://webdesignerwall.com/tutorials/how-to-css-large-background)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:27:23.217

这里看起来不错，所以与 IE 相关是吗？

在您尝试修复之前，您必须修复您的 HTML+CSS。就目前而言，它完全不合规，这会给你带来各种悲伤。[W3C 验证器服务](http://validator.w3.org/check?verbose=1&uri=http://madmonkeygunboats.com/)是您的朋友。

乱码的例子：

*   `<p1>`标签
*   HTML5 文档中间的 XHTML DOCTYPE。
*   您的内部的附加`<head>`标签`<body>`
*   未闭合元素

虽然存在这些问题，但浏览器可以自由地处理它们，但他们认为这意味着结果不可靠。

# java - 为什么改变初始化 RandomAccessFile 对象的方式会改变 FileChannel 的性能？

> ID：13301937
> 
> 赞同：0
> 
> 时间：2012-11-09T04:02:01.960
> 
> 标签：java, performance, filechannel, randomaccessfile

我正在研究将一些在磁盘上出现瓶颈的代码重写到 java 中的可能性。javadoc 没有说明为什么下面的前两个代码循环与后两个循环的执行方式如此不同：

```
public void testFileChannel() throws IOException {
    RandomAccessFile raf = new RandomAccessFile(new File("/tmp/t5"),"rw");
    FileChannel c = raf.getChannel();
    c.force(true);
    ByteBuffer b = ByteBuffer.allocateDirect(64*1024);
    long s = System.currentTimeMillis();
    for(int i=0;i<size;i++){            
        b.clear();
        b.put(data.getBytes());
        b.flip();
        c.write(b);
    }
    long e=System.currentTimeMillis();
    raf.close();
    System.out.println("FileChannel rw force=true "+(e-s));

    raf = new RandomAccessFile(new File("/tmp/t5"),"rw");
    raf.seek(0);
    c = raf.getChannel();
    c.force(false);
    b = ByteBuffer.allocateDirect(64*1024);
    s = System.currentTimeMillis();
    for(int i=0;i<size;i++){            
        b.clear();
        b.put(data.getBytes());
        b.flip();
        c.write(b);
    }
    e=System.currentTimeMillis();
    raf.close();
    System.out.println("FileChannel rw force=false "+(e-s));

    raf = new RandomAccessFile(new File("/tmp/t5"),"rwd");
    raf.seek(0);
    c = raf.getChannel();
    c.force(true);
    b = ByteBuffer.allocateDirect(64*1024);
    s = System.currentTimeMillis();
    for(int i=0;i<size;i++){            
        b.clear();
        b.put(data.getBytes());
        b.flip();
        c.write(b);
    }
    e=System.currentTimeMillis();
    raf.close();
    System.out.println("FileChannel rwd force=true "+(e-s));

    raf = new RandomAccessFile(new File("/tmp/t5"),"rwd");
    raf.seek(0);
    c = raf.getChannel();
    c.force(true);
    b = ByteBuffer.allocateDirect(64*1024);
    s = System.currentTimeMillis();
    for(int i=0;i<size;i++){            
        b.clear();
        b.put(data.getBytes());
        b.flip();
        c.write(b);
    }
    e=System.currentTimeMillis();
    raf.close();
    System.out.println("FileChannel rws force=true "+(e-s));
}

public static final int size = 10000;
public static final String data = "123456789012345678901234567890"; 
```

运行此代码会产生如下内容：

```
FileChannel rw force=true 273
FileChannel rw force=false 40 // Forcing writes to disk is slower than above.
FileChannel rwd force=true 4179 // Why is this slower?!
FileChannel rwd force=true 4212 
```

如您所见，这会使`c.force(true)`事情变慢一点。为什么在使用`RandomAccessFile`“rwd”模式时事情会更慢。不应该“rwd”并且`c.force(true)`是等效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T04:11:20.167

根据 JavaDoc，c.force(whatever) 只是在该方法返回之前将内容推送到磁盘，而使用“rwd”打开时为每个 I/O 执行此操作。

# iphone - 带有当前 xcode 的 iOS 上的 Haskell

> ID：13301940
> 
> 赞同：3
> 
> 时间：2012-11-09T04:02:58.913
> 
> 标签：iphone, ios, xcode, haskell, ghc

我无法使用 GHC-ios github 项目在 iOS 上启动和运行 Haskell。

使用 xcode for ios 配置 GHC 的最可靠方法是什么？

# assembly - gdb：显示正在执行的实际代码的方法？

> ID：13301941
> 
> 赞同：0
> 
> 时间：2012-11-09T04:03:15.560
> 
> 标签：assembly, gdb

我正在学习如何在汇编中编程，并且我想在逐步执行程序时确切地了解 gdb 每行执行的内容。我知道`display /i $pc`给了我与正在执行的内容相对应的汇编代码，但我想要目标代码（我认为这就是它的名字？）

例如，如果我有以下内容：

```
 0:  c7 04 24 12 90 04 08    movl   $0x8049012,(%esp)
    7:  5d                      pop    %ebp
    8:  c7 45 00 28 54 8f 44    movl   $0x448f5428,0x0(%ebp)
    f:  89 e5                   mov    %esp,%ebp
    11: 55                      push   %ebp 
```

我希望 gdb 告诉我它正在经历`c7 04 24 12 90 04 08`而不是给我`movl $0x8049012,(%esp)`.

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:13:16.187

Nevermind 自己找到了解决方案： `set disassemble-next-line on`给我我想要的。

# c# - 检测操作系统版本 - Windows Phone 7 还是 Windows Phone 8？

> ID：13301945
> 
> 赞同：10
> 
> 时间：2012-11-09T04:04:30.690
> 
> 标签：c#, windows-phone-7, windows-phone-8

我有一个适用于 Windows Phone 7 的应用程序。我在 Windows 8 桌面上创建了 Visual Studio 2012。我正在尝试在 Windows Phone 8 设备中使用该应用程序，并涉及一些更改。如何以编程方式检测设备是 Windows Phone 7 还是 Windows Phone 8？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T04:10:21.383

就像在任何其他使用 C# 的平台上一样：`Environment.OSVersion`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T06:28:54.833

可以使用这个工具包查看手机的版本：http: [//mangopollo.codeplex.com/](http://mangopollo.codeplex.com/)

> bool IsWP8() ：如果运行应用程序的手机是 Windows Phone 8，则返回

编辑：如果您不想使用整个工具包，它是如何检查它的：

```
public static bool IsWP8 { get { return Environment.OSVersion.Version >= TargetedVersion; } }

    private static Version TargetedVersion = new Version(8, 0); 
```

对原作者的信任。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T04:08:39.950

你不应该需要。

它要么是 Windows Phone 7 应用程序，并且可以在 Windows Phone 7 和 Windows Phone 8 设备上运行，要么是 Windows Phone 8 应用程序。

在 Windows Phone 8 上运行的 Windows Phone 7 应用程序应该不能做任何 Windows Phone 7 设备不能做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T19:35:10.253

这篇文章也有一些很好的策略。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202996(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202996(v=vs.105).aspx)

它也不仅仅是关于运行时，例如，您的代码可能在 wp7 上以一种方式运行，而在 wp8 上以另一种方式运行，具体取决于 API 的可用性。在这种情况下，#define 可能是最好的选择，因为你真的不关心你在什么样的设备上运行，而是你构建的 SDK 是什么。

# jquery - 如果我们更改内容的顺序，那么 .change() API 将不起作用？

> ID：13301962
> 
> 赞同：0
> 
> 时间：2012-11-09T04:07:05.767
> 
> 标签：jquery

我正在使用 .change() jquery api 在 textfield 发生更改时触发函数。但是如果订单发生变化就会触发。例如：如果内容是'a，b'，那么如果它更改为'b，a'，那么`$('#id').trigger('change')`将触发但我不想触发，因为这些内容是相同的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:19:18.673

您必须存储`change`触发前一个事件时文本字段包含的最后一个值。然后，您必须使用一些自定义条件将当前值与最后一个值匹配。

看起来您正在比较的是某种列表。你说对你来说，`ab`与 没有什么不同`ba`，所以也许你需要拆分文本字段的值并逐个字符地进行比较。
正如[@sachleen 所说](https://stackoverflow.com/questions/13301962/if-we-change-the-order-of-a-contents-then-change-api-will-not-work#comment18140470_13301962)，当元素的内容发生更改时会触发更改，对于 jQuery，`ab != ba`因此会触发事件。

# sql - 列的值范围取决于另一列

> ID：13301964
> 
> 赞同：0
> 
> 时间：2012-11-09T04:07:08.997
> 
> 标签：sql, database-design, relational-database, database-schema

我正在设计一个包含一个表的小型数据库，该表具有一个列，其可能值的范围取决于另一列的值（在同一个表中），即。

## 表 A

field_a (fk)

field_b (fk)

field_b 可以假定的值范围取决于 field_b 中包含的值。

我的解决方案是在表 A 中将 field_a 和 field_b 组合在一起，并创建一个包含以下内容的中间表：

## 表 A

field_ab（fk 到表 B 行）

## 表 B

field_a (fk)

field_b (fk)

这样，表 A 的 field_ab 中的 fk 只能指向 field_a 和 field_b 的有效组合（假设表 B 已正确填充。）

这看起来真的很尴尬，尤其是对于 field_a 或 field_b 的查询，所以我知道我在做一些根本错误的事情——可能与普通表单有关？

有人可以建议解决我的问题的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:31:05.393

考虑使用 INSERT 触发器来更新计算值。

# google-chrome - 每个窗口的单独会话

> ID：13301965
> 
> 赞同：28
> 
> 时间：2012-11-09T04:07:15.487
> 
> 标签：google-chrome, google-chrome-extension, incognito-mode

我正在尝试创建一个扩展，其中每个 chrome 窗口都有自己的会话。我们之前使用了隐身模式，但问题是，虽然主窗口和隐身窗口有单独的会话，但会话是在各个隐身窗口之间共享的。

每次打开隐身窗口时，是否有任何方法可以将 chrome 配置为使用单独的会话？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-04-16T05:18:48.493

您的目标是使用新的用户数据目录启动一个 Chrome 实例。cookie 将在每个实例中被隔离。在扩展中实现一种在 cmd 上达到与此命令相同目标的方法：

```
chrome.exe --user-data-dir="C:\temp\user1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T15:42:03.520

我有一个类似的问题，我想使用 google chrome 浏览和调试工作，而 chrome 在会话方面非常原始。我编写了这个小批量脚本来复制默认配置文件，清除会话信息，然后使用新配置文件。在创建新的配置文件之前，也会清除旧的重复配置文件。结果是一个包含所有旧配置文件的新会话。

```
@echo off

rem folder prefix for the new profile folder
set folderNameStart=profile_

rem generate and format the date creating the new folder name
For /f "tokens=1-6 delims=/ " %%a in ('date /t') do (set mydate=%%c%%b%%a)
For /f "tokens=1-2 delims=/:" %%a in ('time /t') do (set mytime=%%a%%b)
set folderName=%folderNameStart%%mydate%%mytime%%random%

rem set the profile path and the folder destination as well as the directory to 
delete
set profilePath="C:\Documents and 
Settings\%USERNAME%\AppData\Local\Google\Chrome\User Data\Default"
set profileDestination="C:\Documents and 
Settings\%USERNAME%\AppData\Local\Google\Chrome\User Data\"%folderName%
set profileLocation="C:\Documents and 
Settings\%USERNAME%\AppData\Local\Google\Chrome\User Data\"

rem iterate through directory and delete all the existing profile folders
CD %profileLocation%
echo %profileLocation%
for /D /r %%G in ("%folderNameStart%*") do rmdir /q /s "%%G"

rem this will copy the old profile directory 
echo D | xcopy %profilePath% %profileDestination%

rem delete the session storage and its contents if its exist
rmdir /q /s "C:\Documents and Settings\%USERNAME%\AppData\Local\Google\Chrome\User 
Data\%folderName%\Session Storage"

rem start google chrome with the new profile folder
start "Chrome" "C:\Program Files\Google\Chrome\Application\chrome.exe" --profile-directory="%folderName%" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-27T22:22:09.803

为了使它工作，需要知道在 chrome 中打开“新窗口”之间的区别，如果没有区别，那么在这种情况下就没有办法做到这一点。另一种方法是知道使用隐身模式时有什么区别，并使用它在 chrome 中添加**“在新窗口 pofile 1 中打开选项卡”。**

# c# - 如何使用 httpWebRequest 设置请求正文

> ID：13301968
> 
> 赞同：3
> 
> 时间：2012-11-09T04:07:37.457
> 
> 标签：c#, httpwebrequest, httprequest

我想使用 httpWebRequest 将数据“发布”到网站。所以我使用萤火虫分析真正发送到服务器的内容。第一步，我使用浏览器浏览www.mytargetURL.net，第二，打开firebug，然后，我填写所有表单数据并单击提交按钮（这意味着POST数据到服务器）。所以，我看萤火虫，请求正文部分有很多参数。就像是：

```
param1=
param2=
param3=default_value1
param4=default_value2
param5=value_I_set_byhand1
param6=value_I_set_byhand2 
```

问题是：我应该使用我在 firebug 参数表中看到的所有参数（这意味着所有 6 个参数）或仅具有值的参数（参数 3-6）或仅我已填写的参数来设置 httpWebRequest obj 的请求正文提交表单（只有 param5 和 param6）？

谢谢大家的支持

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:19:48.903

您创建`HttpWebRequest`对象、获取请求流并将参数写入其中。[HttpRequest.GetRequestStream](http://msdn.microsoft.com/en-us/library/d4cek6cc.aspx)的示例应该为您指明正确的方向。

# javascript - KnockoutJS：处理选择框。选择默认值并删除现有项目

> ID：13301972
> 
> 赞同：1
> 
> 时间：2012-11-09T04:08:28.177
> 
> 标签：javascript, knockout.js

我在处理 Knockout JS 中的复选框时遇到问题。

**jsfiddle 链接**：http: [//jsfiddle.net/wenbert/Xyuhk/72/](http://jsfiddle.net/wenbert/Xyuhk/72/)

请注意，我为每个父母（英雄）提供了 2 个选择框。每个人都使用不同的方式，但都或多或少地“观察”同一个对象。

**工作流程**

![在此处输入图像描述](../Images/bab6bfd30d1b5b6b4b0f9f24c0f3d842.png)

1.  单击一个灰色框
2.  应该会出现一个带有蓝色虚线的框，其中包含选择框的项目。
3.  从这里，您可以编辑选择框的项目。
4.  在这里小提琴：http: [//jsfiddle.net/wenbert/Xyuhk/72/](http://jsfiddle.net/wenbert/Xyuhk/72/)

**问题**

1.  当我删除一个项目时，我无法将它从“选择”框中删除。请注意，我不想将其从对象中完全删除。我只想将当前项目标记为“isDeleted”。
2.  选择 A - 隐藏项目，但在选择框中留下一个空选项。
3.  选择 B - “ifnot: isDeleted”对选项没有任何影响。

**问题**

如何处理选择框？我以 2 种不同的方式渲染了 2 个选择框以尝试使其`ifnot: isDeleted`生效，但它们都不起作用。

更新：有了这个设置，我如何做选择框的“选定”值？

**HTML**

```
<button data-bind="click: addHero">Add Hero</button>
<ul data-bind="foreach: heroes">
    <li class="parent" data-bind="ifnot: isDeleted, click: $parent.selectHero">
        <input class="big-box" type="text" data-bind="value: name" />
        <button class="btn-small" data-bind="click: $parent.removeHero">Remove Hero</button>
        <br/>

        SKILLS: 

        Select A) <select data-bind="foreach: skills">
            <option data-bind="value: name, text: name, ifnot: isDeleted"></option>            
        </select>
        Select B) <select data-bind="options: skills, optionsText: 'name', value: selected_skill.name, ifnot: isDeleted">         
        </select>
        <br/>
        <span class="instructions">(Step 1: Click somewhere here)</span>
    </li>
</ul>

<div class="edit-panel" data-bind="if: selectedHero">
    Edit Skill:<br/>
    <div data-bind="with: selectedHero">
        <button class="btn-small" data-bind="click: addSkill">Add Skill</button>
        <ul data-bind="foreach: skills">
            <li data-bind="ifnot: isDeleted">
                <button class="btn-small" data-bind="click: $parent.setAsDefaultSkill">Set as default</button>
                <input data-bind="value: name" />
                <button class="btn-small" data-bind="click: $parent.removeSkill">Remove Skill</button>
            </li>
        </ul>
        <span class="instructions">(Step 2: Remove a Skill, then have a look at the Select Box above.)</span>
    </div>
</div>

<pre data-bind="text: ko.toJSON($data, null, 2)"></pre> 
```

**Javascript**

```
var initialData = [
    {
        id: '1',
        name: "Batman",
        isDelete: false,
        selected_skill: {name: "Boxing", isDeleted: false},
        skills: [
            { id: '1', name: "Karate", isDeleted: false },
            { id: '2', name: "Boxing", isDeleted: false},
            { id: '6', name: "Sonar", isDeleted: false}
        ]
    },
    {
        id: '2',
        name: "Hulk",
        isDelete: false,
        skills: [
            { id: '3', name: "MMA", isDeleted: false },
            { id: '4', name: "Rage", isDeleted: false},
            { id: '5', name: "Extra Strength", isDeleted: false}
        ]
    },
];

function Hero(data) {
    var self = this;
    self.name = ko.observable(data.name);
    self.selected_skill= ko.observable(data.selected_skill);
    self.skills = ko.observableArray(ko.utils.arrayMap(data.skills, function(i) {
        return new Skills(i);
    }));

    self.addSkill = function() {
        self.skills.push(new Skills({name: '---', isDeleted: false}));
    }

    self.setAsDefaultSkill = function(item) {
        self.selected_skill(item);
    }

    self.isDeleted = ko.observable(data.isDeleted);

    self.removeSkill = function(item) {
        item.isDeleted(true);
    }
}

function Skills(data) {
    var self = this;
    self.name = ko.observable(data.name);
    self.isDeleted = ko.observable(data.isDeleted);
}

function SuperheroViewModel(data) {
    var self = this;
    self.heroes = ko.observableArray(ko.utils.arrayMap(data, function(i){
        return new Hero(i);
    }));

    self.selectedHero = ko.observable();
    self.selectedHero.skills = ko.observableArray();

    self.addHero = function() {
        self.heroes.push(
            new Hero({
                name: 'Wolverine',
                isDelete: false,
                skills: [{name: 'Breathing', isDeleted: false}],
            })
        );
    }

    self.selectHero = function(item) {
        self.selectedHero(item);
    }

    self.removeHero= function(item) {
        item.isDeleted(true);
    }
}

ko.applyBindings(new SuperheroViewModel(initialData ));
​
​ 
```

我希望一切都清楚。

任何答复将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:11:13.743

我会在视图模型中进行过滤。所以我会创建一个过滤的集合，比如`availableSkills`

```
self.availableSkills = ko.computed(function() {
    return ko.utils.arrayFilter(self.skills(), function(item) {
        return !item.isDeleted();
    })
}); 
```

然后我会在选择中使用它：

```
<select data-bind="foreach: availableSkills">
     <option data-bind="value: name, text: name"></option>            
</select> 
```

[演示小提琴。](http://jsfiddle.net/M5y7z/)

# selenium - 如何在单个 Windows 机器上使用不同版本的 IE 测试 webapp？

> ID：13301973
> 
> 赞同：4
> 
> 时间：2012-11-09T04:08:29.727
> 
> 标签：selenium, internet-explorer-9, automated-tests, selenium-webdriver

我需要在不同版本的 IE（IE9、IE8 和 IE7）上测试 Web 应用程序。

我发现 IE9 提供了 IE8 和 IE7 的兼容性视图，所以我在我的测试系统中安装了 IE9。

有一个标题 META 标签“X-UA-Compatible”，您可以通过它设置兼容性视图但在我的情况下，我们无权访问源文件。

如果我们可以通过 selenium 或任何其他方式动态设置“X-UA-Compatible”标签，那么它可以解决我的问题。请让我知道是否有任何好方法可以从单窗口机器/实例在不同版本的 IE（7,8 和 9）中测试 WebApp。

任何建议将不胜感激。

请分享您的经验。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T04:27:15.977

要在不同版本的 IE 上测试您的 Web 应用程序，您可以使用在线测试工具[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)、[IECollection](http://utilu.com/IECollection/)、Microsoft TestDrive 或在 IE 8 和 9 中按 F12 并从浏览器模式菜单中选择 IE 版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T07:58:23.493

[Microsoft 在http://modern.ie](http://modern.ie)为不同版本的 IE 提供虚拟机。因此，在一台机器上，可以通过在虚拟机中运行测试来拥有多个 IE 测试版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T04:24:04.933

您谈到兼容模式。不确定您是否知道，但如果您不知道，请在 IE 9 中按 F12 打开开发人员工具。从那里，您可以设置渲染版本。这是我在不同 IE 版本上测试的方式。

来自官方来源：

1.  [4种方式tp测试...](http://blogs.msdn.com/b/thebeebs/archive/2011/11/03/3-ways-to-test-your-website-in-old-versions-of-ie.aspx)

您可以尝试的另一个解决方案是[spoon.net/](http://spoon.net/ie-7.0)，它是浏览器的在线模拟器。您可以在那里选择不同的浏览器和版本。您还可以找到其他类似的在线模拟器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T11:36:47.913

2014 年 11 月更新：现在有一种方法可以实现这一点。

[Spoon](http://spoon.net/selenium)有一个 Selenium 网格，可以在同一台 Windows 开发机器上运行所有版本的 IE（Chrome 和 Firefox）。它使用 Spoon 虚拟机通过虚拟化包括所有浏览器节点的 selenium 设置来实现这一点。

它与您现有的硒测试 100% 兼容。您不需要提前启动节点，当测试代码需要特定的浏览器/版本时，它们会按需启动。

免责声明：我在 Spoon 工作并帮助构建了这个。

# iphone - 为什么不能使用 < 或 > 比较 NSDate？

> ID：13301980
> 
> 赞同：3
> 
> 时间：2012-11-09T04:09:00.017
> 
> 标签：iphone, objective-c, ios, nsdate

```
NSDate *date = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];
[dateFormat setDateFormat:@"MM/dd/yyyy"];
NSLog([@"today is " stringByAppendingString:[dateFormat stringFromDate:date]]);
NSLog([@"firstBirthdayDate is " stringByAppendingString:[dateFormat stringFromDate:firstBirthdayDate]]);
NSLog([@"secondBirthdayDate is " stringByAppendingString:[dateFormat stringFromDate:secondBirthdayDate]]);
if ([firstBirthdayDate isEqualToDate:secondBirthdayDate])
    NSLog(@"First date is the same as second date");
if (firstBirthdayDate < date)
    NSLog(@"First date is earlier than today");
else
    NSLog(@"First date is later than today");

if (secondBirthdayDate < date)
    NSLog(@"Second date is earlier than today"); 
```

*   今天是 11/08/2012
*   `firstBirthdayDate`是 2012 年 1 月 23 日
*   `secondBirthdayDate`是 2012 年 1 月 23 日

这是我在日志中得到的：

> 第一个日期与第二个日期相同
> 
> 第一个日期晚于今天
> 
> 第二个日期早于今天

我想我要疯了...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T04:12:14.330

用于`if ([date1 isEqualToDate:date2])`比较两个日期，否则您可以使用以下内容，

```
if ([date1 compare:date2] == NSOrderedSame)

if ([date1 compare:date2] == NSOrderedAscending)

if ([date1 compare:date2] == NSOrderedDescending) 
```

`>`，`<`或`=`仅用于比较非指针。基本上我的理解是，当您使用这些运算符时，它可能会比较内存地址而不是其中的值。所以你会得到意想不到的结果。

从逻辑上讲，它是这样工作的：

```
 if (obj1 > obj2) {
        return NSOrderedDescending;
    }

    if (obj1 < obj2) {
        return NSOrderedAscending;
    }

    if (obj1 == obj2) {
        return NSOrderedSame;
    } 
```

您可以使用任何比较语句来比较日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:14:45.837

您不能使用`<`or`>`来比较日期。你必须使用正确的方法。看看[这个](https://stackoverflow.com/questions/1072848/how-to-check-if-an-nsdate-occurs-between-two-other-nsdates)帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:23:00.700

```
 if ([date compare:firstBirthdayDate] == NSOrderedAscending){
         NSLog(@"First date is earlier than today");
    }
   else{
        NSLog(@"First date is later than today");
   }
   if ([date compare:secondBirthdayDate] == NSOrderedAscending){
         NSLog(@"Second date is earlier than today");
   }

   if ([firstBirthdayDate compare: secondBirthdayDate] == NSOrderedSame) 
        NSLog(@"First date is the same as second date"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:00:52.403

简而言之：因为基本运算符仅适用于任何 OBJECT < > != == ... 对这个变量的 POINTER 值进行基本操作

在 c++ 中，这些运算符可以用 objC 和 java 以及其他语言覆盖，您需要使用 NSObject 的 isEqual 函数

# ruby-on-rails - 获取一个字段中的值并在另一个字段中分配相同的值

> ID：13301982
> 
> 赞同：0
> 
> 时间：2012-11-09T04:09:08.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, erb

我希望用户名也是电子邮件，但我不想从用户那里获得两次值，所以我将其保留为隐藏字段，我尝试如下所示，但它没有获取值

```
 <div><%= f.label :email %><br />
  <%= f.text_field :email %></div>

  <div><%= f.hidden_field :username :value => :email%></div> 
```

那么如何获取电子邮件的值并将相同的值也放入用户名字段中。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:27:52.283

在使用它们之前在控制器中的东西`params[:user][:username] = params[:user][:email]`会起作用......你可能宁愿在模型中放置这样的东西：

```
before_validation(:on => :create) do
  self.username = self.email
end 
```

或（也在模型中）：

```
def username
  email
end 
```

但您可能更愿意问自己，为什么有两个对完全相同的事物的引用？看起来事情过于复杂了，为什么不完全丢失用户名呢？

# java - 为什么 customtag 中的 pagecontext 会导致 Null 异常

> ID：13301985
> 
> 赞同：0
> 
> 时间：2012-11-09T04:09:31.440
> 
> 标签：java, jsp, jsp-tags, custom-tags

我尝试编写有关自定义标签的演示代码，但是这个问题..我讨厌它，我可以自己解决它。

这是我的 .TLD 文件：

```
<tag>
    <name>custom</name>
    <tagclass>MyTag.CustomerTag</tagclass>
    <bodycontent>empty</bodycontent>
</tag> 
```

这是我的班级 CustomerTag：

```
public class CustomerTag extends TagSupport {

    private PageContext _pageContext;

    @Override
    public int doStartTag() throws JspException {
        try {
            _pageContext.getOut().println("kakaka"); <-- **here cause exception**
        } catch (IOException ex) {
            JOptionPane.showMessageDialog(null, ex.getMessage());
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, ex.getMessage());
        }
        return SKIP_BODY;
    }

    @Override
    public int doEndTag() throws JspException {
        return SKIP_PAGE;
    }
} 
```

这是我的 JSP 文件：

```
<%@taglib uri="/WEB-INF/Marko.tld"  prefix="myTag" %>
<myTag:custom /> 
```

请帮助我，谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:50:40.660

In your code you are defining a separate `_pageContext` field that you never initialize; however, by extending `TagSupport` you should have access to a field `pageContext` that JSP initializes for you automatically.

Try removing the variable declaration and calling `pageContext.getOut().println("kakaka");` instead.

# python - predict_proba 或 decision_function 作为估计器“置信度”

> ID：13301986
> 
> 赞同：12
> 
> 时间：2012-11-09T04:09:33.430
> 
> 标签：python, machine-learning, scikit-learn

我使用 LogisticRegression 作为模型来训练 scikit-learn 中的估计器。我使用的功能（大部分）是分类的；标签也是如此。因此，我分别使用 DictVectorizer 和 LabelEncoder 对值进行正确编码。

培训部分相当简单，但我在测试部分遇到问题。简单的做法是使用训练好的模型的“预测”方法，得到预测的标签。但是，对于我之后需要做的处理，我需要每个特定实例的每个可能标签（类）的概率。我决定使用“predict_proba”方法。但是，对于同一个测试实例，我得到不同的结果，无论是在实例单独使用还是与其他实例一起使用时使用此方法。

接下来是重现问题的代码。

```
from sklearn.linear_model import LogisticRegression
from sklearn.feature_extraction import DictVectorizer
from sklearn.preprocessing import LabelEncoder

X_real = [{'head': u'n\xe3o', 'dep_rel': u'ADVL'}, 
          {'head': u'v\xe3o', 'dep_rel': u'ACC'}, 
          {'head': u'empresa', 'dep_rel': u'SUBJ'}, 
          {'head': u'era', 'dep_rel': u'ACC'}, 
          {'head': u't\xeam', 'dep_rel': u'ACC'}, 
          {'head': u'import\xe2ncia', 'dep_rel': u'PIV'}, 
          {'head': u'balan\xe7o', 'dep_rel': u'SUBJ'}, 
          {'head': u'ocupam', 'dep_rel': u'ACC'}, 
          {'head': u'acesso', 'dep_rel': u'PRED'}, 
          {'head': u'elas', 'dep_rel': u'SUBJ'}, 
          {'head': u'assinaram', 'dep_rel': u'ACC'}, 
          {'head': u'agredido', 'dep_rel': u'SUBJ'}, 
          {'head': u'pol\xedcia', 'dep_rel': u'ADVL'}, 
          {'head': u'se', 'dep_rel': u'ACC'}] 
y_real = [u'AM-NEG', u'A1', u'A0', u'A1', u'A1', u'A1', u'A0', u'A1', u'AM-ADV', u'A0', u'A1', u'A0', u'A2', u'A1']

feat_encoder =  DictVectorizer()
feat_encoder.fit(X_real)

label_encoder = LabelEncoder()
label_encoder.fit(y_real)

model = LogisticRegression()
model.fit(feat_encoder.transform(X_real), label_encoder.transform(y_real))

print "Test 1..."
X_test1 = [{'head': u'governo', 'dep_rel': u'SUBJ'}]
X_test1_encoded = feat_encoder.transform(X_test1)
print "Features Encoded"
print X_test1_encoded
print "Shape"
print X_test1_encoded.shape
print "decision_function:"
print model.decision_function(X_test1_encoded)
print "predict_proba:"
print model.predict_proba(X_test1_encoded)

print "Test 2..."
X_test2 = [{'head': u'governo', 'dep_rel': u'SUBJ'}, 
           {'head': u'atrav\xe9s', 'dep_rel': u'ADVL'}, 
           {'head': u'configuram', 'dep_rel': u'ACC'}]

X_test2_encoded = feat_encoder.transform(X_test2)
print "Features Encoded"
print X_test2_encoded
print "Shape"
print X_test2_encoded.shape
print "decision_function:"
print model.decision_function(X_test2_encoded)
print "predict_proba:"
print model.predict_proba(X_test2_encoded)

print "Test 3..."
X_test3 = [{'head': u'governo', 'dep_rel': u'SUBJ'}, 
           {'head': u'atrav\xe9s', 'dep_rel': u'ADVL'}, 
           {'head': u'configuram', 'dep_rel': u'ACC'},
           {'head': u'configuram', 'dep_rel': u'ACC'},]

X_test3_encoded = feat_encoder.transform(X_test3)
print "Features Encoded"
print X_test3_encoded
print "Shape"
print X_test3_encoded.shape
print "decision_function:"
print model.decision_function(X_test3_encoded)
print "predict_proba:"
print model.predict_proba(X_test3_encoded) 
```

以下是获得的输出：

```
Test 1...
Features Encoded
  (0, 4)    1.0
Shape
(1, 19)
decision_function:
[[ 0.55372615 -1.02949707 -1.75474347 -1.73324726 -1.75474347]]
predict_proba:
[[ 1\.  1\.  1\.  1\.  1.]]
Test 2...
Features Encoded
  (0, 4)    1.0
  (1, 1)    1.0
  (2, 0)    1.0
Shape
(3, 19)
decision_function:
[[ 0.55372615 -1.02949707 -1.75474347 -1.73324726 -1.75474347]
 [-1.07370197 -0.69103629 -0.89306092 -1.51402163 -0.89306092]
 [-1.55921001  1.11775556 -1.92080112 -1.90133404 -1.92080112]]
predict_proba:
[[ 0.59710757  0.19486904  0.26065002  0.32612646  0.26065002]
 [ 0.23950111  0.24715931  0.51348452  0.3916478   0.51348452]
 [ 0.16339132  0.55797165  0.22586546  0.28222574  0.22586546]]
Test 3...
Features Encoded
  (0, 4)    1.0
  (1, 1)    1.0
  (2, 0)    1.0
  (3, 0)    1.0
Shape
(4, 19)
decision_function:
[[ 0.55372615 -1.02949707 -1.75474347 -1.73324726 -1.75474347]
 [-1.07370197 -0.69103629 -0.89306092 -1.51402163 -0.89306092]
 [-1.55921001  1.11775556 -1.92080112 -1.90133404 -1.92080112]
 [-1.55921001  1.11775556 -1.92080112 -1.90133404 -1.92080112]]
predict_proba:
[[ 0.5132474   0.12507868  0.21262531  0.25434403  0.21262531]
 [ 0.20586462  0.15864173  0.4188751   0.30544372  0.4188751 ]
 [ 0.14044399  0.3581398   0.1842498   0.22010613  0.1842498 ]
 [ 0.14044399  0.3581398   0.1842498   0.22010613  0.1842498 ]] 
```

可以看出，当同一个实例与 X_test2 中的其他实例一起使用时，“X_test1”中的实例使用“predict_proba”获得的值会发生变化。此外，“X_test3”只是复制了“X_test2”并添加了一个实例（等于“X_test2”中的最后一个实例），但所有实例的概率值都发生了变化。为什么会这样？另外，我觉得很奇怪“X_test1”的所有概率都是 1，所有的总和不应该是 1 吗？

现在，如果我不使用“predict_proba”，而是使用“decision_function”，我将获得所需值的一致性。问题是我得到负系数，甚至一些正系数大于 1。

那么，我应该使用什么？为什么“predict_proba”的值会这样改变？我没有正确理解这些值的含义吗？

提前感谢您能给我的任何帮助。

**更新**

正如建议的那样，我更改了代码，以便同时打印编码的“X_test1”、“X_test2”和“X_test3”，以及它们的形状。这似乎不是问题，因为编码对于测试集之间的相同实例是一致的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T16:49:57.950

如问题评论所示，该错误是由我正在使用的 scikit-learn 版本的实现中的错误引起的。问题已解决更新到最新的稳定版本 0.12.1

# php - WordPress - 无法让自定义字段显示在主页上

> ID：13301987
> 
> 赞同：0
> 
> 时间：2012-11-09T04:09:56.597
> 
> 标签：php, wordpress, function, custom-fields

我正在尝试将自定义字段“市场”作为链接添加到 a href 中，这在页面上效果很好，但在我的主页上不起作用。

两者的 PHP 是相同的。

对于主页，php 在`functions.php`文件中，对于按系列的主题页面，PHP 在页面的 .php 文件中。

该页面可以正常工作，因此PHP似乎没有任何问题，出于某种原因，它似乎更像是它没有以应有的方式定位帖子ID。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:16:58.460

每个帖子/页面都会保存自定义字段，这可能是它没有加载到您的`index.php`页面上的原因。您需要替换`$post->ID`为要为其显示自定义字段的帖子/页面的 ID - 该`$post`对象在`page.php`和`single.php`模板上可用，这就是它在那里工作的原因。在索引页面上，它只能在循环内使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:13:15.283

查找有关如何重置主 WP 循环查询的 WP 文档：

[http://codex.wordpress.org/Function_Reference/wp_reset_query](http://codex.wordpress.org/Function_Reference/wp_reset_query)

如果您在functions.php 与页面模板中得到不同的结果，则很有可能是因为您的页面模板已经开始了一个查询循环并且它以某种方式发生冲突。这只是即兴表演，无需查看代码。我将按照您对工作模型和非工作模型之间差异的描述进行说明。

# c++ - 这段代码是如何工作的，它叫什么

> ID：13301993
> 
> 赞同：0
> 
> 时间：2012-11-09T04:11:13.583
> 
> 标签：c++, c, i2c

有问题的代码是“？某事：something_else”。通常在下面的代码中，您可以输入 I2C_SLAVE 或 I2C_SLAVE_FORCE。但是这段代码做了别的事情。它是如何工作的，它究竟是做什么的？

```
if(ioctl(state.i2c_bus_address, force ? I2C_SLAVE_FORCE : I2C_SLAVE, add) < 0)
{
    logger.fail("i2c select fail %d",add);
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T04:16:41.920

它被称为三元条件运算符。这就像一个 if，但内联。这是格式

```
boolean ? result evaluated to if true : result evaluated to if false 
```

这是一个例子：

```
y = x>2 ? 12 : 5; 
```

如果 x 大于 2，则 y 将为 12，否则 y 将为 5。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T04:16:51.050

它的名字是“条件运算符”。

```
condition ? expression1 : expression2 
```

如果**条件**计算为真，则计算**表达式1**，否则计算**表达式2**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:17:07.313

不确定这是否是您所追求的，但`statement ? if_true : if_false`控制流称为三元运算符。

被`statement`评估。如果为真，`:`则计算 之后的表达式。否则，计算 之后的表达式`:`。

# r - 如何矢量化三重嵌套循环？

> ID：13301998
> 
> 赞同：7
> 
> 时间：2012-11-09T04:11:55.703
> 
> 标签：r, nested-loops

我已经搜索过类似的问题，但我对我应该做什么有一个模糊的想法：将所有内容矢量化或使用`apply()`家庭。但我是 R 编程的初学者，上述两种方法都非常令人困惑。

这是我的源代码：

```
x<-rlnorm(100,0,1.6)
j=0
k=0
i=0
h=0
lambda<-rep(0,200)
sum1<-rep(0,200)
constjk=0
wj=0
wk=0
for (h in 1:200)
{
   lambda[h]=2+h/12.5
   N=ceiling(lambda[h]*max(x))
   for (j in 0:N)
   {
      wj=(sum(x<=(j+1)/lambda[h])-sum(x<=j/lambda[h]))/100
      for (k in 0:N)
      {
         constjk=dbinom(k, j + k, 0.5)
         wk=(sum(x<=(k+1)/lambda[h])-sum(x<=k/lambda[h]))/100
         sum1[h]=sum1[h]+(lambda[h]/2)*constjk*wk*wj
      }
   }
} 
```

让我解释一下。我想收集 200 个 sum1 值（这是第一个循环），对于每个 sum1 值，它是 的总和`(lambda[h]/2)*constjk*wk*wj`，因此是其他两个循环的总和。最繁琐的是N随h变化，所以我不知道如何向量化j-loop和k-loop。但当然我可以用`lambda<-seq()`and向量化 h 循环`N<-ceiling()`，这是我能做的最好的。有没有办法进一步简化代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T12:39:47.270

您的代码可以通过 3 个嵌套`sapply`调用完美验证。对于未经训练的人来说可能有点难以阅读，但它的本质是，我们不是一次添加一个值，而是一次`sum1[h]`计算最内层循环产生的所有项并将它们相加。

尽管此矢量化解决方案比您的三重`for`循环更快，但改进并不显着。如果您打算多次使用它，我建议您在 C 或 Fortran 中实现它（使用常规`for`循环），这样可以大大提高*速度*。请注意，尽管它具有很高的时间复杂度，并且会随着 值的增加而严重扩展`lambda`，最终达到一个点，即无论实现如何，都无法在合理的时间内进行计算。

```
lambda <- 2 + 1:200/12.5
sum1 <- sapply(lambda, function(l){
    N <- ceiling(l*max(x))
    sum(sapply(0:N, function(j){
        wj <- (sum(x <= (j+1)/l) - sum(x <= j/l))/100
        sum(sapply(0:N, function(k){
            constjk <- dbinom(k, j + k, 0.5)
            wk <- (sum(x <= (k+1)/l) - sum(x <= k/l))/100
            l/2*constjk*wk*wj
        }))
    }))
}) 
```

顺便说一句，您不需要预定义变量，如`h`, `j`,和. 特别是因为不是在矢量化时，因为在馈入的函数中对它们的赋值将创建具有相同名称的覆盖局部变量（*即*忽略您预先定义的变量）。`k``wj``wk``sapply`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:13:21.890

让我们将您的模拟包装在一个函数中并对其计时：

```
sim1 <- function(num=20){
  set.seed(42)
  x<-rlnorm(100,0,1.6)
  j=0
  k=0
  i=0
  h=0
  lambda<-rep(0,num)
  sum1<-rep(0,num)
  constjk=0
  wj=0
  wk=0

  for (h in 1:num)
  {
    lambda[h]=2+h/12.5
    N=ceiling(lambda[h]*max(x))
    for (j in 0:N)
    {
      wj=(sum(x<=(j+1)/lambda[h])-sum(x<=j/lambda[h]))/100
      for (k in 0:N)
      {
        set.seed(42)
        constjk=dbinom(k, j + k, 0.5)
        wk=(sum(x<=(k+1)/lambda[h])-sum(x<=k/lambda[h]))/100
        sum1[h]=sum1[h]+(lambda[h]/2)*constjk*wk*wj
      }
    }
  }

  sum1
}

system.time(res1 <- sim1())
#   user  system elapsed 
#    5.4     0.0     5.4 
```

现在让我们让它更快：

```
sim2 <- function(num=20){
  set.seed(42) #to make it reproducible
  x <- rlnorm(100,0,1.6)

  h <- 1:num
  sum1 <- numeric(num)
  lambda <- 2+1:num/12.5
  N <- ceiling(lambda*max(x))

  #functions for wj and wk
  wjfun <- function(x,j,lambda,h){
    (sum(x<=(j+1)/lambda[h])-sum(x<=j/lambda[h]))/100
  }
  wkfun <- function(x,k,lambda,h){
    (sum(x<=(k+1)/lambda[h])-sum(x<=k/lambda[h]))/100
  }

  #function to calculate values of sum1
  fun1 <- function(N,h,x,lambda) {
    sum1 <- 0
    set.seed(42) #to make it reproducible
    #calculate constants using outer
    const <- outer(0:N[h],0:N[h],FUN=function(j,k) dbinom(k, j + k, 0.5))
    wk <- numeric(N[h]+1)
    #loop only once to calculate wk
    for (k in 0:N[h]){
      wk[k+1] <- (sum(x<=(k+1)/lambda[h])-sum(x<=k/lambda[h]))/100 
    }

    for (j in 0:N[h])
    {
      wj <- (sum(x<=(j+1)/lambda[h])-sum(x<=j/lambda[h]))/100
      for (k in 0:N[h])
      {
        sum1 <- sum1+(lambda[h]/2)*const[j+1,k+1]*wk[k+1]*wj
      }
    }
    sum1
  }

  for (h in 1:num)
  {
    sum1[h] <- fun1(N,h,x,lambda)
  }  
  sum1
}

system.time(res2 <- sim2())
#user  system elapsed 
#1.25    0.00    1.25 

all.equal(res1,res2)
#[1] TRUE 
```

@Backlin 的代码（有 20 次交互）的时间进行比较：

```
 user  system elapsed 
   3.30    0.00    3.29 
```

如果这仍然太慢并且您不能或不想使用另一种语言，那么还有可能并行化。据我所知，外循环是令人尴尬的平行。有一些很好的和简单的并行化包。*

# visual-studio-2008 - 对象引用未设置为 Visual Studio 2008 中的对象实例

> ID：13301999
> 
> 赞同：2
> 
> 时间：2012-11-09T04:12:05.563
> 
> 标签：visual-studio-2008, infragistics

尝试显示表单设计器时出错。

这是错误图像： ![Visual Studio 2008 中的错误图像](../Images/f4dd92abca23e02b7394563fac2a33b2.png)

**文字图片：**

```
Instances of this error (1)  

1\.   Hide Call Stack 

at Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionHandlingConfigurationView.GetExceptionPolicyData(String policyName)
at Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyCustomFactory.CreateObject(IBuilderContext context, String name, IConfigurationSource configurationSource, ConfigurationReflectionCache reflectionCache)
at Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ObjectBuilder.ConfiguredObjectStrategy.PreBuildUp(IBuilderContext context)
at Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp(IBuilderContext context)  

Help with this error  

MSDN Help   

Forum posts about this error  

Search the MSDN Forums for posts related to this error 
```

**这是源代码：** ![源代码图像](../Images/62ade88050994495341211d4ae998cba.png)

我的编码有什么问题？我使用 Visual Studio 2008 SP1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T10:55:20.843

您正在显示一个或多个需要数据才能正常运行的控件，并且您尚未为设计器设置该数据。

你有两个选择：

1.  如果它是您的控件，您可以添加一个检查以查看它是否处于设计模式。使用这些测试包装对不会在设计模式下设置的数据库等的任何调用：

    WinForms 的[Component.DesignMode](http://msdn.microsoft.com/en-us/library/c58hb4bw%28v=VS.100%29.aspx)

    WPF 的[GetIsInDesignMode](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.getisindesignmode.aspx)

    WinRT 的[DesignModeEnabled](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.designmode.designmodeenabled.aspx)

    Silverlight 的[IsInDesignTool](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.isindesigntool%28v=VS.95%29.aspx)

2.  设置一些设计数据。具体如何操作将取决于控件。