# StackOverflow 问答 15219000-15219999

# oauth-2.0 - oAuth2.0：为什么需要“授权码”，然后才需要令牌？

> ID：15219006
> 
> 赞同：45
> 
> 时间：2013-03-05T08:26:41.810
> 
> 标签：oauth-2.0

使用 oAuth 2.0，在“authorization-code”授权授予中，我首先调用“/authorize”，获取代码，然后在调用“/token”中使用此代码来获取访问令牌。

我的问题：为什么这是流程？我想这是出于安全原因，但我无法弄清楚。为什么是这样实现的，而不是在第一次调用（“/authorize”）后立即获得访问令牌？

为什么我们需要这个代码？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-17T00:05:48.360

是否也可以通过此中间步骤阻止客户端查看访问令牌？

来自 O'Reilly 的书：

> **授权代码**此授权类型最适合服务器端 Web 应用程序。在资源所有者授权访问他们的数据后，他们将被重定向回 Web 应用程序，并使用授权代码作为 URL 中的查询参数。客户端应用程序必须将此代码交换为访问令牌。这种交换是服务器到服务器完成的，并且需要 client_id 和 client_secret，甚至阻止资源所有者获取访问令牌。此授权类型还允许使用刷新令牌对 API 进行长期访问。
> 
> **基于浏览器的客户端应用程序**的隐式授权 隐式授权是所有流程中最简单的，并且针对在浏览器中运行的客户端 Web 应用程序进行了优化。资源所有者授予对应用程序的访问权限，然后立即生成新的访问令牌并使用 URL 中的 #hash 片段将其传递回应用程序。应用程序可以立即从哈希片段中提取访问令牌（使用 JavaScript）并发出 API 请求。这种授权类型不需要中间的“授权代码”，但它也不会为长期访问提供可用的刷新令牌。

更新 - 确实是：

> 什么时候应该使用授权码流？授权码流程应在以下情况下使用
> 
> *   需要长期访问。
>     
>     
> *   OAuth 客户端是一个 Web 应用程序服务器。
>     
>     
> *   **API 调用的问责制非常重要，并且 OAuth 令牌不应该泄露给用户可以访问它的浏览器。**

更多的：

> 也许最重要的是——因为访问令牌永远不会通过浏览器发送——访问令牌通过浏览器历史记录、引用标头、JavaScript 等泄露给恶意代码的风险较小。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-06T20:45:12.603

*授权码*流适用于涉及 3 方的场景。

这些政党是：

*   **客户**

    用户使用他的网络浏览器。他想使用你的应用程序。

*   **提供者**

    有关于用户的信息。如果有人想访问这些数据，用户必须先同意。

*   **您的（网络）应用程序**

    想要从提供商处访问有关用户的信息。

现在**您的应用程序**对**用户**说（将他的浏览器重定向到`/authorize`端点）：

> 嘿用户，这是我的*客户 ID*。请与提供者交谈，并允许他直接与我交谈。

因此，**用户与****提供者**对话（请求*授权码*并通过在浏览器中打开您的回调 URL 将其返回给您的应用程序）：

> 嘿供应商，我想使用这个应用程序，所以他们需要访问我的数据。给我一些代码，我将此代码提供给应用程序。

现在**您的应用程序**具有**客户端**和**提供者**已知的*授权代码*。通过将其交给**提供商**，您的应用现在可以证明**客户端**允许它访问他的数据。**提供商**现在向您的（网络）应用程序颁发访问*令牌*，因此您的（网络）应用程序不必每次都重做这些步骤（至少在一段时间内）。

 *******如果您的应用程序直接在客户端运行（例如 iPhone/Android 应用程序或 Javascript 客户端）的其他应用程序类型，则中间步骤是多余的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-23T14:24:02.173

客户端的数据通常被认为是不安全的。在初始步骤本身授予令牌的隐式调用的情况下，任何拥有 access_token 的人都可以请求数据，API 不知道谁在调用该 API。

但是，对于应用程序想要标识自己的 Web 服务器应用程序，带有 client_secret 的 client_id 与 authentication_code 一起发送以获取 access_token，将来可以独立发送。

假设，如果 access_token 最初是自己授予的，那么 client_id 和 access_token 仍然会被认为是公开的，所以应用程序必须每次都发送 client_secret 和 access_token 以确保请求确实来自它。

而在当前场景下，获取access_token后，可以独立进行进一步的请求，而不需要client_secret。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-13T22:02:02.977

我认为是这样的；

**当我们使用授权码时，我们有2个验证部分；**

*   1个；验证用户的所有权，因为他登录
*   2；我们知道客户确实是他所说的那个人，因为客户正在发送他的 client_secret。

因此，如果我们在用户进行身份验证时返回访问令牌而不是授权码，我们知道是用户请求它，但我们不知道它将用于注册的客户端。例如，您的网络应用程序。

**当我们使用“隐式授权”时；**（或返回访问令牌而不是授权码）

*   1个；我们知道接收访问令牌的是用户，但不需要获取授权码，因为基于“用户代理”的应用程序是不可检查的。如果您考虑一下，它是可以检查的，但它对每个人都可用。client_secret 在基于“用户代理”的应用程序的源代码中是公开可见的，因此每个人都可以“查看源代码”并复制 client_secret 并使用此方法来验证客户端的所有权。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-18T12:51:27.683

重要的一点是

> 也许最重要的是——因为访问令牌永远不会通过浏览器发送——访问令牌通过浏览器历史记录、引用标头、JavaScript 等泄露给恶意代码的风险较小。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-25T05:45:39.017

@ksht 的回答基本上是正确的。对于那些寻找简单、简短答案的人来说，它是这样的：

因为客户端应用程序（浏览器或本机应用程序）可以拦截传递的令牌。oauth*隐式*流程*确实*允许这样做，但仅在非常特定的情况下。在所有其他情况下，浏览器可能会泄漏信息（操作系统中的黑客攻击、浏览器错误、插件），或者对于本机应用程序，您可以拦截将重定向 url 映射到应用程序的自定义 url 方案。因此，解决方法是发回代码而不是令牌（通过 tls）并使用 PKCE 确保代码可以安全地交换为令牌。*******

# php - 临时使用 PHP 将文件夹权限更改为 777

> ID：15219007
> 
> 赞同：6
> 
> 时间：2013-03-05T08:26:51.150
> 
> 标签：php, folder-permissions

我的服务器上有一个拥有 755 权限的 Video 文件夹。问题是：当有人上传视频文件时，由于权限错误，无法上传到该文件夹​​。

如果我将权限更改为 777，则可以上传视频。但出于安全原因，我不想允许文件夹权限为 777。

PHP中有什么方法可以在上传视频时临时将权限更改为777？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-05T08:29:27.893

PHP 提供了一个函数，[`chmod()`](http://php.net/manual/en/function.chmod.php)用于任务。

> 尝试将指定文件的模式更改为 mode 中给定的模式。

你可以把它放在一个`if`语句中，如果它返回false，你可以跳过上传文件部分。

* * *

用法会像

```
if( chmod($path, 0777) ) {
    // more code
    chmod($path, 0755);
}
else
    echo "Couldn't do it."; 
```

如[chmod 功能手册](http://php.net/manual/en/function.chmod.php)中所述，`$mode`必须为八进制格式 - 前导零，即`chmod($path, 0777)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T08:29:50.700

有一种方法（PHP 提供`chmod`功能），但由于 PHP 不是文件夹的所有者，您将无法更改权限。而且我认为您正在解决错误的问题。将 webserver 和 PHP 添加到同一组中，并将 775 分配给文件夹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-06T06:44:01.693

您必须为上传初始化配置，如下所示：

```
$config['remove_spaces'] = FALSE;
$config['upload_path'] = $path;
$this->upload->initialize($config);
$this->load->library('upload', $config); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T08:30:42.573

你可以使用`chmod()`函数。

欲了解更多信息，请尝试[这里](http://php.net/manual/en/function.chmod.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-21T16:09:58.080

**警告**：您无法撤消由以下脚本更改的文件权限。谨慎行事。

**重要提示**：仅当您记得在使用后立即将其删除时，才应使用此代码。如上所述，它的使用可能会使您的网站处于不安全状态。

```
 //replace dirname(__FILE__) with desired folder.
file_fix_directory(dirname(__FILE__));

function file_fix_directory($dir, $nomask = array('.', '..')) {
  if (is_dir($dir)) {
     // Try to make each directory world writable.
     if (@chmod($dir, 0777)) {
       echo "

Made writable: " . $dir . "

";
     }
  }
  if (is_dir($dir) && $handle = opendir($dir)) {
    while (false !== ($file = readdir($handle))) {
      if (!in_array($file, $nomask) && $file[0] != '.') {
        if (is_dir("$dir/$file")) {
          // Recurse into subdirectories
          file_fix_directory("$dir/$file", $nomask);
        }
        else {
          $filename = "$dir/$file";
            // Try to make each file world writable.
            if (@chmod($filename, 0666)) {
              echo "

Made writable: " . $filename . "

";
            }
        }
      }
    }

    closedir($handle);
  }

} 
```

或者您可以为此使用终端

```
chmod -R 755 public_html/test 
```

# c# - 使用 TweetSharp 加载用户配置文件列表期间的 StackOverflow 异常

> ID：15219009
> 
> 赞同：3
> 
> 时间：2013-03-05T08:26:58.860
> 
> 标签：c#, twitter, tweetsharp

我正在使用最新版本的 TweetSharp 来加载用户的个人资料。首先，我使用`ListFollowerIdsFor`方法加载用户的所有关注者。之后，我将所有 id 划分为最多 100 个 id 的列表。

```

var ids = newUsersIds.Skip(i * 100).Take(100).Di​​stinct().ToList();
var users = service.ListUserProfilesFor(new ListUserProfilesForOptions { UserId = ids });
```

有时我会`StackoverflowException`搭上这条线。调用堆栈中的最后两行：

```
The thread '<No Name>' (0x17a0) has exited with code 0 (0x0).

A first chance exception of type 'System.Net.WebException' occurred in System.dll 
```

递归

```
 TweetSharp.dll!TweetSharp.JsonSerializer.DeserializeContent(string content, System.Type type) Line 168 + 0x1b bytes C#
    TweetSharp.dll!TweetSharp.JsonSerializer.DeserializeSingle(string content, System.Type type) Line 223 + 0x11 bytes  C#
    TweetSharp.dll!TweetSharp.JsonSerializer.DeserializeJson(string content, System.Type type) Line 41 + 0xe bytes  C# 
```

我该如何预防？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:39:08.497

问题在于处理 HTTP 500 错误“Twitter over capacity”。Tweetsharp 尝试在这种情况下序列化 html 页面。

# php - PHP：将带有附件的邮件从数据库发送到电子邮件帐户

> ID：15219010
> 
> 赞同：-1
> 
> 时间：2013-03-05T08:27:00.943
> 
> 标签：php, database, email, attachment

我一直在尝试获取一个电子邮件表单，它将带有附件的电子邮件发送到存储在数据库中的电子邮件地址。我已经有一个脚本可以将电子邮件发送到我数据库中的电子邮件地址，并且我有一个脚本可以将 1 个附件发送到 1 封电子邮件，并且它们都可以正常工作。然而，问题是我无法将它们组合成 1 个脚本。我曾多次尝试将 2 合并为 1，但我似乎可以弄清楚。由于我还是一名学生，我仍在学习如何做这些事情。

我将在下面发布我的代码，向您展示我到目前为止所拥有的。如果有人有任何提示或可以告诉我如何做到这一点，那将非常有帮助。

配置文件

```
<?php
$server="localhost";
$database="NAW";
$db_user="root";
$db_pass="something";
$fromadmin="test@test.com";
$table="Email";
$table_email="Email";
?> 
```

向数据库中的电子邮件地址发送邮件：

```
<?php
include "header.php"; 
include "config.php"; 

if( $_POST || $_FILES )
{
$seconds=$_POST['seconds'];
$subject=$_POST['subj'];
$messagesend=$_POST['message'];
    mysql_connect($server, $db_user, $db_pass)
  or die ("Database CONNECT Error"); 
    $resultquery = mysql_db_query($database, "select * from $table");

while ($query = mysql_fetch_array($resultquery)) 
{ 
    $emailinfo=$myemail;    
    $mailto=$query[$table_email];
    mail($mailto, $subject, $messagesend , "From:".$fromadmin."\nReply-To:".$fromadmin."\n"); 
    echo 'Mail sent to '.$mailto.'<br>';
    sleep($seconds);
}
echo 'Mails sent. Go <a href="massmail.php">Back</a>';
}
  else 
{
?>
<table height="250" cellpadding="1">
<tr><td valign="top">
<h2>Mail Sender</h2><br><form action="massmail.php" method="POST">

          <div align="center"> 
          <table cellpadding="0" border="0" align="left">
          <tr>
          <td>
          Subject:
          </td>
          <td>
          <input type="text" align="left" name="subj" size="66">
          </td>

          </tr>
          <tr><td align="left" valign="top">
            Message Text:</td><td align="left"> <textarea name="message" rows="15" cols="60"                ></textarea></td></tr>
            <tr>
            <tr><td colspan="2" align="left">
            Seconds between messages:<input type="text" size="10" name="seconds" value="0.1"> (seconds)
                </td></tr>
            <tr><td colspan="2">    
            <input type="submit" value="Send mass mails" name="submit" >
            </Td>
            </tr>

            </table>
          </div>
</td>
</tr>
</table>

<?php
}
include "footer.php";    
?> 
```

发送带有附件的邮件：

```
<?php
if( $_POST || $_FILES )
{
        // email fields: to, from, subject, and so on
        // Here 
        $from = "test@test.com";
        $to = "test2@test.com";
        $subject = "Mail with Attachment";
        $message = "This is the message body and to it I will append the attachments.";
        $headers = "From: $from";

        // boundary
        $semi_rand = md5(time());
        $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

        // headers for attachment
        $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

        // multipart boundary
        $message = "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n"."Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";
        fixFilesArray($_FILES['attachment']);
        foreach ($_FILES['attachment'] as $position => $file) 
        {
                // should output array with indices name, type, tmp_name, error, size
                $message .= "--{$mime_boundary}\n";
                $fp     = @fopen($file['tmp_name'],"rb");
                $data   = @fread($fp,filesize($file['tmp_name']));
                @fclose($fp);
            $data = chunk_split(base64_encode($data));
            $message .= "Content-Type: application/octet-stream; name=\"".$file['name']."\"\n"."Content-Description: ".$file['name']."\n" ."Content-Disposition: attachment;\n" . " filename=\"".$file['name']."\";size=".$file['size'].";\n"."Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
        }
        $message .= "--{$mime_boundary}--";
        $returnpath = "-f" . $from;
        $ok = @mail($to, $subject, $message, $headers, $returnpath);
        if($ok){ return 1; } else { return 0; }
}
//This function will correct file array from $_FILES[[file][position]] to $_FILES[[position][file]] .. Very important

function fixFilesArray(&$files)
{
        $names = array( 'name' => 1, 'type' => 1, 'tmp_name' => 1, 'error' => 1, 'size' => 1);

        foreach ($files as $key => $part) {
                // only deal with valid keys and multiple files
                $key = (string) $key;
                if (isset($names[$key]) && is_array($part)) {
                        foreach ($part as $position => $value) {
                                $files[$position][$key] = $value;
                        }
                        // remove old key reference
                        unset($files[$key]);
                }
        }
}
?>
<html>
    <body>
        <form method="POST" action="bijlagetest.php" enctype="multipart/form-data">
            <input type="file" name="attachment[]"><br/>
            <input type="submit">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:54:28.543

好的附加文件用户首先需要一个上传表单

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
   <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
    Choose a file to upload: <input name="uploadedfile" type="file" /><br />
   <input type="submit" value="Upload File" />
</form> 
```

在 PHP 中保存文件做这样的事情

```
$target_path = "uploads/";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
} 
```

所以现在你有了要作为附件发送的文件，将你的脚本重写为一个可以处理多个附件的函数......

像这样的东西应该工作......

```
<?php

function sendMail($to, $from, $subject, $message, $attachments){

$headers = "From: $from";

// boundary 
$semi_rand = md5(time()); 
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x"; 

// headers for attachment 
$headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\""; 

// multipart boundary 
$message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n"; 
$message .= "--{$mime_boundary}\n";

// preparing attachments
for($x=0;$x<count($attachments);$x++){
    $file = fopen($attachments[$x],"rb");
    $data = fread($file,attachmentsize($attachments[$x]));
    fclose($file);
    $data = chunk_split(base64_encode($data));
    $message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$attachments[$x]\"\n" . 
    "Content-Disposition: attachment;\n" . " filename=\"$attachments[$x]\"\n" . 
    "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
    $message .= "--{$mime_boundary}\n";
}

// send

$ok = @mail($to, $subject, $message, $headers); 
if ($ok) { 
    echo "<p>mail sent to $to!</p>"; 
} else { 
    echo "<p>mail could not be sent!</p>"; 
} 
}
?> 
```

我没有测试过这段代码，但它应该把你推向正确的方向;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T14:03:59.553

**试试这个，** **首先创建一个文件夹 temp。**

```
<?php
    error_reporting(E_ALL ^ E_DEPRECATED);
                                    //Database credentials
    $mysql_db_hostname = "localhost";
    $mysql_db_user = "root";
    $mysql_db_password = "";
    $mysql_db_database = "reassurance";
    $con = mysql_connect($mysql_db_hostname, $mysql_db_user, $mysql_db_password) or die("Could not connect database");
    mysql_select_db($mysql_db_database, $con) or die("Could not select database");
    $filename='temp/test.csv';
    //$filename='temp/'.$test.'.csv';
    $fp=fopen($filename,"w");

    $sql = mysql_query("SELECT * FROM `contactus`");

    $row=mysql_fetch_assoc($sql);

    $seperator="";

    $comma="";

    foreach($row as $name =>$value)

    {

    $seperator.=$comma.''.str_replace('','""',$name);
    $comma=",";

    }
    $seperator.="\n";
     $seperator;

    fputs($fp,$seperator);

    mysql_data_seek($sql,0);

    while($row=mysql_fetch_assoc($sql))

    {

    $seperator="";

    $comma="";
    foreach($row as $name =>$value)

    {

    $seperator.=$comma.''.str_replace('','""',$value);
    $comma=",";

    }

    $seperator.="\n";
    fputs($fp,$seperator);

    }

    fclose($fp);
    $my_file ='test.csv';
    $path = "temp/";

    $from_name = "Hara Prasad Hota";

    $from_mail = "haraprasad@lemonpeak.com";

    $mailto = "haraprasad@lemonpeak.com";

    $subject = "This is a mail with attachment.";

    $message = "Hallo,\r\n do you got attachment? I hope it is working.\r\n\r\Hara";

    $replyto="haraprasad@lemonpeak.com";
    $file = $path.$my_file;
        $file_size = filesize($file);

    $handle = fopen($file, "r");

    $content = fread($handle, $file_size);

    fclose($handle);

    $content = chunk_split(base64_encode($content));

    $uid = md5(uniqid(time()));

    $name = basename($file);

     $header = "From: ".$from_name." <".$from_mail.">\r\n";

    $header .= "Reply-To: ".$replyto."\r\n";
        $header .= "MIME-Version: 1.0\r\n";

     $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";

    $header .= "This is a multi-part message in MIME format.\r\n";

    $header .= "--".$uid."\r\n";

    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";

    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";

    $header .= $message."\r\n\r\n";
        $header .= "--".$uid."\r\n";

    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here

    $header .= "Content-Transfer-Encoding: base64\r\n";

    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
        $header .= $content."\r\n\r\n";

    $header .= "--".$uid."--";

    mail($mailto, $subject, "", $header)
    ?> 
```

# android - 缓存和临时文件/文件夹删除 android

> ID：15219011
> 
> 赞同：0
> 
> 时间：2013-03-05T08:27:06.947
> 
> 标签：android, caching

嗨朋友感谢之前的回复，我在删除缓存和临时文件/文件夹时遇到问题，我需要从一个应用程序中清理整个设备临时文件和缓存，这是我的应用程序，但在这里我只能清理我的应用程序缓存，这是我的代码

```
 private void mAppMethod(List<App> mApps) {
    // TODO Auto-generated method stub

            // File f = g
    for (int i = 0; i < mApps.size(); i++) {
          File dir = new  File("/data/data/"+mApps.get(i).getPackageName().concat("/cache"));

          Log.e("dir "+dir, "is directory "+dir.isDirectory());
            int j =    clearCacheFolder(dir, 10);
            if (dir!= null && dir.isDirectory())

                Log.e("j", "rff "+dir.delete());
            System.out.println(j+" rff "+dir.delete());

    } 
```

和我的清除缓存方法如下

```
 static int clearCacheFolder(final File dir, final int numDays) {

          int deletedFiles = 0;
          if (dir!= null && dir.isDirectory()) {
            //  System.out.println("here"+dir.delete());
              Log.e("here", "here  "+dir.isDirectory());
              try {

                  Log.e("here1", "here1"+dir.listFiles());
                  for (File child:dir.listFiles()) {
                      Log.e("here11", "here11");
                      //first delete subdirectories recursively
                      if (child.isDirectory()) {
                          Log.e("here111", "here111");
                          deletedFiles += clearCacheFolder(child, numDays);
                          Log.e("here1111", "here1111");
                      }
                      Log.e("here11111", "here11111");
                      //then delete the files and subdirectories in this dir
                      //only empty directories can be deleted, so subdirs have been done first
                      if (child.lastModified() < new Date().getTime() - numDays * DateUtils.DAY_IN_MILLIS) {
                           Log.e("here111111", "here111111");
                          if (child.delete()) {
                               Log.e("here1111111", "here1111111");
                              deletedFiles++;
                              Log.e("here11111111", "here11111111");
                          }
                      }
                  }
              }
              catch(Exception e) {
                  Log.e("TAG", String.format("Failed to clean the cache, error %s", e.getMessage()));
              }
          }
          return deletedFiles;
      } 
```

请帮助我如何清除整个设备缓存，在这里我正在获取每个应用程序缓存位置，即缓存设备中所有应用程序的目录但是当我想删除它们时它返回 false

请帮助任何帮助都是可观的

我能够清除一个应用程序的缓存，该应用程序是我正在运行此代码但不适用于其他应用程序的应用程序

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:28:02.167

尝试使用此代码

```
public void clearApplicationData() {
    File cache = getCacheDir();
    File appDir = new File(cache.getParent());
    if(appDir.exists()){
        String[] children = appDir.list();
        for(String s : children){
            if(!s.equals("lib")){
                deleteDir(new File(appDir, s));
                Log.i("TAG", "**************** File /data/data/APP_PACKAGE/" + s +" DELETED *******************");
            }
        }
    }
}

public static boolean deleteDir(File dir) {
    if (dir != null && dir.isDirectory()) {
        String[] children = dir.list();
        for (int i = 0; i < children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }

    return dir.delete();
} 
```

这将删除您的所有数据，并在应用程序中缓存文件。

# php - 使用 CssCrush 时出错（CSS 前缀脚本）

> ID：15219012
> 
> 赞同：0
> 
> 时间：2013-03-05T08:27:07.147
> 
> 标签：csscrush, php, csscrush

我收到[csscrush](/questions/tagged/csscrush "显示标记为“csscrush”的问题")的错误消息；

```
Warning: CssCrush_IO::testOutputDir: Output directory doesn't exist  
www\css\lib\CssCrush\IO.php on line 50 
```

CssCrush的`CssCrush.php`、`index.php`和对应的文件都在同一个文件夹中。

我正在使用这些行来调用 CssCrush 脚本

```
<?php 
require_once 'CssCrush.php'; 
$compiled_file = csscrush_file( 'test.css' );
?>

<link rel="stylesheet" type="text/css" href="<?php echo $compiled_file; ?>" media="all" /> 
```

有谁知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:30:55.110

您必须创建`testOutputDir`下定义的路径。

# jquery - 在jquery的不同函数中使用变量

> ID：15219014
> 
> 赞同：1
> 
> 时间：2013-03-05T08:27:15.480
> 
> 标签：jquery, function, variables, global-variables, jsonp

我有这个 jQuery 部分，我想在我的函数（响应）中使用我的第一个函数中的 var lString。我尝试了一些退货的东西，但没有一个不起作用。

```
$(".noar").live("click",function() {
var leString = $(this).attr("searchkey");
$.ajax({
    url: rootDomain + "kunden/intent24/js/pz.json?callback=jsonp"+leString,
    dataType: 'jsonp',
    jsonpCallback: "jsonp"+leString,
    error: function(xhr, status, error) {
        alert(error);
    },
    success: function(size) { 
        jsonpParty(size);
        $("#lisize").show();
        $("#size").menuFlip();
    }
});
});

function jsonpParty(response){

var i,c = '<div class="fn_menu_title pointer"><span>Choose size</span></div><ul class="fn_menu">', opt = $('<li/>');

var menu = response.size;
alert(leString);

for (i=0; i < menu.length; i++){
    c += '<li><span class="pointer search_link guddi" searchkey="xdz'+leString+' xdz'+ menu[i].measure +'" id="'+[i]+'">' + menu[i].measure + '</span></li>';
}

$('#size').html(c+'</ul>');     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:31:04.043

如果要`leString`在其他函数内使用变量，则需要将 taht 变量定义`global variable`为函数外。

```
var leString = ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:31:21.433

另一种方法：

```
$(".noar").on("click",function() {
var leString = $(this).attr("searchkey");
$.ajax({
    url: rootDomain + "kunden/intent24/js/pz.json?callback=jsonp"+leString,
    dataType: 'jsonp',
    jsonpCallback: "jsonp"+leString,
    error: function(xhr, status, error) {
        alert(error);
    },
    success: function(size) { 
        jsonpParty(size,leString);
        $("#lisize").show();
        $("#size").menuFlip();
    }
});
});

function jsonpParty(response,leString){

var i,c = '<div class="fn_menu_title pointer"><span>Choose size</span></div><ul class="fn_menu">', opt = $('<li/>');

var menu = response.size;
alert(leString);

for (i=0; i < menu.length; i++){
    c += '<li><span class="pointer search_link guddi" searchkey="xdz'+leString+' xdz'+ menu[i].measure +'" id="'+[i]+'">' + menu[i].measure + '</span></li>';
}

$('#size').html(c+'</ul>');     
} 
```

PS 不要使用`live()`，它已被弃用。`on()`改为使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:43:00.263

您需要在 live() 函数之外定义该变量。

```
var leString;
$(".noar").live("click",function() { 
leString = $(this).attr("searchkey"); ... }); 
```

jquery .live() 方法也在 jQuery 1.7 中被弃用并在 1.9 中被删除！您应该将其替换为：

```
$(document).on('click','.noar',function(){...}); 
```

# android - 在sql android中的代码中删除带有多个表的整个数据库

> ID：15219016
> 
> 赞同：2
> 
> 时间：2013-03-05T08:27:19.033
> 
> 标签：android, android-sqlite

我有一个数据库（BASE2.db），里面有 4 个表，但是，当我想删除数据库时出现错误：

编码：

```
db.execSQL("DROP DATABASE IF EXISTS BASE2.db"); 
```

日志猫：

```
(1) near "DATABASE": syntax error 
```

我试过这个，但不正确：

```
db.execSQL("DROP TABLE IF EXISTS BASE2.db"); 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:29:44.060

尝试使用以下内容：

```
context.deleteDatabase(databaseName.db); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:25:00.890

试试这个

> this.deleteDatabase("databasename.db");

where`this`指的是您的活动或任何上下文。

有关更多信息，请参阅此博客

> [http://logcatsolutions.blogspot.in/2012/07/sqlite-complete-example-create.html](http://logcatsolutions.blogspot.in/2012/07/sqlite-complete-example-create.html)

# knockout.js - 在 2 列中呈现集合

> ID：15219017
> 
> 赞同：8
> 
> 时间：2013-03-05T08:27:20.420
> 
> 标签：knockout.js

目前我有：

```
<div data-bind="foreach: list">
</div> 
```

并且需要：

```
<div data-bind="foreach: /* 1st half of the list */">
</div>
<div data-bind="foreach: /* 2nd half of the list */">
</div> 
```

避免使用 2 个单独的可观察对象或计算对象会很棒。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T08:45:21.837

您可以使用数组`slice`方法创建两个集合：

```
<div data-bind="foreach: list.slice(0, list.length / 2) ">
    <span data-bind="text: $data" />
</div>
<div data-bind="foreach: list.slice(list.length / 2)">
    <span data-bind="text: $data" />
</div> 
```

如果你有一个可观察的数组，你需要稍微修改你的绑定：

```
<div data-bind="foreach: list.slice(0,list().length / 2) ">
    <span data-bind="text: $data"/>
</div>
<div data-bind="foreach: list.slice(list().length / 2)">
    <span data-bind="text: $data"/>
</div> 
```

演示[JSFiddle](http://jsfiddle.net/794FT/3/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-19T12:33:51.447

您可以只使用 mod 2，如下所示：

```
<div data-bind="foreach: list">
    <!--ko if: $index() % 2 == 0 -->
    <div class="row">
        <div class="col-md-6">
            <span data-bind="text: $data"></span>
        </div>
        <div data-bind="with: $parent.list()[$index()+1]" class="col-md-6">
            <span data-bind="text: $data"></span>
        </div>
    </div>
    <!--/ko-->
</div> 
```

小提琴：http: [//jsfiddle.net/robgallen/1728389j/](http://jsfiddle.net/robgallen/1728389j/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T02:27:56.643

## 使用可观察数组的安全且干净的示例

```
<!-- ko with: myObservableArray -->
    <div data-bind="foreach: $data.slice(0, $data.length / 2)">
        <span data-bind="text: $data"/>
    </div>
    <div data-bind="foreach: $data.slice($data.length / 2)">
        <span data-bind="text: $data"/>
    </div>
<!-- /ko --> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T17:26:13.180

只需制作一个包含一行和两个单元格的外部表在第一个单元格内放置另一个只有偶数索引的表。在第二个单元格中绑定到奇数索引。

```
 <table style="table-layout:fixed;">
            <tr>
                <td>
                    <table style="table-layout:fixed;">
                        <tbody data-bind="foreach: someObservableArray">
                            <!--ko if: $index() % 2 == 0 -->
                            <tr>
                                <td data-bind="text: somePropertyInArrayObject"></td>                                 
                            </tr>
                            <!--/ko-->
                        </tbody>
                    </table>
                </td>
                <td>
                    <table style="table-layout:fixed;">
                        <tbody data-bind="foreach: someObservableArray">
                            <!--ko ifnot: $index() % 2 == 0 -->
                            <tr>
                                <td data-bind="text: somePropertyInArrayObject"></td>                                    
                            </tr>
                            <!--/ko-->
                        </tbody>
                    </table>
                </td>
            </tr>
        </table> 
```

# javascript - 使用 ajax 请求每 x 分钟运行一次 php 脚本

> ID：15219018
> 
> 赞同：3
> 
> 时间：2013-03-05T08:27:20.673
> 
> 标签：javascript

得到这个文件'functions.php'：

```
<?php
function test ($url){
$starttime = microtime(true);
$valid = @fsockopen($url, 80, $errno, $errstr, 30);
$stoptime = microtime(true);
echo (round(($stoptime-$starttime)*1000)).' ms.';

if (!$valid) {
   echo "Status - Failure";
} else {
   echo "Status - Success";
}
}
    test('google.com');
?> 
```

我想每 10 秒左右运行一次，有人告诉我使用 ajax 请求，但我不完全理解它是如何工作的。我尝试创建一个新文件“index.php”，然后将其写入其中：

```
<script>
var milliSeconds = 10000; 
setInterval( function() {
    //Ajax request, i dont know how to write it
    xmlhttp.open("POST","functions.php",true);
    xmlhttp.send();
}, milliSeconds);
</script> 
```

我将两个文件都放入 ft​​p 但没有任何反应，有人可以帮我写一个合适的 ajax 请求吗？

编辑：编辑错字，仍然不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:40:05.663

所以，听起来您唯一的问题是您不知道如何编写 XHR 请求。看看[使用 XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)。用你的问题评论这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:50:46.140

```
var milliSeconds = 1000;

setInterval( function() {

var xmlhttp;

if (window.XMLHttpRequest) // code for IE7+, Firefox, Chrome, Opera, Safari
{
    xmlhttp=new XMLHttpRequest();
}
else
{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); // code for IE6, IE5
}

xmlhttp.onreadystatechange=function()
{
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         console.log ( xmlhttp.responseText );
      } 
}

xmlhttp.open("POST","functions.php",true);
xmlhttp.send();

}, milliSeconds); 
```

您必须根据浏览器加载 xmlhttp 请求对象（`xmlhttp=new XMLHttpRequest();`），然后在 xmlhttp 状态更改时设置事件处理程序（`xmlhttp.onreadystatechange=function()`）。当它发生变化时，检查状态是否为 200（成功），然后对响应做任何你想做的事情。（我将它打印到控制台）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:30:23.650

```
xmlhttp.open("POST","funkction.php",true); 
```

应该：

```
xmlhttp.open("POST","functions.php",true); 
```

# java - java中的支付网关集成

> ID：15219019
> 
> 赞同：6
> 
> 时间：2013-03-05T08:27:22.590
> 
> 标签：java, payment-gateway

我想在java项目中集成一个支付网关。我想要一些关于支付网关及其类型等的知识。任何人都可以给我一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:48:48.873

检查 JAVA 的 Authorize.Net api，它有几种集成方法，您可以在 JAVA 项目中实现。

您只需要 Authorize.Net SDK，请访问[http://developer.authorize.net/downloads/](http://developer.authorize.net/downloads/)下载 SDK

示例代码请访问[http://developer.authorize.net/downloads/samplecode/](http://developer.authorize.net/downloads/samplecode/)

你也可以检查

*   贝宝
*   MoneyBookers
*   WorldPay

# apache-poi - POI 公式评估器不起作用

> ID：15219021
> 
> 赞同：0
> 
> 时间：2013-03-05T08:27:40.577
> 
> 标签：apache-poi

我使用 poi-ooxml 3.9 从存储在 db 中的 excel 模板生成发票报告。我在表格末尾有公式，可以进行总和和其他税收计算。

> ```
> cell D30 =SUM(D22:D28) 
> cell D31 =D30*0.12 
> cell D32 =D31*0.02
> cell D33 =D31*0.01
> cell D35 =SUM(D30:D33) 
> ```

在将工作表写入新文件之前，我会评估公式，但没有任何效果。下面的代码用于评估公式。每当我将值写入单元格时或仅在操作结束时，我是否需要评估公式？

```
String formulaCells[] = { "D30", "D31", "D32", "D33", "D35" };
FormulaEvaluator formulaEvaluator = workBook.getCreationHelper()
        .createFormulaEvaluator();
Sheet sheet = workBook.getSheetAt(0);
for (String cellRef : formulaCells) {
CellReference ref = new CellReference(cellRef);
Row actualRow = sheet.getRow(ref.getRow());
Cell cell = actualRow.getCell(ref.getCol());
if (cell != null) {
// here I evaluate the formula     
formulaEvaluator.evaluateFormulaCell(cell); 
```

我错过了什么？

注意：只有在我打开生成的工作表并在每个单元格中按 Enter 后，才会计算公式！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:18:21.027

您确定您的单元格被添加为数字吗？

如果没有，请尝试执行以下操作：

```
if(type.equals("String")) {
   cell.setCellValue (value.toString());
} else if (type.equals("int")) {
   cell.setCellValue(Integer.parseInt(value.toString()));
} else if (type.equals("double")) {
   cell.setCellValue(Double.parseDouble(value.toString()));
} 
```

# tridion - 安圭拉 - 无法使用次要版本填充项目

> ID：15219023
> 
> 赞同：2
> 
> 时间：2013-03-05T08:27:41.297
> 
> 标签：tridion

**如何使用次要版本填充项目？** 我正在使用下面的代码片段。

`var item = $models.getItem('tcm:222-7244-64-v1');`-**工作正常。**

`var item = $models.getItem('tcm:222-7244-64-v1.3');`-**引发错误。**

我能够使用以下查询从 DAL 获取次要版本，因为 CoreService 和 Anguilla 框架都没有提供它，但我需要使用次要版本填充项目。有人可以帮我解决吗？

```
select max(version)||'.'|| max(revision) as rev from items where item_reference_id='7244' 
```

# c# - 如何将参数传递给 SP 并将选择字段检索到转发器

> ID：15219026
> 
> 赞同：0
> 
> 时间：2013-03-05T08:27:50.610
> 
> 标签：c#, c, linq-to-sql, stored-procedures, repeater

我使用带有（linq to sql）SP的vs2010和ms sql来传递**p1 p2 p3**并将选定的数据检索到转发器问题是转发器忽略p1，p2，p3并只显示电影表中的所有数据我有3个表：（电影，导演，电影导演）

SP：

```
ALTER PROCEDURE [dbo].[SelectMovie]
    @P1 nvarchar(50),
    @P2 nvarchar(255)= null,
    @P3 nvarchar(255)= null   AS SET NOCOUNT ON 
    SET TRANSACTION ISOLATION LEVEL READ COMMITTED 
    SELECT  
        Movie.Movie_ID
        , Movie.title
        , Movie.image
        , Movie.actors
        , Movie.description
        ,Director.name 
    FROM 
        Movie 
            INNER JOIN Movie-director ON Movie.Movie_ID = Movie-director.Movie_ID 
            INNER JOIN Director ON Movie-director.Director_ID = Director.Director_ID 
    WHERE 
        (title LIKE '%' + (@p1) +'%') 
        OR 
        (actors LIKE '%' + (@p2) +'%') 
        OR 
        (cat_ID LIKE '%' + (@p3) +'%') 
```

ASPX：

```
<asp:Repeater ID="Repeater1" runat="server" >
<HeaderTemplate> </HeaderTemplate>
<ItemTemplate>
    <div style="width:100%;">
        <div class="excerpt">
            <a href="movie_details.aspx?id=<%# DataBinder.Eval(Container.DataItem, "Movie_ID")%>" class="thumb" title="An image">
                <img src="<%# DataBinder.Eval(Container.DataItem, "image")%>" alt="Post" style="opacity: 1; float:left; width:80px ; height:100px; border:3px solid #fff ; margin:5px;">
            </a> 
            <a href="movie_details.aspx?id=<%# DataBinder.Eval(Container.DataItem, "Movie_ID")%>" class="header">
                <h6>
                    <%# DataBinder.Eval(Container.DataItem, "title")%>
                    ( <%# DataBinder.Eval(Container.DataItem, "actors")%>)
                </h6>
            </a> 
            <div style="padding:5px;">
                <%# DataBinder.Eval(Container.DataItem, "description")%>
            </div>  
            <div style="padding:5px;">
                <%# DataBinder.Eval(Container.DataItem, "name")%>
            </div> 
        </div> 
    </div>
    <br /> 
    <hr />
</ItemTemplate> 
```

C＃：

```
CDTDataContext dc = new CDTDataContext(); 
protected void Page_Load(object sender, EventArgs e)
{
        if (!IsPostBack){ }
} 
protected void Button1_Click(object sender, EventArgs e) 
{
    string Cat_ID = DropDownList1.SelectedValue;
    string keyword1 = TextBox2.Text;
    string keyword2 = TextBox3.Text;
    int? cid = int.Parse(cat_id); 
    Repeater1.DataSource = dc.SelectMovie(keyword1, keyword2, cid); 
    Repeater1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:41:47.527

我认为您的`SQL`查询是错误的，因为 OR 如果您传递空字符串，您将匹配中的所有记录`Table`：

```
ALTER PROCEDURE [dbo].[SelectMovie] @P1 NVARCHAR(50)
    ,@P2 NVARCHAR(255) = NULL
    ,@P3 NVARCHAR(255) = NULL
AS
SET NOCOUNT ON
SET TRANSACTION ISOLATION LEVEL READ COMMITTED

SELECT Movie.Movie_ID
    ,Movie.title
    ,Movie.IMAGE
    ,Movie.actors
    ,Movie.description
    ,Director.NAME
FROM Movie
INNER JOIN Movie - director ON Movie.Movie_ID = Movie - director.Movie_ID
INNER JOIN Director ON Movie - director.Director_ID = Director.Director_ID
WHERE (title LIKE '%' + (@p1) + '%') --title has to be matched
    AND (
           (
                    actors LIKE '%' + (@p2) + '%' AND @p2 IS NOT NULL) --match only then when @p2 is not null
        OR (
                    cat_ID = @p3 OR @p3 IS NULL --if @p3 IS NULL then do not filter by @p3
           )
        ) 
```

# ios - 关于 iOS 堆栈跟踪符号

> ID：15219027
> 
> 赞同：1
> 
> 时间：2013-03-05T08:27:54.860
> 
> 标签：ios, stack-trace, dsym

我有一些错误报告

```
 NSLog(@"Stack trace: %@", [exception callStackSymbols]); 
```

但是我无法从我的源代码中找到这个错误。我使用这个命令来知道它在哪里崩溃，但它显示了不相关的代码部分。

> atos -arch armv7 -o nuPhoto.app/nuPhoto 0x000885f9

那么，如何确保我的 .app 和 .app.sSYM 与提交到应用商店的版本相同？是否可以在 NSLog 中显示所有信息（包括行号和源代码）而不是使用 atos。谢谢你。

```
Uncaught exception: -[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x1cd80470
 Stack trace: (
    0   CoreFoundation                      0x330132bb <redacted> + 186
    1   libobjc.A.dylib                     0x3ad3097f objc_exception_throw + 30
    2   CoreFoundation                      0x33016e07 <redacted> + 170
    3   CoreFoundation                      0x33015531 <redacted> + 392
    4   CoreFoundation                      0x32f6cf68 _CF_forwarding_prep_0 + 24
    5   nuPhoto                             0x000885f9 nuPhoto + 177657
    6   CoreFoundation                      0x32fecfdf <redacted> + 46
    7   CoreFoundation                      0x32fed06b <redacted> + 186
    8   CoreFoundation                      0x32fed06b <redacted> + 186
    9   CoreFoundation                      0x32fed06b <redacted> + 186
    10  CoreFoundation                      0x32fed06b <redacted> + 186
    11  CoreFoundation                      0x32f5e401 CFSortIndexes + 972 
```

# authentication - 在 Cookie 中散列用户密码

> ID：15219039
> 
> 赞同：0
> 
> 时间：2013-03-05T08:29:16.913
> 
> 标签：authentication, hash, salt

我正在尝试设置一个cookie，以便用户可以自动登录。

我不想在验证 cookie 时向数据库查询会话字符串（基本上，每当调用我的大多数 API 时我都需要这样做，我想让它更快）

我找到的解决方案是在cookie中设置一个哈希，并在验证时尝试解密它，如果解密成功则登录用户。

我想知道我应该使用什么散列方法？我是否只是在我的程序中使用常量盐并使用该盐对用户名进行散列，将散列后的用户名和原始用户名存储在 cookie 中，并尝试在身份验证时将用户名与解密的散列匹配？

由于我不熟悉散列函数，任何人都可以提供一些关于我应该如何在 Java 中执行的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:56:02.317

我建议您使用为每个会话生成的唯一令牌密钥。例如，如果客户端曾经从计算机登录，则此令牌将一直有效，直到密码更改为止。使 cookie 过期并不完全安全……

您还可以使用会话变量进行简单的身份验证。一旦你为一个用户设置了一个会话变量，每次这个用户发送一个带有这个会话 id 的请求；您的会话变量将仅针对此会话 ID 到达。大多数平台也可以使用 DB 为您存储这些变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:25:23.563

两种方法：

1）创建自己的身份验证框架。在这种情况下，我建议在 cookie 中放入用户名的加密值（我强烈不建议使用散列；也请不要放入用户密码值）。对于加密，请使用 AES-256 加密和 BouncyCastle：256 [位 AES/CBC/PKCS5Padding 和 Bouncy Castle](https://stackoverflow.com/questions/5641326/256bit-aes-cbc-pkcs5padding-with-bouncy-castle) 如果您的框架成功解密 cookie – 用户已通过身份验证。如果您的框架无法解密 cookie 或用户不存在 - 用户未通过身份验证。

2）请考虑使用 Spring Security 框架： [http](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html) ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html 这是一个很棒的框架，解决了很多身份验证/授权问题。“RememberMe”功能解决了您的问题：http: [//static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-remember-me](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-remember-me)

最好的祝福，

迈克尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:00:18.050

我不是来自 Java 背景，但你的哈希键不应该被暴露。

例如：-在您的情况下，用户名是关键，知道您正在使用什么机制的开发人员之一可以将其分解，因为名称是非常常见且众所周知的。

不知道最好的方法是什么，但我使用了在 UI 中不可见的 UserID(GUID)。

# c# - 年历Winform c#

> ID：15219040
> 
> 赞同：-1
> 
> 时间：2013-03-05T08:29:22.303
> 
> 标签：c#, winforms, calendar

我正在寻找一种方法来开发这个：http: [//img15.hostingpics.net/pics/193313Capture.jpg](http://img15.hostingpics.net/pics/193313Capture.jpg)

如您所见，我需要将事件（绘制矩形）添加到该日历中。尽管我进行了无数小时的研究，但我找不到任何接近我想要的东西，所以我要从头开始。

关于我如何做到这一点的任何想法？我应该使用 datagridview 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:36:16.683

实现这一点的最佳方法是使用[TableLayoutPanel 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)。特别看一下方法[SetColumnSpan](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.setcolumnspan.aspx)和[SetRowSpan](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.setrowspan.aspx)

[从这里](https://stackoverflow.com/questions/2032381/row-column-coloring-for-tablelayoutpanel-vs2008-winform)借来的绘制不同单元格的代码

```
 private void Form_Load(object sender, EventArgs e) {
    this.tableLayoutPanel1.CellPaint += new TableLayoutCellPaintEventHandler(tableLayoutPanel1_CellPaint);
 }

void tableLayoutPanel1_CellPaint(object sender, TableLayoutCellPaintEventArgs e)
{
    if (e.Row == 0 || e.Row == 2) {
        Graphics g = e.Graphics;
        Rectangle r = e.CellBounds;
        g.FillRectangle(Brushes.Blue, r);
    }
} 
```

# r - 测试数据框中的 ouliers

> ID：15219041
> 
> 赞同：1
> 
> 时间：2013-03-05T08:29:26.303
> 
> 标签：r

我是 R 新手，我尝试使用一个函数来测试大型数据框中的异常值，该数据框中有 600 多个变量，除了最后两列之外，所有变量都是数字。我尝试了包中的异常值函数`outliers`来一次测试一列，我以一个无法使用的数字向量结束。有没有更好的方法来识别数据框中的所有异常值。

```
 myout <- c()
    for (i in 1:dim(training)[2]){
     if (is.numeric(training[,i])) {
     myout <- c(myout,outlier(training[,i]))  }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:00:19.323

正如您在异常值的帮助文件中看到的那样，它会为每个变量找到一个值，该值与平均值的差异最大。我认为您想要的是为每个变量找到所有异常值数据点的索引。这可以通过以下方式完成（当然您需要先删除非数字变量）：

```
# first write a custom function that returns the index of all outliers
# I define an outlier as 3 sd's away from the mean, you can adjust that

is.outlier <- function(x) which(abs(x - mean(x)) > 3*sd(x))

# turn the df into a list, and apply the function to each variable with lapply

df.as.list <- as.list(df)   # enter the name of your data frame instead of df
lapply(df.as.list, is.outlier) 
```

它将返回一个列表，其中元素 i 是第 i 列中变量异常值的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:00:09.033

You may not actually want to remove outliers, but per [this](https://stackoverflow.com/questions/4787332/how-to-remove-outliers-from-a-dataset) 2 years ago:

```
x[!x %in% boxplot.stats(x)$out] 
```

# linux - Linux 控制台文本编辑器 - 用颜色书写

> ID：15219051
> 
> 赞同：1
> 
> 时间：2013-03-05T08:29:55.633
> 
> 标签：linux, colors, console

有没有办法在 linux 下的某些控制台文本编辑器中编写文本，以便我可以根据定义的系统控制台颜色（*color0.. *color15）定义显示的文本颜色？

例如，当我在文本编辑器中输入时，我将文本的一部分显示为绿色，而将部分显示为**青色**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:31:31.597

Vim 的 Txtfmt 插件提供了你正在寻找的东西。除了颜色，您还可以对文本应用格式：例如，粗体、下划线、斜体、下卷曲等...，以及它们的任意组合。

[文本文件](http://www.vim.org/scripts/script.php?script_id=2208)

注意：上一张海报中提到的错误很可能是由于在他的 vimrc 中启用文件类型插件失败造成的。出于某种原因，通常需要的设置在许多 Vim 安装中并不是默认设置。添加以下行应该可以防止错误：

```
filetype plugin on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:33:15.257

您可以使用这些代码：[http ://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html)

基本语法：

`echo '/033[`颜色代码`m'`（无空格）

重置

`echo '\033[0;0m'`

要制作文字颜色：

*   在 vi 中，您可以使用`Ctrl-V`then`Esc`而不是`echo '\033`
*   在 nano 你可以使用`Meta-V`then`Esc`而不是`echo '\033`
    *   `Meta-v`可以是`Esc`那时`v`或`Alt-v`取决于您的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:06:34.823

到目前为止，我唯一发现的是一个名为*TxtFmt*的 VIM 插件，可在[http://www.vim.org/scripts/script.php?script_id=2208获得](http://www.vim.org/scripts/script.php?script_id=2208)

唯一的问题是我无法让它工作 - 在 :MakeTextPage 上我收到一堆错误，如“未知函数：Txtfmt_GetTokStr”和许多其他错误。

# c# - 网络表单路由多个单词

> ID：15219052
> 
> 赞同：1
> 
> 时间：2013-03-05T08:29:57.460
> 
> 标签：c#, asp.net, c#-4.0, webforms, url-routing

这是我的路由模式。

```
routes.MapPageRoute("villadetail", "{sublocationurl}-bali-{villaurl}-details", "~/VillaDetail.aspx"); 
```

样本值：

```
sublocationurl = "pemuteran"
villaurl = "jeda-villa-bali-3br" 
```

网址：

```
www.website.com/pemuteran-bali-jeda-villa-bali-3br-details 
```

当相同的多个单词出现在 url 中时会出现问题，在这种情况下，单词是“bali”。

```
Page.RouteData.Values["sublocationurl"] 
```

导致**pemuteran-bali-jeda-villa**而不是**“pemuteran”**

和

`Page.RouteData.Values["villaurl"]`结果是3br而不是“ **jeda** **-villa-bali-3br”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:27:22.603

其实不是小问题。我忽略了连字符作为分隔符的特殊属性。

您可以选择一条自定义路线来纠正您的参数（来自[https://stackoverflow.com/a/14075552/1236044](https://stackoverflow.com/a/14075552/1236044)的想法）：

```
public class CustomRoute : Route
{
    private String _separator;

    public CustomRoute(string url,
        RouteValueDictionary defaults,
        RouteValueDictionary constraints,
        RouteValueDictionary dataTokens,String separator,IRouteHandler hdl)
        : base(url, defaults, constraints, dataTokens, hdl)
    {

        _separator = separator;
    }

    protected override bool ProcessConstraint(HttpContextBase httpContext,
        object constraint, string parameterName, RouteValueDictionary values,
        RouteDirection routeDirection)
    {
        if(((string)values["sublocationurl"]).Contains(_separator))
        {
            var wholeParams = String.Format("{0}-{1}-{2}", values["sublocationurl"],_separator, values["villaurl"]).Split(new[]{_separator},StringSplitOptions.None);
            values["sublocationurl"] = wholeParams[0].Trim('-');
            values["villaurl"] = String.Join(_separator, wholeParams.Skip(1)).Trim('-');
        }
        return base.ProcessConstraint(httpContext, constraint,
            parameterName, values, routeDirection);
    }
} 
```

然后可以像这样注册路线：

```
var separator = "bali";

routes.Add("villadetail",
            new CustomRoute("{sublocationurl}-"+separator+"-{villaurl}-details",
            new RouteValueDictionary(),
            new RouteValueDictionary{{ "sublocationurl", @".+"}},
            new RouteValueDictionary()
            , separator, new System.Web.Routing.PageRouteHandler("~/VillaDetail.aspx",false))); 
```

希望这会有所帮助

----------以前的无效答案

您可以尝试向您的子位置 url 参数添加一个正则表达式约束，以声明它不能包含“bali”。

像这样的东西：

```
routes.MapPageRoute(
    "villadetail", 
    "{sublocationurl}-bali-{villaurl}-details", 
     "~/VillaDetail.aspx", 
     true, // checkPhysicalUrlAccess, value at  your will
     defaults:new RouteValueDictionary {},
     constraints: new RouteValueDictionary { { "sublocationurl", @"((?!bali).)*"}}) 
```

# asp.net - 如何制作具有滑动门效果的提交按钮？

> ID：15219059
> 
> 赞同：1
> 
> 时间：2013-03-05T08:30:26.380
> 
> 标签：asp.net, html, webforms, submit, sliding-doors

我有一个 ASP.NET .NET 4.0 Webform 网站。我在这个网站的几乎所有页面上都有几个提交按钮，它们是用以下代码生成的：

```
<asp:Button id="b1" Text="Submit" runat="server" /> 
```

现在我需要将其切换为 CSS 滑动门效果（或类似的东西）以在所有按钮（提交和链接按钮）上获得相同的外观

推拉门：[http ://alistapart.com/article/slidingdoors](http://alistapart.com/article/slidingdoors)

我如何尽可能简单地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:07:48.257

我发现“滑动门”技术的最大问题是您需要在标记中添加一个额外的元素。您应该能够通过将按钮包装在`<span>`标签中来实现此目的：

```
<span><asp:Button id="b1" Text="Submit" runat="server" /></span> 
```

并在左侧或右侧给跨度一些填充（取决于您希望图形的较小部分出现在哪一侧）。但是，如果您想应用翻转效果，您可能会遇到问题（跨度不会`:hover`在按钮/链接的状态上出现），并且用户将无法单击按钮外部的图像条/link 除非您将 JavaScript 添加到等式中。

这是一项相对较少收益的大量工作。

如果没有看到您尝试复制的设计，就很难提供精确的解决方案；不过，您可能会发现，您尝试通过使用图像来实现的大部分内容都可以使用 CSS 来完成，并且可以应用于链接和按钮。它不会像“滑动门”技术那样跨浏览器（例如，IE 的 onledr 版本不支持圆角），但大多数现代浏览器都可以应付得很好。

# ruby-on-rails - 将tinymce集成到rails +主干中

> ID：15219060
> 
> 赞同：1
> 
> 时间：2013-03-05T08:30:32.620
> 
> 标签：ruby-on-rails, backbone.js, ruby-on-rails-3.2, tinymce

我使用tinymce 已经有一段时间了。并感谢[http://github.com/spohlenz/tinymce-rails](http://github.com/spohlenz/tinymce-rails) 但是现在我必须在基于[主干轨](http://github.com/meleyal/backbone-on-rails)
的应用程序中包含 tinymce 我已经遵循了 rails 应用程序的所有说明。
试图在 application.js 中的主干文件之前和之后包含 tinymce
我的主干模板

```
<textarea class="tinymce" id="article_body" rows='40' cols='120' >
  <%= @article.get('body') %>  
</textarea> 
```

但是 tinymce 控件无法初始化。
你可以帮帮我吗？

**更新 1我尝试在模板**[中](http://www.tinymce.com/forum/viewtopicrphp?pid=90250#p90250)
初始化 tinymce，并且： 在 edit.jst.eco

```
<textarea class="tinymce" id="article_body<%= @article.get('id') %>" rows='40' cols='120' >
  <%= @article.get('body') %>
</textarea>  
<% tinyMCE.execCommand "mceAddControl", true, "article_body"+@article.get('id')%> 
```

仅在手动刷新 (f5) 后才会显示 texterea 上的控件

**更新 2**
我尝试将 execCommand 方法添加到我有兴趣在其中显示 tinymce 的视图的渲染方法中：

```
class Notes.Views.ArticleEdit  
  render: ->  
    $(@el).html(@template(article: @model))  
    tinyMCE.execCommand "mceAddControl", false, "article_body"+@model.get('id')  
    this 
```

与更新 1 相比没有变化
**更新 3**
尝试在渲染后绑定 tinymce。使用了 2 种方法：
1）

```
class Notes.Views.ArticleEdit  
  render: ->  
    $(@el).html(@template(article: @model))  
    setTimeout (->
      tinyMCE.execCommand "mceAddControl", true, "article_body" + @model.get("id")
    ), 100 
```

没有变化。仅在显示刷新 tinymce
2) [http://fahad19.tumblr.com/post/28158699664/afterrender-callback-in-backbone-js-views](http://fahad19.tumblr.com/post/28158699664/afterrender-callback-in-backbone-js-views)

```
 class Notes.Views.ArticleEdit extends Backbone.View  
  initialize: ()->  
    _.bindAll this,  "render", "afterRender"  
    _this = this  
    @render = _.wrap(@render, (render) ->  
      render()  
      _this.afterRender()  
      _this  
    )  
    @model.on('change',@render,this)  
    @model.on('destroy',@remove,this)  
  afterRender: ->  
    console.log tinyMCE  
    tinyMCE.execCommand "mceAddControl", true, "article_body" + @model.get("id") 
```

虽然我得到了控制台输出（正确的 tinymce 对象），但我没有得到 tinymce :(

**更新 4**
这是[github上的项目](https://github.com/Asmmund/notes/commit/d93b7e3f017271b97a8de0138330b5c6509d9d6b)

**更新 5**
*我弄错了 - 项目仅在路由器中呈现后才出现在 DOM 中。所以我必须编辑 Notes.Routers.Articles#edit 动作*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:51:28.003

要解决我的问题，我必须像这样编辑路由器操作：

```
edit: (id)->  
    @model = @collection.get(id)  
    view = new Notes.Views.ArticleEdit(model: @model)  
    $('#container').html(view.render().el)  
    el_id = "article_body" + @model.get("id")  
    if (tinyMCE.getInstanceById(el_id)) {   
      tinyMCE.execCommand 'mceFocus', false, el_id  
      tinyMCE.execCommand "mceRemoveControl", false, el_id  
    }  
    tinyMCE.execCommand "mceAddControl", false, el_id  
    tinyMCE.triggerSave()*emphasized text 
```

# c - 我应该使用哪个错误值？

> ID：15219064
> 
> 赞同：10
> 
> 时间：2013-03-05T08:30:42.540
> 
> 标签：c, linux, error-handling, linux-kernel

我目前正在为 Linux 内核构建一个模块。我的工作版本是 3.8-rc3+。我的工作使我实​​现了一些`ioctl()`命令。如您所知，我的命令应该返回适​​当的错误代码来描述执行过程中出了什么问题。这看起来很简单，但我有一个用例，我不知道应该返回哪个错误代码。

基本上，我希望用户能够为给定设备设置加密密钥。我的模块将密钥存储在 RB 树中，由设备唯一标识符（基本`int`）索引。如果“目标”设备在树中已经有一个条目，那么应该更新这个条目，否则，模块只需将一个新分配的条目添加到该设备的树中，并带有请求的加密密钥。也就是说，尝试设置密钥时可能会发生多种情况：

*   模块内部的某些东西可能正在使用用户想要更新的加密密钥：模块返回`EBUSY`错误。
*   没有条目并且分配失败：`ENOMEM`错误。
*   该模块正在释放其资源。现有的键条目可能被标记为删除（条目有一个`dying`标志来表示这一点）：在内部我目前使用`EPERM`错误代码，因为调用者没有“权限”在条目被销毁时更改条目。

正如我所说，对于后一种情况，我使用`EPERM`错误代码，但我感觉它是错误的，我不知道我应该为此使用哪个错误代码。欢迎任何建议！

*我还指定了 linux 标签，因为它`ioctl()`可以在用户空间应用程序中使用。*

**编辑**：通读评论和答案后，我想我会这样：

*   当模块释放其资源时，`ESHUTDOWN`将被返回。
*   当只有目标键被销毁，而树的其余部分仍然正常时，`EACCES`将被使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:34:57.887

怎么样`ESHUTDOWN`？（传输端点关闭后无法发送）

另一种选择是`ENXIO`（没有这样的设备或地址）。它不是 100% 准确的，因为该设备仍然存在，但它传达了错误的含义（它不再可用）。

一个简单的选择是`ENOTSUP`（不支持操作），但这听起来更像是“方法未实现”

`EPERM`听起来更好，但它通常与“您无权执行此操作”而不是“您现在不能执行此操作”一起使用。

`ESTALE`（陈旧的文件句柄）会很好，但它与 NFS 相关。

# python - 让 Vim 了解 python 的 ctag 类型注释

> ID：15219065
> 
> 赞同：1
> 
> 时间：2013-03-05T08:30:43.547
> 
> 标签：python, vim, ctags

我用Vim+Ctags写Python，我的问题是Vim经常跳转到一个标签的导入，而不是定义。这是一个常见问题，已在此处的几篇文章中解决。

[这篇文章](https://stackoverflow.com/a/3670061/366336)展示了如何从标签文件中删除导入。这很有效，除了有时在导入中使用标签很有用（例如，当您想要列出已导入类/函数的所有位置时）。

[这篇文章](https://stackoverflow.com/a/1749621/366336)展示了如何在不从标签文件中删除导入的情况下获得定义。到目前为止，这基本上是我一直在做的事情（只是将 :tjump 重新映射到单个击键）。但是，您仍然需要浏览出现的标签列表以查找定义条目。

如果可以只用一个键和弦（例如 ）告诉 Vim “得到定义”，那就太好了。Exuberant Ctags 用条目类型注释标签条目（例如，c 表示类，i 表示导入）。有谁知道是否有办法让 Vim 使用这些注释，这样我就可以说“转到第一个不是 i 类型的标签”之类的话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:00:40.757

不幸的是，Vim 本身无法进行推理业务并根据某些上下文跳转到导入或定义：当在`tags`文件中搜索标记时，Vim 会在第一个匹配项处停止，*无论它是什么*。[插件](http://www.vim.org/scripts/index.php)可能会有所帮助，但我不知道这样的事情。

代替`<C-]>`or `:tag foo`，您可以使用`g]`or`:ts foo`向您显示匹配列表（带有种类和每个匹配行的预览），而不是跳转到第一个。这样，*你*就可以准确地告诉 Vim*你*想去哪里。

# android - 如何使用 sherlock 操作栏在片段中使用首选项

> ID：15219067
> 
> 赞同：2
> 
> 时间：2013-03-05T08:30:58.173
> 
> 标签：android, actionbarsherlock, fragment, preferences

我想支持 api 级别 9 并且仍然使用片段和选项卡。因此，我使用了 sherlock 动作条，它工作正常。现在，在我的一个选项卡（所有选项卡都是片段）中，我想要一个用于创建新游戏的设置屏幕。我认为偏好是最好的选择。但是我不知道如何在片段中使用首选项并且仍然支持 api 级别 9。有人可以帮忙吗？如果无法在片段中使用首选项并支持 api 级别 9，您有什么建议吗？例如，我如何创建看起来像首选项的视图，即左侧的文本，右侧的复选框，当我检查它时，整个布局被选中？还有一个具有相同外观的单选按钮组？

# colors - 如何更改 obj 文件的面颜色？

> ID：15219073
> 
> 赞同：1
> 
> 时间：2013-03-05T08:31:13.820
> 
> 标签：colors, three.js, vertex

此代码使用 Three.js 库在画布中创建一个 3d 对象。我想为保存在 json 文件中的几何图形的顶点或面着色。

```
var loader = new THREE.JSONLoader();
var callbackMale = function (geometry, materials) {
    // the face's indices are labeled with these characters 
    for (var i = 0; i < 100; i++) {
        var faceIndices = ['a', 'b', 'c', 'd'];
        var face = geometry.faces[i];
        // determine if face is a tri or a quad
        var numberOfSides = (face instanceof THREE.Face3) ? 3 : 4;
        // assign color to each vertex of current face
        for (var j = 0; j < numberOfSides; j++) {
            var vertexIndex = face[faceIndices[j]];
            // initialize color variable
            var color = new THREE.Color(0xffffff);
            color.setRGB(Math.random(), Math.random(), Math.random());
            face.vertexColors[j] = color;
        }
        geometry.dynamic = true;
        geometry.needsUpdate = true;
        createScene(geometry, materials, 90, FLOOR, 50, 105)
    }
}; // fine callBack
loader.load("brain.js", callbackMale); 
```

# django - Django-Userena 电子邮件后端

> ID：15219078
> 
> 赞同：2
> 
> 时间：2013-03-05T08:31:23.497
> 
> 标签：django, django-users

我正在尝试设置[Django-Userena](http://www.django-userena.org/)。

我在`settings.py`文件中添加了以下行：

```
EMAIL_BACKEND = 'django.core.mail.backends.dummy.EmailBackend' 
```

还尝试过：

```
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend' 
```

尝试注册新帐户时，我收到此错误：

```
ImproperlyConfigured at /accounts/signup/

Module "django.core.mail.backends.smtp" does not define a "EmailBackEnd" class 
```

我很确定这很明显，但是在这一点上，我无法弄清楚问题所在。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:43:41.210

```
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = "mail.mysmtpserver.somewhere"
#EMAIL_PORT = ""
EMAIL_HOST_USER = "my@login"
EMAIL_HOST_PASSWORD = "mypassword"
#EMAIL_USE_TLS = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:10:16.017

尝试使用以下 gmail 设置`settings.py`

```
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'your-username@gmail.com'
EMAIL_HOST_PASSWORD = 'your-password'
EMAIL_PORT = 587
EMAIL_USE_TLS = True 
```

确保上述条目应在您的`settings`文件中

如果你有自己的邮件服务器，那么首先安装 sendmail

您可以拥有自己的邮件服务器，而不是使用有很多限制的 smtp.gmail.com。

您可以通过安装自己的邮件服务器来做到这一点：

```
sudo apt-get install sendmail 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T13:52:11.120

添加`DEFAULT_FROM_EMAIL = 'your@mail.com'`到您的设置中，它应该可以工作。

# linux - 为 Web 应用程序 (Apache) 设置 Linux 服务器

> ID：15219087
> 
> 赞同：-2
> 
> 时间：2013-03-05T08:32:00.683
> 
> 标签：linux

嗨，有没有人可以告诉我如何设置 Linux 服务器（运行 CetOS 6）来托管一些 Web 应用程序？我希望能够部署到服务器并通过重新部署来更新应用程序。谢谢威尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:35:34.497

[LAMP 软件包](http://en.wikipedia.org/wiki/LAMP_%28software_bundle%29)正是为此目的而创建的。它随附您可能需要的所有软件和安装/设置说明。查看引用的 Wikipedia 页面中的外部链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:40:21.733

您可能可以从这里开始：

[http://www.lifelinux.com/how-to-setup-a-lamp-server-on-centos-6-0/](http://www.lifelinux.com/how-to-setup-a-lamp-server-on-centos-6-0/)

# android - ImageView：在 Button 上方正确缩放

> ID：15219094
> 
> 赞同：3
> 
> 时间：2013-03-05T08:32:35.603
> 
> 标签：android, imageview

我是 Android 新手，一切都很顺利，直到现在我必须处理布局。我想要的是这样的布局：

布局应如何： ![](../Images/18fbe61bd0914ecb3414d7d8438b4b55.png) 图像应适当缩放并保持其比例。

这就是为什么我尝试了这个 XML 代码，但它没有按照我想要的方式工作。图像保持其比例，但垂直时左侧和右侧超出屏幕，水平时在顶部和底部切割：

布局如何： ![在此处输入图像描述](../Images/1797d6e1dd1aacb0153aee79d6e82ced.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerHorizontal="true"
    android:orientation="vertical"
    android:background="@color/background">

     <ImageView
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_gravity="center"
        android:src="@drawable/logo"
        android:gravity="center"
        android:scaleType="centerCrop"
        android:contentDescription="@string/app_logo"
        android:layout_weight="2.5" />

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="4"
        android:gravity="center">  

        <Button
            android:id="@+id/id1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="50dp"
            android:layout_marginRight="50dp"
            android:text="@string/text1"
            android:textSize="40sp" 
        />

          <Button
            android:id="@+id/id2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="50dp"
            android:layout_marginRight="50dp"
            android:text="@string/text2"
            />

        <Button
            android:id="@+id/id3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dp"
            android:layout_marginRight="50dp"
            android:layout_gravity="center"
            android:text="@string/text3" />
    </LinearLayout>
</LinearLayout> 
```

我用谷歌搜索了很多，但找不到我要找的东西。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:33:06.223

看起来`android:scaleType="fitCenter"`就是你要找的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:45:09.800

您必须为您的垂直状态和水平状态设计 2 个布局，并将它们放在您的 android 项目中的两个不同文件夹中：

当您将常规布局放在布局文件夹中时，您应该将横向布局放在`layout-land`文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:47:51.637

尝试设置`android:scaleType="fitXY"`为您的`ImageView`.

# android - 我无法将参数 i 传递给按钮 [i]

> ID：15219095
> 
> 赞同：0
> 
> 时间：2013-03-05T08:32:39.253
> 
> 标签：android, media-player

我试图在按钮单击时播放声音，我试图让它只调用 .start() 函数，但问题是我在 onclick 函数中设置了 i 参数，因此它不会将 i 传递给 onclicklistner 函数任何想法如何解决？这是我的代码

```
package com.example.buttonsdemo;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.support.v4.widget.SimpleCursorAdapter.ViewBinder;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity implements View.OnClickListener{

    //Creating Sound arrays 
    int i=0;
    MediaPlayer[] mediaplayer = new MediaPlayer[120];
    Button button[] = new Button [120]; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    //Initialize the mediaplayer
        for(int z=0;z<120;z++)
        {
            mediaplayer[z]=null;
        }

        //Initialize  Button Array

        for(int x=0;x<120;x++)
        {
            button[x]=new Button(this);
            button[x].setOnClickListener(this);
        }

        //Creating Media player array
        mediaplayer[0]= MediaPlayer.create(this,R.raw.akali);
        mediaplayer[1]= MediaPlayer.create(this,R.raw.alistar);

        button[i].setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                switch(v.getId())
                {

            case R.id.akali:
                    i=0;
                break;
            case R.id.alistar:
                    i=1;
                break;
                        }   
                mediaplayer[i].start();

            }

        } );

}

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:48:12.477

所以基本上你只需要即时制作几个按钮，点击时会产生不同的声音。试试这个代码：

```
Button myButton[] = new Button[100];
MediaPlayer mySound = new MediaPlayer();
for (int i=0; i<100; i++) {
    myButton[i] = new Button(this);
    myButton[i].setId(i+1);
    myButton[i].setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Resources res = context.getResources();
            int soundId = res.getIdentifier("sound" + v.getId(), "raw", context.getPackageName());
            mySound.create(getApplicationContext(), soundId);
            mySound.start();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:41:50.330

我相信你的 onCreate 应该是这样创建的：

```
 protected void onCreate(Bundle savedInstanceState) {         
     super.onCreate(savedInstanceState);                      
     setContentView(R.layout.activity_main);                
     //Initialize the mediaplayer                                 
    for(int z=0;z<120;z++)
    {
        mediaplayer[z]=null;
    }

     mediaplayer[0]= MediaPlayer.create(this,R.raw.akali);
    mediaplayer[1]= MediaPlayer.create(this,R.raw.alistar);

    //Initialize  Button Array

    for( x=0;x<120;x++)
    {
        button[x]=new Button(this);

          button[x].setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            mediaplayer[x].start();

        }

    } );
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:38:33.620

在侦听器中，您想使用在侦听器中声明的变量。

您正在尝试使用`i`在运行侦听器时未运行的代码中声明的变量 ()。

```
new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        int idx;
        switch(v.getId()) {
        case R.id.akali:
            idx=0;
            break;
        case R.id.alistar:
            idx=1;
            break;
        }   
        mediaplayer[idx].start();
    }
} 
```

或者`start()`在`case`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:39:18.050

转储 'i' 声明。用这个替换方法（“按钮 theButton”需要保持“最终”）。

```
for(int z=0;z<120;z++)
        {
        final Button theButton = button[z];
        theButton.setOnClickListener(new View.OnClickListener()
        {

            public void onClick(View v)
            {
                // TODO Auto-generated method stub
               // do what you want.
            }
        });
       } 
```

# php - PHP 两个感叹号“！！” 带有 preg_match 的运算符？

> ID：15219099
> 
> 赞同：-3
> 
> 时间：2013-03-05T08:32:57.577
> 
> 标签：php, operators

[在此处](http://pastebin.com/KKaQ21gk)的一个 PHP 片段中在线看到了这一点。

```
/**
 * @param string $str subject of test for integerness
 * @return bool true if argument is an integer string
 */
function intStr($str) {
    return !!preg_match('/^\d+$/', $str);
} 
```

运行此代码段会产生：

```
> var_dump( intStr("abc") );
bool(false)

> var_dump( intStr("123") );
bool(true) 
```

**问题：**

1.  双感叹号是一个有效的运算符，还是与否定自身的“非非”相同？

2.  **另外**，为什么这个运算符与`preg_match`函数一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:44:20.417

preg_match 返回 0 或 1（或错误时为 false），此 intStr 函数旨在返回布尔值。单个`!$x`首先转换`$x`为布尔值，然后取反。`!!$x`只是恢复这个否定，所以它是一种更短的写法`(bool)$x`。

但是，这四个字符的保存会导致可读性下降（以及两个不必要的操作，但可以忽略不计），因此不建议这样做。

这是聪明的代码，但编程中有一条规则：**[不要聪明](http://www.codethinked.com/dont-be-clever)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:32:57.577

**运行这个简化的函数：**

```
function test($value) {
    return !!$value;
} 
```

**测试：**

```
> var_dump( test(1) );
bool(true)

> var_dump( test(0) );
bool(false)

> var_dump( test('1') );
bool(true)

> var_dump( test('0') );
bool(false)

> var_dump( is_bool( test('abc') ) );
bool(true)

> var_dump( is_bool( test('0') ) );
bool(true) 
```

**观察：**

使用 . 检查输出`is_bool`。*显然，它以某种方式将输出强制转换为**boolean**。*

**结论：**

从 PHP 手册中，

> `preg_match()`如果模式匹配给定的主题，则返回 1，如果不匹配，则返回 0，如果发生错误，则返回 FALSE。

我可以得出结论，这个函数强制返回值是一个布尔值，而不是由`preg_match`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:37:27.100

`!!`等于`not not`。这意味着这`!!'a'`会将字符串`'a'`转换为布尔值，并返回它的倒数。所以，`!!preg_match`意味着`not not preg_match`，所以一个有效的 preg_match。

# php - php 检查数组值是否重复

> ID：15219100
> 
> 赞同：0
> 
> 时间：2013-03-05T08:32:58.170
> 
> 标签：php, arrays

我在下面有这个数组：

**PHP**

```
$arr=array('A','A','B','C'); 
```

我想检查值，如果值重复必须是警报错误

**PHP**

```
$chk=array_count_values($array);
if ( $chk[0] < 1 || $chk[2] < 1 || $chk[3] < 1  || $chk[4] < 1 )
    echo 'array must be uniq'; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T08:34:52.380

使用[`array_unique()`](http://www.php.net/manual/en/function.array-unique.php)，这可以很容易地重构为一个新函数：

```
function array_is_unique($array) {
   return array_unique($array) == $array;
} 
```

例子：

```
$array = array("a", "a", "b", "c");
echo array_is_unique($array) ? "unique" : "non-unique"; //"non-unique" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:34:27.523

试试这个 ：

```
$arr  =   array('A','A','B','C');
if(count($arr) != count(array_unique($arr))){
  echo "array must be uniq";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:34:48.757

只需尝试：

```
if ( count($arr) != count(array_unique($arr)) ) {
  echo 'array must be uniq';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:35:24.680

您可以使用 foreach 循环遍历它，然后使用 strpos 函数查看字符串是否包含重复项

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T08:36:50.707

来自[PHP 文档](http://php.net/manual/en/function.array-unique.php)

> 数组**array_unique** ( 数组 $array [, int $sort_flags = SORT_STRING ] )
> 
> 接受一个输入数组并返回一个没有重复值的新数组。

# javascript - 尝试使用 parse 和 jquery 将所有对象存储到一个对象中

> ID：15219103
> 
> 赞同：0
> 
> 时间：2013-03-05T08:33:08.517
> 
> 标签：javascript, parse-platform

我正在尝试将所有返回的对象存储到一个对象中以备后用。我已经设置了循环，但是当我尝试使用新对象执行一些代码时，它是空的。在这种情况下，这里警告对象。我猜在循环完成之前警报正在执行。有任何解决这个问题的方法吗？

```
var followers = new Array;
Parse.initialize("xxxxxx", "xxxxx");
var currentUser = Parse.User.current();
var users = JSON.stringify(currentUser);
var user = eval("(" + users + ")");
var listsfollow = user.Follow;
for (var i = 0; i < listsfollow.length; i++) {
    var allUsers = Parse.Object.extend("User");
    var query = new Parse.Query(allUsers);
    query.get(listsfollow[i], {
        success: function (results) {
            followers.push(results);
        },
        error: function (object, error) {
            // The object was not retrieved successfully.
            // error is a Parse.Error with an error code and description.
        }
    });
};
alert(followers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:03:23.173

您是正确的，jquery 中的 AJAX 内容是异步的，因此`.get()`会在警报之后发生。最快和最脏的方法是在发出请求之前将其设置为 async 为 false：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ 更好的方法是让您的代码响应调用的结果每当它准备好时。这将防止页面阻塞并使您的代码更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:35:56.277

这是一个异步查询，并且在查询启动后立即显示警报，因此它不太可能在查询返回任何结果后执行。

任何依赖于查询结果的代码都应该移到成功或错误回调函数中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T07:04:17.180

我不知道如何让它等待查询，但我在最后一次循环迭代之后用它来做一些事情。工作得很好。

```
 if((--remaining)==0)alert(followers); 
```

# javascript - 使用该行中的变量在每个表格行之后插入 HTML

> ID：15219107
> 
> 赞同：0
> 
> 时间：2013-03-05T08:33:16.507
> 
> 标签：javascript, jquery, html, html-table, confluence

你能帮我解决这个问题吗？

我有一张这样的桌子：

```
 <table>
     <th style="text-align: left; text-transform: capitalize;">Unique</th>
     <th style="text-align: left; text-transform: capitalize;">x1</th>
     <th style="text-align: left; text-transform: capitalize;">y2</th>
     <tr class="rowNormal">
     <td nowrap="true">a1</td>
     <td nowrap="true">b2</td>
     <td nowrap="true">b3</td>
     </tr>
     <tr class="rowAlternate">
     <td nowrap="true">a1</td>
     <td nowrap="true">b2</td>
     <td nowrap="true">b3</td>
     </tr>
     <tr class="rowNormal">
     <td nowrap="true">a1</td>
     <td nowrap="true">b2</td>
     <td nowrap="true">b3</td>
     </tr>
     </table> 
```

我需要做的是在每个 HTML 之后插入某些 HTML `tr`，使用其中最后一个的值`td`来`tr`填充该 HTML 中的变量。即上面的代码应该是这样的：

```
 <table>
     <th style="text-align: left; text-transform: capitalize;">Unique</th>
     <th style="text-align: left; text-transform: capitalize;">x1</th>
     <th style="text-align: left; text-transform: capitalize;">y2</th>
     <tr class="rowNormal">
     <td nowrap="true">a1</td>
     <td nowrap="true">b2</td>
     <td nowrap="true">b3</td>
     </tr>
     <p>
     <ac:macro ac:name="mymacro">
     <ac:parameter ac:name="content">titles</ac:parameter>
     <ac:parameter ac:name="labels">+VALUE_TD +othervalue</ac:parameter>
     </ac:macro>
     </p>
     <tr class="rowAlternate">
     <td nowrap="true">a1</td>
     <td nowrap="true">b2</td>
     <td nowrap="true">b3</td>
     </tr>
     <p>
     <ac:macro ac:name="mymacro">
     <ac:parameter ac:name="content">titles</ac:parameter>
     <ac:parameter ac:name="labels">+VALUE_TD +othervalue</ac:parameter>
     </ac:macro>
     </p>
     <tr class="rowNormal">
     <td nowrap="true">a1</td>
     <td nowrap="true">b2</td>
     <td nowrap="true">b3</td>
     </tr>
     <p>
     <ac:macro ac:name="mymacro">
     <ac:parameter ac:name="content">titles</ac:parameter>
     <ac:parameter ac:name="labels">+VALUE_TD +othervalue</ac:parameter>
     </ac:macro>
     </p>
     </table> 
```

在此示例中，`VALUE_TD`对于所有 3 行，将等于 b3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:39:42.180

这是一个使用 jQuery 函数的示例`insertAfter`。

[参见 jsFiddle](http://jsfiddle.net/pSwkM/6/)

```
$(document).ready(function () {
    $.each($('tr'), function (i, row) {
        if (i != 0) {
            var lastTd = $(row).find('td:last-child')[0];
            $('<p>\
<ac:macro ac:name="mymacro">\
<ac:parameter ac:name="content">titles</ac:parameter>\
<ac:parameter ac:name="labels">' + lastTd.innerHTML + 'othervalue</ac:parameter>\
</ac:macro>\
</p>').insertAfter(row);
        }
    });
}); 
```

这是另一个使用 jQuery 函数的示例`after`，两者都起作用，它们只是不同的方法。

[参见 jsFiddle](http://jsfiddle.net/pSwkM/5/)

```
$(document).ready(function () {
    $.each($('tr'), function (i, row) {
        if (i != 0) {
            var lastTd = $(row).find('td:last-child')[0];
            $(row).after('<p>\
<ac:macro ac:name="mymacro">\
<ac:parameter ac:name="content">titles</ac:parameter>\
<ac:parameter ac:name="labels">' + lastTd.innerHTML + 'othervalue</ac:parameter>\
</ac:macro>\
</p>');
        }
    });
}); 
```

我还想说这不是有效的 HTML，原因如下：

*   ' `<th>`s 应该被包裹在一个`<tr>`.
*   标签在`<p>`标签内无效`<table>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:39:12.877

`tr`每个like 后创建一个div`<div id="tr1"> </div>`

通过使用 jquery，您可以附加 html 脚本

```
$('#tr1').append('your script'); 
```

# java - 在 servlet 过滤器中设置托管 Bean 的值。

> ID：15219112
> 
> 赞同：-2
> 
> 时间：2013-03-05T08:33:47.187
> 
> 标签：java, jsf-2, servlet-filters

我有这种情况：我想在成功登录后将用户名保存在会话范围的托管 bean 中。我在 servlet 过滤器中登录。如何从 servlet 过滤器访问托管 bean？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:58:34.170

如果我没看错你的问题，你想从一个 servlet 访问你的 bean。您应该能够在 Servlet 上下文中访问它们，[查看这个答案以了解如何做到这一点](https://stackoverflow.com/a/3578724/1073063)。

# wix - wix 安装程序 3.7 引导程序注册表搜索

> ID：15219118
> 
> 赞同：7
> 
> 时间：2013-03-05T08:34:08.840
> 
> 标签：wix, windows-installer, wix3.5, wix3.6, bootstrapper

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension"
     xmlns:netfx='http://schemas.microsoft.com/wix/NetFxExtension'>

    <Bundle Name="IPDev" Version="0.6" Manufacturer="MYAPP Corporation" UpgradeCode="f380ae43-5df1-4cfe-9297-526e3e638e57">
        <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" />
        <Chain>
            <!-- TODO: Define the list of chained packages. -->
            <PackageGroupRef Id="Netfx45FullPackage"/>      
        </Chain>
    </Bundle>
  <Fragment>
    <!--checking for matlab 2012a installation-->
     <util:RegistrySearch Id="MatlabPath"
            Variable="UniqueId"
            Root="HKLM"
            Key="SOFTWARE\MathWorks\MATLAB\4.17\"
            Result="exists"
            Win64="yes" 
           />
    <!--checking for matlab MCR 2012a 64 bit installation-->
    <util:RegistrySearch Id="MatlabMCRPath"
            Variable="UniqueId"
            Root="HKLM"
            Key="SOFTWARE\MathWorks\MATLAB Compiler Runtime\7.17\"
            Result="exists"
            Win64="yes" 
            />
    <PackageGroup Id="Netfx45FullPackage">

     <ExePackage Id="Netfx45Xxx" Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="no" InstallCommand="/q"
        SourceFile="..\SetupProject\dotnetfx45_full_x86_x64.exe"
        DetectCondition="(Netfx4FullVersion=&quot;4.5.50709&quot;) AND (NOT VersionNT64 OR (Netfx4x64FullVersion=&quot;4.5.50709&quot;))"
        InstallCondition="(VersionNT >= v6.0 OR VersionNT64 >= v6.0) AND (NOT (Netfx4FullVersion=&quot;4.5.50709&quot; OR Netfx4x64FullVersion=&quot;4.5.50709&quot;))"/>
     <ExePackage Id="MatlabMCR2012a64" Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="no" InstallCommand="/q"
        SourceFile="..\SetupProject\MCR_R2012a_win64_installer.exe"
        InstallCondition="(NOT MatlabPath) OR (NOT MatlabMCRPath)"/>
    <MsiPackage  Id="IPDev" Cache="no" Compressed="no"  DisplayInternalUI="yes" Vital="yes" SourceFile="..\SetupProject\bin\Release\IPDevSetup.msi"/>   

    </PackageGroup>
  </Fragment>
</Wix> 
```

这是我的代码：我的问题是 .NET4.5 仅在存在时才安装。
但是，无论是否存在 MATLAB 的 MCR 都已安装。
你能告诉我我的情况有什么问题吗：

```
 InstallCondition="(NOT MatlabPath) AND (NOT MatlabMCRPath)" 
```

在 Rob 的回答之后修复：

```
DetectCondition="MatlabMCRPathExists OR MatlabPathExists" 
```

**这个条件应该是假的才能安装**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T23:31:44.623

这是我的最终和工作代码：
此代码检查用于 .NET 4.5 安装。对于 Matlab R2012a 或 Matlab MCR R2012a。

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension"
     xmlns:netfx='http://schemas.microsoft.com/wix/NetFxExtension'>

    <Bundle Name="IPDev" Version="0.6" Manufacturer="Intel Corporation" UpgradeCode="f380ae43-5df1-4cfe-9297-526e3e638e57">

        <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" />
        <Chain>

            <!-- TODO: Define the list of chained packages. -->
            <PackageGroupRef Id="Netfx45FullPackage"/>      
        </Chain>
    </Bundle>
  <Fragment>

      <!--checking for matlab 2012a installation-->
    <util:RegistrySearch Id="MatlabPath"
           Variable="MatlabPathExists"
           Root="HKLM"
           Key="SOFTWARE\MathWorks\MATLAB\4.17"
           Result="exists"
           Win64="yes" />
    <!--checking for matlab MCR 2012a 64 bit installation-->
    <util:RegistrySearch Id="MatlabMCRPath"
            Variable="MatlabMCRPathExists"
            Root="HKLM"
            Key="SOFTWARE\MathWorks\MATLAB Compiler Runtime\7.17"
            Result="exists"
            Win64="yes"  />
    <PackageGroup Id="Netfx45FullPackage">

     <ExePackage Id="Netfx45Xxx" Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="no" InstallCommand="/q"
        SourceFile="..\SetupProject\dotnetfx45_full_x86_x64.exe"
        DetectCondition="(Netfx4FullVersion=&quot;4.5.50709&quot;) AND (NOT VersionNT64 OR (Netfx4x64FullVersion=&quot;4.5.50709&quot;))"
        InstallCondition="(VersionNT >= v6.0 OR VersionNT64 >= v6.0) AND (NOT (Netfx4FullVersion=&quot;4.5.50709&quot; OR Netfx4x64FullVersion=&quot;4.5.50709&quot;))"/>
     <ExePackage Id="MatlabMCR2012a64" Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="no" InstallCommand="/q"
        SourceFile="..\SetupProject\MCR_R2012a_win64_installer.exe"
        DetectCondition="MatlabMCRPathExists OR MatlabPathExists"/>
    <MsiPackage  Id="IPDev" Cache="no" Compressed="no"  DisplayInternalUI="yes" Vital="yes" SourceFile="..\SetupProject\bin\Release\IPDevSetup.msi"/>   

    </PackageGroup>
  </Fragment>
</Wix> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T22:00:06.707

该`InstallCondition`属性用于确定是否应在机器上安装软件包。如果为 true，则允许安装该软件包。如果为 false，则卸载包。你想要的是一个`DetectCondition`属性来确定包是否已经存在于机器上。

修复可能只是将 Matlab 更改`ExePackage/@InstallCondition`为`ExePackage/@DetectCondition`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T09:58:42.930

您可以更正您的 RegistrySearch 调用，如下所示：

```
<!--checking for matlab 2012a installation-->
 <util:RegistrySearch Id="MatlabPath"
        Variable="MatlabPathExists"
        Root="HKLM"
        Key="SOFTWARE\MathWorks\MATLAB\4.17\"
        Result="exists"/>
<!--checking for matlab MCR 2012a 64 bit installation-->
<util:RegistrySearch Id="MatlabMCRPath"
        Variable="MatlabMCRPathExists"
        Root="HKLM"
        Key="SOFTWARE\MathWworks\MATLAB Compiler Runtime\7.17\"
        Result="exists"/>
<PackageGroup Id="Netfx45FullPackage"> 
```

此搜索将搜索结果设置为变量`MatlabPathExists`and `MatlabMCRPathExists`。
那么你的条件检查应该如下使用这些变量：

```
DetectCondition="(NOT MatlabPathExists) OR (NOT MatlabMCRPathExists)" 
```

# javascript - 搜索字符串并插入新行 javascript

> ID：15219119
> 
> 赞同：0
> 
> 时间：2013-03-05T08:34:21.603
> 
> 标签：javascript

我有一个长字符串，看起来像

```
var myString = "Bob is the best person in the world MAN John is the best person in the world MAN Peter likes to pick apples daily MAN Fred loves to eat bananas MAN" 
```

我想做的是在每个之后插入一个新行`MAN`- 这样我基本上得到了

```
Bob is the best person in the world MAN 
John is the best person in the world MAN 
Peter likes to pick apples daily MAN
Fred loves to eat bananas MAN 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:35:40.727

```
myString = myString.replace(/MAN/g, "MAN\n");

/*
 returns
 "Bob is the best person in the world MAN\  (\ means new line)
 John is the best person in the world MAN\
 Peter likes to pick apples daily MAN\
 Fred loves to eat bananas MAN"
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:36:45.977

使用 javascript 替换方法：

```
var n=myString.replace(/MAN/g,"MAN\n"); 
```

如果要将字符串输出为 html，请使用

```
"<br>" instead of "\n". 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:37:08.587

```
myString = myString.replace(/MAN/g, "MAN\n"); 
```

对于 HTML 输出，请改用：

```
myString = myString.replace(/MAN/g, "MAN<br>"); 
```

# javascript - javascript：对象不是函数

> ID：15219123
> 
> 赞同：2
> 
> 时间：2013-03-05T08:34:30.873
> 
> 标签：javascript

我写了一个模块：

```
window.FileReader = (function () {

        var read = function (file) {
            var reader = new FileReader();

            reader.onload = function (e) {
                console.log(e.target);
            };

            // reader.readAsDataURL(file);
        };

        return {
            read: read
        };
    })(); 
```

但是当我执行

```
FileReader.read() 
```

它总是警告`object is not function`我`var reader = new FileReader()`

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T08:37:52.143

意思是因为你`FileReader`没有创建一个函数，所以你用一个对象（它有一个名为 的函数`read`）替换了它。所有全局变量都是全局对象（`window`浏览器上的 , ）的属性，因此通过设置`window.FileReader = { ... };`，您将`FileReader`用您的对象替换全局函数。

您似乎正在尝试使用[File API](http://www.w3.org/TR/FileAPI/)。**在这种**情况下，您不想调用全局模块 object `FileReader`，因为这是由 File API 定义的。称它为对你更具体的东西（这里我用`Foo`一个明显无意义的例子）：

```
window.Foo = (function () {

    var read = function (file) {
        var reader = new FileReader();

        reader.onload = function (e) {
            console.log(e.target);
        };

        // reader.readAsDataURL(file);
    };

    return {
        read: read
    };
})();

// Usage:
Foo.read(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:54:07.840

到`window.FileReader`分配的时间，该函数`read`还没有被调用，因此`var reader = new FileReader();`没有被执行。

事实上，直到你调用它才会执行`FileReader.read()`。但那时函数`FileReader`内部的值`read`已经被你的`window.FileReader`.

`var reader = new FileReader();`移出`function`，使其更早执行将消除错误：

```
window.FileReader = (function () {
    var reader = new FileReader();

    var read = function (file) {
        reader.onload = function (e) {
            console.log(e.target);
        };

        // reader.readAsDataURL(file);
    };

    return {
        read: read
    };
})(); 
```

但是，我认为将变量（尤其是全局变量）命名为与系统 API 中的名称相同并不是一个好主意。所以我更喜欢 TJ Crowder 的方式：只需更改全局变量的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:44:15.003

当您编写此行代码时：

```
var reader = new FileReader(); 
```

确保在代码中定义 FileReader 函数，如下所示。

```
window.FileReader = function(){
    ...
}; 
```

在您的代码中，您只返回一个对象并将其分配给 window.FileReader，而不是一个函数，您的代码如下：</p>

```
window.FileReader = (function () { ... return {}; })(); 
```

希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:44:48.953

您已将 FileReader 定义为具有属性 read 的对象：`Object {read: function}` 您首先应将 FileReader 定义为构造函数，如下所示：

> FileReader = function () { var read = function (file) { var reader = new FileReader();
> 
> ```
>  reader.onload = function (e) {
>             console.log(e.target);
>         };
> 
>         // reader.readAsDataURL(file);
>     };
> 
>     return {
>         read: read
>     };
> }; 
> ```

然后你可以从中创建一个对象：

> var object = new FileReader();

# php - 在同一个网页上显示两个表的数据

> ID：15219132
> 
> 赞同：0
> 
> 时间：2013-03-05T08:35:03.010
> 
> 标签：php, codeigniter

我是codeigniter的新手。目前我正在做一个小项目作为练习，我试图在同一个网页上显示两个表的数据。我尝试`$this->db->join();` 在 codeigniter 中使用，但它对我不起作用。我想知道在同一个网页上显示两个表数据是否还有其他选项可以探索？

我还发布了我尝试过的加入方法 - 也许你可以告诉我我做错了什么？

**模型**

```
 $this->db->select('tblanswers.*,credentials.*');
    $this->db->from('tblanswers');
    $this->db->join('credentials', 'tblanswers.answerid = credentials.cid', 'left'); 
    $query = $this->db->get();
    return $query->result(); 
```

这个连接函数的问题是它只显示一个表而不显示另一个表。我用 `print_r($data['query']); die()`来检查它只返回 tblanswer 而不是两者。

**编辑**

表结构：

**证书**

```
+--------------+------+-------------+-------+-------+
| cid(PRIMARY) | name | second_name | phone | email |
+--------------+------+-------------+-------+-------+ 
```

**答案**

```
+-------------------+--------+------------+---------+---------+---------+
| answerid(PRIMARY) | userid | questionid | answerA | answerB | answerC |
+-------------------+--------+------------+---------+---------+---------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:42:06.397

好的，首先你的表**必须**有关系数据才能执行连接

```
return $this->db->select('tblanswers.*,credentials.*')
                      ->join('credentials cred', 'tblanswers.answerid = credentials.cid', 'LEFT')
                      ->get('tblanswers')
                      ->result_object() 
```

所以这将执行一个查询，从* *answerid 字段 = cid 字段的***凭证表中获取数据**

 *例如

```
 SELECT * FROM tblanswers
  JOIN credentials ON credentials.cid = tblanswers.answerid 
```

**编辑**

似乎您不需要为您想要的东西使用加入，您可以简单地去

```
 return $this->db->select('tblanswers.*,credentials.*')
                ->from('tblanswers, credentials')
                ->get()
                ->result_object(); 
```

因为看起来您在两者之间没有任何关系数据，但是例如，您可以通过以下方式获得与该 awnser 相关的所有问题

```
return $this->db->select('tblanswers.*,questions.*')
                      ->join('questions AS q', 'tblanswers.questionid = q.question_id', 'LEFT')
                      ->get('tblanswers')
                      ->result_object() 
```*

# java - 消息摘要哈希 MD5

> ID：15219135
> 
> 赞同：0
> 
> 时间：2013-03-05T08:35:17.767
> 
> 标签：java, spring, spring-security

我正在尝试获取字符串的 MD5 哈希`"password"`。

当我使用`MD5PasswordEncoder`Spring 框架中的类时，我得到了这个：

> `5f4dcc3b5aa765d61d8327deb882cf99`

但是当我使用`MessageDigest`带有 MD5 的 Java 类时，我得到了这个：

> `9577-525990-89101-4229-12539-34-72-126-49-103`

第一个是十六进制，另一个是十进制。为什么有区别？这是代码：

```
public static void main(String[] args)  {
    PasswordEncoder pEncoder = new Md5PasswordEncoder(); 
    System.out.println(pEncoder.encodePassword("password", null));

    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        md.update("password".getBytes("UTF-8"));
        byte [] digest = md.digest();
        StringBuffer sb = new StringBuffer();
        for (byte b : digest) {
            sb.append(b);
        }
        System.out.println(sb.toString());

    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:40:42.293

问题是您的打印功能。以下代码打印与 Spring 应用程序相同的值：

```
public static void main(String[] args) {

  try {
    MessageDigest md = MessageDigest.getInstance("MD5");
    md.update("password".getBytes("UTF-8"));
    byte[] digest = md.digest();
    System.out.println(DatatypeConverter.printHexBinary(digest));

  } catch (NoSuchAlgorithmException e) {
    e.printStackTrace();
  } catch (UnsupportedEncodingException e) {   
    e.printStackTrace();
  }
} 
```

印刷：

> `5F4DCC3B5AA765D61D8327DEB882CF99`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:47:25.163

尝试

```
 for (byte b : digest) {
        sb.append(String.format("%02x", b));
    } 
```

你会得到

```
5f4dcc3b5aa765d61d8327deb882cf99 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:50:30.330

问题在于将 Java MessageDigest 的输出转换为字符串的方式。

尝试

```
System.out.print(new String(org.springframework.security.crypto.codec.Hex.encode(digest))); 
```

将字节转换为十六进制。

# java - Java中用于导出csv文件的相对路径

> ID：15219141
> 
> 赞同：3
> 
> 时间：2013-03-05T08:35:31.773
> 
> 标签：java, file, path, relative-path

我在 Windows 系统上开发了一个 Java WebApp。这是一个分析程序，通过导出按钮将结果集导出到 Excel 的 csv 文件。

现在事实是：我已经硬编码了要导出到的文件的路径：

```
public String button1_action() {
   GenerateCSV  generateCSV = new GenerateCSV();

   Date zeitstempel = new Date();
   SimpleDateFormat simpleDateFormat = new SimpleDateFormat ("_dd.MM.yyyy_HH.mm.ss");

   generateCSV.generateCsvFile("h:/VR-Analyse-Tool_Excel Output" +simpleDateFormat.format(zeitstempel) +".csv", getSessionBean1().getExistingRightsList()); 

   return null;
} 
```

这在我的本地系统上运行良好。

现在我已经将`.war`文件部署在 Linux 系统上的 tomcat6 上。现在这条路已经行不通了。有人可以帮助我吗？我不明白如何解决这个问题。

该程序适用于我公司的其他用户，他们应该能够在服务器上的个人驱动器/空间/数量上导出 csv 文件。每个人在此服务器上都有自己的驱动器，驱动器号为 (h:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:46:10.820

代替

```
h:/VR-Analyse-Tool_Excel Output 
```

采用

```
/home/VR-Analyse-Tool_Excel Output 
```

创建一个

```
h:/home 
```

本地计算机上的目录，它应该在两种环境中都可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:54:02.080

部署时在 web.xml 中添加文件路径`Windows file(h:your_filepath) , Unix (home/your_filepath)`

**web.xml**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app>
  <context-param>
    <param-name>downloadFilePath</param-name>
    <param-value>h:your_filepath</param-value>
  </context-param>
.
.
.
.
</web-app> 
```

**Java 代码**

```
public String button1_action() {
   GenerateCSV  generateCSV = new GenerateCSV();
   String filepath =  getServletContext().getInitParameter("downloadFilePath");
   Date zeitstempel = new Date();
   SimpleDateFormat simpleDateFormat = new SimpleDateFormat ("_dd.MM.yyyy_HH.mm.ss");

   generateCSV.generateCsvFile(filepath  +simpleDateFormat.format(zeitstempel) +".csv", getSessionBean1().getExistingRightsList()); 

   return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:05:53.180

我强烈建议不要在相对路径中编写文件，因为这在不同的系统（OS）中会有不同的解释你想要的最后一件事是调试文件的创建位置

您可以选择以下任何一种方法

1) 在 .properties 文件中声明值并从 java 程序中读取值。这样当环境发生变化时，只需要编辑属性文件即可。所以需要重新编译

2）或者更好的是你可以拥有这个 Db 表并使用它。

3) 您可以在 Web.xml 中 delara 应用程序上下文变量并使用它

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
 <web-app>
   <context-param>
     <param-name>csv_file_path</param-name>
     <param-value>h:/your_file_path</param-value>
   </context-param>
 .
 .
 .
 .
</web-app> 
```

# java - Long 变量的空指针异常

> ID：15219153
> 
> 赞同：0
> 
> 时间：2013-03-05T08:36:01.153
> 
> 标签：java

我有以下代码

```
private Long projectNumber; // with getters and setters 
```

当我检查是否`projectNumber`为空时，我在 if 条件下得到空指针异常

```
if(selected.getProjectNumber()!=null){

// do something

} 
```

即使 Long 是一个包装类，这可能是什么原因。

如果我将 projectNumber 从 Long 更改为 String，它可以正常工作。

更新 1

```
private Project selected = new Project();

public Project getSelected() {
        return selected;
    }

    public void setSelected(Project selected) {
        this.selected = selected;
    } 
```

我通过以下方法在 JSF 的 ManagedBean 中获取选定的值

```
public void onRowSelect(SelectEvent event) {

} 
```

项目没有 getter 和 setter

```
public Long getProjectNo() {
            return projectNo;
        }

        public void setProjectNo(Long projectNo) {
            this.projectNo = projectNo;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:36:47.013

您遇到的问题是因为`selected`为空，`projectNumber`. 将检查更改为：

```
if(selected != null && selected.getProjectNumber()!=null){

// do something

} 
```

或者另外添加一个单独的检查`selected`以上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:39:54.850

如果您在这里获得 NPE：

```
if(selected.getProjectNumber()!=null){ 
```

而所有的都是`getProjectNumber()`is `return projectNumber`，这强烈表明**`selected`is`null`**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:37:08.347

从您发布的内容来看，问题似乎在于`selected`变量引用的对象是`null`. 您也必须检查：

```
if(selected !=null && selected.getProjectNumber()!=null){

    // do something

} 
```

**说明：**这样做，因为布尔 AND（和 OR）运算符仅评估左侧条件，如果它为假，而不触及右侧，您将不再得到 a `NullPointerExceptyion`。

**编辑**正如 OP 提到的那样，通过将变量更改为没有遇到问题，正如 0xCAFEBABE 的建议所暗示的那样，如果 getter 返回（或以某种方式在内部使用）一个简单的值而不是一个对象，`String`则可能会出现相同的错误，并且变量是：`long``Long``null`

```
/** error getter */
public long getProjectNumber() { 
    //this would trz to convert null, but what will it convert to? A NullPointerExecption...
    return projectNumber;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T08:38:59.407

问题是它`selected`是空的。检查它像：

```
if(selected != null && selected.getProjectNumber()!=null){

   // do something

} else {
   // here: selected = null OR projectNumber of selected is null
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T08:39:09.017

你检查是否`selected`是`null`

您可以执行以下操作

```
if(null != selected)
{
    if(null != selected.getProjectNumber())
    {
        // do something
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T08:39:12.883

您选择的对象显然为空，请尝试执行以下操作：

```
if ((selected != null) && (selected.getProjectNumber()!=null)){

// do something

} 
```

# apache2 - Apache 403 错误被禁止

> ID：15219157
> 
> 赞同：0
> 
> 时间：2013-03-05T08:36:17.230
> 
> 标签：apache2, clickonce, ubuntu-12.04

我在 Ubuntu 服务器中使用 Apache 来托管 ClickOnce 应用程序。在 httpd.config 文件中配置了虚拟目录，我还在 /My/Virtual/Directory 上添加了 .htaccess 文件，其中包含以下几行

```
AddType application/x-ms-application application
AddType application/x-ms-manifest manifest
AddType application/octet-stream deploy
AddType application/vnd.ms-xpsdocument xps
AddType application/xaml+xml xaml
AddType application/x-ms-xbap xbap
AddType application/x-silverlight-app xap 
```

但是当我尝试访问 /My/Virtual/Directory 时出现 403 错误。**“您无权访问此服务器**上的 /My/Virtual/Directory/publish.htm 。它第一次可以正常工作，但后来就没有了，有趣的是我仍然可以访问 /My/Virtual/ Directory/index.html 与 publish.htm 文件位于同一文件夹中。所以我想这与用户权限相关的问题无关。appache 文件夹中没有 httpd 文件，因此使用以下行创建了一个。

```
LoadModule alias_module modules/mod_alias.so

<IfModule alias_module>
    Alias /MyWWW /home/webserver/Desktop/ftp
</IfModule>

#Setting Derectory for /home/webserver/Desktop/ftp
<Directory "home/webserver/Desktop/ftp">
#Options FollowSymLinks
Options Indexes FollowSymLinks Includes ExecCGI
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:20:45.007

我已经通过在 vsfpdd.conf 文件中将 FTP 的权限更改为“022”来解决它。

# symfony - FOS UserBundle 访问控制不起作用

> ID：15219158
> 
> 赞同：0
> 
> 时间：2013-03-05T08:36:22.817
> 
> 标签：symfony, fosuserbundle, access-control

我在我的 symfony2 项目中安装了 FOS UserBundle。登录/注销有效，唯一的问题是，系统不会重定向/关闭我想要关闭的部分。整个站点只能由登录用户访问。然而我可以打电话给任何路线。

我在我的安全yml的访问控制部分填写了数据，但它不起作用。我可以调用 mydomain/de_CH/anything/i/want/ 并访问该内容。

这是我的security.yml：

```
security:
  providers:
    fos_userbundle:
      id: fos_user.user_provider.username_email

  encoders:
    FOS\UserBundle\Model\UserInterface: sha512

  firewalls:
    main:
      pattern: ^/
      form_login:
        provider: fos_userbundle
        login_path: fos_user_security_login 
        check_path: fos_user_security_check
        csrf_provider: form.csrf_provider
      logout:
        path:   fos_user_security_logout
      anonymous:    true

  access_control:
    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin/, role: ROLE_ADMIN }
    - { path: ^/my-admin/, role: ROLE_ADMIN }
    - { path: ^/$, role: ROLE_USER }
    #- { path: ^/$, role: ROLE_USER }

  role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:22:31.430

移除该`anonymous: true`部件并放入`/login`它自己的防火墙，以便用户可以登录。该`anonymous`部件允许匿名用户访问该防火墙。

```
firewalls:
    login_firewall:
        pattern:    ^/login$
        anonymous:  ~
    main:
        pattern: ^/
        form_login:
            # ...
        logout:
            path:   fos_user_security_logout 
```

**编辑：**由于我们拒绝匿名用户访问该页面，我们需要创建单独的防火墙，`/login`否则他们将无法登录。请参阅官方文档中的“避免常见陷阱”部分：http: [//symfony.com/ doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)以获取有关该主题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:19:55.663

改变

```
- { path: ^/$, role: ROLE_USER } 
```

至

```
 - { path: ^/.*, role: ROLE_USER } 
```

这是因为，第一个正则表达式告诉您允许`ROLE_USER`使用该模式进行路径`/`
因此，诸如此类`/foo` `/foo/bar`的模式不会从您的防火墙中捕获。

第二种模式覆盖后一种情况

# iphone - 按钮单击时未出现加载符号

> ID：15219159
> 
> 赞同：1
> 
> 时间：2013-03-05T08:36:28.340
> 
> 标签：iphone, xcode

```
-(IBAction)addtocontacts:(id)sender
{
    HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    HUD.labelText = NSLocalizedString(@"Saving_data", @"");

    //added my validation here
   [self performSelectorInBackground:@selector(insertDetails) withObject:nil];
}
-(void) insertDetails
{
  //save contact details in database
[HUD hide:YES];
    UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"" message:@"Contact account details added" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
[alertview show];
} 
```

我在点击时添加了加载符号。`SaveButton`我没有得到加载符号。如何让它出现，直到我收到警报消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:44:12.337

在最顶层添加 HUD。例如，如果您在视图顶部有 tableview。然后将其添加到 tableview 上。在我的情况下，我在 tableviews 上添加 HUD 并且它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:42:53.027

这是因为您立即将 HUD 隐藏在 insertDetails 中。

```
 -(IBAction)addtocontacts:(id)sender
    {
        HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
        HUD.labelText = NSLocalizedString(@"Saving_data", @"");

        //added my validation here
       [self performSelectorInBackground:@selector(insertDetails) withObject:nil];
    }

    -(void) insertDetails
    {
      //save contact details in database
   // [HUD hide:YES]; remove it
        UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"" message:@"Contact account details added" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [alertview show];
    } 
```

而是下载较新版本的 MBProgressHUD 并使用以下方法

```
- (IBAction)addtocontacts:(id)sender {
    // The hud will dispable all input on the view (use the higest view possible in the view hierarchy)
    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.view addSubview:HUD];

    // Regiser for HUD callbacks so we can remove it from the window at the right time
    HUD.delegate = self;

    // Show the HUD while the provided method executes in a new thread
    [HUD showWhileExecuting:@selector(myTask) onTarget:self withObject:nil animated:YES];
} 
```

并实现委托方法。

# MBProgressHUDDelegate 方法

```
- (void)hudWasHidden:(MBProgressHUD *)hud {
    // Remove HUD from screen when the HUD was hidded
    [HUD removeFromSuperview];
    [HUD release];
    HUD = nil;
} 
```

# c# - 为什么枚举类型不能是 System 命名空间中的整数类型的基础类型？

> ID：15219165
> 
> 赞同：1
> 
> 时间：2013-03-05T08:36:47.677
> 
> 标签：c#, enums

我最近做了很多 PInvoke 的东西，想要靠近 Windows API 头文件。

在创建下面的[枚举](http://msdn.microsoft.com/en-us/library/sbbt4032.aspx)时，您会收到此编译器错误：

```
Error   1   Type byte, sbyte, short, ushort, int, uint, long, or ulong expected 
```

为什么 C# 编译器不理解任何其他[基础类型](http://msdn.microsoft.com/en-us/library/sbbt4032.aspx#code-snippet-2)？
C# 编译器可以从 uint 转到 System.UInt32，为什么不反过来呢？

```
using System;
using System.Runtime.InteropServices;

using DWORD = System.UInt32;

namespace BeSharp.Win32
{
    [StructLayout(LayoutKind.Sequential)]
    internal class MOUSEINPUT
    {
        // ...
        MouseData mouseData; // DWORD
        // ...

        [Flags]
        internal enum MouseData : System.UInt32; // needs to be uint; you cannot do DWORD or System.UInt32 here
        {
            Nothing = 0x0000,
            XBUTTON1 = 0x0001,
            XBUTTON2 = 0x0002,
        }
        // ...
    }
} 
```

# c# - 打开 .exe 文件时，openFileDialog DialogResult 始终显示 NONE

> ID：15219167
> 
> 赞同：1
> 
> 时间：2013-03-05T08:36:51.770
> 
> 标签：c#, openfiledialog

我目前正在编写一个“快速启动程序”，它可以让您打开一个 .exe 文件并在您单击按钮时启动它们。为此，我使用了一个`openFileDialog`让用户打开所需的 .exe 文件。

此外，我从 .exe 中提取图标以在开始按钮上方显示它。

这使用户能够选择一个文件 (.exe) ，**openFileDialog的****DialogResult**显示**none**。即使我加载了正常且工作的.exe，它也永远不会显示**OK 。**

 ******这是我的代码。

```
private void button1_Click(object sender, EventArgs e)
    {
        openFileDialog1.ShowDialog();
        if (DialogResult == DialogResult.OK)
        {
            string path = openFileDialog1.FileName;
            ExtractIcon(path);
        }
    }

    private void ExtractIcon(string filePath)
    {
        Icon ico = Icon.ExtractAssociatedIcon(filePath);
            pictureBox1.Image = ico.ToBitmap();
    } 
```

我的代码有问题还是因为**DialogResult**？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T08:40:27.510

尝试像这样更改代码：

```
if (openFileDialog1.ShowDialog() == DialogResult.OK)
{
        string path = openFileDialog1.FileName;
        ExtractIcon(path);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T08:39:48.450

您需要将的返回值存储`ShowDialog()`在一个变量中，然后将其与`DialogResult.OK`

```
var result = openFileDialog1.ShowDialog();

if (result == DialogResult.OK){
  string path = openFileDialog1.FileName;
  ExtractIcon(path);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T08:40:23.107

什么是`DialogResult`变量？不应该是：

```
var result = openFileDialog1.ShowDialog();
if (result == DialogResult.OK)
{
    string path = openFileDialog1.FileName;
    ExtractIcon(path);
} 
```******

# sql - 仅当在给出结果之前对表进行选择时才运行 SQL 脚本。如果它没有给出结果，则不应运行 SQL 脚本

> ID：15219173
> 
> 赞同：0
> 
> 时间：2013-03-05T08:37:09.320
> 
> 标签：sql, oracle, command

我希望 SQL 脚本仅在表上的 SQL 命令选择给出结果时运行。

如果它没有给出结果，则不应运行 SQL 脚本。

这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:49:44.437

我可能会帮助：

```
IF ( select count(1) from  ( _your selection_ ) a ) > 0 THEN
_RUN your script_;
END IF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:14:39.967

这是一种方式：

```
DECLARE
type t1
IS
  TABLE OF hr.employees.first_name%type;
  t11 t1;
BEGIN
  SELECT e.first_name bulk collect
  INTO t11
  FROM hr.employees e
  WHERE E.EMPLOYEE_ID=999;
  IF(t11.count!      =0) THEN
    FOR i           IN 1..t11.count/*here you can write your own query */
    LOOP
      dbms_output.put_line(t11(i));
    END LOOP;
  ELSE
    dbms_output.put_line('oh..ho..no rows selected' );
  END IF;
END;
/ 
```

任何澄清请让我知道..

# c# - SMO 存储过程更改失败

> ID：15219178
> 
> 赞同：0
> 
> 时间：2013-03-05T08:37:19.890
> 
> 标签：c#, sql, sql-server, stored-procedures, smo

我正在尝试在 c# 中以编程方式更改存储过程中的参数。我遇到了 SMO 并一直在尝试使用它，但更改一直失败。这是我的代码：

```
//alter parameter data type in stored procedure if parameter is not  varchar
public static void AlterSPParamInfo (string SPName,string parameterName,string connectionStringName)
{
    SqlConnection vSqlConnection = CreateSqlConnectionStr(connectionStringName);
    using(vSqlConnection)
        {
            ServerConnection vConnection = new ServerConnection(vSqlConnection);
            Server vServer = new Server(vConnection);
            Database vDatabase = vServer.Databases["HrSys"];
            var vTables = vDatabase.Tables;
            StoredProcedure sp = vDatabase.StoredProcedures[SPName];
            if(sp != null)
            {
                StoredProcedureParameter spParameter = sp.Parameters[parameterName];
                if(spParameter!=null)
                {
                    if(!spParameter.DataType.Equals(DataType.VarChar(50)))
                    {
                        spParameter.DataType = DataType.VarChar(50);
                        sp.QuotedIdentifierStatus = true;
                        try
                        {
                            sp.Refresh();
                            sp.Alter( );
                        }
                        catch(SqlServerManagementException ex)
                        {
                            //other code
                        }
                    }
                }         
 } 
```

我在这里想念什么？还是我不能以这种方式更改存储过程的参数？我尝试在 google 或[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.storedprocedure.alter.aspx)上查找更多信息，但找不到任何解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:42:43.413

在许多论坛中大量挖掘后，我找到了解决方案： Set sp.TextMode = false; 然后成功执行了 alter 过程。 [StoredProcedure.TextMode 属性](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.storedprocedure.textmode.aspx)

```
//alter parameter data type in stored procedure if parameter is not  varchar
public static void AlterSPParamInfo (string SPName,string parameterName,string connectionStringName)
{
    SqlConnection vSqlConnection = CreateSqlConnectionStr(connectionStringName);
    using(vSqlConnection)
        {
            ServerConnection vConnection = new ServerConnection(vSqlConnection);
            Server vServer = new Server(vConnection);
            Database vDatabase = vServer.Databases["HrSys"];
            var vTables = vDatabase.Tables;
            StoredProcedure sp = vDatabase.StoredProcedures[SPName];
            if(sp != null)
            {
                StoredProcedureParameter spParameter = sp.Parameters[parameterName];
                if(spParameter!=null)
                {
                    if(!spParameter.DataType.Equals(DataType.VarChar(50)))
                    {
                        spParameter.DataType = DataType.VarChar(50);
                        sp.QuotedIdentifierStatus = true;
                        try
                        {
                            sp.TextMode = false;
                            sp.Alter( );
                        }
                        catch(SqlServerManagementException ex)
                        {
                            //other code
                        }
                    }
                }         
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:03:13.100

您是否可能没有为连接字符串中使用的用户 ID 授予存储过程的 Alter 权限？

编辑：这将是一个数据库端配置。

# java - java反编译器为什么不保存注解

> ID：15219183
> 
> 赞同：5
> 
> 时间：2013-03-05T08:37:31.240
> 
> 标签：java, decompiling, decompiler

为什么反编译的 java 文件中没有任何注释？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T08:39:13.273

某些注释的保留设置仅为源代码。

请参阅[注解保留政策](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/annotation/RetentionPolicy.html)：

> 注释保留策略。这种枚举类型的常量描述了保留注释的各种策略。它们与 Retention 元注释类型结合使用，以指定注释要保留多长时间..
> 
> .. *SOURCE*注解将被编译器丢弃。

# c# - NAudio 在 WaveViewer 中显示两个通道

> ID：15219188
> 
> 赞同：1
> 
> 时间：2013-03-05T08:37:41.127
> 
> 标签：c#, naudio, waveform, channels

我正在使用 NAudio 的 WaveViewer UI 控件来显示波形

```
this.customWaveViewer1.WaveStream = new NAudio.Wave.WaveFileReader(filename); 
```

我想知道如何在它自己的 WaveViewer 中显示每个通道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:57:56.043

WaveViewer 是一个非常简单的如何显示波形的示例。如果你想要立体声，我建议复制它的源代码，并修改 OnPaint 方法以绘制两条线，一条用于左声道，一条用于右声道。

# java - karaf 中的 Spring Jdbc 声明式事务管理

> ID：15219192
> 
> 赞同：5
> 
> 时间：2013-03-05T08:37:56.460
> 
> 标签：java, spring, osgi, spring-transactions, apache-karaf

我有项目模块，它正在构建为 osgi 包（spring-dm）。捆绑包被部署在 karaf 容器中。我有数据库交互类，它们是使用 spring-jdbc 开发的。

我无法设置声明性交易，有人可以分享经验/指向我可以获得更多信息的资源。

**带版本的框架**

卡拉夫：2.2.9

Spring 3.1.2.RELEASE

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:19:23.623

有很多网站解释了声明性事务，这些可能会对您有所帮助。

[OSGi 中的 Spring JDBC](http://www.aniketos.eu/content/spring-jdbc-osgi)

[Spring 声明式事务示例](http://www.javacodegeeks.com/2011/09/spring-declarative-transactions-example.html)

[Spring 声明式事务](http://simplespringtutorial.com/springDeclarativeTransactions.html)

[Spring 声明式事务管理](http://www.tutorialspoint.com/spring/declarative_management.htm)

# c# - 如何在用户在 C# 组合框中键入拼写时创建组合框以自动填充

> ID：15219195
> 
> 赞同：6
> 
> 时间：2013-03-05T08:38:17.680
> 
> 标签：c#, winforms, combobox

我的朋友们，我的 windows 窗体中有一个组合框，我可以用数据库中的数据填充它，但是当用户在组合框内输入字母时，我无法填充组合框，例如当用户输入字母“R " 在组合框和组合框旁边必须下拉并用字母“R”显示所有可能

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:45:34.173

1.  设置[`yourComboBox.AutoCompleteSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletesource.aspx)为`AutoCompleteSource.ListItems;`（如果您`yourComboBox.Items`已经从数据库中填写）
2.  设置[`yourComboBox.AutoCompleteMode`](http://msdn.microsoft.com/en-us/library/system.windows.forms.autocompletemode.aspx)为`SuggestAppend`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:44:50.420

您必须与组合框上的 KeyUp 事件相关联，并使用 comboBox.Text 过滤 comboBox.Items 集合以仅显示包含键入的字符。您还需要强制组合框窗口下拉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:47:02.790

希望这可以帮助你：

```
private void comboBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    char ch = e.KeyChar;
    string strToFind;

    // if first char
    if (lastChar == 0)
        strToFind = ch.ToString();
    else
        strToFind = lastChar.ToString() + ch;

    // set first char
    lastChar = ch;

    // find first item that exactly like strToFind
    int idx = comboBox1.FindStringExact(strToFind);

    // if not found, find first item that start with strToFind
    if (idx == -1) idx = comboBox1.FindString(strToFind);

    if (idx == -1) return;

    comboBox1.SelectedIndex = idx;

    e.Handled = true;
}

void comboBox1_GotFocus(object sender, EventArgs e)
{
    // remove last char before select new item
    lastChar = (char) 0;
} 
```

从[这里](http://social.msdn.microsoft.com/Forums/en-AU/csharpgeneral/thread/c02166d7-ebe7-4385-8beb-06ac10fa677a)

# matlab - 循环文件名

> ID：15219198
> 
> 赞同：1
> 
> 时间：2013-03-05T08:38:45.880
> 
> 标签：matlab

我有一些相同维度的数据文件，我在 MATLAB 中有一个程序，用于分析单个文件中的数据。我想一个接一个地合并文件中的所有数据，以便我可以一起分析它们。我如何编写一个循环以遍历所有文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:43:47.470

```
fls = dir( fullfile( folderName, '*.mat' ) );
data = cell( 1, numel(fls) );
for ii = 1:numel(fls)
    data{ii} = load( fullfile( folderName, fls(ii).name ) );
end 
```

`data`现在拥有您的所有数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:43:35.303

您可以通过[dir 函数](http://www.mathworks.com/help/matlab/ref/dir.html)获取文件列表，并且循环很容易。

# java - Ajax 调用在 Android Emulator Webview 中不起作用

> ID：15219199
> 
> 赞同：1
> 
> 时间：2013-03-05T08:38:47.353
> 
> 标签：java, android

我的 Android 应用程序中有一个 Webview。

我有一个带有图像的滚动视图，当您单击图像时，我将页面加载到 div 中。

我已经在浏览器中测试过它并且它可以工作，但是当我在模拟器中运行它时它不起作用？

```
<a href="javascript:ajaxpage('file:///android_asset/preview/pure-white-kitchen.html', 'rightcolumn');"></a>

  <script type="text/javascript">

var loadedobjects=""
var rootdomain="http://"+window.location.hostname

function ajaxpage(url, containerid){
var page_request = false
if (window.XMLHttpRequest) // if Mozilla, Safari etc
page_request = new XMLHttpRequest()
else if (window.ActiveXObject){ // if IE
try {
page_request = new ActiveXObject("Msxml2.XMLHTTP")
} 
catch (e){
try{
page_request = new ActiveXObject("Microsoft.XMLHTTP")
}
catch (e){}
}
}
else
return false
page_request.onreadystatechange=function(){
loadpage(page_request, containerid)
}
page_request.open('GET', url, true)
page_request.send(null)
}

function loadpage(page_request, containerid){
if (page_request.readyState == 4 && (page_request.status==200 || window.location.href.indexOf("http")==-1))
document.getElementById(containerid).innerHTML=page_request.responseText
}

function loadobjs(){
if (!document.getElementById)
return
for (i=0; i<arguments.length; i++){
var file=arguments[i]
var fileref=""
if (loadedobjects.indexOf(file)==-1){ //Check to see if this object has not already been added to page before proceeding
if (file.indexOf(".js")!=-1){ //If object is a js file
fileref=document.createElement('script')
fileref.setAttribute("type","text/javascript");
fileref.setAttribute("src", file);
}
else if (file.indexOf(".css")!=-1){ //If object is a css file
fileref=document.createElement("link")
fileref.setAttribute("rel", "stylesheet");
fileref.setAttribute("type", "text/css");
fileref.setAttribute("href", file);
}
}
if (fileref!=""){
document.getElementsByTagName("head").item(0).appendChild(fileref)
loadedobjects+=file+" " //Remember this object as being already added to page
}
}
}
</script> 
```

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:28:37.023

打开我的应用程序的备份并在模拟器上对其进行测试后，它起作用了。

我的应用程序中的文件一定已损坏。

谢谢各位的建议。

# android - Android FTP，无法连接，需要关于导入库的建议

> ID：15219203
> 
> 赞同：0
> 
> 时间：2013-03-05T08:38:59.927
> 
> 标签：android, ftp, ftp-client

对不起大家，我一整天都在添加FTP，但没有成功......

以下是我如何将 FTP 添加到我的 android 代码的步骤。

**来自[laval@work](http://lavalatwork.blogspot.tw/2010/09/using-apache-commons-ftp-library-in.html)**的方法 A****

 **1) [http://commons.apache.org/proper/commons-net//download_net.cgi](http://commons.apache.org/proper/commons-net//download_net.cgi)

从链接中，我下载了一个 zip 文件夹：Commons Net 3.2（需要 Java 1.5 或更高版本）>> **Source** >>commons-net-3.2-src.zip

2）解压文件夹到我的桌面，commons-net-3.2-src

3) 将文件夹 src/main/java/org 复制到我的代码的 src 文件夹中

4）允许在清单中使用权限“INTERNET”

5）将以下代码添加到 src/MainActivity （我的应用程序的源代码）

6）ftp代码：来自[android社区](http://androiddev.orkitra.com/?p=28)

```
public boolean ftpConnect(String host, String username, String password,
        int port) {
    try {
        ftp = new FTPClient();
        // connecting to the host
        ftp.connect(host, port);

        // now check the reply code, if positive mean connection success
        if (FTPReply.isPositiveCompletion(ftp.getReplyCode())) {
            // login using username & password
            Log.d(TAG, "connection success" + host);
            boolean status = ftp.login(username, password);

            ftp.setFileType(FTP.BINARY_FILE_TYPE);
            ftp.enterLocalPassiveMode();

            return status;
        }
    } catch (Exception e) {
        Log.e(TAG, "Error: could not connect to host "
                + e.getStackTrace().toString() + e.getMessage());
    }

    return false;
} 
```

7) 在 OnCreate 中，添加

```
ftpConnect("192.168.1.71", "user", "password", 21); 
```

**方法 B**从[这里](http://androiddevblog.blogspot.hk/2010/08/android-ftp-client.html)

1) [http://commons.apache.org/proper/commons-net//download_net.cgi](http://commons.apache.org/proper/commons-net//download_net.cgi)

从链接中，下载了一个 zip 文件夹：Commons Net 3.2（需要 Java 1.5 或更高版本）>> **Binaries** >>commons-net-3.2-bin.zip

2）解压文件夹到我的桌面，commons-net-3.2-bin

3）将两个java文件commons-net-3.2和commons-net-3.2-sources复制到android app的libs文件中

4) 打开应用程序的属性对话框，导航到“Java Build Path”->“Libraries”并添加对两个 jar 的引用。导航到“Java Build Path”->“Order and Export”并选择导出这两个jar。

5) 同方法 A，步骤 4 - 7

但是，我仍然无法连接到 FTP 服务器.... =[=[=[=[ 因为 LogCat 仍然显示错误消息“错误：无法连接到主机 [Ljava.lang.StackTraceElement;@420c3228null”

我还在我的选项卡上下载了一个 FTP 应用程序 (ftpcafe)，并证明用户名和位置设置正常...

=[请，有人可以帮忙吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:35:10.470

试试这个代码。

```
SimpleFTP ftp = new SimpleFTP();

         try
         {
            // Connect to an FTP server on port 21.

            ftp.connect("host", 21, "username", "password");

            // Set binary mode.
            ftp.bin();

            // Change to a new working directory on the FTP server.

            ftp.cwd("/httpdocs/yourdestinationfolderinftp");

            // Upload some files.
            ftp.stor(new File("/mnt/sdcard/ftp.jpg"));              

            // Quit from the FTP server.
            ftp.disconnect();

         }
         catch (Exception e) {
            // TODO: handle exception
             e.printStackTrace();
        }

    } 
```**

# android - 使用 Base 适配器的自定义 Listview 在 Android 中不能快速滚动

> ID：15219204
> 
> 赞同：0
> 
> 时间：2013-03-05T08:39:04.050
> 
> 标签：android, listview

嗨，我正在使用具有自定义列表视图的 android 应用程序。listview 中的项目大约 3000。我的问题是在滚动加载项目后会导致 outOfMemory 错误。

我正在使用基本适配器，每个项目都有一个复选框和四个文本视图。

这是我的代码。请让我知道解决方案。

```
public class GuestListAdapter extends BaseAdapter implements OnClickListener {
    private String strExe;
    AlertDialog.Builder builder;
    String sId;
    String sCheckIn;
    String strCheckInResponse;

    Context context;
    private ArrayList<String> arrayListId;
    private ArrayList<String> arrayListFirstName;
    private ArrayList<String> arrayListLastName;
    private ArrayList<String> arrayListGuests;
    private ArrayList<String> arrayCustomOne;
    private ArrayList<String> arTempId;
    public static ArrayList<Boolean> chickinlist;

    public static ArrayList<Integer> arrCheckedItems;
    public static ArrayList<Integer> arrUnCheckedItems;
    Button btnInfo;
    private SQLiteAdapter mySqliteAdapter;
    private GuestListScreen myGuestList;
    private RelativeLayout views;
    private String strAlertValue;

    // private AlertDialog alertDialog = null;

    private ArrayList<Boolean> checks = new ArrayList<Boolean>();

    public GuestListAdapter(Context mcontext, ArrayList<String> arrListid,
            ArrayList<String> arrListFN, ArrayList<String> arrListLN,
            ArrayList<String> arrListGuest, ArrayList<String> arrTiketID,
            ArrayList<String> arrCustOne, ArrayList<Boolean> chicklist) {

        clearAdapter();

        arrayListId = new ArrayList<String>();
        arrayListFirstName = new ArrayList<String>();
        arrayListLastName = new ArrayList<String>();
        arrayListGuests = new ArrayList<String>();
        arrayCustomOne = new ArrayList<String>();
        arTempId = new ArrayList<String>();
        chickinlist = new ArrayList<Boolean>();
        arrCheckedItems = new ArrayList<Integer>();
        arrUnCheckedItems = new ArrayList<Integer>();

        arrayListId = arrListid;
        arrayListFirstName = arrListFN;
        arrayListLastName = arrListLN;
        arrayListGuests = arrListGuest;
        arrayCustomOne = arrCustOne;
        arTempId = arrTiketID;
        chickinlist = chicklist;

        context = mcontext;
        mySqliteAdapter = new SQLiteAdapter(context);

        for (int i = 0; i < arrayListFirstName.size(); i++) {
            checks.add(i, false);
        }
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub

        return arrayListFirstName.size();

    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub

        return arrayListFirstName.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(final int position, View view, ViewGroup parent) {

        final int pos = position;
        views = null;
        LayoutInflater layoutInflator = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        views = (RelativeLayout) layoutInflator.inflate(
                R.layout.guest_list_item, null);

        final CheckBox chk = (CheckBox) views.getChildAt(0);
        // Log.d("", "CheckBox Pos "+position);
        chk.setId(position);

        TextView txtView = (TextView) views.getChildAt(1);

        TextView txtView2 = (TextView) views.getChildAt(2);
        TextView txtView3 = (TextView) views.getChildAt(3);

        final TextView txtView4 = (TextView) views.getChildAt(4);
        TextView txtView5 = (TextView) views.getChildAt(6);
        txtView5.setId(position);

        // Log.d("", "Button Pos "+position);
        txtView4.setId(position);

        txtView4.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(context, InfoScreen.class);
                intent.putExtra("IDVALUE", arTempId.get(txtView4.getId()));
                intent.putExtra("IDVALUE", arrayListId.get(position));

                intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                context.startActivity(intent);

            }
        });

        for (int dd = 0; dd < arrayListFirstName.size(); dd++) {
            if (position == dd) {
                // Log.d("", "Passsing arr size " + chickinlist.size());
                Boolean result = chickinlist.get(position);
                // Log.d("", "After " + result);
                if (result == true) {
                    chk.setChecked(true);
                    arrCheckedItems.add(position);
                    views.setBackgroundResource(R.drawable.list_item_checked);

                } else {
                    chk.setChecked(false);
                    arrUnCheckedItems.add(position);
                    views.setBackgroundResource(R.drawable.list_item_unchecked);

                }

                txtView.setText(arrayListFirstName.get(position));
                txtView2.setText(arrayListLastName.get(position));
                txtView3.setText("(" + arrayListGuests.get(position) + ")");
                if (arrayCustomOne.get(position).equalsIgnoreCase("0")
                        || arrayCustomOne.get(position).equalsIgnoreCase(null)
                        || arrayCustomOne.get(position).equalsIgnoreCase(
                                "(null)")) {
                    txtView5.setText("");
                } else {
                    txtView5.setText(arrayCustomOne.get(position));
                }

            }

        }

        chk.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                mySqliteAdapter.openToWrite();

                sId = arrayListId.get(chk.getId());
                // Log.d("Adapter",
                // "Checked Temp Id "+arTempId.get(chk.getId()));

                if (isChecked) {

                    chk.setChecked(true);
                    arrCheckedItems.add(position);
                    strAlertValue = "1";
                    sCheckIn = "1";
                    strExe = "update ticket_details set checkin_status=1 where tempid="
                            + arTempId.get(chk.getId());
                    mySqliteAdapter.executeCheckQurey(strExe);
                    if (Util.getInstance(context).isTabletDevice()) {
                        buttonView
                                .setBackgroundResource(R.drawable.tablet_list_item_check);
                        Log.e("Tablet", "Tablet Checked ");
                    } else {
                        buttonView
                                .setBackgroundResource(R.drawable.list_item_checked);
                        Log.e("Device", "Device Checked ");
                    }

                    new CheckInUpdate().execute();
                    AlertDialog.Builder builder = new AlertDialog.Builder(
                            context);
                    builder.create();
                    builder.setMessage(arrayListFirstName.get(chk.getId())
                            + " " + arrayListLastName.get(chk.getId())
                            + " has been checked in.");
                    builder.setPositiveButton("Ok",
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {

                                    Intent intentNavGuestList = new Intent(
                                            context, GuestListScreen.class);
                                    intentNavGuestList
                                            .addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                                    context.startActivity(intentNavGuestList);

                                    dialog.dismiss();

                                }

                            }).show();

                    // Log.d("", "ID = " + buttonView.getId());

                }
                if (!isChecked) {

                    sCheckIn = "0";
                    strAlertValue = "0";

                    strExe = "update ticket_details set checkin_status=0 where tempid="
                            + arTempId.get(chk.getId());

                    mySqliteAdapter.executeCheckQurey(strExe);

                    if (Util.getInstance(context).isTabletDevice()) {
                        buttonView
                                .setBackgroundResource(R.drawable.tablet_list_item_uncheck);
                        Log.e("Tablet", "Tablet UnChecked ");
                    } else {
                        buttonView
                                .setBackgroundResource(R.drawable.list_item_unchecked);
                        Log.e("Device", "Device UnChecked ");
                    }
                    new CheckInUpdate().execute();

                    Intent intentNavGuestList = new Intent(context,
                            GuestListScreen.class);
                    intentNavGuestList
                            .addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                    context.startActivity(intentNavGuestList);

                }

            }
        });

        return views;

    }

    @Override
    public void notifyDataSetChanged() {
        // TODO Auto-generated method stub

        super.notifyDataSetChanged();
    }

    @Override
    public void onClick(View view) {
        // TODO Auto-generated method stub
        Integer index = (Integer) view.getTag();
        boolean state = checks.get(index.intValue());

        checks.set(index.intValue(), !state);
    }

    public void clearAdapter() {
        if (arrayListFirstName != null) {

            arrayListFirstName.clear();
            arrayListId.clear();
            arrayListId = null;
            arrayListFirstName = null;
            arrayListLastName.clear();
            arrayListLastName = null;
            arrayListGuests.clear();
            arrayListGuests = null;
            arrayCustomOne.clear();
            arrayCustomOne = null;
            arTempId.clear();
            arTempId = null;
            chickinlist.clear();
            chickinlist = null;
            arrCheckedItems.clear();
            arrCheckedItems = null;
            arrUnCheckedItems.clear();
            arrUnCheckedItems = null;
        }

    }

} 
```

我也尝试过使用 View Holder，但加载速度仍然很慢。请告诉解决方案如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:46:28.360

1.  你需要重用`view`参数`View getView(final int position, Vie view, ViewGroup parent)`，如果它不为空，那么你不需要再次膨胀。
2.  使用 ViewHolder 模式；
3.  `loop for (int dd = 0; dd < arrayListFirstName.size(); dd++)`从 getView中移除；
4.  尝试简化列表项的布局；
5.  似乎`arrayListFirstName.size()`可以简化（例如使用一些变量来避免`size()`调用）
6.  [进行分析](http://developer.android.com/tools/debugging/debugging-tracing.html)以确切地知道什么是减速你滚动（这可能就足够了 profike only `getView()`）

此外，请查看[来自 Google I/O](http://www.youtube.com/watch?v=wDBM6wVEO70)的此视频，了解有关如何以正确方式制作 ListViews 的更多详细信息。

# python - Python扩展矩阵

> ID：15219212
> 
> 赞同：0
> 
> 时间：2013-03-05T08:39:25.407
> 
> 标签：python

我正在用 python 编写一个程序，我存储的大部分数据是这样的矩阵：

```
users = {
    'user1': {'name':'Jack Renshaw', 'password':'randompass'}
} 
```

我如何在其中添加一行，例如使用标准列表

编辑：

我实际上想在矩阵中附加数据，创建一个新集。我的问题措辞不佳。我想存储永久数据，以便在应用程序关闭时可以检索它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:41:48.267

你所拥有的是一个嵌套[字典](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)。请注意，它没有顺序，它只是从键到值的映射。

您只需将值分配给新键：

```
users['user1']['age'] = 21
users['user2'] = {'name': 'John Doe', 'age': 30, 'password': 'qwerty'} 
```

要将数据保存到文件中，您可以使用[`pickle`](http://docs.python.org/2/library/pickle.html)：

```
import pickle
with open('data.p', 'wb') as out:
    pickle.dump(users, out) 
```

然后加载它

```
with open('data.p', 'rb') as data:
    users = pickle.load(data) 
```

# java - 8个带递归的非攻击皇后算法

> ID：15219216
> 
> 赞同：4
> 
> 时间：2013-03-05T08:39:48.927
> 
> 标签：java, recursion, n-queens

我在编写 8 个皇后问题时遇到了麻烦。我编写了一个类来帮助我解决它，但由于某种原因，我做错了。我有点明白应该发生什么。

此外，我们必须使用递归来解决它，但我不知道如何使用我读过的回溯，所以我只是在检查位置是否合法的方法中使用它。

我的板是`String [] [] board = { { "O", "O"...`等，有 8 行和 8 列。如果我在概念上遇到任何错误或犯了严重的 Java 错误，请这样说：D 谢谢！

```
public void solve () {
    int Queens = NUM_Queens - 1;
    while (Queens > 0) {
        for (int col = 0; col < 8; col++) {
            int row = -1;
            boolean c = false;
            while (c  = false && row < 8) {
                row ++;
                c = checkPos (row, col);
            }
            if (c == true) {
                board[row][col] = "Q";
                Queens--;
            }
            else 
                System.out.println("Error");
        }
    }
    printBoard ();
}

// printing the board
public void printBoard () {
    String ret = "";
    for (int i = 0; i < 8; i++) {
        for (int a = 0; a < 8; a++)
            ret += (board[i][a] + ", ");
        ret += ("\n");
    }
    System.out.print (ret);
}

// checking if a position is a legitimate location to put a Queen
public boolean checkPos (int y, int x) {
    boolean r = true, d = true, u = true, co = true;
    r = checkPosR (y, 0);
    co = checkPosC (0, x);
    int col = x;
    int row = y;
    while (row != 0 && col != 0 ) { //setting up to check diagonally downwards
        row--;
        col--;
    }
    d = checkPosDD (row, col);
    col = x;
    row = y;
    while (row != 7 && col != 0 ) { //setting up to check diagonally upwards
        row++;
        col--;
    }
    d = checkPosDU (row, col);
    if (r = true && d = true && u = true && co = true)
        return true;
    else
        return false;
}

// checking the row
public boolean checkPosR (int y, int x) {
    if (board[y][x].contentEquals("Q"))
            return false;
    else if (board[y][x].contentEquals("O") && x == 7)
        return true;
    else //if (board[y][x].contentEquals("O"))  
        return checkPosR (y, x+1);
}

// checking the column
public boolean checkPosC (int y, int x) {
    if (board[y][x].contentEquals("Q"))
            return false;
    else if (board[y][x].contentEquals("O") && y == 7)
        return true;
    else //if (board[y][x].contentEquals("O"))  
        return checkPosR (y+1, x);
}

// checking the diagonals from top left to bottom right
public boolean checkPosDD (int y, int x) {
    if (board[y][x].contentEquals("Q"))
        return false;
    else if (board[y][x].contentEquals("O") && (x == 7 || y == 7))
        return true;
    else //if (board[y][x].contentEquals("O"))  
        return checkPosR (y+1, x+1);
}

 // checking the diagonals from bottom left to up right
public boolean checkPosDU (int y, int x) {
    if (board[y][x].contentEquals("Q"))
        return false;
    else if (board[y][x].contentEquals("O") && (x == 7 || y == 0))
        return true;
    else //if (board[y][x].contentEquals("O"))  
        return checkPosR (y-1, x+1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:55:52.433

因为这是作业，解决方案，但不是代码。

尝试编写一个只处理需要在单个列上发生的事情的方法；这是你应该使用递归的地方。通过检查是否存在解决方案来回溯，如果不存在，则撤消您的最后更改（即更改女王位置）并重试。如果只关注问题的一部分（一栏），这比同时考虑所有栏要容易得多。

正如 Quetzalcoatl 指出的那样，您`false`在第一个循环中分配给您的变量。你可能不想这样做。您应该始终在编译器中启用所有警告（使用 -Xlint 运行 javac）并修复它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T11:33:30.587

您正在尝试某种蛮力，但是，正如您已经提到的，您没有递归。您的程序试图将皇后放在第一个可能的位置。但最终没有找到解决方案。因此，您的第一个假设（您的第一个皇后的位置）是无效的。你必须**回到**这个状态。并且必须假设您的 checkPos(x,y) 是假而不是真。

现在一些提示：

1.  如前所述，NPE`int[N] queens`是更合适的表示。
2.  sum(queens) 必须为 0+1+2+3+4+5+6+7=28，因为位置必须是唯一的。
3.  你可以检查整个情况，而不是只检查新皇后的位置。如果对于所有 (i,j) \in N^2 with queen(i) = j, 不存在 (k,l) != (i,j) with abs(ki) == abs(lj) 是有效的

# iphone - 如何知道 UIkeyboard 是否出现在 iOS 中？

> ID：15219217
> 
> 赞同：5
> 
> 时间：2013-03-05T08:39:53.793
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uikeyboard

如何`UIKeyboard`在我的应用程序中找到是否打开？

我不想使用任何委托方法`UITextField`。

请提出任何解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:47:19.340

测试这个：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T08:52:23.213

[来自官方文档。](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html)

使用键盘通知检查状态`UIKeyBoard`。

**键盘通知：**

当系统显示或隐藏键盘时，它会发布几个键盘通知。这些通知包含有关键盘的信息，包括其大小，您可以将其用于涉及移动视图的计算。注册这些通知是获取有关键盘的某些类型信息的唯一方法。系统为键盘相关事件提供以下通知：

```
UIKeyboardWillShowNotification
UIKeyboardDidShowNotification
UIKeyboardWillHideNotification
UIKeyboardDidHideNotification 
```

# c# - 如何在 c# 中制作用户定义的函数，例如 (int).function()？

> ID：15219223
> 
> 赞同：3
> 
> 时间：2013-03-05T08:40:09.070
> 
> 标签：c#

在 C# 中，当我将一个 int 值括在括号中并键入点时，我会得到一个可以对该 int 值执行的函数列表

```
string a = (12).ToString(); 
```

我的问题是，**我们如何定义这样的自定义函数？**例如，我想定义一个可以像这样工作的函数 toDateTime

```
DateTime dt = ("12/12/12").toDateTime(); 
```

我完全理解这也可以通过正常方式完成

```
DateTime dt = toDateTime("12/12/12"); 
```

我只是好奇它是如何通过另一种方式完成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T08:42:31.667

您可以创建[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

也许是这样的：

```
public static class MyExtensions
{
     public static DateTime ToDateTime(this String str)
     {
         // return something
     }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T08:42:57.313

您所描述的是[扩展方法](http://msdn.microsoft.com/en-gb/library/vstudio/bb383977.aspx)。

这些是 IDE (Visual Studio) 使它们看起来像是扩展类型的一部分的静态类和方法。

请注意，无需将类型括在括号中：

```
string a = 12.ToString(); // not an extension method - it is defined on Object 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T08:42:57.500

你不能：这些基本类型的函数，以及`ToString`在 Object 中定义的函数，都是由框架提供的。[但是，您可以通过使用扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)来获得（或多或少）相同的结果。

扩展方法是静态类中的静态函数，IDE (VS) 和编译器将其视为由第一个参数（标记为`this`）定义的类的成员函数。它们实际上与添加成员函数不同：它们的分辨率和优先级不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T08:43:53.413

您可以使用扩展方法

```
public static DateTime ToDateTime(this string datestring)
{
    return DateTime.Parse(datestring);
} 
```

扩展方法可以打包在一个`static class`

例子 ：

```
static class Program
{
    public static DateTime ToDateTime(this string datestring)
    {
        return DateTime.Parse(datestring);
    }
    static void Main(string[] args)
    {
        DateTime date = "12/12/12".ToDateTime();

    }
} 
```

# c++ - LNK概率。使用 /clr 包装 MFC 应用程序

> ID：15219229
> 
> 赞同：0
> 
> 时间：2013-03-05T08:40:30.363
> 
> 标签：c++, .net, mfc, clr

我在编写包装程序以在 .Net 客户端程序（C#）中使用供应商的库时遇到问题。供应商提供的是基于发布和调试构建的 C++ 头文件和 MFC 静态库文件 (.lib)。问题是，当我构建包装程序时，Visual Studio 2012 会像这样吐出 LNK 错误：

```
error LNK2001: unresolved external symbol ___argc  nafxcwd.lib(appcore.obj)
error LNK2001: unresolved external symbol ___argv  nafxcwd.lib(appcore.obj) 
```

我使用选项设置构建属性`/clr`，
将运行时库设置为`Multi-threaded debug DLL (/MDd)`，
使用 MFC 设置为`MFC in shared DLL`，
忽略库（nafxcwd.lib;msvcrtd.lib;msvcmrtd.lib;libc.lib;libcmt.lib;msvcrt.lib;libcd.lib;libcmtd .lib，[请参阅此](http://msdn.microsoft.com/en-us/library/6wtdswk0%28v=vs.110%29.aspx)），添加依赖项（nafxcwd.lib；msvcrtd.lib；msvcmrtd.lib；（供应商的库），用于 CRT、MFC 库顺序）。

我错过了什么？我不知道我描述的不够。如果有什么不明确的地方，请问我。提前致谢！

附言。我对 C++ 很陌生（甚至是 Visual Studio ..）。我更熟悉Java。

# c++ - 分期付款 - 浮动错误 C2296

> ID：15219236
> 
> 赞同：2
> 
> 时间：2013-03-05T08:40:51.063
> 
> 标签：c++

我有这个功能：

```
 float ObliczRate(float fKwotaKredytu, float fOprocentowanie, int iIloscRat)
{
    /*
    Rata = K * y^n * (y-1) / (y^n-1);

    y = 1 + (r / 12)
    */

    float fRata, float fY;

    fY = 1 + (fOprocentowanie / 12); // obliczanie stałej kredytu
    fRata = fKwotaKredytu * fY^iIloscRat * (fY - 1) / (fY^iIloscRat - 1); // obliczanie raty stałej ze wzoru

    return fRata;
} 
```

而且我有错误：“错误C2296：'^'：非法，左操作数的类型为'float'”仅在“（fY ^ iIloscRat - 1）”上。这有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:43:31.077

这是因为*不是*`^`指数运算符，而是按位异或运算符。你想要这个功能。*[`std::pow`](http://en.cppreference.com/w/cpp/numeric/math/pow)*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:43:39.643

在 C++ 中，运算符`^`的含义是按位异或运算符，而不是幂运算。您将不得不使用此处标题`pow`中定义的函数。`cmath`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T08:43:50.053

在 C++ 中，您必须使用函数`pow`来执行幂运算。

签名如下所示：

```
float pow( float base, float exp ); 
```

你可以在[这里找到](http://en.cppreference.com/w/cpp/numeric/math/pow)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:09:12.063

请为此目的使用 pow 函数。下面是示例的链接

[http://www.cplusplus.com/reference/cmath/pow/](http://www.cplusplus.com/reference/cmath/pow/)*

# tcl - 文件的不区分大小写版本存在命令

> ID：15219241
> 
> 赞同：2
> 
> 时间：2013-03-05T08:41:29.707
> 
> 标签：tcl, eggdrop

好吧，不知道在这方面该怎么做。不久前，我修改了一个 Eggdrop 机器人的日志记录脚本。但现在出现了一个问题，由于某种原因，由于字符大小写问题，它正在将操作/文本记录在单独的文件中。 `#channel.html`一样存在`#Channel.html`，尽管前者是由于频道名称的当前状态而被写入的（如果所有用户离开并且一个人以不同的大小写重新加入，它可能会改变）。

我已将这个问题缩小到我认为是问题的范围。 `file exists 'filename_here'`. 我已经查看了 tcl 的文档，并且我已经阅读了有关混合大小写文件名的 wiki（它当然将它们视为不同的文件），但我还没有找到这样的选项（或用户制作的 proc）允许我禁用此行为。

有没有办法/可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:17:18.017

它实际上取决于文件系统（即操作系统），因为[`file exists`](http://www.tcl.tk/man/tcl8.6/TclCmd/file.htm#M15)它只是围绕操作系统的基本文件存在测试的一个薄包装器。经典的 Unix 文件系统大多区分大小写，而 Windows 文件系统通常不区分大小写。这意味着通常最好在编写代码时小心处理事情的情况；您可能应该考虑[`string tolower`](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm#M44)在预期的情况下使用来获取频道名称（因为我认为 IRC 频道名称不区分大小写）。

但是如果你不能这样做，你能做的最好的就是获取不区分大小写匹配的文件名列表，并检查它是否是一个值。唉，这是一个混乱的操作，因为[`glob`](http://www.tcl.tk/man/tcl8.6/TclCmd/glob.htm)没有`-nocase`选项（很少有人想要这样的东西），所以我们需要使用[`string match -nocase`](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm#M35)来帮助：

```
set files [lmap f [glob *.html] {
    expr {[string match -nocase ${channel}.html $f] ? $f : [continue]}
}]
if {[llength $files] == 1} {
    set channel_file [lindex $files 0]
} else {
    # Oh no! Ambiguity!
} 
```

[`lmap`](http://www.tcl.tk/man/tcl8.6/TclCmd/lmap.htm)从 Tcl 8.6 开始使用；早期版本的 Tcl 应该使用它来代替：

```
set files {}
foreach f [glob *.html] {
    if {[string match -nocase ${channel}.html $f]} {
        lappend files $f
    }
}
if {[llength $files] == 1} {
    set channel_file [lindex $files 0]
} else {
    # Oh no! Ambiguity!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:24:53.060

选择文件名大小写（#channel.html、#Channel.html 或 #CHANNEL.HTML）并分别在 上使用[string tolower](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm#M44)、[string totitle](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm#M45)或[string toupper](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm#M46)`filename_here`。然后将该值用于所有文件操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-06T14:16:01.640

**glob**上的**lsearch**过滤器可用于对特定文件名执行不区分大小写的搜索，例如

 **```
% lsearch -nocase -all -inline -glob [glob ./*] {*/myfile.txt}
./myFile.txt ./Myfile.txt ./MYFILE.txt 
```

在返回多个文件名的情况下，可以在上面的 lsearch 结果上使用**llength**进行健全性检查来标记错误。**

# ajax - jQuery 验证后跟 Ajax 发布

> ID：15219243
> 
> 赞同：0
> 
> 时间：2013-03-05T08:41:35.133
> 
> 标签：ajax, jquery, jquery-validate

我正在尝试将 jQuery[验证插件](http://docs.jquery.com/Plugins/Validation#Example)与 Ajax 帖子结合起来。这是我的代码：

PHP 形式：

```
<form id="newsletter_form" method="post">
    <input name="newsletteremail" type="text" id="newsletteremail" class="required email">
    <input name="Signup" type="submit" class="formsm" id="Signup" value="Signup">
    <div id="emailerrormessage"></div>
</form> 
```

查询：

```
$('#newsletter_form').validate({
            rules: { 
                email: {required:true, email:true}
            },
            submitHandler: function(form) {
                $.ajax({
                    data: $(this).serialize(),
                    type: "POST",
                    url: "includes/ajax.php?action=newsletter", 
                    contentType: "application/x-www-form-urlencoded; iso-8859-7",
                    dataType: 'json',
                    success: function(response, textStatus, jqXHR) {
                        if(response.status == 'error'){

                            $("#newsletteremail").removeClass().addClass('ajaxerror');
                        } else {
                                                        $("#newsletteremail").removeClass();                            
                        }
                    },
                    error: function (xhr, textStatus, errorThrown) {
                        $("#emailerrormessage").addClass('ajaxsuccess').html(xhr.responseText).show();
                    }
                });
                return false;
            }
        }); 
```

在使用 validate() 之前，表单会很好地提交。添加 validate() 代码后，验证工作，正在提交表单（我收到 200 OK 响应），但提交的值为空。我在这里拧干什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:52:35.370

`this`指的是您应用于表单的验证器对象，因此请更改：

```
data: $(this).serialize(), 
```

到

```
data: $(form).serialize(), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:47:46.843

使用 jQuery.form 插件并尝试如下，

```
submitHandler: function(form)
{
    jQuery(form).ajaxSubmit(
    {
        dataType : 'json',
        beforeSend : function(arr, $form, options)
        {

        },
        success : function(msg)
        {
            return false;
        }
    });
} 
```

# windows - 在 windows xp 中自动重启/恢复自定义 shell

> ID：15219244
> 
> 赞同：-1
> 
> 时间：2013-03-05T08:41:36.170
> 
> 标签：windows, shell, google-chrome, kiosk

我有一个网络应用程序，想在信息亭模式下使用它。现在我使用 chrome --kiosk 模式作为 Windows XP 自定义 shell。我还为使用 SteadyState 的用户添加了一些限制。

但是如何防止 chrome 中的 Alt+F4 呢？或者如何在关闭后自动重启自定义 shell？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T12:33:17.583

使用“Advanced Internet Kiosk”程序解决了问题。它允许阻止键盘键。我屏蔽了大部分键，除了 F5 和数字键盘外，浏览器或 Windows 系统中没有热键。:)

# android - 在android中找出网络选择时间

> ID：15219246
> 
> 赞同：1
> 
> 时间：2013-03-05T08:41:37.613
> 
> 标签：android, networking

有没有办法以编程方式找出android设备选择新网络并注册到新网络的时间？

# asp.net - 通过jquery ajax Web服务调用传递时防止属性序列化

> ID：15219247
> 
> 赞同：0
> 
> 时间：2013-03-05T08:41:39.050
> 
> 标签：asp.net, web-services, serialization, attributes

我正在通过 jquery ajax 进行网络服务调用以获取论坛线程列表。我有一个名为“ForumInfo”的类，它有一个指定的属性列表。 ![在此处输入图像描述](../Images/61c75cc1b4aa585767039cf7eb5f228f.png)

但是，当我进行 Web 服务调用时，我想限制从服务器传递的属性数量。但是大量（所有）属性在 ajax 调用中被序列化。 ![在此处输入图像描述](../Images/ba7d9a2298dc4d5969c371543866ebc0.png)

在这种情况下，有没有办法停止不必要的属性的序列化？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:43:20.570

你的意思是[[ScriptIgnoreAttribute]](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.scriptignoreattribute.aspx)吗？

# lotus-notes - 设计电子邮件正文

> ID：15219253
> 
> 赞同：0
> 
> 时间：2013-03-05T08:42:02.473
> 
> 标签：lotus-notes, lotus-domino, lotus-formula

在这里，我有这个代码

```
@MailSend(sample1;sample2:sample3; "";"sample, #"+number;
"Good Day! " +@NewLine+ "
Please click the link to see details of the sample for your Reference.. " +@NewLine+ " 
sample Details: ----->"+Category_1++@NewLine+"

Material 1----> "+Mat_1+@NewLine+"
Material 2----> "+Mat1_1+@NewLine+"
Material 3----> "+Mat2_1+@NewLine+"
Material 4----> "+Mat3_1+@NewLine+"
Material 5----> "+Mat4_1+@NewLine+"
Material 6----> "+Mat5_1+@NewLine+"
Material 7----> "+Mat6_1+@NewLine+"

Thanks "+@NewLine+" ";"";[IncludeDoclink])|
@Command([FileSave])|
@Command([CloseWindow])) 
```

我想知道如果我采用这种格式，我该如何放置表格？像 php 或表格形式的表格视图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T11:35:16.967

不幸的是，在这种格式中，您只能添加 ASCII 网格，这意味着您可以添加竖线和破折号来呈现网格，并使用带有空格的固定宽度字体来排列每列数据。不过，遗憾的是，您也无法使用此方法设置字体。

不过，您可以使用 LotusScript 构建整个电子邮件，使用富文本类，包括以编程方式构建表格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T09:22:16.733

在@MailSend 中，您的正文内容参数是一个文本。所以你不能使用@MailSend 函数插入任何对象。

如果您想将任何对象插入正文内容，您有两种不同的方法。

一种是莲花脚本。您可以使用 NotesrichTextItem 类来操作正文字段。

另一种方法是@Formula，但这不是直接的方法，您可以使用@Command(EditInsertTable) 和@DialogBox("Memo")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T11:29:29.383

不，您必须编写 LotusScript 或 Java 代码才能做到这一点。Notes 论坛语言只能处理简单的文本消息。

# javascript - 如果使用 noscript 标记在客户端禁用 javascript，则显示消息

> ID：15219257
> 
> 赞同：22
> 
> 时间：2013-03-05T08:42:16.487
> 
> 标签：javascript, noscript

如果在客户端禁用了 javascript，我想标记一条消息。我在这里搜索并找到`<noscript>`了用于处理这些东西的标签。

我在 w3schools 编辑器上做了这个来检查，但它不起作用让我知道这`<noscript>`是否不适合这个或我在这部分中缺少的其他东西？

![在此处输入图像描述](../Images/3e48ca9af0004fa026d74e1892b91c03.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-05T09:08:06.290

试试这个 ：-

```
How to detect JavaScript is disabled in browser? 
```

众所周知，标签用于 JavaScript。同样，当浏览器中的 JavaScript 被禁用时，标签也会起作用。

```
<script>Put Sample code here for execution when JavaScript is Active </script>
<noscript>Put Sample code here for execution when JavaScript is Disabled</noscript> 
```

* * *

如何处理浏览器中禁用的 JavaScript？

当 JavaScript 被禁用时，只是尝试重定向到某个页面，我们可以在其中显示 Javascript 被禁用的消息。HTML 中有一个名为“元刷新”的元标记，它将在该标题中指定的时间间隔内将用户重定向到另一个页面。

```
<noscript>
  <META HTTP-EQUIV="Refresh" CONTENT="0;URL=ShowErrorPage.html">
</noscript> 
```

我们可以看到上面的代码在noscript里面，有一个“元刷新”标签，间隔为“0”秒。由于该页面中禁用了 JavaScript，浏览器被重定向到“ShowErrorPage.html”以显示一些警告消息。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T09:19:00.210

**你是对的**。该`<noscript>`标记仅用于在 JavaScript 被禁用时显示。为了**对此进行测试**，请执行以下操作：

*   将此片段保存在文件“test.html”中。
*   用你的浏览器打开它。
*   启用/禁用 JavaScript（在 FireFox 中，此处为：工具/选项/内容/启用 JS）。

如您所见，您可以将**任何 HTML**放入`<noscript>`您将放入页面正文的标签中。

```
<html>
  <body>
    <h1>Simple Example Page</h1>
    <script type="text/javascript">
      document.write("Hi, JavaScript is enabled!");
    </script>
    <noscript>
      <div style="border: 1px solid purple; padding: 10px">
        <span style="color:red">JavaScript is not enabled!</span>
      </div>
    </noscript>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-22T19:42:06.510

```
<noscript>
   <META HTTP-EQUIV="Refresh" CONTENT="0;URL=ShowErrorPage.html">
</noscript> 
```

这不是一个好的解决方案，因为 IE11（和之前的版本）有一个安全选项，当设置为“高”时会禁用 Javascript 和元刷新标签！

我发现处理这种情况的最佳解决方案是：

```
<noscript class="noscript">
   <div id="div100">
   Please enable javascript in your browser .... blah blah
   </div>
</noscript>

<style>
   body{
      position:relative;
   }
   .noscript {
      width:100%;
      height:100%; /* will cover the text displayed when javascript is enabled*/
      z-index:100000; /* higher than other z-index */
      position:absolute;
   }
   .noscript #div100{
       display:block;
       height:100%;
       background-color:white; 
   }
</style> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-09T09:26:41.267

`<noscript>`用于这种事情，就像`<script>`用于 JS 一样。请注意，使用元标记刷新：

```
<noscript>
  <META HTTP-EQUIV="Refresh" CONTENT="0;URL=ShowErrorPage.html">
</noscript> 
```

意味着这很容易在 IE（至少 IE10）中通过增加 Internet 选项安全性（这可能首先用于禁用 JS）来禁用。当安全设置增加时，“允许 META REFRESH”选项被禁用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T08:45:45.973

将“不支持”消息放在 div 中，并在页面加载时使用 JavaScript 隐藏 div

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-19T17:54:28.857

您可以使用与 stackoverflow 相同的方法。请参阅我的 jsfiddle 链接。当 Javascript 被禁用时，在第一个 noscript 块中，就在 body 标记之后，您可以在一个空的子 div 中添加一个 padding-top，这样您就可以在您的 body 中添加您想要的内容，然后，最后，另一个带有固定位置 div 的 noscript 块，其中包含您想要的警告消息。尝试在启用和不启用 javascript 的情况下运行它。让我知道！:)

在此处查看代码：[https ://jsfiddle.net/go60f00n/](https://jsfiddle.net/go60f00n/)

```
<noscript>
         <div id='noscript_padding'></div>
      </noscript>
      <div>
         <p>Lorem ipsum dolor sit amet consectetuer tincidunt nunc ac faucibus mattis. Gravida tempus turpis Morbi vitae sed Suspendisse auctor dignissim nulla adipiscing. Adipiscing justo lacinia justo Vivamus Vestibulum amet ut Donec vitae aliquet. Orci tempus orci Donec nibh eget tellus pede semper adipiscing leo. A et id sagittis velit venenatis.</p>
         <p>Tellus ridiculus ipsum pretium condimentum Ut elit sed vitae amet In. Curabitur ipsum elit interdum tortor semper at dolor justo consequat leo. Id fermentum vitae tincidunt pretium lacus leo Cras urna risus urna. Pretium Vestibulum et euismod nec pede et tincidunt condimentum laoreet vel. Dolor vestibulum laoreet habitant a Nulla.</p>
         <p>Lobortis lobortis quis elit mollis quis risus Morbi in augue montes. Mauris ipsum libero tellus et Quisque id non justo nibh dui. Dui nisl at Fusce Curabitur interdum tincidunt sed Vestibulum platea justo. At ut ante eget ac sem sed nulla id nunc mus. Velit In faucibus a auctor Sed Morbi habitasse est urna natoque. </p>
      </div>
      <noscript>
         <div id='noscript_warning'>Please enable Javascript!</div>
      </noscript> 
```

所以css代码：

```
html, body {
            margin: 0;
            padding: 0;
            height: 100%;
         }

         p {
            margin: 0;
         }

         #noscript_padding {
            padding-top: 1.9em;
         }

         #noscript_warning {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 101;
            text-align: center;
            font-weight: bold;
            color: #FFF;
            background-color: #AE0000;
            padding: 5px 0 5px 0;
         } 
```

# c# - 在 Excel 中集成 C# 代码

> ID：15219261
> 
> 赞同：1
> 
> 时间：2013-03-05T08:42:28.497
> 
> 标签：c#, excel, vba

我有一个 Excel 文件，其中包含许多不同但非常相似的用户表单。

当我单击工作表中的单元格时，将根据单元格文本打开一个特定的用户窗体。

我想知道是否有一种方法可以将 C# 表单添加到 Excel 中，该表单将充当用户表单？由于 Visual Studio 界面比 VB 更简单，更通用。

我知道您可以为 excel 创建 C# 加载项，但这些用于添加按钮、功能区等。我需要一种添加 dll 的方法，该 dll 在单击单元格时将被激活，此 dll 必须易于更新，它不应该包括安装（如加载项）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:27:37.430

我从另一个论坛得到以下答案：

你有一些可能

1) 实际上 Excel（以及几乎所有 Office 应用程序）都支持加载项。因此，您可以制作旧版 excel 插件。那里有几个教程，但这不是最简单的。

2）另一种有趣的方法 exceldna.codeplex.com/[^]

3) 您可以从 excel vba 调用托管代码，但这不是最明智的，因为 vba 以一种相当不确定的方式运行。从这里开始：richnewman.wordpress.com/2007/04/15/...^]

4) Interop Forms Toolkit[^] 也可能是一个替代方案 – user2134909 2 分钟前编辑

我还没有彻底检查过它们，但它们看起来很有希望

# durandal - 在 Durandal 的组合视图中激活函数

> ID：15219272
> 
> 赞同：1
> 
> 时间：2013-03-05T08:43:17.460
> 
> 标签：durandal

我有这样的 Shell html

```
<div data-bind="compose: { model: 'ui/user/viewmodels/header', view: 'infoveave/user/views/header'}"></div>
<div class="container-fluid page-host">
    <!--ko compose: {
        model: router.activeItem,
        afterCompose: router.afterCompose,
        transition:'entrance'
    }--><!--/ko-->
</div> 
```

和 shell js 一样

```
define(function(require) {
var router = require('durandal/plugins/router'),
    system = require('durandal/system'),
return {
    router: router,
    activate: function () {
        var self = this;
        router.mapAuto('ui/user/viewmodels');
        system.log('Sheel Activate Called');
        return router.activate('dashboard');
    }
};
}); 
```

问题是标题上的激活函数没有被调用，但仪表板上的那个被调用，我必须在标题中获取一些 ajax 内容并绑定它，我该如何实现

我想保持这个逻辑分开，因为我不希望我的外壳有这个逻辑

供参考我的标题（为了简化我已经将我的复杂模型转换为一个简单的可观察的

```
define(function (require) {
var router = require('durandal/plugins/router'),
    system = require('durandal/system');

this.userInfo = ko.observable('');

return {
    router: router,
    activate: function () {
         system.log('Got Called Now');
         //do some ajax stuff here and update userinfo
    }
};
}); 
```

header html 的最简单形式是

```
<span class="dropdown-notif" data-bind="text: userInfo"></span> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T13:39:24.740

我认为您没有激活标题视图模型。

尝试将 'activate:true' 添加到标题视图组合绑定，如下所示：

```
<div data-bind="compose: { 
    model: 'ui/user/viewmodels/header', 
    view: 'infoveave/user/views/header', 
    activate: true}">
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T15:14:44.353

这可能是您的问题吗？：“除非存在激活器或在撰写绑定上设置了 activate:true，否则不会执行激活器回调。”

来源：[http ://durandaljs.com/documentation/Hooking-Lifecycle-Callbacks/](http://durandaljs.com/documentation/Hooking-Lifecycle-Callbacks/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:26:49.577

您是否在浏览器的控制台窗口中看到任何错误？（在 Chrome 中按 F12，然后单击控制台选项卡）。

我怀疑您会遇到一些阻止视图模型激活的错误。否则，您可以尝试以下更改：

贝壳：

```
define(function(require) {
    var router = require('durandal/plugins/router'),
        system = require('durandal/system'); // note the semi colon here

    return {
        router: router,
        activate: function () {
            var self = this;
            router.mapAuto('ui/user/viewmodels');
            // the line below to map the route to your view model may be required
            router.mapRoute('dashboard');
            system.log('Sheel Activate Called');
            return router.activate('dashboard');
        };
    };
}); 
```

标题视图模型：

```
define(function (require) {
    var router = require('durandal/plugins/router'),
        system = require('durandal/system');

    var userInfo = ko.observable('');

    return {
        router: router,
        userInfo: userInfo, // putting the property here should make it visible to the binding in the view
        activate: function () {
             system.log('Got Called Now');
             //do some ajax stuff here and update userinfo
        }
    };
}); 
```

# elasticsearch - 如何构造这个 elasticsearch 查询对象？

> ID：15219275
> 
> 赞同：1
> 
> 时间：2013-03-05T08:43:25.537
> 
> 标签：elasticsearch

我的文档索引如下：

```
{
    title: "stuff here",
    description: "stuff here",
    keywords: "stuff here",
    score1: "number here",
    score2: "number here"
} 
```

我想执行一个查询：

*   使用标题、描述和关键字字段来匹配文本术语。
*   它不必是完全匹配的。例如。如果有人搜索“我有一个大鼻子”，并且“鼻子”在其​​中一个文档标题中但“大”不在，那么仍然应该返回该文档。

编辑：我尝试了这个查询并且它有效。有人可以确认这是否是正确的方法吗？谢谢。

```
{
    query:{
        'multi_match':{
            'query': q,
            'fields': ['title^2','description', 'keywords'],
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:08:20.210

你的方式绝对是要走的路！

[multi_match](http://www.elasticsearch.org/guide/reference/query-dsl/multi-match-query.html)查询通常是您希望向最终用户公开的查询，而[query_string](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)类似，但也更强大和更危险，因为它公开了[lucene 查询语法](http://www.lucenetutorial.com/lucene-query-syntax.html)。经验法则：如果不需要，不要使用查询字符串。

此外，搜索多个字段很容易，只需提供您想要搜索的字段列表，就像您所做的那样，不需要[bool query](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:16:06.640

执行 HTTP Post 请求的相应 JSON 对象将是：

```
{
  "bool": {
    "should": [
      {
        "query_string": {
          "query": "I have a big nose",
          "default_field": "title"
        }
      },
      {
        "query_string": {
          "query": "I have a big nose",
          "default_field": "description"
        }
      },
      {
        "query_string": {
          "query": "I have a big nose",
          "default_field": "keywords"
        }
      }
    ],
    "minimum_number_should_match": 1,
    "boost": 1
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:50:34.287

下面是创建您可以使用的查询的代码。我用**c#**编写了它，但它可以以相同的方式在其他语言中工作。

您需要做的是创建一个**BooleanQuery**并设置它的至少 1 个条件必须匹配。然后为您要使用**Occur.SHOULD**枚举值检查的每个文档字段添加一个条件：

```
BooleanQuery searchQuery = new BooleanQuery();
searchQuery.SetMinimumNumberShouldMatch(1);

QueryParser parser = new QueryParser(Lucene.Net.Util.Version.LUCENE_29, "title", new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29));
Query titleQuery = parser.Parse("I have a big nose");
searchQuery.Add(titleQuery, BooleanClause.Occur.SHOULD);

parser = new QueryParser(Lucene.Net.Util.Version.LUCENE_29, "description", new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29));
Query descriptionQuery = parser.Parse("I have a big nose");
searchQuery.Add(titleQuery, BooleanClause.Occur.SHOULD);

parser = new QueryParser(Lucene.Net.Util.Version.LUCENE_29, "keywords", new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29));
Query keywordsQuery = parser.Parse("I have a big nose");
searchQuery.Add(titleQuery, BooleanClause.Occur.SHOULD);

Query queryThatShouldBeExecuted.Add(searchQuery, BooleanClause.Occur.MUST); 
```

[这是 java http://www.javadocexamples.com/java_source/org/apache/lucene/search/TestBooleanMinShouldMatch.java.html](http://www.javadocexamples.com/java_source/org/apache/lucene/search/TestBooleanMinShouldMatch.java.html)中示例的链接

# java - 如何为java进程提供密码

> ID：15219278
> 
> 赞同：1
> 
> 时间：2013-03-05T08:43:34.397
> 
> 标签：java, bash, passwords, parameter-passing

我正在使用 bash 脚本来启动 java 程序/进程。bash 脚本提示输入用户名和密码，并应将这些提供给 java 进程。我不想将这些作为 java 程序的参数提供，因此可以使用 shell“ps”命令将它们视为明文。所以我不想要以下任何一种：

```
 - java MyClass <clearTextPassword>
 - java -Dpass=<clearTextPassword> 
```

是否有任何推荐的方法可以从 shell 脚本向 java 进程提供密码？

在此先感谢您的任何建议。

最好的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:46:18.470

如果您自己编写了程序，最好设计您的程序，以便提示用户输入密码并使用[Console](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)类的[readPassword()](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html#readPassword%28%29)从命令行读取密码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:45:57.707

在这种情况下，我会在磁盘上创建一个文件（加密与否取决于您的安全需求级别）。我修改了权限，以便只有受控用户可以在执行程序时读取它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:46:01.850

您可以将密码存储在属性文件中（在保护它时您有不同的选择。您也可以完全放弃密码并使用公钥

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T08:46:13.317

您可以传递密码的散列版本。例如，提供一个时间戳，以及一个连接在一起的时间戳和密码的 MD5。当然，前提是您可以控制流程代码并且可以使用散列版本。

# mysql - COUNT 通过多链连接

> ID：15219283
> 
> 赞同：1
> 
> 时间：2013-03-05T08:43:43.070
> 
> 标签：mysql, sql, join, count

我的数据库中有这个层次结构（从最低到最高）：

用户 => 部门 => 区域 => 公司

现在我需要制作一个显示所有公司的表格（有关它们的一些信息直接从公司表格中获取），但我希望 HTML 表格中的最后一列是**Number of users**。我知道我需要将表格连接在一起，并且可能将表格连接到自身，但是我该怎么做呢？

这些表中的每一个都有一个链接到其父表的列（Company ofc 除外）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:47:28.977

`JOIN`表格：

```
SELECT
  c.companyId, 
  c.CompanyName,
  IFNULL(COUNT(u.userID), 0) AS 'Number Of Users'
FROM Company    AS c
LEFT JOIN Area  AS a ON c.CompanyID = a.CompanyID
LEFT JOIN Dept  AS d ON a.DeptId    = d.DeptId
LEFT JOIN users AS u ON D.UserId    = u.UserId
GROUP BY c.companyId, 
         c.CompanyName; 
```

**请注意：** `LEFT JOIN` with`IFNULL`将为您提供那些在其他表中没有匹配行的公司；在这种情况下计数为零

# iphone - DatePicker 和 NSDate 崩溃

> ID：15219289
> 
> 赞同：4
> 
> 时间：2013-03-05T08:43:57.627
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

尝试在 iPhone 上启动我的应用程序时发生了神秘的崩溃（*尽管它在模拟器上完全有效*）。我认为问题在于这两种方法..：

```
-(void)viewWillAppear:(BOOL)animated{
    [self getValueFromPicker];
}

-(void)getValueFromPicker{

    NSDate *now = [NSDate date];

    NSDate *birthDate = self.birthdayPicker.date;

    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit
                                               fromDate:now
                                                 toDate:birthDate
                                                options:0];

    NSLog(@"Difference in years %i/", components.year);

} 
```

**应用程序因SIGABRT**错误而崩溃 ，并且我可以在控制台中看到一条文本：`Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: date'`

请帮助我，我真的不知道我做错了什么，当我在控制台的模拟器上做同样的事情时，我可以看到从现在日期和用户选择的日期到年份的差异。

更新：在我删除 [self defaultBirthdayPickerDate] 之后；在 viewDidLoad 部分它开始工作。但是，现在选择器显示当前日期，选择生日日期不是很方便，现在我仍然需要将其当前日期从现在更改为过去..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T09:07:35.970

大多数情况下，当您应用`nil`日期时会产生这种类型的错误：检查`self.birthdayPicker.date`它的值是`nil`或不是？并给出适当的条件`if`，您将获得`nil`价值`UIDatePicker.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:52:23.333

我认为问题在这里：

```
NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit
                                               fromDate:now
                                                 toDate:birthDate
                                                options:0]; 
```

你`fromDate`的高于`toDate`.

将其更改为：

```
NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit
                                               fromDate:birthDate
                                                 toDate:now
                                                options:0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:50:48.150

你需要设置你的 NSDateFormatter 的语言环境。使用美国语言环境设置您的 iPhone 设置，然后将 12/24 设置设置为任何一个选项。
为此，您必须查看 iphone 设置面板。

希望这有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:19:08.517

我还有一种方法可以为选择器设置默认值，如下所示：

```
-(void)defaultBirthdayPickerDate{

    NSString *dateString = @"09-Oct-1987";
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    dateFormatter.dateFormat = @"dd-MMM-yyyy";
    NSDate *date = [dateFormatter dateFromString:dateString];
    [self.birthdayPicker setDate:date];
}

-(void)viewDidLoad{
   [self defaultBirthdayPickerDate];
} 
```

控制台中的完整崩溃报告是：

```
2013-03-05 13:15:12.982 DeathLine[2506:907] *** Assertion failure in -[_UIDatePickerView _setDate:animated:forced:], /SourceCache/UIKit/UIKit-2380.17/_UIDatePickerView.m:302
2013-03-05 13:15:12.985 DeathLine[2506:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: date'
*** First throw call stack:
(0x325042a3 0x3a22197f 0x3250415d 0x32dd9ab7 0x344bdf15 0x344c6429 0x3458f989 0x35a6b 0x358db 0x3432b595 0x3438014b 0x34380091 0x3437ff75 0x3437fe99 0x3437f5d9 0x3437f4c1 0x3436db93 0x2908c33 0x3436d833 0x343f70c5 0x343f7077 0x343f7055 0x343f690b 0x343f6e01 0x3431f5f1 0x3430c801 0x3430c11b 0x360225a3 0x360221d3 0x324d9173 0x324d9117 0x324d7f99 0x3244aebd 0x3244ad49 0x360212eb 0x34360301 0x2dc21 0x3a658b20)
libc++abi.dylib: terminate called throwing an exception 
```

# windows - 当我将汉字从 Oracle 表单导出到 Excel 时，它们不再是中文了

> ID：15219290
> 
> 赞同：2
> 
> 时间：2013-03-05T08:44:01.307
> 
> 标签：windows, excel, windows-7, oracle10g, oracleforms

**当我在Windows 7**上将它们从 Oracle 表单 10g 导出到 Excel 时，我遇到了中文字符问题。虽然它们看起来像中国人，但它们不是汉字。考虑到这一点，我已经将我的电脑语言更改为中文并重新启动了我的电脑。我使用 owa_sylk 实用程序并调用 excel 报告，如：

```
 v_url := 'http://....../excel_reports.rep?sqlString=' ||
       v_last_query      || 
       '&font_name='     ||       
       'Arial Unicode MS'||
       '&show_null_as='  ||
       ' '               ; 

web.show_document(v_url,'_self'); 
```

在这里你可以看到它的样子： ![在此处输入图像描述](../Images/dba74daca58ee8b9ae5467977a018b93.png)

有趣的是，当我将计算机的语言更改为英语时，此列是空的。此外，我意识到如果我用文本编辑器打开文件，那么它的中文单词是正确的，但是当我们用 Excel 打开它时，就会出现问题。

有人有线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:49:05.613

是的，问题来自不同的编码。如果 DB 使用 UTF-8 并且您需要将 ASCII 发送到 Excel，您可以直接在 owa_sylk 中转换数据。使用函数[转换](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions027.htm)。

例如。在函数 owa_sylk.print_rows 中更改 *p(line);* 在 *p(convert(line, 'ZHS32GB18030','AL32UTF8'));* 其中 'ZHS32GB18030' 是中文 ASCII 和 'AL32UTF8' - UTF-8 之一。

要选择编码参数，请使用[附录 A](http://docs.oracle.com/cd/B19306_01/server.102/b14225/applocaledata.htm#sthref1960)

您还可以执行 *SELECT * FROM V$NLS_VALID_VALUES WHERE parameter = 'CHARACTERSET'* 来查看所有支持的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:28:37.307

这是一个字符编码问题。您需要确保整个链中的所有工具（数据库、Web 服务、Excel、文本编辑器和 Web 浏览器）都使用相同的字符编码。

更改您的语言在这里会有所帮助，但更好的方法是确定链的每个部分的编码。

例如，Web 浏览器将更喜欢 Web 服务器提供的编码而不是操作系统的语言设置。

看到这个问题如何为Oracle设置UTF-8编码（可以正确显示任何形式的中文）：[export utf-8 data to text file with oracle sql developer](https://stackoverflow.com/questions/1801442/export-utf-8-data-to-text-file-with-oracle-sql-developer)

我不确定如何为 owa_sylk 设置编码，您必须检查文档（但找不到任何文档）。如果您找不到任何东西，请在此处提问或使用其他工具。

因此，您需要找出谁执行`excel_reports.rep`并正确配置它。使用 Web 浏览器的开发工具并检查页面的“字符集”或“编码”。

Excel 中的问题取决于您输入其中的文件格式。Excel（.xls 和 .xlsx 文件）文件是 Unicode 安全的，.csv 不是。因此，如果您可以在文本编辑器中读取文件，则很可能这是 Excel 可以解析的非 Excel 文件格式，但它不包含必要的编码信息。

如果您能够通过上述步骤生成 UTF-8 编码文件，则可以使用“从文件来源旁边的下拉列表中选择 65001：Unicode (UTF-8)”来加载该文件。在“文本导入向导”（[来源](http://www.itg.ias.edu/content/how-import-csv-file-uses-utf-8-character-encoding)）

# android - Android+Phonegap::Ajax“加载”GIF 不动画

> ID：15219291
> 
> 赞同：2
> 
> 时间：2013-03-05T08:44:03.290
> 
> 标签：android, cordova

嗨，我正在开发 android phonegap 应用程序，我正在使用 GIF 图像来显示加载指示。

```
 <div id="LoadingImage">
            <img src="images/ajax-loader.gif" id="loader" alt="loader image"/>
        </div> 
```

但它在 3.2 版本以上的 android 中可以正常工作，但在 android 2.3 版本中不能正常工作。任何人都可以帮我让它工作。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:52:27.453

看看[这个](https://getsatisfaction.com/tiggzi/topics/ajax_loader_gif_freezes)，然后判断它是否适合你。如果此页面不存在 :)[在此处尝试此](https://getsatisfaction.com/apperyio/topics/default_ajax_spinner_freezes)页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:54:51.837

在android清单文件中请设置

```
min SDK version="8" and check it out. 
```

# cakephp - 使用 2 个不同的模型更改表字段

> ID：15219293
> 
> 赞同：0
> 
> 时间：2013-03-05T08:44:12.823
> 
> 标签：cakephp

我有一个 IT 查询系统，用户可以添加他们的查询，当他们添加查询时，IT 部门会回复/评论查询。

应该如何工作是当用户添加查询时，它必须将 it_queries 表中的 query_type 字段更改为 OPEN，并且当 IT 部门查看他们回复/评论的查询时，必须将 query_type 字段从 OPEN 更改为 PENDING，然后最后当用户已得到帮助/协助，他们应该能够使用复选框将查询标记为已关闭，然后将状态从 PENDING 更改为 CLOSE。

不确定它们是否是在添加视图中设置常量并在表中插入的一种方式。

显然我正在学习，有人可以指导我必须采取的步骤。

这是我为用户添加 it_query 的代码

```
<?php echo $this->Form->create('ItQuery'); ?>
<fieldset>
<legend><?php echo __('Add It Query'); ?></legend>
<?php
echo $this->Form->hidden('hr_employee_id',array('value'=>$loggedInId));
echo $this->Form->input('it_query_type_id');
echo $this->Form->input('comment');
echo $this->Form->hidden('status_type', array('value'=>OPEN));
?>
</fieldset>
<?php echo $this->Form->end(__('Submit')); ?> 
```

这是我对 IT 部门的评论的代码

```
 <?php echo $this->Form->create('ItQueryComment'); ?>

<?php echo __('Add It Query Comment'); ?>
<?php
echo $this->Form->input('it_query_id');
echo $this->Form->input('comment');
echo $this->Form->input('close_query');
?>

<?php echo $this->Form->end(__('Submit')); ?> 
```

这是我的 ItQueryComments 的代码

```
public function add() {
if ($this->request->is('post')) {
$this->ItQueryComment->create();
if ($this->ItQueryComment->save($this->request->data)) {
$this->Session->setFlash(__('The it query comment has been saved'));
$this->redirect(array('controller' => 'it_queries','action' => 'view', $this->request->data['ItQueryComment']['it_query_id']));
} else {
$this->Session->setFlash(__('The it query comment could not be saved. Please, try again.'));
}
}
$itQueries = $this->ItQueryComment->ItQuery->find('list');
$hrEmployees = $this->ItQueryComment->HrEmployee->find('list');
$this->set(compact('itQueries', 'hrEmployees'));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:30:38.273

在为特定的 Itquery 保存评论时，在向数据库添加评论后，在评论控制器的添加功能中，使用 $this->getLastInsertID(); 并为 Itquery 模型调用函数 updateAll 并将该特定查询的状态更改为“待处理”。

# c# - 将 Datatable 与另一个进行比较，看看它是否具有正确的格式

> ID：15219307
> 
> 赞同：1
> 
> 时间：2013-03-05T08:45:02.663
> 
> 标签：c#

我有 2 个数据表：包含手机号码的 TableNumber 和包含所有可能的移动代码的混合的 TableCode，总共 6 位数。我想创建一个列表，仅包含其前 6 个数字来自 TableCode 的数字，因此不会考虑其第一个数字不在 TableCode 中的任何数字。我已经用 foreach、.Contains()、IndexOf() 尝试过这个，但它们都很慢，因为数字记录超过 100,000 条，并且遍历所有项目需要很长时间。并与另一张表进行比较。我使用 2 个嵌套的 foreach 循环。我在用 2 个 foreach 做一些愚蠢的事情，因为这将是对来自 TableCode 的 30,000 个成员的 30 亿次搜索，我需要 5 分钟才能给出结果。我的代码是这样的：

```
foreach(string codetable in TableCode)
     {
          foreach(string grouptable in TableNumber)
                 {
                    if(grouptable.IndexOf(codetable)!=-1)
                    {
                        //work here
                    }
                 }
     } 
```

在这里，我已将表的数字行添加到仅包含数字的列表中，所以在这里我正在搜索列表，但在尝试再次比较 DataTables 时与此类似，它需要的时间太长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:04:33.500

或许将数据表转换为 IEnumerable，如下所示：[Convert DataTable to IEnumerable<T>](https://stackoverflow.com/questions/3392612/convert-datatable-to-ienumerablet)

然后可能使用 yield return 并可能在单独的线程上处理处理，甚至使用 LINQ 进行过滤。

也许对表进行一些排序并将它们分成更小的块，并产生更多的线程进行并行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:24:27.520

`TableNumber`您要用来过滤`TableCode`-的“肯定”表也是如此`DataTable`。

所以模型类似于这样：

```
var TableNumber = new DataTable();
var TableCode = new DataTable();
TableNumber.Columns.Add("MobileNumbers", typeof(string));
TableCode.Columns.Add("MobileCode", typeof(string)); 
```

然后，您可以将 a`HashSet<string>`与所有有效数字一起使用`Enumerable.Join`，并将第二个表中的行与有效数字链接：

```
var numbersFirst6digits = TableNumber.AsEnumerable()
    .Select(r => new string(r.Field<string>("MobileNumbers").Where(Char.IsDigit).Take(6).ToArray()));
var dictionary = new HashSet<string>(numbersFirst6digits);

var validCodeRows = from row in TableCode.AsEnumerable()
                    join num in dictionary
                    on row.Field<string>("MobileCode") equals num
                    select row;
// if you need a new DataTable:
DataTable tblValidCodes = validCodeRows.CopyToDataTable(); 
```

如果您不需要过滤第一个表的前 6 位数字，则可以替换此行：

```
.Select(r => new string(r.Field<string>("MobileNumbers").Where(Char.IsDigit).Take(6).ToArray())); 
```

和

```
.Select(r => {var mNum = r.Field<string>("MobileNumbers"); return mNum.Length < 6 ? mNum : mNum.Substring(0, 6)};); 
```

# jquery - 在 mouseenter 中的 Jquery mouseenter

> ID：15219308
> 
> 赞同：1
> 
> 时间：2013-03-05T08:45:08.903
> 
> 标签：jquery

我正在使用以下代码，将鼠标悬停在项目上时，会显示项目中的 3 个菜单选项。标准的东西。

现在，它还通过降低其余项目的 css 来突出显示悬停的项目。这很好用，但实际上太多了，页面最终像灯塔一样闪烁！所以，我希望这些项目`#tiles li`在鼠标输入时改变不透明度，当鼠标`gl_comments gl_like or gl_readd`悬停在其中一个“图块”上时出现

`mouseenter`我需要在当前函数中编写一个全新的`mouseenter`函数吗？如果是这样，我如何只选择父“平铺”？

目前使用：

```
$(document).ready(function(){
    $("body").on("mouseenter", "#tiles li", function ()
    {
    $(this).children(".gl_comments").fadeIn("fast");
    $(this).children(".gl_readd").fadeIn("fast");
    $(this).children(".gl_like").fadeIn("fast");
    $('#tiles li').css({opacity: '0.1'});
    $(this).css({opacity: '1'});
    });

    $("body").on("mouseleave", "#tiles li", function ()
    {
    $(this).children(".gl_comments").fadeOut("fast");
    $(this).children(".gl_readd").fadeOut("fast");
    $(this).children(".gl_like").fadeOut("fast");
    $('#tiles li').css({opacity: '1'});
    });
}); 
```

# qt - 如何使用 Qt 解析为 Unicode 字体？

> ID：15219313
> 
> 赞同：1
> 
> 时间：2013-03-05T08:45:22.947
> 
> 标签：qt, unicode, fonts, pdf-generation

我有一个在 Windows XP 下使用 QGraphicsScene 的 Qt 4.8 应用程序。

如果我为 QGraphicsTextItem 对象选择字体“Arial”，我可以使用它来显示中文、日文等。当我使用 Qts PDF Engine 导出文档时：

```
QPrinter *sPDFPrinter = new QPrinter;
sPDFPrinter->setOutputFormat (QPrinter::PdfFormat); 
```

Pdf 正确嵌入了“Arial”的 unicode 版本，名为“ArialUnicodeMSStandard”。

这是如何解决的？我也想将它用于其他出口。

# jquery - 在按钮上显示警报框 - 淘汰赛

> ID：15219315
> 
> 赞同：0
> 
> 时间：2013-03-05T08:45:25.127
> 
> 标签：jquery, knockout.js

再会

我正在使用一种使用敲除来添加数据的表单。现在，当单击“删除”按钮（见下文）时，它会删除条目而不会发出警告。我如何首先提醒用户他将要删除该项目？

谢谢

HTML

```
 <td><input type="button" class="register" value="Remove" data-bind="click: function(){ vm.Remove($data) }" /></td> 
```

昏死

```
 var vm = {
            Data: ko.observable(),

            Remove: function (card)
            {
                console.log(card.CardId());

                var d = {
                    cardId: card.CardId()
                }

                var options =
                {
                    url: "MyAccount.aspx/DeleteCard",
                    type: "POST",
                    contentType: "application/json",
                    data: JSON.stringify(d),

                    success: function (response)
                    {
                        window.location = window.location;
                    }
                }

                $.ajax(options);
            }
        }

        var cardsBound = false;

        $(document).ready(function () {

            LoadCards();
            $("#")
        });

        function LoadCards() {
            var options =
            {
                url: "MyAccount.aspx/GetCardTypes",
                type: "POST",
                contentType: "application/json",

                success: function (response) {

                    vm.Data(ko.utils.unwrapObservable(ko.mapping.fromJS(response.d)));

                    if (!cardsBound)
                        ko.applyBindings(vm);
                    cardsBound = true;
                }
            }
            $.ajax(options);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:49:09.607

您可以使用[`window.confirm`](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)打开一个确认框，捕获响应并仅在响应为`true`. 像这样的东西：

```
data-bind="click: function(){ if (confirm('Delete, really?')) { vm.Remove($data) } }" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:48:57.787

knockout.js 没有什么特别之处，只需使用 JavaScript 函数即可`confirm()`：

```
data-bind="click: function(){ if (confirm('really?') vm.Remove($data) }" 
```

# c# - 在下一个窗口（选项卡）中打开图像缩略图的大图像

> ID：15219319
> 
> 赞同：0
> 
> 时间：2013-03-05T08:45:46.343
> 
> 标签：c#, asp.net

我在浏览器中显示图像缩略图，如下所示： ![在此处输入图像描述](../Images/0a865d5cf1119c7abaa3bb0058e33424.png)

现在，当我单击缩略图时，该缩略图的新窗口显示为空白。我想显示该缩略图的大图像。我正在使用图像控件。如何显示该缩略图的大图像？

如果我使用此来源显示缩略图：

> src="文件:~/printImages/0150/21022013/0150_21022013_002_tn.jpg"

那么它的大图源除了`_tn`：

> src="文件:~/printImages/0150/21022013/0150_21022013_002.jpg"

我可以在点击时将源的最后一部分从 _tn.jpg 替换为 .jpg，然后在新窗口中显示大图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:33:24.030

使用 jQuery 你可以做这样的事情。我添加了 css 类“bigClick”只是为了让这个例子的选择过程更清晰。

```
<img src="/printImages/0150/21022013/0150_21022013_002_tn.jpg" class="bigClick"/><br/>
<img src="/printImages/0150/21022013/0150_21022013_003_tn.jpg" class="bigClick"/><br/>
<img src="/printImages/0150/21022013/0150_21022013_004_tn.jpg" class="bigClick"/><br/>

<script type="text/javascript">
    $(function () {
        $(".bigClick").each(function(i) {
            var href = this.src.replace("_tn", "");
            $(this).wrap(
                $("<a>").attr("href", href).attr("target", "_blank")
            );
        });
    })
</script> 
```

# url-routing - 如何检测当前路径？

> ID：15219323
> 
> 赞同：0
> 
> 时间：2013-03-05T08:45:59.480
> 
> 标签：url-routing

我正在开发我的第一个独立 Web 应用程序，我遇到了路由问题。例如，我的索引位于`sites/folder/folder/index.php`，因此它的 url 将是`http://site.com/folder/folder/index.php`。那么什么是最好的方法`index.php`呢？只是使用`for`或`foreach`直到`index.php`找到或可能有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:53:02.077

您是否尝试过通过[parse_url](http://php.net/manual/en/function.parse-url.php)解析网址？这可能会对您有所帮助。

# .net - RazorEngine - 如果仅在视图中使用，则不会加载引用的程序集

> ID：15219325
> 
> 赞同：4
> 
> 时间：2013-03-05T08:46:02.287
> 
> 标签：.net, asp.net-mvc, razor

我正在使用 RazorEngine 在 MVC 上下文之外的服务层中执行一些模板，并且当这些程序集中的类仅在视图中使用时，我遇到了程序集未加载到 AppDomain 的问题。让我详细说明。

我有一些 Razor 模板，它们是独立程序集中的嵌入式资源（我们称之为程序集 A）。

其中一个模板 ( `MyTemplate`) 使用一个实用程序类 ( `MyHelperClass`)，它驻留在另一个程序集中（我们称之为程序集 B）。

程序集 A 对程序集 B 有硬引用。

当我尝试解析引用的模板时，`MyHelperClass`我很熟悉，“您是否缺少 using 指令或程序集命名空间”。当我在 Visual Studio 中调试并查看模块窗口时，我可以看到程序集 B 未加载到 AppDomain 中。如果我通过代码进行调试并在代码失败之前通过中间窗口加载程序集，它就可以工作。

因此，对于 .NET 框架而言，仅在视图中使用似乎不足以将程序集加载到 AppDomain 中。我认为在标准 MVC 项目中也可能出现这种情况，尽管我没有对此进行测试。

真的是两个问题。

1.  视图中的引用是否不足以导致运行时加载程序集？
2.  在这种情况下，强制此程序集加载而不必诉诸`Assembly.Load`或引用虚拟类的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:28:14.943

最后我认为这些模板的运行时编译太脆弱了，将来出现这种情况的可能性让我感到非常不安。相反，我决定更改我的项目以使用 RazorGenerator NuGet 包并预编译视图以避免任何运行时意外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:36:34.077

`MyHelperClass`在 web.config 中声明命名空间：

```
<configSections>
  <section name="razorEngine" type="RazorEngine.Configuration.RazorEngineConfigurationSection, RazorEngine" requirePermission="false" />
</configSections>
<razorEngine>
  <namespaces>
    <add namespace="..." />
  </namespaces>
</razorEngine> 
```

# php - php log4php 动态设置文件：行列

> ID：15219327
> 
> 赞同：1
> 
> 时间：2013-03-05T08:46:06.987
> 
> 标签：php, log4php

使用 apache log4php 并在我的类中由辅助方法调用它：

```
class MyClass{

    function log($msg, $level='info'){
        $log = @Logger::getLogger("MyLogger");
        $log->$level($msg);
    }
} 
```

上面代码的问题是 logger 中的 file:line 列将始终报告帮助方法的行号。我可以使用 php 的 debug_backtrace() 获取调用辅助方法的原始行号和文件：

```
$bt = debug_backtrace();
$caller = array_shift($bt); 
```

所以我的问题是，我的辅助方法中有没有办法设置 file:line 列？我在想我可能需要覆盖 Logger::method 什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:45:42.533

我的解决方案是对源代码的破解，应该避免。@Sven 的答案应该涵盖大多数情况，但对我来说，我的日志调用必须通过辅助方法。

在 LoggerLoggingEvent.php 类文件中添加方法：

```
/**
 * Set the event location info
 * @param LoggerLocationInfo $locationInfo
 */
public function setLocationInformation(LoggerLocationInfo $locationInfo) {
    $this->locationInfo = $locationInfo;
} 
```

然后在您的日志类方法中使用：

```
/**
 * Log an INFO message
 * @param string $msg The message to log
 * @return none
 */
public function log($msg, $level='info'){

    // Manually construct a logging event
    $level = LoggerLevel::toLevel($level);
    $logger = Logger::getLogger(__CLASS__);
    $event = new LoggerLoggingEvent(__CLASS__, $logger, $level, $msg);

    // Override the location info
    $bt = debug_backtrace();
    $caller = array_shift($bt);
    $location = new LoggerLocationInfo($caller);
    $event->setLocationInformation($location);

    // Log it
    $logger->logEvent($event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:10:19.550

解决方案不是自己拥有日志功能，而是在您现在调用自己的日志功能的地方使用记录器。

```
class MyClass {
    public function __construct() {
        $this->logger = Logger::getLogger("MyLogger");
    }
    public function anywhere() {
        // $this->log("Foo"); // Don't do this,
        $this->logger->info("Foo"); // do this.
    }
} 
```

通用日志框架无法知道您的日志调用真正采用了多少间接层，并将这些从回溯中剥离。您也失去了将异常传递给记录器的能力。

# qt - Qt 4.8。Mac OS 10.6.8 上的平板电脑事件

> ID：15219328
> 
> 赞同：0
> 
> 时间：2013-03-05T08:46:07.887
> 
> 标签：qt, events, tablet

TabletEvents 以鼠标事件的形式出现。

MAC OS Qt 4.8.0 - 4.8.5 的实际值。在任何操作系统上的 Qt 4.7.3 和 Windows 和 Linux 上的 Qt 4.8.0 中都能正常工作。

我有两个 QGraphcisScene 实例和两个 QGraphicsView 实例。相同的类型，但是一个视图有父视图，而另一个视图没有（它也是透明的，用于在桌面上绘制某些东西）。

我正在使用平板电脑（wacom 笔和触控）进行绘画。我处理 QTabletEvents，它仅适用于没有父级的 QGrahicsView 实例（意味着父级==0）。

在与父母的观点上（

> QMainWindow->centralWidget->ControlContainerWidget->QStackedLayout->QGraphicsView

) 平板电脑事件不来。他们来得`QApplication::eventFilter`很好，但不来观看。他们来到`QMainWindow`了`mouseEvents`。如果我将父级设置为 0，则平板电脑事件可以正常发送。

平板事件的第一个接收者是 QMainWindow。我在里面看到`qt_mac_handleTabletEvent`：

```
QWidget *qwidget = [theView qt_qwidget];
QWidget *widgetToGetMouse = qwidget; 
```

进而：

```
`qt_sendSpontaneousEvent(widgetToGetMouse, &qtabletEvent);` 
```

`qtabletEvent`- 在调用之前创建的不接受事件`sendSpontaneousEvent`。

然后在 QApplication::notify() 内部：

```
QWidget *w = static_cast<QWidget *>(receiver);
QTabletEvent *tablet = static_cast<QTabletEvent*>(e);
QPoint relpos = tablet->pos();
bool eventAccepted = tablet->isAccepted();
while (w) {
    QTabletEvent te(tablet->type(), relpos, tablet->globalPos(),
                    tablet->hiResGlobalPos(), tablet->device(), tablet->pointerType(),
                    tablet->pressure(), tablet->xTilt(), tablet->yTilt(),
                    tablet->tangentialPressure(), tablet->rotation(), tablet->z(),
                    tablet->modifiers(), tablet->uniqueId());
                    te.spont = e->spontaneous();
    res = d->notify_helper(w, w == receiver ? tablet : &te);
    eventAccepted = ((w == receiver) ? tablet : &te)->isAccepted();
    e->spont = false;
    if ((res && eventAccepted)
         || w->isWindow()
         || w->testAttribute(Qt::WA_NoMousePropagation))
        break;

    relpos += w->pos();
    w = w->parentWidget();
    }
    tablet->setAccepted(eventAccepted); 
```

正如我们所见：

```
res = d->notify_helper(w, w == receiver ? tablet : &te); 
```

它通过过滤器、布局然后`QMainWindow::tabletEven`-t调用事件处理。默认实现是`event->ignore()`.

由于 QMainWindow 没有父级，这就是全部。所以平板事件不会出现在 QMainWindow 孩子身上。

然后似乎它是 `QWidget *qwidget = [theView qt_qwidget];`错误的。不幸的是，我无法调试它...

请给我一些提示...我被卡住了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:02:39.543

我花了更多时间比较 Qt 4.8.0 和 4.7.3，现在我发现这是内部 qt 事件调度程序的问题。它将事件发送到 NSWindow (QMainWindow) 而不是 NSView (QGraphicsView)。我没有发现问题出在哪里，但我发现 QMainWindow 从 ::event() 方法返回 false。所以我重新实现了该方法并在那里解析了平板电脑事件：

```
bool UBMainWindow::event(QEvent *event)
{
    bool bRes = QMainWindow::event(event);

    if (NULL != UBApplication::boardController)
    {
        UBBoardView *controlV = UBApplication::boardController->controlView();
        if (controlV && controlV->isVisible())
        {
            switch (event->type())
            {
            case QEvent::TabletEnterProximity:
            case QEvent::TabletLeaveProximity:
            case QEvent::TabletMove:
            case QEvent::TabletPress:
            case QEvent::TabletRelease:
                {
                    return controlV->directTabletEvent(event);
                }
            }
        }
    }
    return bRes;
} 
```

问题是：我需要对应用程序中的任何控件使用平板电脑，所以我需要确定 QGraphicsView 何时在鼠标光标下：

```
bool UBBoardView::directTabletEvent(QEvent *event)
{
    QTabletEvent *tEvent = static_cast<QTabletEvent *>(event);
    tEvent = new QTabletEvent(tEvent->type()
        , mapFromGlobal(tEvent->pos())
        , tEvent->globalPos()
        , tEvent->hiResGlobalPos()
        , tEvent->device()
        , tEvent->pointerType()
        , tEvent->pressure()
        , tEvent->xTilt()
        , tEvent->yTilt()
        , tEvent->tangentialPressure()
        , tEvent->rotation()
        , tEvent->z()
        , tEvent->modifiers()
        , tEvent->uniqueId());

    if (geometry().contains(tEvent->pos()))
    {
        if (NULL == widgetForTabletEvent(this->parentWidget(), tEvent->pos()))
        {
            tabletEvent(tEvent);
            return true;
        }
    }
    return false;
} 
```

我还需要停止为 QGraphicsView 孩子处理平板电脑事件。

```
QWidget *UBBoardView::widgetForTabletEvent(QWidget *w, const QPoint &pos)
{
    Q_ASSERT(w);

    UBBoardView *board = qobject_cast<UBBoardView *>(w);

    QWidget *childAtPos = NULL;

    QList<QObject *> childs = w->children();
    foreach(QObject *child, childs)
    {
        QWidget *childWidget = qobject_cast<QWidget *>(child);
        if (childWidget)
        {
            if (childWidget->isVisible() && childWidget->geometry().contains(pos))
            {
                QWidget *lastChild = widgetForTabletEvent(childWidget, pos);

                if (board && board->viewport() == lastChild)
                    continue;

                if (NULL != lastChild)
                    childAtPos = lastChild;
                else
                    childAtPos = childWidget;

                break;
            }
            else
                childAtPos = NULL;
        }
    }
    return childAtPos;
} 
```

也许当我有更多时间时——我会更深入地研究 qt 并完全解决这个问题。

# forms - Symfony Forms：修改后的 DateType 类中的“数组到字符串转换”异常

> ID：15219330
> 
> 赞同：3
> 
> 时间：2013-03-05T08:46:09.920
> 
> 标签：forms, symfony, formbuilder

我想构建一个自定义 DateType 类。为了做到这一点，我将类*Symfony\Component\Form\Extension\Core\Type\DateType 复制*到我的 src/ 目录并更改了类名和`getName()`.

```
<?php

namespace FooBar\CoreBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
// ...

class MonthType extends AbstractType
{
    // ...

    public function getName()
    {
        return 'month';
    }

    // ...
} 
```

我还注册了新类型：

```
foobar.form.type.month:
    class: FooBar\CoreBundle\Form\Type\MonthType
    tags:
        - { name: form.type, alias: month } 
```

但是，如果我尝试使用我的新类型，`Array to string conversion in /var/www/foobar/app/cache/dev/twig/4d/99/945***.php`则会引发异常 ( )：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $default = new \DateTime('now');
    $builder
        ->add('season', 'month', array('data' => $default))
    ;
} 
```

注意：如果我更改`'month'`为`'date'`一切正常。

有谁知道为什么抛出异常以及如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T02:35:14.810

## 怎么修

您必须定义块`month_widget`并用作表单字段模板才能使 sf2 正确呈现该字段。

例如，在您的 .twig 中写在下面。

```
{% form_theme form _self %}

{% block month_widget %}
<input type="text" value="{{ value.year }}">
<input type="text" value="{{ value.month }}">
{% endblock %} 
```

并根据需要自定义演示文稿。

默认主题文件`Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig`可能会有所帮助。

请参阅下面的更多细节。 [http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html#creating-a-template-for-the-field](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html#creating-a-template-for-the-field)

## 错误原因

Symfony2 没有名为`month_widget`.

`MonthType`您创建的是子级`FormType`（因为继承的 getParent() 返回“表单”）

`month_widget`找不到（因为你还没有定义它），所以它接下来会尝试渲染`form_widget`.

在`form_widget`中，只有简单的文本字段，如`<input type="text" value="{{ value }}" ...`, 并在此处失败，因为 value 不是标量。

`value`实际上不是 DateTime 而是数组，因为在类中使用`DateTimeToArrayTransformer`。（正如类名所说，DateTime 被转换为数组）

所以，错误是`Array to string conversion`。

# javafx-2 - Javafx 更改饼图颜色

> ID：15219334
> 
> 赞同：4
> 
> 时间：2013-03-05T08:46:14.753
> 
> 标签：javafx-2

我有一个代表颜色序列的颜色列表。我想将新的颜色序列应用于饼图数据。

```
private final int CASPIAN_COLOR_COUNTS = 8;   
public void setPieChartColor(PieChart chart, List<String> colors) {

    chart.getData().get(i);   // for debug to get the node name (.data)

    /**
     * Set Pie color
     */
    int i = 0;
    for (String color : colors) {
        final Node node = chart.lookup(".data" + i);
        node.getStyleClass().remove("default-color" + (i % CASPIAN_COLOR_COUNTS));
        node.getStyleClass().add(color);
        i++;
    } 
```

但所有图表数据**仅采用里海颜色中的一种**颜色。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T00:06:40.490

您可以使用以下方法在代码中实现自定义饼图颜色：

```
private void applyCustomColorSequence(
    ObservableList<PieChart.Data> pieChartData, 
    String... pieColors) {
  int i = 0;
  for (PieChart.Data data : pieChartData) {
    data.getNode().setStyle(
      "-fx-pie-color: " + pieColors[i % pieColors.length] + ";"
    );
    i++;
  }
} 
```

请注意，该方法必须在图表显示在活动场景后应用（否则`data.getNode()`调用将返回`null`）。

这是一些使用它的[示例代码。](https://gist.github.com/jewelsea/5095145)

![彩色饼图](../Images/b3029c404a7e12fd16530360b9dea686.png)

* * *

您可以使用[css 样式表](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)实现相同的效果。

例如，当样式表应用于给定图表时，包含以下样式定义的 css 样式表将更改饼图的默认颜色。

```
.default-color0.chart-pie { -fx-pie-color: #ffd700; }
.default-color1.chart-pie { -fx-pie-color: #ffa500; }
.default-color2.chart-pie { -fx-pie-color: #860061; }
.default-color3.chart-pie { -fx-pie-color: #adff2f; }
.default-color4.chart-pie { -fx-pie-color: #ff5700; } 
```

[有关基于样式表的方法的示例：请参阅使用 CSS](http://docs.oracle.com/javafx/2/charts/css-styles.htm)教程设置图表样式的“设置饼图的颜色”部分。

样式表方法的优点是样式与代码分离。它的缺点是必须在创建样式表时而不是在运行时设置颜色，并且颜色序列仅限于固定数量的颜色 (8)。

一般来说，大多数应用程序都推荐使用样式表方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-04T09:26:51.247

如果您的值为负数，css 样式可能不起作用。这可能是一个错误，但我必须将我的值转换为正值才能使样式正常工作。当值为负时，所有馅饼都是白色的。

# ios - 如何建立和建立一个层？

> ID：15219337
> 
> 赞同：0
> 
> 时间：2013-03-05T08:46:23.697
> 
> 标签：ios, objective-c, core-animation

我想构建一个层并在 5 秒后构建它。但我不知道如何将最终值分配给图层。我的代码如下：

```
-(CABasicAnimation *) buildIn{
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    animation.duration = 2.0f;
    [animation setFromValue:[NSNumber numberWithFloat:0.0f]];
    [animation setToValue:[NSNumber numberWithFloat:1.0f]];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    return animation;
}

-(CABasicAnimation *) buildOut{
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    animation.duration = 2.0f;
    animation.beginTime = CACurrentMediaTime() + 5;
    [animation setFromValue:[NSNumber numberWithFloat:1.0f]];
    [animation setToValue:[NSNumber numberWithFloat:0.0f]];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    return animation;
}

- (IBAction)startAnimation:(id)sender {
    [self.textView.layer addAnimation:[self buildIn] forKey:@"transparent"];
    self.textView.layer.opacity = 1.0f;//I need to set the opacity to 1 after buildIn animation
    [self.textView.layer addAnimation:[self buildOut] forKey:@"transparent"];
    self.textView.layer.opacity = 0.0f;//ERROR: this is the final layer value, but I need to assign it after the build out animation, not here.
} 
```

我想我可以使用完成块来做到这一点，但我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:30:37.150

如果您在`buildIn`动画上设置了代理，那么当动画完成时，`-animationDidStop:finished:`消息将发送给代理。然后你就可以开始你的`buildOut`动画了。

[CAAnimation 委托参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CAAnimation_class/Introduction/Introduction.html)

# css - 是什么导致出现水平滚动？

> ID：15219342
> 
> 赞同：-1
> 
> 时间：2013-03-05T08:46:33.033
> 
> 标签：css, debugging, firebug, margin

在普通版、宽版和平板电脑版中，一旦窗口距离`site_wrap`容器大约一英寸，就会出现滚动条，水平滚动就会出现。我可以看到，如果我从中删除 25px 的宽度`div#title`，滚动就会消失。

但我无法理解的是，容器 ( `site_wrap`) 是 1280 像素，`div.title_wrapper`是自动的，并且`div#title`是 1234 像素，左边距为 46 像素。

[http://brainbuzzmedia.com/themes/expression/blog/](http://brainbuzzmedia.com/themes/expression/blog/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:00:26.620

只需定义您的`#site_wrap`

`margin:0 auto`**就像**这样`overflow: hidden`

 **```
div#site_wrap {
margin: 0 auto;
overflow: hidden;
} 
```

**css路径是这个**

```
http://brainbuzzmedia.com/themes/expression/wp-content/themes/expression/css/bgs/gradient.css 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:07:56.787

这是因为`Blog`菜单，它是隐藏的（不透明度为0）但显示不是`none`，这意味着它仍然占据它的位置。

您可以通过将 display:none 设置为`ul`元素来检查这一点。

```
<li id="menu-item-813" class="menu-item menu-item-type-post_type menu-item-object-page     current-menu-item page_item page-item-178 current_page_item menu-item-813"><a href="http://brainbuzzmedia.com/themes/expression/blog/">Blog</a>
<!-- this--><ul class="sub-menu"> 
```

您应该正确设置其位置，以免文档溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:55:56.270

`@media`在导致此问题的不同查询中似乎存在一些错误计算。通过添加以下内容，您可以轻松摆脱整个水平滚动条（因为无论如何都不需要它）：

```
body { 
    overflow-x:hidden;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:05:40.467

问题出在你`.title_wrapper`或更确切的范围内`.navline`。你应该添加

```
.navline {
   overflow: hidden;
} 
```**

# wpf - WPF：更改列表视图项的背景颜色

> ID：15219347
> 
> 赞同：1
> 
> 时间：2013-03-05T08:46:52.480
> 
> 标签：wpf, data-binding, vb.net-2010

如何更改列表视图中项目的前景（即使背景也可以）。我有一个程序可以打开 excel 并检查给定工作表中是否有损坏的链接。我想向用户显示给定链接的列表以及曾经被破坏的链接。我想将前景更改为 RED。我已将值绑定到 observablecollection。该集合只是字符串的集合（WEB​​ LINKS）并且工作正常

[我应该像这里](https://stackoverflow.com/questions/9324502/change-the-foreground-color-of-a-listview-item-only-in-one-column)那样做多重绑定吗

**编辑：-** 对此还有一个问题。创建属性并进行所有更改后。WPF 表单未使用这些值进行更新。即列表框没有被填满。着色都没有发生（不确定它是否也在发生。因为我看不到它们）。

这是我的代码。请原谅我的编码我是 WPF 的新手

```
<Window x:Class="URLValide.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:Local="clr-namespace:URL_Validater.URLValide"
Title="URL Validator" Height="269" Width="525" FontSize="13"
ResizeMode="NoResize">

<Window.Resources>
    <ResourceDictionary>
        <Style x:Key="HighLight" TargetType="{x:Type Control}">
            <Setter Property="Background" Value="Honeydew"/>
            <Setter Property="FontWeight" Value="UltraBlack"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect BlurRadius="40" Color="Beige" Direction="50" Opacity="0.5"/>                                
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Background" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </ResourceDictionary>
</Window.Resources>

<DockPanel LastChildFill="True">
    <Label DockPanel.Dock="Top" Name="WinHeader"  Height="30" Background="BurlyWood" FontFamily="Calibri" FontSize="20" FontWeight="Bold" FontStretch="Medium" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="0,0,0,0" HorizontalContentAlignment="Center" VerticalContentAlignment="Top">URL Validator</Label>
    <Grid DockPanel.Dock="Bottom" Background="Beige">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="20" MaxHeight="30"/>
        </Grid.RowDefinitions>
        <TextBlock Grid.Column="0" Text="Current URL:"></TextBlock>
        <TextBlock Grid.Column="1"  Text="{Binding strCrnUrl}"  Width="370"></TextBlock>
        <TextBlock Grid.Column="2"  Text="10 of 100" HorizontalAlignment="Left" VerticalAlignment="Center"></TextBlock>
    </Grid>
    <Grid DockPanel.Dock="Right" Width="154">
        <Grid.ColumnDefinitions>
            <ColumnDefinition MaxWidth="300" Width="19*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition MaxHeight="55" MinHeight="10" Height="35*" />
            <RowDefinition Height="165*"  MinHeight="10"  />
        </Grid.RowDefinitions>

        <Label Name="LbleRight" BorderBrush="Black" BorderThickness="1" Margin="0,2" FontSize="13" Content="List Of URL's" Height="30" Grid.ColumnSpan="2" Grid.Row="0"></Label>
        <ListView Grid.Row="1" Background="Azure" ItemsSource="{Binding strPdfLst}" IsEnabled="True" Margin="0,0,0,1"></ListView>            
    </Grid>

    <Grid DockPanel.Dock="Left">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="30*" />
            <RowDefinition Height="60*" />                
        </Grid.RowDefinitions>            
        <Label BorderBrush="Black" Name="lblFleSel" BorderThickness="1" Height="27" Margin="2,2,0,30" HorizontalAlignment="Left" Width="349">Select File To which Contains the list of URL's:</Label>
        <TextBox Name="txtbxFleNme" BorderBrush="Black" BorderThickness="1" Margin="2,34,0,0" Style="{StaticResource ResourceKey=HighLight}" HorizontalAlignment="Left" Width="272"></TextBox>
        <Button Name="btnFleSlec" Width="69" Height="27" Content="Browse" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="276,32,4,0"></Button>
        <Grid Grid.Row="1" Height="118" HorizontalAlignment="Left" Margin="0,1,0,0" Name="OptionGrid" VerticalAlignment="Top" Grid.RowSpan="2">
            <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" Orientation="Horizontal">
                <Border BorderBrush="Black" BorderThickness="1" Height="117" Margin="3,1,0,0" HorizontalAlignment="Stretch" Width="350">
                    <!--<StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" Width="162" Height="118">                        
                    </StackPanel>-->
                    <Grid Height="auto" HorizontalAlignment="Stretch" Width="335">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="10*"/>
                            <RowDefinition Height="10*"/>
                            <RowDefinition Height="10*"/>
                            <RowDefinition Height="10*"/>
                            <RowDefinition Height="10*"/>
                        </Grid.RowDefinitions>
                        <CheckBox Name="chkboxHas" VerticalAlignment="Center" HorizontalAlignment="Center">Has Column Headers</CheckBox>
                        <Label Name="lblDesc" Height="auto" Margin="0,0,204,0" Grid.Row="1" HorizontalContentAlignment="Right" VerticalAlignment="Top">Description Column:</Label>
                        <ComboBox Grid.Row="1" Name="cmboxDescol"  Margin="131,0,0,0" Style="{StaticResource ResourceKey=HighLight}"></ComboBox>
                        <Label Name="lblUrlCol" Height="auto" Grid.Row="2" Margin="0,0,204,0" HorizontalContentAlignment="Right">URL's Column:</Label>
                        <ComboBox Name="cmboxUrlCol" Grid.Row="2" Margin="131,0,0,0" Style="{StaticResource ResourceKey=HighLight}"></ComboBox>
                        <Label Name="lblResCol" Height="auto" Grid.Row="3" Margin="0,0,196,0" HorizontalContentAlignment="Right">Result Column:</Label>
                        <ComboBox Name="cmboxResCol" Grid.Row="3" Margin="131,0,0,0" Style="{StaticResource ResourceKey=HighLight}"></ComboBox>
                        <Button Grid.Row="4" HorizontalAlignment="Center" VerticalAlignment="Center" Content="Validate URL links" Name="btnValidate"></Button>
                    </Grid>
                </Border>                    
            </StackPanel>
        </Grid>
    </Grid>
</DockPanel> 
```

我不确定我是否应该发布完整的代码。但这是我的课程，单击按钮将启动程序。

我的班级代码：-

```
 Imports Microsoft
Imports System
Imports System.Net
Imports System.Data
Imports System.Windows
Imports System.Windows.Forms
Imports Excel = Microsoft.Office.Interop.Excel
Imports System.Collections.ObjectModel
Imports System.ComponentModel

Namespace URLValide

    Public Class clsUrlCheck
        Implements INotifyPropertyChanged

        Public Event propertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

        Public exclApplic As New Excel.Application
        Public exclWkbOpe As Excel.Workbook
        Public exclWksAct As Excel.Worksheet
        Public exclRngUrl As Excel.Range
        Public exclRngDes As Excel.Range
        Public exclRngOut As Excel.Range
        Public intMaxRow As Long
        Public intCrtRow As Long
        Private _strTotlOf As String
        Private _strCrnUrl As String
        Private _ColorIndx As String
        Private _strPdfLst As ObservableCollection(Of String)
        Private _strhdrPdf As ObservableCollection(Of String)

#Region "Region of poperties"
        Public Property strTotlOf() As String
            Get
                Return _strTotlOf
            End Get
            Set(ByVal value As String)
                _strTotlOf = value
                Me.OnPropertyChanged("strTotlOf")
            End Set
        End Property

        Public Property strCrnUrl() As String
            Get
                Return _strCrnUrl
            End Get
            Set(ByVal value As String)
                _strCrnUrl = value
                Me.OnPropertyChanged("strCrnUrl")
            End Set
        End Property

        Public Property strPdfLst As ObservableCollection(Of String)
            Get
                Return _strPdfLst
            End Get
            Set(ByVal value As ObservableCollection(Of String))
                _strPdfLst = value
                Me.OnPropertyChanged("strPdfLst")
            End Set
        End Property

        Public Property strhdrPdf As ObservableCollection(Of String)
            Get
                Return _strhdrPdf
            End Get
            Set(ByVal value As ObservableCollection(Of String))
                _strhdrPdf = value
                Me.OnPropertyChanged("strhdrPdf")
            End Set
        End Property

        Public Property ColorIndx As String
            Get
                Return _ColorIndx
            End Get
            Set(ByVal value As String)
                _ColorIndx = value
                Me.OnPropertyChanged("ColorIndx")
            End Set
        End Property

        Private Sub OnPropertyChanged(ByVal propertyName As String)
            RaiseEvent propertyChanged(Me, New PropertyChangedEventArgs(propertyName))
        End Sub
#End Region

#Region "function of Validating the URL's"
        Public Function UrlCheck(ByVal strUrlReq As String)

            Try

                Dim WebReq As Net.HttpWebRequest = Net.HttpWebRequest.Create(strUrlReq)
                WebReq.Method = "Head"
                WebReq.Timeout = 5000
                Using Response = WebReq.GetResponse()
                    Return True
                End Using

            Catch ex As Exception
                ColorIndx = "True"
                Return False

            End Try

        End Function
#End Region

#Region "Start Function"
        Sub suStart()
            Dim blnValid As Boolean

            'strPdfLst.Clear()
            'strPdfLst = makeList(exclRngUrl.Column, False)
            If exclRngDes.Value = "Make Desc" Then
                strPdfLst = makeList(exclRngUrl.Column, True)
                exclRngDes.Delete()
            Else
                strPdfLst = makeList(exclRngUrl.Column, False)
            End If

            For Each exclRngEch As Excel.Range In exclRngUrl
                strCrnUrl = exclRngEch.Text
                strTotlOf = exclRngEch.Row & "OF" & intMaxRow
                blnValid = UrlCheck(exclRngEch.Value.ToString)
                If blnValid Then
                    exclWksAct.Cells(exclRngEch.Row, exclRngOut.Column).value = "Web Page Present"
                Else
                    exclWksAct.Cells(exclRngEch.Row, exclRngOut.Column).value = "Web Page Error"

                End If

            Next

        End Sub

        Function makeList(ByVal intColNum As Long, ByVal blnMkeStr As Boolean) As ObservableCollection(Of String)

            Dim ObsColTem As ObservableCollection(Of String) = New ObservableCollection(Of String)

            If Not blnMkeStr Then
                For intLopCnt As Int32 = intCrtRow To intMaxRow
                    ObsColTem.Add(exclWksAct.Cells(intLopCnt, intColNum).Text)
                Next
            Else
                For intLopCnt As Int32 = intCrtRow To intMaxRow
                    Dim strDesc As String = Mid(exclWksAct.Cells(intLopCnt, intColNum).Text, InStrRev(exclWksAct.Cells(intLopCnt, intColNum).Text, "/", , CompareMethod.Text) + 1)
                    ObsColTem.Add(strDesc)
                Next
            End If
            Return ObsColTem
        End Function
#End Region

    End Class
End Namespace 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T13:47:28.230

这是来自工作代码

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=RowSelected}" Value="True">
                <Setter Property="Background" Value="Gainsboro"  />
                <Setter Property="FontWeight" Value="Bold" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:46:07.900

创建一个以链接为参数并发送背景/前景颜色的转换器，转换器检查链接并相应地发送正确的代码，将颜色代码绑定到项目模板的背景/前景属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:23:37.540

首先创建一个可以绑定的 Broken-Property，然后在 Broken-Property 上使用 DataTrigger 为 ListViewItems 创建一个 Style！

```
<Style TargetType="{x:Type ListViewItem}">
<Style.Triggers>
            <DataTrigger Binding="{Binding Broken}" Value="True">
                <Setter Property="Background" Value="Red"/>
                <Setter Property="Foreground" Value="White"/>
            </DataTrigger>
</Style.Triggers>
</Style> 
```

尚未测试此代码，但它应该可以工作！

# android - 如何转换 Dropbox 日志时间戳？

> ID：15219348
> 
> 赞同：2
> 
> 时间：2013-03-05T08:47:00.477
> 
> 标签：android, logging, frameworks, timestamp, dropbox

我正在调试一个android框架。我从设备中提取 Dropbox 日志，它是在 /data/system/dropbox 中创建的。日志文件名以这种格式打印。

event_data@1362451303699

1362451303699 是时间戳，我想将其更改为 05/03/2013 16:00 以提高可读性。

我怎样才能转换这个时间戳？是否有任何代码需要更改？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:50:19.123

利用：`Date date = new Date(timestamp);`

编辑完整代码：

```
String wantedDate = "";
String log = "event_data@1362451303699";
int index = log.indexOf("@");
if(index != -1) {
  index = index + 1; // skip @ symbol
  if(index < log.length()) { // avoid out of bounds
    String logtime = log.substring(+1);
    try {
      long timestamp = Long.parseLong(logtime);
      SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy HH:mm");
      Date date = new Date(timestamp);
      wantedDate = df.format(date);
    } catch (NumberFormatException nfe) {
      // not a number 
    }
  }
}
if( ! "".equals(wantedDate) ) {
       // everything OK
} else {
       // error cannot retrieve date!
} 
```

相关文档：

*   indexOf ：http: [//developer.android.com/reference/java/lang/String.html#indexOf%28java.lang.String%29](http://developer.android.com/reference/java/lang/String.html#indexOf%28java.lang.String%29)
*   简单日期格式：http : [//developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:52:05.237

您可以使用 SimepleDateFormat 来解析它。例如：

```
long ts = 1362451303699;
Date date = new Date(ts);    
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm");
System.out.println(sdf.format(date)); 
```

使用 ，`SimpleDateFormat`您可以以更易读的格式提供您的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:56:22.460

它是一个 UNIX 纪元时间戳，您需要做的就是将`String`数字的表示形式转换为`long`，然后您可以使用它来创建一个`Date`对象，您可以使用`DateFormat`. 像这样的东西：

```
// Get this from the log
String timestamp = "1362451303699";
long epoch = Long.parseLong(timestamp);
Date date = new Date(epoch);

DateFormat format = new SimpleDateFormat("dd/MM/yyyy HH:mm");
String formattedDate = format.format(date); 
```

# c# - 无法连接到远程服务器

> ID：15219353
> 
> 赞同：2
> 
> 时间：2013-03-05T08:47:16.023
> 
> 标签：c#, .net, dns

我无法将地址解析为 IP。它给出了一个例外“没有找到这样的主机”。但我可以通过我的网络浏览器访问同一个站点。

```
IPAddress address = Dns.GetHostAddresses("https:\\google.com")[0]; 
```

是不是因为我的网络浏览器正在使用代理。我怎么还能连接到它？我无法更改网络浏览器的代理设置，因为它们在我的公司中是默认设置的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:58:47.680

问题是你包括`https:\\`. 我已经测试了代码，当您仅将`www.google.com`其用作`Dns.GetHostAddresses()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:05:38.760

```
IPAddress[] ips = Dns.GetHostAddresses("www.google.com");

foreach (IPAddress ip in ips)
{
    Console.WriteLine("    {0}", ip);
} 
```

作为测试。工作正常。

# c# - C# If 语句变量不变

> ID：15219357
> 
> 赞同：0
> 
> 时间：2013-03-05T08:47:21.990
> 
> 标签：c#, if-statement

我开始学习 C#，目前，变量并没有像我希望的那样更新。

```
string  Carpet,
        tempCarpet;  
Double  carpetPrice;

do{
Console.WriteLine("What type of carpet do you want: ");
Console.Write("1\. Berber ($3.75) | 2\. Plush ($4.62) | 3\. Barbed ($9.98)");
tempCarpet = Console.ReadLine();
if (tempCarpet == "1") {
    Carpet = "Berber";
    carpetPrice = 3.75;
} else if (tempCarpet == "2") {
    Carpet = "Plush";
    carpetPrice = 4.62;
} else if (tempCarpet == "3") {
    Carpet = "Barbed";
    carpetPrice = 9.98;
} else
    Console.WriteLine("Invalid Selection.");
}while(tempCarpet != "1"|tempCarpet != "2"|tempCarpet !="3"); 

Console.WriteLine("The Carpet" + Carpet + "costs {0:C}", carpetPrice); 
```

` 出现错误，提示使用未分配的局部变量。我希望它采用这种格式，因为我想要选择人们想要的“地毯”。有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:49:08.390

您正在 `Carpet` 条件内进行初始化，编译器无法确定代码是否会到达那里。你可以做

```
string Carpet = null; 
```

或者您可以在 else 的最后部分为其分配一些默认值。

情况也是如此`carpetPrice`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:48:51.223

改变

```
Double = carpetPrice; 
```

到

```
Double carpetPrice; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:50:07.950

您以错误的方式声明变量：

```
string = Carpet,
         tempCarpet;  
Double = carpetPrice; 
```

声明的正确格式为：`datatype var_name [ = value]`

正确的方法是：

```
string Carpet = null, tempCarpet = null;
double carpetPrice = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:50:12.013

这不是可编译的代码；

在顶部：

```
string = Carpet,
                     tempCarpet;  
            Double = carpetPrice; 
```

这应该看起来像

```
string carpet= "";
string tempCarpet = "";
double carpetPrice; 
```

为字符串分配初始值可能会清除问题，以确保在使用之前设置它们。double 是另一回事，因为它是一种值类型。字符串是引用类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T08:50:30.573

这是编译器错误

```
string = Carpet,
                         tempCarpet;  
                Double = carpetPrice; 
```

更正的代码： -

```
string Carpet = tempCarpet;
 Double = carpetPrice = 1020.00; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T08:54:43.807

我宁愿为此使用开关。

```
 switch(tempCarpet){ 

case "1" : Carpet = "Berber";
            carpetPrice = 3.75;
    break;

case "2" : Carpet = "Plush";
            carpetPrice = 4.62;
    break;

case "3" : Carpet = "Barbed";
            carpetPrice = 9.98;
    break;
default : Console.WriteLine("Invalid Selection.");
    break;

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T09:18:06.487

有错误的条件：

```
 }while(tempCarpet != "1"|tempCarpet != "2"|tempCarpet !="3"); 
```

改成：

```
 } while (tempCarpet != "1" && tempCarpet != "2" && tempCarpet != "3"); 
```

但更好的方法是：

```
string Carpet = null;
// ...
// There is some code
// ...
} while (null == Carpet); 
```

# php - PHP SoapServer & 符号被编码

> ID：15219359
> 
> 赞同：3
> 
> 时间：2013-03-05T08:47:26.250
> 
> 标签：php, soap, soapserver

我正在使用 PHP 中的 SoapServer 开发 Web 服务。以前，我使用完全相同的技术制作了另一个 Web 服务。我的新项目在同一台服务器上，但在另一个子目录中。在服务和soapserver 的url 中包含一个版本号。这是我的 SoapServer 在 PHP 中创建的方式：

```
$server = new SoapServer("https://".DOMAIN."/webservice/index.php?v=1.0.0&wsdl=1");
$server->setClass('SoapHandler');
$server->handle(); 
```

在我的示例 Soap Service 中，整个 PHP 页面是相同的，当然只有 url 不同。当我使用soapUI 调用webservice 时，返回以下错误：

```
SOAP-ERROR: Parsing WSDL: Couldn't load from 'https://myurl.com/webservice/index.php?v=1.0.0&amp;wsdl=1' : failed to load external entity "https://myurl.com/webservice/index.php?v=1.0.0&amp;wsdl=1" 
```

如您所见，与号被替换为`&amp;`。我尝试将编码更改为 UTF-8，这也不起作用。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:49:07.687

您必须在文件中启用您的 openssl 模块`php.ini`。否则，您将无法使用 SSL (https) 访问域。

否则，您应该从本地服务器检查您的域，并使用 curl 或 lynx 检查 WSDL 文件的返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:10:13.287

我们有一个.htaccess，只允许我的IP地址，而它也应该允许服务器的IP..删除它解决了这个问题。谢谢你的帮助！

# rhino - 使用stealjs构建时将自定义构建选项传递给闭包

> ID：15219361
> 
> 赞同：1
> 
> 时间：2013-03-05T08:47:32.213
> 
> 标签：rhino, google-closure-compiler, javascriptmvc, stealjs

我正在使用 JavascriptMVC 构建具有 StealJS 构建功能的应用程序。这是我的`build.js`：

```
load("steal/rhino/rhino.js");
steal('steal/build').then('steal/build/scripts','steal/build/styles',function(){
    steal.build('evi2/scripts/build.html',{to: 'mylovelyapp'});
}); 
```

这工作正常。但是，我很想使用 Google Closures`@define`语法在构建时更改一些变量。虽然修改窃取非常简单`steal/build/scripts/scripts.js`，但我显然更喜欢`--define`在我的构建脚本或项目文件中的某处传递标志。

任何关于如何实现这一目标的想法都将受到高度赞赏。

# xml - 选择唯一属性组

> ID：15219363
> 
> 赞同：0
> 
> 时间：2013-03-05T08:47:36.923
> 
> 标签：xml, xslt

我的 xslt 背景很差，我需要转换如下所示的 XML：

```
<row attribute1="1" attribute2="something" attribute3="somevalue">
<row attribute1="1" attribute2="something" attribute3="somevalue">
<row attribute1="2" attribute2="anotherthing" attribute3="somevalue"> 
```

在看起来像这样的东西中：

```
<row attribute1="1">
<row attribute1="2"> 
```

转换任务还有两个要求。我想得到与上面相同的结果，但我想更改属性名称，例如：

```
<row new_name_for_attribute1="1">
<row new_name_for_attribute1="2"> 
```

最后一个要求是该方法可以应用于单个属性（如前面的示例）、它们的子集（attribute1 和 attribute3）或行元素的所有属性

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:58:36.210

如果您想进一步了解 XSLT 的复杂性，您可能有兴趣了解一种称为[Muenchian Grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html)的技术，该技术可用于解决您的问题。要获得不同的行，您可以按**attribute1**有效地将它们分组，然后为每个组选择组中的第一个元素。（或者丢弃不是第一个的元素）。Muenchian Grouping 是在 XSLT 1.0 中实现这一目标的最有效方式。

在这种情况下，您首先定义一个键来指示您的组，在您的情况下是**行**元素，按**attribute1分组**

```
<xsl:key name="row" match="row" use="@attribute1" /> 
```

如果您想选择不同的**行**元素，您将选择在给定**属性**的键中首先出现的**行元素1**

 **```
<xsl:apply-templates select="row[generate-id() = generate-id(key('row', @attribute1)[1])]" /> 
```

或者，您可以有一个模板来忽略重复的**行**元素（即不是组中的第一个）

```
<xsl:template match="row[generate-id() != generate-id(key('row', @attribute1)[1])]" /> 
```

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="row" match="row" use="@attribute1" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="row[generate-id() != generate-id(key('row', @attribute1)[1])]" />   
</xsl:stylesheet> 
```

应用于以下 XML 时

```
<rows>
   <row attribute1="1" attribute2="something" attribute3="somevalue" />
   <row attribute1="1" attribute2="something" attribute3="somevalue" />
   <row attribute1="2" attribute2="anotherthing" attribute3="somevalue" />
</rows> 
```

以下是输出

```
<rows>
   <row attribute1="1" attribute2="something" attribute3="somevalue"></row>
   <row attribute1="2" attribute2="anotherthing" attribute3="somevalue"></row>
</rows> 
```

XSLT 可以很容易地扩展为重命名属性，或者排除它们，如 ljdelight 的回答中所述。此外，如果您想在测试中包含第二个属性，您可以像这样扩展您的密钥：

```
<xsl:key name="row" match="row" use="concat(@attribute1, '|', @attribute3)" /> 
```

并且忽略重复项，模板看起来像这样

```
<xsl:template match="row
     [generate-id() != generate-id(key('row', concat(@attribute1, '|', @attribute3))[1])]" /> 
```

这里唯一需要注意的是管道字符 | 的使用。作为分隔符。如果需要，这可以是任何其他字符，只要它不出现在属性值中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:24:06.843

您可以轻松地转换 XML。这里有一个小代码，你可以学习一些xsl。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes" />
   <xsl:template match="@*|node()">
       <xsl:copy>
           <xsl:apply-templates select="@*|node()"/>
       </xsl:copy>
   </xsl:template>

   <!-- drop a row that matches a previous row of the same id -->
   <xsl:template match="row[ preceding-sibling::row/@attribute1 = @attribute1 ]" />

   <!-- do stuff with the row. this template is equivalent to the default template copy. -->
   <xsl:template match="row">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()" />
      </xsl:copy>
   </xsl:template>

   <!-- drop attribute2 attributes -->
   <xsl:template match="@attribute2" />

   <!-- rename attribute1 -->
   <xsl:template match="@attribute1">
      <xsl:attribute name="new_name_for_attribute1">
         <xsl:value-of select="."/>
      </xsl:attribute>
   </xsl:template>
</xsl:stylesheet> 
```

使用此输入：

```
<table>
   <row attribute1="1" attribute2="something" attribute3="somevalue">
      <p>foo</p>
   </row>
   <row attribute1="1" attribute2="something" attribute3="somevalue">
      <p>bar</p>
   </row>
   <row attribute1="2" attribute2="anotherthing" attribute3="somevalue">
      <p>bazinga</p>
   </row>
</table> 
```

为您提供以下输出：

```
<table>
   <row new_name_for_attribute1="1" attribute3="somevalue">
      <p>foo</p>
   </row>
   <row new_name_for_attribute1="2" attribute3="somevalue">
      <p>bazinga</p>
   </row>
</table> 
```**

# ios - trigger.io 自定义原生按钮工具栏和标签栏

> ID：15219367
> 
> 赞同：1
> 
> 时间：2013-03-05T08:47:47.527
> 
> 标签：ios, user-interface, trigger.io

是否可以在 trigger.io 中自定义 topbar 和 tabbar 按钮背景？

具体来说，我希望能够指定“活动”状态背景，而不是默认值。

但是，我怀疑这不在 trigger.io 的目标范围之内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:02:59.680

目前，不 - 这些背景是不可配置的。

如果对您来说很紧急，可以使用[本机插件](http://docs.trigger.io/en/v1.4/modules/native/)来实现。如果这不是您的选择，我们可以并且会自己添加到 tabbar 和 topbar 模块中：与 support@trigger.io 联系以讨论时间表。

# google-geocoding-api - 谷歌地理编码API的问题

> ID：15219387
> 
> 赞同：0
> 
> 时间：2013-03-05T08:48:58.760
> 
> 标签：google-geocoding-api

一个程序，它从数据库中获取地址并向 google geocode api 发出请求以获取地址。

这是我观察到的错误，任何人都可以帮助我如何使谷歌的响应更准确。

1.  它忽略城市并返回具有相同名称但在不同城镇的街道的坐标，例如

Vidin, Perushtica 5 它返回 Haskovo, Perushtica 5 的坐标

2.我观察到有时例如今天我有 1000 个地址，当我看到结果时，我看到谷歌没有找到格式正确的地址，当我去谷歌网站[https://maps.google.bg/maps ?hl=en&tab=wl](https://maps.google.bg/maps?hl=en&tab=wl)并输入地址 - 它完美地找到它。今天我决定检查其中一个地址，这次它找到了。为什么有时它会找到它有时不会

我的代码

```
public class TestCon {
        static URL url;
        static String nodeString="";
        static String nody="";
        //static String[] nodeString={};
        static String elementValue = "";
        static String townstr;
        static String streetstr;
        static String urlString;
        static Document geocoderResultDocument;

        static NodeList nodes2;
        static Connection conn2 = null;
        static NodeList nodes; 
        private static final String GEOCODE_REQUEST_PREFIX = "http://maps.google.com/maps/api/geocode/xml";

        public String _xpath = null;
        public Document _xml = null;

        public static void main(String[] args) throws IOException,  URISyntaxException, ParserConfigurationException, SAXException, ClassNotFoundException, SQLException 
        {          Class.forName("org.postgresql.Driver");

        try 
        {
            conn2 = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/plovdivbizloca",
                    "postgres", "tan");
        }

        catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

       for (int j=1;j<1000;j++)

        {
           try 
        {
        conn2 = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/plovdivbizloca",
                    "postgres", "tan");
        }

        catch (SQLException ex) 
        {

            ex.printStackTrace();
        }

        Statement mystmt = null;

        String selectQuery = "SELECT main_office_town, address FROM pl_biz where id="+j;

        try
        {
            mystmt = conn2.createStatement();
            ResultSet mysr = mystmt.executeQuery(selectQuery);

            ResultSetMetaData rsmd = mysr.getMetaData();
            int colCount = rsmd.getColumnCount();

             elementValue="";

            while (mysr.next()) 
            {

                for (int i = 1; i <= colCount; i++) 
                {

                     elementValue += mysr.getString(i);
                    if (i < colCount)
                        elementValue += ",";
                }
                townstr = mysr.getString(1);
                streetstr = mysr.getString(2);
                System.out.println(elementValue);
                System.out.println(townstr);
                System.out.println(streetstr);

            }

         }
        catch (Exception ex) 
        {
        }
        // NEW GEOCODING;

        String inputQuery, resultXml,  xPathString, xi = null;
        inputQuery = elementValue;

        urlString = GEOCODE_REQUEST_PREFIX + "?address=" + URLEncoder.encode(inputQuery, "UTF-8") + "&sensor=false";
        //System.out.println(urlString);

        // Convert the string to a URL so we can parse it
         url = new URL(urlString);

         geocoderResultDocument = makeConnection(url);

        // Process the results
        xPathString = "//GeocodeResponse//location/lat";
        nodes = process(geocoderResultDocument, xPathString);
        xi = "//GeocodeResponse//location/lng";
         nodes2 = process(geocoderResultDocument, xi);

        if ((nodes.getLength()==0)&&(nodes2.getLength()==0))
        {
            System.out.println ("You're here");
            urlString = GEOCODE_REQUEST_PREFIX + "?address=" + URLEncoder.encode(townstr, "UTF-8") + "&sensor=false";
            //System.out.println(urlString);

            // Convert the string to a URL so we can parse it
             url = new URL(urlString);

             geocoderResultDocument = makeConnection(url);
             nodes = process(geocoderResultDocument, xPathString);
             nodes2 = process(geocoderResultDocument, xi);

        }

        if ((nodes.getLength()>1)&&(nodes2.getLength()>1))  
        {
           System.out.println("morethan one");
        }

        // Print results
        //for (int i = 0; i < nodes.getLength(); i++) 
        //{ 
           nodeString = nodes.item(0).getTextContent();
          // nodeString = nodes(i).getTextContent();
            System.out.println("lat_cordinate:"  + nodeString);

        //}

        //for (int i = 0; i < nodes2.getLength(); i++) 
        //{ 
           nody = nodes2.item(0).getTextContent();
          // nodeString = nodes(i).getTextContent();
            System.out.println("longitude:" + nody);

        //} 

      }
    }

    private void TestCon() {
    }

    public static NodeList process(Document xml, String xPathStrings)
            throws IOException {

        NodeList result = null;

        XPathFactory factory = XPathFactory.newInstance();

        XPath xpath = factory.newXPath();

        try {
            result = (NodeList) xpath.evaluate(xPathStrings, xml,
                    XPathConstants.NODESET);
        }
        catch (XPathExpressionException ex) {
            ex.printStackTrace();
        }

        return result;
    }

  public static  Document makeConnection(URL url) throws IOException, SAXException, ParserConfigurationException    
  { 
  HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    Document geocoderResultDocument = null;
    try 
    {
        // open the connection and get results as InputSource.
        conn.connect();
        InputSource geocoderResultInputSource = new InputSource(conn.getInputStream());

        // read result and parse into XML Document
        geocoderResultDocument = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(geocoderResultInputSource);
    } 
    finally 
    {
        conn.disconnect();
    }

    return geocoderResultDocument;
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:20:15.883

对于 #2，请参阅[https://developers.google.com/maps/faq#geocoder_differences](https://developers.google.com/maps/faq#geocoder_differences)

这两种不同的服务使用不同的数据集。

至于#1，可能是地理编码器在一个城镇找不到地址，于是尝试了附近的另一个城镇。

# windows-phone-8 - 我可以用什么来替换 Windows Phone 8 中的 InMemoryRandomAccessStream？

> ID：15219395
> 
> 赞同：4
> 
> 时间：2013-03-05T08:49:21.863
> 
> 标签：windows-phone-8

我知道 WinRT 中的 IRandomAccessStream 接口有两个类，FileRandomAccessStream 和 InMemoryRandomAccessStream。

现在我将我的一个应用程序移植到 wp8，我的一些方法需要 IRandomAccessStream 作为返回类型，但我找不到 InMemoryRandomAccessStream。

在 Windows Phone 8 中没有 InMemoryRandomAccessStream 的情况下，如何创建内存流并从中获取 IRandomAccessStream？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:33:57.423

遇到同样的事情。我最终使用了一个随机访问的临时文件流。

这是从

[windows.storage.applicationdata.temporaryfolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.temporaryfolder)实际上没有实现，所以我在本地文件夹中创建了一个文件（确保在之后删除它，因为你想要一些临时的东西？）。

和

[windows.storage.streams.inmemoryrandomaccessstream](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.inmemoryrandomaccessstream)

这是稍微采用的示例代码：

```
 private async void TransferData()//object sender, RoutedEventArgs e)
    {
        Windows.Storage.StorageFolder temporaryFolder = ApplicationData.Current.LocalFolder;

        // Write data to a file
        StorageFile sampleFile = await temporaryFolder.CreateFileAsync("tempStream.txt", Windows.Storage.CreationCollisionOption.ReplaceExisting);
        IRandomAccessStream acccessStream = await sampleFile.OpenAsync(FileAccessMode.ReadWrite);

        // Initialize the in-memory stream where data will be stored.
        using (var stream = acccessStream)
        {
            // Create the data writer object backed by the in-memory stream.
            using (var dataWriter = new Windows.Storage.Streams.DataWriter(stream))
            {
                dataWriter.UnicodeEncoding = Windows.Storage.Streams.UnicodeEncoding.Utf8;
                dataWriter.ByteOrder = Windows.Storage.Streams.ByteOrder.LittleEndian;

                // Parse the input stream and write each element separately.
                string[] inputElements = "this;really;works".Split(';');
                foreach (string inputElement in inputElements)
                {
                    uint inputElementSize = dataWriter.MeasureString(inputElement);
                    dataWriter.WriteUInt32(inputElementSize);
                    dataWriter.WriteString(inputElement);
                    System.Diagnostics.Debug.WriteLine("Wrote: " + inputElement);
                }

                // Send the contents of the writer to the backing stream.
                await dataWriter.StoreAsync();

                // For the in-memory stream implementation we are using, the flushAsync call 
                // is superfluous,but other types of streams may require it.
                await dataWriter.FlushAsync();

                // In order to prolong the lifetime of the stream, detach it from the 
                // DataWriter so that it will not be closed when Dispose() is called on 
                // dataWriter. Were we to fail to detach the stream, the call to 
                // dataWriter.Dispose() would close the underlying stream, preventing 
                // its subsequent use by the DataReader below.
                dataWriter.DetachStream();
            }

            // Create the input stream at position 0 so that the stream can be read 
            // from the beginning.
            using (var inputStream = stream.GetInputStreamAt(0))
            {
                using (var dataReader = new Windows.Storage.Streams.DataReader(inputStream))
                {
                    // The encoding and byte order need to match the settings of the writer 
                    // we previously used.
                    dataReader.UnicodeEncoding = Windows.Storage.Streams.UnicodeEncoding.Utf8;
                    dataReader.ByteOrder = Windows.Storage.Streams.ByteOrder.LittleEndian;

                    // Once we have written the contents successfully we load the stream.
                    await dataReader.LoadAsync((uint)stream.Size);

                    var receivedStrings = "";

                    // Keep reading until we consume the complete stream.
                    while (dataReader.UnconsumedBufferLength > 0)
                    {
                        // Note that the call to readString requires a length of "code units" 
                        // to read. This is the reason each string is preceded by its length 
                        // when "on the wire".
                        uint bytesToRead = dataReader.ReadUInt32();
                        receivedStrings += dataReader.ReadString(bytesToRead) + "\n";
                    }

                    // Populate the ElementsRead text block with the items we read 
                    // from the stream.
                    System.Diagnostics.Debug.WriteLine("Read: " + receivedStrings);

                }
            }
        }
    } 
```

确保使用 windows.storage 命名空间。

关键是这一行：

> IRandomAccessStream 访问流 = 等待 sampleFile.OpenAsync(FileAccessMode.ReadWrite);

我不确定速度的影响是什么。

# azure - 使用 Azure 网站，但是 Web 邮件解决方案呢？

> ID：15219396
> 
> 赞同：5
> 
> 时间：2013-03-05T08:49:42.460
> 
> 标签：azure, cloud, imap, webmail

使用 windows azure 已经有一段时间了，我非常喜欢它，但是大多数网站的一个共同要求是提供一个 web 邮件和 POP / IMAP 解决方案，就像你从 godaddy 获得的传统共享虚拟主机一样。

由于任何人对此都有任何解决方案，因此我正在寻求一种方法，为拥有域的客户提供具有 POP 和 IMAP 访问权限的 Web 邮件平台。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:32:09.777

> **更新：Outlook.com 不再提供对自定义域管理的支持。鼓励希望管理自定义域的新客户使用 Office 365**不再使用自定义域：[https](https://domains.live.com/) : //www.domains.live.com。工作但不是免费的：http: [//windows.microsoft.com/en-us/outlook/migrate-custom-domain](http://windows.microsoft.com/en-us/outlook/migrate-custom-domain)

~~Microsoft 的 Live Custom Domains 服务。** 这是您**自己**（客户）**域的****免费服务**。您可以设置**CNAME**，例如。mail.yourdomain.com。您将获得具有新**Outlook.com**外观的**POP3、IMAP、EAS 。**~~

 ******在您的**电子邮件客户端软件**中使用 POP3 或 IMAP 访问帐户：http : [//windows.microsoft.com/en-GB/windows/outlook/send-receive-from-app](http://windows.microsoft.com/en-GB/windows/outlook/send-receive-from-app)

**您还可以免费**获得**SkyDrive**云存储： http: [//skydrive.com/](http://skydrive.com/)

 ****微软**在这里有一个很好的文档**API** ：http : [//isdk.dev.live.com/](http://isdk.dev.live.com/)和[http://msdn.microsoft.com/en-us/library/live/hh243648.aspx](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx)

作为具有巨大流量的**SMTP**服务器，您可以使用 SendGrid，每天最多**200 封邮件**也是**免费**的。 [http://sendgrid.com/pricing.html](http://sendgrid.com/pricing.html)

**SendGrid**具有很好的统计和分类功能，其**API**非常强大：[http ://sendgrid.com/docs/](http://sendgrid.com/docs/)********

# android - 在 Android maven 项目中使用 Guice 进行 VerrifyError

> ID：15219397
> 
> 赞同：8
> 
> 时间：2013-03-05T08:49:42.617
> 
> 标签：android, maven, guice, android-maven-plugin

所以我试图让 Guice 在我的 android maven 项目中运行并捆绑在第 3 方模块中。它在进行测试注入的普通 junittest 中运行良好，但在 VM 上失败并附有下面的 logcat 消息。

我无法理解的是，有许多关于 Guice 在 android 上运行良好的报告。尽管如此，我的代码似乎在从 Guice 注入器调用 getBeanInfo() 时失败了。看来我不是唯一一个有这个错误的人。

[Android 错误“无法解析虚拟方法 java/beans/PropertyDescriptor”是否有解决方法？](https://stackoverflow.com/questions/5488236/is-there-a-work-around-for-the-android-error-unable-to-resolve-virtual-method-j)

所以我有几个问题。Guice 对我不起作用的原因是因为我的 3rd 方模块正在调用某些功能，这些功能会在所有地方都失败但并不常见？有没有办法从 Guice 中获取更多关于触发有问题的 getBeanInfo() 的具体信息？有变通办法吗？我可以通过哪些途径进行进一步调试。

该解决方案必须与 maven 兼容，因为对于类似问题的有关调整 eclipse 设置以解决类似问题的类似问题的答案不适用。[得到“引起：java.lang.VerifyError：”](https://stackoverflow.com/questions/6247862/getting-caused-by-java-lang-verifyerror) （不是说我在这里有很多里程）。

我认为所有相关文件都由 dx 由 android maven 插件处理，因为 dependency:tree 显示了“编译”范围内的所有相关项目，但我不是这里的专家。

```
03-05 00:57:34.529: I/dalvikvm(2295): threadid=3: 对信号 3 做出反应
03-05 00:57:34.568: I/dalvikvm(2295): 将堆栈跟踪写入“/data/anr/traces.txt”
03-05 00:57:35.059: I/dalvikvm(2295): threadid=3: 对信号 3 做出反应
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 无法在自己的类加载器中加载终结器。而是在当前类加载器中加载终结器。因此，您将无法对此类加载器进行垃圾收集。要支持回收此类加载器，请解决根本问题，或将 Google 收藏集移至您的系统类路径。
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): java.io.FileNotFoundException: com/google/inject/internal/util/$Finalizer.class
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$FinalizableReferenceQueue$DecoupledLoader.getBaseUrl(FinalizableReferenceQueue.java:269)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$FinalizableReferenceQueue$DecoupledLoader.loadFinalizer(FinalizableReferenceQueue.java:253)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$FinalizableReferenceQueue.loadFinalizer(FinalizableReferenceQueue.java:175)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$FinalizableReferenceQueue.(FinalizableReferenceQueue.java:100)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$MapMaker$QueueHolder.(MapMaker.java:787)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$MapMaker$WeakEntry.(MapMaker.java:946)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$MapMaker$Strength$1.newEntry(MapMaker.java:312)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$MapMaker$StrategyImpl.newEntry(MapMaker.java:498)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$MapMaker$StrategyImpl.newEntry(MapMaker.java:419)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.util.$CustomConcurrentHashMap$ComputingImpl.get(CustomConcurrentHashMap.java:2029)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.Annotations$AnnotationChecker.hasAnnotations(Annotations.java:116)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.Annotations.isScopeAnnotation(Annotations.java:124)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.ScopeBindingProcessor.visit(ScopeBindingProcessor.java:40)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.ScopeBindingProcessor.visit(ScopeBindingProcessor.java:30)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.spi.ScopeBinding.acceptVisitor(ScopeBinding.java:59)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.AbstractProcessor.process(AbstractProcessor.java:55)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:165)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:103)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.Guice.createInjector(Guice.java:95)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.Guice.createInjector(Guice.java:72)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.google.inject.Guice.createInjector(Guice.java:62)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 za.co.mambo.cherrylist.android.CherryListActivity.onCreate(CherryListActivity.java:27)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.app.Activity.performCreate(Activity.java:4465)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.app.ActivityThread.access$600(ActivityThread.java:123)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.os.Handler.dispatchMessage(Handler.java:99)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.os.Looper.loop(Looper.java:137)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 android.app.ActivityThread.main(ActivityThread.java:4424)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 java.lang.reflect.Method.invokeNative(Native Method)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 java.lang.reflect.Method.invoke(Method.java:511)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-05 00:57:35.098: W/nalizableReferenceQueue(2295): 在 dalvik.system.NativeStart.main(Native Method)
03-05 00:57:35.108: I/dalvikvm(2295): 将堆栈跟踪写入“/data/anr/traces.txt”
03-05 00:57:35.338: D/dalvikvm(2295): GC_CONCURRENT 释放 391K，4% 释放 12676K/13127K，暂停 8ms+5ms
03-05 00:57:35.418: W/dalvikvm(2295): VFY: 无法找到签名中引用的类 ([Ljava/beans/PropertyDescriptor;)
03-05 00:57:35.418: W/dalvikvm(2295): VFY: 无法找到签名中引用的类 ([Ljava/beans/PropertyDescriptor;)
03-05 00:57:35.418: W/dalvikvm(2295): VFY: 无法找到签名中引用的类 ([Ljava/beans/PropertyDescriptor;)
03-05 00:57:35.418: W/dalvikvm(2295): VFY: 无法找到签名中引用的类 ([Ljava/beans/PropertyDescriptor;)
03-05 00:57:35.418: W/dalvikvm(2295): VFY: 无法找到签名中引用的类 ([Ljava/beans/PropertyDescriptor;)
03-05 00:57:35.428: W/dalvikvm(2295): VFY: 无法找到签名中引用的类 ([Ljava/beans/PropertyDescriptor;)
03-05 00:57:35.438: I/dalvikvm(2295): 找不到方法 java.beans.Introspector.getBeanInfo，引用自方法 com.google.inject.internal.cglib.core.$ReflectUtils.getPropertiesHelper
03-05 00:57:35.438: W/dalvikvm(2295): VFY: 无法解析静态方法 8989: Ljava/beans/Introspector;.getBeanInfo (Ljava/lang/Class;Ljava/lang/Class;)Ljava/beans /豆信息；
03-05 00:57:35.438: D/dalvikvm(2295): VFY: 在 0x000c 处替换操作码 0x71
03-05 00:57:35.458: W/dalvikvm(2295): VFY: 无法解析异常类 1373 (Ljava/beans/IntrospectionException;)
03-05 00:57:35.458: W/dalvikvm(2295): VFY: 无法在地址 0x4e 找到异常处理程序
03-05 00:57:35.458: W/dalvikvm(2295): VFY: 拒绝 Lcom/google/inject/internal/cglib/core/$ReflectUtils;.getPropertiesHelper (Ljava/lang/Class;ZZ)[Ljava/beans/属性描述符；
03-05 00:57:35.458: W/dalvikvm(2295): VFY: 在 0x004e 拒绝操作码 0x0d
03-05 00:57:35.458: W/dalvikvm(2295): VFY: 拒绝 Lcom/google/inject/internal/cglib/core/$ReflectUtils;.getPropertiesHelper (Ljava/lang/Class;ZZ)[Ljava/beans/属性描述符；
03-05 00:57:35.458: W/dalvikvm(2295): 验证器拒绝类 Lcom/google/inject/internal/cglib/core/$ReflectUtils；
03-05 00:57:35.488: D/AndroidRuntime(2295): 关闭 VM
03-05 00:57:35.498: W/dalvikvm(2295): threadid=1: 线程以未捕获的异常退出 (group=0x409c01f8)
03-05 00:57:35.508: I/dalvikvm(2295): threadid=3: 对信号 3 做出反应
03-05 00:57:35.548: I/dalvikvm(2295): 将堆栈跟踪写入“/data/anr/traces.txt”
03-05 00:57:35.568：E/AndroidRuntime（2295）：致命异常：主要
03-05 00:57:35.568: E/AndroidRuntime(2295): java.lang.RuntimeException: 无法启动活动 ComponentInfo{za.co.mambo.cherrylist.android/za.co.mambo.cherrylist.android.CherryListActivity} ：com.google.inject.internal.util.$ComputationException：java.lang.VerifyError：com/google/inject/internal/cglib/core/$ReflectUtils
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.app.ActivityThread.access$600(ActivityThread.java:123)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.os.Handler.dispatchMessage(Handler.java:99)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.os.Looper.loop(Looper.java:137)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.app.ActivityThread.main(ActivityThread.java:4424)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 java.lang.reflect.Method.invokeNative(Native Method)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 java.lang.reflect.Method.invoke(Method.java:511)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-05 00:57:35.568: E/AndroidRuntime(2295): at dalvik.system.NativeStart.main(Native Method)
03-05 00:57:35.568: E/AndroidRuntime(2295): 由: com.google.inject.internal.util.$ComputationException: java.lang.VerifyError: com/google/inject/internal/cglib/core/ $ReflectUtils
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:553)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:419)
03-05 00:57:35.568: E/AndroidRuntime(2295): at com.google.inject.internal.util.$CustomConcurrentHashMap$ComputingImpl.get(CustomConcurrentHashMap.java:2041)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.FailableCache.get(FailableCache.java:50)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.ConstructorInjectorStore.get(ConstructorInjectorStore.java:49)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.ConstructorBindingImpl.initialize(ConstructorBindingImpl.java:125)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.InjectorImpl.initializeJitBinding(InjectorImpl.java:521)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.InjectorImpl.createJustInTimeBinding(InjectorImpl.java:847)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive(InjectorImpl.java:772)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.InjectorImpl.getJustInTimeBinding(InjectorImpl.java:256)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.InjectorImpl.getBindingOrThrow(InjectorImpl.java:205)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.InjectorImpl.getInternalFactory(InjectorImpl.java:853)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.FactoryProxy.notify(FactoryProxy.java:46)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.ProcessedBindingData.runCreationListeners(ProcessedBindingData.java:50)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:133)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.Guice.createInjector(Guice.java:95)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.Guice.createInjector(Guice.java:72)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.Guice.createInjector(Guice.java:62)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 za.co.mambo.cherrylist.android.CherryListActivity.onCreate(CherryListActivity.java:27)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.app.Activity.performCreate(Activity.java:4465)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-05 00:57:35.568: E/AndroidRuntime(2295): ... 11 更多
03-05 00:57:35.568: E/AndroidRuntime(2295): 由: java.lang.VerifyError: com/google/inject/internal/cglib/core/$ReflectUtils
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.cglib.reflect.$FastClassEmitter.(FastClassEmitter.java:67)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.cglib.reflect.$FastClass$Generator.generateClass(FastClass.java:72)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.cglib.core.$DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.cglib.core.$AbstractClassGenerator.create(AbstractClassGenerator.java:216)
03-05 00:57:35.568: E/AndroidRuntime(2295): at com.google.inject.internal.cglib.reflect.$FastClass$Generator.create(FastClass.java:64)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.BytecodeGen.newFastClass(BytecodeGen.java:207)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.DefaultConstructionProxyFactory.create(DefaultConstructionProxyFactory.java:53)
03-05 00:57:35.568: E/AndroidRuntime(2295): 在 com.google.inject.internal.ProxyFactory.create(ProxyFactory.java:153)
03-05 00:57:35.568: E/AndroidRuntime(2295): at com.google.inject.internal
03-05 00:57:36.178: I/dalvikvm(2295): threadid=3: 对信号 3 做出反应
03-05 00:57:36.188: I/dalvikvm(2295): 将堆栈跟踪写入“/data/anr/traces.txt”
03-05 00:57:36.530: I/dalvikvm(2295): threadid=3: 对信号 3 做出反应
03-05 00:57:36.538: I/dalvikvm(2295): 将堆栈跟踪写入“/data/anr/traces.txt”

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T22:14:29.930

dalvik vm 不支持面向切面的编程，因此您不能使用普通的 JVM Guice。您必须使用 no_aop 版本。

使用 Maven 构建使用

```
<dependency>
  <groupId>com.google.inject</groupId>
  <artifactId>guice</artifactId>
  <version>3.0</version>
  <classifier>no_aop</classifier>
</dependency> 
```

将 no_aop jar 放入您的构建和 apk。

当然你也可以看看使用 RoboGuice。

# iphone - 为什么标签栏上半部分的颜色比下半部分浅

> ID：15219400
> 
> 赞同：0
> 
> 时间：2013-03-05T08:49:49.980
> 
> 标签：iphone, ios, ios5

我在 iphone 底部创建了一个导航标签栏，并使用深灰色作为色调。一切都很好，除了上半部分的颜色比下半部分浅一点。我也没有通过在 viewDidLoad 中以编程方式设置背景颜色和色调来修复它。这个问题发生在模拟器和我的 iphone 5

![在此处输入图像描述](../Images/157c4f721816cdc1d659e1f3cc027910.png)

![故事板中的标签栏设置](../Images/a31b9d1694216b196223b31cfca3a128.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:04:30.680

这个效果是系统默认添加的，不是bug或者问题。

您可以通过这种方式自定义 UITabBar：

```
 tabController.tabBar.backgroundImage = [UIImage imageNamed: @"TabBarBG"]; 
```

不仅重置背景颜色或色调颜色。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:41:22.320

这就是系统自动添加的“渐变”视觉效果。你可以自己写一个自定义标签栏来改变效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:44:39.873

这是标签栏的默认行为。

但是，您可以通过为标签栏设置 bakgroundimage 来更改此设置。

# c - 扫描一个变量并在 do while 循环中使用它

> ID：15219401
> 
> 赞同：0
> 
> 时间：2013-03-05T08:49:51.100
> 
> 标签：c, do-while

```
#include <stdio.h>
void main()
{
char ans='n';
 do
 {
     printf("\n Enter yes or no:");
     scanf("%c",ans);
     printf("\n entered %c",ans);
 }while(ans == 'y');
} 
```

就像循环正在执行并且 scanf 正在工作并打印我的答案（比如说我的答案是 y）一样，它第二次出现但没有进行扫描并退出。我可以知道这是什么原因吗？为什么会发生这种情况以及处理无限循环的正确方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:52:03.013

首先，您`&`在 scanf 中缺少 a：

```
scanf("%c", &ans);
            ^ 
```

其次，您没有处理换行符，`%c`格式说明符不会忽略空格。所以你读了一个字符，按回车，下一个`scanf`立刻就满足了`\n`。在`scanf`尝试中忽略空格：

```
scanf(" %c", &ans);
       ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:58:22.343

您不仅缺少`&address-of`其他答案中指示的运算符，而且还缺少返回值检查。考虑用户是否在 Windows 中按 CTRL+Z 或在 Linux 中按 CTRL+d 来关闭标准输入。您的循环将无限运行并冻结您的应用程序；）

```
if (scanf("%c", &ans) != 1) {
    break;
} 
```

或者，我建议使用它，`getchar`因为它更清洁：

```
int main(void) { /* NOTE: There is no "void main()" entrance point in C. main should always return 'int'. */
    int c;
    do {
        c = getchar();
    } while (c == 'y');
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T08:56:24.490

使用*fflush(stdin)*刷新那些返回的提要。

但是当您输入单个字符时，为什么不使用*getchar()*呢？

* * *

编辑：正如 cnicutar 正确指出的那样， fflush(stdin) 具有未定义的行为。似乎没有任何内置函数可以解决这个问题，因此必须在代码本身中加以处理。

一个例子可能是：

```
 int ch;
    while ((ch = getchar()) != '\n' && ch != EOF); 
```

感谢您指出这一点！

# magento - Magento，启用 DHL，“站点 ID 错误”

> ID：15219403
> 
> 赞同：2
> 
> 时间：2013-03-05T08:49:52.913
> 
> 标签：magento

我们刚刚尝试在我们的 Magento 后端启用 DHL 运输方式，并且由于某种原因，上面提到的“站点 ID 错误”错误不断出现。我们已经检查并重新检查了我们的信息是否正确，并尝试搜索类似的问题，但找不到任何匹配或已回答的问题。在挖掘日志后，我们发现了以下内容：

```
(   
    [request] => <?xml version="1.0" encoding="UTF-8"?>
<p:DCTRequest xmlns:p="http://www.dhl.com" xmlns:p1="http://www.dhl.com/datatypes" xmlns:p2="http://www.dhl.com/DCTRequestdatatypes" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.dhl.com DCT-req.xsd "><GetQuote xmlns=""><Request><ServiceHeader><SiteID>*site id*</SiteID><Password>*password*</Password></ServiceHeader></Request><From><CountryCode>EE</CountryCode><Postalcode>11911</Postalcode><City>Tallinn</City></From><BkgDetails><PaymentCountryCode>EE</PaymentCountryCode><Date>2013-03-04</Date><ReadyTime>PT48H00M</ReadyTime><DimensionUnit>CM</DimensionUnit><WeightUnit>KG</WeightUnit><Pieces xmlns=""><Piece xmlns=""><PieceID>1</PieceID><Weight>1.5</Weight></Piece></Pieces><PaymentAccountNumber>323080462</PaymentAccountNumber><IsDutiable>Y</IsDutiable></BkgDetails><To><CountryCode>SG</CountryCode><Postalcode>510583</Postalcode><City>Singapore</City></To><Dutiable><DeclaredCurrency>EUR</DeclaredCurrency><DeclaredValue>166.25</DeclaredValue></Dutiable></GetQuote></p:DCTRequest>

    [result] => <?xml version="1.0" encoding="UTF-8"?><res:ErrorResponse xmlns:res='http://www.dhl.com' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation= 'http://www.dhl.com err-res.xsd'>
    <Response>
        <ServiceHeader>
            <MessageTime>2013-03-03T22:58:48+00:00</MessageTime>
            <SiteID>*site id*</SiteID>
            <Password>*site id*</Password>
        </ServiceHeader>
        <Status>
            <ActionStatus>Error</ActionStatus>
            <Condition>
                <ConditionCode>100</ConditionCode>
                <ConditionData>Validation Failure:Site Id is wrong</ConditionData>
            </Condition>
        </Status>
    </Response></res:ErrorResponse>
    [__pid] => 11937
)

2013-03-04T00:58:45+00:00 DEBUG (7): Array
(   
    [100] => Error #100 : Validation Failure:Site Id is wrong
    [__pid] => 11937
) 
```

如果您仔细阅读，稍后的代码似乎出于某种原因将站点 ID 作为站点 ID 和密码发送（我们再次检查了站点 ID 和密码是否已正确输入到配置中）。

有没有人遇到过类似的问题或知道我们可以在哪里寻找解决方案？

任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T13:08:36.347

我与 DHL 打过电话：您需要在 DHL 后端创建另一个站点帐户并将这些凭据用作登录名 - 现在可以正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:21:47.633

您是否向 DHL 申请了开发者凭证？或者您是否使用您创建的用户名和密码登录 DHL 网站上的普通客户帐户？我遇到了与您描述的相同的问题，即使在 DHL 向我发送了唯一的站点 ID 和密码（您必须填写表格并请求访问他们的 xml 服务）之后，我仍然收到“站点 ID 错误”错误。对我有用的是将“帐号”字段留空（在 Magento 后端的运输选项> DHL 下）。

# android - 从 DatePicker 格式化日期

> ID：15219404
> 
> 赞同：0
> 
> 时间：2013-03-05T08:49:57.887
> 
> 标签：android

我知道我可以使用以下方法从日期选择器中获取日期：

*   datepicker1.getDayOfMonth()
*   datepicker2.getMonth()
*   datepicker3.getYear()

我还使用以下方法从时间选择器获取时间：

*   timepicker1.getCurrentHour()
*   timepicker2.getCurrentMinute()

我需要将此数据格式化为“yyyy-MM-dd HH:mm:ss”格式，以将其作为 DATETIME 变量放入 sqlite 数据库中。有没有一种方法可以解决这个问题？

我想我将不得不像这样手动构建它：

```
if(month < 10){
    month = "0" + month;
}
if(day < 10){
    day  = "0" + day ;
} 
```

问题是月份和日期都是个位数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:56:33.357

```
SimpleDateFormat outputFormat = new SimpleDateFormat(
                "yyyy-MM-dd HH:mm:ss");

Date ModifiedDate  = outputFormat.parse(strdate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:54:07.147

简单如下：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
dateFormat.parse(yourDateHere); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:02:03.283

您可以通过以下方式获取当前日期并将其保存到字符串

```
String mydate = java.text.DateFormat.getDateTimeInstance().format(Calendar.getInstance().getTime()); 
```

现在将此字符串传递给 Simpledateformat 类并定义您想要的格式，如下所示

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
String currentDateandTime = sdf.format(mydate); 
```

# c# - 放置图像的合适位置在哪里

> ID：15219407
> 
> 赞同：0
> 
> 时间：2013-03-05T08:50:04.537
> 
> 标签：c#, winforms, picturebox, dispose

我有一个表格，`OpenFileDialog`用于选择图像并将其显示在`pictureBox`. 在表单打开之前，用户可以根据需要多次打开并保存打开的图像。我想要做的是，在每次新的选择保存后，删除以前保存的图像（如果有的话）。问题是，当我现在实现代码时，我可以第一次删除图像，如果我继续使用当前打开的表单保存图像，我会收到资源正在使用的错误。我所做的是`Dispose()`图像，但我想我没有在正确的地方做。

这是我打开和加载图像的方式：

```
private void btnExplorer_Click(object sender, EventArgs e)
        {

            OpenFileDialog openFileDialog1 = new OpenFileDialog();
            openFileDialog1.Title = "Select file";
            openFileDialog1.InitialDirectory = "c:\\";
            openFileDialog1.Filter = fileNameFilter;
            openFileDialog1.FilterIndex = 2;
            openFileDialog1.RestoreDirectory = true;
            openFileDialog1.FileName = prefixFilter;

            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                try
                {
                    pictureBox1.InitialImage = new Bitmap(openFileDialog1.FileName);
                    pictureBox1.ImageLocation = openFileDialog1.FileName;
                    selectedFile = pictureBox1.ImageLocation;
                    selectedFileName = openFileDialog1.SafeFileName;
                    pictureBox1.Load();
                }
                catch (Exception ex)
                {
                    logger.Error(ex.ToString());
                    MessageBox.Show("Error loading image!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
            }
        } 
```

在同一个课程中，如果我需要删除旧图像，我会调用这个方法：

```
public void DeleteImage(AppConfig imagePath, string ImageName)
        {
            pictureBox1.InitialImage.Dispose();//Release the image before trying to delete it
            string imgPath = imagePath.ConfigValue.ToString();
            File.Delete(imgPath + "\\" + ImageName);
        } 
```

如你看到的。该`Dispose()`方法就在这里，尽管我将确保在尝试删除资源之前将其处理掉，但正如我所说，这只工作一次，然后我得到的错误次数与我尝试保存图像的次数一样多。

附言

我得到的确切错误是：

```
The process cannot access the file 'C:\Images\ME_083a210e1a7644198fe1ecaceb80af52.jpg' because it is being used by another process. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:03:51.793

有更好的方法来做到这一点。[使用FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)加载图像并将其分配给图片框

```
FileStream bmp = new FileStream(openFileDialog1.FileName, FileMode.Open, FileAccess.Read);
Image img = new Bitmap(bmp);
pictureBox1.Image = img;
bmp.Close(); 
```

如果你想清除图片框，只需

```
pictureBox1.Image = null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:04:00.940

如果我理解正确，您想从图片框中删除曾经“使用过”的图像：设置

```
picturebox.InitialImage=null; 
```

（顺便说一句：你最好使用picturebox.Image ...）

“Dispose”是强制垃圾收集器从内存中删除一个未使用的对象。

您的错误与 pictureBox-image 的处理无关，而是与源文件的锁定有关。

如果您使用“使用”块来处理 openFileDialog，也许它已经有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:11:28.947

```
 private void button1_Click(object sender, EventArgs e)
        {
            OpenFileDialog openFileDialog1 = new OpenFileDialog();
            openFileDialog1.Title = "Select file";
            openFileDialog1.InitialDirectory = "c:\\";
            openFileDialog1.Filter = "Jpeg Files(*.jpg)|*.jpg|All files (*.*)|*.*";
            openFileDialog1.FilterIndex = 2;
            openFileDialog1.RestoreDirectory = true;

            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                pictureBox1.InitialImage = new Bitmap(openFileDialog1.FileName);
                pictureBox1.ImageLocation = openFileDialog1.FileName;
                selectedFile = pictureBox1.ImageLocation;
                selectedFileName = openFileDialog1.SafeFileName;
                pictureBox1.Load();

            }

        }

        public string selectedFileName { get; set; }

        public string selectedFile { get; set; }

        private void button2_Click(object sender, EventArgs e)
        {
            pictureBox1.ImageLocation = null;
        } 
```

# javascript - 无法获取 .ascx 服务器控件 ID

> ID：15219414
> 
> 赞同：3
> 
> 时间：2013-03-05T08:50:12.693
> 
> 标签：javascript, jquery, asp.net, html

下面是我的 .ascx 页面中的一些示例代码，我正在尝试使用 jquery 来执行某些操作，对 `$("input")`我有很好的帮助但 `$("asp:Label")`无法正常工作。我应该包括什么才能`$("asp:Label")`工作

```
<asp:Label ID="lblInvolvedMembers" runat="server"></asp:Label>
<asp:Label ID="lblAcceptedBy" runat="server">    </asp:Label>
<input type="text" id="family" value="family " />
<input type="button" id="family1" value="button" />

//here i am trying to get server control to perform some action,   $("input") served me well but  $("asp:Label") is not working. what should i include inorder to make  $("asp:Label") work

$("asp:Label").hover(function() {
        Tip.text('');
        var ToolTipID = $(this).attr('id');
        var height = $(this).height() + 10;
        var offset = $(this).offset();
        if (data[ToolTipID].split('<br\>').length - 1) {
            var temp = data[ToolTipID].split('<br\>').length - 1;
            height = temp * 10;
        } else {
            height = 10;
        }

  $("input").hover(function() {
        Tip.text('');
        var ToolTipID = $(this).attr('id');
        var height = $(this).height() + 10;
        var offset = $(this).offset();
        if (data[ToolTipID].split('<br\>').length - 1) {
            var temp = data[ToolTipID].split('<br\>').length - 1;
            height = temp * 10;
        } else {
            height = 10;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:03:06.560

你会想要改变

```
<asp:Label ID="lblInvolvedMembers" runat="server"></asp:Label> 
```

类似于

```
<asp:Label ID="lblInvolvedMembers" runat="server" CssClass="label"></asp:Label> 
```

那么你可以在这里使用 jQuery 选择器

```
$('.label').hover(function() { 
```

代替

```
$("asp:Label").hover(function() { 
```

这样，所有标签都将具有 jQuery 悬停功能。

如果您想悬停特定标签，则必须使用

```
$('#<%= lblInvolvedMembers.ClientID %>').hover(function() { 
```

ASP 标签在被传递到客户端浏览器之前被处理，javascript 可以对它们进行操作，因此

`lblInvolvedMembers`会变成类似的`ctl0_label_lblInvolvedMembers`东西。

**更新**

看起来你还没有关闭你的 jQuery 函数

```
$('.label').hover(function() {
        Tip.text('');
        var ToolTipID = $(this).attr('id');
        var height = $(this).height() + 10;
        var offset = $(this).offset();
        if (data[ToolTipID].split('<br\>').length - 1) {
            var temp = data[ToolTipID].split('<br\>').length - 1;
            height = temp * 10;
        } else {
            height = 10;
        }
});

$("input").hover(function() {
    Tip.text('');
    var ToolTipID = $(this).attr('id');
    var height = $(this).height() + 10;
    var offset = $(this).offset();
    if (data[ToolTipID].split('<br\>').length - 1) {
        var temp = data[ToolTipID].split('<br\>').length - 1;
        height = temp * 10;
    } else {
        height = 10;
    }
}); 
```

我不确定是什么`Tip`，`data`但你可以`.hover()`在这个 jsFiddle -> [http://jsfiddle.net/XF4Zk/](http://jsfiddle.net/XF4Zk/)上看到一个工作函数，这里的标签 ID 代表由 ASP.NET 创建的控件的客户端 ID，它这就是为什么你会用它`lblInvolvedMembers.ClientID`来获取 Javascript 控件的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:52:42.583

尝试

```
$('input[id$=lblInvolvedMembers]').hover(function() {
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:53:02.643

尝试这个：

```
$('#<%=Label.lblInvolvedMembers%>').hover(); 
```

或这个：

```
$('#<%=Label.lblInvolvedMembers%>').hover(); 
```

# embedded - Pthreads 在嵌入式 ARM 中不起作用

> ID：15219427
> 
> 赞同：0
> 
> 时间：2013-03-05T08:50:40.943
> 
> 标签：embedded, pthreads, embedded-linux

您好，我正在使用 AM1808 ARM9 微处理器。我有一个 GSM 加密狗的接口。我想使用 pthread 在后台建立 GSM 加密狗连接以及所有数据传输和接收。

当我尝试在后台连接加密狗时，它一直闪烁绿灯，我无法连接到服务器。

我找不到问题。

这是我用于数据卡初始化和通信例程的代码。我正在主线程中初始化线程。

```
 int InitializeDataCard(void)
    {
          static int connect_ret = 0;
          pthread_t processing_th;

          pthread_create(&processing_th, NULL, Datacard_Connection_Thread, &db_mc_object); 
          pthread_detach(processing_th);
          ShowMessageBox(msgbox_text[136], MB_TASKMODAL);
          if(connect_ret)
          {
        ShowMessageBox(msgbox_text[163], MB_ICONERROR);
        return -1;`enter code here`
          }
          else
          {
        return 0;  
          }
    }
    int ConnectToServer(void)
    {
         int connect_ret = 0;

         Dprintf(__func__,"Trying to connect ....");
         DPUUtilsLib_RetrieveParameter(PID_DATACARD_INFO,(UCHAR *)&datacard_info,sizeof(datacard_info)); 
         connect_ret = DataCardConnect(datacard_info);
         sleep(3);
         //g_do_process = 0;
         Dprintf(__func__,"DataCardConnect ret=%d",connect_ret);

         return connect_ret;
    }

    void * Datacard_Connection_Thread(void *tempdata)
{
     int ret=0,response = -1,enc_ret=0;
     static int g_gsm_response = 0;
     dpu_csv_file_param_t fileparam;
     dpu_db_export_search_params_t tempparams;
     dpu_db_milk_collection_t *livedata,*updatedata;
     dpu_db_user_master_t CreatedBy,UpdatedBy;
     dpu_db_society_master_t soc_info;
     char filename[50]={0};

     livedata = (dpu_db_milk_collection_t *)tempdata;

     //Connect to the Network
      create_connection :
     ret = ConnectToServer();

     //connected successfully 
     if(!ret)
     {
           //Get the SocietyCode from the Database 

        if(g_data_available)   
        {
            g_data_available=0;
            soc_info.SocietyId = g_society_list[g_selected_society].SocietyId;
                  DPUDBLib_search_society_master(&soc_info);

            strncpy(livedata->SocietyCode,soc_info.SocietyCode,5);

            Dprintf(__func__,"%04d\n %5.2f\n %5.2f\n %5.2f\n %5.2f\n %5.2f\n %5.2f\n %7.2f\n %7.2f\n %03d\n %c\n %d\n %5.2d\n %s\n %d",
                 livedata->MemberCode,livedata->Fat,livedata->LRCLR,livedata->SNF,livedata->Solid,
                 livedata->FatKG,livedata->SNFKG,livedata->Rate,livedata->Amount,
                 livedata->CanNumber,livedata->EntryMode,livedata->MC_RateChartId,livedata->Water,livedata->SocietyCode,__LINE__);

            sprintf(tempparams.FileName,"%s/%s",DATA_TEMP,MT_MILKLIVEFILE);

            memcpy(fileparam.FilePath,tempparams.FileName,sizeof(tempparams.FileName)); 

            fileparam.Type = DPU_CSV_EXPORT;
            fileparam.FileType = DPU_CSV_MILK_LIVE_DATA_FILE;
            //open a csv file
            DPUCSVLib_open_csv_file(&fileparam);

            memset(&CreatedBy,0,sizeof(dpu_db_user_master_t));      
            memset(&UpdatedBy,0,sizeof(dpu_db_user_master_t));      

            strncpy(CreatedBy.Username,TempUser,5);

            //write the live data into the file
            DPUCSVLib_write_csv_file(&fileparam,livedata,&CreatedBy,&UpdatedBy);

            //encrypt the file
            enc_ret = DPUEncryptFile(tempparams.FileName,filename);         

            if(!enc_ret)
            {
                //send file request to server for the accepting the data
                response = SendFileRequest(g_gsm_response,filename,9);

                if(!response)
                {
                    //receive the response of the server 
                    response = GetResponceFromServer(g_gsm_response,&response,9);

                    if(response || g_gsm_response) response = -1;
                    else
                    {
                        //If record is successfully sent to the server then update the FlagGSM flag of the record as well as 
                        //Update the database
                        g_update_record  = 1;
                        livedata->FlagGSM = 1;
                        updatedata->MilkCollectionId = livedata->MilkCollectionId;
                        DPUDBLib_search_milk_collection_entry_by_record(&updatedata);
                        DPUDBLib_edit_milk_collection_entry(&updatedata,&livedata);
                        g_update_record = 0;
                    }

                }
                //remove the temp file generated
                remove(filename);
            }   
        }
     }
     else
     {
            //if connection is not successfully done then try to reconnect the server
    ShowMessageBox(msgbox_text[156], MB_ICONERROR);
            goto create_connection; 
     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:17:34.977

我认为这里存在基本错误。通过在 中声明静态变量`connect_ret`，`InitializeDataCard`并不意味着它将与在 中声明的变量相同`ConnectToServer`。因此，第一个函数将始终具有相同的行为......

我认为您将需要一个全局变量（即未在函数中定义）并且可能需要某种同步，因为当您创建线程时，它可能不会立即执行，所以即使您有一个全局变量，在您知道它已正确设置之前，您无法对其进行检查。

# wcf - DataContract 类在客户端未初始化

> ID：15219433
> 
> 赞同：1
> 
> 时间：2013-03-05T08:51:12.723
> 
> 标签：wcf, datacontract

我想从我的`WCF`( `C#`) 服务向我的客户 ( `WPF`) 发送以下课程：

```
[DataContract]
    public class OutputAvailableEventArgs
    {
        [DataMember]
        public int ID { get; set; }
        [DataMember]
        public string Message { get; private set; }
        [DataMember]
        public bool IsError { get; private set; }

        public OutputAvailableEventArgs(int id) : this(id, false, "") { }

        public OutputAvailableEventArgs(int id, string output) : this(id, false, output) { }

        public OutputAvailableEventArgs(int id, bool isError, string output)
        {
            ID = id;
            IsError = isError;
            Message = output;
        }
    } 
```

服务使用它如下：

```
var channel = OperationContext.Current.GetCallbackChannel<IClientCallback>();

channel.OutputAvailable(new OutputAvailableEventArgs(1, false, "some message")); 
```

在客户端，成员获得他们的默认值。
我尝试用`IsRequired`属性标记它们，但现在`OutputAvailable`没有调用 at 客户端。服务端的代码似乎运行顺利（我没有注意到调试器有任何东西）。

如何在保持成员价值观的同时转移`DataContract`课程？ （我看到了建议使用的解决方案，但我不需要一个默认的构造函数。）`WCF`
`OnSerialized``OnDeserialized`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:23:21.420

对于这个问题，我看到了许多不同的解决方案。为了其他人，我会写下其中一些+对我有用的东西：

1.  似乎在某些情况下指定项目的顺序可以解决问题。请参阅[此 SO question](https://stackoverflow.com/questions/10474838/not-all-parameters-in-wcf-data-contract-make-it-through-the-web-service-call)以获取完整详细信息。
2.  如果它是您所追求的一些默认初始化，您可以使用`OnSerialized`and`OnDeserialized`方法来调用您的初始化方法。
3.  我也尝试`IsRequired`在我的 s 上使用该属性，`DataMember`但仍然没有得到我的对象。

对我有用的是在属性中[添加`NameSpace`属性](https://stackoverflow.com/a/2525669/427653)`DataContract`。显然，为了让合同被认为是平等的，您必须将 DataContract 上的 Namespace 属性设置为双方的相同值。

# javascript - JQuery 从 JSON 数组中获取数据

> ID：15219435
> 
> 赞同：9
> 
> 时间：2013-03-05T08:51:20.310
> 
> 标签：javascript, jquery, json, getjson

这是我从foursquare 获得的JSON 的一部分。

**JSON**

```
tips: {
    count: 2,
    groups: [
    {
        type: "others",
        name: "Tips from others",
        count: 2,
        items: [
        {
            id: "4e53cf1e7d8b8e9188e20f00",
            createdAt: 1314115358,
            text: "najjači fitness centar u gradu",
            canonicalUrl: "https://foursquare.com/item/4e53cf1e7d8b8e9188e20f00",
            likes: {
                count: 2,
                groups: [
                {
                    type: "others",
                    count: 2,
                    items: []
                }],
                summary: "2 likes"
            },
            like: false,
            logView: true,
            todo: {
                count: 0
            },
            user: {
                id: "12855147",
                firstName: "Damir",
                lastName: "P.",
                gender: "male",
                photo: {
                    prefix: "https://irs1.4sqi.net/img/user/",
                    suffix: "/AYJWDN42LMGGD2QE.jpg"
                }
            }
        },
        {
            id: "4e549e39152098912f227203",
            createdAt: 1314168377,
            text: "ajd da vidimo hocu li znati ponoviti",
            canonicalUrl: "https://foursquare.com/item/4e549e39152098912f227203",
            likes: {
                count: 0,
                groups: []
            },
            like: false,
            logView: true,
            todo: {
                count: 0
            },
            user: {
                id: "12855147",
                firstName: "Damir",
                lastName: "P.",
                gender: "male",
                photo: {
                    prefix: "https://irs1.4sqi.net/img/user/",
                    suffix: "/AYJWDN42LMGGD2QE.jpg"
                }
            }
        }]
    }]
} 
```

我需要获取最后一个提示**文本**、编写它的用户以及**他**编写/发布它的**日期。**

*用户*：Damir P.

*日期*：1314115358

*文本*: najjači Fitness centar u gradu

我尝试使用**JQuery**，这可以获取非数组值：

```
$.getJSON(url, function(data){
    var text= data.response.venue.tips.groups.items.text;
    alert(text);
}); 
```

但它不适用于数组。

**结果**：未捕获的类型错误：无法读取未定义的属性“文本”。

我也试过**$.each**，但没有效果。

```
$.getJSON(url, function(data){
    $.each(data.response.venue.tips.groups.items.text, function (index, value) {
        console.log(value);
    });
}); 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T09:10:37.583

您需要迭代组和项目。[$.each()](http://api.jquery.com/jQuery.each/)将集合作为第一个参数并`data.response.venue.tips.groups.items.text` *尝试*指向一个字符串。`groups`和都是`items`数组。

*详细版：*

```
$.getJSON(url, function (data) {

    // Iterate the groups first.
    $.each(data.response.venue.tips.groups, function (index, value) {

        // Get the items
        var items = this.items; // Here 'this' points to a 'group' in 'groups'

        // Iterate through items.
        $.each(items, function () {
            console.log(this.text); // Here 'this' points to an 'item' in 'items'
        });
    });
}); 
```

或者更简单地说：

```
$.getJSON(url, function (data) {
    $.each(data.response.venue.tips.groups, function (index, value) {
        $.each(this.items, function () {
            console.log(this.text);
        });
    });
}); 
```

* * *

在您指定的 JSON 中，*最后*一个是：

```
$.getJSON(url, function (data) {
    // Get the 'items' from the first group.
    var items = data.response.venue.tips.groups[0].items;

    // Find the last index and the last item.
    var lastIndex = items.length - 1;
    var lastItem = items[lastIndex];

    console.log("User: " + lastItem.user.firstName + " " + lastItem.user.lastName);
    console.log("Date: " + lastItem.createdAt);
    console.log("Text: " + lastItem.text);
}); 
```

这会给你：

> 用户：Damir P.
> 日期：1314168377
> 文字：ajd da vidimo hocu li znati ponoviti

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T08:54:19.787

你没有循环遍历这些项目。试试这个：

```
$.getJSON(url, function(data){
    $.each(data.response.venue.tips.groups.items, function (index, value) {
        console.log(this.text);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:56:03.813

我认为你需要类似的东西：

```
var text= data.response.venue.tips.groups[0].items[1].text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T12:48:06.487

试试这个

```
$.getJSON(url, function(data){
    $.each(data.response.venue.tips.groups.items, function (index, value) {
        console.log(this.text);
    });
}); 
```

# php - 计算日差 * 每日价格 = PHP 价值

> ID：15219440
> 
> 赞同：0
> 
> 时间：2013-03-05T08:51:42.523
> 
> 标签：php, html, forms, checkout, datediff

我目前正在研究一种允许人们预订旅馆住宿的小表格。基本上，我让他们选择两个日期。*（到达日和出发日）*然后我想以天数计算这些日期之间的差异，最后我想将天数乘以每天的价格。

我似乎无法弄清楚如何计算每天的天数 * 价格并将该字符串传递给我表单中的*“金额值”*。

这是我到目前为止得到的：

```
<input type="text" id="datepicker" value="arrival (day-month-year)" />
<input type="text" id="datepicker2" value="departure (day-month-year)" />

<form action="checkout.php" method="post">
    <input name="amount" type="hidden" value="$dateDiff * price per day = value">
    <input type="submit" value="Check out" id="checkout">
</form> 
```

还有我的 PHP

```
<?php   
$date1 = ("#datepicker");
$date2 = ("#datepicker2");
$dateDiff = $date1 - $date2;
$fullDays = floor($dateDiff/(60*60*24));
echo "Difference is $fullDays days";  
?> 
```

编辑：在前两条评论之后，让我解释一下我对 PHP 还很陌生。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:56:06.830

该`datetime`对象提供了一个`diff`功能：

[http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
print_r($interval); 
```

> DateInterval 对象 ( [y] => 0 [m] => 0 [d] => 2 [h] => 0 [i] => 0 [s] => 0 [invert] => 0 [days] => 2)

所以你可以计算你的价格

```
$price = $pricePerDay * $interval->days; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:01:05.997

您必须将输入字段放入表单中并为其命名，如下所示：

```
<form action="checkout.php" method="post">
    <input type="text" id="datepicker" name="datepicker" value="arrival (day-month-year)" />
    <input type="text" id="datepicker2" name="datepicker2" value="departure (day-month-year)" />
    <input name="amount" type="hidden" value="$dateDiff * price per day = value">
    <input type="submit" value="Check out" id="checkout">
</form> 
```

现在在您的 PHP 文件中：

```
<?php
  if(isset($_POST["datepicker"], $_POST["datepicker2"])){
    $date1 = new DateTime($_POST["datepicker"]);
    $date2 = new DateTime($_POST["datepicker2"]);
    $diff = $date1->diff($date2);
    $amount_per_day = 10; // for example 10 dollars
    $total = floor($diff["days"]) * $amount_per_day; // total
  }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:58:29.810

试试这个：

```
function dateDiff($start, $end)
{
$start_ts = strtotime($start);
$end_ts = strtotime($end);
$diff = $end_ts - $start_ts;
return round($diff / 86400);
} 
```

# compilation - 输出错误的简单 Ada 程序

> ID：15219442
> 
> 赞同：2
> 
> 时间：2013-03-05T08:51:47.480
> 
> 标签：compilation, ada, gnat

在这里完成 Ada 的初学者。我正在尝试从这里编译和运行一个简单的 Ada 程序：[http ://www.dwheeler.com/lovelace/s1sf.htm](http://www.dwheeler.com/lovelace/s1sf.htm)

这是代码：

```
-- Demonstrate a trivial procedure, with another nested inside.
with Ada.Text_IO, Ada.Integer_Text_IO;
use Ada.Text_IO, Ada.Integer_Text_IO;

procedure Compute is

 procedure Double(Item : in out Integer) is
 begin -- procedure Double.
   Item := Item * 2;
 end Double;

 X : Integer := 1;   -- Local variable X of type Integer.

begin -- procedure Compute
 loop
  Put(X);
  New_Line;
  Double(X);
 end loop;
end Compute; 
```

我在 Linux 上，使用 gnat，所以我这样做：

```
gnatmake -c compute.adb
gnatmake compute 
```

这给了我可执行文件。运行可执行文件会给出一个零列表，因为它似乎将 X 初始化为 0，即使它说要将它初始化为 1，所以我*应该*得到一个列表 1,2,4,...

谁能解释我的代码或我的想法哪里有问题？哦，使用 gnat 有没有办法在单个命令中编译和创建可执行文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:38:49.433

我只能猜测，当您添加“-gnato”时，gnatmake 会简单地回复`gnatmake: "compute" up to date.`给您留下相同的可执行文件。

```
brian@Gannet:~/Ada/Play$ gnatmake -gnato compute.adb
brian@Gannet:~/Ada/Play$ ./compute
          1
          2
...
  536870912
 1073741824
raised CONSTRAINT_ERROR : compute.adb:9 overflow check failed 
```

然后没有 -gnato （我不得不触摸源或我得到“最新”消息）

```
brian@Gannet:~/Ada/Play$ gnatmake compute.adb
brian@Gannet:~/Ada/Play$ ./compute
          1
          2
...
  536870912
 1073741824
-2147483648
          0
          0
          0
          0 
```

随后显示为一串零。添加额外的“if”语句触及文件，强制重新编译：“if”本身并不是绝对必要的（尽管测试和防止约束错误是一件好事！）

道德：没有 -gnato，或者更确切地说，没有标志`-gnataoE -fstack_check`，Gnat 不是 Ada 编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:05:21.943

当您每次将整数值加倍时，循环中没有任何延迟，它会迅速溢出。在 GNAT 中，溢出检查默认是关闭的，您可以通过`-gnato`开关启用它。因此，当整数值溢出时，它最终会变为 0，这就是您所看到的（输出太快而无法看到初始数字）。

编译`-gnato`应该会给你一个执行约束错误。您还可以通过执行生成一行可执行文件

```
gnatmake -gnato compute.adb 
```

# android - 运行时按钮背景颜色更改，但不停留在圆角

> ID：15219444
> 
> 赞同：0
> 
> 时间：2013-03-05T08:51:59.173
> 
> 标签：android, android-layout, android-button

我遇到的问题是我有两个按钮，我用 rounded_corner.xml 设置背景。现在，如果我更改背景颜色运行时，那么它会删除圆角。如何解决这个问题。如果有人遇到这个问题，然后分享和我一起。。谢谢。。

我的rounded_xml ..

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
  <stroke android:width="0dp" android:color="@color/green" /> 
  <corners android:radius="3dp" /> 
  <gradient android:startColor="@color/green" android:centerColor="@color/green" android:endColor="@color/green" android:angle="90" /> 
</shape> 
```

这是我的两个按钮..

```
<LinearLayout
            android:id="@+id/linearLayout4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/view1"
            android:layout_below="@+id/relative_custom"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/button1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/rounded_button"
                android:text="Accer is the Best"
                android:textColor="@color/white"
                android:textStyle="bold" android:padding="5dp" android:gravity="left"/>

            <Button
                android:id="@+id/button2"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_weight="1"
                android:background="@drawable/rounded_button"
                android:textColor="@color/white" android:textStyle="bold" android:padding="5dp" android:text="HP is the Best" android:gravity="left"/>

        </LinearLayout> 
```

# android - 在未列出的android中编辑文本字段

> ID：15219445
> 
> 赞同：0
> 
> 时间：2013-03-05T08:52:02.107
> 
> 标签：android, android-layout

下面是我的`xml`文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<EditText
    android:id="@+id/username"
    android:layout_width="200dp"
    android:layout_height="40dp"
    android:layout_marginLeft="100dp"
    android:layout_marginTop="250dp"
    android:hint="Username" />

<EditText
    android:id="@+id/password"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_marginLeft="100dp"
    android:layout_marginTop="300dp"

    android:hint="Password"
    android:inputType="textPassword" />

<TextView
    android:id="@+id/login_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="150dp"
    android:layout_marginTop="200dp"
    android:text="@string/login_title" />

 </LinearLayout> 
```

有了这个，`xml`只有第一个项目被显示。如果我更改顺序，`layout`则显示第一项。我需要显示所有三项。我试图创建一个登录页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:59:18.233

替换`wrap_content`为`fill_parent`

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" > 
```

而你`marginTop`的太高了。我建议降低这个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:55:46.903

尝试删除边距值。并查看是否出现多个视图。也许有些观点会从屏幕上掉下来？边距的值非常大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:05:39.753

试试这个代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_centerInParent="true"
      android:gravity="center_vertical|center_horizontal"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        >

        <EditText
            android:id="@+id/username"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:hint="Username" />

        <EditText
            android:id="@+id/password"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"           
            android:hint="Password"
            android:inputType="textPassword" />

        <TextView
            android:id="@+id/login_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"           
            android:text="login_title" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:17:59.193

在您的代码中，您提供的边距太大并且它们正在离开屏幕。

尝试申请少量保证金

这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<EditText
android:id="@+id/username"
android:layout_width="200dp"
android:layout_height="40dp"
android:layout_marginLeft="100dp"
android:layout_marginTop="50dp"
android:hint="Username" />

<EditText
android:id="@+id/password"
android:layout_width="wrap_content"
android:layout_height="wrap_content"

android:layout_marginLeft="100dp"
android:layout_marginTop="10dp"

android:hint="Password"
android:inputType="textPassword" />

<TextView
android:id="@+id/login_title"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginLeft="150dp"
android:layout_marginTop="10dp"
android:text="login" />

</LinearLayout> 
```

在这里，主要需要注意的是，当您使用垂直方向的线性布局时，marginTop 的值是从上一个控件而不是从窗口顶部考虑的，

正如您所指定的

```
android:layout_marginTop="300dp" 
```

对于密码字段，它将转到屏幕的可见区域（即用户名edittext的300dp）。

这是您的代码的问题

# facebook - FB.ui() 给出错误，除非 display: 'popup' 被指定

> ID：15219454
> 
> 赞同：2
> 
> 时间：2013-03-05T08:52:29.280
> 
> 标签：facebook, jsf, primefaces, facebook-javascript-sdk

在我的 Facebook 应用程序中使用 FB.ui() 显示对话框时，我遇到了一个非常令人沮丧的问题。

基本上我有以下用于调用对话窗口的函数：

```
function postToNewsFeed(postName, postCaption, postDescription) {
FB.ui({
    method : 'feed',
    name : postName,
    //display: 'popup',
    link : APP_LINK,
    caption : postCaption,
    description : postDescription,
}, function(response) {
    if (messageGrowlWidget) {
        if (response && response.post_id) {
            messageGrowlWidget.renderMessage({
                summary : 'Post successful',
                detail : 'Your message has been posted to your wall.',
                severity : 'info'
            });
        } else {
            messageGrowlWidget.renderMessage({
                summary : 'Post failed',
                detail : 'Unable to post to your wall.',
                severity : 'error'
            });
        }
    }
}); 
```

};

每当我从 facelet 中进行此调用时，Facebook 对话框都会出现红色背景和消息“发生错误。请稍后再试”。但是，如果我指定 display: 'popup'，对话框会正确显示（但在丑陋的弹出窗口中）。

如果我在测试 HTML 页面中进行完全相同的调用（即，不使用 JSF/Primefaces），则所有内容都会正确显示，**而无需**将显示设置为弹出窗口。由于广泛的测试和上述观察，我确信这不是我如何调用 FB.init() 或任何重定向 URI/链接不匹配的问题。

我的猜测是 Javascript 环境中存在某种冲突或其他冲突——也许某个变量正在被 Facelet 中运行的所有各种脚本覆盖。

有没有人对我如何在不诉诸弹出窗口的情况下让事情正常工作有任何建议？我可能可以将其用作后备选项，但用户体验要差得多。

一点背景：

*   Primefaces 3.5
*   面孔 2.1.17
*   Facebook Javascript SDK

提前致谢！

# session - 使用 PhoneGap FileTransfer 手动设置 Cookie 标头

> ID：15219455
> 
> 赞同：4
> 
> 时间：2013-03-05T08:52:33.240
> 
> 标签：session, cordova, cookies, file-transfer

在为 Phonegap FileTransfer 请求手动设置 Cookie 时，我遇到了问题。

我尝试使用设置cookie

```
 document.cookie="JSESSIONID=........"; 
```

和

```
 params.headers={'Cookie':"JSESSIONID=..."}; 
```

然后进行这些更改，我发现有人建议： [https ://stackoverflow.com/a/3709746/249328](https://stackoverflow.com/a/3709746/249328)

但在这一切之后，请求中没有发送任何 Cookie 标头。

我需要手动设置此 cookie，因为我正在使用 FileTransfer 进行请求。

有什么帮助或建议吗？提前致谢。

# java - 鼠标悬停时触发窗口按钮背景颜色更改

> ID：15219457
> 
> 赞同：1
> 
> 时间：2013-03-05T08:52:40.490
> 
> 标签：java, swing, jtable, jcombobox, tablecellrenderer

我有一个带有 Windows 外观和感觉的 Swing 应用程序，但我在使用 JComboBox 时遇到了困难。单击它时，默认的 Windows 按钮颜色更改功能可以正常工作（即众所周知的 Windows 冰蓝色）。

但是，当我单击相邻字段时，它的颜色不会改变。这是一个将两列连接在一起的自定义表格，颜色更改功能与 JTextFields 完美配合。

```
public Component getTableCellRendererComponent(JTable table, Object value,
    boolean isSelected, boolean hasFocus, int row, int column) {
    if (column == 0 || !isSelected || !table.hasFocus()) {
        combobox.setForeground(table.getForeground());
        combobox.setBackground(table.getBackground());
    } else {
        if (isSelected && table.hasFocus()) {
            combobox.setForeground(table.getForeground());
            combobox.setBackground(table.getSelectionBackground());
        }
    }
    combobox.setFont(table.getFont());
    combobox.getModel().setSelectedItem(value == null ? "" : value.toString());
    return combobox;
} 
```

现在这不起作用。当我单击相邻的文本字段时， isSelected && table.hasFocus 块被执行，但是组合框的颜色保持不变。的价值

```
UIManager.getLookAndFeelDefaults().get("Button.background"); 
```

仍然 [240; 240; 240] 即使我直接单击组合框，它的颜色也会变成冰蓝色。

如何触发 Windows 冰蓝色？

# css - 将类选择器与后代选择器结合起来

> ID：15219466
> 
> 赞同：0
> 
> 时间：2013-03-05T08:53:04.333
> 
> 标签：css, css-selectors

我想覆盖一些 jquery 类，但我只想在这些类出现在 ul li a 下时进行覆盖

是否可以将后代选择器与类选择器结合起来？例如 - 写类似：ul li a .someClass？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:57:18.197

您可以这样做，`ul li > a.somelcass`这意味着`link tag`内部`ul`和`li`with 的直接后代`class someclass`。

# openstack-swift - 如何以RAW格式保存消息文件

> ID：15219467
> 
> 赞同：1
> 
> 时间：2013-03-05T08:53:10.040
> 
> 标签：openstack-swift

我们的一位客户不知道如何通过他们的 swift 联盟系统以原始格式保存/生成/生产/提供 swift 消息，我也不知道。原始格式是指以下格式

```
{1:F21XXXXXXXXXXXX7108170239}{4:{177:1112071543}{451:0}}{1:F01XXXXXXXXXXXX7108170239}{2:O9502137111207XXXXXXXXXXXX54153885641112071537N}{4:
:20:XXXXXXXXXXXXXX
:25:XXXXXXXXXX
:28C:00237/00001
:60F:C090513AUD1162994,30
:61:1112061207D110,00NCHKFDD388407       //071211WDM9103
291111 GUJ
:61:1112061207D200,00NCHK3927611471      //071211WDM9104
090911 KAR
:62F:C090513AUD1610881,52
:64:C090513AUD1610881,52
-}{5:{CHK:XXXXXXXXXXXX}}{S:{COP:S}} 
```

是否有任何方法/界面可以与 SWIFT 集成并提取这些文件或者是否有可能安排 SWIFT 生成这些文件甚至手动步骤来执行它？

**编辑 1**

通过从应用程序创建配置文件并将连接类型设置为“文件传输”来保存消息。然后它将继续以 ISO 格式生成文件到共享位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:01:50.713

要从 swift 获取输出文件，您需要配置消息伙伴 CBSOUT

为此，请执行以下操作

使用超级用户进入 swift 应用程序 SAE 或 SAA。

点击应用界面。从列表中右键单击 CBSOUT，然后启用

配置 CBSOUT 双击它。

数据格式：选择 RJE

输出路径名：放你要存放文件的文件夹

输出扩展名：把文件扩展名example :out 或txt。

会话启动选择自动。

消息数=1

结束。

好幸运。

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T15:32:11.800

通过从应用程序创建配置文件并将连接类型设置为“文件传输”来保存消息。然后它将继续以 ISO 格式生成文件到共享位置。

# linq - 通过 linq 选择最后一条记录失败，“方法无法识别”

> ID：15219469
> 
> 赞同：3
> 
> 时间：2013-03-05T08:53:13.230
> 
> 标签：linq, linq-to-entities

我有以下查询来选择数据库中的最后一条记录

```
using (Entities ent = new Entities())
{
Loaction last = (from x in ent.Locations select x).Last();
Location add = new Location();
add.id = last.id+1;
//some more stuff
} 
```

在 ext.net 上通过“直接事件”调用包含这些行的方法时返回以下错误：

```
LINQ to Entities does not recognize the method 'Prototype.DataAccess.Location Last[Location]
(System.Linq.IQueryable`1[Prototype.DataAccess.Location])' method,
and this method cannot be translated into a store expression. 
```

表结构如下：

```
int ident IDENTITY NOT NULL,
int id NOT NULL,
varchar(50) name NULL,
//some other varchar fields 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T08:55:59.240

Linq to Entities 不支持 Last 。执行`OrderByDescending`（通常按 ID 或某些日期列）并首先选择。就像是：

```
Location last = (from l in ent.Locations
                 orderby l.ID descending
                 select l).First(); 
```

或者

```
Location last = ent.Locations.OrderByDescending(l => l.ID).First(); 
```

请参阅 MSDN 文章[Supported and Unsupported LINQ Methods (LINQ to Entities)](http://msdn.microsoft.com/en-us/library/bb738550.aspx)以供参考。

# javascript - casperjs：获取表单字段值

> ID：15219471
> 
> 赞同：3
> 
> 时间：2013-03-05T08:53:23.017
> 
> 标签：javascript, casperjs

我有一个没有`Casper.getFormValues()`有用功能的 v1.0.0-RC4 casper 版本，由于某些原因我无法升级 casper。

还有其他方法可以获取表单字段值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:29:04.767

所以，找到了答案：要获取一个字段值，看看`ClientUtils.getFieldValue()`

```
casper.then(function() {
    this.echo(this.evaluate(function() {
        return __utils__.getFieldValue('fieldName');
    }));
}); 
```

# hp-ux - HPUX 不允许创建大于 2TB 的逻辑卷

> ID：15219475
> 
> 赞同：0
> 
> 时间：2013-03-05T08:53:39.550
> 
> 标签：hp-ux

我在 HPUX 上有 40TB 逻辑卷，但即使按照此链接[http://h30499.www3.hp.com/t5/LVM-and-VxVM/Not-allowed-to-create-中的建议安装了补丁（PHCO_37939）逻辑卷大于 2TB/td-p/4834031](http://h30499.www3.hp.com/t5/LVM-and-VxVM/Not-allowed-to-create-logical-volumes-larger-than-2TB/td-p/4834031)我仍然认为它是 2TB。有什么建议么 ？

```
SCSI describe of /dev/rdsk/c29t0d1:
vendor: COMPELNT
product id: Compellent Vol  
type: direct access
size: 2147483647 Kbytes
bytes per sector: 512 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T22:04:59.680

您不能在 HPUX LVM 中扩展/创建任何超过 2 TB 的逻辑卷。最大值为 2 TB，11.31 也是如此，因为 11.31 上的最大物理范围 (PE) 数为 65536，最大 PE 大小为 32 mb。所以总大小= 65536*32 mb= 2 TB。

# external - 以编程方式启动外部 PixelSense 应用程序

> ID：15219480
> 
> 赞同：0
> 
> 时间：2013-03-05T08:54:09.040
> 
> 标签：external, launch, pixelsense

是否有可能从我自己的 PixelSense 应用程序中以编程方式在 Surface 模式下启动外部 PixelSense 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:53:14.080

您必须在 Pixelsense 上为 Surface Shell 验证这一点，但在 Surface v1 上，只要您要启动的应用程序已由 shell 注册，您就可以这样做。

如果您要启动的应用程序是您自己的，您也可以将其放在用户控件中并将其编译为 dll，以便可以在调用应用程序中加载它。

# java - 在 sdcard 中下载文件显示大小为 0

> ID：15219484
> 
> 赞同：2
> 
> 时间：2013-03-05T08:54:26.577
> 
> 标签：java, android

我有以下代码用于将文件从 url 下载到 sdcard 。此代码适用于小文件，但当文件大小较大时，我下载的文件大小为 0。任何帮助将不胜感激。

**Java 代码**

```
setContentView(R.layout.activity_download_file);
        String exStorageDirectory = Environment.getExternalStorageDirectory()
                .toString();
        File folder = new File(exStorageDirectory, "Folder");
        folder.mkdir();
        File file = new File(folder, "scjp.pdf");
        try {
            if (!file.exists()) {
                file.createNewFile();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        downloadFile(
                "http://java.net/downloads/jfjug/SCJP%20Sun%20Certified%20Programmer%20for%20Java%206-0071591060.pdf",
                file);

    }

    private void downloadFile(String fileUrl, File directory) {
        try {
            FileOutputStream fileOutput = new FileOutputStream(directory);
            URL url = new URL(fileUrl);
            HttpURLConnection connection = (HttpURLConnection) url
                    .openConnection();
            connection.setRequestMethod("GET");
            connection.setDoOutput(true);
            connection.connect();
            InputStream inputStream = connection.getInputStream();
            byte buffer[] = new byte[1024];
            int len = 0;
            while ((len = inputStream.read(buffer)) > 0) {

                fileOutput.write(buffer, 0, len);

            }

            fileOutput.close();
            Thread.sleep(10000);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:14:31.907

试试这个代码。

```
package com.example.stack;

import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {

    ProgressDialog mProgressDialog;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         overridePendingTransition(R.anim.enter, R.anim.enter);
        setContentView(R.layout.activity_main);

        // declare the dialog as a member field of your activity

        // instantiate it within the onCreate method
        mProgressDialog = new ProgressDialog(MainActivity.this);
        mProgressDialog.setMessage("A message");
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setMax(100);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

        // execute this when the downloader must be fired
        DownloadFile downloadFile = new DownloadFile();
        downloadFile.execute("http://java.net/downloads/jfjug/SCJP%20Sun%20Certified%20Programmer%20for%20Java%206-0071591060.pdf");
    }

    //The AsyncTask will look like this:

    // usually, subclasses of AsyncTask are declared inside the activity class.
    // that way, you can easily modify the UI thread from here
    private class DownloadFile extends AsyncTask<String, Integer, String> {
        @Override
        protected String doInBackground(String... sUrl) {
            try {
                URL url = new URL(sUrl[0]);
                URLConnection connection = url.openConnection();
                connection.connect();
                // this will be useful so that you can show a typical 0-100% progress bar
                int fileLength = connection.getContentLength();

                // download the file
                InputStream input = new BufferedInputStream(url.openStream());
                OutputStream output = new FileOutputStream("/sdcard/output.pdf");

                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    publishProgress((int) (total * 100 / fileLength));
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
            } catch (Exception e) {
            }
            return null;
        }

    //The method above (doInBackground) runs always on a background thread. You shouldn't do any UI tasks there. On the other hand, the onProgressUpdate and onPreExecute run on the UI thread, so there you can change the progress bar:

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            mProgressDialog.show();
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {
            super.onProgressUpdate(progress);
            mProgressDialog.setProgress(progress[0]);
        }
    }

} 
```

在清单文件中添加以下权限。

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.INTERNET"/> 
```

我也在手机上测试过。它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:06:17.767

根据[`public int read (byte\[\] buffer, int offset, int length)`](http://developer.android.com/reference/java/io/InputStream.html#read%28byte%5B%5D,%20int,%20int%29)它返回的方法的java doc

> 实际读取的字节数，如果已到达流的末尾，则为 -1。

所以你应该检查`-1`而不是`0`。

改变你的while循环

```
 while ((len = inputStream.read(buffer)) > 0) {

                fileOutput.write(buffer, 0, len);

            } 
```

跟随

```
while ((len = inputStream.read(buffer)) != -1) {

                fileOutput.write(buffer, 0, len);

            } 
```

正如评论中指出的那样，您应该在后台线程中执行此操作或`AsyncTask`...

编辑1：

你能放一些日志来查看错误点吗？比如输入流是否被打开……在调用连接之后，如果响应代码是，则通过调用[getResponseCode()](http://developer.android.com/reference/java/net/HttpURLConnection.html#getResponseCode%28%29)方法检查 HTTP 响应代码`200`只创建文件..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:09:24.443

尝试使用以下代码：

```
 URL url;

    long startTime = System.currentTimeMillis();

    // Open a connection to that URL.
    URLConnection ucon = null;
    try {
        url = new URL(
                "http://java.net/downloads/jfjug/SCJP%20Sun%20Certified%20Programmer%20for%20Java%206-0071591060.pdf");
        ucon = url.openConnection();
        Log.i("", "image download beginning: " + url);

        ucon.setReadTimeout(TIMEOUT_CONNECTION);
        ucon.setConnectTimeout(TIMEOUT_SOCKET);

        // Define InputStreams to read from the URLConnection.
        // uses 3KB download buffer
        InputStream is = ucon.getInputStream();
        BufferedInputStream inStream = new BufferedInputStream(is, 1024 * 5);
        FileOutputStream outStream = new FileOutputStream(
                "mnt/sdcard/example.pdf");
        byte[] buff = new byte[5 * 1024];

        int len;
        while ((len = inStream.read(buff)) != -1) {
            outStream.write(buff, 0, len);
        }

        outStream.flush();
        outStream.close();
        inStream.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# python - 强化 Python 类或过度工程

> ID：15219487
> 
> 赞同：0
> 
> 时间：2013-03-05T08:54:35.797
> 
> 标签：python, oop

我对 Python 比较陌生，但已经喜欢它了。我正在开始我们的第一个 Python 项目，并且正在做一些原型设计。“Python 哲学”在类型和异常方面让我感到困惑。有人可以拍摄这段摘录吗？我是过度工程还是缺少一些基本的 Python 方法？

```
class URIPartError(Exception):
pass

class WCFClient(object):
def __init__(self, host, scheme='http', port=80, path='/', user=None, password=None):
    super(WCFClient, self).__init__()

    #Store our variables
    try:
        self.__host = str(host).lower()
        self.__scheme = str(scheme).lower()
        self.__port = int(port)
        self.__path = str(path)
        self.__user = str(user) if user else None
        self.__password = str(password) if password else None
    except (TypeError, ValueError), e:
        raise URIPartError('Invalid URI part')

    #Are our inputs valid?
    if not self.__scheme == 'http' and not self.__scheme == 'https':
        raise URIPartError('Invalid URI scheme')
    if not path.startswith('/') or not path.endswith('/'):
        raise URIPartError('Invalid URI path')

    #Generate valid URI for baseurl
    if (self.__scheme == 'http' and self.__port == 80) or (self.__scheme == 'https' and self.__port == 443):    
        self.__baseurl = '{0}://{1}{2}'.format(self.__scheme, self.__host, self.__path)
    else:
        self.__baseurl = '{0}://{1}:{2}{3}'.format(self.__scheme, self.__host, self.__port, self.__path)

def baseurl(self):
    return self.__baseurl 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:04:11.327

就打字而言，这里没有错。您不是坚持类型，而是通过检查值来做正确的事情-如果用户传递了无效参数，则引发异常是完全有效的。

我要在这里做的唯一评论是，将“私有”双下划线变量与 getter 一起使用是非常不符合 Python 的。`self.__baseurl`与其设置然后提供`baseurl()`方法，不如`self.baseurl`直接设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:04:01.680

看看你的`WCFClient`继承方式`object`（顺便说一句，只有在使用 Python 2.x 时才有意义，因为在 Python 3 中这是默认设置），调用`object`类的构造函数实际上没有意义。这意味着您可以删除该行

```
super(WCFClient, self).__init__() 
```

其余的一切都很好:)

# dialog - dijit.dialog 首次在页面底部打开

> ID：15219492
> 
> 赞同：1
> 
> 时间：2013-03-05T08:54:44.237
> 
> 标签：dialog, dojo

我在我的静态 html 页面中以声明方式创建了一个 dijit 对话框。

如果我在加载页面后立即打开此对话框，它会在页面中心正确打开，但如果我在页面上执行一些可用的操作然后加载对话框，则对话框将被填充到页面底部。

这仅在第一次加载对话框时发生，并且仅在第一次发生在页面上执行某些操作之后。所有其他时间对话框都在页面中心正确加载。

这里有一个类似的问题： [Dojo and dijit.Dialog not centered](https://stackoverflow.com/questions/8419290/dojo-and-dijit-dialog-not-centered)

但是那里给出的解决方案对我不起作用，因为我已经在使用 dialog.startup() 和 dialog.show()。

这发生在 Firefox、Chrome 和 IE 中，我使用的是 Dojo 1.8

# java - 如何将具有 XML 格式内容的字符串转换为 JDom 文档

> ID：15219493
> 
> 赞同：11
> 
> 时间：2013-03-05T08:54:44.527
> 
> 标签：java, eclipse-plugin, sax, jdom, jdom-2

如何将具有 XML 格式内容的字符串转换为 JDom 文档。

我正在尝试以下代码：

```
String docString = txtEditor.getDocumentProvider().getDocument(
txtEditor.getEditorInput()).get();

SAXBuilder sb= new SAXBuilder();

doc = sb.build(new StringReader(docString)); 
```

任何人都可以帮我解决上述问题。提前致谢！！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T08:59:16.243

这就是您通常将 xml 解析为 Document 的方式

```
try {
  SAXBuilder builder = new SAXBuilder();
  Document anotherDocument = builder.build(new File("/some/directory/sample.xml"));
} catch(JDOMException e) {
  e.printStackTrace();
} catch(NullPointerException e) {
  e.printStackTrace();
} 
```

这取自[JDOM IBM 参考](http://www.ibm.com/developerworks/library/j-jdom/)

如果您有字符串，您可以将其转换为 InputStream 然后传递它

```
String exampleXML = "<your-xml-string>";
InputStream stream = new ByteArrayInputStream(exampleXML.getBytes("UTF-8"));
Document anotherDocument = builder.build(stream); 
```

对于 builder.build() 支持的各种参数，您可以查看[api 文档](http://www.jdom.org/docs/apidocs/index.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T11:37:18.537

这是一个常见问题解答，它的答案比实际常见问题解答更容易获得：[如何从字符串构建文档？](http://www.jdom.org/docs/faq.html#a0210)

所以，我创建了[问题 #111](https://github.com/hunterhacker/jdom/issues/111)

对于它的价值，我之前已经针对这种情况改进了错误消息（参见[上一期 #63](https://github.com/hunterhacker/jdom/issues/63)，现在你应该有一个错误说：

```
MalformedURLException mx = new MalformedURLException(
    "SAXBuilder.build(String) expects the String to be " +
    "a systemID, but in this instance it appears to be " +
    "actual XML data."); 
```

底线是您应该使用：

```
Document parseddoc = new SaxBuilder().build(new StringReader(myxmlstring)); 
```

滚滚

# android - 谷歌地图在发布模式下未在安卓上显示

> ID：15219501
> 
> 赞同：10
> 
> 时间：2013-03-05T08:55:33.053
> 
> 标签：android, google-maps, keytool, android-maps-v2, android-keystore

我正在尝试发布我的应用程序，但遇到了谷歌地图的问题。该应用程序包含一个显示地图的活动 (MapActivity)。在调试模式下运行时，地图工作正常。我在发布模式下签署了我的应用程序，并获得了 SHA1。我根据需要在 Google 控制台上创建了一个新的 android 密钥（SHA1；packageName）。获得 API 密钥

在我的应用程序中，我根据需要引用了 google-play-services-lib 的副本。我正在使用 ADT。

地图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:name="com.google.android.gms.maps.SupportMapFragment" /> 
```

MapActivity.java

```
public class MapActivity extends FragmentActivity {

private GoogleMap map;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);

    map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                        .getMap();
  } 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.rentalcar"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<uses-feature
android:glEsVersion="0x00020000"
android:required="true"/>

<permission
      android:name="com.example.rentalcar.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
    <uses-permission android:name="com.example.rentalcar.permission.MAPS_RECEIVE"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
     >

    <activity
        android:name="com.example.rentalcar.MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
    </activity>      

    <activity
        android:name="com.example.rentalcar.MapActivity"
        android:label="@string/title_activity_map"
        android:screenOrientation="portrait" >
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="My_Key"/>

</application>

</manifest> 
```

唯一奇怪的是，当我使用 keytool 获取 SHA1 时，我得到“签名算法名称：SHA256withRSA。这会是问题吗？如果是，我该如何更改？

![使用 keytool 获取证书指纹](../Images/771235a7f363b3722322215e6cb33ab4.png)

我有点卡在这里！感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-02-16T12:11:32.230

如果您已经尝试过@Budius 回答但仍然遇到此错误，则可能是由以下情况引起的：

添加 MapFragment 时，Android Studio 会创建 2 个文件 google_maps_api.xml：一个位于 src/debug/res/values 文件夹中，另一个位于 src/release/res/values 中。

但由于某种原因，Android Studio 上只显示了调试文件夹文件。因此，当您更改 APIkey 值时，仅在调试文件夹文件中完成。

因此，只需将 google_maps_api.xml 文件复制到发布文件夹并确保两者具有相同的 APIKey。

在所有其他尝试之后，这对我有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-05T09:47:47.080

在地图 API V2 中，发布版本和调试版本之间的**唯一变化是您在此处注册的密钥**[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

如果调试工作正常而最终版本不工作，那么这是唯一必要的更改。

所以我建议你仔细检查你的发布密钥库的哈希码，并确保它在谷歌 API 控制台上正确输入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-06T19:22:43.590

从最近几天开始，我也面临同样的问题，我花了大约 2-3 天的时间来解决这个问题。您需要在 **app/src/debug/res/values/google_maps_api.xml**和 **app/src/release/res/values/google_maps_api.xml**中的 2 个地方添加您的 API 密钥。

您可以在项目模式下找到**release/google_maps_api.xml**而不是在 Android/应用程序模式下。

[![您可以在此处查看发布/google_maps_api.xml 可用的图片](../Images/c5e8c8afa566c63d2e5ae6ea2421bed7.png)](https://i.stack.imgur.com/34aUf.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-12T09:58:16.277

只需清除数据（设置->应用程序-选择应用程序-清除数据->卸载）并尝试。这对我有用。确保包名与谷歌开发者控制台中的相同。如果您是从自定义密钥库创建的 SHA1 代码，请在发布模式下使用相同的代码。或通过使用相同的密钥库签名来生成 apk。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-06T01:03:27.247

我一直在关注一切但无法完成它，我做错的事情是[![在此处输入图像描述](../Images/bd04d2a0c0010a980b947eb8a853d517.png)](https://i.stack.imgur.com/GSZad.png)

我最初是在**检查** *V1 和 V2*签名版本。

**解决方案：只需检查 V1 签名**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-21T19:04:48.643

1- 使用项目“Android Manifest”文件中的“使用导出向导”创建 apk 文件。

2- 插入密钥后和完成之前，MD5 和 SHA1 密钥如图所示是这个给定的图片-

3- 为第 2 点中检索到的新 SHA1 为 Android 项目创建新的 API 密钥。

4- 在清单文件中使用该 API 密钥，如下所示

5- 清理您的项目并再次构建 APK 文件。

6-您现在可以在该 apk 中查看谷歌地图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-08T14:39:59.553

我遇到了同样的问题...我在 release/res/values 文件夹中找到了 gogole_maps_api.xml 文件...但是 API_KEY 里面是空的！！！！

在这里复制 API 密钥后，一切都在调试模式和发布中完美运行！感谢 Sumit Sinha 的建议![在此处输入图像描述](../Images/4984961391c3ef0f8e26ae066b79a27f.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-03T14:02:50.513

已经有一段时间了，但我找到了一个非常简单的解决方案。只需像这样设置gradle：

```
buildTypes {
    release {
        isMinifyEnabled = false
        isShrinkResources = false
    }
} 
```

# openstack - Openstack-Folsom keystone 脚本配置失败

> ID：15219502
> 
> 赞同：0
> 
> 时间：2013-03-05T08:55:34.877
> 
> 标签：openstack, keystone

基于此链接[https://github.com/mseknibilel/OpenStack-Folsom-Install-guide/blob/master/OpenStack_Folsom_Install_Guide_WebVersion.rst#openstack-folsom-install-guide](https://github.com/mseknibilel/OpenStack-Folsom-Install-guide/blob/master/OpenStack_Folsom_Install_Guide_WebVersion.rst#openstack-folsom-install-guide)，我尝试运行这些脚本，但尽管我设置了HOST_IP 和 EXT HOST_IP。
./keystone_basic.sh ./keystone_endpoints_basic.sh

以下是收到的错误日志：--keystone:error:unrecognized arguments: service id of 18ea5916544429bed2c84af0303077

我在源文件中提供了tenant_name、tenant_id等信息，但恰好是提供的脚本没有被系统识别。以下是我使用的操作系统的详细信息。

我创建了虚拟机而不是使用物理机。与 Ubuntu 12.04 LTS 一起安装。

请就如何解决此问题提出建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T22:56:12.903

我有同样的问题。我正在使用 Ubuntu 12.04 LTS。运行后：

keystone help user-create tenant id 出现如下：

```
Optional arguments:
...
--service_id <service-id> 
```

使用全局替换将 --service-id 更改为 --service_id

```
[Using command line] 
# sed -i 's/--service-id/--service_id/g' /path/to/script.sh 
```

重新启动 keystone 和它的数据库条目

```
mysql -u root -ppassword -e "drop database keystone"
mysql -u root -ppassword -e "create database keystone"
mysql -u root -ppassword -e "grant all privileges on keystone.* TO 'keystone'@'%' identified by 'password'"
mysql -u root -ppassword -e "grant all privileges on keystone.* TO 'keystone'@'localhost' identified by 'password'"
service keystone restart
keystone-manage db_sync 
```

# ios6 - 如何访问 `NSArray` 元素

> ID：15219504
> 
> 赞同：0
> 
> 时间：2013-03-05T08:55:40.893
> 
> 标签：ios6, nsarray

我有一个这样的数组

`

```
 (lldb) po list
 (NSArray *) $1 = 0x0759f120 <__NSArrayI 0x759f120>(
 {
EmployeeCode = 7593;
InDate = "27/02/2013";
InTime = "08:11";
InTime2 = "00:00";
OutDate = "27/02/2013";
OutDate2 = "01/01/1901";
OutTime = "17:42";
OutTime2 = "00:00";
Present = 1;
}
) 
```

`

我如何在这里访问每个单独的元素。请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:05:22.527

您`NSArray`包含`NSDictionary`格式中的值，因此在`index`数组中的每个位置都会得到一个`NSDictionary`，因此您可以像这样访问它，

```
NSLog(@"Employee Code = %@", [[yourArray objectAtIndex:index] valueForKey:@"EmployeeCode"]); 
```

**其中，索引 = 0 & 索引 < [yourArray 计数]**

# html - 谷歌地图，验证

> ID：15219506
> 
> 赞同：0
> 
> 时间：2013-03-05T08:55:44.030
> 
> 标签：html, google-maps, iframe, styles

我的问题可能很简单，但我被困在这里

我有谷歌地图 iframe，但我需要通过验证并且不知道如何更改谷歌地图代码以使其工作

例子：

```
 <iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.uk/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=bh15+5rf&amp;aq=&amp;sll=50.779458,-1.93428&amp;sspn=0.131771,0.316544&amp;ie=UTF8&amp;hq=&amp;hnear=BH15,+United+Kingdom&amp;t=m&amp;z=13&amp;ll=50.730003,-1.985543&amp;output=embed"></iframe><br /> 
```

这里有一些相关的答案： [Displaying Google map in IE using <div> <object>](https://stackoverflow.com/questions/15190229/displaying-google-map-in-ie-using-div-object)

但没有人回答。

任何人都可以帮助，通过谷歌地图的验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:48:59.327

它验证您是否删除了元素 - frameborder="0" scrolling="no"。Framborder 可以通过在 CSS 样式表中添加 border:0 来替换，但删除滚动可能会导致旧版本的 IE 出现问题。欲了解更多信息，请参阅： http: [//www.maxdesign.com.au/2011/03/10/iframe-scrollbars-and-html5/](http://www.maxdesign.com.au/2011/03/10/iframe-scrollbars-and-html5/)

# javascript - 在 chrome 上调用 paper.setViewBox() 时，文本字体大小属性无效

> ID：15219510
> 
> 赞同：0
> 
> 时间：2013-03-05T08:55:53.767
> 
> 标签：javascript, jquery, google-chrome, svg, raphael

```
window.onload = function(){
    var r = Raphael("world", 500, 500);
    r.text(100, 100, "US").attr({
        "font-size": 5
    });
    r.setViewBox(0, 0, 300, 300, false); //remove this line, chrome will work fine.    
} 
```

文本的字体大小为 12px（chrome 默认最小字体大小），而不是 5px。我添加了关于 *{-webkit-text-size-adjust: none;} 的 css，但它没有用。该问题发生在 chrome 537.22 版本上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:00:37.290

`.attr()`用于 HTML 属性。为此使用[.css()](http://api.jquery.com/css)。

```
r.text(100, 100, "US").css({
        "font-size": 5
    }); 
```

# iphone - 有一种方法可以访问 iphone/ipad 中的文档文件夹（真实设备，没有模拟器）？

> ID：15219511
> 
> 赞同：66
> 
> 时间：2013-03-05T08:55:55.250
> 
> 标签：iphone, ios, ipad, document

有办法访问真实设备（iphone/ipad）的文件夹吗？我意识到一个应用程序可以在该文件夹中存储一些数据，我想检查一切是否正确。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2016-08-27T00:32:35.200

您可以在没有 iTunes 的情况下执行此操作，即使该文件位于沙箱中除 Documents 之外的其他位置。

转到 Xcode 中的窗口/设备。

[![在此处输入图像描述](../Images/2101567d5d9d7ab3e170a8e89b3e30eb.png)](https://i.stack.imgur.com/o1CZN.png)

接下来，选择您的设备，然后在列表中找到该应用程序。

[![在此处输入图像描述](../Images/e78e312b9927ce21078588e3c1d7de95.png)](https://i.stack.imgur.com/mvTIA.png)

现在，看看设备窗口底部的小齿轮图标。点击那个坏男孩。 [![在此处输入图像描述](../Images/f513765245ae846ca76484e903c7d556.png)](https://i.stack.imgur.com/ebQuW.png)

请参阅列表中的“下载容器...”。猜猜这是做什么的？你说对了。它会下载整个沙盒以及应用程序沙盒中的所有文件夹。右键单击并“显示包内容”。

这应该让您看到尚未发布的应用程序的沙盒。因此，非常适合在真实设备上进行测试。

如果您在模拟器上进行测试，生活会容易得多。只需在[此处](https://github.com/luosheng/OpenSim)下载免费应用程序 OpenSim 。更新：这些天我更喜欢 SimSim，[这里](https://github.com/dsmelov/simsim)也是免费的。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2014-08-14T10:25:07.483

对于任何寻找确切答案的人：-

1.转到项目的 plist 文件。

2.添加一行。

3.然后将属性“应用程序支持iTunes文件共享”的布尔值设置为“是”。（键名是`UIFileSharingEnabled`）

你很高兴。

另请注意，您必须插入设备才能访问复制的文件（以编程方式）。如果您碰巧去尝试在计算机上访问它..您将无法找到文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T09:04:57.233

你的问题有点不清楚，但我可以看到三种解释：

1.  您可以将 iPhone 插入 iTunes 以查看启用了 iTunesFileSharing 的任何应用程序的文档文件夹，包括您已编写或正在编写的任何应用程序。

2.  如果这是您自己的应用程序，并且您需要帮助从文档文件夹中读取文件，请查看[此问题](https://stackoverflow.com/questions/2709705/read-text-file-in-document-folder-iphone-sdk)。

3.  如果这是其他人的应用程序，并且您想在没有 iTunes 的情况下访问该应用程序的文档文件夹，并且该应用程序没有您想要的实现，那么恐怕某种越狱和黑客攻击是必要的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-22T13:29:53.577

[iExplorer](http://www.macroplant.com/iexplorer/ "iExplorer")可以帮助找出 iOS 应用程序。:)

编辑：

你是对的，试试[iMazing](https://imazing.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-25T08:27:59.637

您可以使用以下代码从代码访问文档目录：

```
+ (NSString *) applicationDocumentsDirectory {    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
} 
```

然后您可以转到终端以获取相同的路径并检查所有文件。

例如在我的系统上是这样的：

```
~/Library/Developer/CoreSimulator/Devices/<deviceID> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-31T12:46:42.263

如果您正在寻找将文件从 iOS 应用程序文件夹导入 Mac 的工具，请安装 Apple configurator 2 ( [https://apps.apple.com/us/app/apple-configurator-2/id1037126344?mt=12](https://apps.apple.com/us/app/apple-configurator-2/id1037126344?mt=12) )

将您的设备连接到 Mac 并在 Apple 配置器中按照以下步骤操作

双击设备

选择操作 > 导出 > 文档。

选择要导出的应用程序内的文件，然后单击选择。将项目保存到 Mac 中的所需位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-27T10:35:20.173

1.  如果您有物理设备，您可以在 info.plist 中添加 UIFileSharingEnabled 键并将其值设置为 YES

2.  然后运行你的应用

3.  打开 iTunes 选择设备并转到文件共享并选择您的应用

4.  您将看到由您的应用创建的文件

# cakephp - 在我提交关于删除记录的 POST 参数后刷新视图

> ID：15219512
> 
> 赞同：0
> 
> 时间：2013-03-05T08:55:55.917
> 
> 标签：cakephp, post, view, refresh

我的问题是如何刷新我的视图“search.ctp”以考虑我刚刚删除的记录。问题如下。

我的控制器代码

```
public function search() {
    if ($this->request->is('post')) {
        $this->set("isPost", TRUE);
        $query = $this->data;
        $output = $this->Question->find("all",             array("conditions"=>array("Question.lectureId"=>$query["Lecture"]["Lecture"],
                                                                         "Question.type"=>$query["Lecture"]["status"])));
        $this->set("questions", $output);

    } else {
        $this->LoadModel("Lecture");
        $outputL = array();
        $for = $this->Lecture->find("all", array("fields" => array("_id", "title")));
        foreach ($for as $key => $value) {
            $outputL[$value["Lecture"]["_id"]] = $value["Lecture"]["title"];
        }
        $this->set("lectures",$outputL);
        //
        $statuses = array(
            "" => "Select a question type",
            "anonymousQuestion" => "anonymousQuestion",
            "handUp" => "handUp",
            "userQuestion" => "userQuestion"
            );
        $this->set("statuses", $statuses);
    }   
} 
```

所以会发生以下情况；我打开视图“search.ctp”（“我的管理界面”），设置 2 个搜索参数，然后使用提交按钮发布该数据。然后我的 IF 语句将其识别为 POST 并返回我的查询结果。问题是当我删除一条记录时...它会将我重定向回我的搜索操作以再次输入查询参数...我如何使用相同的查询参数刷新页面而不离开我的视图。

o 忘记了我的删除功能代码：

```
 public function delete($id = null) {
    if (!$this->request->is('post')) {
        throw new MethodNotAllowedException();
    }
    $this->Question->id = $id;
    if (!$this->Question->exists()) {
        throw new NotFoundException(__('Invalid configuration'));
    }
    if ($this->Question->delete()) {
        $this->Session->setFlash(__('Question deleted'));
    return $this->redirect(array("action"=>"search"));
    }
    $this->Session->setFlash(__('Question was not deleted'));
    $this->redirect(array('action' => 'search'));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:23:56.337

作为一种解决方法，我创建了另一个函数，它对 GET 请求执行与我的搜索函数对 POST 请求执行相同的操作。基本上返回带有查询参数的数据。我使用 Session 助手将查询传递给我的其他函数。不知道那有多聪明，但它对我有用......仍然很高兴知道是否有人有一个解决方案，我不必制作另一个功能/视图

# linux - Avrdude 无法写入 - C232HM-DDHSL-0 Linux Mint

> ID：15219516
> 
> 赞同：1
> 
> 时间：2013-03-05T08:56:02.263
> 
> 标签：linux, avr, ftdi, avrdude

我一直在尝试使用基于 FT232H 芯片的 C232HM-DDHSL-0 编程器对我的 ATmega644p 进行编程。

我在我的主目录中编辑了 .avrduderc 以包含以下内容，这些内容是从 /etc/avrdude.conf 改编而来的：

```
 programmer 
     id   = "C232HM"; 
     desc   = "C232HM-MPSSE"; 
     type   = avrftdi; 
     usbvid     = 0x0403; 
     # Note: This PID is reserved for generic H devices and 
     # should be programmed into the EEPROM 
     #  usbpid     = 0x8A48; 
     usbpid    = 0x6014; // changed from 0x6010 after checking "lsusb" 
     usbdev = "A"; 
     usbvendor  = ""; 
     usbproduct = ""; 
     usbsn      = ""; 
     #ISP-signals // Modified according to datasheet 
     reset  = 5; 
     sck    = 2; 
     mosi   = 3; 
     miso   = 4; 
     ; 
```

我已经能够使用 avrdude 与 MCU 通信

```
 sudo avrdude -c 2232HIO -p m644p -P /dev/ttyUSB0 
```

其中终端的输出是：

```
 Unknown type 6 (0x6) //Remainder pins - 1,2,7,8,9,10 not declared 
     Unknown type 6 (0x6) 
     Unknown type 6 (0x6) 
     Unknown type 6 (0x6) 
     Unknown type 6 (0x6) 
     Unknown type 6 (0x6) 

     avrdude: AVR device initialized and ready to accept instructions 

     Reading | ################################################## | 100% 0.01s 

     avrdude: Device signature = 0x1e960a 

     avrdude: safemode: Fuses OK 

     avrdude done.  Thank you. 
```

[启用 -vvvv 选项的输出： http](http://pastebin.com/z3K8RYJP) ://pastebin.com/z3K8RYJP

但是，当我尝试刷新一个简单的 .hex 文件时，它会在写入 flash 时停止：

```
 Unknown type 6 (0x6) 
    Unknown type 6 (0x6) 
    Unknown type 6 (0x6) 
    Unknown type 6 (0x6) 
    Unknown type 6 (0x6) 
    Unknown type 6 (0x6) 

    avrdude: AVR device initialized and ready to accept instructions 

    Reading | ################################################## | 100% 0.01s 

    avrdude: Device signature = 0x1e960a 
    avrdude: NOTE: FLASH memory has been specified, an erase cycle will be performed 
    To disable this feature, specify the -D option. 
    avrdude: erasing chip 
    avrdude: reading input file "int1.hex" 
    avrdude: input file int1.hex auto detected as Intel Hex 
    avrdude: writing flash (164 bytes): 

    Writing | 
```

[启用 -vvvv 选项的输出： http](http://pastebin.com/EmmuCsxN) ://pastebin.com/EmmuCsxN

我还安装了 FTDI 的 D2XX 驱动程序，并按照本指南中概述的步骤进行操作，但无济于事：（请参阅评论以获取链接）

似乎我无法写入 MCU，所以我的第一个猜测是我错误地配置了编程器。任何帮助将非常感激。谢谢！

编辑：刚刚注意到我使用不同的命令与 MCU 进行通信 :(

EDIT2：我使用此配置修复了它：

```
 programmer
    id  = "C232HM";
    desc    = "C232HM-MPSSE";
    type    = avrftdi;
    usbvid     = 0x0403;
    # Note: This PID is reserved for generic H devices and 
    # should be programmed into the EEPROM
    #  usbpid     = 0x8A48;
    usbpid    = 0x6014;
    usbdev = "A";
    usbvendor  = "";
    usbproduct = "";
    usbsn      = "";
    #ISP-signals 
    reset  = 4;
    sck    = 1;
    mosi   = 2;
    miso   = 3;
    ; 
```

# javascript - 如何将网格数据导出到excel？

> ID：15219518
> 
> 赞同：1
> 
> 时间：2013-03-05T08:56:04.413
> 
> 标签：javascript, kendo-ui

我正在使用剑道控件做一个项目。在这个网格中，导出功能是主要问题。我正在尝试它工作正常，但是当单击按钮时，仅导出第一页数据并且页脚也导出到 excel。但我想将网格中的所有（行）记录导出到 excel

我的代码：

```
$(“#btnExport”).click(function(e) {
   window.open(‘data:application/vnd.ms-excel,’ + $(‘#grid’).html());
   e.preventDefault();     
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:21:52.390

不正确但替代答案：-

创建一个新的临时页面并在 btnExport 上单击使用 javascript window.open('your temp page url') function

在临时页面上放置 GridView 和导出代码..

在页面加载..fire 导出代码...

并删除临时页面上的分页...

# php - 在 php 中使用 ZipArchive 提取 zip 文件夹时出现特殊字符问题

> ID：15219521
> 
> 赞同：3
> 
> 时间：2013-03-05T08:56:13.610
> 
> 标签：php, cakephp, ziparchive

我在 Zip 文件夹中的文件名是“Norge språk.pdf”，在提取 zip 文件夹时，我得到的文件名是“Norge spr†k.pdf”。

```
zip = new ZipArchive;
if ($zip->open($path, ZIPARCHIVE::CREATE) === true) 
{
    if(!file_exists(WWW_ROOT."/excel/".$name))
    {
        mkdir(WWW_ROOT."/excel/".$name, 0777);
    }
    for($i = 0; $i < $zip->numFiles; $i++) 
    {
        $fileinfo = pathinfo($zip->getNameIndex($i, ZIPARCHIVE::FL_UNCHANGED));

        copy("zip://".$path."#".htmlentities($test, ENT_COMPAT, 'ISO-8859-1'), WWW_ROOT."/excel/".$name.'/'.htmlentities($fileinfo['basename'], ENT_COMPAT, 'ISO-8859-1'));
    }                   
    $zip->close();                   
} 
```

任何人都请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:33:10.600

我不知道 Cake PHP，但真正的问题是 ZIP。问题是压缩文件的数据没有被视为二进制数据，因为它应该。这可能源于您自己的文件/变量处理。php是松散类型的，也就是说变量的类型是由php引擎自动选择的。

另一件事是文件名的处理。这些名称是字符数据，并存储在一个 zip 文件中，没有关于编码的信息。

因此，您唯一可以肯定使用的是 7 位 ASCII。但是由于 ISO-Latin-1 代码表被广泛使用（并且包含所有斯堪的纳维亚特殊字符），您面临的问题也往往是由自动转换引起的，因为在您自己的计算机上键入的文件名不应该导致再次在那里显示时有什么不同。

提供的解决方案可以解决：

```
 $zip->addFile($file_data['path'], iconv("UTF-8","CP852",$file_name)); 
```

使用 CP852 作为您的字符（[其他编码](http://us2.php.net/manual/en/mbstring.supported-encodings.php)）或编码或使用

```
 system('unzip -o ' . $file); 
```

要查看真正的问题，请阅读[php zip 内容编码](https://stackoverflow.com/questions/13267143/php-zip-contents-encoding)

# sql - DOCTRINE : IN 语句命令？

> ID：15219522
> 
> 赞同：1
> 
> 时间：2013-03-05T08:56:21.750
> 
> 标签：sql, symfony, doctrine-orm

我正在使用 Symfony2 和教义 2，但这个查询有问题：

```
 $query = $em->createQuery('SELECT a FROM MyBundle:Artiste a WHERE a.id IN (4,12,1)');
    $result = $query->getArrayResult(); 
```

而且我总是按 a.id 获得结果顺序，即 1 然后 4 然后 12 而我想显示排序为 id 列表的结果：4 然后 12 然后 1。

**更新** 感谢@Bram Gerritsent 评论，我注册了一个自定义 DQL 函数 FIELD，所以这就是我所做的：

1.  在 MyBundle/DQL/Field.php 中，我插入了以下代码（[https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/Field.php](https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/Field.php)）（我刚刚改变了要成为的命名空间`namespace MyBundle\DQL;`

2.  然后，我在我的 config.yml 中添加以下内容，如 Symfony2 文档 ( [http://symfony.com/doc/2.0/cookbook/doctrine/custom_dql_functions.html](http://symfony.com/doc/2.0/cookbook/doctrine/custom_dql_functions.html) )中所示

    orm: auto_generate_proxy_classes: "%kernel.debug%" entity_managers: 默认: auto_mapping: true dql: string_functions: field: MyBundle\DQL\Field

3.  所以，我写了以下查询 $query =`$em->createQuery('SELECT a FROM MyBundle:Artiste a WHERE a.id IN (4,12,1) ORDER BY FIELD(4,12,1)');`但我收到了这个错误：`[Syntax Error] line 0, col 75: Error: Expected end of string, got '('`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:11:57.270

You need to have a look into MySql `FIELD` function.

In native MySql you would do something like this:

```
ORDER BY FIELD(a.id,4,12,1) 
```

The field function isn't part of the Doctrine 2 distribution, but you can get it from the [DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions).

See this [StackOverflow post](https://stackoverflow.com/questions/5957330/doctrine-2-mysql-field-function-in-order-by) for more information about using the `FIELD` function in Doctrine 2

**EDIT**

I have tested it using your query but got the same syntax error. The following query works for me. Not sure why you cannot use `ORDER BY field(a.id,4,12,1)` directly, but you have to create a `HIDDEN` field in your select first.

```
SELECT a, field(a.id,4,12,1) as HIDDEN field FROM MyBundle:Artiste a WHERE a.id IN (4,12,1) ORDER BY field 
```

**EDIT2**

I have done some more debugging and researching and the DQL parser doesn't seem to support string functions in the order by clause. I've fixed the issue and created a [Pull Request](https://github.com/doctrine/doctrine2/pull/604).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:18:08.810

不如 FIELD 功能好，但应该可以工作：

```
 SELECT output.a FROM (
    SELECT a, ( CASE WHEN a.id = 4 THEN 1 WHEN a.id = 12 THEN 2 a.id = 1 THEN 3 END ) ord FROM MyBundle:Artiste a WHERE a.id IN (4,12,1)) output ORDER BY output.ord 
```

# delphi - 为什么当 ShowCaption 设置为 True 时，TToolBar 会自动计算按钮宽度？

> ID：15219524
> 
> 赞同：5
> 
> 时间：2013-03-05T08:56:23.097
> 
> 标签：delphi, delphi-xe2

我需要在`TToolBar`主窗体的右侧有两个 s，所以我放了三个`TPanel`s 用于对齐，然后将`TToolBar`s 放在它们里面。过去一天我一直试图告诉`toolbutton`s 具有相同的宽度，但无济于事。这是我所拥有的屏幕截图： ![在此处输入图像描述](../Images/d05031fe9be4995f8de6a51fc6418f97.png)

我发现如果`ShowCaption`设置为`True`，工具栏会自动计算按钮宽度。我的问题是为什么，以及如何禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-07T17:12:27.213

看看这种方法：

1.  将所有按钮的 Autosize 设置为 False。
2.  在 Form 的 OnCreate 事件中调用以下代码：`SendMessage(ToolBar3.Handle,TB_SETBUTTONWIDTH, 0, MAKELPARAM(0, <DEFAULT_WIDTH_THAT_YOU_WANT_TO_SET>));`
3.  确保在上述调用之前不要更改任何按钮的 Visible 属性——因为对于那些不可见的按钮，它将失败。
4.  此外，确保您在 TB_SETBUTTONWIDTH 消息的使用列表中有“CommCtrl”。

更多详情：http: [//zarko-gajic.iz.hr/ttoolbars-ttoolbutton-autosize-width-issues-empty-caption/](http://zarko-gajic.iz.hr/ttoolbars-ttoolbutton-autosize-width-issues-empty-caption/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-05T09:25:06.980

您可以使用对象检查器以静态值设置按钮宽度，也可以使用 formcreate 或 onpaint 或 onresize 等动态设置值......

# javascript - JavaScript 正则表达式优先规则

> ID：15219530
> 
> 赞同：0
> 
> 时间：2013-03-05T08:56:35.723
> 
> 标签：javascript, regex

这是如何运作的？

### 编码：

```
a = {
    replacers: {
        YYYY: function () {
            return this.getFullYear();
        },
        dd: function () {
            var me = this,
                day = me.getDate();

            return (day < 10 ? '0' : '') + day;
        },
        d: function () {
            var me = this;

            return me.getDate();
        }
    },
    format: function (date, format) {
        var replacers = a.replacers;

        // I just added a plus to get multiple digits and it works...
        return format.replace(/\{([Yd]+)\}/g, function (str, p1) {
            var formatter = replacers[p1];
            if (formatter)
                return formatter.call(date);
        });
    }
};

document.write(a.format(new Date(), '{dd} {d} {YYYY} {d} {dd}')); 
```

**结果：**

```
05 5 2013 5 05 
```

我使用`+`来识别一个或多个字符是否正确？

当我扩展替换功能时，这里有什么陷阱吗？`{xx}`我主要担心之前会有一场比赛`{xxx}`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:06:16.337

`([d]+)`或者只是`(d+)`，会贪婪地匹配并捕获一个或多个`"d"`。

`([d]+)?`，或者只是`(d*)`，会贪婪地匹配并捕获零个或多个`"d"`。

对于*惰性*匹配，`?`需要在量词 ie 之后立即添加`d+?`，但这里不需要它，`d+\}`并且`d+?\}`将始终进行完全相同的匹配，因为`}`要匹配所有`d`s 之前需要匹配它。

只有当存在可以匹配哪些特定字符的选项时，惰性才有意义。例如，当匹配 string 时`"ddde"`， then`d+.`将匹配整个 string 并且`d+?.`会匹配，`dd`因为 the`.`可以匹配第二个`d`。

你说你想“确保`{xxx}`总是在之前`{xx}`处理总是在之前处理`{x}`”，但是字符串中较早的那个是首先匹配的那个，无论匹配是否是惰性的。无论如何，我不明白这有什么关系 - 也许你可以进一步解释为什么这会是一个问题。

从您的代码中不清楚为什么要使用一个`replaces`对象，而将其功能包含在回调中似乎更简单`replace`。您选择的标识符，`replace`涉及`replaces`方法`replace`调用，以及`format`作为函数及其参数之一，使代码难以阅读。

# java - 以写入模式打开文件时出错

> ID：15219531
> 
> 赞同：0
> 
> 时间：2013-03-05T08:56:39.673
> 
> 标签：java, file-io, io

我尝试编写一个 hexeditor 作为练习，但我发现我的程序在尝试以写入模式打开文件时总是返回错误。这是我的程序部分：

```
try {
    byte[] buffer={(byte) 0xfe, (byte) 0xfe};

    out = openFileOutput(filename.toString(), 0);

    out.write(buffer, 0x50, 2);
    out.write(buffer, 0x5c, 2);
    out.write(buffer, 0x64, 2);
    out.write(buffer, 0x290, 2);

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
finally {
    if (out != null) {
        try {
            out.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

# java - 一级缓存存储在休眠中的哪里？在内存还是硬盘？

> ID：15219532
> 
> 赞同：4
> 
> 时间：2013-03-05T08:56:47.727
> 
> 标签：java, hibernate, orm

Hibernate 中的一级缓存存储在哪里？在内存（RAM）或硬盘中？如果它存储在内存中，如果存储查询的所有行的内存较少，在这种情况下它如何管理缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:00:30.693

Hibernate Session 是它的一级缓存。它是堆中的对象，所以它在 RAM 中。通常你有足够的 RAM (>256MB) 来存储查询 =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:59:29.210

它在内存中，否则它不会提供任何性能优势。

[ehcache](http://ehcache.org/) [memcached](http://memcached.org/) [hazelcast](http://www.hazelcast.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:06:41.693

一级缓存肯定在会话所在的 RAM 中，因此具有性能和易用性的优势。

如果您认为会话中加载的对象过多，您可以在会话关闭之前从一级缓存中逐出一些对象。请参阅会话接口源代码。

```
public interface Session extends Serializable {
    ...

    /**
     * Remove this instance from the session cache. Changes to the instance will
     * not be synchronized with the database. This operation cascades to associated
     * instances if the association is mapped with <tt>cascade="evict"</tt>.
     *
     * @param object a persistent instance
     * @throws HibernateException
     */
    public void evict(Object object) throws HibernateException;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:03:40.513

通常缓存存储在内存中，但如果您使用集群缓存，您可以从网络访问缓存。

这里列出了 Hibernate 缓存提供程序以及它们之间的区别：[Hibernate 缓存提供程序](http://orangeslate.com/2009/06/09/list-of-cache-providers-in-hibernate-and-their-concurrency-support-details/)

您可以找到其他一些可能使用 NoSql 键/值引擎来处理缓存的缓存提供程序。

# ruby-on-rails - ActionView::Template::生产中的错误

> ID：15219536
> 
> 赞同：0
> 
> 时间：2013-03-05T08:56:56.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我很困惑是什么导致了这个错误？我能够在我的本地机器上运行生产中的应用程序，并且一切编译都没有问题，但是在 windows server 2012 上它会导致问题。

有什么建议么？

```
[2013-03-05 10:27:18] INFO  WEBrick::HTTPServer#start: pid=2008 port=3000
Connecting to database specified by database.yml
Started GET "/" for 127.0.0.1 at 2013-03-05 10:27:28 +0000
Processing by StaticController#home as HTML
  Rendered static/home.html.erb within layouts/application (108.0ms)
Compiled cloud.css  (1ms)  (pid 2008)
Compiled contact.css  (0ms)  (pid 2008)
Compiled footer.css  (0ms)  (pid 2008)
Compiled global.css  (1ms)  (pid 2008)
Compiled header.css  (0ms)  (pid 2008)
Compiled nav.css  (1ms)  (pid 2008)
Compiled news.css  (0ms)  (pid 2008)
Compiled ourteam.css  (0ms)  (pid 2008)
Compiled services.css  (0ms)  (pid 2008)
Compiled slider/nivo-slider.css  (0ms)  (pid 2008)
Compiled slider/themes/bar/bar.css  (0ms)  (pid 2008)
Compiled slider/themes/dark/dark.css  (1ms)  (pid 2008)
Compiled slider/themes/default/default.css  (0ms)  (pid 2008)
Compiled slider/themes/light/light.css  (0ms)  (pid 2008)
Compiled application.css  (287ms)  (pid 2008)
Compiled jquery.js  (6ms)  (pid 2008)
Compiled jquery_ujs.js  (1ms)  (pid 2008)
Compiled jquery.flip.min.js  (0ms)  (pid 2008)
Compiled jquery-1.8.3.js  (6ms)  (pid 2008)
Compiled jquery.flip.js  (1ms)  (pid 2008)
Compiled slider/jquery-1.9.0.min.js  (3ms)  (pid 2008)
Compiled slider/jquery.nivo.slider.js  (2ms)  (pid 2008)
Compiled application.js  (431ms)  (pid 2008)
Completed 500 Internal Server Error in 144851ms

ActionView::Template::Error (
  (in C:/inetpub/wwwroot/app/assets/javascripts/application.js)):
    4:     <title>Class Technology Solutions <%= content_for?(:title) ? '- ' + y
ield(:title) : "" %></title>
    5:     <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    6:     <%= stylesheet_link_tag "application" %>
    7:     <%= javascript_include_tag "application" %>
    8:     <%= csrf_meta_tag %>
    9:   </head>
    10:   <body>
  app/views/layouts/application.html.erb:7:in `_app_views_layouts_application_ht
ml_erb___324488381_53941380'
  app/controllers/static_controller.rb:12:in `home' 
```

应用程序.js：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require jquery.flip.min
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:03:24.747

删除这一行**//= require_tree 。**

在 **app/assets/javascripts/application.js**

同样的问题：

[Rails 3.1 与 application.html.erb 中的 javascript_include_tag 问题](https://stackoverflow.com/questions/7281907/rails-3-1-issue-with-javascript-include-tag-in-application-html-erb)

# jquery - Jquery UI Slider 不显示 Ruby on Rails

> ID：15219537
> 
> 赞同：1
> 
> 时间：2013-03-05T08:57:00.983
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-ui

我一直在关注创建地图的[教程](http://andyglassblog.wordpress.com/2012/07/06/google-maps-for-rails-with-gmaps4-rails-tutorial-on-how-to-post-and-filter-locations/)，该地图将根据特定城市的人口在特定地方显示大头针。

一切都运行良好，直到 Jquery UI 滑块我无法显示为输入文本字段以外的任何内容？

目前我的应用程序中有以下代码：

索引.html.erb

```
<div id='population-range' style="width: 500px"></div>
<input type="text" id="filtered-pop" style="width: 200px"/> 
```

应用程序.JS

```
//
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require jquery.ui.slider

<script type="text/javascript">
  $(document).ready(function() {
    Gmaps.map.callback = function() {

      var PopulationFilter = {
        min: 800000,
        max: 10000000,
      };

      $( "#filtered-pop" ).val( (PopulationFilter.min)+ " - " + (PopulationFilter.max))
      $("#population-range").slider({
        range: true,
        min: PopulationFilter.min,
        max: PopulationFilter.max,
        values: [ PopulationFilter.min, PopulationFilter.max ],
        slide: function(event, ui) {
          $( "#filtered-pop" ).val( (ui.values[ 0 ])+ " - " + (ui.values[ 1 ]))
          PopulationFilter.min = ui.values[ 0 ]
          PopulationFilter.max = ui.values[ 1 ]
          applyFilters()
        }
      });

      var VisibleMarkers = function() {
      var filtered = _.reject(Gmaps.map.markers, function(marker) {
          return marker.population < PopulationFilter.min || marker.population > PopulationFilter.max;
        });
        return filtered
       }

      var applyFilters = function() {
        _.each(Gmaps.map.markers, function(marker) {
          Gmaps.map.hideMarker(marker)
        })
        _.each(VisibleMarkers(), function(marker) {
          Gmaps.map.showMarker(marker)
        })
      };
   }
});
</script> 
```

应用程序.css

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require_tree .
 *= require jquery.ui.slider
*/ 
```

就我可能出错的地方获得任何建议会很棒吗？提前致谢。

# java - Java上传百分比进度条线程

> ID：15219538
> 
> 赞同：1
> 
> 时间：2013-03-05T08:57:05.143
> 
> 标签：java, swing, concurrency, event-dispatch-thread, jprogressbar

我正在开发一个 java 应用程序，我使用 bufferedInputStream 保存大文件。我在 JDialog 中放置了一个进度条，它指示上传文件的百分比，并且每 n 秒增加一次。问题是应用程序无限期地等待对话框关闭，因此它永远不会退出。任何人都可以帮忙吗？

这是主要的应用程序片段：

```
JDialog dialog = new JDialog(Main.getMainFrame(), true);
                    ProgressBarJPanel progressBarJPanel = new ProgressBarJPanel();
                    dialog.setContentPane(progressBarJPanel);
                    dialog.pack();
                    dialog.setVisible(true);
                    while ((val = bufferedInputStream.read()) != -1)
                    {
                        fileOutputStream.write(val);
                    }
                    progressBarJPanel.end();
                    dialog.setVisible(false); 
```

和有罪的阶级

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ProgressBarJPanel extends JPanel
        implements ActionListener
{
    private JProgressBar progressBar;
    private Timer timer;
    public Thread updateThread;
    public final static int ONE_SECOND = 1000;
    private JTextArea taskOutput;
    private String newline = "\n";
    int timeNow= 0;
    int progress = 0;

    public ProgressBarJPanel()
    {
        super(new BorderLayout());

        progressBar = new JProgressBar(0, 100);
        progressBar.setValue(0);
        progressBar.setStringPainted(true);
        taskOutput = new JTextArea(5, 20);
        taskOutput.setMargin(new Insets(5,5,5,5));
        taskOutput.setEditable(false);
        taskOutput.setCursor(null);

        JPanel panel = new JPanel();
        panel.add(progressBar);

        add(panel, BorderLayout.PAGE_START);
        add(new JScrollPane(taskOutput), BorderLayout.CENTER);
        setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));

        //Create a timer.
        timer = new Timer(ONE_SECOND, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent evt) {
                progressBar.setValue(progress);
                progress+=10;
                String s = "now at "+progress+"%";
                if (s != null) {
                    taskOutput.append(s + newline);
                    taskOutput.setCaretPosition(
                            taskOutput.getDocument().getLength());
                }
            }
        });

    }

    public void end()
    {
        timer.stop();
    }

    public void startProgress()
    {
        timer.start();
    }

    /**
     * Create the GUI and show it. For thread safety, this method should be
     * invoked from the event-dispatching thread.
     */
    private static void createAndShowGUI()
    {
        //Make sure we have nice window decorations.
        JFrame.setDefaultLookAndFeelDecorated(true);

        //Create and set up the window.
        JFrame frame = new JFrame("ProgressBarDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        JComponent newContentPane = new ProgressBarJPanel();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
                createAndShowGUI();
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

- 编辑

这是基于 ben75 建议的解决方案：

```
JDialog dialog = new JDialog(Main.getMainFrame(), true);
ProgressBarJPanel progressBarJPanel = new ProgressBarJPanel();
dialog.setContentPane(progressBarJPanel);
Runnable r = new Runnable(){
  public void run(){
             SwingUtilities.invokeLater(new Runnable()
             {
                    @Override
                    public void run()
                    {
                       progressBarJPanel.startProgress();
                       dialog.pack();
                       dialog.setVisible(true);
                    }
             });

            //this is the long running job
            while ((val = bufferedInputStream.read()) != -1)
            {
                fileOutputStream.write(val);
            }

            //here is the callback to UI thread
            SwingUtilities.invokeLater(new Runnable(){
                public void run(){
                    progressBarJPanel.end();
                    dialog.setVisible(false);
                }
           }
  };
Thread t = new Thread(r);
t.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:06:27.220

您必须在另一个线程（即非 UI 线程）中执行耗时的作业，并在作业结束时回调 UI 线程以关闭对话框。

或多或少如何编码：

```
JDialog dialog = new JDialog(Main.getMainFrame(), true);
ProgressBarJPanel progressBarJPanel = new ProgressBarJPanel();
dialog.setContentPane(progressBarJPanel);
dialog.pack();
dialog.setVisible(true);
Runnable r = new Runnable(){
      public void run(){
                //this is the long running job
                while ((val = bufferedInputStream.read()) != -1)
                {
                    fileOutputStream.write(val);
                }
                //here is the callback to UI thread
                SwingUtilities.invokeLater(new Runnable(){
                    public void run(){
                        progressBarJPanel.end();
                        dialog.setVisible(false);
                    }
               }
      };
Thread t = new Thread(r);
t.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T09:53:10.113

这将是一个理想的工作[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)- 进行上传`doInBackground`，并让它`setProgress`每隔一段时间调用一个更新的进度号。使用 a 更新进度条`PropertyChangeListener`并关闭 中的对话框`done`，这两者都保证在事件处理线程上运行。

在我上面链接的 javadoc 中有一个非常接近您需要的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T21:44:13.323

把它全部扔掉并使用`javax.swing.ProgressMonitorInputStream.`

# c++ - 预先声明一个类型定义的 boost::variant

> ID：15219543
> 
> 赞同：1
> 
> 时间：2013-03-05T08:57:21.377
> 
> 标签：c++, boost

我怎样才能得到以下编译：

```
typedef std::pair<std::string, Container> Structure;

typedef boost::variant<std::vector<int>, std::vector<std::string>, std::vector<Structure> > Container; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:51:09.470

这是通过 liveworkspace.org/code/3BDk6v$0 链接到上面的 Angew 的解决方案

```
#include <iostream>
#include <string>
#include <vector>
#include <utility>
#include <boost/variant.hpp>

typedef boost::make_recursive_variant<
         std::vector<int>,
         std::vector<std::string>,
         std::vector< std::pair<std::string, boost::recursive_variant_> >
         >::type Container;

typedef std::pair<std::string, Container> Structure;

struct printer: boost::static_visitor<>
{
   void operator()(const std::vector<int>& vec) const
   {
      for(const auto elem : vec)
         std::cout << elem << std::endl;
   }
   void operator()(const std::vector<std::string>& vec) const
   {
      for(const auto& elem : vec)
         std::cout << elem << std::endl;
   }
   void operator()(const std::vector<Structure>& vec) const
   {
      for(const auto& elem : vec)
      {
         std::cout << "First:" << std::endl;
         std::cout << elem.first << std::endl;
         std::cout << "Second:" << std::endl;
         boost::apply_visitor(*this,elem.second);
      }
   }
};

int main()
{
   std::vector<Container> c_vec;
   std::vector<int> int_vec;
   int_vec.push_back(1);
   int_vec.push_back(2);
   Container c(int_vec);
   Structure s=std::make_pair(std::string("name"),c);
   std::vector<Structure> s_vec;
   s_vec.push_back(s);
   c_vec.push_back(int_vec);
   c_vec.push_back(s_vec);

   for(auto const& elem : c_vec)
      boost::apply_visitor(printer(),elem);   
   return 0;
} 
```

# actionscript-3 - Feathers（基于 Starling 的 Adob e AIR 库）列表控件在第二次实例化时不起作用

> ID：15219557
> 
> 赞同：0
> 
> 时间：2013-03-05T08:58:35.603
> 
> 标签：actionscript-3, air, adobe, starling-framework

我遇到了羽毛列表控件的问题。它在我第一次进入包含列表的屏幕时起作用，但是当我在同一个应用程序执行中第二次进入该屏幕时，滚动列表根本不滚动，而且文本也不会出现。控制台中没有出现错误。

我尝试了很多东西，但我仍然遇到同样的问题：它只在第一次实例化时才有效。如果我退出屏幕并返回，它根本不起作用！

退出屏幕时，它被释放，当返回该屏幕时，它是 List 的一个新实例。为什么它只在第一次工作？

此外，我尝试完全不使用自定义 ItemRenderer，因此只出现图像，没有文本，并且仍然发生相同的情况。该列表不响应第二次实例化的滚动事件。所以这不是 ItemRenderer 的问题。

好的，这里有一些代码：

```
 typeList = new List();
        typeList.x = Settings.appResolution[0] - Settings.menuTypeColumnWidth;
        typeList.y = Settings.topBarHeight;
        typeList.width = Settings.menuTypeColumnWidth;
        typeList.height = Settings.appResolution[1] - Settings.topBarHeight;
        typeList.dataProvider = new ListCollection(listContents);
        typeList.itemRendererProperties['labelField'] = 'text';
        typeList.itemRendererProperties['accessoryLabelField'] = 'articles';
        typeList.itemRendererProperties['iconSourceField'] = 'thumbnail';
        var listLayout:VerticalLayout = new VerticalLayout();
        listLayout.gap = Settings.menuTypeItemGap;
        typeList.layout = listLayout;
        typeList.addEventListener(Event.CHANGE, onListChange);
        typeList.itemRendererType = MenuTypeItemRenderer; 
```

如您所见，这并没有什么不寻常的地方。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:46:51.417

您确定执行第二次实例化时列表使用的 ListCollection 仍然可用吗？

```
_list.dataProvider = new ListCollection(items); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:05:36.513

这是我使用的代码示例。看看它是否提供任何线索。在从舞台上删除类之前，我调用了 clearList 函数。

```
private function onAddedToStage(e:starling.events.Event):void {

removeEventListener(starling.events.Event.ADDED_TO_STAGE, onAddedToStage);
addEventListener(starling.events.Event.REMOVED_FROM_STAGE, onRemovedFromStage);

//only do this if a list does not already exist.
if(!_list){

items = new <ListItem>[];
for(var i:int = 0; i < 20; i++) {
items.push(new ListItem("Item text"));
}

_list = new List();
_list.itemRendererFactory = function():IListItemRenderer {
renderer = new ListItemRenderer();  
// pass your skins in here
renderer.defaultSkin = new Image(AssetManager.getAtlas().getTexture("listItemClear_normal"));
renderer.defaultSelectedSkin = new Image(AssetManager.getAtlas().getTexture("listItemClear_selected"));
return renderer;
};

vl = new VerticalLayout();  
vl.hasVariableItemDimensions = false;
_list.layout = vl;                      
_list.scrollerProperties.snapScrollPositionsToPixels = true;
_list.scrollerProperties.verticalScrollPolicy = Scroller.SCROLL_POLICY_AUTO;
_list.scrollerProperties.horizontalScrollPolicy = Scroller.SCROLL_POLICY_OFF;
_list.scrollerProperties.scrollBarDisplayMode = Scroller.SCROLL_BAR_DISPLAY_MODE_FLOAT;

//need to use a factory as we are not using a theme
_list.scrollerProperties.verticalScrollBarFactory = myScrollBarFactoryFunction;

_list.isSelectable = false;
_list.scrollerProperties.hasElasticEdges = true;
_list.itemRendererProperties.height = 60r;

_list.addEventListener(starling.events.Event.CHANGE, list_changeHandler);
_list.width = 320;
_list.height = StartUp._stageHeight;

addChild(_list);

_list.dataProvider = new ListCollection(items);
}
}

public function myScrollBarFactoryFunction():IScrollBar {

scrollBar = new SimpleScrollBar();
scrollBar.direction = SimpleScrollBar.DIRECTION_VERTICAL;
scrollBar.thumbProperties.defaultSkin = new Scale3Image(new Scale3Textures(AssetManager.getAtlas().getTexture("vertical-scroll-bar-thumb-skin"), 5, 14, Scale3Textures.DIRECTION_VERTICAL));      
scrollBar.thumbProperties.width = 4;
scrollBar.thumbProperties.minHeight = 20;
scrollBar.width = 4;
return scrollBar;

}

public function clearList():void {

if (_list) {
scrollBar = null;           
renderer = null;
vl = null;
removeChild(_list);     
_list = null;   

items.length = 0;
items = null;
}
} 
```

# c# - wpf画布不会调整大小

> ID：15219561
> 
> 赞同：3
> 
> 时间：2013-03-05T08:58:51.173
> 
> 标签：c#, .net, wpf, wpf-controls

我正在尝试学习 WPF，但我陷入了僵局。问题是我有一个从 UIControl 派生的控件，相关部分：

```
 <Grid>
    <Border x:Name="OuterBorder" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" BorderThickness="2" BorderBrush="Black">
        <Canvas x:Name ="InternalCanvas" Width="Auto" Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Ivory">
        </Canvas>
    </Border>
</Grid> 
```

当我渲染控件时，这给了我一个小黑点；我认为这是边界。

然后我在 InitizializeComponents 之后将代码添加到构造函数：

```
 Label l = new Label(); 
        l.Content = "HELLO"; 
        l.BorderThickness = new Thickness(2);
        l.BorderBrush = Brushes.Bisque;
        if (this.GetType() == typeof(SO.SOGraphNode)) 
            this.InternalCanvas.Children.Add(l); 
```

代码的意图是如果类没有被继承，它应该显示某种占位符。它确实如此。

问题是 InternalCanvas 和它的 ecplipsing OuterBorder 不会围绕新创建的 nice 标签调整大小。

边框仍然是点边框，标签后面看不到 InternalCanvas 的象牙色背景。

我用谷歌搜索了很多，相信我需要刷新或更新画布/控制元素，但我不再那么确定了。主要是通过观察大量的 Dispatcher.Invoke 变体，我在不同点的代码中非常自由地应用了这些变体，每次都没有行为变化。

WPF 对我来说还是有点倾斜，如果有人知道我如何解决这个问题，我确实有一个闪亮的“正确答案”可以分发。:)

**编辑 1** - 结果的屏幕截图：

![此画布没有调整大小！](../Images/083b8160923e6b8e4a5eec17380864ed.png)

请注意象牙色背景的普遍缺乏，并且 OuterBorder 仍然是控件右上角的一个小工件，而子元素显然要大得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:11:20.117

你能告诉我们它是如何渲染的吗？我在一个新项目中尝试了您的 xaml，但无法弄清楚问题所在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T10:24:51.940

“InternalCanvas”元素是画布类型对您来说很重要吗？因为如果您使用例如 Grid 代替，示例工作正常：

```
<Border x:Name="OuterBorder" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" BorderThickness="2" BorderBrush="Black">
        <Grid x:Name ="InternalGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Ivory">
        </Grid>
    </Border> 
```

编辑：

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)`remarks`的部分中阅读此行为的原因：

> Canvas 是唯一没有固有布局特征的面板元素。Canvas 的默认高度和宽度属性为零，除非它是自动调整其子元素大小的元素的子元素。Canvas 的子元素永远不会调整大小，它们只是定位在指定的坐标处。这为不需要或不需要固有尺寸约束或对齐的情况提供了灵活性。对于您希望子内容自动调整大小和对齐的情况，通常最好使用 Grid 元素。

# kendo-ui - Kendo Grid - 垂直滚动时保持标题

> ID：15219569
> 
> 赞同：7
> 
> 时间：2013-03-05T08:59:19.083
> 
> 标签：kendo-ui, kendo-grid

我有一个显示大量数据的剑道网格（版本 2012.3.1114）。

网格垂直滚动并且不分页，因为这是我们的要求。

当用户向下滚动时，网格是否可以保持其标题可见？当您选择“冻结顶行”选项时，我正在寻找类似于 Excel 的行为方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T11:02:35.390

定义表体的高度如下

```
$("#grid").kendoGrid({
    dataSource: datasource,
    pageable  : false,
    height:     300,
    columns   : [
        ...
    ]
}); 
```

*注意*：高度是表格主体的高度（以像素为单位）（不包括页眉或页脚）。

# android - Android：片段保留实例内存管理

> ID：15219573
> 
> 赞同：2
> 
> 时间：2013-03-05T08:59:33.480
> 
> 标签：android, garbage-collection, fragment

我想知道 androids 垃圾收集器如何处理片段（保留实例）保存的数据。

如果我有这样的班级层次结构：

```
class MyFragment extends Fragment {

      private DataManager dataManager;

      public MyFragment(){
            setRetainInstance(true);
      }

      public void onCreate(){
           if (dataManager == null)
           dataManager = new DataManager();

           dataManager.setView(this);
      }

      public void onCreateView(){
          // display the data of the dataManager
      }

      public void onStop(){
           dataManager.setView(null);
      }
  }

class DataManager implements DataChangedListener {

     private MyFragment view;
     private Data data;

     public DataManager(){

            data.setDataChangedListener(this);

     }

     public void setView(MyFragment v){
          this.view = v;          
      }

 }

 class Data {

      public void setDataChangedListener(DataChangedListener l){
           this.listener = l;
      }
 } 
```

所以我想要做的是，在`orientation`更改片段视图内容时将重新创建。但基础数据（`DataManager`和数据）不得重新加载。侦听数据对象的`DataManager`更改，并将此更改转发到 UI `Fragment`，. `Fragment`被“附加”到`DataManager`它（重新）创建的时间。

到目前为止，一切都很好。在我看来，这是一个很好的解决方案并且结构良好。基本上它是某种模型-视图-演示者模式。

但现在我想知道，Android 何时会运行垃圾收集器来收集`DataManager`数据对象。

假设我有一个显示`MyFragment`.

但是，当应用程序的用户导航到另一个 Activity 时，内存会发生什么，显示的东西完全不同。

由于有`DataManager`对 Data 的引用，反之亦然，我猜数据将“永远”保存在内存中，对吧？所以我猜垃圾收集器只会在设备内存不足时删除它。但我想，这两个对象不会自动成为垃圾收集的前两个数据对象。我想有某种“内存死锁”。

你怎么看？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:39:12.837

**关于垃圾收集器：**

我在这里的一些概念上可能是错误的，但据我所知，垃圾收集器从一个已知对象开始并沿着对象树“导航”，如果任何对象不在该树上，它将被收集。

例如，它从活动中统计数据，它引用了一些视图、一个适配器和 FragmentManger，FragmentManager 引用了 3 个片段，这些片段引用了一些数据对象，等等。

但是，如果 Object_A 对 Object_B 和 Object_B 有对 Object_A 的引用，但没有其他人对 Object_A 或 Object_B 有引用，那么您可以与这两者告别。

**建议：**

通常为了简化整个`setRetainInstance(true);`交易，我为自己制定了一条规则（请记住，这不是强制性的，但它确实让生活更容易理解和抽象）：如果我想要/需要保留数据并将使用`setRetainInstance`一个片段没有一个看法。这意味着，我不会覆盖它`onCreateView`，它上面的事务是一个简单的`add(mFrag, MyFrag.TAG);`，而不是将它放在布局中的任何位置。

这很简单，因为您知道所有视图都会在需要时重新创建，并且您始终可以使用`getFragmentManager().findFragmentByTag(MyFrag.TAG);`

回到 GC 交易，通过这种方法，您知道您的数据不会被 GC，因为它由 FragmentManager 安全保存。

听起来是个好计划？你怎么看？

**编辑：**

**进一步建议：**

不要在 DataFragment 中保留对任何视图、活动或上下文的任何引用。任何长期存在的对象都不应该保留这些引用，因为它们确实保存了整个活动，这是一个巨大的内存泄漏。

# java - 哪个版本的 Velocity 模板将支持地图创建

> ID：15219574
> 
> 赞同：1
> 
> 时间：2013-03-05T08:59:46.627
> 
> 标签：java, velocity

我正在发送地图并在速度模板版本 1.2 中访问，但我尝试在 vm 中创建地图我无法创建并获得异常。请给你指导。

```
#set($buyerActionStat = {
                            "0":"New",
                            "5":"Response-Acknowledged",
                            "6":"Response-Accepted",
                            "7":"Response-Rejected"                         
                        }) 
```

**例外 ：**

```
org.apache.velocity.exception.ParseErrorException: Lexical error: org.apache.velocity.runtime.parser.TokenMgrError: Lexical error at line 5, column 25\.  Encountered: "{" (123), after : ""
    at org.apache.velocity.Template.process(Template.java:181)
    at org.apache.velocity.runtime.resource.ResourceManager.getResource(ResourceManager.java:327)
    at org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:736)
    at org.apache.velocity.runtime.RuntimeSingleton.getTemplate(RuntimeSingleton.java:355)
    at org.apache.velocity.app.Velocity.getTemplate(Velocity.java:533)
    at ecnet.rd.core.template.TemplateResolver.<init>(TemplateResolver.java:45)
    at ecnet.rd.core.template.TemplateResolver.getInstance(TemplateResolver.java:34)
    at ecnet.rd.helper.AMECPOHelper.mergePOTemplate(AMECPOHelper.java:71) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:11:39.017

the expcetion is caused by velocity versions only.

Use apache `velocity` version `1.6.2` or later versions.

Maven dependency

```
<dependency>
                <groupId>org.apache.velocity</groupId>
                <artifactId>velocity</artifactId>
                <version>1.6.2</version>
            </dependency> 
```

# node.js - Node_redis - 如何删除密钥？

> ID：15219577
> 
> 赞同：49
> 
> 时间：2013-03-05T08:59:49.920
> 
> 标签：node.js, redis, node-redis

有没有办法使用[Node_redis](https://github.com/mranney/node_redis)按键删除/删除条目？我从文档中看不到任何这样的选项..

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2014-07-17T09:55:31.647

你可以`del`这样使用：

```
redis.del('SampleKey'); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-03-05T09:08:32.993

在这里你可以看到在这个库[node_redis github中有哪些 redis 命令有效](https://github.com/NodeRedis/node_redis/tree/master/test/commands)

如您所见，“del”命令在列表中。

此命令允许您从 Jonatan 回答的选定数据库中删除密钥。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-03-27T09:52:59.807

正如上面每个人所说，您可以使用 del 函数。您可以使用此语法确保成功的删除操作。

```
client.del('dummyvalue', function(err, response) {
   if (response == 1) {
      console.log("Deleted Successfully!")
   } else{
    console.log("Cannot delete")
   }
}) 
```

因为 DEL 命令会`(integer) 1`在运行成功时返回。

```
 redis 127.0.0.1:6379> DEL key 
    Success: (integer) 1
    Unsuccess: (integer) 0 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-05T09:03:37.347

如果我没记错的话，`del`应该这样做。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-09-16T13:01:08.020

希望对你有帮助

```
let redis = require("redis");

var redisclient = redis.createClient({
  host: "localhost",
  port: 6379
});

redisclient.on("connect", function () {
  console.log("Redis Connected");
});

redisclient.on('ready', function () {
  console.log("Redis Ready");
});

redisclient.set("framework", "AngularJS", function (err, reply) {
  console.log("Redis Set" , reply);
});

redisclient.get("framework", function (err, reply) {
  console.log("Redis Get", reply);
});

redisclient.del("framework",function (err, reply) {
  console.log("Redis Del", reply);
}); 
```

* * *

## 回答 #6

> 赞同：-9
> 
> 时间：2018-09-10T20:39:05.207

使用sailsJs 你可以这样做：

```
let id_todel = "5b845f9ea7f954bb732fdc52";
await sails.getDatastore('redis').leaseConnection(function during(db, proceed) {
      db.del(id_todel );
      return proceed(undefined, undefined);
}); 
```

# c# - 来自 Windows 窗体应用程序的 ASP.NET 身份验证

> ID：15219580
> 
> 赞同：4
> 
> 时间：2013-03-05T09:00:08.547
> 
> 标签：c#, asp.net, .net, wcf, authentication

我在谷歌上搜索*了“来自 Windows 窗体应用程序的 ASP.NET 身份验证*”，但结果是“使用 ASP.NET 的 Windows 身份验证”，这不是我想要的。

**设想：**

我有一个 ASP.NET 应用程序和一组 WCF 服务，它们通过 AJAX 调用向应用程序提供数据。这些 WCF 服务需要 ASP.NET 身份验证，这对浏览器来说很好，因为有一个 cookie 提供身份验证信息，或者要求用户通过登录页面进行身份验证。

我需要从 Windows 窗体应用程序调用这些服务，而不改变它们的工作方式。即 Windows 窗体应用程序将从服务接收 JSON 数据并对其进行处理。

**问题：**

我需要通过身份验证才能使用WCF服务，但由于这不是Web应用程序，没有cookie，无法显示登录页面！

**问题：**

如何从 Windows 窗体应用程序向 ASP.NET Web 应用程序提供身份验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:07:49.480

您需要为每个请求（如浏览器）存储 cookie。一旦您发送登录表单请求，cookie 变量就会让您在下一次请求时获得身份验证。

```
static class Requester
{
    static CookieContainer cookieJar = new CookieContainer();
    static string userAgent = ""; //specify your user agent

    /// <summary>
    /// Static method to request a web page. 
    /// It acts like a browser which means that keeps all cookies for depending domain.
    /// </summary>
    /// <param name="URL"></param>
    /// <returns></returns>
    static public FinalResponse sendRequest(string URL)
    {
        return sendRequest(URL, "");
    }

    static public FinalResponse sendRequest(string URL, string parameters)
    {
        FinalResponse result = new FinalResponse();
        Stopwatch timer = new Stopwatch();
        HttpWebRequest request;

        try
        {
            request = (HttpWebRequest)HttpWebRequest.Create(URL);
            request.Referer = "http://google.com"; //specify your referer
            request.CookieContainer = cookieJar;
            request.UserAgent = userAgent;
            BugFix_CookieDomain();
            request.AllowAutoRedirect = true;
            if (parameters != "")
            {
                request.Method = "POST";
                request.ContentType = "application/x-www-form-urlencoded";
                request.ContentLength = parameters.Length;

                //push parameters to request stream
                StreamWriter myWriter = new StreamWriter(request.GetRequestStream());
                myWriter.Write(parameters);
                myWriter.Close();
            }
            //send request
            result.requestTime = DateTime.Now;
            timer.Start();
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            timer.Stop();
            result.responseMilliseconds = timer.ElapsedMilliseconds;
            BugFix_CookieDomain();
            using (StreamReader sr = new StreamReader(response.GetResponseStream()))
            {
                result.document = sr.ReadToEnd();
                sr.Close();
                result.isSucceded = true;
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            result.document = "";
            result.isSucceded = false;
        }
        return result;
    }

    /// <summary>
    /// Call this function before all usage of cookieJar. 
    /// It fixes the bug (!) of CookieContainer Class. 
    /// </summary>
    private static void BugFix_CookieDomain()
    {
        System.Type _ContainerType = typeof(CookieContainer);
        Hashtable table = (Hashtable)_ContainerType.InvokeMember("m_domainTable",
                                   System.Reflection.BindingFlags.NonPublic |
                                   System.Reflection.BindingFlags.GetField |
                                   System.Reflection.BindingFlags.Instance,
                                   null,
                                   cookieJar,
                                   new object[] { });
        ArrayList keys = new ArrayList(table.Keys);
        foreach (string keyObj in keys)
        {
            string key = (keyObj as string);
            if (key[0] == '.')
            {
                string newKey = key.Remove(0, 1);
                table[newKey] = table[keyObj];
            }
        }
    } 
```

# javascript - 忽略覆盖 div

> ID：15219581
> 
> 赞同：2
> 
> 时间：2013-03-05T09:00:16.670
> 
> 标签：javascript, html, css

我有一个中间有一个洞的覆盖层，用作它下面的图像的蒙版。我想用 draggable() 拖动图像。但是，我找不到用鼠标忽略覆盖的可靠方法（这是一些 TR 的 TD 在中间用 javascript 创建一个变量掩码）。不过我遇到了`pointer-events: none`。这正是我所需要的。不过，我也需要让它在 IE8 中工作。所以我需要一个对 X 浏览器更友好的解决方案。

任何帮助表示赞赏。

```
<div class="workspace">
    <!-- <div id="color_overlay"></div> -->
    <table border="0" cellpadding="0" cellspacing="0" class="overlay">
        <tr>
            <td colspan="3">&nbsp;</td>
        </tr>
        <tr id="drawbox_tr">
            <td class="drawbox_side"></td>
            <td id="drawbox">&nbsp;x</td>
            <td class="drawbox_side"></td>
        </tr>
        <tr>
            <td colspan="3">&nbsp;</td>
        </tr>
    </table>
    <div id="image"></div>
</div> 
```

和 CSS：

```
.container .workspace {
    float: left;
    width: 75%;
    height: 100%;
    overflow: hidden;
    background: pink;
    position: relative;
}

.workspace .overlay {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 2;
    margin: 0px;
    padding: 0px;
    cursor: pointer;
}

.workspace .overlay td, .workspace .overlay tr {
    margin: 0px;
    padding: 0px;
}

.workspace .overlay td {
    opacity: 0.5;
}

.workspace #image {
    position: absolute;
    z-index: 1;
    border: 1px solid #000;
} 
```

编辑：我做了一个指针事件的小演示（[http://www.envyum.nl/pointer/](http://www.envyum.nl/pointer/)）。例如，在 Chrome 中，它通过制作`pointer-event: none`. 在 IE8 中没有任何反应。但我仍然需要它用于 IE8。必须有一些解决方法使它忽略覆盖并使其下方的图像可调整大小和可拖动，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:06:27.770

我之前在 SO 上阅读过关于“指针事件”的类似主题。

> Pointer-events 是 Mozilla hack，它已在 Webkit 浏览器中实现，你不能指望在 IE 浏览器中再看到一百万年。

请检查这是否值得尝试：[IE 的 css 'pointer-events' property Alternative](https://stackoverflow.com/questions/5855135/css-pointer-events-property-alternative-for-ie)

# jms - Mule 2.2.6 - 处理 JMS 连接丢失的策略

> ID：15219582
> 
> 赞同：1
> 
> 时间：2013-03-05T09:00:22.593
> 
> 标签：jms, activemq, mule

我正在使用 Mule 2.2.6，具有以下设置：

2 台服务器，每台都有一个运行 Mule 2.2.6 的 ActiveMQ 1 服务器实例

现在，我有一项服务可以从一个 ActiveMQ 中获取消息，并将其放在另一个上。但是，当目标 ActiveMQ 关闭时，这会导致丢失消息的问题。然后，Mule 将从源 ActiveMQ 中获取一条消息，但在尝试将其放置在目标 AtiveMQ 上时遇到此异常：

```
ERROR [org.mule.DefaultExceptionStrategy] Caught exception in Exception Strategy: No JMS Connection 
java.lang.IllegalStateException: No JMS Connection
    at org.mule.transport.jms.JmsMessageDispatcher.doDispatch(JmsMessageDispatcher.java:81)
    at org.mule.transport.AbstractMessageDispatcher.dispatch(AbstractMessageDispatcher.java:105)
    at org.mule.transport.AbstractConnector$DispatchWorker.doRun(AbstractConnector.java:2561)
    at org.mule.work.AbstractMuleEventWork.run(AbstractMuleEventWork.java:41)
    at org.mule.work.WorkerContext.run(WorkerContext.java:310)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1061)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:662) 
```

一旦发生这种情况，消息就会丢失，远远低于可接受的范围。

在检查 mule 配置时，我注意到没有 jms-transactions 与将消息从一个 ActiveMQ 移动到另一个的服务相关联，但添加事务后，问题仍然存在。

配置：

ActiveMQ 连接器：

```
<jms:activemq-connector name="jmsConnectorOuter" specification="1.1"
    persistentDelivery="true" disableTemporaryReplyToDestinations="true" honorQosHeaders="true"
    numberOfConsumers="1" connectionFactory-ref="activeMqConnectionFactoryOuter" maxRedelivery="-1">
    <ee:retry-forever-policy frequency="5000" asynchronous="false" />
</jms:activemq-connector>

<jms:activemq-connector name="jmsConnector" specification="1.1"
    persistentDelivery="true" disableTemporaryReplyToDestinations="true" honorQosHeaders="true"
    numberOfConsumers="1" connectionFactory-ref="activeMqConnectionFactory" maxRedelivery="-1">
    <ee:retry-forever-policy frequency="5000" asynchronous="false" />
</jms:activemq-connector> 
```

Jms 端点：

```
<endpoint name="queue.destination" address="jms://queue.destination" connector-ref="jmsConnector" />

<endpoint name="queue.source" address="jms://queue.source" connector-ref="jmsConnectorOuter" /> 
```

服务：

```
<service name="OuterActiveMQService">
    <inbound>
        <jms:inbound-endpoint ref="queue.source">
           <jms:transaction action="ALWAYS_BEGIN" timeout="60000" />
        </jms:inbound-endpoint>
    </inbound>

    <outbound>
        <pass-through-router>
            <jms:outbound-endpoint ref="queue.destination" />
        </pass-through-router>
    </outbound>
</service> 
```

当与目标的 ActiveMQ 连接丢失时，可以做些什么来确保消息不会丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:10:16.807

您需要添加：

```
<jms:transaction action="ALWAYS_JOIN" /> 
```

在出站 JMS 端点中使其加入事务。

# jsf - 如何在对话框重新打开之前恢复 p:dataTable 的状态？

> ID：15219583
> 
> 赞同：1
> 
> 时间：2013-03-05T09:00:22.843
> 
> 标签：jsf, primefaces

我正在使用**PrimeFaces 3.5**。我`p:dialog`在其中是`p:dataTable`。这用于从过滤列表中选择项目。

选择项目后，我将隐藏对话框并取消呈现数据表。但是在再次显示对话框并重新渲染数据表后，数据表包含之前过滤的行，但过滤器本身是清晰的。

我正在使用**延迟数据加载**，所以`values`指向`LazyDataModel`和`filteredValues`没有设置。

我想让 dataTable 再次处于默认状态，以便过滤器和选定的行都为空。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:44:19.287

从源代码来看，您似乎可以调用`reset()`一个实例`org.primefaces.component.datatable.Table`

1.  清除过滤值
2.  清除过滤器
3.  重置它的价值

因此，您应该获取对客户端数据表的引用（通过值绑定或从事件中遍历 DOM）并调用`table.reset()`

# c# - Orchard 中 TitlePart 的替代选项未正确应用于标题的实际渲染

> ID：15219588
> 
> 赞同：1
> 
> 时间：2013-03-05T09:00:32.007
> 
> 标签：c#, asp.net-mvc, orchardcms, orchardcms-1.6

我想覆盖为特定内容类型呈现标题（TitlePart 或 Parts_Title）的方式，并使用形状跟踪工具进行替代。有趣的是，无论我更改为备用标题，它仍然使用与以前相同的 html 呈现。然而，在形状跟踪工具中，“模板”选项卡显示修改后的模板。

这里可能发生了什么，我该如何正确修复它？

编辑

身体也会出现同样的问题。模板`@Model.Html lalala`不显示文本“lalala”的地方。

# javascript - jquery在选择相关单选按钮时显示/隐藏div

> ID：15219593
> 
> 赞同：2
> 
> 时间：2013-03-05T09:00:42.593
> 
> 标签：javascript, jquery

这是我的jQuery代码

```
$(document).ready(function() {
$("div.imgDisp").hide();
$('[id="' + $(":radio:checked").val()+'"]').show();
    $('input[name="rdNumber"]:radio').click(function() {
     $("div.imgDisp").fadeOut('slow');
    $('[id="' + $(this).val()+'"]').fadeIn('slow');
});
}); 
```

这是html代码

```
<div class="wrapper"> <strong><span>*</span> Number</strong>

<div class="formText">
    <input type="radio" name="rdNumber" value="100" />100
    <input type="radio" name="rdNumber" value="200" checked="checked"/>200
    <input type="radio" name="rdNumber" value="300" />300</div>
</div>

<input type="radio" name="rdImage" value="preExisting" />Choose from images below
<div id="100" class="imgDisp">
<div class="heading">10x10</div>
<input type="radio" name="preExistingImage" id="100" value="10x10-1"
/>
<img src="1-1.png">
<input type="radio" name="preExistingImage" id="100" value="10x10-2" />
<img src="1-2.png">
</div>
<div id="200" class="imgDisp">
<div class="heading">10x20</div>
<input type="radio" name="preExistingImage" id="200" value="10x20-1"
/>
<img src="2-1.png">
<input type="radio" name="preExistingImage" id="200" value="10x20-2" />
<img src="2-2.png">
</div>
<div id="200" class="imgDisp">
<div class="heading">20x10</div>
<input type="radio" name="preExistingImage" id="200" value="20x10-1"
/>
<img src="3-1.png">
<input type="radio" name="preExistingImage" id="200" value="20x10-2" />
<img src="3-2.png" width="20" height="10">
</div> 
```

代码在选择 100 单选按钮时工作正常，它显示 id = 100 的 div，在选择 id = 200 时，它显示两个 id = 200 的 div。在这里检查这个小提琴[http://jsfiddle.net/vDBDA/2/](http://jsfiddle.net/vDBDA/2/)

现在有两个查询 1\. 我使用重复的 id 在选择单选按钮时显示类似类型的 div 像这段代码

```
<div id="200" class="imgDisp"> 
```

虽然它工作正常，但我知道重复的 id 是一个问题。我该如何解决？

1.  默认情况下，当页面加载编号 200 时被选中。在这个小提琴中，它显示了与单选按钮 200 关联的 div，但在实际编程和 localhost/浏览器中它没有显示。可能是什么原因？

你所有的帮助都将是金色的。提前谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:13:01.157

`ID`如果您想对某些元素组应用一些效果，那么应该是唯一的，然后将所有这些元素放在一个类中。并且为了应用效果，您需要指定使用 `$('.classname').fadein();`

我稍微编辑了你的繁琐，请检查 [http://jsfiddle.net/vDBDA/7/](http://jsfiddle.net/vDBDA/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:12:12.193

You can assign a class to each element that you want per grouping. You may need to then iterate over those elements using an each function.

```
$(selector).each( function(){
     //hide or show...etc
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:12:29.623

只需在您的 css 文件中添加此类

```
.hide_div{
    display: none;
} 
```

在隐藏任何 div 时，将此属性应用于 div，如果要显示 div，则将用户 show_div 作为类。使用 addClass 将 CSS 应用于该 DIV。

```
.show_div{
    display: block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:06:42.097

您可以使用 class 而不是 ID 因为 ID 对于一个 html 页面必须是唯一的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T09:27:31.010

```
 i try your code...and here is what i did...

    <div class="wrapper"> <strong><span>*</span> Number</strong>

        <div class="formText">
            <input type="radio" name="rdNumber" value="100" />100
            <input type="radio" name="rdNumber" value="200" checked="checked" />200
            <input type="radio" name="rdNumber" value="300" />300</div>
    </div>
    <input type="radio" name="rdImage" value="preExisting" />Choose from images below
    <div class="100 imgDisp" >
        <div class="heading">10x10</div>
        <input type="radio" name="preExistingImage" class="100" value="10x10-1"
        />
        <img src="1-1.png">
        <input type="radio" name="preExistingImage" class="100" value="10x10-2" />
        <img src="1-2.png">
    </div>
    <div class="200 imgDisp">
        <div class="heading">10x20</div>
        <input type="radio" name="preExistingImage" class="200" value="10x20-1"
        />
        <img src="2-1.png">
        <input type="radio" name="preExistingImage" class="200" value="10x20-2" />
        <img src="2-2.png">
    </div>
    <div class="200 imgDisp" >
        <div class="heading">20x10</div>
        <input type="radio" name="preExistingImage" class="200" value="20x10-1"
        />
        <img src="3-1.png">
        <input type="radio" name="preExistingImage" class="200" value="20x10-2" />
        <img src="3-2.png" width="20" height="10">
    </div>

$(document).ready(function () {
    $(".imgDisp").hide();
    $('.'+$(":radio:checked").val()).show();
    $('input[name="rdNumber"]:radio').click(function () {
        $("div.imgDisp").fadeOut('slow');
        $('.'+$(this).val()).fadeIn('slow');
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T09:03:27.787

只需添加`class`和删除`ID`DOM，然后使用`.on()`允许在动态加载的内容上绑定事件的 jQuery 方法。

# php - 错误：TypeError：document.getElementById("count2") 为空，因为条件表。怎么修？

> ID：15219599
> 
> 赞同：1
> 
> 时间：2013-03-05T09:01:03.027
> 
> 标签：php, javascript, html, web-applications

我的页面出现错误，我相信是因为 php if 语句没有显示条件表。

错误：TypeError：document.getElementById("count2") 为 null 源文件：[https](https://www.mysite.com/js/clocktimer.js) ://www.mysite.com/js/clocktimer.js 行：43

我有一个条件语句：

```
<?php  if ( $this->session->userdata('days_to_challenge') > 0 ) : ?>
    <table id="mytable" border="0">
         <tr>
             <td align="center" colspan="4"><div class="numbers" id="count2" style="padding: 10px; "></div></td>
         </tr>
<?php endif; ?> 
```

我的js代码导致错误：

```
document.getElementById('count2').style.display="block";
document.getElementById('count2').style.width="390px";
... 
```

挑战的天数已经归零，即。挑战已经开始，所以我没有显示倒计时表。

防止此类错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:03:14.103

在尝试摆弄它之前测试该元素是否存在。

```
var count2 = document.getElementById('count2');
if (count2) {
    count2.style.display="block";
    count2.style.width="390px";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:04:07.133

尝试这个 ：

```
if(document.getElementById('count2')){
   document.getElementById('count2').style.display="block";
   document.getElementById('count2').style.width="390px";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:05:07.757

在编写代码之前确保元素存在

```
if(document.getElementById('count2') != null) {
  document.getElementById('count2').style.display="block";
  document.getElementById('count2').style.width="390px";
} 
```

# python - 如何使用 NLTK 词干

> ID：15219602
> 
> 赞同：1
> 
> 时间：2013-03-05T09:01:08.963
> 
> 标签：python, nltk

傻，但我不知何故无法访问 NLTK 中的词干函数。

我打电话

```
import nltk
nltk.stem.porter.step1ab() 
```

但我被告知该对象没有 step1ab 属性。我想我以某种方式没有正确调用它，但我不确定如何实际使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T09:33:29.847

`step1ab()`*是nltk.stem.porter*模块中的类的方法`PorterStemmer`。所以你可以这样称呼它：

 *```
myPorterStemmer = nltk.stem.porter.PorterStemmer()
...
myPorterStemmer.step1ab() 
```

但是，它并不是真正设计为直接调用的。人们通常会打电话给`myPorterStemmer.stem(word)`，然后它会委派`step1ab()`去做部分工作。

如果你真的想单独使用`step1ab`，你必须设置一堆变量，你会得到这样的东西：

```
>>> word = "countries"
>>> myStemmer = nltk.stem.porter.PorterStemmer()
>>> myStemmer.b = word
>>> myStemmer.k = len(word) - 1
>>> myStemmer.k0 = 0
>>> myStemmer.step1ab()
>>> myStemmer.b[myStemmer.k0:myStemmer.k+1]
'countri' 
```*

# mysql - 查询不使用索引

> ID：15219604
> 
> 赞同：1
> 
> 时间：2013-03-05T09:01:17.097
> 
> 标签：mysql

谁能告诉我为什么这个查询不使用索引 idx_accessorieslinkid 我创建了索引：

```
 CREATE INDEX idx_accessorieslinkid ON `accessorieslink` (actionid); 
```

我是索引的新手，并试图了解它们是如何工作的（以及为什么有时它们不这样做！）

sql

```
 SELECT action.actionid
     FROM
      ACTION 
      LEFT JOIN 
(SELECT 
  SUM(accprice) AS accprice,
  actionid
FROM
  accessorieslink 
GROUP BY actionid) AS accprice 
ON accprice.actionid = action.actionid 
    WHERE action.typeid = '2'
      AND actiondate2 BETWEEN '20130301' AND '20130301' 
    ORDER BY actiondate2 DESC 
```

解释结果

```
 id  select_type  table     type         possible_keys                   key key_len ref rows Extra
    1   PRIMARY      action    index_merge  idx_actiontypeid,idx_actiondate idx_actiondate,idx_actiontypeid  4,5 141    Using intersect(idx_actiondate,idx_actiontypeid); Using         where; Using index; Using temporary; Using filesort  
    1   PRIMARY      <derived2>       ALL   7804                    
    2   DERIVED      accessorieslink  ALL   12175                             Using temporary; Using filesort 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:05:19.853

派生表不能对物理表使用索引。

试试下面的查询

```
SELECT  SUM(accprice) AS accprice, accessorieslink.actionid FROM accessorieslink 
LEFT JOIN  `action`  ON accessorieslink.actionid = action.actionid 
GROUP BY accessorieslink.actionid 
```

# android - 修改 HTTP 请求中的 HTTP 请求行

> ID：15219609
> 
> 赞同：0
> 
> 时间：2013-03-05T09:01:36.357
> 
> 标签：android, http, httprequest

我有一个`HTTP proxy`作为 android 服务运行的服务，我想从标头更改请求 URL，但我无法找到如何做到这一点。

假设我有一个 HTTP 请求来到我的代理，如下所示：
`GET /index.html HTTP/1.1`

然后我想将此请求更改为：
`GET /index2.html HTTP/1.1`

我有一个 android`HttpRequestHandler`类，我得到了所有`HTTP requests`。
在`handle`HttpRequestHandler 类的函数中，我得到“ `HttpRequest`”类对象，我需要在其中修改请求行，但该类不提供任何函数/API 来执行此操作。我可以通过调用返回 RequestLine 类对象 `getRequestLine()`的类函数来查看请求的 URL 。`HttpRequest`

所以任何人都知道如何更改请求的请求行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:15:32.263

该文档读取***抽象***RequestLine getRequestLine() - 这意味着您获得了一些派生类（如果您愿意，可以将其打印到调试日志中）。我认为您应该创建一个派生自 HttpRequest 的类的新实例并传递该请求而不是原始请求。

# c++ - msbuild 在 CLI/C++ 项目的 win 2008 R2 上失败

> ID：15219610
> 
> 赞同：0
> 
> 时间：2013-03-05T09:01:37.597
> 
> 标签：c++, visual-studio-2012, msbuild, command-line-interface, windows-server-2008-r2

我刚刚在我的 win2008 R2 64 位服务器上安装了 VS2012。然后创建了简单的 hello world CLI/C++ 项目。当我尝试编译它时，出现以下错误：

```
stdafx.cpp : fatal error C1197: cannot reference 'c:\windows\microsoft.net\framework
\v2.0.50727\mscorlib.dll' as the program has already referenced '
c:\program files (x86)\reference assemblies\microsoft\framework\.netframework
\v4.5\mscorlib.dll' [C:\Users\simbuildop\Documents\Visual Studio 2012\Pr
ojects\ConsoleApplication10\ConsoleApplication10\ConsoleApplication10.vcxproj] 
```

对 msbuild 创建的 C++ 编译器的调用是：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\CL.exe /c /AI"C:\Program 
Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramew
ork\v4.5\\" /AI"C:\Program Files (x86)\Windows Kits\8.0\References
\CommonConfiguration   \Neutral" /AI"C:\Program Files (x86)\Reference Assemblies\Mic
rosoft\Framework\.NETFramework\v4.5\Facades\\" /Zi /clr /nologo /W3 /WX- /Od /Oy- /D 
WIN32 /D _DEBUG /D _UNICODE /D UNICODE /EHa /MDd /GS /fp:preci
se /Zc:wchar_t /Zc:forScope /Yc"stdafx.h" /Fp"Debug\ConsoleApplication10.pch" 
/Fo"Debug\\" /Fd"Debug\vc110.pdb" /TP /FUC:\Windows\Microsoft.NET\Fra
mework\v2.0.50727\mscorlib.dll /FU"C:\Program Files (x86)\Reference    
Assemblies\Microsoft\Framework\.NETFramework\v4.5\System.Core.dll" /FUC:\Window
s\Microsoft.NET\Framework\v2.0.50727\System.Data.dll /FUC:\Windows\Microsoft.NET  
\Framework\v2.0.50727\System.Xml.dll /analyze- /errorReport:queue /
clr:nostdlib stdafx.cpp
stdafx.cpp 
```

msbuild 试图将 .net 2.0 和 .net 4.5 拉到构建中真的很奇怪。

怎么了？

问候迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-21T15:19:10.807

我在尝试将 VS 2005 项目一直升级到 2015 时遇到了同样的问题。我首先升级到 2008，然后升级到 2010，以便能够利用并行 IDE 和往返。我的问题有点不同，因为我试图定位`.Net 2.0`而不是`.Net 4.0`.

我必须使用下面提到的手动更新`.vcxproj`以使用我想要的目标框架。`Project ToolsVersion`

```
<Project ToolsVersion="2.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"> 
```

我之前也曾将设置切换为使用 /CLR，然后我又切换回`No Common Language Runtime Support`. 我`Rebuild`在调整后做了一个，项目构建时出现了 0 个错误。

# c - 从字节数组中一一提取字节 (C)

> ID：15219611
> 
> 赞同：-3
> 
> 时间：2013-03-05T09:01:39.060
> 
> 标签：c

我有一个字节数组（dB）。我正在尝试一个一个地提取字节。为什么这段代码不起作用？任何指针？逻辑上我错了吗？还是我的实施有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:37:44.093

你有这样声明的字节缓冲区：

```
unsigned char *decodeBuf; 
```

要从该缓冲区中读取单个值，`i`只需在偏移量处编写：

```
unsigned char b = decodeBuf[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:07:11.453

尝试

```
int main()
{
    unsigned char tmp;
    tmp = getByte(dB+dOffset); dOffset++;
} 
```

它应该工作

# javascript - 在粘贴具有某些格式的文本时使用javascript代码还插入了新行如何解决

> ID：15219612
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:01:41.583
> 
> 标签：javascript

我是javascripting的新手我正在使用我的复制内容代码我正在复制具有一些富文本格式的文本并粘贴在一些应用了其他富格式的文本之间然后在粘贴时使用下面的代码有时它正在插入新行文本之间如何解决

```
function CopyContents() {
        var finalnode;
        if (typeof window.getSelection != "undefined") {
            var sel = window.getSelection();
            docFrag = sel.getRangeAt(0).cloneContents();
            var ndd = docFrag.cloneNode(true);
            var par = sel.getRangeAt(0).startContainer;
            docFrag = extractNodesWithStyle(par.parentNode,ndd);
        }
    }

function PasteContents() {
        var sel = window.getSelection();
        var Node = sel.focusNode; 
        var rang = sel.getRangeAt(0);
        if(rang.endOffset < Node.nodeValue.length) {
            var srange = document.createRange();
            srange.setStart(Node,rang.endOffset);
            srange.setEnd(Node,Node.nodeValue.length);
            var df = srange.extractContents();
            var ndd = df.firstChild.cloneNode(false);
            df = extractNodesWithStyle(sel.focusNode.parentNode,ndd);
            var par = Node.parentNode;
            var ns = par.nextSibling;
            par.parentNode.insertBefore( df, par.nextSibling );
            par.parentNode.insertBefore( docFrag.cloneNode(true), par.nextSibling );
        }else {
            Node.parentNode.insertBefore( docFrag.cloneNode(true), Node.nextSibling );
        }       
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:15:33.163

您是否尝试过使用正则表达式来消除空格？将该正则表达式应用于您想要摆脱间距的项目。在下面的示例中，str 是您要从中删除换行符的字符串。

```
 str.replace(/\s+/g, ' '); 
```

# opengl-es - OpenGL ES：预渲染到 FBO 纹理

> ID：15219617
> 
> 赞同：0
> 
> 时间：2013-03-05T09:02:00.410
> 
> 标签：opengl-es, textures, fbo

是否可以渲染一次 FBO 纹理，然后使用生成的纹理句柄来渲染所有后续帧？

例如，如果我正在渲染一个硬阴影贴图并且场景几何和光照位置是静态的，那么深度贴图总是相同的，我只想使用 FBO 渲染一次，然后再使用它。但是，如果我只是放置一个标志来渲染一次深度纹理，则纹理对于其余帧保持为空。

渲染帧完成后是否会重新分配 FBO？保留渲染纹理以渲染以下帧的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:41:03.987

渲染到纹理与您首先将这些像素上传到纹理没有什么不同。纹理的内容不会神奇地消失。更改纹理的内容时会*更改它们*。这可以通过将数据上传到纹理，或者通过设置纹理的图像之一用于帧缓冲区操作（清除、渲染到它等）。

除非您明确更改存储在纹理中的数据，否则它不会更改。

# html - Chrome 没有响应 CSS

> ID：15219619
> 
> 赞同：2
> 
> 时间：2013-03-05T09:02:11.043
> 
> 标签：html, css, google-chrome

我很难在最新版本的 Chrome 中让选择字段正常工作。这一切都在 Firefox 中完美运行，但 Chrome 只是固执。在 Chrome 中应该如何：

![在此处输入图像描述](../Images/37979d7ce3d299a6807f6e938cb2652f.png)

它在 Chrome 中的实际情况：

![在此处输入图像描述](../Images/92a2f861fbcd46e50e9eba955bc6d489.png)

HTML：

```
<td><!--<input type='text' name='ruum' />-->
<select>
    <option type="text" value="ruum">Uks</option>
    <option type="text" value="ruum">Kaks</option>
    <option type="text" value="ruum">Kolm</option>
</select>
</td> 
```

CSS：

```
option{ /*works for firefox but not for chrome*/
width:8.5em;
float:left;
}

@media screen and (-webkit-min-device-pixel-ratio:0) { /*doesn't do anything*/
 option{
    width:8.5em;
    float:left;
 } 
} 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:05:03.487

`select`在 上而不是在 上设置宽度`option`：

```
select {
    width: 8.5em;
    float: left;
} 
```

而且，`option`没有`type`属性。见：[http ://www.w3.org/TR/html5/forms.html#the-option-element](http://www.w3.org/TR/html5/forms.html#the-option-element)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:04:55.640

设置 的大小，而`<select>`不是`<option>`:

```
select{
    width:8.5em;
    float:left;
} 
```

看到这个[JSfiddle](http://jsfiddle.net/BDhxb/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:05:10.767

尝试将样式应用于`select`而不是`option`.

小提琴：http: [//jsfiddle.net/tttp2/](http://jsfiddle.net/tttp2/)

# git - git - 交换/交换远程分支

> ID：15219620
> 
> 赞同：1
> 
> 时间：2013-03-05T09:02:20.620
> 
> 标签：git, remote-branch

我有两个远程分支：

1.  ***特征233***

2.  ***v1.9.12***。

我需要将 1\. 分支重命名为***v1.9.12***并将 2\. 分支重命名为***v1.9.15***：

1.  *****功能233*** --> ***v1.9.12*****
****   ***v1.9.12*** --> ***v1.9.15******

 ***由于 1\. 分支的新名称与 2\. 分支的旧名称相同，对于远程存储库的其余用户来说会有什么问题吗？他们应该怎么做才能让本地两个分支的新名称？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:25:38.767

> 远程存储库的其他用户会有什么问题吗？

它可能，因为它完全改变了（他们所指的）历史，`v1.9.12`
用户必须将他们的本地分支重置为新的 origin/v1.9.12 远程分支。

```
git fetch
git branch -f v1.9.12 origin/v1.9.12 
```

他们可能想`v1.9.12`在本地仓库中创建一个旧的分支，以防他们在那里提交了工作，并想回到它。***

# php - 单独的（ir）正则表达式

> ID：15219621
> 
> 赞同：0
> 
> 时间：2013-03-05T09:02:24.370
> 
> 标签：php, python, regex

我有一个字符串：

```
A12B34C10G34LongerLongerEven LongerA57 
```

有没有办法使用正则表达式将上述内容分隔为：

```
A12,B34,C10,G34,Longer,Longer,Even Longer,A57 
```

所以，用逗号分隔。如果有任何帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:06:54.483

这给了你需要的东西：

```
<?php
$str = "A12B34C10G34LongerLongerEven LongerA57";

echo preg_replace('/([^\s])([A-Z])/', '\1,\2', $str), "\n";

// OUTPUT: A12,B34,C10,G34,Longer,Longer,Even Longer,A57 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:44:36.657

```
import re

ss = ' \tA12B34C10#G34LongerVery LongerEven LongerA57 \n'

print '%r\n%r\n\n%r' %\
      (
       #good 1
       re.sub('(?<=\S)(?=[A-Z])', ',', ss),

       #good 2
       ','.join(
           re.findall('(\s*[A-Z].+?\s*)(?=(?<=\S)[A-Z]|\s*\Z)',ss)
           ),

       #bad (written at first)
       ','.join(
           re.findall('(?<!\s)([A-Z].+?)(?<!\s)(?![^A-Z])',ss)
           )
       ) 
```

结果

```
' \tA12,B34,C10#,G34,Longer,Very Longer,Even Longer,A57 \n'
' \tA12,B34,C10#,G34,Longer,Very Longer,Even Longer,A57 \n'

'B34,C10#,G34,Longer,Very Longer,Even Longer' 
```

.

第一个解决方案尽可能接近想法（**插入**逗号）。
`(?<=\S)`在此解决方案中是强制性的，因为必须在字符**之间**插入每个逗号（来自 DJV 的更正）
`(?<!\s)`将匹配字符串的开头，并且逗号将被添加到第一个位置。

.

在第一次写作中，我将第二个解决方案写为

```
# bad
','.join(re.findall( '(?<!\s)([A-Z].+?)(?<!\s)(?![^A-Z])', ss) ) 
```

或者

```
# bad    
``','.join(re.findall( '(?<!\s)([A-Z].+?)(?<!\s)(?=[A-Z]|\Z)', ss) )`` 
```

where
`(?![^A-Z])`or `(?=[A-Z]|\Z)`were to take the end of the string as a possible end of matching part. 将字符串的结尾视为匹配部分的可能结尾。
然后
我意识到，如果空格在字符串的开头或结尾，就会有问题。上面的代码显示了哪些。
为了防止这些问题，解决方案是好的解决方案2。但它是一个更难获得的复杂解决方案，所以好的解决方案1显然是我的首选。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T09:08:16.787

```
preg_replace ('/\B([A-Z])/',',$1',$string); 
```

在任何不在单词边界上的大写字母之前插入逗号。

*我的假设是输入数据可以由大写字母后跟数字和大写单词组成，这些单词可能被空格分隔，也可能不被空格分隔。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T09:09:08.123

尝试这个 ：

```
$in = 'A12B34C10G34LongerLongerEven LongerA57';
$output = trim(preg_replace('/([^\s])([A-Z])/', "$1,$2", $in),",");
echo $output; 
```

输出 ：`A12,B34,C10,G34,Longer,Longer,Even Longer,A57`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T09:46:03.430

假设您想`','`在每个前面没有空格的大写字符前面添加一个，这里是简单的 Python `regex`+`sub`方法。

```
string = 'A12B34C10G34LongerLongerEven LongerA57'
re.sub(r'(?<=[^ ])([A-Z])', lambda x: ',' + x.group(0), string) 
```

输出：

```
'A12,B34,C10,G34,Longer,Longer,Even Longer,A57' 
```

向后检查以`regex`检查非空格并且匹配是大写字符。然后这个上面的 char 前面加上一个`','`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T09:05:52.317

你可以使用这个假设你不会在任何地方得到逗号`$in`

```
explode(",", preg_replace('/([^\s])([A-Z]+)/', "$1,$2", $in); 
```

我真的不知道python，但基本的正则表达式是一样的。

# c# - 如何将 ReportViewerControl 用于 Windows 桌面应用程序？

> ID：15219624
> 
> 赞同：0
> 
> 时间：2013-03-05T09:02:48.273
> 
> 标签：c#, visual-studio-2010, report-viewer2010

我是 Windows 桌面应用程序开发的新手。

我在 Access 2007 数据库中有两个表。

第一个是“Bill Master”，第二个是“Bill Detail”

我想使用报表查看器控件从我的应用程序中打印账单。

我该如何做到这一点？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:28:08.107

观看[此视频](http://vimeo.com/7606689)以了解如何创建报表查看器控件。此外，您将需要使用例如此功能从访问数据库中绑定您的数据

```
 public void LoadDatabase()
 {
     string connectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};", yourDatabaseName);

     using (OleDbConnection con = new OleDbConnection(connectionString))
     {
        try
        {
            con.Open();

            var data = new DataSet();

            OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM A", con);
            adapter.Fill(data, "a");

            adapter = new OleDbDataAdapter("SELECT * FROM B", con);
            adapter.Fill(data, "b");

            // TODO: bind the control's data source to dataset
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:06:56.043

也许这些链接会帮助你：

*   [http://www.gotreportviewer.com/](http://www.gotreportviewer.com/)
*   [http://msdn.microsoft.com/library/ms251671.aspx](http://msdn.microsoft.com/library/ms251671.aspx)

# java - 如何在 JTextArea swing 中实现 autosugesion

> ID：15219625
> 
> 赞同：2
> 
> 时间：2013-03-05T09:02:54.960
> 
> 标签：java, swing, autocomplete, jtextarea, autosuggest

如果有人回答，请告诉我，这个答案。基本上像谷歌搜索引擎一样需要，当我们按下任何键时，它将显示与建议相关的按键。

考虑萨蒂什·迪曼

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T09:22:34.413

从我的评论/[以前的代码中](https://stackoverflow.com/questions/14186955/create-a-autocompleting-textbox-in-java-with-a-dropdown-list/14194104#14194104)看到这个更新：

`JTextField`与 一起使用`AutoSuggestor`：

![在此处输入图像描述](../Images/42df9220fe786c737f327a0016af1780.png)

使用`JTextArea`（或除 JTextField 之外的任何其他 JTextComponent 将导致弹出窗口显示在插入符号下）`AutoSuggestor`：

![在此处输入图像描述](../Images/25fff7b3a89a4441e271dadfd4ae125d.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Rectangle;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.JWindow;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;
import javax.swing.border.LineBorder;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.BadLocationException;
import javax.swing.text.JTextComponent;

/**
 * @author David
 */
public class Test {

    public Test() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //JTextField f = new JTextField(10);
        JTextArea f = new JTextArea(10, 10);
        //JEditorPane f = new JEditorPane();

        //create words for dictionary could also use null as parameter for AutoSuggestor(..,..,null,..,..,..,..) and than call AutoSuggestor#setDictionary after AutoSuggestr insatnce has been created
        ArrayList<String> words = new ArrayList<>();
        words.add("hello");
        words.add("heritage");
        words.add("happiness");
        words.add("goodbye");
        words.add("cruel");
        words.add("car");
        words.add("war");
        words.add("will");
        words.add("world");
        words.add("wall");

        AutoSuggestor autoSuggestor = new AutoSuggestor(f, frame, words, Color.WHITE.brighter(), Color.BLUE, Color.RED, 0.75f) {
            @Override
            boolean wordTyped(String typedWord) {
                System.out.println(typedWord);
                return super.wordTyped(typedWord);//checks for a match in dictionary and returns true or false if found or not
            }
        };

        JPanel p = new JPanel();

        p.add(f);

        frame.add(p);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
}

class AutoSuggestor {

    private final JTextComponent textComp;
    private final Window container;
    private JPanel suggestionsPanel;
    private JWindow autoSuggestionPopUpWindow;
    private String typedWord;
    private final ArrayList<String> dictionary = new ArrayList<>();
    private int currentIndexOfSpace, tW, tH;
    private DocumentListener documentListener = new DocumentListener() {
        @Override
        public void insertUpdate(DocumentEvent de) {
            checkForAndShowSuggestions();
        }

        @Override
        public void removeUpdate(DocumentEvent de) {
            checkForAndShowSuggestions();
        }

        @Override
        public void changedUpdate(DocumentEvent de) {
            checkForAndShowSuggestions();
        }
    };
    private final Color suggestionsTextColor;
    private final Color suggestionFocusedColor;

    public AutoSuggestor(JTextComponent textComp, Window mainWindow, ArrayList<String> words, Color popUpBackground, Color textColor, Color suggestionFocusedColor, float opacity) {
        this.textComp = textComp;
        this.suggestionsTextColor = textColor;
        this.container = mainWindow;
        this.suggestionFocusedColor = suggestionFocusedColor;
        this.textComp.getDocument().addDocumentListener(documentListener);

        setDictionary(words);

        typedWord = "";
        currentIndexOfSpace = 0;
        tW = 0;
        tH = 0;

        autoSuggestionPopUpWindow = new JWindow(mainWindow);
        autoSuggestionPopUpWindow.setOpacity(opacity);

        suggestionsPanel = new JPanel();
        suggestionsPanel.setLayout(new GridLayout(0, 1));
        suggestionsPanel.setBackground(popUpBackground);

        addKeyBindingToRequestFocusInPopUpWindow();
    }

    private void addKeyBindingToRequestFocusInPopUpWindow() {
        textComp.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, true), "Down released");
        textComp.getActionMap().put("Down released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {//focuses the first label on popwindow
                for (int i = 0; i < suggestionsPanel.getComponentCount(); i++) {
                    if (suggestionsPanel.getComponent(i) instanceof SuggestionLabel) {
                        ((SuggestionLabel) suggestionsPanel.getComponent(i)).setFocused(true);
                        autoSuggestionPopUpWindow.toFront();
                        autoSuggestionPopUpWindow.requestFocusInWindow();
                        suggestionsPanel.requestFocusInWindow();
                        suggestionsPanel.getComponent(i).requestFocusInWindow();
                        break;
                    }
                }
            }
        });
        suggestionsPanel.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, true), "Down released");
        suggestionsPanel.getActionMap().put("Down released", new AbstractAction() {
            int lastFocusableIndex = 0;

            @Override
            public void actionPerformed(ActionEvent ae) {//allows scrolling of labels in pop window (I know very hacky for now :))

                ArrayList<SuggestionLabel> sls = getAddedSuggestionLabels();
                int max = sls.size();

                if (max > 1) {//more than 1 suggestion
                    for (int i = 0; i < max; i++) {
                        SuggestionLabel sl = sls.get(i);
                        if (sl.isFocused()) {
                            if (lastFocusableIndex == max - 1) {
                                lastFocusableIndex = 0;
                                sl.setFocused(false);
                                autoSuggestionPopUpWindow.setVisible(false);
                                setFocusToTextField();
                                checkForAndShowSuggestions();//fire method as if document listener change occured and fired it

                            } else {
                                sl.setFocused(false);
                                lastFocusableIndex = i;
                            }
                        } else if (lastFocusableIndex <= i) {
                            if (i < max) {
                                sl.setFocused(true);
                                autoSuggestionPopUpWindow.toFront();
                                autoSuggestionPopUpWindow.requestFocusInWindow();
                                suggestionsPanel.requestFocusInWindow();
                                suggestionsPanel.getComponent(i).requestFocusInWindow();
                                lastFocusableIndex = i;
                                break;
                            }
                        }
                    }
                } else {//only a single suggestion was given
                    autoSuggestionPopUpWindow.setVisible(false);
                    setFocusToTextField();
                    checkForAndShowSuggestions();//fire method as if document listener change occured and fired it
                }
            }
        });
    }

    private void setFocusToTextField() {
        container.toFront();
        container.requestFocusInWindow();
        textComp.requestFocusInWindow();
    }

    public ArrayList<SuggestionLabel> getAddedSuggestionLabels() {
        ArrayList<SuggestionLabel> sls = new ArrayList<>();
        for (int i = 0; i < suggestionsPanel.getComponentCount(); i++) {
            if (suggestionsPanel.getComponent(i) instanceof SuggestionLabel) {
                SuggestionLabel sl = (SuggestionLabel) suggestionsPanel.getComponent(i);
                sls.add(sl);
            }
        }
        return sls;
    }

    private void checkForAndShowSuggestions() {
        typedWord = getCurrentlyTypedWord();

        suggestionsPanel.removeAll();//remove previos words/jlabels that were added

        //used to calcualte size of JWindow as new Jlabels are added
        tW = 0;
        tH = 0;

        boolean added = wordTyped(typedWord);

        if (!added) {
            if (autoSuggestionPopUpWindow.isVisible()) {
                autoSuggestionPopUpWindow.setVisible(false);
            }
        } else {
            showPopUpWindow();
            setFocusToTextField();
        }
    }

    protected void addWordToSuggestions(String word) {
        SuggestionLabel suggestionLabel = new SuggestionLabel(word, suggestionFocusedColor, suggestionsTextColor, this);

        calculatePopUpWindowSize(suggestionLabel);

        suggestionsPanel.add(suggestionLabel);
    }

    public String getCurrentlyTypedWord() {//get newest word after last white spaceif any or the first word if no white spaces
        String text = textComp.getText();
        String wordBeingTyped = "";
        text = text.replaceAll("(\\r|\\n)", " ");
        if (text.contains(" ")) {
            int tmp = text.lastIndexOf(" ");
            if (tmp >= currentIndexOfSpace) {
                currentIndexOfSpace = tmp;
                wordBeingTyped = text.substring(text.lastIndexOf(" "));
            }
        } else {
            wordBeingTyped = text;
        }
        return wordBeingTyped.trim();
    }

    private void calculatePopUpWindowSize(JLabel label) {
        //so we can size the JWindow correctly
        if (tW < label.getPreferredSize().width) {
            tW = label.getPreferredSize().width;
        }
        tH += label.getPreferredSize().height;
    }

    private void showPopUpWindow() {
        autoSuggestionPopUpWindow.getContentPane().add(suggestionsPanel);
        autoSuggestionPopUpWindow.setMinimumSize(new Dimension(textComp.getWidth(), 30));
        autoSuggestionPopUpWindow.setSize(tW, tH);
        autoSuggestionPopUpWindow.setVisible(true);

        int windowX = 0;
        int windowY = 0;

        if (textComp instanceof JTextField) {//calculate x and y for JWindow at bottom of JTextField
            windowX = container.getX() + textComp.getX() + 5;
            if (suggestionsPanel.getHeight() > autoSuggestionPopUpWindow.getMinimumSize().height) {
                windowY = container.getY() + textComp.getY() + textComp.getHeight() + autoSuggestionPopUpWindow.getMinimumSize().height;
            } else {
                windowY = container.getY() + textComp.getY() + textComp.getHeight() + autoSuggestionPopUpWindow.getHeight();
            }
        } else {//calculate x and y for JWindow on any JTextComponent using the carets position
            Rectangle rect = null;
            try {
                rect = textComp.getUI().modelToView(textComp, textComp.getCaret().getDot());//get carets position
            } catch (BadLocationException ex) {
                ex.printStackTrace();
            }

            windowX = (int) (rect.getX() + 15);
            windowY = (int) (rect.getY() + (rect.getHeight() * 3));
        }

        //show the pop up
        autoSuggestionPopUpWindow.setLocation(windowX, windowY);
        autoSuggestionPopUpWindow.setMinimumSize(new Dimension(textComp.getWidth(), 30));
        autoSuggestionPopUpWindow.revalidate();
        autoSuggestionPopUpWindow.repaint();

    }

    public void setDictionary(ArrayList<String> words) {
        dictionary.clear();
        if (words == null) {
            return;//so we can call constructor with null value for dictionary without exception thrown
        }
        for (String word : words) {
            dictionary.add(word);
        }
    }

    public JWindow getAutoSuggestionPopUpWindow() {
        return autoSuggestionPopUpWindow;
    }

    public Window getContainer() {
        return container;
    }

    public JTextComponent getTextField() {
        return textComp;
    }

    public void addToDictionary(String word) {
        dictionary.add(word);
    }

    boolean wordTyped(String typedWord) {

        if (typedWord.isEmpty()) {
            return false;
        }
        //System.out.println("Typed word: " + typedWord);

        boolean suggestionAdded = false;

        for (String word : dictionary) {//get words in the dictionary which we added
            boolean fullymatches = true;
            for (int i = 0; i < typedWord.length(); i++) {//each string in the word
                if (!typedWord.toLowerCase().startsWith(String.valueOf(word.toLowerCase().charAt(i)), i)) {//check for match
                    fullymatches = false;
                    break;
                }
            }
            if (fullymatches) {
                addWordToSuggestions(word);
                suggestionAdded = true;
            }
        }
        return suggestionAdded;
    }
}

class SuggestionLabel extends JLabel {

    private boolean focused = false;
    private final JWindow autoSuggestionsPopUpWindow;
    private final JTextComponent textComponent;
    private final AutoSuggestor autoSuggestor;
    private Color suggestionsTextColor, suggestionBorderColor;

    public SuggestionLabel(String string, final Color borderColor, Color suggestionsTextColor, AutoSuggestor autoSuggestor) {
        super(string);

        this.suggestionsTextColor = suggestionsTextColor;
        this.autoSuggestor = autoSuggestor;
        this.textComponent = autoSuggestor.getTextField();
        this.suggestionBorderColor = borderColor;
        this.autoSuggestionsPopUpWindow = autoSuggestor.getAutoSuggestionPopUpWindow();

        initComponent();
    }

    private void initComponent() {
        setFocusable(true);
        setForeground(suggestionsTextColor);

        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);

                replaceWithSuggestedText();

                autoSuggestionsPopUpWindow.setVisible(false);
            }
        });

        getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true), "Enter released");
        getActionMap().put("Enter released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                replaceWithSuggestedText();
                autoSuggestionsPopUpWindow.setVisible(false);
            }
        });
    }

    public void setFocused(boolean focused) {
        if (focused) {
            setBorder(new LineBorder(suggestionBorderColor));
        } else {
            setBorder(null);
        }
        repaint();
        this.focused = focused;
    }

    public boolean isFocused() {
        return focused;
    }

    private void replaceWithSuggestedText() {
        String suggestedWord = getText();
        String text = textComponent.getText();
        String typedWord = autoSuggestor.getCurrentlyTypedWord();
        String t = text.substring(0, text.lastIndexOf(typedWord));
        String tmp = t + text.substring(text.lastIndexOf(typedWord)).replace(typedWord, suggestedWord);
        textComponent.setText(tmp + " ");
    }
} 
```

如您所见，我通过使其构造函数接受 a`JTextComponent`而不是 a`JTextField`或`JTextArea`等来更改代码。

我们剩下的问题是我们必须`JWindow`根据`JTextComponent`传递的内容在不同的位置显示弹出窗口，即 a`JTextField`将在底部弹出自动建议窗口，而`JTextArea`/ `JEditorPane`etc 将`JWindow`在插入符号/单词下弹出。

`showPopUpWindow()`在课堂上看看这个特定的方法`AutoSuggestor`：

```
private void showPopUpWindow() {
    autoSuggestionPopUpWindow.getContentPane().add(suggestionsPanel);
    autoSuggestionPopUpWindow.setMinimumSize(new Dimension(textComp.getWidth(), 30));
    autoSuggestionPopUpWindow.setSize(tW, tH);
    autoSuggestionPopUpWindow.setVisible(true);

    int windowX = 0;
    int windowY = 0;

    if (textComp instanceof JTextField) {//calculate x and y for JWindow at bottom of JTextField
        windowX = container.getX() + textComp.getX() + 5;
        if (suggestionsPanel.getHeight() > autoSuggestionPopUpWindow.getMinimumSize().height) {
            windowY = container.getY() + textComp.getY() + textComp.getHeight() + autoSuggestionPopUpWindow.getMinimumSize().height;
        } else {
            windowY = container.getY() + textComp.getY() + textComp.getHeight() + autoSuggestionPopUpWindow.getHeight();
        }
    } else {//calculate x and y for JWindow on any JTextComponent using the carets position
        Rectangle rect = null;
        try {
            rect = textComp.getUI().modelToView(textComp, textComp.getCaret().getDot());//get carets position
        } catch (BadLocationException ex) {
            ex.printStackTrace();
        }

        windowX = (int) (rect.getX() + 15);
        windowY = (int) (rect.getY() + (rect.getHeight() * 3));
    }

    //show the pop up
    autoSuggestionPopUpWindow.setLocation(windowX, windowY);
    autoSuggestionPopUpWindow.setMinimumSize(new Dimension(textComp.getWidth(), 30));
    autoSuggestionPopUpWindow.revalidate();
    autoSuggestionPopUpWindow.repaint();

} 
```

正如您所看到的，我们检查它`JTextComponent`是什么实例，如果它不是`JTextField`简单地获取插入符号的位置（通过`Rectangle`插入符号的），`JTextComponent`并且位置`JWindow`从那里弹出（在我的例子中位于插入符号的下方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T11:06:09.720

我可以提出我自己的实现。它基于 JWindow 中显示的 JList。由于我想将此代码用于组合框，因此我使用 keyEvent.consume() 调用禁用了 UP 和 DOWN 键。

```
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.BadLocationException;
import javax.swing.text.JTextComponent;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class GAutoCompletionDecorator {

    private final JTextComponent textComponent;
    private final JWindow suggestionsPopup;
    private final JList completionList;
    private final DefaultListModel completionListModel;

    public static void decorate(JComboBox comboBox, JFrame parent) {
        comboBox.setEditable(true);
        final JTextComponent textComponent = (JTextComponent) comboBox.getEditor().getEditorComponent();
        decorate(textComponent, parent);
    }

    private static void decorate(JTextComponent textComponent, JFrame parent) {
        final GAutoCompletionDecorator autoCompletionDecorator = new GAutoCompletionDecorator(textComponent, parent);
        autoCompletionDecorator.decorate();
    }

    private GAutoCompletionDecorator(final JTextComponent textComponent, JFrame parent) {
        this.textComponent = textComponent;
        this.suggestionsPopup = new JWindow(parent);
        this.completionListModel = new DefaultListModel();
        this.completionList = new JList();
        this.completionList.setModel(completionListModel);

        this.suggestionsPopup.getContentPane().add(this.completionList);
    }

    private void decorate() {
        textComponent.getDocument().addDocumentListener(new DocumentListener() {
            public void insertUpdate(DocumentEvent documentEvent) {
                updateSuggestions();
            }

            public void removeUpdate(DocumentEvent documentEvent) {
                updateSuggestions();
            }

            public void changedUpdate(DocumentEvent documentEvent) {
                updateSuggestions();
            }
        });

        this.textComponent.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent keyEvent) {
                if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN || keyEvent.getKeyCode() == KeyEvent.VK_UP) {
                    updateSuggestions();
                    completionList.requestFocus();
                    completionList.dispatchEvent(keyEvent);
                    keyEvent.consume();
                }
            }

            public void keyReleased(KeyEvent keyEvent) {
                if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN || keyEvent.getKeyCode() == KeyEvent.VK_UP) {
                    keyEvent.consume();
                }
            }
        });

        this.completionList.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent keyEvent) {
                if (keyEvent.getKeyCode() == KeyEvent.VK_ESCAPE) {
                    textComponent.requestFocus();
                    hideSuggestionsPopup();
                } else if (keyEvent.getKeyCode() == KeyEvent.VK_UP) {
                    if (completionList.getSelectedIndex() == 0) {
                        completionList.setSelectedIndex(completionListModel.size() - 1);
                        keyEvent.consume();
                    }
                } else if (keyEvent.getKeyCode() == KeyEvent.VK_DOWN) {
                    if (completionList.getSelectedIndex() == completionListModel.size() - 1) {
                        completionList.setSelectedIndex(0);
                        keyEvent.consume();
                    }
                } else if (keyEvent.getKeyCode() == KeyEvent.VK_BACK_SPACE) {
                    textComponent.requestFocus();
                    hideSuggestionsPopup();
                    textComponent.dispatchEvent(keyEvent);
                } else if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
                    textComponent.requestFocus();
                    hideSuggestionsPopup();
                    final String selectedSuggestion = (String) completionList.getSelectedValue();
                    if (selectedSuggestion != null) {
                        try {
                            final int caretPosition = textComponent.getCaretPosition();
                            textComponent.getDocument().insertString(caretPosition, getCompletionString(selectedSuggestion, textComponent.getText(), caretPosition), null);
                        } catch (BadLocationException e) {
                            //ignore
                        }
                    }
                }
            }
        });
    }

    private String getCompletionString(String selectedSuggestion, String text, int caretPosition) {
        //we may insert selectedSuggestion fully of some part of it
        return selectedSuggestion;
    }

    private void updateSuggestions() {
        final String text = textComponent.getText();
        final int caretPosition = textComponent.getCaretPosition();
        final List<String> suggestions = getSuggestions(text, caretPosition);
        if (suggestions == null || suggestions.size() == 0) {
            //hide suggestions window
            hideSuggestionsPopup();
        } else {
            //show suggestions window
            showSuggestionsPopup(suggestions);
        }
    }

    private void hideSuggestionsPopup() {
        suggestionsPopup.setVisible(false);
    }

    private void showSuggestionsPopup(List<String> suggestions) {
        completionListModel.clear();
        for (String suggestion : suggestions) {
            completionListModel.addElement(suggestion);
        }

        final Point textComponentLocation = new Point(textComponent.getLocation());
        SwingUtilities.convertPointToScreen(textComponentLocation, textComponent);

        Point caretLocation = textComponent.getCaret().getMagicCaretPosition();
        if (caretLocation != null) {
            caretLocation = new Point(caretLocation);
            SwingUtilities.convertPointToScreen(caretLocation, textComponent);
        }
        suggestionsPopup.pack();
        suggestionsPopup.setLocation(caretLocation == null ? textComponentLocation.x : caretLocation.x,
                textComponentLocation.y + textComponent.getHeight());
        suggestionsPopup.setVisible(true);
    }

    private List<String> getSuggestions(String text, int caretPosition) {
        final List<String> words = new ArrayList<String>();
        words.add("suggestion 1");
        words.add("suggestion 2");
        words.add("suggestion 3");
        words.add("suggestion 4");
        words.add("suggestion 5");
        //make suggestions funny
        return text.length() < words.size() ? words.subList(0, words.size() - text.length()) : Collections.<String>emptyList();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                final JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                final JComboBox comboBox = new JComboBox(new String[] {"Choice1", "Choice2"});
                comboBox.setEditable(true);
                GAutoCompletionDecorator.decorate(comboBox, frame);

                frame.add(comboBox);
                frame.pack();
                frame.setVisible(true);
            }
        });

    }
} 
```

# magento - “我的订单”表仅包含来自当前商店视图的订单

> ID：15219629
> 
> 赞同：1
> 
> 时间：2013-03-05T09:02:59.040
> 
> 标签：magento

我有一个带有多个网站和多个商店/商店视图的 maganto 安装（1.4.0.1）。此外，我在所有商店视图中都有不同的产品。当我进入我的帐户-> 我的订单在表格中显示来自所有商店的订单。我可以在某处配置或更改代码中的某些内容以仅从当前打开的商店视图中列出带有订单的列表吗？

换句话说，如果我在我的网站 mywebsite.com/store2 的订单 mywebsite.com/store2/sales/order/history/ 上去商店 2，它会显示所有网站的订单历史记录，但我需要我显示订单只需形成“store2”。

我希望有人能回答这个或类似的问题，如果能帮助我，我将不胜感激。

约旦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:40:15.503

很简单。

将相应的销售订单历史记录块 app\code\core\Mage\Sales\Block\Order\History.php 文件覆盖到您的本地代码池中

只需按当前商店 ID 过滤您的收藏。

```
 $store_id = Mage::app()->getStore()->getId();
             $orders = Mage::getResourceModel('sales/order_collection')
        ->addFieldToSelect('*')
        ->addFieldToFilter('customer_id', Mage::getSingleton('customer/session')->getCustomer()->getId())
        ->addFieldToFilter('state', array('in' => Mage::getSingleton('sales/order_config')->getVisibleOnFrontStates()))
        ->addFieldToFilter('store_id',$store_id)
        ->setOrder('created_at', 'desc')
    ; 
```

请注意上面代码中的这些行

```
 /*Current Store View ID*/
        $store_id = Mage::app()->getStore()->getId();

        /*Filtering the order collection by current store id*/
        ->addFieldToFilter('store_id',$store_id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:16:29.553

```
 /*GetCurrent Website Name*/
    $currentWebsiteName = Mage::app()->getStore()->getWebsite()->getName();        
    $currentWebsiteName_LIKE_PHRASE = '%'.$currentWebsiteName.'%';

    /*Filter the Order Collection by Current Website Name*/
    $orders = Mage::getResourceModel('sales/order_collection')
        ->addFieldToSelect('*')
        ->addFieldToFilter('customer_id', Mage::getSingleton('customer/session')->getCustomer()->getId())
        ->addFieldToFilter('state', array('in' => Mage::getSingleton('sales/order_config')->getVisibleOnFrontStates()))
        ->addAttributeToFilter('store_name', array('like' => $currentWebsiteName_LIKE_PHRASE))
        ->setOrder('created_at', 'desc');

   /*Note the Below Line*/
   ->addAttributeToFilter('store_name', array('like' => $currentWebsiteName_LIKE_PHRASE)) 
```

正在按当前网站名称过滤。刚拿到**sales_flat_order**表可以查看' **store_name** '这个列，你可以在其中找到它还**包含网站名称**。

**不幸的是，我在这个主订单表或其相关表中**找不到网站 ID 来对订单集合进行**JOIN 语句**。我认为**您可能有一些带有 **_website**后缀**的订单表，如果是这种情况，您可以轻松地将其加入我们现有的集合

# birt - BIRT - 报告第一页上的不同母版页标题

> ID：15219630
> 
> 赞同：2
> 
> 时间：2013-03-05T09:02:59.680
> 
> 标签：birt

我需要在BIRT 报告的第一页上有一个**母版页标题，在下一页有另一个****母版页标题。**我使用的是 3.7.1 版本。

1.  我在母版页标题中插入了一个包含两行的网格。
2.  我将一个新网格放入每一行。第一个嵌套网格用于第一页页眉，第二个嵌套网格用于下一页页眉。

3.  我设置了一个 onRender 脚本：

    ```
    //first nested grid
    if( pageNumber > 1 ){
    this.getStyle().display = "none";
    }
    //second nested grid
    if( pageNumber == 1 ){
    this.getStyle().display = "none";
    }else{
    this.getStyle().display = "block";
    } 
    ```

这适用于来自 JDBC 数据源的示例数据库。但我需要 XML 数据源，因此它根本不起作用。似乎对于示例数据库表，onRender 事件在每个页面上都被调用，但对于我的 XML 数据源，它只被调用一次。

拜托，如果你能帮我解决这个神秘的问题，我将不胜感激。

艾丽莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:18:19.320

数据源是什么并不重要。不过，为了以防万一，我确实对其进行了测试，并且在使用 XML 源时它对我有用。我唯一能想到的就是您正在使用自动布局并且表格上的分页符间隔为 0。输出到 PDF 将只显示第 1 页标题，每次。你拥有什么数据源并不重要。你可以看看这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T08:24:13.873

如果你想这样做：

P1：标题网格 1 P2...：标题网格 2

（如果我理解正确，在您的特殊情况下，Grid1 是 R1,R2 和 Grid2 是 R2）

有个窍门：

在您的母版页属性中，告诉 BIRT 不要在第一页上显示页眉并将 Grid2 放入页眉中。

但是，BIRT 仍然为头部保留*空间。*

将 Grid1 作为第一个对象添加到您的报表布局中，并为 Grid1 使用*负边距*以相应地向上移动它。

注意：这适用于 PDF 发射器，但不适用于 Word 发射器。

# debugging - 如何将类（例如 lib）添加到给定的 Typo3 扩展？

> ID：15219633
> 
> 赞同：0
> 
> 时间：2013-03-05T09:03:09.833
> 
> 标签：debugging, extension-methods, typo3

我有一个（恕我直言）关于编写 Typo3 扩展（版本 4.5 LTS）的小菜鸟问题。我尝试的只是组成一个小的 MVC 类模式，其中包含一个小的 curl 语句来从远程位置检索信息。原则上，MVC 类已经实现，我只想将它们包含到我的插件扩展的主程序中。这就是我猜想的工作：

```
class tx_uniklstudgangext2013_pi1 extends tslib_pibase {
public $prefixId      = 'tx_uniklstudgangext2013_pi1';      // Same as class name
public $scriptRelPath = 'pi1/class.tx_uniklstudgangext2013_pi1.php';    // Path to this script relative to the extension dir.
public $extKey        = 'uniklstudgangext2013'; // The extension key.
public $pi_checkCHash = TRUE;

/**
 * The main method of the Plugin.
 *
 * @param string $content The Plugin content
 * @param array $conf The Plugin configuration
 * @return string The content that is displayed on the website
 */
public function main($content, array $conf) {
    $this->conf = $conf;
    $this->pi_setPiVarDefaults();
    $this->pi_loadLL();

    $view = t3lib_div::makeInstance('tx_uniklstudgangext2013_pi1_view');
    // !HERE! : also tried with new(), since I don't want to deal with XCLASS here...
    // this works: $content = "<p>Hello world!</p>";...the line below doesn't...
    $content = $view->getCourseInfoOutput();
    /*'
        <strong>This is a few paragraphs:</strong><br />
        <p>This is line 1</p>
        <p>This is line 2</p>

        <h3>This is a form:</h3>
        <form action="' . $this->pi_getPageLink($GLOBALS['TSFE']->id) . '" method="POST">
            <input type="text" name="' . $this->prefixId . '[input_field]" value="' . htmlspecialchars($this->piVars['input_field']) . '" />
            <input type="submit" name="' . $this->prefixId . '[submit_button]" value="' . htmlspecialchars($this->pi_getLL('submit_button_label')) . '" />
        </form>
        <br />
        <p>You can click here to ' . $this->pi_linkToPage('get to this page again', $GLOBALS['TSFE']->id) . '</p>
    ';
    */

    return $this->pi_wrapInBaseClass($content);
}
} 
```

我是 Typo3 编程的初学者，我想到目前为止我还没有想到一百个隐含的问题（只是不知道 Typo3 是如何隐式运行的）。到目前为止我尝试/做了什么：

*   通过在根模板中设置它来全局禁用模板缓存。
*   将所有新语句转换为 makeInstance()；不想让这个连接搞砸我所有的 MVC 代码，我重写了被调用的方法 $view->getCourseInfoOutput()

    ```
    public function getCourseInfoOutput() {
      return "hello world!";
      //return $this->_model->getTemplateByCourseId(5);
    } 
    ```

*   这将我引向下一个问题：它只是没有得到你好世界！看来，Typo3 无论如何都抑制了扩展根类之外的类的返回值

*   当我将所有代码依次放入 main 方法时，效果很好

谁能帮助我：/我承认，我完全误解了扩展的工作原理的可能性很小，但是，正如我所说，我只想让我的代码在扩展中运行并简单地返回一个值。这真的那么难吗？

提前问候和谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:32:47.667

`$content`是任何 HTML 字符串。如果您使用 kickstarter 创建了扩展或使用任何现有的扩展作为样板，那么您只需要关心函数内部发生的事情。这完全取决于你。TYPO3 将创建您的类并调用 main 方法并将返回值用作内容。[您可以在http://docs.typo3.org/typo3cms/CoreApiReference/ExtensionArchitecture/Index.html](http://docs.typo3.org/typo3cms/CoreApiReference/ExtensionArchitecture/Index.html)找到所有相关文档

您当然**不能**在函数中使用任何 HTML。您的函数必须使用返回语句将内容作为连接字符串返回。

`TYPO3 CMS`用于`ob_clean`刷新输出缓冲区。如果您之前强制输出任何内容`TYPO3 CMS`，那么您将破坏它。

# search - 在 NetBeans 中未找到 $varName，但找到了 varName

> ID：15219635
> 
> 赞同：0
> 
> 时间：2013-03-05T09:03:21.877
> 
> 标签：search, netbeans, netbeans-7, file-search

一段时间以来，我在使用 NetBeans 时遇到了一些白痴问题。

我打开一个文件，其中有一个名为的变量`$dayFrom`我选择变量并按 ctrl + F 并获取显示的搜索框。

现在来了白痴部分......它没有找到变量！即使是我选择的那个...我在 NB 7.1 和 7.3 中都尝试过，但它们仍然存在。我将设置从 7.1 导入到 7.3，所以我猜有些选项在那里搞砸了。

有人知道在哪里打开该死的东西吗？

还有一件更有趣的事情，当我搜索`dayFrom`没有`$`标志时，它就像一个魅力......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:23:26.783

这是错误......从我这边......打开了常规表达......这应该以任何方式突出显示......它让我疯狂了2天......

![在此处输入图像描述](../Images/8f5df7d790d25c619846e88e16bbddc7.png)

# xpath - 如何为动态生成消息的 span 元素编写 xpath？

> ID：15219638
> 
> 赞同：0
> 
> 时间：2013-03-05T09:03:25.940
> 
> 标签：xpath, html, selenium-ide

在我使用的应用程序中，用户可以提交解决方案。我致力于一项决议，其中传达了一个信息：

> 你已经成功地遵守了这个决议”。这是该消息的 html 代码。

该消息的 HTML 是：

```
<div id="sliding_info_container" class="hidden" style="display: none;">
<span id="sliding_info" class="success">You have committed successfully to this resolution</span> 
```

现在，如果我取消提交该决议，应用程序会给出另一条消息：

> 解决未成功提交

这是该消息的 HTML 代码：

```
<div id="sliding_info_container" class="hidden" style="display: block;">
<span id="sliding_info" class="success">Resolution uncommitted successfully</span> 
```

我的第一个动作脚本包含`xpath=//div/span[@class="success"], value=You have committed successfuly to this resolution`. 当我运行此命令时，硒给出错误： **实际值“未成功提交的解决方案”与“您已成功提交此解决方案”不匹配**

我在脚本中给出的是正确的值，这就是应用程序正在显示的消息。为什么硒会为有效命令发出错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:18:30.410

尝试这个：

```
//div/span[@class="success"]/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-23T19:25:00.223

试试下面的代码：

```
//span[text()='You have committed successfully to this resolution'] 
```

# java - 无法在 java 中从客户端实例化 Web 服务接口

> ID：15219641
> 
> 赞同：2
> 
> 时间：2013-03-05T09:03:35.783
> 
> 标签：java, web-services, wsdl, axis

我在 apache 轴 2 中创建了一个 Web 服务。但我无法从我的客户端实例化接口。如何创建一个从接口调用方法的类？

引导我

服务接口：

```
 public interface BusService extends java.rmi.Remote {
                    public java.lang.String allepy(java.lang.String starting, java.lang.String ending, java.lang.String comfort) throws java.rmi.RemoteException;
                    public java.lang.String cochin(java.lang.String starting, java.lang.String ending, java.lang.String comfort) throws java.rmi.RemoteException;
                    public java.lang.String ooty(java.lang.String starting, java.lang.String ending, java.lang.String comfort) throws java.rmi.RemoteException;
                    public java.lang.String kanyakumari(java.lang.String starting, java.lang.String ending, java.lang.String comfort) throws java.rmi.RemoteException;
                    public java.lang.String kodaikanal(java.lang.String starting, java.lang.String ending, java.lang.String comfort) throws java.rmi.RemoteException;
                } 
```

我的客户编码

```
public class Servicecall {

    String luxury="";
    String start="";
    String end="";

    public void services(String start,String end,String comfort) {
     try 
     {

         String endpoint="http://localhost:8080/servicecomposition/services/BusService";

         Service service=new Service();

         Call call=(Call)service.createCall();

         call.setTargetEndpointAddress(new java.net.URL(endpoint));
         call.setOperationName(new QName("http://schemas.xmlsoap.org/soap/http","allepyReturn"));

         String ret = (String) call.invoke( new Object[] {start} );

     }

     catch(Exception e)
     {
         System.out.println(e);
     }
     }

} 
```

在上面的程序中，我从调用 servlet 的 jsp 页面调用服务（我传递了一些争论，并从该 servlet 调用客户端。但是当我调用客户端时，我收到此错误：

```
 INFO: Server startup in 22641 ms
 java.lang.InstantiationException: com.service.BusService 
```

# dotnetopenauth - DotNetOpenAuth 以编程方式无需重定向

> ID：15219643
> 
> 赞同：1
> 
> 时间：2013-03-05T09:03:36.563
> 
> 标签：dotnetopenauth

我正在做一个简单的项目，它由两个独立的部分组成：

1.  C# (ASP MVC) 中的后端应用程序，作为业务逻辑层服务器，并使用 JSON 响应公开公共控制器/操作
2.  PHP 中的前端应用程序，用作后端应用程序的接口

我已经使用自定义 MembershipProvider 实现了表单身份验证，它将用户详细信息存储在实体框架模型和 SQL Server 中。

下一步是启用 OpenID 身份验证。我需要做的是：

1.  在我的前端获取用户 OpenID 凭据（可能是 Facebook 和 Google）
2.  通过 POST 请求将这些转发到我的后端控制器
3.  在我的后端使用 OpenID 提供程序对用户进行身份验证，将他们的数据（仅限电子邮件）存储在我的模型中
4.  通知前端用户已通过身份验证

我一直在浏览不同的 DotNetOpenAuth 文档和示例，但我无法弄清楚我的列表中的第 3 点。

# javascript - 如何设置一个设置，让用户可以选择他们希望在 JavaScript 中显示的警报类型

> ID：15219649
> 
> 赞同：1
> 
> 时间：2013-03-05T09:03:57.273
> 
> 标签：javascript, firefox-addon, xul

我有一个显示各种警报的 Firefox 插件。有没有一种方法可以让用户选择他们希望使用的警报类型？目前我有两种类型的警报。标准 JavaScript 警报和 alertNotification。有没有一种方法可以让菜单项具有用户可以选择的两种不同的警报。不知道我会如何在 JavaScript 中编写代码。设置页面在 XUL 中。

当前两个警报的代码：包含两个警报的代码：

```
if(resultEmail) {
               prompts.alert(null, "Test", "Email Address Detected");

  //Other form of alert. 
          var alertsService = Components.classes["@mozilla.org/alerts-service;1"].
          getService(Components.interfaces.nsIAlertsService);
          alertsService.showAlertNotification("", 
                                "Test","Email Detected", 
                                false, "", null, ""); } 
```

如何设置用户可以选择他们希望使用的警报并将其设置在 XUL 窗口中？不确定这是否可能。

目前已经在下面实现了这一点，但仍然无法让用户选择他们希望使用的警报。

当前代码选择哪个警报：

```
var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
                var customAlert = prefManager.getBoolPref("extensions.yourextension.customalert");

        if(resultEmail) {
        if(!!customAlert)
                            {

                            // Show your alert
                             prompts.alert(null, "Privacy Exposure Detected", "Email Address Detected \n\nThis data is a privacy risk and should be reviewed");

                        } else {

                            // Show built in alert system
                            var alertsService = Components.classes["@mozilla.org/alerts-service;1"].
                           getService(Components.interfaces.nsIAlertsService);
                            alertsService.showAlertNotification("chrome://spellchecker/content/images/stop.png", 
                                "Privacy Exposure Detected",vrs_getWin.document.getElementById(elementT).value+ "This data is a privacy risk", 
                                false, "", null, "");

                        } 
```

XUL 窗口代码：

```
<vbox>
        <hbox>
            <label control="custom-alert" value="Custom Alerts"/>
            <checkbox id="custom-alert" preference="customalert"/>
        </hbox>

            <button id="checkerOkButton" label="&savebutton.label;" oncommand="namespace_highlight.setPrefs();"/>
            <button id="checkerCancelButton" label="&cancelbutton.label;" oncommand="window.close();"/>
        </hbox>

    </vbox> 
```

问题是复选框似乎没有保存输入，它只是默认为标准警报。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:13:52.073

您可以将用户想要的下拉选项存储在输入元素中，并在显示警报之前对其进行查询。这也可以保存在 cookie 中，以备将来纪念跨页面支持

```
//OR get type from session variable or cookie or whatever
var type = 1;
type = document.getElementById("userchoiceofalert").value;

function showAlert(type, subject, message)
{
if (type===1) {
    prompts.alert(null, subject, message);
} else {

  //Other form of alert. 
          var alertsService = Components.classes["@mozilla.org/alerts-service;1"].
          getService(Components.interfaces.nsIAlertsService);
          alertsService.showAlertNotification("", 
                                subject,message, 
                                false, "", null, ""); 
    }
}

//in your function
if(resultEmail) {
showAlert(type,"Test", "Email Address Detected"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:13:54.953

我假设您已经有一个 prefwindow 或某种方式来存储您的选项。因此，您可以使用以下内容为其创建首选项：

```
<label control="custom-alert" value="自定义警报"/>
<checkbox id="custom-alert" 偏好="customalert"/>

```

然后使用 prefManager 组件在您的 javascript 中获取选定的首选项：

```
var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);

```

将为您提供 prefManager 服务，然后您可以从那里检查该值（在这种情况下，它是一个布尔首选项，因为我们使用了一个复选框：

```
var customAlert = prefManager.getBoolPref("extensions.yourextension.customalert");

```

然后，您将在哪里显示您将拥有的警报类型：

```
if(!!customAlert)
{

    // 显示你的警报
    prompts.alert(null, "Test", "Email Address Detected");

} 别的 {

    // 显示内置警报系统
    var alertsService = Components.classes["@mozilla.org/alerts-service;1"]....

}

```

只需确保在您的 prefs.js 文件中具有首选项设置，例如：

```
// 首选项的默认值
pref("extensions.yourextension.customalert", false);

```

# javascript - 使用经典 ASP 中的按钮清除文本框

> ID：15219653
> 
> 赞同：0
> 
> 时间：2013-03-05T09:04:04.043
> 
> 标签：javascript, jquery, asp-classic

我有 html 按钮和文本框的代码：文本框是我输入文本的地方，这样我就可以对表格进行一些更改。

```
 'textbox
   <input name="txtupdate" type="text" id="txtupdate" value="<%=Request.Form("txtupdate")%>" />
  'button
  <td align="center"><button type="button" value="clear" id="clear">Clear</button></td> 
```

我现在需要做的是单击清除按钮，文本框将被清除。我尝试使用此代码，但它似乎不起作用，

```
<script type="text/javascript">
$(document).ready( function() {
   $('#clear').click( function () {
         $('#<%=Request.Form("txtupdate")%>').val(""); 
   });
 });
</script> 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:17:33.070

我认为你弄乱了 id 和 value。您的文本框 id 是`txtupdate`但不是`<%=Request.Form("txtupdate")%>`。所以，选择器不正确。你应该`txtupdate`改用。

正确的 JavaScript 应该如下所示。

```
<script type="text/javascript">
$(document).ready( function() {
   $('#clear').click( function () {
         $('#txtupdate').val(""); 
   });
 });
</script> 
```

# java - 对未修改集合/实体的约束违反

> ID：15219659
> 
> 赞同：0
> 
> 时间：2013-03-05T09:04:12.707
> 
> 标签：java, hibernate

在过去的几天里，我一直在努力解决一个非常令人沮丧的问题。

我们有大量的休眠实体，它们都是生成的代码。这意味着创建了以下@OneToMany 集合（除其他外）：

```
@OneToMany(cascade = CascadeType.ALL)
@JoinTable(name = "tablename")
private java.util.List<classname> fieldname; 
```

在我们的应用程序中，我们希望能够为第二个用户复制所有这些。我们通过读取所有这些类和字段并稍后重新创建它们（通过它们的构造函数）来做到这一点。然而，读取这个集合似乎会导致 Hibernate 将该集合标记为脏。当 Hibernate 第一次尝试删除一行然后再次插入时，这会导致在写入数据库时​​出现奇怪的约束冲突。

我的问题是：为什么 Hibernate 甚至要删除然后插入该行？为什么会失败？

我的猜测是 Hibernate 尝试重新创建整个集合，因为出于某种原因，Hibernate 认为它已被修改。然而，情况显然并非如此。

编辑：我应该指出，在阅读集合后使用 HibernateSession#evict 似乎可以解决问题。然而，这感觉很hacky，我更喜欢一个更深思熟虑的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:38:27.707

如果您的连接表没有任何主键，那么休眠总是将其视为新记录并尝试删除参考记录并插入新记录。

但是，如果您的连接表有自己的主键，那么如果初级键为空，它将插入记录，如果初级键值存在，那么它将更新，否则它将删除表中但不在列表中的记录。

Hibernate 需要主键来识别新记录或旧记录，否则对于 Join 表的情况它将始终是新的。

# c# - 返回一个新值

> ID：15219660
> 
> 赞同：1
> 
> 时间：2013-03-05T09:04:12.770
> 
> 标签：c#

我写了一个函数，但这个函数仍然返回旧字符串而不是新字符串。当您对旧字符串进行操作时，我不知道如何返回新字符串

举例：

```
public string TestCode(string testString)
{

// Here something happens with the testString

//return testString; <-- i am returning still the same how can i return the new string //where something is happened with in the function above

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:05:43.463

> // 这里的 testString 发生了一些事情

确保你对字符串做了什么，你将它分配回`testString`喜欢。

```
testString = testString.Replace("A","B"); 
```

因为字符串是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的。

我假设您正在调用该函数，例如：

```
string somestring = "ABC";
somestring = TestCode(somestring); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:05:50.967

`String`是不可变的（即不能更改）。你必须这样做

```
 myString = TestCode(myString) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:07:01.523

只需确保将新字符串值分配给变量（或参数`testString`）。例如，这里一个非常常见的错误是：

```
testString.Replace("a", ""); // remove the "a"s 
```

这应该是：

```
return testString.Replace("a", ""); // remove the "a"s 
```

或者

```
testString = testString.Replace("a", ""); // remove the "a"s
...
return testString; 
```

关键是：`string`是不可变`Replace`的：等不要更改旧字符串：它们会创建一个您需要存储在某处的新字符串。

# objective-c - 关闭模式视图时 UISearchBar 不再可编辑

> ID：15219665
> 
> 赞同：1
> 
> 时间：2013-03-05T09:04:45.283
> 
> 标签：objective-c, uitableview, uisearchbar, viewcontroller

我有一个`tableView`带有一些元素的，在视图的顶部，有一个`UISearchBar`. 第一次，我使用搜索栏一切正常。我可以编写、编辑和删除里面的文本和搜索栏，还可以过滤我的`tableView`. 但是问题出现了，当我从 tableView 中选择一个项目（表视图显示露营地列表）并打开一个包含项目详细信息的新视图时。当我从 detailView 回到 tableView 时，使用以下代码

```
[[self parentViewController]dismissModalViewControllerAnimated:YES]; 
```

`searchBar`不再可编辑。键盘没有出现，如果我触摸 searchBar，什么也不会发生。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:07:49.043

问题是其他一些视图与搜索栏重叠。还要检查搜索栏的用户交互

# iphone - 如何使用 UIBezierPath 在可可触摸中绘制多边形

> ID：15219669
> 
> 赞同：1
> 
> 时间：2013-03-05T09:05:02.753
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uibezierpath

我想绘制不同边的多边形（4-12）。绘制多边形的逻辑是什么。例如，如果用户选择 6 边，它应该画一个六边形，如果用户输入 8 个边，它应该画一个八边形。我找到了以下代码，但我也想调整我正在绘制多边形的 UIView 的大小，以便视图内部的形状也随着视图一起增长。任何机构都可以帮助我。以下是我当前正在使用的代码，但是当我调整形状移动到视图中另一个位置的视图时，它也没有定位在中心。

```
 int radius = MINIMUM(widht, height)*0.4 ;

     for (int i = 0; i < _numberOFsides; i++){

            CGPoint point = CGPointMake(widht/2+radius *cosf(i*2*M_PI/_numberOFsides), widht/2+radius*sinf(i*2*M_PI/_numberOFsides));

            if (i==0) {

                [_shapePath moveToPoint:point];

            }
            else{
                [_shapePath addLineToPoint:point];

                [_shapePath stroke];
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:40:02.277

现在要调整您的 UIBazierPath 的大小，您可以添加以下代码，

```
CGRect bazierRect = CGPathGetBoundingBox(bezierpath.CGPath)
CGFloat scaleX = view.frame.size.width / bazierRect.frame.size.width;
CGFloat scaleY = view.frame.size.height / bazierRect.frame.size.height;
CGAffineTransform transform = CGAffineTransformMakeScale(scaleX, scaleY);
CGPathRef newPath = CGPathCreateCopyByTransformingPath(bezierpath.CGPath, &transform);
bezierPath.CGPath = newPath;
CFRelease(newPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T15:09:57.630

如果您想制作具有任意数量边的正多边形，以下代码将为您提供每条边的顶点，并且很容易重新调整大小和边数：

```
int n = 10; //number of edges
float j = 20; //length of each edge
float x = 130;
float y = 250;//the point 130,250 will be at the bottom of the figure
float angle = 2*M_PI;
for (int i = 0; i < n; i++) {

    CGRect frame = CGRectMake(x, y, 2, 2);//put a dot on x,y
    NSLog(@"%f | %f, %f", angle, x, y);
    x = x + j*cosf(angle); 
    y = y + j*sinf(angle); //move to the next point
    angle = angle - 2*M_PI/n; //update the angle

    //display the dot
    UIView *rect = [[UIView alloc] initWithFrame:frame];
    rect.backgroundColor = [UIColor blueColor];
    [self.view addSubview:rect];  
} 
```

希望这可以帮助。如果您有任何问题，请随时提问，祝您度过愉快的一天！

~致命豪猪

# jquery - 从许多 div 覆盖生成图像

> ID：15219673
> 
> 赞同：0
> 
> 时间：2013-03-05T09:05:09.427
> 
> 标签：jquery, canvas

我有一个主 div，其中有许多子 div，这些子 div 有 img 标签，这些标签有一个子图像，这些子图像在该主 div 上相互重叠并创建一个主图像。有什么方法可以真正获得主 div 的图像，即所有 img 标签的整体图像？任何 jquery 插件可以做到这一点？任何建议表示赞赏！谢谢！

我尝试使用 canvas 标签，但里面的 img 标签没有显示。html如下

```
<canvas id="shirt_display">      
     <img src="'.base_url().'marcella-resources/front/img/'.$collection[$num].'/SBase1.png" data-type="Base">
     <img src="'.base_url().'marcella-resources/front/img/'.$collection[$num].'/CollarInner.png" data-type="Inner Collar Back">
     <img src="'.base_url().'marcella-resources/front/img/'.$collection[$num].'/CollarOuter.png" data-type="Inner Collar Front">
      <img src="'.base_url().'marcella-resources/front/img/Button/B_Black/ICollarB.png" data-type="Inner Collar Buttons">
      <img src="'.base_url().'marcella-resources/front/img/Button Holes/BH_Black/ICollarBH.png" data-type="Inner Collar Button Holes">
</canvas> 
```

我创建了一个点击事件来测试我是否可以获取图像。我的jQuery如下

```
$('.test').click(function()
{
    var canvas=document.getElementById('shirt_display');
    var ctx=canvas.getContext('2d');
    window.open('', document.getElementById('shirt_display').toDataURL());
}) 
```

# php - 更新数据库中过期用户状态的最佳方法？

> ID：15219675
> 
> 赞同：0
> 
> 时间：2013-03-05T09:05:11.407
> 
> 标签：php, mysql, database

在具有定期（例如：每月）订阅的付费应用程序的 mysql 数据库中，检查订阅过期的用户并使他们处于非活动状态的最佳方法是什么？通常我会在应用程序的到期日过后查看应用程序，但有几种类型的帐户，例如免费、试用等。它们不会有到期日。

我想在客户端应用程序方面保持简单，并使其只需要检查“活动”状态，并允许用户使用应用程序，而不是切换所有帐户的大小写类型和有效期。此外，帐户类型将来可能会有所不同，具体取决于客户的请求，如果逻辑位于 (php) 后端，那么这将允许更新而无需新的客户端版本。

该表将是这样的：

```
User ID | Expiry date | Status 
```

我目前做事的方式是我有一个 cronjob，它会不时运行并更新所有过期日期已过当前时间的用户。

总结一下我的问题是：

*   一旦我们投入生产并拥有大量用户，当前的方法是否会在服务器上造成峰值负载？
*   有没有更好、更清洁的方法来做到这一点？是不同的更新方法还是处理活动/非活动用户和到期时间的不同逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:12:42.380

为什么不只是检查用户登录时是否未过期。

即查询喜欢

```
SELECT COUNT(*), expiry IS NULL OR expiry > NOW()
FROM users
WHERE username = ?
AND password = ? 
```

然后检查您是否可以检查用户名/密码组合是否正确，以及帐户是否已过期/未过期。对于没有到期日期的帐户，请使用 NULL。

这样做的好处是每天只需要检查一小部分帐户（在这里猜测当用户登录时，他们会得到一个超时的会话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:26:01.473

您可以为此任务创建 CRON JOB。

[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

# php - 来自 PHP 路障的 Apple 推送通知

> ID：15219676
> 
> 赞同：0
> 
> 时间：2013-03-05T09:05:11.827
> 
> 标签：php, ios, objective-c, push-notification

我已经和目标c战斗了一段时间了。最后，我用熟悉的 PHP 回来了。[我在http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)使用了很棒的教程。该应用程序已准备好并已尽我所能进行了测试。

我的证书和一切都按顺序进行，并使用 ssl 进行了测试。

但是，当尝试向沙箱服务器发送推送通知时，没有任何内容会发送到手机。

我得到的只是

```
Connected to APNS
Message successfully delivered 
```

来自 ApnsPHP 的 sample_feedback.php 显示如下：

```
php sample_feedback.php
Tue, 05 Mar 2013 10:22:46 +0100 ApnsPHP[10294]: INFO: Trying     ssl://feedback.sandbox.push.apple.com:2196...
Enter PEM pass phrase:
Tue, 05 Mar 2013 10:22:49 +0100 ApnsPHP[10294]: INFO: Connected to ssl://feedback.sandbox.push.apple.com:2196.
Tue, 05 Mar 2013 10:22:49 +0100 ApnsPHP[10294]: INFO: Reading...
Tue, 05 Mar 2013 10:22:49 +0100 ApnsPHP[10294]: INFO: 38 bytes read.
Tue, 05 Mar 2013 10:22:49 +0100 ApnsPHP[10294]: INFO: New feedback tuple: timestamp=1362473808 (2013-03-05 09:56:48), tokenLength=32,     deviceToken=xxxxxfd75e9bf7d13324xxx1f6cc8e885a7c3a5fbba9234546715208cdxxx.
array(1) {
  [0]=>
  array(3) {
    ["timestamp"]=>
    int(1362473808)
    ["tokenLength"]=>
    int(32)
    ["deviceToken"]=>
    string(64) "xxxxxfd75e9bf7d13324xxx1f6cc8e885a7c3a5fbba9234546715208cdxxx"
  }
} 
```

我的 appdelegate 有

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
//store message in db for now
} 
```

我什至不确定从哪里开始调试...

# cakephp - 为什么我看不到 HABTM 的结果？

> ID：15219682
> 
> 赞同：0
> 
> 时间：2013-03-05T09:05:28.807
> 
> 标签：cakephp, has-and-belongs-to-many

几个月以来我一直在使用 cakephp，今天我遇到了一个问题，我不知道为什么它不能像往常一样工作。

我有三张桌子：

发表评论 posts_comments

在模型中，我设置：

**评论型号：**

```
var $hasAndBelongsToMany = array('Post'); 
```

**后模型**

```
var $hasAndBelongsToMany = array('Comment'); 
```

然后在我的控制器中，例如 PostController：

```
$this->set('comments', $this->Post->Comment->find('list', array('order' => 'Comment.id'))); 
```

然后在我的帖子视图中我有：

```
<?php
echo $this->Form->create('Post');
echo $this->Form->input('name', array('label' => 'Name', 'maxlength' => '100'));
echo $this->Form->input('Comment.Comment', array('label' => 'New Comment', 'type' => 'select', 'multiple' => true));
echo $this->Form->submit('Add', array('class' => 'button'));
?> 
```

在我的其他项目中，它总是有效！我总是在列表中显示我的“评论”，但是在这里，我不知道为什么它不起作用，什么都没有显示，是我忘记了什么吗？

问候，

4m0ni4c。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:39:40.847

我不知道你是否解决了它，但根据 Cake 的约定，HABTM 表应该[*按字母顺序*](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)命名，这样它们才能*神奇地*工作。

> 这个新连接表的名称需要包含所涉及的两个模型的名称，按字母顺序排列，并用下划线 (_) 分隔。表的内容应该是两个字段，每个外键（应该是整数）指向所涉及模型的两个主键

因此，您的 posts_comments 表应该是 comments_posts，除非您直接在 Post 和 Comment 模型上更改关联。

# c - mikroc 中是否存在 rand() 函数？

> ID：15219683
> 
> 赞同：1
> 
> 时间：2013-03-05T09:05:31.107
> 
> 标签：c, pic, mikroc

如何在 mikroC 中实现 rand() C++ 函数？

我尝试了 rand() 但不起作用......我不知道如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:09:16.303

如果你的 C 实现符合 C89，它应该包括一个工作`rand()`——也许你忘了包括`<stdlib.h>`？

`rand`如果没有，只要您不需要非常高质量的生成数字，那么编写自己的数字就很简单，对于俄罗斯方块的目的，您不应该这样做。这个微小的实现被 POSIX 推广为需要跨架构重复相同的伪随机数序列的程序的一个选项：

```
static unsigned long next = 1;

/* RAND_MAX assumed to be 32767 */
int myrand(void) {
    next = next * 1103515245 + 12345;
    return((unsigned)(next/65536) % 32768);
}

void mysrand(unsigned seed) {
    next = seed;
} 
```

它不会给你很大的伪随机性，但它也不会比许多现实生活中的实现更糟糕`rand()`。

# c# - 在c#中将arraylist转换为List

> ID：15219685
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:05:36.383
> 
> 标签：c#, .net

我有一个名为“ObjectArray”的数组列表，为了提高性能并摆脱强制转换问题，我想使用通用列表，如何将以下 arralist 转换为列表？我知道`ToList()`会做，但在这种情况下该怎么做

```
public class ObjectArray : ArrayList
  {}

 ObjectArray col = ObjectArray.Deserialize(xml, Type.type);

Testobject tmo;

tmo= (Testobject)col[i]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:24:48.287

您不应该继承自`List<T>`，`Collection<T>`而是。根据 MSDN 文档：

> System.Collections.Generic.List 是为性能而非继承而设计的通用集合，因此不包含任何虚拟成员。
> 
> Collection 类可以通过创建其构造类型之一的实例来立即使用；您所要做的就是指定要包含在集合中的对象的类型。此外，您可以从任何构造类型派生自己的集合类型，或从 Collection 类本身派生泛型集合类型。

继承自`Collection`如下。在您的类中，您可以覆盖（如果需要）基本集合行为和/或添加您自己的实现。

```
public class ObjectArray : Collection<T> 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms132397(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms132397%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:45:09.547

停一秒；你试图让一个班级做两件事。您还将编译时问题转移到运行时。我建议你反序列化强类型并将它们存储在强类型列表中，而不是把所有东西都放在一个列表中。

IE

```
 ViewModel[] viewModels= Serializer.DeserialiseViewModels(fromSomething);
 DataModel[] dataModels= Serializer.DeserialiseDataModels(fromSomething); 
```

在任何情况下，您都关心反序列化类型并将它们添加到列表中。所以不要为一个新的集合类而烦恼，因为你不需要在这里重新发明轮子。

所以让我们假设你已经反序列化了一个对象数组，即

```
object[] loaded = ObjectArraySerializer.Deserialise(fromSomething); 
```

现在您要获取 T1 和 T2 类型的所有项目

```
List<T1> itemsT1 = loaded.OfType<T1>().ToList()
List<T2> itemsT2 = loaded.OfType<T2>().ToList() 
```

现在假设

```
where T1: TBase, where T2: TBase 
```

你可以做

```
List<TBase> TBaseItems = itemsT1.Cast<TBase>().Concat(itemsT2.Cast<TBase>()).ToList(); 
```

或者你可以直接做到这一点；

```
List<TBase> tbaseItems= loaded.OfType<TBase>().ToList(); 
```

# objective-c - 在对象中存储关系数据，覆盖值

> ID：15219690
> 
> 赞同：0
> 
> 时间：2013-03-05T09:05:49.580
> 
> 标签：objective-c

我为这个冗长的问题道歉，我试着用例子来证明这个问题。

我有三个对象

> 1.  疾病
> 2.  化合物
> 3.  康迪斯

我将疾病和化合物列表存储在各个类别中。

化合物和疾病之间的关系将存储在名为 Comdis 的对象列表中，Comdis 存储成对的 (COMPOUND,DISEASE)。

要存储在对象中的示例信息是。

```
DISEASES
index  acronim  fullname
1        AML,      Acute Myelogenous Leukemia
2        PV,       Polycytemia Vera
3        MF,       Mielofibrosis

COMPOUNDS
index  acronim    fullname
1       LBH589,   Panobinostat
2       INC424,   Ruxolitinib
3       BKM120,   Buparsinib

RELATIONS (COMDIS)
index  disease  compound
1        ( 0   ,    1 )
2        ( 0   ,    2 )
3        ( 0   ,    3 )
4        ( 1   ,    1 )
5        ( 1   ,    2 )
6        ( 1   ,    3 )
7        ( 2   ,    1 )
8        ( 2   ,    2 )
9        ( 2   ,    3 ) 
```

> **我的 disease.h 看起来像这样。**

```
@interface disease: NSObject
{
    NSString __strong *acronim;
    NSString __strong *fullname;
    int backcolor;
    UIImage __strong *background;
}
@property (nonatomic) int backcolor;
@property (nonatomic, strong) UIImage *background;
@property (nonatomic, strong) NSString *acronim;
@property (nonatomic, strong) NSString *fullname;
@property NSMutableArray *list;
- (id)initWithDiseaseList;
- (int)getIndexByAcronim:(NSString *)acronim;
@end 
```

> **disease.m 有以下代码**

```
#import "disease.h"

@implementation disease

@synthesize acronim, fullname, backcolor, background;

-(id)initWithDiseaseList {
    disease *aml = [[disease alloc] init];
    [aml setAcronim:@"AML"];
    [aml setFullname:@"Acute Myelogenous Leukemia"];
    disease *pv = [[disease alloc] init];
    [pv setAcronim:@"PV"];
    [pv setFullname:@"Polycytemia Vera"];
    disease *mf = [[disease alloc] init];
    [mf setAcronim:@"MF"];
    [mf setFullname:@"Mielofibrosis"];
    NSMutableArray *array = [NSMutableArray array];
    [array addObject:aml];
    [array addObject:pv];
    [array addObject:mf];
    self.list = array;
    return self;
}
- (int)getIndexByAcronim:(NSString *)accr {
    NSArray *array = self.list;
    for(int i = 0; i < [array count]; i++) {
        disease *disease = [array objectAtIndex:i];
        if(disease.acronim == accr) {
            return i;
        }
    }
    return -1;
}
@end 
```

我的compound.m 与疾病对象非常相似。

现在在 comdis 我想存储关系。

> **我的 comdis.h 看起来像这样**

```
@interface comdis: NSObject
{
    int *icompound;
    int *idisease;
}
@property (nonatomic,) int *icompound;
@property (nonatomic,) int *idisease;
@property NSMutableArray *list;
- (id)initWithComdisList;
@end 
```

> **这是我的comdis.m**

```
#import "comdis.h"
#import "compound.h"
#import "disease.h"
@implementation comdis
@synthesize idisease, icompound;

- (id)initWithComdisList {
    compound *comp = [[compound alloc] initWithCompoundList];
    disease   *dis = [[disease alloc] initWithDiseaseList];
    NSArray *compoundArray = comp.list;
    NSArray *diseaseArray = dis.list;

    NSMutableArray *array = [NSMutableArray array];
    for(int i = 0; i < [diseaseArray count]; i++) {
        for(int j = 0; j < [compoundArray count]; j++) {
            int iCompoundIndex = [compoundArray indexOfObject:compoundArray[j]];
            int iDiseaseIndex  = [diseaseArray indexOfObject:diseaseArray[i]];
            comdis *com = [[comdis alloc] init];
            [com setIdisease:&iDiseaseIndex];
            [com setIcompound:&iCompoundIndex];
            [array addObject:com];
        }
    }
    comdis *comdisObj = [self.list objectAtIndex:1];
    int idis = *(comdisObj.idisease);
    int icom = *(comdisObj.icompound);

    NSLog(@"%d", idis);
    NSLog(@"%d", icom);    
    return self;
}
@end 
```

问题是如果我尝试打印的值，`idis`或者无论我给出的值如何，`icom`它总是打印。似乎循环中的值被覆盖了，它总是取循环的最后一个值，我是objective-c的初学者，如果有人能对我的代码有什么问题有所了解，我将不胜感激。`2``objectAtIndex`

再次抱歉冗长的解释和代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:14:13.503

`[com setIdisease:&iDiseaseIndex];`因为所有 comdis 对象的属性 disease 和 Compound 都指向同一个地址，所以它们都等于最后添加的对象的值。为了克服这个问题，您可以在 comdis 中使用*int*属性而不是***int 。**

# python - mongodb queryset save 不做更新，只插入

> ID：15219691
> 
> 赞同：1
> 
> 时间：2013-03-05T09:05:49.567
> 
> 标签：python, mongodb, flask, mongoengine

在我的烧瓶应用程序中：

```
class places(db.Document):
    meta = {
        'collection': 'places',
        'allow_inheritance': False,
    }
    name = db.StringField(max_length=200, required=True)
    loc= db.GeoPointField(required=True)

x = places(loc=[-87,101], name="test")
places.save(x) 
```

但是，我只想插入新文档，否则我想更新行。我不确定如何使用 upsert/update。

我遇到一个错误，告诉我在更新之前保存（我在我的烧瓶应用程序中使用 mongoengine）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:16:21.670

我认为你不能那样做。但是你可以试试下一个：

首先尝试从数据库中获取对象

```
place = places.objects(name="test").first()
if place:
    #update here
    place.loc = [88,102]
else:
    #create new here
    place = places(loc = [-87,101], name="test")
place.save() 
```

# sql - SQL 选择案例语句

> ID：15219701
> 
> 赞同：0
> 
> 时间：2013-03-05T09:06:20.127
> 
> 标签：sql, stored-procedures, sql-server-2008-r2, case

我正在使用 SQL Server 2008 R2 我有这样的存储过程：

```
CREATE PROCEDURE Get_Code_Tourne_Matin
    -- Add the parameters for the stored procedure here
@The_FA int,
@The_Jour int,
@The_Insee varchar(10)
AS
BEGIN
declare @TheCode varchar(250)

set @TheCode = case
    when exists (SELECT T_TOURNE_LABEL.LIBELLE 
                  FROM TOURNE
                  LEFT JOIN T_TOURNE_LABEL ON TOURNE.LIB_TOURNE = T_TOURNE_LABEL.NOID
                  WHERE THE_FA = @The_FA AND 
                        NO_INSEE = @The_Insee AND 
                        JOUR = @The_Jour AND 
                       (datepart(hh, LE_HEURE) between 13 and 23 or datepart(hh, LE_HEURE) between 0 and 6)) then LIBELLE
    when exists (SELECT LIBELLE
                  FROM TOURNE
                  LEFT JOIN T_TOURNE_LABEL ON TOURNE.LIB_TOURNE = T_TOURNE_LABEL.NOID
                  WHERE THE_FA = @The_FA AND 
                        NO_INSEE = @The_Insee AND 
                        JOUR = 0 AND 
                       (datepart(hh, LE_HEURE) between 13 and 23 or datepart(hh, LE_HEURE) between 0 and 6)) then LIBELLE
    else '00'

    end

RETURN @TheCode  
END 
```

我只想归还诽谤。
找到第一个带有 3 个变量的选择，然后重新运行 libelle
else 如果找到运行带有 2 个变量的选择，然后重新运行 libelle
else retrun '00'

LIBELLE 似乎有语法错误

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:14:41.987

我认为是这样的：

```
set @TheCode = COALESCE(
(SELECT TOP 1 T_TOURNE_LABEL.LIBELLE 
                  FROM TOURNE
                  LEFT JOIN T_TOURNE_LABEL ON TOURNE.LIB_TOURNE = T_TOURNE_LABEL.NOID
                  WHERE THE_FA = @The_FA AND 
                        NO_INSEE = @The_Insee AND 
                        (JOUR = @The_Jour OR JOUR = 0) AND 
                       (datepart(hh, LE_HEURE) between 13 and 23 or datepart(hh, LE_HEURE) between 0 and 6)
ORDER BY JOUR DESC), '00') 
```

应该涵盖你所有的情况。（如果您的查询中永远不可能有两个匹配的行，一个 has`JOUR = @The_Jour`另一个 has `JOUR = 0`，那么您可以删除`TOP 1`and`ORDER BY`子句（请注意，我假设任何可能的`@The_Jour`值都大于 0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:31:39.897

```
set @TheCode =(  SELECT   ISNULL(( SELECT TOP 1 T_TOURNE_LABEL.LIBELLE
               FROM   TOURNE
               LEFT JOIN T_TOURNE_LABEL ON TOURNE.LIB_TOURNE = T_TOURNE_LABEL.NOID
               WHERE  THE_FA = @The_FA AND NO_INSEE = @The_Insee AND JOUR = @The_Jour
                               AND ( DATEPART(hh, LE_HEURE) BETWEEN 13 AND 23
                               OR DATEPART(hh, LE_HEURE) BETWEEN 0 AND 6
                               )), '00') AS LIBELLE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:45:30.520

```
CREATE PROCEDURE Get_Code_Tourne_Matin
@The_FA int,
@The_Jour int,
@The_Insee varchar(10)
AS
BEGIN
declare @TheCode varchar(250)
    Set @TheCode = '';
    SELECT top 1 @TheCode = T_TOURNE_LABEL.LIBELLE 
            FROM TOURNE
            LEFT JOIN T_TOURNE_LABEL ON TOURNE.LIB_TOURNE = T_TOURNE_LABEL.NOID
            WHERE THE_FA = @The_FA AND 
                NO_INSEE = @The_Insee AND 
                (JOUR = @The_Jour or JOUR = 0 )AND 
                (datepart(hh, LE_HEURE) between 13 and 23 or datepart(hh, LE_HEURE) between 0 and 6)

    set @TheCode = case
        when len(@TheCode) > 0
        when exists (SELECT @TheCode)
        else '00'

        end
    RETURN @TheCode  
END 
```

# java - HQL 返回数据类型

> ID：15219705
> 
> 赞同：0
> 
> 时间：2013-03-05T09:06:27.783
> 
> 标签：java, sql, hibernate

我正在使用休眠从我的 psql 数据库中获取数据。我对构造函数有一些问题。hql 使用 COUNT(*) 和 MONTH(date) 函数返回什么数据类型？

提前致谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:13:32.830

Count(*) 将返回 Long。MONTH(date) 将返回整数。

# ruby-on-rails-3 - Rails 3，无法访问 Arel::SelectManager

> ID：15219706
> 
> 赞同：0
> 
> 时间：2013-03-05T09:06:38.687
> 
> 标签：ruby-on-rails-3, activerecord, scope, rails-activerecord, arel

我有`:except_ids`范围的用户模型：

```
scope :except_ids, ->(*ids) { where { id.not_in ids } } 
```

问题是 - 我不能将它与另一个惰性查询一起使用。例如，如果我这样称呼：

```
User.except_ids(User.except_ids(1,2)) 
```

我最终得到

```
TypeError: Cannot visit Arel::SelectManager 
```

我的项目中有更复杂的查询，但一切正常 - 除了那个范围。我可以通过用实际代码替换作用域来使其工作，但这有异味。

那么，有没有什么办法可以查出来呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:21:04.507

如果您想通过单个 SQL 查询来实现这一点，它必须包含一个[子查询](http://beginner-sql-tutorial.com/sql-subquery.htm)，Arel 不直接支持，但您可以使用[这种解决方法](https://stackoverflow.com/a/5355077/103160)，例如。

`User.except_ids(1,2)`您看到的错误可能是由于返回 的实例这一事实引起的`ActiveRecord::Relation`，这可能是 lambda 签名中的 splat 运算符的问题。这可行，但会导致 2 个查询：

```
User.except_ids(User.except_ids(1,2).map(&:id)) 
```

# android - 最小化应用程序，更改语言并恢复调用 onCreate() 而不是 onResume()

> ID：15219707
> 
> 赞同：2
> 
> 时间：2013-03-05T09:06:39.327
> 
> 标签：android, android-activity, activity-lifecycle

我刚刚注意到我在我的应用程序中遇到的一个奇怪问题。当我运行我的应用程序时，如果我最小化它，然后去设置并更改语言，然后恢复我的应用程序（注意：这是最小化/恢复，而不是退出/启动），它会调用 Activity`onCreate()`而不是调用`onResume()`.

这导致了很多问题，尤其是在我在视图中使用片段的区域。正在显示的片段是旧片段，但它们持有的活动引用是`null`. 所以`getActivity()`恢复后不能立即生效，导致`NullPointerException`很多地方。

我的应用程序是为 Android 4.0.4 及更高版本构建的，我在不同的设备和模拟器上注意到了这个问题，所以这不是平台问题。

理想情况下，我想`onResume()`按应有的方式打电话。如果没有，我宁愿让应用程序自行重新启动，并将用户置于主屏幕上，而不必面对应用程序崩溃。

该应用程序本身仅支持一种语言：英语（美国）。

有没有人遇到过这个问题？如果是，你能设法解决它吗？

编辑：根据 Class Stacker 的回答，看来我需要自己处理配置更改。这应该没问题，除了`onCreate()`本身引发异常。我正在打电话`getWindow().setRequestFeature(Window.FEATURE_INDETERMINATE_PROGRESS)`。`onCreate()`当定位发生变化时，这一行抛出了一个`RuntimeException`说法，即 this must be called before `setContentView()`。

这是否意味着我的 Activity 没有被正确销毁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:12:47.863

这不是问题，这是设计使然。

如果语言发生变化，那就是配置变化，就像屏幕旋转一样。

这意味着必须重新创建很多东西。因此，这是通过 onCreate() 处理的。

很抱歉这个坏消息，但您必须更正创建对象的位置以及 onCreate 和 onResume 如何互操作。

见[这里](http://developer.android.com/guide/topics/resources/runtime-changes.html)。

**编辑：**关于，为了安全起见，请先`RuntimeException`致电，正如您在我们的聊天中发现的那样。`getWindow().setRequestFeature(Window.FEATURE_INDETERMINATE_PROGRESS)``super.onCreate(savedInstanceState)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T13:29:33.020

将这些行放在您的清单文件中，看看它是否有效。

```
 <activity
        android:name="youractivity"
        android:configChanges="locale|layoutDirection"
        android:label="youractivitylabel" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-05T16:54:30.120

更改语言环境后，我在片段中遇到了同样的空指针异常问题。为了将来参考，我分享了一个对我的案例很有帮助的解决方案。在片段中`onCreateView()`只需添加以下行：

```
this.setRetainInstance(true); 
```

这可以防止调用`onDestroy()`和`onCreate()`。相反，`onDetach()`并且`onAttach(Activity)`会被调用。它帮助了我，希望它可以帮助到这个页面的其他人。请参阅[参考资料](https://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean))。

# mysql - Windows MYSQL 5.5.10 上亚洲 CJK 字符的正确编码？

> ID：15219714
> 
> 赞同：0
> 
> 时间：2013-03-05T09:07:08.897
> 
> 标签：mysql, character-encoding, cjk

将 CJK 字符保存到我的 MYSQL DB 时出现问题，问号显示在 DB 中。我已经通过写入文本文件测试了客户端输入，这似乎很好，所以我预计问题出在服务器上，可能是 Windows 问题。有人能帮忙吗？

我的字符集变量是：

```
+--------------------------+----------------------------------------+
| Variable_name            | Value                                  |
+--------------------------+----------------------------------------+
| character_set_client     | utf8                                   |
| character_set_connection | utf8                                   |
| character_set_database   | latin1                                 |
| character_set_filesystem | binary                                 |
| character_set_results    | utf8                                   |
| character_set_server     | latin1                                 |
| character_set_system     | utf8                                   |
+--------------------------+----------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:33:13.477

尽管我对我的数据库表进行了更改，将 Collat​​ion 从 Latin1 更改为 UTF8，但这并没有改变现有的编码。我不得不编辑表格数据并将所有必需的列从 Latin1 更改为 UTF8。现在另存为 CJK 可以正常工作。

# unit-testing - 测试自定义验证 angularjs 指令

> ID：15219717
> 
> 赞同：76
> 
> 时间：2013-03-05T09:07:14.217
> 
> 标签：unit-testing, angularjs, angularjs-directive

这个自定义验证指令是官方 Angular 站点上的一个示例。 [http://docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms) 它检查文本输入是否为数字格式。

```
var INTEGER_REGEXP = /^\-?\d*$/;
app.directive('integer', function() {
  return {
    require: 'ngModel',
    link: function(scope, elm, attrs, ctrl) {
      ctrl.$parsers.unshift(function(viewValue) {
        if (INTEGER_REGEXP.test(viewValue)) {
          // it is valid
          ctrl.$setValidity('integer', true);
          return viewValue;
        } else {
          // it is invalid, return undefined (no model update)
          ctrl.$setValidity('integer', false);
          return undefined;
        }
      });
    }
  };
}); 
```

为了对这段代码进行单元测试，我写了这个：

```
describe('directives', function() {
  beforeEach(module('exampleDirective'));

  describe('integer', function() {
    it('should validate an integer', function() {
      inject(function($compile, $rootScope) {
        var element = angular.element(
          '<form name="form">' +
            '<input ng-model="someNum" name="someNum" integer>' +
          '</form>'
          );
        $compile(element)($rootScope);
        $rootScope.$digest();
        element.find('input').val(5);
        expect($rootScope.someNum).toEqual(5);
      });
    });
  });
}); 
```

然后我得到这个错误：

```
Expected undefined to equal 5.
Error: Expected undefined to equal 5. 
```

我将打印语句放在各处以查看发生了什么，看起来该指令从未被调用过。测试这样一个简单指令的正确方法是什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2014-03-31T21:26:35.527

另一个答案的测试应该写成：

```
describe('directives', function() {
  var $scope, form;
  beforeEach(module('exampleDirective'));
  beforeEach(inject(function($compile, $rootScope) {
    $scope = $rootScope;
    var element = angular.element(
      '<form name="form">' +
      '<input ng-model="model.somenum" name="somenum" integer />' +
      '</form>'
    );
    $scope.model = { somenum: null }
    $compile(element)($scope);
    form = $scope.form;
  }));

  describe('integer', function() {
    it('should pass with integer', function() {
      form.somenum.$setViewValue('3');
      $scope.$digest();
      expect($scope.model.somenum).toEqual('3');
      expect(form.somenum.$valid).toBe(true);
    });
    it('should not pass with string', function() {
      form.somenum.$setViewValue('a');
      $scope.$digest();
      expect($scope.model.somenum).toBeUndefined();
      expect(form.somenum.$valid).toBe(false);
    });
  });
}); 
```

注意`$scope.$digest()`now 是在 之后调用的`$setViewValue`。这会将表单设置为“脏”状态，否则它将保持“原始”状态，这可能不是您想要的。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-07-06T07:52:31.873

我通过阅读 angular-app 代码找到了它[https://github.com/angular-app/angular-app](https://github.com/angular-app/angular-app) 这个视频也有帮助[http://youtu.be/ZhfUv0spHCY?t=31m17s](http://youtu.be/ZhfUv0spHCY?t=31m17s)

我犯了两个错误：

*   执行 ng-model 时不要直接绑定到作用域
*   使用表单控制器直接操作为指令传递的内容

这是更新的版本。指令是一样的，只是我改变的测试。

```
describe('directives', function() {
  var $scope, form;
  beforeEach(module('exampleDirective'));
  beforeEach(inject(function($compile, $rootScope) {
    $scope = $rootScope;
    var element = angular.element(
      '<form name="form">' +
        '<input ng-model="model.somenum" name="somenum" integer />' +
      '</form>'
    );
    $scope.model = { somenum: null }
    $compile(element)($scope);
    $scope.$digest();
    form = $scope.form;
  }));

  describe('integer', function() {
    it('should pass with integer', function() {
      form.somenum.$setViewValue('3');
      expect($scope.model.somenum).toEqual('3');
      expect(form.somenum.$valid).toBe(true);
    });
    it('should not pass with string', function() {
      form.somenum.$setViewValue('a');
      expect($scope.model.somenum).toBeUndefined();
      expect(form.somenum.$valid).toBe(false);
    });
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-12T21:21:23.480

我测试我的自定义指令，在对象“$error”中搜索自定义验证的名称。例子：

```
 'use strict';

describe('Directive: validadorCorreo', function () {

  // load the directive's module
  beforeEach(module('sistemaRegistroProCivilApp'));

  var inputCorreo, formulario, elementoFormulario, scope, $compile;

  beforeEach(inject(function ($rootScope, _$compile_) {
    scope = $rootScope.$new();
    $compile = _$compile_;

    elementoFormulario = angular.element('<form name="formulario">' + 
      '<input type="text" name="correo" data-ng-model="correo" required data-validador-correo/>' + 
      '</form');
    scope.correo = '';
    elementoFormulario = $compile(elementoFormulario)(scope);
    scope.$digest();
    inputCorreo = elementoFormulario.find('input');
    formulario = scope.formulario;
    console.log(formulario.correo.$error);
  }));

  it('Deberia Validar si un correo ingresado en el input es correcto e incorrecto', inject(function ($compile) {

    inputCorreo.val('eric+@eric.com').triggerHandler('input');
    expect(formulario.correo.$error.email).toBe(true); //Here, the name of the custom validation appears in the $error object.
    console.log(formulario.correo.$error);

    inputCorreo.val('eric@eric.com').triggerHandler('input');
    expect(formulario.correo.$error.email).toBeUndefined();//Here, the name of the custom validation disappears in the $error object. Is Undefined
    console.log(formulario.correo.$error.email)
  }));
}); 
```

我希望我能帮助你！

# jquery - jQuery.ajax 函数不从它返回参数

> ID：15219719
> 
> 赞同：0
> 
> 时间：2013-03-05T09:07:22.200
> 
> 标签：jquery

如果用户存在，我需要我的函数返回 FALSE，如果数据库中不存在用户，我需要返回 TRUE。这是我的功能代码。Firebug 向我展示了变量标志始终未定义。我该如何解决？

```
function checkLogin(login, n) { 
        var flag;

        jQuery.ajax({
            type: "POST",
            url: "${pageContext.request.contextPath}/checkLogin.ajax",
            data: "login="+login.val(), 

            success: function(response){
                if (response.status == "EMPTY") {
                    alert('Login is free - you can take it');
                    flag = true;
                } 

                if (response.status == "EXISTS") {              
                    alert('Login already exists in Database');
                    login.addClass( "ui-state-error" );
                    updateTips( n );
                    flag = false;
                }

            }
        });

        return flag;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:08:38.077

AJAX 是异步的。您的 return 语句将在更改标志的回调代码完成之前发生。您需要更改逻辑，以便该函数不返回标志，而是将其传递给您定义的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:08:57.600

几个问题：

*   `ajax`将异步工作，因此在返回等待它设置的值之前，您无法确定它是否会完成（并因此设置标志）；
*   而且，您没有为`error`参数指定处理程序，因此如果出现问题，您将不会知道它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:09:57.523

你不能返回标志。它会直接执行而不考虑你的ajax调用，因此在你的ajax调用正在进行之前，它会在ajax操作完成之前返回标志。不起作用

您可以使用 $.deferred 来代替

**[看它](http://api.jquery.com/category/deferred-object/)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T09:11:03.707

Try posting data as `data: "login:"+login.val(),`

use : instead of =

and also try posting data with '" + + "'

# c++ - Q_ENUMS 和 BOOST_SCOPED_ENUM

> ID：15219722
> 
> 赞同：1
> 
> 时间：2013-03-05T09:07:32.500
> 
> 标签：c++, qt, boost

我正在开发一个具有以下枚举定义的项目`BOOST_SCOPED_ENUM`：

```
BOOST_SCOPED_ENUM_START(myEnum)
{
    A = 0,
    B
};
BOOST_SCOPED_ENUM_END; 
```

现在我想在 QT 中注册这个枚举`Q_ENUMS`并用它定义`Q_PROPERTY`，比如：

`Q_ENUMS(myEnum)`

`Q_PROPERTY(myEnum myEnumVar READ getMyEnumVar WRITE setMyEnumVar)`

这不起作用，我尝试添加`BOOST_SCOPED_ENUM()`宏`Q_ENUMS`和`Q_PROPERTY`定义，但它也没有帮助。

`BOOST_SCOPED_ENUM`注册枚举的正确方法是什么`Q_ENUMS`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:33:02.880

宏`BOOST_SCOPED_ENUM_*`只是声明结构：

```
# define BOOST_SCOPED_ENUM_START(name) struct name { enum enum_t
# define BOOST_SCOPED_ENUM_END };
# define BOOST_SCOPED_ENUM(name) name::enum_t 
```

所以你的枚举实际上是`name::enum_t`. Qt-documentation还说以下关于`Q_ENUMS`：

> 如果要注册在另一个类中声明的枚举，则该枚举必须完全限定为定义它的类的名称。此外，**定义枚举的类必须继承 QObject**并使用 Q_ENUMS() 声明枚举。

我认为不可能使用`BOOST_SCOPED_ENUM_*`with `Q_ENUMS`，因为它会生成不继承的 struct `QObject`。

# php - html div css 样式标签内的 php

> ID：15219724
> 
> 赞同：-2
> 
> 时间：2013-03-05T09:07:39.683
> 
> 标签：php, html, css, wordpress

我正在尝试将动态 php 值插入到 html 样式标记中，我不确定我是否以正确的方式进行操作？

```
<div class="status" style='background: <?php get_option("myoption_background_color") ?>'> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:11:05.553

您忘记了分号和回显，请[检查](http://codex.wordpress.org/Function_Reference/get_option)：

```
<div class="status" style="background: <?php echo get_option("myoption_background_color"); ?>"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:11:27.530

您很可能还需要`echo`：

```
<div class="status" style="background: <?php echo get_option("myoption_background_color"); ?>"> 
```

如果调用了一个函数，`getSomething`那么它可能会返回该值，但不会将其写入输出。

# ios - 加载前选择 TabBarItem 时将子视图添加到 UITabBar 中的当前可见 UIViewController

> ID：15219727
> 
> 赞同：0
> 
> 时间：2013-03-05T09:07:44.073
> 
> 标签：ios

当用户选择另一个 tabbaritem 时，我想向 tabbarcontroller 中的当前可见视图控制器添加一个带有加载消息的子视图。

在我的 UITabBarController 子类中，当我使用

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item 
```

或者

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController 
```

我可以添加视图，但是`- (void)viewDidLoad`新选择的视图控制器的 -Method 以某种方式阻止了添加的视图。

如何在新选择的视图控制器开始加载***之前***将子视图添加到当前可见的视图控制器（或 tabbarcontroller 的视图）？

# spring - 在 mule stdiuo 中将资源注入 JAX-WS 服务

> ID：15219731
> 
> 赞同：0
> 
> 时间：2013-03-05T09:07:49.843
> 
> 标签：spring, web-services, mule, javabeans

我正在从页面的 mule stdiuo 中将资源注入 JAX-WS 服务：[这里](http://www.mulesoft.org/documentation/display/current/Building+Web+Services+with+CXF#BuildingWebServiceswithCXF-CreatingaJAX-WSService)

但我在 xml 文件中出现错误：

```
<spring:bean class="org.apache.cxf.bus.spring.Jsr250BeanPostProcessor" /> 
```

我的错误是：bean 中未定义必需的属性 id

**如何解决我的错误？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:13:13.030

在元素上添加一个`id`属性。`spring:bean`

# d3.js - D3.js 与 Raphael.js

> ID：15219732
> 
> 赞同：54
> 
> 时间：2013-03-05T09:07:55.533
> 
> 标签：d3.js, raphael

我对d3和Raphael都很着迷。我知道 Raphael 是~~建立在 D3 之上的，并且它是~~跨浏览器兼容的，但我不确定哪一个更适合什么场景。有人可以阐明一下吗？我的直接用例可能是使用 SIMILE 时间线并将其与状态图集成（我打算使用 d3/Raphael）。谢谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-05T09:30:44.500

Raphael 不是基于 D3 构建的。

Raphael 将帮助您绘制元素。D3 更全面，将帮助您将数据绑定到元素。所以我会说D3更强大。[这个论坛讨论](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/NKJDyYXxsE8)讨论使用 D3 呈现 SIMILE 时间线，他们指的是在 D3 中实现时间线的[这个项目。](http://bl.ocks.org/bunkat/1962173)所以乍一看，D3 就是你的答案。

但是，鉴于 D3 似乎没有一个小部件可以为您处理 SIMILE 时间线，因此 Raphael 或 D3 可能是一个不错的选择。也就是说，除了 D3 不能很好地与 Internet Explorer 的早期版本配合使用之外，如[本文所述。](http://jeffpflueger.com/content/d3-data-driven-documents-and-internet-explorer)因此，如果您需要支持早期版本的 IE，最好使用 Raphael。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-05T11:20:48.560

D3 比 Raphael 更难学习，但在这两种情况下，您还必须学习 SVG 才能创建更好的动画。另一方面，通常 D3 可视化比类似的 Processing 或 Raphael 示例需要更少的数学，因为已经有许多预打包的布局。

我想说 D3 是更好的选择，原因很明显：D3 基于当前的 Web 标准堆栈（HTML、DOM——即使你讨厌它，你也需要使用它、CSS、SVG，甚至是 Canvas），并且是一个库用于处理数据。作为一个数据框架，D3 还包含：

*   大量的算法和布局（强制布局、堆栈布局、树等），
*   一些基本的数据整理功能（嵌套、交叉、分组、汇总 - 请参阅以下示例：[http](http://bl.ocks.org/phoebebright/raw/3176159/) ://bl.ocks.org/phoebebright/raw/3176159/ ），
*   jQuery 样式选择，
*   以及可视化原语（d3.svg 附带简单图形所需的一切）。

就目前而言，d3 不仅在许多情况下比 Raphael 和 Processing 更好，而且还是 jQuery、underscore.js 和其他框架的可行替代品。有很多建立在它之上的图表库，所以你总是可以拖放一些很酷的图表并重写它周围的数据包装器。

您可以使用此界面找到一些不错的时间线示例：http: [//biovisualize.github.com/d3visualization/#visualizationType=timeline](http://biovisualize.github.com/d3visualization/#visualizationType=timeline)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-11-07T07:41:20.430

两者都是不同的动物。

**RaphaelJS**简化和扩展了基于 SVG 和 VML 的矢量图形功能。

**D3js**只是操纵 DOM 并依靠图形标准（SVG 和 Canvas，在条形图上你也可以使用 DIV）来绘制。例如`d3.svg.symbol()`返回`d`参数的内容以将其传递给`path`SVG 上的元素，但不要自行绘制符号。

您可以使用**D3js**来操作数据并使用**Raphael**进行绘制。

[这个博客](http://dataist.wordpress.com/2012/03/11/combining-d3-and-raphael-to-make-a-network-graph/)解释了如何结合**D3js** + **Raphael**。并检查[D3 的 Raphael](http://webmonarch.github.io/d34raphael/)实现。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-24T14:52:35.947

作为一名公共部门顾问，我发现学习 Raphael 对我来说是一项更好的投资，因为我的客户很多时候都使用旧版本的浏览器。我目前的客户只使用 IE7，Raphael 可以完美地使用它，而 D3 则不能。

就我个人而言，我宁愿使用 D3，但从专业上讲，这不是我的实际情况。

# sql - 插入带有选择子句的脚本不起作用

> ID：15219740
> 
> 赞同：0
> 
> 时间：2013-03-05T09:08:13.070
> 
> 标签：sql

我有插入脚本

```
Insert into tblsc_zone (ID,NAME,DESCRIPTION,sup,country)(
select SEQ.NEXTVAL,'vrt',NULL, ag,cid from (
select distinct STG_VIEW.aggg AS AG ,STG_VIEW.coun AS CID 
FROM dummy STG_VIEW)
); 
```

它无法显示无效的列数。

但是我已经正确定义了所有列名并且也以正确的顺序

```
select SEQ.NEXTVAL,'vrt',NULL, ag,cid from (
select distinct STG_VIEW.aggg AS AG ,STG_VIEW.coun AS CID 
FROM dummy STG_VIEW) 
```

如果我在没有这个内部查询的情况下执行

```
select distinct STG_VIEW.aggg AS AG ,STG_VIEW.coun AS CID 
FROM dummy STG_VIEW 
```

它工作正常。

但它正在插入重复的记录。

所以它获取 agg 和 country 我正在使用这个子查询的唯一组合。

请指导我如何使它工作

我想在此表中插入 agg 和 country 的唯一组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:29:01.253

在插入语句中选择之前删除大括号并尝试

```
Insert into tblsc_zone (ID,NAME,DESCRIPTION,sup,country)
select SEQ.NEXTVAL,'vrt',NULL, ag,cid from (
select distinct STG_VIEW.aggg AS AG ,STG_VIEW.coun AS CID 
FROM dummy STG_VIEW) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:31:52.517

这更简单：

```
Insert into tblsc_zone (ID,NAME,sup,country)
select DISTINCT SEQ.NEXTVAL,'vrt', aggg ,coun 
FROM dummy STG_VIEW 
```

SQL可能存在`DISTINCT`问题`NULL``NULL != NULL`

# java - 如何使用迭代器模式遍历Composition Pattern中设计的对象结构

> ID：15219743
> 
> 赞同：0
> 
> 时间：2013-03-05T09:08:25.243
> 
> 标签：java, algorithm, design-patterns

我正在阅读“ **Head First Design Pattern** ”，现在我陷入了Composition Pattern 中的一些代码，第369 页。该结构是在组合模式中设计的，并通过迭代器模式进行遍历。

CompositeIterator的核心算法代码是：

```
public boolean hasNext() {
    // TODO Auto-generated method stub
    if (itemStack.size() == 0) {
        return false;
    } else {
        Iterator<MenuComponent> iter = itemStack.peek();
        if (!iter.hasNext()) {
            itemStack.pop();
            return hasNext();
        } else {
            return true;
        }
    }
}
public MenuComponent next() {
    // TODO Auto-generated method stub
    if (hasNext()) {
        Iterator<MenuComponent> iter = this.itemStack.peek();
        MenuComponent mc = iter.next();
        if (mc instanceof Menu) {
            itemStack.push(mc.createIterator());
        }
        return mc;
    } else {
        return null;
    }
} 
```

这是打印功能：

```
public void printAll(){
    Iterator<MenuComponent> iter=menus.createIterator();
    while(iter.hasNext()){
        MenuComponent mc=iter.next();
        System.out.println(mc.getName()+" "+mc.getDescription());
    }
} 
```

这是带有代码的主要功能：

```
 Menu m1 = new Menu("aaa", "a");
    Menu m2 = new Menu("bbb", "b");
    Menu m3 = new Menu("ccc", "c");

    Menu all=new Menu("all", "all");
    all.add(m1);
    m1.add(m2);
    m2.add(m3);
    Waitress w=new Waitress(all);
    w.printAll(); 
```

当我尝试打印所有这些时，结果将是这样的：

`a aaa`

`b bbb`

`c ccc`

`c ccc`

似乎迭代器只是忽略了 allmenu 项并打印了两次 m3 ......为什么会这样？我的代码有什么问题......我只是在递归算法上弄错了吗？谢谢

# ios - 如何获取在 UIWebView 中加载的网页的高度？

> ID：15219744
> 
> 赞同：0
> 
> 时间：2013-03-05T09:08:25.800
> 
> 标签：ios, uiwebview, height

我使用了以下方法，但现在仍然没有得到正确的值：

```
[webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"] floatValue]

[webView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"]

webView.scrollView.contentSize.height 
```

我已经访问了以上所有内容，

```
- (void)webViewDidFinishLoad:(UIWebView *)aWebView 
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:20:43.757

你可以通过两种方式得到这个

方法1：像这样加载你的html

```
embedHTML = [embedHTML stringByAppendingFormat:
               @"<body><div id='size_div'>%@</div></body></html>",yourString]; 
```

现在在 webViewDidFinishLoad 方法中保留此语句...

```
NSString *output = [webView stringByEvaluatingJavaScriptFromString:
                      @"document.getElementById(\"size_div\").offsetHeight;"];  
NSLog(@"height: %@", output); 
```

方法二：

```
UIWebView *objWebView = [[UIWebView alloc] init];
for (UIScrollView *v in objWebView.subviews) {
    if ([v isKindOfClass:[UIScrollView class]])
    {
        CGSize requiredSize = v.contentSize;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:16:53.460

我认为`webView.scrollView.contentSize`是在加载 HTML 时由 webView 本身自动设置的。你有没有像这样尝试过：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
     float h = [[webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"] floatValue];

    // h is the height of the loaded webpage... 
```

}

并且不要忘记设置 webView 的委托`YourViewController: UIViewController <UIWebViewDelegate>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:37:15.930

您可以使用获取 webview 高度

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    float height = [[webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"] floatValue];
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-26T11:08:55.580

用这个

```
let height = webView.scrollView.contetSize.height 
```

# c# - 尝试使用 C# 从具有 2 列（父、类别）的数据表创建层次结构，该数据表可以是 N 个节点深。

> ID：15219745
> 
> 赞同：1
> 
> 时间：2013-03-05T09:08:28.577
> 
> 标签：c#, tree, nested-loops

我正在尝试使用 C# 从具有 2 列（父级、类别）的数据表创建一个层次结构，该数据表可以是 N 个节点深。

例如

```
Category Table
=========================
Parent     | Category
=========================
(blank)         root
root            whats-new
whats-new       hair
whats-new       skincare
skincare        face-product 
```

从这里我试图创建以下内容：

```
root
root.whats-new
root.whats-new.hair
root.whats-new.skincare
root.whats-new.skincare.face-product 
```

我查看了很多示例，但大多数都显示了 SQL 中的示例，但是我不确定应该如何处理它。

我已经能够遍历列表并建立最多 3 个深度，但是，类别可以是 N 个节点深度。任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:14:28.953

我最近做了一些类似的事情，不确定它是否会对您有所帮助，但您可以在此处查看代码： [https ://github.com/Imdsm/PersonalWebsite/blob/master/PersonalWebsite/Views/Blog/PostArchive.cshtml](https://github.com/Imdsm/PersonalWebsite/blob/master/PersonalWebsite/Views/Blog/PostArchive.cshtml)

这是一个博客存档，所以年月发布。

可能最简单的方法是逐个父节点逐个遍历您的列表，例如在*没有父*节点的情况下按类别选择它们（好的，这就是节点一），然后获取所有具有该当前节点作为父节点的类别，好的，现在你有了第二级，然后通过它并选择所有将每个第二个节点作为其父级的节点，第三级。

代码方面，我真的无能为力，因为我不知道你是如何实现它的。

例子：

```
get all cats without parent
get all cats where previous cat is their parent
loop through each of these cats, get all cats where cat(n) is the parent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:18:18.770

我最终以 XML 格式解析数据，而不是将其加载到数据表中。它有助于消除大量开销，同时仍然能够生成所需的层次结构，但代码要少得多。再次感谢你的帮助。

```
using System.Xml;

// --------------

var doc = new XmlDocument();

doc.Load(@"C:\source.xml");

XmlNodeList nodeList;
XmlNode root = doc.DocumentElement;

nodeList=root.SelectNodes("category");

Dictionary<string, string> fullName = new Dictionary<string, string>();
foreach(XmlNode node in nodeList)
{
  string nodeid = node.Attributes["category-id"].Value;
  string parent = node.Attributes["parent"].Value;
  string parentFullname = fullName[parent];
  string nodeFullname = (parentFullname != null) ? parentFullname + "." + nodeid : nodeid;
  fullName[nodeid] = nodeFullname;
} 
```

# php - 从数据库中排序和提取分数

> ID：15219752
> 
> 赞同：3
> 
> 时间：2013-03-05T09:08:46.503
> 
> 标签：php, mysql, database, data-structures

我正在开发一种游戏网站，其中每个成员的得分每天都会被保存。现在我有一个数据库，其中有一个用户信息表和一个用户分数表。user_score**表**包含：

> 身份证 | 用户ID | 积分 | 天

每天，用户都会在主页的个人部分更新他们的图表。该图表显示了用户每天的得分，yAxes 显示图表顶部的最高得分。我需要强调的是，该图表仅显示用户自己的分数，就像该特定用户的表单曲线一样。

我的问题是我想在图表中显示用户在排名系统中的位置，而不是他们的分数......

所以我的问题是：为了给用户他的位置而不是分数，我应该做些什么改变？我试图在数据库中添加另一个表来解决这个问题，但它看起来像一个泡菜。

我应该添加另一个表，我应该在我的查询中做一些特别的事情吗？我正在使用 Google Chart API，并尝试关注另一个[线程来建立 PHP 连接](https://stackoverflow.com/questions/14979987/google-chart-api-data)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:15:18.360

简单地用这个..

```
 $sql=mysql_query("select * from `user_score` order by Points desc");
 // Store the user Id in $userid variable of the user whose position you want to show
 $position=0;
 while($row=mysql_fetch_array($sql))
 {
    $position+=1;
    if($row['User_ID']==$userid)
       break;
 }

 echo $position; // here you got the position of that user. 
```

# php - 从表中选择，其中子句是间隔

> ID：15219753
> 
> 赞同：0
> 
> 时间：2013-03-05T09:08:53.170
> 
> 标签：php, mysql, codeigniter

在这：

```
 $this->db->select('count(o.id)');
    $this->db->from('orders o');           
            $this->db->join('order_status_history', 'o.id =  order_status_history.order_id');
            $this->db->where("(order_status_history.in_dts)::date ='" .$reportDay. "'");
            $this->db->where('order_status_history.new_status ' , 6); 
```

我想要选择计数（id），其中 order_status_history.new_status 是一个间隔，例如（2<=order_status_history.new_status<=6），没有一个整数。如何在这个sql中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:15:41.840

我记得您可以将 Where 语句添加为字符串，就像在本机 sql 查询中一样。请试试这个：

```
 $this->db->select('count(o.id)');
    $this->db->from('orders o');           
        $this->db->join('order_status_history', 'o.id =  order_status_history.order_id');
        $this->db->where("(order_status_history.in_dts)::date ='" .$reportDay. "'");
        $this->db->where('order_status_history.new_status BETWEEN 2 AND 6'); 
```

这管用吗 ？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:16:06.200

你怎么看待这件事：

```
$this->db->select('count(o.id)');
$this->db->from('orders as o');           
$this->db->join('order_status_history', 'o.id =  order_status_history.order_id');
$this->db->where("(order_status_history.in_dts)::date ='" .$reportDay. "'");
$this->db->where_between('order_status_history.new_status ',2 , 6); 
```

# android - JNI 加载：警告：不要硬编码使用 Context.getFilesDir().getPath() 代替

> ID：15219755
> 
> 赞同：6
> 
> 时间：2013-03-05T09:08:59.233
> 
> 标签：android, java-native-interface, warnings

我在我的一个应用程序中遇到问题，我有以下代码来加载应用程序需要的库（JNI）：

```
static {
    // load the JNI library
    Log.i("JNI", "loading JNI library...");
    System.load("/data/data/com.mypackage.appname/lib/libxxxxxx.so");
    Log.i("JNI", "JNI library loaded!");
} 
```

所以我得到了警告：`"Do note hardcode use Context.getFilesDir().getPath() instead"`这是完全正确的（它不会在每个设备上都是便携的）。问题是，因为我使用的是静态的，所以我不能调用`Context.getFilesDir().getPath()`.

您对我如何继续这样做有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T09:19:12.480

您的警告绝对清楚，请尝试以下方式：

制作以下课程：

```
public class MyApplication extends Application {
    private static Context c;

    @Override
    public void onCreate(){
        super.onCreate();

        this.c = getApplicationContext();
    }

    public static Context getAppContext() {
        return this.c;
    }
} 
```

在您的 android 清单中声明上述类：

```
<application android:name="com.xyz.MyApplication"></application> 
```

进而

```
static {
    // load the JNI library
    Log.i("JNI", "loading JNI library...");

    System.load(MyApplication.getAppContext().getFilesDir().getParentFile().getPath() + "/lib/libxxxxxx.so");

    Log.i("JNI", "JNI library loaded!");
} 
```

***PS 未测试***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:19:40.687

您可以从派生自 Application 的类中获取 Context。看看[例子](https://stackoverflow.com/questions/987072/using-application-context-everywhere)所以你可以在任何地方使用你的应用程序上下文:)

# jquery - 带有缓动插件的 JQuery animate()

> ID：15219756
> 
> 赞同：2
> 
> 时间：2013-03-05T09:08:59.393
> 
> 标签：jquery, jquery-animate, jquery-easing

**已解决**感谢大家的帮助，插件的错误路径是如此不必要的错误...

嗨，我在 Jquery 中使用带有 animate() 函数的 JQuery 缓动插件时遇到问题。我在网上搜索，我还没有找到解决方案。

我的代码正在使用动画功能中的默认缓动类型（例如切换），但是当我更改缓动类型时，脚本会停止他的工作。

我的代码是这样的：

```
<script src="funkce/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="funkce/lightbox/jquery.animation.easing.js" type="text/javascript" charset="utf-8"></script> 
```

> ```
> before this script I test 
> <script src="funkce/lightbox/jquery.easing.1.2.js" type="text/javascript" charset="utf-8"></script>
> and after that <script src="funkce/lightbox/jquery.easing.1.2.js" type="text/javascript" charset="utf-8"></script> 
> ```

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $( "#slider" ).hover(function(){
if ($("#test1").css('display') == 'block'){
      $("#block").animate({ 
        "opacity": "0.6",
        "top": "200px"
      }, {queue:false, duration: 4000, easing:"easeOutElastic"} );
    }
    else{
        $( "#block" ).css({ top: ""});
      }
    });

  });
  </script> 
```

（当我删除“ easing:"easeOutElastic" ”时，代码会使用默认的缓动类型。

另一种尝试是：

```
if ($("#test1").css('display') == 'block'){
      $("#block").animate({ 
        opacity: 0.6,
        top: "200px"
      }, 4000, "easeOutElastic" );
    }
    else{
        $( "#block" ).css({ top: ""});
      }
    }); 
```

当我删除“easeOutElastic”时，vode 就可以工作了。

在我所有类型的代码中仍然存在同样的问题，默认缓动工作和替代缓动支持我缓动插件然后代码不起作用。这个例子我尝试添加到 nivoslider 以获得一些特定的效果，但我现在只在开始工作之前测试缓动。谁能帮我？

# sql-server-2008-r2 - 如何使用运行提示打开 SQL Server 2012

> ID：15219758
> 
> 赞同：0
> 
> 时间：2013-03-05T09:09:13.303
> 
> 标签：sql-server-2008-r2, sql-server-2012

我正在使用 SQL Server 2008 R2 和 SQL Server 2012。

我应该如何指定在运行 SSMS 时是否必须使用运行提示打开 SSMS 2008 R2 或 SSMS 2012？假设现在我必须使用 RUN Prompt 打开 SSMS 2012。

有人可以帮助我如何打开它吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T14:08:39.477

所以......在我的机器上同时有 2008 R2 和 2012 在同一台机器上，2008 R2 管理工作室 exe 在这里：

“C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe”

2012 management studio exe在这里：

“C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\Ssms.exe”

开始 -> 运行，这些路径中的任何一个都会打开正确的管理工作室版本。

# android - 如何以编程方式设置 android:password="true" 或 false

> ID：15219762
> 
> 赞同：1
> 
> 时间：2013-03-05T09:09:20.623
> 
> 标签：android, blackberry-10

我正在将我的 android 应用程序移植到 BB 10，存在键盘过滤问题，

[将 Android 应用程序移植到 BB10 时不显示数字键盘](https://stackoverflow.com/questions/14725876/keyboard-related-issue-porting-android-to-bb-10-application#comment21424261_14725876)

所以作为一种解决方法，我试图`password=true`在 xml 文件中使用，在`edittext`字段中输入值后，我应该从那时`password = false`起以编程方式设置

,有没有办法做到这一点？

正如你们建议的那样，我也尝试了下面的代码，但没有任何变化

```
 myNumber = (EditText) findViewById(R.id.myNumber);
myNumber .setTransformationMethod(PasswordTransformationMethod.getInstance());//this one also
myNumber .setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD);//this two 
```

但是它没有太大的变化，这2行代码也没有过滤

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:15:53.830

根据[此](https://stackoverflow.com/questions/2586301/set-inputtype-for-an-edittext)链接：

```
youredittext.setTransformationMethod(PasswordTransformationMethod.getInstance()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:13:13.883

你在尝试这样的事情吗

```
editText.setInputType(InputType.TYPE_CLASS_TEXT); 
```

# ios - 带有嵌入 UITextFields 的 UITableView，使用节页脚进行验证，更新页脚问题？

> ID：15219765
> 
> 赞同：0
> 
> 时间：2013-03-05T09:09:24.870
> 
> 标签：ios, objective-c, uitableview

我在每行`UITableView`使用两个`UITextFields`，设置密码和确认密码。

我想使用部分页脚来显示密码是否匹配或是否太短等。

我正在使用..

```
[[self passcodeTableView]reloadSections:[NSIndexSet indexSetWithIndex:0] 
                withRowAnimation:UITableViewRowAnimationFade]; 
```

要刷新页脚文本，以及我在其他地方设置的 NSString。

但是，当我调用它时，`reloadSections`它会强制`UITextFields`重新**添加**.`cellForRowAtIndexPath`

我认为`if (cell == nil)`会阻止细胞被重绘，但显然不是。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:53:50.573

创建一个变量来存储文本并在您的对象中访问。将此添加到 YourClass.m：

```
@interface YourClass () {   
     UILabel *footerLabel;
}

@end 
```

将此方法添加到您的类中：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    if (!footerLabel) {
        footerLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 0.0)];
    }

    return footerLabel;
}

- (float)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    return 60.0;
} 
```

然后，当您想更改文本时，只需更新 footerLabel：

```
footerLabel.text = @"Your new text"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:12:51.777

您可以将这些文本字段添加为全局变量并创建一次，然后将它们传递给`cellForRowAtIndexPath`. 他们将被添加到他们以前的状态

# java - Java 配置未在 Eclipse 上运行

> ID：15219768
> 
> 赞同：0
> 
> 时间：2013-03-05T09:09:52.980
> 
> 标签：java, eclipse, configuration

我问你这个问题是因为在互联网上进行了长时间的研究后，我找不到可以帮助我解决问题的东西......我只是想让你给我一个关于这个问题的想法。

首先，我们还必须考虑：

*   我正在工作的工作区还包括 3 个具有相同问题的其他项目。
*   此工作区与 Dropbox 同步
*   我正在使用 ubuntu，并在 Windows 上创建了它们（dropbox 同步所有内容）
*   所有项目以前都工作过

在 Eclipse 上运行我的 java 应用程序时，我的问题开始了：“错误：找不到或加载主类 Gardener”（Gardener 是我的主类）。我可以使用命令行预编译/运行这个程序，但不能在 elipse 上。因此，我认为这是一个运行配置问题。我阅读了文档，似乎我的运行配置还可以：助手找到并选择了主类，包含 Java 库，并且类路径考虑了这些 JRE 库和我的项目源文件夹。

因此，我认为这是构建路径的问题。但是再一次，一切似乎都很好，我的源文件夹被看到了，Java 库也......

你知道我错过了什么吗？

谢谢，南斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:16:13.267

我可以通过从运行配置的类路径下的用户条目中删除项目来模拟此错误。

请检查您正在工作的项目是否在用户条目下可见。如果没有，请按照此处给出的说明进行操作：[ManinClassNotFound](https://stackoverflow.com/questions/12445625/error-could-not-find-or-load-main-class-in-eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:15:05.693

好的，我找到了解决问题的方法。

我的问题实际上与我的项目名称有关：我使用了 ':' 字符。出于某种原因，这对日食来说是个问题。解决方案不仅是重命名项目，而且将所有项目删除到工作区，创建具有工作名称的新项目，然后将文件系统导入 src 目录。经过这个操作，它编译了！我希望它会帮助某人。

南斯

# dom - Extjs DomQuery 如何遍历 Dom 元素

> ID：15219773
> 
> 赞同：3
> 
> 时间：2013-03-05T09:10:17.097
> 
> 标签：dom, extjs, xml-parsing

我只是一个初学者。感谢您的理解。

假设我有一个如下所示的 xml 文件。我想获得包含“aaa”的名称标签的学生标签。

```
<Students>
      <Student>
        <Name> aaa </Name>
        <Surname> bbb </Surname>
        ...
      </Student>
      <Student>
        <Name> ccc </Name>
        <Surname> ddd </Surname>
        ...
      </Student>
      ...
    </students> 
```

我试过这个，

```
Ext.DomQuery.select('Students/Student/Name:nodeValue(aaa)', xmlDoc) 
```

但是，这只给出了 Name 节点和 Student 节点。

我希望能够根据子节点的值过滤节点。

我希望有人帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:28:27.170

您可以获取子元素，然后遍历它们并获取它们的父元素。但是，在你的情况下，你可以`:contains`像这里一样使用伪类：http: [//jsfiddle.net/guyfawkes/caxvN/](http://jsfiddle.net/guyfawkes/caxvN/)

# php - 基于电话键盘的正则表达式名称查询

> ID：15219776
> 
> 赞同：3
> 
> 时间：2013-03-05T09:10:24.910
> 
> 标签：php, jquery, ajax, search

只是从此时开始，我没有示例代码，我正在寻求有关这是否可能的建议以及有关如何..

我被要求创建一个 PHP 脚本来搜索我们的 Windows LDAP 通讯簿。为了让事情变得尴尬，我被要求这样做，所以前端看起来像一个电话键盘，用户使用数字键盘输入姓名。

正如我所看到的，这些数字将与字母相关：

```
2 = ABC
3 = DEF
4 = GHI
5 = JKL
6 = MNO
7 = PQRS
8 = TUV
9 = WXYZ 
```

我可以看到两种不同的方法来做到这一点。

1.  当用户在那里输入第一个数字时，开始构建一个匹配数组，然后在他们输入第二个和第三个匹配时减少它。

2.  建立一个输入的数字列表，然后搜索明确的匹配项。

我可以看到的另一个问题是我需要知道用户输入了哪个数字以及何时在字符串中。

例如：用户输入 6 4 5 这将需要匹配为：

```
M, N or O, as the first character.
G, H or I as the second character.
J, K or L as the thrid character. 
```

有没有人有任何建议，指针的建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:06:30.850

我同意 Dave 的观点，这确实是一个愚蠢的想法，但在您手动进行整个过滤之前，LDAP 过滤器可能是一个解决方案。您必须为可能的组合创建一个巨大的过滤器：

```
function getCombinations(array $digits = array())
{
    $digitToLetters = array(
        2 => array('A', 'B', 'C'),
        3 => array('D', 'E', 'F'),
        4 => array('G', 'H', 'I'),
        5 => array('J', 'K', 'L'),
        6 => array('M', 'N', 'O'),
        7 => array('P', 'Q', 'R', 'S'),
        8 => array('T', 'U', 'U'),
        9 => array('W', 'B', 'Y', 'Z')
    );

    $values = array('');
    foreach ($digits as $digit) {
        $newValues = array();
        foreach ($values as $value) {
            if (array_key_exists($digits[0], $digitToLetters)) {
                foreach ($digitToLetters[$digit] as $letters) {
                    $newValues[] = $value . $letters;
                }
            }
        }
        $values = $newValues;
    }

    return $values;
}

function getFilterForDigits(array $digits = array()) {
    $combinations = getCombinations($digits);
    $filter = '(|(sn=' . implode('*)(sn=', $combinations) . '*))';
} 
```

它假设您仅按姓氏 ( `sn`) 进行过滤，但您可以轻松更改它，因此它可能更适合`givenName`- 请记住，如果您想同时过滤两者，过滤器大小会加倍，这可能会导致 LDAP 请求变慢。

要过滤输入`6`,的所有可能结果`4`，`5`可以调用：

```
$ds = ldap_connect("...");
$result = ldap_search($ds, "...", getFilterForDigits(array(6, 4, 5))); 
```

我仍然强烈建议不要这样做，但是如果您束手无策，请确保实现某种缓存。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:36:27.580

这当然会限制对 LDAP 的所需调用。在您请求第一个数字的名称后，您仍然可以使用该`getCombinations`功能过滤以下数字：

```
function startsWith($haystack, $needle) { 
    return !strncmp(strtoupper($haystack), $needle, strlen($needle)); 
} 

$combinations = getCombinations(array(6, 4, 5));
$results = array();
foreach ($resultsForFirstDigit as $ldapEntry) {
    foreach ($combinations as $combination) {
        if (startsWith($ldapEntry['sn'], $combination) {
            $result[] = $ldapEntry;
        }
    }
} 
```

# c# - 如何仅将基于日期的最后 10 个字段返回到视图？

> ID：15219779
> 
> 赞同：1
> 
> 时间：2013-03-05T09:10:41.997
> 
> 标签：c#, entity-framework

在这个项目中有两个 sql 表。第一个表是 Cars，第二个是 Mobiles。这两个表各有一个 ExpirationDate 字段。我想在一个视图中根据到期日期显示这两个表中的最后 10 个字段。

```
public ActionResult Index(int ?page)
{
      var result = db.Mercedes.Where(m => m.Username == User.Identity.Name).OrderByDescending(m=>m.CurrentDate);
      var result2 = db.Mobiles.Where(m => m.UserName == User.Identity.Name).OrderByDescending(m => m.CurrentDate);
      int pageSize = 6;
      int pageNumber = (page ?? 1);

      return View(result.ToPagedList(pageNumber, pageSize));              
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:21:33.657

您需要做的是重构这两个查询以返回相同的类。

然后组合两个 IQueryable 集并在第三个组合结果集上执行 Take(10)。

例子：

```
var result = from m in db.Mercedes 
             where m.Username == User.Identity.Name  
             orderby m.CurrentDate descending 
             select new car(){param1 = m.param1/*etc*/};
var result2 = from m in db.Mobiles 
              where m.Username == User.Identity.Name  
              orderby m.CurrentDate descending 
              select new car(){param1 = m.param1/*etc*/};
var combinelist = result.Concat(result2)
.OrderByDescending(m=>m.CurrentDate)
.Take(10)
.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:20:12.777

您可以使用 LINQ [Concat](http://msdn.microsoft.com/en-us/library/bb302894.aspx)和[ToList](http://msdn.microsoft.com/en-us/library/bb342261.aspx)方法：

```
 var result = db.Mercedes.Where(m => m.Username == User.Identity.Name).OrderByDescending(m=>m.CurrentDate);
        var result2 = db.Mobiles.Where(m => m.UserName == User.Identity.Name).OrderByDescending(m => m.CurrentDate);

        var combinelist= result.Concat(result2).ToList(); 
```

# algorithm - Counting total number of points inside 2 circles

> ID：15219782
> 
> 赞同：5
> 
> 时间：2013-03-05T09:10:44.413
> 
> 标签：algorithm, data-structures

There are 2 circles and their centers are fixed and will be given as input. Then there will be n points, the x and y co-ordinates of which are given as input.

Finally, there will be q queries. For each query, the radius of the two circles (Let them be r1 and r2) will be given. Output the total number of points inside the first circle or the second circle for each query. A point lies inside a circle if the distance from the point to the center is less than or equal to the radius of the circle.

Constraints: n, q <= 10^6 r1,r2 <= 10^7 and for each co-ordinate, |x| and |y| <= 10^6

I'm looking for a O(nlogn) or O(nlog^2n) preprocessing and then O(logn) algorithm per query. O(n) solution per query is too slow. Any ideas how to crack this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:37:24.363

**O(log ² N) 查询时间的解决方案。**

1.  每个查询更容易计算两个圆圈之外的点，然后从总点数中减去结果。
2.  使用笛卡尔坐标更容易。这样 X 将是与 C1 的距离，Y - 与 C2 的距离。在这种情况下，我们只需要找到该区域中的点数`X > r1 && Y > r2`。
3.  为每个点分配值“1”。现在我们只需要找到给定区域中的值的总和。在一维情况下，这可以通过 Fenwick 树来完成。但是，如果使用 2D Fenwick 树，则 2D 情况并没有太大的不同。
4.  2D Fenwick 树应该占用太多空间（10 ^(12)值具有给定的约束）。但是 Fenwick 树的二维数组非常稀疏，因此我们可以使用哈希映射来存储其值并将空间需求（和预处理时间）减少到 O(N log ² N)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:30:52.940

设 C1、C2 为圆盘的中心。设 Pi, i = 1 ... n, 为点。令 Qj, j = 1 ... q, 是第 j 个查询，Qj = (qj1, qj2)。

1.  对于每个点 Pi，计算 d(Pi, Ck)，k = 1 或 2。将其放入已排序的多重映射中：Mk(d(Pi, Ck)) 包含 Pi。这可以在 O(nlogn) 中完成（这实际上就像对距离列表进行排序）。
2.  对于每个查询 Qj，在 Mk 的键上对 qjk 进行二分搜索，这可以在 O(logn) 中完成。
3.  对于每个查询 Qj，将 multimap 的值与小于或等于上面找到的值的键合并。

# php - Suggestions on how to check an array against a database table

> ID：15219783
> 
> 赞同：0
> 
> 时间：2013-03-05T09:10:45.380
> 
> 标签：php, mysql, arrays

Here's what I have:

1.  1 **database table** containing approx 2000 records, indexed. (The important column is a string of 25 characters).
2.  An **array** containing approx 30 strings of 25 characters.

What I'd like to do:

1.  I need to check the **array** against the **database table** to find any string matches.
2.  I need to be able to identify what values in the array only match any in the table, if any

I don't really want to have to run each string in the array against the table in a separate query fashion using a loop, I'm thinking there must be a more efficient way to do this.

Any ideas would be appreciated. I'm using PHP 5.4.3 and MySQL.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:18:46.317

只需使用 IN 子句：-

```
SELECT somecolumn
FROM someTable
WHERE someCoumn IN ('a string', 'another string', 'etc') 
```

可能在 php 中执行此操作（假设数组已经转义为 SQL 安全）：-

```
$sql = "SELECT somecolumn
FROM someTable
WHERE someCoumn IN ('".implode("','", $someArray)."')"; 
```

如果您想计算每个项目上有多少匹配项（包括具有 0 的匹配项），那么这样的事情可能会更好：-

```
<?php

$result = $db->query("CREATE TEMPORARY TABLE CheckValues
(CheckValue varchar(255) NOT NULL DEFAULT '',
PRIMARY KEY (`CheckValue`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ;");

$result = $db->query("INSERT INTO CheckValues (CheckValue) VALUES('".implode("','", $someArray)."')");

$result = $db->query("SELECT CheckValue, COUNT(b.someCoumn) AS someCount
FROM CheckValues a
LEFT OUTER JOIN someTable b ON a.CheckValue = b.someCoumn
GROUP BY CheckValue");

while ($row = $result->fetch_assoc()) 
{
    echo "$row[CheckValue] - $row[someCount] <br />";
}

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:28:50.477

正如其他人所建议的，您可以使用`IN`从句。这是一个使用`MySQLi`代替的示例，`mysql_*`因此您不必担心逃逸和注入。

```
$criteria=array(/* string-to-search */);
$sql="SELECT * FROM `table` WHERE `column` IN (".implode(",",array_fill(0,count($criteria),"?")).")";
$stmt=$mysqli->prepare($sql);

call_user_func_array(array($stmt,"bind_param"),array_merge(array(str_repeat("s",count($criteria))),$criteria));

$stmt->execute();
$result=$stmt->get_result(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:19:37.177

您应该使用 MYSQL WHERE IN 子句。

使用如下：

```
SELECT * FROM TABLE_NAME WHERE COLUMN_NAME IN ('.implode(', ', $array).')' 
```

# jquery - 将 CSS 样式应用于表格的每个 TD 元素

> ID：15219790
> 
> 赞同：1
> 
> 时间：2013-03-05T09:11:17.160
> 
> 标签：jquery, css, jquery-selectors

我正在尝试将样式应用于具有 ID DataContainer 的表，如下所示：

```
 $("#DataContainer td").addClass("width200");
    $("#DataContainer th").addClass("width200"); 
```

但是，它将类应用于表头中的 TH 元素，但不适用于 TBODY 部分下的常规 TD。

你能建议我一个合适的选择器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:15:11.143

```
$('#DataContainer').find('td').addClass("width200"); 
```

应该选择 DataContainer 的所有 td 子项。请参阅[jQuery .find](http://api.jquery.com/find/)了解更多详细信息

# c# - C# GET Request and Parsing JSON

> ID：15219792
> 
> 赞同：6
> 
> 时间：2013-03-05T09:11:20.483
> 
> 标签：c#, json, get, request

I am developing Windows store app in Windows 8, Visual Studio 2012\. I need to make GET request to a particular URL and get the JSON as response. And I need to parse the JSON to get the values in it. I need C# code to do the above functionality.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T09:12:53.760

你可以使用[`HttpClient`](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)类。GetAsync方法允许您[向](http://msdn.microsoft.com/en-us/library/hh158944.aspx)指定的 url 发送 GET 请求：

```
public async Task<JsonObject> GetAsync(string uri)
{
    var httpClient = new HttpClient();
    var content = await httpClient.GetStringAsync(uri);
    return await Task.Run(() => JsonObject.Parse(content));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:18:15.570

您可以使用[MSDN中的此示例代码](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/db466fde-9056-4d01-b46d-cfa49c312c02/)

```
 var client = new HttpClient();
        var uri = new Uri("http://ponify.me/stats.php");
        Stream respStream = await client.GetStreamAsync(uri);
        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(rootObject));
        rootObject feed = (rootObject)ser.ReadObject(respStream);
        System.Diagnostics.Debug.WriteLine(feed.SONGHISTORY[0].TITLE); 
```

# c++ - Quickest c++ GUI creation

> ID：15219793
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:11:23.337
> 
> 标签：c++, user-interface

I'm working on a visual c++ project and I have decided to implement it using GUI. Now, the problem is that I don't really have want to learn something entirely new for the GUI creation as I'm already learning c# and would like to carry on with c# GUI rather than c++ GUI.

So, I want a quick way to create GUI for the visual c++ project.

PS: I already know Java, if that can be used.

Platform: Windows 8/ 7/ Vista Cross-platform: doesn't matter Current ide: Visual Studio 11 Ultimate current os: Windows 8 64 bit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:18:24.340

你可以试试MFC。如果您已经使用 MS 的东西，我发现它的学习曲线比其他 GUI 选项（QT、WTL、...）要低

否则，您可以在 C# 中创建 GUI 并使用 interop 在其后面运行您的 C++ 组件，或者您甚至可以尝试 C++/CLI，在那里您将获得一个用 C++ 编写的 .NET 程序集（实际上，与 C++ 非常相似），然后只是从您的 GUI 程序集中引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:16:25.867

如果你真的想要一些非常快的东西，你可以使用 Python 来创建 GUI。它在后台编译为 C++，因此可以很好地与 C++ 库交互，并且 GUI 创建比 C++ 更简洁。然而，与一般仅使用 C++ 相比，对 C++ GUI 进行编程并不是真正的“新事物”。

各种框架/库（DirectX、OpenGL、Qt 等）都有自己的感觉，但它们是 C++。

如果需要，您还可以使用 C# 将 GUI 创建到 C++ 库，并且可以通过 JNI 使用 Java。换句话说，世界就是你的牡蛎。

# android - 在android listview中保存状态进度条状态和按钮单击事件

> ID：15219799
> 
> 赞同：1
> 
> 时间：2013-03-05T09:11:30.437
> 
> 标签：android, android-listview, download, android-asynctask

当我单击下载按钮时，我有`listview`.in 行项目`progressbar`，2 按钮和一个图像视图，然后下载过程开始，但是当我向下滚动时应用程序崩溃以及当我向下滚动时如何`listview`在行项目中保存状态？我的代码如下:: ：

```
public class TestHopeDownload extends Activity {
    private ListView lstView;
    private ImageAdapter imageAdapter;
    private Handler handler = new Handler();
    ArrayList<Url_Dto> list = new ArrayList<Url_Dto>();
    File download;
    public static final int DIALOG_DOWNLOAD_THUMBNAIL_PROGRESS = 0;
    String strDownloaDuRL;
    ArrayList<HashMap<String, Object>> MyArrList = new ArrayList<HashMap<String, Object>>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test_hope_download);
        new LoadContentFromServer().execute();

    }

    public void ShowThumbnailData() {
        // ListView and imageAdapter
        lstView = (ListView) findViewById(R.id.listView1);
        lstView.setClipToPadding(false);
        list = DBAdpter.getUrl_Detail();
        imageAdapter = new ImageAdapter(getApplicationContext());
        lstView.setAdapter(imageAdapter);
    }

    public void startDownload(final int position) {

        Runnable runnable = new Runnable() {
            int Status = 0;

            public void run() {

                // String urlDownload = list.get(position).url_video;
                String urlDownload = MyArrList.get(position)
                        .get("VideoPathThum").toString();
                Log.v("log_tag", "urlDownload   ::: " + urlDownload);

                int count = 0;
                try {

                    URL url = new URL(urlDownload);
                    URLConnection conexion = url.openConnection();
                    conexion.connect();

                    int lenghtOfFile = conexion.getContentLength();
                    Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

                    InputStream input = new BufferedInputStream(
                            url.openStream());

                    // Get File Name from URL
                    String fileName = urlDownload.substring(
                            urlDownload.lastIndexOf('/') + 1,
                            urlDownload.length());
                    download = new File(
                            Environment.getExternalStorageDirectory()
                                    + "/download/");
                    if (!download.exists()) {
                        download.mkdir();
                    }
                    strDownloaDuRL = download + "/" + fileName;
                    OutputStream output = new FileOutputStream(strDownloaDuRL);

                    byte data[] = new byte[1024];
                    long total = 0;

                    while ((count = input.read(data)) != -1) {
                        total += count;
                        Status = (int) ((total * 100) / lenghtOfFile);
                        output.write(data, 0, count);

                        // Update ProgressBar
                        handler.post(new Runnable() {
                            public void run() {
                                updateStatus(position, Status);
                            }
                        });

                    }

                    output.flush();
                    output.close();
                    input.close();

                } catch (Exception e) {
                }

            }
        };
        new Thread(runnable).start();
    }

    private void updateStatus(int index, int Status) {

        View v = lstView.getChildAt(index - lstView.getFirstVisiblePosition());

        // Update ProgressBar
        ProgressBar progress = (ProgressBar) v.findViewById(R.id.progressBar);
        progress.setProgress(Status);

        // Update Text to ColStatus
        TextView txtStatus = (TextView) v.findViewById(R.id.ColStatus);
        txtStatus.setPadding(10, 0, 0, 0);
        txtStatus.setText("Load : " + String.valueOf(Status) + "%");

        // Enabled Button View
        if (Status >= 100) {
            Button btnView = (Button) v.findViewById(R.id.btnView);
            btnView.setTextColor(Color.RED);
            btnView.setEnabled(true);
        }
    }

    class LoadContentFromServer extends AsyncTask<Object, Integer, Object> {

        protected void onPreExecute() {
            super.onPreExecute();

        }

        @Override
        protected Object doInBackground(Object... params) {

            HashMap<String, Object> map;
            String url = "***** url******";
            String result = "";
            InputStream is = null;
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            // http post
            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
            }
            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }
            try {
                JSONObject json_obj = new JSONObject(result);
                JSONArray j_Arr_fn = json_obj.getJSONArray("children");

                for (int i = 0; i < j_Arr_fn.length(); i++) {
                    JSONObject json_objs = j_Arr_fn.getJSONObject(i);
                    Url_Dto proDto = new Url_Dto();
                    proDto.url_video = json_objs.getString("videoUrl");
                    map = new HashMap<String, Object>();
                    map.put("VideoPathThum", proDto.url_video);
                    MyArrList.add(map);
                }

            } catch (JSONException e) {
                Log.e("log_tag", "Error parsing data " + e.toString());
            }

            return null;
        }

        @Override
        protected void onPostExecute(Object result) {
            ShowThumbnailData();

        }
    }

    class ImageAdapter extends BaseAdapter {

        private Context mContext;

        public ImageAdapter(Context context) {
            mContext = context;
        }

        public int getCount() {
            return MyArrList.size();
        }

        public Object getItem(int position) {
            return MyArrList.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub

            LayoutInflater inflater = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            if (convertView == null) {
                convertView = inflater.inflate(R.layout.activity_column, null);
            }

            // ColImage
            ImageView imageView = (ImageView) convertView
                    .findViewById(R.id.ColImgPath);
            imageView.getLayoutParams().height = 110;
            imageView.getLayoutParams().width = 110;
            imageView.setPadding(10, 10, 10, 10);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            try {

                imageView.setImageResource(list.get(position).images[position]);
            } catch (Exception e) {
                // When Error
                imageView.setImageResource(android.R.drawable.ic_menu_report_image);

            }

            // ColStatus
            TextView txtStatus = (TextView) convertView
                    .findViewById(R.id.ColStatus);
            txtStatus.setPadding(10, 0, 0, 0);
            txtStatus.setText("...");

            // btnDownload
            final Button btnDownload = (Button) convertView
                    .findViewById(R.id.btnDownload);
            btnDownload.setTextColor(Color.RED);
            btnDownload.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    // Download
                    btnDownload.setEnabled(false);
                    btnDownload.setTextColor(Color.GRAY);
                    startDownload(position);
                    pbs.setDl(1);

                }
            });

            // btnView
            Button btnView = (Button) convertView.findViewById(R.id.btnView);
            btnView.setEnabled(false);
            btnView.setTextColor(Color.GRAY);
            btnView.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    ViewVideoDelete(position);

                }
            });

            // progressBar
            ProgressBar progress = (ProgressBar) convertView
                    .findViewById(R.id.progressBar);
            progress.setPadding(10, 0, 0, 0);
            return convertView;

        }

    }

    public void ViewVideoDelete(int position) {
        String urlDownload = MyArrList.get(position).get("VideoPathThum")
                .toString();

        String fileName = urlDownload.substring(
                urlDownload.lastIndexOf('/') + 1, urlDownload.length());
        download = new File(Environment.getExternalStorageDirectory()
                + "/download/");

        String strPath = download + "/" + fileName;
        Log.v("log_tag", "fileNameDElete :: " + strPath);
        File delete = new File(strPath);
        delete.delete();
    }

} 
```

然后我点击下载按钮然后我向下滚动然后应用程序崩溃。我的错误在下面::

```
03-05 14:39:15.301: E/AndroidRuntime(4481): FATAL EXCEPTION: main
03-05 14:39:15.301: E/AndroidRuntime(4481): java.lang.NullPointerException
03-05 14:39:15.301: E/AndroidRuntime(4481):     at com.example.testhopedownload.TestHopeDownload.updateStatus(TestHopeDownload.java:142)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at com.example.testhopedownload.TestHopeDownload.access$1(TestHopeDownload.java:137)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at com.example.testhopedownload.TestHopeDownload$1$1.run(TestHopeDownload.java:119)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at android.os.Handler.handleCallback(Handler.java:587)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at android.os.Looper.loop(Looper.java:130)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at java.lang.reflect.Method.invokeNative(Native Method)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at java.lang.reflect.Method.invoke(Method.java:507)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-05 14:39:15.301: E/AndroidRuntime(4481):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:25:51.223

使用 [Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)将 ProgressBar 从 Thread 更新为：

```
TestHopeDownload.this.runOnUiThread(new Runnable() {
    public void run() {
         updateStatus(position, Status); //<<<< call updateStatus method here
    }
}); 
```

# java - Postgres error: a column definition list is only allowed for functions returning "record"

> ID：15219800
> 
> 赞同：2
> 
> 时间：2013-03-05T09:11:35.297
> 
> 标签：java, sql, postgresql, plpgsql

```
public class DimensionStoneDaoHibernate extends HibernateDaoSupport implements DimensionStoneDao 
      {

    public Connection con = null;
    int i=0;

    public void setCon(Connection con) {
        this.con = getSession().connection(); 
    }

    public Connection getCon() {        

        setCon(con);        
        return con;
    } 
        public List getMineralByApplicationId(String appId) {
            List<String> mineral = new ArrayList<String>();

        PreparedStatement query =getCon().prepareStatement("select * from  multiple_mineral_report(?) as types(val1 varchar)",ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);      

                query.setInt(1, Integer.parseInt(appId));               
                    ResultSet rs=query.executeQuery();

                    String value = new String();
                    i = 0;
                    while(rs.next()){               
                        value = rs.getString(1);
                        mineral.add(value);
                    }

        } 

} 
```

Above the SQL function `multiple_mineral_report(?)` returns string. When the above code is executed the following exception is thrown:

> org.postgresql.util.PSQLException: ERROR: a column definition list is only allowed for functions returning "record"

```
 CREATE OR REPLACE FUNCTION multiple_mineral_report(b integer)
  RETURNS character varying AS
$BODY$
declare
k varchar := '';    
sql_res record;
begin
 for sql_res in execute 'select  mineral_name from application_mineral as am inner join mineral as m on(am.mineral=m.mineral_id) where am.application_id = '||$1||'' loop
    k = k || sql_res.mineral_name || ', ';
 end loop;
 return k;
end;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION multiple_mineral_report(integer) OWNER TO postgres; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:47:05.900

你的错误在这里：

```
PreparedStatement query =getCon().prepareStatement(
"select * from  multiple_mineral_report(?) as types**(val1 varchar)**"
,ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
```

如果已经明确定义，您不必（实际上也不能）使用列定义列表定义返回类型。您的功能定义为

```
RETURNS character varying 
```

删除粗体部分，这个特定的错误应该会消失。
但实际上，由于您的函数返回单个值，因此您希望像这样调用您的函数：

```
SELECT multiple_mineral_report(?) 
```

# jquery - 如何在asp.net的web控件中使用jquery Datepicker？

> ID：15219801
> 
> 赞同：0
> 
> 时间：2013-03-05T09:11:35.803
> 
> 标签：jquery, asp.net, datepicker, web-controls

我正在创建一个 web 控件，我想在这个控件上使用 jquery date-picker，我尝试了以下事情：1）。在 web-control 中应用所有必需的 jquery 代码（**但它对我不起作用。**） 2）。在我调用该 Web 控件的页面中应用所有必需的 jquery 代码（**但它对我不起作用。**）

请帮我，

实际上我这样做的目的是：我想创建一个用于搜索的通用模块，我只需将表的名称传递给它就会自动工作，到目前为止我已经完成的是：

1）。绑定下拉列表中的所有列现在我要做的是：如果列类型是 DateTime，那么它将显示一个带有 jquery 日历的文本框。

请帮我解决这个问题，我的代码是：

```
<table>
<tr>
    <td>
        <asp:DropDownList ID="drpColumnName" Width="150px" runat="server" AutoPostBack="true"
            OnSelectedIndexChanged="drpColumnName_SelectedIndexChanged">
        </asp:DropDownList>
    </td>
    <td>
        <asp:DropDownList ID="drpOperation" Width="150px" runat="server">
        </asp:DropDownList>
    </td>
    <td>
        <asp:DropDownList ID="drpCondition" Width="150px" runat="server">
            <asp:ListItem Text="Or" Selected="True" Value="0"></asp:ListItem>
            <asp:ListItem Text="And" Value="1"></asp:ListItem>
        </asp:DropDownList>
    </td>
    <td>
        <asp:TextBox ID="txtSearchText" runat="server" Width="150px"></asp:TextBox>
        <asp:TextBox ID="txtDateSearch" CssClass="myClass" runat="server" Width="150px"></asp:TextBox>
    </td>
    <td>
        <asp:Button ID="btnAddConditionToSearch" runat="server" Text="AddToSearch" OnClick="btnAddConditionToSearch_Click" />
    </td>
</tr>
<tr>
    <td colspan="5">
        &nbsp;
    </td>
</tr>
</table> 
```

页面的代码是：

```
 <form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<div>
    <Search:ctrlSearch ID="cntrlSearch" runat="server" />
</div>
</form> 
```

jQuery代码是：

```
 <script type="text/javascript">
$(document).ready(function () {

    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);
    // Place here the first init of the DatePicker   

    $('.myclass').datepicker();

});

function InitializeRequest(sender, args) { }
function EndRequest(sender, args) {
    // after update occur on UpdatePanel re-init the DatePicker 

    $('.myclass').datepicker();

} 
```

请帮我，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:20:39.817

通过类选择器找到您的日期选择器。这比尝试定位 id 容易得多。如果您将控件夹在更新面板中，则有两个将日期选择器初始化两次。执行此操作

```
 <script type="text/javascript">
  $(document).ready(function () {

        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_initializeRequest(InitializeRequest);
        prm.add_endRequest(EndRequest);
        // Place here the first init of the DatePicker   

        $('.myclass').datepicker();

    });

    function InitializeRequest(sender, args) { }
    function EndRequest(sender, args) {
        // after update occur on UpdatePanel re-init the DatePicker 

        $('.myclass').datepicker();

             }
</script> 
```

标记`

```
 <asp:TextBox ID="txtDateSearch" CssClass="myClass" runat="server" Width="150px"></asp:TextBox> 
```

[在此处](https://dl.dropboxusercontent.com/u/81286708/WebApplication3.zip)查看演示文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:21:21.743

像这样检查

```
$("#<%=txtSearchText.ClientID%>").datepicker(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:20:40.357

我认为您的问题将是因为 asp.net 更改了嵌套在控件和母版页等中的元素的名称和 ID。

打开页面的源代码，找到控件并仔细检查 ID。

或者作为替代方案，向元素添加一个 css 类并使用 jQuery 查找它而不是 ID。

JA

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T08:01:17.177

访问此页面[jquery-ui-datepicker](https://code.google.com/p/jquery-ui/source/browse/trunk/ui/i18n/ui.datepicker-tr.js?r=3004&spec=svn3727) -> 这是 ui 代码。将此代码块保存为 js 文件。然后在您的 aspx 页面上获取它。

```
<script src="js/jquery.ui.datepicker-tr.js" type="text/javascript"></script> like this.

$(document).ready(function () {

$('#<%=txtBirthday.ClientID%>').datepicker({
                changeMonth: true,
                changeYear: true,
                yearRange: "-100:-17",
                defaultDate: new Date(1980, 01, 01)
            });

}); 
```

这是示例代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-19T04:54:08.230

```
<asp:Label ID="Label1" runat="server" Text="From"></asp:Label>
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

<asp:Label ID="Label2" runat="server" Text="To"></asp:Label>
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css">
<script>
  $(function() {
    $( "#TextBox1" ).datepicker();
  });
  $(function() {
    $( "#TextBox2" ).datepicker();
  });
</script> 
```

# android - How to return ArrayList as SoapObject

> ID：15219804
> 
> 赞同：1
> 
> 时间：2013-03-05T09:11:39.913
> 
> 标签：android, arraylist, ksoap

Iam new to Android and stuck up with something for past couple of days. Iam retreiving `CandidateNames` from database and storing it to my `ArrayList` which is in a `WebService` and returning the `ArrayList` to Java Client.

`WebService` with `ArrayList`:

```
public  ArrayList<String> DisplayName(){
    ArrayList<String>  results= new ArrayList<String>(); 
    try {
        String connectionURL = "jdbc:mysql://localhost/databaseName";
        Connection connection = null;
        Statement statement = null;
        ResultSet rs = null;
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        connection=DriverManager.getConnection(connectionURL,"username","pswd");
        statement = connection.createStatement();

        String QueryString = "Select CName From CMaster where cid='xyz'";
        rs = statement.executeQuery(QueryString);

        while (rs.next()) {
            results.add(rs.getString(1));
        }

        rs.close();
        connection.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return results;
} 
```

**Java Code:**

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);            
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.debug = true; 
envelope.setOutputSoapObject(request);

try {
    androidHttpTransport.call(SOAP_ACTION, envelope);
    SoapPrimitive response = (SoapPrimitive)envelope.getResponse();    
    System.out.println("Response:::::::::::::" +result);
} 
```

This gives me only the first value of my `ArrayList`. When I replace: `SoapPrimitive response = (SoapPrimitive)envelope.getResponse();` with

`SoapObject result= (SoapObject)envelope.getResponse(); System.out.println("Response:::::::::::::" +result.getProperty(0));` it throws the following `exception`:

```
java.lang.classcastexception org.ksoap2.serialization.soapprimitive cannot be cast to org.ksoap2.serialization.soapObject 
```

I Googled and tried every possible thing,please help me out if i missed out something. Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T18:33:23.570

我遇到了同样的问题，我使用了一个返回 ArrayList 的 WS，而我的 Object_A 拥有自己的 ArrayList，而 Object_B 拥有自己的 ArrayList，无论我用这个解决了什么问题：

`SoapObject myArray_A=null;`

`SoapObject myArray_B=null;`

`SoapObject myArray_C=null;`

```
myArray_A=envelop.bodyIn;
for(int x=0; x<myArray_A.getPropertyCount()-1;x++){

myArray_B = (SoapObject) myArray_A.getProperty(x);
for(int y=0; y<myArray_B.getPropertyCount()-1;y++){
    myArray_C = (SoapObject) myArray_B.getProperty(y);
    for(int z=0; z<myArray_C.getPropertyCount()-1;z++){
        SoapPrimitive porperty = (SoapPrimitive) myArray_B.getProperty(z);
    }
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T17:49:01.480

这对我有用。希望能帮助到你。我也有一个 WS whihc 返回一个 Arraylist

```
SoapObject result = (SoapObject) envelope.bodyIn;
int count = result.getPropertyCount();
ArrayList<String> simplifiedList = new ArrayList<String>(); 
for (int i = 0; i < count; i++)
{
    simplifiedList.add(result.getPropertyAsString(i));
} 
```

所以在这一点上，你有一个 Arraylist、simplifiedList，你可以将它传递给另一个活动或用它做任何其他事情。

问候，

# oracle - ORA-00917-missing coma

> ID：15219806
> 
> 赞同：1
> 
> 时间：2013-03-05T09:11:43.907
> 
> 标签：oracle

```
SELECT 
    XMLELEMENT (
        DECODE ('RF', 'RF', 'Credit', 'Sale'), xmlattributes ('01234567' AS "id")
    ) AS Order
FROM 
    DUAL 
```

When I run the above query I'm getting `ORA-00917-missing coma` error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:07:35.620

不确定您要做什么，但如果您想要动态元素名称，则需要使用`EVALNAME`

```
SELECT 
    XMLELEMENT (
          evalname(       
        DECODE ('RF', 'RF', 'Credit', 'Sale')),
      xmlattributes ('01234567' AS "id")
    ).getstringval() AS "Order"
FROM 
    DUAL 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/8399)

# android - Android SoundPool + AudioEffects

> ID：15219808
> 
> 赞同：0
> 
> 时间：2013-03-05T09:11:46.943
> 
> 标签：android, soundpool, audioeffect

I am currently using the **SoundPool** for gapless looping over short sample clips - works good so far.

Now I would like to **add effects** to one or both channels (BassBoost or PresetReverb).

Can I do this with the SoundPool?
Do I have to use Audiotrack instead? (MediaPlayer would be too heavy). Can the Audiotrack loop gapless?

Thanks, paper.

# java - Alfresco : rules between folders

> ID：15219809
> 
> 赞同：0
> 
> 时间：2013-03-05T09:11:50.537
> 
> 标签：java, tomcat, alfresco-share

i have two folders under alfresco share site , i want to create a rule between them in order to deny access to folder "folder2" unless folder "folder1" has 6 files inside and one of them must be named "toto.html" , did you know a feature , plug in or a module which do that.

PS , i used record management module 2.0.1-147 but it has a bug in alfresco community 4.2.c (after creating disposition schedule , complete event does not work) seems to be a common bug. Help please thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:32:29.870

您的规则需要监控对文件夹 1 中文件的任何更改（添加、删除、更新），然后运行[自定义操作](http://ecmarchitect.com/archives/2012/01/23/1519)来检查您的条件并设置对文件夹 2 的权限。请参阅[使用规则](http://docs.alfresco.com/4.0/index.jsp?topic=/com.alfresco.enterprise.doc/concepts/library-folder-rules.html)。

该操作可能需要在 Java 中，以便它可以以管理员身份运行（使用`AuthenticationUtil.runAs()`）来设置文件夹 2 的权限，而不管调用者如何，尽管这取决于您尝试实现的场景/工作流程。

# c# - 将 cocoapods 与 xamarin 一起使用

> ID：15219811
> 
> 赞同：5
> 
> 时间：2013-03-05T09:11:58.173
> 
> 标签：c#, xamarin, xamarin.ios, cocoapods

这真的是在 xamarin 中使用 cocoacontrols 吗？例如这个： http: [//www.cocoacontrols.com/platforms/ios/controls/kycirclemenu](http://www.cocoacontrols.com/platforms/ios/controls/kycirclemenu) 我知道我可以用 UICollectionView 创建类似圆形菜单的东西（[http://docs.xamarin.com/guides/ios/user_interface /introduction_to_collection_views](http://docs.xamarin.com/guides/ios/user_interface/introduction_to_collection_views)）但无论如何想知道这真的使用cocoapods。

谢谢，雅罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T10:42:37.003

鉴于您为 API ( [http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries) ) 编写绑定，是的，您可能可以在您的 xamarin.ios 应用程序中使用该控件。

在开始新的绑定之前，请检查它是否已经[在此处](https://github.com/mono/monotouch-bindings)或[github上的其他地方可用](http://github.com)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-29T11:46:40.323

您可以将基于 Objective C 的 Cocoapods 绑定到 xamarin 及其官方支持 ( [https://developer.xamarin.com/guides/ios/advanced_topics/binding_objective-c/walkthrough/](https://developer.xamarin.com/guides/ios/advanced_topics/binding_objective-c/walkthrough/) )

1.  您必须找到 cocoapod 的 github 存储库并将其转换为静态库（.a）文件
2.  您必须使用该静态库在 Xam Studio 中创建绑定库

那么你可以在 xamarin.ios 中使用

但是基于 Swift 的库在 Xamarin 中不受官方支持。所以你不能像你一样直接在 xamarin 中使用基于 Swift 的 cocoapods 但是有一些解决方法

1.  您可以使用 Objective C 将 Swift 框架桥接到 C#，即使用 Objective C 公开 Swift API 并将其转换为 .a 静态库，然后绑定库

2.  尝试将 Swift 移植到 C#，它也应该更快

正如[Stephane Delcroix所](https://stackoverflow.com/users/1063783/stephane-delcroix) [引用的](https://stackoverflow.com/a/15221721/730807)

在开始移植之前，看看[这里](https://github.com/mono/monotouch-bindings)是否有任何现有的单点触控绑定

# php - Ascending Numbers from array for each individual element

> ID：15219812
> 
> 赞同：0
> 
> 时间：2013-03-05T09:12:02.053
> 
> 标签：php, jquery, arrays, count

I didn´t get an answer yesterday on this question. [https://stackoverflow.com/questions/15206351/jquery-slider-with-newest-content-first-gets-reversed-thumbnails-clicking-on-fi](https://stackoverflow.com/questions/15206351/jquery-slider-with-newest-content-first-gets-reversed-thumbnails-clicking-on-fi)

So I tried for a simpler solution. I want to change this code:

```
$news_countpp = 6;
$result = mysqli_query($con,"SELECT * FROM tbl_news ORDER BY id DESC LIMIT ".($news_page * $news_countpp).", $news_countpp");
while($row = mysqli_fetch_array($result))
{
echo "<div><a href='#".$row['id']."' class='cross-link'><img src='/assets/images/news/news_".$row['id']."_slider_thumb.jpg' alt='".$row['news_img_alt']."'  class='nav-thumb' alt='temp-thumb' style='width:60px; height:40px;'></a></div>";
} 
```

The Part `<a href='#".$row['id']."` would echo descending numbers from #6 - #1\. (newest news hast highest ID) I want the numbers to be ascending instead (not according to the id) than it works.

I tried the following array instead of ".row['id'].":

```
$thumblink = array ('1', '2', '3', '4', '5', '6');
for ($i = 0; $i < 6; $i++) {
echo $thumblink[$i];
} 
```

But this gives each of my 6 thumbnails the href "123456" instead of ascending numbers from 1 - 6 for the individual thumbnails. Do you know what I do wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:19:35.540

```
$news_countpp = 6;
$result = mysqli_query($con,"SELECT * FROM tbl_news ORDER BY id DESC LIMIT ".($news_page * $news_countpp).", $news_countpp");
$i = 1
while($row = mysqli_fetch_array($result))
{
echo "<div><a href='#".$i."' class='cross-link'><img src='/assets/images/news/news_".$row['id']."_slider_thumb.jpg' alt='".$row['news_img_alt']."'  class='nav-thumb' alt='temp-thumb' style='width:60px; height:40px;'></a></div>";
$i++;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:17:22.727

我猜你正在为循环的每次迭代迭代整个数组`while`。相反，`0`在循环之前初始化数组和计数器变量`while`，并且每次迭代只访问一个元素（这样做时将计数器加一）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:21:29.040

这样的事情怎么样？

```
$i = 0;
while($row = mysqli_fetch_array($result)) {
  $i++;
  echo 
    "<div>",
      "<a href='#".$row['id']."' class='cross-link'>",
        "<img src='/assets/images/news/news_", $row[$i], "_slider_thumb.jpg'
          alt='".$row['news_img_alt']."'  
          class='nav-thumb' alt='temp-thumb' 
          style='width:60px; height:40px;'>",
      "</a>",
    "</div>";
} 
```

# php - Convert PHP closing tag into comment

> ID：15219815
> 
> 赞同：152
> 
> 时间：2013-03-05T09:12:07.550
> 
> 标签：php, regex, tags, comments

One of the lines in my script contains a PHP closing tag inside a string. Under normal operation this does not cause a problem, but I need to comment out the line.

I have tried to comment out this line with `//`, `/*` `*/` and `#` but none of them work, the parser considers closing tag to be an actual closing tag.

Here is the line in question:

```
$string = preg_replace('#<br\s*/?>(?:\s*<br\s*/?>)+#i', '<br />', $string);
//                              ^^             ^^ 
```

What can I do to comment out the above line?

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-03-05T09:13:07.773

使用一个技巧：连接两个部分的字符串。这样，结束标签被一分为二，不再是有效的结束标签。`'?>' --> '?'.'>'`

在您的代码中：

```
$string = preg_replace('#<br\s*/?'.'>(?:\s*<br\s*/?'.'>)+#i', '<br />', $string); 
```

这将使`//`评论工作。

要使`/* */`注释起作用，您还必须拆分`*/`序列：

```
$string = preg_replace('#<br\s*'.'/?'.'>(?:\s*<br\s*'.'/?'.'>)+#i', '<br />', $string); 
```

请记住，有时，即使整体*大于*部分之和——但贪婪是不好的，有时你最好*少吃*点东西。:)

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-03-05T09:16:18.923

**最简单的方法**

创建一个单独的变量来保存您的正则表达式；这样你就可以简单地注释掉`preg_replace()`语句：

```
$re = '#<br\s*/?>(?:\s*<br\s*/?>)+#i';
// $string = preg_replace($re, '<br />', $string); 
```

**修复使用字符类**

`?>`要修复行注释，您可以通过放入`>`一个字符类来分解，如下所示：

```
$string = preg_replace('#<br\s*/?[>](?:\s*<br\s*/?[>])+#i', '<br />', $string);
                                 ^ ^              ^ ^ 
```

要修复块评论，您可以将其应用于`/`：

```
$string = preg_replace('#<br\s*[/]?>(?:\s*<br\s*[/]?>)+#i', '<br />', $string);
                               ^ ^              ^ ^ 
```

要修复这两种注释样式，您可以将`/` *和* `>`放入它们自己的字符类中。

**修复使用`/x`修饰符**

`x` [修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)- aka - 忽略正则表达式中的`PCRE_EXTENDED`空格和换行符（除非它们出现在字符类中）；这使得添加空格来分隔有问题的字符成为可能。要修复两种注释样式：

```
$string = preg_replace('#<br\s* /? >(?:\s*<br\s* /? >)+#ix', '<br />', $string);
                               ^  ^             ^  ^ 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-03-05T09:31:39.210

**为什么你的尝试没有奏效：**

```
// $string = preg_replace('#<br\s*/?>(?:\s*<br\s*/?>)+#i',...
                                   ^ doesn't work due to ?> ending php

/* $string = preg_replace('#<br\s*/?>(?:\s*<br\s*/?>)+#i',... */
                                 ^ doesn't work due to */ closing comment 
```

**什么有效：**

```
/* $string = preg_replace('#<br\s*[/]?>(?:\s*<br\s*[/]?>)+#i',... */
                                  ^ ^              ^ ^
// $string = preg_replace('#<br\s*/?[>](?:\s*<br\s*/?[>])+#i',...
                                    ^ ^              ^ ^ 
```

* * *

**更远...**

完成上述操作后，您应该可以使用`/*`注释掉该行了。如果您`?>`保持原样，`//`则不可能注释掉整行。后面的文本`?>`可能是 html，它**不在 PHP 解释器的控制**范围内，所以这不起作用。

从**[文档中：](http://php.net/manual/en/language.basic-syntax.comments.php)**

> “单行”注释样式仅注释到行尾或当前 PHP 代码块，以先到者为准。这意味着 // ... ?> 或 # ... ?> 之后的 HTML 代码将被打印： ?> 会退出 PHP 模式并返回 HTML 模式，而 // 或 # 不会影响这一点。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-03-05T17:34:15.957

另一个想法：转义`>`（和`/`，如果你想使用`/*...*/`评论）：

```
$string = preg_replace('#<br\s*\/?\>(?:\s*<br\s*\/?\>)+#i', '<br />', $string); 
```

正则表达式引擎会忽略“不必要的”转义，但在这种情况下很有用（出于其他答案中概述的原因）。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-03-07T06:04:35.667

为什么要使用复杂、难以阅读的“技巧”来解决问题？

`?`只是为了方便起见的量词快捷方式，所以

**只需使用长版本的量词`{0,1}`**，意思是“最少 0 最多 1 次出现”：

```
$string = preg_replace('#<br\s*/{0,1}>(?:\s*<br\s*/{0,1}>)+#i', '<br />', $string); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-04-10T05:19:18.350

其他一些值得添加到*RegEx 技巧书中*的方法：

首先，您可以将 RegEx 压缩为：`/(<br\s*/?>)+/i`并替换为`<br />`（无需为 RegExP 带来前瞻负担），您将始终以您选择的 XHMTL 换行符结束。

其他修改 RegEx 的方法，使其不会触发`*/`结束注释或`?>`结束脚本：

*   使用[所有格量词](http://www.regular-expressions.info/possessive.html)：`#(<br\s*+/?+>)+#i`- 这基本上意味着`\s*+`如果你发现空格匹配尽可能多的并保留它，`/?+`如果你发现一个斜线保留它！
*   包含`\s*`并`/*`在捕获组中=>`#(<br(\s*)(/?)>)+#i`

现场演示：[http ://codepad.viper-7.com/YjqUbi](http://codepad.viper-7.com/YjqUbi)

而且由于我们倾向于所有格行为，因此也绕过评论问题的最快正则表达式是：[解释演示](http://regex101.com/r/vE0rI8)**`#(<br\s*+/?+>)++#i`**

* * *

# 至于在棘手的情况下发表评论

当您无法更改代码，或者已经使用了多行注释并且：

## 1\. 使用**[nowdoc](http://php.net/manual/en/language.types.string.php)**：

```
 $string='Hello<br>World<br><br />World<br><br><br>Word!';
    <<<'comment'
    $string = preg_replace('#(<br\s*/?>)+#i', '<br />', $string);
comment; 
```

直播代码：[http ://codepad.viper-7.com/22uOtV](http://codepad.viper-7.com/22uOtV)

注意：**nowdoc与****heredoc**类似，但它不解析内容，并且必须将其*起始*分隔符用`'`单引号括起来`'`（*请注意，**结束分隔符无法识别**，必须后跟`;`一个**新行**！*）

## [2\. 使用goto](http://www.php.net/manual/en/control-structures.goto.php)跳过代码：

```
$string='Hello<br>World<br><br />World<br><br><br>Word!';
goto landing;
$string = preg_replace('#(<br\s*/?>)+#i', '<br />', $string);
landing: 
```

现场示例：[http ://codepad.viper-7.com/UfqrIQ](http://codepad.viper-7.com/UfqrIQ)

## `if(false)`3\. 用or跳过代码`if(0)`：

```
$string='Hello<br>World<br><br />World<br><br><br>Word!';
if(0){
$string = preg_replace('#(<br\s*/?>)+#i', '<br />', $string);
} 
```

测试：[http ://codepad.viper-7.com/wDg5H5](http://codepad.viper-7.com/wDg5H5)

# sql - Rails Getting a running balance with ordered list - summation virtual attribute

> ID：15219818
> 
> 赞同：0
> 
> 时间：2013-03-05T09:12:16.967
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord, virtual-attribute

I'm trying to get a current balance per transaction, a simple summation (Credit's up to record - Debits up to record) on an ordered list.

The challenge is that transactions are often entered out of order, and the transaction logs are sorted by a "Dated" field (showing the date it should have been entered) and by "credits" first (so that it shows payments before bills on the same day).

The association is sorted:

```
has_many :rent_logs, :order => [:dated, "credit desc"] 
```

Data is presented simular to the following

```
[ID] Dated  Label   Credit  Debit   Balance [Needs excel summation look]
[20] 1/1/13 payment 600.0          -30 *    [Should be: 600 ]
[1 ] 1/1/13 Rent Due        630.0  -30      [Ok here  : -30 ]
[2 ] 2/1/13 Rent Due        630.0  -660     [Ok here  : -660]
[28] 2/6/13 Late Fee        50.0   -710     [Ok here  : -710]
[7 ] 3/1/13 payment 1200.0         -140*    [Should be: 490 ]
[3 ] 3/1/13 Rent Due        630.0  -140     [Ok here  : -140]

* Indicates massive fail on running balance 
```

I got this by running the method below in the lease model.

```
def balance_to_date(date)
 ...
  rent_logs.where("dated <= ?", date).sum(:credit) - rent_logs.where("dated <= ?" ,date).sum(:debit)
  #problem with above is that it calculates day by day, rather than record by record.
end 
```

The problem is that I don't want it to get a difference of all the prior through out the date of interest. I want it to get the difference of all the prior through the *current record.

There are no other obvious propertys to do conditions or filters on that I can think of. The best solution that I can think of is an ugly one that probably should get me fired...:

```
def balance_to_transaction(id)
  balance = rent_logs.where("dated <= ?", date-1.day).sum(:credit) - rent_logs.where("dated <= ?" ,date-1.day).sum(:debit)
  rent_logs.where("dated = ?", date).each do |transaction|
    balance += transaction.credit
    balance -= transaction.debit
    if (id == transaction.id) 
      break
    end
  end
  balance
end 
```

This cannot be the right way to do this?

I'm using Rails 3.2.12, Ruby 1.9.3

Thanks Phil

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:50:29.793

问题是您使用日期作为条件，这在同一天的记录之间没有区别。要解决此问题，请使用 ID 来区分记录。

```
def balance_to_item(date, id)
 ...
  rent_logs.where(["dated < ? or (dated = ? and ID <= ?)", date, date, id]).sum(:credit) - 
  rent_logs.where(["dated < ? or (dated = ? and ID <= ?)", date, date, id]).sum(:debit)
end 
```

您需要指定交易项目来计算余额。

# linq - C# 中的 Linq 使用 IEnumerable

> ID：15219827
> 
> 赞同：0
> 
> 时间：2013-03-05T09:12:49.287
> 
> 标签：linq

显然，如果使用以下代码，我会遇到错误。它说：

> 无法将类型隐式转换`System.Linq.IQueryable<AnonymousType>`为`System.Collection.Generic.IEnumerable`.

请告诉我如何解决这个问题？

```
public IEnumerable<Session> GetAllListDetailConsumer(string refId)
{
    ObjectQuery<Session> sessions = db.Sessions;
    ObjectQuery<SessionsList> sessionsLists = db.SessionsList;
    var query =
        from s in sessions
        join sList in sessionsLists on s.ReferralListID equals sList.ReferralListID
        where s.ReferralListID == new Guid(refId)
        select new SessionConsumerList
        {
            ReferralListID = s.ReferralListID,
            SessionServerId = s.SessionServerID,
            ApplicationID = s.ApplicationID,
            // ...
            ConsumerID = sList.ConsumerID,
            ConsumerFirstName = sList.ConsumerFirstName,
            ConsumerFamilyName = sList.ConsumerFamilyName,
            // ...
        };
    return query.ToList();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:14:24.027

您正在选择 using `select new`，这将创建一个[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)，您需要`Session`在查询中投影到类。

```
select new Session
{
.... 
```

但是请记住，如果您的`Session`类是表示数据库/数据上下文中的表，那么您不能投影到该类，而是您可能必须创建一个临时类并将选择投影到该类。

**编辑** *（因为现在问题已被编辑）*

现在您正在选择`new SessionConsumerList`并且正在返回`IEnumerable<Session>`，您需要修改方法签名以返回`IEnumerable<SessionConsumerList>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:19:20.103

为什么不分开创建`SessionConsumerList`另一种方法呢？使代码更干净。像这样：

```
public static SessionConsumerList CreateSessionConsumerList(
    Session s,
    SessionsList sList)
{
    return new SessionConsumerList
    {
        ReferralListID = s.ReferralListID,
        SessionServerId = s.SessionServerID,
        ApplicationID = s.ApplicationID,
        // ...
        ConsumerID = sList.ConsumerID,
        ConsumerFirstName = sList.ConsumerFirstName,
        ConsumerFamilyName = sList.ConsumerFamilyName,
        // ...
    };
} 
```

进而：

```
var query =
    from s in sessions
    join sList in sessionsLists on s.ReferralListID equals sList.ReferralListID
    where s.ReferralListID == new Guid(refId)
    select CreateSessionConsumerList(s, sList); 
```

# eclipse - 任何用于创建部署图的eclipse插件

> ID：15219829
> 
> 赞同：2
> 
> 时间：2013-03-05T09:12:52.163
> 
> 标签：eclipse, eclipse-plugin, uml, deployment-diagram

什么是eclipse最好的免费插件来绘制部署图。

我有`http://www.objectaid.com/`，但我们只能画类图和序列图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T13:59:30.207

我认为 Eclipse 的 UMLet 插件看起来最适合您。[http://www.umlet.com/](http://www.umlet.com/)

这是一个示例[教程](http://www.newthinktank.com/2012/11/uml-2-0-deployment-diagrams/)。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:14:25.530

您不太可能找到 Eclipse 插件来绘制部署图，因为该活动确实超出了 IDE 的范围。但是，您可以使用[ArgoUml](http://argouml.tigris.org/)来绘制部署图。它是免费和开源的。

# html - 右键单击在 IE 中未显示预期上下文菜单的锚点

> ID：15219832
> 
> 赞同：1
> 
> 时间：2013-03-05T09:13:01.867
> 
> 标签：html, internet-explorer, css, web

我有以下 HTML：

```
<a href="somewhere">
    <span class='mask'></span>
    <img src="my_image.jpg" />
</a> 
```

和以下CSS：

```
a {
    display: block;
    position: relative;
}

a:hover .mask{
    background: rgba(255,255,255,0.1);
}

.mask {
    bottom: 0;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
} 
```

而且，在视觉上，它按预期工作。悬停时，会在其自身`<a>`上显示一个半透明*蒙版*。

但是，在除 IE 之外的所有浏览器中，当我右键单击 时`<a>`，它都按预期工作——我看到了链接的上下文菜单。

但在 IE 中，我看到的上下文菜单就像我右键单击页面中的任何其他静态项目一样。我正在寻找一种使上下文菜单在 IE 中按预期工作的方法。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:26:00.067

这在 IE 9 中对我有用 - 将 z-index: -1 添加到`.mask`. 尽管 z-index 会影响您的遮罩视觉效果。

```
.mask {
    bottom: 0;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    z-index: -1;
} 
```

[http://jsbin.com/osegib/1/edit#/osegib/2/edit](http://jsbin.com/osegib/1/edit#/osegib/2/edit)

# sql-server - 将 SQL Server 2008 表列转换为 XML 并聚合 xpath 值

> ID：15219835
> 
> 赞同：1
> 
> 时间：2013-03-05T09:13:11.077
> 
> 标签：sql-server, xml, sql-server-2008

我有一个存储在 .xml 中的表`NVARCHAR`。就是这样。

xml看起来像

```
<Container>
  <Data>
    <SomeNode>val1</SomeNode>
  </Data>
  <Data>
    <SomeNode>val2</SomeNode>
  </Data>
</Container> 
```

基本上我需要从表中的所有 xml 字符串中查询所有 val1...valX。

到目前为止，我已经设法想出了

```
SELECT CAST(XmlColumn AS XML).query('//SomeNode') FROM ThatTableWithXmlInStrings 
```

这给了我节点列表的列表。在这里我迷路了：我如何将其扁平化为单个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:49:54.490

```
select T2.X.value('text()[1]', 'nvarchar(10)')
from ThatTableWithXmlInStrings
  cross apply (select cast(XmlColumn as xml)) T1(X)
  cross apply T1.X.nodes('/Container/Data/SomeNode') as T2(X) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:20:57.033

有两种方法：

1.  将 text() 函数添加到 xquery
2.  使用节点方法[链接](http://msdn.microsoft.com/en-us/library/ms188282.aspx)

# matlab - 将字符串添加到一列并将数字添加到另一列

> ID：15219836
> 
> 赞同：1
> 
> 时间：2013-03-05T09:13:11.083
> 
> 标签：matlab, matrix

我需要一个矩阵，其中一列中的数字和matlab中另一列中的字符串

```
a = [ 1 'cancer'
      2 'cancer'
      3 'cancer'
      4 'noncancer'
      5 'noncancer' ] 
```

我无法将字符串添加到数组中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:20:58.823

您可以使用元胞数组。为此，只需用大括号替换方括号：

```
a = { 1 'cancer'
      2 'cancer'
      3 'cancer'
      4 'noncancer'
      5 'noncancer' } 
```

这导致

```
a = 

    [1]    'cancer'   
    [2]    'cancer'   
    [3]    'cancer'   
    [4]    'noncancer'
    [5]    'noncancer' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:23:10.773

您需要使用的不是数组而是[单元格](http://www.mathworks.fr/fr/help/matlab/ref/cell.html)数据结构

[与您提出相同问题的链接](https://groups.google.com/forum/?fromgroups=#!topic/comp.soft-sys.matlab/44hwtt_31aQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:51:49.913

我得到了循环的答案

```
clc;clear all;close all;

count = 0
for i = 1 : 5
    count = count + 1;
    a{i,1} = count;
end

for i=1:3
    a{i,2} = ['cancer'];
end
for i=4:5
    a{i,2} = ['noncancer'];
end 
```

# mybatis - 在 MyBatis 映射器中检查值

> ID：15219838
> 
> 赞同：0
> 
> 时间：2013-03-05T09:13:21.010
> 
> 标签：mybatis

我在 MyBatis 映射器中有一个奇怪的错误，我可以在其中检查参数是否为空，但无法检查同一参数的值；

这是我的映射器的摘录：

```
<parameterMap id="OUTOCriteria" type="Map">
    <parameter property="name"          javaType="String" />
    <parameter property="parentOU"      javaType="Long" />
    <parameter property="type"          javaType="Integer" />
    <parameter property="statusTypeCurrent" javaType="Integer" />
</parameterMap> 
```

然后我做这个检查：

```
<if test="parentOU != null">
    <if test="parentOU.compareTo(new Long(1))">
        AND OU_STRC_ID ${parentOU.operator.sql} #{parentOU.value}
    </if>
</if> 
```

第一次检查没有抛出任何错误，但嵌套检查给了我这个错误：

```
org.apache.ibatis.exceptions.PersistenceException: ### Error querying database. Cause: org.apache.ibatis.builder.BuilderException: Error evaluating expression '!parentOU.compareTo(new Long(1))'. Cause: org.apache.ibatis.ognl.MethodFailedException: Method "compareTo" failed for object parentOUEQUAL1 [java.lang.NoSuchMethodException: compareTo(java.lang.Long)] ### The error may exist in com/clearstream/iam/query/sqlmaps/OU.xml ### The error may involve ou.iamouDefaultQuery ### The error occurred while executing a query ### Cause: org.apache.ibatis.builder.BuilderException: Error evaluating expression '!parentOU.compareTo(new Long(1))'. Cause: org.apache.ibatis.ognl.MethodFailedException: Method "compareTo" failed for object parentOUEQUAL1 [java.lang.NoSuchMethodException: compareTo(java.lang.Long)] 
```

测试 Long 参数值的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:25:50.200

尝试这样的事情：

```
<if test="parentOU != null and parentOU.longValue() == 1">
    AND OU_STRC_ID ${parentOU.operator.sql} #{parentOU.value}
</if> 
```

# database - 依赖注入中的动态数据库

> ID：15219843
> 
> 赞同：1
> 
> 时间：2013-03-05T09:13:32.973
> 
> 标签：database, symfony, dependency-injection, entitymanager

我在 symfony 2.0 中实现了多个数据库概念。现在我需要在依赖注入的概念中动态获取 myservice.php 文件中的实体管理器。我怎么称呼这个实体经理？

服务.xml：

```
 <container xmlns="http://symfony.com/schema/dic/services"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://symfony.com/schema/dic/services                                 http://symfony.com     /schema/dic/services/services-1.0.xsd">

<services>
    <service id="my_service" class="Traxcrm\SalesBundle\Services\MyService">
        <argument type="service" id="doctrine" />
    </service>
 </services>

 </container> 
```

我的服务.php

```
class MyService  {

private $doctrine;

public function __construct(Doctrine\Bundle\DoctrineBundle\Registry $doctrine)
{

    $this->doctrine = $doctrine;            

}
class MyService {

 private $doctrine;

 public function __construct(Doctrine\Bundle\DoctrineBundle\Registry $doctrine) {

     $this->doctrine = $doctrine;
 }

 public function getUserDetails($id) {

     $query = $this->doctrine->getEntityManager('Test')->createQuery("SELECT        p            FROM        TraxcrmSigninBundle:Tblallusers p where p.id=$id");
    $userDetails = $query->getArrayResult();

    return $userDetails;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:18:37.853

设置服务并注入原则：

服务定义（services.yml 或 config.yml）：

```
services:
    service_name:
        class: <namespace>myservice.php
        arguments: ['@doctrine'] 
```

或 xml：

```
<services>
    <service id="service_name" class="<namespace>myservice.php">
        <argument type="service" id="doctrine"/>
    </service>
</services> 
```

然后设置您的班级以接受传递的学说对象

```
public class myservice {

   private $doctrine;

   public function __construct(Doctrine\Bundle\DoctrineBundle\Registry $doctrine) {
       $this->doctrine = $doctrine;
   }

   public function aFunction() {
       $em = $this->doctrine->getEntityManager('<name>')......
   }
} 
```

# maven - 带有 unicode 字符的 Maven 程序集插件

> ID：15219845
> 
> 赞同：3
> 
> 时间：2013-03-05T09:13:40.203
> 
> 标签：maven, unicode, maven-assembly-plugin

我有一个外部 groovy 脚本，我需要通过 maven 程序集插件将其包含在一个 zip 文件中。

我不能只编译它，它需要是文本形式的。我面临的问题是脚本包含 æ ø å 字符，这会导致一些问题。脚本本身从它在 maven 项目中的位置运行文件，但是当我用 maven 程序集插件打包它，然后解压缩它时，它的非 ascii 字符已损坏。如果我使用 7zip 或类似软件来压缩和解压缩它，该脚本也可以正常运行，不会发生损坏。

我如何告诉 maven 程序集插件来保存我的特殊字符？我真的很讨厌必须对代码进行大量更改才能将其转换为 maven 项目。

这是我的 pom 的一部分

```
 <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.4</version>
        <configuration>
            <encoding>UTF-8</encoding>
            <descriptors>
                <descriptor>src/main/assembly/archive.xml</descriptor>
            </descriptors>
        </configuration>
        <executions>
            <execution>
                <id>make-assembly</id> 
                <phase>package</phase>
                <goals>
                    <goal>single</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

和我的描述符

```
<id>archive</id>
  <baseDirectory>/</baseDirectory>
  <formats>
    <format>zip</format>
  </formats>
  <fileSets>    
...
    <fileSet>
        <lineEnding>unix</lineEnding>
        <directory>src/main/groovy</directory>
        <outputDirectory>/</outputDirectory>
        <includes>
            <include>BusinessServiceMock.groovy</include>
        </includes>
    </fileSet>
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-29T14:53:38.200

经过 3 小时的深入搜索，我遇到了同样的问题。`maven-antrun-plugin`我找到了使用而不是的另一种替代方法，`maven-assembly-plugin`因为它根本不建议对 zip 存档中的文件名进行编码。

这是我的解决方案：

1.首先，为了确保文件名是`UTF-8`编码的，例如，我将我的资源复制到项目构建存储库并强制输入和输出编码。

2.然后我`zip`通过添加复制的目标目录来创建我的。

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

...

<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.8</version>
    <executions>
        <execution>
            <phase>prepare-package</phase>
            <configuration>
                <encoding>${project.build.sourceEncoding}</encoding>
                <tasks>
                    <copy todir="${project.build.directory}/target"
                          includeemptydirs="true"
                          encoding="${project.build.sourceEncoding}"
                          outputencoding="${project.build.sourceEncoding}">
                        <fileset dir="${basedir}/src/resource">
                            <include name="**/*" />
                        </fileset>
                    </copy>
                    <zip destfile="${project.build.directory}/${project.artifactId}-${project.version}.zip"
                         encoding="${project.build.sourceEncoding}">
                        <zipfileset dir="${project.build.directory}/target" includes="**" />
                    </zip>
                </tasks>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

为确保编码正常，您可以使用`maven-enforcer-plugin`检查子文件夹和文件编码。

# javascript - 在书签中使用 RequireJS

> ID：15219846
> 
> 赞同：5
> 
> 时间：2013-03-05T09:13:40.520
> 
> 标签：javascript, requirejs, conflict

我使用 require js 创建了一个书签，它在所有网站上都很好，除了那些已经使用 requirejs 的网站。我在文档中搜索，我没有找到任何“无冲突模式”，如 jquery 或管理多个版本的东西。任何想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T11:22:10.357

在包含您的脚本之前，请检查是否定义了“require”对象。仅当对象未定义时才包含脚本

```
if(typeof require != 'undefined') {
   //include script
} 
```

# java - 有没有办法在不增加可见性的情况下使用私有变量进行单元测试？

> ID：15219848
> 
> 赞同：1
> 
> 时间：2013-03-05T09:13:49.983
> 
> 标签：java

我有一个我想测试的 MyClass。

我有一个要用于此的 TestMyClass 类。

在 MyClass 我有几个私有变量。

我想在 TestMyClass 中使用这些私有变量运行测试。

我可以将所有这些私有变量更改为公共变量，然后将它们用作 TestMyClass 中的对象，但是有没有办法在不增加这些变量的可见性的情况下进行测试？无需手动进入 TestMyClass，删除私有可见性标记并进入“公共”可见性市场。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:14:39.500

不建议直接测试私人成员。代码的设计方式应使这些私有成员将被公共（接口）方法间接调用（在您的情况下例如：您可以为成员变量设置 setter 和 getter）。

但是，如果您绝对想测试私有成员，则可以使用[Java 反射 API 。](http://docs.oracle.com/javase/6/docs/technotes/guides/reflection/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:15:41.530

为什么不提供 setter / getter 并使用它们而不是暴露变量？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T09:16:02.527

`setter and getters`对类中的私有属性使用 public

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T09:29:39.870

正如其他答案中所解释的，没有必要/不建议测试私有方法和/或访问私有字段。如果您真的想要/必须这样做，那么[PowerMock](https://code.google.com/p/powermock/)就是您要走的路。

如果您必须访问私有属性来设置它们，那么[Spring 的 ReflectionUtils](http://static.springsource.org/spring-framework/docs/3.2.0.M2/api/org/springframework/util/ReflectionUtils.html#setField%28java.lang.reflect.Field,%20java.lang.Object,%20java.lang.Object%29)会很有帮助。如果您使用的是 mockito，您还可以使用[@InjectMocks](http://docs.mockito.googlecode.com/hg/org/mockito/InjectMocks.html)注释，它将`@Mock`在测试对象的测试类中注入任何 -annotated 属性。

否则，仍然有可能更改`public`对 a`protected`或`package private`access 的访问，这将比`public`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T09:16:40.887

使用 getter/setter 与私有变量交互有什么问题？您可以在测试类中使用`setUp()`/`@Before`方法来设置您希望测试的状态。例如：

```
public class MyClass {
    private int myInt;
    public void setMyInt( int i ) { this.myInt = i; }
    public int getMyInt() { return this.myInt; }

    public void addsTo( int add ) { return myInt + add; }
    ...
}

public class TestMyClass {
    MyClass my = new MyClass();
    @Before public void setup() { my.setMyInt( 42 ); }
    @Test public void testIs42() { assertEqual( "MyInt is 42" , my.getMyInt() , 42 ); }
    @Test public void testAddsTo() { assertEqual( "addsTo() works" , my.addsTo( 10 ) , 52 ); }
} 
```

说得通？以这种方式，您只能通过公共方法与私有变量进行交互。该`addsTo()`示例旨在说明您通常会测试类公开的公共方法，而不是 getter/setter。

同样，我经常发现自己将方法可见性从私有更改为受保护，以允许测试类方法。

干杯，

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T09:17:19.470

一种解决方案是将它们标记为受保护，然后使用 MyClassTestSupport 使用 getter/setter 公开它们。但是，如果您的类是其他人的基类，则此模式效果不佳...

# android - 如何在Android中将列表视图显示为封面流

> ID：15219850
> 
> 赞同：0
> 
> 时间：2013-03-05T09:13:54.323
> 
> 标签：android, listview, coverflow

我是 Android 编程新手。我尝试使用以下链接旋转图像视图的封面流示例。 [http://www.codeproject.com/Articles/146145/Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

但我的要求是旋转多个列表视图数据。是否可以使用此轮播。请告诉我如何继续。

提前致谢。

# xslt - 使用 XSLT 包装元素，但不包括最后匹配的元素

> ID：15219852
> 
> 赞同：0
> 
> 时间：2013-03-05T09:13:57.737
> 
> 标签：xslt, xslt-1.0, xslt-grouping

我正在尝试将旧的 XML 文件转换为新的改进结构。其中一部分需要我将一些松散的元素包装到父容器中，以及修改它们的子容器

**旧结构**

```
<monograph>
  <title>asdf</title>

  <dosage.sec id="dosage.sec.1">
    <dosage.sec>asgfd</dosage.sec>
    <dosage.sec>asgfd</dosage.sec>
  </dosage.sec>
  <dosage.sec id="dosage.sec.2">
    <dosage.sec>asgfd</dosage.sec>
    <dosage.sec>asgfd</dosage.sec>
  </dosage.sec>
  <dosage.sec id="dosage.sec.3">
    <dosage.sec>asgfd</dosage.sec>
    <dosage.sec>asgfd</dosage.sec>
  </dosage.sec>

  <products>
    <prod>sadf</prod>
    <prod>sadf</prod>
  </products>
</monograph> 
```

**新结构**

```
<monograph>
  <title>asdf</title>

  <dosage>
    <dosage.sec id="dosage.sec.1">
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
    <dosage.sec id="dosage.sec.2">
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
    <dosage.sec id="dosage.sec.3">
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
  </dosage>

  <products>
    <prod>sadf</prod>
    <prod>sadf</prod>
  </products>
</monograph> 
```

我找到了这个[答案](https://stackoverflow.com/questions/3962161/how-can-i-wrap-a-group-of-adjacent-elements-using-xslt)并对其进行了一些修改以满足我的需要：

```
<!-- wrap dosage.sec elements in a dosage container -->
<xsl:template match="node()|@*" name="dosage.sec">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*" />
    </xsl:copy>
</xsl:template>

<xsl:template match="monograph/dosage.sec[not(preceding-sibling::*[1][self::dosage.sec])]">
    <dosage>
        <xsl:call-template name="dosage.sec" />
        <xsl:apply-templates mode="copy" select="following-sibling::*[1][self::dosage.sec]" />
    </dosage>
</xsl:template>

<xsl:template match="monograph/dosage.sec" mode="copy">
    <xsl:call-template name="dosage.sec"/>
</xsl:template>

<!-- rename children dosage.sec -->
<xsl:template match="dosage.sec/dosage.sec">
    <dosage.qual>
        <xsl:apply-templates />
    </dosage.qual>
</xsl:template> 
```

但我的输出是：

```
<monograph>
  <title>asdf</title>

  <dosage>
    <dosage.sec id="dosage.sec.1">
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
    <dosage.sec id="dosage.sec.2">
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
    <dosage.sec id="dosage.sec.3">
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
  </dosage>

  <dosage.sec id="dosage.sec.3">
    <dosage.qual>asgfd</dosage.qual>
    <dosage.qual>asgfd</dosage.qual>
  </dosage.sec>

  <products>
    <prod>sadf</prod>
    <prod>sadf</prod>
  </products>
</monograph> 
```

我正在使用 PHP5 的内置 XSLTProcessor 对象 - 所有 XML 和 XSL 都是 1.0 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:43:18.157

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="monograph">
    <xsl:copy>
      <dosage>
        <xsl:apply-templates select="@* | node()" />
      </dosage>
    </xsl:copy>
  </xsl:template>

  <!-- rename children dosage.sec -->
  <xsl:template match="dosage.sec/dosage.sec">
    <dosage.qual>
      <xsl:apply-templates />
    </dosage.qual>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<monograph>
  <dosage>
    <dosage.sec>
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
    <dosage.sec>
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
    <dosage.sec>
      <dosage.qual>asgfd</dosage.qual>
      <dosage.qual>asgfd</dosage.qual>
    </dosage.sec>
  </dosage>
</monograph> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:44:19.883

在此过程中我遇到了一些其他问题 - 其中之一，我发现 dose.sec 元素不在连续块中，并且我错误地创建了两个剂量容器。

这些模板解决了我的问题：

```
<!-- wrap dosage.sec elements in a dosage container -->
<xsl:template match="monograph/dosage.sec" name="dosage.sec">
    <xsl:param name="drugname" />

    <xsl:copy>
        <xsl:apply-templates>
            <xsl:with-param name="drugname" select="$drugname" />
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template>

<xsl:template match="monograph/dosage.sec[not(preceding::dosage.sec)]">
    <xsl:param name="drugname" />

    <dosage>
        <xsl:call-template name="dosage.sec">
            <xsl:with-param name="drugname" select="$drugname" />
        </xsl:call-template>

        <xsl:apply-templates mode="copy" select="following::dosage.sec">
            <xsl:with-param name="drugname" select="$drugname" />
        </xsl:apply-templates>
    </dosage>
</xsl:template>

<xsl:template match="monograph/dosage.sec" mode="copy">
    <xsl:param name="drugname" />

    <xsl:call-template name="dosage.sec">
        <xsl:with-param name="drugname" select="$drugname" />
    </xsl:call-template>
</xsl:template>

<xsl:template match="monograph/dosage.sec[(preceding::dosage.sec)]" /> 
```

# android - Android - 使用带有无序列表 html 标签的 Gmail 发送电子邮件

> ID：15219853
> 
> 赞同：1
> 
> 时间：2013-03-05T09:13:58.910
> 
> 标签：android, html, email, gmail

是否可以发送带有项目符号列表 html 标记的电子邮件？我尝试执行以下操作：

```
StringBuilder builder = new StringBuilder();
        builder.append("<html><body>" + label + "<br>" + "<ul>");
        for(int i = 0; i < list.size(); i++){
            builder.append("<li>" + wishes.get(i).getName() + "</li>");
        }
        builder.append("</ul></body></html>");

        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
        emailIntent.setType("text/html"); 
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList); 
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(builder.toString()));  
        startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

但我在 Gmail 中只看到文本而不是项目符号列表。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T09:49:15.997

`HTML.fromHtml()`不支持`<ul><ol><li>`标签引用[Html List 标签在 android textview 中不起作用。我能做些什么？](https://stackoverflow.com/questions/3150400/html-list-tag-not-working-in-android-textview-what-can-i-do)要解决此问题，您可以通过添加换行符、空格和项目符号来手动格式化列表

# objective-c - ObjectiveC的分配和初始化？

> ID：15219854
> 
> 赞同：0
> 
> 时间：2013-03-05T09:13:59.623
> 
> 标签：objective-c

当我在玩 Objective-C 时，我刚刚制作了一个简短的示例演示程序来取乐：

一些代码：

```
// TestClass.h:    
@interface TestClass : NSObject {
        int someNumber;
        float someFloat;

    }
    @property int someNumber;
    @property float someFloat;

    // Returns String containing some instance values:
    -(NSString *)getNiceString;
    // Returns always the same string:
    -(NSString *)getAnotherString;
    -(id)init;

    @end 
```

--

```
//TestClass.m:
#import "TestClass.h"

@implementation TestClass

@synthesize someFloat;
@synthesize someNumber;

-(NSString*) getNiceString{

    return [NSString stringWithFormat:
            @"Float number: %f and the number is: %d", self.someFloat, self.someNumber];
}

-(NSString *) getAnotherString{
    return [NSString stringWithString:@"TEST STRING"];
} 

-(id)init{
    self = [super init];
    if(self){
        self.someFloat = 100.34;
        self.someNumber = 324;

        return self;
    }
    return nil;
}
@end 
```

还有一些主要内容：

```
#import <Foundation/Foundation.h>
#import "TestClass.h"

int main (int argc, const char * argv[])
{

    @autoreleasepool {

        TestClass* instance = [TestClass alloc];
        // Version 2: 
        // TestClass* instance = [[TestClass alloc]init];

        NSLog(@"%@", [instance getNiceString]);
        NSLog(@"%@", [instance getAnotherString]);
    }
    return 0;
} 
```

当我`TestClass* instance = [TestClass alloc];`在 main 中使用时，输出是：

> 2013-03-05 09:56:34.767 ObjectiveTest[8367:903] 浮点数：0.000000，数字为：0 2013-03-05 09:56:34.770 ObjectiveTest[8367:903] 测试字符串

当使用第二个版本时（`TestClass* instance = [[TestClass alloc]init];`）：

> 2013-03-05 10:06:46.743 ObjectiveTest[8421:903] 浮点数：100.339996，数字为：324 2013-03-05 10:06:46.750 ObjectiveTest[8421:903] 测试字符串

The question is **if `[TestClass alloc]` makes any initialization stuff** (String is returned properly and values are zeros)... It is worth to mention that if I remove the `-(id)init:` implementation from TestClass.m the outputs for versions with `init` and without it are exactly the same... Is there any default initialization?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:19:34.073

alloc will zero out the memory region. More detail can be found here [What happens when alloc or allocWithZone is called?](https://stackoverflow.com/questions/8846646/what-happens-when-alloc-or-allocwithzone-is-called)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:16:51.080

`alloc` doesn't initialize the object correctly, and so must always be used.

The float isn't initialized correctly (`0.000 != 100.34`) and the string is the result of calling a method which returns a string literal, not an instance variable.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:20:50.967

> The question is if [TestClass alloc] makes any initialization stuff (String is returned properly and values are zeros)... It is worth to mention that if I remove the -(id)init: implementation from TestClass.m the outputs for versions with init and without it are exactly the same... Is there any default initialization?

alloc doesn't initialize any member, so if you just call alloc, then someFloat will not be initialized (default value will be 0.0). If you keep away your alloc method from your class implementation the same happens: someFloat will not be initialized and it will have a default value of 0.0 .

But calling just alloc and not init has many disadvantages: all the subclass initializers will not be called, thus you will not be able to use some NSObject's attributes, you shouldn't call just alloc. alloc-init is always used by convention.

# javascript - 使用backbone.js中的MVC从嵌套的json中获取特定数据

> ID：15219857
> 
> 赞同：0
> 
> 时间：2013-03-05T09:14:14.823
> 
> 标签：javascript, json, backbone.js

我知道使用backbone.js.below 是我嵌套的json 文件来制定简单的概念

```
 {
        "Re":
        {
            "Si":
            [
                {
                    "Def":
                    {
                        "StName": "Gau00",
                        "SID": "1",
                        "Parent": "",
                        "ParentID": "",
                        "Ty": "GAU",
                        "TypID": "2"
                    },
                    "Entities":
                    [
                        {
                            "EntityId": "2003",
                            "Index": "1",
                            "Value": "00"
                        },
                        {
                            "EntityId": "2006",
                            "Index": "1",
                            "Value": "B"
                        },
                        {
                            "EntityId": "2004",
                            "Index": "1",
                            "Value": "B"
                        },
                        {
                            "EntityId": "5",
                            "Index": "1",
                            "Value": "54"
                        },
                        {
                            "EntityId": "9007",
                            "Index": "1",
                            "Value": "1"
                        },
                        {
                            "EntityId": "9703",
                            "Index": "1",
                            "Value": "0"
                        }
                    ],
                    "Connections":
                    [
                        {
                            "SourceID": "2",
                            "DestinationID": "1"
                        }
                    ]
                },
                {
                    "Def":
                    {
                        "StName": "Tan",
                        "ID": "2",
                        "Parent": "",
                        "ParentID": "",
                        "Ty": "TA",
                        "TypID": "3"
                    },
                    "Entities": "",
                    "Connections":
                    [
                        {
                            "SourceElementID": "5",
                            "DestinationID": "2"
                        },
                        {
                            "SourceID": "2",
                            "DestinationID": "1"
                        }
                    ]
                }
        ]
     }  
   } 
```

现在有了StName，我必须使用backbone.js从这个嵌套的json中获取所有其他细节。谁能帮我出主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:57:03.307

首先将 JSON 字符串转换为 Javascript 对象，然后使用以下算法：

```
for each element in "Si":
   if element["Def"]:
       if element["Def"]["StName"] == "YOUR REQUIRED VALUE":
          return element["Def"] 
```

编写一个获取您的对象的函数，并遍历该对象并使用您所需的值检查 StName。如果条件为真，则返回当前对象。

# python - 如何在redis中存储一个复杂的对象（使用redis-py）

> ID：15219858
> 
> 赞同：80
> 
> 时间：2013-03-05T09:14:14.963
> 
> 标签：python, redis, redisjson

hmset函数可以设置每个字段的值，但是我发现如果值本身是一个复杂的结构化对象，从hget返回的值是一个序列化的字符串，而不是原来的对象

例如

```
images= [{'type':'big', 'url':'....'},
     {'type':'big', 'url':'....'},
     {'type':'big', 'url':'....'}]   

redis = Redis()
redis.hset('photo:1', 'images', images)

i = redis.hget('photo:1', 'images')
print type(i) 
```

i 的类型是字符串，而不是 python 对象，除了手动解析每个字段之外，还有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-12-05T12:39:05.483

实际上，您可以使用内置模块[pickle](http://docs.python.org/2/library/pickle.html)将 python 对象存储在 redis 中。

这是示例。

```
import pickle
import redis

r = redis.StrictRedis(host='localhost', port=6379, db=0)
obj = ExampleObject()
pickled_object = pickle.dumps(obj)
r.set('some_key', pickled_object)
unpacked_object = pickle.loads(r.get('some_key'))
obj == unpacked_object 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-09-09T18:01:38.337

如果您的数据是[JSON-serializable](https://stackoverflow.com/a/53112659/2125392)，那么这可能是比将 python pickle 保存到外部数据库更好的选择，因为它是 Python 之外更常见的标准，其本身更具可读性，并且避免了[相当大的攻击向量](https://stackoverflow.com/a/2259351/2125392).

**JSON 示例：**

```
import json
import redis

r = redis.StrictRedis(host='localhost', port=6379, db=0)

images= [
    {'type':'big', 'url':'....'},
    {'type':'big', 'url':'....'},
    {'type':'big', 'url':'....'},
]

# Convert python dict to JSON str and save to Redis
json_images = json.dumps(images)
r.set('images', json_images)

# Read saved JSON str from Redis and unpack into python dict
unpacked_images = json.loads(r.get('images'))
images == unpacked_images 
```

**蟒蛇3：**

```
unpacked_images = json.loads(r.get('images').decode('utf-8'))
images == unpacked_images 
```

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2013-03-05T09:20:37.803

您不能在 Redis 中创建嵌套结构，这意味着您不能（例如）将本机 redis 列表存储在本机 redis 哈希映射中。

如果你真的需要嵌套结构，你可能只想存储一个 JSON-blob（或类似的东西）。另一种选择是将“id”/key 存储到不同的 redis 对象作为映射键的值，但这需要多次调用服务器才能获取完整对象。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-02-01T02:58:45.670

我创建了一个库[SubRedis](https://github.com/softwaredoug/subredis)，它可以让您在 redis 中创建更复杂的结构/层次结构。如果你给它一个 redis 实例和一个前缀，它会给你一个几乎完全有能力和独立的 redis 实例。

```
redis = Redis()
photoRedis = SubRedis("photo:%s" % photoId, redis)
photoRedis.hmset('image0', images[0])
photoRedis.hmset('image1', images[1])
... 
```

SubRedis 只是将传递给它的字符串作为前缀添加到平面 redis 数据结构上。我发现这是一个方便的包装模式，我最终在 redis 中做了很多工作——预先添加一些 id 来嵌套一些数据。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-02-19T17:14:29.413

这是一个简单的 Redis 包装器，它可以腌制/取消腌制数据结构：

```
from redis import Redis
from collections import MutableMapping
from pickle import loads, dumps

class RedisStore(MutableMapping):

    def __init__(self, engine):
        self._store = Redis.from_url(engine)

    def __getitem__(self, key):
        return loads(self._store[dumps(key)])

    def __setitem__(self, key, value):
        self._store[dumps(key)] = dumps(value)

    def __delitem__(self, key):
        del self._store[dumps(key)]

    def __iter__(self):
        return iter(self.keys())

    def __len__(self):
        return len(self._store.keys())

    def keys(self):
        return [loads(x) for x in self._store.keys()]

    def clear(self):
        self._store.flushdb()

d = RedisStore('redis://localhost:6379/0')
d['a'] = {'b': 1, 'c': 10}
print repr(d.items())
# this will not work: (it updates a temporary copy and not the real data)
d['a']['b'] = 2
print repr(d.items())
# this is how to update sub-structures:
t = d['a']
t['b'] = 2
d['a'] = t
print repr(d.items())
del d['a']

# Here is another way to implement dict-of-dict eg d['a']['b']
d[('a', 'b')] = 1
d[('a', 'b')] = 2
print repr(d.items())
# Hopefully you do not need the equivalent of d['a']
print repr([{x[0][1]: x[1]} for x in d.items() if x[0][0] == 'a'])
del d[('a', 'b')]
del d[('a', 'c')] 
```

如果您更喜欢 redis 中的纯文本可读数据（pickle 存储它的二进制版本），您可以将 pickle.dumps 替换为 repr 并将 pickle.loads 替换为 ast.literal_eval。对于 json，使用 json.dumps 和 json.loads。

如果您总是使用简单字符串的键，则可以从键中删除酸洗。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-30T05:47:31.137

你可以使用`RedisWorks`图书馆。

`pip install redisworks`

```
>>> from redisworks import Root
>>> root = Root()
>>> root.something = {1:"a", "b": {2: 2}}  # saves it as Hash
>>> print(root.something)  # loads it from Redis
{'b': {2: 2}, 1: 'a'}
>>> root.something['b'][2]
2 
```

它将 python 类型转换为 Redis 类型，反之亦然。

```
>>> root.sides = [10, [1, 2]]  # saves it as list in Redis.
>>> print(root.sides)  # loads it from Redis
[10, [1, 2]]
>>> type(root.sides[1])
<class 'list'> 
```

免责声明：我写了这个库。这是代码：[https ://github.com/seperman/redisworks](https://github.com/seperman/redisworks)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-05-01T10:15:28.473

您可以将[RedisLabs](https://oss.redislabs.com/redisjson/)中的 RedisJSON 与[用于 python 的客户端一起](https://github.com/RedisJSON/redisjson-py)使用。它支持嵌套数据结构。对于这样的任务非常有用。

示例中的一些代码：

```
 # Set the key `obj` to some object
   obj = {
       'answer': 42,
       'arr': [None, True, 3.14],
       'truth': {
           'coord': 'out there'
       }
   }
   rj.jsonset('obj', Path.rootPath(), obj)

   # Get something
   print 'Is there anybody... {}?'.format(
       rj.jsonget('obj', Path('.truth.coord'))
   ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-08T06:32:55.210

我最近遇到了类似的用例。在 redis hash 中存储复杂的数据结构。

我认为解决此问题的最佳方法是将 json 对象序列化为字符串并将其存储为另一个对象的值。

**打字稿示例**

存储在 hashmap 中的对象

```
const payload = {
 "k1":"v1",
 "k2": "v2",
 "k3": {
     "k4":"v4",
     "k5":"v5"
  }
} 
```

将此有效负载存储为

```
await redis.hmset('hashMapKey', {somePayloadKey: JSON.stringify(payload) }); 
```

这可以检索为

```
 const result = await redis.hgetall('hashMapKey');
      const payload = JSON.parse(result.somePayloadKey); 
```

hmset 和 hgetall 是redis 中 HMSET 和 HGETALL 的[tedis](https://www.npmjs.com/package/tedis)等价物。

希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-20T07:55:22.063

```
 for saving object in redis first convert object into stringify JSON
 StringifyImages = json.dumps(images)
redis.set('images', StringifyImages)

# Read stringify object from redis and parse it 
ParseImages = json.loads(redis.get('images')) 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-03-21T21:43:49.267

您可以按原样存储结构并执行“评估”以将字符串转换为对象：

```
images= [{'type':'big', 'url':'....'},
 {'type':'big', 'url':'....'},
 {'type':'big', 'url':'....'}]   
redis = Redis()
redis.hset('photo:1', 'images', images)

i = eval(redis.hget('photo:1', 'images'))
print type(i) #type of i should be list instead of string now 
```

# java - Eclipse直接快捷方式而不是黄色弹出窗口？

> ID：15219864
> 
> 赞同：0
> 
> 时间：2013-03-05T09:14:28.223
> 
> 标签：java, eclipse, eclipse-cdt

如何删除必须在 F12 后按 Enter 才能进行实际导航的中间步骤？我不需要这个黄色弹出窗口告诉我有一个捷径供我使用。

![在此处输入图像描述](../Images/cdb582f5e04b558b243fb510dcd3c248.png)

![在此处输入图像描述](../Images/a0b5a0d21d66cede464ec5275f95fb2d.png)

在第二张图片中，您可以看到问题：我希望 F12 立即打开光标当前所在符号的定义/声明。Java需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:22:56.840

问题确实是同一个键的多个绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:28:01.400

您是否尝试将鼠标悬停在类型/方法上，然后按住 ctrl 并单击鼠标左键。

这是eclipse中的默认快捷方式。

编辑：抱歉，这应该是对您的问题的评论，而不是答案。

# zend-framework2 - 使用 ZF2 强制下载

> ID：15219873
> 
> 赞同：17
> 
> 时间：2013-03-05T09:14:42.073
> 
> 标签：zend-framework2, force-download

我正在尝试使用 ZF2 进行强制下载。这是我的代码的片段

```
 use Zend\Http\Request;
 .....
   public function downloadAction() {
     $response = new Request();
    $response->setHeaders(Request::fromString("Content-Type: application/octet-stream\r\nContent-Length: 9\r\nContent-Disposition: attachment; filename=\"ultimate_remedy_readme.txt\""));

} 
```

现在我收到这个错误

```
/var/www/whowantsmymoney/vendor/zendframework/zendframework/library/Zend/Http/Request.php:88 
```

信息：

```
A valid request line was not found in the provided string 
```

堆栈跟踪：

```
#0 /var/www/whowantsmymoney/module/Admin/src/Admin/Controller/LanguageController.php(93): Zend\Http\Request::fromString('Content-Type: a...') 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-05T16:26:48.923

此代码应该可以帮助您进行简单的文件下载。

```
public function downloadAction() {
    $fileName = 'somefile';

    if(!is_file($fileName)) {
        //do something
    }

    $fileContents = file_get_contents($fileName);

    $response = $this->getResponse();
    $response->setContent($fileContents);

    $headers = $response->getHeaders();
    $headers->clearHeaders()
        ->addHeaderLine('Content-Type', 'whatever your content type is')
        ->addHeaderLine('Content-Disposition', 'attachment; filename="' . $fileName . '"')
        ->addHeaderLine('Content-Length', strlen($fileContents));

    return $this->response;
} 
```

我想这段代码还有很多不足之处，但应该可以在简单的情况下工作，就像我的一样。我不确定您如何处理分块读取文件。也许其他人可以提供一些启示？

**编辑 - 发送流**

我已在此处添加此内容以供参考。这可能是强制下载的更好方法，因为它将使用更少的内存。

```
public function downloadAction() {
    $fileName = 'somefile';

    $response = new \Zend\Http\Response\Stream();
    $response->setStream(fopen($fileName, 'r'));
    $response->setStatusCode(200);

    $headers = new \Zend\Http\Headers();
    $headers->addHeaderLine('Content-Type', 'whatever your content type is')
            ->addHeaderLine('Content-Disposition', 'attachment; filename="' . $fileName . '"')
            ->addHeaderLine('Content-Length', filesize($fileName));

    $response->setHeaders($headers);
    return $response; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-21T11:15:49.093

感谢@Aydin Hassan 的回复，但他的回答中缺少几个重要的标题。小心那个。

完整的标题堆栈：

```
public function downloadAction() {
    $file = 'path/to/file';
    $response = new \Zend\Http\Response\Stream();
    $response->setStream(fopen($file, 'r'));
    $response->setStatusCode(200);
    $response->setStreamName(basename($file));
    $headers = new \Zend\Http\Headers();
    $headers->addHeaders(array(
        'Content-Disposition' => 'attachment; filename="' . basename($file) .'"',
        'Content-Type' => 'application/octet-stream',
        'Content-Length' => filesize($file),
        'Expires' => '@0', // @0, because zf2 parses date as string to \DateTime() object
        'Cache-Control' => 'must-revalidate',
        'Pragma' => 'public'
    ));
    $response->setHeaders($headers);
    return $response;
} 
```

# struts2 - RAD 中的 Struts 2

> ID：15219874
> 
> 赞同：2
> 
> 时间：2013-03-05T09:14:50.063
> 
> 标签：struts2, ibm-rad-7.5

Struts2 在 RAD 7.5.5 上工作吗？

我正在 RAD 中创建一个示例动态 Web 项目，并且我的 JSP 页面被调用，但是 Action 类没有被调用。

我收到以下错误：

```
Error 404: SRVE0190E: File not found: /hello 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:57:39.370

**它支持 Struts2**，就像所有其他第 3 方技术一样，但它不提供任何针对 Struts 1.3 的特定工具。

> Rational Application Developer 7.5 和 8.0 没有为 Struts 2.x 提供任何特定的工具（例如为 Struts 1.x 提供的工具）。
> 
> 例如，您需要自己从 Struts 网站获取 Struts 2.x 运行时文件，然后手动将它们添加到（并在其中配置）您打算在其中使用 Struts 2.x 的动态 Web 项目。
> 
> 注意：Struts 2.x 应用程序被视为标准的动态 Web 项目。
> 
> 来自：[http ://www-01.ibm.com/support/docview.wss?uid=swg21327401](http://www-01.ibm.com/support/docview.wss?uid=swg21327401)

**[您可以使用 RAD 7.5 指南使用 Struts 2.x 简介](http://www.webagesolutions.com/setupguides/WA1926SetupGuide.pdf)**验证您的安装（尽管标题与 S2 无关），

并从这里下载并运行一个[**模板项目，**](http://blog.webagesolutions.com/archives/360)从运行的东西开始。

顺便说一句，您似乎是配置错误，请从零开始检查您的 cfg，或使用模板。

# iframe - 浏览器上的后退/前进到 iframe 中的后退/前进

> ID：15219875
> 
> 赞同：1
> 
> 时间：2013-03-05T09:14:52.663
> 
> 标签：iframe, back

我们可以在浏览器上后退/前进，并在父页面（位于同一域上）内的 iframe 上实际后退/前进吗？

# iis - Linq to SQL 模拟

> ID：15219878
> 
> 赞同：0
> 
> 时间：2013-03-05T09:15:11.327
> 
> 标签：iis, linq-to-sql, impersonation, kerberos

我有一个 ASP.MVC 3.0 应用程序。我的解决方案包含一个 Linq to SQL 项目 (.dbml)。I0ve 选择将其放在不同的项目中，而不是放在 Web 应用程序项目中。我还有另一个“手动”连接到数据库（DAL）的项目。我在网络服务器上部署我的应用程序，激活模拟和 Kerberos 委托。DAL 的模拟工作正常，但由于未知原因，Linq to SQL 模拟无法正常工作。我错过了什么吗？这是 web 应用程序的 web.config：

```
 <identity impersonate="true"/> 
```

这是来自 Linq to SQl 项目的 app.config：

```
 <connectionStrings>
    <add name="testConnectionString"
        connectionString="Data Source=SERVERNAME;Initial Catalog=DBNAME;Integrated Security=True;"
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我是否错过了服务器配置或委托中的某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:27:21.580

这是我的项目中从 Linq 到 SQl 的 app.config：

`<connectionStrings> <add name="DefaultConnection" connectionString= "server=server name or ip addrress;database=dbname;uid=id;pwd=pass" providerName="System.Data.SqlClient" /> </connectionStrings>`

# javascript - 在 AngularJS 中将 JSON 元素转换为 Javascript 数组？

> ID：15219880
> 
> 赞同：0
> 
> 时间：2013-03-05T09:15:12.493
> 
> 标签：javascript, json, angularjs, javascript-framework

我正在使用 AngularJS 进行 $resource 调用以获取一些 JSON 格式的值。我的要求是我有一个模型元素需要一个 Javascript 数组的形式：

```
[
[1328983200000, 40],
[1328983200000, 33], 
[1328983200000, 25],
[1328983200000, 54],
[1328983200000, 26], 
[1328983200000, 25]
]; 
```

显示在 Flot 图表中。此信息包含在 JSON 中，如下所示：

```
{
"marks1":15,
"marks2":20,
"dailyMarks":{
"2013-02-27T07:25:35.000+0000":40,
"2013-03-01T07:25:35.000+0000":33,
"2013-02-26T07:25:35.000+0000":25,
"2013-02-23T07:25:35.000+0000":54,
"2013-03-03T10:12:59.000+0000":26,
"2013-03-02T07:12:59.000+0000":25},
} 
```

其中“dailyMarks”包含我需要的元素。我可以将“dailyMarks”转换为 Javascript 数组，但它似乎不起作用：（下面是我的控制器代码）

```
function MyController($scope, $resource) {

    var User = $resource('/marks/fetch?from=:from&to=:to', {from: inStartDate, to: inEndDate}, {
        getAll: {method: 'GET', isArray: false}
    });

    $scope.changeDate = function(fromDate, toDate) {
        $scope.marks = User.getAll({from: fromDate, to: toDate});
    };
    var imarks = User.getAll();
    $scope.marks = imarks;

    var list = imarks.dailyMarks, arr = [];

    for (var key in list) {
        arr.push([+new Date(key), list[key]]);
    }

    $scope.myModel = arr;
}; 
```

我究竟做错了什么？我在模型中得到空白 arr[] 。:( :( 请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:42:02.973

这里的问题是`$resource`服务是异步的，即使它的 API 可能暗示它是同步的。这个答案有关于这个主题的更多细节：[https ://stackoverflow.com/a/11966512/1418796](https://stackoverflow.com/a/11966512/1418796)

您应该做的是将您的数组后处理移动到对资源的​​调用的成功回调，类似于以下内容：

```
function MyController($scope, $resource) {

    var User = $resource('/marks/fetch?from=:from&to=:to', {from: inStartDate, to: inEndDate}, {
        getAll: {method: 'GET', isArray: false}
    });

    $scope.marks = User.getAll({from: fromDate, to: toDate}, function(marksFromServer){
      //post processing <-- goes HERE
    }
);
}; 
```

其他备注 - 您不断地在控制器中重新定义`User`资源，您应该将其移至工厂并注入`User`您的控制器。

# javascript - 成功方法不会在 Ajax 调用上触发

> ID：15219883
> 
> 赞同：0
> 
> 时间：2013-03-05T09:15:16.290
> 
> 标签：javascript, asp.net-mvc-3, c#-4.0, jquery

当我在下面运行它的代码`bttn click event`但`doesn't return a data for success method.` 它适用于控制器方法并返回 false（布尔值）作为输出。我需要从 javascript 代码中选择该布尔值。

为什么它不起作用？

Javascript代码如下：

```
 $('#btnClockInTime').off('click').on('click', function () {

                var isClockOutTimeCompleted = true;

                $.ajax({
                    url: "/Employees/IsClockOutTimeCompleted",
                    type: "GET",
                    dataType: "json",
                    cache: false,
                    data: { employeeId: employeeId },
                    success: function (data) {
                        if (!data) {
                            isClockOutTimeCompleted = data;
                        }
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert(xhr.status);
                        alert(thrownError);
                    }
                });

                return false;
            }); 
```

控制器动作方法如下：

```
 [HttpGet]
 public JsonResult IsClockOutTimeCompleted(Guid employeeId)
        {
            var clockingDate = Convert.ToDateTime(DateTime.Today);

            var isClockOutTimeCompleted = Repository.IsClockOutTimeCompleted(employeeId, clockingDate);

            return Json(isClockOutTimeCompleted, JsonRequestBehavior.AllowGet);
        } 
```

存储库代码如下：

```
public bool IsClockOutTimeCompleted(Guid employeeId, DateTime clockingDate)
        {
            var clockOutTime = (from c in Catalog.EmployeeClockInOutTimes
                                where (c.Employee.Id == employeeId && c.Created == clockingDate && c.ClockOut == null)
                                select c).FirstOrDefault();

            return clockOutTime == null;
        } 
```

**更新 ：**

响应如下：

![在此处输入图像描述](../Images/8ea663c70dbde2b4563b0939cc589192.png)

**更新 2：**

屏幕 1：

![在此处输入图像描述](../Images/a1111b6c4220ec85489385276e2a479c.png)

屏幕 2：

![在此处输入图像描述](../Images/1524f02a430217202790e5173d68addb.png)

屏幕 3：

![在此处输入图像描述](../Images/7a850e5441a398c1d7818d51385afa3d.png)

如上图所示，我的调试没有进入成功方法。在第二个屏幕之后（在调试时`error`）它进入控制器并带来数据。从控制器返回后，第三个屏幕显示状态。知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T07:33:59.930

如果您将数据发布到控制器方法总是使用

```
'type':'POST' in ur ajax call &
change the [HTTPget] attribute from ur controller method to [httpPost] 
```

下面是我的示例代码，它工作正常

```
 $.ajax({
            url: 'Home/temp',
            type: 'POST',
            dataType: "json",
            data: {'name':'surya'},
            success: function (data) {
                console.log(data);
             //here i'm getting the data which i have passed

            },
            error: function () {
                console.log("inside error")
            }
        }); 
```

和我的控制器代码

```
[HttpPost]
        public JsonResult temp(string name) {

            return Json(name);
        } 
```

我正在取回通过我的 jquery ajax 传递给控制器​​方法的数据..

可能您应该更改您正在执行 linq 查询的“IsClockOutTimeCompleted”方法。只需验证您的 linq 查询一次..以及您传递给控制器​​的employeeId 是整数类型，而不是 GUID 作为参数，为什么您不更改参数类型为 int 并查看..

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:32:09.787

我原以为如果您的返回值只是`false`一个字符串，那么它将成为您的`data`值，结果是：

```
if (!data) { // won't fire } 
```

正如 Darin 所说，如果您将响应 Json 包装在一个对象中，然后使用它分配给您的`isClockOutTimeCompleted`变量。

如果返回值是真/假返回类型，我不会想到您想要对返回值执行布尔评估，您不想将其分配给`isClockOutTimeCompleted`任何一种方式吗？

# jquery - Deferred 对象内的回调函数

> ID：15219891
> 
> 赞同：2
> 
> 时间：2013-03-05T09:15:37.383
> 
> 标签：jquery, deferred

我正在尝试学习一些 javascript 课程，其中有 Deferred 的实现。这是代码的核心

```
getData = function (options) {
  return $.Deferred(function (def) {

    var results = options.results;                    

    getFunction({
      success: function (smt) {                                
        results("test");
        def.resolve(results);
        debugger;
      },
      error: function (response) {                                    
        def.reject();
      }
    }); 

  }).promise();
}, 
```

现在的问题是..当我从外部调用这个函数时：

```
$.when(somthing.getData(options)).
   done(alert(options.results));

debugger; 
```

碰巧首先到达 $.when 调用之外的调试器，然后触摸 Deferred 对象内的回调 SUCCESS 函数内部的那个...

我不明白.. 不应该只在达到 def.resolve(results) 时才做出承诺？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:22:24.533

除了最后一行之外，一切都是正确的：

```
$.when(somthing.getData(options)).done(alert(options.results));
debugger; 
```

您在这里立即调用`alert`( 和`debugger`)。你想要的是`done`像这样传递一个回调：

```
$.when(somthing.getData(options))
.done(function(){
    alert(options.results);
    debugger;
}); 
```

# javascript - 使用斯坦福 Javascript 加密库理解 JavaScript 加密

> ID：15219892
> 
> 赞同：3
> 
> 时间：2013-03-05T09:15:40.467
> 
> 标签：javascript, html, encryption

[目前我使用的是Stanford Javascript Crypto Library](http://crypto.stanford.edu/sjcl/)，我需要先加密一些内容，然后再将其保存在 html5 和 JS 的本地存储中。

目前我使用这样的代码。

```
usernameEnc = sjcl.encrypt("password", username);
passwordEnc = sjcl.encrypt("password", password);
localStorage.username = usernameEnc;
localStorage.password = passwordEnc; 
```

我能够正确加密。由于我正在使用 JS 构建 HTML5 应用程序并且 JS 代码是在客户端下载的，如何保护 PASSWORD 以避免轻易解密脚本？

也许我错过了我有点困惑的点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:23:56.800

不幸的是，您无法保护您的密钥。它是 JavaScript，应该以某种方式下载以在浏览器中执行。您可以混淆密钥以使其有点困难，但具有一般知识的人将能够破解它。

我建议您可以使用用户密码加密内容。所以每次用户都应该输入密码来解密内容。

不要按原样使用用户密码。使用密钥派生函数，例如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)。[crypto-js 库](https://code.google.com/p/crypto-js/)中有一个 PBKDF2 的 JavaScript 实现。

无论如何，您应该知道的是，如果您的应用程序可以在客户端读取它，那么无论您如何努力保护它，有人确定也可以读取它。

# postgresql - 空日期的postgres表分区

> ID：15219896
> 
> 赞同：2
> 
> 时间：2013-03-05T09:15:44.747
> 
> 标签：postgresql, postgresql-9.1

我想知道这是否可能（如果可能的话，如何去做）

根据日期字段为空或不为空对 postgres 9.1 中的表进行分区。

如此有效，我有一张桌子，它变得非常大，我在那里有一个“delete_on”日期，当项目被删除时，它们只会被标记为已删除。

这将是归档它们并保持活动表较小的理想选择。

我在想一个表分区，只是有类似的东西

活动（delete_on = NULL）

存档（deleted_on！= NULL）

然后，当我对记录进行更新并将其设置为删除时，它将被写入存档表。

我可以通过创建两个单独的表并编写代码来复制数据来手动完成，但如果我可以直接将它放在数据库中，我会喜欢它。

有任何想法吗？

**编辑：**

**主表**

```
CREATE TABLE my_table (
    id              int not null,
    deleted         date not null,
    number1         int,
    number2         int
); 
```

**分区**

```
CREATE TABLE my_table_active (
  CHECK (deleted IS NULL)
) INHERITS (my_table);
CREATE TABLE my_table_archive ( 
  CHECK (deleted IS NOT NULL)
) INHERITS (my_table); 
```

**触发功能**

```
CREATE OR REPLACE FUNCTION my_table_insert_trigger()
RETURNS TRIGGER AS $$
BEGIN
    IF ( NEW.deleted IS NULL ) THEN
        INSERT INTO my_table_active VALUES (NEW.*);
    ELSE 
        INSERT INTO my_table_archive VALUES (NEW.*);

    END IF;
    RETURN NULL;
END;
$$
LANGUAGE plpgsql; 
```

**创建触发器**

```
CREATE TRIGGER insert_my_table_trigger
    BEFORE INSERT ON my_table
    FOR EACH ROW EXECUTE PROCEDURE my_table_insert_trigger(); 
```

（我从 Postgres 文档中获取了上述内容）

如果您正在对活动表中已经存在的字段进行更新，这将如何工作？

所以我在活动表中有一条记录（即删除为空），然后我将该记录设置为删除（通过给它一个日期戳）。那时我希望它移动到存档表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:49:24.660

`IS NULL`您可以在和上进行分区`IS NOT NULL`。

`= NULL`并且`!= NULL`两者总是导致`NULL`，因此它们发生冲突。你永远不会用`= NULL`SQL 编写，总是`a IS NULL`或`a IS DISTINCT FROM b`.

有关如何设置 PostgreSQL 的基于表继承的分区和关联的约束排除的详细信息，请参阅[文档](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)。

在任何情况下都不需要“编写代码来复制数据”。在最坏的情况下，您需要编写一个简单的`INSERT INTO newtable SELECT * FROM oldtable WHERE somefield IS NULL;`.

# android - 使用 SimpleCursorAdapter 的异步绑定

> ID：15219901
> 
> 赞同：0
> 
> 时间：2013-03-05T09:15:52.823
> 
> 标签：android, sqlite, adapter, android-contentprovider

我有一个`ListView`应该显示包含一些文本和图像的项目。

数据从本地`SQLite`db 文件（包含文本和图像 URL）加载。

我想：

*   从 DB 中获取文本、url。
*   从 URL 异步下载图片
*   将这两个值绑定到`ListView`（使用`SimpleCursorAdapter`）。

到目前为止，我能够从 DB 中读取值，但是我不确定只有在成功加载每个图像之后才能运行绑定？

换句话说，我想在加载到适当的 UI 项时异步绑定每个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:50:46.097

这是一个很好的例子，它展示了如何使用这个[http://www.androidkit.com/loading-images-from-remote-server-over-http-on-a-separate-thread](http://www.androidkit.com/loading-images-from-remote-server-over-http-on-a-separate-thread)。

简要地，

1）你需要有一个`Map<Url, Bitmap>`.
2) 有一个默认图像，当来自服务器的图像数据不可用时显示。
3）有 onScroll 监听器`ListView`，以了解当前显示的项目。
4）首先，下载正在显示的那些。
5) 下载图像后，调用`notifyDataSetChanged()`将可用图像绑定到视图。
6）你可以使用`Softreferences`或`LRUCache`避免`OutofMemoryException`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T10:20:03.633

我已经解决了与此类似的问题。我从服务器收到一个 XML 并将信息存储在数据库中。之后，我使用 CursorAdapter 填充了列表。就我而言，我既有图像又有文字。

为了解决光标适配器中的问题，我做了这样的事情：

```
@Override
public void bindView(View v, Context ctx, Cursor c) {
    TextView title =  (TextView) v.findViewById(R.id.titleID);
    title.setText(c.getString(c.getColumnIndex(yourColumName)));
    ImageView i =  (ImageView) v.findViewById(R.id.ImageID); 
    String s = c.getString(c.getColumnIndex(youtImageColumn));
    imageLoader.DisplayImage(s,i);
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    View v = inflater.inflate(R.layout.yourRowLayout, parent, false);
    return v;
} 
```

在这种情况下，ImageLoader 是从这里获得的异步延迟图像加载器： [https ://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

# java - 给定一个集合获取项目的类型（Java）

> ID：15219909
> 
> 赞同：0
> 
> 时间：2013-03-05T09:16:03.740
> 
> 标签：java, oop, reflection, introspection

我需要获取集合项目的类型。为了检索单个实例的类，我使用以下代码：

```
classUnderTest.getName() 
```

但是，我怎样才能检索以下集合的项目的类？

```
Collection collection = (Collection) getCollection.invoke(instance1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:21:44.540

由于通用擦除，Collection 对象不知道项目*必须*是什么类型，只知道它们现在是什么类型。根据您的需要，一种解决方案可能是艰难地完成它并找到集合中所有项目的最具体的超类（或超接口）。

但是，您*真的*需要知道收藏品的类型吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:22:10.823

由于[Type Erasure](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html) ，您**无法**在运行时获取/推断 Collection 的泛型类型。泛型用于编译时安全，类型信息在运行时被擦除。

在运行时，实例`Object`用于收集，它不关心运行时的实际类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:22:12.217

简短的回答是你不能。

泛型类型参数不记录为该类型实例（对象）的一部分。（阅读“[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)”......）此外，您的示例无论如何都使用原始类型。

您可以选择（非空）集合的某些元素并获取其类型，但它不会告诉您有关其他元素类型的任何信息。（它们可能相同......或不同。）如果集合为空或包含`null`引用，您甚至无法可靠地做到这一点。

无论如何，这将为您提供集合的第一个元素的类型。

```
 Collection c = ...
    Iterator it = c.iterator();
    if (c.hasNext()) {
        Class clazz = c.next().getClass();
        ...
    } 
```

您可以遍历整个集合并（有一些困难）找出它们都符合的公共类或接口。但即使这样也不一定与声明的元素类型相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:25:19.427

一般来说，你不能这样做。例如，该集合可能是空的或仅由空值组成。另外，接口呢？可能存在所有集合元素共有的多个接口。

但是，以下其中一项可能会对您的情况有所帮助：

1）**分析集合内容**：假设集合是非空的，扫描集合中的所有项目并找到它们在类层次结构中的最低共同祖先。

2）**获取泛型声明类型**：如果您正在检查的对象被声明为某个类的数据成员（带有泛型），您可以在运行时使用反射评估其声明的泛型类型（参见[Field.getGenericType()](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#getGenericType%28%29)）

- 编辑 -

只是为了练习，我实现了最低的共同祖先实用程序：

```
 public static Class<?> getLCA(Collection<?> c) {
        Class<?> res = null;
        for (Object obj : c)
            if (obj != null) {              
                Class<?> clazz = obj.getClass();
                res = (res == null)? clazz : getLCA(res, clazz);
            }

        return res;
    }

    private static Class<?> getLCA(Class<?> classA, Class<?> classB) {
        if (classA.isAssignableFrom(classB))
            return classA;
        if (classB.isAssignableFrom(classA))
            return classB;

        while (!classA.isAssignableFrom(classB))
            classA = classA.getSuperclass();

        return classA;
    } 
```

效率：O(n*h)，其中 n 是集合大小，h 是类层次结构中集合项的最大深度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T09:25:57.730

你不能。在 Java 中，无法在运行时检索泛型类型。它被称为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

但是您可以遍历`Collection`并获得最通用的类​​型。但即使你这样做了，你也无法将该类型作为泛型类型传递。

您最好的选择是禁止警告并确保没有任何非法内容传递到方法中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T09:38:40.763

[从大多数人所说的帖子中，答案非常明显......也就是说，由于类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，您无法在运行时获取/推断 Collection 的泛型类型

但是，我想证明这意味着什么

假设`we create a class MyClass`并这样做

```
Collection<String> collection = new ArrayList<String>();

public static void main(String[] args)  {

    Field stringListField = null;
    try {
        stringListField = MyClass.class.getDeclaredField("collection");
        ParameterizedType stringListType = (ParameterizedType) stringListField.getGenericType();
        Class<?> stringListClass = (Class<?>) stringListType.getActualTypeArguments()[0];
        System.out.println(stringListClass); 

    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    }
} 
```

它将打印**class java.lang.String**作为结果......这意味着它能够推断 Collection 对象何时使用正确的泛型参数 Collection

但是，如果我们说，

```
Collection<?> collection = new ArrayList<String>(); 
```

然后它会编译得很好但是在运行时你会得到以下异常..

```
sun.reflect.generics.reflectiveObjects.WildcardTypeImpl cannot be cast to java.lang.Class 
```

这是运行时类型擦除引发的异常

# java - 重复的局部变量 Object[] JOptionPane

> ID：15219913
> 
> 赞同：1
> 
> 时间：2013-03-05T09:16:08.863
> 
> 标签：java, eclipse, variables, duplicates

我在我的代码中使用 JOptionPane 并且我有这个块：

```
Object[] move = { "Up", "Down" };
Object moveValue = JOptionPane.showInputDialog(null,
"Where do you want to move?", "Input",
JOptionPane.INFORMATION_MESSAGE, null, move,
move[0]); 
```

我多次使用上面的块，我在想，有没有办法给

```
Object[] move; 
```

新的价值观。当我尝试时

```
Object[] move = { "Up", "Down", "Left" }; 
```

它说`"Duplicate local variable move"`，当我尝试

```
move = { "Up", "Down", "Left" }; 
```

它给出了错误`"Array constants can only be used in initializers"`。

那么有没有办法让我多次使用我的变量“移动”？

编辑：

代码的更大部分是

```
 while (true) {
        switch(hero.getPos()) {
        case 1:
            Object[] move = { "Up", "Down" };
            Object moveValue = JOptionPane.showInputDialog(null,
                    "Where do you want to move?", "Input",
                    JOptionPane.INFORMATION_MESSAGE, null, move,
                    move[0]);
            move = null;
            switch ((String) moveValue) {
            case "Üles":
                hero.setPos(hero.getPos() + 1);
                break;
            case "Paremale":
                hero.setPos(hero.getPos() + 5);
                break;
            }
            break;
        case 2:
            System.out.println("Draakon!!!!");
            dragon = new Dragon(1);
            fight = new Fight(hero, dragon);
            break;
        case 3:
            System.out.println("hallo!");
            move = { "Up", "Right", "Left" }; 
```

所以我在第四行和最后一行都定义了“移动”。最后一个给出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:38:15.037

试试这个

```
Object[] move = { "Up", "Down" };

...

move = new Object[]{ "Up", "Down", "Left" }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:27:27.860

尝试使用 LinkedList 而不是数组

看到这种方法：

```
 LinkedList<Object> link = new LinkedList<Object>();//needs java.util.*; as import
   link.add("Left");
   link.add("right");
        Object moveValue = JOptionPane.showInputDialog(null,
                "Where do you want to move?", "Input",
                JOptionPane.INFORMATION_MESSAGE, null, link.toArray(),
                link.get(0).toString());
        System.out.println(moveValue);
        link.add("Down");
         moveValue = JOptionPane.showInputDialog(null,
                "Where do you want to move?", "Input",
                JOptionPane.INFORMATION_MESSAGE, null, link.toArray(),
                link.get(0).toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:19:49.717

您可以为每个变量的用途设置更详细且*唯一的名称。*`move[]`您还可以小心地使用空白代码块来提供更小的范围：

```
{
    Object[] move = {...};
    ...
}
...
{
    Object[] move = {...};
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:31:26.480

嗯，你的问题可以参考java数组初始化。当您编写这样的代码时`Object[] move = { "Up", "Down" };`，您应该静态初始化数组。因此，如果您再次尝试这样做`move = { "Up", "Down", "Left" };`，则意味着您将再次初始化数组，这是非法的。因此，您将收到一条错误消息。如果要创建对要多次使用的对象数组的引用，则可以编写类似的代码，`Object[] move=new Object[count]`并且必须给出不可变数组的长度...如果要更改其中的一个元素，请使用索引或者您像提到的那样编写另一个代码并将其设置为参考。喜欢`Object[] move2=new Object[count];move=move2;`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T09:33:30.337

您应该改用列表，例如 ArrayList。

```
Object[] move = { "Up", "Down" };
ArrayList<Object> list = new ArrayList<>();
for(Object o : move) list.add(o);
// When you need it
list.add("Left");
// To use it with JOptionPane
Object[] finalMoves = list.toArray(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-05T09:19:40.593

试试这个方法

```
 Object[] move = { "Up", "Down" };

.... some code

    move = { "Up", "Down", "Left" }; 
```

# xml - 是否允许自定义 XML 元素？

> ID：15219914
> 
> 赞同：2
> 
> 时间：2013-03-05T09:16:10.740
> 
> 标签：xml, xml-validation

是否允许使用 XML 中的自定义元素，fe`<foo>`还是`<bar>`？

我想用 HTML 和 JS 创建一个基于 XML 的 Slider，它的内容应该可以通过 XML 进行编辑。在那里，我想创建一个不仅仅是内容的 XML 文件。应该在其中定义 Transitiontypes 和 Transitionspeed。它可能看起来类似于以下内容：

```
<slider>
  <layer image="../path/to/image" fromoffset="-50,-50" tooffset="100,100" transition="moveup">
    <object image="../path/to/image" fromoffset="-50,-50" tooffset="100,100" transition="moveright"></object>
    // The Object could be an image moving into the image
  </layer>
</slider> 
```

有什么要考虑的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:13:36.623

XML 中允许自定义元素，但在 HTML 中“一切都取决于”。您可能会发现此链接很有用：

[https://developer.mozilla.org/en/docs/Using_XML_Data_Islands_in_Mozilla](https://developer.mozilla.org/en/docs/Using_XML_Data_Islands_in_Mozilla)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T15:19:40.233

XML 是用于构建标记语言的工具包（具有设计者希望的元素和属性）。

如果你正在设计语言，你可以添加任何你喜欢的元素。

如果不是，那么您可以查看[命名空间](http://en.wikipedia.org/wiki/XML_namespace)来创建一个由来自不同标记语言的位组成的文档（您开始使用的一种，以及您发明的具有新元素和属性的一种）。

无论哪种方式，都必须编写处理 XML 的软件，以便它可以处理您正在生成的内容。

# ios - 自动将 UIScrollView 内容大小设置为滚动视图大小

> ID：15219920
> 
> 赞同：1
> 
> 时间：2013-03-05T09:16:36.460
> 
> 标签：ios, objective-c, ios6, uiscrollview

我正在使用**自动布局（iOS6）**。我的滚动视图`ContentSize`是`(768,1200)`（我正在使用 ipad），我设置在`ViewDidAppear`. 我对此有另一种看法`ViewController`。您可以在下面看到我的视图层次结构。

另一个视图被隐藏。

问题是当我显示和隐藏另一个视图时，它将滚动视图设置`ContentSize`为滚动视图的帧大小。

![查看控制器场景](../Images/0fa3730fe4f38954467e232ae9d30eda.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T08:30:28.170

您必须检查您的约束以查看它们是否“绑定”。

如果您使用情节提要，您可以单击所需的元素并添加或删除约束。

例如，尝试选择您的视图然后转到`editor > pin > width`（和高度）。

这应该解决它。

Ps：有时Xcode会添加一些不需要的约束，特别是如果你移动对象，约束会“重置”。

# c# - 使用正则表达式替换而不是字符串替换

> ID：15219925
> 
> 赞同：2
> 
> 时间：2013-03-05T09:16:46.940
> 
> 标签：c#, asp.net, regex

我对 Regex 的了解并不多，所以这似乎是一个愚蠢的问题。

我将 a 拆分`string`为`string[]`with `.Split(' ')`。
目的是检查单词，或替换任何单词。

我现在遇到的问题是，对于要替换的单词，它必须是**完全匹配**的，但是按照我拆分它的方式，拆分后的单词可能有`(`or `[`。

到目前为止，为了解决这个问题，我正在使用这样的东西：
`formattedText.Replace(">", "> ").Replace("<", " <").Split(' ')`.

现在这很好用，但我想合并更多特殊字符，例如`[;\\/:*?\"<>|&']`.

有没有比我的替换方法更快的方法，比如正则表达式？我觉得我的路线远非最佳答案。

**EDIT**
`This is an (example) string`
将被替换为
`This is an ( example ) string`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T22:07:23.393

如果你想替换整个单词，你可以用这样的正则表达式来做到这一点。

```
string text = "This is an example (example) noexample";
string newText = Regex.Replace(text, @"\bexample\b", "!foo!"); 
```

`newText`将包含`"This an !foo! (!foo!) noexample"`

这里的关键是`\b`单词中断元字符。所以它将匹配一行的开头或结尾，以及单词字符 (\w) 和非单词字符 (\W) 之间的转换。它与使用 \w 或 \W 之间的最大区别在于它们不会在行的开头或结尾匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:06:01.733

我觉得这是你想要的正确的东西

如果你想要这些 -> ;\/:*?"<>|&' 符号来替换

```
string input = "(exam;\\/:*?\"<>|&'ple)";
        Regex reg = new Regex("[;\\/:*?\"<>|&']");
        string result = reg.Replace(input, delegate(Match m)
        {
            return " " + m.Value + " ";
        }); 
```

如果要替换除 a-zA-Z0-9_ 之外的所有字符

```
 string input = "(example)";
        Regex reg = new Regex(@"\W");
        string result = reg.Replace(input, delegate(Match m)
        {
            return " " + m.Value + " ";
        }); 
```

# php - symfony2 命令太多数据内存限制

> ID：15219929
> 
> 赞同：2
> 
> 时间：2013-03-05T09:16:55.287
> 
> 标签：php, memory, symfony, doctrine-orm

我创建了一个命令来为我的应用程序创建事件。该命令创建了 700 多个事件，一切正常。

但每场活动都应该有超过 250 位宾客。这意味着，我必须在一个 php 进程中插入超过 175000 个客人。

我已经阅读了很多关于批处理和性能优化的内容以使这项工作正常进行。

但是客座创作需要太多的记忆，创作也需要很多时间。我测试的任何更改都没有提高性能。

有人知道我可以如何创建我的数据吗？

这是代码：

```
// create Events
.
.
.
$events = array(); //List of Events load from the database
$amountG = 250;
$countGuests = 0;
foreach($events as $event){

    for($i=0;$i<$amountG;$i++){                

        $guest = null;
        $guest = $this->createGuest($event); //creates a guest object with random testdata                
        $countGuests++;
        $guest->setPublickey(PublickeyUtils::generatePublickey($countGuests));
        $em->persist($guest);
        if($countGuests%5000 == 0){            
            $em->flush();            
            $em->clear();            
            gc_collect_cycles();
        }

        $glEntry = null;
        unset($glEntry);
    }               
    $event = null;
    unset($event);
}

$em->flush();            
$em->clear(); 
```

每次刷新都需要 3% 的内存，因此这意味着，所有 175.000 个条目将永远不会被刷新，因为已达到内存限制。

每 5000 个条目需要超过 10 秒。增加冲洗量会使我变慢。

我还做的是使用选项调用脚本`--env=prod and -no-debug`以防止记录。

使其工作性能更高的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:15:39.883

解决方案是在没有任何对象的情况下进行插入：

```
$em->getConnection()->insert('entity', $array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:42:26.877

根据您当前设置的内容，您还可以考虑增加 php 的[memory limit](http://www.php.net/manual/en/ini.core.php#ini.memory-limit "php内存限制手册页")。

# iphone - 如何用另一个字符串替换单个字符串中的多个公共子字符串？

> ID：15219930
> 
> 赞同：2
> 
> 时间：2013-03-05T09:17:01.090
> 
> 标签：iphone, ios, objective-c, macos

```
 for(int i= 0 ;i<[urlsArrray count]; i++)
    {
        NSString *urlString = [urlsArrray objectAtIndex:i];
        NSString *escapedUrlString = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSURL *url = [NSURL URLWithString:escapedUrlString];

        NSString *urlstring1 = [url absoluteString];
        NSArray *parts = [urlstring1 componentsSeparatedByString:@"/"];
        NSString *fileName = [parts objectAtIndex:[parts count]-1];

        NSMutableString *tempString = [NSMutableString stringWithString:fileName];

       // [tempString replaceCharactersInRange:[tempString rangeOfString:@"%20"] withString:@" "];

                NSLog(@"file name in temp string: %@ word name: %@", tempString, wordNameDB);

                NSRange match = [tempString rangeOfString:wordNameDB];
                if(match.location != NSNotFound)
                {
                    NSLog(@"match found at %u", match.location);
                    isAvailable = YES;
                    break;
                } 
```

嗨朋友们，现在我的问题是我从服务器获取文件名......，如果文件名有任何空格，那么它会替换 '%20' （例如：“hello world”是实际名称，但我得到的文件名是：“你好%20world”）。1\. 我不确定所有文件名都有空格。2\. 而且我也不确定一个文件可能只有一个空格

所以首先我必须检查文件是否有空格，如果有那么我想用@“”字符串替换所有“%20”。请给我任何建议或代码片段。

或者“还有其他方法可以读取文件名而不用在空格（@”“）的位置获取“%20”......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:18:41.037

如果您将文件名存储在`fileName`param 中，则可以使用以下内容：

```
fileName = [fileName stringByReplacingOccurrencesOfString:@"%20" withString:@" "]; 
```

上面的代码将全部替换`"%20"`为`" "`. 如果 中没有`"%20"`，`fileName`您将返回相同的字符串。

**更正：** 我对代码中提到的内容感到困惑，`stringByAddingPercentEscapesUsingEncoding`并认为您已经使用过`stringByReplacingPercentEscapesUsingEncoding`. 如果您不使用`stringByReplacingPercentEscapesUsingEncoding`方法，则应在这种情况下使用该方法。上面的代码很有用，只有当它不能删除你想要替换的任何特定字符串时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:23:02.427

您需要的是根据编码替换转义字符。使用它，您的所有空格和其他 URL 编码字符都将转换为您需要的字符。

```
[@"yourString" stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:23:15.480

> 有任何其他方式来读取文件名而不用在空格（@“”）的地方得到 '%20'

是的，使用这个：

```
NSString *newString = [yourstring stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T09:28:26.770

用它来删除空格..

urlString = [urlString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:35:11.487

您似乎已经有一个`NSURL`代表该文件的有效对象。从 URL 获取文件名很简单：

```
...
NSURL *url = [NSURL URLWithString:escapedUrlString];
NSString *path = [url path];
NSString *filename = [path lastPathComponent]; 
```

无需摆弄未转义的百分比转义、URL 解析和其他容易出错的东西。

# cron - 每 10 百万设置一个从 7.30 到 18.30 的 cron 表达式，其中包括一个出生的

> ID：15219932
> 
> 赞同：0
> 
> 时间：2013-03-05T09:17:02.037
> 
> 标签：cron, cronexpression

是否可以编写一个表达式以获得这种行为：

*   每 1000 万次在 7.30 开火，直到 18.30 结果：7.40, 7.50, 8.00, 8.10 ........ 18.10, 18.20, 18.30

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:23:43.690

三个条目-：

```
 0,10,20,30,40,50 8-17 * * * command
 30,40,50 7 * * * command
 0,10,20,30 18 * * * command 
```

# android - Nexus 4 通知 LED 不亮

> ID：15219933
> 
> 赞同：1
> 
> 时间：2013-03-05T09:17:04.580
> 
> 标签：android, android-notifications, led

以下代码在装有 Android 2.3.3 的摩托罗拉 Defy 上运行良好，但不适用于 Nexus 4。LED 本身应该没问题，市场上的应用程序颜色 LED 测试仪可以工作。

```
NotificationManager notif =  (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
final Notification notification = new Notification();
notification.ledARGB = Color.RED;
notification.ledOnMS = 1000;
notification.ledOffMS = 300;
notification.flags |= Notification.FLAG_SHOW_LIGHTS;    
notif.notify(1, notification); 
```

有人知道这里有什么诀窍吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:24:33.610

我刚刚在我的 Nexus 4 上测试了你的代码，它可以工作。但是在考试之前我已经锁定了我的手机。可能此 LED 仅在屏幕关闭时才会突出显示。

# database - Django 自定义唯一一起约束

> ID：15219938
> 
> 赞同：6
> 
> 时间：2013-03-05T09:17:18.283
> 
> 标签：database, django, validation, postgresql, unique-constraint

我有一个用户共享模型，如下所示：

```
class Share( models.Model ):
    sharer = models.ForeignKey(User, verbose_name=_("Sharer"), related_name='sharer')
    receiver = models.ForeignKey(User, verbose_name=_("Receiver"), related_name='receiver')

    class Meta:
        unique_together = ( ("sharer", "receiver"), ("receiver", "sharer") ) 
```

我想为共享者（S）和接收者（R）保存一个对象（顺序与RS或SR无关）。但以上 unique_together 将无法实现这一点；假设 RS 在数据库中，然后如果我保存 SR，我将不会对此进行验证。为此，我为 Share 模型编写了自定义唯一验证。

```
 def validate_unique(
        self, *args, **kwargs):
            super(Share, self).validate_unique(*args, **kwargs)
            if self.__class__.objects.filter( Q(sharer=self.receiver, receiver=self.sharer) ).exists():
                raise ValidationError(
                    {
                        NON_FIELD_ERRORS:
                        ('Share with same sharer and receiver already exists.',)
                    }
                )

    def save(self, *args, **kwargs):
        # custom unique validate
        self.validate_unique()
        super(Share, self).save(*args, **kwargs) 
```

这种方法在正常使用中效果很好。

**问题：** 我有一个匹配算法，它获取共享和接收者的请求并保存共享对象（SR 或 RS），然后***几乎同时***向它们发送响应（共享对象） 。当我使用查询检查重复（无数据库级别）时，这需要时间，所以最后我有 2 个对象 SR 和 RS。

我想要一些解决方案，对于共享者 S 和接收者 RI 只能保存单个共享对象，SR 或 RS 否则会得到一些验证错误（如数据库的 IntegrityError）。

Django=1.4，数据库=Postgresql

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:43:10.290

您可能可以使用 postgresql 解决此问题，`indexes on expressions`但这是另一种方法：

```
class Share( models.Model ):
    sharer = models.ForeignKey(User)
    receiver = models.ForeignKey(User), related_name='receiver')
    key = models.CharField(max_length=64, unique=True)

    def save(self, *args, **kwargs):
        self.key = "{}.{}".format(*sorted([self.sharer_id, self.receiver_id]))
        super(Share, self).save(*args, **kwargs) 
```

`QuerySet.update`但是如果你用方法改变值，它显然是行不通的。您也可以查看[django-denorm](https://github.com/initcrash/django-denorm)，它通过触发器解决了这个问题。

# ios6 - uitextfield 中的自定义笑脸

> ID：15219944
> 
> 赞同：2
> 
> 时间：2013-03-05T09:17:45.463
> 
> 标签：ios6, uitextfield, chat, xcode4.5, emoji

我使用以下代码在 uitextfield 中显示笑脸。

```
stringWithSmiley = [stringWithSmiley stringByReplacingOccurrencesOfString:@":)"
                                    withString:@"\ue415"
                                    options:NSCaseInsensitiveSearch
                                    range:range]; 
```

我搜索并发现每个笑脸/表情符号图标都有自己的 id，基于此我们可以在文本字段中显示它。

**我的疑问是：** 是否可以创建自定义笑脸？如果是，那么我们如何在文本字段中显示它？

如果任何人有想法，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:07:28.830

请试试这个 [我如何在 UILabel 中插入图像，或者让它看起来像我一样？](https://stackoverflow.com/questions/11400329/how-can-i-insert-an-image-in-a-uilabel-or-make-it-look-like-i-did) 通过使用它，您可以自定义。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:41:00.620

试试这个 ：

```
- (BOOL) textField: (UITextField *)theTextField shouldChangeCharactersInRange: (NSRange)range replacementString: (NSString *)string {   

NSRange range = {NSNotFound, 0};
NSString *s = @"This is a smiley :)";

range.location = 0;
range.length = [s length];
s = [s stringByReplacingOccurrencesOfString:@":)"
                                    withString:@"\ue415"
                                    options:NSCaseInsensitiveSearch
                                    range:range];

  } 
```

# extjs - 如何在 extjs4 中调用动态设置的代理类型？

> ID：15219945
> 
> 赞同：4
> 
> 时间：2013-03-05T09:17:46.140
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.2

我在 extjs4 MVC 中工作。我将停留在我将动态代理类型设置为“localstorage”的地方，我将替换我的代理类型，即在模型类中声明的“ajax”。当我想在客户端存储数据时，我将模型代理类型从 ajax 更改为 locastorage。但是当我在特定模型对象上调用 save() 方法时，数据将发送到服务器端而不是保存在客户端。请给我一些建议

1）这是我的模型数据类

```
Ext.define('Am.model.sn.UserModel',{
    extend: 'Ext.data.Model',
    fields: ['userId','firstName','middleName','lastName','languageId','primaryEmail','birthDate','password','securityQuestionId','securityQuestionAnswer','isMale','creationTime','ipAddress','confirmationCode','userStatusId',],
    proxy:
    {
        type:'ajax',
        api:
        {
            read:'index.php/SocialNetworking/user/AuthenticateLogin',
            create:'index.php/SocialNetworking/user/AuthenticateLogin',
        },//end of api
        reader:
        {
            type:'json',
        },//end of reader
        writer:
        {
            type:'json',
            root:'records',
        },//End of writer
    }//end of proxy
}); 
```

2）这是我的一些控制器文件代码

```
Ext.define('Am.controller.sn.UserController',
        {

            extend:'Ext.app.Controller',

            stores:['sn.UserStore','sn.SecurityquestionStore'],
            models:['sn.UserModel','sn.SecurityquestionModel'],
            views:['sn.user.Login','sn.user.Registration','sn.user.ForgetMyKey','sn.user.SecurityQuestion','sn.user.KpLogin'],
            -----
            ----
            init:function()
            {
                --------
            }
            remeberMe:function()
{
    console.log("check box selected");
    var email=this.getUserName().getValue();
    var password=this.getPassword().getValue();
    var objCheckBox=Ext.getCmp('checkbox');
    if(objCheckBox.getValue()==true)
    {
        window.localStorage.clear();
        //code for stoaring data at local storage
        var modelObject = Ext.ModelManager.create(
        {
            primaryEmail:email,
            password: password,
        }, 'Balaee.model.sn.UserModel');
        proxy=modelObject.getProxy();
        //proxy=modelObject.getProxy();
        proxy.type='localstorage';
        //proxy.set(type,'localstorage');
        proxy.id='rememberMe';
        //proxy.set(id,'rememberMe');
        //modelObject.setProxy(proxy);
        //console.log("models proxyyyyyyyyyy="+modelObject.getProxy().type+""+modelObject.getProxy().id);

        modelObject.setProxy(proxy);
        //
        I am also trying this but not work
        //Ext.apply(proxy,{type:'localstorage',id:'remember' });

        modelObject.save();
            // code to hide login window
            //var obj=Ext.ComponentQuery.query('#loginId');
            //console.log("Object name = "+obj[0].id);
            //obj[0].hide();
    }//end of if statement
    else
    {
        console.log("check box is not selected");
    }//end of else statement
},//End of rememberMe  function

        }); 
```

请给我一些建议......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:00:51.457

我创建了一个示例代码，以便更好地理解切换代理。

```
//Defining model
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [{name: 'name',  type: 'string'}]
});
//creation of ajax proxy
var ajaxProxy = new Ext.data.proxy.Ajax({
    id: 'ajaxp',
    reader: 'json'
});
//creation of local storage proxy
var lsProxy = new Ext.data.proxy.LocalStorage({
    id: 'localp',
    reader: 'json'
});
//Create instance of model
var user = Ext.create('User', {
    name : 'Pravin Mane',
    proxy: ajaxProxy //sets the ajax proxy
});

//Somewhere in your code
user.setProxy(lsProxy); //sets the localstorage proxy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:23:10.930

`setProxy()`您可以使用在上定义的方法设置代理`Ext.data.Model`。

# asp.net-mvc - 从 JQuery 渲染部分视图

> ID：15219953
> 
> 赞同：0
> 
> 时间：2013-03-05T09:18:10.623
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是一名桌面开发人员，我正在用 C# 自学 ASP.NET MVC3（还不能使用 MVC4 ......）。出于这个原因，我将一些小的虚拟项目放在一起。在这个项目中，我使用了带有电影类别的 DropDownListFor（我们都知道这个例子对吧？）。但是由于本教程进行得太快，我正在尝试做一些更简单的事情。

我的模型：

```
public class MovieModel {

    public int SelectedCategorieID { get; set; }

    public List<CategorieModel> Categories { get; set; }

    public MovieModel() {
        this.SelectedCategorieID = 0;
        this.Categories = new List<CategorieModel>() {new CategorieModel {ID = 1,
            Name = "Drama"},
        new CategorieModel {ID = 2,
            Name = "Scifi"}};
    }
}

public class CategorieModel {
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

看？非常简单。我有一个强类型视图，我可以在其中使用这个模型：

```
@model MvcDropDownList.Models.MovieModel (1st line of Index.cshtml). 
```

当调用 Home 控制器的默认操作时，模型被填充：

```
 public ActionResult Index() {

        ViewBag.Message = "Welcome to ASP.NET MVC!";

        Models.MovieModel mm = new Models.MovieModel();

        return View(mm);
    } 
```

到现在为止还挺好。没问题。现在我想用不显眼的 ajax 在部分视图中向用户显示它选择的类别的 ID……因为我没有让它工作，所以我开始的时候更小了。现在忘记DrowpdownList。我现在只有这个按钮：

```
<input type="button" value="Minicart test" onclick="categoryChosen();" /> 
```

这个div：

```
<div id="minicart">
    @Html.Partial("Information")
</div> 
```

迷你推车的东西来自另一个教程，我很抱歉。请不要让它分散你的注意力。

这个javascript：

```
function categoryChosen() {
    var url = "Home/CategoryChosen/" + "2";
    $.post(url, function (data) {
        debugger;
        $("#miniCart").html(data);
    });
} 
```

2 确实很坚固，从我之前尝试让它工作开始。最终我希望它是可变的...

调用此操作：

```
 [AcceptVerbs("POST")]
    public ActionResult CategoryChosen(string SelectedCategorieID) {

        ViewBag.messageString = "2";

        return PartialView("Information");

    } 
```

是的，你没看错。我只是插入 2 进行测试。因为就像我说的，不能让它工作。部分视图信息如下所示：

```
@{
    ViewBag.Title = "Information";
}

<h2>Information</h2>
<h2>You selected: @ViewBag.messageString</h2> 
```

所以，现在是一个大问题。我希望部分视图呈现：“您选择：2”。我什至在调试 javascript 并查看变量“数据”中的内容时看到了这一点。谁能帮我为什么它不渲染2？然后我可以继续自学这些东西。非常感谢您的帮助。如果您错过任何类型的信息，请随时询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:33:22.460

我认为问题在于 minicart div 的 id 拼写错误。您的 id 不包含任何大写字母，但您的选择器包含。因此，您应该使用 $("#miniCart") 而不是 $("#miniCart") 并且它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:22:35.160

让它像这样并检查它是否有效

```
function categoryChosen() {
    var url = "Home/CategoryChosen?SelectedCategorieID=" + "2";
    $.post(url, function (data) {
        debugger;
        $("#miniCart").html(data);
    });
} 
```

考虑到您没有对 global.asax 中的路由器进行任何更改，这是提供的

相反，您应该像这样添加网址

[网址助手](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action%28v=vs.108%29.aspx)

# javascript - 如何以通用样式排列文本框

> ID：15219957
> 
> 赞同：1
> 
> 时间：2013-03-05T09:18:21.260
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

我的任务是创建用于对齐文本框的代码。我有一个主 div。里面有很多子 div。这些子 div 没有正确对齐。我想使用 jquery 对齐这些 div 而无需编辑子 div。我该怎么做？我的代码是

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Jquery-Align</title>
  <script type='text/javascript' src='http://code.jquery.com/jquery-1.9.1.js'></script>
  <script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
  <script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
 $(function() {
  $("#tabs").tabs();
});
});//]]>  

</script>
  </head>
<body>
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nithin</a> </li>
    <li><a href="#tabs-2">Vipin</a></li>
  </ul>
  <div id="tabs-1">
    <div id="maindiv">
        <div>
            <label>Name:</label>
            <input type="text" name="name" value=""/>
        </div>
        <div>
            <label>Age:</label>
            <input type="text" name="name" value=""/>
        </div>
        <div>
            <label>Email:</label>
            <input type="text" name="name" value=""/>
        </div>
        <div>
            <label>Phone:</label>
            <input type="text" name="name" value=""/>
        </div>
    </div>  
  </div>
  <div id="tabs-2">
    <p>Vipin</p>
  </div>
</div>

</body>
</html> 
```

[您可以在http://jsfiddle.net/CG6Vw/](http://jsfiddle.net/CG6Vw/)上查看我的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:24:15.063

一切都应该使用适当的工具来完成。只需为您的任务使用超级简单的 CSS：

```
#maindiv > div {
    padding-bottom: 10px;
}
#maindiv > div > b {
    width: 80px;
    display: inline-block;
} 
```

[http://jsfiddle.net/CG6Vw/1/](http://jsfiddle.net/CG6Vw/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T11:16:33.340

用于`min-width`标记

```
#maindiv div{
    display:inline-block;
    padding:0 6px 8px 0
}
#maindiv b{
    display:inline-block;
    min-width:80px; 
    width:auto
} 
```

[演示](http://jsfiddle.net/CG6Vw/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:21:46.320

如果按照您的要求看起来没问题，试试这个——

[泰伯](http://www.barelyfitz.com/projects/tabber/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:32:44.160

如果你不想使用 css，你也可以使用 jQuery

```
$(function() {
    $("#tabs").tabs();
    $('#maindiv > div > b').each(function(){
         $(this).attr('style','width: 60px; display: inline-block;');
    });
}); 
```

但是你仍然在使用风格:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T09:56:27.227

你想要这样的东西吗兄弟：[JSFiddle Demo](http://jsfiddle.net/CG6Vw/3/)

**HTML**

```
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nithin</a> </li>
    <li><a href="#tabs-2">Vipin</a></li>
  </ul>
  <div id="tabs-1">
    <div id="maindiv">
        <div>
            <label>Name:</label>
            <input type="text" name="name" value="" class="field" />
        </div>
        <div>
            <label>Age:</label>
            <input type="text" name="name" value="" class="field" />
        </div>
        <div>
            <label>Email:</label>
            <input type="text" name="name" value="" class="field" />
        </div>
        <div>
            <label>Phone:</label>
            <input type="text" name="name" value="" class="field" />
        </div>
    </div>  
  </div>
  <div id="tabs-2">
    <p>Vipin</p>
  </div>
</div> 
```

**css**

```
label, input[type="text"]{
    float:left;
    display:block;
}
label
{
    margin-right: 5px;
}
.field{
    width:100%;
    overflow:auto;
    margin:5px 0px;
} 
```

**jQuery**

```
$(function() {
  $("#tabs").tabs();
    var max = 0;
    $("label").each(function(){
        if ($(this).width() > max)
            max = $(this).width();    
    });
    $("label").width(max);
}); 
```

# linux - 使用命令行工具进行海量 XML 编辑

> ID：15219961
> 
> 赞同：1
> 
> 时间：2013-03-05T09:18:29.437
> 
> 标签：linux, command-line, sed, awk

我有数百个 xml 文件，我想在特定位置对其进行一次性编辑。在每个 xml 文件中的某个地方，我都有一些看起来像这样的东西。

```
 <SomeTag
     attribute1 = "foo"
     attribute2 = "bar"
     attribute3 = "lol"/> 
```

属性的数量和它们的名称会根据文件而变化，但`SomeTag`不会。我想在最后一个属性之后添加另一个属性。

我意识到以这种方式编辑 xml 很愚蠢，但这只是我想做的一项临时工作`sed`，但我无法弄清楚多行的用法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:23:25.547

我会使用转换样式表和标识模板 (XSLT)。

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>
<xsl:template match="SomeTag">
  <xsl:copy>
    <xsl:attribute name="newAttribute">
      <xsl:value-of select="'whatever'"/>
    </xsl:attribute>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

这将复制整个 XML，但将运行为您的“SomeTag”定义的模板。

取自[这里](http://www.xmlplease.com/xsltidentity)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:49:52.650

您可以使用 XML 外壳[xsh](https://metacpan.org/module/PAJAS/XML-XSH2-2.1.6/xsh)：

```
for my $file in { glob "*.xml" } {
    open $file ;
    for //SomeTag set @another 'new value' ;
    save :b ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:55:55.777

如果您的输入文件真的那么简单且格式一致：

```
$ cat file
foo
   <SomeTag
     attribute1 = "foo"
     attribute2 = "bar"
     attribute3 = "lol"/>
bar

$ gawk -v RS='\0' -v ORS= '{sub(/<SomeTag[^/]+/,"&\n     attribute4 = \"eureka\"")}1' file
foo
   <SomeTag
     attribute1 = "foo"
     attribute2 = "bar"
     attribute3 = "lol"
     attribute4 = "eureka"/>
bar 
```

# ruby-on-rails - simplecov gem 代码覆盖率

> ID：15219965
> 
> 赞同：1
> 
> 时间：2013-03-05T09:18:42.097
> 
> 标签：ruby-on-rails, ruby, code-coverage, minitest

我使用 minitest 框架进行测试，使用 simplecov gem 进行代码覆盖。我有关于 simplecov 的问题。我的问题是这样的：

我写了一个模型测试。当我使用**rake minitest:models**运行测试时，测试运行和覆盖率显示 %100。但是当我使用**bundle exec rake**运行测试时，相同测试的代码覆盖率显示缺失。

我在网上进行研究。有些人对simplecov也有这样的问题。但我找不到解决方案。我在等你的想法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:34:12.363

您是否`simplecov`通过在`SimpleCov.start`代码之上执行操作来启用？

这作为第一条语句是必需的，即在您的代码之前，否则您将永远无法使用它。

还包括[SimpleCoV 适配器](https://github.com/michaeledgar/simplecov-gem-adapter)。

按照[generation-code-coverage-metrics-for-a-ruby-on-rails-project-with-simplecov](http://www.stormconsultancy.co.uk/blog/development/tools-plugins/generating-code-coverage-metrics-for-a-ruby-on-rails-project-with-simplecov/)的帖子，使用 SimpleCov 放置条件定义规则：

```
SimpleCov.start do
  # rules here
end if ENV["COVERAGE"] 
```

然后通过指定覆盖率变量按需运行覆盖率：

```
COVERAGE=true bundle exec rake spec 
```

# sharepoint - 如何以编程方式从共享点站点获取所有文档库的列表

> ID：15219968
> 
> 赞同：3
> 
> 时间：2013-03-05T09:18:54.130
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, splist

我正在使用下面的代码，它给了我列表和文档库；但我正在尝试获取仅文档库的列表。请帮助我如何以编程方式区分列表和文档库

```
using(SPSite oSite = new SPSite("https://server/site"))
    {
        using (SPWeb oWeb = oSite.OpenWeb())
        {
            SPListCollection oLists = oWeb.Lists;

            foreach (SPList olist in oLists)
            {
                Response.Write(olist.Title+"<br>");

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T09:40:27.647

看到[这个帖子](https://stackoverflow.com/questions/4606533/how-to-get-all-document-libraries-but-form-templates-style-customized-reports)

### 试试这种方法：

```
using(SPSite oSite = new SPSite("https://server/site"))
{
  using (SPWeb oWeb = oSite.OpenWeb())
  {
      SPListCollection docLibraryColl = oWeb.GetListsOfType(SPBaseType.DocumentLibrary);

      foreach (SPList list in docLibraryColl)
      {
             Response.Write(list.Title+"<br>");
      }
  }
} 
```

希望它有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T09:30:24.320

尝试这样的事情

```
using(SPSite oSite = new SPSite("https://server/site"))
{
    using (SPWeb oWeb = oSite.OpenWeb())
    {
        SPListCollection oLists = oWeb.Lists;

        foreach (SPDocumentLibrary olist in oLists.OfType<SPDocumentLibrary>())
        {
            Response.Write(olist.Title+"<br>");

        }
    }
} 
```

# mysql - 将许多 txt 文件加载到 mysql db

> ID：15219970
> 
> 赞同：2
> 
> 时间：2013-03-05T09:18:57.317
> 
> 标签：mysql, database, jdbc, mysql-workbench, workbench

我想使用工作台将 7000 条由 txt 文件组成的记录作为数据类型 BLOB 存储在我的数据库中。

但：

**1.**不知道怎么自动做？我是否应该将所有文件放在一个目录中，然后编写一个脚本将它们一个一个地插入并插入到足够的行中？

**2.**我不确定BLOB是否适合这种类型的文件存储？后来我想用 GUI 连接我的数据库，所以点击后，应该可以在新窗口中打开每个 txt 文件。

你能建议我如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:25:07.383

你应该写一个脚本，是的。如果您很难将它们全部放在一个文件夹中，我认为有脚本和工具可以做到这一点。

您可以使用 C#、PHP 或任何其他语言来扫描这些文件，然后将它们插入数据库。

一堆教程：

[http://www.csharp-examples.net/get-files-from-directory/](http://www.csharp-examples.net/get-files-from-directory/) [使用 C# 将记录插入 MySQL 数据库](https://stackoverflow.com/questions/5021425/inserting-record-in-to-mysql-database-using-c-sharp) [http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL](http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL)

[http://net.tutsplus.com/articles/news/scanning-folders-with-php/](http://net.tutsplus.com/articles/news/scanning-folders-with-php/) [http://www.homeandlearn.co.uk/php/php13p3.html](http://www.homeandlearn.co.uk/php/php13p3.html)

Blob 应该这样做，需要大约 20 兆字节的文本。

# c# - 具有自定义字段的语气解析器

> ID：15219976
> 
> 赞同：3
> 
> 时间：2013-03-05T09:19:22.680
> 
> 标签：c#, parsing, sprache

我有一个报表服务器，它需要解析一个带有一些参数的字符串，这些参数控制报表中的内容。

我正在使用解析器库语言来帮助解决这个问题。一切都很好，除了我坚持的一件事。

我有一个时间过滤器，它可以是以下值之一：今天、昨天、上周、上个月、无或自定义。

习惯让我有些悲伤。所有其他的只是简单的字符串。Custom 之后还有一个 from 和 to 属性。

```
 private static readonly Parser<DataFilterEntity> TimeFilter =
        from filter in Parse.String("today").Return(DataFilterEntity.Today)
            .Or(Parse.String("yesterday").Return(DataFilterEntity.Yesterday)
            .Or(Parse.String("last week").Return(DataFilterEntity.LastWeek)
            .Or(Parse.String("last month").Return(DataFilterEntity.LastMonth)
            .Or(Parse.String("none").Return(DataFilterEntity.None))
            .Or(Parse.String("custom").Return(DataFilterEntity.Custom())))))
        select filter; 
```

自定义行是问题所在。我需要解析“自定义”字符串，然后解析 from 和 to DateTime 字段并将它们传递给 DataFilterEntity.Custom(from, to)

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T10:06:30.187

您需要先为 DateTime 创建一个解析器，然后再为您的自定义类型创建一个解析器。这是一个“可能可行的最简单的事情”示例。您可能希望 DateTimeParser 在它接受的值方面更加具体。我不知道您的 DataFilterEntity 的构造函数是什么样的，所以我猜想:)

```
public static readonly Parser<DateTime> DateTimeParser =
    from day in Parse.Number
    from s1 in Parse.Char('/')
    from month in Parse.Number
    from s2 in Parse.Char('/')
    from year in Parse.Number
    select new DateTime(int.Parse(year), int.Parse(month), int.Parse(day));

public static readonly Parser<DataFilterEntity> CustomParser =
    from a1 in Parse.String("custom").Token()
    from fromDateTime in DateTimeParser.Token()
    from toDateTime in DateTimeParser.Token()
    select new DataFilterEntity(fromDateTime.ToShortDateString() + " -> " + toDateTime.ToShortDateString());

public static readonly Parser<DataFilterEntity> TimeFilter =
    Parse.String("today").Return(DataFilterEntity.Today)
        .Or(Parse.String("yesterday").Return(DataFilterEntity.Yesterday)
        .Or(Parse.String("last week").Return(DataFilterEntity.LastWeek)
        .Or(Parse.String("last month").Return(DataFilterEntity.LastMonth)
        .Or(Parse.String("none").Return(DataFilterEntity.None))
        .Or(CustomParser))));

public void TestIt()
{
    var result = TimeFilter.Parse("custom 21/3/2013 10/4/2013");
    Console.Out.WriteLine("result.Value = {0}", result.Value);
} 
```

# node.js - 在节点 js 应用程序中全局共享 mongodb 连接对象

> ID：15219977
> 
> 赞同：1
> 
> 时间：2013-03-05T09:19:22.980
> 
> 标签：node.js, mongodb

当我在整个应用程序中调用 db.open 或 db.connect 时，如何共享返回的 db 对象？

我有一个 dbconnect.js 模块，如下所示：

```
var mongodb = require('mongodb');
var global_db  = '';

// Define options. Note poolSize.
var serverOptions = {
   'auto_reconnect': true,
   'poolSize': 5
};

// Now create the server, passing our options.
var serv = new mongodb.Server('localhost', 27017, serverOptions);

// At this point, there is no connection made to the server.

// Create a handle to the Mongo database called 'myDB'.
var dbManager = new mongodb.Db('myDB', serv);

// NOW we initialize ALL 5 connections:
dbManager.open(function (error, db) {
  // Do something with the connection.
  global_db = db;
  // Make sure to call db.close() when ALL connections need
  // to be shut down.
  db.close();
});

function getConnection()
{
   return global_db;
} 

exports.getConnection = getConnection; 
```

我在我的 app.js 中使用这个 dbconnect.js 作为：

```
var http = require('http');
var db = require('./dbconnect').getConnection();
var collection = db.collection('testcollection');
console.log(db);
console.log(collection);

var server = http.createServer();

server.on('request',route);

server.listen(8000,'127.0.0.1');

console.log('Server running at http://127.0.0.1:8000');

function route(request,response)
{
    var url = request.url;
    var doc = {};
    doc[url] = 'ok';
    collection.insert(doc,{w:1},function(err,result)
        {
            if(err) console.log(err);
            else console.log(result);
        });
} 
```

在控制台中，db 和 collection 变量显示空值，我还尝试删除 dbconnect.js 中的 db.close() 调用，但没有用，但是当我将其放在 dbManager 中的 dbconnect.js 文件中时，插入工作。打开功能，我该怎么做？或任何类似的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:31:27.720

你不能这样做，因为 dbManager.open( 是异步方法，但你试图从模块同步获取数据。

尝试这个：

在 dbconnect.js 中

```
var on_db_ready = null;
module.exports = {
                db_ready:function(db_ready_callback){
                     on_db_ready = db_ready_callback;
                     //here we call callback if already have db
                     if (global_db) on_db_ready(global_db);
                 },
                 getConnection:getConnection
                };
dbManager.open(function (error, db) {
 if (on_db_ready) on_db_ready(db);
  global_db= db;
}) 
```

在 app.js 中：

```
var db = require('./dbconnect').db_ready(function(db){
  //Here i have my database
  //or can use getConnection method
}); 
```

这不是很漂亮的方式，但是，我希望，解释你的错误

# javascript - 如何使用箭头键在gridview中转到不同的文本框

> ID：15219979
> 
> 赞同：4
> 
> 时间：2013-03-05T09:19:29.280
> 
> 标签：javascript, jquery

我有一个gridview，每行有3个文本框。如果我按下向下箭头，它应该转到下一行文本框如果我按向上键，那么它应该转到上一行文本框。左右箭头键相同。

这是我的代码。

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $("body").keydown(function (e) {
            var row;
            debugger;
            if (e.keyCode == 39) {
                row = $(this).closest('td').next();
                row.find('input').focus();
            }
            else if (e.keyCode == 37) {
                row = $(this).closest('td').prev();
                row.find('input').focus();
            }
            else if (e.keyCode == 40) //down arrow key code
            {
                row = $(this).closest('tr').next();
                row.closest('td').next().find('.masked').focus();
            }
            else if (e.keyCode == 38) // up arrow key code
            {
                row = $(this).closest('tr').next();
                row.closest('td').prev().find('.masked').focus();
            }
        }); //this code detect is it up or down arrow
    });

</script> 
```

HTML 派生代码

```
' <tr>
<td style="width:1%;">
<td style="width:3%;">
<td style="width:3%;">
<td style="width:3%;">
<td style="width:3%;">
<td style="width:5%;">
<input id="ContentPlaceHolderMain_grdDistanceLog_txttime_0" class="masked ui-mask" type="text" style="width:50px;display:block;" maxlength="8" name="ctl00$ContentPlaceHolderMain$grdDistanceLog$ctl02$txttime">
<span id="ContentPlaceHolderMain_grdDistanceLog_lbltime_0" style="display:none;"></span>
</td>
<td style="width:3%;">
<td style="width:3%;">
<td style="width:3%;">
<td style="width:3%;">
<td style="width:7%;">
<td style="width:3%;">
<td style="width:4%;">
</tr>
<tr class="alt">
<td style="width:1%;">
<td style="width:3%;">
<td style="width:3%;">
<td style="width:3%;">
<td style="width:3%;">
<td style="width:5%;">
<input id="ContentPlaceHolderMain_grdDistanceLog_txttime_1" class="masked ui-mask" type="text" style="width:50px;display:block;" maxlength="8" name="ctl00$ContentPlaceHolderMain$grdDistanceLog$ctl03$txttime">
<span id="ContentPlaceHolderMain_grdDistanceLog_lbltime_1" style="display:none;"></span>
</td>
<td style="width:3%;">' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:37:01.823

如果没有 HTML，这比它本来可以做的更多的猜测，但似乎 row.closest('td').next() 没有得到你正在寻找的 TD。

尝试： ...

```
{
    row = $(this).closest('tr').next();
    row.find('td').find('.masked').focus();
}
else if (e.keyCode == 38) // up arrow key code
{
    row = $(this).closest('tr').next();
    row.find('td').find('.masked').focus();
} 
```

编辑：有了 HTML，在我看来，手头的问题是 $(this) 不是您当前关注的元素，正如您所期望的那样，而是 $(document)，您正在触发 keydown事件。尝试先选择焦点元素：

```
$(document).ready(function () {
    $("body").keydown(function (e) {
        var row;
        var focusedElement = $(document.activeElement);
        debugger;
        if (e.keyCode == 39) {
            row = $(focusedElement).closest('td').next();
            row.find('input').focus();
        }
        else if (e.keyCode == 37) {
            row = $(focusedElement).closest('td').prev();
            row.find('input').focus();
        }
        else if (e.keyCode == 40) //down arrow key code
        {
            row = $(focusedElement).closest('tr').next();
            row.find('td').find('.masked').focus();
        }
        else if (e.keyCode == 38) // up arrow key code
        {
            row = $(focusedElement).closest('tr').next();
            row.find('td').find('.masked').focus();
        }
    });
}); 
```

# c++ - 使用矢量 作为缓冲区而不在 resize() 上初始化它

> ID：15219984
> 
> 赞同：32
> 
> 时间：2013-03-05T09:19:38.090
> 
> 标签：c++, boost, c++11

我想`vector<char>`用作缓冲区。该界面非常适合我的需求，但是在将其调整为超出当前大小时会降低性能，因为内存已初始化。我不需要初始化，因为在任何情况下数据都会被一些第三方 C 函数覆盖。有没有办法或特定的分配器来避免初始化步骤？请注意，我确实想使用，而不是像and之类的`resize()`其他技巧，因为我需要在任何时候始终表示我的“缓冲区”的显着大小，而在 a 之后可能大于它的大小，所以，我不能再依赖作为我申请的重要信息。此外，向量的（新）大小永远不会提前知道，所以我不能使用`reserve()``capacity()``size()``capacity()``resize()``capacity()``std::array`. 如果无法以这种方式配置 vector，我想知道我可以使用哪种容器或分配器来代替`vector<char, std::alloc>`. 唯一的要求是vector的替代品最多必须基于STL或Boost。我可以访问 C++11。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-05T10:00:27.607

这是一个已知问题，即使是显式地也无法关闭初始化`std::vector`。

人们通常实现自己的`pod_vector<>`，不做任何元素的初始化。

另一种方法是创建一个与 char 布局兼容的类型，其构造函数不执行任何操作：

```
struct NoInitChar
{
    char value;
    NoInitChar() noexcept {
        // do nothing
        static_assert(sizeof *this == sizeof value, "invalid size");
        static_assert(__alignof *this == __alignof value, "invalid alignment");
    }
};

int main() {
    std::vector<NoInitChar> v;
    v.resize(10); // calls NoInitChar() which does not initialize

    // Look ma, no reinterpret_cast<>!
    char* beg = &v.front().value;
    char* end = beg + v.size();
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-05T09:51:03.820

标准库中没有任何内容可以满足您的要求，我在 boost 中也一无所知。

我能想到三个合理的选择：

*   暂时坚持`std::vector`下去，在代码中留下评论，如果这会导致您的应用程序出现瓶颈，请返回它。
*   使用带有空`construct`/`destroy`方法的自定义分配器 - 并希望您的优化器足够聪明，可以删除对它们的任何调用。
*   围绕一个动态分配的数组创建一个包装器，仅实现您需要的最小功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-16T09:06:11.107

作为与不同 pod 类型的向量一起使用的[替代解决方案：](https://godbolt.org/z/JXsUlZ)

```
template<typename V>
void resize(V& v, size_t newSize)
{
    struct vt { typename V::value_type v; vt() {}};
    static_assert(sizeof(vt[10]) == sizeof(typename V::value_type[10]), "alignment error");
    typedef std::vector<vt, typename std::allocator_traits<typename V::allocator_type>::template rebind_alloc<vt>> V2;
    reinterpret_cast<V2&>(v).resize(newSize);
} 
```

然后你可以：

```
std::vector<char> v;
resize(v, 1000); // instead of v.resize(1000); 
```

这很可能是[UB](https://en.wikipedia.org/wiki/Undefined_behavior)，即使它适用于我更关心性能的情况。[clang](https://godbolt.org/z/JXsUlZ)生成的程序集的差异：

```
test():
        push    rbx
        mov     edi, 1000
        call    operator new(unsigned long)
        mov     rbx, rax
        mov     edx, 1000
        mov     rdi, rax
        xor     esi, esi
        call    memset
        mov     rdi, rbx
        pop     rbx
        jmp     operator delete(void*)

test_noinit():
        push    rax
        mov     edi, 1000
        call    operator new(unsigned long)
        mov     rdi, rax
        pop     rax
        jmp     operator delete(void*) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T09:51:25.987

封装它。

将其初始化为最大大小（非保留）。

如您所说，保留对表示*实际大小*结束的迭代器的引用。

使用`begin`and`real end`代替`end`, 用于您的算法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-21T14:59:48.940

所以总结一下stackoverflow上的各种解决方案：

1.  使用特殊的默认初始化分配器。（[https://stackoverflow.com/a/21028912/1984766](https://stackoverflow.com/a/21028912/1984766)）
    *缺点：*将矢量类型更改为`std::vector<char, default_init_allocator<char>> vec;`
2.  `struct NoInitChar`在具有空构造函数的 char 周围使用包装结构，因此跳过值初始化（ [https://stackoverflow.com/a/15220853/1984766](https://stackoverflow.com/a/15220853/1984766)）
    *缺点：*将向量类型更改为`std::vector<NoInitChar> vec;`
3.  暂时将其`vector<char>`转换为`vector<NoInitChar>`并调整其大小（[https://stackoverflow.com/a/57053750/1984766](https://stackoverflow.com/a/57053750/1984766)）
    *缺点：*不会更改向量的类型，但您需要调用`your_resize_function (vec, x)`而不是`vec.resize (x)`.

在这篇文章中，我想指出所有这些方法都需要由编译器进行优化，以加快您的程序。我可以确认调整大小时新字符的初始化确实被我测试的每个编译器优化掉了。所以一切看起来都不错......
**但是**--> 由于方法 1 和 2 改变了向量的类型，当您在更“复杂”的情况下使用这些向量时会发生什么。
考虑这个例子：

```
#include <time.h>
#include <vector>
#include <string_view>
#include <iostream>

//high precision-timer
double get_time () {
    struct timespec timespec;
    ::clock_gettime (CLOCK_MONOTONIC_RAW, &timespec);
    return timespec.tv_sec + timespec.tv_nsec / (1000.0 * 1000.0 * 1000.0);
}

//method 1 --> special allocator
//reformated to make it readable
template <typename T, typename A = std::allocator<T>>
class default_init_allocator : public A {
private:
    typedef std::allocator_traits<A> a_t;
public:
    template<typename U>
    struct rebind {
        using other = default_init_allocator<U, typename a_t::template rebind_alloc<U>>;
    };
    using A::A;

    template <typename U>
    void construct (U* ptr) noexcept (std::is_nothrow_default_constructible<U>::value) {
        ::new (static_cast<void*>(ptr)) U;
    }
    template <typename U, typename...Args>
    void construct (U* ptr, Args&&... args) {
        a_t::construct (static_cast<A&>(*this), ptr, std::forward<Args>(args)...);
    }
};

//method 2 --> wrapper struct
struct NoInitChar {
public:
    NoInitChar () noexcept { }
    NoInitChar (char c) noexcept : value (c) { }
public:
    char value;
};

//some work to waste time
template<typename T>
void do_something (T& vec, std::string_view str) {
    vec.push_back ('"');
    vec.insert (vec.end (), str.begin (), str.end ());
    vec.push_back ('"');
    vec.push_back (',');
}

int main (int argc, char** argv) {
    double timeBegin = get_time ();

    std::vector<char> vec;                                 //normal case
    //std::vector<char, default_init_allocator<char>> vec; //method 1
    //std::vector<NoInitChar> vec;                         //method 2
    vec.reserve (256 * 1024 * 1024);
    for (int i = 0; i < 1024 * 1024; ++i) {
        do_something (vec, "foobar1");
        do_something (vec, "foobar2");
        do_something (vec, "foobar3");
        do_something (vec, "foobar4");
        do_something (vec, "foobar5");
        do_something (vec, "foobar6");
        do_something (vec, "foobar7");
        do_something (vec, "foobar8");
        vec.resize (vec.size () + 64);
    }

    double timeEnd = get_time ();
    std::cout << (timeEnd - timeBegin) * 1000 << "ms" << std::endl;
    return 0;
} 
```

您会期望方法 1 和 2 在每个“最近的”编译器中都优于法线向量，因为调整大小是免费的并且其他操作是相同的。再想想：

```
 g++ 7.5.0   g++ 8.4.0   g++ 9.3.0   clang++ 9.0.0
vector<char>         95ms       134ms       133ms            97ms
method 1            130ms       159ms       166ms            91ms
method 2            166ms       160ms       159ms            89ms 
```

所有测试应用程序都像这样编译并执行 50 次以获取最低测量值：

```
$(cc) -O3 -flto -std=c++17 sample.cpp 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-29T08:24:41.900

您很少需要这样做；我强烈建议您对自己的情况进行基准测试，以绝对确定需要此 hack。

即便如此，我还是更喜欢 NoInitChar 解决方案。（见马克西姆的回答）

但是，如果您确定您会从中受益，并且 NoInitChar 对您不起作用，并且您使用 clang、gcc 或 MSVC 作为编译器，请考虑为此目的使用 folly 的例程。

见[https://github.com/facebook/folly/blob/master/folly/memory/UninitializedMemoryHacks.h](https://github.com/facebook/folly/blob/master/folly/memory/UninitializedMemoryHacks.h)

基本思想是这些库实现中的每一个都有一个用于进行未初始化调整大小的例程；你只需要调用它。

虽然 hacky，你至少可以安慰自己知道 facebook 的 C++ 代码依赖于这个 hack 正常工作，所以如果这些库实现的新版本需要它，他们会更新它。

# matlab - 使用默认 Simulink 库模块的 DCM 到四元数转换中的歧义

> ID：15219992
> 
> 赞同：1
> 
> 时间：2013-03-05T09:19:54.430
> 
> 标签：matlab, simulink, quaternions, kinematics

我正在模拟一个需要将方向余弦矩阵转换为四元数的系统。我使用 simulink 中提供的默认 DCM 到四元数转换块。然而，在模拟的某些点，输出四元数分量的符号相反。

不幸的是，我无法附上情节图像。

尽管这在数学上是正确的，但我希望进行平稳的更改。关于如何避免这种情况并为四元数提供平滑曲线的任何想法？

更新 1： [http ://tinypic.com/view.php?pic=33dayap&s=6](http://tinypic.com/view.php?pic=33dayap&s=6)

上图是模拟图。第一个图是输出四元数。第二个图是方向余弦矩阵。如您所见，即使 dcm 分量变化平稳，四元数也会突然改变符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:36:29.223

这个问题是由于四元数的[双重覆盖](http://en.wikipedia.org/wiki/Quaternion#Three-dimensional_and_four-dimensional_rotation_groups)特性引起的：两个单位四元数对应于每个旋转。在某些时候，根据某些规则，Matlab 实现从一个四元数切换到另一个。您对此无能为力。

一个混乱的解决方法是编写自己的旋转矩阵到四元数转换，并选择更接近前一种可能性的两种可能性的表示，从而避免突然跳跃。很乱。

在实际应用中通常不需要绘制四元数。很可能您正在旋转对象/矢量。如果您绘制该对象/矢量（或它的一些投影），即使旋转表示中有跳跃，您也不会突然跳跃。绘制旋转对象的投影的另一个好处是，通常比四元数更容易解释这些图。我不知道这在您的应用程序中是否有意义；它在我的身上工作得很好。

# iphone - 如何使 UIView 在拖动时从上到下，反之亦然

> ID：15219997
> 
> 赞同：0
> 
> 时间：2013-03-05T09:20:10.180
> 
> 标签：iphone, ios

我正在尝试制作一个动画，当我们触摸屏幕顶部并向下拖动时，UIView 应该从上到下（或直到屏幕中间）出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:23:49.573

设置您的视图框架，然后将这些代码添加到您的按钮操作中。

```
 [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:1.0];
    [yourView setFrame:CGRectMake(0, 250, 320, 100)];
    [UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:24:28.400

根据您的需要设置位置

```
[UIView beginAnimations:@"DragView" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];
[UIView setAnimationDuration:0.5f];
self.dragView.frame = CGRectMake(newXPose, newYPose,width, height);
[UIView commitAnimations]; 
```

# hibernate - 休眠自动增量不起作用

> ID：15219998
> 
> 赞同：3
> 
> 时间：2013-03-05T09:20:11.343
> 
> 标签：hibernate, class, pojo

如果我使用如下注释使用休眠 Pojo 类 - 正如我正在使用的那样`GenerationType.AUTO`

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private long id; 
```

是否需要在数据库端也为实体添加“自动增量”...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:21:44.050

是的，您还需要添加数据库

例子：

```
 SQL>field_name dataType NOT NULL AUTO_INCREMENT, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T07:43:50.770

您可以使用其他生成器类型，例如表或序列生成器。您不必在列中“自动递增”。但是 Pojo 类将会发生变化，您必须在数据库中创建序列。

请参阅下面的链接了解不同类型的生成器 - [HIbernate id 生成器](https://dzone.com/articles/hibernate-identity-sequence)