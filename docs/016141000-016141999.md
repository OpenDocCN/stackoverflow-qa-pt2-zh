# StackOverflow 问答 16141000-16141999

# jsp - Unable to compile JSP in Struts

> ID：16141001
> 
> 赞同：0
> 
> 时间：2013-04-22T06:48:21.737
> 
> 标签：jsp, struts

I'm unable to compile JSP in Struts. I am getting `JasperException` at line 20\. I have included all jars required to tackle taglib files.

```
17:<form action="/login.do?method=authUser" >
18:    <div align="center">
19:    <table>
20:        <tr><td><label>UserName</label></td><html:text property="username"/></tr>
21:        <tr><td><label>Password</label> </td><html:password property="passwd"/></tr>
22:    </table>
23:    <html:submit value="LogIn"/><html:submit value="SignUp" onclick="gotoSignuUp();"/>
24:</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:25:49.710

如果您看到此错误***org.apache.jasper.JasperException: The Struts dispatcher cannot be found***那么您的 web.xml 中可能缺少 struts 过滤器：

```
<filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

还要检查你的jsp中的***struts html库***

```
<%@taglib uri="http://struts.apache.org/tags-html" prefix="html"%> 
```

**注意：**如果您可以发布完整的错误代码，那么我们可以查明确切的问题并给出相应的解决方案。

# c++ - 可拖动的 QWidget

> ID：16141002
> 
> 赞同：0
> 
> 时间：2013-04-22T06:48:25.690
> 
> 标签：c++, qt

我有一个 MainWindow.cpp 类，其中显示了多个发出 clicked() 信号的图像。单击后，我想在 MainWindow 中打开一个固定大小的小部件，并且我希望这个小部件能够被拖动，只要它留在 MainWindow 类中。

我正在查看示例代码来尝试编写这个小部件类，特别是[Qt MainWindow Example](http://qt-project.org/doc/qt-5.0/qtwidgets/mainwindows-mainwindow.html)。但是，一旦在显示器周围拖动其中一个停靠窗口，操作系统特定的标题栏（它允许您最大化、最小化和关闭窗口）就会显示出来。我不希望显示此标题栏。

我将如何创建此类可拖动小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:59:32.633

检查[setTitleBarWidget](http://doc.qt.io/qt-5/qdockwidget.html#setTitleBarWidget)

设置为 void 小部件将起作用：

```
It is not possible to remove a title bar from a dock widget. 
However, a similar effect can be achieved by setting a default constructed QWidget 
as the title bar widget. 
```

编辑：应要求：

```
yourDockableWidget->setTitleBarWidget( new QWidget( yourDockableWidget ) ); 
```

在您下面的示例中，您可以在构造函数中执行此操作：

```
ColorSwatch::ColorSwatch(const QString &colorName, QWidget *parent, Qt::WindowFlags flags)
: QDockWidget(parent, flags)
{
/*...*/

setTitleBarWidget( new QWidget( this ) );

/*...*/
} 
```

现在您的小部件在取消停靠时不会有 SO 标题栏；

# apache - mod_rewrite: multiple domains on one server, mod_rewrite refuses to work on one

> ID：16141003
> 
> 赞同：0
> 
> 时间：2013-04-22T06:48:33.223
> 
> 标签：apache, mod-rewrite, virtualhost

I have a server that serves several domains from a single IP address using Apache's Virtual Host shenanigans. Three of the sites are required to redirect to `www` if it's omitted from the URL.

I have the following rule in the `.htaccess` file of each domain:

```
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

This works for two of the three, but the third completely fails to comply. I know that the `.htaccess` is being hit because the framework requires all hits to be routed through `index.php`... and that is happening correctly. So, it's not permissions, and the `.htaccess` is identical (more or less) on each domain. I even looked into caching (even though that doesn't make any sense... desperation gives way to insanity!)

Please help me if you have any clue what is going on.

As requested, here's the complete `vhost` config, and `.htaccess` file...

`vhost` configuration:

```
<VirtualHost *:80>
        ServerAdmin me@gmail.com
        DocumentRoot /var/www/example.com
        ServerName www.example.com
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/example.com>
                Options FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

`.htaccess` file:

```
# BEGIN example.com

<IfModule mod_rewrite.c>

RewriteEngine On

RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteBase /
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [S=40]

####################################################
# If requested URL-path plus ".php" exists as a file
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
# Rewrite to append ".php" to extensionless URL-path
RewriteRule ^(([^/]+/)*[^.]+)$ /$1.php [L]
####################################################

# redirect to RoutingHandler
RewriteRule ^.*$ /index.php [NC,L]

</IfModule>

# END example.com 
```

Bear in mind, there are two other domains set up in an identical manner... and they both work with zero issues.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T06:13:27.980

我知道这是一个老问题，但谷歌在寻找相同问题的答案时把我带到了这里。在搜索了 apache 的文档后，我发现： [AllowOverride Directive](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)

> 当此指令设置为 None 时，.htaccess 文件将被完全忽略。在这种情况下，服务器甚至不会尝试读取文件系统中的 .htaccess 文件。

因此，我在该部分中将“AllowOverride None”更改为“AllowOverride All”`<Directory /var/www/example.com>`并且它起作用了。

# c# - 在 Windows phone 8 中使用 Wcf 服务

> ID：16141004
> 
> 赞同：1
> 
> 时间：2013-04-22T06:48:32.953
> 
> 标签：c#, wcf, windows-phone-8

我已经在 windows phone 8 模拟器中看到了用于连接本地 Web 服务的链接。

[http://msdn.microsoft.com/en-in/library/windowsphone/develop/jj684580%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-in/library/windowsphone/develop/jj684580%28v=vs.105%29.aspx)

但这还不够，我正在尝试在我的 windows phone 8 应用程序中使用远程 wcf 服务；但每次我收到 407 proxy authentication required 错误。

服务运行良好，但我无法使用该服务；在 Windows 商店应用程序中，我可以毫无问题地使用此服务，但在 Windows Phone 8 中，我无法正常使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:05:06.430

您可以尝试将其添加到您的 web.conf 中吗

```
<system.net>
  <defaultProxy useDefaultCredentials="true" />
</system.net> 
```

或这个 ？

```
 <system.net>
    <defaultProxy>
      <proxy usesystemdefault="False"/>
    </defaultProxy>
  </system.net> 
```

# prolog - Prolog：从文件中读取列表

> ID：16141016
> 
> 赞同：2
> 
> 时间：2013-04-22T06:49:11.797
> 
> 标签：prolog

我有一个包含这样一个列表的文本文件：

```
[(3,3,0), (3,5,0), (4,4,1), (5,1,0), (6,6,3)]. 
```

是否有可以从文件加载此列表的内置 Prolog 谓词？

还是我必须以纯文本形式读取数据，然后自己进行解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:58:52.020

谓词`read/1`为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:05:08.220

好的，那么简单的 open/3 和 read/1 就可以了 :) 抱歉这个愚蠢的问题。

# c++ - How to open file in exclusive mode in C++

> ID：16141018
> 
> 赞同：8
> 
> 时间：2013-04-22T06:49:19.040
> 
> 标签：c++, io

I am implementing some file system in C++. Up to now I was using `fstream` but I realized that it is impossible to open it in exclusive mode. Since there are many threads I want to allow multiple reads, and when opening file in writing mode I want to open the file in exclusive mode?
What is the best way to do it? I think `Boost` offers some features. And is there any other possibility? I would also like to see simple example. If it is not easy / good to do in C++ I could write in C as well.

I am using Windows.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:20:41.673

在许多操作系统上，这根本不可能，因此 C++ 不支持它。您必须编写自己的`streambuf`. 如果您担心的唯一平台是 Windows，您可以使用它提供的独占模式打开。然而，更有可能的是，您想要使用某种文件锁定，这种锁定更精确，并且在大多数（如果不是所有）平台上都可用（但不是可移植的——`LockFileEx` 在 Windows 下，`fcntl`在 Unix 下需要）。

在 Posix 下，您还可以使用`pthread_rwlock`. Butenhof 使用 C++11 中存在的经典互斥锁和条件变量提供了一个实现，因此您实际上可以实现一个可移植版本（假设所有读取器和写入器都在同一个进程中 - Posix 请求将跨进程边界，但这不适用于 C++ 线程原语）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T13:15:05.510

如果您的应用程序仅适用于 Windows，则您可以选择 win32 API 函数“ [CreateFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx) ”。

例如： HANDLE hFile = ::CreateFileW(lpszFileFullPathName, GENERIC_WRITE, FILE_SHARE_READ, NULL, OPEN_EXISTING, NULL, NULL);

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-01T03:26:45.600

如果您愿意使用 boost，那么我建议您使用 file_lock 类。这意味着您要保留打开/关闭文件的文件名，因为 fstream 不会为您这样做。

它们有两种`lock()`可用于写入的模式（即一次只有一个这样的锁，共享锁也可以防止这种锁）和`lock_sharable()`可用于读取的模式（即任何数量的线程都可以获得这样的锁）。

请注意，您最终会发现以这种方式管理读取和写入都变得复杂。也就是说，如果总是有人阅读，共享锁可能永远不会被释放。在那种情况下，排他锁永远不会有机会获得......

```
// add the lock in your class
#include <boost/interprocess/sync/file_lock.hpp>
class my_files
{
...
private:
    ...
    boost::file_lock     m_lock;
}; 
```

现在，当您要访问文件时，可以以一种或另一种方式锁定它。如果线程负责他们何时执行此操作，您可以添加功能以供用户访问锁。如果您在 my_files 中实现读取和写入功能，您希望获得一个基于堆栈的对象，该对象为您锁定和解锁 (RAII)：

```
class safe_exclusive_lock
{
public:
    safe_exclusive_lock(file_lock & lock)
        : m_lock_ref(lock)
    {
        m_lock_ref.lock();
    }
    ~safe_exclusive_lock()
    {
        m_lock_ref.unlock();
    }
private:
    file_lock & m_lock_ref;
}; 
```

现在您可以安全地锁定文件（即您锁定，做一些可能抛出的事情，您总是在退出当前的 {}-block 之前解锁）：

```
ssize_t my_files::read(char *buf, size_t len)
{
    safe_exclusive_lock guard(m_lock);
    ...your read code here...
    return len;
} // <- here we get the unlock()

ssize_t my_files::write(char const *buf, size_t len)
{
    safe_exclusive_lock guard(m_lock);
    ...your write code here...
    return len;
} // <- here we get the unlock() 
```

file_lock 使用一个文件，因此您希望在创建 file_lock 时已经创建 fstream 文件。如果 fstream 文件可能没有在您的构造函数中创建，您可能需要将 m_lock 变量转换为唯一指针：

```
private:
    std::unique_ptr<file_lock>  m_lock; 
```

当你引用它时，你现在需要一个星号：

```
safe_exclusive_lock guard(*m_lock); 
```

请注意，为了安全起见，您应该检查指针是否确实已分配，如果未定义，则表示文件尚未打开，因此我建议您抛出：

```
if(m_lock)
{
    safe_exclusive_lock guard(*m_lock);
    ...do work here...
}
else
{
    throw file_not_open();
}
// here the lock was released so you cannot touch the file anymore 
```

在公开场合，您创建了锁：

```
bool open(std::string const & filename)
{
    m_stream.open(...);
    ...make sure it worked...
    m_lock.reset(new file_lock(filename));
    // TODO: you may want a try/catch around the m_lock and
    //       close the m_stream if it fails or use a local
    //       variable and swap() on success...
    return true;
} 
```

并且不要忘记在关闭时释放锁定对象：

```
void close()
{
    m_lock.reset();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:52:11.673

好吧，如果文件已经以写入模式打开，您可以手动阻止自己打开文件。只需在内部跟踪您在写入模式下打开的文件。

也许您可以散列文件名并将其存储在具有写访问权限的表中。这将允许快速查找以查看文件是否已打开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-31T19:00:39.763

您可以重命名文件，以新名称更新它，然后将其重命名。我做了，但是有点重。

# ruby - Rake file with Jenkins (Cucumber, watir-webdriver)

> ID：16141021
> 
> 赞同：1
> 
> 时间：2013-04-22T06:49:32.897
> 
> 标签：ruby, jenkins, cucumber, rake, watir-webdriver

I've started with watir and cucumber a while ago and have been trying to run my project with Jenkins. I have a watir Project (watir,cucumber) in C:\project_name. I have rake file in the project also and when I run it in CMD everything goes ok and tests are succesfully executed --> C:\project_name>rake

Rakefile I'm running looks like this.

```
require 'rubygems'
require 'cucumber'
require 'cucumber/rake/task'

Cucumber::Rake::Task.new(:features) do |t|
     t.profile = 'default'
end

task :default => :features 
```

I have tried to execute Rake file with Jenkins but unable to make it work. So far what I have done with Jenkins (Running in localhost:8080)

1) Plugins installed eg. cucumber-reports, Jenkins Rake plugin

2) Tried to add New job --> Build a free-style software project

I really don't have idea how to make Rake file to work with Jenkins. I was hoping to get these nice reports (cucumber-reporting) available through Jenkins.

If someone can help me with this it would be more than perfect.

# sql - 错误无效编号 ORA-01722 在过程中

> ID：16141022
> 
> 赞同：-1
> 
> 时间：2013-04-22T06:49:35.043
> 
> 标签：sql, oracle, plsql, oracle9i

我有一个如下所示的过程，但是当我尝试使用 sqlplus 运行它时，它给了我错误

> > 开始 IB_ARCHIVE_FDS('FDS_LOG', 'TIME_REQUEST', 5, 6); 结尾;
> > 
> > 第 1 行出现错误：ORA-01722：无效编号 ORA-06512：在“NIAGA.IB_ARCHIVE_FDS”，第 10 行 ORA-06512：在第 1 行

我正在使用 Oracle 9i

```
CREATE OR replace PROCEDURE Ib_archive_fds(table_name     VARCHAR2,
                                           column_name    VARCHAR2,
                                           success_period NUMBER,
                                           active_period  NUMBER)
IS
  TYPE fds_tabs
    IS TABLE OF ib_fds_log%ROWTYPE INDEX BY PLS_INTEGER;
  TYPE fds_message_id
    IS TABLE OF ib_fds_log.message_id%TYPE INDEX BY PLS_INTEGER;
  v_fds_log    FDS_TABS;
  v_message_id FDS_MESSAGE_ID;
BEGIN
    SELECT *
    bulk   collect INTO v_fds_log
    FROM   ib_fds_log2
    WHERE  direction = 0
           AND status_fds_message = 0
           AND time_request < Trunc(SYSDATE - ' || SUCCESS_PERIOD || ' - 1);

    FOR i IN 1 .. v_fds_log.last LOOP
        V_message_id(i) := V_fds_log(i).message_id;
    END LOOP;

    forall indx IN 1 .. v_fds_log.count
      INSERT INTO ib_fds_log3
      VALUES V_fds_log(indx);

    COMMIT;

    forall indx IN 1 .. v_fds_log.count
      DELETE FROM ib_fds_log2
      WHERE  message_id = V_message_id(indx);

    COMMIT;
END; 
```

有人可以帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:56:29.033

这段代码几乎肯定应该完全避免使用游标，而只使用 SQL 语句——类似于...

```
procedure ib_archive_fds(
  table_name     varchar2,
  column_name    varchar2,
  success_period number  ,
  active_period  number  )
is
  time_request_limit date;
begin
  time_request_limit := trunc(sysdate - success_period - 1)

  insert into
    ib_fds_log3
  select
    *
  from
    ib_fds_log2
  where
    direction          = 0 and
    status_fds_message = 0 and
    time_request       < ib_archive_fds.time_request_limit;

  delete from
    ib_fds_log2
  where
    direction          = 0 and
    status_fds_message = 0 and
    time_request       < ib_archive_fds.time_request_limit;
end; 
```

如果执行时查询的结果集不是恒定的，则可以进行各种增强，但是所有的 PL/SQL 都只是询问错误和性能问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T08:23:40.843

虽然我同意 David 对您实现的缺点的分析，但该错误消息的实际原因是这个错误：

```
time_request < trunc(sysdate - ' || SUCCESS_PERIOD || '- 1); 
```

`SUCCESS_PERIOD`是一个参数，您可能想在日期计算中使用它。但是，您已将其编码为字符串；字符串不是数字，因此我们不能在减法中使用 in。

我不太确定你想要达到什么算术，但我认为你想要这个......

```
time_request < trunc(sysdate - ( SUCCESS_PERIOD - 1)); 
```

... 或这个 ...

```
time_request < trunc(sysdate - ( SUCCESS_PERIOD + 1) ); 
```

...取决于您要如何修改`SUCCESS_PERIOD`.

# lotus-notes - 在对话框列表上选择时 Lotus Notes Domino 更改计算域值

> ID：16141024
> 
> 赞同：0
> 
> 时间：2013-04-22T06:49:37.167
> 
> 标签：lotus-notes, lotus-domino, lotus-formula

我有一个对话框列表，其中包含“新请求”和“编辑请求”，并且在选择“新请求”和“编辑请求”时显示可用选项列表的计算字段。我似乎找不到让它工作的方法，所以我所做的是我创建了另一个计算字段（所以我现在有两个字段），并在未选择“新请求”时隐藏 field1 并且在隐藏 field2 时未选择“编辑请求”。但我认为这是一个糟糕的技巧来让它发挥作用。你们能推荐我另一种方法吗？我是 Lotus Notes 多米诺骨牌的新手。顺便说一句，这是我隐藏字段的代码：

```
RequestType != "New Request"
RequestType != "Edit Request" 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:17:37.563

在第二个选项卡（控制选项卡）的对话框列表属性中，选中“在关键字更改时刷新字段”复选框。现在在您的计算字段中编写您的公式代码，如下所示：`@If(RequestType = "New Request"; "Choice 1":"Choice 2":"Choice 3"; RequestType = "Edit Request"; "Choice 4":"Choice 5"; "Select a request type")`，它将返回新请求的三个选项和编辑请求的第四和第五个选项，如果没有做出选择，则显示说明性文本。

# css - 如何在 html 和 css 中使用标签和文本框创建多个可调整大小的列

> ID：16141030
> 
> 赞同：0
> 
> 时间：2013-04-22T06:50:01.817
> 
> 标签：css, html, multiple-columns

我一直在尝试创建 4 个可调整大小的列（div 或 span），每个列都有一个标签和一个文本框。文本框填充可调整大小列的宽度。标签具有固定宽度。

我从一列的布局开始，然后复制了 3 次。这有点过于乐观了。div 或 span 只是显示在彼此下方。我玩过显示样式，但似乎无法完成。

1 列布局的工作方式类似于以下示例：http: [//jsfiddle.net/QaWMN/2/](http://jsfiddle.net/QaWMN/2/)

```
.content .fieldname
{
    float: left;
    width: 140px;
}
.content .fieldcontrol
{
    display: block;
    overflow: hidden;
}
.content input[type="text"]
{
    width: 100%;
} 
```

```
<div class="content">
    <div class="col1">
        <div><label class="fieldname">Field 1</label><span class="fieldcontrol"><input type="text" id="Text1" /></span></div>
    </div>
</div>
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:20:28.233

## 1) 计算列宽

首先，您必须将宽度应用于每一列。

如果列之间没有排水沟，那么数学很容易。每列的宽度应等于 100% 除以列数。例如。如果您有 5 列，则宽度应为 100%/5 = 20%。

如果你想要排水沟，你将不得不做一些更复杂的数学。问题是排水沟的数量比列的数量少一。所以你必须解方程：

```
K*X + (K-1)*Y = 100% 
```

其中 K 是列数，X 是每列的宽度，Y 是每个装订线的宽度。

假设列数为 4，而 gutter 应为列的 1/4。现在我们有一个方程组：

```
 / K*X + (K-1)*Y = 100%
<  K = 4
 \ Y = 1/4 * X 
```

现在我们替换 K 和 Y 并且有：

```
4X + (4-1) * 1/4 * X = 100% 
```

这可以简化为：

```
4X + 3/4 * X = 100%
4.75X = 100%
X = 21.0526% 
```

现在当我们知道 X 的值时，我们可以计算 Y：

```
/ X = 21.0526%
\ Y = 1/4 * X

Y = 21.0526% / 4
Y = 5.26315% 
```

耶！现在我们可以把它放到 CSS 中：

```
.column {
  width: 21.0526%;
  margin-right: 5.26315%; }

  .column:last-child {
    margin-right: 0; } 
```

## 2）水平对齐列

我们有列和排水沟的宽度，但它们仍然出现在垂直堆栈中。我们需要它们在水平行中。

有不同的方法可以让您使用 CSS 构建列。

### a) 内联块

已经提到的一个是使用`inline-block`显示样式。这会将您的列放在一行中。除非您提供列的宽度，否则列将缩小以匹配其内容的宽度。

列标签之间不要有空格是非常重要的。正确：`</div><div class="column">`，错误：`</div> <div class="column">`。

示例 HTML：

```
<div class=column>
  Foo
</div><div class=column>
  Foo
</div><div class=column>
  Foo
</div><div class=column>
  Foo
</div> 
```

示例 CSS：

```
/* Spanning the columns */
.column {
  display: inline-block;
  width: 21.0526%;
  margin-right: 5.26315%; }

  /* Removing the margin from the last column */
  .column:last-child {
    margin-right: 0; } 
```

演示：http: [//jsbin.com/aqedum/2/edit](http://jsbin.com/aqedum/2/edit)

### b) 浮点数

float 方法不需要从 HTML 中删除空格：

```
<div class=column>
  Foo
</div>

<div class=column>
  Foo
</div>

<div class=column>
  Foo
</div>

<div class=column>
  Foo
</div> 
```

对于要在水平行中对齐的列，您可以应用`float: left;`它们。

浏览器不太擅长将小数百分比值四舍五入为绝对值，因此每列的位置可能相差 1px。浮动方法允许您通过将最后一列向右浮动来使舍入误差不那么明显。

```
/* Spanning the columns */
.column {
  float: left;
  width: 21.0526%;
  margin-right: 5.26315%; }

  /* Removing the margin from the last column */
  .column:last-child {
    float: right;
    margin-right: 0; } 
```

演示：http: [//jsbin.com/idekux/2/edit](http://jsbin.com/idekux/2/edit)

## 使用 SASS 自动计算宽度

[SASS](http://sass-lang.com/)是一种允许您使用变量和其他方便的编程材料来构建 CSS 的语言。还有一个[Compass](http://compass-style.org/help/)工具，它支持 SASS 的强大扩展社区，让您无需每次都重新发明轮子来解决各种任务。

有许多基于 SASS 的 SASS 网格系统可以自动构建网格。我最喜欢的网格系统是[Singularity](https://github.com/Team-Sass/Singularity)。

使用 Singularity，您只需提供列数和相对于列的装订线宽度即可获得结果！

```
$grids: 4;
$gutters: 0.25;

.column {
    @include float-span(1);

    &:last-child {
        @include float-span(1, omega); }} 
```

这将产生类似于前面示例的 CSS。

Singularity 还允许创建不对称网格和/或响应式网格，其中列数和列内元素的对齐方式根据不同的屏幕宽度而变化。

它还允许使用另一种称为 Isolation 的网格方法，进一步减少浏览器舍入错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:20:47.127

您需要将`display : inline-block`（使它们彼此相邻）和a `width : 25%`（因此它们可以将所有4个放在一行中）组合起来

这里： http: [//jsfiddle.net/QaWMN/35/](http://jsfiddle.net/QaWMN/35/) 宽度较小，可能是因为您的填充。

编辑：您可以替换`display : inline-block`为`float : left` -> [http://jsfiddle.net/QaWMN/36/](http://jsfiddle.net/QaWMN/36/)

# ios - 如何在按钮操作上停止后台运行的应用程序

> ID：16141032
> 
> 赞同：0
> 
> 时间：2013-04-22T06:50:11.313
> 
> 标签：ios

我想在按钮操作上停止后台运行的应用程序，并通过代码启动按钮单击过程。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T12:11:32.233

是的，你可以做到。在应用程序委托后台方法中。

# iphone - 使用套接字接收损坏/不完整的消息

> ID：16141035
> 
> 赞同：2
> 
> 时间：2013-04-22T06:50:23.620
> 
> 标签：iphone, ios, sockets

我是套接字编程的新手，我通过引用[http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)来做到这一点，我正在使用 php服务器，我面临的问题是，我可以使用套接字发送/接收消息，但是我收到的消息被破坏了，就像我收到的消息应该是“ **Hello abcd** ”但它给了我“”然后过了一段时间“ **llo** ” 然后过了一段时间“ **abcd** ”。我正在使用以下代码接收消息：

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {

    switch (streamEvent) {

        case NSStreamEventNone:
        NSLog(@"Stream event none");
            break;

        case NSStreamEventOpenCompleted:
            NSLog(@"Stream opened");
            break;
        case NSStreamEventHasBytesAvailable:

        if (theStream == inputStream) {

                int len=0;
                uint8_t *buffer = (uint8_t *)calloc(1, (16*1024));

                while ([inputStream hasBytesAvailable]) {
                    len = [inputStream read:buffer maxLength:sizeof(buffer)];

                   NSLog(@"byte available %d",len);

                    if (len > 0) {
                        NSMutableData* data=[[NSMutableData alloc] initWithLength:0];
                        //
                        [data appendBytes:(const void *)buffer length:len];

//                        NSString *s = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
//                                        NSLog(@"rs %@",s);

                        NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                        if (nil != output) {
                            NSLog(@"server said: %@", output);
                            [self messageReceived:output];

                        }
                    }
                }

            }

            break;

        case NSStreamEventHasSpaceAvailable:
            NSLog(@"event space available");

            break;

        case NSStreamEventErrorOccurred:

            NSLog(@"Can not connect to the host!");
            break;

        case NSStreamEventEndEncountered:
            NSLog(@"end");
            [theStream close];
            [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [theStream release];
            theStream = nil;

            break;

        default:
            NSLog(@"Unknown event");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:52:44.927

我面临同样的问题。我所做的不是在委托方法中附加字符串，而是将字符串传递给另一个方法，检查输入流中的字节并将字符串附加到那里。这是我的应用程序的片段。希望能帮助到你。

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {
switch (streamEvent) {

    case NSStreamEventOpenCompleted:
        NSLog(@"Stream opened");
        break;

    case NSStreamEventHasBytesAvailable:
        if (theStream == inputStream) {
            uint8_t buffer[1024];
            NSInteger len = [inputStream read:buffer maxLength:sizeof(buffer)];
            NSString *output;
            if (len > 0) {
                output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];
                [self messageReceived:output];
            }
        }

        break;

    case NSStreamEventErrorOccurred:
    {
        NSLog(@"Can not connect to the host!");
        [theStream close];
        [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

        UIAlertView *errorOccured = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Some error occured." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [errorOccured show];
    }
        break;

    case NSStreamEventEndEncountered:
        NSLog(@"Stream end occured");
        break;

    default:
        NSLog(@"Unknown event");
  }

}
- (void) messageReceived:(NSString *)message {
    if (inputStream.hasBytesAvailable) {
      [streamResponseStr appendString:message];
    }else{
      [streamResponseStr appendString:message];
      [self parseServerResponse:streamResponseStr];

      streamResponseStr = nil;
      streamResponseStr = [[NSMutableString alloc] init];
    }
} 
```

# jquery - Rails 3.2 和 jQuery 函数在生产中不起作用

> ID：16141037
> 
> 赞同：0
> 
> 时间：2013-04-22T06:50:34.507
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2, twitter-bootstrap-rails

我在让资产管道编译的 javascript 函数在生产中工作时遇到了一些麻烦。它在开发中运行良好。

Javascript

```
# app/assets/javascript/subscribe.js

$(function() {
  $('#fat-btn').click(function() {
    var btn = $(this)
    btn.button('loading')
    setTimeout(function () {
      btn.button('reset')
    }, 2000)
  });
}); 
```

我的观点

```
# app/assets/subscribe.html.erb

<div class="subscribe">
  <%= form_tag subscribe_path, class: "form-inline" do %>
      <%= text_field_tag :email, nil, :type=>"email", :placeholder => 'Your email address' %>
      <%= button_tag "Go", id: "fat-btn", class: "btn", data: { "loading-text" => "loading...", "toggle" => "button"} %>
  <% end %>
</div> 
```

我的应用程序 Javascript

```
# app/assets/javascript/application.js

//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

任何帮助都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:39:09.993

这发生在我之前，就我而言，我正在调用多个 JQuery 实例。所以：

*   确保您没有调用多个 JQuery 实例。

*   如果您使用的是coffeescript并且在开发中出现语法错误（我的情况下有额外的空格），一切都可以顺利进行，但在生产中它不会。同样，预编译时的控制台日志应该指出任何问题（如果有的话）。

*   *在开发
    和生产*的时候看看Firebug有没有错误。

*   如果一切都失败了，您可以尝试再次清理和预编译您的资产
    。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:50:32.067

请检查错误

嗨伙计，请在部署到生产模式之前对文件进行以下更改

------环境.rb-----

```
::ActiveSupport::Deprecation.silenced = true 
```

------生产.rb-----

```
config.assets.compile = ['*.js', '*.css']
config.active_support.deprecation = :silence 
```

--------application.rb--------

```
config.assets.enabled = true
config.assets.initialize_on_precompile = false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:58:08.620

您可以在生产模式下加载页面时在浏览器中检查网络控制台吗？似乎某些资产尚未加载。

如果是这样，它看起来像 config.serve_static_assets 在您的 rails 环境配置中设置为 false（默认情况下在生产模式下）。检查 config/environments/production.rb 文件。

# php - 如何创建其操作 URL 与当前 URL 匹配的表单（并保留 GET 参数）？

> ID：16141038
> 
> 赞同：0
> 
> 时间：2013-04-22T06:50:34.193
> 
> 标签：php, post, get

特别是，我有一个带有一些参数的表单`POST`提交给它自己，但是我想在`GET`提交表单时保留这些参数。

例如，如果原始 URL 是`http://mydomain.com/download.php?fname=foobar.bin`，我希望它是我制作`POST`. 但是`foobar.bin`URL 的一部分可能会改变。

这是一个最小的工作示例

```
<?php

$pass = $_POST['pass'];

$filename = $_GET['p'];

$file = "../../cgi-secret/$filename";

if($pass == "foobar")
{
    header('Content-type: application/octet-stream');
    header("Content-Disposition: attachment; filename=\"$filename\"");
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    // The PDF source is in original.pdf
    readfile($file);
}
if(isset($_POST))
{?>
    <form method="POST" action="download.php?p=$file">
        Password <input type="password" name="pass"></input>
        <input type="submit" name="submit" value="Get File" ></input>
        </form>
<?}
?> 
```

在这一行，我想发布到当前的 URL，不管发生了什么

```
 <form method="POST" action="download.php?p=$filename"> 
```

为了提供一些背景信息，我正在尝试修改我的问题的答案 [如何密码保护二进制文件下载？](https://stackoverflow.com/questions/16137408/how-can-i-password-protect-a-binary-file-download)这样我就可以将文件名作为`GET`参数传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:01:29.530

你见过`$_SERVER['QUERY_STRING']`吗？在呈现表单时没有循环现有`$_GET`数组，这可能是最直接的方法。

一个例子：

```
<form method="POST" 
      action="download.php?p=$filename&<?php echo $_SERVER['QUERY_STRING']; ?>"> 
```

在您无权访问的情况下`$_SERVER['QUERY_STRING']`，您可以使用：

```
 <form method="POST" 
          action="download.php?p=$filename&<?php foreach($_GET as $key => $val) echo $key.'='.urlencode($val).'&'; ?>"> 
```

# ruby-on-rails - 由于来自后台的多个请求导致双重渲染错误

> ID：16141039
> 
> 赞同：0
> 
> 时间：2013-04-22T06:50:34.703
> 
> 标签：ruby-on-rails, ruby

在我们的应用程序中使用 juggernaut 和 redis，这会向我们的 rails 控制器发送多个请求，因此会引发双重渲染错误。

我们的 rails 控制器中有 render :nothing => true 。

任何想法来解决这个异常？

我们正在使用rails 2.3。

控制器代码：

```
def store_status
  @store = Store.find params[:id]
  @store.update_attributes(:stauts => 1)
  render :nothing => true
end 
```

编辑：

抱歉，这个双重渲染错误的原因是因为在调用 render :nothing => true 之后引发了一些异常，这在我的应用程序控制器中被捕获。救援异常块包含另一个渲染，因此引发了双重渲染错误。知道是否已经存在渲染然后在救援块中渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:24:19.460

抱歉，这个双重渲染错误的原因是因为在调用 render :nothing => true 之后引发了一些异常，这在我的应用程序控制器中被捕获。救援异常块包含另一个渲染，因此引发了双重渲染错误。知道是否已经存在渲染然后在救援块中渲染？

解决方案：

在 resuce 方法中渲染之前，使用 erase_results 清除您之前的渲染或重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:02:55.573

尝试`return render :nothing => true`

# ofbiz - 调用 OfBiz 服务时出错

> ID：16141040
> 
> 赞同：1
> 
> 时间：2013-04-22T06:50:34.770
> 
> 标签：ofbiz

我是 OFBiz 的新手，我正在创建简单的 ofbiz 服务并引用此链接[http://www.packtpub.com/article/apache-ofbiz-service-engine-part1](http://www.packtpub.com/article/apache-ofbiz-service-engine-part1)

我将实践项目创建为热部署。

我在 servicedef/services.xml 中为 learningFirstService.xml 创建了如下服务

```
`<service name="learningFirstService" engine="java"
        location="org.ofbiz.practice.practice.PracticeServices" invoke="handleParameters">
        <description>Our First Service</description>
        <attribute name="firstName" type="String" mode="IN" optional="true" />
        <attribute name="lastName" type="String" mode="IN" optional="true" />
    </service>` 
```

并在 src.org.ofbiz.practice.practice pakcage 中创建了 PracticeServices.java 类并创建了方法

```
 public static Map learningFirstService(DispatchContext dctx, Map context){

        System.out.println("learning first service called");
        Map resultMap = ServiceUtil.returnSuccess("You have called on service 'learningFirstService' successfully!");
        return resultMap;
    } 
```

在我的 ofbiz-component.xml 中

```
 <?xml version="1.0" encoding="UTF-8"?>
<ofbiz-component name="practice"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/ofbiz-component.xsd">
      <resource-loader  name="main" type="component"/>

      <service-resource type="model" loader="main" location="servicedef/services.xml"/>

    <webapp name="practice"
       title="Practice"
       server="default-server"
       base-permission="OFBTOOLS"
       location="webapp/practice"
       mount-point="/practice"
       app-bar-display="true"/>
    <classpath type="dir" location="config"/>

</ofbiz-component> 
```

learningforms.xml 如下

```
 <?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">

    <form name="TestingServices" type="single" target="${formTarget}">
        <field name="firstName"><text/></field>
        <field name="lastName"><text/></field>
        <field name="planetId"><text/></field>
        <field name="submit"><submit/></field>
    </form>
</forms> 
```

并且在controller.xml 中有显示学习表格的请求映射

```
 <request-map uri="TestFirstService">
            <event type="service" invoke="learningFirstService" />
            <response name="success" type="view" value="TestFirstService" />
        </request-map>
    <view-map name="TestFirstService" type="screen" page="component://practice/widget/PracticeScreens.xml#learningForm"/> 
```

学习表格成功打开。但是当我点击提交按钮时。它在控制台中给出错误，例如，

```
 Error in request handler: 
    Exception: org.ofbiz.webapp.event.EventHandlerException
    Message: Problems getting the service model (Cannot locate service by name (learningFirstService))
    ---- cause ---------------------------------------------------------------------
    Exception: org.ofbiz.service.GenericServiceException
    Message: Cannot locate service by name (learningFirstService)
    ---- stack trace ---------------------------------------------------------------
    org.ofbiz.service.GenericServiceException: Cannot locate service by name (learningFirstService)
    org.ofbiz.service.DispatchContext.getModelService(DispatchContext.java:191)
    org.ofbiz.webapp.event.ServiceEventHandler.invoke(ServiceEventHandler.java:116)
    org.ofbiz.webapp.control.RequestHandler.runEvent(RequestHandler.java:648)
    org.ofbiz.webapp.control.RequestHandler.doRequest(RequestHandler.java:394)
    org.ofbiz.webapp.control.ControlServlet.doGet(ControlServlet.java:224)
    org.ofbiz.webapp.control.ControlServlet.doPost(ControlServlet.java:87)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.ofbiz.webapp.control.ContextFilter.doFilter(ContextFilter.java:339)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:615)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:619) 
```

该错误表明它无法找到我定义的服务。但无法理解它哪里出错了。请帮我。

先谢谢了。
Ankit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T18:37:17.050

我们的第一项服务`

Web 服务 ....tht 的 invoke=" " 值必须与

"org.ofbiz.practice.practice.PracticeServices" 的方法，就像 "learningFirstService"

# android - 在 android 中使用 Intent.action_SEND 分享 Fb、Tw 和电子邮件

> ID：16141042
> 
> 赞同：0
> 
> 时间：2013-04-22T06:50:38.610
> 
> 标签：android, facebook, android-intent, android-alertdialog, intentfilter

我必须将文本和电子邮件发布到 FB、TW 和电子邮件。

在这里，我创建了一个图像视图。如果我必须单击这些图像视图，则意味着警报对话框正在打开。这里列出了以下 3 项：FB、TW、电子邮件

在这里，如果我必须在警报列表上使用 FB，这意味着它是使用 action_send 转到 FB 应用程序...同时发布文本和图像。其他 TW 和电子邮件应用程序是隐藏的。

如果我点击警报列表上的 TW 意味着它是转到 Tw 应用程序并同时发布文本和图像隐藏 FB、电子邮件应用程序...

我能怎么做 ？？？

请帮助我..我使用了下面的代码...在这里我点击 Fb 意味着什么都没有发生？？？请给我这些解决方案...我的设备也安装了 FB，TW 应用程序...那为什么什么都没有发生？？？请给我建议？？？我的代码有什么问题？？？

```
ImageView share = (ImageView) findViewById(R.id.imageView5);
    share.setOnClickListener(new OnClickListener()
    {
        public void onClick (  final View v )
        {
            final CharSequence[] items =
            {
                    "Facebook", "Twitter", "Email"
            };

            AlertDialog.Builder builder = new AlertDialog.Builder(SubCate.this);
            builder.setTitle("Share Via:");
            builder.setItems(items, new DialogInterface.OnClickListener()
            {
                public void onClick ( DialogInterface dialog , int item )
                {
                    if (items[item] == "Facebook")
                    {

                        initShareIntent("facebook");

                    }
                    if(items[item] == "Twitter"){
                        initShareIntent("twitter");

                       } 
                    if (items[item] == "Email")
                    {

                        initShareIntent("gmail");

                    }
                }
            });
            AlertDialog alert = builder.create();
            alert.show();
        }
    });
}

  private void initShareIntent(String type) {
        boolean found = false;
        Intent share = new Intent(android.content.Intent.ACTION_SEND);
        share.setType("image/jpeg");

        // gets the list of intents that can be loaded.
        List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(share, 0);
        if (!resInfo.isEmpty()){
            for (ResolveInfo info : resInfo) {
                if (info.activityInfo.packageName.toLowerCase().contains(type) || 
                        info.activityInfo.name.toLowerCase().contains(type) ) {
                    share.putExtra(Intent.EXTRA_SUBJECT,  _Substring);
                    share.putExtra(Intent.EXTRA_TEXT,     _Substring);
                    share.putExtra(Intent.EXTRA_STREAM, Uri.parse(_Image)); 
                    share.setPackage(info.activityInfo.packageName);
                    found = true;
                    break;
                }
            }
            if (!found)
                return;

            startActivity(Intent.createChooser(share, "Select"));
        }
    } 
```

**编辑：**

在这里我必须运行应用程序：

如果我必须点击 Fb 意味着 facebook 墙正在打开...但是这里没有显示文字...

如果我点击 Tw 意味着推特墙正在打开...推特文字显示在墙上..但图像无法加载显示消息...。

如果我必须单击电子邮件意味着 gmail 正在打开并且还很好地显示了主题上的文本...

为什么推特图片无法加载消息正在显示...FB文本和图片也没有显示？？？？请给我解决这些？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:13:05.120

将 SoicalAuth 用于此功能非常简单，您不需要为此创建列表视图和布局....请参阅[此链接](http://www.codeproject.com/Tips/457153/How-to-integrate-Facebook-Twitter-Linkedin-in-Andr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:49:30.260

在 facebook 中，它的已知问题是用户无法通过操作发送加载文本，但您可以上传图像。您还可以使用 facebook api 加载文本。

在推特中，您也可以发送图像和文本，它不会显示任何问题。

试试下面的代码。希望这会帮助你 。

```
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);

            shareIntent.setType("image/*");

            shareIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);

            Uri uri = Uri.parse("file://"+combinedFilepath.trim());
                String extraString="set";
                shareIntent.putExtra(Intent.EXTRA_TEXT,extraString);                                    
                shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
                shareIntent.putExtra(Intent.EXTRA_TITLE, extraString);
                shareIntent.putExtra(Intent.EXTRA_SUBJECT, "app name");         

                startActivity(Intent.createChooser(shareIntent, "Share via")); 
```

# asp.net-mvc-3 - 如何通过ajax上传文件

> ID：16141044
> 
> 赞同：5
> 
> 时间：2013-04-22T06:50:50.197
> 
> 标签：asp.net-mvc-3, jquery, file-upload, upload

我有文件上传，它不使用表单上传文件，而是我想使用 ajax 上传文件。我尝试了以下方法，但无法传递文件。它是空的。请帮忙。下面是我的实现。

**HTML 和 jQuery 函数**

```
<div id="Upload">
    <input type="file" accept="application/x-shockwave-flash" id="virtualtourfile" enctype="multipart/form-data"/>
    <input type="button" value="Upload" id="btnUpload"/>
</div>

$('#btnUpload').click(function () {
            $.ajax({
                url: "uploadvideo",
                type:'POST',
                data: $("#virtualtourfile:file"),
                success: function (data) {

                }
            });
        }); 
```

**控制器**

```
public ActionResult UploadVideo(HttpPostedFileBase file)
        {
            return Json("", JsonRequestBehavior.AllowGet);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:54:59.373

有几个选项。如果客户端浏览器支持，[`HTML5 File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)您可以使用它将文件异步上传到服务器。如果您需要支持不支持此 API 的旧版浏览器，您可以使用文件上传组件，例如[`Uploadify`](http://www.uploadify.com/), [`Fine uploader`](http://fineuploader.com/), [`jquery form`](http://malsup.com/jquery/form/), ... 这些插件的优点是它们将测试浏览器的功能以及它是否支持 File API它将使用它，否则它将回退到较旧的技术，例如隐藏 iframe 或 Flash 电影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:17:27.920

我使用了一些插件，我发现 Kendo UI 上传插件很好，这是一个链接，它是如何工作的：

[http://demos.kendoui.c​​om/web/upload/async.html](http://demos.kendoui.com/web/upload/async.html)

您可以在这里找到 Asp.Net MVC 3 的示例项目： [http ://www.kendoui.c​​om/forums/ui/upload/upoad-with-mvc.aspx](http://www.kendoui.com/forums/ui/upload/upoad-with-mvc.aspx)

```
 [HttpPost]
        public ActionResult Save(IEnumerable<HttpPostedFileBase> attachments)
        {
            // The Name of the Upload component is "attachments" 
            foreach (var file in attachments)
            {
                // Some browsers send file names with full path. This needs to be stripped.
                var fileName = Path.GetFileName(file.FileName);
                var physicalPath = Path.Combine(Server.MapPath("~/App_Data"), fileName);

                file.SaveAs(physicalPath);
            }
            // Return an empty string to signify success
            return Content("");
        } 
```

# java - 在android中发布JSON

> ID：16141045
> 
> 赞同：0
> 
> 时间：2013-04-22T06:50:53.953
> 
> 标签：java, php, android, json

我想在 android 中通过 HttpClient 发布字符串数据，但是在收到响应状态代码 503 后我很累 - 服务不可用并将响应作为我们 url 的 Html 代码返回。

我在 JAVA 应用程序中编写了以下代码并返回了数据，但是当我在 Android 应用程序中编写相同的代码时，我收到一个未找到的异常文件 I/O，我对这种情况感到困惑：

```
public void goButton(View v)
{

   try{
      URL url = new URL("https://xxxxxxxxx");
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        Test ts= new ApiRequest("null","getUserbyID",new String[] {                                         "66868706" });

        String payLoad = ts.toString();    //toSting is override method that create //JSON Object
        System.out.println("--->>> " + payLoad);
        conn.setDoOutput(true);
        OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        System.out.println("=================>>> "+ payLoad);

    wr.write(payLoad);
    wr.flush();
   BufferedReader rd = new BufferedReader(new nputStreamReader(conn.getInputStream()));

    String line;
   while ((line = rd.readLine()) != null) {
  System.out.println("-->> " + line);
  response += line;
  }
  wr.close();
   rd.close();
    System.out.println("=================>>> "+ response);

} catch (Exception e) {
    e.printStackTrace();
    System.out.println("=================>>> " + e.toString());
    throw new RuntimeException(e);
} 
```

我尝试将此代码放入 AsynTask, Thread 但我收到相同的响应状态代码。我写在下面的Android代码中作为示例数据

```
public void goButton(View v)
{
 try{
         new Thread(new Runnable() {
     public void run() {

     HttpClient client = new DefaultHttpClient();
     HttpConnectionParams.setConnectionTimeout(client.getParams(),
     10000); // Timeout Limit
     HttpResponse response;

     String url = "https://xxxxxxxxxxxxx";

     JSONObject json = new JSONObject();

     try {

     HttpPost post = new HttpPost(url);
     post.setHeader("Content-type", "application/json");
     json.put("service","null");
     json.put("method", getUserByID.toString());
     json.put("parameters", "1111");
     System.out.println(">>>>>>>>>>>" + json.toString());

     StringEntity se = new StringEntity(json.toString());
     se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
     "application/json"));
     post.setEntity(se);

             String response = client.execute(post);

     if (response != null) {
     String temp = EntityUtils.toString(response.getEntity());

     System.out.println(">>>>>>>>>>>" + temp);
     }
     } catch (Exception e) {
     e.printStackTrace();
     System.out.println(">>>>>>>>>>>" + e.getMessage());

     }
     }
     }).start();
} 
```

请帮我找到解决这个问题的方法:(

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:28:55.507

这是一个代码片段，希望对您有所帮助。

1)一个带有http get服务的函数

```
 private String SendDataFromAndroidDevice() {
    String result = "";

    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet getMethod = new HttpGet("your url + data appended");

        BufferedReader in = null;
        BasicHttpResponse httpResponse = (BasicHttpResponse) httpclient
                .execute(getMethod);
        in = new BufferedReader(new InputStreamReader(httpResponse
                .getEntity().getContent()));

        StringBuffer sb = new StringBuffer("");
        String line = "";
        while ((line = in.readLine()) != null) {
            sb.append(line);
        }
        in.close();
        result = sb.toString(); 

    } catch (Exception e) {
        e.printStackTrace();
    }
    return result;
} 
```

2) 扩展 AsyncTask 的类

```
 private class HTTPdemo extends
        AsyncTask<String, Void, String> {

    @Override
    protected void onPreExecute() {}

    @Override
    protected String doInBackground(String... params) {
        String result = SendDataFromAndroidDevice();
        return result;
    }

    @Override
    protected void onProgressUpdate(Void... values) {}

    @Override
    protected void onPostExecute(String result) {

        if (result != null && !result.equals("")) {
            try {
                JSONObject resObject = new JSONObject(result);

                } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

3）在你的 onCreate 方法里面

```
 @Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView("your layout");

    if ("check here where network/internet is avaliable") {

        new HTTPdemo().execute("");
    }

   } 
```

此代码段，Android 设备将通过 URL 向服务器发送数据，现在服务器需要从 URL 获取该数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:43:04.377

*嘿穆罕默德萨利姆*

我提供的代码片段按以下方式工作，

1) **Android 设备发送 URL+数据到服务器**

2）**服务器[*说使用的ASP.NET平台*]接收数据并给出确认**

现在向您提供了应该在客户端（Android）编写的代码，在服务器接收该数据的后面部分是

*   服务器需要接收数据
*   应该使用网络服务来做到这一点
*   在服务器端实现 web 服务
*   每当android推送URL+数据时都会调用webservice
*   获得数据后，根据需要对其进行操作

# xamarin.ios - MonoTouch 绑定到 Pony 调试器 - PDDebugger.DefaultInstance 始终为空

> ID：16141057
> 
> 赞同：2
> 
> 时间：2013-04-22T06:51:53.470
> 
> 标签：xamarin.ios, xamarin

我正在为小马调试器编写绑定，这应该很简单吧？

Pony 通过类成员“defaultInstance”访问

```
@interface PDDebugger : NSObject

+ (PDDebugger *)defaultInstance; 
```

我已经这样实现了：

```
[assembly: LinkWith ("libPonyDebugger.a", LinkTarget.Simulator, ForceLoad = true)]

    namespace PonyDebugger
{
    [BaseType (typeof (NSObject))]
    interface PDDebugger
    {
        [Static] [Export ("defaultInstance")]
        PDDebugger DefaultInstance { get; }

        [Export ("enableViewHierarchyDebugging")]
        PDDebugger EnableViewHierarchyDebugging();
    }
} 
```

我可以很好地编译绑定 - 但是当我调用“PDDebugger.DefaultInstance”时，我只会返回 null。我错过了什么？

我什至如何确定消息正在传递给底层的 ObjC 对象？

谢谢！

[编辑] 我已将绑定更新为： using System; 使用 MonoTouch.Foundation；使用 MonoTouch.ObjCRuntime；

** libPonyDebugger.linkwith.cs **

```
[assembly: LinkWith ("libPonyDebugger.a", LinkTarget.Simulator, ForceLoad = true,
                     Frameworks = "Security CFNetwork Foundation CoreGraphics UIKit CoreData", LinkerFlags = "-ObjC -licucore")]

namespace PonyDebugger
{
    [BaseType (typeof (NSObject), Name="PDDebugger")]//, DisableDefaultCtor]
    interface PDDebugger
    {
        //+ (PDDebugger *)defaultInstance;
        [Static, Export ("defaultInstance")]
        PDDebugger DefaultInstance();

        [Export ("enableViewHierarchyDebugging")]
        PDDebugger EnableViewHierarchyDebugging();
    }
} 
```

** libSocketRocket.linkwith.cs **

```
using System;
using MonoTouch.ObjCRuntime;

[assembly: LinkWith ("libSocketRocket.a",  LinkTarget.ArmV7 | LinkTarget.Simulator,
                     Frameworks = "Security CFNetwork Foundation CoreGraphics UIKit CoreData", ForceLoad = true, LinkerFlags = "-ObjC -licucore")] 
```

这一切都 btouches/编译为本机并运行 - 但 PDDebugger.DefaultInstance() 仍然返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:03:48.287

不久前我做了一个快速测试来绑定 PonyDebugger。绑定很好 - 但它没有工作，因为*方法调配*了IIRC。

通过快速查看，您的 linkwith.cs 看起来不完整。我的是：

```
[assembly: LinkWith ("libPonyDebugger.a", LinkTarget.ArmV7 | LinkTarget.Simulator,
    ForceLoad = true, 
    Frameworks = "Security CFNetwork CoreData", 
    LinkerFlags = "-ObjC -licucore" )] 
```

我还需要包含`libSocketRocket.a`，更简单，因为我将框架和标志添加到小马。

```
[assembly: LinkWith ("libSocketRocket.a", LinkTarget.ArmV7 | LinkTarget.Simulator,
    ForceLoad = true)] 
```

这应该给你一个**非空**的实例`PDDebugger`- 但你需要做更多的工作才能得到实际的结果。遗憾的是我没有时间进一步挖掘它，但是当你弄清楚其余部分时让我们知道:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:10:37.773

如果您得到空值，则可能意味着本机库未正确链接。

你是在模拟器还是设备上运行？你是如何编译绑定的？您确定本机库支持您正在测试的架构吗？

# python - Python 3编写类以返回球体的表面积和体积

> ID：16141065
> 
> 赞同：0
> 
> 时间：2013-04-22T06:52:33.957
> 
> 标签：python, python-3.x, geometry, volume

我已经尝试了所有方法，我的代码似乎非常接近，但是当我定义变量时，我不断收到名称错误。

```
from math import *

class Spheres:
    def __init__(self, radius):
        self.radius = r
        self.area = 0
        self.volume = 0

    def getRadius(self):
        return self.radius

    def surfaceArea(self):
        self.area = 4 * 3.14 * (r*r)
        return (self.area)

    def getVolume(self):
        self.volume = (4/3) * 3.14 * (r * r * r)
        return (self.volume)

def main():
    r = input("Enter the radius of the sphere: ")
    s = Spheres(r)
    print("The volume of the sphere is: ", s.surfaceArea())
    print("The surface area of the sphere is: ", s.volume())

if __name__ == '__main__':
    main() 
```

我得到的错误信息是：

```
Traceback (most recent call last): 
  File "/local/files/jfult001/CSC221/lab10/9ball.py", line 30, in <module> main() 
  File "/local/files/jfult001/CSC221/lab10/9ball.py", line 26, in main print("The volume of the sphere is: ", s.surfaceArea()) 
  File "/local/files/jfult001/CSC221/lab10/9ball.py", line 15, in surfaceArea self.area = 4 * 3.14 * (r*r) 
NameError: global name 'r' is not defined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:06:49.617

```
def surfaceArea(self):
    self.area = 4 * 3.14 * (r*r)
    return (self.area)

def getVolume(self):
    self.volume = (4/3) * 3.14 * (r * r * r)
    return (self.volume) 
```

在上面的函数中，将所有 r 更改为您的`self.radius`类`self.radius`的相应属性而不是 r ...

您的课程中也有一些小错误，请`__init__`按如下方式更正您的课程：

```
class Spheres:
    def __init__(self, r):
        self.radius = r
        self.area = 0
        self.volume = 0

    def getRadius(self):
        return self.radius

    def surfaceArea(self):
        r=self.radius
        self.area = 4 * 3.14 * (r*r)
        return (self.area)

    def getVolume(self):
        r=self.radius
        self.volume = (4/3) * 3.14 * (r * r * r)
        return (self.volume) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:21:39.293

让我告诉你*范围*：

在 Python 中，变量的*作用域*是或受限于定义它们的代码。以下面的代码为例：

```
def my_function():
    r = 1234

print r 
```

这会给你一个`NameError`, 因为`r`是*本地*的`my_function()`并且不存在于`my_function()`.

相似地：

```
class MyClass(object):

    def __init__(self, r):
        self.radius = r

    def access_r(self):
        return r

m = MyClass(1234)
m.access_r() 
```

这段代码也会给你一个`NameError`因为`r`只定义在`__init__()`.

但是请注意，在上面的示例中，您有`self.radius = r`. 碰巧这*两个*功能`self`都可以访问。的值存储在用于从同一类内的其他函数中访问它的明确目的。以如下修改为例：*`r``self.radius`*

 *```
class MyClass(object):

    def __init__(self, r):
        self.radius = r

    def access_r(self):
        return self.radius

m = MyClass(1234)
print m.access_r() 
```

此代码将顺利运行*并*返回`1234`.`r`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:49:01.277

看起来 'r' 是作为字符串输入的。

我会写 r=float(input("Enter radius:"))*

# php - 如何使用 PHP 请求非公共 PHP 页面？

> ID：16141070
> 
> 赞同：0
> 
> 时间：2013-04-22T06:52:49.457
> 
> 标签：php

要请求面向公众的页面，您只需执行以下操作：

```
$html = file_get_contents("http://mysite.com/file.php"); 
```

但我要请求的文件不是公开可用的页面。有没有办法在不诉诸服务器配置的情况下请求它？

需要明确的是，我不想要 .php 文件的源代码 - 我想在文件中执行 PHP 并将生成的 html 作为字符串获取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:56:34.660

您可以使用这样的命令行调用来调用 php 文件

```
$content = shell_exec('php /path/to/your/file.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:01:56.947

如果该文件不是面向公众的文件，您的第一步是将其放在公众无法访问的位置，例如，不在您的站点公共文件夹中，而是从那里开始。这样，除了驻留在同一服务器上的文件外，没有人能够访问它。

接下来，不是使用`file_get_contents()`加载一个url，而是使用`exec()`这样执行php脚本

```
exec('php /path/to/file.php', $output);
print_r($output); // each line of the output is stored in the $output array 
```

有关mroe 信息，请参阅[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:15:00.357

> 但我要请求的文件不是公开可用的页面。有没有办法在不诉诸服务器配置的情况下请求它？

如果它是一个外部文件，不，没有办法绕过服务器配置。从本质上讲，通过指向`file_get_contents()`一个 PHP 文件，您*是在*告诉 Web 服务器执行它，如果它是用来打印一堆信息的，它就会这样做。如果您尝试访问 .htaccess 密码保护文件，[CURL 可能是更好的选择。](https://stackoverflow.com/questions/4944410/download-htaccess-protected-files-using-php-and-curl)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T06:52:49.457

这可以通过公开文件来完成，但用密码保护它。然后该页面仍将受到外部世界的保护，但可以使用 file_get_contents() 请求。

在请求页面中：

```
$html = file_get_contents("http://mysite.com/file.php?password=h29kd8cm28x"); 
```

在请求的（现在公开的）页面中：

```
if ($_GET['password'] != 'h29kd8cm28x') {
    die("Access denied!");
} else {
    // page contents here
} 
```

然而，这似乎是一个笨拙的解决方案，并且需要额外的工作来防止黑客学习密码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T07:02:14.527

您需要将 PHP 文件保存在文档根目录或其子文件夹中。假设您从 run.php 调用 call.php：

```
// call.php
if($_SERVER['REQUEST_URI']=='run.php') { // Or the full path of run.php
    // Code here
}

// run.php
$html = file_get_contents("http://sitename.com/call.php"); 
```

如果 call.php 应该在文档根目录之外，shell_exec 是一个选项，正如 silly 所提到的。

# c++ - 非静态成员引用必须相对于特定对象 Singleton 类 C++

> ID：16141073
> 
> 赞同：1
> 
> 时间：2013-04-22T06:53:08.317
> 
> 标签：c++, singleton

我有一个单身课程。我想为结构成员赋值。但是编译器抛出错误为`A nonstatic member reference must be relative to a specific object`. 请帮助我，如何解决相同的问题。

```
class abc{

    static abc* m_selfInst;
public:

    struct abcd{
        int a;
    }abcd;

abc* GetInstance();
};

abc* abc::m_selfInst = NULL;

abc* abc::GetInstance()
{
    if(m_selfInst == NULL)
    {
        m_selfInst = new abc();
    }
    return m_selfInst;
}
int main()
{
    abc *ab = abc::GetInstance(); //Error Occurs here
    abc::abcd.a = 5; //Error occurs here too
    //cout <<ab.abcd.a << "\n";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:55:02.443

```
abc *ab = abc::GetInstance(); 
```

该`GetInstance()`方法必须声明`static`，否则只能在 的实例上调用`abc`。

```
abc::abcd.a = 5; 
```

这里，`abc::abcd`是类型。据推测，您需要引用指向的`abcd` *实例*的`abc` *实例*`ab`：

```
ab->abcd.a = 5; 
```

你真的应该避免给实例和类型提供相同的名称（如`struct abcd`和实例`abcd`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:54:43.503

`GetInstance`应该是`static`功能。

```
static abc* GetInstance(); 
```

访问`a`应该使用类型的变量`abc`。

```
ab->abcd.a 
```

named类型的结构`abcd`和对象确实令人困惑。大概应该是`abcd``abcd`

```
struct {
    int a;
} abcd; 
```

# javascript - 如何通过对其子属性设置过滤器来获取元素

> ID：16141074
> 
> 赞同：1
> 
> 时间：2013-04-22T06:53:09.973
> 
> 标签：javascript, jquery, dom

我有以下 DOM 结构：

```
<g class="box" rel="1">
    <text editable="false">some text</text>
</g>
<g class="box" rel="2">
    <text editable="true">some text</text>
</g>
<g class="box" rel="3">
    <text editable="false">some text</text>
</g>
<g class="box" rel="4">
    <text editable="true">some text</text>
</g> 
```

我现在要做的是获取子“可编辑”属性为真的 g 元素。

我试过这个，但这似乎不是我想要的：

```
var box = $('.box :last-child[editable="true"]').filter(':parent'); 
```

希望可以有人帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:55:33.187

尝试

```
$('g.box text[editable="true"]').parent(); 
```

**或者**

```
$('text[editable="true"]').parent('g.box'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:55:05.700

如果您已经在使用 jQuery -

```
$("g.box>text[editable='true']").parent(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:55:12.837

您快到了;

```
var box = $('.box text[editable=true]').parent(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:55:37.377

```
var box = $('.box :last-child[editable="true"]').parent('g'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T06:56:15.923

尝试这个

```
$('.box :last-child[editable="true"]').parent('g'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T06:56:21.217

选择孩子然后到达父母要容易得多：

```
$('g.box text[editable=true]').parent() 
```

这将选择具有可编辑孩子的父母

希望这可以帮助

# sccm - Microsoft 构建和持续部署 - 大量机器

> ID：16141076
> 
> 赞同：1
> 
> 时间：2013-04-22T06:53:29.940
> 
> 标签：sccm

鉴于：

*   跨数百个服务器和数千个客户端的多个客户端-服务器应用程序。
*   TFS 2012 用于源代码控制和自动构建。
*   SCCM 2012 作为部署技术。

System Center Orchestrator 2012 是否是最合适的工具，可以促进将生产就绪的 TFS 构建推送到 SCCM 进行部署？

为什么？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:26:24.363

答案是否定的。

看来，如果您想要 SCCM 2012 中应用程序的新版本，您可以使用[Application Supersedence](http://technet.microsoft.com/en-us/library/gg682071.aspx "应用程序取代")

...所以理论上我可以检测到文件夹中新产品 .msi 的删除，然后使用 powershell 自动取代。

现在我认为这对我的环境中的生产来说不是一个好主意，**真的这个问题是我通过写东西来思考的**。我被持续部署的想法所吸引，而不是生产（在我的环境中）。

# c++ - C ++如何将字符转换为数字而不是字符

> ID：16141079
> 
> 赞同：6
> 
> 时间：2013-04-22T06:53:33.327
> 
> 标签：c++, char, cin

我发现自己经常使用包含非常小的数字范围（通常从 1 到 10）的变量，并且希望通过使用 char 数据类型而不是 int 甚至 short 来最小化我使用的内存量。我想将 cin 值添加到我的 char 变量中，而不需要 cin 将其转换为它的 ASCII 等价物并且不使用单引号。即，以下内容：

```
cout<< "Pick from 1 to 10.";

char selection;

cin>> selection;

if (selection == 1) return 1; 
```

ETC...

有没有一种通用的方法来做到这一点？同样，我不想使用单引号。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:09:41.507

你可以创建一个小实用函数：

```
struct CharReader {
  char &c;
  CharReader(char &c) : c(c) {}
};

CharReader asNumber(char &c) {
  return CharReader(c);
}

template <typename T, typename Traits>
std::basic_istream<T, Traits>& operator>> (std::basic_istream<T, Traits> &str, const CharReader &c) {
  short i;
  str >> i;
  c.c = static_cast<char>(i);
  return str;
} 
```

你可以像这样使用它：

```
char selection;
std::cin >> asNumber(selection); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T07:05:25.180

保存三个字节（或零，因为编译器很可能无论如何都会对齐堆栈......）并使您的代码复杂化以读取数字是没有意义的。只需正常进行并将节省内存的工作放在重要的地方（如果您不知道重要的地方，那可能没关系）。

```
int selection;
if(!(cin >> selection) || selection < 0 || selection > 10) {
    // hmmm do something about it; perhaps scold the user.
}
place_where_it_is_getting_stored = selection; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:02:02.103

```
char selection;
cin >> selection;
selection -= '0'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T06:58:24.020

也许你应该试试

```
if (selection - '0' == 1) return 1; 
```

这是根据您的情况最简单的方法

# c# - wcf wshttpbinding 与用户名和密码验证器 ProtocolException+XmlException

> ID：16141080
> 
> 赞同：3
> 
> 时间：2013-04-22T06:53:45.227
> 
> 标签：c#, xml, wcf

我在服务器端有一个带有这个配置的 wcf 服务：

```
WSHttpBinding wshttp = new WSHttpBinding(SecurityMode.Message);
wshttp.ReceiveTimeout = new TimeSpan(0, 30, 0);
wshttp.MaxBufferPoolSize = 2147483647;
wshttp.MaxReceivedMessageSize = 2147483647;

wshttp.ReaderQuotas.MaxArrayLength = 2147483647;
wshttp.ReaderQuotas.MaxBytesPerRead = 2147483647;
wshttp.ReaderQuotas.MaxDepth = 2147483647;
wshttp.ReaderQuotas.MaxNameTableCharCount = 2147483647;
wshttp.ReaderQuotas.MaxStringContentLength = 2147483647;

wshttp.Security.Message.AlgorithmSuite = 
    System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256Sha256Rsa15;
wshttp.Security.Message.ClientCredentialType = MessageCredentialType.UserName;
CustomBinding cb = new CustomBinding(wshttp);
var clockSkew = new TimeSpan(2, 0, 0);
SymmetricSecurityBindingElement security = 
    cb.Elements.Find<SymmetricSecurityBindingElement>();
security.LocalClientSettings.MaxClockSkew = clockSkew;
security.LocalServiceSettings.MaxClockSkew = clockSkew;

// Get the 
// System.ServiceModel.Security.Tokens
//    .SecureConversationSecurityTokenParameters 
SecureConversationSecurityTokenParameters secureTokenParams = 
    (SecureConversationSecurityTokenParameters)
        security.ProtectionTokenParameters;

// From the collection, get the bootstrap element.
SecurityBindingElement bootstrap = 
    secureTokenParams.BootstrapSecurityBindingElement;

// Set the MaxClockSkew on the bootstrap element.
bootstrap.LocalClientSettings.MaxClockSkew = clockSkew;
bootstrap.LocalServiceSettings.MaxClockSkew = clockSkew;

EndpointAddress ea = 
    new EndpointAddress(
        new Uri("http://localhost:80/MyService"), 
        System.ServiceModel.EndpointIdentity.CreateDnsIdentity(
                                        "MyService Certeficate"));

isarService.AddServiceEndpoint(
        typeof(ServiceLayer.IService),
        cb, 
        new Uri("http://localhost:80/MyService")).Address = ea;

isarService.Open(); 
```

一半的配置在应用程序文件中，如下所示：

```
 <system.serviceModel>
    <bindings />
    <client />
    <services>
      <service behaviorConfiguration="ServiceBehavior" name="SL.Service">
        <endpoint address="mex" binding="
                  mexHttpBinding" 
                  bindingConfiguration=""
          name="MexHttpEndPoint" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:80/MyService" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceThrottling maxConcurrentCalls="100" 
                             maxConcurrentInstances="100" />
          <serviceCredentials>
            <clientCertificate>
              <authentication customCertificateValidatorType="" 
                              certificateValidationMode="ChainTrust" />
            </clientCertificate>
            <serviceCertificate findValue="MyService Certeficate" 
                                storeLocation="CurrentUser"
              storeName="Root" x509FindType="FindByIssuerName" />
            <userNameAuthentication 
                userNamePasswordValidationMode="Custom"
                customUserNamePasswordValidatorType="ServiceLayer.CUAPValidator,ServiceLayer" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

我记录了我的客户端错误，他们将日志文件发送给我，以修复我的许多客户的 app.application 工作，但其中一些有此错误：

**System.ServiceModel.ProtocolException** -> 从网络接收的 XML 存在问题。有关更多详细信息，请参阅内部异常。

**System.Xml.XmlException** -> 根级别的数据无效。第 1 行，位置 1。

我不知道 99 客户端什么时候可以很好地使用这个配置，为什么其中 3 个有这个问题！

**问题 ：**

请帮助我用最简单的方法解决这个问题。

**信息 ：**

我使用 Windows 服务托管我的服务。

**编辑1：**

我在客户端使用 svc 日志记录错误。然后我读到错误，错误就是这样。在服务器端，我在日志中看不到错误。我不知道有什么完全不同，但似乎不同的是互联网连接，我的意思是代理服务器或 vpn 等。

**编辑2：**

.net 版本会发生这种情况吗？因为第 4 版有一些更新。

**编辑 3：**

看到这个错误与其他可能的帮助相同

响应消息的内容类型 text/html 与绑定的内容类型不匹配 (application/soap+xml; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 1024 个字节是：' Error Message A { FONT-WEIGHT: bold; 字体大小：10pt；颜色：#005a80；FONT-FAMILY: tahoma } A:hover { FONT-WEIGHT: 粗体; 字体大小：10pt；颜色：#0d3372；FONT-FAMILY: tahoma } TD { FONT-SIZE: 8pt; FONT-FAMILY: tahoma } TD.titleBorder { BORDER-RIGHT: #955319 1px solid; 边框顶部：#955319 1px 实心；填充左：8px；字重：粗体；字体大小：12pt；垂直对齐：中间；左边框：#955319 0px 实心；颜色：#955319；BORDER-BOTTOM：#955319 1px 实心；字体家族：tahoma；高度：35px；背景颜色：#d2b87a；文本对齐：左} TD。titleBorder_x { BORDER-RIGHT: #955319 0px solid; 边框顶部：#955319 1px 实心；填充左：8px；字重：粗体；字体大小：12pt；垂直对齐：中间；左边框：#955319 1px 实心；颜色：#978c79；BORDER-BOTTOM：#955319 1px 实心；字体家族：tahoma；高度：35px；后退'。

和内部错误：

远程服务器返回错误：(500) 内部服务器错误。

# php - XMLHttpRequest 延迟启动会话

> ID：16141084
> 
> 赞同：0
> 
> 时间：2013-04-22T06:53:57.430
> 
> 标签：php, ajax, xmlhttprequest, innerhtml

我是 ajax 的初学者。当我将 ajax 用于搜索功能时，它会延迟启动操作

```
<script>
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?gender="+str,true);
xmlhttp.send();
}
</script> 
```

当`product.php`页面上的单选按钮被点击时`showUser(str)`被调用。该值在变量`gender`中被访问，`getuser.php`会话以变量中的值开始，`gender`sql查询使用会话变量执行

```
$sql="SELECT * FROM tbl_product WHERE gender = '".$_SESSION['gender']."'"; 
```

并且值在`txtHint`div 中回显。我的问题是当我第一次单击单选按钮时，该函数被调用，但该值未在页面中回显。当我重新加载页面并再次尝试时，它工作正常。请帮助解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:55:48.690

把你的代码放进去

```
window.onload 
```

功能。像这样

```
window.onload = function() {
      function showUser(str)
{
    if (str=="")
      {
      document.getElementById("txtHint").innerHTML="";
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","getuser.php?gender="+str,true);
    xmlhttp.send();
}
}; 
```

# c - 当文件大小增加时，如何为读取多个文件进行多路复用 I/O？

> ID：16141085
> 
> 赞同：0
> 
> 时间：2013-04-22T06:54:08.947
> 
> 标签：c, select, file-descriptor, multiplexing

在网络共享文件系统 (NFS) 上生成了许多文件。有一个类似的问题没有适当的解决方案：[inotify with NFS](https://stackoverflow.com/questions/4231243/inotify-with-nfs)。

我使用 select() 来测试文件是否可以读取新数据。（其实有些是来自socket描述符，这里只是简化了）。

但是，我发现即使文件直到文件结束，它仍然返回准备读取状态。

你能建议更好的方法来编写这段代码吗？

```
fd_set rfds;
struct timeval tv;
int retval;
int i,n,f1,f2,maxfd;
char buf[512];

f1 = fileno(fopen("f1", "rb"));
f2 = fileno(fopen("f2", "rb"));
maxfd = (f1 > f2) ? f1 : f2;

for (i=0; i<3; i++) {
    FD_ZERO(&rfds);
    FD_SET(f1, &rfds);
    FD_SET(f2, &rfds);

    tv.tv_sec = 5;
    tv.tv_usec = 0;

    retval = select(maxfd+1, &rfds, NULL, NULL, &tv);

    if (retval == -1)
        perror("select()");
    else if (retval) {
        printf("Data is available now.\n");
        if (FD_ISSET(f1, &rfds)) {
            n = read(f1, buf, sizeof(buf));
            printf("f1 is ready:%d read %d bytes\n", i, n);
        }
        if (FD_ISSET(f2, &rfds)) {
            n = read(f2, buf, sizeof(buf));
            printf("f2 is ready:%d read %d bytes\n", i, n);
        }
    } else
    printf("No data within five seconds.\n");
} 
```

如果我的 f1 和 f2 包含 3 个字节，输出将如下所示。

```
Data is available now.
f1 is ready:0 read 3 bytes
f2 is ready:0 read 3 bytes
Data is available now.
f1 is ready:1 read 0 bytes   <- I wish won't enter here
f2 is ready:1 read 0 bytes   <- I wish won't enter here
Data is available now.
f1 is ready:2 read 0 bytes   <- I wish won't enter here
f2 is ready:2 read 0 bytes   <- I wish won't enter here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:00:54.083

在 Unix 中，常规文件总是被认为是“快速设备”，所以它们不能被轮询。也就是说，正如您所发现的，如果您尝试对它们进行 select() 或 poll()，它们总是返回“就绪”。如果您尝试在常规 fd 上轮询，IIRC 特定于 Linux 的 epoll 会直接返回错误。

如果你想将这样的东西集成到你的事件循环中，你将不得不使用一些胶带。例如，有一个单独的线程以适当的时间间隔尝试读取（）/fstat（）/stat（）文件/fd，然后如果它检测到新数据可用，则向管道发送消息。然后在主事件循环中，您可以轮询管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:16:19.520

NFS 没有办法在文件更改时通知客户端，所以很不幸，您不走运。你需要投票。

# android - 在 Google Play 中更新 android 应用

> ID：16141088
> 
> 赞同：-1
> 
> 时间：2013-04-22T06:54:30.490
> 
> 标签：android

我们可以使用 Google play 中现有的原生应用程序私钥上传新的 Hybrid 构建吗？

新的混合版本将作为其现有本机应用程序的更新供用户使用，或者用户必须将其作为新应用程序下载。

如果我们将使用不同的包名称上传新构建，那么我们是否能够将构建作为现有构建的更新上传，或者它将被视为新应用程序。

如果我们将应用程序从混合降级到原生应用程序，那么我们是否能够上传新的原生应用程序构建作为现有应用程序的更新，或者它将被视为单独的构建。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:57:57.567

要在 Play 商店中更新应用程序，您需要使用相同的包名称并使用相同的密钥库对您的 apk 文件进行签名。您不能发布具有相同包名的两个应用程序！例如，如果您想上传您的应用程序的 beta 公开测试版本，您需要使用新的包名称上传它，但是已经安装了您的应用程序的用户将不会收到任何警报，因为它将是一个单独的应用程序。这取决于你到底想达到什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:06:02.473

有两件事：

**1.更新现有应用**

*   如果您想更新现有应用程序并希望现有用户作为更新接收，那么您必须使用相同的密钥签署您的应用程序，并且包名称必须相同。您需要在清单中增加版本代码和版本名称。

**2\. 启动新应用**

*   如果您想将它作为新应用程序启动，您需要使用唯一的包名称和密钥可以相同。它将被视为新应用程序。

我希望你清楚。

# android - 找不到在 AndroidManifest 中设置的 Activity 的类

> ID：16141089
> 
> 赞同：0
> 
> 时间：2013-04-22T06:54:31.683
> 
> 标签：android, xamarin.android

我定义了以下`activity`和：`intent filter``AndroidManifest.xml`

```
<application android:label="Test.SampleApp">    
        <activity android:name=".MainActivity"
                  android:launchMode="singleInstance"
                  android:stateNotNeeded="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.HOME"/>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

然后我有一个`Activity`设置为：

```
namespace Test.SampleApp
{
    public class MainActivity : Activity
    {
              //....
    }
} 
```

问题是当我启动应用程序时，它找不到 MainActivity 类：

```
E/AndroidRuntime( 2047): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{Test.SampleApp/Test.SampleApp.MainActivity}: java.lang.ClassNotFoundException: Test.SampleApp.MainActivity
E/AndroidRuntime( 2047):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
E/AndroidRuntime( 2047):        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
E/AndroidRuntime( 2047):        at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/AndroidRuntime( 2047):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
E/AndroidRuntime( 2047):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 2047):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 2047):        at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime( 2047):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 2047):        at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 2047):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime( 2047):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime( 2047):        at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 2047): Caused by: java.lang.ClassNotFoundException: Test.SampleApp.MainActivity
E/AndroidRuntime( 2047):        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
E/AndroidRuntime( 2047):        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime( 2047):        at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime( 2047):        at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
E/AndroidRuntime( 2047):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
E/AndroidRuntime( 2047):        ... 11 more
W/ActivityManager(  162):   Force finishing activity Test.SampleApp/.MainActivity 
```

我猜我在清单中没有正确引用活动？

我也尝试使用“Test.SampleApp.MainActivity”作为 android:name 的 vlue，但是清单根本无效并且无法解析。

我正在使用`Mono for Android`，现在我想知道 中使用的名称`manifest`，
它们是与 C# 命名空间相关还是与
特定于 Android 平台的其他东西相关？

注意：在清单中我也有`package="Test.SampleApp"`

**更新：**我添加了“。” 在 MainActivity 前面，但我仍然遇到完全相同的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:37:20.510

根据@Triode 的反馈（链接），我设法弄清楚了：

github 上示例应用程序中的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:versionCode="1" android:versionName="1.0" package="mono.actionbarsherlocktest">
    <uses-sdk android:minSdkVersion="7" />
    <application android:label="Mono.ActionbarsherlockTest">
    </application>
</manifest> 
```

这里的包名是`lower case`我的包名包含大写字母。
将包名称更改为`test.sampleapp`
并保持其他所有内容不变解决了这个问题。

我希望有一天这会对其他 monodroid 用户有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:55:39.053

通常，*不要*为 C# 提供的活动编写 XML 片段。相反，使用[自定义属性](http://docs.xamarin.com/guides/android/advanced_topics/working_with_androidmanifest.xml)并让构建系统为您担心。

```
namespace NamespaceName {

    [Activity(
            LaunchMode=Android.Content.PM.LaunchMode.SingleInstance,
            StateNotNeeded=true)]
    [IntentFilter (new[]{Android.Content.Intent.ActionMain},
            Categories=new[]{Android.Content.Intent.CategoryHome, Android.Content.Intent.CategoryDefault})]
    public class MainActivity : Activity {
       // ...
    }
} 
```

构建系统将生成`<activity/>`元素并使用完全限定的类型名称：

```
<activity android:name="namespacename.MainActivity"
        android:launchMode="singleInstance"
        android:stateNotNeeded="true">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

使用 XML 片段而不是自定义属性通常只有两个原因：

1.  该类型在 C# 中不存在，例如您`.apk`包含 Java 活动。
2.  您需要使用尚未通过自定义属性公开的 XML 属性/元素。

# java - 在本地保存文档时，是否可以将本地 word 文档编辑器上的编辑同步到其中央存储库文档（db 文档）？

> ID：16141093
> 
> 赞同：0
> 
> 时间：2013-04-22T06:54:45.700
> 
> 标签：java, version-control, ms-word, sync

我需要在 MSWord 文档管理（或任何文本文档编辑器）上实现一个 java 应用程序，并且 word 文档将存储在数据库或服务器等中央存储库中。许多用户将处理文档，这需要完整版本控制。所做的所有编辑/更改都应保存在中央文档中。

我的问题是，**是否可以在本地文档编辑器上打开和编辑中央文档（位于数据库中）上保存更改？**我的意思是，在访问和编辑中央文档时，我认为他们将在本地副本上执行此操作，并且文档保存操作如何可以将该更改同步到中央副本？有没有办法通过代码来实现它，比如**保存事件触发器**？

用户在其副本中所做的所有更改都应在中央副本上更新。我计划在这种情况下实现类似谷歌文档的工作。邀请您的宝贵建议和有用的链接（如果有）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:09:46.977

在 Java 中，您可以[监听文件系统并在文件更改时收到通知，](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)因此理论上您可以使用它来查看文档何时被编辑并将其上传到服务器。

但是，您需要解决这些问题：

*   如果 Java 应用程序在 Word 打开时关闭/崩溃，则不会检测到保存，并且用户对其文档的更改将丢失，并且他们将无法说明原因。
*   人们在编辑 Word 文档时一直保存它们，以免丢失数据，但他们只希望最终保存签入作为他们的修订版。
*   多个用户同时编辑同一个文档并覆盖彼此的更改。
*   在静默自动过程中，用户无法输入描述其更改的评论。

最好有一个手动签入/签出上传/下载过程，而不是尝试自动完成所有操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:34:09.537

这是我会考虑的：

一个（在您的情况下为 Java）GUI 应用程序，它显示中央存储库中的文档，并允许启动 Word（或其他）进行编辑，然后签出并将文档锁定在存储库中。然后，当 Word（或其他）进程退出时，将提交更改（可能在弹出确认对话框之后，用户可以选择放弃他们的编辑，或者被要求输入关于他们的更改的评论）并删除文件上的存储库锁定。

然后，您还需要一些机制来处理过时的锁（例如，当用户 PC 在未释放锁的情况下关闭/崩溃时）。请务必使用适用于二进制文件并支持服务器端文件锁定的 VCS，并对应用程序进行编码，以便在您的首选不理想时轻松更改 VCS 软件。

因此，您的 Java 应用程序可能通过执行其他程序来完成大部分工作（用于签出/锁定/提交的 VCS 二进制文件，用于编辑的 GUI 应用程序）。[虽然该应用程序看起来相当简单，但看看Netbeans RCP](https://netbeans.org/features/platform/)或[Eclipse RCP](http://wiki.eclipse.org/index.php/Rich_Client_Platform)之类的东西并在这样的平台上构建您的应用程序可能仍然值得。我自己并没有真正使用过它们，所以把它作为一个考虑和研究的想法，而不是作为推荐。

# javascript - 在新行中换行

> ID：16141095
> 
> 赞同：5
> 
> 时间：2013-04-22T06:54:48.793
> 
> 标签：javascript, jquery

我正在使用以下代码来包装长文本，用户在文本区域中输入以进行评论：

```
function addNewlines(comments) {
  var result = '';
  while ($.trim(comments).length > 0) {

    result += comments.substring(0,70) + '\n';
    comments = comments.substring(70);
  }
  return result;
} 
```

问题显示在下面的屏幕截图中。关于如何解决它的任何想法？我们可以使用`lastindexof(" ")`方法获取子字符串中的最后一个空格来从逻辑上解决这个问题吗？任何人都可以调整这个小代码以使其正确吗？

![输出截图](https://i.stack.imgur.com/Kka5M.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:12:01.437

我相信用 CSS 包装文本是一个更好的解决方案，但是这里有一个链接可能会有所帮助[wrap-text-in-javascript](https://stackoverflow.com/questions/14484787/wrap-text-in-javascript)

顺便说一句，我记得也有一个用于包装文本的 JQuery 插件谷歌它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:01:30.633

尝试其中之一：

1.  `word-wrap:no-wrap;`
2.  `word-wrap: break-word`

它可能会解决你的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:03:46.250

`word-wrap: break-word`在 CSS 中尝试。浏览器（甚至 IE 5.5+）很好地支持
该属性。 更多信息：[https](https://developer.mozilla.org/en-US/docs/CSS/word-wrap) ://developer.mozilla.org/en-US/docs/CSS/word-wrap 示例用法：[**FIDDLE**](http://jsfiddle.net/EBm9f/)`word-wrap`

[](http://jsfiddle.net/EBm9f/)

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-29T23:04:51.813

上面的那些只有 99% 的时间有效。这是唯一对我有用的 100%： http: [//locutus.io/php/strings/wordwrap/](http://locutus.io/php/strings/wordwrap/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T07:03:40.870

嗨，只需在文本区域上应用一些 CSS，例如

```
style="word-wrap: break-word;" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-11T12:34:39.067

我有同样的问题，我使用下面的函数解决了它。

```
function wordWrap(message, lineSize, breakPoint){
    let wordsArr = message.split(" "),
        wordsLen = wordsArr.length,
        finalMsg = "",
        linesArr = [""],
        currLine = 0;

    for(let i=0; i< wordsLen; i++){
        if(linesArr[currLine].length + wordsArr[i].length > lineSize){
            currLine +=1;
            linesArr[currLine] = wordsArr[i] + " ";
        } else {
            linesArr[currLine] += wordsArr[i] + " ";
        }
    }
    let linesLen = linesArr.length;
    for(let i=0; i<linesLen; i++){
        finalMsg += linesArr[i] + breakPoint;
    }
    return finalMsg.trim();
} 
```

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-12T04:29:22.687

我使用这个 css 代码在 Torch 浏览器中显示，它可以工作

我试过`word-wrap:break-word;overflow:ellipsis;`......等等，但没有奏效。

```
#xxx{

 width: 750px;
 word-break: break-word;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-01T16:50:18.210

在寻找使用正则表达式和其他实现的完美解决方案之后。我决定纠正我自己的。它并不完美，但对我的情况来说效果很好，当你的所有文本都是大写时，它可能无法正常工作。

```
function breakTextNicely(text, limit, breakpoints) {

  var parts = text.split(' ');
  var lines = [];
  text = parts[0];
  parts.shift();

  while (parts.length > 0) {
    var newText = `${text} ${parts[0]}`;

    if (newText.length > limit) {
      lines.push(`${text}\n`);
      breakpoints--;

      if (breakpoints === 0) {
        lines.push(parts.join(' '));
        break;
      } else {
      	text = parts[0];
	  }
    } else {
      text = newText;
    }
	  parts.shift();
  }

  if (lines.length === 0) {
    return text;
  } else {
    return lines.join('');
  }
}

var mytext = 'this is my long text that you can break into multiple line sizes';
console.log( breakTextNicely(mytext, 20, 3) );
```**

# wpf - Binding 和 VisualStateManager 不能一起工作

> ID：16141097
> 
> 赞同：1
> 
> 时间：2013-04-22T06:54:58.397
> 
> 标签：wpf, binding, visualstatemanager

我必须`VisualStateManager`控制当状态发生时，启用控制：

这是状态（字符串）的属性：

```
states:StateManager.VisualStateProperty="{Binding SomeProp}" 
```

这里`VisualStateManager`：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="VisualStateGroup">
        <VisualState x:Name="MyName">
            <Storyboard>                
                <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsEnabled)" Storyboard.TargetName="MyTextBox">
                    <DiscreteBooleanKeyFrame KeyTime="0" Value="True" />
                </BooleanAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
        <VisualState x:Name="HerName">
            <Storyboard>
               ...
            </Storyboard>
        </VisualState>
        <VisualState x:Name="This">
            <Storyboard>
               ...
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

这是我的文本框：

```
<TextBox Name="MyTextBox" /> 
```

我的问题是：当我将 TextBox 添加到以下行时会发生什么：

```
IsEnable= {Binding isProp}// isProp = bool 
```

在我看来，它消除了`IsEnable`of the`TextBox`而不是指他，只指`State`.

这是真的？有没有办法让它们都起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T15:19:33.413

在您的情况下，动画将优先于绑定，但前提是动画的时间轴正在运行。即当视觉状态为“MyName”时，动画将控制IsEnabled属性；否则，绑定将。

您可能对此[Dependency Property Value Precedence](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)列表感兴趣。绑定算作“本地值”，其优先级低于动画。

# kendo-ui - 使用嵌套对象进行网格排序

> ID：16141104
> 
> 赞同：0
> 
> 时间：2013-04-22T06:55:12.500
> 
> 标签：kendo-ui, kendo-grid

如何使用嵌套对象启用网格排序。例如，我有以下对象，我在本地绑定到网格

```
{
    DataId: 1,
    Duration: 4.5,
    Customer: {
        CustomerId: 1,
        Name: 'Foo'
    }
} 
```

现在我想启用对客户名称 (Customer.Name) 的排序。parse 方法对我不起作用，因为我编写了一个自定义编辑器模板，它用新选择的客户替换了完整的客户。

# c - 如何找到 1T 数字中出现频率最高的数字？

> ID：16141107
> 
> 赞同：0
> 
> 时间：2013-04-22T06:55:25.823
> 
> 标签：c, algorithm, sorting, find

如何找到 1T（即 10^12）个数中出现频率最高的数（int 类型）？

我的前提是：

*   我的内存限制为 4G（即 4·10^9）字节。
*   所有数字都存储在一个文件中作为输入。
*   输出只是一个数字。
*   所有数字（int 类型）都存储在一个或多个文件中
*   文件结构是二进制或行存储的。

* * *

编辑于：2013.04.22 17:08 感谢您的评论： 加： - 外部存储不受限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:01:36.930

首先要注意，这个问题至少和[元素区别问题](http://en.wikipedia.org/wiki/Element_distinctness_problem)一样难。

因此，解决方案应遵循相同的方法：

1.  排序（使用[外部排序](http://en.wikipedia.org/wiki/External_sorting)）并在计算每个数字的出现次数并寻找最大值时进行迭代。
2.  散列解决方案：将数字散列到适合内存的存储桶中（请注意，相同数字的所有出现都将散列到同一个存储桶），对于每个存储桶 - 找到最频繁的数字，并将其存储。然后从所有桶中遍历所有候选人并选择最好的。
    在这里，您可以对每个桶进行排序（在内存中）并找到最频繁的数字，或者您可以创建一个[直方图](http://en.wikipedia.org/wiki/Histogram)（使用哈希图，具有不同的哈希函数）来查找桶中每个项目的频率。
    请注意，存储桶被写入磁盘，并一个接一个地加载到内存中，每次只有一小部分数据存储在 RAM 中。

另一种更具可扩展性的方法是使用[map-reduce](http://en.wikipedia.org/wiki/MapReduce)，使用简单的 map-reduce 步骤来计算每个数字的出现次数，然后找到其中的最大值：

```
map(number):
  emit(number,'1')
reduce(number,list):
  emit (number, size(list)) 
```

剩下的就是找到具有最高值的数字 - 这可以在线性扫描中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:26:38.957

如何使用文件系统存储数字计数器？

例如，如果你的数字是 uint32，你可以创建 65536 个目录，每个目录有 65536 个文件。目录名将是数字的两个高字节，文件名 - 低两个字节。当您遇到数字 X 时，您将其拆分为两部分并获取文件名，打开该文件并在其中增加计数器（或在其中写入 1，如果文件不存在）。

填充该文件结构后，您可以递归地扫描具有最大价值的树查找文件。

那将非常缓慢，但几乎不会吃掉任何内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:00:58.637

蛮力：

*   记住 = 0;
*   重复：
    *   取第一个未标记的数字并计算它在文件 (n1) 中的出现次数。
    *   将每个出现的数字标记为已读。（用空格 fe 覆盖它）
    *   如果 (n1 > 记住) 记住 = n1;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:07:14.137

使用哈希表，键是数字，值是计数。O(n) 将所有数字插入哈希表 O(Unique numbers) 以找到最频繁的数字。

# c - 如何用coq证明ac程序的正确性

> ID：16141108
> 
> 赞同：5
> 
> 时间：2013-04-22T06:55:26.120
> 
> 标签：c, theorem-proving

我想证明我的一些程序的正确性，但我不知道从哪里开始。假设我有以下程序，我该如何证明它的正确性或缺乏。我怎样才能从下面的源代码中将它们插入定理证明器。Coq 或 ACL2 或几乎任何东西。

下面的代码只计算它从标准输入中读取的字节数。它有 2 个版本，一个逐字节计数，另一个尽可能以无符号整数大小的块读取它们。我知道它既不便携也不漂亮，这只是一个可以让我入门的例子。在一些帮助下。

代码有效，我知道它是正确的，我知道如何为它编写单元测试，但我不知道如何证明它。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

unsigned count_bytes1(unsigned char * bytes, unsigned len) {
    unsigned count=0;
    unsigned i;
    for (i=0;i<len;i++) {
        count+=bytes[i];
    }
    return count;
}
unsigned count_word(unsigned word) {
    unsigned tmp = word;
    if (sizeof(unsigned)==4) {
        tmp = (0x00FF00FFU&tmp) + (( (0xFF00FF00U)&tmp)>>8);
        tmp = (0x0000FFFFU&tmp) + (( (0xFFFF0000U)&tmp)>>16);
        return tmp;
    }
    if (sizeof(unsigned)==8) {
        tmp = (0x00FF00FF00FF00FFU&tmp) + (( (0xFF00FF00FF00FF00U)&tmp)>>8);
        tmp = (0x0000FFFF0000FFFFU&tmp) + (( (0xFFFF0000FFFF0000U)&tmp)>>16);
        tmp = (0x00000000FFFFFFFFU&tmp) + (( (0xFFFFFFFF00000000U)&tmp)>>32);
        return tmp;
    }
    return tmp;
}
unsigned count_bytes2(unsigned char * bytes, unsigned len) {
    unsigned count=0;
    unsigned i;
    for (i=0;i<len;) {
        if ((unsigned long long)(bytes+i) % sizeof(unsigned) ==0) {
            unsigned * words = (unsigned *) (bytes + i);
            while (len-i >= sizeof(unsigned)) {
                count += count_word (*words);
                words++;
                i+=sizeof(unsigned);
            }
        }
        if (i<len) {
            count+=bytes[i];
            i++;
        }
    }
    return count;
}

int main () {
    unsigned char * bytes;
    unsigned len=8192;
    bytes=(unsigned char *)malloc(len);
    len = read (0,bytes,len);
    printf ("%u %u\n",count_bytes1(bytes,len),count_bytes2(bytes,len));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T08:03:39.953

## 1\. 知道你在证明什么：规范

首先，决定你想为你的函数证明什么。例如，使用[ACSL](http://frama-c.com/acsl_tutorial_index.html)规范语言为您的函数编写合约：

```
/*@ ensures \result >= x && \result >= y; 
    ensures \result == x || \result == y; 
*/ 
int max (int x, int y); 
```

## 2\. 验证

然后，您可以证明您的实现满足规范，例如使用 Frama-C 的[WP 插件](http://frama-c.com/wp.html)。

WP 插件将生成证明义务，对其进行验证将确保实现在规范方面是正确的。如果你觉得有趣，你可以在 Coq 8.4+ 中证明这些（但实际上几乎没有人不首先应用可用的全自动 SMT 证明器，例如[Alt-Ergo](http://alt-ergo.lri.fr/)）。

* * *

PS：您似乎试图证明一个 C 函数等价于另一个，也就是说，使用一个简单的 C 函数作为优化函数的规范。证明一个相对于另一个的等价性是本文遵循的方法：

何塞·巴塞拉尔·阿尔梅达、曼努埃尔·巴博萨、豪尔赫·索萨·平托和芭芭拉·维埃拉。针对参考实现验证加密软件的正确性。在 FMICS'09，LNCS 第 5825 卷，第 37-52 页，2009 年。

# macos - .htaccess 重写 url - 来自 ~username - osx apache

> ID：16141109
> 
> 赞同：0
> 
> 时间：2013-04-22T06:55:26.237
> 
> 标签：macos, .htaccess, mod-rewrite, apache2

嗨，我在 mac 上使用 apache，我启用了 php。我正在尝试使用 .htacess 重写我的网址。

```
http://localhost/~username/project/test  to http://localhost/~username/project/index.php?url=test
But received 404 error - on retrieving url - http://localhost/~username/project/test .

But - this - http://localhost/~username/project/index.php?url=test - Php is working fine. 
```

我的 .htacess 文件包含以下五行：

* * *

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

* * *

我可以在 php info 的加载模块中看到 mod_rewrite。我如何调试它以找出是否正在调用 .htaccess 。

我的 .htaccess 文件的路径是 - ~username/Sites/project/.htaccess。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:08:11.127

从[故障排除](http://httpd.apache.org/docs/current/howto/htaccess.html#troubleshoot)

> 确保您没有对相关文件范围有效的 AllowOverride None。对此的一个很好的测试是将垃圾放入您的 .htaccess 文件并重新加载页面。如果未生成服务器错误，则几乎可以肯定 AllowOverride None 有效。

或者反过来，在 htaccess 中添加一些垃圾，即

```
Foobar 
```

并重新加载页面。如果您收到一些`500`服务器错误消息，`AllowOveride`则启用 htaccess ( )。

# android - 调用 View.setEnabled() 是否涉及 View.setClickable()？

> ID：16141114
> 
> 赞同：1
> 
> 时间：2013-04-22T06:55:35.717
> 
> 标签：android

我需要在一段时间内禁止用户与活动布局中的几个视图进行交互（取决于发生的指定事件）。我是否必须同时调用`setEnabled()`和`setClickable()`方法，或者可能`setEnabled()`隐含涉及`setClickable`？

# ruby-on-rails - 模型记录/实例特定视图

> ID：16141125
> 
> 赞同：0
> 
> 时间：2013-04-22T06:56:21.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 8 个计划供用户选择。这些计划都代表将导致产品添加到购物车中的表格。

一些计划会提出不同的问题。例如，计划 A、B、C 会询问用户是否要购买额外的插件。计划 D、E 将询问用户存储在其帐户中的总信用。

这似乎表明我们对每个计划都有不同的看法。但这意味着我们需要为每个计划添加显示和编辑操作。有点乏味。所以我想问一下 Rails 中是否有记录特定视图的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:08:58.947

不确定这是否可以以任何特定的结论性方式回答，但在这种情况下我会使用部分。

假设您的计划在`type`某个地方有一个字段，您可以执行以下操作

```
<%= render partial: "plan_#{@plan.type}" %> 
```

而这些部分中的每一个都`_plan_X.html.erb`包含您要显示的计划特定信息。您的所有视图都可以采用此模式（也许您的编辑操作具有不同的数据，具体取决于您的计划类型等。

# objective-c - 当作为参数传递给Objective-C中的方法时迭代va_list

> ID：16141126
> 
> 赞同：3
> 
> 时间：2013-04-22T06:56:27.030
> 
> 标签：objective-c, variadic-functions

我想将变量参数列表从一种方法（functionOne）传递给另一种方法（functionTwo）。一切正常，除了我无法弄清楚如何在 functionTwo 中设置 va_list，以便我可以访问 va_list 中的第一个参数。使用 va_arg 前进到 va_list 中的第二个参数。谢谢。

```
- (void)functionOne:(NSString *)configFiles, ... {
    va_list args;
    va_start(args, configFiles);
    [self functionTwo:args];
    va_end(args);
}

- (void)functionTwo:(va_list)files {
    NSString *file;
    while ((file = va_arg(configFiles, NSString *))) {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:06:32.467

第一个**可变**参数不是传递给的参数`va_start`——它是紧随其后的参数。如果您想`functionTwo:`访问该`configFiles`字符串，则需要显式传递它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:58:34.927

请参阅[技术问答 QA1405：Objective-C 方法中的变量参数](https://developer.apple.com/library/mac/#qa/qa1405/_index.html)。

> 采用可变参数的方法称为可变参数方法。
> 
> 请记住，Objective-C 方法的实现只是一段代码，就像 C 函数一样。stdarg(3) 手册页中描述的可变参数宏在方法中的工作方式与在普通函数中的工作方式相同。
> 
> 这是一个 Objective-C 类别的示例，其中包含一个可变参数方法，该方法将 nil 终止的参数列表中的所有对象附加到 NSMutableArray 实例：

```
#import <Cocoa/Cocoa.h>

@interface NSMutableArray (variadicMethodExample)

// This method takes a nil-terminated list of objects.
- (void)appendObjects:(id)firstObject, ...;

@end

@implementation NSMutableArray (variadicMethodExample)

- (void)appendObjects:(id)firstObject, ... {
    id eachObject;
    va_list argumentList;
    if (firstObject) // The first argument isn't part of the varargs list,
        {                                   // so we'll handle it separately.
      [self addObject: firstObject];
      // Start scanning for arguments after firstObject.
      va_start(argumentList, firstObject);
      while (eachObject = va_arg(argumentList, id)) // As many times as we can get an argument of type "id"
      [self addObject: eachObject]; // that isn't nil, add it to self's contents.
      va_end(argumentList);
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-19T17:27:55.123

我用于调试目的的解决方案就像

```
-(void) debug:(NSString*)format, ... {

    if (level < MXMLogLevelDebug) return;

    if(format == nil) return;

    va_list args, args_copy;
    va_start(args, format);
    va_copy(args_copy, args);
    va_end(args);

    NSString *logString = [[NSString alloc] initWithFormat:format
                                                  arguments:args_copy];

    NSString *funcCaller = @"";
    NSArray *syms = [NSThread  callStackSymbols];
    if ([syms count] > 1) {
        funcCaller = [syms objectAtIndex:1];
    }
    NSString *logMessage = [NSString stringWithFormat:@"%@ DEBUG: %@", funcCaller, logString];

    NSLog(@"%@",logMessage);

} 
```

这可能产生的副作用是您必须在 args 上添加一个保护以确保它不为 NULL。

# cakephp-2.0 - 如何将原始 sql 查询传递给 cakephp 中的分页器组件

> ID：16141127
> 
> 赞同：1
> 
> 时间：2013-04-22T06:56:32.927
> 
> 标签：cakephp-2.0

我有行 sql 查询，我想在 cakephp 分页器组件的帮助下对这个查询进行分页。我怎么能？

```
$q = "SELECT
                `UserList`.`id`,`UserList`.`user_id`,`UserList`.`list_user_id`,
                `User`.`username` ,`User`.`id` ,
                `UserDetail`.`sex`,`UserDetail`.`image`,`UserDetail`.`display_name`,`UserDetail`.`country`,`UserDetail`.`height`,`UserDetail`.`weight`,`UserDetail`.`hair_color`,`UserDetail`.`eye_color`
                from `user_lists` as `UserList` 
                inner join `users` as `User` on `UserList`.`list_user_id` = `User`.`id`
                inner join `user_details` as `UserDetail` on `UserList`.`list_user_id` = `UserDetail`.`user_id`
                where ((`UserList`.`user_id`=".$user_id.") and (`UserList`.`in_list`='short')) order by `UserList`.`created` desc limit 1";
$this->paginate = array(
                'conditions' => /*Pass $q here */,
            'limit' => 15,
            )
        ); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T09:47:10.917

## 你不

这只是行不通，但从问题中的查询来看，您只需要照常使用分页[：](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)

```
class UserListsController extends AppController {

    public $paginate = array(
        'contain' => array(
            'User',
            'UserDetail'
        )
    );

    public function index($userId = null) {
        $conditions = array(
            'user_id' => $userId,
            'in_list' => 'short'
        );

        $data = $this->paginate($conditions);
        $this->set('data', $data);
    }

} 
```

# asp.net - .NET MVC 4 自定义控件

> ID：16141128
> 
> 赞同：2
> 
> 时间：2013-04-22T06:56:34.400
> 
> 标签：asp.net, asp.net-mvc-4

我正在使用 MVC 4 做一个新的 .NET 项目

它将有很多重复的内容，我想知道是否最好使用自定义控件来完成，或者它们是否真的不再使用了。

如果不是这样的最佳做法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:01:47.027

如果没有对“大量重复内容”所涉及的内容进行更具体的描述，我无法给出一个很好的答案。

但是，我认为您应该特别了解两件事，哪些可以充分回答这个问题。

第一个是助手。这可以以 HtmlHelpers 和 Razor 助手的形式出现。两者都学。

第二个是部分视图。它们对于重复的内容非常有帮助，并且通常会解决您不想重复自己的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:03:30.703

检查以下链接。这可能对你有帮助

[http://www.codeproject.com/Articles/32356/Custom-controls-in-ASP-NET-MVC](http://www.codeproject.com/Articles/32356/Custom-controls-in-ASP-NET-MVC)

# android - 如何使包裹在 ScrollView 中的 TEXTVIEW 可点击？

> ID：16141131
> 
> 赞同：1
> 
> 时间：2013-04-22T06:56:36.533
> 
> 标签：android, android-layout

这是布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:descendantFocusability="blocksDescendants"
android:orientation="horizontal" >

<TextView
    android:id="@+id/column"
    android:layout_width="85dp"
    android:layout_height="30dp"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:text="@string/column"
    android:gravity="center"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<com.example.demohlistview.InterceptScrollContainer
    android:id="@+id/scroollContainter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"         
    android:layout_toRightOf="@id/column"
    android:focusable="false"
     >

    <com.example.demohlistview.MyHScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scrollbars="none" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            >

            <View 
                android:layout_width="0.5dp"
                android:layout_height="match_parent"
                android:background="@color/lineColor"
                android:visibility="visible"
                 android:clickable="true"
                android:focusableInTouchMode="true"
                />
            <TextView
                android:id="@+id/column1"
                android:layout_width="85dp"
                android:layout_height="30dp"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:text="@string/column1"
                android:gravity="center"
                android:textAppearance="?android:attr/textAppearanceMedium" 
                />
            <View 
                android:layout_width="0.5dp"
                android:layout_height="match_parent"
                android:background="@color/lineColor"
                android:visibility="visible"/>
            <TextView
                android:id="@+id/column2"
                android:layout_width="85dp"
                android:layout_height="30dp"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:text="@string/column2"
                android:gravity="center"
                android:textAppearance="?android:attr/textAppearanceMedium" 
                />
            <View 
                android:layout_width="0.5dp"
                android:layout_height="match_parent"
                android:background="@color/lineColor"
                android:visibility="visible"/>
            <TextView
                android:id="@+id/column3"
                android:layout_width="85dp"
                android:layout_height="30dp"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:text="@string/column3"
                android:gravity="center"
                android:textAppearance="?android:attr/textAppearanceMedium" 
                />
        </LinearLayout>

    </com.example.demohlistview.MyHScrollView>
</com.example.demohlistview.InterceptScrollContainer> 
```

这是 MyHSrollView：

```
public class MyHScrollView extends HorizontalScrollView {
ScrollViewObserver mScrollViewObserver = new ScrollViewObserver();

public MyHScrollView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
}

public MyHScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

public MyHScrollView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    Log.i("pdwy","MyHScrollView onTouchEvent");
    return super.onTouchEvent(ev);
}

@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {

    if (mScrollViewObserver != null /*&& (l != oldl || t != oldt)*/) {
        mScrollViewObserver.NotifyOnScrollChanged(l, t, oldl, oldt);
    }
    super.onScrollChanged(l, t, oldl, oldt);
}

public void AddOnScrollChangedListener(OnScrollChangedListener listener) {
    mScrollViewObserver.AddOnScrollChangedListener(listener);
}

public void RemoveOnScrollChangedListener(OnScrollChangedListener listener) {
    mScrollViewObserver.RemoveOnScrollChangedListener(listener);
}

public static interface OnScrollChangedListener {
    public void onScrollChanged(int l, int t, int oldl, int oldt);
}

public static class ScrollViewObserver {
    List<OnScrollChangedListener> mList;

    public ScrollViewObserver() {
        super();
        mList = new ArrayList<OnScrollChangedListener>();
    }

    public void AddOnScrollChangedListener(OnScrollChangedListener listener) {
        mList.add(listener);
    }

    public void RemoveOnScrollChangedListener(
            OnScrollChangedListener listener) {
        mList.remove(listener);
    }

    public void NotifyOnScrollChanged(int l, int t, int oldl, int oldt) {
        if (mList == null || mList.size() == 0) {
            return;
        }
        for (int i = 0; i < mList.size(); i++) {
            if (mList.get(i) != null) {
                mList.get(i).onScrollChanged(l, t, oldl, oldt);
            }
        }
    }
} 
```

}

这是我的`MainActivity`：

```
public class MainActivity extends Activity{
ListView mListView1;
MyAdapter myAdapter;
RelativeLayout mHead;
LinearLayout main;
TextView text1;
private static String TAG = "MainActivity";
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);

    mHead = (RelativeLayout) findViewById(R.id.head);

    mHead.setBackgroundResource(R.color.listHeadColor);
    mHead.setOnTouchListener(new ListViewAndHeadViewTouchLinstener());

    mListView1 = (ListView) findViewById(R.id.listView1);

    myAdapter = new MyAdapter(this, R.layout.item);
    mListView1.setAdapter(myAdapter);

    mListView1.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View view, MotionEvent motionevent) {
            Log.e(TAG,"--------setOnTouchListener");
            HorizontalScrollView headSrcrollView = (HorizontalScrollView) mHead
                    .findViewById(R.id.horizontalScrollView1);
            headSrcrollView.onTouchEvent(motionevent);

            return false;
        }
    });
    mListView1.setOnItemClickListener(new ListView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> listView, View view, int position,
                long arg3) {
            MyAdapter.ViewHolder holder = (MyAdapter.ViewHolder) view.getTag();
            holder.txt1.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Log.i(TAG, "--------onclick");
                }
            });
            Log.e(TAG, "--------setOnItemClickListener");
            myAdapter.setSelectedPosition(position);
            myAdapter.notifyDataSetInvalidated();   
        }
    });

}

class ListViewAndHeadViewTouchLinstener implements View.OnTouchListener {

    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
        HorizontalScrollView headSrcrollView = (HorizontalScrollView) mHead
                .findViewById(R.id.horizontalScrollView1);
        headSrcrollView.onTouchEvent(arg1);
        return false;
    }
}

public class MyAdapter extends BaseAdapter {
    public List<ViewHolder> mHolderList = new ArrayList<ViewHolder>();

    int id_row_layout;
    LayoutInflater mInflater;

    private int selectedPosition = -1;

    public MyAdapter(Context context, int id_row_layout) {
        super();
        this.id_row_layout = id_row_layout;
        this.mInflater = LayoutInflater.from(context);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 250;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    public void setSelectedPosition(int position) {
        this.selectedPosition = position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parentView) {
        ViewHolder holder = null;
        if (convertView == null) {
            synchronized (MainActivity.this) {
                convertView = mInflater.inflate(id_row_layout, null);
                holder = new ViewHolder();

                MyHScrollView scrollView1 = (MyHScrollView) convertView
                        .findViewById(R.id.horizontalScrollView1);
                holder.scrollView = scrollView1;
                holder.txt = (TextView) convertView
                        .findViewById(R.id.column);
                holder.txt.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        Log.i("jacob", "tex.onClick()");

                    }
                });
                holder.txt1 = (TextView) convertView
                        .findViewById(R.id.column1);
                holder.txt1.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        Log.i("jacob", "tex1111.onClick()!!!");

                    }
                });
                holder.txt2 = (TextView) convertView
                        .findViewById(R.id.column2);
                holder.txt3 = (TextView) convertView
                        .findViewById(R.id.column3);

                MyHScrollView headSrcrollView = (MyHScrollView) mHead
                        .findViewById(R.id.horizontalScrollView1);
                headSrcrollView
                        .AddOnScrollChangedListener(new OnScrollChangedListenerImp(
                                scrollView1));
                convertView.setTag(holder);
                mHolderList.add(holder);
            }
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.txt.setText(position + "" + 11);

        holder.txt1.setText(position + "" + 1);

        holder.txt2.setText(position + "" + 2);
        holder.txt3.setText(position + "" + 3);

        int intervalColor1 = getResources().getColor(R.color.intervalColor1);
        int intervalColor2 = getResources().getColor(R.color.intervalColor2);
        int[] colors = { intervalColor1, intervalColor2};
        convertView.setBackgroundColor(colors[position % 2]);
        if (selectedPosition == position) {
            convertView.setBackgroundColor(Color.GREEN);
        }   

        return convertView;
    }

    class OnScrollChangedListenerImp implements OnScrollChangedListener {
        MyHScrollView mScrollViewArg;

        public OnScrollChangedListenerImp(MyHScrollView scrollViewar) {
            mScrollViewArg = scrollViewar;
        }

        @Override
        public void onScrollChanged(int l, int t, int oldl, int oldt) {
            mScrollViewArg.smoothScrollTo(l, t);
        }
    };

    class ViewHolder{
        TextView txt;
        TextView txt1;
        TextView txt2;
        TextView txt3;
        HorizontalScrollView scrollView;
    }
}// end class my 
```

}

这里`InterceptScrollContainer`是：

```
public class InterceptScrollContainer extends LinearLayout {

public InterceptScrollContainer(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

public InterceptScrollContainer(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {

    Log.i("pdwy","ScrollContainer onInterceptTouchEvent");
    return true;
} 
```

}

让我感到困惑的是，滚动视图之外的文本视图是可点击的，并在 logcat 中打印 tex.onClick()，但 holder.tet1 是不可点击的，并且不打印“tex1111.onClick()！！！”

我的问题是如何使我的 CUSTOM ScrollView 中的所有 TEXTVIEW 都可点击？我认为点击事件在某处停止并且没有传递到目标文本视图

# c# - Mono for Android JavaList 转换为 List，反之亦然

> ID：16141137
> 
> 赞同：0
> 
> 时间：2013-04-22T06:57:07.787
> 
> 标签：c#, mono, xamarin.android

如何**将** **JavaList**转换为**List**，反之亦然？我想使用 LINQ，但我不能用 JavaList 做到这一点，因为我不能从任何东西转换到 JavaList。有什么建议我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:25:03.803

例如，以这种方式在 JavaList 和 List 之间切换应该没有问题：

```
 JavaList<int> a = new JavaList<int>{4, 3, 2, 1};
        List<int> b = a.Where(v => v >= 2).ToList();
        JavaList<int> c = new JavaList<int>(b); 
```

但是，最好了解后果，请查看[Xamarin API 设计中的第 4 章](http://docs.xamarin.com/guides/android/advanced_topics/api_design)。

# ios - 当我按下注册按钮时，我的应用程序已崩溃，但数据已成功插入数据库

> ID：16141138
> 
> 赞同：0
> 
> 时间：2013-04-22T06:57:09.153
> 
> 标签：ios, nsstring, uibutton, nsmutablearray, nsdictionary

这是我的响应代码。

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

NSDictionary *LoginResult = (NSDictionary*)[responseString JSONValue];

NSLog(@"Success");

NSMutableArray *wholeJsonArray = [LoginResult objectForKey:@"Response"];

for(NSDictionary *countname in wholeJsonArray)
{

    NSString *countryName = [countname objectForKey:@"country_name"];
    if(countryName)
        [countryArray addObject:countryName];
    NSString *stateName=[countname objectForKey:@"state_name"];
    if(stateName)
        [stateArray addObject:stateName];
} 
```

上面的代码是检索到 country name 和 statename 。

`NSString *countryName = [countname objectForKey:@"country_name"];`当我在按下按钮后调试我的代码时，应用程序应该在行光标点崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:06:29.700

`NSMutableArray *wholeJsonArray`不包含`NSMutableDictionary`；`NSString`相反，它包含。请检查您的阵列内容。

# javascript - 解码脚本文件（.js）

> ID：16141141
> 
> 赞同：-2
> 
> 时间：2013-04-22T06:57:20.107
> 
> 标签：javascript, jquery, deobfuscation

我有以下加密脚本：

```
eval(function (p, a, c, k, e, r) {
    e = function (c) {
        return (c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36))
    };
    if (!''.replace(/^/, String)) {
        while (c--) r[e(c)] = k[c] || e(c);
        k = [function (e) {
                return r[e]
            }
        ];
        e = function () {
            return '\\w+'
        };
        c = 1
    };
    while (c--) if (k[c]) p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c]);
    return p
}('z(t(p,a,c,k,e,r){e=t(c){u c.F(a)};v(!\'\'.x(/^/,A)){y(c--)r[e(c)]=k[c]||e(c);k=[t(e){u r[e]}];e=t(){u\'\\\\w+\'};c=1};y(c--)v(k[c])p=p.x(B C(\'\\\\b\'+e(c)+\'\\\\b\',\'g\'),k[c]);u p}(\'h(6(p,a,c,k,e,r){e=8;9(!\\\'\\\'.d(/^/,8)){f(c--)r[c]=k[c]||c;k=[6(e){7 r[e]}];e=6(){7\\\'\\\\\\\\i+\\\'};c=1};f(c--)9(k[c])p=p.d(j l(\\\'\\\\\\\\b\\\'+e(c)+\\\'\\\\\\\\b\\\',\\\'g\\\'),k[c]);7 p}(\\\'$(0).1(2(){3("4")});\\\',5,5,\\\'m|n|6|o|q\\\'.s(\\\'|\\\'),0,{}))\',D,D,\'||||||t|u|A|v||||x||y||z|w|B||C|G|H|I||J||E\'.E(\'|\'),0,{}))', 46, 46, '|||||||||||||||||||||||||||||function|return|if||replace|while|eval|String|new|RegExp|29|split|toString|document|ready|alert|hi'.split('|'), 0, {})) 
```

任何人都可以解密脚本并让我知道源代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:02:14.817

`$(document).ready(function () { alert("hi") });`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:12:31.017

[首先从这里](http://yaisb.blogspot.it/2006/10/defeating-dean-edwards-javascript.html)获取 reEnable 小书签，然后转到[Dean Edward Packer](http://dean.edwards.name/packer/)

单击小书签以启用文本区域并按多次解码以获取消息：

```
$(document).ready(function(){alert("hi")}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:13:53.680

我相信这是[Dean Edwards /packer/](http://dean.edwards.name/packer/)：

此外，要查看反混淆的代码，只需将 替换为`eval`，`alert`或直接使用他的解包器：

*   **[院长爱德华兹拆包机](http://dean.edwards.name/unpacker/)**
*   **[JS解包](http://jsunpack.jeek.org/)**

解压代码：

```
$(document).ready(function() { 
    alert("hi")
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:03:00.827

试试这个，创建 html 文件并在脚本标签中执行以下操作

这

```
 <script>
      eval(function(p, a,...);
     <script/> 
```

到

```
 <script>
      document.write(function(p, a,...);
     <script/> 
```

# objective-c - 我应该如何在 camelCase 中用破折号写单词？

> ID：16141148
> 
> 赞同：2
> 
> 时间：2013-04-22T06:57:41.717
> 
> 标签：objective-c, camelcasing, code-standards

例如：[元信息](http://en.wikipedia.org/wiki/Meta-information)

`metaInfornation`,`metainformation`或`metainfo`?

`getMetainfo`,`getMetaInfo`或`getMetaInformation`?

Objective-C风格呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:12:58.193

我个人是 camelCase 的粉丝，没有缩写。所以我会使用`metaInformation`. `metaInfo`也很好，因为它是一个非常常见的缩写。
我不喜欢的是类似`printAttr`或类似的东西。

Apple 有关于该主题的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html)，描述了这些约定。

*请注意，您不应该**在**您的吸气剂中使用`get`！*

当您应用这些约定时，您有很多机会（例如[Key-Value-Coding](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:59:39.967

如果它是一个属性，那么你会想要使用`metaInformation`or `metaInfo`，它会将 getter 生成为`-metaInformation`or `-metaInfo`。永远不要在方法名称中使用 get。

# magento - 在 Magento 中启用平面模式时以编程方式创建类别

> ID：16141149
> 
> 赞同：0
> 
> 时间：2013-04-22T06:57:42.700
> 
> 标签：magento, categories, flat

我想以编程方式在模块的数据文件夹中创建一个类别。平面类别选项已启用。

当我尝试像这样创建一个类别时：

```
$category
    ->setStoreId(0)
    ->setName('My category')
    ->setUrlKey('club-campaigns')
    ->setPath($rootCategory->getPath())
    ->setIsActive(1)
    ->setIsAnchor(1)
    ->setIncludeInMenu(1)
    ->addData($data)
    ->setCustomDesignApply(1)
    ->save(); 
```

我收到一个错误，指出 catalog_category_flat 不存在。好的，所以我知道平面类别信息保存在 catalog_category_flat_store_storenumber 表中。我查看了数据库，我有以下表格：

catalog_category_flat_store_1
catalog_category_flat_store_2
catalog_category_flat_store_3
catalog_category_flat_store_4
catalog_category_flat_store_5
catalog_category_flat_store_6

我想为商店 6 创建一个类别。很好，现在如果我这样做：

```
$category
    ->setStoreId(6)
    ->setName('My category')
    ->setUrlKey('club-campaigns')
    ->setPath($rootCategory->getPath())
    ->setIsActive(1)
    ->setIsAnchor(1)
    ->setIncludeInMenu(1)
    ->addData($data)
    ->setCustomDesignApply(1)
    ->save(); 
```

该类别的创建没有错误，它在 catalog_category_flat_store_6 中设置了信息，但是如果我转到 admin>Manage Categories 并且看不到我的类别已创建。

我认为，当我创建一个类别时，我应该设置 admin(0) 的商店 ID，以便我可以在管理面板中看到它，但随后我收到上面的错误，如果我使用商店 6 创建，我看不到它在管理员中。我真的被困住了。

如何以编程方式正确创建我的类别而不会出现问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:26:37.757

**动态创建类别：**

```
$category = Mage::getModel('catalog/category');
$category->setStoreId(Mage::app()->getStore()->getId());

$cat['name'] = "Custom Category Name here";
$cat['path'] = "1/2/30"; //parent relationship..
$cat['description'] = "categorie's description";
$cat['is_active'] = 1;
$cat['is_anchor'] = 0; //for layered navigation
$cat['page_layout'] = 'two_columns_left';
$cat['url_key'] = "custom-category"; //url to access this category
$cat['image'] = "custom-category.jpg";

$category->addData($cat);
$category->save(); 
```

**然后动态重新索引 catalog_category_flat：**

```
$process = Mage::getSingleton('index/indexer')->getProcessByCode('catalog_category_flat');
$process->reindexEverything(); 
```

# jsf-2 - PrimePush 计数器实现

> ID：16141150
> 
> 赞同：2
> 
> 时间：2013-04-22T06:57:47.567
> 
> 标签：jsf-2, primefaces, primepush

我正在尝试在我的项目中实现主推计数器。我正在使用 PrimeFaces3.5、Jboss7.0 和 Eclipse Indigo 版本。

我添加了与主推相关的罐子：

1.  大气注释-1.0.1.jar
2.  大气兼容-jbossweb-1.0.1.jar
3.  大气兼容tomcat-1.0.1.jar
4.  大气兼容-tomcat7-1.0.1.jar
5.  大气运行时-1.0.1.jar
6.  primefaces-3.5.jar 和 jsf 和 slf4j 罐子

我的 xhtml 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">
<h:head></h:head>
<h:body>
    <h:form id="form">
        <h:outputText id="out" value="#{pushBean.count}" />
        <p:commandButton value="Click" actionListener="#{pushBean.increment}" />
    </h:form>
    <p:socket onMessage="handleMessage" channel="/counter" />
    <script type="text/javascript">
         function handleMessage(data) {
           $('.display').html(data);
         }
    </script>
</h:body>
</html> 
```

我的托管bean：

```
@ManagedBean(name = "pushBean")
@ApplicationScoped
public class PushBean {

    public PushBean() {
    }

    private int count;

    public int getCount() {
        return this.count;
    }

    public void setCount(final int count) {
        this.count = count;
    }

    public synchronized void increment() {
        this.count++;
        PushContext pushContext = PushContextFactory.getDefault().getPushContext();
        pushContext.push("/counter", String.valueOf(this.count));
    }

} 
```

当我单击 UI 中的按钮时，计数在服务器上增加，但它不会自动反映在 UI 中，因为它没有更新。但是当我刷新页面时，计数会按预期增加。

* * *

我得到的例外是：

```
13:00:02,298 ERROR [stderr] (http--0.0.0.0-8080-5) [http--0.0.0.0-8080-5] ERROR org.atmosphere.cpr.AtmosphereFramework - AtmosphereFramework exception

13:00:02,298 ERROR [stderr] (http--0.0.0.0-8080-5) java.lang.IllegalStateException: The servlet or filters that are being used by this request do not support async operation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:33:46.137

当您的 Web 应用程序在符合 Servlet 3 的容器中运行时，会发生此异常。正确的 web.xml 必须将 async-supported 元素设置为 true，例如：

```
 <servlet> 
        <servlet-name>Push Servlet</servlet-name> 
        <servlet-class>org.primefaces.push.PushServlet</servlet-class> 
        <async-supported>true</async-supported> 
    </servlet> 
```

参考：[安装气氛](https://github.com/Atmosphere/atmosphere/wiki/Installing-Atmosphere)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:12:12.500

我不太确定推送框架，但我认为问题出在你的 javascript 上。您正在尝试刷新“.display”控件，但没有 .display 之类的东西。

尝试 '.out' 而不是 .display

# php - 更新：没有错误，如果条目不存在

> ID：16141155
> 
> 赞同：0
> 
> 时间：2013-04-22T06:58:03.167
> 
> 标签：php, sql

我只是想知道：如果一个条目不存在，“更新”也会进行“更新”吗？我使用以下代码，并且 if 语句始终具有“成功”，尤其是当“WHERE”找不到电子邮件时。我是否必须检查电子邮件是否存在于表格中？

```
$email=...;
if ($update_stmt = $mysqli->prepare("UPDATE members SET password = ?, salt = ? WHERE email='".$email."'"))
         {
         $update_stmt->bind_param('ss', $password, $random_salt);

         $update_stmt->execute()
         header("Location: ...?success=1");
         }
         else
            header("Location: ...?error=1"); 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:01:04.413

那是因为**如果匹配存在或不存在，您会重定向**

```
$update_stmt->execute()
if($update_stmt->affected_rows != 0)
{
    header("Location: ...?success=1");
}
else
{   
    header("Location: ...?error=1");
} 
```

还要在查询之前将其删除`if`，因此最终代码将如下所示

```
$update_stmt = $mysqli->prepare("UPDATE members SET password = ?, salt = ? WHERE email='".$email."'"))
$update_stmt->bind_param('ss', $password, $random_salt);
$update_stmt->execute()
if($update_stmt->affected_rows != 0)
{
    header("Location: ...?success=1");
}
else
{   
    header("Location: ...?error=1");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:09:48.180

```
$email=...;
$mysqli->prepare("UPDATE members SET password = ?, salt = ? WHERE email='".$email."'"))
$update_stmt->bind_param('ss', $password, $random_salt);
$update_stmt->execute();

if ($update_stmt->affected_rows > 0){
   header("Location: ...?success=1");
         }
else
   header("Location: ...?error=1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:01:40.103

您需要检索受先前操作影响的行数。这是由 提供的[`affected_rows`](http://php.net/manual/en/mysqli.affected-rows.php)。

```
if ($mysqli->affected_rows == 1)
{
   echo 'A record was deleted';
} 
```

# database - 多用户基于 CouchDB 的应用程序的最佳实践？

> ID：16141158
> 
> 赞同：2
> 
> 时间：2013-04-22T06:58:18.530
> 
> 标签：database, authorization, couchdb, backend, multi-user

我从头开始创建一个 CMS，并决定使用 CouchDB 作为我的数据库解决方案。对于我的 CMS，我需要各种帐户，当然还有不同的用户角色（管理员、作者、*未注册*用户等）。

首先，我想我自己会在我的 CMS 中编写授权，但是 CouchDB 内置了类似的东西，所以我想问：

**使用 CouchDB 创建多用户应用程序的最佳实践是什么？**

1.  只为 CouchDB 创建一个管理员并自己管理限制、角色和帐户？
2.  使用 CouchDB 的内置功能来完成这一切？（假设为 CMS 的每个管理员创建一个 CouchDB 管理员用户？）

如果我以后想添加其他 3rd-party 授权怎么办？假设我希望用户通过 Twitter/Facebook/Google 登录？

问候， 皮波

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:34:54.437

关键问题是您是否想向公众公开 CouchDB。

如果您想将您的 CMS 构建为经典的 3 层架构，其中 CouchDB 只能从特权脚本层（例如 PHP）访问，那么我建议您推出自己的授权系统。这将使您更好地控制授权逻辑。特别是，您可以实现基于文档的读取访问控制（在 CouchDB 安全系统中不可用）。

相反，如果您想向公众公开 CouchDB，情况就不同了。您实际上无法编写服务器端逻辑（通过更改提要的单独异步侦听器除外），因此您*必须使用*CouchDB 内置的身份验证/授权系统。这限制了您在数据库级别（而不是文档级别！）上控制读取访问。可以使用验证功能控制写访问。CouchDB 管理员不应等同于应用程序管理员，因为 CouchDB 管理员与传统设置中的服务器管理员相当。CouchDB 中的数据库管理员会更合适（可以更改设计文档并因此对 CMS 安装进行修改，例如添加插件）。所有其他具有写访问权限的用户都可以实现为数据库成员。

我更喜欢第二种方法，因为这将使您有可能利用 CouchDB 的所有出色功能，例如复制和更改提要。但是，如果您需要细粒度的读取访问控制，则必须在具有不同成员的数据库之间进行一些过滤复制。

如果您想使用 CouchDB 提供的身份验证机制以外的其他身份验证机制，您最终将不得不修改安装（如果您想使用托管的 CouchDB，这可能是一个问题）。对于 facebook 插件，请参见[https://github.com/ocastalabs/CouchDB-Facebook-Authentication](https://github.com/ocastalabs/CouchDB-Facebook-Authentication)。

# grails - Grails 导入 NetBeans 错误

> ID：16141161
> 
> 赞同：0
> 
> 时间：2013-04-22T06:58:35.473
> 
> 标签：grails, netbeans

我的`main.gsp`文件顶部有这段代码

```
<%@ page import="com.somethingToImport"%> 
```

NetBeans 给我一个错误：`expecting EOF, found 'import' @ line 1, column 20` 我认为这导致我的应用程序在 IE 中崩溃。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:00:35.410

这应该有助于解决 IE 问题，但不会修复 NetBeans 的抱怨。尝试`DOCTYPE`在 GSP 的第一行中包含 。

例子：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <%@ page import="com.somethingToImport" %> 
    <html xmlns="http://www.w3.org/1999/xhtml"> 
```

*注意：我在导入和 '%' 之间添加了一个空格*

# c# - 我们可以将数据表从业务层传递到表示层吗？

> ID：16141165
> 
> 赞同：2
> 
> 时间：2013-04-22T06:58:43.370
> 
> 标签：c#, asp.net

我正在做一个3层架构的项目，我需要问我们是否可以将数据表直接传递到表示层，因为它来自数据层，这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:08:10.597

是的，你可以，但这根本不是一个好习惯。更好的是，您对 DB 中的每个数据表都有一个实体类。每个类都有类似于您的数据库列的公共属性。所有这些东西都应该驻留在您的业务层下。在数据访问层以数据表的格式从数据库中获取数据，传递给业务层并将此表转换为实体对象的集合并传递给您的表示层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:15:15.433

> **恕我直言，您的问题很有争议**

在这种情况下，请考虑以下几点来做出决定：

1.  如果数据库提供程序是您使用 ADO.NET 或实体框架或任何其他 ORM 自定义实现的，则更改为 POCO 类并传递那些不使用 DataTable 的 POCO 实例。
2.  如果您的结果不固定，请使用 DataTable，以便您可以创建 POCO 类。

[在此处](http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET)查看有关在三层架构中使用 DataTable 的旧文章。

阅读使用 POCO 和 DataTable 的在线好处以了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:05:17.000

在 Cs 页面中............

```
public DataTable dtDistinctFRU;
dtDistinctFRU= dsData.Tables[0]; 
```

在 aspx 页面中…………

```
 <% foreach (System.Data.DataRow row in dtDistinctFRU.Rows)
     {
 %>
....some html ...

<% Response.Write(rowNum); %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:16:14.660

我从不这样做，因为如果你通过它们传递相同的对象，为什么你首先需要这些不同的层？无论如何，由于这是一个架构问题，因此没有正确答案，只有意见。

我的观点：我喜欢运营是业务运营，清楚地表明你对他们的期望，而不是 CRUD 运营。您只传递完成业务操作所需的内容，而在查询的情况下，您只取回您的 UI 真正需要的内容。这意味着您设计特定的数据合同而不是通用数据表。这意味着数据层使用数据实体并将它们映射到您的域实体（例如，首先使用 EF 代码）。然后将这些域实体映射到您服务的数据传输对象；您在 UI 中使用的。

[您可以在http://tinyurl.com/d99w8rl](http://tinyurl.com/d99w8rl)阅读该系列文章以获得一些灵感（尤其是第 2 部分）。

# javascript - jQuery 缓存选择器无法正常工作

> ID：16141166
> 
> 赞同：0
> 
> 时间：2013-04-22T06:58:48.780
> 
> 标签：javascript, jquery

使用 JavaScript 和 jQuery 我正在尝试将Selector*缓存*到 Objects 属性。

我保存`$("#dnsTitle")`到`zPanelDNS.cache.dnsTitleId`

但是在我的`zPanelDNS.events`函数中，您可以看到我尝试使用选择器和缓存版本的位置。

由于某种原因，缓存的版本不能像我想象的那样工作。我将两个选择器都写入控制台日志，它们都找到了目标元素，但由于某种原因，缓存版本不起作用。

这是 2 控制台中的输出，您可以看到它们略有不同...

`$("#dnsTitle")` **作品**=

```
[div#dnsTitle.account accountTitle, context: document, selector: "#dnsTitle", jquery: "1.9.1", constructor: function, init: function…] 
```

`zPanelDNS.cache.dnsTitleId` **不工作**=

```
[context: document, selector: "#dnsTitle", jquery: "1.9.1", constructor: function, init: function…] 
```

JavaScript...

```
var panelDNS = {

  unsavedChanges: false,

  init: function () {
    panelDNS.events();
  },

  cache: {
    dnsTitleId: $("#dnsTitle"),
    translation: {
      absolute: 0,
      relative: 0,
      sinceDirectionChange: 0,
      percentage: 0
    }
  },

  events: function() {

    // Activate SAVE and UNDO Buttons when Record Row EDITED
    $(document).on("keydown", "#dnsRecords input" ,function() {

        // Using Selector
        // DOES WORK
        $("#dnsTitle").find(".save, .undo").removeClass("disabled");
        console.log($("#dnsTitle"));

        // Using Cached Selector panelDNS.cache.dnsTitleId
        // DOES NOT WORK
        //panelDNS.cache.dnsTitleId.find(".save, .undo").removeClass("disabled");
        console.log(panelDNS.cache.dnsTitleId);

    });

  }

}

$(function(){
    panelDNS.init();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:01:56.587

`$("#dnsTitle")`**当您调用它时立即**查找具有该 ID 的元素，并返回一个包装该元素的 jQuery 对象（如果找到）或一个空的对象（如果没有）。当您稍后尝试使用它时，它不会重新查询或其他东西。`panelDNS`显然，在创建创建对象的代码时，具有该 ID 的元素不存在，但在*稍后*按下键时*确实*存在。

 *这可能有很多原因。例如，如果`script`您的代码元素在您的 HTML 文档中高于该`dnsTitle`元素，这就是原因；在解析文档的该部分之前，该元素不存在。

例如，这不会将`myElement`元素的文本变为蓝色：

```
<script>
$("#myElement").css("color", "blue");
</script>
<!-- ... -->
<div id="myElement">This text will not turn blue</div> 
```

但这将：

```
<div id="myElement">This text WILL turn blue</div>
<!-- ... -->
<script>
$("#myElement").css("color", "blue");
</script> 
```

这是众多原因之一，除非您有充分的理由不这样做，否则您应该将`script`元素放在文档*底部*，就在结束`</body>`标记之前。这是[YUI 最佳实践](http://developer.yahoo.com/performance/rules.html)和[Google Closure Library](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)团队的建议。

* * *

该代码还有一些其他问题，尤其是它在您定义的地方存在语法错误`events`，并且您正在使用`PanelDNS`并且`panelDNS`可以互换，但是 JavaScript 区分大小写，因此它们不是一回事。

这是具有上述更改的代码并修复了我注意到的其他问题，请参阅内联注释`****`：

```
var panelDNS = {

  unsavedChanges: false,

  init: function () {
    // **** Removed unnecessary second `ready` call

    // **** Get the element here
    panelDNS.cache.dnsTitleId = $("#dnsTitle");

    // **** Call the `events` function to hook events
    panelDNS.events();

    // (Instead of `panelDNS` above, you could use `this`, but since you
    // only have one `panelDNS` object, it's simpler to use that)
  },

  cache: {
    // **** Removed dnsTitleId here
    translation: {
      absolute: 0,
      relative: 0,
      sinceDirectionChange: 0,
      percentage: 0
    }
  },

  events: function() { // **** Made this a function

    // Activate SAVE and UNDO Buttons when Record Row EDITED
    $(document).on("keydown", "#dnsRecords input" ,function() {

        panelDNS.cache.dnsTitleId.find(".save, .undo").removeClass("disabled");
    });

  }

}

$(function(){
    panelDNS.init();
}); 
```*

# android - Android 音频搜索栏

> ID：16141167
> 
> 赞同：8
> 
> 时间：2013-04-22T06:58:49.520
> 
> 标签：android, audio, media-player, seekbar

我正在尝试创建可以播放单个音频文件并且可以使用进度/搜索栏暂停和操作的东西。我想让图像占据屏幕的大部分，然后在左下角的播放暂停按钮和按钮右侧的栏。一切都适用于未链接到音频的搜索栏。我的进度条编码可能是一团糟，因为如果从我在互联网上看到的几个中获取它，但它们大多让我感到困惑，因为它们是用于音乐播放器应用程序而不是用于播放单个音频文件。

有人可以帮我处理进度条吗？任何其他改进我的编程的技巧也会很棒。

（我对 android 和编程很陌生，只是为了警告你）

这是我的Java：

```
MediaPlayer mediaPlayer;
    Button buttonPlayPause;
    ImageView Image;
    SeekBar seekBar;

    private int stateMediaPlayer;
    private final int stateMP_NotStarter = 0;
    private final int stateMP_Playing = 1;
    private final int stateMP_Pausing = 2;
    int total;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playerwere);

        Image = (ImageView) findViewById(R.id.pdfview);
        Image.setImageResource(R.drawable.wereim);

        seekBar = (SeekBar) findViewById(R.id.seekBar);

        buttonPlayPause = (Button) findViewById(R.id.playpause);

        buttonPlayPause.setOnClickListener(buttonPlayPauseOnClickListener);

        seekBar.setOnSeekBarChangeListener(seekBarOnSeekListener);

        initMediaPlayer();

        Thread currentThread = new Thread(this);
        currentThread.start();

    }

    private void initMediaPlayer() {
        mediaPlayer = new MediaPlayer();
        mediaPlayer = MediaPlayer.create(were.this, R.raw.were);
        stateMediaPlayer = stateMP_NotStarter;

        mediaPlayer.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer arg0) {
                // TODO Auto-generated method stub
                total = mediaPlayer.getDuration();
            }

        });

        seekBar.setProgress(0);
        seekBar.setMax(total);
    }

    Button.OnClickListener buttonPlayPauseOnClickListener = new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (stateMediaPlayer) {
            case stateMP_NotStarter:
                mediaPlayer.start();
    buttonPlayPause.setBackgroundResource(android.R.drawable.ic_media_pause);
                stateMediaPlayer = stateMP_Playing;
                break;
            case stateMP_Playing:
                mediaPlayer.pause();
    buttonPlayPause.setBackgroundResource(android.R.drawable.ic_media_play);
                stateMediaPlayer = stateMP_Pausing;
                break;
            case stateMP_Pausing:
                mediaPlayer.start();
    buttonPlayPause.setBackgroundResource(android.R.drawable.ic_media_pause);
                stateMediaPlayer = stateMP_Playing;
                break;
            }

        }
    };

    SeekBar.OnSeekBarChangeListener seekBarOnSeekListener = new SeekBar.OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            // TODO Auto-generated method stub

            if (fromUser) {
                mediaPlayer.seekTo(progress);
                seekBar.setProgress(progress);
            }

        }
    };

    @Override
    public void run() {
        // TODO Auto-generated method stub

        try {
            while (mediaPlayer != null) {
                int currentPosition = mediaPlayer.getCurrentPosition();
                Message msg = new Message();
                msg.what = currentPosition;
                threadHandler.sendMessage(msg);
            }
            Thread.sleep(100);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    private Handler threadHandler = new Handler() {
        public void handleMessage(Message msg) {
            seekBar.setProgress(msg.what);
        }
    }; 
```

在我尝试使用 seekBar 之前，这就是我的 java：

```
 MediaPlayer mediaPlayer;
    Button buttonPlayPause;
    ImageView Image;

    private int stateMediaPlayer;
    private final int stateMP_NotStarter = 0;
    private final int stateMP_Playing = 1;
    private final int stateMP_Pausing = 2;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playerwere);

        Image = (ImageView) findViewById(R.id.pdfview);
        Image.setImageResource(R.drawable.wereim);

        buttonPlayPause = (Button) findViewById(R.id.playpause);

        buttonPlayPause.setOnClickListener(buttonPlayPauseOnClickListener);

        initMediaPlayer();

    }

    private void initMediaPlayer() {
        mediaPlayer = new MediaPlayer();
        mediaPlayer = MediaPlayer.create(were.this, R.raw.were);
        stateMediaPlayer = stateMP_NotStarter;
    }

    Button.OnClickListener buttonPlayPauseOnClickListener = new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (stateMediaPlayer) {
            case stateMP_NotStarter:
                mediaPlayer.start();
    buttonPlayPause.setBackgroundResource(android.R.drawable.ic_media_pause);
                stateMediaPlayer = stateMP_Playing;
                break;
            case stateMP_Playing:
                mediaPlayer.pause();
    buttonPlayPause.setBackgroundResource(android.R.drawable.ic_media_play);
                stateMediaPlayer = stateMP_Pausing;
                break;
            case stateMP_Pausing:
                mediaPlayer.start();
    buttonPlayPause.setBackgroundResource(android.R.drawable.ic_media_pause);
                stateMediaPlayer = stateMP_Playing;
                break;
            }

        }
    }; 
```

这是我在 Vishal Vaja 回答后的 java：

```
MediaPlayer mediaPlayer;
    Button buttonPlayPause;
    ImageView Image;
    SeekBar seekBar;
    Handler handler;

    private int stateMediaPlayer;
    private final int stateMP_NotStarter = 0;
    private final int stateMP_Playing = 1;
    private final int stateMP_Pausing = 2;
    private int mediaPos;
    private int mediaMax;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playerwere);

        Image = (ImageView) findViewById(R.id.pdfview);

        Image.setImageResource(R.drawable.wereim);

        seekBar = (SeekBar) findViewById(R.id.seekBar);

        buttonPlayPause = (Button) findViewById(R.id.playpause);

        buttonPlayPause.setOnClickListener(buttonPlayPauseOnClickListener);

        seekBar.setOnSeekBarChangeListener(seekBarOnSeekChangeListener);

        initMediaPlayer();

    }

    private void initMediaPlayer() {
        handler = new Handler();
        mediaPlayer = new MediaPlayer();
        mediaPlayer = MediaPlayer.create(were.this, R.raw.were);
        stateMediaPlayer = stateMP_NotStarter;
        mediaPos = mediaPlayer.getCurrentPosition();

        mediaMax = mediaPlayer.getDuration();

        seekBar.setMax(mediaMax); // Set the Maximum range of the
                                    // seekBar.setProgress(mediaPos);// set
                                    // current progress to song's

        handler.removeCallbacks(moveSeekBarThread);
        handler.postDelayed(moveSeekBarThread, 100);
    }

    private Runnable moveSeekBarThread = new Runnable() {

        public void run() {
            if (mediaPlayer.isPlaying()) {

                int mediaPos_new = mediaPlayer.getCurrentPosition();
                int mediaMax_new = mediaPlayer.getDuration();
                seekBar.setMax(mediaMax_new);
                seekBar.setProgress(mediaPos_new);

                handler.postDelayed(this, 100); // Looping the thread after 0.1
                                                // second
                                                // seconds
            }
        }
    };

    Button.OnClickListener buttonPlayPauseOnClickListener = new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (stateMediaPlayer) {
            case stateMP_NotStarter:
                mediaPlayer.start();
                buttonPlayPause
                        .setBackgroundResource(android.R.drawable.ic_media_pause);
                stateMediaPlayer = stateMP_Playing;
                break;
            case stateMP_Playing:
                mediaPlayer.pause();
                buttonPlayPause
                        .setBackgroundResource(android.R.drawable.ic_media_play);
                stateMediaPlayer = stateMP_Pausing;
                break;
            case stateMP_Pausing:
                mediaPlayer.start();
                buttonPlayPause
                        .setBackgroundResource(android.R.drawable.ic_media_pause);
                stateMediaPlayer = stateMP_Playing;
                break;
            }

        }
    };

    SeekBar.OnSeekBarChangeListener seekBarOnSeekChangeListener = new SeekBar.OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            // TODO Auto-generated method stub

            if (fromUser) {
                mediaPlayer.seekTo(progress);
                seekBar.setProgress(progress);
            }

        }
    }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:32:48.193

我认为这对你有用。

**创建一个线程来检查歌曲位置并像这样移动搜索栏，**

```
private Runnable moveSeekBarThread = new Runnable() {

    public void run() {
        if(mediaPlayer.isplaying){

        int mediaPos_new = mediaPlayer.getCurrentPosition();
        int mediaMax_new = mediaPlayer.getDuration();
        seekBar.setMax(mediaMax_new);
        seekBar.setProgress(mediaPos_new);

        handler.postDelayed(this, 100); //Looping the thread after 0.1 second
                                        // seconds
        }  
    }
}; 
```

**并像这样调用那个线程，**

```
 mediaPos = mediaPlayer.getCurrentPosition();
  mediaMax = mediaPlayer.getDuration();

  seekBar.setMax(mediaMax); // Set the Maximum range of the
  seekBar.setProgress(mediaPos);// set current progress to song's

  handler.removeCallbacks(moveSeekBarThread);
  handler.postDelayed(moveSeekBarThread, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T06:50:07.273

公共类 DetailMusic 扩展 Activity 实现 View.OnClickListener {

```
SeekBar seek_bar;
Button play_button, pause_button;
TextView text_shown;
Handler seekHandler = new Handler();
Bundle bundle = new Bundle();
String Musicnames;
int mediaMax;
int mediaPos = 0;
MediaPlayer mp = new MediaPlayer();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_detailmusic);
    bundle = getIntent().getExtras();
    if (bundle != null) {
        Musicnames = bundle.getString("musicnbames");
        System.out.println("++++++++++++++++++++++++++++++++" + Musicnames);
        Log.e("musicfoldername", Musicnames);
    }
    seek_bar = (SeekBar) findViewById(R.id.seek_bar);
    play_button = (Button) findViewById(R.id.play_button);
    pause_button = (Button) findViewById(R.id.pause_button);
    text_shown = (TextView) findViewById(R.id.text_shown);
    play_button.setOnClickListener(this);
    pause_button.setOnClickListener(this);
    //seekUpdation();

    String PATH_TO_FILE = Musicnames;
    // MediaPlayer mp = new MediaPlayer();
    try {
        mp.setDataSource(PATH_TO_FILE);
        mp.prepare();
    } catch (IOException e) {

    }
    mp.start();
    seek_bar.setMax(mp.getDuration());

    try {
        mp.setDataSource(Musicnames);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mediaPos = mp.getCurrentPosition();
    mediaMax = mp.getDuration();
    seek_bar.setMax(mediaMax); // Set the Maximum range of the
    seek_bar.setProgress(mediaPos);// set current progress to song's
    seekHandler.removeCallbacks(moveSeekBarThread);
    seekHandler.postDelayed(moveSeekBarThread, 100); //cal the thread after 100 milliseconds

}

private Runnable moveSeekBarThread = new Runnable() {
    public void run() {
        if (mp.isPlaying()) {
            int mediaPos_new = mp.getCurrentPosition();
            int mediaMax_new = mp.getDuration();
            seek_bar.setMax(mediaMax_new);
            seek_bar.setProgress(mediaPos_new);
            seekHandler.postDelayed(this, 100); //Looping the thread after 0.1 second
        }
    }
};

@Override
public void onClick(View view) {
    switch (view.getId()) {
        case R.id.play_button:
            mp.reset(); 
```

// mp.start(); text_shown.setText("正在播放...");

```
 break;
        case R.id.pause_button:
            mp.pause();
            text_shown.setText("Paused...");
    }
} 
```

}

# data-visualization - 在县级创建 Choropleth 地图

> ID：16141172
> 
> 赞同：1
> 
> 时间：2013-04-22T06:59:02.033
> 
> 标签：data-visualization, kartograph

我正在尝试在县级以十年为单位创建阿巴拉契亚地区人口密度的动画，从大约 1790 年到 2010 年。

[通过修改 Nathan Yau 在本](http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/)教程中所做的工作，我成功地创建了 2010 年的 choropleth 。我遇到了一些问题。一方面，美国县界[随着时间的推移而迅速发展，](http://www.youtube.com/watch?v=7-0lM1g9iSs)所以我不能使用与教程中相同的 SVG 文件。我认为我需要执行以下操作：

*   [从这里](http://publications.newberry.org/ahcbp/index.html)获取历史县界作为 GIS 文件。
*   [使用Kartograph](https://github.com/kartograph/kartograph.py)将 GIS 文件转换为 SVG 文件（在安装其众多依赖项之后）。
*   从美国人口普查数据中获取自 1790 年以来阿巴拉契亚地区每个县的人口数据（带有 FIPS 信息）。
*   模仿教程中所做的事情，为每十年创建 choropleth 并将其拼接成动画。

对于如此简单的事情来说，这似乎非常复杂，而且我对很多事情都很陌生，所以我不相信我能够让所有这些工作。我想我的问题如下：

> 我概述的策略会奏效吗？有没有更好/更简单的方法来做我想做的事情？

此外，至于获取人口普查数据，这似乎也比必须的要难。我只想要一个简单的 .csv 文件，其中包含给定年份的 FIPS 标签、县名和人口，但我能找到的最好的文件是这样[的](http://mapserver.lib.virginia.edu/)，带有以某种神秘格式指向实际来源的链接。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T19:11:22.823

您可以从美国人口普查中按县下载人口数据表：http: [//factfinder2.census.gov/faces/tableservices/jsf/pages/productview.xhtml?src=bkmk](http://factfinder2.census.gov/faces/tableservices/jsf/pages/productview.xhtml?src=bkmk)

# c++ - 是否可以比使用 hashmap 更快地将字符串映射到 int？

> ID：16141178
> 
> 赞同：27
> 
> 时间：2013-04-22T06:59:39.390
> 
> 标签：c++, performance, algorithm, hashmap

我知道我不应该优化我的程序的每一个地方，所以请把这个问题看作是“学术的”

我每个人最多有 100 个字符串和整数，如下所示：

```
MSFT 1
DELL 2
HP   4
....
ABC  58 
```

这个集合是预初始化的，这意味着一旦创建它就永远不会改变。在 set 初始化后，我使用它非常密集，因此可以快速查找。字符串很短，最多 30 个字符。映射`int`也是有限的，在 1 到 100 之间。

至少知道字符串是预初始化的并且永远不会更改，应该可以“找到”导致“一个篮子一个项目”映射的哈希函数，但可能还有其他黑客攻击。

我可以想象的一个优化 - 我只能读取第一个符号。例如，如果“DELL”是唯一以“D”开头的字符串，而我收到了“D***”之类的内容，那么我什至不需要读取该字符串！它显然是“戴尔”。这种查找必须比“hashmap 查找”快得多。（这里我假设我们只收到散列中的符号，但并非总是如此）

是否有任何现成或易于实施的解决方案来解决我的问题？我正在使用 c++ 和 boost。

**upd**我检查并发现我的股票交易限制是 12 个符号，而不是上面提到的 30 个。然而，其他交易所可能允许稍长的符号，因此有趣的算法将继续处理长达 20 个字符的长代码。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-22T07:02:15.830

哈希表^([1])原则上是最快的方法。

但是，鉴于您提前知道完整的域，您**可以**编译一个[完美的哈希函数。](http://en.wikipedia.org/wiki/Perfect_hash_function)

***有了完美的哈希，就不会发生冲突，因此您可以将哈希表存储在线性数组中！***

通过适当的调整，您可以

*   将所有散列元素放在有限的空间中，使直接寻址成为一种潜在的选择
*   在 O(1) 中进行反向查找

用于生成完美哈希函数的“老派”工具是[gperf(1)](http://www.gnu.org/software/gperf/)。维基百科列出了有关该主题的更多资源。

> 由于所有的辩论，**我运行了一个演示**：
> 
> 下载[NASDAQ 股票代码](http://www.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=nasdaq&render=download)并从该集合中获取 100 个随机样本，应用 gperf 如下：
> 
> ```
> gperf -e ' \015' -L C++ -7 -C -E -k '*,1,$' -m 100 selection > perfhash.cpp 
> ```
> 
> 产生一个哈希值 MAX_HASH_VALUE`157`和一个包含尽可能多项目的**直接**字符串查找表。这里*只是*用于演示目的的哈希函数：
> 
> ```
> inline unsigned int Perfect_Hash::hash (register const char *str, register unsigned int len) {
>   static const unsigned char asso_values[] = {
>       156, 156, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156,  64,  40,   1,  62,   1,
>        41,  18,  47,   0,   1,  11,  10,  57,  21,   7,
>        14,  13,  24,   3,  33,  89,  11,   0,  19,   5,
>        12,   0, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156, 156, 156, 156, 156, 156,
>       156, 156, 156, 156, 156, 156, 156, 156, 156
>     };
>   register int hval = len;
> 
>   switch (hval) {
>       default: hval += asso_values[(unsigned char)str[4]];   /*FALLTHROUGH*/
>       case 4:  hval += asso_values[(unsigned char)str[3]];   /*FALLTHROUGH*/
>       case 3:  hval += asso_values[(unsigned char)str[2]+1]; /*FALLTHROUGH*/
>       case 2:  hval += asso_values[(unsigned char)str[1]];   /*FALLTHROUGH*/
>       case 1:  hval += asso_values[(unsigned char)str[0]];   break;
>   }
>   return hval;
> } 
> ```
> 
> 它真的没有变得更有效率。请查看**[github 上的完整源代码：https://gist.github.com/sehe/5433535](https://gist.github.com/sehe/5433535)**
> 
> 请注意，这也是一个完美的哈希，所以不会有**冲突**

* * *

> **问**：[...]*显然是“DELL”。这种查找必须比“hashmap 查找”快得多。*

**A：**如果您使用简单`std::map`的净效应是前缀搜索（因为第一个字符不匹配的字典字符串比较快捷方式）。排序容器中的二进制搜索也是如此。

* * *

^([1]) **附言**。对于 100 个字符串，由于改进的**[Locality of Reference](http://en.wikipedia.org/wiki/Locality_of_reference)**`std::search` ，具有or的排序字符串数组可能会一样快/更快。请查阅您的个人资料结果以查看这是否适用。`std::lower_bound`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-22T08:06:40.210

对sehe帖子的小补充：

> 如果您使用简单`std::map`的净效果是前缀搜索（因为第一个字符不匹配的字典字符串比较快捷方式）。排序容器中的二进制搜索也是如此。

您可以利用前缀搜索来提高效率。简单二分搜索的问题`std::map`在于，它们会为每个单独的比较重复读取相同的前缀，从而使整体搜索 O( *m* log *n* )，其中*m*是搜索字符串的长度。

这就是为什么 hashmap 在大集合中胜过这两种方法的原因。但是，有一种数据结构*不*进行冗余前缀比较，实际上每个前缀只需要比较一次：前缀（搜索）树，通常称为[**trie**](http://en.wikipedia.org/wiki/Trie)，查找长度为*m*的单个字符串是可行的在 O( *m* ) 中，与完美散列的散列表相同的渐近运行时间。

对于您的目的而言，具有完美散列的 trie 或（直接查找）散列表是否更有效是分析的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:15:57.803

是的！

哈希必须遍历您的字符串并构建哈希值。在使用链接**[ [Wiki:Trie](http://en.wikipedia.org/wiki/Trie) ]**中解释的 trie 时，只需要遵循链接结构上的路径，而无需任何过度计算。如果它是压缩的特里，如页面末尾所述，当首字母是一个单词时（您谈到的 DELL 案例），它会计算一个案例。预处理稍高一些，但在运行时提供最佳性能。

更多优点：
1.如果您要查找的字符串不存在，您知道在第一个字符中与现有字符串不同（不需要继续计算）
2\. 实施后，添加更多字符串特里是直截了当的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:02:25.323

好吧，您可以将字符串存储在*二叉树*中并在那里搜索。虽然这具有`O(log n)`理论上的性能，但如果您只有几个键，它们真的很长，并且在前几个字符中已经不同，那么在实践中它*可能会快得多。*

即比较键比计算散列函数更便宜。

此外，还有 CPU 缓存效应等可能（或可能不会）有益。

但是，使用相当便宜的哈希函数，哈希表将很难被击败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:32:26.853

如上所述的标准散列映射以及完美的散列函数都受到散列函数本身执行相对较慢的影响。绘制的完美散列函数例如对一个数组有多达 5 次随机访问。

测量或计算散列函数和字符串比较的速度是有意义的，假设功能是通过一个散列函数评估、一个表中的查找以及通过包含字符串及其索引的（链接）列表进行线性搜索来完成的解决哈希冲突。在许多情况下，最好使用更简单但更快的散列函数并接受更多的字符串比较，而不是使用更好但更慢的散列函数并且具有更少（标准散列映射）甚至只有一个（完美散列）比较。

[您会在我的网站](http://programming.sirrida.de/programming.html#c_case_of_string)上找到有关“switch on string”主题的讨论，以及使用宏作为免费 C/C++ 源的通用测试平台的一系列解决方案，这些解决方案可以在运行时解决问题。我也在考虑一个预编译器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-13T22:37:02.280

`sehe's`（然而）回答的另一个小补充：

除了 Perfect Hash Functions，还有这个 Minimal Perfect Hash Function 的东西，分别是`C Minimal Perfect Hash Function`. 它几乎与 相同`gperf`，除了：

> gperf 有点不同，因为它旨在为小密钥集创建非常快速的完美哈希函数，而 CMPH 库旨在为非常大的密钥集创建最小完美哈希函数
> 
> CMPH 库将最新和更高效的算法封装在一个易于使用、生产质量、快速的 API 中。该库旨在处理无法放入主内存的大条目。它已成功用于为具有超过 1 亿个键的集合构建最小完美哈希函数，我们打算将这个数字扩展到十亿个键的数量级

来源：[http ://cmph.sourceforge.net/](http://cmph.sourceforge.net/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-04-22T07:09:49.107

如果字符串在编译时已知，则可以使用枚举：

```
enum
{
  Str1,
  Str2
};

const char *Strings = {
  "Str1",
  "Str2"
}; 
```

使用一些宏技巧，您可以消除在两个位置重新创建表的冗余（使用文件包含和`#undef`）。

然后可以像索引数组一样快地实现查找：

```
const char *string = Strings[Str1]; // set to "Str1" 
```

这将具有最佳查找时间和参考位置。

# php - codeigniter 如何解析视图文件并通过传递的值替换变量的值？

> ID：16141181
> 
> 赞同：-1
> 
> 时间：2013-04-22T06:59:49.947
> 
> 标签：php, codeigniter

我正在尝试阅读源代码和其他资源，但我不清楚。我想知道它如何解析视图文件并用传递的值替换各种变量的值。我有类似的要求，需要使用核心 php 开发，我需要使用变量（{variable_name}）解析类似于 codeigniter 视图文件的 html 文件，然后需要动态替换它的值。我需要使用核心 php 来完成，所以我不能使用 smarty 或任何其他模板脚本引擎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:05:27.740

如果您正在寻找能够发送模板和变量的东西，请查看 smarty 模板

[http://www.smarty.net/](http://www.smarty.net/)

它使用花括号，这种花括号越来越普遍，并且很快变得易于使用，并且在您可能正在处理 PHP 端的情况下，其他人更容易阅读，但是有一个前端设计师，他只有触摸视图文件。

来自这里的一些示例代码：[http ://www.smarty.net/syntax_comparison](http://www.smarty.net/syntax_comparison)

```
{foreach $foo as $bar}
  {if $bar@iteration is div by 4}
    </tr><tr>
  {/if}
  <td>{$bar}</td>
{/foreach} 
```

# visual-studio-2010 - Colored bars have appeard in my Visual Studio 2012 beside the line numbers

> ID：16141184
> 
> 赞同：4
> 
> 时间：2013-04-22T07:00:08.197
> 
> 标签：visual-studio-2010

Today when I started Visual Studio 2012 at work I found some new colored bars.

We work on a shared remote server through RDP, so I asked around if someone has installed or updated anything. It seems no one has done "anything".

There are the bars I'm seeing:

![A screenshot of the bars.](https://i.stack.imgur.com/CokBY.png)

The leftmost bars, the green and yellow one, I know about. They show where the file has been edited since its opening (yellow means the changes has not been saved yet, green means they have been saved).

The rightmost one, I'm lost about them. They seem to *usually* mirror the leftmost, but not always. They persist through file close-reopen.

Through some tinkering, it seems the green rectangles means new lines added, the blue rectangles means existing lines modified and the red triangles means removed lines.

These are the information form Visual Studio's About window:

```
Microsoft Visual Studio Premium 2012
Version 11.0.60315.01 Update 2
Microsoft .NET Framework
Version 4.5.50709

Installed Version: Premium

LightSwitch for Visual Studio 2012   04941-004-0044006-02568
Microsoft LightSwitch for Visual Studio 2012

Office Developer Tools   04941-004-0044006-02568
Microsoft Office Developer Tools

Team Explorer for Visual Studio 2012   04941-004-0044006-02568
Microsoft Team Explorer for Visual Studio 2012

Visual Basic 2012   04941-004-0044006-02568
Microsoft Visual Basic 2012

Visual C# 2012   04941-004-0044006-02568
Microsoft Visual C# 2012

Visual C++ 2012   04941-004-0044006-02568
Microsoft Visual C++ 2012

Visual F# 2012   04941-004-0044006-02568
Microsoft Visual F# 2012

Visual Studio 2012 Code Analysis Spell Checker   04941-004-0044006-02568
Microsoft® Visual Studio® 2012 Code Analysis Spell Checker

Portions of International CorrectSpell™ spelling correction system © 1993 by Lernout & Hauspie Speech Products N.V. All rights reserved.

The American Heritage® Dictionary of the English Language, Third Edition Copyright © 1992 Houghton Mifflin Company. Electronic version licensed from Lernout & Hauspie Speech Products N.V. All rights reserved.

Visual Studio 2012 SharePoint Developer Tools   04941-004-0044006-02568
Microsoft Visual Studio 2012 SharePoint Developer Tools

Git Source Control Provider   1.0.0.0

JetBrains ReSharper 7.0.1   C# Edition build 7.0.1098.2760 on 2012-08-27T14:31:12
JetBrains ReSharper 7.0.1 package for Microsoft Visual Studio. For more information about ReSharper, visit http://www.jetbrains.com/resharper/. Copyright © 2003–2013 JetBrains, Inc.

JetBrains TeamCity Addin 7.1   build 7.1.667.137 on 2013-02-05T12:20:56 [Not Loaded]
JetBrains TeamCity Addin 7.1 package for Microsoft Visual Studio. For more information about TeamCity, visit http://www.jetbrains.com/teamcity/. Copyright © 2000–2013 JetBrains, Inc.

NuGet Package Manager   2.2.40116.9051
NuGet Package Manager in Visual Studio. For more information about NuGet, visit http://docs.nuget.org/.

PreEmptive Analytics Visualizer   1.0
Microsoft Visual Studio extension to visualize aggregated summaries from the PreEmptive Analytics product.

SQL Server Data Tools   11.1.20627.00
Microsoft SQL Server Data Tools

StyleCop   4.7.41.0
Provides source code style and consistency tools. See http://www.stylecop.codeplex.com/ for more details.

Web Developer Tools   1.2.40308.0
Microsoft Web Developer Tools contains the following components:
Page Inspector: Tool that offers an efficient way to decompose Web Applications and diagnose front-end issues.
Web Publishing: Extensions required for Web Publishing for both hosted servers as well as on premises.
Web Form Templates: Includes the default templates for Web Form Applications.
Editor Extensions: Includes HTML, CSS, and JS editor extensions that greatly enhance the development experience.

Git source control provider
Demo. 
```

I have these extensions installed:

![The list of installed extensions.](https://i.stack.imgur.com/UMM3G.png)

Can someone shed some light on this, and how can I disable them? My OCD is complaining about the conflicting information...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:02:15.573

They come from the [GIT source control provider](http://gitscc.codeplex.com/). I suppose your project is versioned, so those bars give you information about lines that are changed in some way, and what is the nature of the change.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T07:19:44.723

Go to Edit menu Advanced / View White Space Ctrl+E,S

# three.js - 同时加载多个collada对象 Three.js

> ID：16141188
> 
> 赞同：2
> 
> 时间：2013-04-22T07:00:20.720
> 
> 标签：three.js, webgl, collada

我必须多次加载相同的 collada 对象。这是代码

```
var ai = [];

function setupAI() {
    var c = getMapSector(cam.position);

    var loader = new THREE.ColladaLoader();
    loader.options.convertUpAxis = true;
    loader.load('models/monster.DAE',function colladaReady( collada ){
    var op = collada.scene;
    skin = collada.skins [ 0 ];

    for (var i = 0; i < NUMAI; i++) {

         var o = THREE.SceneUtils.cloneObject(op);

        o.scale.x = o.scale.y = o.scale.z = 0.006;
                o.updateMatrix();

    do {
        var x = getRandBetween(0, mapW-1);
        var z = getRandBetween(0, mapH-1);
    } while (map[x][z] > 0 || (x == c.x && z == c.z));
    x = Math.floor(x - mapW/2) * UNITSIZE;
    z = Math.floor(z - mapW/2) * UNITSIZE;
    o.position.set(x, UNITSIZE * 0.15, z);
    o.health = 100;
    //o.path = getAIpath(o);
    o.pathPos = 1;
    o.lastRandomX = Math.random();
    o.lastRandomZ = Math.random();
    o.lastShot = Date.now(); // Higher-fidelity timers aren't a big deal here.
    ai.push(o);
    scene.add(o);
}
    });

} 
```

但这在这一行中给出了错误

```
var o = THREE.SceneUtils.cloneObject(op); 
```

但是如果我将加载程序放在循环中，它会变得很重并且不会加载到浏览器中。

# liferay-6 - 如何定义自定义模型的权限

> ID：16141190
> 
> 赞同：2
> 
> 时间：2013-04-22T07:00:39.117
> 
> 标签：liferay-6

**如何为 Employee 等自定义模型定义权限。** 我有一个 portlet，我可以在其中对 Employee 对象（自定义模型）执行 CURD 操作。使用此链接： [自定义模型的权限](http://www.liferay.com/community/wiki/-/wiki/Main/Permissioning+in+Plugin+Environment) 在上面的帖子中，他们使用的是 ext-plugin。有没有其他办法？

# c# - 如何验证数字签名？

> ID：16141191
> 
> 赞同：3
> 
> 时间：2013-04-22T07:00:41.847
> 
> 标签：c#, .net, vb.net, certificate, digital-signature

我花了 3 天时间阅读和测试以了解这到底是什么数字签名和代码签名，为什么存在以及如何签署我的应用程序......（仍然没有 100% 学会）

好吧，今天我已经完成了自己的证书和数字签名，但是当我尝试在其他机器上打开已编译的应用程序时，例如使用 Win7 的 VirtualMachine (VBOX)，我仍然从共享设备（我的意思是从网络设备，你知道虚拟机的共享文件夹）

![在此处输入图像描述](https://i.stack.imgur.com/hLUzi.png)

建议说我的数字签名无效，我不知道为什么！

无法验证免费的数字签名？

这就是我从命令行获得证书的方式：

```
makecert -r -pe -a sha1 -n "CN=%Name%" -b "%InitialDate%" -e "%ExpireDate%" -$ individual -sr LocalMachine -ss my -cy authority -# "%SerialNumber%" "%Name%.cer" 
```

这就是我签署我的框架 4 应用程序的方式：

```
SignTool sign /f "%Name%.pfx" /p "%Password%" Application.exe 
```

此外，我在项目的签名选项卡中添加了我的证书，但我仍然从 Windows 获得建议屏幕......

当我尝试在其他机器上运行我的**非**恶意应用程序时，为什么操作系统会提示该屏幕？

**我错过了什么？**

PS：我知道如何绕过设置 IE 选项的建议屏幕，但这不是其他人的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:55:26.087

这是因为您使用自己的非正版证书对代码进行签名。代码签名证书必须由 Thawte、VeriSign、GlobalSign 等合法受信任的发行商颁发。否则，您需要以自己的方式分发自己的证书，并要求用户将证书作为受信任的证书导入。合法证书通常由 Windows 更新自动分发。

# html - 自定义 textarea 的文本对齐方式

> ID：16141193
> 
> 赞同：2
> 
> 时间：2013-04-22T07:00:44.283
> 
> 标签：html, css

我的国家文字是垂直书写的，从左到右对齐。

我需要`textarea`为此要求自定义文本对齐方式。

默认情况下，文本`textarea`是水平书写的，从上到下对齐。我在这篇文章中附上了一张我的国家剧本的照片。

知道我该怎么做吗？如何自定义文本区域的文本对齐方式？

对不起我的英语不好。

[![在此处输入图像描述](https://i.stack.imgur.com/Y6ri7.png)](https://i.stack.imgur.com/Y6ri7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:45:26.100

我认为您的意思是书写模式而不是对齐方式：您需要让浏览器显示文本，以便文本从上到下垂直排成一行，并且从左到右排列。

这在目前看来是不可能的。但是，您可能会在某些浏览器中使用可编辑`div`元素而不是`textarea`.

根据[CSS Writing Modes Module Level 3](http://www.w3.org/TR/css3-writing-modes/)草案，您可以简单地设置`writing-mode: vertical-lr`. 似乎还没有实现，但 IE 有它自己的版本，属性的命名值不同，Chrome 现在支持该属性，但只有供应商前缀。

然而，虽然浏览器通常支持该设置，但似乎不适用于`textarea`：在 IE 中，文本垂直运行，但行从右到左运行，第一行位于该区域的右侧; 在 Chrome 中，文本是水平运行的。原因可能是`textarea`元素有一个特殊的实现，与写模式的实现相冲突。

示例代码（您可能需要调整字体设置以使用包含蒙古字母的字体才能看到此内容）：

```
<style>
div,
textarea {
  writing-mode: tb-lr;
  -moz-writing-mode: vertical-lr;
  -webkit-writing-mode: vertical-lr;
  writing-mode: vertical-lr;
}
</style>
<textarea rows=7 cols=7>ᠮᠣᠨᠭᠭᠣᠯ ᠬᠡᠯᠡ ᠤᠯᠠᠭᠠᠨᠪᠠᠭᠠᠲᠤᠷ&lt;/textarea>
<div style="width: 5em; height: 4em; border: solid blue 1px">
ᠮᠣᠨᠭᠭᠣᠯ ᠬᠡᠯᠡ ᠤᠯᠠᠭᠠᠨᠪᠠᠭᠠᠲᠤᠷ
</div> 
```

所以在我的测试中，`div`在 IE 和 Chrome 中看起来不错，但在我的测试中`textarea`却不行。因此，也许您可​​以使用`<div contenteditable>`一些 JavaScript`div`在表单提交时将内容复制到隐藏字段（如果这是为了将表单提交给服务器端处理）。

这是它在 IE 上的工作方式：

![在此处输入图像描述](https://i.stack.imgur.com/OKauD.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T05:10:03.850

好吧，Firefox 38 可以`writing-mode: vertical-lr`不带任何前缀支持，但是你必须在`about:config`page:中启用这个参数`layout.css.vertical-text.enabled`。

请参阅：[https ://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode)

# ios - 如何以编程方式在 iOS 应用程序中添加马拉雅姆字体（印度）

> ID：16141199
> 
> 赞同：2
> 
> 时间：2013-04-22T07:01:25.053
> 
> 标签：ios, xcode, fonts, localization

**在我的新应用程序中，我希望添加两种语言-马拉雅拉姆语和英语..** 英语已经存在..所以现在我想了解马拉雅拉姆语字体..我搜索了超过 2 天，但我找不到有价值的结果.

我希望根据用户的选择***在马拉雅拉姆语和英语之间切换语言..***

因此，当用户选择马拉雅拉姆语时，我如何将所有语言字体从英语更改为马拉雅拉姆语..？

我读过类似本地化的东西，但那不是正在搜索的内容。

如果你在任何时候做过，请张贴，从英语到你的母语或任何其他语言......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T07:04:43.847

您必须为此使用本地化。只需将键和值存储在 localizable.string 中，然后根据您的要求加载适当的 .string 文件。您可以参考以下教程： [http ://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

# php - PHP页面未正确显示

> ID：16141216
> 
> 赞同：0
> 
> 时间：2013-04-22T07:02:21.637
> 
> 标签：php, mysql

我已经为在线游戏上的招聘应用程序编写了一个表格，但是当我实际将代码放在网站上时遇到了一些问题。在我的本地 apache 网络服务器上运行它运行良好，但在 LiteSpeed 网络服务器上在线运行似乎不起作用。代码中有什么无效的吗？

我已经设置了代码来检测任何错误（我已经从下面的示例中删除了它），但是除了未定义的变量（在这种情况下很好）之外什么都没有出现。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
<title>Zone Application Manager</title>
</head>
<body>
<?php
require("includes.php");
  function displayElements($category) {
    echo "<div id=\"left\">\n";
    $col1 = mysql_query("SELECT * FROM gp_applications WHERE category = '$category' ORDER BY id ASC");
    echo "<h3>" . $category . "</h3>\n";
    echo "<form action=\"#\" method=\"get\">\n";
    echo "<select name=\"category\">\n";
    if ($category=="Unread Apps") {
      echo "<option value=\"Unread Apps\" selected=\"selected\">Unread Apps</option>\n";
      echo "<option value=\"Deleted Apps\">Deleted Apps</option>\n";
      echo "<option value=\"Good Apps\">Good Apps</option>\n";
    }
    if ($category=="Deleted Apps") {
      echo "<option value=\"Unread Apps\">Unread Apps</option>\n";
      echo "<option value=\"Deleted Apps\" selected=\"selected\">Deleted Apps</option>\n";
      echo "<option value=\"Good Apps\">Good Apps</option>\n";
    }
    if ($category=="Good Apps") {
      echo "<option value=\"Unread Apps\">Unread Apps</option>\n";
      echo "<option value=\"Deleted Apps\">Deleted Apps</option>\n";
      echo "<option value=\"Good Apps\" selected=\"selected\">Good Apps</option>\n";
    }
    echo "</select>\n";
    echo "<input type=\"submit\" value=\"Choose\">\n";
    echo "</form>\n";
    echo "<br />\n";
    echo "<form action=\"#\" method=\"get\">\n";
    echo "<input type=\"hidden\" name=\"category\" value=\"" . $category . "\">\n";
    echo "<select name=\"id\" size=\"25\">\n";
    while($row1 = mysql_fetch_array($col1)) {
      echo "<option value=\"" . $row1[id] . "\">" . $row1[q2] . "</option>\n";
    }
    echo "</select>\n";
    echo "<br />\n";
    echo "<br />\n";
    echo "<input type=\"submit\" name=\"read\" value=\"Read Application\">\n";
    echo "<br />\n";
    echo "<input type=\"submit\" name=\"delete\" value=\"Delete Application\">\n";
    echo "<br />\n";
    echo "<input type=\"submit\" name=\"unread\" value=\"Mark Application Unread\">\n";
    echo "<br />\n";
    echo "<input type=\"submit\" name=\"good\" value=\"Good Application\">\n";
    echo "</div>\n";
    echo "</form>";
    echo "<form action=\"#\" method=\"get\">\n";
    echo "<div id=\"bottom\">\n";
    echo "<select name=\"appMode\">";
    $mode = file_get_contents('mode.txt');
    if($mode=="yes") {
    echo "<option value=\"appon\" selected=\"selected\">Turn Application On</option>";
    echo "<option value=\"appoff\">Turn Application Off</option>";
    } else {
    echo "<option value=\"appon\">Turn Application On</option>";
    echo "<option value=\"appoff\" selected=\"selected\">Turn Application Off</option>";
    }
    echo "</select>";
    echo "<input type=\"submit\" name=\"appModeBtn\" value=\"Toggle App Mode\">";
    echo "</div>";
    echo "</form>";
  }
  function executeAppAction($id) {
  if (isset($_GET['good'])) {
      mysql_query("UPDATE gp_applications SET category='Good Apps' WHERE id='$id'")or die(mysql_error());
      header("Location: admin.php?action=admin");
    }
  if (isset($_GET['unread'])) {
      mysql_query("UPDATE gp_applications SET category='Unread Apps' WHERE id='$id'")or die(mysql_error());
      header("Location: admin.php");
    }
    if (isset($_GET['delete'])) {
      mysql_query("UPDATE gp_applications SET category='Deleted Apps' WHERE id='$id'")or die(mysql_error());
      header("Location: admin.php");
    }
    if (isset($_GET['read'])) {
    $result = mysql_query("SELECT * FROM gp_applications WHERE id='$id'");
    if ($result) {
        $row = mysql_fetch_assoc($result);
    }
    echo "<div id=\"formBody\">";
    //application opener, not needed to view
    echo "</div>\n";
  }
  }
    if($_POST['pwd'] || isset($_COOKIE['zonegp_application_login'])) {
      if($_POST['pwd']=="xxxx") {
        $hour = time() + 3600;
        $pwd = $_POST['pwd'];
        setcookie('zonegp_application_login', $pwd, $hour);
      }
      if($_COOKIE['zonegp_application_login']=="xxxx" || $_POST['pwd']=="xxxx") {
        echo "<h1>The Doctor's Application Manager</h1>\n";
        echo "<p><a href=\"logout.php\">Logout</a></p>\n";
        if($_GET['category']) {
        $appcategory = $_GET['category'];
        }
        if(empty($appcategory)) {
          $appcategory = "Unread Apps";
          displayElements($appcategory);
        }
        else {
          displayElements($appcategory);
        }
        if($_GET['id']) {
          $id = $_GET['id'];
          executeAppAction($id);
        }
        if ($_GET['appModeBtn']) {
          if($_GET['appMode']=="appon") {
            $myFile = "mode.txt";
            $fh = fopen($myFile, 'w') or die("can't open file");
            $stringData = "yes";
            fwrite($fh, $stringData);
            fclose($fh);
            header("Location: admin.php");
          }
          if($_GET['appMode']=="appoff") {      
            $myFile = "mode.txt";
            $fh = fopen($myFile, 'w') or die("can't open file");
            $stringData = "no";
            fwrite($fh, $stringData);
            fclose($fh);
            header("Location: admin.php");
          }
        }
      }
      else {
        echo "Incorrect Password";
      }
    }
    else {
      header("Location: login.html");
    }
?>
</body>
</html> 
```

本地[![https://dl.dropboxusercontent.com/u/63673315/sopic1.png](https://i.stack.imgur.com/rmuub.png)](https://i.stack.imgur.com/rmuub.png) 托管： 在线托管：[![https://dl.dropboxusercontent.com/u/63673315/sopic2.png](https://i.stack.imgur.com/hY5jT.png)](https://i.stack.imgur.com/hY5jT.png)

是的，我在网站版本上运行 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:17:42.980

请加

```
var_dump(file_exists('includes.php')); 
```

就在之前

```
require('includes.php'); 
```

如果找不到文件，require 会删除任何进一步的代码

# cluster-computing - 弹性搜索集群配置中的 UnavailableShardsException

> ID：16141221
> 
> 赞同：-2
> 
> 时间：2013-04-22T07:02:30.347
> 
> 标签：cluster-computing, elasticsearch

我在 Amazon EC2 中尝试了具有 3 个节点的弹性搜索集群配置。但我在通话后收到 UnavailableShardsException`$type->addDocument($doc);`

以下是 custer 中 3 个节点中每个节点上的配置。请帮忙 ！

```
Node1
=====
cluster.name: MyCluster
node.name: node1
node.master: true
node.data: true
# index.number_of_shards: 5 //Not confugured this, to use the default value 5
index.number_of_replicas: 2
transport.tcp.port: 9300
http.port: 9200

Node2
=====
cluster.name: MyCluster
node.name: node2
node.master: false
node.data: true
# index.number_of_shards: 5 //Not confugured this, to use the default value 5
index.number_of_replicas: 2
transport.tcp.port: 9301
http.port: 9201

Node3
=====
cluster.name: MyCluster
node.name: node3
node.master: false
node.data: true
# index.number_of_shards: 5 //Not confugured this, to use the default value 5
index.number_of_replicas: 2
transport.tcp.port: 9302
http.port: 9202 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T10:46:18.800

Amazon EC2 不支持多播，因此要使集群正常运行，您需要使用[单播](http://www.elasticsearch.org/guide/reference/modules/discovery/zen/)或[EC2 发现插件](http://www.elasticsearch.org/guide/reference/modules/discovery/ec2/)。我建议从单播开始，因为它通常更容易设置。由于所有 3 个节点都在不同的实例上运行，因此它们都可以配置为相同的端口（9300 和 9200）。如果您仍然无法使其正常工作，请取消注释 logging.yml 中的以下行，重新启动所有三台服务器并在此处发布指向所有 3 台服务器的日志文件的链接。

```
 #discovery: TRACE 
```

# javascript - XMLHttpRequest 仅发送最大 130 kB 的文件

> ID：16141222
> 
> 赞同：1
> 
> 时间：2013-04-22T07:02:31.240
> 
> 标签：javascript, post, xmlhttprequest

我使用 XMLHttpRequest 发送文件，它在文件大小小于 130 kB 时工作“正常”。

我的代码是

```
var xhr = new XMLHttpRequest();

    xhr.upload.onprogress = function(e){
        if (e.lengthComputable){
            self._loaded[id] = e.loaded;
            self._options.onProgress(id, name, e.loaded, e.total);
        }
    };

    xhr.onreadystatechange = function(){            
        if (xhr.readyState == 4){
            self._onComplete(id, xhr);                    
        }
    };

    // build query string
    params = params || {};
    params['qqfile'] = name;
    var queryString = qq.obj2url(params, this._options.action);

    xhr.open("POST", queryString, true);
    xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    xhr.setRequestHeader("X-File-Name", encodeURIComponent(name));
    xhr.setRequestHeader("Content-Type", "application/octet-stream");
    xhr.send(file); 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:04:13.977

禁用 mod_security（PHP 服务器）后问题解决。

# extjs - 网格拆分器未调整中间网格 extjs 的大小

> ID：16141223
> 
> 赞同：1
> 
> 时间：2013-04-22T07:02:56.963
> 
> 标签：extjs, grid, splitter

> **[解决了]**

我的 UI 中有三个网格。假设它们是 A,B,C

问题是我在网格之间添加了两个拆分器。我的网格 A 和 C 调整大小，但网格 B 是固定的。

```
 --------------------------
             A
    ---------------------------
             B
    ----------------------------
             C

--------------------------------
            A

---------------------------------
            B
---------------------------------

             C
--------------------------------- 
```

我不知道如何编写代码来解释：P

代码：

```
 layout:{
        type:'vbox',
        align:'stretch',
        pack:'start',
        split:true,
        collapsible:true
  },
  items:[{
        xtype:'panel',
        layout:'fit',
        minHeight:200,
        flex:0.3,
        items:[{
            // add some grid or panel
         }]
       },
       {
         xtype:'splitter',
       },
       {
        xtype:'panel',
        layout:'fit',
        flex:0.3,
        minHeight:200,
        items:[{
            // add some grid or panel
         }]
        },
        {
        xtype:'splitter',
        },
        {
        xtype:'panel',
        layout:'fit',
        flex:0.3,
        minHeight:200,
            items:[{
            // add some grid or panel
         }]
        }] 
```

[http://jsfiddle.net/8Zesp/178/](http://jsfiddle.net/8Zesp/178/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:03:01.560

在与我一起工作的人的帮助下，我们能够做到这一点。它在 jsfiddle 中工作，因为它没有运行正确的 extjs

这是拆分器代码（SplitterTracker）中的一个错误，可以通过覆盖修复它有一个硬编码的“getWidth（）”，无论拆分器移动的实际方向如何。

我希望这可以帮助别人

```
Ext.override(Ext.resizer.SplitterTracker, {
    // Performs the actual resizing of the previous and next components
    performResize: function(e, offset) {
        var me        = this,
            splitter  = me.getSplitter(),
            orient    = splitter.orientation,
            prevCmp   = me.getPrevCmp(),
            nextCmp   = me.getNextCmp(),
            owner     = splitter.ownerCt,
            flexedSiblings = owner.query('>[flex]'),
            len       = flexedSiblings.length,
            i         = 0,
            dimension,
            size,
            totalFlex = 0;

      // BUGFIX here:
        var getSizeFunc = (orient === 'vertical') ? 'getWidth' : 'getHeight';

        // Convert flexes to pixel values proportional to the total pixel width of all flexes.
        for (; i < len; i++) {
            size = flexedSiblings[i][getSizeFunc]();
            totalFlex += size;
            flexedSiblings[i].flex = size;
        }

        offset = offset || me.getOffset('dragTarget');

        if (orient === 'vertical') {
            offset = offset[0];
            dimension = 'width';
        } else {
            dimension = 'height';
            offset = offset[1];
        }
        if (prevCmp) {
            size = me.prevBox[dimension] + offset;
            if (prevCmp.flex) {
                prevCmp.flex = size;
            } else {
                prevCmp[dimension] = size;
            }
        }
        if (nextCmp) {
            size = me.nextBox[dimension] - offset;
            if (nextCmp.flex) {
                nextCmp.flex = size;
            } else {
                nextCmp[dimension] = size;
            }
        }

        owner.updateLayout();
    }
}); 
```

# iphone - 从相机中剪下预定义的照片片段

> ID：16141226
> 
> 赞同：3
> 
> 时间：2013-04-22T07:03:04.420
> 
> 标签：iphone, ios, uiimagepickercontroller

对于我正在开发的应用程序，我让用户指定他们想要在相机上捕获的对象的尺寸（例如 30" x 40"）。我要做的下一件事是在其顶部显示带有 cameraOverlayView 的相机源，只显示一个描边透明正方形，该正方形具有正确的比例以捕获该对象。

**所以我尝试了两件事来让它工作：**

使用 UIViewController`AVCaptureVideoPreviewLayer`来显示带有实时视频源的视图。在该提要的顶部，我显示了一个透明视图，它绘制了一个具有正确尺寸的正方形（使用用户指定的比率）。

**和**

在另一次尝试中，我创建了一个 UIViewController，其中包含一个弹出`UIImagePickerController`. `cameraOverlayView`使用此控制器，我还创建了一个视图，我使用该属性将其附加到选择器。

这两种方法我遇到的主要问题是实际捕获的图像总是比我在屏幕上看到的要大，但我不完全确定在拍摄照片后如何剪掉那张图像.

例如：我的 UIImagePickerController 显示出来了，我在上面放置了一个覆盖层，显示了一个 300 x 400px 大的正方形。用户使用这个正方形拍摄他们的对象的照片并将他们的对象居中在这个正方形内。

图片已拍摄，但不是 320x480（或 640x960）的图片，而是 3500x2400（或类似的东西）的结果。这是与屏幕比例完全不同的比例（当然）。

然后我如何确保我剪掉了图像的正确部分。

实际计算应该显示的正方形大小的代码（并且应该用于确定应该剪切哪块图片）：

```
+ (CGRect) getFrameRect:(CGRect) rect forSize:(CGSize) frameSize {
    if (CGSizeEqualToSize(frameSize, CGSizeZero))
        return CGRectZero;

    float maxWidth = rect.size.width - 20;
    float maxHeight = rect.size.height - 20;

    float ratioX = maxWidth / frameSize.width;
    float ratioY = maxHeight / frameSize.height;
    float ratio = MIN(ratioX, ratioY);

    float newWidth = frameSize.width * ratio;
    float newHeight = frameSize.height * ratio;

    float x = (rect.size.width - newWidth) / 2;
    float y = (rect.size.height - newHeight) / 2;

    return CGRectMake(x, y, newWidth, newHeight);
} 
```

这确定了可以使用 frameSize 参数中指定的比率创建的最大正方形，其中应该在 rect 参数中提供正方形的尺寸。

我想到了一些解决方案，但我不确定这是否可行。

*   将照片缩小到屏幕宽度或高度（以先到者为准），取图片的中心，这与拍照时显示的中心相同吗？不确定这是否可行，我尝试了一点，但失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:48:18.223

好的，我找到了解决方案：

当您使用相机拍照时，预览屏幕仅显示您正在拍摄的照片的一部分。

当您的 iOS 设备处于竖屏模式时，照片高度会缩小到屏幕高度，并且只显示中间的 640 像素。

![在此处输入图像描述](https://i.stack.imgur.com/xvclU.png)

深红色部分是屏幕上显示的内容。因此，当您拍照时，您需要将图像缩小到屏幕的最大高度以获得正确的宽度。

之后，我剪掉了中间的 640x960 像素，以实际得到与拍照时相同的图像。

之后，我的矩形覆盖的坐标与我的覆盖相同。

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [picker dismissModalViewControllerAnimated:YES];

    UIImage* artImage = [info objectForKey:UIImagePickerControllerOriginalImage];

    CGFloat imageHeightRatio = artImage.size.height / 960;
    CGFloat imageWidth = artImage.size.width / imageHeightRatio;

    CGSize newImageSize = CGSizeMake(imageWidth, 960);
    artImage = [artImage imageByScalingProportionallyToSize:newImageSize];

    CGRect cutOutRect = CGRectMake((artImage.size.width / 2) - (640 / 2), 0, 640, 960);

    artImage = [self imageByCropping:artImage toRect:cutOutRect];

    CGRect imageCutRect = [FrameSizeCalculations getFrameRect:CGRectMake(0,0, artImage.size.width, artImage.size.height) forSize:self.frameSize];
    artImage = [self imageByCropping:artImage toRect:imageCutRect];

    CGRect imageViewRect = CGRectInset(_containmentView.bounds, 10, 10);

    NSLog(@"ContainmentView: %f x %f x %f x %f",
          _containmentView.frame.origin.x,
          _containmentView.frame.origin.y,
          _containmentView.frame.size.width,
          _containmentView.frame.size.height
          );

    NSLog(@"imageViewRect: %f x %f x %f x %f",
          imageViewRect.origin.x,
          imageViewRect.origin.y,
          imageViewRect.size.width,
          imageViewRect.size.height
          );

    _imageView.frame = [FrameSizeCalculations getFrameRect:imageViewRect forSize:self.frameSize];

    NSLog(@"imageViewRect: %f x %f x %f x %f",
          _imageView.frame.origin.x,
          _imageView.frame.origin.y,
          _imageView.frame.size.width,
          _imageView.frame.size.height
          );

    _imageView.contentMode = UIViewContentModeScaleAspectFill;
    _imageView.image = artImage;
} 
```

# php - 使用 Advanced Rest Client Chrome 将数据发送到 RESTful

> ID：16141228
> 
> 赞同：2
> 
> 时间：2013-04-22T07:03:09.530
> 
> 标签：php, rest, curl, slim

您好，当我开发了一个检查电子邮件和密码的功能时，我在 REST API 中遇到了一个问题。在测试期间，我通过 Curl 控制台发送这些数据，它工作正常

```
C:\curlw32>curl -i -H "Content-Type: application/x-www-form-urlencoded" -X POST http://localhost/mobile-app/api/login -d" {\"email\":\"test@gmail.com\",\"password\":\"
123\"}"
HTTP/1.1 200 OK
Date: Mon, 22 Apr 2013 06:21:37 GMT
Server: Apache/2.2.20 (Ubuntu)
X-Powered-By: PHP/5.3.6-13ubuntu3.3
Set-Cookie: PHPSESSID=63ba20f54ab6e233297c4bc022ae256c; path=/
Content-Length: 33
Set-Cookie: 63ba20f54ab6e233297c4bc022ae256c=DEFAULT%7C0%7C2M3TMlgUx3gTlaarYzHIdD28l8q9FTcNub
t55%2BUGpAo%3D%7C7456bf61db3500c8bb7b3bc38082a470ce4a2ad3; path=/
Vary: Accept-Encoding
Content-Type: text/html
"Email or password is incorrect!" 
```

但是当我使用 Advanced Rest Client Application Chrome 扩展程序对其进行测试时，它会显示此错误

```
<html><head><title>Slim Application Error</title><style>body{margin:0;padding:30px;font:12px/1.5 Helvetica,Arial,Verdana,sans-serif;}h1{margin:0;font-size:48px;font-weight:normal;line-height:48px;}strong{display:inline-block;width:65px;}</style></head><body><h1>Slim Application Error</h1><p>The application could not run because of the following error:</p><h2>Details:</h2><strong>Message:</strong> Trying to get property of non-object<br/><strong>File:</strong> D:\wamp\www\mobile-m-panels\api\index.php<br/><strong>Line:</strong> 39<br/><h2>Stack Trace:</h2>#0 D:\wamp\www\mobile-m-panels\api\index.php(39): Slim::handleErrors(8, 'Trying to get p...', 'D:\wamp\www\mob...', 39, Array)<br />
#1 [internal function]: authentication()<br />
#2 D:\wamp\www\mobile-m-panels\api\Slim\Route.php(392): call_user_func_array('authentication', Array)<br />
#3 D:\wamp\www\mobile-m-panels\api\Slim\Slim.php(1052): Slim_Route->dispatch()<br />
#4 D:\wamp\www\mobile-m-panels\api\index.php(28): Slim->run()<br />
#5 {main}</body></html> 
```

任何机构都可以提出必要的改变吗？我捕获数据的代码是

```
$request = Slim::getInstance()->request(); 

$login_details = json_decode($request->getBody()); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-28T16:42:14.773

您应该从 Android 应用商店试用“ [Advanced Rest Client ”。](http://play.google.com/store/apps/details?id=com.snmba.restclient)

# wcf - 带有 ninject 扩展的 WCF 服务

> ID：16141231
> 
> 赞同：0
> 
> 时间：2013-04-22T07:03:13.593
> 
> 标签：wcf, web-services, ninject

我的 ninject 扩展名的 wcf 服务有问题。当我的服务在我试图调用它时没有无参数构造函数时，当我得到无参数构造函数时，我得到了错误，我错过了它：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
public class ContractService: IContractService
{
 public ContractService()
        : this(new AddressService(), new TelephoneService())
    {

    }
    [Inject]
    public ContractWCFService(IAddressService addressService, ITelephoneService telephoneService)
    {

        _addressService = addressService;
        _telephoneService = telephoneService;
    }...
} 
```

然后，调用无参数的一个，我认为应该调用具有属性 [Inject] 的第二个。

编辑：NinjectWebCommon：

```
 private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<ServiceHost>().To<NinjectServiceHost>();

        kernel.Bind<IAddressService>().To<AddressService>().InHttpRequestScope();
        kernel.Bind<TelephoneService>().To<TelephoneService>().InHttpRequestScope();
        kernel.Bind(typeof(IRepository<>)).To(typeof(Repository<>)).InHttpRequestScope();
        kernel.Bind(typeof(EFModel)).ToSelf().InHttpRequestScope();
        IoC.Initialize((StandardKernel)kernel);

    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:15:59.313

要使用 ninject 传递参数/管理您的实例，您应该结合 [Instance Provider](http://msdn.microsoft.com/en-us/library/vstudio/hh323725%28v=vs.100%29.aspx) 和/或特定的 ninject[扩展](http://nuget.org/packages/CommonInstanceFactory.Extensions.Wcf.Ninject/)。

这篇文章也很有帮助：[Passing parameters to a WCF ServiceHost type with Ninject 2](https://stackoverflow.com/questions/5733219/passing-parameters-to-a-wcf-servicehost-type-with-ninject-2)

# javascript - 放大谷歌地图时多边形颜色重叠

> ID：16141233
> 
> 赞同：3
> 
> 时间：2013-04-22T07:03:31.033
> 
> 标签：javascript, google-maps, dictionary, google-maps-api-3

我之前在 Stackoverflow 中以不同的标题发布了这个问题，但没有得到太多回应。这次再次发布，并进行更多说明。

我已经使用 V3 js API 实现了一个谷歌地图。我在地图内绘制了大约 500 个邮政编码多边形。邮政编码多边形的着色取决于某些工作正常的条件。就像我为一组邮政编码分配不同的颜色一样。但问题是当我放大地图时，一些多边形颜色与其他多边形颜色重叠。

例如：我正在从我的数据库中提取 30 个邮政编码。我将这 30 个邮政编码划分为 5 个区域（比如根据最高销售额到最低销售额）。每个区域都将用特定的颜色标记。因此在这种情况下，将绘制 30 个多边形和 5 个区域，从而具有 5 种不同的颜色。现在，当我放大地图时，分组没有变化，但是一些多边形（可能是 3-4 个）颜色与其他多边形重叠。如果 3 号区域在法线贴图中具有“黄色”颜色，当我放大地图时，区域 3 的某些多边形会被“红色”颜色重叠。其中“红色”颜色属于区域 1 邮政编码多边形。

这是代码

```
{% ifequal zip.rank 1 %}
    var fillColor = '#FF0000';
{% endifequal %}
{% ifequal zip.rank 2 %}
    var fillColor = '#FF00D3';
{% endifequal %}
{% ifequal zip.rank 3 %}
    var fillColor = '#BE4BAA';
{% endifequal %}
{% ifequal zip.rank 4 %}
    var fillColor = '#BE88B5';
{% endifequal %}
{% ifequal zip.rank 5 %}
    var fillColor = '#857081';
{% endifequal %}

var path = [
                {% for polycoord in zip.zip_info.zip_polygon %}
                    new google.maps.LatLng({{polycoord.1}}, {{polycoord.0}}),
                {% endfor %}
            ];
var polygon = new google.maps.Polygon(
    {
        path:path, 
        clickable:true,
        strokeColor: '#000000',
        strokeOpacity: 0.75,
        strokeWeight: 1,
        fillColor: fillColor,
        fillOpacity: 1,
    }

);
polygon.setMap(map); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:06:03.837

我找到了解决方案。基本上所有的颜色都是通过服务器端脚本随机生成的，并被传递给地图模板。用于生成随机颜色的脚本有时会给出 5 位颜色代码，浏览器无法理解。因此，一些多边形区域采用了附近的多边形区域颜色。现在我已经修改了服务器端脚本，如果脚本生成 5 位颜色代码，那么将在颜色代码中添加一个额外的随机数字，最终将生成一个有效的颜色代码。

# jquery - 重复 jQuery 代码并熟练掌握

> ID：16141234
> 
> 赞同：0
> 
> 时间：2013-04-22T07:03:36.463
> 
> 标签：jquery

这是我的代码：

```
var flag=true;
$(document).ready(function(){
    $("glavna").mouseenter(function(){
        if(flag)
        {
            $(".ocenjevanje").animate({right:"+=440", bottom:"+=20"},1000);
            $(".svetovanje").animate({right:"+=440", top:"+=140"},1000);
            $(".onas").animate({left:"+=440", top:"+160"},1000);
            $(".infotocka").animate({left:"+=440", bottom:"+=3"},1000);
            flag=false;
        }
    });
});

var bannana=true;
$(document).ready(function(){
    $(".glavna").click(function(){
        if(bannana)
        {
            $(".ocenjevanje").animate({right:"-=440", bottom:"-=200"},1000);
            $(".svetovanje").animate({right:"-=440", top:"-=140"},1000);
            $(".onas").animate({left:"-=440", top:"-=150"},1000);
            $(".infotocka").animate({left:"-=440", bottom:"-190"},1000);
            bannana=false;
        }
    });
}); 
```

这会将我在页面中间的卡片移动到一边，将鼠标悬停在主卡片上并在点击时返回它们。但问题是我只能这样做一次（只有一次悬停并单击......之后它什么也不做）。我怎样才能制作代码，以便我能够重复此操作？我怎样才能在所有屏幕尺寸上熟练使用 jQuery，所以无论它的尺寸如何，卡片都将始终位于屏幕的角落？最后一件事，进入顶部的卡片会无缘无故地产生一些不同的动画。它们不会像底部的卡片那样从起始位置移动，而是在对角线动画之前稍微向上移动。我该如何解决？如果需要，这里是完整代码（带有 css 和 html）：http: [//jsfiddle.net/kkdpw/](http://jsfiddle.net/kkdpw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:10:52.803

你需要在事件发生后将标志和香蕉改回真/假..

```
var flag=true;
$(document).ready(function(){
$(".glavna").mouseenter(function(){
  if(flag)
  {
     $(".ocenjevanje").animate({right:"+=440", bottom:"+=20"},1000);
     $(".svetovanje").animate({right:"+=440", top:"+=140"},1000);
     $(".onas").animate({left:"+=440", top:"+160"},1000);
     $(".infotocka").animate({left:"+=440", bottom:"+=3"},1000);
     flag=false;
      bannana = true;
  }

});
});

var bannana=true;
$(document).ready(function(){
$(".glavna").click(function(){
  if(bannana)
  {
     $(".ocenjevanje").animate({right:"-=440", bottom:"-=200"},1000);
     $(".svetovanje").animate({right:"-=440", top:"-=140"},1000);
     $(".onas").animate({left:"-=440", top:"-=150"},1000);
     $(".infotocka").animate({left:"-=440", bottom:"-190"},1000);
     bannana=false;
      flag = true;
  }

});
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/kkdpw/5/)

# eclipse - 与 repo 连接时出错

> ID：16141242
> 
> 赞同：6
> 
> 时间：2013-04-22T07:04:03.873
> 
> 标签：eclipse, svn, tortoisesvn, javahl

在连接到`SVN`through`Eclipse Juno`时，我收到以下错误，但如果我通过以前的版本连接`Eclipse`到，`Juno`那么它很容易连接。我得到的错误如下所示，请告知如何克服这个问题，因为我想`Juno`用作`Eclipse`编辑器。

```
SVN: '0x00400006: Validate Repository Location' operation finished with error: Selected SVN connector library is not available or cannot be loaded.
If you selected native JavaHL connector, please check if binaries are available or install and select pure Java Subversion connector from the plug-in connectors update site.
If connectors already installed then you can change the selected one at: Window->Preferences->Team->SVN->SVN Connector.
Selected SVN connector library is not available or cannot be loaded.
If you selected native JavaHL connector, please check if binaries are available or install and select pure Java Subversion connector from the plug-in connectors update site.
If connectors already installed then you can change the selected one at: Window->Preferences->Team->SVN->SVN Connector. 
```

# javascript - PDF Javascript：自动重新计算字段的值

> ID：16141243
> 
> 赞同：0
> 
> 时间：2013-04-22T07:04:13.813
> 
> 标签：javascript, pdf, acrobat

在我开始之前，我的问题不是在网站上嵌入 PDF，也不是下载它。

我有一个包含表单的 PDF，以及 PDF 中的 javascript，它应该即时计算某个字段的值。除了它没有；好吧，它确实如此，但仅在更改字段的值时...

我有一个包含日期的字段，我想要另一个字段来计算自该日期以来经过的天数。这部分有效。虽然它在我更改“日期”的值时起作用（进行计算并按预期显示结果），但我希望*天*数值每天自动更新，而不仅仅是在我更改日期时。

我用来编辑 PDF 的机器有 Adob​​e Acrobat X Pro，但显示 PDF 的系统只有 Adob​​e Acrobat Reader 9。Reader 嵌入在类似信息亭的应用程序中，让我不确定是否定期重新加载 PDF由应用程序，或保留在内存中，只是隐藏。

# magento - MAGMI - 大量导入 Magento

> ID：16141245
> 
> 赞同：1
> 
> 时间：2013-04-22T07:04:18.097
> 
> 标签：magento, magmi

你们能分享一些关于 Magmi 的优点和缺点吗？

我正在评估我们的 Magento 1.12 实现，因为我们经常更新提要，提要也包含大量数据。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:26:45.180

我已经使用 Magmi 将近一年了，为广泛的客户群执行大量 Magento 导入。

**优点：**

*   非常快速的进口（几秒钟内的数千种产品）
*   允许您扩展 Magmi 核心功能的插件系统（对于自定义数据导入非常强大）
*   最新版本的 Magento 出奇的稳定和维护

**缺点：**

*   ~~缺乏身份验证（您必须设置一些身份验证，以便没有人可以访问它。这很容易做到）~~-

    **[Magmi 的最新版本](https://github.com/dweeves/magmi-git)现在包括一个身份验证层，需要 Magento 管理员登录才能访问它的 UI。**

*   UI 有点不直观和丑陋（它是由开发人员为开发人员设计的。它看起来并不漂亮）
*   它会让你意识到标准的 Magento 导入方法是多么愚蠢（让我们面对现实吧，它们很慢）

对于您的情况（经常更新提要），Magmi 可以正常工作。您基本上可以上传一个新的 CSV，然后从 HTTP 请求或使用包含的命令行功能调用 Magmi。它的设置和维护非常简单。

# themes - 通过代码更改 Vaadin 7 中的主题

> ID：16141247
> 
> 赞同：10
> 
> 时间：2013-04-22T07:04:27.630
> 
> 标签：themes, vaadin

我正在 Vaadin 7 中做一个项目。我需要更改页面的主题。

在 Vaadin 6 中，有一个名为“setTheme()”的函数。这样我就可以在代码中的任何位置使用该函数更改主题。

但是，在 Vaadin 7 中，我找不到类似的东西。

我知道会有办法做到这一点。

以及当我更改主题时如何在 UI 上应用更改？

会自动更改吗？（或者）

ICEPush 会帮助我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T08:26:24.870

在 Vaadin 7 中，方法 'setTheme()' 已被新的注解 @Theme 取代。在 Vaadin 7 中，“动态主题更改”是不可能的。

在这个[Vaadin 论坛主题](https://vaadin.com/forum#!/thread/1154742)中有一个关于 Vaadin 7 中动态主题更改的讨论。你应该看看它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-04T11:26:45.557

在 Vaadin 7.3.0 中引入了 setTheme 功能：[https ://vaadin.com/wiki/-/wiki/Main/Changing+theme+on+the+fly](https://vaadin.com/wiki/-/wiki/Main/Changing+theme+on+the+fly)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-14T16:41:45.653

你可以试试这个 Vaadin 7：

1.  创建自己的 UIProvider
2.  在根 UI 中注册您的 UIProvider
3.  在 UIProvider 中切换主题并触发页面重新加载

DynamicThemeUIProvider.java

```
public class DynamicThemeUIProvider extends UIProvider {
    private String currentTheme = "reindeer";

    @Override
    public Class<? extends UI> getUIClass(UIClassSelectionEvent event) {
        return DemoUI.class;
    }

    public void setTheme(String theme) {
        currentTheme = theme;
    }

     public String getTheme(UICreateEvent event) {
         return currentTheme;
     }
} 
```

DemoUI.java

```
public class DemoUI extends UI {
    private DynamicThemeUIProvider provider;
    @Override
    protected void init(VaadinRequest request) {
        provider = new DynamicThemeUIProvider();
        getSession().addUIProvider(provider);
    }

    public DynamicThemeUIProvider getDynamicThemeUIProvider() {
        return provider;
    }
} 
```

然后在切换主题的组件上：

```
@Override
public void valueChange(ValueChangeEvent event) {
    DemoUI ui = (DemoUI) getUI();
    DynamicThemeUIProvider uiProvider = ui.getDynamicThemeUIProvider();

    if (uiProvider == null) {
        return;
    }

    uiProvider.setTheme("reindeer");
    try {
        String value = (String) event.getProperty().getValue();
        uiProvider.setTheme(value.toLowerCase());
    } catch (Exception e) {
        e.printStackTrace();
    }

    ui.getPage().getJavaScript().execute("document.location.reload(true)"); // page refresh
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-14T07:15:11.227

因为我使用了自定义主题，所以我让它变得非常简单。我每次都使用切换按钮并执行所需的代码。

```
JavaScript.getCurrent().execute("document.body.className = document.body.className.replace(\"theme1\",\"theme2\"); ");

JavaScript.getCurrent().execute("document.body.className = document.body.className.replace(\"theme2\",\"theme1\"); "); 
```

我的css文件将是这样的。

```
.theme1 .v-button {
   /* some css attribute */
}

.theme2 .v-button {
   /* some css attribute */
} 
```

相信我; 主题切换非常非常快，因为浏览器本身会执行切换主题的技巧，而不是要求 Vaadin 服务器进行切换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-13T23:47:13.630

关于图表的主题：只需在 ComboBox 或 OptionGroup（用于单选按钮）的侦听器内的某处进行切换，即可进行以下 ChartOptions 静态方法调用，例如：

```
ChartOptions.get().setTheme(new VaadinTheme()) 
```

然后

```
ChartOptions.get().setTheme(new SkiesTheme()) 
```

等等

还有 GridTheme(); GrayTheme() 和 HighChartsDefaultTheme(); 您甚至可以扩展基本主题以创建自己的主题（在 Vaadin 中查找）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-20T15:43:33.620

从 Vaadin 7.3 开始，您可以使用[UI#setTheme()](https://vaadin.com/api/com/vaadin/ui/UI.html#setTheme(java.lang.String))

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-14T12:27:04.997

在 Vaadin 7 及更高版本中，我们有一个名为 @Theme(yourThemeName) 的注释，基于您在此处提供的主题名称，它将重定向到特定的 .scss 样式。此注释在调用 Init 方法之前调用。

# web-scraping - 如何编写 webscript 为当前用户返回票证？

> ID：16141251
> 
> 赞同：0
> 
> 时间：2013-04-22T07:04:40.880
> 
> 标签：web-scraping, alfresco, alfresco-share, web-scripting

我需要实现一个 web 脚本，为当前用户生成一个返回票。此 Web 脚本由我用来设置 URLConncetion 的 URI 寻址。票证应包含在响应正文中，我需要在我的 JSP（或 Java 代码）中对其进行评估以提取票证。如何通过一个简单的 JavaScript / FreeMarker web 脚本来完成，使用 JavaScript 会话根范围对象来检索票证，即 session.getTicket() ？任何人都可以写出步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:42:46.333

**ticket.get.html.ftl**（或 json 或任何你想要的）：

```
${session.ticket} 
```

# sharepoint - SharePoint 2013 - 错误“init.js 加载失败”

> ID：16141254
> 
> 赞同：1
> 
> 时间：2013-04-22T07:04:52.403
> 
> 标签：sharepoint, web-parts, sharepoint-designer, sharepoint-workflow, sharepoint-2013

我是 SharePoint 2013 服务器和 SharePoint Designer 2013 的新手。当我在 IE 中浏览 SharePoint 网站时，出现以下错误。

```
"init.js failed to load" 
```

但是当我在 chrome 中浏览 SharePoint 网站时，它工作正常。

谁能帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:34:59.060

我已经从我的电脑上运行了 Office 诊断工具。问题得到解决。

链接：[http ://sharepointnuke.blogspot.in/2012/05/initjs-error-with-internet-explorer.html](http://sharepointnuke.blogspot.in/2012/05/initjs-error-with-internet-explorer.html)

# java - 如何在 Java 正则表达式中拆分这个“树状”字符串？

> ID：16141255
> 
> 赞同：0
> 
> 时间：2013-04-22T07:05:02.657
> 
> 标签：java, regex, tree, split

这是字符串：

```
String str = "(S(B1)(B2(B21)(B22)(B23))(B3)())"; 
```

son-() 中的内容可能是“”，或者只是 str 的值，或者类似该模式，递归，所以 sub-() 是一个子树。

预期结果：

```
str1 is "(S(B1))"
str2 is "(B2(B21)(B22)(B23))" //don't expand sons of a son
str3 is "(B3)"
str4 is "()" 
```

str1-4 是例如数组中的元素

如何拆分字符串？

我有一个熟悉的问题：[如何在 Java 正则表达式中拆分此字符串？](https://stackoverflow.com/questions/16117716/how-to-split-this-string-in-java-regex) 但它的答案对于这个来说还不够好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:09:29.210

正则表达式没有足够的能力来解析平衡/嵌套的括号。这与解析标记语言（如 HTML）本质上是相同的问题，其中一致的建议是使用特殊的解析器，而不是正则表达式。

您应该将其解析为一棵树。总体而言：

*   创建一个堆栈。
*   当您点击“（”时，将下一个块推入堆栈。
*   当您点击“）”时弹出堆栈。

这需要几分钟的时间来编写，并将检查您的输入是否格式正确。

这几乎可以立即为您节省时间。尝试为此管理正则表达式将变得越来越复杂，并且几乎不可避免地会崩溃。

更新：如果您只关心一个级别，那么它可以更简单（未调试）：

```
List<String> subTreeList = new ArrayList<String>();
String s = getMyString();
int level = 0;
int lastOpenBracket = -1
for (int i = 0; i < s.length(); i++) {
    char c = s.charAt(i);
    if (c == '(') {
        level++;
        if (level == 1) {
            lastOpenBracket = i;
        }
    } else if (c == ')') {
        if (level == 1) {
            subStreeList.add(s.substring(lastOpenBracket, i);
        }
        level--;
    }
}

I haven't checked it works, and you should debug it. You should also put checks to make sure you 
```

末尾没有挂括号或级别 == 1 的奇怪字符；

# python - 将pybrain预测的输出作为数组获取

> ID：16141256
> 
> 赞同：7
> 
> 时间：2013-04-22T07:05:02.810
> 
> 标签：python, numpy, machine-learning, neural-network, pybrain

我正在使用 pybrain 构建一个具有 6 个输入维度和一个实值输出维度的网络。我使用的代码如下所示：

```
network = buildNetwork(train.indim, 4, train.outdim)

trainer = BackpropTrainer( network, train)
trainer.trainOnDataset(train, 8000)

print 'MSE train', trainer.testOnData(train, verbose = True) 
```

这里 train 的类型是 Dataset 我想将 trainer.testOnData() 中的预测作为一个 numpy 数组。我可以查看预测结果以及错误，但我希望它作为一个数组。无论如何，这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:28:41.673

使用`activate`网络的功能：

```
numpy.array([network.activate(x) for x, _ in train]) 
```

完整示例：

```
from datasets import XORDataSet 
from pybrain.tools.shortcuts import buildNetwork
from pybrain.supervised import BackpropTrainer
import numpy
d = XORDataSet()
n = buildNetwork(d.indim, 4, d.outdim, bias=True)
t = BackpropTrainer(n, learningrate=0.01, momentum=0.99, verbose=True)
t.trainOnDataset(d, 1000)
t.testOnData(verbose=True)
print numpy.array([n.activate(x) for x, _ in d]) 
```

（仅适用于 pybrain/examples/supervised/backprop 目录，因为需要 XORDataSet。）

# android - 多视图 9 补丁大小问题

> ID：16141257
> 
> 赞同：2
> 
> 时间：2013-04-22T07:05:03.400
> 
> 标签：android, nine-patch

我有一个带有根作为自定义的布局，其中`RelativeLayout`有一些任意`Views`. 在我的代码中，我以编程方式添加了一些新的 s 并设置了由我的 custom`View`中的属性提供的背景。我在我的布局 xml 中添加了一个来自 xml 的九个补丁可绘制对象。`onCreate()``RelativeLayout`

现在到目前为止，当添加 a `View`（在我的情况下`TextView`为宽度为 的 a `WRAP_CONTENT`）时，一切正常。当我尝试添加比第一个短的第二个时，就会出现问题。第一个的背景现在突然开始与第二个的大小相匹配。

我尝试使用 改变可绘制对象`mutate()`，但没有区别，可能是因为您必须在实际对可绘制对象执行某些操作时调用它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:44:20.513

我修复了读取可绘制 ID 而不是可绘制本身。在放大我的视图时，我使用前面提到的可绘制 id 设置背景，并且一切正常。

# javascript - JQM 弹出示例不起作用

> ID：16141258
> 
> 赞同：0
> 
> 时间：2013-04-22T07:05:08.050
> 
> 标签：javascript, jquery-mobile

尝试学习弹出窗口并发现 JQM 弹出窗口“对话框”示例不起作用 - 当我按下按钮“删除页面...”时没有出现任何内容。我的html正文是：

```
<div data-role="page" id="page_test1" data-theme="b">

<div data-role="content">
    <a href="#popupDialog" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" data-icon="delete" data-theme="b">Delete page...</a>
    </div> <!-- /content -->
</div> <!-- /page -->

<!-- Exactly copied from http://view.jquerymobile.com/1.3.1/dist/demos/widgets/popup/ (sample "Dialog") -->
<div data-role="popup" id="popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
    <div data-role="header" data-theme="a" class="ui-corner-top">
        <h1>Delete Page?</h1>
    </div>

    <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
        <h3 class="ui-title">Are you sure you want to delete this page?</h3>
        <p>This action cannot be undone.</p>
        <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>
        <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">Delete</a>
    </div> <!-- content -->
</div>  <!-- popup --> 
```

如您所见，我的 html 部分有点。你可以在这里找到弹出的这种行为 - [http://jsfiddle.net/vbulash/YkEAj/](http://jsfiddle.net/vbulash/YkEAj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:13:47.333

弹出窗口必须在`data-role="page"`容器内。

```
<div data-role="page" id="page_test1" data-theme="b">
    <div data-role="content">   <a href="#popupDialog" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop" data-icon="delete" data-theme="b">Delete page...</a>

    </div>
    <!-- /content -->
    <!-- Exactly copied from http://view.jquerymobile.com/1.3.1/dist/demos/widgets/popup/ (sample "Dialog") -->
    <div data-role="popup" id="popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
        <div data-role="header" data-theme="a" class="ui-corner-top">
                <h1>Delete Page?</h1>

        </div>
        <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
                <h3 class="ui-title">Are you sure you want to delete this page?</h3>

            <p>This action cannot be undone.</p>    <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>
    <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">Delete</a>

        </div>
        <!-- content -->
    </div>
    <!-- popup -->
</div>
<!-- /page --> 
```

[http://jsfiddle.net/YkEAj/1/](http://jsfiddle.net/YkEAj/1/)

# qt - 如何捕获整个 web 视图以进行打印

> ID：16141262
> 
> 赞同：0
> 
> 时间：2013-04-22T07:05:16.557
> 
> 标签：qt, qt4, qt5

我是 Qt 的新手。我只是想知道是否可以将整个发送`qwebview`到打印机中。我不是在问源代码，而是

1）有可能吗？

2）我们有任何参考链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:06:34.820

1) 是 可能

2) [http://www.qtcentre.org/threads/25880-QWebView-prints-PDF-file-OK-with-QPrintDialog-only](http://www.qtcentre.org/threads/25880-QWebView-prints-PDF-file-OK-with-QPrintDialog-only)

您也可以从 webview 获取 HTML 并采用其他一些打印技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:23:46.093

1）是的，有可能

2) 如 QWebView 文档中所述

```
A QWebView can be printed onto a QPrinter using the print() function. 
This function is marked as a slot and can be conveniently connected to 
QPrintPreviewDialog's paintRequested() signal. 
```

# android - 在 ScrollView 中使用 onTouchListener 检测滑动

> ID：16141264
> 
> 赞同：6
> 
> 时间：2013-04-22T07:05:16.837
> 
> 标签：android, android-scrollview, android-gesture

我正在使用以下代码来检测我的活动中的滑动：

```
getWindow().getDecorView().getRootView().setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                int action = event.getAction();
                if(action == MotionEvent.ACTION_DOWN){

                    downX = event.getX();
                    downY = event.getY();
                    //mSwipeDetected = Action.None;
                    return true; // allow other events like Click to be processed
                }
                else if(action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL){
                     upX = event.getX();
                     upY = event.getY();

                     float deltaX = downX - upX;
                     float deltaY = downY - upY;

                    // horizontal swipe detection
                    if (Math.abs(deltaX) > MIN_DISTANCE) {
                        // left or right
                        if (deltaX < 0) {
                            Log.i(TAG, "Swipe Left to Right");
                            //mSwipeDetected = Action.LR;
                            onClickPrevQues(getWindow().getDecorView().getRootView());

                            return false;
                        }
                        if (deltaX > 0) {
                            Log.i(TAG, "Swipe Right to Left");
                            onClickNextQues(getWindow().getDecorView().getRootView());
                           // mSwipeDetected = Action.RL;
                            return false;
                        }
                    } else if (Math.abs(deltaY) > MIN_DISTANCE) { // vertical swipe
                                                                    // detection
                        // top or down
                        if (deltaY < 0) {
                            Log.i(TAG, "Swipe Top to Bottom");
                            //mSwipeDetected = Action.TB;
                            return false;
                        }
                        if (deltaY > 0) {
                            Log.i(TAG, "Swipe Bottom to Top");
                            //mSwipeDetected = Action.BT;
                            return false;
                        }
                    }
                    return false;
                }
                else if(action == MotionEvent.ACTION_MOVE){
                    return true;
                }
                return false;
            }
        }); 
```

代码在`LinearLayout`. `Linearlayout`令人惊讶的是，如果我把里面包裹起来，同样的方法也不起作用`ScrollView`。这里有什么问题？

**编辑：**
布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
<RelativeLayout 
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#ffffff"
    android:gravity="center_horizontal" >

    <RelativeLayout
        android:id="@+id/RelativeLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:orientation="horizontal"
        android:paddingBottom="0dp"
        android:paddingLeft="620dip"
        android:paddingTop="15dip" >

        <TextView
            android:id="@+id/text_unattempted"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:paddingTop="2dp"
            android:text="TextView"
            android:textColor="#b4cacc"
            android:textStyle="bold" />
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/RelativeLayout2"
        android:gravity="center_horizontal"
        android:orientation="horizontal"
        android:paddingBottom="5dip"
        android:paddingTop="5dip" >

        <RelativeLayout
            android:id="@+id/relative_group"
            android:layout_width="fill_parent"
            android:layout_height="260dp"
            android:layout_marginLeft="20dp"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/txt_question_nu"
                android:layout_width="180dp"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:paddingTop="0dp"
                android:text="Question 1"
                android:textColor="#b4cacc"
                android:textSize="28dp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/question"
                android:layout_width="fill_parent"
                android:layout_height="400dp"
                android:layout_alignLeft="@+id/txt_question_nu"
                android:layout_below="@+id/txt_question_nu"
                android:layout_marginBottom="20dp"
                android:layout_marginTop="24dp"
                android:textColor="#000000"
                android:textSize="20dp" />

            <WebView
                android:id="@+id/questionimage"
                android:layout_width="wrap_content"
                android:layout_height="400dp"
                android:layout_alignLeft="@+id/txt_question_nu"
                android:layout_alignParentBottom="true"
                android:layout_below="@+id/txt_question_nu"
                android:layout_marginTop="24dp"
                android:fadeScrollbars="false"
                android:textColor="#000000"
                android:textSize="20dp"
                android:textStyle="bold" />

            <Button
                android:id="@+id/hintSolBtn"
                style="@style/HomeButton"
                android:layout_width="40dp"
                android:layout_height="30dp"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/txt_question_nu"
                android:background="#90b7bb"
                android:onClick="onClickHintSol"
                android:scaleType="centerInside"
                android:text="Hint"
                android:textColor="#ffffff" />
        </RelativeLayout>
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/LinearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginTop="15dp"
        android:layout_below="@+id/radio_question_group"
        android:layout_alignParentLeft="true"
        android:orientation="horizontal"
        android:paddingTop="5dip" >

        <ImageButton
            android:id="@+id/abandonButton"
            style="@style/HomeButton"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_alignParentRight="true"
            android:layout_marginRight="45dp"
            android:onClick="onAbandonAssess"
            android:paddingLeft="6dp"
            android:scaleType="centerInside"
            android:src="@drawable/abandon"
            android:visibility="gone" />

        <Button
            android:id="@+id/submitBtn"
            android:layout_width="150dp"
            android:layout_height="50dp"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="63dp"
            android:background="#00b6c6"
            android:onClick="onSubmitAssess"
            android:paddingLeft="6dp"
            android:scaleType="centerInside"
            android:text="Submit"
            android:textColor="#ffffff"
            android:textSize="22dp" />

        <ImageButton
            android:id="@+id/prevBtn"
            style="@style/HomeButton"
            android:layout_width="120dp"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_weight="0.01"
            android:onClick="onClickPrevQues"
            android:scaleType="centerInside"
            android:src="@drawable/previous" />

        <ImageButton
            android:id="@+id/nextBtn"
            style="@style/HomeButton"
            android:layout_width="120dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/prevBtn"
            android:onClick="onClickNextQues"
            android:scaleType="centerInside"
            android:src="@drawable/next" />
    </RelativeLayout>

    <TextView
        android:id="@+id/answer_choices"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/LinearLayout1"
        android:layout_marginLeft="37dp"
        android:text="Answer Choices"
        android:textColor="#b4cacc"
        android:textSize="20dp"
        android:textStyle="bold" />

    <RadioGroup
        android:id="@+id/radio_question_group"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/answer_choices"
        android:layout_below="@+id/answer_choices" >

        <RadioButton
            android:id="@+id/answer1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:button="@drawable/radiostate"
            android:checked="false"
            android:layout_marginTop="10dp"
            android:hapticFeedbackEnabled="true"
            android:height="100dp"
            android:textColor="#000000" />

        <RadioButton
            android:id="@+id/answer2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:button="@drawable/radiostate"
            android:layout_marginTop="10dp"
            android:checked="false"
            android:hapticFeedbackEnabled="true"
            android:textColor="#000000" />

        <RadioButton
            android:id="@+id/answer3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:button="@drawable/radiostate"
            android:layout_marginTop="10dp"
            android:checked="false"
            android:hapticFeedbackEnabled="true"
            android:textColor="#000000" />

        <RadioButton
            android:id="@+id/answer4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:button="@drawable/radiostate"
            android:layout_marginTop="10dp"
            android:checked="false"
            android:hapticFeedbackEnabled="true"
            android:textColor="#000000" />
    </RadioGroup>

    <!-- <ImageView
        android:id="@+id/pen_and_paper_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/pen_paper"
        android:visibility="gone" /> -->

    <ImageButton
        android:id="@+id/erase"
        android:layout_width="35dp"
        android:layout_height="35dp"
        android:layout_above="@+id/radio_question_group"
        android:layout_below="@+id/LinearLayout1"
        android:layout_toRightOf="@+id/answer_choices"
        android:onClick="onEraseChoice"
        android:src="@drawable/eraser"
        android:visibility="visible" />

</RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-18T14:31:27.800

您必须将 OntouchListener 设置为 ScrollView。

```
ScrollView scrollView = (ScrollView)findViewById(R.id.scrollView1);
scrollView.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch(event.getAction()){
                    case MotionEvent.ACTION_DOWN:{
                        downX = event.getX();}
                    case MotionEvent.ACTION_UP:{
                        upX = event.getX();

                        float deltaX = downX - upX;

                        if(Math.abs(deltaX)>0){
                            if(deltaX>=0){
                                swipeToRight();
                                return true;
                            }else{
                                swipeToLeft();
                                return  true;
                            }
                        }
                    }
                }

                return false;
            }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T11:42:40.837

我认为这就是你要找的：

[android ScrollView中的滑动事件](http://techin-android.blogspot.in/2011/11/swipe-event-in-android-scrollview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T17:57:58.010

```
mSlop = ViewConfiguration.get(getActivity()).getScaledTouchSlop();
boolean mIsSwiping = false;

public boolean onTouch(View v, MotionEvent event) {
    //Timber.d("onTouch, v.getId %d, event.getActionMasked %d", v.getId(), event.getActionMasked());
    switch (event.getActionMasked()) {
        case MotionEvent.ACTION_DOWN:
            mDownX = event.getX();
            mDownY = event.getY();
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_CANCEL:
            mIsSwiping = false;
            break;
        case MotionEvent.ACTION_MOVE:
            float deltaX = event.getX() - mDownX;
            float deltaY = event.getY() - mDownY;
            if (!mIsSwiping && Math.abs(deltaX) > mSlop && Math.abs(deltaY) < mSlop) {
                mIsSwiping = true;
                if (deltaX > 0) {
                    Timber.d("swipe from left to right, slop %d", mSlop);
                    // TODO:
                } else {
                    Timber.d("swipe from right to left");
                    // TODO:
                }
                return true;
            } else if (!mIsSwiping && Math.abs(deltaY) > mSlop) {
                mIsSwiping = true;
                Timber.d("swipe vertical");
                return true;
            }

    }
    return false;
} 
```

# html - 如何在网页一侧制作固定的 HTML 框？非常基本的盒子？

> ID：16141268
> 
> 赞同：-2
> 
> 时间：2013-04-22T07:05:30.323
> 
> 标签：html

我只想要一个基本的 html 框，它完全位于网页的左侧并覆盖所有内容，并且只是具有垂直文本的某种颜色，如图所示： http: [//postimg.org/image/l12q7hxqn/](http://postimg.org/image/l12q7hxqn/)

这可以用 HTML 完成吗？我认为这将是一个非常基本的代码，但我不知道是什么。如果有人可以编写代码，我可以弄清楚如何调整尺寸和颜色。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:08:56.317

您可以在 css 中使用 `vertical-align: middle;`和`float:left`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:59:57.060

您可以通过将 html 框`<td>`和`<tr>`标签和另一组`<td>`,`<tr>`标签放在其中来进行格式化。这样，将创建一个包含一行和两个表数据的表，并且 html 框将被视为该特定表的最左侧的表数据。

# javascript - 在网站上创建可打印页面的可靠方法

> ID：16141272
> 
> 赞同：0
> 
> 时间：2013-04-22T07:05:41.560
> 
> 标签：javascript, html, printing

我被要求创建一个基于 Web 的应用程序，在几个部分上，它需要向用户提供一个“打印”按钮，并且一旦单击，就将文档发送到打印机。

但是，打印的信息在格式上应该尽可能可靠 - 理想情况下，它应该在任何打印机/计算机/操作系统上几乎相同，并且不包含浏览器插入的任何页眉/页脚（如 url 信息 Internet Explorer 配置为打印默认）。

我一直在考虑在服务器中创建一个 PDF 文件，并研究是否可以创建一个隐藏的 div/object/something 来加载该 PDF 文件，然后使用 javascript 使其在加载后接收“打印”指令。

无论如何，我想向你们征求意见。你会怎么做？你知道更好的方法吗？

提前感谢您的任何评论！

弗朗西斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:32:41.167

如果您在所有浏览器上都需要完全相同的格式，我会推荐 pdf。例如，带有 URL 的标题是由浏览器在打印时添加的，您只能在浏览器中禁用它，而不是使用媒体查询。

我使用[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/)生成 pdf。

# php - 在某个（动态）时间运行 PHP 脚本？cronjob 的替代品

> ID：16141274
> 
> 赞同：0
> 
> 时间：2013-04-22T07:05:43.247
> 
> 标签：php, cron

我正在开发一项用户安排他的推文的服务，例如我想在明天下午 12:30 发布一条推文。那怎么办？cron 工作是最好的方法吗？就像每 5 分钟运行一次 cronjob 并查看在此间隔内是否有要发布的推文？有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:13:51.960

运行 cron 作业绝对是最简单的解决方案，但是还有其他方法可用，其中一种方法是使用像[Amazons SQS这样的队列](http://aws.amazon.com/sqs/)

这使您可以简单地将事物放入队列中以供稍后处理，默认情况下它们会立即以准备好立即处理的状态添加到队列中，但是您可以使用时间戳将项目添加到队列中，它们应该保持休眠状态。这将是您的用户预定义的推文时间。

然后，您可以运行一个脚本，该脚本不断侦听队列中需要发送的任何新推文，一旦队列项可用，就会对其进行处理。

这样做的缺点当然是它需要更多的努力，但好处是你可以更容易地扩展，因为你可以让多台机器处理推文并且它们不会两次发送相同的推文（而如果两台机器运行相同的 cron，有机会他们都会发出推文）

# sql - 当 #tmp 表为空时，忽略 where

> ID：16141276
> 
> 赞同：0
> 
> 时间：2013-04-22T07:05:48.800
> 
> 标签：sql, sql-server, tsql

当#tmp 表为空时，我试图忽略我的位置。

喜欢：

```
 create table #tmp
    (
    my_id int
    )
create table #tmp2
    (
    my_name_id int
    )

    select * from foo
    where foo_id in (select my_id from #tmp)
and foo_name_id in (select my_name_id from #tmp2) 
```

现在的情况。当我们有一个表为空的情况时，它不会产生任何结果。
#tmp 不为空
#tmp1 为空

所以我在#tmp1 的位置应该被忽略。有任何线索怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:08:23.130

只需添加附加条件：

```
select * from foo
where (foo_id in (select my_id from #tmp) or not exists(select * from #tmp))
and (foo_name_id in (select my_name_id from #tmp2) or not exists(select * from #tmp2)) 
```

但是，您采用的一般形式使您看起来像是对 SQL 采取了一种相当程序化的方法，您将部分结果存储在临时表中，然后在最后将它们组合起来。通常最好将整个所需结果编写为单个查询，并让 SQL Server 确定如何最好地计算结果（并在需要时缓存中间形式）

# python - 无论如何从python unicode字符串中提取下划线的“原始数据”？

> ID：16141278
> 
> 赞同：1
> 
> 时间：2013-04-22T07:05:53.997
> 
> 标签：python, unicode

我用 pymssql 来解决这个问题。我有一个编码为 gbk 的 mssql db，但 pymssql 似乎无法支持这一点。当我使用'gbk'作为字符集时，它会抛出`OperationalError 20017`一些无用的消息，而当我尝试'cp936'时，它就会崩溃......

我可以使用 'UTF-8' 成功连接并可以使用 执行查询`sqlstr.encode('utf-8')`，问题是它返回包含非 unicode 内容的 unicode 字符串。

例如，一个查询返回一个 unicode 字符串`u'Port 26 \xb5\xe7'`，但这是错误的，它不是一个 unicode 字符串，它根本无法解码/编码，它应该是`'Port 26 \xb5\xe7'`（对于 python 2.x），因此可以用 gbk 解码并得到正确的结果

所以我的任务是从 unicode 字符串中提取原始内容。好吧，我想我可以从 repr 用一些字符串截断来做到这一点，然后在上面调用 eval ，但我只是想知道还有更多的 Pythonic 方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:18:51.003

这是做你想做的吗？

```
>>> myString = u'Port 26 \xb5\xe7'
>>> print myString.encode('latin1').decode('gbk')
Port 26 电 
```

事实上，您可以使用其中任何一种作为编码编解码器：

```
cp1250
cp1252
cp1254
cp1256
cp1258
latin_1
iso8859_3
iso8859_9
iso8859_15 
```

latin1 是您的最佳选择（最包容）。列出的 cp 编解码器都是基于 Windows 的。

# c# - 图动态更新

> ID：16141280
> 
> 赞同：0
> 
> 时间：2013-04-22T07:06:02.680
> 
> 标签：c#

我有一个应用程序，每次温度变化时都会从串口获取温度数据。该值存储在变量中并显示在文本框中。我想在图表中显示温度与时间的关系。我已将图表设置如下，但我不知道从哪里开始更新温度线与每秒的时间。

```
 InitializeComponent();
        //Chart
        chart1.ChartAreas.Add("areas");
        chart1.ChartAreas["areas"].AxisX.Minimum = 0;
        chart1.ChartAreas["areas"].AxisX.Interval = 1;
        chart1.ChartAreas["areas"].AxisY.Minimum = 0;
        chart1.ChartAreas["areas"].AxisY.Maximum = 250;
        chart1.ChartAreas["areas"].AxisY.Interval = 10;
        chart1.ChartAreas["areas"].AxisX.Title = "Time [s]";
        chart1.ChartAreas["areas"].AxisY.Title = "Temperature [°C]";
        chart1.Series.Add("Temperature");
        chart1.Series["Temperature"].Color = Color.Red;
        chart1.Series["Temperature"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Line;
        chart1.Titles.Add("Extruder Temperature");

       //this two lines are only to see something in the graph
        chart1.Series["Temperature"].Points.AddXY(0, 20);
        chart1.Series["Temperature"].Points.AddXY(1, 50);
    } 
```

我认为我需要通过用变量替换值来更新“点”和“值”（0、20），但如果这样做，我在图中只有一个点，我无法显示以前的值。作为初学者，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:56:26.337

另一种方法（每秒刷新）是使用 BackgroundWorker。这个问题举个[例子](https://stackoverflow.com/questions/15548009/gui-not-updating-with-timer-or-backgroundworker)。本质上，您启动了一个后台线程，该线程每隔设定的时间更新视图。

```
private BackgroundWorker _bw;

....
    InitializeComponent();
    _bw = new BackgroundWorker
    {
      WorkerReportsProgress = true,
      WorkerSupportsCancellation = true
    };
    _bw.DoWork += bw_DoWork;
    _bw.ProgressChanged += bw_ProgressChanged;
    _bw.RunWorkerCompleted += bw_RunWorkerCompleted;

    _bw.RunWorkerAsync ("Hello to worker");
     if (_bw.IsBusy) _bw.CancelAsync();
  }

  private void bw_DoWork (object sender, DoWorkEventArgs e)
  {

      if (_bw.CancellationPending) { e.Cancel = true; return; }
      var dataPoints = YourConnectToSerialPortAndGetDataFunction();
      _bw.ReportProgress (dataPoints);
      Thread.Sleep (1000); 

    e.Result = dataPoints;    // This gets passed to RunWorkerCompleted
  }

  private void bw_RunWorkerCompleted (object sender,
                                     RunWorkerCompletedEventArgs e)
  {

}

  private void bw_ProgressChanged (object sender,
                                  ProgressChangedEventArgs e)
  {
//UPDATE YOUR LABEL
chart1.Series["Temperature"].Points.AddXY(0, 20);
        chart1.Series["Temperature"].Points.AddXY(1, 50);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:52:57.167

获取新数据后，只需添加另一个数据点：只是给您一个想法（因为您尚未发布数据接收方法）：

```
OnSerialReceive()
{
    var temp = serialport.read();
    var time = (int)stopwatch.Elapsed.TotalSeconds;
    chart1.Series["Temperature"].Points.AddXY(time, temp);
} 
```

是的，一旦您将真实数据放入图表中，您就会想要删除虚假数据。虚假数据令人困惑。

# android - 位置变化时的图像变化

> ID：16141303
> 
> 赞同：0
> 
> 时间：2013-04-22T07:07:41.923
> 
> 标签：android, image, gps

因此，我试图在用户输入给定的 GPS 位置后让 imageview 更改其图像，但是一旦我到达该位置，我的应用程序就会一直关闭，我可以让 TextView 更改更改其文本，所以我认为它会是图像有点相同，但显然不是 LOL。

我把这个放在我的`public class activity: ImageView sprite;`

我刚有这个`setContentView: sprite = (ImageView)findViewById(R.id.imageView1);`

我对每个位置都使用“IF”语句，如下所示：

```
 if(pLat >= homeLat - 0.0001000 && pLat <= homeLat + 0.0001000 
&& pLong >= homeLong - 000.0002000 &&  pLong <=     homeLong + 000.0002000)
    {

    gateway.setText(R.string.home);
    gatewayDis.setText(R.string.homeD);
                       sprite.setBackgroundDrawable(this.getResources().getDrawable(R.drawable.minimap));
            // the image change is the only part that isn't working 
} 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:12:09.640

试试这个：

**sprite.setImageResource(R.drawable.minimap);**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:17:54.933

您需要从代码中更改以下行

```
sprite.setBackgroundDrawable(this.getResources().getDrawable(R.drawable.minimap)); 
```

到

```
sprite.setImageDrawable(this.getResources().getDrawable(R.drawable.minimap)); 
```

# ios - 如何在ios设备中存储来自url的json数据并在本地使用它

> ID：16141308
> 
> 赞同：1
> 
> 时间：2013-04-22T07:08:03.917
> 
> 标签：ios, objective-c, json

我想在我的应用程序中使用 json。我可以使用以下代码从 url 解析 json：

```
#import "ViewController.h"
@implementation ViewController
{
    NSDictionary *titles;
    NSMutableData *Data;
    NSArray *fileContent;
    NSArray *folderContent;
    NSMutableArray *all;
}
@synthesize Table;
- (void)viewDidLoad
{
    [super viewDidLoad];  
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSURL *url =[NSURL URLWithString:@"http://192.168.1.100/veis/root/developers/api/filemanager.php?key=5147379269&getlist=root"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[NSURLConnection alloc]initWithRequest:request delegate:self];

}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    Data = [[NSMutableData alloc]init];
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [Data appendData:theData];
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    titles = [NSJSONSerialization JSONObjectWithData:Data options:kNilOptions error:nil];
    fileContent = [titles objectForKey:@"fileContent"];
    folderContent = [titles objectForKey:@"folderContent"];
    all = [[NSMutableArray alloc]init];
    [all addObjectsFromArray:folderContent];
    [all addObjectsFromArray:fileContent];
    [Table reloadData];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    UIAlertView *errorView = [[UIAlertView alloc]initWithTitle:@"Error" message:@"The Connection has been LOST" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [errorView show];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

但是我想当我没有互联网时可以使用 json。我不知道如何以离线方式（或我的设备本地）使用 json

你能在这个问题上指导我如何离线使用 json

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:20:49.747

`Online`和json数据的解析方式应该是一样的`Offline`，都是一样的，只是你需要用`Unparsed`数据写一个文件说`data.json`in `Documents Directory`，如果你想使用相同的进程来使用`json`，但是如果你想使用解析的json，那就写吧作为`plist`..

您可以尝试使用以下方法

```
-(void)saveJsonWithData:(NSData *)data{

     NSString *jsonPath=[[NSSearchPathForDirectoriesInDomains(NSUserDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingFormat:@"/data.json"];

     [data writeToFile:jsonPath atomically:YES];

}

-(NSData *)getSavedJsonData{
    NSString *jsonPath=[[NSSearchPathForDirectoriesInDomains(NSUserDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingFormat:@"/data.json"];

    return [NSData dataWithContentsOfFile:jsonPath]
} 
```

然后调用函数为

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    [self saveJsonWithData:data];
} 
```

# azure-storage - 可以上传到 sql azure 管理门户的 .sql 文件的最大大小是多少？？？

> ID：16141313
> 
> 赞同：0
> 
> 时间：2013-04-22T07:08:22.440
> 
> 标签：azure-storage

我正在尝试在 SQL AZURE MANAGEMENT PORTAL 中运行 .sql 文件。.sql 文件的大小为 9.3GB。当我试图打开它时，我无法打开它。请告诉可以打开和执行的 .sql 文件的最大大小是多少。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:12:15.847

我不认为你的 9.3 GB 有问题。

请阅读

[Azure SQL 数据库 Web 版与商业版](https://stackoverflow.com/questions/3426360/sql-azure-web-vs-business-edition)

# java - 我正在使用 proguard 插件的 -repackageclasses 'my.pdt.z' 选项，但其他文件夹中仍然存在混淆文件

> ID：16141319
> 
> 赞同：0
> 
> 时间：2013-04-22T07:09:20.110
> 
> 标签：java, maven-2, proguard

我正在使用带有 proguard 插件的以下选项。我希望所有混淆的类都在“com.xProject.z”文件夹中，但我发现它们也分布在其他文件夹中。有人知道为什么吗？

```
<options>
<option>-repackageclasses 'com.xProject.z'</option>
<option>-dontshrink</option>
<option>-dontoptimize</option>
<option>-dontskipnonpubliclibraryclassmembers</option>
<option>-dontskipnonpubliclibraryclasses</option>
<option>-keepattributes</option>
<option>-keepclasseswithmembers public class * {public static void
            main(java.lang.String[]);}</option>
<option>-keepclassmembernames class * {java.lang.Class class$(*);}
</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:06:29.573

某些类不会移动到指定的包，因为您的配置保留了它们的名称。更多类无法移动，因为它们访问第一组类中的包可见类、字段或方法（或相反）。您可以使用 放松此约束`allowaccessmodification`。

# java - 在java中移动位的有效方法

> ID：16141325
> 
> 赞同：1
> 
> 时间：2013-04-22T07:09:35.977
> 
> 标签：java, bit-manipulation

我正在为学校做作业，但我得到了奇怪的输出。所以，我想我应该开始检查我的一些更基本的方法，然后再使用更高级的方法。我的问题是：方法

```
public static short get16(byte a, byte b){  
    return (short)(a*Math.pow(2,8)+b)
} 
```

返回 a`short`其中前 8 位是字节`a`，后 8 位是字节`b`？我不明白为什么它不会，因为乘以`2^8`与左移 8 位相同。并且添加第二个字节将弥补乘以 所获得的 8 个 0 `2^8`。它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:13:10.833

我不建议使用`Math.pow`256 来计算 `pow`。众所周知，它很难正确实现；一些现存的实现甚至没有得到正确的确切案例！

此外，`byte`Java 中的 s 已签名，因此您可能想说`(a&255)`and`(b&255)`而不仅仅是`a`and `b`。标志扩展会毁了你的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:34:56.967

你应该知道的一些事情：

“Math.pow”是一个浮点函数。不要通过调用浮点函数然后对结果进行舍入来进行整数计算。

Java 虚拟机内部是一个 32 位系统。所有“字节”和“短”数学表达式在内部被评估为“int”。即使添加两个字节在内部也是这样的：1）将字节转换为整数，2）添加整数，3）将低 8 位转换为字节。

正确的方法是：

```
return (short) ((a << 8) + (b & 255)); 
```

或者

```
return (short) ((a << 8) | (b & 255)); 
```

当“byte”转换为“int”时，符号位被复制到新位中。比如0b01010101变成0b00000000_00000000_00000000_01010101，因为第一位是0，但是0b10101010变成0b11111111_11111111_11111111_10101010。

# iphone - 将文件写入 App Bundle

> ID：16141326
> 
> 赞同：1
> 
> 时间：2013-04-22T07:09:37.220
> 
> 标签：iphone, ios, xcode, nsbundle

我有一个 Web 服务来下载一些新闻并将它们写入某个位置的 plist 文件中`NSLibraryDirectory`，这很好。但是，如果用户没有 Internet 连接或 web 服务处于脱机状态或其他情况，我会从 AppBundle 中加载一个 Default-Newsfile。

目前，我必须在每次 AppStoreUpdate 之前手动替换 Default-File 以使其保持最新。

我的问题：有没有一种简单的方法可以在通过模拟器调试时写入 App Bundle，所以默认文件每次都是最新的。

我对类似的事情进行了讨论：

```
#ifdef SIMULATOR
   //Write to AppBundle
#endif 
```

**注意：** 这都是关于我使用 Mac 和模拟器的时间，我不想在已发布的应用程序中这样做！是的，我已经在我的 Bundle 中替换了 Ressource，但是是手动替换的，我希望它能够自动实现。在为任何设备或 AppStore 编译它之前，我想保持我的 Projectfolder 是最新的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T07:16:23.370

`AppBundle`您是否`Read-only`无法以编程方式向其中写入任何内容，但是如果您更新`Project`through中的资源`Xcode`，您会自动在`AppBundle`..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:14:35.677

不，您也许可以让模拟器向您的 App Bundle 写入数据，但这并不意味着您的项目文件（为应用商店构建时编译的文件）将被更新。

为什么不直接将新文件保存到文档目录中，然后始终加载此文件。应用启动后，启动后台线程并尝试更新 plist 文件。你成功地通过在文档目录中写入 plist 文件来检索新闻。这样，用户将拥有上次设备能够获取文件时检索到的文件。

您可以在应用程序包中添加一个文件，在应用程序首次启动时将其复制到文档目录中，以确保用户在应用程序中有数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T09:42:05.933

好的，根据您的评论，这就是您所需要的（我认为 - 仍然不完全清楚这个问题，但让我知道这是否适合您）。

*   在您的项目文件夹 (SRCROOT) 中创建一个空文件（例如 news.plist）。将此添加到您的存储库中。
*   将此文件添加到项目的资源中，并在`Copy Bundle Resources`步骤中添加`Build Phases`
*   当您从 Internet 下载内容时，将其保存到项目的临时文件夹，然后将其复制到 SRCROOT/news.plist 覆盖现有文件（可选地添加对文件校验和的检查以避免不必要的更改）。仅在模拟器上运行时才需要此步骤。
*   每当开发人员签入时，应将更新后的 news.plist 签入到 repo。

要使 SRCROOT 在代码中可用，请添加`SRCROOT=\"${SRCROOT}\"`到 GCC_PREPROCESSOR_DEFINITIONS。

除了最后一步之外，其他开发人员不需要做任何事情 - 每次更改时都检查更新的文件。

这有帮助吗？

# php - 在网格视图中显示子类别

> ID：16141333
> 
> 赞同：0
> 
> 时间：2013-04-22T07:09:53.450
> 
> 标签：php, magento

我对 php 很陌生，我对 OOP 了解不多，但我对 php 知之甚少，我有一个商店，我希望在单击链接时在其中显示子类别。是否有扩展或任何其他方式来做到这一点，我应该在哪里做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:54:52.310

You already have this in Magento. For enabling this, go to: Catalog > Manage Categories > Click on subcategories individually > Display Settings tab > set Is Anchor to Yes

`Is Anchor` allows to make your categories/sub-categories filterable in Layered navigation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:40:25.227

是数据库中的子类别。考虑到您的回答是肯定的，使链接指向类似

```
http://yoururl?cat=3 where 3 is the id of category. 
```

接下来运行数据库查询以获取子类别。您可以使用

```
$pid = (int)$_GET['cat'];
mysql_query("SELECT * FROM subcat WHERE pid = '$pid'");
if(mysql_num_rows($query) != 0)
{
 while($f =mysql_fetch_array($query))
 echo $f['subcatname'];
} 
```

Subcat = 子类别表

pid = subcat 中父 ID 的列

subcatname = subcat 中子类别的名称

# java - 将 Arrays.copyOfRange() 用于 API 9 以下

> ID：16141334
> 
> 赞同：4
> 
> 时间：2013-04-22T07:10:10.290
> 
> 标签：java, android

我正在开发一个`copyOfRange(byte[] original, int start, int end)`使用`Arrays.copyOfRange()`.

它仅在 API 9 及更高版本中引入。但是，我在某个地方读到了它在内部使用`System.arraycopy()`的 API 1 本身中引入的内容。

我的问题是，在 Android 中，使用是否有区别，`Arrays.copyOfRange()`或者`System.arraycopy()`如果我能够使用 System.arraycopy() 是否适用于较低版本的 API？

另外，如果我能得到一些关于使用`System.arraycopy()`.

问候。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T07:16:53.040

Arrays.copyOfRange() 只是 System.arrayCopy() 的便捷方法

```
public class ArraysCompat {
    public byte[] copyOfRange(byte[] from, int start, int end){
        int length = end - start;
        byte[] result = new byte[length];
        System.arraycopy(from, start, result, 0, length);
        return result;
    }
} 
```

# android - 折线图安卓

> ID：16141337
> 
> 赞同：0
> 
> 时间：2013-04-22T07:10:35.293
> 
> 标签：android

我正在研究android项目，在我的项目中我需要折线图，该图应该像下面显示的图像。

![折线图](https://i.stack.imgur.com/N0qoe.png)

请帮助我:)，在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:12:58.833

使用 chartengine

[http://www.achartengine.org/](http://www.achartengine.org/)

折线图教程

[http://www.youtube.com/watch?v=-ThKImy6PPM](http://www.youtube.com/watch?v=-ThKImy6PPM)

[http://oodlestechnologies.com/blogs/Drawing-graphs-in-Android-using-aChartEngine-charting-library-(Line-Charts)](http://oodlestechnologies.com/blogs/Drawing-graphs-in-Android-using-aChartEngine-charting-library-(Line-Charts))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:15:43.670

使用任何 3rd 方库.....

[http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8260-android-charts-framework.html](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8260-android-charts-framework.html)

[http://code.google.com/p/achartengine/](http://code.google.com/p/achartengine/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:23:41.797

使用 AndroidPlot for Graph 它非常易于使用：

[http://androidplot.com/](http://androidplot.com/)

# python - 在 python 中在树莓派上使用 OpenKinect

> ID：16141338
> 
> 赞同：0
> 
> 时间：2013-04-22T07:10:38.473
> 
> 标签：python, raspberry-pi, openkinect

我对树莓派和 python 很陌生。
我正在尝试在树莓派上使用 python 编写一个程序来使用 Kinect。我的目标是在树莓派上安装 OpenKinect。
到目前为止，我已经完成了：

```
apt-cache search OpenKinect
sudo apt-get install python-freenect
sudo apt-get update 
```

接下来，我尝试从此链接[https://github.com/OpenKinect/libfreenect/blob/master/wrappers/python/demo_cv_async.py在 python 中编写代码](https://github.com/OpenKinect/libfreenect/blob/master/wrappers/python/demo_cv_async.py)

当我尝试运行程序时，它说

```
error in line 5, 
import cv.
ImportError:no module named cv. 
```

我不确定我是否已经安装了所有必要的文件。我也不确定我做错了什么。
我也一直在尝试寻找有关安装和使用 OpenKinect 的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:17:59.753

恭喜你开始使用 python！这听起来像是一个复杂的项目。您可能应该先尝试在 python.org 上学习本教程。我特别喜欢谷歌视频教程（如果你是课堂型的人）：[http ://www.youtube.com/watch?v=tKTZoB2Vjuk](http://www.youtube.com/watch?v=tKTZoB2Vjuk)

之后，您可以深入研究更详细的内容:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:28:10.263

看起来你还没有用于 python 的 opencv 包。尝试安装它：

`sudo apt-get install python-opencv`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T17:24:53.563

OpenGL 或 GTK 警告：无法打开显示。或者您所说的另一个设备发现数：1 GL 线程写入 reg 0x0105 <= 0x00 freeglut(freenect-glview): OpenGL GLX extension not supported by display ':oo' 是因为 freenect 不支持 OpenGL。它可能使用 EGL。

> bmwesting (Brandt) 写道：“freenect 库为 Kinect 提供了一个名为 glview 的演示。glview 程序将 > 不适用于 Pi，因为该程序是使用 OpenGL 编写的。Raspberry Pi 仅通过 EGL 支持 GLES。
> 
> 看起来您将能够使用 libfreenect 来获取深度流和 rgb 流，> 但无法运行演示程序，因为它使用了不正确的图形 API。”

如果您通读该线程，它应该会显示替代方案（即 ASUS XTion 而不是 Kinect）。如果使用控制台输出模式，它们在深度数据的高分辨率（~ 1024x800）下达到 30fps。我现在也打算去 Xtion - 我希望尽可能多地从 USB 总线停用（因为这似乎是瓶颈，我认为 Kinect 也是如此）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-01T02:26:36.637

当您安装 OpenCV 时，`apt-get install python-opencv`您正在安装版本 2。但是，您仍然可以通过这样做来使用版本 1 中的方法：

```
import cv2.cv as cv 
```

# xml - 如何获取 libxml2 API 列表？

> ID：16141339
> 
> 赞同：0
> 
> 时间：2013-04-22T07:10:41.063
> 
> 标签：xml, libxml2

我实际上对 xml 和 libxml2 很陌生。

我在 libxml2 网站上找不到 API 列表，我只能找到很多对我来说毫无意义的链接。

任何人都可以向我提供 API 列表或某些文档的任何链接吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:39:59.067

谷歌搜索“libxml2 api”返回

[http://xmlsoft.org/html/](http://xmlsoft.org/html/)

这是完整的 api 参考。“解析器”和“树”是使用基于树的 API 最重要的部分，但左侧的“代码示例”中提供了大量示例。

[http://xmlsoft.org/examples/index.html](http://xmlsoft.org/examples/index.html)

# linq - 我们可以在 linq 中编写更新语句吗？

> ID：16141341
> 
> 赞同：2
> 
> 时间：2013-04-22T07:10:57.110
> 
> 标签：linq, linq-to-sql

我们可以在 linq 中编写更新语句吗？

例子：

```
var query = Update customer set isEdit = 1 where id = 1 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:12:13.523

不，你不能。LINQ 中的*Q*代表*Query*。

您可以执行以下操作：

```
foreach(var c in customer.Where(x => x.Id == 1))
    c.isEdit = 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T07:32:42.067

[您可以使用List类的](http://msdn.microsoft.com/en-us/library/vstudio/6sh2ey19.aspx)[ForEach](http://msdn.microsoft.com/library/vstudio/bwabdf9z.aspx)方法通过执行“看起来像 Linq”查询来缩短更新：

```
var toUpdate = customer.Where(c => c.id == 1).ToList();
toUpdate.ForEach(c => c.isEdit = 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:28:36.700

是的，您可以，[请在此处查看我的答案](https://stackoverflow.com/a/3351534/52817)。

```
Foo foo=new Foo { FooId=fooId }; // create obj and set keys
context.Foos.Attach(foo);
foo.Name="test";
context.SubmitChanges(); 
```

在您的 Dbml 中，为所有属性设置 UpdateCheck="Never"。

**这将生成一个更新语句**，而无需先进行选择。

# ruby - 如何在 XPath 中获取序列的最后一个元素？

> ID：16141347
> 
> 赞同：13
> 
> 时间：2013-04-22T07:11:30.810
> 
> 标签：ruby, xpath, nokogiri

在 Ruby 中，我们可以访问带有负数的数组，例如`array[-1]`获取数组中的最后一个对象。如何使用 XPath 执行此操作？

我不能这样做：

```
result = node.xpath('.//ROOT/TAG[-1]/KEY_NAME') 
```

我在 Stack Overflow 上找到了一个解决方案，但这是一个仅更改上限以获取元素的查询。这可能会返回最后一个项目或最后一个项目和上一个。

如果我只想获取`array[-2]`Ruby 中的前一个元素怎么办？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-22T08:01:41.973

`last()`您可以使用谓词访问 XPath 中的最后一个元素。

```
node.xpath('.//ROOT/TAG[last()]/KEY_NAME') 
```

并`[last()-1]`用于倒数第二个位置。

# ruby-on-rails - 在哪里放置 sql 查询在 rails 中？

> ID：16141356
> 
> 赞同：0
> 
> 时间：2013-04-22T07:12:11.803
> 
> 标签：ruby-on-rails, activerecord

我已经在遗留数据库之上启动了一个 Rails 项目。尚未遵循使用 ORM 所需的标准做法，例如为每个表分配 ID 字段。因此，我不会创建与所有表匹配的所有模型。我需要运行使用多种条件连接多个表的查询。我将主要使用 Model.find_by_sql 或 Model.connection.select_all 方法。我应该把这些查询放在哪里？我应该将这些存储在我创建的查询中涉及的模型之一中吗？这种情况的标准做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:51:57.020

尽可能地，您仍然希望通过将查询和诸如此类的东西放入模型层来将应用程序的其余部分与数据库的详细信息隔离开来。所以是的，在与您尝试做的事情相关的正确模型对象中“隐藏”似乎是正确的事情。

您是否允许更改数据库的架构？如果是这样，您可能希望使用迁移来慢慢使您的数据库看起来更像一个标准的 ActiveRecord 后备存储。

您可能还想研究 ActiveRecord 的替代品，例如[Sequel](http://sequel.heroku.com)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T07:18:24.443

将 sql 查询放在 db 下的 sql 文件夹下是个好主意。您需要创建 sql 文件夹。

# java - 从 JAVA 项目中读取 xml 文件

> ID：16141360
> 
> 赞同：1
> 
> 时间：2013-04-22T07:12:17.957
> 
> 标签：java

我需要知道应该将 xml 文件放在 Java 项目中的什么位置。我需要访问放置的 xml 文件并对其进行解析。我曾尝试使用资源文件夹，但它不适合我。有人可以建议我如何访问放置在 JAVA 项目中的 xml 文件的好主意。我正在使用 Eclipse IDE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:22:03.580

像下面这样使用——

```
this.getClass().getClassLoader().getResourceAsStream("path of file"); 
```

注意：项目中的这个 xml 文件结构

```
+pro
   +src
   +resource
     -test.xml 
```

例子：

```
 public class ReadFile {
        public void testReadFile() {
            InputStream in = this.getClass().getClassLoader()
            .getResourceAsStream("/Resources/tset.xml");
//praparing DOM
        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory
                .newInstance();
        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
// by sending input stream as input to DOM
        Document doc = docBuilder.parse(in);
        }
        public static void main(String[] args) {
            ReadFile file = new ReadFile();
            file.testReadFile();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:19:08.140

可以使用maven的结构：Project/src/main/resources

我想它是一个数据 xml 文件。如果它是一个配置文件，更好的方法是通过类路径访问它。这是放置资源的常见位置，但您可以选择自己的目录。如果您在打开文件时遇到问题，那是您的路径不正确。首先尝试用绝对路径打开它。像 d:/workspace/Project/src/main/resources/file.xml 这样的东西。它会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:19:49.070

resources 文件夹是放置 xml 文件的正确文件夹。如果在该文件夹中找不到该文件，则它可能不在类路径中。因此，将此文件夹添加到项目的类路径中。

转到项目 -> 属性 -> Java 构建路径 -> 源 -> 添加文件夹

然后将资源文件夹添加到您的类路径中。就是这样......你很好去......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:22:33.590

您需要确保 Eclipse 将 /resources 文件夹包含到应用程序类路径中。

`Run Configurations`从, goto选项卡打开您的启动器，`Classpath`如果它不存在 - 添加它。

可以使用`this.getClass().getClassLoader().getResource*`方法读取文件。

# jquery - jqgrid中如何传递参数

> ID：16141361
> 
> 赞同：0
> 
> 时间：2013-04-22T07:12:21.430
> 
> 标签：jquery, url, jqgrid

```
jQuery(function(){ 
var year        =   jQuery("#historyQuery").val();
var projectCode =   jQuery("#projectCode").val();

  jQuery("#list").jqGrid({
    hidegrid:false,
    height:300,
    pgbuttons:false,
    pginput:false,
    url:'index.php?option=com_projectdetails&view=details&task=ajaxdetails.getProjectDetails&format=xml',
    // editurl:'index.php?option=com_cwmaintain&view=incharge&task=ajaxincharge.editcwmaintain&format=xml',
    datatype: 'xml',
    mtype: 'post',
    colNames:['日期','凭证号','摘要','收入/拨出','支出/拨出','借还款'],
    colModel :[ 
      {name:'N3', index:'N3', width:110,sortable:false,editable:false}, 
      {name:'N4', index:'N4', width:110,sortable:false,editable:true,editrules:{required:true}},
      {name:'N5', index:'N5', width:110,sortable:false,editable:true,editrules:{required:true}},
      {name:'N7', index:'N7', width:110,sortable:false,editable:true,editrules:{required:true}},
      {name:'N6', index:'N6', width:110,sortable:false,editable:true,editrules:{required:true}},
      {name:'N6', index:'N6', width:110,sortable:false,editable:true,editrules:{required:true}},
    ],
    rowNum:20,
    reccount:10,
    viewrecords: true,
    gridview: true,
    pager: '#pager',
    caption: '部门负责人'                // jqgrid标题
  }); 
jQuery("#list").navGrid('#pager',{edit:false,add:false,del:false,search:true,refresh:true}); 
}); 
```

我想将名为**year**和**projectCode**的两个参数传递给 的函数`getProjectDetails($year,$projectCode)`，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:35:38.940

静态地，您可以使用`postData`向请求添加参数，例如

```
jQuery("#list").jqGrid({   
...
postData:{year:year,projectCode:projectCode }, 
```

....动态地，您可以使用`setGridParam`方法并再次使用 postData 作为参数。请参考[文档页面](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods#grid_related_methods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:40:56.660

如果我理解正确，您应该`postData`向 jqGrid 添加附加选项，在其中定义`postData`as 函数的属性：

```
postData: {
    year: function () { return $("#historyQuery").val(); },
    projectCode: function () { return $("#projectCode").val(); }
} 
```

在这种情况下，来自并且将在对服务器的每个新请求中获取*当前*值。理解这一点很重要，并且不会因为您使用选项*而附加*到 URL 。参数将以与参数、、、和相同的方式在请求正文中发送。`"#historyQuery"``$("#projectCode")``year``projectCode`*`mtype: 'post'``page``rows``sidx``sord``_search`*

 *有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/2928819/315935)。*

# amazon-s3 - Amazon S3：从 IP 授予匿名访问（通过存储桶策略）

> ID：16141362
> 
> 赞同：3
> 
> 时间：2013-04-22T07:12:25.877
> 
> 标签：amazon-s3, amazon-ec2

我有一个 Amazon S3 存储桶，并希望它可用于特定机器上的脚本，而无需部署登录凭证。所以我的计划是只允许从那台机器的 IP 匿名访问。我对亚马逊云很陌生，存储桶策略看起来像是要走的路。我将以下策略添加到我的存储桶中：

```
{
    "Version": "2008-10-17",
    "Id": "S3PolicyId1",
    "Statement": [
        {
            "Sid": "IPAllow",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:*",
            "Resource": "arn:aws:s3:::name_of_my_bucket/*",
            "Condition": {
                "IpAddress": {
                    "aws:SourceIp": [
                        "my_ip_1/24",
                        "my_ip_2/24"
                    ]
                }
            }
        }
    ]
} 
```

但是匿名访问仍然不起作用。为了进行测试，我在 S3 管理控制台中授予了对“所有人”的访问权限。这很好用，但显然不是我想要做的。;-) 任何提示我做错了什么以及如何让它工作？

我的用例是使用 EC2 和 S3 进行一些数据处理，因此通过 IP 进行访问控制比摆弄用户帐户要简单得多。如果有更简单的解决方案，我愿意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:31:44.070

> 但是匿名访问仍然不起作用。

什么操作*仍然无法正常工作*，您是否偶然尝试列出存储桶中的对象？

很多时候，一个用例隐含地涉及[Amazon S3](http://aws.amazon.com/s3/) API 调用，除了`Resource`策略已经明确定位的目标之外，还处理不同的资源类型。具体来说，您需要了解[服务上的操作](http://docs.amazonwebservices.com/AmazonS3/latest/API/SOAPServiceOps.html)（例如[ListAllMyBuckets](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/API/SOAPListAllMyBuckets.html)）、[桶上的操作](http://docs.amazonwebservices.com/AmazonS3/latest/API/SOAPBucketsOps.html)（例如[ListBucket](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/API/SOAPListBucket.html)）和[对象上的操作](http://docs.amazonwebservices.com/AmazonS3/latest/API/SOAPObjectsOps.html)（例如[GetObject](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/API/SOAPGetObject.html)）之间的区别。

特别是，`Resource`您的策略规范目前仅针对存储桶`arn:aws:s3:::name_of_my_bucket/*`中的对象（允许通过*ListBucket 列出*存储桶中的对象，您需要相应地修改策略如下：

```
{
    "Version": "2008-10-17",
    "Id": "S3PolicyId1",
    "Statement": [
        {
            // ... your existing statement for objects here ...
        },
        {
            "Sid": "IPAllow",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:ListBucket",
            "Resource": "arn:aws:s3:::name_of_my_bucket",
            "Condition": {
                "IpAddress": {
                    "aws:SourceIp": [
                        "my_ip_1/24",
                        "my_ip_2/24"
                    ]
                }
            }
        }
    ]
} 
```

# php - 输入文本字段的 Selenium 测试用例不起作用

> ID：16141363
> 
> 赞同：2
> 
> 时间：2013-04-22T07:12:28.250
> 
> 标签：php, unit-testing, testing, selenium

我是 Selenium IDE 的新手，在一种特殊情况下我需要帮助。我正在尝试为一个模块创建一个测试用例，当我输入一个文本时，它会在数据库中搜索，然后根据输入文本给出结果。就我而言，当我运行记录的测试用例时，它只是输入了输入文本，但没有在数据库中搜索，所以我的案例在那里停止。我也尝试过验证码方法，因此我将在弹出框中手动输入文本，但在这种情况下也不起作用。请帮我解决这个问题。先感谢您

# ios - 设置导航栏后退按钮右侧的按钮 iPad monotouch

> ID：16141368
> 
> 赞同：0
> 
> 时间：2013-04-22T07:12:57.483
> 
> 标签：ios, ipad, xamarin.ios, uibarbuttonitem, uinavigationitem

我想在导航栏中的后退按钮右侧有一个 uibarbuttonitem（如果苹果指南没有错）。我使用这段代码：

```
UIBarButtonItem listButton = new UIBarButtonItem ("List View",UIBarButtonItemStyle.Bordered ,null);

        //assigning left bar buttons
        this.NavigationItem .LeftBarButtonItems =
        new UIBarButtonItem[] { this.NavigationItem .BackBarButtonItem   ,listButton }  ; 
```

但`this.NavigationItem .BackBarButtonItem`始终为空。什么解决方案适合这个目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:27:45.650

这是相同的正确实现：

```
UIButton *leftButtonIcon = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f, width, height)];
[leftButtonIcon setImage:[UIImage imageNamed:@"yourButtonImageName.png"] forState:UIControlStateNormal];
[leftButtonIcon addTarget:self.viewDeckController action:@selector(YourSelectorMethod) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *leftbtn = [[UIBarButtonItem alloc] initWithCustomView:leftButtonIcon];
[self.navigationItem setLeftBarButtonItem:leftbtn]; 
```

# android - getApplicationContext 和 classname.this 之间的区别

> ID：16141369
> 
> 赞同：6
> 
> 时间：2013-04-22T07:12:58.130
> 
> 标签：android, android-context

当我使用列表视图并且我有一个自定义的基本适配器类时，当基本适配器由`getApplicationContext`and实例化时，我在列表视图中得到不同的文本颜色`classname.this`。通过`getApplicationContext`我得到白色的文本颜色，但是`classname.this`是黑色的。谁能为我解释一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:26:49.380

基本上它们都是 Context 的实例，但区别在于应用程序实例与应用程序的生命周期相关联，而 Activity 实例与活动的生命周期相关联。因此，他们可以访问有关应用程序环境的不同信息......

见[getApplicationContext](http://developer.android.com/reference/android/content/ContextWrapper.html#getApplicationContext%28%29)

**编辑**

在找到您的答案时，它将帮助您[根据所选上下文更改 Android Holo Light 样式](https://stackoverflow.com/questions/14824342/android-holo-light-styling-changes-depending-on-chosen-context)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T07:15:51.153

ActivityName.this 指的是活动上下文。getApplicationContext() 指的是应用程序上下文。

大多数时候最好使用活动上下文。

检查commonsware提供的答案。有关于该主题的详细说明。

[何时调用活动上下文或应用程序上下文？](https://stackoverflow.com/questions/7298731/when-to-call-activity-context-or-application-context)

引用上述链接

以下是无论您走到哪里**都不使用 getApplicationContext()的原因：**

1.  **它不是一个完整的 Context，支持 Activity 所做的一切。您将尝试使用此 Context 执行的各种操作都会失败，主要与 GUI 相关**。

2.  如果来自 getApplicationContext() 的 Context 保留了由您对其调用创建的、您未清理的内容，则它可能会造成内存泄漏。对于 Activity，如果它持有某些东西，一旦 Activity 被垃圾收集，其他所有东西也会被清除。Application 对象在您的进程的整个生命周期内保持不变。

# git - 检测更改为 GIT 裸仓库

> ID：16141376
> 
> 赞同：0
> 
> 时间：2013-04-22T07:13:20.320
> 
> 标签：git

我在网络驱动器上有一个裸仓库，两个客户将 php 项目克隆到他们自己的 PC 上。所有这些都是由 TortoiseGIT 操作的。

假设客户端 A 和客户端 B 具有相同的修订副本。

1.  A 对 index.php 进行一些更改。
2.  提交他们自己的仓库，然后推送到裸仓库。

但是，在客户端 B 项目文件夹中，更改后的文件仍会更新（带有勾号的绿色图标）。

无论如何，客户端 B 是否会实时通知或更改 TortoiseGIT 的覆盖图标？

为什么我要这样做，因为我们的客户需要在开始工作之前执行 git fetch 命令并查看日志。

它们可以在开始工作之前进行 git merge，而不是稍后解决冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:17:09.387

GIT 是一个分布式版本控制系统。这意味着每个本地存储库都可以并且确实可以独立工作。只有在进行获取、拉取或推送时，它才会联系另一个存储库。

本地存储库不关心任何已配置的远程存储库的实际状态，除非通过 fetch 或 pull 明确告知。GIT 中没有办法实现你想做的事情。
您可以通过钩子（在裸存储库中）和脚本（在每个开发人员机器中）的组合来实现这一点，但我建议不要这样做。

* * *

顺便说一句：对于大多数集中式版本控制系统，例如 SVN，它的工作原理是一样的：您必须在工作副本知道服务器有更改的版本之前进行更新。

# connection-pooling - 使用 apache.DefaultHttpClient 的 Http 连接进入 TIME_WAIT 未被重用

> ID：16141387
> 
> 赞同：2
> 
> 时间：2013-04-22T07:14:08.287
> 
> 标签：connection-pooling, apache-httpclient-4.x, keep-alive, httpconnection, time-wait

我们有一个 HttpClient(apache.DefaultHttpClient) 对象的池(GenericObjectPool)。HttpPost 对象通过这些客户端执行，可能同时发送 Post 请求。使用的协议是：HTTP/1.1 with keepalive。

在通过 netstat 进行负载测试期间观察到，新套接字连接被不加选择地创建，旧连接进入 TIME_WAIT。

* * *

日志摘录：-

```
[Worker-2] org.apache.http.impl.conn.Wire 63 - >> "POST /INBOX/4504a09e-13c0-3853-a285-9e2b9a22f65e/1e1e5a20-a8c1-11e2-99b8-7c19e9129271 HTTP/1.1[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - >> "Content-Type: application/json; charset=UTF-8[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - >> "Content-Length: 117[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - >> "Host: rwcdtgxb0402:15010[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - >> "Connection: Keep-Alive[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - >> "User-Agent: Apache-HttpClient/4.2.1 (java 1.5)[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - >> "[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - << "HTTP/1.1 200 OK[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - << "Content-Length: 0[\r][\n]"

[Worker-2] org.apache.http.impl.conn.Wire 63 - << "[\r][\n]"

[Worker-2] org.apache.http.impl.conn.DefaultClientConnection 254 - Receiving response: HTTP/1.1 200 OK

[Worker-2] org.apache.http.impl.conn.DefaultClientConnection 257 - << HTTP/1.1 200 OK

[Worker-2] org.apache.http.impl.conn.DefaultClientConnection 260 - << Content-Length: 0

[Worker-2] org.apache.http.impl.client.DefaultRequestDirector 540 - Connection can be kept alive indefinitely

**[Worker-2] org.apache.http.impl.conn.DefaultClientConnection 154 - Connection 0.0.0.0:51211<->192.168.88.172:15010 shut down**

[Worker-2] org.apache.http.impl.conn.BasicClientConnectionManager 189 - Releasing connection org.apache.http.impl.conn.ManagedClientConnectionImpl@12f65ce5 
```

* * *

DefaultClientConnection.shutdown (Connection 0.0.0.0:51210<->192.168.88.172:15010 关闭) 从客户端关闭连接吗？它是如何被调用的？在从服务器 httpPost.releaseConnection() 收到响应 (200OK) 后的代码中，仅在客户端代码中执行。

我应该怎么做才能将连接保持在 ESTABLISHED 状态并重用它们，而不是为每个请求创建连接并且它们进入 TIME_WAIT。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-08-13T13:28:49.390

注意调用`EntityUtils.console(entity)`做得更多，应该使用：

```
 /**
     * Ensures that the entity content is fully consumed and 
     * the content stream, if exists, is closed.
     *
     * @param entity the entity to consume.
     * @throws IOException if an error occurs reading the input stream
     *
     * @since 4.1
     */
    public static void consume(final HttpEntity entity) throws IOException {
        if (entity == null) {
            return;
        }
        if (entity.isStreaming()) {
            final InputStream inStream = entity.getContent();
            if (inStream != null) {
                inStream.close();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T07:09:10.487

几天前解决了问题。

错误：在 HttpClient 对象上调用 releaseConnection()。但是，避免它也没有解决问题。

更正：为保持连接活动（处于 ESTABLISHED 状态）而采取的操作是通过以下示例代码：

```
HttpClient client = new org.apache.http.impl.client.DefaultHttpClient();
...
org.apache.http.HttpResponse response = client.executed(HttpPost) ;
org.apache.http.HttpEntity en = response.getEntity();
if (en != null) {
  en.getContent().close();
} 
```

一旦收到 HttpResponse，为了重用和维护创建的连接，只需关闭 http-response 上的 InputStream (en.getContent())。不要在 HttpPost 或 Client 对象上调用任何其他释放方法。

使用 JMeter 负载测试此处理并发现它有效。还没有观察到任何副作用！

# python - Flask 和 SQLAlchemy 的“客户端连接上出现意外的 EOF”

> ID：16141388
> 
> 赞同：3
> 
> 时间：2013-04-22T07:14:20.837
> 
> 标签：python, postgresql, sqlalchemy, flask

我正在使用带有 Flask 的 sqlalchemy 的 sql 抽象层，遵循此处指示的模式[http://flask.pocoo.org/docs/patterns/sqlalchemy/](http://flask.pocoo.org/docs/patterns/sqlalchemy/)

```
engine = create_engine('postgresql://' + DB_USER + ':' + DB_PASS + '@' + DB_HOST + ':' + DB_PORT + '/' + DB_NAME)
session = scoped_session(sessionmaker(autocommit=True,
                                  autoflush=True,
                                  bind=engine)) 
```

`

```
metadata = MetaData()

Base = declarative_base(metadata=metadata)
Base.metadata.reflect(engine) 
```

在发送响应之前使用 teardown_request 装饰器删除 scoped_session

```
@app.teardown_request
def shutdown_db_connexion(exception=None):
    db.session.remove() 
```

除了我在我的 postgres 日志中看到很多以下行之外，一切似乎都工作正常，这似乎表明 db 客户端连接存在一些问题。

```
"unexpected EOF on client connection"
"could not receive data from client: Connection reset by peer" 
```

关于如何调试和修复正在发生的任何事情的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T03:13:54.287

你应该打电话

`engine.dispose()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:41:46.717

查看其余的服务器日志，这似乎是操作系统 OOM 问题。将此标记为已解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-23T21:20:44.777

就我而言，在程序结束时调用这些代码有助于：

```
session.close_all()
engine.dispose() 
```

所以完整的 sqlalchemy 工作流程如下所示：

```
DBSession = scoped_session(sessionmaker(...))
...
engine = create_engine(...)
DBSession.configure(bind=engine)
...
DBSession().query(...)
...
DBSession().query(...)
...
DBSession.close_all()
engine.dispose() 
```

# ios - iPhone 应用程序异常退出，退出状态为 13

> ID：16141391
> 
> 赞同：0
> 
> 时间：2013-04-22T07:14:29.843
> 
> 标签：ios, xcode, armv7, cydia

我从 Xcode 编译了一个应用程序，并将该应用程序放入`/Applications`我 iPhone 的文件夹中，但是当我单击应用程序图标时，它意外退出。

syslog 中的信息是

> 异常退出，退出状态为 13

我该如何解决？

我的意图是将我的应用程序作为`root`. 我使用[了这个链接](http://exilesofthardware.blogspot.com/2013/01/)，但 syslog 仍然显示**“exited exceptionly with exit status 13”**。我认为这是代码签名的问题，但是当我`chmod 755 myapp`运行时，它只能作为普通用户运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T21:15:37.860

尝试使用 ldid 你可以从这里得到它

[下载 ldid](https://code.google.com/p/networkpx/downloads/detail?name=ldid)

像这样使用命令，MyApp 是您自己的应用程序的名称

```
ldid -S MyApp 
```

# html - Excel VBA：从在线 HTML 表格中获取内容

> ID：16141394
> 
> 赞同：3
> 
> 时间：2013-04-22T07:14:51.427
> 
> 标签：html, excel, vba, dom

任何人都可以向我展示 VBA 代码的一部分，它将从这个示例在线 HTML 表中获取文本“你好”吗？第一个节点将通过他的 ID (id="something") 找到。

```
...
<table id="something">
  <tr>
    <td><TABLE><TR><TD></TD></TR><TR><TD></TD></TR></TABLE></td><td></td>
  </tr>
  <tr>
    <td></td><td></td><td>hello</td>
  </tr>
... 
```

我想它会是这样的`child->sibling->child->sibling->sibling->child`，但我不知道确切的方式。

**编辑** 更新的代码标签是大写。所以如果我使用`getElemenetsById("something").getElemenetsByTagName('tr')`它只收集两个 tr 标签，或者四个（带有更深的孩子的标签）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:14:55.320

如果您确实搜索过答案，您可能希望下次扩大范围。有很多关于 DOM 和 VBA 的问题和答案。

[在 HTMLElement 上使用 getElementById 而不是 HTMLDocument](https://stackoverflow.com/q/15191847/212869)

虽然问题（和答案）并不**完全**是您想要的，但它会向您展示如何创建可以使用的东西。

您需要混合使用`getElementById()`和`getElemenetsByTagName()`来检索您想要的“你好”

例如：`Document.getElementById("something").getElementsByTagName("tr")(1).getElementsByTagName("td")(2).innerText`

*   获取元素“某物”
*   在“something”中获取所有“tr”标签（特别是索引 1 处的标签）
*   在返回的 tr 标签内获取所有“td”标签（特别是索引 2 处的标签）
*   获取上一个结果的innerText

这些对象使用基于 0 的数组，因此第一项是 item(0)。

**更新**

`document.getElementById()`将返回**一个**（单数） IHTMLElement （将包括其所有子元素），如果不存在则返回 nothing/null。

`document.getElementsByTagName()`将返回 IHTMLElement 的**集合**（同样，每个元素都将包含其所有子元素）。（如果不存在，则为空集合）

`document.getElementsByTagName("tr")`这将返回“document”元素内的所有 tr 元素。

`document.getElementsByTagName("tr")(0)`将返回集合中的**第一个**（单数）IHTMLElement。（注意最后的索引？）

VBA 中没有（我能找到的）InternetExplorer 对象的“兄弟”功能，因此您必须使用子索引手动完成。

使用 DOM 函数**是**一种简洁的方法。它比仅查看链“Element.Children(0).children(1).children(2)”要清晰得多，因为如果不手动查找索引，您将不知道索引的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T15:09:03.203

我也到处寻找这个问题的答案。我终于通过与实际上是通过录制宏的同事交谈找到了解决方案。

我知道，你们都认为你在这之上，但它实际上是最好的方法。在此处查看完整的帖子：[http](http://automatic-office.com/?p=344) ://automatic-office.com/?p=344 简而言之，您想要记录宏并转到数据 --> 从 web 并导航到您的网站并选择您想要的表格。

我过去使用过上述解决方案“通过 id 获取元素”类型的东西，它对于一些元素来说非常有用，但是如果你想要一个完整的表格，并且你不是超级经验，只需记录一个宏。不要告诉你的朋友，然后重新格式化它，让它看起来像你自己的作品，这样没人知道你使用了宏工具；）

# facebook - 无法将照片发布到用户应用相册。得到 OAuthException 代码：368

> ID：16141406
> 
> 赞同：0
> 
> 时间：2013-04-22T07:15:39.437
> 
> 标签：facebook, facebook-opengraph, photo

我们的应用程序使用 publish_stream 权限将游戏截图发布到用户应用程序相册。但是当用户单击按钮通过打开的图形 api 发布照片时，他得到 OAuthException 代码：368 并且 Facebook 注销了他。在此之后用户登录后，他收到消息：

> 垃圾邮件警告 有时，垃圾邮件发送者会创建看起来像 Facebook 或其他网站的虚假页面。如果您做某事作为回报，这些页面通常会为您提供很多好处（例如：复制并粘贴此特殊访问令牌时获得免费机票）。您似乎将有关您的 Facebook 帐户的敏感信息粘贴到这些页面上。结果，您的帐户开始传播垃圾邮件。
> 
> 不用担心，我们已经保护了您的帐户。

当我们第一次将此功能添加到应用程序时，它运行良好，几天后我们开始收到此错误。几个月后照片发布再次开始工作，但几天后再次被阻止。在文档中没有关于这个问题的任何内容，我们不知道该怎么做。请帮助我们解决这个问题。

# delphi - 我在delphi中使用铬，但我发现我无法创建新的铬标签

> ID：16141408
> 
> 赞同：0
> 
> 时间：2013-04-22T07:15:46.983
> 
> 标签：delphi, browser, tabs, chromium

我正在使用 delphichromiumembedded 插件代替 TWebbrowser 在我的项目中，当我单击使用 TChrometabs 或 tpagecontrol.thanks 的 pagesheetwindow 时，我无法创建新选项卡。像这样的代码：

```
procedure TMainForm.ChromeTabs1ButtonAddClick(Sender: TObject;
  var Handled: Boolean);
var
  chrm: TChromium;
  CurrentTab1:TChromeTabs;
begin
  CurrentTab1:=TChromeTabs.Create(Self);
  chrm:=TChromium.Create(CurrentTab1);
  chrm.Align := alClient;
  chrm.Parent := TWinControl(CurrentTab1);
  chrm.DefaultUrl := 'about:blank';
  chrm.Load('http://www.google.com/');
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:07:15.143

当用户单击“添加”按钮时，您不应该创建一个全新的`TChromeTabs`组件。您已经拥有其中之一。您甚至*不需要*创建新选项卡，因为该组件默认为您执行此操作。如果要手动创建新选项卡，则设置`Handled := True`为禁用默认行为，然后调用`Sender.Tabs.Add`. 它返回对新选项卡对象的引用。这在组件附带的示例应用程序中得到了演示；看`ChromeTabs1ButtonAddClick`方法。一旦您拥有该选项卡对象引用，您就可以随心所欲地操作它，例如通过在其上放置一个浏览器控件。

# java - 打印特定范围内的所有 Unicode 字符

> ID：16141414
> 
> 赞同：2
> 
> 时间：2013-04-22T07:15:55.387
> 
> 标签：java, eclipse, unicode

我找不到合适的 API。我试过这个；

```
public static void main(String[] args) {
    for (int i = 2309; i < 3000; i++) {
      String hex = Integer.toHexString(i);
      System.out.println(hex + " = " + (char) i);
    }
  } 
```

此代码仅在 Eclipse IDE 中这样打印。

```
905 = ?
906 = ?
907 = ?
... 
```

如何使用这些十进制和十六进制值来获取 Unicode 字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:19:58.803

它会这样打印，因为所有控制台都使用单间距字体。在框架中的 JLabel 上尝试一下，它应该可以正常显示。

***编辑：***

尝试创建一个 unicode 打印流

```
PrintStream out = new PrintStream(System.out, true, "UTF-8"); 
```

然后打印到它。

这是 CMD 窗口中的输出。

![在此处输入图像描述](https://i.stack.imgur.com/dVsXs.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:51:23.237

我忘记将其更改为 UTF-8 格式

> 文件 > 属性 > 选择文本文件编码

这将从 Eclipse 控制台正确打印正确的字符。默认值为 cp1252，它将仅打印`?`它不理解的那些字符。

# java - 在 XML 文件中编码 Cp1252 是否无效？

> ID：16141416
> 
> 赞同：5
> 
> 时间：2013-04-22T07:15:59.777
> 
> 标签：java, xml, encoding

我遇到的一些 XML 文件未能通过格式正确的 XML 检查，即使它在我看来格式正确（我可能错了。）

我把它简化为一个简单的例子：

```
<?xml version="1.0" encoding="Cp1252"?>
<jnlp/> 
```

用于进行检查的方法如下：

```
public static boolean isWellFormedXml(InputStream inputStream) {
    try {
        XMLInputFactory inputFactory = XMLInputFactory.newInstance();
        inputFactory.setProperty(XMLInputFactory.IS_COALESCING, false);
        inputFactory.setProperty(XMLInputFactory.SUPPORT_DTD, false);
        XMLStreamReader reader = inputFactory.createXMLStreamReader(stream);
        try {
            // Scan through all the reader tokens to ensure everything is well formed
            while (reader.hasNext()) {
                reader.next();
            }
        } finally {
            reader.close();
        }
    } catch (XMLStreamException e) {
        // Ignore the exception
        return false;
    }

    return true;
} 
```

我看到的错误是：

```
javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,40] 
```

消息：无效的编码名称“Cp1252”。

唯一的问题是 - 我可以在捕获处断点并确认此编码名称*确实*解析。那么这里有什么问题呢？XML 是否也限制了您可以在序言中使用的编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:25:25.247

查看：

[http://www.iana.org/assignments/character-sets/character-sets.xml](http://www.iana.org/assignments/character-sets/character-sets.xml)

我猜你正在寻找的编码可能是 windows-1252。Cp1252 可能是 java 中的有效字符集，但在 XML 中，您不应该使用它（按该名称）。

# android - 在android中每次调用睡眠后我都无法更新用户界面

> ID：16141417
> 
> 赞同：1
> 
> 时间：2013-04-22T07:16:00.410
> 
> 标签：android, multithreading, user-interface, handler, sleep

我的应用程序就像 LUDO 游戏。我正在android中开发它。我想要的是，在每次掷骰子后，我的棋子（玩家的棋子）必须一步一步地在方盒子中移动，棋子进入下一个盒子，下一步它必须进入下一个盒子，直到计数骰子...

我已经实现了很多策略，包括 thred、timertask、handler 等。

但是发生的一件常见的事情是，它只是等待我们每一步经过的时间（意味着如果玩家掷骰子并得到 4 则任何一步的时间，例如说 0.5 秒乘以 4 即 2 秒）并且在到那时它会更新 UI。这里我想要的是我想在每个时间间隔（如前一个括号中提到的 0.5 秒）之后更新 UI，直到玩家移动的最后一步或结束。

尽快帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:26:49.833

我认为您在游戏中使用画布只是没有在每个步骤中更新您的 UI 可能有两个原因。
1 您需要将位置增加单个像素假设一个框是 48
像素，然后如果您得到 4 则只需增加像素 48+48+48+48 ......并且 2\. 在每次增加单个时调用 invalidate()像素位置。

我希望这可以帮助你.. :-)

# javascript - 如何使用 jquery 执行脚本标签并将其附加到 html 元素

> ID：16141418
> 
> 赞同：0
> 
> 时间：2013-04-22T07:16:05.633
> 
> 标签：javascript, jquery, html, dom

我有以下脚本标签

```
<script src="http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=rsb&c=28&pli=3326580&PluID=0&w=728&h=90&ord=|RANDOM|&ncu=$$|CLICK|$$"></script>
<noscript>
    <a href="|CLICK|http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=brd&FlightID=3326580&Page=&PluID=0&Pos=4688" target="_blank">
        <img src="http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=bsr&FlightID=3326580&Page=&PluID=0&Pos=4688" border=0 width=728 height=90>
    </a>
</noscript> 
```

这是执行时，我只是添加到 html 正文段。

但是，如果我使用 jquery 动态将此标签添加到 html 元素，它不会执行。

我还尝试`jQuery('')`在附加到 html 元素之前使用将其转换为 dom。

请查看我的 jQuery 代码，我正在执行此操作。

```
var testUrl = $('<script src="http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=rsb&c=28&pli=3326580&PluID=0&w=728&h=90&ord=|RANDOM|&ncu=$$|CLICK|$$"></script><noscript><a href="|CLICK|http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=brd&FlightID=3326580&Page=&PluID=0&Pos=4688" target="_blank"><img src="http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=bsr&FlightID=3326580&Page=&PluID=0&Pos=4688" border=0 width=728 height=90></a></noscript>');
$('#previewImgDiv').html(testUrl); 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T05:55:29.197

你可以通过使用[postscribe](https://github.com/krux/postscribe)来做到这一点。这是专门用于异步编写 javascript

# ruby-on-rails - Ruby on Rails + 乘客无法加载缓存资产

> ID：16141419
> 
> 赞同：0
> 
> 时间：2013-04-22T07:16:10.453
> 
> 标签：ruby-on-rails, asset-pipeline, passenger

我刚刚安装了乘客，我相信我让它工作了，但现在我的 rails 应用程序似乎无法加载缓存的资产。尝试加载页面时，我收到以下消息：

> ActionView::Template::Error（没有这样的文件或目录 - /home/glawson/vidStream/tmp/cache/assets/sprockets%2Ff1663d34d4b6003379113df98f1433a520130421-27670-18ux0pw.lock）：

```
2: <html>
3: <head>
4:   <title>VidStream</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: 
```

> app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___4187138815701226714_20468720'

当我尝试使用乘客运行我的 web 应用程序或使用 rails 服务器进行开发时，就会发生这种情况。除了找不到它正在寻找的文件之外，我对这个错误甚至意味着什么有点模糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:21:10.453

在生产模式下，您需要使用预编译资产目录

```
RAILS_ENV=production rake assets:precompile 
```

然后只有它会起作用。因为默认情况下，prod 资产预编译是启用的。

# android - Android中如何获取显示设备特性？

> ID：16141420
> 
> 赞同：0
> 
> 时间：2013-04-22T07:16:14.377
> 
> 标签：android, google-tv

伙计们，

我们的应用程序仅适用于具有特定序列号的特定型号的显示器。在我们的应用程序的 Linux 版本上，我们通过 EDID 获取此信息。

我们现在正在考虑将代码移植到 Android (Google TV)。

Android NDK 上是否有任何 API 可以让我们获取显示设备特征，例如其型号和序列号？

预先感谢您的帮助。

问候，
彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:24:54.323

由于 Google TV 设备没有电话硬件，因此您无法使用 TelephonyManager 获取设备 ID。

您可以使用以下代码获取其他设备信息：

```
Log.i(LOG_TAG, "android.os.Build.VERSION.RELEASE="+android.os.Build.VERSION.RELEASE);
Log.i(LOG_TAG, "android.os.Build.VERSION.INCREMENTAL="+android.os.Build.VERSION.INCREMENTAL);
Log.i(LOG_TAG, "android.os.Build.DEVICE="+android.os.Build.DEVICE);
Log.i(LOG_TAG, "android.os.Build.MODEL="+android.os.Build.MODEL);
Log.i(LOG_TAG, "android.os.Build.PRODUCT="+android.os.Build.PRODUCT);
Log.i(LOG_TAG, "android.os.Build.MANUFACTURER="+android.os.Build.MANUFACTURER);
Log.i(LOG_TAG, "android.os.Build.BRAND="+android.os.Build.BRAND); 
```

对于 Vizio Co-Star Google TV 设备，您将获得以下信息：

```
android.os.Build.VERSION.RELEASE=3.2
android.os.Build.VERSION.INCREMENTAL=U4.6.0-ota2
android.os.Build.DEVICE=VAP430
android.os.Build.MODEL=VAP430
android.os.Build.PRODUCT=StreamPlayer
android.os.Build.MANUFACTURER=VIZIO
android.os.Build.BRAND=Vizio 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:42:39.977

您可以使用以下命令转储所有功能：

```
 TextView text = (TextView) findViewById(id.featurestextview);

    FeatureInfo features[] = getPackageManager()
            .getSystemAvailableFeatures();
    Log.d("Features", "getSystemAvailableFeatures() = " + features);

    text.append("Supported System Features on this device:\n\n");

    if (features != null) {
        for (FeatureInfo featureInfo : features) {
            if (featureInfo.name!= null) {
                text.append(featureInfo.name+"  (Flags: "+featureInfo.flags+") \n");
            } else {
                text.append(featureInfo+"\n");
            }
        }
    }

    long maxMemory = Runtime.getRuntime().maxMemory();
    int memoryClass = ((ActivityManager) getSystemService(ACTIVITY_SERVICE)).getMemoryClass();
    MemoryInfo memInfo = new MemoryInfo();
    ((ActivityManager) getSystemService(ACTIVITY_SERVICE)).getMemoryInfo(memInfo);

    text.append("\n\nMEMORY:\nMaxMemory "+maxMemory/1024+"KB / "+maxMemory/1024/1024+"MB");
    text.append(" (Memory Class: "+memoryClass+")");
    text.append("\n MemoryInfo: Avail="+ memInfo.availMem / 1024 +"KB   Threshold="+memInfo.threshold /1024 +"KB"); 
```

供应商等的 android 构建属性将允许您将范围限定到特定设备。关于序列号（例如，cpu 序列号 - 不可用），我们建议您使用 mac 地址。

# linq - 想要将 SQL 查询更改为 LINQ

> ID：16141429
> 
> 赞同：0
> 
> 时间：2013-04-22T07:17:01.387
> 
> 标签：linq

我想将下面的简单 SQL 查询更改为 LINQ，如何更改？

```
select * from table1 where isPaid = 'true' and  Id in (select Id from table2 where EmployeeId = 12) 
```

类似于这个？

```
from pa in db.PaymentAdvices
where pa.IsPaid == true
orderby pa.PaidDate descending
select pa; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:26:44.703

这里代码linq到sql：

```
from t1 in table1
join t2 in table2 on t1.Id equals t2.Id
where t2.EmployeeId = 12
select t1 
```

希望有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:10:38.017

如果字段**isPaid**的数据类型为**Boolean**：

```
from t1 in table1
join t2 in table2 on t1.Id equals t2.Id
where t2.EmployeeId = 12 and t1.isPaid == true
select t1 
```

如果字段**isPaid**的数据类型为**String**：

```
from t1 in table1
join t2 in table2 on t1.Id equals t2.Id
where t2.EmployeeId = 12 and t1.isPaid.Equals("true")
select t1 
```

# c++ - 为什么将函数指针设置为指针和指针指针起作用？

> ID：16141431
> 
> 赞同：1
> 
> 时间：2013-04-22T07:17:03.970
> 
> 标签：c++, c, pointers, function-pointers

还有一次我被指针逻辑困住了。以下代码使用函数 typedef tOutFunction。它为这个函数指针定义了一个全局变量和一个 set 方法。

为什么

```
SetOutFunction(OutFunction); 
```

和

```
SetOutFunction(&OutFunction); 
```

两者都工作？自动转换如何在这个地方工作。还是其中之一是错误的并且它是偶然起作用的？

```
#include <iostream>

typedef int (*tOutFunction)(const char*);

int OutFunction(const char* out)
{
  std::cout << "OutFunction:" << out << "\n";
  return 10;
}

tOutFunction out__ = 0;

void SetOutFunction(tOutFunction outFunc)
{
  out__ = outFunc;
}

int main()
{
  SetOutFunction(OutFunction);
  std::cout << out__("Without Ref") << "\n";

  SetOutFunction(&OutFunction);
  std::cout << out__("With Ref") << "\n";

  return 0;
} 
```

也在这里尝试过：http: [//codepad.org/yfxj2QAo](http://codepad.org/yfxj2QAo)

# javascript - 检查javascript中的空对象

> ID：16141436
> 
> 赞同：0
> 
> 时间：2013-04-22T07:17:28.303
> 
> 标签：javascript, null

我有以下代码片段，它在我的表单中定义了属性值。

```
function retrieve(){
    setSelectedIndex(document.producerSetForm.GA1,"<%=ssnGA1%>");
    setSelectedIndex(document.producerSetForm.GA2,"<%=ssnGA2%>");
    setSelectedIndex(document.producerSetForm.GA3,"<%=ssnGA3%>");
    setSelectedIndex(document.producerSetForm.GA4,"<%=ssnGA4%>");
    setSelectedIndex(document.producerSetForm.GA5,"<%=ssnGA5%>");
} 
```

这些 ssnGA1、ssnGA2 等可能有也可能没有价值。我需要检查它们是否具有进行更多处理的价值。我试过了

```
var len=<%=ssnGA1.toString().length()%>;
if(len !=0) 
```

但它仅在值存在时才有效。否则它会给出 javascript 错误。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:21:53.930

您必须首先检查您的字符串是否未定义/为空，例如：

```
if ( ssnGA1 && ssnGA1.toString().length ) {
  // do something
} 
```

另外，`length`是一个属性，而不是一个函数，有关详细信息，[请参阅 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/length)。

# design-patterns - 关于 Siddhi 模式查找

> ID：16141437
> 
> 赞同：0
> 
> 时间：2013-04-22T07:17:31.350
> 
> 标签：design-patterns, wso2, complex-event-processing, siddhi

siddhi ( [http://siddhi-cep.blogspot.com/](http://siddhi-cep.blogspot.com/) ) / WSO2 是否具有处理类似于以下内容的查询的功能

> > 1) 5 次错误后成功
> > 
> > 2) 5 个错误，5 个致命，1 个成功

可以假设存在时间窗口

谁能提供一个**例子**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:30:47.207

您可以使用 siddhi 的模式或序列实现来完成此任务（模式和序列是两种不同的实现，请参阅文档）...请参阅 [1] 和 [2]...

[1] [http://docs.wso2.org/wiki/display/CEP210/Patterns](http://docs.wso2.org/wiki/display/CEP210/Patterns)

[2] [http://docs.wso2.org/wiki/display/CEP210/Sequences](http://docs.wso2.org/wiki/display/CEP210/Sequences)

@DarkCthulhu：Siddhi 是 WSO2 CEP 的查询处理引擎...（有关此的更多信息，请参阅：[http](http://docs.wso2.org/wiki/display/CEP210/Introduction+to+SiddhiQL) ://docs.wso2.org/wiki/display/CEP210/Introduction+to+SiddhiQL ）

谢谢，

莫汉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T06:23:55.457

@萨比尔：

关于您关于我们是否可以应用 Pattern.count(...) 的查询，您是否在询问是否可以在与模式匹配的字段上应用 count、avg、max、min、sum 等聚合？

如果是这样，答案是否定的，当前版本的 Siddhi 是不可能的。

如果您想要的只是简单地计算编号。给定 ip 的错误，您可以尝试这样的查询。

```
from NetFlowStream[status == 'ERROR']#window.time(5 min) 
insert into ErrorNetFlow ipAddr, count(ipAddr) as ipAddrCount
group by ipAddr 
```

有关为 Siddhi 编写窗口查询的更多信息，您可以参考[http://docs.wso2.org/wiki/display/CEP210/Windows 。](http://docs.wso2.org/wiki/display/CEP210/Windows)

谢谢，

拉桑塔

# iphone - 用户启用安全登录时的 facebook 安全警告 - iPhone

> ID：16141440
> 
> 赞同：4
> 
> 时间：2013-04-22T07:17:46.677
> 
> 标签：iphone, ios, objective-c, facebook-graph-api, fb-graph

我正在开发一个使用 FB 登录的应用程序。对于从 facebook 登录，我使用的是 FBGraph，如果用户在其帐户中禁用了安全登录，它可以正常工作，但是如果用户启用了安全登录，那么它会给出以下消息..

![在此处输入图像描述](https://i.stack.imgur.com/rJe2s.png)

这是我用于登录的代码

```
self.fbGraph = [[FbGraph alloc] initWithFbClientID:client_id];

    [fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:)
                         andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"]; 
```

编辑：

根据当前答案的建议，我在我的 FBGraph.m 中添加了以下代码，但是使用此代码，我得到的令牌为零。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    NSLog(@"\n\n\nrequest.URL.relativeString = %@\n\n\n",request.URL.relativeString);
    if([request.URL.relativeString hasPrefix:@"https://www.facebook.com/connect/login_success.html" ]||[request.URL.relativeString hasPrefix:@"http://www.facebook.com/connect/login_success.html" ]||[request.URL.relativeString hasPrefix:@"http://m.facebook.com/connect/login_success.html" ])
    {
        [self.webView stopLoading];
        [[self.webView superview] removeFromSuperview];

        //tell our callback function that we're done logging in :)
        if ( (callbackObject != nil) && (callbackSelector != nil) ) {
            [callbackObject performSelector:callbackSelector];
        }

        return NO;
    }
    return YES;
} 
```

我也变了

`self.redirectUri = @"http://www.facebook.com/connect/login_success.html";`

到

`self.redirectUri = @"http://m.facebook.com/connect/login_success.html";`

但是还是没有成功......

请告诉我FB登录的解决方案.....

谢谢...........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T10:26:06.493

您应该使用 Facebook 的官方 SDK。

从这里下载 - [Facebook SDK](https://developers.facebook.com/docs/ios/downloads/)

***脸书***说

> 适用于 iOS 的 Facebook SDK 3.8 是一个小更新，增加了 XCode 5 和 iOS 7 支持、稳定性修复、自动权限刷新以及向 (F​​BRequestConnection) 指定批处理请求参数的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T12:51:20.453

更改网址：

```
 self.redirectUri = @"http://www.facebook.com/connect/login_success.html"; 
```

FBGraph.m 到

```
 self.redirectUri = @"https://m.facebook.com/connect/login_success.html"; 
```

并检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T08:44:36.790

这不是错误，而只是来自 Facebook 的安全警告。我已经在我的应用程序中解决了它以逃避这种情况。

检查 FbGraph.m 文件中的以下方法

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    if([request.URL.relativeString hasPrefix:@"https://www.facebook.com/connect/login_success.html" ])
         self.webView.hidden=TRUE;
    return YES;
} 
```

检查它当前是否存在于文件中。如果没有，那就去吧。

# math - 计算具有移动边缘的线的新位置

> ID：16141445
> 
> 赞同：0
> 
> 时间：2013-04-22T07:17:48.757
> 
> 标签：math, language-agnostic, drawing

当一条线在两个边缘以已知的前进速度移动时，我如何计算线的新位置（在 N m/s 之后）？两个边缘的速度可以是正的也可以是负的。

![在此处输入图像描述](https://i.stack.imgur.com/lpbGI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:01:15.700

这条线由它的两个端点 P 和 Q 给出，它们随着时间的推移改变它们的位置。在时间 0，P 位于 P_0（坐标为：(P_0_x, P_0_y)），Q 位于 Q_0 = (Q_0_x, Q_0_y)。

P 每秒以某个 v_P = (v_P_x, v_P_y) 速度移动。Q 的速度由 v_Q = (v_Q_x, v_Q_y) 表示。

所以 P 在时间 t 是在 P_t = P_0 + t * v_P = (P_0_x + t * v_P_x, P_0_y + t * v_P_y)。

以类似的方式：Q_t = (Q_0_x + t * v_Q_x, Q_0_y + t * v_Q_y)。

这些在时间 t 成为线的端点，标识线本身。

# php - PHP 日期格式（4 月 24 日晚上 11:00）

> ID：16141446
> 
> 赞同：1
> 
> 时间：2013-04-22T07:17:49.790
> 
> 标签：php, date

我正在尝试格式化日期时间

```
$TIME =  2013-04-24 23:00:00
date("g:ia \o\n\ F jS ", strtotime($TIME)) 
```

它显示输出为

```
11:00pm o April 24th 
```

为什么不显示'n'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:20:01.923

`\n`在双引号字符串 ( [docs](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double) ) 中具有特殊含义。最简单的解决方案是使用单引号来分隔字符串。

```
'g:ia \o\n F jS' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:20:36.550

用这个

```
echo date("g:ia \o\\n\ F jS ", strtotime($TIME)); 
```

基本上你需要使用反斜杠（）来转义 \n，因为它是 php 中的保留关键字换行符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:20:10.750

只需使用单引号

```
$TIME = '2013-04-24 23:00:00';
date('g:ia \o\n F jS ', strtotime($TIME)) 
```

在双引号内使用时，`\n`是换行符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:22:50.973

只需使用单引号而不是双引号，因为`\n`在双引号字符串中被解释为换行符，所以这样做：

```
date('g:ia \o\n\ F jS ', strtotime($TIME)) 
```

# asp.net - 将 oracle 10g 企业与 asp.net 代码连接会导致 tns 1 出错

> ID：16141447
> 
> 赞同：0
> 
> 时间：2013-04-22T07:17:50.493
> 
> 标签：asp.net, oracle

我正在使用此代码访问远程服务器的 oracle 数据库，但无法连接

```
OleDbConnection oCon = new OleDbConnection();
oCon.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;User ID=FAIMS_DEV;Password=FAIMS_DEV;Data source=FAIMSDEV;";
OleDbDataAdapter da = new OleDbDataAdapter("SELECT * FROM TAB", oCon);

//OleDbDataAdapter da = new OleDbDataAdapter("SELECT COMP_CODE, CATEGORY_GRP_CODE, CATEGORY_CODE, BRIEF_DESC_ENG, SYSDATE, 'MIS_USER' FROM ICSPCT", oCon);
DataTable dt = new DataTable();
da.Fill(dt); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:30:05.767

您的连接字符串看起来像是用于 MS Access。如果您尝试连接到 Oracle，您可能需要获取[Oracle 库](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)。

有关与 Oracle 的连接示例，请查看以下问题：[Connect to Oracle without tnsname.ora](https://stackoverflow.com/questions/12159298/net-connect-to-oracle)。

# c++ - 无法在动态链接库 libstdc++-6.dll 中找到过程入口点 __gxx_personality_v0

> ID：16141451
> 
> 赞同：3
> 
> 时间：2013-04-22T07:18:05.633
> 
> 标签：c++, opencv, dll, codeblocks, libstdc++

尝试运行我的 opencv 应用程序时出现该错误。我正在使用 Windows7、CodeBlocks 12.11、opencv2.4.4 和 MinGW 编译器（CodeBlocks 中的那个）。它编译并创建可执行文件，但是当我尝试运行它时，它会因过程入口点错误而崩溃。我已将 C:\programs\CodeBlocks\Mingw\bin 添加到“PATH”变量中，并且我知道有 libstdc++-6.dll。

我不知道发生了什么。

这是简单的代码：

```
include <iostream>
include <opencv2/highgui/highgui.hpp>

using namespace std;
using namespace cv;

int main()
{
cout << "Hello world!" << endl;
namedWindow("window");
Mat image=imread("mustang.jpg",CV_LOAD_IMAGE_COLOR);
imshow("window",image);
waitKey(0);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-14T13:56:56.090

libstdc++-6.dll 包含*运行时*环境。它是基本例程的实现，例如堆管理器或异常处理。

这些基本例程几乎用于每个程序。因此，将它们的副本放入每个程序中会浪费内存。这就是为什么它们通常被打包到一个共享库 (DLL) 中。然后，程序可以在需要运行时的例程时请求 DLL。

在您的情况下， libstdc++-6.dll 包含错误版本的运行时。有两种可能：

*   找到包含正确版本的运行时的 libstdc++-6.dll 并将其复制到可执行文件的目录中。您可以通过运行来确定 DLL 是否正确`nm libstdc++-6.dll | grep personality`。如果`__gxx_personality_v0`显示在列表中，那么您可能拥有正确的 DLL。
*   将运行时环境的副本放入可执行文件中。您可以通过添加`-static-libgcc -static-libstdc++`到您的链接器参数来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-20T07:42:15.357

这个问题似乎在stackoverflow上已经回答了好几次了。 [__gxx_personality_v0 有什么用？](https://stackoverflow.com/questions/329059/what-is-gxx-personality-v0-for)作为其中之一

# java - 解析用引号括起来的逗号分隔值

> ID：16141458
> 
> 赞同：3
> 
> 时间：2013-04-22T07:18:30.293
> 
> 标签：java, csv

我正在尝试仅使用标准 Java 库来解析用引号括起来的逗号分隔值（我知道这必须是可能的）

作为一个例子 file.txt 包含一个新行的每一行

```
"Foo","Bar","04042013","04102013","Stuff"
"Foo2","Bar2","04042013","04102013","Stuff2" 
```

但是，当我使用到目前为止编写的代码解析文件时：

```
import java.io.*;
import java.util.Arrays;
 public class ReadCSV{

    public static void main(String[] arg) throws Exception {

        BufferedReader myFile = new BufferedReader(new FileReader("file.txt"));

        String myRow = myFile.readLine(); 
        while (myRow != null){
            //split by comma separated quote enclosed values
            //BUG - first and last values get an extra quote
            String[] myArray = myRow.split("\",\""); //the problem

            for (String item:myArray) { System.out.print(item + "\t"); }
            System.out.println();
            myRow = myFile.readLine();
        }
        myFile.close();
    }
} 
```

**但是输出是**

```
"Foo    Bar     04042013        04102013        Stuff"

"Foo2   Bar2    04042013        04102013        Stuff2" 
```

**代替**

```
Foo    Bar     04042013        04102013        Stuff

Foo2   Bar2    04042013        04102013        Stuff2 
```

我知道我在拆分时出错了，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:24:54.107

在进行拆分之前，只需使用下面的行删除 myRow 变量中的第一个双引号和最后一个双引号。

```
myRow = myRow.substring(1, myRow.length() - 1); 
```

（更新）还要检查 myRow 是否不为空。否则上面的代码会导致异常。例如下面的代码检查 myRow 是否不为空，然后只从字符串中删除双引号。

```
if (!myRow.isEmpty()) {
    myRow = myRow.substring(1, myRow.length() - 1);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T07:49:28.630

我认为您可能必须采用有状态的方法，基本上就像下面的代码（如果您想允许在值中转义引号，则需要另一种状态）：

```
import java.util.ArrayList;
import java.util.List;

public class CSV {

    public static void main(String[] args) {
        String s = "\"hello, i am\",\"a string\"";
        String x = s;
        List<String> l = new ArrayList<String>();
        int state = 0;
        while(x.length()>0) {
            if(state == 0) {
                if(x.indexOf("\"")>-1) {
                    x = x.substring(x.indexOf("\"")+1).trim();
                    state = 1;
                } else {
                    break;
                }
            } else if(state == 1) {
                if(x.indexOf("\"")>-1) {
                    String found = x.substring(0,x.indexOf("\"")); 
                    System.err.println("found: "+found);
                    l.add(found);
                    x = x.substring(x.indexOf("\"")+1).trim();
                    state = 0;
                } else {
                    throw new RuntimeException("bad format");
                }
            } else if(state == 2) {
                if(x.indexOf(",")>-1) {
                    x = x.substring(x.indexOf(",")+1).trim();
                    state = 0;
                } else {
                    break;
                }
            }
        }
        for(String f : l) {
            System.err.println(f);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T07:25:59.270

相反，您可以使用[replaceAll](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)，对我来说，它看起来更适合此任务：

```
myRow = myRow.replaceAll("\"", "").replaceAll(","," "); 
```

这将用空`"`替换所有（将删除它们），然后`,`用空格替换所有（当然你可以增加空格的数量）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T07:31:13.083

上面代码片段中的问题是您正在拆分基于 `","`. 在您的 Line start`"foo","`和 end`","stuff"`上，开始和结束引号不匹配，`","`因此没有拆分。

所以这绝对不是java中的错误。在您的情况下，您需要自己处理该部分。

您有多种选择。其中一些可能如下所示。1\. 如果您确定总会有一个开始`"`和结束`"`，您可以在拆分之前将它们从 String 中删除。2.如果starting `"`and`"`是可选的，可以先勾选with `startsWith` `endsWith`，如果存在就去掉，再拆分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T07:32:47.190

您可以简单地获取由逗号分隔的字符串，然后删除第一个和最后一个 '"'。=) 希望这有帮助没有太多时间：D

```
String s = "\"Foo\",\"Bar\",\"04042013\",\"04102013\",\"Stuff\"";
        String[] bufferArray = new String[10];
        String bufferString;
        int i = 0;
        System.out.println(s);

        Scanner scanner = new Scanner(s);
        scanner.useDelimiter(",");

        while(scanner.hasNext()) {
            bufferString = scanner.next();
            bufferArray[i] = bufferString.subSequence(1, bufferString.length() - 1).toString();
            i++;
        }

        System.out.println(bufferArray[0]);
        System.out.println(bufferArray[1]);
        System.out.println(bufferArray[2]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-19T14:02:53.757

此解决方案不如`String.split()`oneliner 优雅。优点是我们避免了脆弱的字符串操作，即。的使用`String.substring()`。字符串必须以`,"`然而结尾。

此版本处理分隔符之间的空格。引号中的分隔符按预期被忽略，转义引号（例如`\"`）也是如此。

```
String s = "\"F\\\",\\\"oo\"  ,    \"B,ar\",\"04042013\",\"04102013\",\"St,u\\\"ff\"";
Pattern p = Pattern.compile("(.*?)\"\\s*,\\s*\"");
Matcher m = p.matcher(s + ",\""); // String must end with ,"
while (m.find()) {
    String result = m.group(1);
    System.out.println(result);
} 
```

# c# - 如何在 c# 上进行应用时在不使用 adobe reader 的情况下查看 pdf 文件

> ID：16141463
> 
> 赞同：0
> 
> 时间：2013-04-22T07:19:06.793
> 
> 标签：c#

我正在使用 Visual Studio 2010-framework 3.5 制作一个通用文档查看器。在此我想打开一个 pdf 文件，我使用了 PDFTextStripper 和 Pdfbox，但我无法以正确的格式查看文本。谁能建议我查看pdf文件的任何其他选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:37:11.227

您可以根据 adobe 发布的结构文档编写自己的 pdf 解析器：http:
[//www.adobe.com/devnet/pdf/pdf_reference.html](http://www.adobe.com/devnet/pdf/pdf_reference.html)

或添加一个模块。例如：
[http ://www.pdfsharp.net/MainPage.ashx](http://www.pdfsharp.net/MainPage.ashx)
[http://www.itextpdf.com/itext.php](http://www.itextpdf.com/itext.php)

如果您要开发通用文档查看器，我建议您编写自己的代码，否则如果您发布（w/wo donate 选项）或出售您的应用程序
（恕我直言：不从头开始编写所有代码，它可能会面临法律问题）无论如何都不会是*您的*通用文档查看器，而是第 3 方代码的集合）

# asp.net - 以小写字母给出时网站未运行

> ID：16141466
> 
> 赞同：0
> 
> 时间：2013-04-22T07:19:23.153
> 
> 标签：asp.net

我有一个带有网址的网站。[http://192.168.13.127/ReportWebsite/Login.aspx]，效果很好。如果我在较小的情况下提供 url，则页面正在刷新而不是加载

[http://192.168.13.127/reportwebsite/Login.aspx]，我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:21:54.170

URL 非常具体，并且取决于服务器区分大小写。它认为 Hi.asp 和 hi.asp 不同的页面

# go - 如何在 html/template 中使用范围内的索引来遍历并行数组？

> ID：16141467
> 
> 赞同：16
> 
> 时间：2013-04-22T07:19:26.533
> 
> 标签：go

我正在执行一个带有 2 个并行数组（相同大小）的模板，并且我想同时列出两个数组中的项目，如何在范围内使用索引？

这显然不起作用：

```
{{range $i, $e := .First}}$e - {{index .Second $i}}{{end}} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T08:13:41.213

预定义的[全局模板函数](http://golang.org/pkg/text/template/)之一是`index`.

> `index` 返回通过以下参数对其第一个参数进行索引的结果。因此`index x 1 2 3`，在 Go 语法中， `x[1][2][3]`. 每个索引项必须是`map`、`slice`或`array`。

所以你在正确的轨道上。唯一的问题是您没有考虑在块`dot`内重新分配的事实。`range`

所以你需要回到原来的点，为此我们有以下

> 开始执行时，`$`设置为传递给 Execute 的数据参数，即设置为 dot 的起始值。

所以（假设你的模板中没有其他事情发生）你应该能够做到：

```
{{range $i, $e := .First}}$e - {{index $.Second $i}}{{end}} 
```

*不过就个人而言，我会创建一个名为的模板函数`zip`，该函数接受多个切片并返回每对值的切片。它在您的模板中看起来会更干净，并且可能会在某个地方重用。*

# ios - CSS3 转换在 iOS（可能还有其他移动设备）上无法正常工作

> ID：16141468
> 
> 赞同：1
> 
> 时间：2013-04-22T07:19:28.967
> 
> 标签：ios, html, css, transform

我正在做关于网页设计的学校项目，并且在 iOS 上遇到了 css3 转换问题（或我不知道的问题）。

这是我的演示网站的链接：http: [//lovelyiris.byethost17.com/](http://lovelyiris.byethost17.com/)

问题是：（这里一步一步说）

*   您可以在底部看到“新到货”选项卡，对吗？

*   在PC上，当你点击那个标签时，会出现新品页面，里面有类似堆栈的相册，当你点击箭头时，图像会随着一些css3变换效果而变化。（只需访问我的网站并进行测试）。

*   这是我的设备上的问题 - ipod touch gen 3 和 ipad 2：
    *   首先，当我点击“New Arrivals”标签时，专辑没有出现。但是当我转到另一个选项卡然后再次返回“新来者”时，会出现专辑（即：主页->新来者->关于->新来者）
    *   相册出现后，当我点击箭头时，相册又消失了。如果我转到另一个选项卡然后返回，专辑又回来了，最后一张图片在那里！

（您可以在您的设备上进行测试）。

所以，我认为相册仍然有效，但方式错误。它只是从第一张图像滚动到最后一张图像，中间不显示任何内容，就像在 PC 上工作一样。

这是“新品”标签的 HTML：

```
<section class="st-panel st-color" id="st-panel-2">
   <div class="st-deco" data-icon="*"></div>
   <h2 id="newarr">New Arrivals</h2>
   <section class="main">
       <ul id="st-stack" class="st-stack-raw">
          <li><div class="st-item"><a href="#"><img src="images/001.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 1</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/002.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 2</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/003.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 3</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/4.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 4</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/5.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 5</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/6.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 6</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/7.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 7</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/8.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 8</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/9.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 9</h2><h3>in Dress Category</h3></div></li>
          <li><div class="st-item"><a href="#"><img src="images/10.jpg" width="400" height="300"/></a></div><div class="st-title"><h2>Dress 10</h2><h3>in Dress Category</h3></div></li>
       </ul>
    </section>
 </section> 
```

而 css 就[在这里](http://lovelyiris.byethost17.com/css/stack.css)。（对不起，这是一个长文件）

那么，我做错了什么？

我想知道它在其他操作系统（android ...）上是否相同？

谢谢你。对不起我的英语不好。

# html - 为什么跨度和表单div在Firefox中没有对齐

> ID：16141470
> 
> 赞同：0
> 
> 时间：2013-04-22T07:19:34.590
> 
> 标签：html, css, twitter-bootstrap

以下 html&css 在 chrome 中运行良好，但在 Firefox 上未对齐

```
 <div class="btns">
    <div id="green">    
<span id="cls" class="btn btn-block btn-large btn-success disabled green_btn">Green</span>

    </div>
    <div id="red">
        <form class="button_to" >
            <div>
                <input class="btn btn-block btn-large btn-danger red_btn" type="submit" value="Red">
            </div>
        </form>
    </div>
</div> 
```

css

```
#cls:hover {
    background:black;
    cursor:pointer;
}
.btns {
    position: relative;
}
.num {
    position: absolute;
    bottom: 0;
    width: 100%;
    text-align: center;
}
#green, #red {
    display: inline-block;
    width: 49%;
    position: relative;
}
.green_btn, .red_btn {
    margin-bottom: 4px;
} 
```

这是[jsfiddle](http://jsfiddle.net/7vYFf/)

我不明白为什么它们在 Firefox 中没有对齐，但在 chrome 中它们很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:21:30.530

你应该使用`float: left;`而不是`inline-block;`

[**演示**](http://jsfiddle.net/7vYFf/1/)

注意：不要忘记清除浮动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:21:54.423

**习惯了这个**

定义你的`#green, #red` **身份证** `vertical-align:top;`

```
#green, #red {
    display: inline-block;
    vertical-align: top;} 
```

**[演示](http://jsfiddle.net/7vYFf/4/)**

有关此的更多**[信息](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:23:07.827

您只需在`float:left;`上面添加，`#red #green`请参阅[jsFiddle](http://jsfiddle.net/7vYFf/2/)。

```
#green, #red {
    display: inline-block;
    width: 49%;
    position: relative;
    float:left;
} 
```

# ruby-on-rails - 如何在给定范围内获取 sql 中“order”的值

> ID：16141472
> 
> 赞同：0
> 
> 时间：2013-04-22T07:19:35.413
> 
> 标签：ruby-on-rails, ruby, activerecord

如何获取给定范围的“订单”sql 的值？

就像 User.search('blah').where_values 但为了订单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:27:50.303

在 Rails 3.2.13 中，您可以使用 order_values 或 order_clauses 执行此操作。

```
User.search('blah').order_values

User.search('blah').order_clauses 
```

# c++ - OpenGL多子窗口问题

> ID：16141475
> 
> 赞同：1
> 
> 时间：2013-04-22T07:19:53.990
> 
> 标签：c++, linux, opengl, glut

我的 GL 代码有问题。我在 Ubuntu 12.10 平台上运行，我试图在我创建的两个子窗口中呈现顶点数组数据。我创建了一个主窗口，然后创建了两个子窗口。

我将顶点数据渲染到两个子窗口，但问题是，顶点数据只渲染到最后一个声明的子窗口。另一个子窗口保持黑色。

这些是显示回调函数：

```
void display1( void )
{
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);     // clear the window
    glDrawArrays( GL_TRIANGLES, 0, 59);   

    glutSwapBuffers();
}

void display2( void )
{

    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );     // clear the window
    glDrawArrays( GL_TRIANGLES, 0, 59);       
    glutSwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:31:00.250

要渲染到另一个窗口或子窗口，您需要使用[glutSetWindow](http://www.opengl.org/documentation/specs/glut/spec3/node18.html)将其设置为活动状态。

这取决于您发布图像更新的位置，也就是您设置活动窗口的位置。例如，如果您通过重塑功能执行此操作，则需要在此处执行此操作：

```
void Reshape1( int width, int height )
{
  // activate sub-window 1
  glutSetWindow(subWin1);
  // ...
  glutPostRedisplay();
}
void Reshape2( int width, int height )
{
  // activate sub-window 2
  glutSetWindow(subWin2);
  // ...
  glutPostRedisplay();
} 
```

# python - Python：使用学分和成绩计算课程的 GPA

> ID：16141476
> 
> 赞同：0
> 
> 时间：2013-04-22T07:19:56.470
> 
> 标签：python, class, methods, python-3.x

我对这段代码非常接近，我需要弄清楚将多个等级作为参数。它需要一个完美的，但我的代码是写的，所以它会一直记成绩和学分，直到没有输入任何内容。但它不是那样工作的。

到目前为止我的代码：

```
#! /usr/bin/python3
# gpa.py
#    Program to take credits and grades and return calculated GPA

class Student:

def __init__(self, hours, qpoints, credits):
    self.hours = float(hours)
    self.qpoints = float(qpoints)

def getName(self):
    return self.name

def getHours(self):
    return self.hours

def getQPoints(self):
    return self.qpoints

def gpa(self):
    return self.qpoints/self.hours

def addGrade(self, gradePoint, credits):
    self.hours += credits
    self.qpoints += credits*gradePoint

def addLetterGrade(self, grade):
    total = 0
    for i in grade(A,B,C,D,E,F):
        if grade == 'A':
                     total = total + 4.0
        elif grade == 'A-':
                     total = total + 3.7
        elif grade == 'B+':
                     total = total + 3.3
        elif grade == 'B':
                     total = total + 3.0
        elif grade == 'B-':
                     total = total + 2.7
        elif grade == 'C+':
                     total = total + 2.3
        elif grade == 'C':
                     total = total + 2.0
        elif grade == 'C-':
                     total = total + 1.7
        elif grade == 'D+':
                     total = total + 1.3
        elif grade == 'D':
                     total = total + 1.0
        elif grade == 'E':
                     total = total + 0.0
        elif grade == 'F':
                     total = total + 0.0

def main():
    grade = input('Enter grade for next course, or type done finish: ')
    credits = input('Enter number of credit hours for this course: ')
    error_float = 'error: expected a floating-point number'
# make a new Student object
    students = Student('students', 0.0, 0.0)

# user-feedback loop
    while 1:
    # prompt user to enter a grade
        grade_str = input(grade)
    # quit if no grade is entered
        if grade_str.strip() == 'done':
            break

        try:
        # convert input to a floating-point value
            grade = float(grade_str)
        except ValueError:
        # if input cannot be converted, restart feedback loop
            print(error_float)
            continue

    # prompt user to enter the number of credits
        credits_str = input(credits).strip()
        try:
        # convert input to a floating-point value
            credits = float(credits_str)
        except ValueError:
        # if input cannot be converted, restart feedback loop
            print(error_float)
            continue

    # update the student's grades
        students.addGrade(grade, credits)

# after user has entered all grades, compute the cumulative GPA
    if students.getHours() == 0.0:
    # can't compute GPA if hours = 0
        print('*** zero credit hours recorded')
    else:
    # otherwise, output cumulative GPA and finish
        print('*** final GPA =', students.gpa())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:54:55.953

```
students = Student('students', 0.0, 0.0) 
```

但是在**init**中你得到了：

```
def __init__(self, hours, qpoints, credits):
    self.hours = float(hours) 
```

所以你给它一个字符串而不是 int/float... 你尝试将它转换为浮点数，但失败了

```
students = Student(0.0, 0.0, 0) 
```

或在**init**中输入名称或其他内容：

```
def __init__(self, name, hours, qpoints, credits): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T20:47:10.610

You may try this way...

```
#! /usr/bin/python3
# gpa.py
#    Program to take credits and grades and return calculated GPA

class Student:
    def __init__(self, hours, qpoints, credits):
        self.hours = float(hours)
        self.qpoints = float(qpoints)

    def getName(self):
        return self.name

    def getHours(self):
        return self.hours

    def getQPoints(self):
        return self.qpoints

    def gpa(self):
        return self.qpoints/self.hours

    def addGrade(self, gradePoint, credits):
        self.hours += credits
        self.qpoints += credits*gradePoint

    def addLetterGrade(self, grade):
        total = 0
        for i in grade(A,B,C,D,E,F):
            if grade == 'A':
                total = total + 4.0
            elif grade == 'A-':
                total = total + 3.7
            elif grade == 'B+':
                total = total + 3.3
            elif grade == 'B':
                total = total + 3.0
            elif grade == 'B-':
                total = total + 2.7
            elif grade == 'C+':
                total = total + 2.3
            elif grade == 'C':
                total = total + 2.0
            elif grade == 'C-':
                total = total + 1.7
            elif grade == 'D+':
                total = total + 1.3
            elif grade == 'D':
                total = total + 1.0
            elif grade == 'E':
                total = total + 0.0
            elif grade == 'F':
                total = total + 0.0

def main():
    grade = input('Enter grade for next course, or type done finish: ')
    credits = input('Enter number of credit hours for this course: ')
    error_float = 'error: expected a floating-point number'
# make a new Student object
#     students = Student('students', 0.0, 0.0) # This is wrong declaration because you initialised "def __init__(self, hours, qpoints, credits): "
    students = Student(0.0, 0.0, 0.0)

# user-feedback loop
    while 1:
    # prompt user to enter a grade
        grade_str = input(grade)
    # quit if no grade is entered
        if grade_str.strip() == 'done':
            break

        try:
        # convert input to a floating-point value
            grade = float(grade_str)
        except ValueError:
        # if input cannot be converted, restart feedback loop
            print(error_float)
            continue

    # prompt user to enter the number of credits
        credits_str = input(credits).strip()
        try:
        # convert input to a floating-point value
            credits = float(credits_str)
        except ValueError:
        # if input cannot be converted, restart feedback loop
            print(error_float)
            continue

    # update the student's grades
        students.addGrade(grade, credits)

# after user has entered all grades, compute the cumulative GPA
    if students.getHours() == 0.0:
    # can't compute GPA if hours = 0
        print('*** zero credit hours recorded')
    else:
    # otherwise, output cumulative GPA and finish
        print('*** final GPA =', students.gpa())

if __name__ == '__main__':
    main() 
```

# neo4j - Spring Data Neo4j template.fetch() 导致 OutOfMemory？

> ID：16141479
> 
> 赞同：0
> 
> 时间：2013-04-22T07:20:10.537
> 
> 标签：neo4j, spring-data-neo4j

是否存在使用`template.fetch()`可能导致 OutOfMemoryException 的理论上的可能性？例如，假设有一个循环循环 100 次，每次都`template.fetch()`被调用。那将是这样的：

```
List<Building> buildings = repository.getBuildings();
for(Building b : buildings) {
    Country c = repository.include(b.getCountry()); // this calls template.fetch()
    // do something with country..
} 
```

在一定数量的循环之后，获取变得非常慢，然后它抛出 OutOfMemoryException。获取可能是问题吗？如果是这种情况，如何处理？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:15:03.303

Fetch 只是将对象加载到内存中，您应该修改代码以不加载内存中的每个对象或增加内存大小。顺便说一句，由于从 neo4j 获取的对象与普通的 Java 对象没有什么不同，因此它们会在超出范围时被垃圾收集器删除。在您的情况下，将它们分配给 for 循环内的局部变量，它们的生命周期从分配时间延伸到下一次分配，甚至最后分配的一个在循环终止后立即死亡。

# sql - SQL - 对 CSV 字段进行排序

> ID：16141481
> 
> 赞同：1
> 
> 时间：2013-04-22T07:20:12.283
> 
> 标签：sql, sorting, csv

我的 SQL 服务器中有一个 CSV 字段，其中包含 X 天。

这是一个带有数字的示例（以便于阅读）：

```
1,2,3,4
4,5,1,9
3,6,8,4 
```

我想对每一行进行排序。有没有简单的方法来做到这一点？我想得到以下结果：

```
1,2,3,4
1,4,5,9
3,4,6,8 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:33:33.133

该功能在 SQL 语言中不是标准的，在 SQL Server 中也不是现成的。

您可以做的是用任何 .NET 语言编写用户定义函数 (UDF)，然后在查询中调用该函数。该函数本身将简单地将一个字符串作为输入，期望一个 CSV 值，并返回该字符串的排序版本。然后，您可以使用该函数查询您的表，如下所示：

```
SELECT SortedCsv(NumbersOfDays) FROM MyTable 
```

您可以在本文中找到有关在 .NET (C#) 中编写 UDF 的更多信息：http: [//www.dotnetspider.com/resources/19679-Creating-User-Defined-Function-Using-Managed-Code.aspx](http://www.dotnetspider.com/resources/19679-Creating-User-Defined-Function-Using-Managed-Code.aspx)和这个：[http ://www.diaryofaninja.com/blog/2010/09/06/hidden-gems-microsoft-sql-net-managed-code-support](http://www.diaryofaninja.com/blog/2010/09/06/hidden-gems-microsoft-sql-net-managed-code-support)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:04:40.203

尝试这个

```
DECLARE @CSV TABLE(RID INT,ID INT,COL_NAME VARCHAR(MAX))

INSERT INTO @CSV(RID,ID,COL_NAME)
 SELECT 
  ROW_NUMBER() OVER(PARTITION BY ID ORDER BY COL_NAME) AS RID
  ,ID,COL_NAME FROM
  (
    SELECT ID , Split.a.value('.', 'VARCHAR(100)') AS COL_NAME  
    FROM  
    (  
     SELECT ROW_NUMBER() OVER(ORDER BY COL_NAME) AS ID,  
     CAST ('<M>' + REPLACE(COL_NAME, ',', '</M><M>') + '</M>' AS XML) AS COL_NAME
     FROM  TABLE_NAME
    ) AS A CROSS APPLY COL_NAME.nodes ('/M') AS Split(a)
  ) v

SELECT COL_NAME FROM 
(
  SELECT DISTINCT  C1.ID,
  STUFF((SELECT ',' + C2.COL_NAME  AS [text()] FROM @CSV C2
         WHERE C2.ID = C1.ID FOR XML PATH('')),1,1,'' ) AS COL_NAME
  FROM @CSV C1
) RESULT
ORDER BY COL_NAME 
```

将“COL_NAME”和“TABLE_NAME”替换为您的列和表名

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!3/5f10b/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:42:32.727

我建议您使用像 python 这样的编程语言来读取每一行，对其进行排序，并可选择将其放回 SQL 中。

# android - 挂钩方向更改不完全覆盖它

> ID：16141486
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:20:30.930
> 
> 标签：android

我目前正在尝试“挂钩”的方向更改事件，`Android`以便我可以在此事件期间执行一些操作，我目前根据文档使用`onConfigurationChanged`and `android:configChanges="orientation|screenSize"`组合，但问题是它似乎需要您处理所有手动定向操作，否则一旦您“迷上”它，它们就根本不会发生。

我想要做的就是发生正常的方向改变事件，但是加上我的其他事件，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:34:34.017

大多数东西都是自动处理的，比如调整布局大小、重新定位 ActionBar 等，所以你不需要手动“旋转”任何东西。您需要手动处理的是：

*   纵向和横向模式具有不同的图像/文本
*   纵向和横向模式具有不同的布局
*   具有不同的配置（如 GridView 列的数量）
*   ETC

如果您没有针对不同方向指定的上述内容，那么您无需处理任何事情。

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    //do your stuff here
} 
```

但是，如果有不同的资源，您必须手动应用它们。按原样尝试，然后您将看到自动处理的内容以及需要您重新分配的内容。

# jquery - 使用 jQuery 将所选选项的值（文本）附加到文本区域

> ID：16141492
> 
> 赞同：0
> 
> 时间：2013-04-22T07:20:52.583
> 
> 标签：jquery

我想用 jQuery 确定选择列表的选定值，并将该值附加到文本区域。

我怎么做？

```
<div id="myDiv">
    <a>Enter</a><br />
    <div>
      <textarea>

      </textarea>
    </div>
</div>

<div id="select">
<select>
  <option value="volvo">Option1</option>
  <option value="saab">Option2</option>
  <option value="mercedes">Option3</option>
  <option value="audi">Option4</option>
</select>
</div>

$('#myDiv a').click(function(){
$('#select select').appendTo('#myDiv');
$('#select').css('display','block');
       $('#select select').attr('selected').html().clone().appendTo('textarea');
}); 
```

[小提琴](http://jsfiddle.net/dmymQ/24/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:42:53.607

用这个

HTML

```
 <div id="myDiv">
 <a>Enter</a><br />
 <div>
  <textarea>

  </textarea>
 </div>
 </div>
<input type="button" onclick="apv();" value="A1BC" id="ABCA"/>
<div id="select">
<select id="abc1">
  <option value="volvo">Option1</option>
  <option value="saab">Option2</option>
  <option value="mercedes">Option3</option>
  <option value="audi">Option4</option>
</select>
</div> 
```

JS

```
$('#myDiv a').click(function(){
 $('#select select').appendTo('#myDiv');
 $('#select').css('display','block');
   $('#select select').attr('selected').html().clone().appendTo('textarea'); 
 });

$("#ABCA").click(function()
{
  var text1 = $('#abc1 option:selected').val();
  $('#myDiv textarea').html(text1);
  alert(text1);
}); 
```

[演示](http://jsfiddle.net/dmymQ/40/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:24:50.243

用这个

```
var text = $('#select option:selected').text().appendTo('textarea'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:24:10.387

1.  您不能克隆文本字符串，只能克隆元素。
2.  您不能附加文本字符串，只能附加 jQuery 对象。要设置 html 或文本，您必须使用方法`.html()`或`.text()`

解决方案：

```
// store textarea
var $ta = $('#myDiv textarea');

$('#myDiv a').click(function(){
    $('#select select').appendTo('#myDiv');
    $('#select').css('display','block');

    // get selected option text, not value
    // for value, use .val() instead of .text()
    var text = $('#myDiv select').find(':selected').text();

    // append selected value after a space
    $ta.text($ta.text() + ' ' + text);
}); 
```

[http://jsfiddle.net/samliew/mF5GV/](http://jsfiddle.net/samliew/mF5GV/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T07:23:15.443

$('选择选项：选择');

我们使用 :selected 选择器来确定当前选择了哪个选项

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T07:34:38.947

你说的是这个吗？[http://jsfiddle.net/V2cXf/](http://jsfiddle.net/V2cXf/)

```
$('#myDiv a').click(function(){
    $('textarea').append($('#select select').val())
}); 
```

# android - 为什么 Android 应用程序中的 Account Picker 会被取消？

> ID：16141494
> 
> 赞同：2
> 
> 时间：2013-04-22T07:20:56.637
> 
> 标签：android, android-manifest, google-drive-api, launchmode, accountpicker

按照将文件从 Android 设备上传到 Google Drive 的[“五分钟快速入门”](https://developers.google.com/drive/quickstart-android)文档，我编写了一个成功上传文件的测试应用程序，但我尝试将相关代码复制到更大的应用程序并没有上传文件，因为它的 Google Account Picker 总是被取消：

*   onActivityResult() 结果代码为 0（即 [RESULT_CANCELED](http://developer.android.com/reference/android/app/Activity.html#RESULT_CANCELED)），
*   onActivityResult() 意图参数为空，并且
*   logcat（如下所示）显示“活动正在作为新任务启动，因此取消活动结果。”

> 04-22 02:04:25.098: D/alsa_ucm(162): snd_use_case_set(): uc_mgr 0x40e59388 identifier _verb value HiFi Lowlatency 04-22
> 02:04:25.098: D/alsa_ucm(162): 设置扬声器启用 1 的混音器控制
> 04-22 02:04:25.098: D/ACDB-LOADER(162): ACDB -> send_afe_cal 04-22
> 02:04:25.098: I/ActivityManager(526): START u0 {act=com.google.android.gms .common.account.CHOOSE_ACCOUNT cmp=com.google.android.gms/.common.account.AccountPickerActivity (has extras)} from pid 3484
> 04-22 02:04:25.098: W/ActivityManager(526): Activity 启动为一个新任务，因此取消活动结果。
> 04-22 02:04:25.108: D/alsa_ucm(162): 设置 HiFi Lowlatency enable 1 的混音器控制 04-22
> 02:04:25.108: D/ALSAModule(162): 返回的设备值为 hw:0,14
> 04-22 02:04:25.118: D/ALSAModule(162): setHardwareParams: reqBuffSize 1024 通道 2 sampleRate 48000
> 04-22 02:04:25.118: D/ALSAModule(162): setHardwareParams: buffer_size 2048, period_size 1024, period_cnt 2
> 04-22 02:04:25.188: D/dalvikvm(526): GC_FOR_ALLOC 释放 565K, 15% 释放 18562K/21684K, 暂停 71ms, 总共 71ms 04-22
> 02:04:25.248: D/overlay(159): 未设置管道=VG0 dpy=0；未设置管道=VG1 dpy=0；取消设置 pipe=RGB1 dpy=0
> 04-22 02:04:25.248: W/InputMethodManagerService(526): 窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@41ebd7e0 属性=null , token = android.os.BinderProxy@42018140
> 04-22 02:04:27.991: D/dalvikvm(526): GC_FOR_ALLOC 释放 422K, 15% 释放 18564K/21684K, 暂停 65ms, 共 66ms
> 04-22 02:04:28.011: I/ActivityManager(526): 不再需要 com.google.android.marvin.talkback (pid 5301): empty #17
> 04-22 02:04:28.241: D/overlay(159 ): 设置管道=RGB1 dpy=0; 设置管道=VG0 dpy=0；设置管道=VG1 dpy=0；
> 04-22 02:04:28.672: D/overlay(159): Unset pipe=VG0 dpy=0; 未设置管道=VG1 dpy=0；未设置管道=RGB1 dpy=0；

启动 Google 帐户选择器的代码在两个应用程序中完全相同，但选择器仅在较大的应用程序中被取消。

```
// Handle item selection
case R.id.action_select_account:
    mCredential = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE);
    Intent intent2 = mCredential.newChooseAccountIntent();
    showToast("intent extra: " + intent2.getStringExtra(AccountManager.KEY_ACCOUNT_NAME)); // TODO: remove after test
    startActivityForResult(intent2, REQUEST_ACCOUNT_PICKER);
    return true;
default:
    return false; 
```

测试应用程序和更大的应用程序都是调试版本，包括相同的 jars（如下所示），并且在相同的设备（Nexus 4，OS 4.2.2）上运行，但是，正如五分钟快速入门中所建议的，每个应用程序都有自己的由[Google API 控制台](https://code.google.com/apis/console)生成的自己的客户端 ID 。

![在此处输入图像描述](https://i.stack.imgur.com/iju4e.png)

取消的结果是 onActivityResult() 在 Google Account Picker 被绘制后立即运行，远在选择帐户之前。

**更新：**
经过大致等量的试验和错误后，事实证明，从 AndroidManifest.xml 中删除以下内容可以解决问题。

```
android:launchMode="singleInstance" 
```

我最初的问题是为什么现在转向为什么 Android 中的 Google Account Picker 需要创建多个实例？

谢谢，
格雷格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-28T21:47:35.130

如果您使用 singleInstance，则不允许其他活动成为其任务的一部分。请改用 singleTask。

如[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode) 所述，往下几段。

> “singleTask”和“singleInstance”模式也仅在一个方面彼此不同：“singleTask”活动允许其他活动成为其任务的一部分。它始终位于其任务的根部，但其他活动（必须是“标准”和“singleTop”活动）可以启动到该任务中。另一方面，“singleInstance”活动不允许其他活动成为其任务的一部分。这是任务中的唯一活动。如果它启动另一个活动，则该活动被分配给不同的任务——就好像 FLAG_ACTIVITY_NEW_TASK 在意图中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:51:32.843

如问题更新中所述，当我从 AndroidManifest.xml 中删除 singleInstance launchMode 时，帐户选择器开始工作。我不知道这种单实例启动模式行为是错误还是缺少文档，但我将其提交给了 Android 问题跟踪器：[问题 54656](http://code.google.com/p/android/issues/detail?id=54656)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T12:32:54.557

出于某种原因，客户经理返回的意图设置了 singleTop，这总是导致您的 onActivityResult*立即*失败并返回 0 resultCode (Activity.RESULT_CANCELLED) 或其他。我不得不将意图标志清零以防止这种情况

```
// prevent running AccountPicker as SingleTop which fails and calls onActivityResult immediately otherwise
intent.setFlags(0);
startActivityForResult(intent, AccountManagerUtils.GOOGLE_AUTH_REQUEST_CODE); 
```

# php - 如何使用 SOAP 和 PHP 发送此 XML 文件

> ID：16141498
> 
> 赞同：2
> 
> 时间：2013-04-22T07:21:15.113
> 
> 标签：php, soap-client

我一直在做一些我认为我理解的事情:-)。我有一个用于提供 Web 服务的 SOAP xml 文件。我想我理解这个理论；-)，但不是这样，因为它一直出错。

```
<soapenv:Envelope
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soapenv:Body>
    <exec xmlns="CBWSCallEngine"
        soapenv:encodingStyle="http://xml.apache.org/xml-soap/literalxml">
        <arguments>
            <CbOrderProduct xmlns="http://www.cbonline.nl/xsd">
                <Header>
                    <EndpointNm>xxxxxxx</EndpointNm>
                    <Certificaat>xxxxxxxx</Certificaat>
                </Header>
                <Detail>
                    <EAN>9789084999912</EAN>
                    <OrderReference>1988763767</OrderReference>
                    <ClientId>K Koning</ClientId>
                    <ReadingMethods>CR</ReadingMethods>
                    <RetailerId>xxxxxx</RetailerId>
                </Detail>
            </CbOrderProduct >
        </arguments>
    </exec>
</soapenv:Body> 
```

我把这个带有已知函数的文件放到一个数组中。然后我启动服务，但您没有听到任何响应。

```
$url = "https://tst.eboekhuis.nl/cbwebs/CBWSCallEngine?WSDL";
$client = new SoapClient($url);
$message = xml2array(file_get_contents('vraag.xml'));
echo $result = $client->exec($message); 
```

谁能帮帮我？修复了非常感谢。

广告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-01T13:11:25.753

最后我解决了这个问题.. :)

下面的代码肯定会起作用。

```
$xml = '<soapenv:Envelope
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soapenv:Body>
<exec xmlns="CBWSCallEngine"
soapenv:encodingStyle="http://xml.apache.org/xml-soap/literalxml">
<arguments>
<CbOrderProduct xmlns="http://www.cbonline.nl/xsd">
<Header>
<EndpointNm>*********</EndpointNm>
<Certificaat>***********</Certificaat>
</Header>
<Detail>
<EAN>9789084999967</EAN>
<OrderReference>1988763767</OrderReference>
<ReadingMethods>D</ReadingMethods>
<RetailerId>12345</RetailerId>
</Detail>
</CbOrderProduct>
</arguments>
</exec>
</soapenv:Body>
</soapenv:Envelope>';

$sUrl = 'https://tst.eboekhuis.nl/cbwebs/CBWSCallEngine?WSDL';

// set parameters

 $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL,$sUrl);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $xml);
    $sOutput = curl_exec($ch);
    curl_close($ch);
    echo "<pre>";
    print_r($sOutput); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:48:51.307

当我打电话时`new SoapClient("https://tst.eboekhuis.nl/cbwebs/CBWSCallEngine?WSDL");`，我得到：致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从“ [https://tst.eboekhuis.nl/cbwebs/CBWSCallEngine?WSDL](https://tst.eboekhuis.nl/cbwebs/CBWSCallEngine?WSDL) ”加载：无法加载外部实体“ [https://tst.eboekhuis.nl/cbwebs/CBWSCallEngine?WSDL](https://tst.eboekhuis.nl/cbwebs/CBWSCallEngine?WSDL) ”我没有找到解决方案：[SOAP-ERROR：解析 WSDL：无法从 <URL> 加载](https://stackoverflow.com/questions/11082889/soap-error-parsing-wsdl-couldnt-load-from)

也许您应该尝试：[https](https://github.com/mikaelcom/WsdlToPhp) ://github.com/mikaelcom/WsdlToPhp 。我认为你的代码应该像：

```
error_reporting(E_ALL);
ini_set('display_errors', 1);
class CbOrderProduct
{
    var $header;
    var $detail;

    function __construct()
    {
                $this->header = new stdClass();
                $this->detail = new stdClass();
    }
    function setheader($endpoint,$Certificaat)
    {
        $this->header->EndpointNm = $endpoint;
        $this->header->Certificaat = $Certificaat;
    }   

    function setdetail($ean,$orderreference,$clienid,$readingmethods,$retailerid)
    {
                    $this->detail->EAN =$ean;
                    $this->detail->OrderReference = $orderreference;
                    $this->detail->ClientId = $clienid;
                    $this->detail->ReadingMethods = $readingmethods;
                    $this->detail->RetailerId = $retailerid;
    }   
}

class exec0Request {

    var $arguments;

    function __construct($arguments) 
    {
        $this->arguments = $arguments;
    }
}

$order = new CbOrderProduct();
$order->setheader('123','123abc');
$order->setdetail('9789084999912','1988763767','K Koning','CR','12345');
$request = new exec0Request($order);
$client = new SoapClient("https://tst.eboekhuis.nl/cbwebs/CBWSCallEngine?WSDL");
$result = $client->exec(new SoapParam($request, "exec0Request")); 
```

# tridion-2011 - 如何从 Tridion 文件系统中检索 PDF（文档）并从中创建多媒体组件

> ID：16141499
> 
> 赞同：1
> 
> 时间：2013-04-22T07:21:23.517
> 
> 标签：tridion-2011, tridion-core-services

我需要对现有的 PDF 组件进行更改。为此，我们在文件系统中创建一个与现有 PDF 同名的新 PDF，并删除原始 PDF。现在，更新后创建的新 PDF 需要存储为多媒体组件。在 Tridion 中，我们通常创建多媒体组件来将文档存储在 Tridion 文件系统中。有没有办法做相反的事情，即从 Tridion 文件系统中检索一个 PDF（文档）并从中创建一个多媒体组件？如果是这样，可以使用什么 API 来完成它？我们正在使用 SDL Tridion 2011 SP1 版本。请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:58:45.283

我不确定您尝试过什么或查看过什么，但请看一下这个问题/答案：

[使用元数据字段创建多媒体组件。使用核心服务](https://stackoverflow.com/questions/12190850/create-multimedia-component-with-metadata-fields-using-core-service)

或者

[http://amarchuk.blogspot.com/2011/11/creating-multimedia-component-through.html](http://amarchuk.blogspot.com/2011/11/creating-multimedia-component-through.html)

# ruby-on-rails - 保护 jwplayer 视频免受 rails 中的盗链

> ID：16141503
> 
> 赞同：2
> 
> 时间：2013-04-22T07:21:37.350
> 
> 标签：ruby-on-rails, jwplayer, hotlinking

我想检查来自浏览器的请求，然后将视频 cdn 链接公开给 jwplayer。我想从下载中制作硬视频。

我的路线代码是

```
 4   match "/assets/protect/:id.:format" => "streams#show" 
```

我的控制器代码是

```
 1 class StreamsController < ApplicationController
  2   def show
  3     self.response.headers["Location"] = Video.find(params[:id]).video.url.safe # here is the    condition if request is from browser
  4     render nothing: true, layout: false
  5   end
  6 end 
```

我的 JS 代码

```
 2     jwplayer("video-player-container").setup({
  3       file: "/assets/protect/<%= @video.id %>.flv",
  4       wmode: 'transparent',
  5       flashplayer: "/jwplayer/player.swf",
  6       players: [{ type: "flash", src: "/jwplayer/player.swf" }, { type: "html5" }]
  7     }); 
```

这是可能的还是任何其他替代解决方案？

问候

五

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:23:15.300

```
def show
  send_data Video.find(params[:id]).video.url.safe_url, type: "video/mp4", :disposition=>'inline'
end 
```

试试这个！

# php - 从 getArrayResult() 向数组添加额外的值

> ID：16141504
> 
> 赞同：1
> 
> 时间：2013-04-22T07:21:37.783
> 
> 标签：php, symfony, doctrine-orm

我有一个从数据库中获取实体的查询。其中一个字段是“文件名”。我的模型也知道网络路径，并有一个函数“getPath()”，它返回带有相关路径的文件名。

目前，我的数组返回如下：

```
Array
    (
        [id] => 359
        [thumb] => sound_thumb.png
        ...
    ) 
```

但我希望它是这样的：

```
Array
    (
        [id] => 359
        [thumb] => sound_thumb.png
        [path] => /path/to/file/sound_thumb.png
        ...
    ) 
```

有什么方法可以实现这一点`$query->getArrayResult();`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:41:44.087

不，您必须直接在您的实体中执行此操作。[这里](http://symfony.com/doc/2.0/cookbook/doctrine/file_uploads.html)有一个很棒的部分关于文件上传（下面的代码是从这个部分中提取的，并且是我通常用来处理我的实体中的文件路径的代码）。基本上，您可以添加一个`getAbsolutePath()`可以调用的方法来获取拇指的绝对路径。

```
/**
 * @ORM\Column(type="string", length=255, nullable=true)
 */
public $path;

public function getAbsolutePath()
{
    return null === $this->path
        ? null
        : $this->getUploadRootDir().'/'.$this->path;
}

public function getWebPath()
{
    return null === $this->path
        ? null
        : $this->getUploadDir().'/'.$this->path;
}

protected function getUploadRootDir()
{
    // the absolute directory path where uploaded
    // thumbs should be saved
    return __DIR__.'/../../../../web/'.$this->getUploadDir();
}

protected function getUploadDir()
{
    // get rid of the __DIR__ so it doesn't screw up
    // when displaying uploaded doc/image in the view.
    return 'uploads/thumbs';
} 
```

现在，您需要在查询中返回一个对象数组，并且您可以通过调用来访问绝对路径`$object->getAbsolutePath()`。

## 编辑

如果您确实需要使用以下方法返回数组`$query->getArrayResult()`：

`1`创建属性`$absolutePath`

`2``$absolutePath`每次更改路径时更新，使用 prePersist 和 preUpdate[生命周期事件](http://docs.doctrine-project.org/en/latest/reference/events.html#lifecycle-events)。

```
/**
 * @ORM\Column(type="string", nullable=true)
 */
public $absolutePath;

/**
 * @ORM\PrePersist
 * @ORM\PreUpdate
 */
public function updateAbsolutePath()
{
    $this->absolutePath = $this->getAbsolutePath();
} 
```

现在，你应该有：

```
Array
    (
        [id] => 359
        [thumb] => sound_thumb.png
        [path] => sound_thumb.png
        [absolutePath] => /path/to/file/sound_thumb.png
        ...
    ) 
```

# ubuntu - VMWare 终端中的 Ubuntu Server 停止更新

> ID：16141511
> 
> 赞同：1
> 
> 时间：2013-04-22T07:22:00.477
> 
> 标签：ubuntu, terminal

我在 VMWare Fusion 5 中运行 Ubuntu Server 12.10，没有 Xwin/GUI，只有裸终端。我在那里运行 top 这样我就可以密切关注正在加载服务器的内容，大约 10-15 分钟后，终端停止更新。如果我将焦点发送给它并按任意键，它将继续更新一段时间。就好像有一个屏幕保护程序一样。谷歌搜索这种行为，我能找到的只是从终端睡眠/暂停/休眠 Ubuntu 机器......不是我需要知道的。

有谁知道如何禁用此“屏幕保护程序”功能？

谢谢

*   巴尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:34:00.297

我严重怀疑这是终端屏幕保护程序问题。

我曾经遇到过类似的问题，几分钟后终端屏幕变黑了。解决方案是升级 VMware 主机。

无论如何，如果这确实是导致屏幕变为空白并冻结 VMware 无法从客户端接收更新的输入问题，请尝试以下命令来禁用终端空白屏幕：

```
setterm -blank 0 
```

希望它能解决你的问题。

# java - 使用 Java Rally REST API 查询可能的缺陷字段的允许值

> ID：16141512
> 
> 赞同：2
> 
> 时间：2013-04-22T07:22:03.013
> 
> 标签：java, rest, rally

我需要检查该字段是否具有允许的值，如果是，则需要使用 Java Rally REST API 从系统获取所有允许的值，例如：检查严重性是否具有允许的值，如果是，则获取允许的值，例如主要问题，小问题等来自拉力赛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:02:40.907

您可以查询 TypeDefinition 类型。在您的 fetch 中包含 Attributes 和 AllowedValues。

```
QueryRequest defectTypeRequest = new QueryRequest("typedefinition");
defectTypeRequest.setFetch(new Fetch("Attributes,Name,AllowedValues,StringValue"));
defectTypeRequest.setQueryFilter(new QueryFilter("TypePath", "=", "defect"));
QueryResponse queryResponse = restApi.query(defectTypeRequest); 
```

查看[WSAPI 文档](https://rally1.rallydev.com/slm/doc/webservice/)中的 TypeDefinition、AttributeDefinition 和 AllowedAttributeValue 对象，以获取每个可用字段的完整列表。

# php - 如何将此sql查询简化为一个

> ID：16141515
> 
> 赞同：0
> 
> 时间：2013-04-22T07:22:09.127
> 
> 标签：php, mysql, sql, join

是否可以将这 3 个查询放在一个 sql 查询中？

我已经研究过 JOIN，但无法弄清楚如何计算展示次数和点击次数 - 见下文

```
$date_where = "   rec_use_date > '2013-04-16 17:05:00' AND rec_use_date < '2013-04-23 00:00:00'  ";

    $q = " SELECT * FROM tracking_table ";
    $q .= " WHERE ".$date_where;

    $o =0;
    $result = mysql_query($q); 
    while ($db = mysql_fetch_assoc($result)) {

        $rowKey = md5($db['rec_trk_id']);

        $rows[$rowKey]['use_ip'] = $db['rec_use_ip'];
        $rows[$rowKey]['ad_code'] = $db['rec_trk_id'];
        $rows[$rowKey]['ad_location'] = $db['rec_tar_page'];

        $q_impressions = mysql_query("SELECT COUNT(*) FROM tracking_table WHERE rec_trk_id = '{$db['rec_trk_id']}' AND rec_use_ip LIKE 'Ad loaded' AND ".$date_where) or die(mysql_error());
        $db_impressions = mysql_fetch_assoc($q_impressions);
        $rows[$rowKey]['impressions'] = $db_impressions['COUNT(*)'];
        ++$o;

        $q_clicks = mysql_query("SELECT COUNT(*) FROM tracking_table WHERE rec_trk_id = '{$db['rec_trk_id']}' AND rec_use_ip NOT LIKE 'Ad loaded' AND ".$date_where) or die(mysql_error());
        $db_clicks = mysql_fetch_assoc($q_clicks);
        $rows[$rowKey]['clicks'] = $db_clicks['COUNT(*)'];

        $rows[$rowKey]['conversion'] = round((($db_clicks['COUNT(*)']/$db_impressions['COUNT(*)'])*100),2);

        ++$o;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:25:34.820

你可以这样做：

```
SELECT 
  SUM(CASE WHEN rec_use_ip LIKE     'Ad loaded' THEN 1 ELSE 0 END) AS LoadedCounts,
  SUM(CASE WHEN rec_use_ip NOT LIKE 'Ad loaded' THEN 1 ELSE 0 END) AS NotLoadedCounts
FROM tracking_table 
WHERE rec_trk_id = '{$db['rec_trk_id']}' AND ".$date_where 
```

**请注意：**请停止使用`mysql_*`扩展，它们已被弃用，并且您的代码这样容易受到[**SQL 注入**](http://en.wikipedia.org/wiki/SQL_injection)的攻击。请改用[PDO](http://php.net/manual/en/book.pdo.php)或准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:27:49.077

你可以使用这样的子查询

```
SELECT
    tt.*,
    tt1.c AS count_1
FROM tracking_table tt
LEFT OUTER JOIN (
    SELECT
        rec_trk_id,
        COUNT(*) AS c
    FROM tracking_table
    WHERE rec_use_ip LIKE 'Ad loaded'
        AND rec_use_date > '2013-04-16 17:05:00'
        AND rec_use_date < '2013-04-23 00:00:00'
    GROUP BY rec_trk_id
) AS tt1
    ON tt1.rec_trk_id = tt.rec_trk_id 
```

# python - 创建多类 API

> ID：16141520
> 
> 赞同：0
> 
> 时间：2013-04-22T07:22:25.327
> 
> 标签：python, google-app-engine, python-2.7, google-cloud-endpoints

我正在尝试按照源代码中的说明在 Google Cloud Endpoints 中创建一个多类 API。不幸`endpoints.api_server`的是因为这个错误拒绝了我的课程：

> SPI 在一个配置中注册了多个类（`Class1`和`Class2`）。每个调用`register_spi`应该只包含来自单个类的方法。多次调用多个课程。

# php - 如何只更新php中的修改值

> ID：16141521
> 
> 赞同：0
> 
> 时间：2013-04-22T07:22:25.363
> 
> 标签：php, mysql, codeigniter

我正在使用 Codeigniter 构建网站。该网站有一个名为“更新记录”的选项，允许用户更新 50 个不同的值。更新页面具有旧值以及一个空文本框，供用户输入新值。即使用户实际上没有更新任何内容，更新整个记录也是没有意义的（网站使用 MySQL 数据库）。我尝试使用具有原始值的隐藏表单字段，并尝试仅更新修改后的字段。虽然它工作正常，但每次将旧值与新值进行比较并且只有在发生变化时才更新时，这个过程看起来都很漫长。

有没有更好的方法来做到这一点（使用或不使用codeigniter）？只是好奇想知道。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:28:10.023

我将解析 post 数组并删除任何没有更新值的条目（这意味着输入被提交为空）。

然后你只能更新修改过的记录

我不知道代码点火器如何在表单提交后将 post 数组传递给控制器​​，但你可以做类似的事情

```
<?php
foreach ($postData as $key => $value) {
    if (empty($value)) {
        unset($postData[$key]);
    }
} 
```

唯一会失败的地方是，如果您合法地想要将空记录存储为更新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:45:12.807

我使用 javascript 只过滤更新的值

```
1 - I use hashes.js to calculate a sha1 when page loaded. store it in hidden or just a variable, or you can do sha in the server.
2 - I also do a snapshot of the form in array when page loaded. I put all my input in one class and use jQuery('forminputs').each to put them in array.
3 - when user click submit, first I do another snapshot of the form as No. 2 and compare the hash. if the hash diff, I use php.js get the updated value php.array_diff_assoc(newsnapshot, oldsnapshot). and post this to server. 
```

虽然这些看起来像很多计算，但实际上它在 Firefox 或 chrome 中一点也不慢（永远不要尝试 IE）。

# java - Java 同步的奇怪行为（锁定、条件）

> ID：16141526
> 
> 赞同：1
> 
> 时间：2013-04-22T07:22:38.257
> 
> 标签：java, multithreading, synchronization

我只是想模拟一个简单的读者/作家场景。

这是代码：

```
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.Executor;
import java.util.concurrent.Executors;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class ReadersWriters implements Solution {
    private final static Lock readerLock = new ReentrantLock();
    private final static Lock writerLock = new ReentrantLock();
    private final static Condition noReader = readerLock.newCondition();
    private static CountDownLatch countDown;
    private static volatile int readerCount=0;

    public static class Reader implements Runnable {
        private static int count=1;
        private int id = count++;

        @Override
        public void run() {
            int readCount = (int) (Math.random()*20);
            while (readCount > 0) {
                readCount--;
                writerLock.lock();
                try {
                    readerLock.lock();
                    try {
                        readerCount++;
                    } finally {
                        readerLock.unlock();
                    }
                } finally {
                    writerLock.unlock();
                }
                System.out.println("Reader "+id+" reading ("+readerCount+" readers)");
                try {
                    Thread.sleep((long) (Math.random()*500));
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("Reader "+id+" done");
                readerLock.lock();
                try {
                    readerCount--;
                    noReader.signalAll();
                } finally {
                    readerLock.unlock();
                }
                try {
                    Thread.sleep((long) (Math.random()*500));
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            countDown.countDown();
        }
    }

    public static class Writer implements Runnable {
        private static int count=1;
        private int id = count++;

        @Override
        public void run() {
            int writeCount = (int) (Math.random()*20);
            while (writeCount>0) {
                writeCount--;
                writerLock.lock();
                try {
                    readerLock.lock();
                    try {
                        while (readerCount>0) {
                            noReader.await();
                        }
                        System.out.println("Writer "+id+" writing");
                        try {
                            Thread.sleep((long) (Math.random()*500));
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        System.out.println("Writer "+id+" done");
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    } finally {
                        readerLock.unlock();
                    }
                } finally {
                    writerLock.unlock();
                }
                try {
                    Thread.sleep((long) (Math.random()*500));
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            countDown.countDown();
        }
    }

    public static void main(String []args) {
        Executor exec = Executors.newCachedThreadPool();
        int numReaders = 10;
        int numWriters = 4;
        countDown = new CountDownLatch(numReaders+numWriters);
        for (int i=0; i<numReaders; i++) {
            exec.execute(new Reader());
        }
        for (int i=0; i<numWriters; i++) {
            exec.execute(new Writer());
        }
        try {
            countDown.await();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

我知道我也可以使用`ReadWriteLock`，但这不是重点......

我的问题是在日志中，我看到这样的事情：

```
Writer 4 writing
Writer 4 done
Reader 9 reading (1 readers)
Reader 8 reading (3 readers)
Reader 5 reading (2 readers)
Reader 8 done
Reader 5 done
Reader 9 done
Writer 3 writing
Writer 3 done 
```

而且我真的不明白这怎么会发生......只是控制台打印混淆了还是我真的在这里遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:27:58.163

您`System.out.println`在阅读器中的调用未同步。究竟是什么让你担心？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:55:36.377

我相信您的问题与这几行有关吗？

```
Reader 9 reading (1 readers)
Reader 8 reading (3 readers)
Reader 5 reading (2 readers) 
```

您希望它是 1,2 和 3 个读者。

简而言之，问题是因为您的打印不是同步块的一部分。

根据您的代码给出一个可能的原因示例，这里是：

```
writerLock.lock();
try {
    readerLock.lock();
    try {
        readerCount++;
    } finally {
        readerLock.unlock();
    }
} finally {
    writerLock.unlock();
}
System.out.println("Reader "+id+" reading ("+readerCount+" readers)"); 
```

对于上面这段代码，简而言之，更新`readerCount`由`writerLock`. 但是有可能：

```
READER8                         READER5
(readerCount = 1 at this point)

lock writerLock
readerCount++  (=2)
unlock writerLock
                                lock writerLock               
                                update readerCount to 3
                                unlock writerLock

sysout of readerCount (3)
lock writerLock
readerCount-- (=2)

                                sysout of readerCount (2)
unlock writerLock
                                lock writerLock
                                readerCount-- (=1)
                                unlock writerLock 
```

不难想象为什么这个数字看起来很奇怪。

将 system out 语句放在锁定范围内，就在 readerCount++ 之后，会给你预期的结果。

# javascript - 多选复选框值

> ID：16141529
> 
> 赞同：0
> 
> 时间：2013-04-22T07:23:00.997
> 
> 标签：javascript, checkbox

我无法让我的 var 接受多个输入。

当我选择一个复选框时，它会显示我的值，但是，当我再次选择时，我得到了一个`undefined`错误。

**JavaScript**

```
window.onload = function() {
  var input= document.querySelectorAll('input#add2basket');
   var radio= document.querySelectorAll('input#hi');
    for (var j=0; j < radio.length; ++j){//loops over buttons
        radio[j].onclick = function (){// find radio button
var input = findChecked(this.name);
alert (input.value)
return false;
// determine pizza size
//var size = input.value==='1'?‘Small':(input.value==='2'?'Regular':'Large');
// determine pizza price
//var price =Number(input.getAttribute('data‐price'));
// add a ‘new’ pizza to the basket
//addToBasket(newPizza(this.name,size, price));
};
};  

function findChecked(name){
var css = 'input#hi[name="'+name+'"]';
var inputs = document.querySelectorAll(css);
var checked = _.filter(inputs, function (input){
document.write('<pre>'+input.checked+'</pre>')

return input.checked;

});
return checked.length===1?checked[0]:null;
}

} 
```

**HTML**

```
 <div>
                <fieldset>
                    <legend class="Topping">Topping</legend>

                    <ul>

                        <li class="lastset"><input class="cbox" id="hi" name=
                        "top" type="checkbox" value="1"> <label class=
                        "box">Double Cheese</label></li>

                        <li class="lastset"><input class="cbox" id="hi" name=
                        "top" type="checkbox" value="2"> <label class=
                        "box">Peppers</label></li>

                        <li class="lastset"><input class="cbox" id="hi" name=
                        "top" type="checkbox" value="3"> <label class=
                        "box">Pepperoni</label></li>

                        <li class="lastset"><input class="cbox" id="hi" name=
                        "top" type="checkbox" value="4"> <label class=
                        "box">Olives</label></li>

                        <li class="lastset"><input class="cbox" id="hi" name=
                        "top" type="checkbox" value="5"> <label class=
                        "box">Beef</label></li>

                        <li class="lastset"><input class="cbox" id="hi" name=
                        "top" type="checkbox" value="6"> <label class=
                        "box">Seafood</label></li>
                    </ul>
                </fieldset>
            </div><!-- end topping -->
        </form>

        <div id="actionbtn">
            <!--== action buttons==-->
            <input class="apply"  type="button" value=
            "Back To Menu"> 
            <input class="apply" name="top" id="add2basket" id="actionbtn2" type="button"
            value="Proceed">
        </div><!--==end of action buttons==--> 
```

当我打印时`input.checked`，它显示选定的框为真，但我从那里去哪里

请仅使用 JavaScript 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:14:33.327

只需按类名选择复选框（并且不要重复 id）：

```
window.onload = function () {
    var input = document.querySelectorAll('input#add2basket');
    var radio = document.querySelectorAll('input.cbox');

    for (var j = 0; j < radio.length; j++) {
        radio[j].onchange = function () {
            var input = findChecked(this.name);
            return false;
        };
    };

    function findChecked(name) {
        var css = 'input.cbox:checked';
        var inputs = document.querySelectorAll(css);
        return inputs;
    }
} 
```

`:checked`另外，您可以仅使用伪选择器简化选中的选择。

[http://jsfiddle.net/BPFTp/1/](http://jsfiddle.net/BPFTp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:39:28.920

该属性`id`在整个文档中必须是唯一的。

```
<li class="lastset"><input class="cbox" id="hi" name=
                    "top" type="checkbox" value="6"> <label class=
                    "box">Seafood</label></li> 
```

更新代码：

```
<li class="lastset"><input class="cbox" id="hi_1" name=
                    "top" type="checkbox" value="6"> <label class=
                    "box">Seafood</label></li> 
```

（如果您真的需要标签中的 id，请为每个人执行此操作并给`li`每个人自己的 ID`li``li`

要获取所有输入，请使用不同的选择器，例如`class`-attribute：

```
var css = 'input.cbox[name="'+name+'"]';
var radio= document.querySelectorAll('input.cbox'); 
```

# jquery - 具有自动消耗的内容可编辑 div

> ID：16141533
> 
> 赞同：0
> 
> 时间：2013-04-22T07:23:08.507
> 
> 标签：jquery, html, css

我正在使用 contenteditable=true 的 div。它可以像这样自动扩展：http: [//html5demos.com/contenteditable](http://html5demos.com/contenteditable)

但是我需要的是扩展应该是反向的意思，如果我按回车键，div应该扩展到**上边而不是向下边**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:29:51.220

我不确定你可以这样做，因为 html 文档从左到右和从上到下扩展，你可以做的是在创建新行时向下滚动......这会产生 div 扩展的错觉向上。

尝试在函数中添加这个：

```
window.scrollBy(0,fontHeight); 
```

或者这个使用jQuery：

```
$('div[contenteditable=true]').animate({
scrollTop: '+=xx' //xx= fontHeight
}, 1000); 
```

# django - “DatabaseWrapper”对象没有属性“get_server_version”

> ID：16141534
> 
> 赞同：1
> 
> 时间：2013-04-22T07:23:12.720
> 
> 标签：django, django-syncdb, syncdb

我一直在使用 django-1.4.1。我更新到 django1.5。

我输入了 ' `manage.py sql myapp`' 或 ' `manage.py syncdb`'

然后，我得到了这个错误“ `'DatabaseWrapper' object has no attribute 'get_server_version'`”

你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:07:37.793

只需尝试重新安装 django。好像您已经在 django 1.4 之上安装了 django 1.5，这会导致错误。

# android - 我应该如何从 ListView 中获取列号？

> ID：16141537
> 
> 赞同：-2
> 
> 时间：2013-04-22T07:23:20.483
> 
> 标签：android, listview

我的 ListView 包含许多块，排列方式看起来像列。

目前，我可以找到行号，但我正在努力获取列。

我想我正在寻找一种方法来发现

*   用户点击的视图
*   水龙头的水平坐标并从中计算出来。
*   其他一些我没有想到的方法。

真正的问题：我应该如何从 ListView 中获取列号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:38:44.173

您可以尝试`onClick(View view)`从您已绑定到列表视图的适配器类中实现分接视图的方法。

这是一个例子：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ContactHolder holder = null;

    if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new ContactHolder();
        holder.imgPhone = (ImageView) row.findViewById(R.id.imgPhone);
        holder.imgPhone.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                Intent callIntent = new Intent(Intent.ACTION_CALL);

                callIntent.setData(Uri.parse("tel:" + contactArrayList.get(position).phone_number));
                context.startActivity(callIntent);
            }
        });

        row.setTag(holder);
    } else {
        holder = (ContactHolder) row.getTag();

    return row;
} 
```

# perl - 我想替换文件 1 中的一些字符，并想用 Perl 将替换字符的输出写入文件 2

> ID：16141539
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:23:37.897
> 
> 标签：perl

我有文件`actual.out.tmp`，我想替换一些字符并将输出发送到文件`actual.out`。我尝试了以下代码：

```
open(ACTUAL, "$tmpDir/data/actual_out.tmp");
my $pattern="";
while(<ACTUAL>)
{   
 $pattern .= $_;
}   
close(ACTUAL);
$pattern=~s/@[^[]*/@/g;
$rc= systemTestSetup::execute("touch $tmpDir/data/actual_out");
open(ACTUAL1, ">$tmpDir/data/actual_out");
print ACTUAL1 ;

close(ACTUAL1);
sleep(10); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:30:15.443

我相信该行`print ACTUAL1;`应该是`print ACTUAL1 $pattern`，因为那是您进行搜索和替换的地方（`$_`我认为仍然有原始文件的最后一行）。

可能还有其他问题。

# service - 在 VB6 中创建服务描述

> ID：16141543
> 
> 赞同：2
> 
> 时间：2013-04-22T07:23:48.447
> 
> 标签：service, vb6

我正在创建一个程序，它将创建一个带有描述的服务。我当前的代码能够创建服务但无法创建其描述。我当前的代码

模块：

```
Option Explicit
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Private Const ERROR_SERVICE_DOES_NOT_EXIST = 1060&

Private Const SERVICE_WIN32_OWN_PROCESS = &H10&
'Private Const SERVICE_WIN32_SHARE_PROCESS = &H20&
'Private Const SERVICE_WIN32 = SERVICE_WIN32_OWN_PROCESS + _
                                 SERVICE_WIN32_SHARE_PROCESS
'Private Const SERVICE_ACCEPT_STOP = &H1
'Private Const SERVICE_ACCEPT_PAUSE_CONTINUE = &H2
'Private Const SERVICE_ACCEPT_SHUTDOWN = &H4
Private Const SC_MANAGER_CONNECT = &H1&
Private Const SC_MANAGER_CREATE_SERVICE = &H2&
'Private Const SC_MANAGER_ENUMERATE_SERVICE = &H4
'Private Const SC_MANAGER_LOCK = &H8
'Private Const SC_MANAGER_QUERY_LOCK_STATUS = &H10
'Private Const SC_MANAGER_MODIFY_BOOT_CONFIG = &H20
Private Const STANDARD_RIGHTS_REQUIRED = &HF0000
Private Const SERVICE_QUERY_CONFIG = &H1&
Private Const SERVICE_CHANGE_CONFIG = &H2&
Private Const SERVICE_QUERY_STATUS = &H4&
Private Const SERVICE_ENUMERATE_DEPENDENTS = &H8&
Private Const SERVICE_START = &H10&
Private Const SERVICE_STOP = &H20&
Private Const SERVICE_PAUSE_CONTINUE = &H40&
Private Const SERVICE_INTERROGATE = &H80&
Private Const SERVICE_USER_DEFINED_CONTROL = &H100&
Private Const SERVICE_ALL_ACCESS = (STANDARD_RIGHTS_REQUIRED Or _
                                       SERVICE_QUERY_CONFIG Or _
                                       SERVICE_CHANGE_CONFIG Or _
                                       SERVICE_QUERY_STATUS Or _
                                       SERVICE_ENUMERATE_DEPENDENTS Or _
                                       SERVICE_START Or _
                                       SERVICE_STOP Or _
                                       SERVICE_PAUSE_CONTINUE Or _
                                       SERVICE_INTERROGATE Or _
                                       SERVICE_USER_DEFINED_CONTROL)
'Private Const SERVICE_AUTO_START As Long = 2
Private Const SERVICE_DEMAND_START As Long = 3
Private Const SERVICE_ERROR_NORMAL As Long = 1
Private Const ERROR_INSUFFICIENT_BUFFER = 122&
Private Enum SERVICE_CONTROL
    SERVICE_CONTROL_STOP = 1&
    SERVICE_CONTROL_PAUSE = 2&
    SERVICE_CONTROL_CONTINUE = 3&
    SERVICE_CONTROL_INTERROGATE = 4&
    SERVICE_CONTROL_SHUTDOWN = 5&
End Enum
Public Enum SERVICE_STATE
    UNINSTALLED = &H0
    STOPPED = &H1
    START_PENDING = &H2
    STOP_PENDING = &H3
    RUNNING = &H4
    CONTINUE_PENDING = &H5
    PAUSE_PENDING = &H6
    PAUSED = &H7
End Enum
Private Type SERVICE_STATUS
    dwServiceType As Long
    dwCurrentState As Long
    dwControlsAccepted As Long
    dwWin32ExitCode As Long
    dwServiceSpecificExitCode As Long
    dwCheckPoint As Long
    dwWaitHint As Long
End Type
Public Type QUERY_SERVICE_CONFIG
    dwServiceType As Long
    dwStartType As Long
    dwErrorControl As Long
    lpBinaryPathName As Long
    lpLoadOrderGroup As Long
    dwTagId As Long
    lpDependencies As Long
    lpServiceStartName As Long
    lpDisplayName As Long
End Type
Private Declare Function OpenSCManager _
      Lib "advapi32" Alias "OpenSCManagerA" _
      (ByVal lpMachineName As String, ByVal lpDatabaseName As String, _
      ByVal dwDesiredAccess As Long) As Long
Private Declare Function CreateService _
      Lib "advapi32" Alias "CreateServiceA" _
      (ByVal hSCManager As Long, ByVal lpServiceName As String, _
      ByVal lpDisplayName As String, ByVal dwDesiredAccess As Long, _
      ByVal dwServiceType As Long, ByVal dwStartType As Long, _
      ByVal dwErrorControl As Long, ByVal lpBinaryPathName As String, _
      ByVal lpLoadOrderGroup As String, ByVal lpdwTagId As String, _
      ByVal lpDependencies As String, ByVal lp As String, _
      ByVal lpPassword As String) As Long
Private Declare Function DeleteService _
      Lib "advapi32" (ByVal hService As Long) As Long
Private Declare Function CloseServiceHandle _
      Lib "advapi32" (ByVal hSCObject As Long) As Long
Private Declare Function OpenService _
      Lib "advapi32" Alias "OpenServiceA" _
      (ByVal hSCManager As Long, ByVal lpServiceName As String, _
      ByVal dwDesiredAccess As Long) As Long   '** Change SERVICE_NAME as needed
Private Declare Function QueryServiceConfig Lib "advapi32" _
      Alias "QueryServiceConfigA" (ByVal hService As Long, _
      lpServiceConfig As QUERY_SERVICE_CONFIG, _
      ByVal cbBufSize As Long, pcbBytesNeeded As Long) As Long
Private Declare Function QueryServiceStatus Lib "advapi32" _
    (ByVal hService As Long, lpServiceStatus As SERVICE_STATUS) As Long
Private Declare Function ControlService Lib "advapi32" _
        (ByVal hService As Long, ByVal dwControl As SERVICE_CONTROL, _
        lpServiceStatus As SERVICE_STATUS) As Long
Private Declare Function StartService Lib "advapi32" _
        Alias "StartServiceA" (ByVal hService As Long, _
        ByVal dwNumServiceArgs As Long, ByVal lpServiceArgVectors As Long) As Long
Private Declare Function NetWkstaUserGetInfo Lib "Netapi32" (ByVal Reserved As Any, ByVal Level As Long, lpBuffer As Any) As Long
Private Declare Function NetApiBufferFree Lib "Netapi32" (ByVal lpBuffer As Long) As Long

Private Declare Function lstrcpy Lib "kernel32" Alias "lstrcpyA" (ByVal lpString1 As Any, ByVal lpString2 As Any) As Long
Private Declare Function lstrlen Lib "kernel32" Alias "lstrlenA" (ByVal lpString As Any) As Long
Private Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (Destination As Any, Source As Any, ByVal Length As Long)
Private Declare Function lstrlenW Lib "kernel32" (ByVal lpString As Long) As Long

Private Enum InfoLevel
    SERVICE_CONFIG_DESCRIPTION = 1
    SERVICE_CONFIG_FAILURE_ACTIONS = 2
End Enum

Private Declare Function ChangeServiceConfig2 Lib "advapi32.dll" Alias "ChangeServiceConfig2W" (ByVal hService As Long, ByVal dwInfoLevel As InfoLevel, lpInfo As Any) As Boolean

Private Type SERVICE_DESCRIPTIONW
    lpDescription As String
End Type

' This function installs service on local computer
' It returns nonzero value on error
Public Function CreateNTService(Title As String, Nick As String, Link As String, Description As String) As Long
Dim lp As SERVICE_DESCRIPTIONW
lp.lpDescription = Description
Dim hSCManager As Long
Dim hService As Long, DomainName As String
Dim CSC         As Long

hSCManager = OpenSCManager(vbNullString, vbNullString, _
                       SC_MANAGER_CREATE_SERVICE)
If hSCManager <> 0 Then
' Install service to manual start. To set service to autostart
' replace SERVICE_DEMAND_START to SERVICE_AUTO_START
    hService = CreateService(hSCManager, Nick, _
                       Title, SERVICE_ALL_ACCESS, _
                       SERVICE_WIN32_OWN_PROCESS, _
                       SERVICE_DEMAND_START, SERVICE_ERROR_NORMAL, _
                       Link, vbNullString, _
                       vbNullString, vbNullString, "LocalSystem", _
                        "")
    CSC = ChangeServiceConfig2(hService, 1, lp)
    If hService <> 0 Then
        CloseServiceHandle hService
    Else
        CreateNTService = Err.LastDllError
    End If

    CloseServiceHandle hSCManager
Else
    CreateNTService = Err.LastDllError
End If
End Function 
```

形式：

```
Private Sub Form_Load()
CreateNTService "a", "a", "d:\link", "description"
End
End Sub 
```

问题是这段代码能够创建一些描述，但创建的描述是“敤捳楲瑰潩n”而不是“描述”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:01:48.970

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:09:11.970

The problem that I see is that whilst you are correctly using a Unicode version of ChangeServiceConfig2, you are declaring the UDT with a String member. Unfortunately, when VB sees a String type, it automatically converts it from Unicode to the local code page. This messes up your description. The work around is to declare the structuion with a Long member, and then set this value to that of the string's pointer, e.g.

```
Option Explicit

Private Const STANDARD_RIGHTS_REQUIRED = &HF0000
Private Const SERVICE_WIN32_OWN_PROCESS = &H10&
Private Const SERVICE_QUERY_CONFIG = &H1&
Private Const SERVICE_CHANGE_CONFIG = &H2&
Private Const SERVICE_QUERY_STATUS = &H4&
Private Const SERVICE_ENUMERATE_DEPENDENTS = &H8&
Private Const SERVICE_START = &H10&
Private Const SERVICE_STOP = &H20&
Private Const SERVICE_PAUSE_CONTINUE = &H40&
Private Const SERVICE_INTERROGATE = &H80&
Private Const SERVICE_USER_DEFINED_CONTROL = &H100&
Private Const SERVICE_ALL_ACCESS = (STANDARD_RIGHTS_REQUIRED Or _
                                       SERVICE_QUERY_CONFIG Or _
                                       SERVICE_CHANGE_CONFIG Or _
                                       SERVICE_QUERY_STATUS Or _
                                       SERVICE_ENUMERATE_DEPENDENTS Or _
                                       SERVICE_START Or _
                                       SERVICE_STOP Or _
                                       SERVICE_PAUSE_CONTINUE Or _
                                       SERVICE_INTERROGATE Or _
                                       SERVICE_USER_DEFINED_CONTROL)
Private Const SERVICE_DEMAND_START As Long = 3
Private Const SERVICE_ERROR_NORMAL As Long = 1

Private Const SC_MANAGER_CREATE_SERVICE = &H2&

Private Declare Function OpenSCManager _
      Lib "advapi32" Alias "OpenSCManagerA" _
      (ByVal lpMachineName As String, ByVal lpDatabaseName As String, _
      ByVal dwDesiredAccess As Long) As Long
Private Declare Function CreateService _
      Lib "advapi32" Alias "CreateServiceA" _
      (ByVal hSCManager As Long, ByVal lpServiceName As String, _
      ByVal lpDisplayName As String, ByVal dwDesiredAccess As Long, _
      ByVal dwServiceType As Long, ByVal dwStartType As Long, _
      ByVal dwErrorControl As Long, ByVal lpBinaryPathName As String, _
      ByVal lpLoadOrderGroup As String, ByVal lpdwTagId As String, _
      ByVal lpDependencies As String, ByVal lp As String, _
      ByVal lpPassword As String) As Long

Private Declare Function CloseServiceHandle _
      Lib "advapi32" (ByVal hSCObject As Long) As Long

Private Enum InfoLevel
    SERVICE_CONFIG_DESCRIPTION = 1
    SERVICE_CONFIG_FAILURE_ACTIONS = 2
End Enum

Private Declare Function ChangeServiceConfig2 Lib "advapi32.dll" Alias "ChangeServiceConfig2W" (ByVal hService As Long, ByVal dwInfoLevel As InfoLevel, ByRef lpInfo As SERVICE_DESCRIPTIONW) As Boolean

Private Type SERVICE_DESCRIPTIONW
    lpDescription As Long
End Type

' This function installs service on local computer
' It returns nonzero value on error
Public Function CreateNTService(ByRef Title As String, ByRef ServiceName As String, ByRef BinaryPath As String, ByRef Description As String) As Long

    Dim hSCManager      As Long
    Dim hService        As Long
    Dim DomainName      As String
    Dim CSC             As Long
    Dim lp              As SERVICE_DESCRIPTIONW

    hSCManager = OpenSCManager(vbNullString, vbNullString, _
                           SC_MANAGER_CREATE_SERVICE)

    If hSCManager <> 0 Then
    ' Install service to manual start. To set service to autostart
    ' replace SERVICE_DEMAND_START to SERVICE_AUTO_START
        hService = CreateService(hSCManager, ServiceName, _
                           Title, SERVICE_ALL_ACCESS, _
                           SERVICE_WIN32_OWN_PROCESS, _
                           SERVICE_DEMAND_START, SERVICE_ERROR_NORMAL, _
                           BinaryPath, vbNullString, _
                           vbNullString, vbNullString, "LocalSystem", _
                            "")

        lp.lpDescription = StrPtr(Description) ' Set the string pointer.
        CSC = ChangeServiceConfig2(hService, 1, lp)
        If hService <> 0 Then
            CloseServiceHandle hService
        Else
            CreateNTService = Err.LastDllError
        End If

        CloseServiceHandle hSCManager
    Else
        CreateNTService = Err.LastDllError
    End If

End Function 
```

# javascript - 在 JavaScript 中检测 WebKit 设备的物理屏幕尺寸

> ID：16141545
> 
> 赞同：7
> 
> 时间：2013-04-22T07:23:54.110
> 
> 标签：javascript, css, webkit, responsive-design

我想在客户端 JavaScript 代码中按屏幕宽度对设备进行分类

*   所有设备都适合一只手（小于 7 英寸）到移动类别

*   将其他设备视为桌面设备

*   Fallback：将不支持必要 API 的设备视为移动设备

问题

*   我可以使用哪些相关的 JavaScript 和 CSS API 来检测屏幕物理尺寸？请注意，旧版浏览器不一定支持这些 API，因为有安全的回退。此外，我也不关心旧版桌面浏览器。

Firefox 支持是可选的 - 如果它们已经有兼容的 API。

请注意，这是关于**物理尺寸，而不是像素尺寸**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-02T18:07:10.897

没有[直接的方法](https://stackoverflow.com/questions/12051071/detect-physical-dimension-of-monitor "javascript - 检测监视器的物理尺寸 - 代码日志")来获取以英寸为单位的屏幕尺寸，但有一些解决方法可以使用屏幕密度来查找设备尺寸。它并不完美，但您并不需要知道 5 位有效数字的确切大小。此外，通常最好简单地使用像素值，IMO。

### HTML

制作一个测试 div，然后查看显示的像素数以获得像素密度，然后在计算中使用它。[这应该可以工作，假设您的浏览器/操作系统配置正确（它在这个问题](https://stackoverflow.com/questions/12051071/detect-physical-dimension-of-monitor "javascript - 检测监视器的物理尺寸 - 代码日志")中不起作用，但它在我的计算机上半英寸以内）。

***编辑：这是 100% 错误的。CSS 中的英寸/厘米测量值并非基于实际的物理测量值。它们基于精确转换（1 英寸 = 96 像素，1 厘米 = 37.8 像素）。我很抱歉。***

### CSS

检测物理屏幕大小的最佳方法是使用 CSS 媒体查询。和查询可用于在 或 中`min-resolution`获取分辨率：`max-resolution``dpi``dpcm`

```
@media (min-resolution: 300dpi){
  // styles
} 
```

将它与`min-device-width`and`max-device-width`查询结合起来，你会得到类似的东西：

```
@media (resolution: 326dpi) and (device-width: 640) and (device-height: 960){
    // iPhone
} 
```

问题是，如果你想定位 7 英寸设备，你必须有许多分辨率和相应的宽度，这可能会变得复杂。

了解更多信息：

*   [MDN- CSS 媒体查询](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries "CSS 媒体查询- Web 开发人员指南 |  MDN")
*   [MDN-分辨率](https://developer.mozilla.org/en-US/docs/Web/CSS/resolution "<分辨率> - CSS |  MDN")
*   [“动员”指南](http://docs.webplatform.org/wiki/tutorials/mobile_mobifying "移动修改 - 教程 - WPD - WebPlatform.org")
*   [可变像素密度的高 DPI 图像](http://www.html5rocks.com/en/mobile/high-dpi/ "可变像素密度的高 DPI 图像 - HTML5Rocks")（有些相关）

### Javascript

您可以使用`window.devicePixelRatio`来确定屏幕密度。来自[Android 的 WebView 参考](http://developer.android.com/reference/android/webkit/WebView.html "网页浏览 |  安卓开发者")：

> `window.devicePixelRatio`DOM 属性。此属性的值指定用于当前设备的默认缩放因子。例如，如果 的值为`window.devicePixelRatio`“1.0”，则该设备被视为中等密度 (mdpi) 设备，并且默认缩放不适用于网页；如果值为“1.5”，则该设备被视为高密度设备 (hdpi)，页面内容缩放 1.5 倍；如果该值为“0.75”，则该设备被视为低密度设备 (ldpi)，内容被缩放 0.75 倍。

然后使用它，您可以通过将其除以总像素数来计算物理尺寸，这可以用`window.screen.width`and来计算`window.screen.height`（不要使用`window.screen.availHeight`，或者`window.screen.availWidth`因为它们只检测可用高度）。

了解更多信息：

*   [Android Webview 参考](http://developer.android.com/reference/android/webkit/WebView.html "网页浏览 |  安卓开发者")
*   [MDN -`Screen.width`](https://developer.mozilla.org/en-US/docs/Web/API/Screen.width "Screen.width - Web API 接口 |  MDN")
*   [MDN -`Screen.height`](https://developer.mozilla.org/en-US/docs/Web/API/Screen.height "Screen.height - Web API 接口 |  MDN")
*   [`devicePixelRatio`解释](http://www.quirksmode.org/blog/archives/2012/06/devicepixelrati.html "devicePixelRation - QuirksBlog")

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-22T07:34:12.393

更好地使用 CSS

```
@media screen and (max-width: 672px){
    //your code for mobile category
}
@media screen and (min-width: 672px){
    //your code for desktop category
} 
```

# windows - 在 Windows 上运行潮汐SDK 应用程序时出错

> ID：16141547
> 
> 赞同：0
> 
> 时间：2013-04-22T07:24:06.043
> 
> 标签：windows, desktop-application, desktop, tidesdk

我刚刚开始使用**tideSDK 1.3.0-beta**进行编程。我打包了我的应用程序。它也在一些Windows 机器上运行，但是当我在其他一些Windows XP 机器上运行我的应用程序时它显示以下错误。

错误信息：

```
This application has failed to start because the application configuration is incorrect.reinstalling the application may fix this problem 
```

我怎样才能解决这个问题。？

提前致谢..

# ios - tabBarItem 图像在 setBadgeValue 上缩小

> ID：16141549
> 
> 赞同：0
> 
> 时间：2013-04-22T07:24:11.033
> 
> 标签：ios, objective-c, uitabbaritem

我`tabBarItem`用图像创建了一个。我已经`badgeValue`为它设置了，它显示了消息的数量。显示时`badgeValue`，该 tabBarItem 图像突然缩小。这是情况的屏幕截图：

[截屏](http://i.stack.imgur.com/7o7et.png)

这是我使用的代码：

```
[tabbaritem4 setFinishedSelectedImage:[UIImage imageNamed:@"Btn_Taskbar_Chat-Over.fw.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"Btn_Taskbar_Chat.fw.png"]];
tabbaritem4.imageInsets=UIEdgeInsetsMake(25,12,10,13);

-(void)getAllUnReadMessages:(NSInteger)countMessage
{
    if(countMessage >= 1)
    {
        [tabbaritem4 setBadgeValue:[NSString stringWithFormat:@"%d",countMessage]];
    }
    else
    {
        [tabbaritem4 setBadgeValue:nil];
    }
} 
```

# xcode - 获取第二根手指在触摸/捏合中的位置

> ID：16141551
> 
> 赞同：0
> 
> 时间：2013-04-22T07:24:24.277
> 
> 标签：xcode, uitouch, cgpoint

如何在 iOS 的视图中获得第二次触摸的位置？我正在使用 UITouch，如果我在做捏合手势，我只知道如何获取第一根手指的位置。我通过按住选项按钮并在视图上拖动来在模拟器中进行捏合手势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:18:53.540

我不知道您是在使用手势识别器还是试图对 UIResponder 采取行动。

但是在任何一种情况下，委托方法都被处理一个 NSSet *touches，这个集合可以包含多个对象。

因此，您应该枚举该集合以获取所有内容。

# javascript - 如何使用 javascript 在 Phonegap 中的 Twitter 上发布图像

> ID：16141558
> 
> 赞同：13
> 
> 时间：2013-04-22T07:25:02.880
> 
> 标签：javascript, cordova, twitter

我目前正在使用 Phonegap 实现一个网络智能手机应用程序。在这个应用程序上，用户可以在 Facebook 上发布他们用手机摄像头拍摄的图像。此功能仅使用 javascript 通过发送 base 64 编码图像成功实现。现在，我想使用 Twitter 实现相同的功能。

我发现了一些非常有趣的博客文章，并且我已经能够仅使用 javascript 更新用户状态......但我也不能使用 update_with_media Twitter 网络服务发布图像。

根据这篇[文章](http://mywebsolutions.blogspot.fr/2013/02/post-image-on-twitter-in-phonegap-using.html)，有人说如果不使用服务器端代码（例如 php 脚本）就不可能实现此操作。

所以我的问题是：是否可以仅通过 javascript 使用 update_with_media Twitter 网络服务？

我向您发送我的代码以了解当前解决方案的概述。我将这篇文章作为工作基础： http: [//oodlestechnologies.com/blogs/Twitter-integration-on-PhoneGap-using-ChildBrowser-and-OAuth-for-iOS-and-Android-Platforms](http://oodlestechnologies.com/blogs/Twitter-integration-on-PhoneGap-using-ChildBrowser-and-OAuth-for-iOS-and-Android-Platforms)

这是我的 HTML 代码。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <script type="text/javascript" src="../js/jquery/jquery.min.js"></script>
        <script type="text/javascript" src="../cordova-2.5.0.js"></script>
        <script type="text/javascript" src="../js/childBrowser/childbrowser.js"></script>
        <script type="text/javascript" src="../js/helpers/jsOAuth-1.3.6.js"></script>
        <script type="text/javascript" src="../js/helpers/twitter.js"></script>
    </head>
    <body>
        <h4>Oodles Twitter App</h4>
        <table border="1">
            <tr>
                <th>Login using Twitter</th>
                <th>
                    <button id="loginBtn" onclick="Twitter.init();">Login</button>
                    <button id="logoutBtn" onclick="logOut();">Logout</button>
                </th>
            </tr>
            <tr id="tweetText">
                <td colspan="2"><textarea id="tweet"></textarea></td>
            </tr>
            <tr id="tweetBtn">
                <td colspan="2" align="right">
                    <button id="tweeter" onclick="Twitter.tweet();">Tweet</button>
                </td>
            </tr>
            <tr><td colspan="2"><div id="welcome">Please Login to use this app</div></td></tr>
        </table>
        <br/>
        <br/>
        <button onclick="javascript:location.reload();">Recharger la page</button>
    </body>
</html> 
```

这是我的 twitter.js 代码：（重点在 post 方法中）

```
$(document).ready(function() {
    document.addEventListener("deviceready", onDeviceReady, false);
});

function onDeviceReady() {
    var root = this;
    cb = window.plugins.childBrowser;
    if (!localStorage.getItem(twitterKey)) {
        $("#loginBtn").show();
        $("#logoutBtn").hide();
        $("tweetBtn").hide();
        $("tweetText").hide();
    }
    else {
        $("#loginBtn").hide();
        $("#logoutBtn").show();
        $("tweetBtn").show();
        $("tweetText").show();
    }

    if (cb != null) {
        cb.onLocationChange = function(loc) {
            root.locChanged(loc);
        };
        cb.onClose = function() {
            root.onCloseBrowser()
        };
        cb.onOpenExternal = function() {
            root.onOpenExternal();
        };
    }
}

function onCloseBrowser() {
    console.log("onCloseBrowser!");
}

function locChanged(loc) {
    console.log("locChanged!");
}

function onOpenExternal() {
    console.log("onOpenExternal!");
}

// Consumer key : ...
// Consumer secret : ...

// GLOBAL VARS
var oauth; // It Holds the oAuth data request
var requestParams; // Specific param related to request
var options = {consumerKey: '...', consumerSecret: '...', callbackUrl: "http://www.google.fr"};
var twitterKey = "twtrKey"; // This key is used for storing Information related   
var Twitter = {
    init: function() {
        // Apps storedAccessData , Apps Data in Raw format
        var storedAccessData, rawData = localStorage.getItem(twitterKey);
        // here we are going to check whether the data about user is already with us.
        if (localStorage.getItem(twitterKey) !== null) {
            // when App already knows data
            storedAccessData = JSON.parse(rawData); //JSON parsing
            //options.accessTokenKey = storedAccessData.accessTokenKey; // data will be saved when user first time signin
            options.accessTokenSecret = storedAccessData.accessTokenSecret; // data will be saved when user first first signin

            // javascript OAuth take care of everything for app we need to provide just the options
            oauth = OAuth(options);
            oauth.get('https://api.twitter.com/1/account/verify_credentials.json?skip_status=true',
                    function(data) {
                        var entry = JSON.parse(data.text);
                        console.log("USERNAME: " + entry.screen_name);
                    }
            );
        }
        else {
            // we have no data for save user
            oauth = OAuth(options);
            oauth.get('https://api.twitter.com/oauth/request_token',
                    function(data) {
                        requestParams = data.text;
                        cb.showWebPage('https://api.twitter.com/oauth/authorize?' + data.text); // This opens the Twitter authorization / sign in page
                        cb.onLocationChange = function(loc) {
                            Twitter.success(loc);
                        }; // Here will will track the change in URL of ChildBrowser
                    },
                    function(data) {
                        console.log("ERROR: " + JSON.stringify(data));
                    }
            );
        }
    },
    /*
     When ChildBrowser's URL changes we will track it here.
     We will also be acknowledged was the request is a successful or unsuccessful
     */
    success: function(loc) {

        // Here the URL of supplied callback will Load

        /*
         Here Plugin will check whether the callback Url matches with the given Url
         */
        if (loc.indexOf("http://www.google.fr") >= 0) {

            // Parse the returned URL
            var index, verifier = '';
            var params = loc.substr(loc.indexOf('?') + 1);

            params = params.split('&');
            for (var i = 0; i < params.length; i++) {
                var y = params[i].split('=');
                if (y[0] === 'oauth_verifier') {
                    verifier = y[1];
                }
            }

            // Here we are going to change token for request with token for access

            /*
             Once user has authorised us then we have to change the token for request with token of access
             here we will give data to localStorage.
             */
            oauth.get('https://api.twitter.com/oauth/access_token?oauth_verifier=' + verifier + '&' + requestParams,
                    function(data) {
                        var accessParams = {};
                        var qvars_tmp = data.text.split('&');
                        for (var i = 0; i < qvars_tmp.length; i++) {
                            var y = qvars_tmp[i].split('=');
                            accessParams[y[0]] = decodeURIComponent(y[1]);
                        }

                        $('#oauthStatus').html('<span style="color:green;">Success!</span>');
                        $('#stage-auth').hide();
                        $('#stage-data').show();
                        oauth.setAccessToken([accessParams.oauth_token, accessParams.oauth_token_secret]);

                        // Saving token of access in Local_Storage
                        var accessData = {};
                        accessData.accessTokenKey = accessParams.oauth_token;
                        accessData.accessTokenSecret = accessParams.oauth_token_secret;

                        // Configuring Apps LOCAL_STORAGE
                        console.log("TWITTER: Storing token key/secret in localStorage");
                        localStorage.setItem(twitterKey, JSON.stringify(accessData));

                        oauth.get('https://api.twitter.com/1/account/verify_credentials.json?skip_status=true',
                                function(data) {
                                    var entry = JSON.parse(data.text);
                                    console.log("TWITTER USER: " + entry.screen_name);
                                    $("#welcome").show();
                                    document.getElementById("welcome").innerHTML = "welcome " + entry.screen_name;
                                    successfulLogin();
                                    // Just for eg.
                                    app.init();
                                },
                                function(data) {
                                    console.log("ERROR: " + data);
                                }
                        );

                        // Now we have to close the child browser because everthing goes on track.

                        window.plugins.childBrowser.close();
                    },
                    function(data) {
                        console.log(data);

                    }
            );
        }
        else {
            // Just Empty
        }
    },
    tweet: function() {
        var storedAccessData, rawData = localStorage.getItem(twitterKey);

        storedAccessData = JSON.parse(rawData); // Paring Json 
        options.accessTokenKey = storedAccessData.accessTokenKey; // it will be saved on first signin
        options.accessTokenSecret = storedAccessData.accessTokenSecret; // it will be save on first login

        // javascript OAuth will care of else for app we need to send only the options
        oauth = OAuth(options);
        oauth.get('https://api.twitter.com/1/account/verify_credentials.json?skip_status=true',
                function(data) {
                    var entry = JSON.parse(data.text);
                    Twitter.post();
                }
        );
    },
    /*
     We now have the data to tweet
     */
    post: function() {
        alert('Post !');
        var theTweet = $("#tweet").val(); // You can change it with what else you likes.

        oauth.post('https://upload.twitter.com/1/statuses/update_with_media.json',
                {
                    'status': theTweet,
                    'media': //HERE IS THE PROBLEM, WHAT TO DO HERE ?
                }, "multipart/form-data",
                function(data)
                {
                    alert('Data 1 !');
                    console.log('------Data1 : ' + data);
                    var entry = JSON.parse(data.text);
                    console.log(entry);
                    done();
                },
                function(data) {
                    //var json_result = JSON.parse(data);
                    //alert(json_result.text.error);
                    var entry = JSON.stringify(data);
                    console.log('------Data2 : ' + entry);
                }
        );
    }

}

function done() {
    alert("OKKK !");
    $("#tweet").val('');
}

function successfulLogin() {
    $("#loginBtn").hide();
    $("#logoutBtn,#tweet,#tweeter,#tweetBtn,#tweetText").show();

}

function logOut() {
    //localStorage.clear();
    window.localStorage.removeItem(twitterKey);
    document.getElementById("welcome").innerHTML = "Please Login to use this app";
    $("#loginBtn").show();
    $("#logoutBtn,#tweet,#tweeter,#tweetText,#tweetBtn").hide();

} 
```

经过多次测试（发送base64图像，发送blob，发送二进制文件，......）这是来自Twitter的返回消息我有：

> {\"errors\":[{\"message\":\"内部错误\",\"code\":131}]}","xml":"","re​​questHeaders":{"Content-Type ":"multipart/form-data"},"responseHeaders":{"date":"2013 年 4 月 19 日星期五 15:45:28 GMT","content-encoding":"deflate","strict-transport-security ":"max-age=631138519","status":"500 内部服务器错误","server":"tfe","content-type":"application/json; 字符集=utf-8","版本":"HTTP/1.1"}}

一个“解决方案”（通过发送 blob）已发布在 Twitter 开发论坛上，但对我不起作用：dev.twitter.com/discussions/6969

有人想实现相同的功能或有解决方案吗？谢谢 ！

**------ 编辑：**

我只想使用**Javascript**，不想实现任何服务器端解决方案（没有 PHP、C#、Java ......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T11:04:50.207

根据文档，Twitter 需要`multipart/form-data`enctype，这意味着 base64 字符串不起作用。

> 与 POST 状态/更新不同，此方法需要原始多部分数据。您的 POST 请求的 Content-Type 应使用 media[] 参数设置为 multipart/form-data ~ [https://dev.twitter.com/docs/api/1/post/statuses/update_with_media](https://dev.twitter.com/docs/api/1/post/statuses/update_with_media)

但是，您可以托管一个采用 base64 的端点，将其转换为真实文件，然后将请求转发到 Twitter。例如（未经测试）：

```
<?php

$base64 = $_POST['image'];
$data = base64_decode( $base64 );

// Make name unique to avoid conflicts.
$temp_file = uniqid() . $_POST['name'];

// Save the file to a temp location.
file_put_contents( $temp_file, $data );

$temp_info = pathinfo( $temp_file );
$temp_type = $temp_info['extension'];
$temp_name = basename( $temp_file, '.' . $temp_type );

// OAuth library recommended by Twitter: https://github.com/themattharris/tmhOAuth
// See original: https://github.com/themattharris/tmhOAuth-examples/blob/master/images.php

require 'tmhOAuth.php';
require 'tmhUtilities.php';

$tmhOAuth = new tmhOAuth( array(
    'consumer_key'    => $_POST['consumer_key'],
    'consumer_secret' => $_POST['consumer_secret'],
    'user_token'      => $_POST['user_token'],
    'user_secret'     => $_POST['user_secret'],
));

// note the type and filename are set here as well
// Edit: Not sure if the `type` and `filename` params are necessary.
$params = array( 'media[]' => "@{$temp_file};type={$temp_type};filename={$temp_name}" );

$code = $tmhOAuth->request( 'POST', $tmhOAuth->url( '1/status/update_with_media' ),
    $params,
    true, // use auth
    true  // multipart
);

// Remove temp file.
unlink( $temp_file );

if ( $code == 200 ) {
    tmhUtilities::pr( json_decode( $tmhOAuth->response['response'] ) );
}
tmhUtilities::pr( htmlentities( $tmhOAuth->response['response'] ) );

?> 
```

你可能会这样称呼它：

```
 $.ajax({
        // You'll want to use https to protect the oauth info.
        url: "https://mysite.com/proxy.php",
        type: "POST",
        data: {
            image: "base64 data...",
            name: "foo.png",
            consumer_key: options.consumerKey,
            consumer_secret: options.consumerSecret,
            user_token: options.accessTokenKey,
            user_secret: options.accessTokenSecret
        },
        success: function( data ) {
            console.log( data );
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T23:02:55.107

对于任何尝试使用客户端 JS 将图像发布到 Twitter 的人，我可以在最后使用 gary-buynary-co-za （[https://github.com/bytespider/jsOAuth/pull/11](https://github.com/bytespider/jsOAuth/pull/11)）的解决方案发布到 Twitter这个论坛的。几乎最终使用 Phonegap FileTransfer 和 FileTransferOptions 对象将图像传输到 twitter api，但使用 jsOAuth 准备 FileTransferOptions 标头和签名。解决方案肯定可以清理。

# javascript - AngularJS：在每个项目的点击上附加相同的结构

> ID：16141559
> 
> 赞同：1
> 
> 时间：2013-04-22T07:25:11.123
> 
> 标签：javascript, jquery, angularjs, angularjs-ng-repeat

我的 index.html 页面如下所示：

```
<div id="sidepanel" ng-controller="myCtrl">
<ul class="drop-down">
    <li ng-repeat="item in items">
        <a href="#">{{item.name}}</a>
    </li>
</ul>
</div>
<div id="mainpanel" ng-controller="listCtrl">
    <div ng-view></div>
</div> 
```

对于这个 ng-view，我有 record-list.html 来显示所有记录，如下所示：

```
<div class="container">
    <ul class="design">
        <li id="{{record.name}}" ng-repeat="record in records">
            <div>......</div>
        </li>
    </ul>
</div> 
```

现在我想在单击侧面板的每个项目时添加相同的结构（就像每条记录一样）。

那是什么逻辑？

我最近的 UI 看起来像这样 & 我想在每次点击时添加相同的结构，应该附加现有的结构。

![在此处输入图像描述](https://i.stack.imgur.com/60Awx.png)

请帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T00:13:56.200

听起来可能每个“记录”都有一组子“记录”。如果是这种情况，我建议使用 Angular 的 ng-switch 指令在侧面有条件地显示正确（或否）的子记录集。

# xcode - 当用户点击“更多...”时展开文本视图

> ID：16141565
> 
> 赞同：0
> 
> 时间：2013-04-22T07:25:39.013
> 
> 标签：xcode, uitextview

有些应用程序的文本字段显示给定数量的行，当用户单击更多时，它会展开并显示其余部分，我熟悉扩展 UITextView 的代码，但不知道如何添加“更多... " 然后 "少...",

选项![它](https://i.stack.imgur.com/KjfY2.png)

**微调问题：**我不希望添加按钮，而是在文本大于控件大小时具有默认的 IOS 行为，它将放置在末尾或中间例如：这是……或者这……长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:47:29.410

您可以使用方法 (sizeWithFont:constrainedToSize:lineBreakMode:) 来实现它

首先将需要显示的文本大小取出到 TextField 中，如下所示

```
 NSString *textToBeShown = @"jhfsdg djsgf jdsfsdf dsf";
 CGSize  textSize =  [textToBeShown sizeWithFont:[UIFont fontWithName:@"Arial-BoldMT" size:11]] 
                                constrainedToSize:CGSizeMake(constrainedWidth,constrainedHeight)
                                    lineBreakMode:NSLineBreakByWordWrapping]; 
```

假设您希望在按下“ShowMore”按钮之前您的 textview 高度最初为 100.0，那么您可以检查 textSize.height 与 100.0 相比，如果 textHeight 小于 100.0 则将 TextView 的高度指定为 textSize.height 否则将其指定为 100.0像素。现在，当单击显示更多按钮时，将 textSize.height 指定为用于显示文本的 UITextView 的高度。

```
NSString *textToBeShown = @"jhfsdg djsgf jdsfsdf dsf";
CGSize  textSize =  [textToBeShown sizeWithFont:[UIFont fontWithName:@"Arial-BoldMT" size:11]] 
                            constrainedToSize:CGSizeMake(constrainedWidth,constrainedHeight)
                                lineBreakMode:NSLineBreakByWordWrapping];

textView.frame=CGRectMale(textView.frame.origin.x,
                          textView.frame.origin.y,
                          textSize.width,
                          textSize.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:31:30.800

您可以使用一个按钮并将该 UIButton 添加到 UITextView 下方查看，当您单击该按钮时，更改与 UITextView 相关的按钮位置和标题。

# gps - 如何将 gps 连接到互联网并跟踪设备

> ID：16141567
> 
> 赞同：1
> 
> 时间：2013-04-22T07:25:49.910
> 
> 标签：gps, communication

我有一个 gps 设备，现在从我家连接到我的车我想知道我的车目前在哪里以及它在哪条路线上行驶，想要获得完整的路线信息。我不知道 gps 是如何连接到谷歌地图的。你能指导我上面的查询吗？是否有任何免费工具可用。

# android - Zxing [Android] 中的 QR 版本设置？

> ID：16141569
> 
> 赞同：0
> 
> 时间：2013-04-22T07:25:54.150
> 
> 标签：android, image, qr-code, zxing

**我想使用以下设置生成 QR 图像：**

1.  具体版本号，即：v04。
2.  校正等级：L.（可以做到）
3.  条码格式：二维码。（可以做到）
4.  EncodingMode：字节模式。

P/S，二维码内容：Base64编码的字符串。

* * *

**问题：**

如何定义二维码版本号？我看到了`EncodeHintType`，但没有产生任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:35:00.140

不能设置版本。“版本”只是大小。大小需要足够大以容纳数据。让它变大只会让扫描变得更难。

# c# - 如何从 iOS mobile.config 文件中获取 MAC 地址？

> ID：16141572
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:26:05.003
> 
> 标签：c#, ios

我想从`mobile.config`C# 中的 iOS 文件中获取 MAC 地址。

谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:30:32.763

在这里，我们可以使用 ASP.Net C# 代码找到 iOS 设备的 MAC 地址：

```
var userAgent = HttpContext.Current.Request.UserAgent.ToLower(); // User's Iphone/Ipad Info.
var userAgent1 = HttpContext.Current.Request.UserHostAddress;    // User's Iphone/Ipad Mac Address

GetMacAddressfromIP macadd = new GetMacAddressfromIP();

if (userAgent.Contains("iphone;"))
{
    // iPhone                
    Label1.Text = userAgent;
    Label2.Text = userAgent1;
    string Getmac = macadd.GetMacAddress(userAgent1);
    Label3.Text = Getmac;
}
else if (userAgent.Contains("ipad;"))
{
    // iPad
    Label1.Text = userAgent;
    Label2.Text = userAgent1;
    string Getmac = macadd.GetMacAddress(userAgent1);
    Label3.Text = Getmac;
}
else
{
    Label1.Text = userAgent;
    Label2.Text = userAgent1;
    string Getmac = macadd.GetMacAddress(userAgent1);
    Label3.Text = Getmac;
} 
```

## 。班级

```
public string GetMacAddress(string ipAddress)
{
    string macAddress = string.Empty;
    if (!IsHostAccessible(ipAddress)) return null;

    try
    {
        ProcessStartInfo processStartInfo = new ProcessStartInfo();
        Process process = new Process();
        processStartInfo.FileName = "arp";
        processStartInfo.RedirectStandardInput = false;
        processStartInfo.RedirectStandardOutput = true;
        processStartInfo.Arguments = "-a " + ipAddress;
        processStartInfo.UseShellExecute = false;
        process = Process.Start(processStartInfo);

        int Counter = -1;
        while (Counter <= -1)
        {                  
                Counter = macAddress.Trim().ToLower().IndexOf("mac address", 0);
                if (Counter > -1)
                {
                    break;
                }

                macAddress = process.StandardOutput.ReadLine();
                if (macAddress != "")
                {
                    string[] mac = macAddress.Split(' ');
                    if (Array.IndexOf(mac, ipAddress) > -1)                                
                    {
                        if (mac[11] != "")
                        {
                            macAddress = mac[11].ToString();
                            break;
                        }
                    }
                }
        }
        process.WaitForExit();
        macAddress = macAddress.Trim();
    }

    catch (Exception e)
    {
        Console.WriteLine("Failed because:" + e.ToString());
    }
    return macAddress;

} 
```

# c++ - NDK 上的套接字

> ID：16141574
> 
> 赞同：1
> 
> 时间：2013-04-22T07:26:12.667
> 
> 标签：c++, sockets, android-ndk

当我使用 NDK 中的套接字连接时，由于读取调用，我总是得到 -1。（错误）。

我在网上查了好几次，都找不到解决办法。你能帮助我吗？这是我的代码。

```
void * SocketManager::socketCall(void *ptr) {
        int socket_, n;
        SocketManager *manager = (SocketManager*) ptr;
        while (manager->semaph) ;
        manager->semaph = true;

        bool didConnect = false;
        size_t bufferSize = 32000;
        char buffer[bufferSize];

        const char* value = manager->host.c_str();
        stringstream strValue;
        strValue << value;
        unsigned int host;
        strValue >> host;

        struct sockaddr_in server_address;
        server_address.sin_family = AF_INET;
        server_address.sin_port = htons(10983);
        inet_aton(manager->host.c_str(), &server_address.sin_addr);

        socket_ = socket(AF_INET, SOCK_STREAM, 0);
        if (socket_ < 0) 
            CCLog("ERROR ABRIENDO EL SOCKET");

        n = ::connect(socket_, (struct sockaddr *) &server_address,sizeof(server_address));
        if (n < 0)
            close(socket_);

        manager->onConnect();
        didConnect = true;

        while (!manager->mustDisconnect) {
            n = read(socket_, &buffer, bufferSize);
            if(n<=0)
                break;
            manager->onReadData(buffer, sizeof(buffer));
        }
    if (socket_) {
        close(socket_);
        if (didConnect)
            manager->onDisconnect();
        else
            manager->onTimeout();

    }
    manager->semaph = false;
    manager->mustDisconnect = false;
    return 0;
} 
```

# mongodb - 如何在第一级数组上使用 $elemMatch？

> ID：16141576
> 
> 赞同：12
> 
> 时间：2013-04-22T07:26:20.907
> 
> 标签：mongodb, mongodb-query

考虑以下文档：

```
{
  "_id" : "ID_01",
  "code" : ["001", "002", "003"],
  "Others" : "544554"
} 
```

我浏览[了 elemmatch-query](http://docs.mongodb.org/manual/reference/operator/elemMatch/#elemmatch-query)和[elemmatch-projection](http://docs.mongodb.org/manual/reference/projection/elemMatch/#elemmatch-projection)的 MongoDB 文档，但无法弄清楚如何将其用于上述文档。

谁能告诉我如何使用`$elemMatch`字段代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T14:17:23.483

您将希望使用`$in`运算符，而不是`$elemMatch`在这种情况下，因为`$in`它可用于在特定字段内搜索一个（或多个值）。$in 需要一个值列表作为数组传递。此外，对于您的情况，它会找到单个值，或者通过在值数组中搜索。返回整个匹配文档。

例如，您可以像这样使用它：

```
db.mycodes.find( { code: { $in: ["001"] } } ) 
```

这可以简化为：

```
db.mycodes.find({ code: "001" }) 
```

由于 MongoDB 将在数组中查找单个匹配项，如上面 ( `"001"`) 。

或者，如果您想搜索`"001"`or `"002"`：

```
db.mycodes.find( { code: { $in: ["001", "002"] } } ) 
```

[$in 文档](http://docs.mongodb.org/manual/reference/operator/in/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-03T19:02:12.543

如果您只是想将所有文档与包含给定值的数组匹配，则只需在对该数组的引用上指定值，例如

```
db.mycodes.find( { code: '001' } ) 
```

因此，这将返回您包含`'001'`在其`code`数组中的所有文档

# debugging - 检测释放的内存使用情况（FPC -> heaptrc -> keepreleased）

> ID：16141584
> 
> 赞同：0
> 
> 时间：2013-04-22T07:26:39.490
> 
> 标签：debugging, freepascal

Free Pascal heaptrc keepreleased 被描述为“如果您怀疑同一个内存块被释放两次时很有用”，但是是否可以用它检测先前释放的内存（释放对象的对象方法调用）的使用情况？如果不可能 - 可以用其他工具检测到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:58:30.153

是的，它应该这样做。思路如下：

使用的分配具有不同的 .sig，然后是 $AAAAAAA 或 $DEADBEEF。在 freemem 上，如果 useCRC 为假，则对照 sig $AAAAAAA 检查 sig（参见中继线中的第 593 行）。

keepreleased 防止块被重用，这会将签名更改为 $AAAAAAAA 之外的其他内容。它将打印如下内容：

已发布 12345678 美元的标记内存

到文件描述符 ptext。可以使用各种其他变量设置和引导错误标准文件。它看起来相当复杂，但这可能是为了处理无控制台的 GUI 应用程序

其他一些变量（如haltonerror）控制应用程序是否因此类损坏而停止

另一种（但非常慢）的方法是使用 valgrind（fpc 选项 -gv），但我只在 *nix 上运行了 valgrind，正如所说的那样非常慢，所以不适用于非常繁重的处理应用程序。

# java - Java Classes 编译 64bit 32bit

> ID：16141585
> 
> 赞同：-2
> 
> 时间：2013-04-22T07:26:42.957
> 
> 标签：java, 32bit-64bit

在 32 位环境 (JDK) 中编译 Java 类时，该类是否也在 64 位 JRE 上运行？还是我必须在 64 位 JDK 中编译该类？

该类没有任何 JNI（Java 本机接口）。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:30:36.813

是的，它确实。字节码不依赖于环境的架构（JNI 的澄清有助于给出明确的答案）。

# php - 使用 For 循环在表中打印多维数组

> ID：16141590
> 
> 赞同：3
> 
> 时间：2013-04-22T07:26:53.967
> 
> 标签：php, for-loop, multidimensional-array

我想只使用 For 循环在表中打印一个多维数组。这是`$myArray`

```
$myArray =    Array(
[0] => Array
    (
        [0] => 598
        [1] => Introducing abc
        [2] => 
    )
[1] => Array
    (
        [0] => 596
        [1] => Big Things Happening at abc
        [2] => 
    )
[2] => Array
    (
        [0] => 595
        [1] => Should I send abc?
        [2] => 
    )
[3] => Array
    (
        [0] => 586
        [1] => Things you need to know about abc :P
       [2] => 
    ) 
```

);

将新数组更新为`var_dump($myArray );`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-22T07:31:25.403

有很多不同的方法可以解决这个问题，所以为什么不找点乐子呢。

## 如果您必须使用 for 循环

不知道你为什么会，除非是为了学校作业：

```
for($i=0;$i<count($data);$i++) {
  echo('<tr>');
  echo('<td>' . $data[$i][0] . '</td>');
  echo('<td>' . $data[$i][1] . '</td>');
  echo('<td>' . $data[$i][2] . '</td>');
  echo('</tr>');
} 
```

但是直接访问 ID 有点愚蠢，让我们在行中使用另一个 for 循环：

```
for($i=0;$i<count($data);$i++) {
  echo('<tr>');
  for($j=0;$j<count($data[$i]);$j++) {
    echo('<td>' . $data[$i][$j] . '</td>');
  } 
  echo('</tr>');
} 
```

## 用同样无聊的 foreach 循环替换它：

```
<table>
<?php foreach($items as $row) {
  echo('<tr>');
  foreach($row as $cell) {
    echo('<td>' . $cell . '</td>');
  }
  echo('</tr>');
} ?>
</table> 
```

## 为什么不内爆数组：

```
<table>
<?php foreach($items as $row) {
  echo('<tr>');
  echo('<td>');
  echo(implode('</td><td>', $row);
  echo('</td>');
  echo('</tr>');
} ?>
</table> 
```

## 把它混合起来，拧紧前叉，然后去散步；并一路爆破东西：

```
<?php
function print_row(&$item) {
  echo('<tr>');
  echo('<td>');
  echo(implode('</td><td>', $item);
  echo('</td>');
  echo('</tr>');
}
?>

<table>
  <?php array_walk($data, 'print_row');?>
</table> 
```

## 双走... OMG

是的，现在看起来有点傻，但是当你扩大表格并且事情变得更复杂时，事情会更好地分解和模块化：

```
<?php
function print_row(&$item) {
  echo('<tr>');
  array_walk($item, 'print_cell');
  echo('</tr>');
}

function print_cell(&$item) {
  echo('<td>');
  echo($item);
  echo('</td>');
}
?>

<table>
  <?php array_walk($data, 'print_row');?>
</table> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T07:30:36.083

使用这个，实际上是两个嵌套`for`循环：

```
print('<table>');
for($i = 0; $i < count($array); $i++) {
    print('<tr>');
    for($ii = 0; $ii < count($array[$i]); $ii++) {
        print("<td>{$array[$i][$ii]}</td>");
    }
    print('</tr>');
}
print('</table>'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T07:28:49.270

这样做

```
echo "<table>";
for($i=0;$i<count($your_array);$i++) {
     echo "<tr><td>".$your_array[$i][0]."</td>";
     echo "<td>".$your_array[$i][1]."</td>";
     echo "<td>".$your_array[$i][2]."</td></tr>";
}
echo "</table>"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-22T07:32:22.323

```
echo '<table>';
for($i=0;$i<count($array);$i++) {
 echo '<tr><td>'.$array[$i][0].'</td>';
 echo '<tr><td>'.$array[$i][1].'</td>';
 echo '<tr><td>'.$array[$i][2].'</td></tr>';
}
echo '</table>'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T07:29:10.653

做这个

```
$arr as your array 
```

然后

```
echo "<table>";
for($i = 0; $i<count($arr); $i++)
{

    echo '<tr><td>'.$arr[$i][0].'</td>';
    echo '<tr><td>'.$arr[$i][1].'</td>';
    echo '<tr><td>'.$arr[$i][2].'</td></tr>';
}
echo "</table>"; 
```

# perl - 子里面的 Perl Tk 刷新检查按钮

> ID：16141591
> 
> 赞同：0
> 
> 时间：2013-04-22T07:26:54.507
> 
> 标签：perl, tk

我有一些复选框可以在 sub.xml 中更改它们的值。多次。但是我所有的复选框都保持不变，直到 sub 结束。只有当子完成时，复选框才会更新。那么如何让它们在每次它们的值发生变化时更新呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:24:35.230

你要么想调用`$mainwindow->idletasks`，要么`$mainwindow->update`在子例程中。 `idletasks`只更新屏幕，同时`update`处理新的用户交互（这个[邮件列表](http://www.mail-archive.com/perl-win32-users@listserv.activestate.com/msg10795.html)更好地解释了它）。基本上，您必须让 MainLoop 有机会赶上您所做的更改。

# javascript - 如何以有效的方式对 javascript 进行编码？

> ID：16141600
> 
> 赞同：0
> 
> 时间：2013-04-22T07:27:41.210
> 
> 标签：javascript, jquery, minify

我尝试使用打包器（javascriptcompressor.com）对 javascript（.js）进行编码，但打包器效率不高。谁能推荐一个高效的 javascript（.js）编码器？还是有其他方法可以保护 javasript(.js)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:32:42.533

您可以通过在一行中`javascript(.js)`使用和编码来压缩自己的。`multiline commenting`

另请阅读[http://yui.github.io/yuicompressor/](http://yui.github.io/yuicompressor/)和[https://developers.google.com/closure/](https://developers.google.com/closure/)

可能重复[如何压缩javascript？](https://stackoverflow.com/questions/6224925/how-to-compress-javascript)或[如何实时压缩javascript？](https://stackoverflow.com/questions/2325268/how-to-compress-javascript-in-realtime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T12:34:07.850

最常用的 JS 缩小器是[uglify](https://github.com/mishoo/UglifyJS)。一般来说，dean edwards 的打包程序实际上非常高效，但有以下缺点：a）它增加了文件的解包运行时开销和 b）在 gzip 之后比所有其他压缩器（uglify、yui 压缩器或 google 关闭）和 c ) 需要将 JS 编写为 strcit ，否则会严重失败。

我会说谷歌关闭和 uglify 是最好的，但会推荐 uglify。

# nginx - 当 uWSGI 处理请求需要很长时间时 Nginx 超时

> ID：16141610
> 
> 赞同：46
> 
> 时间：2013-04-22T07:28:02.673
> 
> 标签：nginx, configuration, uwsgi, connection-timeout

我有用于 Python Django 应用程序的 Nginx + uWSGI。

我有以下内容`nginx.conf`：

```
location / {
    include uwsgi_params;
    uwsgi_pass   127.0.0.1:9001;
    uwsgi_read_timeout 1800;
    uwsgi_send_timeout 300;
    client_header_timeout 300;
    proxy_read_timeout 300;
    index  index.html index.htm;
} 
```

但是对于 uWSGI 上需要大约 1 分钟才能完成的长时间运行的请求，我在 Nginx 错误日志中收到超时错误，如下所示：

> 2013/04/22 12:35:56 [错误] 2709#0: *1 上游超时（110：连接超时）同时从上游读取响应标头，客户端：xx.xx.xx.xx，服务器：，请求：“GET /entity/datasenders/ HTTP/1.1”，上游：“uwsgi://127.0.0.1:9001”，主机：“xxx.xx.xx.x”

我已经将标头超时和 uWSGI 发送/读取超时设置为 5 分钟，有人可以告诉我我能做些什么来克服这个问题吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-22T09:09:06.987

解决问题的配置是：

```
location / {
    include uwsgi_params;
    uwsgi_pass   127.0.0.1:9001;
    uwsgi_read_timeout 300;
    index  index.html index.htm;
} 
```

问题中的上述配置对我们不起作用的原因是不幸的是，在我们的机器中，多个路径都有`nginx.conf`文件。我们在错误的路径上使用 conf。

要正确找出您的 nginx 从运行中获取配置的路径：

```
nginx -V  # V is caps 
```

这将有一个`--conf-path=[]`它将准确地告诉您它从何处获取配置。

我最近发现上面`nginx -V`没有提供正确的信息。我将保留以上内容，以防其他人发现它有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-09-01T09:46:43.717

通过更改以下 Nginx 配置解决

```
proxy_connect_timeout 300;
proxy_read_timeout    300;

client_body_timeout   300;
client_header_timeout 300;
keepalive_timeout     300; 
```

和 UWSGI 设置

```
http-timeout = 300 // or 'socket-timeout = 300' depending on uwsgi setting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T17:49:53.463

除了“uwsgi_read_timeout”答案之外，您还应该检查您的 nginx uwsgi 缓存目录的所有权是否正确。所有权必须设置为与正在运行的 nginx 进程相同的用户...在我的情况下，我必须这样做

```
grep '^user' /etc/nginx/nginx.conf
ls -lah /var/cache/nginx/uwsgi_temp
for f in $( find /var/cache/nginx/uwsgi_temp ); do ls -lah $f; done 
```

这些文件是否属于同一用户？如果没有，您可以关闭 nginx 并删除所有缓存文件，确保正确的所有者在 /var/cache/nginx/uwsgi_temp 上并重新启动。也许你也可以只做一个递归 chown，我没有测试这种方法。

```
# store the user
THEUSER=$(grep '^user' /etc/nginx/nginx.conf | sed 's/.* //; s/;.*//' ) 
```

# 删除缓存并重新启动方法

```
/etc/init.d/nginx stop
rm -rf /var/cache/nginx/uwsgi_temp/* 
chown $THEUSER:$THEUSER /var/cache/nginx/uwsgi_temp
/etc/init.d/nginx start 
```

# 递归 chown 方法

```
chown -R $THEUSER:$THEGROUP /var/cache/nginx/uwsgi_temp/
# not sure if you have to restart nginx here... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-31T15:09:24.620

查看 uwsgi 错误日志并了解问题对我有什么帮助。问题根本与 Nginx 配置无关。我的电子邮件主机已更改，代码在调用发送电子邮件代码时出现错误

# objective-c - 将用户链接到应用商店 - 有 2 个选项

> ID：16141611
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:28:08.283
> 
> 标签：objective-c

我知道2个选项如何做到这一点，

首先，在文档中给你的一个苹果：

```
NSString *iTunesLink = @"http://itunes.apple.com/us/app/id284417350?mt=8"; 
```

第二，我可以在这里找到的另一个，

```
NSString *str = @"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=666666666"; 
```

我需要 2 个链接，一个指导用户**更新**，一个指导用户**评价**应用程序。

每个场景的相关链接是什么，我的链接有什么作用？我相信第二个是要审查的？

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:47:52.930

第一个用于更新/链接到应用程序（另一个应用程序或您的应用程序，取决于 id，ofc），第二个是对您的应用程序进行评分和/或添加评论（用户可以同时执行这两项操作，也可以只执行其中一项）。

是的，你为什么不直接测试一下？制作一个虚拟按钮，然后单击并检查直到没问题。

# .net - 对电子邮件备用视图的支持范围有多大？

> ID：16141614
> 
> 赞同：2
> 
> 时间：2013-04-22T07:28:12.453
> 
> 标签：.net, email

因此.net 中的标准电子邮件 api 支持使用“替代视图”

[http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.alternateviews.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.alternateviews.aspx)

> 使用 AlternateViews 属性以不同格式指定电子邮件消息的副本。例如，如果您以 HTML 格式发送消息，您可能还希望提供纯文本版本，以防某些收件人使用无法显示 HTML 内容的电子邮件阅读器。
> 
> 要将备用视图添加到 MailMessage 对象，请为该视图创建一个附件，然后将其添加到 AlternateViews 返回的集合中。使用 Body 属性指定文本版本并使用 AlternateViews 集合指定具有其他 MIME 类型的视图。使用 MediaTypeNames 类成员指定备用视图的 MIME 类型。

这种方法的支持范围有多广？我之所以问，是因为我很好奇是否值得努力定义文本和 html 电子邮件正文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:20:05.837

我总是使用它来结合 html 和文本电子邮件（例如时事通讯）。实现起来并不难，所以我只想添加支持：

```
var mail = new MailMessage();

// TODO: Set up normal message such as recipient, reply address, etc

if (!string.IsNullOrWhiteSpace(plainBody))
{
    var plainView = AlternateView.CreateAlternateViewFromString(plainBody, null, "text/plain");
    mail.AlternateViews.Add(plainView);
}

if (!string.IsNullOrWhiteSpace(htmlBody))
{
    var htmlView = AlternateView.CreateAlternateViewFromString(htmlBody, null, "text/html");
    if (linkedResources != null)
    {
        foreach (var linkedResource in linkedResources)
        {
            htmlView.LinkedResources.Add(linkedResource);
        }
    }

    mail.AlternateViews.Add(htmlView);
}

return mail; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:25:44.790

在某些情况下，邮件客户端会更喜欢电子邮件的文本替代方案，而不是电子邮件消息的 HTML 替代方案。例如，Windows 8 和 Windows Phone 8 中的邮件应用程序将显示替代文本（如果可用）而不是 HTML 版本。

我犯了一个错误，即在某些电子邮件中将字符串“仅 HTML”作为替代文本以及 HTML 消息。所有这些客户能够看到的是“仅 HTML”。删除文本替代解决了该问题。

# lua - 触摸事件没有被删除，无论我在哪里触摸屏幕都可以继续工作

> ID：16141615
> 
> 赞同：0
> 
> 时间：2013-04-22T07:28:13.190
> 
> 标签：lua, coronasdk

我有一个带有令牌的单词搜索游戏，用户可以使用它们来显示他们必须找到的单词。但我的问题是，在我单击标记后，我无法突出显示在单词搜索中找到的单词，而是每次单击时都会带走标记，无论在关卡的哪个位置。我试过 token:removeEventListener 但这不起作用，也许我把它放在了错误的位置

```
function token:touch( event )
if event.phase == "began" then
if storyboard.state.score >0 then
    storyboard.state.score = storyboard.state.score - 1
    score.text = tostring(storyboard.state.score)
    clueText.isVisible = false
    answerText.isVisible = true
    display.getCurrentStage():setFocus( event.target )
    event.target.isFocus = true
elseif event.target.isFocus then
    if event.phase == "moved" then
        print( "user has moved their finger off the token." )
    elseif event.phase == "ended" then
        print( "user has used a token" )
        display.getCurrentStage():setFocus( nil )
        event.target.isFocus = false
    end
end
return true
end
end
menubutton:addEventListener( "touch", menubutton)
token:addEventListener( "touch", token) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:07:09.340

尝试像这样修改您的功能：

```
function tokenTouch( event )
    if event.phase == "began" then
        if storyboard.state.score >0 then
            storyboard.state.score = storyboard.state.score - 1
            score.text = tostring(storyboard.state.score)
            clueText.isVisible = false
            answerText.isVisible = true
            display.getCurrentStage():setFocus( event.target )
            event.target.isFocus = true
        end
    elseif event.target.isFocus then
        if event.phase == "moved" then
            print( "user has moved their finger off the token." )
        elseif event.phase == "ended" then
            print( "user has used a token" )
            display.getCurrentStage():setFocus( nil )
            event.target.isFocus = false
        end
    end
    return true
end
token:addEventListener( "touch", tokenTouch ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:31:03.167

如果你想删除你的监听器。你必须在添加监听器之后添加删除监听器。

```
local function token(event)
                if event.phase == "began" then

                elseif event.phase == "moved" then

                elseif event.phase == "ended" then
                end
        return true
        end
        token:addEventListener("touch",token)

token:removeEventListener("touch",token) 
```

# c++ - 在 C 中使用来自系统调用的文件描述符

> ID：16141617
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:28:26.970
> 
> 标签：c++, c, linux, assembly, linux-kernel

嘿，我想使用系统调用打开和读取文件并逐字母打印其中的数据我在程序集文件中有函数 system_call，我想“保存”指向来自 system_call 的文件描述符的指针（SYS_OPEN 到使用它。目的不是使用#include目录

我的代码是

```
system_call(SYS_OPEN,argv[2],0,) 
```

其中 argv[2] = "a.txt" SYS_OPEN = 5 和第 4 个参数应该是权限，我不知道该写什么

将其“保存”到指针后，我想像这样阅读和打印

```
while(system_call(SYS_READ,STDIN, input_char , 1)>0)
  {
  system_call(SYS_WRITE,STDOUT,input_char, 1);
  } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:43:52.217

这是一个系统调用列表（可能是一个但已过时，但对你有用）[http://asm.sourceforge.net/syscall.html](http://asm.sourceforge.net/syscall.html)。你可以在适当的 linux 内核源代码中检查 system_call 的实现细节和用法 sys_open , sys_read, sys_write 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:41:58.460

`open`您可以使用库函数（即（2）， （2））编写代码来执行此操作`read`，然后运行程序`strace`以查看它所做的函数调用和它使用的参数，然后在您自己的代码中复制它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:22:14.947

通过使用 int 作为指向文件的指针得到它：

```
char input_char[1];
int file = system_call(SYS_OPEN,argv[j],0,0777);

while(system_call(SYS_READ,file, input_char , 1) >0 )
  {
  system_call(SYS_WRITE,STDOUT,input_char, 1);
  } 
```

感谢您的意见和帮助

# java - 番石榴按规则连续范围

> ID：16141618
> 
> 赞同：0
> 
> 时间：2013-04-22T07:28:27.580
> 
> 标签：java, guava

例如，是否可以在番石榴中创建偶数范围？就像是：

```
Range.closed(0,10) //0,2,4,6,8,10 
```

我知道上面的行不会产生所需的输出，但可能是这样的：

```
Range.closed(0,10, SomeFunctionInterface<Integer>); 
```

在哪里

```
 interface SomeFunctionInterface<T>{
      T computeNext(T first);
 } 
```

番石榴可以吗？这仍然是一个连续的范围，只是对其应用了某个规则。

我只对番石榴解决方案感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:16:30.080

Guava can support this if you compose two operations together. First, you create the set {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10}. Then, you filter it.

To turn the `Range` into the intermediate, unfiltered set, create a [`ContiguousSet`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ContiguousSet.html#create%28com.google.common.collect.Range,%20com.google.common.collect.DiscreteDomain%29). To do so, you'll need a `DiscreteDomain`, which is basically the `SomeFunctionInterface` you've described. Since you're dealing with integers, you can use the built-in [`DiscreteDomain.integers()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/DiscreteDomain.html#integers%28%29).

To get from there to the set of only even numbers, you can write a `Predicate` and then pass it and the intermediate set to [`Sets.filter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Sets.html#filter%28java.util.NavigableSet,%20com.google.common.base.Predicate%29).

# perl - 使用 Perl 将邻接矩阵转换为成对表格式

> ID：16141619
> 
> 赞同：1
> 
> 时间：2013-04-22T07:28:28.237
> 
> 标签：perl, unix, matrix

我有一个看起来像这样的数据（邻接矩阵）：

```
foo bar 0.14 qux 0.2
bar foo 0.14 qux 0.4
qux foo 0.2 bar 0.4 
```

我想要做的是将它们转换成成对表：

```
 foo bar 0.14
  foo qux 0.2
  bar qux 0.4 
```

但我坚持使用以下代码。正确的方法是什么？

```
 use strict;

   while ( <DATA> ) {
        chomp;
        next if (/^>/);
        my $line = $_;
        my @els = split(/\s+/,$line);
        my $pivot = $els[0];

        my $genen = '';
        my $score = '';

        foreach  my $id ( 0 .. $#els  ) {
            next if ($id == 0);
            if ( $id % 2 != 0 ) {
                # gene name
                #print "$els[$id]\n";
                $genen = $els[$id];

            }
            else {
                #
                $score = $els[$id];
            }

    print "$pivot   $genen  $score\n";

        }

    #print "--\n";

    }
__DATA__
foo bar 0.3 qux 0.2
bar foo 0.15 qux 0.4
qux foo 0.3 bar 0.4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:06:32.477

**根据评论更新**

这是一个简化版本，看起来更不言自明，而且更健壮一点：

```
#!/usr/bin/perl
use warnings;
use strict;

sub transpose
{
    my $pivot =  shift || die "pivot required";
    while (my ($genen, $score) = (shift, shift))
    {
        last unless $score and $genen;
        print "$pivot   $genen  $score\n";
    }
}

for (<DATA>) {
    chomp;
    transpose(split /\s+/) unless m/^>/;
}
__DATA__
foo bar 0.3 qux 0.2
bar foo 0.15 qux 0.4
qux foo 0.3 bar 0.4 
```

输出：

```
foo   bar  0.3
foo   qux  0.2
bar   foo  0.15
bar   qux  0.4
qux   foo  0.3
qux   bar  0.4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:11:31.690

```
awk '{print $1,$2,$3} {print $1,$4,$5}' file 
```

# android - 将图像存储到 SD 卡中？

> ID：16141631
> 
> 赞同：0
> 
> 时间：2013-04-22T07:29:33.233
> 
> 标签：android

我使用以下代码捕获屏幕，然后将其存储在 sdcard 中并转到另一个活动。但是当我导航到另一个活动时非常慢。我该如何解决？请问有人可以帮我吗？

```
 View v1 = view.getRootView();    
   v1.setDrawingCacheEnabled(true);    
bitmapBcfhForm3 = v1.getDrawingCache();    
File imagesFolder = new File( Environment.getExternalStorageDirectory(), "Signatures");

            imagesFolder.mkdirs();    
            String fileName = "bitmapBcfhForm3"+AppointmentDetails.getPatientId+".png";
            File out = new File(imagesFolder,fileName);
            FileOutputStream mFileOutStream1 = new FileOutputStream(out);
            bitmapBcfhForm3.compress(Bitmap.CompressFormat.PNG, 90, mFileOutStream1); 
            mFileOutStream1.flush();
            mFileOutStream1.close();
            }
                catch (Exception e) {
                    // TODO: handle exception
                    Log.v("log_tag", e.toString()); 
                }   
         startActivity(new intent(A.this.B.classs)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:36:16.960

您正在截屏并将其保存到 ExternalStorage，此过程将阻止您的 UI 线程，因此请尝试在单独的工作线程中进行截屏并保存功能；为此，您可以使用简单的 Thread 对象，或者用户 AsyncTask

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:43:32.600

我建议您在另一个线程中执行捕获和保存任务。因为最好的选择是`AsycTask`

检查这篇[文章](https://stackoverflow.com/a/12008663/792232)，搜索并学习 Asynctask 的工作。

快乐编码:)

# android - 将 CEC 命令从电视发送到 Android 手机

> ID：16141637
> 
> 赞同：5
> 
> 时间：2013-04-22T07:30:03.613
> 
> 标签：android, hdmi

我正在尝试将 HDMI-CEC 命令从电视机发送到我的 Android 手机（它们都可以支持 CEC 协议）。虽然我已经阅读了 CEC 规范，但问题是我不知道如何仅通过 HDMI 电缆发送 CEC 命令。我知道 libCEC 做了很多事情；似乎需要购买他们的 Pulse-Eight USB - CEC 适配器。大家都知道只通过HDMI线传输CEC指令的大致进展吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T21:13:57.953

CEC 通过 HDMI 引脚 13，并且仅通过 HDMI。当您的 HDMI 不支持 CEC 时，可以使用 Pulse-Eight USB 适配器。例如，视频卡没有内置此功能。

除了普通的电视、音响系统和蓝光播放器。RaspberryPi 和 Odroid 等设备（但并非所有型号都有该软件）支持它。软件：XBMC 或 OpenELEC 完整列表只需搜索网络/论坛。

但是要从电视向手机发送命令，取决于您的手机硬件是否支持 CEC，并且您的 Android 内核是否启用了 CEC。默认情况下，带有 CEC 的 Android 尚未完成。

# api - 如何验证 azure Active Directory 用户凭据？

> ID：16141640
> 
> 赞同：7
> 
> 时间：2013-04-22T07:30:12.900
> 
> 标签：api, authentication, azure, office365, azure-active-directory

我在天蓝色的活动目录中有一组用户；在我的程序中，我将收集最终用户的用户名和密码，并希望检查 windows azure 活动目录。

可能吗？请提供一些参考。

我知道我们可以使用 Power-shell cmdlet 进行验证；我想知道是否有任何其他方式来验证用户凭据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-29T12:27:06.580

万一有人还在寻找答案。在 ADAL 版本 2.7.10707.1513-rc 中，通过`UserCredential`向`AcquireToken`.

```
public AuthenticationResult AcquireToken(string resource, string clientId, UserCredential userCredential); 
```

这是powershell的示例代码。 `$UserCred = new-object Microsoft.IdentityModel.Clients.ActiveDirectory.UserCredential("****@*****", "*****") $result = $AuthContext.AcquireToken($resource,$clientID,$UserCred)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:28:59.543

啊，我想，您正在尝试实现 SSO 场景。尝试[使用 Windows Azure AD 将登录添加到您的 Web 应用程序](http://msdn.microsoft.com/en-us/library/windowsazure/dn151790.aspx)！如果您的客户没有 Azure 订阅，此[适用于 Windows Azure Active Directory 的多租户云应用程序](http://code.msdn.microsoft.com/Multi-Tenant-Cloud-8015b84b)示例描述了使用 Azure Active Directory 身份验证库的详细信息。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T19:50:58.863

您说您“将收集最终用户的用户名和密码，并希望使用 windows azure 活动目录进行检查” - 我很确定这是不可能的，而且我确信这是不可取的。这与 OAuth 等方法的趋势相反，在这种方法中，用户可以使用相同的凭据登录许多应用程序（即将出现的部分很关键），而无需向那些“许多应用程序”透露他们的密码。

这就是联合身份验证的理念，它比允许您登录的所有应用程序直接访问您的用户名和密码的旧方法更安全。通常在这样的流程中，假设现有 Office 365 帐户，您创建并配置为使用 O365 进行身份验证的新应用程序会将用户的 Web 浏览器重定向到 O365，用户在其中键入其 O365 用户名和密码，然后同意（有一次）他们可以与这个新应用程序一起使用，然后浏览器将重定向回应用程序，并带有一个包含一些声明的安全令牌。这些声明将包括登录用户的姓名、电子邮件地址和其他信息，旨在足以识别您应用中的用户。

使用 Facebook 或 Google 进行身份验证也是如此——您的应用程序永远不会直接看到用户的密码。它甚至适用于登录 StackOverflow 本身，因此您已经看到了工作流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T17:00:16.883

希望这个 ADAL 选项也可能有所帮助。

```
ClientCredential encryptedCredentials = Convert.ToBase64String(System.Text.ASCIIEncoding.ASCII.GetBytes(string.Format("{0}:{1}", "UserX@AdX.OnMicrosoft.com", "PasswordX")));
httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic", encryptedCredentials); 
```

# wordpress - WordPress 页面模板

> ID：16141642
> 
> 赞同：3
> 
> 时间：2013-04-22T07:30:20.513
> 
> 标签：wordpress

我在创建一个 wordpress 页面模板时遇到了一些困难，该模板输出了一个包含我需要的数据的表。

我目前所有信息都正确输出，但是每个循环都会重新出现表格和标题。是否有可能，以及如何将所有数据循环到一张表中？

我的页面模板是：

```
<?php
/**
 * Template Name: GamesDBTable
 *
 * Selectable from a dropdown menu on the edit page screen.
 */
?>

<?php get_header(); ?>
        <div id="container">
            <div id="content">
<?php 
$type = 'game';
$args=array(
 'post_type' => $type,
 'post_status' => 'publish',
 'paged' => $paged,
'orderby'=> 'title', 
'order' => 'ASC',
);
$temp = $wp_query; // assign ordinal query to temp variable for later use  
$wp_query = null;
$wp_query = new WP_Query($args); 
?>
<?php 
if (have_posts()) : while (have_posts()) : the_post();
$game_identifier = get_game_identifier();
$developer = strip_tags( get_the_term_list( $wp_query->post->ID, 'developer', '', ', ', '' ) );
$genre = strip_tags( get_the_term_list( $wp_query->post->ID, 'genre', '', ', ', '' ) );
$payment = get_field('th_payment_model');
$arating = get_post_meta( $wp_query->post->ID, 'rating_average');
$rating = (($arating[0]) / 10);

;?>

<h4>Games Database</h2>
<table class="publisher">
            <thead>
                <tr>
                    <th>Game Name <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th>
                    <th>Genre <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th>
                    <th>Payment Model <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th> 
                    <th>Developer <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th>
                    <th>Rating <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th>
                </tr>
            </thead>
            <tbody>     
            <tr>
                <td><a href='<?php the_permalink() ?>'
rel='bookmark' title='<?php the_title(); ?>'>
<?php the_title(); ?></a></td>
                <td><?php echo $genre; ?></td>
                <td><?php echo $payment; ?></td>
                <td><?php echo $developer; ?></td>
                <td><?php print_r($rating); ?>/10</td>

            </tr>
                        </tbody>
        </table>    

<?php
endwhile; endif; ?>

<!-- PAGINATION --><hr class="light"/><br style="clear:both;"/><div class="aligncenter"><?php echo vpt_pagination(); ?></div>
    </div><!-- #content -->
<?php get_sidebar(); ?>
</div><!-- #container -->
<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:34:42.573

只需将表头从循环中取出，只在循环内包含表行；

```
 <table class="publisher">
        <thead>
            <tr>
                <th>Game Name <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th>
                <th>Genre <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th>
                <th>Payment Model <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th> 
                <th>Developer <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th>
                <th>Rating <a href="#" class="asc">a</a> <a href="#" class="desc">d</a></th>
            </tr>
        </thead>
        <tbody>   

        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

         <?php

         $game_identifier = get_game_identifier();
         $developer = strip_tags( get_the_term_list( $wp_query->post->ID, 'developer', '', ', ', '' ) );
         $genre = strip_tags( get_the_term_list( $wp_query->post->ID, 'genre', '', ', ', '' ) );
         $payment = get_field('th_payment_model');
         $arating = get_post_meta( $wp_query->post->ID, 'rating_average');
         $rating = (($arating[0]) / 10);

         ?>

            <tr>
                <td><a href='<?php the_permalink() ?>'rel='bookmark' title='<?php the_title(); ?>'><?php the_title(); ?></a></td>
                <td><?php echo $genre; ?></td>
                <td><?php echo $payment; ?></td>
                <td><?php echo $developer; ?></td>
                <td><?php print_r($rating); ?>/10</td>

            </tr>

        <?php endwhile; endif; ?>

        </tbody>
    </table> 
```

# c# - 给定两个字符串，一个是另一个的字谜

> ID：16141643
> 
> 赞同：6
> 
> 时间：2013-04-22T07:30:25.243
> 
> 标签：c#

我刚刚开始阅读“Cracking the Coding Interview”，并为这个问题提供了以下解决方案：

```
public static bool isAnagram(String s, String t)
{
    if (s == "" || t == "") return false;
    else if (s.Length != t.Length) return false;

    int[] letters = new int[256];
    char[] s_array = s.ToCharArray();

    foreach(char c in s_array) 
    { 
        letters[c]++;  
    }

    for (int i = 0; i < t.Length; i++)
    {
        int c = t[i];
        if (--letters[c] < 0) 
        {
            return false;
        }
    }
    return true;
} 
```

这几乎是书中逐字逐句的解决方案，仅在 C# 中，而不是在 Java 中，并且带有一些额外的空检查。我还使用 LINQ 解决了这个问题，但想要一个不涉及排序的附加解决方案。

可以使这种方法更优雅吗？代码工作得很好，我只想知道是否有更优雅或更好的解决方案。谢谢！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T07:47:51.803

此代码应该适合您：

```
public static bool IsAnagram(string s1, string s2)
{
    if (string.IsNullOrEmpty(s1) || string.IsNullOrEmpty(s2))
        return false;
    if (s1.Length != s2.Length)
        return false;

    foreach (char c in s2)
    {
        int ix = s1.IndexOf(c);
        if (ix >= 0)
            s1 = s1.Remove(ix, 1);
        else
            return false;
    }

    return string.IsNullOrEmpty(s1);
} 
```

**编辑：**添加了非 linq 版本。

您还可以为 null 和空值添加一些额外的检查，并将解决方案移至 StringBuilder 以提高性能，但代码的意图很明确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T07:59:24.403

当您要求更优雅的解决方案时，也许这个解决方案适合您的需求 - 更紧凑，编写为扩展方法：

```
public static bool IsAnagram(this string s1, string s2)
{
    if (s1.Length == s2.Length)
    {
        var count = new int[1024];
        foreach (var c in s1)
        {
            ++count[c];
        }
        return s2.All(t => --count[c] >= 0);
    }
    return false;
}

var result = "mary".IsAnagram("army"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T07:50:17.493

要正确处理所有 Unicode 字符（因为[`Char`](http://msdn.microsoft.com/en-gb/library/system.char.aspx)代表 UTF-16 代码单元），我想不出一种有效的方法。但我会尝试一个*正确*的：

```
public static bool isAnagram(String s, String t)
{
    s = s.Normalize();
    t = t.Normalize();

    if (s == "" || t == "") return false;
    else if (s.Length != t.Length) return false;

    while (s.Length > 0)
    {
        char first = s[0];
        string search = new string(first, 1);
        if (Char.IsHighSurrogate(first))
        {
            char second = s[1]; //Assumed to work - if it doesn't, the input was malformed
            search = new string(new char[] { first, second });
        }
        int index = t.IndexOf(search);
        if (index < 0) return false;
        t = (index > 0 ? t.Substring(0, index) : "") + t.Substring(index + search.Length);
        s = s.Substring(search.Length);
    }
    return true;
} 
```

否则，如果您想继续使用计数器数组 ( `letters`)，您应该使用至少可以包含 1114112 个元素的数组，并且您仍然需要正确处理代理项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T07:32:56.177

您可以对两个字符串进行排序并进行比较

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T07:44:39.057

这个非linq解决方案怎么样？

```
public static bool IsAnagram(String s, String t)
{
    if ((s == null) || (t == null) || (s.Length == 0) || (t.Length == 0) || (s.Length != t.Length))
        return false;

    var ta = t.ToCharArray();

    foreach (char ch in s)
    {
        int x = Array.IndexOf(ta, ch);

        if (x < 0)
            return false;

        ta[x] = '\0';
    }

    return true;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T07:54:25.743

基于字典的解决方案。通过计算字符来分解每个字符串，然后进行[字典](https://stackoverflow.com/a/3804852/128662)比较（请注意，这种方法让我大吃一惊）：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("jon skeet".PermutationOf("jokes net"));
        Console.WriteLine(new[] { 5, 2, 3, 4, 5 }.PermutationOf(new[] { 5, 4, 5, 2, 3 }));
        Console.Read();
    }
}

public static class Extensions
{
    public static bool IsPermutationOf<T>(this IEnumerable<T> source1, IEnumerable<T> source2)
    {
        return source1.IsPermutationOf(source2, EqualityComparer<T>.Default);
    }
    public static bool IsPermutationOf<T>(this IEnumerable<T> source1, IEnumerable<T> source2, EqualityComparer<T> comparer)
    {
        return source1.Decompose(comparer).DictionaryEqual(source2.Decompose(comparer));
    }
    public static Dictionary<T, int> Decompose<T>(this IEnumerable<T> source, EqualityComparer<T> comparer)
    {
        return source.GroupBy(t => t, comparer).ToDictionary(t => t.Key, t => t.Count(), comparer);
    }
    public static bool DictionaryEqual<TKey, TValue>(this IDictionary<TKey, TValue> first, IDictionary<TKey, TValue> second)
    {
        return first.Count == second.Count && !first.Except(second).Any();
    }
} 
```

请注意，您可以提供自定义 char 相等比较器，用于处理大写/小写问题。

我更进一步，将 重命名`IsAnagram`为`IsPermutationOf`。实际上适用于各种列表。这种方式非常有用和优雅。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-22T07:59:56.057

1.  检查长度是否相等，如果不相等，则它们不是字谜
2.  循环遍历的字符`t`
3.  检查当前 char 是否`t`存在于 中`s`，如果不存在，则它们不是 anagram
4.  如果是这样，请从`s`
5.  如果结果是空字符串，它们是字谜

    ```
    public static bool isAnagram(String s, String t) {
        if(s.Length != t.Length) 
            return false;

        for(int i = 0; i < t.Length; i++)
        {
            var n = s.IndexOf(t[i]);
            if(n < 0)
                return false;
            s = s.Remove(n, 1);
        }
        return String.IsNullOrEmpty(s);
    } 
    ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-22T07:34:42.690

排序然后比较序列工作：

```
bool isAnagram = "asdf".OrderBy(c => c).SequenceEqual("fdsa".OrderBy(c => c)); 
```

或者，您可以使用 a`Dictionary<char, int>`来跟踪字符计数（Unicode 字符有超过 256 个可能的值）。`ToArray()`此外，在迭代字符串的字符之前，您不需要调用 to 。

# php - 配置创建id的策略

> ID：16141647
> 
> 赞同：0
> 
> 时间：2013-04-22T07:30:37.153
> 
> 标签：php, cakephp, cakephp-2.3

如果我不想继续为用户可以创建的东西提供 ID（从那时起他可以看到之前创建了多少），是否可以更改创建这些键的蛋糕策略？

我只是不想让用户知道一个项目有多“成功”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:56:38.563

**UUID 是**cake 原生支持的一种可能方式：http: [//book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)

主键 char36 字段将自动使用这些 UUID。

优点：

*   整个应用程序的唯一性
*   相当有效地掩盖计数（你的主要目标）

缺点：

*   order 不再一定是正确的（依赖于 created then？），尤其是批量导入和多个创建日期。
*   需要更多空间并使查询速度变慢。

例子：

```
5168a56a-f708-41b3-81ee-2f7152b0caef
... 
```

**另一种方法是**为您的用户创建的内容使用 slug，并且始终仅通过他们的 slug 引用该内容（从不通过 id）。这样，自动递增的主键仍然可以用于内部查找和连接等，但是前端永远不会真正看到 id，因为 slug 是主要的查找字段。但是，不要忘记索引这个 slug 字段，因为字符串查找比。

# ios - 使用社交框架从 Facebook 注销

> ID：16141648
> 
> 赞同：1
> 
> 时间：2013-04-22T07:30:39.003
> 
> 标签：ios, objective-c, xcode, facebook, social-framework

我在 iOS6 中使用**SLComposeViewController**进行 Facebook 集成。它可以正常发布。但我的问题是我在应用中有一个名为 Logout 的按钮。当我点击它时，用户必须从 FaceBook 注销。我已经搜索了所有方法但失败了。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:03:11.217

我认为您不能将用户从他们的系统 Facebook 帐户中注销，也不能以编程方式撤销您的应用程序访问该帐户的能力。

最好的办法是弹出一个警报，告诉用户要更改他们的 Facebook 设置，请转到“设置”应用。

# jquery - Jquery 索引不适用于子节点

> ID：16141649
> 
> 赞同：1
> 
> 时间：2013-04-22T07:30:44.643
> 
> 标签：jquery, indexing

我想索引文档中的所有内容，然后通过其索引调用它。的HTML：

```
<ul>
  <li id="foo">foo</li>
  <li id="bar">bar</li>
</ul> 
```

获取索引的警报：

```
alert('Index: ' + $('#foo').index()); 
```

问题是它会同时提醒`0`和 的`ul`号码`#foo`。我理解这一点的逻辑，但我需要它们按顺序排列，所以`ul`应该计算`0`并且`#foo`应该是`1`。

我可以尝试什么来获得这种类型的索引？我试过`prevAll()`了，但结果是一样的。

PS 请不要这只是一个例子，实际上代码应该适用于大型文档。

[示例代码](http://jsfiddle.net/p83Rg/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:38:28.903

你可以这样做：

```
$.fn.tree_index = function() {
    var index = -1;

    $(this).parents().each(function() {
        index += $(this).index() + 1;
    });

    return index;
}

alert('Index: ' + $('#foo').tree_index()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:48:53.957

`index()`没有参数将在其父元素中查找元素的索引。但是你可以用一个参数来调用它来超越它。

假设我们正在研究您的示例

```
<ul>
  <li id="foo">foo</li>
  <li id="bar">bar</li>
</ul> 
```

解决方案可能如下所示：

```
$('ul, li').index($('ul'))   // => 0
$('ul, li').index($('#foo')) // => 1
$('ul, li').index($('#bar')) // => 2 
```

您甚至可以以编程方式执行此操作：

```
$('ul, li').each(function(i) {
  console.log(this.tagName + (!!this.id ? " #" + this.id : "") + " = " + i)
})

// UL     => 0
// LI#foo => 1
// LI#bar => 2 
```

请注意，这`$(selector).index(element)`将返回与`element`匹配的节点内的索引`selector`。

希望有帮助。

# android - ListView 不响应 ICS 中的点击：应用程序在 ICS 设备中运行异常

> ID：16141654
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:30:54.833
> 
> 标签：android, performance

我正在制作一个显示已安装应用程序列表的应用程序，并在项目上单击显示权限。此外，它在后台运行并在设备启动时启动。

在摩托罗拉里程碑上进行测试时，它运行良好。但在 Xperia (ICS) 中，出现以下问题：

1.  Listview 项目根本不响应点击。
2.  应用程序仅在后台运行，当我尝试通过任务管理器切换到它时不会恢复。
3.  由于未单击列表视图项，因此无法显示权限。

我已经阅读了一个常见问题，即应用程序在其他版本的 android 中的工作方式不同。我应该怎么做才能使我的应用程序按需要工作。

主要活动

```
package com.example.appslist;

import java.util.List;
import com.example.appslist.adapter.ApkAdapter;
import com.example.appslist.app.AppData;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import com.example.backgroundapp.BackgroundService;

public class ApkListActivity extends Activity implements OnItemClickListener {

    PackageManager packageManager;
    public static boolean isService = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        startService(new Intent(ApkListActivity.this,BackgroundService.class));
        Intent startMain = new Intent(Intent.ACTION_MAIN);
        startMain.addCategory(Intent.CATEGORY_HOME);
        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(startMain);
        isService = true;
        packageManager = getPackageManager();
        List<PackageInfo> packageList = packageManager
                .getInstalledPackages(PackageManager.GET_PERMISSIONS);

        ListView mylistview= (ListView) findViewById(android.R.id.list);
        mylistview.setAdapter(new ApkAdapter(this, packageList, packageManager));
        mylistview.setOnItemClickListener(this);

         }
        @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long row) {

          super.onResume();
          stopService(new Intent(ApkListActivity.this,
                  BackgroundService.class));

        PackageInfo packageInfo = (PackageInfo) parent
                .getItemAtPosition(position);
        AppData appData = (AppData) getApplication();
        appData.setPackageInfo(packageInfo);

        Intent appInfo = new Intent(ApkListActivity.this, ApkInfo.class);
        startActivity(appInfo);
    }
} 
```

清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.appslist"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

   <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
    android:name="com.example.appslist.app.AppData">

        <activity
            android:name="com.example.appslist.ApkListActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ApkInfo"
            android:label="@string/title_activity_apk_info" >
        </activity>

      <service android:enabled="true" android:name=".BackgroundService" />

      <receiver 
          android:enabled="true" 
          android:name="com.example.appslist.BootUpReceiver"
        >

        <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</receiver>

    </application>

</manifest> 
```

Logcat（错误模式）

```
04-22 12:07:16.155: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:07:16.155: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:07:16.155: E/MAD(1809): OK
04-22 12:07:17.557: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:07:17.557: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:07:17.557: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:07:17.557: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:07:17.577: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:07:17.577: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:07:17.597: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:07:17.597: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:07:47.125: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:07:47.135: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:07:47.145: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:07:47.145: E/MAD(1809): OK
04-22 12:08:06.554: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:08:06.564: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:08:06.564: E/MAD(1809): OK
04-22 12:08:08.216: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:08:08.216: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:08:08.226: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:08:08.226: E/MAD(1809): OK
04-22 12:08:08.226: E/MAD(1809): screen_display_process_callback: Screen state same as the last sent, not sending it again
04-22 12:08:23.761: E/HikeMessengerApp(5305): Invalid format
04-22 12:08:23.761: E/HikeMessengerApp(5305): java.lang.IllegalArgumentException: Invalid access token format.
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at twitter4j.auth.AccessToken.<init>(Unknown Source)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at com.bsb.hike.HikeMessengerApp.a(Unknown Source)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at com.bsb.hike.HikeMessengerApp.onCreate(Unknown Source)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3978)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at android.app.ActivityThread.access$1300(ActivityThread.java:127)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at android.os.Looper.loop(Looper.java:137)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at android.app.ActivityThread.main(ActivityThread.java:4448)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at java.lang.reflect.Method.invokeNative(Native Method)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at java.lang.reflect.Method.invoke(Method.java:511)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-22 12:08:23.761: E/HikeMessengerApp(5305):   at dalvik.system.NativeStart.main(Native Method)
04-22 12:08:23.831: E/HikeMqttManager(5305): Trying to connect
04-22 12:09:50.125: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:09:50.135: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:09:50.135: E/MAD(1809): OK
04-22 12:09:50.596: E/InputDispatcher(1819): channel '418dd0b0 com.example.appslist/com.example.appslist.ApkListActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
04-22 12:09:51.857: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:09:51.887: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:10:21.156: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:10:21.166: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:10:21.186: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:10:21.186: E/MAD(1809): OK
04-22 12:10:21.206: E/MAD(1809): screen_display_process_callback: Screen state same as the last sent, not sending it again
04-22 12:10:27.152: E/LockScreen(5882): Unable to parse Customfile - IOException
04-22 12:10:37.842: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:10:37.852: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:10:37.852: E/MAD(1809): OK
04-22 12:10:37.852: E/MAD(1809): screen_display_process_callback: Screen state same as the last sent, not sending it again
04-22 12:10:54.869: E/ATK(5935): Start manully kill!
04-22 12:10:54.879: E/ATK(5935): com.android.vending
04-22 12:10:54.889: E/ATK(5935): com.facebook.katana
04-22 12:10:54.889: E/ATK(5935): com.google.android.apps.plus
04-22 12:10:54.889: E/ATK(5935): com.sonyericsson.extras.liveware
04-22 12:10:54.889: E/ATK(5935): com.bsb.hike
04-22 12:10:54.899: E/ATK(5935): com.google.android.apps.maps
04-22 12:10:54.899: E/ATK(5935): com.sonyericsson.updatecenter
04-22 12:10:54.899: E/ATK(5935): com.sonyericsson.androidapp.storefront
04-22 12:10:54.899: E/ATK(5935): com.sonyericsson.music
04-22 12:10:54.909: E/ATK(5935): com.cool.fonts.texting.galaxy.changer
04-22 12:10:54.909: E/ATK(5935): com.viber.voip
04-22 12:10:54.909: E/ATK(5935): com.whatsapp
04-22 12:10:57.751: E/ATK(5935): Start manully kill!
04-22 12:11:10.194: E/HikeMessengerApp(6103): Invalid format
04-22 12:11:10.194: E/HikeMessengerApp(6103): java.lang.IllegalArgumentException: Invalid access token format.
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at twitter4j.auth.AccessToken.<init>(Unknown Source)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at com.bsb.hike.HikeMessengerApp.a(Unknown Source)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at com.bsb.hike.HikeMessengerApp.onCreate(Unknown Source)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3978)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at android.app.ActivityThread.access$1300(ActivityThread.java:127)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at android.os.Looper.loop(Looper.java:137)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at android.app.ActivityThread.main(ActivityThread.java:4448)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at java.lang.reflect.Method.invokeNative(Native Method)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at java.lang.reflect.Method.invoke(Method.java:511)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-22 12:11:10.194: E/HikeMessengerApp(6103):   at dalvik.system.NativeStart.main(Native Method)
04-22 12:11:10.264: E/HikeMqttManager(6103): Trying to connect
04-22 12:11:41.504: E/ServiceLocator(6199): ServiceLocator$VoipServiceConnection.onServiceConnected loc:com.viber.service.VoipConnectorService$LocalBinder@4148d170
04-22 12:11:41.704: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:11:41.704: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:11:41.714: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:11:41.714: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:11:43.967: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:11:43.967: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:11:43.967: E/MAD(1809): OK
04-22 12:11:43.967: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:11:56.489: E/Process(1819): Error getting pid for '0'
04-22 12:13:26.817: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:13:26.817: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:13:26.817: E/MAD(1809): OK
04-22 12:13:28.198: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:13:28.198: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:13:28.208: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:13:28.208: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:13:33.263: E/ATK(5935): Start manully kill!
04-22 12:13:33.273: E/ATK(5935): com.sonyericsson.music
04-22 12:13:33.293: E/ATK(5935): com.facebook.katana
04-22 12:13:33.293: E/ATK(5935): com.android.vending
04-22 12:13:33.293: E/ATK(5935): com.whatsapp
04-22 12:13:33.303: E/ATK(5935): com.viber.voip
04-22 12:13:33.303: E/ATK(5935): com.cool.fonts.texting.galaxy.changer
04-22 12:13:33.303: E/ATK(5935): com.sonyericsson.androidapp.storefront
04-22 12:13:33.313: E/ATK(5935): com.bsb.hike
04-22 12:13:59.809: E/ServiceLocator(6667): ServiceLocator$VoipServiceConnection.onServiceConnected loc:com.viber.service.VoipConnectorService$LocalBinder@414a1de0
04-22 12:14:03.483: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:14:03.493: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:14:03.493: E/MAD(1809): OK
04-22 12:14:03.633: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:14:28.567: E/HikeMessengerApp(6844): Invalid format
04-22 12:14:28.567: E/HikeMessengerApp(6844): java.lang.IllegalArgumentException: Invalid access token format.
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at twitter4j.auth.AccessToken.<init>(Unknown Source)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at com.bsb.hike.HikeMessengerApp.a(Unknown Source)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at com.bsb.hike.HikeMessengerApp.onCreate(Unknown Source)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3978)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at android.app.ActivityThread.access$1300(ActivityThread.java:127)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at android.os.Looper.loop(Looper.java:137)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at android.app.ActivityThread.main(ActivityThread.java:4448)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at java.lang.reflect.Method.invokeNative(Native Method)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at java.lang.reflect.Method.invoke(Method.java:511)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-22 12:14:28.567: E/HikeMessengerApp(6844):   at dalvik.system.NativeStart.main(Native Method)
04-22 12:14:28.647: E/HikeMqttManager(6844): Trying to connect
04-22 12:15:36.423: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:15:36.443: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:15:36.443: E/MAD(1809): OK
04-22 12:15:40.577: E/ATK(5935): Start manully kill!
04-22 12:15:40.587: E/ATK(5935): com.sonyericsson.music
04-22 12:15:40.607: E/ATK(5935): com.facebook.katana
04-22 12:15:40.607: E/ATK(5935): com.bsb.hike
04-22 12:15:40.617: E/ATK(5935): com.sonyericsson.androidapp.storefront
04-22 12:15:40.627: E/ATK(5935): com.cool.fonts.texting.galaxy.changer
04-22 12:15:40.627: E/ATK(5935): com.viber.voip
04-22 12:15:40.627: E/ATK(5935): com.android.vending
04-22 12:15:40.637: E/ATK(5935): com.whatsapp
04-22 12:15:55.802: E/HikeMessengerApp(6973): Invalid format
04-22 12:15:55.802: E/HikeMessengerApp(6973): java.lang.IllegalArgumentException: Invalid access token format.
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at twitter4j.auth.AccessToken.<init>(Unknown Source)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at com.bsb.hike.HikeMessengerApp.a(Unknown Source)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at com.bsb.hike.HikeMessengerApp.onCreate(Unknown Source)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3978)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at android.app.ActivityThread.access$1300(ActivityThread.java:127)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at android.os.Looper.loop(Looper.java:137)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at android.app.ActivityThread.main(ActivityThread.java:4448)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at java.lang.reflect.Method.invokeNative(Native Method)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at java.lang.reflect.Method.invoke(Method.java:511)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-22 12:15:55.802: E/HikeMessengerApp(6973):   at dalvik.system.NativeStart.main(Native Method)
04-22 12:15:55.862: E/HikeMqttManager(6973): Trying to connect
04-22 12:16:10.737: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:16:10.747: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:16:10.747: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:16:10.747: E/MAD(1809): OK
04-22 12:16:10.747: E/MAD(1809): screen_display_process_callback: Screen state same as the last sent, not sending it again
04-22 12:16:26.762: E/ServiceLocator(7069): ServiceLocator$VoipServiceConnection.onServiceConnected loc:com.viber.service.VoipConnectorService$LocalBinder@4149fc00
04-22 12:22:32.169: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:22:32.189: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:22:32.189: E/MAD(1809): OK
04-22 12:22:32.209: E/MAD(1809): screen_display_process_callback: Screen state same as the last sent, not sending it again
04-22 12:22:34.501: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:22:34.511: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:22:34.511: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:22:34.511: E/MAD(1809): OK
04-22 12:26:24.936: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:26:24.946: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:26:24.946: E/MAD(1809): OK
04-22 12:26:35.156: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:26:35.166: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:26:35.166: E/MAD(1809): OK
04-22 12:26:35.166: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:28:19.708: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=1
04-22 12:28:19.718: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:28:19.718: E/MAD(1809): OK
04-22 12:28:22.501: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:28:22.501: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:28:22.531: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:28:22.531: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:28:22.541: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:28:22.541: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:28:22.551: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:28:22.551: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:28:22.561: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:28:22.561: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:28:22.571: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:28:22.571: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:28:22.581: E/SemcSettingsParser(3941): key not found. key=[brand]
04-22 12:28:22.581: E/SemcSettingsParser(3941): key not found. key=[group-visible]
04-22 12:28:23.742: E/ATK(5935): Start manully kill!
04-22 12:28:23.762: E/ATK(5935): com.viber.voip
04-22 12:28:23.772: E/ATK(5935): com.facebook.katana
04-22 12:28:23.772: E/ATK(5935): com.sonyericsson.updatecenter
04-22 12:28:23.772: E/ATK(5935): com.google.android.apps.plus
04-22 12:28:23.772: E/ATK(5935): com.android.vending
04-22 12:28:23.772: E/ATK(5935): com.whatsapp
04-22 12:28:23.782: E/ATK(5935): com.cool.fonts.texting.galaxy.changer
04-22 12:28:23.782: E/ATK(5935): com.sonyericsson.androidapp.storefront
04-22 12:28:23.782: E/ATK(5935): com.bsb.hike
04-22 12:28:29.898: E/ServiceLocator(7597): ServiceLocator$VoipServiceConnection.onServiceConnected loc:com.viber.service.VoipConnectorService$LocalBinder@4147e3b8
04-22 12:28:53.941: E/MAD(1809): mad_at_handler_send_FD: Inside mad_at_handler_send_FD and the command is: AT*EHSTACT=2
04-22 12:28:53.951: E/MAD(1809): mad_at_handler_send_FD: Got error response: 
04-22 12:28:53.951: E/MAD(1809): OK
04-22 12:28:53.961: E/libEGL(1449): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
04-22 12:29:19.016: E/HikeMessengerApp(7891): Invalid format
04-22 12:29:19.016: E/HikeMessengerApp(7891): java.lang.IllegalArgumentException: Invalid access token format.
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at twitter4j.auth.AccessToken.<init>(Unknown Source)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at com.bsb.hike.HikeMessengerApp.a(Unknown Source)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at com.bsb.hike.HikeMessengerApp.onCreate(Unknown Source)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3978)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at android.app.ActivityThread.access$1300(ActivityThread.java:127)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at android.os.Looper.loop(Looper.java:137)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at android.app.ActivityThread.main(ActivityThread.java:4448)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at java.lang.reflect.Method.invokeNative(Native Method)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at java.lang.reflect.Method.invoke(Method.java:511)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-22 12:29:19.016: E/HikeMessengerApp(7891):   at dalvik.system.NativeStart.main(Native Method)
04-22 12:29:19.096: E/HikeMqttManager(7891): Trying to connect
04-22 12:31:55.408: E/dalvikvm(8009): Could not find class 'android.app.Notification$InboxStyle', referenced from method com.google.android.apps.plus.service.AndroidNotification.createDigestNotification$78923c81 
```

我指的是获取已安装应用程序列表的[教程](http://theopentutorials.com/tutorials/android/listview/how-to-get-list-of-installed-apps-in-android/)。我发布了一个类似的问题，有人在 main 中提出了问题，但它在 2.1 上运行良好。

请帮助和建议。:(

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:37:01.223

如果您在 listview 中使用按钮，则在您的`main.xml`文件中 In list view tag set `android:focusableInTouchMode="true"`。希望这可以帮助你。

# javascript - Apache Basic Auth 在历史记录中隐藏用户详细信息

> ID：16141658
> 
> 赞同：0
> 
> 时间：2013-04-22T07:31:08.723
> 
> 标签：javascript, apache, authentication, redirect, basic-authentication

我正在研究一种使用登录密码保护页面的方法

[http://USERNAME:PASSWORD@Domain.com/protected.html](http://USERNAME:PASSWORD@Domain.com/protected.html)

我有一个表单，用户在其中插入用户名和密码，然后在提交时，javascript 会将您重定向到基于该信息的 URL。这很好用，问题是在浏览您的历史记录时，您可以看到用户名和密码。

有没有办法重定向和隐藏用户信息？我已经尝试过 location.replace，但显然这不会保存您来自的 URL。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:54:55.807

简短的回答：没有。

一旦您将用户名和密码存储在 URL 中，您将受制于 Web 浏览器如何实现或处理 Web 历史记录。我还应该补充一点，一些工作/公司环境甚至可能有策略来清除或阻止用户清除历史记录。

如果您希望用户自动登录，您需要考虑实施“记住我”cookie，但不要忘记通过 HTTPS 坚持身份验证过程，否则您的用户将被[火烧](https://en.wikipedia.org/wiki/Firesheep)

# ios - 如何处理 iOS 6 中的重复推文错误

> ID：16141666
> 
> 赞同：5
> 
> 时间：2013-04-22T07:31:38.347
> 
> 标签：ios

我在其完成块中处理了推文取消和完成条件，它正在工作，当我发送重复推文时，它显示重复推文错误消息很好，但我的问题是在重复错误之后它显示推文已完成消息，所以我想停止推文完成消息如果出现重复的错误消息，请解决我的问题。这是我的工作代码。

```
self.tweetSheet = [[TWTweetComposeViewController alloc] init];
        [self.tweetSheet setInitialText:@"Some message."];
        [self.navigationController presentModalViewController:self.tweetSheet animated:YES];
    // Called when the tweet dialog has been closed
    self.tweetSheet.completionHandler = ^(TWTweetComposeViewControllerResult result)
    {
        NSString * msg;
        if (result == TWTweetComposeViewControllerResultCancelled)
        {
                msg = @"Tweet compostion was canceled.";
        }
        else if (result == TWTweetComposeViewControllerResultDone)
        {
            NSLog(@"result %d",result);
                msg = @"Tweet composition completed.";
        }

         UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Tweet Status" message:msg delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alertView show];
        // Show alert to see how things went...
        [self.tweetSheet dismissModalViewControllerAnimated:YES];

        // Dismiss the controller
       };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T16:17:02.237

你不能添加一个布尔值吗？，并在出现第一条消息时将`repeated = FALSE`其切换到。`TRUE`然后在您的完成处理程序块中验证

```
 else if (result == TWTweetComposeViewControllerResultDone && repeated != TRUE) {            

        NSLog(@"result %d",result);

        msg = @"Tweet composition completed.";

} 
```

# elasticsearch - 在 elasticsearch 中查找文档类型的平均存储大小

> ID：16141670
> 
> 赞同：3
> 
> 时间：2013-04-22T07:31:52.397
> 
> 标签：elasticsearch

我如何知道特定文档类型（例如，类型 1 和类型 2）的大小（以字节为单位）？

如果我尝试：

```
curl -XGET 
'http://localhost:9200/my_index/_stats?clear=true&store=true&indexing=true&types=type1,type2' 
```

我只得到索引的总大小（以字节为单位）。

我实际上对某种类型的文档的平均大小感兴趣，但这可以从计数和我猜的总大小中推断出来

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:10:17.133

不同的类型使用相同的索引进行索引，并且共享许多公共结构。所以，如果不考虑另一种类型的影响，就不可能知道一种类型的服用量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T16:51:55.747

正如上面的答案所说，弹性搜索中没有办法做到这一点。

不确定这是否明显，但我需要完成同样的事情来跟踪一些失控的索引增长，所以我添加了一个可选的调试索引，其中充当我索引中心点的应用程序实际上记录了每个索引的大小文档、索引后的 id 以及其他一些相关信息，以帮助我追踪占用所有空间的文档是什么。

这种方法不是 100% 准确的，因为压缩前的最大不一定表示压缩后的最大（很确定 ES 压缩文档，我认为将它们存储为二进制 json 格式？），但它确实为我指明了正确的方向。

# xml - 升级 Orbeon 3.8 - 4.1

> ID：16141675
> 
> 赞同：0
> 
> 时间：2013-04-22T07:32:33.663
> 
> 标签：xml, xhtml, orbeon, exist-db

我们在 eXist 数据库的标准配置中使用 Orbeon 3.8。

有没有一种方法可以轻松地将数据库升级到新的 4.1，并在新版本中提供保存的数据（表单和数据）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:47:23.300

我会：

1.  停止 Tomcat，并将`WEB-INF/exist-data`目录的内容（嵌入式 eXist 存储其数据的地方）从 3.8 版本扩展战争复制到 4.1 版本扩展战争，启动 Tomcat，并查看 eXist 是否能够处理您复制的文件。
2.  如果 4.1 中的 eXist 无法处理您复制的文件，请使用 eXist [Java Admin Client](http://exist-db.org/exist/apps/doc/java-admin-client.xml)从 3.8 中的 eXist 导出数据，然后将其导入 4.1 中的 eXist。

此外，我建议您不要使用嵌入式 eXist，而是[将 eXist 与 Orbeon Forms 分开部署](http://wiki.orbeon.com/forms/doc/developer-guide/exist-configuration)，这样您就可以相互独立地升级 eXist 和 Orbeon Forms。

# performance - 如何计算A-star算法的运行时间

> ID：16141678
> 
> 赞同：1
> 
> 时间：2013-04-22T07:32:41.190
> 
> 标签：performance, artificial-intelligence, a-star

我正在使用 A* 算法。我有一个 2D 网格，有一些障碍物，给定起始位置和最终位置，我找到了它们之间的最短路径。

这是我的伪代码

```
while(queueNotEmpty){
  removeFromPQ;
  if(removed == destination)
    found;
  insertAllNeighbours;
} 
```

删除和插入是优先队列(Heap)上的函数，时间为O(log(n))。

考虑网格的维度为 N*N。我如何计算运行时间。即这个循环将执行多少次？有什么措施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:11:40.200

标准 A* 的运行时间是解决方案长度的指数（最坏情况）。

如果您在 的网格上搜索`n*n`，并且使用图形搜索，则搜索最多会访问每个节点一次；所以它是`O(n*n)`。[但是只有在使用的启发式是单调](http://en.wikipedia.org/wiki/Consistent_heuristic)的（除了可以接受之外）时，找到的解决方案才是最佳的。

标准 A* 的多项式运行时间也[有条件](http://en.wikipedia.org/wiki/A*_search_algorithm#Complexity)。

对于图形搜索与树搜索，请参阅[此答案](https://stackoverflow.com/a/15281447/108915)。

# angularjs - D3.js 的标准/最佳颜色模式

> ID：16141683
> 
> 赞同：1
> 
> 时间：2013-04-22T07:32:50.073
> 
> 标签：angularjs, d3.js, nvd3.js

D3.js 是否有任何标准/最佳颜色模式？我使用了一些颜色，但用户界面并不好。颜色组合不好。所以如果有什么告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:03:23.970

api 文档中描述了一组标准的序数比例：

[https://github.com/mbostock/d3/wiki/Ordinal-Scales#categorical-colors](https://github.com/mbostock/d3/wiki/Ordinal-Scales#categorical-colors)

你可以像这样使用它们：

```
var colors = d3.scale.category20();

d3.select("body").selectAll("text")
   .data(d3.range(0,20))
   .enter().append("p")
   .text(function(d){return "Data point "+d})
   .style("color", colors) 
```

[http://jsfiddle.net/x4xBL/](http://jsfiddle.net/x4xBL/)

如果您克隆 d3 源，它还[包括](https://github.com/mbostock/d3/tree/master/lib/colorbrewer)color brewer 分类色标。您可以在此处了解有关它们的更多信息：

[http://colorbrewer2.org/](http://colorbrewer2.org/)

# hadoop - 在减少阶段（HADOOP）多次迭代键/值？

> ID：16141685
> 
> 赞同：2
> 
> 时间：2013-04-22T07:32:57.877
> 
> 标签：hadoop, mapreduce, iteration, key-value, reduce

如何对在 HADOOP 的 Reduce 阶段收到的键/值对进行多次迭代。我想做类似的事情，但它没有进入第二次迭代。

```
for (Vector value : values)
 {

    sum += value.getVector()[length-1];
   for (int i = 1; i < length-1; i++)
     {
      value.getVector()[i]=value.getVector()[i]/value.getVector()[length-1];
      mean[i]+=value.getVector()[i];
         }
}

for (Vector value : values)
 {
    for (int i = 1; i < length-1; i++) 
           {
            value.getVector()[i]=value.getVector()[i]/value.getVector()[length-1];
           }
} 
```

请给我解决方案？？？谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:26:17.783

您正在对结果进行迭代`values`，一旦对它们进行了迭代，就不能再这样做了。

如果总计数`values`不是太大，您可以尝试将值设置为本地集合变量，然后您应该能够多次迭代它们。

试试这个：[Java：多次使用枚举](https://stackoverflow.com/questions/10460534/java-use-enumeration-multiple-times)

# jquery - node.js + express: `sendfile` 到 Ajax 请求给出 404

> ID：16141686
> 
> 赞同：1
> 
> 时间：2013-04-22T07:33:17.317
> 
> 标签：jquery, ajax, node.js, express

节点菜鸟在这里。:) 我正在使用代码发出 Ajax 请求

```
var path = "/path/to/file.html";

$.get(path, function(data) {
    $("#post").html(data);
}); 
```

在服务器端，响应

```
app.use(express.directory(__dirname + '/public'));

app.get('/path/*', function(req, res) {
    var is_ajax_request = req.xhr;
    if(is_ajax_request)
        res.sendfile(req.path);
    else
        res.sendfile('public/index.html');
}); 
```

实际文件位于`public/path/to/file.html`. 出于某种原因，Ajax 给了我错误

```
GET http://localhost:3000/path/to/file.html 404 (Not Found) 
```

即使路径肯定是正确的。事实上，如果我删除整个`app.get`函数，它会发现文件没有问题。我应该以另一种方式响应 Ajax 请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:58:46.170

我认为你在这里有路径混乱。

你`console.log`在做之前尝试过路径`sendFile`吗？这应该很快证实它不仅仅是那么简单。

看起来你需要使用`res.sendfile('public/' + req.path)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:40:37.900

尝试这个：

```
 res.sendfile(__dirname + '/public/index.html'); 
```

您还可以参考[Render raw HTML](https://stackoverflow.com/questions/14115893/nodejs-render-raw-html-with-express)和[Render basic HTML view？](https://stackoverflow.com/questions/4529586/render-basic-html-view-in-node-js-express)

# ios - 带重音的字符串会导致 SHA256 加密崩溃

> ID：16141688
> 
> 赞同：1
> 
> 时间：2013-04-22T07:33:26.443
> 
> 标签：ios, objective-c, hash, sha256

我想从字符串创建哈希。如果字符串有带重音的字符（如 é、ő），它会因 NSASCIIStringEncoding 崩溃。它不会与 NSUTF8StringEncoding 崩溃，但在服务器上它不匹配。

```
+(NSString *) getSHA256FromString: (NSString *)clear {

    const char *s=[clear cStringUsingEncoding: NSASCIIStringEncoding];// NSUTF8StringEncoding works, but isn't the same on server
    NSData *keyData=[NSData dataWithBytes:s length:strlen(s)];

    uint8_t digest[CC_SHA256_DIGEST_LENGTH]={0};
    CC_SHA256(keyData.bytes, keyData.length, digest);
    NSData *out=[NSData dataWithBytes:digest length:CC_SHA256_DIGEST_LENGTH];
    NSString *hash=[out description];
    hash = [hash stringByReplacingOccurrencesOfString:@" " withString:@""];
    hash = [hash stringByReplacingOccurrencesOfString:@"<" withString:@""];
    hash = [hash stringByReplacingOccurrencesOfString:@">" withString:@""];
    return hash;

} 
```

# macos - 在将 XNA 游戏移植到 Mac 方面，我有哪些选择？

> ID：16141692
> 
> 赞同：0
> 
> 时间：2013-04-22T07:33:48.453
> 
> 标签：macos, xna, mono

我已经阅读了很多内容，MonoMac/Mono 似乎是最好的，如果不是唯一的方法之一的话。我确实有一台 MacBook Pro，似乎 Xamarin 购买了 Mono，并且想要 800 美元的商业版能够加载到 Visual Studio 项目中。我只下载了免费版本，所以当我尝试将我的 Mac 上的 VS 项目加载到 Xamarin 中时，它说它无法识别它，那时我发现它似乎需要一个商业版。

我的搜索发现的很多东西都是 1-2 岁甚至更早的东西。从那时起，事情似乎发生了一些变化，Xamarin 集成了 Mono 之类的东西。我已经为 PC 开发 XNA 4.0 游戏超过 7 个月了，我想要一个 Mac 版本。显然，像 Magicka 这样的游戏已经解决了这个问题，并且是在 XNA 中制作的。我计划在 Steam 上发布，所以我想我需要找到一种方法来尝试让它与 Steam 一起工作，如果这也是可能的话。我真的不经常使用我的 MacBook，而且我没有 Steam，所以我不确定如何去做。

我想它归结为这一点。我不了解 MonoMac 和 Xamarin 的现状，他们是否获得了 Mono？我需要那个昂贵的商业版吗？有替代品吗？这与能够在 Steam 上发布 Mac 版本有何关联？

我能找到的大部分信息都是几年前的，现在看起来已经发生了很多变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:46:38.797

[**MonoGame**](http://www.monogame.net/)是对包括 Mac 在内的各种平台的 XNA API 的重新实现。

它*依赖*于**Mono**提供跨不同平台的 C# 运行时。并在特定于平台的 Mono 版本（例如 Xamarin 的 MonoMac、MonoTouch 等）上提供特定于这些平台的 API 绑定和其他功能。

您不会像创建一个*新*项目那样“加载”现有的 Visual Studio 项目——无论是在 Visual Studio 中（如果工具可用并且你已经购买了它们——但我认为 Mac 不是这种情况）或 MonoDevelop 或 Xamarin 工作室。

对于您的新项目，您将添加现有源文件并添加对该平台的 MonoGame 库的引用。该 MonoGame 库将提供`Microsoft.Xna.Framework`在该平台上工作的命名空间中的类的版本。您的代码将针对这些备用类进行编译，从而为该平台创建一个特定的新二进制文件。

（MonoGame 可能会在他们的网站上有更深入的过程文档，包括如何处理游戏内容。）

简单地说：使用 MonoGame。它是 XNA 库的替代版本，而不是转换工具。

# spring - 使用 aop 处理异常

> ID：16141695
> 
> 赞同：0
> 
> 时间：2013-04-22T07:33:57.070
> 
> 标签：spring, spring-aop

我正在使用带有服装注释的 AOP，为方法添加计时器。

```
 @Around(value = "@annotation(benchmark)")
  public void func(final ProceedingJoinPoint joinPoint, final Benchmark benchmark) throws Throwable {
       //wrap the call to the method with timer
       final long t0 = System.currentTimeMillis();
       logger.error(t0 + " ");
       joinPoint.proceed();
       final long elapsed = (System.currentTimeMillis() - t0);
       logger.error(elapsed + " ");
  } 
```

当带注释的方法抛出异常时，我希望能够做一些事情。而且我不确定什么是正确的方法...

我阅读并看到有：

```
@AfterThrowing(pointcut = "execution(* com.mycompany.package..* (..))", throwing = "ex") 
```

据我了解`@AfterThrowing`并没有给我想要的东西，我需要以某种方式仅从使用基准注释注释的方法中缓存异常。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:10:23.257

在执行中，您可以指定要捕获的注释，例如：

```
@AfterThrowing(pointcut = "execution(@org.aspectj.lang.annotation.Around * com.mycompany.package..* (..))", throwing = "ex") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:14:11.617

```
<aop:config>
        <aop:aspect id="testInterceptor" ref="testid">
            <aop:pointcut expression="execution(* com.mycompany.package..* (..))"
                id="pointcutid" />

            <aop:after-throwing pointcut-ref="pointcutid"
                throwing="err" method="func" />

        </aop:aspect>
    </aop:config>

<bean id="testid" class="com.XXX.XXX.ClassNameHavingfuncMethod">  </bean> 
```

当 com.mycompany.package 类方法抛出错误时，调用 func 方法。

# php - codeigniter分页不显示链接

> ID：16141704
> 
> 赞同：1
> 
> 时间：2013-04-22T07:34:34.127
> 
> 标签：php, codeigniter, pagination

我目前正在使用codeigniter + twitter bootstrap进行一个项目，我试图在其中实现分页，但是当我在视图页面中回显链接时它什么都不显示，我已经粘贴了下面的代码，我也在我以前的项目中使用了这个代码也有它工作正常，但现在不是，我无法弄清楚这个问题，我希望有人给我一个建议。
这是我的索引函数，

```
 $this->load->helper('url'); 
    $this->load->model('albums');
    $this->load->library('pagination');

    $config = array();
    $config["base_url"] = base_url() . "admin/gallery";
    $config["total_albums"] = $this->albums->all_albums_count();
    $config["per_page"] = 2;
    $config['num_links'] = 5;
    $config["uri_segment"] = 3;

    $config['full_tag_open'] = '<div class="pagination"><ul>';
    $config['full_tag_close'] = '</ul></div><!--pagination-->';
    $config['first_link'] = '&laquo; First';
    $config['first_tag_open'] = '<li class="prev page">';
    $config['first_tag_close'] = '</li>';

    $config['last_link'] = 'Last &raquo;';
    $config['last_tag_open'] = '<li class="next page">';
    $config['last_tag_close'] = '</li>';

    $config['next_link'] = 'Next &rarr;';
    $config['next_tag_open'] = '<li class="next page">';
    $config['next_tag_close'] = '</li>';

    $config['prev_link'] = '&larr; Previous';
    $config['prev_tag_open'] = '<li class="prev page">';
    $config['prev_tag_close'] = '</li>';

    $config['cur_tag_open'] = '<li class="active"><a href="">';
    $config['cur_tag_close'] = '</a></li>';

    $config['num_tag_open'] = '<li class="page">';
    $config['num_tag_close'] = '</li>';

    $this->pagination->initialize($config);

    $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
    $data['query'] = $this->albums->get_all_albums($config["per_page"], $page);

    $data['links'] = $this->pagination->create_links();

    $data['albumcount'] = $config["total_albums"];
    var_dump($data['links']);
    var_dump($config);
    $this->load->view('layouts/admin_header');
    $this->load->view('admin/gallery_view', $data);
    $this->load->view('layouts/admin_footer'); 
```

在我的视图文件中，我使用了

```
 <?php echo $links; ?> 
```

但它什么也没显示，所以我在控制器中使用 var_dump() 来知道结果，

```
var_dump($data['links']); 
```

它给： `string(0) ""`

```
var_dump($config); 
```

它给 ：

```
array(23) { ["base_url"]=> string(41) "http://localhost/sch_manage/admin/gallery" ["total_albums"]=> int(3) ["per_page"]=> int(2) ["num_links"]=> int(5) ["uri_segment"]=> int(3) ["full_tag_open"]=> string(28) "
    " ["full_tag_close"]=> string(28) "
    " ["first_link"]=> string(13) "« First" ["first_tag_open"]=> string(22) "
    " ["first_tag_close"]=> string(5) "
    " ["last_link"]=> string(12) "Last »" ["last_tag_open"]=> string(22) "
    " ["last_tag_close"]=> string(5) "
    " ["next_link"]=> string(11) "Next →" ["next_tag_open"]=> string(22) "
    " ["next_tag_close"]=> string(5) "
    " ["prev_link"]=> string(15) "← Previous" ["prev_tag_open"]=> string(22) "
    " ["prev_tag_close"]=> string(5) "
    " ["cur_tag_open"]=> string(30) "
    " ["cur_tag_close"]=> string(9) "
    " ["num_tag_open"]=> string(17) "
    " ["num_tag_close"]=> string(5) "
    " } 
```

在我的视图页面中，我使用`<?php echo $albumcount; ?>`它正确显示专辑总数。和专辑限制也可以正常工作`$config["per_page"] = 2;` ，但当我回显分页链接时，它们没有显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:49:51.630

您正在通过每张专辑计数，`total_albums`但[分页库](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)正在寻找**`total_rows`**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T10:05:20.807

```
$this->load->model('reciever');
                $this->load->library('uri');
                $this->load->library('pagination');
                $config['base_url'] = base_url(). 'users_ci/users';
                $config['total_rows'] = $this->reciever->getRows();
                $config['per_page'] = 4;
                $config['full_tag_open'] = '<ul class="pagination">';
                $config['full_tag_close'] = '</ul>';            
                $config['prev_link'] = '&laquo;';
                $config['prev_tag_open'] = '<li>';
                $config['prev_tag_close'] = '</li>';
                $config['next_link'] = '&raquo;';
                $config['next_tag_open'] = '<li>';
                $config['next_tag_close'] = '</li>';
                $config['cur_tag_open'] = '<li class="active"><a href="#">';
                $config['cur_tag_close'] = '</a></li>';
                $config['num_tag_open'] = '<li>';
                $config['num_tag_close'] = '</li>';
                $config["num_links"] = round( $config["total_rows"] / $config["per_page"] );
                $config['users']= $this->reciever->getUsers(4,$this->uri->segment(3));
                $this->pagination->initialize($config);
                $config['pages'] = $this->pagination->create_links();
                $this->load->view('users',$config); 
```

对于你正在做的视图

```
<div><?php echo $pages; ?></div> 
```

# c - Scanf 十六进制无符号字符

> ID：16141705
> 
> 赞同：6
> 
> 时间：2013-04-22T07:34:36.033
> 
> 标签：c, hex, scanf, unsigned-char

我正在尝试更改数组中的数据，这是我的代码的一部分：

```
u_char paket[100];
//here i put some data into array and then trying to change it by user
scanf("%hhx.%hhx.%hhx.%hhx.%hhx.%hhx", &paket[0], &paket[1], &paket[2], &paket[3], &paket[4], &paket[5]); 
```

例如，当我的输入`88.88.88.88.88.88`设置`paket[0] - paket[5]`为 88 时，它也会更改`paket[6],` `paket[7]`为`paket[8]`0。

请问这怎么可能以及如何解决？我只需要改变`[0] - [5]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:49:05.997

您的代码对于 C99 及更高版本是正确的。大概您使用的是不支持`hh`长度修饰符的 C 标准库，该修饰符是在 C99 中引入的；可能是 Microsoft C 标准库。

如果你需要支持这个旧的 C 标准库，你将不得不重写你的代码以兼容 C89，例如：

```
unsigned p[6];

if (scanf("%x.%x.%x.%x.%x.%x", &p[0], &p[1], &p[2], &p[3], &p[4], &p[5]) == 6)
{
    int i;
    for (i = 0; i < 6; i++)
        paket[i] = p[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:48:26.987

你的代码很好

```
u_char paket[100];
scanf("%hhx.%hhx.%hhx.%hhx.%hhx.%hhx", &paket[0], &paket[1], &paket[2], &paket[3], &paket[4], &paket[5]) 
```

不改变 的值`paket[6], paket[7] and paket[8]`。

# c++ - 在数据结构中存储不同大小的图像，OpenCV

> ID：16141713
> 
> 赞同：2
> 
> 时间：2013-04-22T07:34:50.517
> 
> 标签：c++, matlab, opencv

我想知道是否有任何方法可以使用 OpenCV（C++）在单个数据结构中保存（或存储）不同大小的图像。例如，在 MATLAB 中，我可以使用“cell”来实现。

具体来说，我正在生成我的结果，这些结果是不同大小的图像，如果我可以将它们存储在单个数据结构中，那对我来说会很高兴。这样，我可以晚点使用它。请注意，这必须使用 C++ 和 OpenCV 完成。

我想尝试一下：std::vector。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:07:16.867

```
Yeah you can try this

    std::vector<cv::Mat> ImageDataBase;

for(int i=0;i<length_of_imageDataBase;i++)
{
  cv::Mat img = cv::imread("Address of the images");
  ImageDataBase.pushback(img);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:22:02.587

我认为问题在于您通常对 C++ 中的对象的思考方式。Matlab 要求对象在一个向量/数组/矩阵中具有相同的大小/但是应该调用它，因为它经过优化以对矩阵进行操作，并且这些操作非常依赖于矩阵的维度。

在 C++ 中，主要实体是一个对象。与 matlab 向量最相似的是一个数组，比如`cv::Mat potatoes[30]`. 然而，即使这样也只需要填充同一类的对象，而不管这些`cv::Mat`内容的大小。

所以，总结一下，你有几个选择：

*   一个数组，比如`cv::Mat crazySocks[42]`- 你需要在这里小心，因为你需要知道会有多少袜子，如果你超出数组范围，你可能会出现分段错误
*   一个向量，正如 Vinoj John Hosan 所建议的那样`std::vector<cv::Mat> jaguars`- 这是一个好主意，因为 stl 容器可以对它们的内容做一些很好的技巧，并且您可以轻松地修改向量的大小。
*   一个列表，比如`std::list<cv::Mat> toFind`- 如果您打算经常修改容器的大小，这比向量更好。
*   前面提到的任何一个，但是使用指针，例如`cv::Mat *crazyPointers[33]`- 当您要移动一些大对象时，最好只移动有关它们所在位置的信息，而不是移动对象。`cv::Mat`在内部使用它的数据做一些技巧，所以不应该是这样。

# ruby-on-rails - 如何从omniauth-twitter 中的params 数组中读取值

> ID：16141715
> 
> 赞同：0
> 
> 时间：2013-04-22T07:34:53.270
> 
> 标签：ruby-on-rails, omniauth

我将omniauth保存在auth变量中，如下所示

```
auth = request.env["omniauth.auth"] 
```

当我如下检查时

```
puts auth.inspect 
```

它给了我

```
#<OmniAuth::AuthHash credentials=#<OmniAuth::AuthHash secret="ouAWj4Hvb9qwKiDDd66ewI8Hq8pDHj8dtfgdlmvdeJDSxY8" token="136631281-Ruduz2BesDwNwcBlwCaV90H358LCA0rCfLonMCE9"> extra=#<OmniAuth::AuthHash access_token=#<OAuth::AccessToken:0x00000003f77968 @token="136631281-Ruduz2BesDwNwcBlwChghaV90H358LCA0rCfLonMCE9", @secret="ouAWj4Hvb9qwKiDDd66ewgdrfgI8Hq8pDHj8lmvdeJDSxY8", @consumer=#<OAuth::Consumer:0x00000003fdf0cb18 @key="UN8w8rgfdDodjpLVgbWFvzCw", @secret="P2MbbeW4LiIyuuSc5gcQ26hcKzQJEyfBgfdyY5g39p2bo0", @options={:signature_method=>"HMAC-SHA1", :request_token_path=>"/oauth/request_token", :authorize_path=>"/oauth/authenticate", :access_token_path=>"/oauth/access_token", :proxy=>nil, :scheme=>:header, :http_method=>:post, :oauth_version=>"1.0", :site=>"https://api.twitter.com"}, @http=#<Net::HTTP api.twitter.com:443 open=false>, @http_method=:post, @uri=#<URI::HTTPS:0x00000003f76cc0 URL:https://api.twitter.com>>, @params={:oauth_token=>"136631281-Ruduz2BesDwNwcgrBlwCaV90H358LCA0rCfLonMCE9", "oauth_token"=>"136631281-Ruduz2BesDwNwcBlgrfwCaV90H358LCA0rCfLonMCE9", :oauth_token_secret=>"ouAWj4Hvb9qwKiDDd66ewI8grHq8pDHj8lmvdeJDSxY8", "oauth_token_secret"=>"ouAWj4Hvb9qwKiDDd66ewI8Hq8pDHj8lmvdeJDSxY8", :user_id=>"136631281", "user_id"=>"136631281", :screen_name=>"sanyagrfks", "screen_name"=>"sangryamrocks"}, @response=#<Net::HTTPClientError 429 Too Many Requests readbody=true>> raw_info=#<OmniAuth::AuthHash errors=[#<OmniAuth::AuthHash code=88 message="Rate limit exceeded">]>> info=#<OmniAuth::AuthHash::InfoHash description=nil image=nil location=nil name=nil nickname=nil urls=#<OmniAuth::AuthHash Twitter="https://twitter.com/" Website=nil>> provider="twitter" uid="136631281"> 
```

知道我正在访问提供者的价值 puts `auth['provider']`。我想在 auth 中读取 @params 中的值，并想访问 value `:oauth_token`，我怎样才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:59:07.080

您可以从凭证哈希中获取令牌和秘密。只需按照此代码获取令牌和秘密

@token = auth["凭证"]["token"]

@secret = auth["凭证"]["secret"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T10:20:37.420

即使我遇到了这个问题，如果你想访问密钥，那么你可以像访问它一样访问它

```
env["omniauth.auth"]["extra"]["access_token"].consumer.key
                  or 
env["omniauth.auth"]["extra"]["access_token"].secret 
```

访问@secret

# ruby-on-rails - Rails 4.0：ActionController::RoutingError

> ID：16141718
> 
> 赞同：1
> 
> 时间：2013-04-22T07:34:57.637
> 
> 标签：ruby-on-rails, ruby

当我开始在生产模式下服务时，我得到了这个页面：

```
"The page you were looking for doesn't exist. You may have mistyped the address or the page may have moved." 
```

应用程序在开发模式下正常工作。

这是我的日志：

```
I, [2013-04-22T11:27:17.618777 #15685]  INFO -- : Started GET "/" for 127.0.0.1 at 2013-04-22 11:27:17 +0400
F, [2013-04-22T11:27:17.620365 #15685] FATAL -- : 
ActionController::RoutingError (No route matches [GET] "/"):
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0.beta1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0.beta1) lib/rails/rack/logger.rb:21:in `block in call'
  activesupport (4.0.0.beta1) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.0.beta1) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.0.beta1) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.0.beta1) lib/rails/rack/logger.rb:21:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0.beta1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  actionpack (4.0.0.beta1) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0.beta1) lib/rails/engine.rb:510:in `call'
  railties (4.0.0.beta1) lib/rails/application.rb:96:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/u164/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我的宝石文件：

```
ruby "1.9.3"
source 'https://rubygems.org'

# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'
gem 'rails', '4.0.0.beta1'

gem 'execjs'
gem 'therubyracer'

#gem 'sqlite3'
gem 'pg'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 4.0.0.beta1'
  gem 'coffee-rails', '~> 4.0.0.beta1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', platforms: :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks
gem 'turbolinks'

# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder
gem 'jbuilder', '~> 1.0.1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T21:56:04.930

在 Rails 4.0.0 中部署到生产环境时，您需要生成/创建一个索引页面，该页面应该位于 public/index.html 中。

我已使用此修复成功部署在 Amazon EC2 (AWS) 上。

例如：

```
$ rails generate controller welcome index 
```

# jcifs - Jcfis jcifs.smb.SmbException：访问被拒绝

> ID：16141724
> 
> 赞同：2
> 
> 时间：2013-04-22T07:35:13.997
> 
> 标签：jcifs

当我尝试将文件移动到 win xp 中的共享文件夹时遇到问题。

我的代码是下一个

```
import jcifs.smb.SmbFile;
import jcifs.smb.SmbFileOutputStream;
import java.io.File;
import java.io.FileInputStream;;

public class UnidadRed {

//public static void main(File enviado) throws Exception {
public static void main(String arg[]) throws Exception {
    String enviado = "C:\\Documents and Settings\\u2d8301\\Escritorio\\probando\\estadisticas.txt";
    String salida = "smb://172.22.224.64/Color";

    //Config.setProperty("jcifs.smb.client.domain", "NTDOMAIN");
    Config.setProperty( "jcifs.smb.client.username", "name");
    Config.setProperty( "jcifs.smb.client.password", "password");
    //Config.setProperty( "jcifs.netbios.wins", "172.22.224.64");
    System.out.println("Copiando fichero ''" + enviado + "'' a ''" +salida + "''");

    try {
        FileInputStream in = new FileInputStream(enviado);
        SmbFileOutputStream out = new SmbFileOutputStream(salida);
        byte[] buf = new byte[1024 * 16];
        int len, total=0;
        while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
                total+=len;
        }
        in.close();
        out.close();
        System.out.println(total + " bytes copiados.");
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

}

我尝试将 txt 移动到将自动打印文件的文件夹，当我执行时出现下一个失败：

```
Copiando fichero ''C:\Documents and Settings\u2d8301\Escritorio\probando    \estadisticas.txt'' a ''smb://172.22.224.64/Color''
    jcifs.smb.SmbException: Access is denied.
at jcifs.smb.SmbTransport.checkStatus(SmbTransport.java:563)
at jcifs.smb.SmbTransport.send(SmbTransport.java:663)
at jcifs.smb.SmbSession.send(SmbSession.java:238)
at jcifs.smb.SmbTree.send(SmbTree.java:119)
at jcifs.smb.SmbFile.send(SmbFile.java:775)
at jcifs.smb.SmbFile.open0(SmbFile.java:989)
at jcifs.smb.SmbFile.open(SmbFile.java:1006)
at jcifs.smb.SmbFileOutputStream.<init>(SmbFileOutputStream.java:142)
at jcifs.smb.SmbFileOutputStream.<init>(SmbFileOutputStream.java:97)
at jcifs.smb.SmbFileOutputStream.<init>(SmbFileOutputStream.java:82)
at jcifs.smb.SmbFileOutputStream.<init>(SmbFileOutputStream.java:54)
at apliSep.UnidadRed.main(UnidadRed.java:25) 
```

我正确输入了名称和密码，因为如果尝试无效的登录名/密码，则会出现不同的消息。

我的问题是：

**config.setProperty 中是否需要其他参数？**

感谢你所做的一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:39:46.053

我认为您的问题在[这里](https://stackoverflow.com/questions/10433119/jcifs-smb-smbexception-access-is-denied-exception-for-smb-directories)解决了。您无法为目录创建 SmbFileInputStream，因此请查看链接并将 SmbFileInputStream 更改为 SmbFile。

# php - 如何计算当前行数

> ID：16141725
> 
> 赞同：0
> 
> 时间：2013-04-22T07:35:16.153
> 
> 标签：php, mysql, row

如何计算当前行数？

如何在php中计算mysql的当前行数

我想计算当前行数我该怎么做请帮我解决这个问题谢谢请看我的例子

这是代码

```
 $result1 = mysql_query("SELECT fees,name,id,grn,dateofjoin,class,rollno FROM admission where class '2013-04-01' order by class ASC");
                    while($row = mysql_fetch_array($result1))
                    {   

                // echo out the contents of each row into a table
                echo "<tr>";
                echo '<td>' . $row['id'] . '</td>';
                echo '<td>' . $row['name'] . '</td>';
                echo '<td>' . $row['dateofjoin'] . '</td>';
                echo '<td>' . $row['grn'] . '</td>';
                echo '<td>' . $row['class'] . '</td>';
                echo '<td>' . $row['rollno'] . '</td>';
                echo "</tr>"; 
    }

 echo "<tr>";
   echo '<td>Total</td>';
   echo '<td></td>';
   echo '<td></td>';
   echo '<td></td>';
   echo '<td></td>';
   echo '<td></td>';
   echo "</tr>";  

        // close table>
        echo "</table>"; 
```

现在显示这样

```
---------------------------------------------------
Id | Name |   Date      | GRN  | Class  | Roll No |
---------------------------------------------------
1  | abc  | 2013-04-01  | 192  | 10     | 42 
4  | xyz  | 2013-04-01  | 194  | 10     | 41
6  | ggg  | 2013-04-01  | 195  | 10     | 43 
9  | dfd  | 2013-04-01  | 196  | 10     | 44 
--------------------------------------------------
Total
-------------------------------------------------- 
```

我想要这样

```
---------------------------------------------------
Id | Name |   Date      | GRN  | Class  | Roll No |
---------------------------------------------------
1  | abc  | 2013-04-01  | 192  | 10     | 42 
4  | xyz  | 2013-04-01  | 194  | 10     | 41
6  | ggg  | 2013-04-01  | 195  | 10     | 43 
9  | dfd  | 2013-04-01  | 196  | 10     | 44 
--------------------------------------------------
Total                                    4 student
-------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:36:16.603

之前`while($row = mysql_fetch_array`，请执行以下操作：

```
 $rows = mysql_num_rows($result1); 
```

改变最后一个

```
echo '<td></td>'; 
```

至

```
echo '<td>'.$total.' student</td>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:37:27.897

`echo '<td>'. mysql_num_rows($result1).'</td>';`

注意 - PHP 的 mysql 扩展已被弃用。使用[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:42:48.063

```
 $result1 = mysql_query("SELECT fees,name,id,grn,dateofjoin,class,rollno FROM admission where class '2013-04-01' order by class ASC");
 while($row = mysql_fetch_array($result1))
 {   
            // echo out the contents of each row into a table
            echo "<tr>";
            echo '<td>' . $row['id'] . '</td>';
            echo '<td>' . $row['name'] . '</td>';
            echo '<td>' . $row['dateofjoin'] . '</td>';
            echo '<td>' . $row['grn'] . '</td>';
            echo '<td>' . $row['class'] . '</td>';
            echo '<td>' . $row['rollno'] . '</td>';
            echo "</tr>"; 
}

  echo "<tr>";

  echo '<td>Total</td>';
  echo '<td colspan="5">'.$num=mysql_num_rows($result1).'</td>';
  echo "</tr>";  

    // close table
   echo "</table>"; 
```

# mysql - 将 TEXT 列默认值从 null 更改为 ''（空字符串）

> ID：16141727
> 
> 赞同：13
> 
> 时间：2013-04-22T07:35:18.180
> 
> 标签：mysql, sql

我有一个表，在创建表时未指定默认值。现在我想将默认值更改为''（空字符串）。当我运行 alter table query 时，它会成功，但如果未指定列值，则仍然在新行插入表上将 NULL 视为默认值。

表架构::

```
CREATE TABLE `table1` (
  `col1` INT(11) NOT NULL AUTO_INCREMENT,
  `col2` TEXT,
  `col3` INT(11) DEFAULT NULL,
  `col4` TINYINT(1) DEFAULT '0',
  PRIMARY KEY (`id`)
); 
```

ALTER 查询::

```
ALTER TABLE `table1` change `col2` `col2` text  default ''; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-22T08:09:14.050

Blob 和文本列不能有`DEFAULT`值 ( [Ref](http://dev.mysql.com/doc/refman/5.7/en/blob.html) )。根据平台，当您尝试执行此操作时，MySQL 可能会生成警告或错误。

将数据类型更改为更合适的类型（例如`VARCHAR`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:37:41.597

利用`modify`

```
ALTER TABLE `table1` MODIFY column `col2` text default ''; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-25T13:21:10.743

首先，表模式不正确。它会抛出错误：表中不存在键列“id”

```
CREATE TABLE `test_table1` (
  `col1` INT(11) NOT NULL AUTO_INCREMENT,
  `col2` TEXT,
  `col3` INT(11) DEFAULT NULL,
  `col4` TINYINT(1) DEFAULT '0',
  PRIMARY KEY (`id`)
); 
```

纠正问题本身

```
CREATE TABLE `test_table1` (
  `col1` INT(11) NOT NULL AUTO_INCREMENT,
  `col2` TEXT,
  `col3` INT(11) DEFAULT NULL,
  `col4` TINYINT(1) DEFAULT '0',
  PRIMARY KEY (`col1`)
); 
```

现在，如果您要运行 Alter 语句

```
ALTER TABLE `table1` change `col2` `col2` text  default ''; 
```

错误消息是：BLOB、TEXT、GEOMETRY 或 JSON 列 'col2' 不能有`default`值。[参考](https://dev.mysql.com/doc/refman/5.7/en/blob.html)

好读：[为什么文本列在 MySQL 中不能有默认值？](https://stackoverflow.com/questions/3466872/why-cant-a-text-column-have-a-default-value-in-mysql)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:16:38.253

尝试这个

```
ALTER TABLE yourtable_name ALTER COLUMN columnname SET DEFAULT ' ' ; 
```

它为我工作。希望它会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T07:37:03.133

```
ALTER TABLE `table1` change `col2` `col2` text  NOT NULL default ''; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-02T05:46:01.150

在 phpmyadmin 中，转到特定字段的“更改”选项并选择 Default2 as defined: 并将下面的文本框留空

例如：

字段频率
类型 VARCHAR
长度/值 1 20

默认 2 定义：并且文本框为空

最后点击保存按钮

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-11-08T00:35:08.043

使用以下查询更改表结构 `USE MODIFY ALTER TABLE <table> MODIFY <column> VARCHAR(<XX>) DEFAULT '';`

# php - MySQL 查询发送成功，但数据库字段为空

> ID：16141730
> 
> 赞同：0
> 
> 时间：2013-04-22T07:35:43.377
> 
> 标签：php, mysql, database

以下 2 个查询是 php 中回显的结果：

```
UPDATE glymping_userdata
SET current_location_gps = '51.9171115;4.484812'
WHERE id = 1 
```

和

```
UPDATE glymping_user_has_appointments
SET status = 'enroute',
start_location_gps = '51.9171115;4.484812'
WHERE userId = 1
AND appointmentId = 47 
```

当在数据库中手动输入并且所有字段都正确填写时，这两个查询都有效。当我让 php 文件运行查询时，查询如上所示，但“start_location_gps”和“current_location_gps”为空。

查询中的值是字符串，数据库字段是 varchar(30)。然而，数据库中的字段是空的。

位置值是从 post 方法接收的。

有谁知道我忘记了什么或做错了什么？

编辑：

例子

```
public function SendQuery($query)
{
    $results = $this->mysqli->query($query);
    return $results;
}

public function UpdateUserLocation($currentLocationGps)
{
    $query = "UPDATE ".DB_PREFIX."userdata
                SET current_location_gps = '{$currentLocationGps}'
                WHERE id = ".$this->userId;
    //echo $query;
    $this->db->SendQuery($query);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:56:54.123

您当前的代码不检查 mysqli_query 的返回值；查询可能会“静默”失败。由于 WHERE 子句中的值错误，查询也可能不会影响数据库中的任何记录。
试试看

```
if ( !$this->db->SendQuery($query) ) {
  // query failed: syntax error, connection lost, access denied,duplicate entries, ...
  trigger_error($this->mysqli->error);
}
else {
  if ( 0 < $this->mysqli->affected_rows ) {
    // WHERE clause doesn't match any record, no values changed, ...
    trigger_error('no rows affected');
  }
} 
```

您的查询也可能容易出现 sql 注入，请查看[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

# verilog - Verilog中的除法和模数

> ID：16141736
> 
> 赞同：0
> 
> 时间：2013-04-22T07:35:48.923
> 
> 标签：verilog

我在verilog中创建一个ALU只是为了模拟。但我不知道如何划分两个 16 位输入。常规`A=B/C`不起作用（其中 B,C 是 a`input[15:0]`并且 A 是`output reg[15:0]`）。与`A=B%C`.

我是否必须单独实现一个除法电路模块？我知道除法是一项非常复杂的操作，这将是实际的方法，但我只是为了模拟而这样做。有没有更短的方法来划分两个 16 位输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:44:52.380

您的代码当前执行此操作：

```
initial begin
  out1=in1/in2; out2=in1%in2;
end 
```

这不会做任何事情 -`initial`块在模拟开始时运行一次，when `in1`and `in2`are `X`'s，设置`out1`和`out2`到 X，然后停止。将您的逻辑更改为：

```
 always
      @* begin
         out1=in1/in2; 
         out2=in1%in2;
      end 
```

这每次都会执行`in1`或`in2`更改。

# java - 使用 JDBC 在 Oracle 数据库上创建 Java

> ID：16141737
> 
> 赞同：6
> 
> 时间：2013-04-22T07:35:50.523
> 
> 标签：java, oracle, jdbc

我正在尝试使用 JDBC 在 Oracle 数据库上创建 Java 源对象。

我要创建的源如下：

```
create or replace and resolve java source named "BlobIO" as package dbjava;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.io.*;

public class BlobIO {

    /**
     * Stores a blob into a local file (or even UNC-path)
     * @param blob The blob locator that should be stored in a file
     * @param filename The filename to write to
     * @param bufferSize The buffer size for data transfer
     * @return 1 if successful, 0 if failed
     */
    public static int blobToFile(java.sql.Blob blob, String filename, int bufferSize)
    {
        OutputStream os = null;
        InputStream is = null;
        boolean fail = true;
        try {

            is = blob.getBinaryStream();
            os = new FileOutputStream(filename);
            int amountRead = 0;
            byte[] buffer = new byte[bufferSize];
            while ((amountRead = is.read(buffer, 0, buffer.length)) != -1) {
                os.write(buffer, 0, amountRead);
            }
            is.close();
            os.flush();
            os.close();
            fail = false;
        } catch (IOException ex) {
            new File(filename).delete();
            System.err.println("Could not store blob to file.");
            System.err.println("File : " + filename);
            System.err.println("Reason : " + ex.getClass().getName() + " : " + ex.getMessage());
            fail = true;
        } catch (SQLException ex) {
            new File(filename).delete();
            System.err.println("Could not store blob to file.");
            System.err.println("File : " + filename);
            System.err.println("Reason : " + ex.getClass().getName() + " : " + ex.getMessage());
            fail = true;
        } finally {
            try {is.close();} catch (Exception ex) {}
            try {os.flush();} catch (Exception ex) {}
            try {os.close();} catch (Exception ex) {}
        }
        return fail? 0:1;
    }

    /**
     * Stores a blob into a local file (or even UNC-path)
     * @param query The query that should select ONLY the blob field
     * @param filename The filename to write to
     * @param bufferSize The buffer size for data transfer
     * @return 1 if successful, 0 if failed
     */
    public static int blobToFile(String query, String filename, int bufferSize) {
        try {
            Connection conn = DriverManager.getConnection("jdbc:default:connection:");
            Statement stmt = conn.createStatement();
            ResultSet rset = stmt.executeQuery(query);
            InputStream is;

            if (rset.next())
            {
                int ret = blobToFile(rset.getBlob(1), filename, bufferSize);
                if (rset.next())
                {
                    new File(filename).delete();
                    System.err.println("Could not store blob to file.");
                    System.err.println("Blob query : " + query);
                    System.err.println("File : " + filename);
                    System.err.println("Reason : too many rows");
                    rset.close();
                    stmt.close();
                    return 0;
                } else {
                    rset.close();
                    stmt.close();
                    return ret;
                }
            } else {
                System.err.println("Could not store blob to file.");
                System.err.println("Blob query : " + query);
                System.err.println("File : " + filename);
                System.err.println("Reason : no records retrieved by query");
                rset.close();
                stmt.close();
                return 0;
            }
        } catch (Exception e) {
            System.err.println(e.getMessage());
            return 0;
        }

    }

}
/ 
```

我尝试过`CallableStatement`使用 execute 方法，这给了我`error: "Missing IN/OUT parameters"` 当我尝试在普通`Statement`对象上使用 execute 方法时出现错误："

```
Non supported SQL92 token at position: 262" 
```

任何人都知道我做错了什么？似乎也无法在谷歌上找到任何东西。

编辑：这是我用来尝试执行脚本的代码（字符串`sql`包含您可以在上面看到的脚本，变量`conn`是`Connection`对象。

```
CallableStatement stat = conn.prepareCall(sql);
stat.setEscapeProcessing(false);
stat.execute(); 
```

如果我尝试仅使用 Statement 它是这样的：

```
Statement stat = conn.createStatement();
stat.execute(sql); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T12:59:06.303

好的，最终发现了问题，它需要`CallableStatement`与`setEscapeProcessing(false)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:34:02.240

请发布一个完整的完整示例。您的代码**正在运行**，以下是我的`11.1.0.7.0`数据库中的结果。首先是设置：

```
SQL> create or replace directory TMP as '/tmp';

Directory created

SQL> CREATE TABLE testBlob (a BLOB);

Table created

SQL> INSERT INTO testBlob VALUES (utl_raw.cast_to_raw('StackOverflow'));

1 row inserted 
```

第一个功能：

```
SQL> CREATE OR REPLACE FUNCTION blob2File(p_blob BLOB,
  2                                       p_path VARCHAR2,
  3                                       p_buffer NUMBER)
  4    RETURN NUMBER AS
  5  LANGUAGE JAVA NAME
  6     'dbjava.BlobIO.blobToFile(java.sql.Blob,
  7                               java.lang.String,
  8                               int) return int';
  9  /

Function created

SQL> DECLARE
  2     l_blob   BLOB;
  3     l_return INT;
  4  BEGIN
  5     SELECT * INTO l_blob FROM testBlob;
  6     l_return := blob2File(l_blob, '/tmp/test.blob', 1024);
  7     dbms_output.put_line(l_return);
  8  END;
  9  /

1 
```

对于第二个功能：

```
SQL> CREATE OR REPLACE FUNCTION queryBlob2File(p_query VARCHAR2,
  2                                            p_path VARCHAR2,
  3                                            p_buffer NUMBER) RETURN NUMBER AS
  4  LANGUAGE JAVA NAME
  5     'dbjava.BlobIO.blobToFile(java.lang.String,
  6                               java.lang.String,
  7                               int) return int';
  8  /

Function created

SQL> DECLARE
  2     l_query  VARCHAR2(1000);
  3     l_return INT;
  4  BEGIN
  5     l_query := 'SELECT * FROM testBlob';
  6     l_return := queryBlob2File(l_query, '/tmp/test.blob', 1024);
  7     dbms_output.put_line(l_return);
  8  END;
  9  /

1

PL/SQL procedure successfully completed 
```

您可以使用该[`UTL_FILE`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm#BABGGEDF)包直接在 PL/SQL 中处理文件：

```
SQL> DECLARE
  2     l_file utl_file.file_type;
  3     l_line VARCHAR2(1024);
  4  BEGIN
  5     l_file := utl_file.fopen(location => 'TMP',
  6                              filename => 'test.blob',
  7                              open_mode => 'R');
  8     utl_file.get_line(l_file, l_line);
  9     dbms_output.put_line(l_line);
 10     utl_file.fclose(l_file);
 11  END;
 12  /

StackOverflow 
```

# qt - 使私有 C++ 函数对 Qml 可见

> ID：16141739
> 
> 赞同：1
> 
> 时间：2013-04-22T07:36:09.437
> 
> 标签：qt, qml, public, private-members

我一直按照[Qt 文档](http://qt-project.org/doc/qt-4.8/qtbinding.html)中给出的方法使我的 C++ 函数可以从 Qml 调用。

这需要满足以下条件之一：

1.  使 C++ 函数`public`和`Q_INVOKABLE` 或
2.  使 C++ 函数成为`public slot`

这有时与我的课堂设计不同步。正如我想从 Qml 调用的函数，根据我的类设计是私有的。

Q1。我可以让 Qml 看到一个函数并且仍然保持私有吗？

Q2。期待这种行为是我的设计缺陷吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:48:05.610

好吧，如果您在*设计上做了一些私有*的事情，您会认为它只能在一个类中使用。现在您现在实际上要问的是我该如何解决我的设计。显而易见的答案是 - 您可以在一个类中创建一个公共包装器，该类将调用您的私有方法并将这个公共包装器发布到 QML 中，但如果您遇到这种情况，我建议您审查设计。

# iphone - FMDB 插入查询已执行但未在数据库中插入数据

> ID：16141741
> 
> 赞同：1
> 
> 时间：2013-04-22T07:36:11.033
> 
> 标签：iphone, ios, objective-c, database, sqlite

我是 SQLITE 数据库的新手，我正在使用 FMDB。在我的应用程序中，我想将一些数据插入数据库。我使用以下代码插入数据。

```
-(void)insertBookmark
{

    NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
    NSString *dbFilePath = [bundlePath stringByAppendingPathComponent:@"ISGData.sqlite"];
    FMDatabase *database = [FMDatabase databaseWithPath:dbFilePath];
    [database open];
    [database executeUpdate:@"INSERT INTO bookmark (pageno) VALUES (?);",page, nil];
    NSLog(@"%@",[database lastErrorMessage]);
    [database close];

} 
```

这里的“书签”是我的数据库中的表的名称，它有一个名为“pageno”的整数类型的实体。当我在查询应用程序中传递一个 int 值时，应用程序崩溃显示访问不正确。如果我传递一个字符串值，在我的日志中我得到“不是错误”，但这些值没有被插入到数据库中。我的代码有什么错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:44:27.367

您正在尝试修改应用程序包中的数据库。捆绑包本身是只读的。为此，您必须首先将数据库文件复制到文档目录，然后打开并修改它。

简而言之，将函数中的前三行替换为：

```
FMDatabase *database = [self openDatabase]; 
```

在`openDatabase`这个答案中定义如下：[我们如何打开一个已经存在的数据库 fmdb 以及在哪里包含它？](https://stackoverflow.com/questions/10333585/how-do-we-open-an-already-existing-database-fmdb-and-where-to-include-it/10333740#10333740)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:49:06.973

汉普斯是对的。您需要将其复制到文档目录中以执行写入操作：

```
BOOL success;
NSError *error;

NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingString:@"ISGData.sqlite"];

success = [fileManager fileExistsAtPath:filePath];
if (success) return;

NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingFormat:@"ISGData.sqlite"];
success = [fileManager copyItemAtPath:path toPath:filePath error:&error];

if (!success) {
    NSAssert1(0, @"Failed to copy DB. Error %@", [error localizedDescription]);
} 
```

# php - Mongo Map Reduce 与 PHP

> ID：16141742
> 
> 赞同：0
> 
> 时间：2013-04-22T07:36:12.743
> 
> 标签：php, mongodb, mapreduce

我是 mongo 的新手，我正在尝试计算“代码”列表的条目数

例如。

名为“CODE”的字段中的数据

```
asd
fgh
jkl
asd 
```

我试图解决的想法是如何做相当于 MySQL 的：

```
select count(id) from table where (CODE='asd' or CODE='fgh') group by CODE 
```

使其返回：

```
asd 2
fgh 1 
```

并忽略 jkl 统计信息

给出以下起点：

```
$db = $connection->$database;
$collection = $db->$table; 
```

我将如何解决这个问题，我已经阅读了 mongo 中的 map/reduce，但目前它对我来说没有多大意义。

非常感谢您提供一些指导以使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:50:15.053

您可以使用 Map Reduce，也可以使用聚合框架，这对 SQL 人员来说可能更有意义：

```
$collection->aggregate(array(
    array('$match' => array('CODE' => array('$in' => array('asd','fgh')))),
    array('$group' => array('_id' => '$CODE', 'count' => array('$sum' => 1)))
)); 
```

这类似于：

```
select count(id) from table where (CODE='asd' or CODE='fgh') group by CODE 
```

并将返回：

```
{
    {_id: asd, count: 2},
    //next document
} 
```

作为参考，您可以通读文档并查看此处的示例：http: [//docs.mongodb.org/manual/core/aggregation/](http://docs.mongodb.org/manual/core/aggregation/)

# c++ - 为什么vector的move ctor不推导出noexcept（）？

> ID：16141747
> 
> 赞同：9
> 
> 时间：2013-04-22T07:36:32.010
> 
> 标签：c++, c++11, g++, move-semantics

为什么使用自定义分配器移动构造函数`std::vector`不会`noexcept()`从分配器的行为中推断出 a？

这导致封装这种vector的类不能形成在一些`<algorithm>`s中可以正常移动的（other）vector。即使底层类型满足必要的要求（MoveInsertable 和 DefaultInsertable）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:13:32.143

我假设“`std::vector`使用自定义分配器移动构造函数”是指*分配器扩展的移动构造函数*，即这个构造函数：

```
vector(vector&& v, const allocator_type& a); 
```

主要原因是，如果`v.get_allocator() != a`那样的话，构造函数必须分配更多的内存，这可能会抛出`bad_alloc`. 在编译时无法知道给定类型的两个分配器是否总是比较相等（我已将此报告为缺陷，请参阅[LWG 2108](http://cplusplus.github.io/LWG/lwg-active.html#2108)）。

注意标准不要求此构造函数*或*`vector(vector&&)`移动构造函数是`noexcept`.

# jquery - 如何使用 jQuery 删除下拉选项？

> ID：16141750
> 
> 赞同：3
> 
> 时间：2013-04-22T07:36:42.103
> 
> 标签：jquery, drop-down-menu

我有一个包含小吃名称的下拉菜单。下拉菜单的最后一个选项是添加新零食，使用 jQuery 可以正常工作。但我只想知道是否可以从下拉菜单中删除一个选项。我的想象就像悬停在该选项上时在选项文本前显示一个小的删除图标，并且能够通过单击它的删除按钮来删除该选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:37:46.620

您可以使用`remove`：

```
$("#snackdropdown option[value='SnackName']").remove(); 
```

`#snackdropdown`您的下拉列表的名称在哪里，“SnackName”是您要删除的项目。

# ios - 如何识别IOS上平移前长按一会这样的手势？

> ID：16141758
> 
> 赞同：0
> 
> 时间：2013-04-22T07:37:07.250
> 
> 标签：ios, uigesturerecognizer

我想通过 识别平移手势`UIPanGestureRecognizer`。但是我想知道在这个平移手势之前是否有长按。如果不是，我不会考虑这个姿态。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-18T20:10:54.530

`UILongPressGestureRecognizer`就足够了。它是连续的，因此您还可以在长按后跟踪手指运动。

> 长按手势是连续的。手势开始 (UIGestureRecognizerStateBegan) 当允许的手指数 (numberOfTouchesRequired) 在指定的时间段内被按下 (minimumPressDuration) 并且触摸没有超出允许的移动范围 (allowableMovement)。每当手指移动时，手势识别器就会转换到 Change 状态，并在任何手指抬起时结束 (UIGestureRecognizerStateEnded)。

请参阅[文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILongPressGestureRecognizer_Class/index.html#//apple_ref/occ/cl/UILongPressGestureRecognizer)。

# windows - 在 Windows 7 上点击适配器

> ID：16141760
> 
> 赞同：1
> 
> 时间：2013-04-22T07:37:10.523
> 
> 标签：windows, python-2.7, wmi, tun

我正在尝试在 Windows 上使用 python 创建隧道程序。这些是以下步骤： 1 - 我下载了 tun/tap 设备 2 - 使用 WMI 能够更改 IP 地址元素

我现在面临一个问题。当我使用 WMI 更改它时，Tun\tap 显示“IPEnabled = False”。它不会更改接口中的任何内容，即使提供 ip、defaultgateway、子网掩码也是如此。但是，当我在其上应用相同的命令时，它确实会改变我的无线接口。

出了什么问题？这是解决这个问题的最好方法吗？

提前致谢。

# ruby-on-rails - 将嵌套资源与 Cancan 一起使用

> ID：16141764
> 
> 赞同：1
> 
> 时间：2013-04-22T07:37:20.287
> 
> 标签：ruby-on-rails, cancan

我正在尝试将 Rails 嵌套资源与 cancan 一起使用。我有一个`Dog`模型和一个`Friendship`模型。

```
class Dog < ActiveRecord::Base
  has_many :friendships
  has_many :friends, :through => :friendships
  has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
  has_many :inverse_friends, :through => :inverse_friendships, :source => :dog      
end

class Friendship < ActiveRecord::Base
  belongs_to :dog
  belongs_to :friend, :class_name => "Dog"
end 
```

在里面`FriendshipsController`我有以下定义：

```
load_and_authorize_resource :dog
load_and_authorize_resource :friendship, :through => :dog 
```

在能力上，`:read Dog`如果它是同一只狗，或者如果他们是朋友，或者如果这是管理员狗，则可以......

```
 can [:read, :show], Dog do |d|
            d.id == dog.id or d.friend_of? dog.id
        end 
```

更多的能力类：

```
class Ability
  include CanCan::Ability

  def initialize(dog)
    if dog.admin?
        can :manage, :all
    else
        if dog.guest?
            # anyone can register
            can [:create], :dog
        else
            can [:show, :update, ...], Dog, :id => dog.id

            can [:read, :show], Dog do |d|
                ((d.id == dog.id) or (dog.friend_of? d))
            end
        end

    end

  end
end 
```

管理员可以查看`:index`每只狗的友谊，但狗不能`:index`拥有自己的友谊或朋友的友谊。

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:13:03.703

您已为管理员授予“管理”“全部”权限，因此他可以查看所有友谊。

但是您没有授予非管理员狗的任何友谊权限。

跳过索引操作的“友谊”授权。

```
load_and_authorize_resource :friendship, :through => :dog, :except => [:index] 
```

在 Friendships 控制器中，Index 动作将仅基于 dog 模型进行授权，而所有其他动作将基于 dog 以及 Friendships 模型进行授权。

# c++ - 转换 std::vector 进入数据集^

> ID：16141766
> 
> 赞同：0
> 
> 时间：2013-04-22T07:37:24.213
> 
> 标签：c++, c++11, dataset, c++-cli, mixed-mode

我有一个 c++ 结构向量，我需要将它放入一个托管的类型化数据集中。

```
std::vector<Record*> record_collection;

class Record{
public:
Record(){};
virtual ~Record(){};
virtual void serialize(std::ostream& dest){
    dest << "Record" << std::endl;
}
}; 
```

Record* 是一个基类 - 我需要处理派生类。一个典型的例子是

```
class TestRecord:public Record{
public:
    TestRecord(){};
    ~TestRecord(){};
    std::string t_str;
    int t_int;
    double t_double;
    void serialize(std::ostream& dest){
        dest << t_int << ',' << t_double << ',' << t_str << ',' << std::endl;
    };
}; 
```

本质上，我需要重现 serialize 方法，除了我需要为 、 和 制作 DataColumns `t_str`，`t_int`适当`t_double`地键入列，然后将值放入其中。

此时我可以根据需要编辑任何内容，但我需要设置模式，以便实现记录的任何内容都可以将其数据成员序列化为具有类型列的托管数据集。

任何人都可以就一种模式或建议提出建议，这会有所帮助吗？如果这是 Python，我可以通过检查元组来做到这一点，但在 c++11 中，元组需要是预定义的类型。

这里的问题是我可能无法使用 /cli 编译记录或 TestRecord，在这种情况下，我可以将数据表传递给记录并让它自己填充 - 所以我正在寻找比我拥有的更好的解决方案：

*a) 为每个*派生类编写一个托管包装器b) 进行类型检查。

有没有我错过的模式？

谢谢，梅兰妮

# ruby-on-rails - Rails 嵌入式表单中的路由错误

> ID：16141767
> 
> 赞同：0
> 
> 时间：2013-04-22T07:37:26.417
> 
> 标签：ruby-on-rails, ruby

我在 html 表中嵌入了一个 rails 表单作为一个简单的下拉菜单。我还以这样一种方式实现了表单，即只要下拉菜单中有更改，就会提交表单。但是我遇到了一个我正在尝试解决的路由错误。

## 表格代码：

```
 <td>
            <%= form_for(lead, :action => 'update_lead_status', :html => {:id => 'lead_form'}, :remote => true) do |f| %>
                <%= f.select(:status, ["to_call","called","confirmed","lite"], {:selected => lead.status}, :onchange => "$('#lead_form').submit();") %>
            <% end %>
    </td> 
```

## routes.rb 文件：

```
get 'leads/:id/edit_lead_status' => "leads#edit_lead_status"
  put 'leads/:id/update_lead_status'=> "leads#update_lead_status" 
```

## Leads_controller.rb 文件：

```
#PUT
  def update_lead_status
    @lead = Lead.find(params[:id])
    respond_to do |format|
      format.js
      if @lead.update_attributes(params[:lead])
        format.html { redirect_to leads_url, notice: 'Lead was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @lead.errors, status: :unprocessable_entity }
      end
    end
  end 
```

此外，我在表格中的嵌入表单位于 /leads URL，我尝试在成功更新时重定向。

## 我服务器的日志：

```
ActionController::RoutingError (No route matches [PUT] "/leads/130"): 
```

status 是我的潜在客户模型中的可访问属性。

请让我知道我哪里出错了？

**更新：**

所以我尝试了sevenseacat的答案，它调用了我的update_lead_status，但参数错误。我的桌子是这样的：

```
<% @leads.each do |lead| %>
  <tr>
    <td><%= lead.id %></td>
    <td><%= lead.prefix %></td>
    <td><%= lead.name %></td>
    <td><%= lead.mobile %></td>
    <td><%= lead.phone %></td>
    <td><%= lead.category %></td>
    <td><%= lead.area %></td>
    <td><%= lead.city %></td>
    <td><%= lead.updated_at %></td>
    <td><%= lead.is_valid %></td>
    <td><%= lead.vendor_status %></td>
    <td><%= lead.call_tries %></td>
    <td>
        <%= form_for(lead, url: update_lead_status_path(lead.id), :html => {:id => 'lead_form'}, :remote => true) do |f| %>
            <%= f.select(:status, ["to_call","called","confirmed","lite"], {:selected => lead.status}, :onchange => "$('#lead_form').submit();") %>
        <% end %>
    </td>
    <td><%= lead.remarks %><%= link_to lead.remarks, :controller => "leads", :action => "edit_lead_remarks", :id => lead, :remote => true %>
    </td>
  </tr>
<% end %> 
```

在这里，对于表中的每一行，它都将 id 作为表中第一个潜在客户的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:51:40.333

在您的 routes.rb 文件中添加以下代码行后尝试。

```
resources :leads 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:53:17.007

您没有正确指定表单的操作 URL - 例如应该是`form_for(lead, url: update_lead_status_path(lead))`

（假设您已在您的 routes.rb 中[命名您的路线](http://guides.rubyonrails.org/routing.html#naming-routes)`as: :update_lead_status`，例如）。

# java - 如何从Java中的长字符串中排除字符串的所有子序列

> ID：16141770
> 
> 赞同：2
> 
> 时间：2013-04-22T07:37:43.420
> 
> 标签：java, regex, regular-language

如何使用 Regex 和 ReplaceAll 方法在 Java 中编写代码，该方法将从长字符串中排除所有子序列：

> :' 转到 '
> :+ 转到 +
> +' 转到 '

例如，如果我有：

> string U:'0 归约后为 U'0
> string U+'0 归约后为 U'0

如果我有一个长字符串，则应重复该操作，直到这三个操作的所有组合不再更改该字符串。

我对正则表达式不太擅长，所以我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:46:33.360

我不确定正则表达式是否是正确的工具。你有什么理由不能这样做：

```
String myString = "This U:'0 is a U+'0 string."
myString = myString.Replace(":'", "'");
myString = myString.Replace(":+", "+");
myString = myString.Replace("+'", "'"); 
```

除非转换背后的逻辑比您实际建议的要复杂得多，否则没有理由认为这还不够。

# templates - 如何将变量传递给 Marionette ItemView 模板

> ID：16141771
> 
> 赞同：2
> 
> 时间：2013-04-22T07:37:46.143
> 
> 标签：templates, variables, marionette

我正在使用木偶来渲染我的视图和模板。

除了将集合传递给我的视图之外，我还需要在模板中显示其他自定义变量，例如“昵称”，如下所示

我目前只将一个集合传递给我的“message_view”。我如何也可以为“昵称”传递自定义变量？

```
//template JST["backbone/templates/messages/index"]
.message_wrapper
  .title
    //NEED TO DISPLAY NICKNAME here
    %h4 Chat with <%= nickname %>
  %ul.messages
    %li.message.load_more_messages 
```

视图和控制器设置如下：

```
List.Controller =
  listMessages: (nickname) ->
    messages = new Onethingaday.Collections.MessagesCollection()
    messages.url = "/v1/messages/#{nickname}.json"

    messages.remoteGet
      success: (collection, response) =>
        //ONLY PASSING IN COLLECTION TO MESSAGE VIEW, NEED VARIABLE NICKNAME AS WELL
        messages_view = new List.Messages
          collection: collection

        @layout.messagesRegion.show(messages_view)

class List.Message extends Marionette.ItemView
  template: JST["backbone/templates/messages/message"]
  className: 'message'
  tagName: 'li'

class List.Messages extends Marionette.CompositeView
  template: JST["backbone/templates/messages/index"]
  itemView: List.Message
  itemViewContainer: "ul.messages" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:55:56.143

您可以使您的收藏 url 属性成为一个函数，并使用解析将昵称映射到您的收藏。

```
Onethingaday.Collections.MessagesCollection = Backbone.Collection.extend({
  initialize: function(){
    this._nickname = "a_sane_default";
  },
  setNickname : function(nickname) {
    this._nickname = setValue;
  }
  url: function(){
    return "/v1/messages/" + this._nickname + ".json";
  },
  parse: function(res) {
    var self = this;
    return _.map(res, function(source) {
      obj = _.clone(source);
      obj.nickname = self._nickname;
      return obj;
    }
  }
 }); 
```

*（咖啡）*

```
class Onethingaday.Collections.MessagesCollection extends Backbone.Collection
  initialize: -> 
    @_nickName = "a_sane_default"
  setNickname: (nickname) -> 
    @_nickName = nickname
  url: ->
    return "/v1/messages/#{@_nickname}.json"
  parse: (res) ->
    return res.map (source) =>
      obj = _.clone(source)
      obj.nickname = @_nickname
      return obj 
```

*   解析：[http ://backbonejs.org/#Collection-parse](http://backbonejs.org/#Collection-parse)
*   网址：[http ://backbonejs.org/#Collection-url](http://backbonejs.org/#Collection-url)

# java - 在 netbeans JavaDB 数据库或 SqlLite 中有图像

> ID：16141777
> 
> 赞同：1
> 
> 时间：2013-04-22T07:38:05.283
> 
> 标签：java, database, jdbc, cachedrowset

如何在 netbeans javaDB 数据库（服务选项卡/或 SqlLite 下使用的数据库）中插入和检索图像。属性类型将是什么类型？以及如何使用 CachedRowSet 获取它？

如果需要安装 JavaDB：glassfish-3.1.2.2\javadb JavaDB 位置：.netbeans-derby

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:46:29.410

SqlLite 不能使用 java 将新图像插入数据库。它是只读的。您可以使用数据库将图像插入数据库。不是来自java。如果您不必将图像插入数据库意味着您选择 SqlLite ..

# c# - c# WinForm 应用程序中的许多非托管内存

> ID：16141778
> 
> 赞同：1
> 
> 时间：2013-04-22T07:38:09.147
> 
> 标签：c#, winforms, .net-4.0, unmanaged, ram

我有 ac#winform 应用程序。现在在显示主屏幕时启动后，我有大约 110MB 的大量非托管内存，整个托管内存约为 20 MB。

这里有一些可能不常见的事情：

*   该应用程序由许多总成 98 MB 文件大小的程序集组成。
*   一些表单有一个 wpfhost，但这次加载了（但可能是其他一些 WPF 框架库）
*   公羊似乎没有增长。
*   有很多字符串显示其中许多是 WPF 的一部分，例如“margin”
*   Main 表单很大，有一个大约 30 行的基础数据集。

当我在控制台应用程序中使用**Assembly.Load**加载所有程序集时，它们只需要 1 MB 的非托管 ram。

这个非托管内存从哪里来？有人可以告诉我可能涉及哪些元素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:30:22.197

我已经使用了探查器（ANTS Profiler） 现在终于找到了原因。

问题是在那个 winform 应用程序中是一个 WPF 元素主机。这需要大约 25 MB 非托管内存（用于 wpf 环境的 Ithinkg），然后从 DevExpress 和 Infragistics 控件中获取大约 50 MB :-(

这并没有太多，但我可以使用它们的以下控件来重现它： 1 空网格 1 空树 1 RichtextCon1trol 1 Outlookpane

我认为他们都有某种已初始化的框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:58:13.573

解决方案：使用工具和分析解决方案分析您的代码！

•<strong>显示了很多字符串，其中许多是 WPF 的一部分，例如“margin”

小心使用“字符串”！如果处理得当，垃圾收集器不喜欢并且倾向于拾取大量垃圾。

我建议您使用一个非常好的程序，该程序将有助于显示您的应用程序中分配内存的时间和位置！微软的“ **CLR Profiler** ”。是一个很好的应用工具。净，C# Asp。Spéciallement 研究了使用垃圾收集器来计算分配给应用程序的内存的性能和大小的应用程序。我自己使用并允许我大大减少内存使用量。

[如何使用 clr profiler](http://msdn.microsoft.com/en-us/library/ff650691.aspx)

[下载 clr 分析器](http://download.microsoft.com/download/4/4/2/442d67c7-a1c1-4884-9715-803a7b485b82/clr%20profiler.exe)

# jquery - Ajax Post Content Type : Application / Json Block the request

> ID：16141780
> 
> 赞同：0
> 
> 时间：2013-04-22T07:38:14.930
> 
> 标签：jquery, ajax, json, post, content-type

这是我的 Ajax 请求：

```
$.ajax({
      网址：''，
      类型：'POST'，
      数据：JSON.stringify（{国家：jcountry，地区：jregion，来自：jfrom，to：jto，货币：jcurrency}），
      处理数据：假，
      内容类型：'应用程序/json'，  
      数据类型：'json'，
      成功：函数（）{
      警报（“成功”）
      $.mobile.changePage("menu1.html");
      },
      错误：函数（xhr，ajaxOptions，throwError）{
      alert("错误：" + xhr.status + "\n" +
             "消息：" + xhr.statusText + "\n" +
             "响应：" + xhr.responseText + "\n" + throwedError);
      $.mobile.changePage("menue2.html");
      }
      });

```

如果我不精确的内容类型，我再也看不到我对 firebug 的请求。相反，当我添加内容类型时，我可以看到 POST 请求（错误导致我的 URL 为 false），但在我的标头中，内容类型默认为 url 编码形式。

我想要的是通过 JSON 数据发送我的表单的详细信息。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T07:10:24.980

您将 contentType 拼错为 content-Type

```
$.ajax({
    url: '',
    type: 'POST',
    data: JSON.stringify({
        country: jcountry,
        region: jregion,
        from: jfrom,
        to: jto,
        currency: jcurrency
    }),
    processData: false,
    ContentType: 'application/json',
    dataType: 'json',
    success: function () {
        alert("success")
        $.mobile.changePage("menu1.html");
    },
    error: function (xhr, ajaxOptions, thrownError) {
        alert("Error: " + xhr.status + "\n" +
            "Message: " + xhr.statusText + "\n" +
            "Response: " + xhr.responseText + "\n" + thrownError);
        $.mobile.changePage("menue2.html");
    }
}); 
```

# sql - 此处不允许使用虚拟列

> ID：16141786
> 
> 赞同：5
> 
> 时间：2013-04-22T07:38:45.603
> 
> 标签：sql, oracle

我正在尝试使用`VIEW`as在表中插入一行

```
INSERT INTO FIELDI18N(LANGUAGE_ID) VALUES (1); 
```

但它给了我以下错误：

```
Error starting at line 5 in command:
INSERT INTO FIELDI18N(LANGUAGE_ID) VALUES (1)
Error at Command Line:5 Column:22
Error report:
SQL Error: ORA-01733: virtual column not allowed here
01733\. 00000 -  "virtual column not allowed here"
*Cause:    
*Action: 
```

任何线索？

添加了视图定义：

```
CREATE OR REPLACE VIEW FIELDI18N("FIELDID", "NAME", "TYPE", "DESCRIPTION", "LANGUAGE_ID")
AS
  (SELECT field.fieldid,
    field.type,
    NVL(i18n.name, field.name) name,
    NVL(i18n.description, field.description) description,
    i18n.language_id
  FROM fields field
  JOIN i18n_fields i18n
  ON (field.fieldid    = i18n.fieldid)
  ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:45:47.930

LANGUAGE_ID 可能是一个计算字段，或者在任何情况下，数据库都无法根据您需要的更改来推断要对视图下的表进行哪些更改。得看视图定义代码才知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-21T18:27:48.620

我相信，为了使用视图进行插入或更新，视图中的所有表都必须通过主键连接。这是为了防止由于无法更新的视图导致的重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T06:54:02.387

您是否有充分的理由不只是插入基础表？如果可以，只需直接插入表中即可避免这种复杂性。

你希望甲骨文做什么？您是否期望它将新记录插入到 中`i18n_fields`？

如果您真的想这样做，您将需要创建一个 INSTEAD OF 触发器，因为当您运行插入语句时，Oracle 无法确定它应该插入哪个基础表。

# iphone - 为蓝牙或 WiFi 设备开发 iPhone 软件（指南）

> ID：16141790
> 
> 赞同：0
> 
> 时间：2013-04-22T07:39:34.560
> 
> 标签：iphone, ios, bluetooth, wifi

例如，我有 5 个灯和 2 个扬声器，我想通过蓝牙或 WiFi 连接到我的 iPhone。我想通过 iPhone 服装制作软件播放音乐和开灯和关灯。

那么我应该从哪里开始呢？我应该阅读什么（网页、论坛）？我需要什么样的硬件？有什么好的例子吗？

欢迎任何指导或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:25:17.733

核心蓝牙

CoreBluetooth 框架提供对蓝牙 4.0 低功耗设备的访问。

[https://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html](https://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)

[https://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012194](https://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012194)

# php - PHP：解析不同文件/命名空间中的类型

> ID：16141791
> 
> 赞同：1
> 
> 时间：2013-04-22T07:39:36.800
> 
> 标签：php, thrift

我正在尝试为用 C 编写的 Thrift 服务器编写 PHP 客户端。我正在按照[http://chanian.com/2010/05/13/thrift-tutorial-a-php-client/](http://chanian.com/2010/05/13/thrift-tutorial-a-php-client/)提供的教程进行操作。

我对 PHP 很陌生，我怀疑我缺少一些语言基础知识。

有问题的代码是：

```
<?php 
// Setup the path to the thrift library folder
$GLOBALS['THRIFT_ROOT'] = 'Thrift';

// Load up all the thrift stuff
require_once $GLOBALS['THRIFT_ROOT'].'/Thrift.php';
require_once $GLOBALS['THRIFT_ROOT'].'/protocol/TBinaryProtocol.php';
require_once $GLOBALS['THRIFT_ROOT'].'/transport/TSocket.php';
require_once $GLOBALS['THRIFT_ROOT'].'/transport/TBufferedTransport.php';

// Load the package that we autogenerated for this tutorial
require_once $GLOBALS['THRIFT_ROOT'].'/packages/encabulationgame/EncabulationGame.php';

// Several things might go wrong
try {
    // Create a thrift connection (Boiler plate)
    $socket = new TSocket('localhost', '65123'); <--error is here 
```

我收到一个错误“第 22 行的 /var/www/foo/scores.php 中找不到类 'TSocket'”

TSocket 在 Thrift/transport/TSocket.php 中定义。Thrift/transport/TSocket.php 文件（已删除注释）内容如下：

```
<?php

namespace Thrift\Transport;

use Thrift\Transport\TTransport;
use Thrift\Exception\TException;
use Thrift\Exception\TTransportException;
use Thrift\Factory\TStringFuncFactory;

/**
 * Sockets implementation of the TTransport interface.
 *
 * @package thrift.transport
 */
class TSocket extends TTransport { 
```

如果我将代码更改为：

```
 $socket = new Thrift\Transport\TSocket('localhost', '65123'); 
```

然后我的代码（至少，这一行）不再抛出错误。我很好奇：本教程的作者做了什么来让这段代码在他的系统上运行而我没有在我的系统上运行？

其次，我试图通过添加以下行来解决问题：

```
use Thrift\Transport; 
```

在我创建 $socket 之前添加到我的文件中，但这并没有像我预期的那样解决问题。

如何说服 PHP 解析在另一个文件中定义的这种类型？（我必须解决的几个文件中有几种类型。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:22:00.163

PHP 不会导入整个命名空间，而是必须“使用”每个要导入的命名空间类。而不是`use Thrift\Transport;`写

```
use Thrift\Transport\TSocket; 
```

[这在Using Namespaces: Aliasing/Importing](http://uk1.php.net/manual/en/language.namespaces.importing.php.)下的手册中有更详细的描述。这篇文章有可能是在 Thrift 命名空间之前写的吗？

# java - 在 C 源代码中查找按位和操作

> ID：16141793
> 
> 赞同：2
> 
> 时间：2013-04-22T07:39:41.737
> 
> 标签：java, regex

美好的一天正则表达式大师，

我只是想请求一些关于 REGEX 的帮助。

如何在 C 源代码中找到按位 & 运算符？

目前我已经有了这个正则表达式：

```
[^\&=](\&)[^\&] 
```

案例#1：应该返回：3（当前返回3，没关系）

```
 :
u1_dfsmd_igbt_sdown = ( u1r_dfsmd_igbt[IGBT_WSDOWN] &
u1r_dfsmd_igbt[IGBT_SSDOWN] &
u1r_dfsmd_rcv_wsdown &
u1r_dfsmd_rcv_ssdown ) ;
                 : 
```

案例 #2：应该返回：0（当前返回 1，这是不行的）

```
 :
scanf ("%d", &i)
                 : 
```

Case #3 : : should Return : 0 （当前返回 0，没关系）

```
 :
if (xx && yy && zz) {
//Some statements here
}
                 : 
```

我是一个使用 RegEx 的初学者（我当前的 Regex 可能是蛮力的）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T14:38:10.157

这还不够吗？

```
\s\&=?\s 
```

它是以任何空白字符 [ \t\n\x0B\f\r] 为前缀的 '&' 和可选的 '=' 并以任何空白字符（包括换行符）为后缀。我没有对此进行测试，也不知道所有标准，但我希望它有所帮助。

# asp.net-mvc - MVC Razor 在 for 循环中使用 CheckBoxFor

> ID：16141795
> 
> 赞同：0
> 
> 时间：2013-04-22T07:39:47.897
> 
> 标签：asp.net-mvc, razor

我的视图模型：

```
public class SendFileDeviceViewModel
  {
    public string DeviceName { get; set; }
    public int DeviceId { get; set; }
    public string ManagementGroupName { get; set; }
    public int ManagementGroupId { get; set; }
  }

  public class SendFileManagementGroupViewModel
  {
    public string ThisManagementGroupName { get; set; }
    public List<SendFileDeviceViewModel> DeviceList { get; set; }
  } 
```

我的观点：

```
@model Ceridian.Wfm.DeviceManager.Models.Terminals.SendFileManagementGroupViewModel
@{
  ViewBag.Title = "Index";
  Layout = "~/Areas/Terminals/Views/Shared/Master/_TerminalLayout.cshtml";
}
@section termimalContent {

  @using (Html.BeginForm())
  {
    @Html.ValidationSummary(true)

    foreach (var dev in Model.DeviceList)
    {

    <fieldset>
        <legend>@dev.DeviceName - [ @dev.ManagementGroupName ]</legend>

          @Html.CheckBoxFor(m => m.

        </fieldset>
    }
    }
  } 
```

lambda 返回我的整个模型，而不是`dev`. 任何人都可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:42:02.783

抱歉，在 SO 上找到了这个

```
@Html.CheckBoxFor(m => dev.reloadConfiguration) 
```

# sql - 如何从 SQL 查询结果中将特定行返回到底部？

> ID：16141796
> 
> 赞同：2
> 
> 时间：2013-04-22T07:39:50.767
> 
> 标签：sql, sql-server

我有一个简单的 sql 查询，它将数据返回为

```
select [BusinessModel], count(*) As Total from DimHotelExpand
group by [BusinessModel] 
```

结果如下：

```
DA        53894
DL        7098
ECM       1472
Flex      14789
GDS       33487
Lead      1499050
MT        71306
Unknown   572467 
```

我希望值“Lead”的行出现在结果的底部。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:47:03.377

试试这个——

```
SELECT 
      d.BusinessModel
    , Total = COUNT(1)
FROM dbo.DimHotelExpand d
GROUP BY d.BusinessModel
ORDER BY 
      CASE WHEN d.BusinessModel = 'Lead' THEN 0 ELSE 1 END
    , Total 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:49:11.590

如果您不知道 Lead 是否始终具有最大价值，您可以试试这个：

```
select 
    [BusinessModel], count(*) As Total 
from DimHotelExpand
group by 
    [BusinessModel] 
order by 
    case [BusinessModel] when 'Lead' then 1 else 0 end asc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:02:39.367

您可以尝试使用“联合所有”。

```
select [BusinessModel], count(*) As Total from DimHotelExpand
where [BusinessModel] <> 'Lead'
group by [BusinessModel] 
union all
select [BusinessModel], count(*) As Total from DimHotelExpand
where [BusinessModel] = 'Lead'
group by [BusinessModel] 
```

我相信“订购方式”的解决方案不能正常工作。只有在“Lead”是更大的业务模型时才能正常工作。

我认为 frikozoid 解决方案也是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T07:45:16.720

您可以按总列排序（因为潜在客户的数量更高），如下所示：

```
SELECT [BusinessModel], count(*) As Total from DimHotelExpand
GROUP BY [BusinessModel]
ORDER BY count(*) 
```

# windows - 如何在 nodejs 上的 spawn 中运行 cmd

> ID：16141798
> 
> 赞同：0
> 
> 时间：2013-04-22T07:40:05.880
> 
> 标签：windows, node.js, cmd

我想在 spawn 中运行 cmd，但是当我运行命令时，你不会得到回复。我该如何解决？

```
var terminal = require('child_process').spawn('cmd', ['/K'], { timeout : 1000*60*60*24 });
terminal.stdin.setEncoding = 'utf-8';
terminal.stdin.write(new Buffer('dir'));
terminal.stdout.on('data', function (data) {
    console.log('stdout: ' + data);
});

terminal.on('exit', function (code) {
       // console.log('child process exited with code ' + code);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:26:09.140

您没有返回 command `dir`。在 Windows 中是 \r\n。

```
terminal.stdin.write(new Buffer('dir\r\n')); 
```

这将起作用。

# c# - 如何为我的应用接收 toast？

> ID：16141800
> 
> 赞同：0
> 
> 时间：2013-04-22T07:40:24.270
> 
> 标签：c#, windows-phone-7

我遵循了[Jeff 的教程](http://www.jeffblankenburg.com/2010/10/19/31-days-of-windows-phone-day-19-push-notifications/)并在我的应用程序中实现了推送。

```
HttpNotificationChannel channel;

void GetPushChannel()
{
    channel = new HttpNotificationChannel("BLANKENSOFT_" + DateTime.Now.Ticks.ToString());
    channel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(channel_ChannelUriUpdated);
    channel.Open();
}

void channel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
{
    Dispatcher.BeginInvoke(delegate
    {
        URIBlock.Text = channel.ChannelUri.ToString();
    });
} 
```

所以我现在可以在我的应用程序中获取和处理推送通知。但是当我的应用程序关闭并且我想举杯表示发生了什么事时怎么办？

我想到了一个 ScheduledTaskAgent，但它们受到活动时间的限制......如果在代理未运行时发送通知怎么办？还是没关系？

我想在 ScheduledTaskAgent 中实现与上面完全相同的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:52:38.350

您可以参考示例[http://code.msdn.microsoft.com/wpapps/Toast-Notification-Sample-fb20ae13](http://code.msdn.microsoft.com/wpapps/Toast-Notification-Sample-fb20ae13)。当应用程序关闭并从服务器端发送通知时，它将在设备上接收，不需要任何 ScheduledTaskAgent 或后台进程。WP pushnotification 的有效负载如下所示：

```
<?xml version=\1.0\ encoding=\utf-8\?>
<wp:Notification xmlns:wp=\WPNotification\>
  <wp:Toast>
    <wp:Text1>Title of application</wp:Text1>
    <wp:Text2>Subtitle for application</wp:Text2>
    <wp:Param>/Page2.xaml?NavigatedFrom=Toast Notification</wp:Param> //supported from WP7.1 
  </wp:Toast>
</wp:Notification> 
```

有效负载包含在 WP7.1 中，用于在应用程序关闭时收到 toast 通知时将用户导航到特定页面。此外，如果您想在应用程序关闭且 toast 到达时显示任何自定义消息，请将其导航到特定页面并显示带有自定义消息的消息框。

这就是我以为你想知道的，如果不告诉我。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:47:53.873

添加

```
pushChannel.BindToShellToast(); 
```

# cocos2d-iphone - cocos2d-android中点击imageview时如何替换场景

> ID：16141802
> 
> 赞同：0
> 
> 时间：2013-04-22T07:40:27.157
> 
> 标签：cocos2d-iphone, game-engine, cocos2d-android, scene

我已经开始使用 cocos2d-android 游戏引擎开发游戏应用程序，直到现在已经将 4 个图像视图和一个背景图像放到了场景 1，现在如果单击第一个图像视图，它应该导航到下一个场景，我为此在 google 和 youtube 上搜索，但是没有成功，也没有更多的 cocos2d android 游戏引擎的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:14:19.333

将您的图像设为 menuItem 并在该 menuItem 的单击方法上更改您的场景，如下所示

```
 CCMenuItem  menuItem1 = CCMenuItemImage.item("backbtn.png", "backbtn.png", this,
            "onClickMenuItem"); 
```

然后处理这个menuItem的onClick方法如下

```
 public void onClickMenuItem(Object menuItem) {
    if (menuItem == menuItem1) {
        CCDirector.sharedDirector().popScene();

    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:26:12.920

Use CCMenu and CCMenuItemImage or CCMenuItemSprite. You can set method that will be called on menu item click.

# javascript - 未定义是窗口/全局的属性吗？

> ID：16141803
> 
> 赞同：11
> 
> 时间：2013-04-22T07:40:31.190
> 
> 标签：javascript

似乎**undefined**是 window/global 的属性：

![在此处输入图像描述](https://i.stack.imgur.com/WBMku.jpg)

我一直认为**undefined**就像**null**一样，是 JavaScript 中的唯一值。

但是上面的代码（*在 Chrome 中测试过*）让我很困惑。

有人可以解释为什么

```
undefined in window 
```

评估为真，而

```
null in window 
```

评估为假

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T07:46:35.820

在这种情况下，不仅，[`undefined`](http://es5.github.io/#x4.3.9)而且是 的值（从[ES5.1 规范开始](http://ecma-international.org/ecma-262/5.1/)）。[`Infinity`](http://es5.github.io/#x4.3.22)[`NaN`](http://es5.github.io/#x4.3.23)[`global object`](http://es5.github.io/#x15.1)`window`

您无法为其分配值的事实`undefined`是因为该属性是使用设置为的`writable` [属性](http://es5.github.io/#x8.6.1)`false`定义的。

`null`是[类型](http://es5.github.io/#x8)[`primitive value`](http://es5.github.io/#x4.3.2)（as is for ）`5`的（as is ），而不是 的属性。 `Null``Number``5``window`

查看带[注释的 ES5 规范](http://es5.github.io/#x15.1)以获取更多背景信息，它非常易读！

# asp.net - 将动态查询字符串传递给贝宝继续页面

> ID：16141804
> 
> 赞同：0
> 
> 时间：2013-04-22T07:40:33.757
> 
> 标签：asp.net, paypal, query-string

我的网站在 Asp.Net C# 中。

我正在为我的网站使用贝宝。我有多种产品，如标志设计、宣传册设计等。我为每项服务使用不同的 BuyNow 按钮。

成功付款后，我将用户发送回我的 continue.aspx 页面。

但是我只是对我们能够将 OrderId 接收到我的 continue.aspx 页面的一件事感到困惑吗？我必须在 continue.aspx 页面上获取该特定订单的详细信息，以添加更多设计描述，如公司名称、要求等。

成功付款后，有什么方法可以在 continue.aspx 上接收我的 orderId 作为查询字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:45:12.190

Are you using Website Payments Standard or Express Checkout? It sounds like you are using Express Checkout, but if your using standard you may want to switch over to Express Checkout as you will have more control over the checkout flow. With Express Checkout when the buyer is sent back to your site after they have agreed to the payment your site will perform a GetExpressCheckoutDetails API call. You will get the buyers information with this API call. From there you can then present the buyer with the additional options and etc before performing the DoExpressCheckoutPayment API call which is the API call that actually charges the buyer.

# java - java访问客户端文件系统

> ID：16141807
> 
> 赞同：0
> 
> 时间：2013-04-22T07:40:41.057
> 
> 标签：java

我正在开发一个需要系统级权限的 JSP 项目，例如我想在没有任何第三方 API 的情况下实现串行端口通信，并且用于通信的方法或接口集中放置在服务器上。

是否可以仅使用 JAVA 实现上述目标.....？

我也知道 Java 有一个限制其访问的沙箱和一个可以帮助的资源是 JAVA SCRIPT .... 是否有解决方法或任何建议可以用来实现相同的仅使用 JAva ...

提前感谢您的时间和努力...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:46:37.767

JSP 在服务器上运行，因此无法访问客户端的文件系统。

如果您的客户端需要向服务器发送文件，您可以`<input type="file">`在您的 JSP 页面上使用 HTML 表单。

# java - 如何从java中的枚举中获取名称

> ID：16141810
> 
> 赞同：1
> 
> 时间：2013-04-22T07:40:44.597
> 
> 标签：java, enums

我在java中有一个枚举类如下

```
public enum SMethod {

/**
 * LEAVE IN THIS ORDER
 */
A    (true, true, true,false),
B    (true, true, false,false),
C    (true, true, false,false),
D    (false, false, false)

} 
```

另一个类有以下方法

```
private String getSMethod(boolean isSds) {
    if (isClsSds)
        return "A";
    else 
        return "B";
} 
```

目前此方法返回硬编码值但字符串。但我想使用 SMethod 枚举返回它。我已将其编写如下：

```
private SMethod getSMethod(boolean isSds) {
    if (isClsSds)
        return SMethod.A;
    else 
        return SMethod.B;
} 
```

但我需要的是这个方法应该返回字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:42:26.087

使用[name()](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#name%28%29)方法：

```
return SMethod.A.name(); 
```

获取`String`枚举对象的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:42:54.503

```
return SMethod.A.name(); will return string 
```

见[**name()**](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#name%28%29)方法

> 返回此枚举常量的名称，与其枚举声明中的声明完全相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T07:43:48.877

有两种方法。

*   [***`Enum.name()`***](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#name%28%29)
*   [***`Enum.toString()`***](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#toString%28%29)

所以你可以使用

```
public String getName(SMethod enm)
{
    return enm.name();
    // or enm.toString();
} 
```

# wpf - 处理来自不同窗口的相同事件

> ID：16141811
> 
> 赞同：1
> 
> 时间：2013-04-22T07:40:45.807
> 
> 标签：wpf, event-handling

我有一个带有两个窗口的 WPF 项目，第一个窗口触发事件并有它自己的事件处理程序，另一个窗口将触发相同的事件，知道如何在第一个窗口中使用处理程序来处理第二个窗口中的事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:48:26.673

感谢@Cody Gray、@keyboardP 和这篇有用的文章[http://geekswithblogs.net/lbugnion/archive/2007/03/02/107747.aspx](http://geekswithblogs.net/lbugnion/archive/2007/03/02/107747.aspx)

这是一个演示答案的代码片段：

**第一步**添加一个新的子类：

```
using System.Windows;

namespace WpfApplication
{
   public class Subclass : Window
   {
    //Event handlers,functions or any potential reused code
   }
} 
```

**第二步：**进入window1.xaml.cs

```
namespace WpfApplication
{
     public partial class Window1 : Subclass
     {
       public Window1()
       {
          InitializeComponent();
       }
     }
} 
```

**第三步**：修改window1的Xaml代码如下：

```
<src:Subclass 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:src="clr-namespace:WpfApplication"
    Title="Window1" Height="350" Width="525">
 </src:Subclass> 
```

**最后**为window2做第二和第三步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:12:55.230

我首先提出的一个简单示例：

```
<Window x:Class="Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" Height="300" Width="300">
    <Grid>
        <Window Loaded="Window_Loaded"/>
        <Window Loaded="Window_Loaded"/>
    </Grid>
</Window> 
```

看看两个窗口如何共享事件处理程序：

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        //Whatever
    }
} 
```

此时您应该问问自己是否真的需要两个窗口，或者任何其他容器控件就足够了。

# abap - 如何在左侧写带有符号的数字和千位分隔点

> ID：16141821
> 
> 赞同：5
> 
> 时间：2013-04-22T07:41:40.243
> 
> 标签：abap

我在abap中以字符格式保存数字。因为我必须从右到左取减号。所以我必须把数字放到字符上并移位或使用函数**'CLOI_PUT_SIGN_IN_FRONT'**我将减号字符向左移动。

但是在为角色分配数字之后，它就没有积分了。我的意思是我的号码是；

*   1.432-（整数）
*   -1432（作为角色）

我想;

*   -1.432（作为角色）

是否有一个快捷方式或者我应该附加一些字符串操作。

**编辑：**

这就是我现在正在做的事情。

```
data: mustbak_t(10) TYPE c,
      mustbak like zsomething-menge.

select single menge from zsomething into mustbak where something eq something.
mustbak_t = mustbak.

CALL FUNCTION 'CLOI_PUT_SIGN_IN_FRONT'
  CHANGING
  VALUE         = mustbak_t.

write: mustbak_t. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T11:28:36.563

如果您使用的是最新版本，则可以使用[字符串模板](http://help.sap.com/abapdocu_702/en/abenstring_templates.htm)- 但是，您必须添加一些黑魔法才能使用符合您的十进制设置的国家/地区：

```
DATA: l_country TYPE t005x-land,
      l_text    TYPE c LENGTH 15,
      l_num     TYPE p LENGTH 6.

SELECT SINGLE land
  INTO l_country
  FROM t005x
  WHERE xdezp = space.

l_num = '-123456'.
l_text = |{ l_num COUNTRY = l_country }|.

WRITE: / l_text. 
```

在这种情况下，您需要将国家代码传递给[格式选项](http://help.sap.com/abapdocu_702/en/abapcompute_string_format_options.htm#!ABAP_ADDITION_16@16@)`COUNTRY`中所述的参数。各个字段的值，即在[国家特定格式](http://help.sap.com/abapdocu_702/en/abencountry_formats.htm)中详细描述。`T005X-XDEZP`

tl;dr = 查找他们使用“.”的任何国家/地区 作为千位分隔符和“，”作为小数分隔符，并使用该国家/地区设置来格式化数字。

* * *

您也可以使用经典格式模板，但除非您有固定长度的输出值，否则它们很难处理：

```
DATA: l_text TYPE c LENGTH 15,
      l_num  TYPE p LENGTH 6 DECIMALS 2.

l_num = '-1234.56'.
WRITE l_num TO l_text USING EDIT MASK 'RRV________.__'.
CONDENSE l_text NO-GAPS.

WRITE: / l_text. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:18:22.540

这是另一种方式，我终于开始工作了：

```
DATA: characters(18) TYPE c,
      ints TYPE i VALUE -222333444.

WRITE ints TO characters. "This is it... nothing more to say.

CALL FUNCTION 'CLOI_PUT_SIGN_IN_FRONT'
  CHANGING
    value = characters.

WRITE characters. 
```

由于整数使用千位分隔符自动打印，因此您可以直接将它们输出到 char 数据对象`WRITE TO`，无需添加......哈哈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:22:36.463

```
DATA: currency TYPE cdcurr,
      characters(18) TYPE c,
      ints TYPE i VALUE -200000.

currency = ints.
WRITE currency TO characters CURRENCY 'USD' DECIMALS 0.
CALL FUNCTION 'CLOI_PUT_SIGN_IN_FRONT'
  CHANGING
    value = characters.
.
WRITE: / 'example',characters. 
```

这将按照指定打印您的整数。在此过程中必须明显转换为货币。

# android - ActionBar 宽度中的两个 Spinner 菜单项

> ID：16141824
> 
> 赞同：6
> 
> 时间：2013-04-22T07:41:49.463
> 
> 标签：android, width, android-actionbar, spinner, menuitem

通过在 main.xml 文件中创建前两个菜单项，我在操作栏中手动构建了两个微调器。随着线

```
cSpinner.setAdapter( ArrayAdapter.createFromResource( this,
            R.array.category_data,
            android.R.layout.simple_spinner_dropdown_item )
            ); 
```

我为他们设置了数组资源。这些东西确实有效，但问题是，左侧微调器资源字符串太大，以至于只能看到右侧微调器的一小部分。

[![](https://i.stack.imgur.com/VXgtj.png)](https://i.stack.imgur.com/VXgtj.png)

我尝试过类似`cSpinner.setLayoutParams(new Spinner.LayoutParams(60, 20));`或'

```
ViewGroup.LayoutParams params = pView.getLayoutParams();
         params.width = 100;
            cspinner.setLayoutParams(params); 
```

但它们都不起作用。第二个甚至让程序崩溃。您现在知道如何解决此问题的提示吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T12:01:07.603

为此，您必须在 ActionBar 中添加自定义布局，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/7ttkG.png)

![在此处输入图像描述](https://i.stack.imgur.com/2Xyrh.png)

* * *

代码在这里

```
public class MainActivity extends Activity {

    final String[] choices = { "Android", "iOS", "RIM" };

    private Spinner Spin1;
    private Spinner Spin2;

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                MainActivity.this, android.R.layout.simple_dropdown_item_1line,
                choices);
        final ActionBar actionBar = getActionBar();
        actionBar.setCustomView(R.layout.actionbar_item);
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setDisplayShowCustomEnabled(true);
        actionBar.setDisplayUseLogoEnabled(false);
        actionBar.setDisplayShowHomeEnabled(false);

        Spin1 = (Spinner) findViewById(R.id.spinner1);
        Spin2 = (Spinner) findViewById(R.id.spinner2);

        Spin1.setAdapter(adapter);
        Spin2.setAdapter(adapter);
    }

} 
```

* * *

actionbar_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:orientation="horizontal"
android:weightSum="5" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:text="my App name"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#000000" />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1" />

<Spinner
    android:id="@+id/spinner2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1" />

</LinearLayout> 
```

# xml - 我如何使用 linq to xml 将子节点添加到 xml 中的现有父节点中

> ID：16141828
> 
> 赞同：-2
> 
> 时间：2013-04-22T07:42:01.093
> 
> 标签：xml, linq-to-xml

假设我们有 XML 文件： `<COLLEGE> <location> <area> najafgrah </area> <!--want to add new child node pragmatically--> </location> </COLLEGE>`

如何添加新的子节点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:06:55.733

这是一个例子。

```
XElement doc = XElement.Parse(@"<COLLEGE> <location> <area> najafgrah </area>
</location> </COLLEGE>");

doc.Add(new XElement("location", new XElement("area", "area number 2"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:57:39.053

XElement 有一个添加节点的 Add 方法。您必须导航到 COLLEGE/location 并调用此节点上的方法。

[XElement.Add](http://msdn.microsoft.com/de-de/library/system.xml.linq.xelement.add.aspx)

# phing - 使用 phing 复制具有不同名称的文件

> ID：16141830
> 
> 赞同：1
> 
> 时间：2013-04-22T07:42:06.383
> 
> 标签：phing

我在 Phing 中编写了一个脚本，用于复制两个网站的文件，但我无法执行诸如更改名称的复制文件之类的操作。我想将此图像复制到 favicon.png 中。

```
 <copy todir="C:\dest_folder\" >
     <fileset dir="C:\source_folder\" >
      <patternset>
        <include name="assets/ico/favicon_website1.png"/>
      </patternset>
     </fileset>
    </copy> 
```

这可以只在一个 <copy> 标签中完成吗？

我该怎么做？

我希望使用更改的名称复制相当多的文件，因此我想简化脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-28T06:16:50.943

如果它只是您要重命名的一个文件，请使用 tofile 而不是文件集。

`<copy file="assets/ico/favicon_website1.png" tofile="C:\dest_folder\favicon.png" />`

# java - 字符串的 Arraylist 未正确传递到另一个类的数组列表以显示在下拉列表中

> ID：16141836
> 
> 赞同：0
> 
> 时间：2013-04-22T07:42:27.313
> 
> 标签：java, android, string, arraylist, parameter-passing

大家好，第一次堆栈溢出，我遇到了问题。我从服务器获取字符串列表并将其传递给字符串数组列表，一切看起来都很好，直到我将它传递给另一个类作为我的 spinadapter 然后我得到它在数组中位置的代码版本，而不是我的细绳。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_category_select);

    ArrayList < String > categories = new ArrayList < String > ();
    PopulateSpinner(categories);
    Log.d(TAG, "before spin adapter");
    adapter = new SpinAdapter(this, android.R.layout.simple_spinner_item, categories);
}

private void PopulateSpinner(ArrayList < String > categories) {
    BufferedReader in = null;
    Log.d(TAG, "bufferReader");
    try {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        Log.d(TAG, "request");
        String Url = "http://www.youcode.ca/Lab02Servlet";
        Log.d(TAG, Url);
        Log.d(TAG, "Url");
        request.setURI(new URI(Url.toString() + "?Service=categories"));
        Log.d(TAG, "URI");
        HttpResponse response = client.execute(request);
        Log.d(TAG, "response"); in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        Log.d(TAG, "in");
        String line = "";
        while ((line = in .readLine()) != null) {
            Log.d(TAG, line);
            CategoryItem temp = new CategoryItem();
            temp.SETcategorystring(line);
            categories.add(temp.toString());
        }
        /*for (String string : categories)  test the aray to see if it has the content
        {
            Log.d(TAG, string.toString());
        }*/
        Log.d(TAG, "after the while");
    }

    private Context context;
    private ArrayList < String > jitters;
    private static final String TAG = "SpinAdapterActivity";
    public SpinAdapter(Context context, int textViewResourceId, ArrayList < String > categories) {
        super(context, textViewResourceId, categories);
        this.context = context;
        this.jitters = categories;
    }@
    Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        CategorySelect activity = (CategorySelect) context;
        LayoutInflater inflater = activity.getLayoutInflater();

        View spinnerRow = inflater.inflate(R.layout.category_textview, null);
        TextView line = (TextView) spinnerRow.findViewById(R.id.Category_textview_id);

        line.setText((String)(jitters.get(position)));

        return spinnerRow;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:13:49.803

1.这里修改代码

直接将字符串值添加到列表中。

```
 categories.add(temp.toString()); change to categories.add(line); 
```

2.另一种方式

```
 CategoryItem temp = new CategoryItem();
        temp.SETcategorystring(line);
        categories.add(temp.getcategoryString().toString()); 
```

# laravel - Laravel 4：将什么作为参数传递给 Url 类？

> ID：16141845
> 
> 赞同：20
> 
> 时间：2013-04-22T07:43:11.980
> 
> 标签：laravel, laravel-4

有人可以解释 Laravel 4 UrlGenerator 类的语法吗？我在文档中找不到它。

我有以下路线：

```
Route::resource('users', 'UsersController'); 
```

我花了很长时间才弄清楚这一点：

```
{{ Url::action('UsersController@show', ['users' => '123']) }} 
```

生成所需的 html：

```
http://localhost/l4/public/users/123 
```

我查看了 UrlGenerator.php

```
/**
 * Get the URL to a controller action.
 *
 * @param  string  $action
 * @param  mixed   $parameters
 * @param  bool    $absolute
 * @return string
 */
public function action($action, $parameters = array(), $absolute = true) 
```

..但这并没有真正让我走得更远。

我可以通过`$parameters`什么？

我现在知道这`['users' => '123']`行得通，但是这是什么背景？还有其他传递数据的方法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T07:58:17.683

您实际上不需要将参数的名称作为数组的键。据我所知，如果没有提供名称，替换将从左到右进行。

例如，您的资源控制器路由定义将如下所示：

```
/users/{users} 
```

因此，`URL::action('UsersController@show', ['123'])`生成的 URL like 将生成 URL `localhost/project/public/users/123`，就像它已经为您生成的一样。

因此，您传入的是正确生成 URL 所需的参数。如果资源是嵌套的，则定义可能如下所示。

```
/users/{users}/posts/{posts} 
```

要生成 URL，您需要同时传递用户 ID 和帖子 ID。

```
URL::action('UsersPostsController@show', ['123', '99']); 
```

URL 看起来像`localhost/project/public/users/123/posts/99`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-03T08:29:05.840

那么在使用资源时有一种更好的生成 URL 的方法。

```
URL::route('users.index') // Show all users links to UserController@index

URL::route('users.show',$user->id) // Show user with id links to UserController@show($id)

URL::route('users.create') // Show Userform links to UserController@create

URL::route('users.store') // Links to UserController@store

URL::route('users.edit',$user->id) // Show Editform links to UserController@edit($id)

URL::route('users.update',$user->id) // Update the User with id links to UserController@update($id)

URL::route('users.destroy',$user->id) // Deletes a user with the id links to UserController@destroy 
```

希望这能说明问题。可以在这里找到一些文档[http://laravel.com/docs/controllers#resource-controllers](http://laravel.com/docs/controllers#resource-controllers)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-24T00:09:48.447

对于那些使用 PHP 5.3 的人来说，这应该是：

```
URL::action('UsersController@show', array('123') ) 
```

# javascript - 如何从代码隐藏中获取文本？

> ID：16141847
> 
> 赞同：0
> 
> 时间：2013-04-22T07:43:21.353
> 
> 标签：javascript, asp.net, textbox, hidden-field

我在 aspx 文件中有两个字段：

```
<input type="text" id="tbName" runat="server"/> 
<input type="hidden" id="hfName" runat="server"/> 
```

这个想法是使用文本框**“tbName”**中的文本作为我的存储过程的参数。我决定使用 javascript将其文本添加到隐藏字段**“hfName”中：**

```
document.getElementById("<%= hfName.ClientID %>").value = document.getElementById("<%= tbName.ClientID %>").value;
alert(document.getElementById("<%= hfName.ClientID %>").value); 
```

它运作良好，隐藏字段从文本框中获取文本，该功能会发出警报。我使用隐藏字段，因为这是我在回发期间保存文本的唯一方法。

在代码隐藏中，我尝试将隐藏值从 hfName.Value 获取回文本框，但它返回空行：

```
tbName.Value = hfName.Value; 
```

那么如何使用它作为参数呢？也许有更简单的方法？我不知道jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:51:30.840

在您的 JavaScript 部分中，您将值从 tbName 写入 hfName，在后面的代码中从 hfName 写入 tbName。

```
hfName.Value = tbName.Value; 
```

使用 jQuery，您可以解决客户端部分，例如

```
$("#<%= hfName.ClientID %>").val($("#<%= tbName.ClientID %>").val());
alert($("#<%= hfName.ClientID %>").val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:38:33.713

> 在主要的 Page_Load 过程中，我把 tbName.Value = hfName.Value; 这是我尝试使用隐藏字段 hfName.Value 中的值的唯一地方。tbName 之后未修改，应显示隐藏字段 hfName 中的文本。它没有。

当页面加载没有设置为文本框文本时，因此 tbName 和 hfName 值为空。

您可以通过将默认值设置为隐藏字段和文本字段来进行测试

```
<input type="text" id="tbName" runat="server" value ="txtVal"/> 
<input type="hidden" id="hfName" runat="server" value ="hftVal"/> 
```

现在在页面加载时，您可以获得两个控件的非空值

```
protected void Page_Load(object sender, EventArgs e)
{
    var txtVal = tbName.Value;
    var hfVal = hfName.Value;
} 
```

# r - 如何获取与data.frame中B列的某个值对应的A列的所有值？

> ID：16141852
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:43:43.113
> 
> 标签：r, dataframe

以下是我的数据。

```
,x
1,16239.2037182035
2,2290.58697355612
3,26661.4009577282
5,3404.57199108078
6,2017.05432741796
7,1281.6543596914
13,4856.59473014722
17,1108.97190826966
18,5292.00866901003 
```

`data<-read.csv("test.csv",header=TRUE)`

```
data

        X            x
1       1 1.623920e+04
2       2 2.290587e+03
3       3 2.666140e+04
4       5 3.404572e+03
5       6 2.017054e+03
6       7 1.281654e+03
7      13 4.856595e+03
8      17 1.108972e+03
9      18 5.292009e+03 
```

现在我想得到X=13时的x值，如何实现呢？我知道 data[7,]$x 可以得到 x 值。但是当 X 是某个值时，我想获得 x 值。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:52:04.360

看看文档`?data.frame`，`?with`

```
with(df, x[X==13])
## [1] 4856.595 
```

还可以查看一些关于使用逻辑向量进行数据帧索引的介绍性 R 教程。

# javascript - 当我使用 jasny bootstrap 文件上传时，用于文件上传验证的 jquery 验证引擎

> ID：16141858
> 
> 赞同：2
> 
> 时间：2013-04-22T07:44:10.433
> 
> 标签：javascript, jquery, jquery-plugins, jquery-file-upload, jquery-validation-engine

我正在使用 pos-absolute 的 jQuery 验证引擎插件。

我有一个隐藏输入 type="file" 并用按钮替换它的插件。

这工作正常，如果没有选择文件然后 jquery 验证引擎不显示弹出消息，它是提交成功。

我遇到的问题是当字段为空时没有显示弹出窗口并且不验证文件上传字段。

这是我的硬编码html：

```
<div class="fileupload fileupload-new" data-provides="fileupload" id="question_choice_image" style="display:none;">
<div class="fileupload-preview thumbnail"   id="question_choice_image" style="width: 70px; height: 30px;"></div>
<div >
<span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" data-validation-engine="validate[required]"  data-errormessage-value-missing="Question is required!"  name="question_choice_img" /></span>
<a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a> 
```

所以结构就在那里，所以我可以验证文件上传归档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T20:02:57.083

而不是用“display:none;”来隐藏它 尝试使其可见，但将其边距移动到类似：-9999px .... 我的解决方案是：我将其设置为绝对和高度：0px; 宽度：0px；行高：0px；字体大小：0px；并将其放置在父容器的左上角，我会收到所有警报；）

诀窍是不要“隐藏”原始输入字段，因为警报不会在显示时触发：无字段......希望它有帮助......

# c#-4.0 - 在 .asp 中转换 .htm 页面扩展名

> ID：16141859
> 
> 赞同：3
> 
> 时间：2013-04-22T07:44:10.283
> 
> 标签：c#-4.0

我已经在 .asp 中转换了 .htm 页面扩展名，但是在运行时浏览器中出现了错误...

" 不提供此类页面。

说明：您请求的页面类型未提供服务，因为它已被明确禁止。扩展名“.asp”可能不正确。请查看下面的 URL 并确保其拼写正确。

请求的 URL：/WebSite1/HTMLPage.asp

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.1"

请把我还回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:34:32.247

在**IIS 7.0 和 IIS 7.5 上默认未安装经典 ASP**

要在您的 Web 服务器上支持和配置 ASP 应用程序，您必须安装并启用 ASP 模块。

查看[产品 IIS 文档](http://www.iis.net/configreference/system.webserver/asp)，或者您可以按照此文章中的清单进行操作：[http ://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and -iis-8/classic-asp-not-installed-by-default-on-iis](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/classic-asp-not-installed-by-default-on-iis)让您的 Internet 信息服务器与*ASP一起使用*

根据您的 Windows 版本，这些步骤略有不同，因此您可以直接参考[本教程](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/classic-asp-not-installed-by-default-on-iis)

*编辑*

既然您提到在 Visual Studio 2010 上工作时遇到一些问题，我已经在七（win7）上测试了以下检查表：

请注意，我需要以管理员身份运行 Visual Studio 2010（右键单击图标并以管理员身份运行）才能在下一步中浏览本地内部信息服务器。

当您以管理员身份运行 Visual Studio 时，UAC 要求确认，在这里说“是”

打开“Visual Studio 2010”后，按照从菜单开始的以下命令序列：

*   文件
*   “新网站”
*   “Asp 净空站点”

查看对话框底部，在“Web 位置”中选择“HTTP”单击“浏览”并选择“默认网站”

看对话框的右上角有一个图标来创建一个新的虚拟文件夹：

*   别名：*“MyASPSite”*
*   文件夹：*“C:\MyASPSite”* ..我们假设 C:\MyASPSite 在您磁盘上的现有文件夹中，或者选择另一个您选择的文件夹
*   选择复选框 [x] *“创建 IIS 应用程序”*
*   确认

网址：`http://localhost/MyASPSite`

点击确定按钮确认

如果 VS 询问“你要在 webServer 上启用 ASP.NET 4.0 吗？” 说不”

在解决方案资源管理器中选择站点

*   添加新项目
*   选择项目类型：“文本文件”
*   名称：MyASPPage.asp

在编辑器中创建您的示例页面，例如：

```
<!DOCTYPE html>
<html>
<body>
<%
response.write("My first ASP script!")
%>
</body>
</html> 
```

保存页面并打开它：在解决方案资源管理器中右键单击页面并选择“在浏览器中查看”

该页面将在浏览器中正确显示。

您可以选择在文件顶部添加：

```
 <%@ language="vbscript" %> 
```

..关闭并重新打开文件。然后，您应该会在 <% %> 和块中看到智能感知，例如响应。

# android - 在Android中单击按钮时获取选定的行edittext值

> ID：16141862
> 
> 赞同：0
> 
> 时间：2013-04-22T07:44:18.587
> 
> 标签：android, android-tablelayout

我创建了如下表格布局：

![在此处输入图像描述](https://i.stack.imgur.com/BrEHZ.png)

现在我的要求是：
我有像上图一样的行数。我想在它被放在表格布局之外的按钮的 onClick 中编辑后访问 edittext 值。即，我希望该行的表格行ID和子项进入该表格布局之外的按钮的onclick。任何人都请建议我实现这一目标的想法。用于创建表格布局的代码是：

```
TableLayout tl=(TableLayout)findViewById(R.id.mytable);
            tl.setBackgroundColor(Color.WHITE);

            for( int i=0;i<passediduniq.size();i++){

                final TableRow tr=new TableRow(MyActivity.this);
     //allchilds as in image

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:03:26.183

你的问题很不清楚，因为我知道这可能会对你有所帮助。

```
EditText editText=(EditText)arg1.findViewById(R.id.edit_list_details); 
```

现在从编辑文本中获取文本

```
editText.gettext() 
```

内部按钮单击。

希望这可能会有所帮助。

# c++ - 将 Web 引用添加到 CLR 控制台应用程序会导致错误 C1083

> ID：16141866
> 
> 赞同：0
> 
> 时间：2013-04-22T07:44:37.300
> 
> 标签：c++, asp.net, web-services, web-applications, clr

一旦我将 Web 引用添加到 CLR 控制台应用程序（如此链接[http://msdn.microsoft.com/en-us/library/14hykb68%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/14hykb68%28VS.80%29.aspx)中所述），它就会给出文件丢失错误像这样的消息

> 致命错误 C1083：无法打开源文件：“Hello.h”：没有此类文件或目录 c1xx

在应用程序中应自动添加 Hello.h 文件。在解决方案资源管理器生成的文件文件夹中，Hello.h 文件带有红色 (-) 符号表示该文件丢失。

这个错误的原因是什么？我可以在另一个 Web 应用程序中使用 Web 服务。当我与 C++ 应用程序一起使用时，问题就来了。 **还有其他在 C++ 应用程序中使用 Web 服务的好方法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:39:38.203

1.  如果您的应用程序编译，头文件显示为红色图标并不重要。
2.  首先，您检查您的项目文件夹是否存在任何名称为的文件`Hello.h`。如果没有什么问题。

试试这种方法来修复它。

*   右键单击解决方案资源管理器中的 Web 引用，然后单击`update web reference`
*   删除网络引用并尝试再次添加
*   确保选择支持 .NET 的项目类型
*   在[这个站点](http://www.webservicex.net/WS/wscatlist.aspx)中有一些示例 Web 服务。所以创建一个新的`VS CLR console project`并尝试添加其中一个作为网络参考。通过它，您可以检查您的视觉工作室是否有任何问题。
*   如果`Hello.h`文件存在于`sub folder`您的某些文件中`project folder`，则将 文件添加`sub folder`到项目的包含路径中。

在一个测试项目中，我添加了对 Web 服务的引用，甚至头文件显示为红色图标。但它编译正确。

![在此处输入图像描述](https://i.stack.imgur.com/ESYmg.png)

# java - JQuery ajax GET请求，响应状态为200 OK时未触发成功

> ID：16141867
> 
> 赞同：1
> 
> 时间：2013-04-22T07:44:38.053
> 
> 标签：java, jquery, ajax, json, rest

在发送 REST 调用时，我对 JSON 响应数据有一个奇怪的响应。我可以在萤火虫中看到响应状态还可以，但是主体是空的，即使尝试使用海报也可以正常工作。这是我的 JQuery 调用：

```
var urlPath = "http://localhost:8080/coreserver/rest";

function totalAccountCount()
{
    $.ajax({
        type: "GET",
        url: urlPath + "/summary/totalAccountCount",
        dataType: "json",

        success: function (resp) {
           var rowText = "<tr><td>Total Accounts</td><td>" + resp.wrapper.item + "</td></tr>";
           $(rowText).appendTo(tbody);
           //loadCustomers(resp); 
           alert("STATUS: " + xhr.status + " " + xhr.statusText);
        },
        error: function(xhr, textStatus, errorThrown){  
             alert("Error: fails"); 
             //$("#message").html(resp.e  + " - STATUS: " + xhr.status + " " + xhr.statusText);

           } 
    });
} 
```

在调试它时，它并没有进入成功分支，而是进入错误分支。这是我的资源：

```
@GET
@Path("/totalAccountCount")
@Produces({MediaType.APPLICATION_JSON})
public JaxbWrapper<Integer> getTotalAccountCount() {
    return new JaxbWrapper<Integer>((int)this.accountStore.count());
} 
```

我已经知道阅读我的回复`JaxbWrapper`可能是错误的，但根本没有成功，所以现在我想确保它有效。

我会很感激一些帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:25:44.183

async: false 解决了它。它一直跳到错误功能然后成功

**更新 1**

让它工作的真正原因是因为我在服务器端的 web.xml 中添加了以下内容：

```
<init-param>
            <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
            <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
</init-param> 
```

任何人都可以与此相关吗？

**更新 2**

它只是被缓存了。问题解决了。

谢谢，

# windows - FFMPEG - 批量转换子文件夹

> ID：16141869
> 
> 赞同：6
> 
> 时间：2013-04-22T07:44:40.680
> 
> 标签：windows, batch-file, ffmpeg

我正在尝试设置一个 Windows 批处理文件来使用 FFMPEG 转换多个 MP4 文件。多个子文件夹中有许多文件，因此我需要在每个子文件夹中的每个文件上执行脚本。

恐怕我没有太多使用批处理文件的经验，但根据我的研究，我得到了以下命令文本：

```
FOR %%i in (*.mp4) /R DO (ffmpeg32 -i "%%~ni.mp4" -map 0:0 -map 0:1 -map 0:1    -c:v copy   -c:a:0 aac -b:a 128k -ac 2 -strict -2 -cutoff 15000  -c:a:1 copy "%~ni&(2).mp4") 
```

该脚本基本上需要将 AAC 音频流添加到现有 MP4 文件中，因此我需要通过在文件名末尾添加 (2) 来更改输出名称。

我已经单独测试了 ffmpeg 命令，很高兴它可以工作 - 我只需要获取正确的批处理命令。

提前感谢您的任何指点！

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T07:59:12.547

试试这个：

```
@echo off & setlocal
FOR /r %%i in (*.mp4) DO ffmpeg32 -i "%%~fi" -map 0:0 -map 0:1 -map 0:1 -c:v copy -c:a:0 aac -b:a 128k -ac 2 -strict -2 -cutoff 15000 -c:a:1 copy "%%~dpni(2)%%~xi" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T04:05:49.290

此 Windows 批处理 (.bat) 脚本将从子文件夹（或嵌套目录）内的 mp4 文件中删除音频，然后删除旧文件。它被 SLEEP 命令减慢，因为在[Windows](https://www.reddit.com/r/VideoEditing/comments/334y6r/best_way_to_remove_audio/)和 linux 中复制之前文件删除显然存在问题。

```
FOR /r %%i in (*.mp4) DO ffmpeg.exe -i  "%%~fi" -vcodec copy -an "%%~dpni(2)%%~xi" &&  sleep 1 &&    del "%%~fi" 
```

# sql - SQL：如何组合查询形成查询？

> ID：16141870
> 
> 赞同：1
> 
> 时间：2013-04-22T07:44:45.300
> 
> 标签：sql, postgresql

我有 2 个表，一个存储索引，另一个存储值：

```
 id  | index1  | index2
-----+---------+-------
 1   |      1  |      2

 index  | value
--------+------
 1      | hello
 2      | world 
```

我想做一个可以为我提供组合视图的查询：

```
 id  | value1  | value2
-----+---------+-------
 1   |  hello  |  world 
```

我怎么能那样做？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:49:48.680

A`JOIN`会在这里提供帮助。就像是：

```
SELECT tbl_index.id, tv1.value, tv2.value FROM tbl_index 
LEFT JOIN tbl_values AS tv1 ON tbl_index.index1=tv1.id
LEFT JOIN tbl_values AS tv2 ON tbl_index.index2=tv2.id
WHERE tbl_index.id=$desired_id 
```

它的作用是对 tbl_index 中一行的每个`index1`和`index2`值，从 tbl_values 中获取匹配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:05:11.087

尝试这个

选择 indexTable.id, tabele1.value,table2.value from indextable inner join table1 on table1.id=indextable.index1 inner join table2 on table2.id=indextable.index2

# c# - 自动设置 ASP.Net App_Sprites 权限

> ID：16141872
> 
> 赞同：2
> 
> 时间：2013-04-22T07:44:58.863
> 
> 标签：c#, asp.net-mvc, vb.net, asp.net-mvc-4

我正在使用适用于 ASP.Net 的图像优化工具包，这需要应用程序池用户能够写入我已经知道如何操作的 App_Sprites 文件夹。

但是当我发布系统的新版本时，我需要再次手动更改文件夹权限。有没有办法让发布系统添加权限？

我搜索了一下，找不到任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:50:41.963

在您的文件系统中创建一个根文件夹，并为 AppPool 用户授予该文件夹所需的权限。之后，您始终可以将 Web 应用程序发布到该文件夹​​中，并且您不必每次都更改权限。

# android - 如何动态设置列表视图内的项目高度？

> ID：16141873
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:45:04.567
> 
> 标签：android, listview, layout

我试图设置 ListView 的项目高度。

我想要的是这样的：

将第一项的高度设置为 10

将第二个项目的高度设置为 20

将第三个项目的高度设置为 30

将四个项目的高度设置为 15

为了实现这个目标，我尝试在 getView 方法中设置“convertView”的布局 ![在此处输入图像描述](https://i.stack.imgur.com/WLVb3.png)

我尝试了一些方法（不起作用）：

1.  `// LayoutParams layoutParams = new LayoutParams(); // layoutParams.height = 30; // timeTableCellViewHolder.setLayoutParams(layoutParams);`
2.  `//timeTableCellViewHolder.getLayoutParams().height = 30; //convertView.getLayoutParams().height = 30;` 此方法返回 nullPoint 异常，看到的 View 对象没有高度参数。

3.  `//timeTableCellViewHolder.setMinimumHeight(50);`

这些是我的一些代码：

1.  BaseAdapter 的 getView ![在此处输入图像描述](https://i.stack.imgur.com/WLVb3.png)

2.  listview内Item的xml布局 ![在此处输入图像描述](https://i.stack.imgur.com/Kqbx9.png)

3.  包含此列表视图的活动布局 ![在此处输入图像描述](https://i.stack.imgur.com/7OzVP.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:10:36.357

也许你可以实现 getViewTypeCount() 和 getItemViewType(int position)

```
@Override
public int getViewTypeCount() {
    return 4;
}

@Override
public int getItemViewType(int position) {
    return position % 4;
} 
```

希望有帮助。干杯

# ember.js - 使用 TextField 或仅文本查看

> ID：16141874
> 
> 赞同：0
> 
> 时间：2013-04-22T07:45:12.393
> 
> 标签：ember.js

我想创建一个视图，如果满足条件，则应呈现文本字段，否则仅呈现文本。

有没有关于编写可重用视图的好文档？

**编辑 23.04.2013 - 我的就地编辑解决方案**

我最终得到了以下就地编辑（感谢 Myslik）。我将添加更多功能，例如“空”占位符。

咖啡脚本：

```
App.InplaceTextField = Ember.View.extend
  tagName: 'div'
  isEditing: false
  template: Ember.computed( ->
    return Ember.Handlebars.compile([
      '{{#if view.isEditing}}',
      '{{view Ember.TextField valueBinding="view.content"}}',
      '{{else}}',
      '{{view.content}}',
      '{{/if}}'
    ].join('\n'))
  )
  focusOut: ->
    @get('controller').get('store').commit()
    @set('isEditing', false)
  click: ->
    @set('isEditing', true) 
```

车把：

`title`是我模型的一个属性，它传递给我的视图

```
{{view App.InplaceTextField contentBinding="title"}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:31:21.987

你真的需要为它写一个视图吗？您可以在模板中执行此操作：

```
{{#if condition}}
    {{input value=name}}
{{else}}
    {{name}}
{{/if}} 
```

**编辑：**

所以你可以`Ember.TextField`像这样自定义：

```
Ember.TextField.reopen({
    attributeBindings: ['disabled']
}); 
```

然后你可以做这样的事情：

```
{{view Ember.TextField valueBinding="value" disabledBinding="condition"}} 
```

# xml - 是否可以在 XPath 中将空节点设置为默认值？

> ID：16141883
> 
> 赞同：1
> 
> 时间：2013-04-22T07:45:31.833
> 
> 标签：xml, xpath

我是 XPath 的新手，我想知道是否可以将不存在的节点设置为某个默认值，例如“NULL”。

我有一个 XML 文档，我正在尝试检索员工列表的名称。例如，诸如“部门”、“姓名”、“电子邮件”等信息。我将它们放入 Excel 电子表格中，并使用 =ImportXML() 函数。

问题是每个条目的所有内容都在父节点“员工”下，当我导入“部门”、“姓名”或“电子邮件”等数据时，列长度的计数不同。是否可以检索每个节点条目，如果节点不存在，请将行中的值设置为“null”或“不可用”？

现在我可以检索数据，但由于整个 XML 文档中缺少数据，它不会沿行同步。我读过一些关于贝克尔方法的东西，但我并不完全理解。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:02:05.803

如果您想将一个节点设置为 null，您可以忽略它并且不要将它提供给 XML 树。可见哪些字段包含值，哪些不包含值。

不存在空值或类似的东西。

# authentication - 使用 OpenID 和 OAuth2 为 Web 应用程序提供最先进的会话管理

> ID：16141885
> 
> 赞同：2
> 
> 时间：2013-04-22T07:45:35.007
> 
> 标签：authentication, oauth-2.0, openid, facebook-oauth

我正在使用 App Engine (Java)、OpenId（用于 Google 登录等）和 OAuth2（用于 Facebook 登录）来实现我的 Web 应用程序的身份验证部分。重要要求包括“让我保持签名”和每个用户对数据存储的安全访问。

据我了解，要实现“保持签名”功能，我需要一个 cookie 来存储在服务器端（App Engine）生成的共享密钥。此外，为了保护对数据存储的访问，每个 REST API 调用都需要一个额外的参数，即共享密钥，以在每次调用 API 时识别用户。这种会话管理是否仍然主导着现代 Web 应用程序的开发？一个更普遍的问题是：在朝着无状态方向发展的 REST 的存在下，会话管理是否已经过时？我可能会误解这里的几个重要概念。感谢您对相关资源的指导和指点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:11:34.517

在谈论 OAuth 时，还有另一种方式来看待 keep-me-signed-in 功能。

当应用程序使用 OAuth 时，以及当用户进行身份验证和授权时 - 应用程序会得到一个`Access token`和一个`Refresh token.`这是基本的 OAuth 工作流程。

现在，应用程序可以通过向 HTTP 调用提供访问令牌来代表用户调用 REST API。访问令牌通常是短暂的，通常为 60 分钟。因此，您的应用可以使用该令牌进行 60 分钟的经过身份验证的调用 - 这足以让您在 60 分钟内对其进行签名。

**之后会发生什么？**

每个 OAuth 服务提供商，如 Facebook、Google 等，都将提供一个令牌交换端点——另一个 REST API。您可以将刷新令牌交换为刷新令牌 + 访问令牌对。现在再一次，每当您使用应用程序并且访问令牌已过期时，只需点击令牌交换端点并获取新的访问令牌。

在用户明确登录服务提供商的网站并撤销对您的应用程序的权限之前，刷新令牌不会过期。

# c# - Marshal.PtrToStringAnsi 中的垃圾字符

> ID：16141889
> 
> 赞同：0
> 
> 时间：2013-04-22T07:45:59.150
> 
> 标签：c#, .net, marshalling, dllimport

在下面的代码中， pcp_Out 应该以 ANSI 格式返回系统日期。

*   返回系统日期，但前面有一些垃圾字符？

*   AllocHGlobal 是初始化*IntPtr*的正确方法吗？

    ```
     [DllImport("Open32env.dll", CharSet = CharSet.Ansi, ExactSpelling = false, EntryPoint = "CallOPLFunction", CallingConvention = CallingConvention.StdCall)]
        static extern int CallOPLFunction(long pl_Instr, IntPtr pcp_In, out IntPtr pcp_Out, out IntPtr pcp_ErrorMessage);

        static void Main(string[] args)
        {     
            IntPtr OutPtr = Marshal.AllocHGlobal(0);
            IntPtr ErrorPtr = Marshal.AllocHGlobal(0);
            IntPtr inPtr = Marshal.StringToHGlobalAnsi("");

            long invalue = 0;

            int ret = CallOPLFunction(invalue, inPtr, out OutPtr, out ErrorPtr);

            string Outstring = Marshal.PtrToStringAnsi(OutPtr,30);

            Marshal.FreeHGlobal(OutPtr);
            Marshal.FreeHGlobal(ErrorPtr);
            Marshal.FreeHGlobal(inPtr);
        } 
    ```

输出

```
Outstring = "h\0Qr\0\0\0\0Ä<g\a?\004/22/13 10:25" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:24:54.967

我认为，将内存分配给空指针的更好方法是：

```
IntPtr OutPtr = new IntPtr();
IntPtr ErrorPtr = new IntPtr(); 
```

如果 pcp_Out 是 Unicode 字符串，则尝试使用： `CharSet = CharSet.Unicode`

# ios - 从 NSMutableArray 创建一个 NSMUtableDictionary

> ID：16141896
> 
> 赞同：0
> 
> 时间：2013-04-22T07:46:26.243
> 
> 标签：ios, objective-c, nsmutablearray, nsmutabledictionary

Web 服务调用返回 JSON 响应，我将其放入 NSMutableArray。JSON 响应如下所示，

```
 (
        {
        DispName = "Jonny Depp (Marvel Comics)";
        "Int_Adr" = 273;
        "Int_Group" = 0;
    },
        {
        DispName = "Mahendra Singh Dhoni (Indian Premier League)";
        "Int_Adr" = 265;
        "Int_Group" = 0;
    },
        {
        DispName = "Otara De Mel (ODEL UNLIMITED)";
        "Int_Adr" = 496;
        "Int_Group" = 0;
    },
        {
        DispName = "Rahul Dravid (Indian Premier League)";
        "Int_Adr" = 266;
        "Int_Group" = 0;
    }
) 
```

现在我想创建另一个`NSMutableDictionary`只包含键**DispName**和**Int_Adr**。

所以我正在做这样的事情。我已经`NSMutableDictionary`像这样在 .h 文件中声明了 a 。

```
@property (nonatomic, strong) NSMutableDictionary *recipients; 
```

在 .m 文件中，

```
// get the JSON response and put it in an array
NSMutableArray *contactsArray = [jsonParser objectWithString:response];
NSLog(@"%@, array count = %d", contactsArray, contactsArray.count); // the count is 50

//[self.recipients removeAllObjects];
for (NSDictionary *item in contactsArray) {
    [self.recipients setObject:[item objectForKey:@"Int_Adr"] forKey:@"Int_Adr"];
    [self.recipients setObject:[item objectForKey:@"DispName"] forKey:@"DispName"];
}
NSLog(@"%@, array count = %d", self.recipients, self.recipients.count); // the count shows 2! 
```

我只将这两个值设置为收件人字典。但是当我记录输出时，它只显示最后一组。

```
{
    DispName = "Rahul Dravid (Indian Premier League)";
    "Int_Adr" = 266;
} 
```

我怎么解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:07:06.187

这是我给你的建议，`NSMutableArray`与`NSMutableDictionary`. JSON 表示它是字典数组。你必须重新设计你的代码。

```
@property (nonatomic, strong) NSMutableArray *recipients; //not NSMutableDictionary

//Store
for (NSDictionary *item in contactsArray) {
    NSMutableDictionary *yourDict=[[NSMutableDictionary alloc] init];
    [yourDict setObject:[item objectForKey:@"Int_Adr"] forKey:@"Int_Adr"];
    [yourDict setObject:[item objectForKey:@"DispName"] forKey:@"DispName"];

    [self.recipients addObject:yourDict];
}

//Access
for (NSDictionary *item in self.recipients) {
    NSString *address = [item objectForKey:@"Int_Adr"];
    NSString *displayName = [item objectForKey:@"DispName"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:49:40.343

原因是每次您更新字典中的值时，这就是为什么最后一个值才会出现。为了实现您的要求，为不同的值采用不同的键或将新字典添加到另一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:53:08.720

字典有键和值。键是唯一的，这意味着如果您这样做：

```
my_dict["a"] = "hello";
my_dict["b"] = "goodbye"; 
```

整个字典是：

```
"a" => "hello"
"b" => "goodbye" 
```

然后，如果你这样做：

```
my_dict["a"] = "red";
my_dict["b"] = "blue"; 
```

整个字典是：

```
"a" => "red"
"b" => "blue" 
```

换句话说，对应于“a”键的值被“red”覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:59:36.940

它非常简单，见下文

```
for (NSDictionary *item in contactsArray) {
    NSMutableDictionary *newDic=[[NSMutableDictionary alloc] init];
    [newDic setObject:[item objectForKey:@"Int_Adr"] forKey:@"Int_Adr"];
    [newDic setObject:[item objectForKey:@"DispName"] forKey:@"DispName"];

    [self.recipients addObject:newDic forKey:@"data"];
} 
```

您需要初始化一组新数据以包含该特定数据，在您的代码中，您只是在更新最后一个，最后一个被更新，而您只得到最后一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T08:14:58.203

要将 NSMutableArray 转换为 NSMutableDictionary，您需要为 NSMutableArray 的每个对象提供一个键，如下所示。

```
- (NSDictionary *) indexKeyedDictionaryFromArray:(NSArray *)array
{
    id objectInstance;
    NSUInteger indexKey = 0;

    NSMutableDictionary *mutableDictionary = [[NSMutableDictionary alloc] init];
    for (objectInstance in array)
        [mutableDictionary setObject:objectInstance forKey:[NSNumber numberWithUnsignedInt:indexKey++]];

    return (NSDictionary *)mutableDictionary;
} 
```

这里将您的数组作为此`indexKeyedDictionaryFromArray:`方法中的参数传递。它会给你一个字典。

希望它可以帮助你。

# java - Play 框架中配置错误的自定义错误页面

> ID：16141904
> 
> 赞同：1
> 
> 时间：2013-04-22T07:46:53.633
> 
> 标签：java, configuration, playframework-2.0

当我的 Play 2.0.4 应用程序正在运行但我的数据库已关闭时，Play 将向访问者显示默认`Configuration error - Cannot connect to database`页面。

除了打印出我的一半`application.conf`给大家看的问题之外，我想显示一个更用户友好的错误页面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:10:03.733

### 配置文件

该错误页面仅在以开发模式运行 Play 时显示（即使用`play run`）。在生产模式（即`play start`）下使用 Play 时，它应该显示 500 内部服务器错误。

查看[官方文档](http://www.playframework.com/documentation/2.1.1/Production)以了解如何在 Prod 模式下启动您的应用程序。

### 错误页面

关于错误页面的自定义，您必须检查允许您执行此类操作的[全局对象。](http://www.playframework.com/documentation/2.1.1/ScalaGlobal)

# html - 缓慢的下拉菜单过渡 CSS

> ID：16141908
> 
> 赞同：2
> 
> 时间：2013-04-22T07:47:03.060
> 
> 标签：html, css

我在[JS fiddle](http://jsfiddle.net/Relborg/Kpxpf/11/)创建了一个下拉菜单。

我想要下拉菜单的缓慢过渡。

现在它刚刚弹出，看起来很平淡。

```
// Ignore this line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T20:09:57.427

听起来您应该将此示例用作您的基础

我还建议使用标签而不是仅使用 id 为 main-nav-menu 的常规标签。

您正在使用背景图像来创建蓝色背景？您可以在 css 中为 li 和 a 元素指定颜色来实现您想要的，而不是使用背景图像。

这是您应该使用的代码：http: [//www.newmediacampaigns.com/blog/nicer-navigation-with-css-transitions-part-2](http://www.newmediacampaigns.com/blog/nicer-navigation-with-css-transitions-part-2)

这是每个人的样子：[http ://codepen.io/toddsynan/full/pJuyx](http://codepen.io/toddsynan/full/pJuyx)

以下是当最大高度通过悬停从 0 变为 150 像素时，这个家伙用来创建过渡的内容。

```
 -webkit-transition:max-height 500ms ease;
 -moz-transition:max-height 500ms ease;
 -o-transition:max-height 500ms ease;
 transition:max-height 500ms ease; 
```

# python - Mongod for Python 代码中的内部服务器错误 500

> ID：16141910
> 
> 赞同：1
> 
> 时间：2013-04-22T07:47:04.887
> 
> 标签：python, mongodb, bottle

我正在学习 MongoDB m101p 课程，但遇到了麻烦；

*   开始`mongod`
*   启动`python blog.py`监听器
*   使用现有用户登录
*   添加了一个新帖子
*   为该帖子添加了评论

问题是每个定义的网址都有效，不包括根网址`localhost:8082/`
当我想进入登录页面时，我得到`error: 500 internal server error`

每次修改代码时，我都会重新启动 python 侦听器。
我无法验证代码，因为根 url 不起作用

有任何想法吗？：
_`/ route`

```
# This route is the main page of the blog
@bottle.route('/')
def blog_index():

    cookie = bottle.request.get_cookie("session")

    username = sessions.get_username(cookie)

    # even if there is no logged in user, we can show the blog
    l = posts.get_posts(10)

    return bottle.template('blog_template', dict(myposts=l, username=username)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:13:39.773

每当您知道您用 python 编写的代码是正确的代码时，请寻找软件答案。

您可能需要重新启动服务器才能加载新代码，或者在我的情况下，删除数据库；

我自己使用了数据库，并不是所有的文件都设置了日期；

调用路由`/`时，由于部分文档没有`date`属性，产生了错误。

此外，在编写代码时检查字段，因为可能缺少字段。

在我删除数据库、创建新用户、新帖子、添加评论后，我验证了代码并得到了答案。

# sqlite - 少数 PC 看不到 SQLLite.dll

> ID：16141913
> 
> 赞同：1
> 
> 时间：2013-04-22T07:47:14.817
> 
> 标签：sqlite, dll

我有一个 C# 应用程序，它有 SQLLite 的 dll。我已将其添加为参考并将 Copy Local 设置为 true。我像往常一样使用这个dll：`using System.Data.SQLite;`

我将一个exe，我的dll放在exe的目录中，有些人看到这个dll有问题，有些人看不到。我有例外`System.IO.FileNotFoundException: Could not load file or assembly 'System.Data.SQLite.dll' or one of its dependencies. The specified`

我无法管理，为什么在大多数 PC 上都能正常工作，但在其他电脑上却不行。

任何线索，要检查什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:17:37.653

*“System.Data.SQLite.dll* ”需要“ *msvcr100.dll* ”，这是它的依赖项之一。仅当您安装了最新的“ *Microsoft Visual C++ Redistributable* ”或内部提供此功能的任何其他产品时，此功能才可用。

例如，VS2010 默认会安装 C++ Redistributable。这就是您的应用程序不能在某些机器上运行但在其他机器上运行的原因。

如果您不想在所有 PC 中安装 C++ Redist，您可以尝试将“msvcr100.dll”粘贴到您的应用程序 bin 文件夹中并分发。

如果上述解决方案没有帮助，请查看下面的类似帖子。

> > [在某些计算机上，应用程序无法加载 sqlite dll 文件](https://stackoverflow.com/questions/1621758/on-some-computers-application-cant-load-sqlite-dll-file?rq=1)

# oracle - 仅从 Oracle exp 转储导入序列

> ID：16141923
> 
> 赞同：0
> 
> 时间：2013-04-22T07:47:55.907
> 
> 标签：oracle, import, dump

有没有办法从模式的转储中导入模式的所有序列（使用 生成`exp full=y`）？我不想导入过程或表，而只想导入所有序列。

我想使用`imp`命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:04:03.047

如果您使用原始导入实用程序，您可以使用四种不同的模式：表模式、用户模式、完整数据库模式和表空间模式。

它们中的每一个都会导入不同类型的对象，但它们不像新的 Data Pump Import 那样可控，您无法准确选择要导入的类型。

[请参阅此处](http://docs.oracle.com/cd/B19306_01/server.102/b14215/exp_imp.htm#i1004890)的文档。

序列以用户和完整数据库模式导入，但也导入许多其他对象类型，包括过程对象（过程、函数和包）。

我认为您必须使用文本编辑器打开 dmp 文件，然后将 Create Sequence 语句复制粘贴到新的 .sql 文件中。您可以使用 Perl、Ruby 或 shell 脚本来简化此操作，但仅使用 imp 无法做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T09:32:02.483

exp 有它的局限性。如果您想使用类似 exp/imp 的解决方案，expdp 是更好的选择。

如果目标只是复制序列，为什么不使用 dbms_metadata 来获取 ddl：

```
SELECT DBMS_METADATA.GET_DDL('SEQUENCE', u.sequence_name, decode(u.sequence_owner,'SYS','',sequence_owner)) ddl
     FROM all_sequences u where sequence_owner = 'SOE' order by sequence_owner, sequence_name; 
```

# java - 我如何将我的 Junit 测试（selenium webdriver）与 Jmeter 一起使用

> ID：16141927
> 
> 赞同：0
> 
> 时间：2013-04-22T07:48:15.170
> 
> 标签：java, selenium, junit, jmeter, junit4

我使用 JUnit 4 和 Selenium Webdriver 创建了我的功能测试，它可以工作。
现在我想将此测试与 JMeter 一起用于性能测试。

我在 JMeter 的库中复制`selenium-server-standalone-2.0b2.jar`，然后将测试从 Eclipse 导出到 .jar 文件。

这是我的硒测试

```
public class TestLoginWithFF {   
  private WebDriver driver;
  private String baseUrl;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost:8080/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  @Test
  public void test() throws Exception {
    driver.get(baseUrl + "/pages/accueil/login.xhtml#loaded");

    driver.findElement(By.id("login")).clear();
    driver.findElement(By.id("login")).sendKeys("admin");
    driver.findElement(By.id("password")).clear();
    driver.findElement(By.id("password")).sendKeys("admin");
    driver.findElement(By.id("loginButton")).click();
  }

  @After
  public void tearDown() throws Exception {
    //driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }   
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T04:37:27.303

您现在可以通过插件在 JMeter 中本地使用 webdriver：http: [//jmeter-plugins.org/wiki/WebDriverSampler/](http://jmeter-plugins.org/wiki/WebDriverSampler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:36:26.623

也许您可以使用某种场景记录器。我知道[加特林](http://gatling-tool.org)提供了这样的功能。JMeter应该有它。

这个想法是通过记录器执行您的测试，以便它们以 JMeter 语言记录，随时可以使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-15T14:28:12.917

我认为问题是

```
driver = new FirefoxDriver(); 
```

注释掉这一行；那么JMeter就会知道你的方法。

# javascript - 如何在 Primefaces 数据表的当前页面（通过 YUI 分页器）上获取总记录

> ID：16141929
> 
> 赞同：0
> 
> 时间：2013-04-22T07:48:20.823
> 
> 标签：javascript, primefaces, yui

我使用下面的代码：

```
 <script type="text/javascript">
                    function test(){
                        var arr = product.getPaginator().getPageRecords(1);
                    }
                </script>
                <p:dataTable  selection="true" widgetVar="product" id="cars" editMode="cell" editable="true" 
                              var="carr" value="#{tabview.l1}" paginator="true" rows="3">  
                    <p:column headerText="Model">  
                        <h:outputText value="#{carr.model}" />
                    </p:column>  
                    <p:column headerText="MANUFAC" style="width:20%">  
                        <h:outputText value="#{carr.manufacturer}" />
                    </p:column>  
                </p:dataTable>
                <p:commandButton oncomplete="test();" value="Test"/> 
```

当我运行该代码时，出现错误：`Uncaught TypeError: Object [object Object] has no method 'getPageRecords'`

在 YUI 指令中，该方法已经存在：http: [//developer.yahoo.com/yui/paginator/#api](http://developer.yahoo.com/yui/paginator/#api)

感谢您的关注 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:22:26.890

感谢大家的关注，Primefaces 不使用 YUI，所以我必须通过：

```
$(PrimeFaces.escapeClientId('form:cars')).find('tr').length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T14:29:30.483

```
function datatablelength(){
    var dt = document.getElementById('myDatatable_data');
    alert(dt.rows.length);
} 
```

其中“myDatatable”是我的 p:datatable 的 ID

# android - 如何使用xmlpullparser android解析xml字符串

> ID：16141931
> 
> 赞同：1
> 
> 时间：2013-04-22T07:48:28.290
> 
> 标签：android, string, xml-parsing, xmlpullparser

我想解析一个 XML 字符串并将其显示在 EditText 中，但我不能，我不明白可能是什么问题，请帮忙，我的代码：

私有字符串 xmlc =`"<game><cel>5</cel><val>2</val></game>";`

```
private CharSequence readXML(String xmlc2) throws XmlPullParserException {

    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
    XmlPullParser xpp = factory.newPullParser();

    String results = "";
    String celda = "";
    String valor = "";

    xpp.setInput(new StringReader (xmlc2));
    int eventType = xpp.getEventType();
    String tagName = xpp.getName();

    try {       
        while (eventType != XmlPullParser.END_DOCUMENT) {

            if(tagName.equalsIgnoreCase("cell")){
                celda = xpp.nextText();
            } else if(tagName.equalsIgnoreCase("val")){
                valor = xpp.nextText();
            }       
            xpp.nextTag();      
        }       
    } catch (Exception e) {
        Toast.makeText(this, "error!", Toast.LENGTH_LONG).show();
    }
    return celda;
} 
```

* * *

感谢您的建议，现在我可以将字符串 xml 作为参数发送并进行解析，但我不知道如何保存找到的 2 个值并在不同的 EditText 中显示每个值？

```
private EditText et02;
private EditText et03;
private String xmlc = "<game><cel>5</cel><val>2</val></game>";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    EditText et02 = (EditText)findViewById(R.id.et02);
    EditText et03 = (EditText)findViewById(R.id.et03);

    TextView myXmlContent = (TextView)findViewById(R.id.xml_tv);
    String stringXmlContent;

    stringXmlContent = getAllXML();
    myXmlContent.setText(stringXmlContent);

}
public String getAllXML(){

    Activity activity = this;
    String str = "";

    //For file source
    //Resources res = activity.getResources();
    //XmlResourceParser xpp = res.getXml(R.xml.test);

    try {
        //For String source
        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();
        xpp.setInput(new StringReader(xmlc)); 

        xpp.next();
        int eventType = xpp.getEventType();                        

          while (xpp.getEventType()!=XmlPullParser.END_DOCUMENT) {
              if (xpp.getEventType()==XmlPullParser.START_TAG) {
                  if (xpp.getName().equals("cel")) {
                      str += "\ncell : "+xpp.nextText();
                  }
                  if (xpp.getName().equals("val")) {
                      str += "\nval : "+xpp.nextText();                       
                  }
              }
              xpp.next();
          }

    } catch (XmlPullParserException e) {
          e.printStackTrace();
    } catch (IOException e) {
          e.printStackTrace();
    }
    return str;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-18T16:36:49.517

// 调用 web api 并尝试下面的代码进行 xml 解析

```
new GettingData().execute();

private class GettingDataextends AsyncTask<String, String, String> {

        private static final String PLACEMARK = "Placemark";
        private static final String NAME = "name";
        private static final String DESCRIPTION = "description";
        private static final String COORDINATES = "coordinates";
        private ProgressDialog progressDialog;
        private String serverName, trackName;

        @Override
        protected void onPreExecute() {

            super.onPreExecute();
                progressDialog = new ProgressDialog(mContext);
                progressDialog.setMessage("Loading ...");
                progressDialog.setIndeterminate(false);
                progressDialog.setCancelable(false);
                progressDialog.show();

        }

        @Override
        protected String doInBackground(String... args) {

            try {

                url = "Your_Url_Here";

                XMLParser parser1 = new XMLParser();
                String xml = parser1.getXmlFromUrl(url); // getting XML

                XmlPullParserFactory factory = XmlPullParserFactory
                        .newInstance();
                factory.setNamespaceAware(true);
                XmlPullParser parser = factory.newPullParser();

                parser.setInput(new StringReader(xml));

                int eventType = parser.getEventType();
                Model mModel = null;
                while (eventType != XmlPullParser.END_DOCUMENT) {

                    String name = null;
                    switch (eventType) {
                    case XmlPullParser.START_DOCUMENT:
                        break;
                    case XmlPullParser.START_TAG:
                        name = parser.getName();
                        if (name.equalsIgnoreCase(PLACEMARK)) {
                            mModel = new Model();
                        } else if (mModel != null) {
                            if (name.equalsIgnoreCase(NAME)) {
                                mModel.setName(parser
                                        .nextText());
                            } else if (name.equalsIgnoreCase(DESCRIPTION)) {
                                mModel.setDescription(parser
                                        .nextText());
                            } else if (name.equalsIgnoreCase(COORDINATES)) {
                                mModel.setCoordinates(parser
                                        .nextText());
                            }
                        }
                        break;
                    case XmlPullParser.END_TAG:
                        name = parser.getName();
                        if (name.equalsIgnoreCase(PLACEMARK)
                                && mModel != null) {

                            if (!mPlaceMarkSingleDriver.getName()
                                    .equalsIgnoreCase("null")) {
                                Constance.mArryList                                         .add(mModel);
                            }

                        }
                        break;
                    }
                    eventType = parser.next();
                }

            } catch (Exception e) {

                    progressDialog.dismiss();

            }

            return null;

        }

        @Override
        protected void onPostExecute(String result) {

            progressdialog.dismiss();
    } 
```

// XmlParse 类

```
import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T04:57:55.177

您没有在 while 循环中更新标记名试试这个：

```
while (eventType != XmlPullParser.END_DOCUMENT) {
    if (tagName.equalsIgnoreCase("cell")) {
        celda = xpp.nextText();
    } else if(tagName.equalsIgnoreCase("val")) {
        valor = xpp.nextText();
    }       
    xpp.nextTag();  
    tagname=xpp.getName();    
} 
```

# c# - LINQ（无法将“System.Double”类型的对象转换为“System.String”类型。）

> ID：16141932
> 
> 赞同：1
> 
> 时间：2013-04-22T07:48:29.650
> 
> 标签：c#, .net, linq

我在使用 LINQ 概念时遇到问题。下面我比较两个数据表，一个由数据库填充，另一个由 excel 文件填充。

问题是当我在两个“tempdt”之间应用连接时包含双值，这会导致转换对象的错误。我无法将返回类型从字符串更改为双精度，因为它将来可能是任何数据类型，因为目前它是双精度的，将来可能是字母数字。

```
 var commonRows = from r1 in dt.AsEnumerable()
                             join r2 in tempdt.AsEnumerable()
                             on r1.Field<string>(0) equals r2.Field<string>(4)
                             select r2;
            if (commonRows.Any())
            {
                abcdefgh = commonRows.Count();
                dt123 = commonRows.CopyToDataTable();
                // ring the ghanta of gutlu
            } 
```

> *例外：无法将“System.Double”类型的对象转换为“System.String”类型。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:58:16.293

这是我认为您的问题所在：

```
from r1 in dt.AsEnumerable()
join r2 in tempdt.AsEnumerable() on
r1.Field<string>(0)  //<-- this may not be string
equals 
r2.Field<string>(4) //<-- this may not be string
select r2; 
```

您*可以* 做的是将其视为对象：

```
from r1 in dt.AsEnumerable()
join r2 in tempdt.AsEnumerable() on
(string.Empty + r1.Field<object>(0)) <-- Edited by Andreas X
equals 
(string.Empty + r2.Field<object>(4)) <-- Edited by Andreas X
select r2; 
```

您*应该*做的是确保您的索引号（0 和 4）指向相同的类型。

编辑：当询问 tostring 值时，我通常使用旧的 ASP 技巧来避免空指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:53:35.990

转换为字符串实际上是不可能的，因为 double 和 string 是 2 个完全不相关的类。也许尝试比较他们的 .ToString() 值。或者，如果您想完全安全，请比较它们的字符串格式，这样您就不会得到任何 NullReferenceExceptions：`string.Format("{0}", fieldvalue)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:19:57.717

下面的代码对我有用。

谢谢大家

```
 var commonRows = from r1 in dt.AsEnumerable()
                             join r2 in tempdt.AsEnumerable()
                             //on r1.Field<object>(0).ToString() equals r2.Field<object>(4).ToString()
                             on r1[0].ToString() equals r2[4].ToString()
                             select r2;
            if (commonRows.Any())
            {
                abcdefgh = commonRows.Count();
                dt123 = commonRows.CopyToDataTable();
                // ring the ghanta of gutlu
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:23:12.183

Field 期望基础数据类型是字符串。

请参阅：http: [//msdn.microsoft.com/en-us/library/bb301394.aspx](http://msdn.microsoft.com/en-us/library/bb301394.aspx)

InvalidCastException
基础列的值类型无法转换为泛型参数 T 指定的类型。

您可以使用 object 来忽略 Jens Kloster 想要的类型。但是，如果您不知道列的数据类型，那么您的设计就有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-17T22:06:23.043

此错误是由属性的实体和基础表列之间的数据类型不匹配引起的。

# php - 尝试更新记录时，它给出的值为 0 - codeigniter

> ID：16141933
> 
> 赞同：0
> 
> 时间：2013-04-22T07:48:42.463
> 
> 标签：php, mysql, codeigniter, sql-update, crud

我正在开发一个用于添加工厂的小系统。但是现在当我单击编辑并填写表单（仍然为空，因为我没有设置 set_value）并单击提交时，它为所有字段提供了 0 值。

我认为这与身份证有关，但我不知道问题出在哪里。

我的编辑页面链接（使用 id 作为段（3））

```
<a href="<?= base_url();?>members/updatebedrijven/<?= $item->idbedrijven;?>">Edit</a> 
```

我的控制器功能：

```
function updatebedrijven()
{
    $this->load->view('members/header');
    $this->load->view('members/editform');
    $this->load->view('members/footer');
}

function update()
{
    $this->members_model->updatebedrijf($id);
    redirect('members/index');
} 
```

我的模型功能：

```
function updatebedrijf($id)
{
    $id = $this->uri->segment(3);
    $data = array(
       'Bedrijfsnaam' => $this->input->post('Bedrijfsnaam'),
       'Postcode' => $this->input->post('Postcode'),
       'Plaats' => $this->input->post('Plaats'),
       'Telefoonnummer' => $this->input->post('Telefoonnummer'),
       'Email' => $this->input->post('Email'),
       'Website' => $this->input->post('Website'),
       'Profiel' => $this->input->post('Profiel'),
       'Adres' => $this->input->post('Adres'),
       'logo' => $this->input->post('logo')
    );

    $this->db->where('idbedrijven', $id);
    $this->db->update('bedrijven', $data); 
} 
```

我的表格：

```
<div id="cpanel">
<h2>Bedrijfsgegevens aanpassen</h2>
<?= br(1);?>
<?= validation_errors(); ?>
<?= form_open('members/update');?>
<table>
<b>NAW Gegevens</b>
    <tr>
    <td><?= form_label('Bedrijfsnaam:');?></td>
    <td><?= form_input('Bedrijfsnaam');?></td>
    </tr>

    <tr>
    <td><?= form_label('Adres:');?></td>
    <td><?= form_input('Adres');?></td>
    </tr>

    <tr>
    <td><?= form_label('Postcode:');?></td>
    <td><?= form_input('Postcode');?></td>
    </tr>

    <tr>
    <td><?= form_label('Plaats:');?></td>
    <td><?= form_input('Plaats');?></td>
    </tr>

    <tr>
    <td><?= form_label('Telefoonnummer:');?></td>
    <td><?= form_input('Telefoonnummer');?></td>
    </tr>

    <tr>
    <td><?= form_label('Website:');?></td>
    <td><?= form_input('Website');?></td>
    </tr>

    <tr>
    <td><?= form_label('Email:');?></td>
    <td><?= form_input('Email');?></td>
    </tr>

    <tr>
    <td><?= form_label('Profiel:');?></td>
    <td><?= form_textarea('Profiel');?></td>
    </tr>

    <tr>
    <td><?= form_submit('submit', 'Opslaan');?> <?= form_reset('reset', 'Reset');?></td>
    </tr>

</table>
<?= form_close()?>
<br/>
<a href="<?= base_url();?>members/index"><< Terug</a>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:17:37.820

首先，我们需要移动您的一些代码。您不应该访问 uri 或模型中的发布数据，因此让我们将其移至控制器。

控制器功能：

```
function updatebedrijven()
{
    // Access the uri in the update form and pass the value to the view
    $data['id'] = $this->uri->segment(3);

    $this->load->view('members/header');
    $this->load->view('members/editform', $data);
    $this->load->view('members/footer');
}

function update()
{

    // Access the post data in the function the form is posted to (not the model)
    $data = array(
      'Bedrijfsnaam' => $this->input->post('Bedrijfsnaam'),
      'Postcode' => $this->input->post('Postcode'),
      'Plaats' => $this->input->post('Plaats'),
      'Telefoonnummer' => $this->input->post('Telefoonnummer'),
      'Email' => $this->input->post('Email'),
      'Website' => $this->input->post('Website'),
      'Profiel' => $this->input->post('Profiel'),
      'Adres' => $this->input->post('Adres'),
      'logo' => $this->input->post('logo')
    );
    $this->members_model->updatebedrijf($id);
    redirect('members/index');
} 
```

模型功能：

```
function updatebedrijf($id, $data)
{
    $this->db->where('idbedrijven', $id);
    $this->db->update('bedrijven', $data); 
} 
```

其次，`members/update`当我们需要真正将其发布到时，您将表单发布到`members/update/$id`。因此，让我们稍微更改一下视图代码，并包含从控制器传递给它的 id 变量：

`<?= form_open('members/update/'.$id);?>`

# window-decoration - Wayland - 找出合成器是否装饰窗户

> ID：16141935
> 
> 赞同：2
> 
> 时间：2013-04-22T07:48:55.243
> 
> 标签：window-decoration, wayland

我见过这个问题：[Wayland 合成器不能像 X 上那样做窗口装饰吗？](https://stackoverflow.com/questions/5059798/cant-a-wayland-compositor-do-the-window-decorations-like-on-x)，但我想知道这一点：

假设我使用纯Wayland编写应用程序，我如何知道服务器是否会装饰窗口？我想支持不进行装饰的合成器和*进行装饰的合成器（在那些**没有*装饰的合成器上，应用程序将手动装饰它）。

 *这可能吗？如果不是，这在理论上是否可以使用当前的 Wayland API（即某种需要标准化的奇怪消息传递）？如果没有，为什么不呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T12:44:23.187

目前还没有标准化的方法来识别合成器是否装饰窗户。话虽这么说，但我不知道有任何 Wayland 合成器会在针对 Wayland 运行时进行服务器端装饰，并且所有主要工具包（GTK、QT、Elementary）都使用客户端装饰。*

# java - 如何处理不可中断阻塞（ExecutorService）

> ID：16141936
> 
> 赞同：1
> 
> 时间：2013-04-22T07:48:58.403
> 
> 标签：java, executorservice

我想使用 ExecutorService 框架解决一些 DNS 任务。我使用 java API 进行 DNS 查询： 1/ java.net.InetSocketAddress.InetSocketAddress(String, int) - 名称查找 2/ java.net.InetAddress.getByName(String) - 名称查找 3/ java.net.InetAddress.getHostName () - 反向名称查找

一个典型的 DNS 任务将是一个 Callable 对象，定义如下：

```
public class IpAddressResolver extends DnsCallable<String, InetAddress> {

    public IpAddressResolver(String host) {
        super(host);
    }

    public InetAddress call() throws Exception {
        return InetAddress.getByName(target);
    }

} 
```

如您所见，这 3 个调用都是不可中断的。问题是，如果`Future.get(long, TimeUnit)`超时然后我打电话`Future.cancel(boolean)`，我没有任何机会阻止工作线程尝试解析 DNS 任务（我已经 在 Linux文件中进行了测试`timeout:30`，以模拟长时间运行的 DNS 查询）。`attempts:5``resolv.conf`

这样做的结果是，如果当前正在运行的工作线程无法停止，当我提交另一个 DNS 任务时，则必须创建第二个线程，对于第三个任务，我将有第三个线程，依此类推。如果 DNS 服务器没有响应，那么我将在池中有一堆工作线程什么都不做（即等待超时 * 尝试 = 150 秒后出现的否定 DNS 响应）。

恐怕如果创建了许多线程并且在线程池中处于活动状态（我使用缓存线程池顺便说一句），我将不得不处理另一种问题......

我知道可以通过关闭底层套接字来停止不可中断的阻塞套接字读取调用，但我这边并非如此。

有谁知道如何处理这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T18:48:41.037

DNS 查找调用由系统调用完成。所以，java不能中断它。唯一的办法就是做一个线程池，希望不好的请求不要那么频繁地溢出线程池。或者只是`resolv.conf`用适当的超时调整你的。在 Java 中你无能为力。

作为替代方案，您可能会寻找一个很可能是可中断的纯 java dns 客户端实现。例如，快速谷歌搜索显示：http: [//sourceforge.net/p/dnsjava/](http://sourceforge.net/p/dnsjava/)

# javascript - javascript 警报消息未显示在 mvc3 中

> ID：16141943
> 
> 赞同：1
> 
> 时间：2013-04-22T07:49:26.633
> 
> 标签：javascript, asp.net-mvc-3, jquery

我正在从事 mvc3 和 wcf 服务中的会计项目。我正在使用 javascript、ajax 进行表单验证。我用javascript编写验证表单的代码。但我的 javascript 警报没有显示给 user.although 我在 brwoser 中启用了 javascript。当我调试代码时，会显示 javascript 警报，但如果提交表单则不调试代码，则不会向我显示用于验证的警报消息。

以下是 mvc3 中的表单代码

```
@model CBS.Models.AccntBD

@{
ViewBag.Title = "AccCode";
Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>AccCode</h2>

<div>

@using (Html.BeginForm())
{
<table class="tablestyle">
    <tr>
<td>   
<label>Account Code</label>
</td>
<td>
              <input type="text" id="AcCode" name="AcCode" maxlength="10" placeholder="Account     Code" autofocus="true" class="required" />

@Html.ValidationMessageFor(m => m.AcCode)
</td>
</tr>
<tr>
<td>
 <label>Description</label>
</td>
<td>
   <input type="text" id ="Descrip" name="Descrip" maxlength="150" placeholder="Desription..."     class="Descrip"/>
              @Html.HiddenFor(m=>m.Descrip) 
            @Html.ValidationMessageFor(m => m.Descrip)
</td>
</tr>
   <tr>
   <td>
   <span>
    <input type="submit" value="Cancel" onclick="Cancel()" />
   </span>           
          <span>
         <input type="submit" id="sve" name="action" value="Save" />
        </span>
         <span>
         <input type="submit" id="edi" value="Edit" name="action"/>             
        </span>
   <span>
    <input type="submit" value="Delete" id="del" name="action"/>
   </span>
        </td>
       <td>
   </td>
         </tr>  
   <tr>
   <td>       
                           @ViewData["result"]
              </td>
   <td>
   @Html.ValidationMessage("CustomError")

   </td>
   </tr>
</table>     
    }
    </div>
@section PageScripts{
<script src="/Scripts/test.js" type="text/javascript"></script>

} 
```

下面是我的 test.js 文件代码

```
 $('#sve').click(function () {
    //e.preventDefault();
    var isValid = validateForm();
    if (isValid) {

        //***********************CODE TO SAVE DATA IN DATABASE***********************************
        var person = { AcCode: $('#AcCode').val(), Descrip: $('#Descrip').val(), AddOn: dd };
        $.ajax({
            url: '/Home/Save?action=Sve',
            type: "POST",
            data: JSON.stringify(person),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                //   $('#message').html('Record saved successfully' + result).fadeIn();
                alert("Record saved successfully");
            },
            error: function () {
                //    $('#message').html('Error Occurred').fadeIn(); 
                alert("Record not saved successfully");
            }
        });
    }
    else
        return false;

});  //end button clcik function

function GetCodeData(Str) {

    var p = {
        StrSql: Str

    };
    $.ajax({
        url: '/Home/GetGenVal',
        type: 'POST',
        // contentType: 'application/x-www-form-urlencoded',
        dataType: "JSON",
        contentType: "application/json; charset=utf-8",
        processData: false,
        crossDomain: false,
        traditional: true,
        data: JSON.stringify(p),
        cache: false,
        //   success: callback
        success: function (data) {
            //$("#Descrip").val(data);
            //  ResSubCode = data;
            strRes = null;
            strRes = data;
            return strRes;
        }

    });
}

 function validateForm() {
    //==================CHCK EMPTY OR NULL OF ACCOUNT CODE FIELD===========================
    if ($('#AcCode').val().trim().length === 0) {
        alert('Must enter Account Code');
        $('#AcCode').focus();
        return false;
    } //end if
    //==================CHCK EMPTY OR NULL OF DESCRIPTION FIELD===========================
    if ($('#Descrip').val().trim().length === 0) {
        alert('Must enter Description');
        $('#Descrip').focus();
        return false;
    } //end if

    //==========================CHEK ACCOUNT CODE DIGITS=============================================
    subA = $('#AcCode').val().trim();
    //===========================check whether code exist already or not
    if (subA.length === 10) {
        str1 = "select AcCode from Account where AcCode='";
        str2 = str1 + subA + "'";
        GetCodeData(str2); //check whether code exist or not
        strRes = strRes.substring(1, strRes.length - 1);
        if (strRes.length > 0 && strRes != "") //if  code exist then return false and not allow to enter code   
        {
            alert('Code already exist cannot insert record');
            return false;
        }

    }
    //===============================
      if (subA.length === 2) {
        str1 = "select AcCode from Account where AcCode='";
        str2 = str1 + subA + "'";
        GetCodeData(str2); //check whether code exist or not
        strRes = strRes.substring(1, strRes.length - 1);
        if (strRes.length > 0 && strRes != "") //if  code exist then return false and not allow to enter code   
        {
            alert('Code already exist cannot insert record');
            return false;
        }

    }
    //============================
      if (subA.length === 4) {
        str1 = "select AcCode from Account where AcCode='";
        str2 = str1 + subA + "'";
        GetCodeData(str2); //check whether code exist or not
        strRes = strRes.substring(1, strRes.length - 1);
        if (strRes.length > 0 && strRes != "") //if  code exist then return false and not allow to enter code   
        {
            alert('Code already exist cannot insert record');
            return false;
        }

    }
    //=====================================end of code existence checking

    if (subA.length === 10) {//if user enter complete code
        sub4 = subA.slice(0, 4); //take first 4 digits of account code to check "0000"
        if (sub4 === '0000') {
            alert('Complete Code cannot Start with 0000');
            return false;
        } //end of chek first 4 digits are 0 or not
        //===================================================
        sub2 = subA.slice(0, 2); //get first 2 digits of account code
        // alert(sub2);
        str1 = "select AcCode from Account where AcCode='";
        str2 = str1 + sub2 + "'";
        GetCodeData(str2); //check whether 2 digits code exist or not
        //       alert(strRes);
        strRes = strRes.substring(1, strRes.length - 1);
        if (strRes.length > 0 && strRes != "") //if 2 digit code exist then chk for 4 digit code otherwise give message to create 2 digit code
        {
            var result;
            strRes = null;
            str2 = null;
            sub4 = subA.slice(0, 4); //get first 4 digits of account code
            str2 = str1 + sub4 + "'";
            result = Chk4DigitCode(str2)
            if (!result) {
                return false;
            }

            //                GetCodeData(str2); //check whether 4 digits code exist or not
            //                strRes = strRes.substring(1, strRes.length - 1);
            //                alert(strRes);
            //                if (strRes.length < 0) {
            //                    alert("First Create Sub Code of First Four Digits");
            //                    // alert("First Create Sub Code of First Four Digits");
            //                    //display message for create 4 digit sub code
            //                    //alert("");
            //                    //return false;

            //                }
        }
        else
            alert("First Create Control Code of Two Digits"); //display message for create 2 digit sub code
        return false;
    } //end of check length of code is 10
    //=================================
    else if (subA.length === 4) { //check whether user enter sub code
        sub2 = null;
        sub2 = subA.slice(0, 2);
        if (sub2 === '00') {
            alert('Sub Code cannot Start with 00');
            return false;
        } //end of chek first 2 digits are 0 or not
        //===========================
        sub2 = null;
        str1 = null;
        str2 = null;
        strRes = null;
        sub2 = subA.slice(0, 2); //get first 2 digits of sub code
        // alert(sub2);
        str1 = "select AcCode from Account where AcCode='";
        str2 = str1 + sub2 + "'";
        //strRes = GetCodeData(str2);
        //strRes = GetCodeData(str2); //check whether 2 digits code exist or not
        GetCodeData(str2); //check whether 2 digits code exist or not
        //       alert(strRes);
        strRes = strRes.substring(1, strRes.length - 1);
        if (strRes.length === 0 || strRes == "") {

            alert("First Create Sub Code of Two Digits");
            return false;

        }
    } //end of sub code checking
    return true;
} 
```

这些javascript函数在firefor（firebug）中调试期间显示警报，但没有任何断点，表单上不显示警报，用户不知道点击保存按钮后发生了什么。

任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:10:46.950

可能你有一个提交的表单，然后页面会刷新，所以你不会得到你的 ajax 请求的结果。尝试处理“提交”事件而不是“点击”，阻止表单提交（您可以使用preventDefault，或者最后返回false），并自行处理

```
$('#form_id').submit(function (e) {
e.preventDefault();    
var isValid = validateForm();
if (isValid) {

    //***********************CODE TO SAVE DATA IN DATABASE***********************************
    var person = { AcCode: $('#AcCode').val(), Descrip: $('#Descrip').val(), AddOn: dd };
    $.ajax({
        url: '/Home/Save?action=Sve',
        type: "POST",
        data: JSON.stringify(person),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            //   $('#message').html('Record saved successfully' + result).fadeIn();
            alert("Record saved successfully");
        },
        error: function () {
            //    $('#message').html('Error Occurred').fadeIn(); 
            alert("Record not saved successfully");
        }
    });
}
else
    alert("form is not valid");

return false;

});  //end button clcik function 
```

# video - [JWPlayer]：播放 HLS 的最后一段 .ts？

> ID：16141944
> 
> 赞同：2
> 
> 时间：2013-04-22T07:49:27.207
> 
> 标签：video, video-streaming, jwplayer, red5, http-live-streaming

在`JwPlayer`是否可以播放`.ts`from的最后一段`HLS`？在这种情况下，最后一段是`stream00736.ts`

当前的 JwPlayer 代码：

```
jwplayer("<?php echo $this->id?>").setup({
                    autostart: <?php echo $this->autoStart?'true':'false'?> ,
                    flashplayer: "<?php echo CHtml::asset($this->_path.'/jwplayer.flash.swf')?>",
                    width:<?php echo $this->width?>,
                    height:<?php echo $this->height?>,
                    playlist: [{
                        sources: [{ 
                           //Desktop
                            file: "<?php echo $this->rtmpPath;?>"
                        },{
                            //Mobile
                            file: "<?php echo $this->hlsPath;?>"
                        }]
                    }],
                    primary:"flash",
                }); 
```

![HLS 段](https://i.stack.imgur.com/C1ScN.png)

# tfs - 如何创建像 Storybord 这样的自定义链接类型

> ID：16141946
> 
> 赞同：2
> 
> 时间：2013-04-22T07:49:28.880
> 
> 标签：tfs, hyperlink

在 TFS 2012 中，产品 backlog 有一个 stroybord 链接，它是共享服务器中文件的路径。现在我需要创建一个工作项类型，其中包含类似于情节提要的文件路径链接的链接。所以我尝试了以下方法。

1.  扩展 Linkscontrol 没有足够的信息非常困难，MS 不推荐。
2.  创建类似于故事板的链接令我惊讶的是，无法导出故事板的链接类型定义。当我使用 exportlinktype 命令时，TFS 告诉我 Storyboard 不存在。

欢迎任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T17:57:15.640

自定义链接类型可以使用 XML 约定创建并使用以下命令上传到 TFS 服务器：

> witadmin importlinktype /collection:CollectionURL /f:FileName

这是集合的链接类型导出的样子：

```
<?xml version="1.0" encoding="ibm850"?>
<LinkTypes>
  <LinkType ReferenceName="Microsoft.VSTS.Common.Affects" ForwardName="Affects" ReverseName="Affected By" Topology="Dependency" />
  <LinkType ReferenceName="Microsoft.VSTS.Common.TestedBy" ForwardName="Tested By" ReverseName="Tests" Topology="Dependency" />
  <LinkType ReferenceName="Microsoft.VSTS.TestCase.SharedStepReferencedBy" ForwardName="Test Case" ReverseName="Shared Steps" Topology="Dependency" />
  <LinkType ReferenceName="System.LinkTypes.Dependency" ForwardName="Successor"ReverseName="Predecessor" Topology="Dependency" />
  <LinkType ReferenceName="System.LinkTypes.Hierarchy" ForwardName="Child" ReverseName="Parent" Topology="Tree" />
  <LinkType ReferenceName="System.LinkTypes.Related" ForwardName="Related" ReverseName="Related" Topology="Network" />
</LinkTypes> 
```

参考：[MSDN：使用 witadmin 自定义链接类型](http://msdn.microsoft.com/en-us/library/dd273716%28v=vs.100%29.aspx)

# postgresql - 我可以编写一个自定义函数来处理没有多个函数定义的不同数字类型吗？

> ID：16141947
> 
> 赞同：2
> 
> 时间：2013-04-22T07:49:38.720
> 
> 标签：postgresql, sql-function

例如，假设我想在 postgres 中编写一个自定义函数来安全地除以两个数字——即它应该检查任何一个参数是否为空以及除数是否为零。它应该优雅地处理这些错误情况，否则返回预期的商。

只要两个参数是相同的数字类型（例如，两个整数、两个数字等），当前代码就可以正常工作。

```
CREATE OR REPLACE FUNCTION safe_divide(anyelement, anyelement) RETURNS numeric AS $$
  SELECT CASE 
     WHEN $1 IS NULL OR $2 IS NULL OR $2 = 0 THEN NULL 
     ELSE $1::numeric / $2::numeric
     END;
$$ LANGUAGE SQL; 
```

我的问题：有没有办法编写这个函数，以便我可以提供不同的数字类型？

我想避免：

*   调用函数时需要显式转换参数（例如`safe_divide(x::numeric, y::numeric)`）

*   需要为每种可能的数据类型定义函数

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:54:26.390

如果你用数字参数和双精度定义你的函数，那么你可以将它用于每个数字参数。

```
 CREATE OR REPLACE FUNCTION safe_divide(numeric, numeric) RETURNS numeric AS $$
   SELECT CASE 
     WHEN $1 IS NULL OR $2 IS NULL OR $2 = 0 THEN NULL ELSE $1 / $2 END;
  $$ LANGUAGE SQL;

  CREATE OR REPLACE FUNCTION safe_divide(double precision, double precision)
  RETURNS numeric AS $$
   SELECT CASE 
     WHEN $1 IS NULL OR $2 IS NULL OR $2 = 0 THEN NULL 
                                             ELSE $1::numeric / $2::numeric END;
  $$ LANGUAGE SQL; 
```

它对其他类型的数据类型没有意义

```
 postgres=# select safe_divide(10::float,10::int);
       safe_divide       
 ------------------------
  1.00000000000000000000
 (1 row)

 postgres=# select safe_divide(10::numeric,10::int);
       safe_divide       
 ------------------------
  1.00000000000000000000
 (1 row)

 postgres=# select safe_divide(10::int,10::int);
       safe_divide       
 ------------------------
  1.00000000000000000000
 (1 row)

 postgres=# select safe_divide(10,10.0);
       safe_divide       
 ------------------------
  1.00000000000000000000
 (1 row) 
```

这是 PostgreSQL 中的典型模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:18:12.083

恐怕这是不可能的：

> 声明为 anyelement 的每个位置（参数或返回值）都允许具有任何特定的实际数据类型，但在任​​何给定的调用中，它们都必须是相同的实际类型。 [http://www.postgresql.org/docs/current/static/extend-type-system.html](http://www.postgresql.org/docs/current/static/extend-type-system.html)

我认为最好的方法是将参数转换为数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-30T21:01:23.527

我希望这也会对某人有所帮助。

感谢*Pavel Studule*引导我回答这个问题。

它确实使代码干燥，但要获得覆盖，您仍然需要定义它们。

在某些情况下，您可以定义一个包含主要工作的原始函数，然后创建调用原始函数并在函数中转换值的新函数定义。

```
CREATE OR REPLACE FUNCTION last_day_in_month(dt date) RETURNS integer AS $$
BEGIN
  RETURN DATE_PART('days',
    DATE_TRUNC('month', dt)
    + '1 MONTH'::INTERVAL
    - '1 DAY'::INTERVAL
  );
END; $$
LANGUAGE PLPGSQL;

CREATE OR REPLACE FUNCTION last_day_in_month(dt timestamp) RETURNS integer AS $$
BEGIN
  RETURN last_day_in_month(dt::DATE);
END; $$
LANGUAGE PLPGSQL; 
```

# ssis - SSIS 自定义日志记录最佳实践

> ID：16141953
> 
> 赞同：2
> 
> 时间：2013-04-22T07:50:04.170
> 
> 标签：ssis

我想知道实现执行 SQL 任务日志记录的最佳方法是什么。例如，对于我的每个 Execute SQL Task 组件，我想记录以下内容：

1) SQL 任务的描述。2) SQL 任务中使用的 SQL 语句。3) SQL 语句的结果。SQL 语句返回一个标量值。4) SSIS 正在创建的作业运行 ID，即 SSIS 创建的 Operation_Id。

目前，这就是我实现它的方式，这是非常重复的。

1) 对于每个执行 SQL 任务（我们称之为 mySQLTask），我在 mySQLTask 的执行后事件中创建另一个名为“日志结果”的执行 SQL 任务。2) 我创建了一个名为 Log_Result 的存储过程，它从“日志结果”执行 SQL 任务中执行。3) 然后我从 mySQLTask 复制 SQL 语句并将其作为硬编码参数粘贴到存储过程参数中。例如，在 SQL 语句属性的“日志结果”SQL 任务中...“EXEC Log_Result ?,?,'SELECT COUNT(*) FROM TABLE',?

有没有办法可以动态地从 mySQLTask 检索 SQL 语句？有没有更好的方法来做到这一点？

我还探索了 SSIS 在日志记录功能中的 ExecuteSQLExecutingQuery 选项的内置日志记录。它给了我执行的 SQL 语句，但我也想跟踪结果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T03:08:37.423

我强烈推荐这本书和其中包含的日志框架：

**Microsoft SQL Server 2008 集成服务：问题、设计、解决方案**

[国际标准书号：978-0-470-52576-0](https://rads.stackoverflow.com/amzn/click/com/0470525762)

如果我正确理解了您的问题，我会说它完全符合您的要求。[代码下载链接在这里。](http://www.wrox.com/WileyCDA/WroxTitle/Microsoft-SQL-Server-2008-Integration-Services-Problem-Design-Solution.productCd-0470525762,descCd-DOWNLOAD.html)

如果我正确理解了您的问题，我会说如果您从具有 SQL Server 配置类型的包配置中配置执行 SQL 任务 SQLStatement 属性，它可以用于执行您所描述的操作。

这将允许您将 SQL 语句保存在 SQL Server 中的一个表中，您可以查询该表并将其连接到包含每个包任务日志的其他表。

它的设置非常简单，而且非常强大。作者在逐步引导您完成这一方面做得非常出色。应该需要大约一天的时间才能启动并运行。

记录执行 SQL 任务的标量结果将是对 SSIS PDS 框架的增强。但我不会太担心：应该很好地适应开箱即用的 PackageTaskLog 表。我在下面提供 PackageTaskLog 脚本供您参考。

```
CREATE TABLE [adm].[PackageTaskLog](
    [PackageTaskLogID] [int] IDENTITY(1,1) NOT NULL,
    [PackageLogID] [int] NOT NULL,
    [SourceName] [varchar](255) NOT NULL,
    [SourceID] [uniqueidentifier] NOT NULL,
    [StartDateTime] [datetime] NOT NULL,
    [EndDateTime] [datetime] NULL,
 CONSTRAINT [PK_PackageTaskLog] PRIMARY KEY CLUSTERED 
(
    [PackageTaskLogID] ASC
) 
```

# c# - 应用程序不会最小化到通知栏

> ID：16141954
> 
> 赞同：0
> 
> 时间：2013-04-22T07:50:10.617
> 
> 标签：c#, .net, winforms, notifyicon

我仍然无法让它工作，通知栏中没有任何内容。到目前为止，这是要最小化的完整代码：

```
private void button6_Click(object sender, EventArgs e)
{
    this.WindowState = FormWindowState.Minimized;
}

private void Form_Resize(object sender, EventArgs e)
{
    if (WindowState == FormWindowState.Minimized)
    {
        this.Hide();
    }
}

private void notifyIcon_Click(object sender, EventArgs e)
{
    this.Show();
    this.WindowState = FormWindowState.Normal;
} 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:59:54.953

您永远不会在通知区域中*显示任何内容。*跟踪您的代码并尝试查看发生了什么。我添加了一些评论：

```
private void button6_Click(object sender, EventArgs e)
{
    // When button 6 is clicked, minimize the form.
    this.WindowState = FormWindowState.Minimized;
}

private void Form_Resize(object sender, EventArgs e)
{
    // Catch the case where the form is minimized, including but not limited to
    // clicks on button 6.
    if (WindowState == FormWindowState.Minimized)
    {
        // In that case, hide the form.
        this.Hide();
    }
}

private void notifyIcon_Click(object sender, EventArgs e)
{
    // If the notification icon is clicked, reshow the form as a normal window.
    this.Show();
    this.WindowState = FormWindowState.Normal;
} 
```

现在注意到问题了吗？当表单最小化时，您所做的就是隐藏它。你永远不会告诉`NotifyIcon`显示它的图标！其[`Visible`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.visible.aspx)的默认值为`false`. 您必须将其设置`true`为使图标显示并`false`使其消失。

所以修改你的代码如下：

```
private void Form_Resize(object sender, EventArgs e)
{
    // Catch the case where the form is minimized, including but not limited to
    // clicks on button 6.
    if (WindowState == FormWindowState.Minimized)
    {
        // In that case, hide the form.
        this.Hide();

        // And display the notification icon.
        notifyIcon.Visible = true;

        // TODO: You might also want to set other properties on the
        // notification icon, like Text and/or Icon.
    }
}

private void notifyIcon_Click(object sender, EventArgs e)
{
    // If the notification icon is clicked, reshow the form as a normal window.
    this.Show();
    this.WindowState = FormWindowState.Normal;

    // And hide the icon in the notification area.
    notifyIcon.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:42:40.890

试试这个代码：

```
private NotifyIcon notifyIcon;
public Form1()
{
    InitializeComponent();

    button6.Click += (sender, e) =>
        {
            this.WindowState = FormWindowState.Minimized;
        };

    this.Resize += (sender, e) =>
        {
            if (WindowState == FormWindowState.Minimized)
            {
                this.Hide();
                notifyIcon.Visible = true;
                notifyIcon.ShowBalloonTip(1000);
            }
        };

    notifyIcon = new NotifyIcon()
        {
            Text = "I'm here!",
            BalloonTipText = "I'm here!",
            Icon = Icon.ExtractAssociatedIcon(Application.ExecutablePath)
        };

    notifyIcon.Click += (sender, e) =>
        {
            this.Show();
            this.WindowState = FormWindowState.Normal;
            notifyIcon.Visible = false;
        };
} 
```

# vba - Excel - VBA：如果语句不适用于“Set Range = .Range(...)”

> ID：16141965
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:50:47.470
> 
> 标签：vba, excel

我注意到，当我使用 If 语句尝试为变量 cityListRange 设置不同的单元格范围时，我的 VBA 程序不再工作。基本上，如果单元格“A:20”的内容是“马尼拉大都会”，我想将 cityListRange 初始化为 G21:G37 范围（马尼拉大都会的城市列表）。如果不是，那么它将是另一个列表 (G41:G43)（稍后在我的代码中，它使用了 match 方法，并以 cityListRange 作为参考）。

```
Set ws = ThisWorkbook.Sheets("Feuil2") 
With ws 
    If Range("A20").Value = "Metro Manila" Then
        Set cityListRange = .Range("G21:G37") 'list of cities to compare to (IN METRO MANILA)
    Else
        Set cityListRange = .Range("G41:G43") 'list of cities to compare to (IN PROVINCE)
    End If
End With 
```

当我将 cityListRange 初始化为一个且只有一个范围时，我的整个程序运行良好，但是当我添加 if 语句时，它停止工作，并且在程序结束时没有返回任何结果。您是否知道在这种情况下使用 If 语句是否有反指示？如果是这样，最好的写法是什么？提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:56:59.223

该错误可能是由于`Range`该`If`行之前缺少句点。

# facebook - Facebook 操作类型获取代码按钮不起作用

> ID：16141972
> 
> 赞同：1
> 
> 时间：2013-04-22T07:51:23.213
> 
> 标签：facebook, facebook-graph-api, action, facebook-fql, facebook-opengraph

是否有人对 Facebook 操作类型的获取代码按钮有问题？在我尝试过的所有浏览器中，它只是闪现一个空的加载框，然后消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:24:47.117

我有同样的问题，但解决了。您必须先创建一个故事（打开图表 -> 故事）。结合你的动作和对象，保存后你可以对你的动作执行“获取代码”。

# javascript - 在 DOM 元素上使用 JQuery 函数

> ID：16141973
> 
> 赞同：1
> 
> 时间：2013-04-22T07:51:29.530
> 
> 标签：javascript, jquery, dom

我确实相信这是一个非常愚蠢的问题，并且有一个非常简单的答案，但我没有找到解决方案：

我有以下 JavaScript 函数：

```
function setStatus(order, operation, status, elem){
    elem.parent().$(".active").removeClass("active");
    elem.addClass("active");
} 
```

Elem 是我的 HTML 中的图像元素，我通过检查它的类型确定它是正确的`alert(elem);`

我得到的错误正是我所期望的：

> 对象 #< HTMLImageElement> 没有方法 'parent'

我已经知道这是因为 elem 是一个 DOM 元素而不是 JQuery 元素，这意味着不可能使用像`parent()`and之类的函数`addClass()`。如何在我的 elem 上使用所有 JQuery 函数？有没有办法将 DOM 元素转换为 JQuery 元素？我在互联网上多次发现这个问题`this`应该是`$(this)`，但`$(elem)`似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:15:55.383

尝试

```
function setStatus(order, operation, status, elem){
    elem.parent().find(".active").removeClass("active");
    elem.addClass("active");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T07:55:05.673

尝试这个

```
$(elem).parent().removeClass("active");
 $(elem).addClass("active"); 
```

删除`$(".active")`. 我认为这也是罪魁祸首。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:01:40.263

`.parent()`是一个 jquery 函数，所以为了使用它，你必须“jqueryify”你正在使用的元素，所以：

```
$(elem) 
```

此外，虚假`$('.active')`会导致问题，因此解决方案应该是：

```
$(elem).parent().removeClass("active"); 
```

但是，如果没有看到一些 HTML 与 JS 一起使用，我不能 100% 确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:04:30.677

您的脚本中有一些语法错误，您可以使用它`.addback()`来链接它。

```
elem.parent(".active").removeClass("active").addBack().addClass("active"); 
```

# java - 如何在 Java 中为套接字连接创建软件负载平衡器

> ID：16141975
> 
> 赞同：4
> 
> 时间：2013-04-22T07:51:31.000
> 
> 标签：java, linux, sockets, load-balancing

我计划创建一个软件负载均衡器，它将位于 linux 中的许多套接字服务器前面。客户端将连接到负载均衡器。负载均衡器将维护一个替代 ip 及其端口的表。它将客户端连接到最佳可用 ip 和端口并断开与客户端的连接。因此它将退出场景（将不再连接到客户端）。在这种情况下，只有连接的设备将是客户端和新的套接字服务器，但不是负载均衡器。

```
Example : Cleint ip 10.1.2.3 port 1234  
           load balancer Ip 10.1.2.4 port 1235
           list of socket servers   in Load Balancer: 
           A Ip 10.1.2.4 port 1236 
           B Ip 10.1.2.4 port 1237
           C  Ip 10.1.2.5 port 1238
    Now 
for the 1st request to the load balancer from client, the load balancer  will establish a connection between the client &  server A and disconnect itself from client.
     for the 2nd request to the load balancer from client, the load balancer  will establish a connection between the client &  server B and disconnect itself from client.
     for the 3rd request to the load balancer from client, the load balancer  will establish a connection between the client &  server C and disconnect itself from client.

Any Help on implementing this in Java is greatly appreciated. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-06T11:54:29.283

我会使用 redis 来存储查找表。每个负载均衡器服务器将在 redis 的查找表中查找与最可用/最优先级服务器的连接。此查找将返回一个整数，它是服务器的索引。客户端中的每个应用程序都将存储服务器 ip 及其各自的索引。所以这个查找速度非常快，不到 30 毫秒。此时连接会更快。**不需要重定向。**如果存在并发连接，并且在应用程序尝试连接到查找的服务器时，所需服务器上的 qouta 已完成，则还提供了回退。在这种情况下，它将再次查找最可用的服务器，即递归地重新开始，直到连接成功或所有资源都完成并且连接请求被标记为死胡同。

为每次查找保留几毫秒的连接怎么样？在该查找的连接延迟到期后，页面文件将可用于新连接。这将减少递归查找，但也会阻止连接。延迟应该足以建立可能会有所不同的连接。另一方面，在此延迟期间新连接将被阻止，这可能会导致糟糕的用户体验。您需要在这两者之间进行权衡：减少查找和阻止连接与从不阻止连接并忍受非常快的递归查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-24T00:07:39.153

这种微型设计对于手机和标签等小型设备中的应用程序很有帮助。服务器可以对特定设备允许请求的往返次数设置限制。在线服务器的偏离路线扩展将有助于减少往返次数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-06T12:03:39.440

困难在于断开设备与服务器端的连接并将其与预期的服务器连接。
可以有一个解决方法：改用重定向。

*   **每个服务器都是客户端设备的负载平衡器和服务提供者**
*   **每个服务器将始终跟踪其打开文件限制，并从最大打开文件限制中保留安全边距**
*   **此池将用于检查是否需要任何重定向。**
*   **当打开文件限制达到安全限制时，任何进一步的连接请求都会将下一个可用的服务器 ip 返回给客户端设备。**
*   **可以在内存中的查找表中维护下一个最近的可用服务器 ip。**
*   **设备将检查返回的值是否以重定向ip开头，它将自动重新连接到接收到的ip。否则将假定设备从任何服务器成功获取服务。**

这样我们就可以避免打开文件限制和连接被拒绝错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:26:58.310

我不太明白负载均衡器应该与客户端断开连接的要求。如果您的套接字实际上是 TCP 连接，就像它们看起来那样，我看不出您如何将连接卸载到在其他地方运行的客户端，而无需一些低级别的黑客攻击。例如，查看来自[linux virtual server](http://www.linuxvirtualserver.org/)的 ldirectord 。这允许完全卸载连接。

为了简单起见，我只使用[HAProxy](http://haproxy.1wt.eu/)。做大部分你想要的，除了卸载连接。

最后，您还可以使用某种循环 DNS 解决方案。这也将根据您的需要卸载连接。

# javascript - 遍历另一个 div 内的特定 div 类

> ID：16141979
> 
> 赞同：5
> 
> 时间：2013-04-22T07:51:50.733
> 
> 标签：javascript, jquery, html, asp.net, webforms

我有 2 个 div，内部控件的类名为“.news-member-apps”。在同一页面上。现在，我想循环遍历特定 div 的类名，说我想循环遍历类名为“.news-member-apps”的#div1，而不是另一个#div2。并获得价值。

注意：这里我将前一页的 DIV 内容复制到当前页的 div 中，例如：在 #PrevSelectedNews 中并循环遍历它。

```
var id = document.getElementById('<%=HiddenFieldNewsID.ClientID%>');
    $('#PrevSelectedNews').load("/Default.aspx #ScrollerDiv", function () {
                alert(id.value);
                alert('Load was performed.' + $('#PrevSelectedNews'));
               $(".news-member-apps").each(function (k) {
                    var NEWSID = $(this).attr("newsid");
                    var ID = $(this).attr("id");
                    if (NEWSID == id.value) {

                        $("#" + ID).appendTo("#SelectedNews");
                       alert($("#" + ID) + "Found! Appending");

                   }

               });

            }); 
```

#PrevSelectedNews 包含上一页的所有新闻项目。*现在我只想在内部控件类的名称为“.news-member-apps”的情况下循环#PrevSelectedNews。如果 HiddenFiledNewID.value 与任何具有类名称“PrevSelectedNews”的控件匹配，则获取找到控件的 id。* 帮助赞赏！谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T07:55:39.227

使用这个选择器：

```
$('#PrevSelectedNews').find('.news-member-apps').each(function() { 
    // this - reference to each .news-member-apps item
}) 
```

它找到 ID 为“PrevSelectedNews”的元素，然后遍历具有“news-member-apps”类的子元素。

JQuery 选择器文档[在这里](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:10:32.843

尝试

```
var id = document.getElementById('<%=HiddenFieldNewsID.ClientID%>');
$('#PrevSelectedNews').load("/Default.aspx #ScrollerDiv", function() {
    $(".news-member-apps", this).filter(function() {
        return $(this).attr("newsid") == id.value
    }).each(function(k) {
        $("#" + $(this).attr("id")).appendTo("#SelectedNews");
    });
}); 
```

# c# - 拼写检查有什么好处？谷歌拼写检查器或 Hunspell

> ID：16141985
> 
> 赞同：4
> 
> 时间：2013-04-22T07:52:04.310
> 
> 标签：c#, asp.net, spell-checking, hunspell

对于我的 asp.net 网站，我需要拼写检查功能。我找到了一些有趣的解决方案。

1\. 谷歌拼写检查器
2\. Hunspell。
两者都是免费的。据我了解，我意识到这两种方法都有一些利弊。

对于谷歌拼写检查器，它为不正确的单词提供了更多正确的单词，但 Hunspell 给出了一些建议。谷歌有最新的建议，但 Hunspell，它依赖于 Open Office 字典。

就我而言，我只需要一个建议。对于缺点，我必须依靠谷歌进行拼写检查。如果 Google 服务关闭，它也会影响我的网站。

那么，什么将适合我的网站。选择 Google 拼写检查器是个好主意吗？是否有任何非免费的拼写检查解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:59:46.847

我认为，使用 Hunspell 很好

[使用Hunspell](http://www.maierhofer.de/en/open-source/nhunspell-net-spell-checker.aspx)的原因

> NHunspell 基于 Hunspell，将 Open Office 拼写检查、断字和词库引入 Microsoft® .NE​​T Framework。NHunspell 是一个 .NET (C#, VB) 库并包装了本地库 Hunspell、Hyphen 和 MyThes。
> 
> 集成库用于 OpenOffice 并与 OpenOffice.org 上发布的词典一起使用。
> 
> NHunspell 获得以下许可：GPL/LGPL/MPL。根据 LGPL 和 MPL 许可证，允许在商业应用程序中免费使用。您的商业应用程序可以链接到 NHunspell DLL。

*从其中一条评论中：*

> > **拼写检查器：Hunspell Hunspell 是一个拼写检查器**，
> > 
> > 形态分析器和生成器。它具有查找词干的词干功能。它允许从词干生成派生形式（复数，...）。
> 
> **SpellEngine - 拼写检查**，
> 
> 服务器和 Web 服务器 (ASP.NET) 的连字符和词库 SpellEngine 允许以线程安全的方式执行拼写检查请求。它是为服务器优化的组件。集成了所有 NHunspell 功能（拼写检查、断字、词库、分析和生成）。为了确保在多个请求中充分利用 CPU，每个处理器或处理器内核都会实例化一个 Hunspell、Hyphen 或 MyThes，并由信号量控制。可以安装多个字典以提供不同的语言。无需任何额外编程即可支持多语言应用程序中的拼写检查、断字和同义词。

来源[：](http://nhunspell.sourceforge.net/)[1、2](http://www.maierhofer.de/en/open-source/nhunspell-net-spell-checker.aspx) _

# jquery-mobile - JQM 将历史倒退不止一步

> ID：16141986
> 
> 赞同：1
> 
> 时间：2013-04-22T07:52:15.927
> 
> 标签：jquery-mobile

我有以下视觉活动：

1.  问题清单。
2.  详细的发行卡。
3.  弹出确认删除问题。

最后一个是有趣的小部件：

*   当我按“否”（不想删除）时，我需要返回详细卡。实现很简单 - 只需添加`data-rel="back"`到按钮链接。
*   当我按“是”（是的，想删除问题）时，删除后我需要返回两次到问题列表 - 因为已删除的问题已经不存在。

如何实现最后一个子弹？猜猜不需要直接指向页面网址（是的，有可能，但不灵活）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:00:42.830

`.prevAll()`使用如下方式返回两个步骤（上一页） 。

```
var previous = '#' + $.mobile.activePage.prevAll('[data-role=page]')[1].id;
$.mobile.changePage(previous, { transition: 'flip', reverse: true }); 
```

其中`[1]`是前几页中第二个前一页的索引`[object]`。

要使用此方法，您的页面应具有`id`.

> **[演示](http://jsfiddle.net/Palestinian/p4zAz/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:54:25.070

我再次检查了这个食谱：

*   是的，它是改变页面到我想要的。
*   不，这不是倒带历史。

我的意思是“倒带”：

步骤历史记录：page0 - page1 - page2 - “确认删除”。我所期望的 - “确认删除”将页面更改为 page1。按然后返回 - 页面更改为第 0 页。

我所看到的 - “确认删除”将页面更改为 page1（右）。按然后返回 - 页面更改为第 2 页（错误！）。更改页面时这是正常行为，但在我的情况下不是。

如何**倒带**？

# c# - 如何解决 Org.BouncyCastle.Crypto.DataLengthException

> ID：16141987
> 
> 赞同：2
> 
> 时间：2013-04-22T07:52:21.190
> 
> 标签：c#, .net, bouncycastle

消息是

```
attempt to process message to long for cipher 
```

完整的调用堆栈是

```
Org.BouncyCastle.Crypto.DataLengthException was unhandled by user code
  HResult=-2146233088
  Message=attempt to process message to long for cipher
  Source=BouncyCastle.Crypto
  StackTrace:
       at Org.BouncyCastle.Crypto.BufferedAsymmetricBlockCipher.ProcessBytes(Byte[] input, Int32 inOff, Int32 length)
       at Org.BouncyCastle.Crypto.BufferedAsymmetricBlockCipher.DoFinal(Byte[] input, Int32 inOff, Int32 length)
       at Org.BouncyCastle.Crypto.BufferedCipherBase.DoFinal(Byte[] input)
       at MyCode.Bouncy.PublicEncrypt(String value, String pubKey) in c:\MyCode\Helpers\Bouncy.cs:line 80
  InnerException: 
```

尝试使用公钥加密长度为 360 的字符串时，密钥长度为 1024 位

该错误似乎表明可以使用此密钥加密的字符串的长度有限制

这个对吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:22:47.143

是的，可以使用非对称密码加密的消息大小是有限制的。对称密码没有这些限制。

您不应该直接使用非对称密码加密消息。您应该使用非对称密码来加密对称密钥（会话密钥或内容加密密钥），然后使用该密钥来加密消息。然后，您传输加密的会话密钥和加密的消息。

然后，接收者将使用他们的私钥解密会话密钥，并使用解密的会话密钥来解密消息。

# c# - 使用 LINQ 将列表复制到不同的列表

> ID：16141988
> 
> 赞同：2
> 
> 时间：2013-04-22T07:52:23.160
> 
> 标签：c#, .net, linq, entity-framework-4

我有一个来自数据库的实体，我想将数据复制到另一个`class`具有以下字段的实体中。这里是

```
var list = mediaItems.Select(m => new MediaItemView
                {
                    ImageUrl = m.ImageURL,
                    LongDesc = m.LongDescription,
                    Title = m.Title,
                    Price = m.PriceNoVAT,
                    Composer = m.MediaItemOriginators.Where(mo => mo.OriginatorType.OriginatorTypeId == 3).FirstOrDefault().Originator.Firstname,
                    Arranger = m.MediaItemOriginators.Where(mo => mo.OriginatorType.OriginatorTypeId == 2).FirstOrDefault().Originator.Firstname,
                }); 
```

**问题：**当`Composer = m.MediaItemOriginators.Where(mo => mo.OriginatorType.OriginatorTypeId == 3).FirstOrDefault()`为空时，我得到异常（这是正常的），但如果有的话，我想拥有 Composer - 一个空字符串。 **如何实现这个任何想法？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T07:55:31.373

我将更改为使用`Select`子句在 or 默认调用之前选择名称`FirstOrDefault`，然后使用空合并运算符：

```
Composer = m.MediaItemOriginators
            .Where(mo => mo.OriginatorType.OriginatorTypeId == 3)
            .Select(mo => m.Originator.Firstame)
            .FirstOrDefault() ?? "" 
```

（当然，这是假设`m.Originator`匹配条目永远不会为空。）

或者您可以使用`DefaultIfEmpty`后跟`First`：

```
Composer = m.MediaItemOriginators
            .Where(mo => mo.OriginatorType.OriginatorTypeId == 3)
            .Select(mo => m.Originator.Firstame)
            .DefaultIfEmpty("")
            .First() 
```

# regex - Sed：正则表达式有什么问题

> ID：16141990
> 
> 赞同：1
> 
> 时间：2013-04-22T07:52:29.563
> 
> 标签：regex, sed

我已经编写了一个`sed`正则表达式（主要是在 SO 的帮助下）来更新 json 文件中的值，其形式可能是，

1 -`"XXXX" : "YYYY"`

或者

2 -`"XXXX" : "YYYY",`

或者

3 -`"XXXX" : YYYY`

或者

4 - `"XXXX" : YYYY,`

或者

5 -`"XXXX" : "YYYY,ZZZZ"`

这是我的`sed`正则表达式

`sed -r 's/("XXXX"\s*:\s*)(")?[^",]*(")?/\1\2YYYY\3/'`文件

以上表达式适用于 1-4 格式。

但是对于 5，它的更新如下所示，

`"XXXX" : "YYYY,ZZZZ"`到`"XXXX" : "ZZZZ,ZZZZ"`（预期`"XXXX" : "ZZZZ"`：）

我的正则表达式有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:10:28.003

由于您不担心要替换的值，因此更简单的模式就足够了

```
sed -r 's/("XXXX"\s*:\s*).*$/\1"YYYY",/' input 
```

或者您可以分别对待引用和未引用的

```
 sed -r 's/("XXXX"\s*:\s*)((")[^"]*"|[^,]*)/\1\3YYYY\3/' input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:01:00.173

`?`表示 0 或 1。您用于捕获`(")?`可选报价。相反，在这种情况下，因为正文部分`[^",]*`无法匹配 YYYY，ZZZZ 正文和尾随引号根本不匹配（这是允许的：由于 0 正文`*`和由于 0 引号`?`）所以您的替换仅在第一个操作行的一部分，`"XXXX" : "`其余的只是没有被替换。

`*`一个想法是用`+`需要一个身体来代替身体。您可能还想将表达式与绑定`^`，`$`因此您知道匹配整行以避免这样的混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:01:23.837

这可能正在做你想做的事：

```
sed -r 's/("XXXX"\s*:\s*)(")?[^",]*[^"]*/\1\2YYYY/' input 
```

但是，我不知道为什么您期望`"XXXX" : "ZZZZ"`最后一个，因为`ZZZZ`您的替换字符串中没有。

# c - 使用 buffer[100] = {0, } 的初始化如何在 C 语言中工作？

> ID：16141991
> 
> 赞同：8
> 
> 时间：2013-04-22T07:52:35.003
> 
> 标签：c

在用 C 语言编写的程序的加载数据部分，我看到缓冲区的初始化是这样完成的：

```
char buffer[100] = {0, }; 
```

但我不确定此语句分配了哪些值。请分享一些想法。

这取决于编译器还是语言功能？

如果此语句等​​效于：在零之后使用逗号有什么意义：

```
char buffer[100] = {0}; 
```

是不是因为编码人员只想确保第一个元素为零，而不关心其余部分？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T08:05:10.933

> 这取决于编译器还是语言功能？

行为由语言标准指定。当前标准（**[C11](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf) §6.7.9 Initialization / 21**，位于第 141 页）描述了当您提供的初始化程序少于聚合元素时会发生什么：

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

因此，未指定的元素被初始化为`\0`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T07:53:17.160

使用给定的值（`0`在这种情况下为单个值），然后所有其他成员都用零填充。

如果您说过`char buffer[100] = {1, };`，该数组将包含 1 和 99 个零。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T08:00:25.187

`buffer[100] = {literal, }`将第一个元素初始化为文字值，其余元素初始化为`0`。另一方面，将所有元素初始化为。您的代码等同于`buffer[100] = {0}`将所有元素初始化为 0。RichieHindle说明了整点。`0``buffer[100] = {0}``buffer[100] = {1, }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T08:00:48.143

给定大小的数组的初始值设定项以一对一的方式分配给数组成员。如果所有成员的初始值设定项太少，其余成员将被初始化为 0。为给定大小的数组列出太多初始值设定项是错误的。