# StackOverflow 问答 13458000-13458999

# asp.net-mvc - MonoDevelop 中缺少库/引用

> ID：13458003
> 
> 赞同：1
> 
> 时间：2012-11-19T16:25:41.250
> 
> 标签：asp.net-mvc, mono, monodevelop

我正在将使用 Visual Studio 的 MVC4 项目移植到使用 Monodevelop 托管在 CentOS 上的 Apache 服务器上的 MVC3 项目。我收到此错误：

```
using System.Data.Objects; 
```

命名空间“System.Data”中不存在类型或命名空间名称“Objects”。

有没有人做出这个举动，如果有，你是如何克服这个参考问题的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:30:17.040

对于`System.Linq`，您需要添加对`System.Core.dll`

对于 Entity Framework 命名空间`System.Data.Objects`，您需要使用 Mono 的最新 beta 版并添加对`EntityFramework.dll`.

# drupal - Drupal：如何根据内容类型将上传的图像存储在不同的文件夹中？

> ID：13458009
> 
> 赞同：0
> 
> 时间：2012-11-19T16:26:00.627
> 
> 标签：drupal, file-upload, directory

我正在使用 Drupal 7。

我有几种内容类型，每种类型都允许上传图片。我希望将上传的图像存储在每种内容类型的不同文件夹中。

Drupal 支持这个吗？我做了很多在线搜索，但找不到这样做的方法或模块。希望我没有错过任何东西。

感谢您的任何意见。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:34:30.627

模块[文件（字段）路径](http://drupal.org/project/filefield_paths)是您正在寻找的：它允许您更改每个字段的上传路径。您还可以添加令牌。

![文件字段路径 GUI](../Images/e48ab43e6113726f472f7b9686970eac.png)

# c# - 如何测试是否所有子类都已测试

> ID：13458012
> 
> 赞同：0
> 
> 时间：2012-11-19T16:26:10.437
> 
> 标签：c#, unit-testing, class, tdd, subclass

所以我真的很遗憾不记得为我创建的新类进行单元测试。我尽力坚持TDD，但有时我会忘记。我擅长运行测试（因为它只是一个按钮）所以有没有办法扫描所有类的命名空间，并检查它们是否派生自已知类。

例如。我有一个联系课程。我有 3 个联系人子类（运输、计费、服务）我对所有 3 个子类进行了单元测试。假设一个月后我决定从联系人派生另一个类。记得运行我的单元测试我非常棒，但在这种情况下，我希望它只失败 1 次测试以提醒我为我的新联系人类编写单元测试。就像是。

```
 [TestMethod, TestCategory("Contact")]
    public void TestAllContactsAccountedFor()
    {
        foreach(class c in theNamespace)
        {
            bool subclassOfContact = c is  Contact;
            if (subclassOfContact)
            {
                bool knownSubclass = (c is CustomerShippingContact) || (c is CustomerBillingContact) || (c is CustomerServiceContact);
                Assert.IsTrue(knownSubclass);

            }

        }
    } 
```

这样，如果我忘记进行测试，它将无法通过此测试，然后由我负责。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T16:29:23.173

我建议您调查测试覆盖率的使用，而不是用代码解决这个问题。特别是看看 nCrunch 它将标记您的代码库中已经在测试中使用的行，因此您可以轻松识别哪些需要编写 mroe 测试。见[http://ncrunch.net](http://ncrunch.net)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:33:21.283

您应该尝试[Mighty Moose aka ContinuousTests](http://www.continuoustests.com/)，它实际上会警告您未测试的代码，并且是唯一免费的 .NET 代码覆盖工具。

# perl - 将 Bash 命令返回设置为变量

> ID：13458015
> 
> 赞同：1
> 
> 时间：2012-11-19T16:26:20.313
> 
> 标签：perl, bash

如果我们可以在 Perl 中执行此操作，那也很好。我不知道这是否可能，但这是我想要做的。我正在尝试获取正在使用的内存百分比（可能有更好的方法，请告诉我）

我有这个 bash 命令

```
free -m | grep "Mem: " | awk '{print ($3/$2)*100}' 
```

这将返回一个数字，但我想做的是为命令的输出设置一个变量。

```
So var1= Output of the above command 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:28:02.297

我相信这就是您正在寻找的：

```
var1=$(free -m | grep "Mem: " | awk '{print ($3/$2)*100}') 
```

**解释：**

*   该`$(...)`语法在 shell 中称为命令替换。
*   它产生一个子shell来执行括号内的任何内容，然后将打印出的任何内容返回到`stdout`该子shell中。

**在旁边：**

另一种语法是反引号：

```
var1=`free -m | grep "Mem: " | awk '{print ($3/$2)*100}')` 
```

但由于可读性和嵌套问题，它不是首选方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T16:35:41.397

你不需要使用`grep`，如果你正在使用`awk`. 您可以将命令简化为：

```
var1=$(free -m | awk '/Mem:/{print ($3/$2)*100}') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:29:37.730

您可以在命令上使用反引号：

```
export var=`command` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:37:47.527

如果您使用的是 Linux（或任何具有兼容 /proc 接口的 Unix），您可以通过以下方式获取已用内存的百分比：

```
var1=$(perl -ne '/(\w+):\s*(\d+)/ and ($mem{$1} = $2) }{ printf "%0.2f", 100 - 100 * $mem{MemFree} / $mem{MemTotal}' /proc/meminfo) 
```

请注意，减去缓冲区和缓存通常是一个好主意（操作系统缓存往往会填满所有可用的 RAM）：

```
var2=$(perl -MList::Util=sum -ne '/(\w+):\s*(\d+)/ and ($mem{$1} = $2) }{ printf "%0.2f", 100 - 100 * sum(@mem{qw{Buffers Cached MemFree}}) / $mem{MemTotal}' /proc/meminfo) 
```

# java - 实现相同接口的类之间的关系

> ID：13458026
> 
> 赞同：10
> 
> 时间：2012-11-19T16:26:47.463
> 
> 标签：java, relationship

我几乎是java初学者，我来stackoverflow论坛询问一个简单的问题。我已经在这里检查了类似的问题，但是我没有找到想要的答案，链接：[实现接口的类和那个接口之间有什么关系吗？](https://stackoverflow.com/questions/1050146/is-there-any-relation-between-the-class-that-implements-interface-and-that-inter)

我们知道如果*Cat*扩展了*Animal*，这里就有关系。所以猫是动物（但不一定是动物。动物也是狗..）。我们将这种关系称为“is-a”-**继承**。

如果我们还有另外两个类：*Girl*和*Candy*，并且如果类 Girl 包含 Candy 的实例，那么我们将这种关系命名为“has-a”- **composition**，因为我们可以说 Girls has-a Candy。

如果我在上面的例子中做错了什么，请纠正我。

无论如何，我的问题是实现相同接口的类对象之间是否存在某种关系？比方说：

```
public class A implements InterfaceA {}

public class B implements InterfaceA {} 
```

如果存在某种关系，我们如何利用这种关系？提前谢谢你的回答。。

编辑：对于那些认为没有关系的人，我有一本书“java如何编程第九版”，并且有一个UML图显示了在“关系”中实现相同接口的类？

图片：

![在此处输入图像描述](../Images/6b3e0bc22247383803dd8912db8ebd7a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T16:28:51.163

实现相同接口的对象之间没有关系。两者都是它们自己的独立实现。他们只是遵循接口定义的协议。

如果您尝试从一种对象类型转换为另一种对象类型，您最终会得到`ClassCastException`.

**编辑：**

您的 UML 图表明接口和类（IS-A）之间存在关系，但实现相同接口的两个类之间没有关系。类之间没有关系符号线（就像你在类和接口之间看到的那样）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:38:18.060

这意味着您的类具有由接口方法描述的类似行为。

例如，考虑两个类：`Fish`和`Bird`。它们都可以实现`Moveable`如下接口：

```
inteface Moveable{
    void move(int x, int y, int z);
}

class Fish implements Moveable{
    public void move(int x, int y, int z){
       swim(x, y, z); 
   }
    private void swim(int x, int y, int z){
      //a method describing how the fish swims
    }
}

class Bird implements Moveable{
    public void move(int x, int y, int z){
       fly(x, y, z); 
   }

    private void fly(int x, int y, int z){
      //a method describing how the bird flies
    }
} 
```

您可以调用接口方法指定的行为，例如：

```
Moveable bird = new Bird();
Moveable fish = new Fish();

bird.move(10,10,10);
fish.move(10,10,-10); 
```

所以它们中的任何一个都可以移动，尽管它们移动的方式有很大的不同。这样，两个类共享共同的行为，尽管您可能不知道它的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:28:33.027

类的实现与接口的关系，接口也是“is-a”的关系，与从类扩展一样。

它很有用（或者至少是它有用的一个原因），因为通过提供接口，您可以对接口进行编码，而不是对接口的实现进行编码，从而可以轻松（如果需要）将您的实现与大惊小怪。

请注意，如果您要“跨越”继承层次结构，那么查看继承相同接口的两个类之间的关系，这里根本没有隐式关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:35:35.850

实现相同接口的两个类之间的关系没有正式的名称。

或者，就此而言，它扩展了相同的基类。如果扩展另一个的孩子是它的孩子，那么同一个类的两个孩子是兄弟姐妹，但这不是通常使用的术语。

如果你想把这个拟人化的比喻扩展到接口，你可以调用两个接口相似的实现，也许。

# delphi - 为什么 .Net 的限制为 32768 时，OmniThreadLibrary 限制为 60 个线程？

> ID：13458029
> 
> 赞同：4
> 
> 时间：2012-11-19T16:26:58.610
> 
> 标签：delphi, delphi-xe2, omnithreadlibrary

我最近比较了 .NET 中的 OmniThreadLibrary 和 ThreadPool，我发现 Omni 在最大线程数方面受到更多限制——**允许 60 个**——而 .NET在 .NET 4.0 中可以达到**32768 。**

为什么会有这样的限制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T16:39:31.200

这是一个历史性的选择，一旦被取消。该限制仅存在于线程池实现中。

[网站](http://otl.17slon.com/forum/index.php?topic=32.0)上给出了解释，说明如下：

> 60 个并发线程的限制仅适用于线程池。线程池是为快速执行许多小请求而设计的，而不是作为很少活动线程的存储。
> 
> 您可以跳过线程池并直接使用 OTL 任务。这样，您可以创建数百个。

这个限制的原因是内部`[OtlTaskControl]TOmniTaskExecutor.WaitForEvent`使用有这个限制的 MsgWaitForMultipleObjectsEx。如果真正需要具有超过 60 个并发运行线程的任务池，则可以绕过此限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:48:59.803

您可以通过更改以下内容来绕过这些内容：

`FD_SETSIZE = 1024`在 `Winsock.pas`

`CMaxConcurrentWorkers = 1024;`在`OtlThreadPool.pas`

# android - 可绘制目录中的xml文件？肯定有什么错误？

> ID：13458031
> 
> 赞同：1
> 
> 时间：2012-11-19T16:27:06.427
> 
> 标签：android

我正在尝试将广告商系统整合到我的 android 应用程序中。我被指示将一些文件（在目录树中）复制到我的项目资源文件夹中。大多数文件和目录都有意义......除了在它们的“可绘制”目录中它们有一系列 XML 文件（以及预期的 PNG 文件）。对我来说，这看起来像是一场闹剧。当然所有的 XML 文件都应该在“布局”目录中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:29:26.520

不，这是完全有效的。您可以让 XML drawables[在这里查看有关此的文档](http://developer.android.com/guide/topics/resources/drawable-resource.html)- 阅读它 - 这些非常强大和灵活。此外，您应该避免将基于 XML 的可绘制对象以外的其他类型放入`res/drawables`文件夹中。所有位图都应存储到`res/drawables-<QUALIFIER>`（即`res/drawables-hdpi`等`res/drawables-mdpi`文件夹）中。

# google-apps-script - 使用谷歌应用脚 本向谷歌联系人添加更多字段

> ID：13458039
> 
> 赞同：1
> 
> 时间：2012-11-19T16:27:45.260
> 
> 标签：google-apps-script

我正在尝试向通过 Google Apps 脚本创建的联系人添加更多信息，但我不断收到错误消息：

> "服务错误：ContactsApp：不匹配：etags = ["SX48fjVSLit7I2A9WhNQE0kLQAI."]，版本 = "

我正在尝试使用以下代码来做到这一点：

```
var newContact = ContactsApp.createContact(firstName, lastName, email);
newContact.setNickName(nickname); 
```

变量 firstName、lastName、email 和昵称都是从谷歌电子表格中提取的。

每当我尝试向联系人添加更多信息时，无论我尝试添加什么信息，错误总是发生在第二行代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:37:29.857

这与[问题 1528](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1528)类似。提供给您可以使用的问题的链接中提到了一种解决方法。

# scala - 分离方法

> ID：13458041
> 
> 赞同：2
> 
> 时间：2012-11-19T16:27:47.040
> 
> 标签：scala

是否可以从类中分离方法？

```
class A {
  def b(C): D
} 
```

是否有一个函数接受`b`并返回一个带有签名`A => C => D`或的函数`(A,C) => D`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:40:27.413

通常不需要从具有单个参数的方法显式创建新的二进制函数，因为当编译器需要这样的函数类型时，您可以改为使用`_ methodName _`匿名函数的中缀运算符语法。

第一个`_`代替目标对象（A 的实例），第二个`_`代替方法的参数。

例如，如果您有一个潜在的使用网站

```
def swizzle(f: (A, C) => D) = sys.error("todo") 
```

然后你可以参考这样的方法`b`：

```
swizzle(_ b _) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:34:10.710

好吧，我不知道执行此操作的函数，但是创建这样的函数很容易：

`val f: A => C => D = a => c => a b c`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:14:28.163

您可以通过将下划线替换为创建部分应用函数的方法的参数组来将方法提升为函数。

这需要一个非抽象方法，所以稍微修改你的例子：

```
case class C()
case class D()

class A {
  def b(c: C): D = {
    val d: D = D()
    println("A.b("+c+") = "+d)
    d
  }
} 
```

所以功能是

```
val afunc: A => C => D = (a: A) => a.b _ 
```

使用一些示例参数调用函数...

```
afunc(new A)(C()) 
```

输出

```
A.b(C()) = D() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:37:10.970

这个概念被称为*eta 扩展*。以下是 Scala 语言规范的相关部分：

* * *

## 6.26.2 方法转换

以下四种隐式转换可以应用于未应用于某些参数列表的方法。

*   **评价**。`m`类型的无参数方法`=> T`总是 通过计算绑定`T`的表达式转换为类型。`m`

*   **隐式应用**。如果该方法仅采用隐式参数，则隐式参数将按照 §7.2 的规则进行传递。

*   **埃塔扩展**。否则，如果方法不是构造函数，并且预期类型 pt 是函数类型`(Ts ) ⇒ T`，则对表达式执行 eta-expansion（第 6.26.5 节）`e`。

*   **空应用程序**。否则，如果`e`有方法 type `()T`，它会隐式应用于空参数列表，产生`e()`。

# twitter-bootstrap - 另一个引导程序问题 - 模态

> ID：13458044
> 
> 赞同：0
> 
> 时间：2012-11-19T16:28:08.250
> 
> 标签：twitter-bootstrap

我已经让一个模式工作，但我不能让多个工作。每当我单击第二个时，页面就会变暗，就像要弹出一样，但什么也没有发生。但是，第一个效果很好。这是指向整个文件的链接--removed-，当然还有指向页面的链接--removed-我在两者上都使用了 $('#sample').modal(options) （当然要更改#sample）但是第二个只是拒绝工作。谢谢。

```
EDIT: Nevermind, I found the answer, I forgot to close a <div> tag. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:39:38.117

问题是你有多个定义

```
id="donate" 
```

在你的代码中。尝试解决此问题。

# scala - 使用 @switch 优化 Java 枚举的 Scala 模式匹配

> ID：13458047
> 
> 赞同：6
> 
> 时间：2012-11-19T16:28:14.800
> 
> 标签：scala, enums, pattern-matching

我有以下问题：我们有一个共享的 scala-java-project （与只编写 java 代码的成员），因此我们将 java 枚举用于一个目的。但是现在我想在scala中对这个枚举执行模式匹配，并用@switch对其进行优化，因为java switch实际上可以使用枚举。

但是编译器只会抱怨：

```
error: could not emit switch for @switch annotated match
(args.tileType: @switch) match { 
```

其中 tiletype 是包含枚举值之一的字段。如何解决代码可以优化的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:43:42.227

您使用 Java。

Scala 仅包含能够读取 Java 枚举所需的最低限度的内容。目前（通过 2.10）您无法在 Scala 中创建或优化使用它们。

# macos - 丢失窗口恢复功能，自动保存在用户首选项中并保存在 NSDocument 模型中

> ID：13458048
> 
> 赞同：11
> 
> 时间：2012-11-19T16:28:18.103
> 
> 标签：macos, cocoa, save, nsdocument

我在主窗口上使用 NSOutlineView 启动了一个基于文档的小应用程序。我在模型类中使用 NSCoding 协议将模型保存在文件中，一切都很好。

接下来，我想保存用户界面（窗口大小和位置、大纲视图中的扩展项目、选择...），我发现 Lion 中添加了 Resume 功能。

所以我尝试实现它，我在主窗口和大纲视图中添加了一个自动保存名称，设置了 autosaveExpandedItems 属性并在大纲视图的数据源中实现了 outlineView:itemForPersistentObject: 和 outlineView:persistentObjectForItem: 方法。

那行得通，但是当我创建/打开另一个文件然后关闭它时，其他文件的扩展项状态将设置为关闭文件的状态。

就像应用程序只为所有文档保存一个窗口，而不是为每个文档保存一个窗口。

我对自动保存和恢复有点迷茫，是相同的功能还是两个完全不同的功能？

我可以使用它来保存窗口状态还是需要将其保存在我的模型中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-04T04:05:20.587

我意识到这已经晚了大约 3 年，但也许这会对最终来到这里的任何人有所帮助。

我绝不是 Cocoa 专家或专业的 mac 开发人员（仍在学习），所以恐怕我只能提供一点见解（我自己一直在开发基于文档的应用程序）。

可能的情况是，在每个窗口和每个控件的基础上实现保存状态数据只是将其绑定到单个实例（因为它全部预加载在 xibs 中并绑定到单个自动保存名称），但我可能是错的对这个。哪位懂行的可以指正。

也许尝试将您的状态信息保存在 NSDocument 级别而不是窗口，然后实现`window(window: NSWindow, willEncodeRestorableState state: NSCoder)`并`window(window: NSWindow, didDecodeRestorableState state: NSCoder)`从您的文档数据中提取。

当然，您可以轻松访问当前窗口的文档：`view.window?.windowController?.document as? YourNSDocumentSubclass`

这或多或少是我正在做的事情，到目前为止似乎很有希望。其他建筑大师可能会提供更多见解。

# java - javafx-2，selectionModel的ListView selectedIndices属性在删除项目时不一致

> ID：13458050
> 
> 赞同：3
> 
> 时间：2012-11-19T16:28:24.847
> 
> 标签：java, listview, javafx-2

在 javafx-2 ListView 中，我注意到 getSelectedIndices 中有一个奇怪的（但可以解决的）行为。
getSelectedIndices 属性（SelectionModel 的）是一个可观察的列表，如果允许多选，则该列表应该包含选定的项目或选定的项目。
但是如果我添加一个项目，选择它然后删除它，您可能会认为选择不会包含任何项目，但实际上它确实包含一个项目并且恰好是 -1。
这是显示这一事实的最简单的代码。

```
public class T01 extends Application {

public static void main (String [] args) { launch(args);}

ListView<String> listView;

//just create the controls, that is a BorderPane with a ListView in its center
@Override
public void start(Stage primaryStage) throws Exception {

    BorderPane borderPane = new BorderPane();

    listView = new ListView();

    borderPane.setCenter(listView);

    primaryStage.setScene(new Scene(borderPane));

    primaryStage.show();

    doTest();

}

//doTest: add an item, select it, remove it and inspect the selection model again
public void doTest() {

    System.out.println("A) before adding items");
    printSelectedItem(listView);

    listView.getItems().add("first");

    listView.getSelectionModel().select(0);

    System.out.println("B) added an item and selected");
    printSelectedItem(listView);

    listView.getItems().remove(0);

    System.out.println("C) removed the item");
    printSelectedItem(listView);

}

public void printSelectedItem(ListView listView) {
    ObservableList<Integer> list = listView.getSelectionModel().getSelectedIndices();
    System.out.println("The selectedIndices property contains: " + list.size() + " element(s):");
    for(int i=0; i<list.size(); i++) { System.out.println(i + ")" + list.get(i)); }
}

} 
```

这是我的输出：

```
run:
A) before adding items
The selectedIndices property contains: 0 element(s):
B) added an item and selected
The selectedIndices property contains: 1 element(s):
0)0
C) removed the item
The selectedIndices property contains: 1 element(s):
0)-1 
```

案例“C”显示“意外”行为。也许记录在某处？

环境信息：javafx.runtime.version：2.2.3-b05 java.runtime.version：1.6.0_29-b11 os.name：Windows 7 os.version：6.1

# html - CMS 现有 HTML5/CSS3 网站

> ID：13458053
> 
> 赞同：0
> 
> 时间：2012-11-19T16:28:29.067
> 
> 标签：html, css, content-management-system

我构建了跨浏览器兼容且响应迅速的 HTML5/CSS3 网站。我的客户希望能够编辑文本区域并将新故事上传到新闻部分并将图像上传到照片库。在让我的客户选择自己更新网站的同时继续构建（干净、对 SEO 友好）网站的最佳选择是什么？

我研究过 joomla 和 drupal 之类的 CMS，它们似乎严重依赖模板，这让我感到害怕。是否只是将我的 php-includes 和 css 文件粘贴到构建我独特的“模板”的系统中？其他 CMS 选项；cushycms 和 pagelime 似乎更符合我正在寻找的内容，但似乎只编辑现有文本？

简而言之; 我想保留我现有的设计并简单地使它们可编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:53:05.883

很抱歉公然的自我推销，但我觉得我必须插话。

我是[Webpop](http://www.webpop.com)的 CEO，这是一个完全托管的 CMS，它考虑到了前端开发人员和网页设计师。

我们构建 Webpop 正是为了解决这个问题，并且在使用 Webpop 构建站点时，确保您可以保持 HTML/CSS 和 javascript 与静态模型中显示的完全相同。

我们有两个完全独立的 UI，一个是为您准备的，我们已尽最大努力使其尽可能简单，让您直接使用 HTML、CSS 和 javascript。对于您的客户来说，这只是一个简单的现场编辑器，他们可以在其中更新网站的动态内容部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:42:07.183

好吧，基本上我总是使用wordpress，学习起来并不难......你将你的网站分割成你需要的区域......当你将页面添加到你的网站时，菜单会自动生成。Wordpress 也有很多易于实现的插件。Wordpress 不仅是一个博客，各大网站都使用它来管理他们的网站。[在Wordpress.org](http://wordpress.org/)上查看它，了解如何分割您的网站，有一个非常好的指南，在这里可以找到：[Theming and CSS](http://codex.wordpress.org/Blog_Design_and_Layout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:31:13.863

我会选择 MVC 框架。[您可以在此处](http://www.phpframeworks.com/)找到有关所有不同框架的所有信息。

这样做的好处是您可以将 HTML5/CSS3 保留为“视图”，同时将业务逻辑移动到 MVC 框架的控制器和模型。我个人使用的是 CakePHP 和 CodeIgniter。后者非常易于使用，并且设置起来也非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:31:31.250

我发现 Get Simple CMS [http://get-simple.info/](http://get-simple.info/)非常适合这个。它基于 PHP，但不需要数据库。它带有一些模板，但从 CSS 和 HTML 编辑或创建自己的模板并不太难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T16:34:26.470

我一直很喜欢 Perch 正是因为这种东西。可编辑的字段，真正简单的东西。然而，我最终还是迁移到了 Wordpress，仅仅是因为我的客户开始要求更多的博客生活功能。如果您构建的网站要保持简单，那么 Perch 非常棒。

[http://grabaperch.com/](http://grabaperch.com/)

# ios - AVAssetImageGenerator 在尝试 generateCGImagesAsynchronouslyForTimes 时给出错误

> ID：13458065
> 
> 赞同：2
> 
> 时间：2012-11-19T16:29:03.767
> 
> 标签：ios, image-generation, avasset

我正在尝试在按钮中显示电影缩略图，供用户在上传之前查看。我正在使用 AVAssetImageGenerator。这里的代码：

```
AVURLAsset *asset=[[AVURLAsset alloc] initWithURL:[NSURL URLWithString:moviePath] options:nil];
AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
generator.appliesPreferredTrackTransform=TRUE;
CMTime thumbTime = CMTimeMakeWithSeconds(0,30);

AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){

    switch (result) {
        case AVAssetImageGeneratorSucceeded:
            NSLog(@"Image generator succeeded!");
            [imageButton setImage:[UIImage imageWithCGImage:im] forState:UIControlStateNormal];
            break;

        case AVAssetImageGeneratorCancelled:
            NSLog(@"Image generator cancelled!");
            NSLog(@"couldn't generate thumbnail, error:%@", error);
            [imageButton setTitle:@"Video attached" forState:UIControlStateNormal];
            break;

        case AVAssetImageGeneratorFailed:
            NSLog(@"Image generator failed!");
            NSLog(@"couldn't generate thumbnail, error:%@", error);
            [imageButton setTitle:@"Video attached" forState:UIControlStateNormal];
            break;

        default:
            break;
    }
};

CGSize maxSize = CGSizeMake(320, 180);
generator.maximumSize = maxSize;
[generator generateCGImagesAsynchronouslyForTimes:[NSArray arrayWithObject:[NSValue valueWithCMTime:thumbTime]] completionHandler:handler]; 
```

上面的代码失败并出现此错误：

`couldn't generate thumbnail, error:Error Domain=NSURLErrorDomain Code=-1 "unknown error" UserInfo=0x1f90a080 {NSUnderlyingError=0x1f979aa0 "The operation couldn’t be completed. (OSStatus error -12935.)", NSLocalizedDescription=unknown error}`

imagePickeController 中的moviePath 变量是：/private/var/mobile/Applications/89FD1D5F-B49C-4E6B-B1AA-7F1CF1F3FE83/tmp//trim.eaEKqI.MOV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:05:15.500

确保在生成 URL 时使用 [NSURL fileURLWithPath:@"yourpath"] 而不是 [NSURL URLWithString:]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T15:02:12.123

这是一个旧链接，但如果有人仍在寻找答案，需要注意的重要一点是，您应该只在资产变得可播放后生成图像。

这里有一些代码可以理解这个概念：

```
AVAsset *asset = [AVURLAsset URLAssetWithURL:url                                                    options:@{
                                                              AVURLAssetReferenceRestrictionsKey: @(AVAssetReferenceRestrictionForbidNone),
                                                       AVURLAssetHTTPCookiesKey: cookies,
                                                         AVURLAssetAllowsCellularAccessKey: @false
                                                       }];
        NSArray *requestedKeys = [NSArray arrayWithObjects:
                                  @"playable", nil];
        [asset loadValuesAsynchronouslyForKeys:requestedKeys completionHandler: ^{
                AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc]initWithAsset:asset];
                [imageGenerator setRequestedTimeToleranceBefore:kCMTimePositiveInfinity];
                [imageGenerator setRequestedTimeToleranceAfter:kCMTimePositiveInfinity];
                imageGenerator.appliesPreferredTrackTransform = YES;
                CMTime thumbTime = CMTimeMakeWithSeconds(0,1);

                NSError *error = NULL;
                CGImageRef imageRef = [imageGenerator copyCGImageAtTime:thumbTime actualTime:NULL error:&error];
                UIImage *img = [UIImage imageWithCGImage:imageRef];
                if (img) {

                    NSLog(@"Loaded image from %@", [url absoluteString]);
                }
                else {
                    NSLog(@"Could not load image from %@, error:%@", [url absoluteString], error);
                }
                //have to manually release because ARC does not release imageref
                CGImageRelease(imageRef);
             }];
    } 
```

# windows - 创建本地组帐户时如何指定帐户 SID？

> ID：13458067
> 
> 赞同：0
> 
> 时间：2012-11-19T16:29:08.963
> 
> 标签：windows, security, visual-c++

创建新的本地组帐户时是否可以指定 SID？

我已经通过指定信息级别 1 (LOCALGROUP_INFO_1) 使用[NetLocalGroupAdd](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370434%28v=vs.85%29.aspx)函数成功创建了一个新组，但他每次都使用不同的 SID 创建组。我预料到的这种行为。

我想做的是在创建组帐户时指定 SID。无法使用级别 3 的 NetLocalGroupAdd 。所以我转而查看[NetGroupAdd](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370424%28v=vs.85%29.aspx)。但是这个函数创建了一个全局组而不是一个本地组。

有没有办法在创建组期间执行此操作，或者在创建组后使用所需的 SID 更新 SID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:22:39.000

你不能那样做。在您的特定机器上生成的任何 SID 都会颁发给该机器的本地安全机构。（好的，或者如果您在谈论域控制器，则为域安全机构）这意味着，它将始终具有
`S-1-5-21<the machine LSA SID>-<random local identifier of the user/group>`.

This is because the structure of a SID is hierarchical. For instance, all SIDs under `NT AUTHORITY` have the prefix `S-1-5`, because that is NT AUTHORITY's SID. (e.g. `NT AUTHORITY\SYSTEM` is `S-1-5-18`) Your machine's LSA isn't allowed to issue a SID that doesn't belong under its authority, which is going to be the `S-1-5-21<random number generated when Windows is installed>` SID.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:58:29.607

不，操作系统提供 SID。其他标识符（如 GUID）也是如此。一般来说。

在少数情况下，调用者可以提供这些 ID，例如在迁移期间您可以编写 SIDHistory，或者如果您在 AD 中对 GUID 使用许可添加模式。但一般来说，除非你*真的*知道自己在做什么，否则这些事情是不受欢迎的。

有了更多关于你为什么想要这个的数据，我们也许可以建议另一条路径......

# wpf - 如何在文件中获取 WPF 应用程序的所有 AutomationID？

> ID：13458068
> 
> 赞同：2
> 
> 时间：2012-11-19T16:29:17.573
> 
> 标签：wpf, export, objectid, uia

在 WPF 应用程序的自动化中（使用 UI 自动化；VSTS 2010），我们手动将所有自动化 ID 添加到资源文件中，然后一一访问它。考虑到应用程序可以随时扩展，手动添加这些 ID 可能会变得乏味。

那么，是否有任何可用的工具可以为我们创建这个？即以分层格式获取所有 id 并将其存储在一个文件（xml 或 csv）中，然后我们可以在需要时对其进行解析。

我希望有一个像 UISpy 这样的工具，它不仅可以监视所有元素，还可以导出相同的元素。

有这样的工具吗？或者有什么替代方法吗？

非常感谢任何有价值的反馈。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-23T16:06:14.293

我喜欢这样：

```
public static class AutomationIds
{
    public static readonly string MyDataGridId= Create();

    private static string Create([CallerMemberName] string name = null)
    {
        return name;
    }
} 
```

* * *

```
<DataGrid AutomationProperties.AutomationId="{x:Static local:AutomationIds.MyDataGridId}"
          ... /> 
```

然后在测试中

```
var dataGrid = window.Get<ListView>(AutomationIds.MyDataGridId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:33:21.537

直接在 XAML 中分配自动化 ID，然后解析 XAML 文件，因为它们毕竟是 XML...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T03:30:38.257

让我们看看......首先，我认为您的数据不是分层的 - 只是因为可以动态地将控件分配为另一个控件的子级。

如果我们将问题更改为一个子集：“我们如何才能在时间 t 获得控件的分层视图？” 那么我们可以用 MS UIA 来回答这个问题，比如说，使用一个简单的 RawViewWalker（只需在 walker 上进行简单的广度优先搜索，从主窗口开始就可以了 - 当然，在应用程序运行时，UIA 可以访问和查询它）。

但是这个子集不能满足您最初的问题，因为您可能会看到整个 ui 集合的一部分（因为有些会在时间 t 被隐藏/尚未激活）。

因此，使用基于 UIA 的工具（例如 uispy）变得非常困难，因为您必须将应用程序视图设置为不同的状态才能在不同时间 t1、t2 访问应用程序中的所有控件...

我建议同时解析您的所有 xml，并构建应用程序“静态”控制图的完整树，我相信这将最接近您的要求。

鉴于这是一个老问题，我怀疑它不再重要，但只是想在这里做出区分。

# javascript - 混合 expressjs（api 服务器）和 towerjs（后端/前端）

> ID：13458071
> 
> 赞同：1
> 
> 时间：2012-11-19T16:29:24.927
> 
> 标签：javascript, node.js, connect, express, towerjs

我已经在 expressjs 上构建了我的 api 服务器，它工作得很好，但是我测试了不同的框架来开发前端/后端，因为与 mvc 一起工作似乎更一致。我的第一个选择之一是它的 towerjs。

想要完成什么？只想通过连接 vhost 中间件运行我的所有服务器（或者我认为它相同的表示 vhost）。因为我不想用很多端口运行很多服务器，所以使用 apache 我只是重定向到一个端口（通过 apache 代理）。如果我以这种方式运行仅快递应用程序，它就可以工作。

或者有一种方法只使用 towerjs 和 connect vhost 中间件（或者不建议使用一个威胁来运行多个服务器？），并且似乎使用 towerjs 也可以构建一个 api 服务器。我刚读了这个[RailwayJS vs TowerJS](https://stackoverflow.com/questions/9897017/railwayjs-vs-towerjs)。

问候

# ruby-on-rails - 当我尝试加载 Google API 时，heroku 上的 token_error

> ID：13458074
> 
> 赞同：1
> 
> 时间：2012-11-19T16:29:29.540
> 
> 标签：ruby-on-rails, heroku, google-api

我正在使用 winston/google_visualr 创建漂亮的图表来可视化我的 rails 应用程序中的统计数据。
它在我的语言环境系统上运行良好，但如果我将它推送到 heroku，我会得到类似 token_error 的东西。结果是，它只显示 Heroku 页面

> 我们很抱歉，但有些不对劲。

我的头部`application.html.erb`看起来像这样

```
<head>
    <title><%= full_title(yield(:title)) %></title>
    <script src='http://www.google.com/jsapi'></script>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
</head> 
```

这是heroku日志：

```
ActionView::Template::Error (Unexpected token name, expected punc (line: 13588, col: 3, pos: 384041)
    at expect (/tmp/execjs20121119-2-qx6eku.js:977:40)
Error
    at js_error (/tmp/execjs20121119-2-qx6eku.js:505:15)
    at new JS_Parse_Error (/tmp/execjs20121119-2-qx6eku.js:497:22)
    at token_error (/tmp/execjs20121119-2-qx6eku.js:961:17)
    at expect_token (/tmp/execjs20121119-2-qx6eku.js:974:17)
    at object_ (/tmp/execjs20121119-2-qx6eku.js:1365:56)
    at /tmp/execjs20121119-2-qx6eku.js:1326:51
Completed 500 Internal Server Error in 4980ms
    at croak (/tmp/execjs20121119-2-qx6eku.js:954:17)
    at maybe_unary (/tmp/execjs20121119-2-qx6eku.js:1425:27)
    at expr_ops (/tmp/execjs20121119-2-qx6eku.js:1452:32)
   (in /app/app/assets/javascripts/application.js)):
    6:    <%= stylesheet_link_tag    "application", :media => "all" %>
    7:    <%= javascript_include_tag "application" %>
    8:    <%= csrf_meta_tags %>
    9:    <%= render 'layouts/shim' %>
    4:    <title><%= full_title(yield(:title)) %></title>
    5:    <script src='http://www.google.com/jsapi'></script>
  app/views/layouts/application.html.erb:7:in `_app_views_layouts_application_html_erb__1437494530852335371_34567960' 
```

看起来外部脚本引用可能是原因。你知道如何实现这个吗？[heroku 上 googlevisualr rails 扩展](http://googlevisualr.heroku.com/)
的作者的演示实现工作正常。我需要考虑 heroku 中的任何配置设置吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:03:01.743

我尝试了很多次，但我发现了问题所在。如果包含的 JS 之一有语法错误，即缺少分号，则会发生错误。在我的 Gemfile 中，我没有将版本号添加到我的 gem '...'。我在我的开发环境中使用版本 '0.6.21' 中的 gem 'bootstrap-datepicker-rails'。如果您推送到 heroku，您的所有 gem 将再次安装，并使用最新的可用版本。由于版本 0.6.28 是安装在 heroku 上的实际版本。它可能有语法错误，并导致上述问题。所以，它与线路无关

```
<script src='http://www.google.com/jsapi'></script> 
```

我刚刚将我的 gemfile 中的行更正为以下内容，然后一切正常：

```
gem 'bootstrap-datepicker-rails', '0.6.21' 
```

# java - 如何在 Java 中使用 JSlider 设置标签匹配主要刻度

> ID：13458076
> 
> 赞同：1
> 
> 时间：2012-11-19T16:29:33.813
> 
> 标签：java, swing

当我更改 JSlider 上的主要刻度时，标签（如果绘制）不会改变。

我有这种情况 ![第一种情况](../Images/b715507c0bf081b44bc0d9273183b708.png)

我改变了主要的刻度间距

```
jSlider.setMajorTickSpacing(20); 
```

我得到这个

![在此处输入图像描述](../Images/8d9bf4c5a75680b958b067e3f574c7f6.png)

如何获得这种情况？ ![在此处输入图像描述](../Images/653ca43aa9ce150635d24fdd1e98ac08.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T16:29:33.813

您也必须更改标签。尝试这个

```
jSlider.setMajorTickSpacing(20);       
jSlider.setLabelTable(jSlider.createStandardLabels(20)); 
```

# c# - 使用 Aspose 将 Excel、PowerPoint、PDF 和 Word 转换为 .NET 中的图像

> ID：13458083
> 
> 赞同：4
> 
> 时间：2012-11-19T16:29:54.780
> 
> 标签：c#, .net, vb.net, aspose

所以我正在寻找一种将 Excel、PowerPoint、PDF 和 Word 转换为图像的方法。我想知道是否有人有使用 Aspose 套件的经验，并且知道是否所有这些都可以使用 Aspose.PDF 套件完成，或者我是否还需要获取 Aspose.slides 和 Aspose.word？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:45:31.180

您将需要 Aspose.Slides、Aspose.Words、Aspose.Cells 和 Aspose.Pdf，或者您可以使用[Web Api](http://saaspose.com/docs/dashboard.action)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T08:46:01.480

无需使用任何第三方组件即可完成从办公文档到图像的转换。例如，下面的代码会将特定范围从 Excel 工作表转换为图像。

重要提示：不要忘记使用 [STAThread] 属性标记方法。

用途：

```
 using xls = Microsoft.Office.Interop.Excel;
    using System.IO;
    using System.Windows.Forms; 
```

转换代码：

```
 [STAThread]
    static void Main(string[] args)
    {
        string fileNameToProcess = @"D:\Book2.xlsx";

        //Start Excel and create a new document.
        xls.Application oExcel = new xls.Application();
        xls.Workbook wb = null;
        try
        {
            wb = oExcel.Workbooks.Open(
                fileNameToProcess.ToString(), false, false, Type.Missing, "", "", true, xls.XlPlatform.xlWindows, "", false, false, 0, false, true, 0);
            //wb.RefreshAll();

            xls.Sheets sheets = wb.Worksheets as xls.Sheets;
            xls.Worksheet sheet = sheets[1];

            //Following is used to find range with data
            string startRange = "A1";
            string endRange = "P25";
            xls.Range range = sheet.get_Range(startRange, endRange);
            range.CopyPicture(xls.XlPictureAppearance.xlScreen, xls.XlCopyPictureFormat.xlBitmap);

            System.Drawing.Image imgRange = GetImageFromClipboard();

            imgRange.Save(@"d:\ExcelSheetImage.bmp", System.Drawing.Imaging.ImageFormat.Bmp);

            wb.Save();
            Console.Write("Specified range converted to image successfully. Press Enter to continue.");
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            //throw;
        }
        finally 
        {
            wb.Close();
            oExcel.Quit();
            oExcel = null;
        }

        Console.ReadLine();
    }

    public static System.Drawing.Image GetImageFromClipboard()
    {
        System.Drawing.Image returnImage = null;

        // This doesn't work
        //if (Clipboard.ContainsImage())
        //{
        //    returnImage = Clipboard.GetImage();
        //}
        //return returnImage;

        // This works
        System.Windows.Forms.IDataObject d = Clipboard.GetDataObject();
        if (d.GetDataPresent(DataFormats.Bitmap))
        {
            returnImage = Clipboard.GetImage();
        }

        return returnImage;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:04:22.637

我的名字是 Nayyer，我在 Aspose 担任开发人员布道师。

*   Aspose.Words 提供了创建/操作 MS word 文档的功能，它还提供了将 word 文档转换为图像格式的功能。您可以查看以下链接以获取有关 [将 MS Word 文档转换为图像](http://www.aspose.com/docs/display/wordsnet/How+to++Convert+a+Document+to+PDF)的更多详细信息（只需从 SaveFormat 枚举中选择 Jpeg、Png、Bmp）。
*   同样，您可以使用 Aspose.Cells 将 Excel 工作表转换为图像格式。[将工作表转换为图像](http://www.aspose.com/docs/display/cellsnet/Converting+Worksheet+to+Image)
*   Aspose.Slides 可用于将 PowerPoint 演示文稿转换为图像格式。[创建幻灯片的缩略图](http://www.aspose.com/docs/display/slidesnet/Creating+Slide+Thumbnail+Image)。
*   Aspose.Pdf 支持将 PDF 页面转换为图像格式的功能。有关详细信息，请访问[将所有 PDF 页面转换为 JPEG 格式](http://www.aspose.com/docs/display/pdfnet/Convert+all+PDF+pages+to+JPEG+Images)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-31T12:47:54.850

我知道现在是 2019 年，但如果有人仍然想知道，你可以使用 Aspose.Words 来做到这一点。

SaveFormat 枚举中的以下值（以及更多值）可用：

```
 Tiff = 100,
    //
    // Summary:
    //     Renders a page of the document and saves it as a PNG file.
    Png = 101,
    //
    // Summary:
    //     Renders a page of the document and saves it as a BMP file.
    Bmp = 102,
    //
    // Summary:
    //     Renders a page of the document and saves it as a JPEG file.
    Jpeg = 104,
    //
    // Summary:
    //     Renders a page of the document and saves it as a GIF file.
    Gif = 105 
```

你会像这样使用它们：

```
 var fileContents = asposeDocument.GenerateDocument(Aspose.Words.SaveFormat.Png); 
```

# login - 文章 Joomla 2.5 上的模块登录

> ID：13458084
> 
> 赞同：0
> 
> 时间：2012-11-19T16:30:00.483
> 
> 标签：login, joomla, module

我在 joomla 上创建了一篇文章，我想为所有人（公共）显示一部分，而另一部分仅为注册用户显示。现在我创建了一个集成在文章页面上的模块，但我想显示登录。或者，我可以创建 2 个页面：一个重定向到我注册文章的登录页面。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:37:19.340

对于登录模块，您可以做的是，通过键入一个来为其定义一个自定义位置，而不是选择一个预定义的位置，然后使用以下代码嵌入它：

```
{loadposition xxx}   //xxx being the position you defined 
```

[或者，您可以使用 JED 上内容限制](http://extensions.joomla.org/extensions/access-a-security/site-access/content-restriction)类别的扩展来限制内容。

就个人而言，我认为[Hider](http://extensions.joomla.org/extensions/access-a-security/site-access/content-restriction/6004)可能是您的最佳选择，因为它允许您定义特定的组和特定的内容。

* * *

或者，您可以这样做。首先，下载并安装[Sourcerer](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/5051)，它允许您在文章中使用任何代码。然后在您的文章中使用以下代码并确保使用`{source}`标签：

```
{source}
    $user = JFactory::getUser();
    if ($user->guest) {
        echo "some content";
        echo "Login to read more";
        echo "{loadposition xxx}";
    }
    else {
        echo "all content";
    }
{/source} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:14:01.970

或者只是使用内置的显示未经授权的功能，向无权查看文章的用户显示介绍而不是正文。您可以全局设置或逐条设置或使用菜单链接。

# junit - DbUnit：如何断言生成的 ID

> ID：13458095
> 
> 赞同：1
> 
> 时间：2012-11-19T16:30:42.157
> 
> 标签：junit, dbunit, database-testing

我需要一个想法/提示如何使用 DbUnit 来断言由数据库生成的 ID（例如 MySQL 的自动增量列）。我有一个非常简单的案例，但目前我发现有问题：

2个表：`main`和`related`。`main.id`列是自动增量。相关表有一个外键：`related.main_id`-> `main.id`。在我的测试用例中，我的应用程序确实将多个条目插入到两个表中，因此数据集看起来类似于：

```
<dataset>
    <main id="???" comment="ABC" />
    <main id="???" comment="DEF" />

    <related id="..." main_id="???" comment="#1 related to ABC" />
    <related id="..." main_id="???" comment="#2 related to ABC" />
    <related id="..." main_id="???" comment="#3 related to DEF" />
    <related id="..." main_id="???" comment="#4 related to DEF" />
</dataset> 
```

作为顺序，如何执行插入尚不清楚 - 我不能在测试之前简单地清除/截断表并提前使用预定义的 ID（例如，“ABC”条目将首先出现，因此它获得 ID `1`，“DEF”作为第二个- 得到`2`）。如果我以这种方式编写测试 - 这将是错误的 - 运气好有时它可能会起作用，而在其他情况下则不会。

有没有一种干净的方法来测试这种情况？因为我仍然想断言条目是在 DB 中正确创建和链接的，不仅它们存在（如果我只是忽略自动增量列）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-16T10:57:52.083

根据问题的评论，我正在回答我自己的问题，所以这可能会帮助其他人，寻找类似的解决方案。

毕竟我们确实跳过了断言生成的 ID，因为它们对我们来说并不是很有趣。我们实际上想要检查的是`main`和`related`表之间的条目是否“正确链接”。为了实现这一点，在我们的单元测试中，我们确实使用查询创建了数据集，连接了两个表：

```
SELECT main.comment, related.comment AS related_comment 
FROM main, related 
WHERE main.id = related.main_id 
```

然后我们断言，此查询生成的数据集与静态定义的数据集匹配：

```
<dataset>
     <result comment="ABC" related_comment="#1 related to ABC" />
     <result comment="ABC" related_comment="#2 related to ABC" />
     <result comment="DEF" related_comment="#3 related to DEF" />
     <result comment="DEF" related_comment="#4 related to DEF" />
</dataset> 
```

当数据集匹配时，我们可以假设条目“正确链接”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:45:07.573

也许您让 dbunit自动对表格`main`进行排序。由于绝对行数是已知的，这应该可以解决您的问题。`id``related``id`

DBUnit 允许使用 org.dbunit.dataset.SortedTable.SortedTable 进行排序，这需要一个表和应该排序的列列表。[SortedTable 的 JavaDoc](http://www.dbunit.org/apidocs/org/dbunit/dataset/SortedTable.html)

# c# - 从实体框架对象继承

> ID：13458096
> 
> 赞同：0
> 
> 时间：2012-11-19T16:30:45.947
> 
> 标签：c#, inheritance, explicit-conversion

我正在尝试从数据库中设置检索。我有一个 EF（实体框架）对象`emUser`和一个`User`从 emUser 继承的普通类，但添加了一些额外的功能。

```
public class User : emUser
{
    #region Properties
    public string Username
    {
        get { return Email; }
    }
    public string FullName
    {
        get { return FirstName + " " + LastName; }
    }
    #endregion
}

public partial class emUser : EntityObject
{
    [code ...]
} 
```

出于某种原因，尽管 User 从 emUser 继承，但我无法显式转换它们。我正在使用的代码：

```
List<User> returnUsers = new List<User>();
var users =
    (from u in edm.UserSet.OfType<emUser>()
    select u);

    if (users != null)
    {
        foreach (emUser user in users)
        {
            User newUser = (User)user;
            returnUsers.Add(newUser);
        }
    }
return returnUsers; 
```

我可以`User`为 emUser 制作一个包装器，但是每次对 emUser 进行更改时，我都必须更改它。我想用来`User`区分技术服务层和领域层中使用的类。

我收到这样的错误消息：

```
{System.InvalidCastException: Unable to cast object of type 'Services.emUser' to type 'Users.User'. at Services.DatabaseController.GetUsers() in [file path]:line 412} 
```

为什么我不能将 emUser 转换为 User？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:50:33.597

您的问题是@millimoose 所说的：EF 只能返回`emUser`对象，因为它不知道`User`并且 an`emUser`可能不是 a `User`。

您可以从这里获得三种可能的解决方案：

1.  设置`User`为继承自`EntityObject`，然后`emUser`继承自`User`。这将是一个痛苦的实现，并没有给你任何有用的优势。
2.  创建要传递的数据传输对象，您基本上将所有属性从 a 复制`emUser`到 a 中`User`（通常通过`User`的构造函数）。这会给你想要的分离，但会很痛苦。
3.  将额外的属性添加`partial`到`emUser`. 这是我强烈推荐的，因为它简单明了。

这是一个例子：

```
// In a manually generated file in the same project
public partial class emUser
{
    #region Properties
    public string Username
    {
        get { return Email; }
    }
    public string FullName
    {
        get { return FirstName + " " + LastName; }
    }
    #endregion
}

// In the automatically generated file
public partial class emUser : EntityObject
{
    [code ...]
} 
```

用法：

```
emUser foo = GetUser();
Console.WriteLine("FirstName: " + emUser.FirstName);
Console.WriteLine("FullName: " + emUser.FullName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:07:45.260

除非添加转换运算符，否则不能将基类转换为派生类。

```
public class User : emUser
{
    #region Properties
    public string Username
    {
        get { return Email; }
    }
    public string FullName
    {
        get { return FirstName + " " + LastName; }
    }
    #endregion

    public static explicit operator User (emUser user) 
    {
        User result = new User();
        // set properties
        return result;
    }
} 
```

# cordova - 如何将 phonegap FileTransfer 参数与 .asmx Web 服务一起使用

> ID：13458099
> 
> 赞同：0
> 
> 时间：2012-11-19T16:30:55.643
> 
> 标签：cordova, parameters, asmx, file-transfer

我正在将图像上传到 asmx Web 服务。文件上传工作正常，但我想知道如何访问我在 javascript 中为文件传输设置的参数。

我想将图像编号传递给 asmx SaveImage web 方法。然后在文件成功保存后，我想将图像编号返回给 Javascript。

//Javascript调用Web服务函数uploadPhoto(imageURI, imageNumber) {

```
 var options = new FileUploadOptions(),
        params = {},
        ft = new FileTransfer(),
        percentLoaded = 0.0,
        progressBar = $(".image" + imageNumber + " > .meter > span");

    options.fileKey = "file";
    options.fileName = imageURI.substr(imageURI.lastIndexOf('/') + 1);
    options.mimeType = "image/jpeg";

    params.value1 = "test";
    params.value2 = "param";

    options.params = params;

    //get progress of fileTransfer for progress bar
    ft.onprogress = function (progressEvent) {
       if (progressEvent.lengthComputable) {
           percentLoaded = Math.round(100 * (progressEvent.loaded / progressEvent.total));
           progressBar.width(percentLoaded + "%");
       } else {
           //loadingStatus.increment();
       }
   };
   ft.upload(imageURI, "http://mysite.com/test/uploadPhotos.asmx/SaveImage", win, fail, options); 
```

}

//.asmx 网络服务

```
[WebMethod]
public string SaveImage()
{
    string rootPathRemote = WebConfigurationManager.AppSettings["UploadedFilesPath"].TrimEnd('/', '\\') + "/";
    string rootPhysicalPathRemote = rootPathRemote + "\\";
    int fileCount = 0;

    fileCount = HttpContext.Current.Request.Files.Count;
    for (int i = 0; i < fileCount; i++)
    {
        HttpPostedFile file = HttpContext.Current.Request.Files[i];
        string fileName = HttpContext.Current.Request.Files[i].FileName;
        if (!fileName.EndsWith(".jpg"))
        {
            fileName += ".jpg";
        }
        string sourceFilePath = Path.Combine(rootPhysicalPathRemote, fileName);
        file.SaveAs(sourceFilePath);
    }
    return "test";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:18:49.807

要获取传递给 asmx web 方法的参数，您可以使用 Request.Params...

我在我的代码中添加了以下几行

javascript //添加一个参数，key为imageNum

```
params.imageNum = imageNumber; 
```

添加到 .asmx [Web 方法]

```
string allParams = "";
NameValueCollection parameters = HttpContext.Current.Request.Params;
string[] imageNum = parameters.GetValues("imageNum");
for (int j = 0; j < imageNum.Length; j++)
{
    allParams += imageNum[j].ToString();
} 
```

# python - mod_wsgi 如何处理请求（在守护进程模式下）？

> ID：13458113
> 
> 赞同：0
> 
> 时间：2012-11-19T16:31:34.793
> 
> 标签：python, mod-wsgi

我正在构建一个 Bottle wsgi 应用程序并试图了解 mod_wsgi 如何处理对 wsgi 脚本文件的每个 http 请求。

在脚本完成（然后释放它）之前，每个请求是否使用一个单独的进程，或者一个进程是否可以使用线程处理多个请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:03:17.193

任何一个都是可能的。请参阅有关此问题的[mod_wsgi 文档](http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading)。我相信默认是使用 15 个线程和 1 个进程。WSGIDaemonProcess配置指令允许您在 Apache 中控制它[。](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess)

# c++ - 自动测试 MFC 类

> ID：13458115
> 
> 赞同：0
> 
> 时间：2012-11-19T16:31:39.703
> 
> 标签：c++, testing, mfc

我在这里有一个 MFC 类，我正在尝试为它创建一个自动化测试。我以前从未做过 MFC，这给我带来了额外的便利，这太棒了。无论如何，我只是想知道有什么方法可以做到这一点而不必过多担心 GUI。

它会是一个简单的gui。只有一个开始按钮和一个停止按钮。当 start 被触发时，测试将向正在测试的类发送大量数据包（不是真正的数据包，但为了简单起见，我们称之为数据包）。这个类将处理数据包。当按下停止按钮时，测试将结束。

一个人说让 GUI 不可见，然后只使用计时器发送开始事件，然后运行测试，然后使用计时器发送停止事件。这可行吗？

人们是否尝试过其他方法或知道其他方法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:15:55.700

You can first do unit testing ([cppunit](http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page)) to ensure that the nuts and bolts work. How about [Quick Test Profession as it was use to be called](http://en.wikipedia.org/wiki/HP_Quality_Center). Alternative look into this [list]. One of these may be cheaper[3](http://en.wikipedia.org/wiki/List_of_GUI_testing_tools)

# iphone - 识别前一个 UIView 的名称

> ID：13458117
> 
> 赞同：0
> 
> 时间：2012-11-19T16:31:45.307
> 
> 标签：iphone, ios, xcode, uiview, viewwillappear

我想知道是否可以找到调用以下函数的视图

```
- (void)viewWillAppear:(BOOL)animated {
  //find here the name of the calling view
} 
```

有没有办法找到哪个视图称为新视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:36:40.650

在viewWillAppear中直接没有。如果它被推送到 UINavigationController 上，则可以获取 viewControllers 并获取上一个。

```
if (self.navigationController){
NSArray* viewControllers = self.navigationControllers.viewControllers;
UIViewController* lastViewController = [viewControllers objectAtIndex:([viewControllers count] - 1)];
NSLog(@"%@ is my last ViewController before navigationg to this ViewController", lastViewController);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:40:34.003

好吧，如果使用导航控制器，您可以获得由以下方式推送的 viewControllers 数组：

```
 NSArray *array =  self.navigationController.viewControllers; 
```

但这将为您提供已被推送的视图控制器，如果从视图返回，即从导航堆栈中弹出，它将失败，因为在这两种情况下，您

```
- (void)viewWillAppear:(BOOL)animated {
  //find here the name of the calling view
  } 
```

将被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:46:23.463

您可以使用`presentingViewController`它，但问题是这将返回视图控制器的内存地址而不是指针的名称。

一种解决方案是将标签分配给呈现视图控制器的视图属性，然后在您的第二个控制器中请求该标签：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSLog(@"%i",[[[self presentingViewController] view] tag]);
} 
```

在您的第一个视图控制器中：

```
[[self view] setTag:(someNSInteger)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:51:09.627

不用说，“视图”不会调用它，而是当您的视图出现时 iOS 会调用它。不幸的是，这很复杂，因为您可能会`viewWillAppear`因为其他一些视图控制器呈现该视图控制器的视图而得到这个，或者当该视图呈现的视图控制器被关闭或弹出时您可能会得到这个（取决于模态与推送）。

我们可能可以概述解决这个问题的各种复杂和复杂的方法，但我们可能应该先退后一步，问你为什么需要这样做。你真正想要达到什么目的？如果你只是想协调视图控制器之间的交互，有更好的方法来做到这一点（例如委托、设置视图控制器属性等）。

* * *

**更新：**

如果您想弄清楚数据是否发生了变化，而不是依赖于一些“我从哪里来”的逻辑，我个人倾向于某种机制，这些数据修改控制器或进程负责通知您的这个事实的视图控制器。

最简单的方法是使用[委托设计模式](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18)，您的子视图控制器将具有一个`delegate`属性，该属性是指向需要了解数据更改的控制器的指针，子控制器将简单地调用该方法当数据发生变化时。在稍微复杂一点的场景中，您可能会将这种委托模式与正式的委托协议结合起来（这样子视图控制器就不需要知道父控制器的任何信息，除了它符合特定协议的事实之外），但是有些可能会说，仅在两个特定且众所周知的视图控制器之间进行通信时不需要这样做。请参阅使用[委派与其他控制器通信](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html#//apple_ref/doc/uid/TP40007457-CH8-SW9)*查看控制器编程指南。*

在复杂的情况下（例如，数据可能在多个地方发生变化，甚至是异步的，例如在通过 Web 服务更新期间），我将使用[通知设计模式](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW7)，其中视图控制器将自己添加为当数据更新时，通知中心将发送[`NSNotificationCenter`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)特定通知，通知中心将被告知发布该特定通知，而观察者，您的视图控制器，将收到该通知。

# asp.net - Asp.Net 4.0 gridview 显示显示属性值

> ID：13458127
> 
> 赞同：1
> 
> 时间：2012-11-19T16:32:14.010
> 
> 标签：asp.net

我一直在使用 AutoGenerateColumns = true 在 gridview 中显示某些类的列表。

该类有近 70 多个属性。

现在我需要更改gridview的列标题。例如，类具有名为“ProductName”的属性，但在网格视图中我只需要显示“名称”。

一种方法是删除 AutoGenerateColumns 并将所有内容都表示为 boundfield。但它太多的手动编码......而不是数据输入！

我正在考虑使用类属性的 Display 属性显示为 gridview 中的标题列。

```
[Display(Name="Product")] public string ProdcutName { get; set;} 
```

有没有办法在 Gridview 中使用 Display 属性？

还建议其他东西...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:38:28.887

一种选择是使用 RowDataBound 事件，您可以在其中操作标题文本的值。

如果您知道列的索引将始终相同，则可以执行以下简单操作：

```
if (e.Row.RowType == DataControlRowType.Header)
{
  e.Row.Cells[ColIndex].Text = "Product";
} 
```

或者，您可以以声明方式设置它：

```
gView.Columns[ColIndex].HeaderText = "Product"; 
```

# php - PHP parse HTML tags

> ID：13458133
> 
> 赞同：12
> 
> 时间：2012-11-19T16:32:30.573
> 
> 标签：php, html, parsing, tags

> **Possible Duplicate:**
> [How to parse and process HTML with PHP?](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

I'm pretty new to PHP. I have the text of a body tag of some page in a string variable. I'd like to know if it contains some tag ... where the tag name tag1 is given, and if so, take only that tag from the string. How can I do that simply in PHP?

Thanks!!

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T16:46:24.430

You would be looking at something like this:

```
<?php
$content = "";
$doc = new DOMDocument();
$doc->load("example.html");
$items = $doc->getElementsByTagName('tag1');
if(count($items) > 0) //Only if tag1 items are found 
{
    foreach ($items as $tag1)
    {
         // Do something with $tag1->nodeValue and save your modifications
         $content .= $tag1->nodeValue;
    }
}
else
{
     $content = $doc->saveHTML();
}
echo $content;
?> 
```

[DomDocument](http://www.php.net/manual/en/class.domdocument.php) represents an entire HTML or XML document; serves as the root of the document tree. So you will have a valid markup, and by finding elements By Tag Name you won't find comments.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:53:27.443

Another possibility is regex.

```
$matches = null;
$returnValue = preg_match_all('#<li.*?>(.*?)</li>#', 'abc', $matches); 
```

`$matches[0][x]` contains the whole matches such as `<li class="small">list entry</li>`, `$matches[1][x]` containt the inner HTML only such as `list entry`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T16:41:18.083

Fast way:

Look for the index position of tag1 then look for the index position of /tag1\. Then cut the string between those two indexes. Look up strpos and substr on php.net Also this might not work if your string is too long.

```
$pos1 = strpos($bigString, '<tag1>');
$pos2 = strpos($bigString, '</tag1>');
$resultingString = substr($bigString, -$pos1, $pos2); 
```

You might have to add and/or substract some units from $pos1 and $pos2 to get the $resultingString right. (if you don't have comments with tag1 inside of them *sigh*)

The right way:

Look up html parsers

# mips - 动态与静态指令数

> ID：13458135
> 
> 赞同：6
> 
> 时间：2012-11-19T16:32:36.663
> 
> 标签：mips, instructions, machine-instruction

动态和静态指令计数有什么区别？

> 一种。导出一个表达式来计算作为以下参数的函数的用户 CPU 时间：动态指令计数 (N)、每条指令的时钟周期 (CPI) 和时钟频率 (f)
> 
> 湾。解释在问题 3a 中选择“动态”指令计数作为参数而不是“静态”指令计数的原因

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T16:42:03.620

动态指令计数是 CPU 执行特定程序的实际指令数，而静态指令计数是程序具有的指令数。

我们通常使用动态指令计数，例如，您的程序中有一个循环，然后一些指令会被多次执行。此外，在存在分支的情况下，可能根本不执行某些指令。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-10T22:06:51.697

执行时间 (ET) = 每条指令的时钟周期 (CPI) * 指令数 (IC) * 周期持续时间 (CD)。

由于周期频率/速率 (CR) 只是周期持续时间的倒数，即每秒周期数，反之亦然

ET= (CPI *IC)/CR

# android - 无标签离线世界卫星地图(Android)

> ID：13458137
> 
> 赞同：2
> 
> 时间：2012-11-19T16:32:44.617
> 
> 标签：android, map, offline, satellite

我想在我的应用程序中包含一个 MapView。我一直在使用 Google Api，它运行良好。

但现在我想要一张完全离线的地图。我知道有很多可能性可以做到这一点。

问题是我想要一张没有任何标签的世界地图，例如国名、州名、城市名等。我只想要一张带国家边界的地图。应该可以放大和缩小并在特定位置设置标记。还应该可以点击屏幕中的某个位置并以特定格式（例如 WGS84）获取坐标。如果它是卫星概览或类似 OpenStreetMap.org 上的 mapquest 视图，那将是非常好的。

我知道有 Osmdroid 或 Mapsforge 之类的东西。但我还没有看到禁用所有（对我而言）不必要的标签的可能性。如果我错了，请纠正我:)

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:02:51.970

在`mapforges`您可以设置标签文本大小。我从未尝试将其设置`0`为查看它们是否消失。

如果没有，由于[http://code.google.com/p/mapsforge/](http://code.google.com/p/mapsforge/)中提供了源代码，您可以覆盖标签绘图并重新编译它。

问候。

# java - Java匹配/超过readline的性能

> ID：13458142
> 
> 赞同：2
> 
> 时间：2012-11-19T16:33:01.727
> 
> 标签：java, newline, readline

对于我的应用程序，我必须编写一个自定义的“readline”方法，因为我想检测并保留 ASCII 文本文件中的换行符结尾。Java`readLine()`方法不知道遇到了哪个换行符序列 ( `\r`, `\n`, `\r\n`) `EOF`，因此在写入修改后的文件时我无法放置完全相同的换行符序列。

这是我的测试示例的 SSCE。

```
public class TestLineIO {
    public static java.util.ArrayList<String> readLineArrayFromFile1(java.io.File file) {
        java.util.ArrayList<String> lineArray = new java.util.ArrayList<String>();
        try {
            java.io.BufferedReader br = new java.io.BufferedReader(new java.io.FileReader(file));
            String strLine;
            while ((strLine = br.readLine()) != null) {
                lineArray.add(strLine);
            }
            br.close();
        } catch (java.io.IOException e) {
            System.err.println("Could not read file");
            System.err.println(e);
        }
        lineArray.trimToSize();
        return lineArray;
    }

    public static boolean writeLineArrayToFile1(java.util.ArrayList<String> lineArray, java.io.File file) {
        try {
            java.io.BufferedWriter out = new java.io.BufferedWriter(new java.io.FileWriter(file));
            int size = lineArray.size();
            for (int i = 0; i < size; i++) {
                out.write(lineArray.get(i));
                out.newLine();
            }
            out.close();
        } catch (java.io.IOException e) {
            System.err.println("Could not write file");
            System.err.println(e);
            return false;
        }
        return true;
    }

    public static java.util.ArrayList<String> readLineArrayFromFile2(java.io.File file) {
        java.util.ArrayList<String> lineArray = new java.util.ArrayList<String>();
        try {
            java.io.FileInputStream stream = new java.io.FileInputStream(file);
            try {
                java.nio.channels.FileChannel fc = stream.getChannel();
                java.nio.MappedByteBuffer bb = fc.map(java.nio.channels.FileChannel.MapMode.READ_ONLY, 0, fc.size());
                char[] fileArray = java.nio.charset.Charset.defaultCharset().decode(bb).array();
                if (fileArray == null || fileArray.length == 0) {
                    return lineArray;
                }
                int length = fileArray.length;
                int start = 0;
                int index = 0;
                while (index < length) {
                    if (fileArray[index] == '\n') {
                        lineArray.add(new String(fileArray, start, index - start + 1));
                        start = index + 1;
                    } else if (fileArray[index] == '\r') {
                        if (index == length - 1) { //last character in the file
                            lineArray.add(new String(fileArray, start, length - start));
                            start = length;
                            break;
                        } else {
                            if (fileArray[index + 1] == '\n') {
                                lineArray.add(new String(fileArray, start, index - start + 2));
                                start = index + 2;
                                index++;
                            } else {
                                lineArray.add(new String(fileArray, start, index - start + 1));
                                start = index + 1;
                            }
                        }
                    }
                    index++;
                }
                if (start < length) {
                    lineArray.add(new String(fileArray, start, length - start));
                }
            } finally {
                stream.close();
            }
        } catch (java.io.IOException e) {
            System.err.println("Could not read file");
            System.err.println(e);
            e.printStackTrace();
            return lineArray;
        }
        lineArray.trimToSize();
        return lineArray;
    }

    public static boolean writeLineArrayToFile2(java.util.ArrayList<String> lineArray, java.io.File file) {
        try {
            java.io.BufferedWriter out = new java.io.BufferedWriter(new java.io.FileWriter(file));
            int size = lineArray.size();
            for (int i = 0; i < size; i++) {
                out.write(lineArray.get(i));
            }
            out.close();
        } catch (java.io.IOException e) {
            System.err.println("Could not write file");
            System.err.println(e);
            return false;
        }
        return true;
    }

    public static void main(String[] args) {
        System.out.println("Begin");
        String fileName = "test.txt";
        long start = 0;
        long stop = 0;

        start = java.util.Calendar.getInstance().getTimeInMillis();
        java.io.File f = new java.io.File(fileName);
        java.util.ArrayList<String> javaLineArray = readLineArrayFromFile1(f);
        stop = java.util.Calendar.getInstance().getTimeInMillis();
        System.out.println("Total time = " + (stop - start) + " ms");       
        java.io.File oj = new java.io.File(fileName + "_readline.txt");
        writeLineArrayToFile1(javaLineArray, oj);

        start = java.util.Calendar.getInstance().getTimeInMillis();
        java.util.ArrayList<String> myLineArray = readLineArrayFromFile2(f);
        stop = java.util.Calendar.getInstance().getTimeInMillis();
        System.out.println("Total time = " + (stop - start) + " ms");       
        java.io.File om = new java.io.File(fileName + "_custom.txt");
        writeLineArrayToFile2(myLineArray, om);

        System.out.println("End");
    }
} 
```

版本 1 使用`readLine()`，而版本 2 是我的版本，它保留了换行符。

在大约 500K 行的文本文件中，版本 1 大约需要 380 毫秒，而版本 2 需要 1074 毫秒。

如何加快 version2 的性能？

我检查了 Google guava 和 apache-commons 库，但找不到合适的替代“readLine()”，它会告诉在读取文本文件时遇到了哪个换行符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:40:51.407

第二个版本似乎没有使用 BufferedReader 或其他形式的缓冲区。这可能是减速的原因。

由于您似乎在内存中读取了整个文件，因此您可以将其作为一个大字符串（带有缓冲区）读取，然后在内存中对其进行解析以分析行尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T18:57:00.693

每当问题涉及程序的速度时，您应该记住的主要事情是，对于该程序中的任何连续进程，速度几乎总是受到以下两件事之一的限制：CPU（处理能力）或 IO（内存分配和传输速度）。

通常要么你的 CPU 比你的 IO 快，要么相反。正因为如此，您的程序的速度限制几乎总是由其中一个决定，通常很容易知道是哪一个：

*   一个执行大量计算但只对文件进行少量小操作的程序几乎可以肯定是**CPU 密集型的**。
*   从文件中读取大量数据或向文件写入大量数据但对处理要求不高的程序几乎可以肯定是**IO-bound**。

* * *

尝试提高受 CPU 限制的程序的速度时，事情有点简单。它主要归结为在减少操作的同时实现相同的目标或效果。

另一方面，这并没有使过程变得更容易。事实上，优化 CPU 受限程序通常比优化 IO 受限程序要困难得多，因为每个与 CPU 相关的操作通常都是唯一的，并且必须单独修改。

* * *

虽然一旦您有了经验，通常会更容易，但对于 IO 绑定程序来说，事情并不是那么简单。在处理 IO-bound 进程时，还有很多事情需要考虑。

我将使用硬盘驱动器 (HDD) 作为基础，因为我将提到的特性对 HDD 的影响最大（因为它们是机械的），但您应该记住，许多相同的概念适用于某些在某种程度上，几乎适用于所有内存存储硬件，包括固态驱动器 (SSD) 甚至 RAM！

以下是大多数内存存储硬件的主要性能特征：

*   **访问时间：**也称为*响应时间*，是硬件实际传输数据所需的时间。

    *   对于 HDD 等机械硬件，这主要与驱动器的机械特性有关，换句话说，它是旋转磁盘和移动*“磁头”*。因此，机械驱动器的访问时间在彼此之间可能会有很大差异。
    *   对于 SSD 和 RAM 等电路硬件，这个时间不依赖于运动部件，而是依赖于电气连接，因此访问时间非常快速且一致，您不必担心。
*   **寻找时间：**硬件在其内部细分中*寻找*（到达）正确位置所需的时间，以便读取或写入该部分中的地址。

    *   对于机械驱动器，主要是旋转驱动器，寻道时间测量执行器臂上的磁头组件移动到将读取或写入数据的磁盘轨道所花费的时间。
        平均寻道时间范围从高端服务器驱动器的 3 毫秒 (~) 到移动驱动器的 15 毫秒 (~)，最常见的台式机驱动器的寻道时间通常约为 9 毫秒 (~)。
    *   使用 RAM 和 SSD，没有移动部件，因此寻道时间的测量只是测试电子电路，并为操作准备设备内存中的特定位置。
        典型 SSD 的寻道时间在 0.08 到 0.16 毫秒 (~) 之间，而 RAM 甚至更快。
*   **命令处理时间：**也称为*命令开销*，它是驱动器的电子设备在各种内部组件之间建立必要的通信所需的时间，因此它可以读取或写入数据。
    对于机械和电路设备，这在 0.003 ms (~) 的范围内，通常在基准测试中被忽略。

*   **稳定时间：**这是磁头在目标轨道上*稳定*并停止振动所需的时间，这样它们就不会*偏离轨道*读取或写入。
    这个量通常非常小（通常小于 0.1 毫秒），并且通常作为*寻道时间*的一部分包含在基准测试中。

*   **数据传输速率：**也称为*吞吐量*，它涵盖以下两个方面：*内部速率*，即在磁盘表面和驱动器上的控制器之间移动数据所需的时间。以及*外部速率*，即在驱动器上的控制器和主机系统中的外部组件之间移动数据的时间。它包含以下几个子因素：

    *   介质速率：驱动器从介质中读取位的速度。换句话说，实际的读/写速度。
    *   扇区开销：控制结构和管理驱动器、定位和验证数据以及执行其他支持功能所需的其他信息所需的额外时间（字节）。
    *   分配速度：与*扇区开销*类似，它是驱动器确定将写入的插槽并将它们注册到其地址字典所花费的时间。只需要写操作。
    *   Head-Switch time：从一个头电切换到另一个头所需的时间；仅适用于多头驱动器，大约为 1 到 2 ms。
    *   转缸时间：移动到相邻轨道所需的时间；*之所以使用柱面*这个名称，是因为通常在移动致动器之前读取具有多个磁头或数据表面的驱动器的所有磁道，这意味着*圆*或*柱面*的图像而不是磁道。该时间是旋转机械驱动器独有的，通常约为 2 到 3 毫秒。

* * *

这意味着有关 IO 的主要性能问题是由 IO 和处理之间的来回切换引起的。通过使用缓冲区，以及处理和读取/写入更大的数据块，而不是每个字节**，可以大大减少这个问题。**

您还可以看到，尽管许多速度特性仍然存在，但**RAM 和 SSD**没有 HDD 的相同内部限制，因此它们的内部和外部传输速率**通常会达到驱动器到主机接口的最大能力**。

* * *

## 块方法示例：

本示例将`Test`在桌面上创建一个文件夹，并在其中生成一个`Test.txt`文件。

该文件以指定的行数生成，每行包含`"Test"`重复特定次数的单词（出于文件大小目的）。每行以`"\r"`,`"\n"`或`"\r\n"`, 顺序结束。

* * *

将每个块的结果累积保存在内存中是没有意义的，因为这样做会导致整个文件最终进入内存，这几乎与一开始不使用块的问题相同。

因此，在同一个`Test`文件夹中创建一个输出文件，一旦该块完成，每个块的结果就存储在该文件夹中。

使用缓冲区读取基本文件，并且这些缓冲区另外用作块。

这里的过程只是打印一个文本版本的行分隔符（`"\\r"`,`"\\n"`或`"\\r\\n"`），然后是`": "`，然后是行内容；但是对于最后一行，`"EOF"`使用的是代替。

要实际操作块，使用基于类的方法可能更容易管理，而不是纯粹基于函数的方法。

无论如何，这里有代码：

```
public static void main(String[] args) throws FileNotFoundException, IOException {
    File file = new File(TEST_FOLDER, "Test.txt");
    //These settings create a 122 MB file.
    generateTestFile(file, 500000, 50);

    long clock = System.nanoTime();
    processChunks(file, 8 * (int) Math.pow(1024, 2));
    clock = System.nanoTime() - clock;
    float millis = clock / 1000000f;
    float seconds = millis / 1000f;
    System.out.printf(""
                    + "%12d nanos\n"
                    + "%12.3f millis\n"
                    + "%12.3f seconds\n",
                    clock, millis, seconds);
}

public static File prepareResultFile(File source) {
    String ofn = source.getName(); //Original File Name.
    int extPos = ofn.lastIndexOf('.'); //Extension index.
    String ext = ofn.substring(extPos); //Get extension.
    ofn = ofn.substring(0, extPos); //Get name without extension reusing 'ofn'.
    return new File(source.getParentFile(), ofn + "_Result" + ext);
}

public static void processChunks(File file, int buffSize)
                throws FileNotFoundException, IOException {
    //No need for buffers bigger than the file itself.
    if (file.length() < buffSize) {
        buffSize = (int)file.length();
    }
    byte[] buffer = new byte[buffSize];
    BufferedInputStream bis = new BufferedInputStream(new FileInputStream(file), buffSize);

    BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(
                    prepareResultFile(file)), buffSize);

    StringBuilder sb = new StringBuilder();
    while (bis.read(buffer) > (-1)) {
        //Check if a "\r\n" was split between chunks.
        boolean skipFirst = false;
        if (sb.length() > 0 && sb.charAt(sb.length() - 1) == '\r') {
            if (buffer[0] == '\n') {
                bos.write(("\\r\\n: " + sb.toString() + System.lineSeparator()).getBytes());
                sb = new StringBuilder();
                skipFirst = true;
            }
        }

        for (int i = skipFirst ? 1 : 0; i < buffer.length; i++) {
            if (buffer[i] == '\r') {
                if (i + 1 < buffer.length) {
                    if (buffer[i + 1] == '\n') {
                        bos.write(("\\r\\n: " + sb.toString() + System.lineSeparator()).getBytes());
                        i++; //Skip '\n'.
                    } else {
                        bos.write(("\\r: " + sb.toString() + System.lineSeparator()).getBytes());
                    }
                    sb = new StringBuilder(); //Reset accumulator.
                } else {
                    //A "\r\n" might be split between two chunks.
                }
            } else if (buffer[i] == '\n') {
                bos.write(("\\n: " + sb.toString() + System.lineSeparator()).getBytes());
                sb = new StringBuilder(); //Reset accumulator.
            } else {
                sb.append((char) buffer[i]);
            }
        }
    }
    bos.write(("EOF: " + sb.toString()).getBytes());
    bos.flush();
    bos.close();
    bis.close();
    System.out.println("Finished!");
}

public static boolean generateTestFile(File file, int lines, int elements)
                throws IOException {
    String[] lineBreakers = {"\r", "\n", "\r\n"};
    BufferedOutputStream bos = null;
    try {
        bos = new BufferedOutputStream(new FileOutputStream(file));
        for (int i = 0; i < lines; i++) {
            for (int ii = 1; ii < elements; ii++) {
                bos.write("test ".getBytes());
            }
            bos.write("test".getBytes());
            bos.write(lineBreakers[i % 3].getBytes());
        }
        bos.flush();
        System.out.printf("LOG: Test file \"%s\" created.\n", file.getName());
        return true;
    } catch (IOException ex) {
        System.err.println("ERR: Could not write file.");
        throw ex;
    } finally {
        try {
            bos.close();
        } catch (IOException ex) {
            System.err.println("WRN: Could not close stream.");
            Logger.getLogger(Q_13458142_v2.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

* * *

我不知道您使用的是什么 IDE，但如果是 NetBeans，请为您的代码制作内存配置文件并与此配置文件进行比较。您应该注意到处理过程中所需的内存量有很大差异。

在这里，块方法的内存使用，不仅包括块本身，还包括程序自己的变量和结构，不会超过 40 MB，即使我们正在处理大于 100 MB 的文件。如你看到的： ![在此处输入图像描述](../Images/67969d870bed7b2e6402f01b3c26d029.png)

它在 GB 上花费的时间也很少，在任何给定点上大多不到 5%： ![在此处输入图像描述](../Images/a056b3112fe124ef3df4f69879149ae1.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:45:53.093

您将输出语句（`one for line and one for newline`）加倍：

您可以在下面尝试（用于`lineSeparator()`获取行分隔符并在写入之前附加）：

```
 out.write(lineArray.get(i)+System.lineSeparator()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T21:11:01.927

不要重新发明轮子。
[检查 BufferedReader#readLine() 代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/BufferedReader.java#BufferedReader.readLine%28boolean%29)
复制、粘贴并进行所需的更改以将行分隔符保留在行内

# c++ - 如何动态获取字符串数组的大小？

> ID：13458146
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:33:18.653
> 
> 标签：c++

如何动态获取字符串数组的大小？例如：

```
string names[5] = {"John","Smith","Noob"}; 
```

不知何故我应该得到2的大小

我怎样才能做到这一点？不使用向量或循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:35:57.900

数组大小仍然是 5。

您没有为其提供值的元素是默认初始化的，即`""`. 但他们仍然*在那里*，一切都在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:38:29.750

好吧，回答这个问题，获取数组的大小如下：

```
int arr[17];
int arrSize = sizeof(arr) / sizeof(int); 
```

但是，是的，在你的情况下，它被初始化为 5，所以它是 5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:56:46.470

如果您希望数组的大小由初始化器的数量决定，您可以这样做：

```
string names[] = {"John","Smith","Noob"}; 
```

`string name[]`是一个不完整的数组类型，语言从初始化程序中计算出完成它所需的正确大小。在这种情况下，数组的大小将为 3。

原始数组虽然不是很友好，所以如果可能的话，你可能想避免它们，在这种情况下，使用向量：

```
std::vector<std::string> names {"John","Smith","Noob"}; 
```

尽管您的编译器需要支持 C++11 才能使用这种初始化向量的方法。

* * *

> 我需要获取从字符串数组初始化的元素数量，然后遍历所有元素并将它们转换为 intro char 数组

那么为什么不首先从 char* 开始呢？

```
char const *names[] = {"John","Smith","Noob"}; 
```

# asp.net-mvc - 如何填充 KendUI 窗口

> ID：13458150
> 
> 赞同：0
> 
> 时间：2012-11-19T16:33:25.517
> 
> 标签：asp.net-mvc, kendo-ui

我是剑道 UI 的新手。我希望能够显示一个弹出窗口，其中包含来自我的控制器的结果。

我的例子很简单。我的页面上有这些数据。

```
Some text    [Create] 
```

当我单击 [创建] 时，会向我的控制器发出呼叫。控制器将创建一个 PDF 文件。接下来，我希望能够在 KendoUI 窗口中显示 pdf。

我对如何将信息传递回页面感到困惑，以便 KendoUi 窗口知道要显示的 PDF 文件名。

提前感谢您的提示。

史蒂夫

MVC 4

剑道UI 2012.2.270

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:30:36.467

有两种基本方法：

1.  您在页面加载时创建窗口，并具有更改内容并使其可见的功能。
2.  您每次都创建窗口。

假设你为 1。那么你有一个类似这样的 HTML

```
<div id="popup_window">
</div>
<a href="#" id="show">Create PDF</a> 
```

然后将触发打开的窗口和`click`绑定定义为：

```
$("#popup_window").kendoWindow({
    title    :"PDF document",
    visible  :false
});

$("#show").click(function () {
    $("#popup_window").html("<object id='pdf' data='doc.pdf' type='application/pdf'/>");
    $("#popup_window").data("kendoWindow").open();
}); 
```

我在哪里创建`kendoWindow`但将其可见性设置为不可见。然后我将一个函数绑定到单击`Create PDF`消息，该消息将内容设置为 HTML `object`，其中`data`属性是 pdf 文档，然后通过调用`kendoWindow` `open`方法打开。

# php - 如何在不复制/粘贴身份验证令牌的情况下使用 Google Drive PHP API 进行身份验证

> ID：13458157
> 
> 赞同：2
> 
> 时间：2012-11-19T16:33:59.450
> 
> 标签：php, authentication, oauth-2.0, google-drive-api, google-api-php-client

我真的很难理解这是如何完成的。

我已按照[此示例](https://developers.google.com/drive/quickstart-php#step_3_set_up_the_sample)将文件上传到我们共享的谷歌驱动器帐户。这从 linux 机器上的命令行运行，但它需要我将 URL 复制/粘贴到浏览器中，复制授权令牌，然后将其粘贴回标准输入，并交换身份验证令牌以最终获得访问令牌。

我需要做的就是自动化复制/粘贴 URL 和令牌的过程，这样我的脚本就可以完成它需要做的事情，而无需用户进行任何交互。较旧的 DocumentsList API 允许我们简单地使用用户名/密码进行身份验证。我知道 Drive 的 Oauth2 方法不再可能实现这一点，但它会让我现在的生活变得更简单......！有没有办法从我的应用程序中使用某种持久性令牌？

谁能指出我正确的方向？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T22:21:16.253

您可以获得访问令牌和刷新令牌对，并且可以存储它们以供以后使用。您只需要刷新令牌，因为它可用于获取新的访问令牌。

这比用户名/密码略好，因为如果令牌被泄露，您可以随时撤销对令牌的访问。

# asp.net - ASP.NET 区分日期和日期时间字段

> ID：13458159
> 
> 赞同：1
> 
> 时间：2012-11-19T16:34:00.570
> 
> 标签：asp.net, date, datetime, format

我有一个 ASP.NET 表单（MVC3/Razor），在表单上我想更改日期字段从日期时间字段显示的方式。即在某些数据列中，时间很重要，我希望显示日期和时间，而在其他数据列中则无关紧要，我只想显示日期。这可能吗？

提前致谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:37:27.830

两种方式： 1) 使用`UIHint`属性告诉字段是否呈现为`Date`or`DateTime`然后用 an`EditorTemplate`来区分两者。或者 2) 使用`EditorFor`扩展方法并明确告诉它`EditorTemplate`使用哪个。

`DisplayTemplates`当您想要截断时间时，也可以这样做。

这是来自 SO 的示例：[ASP.NET MVC Editor-Templates/UIHint with parameters](https://stackoverflow.com/questions/9681107/asp-net-mvc-editortemplates-uihint-with-parameters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:37:50.877

您可以使用 String.Format 以您想要的方式格式化日期和时间。

```
string.Format("{0:dd-MMM-yy}", yourDate); 
```

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:41:18.497

您可以根据需要格式化每个适当的列。例如：

```
@string.Format("{0:MM/dd/yyyy}",DateTimeField) 
```

和/或

```
@string.Format("{0:MM/dd/yyyy hh:mm:ss}",DateTimeField) 
```

# sql-server-2008 - 总和结果错误 - 停止舍入

> ID：13458160
> 
> 赞同：1
> 
> 时间：2012-11-19T16:34:03.813
> 
> 标签：sql-server-2008

我有一个确定两个数字之差的总和。在这种情况下，两个数字（余额）是 454.27，（current_bal）是 424.260000。

使用这个函数时，它说 bal_dif 是 0.000000，而它应该是 0.000001？

```
SUM(ISNULL(cast(balance-current_balance_amount as decimal)/100 ,2))AS bal_diff 
```

我假设它是四舍五入的，有什么办法可以阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:37:06.407

[将您的精度设置`decimal`为`(9, 6)`](http://msdn.microsoft.com/en-us/library/ms187746.aspx), 以保留小数点右侧 6 位的值：

```
SUM(ISNULL(cast(balance-current_balance_amount as decimal(9,6))/100 ,2))AS bal_diff 
```

# jmeter - 如何从 BSF 采样器生成多个 jmeter 采样器结果？

> ID：13458163
> 
> 赞同：1
> 
> 时间：2012-11-19T16:34:14.550
> 
> 标签：jmeter

我有一个运行 groovy 脚本的 BSF 采样器。
我想用 jmeter 中的这个单一脚本创建多个示例结果。
可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:15:40.050

> ...我的 groovy 脚本将运行一个 junit 套件，我想分别报告每个 junit 测试。或者我的 groovy 脚本将获取 100 个 http 并且我想显示 100 个采样器结果。

1.  要实现这一点，您必须组织循环 - 例如将您的 BSF 采样器放在任何合适的[逻辑控制器](http://jmeter.apache.org/usermanual/component_reference.html#logic_controllers)下：[循环控制器）](http://jmeter.apache.org/usermanual/component_reference.html#Loop_Controller)、[While 控制器](http://jmeter.apache.org/usermanual/component_reference.html#While_Controller)、[ForEach 控制器](http://jmeter.apache.org/usermanual/component_reference.html#ForEach_Controller)，或使用[线程组](http://jmeter.apache.org/usermanual/component_reference.html#Thread_Group)的可能性（循环计数、线程数字段）。
    此场景将为每个新的迭代/线程重用您的 BSF 采样器的单个实例，并为每次执行生成单独的采样器结果。
2.  同样，您可能必须在每次迭代时向 BSF Sampler 提供不同的条目数据/参数 - 以对其进行参数化。在这种情况下，您至少可以查看[CSV 数据集配置](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)（从文件中读取）或任何[后处理器/提取器](http://jmeter.apache.org/usermanual/component_reference.html#postprocessors)（从响应中获取数据）。
3.  假设您还研究了[JSR223 Sampler](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler)以与 groovy 脚本一起使用以获得更好的性能。

# cmake - cmake - 设置默认命令行选项

> ID：13458167
> 
> 赞同：2
> 
> 时间：2012-11-19T16:34:40.427
> 
> 标签：cmake

我希望当我为某个 CMakeLists.txt 运行 cmake 时，“--warn-uninitialized”和“--warn-unused-vars”选项会自动打开，而无需实际输入这些选项。

我怎么能那样做？

十分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:05:49.733

我认为你最好的选择是创建一个别名：

```
alias mycmake='cmake --warn-uninitialized --warn-unused-vars' 
```

# iphone - 自定义 UITableViewCell 的颜色问题

> ID：13458173
> 
> 赞同：0
> 
> 时间：2012-11-19T16:35:15.897
> 
> 标签：iphone, objective-c, xcode, uitableview

我正在开发一些带有自定义 UITableViewCells 的应用程序。我有一个用于单元格的笔尖，我只使用一个单元格标识符。

在 cellForRowAtIndexPath 我有一些这样的代码：

```
_spot.text = [NSString stringWithFormat:@"%d.", [forecastRow.position intValue]];
if([[forecastRow prob1] floatValue] > 0.5){
    _spot.textColor = [UIColor redColor];
} 
```

其中 _spot 是 UILabel 的 UBOutlet。事实是数字显示正确，颜色首先分配给适当的单元格。但是，当我滚动时，数字保持正常，但红色被随机分配给其他单元格上的 _spot 标签，而不是在整个表格中传递 if() 。

发生了什么？为什么文字正确，但颜色不正确？为什么这只会在滚动时搞砸？我认为解决方案不是为这样的小任务使用多个标识符和笔尖（更改 UILabel 颜色），因为我需要根据复杂的条件为行的标签分配多个不同的颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:56:05.927

看起来您正在更新文本，每次请求新单元格而不是颜色。正在发生的事情是单元格重复使用导致单元格在您滚动时被重复使用并且没有正确更新颜色。将您的代码更改为：

```
_spot.text = [NSString stringWithFormat:@"%d.", [forecastRow.position intValue]];
if([[forecastRow prob1] floatValue] > 0.5){
    _spot.textColor = [UIColor redColor];
} else
{
    _spot.textColor = [UIColor (original color)];
} 
```

这将强制对每个请求进行颜色更新。

# python - 14 段显示与海龟图形

> ID：13458175
> 
> 赞同：1
> 
> 时间：2012-11-19T16:35:20.977
> 
> 标签：python, turtle-graphics

如何使用海龟图形将输入转换为 14 段字符？

我不需要粘贴代码的完整答案；我只需要一些关于如何去做的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:57:18.980

这很简单。编写一个绘制完整[“联合插孔”](http://en.wikipedia.org/wiki/Fourteen-segment_display)的函数，并使其接受最多 14 个参数（或其列表），说明哪些段应该被省略。对于每个字符，使用适当数量的参数调用此函数。

# css - IE9 中 CSS 中断站点中指定的 Arial

> ID：13458176
> 
> 赞同：0
> 
> 时间：2012-11-19T16:35:25.677
> 
> 标签：css, fonts, internet-explorer-9

我只在 IE9 和某些 PC 上看到过这个问题。在我的 CSS 中，我有以下内容，有时会导致空白页：

字体系列：Arial、Verdana、Helvetica、sans-serif；

如果我将 CSS 更改为此然后页面加载，但 Arial 不用于字体：

font-family: "Arial, Verdana, Helvetica, sans-serif";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:38:09.927

尝试：

字体系列：“Arial”、“Verdana”、“Helvetica”、“sans-serif”；

# c# - 在 c# 中没有预料到

> ID：13458180
> 
> 赞同：-3
> 
> 时间：2012-11-19T16:35:45.883
> 
> 标签：c#, .net, umbraco

大家好，我正在尝试序列化 xml 中的值。每次我`<string xmlns=''>` **在 c# 中都没有预料到** 无法找到根本原因，请在这里帮助我。

```
namespace CustomDataType.usercontrols
    {
        public partial class CustomDataTypes : System.Web.UI.UserControl, umbraco.editorControls.userControlGrapper.IUsercontrolDataEditor
        {
        private Status _umbval;
        public object value
        {
            get
            {
                var status = GetStatus();
                return SerializationHelper.ValueToXmlString(status);
            }
            set
            {
                //if (value == null || string.IsNullOrEmpty(value.ToString()))
                //{
                //    _umbval = Status.Empty;
                //}
                //else
                //{
                    _umbval   =(Status)SerializationHelper.ValueFromXmlString(value,typeof(Status));
                //}
            }
        }
    }
    }

    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Xml.Serialization;

    namespace CustomDataType
    {
        [Serializable]
        [XmlRoot("StatuMain")]
        public class Status
        {
                [XmlElement("statusvalue")]
                public string StatusValue { get; set; }

                [XmlElement("statusvalue1")]
                public string StatusValue1 { get; set; }

                [XmlElement("statusvalue2")]
                public string StatusValue2 { get; set; }

                [XmlElement("statusvalue3")]
                public string StatusValue3 { get; set; }

                //[XmlElement("isEmailChecked")]
                //public bool HasEmailChecked { get; set; }

                //[XmlElement("datetime")]
                //public DateTime Date { get; set; }

                public static Status Empty 
                {
                    get
                    {
                        var schedule = new Status();
                        schedule = null;
                        return schedule;
                    }
                }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:58:05.763

我认为你应该使用 XmlNamespaceManager 来设置一个空的命名空间，而不是 xmlns..

[http://msdn.microsoft.com/en-us/library/d6730bwt(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d6730bwt(v=vs.80).aspx)

```
XmlNamespaceManager nsmanager = new XmlNamespaceManager(reader.NameTable);
nsmanager.AddNamespace("", "");
YourSeraializationMethod(reader); 
```

# dynamics-crm - 无法在 CRM 2011 插件导入中插入重复键？

> ID：13458181
> 
> 赞同：1
> 
> 时间：2012-11-19T16:35:48.600
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-4

我已从 prod 服务器导出插件，并在导入测试服务器时收到以下错误消息。

> 未处理的异常：System.Web.Services.Protocols.SoapException：服务器无法处理请求。
> 
> 细节：
> 
> `0x80040237`
> 
> 无法插入重复键。
> 
> 平台
> 
> 在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，布尔 asyncCall）
> 
> 在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke（字符串方法名，对象 [] 参数）
> 
> 在 PluginRegistrationTool.CrmSdk.CrmService.Create（BusinessEntity 实体）
> 
> 在 PluginRegistrationTool.RegistrationHelper.RegisterAssembly（CrmOrganization 组织，字符串 pathToAssembly，CrmPluginAssembly 程序集）
> 
> 在 PluginRegistrationTool.ImportExport.ImportSolution（CrmOrganization 组织，ICollection `1 assemblies, ICollection`1 checkedTreeNodes，IDictionary`2 pathList）
> 
> 在 PluginRegistrationTool.ImportExportForm.btnExecute_Click（对象发送者，EventArgs e）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:10:57.330

在您的测试服务器上检查是否已经存在同名的插件/步骤/图像。如果是，则在尝试导入之前先将其删除。

我建议您在尝试导入之前先删除所有已注册的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T17:01:55.570

[![在此处输入图像描述](../Images/2df89344837ea4b71259684e86e87546.png)](https://i.stack.imgur.com/sJp0m.png)创建新插件时，Visual Studio 将根据管道阶段（Pre-Validation、Pre-Operation、Post-Operation）、主要实体（Contact、Organization）和消息（Create、更新等）例如，PostContactUpdate 或 PreOrganizationUpdate，因此，如果您碰巧制作了具有相同消息、管道阶段和主要实体的另一个插件，并且您接受了可以解释您收到错误原因的默认类名。更改类名并重新部署应该为您修复它。

# javascript - 同一系列中具有相同x轴的点的流动合并

> ID：13458187
> 
> 赞同：1
> 
> 时间：2012-11-19T16:36:35.653
> 
> 标签：javascript, highcharts, highstock

我目前正在使用 highstock 来绘制基于全天时间的可用项目总数（然后实时更新）。

如果项目总数的两个变化同时发生，在 highstock 我得到一个垂直条的差异：

![同时y轴变化](../Images/b02208f83ab0ba80f4820edce0730a81.png)

因此，在我的示例图像中，我们从 4299 个事物开始，然后删除了 53 个项目并添加了 50 个（技术上是同时，但是是两个不同的事务并且是两个点）。净差为-3。（或者换句话说，我得到 {x: 5:44:15 and y: 4246, change: -53}, {x: 5:44:15, y: 4296, change: 50}）。

所以我的问题是：在 highstock 中是否可以合并这些点以摆脱垂直条并使用 4296 作为显示值？我希望然后我可以使用工具提示格式化程序循环“this.points”并在工具提示中显示 -53 的变化和 50 的变化，以便用户可以看到导致 -3 的净变化的原因。

如果这不可能，我将自己合并这些点并传递点中的所有相关信息以生成我想要的工具提示（和图表外观），但想看看我是否可以利用所有功能highstock 首先 - 并将这些点分开。

谢谢！

编辑：：

```
new Highcharts.StockChart({
                        chart : {
                            renderTo : 'realTimeChart',
                            zoomType: 'x',
                            backgroundColor: '#feffdd',
                            style: {
                                fontFamily: 'Segoe UI'
                            },
                            type: 'spline'
                        },

                        plotOptions: {
                            area: { animation: false },
                            arearange: { animation: false },
                            areaspline: { animation: false },
                            areasplinerange: { animation: false },
                            bar: { animation: false },
                            column: { animation: false },
                            columnrange: { animation: false },
                            gauge: { animation: false },
                            line: { animation: false },
                            pie: { animation: false },
                            scatter: { animation: false },
                            series: { animation: false },
                            spline: { animation: false }
                        },

                        xAxis: {
                            ordinal: false
                        },

                        tooltip: {
                            animation: false,
                            formatter: function() {
                                var p = '';

                                p += '<span style="font-size: 9px;">' + Highcharts.dateFormat('%A, %b %e, %Y %H:%M:%S', this.x) +'</span><br/>';
                                $.each(this.points, function(i, point){
                                    p += '<span style="color:' + this.series.color + '">' + this.series.name + '</span>: <b>'+ this.y +'</b>';
                                    if (point.point.where) {
                                        p += '<br />' + point.point.where + ' changed by ' + point.point.change + (point.point.who ? ' (' + point.point.who + ')' : '');
                                    }
                                });

                                return p;

                            }
                        },

                        rangeSelector: {
                            buttons: [{
                                count: 30,
                                type: 'minute',
                                text: '30M'
                            }, {
                                count: 1,
                                type: 'hour',
                                text: '1H'
                            }, {
                                count: 6,
                                type: 'hour',
                                text: '6H'
                            }, {
                                type: 'all',
                                text: 'Day'
                            }],
                            inputEnabled: false,
                            selected: 1
                        },

                        exporting: {
                            enabled: false
                        },

                        series : [{
                            name : 'Available',
                            data : data,
                            lineWidth: 1,
                            states: {
                                hover: {
                                    enabled: false
                                }
                            }
                        }] 
```

数据采用我之前显示的格式，除了 x 实际上是自纪元以来的毫秒数：

```
data = [
        {x: 123456789, y: 2000, where: 'Location', change: 40, who: 'Joe'},
        {x: 123456789, y: 1960, where: 'Location', change: -40, who: 'Bob'},
        ...
    ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:58:21.877

只是想跟进我是如何轻松绕过这个问题的。我决定将积分组合到最接近的分钟，而不是按秒排列（所以我有分钟数）。

然后对于每个点，我传入该分钟块中包含的实际点数组作为新参数，并更新该分钟块的 y 值。然后我使用工具提示格式化程序来显示该分钟块内的所有更改及其实际更改时间。这给了我一个更流畅的图表，而不是同一 x 轴的所有这些硬垂直点。

为了轻松更改特定 x 轴点的数据点，我在 series.data 数组中为 highcharts 保留了一个单独的分钟块位置数组，这样如果我需要更新一个块，我就知道确切的位置时间序列是。

以下是我完成任务的方式：我创建了引用数组：

```
var pointIndex = {}; 
```

我根据当天的历史数据创建了初始数据系列（通过 ajax 提取）：

```
var data = [];
var time = Math.floor(actual_time / 60000) * 60000;
pointIndex[time] = data.push({x: time, y: items_available, change: [{when: actual_time}]}); 
```

因此，actual_time 是自纪元以来的毫秒数（发生偶数变化时），然后我将其四舍五入到最接近的分钟以获得分钟时间块，change 是将所有实际点保存在工具提示中显示的参数。

因此，当我添加一个新点时，我会检查分钟块是否存在，如果不存在，则添加一个新点，否则更新一个旧点：

```
var time = (new Date()).getTime();
var point = Math.floor(time / 60000) * 60000;
if (pointIndex[point]) {
    var change = chart.series[0].data[pointIndex[point]].change;
    change.push({when: time});
    chart.series[0].data[pointIndex[point]].update({x: point, y: items_available, change: change});
} else {
    pointIndex[point] = chart.series[0].data.length;
    chart.series[0].addPoint({x: point, y: items_available, change: [{when: time}]}, false, false);
} 
```

（在所有情况下，我在完成更新点后都会进行实际的图表刷新。）

希望这将帮助其他发现自己处于相同位置的人！

编辑:: (忘记格式化程序):

```
tooltip: {
    animation: false,
    formatter: function() {
        var p = '';

        p += '<span style="font-size: 9px;">' + Highcharts.dateFormat('%A, %b %e, %Y %H:%M', this.x) +'</span><br/>';
        $.each(this.points, function(i, point){
            p += '<span style="color:' + this.series.color + '">' + this.series.name + '</span>: <b>'+ this.y +'</b>';
            if (point.point.change) {
                for(var j = 0; j < point.point.change.length; ++j) {
                    p += '<br />Change at: ' + new Date(point.point.change[j].when).toTimeString();
                }
            }
        });

        return p;

    }
} 
```

# python - Django hvad - 在模板中使用多语言对象的最佳实践

> ID：13458191
> 
> 赞同：2
> 
> 时间：2012-11-19T16:36:41.573
> 
> 标签：python, django, plugins, multilingual, django-hvad

我有一个有多种语言的文章对象。使用此对象的最佳方法是什么？

我需要以每种语言显示所有属性。

是否可以只获取我的文章对象并遍历模板中的语言？

谢谢你的帮助！

罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:37:19.197

您应该这样做：将每个翻译提取到单个变量中，将它们放入列表中，让该列表去查看。然后，您可以遍历视图中的每个翻译。

# c - 在 Linux 设备驱动程序中编写定时器

> ID：13458193
> 
> 赞同：1
> 
> 时间：2012-11-19T16:36:53.653
> 
> 标签：c, timer, linux-kernel, linux-device-driver, kernel-module

我是模块 linux 的新手。我尝试创建一个计数器模块，其中计数器在计时器回调时递增。计数器的结果必须发送到另一个模块（内存模块）。

```
#include <linux/init.h>
#include <linux/module.h>
#include <linux/kernel.h> 
#include <linux/slab.h> 
#include <linux/fs.h> 
#include <linux/errno.h> 
#include <linux/types.h> 
#include <linux/proc_fs.h>
#include <linux/fcntl.h> 
#include <asm/system.h> 
#include <asm/uaccess.h> 

MODULE_AUTHOR("Helene");
MODULE_DESCRIPTION("Module memory");
MODULE_SUPPORTED_DEVICE("none");
MODULE_LICENSE("Dual BSD/GPL");

/* Global variables of the driver */
/* Buffer to store data */
char *memory_buffer;
int result;

struct file_operations memory_fops;

int memory_open(struct inode *inode, struct file *filp) {
//   printk(KERN_DEBUG "Opening memory module\n");
  return 0;
}

int memory_release(struct inode *inode, struct file *filp) {
//   printk(KERN_DEBUG "Releasing of memory module\n");
  return 0;
}

ssize_t memory_read(struct file *filp, char *buf, size_t count, loff_t *f_pos){
//   printk(KERN_DEBUG "Reading memory module : %s\n", buf);
  if (*f_pos > 0)
      return 0;
  if (count > strlen(memory_buffer))
      count = strlen(memory_buffer);
  copy_to_user(buf,memory_buffer,count);
    *f_pos = *f_pos + count;
  return count; 
  }

ssize_t memory_write( struct file *filp, const char *buf, size_t count, loff_t *f_pos) {
//   printk(KERN_DEBUG "Writing memory module : %s\n", buf);
  copy_from_user(memory_buffer, buf, count);
  return count;
}

static int __init memory_init(void) {
  /* Registering device */
  result = register_chrdev(0, "memory", &memory_fops);
  if (result < 0) {
    printk(KERN_DEBUG "memory: cannot obtain major number \n");
    return result;
  }
  /* Allocating memory for the buffer */
  memory_buffer = kmalloc(1, GFP_KERNEL); 
  if (!memory_buffer) { 
    result = -ENOMEM;
    goto fail; 
  } 
  memset(memory_buffer, 0, 1);
  printk(KERN_ALERT "Inserting memory module : %d\n", result); 
  return 0;
  fail: 
    //memory_exit(); 
    return result;
}

static void __exit memory_exit(void) {
  /* Freeing the major number */
  unregister_chrdev(result, "memory");
  /* Freeing buffer memory */
  if (memory_buffer) {
    kfree(memory_buffer);
  }
  printk(KERN_DEBUG "Removing memory module\n");
}

struct file_operations memory_fops = {
  owner: THIS_MODULE,
  read: memory_read,
  write: memory_write,
  open: memory_open,
  release: memory_release
};

module_init(memory_init);
module_exit(memory_exit); 
```

内存模块工作。我的问题是当我在函数计时器回调上调用函数时：filp_open/fp->f_op->write/filp_close。我已经从计时器回调中测试了这些功能，并且可以正常工作。

为什么 filp_open 函数 (& co) 不适用于计时器回调函数？

```
#include <linux/init.h>
#include <linux/module.h>
#include <linux/kernel.h> /* printk() */
#include <linux/slab.h> /* kmalloc() */
#include <linux/fs.h> /* everything... */
#include <linux/errno.h> /* error codes */
#include <linux/types.h> /* size_t */
#include <linux/proc_fs.h>
#include <linux/fcntl.h> /* O_ACCMODE */
#include <asm/system.h> /* cli(), *_flags */
#include <asm/uaccess.h> /* copy_from/to_user */

MODULE_LICENSE("GPL");

static struct timer_list my_timer;
int cptNbClic ;
int result;

struct file_operations timer_fops;

int write_file_system(struct file *fp, char * buf){
  int nb;
  mm_segment_t old_fs=get_fs();
  set_fs(get_ds());
  nb = fp->f_op->write(fp,buf ,10, &fp->f_pos);
  set_fs(old_fs);
  return nb;
}

void writeInMemory(void){
//   printk(KERN_DEBUG "busy %d\n", busy);
    int nbwrite;
    char buf[3];
    int fmemory;
     fmemory=filp_open ("/dev/memory", O_WRONLY | O_APPEND | O_CREAT,0);    //don't work on this function
     if (fmemory==NULL){//verification de l'ouverture 
    printk(KERN_ALERT "filp_open error input memory!!.\n");
    return -1;
     } 
    sprintf(buf, "%d", cptNbClic); 
    printk(KERN_DEBUG "%d\n", cptNbClic);
      nbwrite = write_file_system(fmemory, buf);
      filp_close(fmemory, 0);
}

void my_timer_callback( unsigned long data )
{
  cptNbClic++;
    printk(KERN_DEBUG "cptNbClic %d\n", cptNbClic);
    writeInMemory();
    setup_timer(&my_timer, my_timer_callback, 0);
    mod_timer(&my_timer, jiffies + msecs_to_jiffies(1000));
}

static int timer_open(struct inode *inode, struct file *filp) {
 /* setup your timer to call my_timer_callback */
  cptNbClic = 0;
  setup_timer(&my_timer, my_timer_callback, 0);
  /* setup timer interval to 200 msecs */
  mod_timer(&my_timer, jiffies + msecs_to_jiffies(1000));
  return 0;
}

static int timer_release(struct inode *inode, struct file *filp) {
  /* Success */
    printk(KERN_DEBUG "Releasing of cpt module\n");
  del_timer(&my_timer);
  return 0;
}

static int __init timer_init(void) {
  /* Registering device */
  result = register_chrdev(0, "timer", &timer_fops);
  if (result < 0) {
    printk(KERN_DEBUG "timer: cannot obtain major number \n");
    return result;
  }
  printk(KERN_ALERT "Inserting timer module : %d\n", result); 
  return 0;     
}

static void __exit timer_exit(void) {
  unregister_chrdev(result, "timer");
  printk(KERN_DEBUG "Removing timer module\n");     
}

struct file_operations timer_fops = {
  owner: THIS_MODULE,
  open: timer_open,
  release: timer_release
};

/* Declaration of the init and exit functions */
module_init(timer_init);
module_exit(timer_exit); 
```

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T09:51:09.053

无需在 my_timer_callback() 中调用 setup_timer 函数。定时器已设置。如果您想要一个循环计时器，那么只需在您的处理程序中再次调用 mod_timer() ，它将更新您的计时器过期值，并且您的计时器会一次又一次地愉快地运行，直到 del_timer() 调用。

# scala - 使用 specs2（scala/play 框架）指定测试顺序

> ID：13458194
> 
> 赞同：1
> 
> 时间：2012-11-19T16:37:00.490
> 
> 标签：scala, specs2

我目前正在使用 Specs2 库为 Scala Play 应用程序编写一组测试。

我在编译过程中遇到了一些堆栈溢出错误，因为测试字符串太长了，所以我把它分成了几个类。

问题是测试是使用多线程进程同时运行的。我需要指定这些测试的顺序。有没有办法做到这一点？问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:03:21.213

`sequential`您可以通过添加到规范中来指定测试必须按顺序执行。

如果您正在使用单元样式测试，请将语句`sequential`放在测试上方的一行中（[示例来自 specs 文档](http://etorreborre.github.com/specs2/)）：

```
 import org.specs2.mutable._

  class HelloWorldSpec extends Specification {

    sequential

    "The 'Hello world' string" should {
      "contain 11 characters" in {
        "Hello world" must have size(11)
      }
      "start with 'Hello'" in {
        "Hello world" must startWith("Hello")
      }
      "end with 'world'" in {
        "Hello world" must endWith("world")
      }
    }
  } 
```

如果您使用的是验收风格测试，只需在定义中添加顺序`is`

```
 import org.specs2._

  class HelloWorldSpec extends Specification { def is =

    sequential                                                      ^
    "This is a specification to check the 'Hello world' string"     ^
                                                                    p^
    "The 'Hello world' string should"                               ^
      "contain 11 characters"                                       ! e1^
      "start with 'Hello'"                                          ! e2^
      "end with 'world'"                                            ! e3^
                                                                    end

    def e1 = "Hello world" must have size(11)
    def e2 = "Hello world" must startWith("Hello")
    def e3 = "Hello world" must endWith("world")
  } 
```

*作为旁注*，您可能会从软件中的错误中获得堆栈溢出错误，而不是测试太长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T10:52:48.917

```
class UsersSpec extends Specification with BeforeAll with Before {
  def is = sequential ^ s2"""

  We can create in the database
    create a user                                    $create
    list all users                                   $list
                                                     """
  import DB._

  def create = {
    val id = db.createUser("me")
    db.getUser(id).name must_== "me"
  }

  def list = {
    List("me", "you").foreach(db.createUser)
    db.listAllUsers.map(_.name).toSet must_== Set("me", "you")
  }

  // create a database before running anything
  def beforeAll = createDatabase(databaseUrl)
  // remove all data before running an example
  def before = cleanDatabase(databaseUrl) 
```

愿它对你有帮助！

# css - 有没有办法只使用 CSS 沿着滚动条跳转？

> ID：13458196
> 
> 赞同：0
> 
> 时间：2012-11-19T16:37:03.103
> 
> 标签：css

假设我有以下标记和 CSS：

HTML：

```
<div id="Container">
  <div id="Content">
    [* some text *]
  </div>
</div> 
```

CSS：

```
#Container {
  height: 400px;
  overflow: scroll;
}

#Content {
  height: 800px;
} 
```

显然，这种设置调用滚动条可能向下滚动 400 像素。为了更好地理解，我创建了一个[**jsFiddle**](http://jsfiddle.net/r6vn7/1)。

**有没有办法只通过 CSS 跳转到第二段？**

我添加了一个 javascript 命令来演示我想要实现的目标。只需取消注释并运行它。

到目前为止，我尝试了两件事，但在这两种情况下，我都无法再向上滚动：

*   `margin-top`将内部 div 容器的属性设置为`-180px`
*   将内部 div 容器设置为`position: absolute`and`top: -180px`

*注意：我不关心段落或任何内容。这只是一个例子。我想跳到任意位置。*

**编辑：**

锚标签不是一种选择。我不想用不必要的标签淹没我的标记。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:40:14.870

不起眼的“a”标签怎么样？

```
 <a href="#one">jump to one</a>
   <a href="#two">jump to two</a>

   <a name="one">this is one</a>
   <a name="two">this is two</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:42:00.840

不是使用 CSS，而是使用标准的 HTML/锚。

[http://jsfiddle.net/r6vn7/3/](http://jsfiddle.net/r6vn7/3/)

`<a href="#p2">paragraph 2</a>`

给你的段落一个 ID 并使用 URL 哈希来说明去哪里。我以锚点为例，如何让它跳转到第二段。

# php - PHP计数器：输出列表中的反向数字

> ID：13458197
> 
> 赞同：1
> 
> 时间：2012-11-19T16:37:03.113
> 
> 标签：php, wordpress

我实际上有一个 PHP 循环，我给每个结果一个数字，从 1 开始并按升序跟进。输出如下：

1) C 条
2) B 条
3) A 条

...但我想颠倒*列表*编号，所以我得到如下信息：

3) 文章 C (文章的顺序不会改变，它们是按日期递减的)
2) 文章 B
1) 文章 A

这是我当前的循环：

```
<?php
if (have_posts()) :
$counter = 1;
   while (have_posts()) :
      the_post(); ?>

    <div>
        <span class="count"><?php echo $counter; ?></span>
        <?php the_title(); ?>
    </div>

<?php
$counter++;
   endwhile;
endif;
?> 
```

是否有捷径可寻？非常感谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:46:20.050

WP_Query[对象有一个保存帖子数量的变量](http://codex.wordpress.org/Class_Reference/WP_Query#Properties)：

```
$query->post_count 
```

所以你的代码可以变成：

```
<?php
if (have_posts()) :
   global $wp_query;
   $counter = $wp_query->post_count;
   while (have_posts()) :
      the_post(); ?>

    <div>
        <span class="count"><?php echo $counter; ?></span>
        <?php the_title(); ?>
    </div>

<?php
      --$counter;
   endwhile;
endif;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:40:34.083

如果有一个函数返回帖子数，例如`count_posts()`（只是猜测），请以这种方式使用它：

```
<?php
if (have_posts()) :
   $counter = wp_count_posts();
   while (have_posts()) :
      the_post(); ?>

    <div>
        <span class="count"><?php echo $counter; ?></span>
        <?php the_title(); ?>
    </div>

<?php
$counter--;
   endwhile;
endif;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:41:21.880

如果这是一个基于 wordpress 的站点/页面，并且该功能的帖子与 wordpress 功能相关：

使用 query_posts 之类的内容可能会更好：http: [//codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

哪个可以让您更好地控制帖子的显示？

编辑：或者，如果你使用这个：

```
$count_posts = wp_count_posts(); 
```

您可以通过反转您的计数器 ($counter--;) 将其与其他答案一起使用

这应该够了吧

[http://codex.wordpress.org/Function_Reference/wp_count_posts](http://codex.wordpress.org/Function_Reference/wp_count_posts)

# android - 异步任务锁定数据库

> ID：13458201
> 
> 赞同：2
> 
> 时间：2012-11-19T16:37:21.470
> 
> 标签：android, sqlite, android-asynctask

我正在尝试在我的应用程序中使用与 WebService 进行事件同步的自定义日历。

一切都很好（嗯，不是真的）。

Calendar Activity 启动一个`AsyncTask`以便获取当前月份事件并将它们存储在数据库中，并且该`onPostExecute`方法更新视图以正确标记每一天。

我的问题是当用户进入日历活动然后快速回到主要活动几次时，比如说

`Main Activity`> `Calendar Activity`（按返回按​​钮）> `Main Activity`> `Calendar Activity`（按返回按​​钮）> ...

此时 Activity 由于 a`database lock has not been available for 30 sec.`或 App 因 a 而死机`SQLiteConstraintException: error code 19`

> *编辑*：`SQLiteConstraintException`行为不再发生

因为更新在我的应用程序中**非常重要**，所以每次我重新进入日历活动时，我都会删除数据库并用服务器新数据重新填充它，即使它是相同的，此时也是锁定的位置。

> *编辑*：
> 
> 我已将`Delete > Insert`样式更改为： `Update`所有数据（设置`flag`列 = 0）>`Insert`新数据（设置`flag`列 = 1）> `Delete`（其中`flag`列 = 0）

我已经尝试过[这个](https://stackoverflow.com/questions/13335669/terminating-an-async-task-after-activity-is-lost)解决方案来取消`AsyncTask`活动完成但没有成功

我确信问题是我不**完全**理解我正在做的事情的过程，所以我错过了一些非常重要（或基本）的东西。

任何帮助改进我的代码或只是指出我正确的方向，将不胜感激。

提前致谢！

> *编辑*：
> 
> 我的应用程序有一个负责`Aplication`创建单个数据库连接（`getWriteableDatabase();``MyApp.getDatabase();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:14:15.937

尝试序列化对您的数据库的访问。SQLiteDatabase 的每个实例都代表一个到 SQLite DB 的单独链接。在单个 SQLiteDatabase 实例上执行的操作是序列化的，但是当您在多个线程中处理多个 SQLiteDatabase 实例时，就会出现您描述的错误。

您没有发布任何代码，所以我只是假设您每次访问 AsyncTasks 中的数据库时都会获得一个新的 SQLiteDatabase 实例（使用 .getWriteableDatabase() / .getReadableDatabase()）。尝试使用单个 SQLiteDatabase 实例并将其传递给任务。这样，您将序列化数据库访问并避免 AsyncTask 线程争夺数据库锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:24:01.580

> 主要活动 > 日历活动（按返回按​​钮）> 主要活动 > 日历活动（按返回按​​钮）> ...

`AsyncTask`每次打开日历时，这可能会创建并开始一个新的。

`AsyncTask`如果您不明确取消它，每个仍然会运行。

这取决于您用来执行`AsyncTask`它们的 Android 版本/执行器，它们是并行运行还是序列化运行。>= Honeycomb 的默认行为是串行执行。[在文档](http://developer.android.com/reference/android/os/AsyncTask.html)*中的执行顺序*部分进行了解释。[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

如果您使用串行 AsyncTask，您可以将几个（旧）任务排队，并且在执行最近的任务之前可能需要相当长的时间。离开活动时取消任务可能是个好主意。

您收到的`database lock has not been available for 30 sec.`警告表明您在一个线程中写入并尝试同时从另一个线程访问数据库。不确定这是否需要两个并行写入线程。

问题不在于使用不同的`SQLiteDatabase`实例。我认为如果你这样做，你会得到错误而不是警告，因为 Android 无法检查某些随机 SQLiteDatabase 对象是否在数据库上有写锁。

那么你能做什么：我假设你使用事务，因为在没有事务的情况下长时间锁定数据库几乎是不可能的。

*   将事务的大小限制在一定数量，这样可以保证在其他线程之间使用数据库。
*   使用动态停止事务`db.yieldIfContendedSafely()`。这将检查另一个线程是否想要访问数据库并暂时结束事务。缺点：它将提交更改，您无法回滚整个事务。
*   按照预写日志文档中提到的[`SQLiteDatabase#enableWriteAheadLogging()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#enableWriteAheadLogging%28%29)&进行实验。`beginTransactionNonExclusive()`看起来它可以允许多线程访问而不会出现锁定问题。我还没有进一步调查这是否有效以及它有什么副作用。

# python - Python：如何在不适当关闭套接字的情况下突然断开套接字

> ID：13458206
> 
> 赞同：16
> 
> 时间：2012-11-19T16:37:48.653
> 
> 标签：python, sockets

我有一个 Python 测试程序，用于测试另一个软件组件的功能，我们将后者称为被测组件 (COT)。Python 测试程序通过持久的 TCP 连接连接到 COT。Python 程序为此使用 Python 套接字 API。现在为了模拟物理链接的故障，我想让 Python 程序关闭套接字，但没有适当地断开连接。即我不想再在 TCP 通道上发送任何东西，包括任何 TCP `SYN`/ `ACK`/ `FIN`。我只是想让插座安静下来。它必须不再响应远程数据包。

这并不像看起来那么容易，因为调用`close`套接字会将 TCP`FIN`数据包发送到远程端。（优雅断开连接）。那么我怎样才能在不发送任何数据包的情况下杀死套接字呢？

我无法关闭 Python 程序本身，因为它需要维护与其他组件的其他连接。有关信息，套接字在单独的线程中运行。所以我想到了突然杀死线程，但这也不是那么容易。（[有什么方法可以杀死 Python 中的线程吗？](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)）

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T16:56:46.213

您不能从用户态进程执行此操作，因为内核网络堆栈仍然保存与给定 TCP 连接相关的资源和状态。如果您杀死整个进程，内核将向`FIN`另一端发送一个事件，因为它知道您的进程具有哪些文件描述符，并会尝试正确清理它们。

解决此问题的一种方法是使用防火墙软件（在本地或中间机器上）。调用一个脚本，告诉防火墙丢弃来自给定 IP 和端口的所有数据包（这当然需要适当的管理权限）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T22:07:34.257

与 Nikolai 的回答相反，确实有一种方法可以从用户态重置连接，以便发送 RST 并丢弃待处理的数据，而不是在所有待处理数据之后发送 FIN。但是由于它被滥用而不是被使用，我不会在这里发布它。而且我不知道它是否可以从Python中完成。设置三种可能的 SO_LINGER 配置之一并关闭即可。我不会说更多，我会说这种技术只能用于问题中概述的目的。

# c# - ping 一段时间

> ID：13458210
> 
> 赞同：1
> 
> 时间：2012-11-19T16:38:04.517
> 
> 标签：c#, time

我有一个 Windows 窗体应用程序，它基本上 ping 一个 ip，然后返回一个带有工具提示的图像，该工具提示显示该 ip 的 rtt。

我想要做的是每 20 秒对 ip 进行一次 ping 表单，以便表单和图像发生变化。如果我能让它工作，那么我想知道如何存储 4 个 rtt，然后在工具提示中显示 4 个的平均值。

到目前为止，表格只ping了一次，我玩过一个计时器，但我真的不知道我在做什么。到目前为止，这是我的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net.NetworkInformation;
using System.ServiceProcess;
using System.Threading;
using System.ComponentModel;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void Form1_Load(object sender, EventArgs e)
        {
            Ping pingClass = new Ping();
            PingReply pingReply = pingClass.Send("10.209.123.123");
            label4.Text = (pingReply.RoundtripTime.ToString());
            //+ "ms");
            label5.Text = (pingReply.Status.ToString());

            if (Convert.ToInt32(label4.Text) > 0 && Convert.ToInt32(label4.Text) < 100)
                this.pictureBox1.Load("greenLAT.png");

            if (Convert.ToInt32(label4.Text) > 100 && Convert.ToInt32(label4.Text) < 200)
                this.pictureBox1.Load("yellowLAT.png");

            if (Convert.ToInt32(label4.Text) > 200 && Convert.ToInt32(label4.Text) < 1000)
                this.pictureBox1.Load("redLAT.png");

            ToolTip tt = new ToolTip();
            tt.SetToolTip(this.pictureBox1, "Your current network delay is " + label4.Text + "ms");

            timer1.Interval = 1000;
            timer1.Tick += new EventHandler(timer1_Tick);
            timer1.Start();

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            //MessageBox.Show("Timeout!");
            Refresh();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:48:00.127

尝试这个：

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.Globalization;
using System.Net;
using System.Windows.Forms;
using System.Net.NetworkInformation;

namespace DXWindowsApplication4
{
    public partial class Form2 : Form
    {
        private readonly Timer _timer;
        private readonly Ping _pingClass;
        private readonly IPAddress _ipAddress;
        private readonly int _timeout;

        private Image _greenImage; 
        private Image _yellowImage; 
        private Image _redImage; 

        private int _pingCount;
        private long _avgRtt;

        public Form2()
        {
            InitializeComponent();
            IPAddress.TryParse("98.138.253.109", out _ipAddress); // yahoo.com Ip address
            _timer = new Timer();
            _timeout = 3000;
            _pingClass = new Ping();
            _pingClass.PingCompleted += PingClassPingCompleted;
        }

        void PingClassPingCompleted(object sender, PingCompletedEventArgs e)
        {
            RefreshPing(e.Reply);
        }

        public void FormLoad(object sender, EventArgs e)
        {
            _timer.Tick += TimerTick;
            _timer.Interval = 4000;
            _timer.Start();
        }

        private void TimerTick(object sender, EventArgs e)
        {
            _pingClass.SendAsync(_ipAddress, _timeout);
        }

        private void RefreshPing(PingReply pingReply)
        {
            label4.Text = (pingReply.RoundtripTime.ToString(CultureInfo.InstalledUICulture));
            label5.Text = (pingReply.Status.ToString());

            _avgRtt = (_avgRtt * _pingCount++ + pingReply.RoundtripTime)/_pingCount;

            if (Convert.ToInt32(label4.Text) > 0 && Convert.ToInt32(label4.Text) < 100)
            {
                SetImage(pictureBox1, Images.Green);
            }

            if (Convert.ToInt32(label4.Text) > 100 && Convert.ToInt32(label4.Text) < 200)
            {
                SetImage(pictureBox1, Images.Yellow);
            }

            if (Convert.ToInt32(label4.Text) > 200 && Convert.ToInt32(label4.Text) < 1000)
            {
                SetImage(pictureBox1, Images.Red);
            }

            ToolTip tt = new ToolTip();
            tt.SetToolTip(pictureBox1, "Your average network delay is " + _avgRtt + "ms");
            Refresh();
        }

        private void SetImage(PictureBox pBox, Images images)
        {
            switch (images)
            {
                case Images.Green:
                    if (_greenImage == null)
                    {
                        _greenImage = new Bitmap("greenImage.png");
                    }

                    pictureBox1.Image = _greenImage;
                    break;
                case Images.Yellow:
                    if (_greenImage == null)
                    {
                        _yellowImage = new Bitmap("yellowImage.png");
                    }

                    pictureBox1.Image = _yellowImage;
                    break;
                case Images.Red:
                    if (_redImage == null)
                    {
                        _redImage = new Bitmap("redImage.png");
                    }

                    pictureBox1.Image = _greenImage;
                    break;
                default:
                    throw new InvalidEnumArgumentException("invalid enum name");
            }
        }
    }

    internal enum Images
    {
        Green,
        Yellow,
        Red
    }
} 
```

# wpf - 将 TextBox.TextProperty 绑定到模型中的 Binding 类型的属性

> ID：13458211
> 
> 赞同：0
> 
> 时间：2012-11-19T16:38:06.040
> 
> 标签：wpf, mvvm

我有一个我想与模型绑定的命令按钮列表（带输入）。问题是我希望按钮中的文本框绑定到某个地方（请参阅视图模型）。

以下代码是我尝试过但失败的代码。是否（甚至）可以在模型上设置绑定然后将其绑定到控件？

或者换句话说，我是否试图以愚蠢的方式做某事？

看法：

```
<ToolBar Grid.Row="1" Grid.ColumnSpan="2" Grid.Column="0" ItemsSource="{Binding SelectedTab.Commands}" Height="34">
    <ToolBar.Resources>
        <DataTemplate DataType="{x:Type model:ZoekCommandButtons}">
            <Button Command="{Binding Command}" ToolTip="{Binding Tooltip}" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
                <StackPanel Orientation="Horizontal">
                    <Image Source="{Binding Image, Converter={StaticResource ImageConv}}" Height="16" Width="16"></Image>
                    **<TextBox Width="100" Text="{Binding Text}">**
                        <TextBox.InputBindings>
                            <KeyBinding Gesture="Enter" Command="{Binding Command}"></KeyBinding>
                        </TextBox.InputBindings>
                    </TextBox>
                </StackPanel>
            </Button>
        </DataTemplate>
    </ToolBar.Resources>
</ToolBar> 
```

模型：

```
 public class ZoekCommandButtons : BaseModel, ICommandItem
    {
        private string _header;
        private string _image;
        private bool _isEnabled;
        private Visibility _isVisible;
        private ICommand _command;
        private string _tooltip;
        private Binding _text;

        public Binding Text
        {
            get { return _text; }
            set { _text = value; OnPropertyChanged("Text"); }
        }
(etc) 
```

视图模型：

```
 Commands.Add(new ZoekCommandButtons()
    {
        Image = "search.png",
        IsEnabled = true,
        **Text = new Binding { RelativeSource = new RelativeSource(RelativeSourceMode.FindAncestor, typeof(UserControl), 1), Path = new PropertyPath("FilterText") },**
        Command = FilterCommand,
        Tooltip = "Zoeken",
        Header = "Zoeken"
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:27:33.393

首先，我*不*建议公开`Binding`为 ViewModel 属性；在这种特殊情况下，对我来说听起来更像是您嵌套了 ViewModel，并且这种方法会更合适 - 也就是说，您有一个`MamaViewModel`具有您的“ `Commands`”属性的“”，而该属性又是一个“”的集合`CommandButtonViewModels`。 ..

好的，也就是说……您*可以*这样做，尽管我必须重申您可能不应该*这样*做；您缺少的是“评估绑定的东西”以提供值。这是一个为您提供的课程：

```
public static class BindingEvaluator
{
    // need a DP to set the binding to
    private static readonly DependencyProperty PlaceholderProperty = 
        DependencyProperty.RegisterAttached("Placeholder", typeof(object), typeof(DependencyObject), new UIPropertyMetadata(null));

    // Evaluate a binding by attaching it to a dummy object/property and evaluating the property value
    public static object Evaluate(Binding binding)
    {
        var throwaway = new DependencyObject();
        BindingOperations.SetBinding(throwaway, PlaceholderProperty, binding);
        var retVal = throwaway.GetValue(PlaceholderProperty);
        return retVal;
    }
} 
```

这与 ViewModel 定义相结合，例如：

```
public class DontDoThisViewModel
{
    public Binding TextBinding {get; set;}
    public string Text 
    {
        get 
        {
            return BindingEvaluator.Evaluate(TextBinding) as string;
        }
    }
} 
```

*应该*可以工作...这是我在 LINQPad 中拼凑的一个测试应用程序：

```
void Main()
{
    var wnd = new Window() { Title = "My window" };
    var text = new TextBlock();
    text.Text = "Hopefully this shows the window title...";
    text.SetBinding(TextBlock.TextProperty, new Binding("Text"));
    wnd.Content = text;
    var vm = new ViewModel();
    var vmBinding = new Binding("Title");
    vmBinding.Source = wnd;
    vm.TextBinding = vmBinding;
    wnd.DataContext = vm;
    wnd.Show();
} 
```

再次，我必须强烈建议你*不*要这样做......但我很好奇，所以我必须想出一个办法。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:53:39.403

好的。我没有想清楚。

将模型中的 Text 属性更改为字符串并使用此属性处理命令。

（虽然以某种方式在模型上设置绑定会很好......）

# jquery - 在 JQuery 中创建移动嘴

> ID：13458215
> 
> 赞同：0
> 
> 时间：2012-11-19T16:38:23.987
> 
> 标签：jquery, animation

我如何创建一个在某些事件上打开和关闭的嘴（比如单击一个按钮）为了简单起见，假设嘴就像一个屏幕咀嚼器。

问题：

1.  我需要把上下颚放在中间的某个地方。如何让两者同时移动？

2.  当牙齿合在一起时，下巴（屏幕咀嚼器的左右边界）会发生什么？如果我不让它们自动调整大小，当下巴闭合时它们会超过下颚。如何让它们自动调整大小？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-19T16:45:05.720

您可以尝试制作复杂的 css 以使牙齿和下巴可以由具有背景的 div 制成。然后可以使用 jquery 为 css 设置动画，但我会说仅使用 jquery 是一项非常困难的任务。这是 jquery animate 函数的链接。

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

[http://docs.jquery.com/Effects/animate](http://docs.jquery.com/Effects/animate)

# ios - 如果存在返回什么

> ID：13458222
> 
> 赞同：1
> 
> 时间：2012-11-19T16:38:49.113
> 
> 标签：ios, sql, sqlite

我正在使用 sqlite3 作为 ios 项目的数据库，并希望执行 if exists 语句以查看对象是否存在，如果存在，则更新或插入。

我正在使用这个函数来查询数据库

```
-(void)updateStatus:(NSString *)queryString {
    NSString    *docsDir;
    NSArray     *dirPaths;
    dirPaths    = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir     = [dirPaths objectAtIndex:0];
    m_singleton = [Singleton sharedSingleton];

    strDatabasePath         = [NSString stringWithString:[docsDir stringByAppendingPathComponent:@"BorneoMotors.db"]];
    NSFileManager *filemgr  = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: strDatabasePath] == YES)
    {
        const char *dbpath = [strDatabasePath UTF8String];
        if (sqlite3_open(dbpath, &sqlDatabase) == SQLITE_OK)
        {
            const char* beginString = "BEGIN;";
            sqlite3_stmt *compiledstatement;
            sqlite3_prepare_v2(sqlDatabase, beginString, -1, &compiledstatement, NULL);
            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else NSLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            NSLog(@"QUERY : %@",queryString);

            const char *selectStatement = [queryString UTF8String];

            sqlite3_prepare_v2(sqlDatabase, selectStatement, -1, &compiledstatement, NULL);
            //sqlite3_bind_text(compiledstatement,1,[statusString UTF8String],-1,SQLITE_TRANSIENT);

            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else NSLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            const char* endString="END;";
            sqlite3_prepare_v2(sqlDatabase, endString, -1, &compiledstatement, NULL);
            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else NSLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            sqlite3_close(sqlDatabase);
        }
        else NSLog(@"Failed to open table");
    }

} 
```

我遇到的问题是，如果存在的话，它会返回什么，我该如何继续前进。

```
NSString *checkstring = [NSString stringWithFormat:@"IF EXISTS (SELECT * FROM DATABASE WHERE id = %@",cars.ID];
                    DB *accessdb = [[DB alloc] init];
                    [accessdb updateStatus:checkstring];
                    if (??){
                        NSString *queryString = [NSString stringWithFormat: @"UPDATE DATABASE SET STATUS='%@' WHERE \"DATABASEID\" = '%@'", cars.status,cars.ID];
                        const char *selectStatement = [queryString UTF8String];

                        sqlite3_prepare_v2(sqlDatabase, selectStatement, -1, &statement, NULL);
                        //sqlite3_bind_text(compiledstatement,1,[statusString UTF8String],-1,SQLITE_TRANSIENT);

                        if (sqlite3_step(statement) == SQLITE_DONE) {}
                        else NSLog(@"Failed!");
                        sqlite3_finalize(statement);
                    }else{
                        insert} 
```

如何检查对象是否存在？if exists 返回什么？需要一些指导...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:53:57.777

SQLite 没有`IF`语句。

要检查是否存在某些记录，只需执行如下查询

```
SELECT 1 FROM database WHERE ID = ? 
```

并在您的应用程序中测试您是否获得记录。

对于您的更新/插入问题：如果您在键列上有唯一索引，则可以使用该[`INSERT OR REPLACE`命令](http://www.sqlite.org/lang_insert.html)自动删除旧记录，如果新记录会创建重复记录。

# java - Java 中不可编辑的 ParagraphViews

> ID：13458223
> 
> 赞同：1
> 
> 时间：2012-11-19T16:38:50.053
> 
> 标签：java

我想要一个文档编辑器，其中某些文档行不可编辑、不可点击等。

我目前正在为我的编辑器和 DefaultStyledDocument 和 LeafElement、StyledEditorKit 和 ParagraphView 的扩展使用 JTextPane，以将文档文本解析为适当的元素并将它们分配给 ParagraphView 的适当扩展。到目前为止，一切都很美好。

那么下一步该怎么走呢？如何指定和强制某些扩展的 ParagraphViews 是“只读的”？我目前的方法是在 Leaf 和 Section ParagraphViews 中覆盖 getNextVisualPositionFrom 以防止箭头键将光标移动到受限制的 ParagraphView 中，但必须单独处理防止鼠标在受限制的 ParagraphView 内单击。

有没有更简单、更全面的方法呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:12:00.207

经过更多研究，似乎更适合的另一种方法是对不可编辑的视图使用 ComponentView，而不是 ParagraphView。然后我可以在 ComponentView 的 createComponent() 方法中使用像 JTextArea 这样简单的东西，并将 setEditable 设置为 false。

它会自动忽略该视图中的鼠标单击。我仍然必须包含我的代码，以便在用户按下上、下、左、右时很好地跳过视图上的插入符号。否则，插入符号将在底层模型文本中不可见地移动。我还必须通过受保护的视图防止退格。即使视图是不可编辑的，下面的模型数据仍然会受到用户的影响。

# html - 在方向更改时加载不同媒体的最佳实践

> ID：13458226
> 
> 赞同：1
> 
> 时间：2012-11-19T16:38:57.790
> 
> 标签：html, mobile, responsive-design, frontend

我在这个主题上做了很多谷歌搜索，但我找不到任何有用的东西。

我的任务是根据我的设计团队提出的设计创建一个移动网站。他们提出的功能之一是根据设备的方向拥有不同版本的图像。因此，对于他们想要对您执行此操作的每个图像，您都有两个版本：

```
image1Portrait.jpg
image1Landscape.jpg 
```

我正在考虑将这两个图像组合成一个本质上是 Sprite-esk 的图像。当 onorientationchange 事件触发时，我会更改 css，图像基本上会移动并显示正确的版本。

我的另一个选择是简单地将图像源换成横向版本。我不赞成这样做，因为您将不得不等待它下载。

我的问题是：有没有做这种事情的最佳实践？就像我说的，我一直在谷歌搜索，但我没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:42:21.683

媒体查询是您需要的：

```
/* Portrait */
@media screen and (orientation:portrait) {
  /* Portrait styles */
}

/* Landscape */
@media screen and (orientation:landscape) {
  /* Landscape styles */
} 
```

# java - 如何以 Logbacks 的 HTML 格式输出亚洲字符

> ID：13458228
> 
> 赞同：1
> 
> 时间：2012-11-19T16:39:03.063
> 
> 标签：java, logback

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:58:49.720

为了使 logback html 文件正确显示，必须在需要`font-family: 'lucida sans unicode', tahoma, arial, helvetica, sans-serif;`的地方指定自定义 CSS（或类似字体）。例如，我将它设置为`TR.even`和`TR.odd`类。

顺便说一句，事实证明 eclipse 在这些字符集方面存在问题。即使有简单的例子，我也无法让亚洲字符打印句号，例如

`Locale locale = new Locale("zh", "CN"); System.out.println(locale.getDisplayLanguage(Locale.SIMPLIFIED_CHINESE));`

我在 NetBeans 中运行了相同的代码，它完美地输出。

在 Eclipse 的情况下，我尽可能通过系统首选项将编码更改为 UTF-8，并将默认字体设置为上述没有分辨率的字体。我什至下载了一个新的 eclipse 副本，将其解压缩到一个新目录并创建一个新工作区，然后将所有内容设置为 UTF-8/更改字体，然后创建一个测试用例，再次没有解决方案。对于 NetBeans，不需要进行任何更改。

- 编辑 -

另请注意，这似乎只是一个 Windows 问题——我的家用开发机器是 Linux，它完美地运行了上述代码，没有更改偏好并使用新安装的 Eclipse。

# haskell - 使用 Haskell 删除字符串中的第一个空格

> ID：13458231
> 
> 赞同：1
> 
> 时间：2012-11-19T16:39:26.410
> 
> 标签：haskell

如何在 Haskell 中删除字符串的第一个空格？

例如：

```
removeSpace " hello" = "hello"

removeSpace "  hello" = " hello"

removeSpace "hello" = "hello" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T21:24:30.163

这里有多个删除空间选项，以显示一些功能和做事方式。

要占用多个空格，您可以执行

```
removeSpaces = dropWhile (==' ') 
```

这意味着与 相同`removeSpaces xs = dropWhile (==' ') xs`，但使用部分应用程序（`(==' ')`本质上也是如此）。

或更一般的删除，

```
import Data.Char
removeWhitespace = dropWhile isSpace 
```

如果您真的确定只想占用一个空格（而且您似乎确实如此），那么模式匹配是最清晰的：

```
removeASpace (' ':xs) = xs  -- if it starts with a space, miss that out.
removeASpace xs = xs        -- otherwise just leave the string alone 
```

这是有效的，因为在 haskell 中，`String = [Char]`并且`(x:xs)`意味着以 list 开头`x`并继续的列表`xs`。

要删除一个空格字符，我们可以使用函数保护（如果语法非常简单的 if 语句，如果你还没有遇到过的话）：

```
removeAWhitespace "" = ""  -- base case of empty string
removeAWhitespace (x:xs) | isSpace x = xs   -- if it's whitespace, omit it
                         | otherwise = x:xs -- if it's not keep it. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T16:41:09.790

只需使用模式匹配：

```
removeSpace (' ':xs) = xs
removeSpace xs = xs 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T10:34:59.700

在 Haskell 中，字符串只是字符的列表，即 Prelude 定义

```
type String = [Char] 
```

此外，大约有三种方法可以编写函数：

1.  使用您可以使用的两个最基本的工具完全自己滚动：模式匹配和递归；
2.  巧妙结合一些已经写好的函数；而且当然
3.  这些的混合。

如果您是 Haskell 和函数式编程的新手，我建议您使用第一种方法编写大部分函数，​​然后逐渐转向使用越来越多的预定义函数。

对于您的问题 - 删除`' '`字符串中的第一个空格字符 ( ) - 模式匹配和递归实际上很有意义。如前所述，字符串只是字符列表，所以我们最终只会得到一个简单的列表遍历。

让我们首先为您的函数写一个签名：

```
removeSpace :: [Char] -> [Char] 
```

（我已经写`[Char]`了而不是`String`明确表示我们在这里执行列表遍历。）

与列表进行模式匹配时，我们需要考虑两种情况：列表为空 ( `[]`) 以及由头部元素后跟尾部 ( `c : cs`) 组成的列表。

与往常一样，处理空列表很简单：没有剩余字符，所以没有什么要删除的，我们只需返回空列表。

```
removeSpace [] = [] 
```

然后是我们有一个头部元素（一个字符）和一个尾部列表的情况。这里我们需要再次区分两种情况：头部字符是空格的情况和其他任何字符的情况。

如果头部字符是空格，它将是我们遇到的第一个空格，我们需要将其删除。由于我们只需要删除第一个空格，我们可以返回列表的其余部分（即尾部）而无需进一步处理：

```
removeSpace (' ' : cs) = cs 
```

剩下的就是处理头部字符不是空格的情况。然后我们需要将它保留在返回的列表中，此外，我们需要继续在列表的其余部分中寻找第一个空间；也就是说，我们需要递归地将我们的函数应用于尾部：

```
removeSpace (c : cs) = c : removeSpace cs 
```

就这样。我们函数的完整定义现在为

```
removeSpace :: [Char]     -> [Char]
removeSpace    []         =  []
removeSpace    (' ' : cs) =  cs
removeSpace    (c   : cs) =  c : removeSpace cs 
```

可以说，这是一个清晰简洁的定义，就像任何预定义函数的巧妙组合一样。

最后，让我们测试一下我们的函数：

```
> removeSpace " hello"
"hello"

> removeSpace "  hello"
" hello"

> removeSpace "hello"
"hello" 
```

如果你真的想用预定义的函数构造你的函数，这里有一个替代定义`removeSpace`可以解决问题：

```
removeSpace :: [Char] -> [Char]    
removeSpace =  uncurry (flip (flip (++) . drop 1)) . break (== ' ') 
```

（您可以看到为什么我更喜欢使用显式模式匹配和递归的那个。;-)）

**注意：** *我假设您的目标确实是删除字符串中的第一个空格，无论第一个空格出现在哪里。在您给出的示例中，第一个空格始终是字符串中的第一个字符。如果总是这样，即，如果你只是在删除前导空格之后，你可以省略递归并简单地写*

```
removeSpace :: [Char]     -> [Char]
removeSpace    []         =  []
removeSpace    (' ' : cs) =  cs
removeSpace    (c   : cs) =  c : cs 
```

*或者，结合第一个和最后一个案例，*

```
removeSpace :: [Char]     -> [Char]
removeSpace    (' ' : cs) =  cs
removeSpace    cs         =  cs 
```

*或者，使用预定义的函数，*

```
removeSpace :: [Char] -> [Char]
removeSpace =  uncurry ((++) . drop 1) . span (== ' ') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:31:59.027

要删除字符串中任意位置的第一个空格：

```
removeSpace :: String -> String
removeSpace = (\(xs,ys) -> xs ++ drop 1 ys) . span (/=' ') 
```

Where`span`抓取字符，直到找到空格或到达字符串的末尾。

然后它拆分结果并将它们放入我们获取并组合的元组中，跳过第二个列表中的第一个字符（空格）。此外，我们断言余数不是`null`（空列表） - 如果是，我们不能得到尾部，因为空列表不能有尾部，可以吗？所以如果是，我们只返回一个空列表。

# maven - 无法在存储库中心 (http://repo1.maven.org/maven2) 中找到资源 'org.apache.maven.plugins:maven-dependency-plugin:pom:2.0'

> ID：13458246
> 
> 赞同：3
> 
> 时间：2012-11-19T16:40:33.623
> 
> 标签：maven, plugins, download, maven-dependency-plugin

我正在尝试将我的 POM.XML 移动到 linux 构建环境中，maven-dependency-plugin 没有被下载。我也检查了代理设置。除此插件外，其他插件、依赖项均已解决，没有任何问题。我正在使用 Maven 2.2.1

下面是 pom.xml 和错误消息。

**谁能帮我解决这个问题？**

```
POM.XML:

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>NBC</groupId>
    <artifactId>CIR</artifactId>
    <packaging>jar</packaging>
    <version>1.0</version>
    <name>cirjob-batch</name>
    <url>http://maven.apache.org</url>
    <issueManagement>
        <system>JIRA</system>
        <url>http://usaoaapld311lb.nbcuni.ge.com:8080</url>
    </issueManagement>
    <ciManagement>
        <system>Bamboo</system>
        <!--<url>http://usaoaapwd189:8085</url> -->
        <url>http://usaoaapld311la.nbcuni.ge.com:8085</url>
    </ciManagement>
    <scm>
        <url>svn://usaoaapld311lb.nbcuni.ge.com:3690/CIR</url>
    </scm>
    <!-- Fisheye/Crucible http://usaoaapwd189:8060 -->

    <organization>
        <name>NBC</name>
        <url>NBC.COM</url>
    </organization>

    <repositories>
        <repository>
            <id>Sonatype</id>
            <url>https://oss.sonatype.org/content/repositories/springsource-releases</url>
        </repository>
        <repository>
            <id>JBoss</id>
            <url>https://repository.jboss.org/nexus/content/repositories</url>
        </repository>
        <repository>
            <id>Java.net</id>
            <url>http://download.java.net/maven/2/</url>
        </repository>
    </repositories>

    <dependencies>

        <!-- Velocity -->
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity</artifactId>
            <version>1.6.2</version>
        </dependency>

        <!-- Oracle -->
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc14</artifactId>
            <version>10.2.0.4.0</version>
        </dependency>

        <!-- Crystal Support -->
        <dependency>
            <groupId>com.crystaldecisions</groupId>
            <artifactId>CrystalReportsRuntime</artifactId>
            <version>${com.crystaldecisions.version}</version>
        </dependency>

        <dependency>
            <groupId>com.crystaldecisions</groupId>
            <artifactId>CrystalCommon2</artifactId>
            <version>${com.crystaldecisions.version}</version>
        </dependency>

        <dependency>
            <groupId>com.crystaldecisions</groupId>
            <artifactId>DatabaseConnectors</artifactId>
            <version>${com.crystaldecisions.version}</version>
        </dependency>

        <dependency>
            <groupId>com.crystaldecisions</groupId>
            <artifactId>QueryBuilder</artifactId>
            <version>${com.crystaldecisions.version}</version>
        </dependency>

        <dependency>
            <groupId>com.crystaldecisions</groupId>
            <artifactId>jrcerom</artifactId>
            <version>${com.crystaldecisions.version}</version>
        </dependency>

        <dependency>
            <groupId>com.crystaldecisions</groupId>
            <artifactId>keycodeDecoder</artifactId>
            <version>${com.crystaldecisions.version}</version>
        </dependency>

        <dependency>
            <groupId>com.businessobjects</groupId>
            <artifactId>logging</artifactId>
            <version>${com.businessobjects.version}</version>
        </dependency>

        <dependency>
            <groupId>com.businessobjects</groupId>
            <artifactId>JDBInterface</artifactId>
            <version>${com.businessobjects.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache</groupId>
            <artifactId>commons-configuration</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>com.ibm</groupId>
            <artifactId>icu4j</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>com.azalea</groupId>
            <artifactId>com.azalea.ufl.barcode</artifactId>
            <version>1.0</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.1</version>
        </dependency>

        <!-- Junit tests -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <!-- Old Servlets -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <!-- Tomcat not having jstl lib -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- <dependency> <groupId>org.springframework</groupId> <artifactId>spring-context-support</artifactId> 
            <version>${org.springframework.version}</version> </dependency> <dependency> 
            <groupId>opensymphony</groupId> <artifactId>quartz</artifactId> <version>1.6.0</version> 
            </dependency> <dependency> <groupId>org.quartz-scheduler</groupId> <artifactId>quartz</artifactId> 
            <version>2.1.5</version> </dependency> -->

        <!-- Hibernate -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-distribution</artifactId>
            <version>${org.hibernate.version}</version>
            <type>pom</type>
            <exclusions>
                <exclusion>
                    <artifactId>freemarker</artifactId>
                    <groupId>freemarker</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>hibernate-jbosscache</artifactId>
                    <groupId>org.hibernate</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>hibernate-infinispan</artifactId>
                    <groupId>org.hibernate</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- <dependency> <groupId>hibernate</groupId> <artifactId>hibernate-entitymanager</artifactId> 
            <version>3.4.0.GA</version> </dependency> -->

        <!-- ActiveMQ <dependency> <groupId>org.apache.activemq</groupId> <artifactId>activemq-core</artifactId> 
            <version>${org.apache.activemq.version}</version> </dependency> -->
        <!-- <org.apache.activemq.version>5.4.3</org.apache.activemq.version> -->

        <!-- JSON this should be replaced by Gson -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.8.5</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.8.5</version>
        </dependency>
        <!-- Gson: Java to Json conversion -->
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>1.7.1</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>log4j-over-slf4j</artifactId>
            <version>1.6.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.5</version>
        </dependency>

        <!-- Selenium -->
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-chrome-driver</artifactId>
            <version>${org.seleniumhq.selenium.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-server</artifactId>
            <version>${org.seleniumhq.selenium.version}</version>
            <exclusions>
                <!-- <exclusion> <artifactId>servlet-api</artifactId> <groupId>javax.servlet</groupId> 
                    </exclusion> -->
            </exclusions>
        </dependency>

        <!-- Utils -->
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.0.1</version>
        </dependency>

    </dependencies>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <scriptSourceDirectory>conf\batch\dev</scriptSourceDirectory>
        <outputDirectory>target\classes</outputDirectory>
        <resources>
            <resource>
                <directory>cfg\batch\dev</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <excludes>
                        <exclude>**/reportEngine/*</exclude>
                        <exclude>**/controller/reporting/ReportEngineController.class</exclude>
                        <exclude>**/service/ReportEngineService.class</exclude>
                    </excludes>
                    <archive>
                        <!-- <manifest> <mainClass>main.java.batch.com.ge.nbcuni.job.ReportJobBatch</mainClass> 
                            </manifest> -->
                    </archive>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>install</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>target/lib</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
            </plugin>
        </plugins>
    </build>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
        <org.hibernate.version>3.5.4-Final</org.hibernate.version>
        <org.seleniumhq.selenium.version>2.12.0</org.seleniumhq.selenium.version>
        <com.crystaldecisions.version>12.2.2</com.crystaldecisions.version>
        <com.businessobjects.version>12.2.2</com.businessobjects.version>
    </properties>

    <modules>
    </modules>

</project>

ERROR:

Downloading: http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-dependency-plugin/2.0/maven-dependency-plugin-2.0.pom
19-Nov-2012 11:10:09    [INFO] Unable to find resource 'org.apache.maven.plugins:maven-dependency-plugin:pom:2.0' in repository central (http://repo1.maven.org/maven2)
19-Nov-2012 11:10:09    Downloading: https://oss.sonatype.org/content/repositories/springsource-releases/org/apache/maven/plugins/maven-dependency-plugin/2.0/maven-dependency-plugin-2.0.pom
19-Nov-2012 11:10:10    [WARNING] Unable to get resource 'org.apache.maven.plugins:maven-dependency-plugin:pom:2.0' from repository Sonatype (https://oss.sonatype.org/content/repositories/springsource-releases): Error transferring file: oss.sonatype.org
19-Nov-2012 11:10:10    Downloading: https://repository.jboss.org/nexus/content/repositories/org/apache/maven/plugins/maven-dependency-plugin/2.0/maven-dependency-plugin-2.0.pom
19-Nov-2012 11:10:10    [WARNING] Unable to get resource 'org.apache.maven.plugins:maven-dependency-plugin:pom:2.0' from repository JBoss (https://repository.jboss.org/nexus/content/repositories): Error transferring file: repository.jboss.org
19-Nov-2012 11:10:10    Downloading: http://download.java.net/maven/2//org/apache/maven/plugins/maven-dependency-plugin/2.0/maven-dependency-plugin-2.0.pom
19-Nov-2012 11:10:10    [INFO] Unable to find resource 'org.apache.maven.plugins:maven-dependency-plugin:pom:2.0' in repository Java.net (http://download.java.net/maven/2/)
19-Nov-2012 11:10:10    Downloading: http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-dependency-plugin/2.0/maven-dependency-plugin-2.0.pom
19-Nov-2012 11:10:10    [INFO] Unable to find resource 'org.apache.maven.plugins:maven-dependency-plugin:pom:2.0' in repository central (http://repo1.maven.org/maven2)
19-Nov-2012 11:10:10    [INFO] ------------------------------------------------------------------------
19-Nov-2012 11:10:10    [ERROR] BUILD ERROR
19-Nov-2012 11:10:10    [INFO] ------------------------------------------------------------------------
19-Nov-2012 11:10:10    [INFO] Error building POM (may not be this project's POM).
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    Project ID: org.apache.maven.plugins:maven-dependency-plugin
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    Reason: POM 'org.apache.maven.plugins:maven-dependency-plugin' not found in repository: Unable to download the artifact from any repository
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10      org.apache.maven.plugins:maven-dependency-plugin:pom:2.0
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    from the specified remote repositories:
19-Nov-2012 11:10:10      central (http://repo1.maven.org/maven2),
19-Nov-2012 11:10:10      Sonatype (https://oss.sonatype.org/content/repositories/springsource-releases),
19-Nov-2012 11:10:10      JBoss (https://repository.jboss.org/nexus/content/repositories),
19-Nov-2012 11:10:10      Java.net (http://download.java.net/maven/2/)
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10     for project org.apache.maven.plugins:maven-dependency-plugin
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    [INFO] ------------------------------------------------------------------------
19-Nov-2012 11:10:10    [INFO] Trace
19-Nov-2012 11:10:10    org.apache.maven.lifecycle.LifecycleExecutionException: Unable to build project for plugin 'org.apache.maven.plugins:maven-dependency-plugin': POM 'org.apache.maven.plugins:maven-dependency-plugin' not found in repository: Unable to download the artifact from any repository
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10      org.apache.maven.plugins:maven-dependency-plugin:pom:2.0
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    from the specified remote repositories:
19-Nov-2012 11:10:10      central (http://repo1.maven.org/maven2),
19-Nov-2012 11:10:10      Sonatype (https://oss.sonatype.org/content/repositories/springsource-releases),
19-Nov-2012 11:10:10      JBoss (https://repository.jboss.org/nexus/content/repositories),
19-Nov-2012 11:10:10      Java.net (http://download.java.net/maven/2/)
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10     for project org.apache.maven.plugins:maven-dependency-plugin
19-Nov-2012 11:10:10            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1557)
19-Nov-2012 11:10:10            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.bindPluginToLifecycle(DefaultLifecycleExecutor.java:1503)
19-Nov-2012 11:10:10            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.constructLifecycleMappings(DefaultLifecycleExecutor.java:1282)
19-Nov-2012 11:10:10            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:534)
19-Nov-2012 11:10:10            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
19-Nov-2012 11:10:10            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
19-Nov-2012 11:10:10            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
19-Nov-2012 11:10:10            at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
19-Nov-2012 11:10:10            at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
19-Nov-2012 11:10:10            at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
19-Nov-2012 11:10:10            at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
19-Nov-2012 11:10:10            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
19-Nov-2012 11:10:10            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
19-Nov-2012 11:10:10            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
19-Nov-2012 11:10:10            at java.lang.reflect.Method.invoke(Method.java:597)
19-Nov-2012 11:10:10            at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
19-Nov-2012 11:10:10            at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
19-Nov-2012 11:10:10            at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
19-Nov-2012 11:10:10            at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
19-Nov-2012 11:10:10    Caused by: org.apache.maven.plugin.InvalidPluginException: Unable to build project for plugin 'org.apache.maven.plugins:maven-dependency-plugin': POM 'org.apache.maven.plugins:maven-dependency-plugin' not found in repository: Unable to download the artifact from any repository
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10      org.apache.maven.plugins:maven-dependency-plugin:pom:2.0
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    from the specified remote repositories:
19-Nov-2012 11:10:10      central (http://repo1.maven.org/maven2),
19-Nov-2012 11:10:10      Sonatype (https://oss.sonatype.org/content/repositories/springsource-releases),
19-Nov-2012 11:10:10      JBoss (https://repository.jboss.org/nexus/content/repositories),
19-Nov-2012 11:10:10      Java.net (http://download.java.net/maven/2/)
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10     for project org.apache.maven.plugins:maven-dependency-plugin
19-Nov-2012 11:10:10            at org.apache.maven.plugin.DefaultPluginManager.checkRequiredMavenVersion(DefaultPluginManager.java:293)
19-Nov-2012 11:10:10            at org.apache.maven.plugin.DefaultPluginManager.verifyVersionedPlugin(DefaultPluginManager.java:205)
19-Nov-2012 11:10:10            at org.apache.maven.plugin.DefaultPluginManager.verifyPlugin(DefaultPluginManager.java:184)
19-Nov-2012 11:10:10            at org.apache.maven.plugin.DefaultPluginManager.loadPluginDescriptor(DefaultPluginManager.java:1642)
19-Nov-2012 11:10:10            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1540)
19-Nov-2012 11:10:10            ... 18 more
19-Nov-2012 11:10:10    Caused by: org.apache.maven.project.ProjectBuildingException: POM 'org.apache.maven.plugins:maven-dependency-plugin' not found in repository: Unable to download the artifact from any repository
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10      org.apache.maven.plugins:maven-dependency-plugin:pom:2.0
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    from the specified remote repositories:
19-Nov-2012 11:10:10      central (http://repo1.maven.org/maven2),
19-Nov-2012 11:10:10      Sonatype (https://oss.sonatype.org/content/repositories/springsource-releases),
19-Nov-2012 11:10:10      JBoss (https://repository.jboss.org/nexus/content/repositories),
19-Nov-2012 11:10:10      Java.net (http://download.java.net/maven/2/)
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10     for project org.apache.maven.plugins:maven-dependency-plugin
19-Nov-2012 11:10:10            at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepository(DefaultMavenProjectBuilder.java:605)
19-Nov-2012 11:10:10            at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:251)
19-Nov-2012 11:10:10            at org.apache.maven.plugin.DefaultPluginManager.checkRequiredMavenVersion(DefaultPluginManager.java:277)
19-Nov-2012 11:10:10            ... 22 more
19-Nov-2012 11:10:10    Caused by: org.apache.maven.artifact.resolver.ArtifactNotFoundException: Unable to download the artifact from any repository
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10      org.apache.maven.plugins:maven-dependency-plugin:pom:2.0
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    from the specified remote repositories:
19-Nov-2012 11:10:10      central (http://repo1.maven.org/maven2),
19-Nov-2012 11:10:10      Sonatype (https://oss.sonatype.org/content/repositories/springsource-releases),
19-Nov-2012 11:10:10      JBoss (https://repository.jboss.org/nexus/content/repositories),
19-Nov-2012 11:10:10      Java.net (http://download.java.net/maven/2/)
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10    
19-Nov-2012 11:10:10            at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:228)
19-Nov-2012 11:10:10            at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:90)
19-Nov-2012 11:10:10            at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepository(DefaultMavenProjectBuilder.java:558)
19-Nov-2012 11:10:10            ... 24 more
19-Nov-2012 11:10:10    Caused by: org.apache.maven.wagon.ResourceDoesNotExistException: Unable to download the artifact from any repository
19-Nov-2012 11:10:10            at org.apache.maven.artifact.manager.DefaultWagonManager.getArtifact(DefaultWagonManager.java:404)
19-Nov-2012 11:10:10            at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:216)
19-Nov-2012 11:10:10            ... 26 more
19-Nov-2012 11:10:10    [INFO] ------------------------------------------------------------------------
19-Nov-2012 11:10:10    [INFO] Total time: 2 seconds
19-Nov-2012 11:10:10    [INFO] Finished at: Mon Nov 19 11:10:10 EST 2012
19-Nov-2012 11:10:10    [INFO] Final Memory: 4M/57M 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:56:05.070

您是否坐在代理后面（我刚刚通过完美的浏览器对其进行了测试）？此外，我强烈建议开始使用存储库管理器。您是否真的有充分的理由放弃 Maven 约定（src/main/java 等？）。如果您需要在 maven-jar-plugin 中排除，这是一个具有多个单独的 maven 模块而不是单个模块的指标。maven-dependency-plugin 将工件复制到不同文件夹的想法是什么？为什么不使用 Maven 3.0.X 而不是 2.2.1 ？顺便说一句：Spring 框架在 Maven Central 中可用，因此无需单独提供存储库。除此之外，SpringSource 存储库的给定 URL 是 SpringSource 到 Maven Central 的临时存储库。

# python - 在 python 中创建和删除 cron 作业

> ID：13458249
> 
> 赞同：0
> 
> 时间：2012-11-19T16:40:36.953
> 
> 标签：python, cron

所以我有一个小脚本，我希望每周运行一次。它会检查一些变量，如果它设置了，它会继续运行脚本，如果没有，我希望它等待一个小时再试一次。如果仍未设置，它将等待 2 小时，然后 4 小时，然后放弃一周。我的问题是，我可以在 python 中做到这一点吗？似乎我必须在 python 中创建和删除 cron 作业才能使其正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:50:43.543

您不能真正直接从 Python 设置标准 crons。相反，我将 cron 设置为每小时触发一次，并在代码中确定它是否需要再次运行（即最后一次成功执行是在 7 天前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:48:00.827

您可以尝试使用[Time.sleep](http://docs.python.org/2/library/time.html#time.sleep)

```
if not_set:
    Time.sleep(60 * 60)        # 1 hour
if not_set:
    Time.sleep(60 * 60 * 2)    # 2 hours
if not_set:
    Time.sleep(60 * 60 * 4)    # 4 hours 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:50:20.337

我相信你正在寻找[`at`](http://linux.about.com/library/cmd/blcmdl1_at.htm)命令，你可以在这里找到一个小教程：http: [//www.ibm.com/developerworks/linux/library/l-job-scheduling/index.html](http://www.ibm.com/developerworks/linux/library/l-job-scheduling/index.html)

基本用法：

```
at -f some_file_with_the_jobs.sh some_time 
```

您可以轻松地使用相对时间：

```
at -f some_file_with_the_jobs.sh  10pm tomorrow 
```

# java - Spinner 不会响应点击……即使 onItemSelected 被调用？

> ID：13458250
> 
> 赞同：2
> 
> 时间：2012-11-19T16:40:39.497
> 
> 标签：java, android, android-widget, spinner, android-spinner

（我不知道这里是否允许，我是新人）

我在stackoverflow上发现了一个老问题，这个问题没有得到正确答案，我也面临同样的问题。因此，我真的很感激，如果有人可以看看它，非常感谢！

[Spinner 不会响应点击...即使 onItemSelected 被调用？](https://stackoverflow.com/questions/3312932/spinner-wont-respond-to-clicks-even-though-onitemselected-is-called)

更新：

我自己的代码，好吧，我想阻止我的 onItemSelected() 方法在开始时运行，所以我和问那个问题的人做了同样的事情。我试过在我的代码上移动一点，看看它是否会改变任何东西，但没有运气。老实说，我不知道出了什么问题，而且我还是一个初学者，所以我真的不知道该怎么办..

这是我的代码：

```
public class WidgetConfig extends Activity implements OnItemSelectedListener{

static EditText info;
private static final String[] paths = { "10", "12", "14", "16", "18", "20",
    "22", "24", "26", "28", "30", "32", "34", "36", "38", "40", "50", "60"};

private static final String TAG = "MyActivity";

int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;   

 private ArrayList<String> mMyTypes = null;
 private ArrayAdapter<String> mMyAdapter = null;
 private Spinner mMyTypeSpinner = null;
 // hack for spinner
 boolean isFirstRunWithSpinner = true;

public WidgetConfig() {
    super();
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    Log.v(TAG, "onCreate() started");

    setContentView(R.layout.widgetconfig);

    context = WidgetConfig.this;

    // back button = cancel
    setResult(RESULT_CANCELED);

    //--------------------------------------------------

    mMyTypeSpinner = (Spinner) findViewById(R.id.TxtSizeSP);

    mMyTypes = new ArrayList<String>();
    mMyTypes.add("Test string");

    mMyAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, paths);
    mMyAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mMyTypeSpinner.setAdapter(mMyAdapter);

    // spinner listener
    mMyTypeSpinner.setOnItemSelectedListener(this);

} // onCreate finished

public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
    Log.v(TAG, "OnItemselected started");

    if( isFirstRunWithSpinner ) { isFirstRunWithSpinner = false; return; }

    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);

    switch (position) {
    case 0:
        info.setTextSize(10.0f);
        views.setFloat(R.id.tvConfigInput, "setTextSize", 10);
        Log.v(TAG, "position 0 chosed");
        break;

       ...

       break;  
    case 17:
        info.setTextSize(28.0f);
        views.setFloat(R.id.tvConfigInput, "setTextSize", 60);
       break;  
    }

    //update widget with spinner input
    Log.v(TAG, "update size start");
    appWidgetManager.updateAppWidget(mAppWidgetId, views);
    Log.v(TAG, "update size over");

    }

public void onNothingSelected(AdapterView<?> arg0) {

}

    ...

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:02:54.833

你试过这个吗？：

```
if( isFirstRunWithSpinner ) { 
isFirstRunWithSpinner = false;
}else{
RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);

switch (position) {
case 0:
    info.setTextSize(10.0f);
    views.setFloat(R.id.tvConfigInput, "setTextSize", 10);
    Log.v(TAG, "position 0 chosed");
    break;

   ...

   break;  
case 17:
    info.setTextSize(28.0f);
    views.setFloat(R.id.tvConfigInput, "setTextSize", 60);
   break;  
}

//update widget with spinner input
Log.v(TAG, "update size start");
appWidgetManager.updateAppWidget(mAppWidgetId, views);
Log.v(TAG, "update size over");
} 
```

# java - 高中编程学生分组共享代码的最佳方式

> ID：13458251
> 
> 赞同：2
> 
> 时间：2012-11-19T16:40:42.273
> 
> 标签：java, eclipse, version-control, collaboration

我想让我的编程学生分组工作，并使用 Eclipse 和 Java 编写程序。我一直在研究让学生在这样的项目上合作的最佳方式，但我不知道让他们一起工作的最佳方式。

最终，我希望一个学生创建一个班级，另一个学生创建另一个班级，然后让他们将另一个学生的班级导入他们的项目并在班级中调用必要的方法。

Bitbucket 和 GitHub 现在让我很困惑，所以我不确定它的可用性。Pastebin 是一个选项，但那里没有统一的代码。创建 Dropbox 帐户是轻松共享代码的最佳方式吗？

**编辑：**

好的，这些回答让我用我不熟悉的语言游泳，但我非常感谢所有这些知识赋予我。我如何通过让一个学生给另一个学生一个 .java 文件来简化共享代码，他使用该 .java 文件及其所有公共方法来帮助他的项目工作？

例如，一个学生做了一个简单的数学运算课。另一个学生开设了不同的数学运算课。他们彼此共享代码，并且能够实现对方的类来创建一个简单的计算器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T16:46:51.323

如果你教编程，你应该真正意识到：

*   Git、Mercurial、SVN 等协作和版本控制工具的重要性
*   目前正在大规模转向 git

您的学生应该能够在完成课程后使用版本控制系统，否则他们将缺乏在合作时非常重要的技能。

既然目前有大规模迁移到 git，为什么不让他们学习 git？我建议你阅读[Pro Git](http://git-scm.com/book)并学习他们使用 git。GitHub 是为他们提供 git 服务器的最简单方法。

您和他们都不会在 5 分钟内学会它，但对于他们以及作为老师的您来说，这是值得的投资。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:51:14.970

我发现sourceforge 非常方便。它是免费的，并且还有一个小型网络服务器。也许它更老，而不是像 git 那样大肆宣传。但我理解您的担忧，并且 ftp 或 webdav 协议也可以很好地共享代码。例如，Komodo IDE 可以通过 ftp 编辑文件。版本控制真的很痛苦，你需要学习很多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T16:47:32.723

我是一名大学生，所以这可能有点尴尬。但在我看来，使用源代码控制可能是最好的选择，尽管可能很难理解即将出现的新概念。但从长远来看，每个雇主都希望他们的程序员使用一些源代码控制。此外，也许可以使用一些工具，即使他们不在附近，也可以让他们进行交流，例如 TeamViewer、Skype 等。

我认为 Mercurial，以及我最喜欢的与 Windows TortoiseHg 上的资源管理器集成的客户端。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T17:10:42.483

使用版本控制系统，最好是分布式系统 (DVCS)，例如 Mercurial 或 Git。

在网络上运行“主”Mercurial 存储库应该很容易，例如使用`hg serve`，我想使用 Git 也同样容易。

[https://www.mercurial-scm.org/wiki/PublishingRepositories2](https://www.mercurial-scm.org/wiki/PublishingRepositories2)

[https://www.mercurial-scm.org](https://www.mercurial-scm.org)

[https://www.mercurial-scm.org/quickstart](https://www.mercurial-scm.org/quickstart)

如果您的学生开始团队合作，还要确保他们了解以下概念：

*   持续集成，例如使用 Jenkins

因此还有：

*   自动构建，例如使用 Maven
*   自动化单元测试，例如使用 JUnit

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T16:46:27.330

如果您的学生使用的是 Windows，那么我建议您使用[TortoiseSVN](http://tortoisesvn.net/)。它基于 Subversion 源代码控制系统，也称为 SVN。

您必须设置存储库。学生的计算机需要安装 Tortoise SVN，并配置为附加到存储库。

然后，您将教给学生良好的源代码控制原则——这是任何编程项目都至关重要的技能，尤其是那些使用协作的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T17:21:23.283

*   在当今的专业编程中使用 VCS 是**必须的**
*   VCS 是代码开发中共享和协作的最佳方式
*   如果每个子任务*由一个组*来执行，DVCS免费P2P通信**自然地进行**
*   Git 是 SCM 世界新人最糟糕的选择

与 SVN 相比，SVN 的学习课程最少（但在技术支持方面有一些额外的权重），Mercurial（纯 hg 或 TortoiseHG）的技术支持最少（零），但学习课程略多。Fossil SCM 具有某种中间值，但对未来的学生来说将毫无用处，但不仅提供 SCM，而且正在提供一些附加功能（嵌入式 wiki 作为知识交流的来源）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T21:11:50.500

使用 Dropbox/Google Drive 似乎是他们需要做的最佳选择。我想做其他事情，但课程的重点是理解编程语言。也许当我对 Git 感到满意时，我们会使用它。现在，一切都是关于编码和与另一个学生分享课程。

每个人都很棒。感谢所有伟大的想法和讨论。

# javascript - 为什么这不运行？

> ID：13458252
> 
> 赞同：0
> 
> 时间：2012-11-19T16:40:46.493
> 
> 标签：javascript

我在下面有这段代码：

```
<html>

<head>
    <title> Eloquent Javascript Ex 2 </title>

<script language = "javascript">

    /*
    function twoPowerTen()
    {
        var result = 1;
        var counter = 0;

        while( counter < 10 )
        {
            result = 2 * result;
            document.writeln( result );
            counter = counter + 1;
        }
    }   

    int limit = 1;

    for( int y = 0; y < 5; y++ )
    {
        for( int x = 0; x < limit; x++ )
        {
            System.out.print( "*" );
        }
        System.out.println();
        limit = limit + 1;
    }
    */

    function drawTriangle()
    {
        var limit = 1;

        for( var y = 0; y < 5; y++ )
        {
            for( var x = 0; x < limit; x++ )
            {
                document.write( "*" );
            }
            document.write( "<br>" );
            limit = limit + 1;
        }
    }

    function whileDrawTriangle()
    {
        var limit = 1;
        var x, y = 0;

        while( y < 5 )
        {
            while( x < limit )
            {
                document.write( "*" );
                x++;
            }
            limit = limit + 1;
            y++;
        }
    }

</script>

</head>

<body>
<input type = "button" value = "Draw # Triangle" onClick = "whileDrawTriangle()" />
</body>

</html> 
```

当我按下按钮时，它似乎不想运行 - 它应该在屏幕上打印一个三角形的星号。顺便说一句，我知道 HTML 的构造不是很好，但关键是要实现基本的 javascript，因为我正在掌握它的基础知识。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:54:25.597

你`drawTriangleMethod`永远不会被调用，你可以添加一个按钮来调用它，或者改变你`onClick`来调用那个函数。至于您的`whileDrawTriangle`方法，您只是将*y*变量初始化为 0，而*x*仍然存在`undefined`，因此当涉及到循环时，它会通过*test*`x < limit`。

如果你想同时初始化*x*和*y*你需要明确地这样做

例如

```
 var x = 0, y= 0; 
```

这是一个[jsBin](http://jsbin.com/uzavod/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:46:24.340

如果您将代码更改为，`onClick = "drawTriangle()"`而不是`onClick = "while DrawTriangle()"`它可以正常工作。

**[jsFiddle 示例](http://jsfiddle.net/j08691/4gMwd/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:46:50.687

您需要将变量 x 初始化为 0；

# powershell - Powershell 2.0：从脚本运行远程会话与手动输入时获得不同的结果。有什么不同？

> ID：13458253
> 
> 赞同：1
> 
> 时间：2012-11-19T16:40:48.143
> 
> 标签：powershell, scripting, powershell-2.0

从脚本运行远程会话与手动键入确切的命令序列时，我得到了不同的结果。这发生在我正在处理的一个相当复杂的脚本中，但我创建了一个很小的脚本来演示这个问题。返回的数字不应该是 7-5-7，而不是 7-5-5？

有问题的脚本

```
$oldMachineName = "ppal12084229"
$remoteSession = New-PSSession $oldMachineName

$xyz =7

"outside remote session"
$xyz
""

enter-PSSession $remoteSession
$xyz = 5

"inside remote session"
$xyz
""

exit-pssession

"outside remote session"
$xyz
""

remove-pssession $remoteSession 
```

当我运行脚本时，我得到这个输出：

```
outside remote session
7

inside remote session
5

outside remote session
5 
```

但是，当我手动输入命令时，我得到了这个：

```
PS H:\> $oldMachineName = "ppal12084229"
PS H:\> $remoteSession = New-PSSession $oldMachineName
PS H:\> $xyz =7
PS H:\> $xyz
7
PS H:\> enter-PSSession $remoteSession
[ppal12084229]: PS C:\WINDOWS\system32> $xyz = 5
[ppal12084229]: PS C:\WINDOWS\system32> $xyz
5
[ppal12084229]: PS C:\WINDOWS\system32> exit-pssession
PS H:\> $xyz
7
PS H:\> remove-pssession $remoteSession 
```

为什么我会得到不同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:20:11.633

`Enter-PSSession`并`Exit-PSSession`用于交互使用。在你的脚本中试试这个，看看你会得到什么：

```
$oldMachineName = "ppal12084229"
$remoteSession = New-PSSession $oldMachineName

$xyz =7

"outside remote session"
$xyz
""

invoke-command -Session $remoteSession -ScriptBlock {
     $xyz = 5

     "inside remote session"
     $xyz
     ""
}

"outside remote session"
$xyz
""

remove-pssession $remoteSession 
```

# xml - 带有 xml 映射的休眠验证器嵌套类

> ID：13458263
> 
> 赞同：1
> 
> 时间：2012-11-19T16:41:17.763
> 
> 标签：xml, hibernate, jakarta-ee

非常极端的情况，谷歌搜索似乎没有帮助。

我必须使用 xml 验证（生成的代码），场景类似于：

```
 // This file was generated by the JavaTM Architecture for XML
 Binding(JAXB) Reference Implementation, v2.2.4 

 ...

 @XmlAccessorType(XmlAccessType.FIELD) @XmlType(name = "xxx", propOrder
 = { ... }) @XmlRootElement(name = "xxx") public class Class01DTO
     implements Serializable { ...
     @XmlElement(required = true)
     protected BetslipDTO.SlipPlacement slipPlacement;

     ...

     @XmlAccessorType(XmlAccessType.FIELD)
     @XmlType(name = "", propOrder = { ...
     })
     public static class Class02
         implements Serializable
     {

         private final static long serialVersionUID = ...;

         protected String stringToValidate;

     }

 } 
```

我对如何验证“stringToValidate”没有信心。我有一个约束映射.xml，例如：

```
<bean class="com.etc.Class01DTO.Class02">
    <field name="stringToValidate">
        <constraint annotation="javax.validation.constraints.NotNull">
        </constraint>
    </field>
</bean> 
```

那只会产生错误。尝试了不同的组合，但没有结果。有没有人遇到过同样的情况？我认为很明显代码已生成，因此不能使用基于注释的验证选项...

进行构建时的错误类似于以下内容...

```
 shouldValidateSpringContext(com.etc.TestBetSpringContext): Error creating bean with name 'validatorFactoryBean' defined in class path resource [spring/bet-service.xml]: Invocation of init method failed; nested exception is javax.validation.ValidationException: HV000065: Unable to load class: com.etc.Class01DTO.Class02. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:52:45.000

如果你想指定一个嵌套的类名，你应该使用`com.etc.Class01DTO$Class02`，在编译完这些类之后，查看目标目录，你会发现所有的嵌套类都被编译成单独的文件，并`$`在它们的名称中。

# java - 玩！验证验证电子邮件

> ID：13458271
> 
> 赞同：1
> 
> 时间：2012-11-19T16:41:38.613
> 
> 标签：java, playframework, playframework-2.0, play-authenticate

我一直在研究播放身份验证使用入门指南：

[https://github.com/joscha/play-authenticate/blob/master/samples/java/Getting%20Started.md](https://github.com/joscha/play-authenticate/blob/master/samples/java/Getting%20Started.md)

我已经到了用户可以使用 gmail 或 openID 帐户登录或者他们可以创建新帐户的阶段。有没有办法可以修改发送给用户的验证电子邮件的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:47:42.437

当然，修改模板和邮件是PA的重点之一，检查模板在：

[https://github.com/joscha/play-authenticate/tree/master/samples/java/play-authenticate-usage/app/views/account/email](https://github.com/joscha/play-authenticate/tree/master/samples/java/play-authenticate-usage/app/views/account/email)

**提示：**在您的配置中打开`smtp.mock`，因此您不需要发送垃圾邮件进行测试，只需在 中`application.conf`，放置在行尾的某个位置（不要忘记将其删除以进行生产）：

```
smtp.mock=true 
```

# jquery - 使用 jQuery .load() 加载多个片段

> ID：13458273
> 
> 赞同：1
> 
> 时间：2012-11-19T16:41:46.600
> 
> 标签：jquery, jquery-load

我想将来自 1 个网页的多个片段引入 div，但我能够让它工作的唯一方法是使用多个 .load() 函数。

有没有办法将以下内容简化为 1 个 html 请求？

```
$('.quickview-dialog-left').load('/productlargetest .productlargeimage img');
$('.quickview-dialog-right').append('<div class="top"><div class="title"></div><div class="price"></div><div class="delivery"></div></div><div class="bottom"><div class="shortdescription"></div><div class="options"></div><div class="buttons"><div class="buy"></div><div class="viewmore">More Details</div></div></div><div class="close">[x] close</div>');
$('.quickview-dialog-right .title').load('/productlargetest .productrighttop h1');
$('.quickview-dialog-right .price').load('/productlargetest .productprice');
$('.quickview-dialog-right .delivery').load('/productlargetest .productrighttop .stock-delivery');
$('.quickview-dialog-right .bottom .shortdescription').load('/productlargetest .shortdescription');
$('.quickview-dialog-right .bottom .options').load('/productlargetest .productoption');
$('.quickview-dialog-right .bottom .buttons .buy').load('/productlargetest .productSubmitInput'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:17:52.773

这里有一些东西可以尝试。 [http://jsfiddle.net/ZWsLA/1/](http://jsfiddle.net/ZWsLA/1/)

```
//do a 'get' here ONCE, this will get your page as an HTML string
$.get("/HEaUk/1/show/", function(data1){

    //store that HTML string in some hidden div local on the page.  The reason that I store is locally in a DIV is because jQuery seems to be able to parse it much easier.
    $("#everything").html(data1);

    //now you can just use the 'find' method to grab whatever you want from your html and append, or insert into whatever you want.
    $(".quickview-dialog-left").html(
        //use your normal jQuery selector here to 'find' the elements that you need
        $("#everything").find('#productlargeimage').text()
    );

    //here is an example with 'append', but at this point you can do whatever you want with your selectors
    $(".quickview-dialog-right").append(
        $("#everything").find('#productrighttop').text()
    );

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:47:23.023

不是一次加载，而是一次`ajax`调用即可完成。您可以将`ajax`(或`get`/ `post`) 的结果加载到新文档中，然后拉出您想要的部分。

查看jquery的负载来源，在：[https ://github.com/jquery/jquery/blob/master/src/ajax.js#L133](https://github.com/jquery/jquery/blob/master/src/ajax.js#L133)

```
jQuery.fn.load = function( url, params, callback ) {
if ( typeof url !== "string" && _load ) {
return _load.apply( this, arguments );
}

// Don't do a request if no elements are being requested
if ( !this.length ) {
return this;
}

var selector, type, response,
self = this,
off = url.indexOf(" ");

if ( off >= 0 ) {
selector = url.slice( off, url.length );
url = url.slice( 0, off );
}

// If it's a function
if ( jQuery.isFunction( params ) ) {

// We assume that it's the callback
callback = params;
params = undefined;

// Otherwise, build a param string
} else if ( params && typeof params === "object" ) {
type = "POST";
}

// Request the remote document
jQuery.ajax({
url: url,

// if "type" variable is undefined, then "GET" method will be used
type: type,
dataType: "html",
data: params,
complete: function( jqXHR, status ) {
if ( callback ) {
self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
}
}
}).done(function( responseText ) {

// Save response for use in complete callback
response = arguments;

// See if a selector was specified
self.html( selector ?

// Create a dummy div to hold the results
jQuery("<div>")

// inject the contents of the document in, removing the scripts
// to avoid any 'Permission Denied' errors in IE
.append( responseText.replace( rscript, "" ) )

// Locate the specified elements
.find( selector ) :

// If not, just inject the full result
responseText );

});

return this;
}; 
```

鉴于此，请注意底部的加载位置（`self.html(...)`），然后使用选择器从临时文档复制`self`到最终文档。我不确定您对 jquery 的熟练程度，所以我不确定您是否需要我详细说明所有步骤，或者这是否能满足您的需求。

# xml - XSLT - 属性的出现

> ID：13458279
> 
> 赞同：1
> 
> 时间：2012-11-19T16:42:08.380
> 
> 标签：xml, xslt, xpath

我有以下xml：

```
<Books>   
 <Book author="John" country="Norway"/>   
 <Book author="Paul" />    
 <Book author="Steve" country="England"/>      
</Books>
<Books>       
 <Book author="George" />    
 <Book author="Thomas" country="Germany"/>   
</Books> 
```

我想在每个“书籍”元素中找到属性“国家”的位置。

```
<Books>   
 <Book author="John" country="Norway"/>    --1
 <Book author="Paul" />    
 <Book author="Steve" country="England"/> --2
 <Book author="Bob" country="Denmark"/>  --3  
</Books>
<Books>       
 <Book author="George" />    
 <Book author="Thomas" country="Germany"/>  --1 
</Books> 
```

我们可以为此使用哪个 XPath 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:54:25.937

您可以计算具有该属性的先前兄弟姐妹的数量，这是一个模板，显示：

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="Books/Book[@country]">
  <xsl:value-of select="count(preceding-sibling::Book[@country]) + 1"/> 
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:59:11.490

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Books">
     <xsl:apply-templates select=".//@country"/>
 </xsl:template>

 <xsl:template match="@country">
  <xsl:value-of select="position()"/>
  <xsl:text>&#xA;</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档（格式正确）时：**

```
<t>
<Books>
 <Book author="John" country="Norway"/>    --1
 <Book author="Paul" />
 <Book author="Steve" country="England"/> --2
 <Book author="Bob" country="Denmark"/>  --3
</Books>
<Books>
 <Book author="George" />
 <Book author="Thomas" country="Germany"/>  --1
</Books>
</t> 
```

**产生了想要的正确结果**：

```
1
2
3
1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:47:42.623

您可以使用 XPath 计数功能：

```
count(/Books/Book/@country) 
```

# eclipse - 如何将 Xtext 与 Eclipse 插件集成？

> ID：13458280
> 
> 赞同：5
> 
> 时间：2012-11-19T16:42:07.663
> 
> 标签：eclipse, xtext, eclipse-plugin

我创建了一个简单的 Xtext 项目，我想生成一些规范文件。使用 ANTTLR 工具，我将根据 Xtext 项目的规范文件生成一些其他文件。我创建了一个插件，它使用规范文件并使用 ANTLR 解析器自动生成我需要的其他文件。我的问题是我是否可以将此插件与 Xtext 编辑器集成？更具体地说，如果一个用户想要使用该插件，它将看到 Xtext 编辑器，然后它将创建规范文件，最后，通过按下按钮将使用 ANTLR 工具生成文件（最后一步已经完成。）有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:53:56.113

基本上，您需要拥有 xtext 插件，并创建另一个依赖于您的 antlr 工具的插件。

假设您拒绝的 xtext 扩展名是“.myDsl”。

您需要开发的插件会将您的“.myDsl”文件作为输入，并将执行您的 antlr 工具来生成您的文件。

这里有一些指针： [http ://www.eclipse.org/articles/article.php?file=Article-action-contribution/index.html#example4](http://www.eclipse.org/articles/article.php?file=Article-action-contribution/index.html#example4)

问候

# c++ - 使用 FFTW 和 OpenCV 的频率响应

> ID：13458284
> 
> 赞同：0
> 
> 时间：2012-11-19T16:42:18.950
> 
> 标签：c++, opencv, fftw

我正在使用 fftw 和 openCV，我能够产生 fft 和 iffft 结果。有人可以告诉我fft之后的频率响应如何可视化吗？

另外，我想知道是否可以分离幅度和相位数据以便分别处理它们？

# grails - 在运行时重新定义域类映射

> ID：13458286
> 
> 赞同：0
> 
> 时间：2012-11-19T16:42:19.873
> 
> 标签：grails, dynamic, groovy, mapping

我想知道 groovy 中是否有一种方法可以`static mapping`在运行时更改 grails 类的部分。截至目前，我的域类如下所示：

```
class Result {

    ObjectId id

    String url

    def Result(){

    }

    void addObjectProperty(String key, value){
        this[key]=value
    }

    //No constrains defined yet.
    static constraints = {
    }

    static mapWith="mongo"

    static mapping = {
        collection "results"
        database "test"
    }
} 
```

现在让我们说我想在运行时将映射部分更改为：

```
static mapping = {
    collection "xyz"
    database "mydb"
} 
```

现在，当我调用`save()`一个对象时，它会将结果保存到集合 xyz 中的 mydb 中。我敢打赌，在 groovy 中有一种方法可以做到这一点，但是由于我是 groovy 的新手，所以我在这里遇到了困难……如果有人能指出我正确的方向，那就太好了。

非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:15:35.840

请注意我上面关于这样做的智慧的评论。也就是说，您可以在运行时用 Groovy 的元类功能替换您的映射。

```
Result.metaClass.'static'.mapping = {
    collection "myCollection"
    database "myDatabase"
} 
```

在 Grails 中，映射块是一个 Groovy[闭包](http://groovy.codehaus.org/Closures)，因此您可以随时将其替换为任何其他闭包对象。这可能会产生不可预知的 Hibernate 副作用，或者什么都不做，因为我不知道何时在 Grails 应用程序生命周期中使用映射闭包来配置 Hibernate。

# android - 使用 Android MediaCodec 从摄像头编码 H.264

> ID：13458289
> 
> 赞同：31
> 
> 时间：2012-11-19T16:42:24.337
> 
> 标签：android, video-streaming, android-camera, h.264, video-encoding

我试图让它在 Android 4.1 上运行（使用升级的 Asus Transformer 平板电脑）。感谢[Alex 对我之前的问题的回答](https://stackoverflow.com/a/13420558/726156)，我已经能够将一些原始 H.264 数据写入文件，但该文件只能用 播放`ffplay -f h264`，而且似乎丢失了有关帧速率的所有信息（播放速度极快）。色彩空间看起来也不正确（atm 在编码器端使用相机的默认值）。

```
public class AvcEncoder {

private MediaCodec mediaCodec;
private BufferedOutputStream outputStream;

public AvcEncoder() { 
    File f = new File(Environment.getExternalStorageDirectory(), "Download/video_encoded.264");
    touch (f);
    try {
        outputStream = new BufferedOutputStream(new FileOutputStream(f));
        Log.i("AvcEncoder", "outputStream initialized");
    } catch (Exception e){ 
        e.printStackTrace();
    }

    mediaCodec = MediaCodec.createEncoderByType("video/avc");
    MediaFormat mediaFormat = MediaFormat.createVideoFormat("video/avc", 320, 240);
    mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, 125000);
    mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, 15);
    mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Planar);
    mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 5);
    mediaCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);
    mediaCodec.start();
}

public void close() {
    try {
        mediaCodec.stop();
        mediaCodec.release();
        outputStream.flush();
        outputStream.close();
    } catch (Exception e){ 
        e.printStackTrace();
    }
}

// called from Camera.setPreviewCallbackWithBuffer(...) in other class
public void offerEncoder(byte[] input) {
    try {
        ByteBuffer[] inputBuffers = mediaCodec.getInputBuffers();
        ByteBuffer[] outputBuffers = mediaCodec.getOutputBuffers();
        int inputBufferIndex = mediaCodec.dequeueInputBuffer(-1);
        if (inputBufferIndex >= 0) {
            ByteBuffer inputBuffer = inputBuffers[inputBufferIndex];
            inputBuffer.clear();
            inputBuffer.put(input);
            mediaCodec.queueInputBuffer(inputBufferIndex, 0, input.length, 0, 0);
        }

        MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();
        int outputBufferIndex = mediaCodec.dequeueOutputBuffer(bufferInfo,0);
        while (outputBufferIndex >= 0) {
            ByteBuffer outputBuffer = outputBuffers[outputBufferIndex];
            byte[] outData = new byte[bufferInfo.size];
            outputBuffer.get(outData);
            outputStream.write(outData, 0, outData.length);
            Log.i("AvcEncoder", outData.length + " bytes written");

            mediaCodec.releaseOutputBuffer(outputBufferIndex, false);
            outputBufferIndex = mediaCodec.dequeueOutputBuffer(bufferInfo, 0);

        }
    } catch (Throwable t) {
        t.printStackTrace();
    }

} 
```

将编码器类型更改为“video/mp4”显然可以解决帧率问题，但由于主要目标是制作流媒体服务，因此这不是一个好的解决方案。

我知道考虑到 SPS 和 PPS NALU，我删除了一些 Alex 的代码，但我希望这不是必需的，因为该信息也来自`outData`并且我认为编码器会正确格式化它。如果不是这种情况，我应该如何在我的文件/流中安排不同类型的 NALU？

那么，为了制作有效的、工作的 H.264 流，我在这里缺少什么？我应该使用哪些设置来匹配相机的色彩空间和编码器的色彩空间？

我觉得这更像是一个与 H.264 相关的问题，而不是 Android/MediaCodec 主题。还是我仍然没有正确使用 MediaCodec API？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T20:01:58.513

对于您的快速播放 - 帧速率问题，您无需在此处执行任何操作。由于它是流式解决方案，因此必须提前告知对方帧速率或每帧的时间戳。这两者都不是基本流的一部分。要么选择预先确定的帧速率，要么传递一些 sdp 或类似的东西，或者使用现有的协议，如 rtsp。在第二种情况下，时间戳是以 rtp 之类的形式发送的流的一部分。然后客户端必须depay rtp流并播放它。这就是基本流的工作方式。[如果您有固定速率编码器或给出时间戳，请修复您的帧速率]

本地 PC 播放会很快，因为它不知道 fps。通过在输入之前给出 fps 参数，例如

```
ffplay -fps 30 in.264 
```

您可以在 PC 上控制播放。

至于无法播放的文件：是否有SPS和PPS。此外，您应该启用 NAL 标头 - 附件 b 格式。我对 android 了解不多，但这是任何 h.264 基本流在它们不在任何容器中并且需要在以后转储和播放时都可以播放的要求。如果android默认是mp4，但是默认的附件b头会被关闭，所以也许有一个开关可以启用它。或者，如果您逐帧获取数据，只需自己添加即可。

至于颜色格式：我猜默认应该可以。所以尽量不要设置。如果没有尝试 422 Planar 或 UVYV / VYUY 交错格式。通常相机就是其中之一。（但不是必须的，这些可能是我遇到的比较多的）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-24T19:45:54.613

Android 4.3 (API 18) 提供了一个简单的解决方案。该类`MediaCodec`现在接受来自 Surfaces 的输入，这意味着您可以将相机的 Surface 预览连接到编码器并绕过所有奇怪的 YUV 格式问题。

还有一个新的[MediaMuxer 类](http://developer.android.com/reference/android/media/MediaMuxer.html)，它将您的原始 H.264 流转换为 .mp4 文件（可选地混合在音频流中）。

有关执行此操作的示例，请参阅[CameraToMpegTest 源。](http://bigflake.com/mediacodec/)（它还演示了使用 OpenGL ES 片段着色器对正在录制的视频进行简单的编辑。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-16T16:42:16.980

如果您已将预览颜色空间设置为 YV12，您可以像这样转换颜色空间：

```
public static byte[] YV12toYUV420PackedSemiPlanar(final byte[] input, final byte[] output, final int width, final int height) {
        /* 
         * COLOR_TI_FormatYUV420PackedSemiPlanar is NV12
         * We convert by putting the corresponding U and V bytes together (interleaved).
         */
        final int frameSize = width * height;
        final int qFrameSize = frameSize/4;

        System.arraycopy(input, 0, output, 0, frameSize); // Y

        for (int i = 0; i < qFrameSize; i++) {
            output[frameSize + i*2] = input[frameSize + i + qFrameSize]; // Cb (U)
            output[frameSize + i*2 + 1] = input[frameSize + i]; // Cr (V)
        }
        return output;
    } 
```

或者

```
 public static byte[] YV12toYUV420Planar(byte[] input, byte[] output, int width, int height) {
        /* 
         * COLOR_FormatYUV420Planar is I420 which is like YV12, but with U and V reversed.
         * So we just have to reverse U and V.
         */
        final int frameSize = width * height;
        final int qFrameSize = frameSize/4;

        System.arraycopy(input, 0, output, 0, frameSize); // Y
        System.arraycopy(input, frameSize, output, frameSize + qFrameSize, qFrameSize); // Cr (V)
        System.arraycopy(input, frameSize + qFrameSize, output, frameSize, qFrameSize); // Cb (U)

        return output;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T09:53:15.847

您可以查询 MediaCodec 以了解其支持的位图格式并查询您的预览。问题是，一些 MediaCodecs 仅支持您无法从预览中获得的专有打包 YUV 格式。特别是 2130706688 = 0x7F000100 = COLOR_TI_FormatYUV420PackedSemiPlanar 。预览的默认格式为 17 = NV21 = MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV411Planar = YCbCr 420 Semi Planar

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T20:20:03.960

如果您没有明确请求其他像素格式，则相机预览缓冲区将以称为[NV21](http://developer.android.com/reference/android/graphics/ImageFormat.html#NV21)的 YUV 420 格式到达，[COLOR_FormatYCrYCb](http://developer.android.com/reference/android/media/MediaCodecInfo.CodecCapabilities.html#COLOR_FormatYCrYCb)是等效的 MediaCodec。

不幸的是，正如此页面上的其他答案所提到的，不能保证在您的设备上，AVC 编码器支持这种格式。请注意，存在一些不支持 NV21 的奇怪设备，但我不知道任何可以升级到 API 16 的设备（因此，有 MediaCodec）。

Google 文档还声称，所有 API >= 12 的设备都必须支持[YV12](http://developer.android.com/reference/android/graphics/ImageFormat.html#YV12)平面 YUV 作为相机预览格式。因此，尝试它可能很有用（MediaCodec 等效项是您在代码片段中使用的[COLOR_FormatYUV420Planar ）。](http://developer.android.com/reference/android/media/MediaCodecInfo.CodecCapabilities.html#COLOR_FormatYUV420Planar)

**更新**：正如 Andrew Cottrell 提醒我的，YV12 仍然需要色度交换才能成为 COLOR_FormatYUV420Planar。

# javascript - Iframe 仅用一些 html 替换一次正文文本

> ID：13458291
> 
> 赞同：1
> 
> 时间：2012-11-19T16:42:33.193
> 
> 标签：javascript, html, iframe, replace

**我需要做什么**

我在 HTML 页面的正文中显示带有 javascript 的 iframe。有类似的东西`document.write('<iframe ...></iframe'>);`

在这个 iframe 中有我的 javascript 函数，它在父文档的正文中搜索关键字，并将其替换为父文档中的 html 链接`<a href="#">keyword</a>`。

**我试过的**

*   [用链接替换文本的Javascript书签](https://stackoverflow.com/questions/8949445/javascript-bookmarklet-to-replace-text-with-a-link)：复杂的脚本，但我需要skipTags
*   和[Javascript .replace 命令替换页面文本？](https://stackoverflow.com/questions/7275650/javascript-replace-command-replace-page-text): 非常短而漂亮的脚本，但是没有skipTags 功能...

当脚本在文档中但不在 iframe 中以与父文档一起使用时，这些功能就像一个魅力。

**我的问题/疑问**

1.  问题是“关键字”被替换为“未解释”的 html 作为文本。（浏览器显示`<a href="#">keyword</a>`）。
2.  我的第二个问题是如何只替换一次，而不是所有匹配的表达式？

通常我使用一些 jQuery，但在这个项目中我只需要使用一些没有任何库的 javascript。

有什么想法可以帮助我吗？（*我不希望任何人“编写我的代码”，我只是想要一些建议来自己制作*）

*PS 1：我使用 Chrome，但我想让它在每个浏览器中都能正常工作。*

*PS 2 : 英语不是我的母语，所以如果你有什么不明白的地方，不要犹豫，问我，我会尽力解释得更好。*

**编辑 2**

第一个脚本现在适用于 HTML，所以问题 1 解决了，但是如何只替换一次，即使关键字重复多次？（问题2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:25:00.290

[在xiaoyi](https://stackoverflow.com/users/245428/xiaoyi)的帮助下，我找到了一些解决方案：

*   停止循环并仅替换第一个匹配项
*   全球化搜索/替换多个关键字的功能

我认为它可以被优化，但对我来说它就像一个魅力，我与你分享它，如果它可以帮助任何人（不要忘记更改文档的目标，这里是“父”）：

```
(function(){
    // don't replace text within these tags
    var skipTags = { 'a': 1, 'style': 1, 'script': 1, 'iframe': 1, 'meta':1, 'title':1, 'img':1, 'h':1 };
    // find text nodes to apply replFn to
    function findKW( el, term, replFn ) 
    {
        var child, tag,found=false;
        for (var i = 0;i<=el.childNodes.length - 1 && !found; i++)
        {
            child = el.childNodes[i];
            if (child.nodeType == 1) 
            { // ELEMENT_NODE
                tag = child.nodeName.toLowerCase();
                if (!(tag in skipTags)) 
                {
                    findKW(child, term, replFn);
                }
            } 
            else if (child.nodeType == 3) 
            { // TEXT_NODE
                found=replaceKW(child, term, replFn); // if found=true, we stop the loop
            }
        }
     }; 
    // replace terms in text according to replFn
    function replaceKW( text, term, replFn) 
    {
        var match,
            matches = [],found=false;
        while (match = term.exec(text.data)) 
        {
            matches.push(match);
        }
        for (var i = 0;i<=matches.length - 1 && !found; i++)
        {           
            match = matches[i];         
            // cut out the text node to replace
            text.splitText(match.index);
            text.nextSibling.splitText(match[1].length);
            text.parentNode.replaceChild(replFn(match[1]), text.nextSibling);
            if(matches[i])found=true;// To stop the loop            
        }
        return found;
    };
    // First search/replace
    var replTerm = 'keyword';
    findKW(
        parent.document.body, 
        new RegExp('\\b(' + replTerm + ')\\b', 'gi'),
        function (match) 
        {
          var link = parent.document.createElement('a');
          link.href = 'http://www.okisurf.com/#q=' + replTerm;
          link.target = '_blank';
          link.innerHTML = match;
          return link;
        }
    );
    // A second search/replace
    var replTerm = 'word';
    findKW(
        parent.document.body, 
        new RegExp('\\b(' + replTerm + ')\\b', 'gi'),
        function (match) 
        {
          var link = parent.document.createElement('a');
          link.href = 'http://www.okisurf.com/#q=' + replTerm;
          link.target = '_blank';
          link.innerHTML = match;
          return link;
        }
    );
    // Other search/replace
    // ...
}()); 
```

我还发现第二种解决方案不适用于 Internet Explorer 女巫不接受`createTreeWalker()`DOM 功能

# ruby-on-rails - 多态关联和/或 has_many_through

> ID：13458294
> 
> 赞同：1
> 
> 时间：2012-11-19T16:42:57.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要在用户、产品和照片模型之间建立关系。用户可以将照片添加到产品中。因此，一张用户`has_many`照片和一张产品`has_many`照片，但每张照片`belongs_to`既是产品又是用户。我怎样才能在 Rails 中实现这一点？据我了解，多态关联只允许照片属于产品或用户。我是否必须为用户照片和产品照片关系使用单独`has_many_through`的关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:51:04.917

您可以在同一模型中拥有多个 belongs_to 属性。本质上，标记为belongs_to 的模型将拥有一个外键，指向已标记为has_many 的模型。

```
class MyModel < ActiveRecord::Base

  belongs_to :other_model1
  belongs_to :other_model2

end 
```

如果您想使用下面提到的多态关联，您可以按照这些方式进行操作

```
class Photos < ActiveRecord::Base
  belongs_to :imageable, :polymorphic => true
end

class Users < ActiveRecord::Base
  has_many :photos, :as => :imageable
end

class Product < ActiveRecord::Base
  has_many :photos, :as => :imageable
end 
```

在这种情况下，您可以简单地通过添加 has_many :photos, :as => :imageable 属性来创建关系，而无需重新访问 Photos 类。

# javascript - 在浏览器布局中为响应式图像保留空间（防止回流）

> ID：13458297
> 
> 赞同：6
> 
> 时间：2012-11-19T16:43:12.380
> 
> 标签：javascript, image, css, browser, frontend

我一直在进行更改以使我的网站更具响应性，总的来说，这进展顺利。但是，我遇到了一个问题：

以前，我总是在 img 元素上使用 height 和 width 属性，以便在浏览器加载图像时**在布局中为图像保留空间**。这可以防止布局在浏览器加载和计算图像所需空间时晃动。

然而，在使我的图像更具响应性之后，通过使用`max-width: 100%`和取出高度和宽度属性，浏览器不再为图像保留空间（因为它不再提前知道图像的高度或宽度，因为我不能'不要明确告诉它）

我的目标是让响应式图像在初始加载时也占据页面布局中的适当空间。有谁知道这个的解决方案？

***编辑（解决方案）** - [这是我找到的关于该主题的最佳文章](http://web.archive.org/web/20161120085902/http://andmag.se/2012/10/responsive-images-how-to-prevent-reflow/)。不错的方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-22T15:58:59.540

这里的正确答案是通过使用“填充底部技巧”来防止垂直回流。要使这项技术发挥作用，您必须事先知道图像的比例。

感谢 Anders M. Anderson 就该主题发表了一篇出色的文章：http: [//andmag.se/2012/10/responsive-images-how-to-prevent-reflow/](http://andmag.se/2012/10/responsive-images-how-to-prevent-reflow/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:16:16.623

这是一种方法。这不是很棒，但有效。 [http://jsfiddle.net/78Lvc/11/](http://jsfiddle.net/78Lvc/11/)

我将图像标签更改为如下所示：

```
<img src="http://fitzgeraldmedia.net/images/range1.jpg" id="img" imgWidth="467" imgHeight="700" onload="fixMyWidth()"/> 
```

您会注意到我添加了一些属性和一个`onload`. 您必须在代码中或手动添加属性。之所以需要高度和宽度，是因为需要知道图像的高度来计算 JS 中所需的空间。

然后内联，我有这个代码：

```
<script>
    //get the width of the browser right now
    var containerWidth = document.body.offsetWidth;
    //get the attributes that we have specified for this image
    var imgWidth = document.getElementById("img").getAttribute("imgWidth");
    var imgHeight = document.getElementById("img").getAttribute("imgHeight");

    //since the img is to be 50% of the container width
    var widthRatio = containerWidth / imgWidth / 2 ;

    //now set the height of the image
    document.getElementById("img").style.height = (imgHeight * widthRatio) + "px";

    //once the image has actually loaded, run this
    function fixMyWidth(){
        //this will make it 'responsive' again
        document.getElementById("img").style.height = "";
        document.getElementById("img").style.width = "";
    }
</script> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-19T16:45:47.330

我不会去掉高度和宽度属性，只是尝试将它们设置为自动。

# ios - XCode 4.5.2 链接器错误

> ID：13458299
> 
> 赞同：1
> 
> 时间：2012-11-19T16:43:18.537
> 
> 标签：ios, linker, unity3d

由于 Apple Mach-O 链接器错误，我无法使用 XCode 构建 iOS 应用程序。这是 XCode 屏幕截图以及我的工作流程：

团结 4

*   我有 Unity 和 iOS 扩展的专业版

Vuforia 1.5.10 统一扩展

XCode 4.5.2

*   Architectures and Valid Architectures 在 Build Settings (Resolved, Unity-Iphone, Unity-Iphone) 下都设置为 armv7。但是，iOS 默认是灰色的，我无法更改。它设置为标准（armv7、armv7s）

    *   不断收到有关 Vuforia 功能的“Apple Mach-O 链接器错误”

架构 armv7 的未定义符号：

“_markerGetId”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_qcarSetFrameFormat”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_rendererGetVideoBackgroundCfg”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_imageTrackerDestroyDataSet”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_imageTrackerActivateDataSet”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_cameraDeviceSetFlashTorchMode”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_imageTargetCreateVirtualButton”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_getProjectionGL”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_dataSetGetTrackablesOfType”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_trackerManagerDeinitTracker”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_trackerManagerInitTracker”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_rendererSetVideoBackgroundCfg”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_qcarRequiresAlpha”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_cameraDeviceStartCamera”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_rendererIsVideoBackgroundTextureInfoAvailable”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_dataSetGetNumTrackableType”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_virtualButtonIsEnabled”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_isRendererDirty”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

“_rendererGetVideoBackgroundTextureInfo”，引用自：

```
 RegisterMonoModules() in RegisterMonoModules.o 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T19:35:24.980

我刚遇到同样的问题，几天后，我终于解决了！使其适用于最新的*Unity 4.2*和*Vuforia 2.6.7*

很少有可能导致问题的事情：

*   **文件夹层次结构**：这是**最大最可能的一点**。从包文件导入时保持原样。如果您将单个文件移出其原始位置，除了少数例外，您将遇到许多错误，如您所描述的。

*   **文件夹命名**：虽然我在这里显然没有问题，但**不要使用空格**。[到处都](https://developer.vuforia.com/resources/dev-guide/step-2-compiling-simple-project)建议这样做（尽管包本身解压了带有空格的文件夹......）。

*   **构建设置/播放器设置**：同样，我在这里没有问题。而且我尝试在一个空项目上稍微改变它们，这没有问题。但是，此处设置错误可能会导致此类链接器错误。**创建一个打开的项目并尝试一下**。

要在更改任何配置后重试，请使用`CMD + SHIFT + B`并按下**Build and Run**。它将询问保存位置，如果保存在顶部，请选择**Replace**。

还有祝你好运！

# database - 我应该创建两个表来存储对象的特定信息吗？

> ID：13458301
> 
> 赞同：2
> 
> 时间：2012-11-19T16:43:19.030
> 
> 标签：database, database-design

我有一些表：

*   课程：包含有关课程的信息，一个课程**`has many`**主题。
*   主题：包含有关主题的信息，一个主题**`belongs to`**一门课程和一个主题**`has many`**问题。
*   问题：包含有关问题的信息，一个问题**`belongs to`**一个主题。
*   GeneralExam：包含有关课程考试的信息，一门普通考试**`belongs to`**一门课程。
*   GeneralQuestion：包含一般考试的设置问题。

这是两个表的列：

*   GeneralExam：名称、描述、学期、持续时间、user_id、course_id、使用（布尔）、number_question
*   一般问题：general_exam_id，question_id

GeneralExam 的题目是随机的。这意味着我会根据每个主题的具体问题数量获得随机问题。

现在我想知道一般考试的具体信息，比如参加了一般考试的课程中每个主题的题数。目前，我想我将创建一个新表来存储该信息，例如：

*   新表：general_exam_id、topic_id、number_question

但我不知道这是否是最好的方法，或者在这种情况下，有其他方法或模式可以解决。因为如果我创建那个新表，当我在 GeneralExam 表中进行更改（例如：更改集问题）时，我将需要更新 3 个表：GeneralExam、GeneralQuestion、新表。我不确定这是不是好方法。

所以我想问，我是否应该创建新表来存储该信息（普通考试中每个主题的问题数），

或者我是否需要在 GeneralQuestion 表中进行一些更改以更好地存储一般考试的信息，我应该做哪些更改？感谢您的任何建议和意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:03:35.453

如果可以从当前数据中查询到你想要的信息，一般情况下你不应该**把**它存储在另一个表中。原因是：每次从其他表中添加/删除行时，您也必须更新这一行。以这种方式很容易造成数据不一致。

对于您的示例（考试中给定主题的问题数），您可以使用聚合轻松检索该信息：

```
select q.topic_id, count(gq.question_id)
from topic t join question q          on t.id = q.topic_id
             join general_question gq on q.id = gq.question_id
where gq.general_exam_id = 10
group by q.topic_ic; 
```

OTOH，如果您要存储的数据**无法**从其余数据中推导出来，那么是的，最好将其存储在有意义的地方 - 如果它特定于 pair `(exam, topic)`，那么在具有这两个值作为其[候选值的表上键](http://en.wikipedia.org/wiki/Candidate_key)（即完全按照您在问题中建议的方式）。是创建一个新表还是在现有表中添加这些列（当然，使用正确的候选键），这是你的选择，我没有任何支持或反对这样做的论据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:49:24.787

我们想说的是，这不是创建新的额外表所必需的。您希望通过对表的最少接触来有效地管理您的模式。

*设计规则：*

不应将特定教科书中的编号主题与主题表的 ID 号混淆。课程不一定必须属于考试。必须属于课程的是考试。到目前为止，您的设计是正确的。我假设您将所有考试问题存储在 GeneralQuestion 表中，该表的作用类似于过去考试的题库（包括在不久的将来安排考试，仅允许考试主持人访问）。

将 GeneralQuestions 表重命名为 ExamsQuestions 更有意义。使用这个银行，您的设计会制作两种虚拟问题类型：来自银行的考试问题和来自问题表的问题，其中考试问题引用您的问题表。这样就可以为您提供考试题库所需的参考密钥。在我看来，这是一个**历史**表。看起来，您不确定的最终表格理想情况下应该只是提供实时数据的**存储查询。**

主要问题：您是否打算存储每个过去/预定未来考试的问题？你说是。因此，

**根据我提供的设计，日期**在您的考试表中变得非常重要。您需要考试表中的日期和课程 ID。

以下是我建议表模式的方式。

*   **[SQLFiddle](http://sqlfiddle.com/#!2/79a01/5)上的参考**

*tbl课程*

身份证，课程

```
ID  NAME
b105    biology 1st year
c323    chemistry 1st year
e120    english 1st year
m122    maths 1st year
m250    maths 2nd year
p302    physics 3rd year 
```

*tblTopic*：虽然 ID 是索引，但 CID 是识别主题的父级（课程）的

ID、CID、主题

```
ID  CID     NAME
t1  m122    Algebra
t2  m122    Probability
t3  e120    Essay Writing
t4  p302    Optics
t5  b105    liver system
t6  b105    neural system
t7  p302    mechanics 
```

*tblQuestion*：虽然 ID 是索引，但 TID 是识别问题的父级（主题）的

ID、TID、问题

tblExam ：虽然 ID 是索引，但 CID 是识别问题父级（课程）的原因

```
ID, CID, Exam, Date

ID  TID     QUESTION
q1  t2  x
q10 t7  p
q11 t4  n
q12 t6  i
q13 t7  r
q14 t6  k
q2  t1  y
q3  t1  z
q4  t2  a
q5  t2  v
q6  t6  s
q7  t6  h
q8  t1  l
q9  t2  g 
```

tblExamsQuestions ：外键：考试 ID、问题 ID

身份证、身份证

```
ID  CID     EXAM    DATE
e1  b105    1st Year Biology Main Stream    June, 08 2012
e2  m122    1st Year Maths Elective     December, 20 2011
e3  b105    1st Year Biology Main Stream    February, 10 2012 
```

申请：有人想获得去年数学一年级课程的试题。你怎么查询？如果考试 ID 是自动递增的，那么很难知道哪个 id 是什么考试。因此，您可以在此处仅使用课程 ID 和举行考试的日期来搜索特定课程考试的问题。那应该可以完成工作->除非同一课程考试在同一天举行多次。然后您也可以按时间保存数据。只要您将考试表设计更改为按考试 ID 查询，您就可以删除日期、时间，其中 ID 是正确的考试 ID，而不仅仅是 1、2、3...

课程 ID = m122 日期 = 去年/月/日

这些是最合乎逻辑/最重要的详细信息，它们将用作**COMPOSITE SEARCH KEY**，您需要从考试表中找到考试 ID，并在 ExamsQuestions 银行中使用它来提取考试问题。

```
select * from question
where id in (
select eq.qid from examsquestions eq 
inner join exam e 
on e.id = eq.id
where e.date = '2011-12-20'
and e.cid = 'm122');

ID  TID     QUESTION
q1  t2  x
q5  t2  v
q7  t6  h 
```

顺便说一句，因为你是随机选择考试的问题 - 如果我必须参加那次考试，我会很担心。因为从一个主题中获得所有问题的风险非常广泛。无论如何，这是一个附带问题，我希望你有一个公正但*公平*的机制来从课程的所有主题生成考试；）

如果您还有其他疑问，请告诉我。任何人都请提出一些想法，以改进想法以获得更好的解决方案。

*PS：抱歉回复晚了。*

# highcharts - Highcharts：如何更改顺时针颜色？

> ID：13458302
> 
> 赞同：-2
> 
> 时间：2012-11-19T16:43:18.240
> 
> 标签：highcharts

我到处搜索如何更改速度表的顺时针颜色，但没有任何运气。

如果有人知道该怎么做，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:45:57.107

您指的是[这里](http://www.highcharts.com/component/content/article/2-news/46-gauges-ranges-and-polar-charts-in-beta#gauges)看到的绿色、黄色和红色条带吗？

如果是这样看：

```
 yaxis:{
        plotBands: [{
            from: 0,
            to: 120,
            color: '#55BF3B' // green
        }, {
            from: 120,
            to: 160,
            color: '#DDDF0D' // yellow
        }, {
            from: 160,
            to: 200,
            color: '#DF5353' // red
        }]
    } 
```

# c# - 在特定元素之前将元素添加到列表中

> ID：13458308
> 
> 赞同：6
> 
> 时间：2012-11-19T16:43:41.213
> 
> 标签：c#, list

我有一个项目清单，比如说 100 个项目。我需要在与我的条件匹配的现有元素之前添加另一个元素。最快的方法和最优化的性能是什么？IE。：

```
foreach (var i in myList)
{
    if (myList[i].value == "myValue")
    {
        myList[i-1] add ("someOtherValue")
    }
} 
```

也许我应该使用其他容器？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T16:49:55.997

首先，您可以使用[`FindIndex`方法](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)找到您的项目的索引：

```
var index = myList.FindIndex(x => x.value == "myvalue"); 
```

然后[`Insert`](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)在正确的位置：

```
myList.Insert(index,newItem); 
```

请注意，在给定索引处插入会推动其他所有内容（考虑在索引 0 处查找您的项目）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T17:05:55.973

Consider using a `LinkedList<T>`. It has the advantage that inserting or removing items does not require shifting any items. The disadvantage is that items cannot be accessed randomly. You have to traverse the list starting at the first or last item in order to access the items.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T16:48:38.870

```
myList.Insert(myList.IndexOf("myValue") - 1, "someOtherValue"); 
```

您可能应该首先检查以确保 myvalue 存在，并且它不在索引 0 中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T17:30:23.060

```
int index = myList.IndexOf("myValue");
if (index >= 0)
  myList.Insert(index, "myNewValue"); 
```

By the way, you should not modify your own collection or list while iterating with for-each (as in your code above).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T16:48:49.150

我认为列表是一个数组 - 在这种情况下，您是否尝试过使用 Linq 执行此操作？

```
string[] mylist = new string[100];
// init the list
List<string> list = keys.ToList();
list.Insert(1,"somethingelse");
mylist = list.ToArray(); // convert back to array if required 
```

如果是一`List`开始，您可以跳过转换并`Insert`直接使用。

# c# - CommandBinding 相对路径

> ID：13458311
> 
> 赞同：1
> 
> 时间：2012-11-19T16:43:51.687
> 
> 标签：c#, wpf, command, commandbinding

在我的窗口（比方说`MyCanvas`）中有一个新的命令定义，然后我将其绑定到我的窗口。通常和 Executed 的处理程序`CanExecute`直接在`MyCanvas`. 但是是否有可能将`CanExecute`and`Executed`处理程序绑定到相对路径，例如`MyCanvas.Logic.CanExecute_OpenCamera`？

这是我当前的 XAML。

```
<Window.Resources>
        <RoutedUICommand x:Key="OpenCamera" Text="Open camera" />
</Window.Resources>    
<Window.CommandBindings>
    <CommandBinding Command="{StaticResource OpenCamera}" CanExecute="CanExecute_OpenCamera" Executed="Executed_OpenCamera"/>
</Window.CommandBindings> 
```

这就是我要定义的。逻辑是 MyCanvas 的公共财产。

```
<Window.Resources>
        <RoutedUICommand x:Key="OpenCamera" Text="Open camera" />
</Window.Resources>    
<Window.CommandBindings>
    <CommandBinding Command="{StaticResource OpenCamera}" CanExecute="Logic.CanExecute_OpenCamera" Executed="Logic.Executed_OpenCamera"/>
</Window.CommandBindings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:08:46.743

可以，但是如果方法是静态的，则必须使用转换器从类的绑定对象或从其类型创建到各个方法的委托。有关详细信息，请参阅[http://wpfglue.wordpress.com/2012/05/07/commanding-binding-controls-to-methods/](http://wpfglue.wordpress.com/2012/05/07/commanding-binding-controls-to-methods/)。

# c# - 如何使用转换构造 LambdaExpression

> ID：13458313
> 
> 赞同：0
> 
> 时间：2012-11-19T16:43:53.003
> 
> 标签：c#, linq, sorting, dynamic, lambda

我需要按列名在 ajax 响应网格中排序。列值是存储为字符串的数字。

假设一些琐碎的类（在现实生活中不可能修改这个类）：

```
class TestObject
{
    public TestObject(string v)
    {
        this.Value = v;
    }
    public string Value { get; set; }
} 
```

然后简单的测试：

```
[Test]
public void LambdaConstructionTest()
{
   var queryable = new List<TestObject>
                   {
                       new TestObject("5"),
                       new TestObject("55"),
                       new TestObject("90"),
                       new TestObject("9"),
                       new TestObject("09"),
                       new TestObject("900"),
                   }.AsQueryable();

    var sortingColumn = "Value";

    ParameterExpression parameter = Expression.Parameter(queryable.ElementType);

    MemberExpression property = Expression.Property(parameter, sortingColumn);
    //// tried this one: var c = Expression.Convert(property, typeof(double));

        LambdaExpression lambda = Expression.Lambda(property, parameter); //// constructs: o=>o.Value

        var callExpression = Expression.Call(typeof (Double), "Parse", null, property); 

        var methodCallExpression = Expression.Call(
            typeof(Queryable),
            "OrderBy",
            new[] { queryable.ElementType, property.Type },
            queryable.Expression,
            Expression.Quote(lambda)); // works, but sorts by string values.
            //Expression.Quote(callExpression)); // getting: System.ArgumentException {"Quoted expression must be a lambda"}

        var querable =  queryable.Provider.CreateQuery<TestObject>(methodCallExpression);

        // return querable; // <- this is the return of what I need. 
} 
```

很抱歉在我的第一篇文章中不清楚，因为@SLaks 的答案是正确的，但我不知道在这种情况下如何构造正确的 lambda 表达式。

**终于找到**了适合在列中有字符串并且需要按转换后的双精度值排序的任何人的解决方案：（特别感谢@SLaks，他的帖子令人大开眼界）：

```
 [Test]
    public void LambdaConstructionTest2()
    {
        // GIVEN
        var queryable = new List<TestObject>
                            {
                                new TestObject("5"),
                                new TestObject("55"),
                                new TestObject("90"),
                                new TestObject("9"),
                                new TestObject("09"),
                                new TestObject("900"),
                            }.AsQueryable();

        var sortingColumn = "Value";

        // WHEN
        ParameterExpression parameter = Expression.Parameter(queryable.ElementType);

        MemberExpression property = Expression.Property(parameter, sortingColumn);

        MethodCallExpression callExpression = Expression.Call(typeof (Double), "Parse", null, property);

        LambdaExpression lambda = Expression.Lambda(callExpression, parameter); // = {Param_0 => Parse(Param_0.Value)}

        UnaryExpression unaryExpression = Expression.Quote(lambda); // Expression<Func<TestObject,double>> = {Param_0 => Parse(Param_0.Value)}

        var methodCallExpression = Expression.Call(
            typeof (Queryable),
            "OrderByDescending",
            new[] { queryable.ElementType, lambda.ReturnType },
            queryable.Expression,
            unaryExpression);

        var querable = queryable.Provider.CreateQuery<TestObject>(methodCallExpression);

        // THEN
        var expectedMaxValue = queryable.Max(x => Convert.ToDouble(x.Value));
        var expectedMinValue = queryable.Min(x => Convert.ToDouble(x.Value));

        var list = querable.ToList();

        var actualMaxValue = Convert.ToDouble(list.First().Value);
        var actualMinValue = Convert.ToDouble(list.Last().Value);
        Assert.AreEqual(expectedMaxValue, actualMaxValue);
        Assert.AreEqual(expectedMinValue, actualMinValue);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:45:42.717

您可以调用[`Expression.Call()`](http://msdn.microsoft.com/en-us/library/bb341086.aspx)来创建调用方法的表达式节点。

```
Expression.Call(typeof(Double), "Parse", null, property) 
```

# c4 - 为什么 C4 github 示例缺少对 iPad 模拟器的支持？

> ID：13458316
> 
> 赞同：2
> 
> 时间：2012-11-19T16:44:18.537
> 
> 标签：c4

我最近从[https://github.com/C4Code](https://github.com/C4Code)下载了 testScrollView 和 WalkCycle 示例，但最顶部工具栏中的下拉窗口缺少选择 iPad 模拟器作为目标设备的选项。我是否必须启用某些功能才能正确显示此菜单，或者这是 C4/XCode 版本之间不兼容的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:51:45.110

我最近升级到了 iOS 6，所以我在网上构建和发布的所有项目都将针对 iOS 6.0 模拟器。

检查以下链接，那里的答案将向您展示如何更改设置以便为 iOS 5.1 模拟器构建：

[Xcode 4 - IOS - 模拟器不可用作构建目标](https://stackoverflow.com/questions/10121143/xcode-4-ios-simulator-not-available-as-build-target)

# microdata - itemprop 引用外部 itemscope

> ID：13458317
> 
> 赞同：0
> 
> 时间：2012-11-19T16:44:36.687
> 
> 标签：microdata, schema.org

我有一个包含与会者表格的活动的项目范围。

我希望能够同时将 table as`itemscope itemtype="[...]Table"`和 table 的行作为`itemprop="attendee"`引用 external `itemscope itemtype="[...]Event"`。就像是：

```
itemscope itemtype=Event
    itemprop something about Event
    itemprop another thing about Event
    itemscope itemtype=Table
        itemprop=attendee referring to the Event, not the Table
        ... 
```

但是，如果我使用我在上面写的内容，则该`attendee`属性将引用`Table`范围。有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:28:06.373

我认为您可能可以使用`itemref`. `id`这允许您使用相关元素上的an 来引用先前指定的微数据位。此处的规范：http: [//www.w3.org/TR/2011/WD-microdata-20110405/#attr-itemref](http://www.w3.org/TR/2011/WD-microdata-20110405/#attr-itemref)

# android - Android 元数据查找服务

> ID：13458318
> 
> 赞同：0
> 
> 时间：2012-11-19T16:44:36.120
> 
> 标签：android, metadata, lookup

iTunes 提供了一个[查找服务](https://itunes.apple.com/lookup?id=481664999)，用于将元数据收集为给定应用 ID 的应用的 JSON。

Android有类似的服务吗？它不必是 Web 服务或必须返回 JSON，Java API 或类似的也很有用。

由于 Android 有很多商店，因此可能会有很多查找服务。如果是这样，尽可能多的 API 将是有用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T13:30:30.893

目前似乎没有适用于 Android 的工具。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T11:36:04.753

也许这个可以帮助你[http://developer.android.com/guide/topics/search/index.html](http://developer.android.com/guide/topics/search/index.html)。

# php - foreach 循环中的 PDO 查询

> ID：13458323
> 
> 赞同：1
> 
> 时间：2012-11-19T16:44:50.533
> 
> 标签：php, mysql, pdo

我想做这样的事情，但它不起作用，我的意思是没有返回任何元素，即空查询。我怎么能做到这一点？

```
foreach ($ghasharr as $key=>$val)
{
$stmt = $db->prepare("SELECT COUNT(id) as ccount FROM pics WHERE gallery=:ghash");
$stmt->bindValue(":ghash", $key);
$results = $stmt->execute();
$countarr[$results['ccount']] = $results['ccount'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:52:04.943

> **`PDOStatement::execute`**
> 
> 成功时返回 TRUE，失败时返回 FALSE。

即你`$results`的不是一个数组。您想`fetch`使用`$stmt`. 您也不必一遍又一遍地准备声明：

```
$stmt = $db->prepare('SELECT COUNT(id) as ccount FROM pics WHERE gallery = :ghash');
$stmt->bindParam(':ghash', $key);

foreach (array_keys($ghasharr) as $key) {
    $stmt->execute();
    $results = $stmt->fetch(PDO::FETCH_ASSOC);
    $countarr[$results['ccount']] = $results['ccount'];
} 
```

# php - 3 个 ips，3 个端口需要随机选择并设置为一个变量 - 这可能吗？

> ID：13458324
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:45:03.543
> 
> 标签：php

我有一个连接到广播电台服务器的 PHP 脚本，但是我们有 3 个服务器需要随机连接，所有内容都在配置文件中设置，即

```
// ip or url of shoutcast server
$scip = "123.123.123.123";
// port of shoutcast server
$scport = "8026"; 
```

但是我需要能够设置 3 个 ips 和 3 个相关端口，例如：

```
$serv_1 = '123.123.123.123';
$port_1 = '8026';
$serv_2 = '456.456.456.456';
$port_2 = '8702';
$serv_3 = '789.789.789.789';
$port_3 = '8026'; 
```

我需要做的是，当页面加载时随机选择和 ip 及其相关端口，然后设置为主 scip 和 scport 变量，以便侦听器位于随机广播服务器上，并且所有内容不只是设置为 1 个服务器

我正在考虑在 PHP 中执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:49:49.863

像这样的东西怎么样...

```
$serv[1]['serv'] = '123.123.123.123';
$serv[1]['port'] = '8026';
$serv[2]['serv'] = '456.456.456.456';
$serv[2]['port'] = '8702';
$serv[3]['serv'] = '789.789.789.789';
$serv[3]['port'] = '8026';

$randNo = rand(1,3);
$randServ = $serv[$randNo]['serv'];
$randPort = $serv[$randNo]['port']; 
```

将服务器和端口放在一个多维数组中，用唯一的数字 (1-3) 定义每一个。在 1 到 3 ( ) 之间随机选择一个数字，`rand(1,3)`然后使用该数字获取随机服务器和端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:50:47.747

```
$servers=array("1.1.1.1:8026", "2.2.2.2:8702", "3.3.3.3:8026");
$server = $servers[array_rand($servers)];
$exploded = explode(":", $server);
$scip=$exploded[0];
$scport=$exploded[1]; 
```

# google-maps - 在打字稿类中创建谷歌地图实例

> ID：13458328
> 
> 赞同：10
> 
> 时间：2012-11-19T16:45:25.350
> 
> 标签：google-maps, typescript

嗨，我是 Typescript 和 Javascript 的新手，我在创建 googlemap 实例时遇到了一些问题。

我已经下载了[google.maps.d.ts](http://nuget.org/packages/google.maps.d.ts/)声明文件并将其导入到我的打字稿类中，所有的智能感知都可以正常工作等等；

```
import googleMaps = module("google.maps"); 
module Mapping {
    export class GoogleMap implements IMap {

        public name: string;
        private map: any;
        private options: any;

        constructor (mapDiv:Element) {
            this.name = "GoogleMap";
            this.options = { zoom: 3, MapTypeId: 'terrian' };
            this.map = new googleMaps.google.maps.Map(mapDiv, this.options);
         }
    }
} 
```

当我尝试在我的 index.cshtml 文件中创建此类时；

```
<!DOCTYPE html>
<html>
    <head><title>TypeScript Mapping</title></head>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?    key=MYKEYGOESHERE&sensor=false"></script>
    <script type="text/javascript" src="~/scripts/require.js"></script>
    <script type="text/javascript" src="~/typings/Mapping.js"></script>
    <script type="text/javascript">
        function initialize() {

            var mapCanvas = document.getElementById("map");

            var googleMap = new Mapping.GoogleMap(mapCanvas);
        }
    </script>
<body onload="initialize()">
<div id="map" style="height: 512px; width: 512px;"></div> 
```

我收到以下错误；

Microsoft JScript 运行时错误：尚未为上下文加载模块名称“google.maps”：_。使用要求（[]）

为了加载 googlemaps api，我缺少什么？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T17:04:38.633

由于您在页面上包含 Google 地图作为`script`标签，因此您可能不想使用模块加载器来加载它。

所以我会替换：

```
import googleMaps = module("google.maps"); 
```

和

```
/// <reference path="./google.maps.d.ts" /> 
```

该引用对 TypeScript 说“我将确保此脚本在运行时可用”。

导入语句说“在运行时为我加载这个脚本”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T00:04:19.417

我喜欢创建一个叫做`shim`函数的东西，它可以让我使用窗口变量/对象（比如`google`）。我创建了那个`.ts`文件：

```
// -- Shim.ts:

/**
 * Loads variable from window according to
 * the name parameter.
 * 
 * @export
 * @param {string} name
 * @returns {*} window[name]
 */
export function shim(name: string): any {
    let global: any = window;
    return global[name];
} 
```

我的基本设置比看起来像：

```
- main.ts
-- shims
-- -- Shim.ts
-- -- Google.ts
-- -- Swiper.ts
-- -- ... .ts 
```

并且 Google.ts 不会简单地使用该功能，例如：

```
// -- Google.ts

import { shim } from '../shims/Shim';

/**
 * Loads variable from window with the
 * name 'google'
 * 
 * @export
 * @returns {*} window['google']
 */
export let google = shim('google'); 
```

无论您想在哪里使用 google 变量，只需将其包括在内：

```
import { google } from '../shims/Google'; 
```

也许还可以看看[打字](https://github.com/typings/typings)- 打字是管理和安装 TypeScript 定义的简单方法 - 这对我有很大帮助。

我目前编写了另一个 Typescript Google Maps Setup 并考虑与社区分享。

您可以使用以下链接查看：[https ://github.com/DominikAngerer/typescript-google-maps](https://github.com/DominikAngerer/typescript-google-maps)

# ruby - Redmine - 积压 - 没有要加载的此类文件 - nokogiri

> ID：13458336
> 
> 赞同：1
> 
> 时间：2012-11-19T16:46:03.027
> 
> 标签：ruby, redmine, redmine-plugins

我正在尝试在 ubuntu 12.10 下使用 redmine 2.1.2 安装 backlogs 0.9.9。

遵循[积压安装指南](https://github.com/backlogs/redmine_backlogs/wiki/Installation-of-Backlogs-in-Redmine-2.0)

```
remine_install_path$ RAILS_ENV=production bundle exec rake db:migrate

rake aborted!
No such file to load -- nokogiri
/home/git/redmine/vendor/bundle/ruby/1.9.1/gems/acti...
[...] 
```

然而 nokogiri 似乎在那里

```
$ gem list | grep nokogiri
nokogiri (1.5.5) 
```

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:23:54.230

我本可以简单地添加

```
gem "nokogiri" 
```

进入`redmine_install/Gemfile`

**但是** `backlogs`（我试图安装的插件）如果我没有愚蠢地删除积压的 Gemfile 应该已经包含依赖项。

最后我只需要重新检查积压的资源来取回我的 Gemfile

```
backlogs_plugin_path$ git checkout "latest_version" 
```

将“latest_version”替换为最新版本（用 找到`git tags`）

# sql-server - 无法在 Express Edition 上恢复启用 CDC 的数据库

> ID：13458338
> 
> 赞同：0
> 
> 时间：2012-11-19T16:46:05.043
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, change-data-capture

还原数据库时出现此错误

**SQL Server 无法加载数据库“XXX”，因为已启用更改数据捕获。当前安装的 SQL Server 版本不支持更改数据捕获。使用受支持的 SQL Server 版本禁用数据库中的变更数据捕获，或者将实例升级到支持变更数据捕获的实例。**

Mine SQL Server Microsoft SQL Server 2008 R2 (SP2) - 10.50.4000.0 (Intel X86) Jun 28 2012 08:42:37 版权所有 (c) Microsoft Corporation Express Edition with Advanced Services on Windows NT 6.1 (Build 7600:) 我知道那里不是 Express Edition 中 CDC 的功能，但我得到了 XXX.bak 文件，我需要在我的 sql 服务器上恢复该文件。是否有任何脚本可以从文件中删除 CDC 功能？

# c++ - 编译期间未定义的引用

> ID：13458339
> 
> 赞同：0
> 
> 时间：2012-11-19T16:46:09.940
> 
> 标签：c++, makefile

我想写一个make文件，但我退出了新手。我有包含我`l_mpc.h` `helper.h`编写的主文件，我也在使用 gnuplot，因此我需要 gnuplot_i.hpp。

这是我的制作文件

```
CPPFLAGS=-I /usr/local/include/eigen3

dc_motor_main.out : dc_motor_main.o 
    g++ -o main.out dc_motor_main.o

dc_motor_main.o: l_mpc.o helper.o 
    g++ $(CPPFLAGS) -c dc_motor_main.cpp l_mpc.o helper.o 

gnuplot_i.o: gnuplot_i.hpp
    g++ $(CPPFLAGS) -c gnuplot_i.hpp 

l_mpc.o: l_mpc.cpp l_mpc.h
    g++ $(CPPFLAGS) -c l_mpc.cpp

helper.o: helper.cpp helper.h
    g++ $(CPPFLAGS) -c helper.cpp

clean:
    rm *.o dc_motor_main.out 
```

输出如下：

```
g++ -I /usr/local/include/eigen3 -c l_mpc.cpp
g++ -I /usr/local/include/eigen3 -c helper.cpp
g++ -I /usr/local/include/eigen3 -c dc_motor_main.cpp l_mpc.o helper.o 
g++: warning: l_mpc.o: linker input file unused because linking not done
g++: warning: helper.o: linker input file unused because linking not done
g++ -o main.out dc_motor_main.o
dc_motor_main.o: In function `main':
dc_motor_main.cpp:(.text+0x3ab3): undefined reference to `SysMat::SysMat()'
dc_motor_main.cpp:(.text+0x40fa): undefined reference to `SysMat::calcMPCFi(int)' 
```

在`SysMat::SysMat()`l_mpc.h 中，我在哪里犯了错误？

这是我的头文件：main.cpp

```
#include <iostream>
#include <Eigen/Dense>
#include <sys/time.h>

#include "gnuplot_i.hpp"
#include "l_mpc.h"
#include "helper.h"

#define DEBUG 1

int main( int argc, char* argv[])
{   .... 
```

助手.h

```
#include <iostream>
#include <Eigen/Dense>
#include <sys/time.h>
#include "gnuplot_i.hpp"

using namespace Eigen;

double now();
void plot_x(MatrixXd, Gnuplot *);
void plot_x(MatrixXd, float, Gnuplot *);
void plot_xy(MatrixXd, MatrixXd,  Gnuplot *);
void plot_xy(MatrixXd, Gnuplot *);

template <typename T> int sgn(T val) {
    return (T(0) < val) - (val < T(0));
} 
```

l_mpc.h

```
#include <iostream>
#include <Eigen/Dense>
#include <sys/time.h>
#include "gnuplot_i.hpp"

using namespace Eigen;

class SysMat
{
    public:
        MatrixXd Fi;
        MatrixXd Ga;
        MatrixXd C;
        MatrixXd Er;
    private:    
        MatrixXd MPCFi;
        MatrixXd MPCGa;
        MatrixXd MPCGy;     
    public:
        SysMat(MatrixXd, MatrixXd, MatrixXd);
        SysMat();
        ~SysMat();
        void calcMPCFi(int);
        void calcMPCGa(int);
        void calcMPCGy(int, int);
        MatrixXd calcContSig(MatrixXd, MatrixXd, MatrixXd);
        MatrixXd calcError(MatrixXd, MatrixXd, MatrixXd);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:56:09.100

错误似乎在这里

```
dc_motor_main.out : dc_motor_main.o 
    g++ -o main.out dc_motor_main.o

dc_motor_main.o: l_mpc.o helper.o 
    g++ $(CPPFLAGS) -c dc_motor_main.cpp l_mpc.o helper.o 
```

应该

```
main.out : dc_motor_main.o l_mpc.o helper.o 
    g++ -o main.out dc_motor_main.o l_mpc.o helper.o

dc_motor_main.o: l_mpc.o helper.o 
    g++ $(CPPFLAGS) -c dc_motor_main.cpp 
```

假设您希望调用可执行文件`main.out`。

当您使用 g++`-c`选项时，您只是在编译。最后一步`-c`称为链接，它应该将您通过编译每个 *.cpp 文件创建的所有 *.o 文件链接在一起。

正如奥拉夫在他的回答中所说，有多种方法可以减少重复性，但以上是基本步骤，无论你怎么做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:53:10.760

Make 已经知道如何从适当的来源构建目标文件。因此，大多数时候您只需要定义依赖项，您可以将 Makefile 简化为

```
CPPFLAGS=-I /usr/local/include/eigen3
LDFLAGS = # insert linker flags, if needed
LDLIBS = # insert needed libraries here

OBJS = \
dc_motor_main.o  \
gnuplot_i.o \
l_mpc.o \
helper.o \

dc_motor_main.out: $(OBJS)
    g++ $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)

gnuplot_i.o: gnuplot_i.hpp

l_mpc.o: l_mpc.h

helper.o: helper.h

clean:
    rm $(OBJS) dc_motor_main.out 
```

请记住，命令必须以制表符作为前缀。*不要*插入空格。

# asp.net - 为什么 Visual Studio 2012 会阻止保存未经验证的 aspx 页面？

> ID：13458343
> 
> 赞同：0
> 
> 时间：2012-11-19T16:46:19.810
> 
> 标签：asp.net, validation, visual-studio-2012, settings, resharper

我的公司最近迁移到 Visual Studio 2012，我正在使用它来开发使用 ASPX 页面的 Web 应用程序。这些页面在代码隐藏文件中使用 C# 进行拆分。在使用 2012 几个星期后，我注意到一些事情：如果我的 ASPX 页面没有正确验证 HTML5 标准（即我在某处缺少结束标记），页面将不会保存。此问题不会出现在代码隐藏文件中，也不会出现在 Razor 页面上。

我简要浏览了标准的 Visual Studio 设置页面，但找不到允许保存无效代码的设置。我还安装了 Resharper（以及 Productivity Power Tools），但在任何一个扩展中都找不到与我的问题相关的设置。如果重要的话，我正在从事的项目是 TFS 解决方案的一部分。

有没有其他人遇到过这个问题？如果是这样，是否有人知道可能导致我可能忽略的设置？

**更新：**自发布此消息以来，我注意到即使页面经过验证，我也无法保存。Visual Studio 允许我保存页面可能需要一分钟。时间的长短可能与我在尝试保存之前输入的文本量有关。

**更新 2：**在与具有类似扩展集的同事交谈后，我确定 Resharper 一定是导致问题的原因。如果有人知道可能导致此问题的 Resharper 7 设置，请告诉我。我不知道这是一个错误还是一个预期的功能。

**最终更新：**感谢所有提供帮助的人，但在安装 Visual Studio Update 1 后，我不再注意到该问题。这似乎是一个通过更新修复的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:24:32.267

如问题的最后更新部分所述，安装 Visual Studio Update 1 后，我不再注意到该问题。这似乎是一个通过更新修复的错误。问题解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-06T18:11:50.293

Grrr，2015 年仍在发生，我什至没有安装 ReSharper 或 Productivity Power Tools。我找到了解决方法。我退出了 VS，对保存弹出窗口中的项目说“是”，重新打开它，发现它们已保存到旧状态。我重新更改了代码，保存了（花了几秒钟但可能不到一分钟），然后重新编译，而这些更改花费了这段时间。

很高兴当我退出并保存（不成功）时，它至少显示代码处于旧状态，而不是显示带有永久星号的新代码。

我以前从未见过这种情况，希望再也不会出现这种情况。

# hadoop - 通过 DistributedCache 读取本地文件时出现 OutofMemoryError

> ID：13458349
> 
> 赞同：5
> 
> 时间：2012-11-19T16:46:29.303
> 
> 标签：hadoop, mapreduce, out-of-memory

2012 年 11 月 21 日更新：

通过将属性 mapred.child.java.opts 设置为 -Xmx512m 解决了问题。在此之前，我在 core-site.xml 中将 HADOOP_HEAPSIZE 设置为 2000，但这并没有帮助。我仍然不明白为什么该程序在本地工作，但它不是分布式的。感谢所有的答案。

我正在使用 Hadoop 1.0.3。该集群由三台机器组成，它们都运行 Ubuntu Linux 12.04 LTS。其中两台机器有 12 GB 的 RAM，第三台有 4 GB。我正在通过 DistributedCache 读取大约 40 MB 的本地文件。我的程序在本地环境（本地/独立模式）中完美运行。但是，当我在 Hadoop 集群（完全分布式模式）中执行它时，我得到一个“OutOfMemoryError: Java heap space”，具有相同的 40 MB 文件。我不明白为什么会发生这种情况，因为文件不是那么大。这是代码：

```
 public static class MapClass extends MapReduceBase implements Mapper<LongWritable, Text, Text, Text> {
    // ...
    private HashMap<String, String> urlTrad = new HashMap<String, String>();
    // ...
    @Override
    public void configure(JobConf job) {
        Path[] urlsFiles = new Path[0];
        BufferedReader fis;

        try {
            urlsFiles = DistributedCache.getLocalCacheFiles(job);
            fis = new BufferedReader(new FileReader(
                    urlsFiles[0].toString()));
            String pattern;
            while ((pattern = fis.readLine()) != null) {
                String[] parts = pattern.split("\t");
                urlTrad.put(parts[0], parts[1]);
            }
            fis.close();

        } catch (IOException ioe) {
            System.err
                    .println("Caught exception while parsing the cached file '"
                    + urlsFiles[0]
                    + "' : "
                    + StringUtils.stringifyException(ioe));
        }
    }
    // ... 
```

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T12:10:48.980

通过将属性 mapred.child.java.opts 设置为 -Xmx512m 解决了问题。在此之前，我在 core-site.xml 中将 HADOOP_HEAPSIZE 设置为 2000，但这并没有帮助。我仍然不明白为什么该程序在本地工作，但它不是分布式的。

# dart - Dart：如何从类中获取“类型”

> ID：13458350
> 
> 赞同：2
> 
> 时间：2012-11-19T16:46:35.440
> 
> 标签：dart

如何获取给定类的“类型”实例？

基于[http://www.dartlang.org/articles/m1-language-changes/#first-class-types](http://www.dartlang.org/articles/m1-language-changes/#first-class-types)，例如如下构造：

```
class Foo{}

Type type = Foo; 
```

似乎可以通过分析器，但在 Dartium 中运行时会出错。这只是 VM 中尚不支持，还是语法错误？或者我是否需要以某种方式注释 Foo ，以便在运行时保留类型信息，或者其他什么？

谢谢

理查德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:46:27.617

基于[https://groups.google.com/a/dartlang.org/forum/#!msg/misc/P3XdXeoZ4CY/9IBwkV-CTy0J](https://groups.google.com/a/dartlang.org/forum/#!msg/misc/P3XdXeoZ4CY/9IBwkV-CTy0J)我猜这个功能还没有在 dart vm 中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-03T20:26:33.647

现在您可以使用[https://api.dartlang.org/stable/2.3.1/dart-core/Object/runtimeType.html](https://api.dartlang.org/stable/2.3.1/dart-core/Object/runtimeType.html)。

```
class Foo{}
var foo = Foo();

assert(foo.runtimeType == Foo); 
```

# visual-studio-2010 - 在 VS 2010 中添加时未列出存储过程

> ID：13458353
> 
> 赞同：1
> 
> 时间：2012-11-19T16:46:47.563
> 
> 标签：visual-studio-2010, stored-procedures

我有一个带有 2 个架构、dbo 和 Form 的数据库。在 dbo 我创建了一个存储过程。我正在开发一个 ASP MVC 应用程序。我进入 VS2010，进入代表 dbo 模式的 edmx 文件并尝试“从 DB 更新模型”，以将 SP 放入应用程序，但未列出。

我认为这是一个安全问题（实体连接使用用户名和密码），但我不确定我需要授予哪些权限，但我可能完全错了。

关于如何解决这个问题的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:49:43.943

您必须向 VS 正在连接的用户授予执行权限。我经常忘记这样做并遇到同样的问题。

# python - Tkinter 多帧调整大小

> ID：13458355
> 
> 赞同：4
> 
> 时间：2012-11-19T16:46:50.640
> 
> 标签：python, resize, tkinter, frame, scrollable

我有一台可以理解多种串行协议的设备。在开发过程中，我创建了简单的 Tkinter UI 来使用协议。每个协议都有一个新的 UI。由于协议有很多命令，我在一个可滚动的画布中实现了整个 UI，以便在较小的显示器上使用时可以滚动它。单独的 UI 工作正常，我现在正尝试将单独的 UI 组合成一个选项卡式 UI。

每个 UI 的共同元素是串行端口选择器，我将其分离出来并放入单独的顶部框架中。然后我实现了一个笔记本，并将每个协议 UI 放入每个选项卡的框架中。

但我无法正确控制大小：我希望将根窗口宽度固定为任何协议框架或串行选择器框架的最大宽度，并禁用水平调整大小。我希望串行选择器始终存在，并且在垂直调整窗口大小时不受影响（仅调整笔记本大小/滚动）。

以下是我到目前为止所拥有的。所有的部分都存在，但笔记本没有填满整个窗口宽度，并且在调整窗口大小时笔记本不会调整大小（调整大小只会增加空白空间）。

```
def main():
    ## Main window
    root = Tkinter.Tk()
    root.title("Multi-Protocol UI")

    ## Grid sizing behavior in window
    root.grid_rowconfigure(0, weight=0)
    root.grid_rowconfigure(1, weight=1)
    root.grid_columnconfigure(0, weight=1)
    root.grid_columnconfigure(1, weight=0)

    ## Window content
    upper = ttk.Frame(root)   # Serial port selector
    upper.grid(row=0)
    upper.grid_rowconfigure(0, weight=0)
    upper.grid_columnconfigure(0, weight=1)
    upper.grid_columnconfigure(1, weight=0)
    lower = ttk.Frame(root)   # For protocols
    lower.grid(row=1)
    lower.grid(row=1, sticky='nswe')
    lower.grid_rowconfigure(0, weight=1)
    lower.grid_columnconfigure(0, weight=1)
    lower.grid_columnconfigure(1, weight=0)

    # Setup serial control frame
    serial = SerialFrame(master=upper)  # Serial port selector widget + Open button

    ## Protocol GUIs are large: Use a form within a scrollable canvas.
    cnv = Tkinter.Canvas(lower)
    cnv.grid(row=0, column=0, sticky='nswe')
    cnv.grid_rowconfigure(0, weight=1)
    cnv.grid_columnconfigure(0, weight=1)
    cnv.grid_columnconfigure(1, weight=0)
    # Scrollbar for canvas
    vScroll = Tkinter.Scrollbar(
        lower, orient=Tkinter.VERTICAL, command=cnv.yview)
    vScroll.grid(row=0, column=1, sticky='ns')
    cnv.configure(yscrollcommand=vScroll.set)
    # Frame in canvas
    window = Tkinter.Frame(cnv)
    window.grid()
    # Put the frame in the canvas's scrollable zone
    cnv.create_window(0, 0, window=window, anchor='nw')

    # Setup the notebook (tabs) within the scrollable window
    notebook = ttk.Notebook(window)
    frame1 = ttk.Frame(notebook)
    frame2 = ttk.Frame(notebook)
    notebook.add(frame1, text="ProtoA")
    notebook.add(frame2, text="ProtoB")
    notebook.grid(row=0, column=0, sticky='nswe')

    # Create tab frames
    protoA = ProtoAFrame(master=frame1)
    protoA.grid()
    protoA.update_idletasks()
    protoB = ProtoBFrame(master=frame2)
    protoB.grid()
    protoB.update_idletasks()

    ## Update display to get correct dimensions
    root.update_idletasks()
    window.update_idletasks()
    ## Configure size of canvas's scrollable zone
    cnv.configure(scrollregion=(0, 0, window.winfo_width(), window.winfo_height()))

    # Not resizable in width:
    root.resizable(width=0, height=1)

    ## Go!
    root.mainloop() 
```

如何锁定顶部串行框架，将笔记本扩展至全宽，并强制调整窗口大小以仅影响笔记本框架？我是 Tkinter 新手，所以如果我错过了一些“明显”的东西，请保持温柔。

蒂亚！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T17:50:04.193

您有嵌套在小部件内的小部件。即使您将笔记本设置为在其容器中正确展开，您也需要确保每个向上的容器也正确展开。你没有这样做。例如，问问自己画布是否已设置为在`lower`.

既然你刚开始，这是我推荐的。与其试图一次把所有事情都做好，不如选择“分而治之”的方法。首先，为 GUI 的主要区域创建框架。除了那些框架，什么都不做，并让它们的调整大小行为完全符合您的要求。在此阶段为每个小部件赋予自己的颜色会有所帮助，这样您就可以清楚地看到小部件的位置。您以后可以随时更改颜色。此外，如果您只有几个小部件，或者所有小部件都是水平或垂直方向的，那么打包通常比网格更容易使用。

例如：

```
upper.pack(side="top", fill="x", expand=False)
lower.pack(side="bottom", fill="both", expand=True) 
```

一旦你对这些主要部分进行了适当的调整，就可以只解决其中一个领域的问题了。选择一个区域，然后做同样的事情：添加它的子小部件，或者如果您在一个区域中有区域，则细分为框架。一旦你有这个工作，泡沫，冲洗，重复。

# scala - scalaz.Validation loopSuccess 和 loopFailure 是如何工作的

> ID：13458365
> 
> 赞同：9
> 
> 时间：2012-11-19T16:47:16.860
> 
> 标签：scala, scalaz, scalaz7

有人可以用现实世界的例子来解释下面的方法是如何工作的`scalaz.Validation`吗？我的意思是`loopSuccess`和`loopFailure`。

源代码（scalaz7）的片段：

**scalaz.验证：**

```
/** Spin in tail-position on the success value of this validation. */
def loopSuccess[EE >: E, AA >: A, X](success: AA => X \/ Validation[EE, AA], failure: EE => X): X =
Validation.loopSuccess(this, success, failure)

/** Spin in tail-position on the failure value of this validation. */
def loopFailure[EE >: E, AA >: A, X](success: AA => X, failure: EE => X \/ Validation[EE, AA]): X =
Validation.loopFailure(this, success, failure) 
```

**伴侣对象：**

```
object Validation extends ValidationFunctions with ValidationInstances {

  /** Spin in tail-position on the success value of the given validation. */
  @annotation.tailrec
  final def loopSuccess[E, A, X](d: Validation[E, A], success: A => X \/ Validation[E, A], failure: E => X): X =
    d match {
      case Failure(e) => failure(e)
      case Success(a) => success(a) match {
        case -\/(x) => x
        case \/-(q) => loopSuccess(q, success, failure)
      }
    }

  /** Spin in tail-position on the failure value of the given validation. */
  @annotation.tailrec
  final def loopFailure[E, A, X](d: Validation[E, A], success: A => X, failure: E => X \/ Validation[E, A]): X =
    d match {
      case Failure(e) => failure(e) match {
        case -\/(x) => x
        case \/-(q) => loopFailure(q, success, failure)
      }
      case Success(a) => success(a)
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T16:50:52.370

这类似于[蹦床](http://apocalisp.wordpress.com/2011/10/26/tail-call-elimination-in-scala-monads/)。对于 loopSuccess，您提供一个初始值和一个带您进入下一个状态的函数。有 3 种可能的下一个状态：

```
X.left           // stop processing with X as the result
Success(a).right // no result, run the next iteration with this value
Failure(e).right // stop processing, run the failure function on this result and return it 
```

For loopFailure 对失败和成功做同样的事情，所以你继续运行，直到你返回一个左或一个成功。

下面是一个使用 loopSuccess 的例子：

```
import scalaz._
import Scalaz._

object TestLoopSuccess extends App {
  // check if a number divides another, returning a Failure for division by zero
  val divides : Int => Int => Validation[String,Boolean] = { div => num =>
    if(div == 0) "division by zero".failure
    else (num % div == 0).success
  }

  val allDivide : Int => List[Int] => String \/ Validation[Int,List[Int]] = { div => nums => 
    nums match {
      // empty list means we are done, so we return a left
      case Nil => "All numbers divide".left

      // process the head of the list and return a right
      case x::xs => divides(div)(x).flatMap { divides => 
        if(divides) 
          // head divides, so process more of the list
          xs.success 
        else 
          // head does not divide, so we are done
          "%d is not a multiple of %d".format(x,div).failure
      }.right
    }
  }

  println(Validation.loopSuccess(List(2,4,6,8).success[String], allDivide(0), identity[String])) // "division by zero"
  println(Validation.loopSuccess(List(2,4,6,8).success[String], allDivide(2), identity[String])) // "All numbers divide"
  println(Validation.loopSuccess(List(2,4,7,8).success[String], allDivide(2), identity[String])) // "7 is not a multiple of 2"
} 
```

# node.js - NodeJS Express 不提供“/socket.io/socket.io.js”

> ID：13458366
> 
> 赞同：10
> 
> 时间：2012-11-19T16:47:21.307
> 
> 标签：node.js, express, socket.io

我正在尝试构建 NodeJS/Express/SocketIO 应用程序。

进口：

```
var     express     = require('express')
    ,   app         = express()
    ,   server      = require('http').createServer(app)
    ,   io          = require('socket.io').listen(server)... 
```

配置：

```
app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser('your secret here'));
    app.use(express.session());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
}); 
```

在我的 Jade 模板中：

```
script(type='text/javascript', href='/socket.io/socket.io.js') 
```

但是当我尝试访问它时，'/socket.io/socket.io.js' 不可用

```
http://localhost:3000/socket.io/socket.io.js 
```

正如它所说：

> 无法获取 /socket.io/socket.io.js

如何从已安装的模块中提供 socket.io.js？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:53:00.263

您需要将客户端代码从内部 Socket.io 目录复制到您的公共目录。在 Socket 0.9 中，可分发文件的路径是`node_modules/socket.io/node_modules/socket.io-client/dist`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T17:25:38.860

您不必复制任何文件，socket.io 将负责文件的传递。

```
var express = require('express'),
    app     = new express(),
    server  = require('http').createServer(app),
    io      = require('socket.io').listen(server) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-13T19:55:39.903

在 Express 3/4 中，您可以像这样初始化 socket.io：

```
var io = require("socket.io")(app.listen(80)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-12T09:42:26.730

有错误，使用

```
script(type='text/javascript', src='/socket.io/socket.io.js') 
```

代替

```
script(type='text/javascript', href='/socket.io/socket.io.js') 
```

# c - 是否有任何库为 C/C++ 守护程序提供管理 CLI？

> ID：13458369
> 
> 赞同：3
> 
> 时间：2012-11-19T16:47:23.020
> 
> 标签：c, admin, command-line-interface, daemon

我正在寻找某种可以嵌入 C/C++ 守护进程的嵌入式 shell。这个想法是我们可以远程登录到正在监听的端口，并更改配置/查看状态/等。

类似于 Quagga/Zebra 的 CLI（以 IOS 为模型）或类似的东西。理想情况下，它具有类似 readline 的支持，易于使用，并且易于扩展，以便我们向其添加新功能。

我曾考虑过使用嵌入式 Python 或 Lua 之类的东西来提供该语言的 shell，但我从未真正见过其他人这样做。

还有其他人介意他们以前是如何做到这一点的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:16:26.413

libcli 会做你想做的事。它还具有身份验证功能，可在命令行、telnet 上运行，并且您可以轻松地构建客户端以随心所欲地工作。非常喜欢自动完成、子命令等 cisco。你可以在这里找到它： [https ://github.com/dparrish/libcli](https://github.com/dparrish/libcli)

这是一个实现命令“hello”并让您在端口 12345 上远程登录到它的小示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>

#include <libcli.h>

int call_hello(struct cli_def *cli, char *name, char **argv, int argc) {
    cli_print(cli, "hello world");
    return 0;
}

int main(void) {
    struct cli_def *cli;
    int sockfd;
    int acceptfd;
    struct sockaddr_in saddr, raddr;
    unsigned int on = 1;
    unsigned int rlen = sizeof(struct sockaddr_in);
    cli = cli_init();
    cli_register_command(cli, NULL, "hello", call_hello,
                         PRIVILEGE_UNPRIVILEGED, MODE_ANY, "runs hello world");

    if((sockfd=socket(AF_INET, SOCK_STREAM, 0)) == -1) {
         perror("socket");
         exit(-1);
    }
    saddr.sin_port = htons(12345);
    saddr.sin_family = AF_INET;
    saddr.sin_addr.s_addr = INADDR_ANY;
    memset(&raddr, 0, sizeof(raddr));
    raddr.sin_family=AF_INET;
    if(setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on)) != 0) {
        perror("setsockopt");
        exit(-1);
    }
    if(bind(sockfd, (struct sockaddr*)&saddr, sizeof(saddr)) == -1) {
         perror("bind");
         exit(-1);
    }
    if(listen(sockfd, 12) != 0) {
         perror("listen");
         exit(-1);
    }
    while((acceptfd=accept(sockfd, (struct sockaddr*)&raddr, &rlen)) > 0) {    
         while(cli_loop(cli, acceptfd) == 0);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:29:12.220

添加一个本地 HTTP 服务器，以便您可以通过一个简单的 Web 客户端进行配置，怎么样？网页非常灵活且易于使用；）例如参见 Poco 的 HTTPServer 类（http://pocoproject.org/docs/）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:38:20.053

您正在寻找的是实现您自己的 CMD.EXE（或终端仿真器）之类的实用程序，除了内置在您的 GUI 中。我以前是如何完成这样的事情的？我已经阅读了 VT100 终端的手册以及如何模拟它。然后开始在.NET中实现一个自定义组件

# php - php中的正则表达式匹配

> ID：13458370
> 
> 赞同：1
> 
> 时间：2012-11-19T16:47:26.347
> 
> 标签：php, regex

我有这个正则表达式：

```
/(.*)(([0-9]([^a-zA-Z])*){7,}[0-9])(.*)/. 
```

给定以下值

```
0654535263
065453-.-5263
065asd4535263 
```

## 预期成绩

```
06**** 
06****
06**** 
```

## 实际结果

```
0654535263
06****
065asd4535263 
```

## 它与最后一行不匹配，因为字母（我想从 0-3 个字母匹配）并且它只匹配最后一次出现（在示例的第二行中，它跳过第一行）。

首先感谢你们所有的回答都非常有帮助，我欠你们时间。我不能创建数字数组并像这样屏蔽它们，因为我可以有这样的字符串：

我是约翰，我的电话号码是：0、6、5、4、5、3、5、2、6 - 3 -- 065asd4535263。

为了简化，我想隐藏输入的手机号码。

我有两个问题：

1.  更改上面提到的 regxp，以隐藏不超过 3 个字符分隔的数字。
2.  preg_replace 只替换了一次。

最后，我只需要正则表达式来替换任何数字数组，至少 6 位长，由任意数量的特殊字符分隔（12--654-5、453/--222、23....5645 等）或不超过 3 个字符（过滤器）（06asd453、123as562）。

再次感谢您，所有答案都很有帮助，但我很生气，因为我没有正确地提出我的问题。

PS我不能给你声誉，因为我必须至少有15个，一旦我得到那么多，我就会“投票”，所有答案都值得。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:51:42.817

嗯，当你只想掩盖你的字符串时，为什么这么复杂。

```
$input = '0654535263';
$input = substr($input, 0, 2);
$output = $input . '********'; 
```

当您只需要字符串的前 2 个字符时，它会更容易一些。也许你的解决方案有另一个罪过。但这要容易一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:57:12.977

你可以使用`substr_replace`

```
 echo substr_replace($v, "****", 2); 
```

例子

```
$list = array("0654535263","065453-.-5263","065asd4535263");
echo "<pre>";
foreach ( $list as $v ) {
    echo substr_replace($v, "****", 2), PHP_EOL;
} 
```

输出

```
06****
06****
06**** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:07:01.323

我猜你想使用正则表达式的原因是你不会掩盖你得到的每一个字符串。此正则表达式检查字符串的开头是否至少有 2 个数字，然后是 0 到 3 个字母字符，然后字符串的所有其余字符都需要是非字母字符。如果匹配，则屏蔽字符串，否则表示字符串不匹配。

```
$string = '0654535263';
if(preg_match('~^(\d{2})\d*?[a-zA-Z]{0,3}[^a-zA-Z]*$~', $string))
  $answer = preg_replace('~^(\d{2})\d*?[a-zA-Z]{0,3}[^a-zA-Z]*$~', '$1****', $string);
else
  $answer = $string . ' does not match';
print_r($answer); // 06**** 
```

# oracle-apex - APEX 4.1 - 基于梭的左面板填充数据库

> ID：13458371
> 
> 赞同：0
> 
> 时间：2012-11-19T16:47:25.020
> 
> 标签：oracle-apex

APEX 版本：4.1.1.00.23 示例：[http](http://apex.oracle.com/pls/apex/f?p=27554:51) ://apex.oracle.com/pls/apex/f?p=27554:51 登录：演示密码：演示

我在页面上有一个穿梭机，当我将项目从右侧移动到左侧面板时，我想用 'null' 更新数据库中的表列 'Analyst'

当页面加载时，右侧面板中可能有也可能没有项目。

![在此处输入图像描述](../Images/c84925a41fc2fb2d640db64deb0ec7f7.png)

```
DB table (when page loads):
Field                          Analyst
Co-Borrower Credit Score       Analyst_1
Appraised Value                Analyst_1
Appraisal Identifier           Analyst_1 
```

然后，在我将部分或所有项目从右侧面板移动到左侧面板并单击“应用更改”后，我希望将“null”放入数据库的分析师字段中，用于左侧面板上的每个字段名称。

![在此处输入图像描述](../Images/47cf91a57ae34dd65fd42951f451e7f0.png)

```
DB table (after clicking button):
Field                          Analyst
Co-Borrower Credit Score       Analyst_1
Appraised Value                (null)
Appraisal Identifier           (null) 
```

这是我当前的页面流程（提交后）：

```
declare
    tab apex_application_global.vc_arr2;
    l_count number;
begin
    tab := apex_util.string_to_table (:P51_SHUTTLE);
    for i in 1..tab.count 
    loop
    select count(*) into l_count from DQ_MANUAL_EDIT WHERE DQ_ATTRIBUTE = tab(i);
     if l_count > 0 then 
       UPDATE DQ_MANUAL_EDIT
       SET DQ_ANALYST = :P51_DQ_ANALYST
       WHERE DQ_ATTRIBUTE = tab(i);
    end if;
    end loop;
end; 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:04:29.217

无法进入班车的左侧。右侧有将提交的值。因此，您只能通过找出数据库值和提交的值之间的更改来更改这些记录。
如果可能，首先删除所有关联记录，然后插入新值。

```
declare
    tab apex_application_global.vc_arr2;
    l_count number;
begin
    DELETE FROM DQ_MANUAL_EDIT
    WHERE DQ_ANALYST = :P51_DQ_ANALYST;

    tab := apex_util.string_to_table (:P51_SHUTTLE);
    for i in 1..tab.count 
    loop
    select count(*) into l_count from DQ_MANUAL_EDIT WHERE DQ_ATTRIBUTE = tab(i);
     if l_count > 0 then 
       INSERT INTO DQ_MANUAL_EDIT (DQ_ANALYST, DQ_ATTRIBUTE)
       VALUES (:P51_DQ_ANALYST, tab(i));
    end if;
    end loop;
end; 
```

如果您不想删除并保留记录但带有`NULL`值，那么您可以首先将记录更新为`NULL`

```
declare
    tab apex_application_global.vc_arr2;
    l_count number;
begin
    UPDATE DQ_MANUAL_EDIT
    SET DQ_ANALYST = NULL
    WHERE DQ_ANALYST = :P51_DQ_ANALYST;

    tab := apex_util.string_to_table (:P51_SHUTTLE);
    for i in 1..tab.count 
    loop
    select count(*) into l_count from DQ_MANUAL_EDIT WHERE DQ_ATTRIBUTE = tab(i);
     if l_count > 0 then 
              UPDATE DQ_MANUAL_EDIT
              SET DQ_ANALYST = :P51_DQ_ANALYST
              WHERE DQ_ATTRIBUTE = tab(i);
    end if;
    end loop;
end; 
```

当您使用循环结构时，这将是最直接的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:17:34.470

您可以执行两个更新，而不是循环：

```
UPDATE DQ_MANUAL_EDIT
   SET DQ_ANALYST = :P51_DQ_ANALYST
   WHERE DQ_ATTRIBUTE in (select * from tab);

UPDATE DQ_MANUAL_EDIT
   SET DQ_ANALYST = NULL
   WHERE DQ_ATTRIBUTE not in (select * from tab); 
```

我是不是觉得太简单了？

# assembly - 使用 ARM VFP 指令有效地将 NaN 转换为零

> ID：13458372
> 
> 赞同：1
> 
> 时间：2012-11-19T16:47:30.853
> 
> 标签：assembly, arm, neon

我有一组 32 位浮点寄存器，在一些计算之后可能包含 NaN。我想在四寄存器中将任何 NaN 转换为零，理想情况下只使用 SIMD 指令。数据由四元寄存器**q0**中的四个浮点数组成。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:23:17.773

您可以使用 NaN 的属性，即比较 NaN 与自身是否相等返回 false。使用它来生成一个掩码，然后将此掩码与原始浮点向量相加，例如

```
uint32x4_t vmask = vceqq_f32(va, va);
va = (float32x4_t)vandq_u32((uint32x4_t)va, vmask); 
```

# java - Java Web Start 下载最新的 JRE？

> ID：13458377
> 
> 赞同：2
> 
> 时间：2012-11-19T16:47:40.810
> 
> 标签：java, security, versioning, java-web-start

在我的 JNLP 文件中，我使用以下内容来确保 Java 7 用户将在 Java 6 下运行我的应用程序：

`<j2se version="1.6" href="http://java.sun.com/products/autodl/j2se"/>`

它可以工作，甚至会在必要时提示安装 Java 6。但是，当安装 Java 6 时，它是 1.6.0.0 (!) 版本，这显然存在安全风险。

如何让 JWS 下载最新版本的 Java 6（或 j2se 标签中指定的任何版本）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:52:34.273

从[官方文档](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources)（强调我的）：

> 默认情况下，版本属性是指 Java 平台标准版的平台版本（规范版本）。[...]
> **还可以通过包含 href 属性来指定确切的产品版本（实施版本）。**

所以我想删除该`href`部分应该符合您的期望：

```
<j2se version="1.6"> 
```

# animation - Cocos2d及CCAnimationCache的使用

> ID：13458379
> 
> 赞同：1
> 
> 时间：2012-11-19T16:47:52.043
> 
> 标签：animation, cocos2d-iphone, memcached

我想了解CCAnimationCache的用法。

我有一个敌人对象的缓存。每个对象都有两个 CCAnimations 成员变量，一个标准动画和一个特殊动画。动画中的帧根据敌人对象的 type 属性而变化。

```
@interface EnemyEntity : Entity
{
    EnemyTypes type;
    CCAnimation * animation;
    CCAnimationCache * animationCache;
} 
```

通常情况下，在屏幕上我确实有多个相同敌人类型的实例，我想知道是否应该使用 CCAnimationCache 而不是 CCAnimation 成员变量。

如果是这样，我应该将 CCAnimationCache 实例放在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:54:53.027

嗯。你不看标题中的评论吗？

```
/** Singleton that manages the Animations.
 It saves in a cache the animations. You should use this class if you want to save your animations in a cache.

 Before v0.99.5, the recommend way was to save them on the CCSprite. Since v0.99.5, you should use this class instead.

 @since v0.99.5
 */ 
```

此评论在`CCAnimationCache.h`文件中。所以，这是一个 cocos2d 的单例（CCTextureCache、CCSpriteFrameCache）。如果你想使用它，只需调用

```
CCAnimationCache* animationCache = [CCAnimationCache sharedAnimationCache]; 
```

# ruby - 计算 Ruby 中值的相对强度

> ID：13458380
> 
> 赞同：0
> 
> 时间：2012-11-19T16:47:55.893
> 
> 标签：ruby, jruby

我有一个包含许多记录的 JSON，对于这个问题，我们假设为 100。有两个键，Change 和 Sign。变化类似于 0.14，符号是“+”或“-”两个符号之一。

对于每条记录，我想再添加两个键“总共 20 条记录”和“总共 20 条记录”。其中这些等于符号分别为“+”和“-”的最后 20 条记录的总和。

因此，对于“总共 20 条记录”，例如：

```
array.collect {|array| array['change']}
array.collect {|array| array['sign']} 
if sign = "+" then
#store change in uparray
#when uparray has 20 records add it up and create variable 20recorduptotal 
```

任何帮助表示赞赏。非常感谢

我相信我需要使用 .each_cons(20) 但只有带有适用符号的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:51:38.210

更新：这里的东西可能真的有效:)

我定义了一个“求和队列”，它计算添加到其中的最后 20 个项目的总和。如果少于 20 个项目，则`sum`返回。`nil`

```
class SummingQueue
  def initialize(length = 20)
    @values = []
    @sum = 0
    @length = length
  end

  def <<(value)
    @values << value
    @sum += value
    @sum -= @values.shift if @values.length > @length
  end

  def sum
    return nil if @values.length < @length
    @sum
  end
end

queues = Hash.new {|hash, key| hash[key] = SummingQueue.new }

array.each do |item|
  queues[item["sign"]] << item["change"]
  item["last_20_ups"] = queues["+"].sum
  item["last_20_downs"] = queues["-"].sum
end 
```

请注意，`last_20_ups`将包括当前值（如果适用） - 如果您希望它是*不*包括当前值的最后 20 个值，则将该`queues[...] << item[...]`行移动到`each`块的末尾。

# reporting-services - 图表中的垂直轴重复值-SSRS 2008 R2

> ID：13458381
> 
> 赞同：0
> 
> 时间：2012-11-19T16:47:58.377
> 
> 标签：reporting-services

这是我的数据：

```
Year /  Month / Sales 
2012 /  1 / 2496496.82 
2011 /  1 / 2618210.62
2012 /  2 / 2451754.51 
2011 /  2 / 2268699.08 
2011 /  3 / 2810107.42
2012 /  3 / 2621037.55 
```

系列标签属性：货币，以百万为单位显示值，使用 1000 个分隔符，小数位 2

纵轴属性：最小自动、最大自动、间隔自动、间隔类型自动

这是在垂直轴上得到的：

```
3
3
2
2
1
1
0 
```

在 Y 轴上显示重复值的报告，我怎样才能摆脱重复值 3 3 2 2 1 1 ？

希望有人能解答，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-16T05:54:20.553

我认为您的问题是 Y - Axis 向您显示重复的数字。实际问题是那里没有显示小数位，这意味着

3
3
2
2
1
1
0

应该像跟随

3.5
3.0
2.5
2.0
1.5
1.0
0.0

但它不显示小数位。

要解决此问题，请转到**“垂直轴属性”** ->**数字**选项卡-> 将**类别**选择为**“默认”** ，同时在**轴选项选项**卡中 保持**最小值、最大值、间隔和间隔类型 = 自动**。

# c# - 处理已删除数据场景的最佳位置是哪个？

> ID：13458385
> 
> 赞同：0
> 
> 时间：2012-11-19T16:48:12.310
> 
> 标签：c#, .net, wpf, mvvm

我有一个使用 MVVM 模型的 WPF 应用程序。此外，我们确实需要使用 ShowDialog() 在 Dialog() 中显示一些数据。为此，我们有一个 MainWindow 调用另一个类中的另一个方法，该方法实际上将返回一个 Window 类型的对象。然后 MainWindow 将通过调用 ShowDialog() 方法显示此窗口。窗口类具有 ViewModel，它将具有显示在对话框中的数据。

我的问题是如何处理数据库中不存在数据的情况？

Window() 或 ViewModel（究竟是哪一个）的构造函数应该抛出异常吗？如果是，那么什么类型的异常？有没有其他方法可以处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:58:59.707

你没有布置用例，所以你不会得到最好的答案，因为答案取决于你的用例、你的域和你的用户。

也就是说，您不太可能希望您的用户看到异常，即使它实际上是异常的。最好要么显示带有信息性消息的对话框（即“没有要显示的项目”），要么根本不显示它。

HTH，
绿柱石

# javascript - IE9 说语法错误，但不是在哪里？

> ID：13458387
> 
> 赞同：0
> 
> 时间：2012-11-19T16:48:30.993
> 
> 标签：javascript, internet-explorer-9, syntax-error

所以，我有一个大项目，里面有一堆 javascript 的东西。

现在我用 IE9 做了一些测试，在一个触发 AJAX 操作的事件中它中止并告诉我

```
Syntax Error: Expected ')' 
```

但这就是它所说的。它让我不知道从哪里开始寻找。

我在做的大部分事情中都使用 Dojo，在这个特定的点上，我正在使用 AJAX 请求检索 JSON 数据。但是我已经排除了 JSON 字符串中的错误，仅仅是因为 JSON 通常不包含括号`()`，对吧？

请求完成后还有一个`console.log(data)`权利，但它也不会触发。在此之前我没有看到任何花哨的括号，这可能会让 IE 失去理智。但我可能仍然看错了地方，只是想在这里提供尽可能多的信息。

（顺便说一句：Firefox 一切正常。没有错误或警告；一切运行良好）

调试此或可能原因的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:50:46.507

Internet Explorer 8 以上的版本有一个类似于 Firebug 的内置调试器 - 按**F12**启动它（默认情况下）。

标准的错误报告很糟糕，但调试器会给你更准确的错误反馈。

（我对此的看法是，标准的 Javascript 错误处理假设你是一个典型的 IE 用户并且给你的反馈很少。启动开发工具让它知道你可以处理事实。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:50:33.947

毕竟是来自 AJAX 的响应。

IE 在发送所有`GET`参数时遇到问题，导致错误消息与 JSON 代码混合。我仍然不明白为什么它期望一个`)`但修复响应解决了这个问题。

# javascript - grunt.js 配置中常用配置选项的继承

> ID：13458388
> 
> 赞同：10
> 
> 时间：2012-11-19T16:48:34.457
> 
> 标签：javascript, node.js, gruntjs

人们如何在 Grunt 中为多个项目处理常见的配置选项。这些项目将共享一些常见的配置选项，例如 for `min`，但也有每个项目的*私有*或*自定义*配置设置，例如只有三分之一的项目需要`less`或具有不同的选项。

有没有办法在项目之间共享这种通用配置，使用继承或导入现有文件，或者每个项目都必须定义所有设置？

我所指的项目将驻留在目录层次结构中，例如

```
root
    module1
         grunt.js
    module2
         grunt.js
    module3
         grunt.js 
```

有什么方法可以在`root`级别提供通用配置设置吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T21:06:11.490

您可以根据需要轻松地将配置存储在任意数量的外部 JSON 文件中。[grunt.file.readJSON](https://github.com/gruntjs/grunt/blob/master/docs/api_file.md#gruntfilereadjson)将在这里为您提供帮助。例如：

```
module.exports = function(grunt) {

  var concatConf = grunt.file.readJSON('../concat-common.json'),
      minConf = grunt.file.readJSON('../min-common.json');

  // do whatever you want with concatConf and minConf here
  // ...

  // Project configuration.
  grunt.initConfig({
    pkg: '<json:grunt-sample.jquery.json>',
    meta: {
      banner: '/*! <%= pkg.title || pkg.name %> - v<%= pkg.version %> - ' +
        '<%= grunt.template.today("yyyy-mm-dd") %>\n' +
        '<%= pkg.homepage ? "* " + pkg.homepage + "\n" : "" %>' +
        '* Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>;' +
        ' Licensed <%= _.pluck(pkg.licenses, "type").join(", ") %> */'
    },

    concat: concatConf,
    min: minConf

    // ...
  });

  // Default task.
  grunt.registerTask('default', 'concat min');

}; 
```

不要忘记 gruntfile 是在 Node 环境中执行的常规 JavaScript 文件，配置选项是常规 JavaScript 对象 :)

# xslt - XSLT：根据多个标准计算特定节点

> ID：13458390
> 
> 赞同：2
> 
> 时间：2012-11-19T16:48:40.303
> 
> 标签：xslt

我有一些 XML，我想将其转换为报告，显示在日期期间匹配特定条件的节点数的计数。

下面的示例 xml。我正在尝试根据日期范围内的状态显示节点数。

我可以根据日期范围进行匹配，但无法显示该范围内的状态计数。任何指针表示赞赏。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <List>
     <Item>
       <Value name="Status">Open</Value>    
       <Value name="Date">2012-09-01</Value>
       <Value name="Name">Item 1</Value>
     </Item>
     <Item>
       <Value name="Status">Open</Value> 
       <Value name="Date">2012-10-15</Value>
       <Value name="Name">Item 2</Value>
     </Item>
     <Item>
       <Value name="Status">Open</Value> 
       <Value name="Date">2012-10-15</Value>
       <Value name="Name">Item 3</Value>
     </Item>
     <Item>
       <Value name="Status">Pending</Value> 
       <Value name="Date">2012-10-20</Value>
       <Value name="Name">Item 4</Value>
     </Item>
     <Item>
       <Value name="Status">Closed</Value>
       <Value name="Date">2012-10-30</Value>
       <Value name="Name">Item 5</Value>
     </Item>
    </List> 
```

示例输出为：-

```
 Status         2012-10-01 - 2012-10-31
   Open           2
   Closed         1
   Pending        1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:24:29.583

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pStartDate" select="20121001"/>
 <xsl:param name="pEndDate" select="20121031"/>

 <xsl:template match="/">
   <xsl:variable name="vInRange" select=
    "/*/*[translate(Value[@name='Date'],'-','') >= $pStartDate
         and
          $pEndDate >= translate(Value[@name='Date'],'-','')
         ]"/>
     Open      <xsl:value-of select="count($vInRange[Value[@name='Status']='Open'])"/>
     Closed    <xsl:value-of select="count($vInRange[Value[@name='Status']='Closed'])"/>
     Pending   <xsl:value-of select="count($vInRange[Value[@name='Status']='Pending'])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<List>
    <Item>
        <Value name="Status">Open</Value>
        <Value name="Date">2012-09-01</Value>
        <Value name="Name">Item 1</Value>
    </Item>
    <Item>
        <Value name="Status">Open</Value>
        <Value name="Date">2012-10-15</Value>
        <Value name="Name">Item 2</Value>
    </Item>
    <Item>
        <Value name="Status">Open</Value>
        <Value name="Date">2012-10-15</Value>
        <Value name="Name">Item 3</Value>
    </Item>
    <Item>
        <Value name="Status">Pending</Value>
        <Value name="Date">2012-10-20</Value>
        <Value name="Name">Item 4</Value>
    </Item>
    <Item>
        <Value name="Status">Closed</Value>
        <Value name="Date">2012-10-30</Value>
        <Value name="Name">Item 5</Value>
    </Item>
</List> 
```

**产生了想要的正确结果**：

```
 Open      2
 Closed    1
 Pending   1 
```

# java - !null 检查不存在的元素的嵌套 for 循环错误

> ID：13458391
> 
> 赞同：0
> 
> 时间：2012-11-19T16:48:45.547
> 
> 标签：java, for-loop

我目前在大小为 4,2 的二维数组中使用嵌套的 for 循环。当我运行我的程序时，我在下一行得到 index out of bounds Exception

```
 else if (state[i][j+1] != null 
           && state[i][j].getFlash() <= state[i][j].getCycleLength() 
           && state[i][j+1].getCycleLength() == state[i][j].getCycleLength()){
  } 
```

它说索引越界是 2。如果我不检查 [i][j+1] 是否不为空，我会理解错误，但我不理解检查的异常？我尝试移动 !null 检查，但程序在这一行仍然失败。

任何帮助将不胜感激。

```
Stack trace:
Exception in thread "Timer-0" java.lang.ArrayIndexOutOfBoundsException: 2
at NatComp.data$1.run(data.java:67)
at java.util.TimerThread.mainLoop(Timer.java:512)
at java.util.TimerThread.run(Timer.java:462) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:52:06.153

只是检查prevent ，但它不会阻止代码`state[i][j+1] != null`引发.`NullPointerException``IndexOutOfBoundsException`

要检查`IndexOutOfBounds`，您需要`indices`根据最大允许索引检查您的。依靠检查带有 null 的元素是没有意义的。如果索引超出范围，您甚至无法访问元素，因此`null`检查可能甚至不是`checked`.

此外，如果您的 中有这么多条件`if`，最好将它们分开在`nested`if 中，外部`if`检查`IndexOutOfBounds`，内部`if`进行实际条件检查。那将更具可读性。

**例如，**如果您有一个声明为 的数组`new int[3]`，那么在访问索引之前，您可以添加一个检查： -

```
if (index < 3) {
     // you can now access `array[index]`, as it is safe now
     // Also, you can add a check for `NPE` here.
} 
```

那是因为您的索引是从 0 开始的。所以最大可访问索引是`max - 1`，`max`数组的大小在哪里。

您可以在`array of array`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:52:20.390

从您的描述中可以清楚地看出，`j==1`当您遇到异常时。当这种情况发生时，`state[i][j+1]`会抛出一个`ArrayIndexOutOfBoundsException`而不是评估`null`你似乎期望的那样。

`j`您的代码不会抛出的唯一值`ArrayIndexOutOfBoundsException`是零，因此您可能想要检查它而不是检查`null`.

# php - imagefill() 将区域的其余部分变为黑色

> ID：13458393
> 
> 赞同：1
> 
> 时间：2012-11-19T16:48:59.157
> 
> 标签：php, image

如果是图像，我正在使用 imagefill() 更改背景颜色。但是在这样做的同时，其他不受影响的区域将其颜色更改为黑色。

```
$image = imagecreatefrompng("sample.png");
$background = imagecolorallocate($image, 255, 0,0);
imagefill($image, 0,0, $background);
header("content-type: image/png");
imagepng($image,"sample.png"); 
```

这是我的代码。谁能告诉我这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:06:43.227

尝试设置混合模式并保存 alpha

```
imagealphablending($image, false);
imagesavealpha($image, true); 
```

[http://www.php.net/manual/en/function.imagealphablending.php](http://www.php.net/manual/en/function.imagealphablending.php)
[http://www.php.net/manual/en/function.imagesavealpha.php](http://www.php.net/manual/en/function.imagesavealpha.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T07:22:10.567

试试这个代码[参考](http://php.net/manual/en/function.imagefill.php)

```
$color = imagecolorallocate($im, 255, 0, 0);
imagefill($im, 0, 0, $color ); 
```

# dependency-injection - 有没有办法测试从 DependecyResolver 解析的服务生命周期？

> ID：13458394
> 
> 赞同：0
> 
> 时间：2012-11-19T16:49:07.277
> 
> 标签：dependency-injection, asp.net-web-api

在 Asp.Net WebApi 中是由 DependecyResolver 组成的 GlobalConfig 对象。DependecyResolver 保存有关 DI 框架指定的实例的信息。

我只是好奇是否有人找到了从这个 DependecyResolver 测试已解决服务的生命周期的方法？

仅供参考...我使用 Castle.Windsor 作为 DI 框架。[以与http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)中指定的类似方式实现

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:38:49.433

MVC 和 WebApis 的区别`DependencyResolver`在于 WebApis 版本有一个范围定义。范围在请求到达时创建，在请求结束时释放。

这意味着所有配置为作用域的服务仅在 HTTP 请求/响应期间存在。（如果您的 IoC 容器没有错误）

实际定义可以在这里找到：http: [//aspnetwebstack.codeplex.com/SourceControl/changeset/view/2be68e50ed73#src%2fSystem.Web.Http%2fDependencies%2fIDependencyResolver.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/2be68e50ed73#src%2fSystem.Web.Http%2fDependencies%2fIDependencyResolver.cs)

# sql - 引用一列并在同一语句中更新它

> ID：13458395
> 
> 赞同：1
> 
> 时间：2012-11-19T16:49:09.523
> 
> 标签：sql, sql-server, sql-server-2008-r2, sql-update

我有一个表，我需要将一个值从一列移动到另一列，然后在原始列中设置一个新值。

```
declare @foo table (A int, B int);

insert into @Foo select 1, 0;

update @Foo
set B = A,
    A = 2; 
```

更新后`B`总是包含`1`或者是这种非确定性的行为，它有时会`2`因为 A 被首先更新而具有一个值（而且我所有的测试从来没有达到恰到好处的条件`2`）？

* * *

作为后续问题，如果答案是“`B`将永远是`1`”，如果我执行以下操作，我仍然会得到相同的结果吗？

```
update @Foo
set A = 2,
    B = A; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:56:05.357

`B`将始终包含`1`并且子句的顺序没有区别。从概念上讲，这些操作“同时”发生。

以下也适用于 SQL 来交换两个值，而不需要任何中间变量。

```
update @Foo
set A = B,
    B = A; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T17:05:11.747

在执行 时`update`，SQL Server 会保留该行的两个版本。旧的 (aka `deleted`) 和新的 (aka `inserted`.) 分配本身只修改`inserted`行。所有分配都使用`deleted`行中的相同变量值。分配的顺序无关紧要。

`output`您可以使用以下子句对此进行可视化：

```
declare @t table (a int, b int)
insert @t values (1,2), (2,3)

update @t 
set     b=a
,       a=b
output  inserted.*
,       deleted.*

select * from @t 
```

# c++ - 禁用 Eclipse 的错误发现。（科丹误报）

> ID：13458396
> 
> 赞同：22
> 
> 时间：2012-11-19T16:49:09.757
> 
> 标签：c++, eclipse, c++11

到目前为止，我的经验是，Eclipse 的错误发现非常糟糕，没有任何解决方案（在设置的每个点附近都试过`__GXX_EXPERIMENTAL_CXX0X__`）。我现在不想再寻找解决方案了。现在我只想查看真正的编译器错误。但是如何做到这一点呢？`-std=c++0x``-std=c++11`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T19:39:03.033

**UPDATE:** It's been a long time since I posted the original answer and it has become outdated. I double-checked today (Mar 15, 2014): in Eclipse Kepler (Build id 20130614-0229) it is sufficient to

*   add under *Project > Properties > C/C++ Build > Settings* then on the *Tool Settings* tab *GCC C++ Compiler > Miscellaneous* the `-std=c++11` flag,

*   then under *Window > Preferences > C/C++ > Build > Settings* on the *Discovery* tab chose *CDT GCC Built-in Compiler Settings* and add the `-std=c++11` flag to *Command to get compiler specs*. On my machine it looks like this after the change:

    `${COMMAND} -E -P -v -dD -std=c++11 "${INPUTS}"`

*   clean and rebuild both your project **and** your index (*Project > C/C++ Index > Rebuild*) as Eclipse tends to cache error messages and show them even though they are gone after changing the settings.

**This works on my machine for sure.** If it doesn't on yours, then you might want to give a shot to this: [C++11 full support on Eclipse](https://stackoverflow.com/q/22074724/341970) although I am neither sure about the correctness of this approach nor was it necessary to do it on my machine. As of March 7, 2014 users [claim](https://stackoverflow.com/questions/22074724/c11-full-support-on-eclipse#comment33807529_22074724) that it helped them whereas the above approach didn't.

* * *

[The original post from 2012, now outdated:]

~~These bogus errors come from [Codan](http://wiki.eclipse.org/CDT/designs/StaticAnalysis). I also issued a [bug report](http://www.eclipse.org/forums/index.php/mv/tree/274600/776516/#page_top) (C++03!!!) but the same problem shows up in the latest stable Eclipse so I don't think much has happened :(~~

**Workaround:**

Click on the project properties, then *C/C++ General > Code Analysis > Syntax and Semantic Errors* and deselect whatever false errors you are getting.

> I just want to see solely real compiler errors

Of course, you can disable there the static analysis completely, in that case you can accomplish exactly what you want.

* * *

**UPDATE:** 2 users have reported that what Jeevaka wrote helped them. I have tried what he wrote, it did not help me with Juno SR1 and CDT 8.1.1\. Perhaps Codan developers have improved static analysis in Juno SR2 and CDT 8.1.2

 ~~* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T06:39:41.613

我对 c++11 代码的 Cordian 错误感到困扰，这些代码在 gcc 中完美编译并启用了所有警告。我发现了我认为的根本原因，至少在我的情况下是这样。很少有其他关于 c++11 的 Cordian 错误的问题作为这个问题的副本关闭并指向这个问题。所以我虽然我会在这里发布我的答案。

这是我发现的： *项目属性 > C++ 常规 > 预处理器 ... > 条目 > GNU C++ > CDT GCC 内置编译器设置*将 *__cplusplus=199711L* 作为条目之一。

我将其更改如下：在*Window > Preferences > C/C++ > Build > Settings > Discovery*选项卡中选择 *CDT GCC Builtin Compiler Settings*并将*${COMMAND} -E -P -v -dD ${INPUTS}*更改*为 ${COMMAND } -E -P -v -std=c++11 -dD '${INPUTS}'*。然后点击应用。下一次构建后错误消失了。

我正在使用带有 CDT 8.1.2 和手工制作文件的 Juno SR2。

***添加更多颜色：***

我不是专家，但这是我认为发生在我的案例中的情况：

Cordian 以多种方式收集错误。

一是解析编译器输出。`-std=c++11`在我的 Makefile 中确保这部分一直正常工作，因为通过终端调用相同的 Makefile 没有标记任何错误。

另一个是通过“代码分析”。为此，可能还有其他任务，Ecpise 需要知道编译器将使用的设置。Eclipse 通过调用我在上面编辑的命令并解析输出来找到这些。通过在点击“应用”之前勾选“在控制台视图中分配控制台”，可以查看此命令的输出。这些设置包括包含目录和定义，例如 __cplusplus。当这些与通过我的 Makefile 调用时 gcc 将使用的匹配时，结果是一致的。

当我在标题中使用#pragma 消息尝试解决问题时，我认为 __GXX_EXPERIMENTAL_CXX0X__ 是错误的，并看到了一些手动设置的在线建议，但这似乎也是一种解决方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-14T14:28:59.080

在全新的 Eclipse 安装中，触发一个宏并重建索引解决了它：

Projects->Properties->Preprocessor Includes 选择 GNU C++ 选择 CDT 用户设置条目 按添加

并添加一个带有 name`__cplusplus`和 value的预处理器宏`201103L`。

最后，重建索引。（项目->C/C++ 索引->重建）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-09T20:24:09.880

您还可以通过以下步骤从 CDT 范围中删除有问题的代码部分：

*   转到项目属性->C/C++ 常规->预处理器包括路径、宏等*   在条目选项卡上选择所需的语言*   添加->预处理器宏*   输入名称“MY_CODAN_MACRO”和值“1”

现在你可以写：

```
#idndef MY_CODAN_MACRO
// this code is visible by compiler only
#else
// this code is visible by code analysis and CDT, but not visible by compiler
#endif 
```

我认为这个技巧在 Indigo+ 中是可能的。我用的是朱诺。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-21T05:04:12.980

我意识到问题是很久以前提出的，但由于问题仍然存在（我使用 Kepler 并得到相同的错误），我将发布另一个可能的解决方法。

可以创建单独的源文件并重新定义他想在那里使用的函数（例如在一般命名空间中）。在我创建了这样的功能之后

```
std::string to_string(long long num) {
    return std::to_string(num);
} 
```

并开始使用`to_string`而不是`std::to_string`在主要来源中使用（我添加了额外的包含） eclipse 不再将代码标记为错误。

当然，错误在额外包含中标记，但它不包含逻辑，所以你甚至不看那里。~~

# mongodb - 我应该如何在 MongoDb 中存储文档的“标签”？

> ID：13458398
> 
> 赞同：0
> 
> 时间：2012-11-19T16:49:25.373
> 
> 标签：mongodb, database-design, optimization

我知道这个问题被问了好几次，但就我的搜索技巧而言，每篇文章都是如何在 SQL 数据库中实现这个问题，而没有提到 NoSQL 数据库。

我有想要实现标记功能的文档。
用户将能够用他们想要的任何字符串标记它们，然后我需要能够尽可能快地查询文档（通过这些通用标签）

我是否应该为我的标签提供一个`String`数组（这将允许我支持任意数量的标签），像这样

```
{"_id":"aaa", "prop":"value", "tags":["tag1","tag2","tagN"]} 
```

或将标签的数量限制为 5 个，并将它们作为不同的属性，像这样

```
{"_id":"aaa", "prop":"value", "tag1":"value", "tag2":"value", "tag3":"value" } 
```

哪种结构更适合快速查询，特别是在 mongodb 中？

使用第二种结构可以让我按此字段索引集合，但是否推荐使用 5 个索引？我应该有更少的标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:02:26.143

您只是想使用一个数组，这是您拥有的第一个示例。这将允许您拥有一致的模型和索引。

```
{"_id":"aaa", "prop":"value", "tags":["tag1","tag2","tagN"]} 
```

如果您索引包含数组的字段，MongoDB 会在“多键索引”中单独索引数组中的每个值。 [1]

[1] [http://docs.mongodb.org/manual/core/indexes/#multikey-indexes](http://docs.mongodb.org/manual/core/indexes/#multikey-indexes)

# algorithm - 如何解决这个递归关系：T(n) = 4*T(sqrt(n)) + n

> ID：13458399
> 
> 赞同：1
> 
> 时间：2012-11-19T16:49:26.060
> 
> 标签：algorithm, recurrence

我知道如何使用主方法解决递归关系。我也知道如何解决以下重复问题：

T(n) = sqrt(n)*T(sqrt(n)) + n

T(n) = 2*T(sqrt(n)) + lg(n)

在上述两个递归中，递归树的每一层都有相同的工作量。并且递归树中总共有 log log n 个级别。

我在解决这个问题时遇到了麻烦：T(n) = 4*T(sqrt(n)) + n

**编辑：** 这里 n 是 2 的幂

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T23:02:45.627

假设 n = 2^k。我们有 T(2^k) = 4*T(2^(k/2)) + 2^k。令 S(k) = T(2^k)。我们有 S(k) = 4S(k/2) + 2^k。通过使用 Mater 定理，我们得到 S(k) = O(2^k)。由于 S(k) = O(2^k) 且 S(k) = T(2^k)，T(2^k) = O(2^k) 这意味着 T(n) = O(n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:20:08.747

我在解决这个问题时遇到了麻烦：T(n) = 4*T(sqrt(n)) + n

编辑：这里 n 是 2 的幂

这个编辑很重要。因此，假设重复在 2 处停止。

所以现在的问题是递归树有多深。嗯，这就是在 n 变得足够小（例如，小于 2）之前，您可以取 n 的平方根的次数。如果我们写

> n = 2 ^(lg n)

然后在每次递归调用时，n 都会取其平方根。这相当于将上述指数减半，所以在 k 次迭代之后，我们有

> n ^(1/(2 ^k )) = 2 ^(lg n/(2 ^k ))

我们想在小于 2 时停止，给出

> 2 ^(lg n/(2 ^k )) = 2
> 
> lg n/(2 ^k ) = 1
> 
> lg n = 2 ^k
> 
> lg lg n = k

因此，在平方根的 lg lg n 次迭代之后，递归停止。（[来源](https://stackoverflow.com/questions/7280224/tn-sqrtn-tsqrtn-n)）

对于每个递归，我们将有 4 个新分支，因此分支总数为 4 ^（树的深度）`4^(lg lg n)`。

**编辑**：

![在此处输入图像描述](../Images/9adebef657410f939ea01f7d32187ecc.png)

[资源](https://math.stackexchange.com/questions/241692/how-to-solve-this-recurrence-relation-tn-4-cdot-t-sqrtn-n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T02:54:44.830

```
 T(n) = 4 T(sqrt(n)) + n
   4 [ 4 T(sqrt(sqrt(n) + n ] + n
   4^k * T(n^(1/2^k)) +kn because n is power of 2.
   4^k * T(2^(L/2^k)) +kn   [  Let n = 2^L , L= logn]
   4^k * T(2) +kn   [  Let L = 2^k,  k = logL = log log n]
   2^2k * c +kn
   L^2 * c + nloglogn 
   logn^2 * c + nloglogn
   = O(nloglogn) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-28T14:48:41.353

```
T(n) = 4T(√n) + n 
suppose that (n = 2^m) . so we have :
T(2^m) = 4T(2^(m/2)) + (2^m)
now let name T(2^m) as S(m):
S(m) = 4S(m/2) + m . now with master Method we can solve this relation, and the answer is :
S(m) = Θ(m^2) 
now we step back to T(2^m):
T(2^m) = Θ((2^m)^2)
now we need m to solve our problem and we can get it from the second line and we have :
n = 2^m   =>   m=lgn 
and the problem solved .
T(n) = Θ((2^lgn)^2)
T(n) = Θ(n^2) 
```

# php - Facebook 访问令牌

> ID：13458401
> 
> 赞同：0
> 
> 时间：2012-11-19T16:49:34.420
> 
> 标签：php, facebook, facebook-php-sdk

**如何使用Facebook PHP SDK** (v.3.2.0)获取长期访问令牌以及如何设置？

我们之前使用`$facebook->getAccessToken();`and`$facebook->setAccessToken();`来检索和设置访问令牌以进行离线访问。我认为在他们删除`offline_access`权限后它不起作用。

**所以我的问题很简单，如何使用新的SDK** (3.2.0)获取和设置长期访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:24:02.993

您可以使用 PHP SDK 的新“setExtendedAccessToken”功能。

> 扩展访问令牌，同时删除可能通过客户端流生成的短期令牌。

```
$facebook->setExtendedAccessToken(); 
```

# javascript - 了解 Javascript 版本

> ID：13458408
> 
> 赞同：2
> 
> 时间：2012-11-19T16:49:54.537
> 
> 标签：javascript, browser

我想问一些关于javascript的问题：

1.每个浏览器都自己实现javascript吗？还是它们是通用的 SDK\API 或其他什么？

2.如果每个浏览器都自己实现，javascript引擎是否与浏览器版本绑定？

我的意思是，我可以为同一个浏览器版本提供 2 个不同的引擎吗？

3.是否有所有javascript引擎必须遵循的标准？这个标准是否定义了内存

分配？（可以说，我如何分配一个 javascript 字符串？）

最后，

每个浏览器的实现名称是什么？例如，我了解 FirFox 使用

实施称为“犀牛”，对吗？

非常感谢 ！迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:52:36.440

每个浏览器都实现了自己的 JS 版本。因此，为什么有些浏览器优于其他浏览器。他们对 JS 应该做什么以及应该如何做的规范是基于`ECMAScript`规范的。我见过的拥有多个引擎（或引擎版本）的唯一情况是使用 IE 的 Web 开发工具栏，您可以在其中“回滚”您的 IE 版本以测试以前版本的反应。我发现 JS 引擎在进行浏览器版本测试时非常忠实。

Wiki 对不同的引擎有很好的描述。[http://en.wikipedia.org/wiki/JavaScript_engine#Mozilla](http://en.wikipedia.org/wiki/JavaScript_engine#Mozilla)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:52:48.873

JavaScript 通过大多数浏览器将遵守的 ECMAScript 规范进行标准化。

但是，并非所有功能都在所有浏览器和浏览器版本中实现，并且某些功能具有自己的浏览器特定怪癖。

您可以在此处找到有关 ECMAScript 和浏览器实现的版本的更多详细信息：-

[http://en.wikipedia.org/wiki/ECMAScript](http://en.wikipedia.org/wiki/ECMAScript)

您不会在同一个浏览器中获得两种不同的 JavaScript 引擎（通常）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:54:30.587

1.  是的，他们自己实现了 JavaScript。
2.  是的，它绑定到浏览器版本。不，同一浏览器版本不能有 2 个不同的引擎。您可以使用不同的浏览器版本。
3.  是的，它被称为[EcmaScript](http://en.wikipedia.org/wiki/ECMAScript)。大多数实现都很好地遵循它。
4.  FireFox 不使用 Rhino。Mozilla 开发了它，但在 FireFox 中的实现有所不同。所有浏览器都实现了单线程 JavaScript，而 Rhino 不是单线程的。

# ruby - 如何用ruby中的转义单引号替换单引号

> ID：13458410
> 
> 赞同：3
> 
> 时间：2012-11-19T16:49:55.187
> 
> 标签：ruby, regex, escaping, gsub

我正在尝试用 ruby​​ 1.9.3 和 1.8.7 中的字符串中的转义单引号 (\') 替换单引号 (')。

确切的问题字符串是“您确定要删除 '%@'”。这个字符串应该变成“你确定要删除\'%@\'”

使用 .gsub!(/\'/,"\'") 会导致以下字符串“Are you sure you want to %@'%@”。

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T10:37:09.327

`String#gsub`表单`gsub(exp,replacement)`中有奇怪的怪癖影响替换字符串，有时需要大量转义斜杠。Ruby 用户经常被指示使用块形式：

```
str.gsub(/'/){ "\\'" } 
```

如果您想完全取消转义，请考虑使用另一种字符串文字形式：

```
str.gsub(/'/){ %q(\') } 
```

一旦你习惯了看到这些类型的文字，使用它们来避免转义序列可以使你的代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:59:31.293

`\'`在替换替换字符串中的意思是“匹配后的原始字符串部分”。所以用它之后`str.gsub!(/\'/,"\\'")`的所有东西替换`'`字符 - 这就是你所注意到的。

您需要在替换中进一步转义反斜杠。`.gsub(/'/,"\\\\'")`在我的`irb`控制台中工作：

```
irb(main):059:0> puts a.gsub(/'/,"\\\\'")
Are you sure you want to delete \'%@\' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:57:55.453

您需要转义反斜杠。那这个呢？

```
"Are you sure you want to delete '%@'".gsub(/(?=')/, "\\")
# => "Are you sure you want to delete \\'%@\\'" 
```

以上应该是你想要的。你的预期结果是错误的。当它的字面意思是反斜杠时，没有办法从字面上看到一个反斜杠。

# java - 使用请求标头、遗留代码对 java REST API 进行单元测试

> ID：13458413
> 
> 赞同：0
> 
> 时间：2012-11-19T16:50:08.273
> 
> 标签：java, unit-testing, rest, httprequest

我需要以某种方式传递一个非空的 HttpServletRequest 或控制引发错误的 HelperClass.getUser(request) （该方法在内部执行 request.getHeader() 并且由于请求为空，它会引发错误并导致测试失败）。

我们想对我们的 REST API 进行单元测试，以便我们快速知道更改（或开发人员）是否破坏了它，或者我们是否有错误等，最终开始进行 TDD/BDD。这些测试最终将用于 ant 的自动化构建。我可以调用 REST API 并从 java 设置标头，但不认为这将是一个单元测试？将取决于在本地主机上运行它吗？可能是错的

代码：

```
@Path("service/")
public class Service {
static DataAccess da = null;
@javax.ws.rs.core.Context HttpServletRequest request;

//constructor where doa will be mock object
public Service(DataAccess dao){
da = dao;
}

@GET
@Path("custom-object/{date}/{batch}")
@Produces({"application/xml", "application/json", "application/x-protobuf"})

//Method to test
public CustomObject getCustomObject(
@PathParam("date") String date,
@PathParam("batch") int batch,
@QueryParam("type") String type) {
String user = HelperClass.getUser(request); // this is causing me issues
//da will be a mock object
CustomObject returnedVal = da(user,DatatypeConverter.parseDateTime(date).getTime(), batch, artifactType);
return returnedVal;
 }
} 
```

使用 junit/mockito 进行测试（很高兴使用 powermock 作为解决方案）：

```
@Test    
public void testGetCustomObject() {
    System.out.println("getCustomObject");

    //Arrange
    DataAccess da = mock(DataAccess.class);
    Service instance = new Service(da);
    String date = "2010-04-05T17:16:00Z";
    int batch = 0;
    String type = "";

    CustomObject expResult = null;
    //Act
    CustomObject result = instance.getCustomObject(date, batch, type);
    //Assert
    assertEquals(expResult, result);
} 
```

如果我硬编码`String user="123";`. 在编写有用的测试之前，我需要克服这个问题。任何人都可以给出示例代码来模拟/控制这行代码以有效地设置`user`为非空字符串（这一行在`String user = HelperClass.getUser(request);`每个 API 方法中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:19:55.847

您可以尝试使用[REST 保证](http://code.google.com/p/rest-assured/)库来帮助对 REST 服务进行单元测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:49:34.063

对于构造 HttpServletRequest，您可以使用一些模拟对象，例如 Spring 的 MockHttpServletRequest。

或者你可以重构你的助手类并使 getUser() 方法非静态并使用 Mockito 在你的单元测试中模拟它。

# javascript - 清除/重置触摸屏设备中的悬停状态

> ID：13458414
> 
> 赞同：2
> 
> 时间：2012-11-19T16:50:14.050
> 
> 标签：javascript, ios, hover, touchscreen

关于如何重置/清除在 ipad 等触摸屏设备中激活的悬停状态的任何建议。

我有一些在悬停时显示的工具提示，由于它如何处理悬停，这实际上是 ipad 内的点击。

但是有没有办法设置它，以便悬停状态重置为正常状态。由于问题是工具提示不会重新显示，因为它仍然认为它被悬停。单击另一个工具提示，然后返回它可以工作。

编辑：非常基本的 JSfiddle 来演示问题，需要在 ios 设备中查看才能看到问题。

悬停（在 ipdad 中时单击）该框将出现然后消失。尝试再次悬停/单击，它不会重新出现在触摸设备中，除非您随后悬停/单击另一个工具提示，然后返回该工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:57:16.547

根据工具提示的实现方式，将超时设置为一个好主意。然后在 10 秒左右后它就会隐藏并自行重置。如果您添加代码，我们可以提供具体建议。

编辑：

我添加`mousedown`到您的 jquery 事件中，它现在似乎可以在 ipad 上按您的意愿工作。请参阅[更新的小提琴](http://jsfiddle.net/kqFDC/35/)。

```
$('.tooltip').on('mouseenter mousedown', function(e){ 
```

# php - php中用于显示菜单的函数

> ID：13458418
> 
> 赞同：0
> 
> 时间：2012-11-19T16:50:33.623
> 
> 标签：php, function, menu, return

我编写的函数遇到了一些麻烦。

事实上，我有一个数组，其中有不同的自定义值。

我想显示结果，所以这是我的功能

```
function getAccess($var){
   $data=mysql_fetch_array(mysql_query("SELECT * FROM `acces` WHERE `id`='.$var.'")); 
   return $data;
}
getAccess($_SESSION['id']);

    $paramAcces = array(
        'comptesfinanciers' => array(
            'libelle'   => 'COMPTES FINANCIERS',
            'acces'     => $data['comptesfinanciers'],
            'lien'      => 'financier',
            'image'     => 'images/finances.png'
        )
    ); 
```

我做了一个 $paramAcces 的 var_dump ，它返回

```
array(1) { ["comptesfinanciers"]=> array(4) { ["libelle"]=> string(18) "COMPTES FINANCIERS" ["acces"]=> NULL ["lien"]=> string(9) "financier" ["image"]=> string(19) "images/finances.png" } } (that are the ecpected values). 
```

这是显示数组中内容的函数

```
/**
 * AFFICHAGE DE LA SECTION PARAMETRES SUR LA PAGE D'ACCUEIL
 */
 function affichParam($paramAccees){

     echo '<ul class="getcash-vmenu"><li><a href="index.php?p='.$paramAccees['lien'].'" class="active"><span class="t"><img src="'.$paramAccees['image'].'"> '.$paramAccees['libelle'].'</span></a></li></ul>';
 } 
```

问题是它实际上返回给我一个空行。

我真的不知道我做错了什么：

我这样调用函数：

```
<?php
affichParam($paramAccees)
?> 
```

在第二次我会增加更多的价值，所以我认为我必须为每个循环或类似的东西做一个。

但实际上我只想显示第一条记录。

任何形式的帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:57:17.140

`lien`是`comptesfinanciers`数组的一部分，它是`paramAccees`数组的一部分，应该这样反映：

```
echo '<ul class="getcash-vmenu"><li><a href="index.php?p='.$paramAccees['comptesfinanciers']['lien'].'" class="active"><span class="t"><img src="'.$paramAccees['comptesfinanciers']['image'].'"> '.$paramAccees['comptesfinanciers']['libelle'].'</span></a></li></ul>'; 
```

# html - 强制用户重新缓存 url

> ID：13458419
> 
> 赞同：1
> 
> 时间：2012-11-19T16:50:34.683
> 
> 标签：html, redirect

我在域控制器中有一个设置，可以将我的域重定向到另一个域。

## 例子

重定向`http://mysite.com`到`http://othersite.com`

大约一周前我删除了重定向，但一些用户仍然看到重定向到[http://othersite.com](http://othersite.com)。

我发现清除浏览器缓存可以解决问题。

有什么方法可以强制用户在访问我的网站时更新他们的缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:59:08.813

. 您需要查看[HTTP 协议](http://tools.ietf.org/pdf/rfc2616.pdf)。关于缓存模型有相当大的部分。请参阅第 13 节。根据您的愿望，您可以做很多事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:57:57.880

您可以尝试添加一些标题以强制浏览器获取...沿线：

```
<?php
    if(!session_id()) {
        @session_start();   
    }
    header('Expires: Sat, 26 Jul 1997 05:00:00 GMT');
    header('Last-Modified: ' . gmdate( 'D, d M Y H:i:s') . ' GMT');
    header('Cache-Control: no-store, no-cache, must-revalidate');
    header('Cache-Control: post-check=0, pre-check=0', false);
    header('Pragma: no-cache'); 

    if(isset($_SESSION['form_submitted'])) {
        unset($_SESSION['form_submitted']);
        header('Location: ?' . uniqid());
        #header('Refresh: 0');
    }
?> 
```

# html - 带列的 HTML 无序列表

> ID：13458426
> 
> 赞同：1
> 
> 时间：2012-11-19T16:50:59.143
> 
> 标签：html, css, html-lists

我想将我的无序列表格式化为两段文本。我一直在尝试找出如何使用 Google 做到这一点。但似乎每个人都对让他们的列表从左到右排列感兴趣，这不是我想做的。我正在寻找的是一种方法来制作以下内容：

```
 Food                Calories

 Fruit
    -Apple            90
    -Grape            5
    -Berries          
       -Strawberry    16
       -Blueberry     9
 Vegetable
    -Cucumber         12
    -Onions            
       -Red           29
       -White         34
       -Vidalia       47 
```

使用无序列表和 CSS 是否可行？我不想为此使用表格，因为我想进行`<li>`扩展和收缩。

**编辑**：希望它现在看起来更像是扩展/合同层次结构，而不是严格的表格数据。我知道可以用表格来做到这一点，以这种方式呈现层次结构似乎不太自然。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:10:14.300

使用下面的 HTML 你*可以*做到这一点（坦率地说，你可以使用*其他*HTML 做到这一点......）但你*应该*使用表格。

无论如何，也就是说，我正在使用的 HTML：

```
<ul>
    <li class="head">
        <span class="col1">Food</span>
        <span class="col2">Calories</span>
    </li>
    <li>Fruits
        <ul>
            <li>
                <span class="col1">Apple</span>
                <span class="col2">90</span>
            </li>
            <li>
                <span class="col1">Grape</span>
                <span class="col2">5</span>
            </li>
            <li>
                <span class="col1">strawberry</span>
                <span class="col2">16</span>
            </li>
        </ul></li>
    <li>Vegetable
        <ul>
            <li>
                <span class="col1">Cucumber</span>
                <span class="col2">12</span>
            </li>
            <li>
                <span class="col1">Onion</span>
                <span class="col2">29</span>
            </li>
        </ul></li>
</ul>​ 
```

和CSS：

```
li.head {
    font-weight: bold;
}
span.col1,
span.col2 {
    display: inline-block;
    width: 48%;
}

ul > li > ul > li {
    padding-left: 10%;
    height: 0;
    line-height: 0;
    overflow: hidden;
    -webkit-transition: all 1s linear;
}

ul > li:hover > ul > li {
    height: 2em;
    line-height: 2em;
    -webkit-transition: all 1s linear;
}

ul > li > ul > li span:first-child::before {
    content: '-';
    width: 40%;
}

li li:nth-child(odd) span {
    background-color: #aaf;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LK8Dq/)。

为了允许键盘导航，并显示嵌套的食物/卡路里值以响应选项卡事件，我对 HTML 进行了一些修改，以用一个元素包装`fruits`and`vegetable`文本：`a`

```
<ul>
    <li class="head">
        <span class="col1">Food</span>
        <span class="col2">Calories</span>
    </li>
    <li><a href="#">Fruits</a>
        <ul>
            <li>
                <span class="col1">Apple</span>
                <span class="col2">90</span>
            </li>
            <li>
                <span class="col1">Grape</span>
                <span class="col2">5</span>
            </li>
            <li>
                <span class="col1">strawberry</span>
                <span class="col2">16</span>
            </li>
        </ul></li>
    <li><a href="#">Vegetable</a>
        <ul>
            <li>
                <span class="col1">Cucumber</span>
                <span class="col2">12</span>
            </li>
            <li>
                <span class="col1">Onion</span>
                <span class="col2">29</span>
            </li>
        </ul></li>
</ul>​ 
```

使用以下 CSS：

```
li.head {
    font-weight: bold;
}

li a {
    color: inherit;
    text-decoration: none;
}

span.col1,
span.col2 {
    display: inline-block;
    width: 48%;
}

ul > li > ul > li {
    padding-left: 10%;
    height: 0;
    line-height: 0;
    overflow: hidden;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
}

ul > li a:focus + ul > li,
ul > li:hover > ul > li {
    height: 2em;
    line-height: 2em;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
}

ul > li > ul > li span:first-child::before {
    content: '-';
    width: 40%;
}

li li:nth-child(odd) span {
    background-color: #aaf;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LK8Dq/1/)。

但是，这两个都假设您要自动隐藏，并根据用户交互显示。如果该假设不正确，则不需要进行转换。

顺便提一下，类似手风琴的`table`解决方案：

```
<table>
    <colgroup>
        <col class="foods" />
        <col class="calories" />
    </colgroup>
    <thead>
        <tr>
            <th>Food</th>
            <th>Calories</th>
        </tr>
    </thead>
    <tbody>
        <tr class="header">
            <td colspan="2">Fruits</td>
        </tr>
        <tr>
            <td>Apple</td>
            <td>90</td>
        </tr>
        <tr>
            <td>Grape</td>
            <td>5</td>
        </tr>
        <tr>
            <td>Strawberry</td>
            <td>16</td>
        </tr>
    </tbody>
    <tbody>
        <tr class="header">
            <td colspan="2">Vegetable</td>
        </tr>
        <tr>
            <td>Cucumber</td>
            <td>12</td>
        </tr>
        <tr>
            <td>Onion</td>
            <td>29</td>
        </tr>
    </tbody>
</table> 
```

CSS：

```
.foods,
.calories {
    width: 8em;
}

tbody tr.header {
    height: 2em;
    line-height: 2em;
}

tbody tr,
tbody tr td {
    max-height: 0;
    line-height: 0;
    overflow: hidden;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
}

tbody tr td:first-child {
    padding-left: 2em;
}

tbody tr.header td {
    padding: 0;
}

tbody:hover tr {
    height: 2em;
    max-height: 2em;
    line-height: 2em;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LK8Dq/2/)。

这与之前的假设相同，即您希望通过将鼠标悬停在标题上来控制可见性以显示隐藏的内容。

而且，只是为了踢球，添加键盘导航（with `tab`），使用元素`tabindex`上的属性`tr.header`：

```
<table>
    <colgroup>
        <col class="foods" />
        <col class="calories" />
    </colgroup>
    <thead>
        <tr>
            <th>Food</th>
            <th>Calories</th>
        </tr>
    </thead>
    <tbody>
        <tr class="header" tabindex="1">
            <td colspan="2">Fruits</td>
        </tr>
        <!-- unchanged from the previously-posted table mark-up -->
    </tbody>
    <tbody>
        <tr class="header" tabindex="2">
            <td colspan="2">Vegetable</td>
        </tr>
        <!-- unchanged from the previously-posted table mark-up -->
    </tbody>
</table> 
```

和CSS：

```
/* Other CSS remains the same */
tr.header:focus ~ tr,
tbody:hover tr {
    height: 2em;
    max-height: 2em;
    line-height: 2em;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
}

tr.header:focus {
    outline: none;
    font-style: italic;
    background-color: #ffa;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LK8Dq/3/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:19:59.150

尝试这样做。我使用相同的技术来制作流畅的餐厅菜单。

```
ul { width:20em;} 
ul:first-child {font-weight: 700}
ul ul {font-weight: 400}

ul span:first-child { padding-left:1em;}
ul span + span { float:right;}

<ul>
    <li>fruit</li>
    <ul>
        <li><span>apple</span><span>90</span></li>
        <li><span>grappe</span><span>5</span></li>
        <li><span>strawberry</span><span>16</span></li>
        <li><span>etc</span><span>5.25</span></li>        
    </ul>
    <li>vegetable</li>
    <ul>
        <li><span>cucumber</span><span>12</span></li>
        <li><span>Onion</span><span>29</span></li>   
    </ul>    
</ul> 
```

在这里看到它：[演示](http://jsfiddle.net/Lym9M/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T17:04:50.567

这实际上是表格数据，因此可以使用表格。

但是你可以这样做：http: [//jsfiddle.net/eFmtR/](http://jsfiddle.net/eFmtR/)

```
ul {
 width:300px;
}
ul li {
 width:150px;
 float:left;
 text-align:center;
}

strong {
 font-weight:bold;
}

<ul>
 <li><strong>Food</strong></li>
 <li><strong>Calories</strong></li>
 <li>list item</li>
 <li>list item</li>
 <li>list item</li>
 <li>list item</li>
 <li>list item</li>
 <li>list item</li>
 <li>list item</li>
 <li>list item</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T17:51:45.030

我会做这样的事情：

**CSS**

```
 .foods{border:1px solid red;overflow: hidden;width:310px;}
        ul li{list-style: none;}
        ul li.dash:before{content:"-";}
            .fruit{float:left;width:150px;}
            .calories{float:left;width:150px;} 
```

**HTML**

```
<div class="foods">
        <div class="fruit">
            <h3>Food</h3>

                <h3>Fruits</h3>
                <ul>
                    <li class="dash">Apple</li>
                    <li class="dash">Grape</li>
                    <li class="dash">Strawberry</li>
                </ul>
                <h3>Vegetable</h3>
                    <ul>
                    <li class="dash">Cucumber</li>
                    <li class="dash">Onion</li>

                </ul>

        </div>
        <div class="calories">
            <h3>Calories</h3>
            <div>
                <h3>&nbsp;</h3>
                <ul>
                    <li>90</li>
                    <li>15</li>
                    <li>16</li>
                </ul>
                <h3>&nbsp;</h3>
                <ul>
                    <li>12</li>
                    <li>29</li>

                </ul>
            </div>
        </div>
    </div> 
```

[**演示**](http://jsfiddle.net/eFmtR/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T17:27:23.657

我知道您要实现的目标，但是您可以实现 jQuery 来执行此操作，但这取决于您的使用情况。@BillyMoat 的答案将处理在两列中显示结果，但如果您希望它们展开/折叠，您可以部署 jQuery Accordion：[http ://docs.jquery.com/UI/API/1.8/Accordion](http://docs.jquery.com/UI/API/1.8/Accordion)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-22T15:59:51.533

您可以尝试使用的一种无 JavaScript 解决方案是新的 column-count CSS 属性。不过要注意 IE，除非它们在 IE10+ 上，否则它不会被支持：http: [//caniuse.com/multicolumn](http://caniuse.com/multicolumn)

```
ul {
     -webkit-column-count: 3; /* Beware of IE Problems */
} 
```

这可能不会完美地“拆分”您的数据，但对于其他访问此页面的人来说，这是值得探索的。

# dreamweaver - Spry 选项卡式面板小部件

> ID：13458427
> 
> 赞同：1
> 
> 时间：2012-11-19T16:50:59.953
> 
> 标签：dreamweaver, spry, panels, tabbed

希望有人可以提供帮助。我的站点中有一个正常工作的 Spry 选项卡式面板小部件，其结构为标准结构，具有以下主要选项卡：

```
<ul class="TabbedPanelsTabGroup">
   <li class="TabbedPanelsTab tabindex="0"></li>
   <li class="TabbedPanelsTab" tabindex="0"></li>
   <li class="TabbedPanelsTab" tabindex="0"></li>
   <li class="TabbedPanelsTab" tabindex="0"></li> 
</ul> 
```

一切正常并打开相关内容区域等。但是，我希望更改选项卡式面板的行为....

我想要的是（由于太复杂而无法进入！）是上述选项卡之一实际上不打开内容区域，而是仅链接到另一个窗口中的另一个网站。我似乎无法让 JavaScript 仅适用于某些选项卡。

总之，我希望 3 个选项卡正常运行，并打开相关内容区域（目前正在运行）

其中一个选项卡的功能就像指向任何其他 href 的普通链接一样。

请帮忙！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:35:20.867

1.  选择您想成为链接的选项卡
2.  在“行为”面板中添加`onFocus`一个转到 URL 事件，以便在单击它时将您重定向到您的链接或打开一个新窗口
3.  在内容窗格中，您可以简单地为阅读器添加一条评论，显示该页面已在另一个窗口中打开

# list - 将数据变成列表

> ID：13458430
> 
> 赞同：0
> 
> 时间：2012-11-19T16:51:01.407
> 
> 标签：list, sorting, python-3.x, transform

我使用我编写的程序合并了两个 .txt 文件。现在，一旦我将这两个 .txt 文件组合在一起，我就会得到未排序的数据组合。

我的数据看起来像这样

```
Bud Abbott 51 92.3
Mary Boyd 52 91.4
Hillary Clinton 50 82.1
Don Adams 51 90.4
Jill Carney 53 76.3
Randy Newman 50 41.2 
```

但是我希望它看起来像这样

```
 ['Bud', 'Abbott', 51, 92.3]
 ['Don', 'Adams', 51, 90.4]
 ['Mary', 'Boyd', 52, 91.4]
 ['Jill', 'Carney', 53, 76.3]
 ['Hillary', 'Clinton', 50, 82.1]
 ['Randy', 'Newman', 50, 41.2] 
```

我如何将我拥有的变成我想要的

顺便说一句，我必须得到我的第一组数据的代码看起来像这样

```
def ReadAndMerge():

     library1=input("Enter 1st filename to read and merge:")
     with open(library1, 'r') as library1names:
          library1contents = library1names.read()
     library2=input("Enter 2nd filename to read and merge:")
     with open(library2, 'r') as library2names:
          library2contents = library2names.read()

     print(library1contents)
     print(library2contents)
     combined_contents = library1contents + library2contents  # concatenate text

     file = combined_contents
     lines = []

     for l in file:
          line = l.strip().split(" ")
          lines.append(line)

     lines.sort(key=lambda lines: lines[1])

     for line in lines:
          print(line)

print(combined_contents)
return(combined_contents) 
```

读取并合并（）

库 1 和库 2 分别是这样的

```
Bud Abbott 51 92.3
Mary Boyd 52 91.4
Hillary Clinton 50 82.1

Don Adams 51 90.4
Jill Carney 53 76.3
Randy Newman 50 41.2 
```

我如何对其进行排序并在列表中

我用你的新行更新了我的程序，但是当我运行它时，我不断收到这个错误

```
Traceback (most recent call last):
 File "C:/Users/Shane/Documents/Amer CISC/readandmerge.py", line 30, in <module>
ReadAndMerge()
 File "C:/Users/Shane/Documents/Amer CISC/readandmerge.py", line 23, in ReadAndMerge
lines.sort(key=lambda lines: lines[1])
 File "C:/Users/Shane/Documents/Amer CISC/readandmerge.py", line 23, in <lambda>
lines.sort(key=lambda lines: lines[1])
 IndexError: list index out of range
 >>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:56:52.190

```
def getListOfLinesInFile(file): 
    file = open(file, "r")
    lines = []    
    for l in file:
        line = l.strip().split(" ")
        lines.append(line)
    file.close()
    return lines 
```

要在您的程序中使用它，只需您的`ReadAndMerge`-function ：

```
def ReadAndMerge():
    library1 = input("Enter 1st filename to read and merge: ")
    library1_list = getListOfLinesInFile(library1)

    library2 = input("Enter 2nd filename to read and merge: ")
    library2_list = getListOfLinesInFile(library1)

    library_merged = library1_list + library2_list
    library_merged.sort(key=lambda library_merged: library_merged[1])

    print(*library_merged)
    return library_merged 
```

# c# - 用于多个服务的 WCF 服务架构

> ID：13458441
> 
> 赞同：2
> 
> 时间：2012-11-19T16:51:31.967
> 
> 标签：c#, .net, wcf, design-patterns

我在这里得到了一些建议，所以我朝着正确的方向前进。

我有一项服务，它在一项服务中完成了我的所有业务功能，例如：

```
TestingService
      GetProducts()
      GetPeople() 
```

现在，我觉得，随着我的系统不断增长，我想把它们分开，所以：

```
ProductService
    GetProducts()
PeopleService
    GetPeople() 
```

最好的方法是在同一个项目中有两个 .svc 文件并分别调用它们吗？我已经实现了一个运行良好的存储库模式，现在有了 IProductService 和 IPeopleService。如果我要这样做，并且我在控制器中使用了这两个构造函数 - 我会得到这样的东西：

```
public TestController(IProductService productService, IPeopleService service) 
```

而不是

```
public TestController(ITestService service) 
```

我原来的。

如果我在单个控制器中使用 5 个服务，哪个会变得笨拙？这就是工厂类的用途，作为服务级别的包装器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:25:03.780

我认为您希望将服务放在存储库类而不是控制器中。像这样的东西：

```
public TestRepository(IProductService productService)  {} 
```

如果您选择您提到的更细化的方法，您将拥有许多服务而不是一项大型服务 - 好主意。此外，如果您的控制器/存储库/服务之间存在一对一的关系，那么您将拥有良好且可维护的结构。

但是，如果您的关系是一对多，那么工厂方法当然是一种选择。也许是这样的：

```
// Factory
     public class ServiceFactory : IServiceFactory
        {
         public IProductService GetProductService()
            {
                return new ProductService();
            }
         public IPeopleService GetPeopleService ()
            {
                return new PeopleService ();
            }
          }

// Repository
    public class ProductRepository
        {
        public void DoSomething()
        {
            // use dependecy injection to avoid this tight coupling
            var factory = new ServiceFactory(); 
            var service = factory.GetProductService();
            service.DoMyStuff();
        }

} 
```

# javascript - 包括 jquery 会破坏我的简单网页

> ID：13458443
> 
> 赞同：0
> 
> 时间：2012-11-19T16:51:36.333
> 
> 标签：javascript, jquery

莫名其妙地，正在呈现和正常运行的网页已经停止工作。据我所知，我使用的是以前使用的相同浏览器（Chrome v. 23.0.1271.64）、相同的 JQuery 等。我尝试将 JQuery 升级到最新版本，但我*仍然*遇到这个问题。当我点击“稍后阅读”时，我看到消息“Uncaught ReferenceError: foo is not defined index.html:14 onclick”

当我注释掉 Jquery 包含时，它可以工作。

我在 Firefox 中尝试过，我得到了相同的结果。

这是我的网页：

```
<html>
  <head>
    <title>Kanban2go API Test Page</title>
      <script src="lib/jquery-1.8.3.min.js"/>
      <script>
          function foo(event) {
              console.log("Foo!")
              return true;
          }
      </script>
  </head>
  <body>
    <form action="#">
      <input type="submit" value="Read Later" onclick="foo(event);"/>
    </form>
  </body>
</html> 
```

* * *

编辑：

感谢所有的答复。我对与我的问题有关的所有答案都投了赞成票，但我只能接受一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:53:22.803

`<script src="lib/jquery-1.8.3.min.js"/>`应该`<script src="lib/jquery-1.8.3.min.js"></script>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T16:53:34.820

脚本不是自闭标签

改变

```
<script src="lib/jquery-1.8.3.min.js"/> 
```

至

```
<script src="lib/jquery-1.8.3.min.js"> </script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T16:53:44.507

**始终**使用`</script>`. 永远不要自行关闭脚本标签：

```
<script src="lib/jquery-1.8.3.min.js"></script>
<script>
          function foo(event) {
              console.log("Foo!")
              return true;
          }
</script> 
```

# java - 绘制饼图并旋转

> ID：13458444
> 
> 赞同：0
> 
> 时间：2012-11-19T16:51:41.873
> 
> 标签：java, graphics, rotateanimation

编写一个带有饼图控件的应用程序（看下图）。饼图可以使用鼠标向各个方向旋转，颜色随机填充，部分的数量可以变化。没有任何 3D 库可用于绘图。 ![在此处输入图像描述](../Images/bd84c7839787a73f8afac23b1a0b251e.png)

这是我的代码出了什么问题，我不能在 3d 中旋转。

```
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.Random;
import java.util.Scanner;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

class Slice{

    private double value;
    private  Color color;
    public Slice(double _value){
        Random numGen = new Random();
        int R =  numGen.nextInt(256);
        int G = numGen.nextInt(256);
        int B = numGen.nextInt(256);
        this.setColor(new Color(R,G,B));
        this.value = _value;    
    }
    public void setColor(Color _color){
        this.color = _color;
    }
    public double getValue(){
        return value;
    }
    public Color getColor(){
        return color;
    }
}

class panel extends JPanel{
    JButton bt;
    JTextField txt;
    public panel() {
        bt = new JButton("Submit");
        txt = new JTextField(5);
        add(txt);
        add(bt);
    }   

}

class Component extends JComponent {

    int movx = 0;
    int movy = 0;
    private double angle = 0;
    private double radius = 0.0D;
    private  Random numGen;
    private int w = 500;
    private int h = 500;

    Slice[] slice ;
    public Component(double[] a, int size){
        slice = new Slice[size];
        for( int i = 0; i < size; ++i ){
            slice[i] = new Slice(a[i]);
        }
        numGen = new Random();
        Listener listener = new Listener();
        addMouseListener(listener);
        addMouseMotionListener(listener);

    }

    class Listener extends MouseAdapter{
        private double LastAngle;
        @Override
        public void mousePressed(MouseEvent e) {
            LastAngle = getAngle(e.getPoint());
        }
        @Override
        public void mouseDragged(MouseEvent e) {
            double curAngle = getAngle(e.getPoint());
            double deltaAngle = curAngle - LastAngle;
            angle += deltaAngle;
            repaint();
            LastAngle = curAngle;
        }
        private double getAngle(Point point) {
            double x = point.getX() - 0.5 * w;
            double y = point.getY() - 0.5 * h;
            return Math.atan2(y, x);
        }

    }

    public void paint(Graphics g){
        Graphics2D g2 = (Graphics2D)g;
      // g2.translate(250, 250);
        g2.rotate(angle,(w/2),(h/2));
        drawPie(g2, getBounds(), slice);

    }
    public void drawPie(Graphics2D g, Rectangle area, Slice[] s){
        double total = 0.0D;

        //calculate total value
        for(int i=0;i<s.length;i++)
            total+=s[i].getValue();

        radius = total/2*Math.PI;
        double curentValue = 0.0D;
        int startAngle = 0; 
        //for(int j=10;j>0;j--){
        for(int i = 0;i<s.length;i++){           
            //s[i].setColor(new Color(numGen.nextInt(256), numGen.nextInt(256), numGen.nextInt(256)));
            startAngle = (int)((curentValue*360)/total);
            int arcAngle = (int)((s[i].getValue()*360)/total) ;
            g.setColor(s[i].getColor());
            //g.rotate(angle);//row AA 

            g.setComposite ( AlphaComposite.getInstance ( AlphaComposite.SRC_OVER, 0.5f ) );

            g.fillArc(0, 0, w, h, startAngle, arcAngle);   

        curentValue+=s[i].getValue();}

        //}
    }

}

public class PieChart {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame frame = new JFrame();      
        frame.setSize(600,600);       
        int size;
        Scanner s = new Scanner(System.in);

        double a[];
        System.out.println("enter size:");
        size = s.nextInt();
        a = new double [size];
        System.out.println("enter array of value:");
        for(int i=0;i<size;i++){
            a[i] = s.nextDouble();
        }

        frame.getContentPane().add(new Component(a,size));        
        frame.setVisible(true);

    }
} 
```

# java - 通过侦听器或 Web 服务传递数据的正确机制是什么

> ID：13458448
> 
> 赞同：0
> 
> 时间：2012-11-19T16:51:49.743
> 
> 标签：java, linux

我们有一个 java 监听器，它从特定设备中挑选数据并处理它们，最后将它们存储到数据库中。现在我们需要将这些数据相应地传递给某些设备的其他远程数据库。将它传递给远程数据库的最佳方法是直接通过 java 侦听器还是编写另一个守护程序来读取和发送数据？出平台是linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:40:35.797

如果您可以更改当前侦听器的代码，那么添加一个额外的函数会更好。也许添加可注入的类，它会做额外的处理并返回到原来的监听器。这样您就可以添加任意数量的新函数，而无需稍后更改侦听器的代码。
如果由于某种原因您将不得不遵循第二个选项 - 单独的守护进程 - 而不是记住可能的竞争条件，两个守护进程同时和/或按顺序访问数据，并且可能在其中一个之前删除/更改数据守护进程有机会处理它。

# java - 反序列化最终列表属性

> ID：13458458
> 
> 赞同：3
> 
> 时间：2012-11-19T16:52:39.473
> 
> 标签：java, xstream

假设我们有一个类 Test 像：

```
public class Test {
    private final String name;
    private final List<String> list = new ArrayList<>();

    public Test(String name) {
        this.name = name;
    }

    void add(String s) {
        list.add(s);
    }

    void print() {
        System.out.println("name: " + name);
        for (String s : list) {
            System.out.println(" - " + s);
        }
    }
} 
```

没有 XSteam 的不变量

```
this.list != null 
```

每次都持有。

但是如果我们看一下第四个测试

```
public static void main(String[] args) {
    final XStream xstream = new XStream();
    xstream.alias("test", Test.class);

    // Serialize
    final Test test1 = new Test("XYZ");
    test1.add("One");
    test1.add("Two");

    //@formatter:off
    /* name: XYZ
     *  - One
     *  - Two
     */
    //@formatter:on
    test1.print();

    //@formatter:off
    /* <test>
     *   <name>XYZ</name>
     *   <list>
     *     <string>One</string>
     *     <string>Two</string>
     *   </list>
     * </test>
     */
    //@formatter:on
    System.out.println(xstream.toXML(test1));

    // Deserialize with one list entry
    final String xmlTest2 = "<test><name>XYZ</name><list><string>One</string></list></test>";
    final Test test2 = (Test) xstream.fromXML(xmlTest2);
    //@formatter:off
    /* <test>
     *   <name>XYZ</name>
     *   <list>
     *     <string>One</string>
     *   </list>
     * </test>
     */
    //@formatter:on
    test2.print();

    // Deserialize with empty list
    final String xmlTest3 = "<test><name>XYZ</name><list /></test>";
    final Test test3 = (Test) xstream.fromXML(xmlTest3);
    //@formatter:off
    /* name: XYZ
     */
    //@formatter:on
    test3.print();

    // Deserialize without list-tag
    final String xmlTest4 = "<test><name>XYZ</name></test>";
    final Test test4 = (Test) xstream.fromXML(xmlTest4);
    //@formatter:off
    /* name: XYZ
     * Exception in thead ... NullPointerException
     */
    //@formatter:on
    test4.print();
} 
```

我们看到一个 NullPointerException，因为`list`没有初始化。

我想`list`在 XML 可选中包含与 test4 类似的 -element。我能做些什么？因为我的数据模型中有很多类类似于`Test`，所以我不想`Converter`为每个类都写一个。但是假设我会写一个`Converter`，我该如何设置最终属性`name`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:34:09.323

[请使用 XStream Annotations 和自定义 Converter](http://xstream.codehaus.org/annotations-tutorial.html)找到以下解决方案。

自定义转换器是以下类：

```
 public class ListableConverter implements Converter {

    public void marshal(Object source, HierarchicalStreamWriter writer,
            MarshallingContext context) {
        Listable listable = (Listable) source;
        writer.setValue(String.valueOf(... your marshalling logic here ...));
    }

    public Object unmarshal(HierarchicalStreamReader reader,
            UnmarshallingContext context) {
        List<String> list = new ArrayList<String>();
        // your unmarshalling logic here
        return list;
    }

    public boolean canConvert(Class type) {
        return type instanceof Listable;
    }
} 
```

这是带有注释的修改后的测试类：

```
public class Test implements Listable{
    private final String name;

    @XStreamConverter(ListableConverter.class)
    private final List<String> list = new ArrayList<>();

    public List<String> getList() {
        return list;
    }

    public Test(String name) {
        this.name = name;
    }

    void add(String s) {
        list.add(s);
    }

    void print() {
        System.out.println("name: " + name);
        for (String s : list) {
            System.out.println(" - " + s);
        }
    }
} 
```

最后，用于使转换器适用于模型中实现该接口的任何类的接口：

```
public interface Listable<String> {

    public List<String> getList();

} 
```

因此，例如，模型中的另一个类可能如下所示：

```
 public class Foo implements Listable{

        @XStreamConverter(ListableConverter.class)
        private final List<String> anotherList = new ArrayList<>();

        ... omissis ...

        public List<String> getList() {
          return anotherList;
        }

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:23:28.537

XStream 在增强模式（默认）下使用 munged 构造函数（http://stackoverflow.com/questions/1426106/why-are-constructors-returned-by-reflectionfactor-newconstructorforserialization）。您可以通过在纯模式下初始化 XStream 来更改此行为：

```
XStream xstream = new XStream(new PureJavaReflectionProvider()); 
```

另一种选择是使用 getter 访问变量并实现延迟初始化。

```
public class Test {
private final String name;
private List<String> list;

public Test(String name) {
    this.name = name;
}

void add(String s) {
    list.add(s);
}

List<String> getList() {
  if (list == null) {
    list = new ArrayList<>();
  }
  return list;
}

void print() {
    System.out.println("name: " + name);
    for (String s : getList()) {
        System.out.println(" - " + s);
    }
}
} 
```

# actionscript-3 - 如何从使用场景切换到仅在一个场景中使用时间轴

> ID：13458461
> 
> 赞同：1
> 
> 时间：2012-11-19T16:52:45.877
> 
> 标签：actionscript-3, flash, adobe, project

我和我的搭档正在做一个项目，我们必须开发一个简单的游戏，并且还有两个视频，例如博物馆界面。我们已经建立了一个主页（场景 1），其中只包含一个 ENTER 按钮，然后我们有一个菜单页面（场景 2），其中包含视频 1、视频 2 和游戏的三个按钮。

我们被告知我们不应该使用场景，所以我们希望将两个场景放在一个时间轴上以及后续场景。有没有简单的方法把场景 2 放到场景 1 的时间线上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:27:08.377

您将需要管理每个页面的可见性。使用 page1.visible = true 和 page2.visible = false 启动应用程序。当用户单击播放按钮时，交换这些值。这样，两个页面同时在舞台上，您不必使用场景。

根据您最终使用的复杂程度或页面数量，您可能需要研究 MVC（模型/视图/控制器）架构设计。他们可以很好地处理任何语言的多个视图。Flash 的不同之处在于它内置了处理 UI 的方法，可以很容易地做简单的事情，但是一旦它开始变大，它就不能很好地扩展。

# sql - 如何从 SQL Server 2012 中的表列中查询最大值？

> ID：13458463
> 
> 赞同：1
> 
> 时间：2012-11-19T16:52:50.327
> 
> 标签：sql, sql-server-2012

例如，我有一个表，其中有一列`ID`如下所示：

```
 ID  
------
  1 
  2
  3 
  4 
```

我如何查询才能得到 4？

我正在使用 SQL Server 2012

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T16:55:01.810

```
select max(ID) from [Table] 
```

[SQLFiddle](http://sqlfiddle.com/#!6/4cbf2/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:54:41.933

你应该使用`SELECT max(Id) FROM mytable`

你应该能够使用这样的代码来完成它：

```
 int maxId = -1;
    string connectionString = "yourConnectionString";
    try
    {
        using (SqlConnection con = new SqlConnection(connectionString))
        {
            con.Open();
            using (SqlCommand command = new SqlCommand("SELECT max(Id) FROM mytable", con))
            {
                maxId = Convert.ToInt32(command.ExecuteScalar());
            }
        }
    }
    catch (Exception err)
    {
        MessageBox.Show(err.Message);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-29T03:56:12.380

你也可以使用

```
SELECT TOP 1 ID
FROM mytable
ORDER BY ID DESC 
```

放弃计算并利用排序功能在您正在检查的任何列中找到最高值。

谢谢，

C§

# c - 并行块中允许哪些功能和操作？

> ID：13458471
> 
> 赞同：0
> 
> 时间：2012-11-19T16:53:26.610
> 
> 标签：c, parallel-processing, openmp, operations

代码：

```
double x(){return (double)rand()/(double)RAND_MAX;}
double y(){return (double)rand()/(double)RAND_MAX;}
double z(){return (double)rand()/(double)RAND_MAX;}

int d(double x, double y, double z){
        if ( ( (pow(x,2)+pow(y,2)) <1 ) && ( z<=1 && z>=0 )) return 1;
        return 0;
    }

double f(double x, double y, double z){
        return 1;
    }

#pragma omp parallel default(none) private(id,numt,j,local_sum,local_good_dots,local_coi,x_,y_,z_) shared(total_sum,good_dots,count_of_iterations)
    {
        local_coi = count_of_iterations;
        id = omp_get_thread_num() + 1;
        numt = omp_get_num_threads();
        #pragma omp for
        for (j = 1; j <= local_coi;  j++){
            x_=x();
            y_=y();
            z_=z();
            if (d(x_,y_,z_) == 1){
                local_sum += f(x_,y_,z_);
                local_good_dots += 1;

            }
        }

        #pragma omp critical
        {
            total_sum = total_sum + local_sum;
            good_dots = good_dots + local_good_dots;
        }
    } 
```

`f()`注释：此代码是蒙特卡洛方法的实现，用于计算面积函数的三维积分`d()`。

我希望这段代码在多线程模式（openmp）下运行得更快。

但是出了点问题。

经过几个小时的修改（`reduction`在 openmp pragma 中，if-condition 的简化（如`f(x_,y_,z_) * d(x_,y_,z_)`））我不明白，为什么这个简单的循环在更多的线程上变得更慢。

但是在我为循环之前的每个坐标生成一个 3 维数组并将其放入之后`shared`，我的程序变得更快。

所以，问题：

如何修改此代码以及并行块中允许哪些功能（操作）？

PS：如我所见，该`rand`功能是不允许的（或者我错了？）

感谢帮助！

修改（在@HristoIliev 的帮助下）

```
double x(){return (double)rand()/(double)RAND_MAX;}
double y(){return (double)rand()/(double)RAND_MAX;}
double z(){return (double)rand()/(double)RAND_MAX;}

int d(double x, double y, double z){
        if ( ( (pow(x,2)+pow(y,2)) <1 ) && ( z<=1 && z>=0 )) return 1;
        return 0;
    }

double f(double x, double y, double z){
        return 1;
    }

#pragma omp parallel default(none) private(j,local_coi,x_,y_,z_) shared(count_of_iterations) reduction(+:total_sum,good_dots)
    {
        local_coi = count_of_iterations;
        #pragma omp for(prng)
        for (j = 1; j <= local_coi;  j++){                    
        #pragma omp critical(prng)
        {
                x_=x();
                y_=y();
                z_=z();
        }   
            if (d(x_,y_,z_) == 1){
                total_sum += f(x_,y_,z_);
                good_dots += 1;

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:08:14.860

随机数生成器`rand()`使用全局静态分配状态，由所有线程共享，因此不是线程安全的。从多个线程中使用它会遇到一个非常糟糕的情况，即对共享变量的无保护访问会破坏缓存并减慢程序速度。您应该使用`rand_r()`or`erand48()`代替 - 他们使用您必须提供的单独的状态存储。您必须为每个线程声明一个状态（例如拥有它`private`），基本上为每个线程创建不同的 PRNG。然后你必须相应地播种它们，否则你会得到统计上糟糕的结果。原则上，您可以使用一个`rand48()`生成器的输出来播种其他生成器 - 这应该足以获得中等长度的不相关序列。

这是一个使用示例实现`rand_r()`（并不是说这是一个*非常糟糕*的蒙特卡洛模拟生成器，`erand48`更好，最好是使用来自 GNU 科学库的“Mersenne Twister”类型生成器（如果可用））：

```
unsigned int prng_state;
#pragma omp threadprivate(prng_state)

double x(){return (double)rand_r(&prng_state)/(double)RAND_MAX;}
double y(){return (double)rand_r(&prng_state)/(double)RAND_MAX;}
double z(){return (double)rand_r(&prng_state)/(double)RAND_MAX;}

int d(double x, double y, double z){
    if ( ( (pow(x,2)+pow(y,2)) <1 ) && ( z<=1 && z>=0 )) return 1;
    return 0;
}

double f(double x, double y, double z){
    return 1;
}

...

#pragma omp parallel default(none) \
            private(id,numt,x_,y_,z_) \
            shared(count_of_iterations) \
            reduction(+:total_sum,good_dots)
{
    id = omp_get_thread_num() + 1;
    numt = omp_get_num_threads();

    // Sample PRNG seeding code - DO NOT USE IN PRODUCTION CODE!
    prng_state = 67894 + 1337*id;

    #pragma omp for
    for (j = 1; j <= count_of_iterations;  j++){
        x_=x();
        y_=y();
        z_=z();
        if (d(x_,y_,z_) == 1){
            total_sum += f(x_,y_,z_);
            good_dots += 1;
        }
    }
} 
```

这只是一个非常糟糕的（从质量的角度来看）实现，但它应该让您了解事情是如何工作的。这也是您可以通过对原始代码进行最少更改来实现线程安全的方法。基本要点是：

*   通过 OpenMP指令，PRNG 状态`prng_state`对每个线程都是私有的；`threadprivate`
*   `rand_r()`使用线程特定的状态变量代替`rand()`in `x()`,`y()`和`z()`;
*   PRNG 状态以与线程相关的方式初始化，例如`prng_state = 67894 + 1337*id;`，以便不同的线程（希望）获得不相关的伪随机数流。

请注意，`rand()`并且`rand_r()`质量很差，这只是一个学术示例。使用较长的 PRNG 序列，您会在不同的线程中获得相关的流，这会破坏统计数据。我让您自己使用`erand48()`.

要回答您最初的问题 - 块内允许所有线程安全的函数调用`parallel`。您也可以调用非线程安全函数，但必须保护（命名）`critical`构造内部的调用，例如：

```
#pragma omp for
for (j = 1; j <= local_coi; j++) {
    #pragma omp critical(prng)
    {
        x_=x();
        y_=y();
        z_=z();
    }
    if (d(x_,y_,z_) == 1) {
        local_sum += f(x_,y_,z_);
        local_good_dots += 1;
    }
} 
```

这将确保不会`rand()`并行进行调用。但是您仍然可以对共享状态进行读-修改-写访问，因此与缓存相关的减速。

此外，不要*尝试*重新实现 OpenMP`reduction`或类似结构。编译器供应商已经付出了巨大的努力来确保它们以尽可能最好（读取速度最快）的方式实现。

# javascript - 难以掌握 JavaScript 闭包（即，为什么这个 for 循环不起作用？）

> ID：13458474
> 
> 赞同：1
> 
> 时间：2012-11-19T16:53:35.500
> 
> 标签：javascript, for-loop, closures

> **可能重复：**
> [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

我搜索了常见问题解答并查看了示例，但我似乎无法理解为什么这不起作用。我真的很感激任何关于我做错了什么的提示。我要做的就是取一个单词，然后单击按钮，为每个字母一次显示一个图像，拼出单词（并且图像应该淡入/淡出）。这是经典的“for 循环仅显示最后一项”问题，但问题是，控制台正确记录。变量更改，但仅显示最后一个图像。再次感谢任何帮助理解我做错了什么，因为我知道完全掌握这一点很重要。下面的代码（我省略了 HTML，因为它只是一个更新的 div 和一个按钮）：

```
$(document).ready(function () {
  var word = 'abc';

  $('#newWordButton').click(function () {
    function animateLetters() {
      function changeLetter() {
        for (i = 0; i < word.length; i++) {
          var currentLetter = word.charAt(i);
          console.log(currentLetter);
          $('#wordsDiv').fadeOut(1000, function () {
            $('#wordsDiv').replaceWith('<img src = "images/letters/' + currentLetter + '.gif" />');
            $('#wordsDiv').fadeIn(1000);
          });
        }
      }
      setTimeout(changeLetter, 1000);
    }

    animateLetters();
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:00:43.257

简短的回答是闭包是由函数的范围定义的，而不仅仅是任何一对尖括号。由于 for 循环不是函数定义，因此它不会形成闭包。

我认为@gpojd 提供了一些可行的代码。但是有更多关于[关闭 FAQ](https://stackoverflow.com/questions/tagged/closures)的信息，例如：

*   [闭包是如何工作的](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)
*   [循环内的 Javascript 闭包](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)
*   [Javascript臭名昭著的循环问题](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:56:45.590

您需要`currentLetter`通过将值作为参数传递给自执行函数来创建闭包。这将在您的函数执行时为您保留该值。

未经测试的例子：

```
for (i = 0; i < word.length; i++) {
    (function (currentLetter) {
        console.log(currentLetter);
        $('#wordsDiv').fadeOut(1000, function () {
            $('#wordsDiv').replaceWith('<img src = "images/letters/' + currentLetter + '.gif" />');
            $('#wordsDiv').fadeIn(1000);
        });
    )(word.charAt(i));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:31:02.713

JavaScript 是函数范围的。每次创建新函数时，它都会：

1.  获取一个范围对象，该对象包含自己声明的变量（包括参数变量）
2.  具有对定义它的范围的引用，当您尝试访问函数自身范围中不存在的变量时，该引用在运行时遍历。

因此，查看代码的略微编辑版本（添加`var`到循环中，因此`i`不是全局的，删除了`animateLetters()`包装层）：

```
$(document).ready(function () {
  var word = 'abc';

  $('#newWordButton').click(function () {
    function changeLetter() {
      for (var i = 0; i < word.length; i++) {
        var currentLetter = word.charAt(i);
        $('#wordsDiv').fadeOut(1000, function () {
          $('#wordsDiv').replaceWith('<img src = "images/letters/' + currentLetter + '.gif" />');
          $('#wordsDiv').fadeIn(1000);
        });
      }
    }
    setTimeout(changeLetter, 1000);
  });
}); 
```

这是生成的结果范围的样子（用方括号表示范围）：

```
[global] - this is the fallback scope, and how every reference to $ is resolved
| var $
+-[function()] (passed to ready call)
  | var word
  +-[function()] (passed to click call)
    | var changeLetter
    +-[function changeLetter()]
      | var i = 4
      | var currentLetter = 'c'
      +-[function()] (passed to 1st fadeOut call)
      | |
      +-[function()] (passed to 2nd fadeOut call)
      | |
      +-[function()] (passed to 3rd fadeOut call)
        | 
```

当您的 fadeOut 函数被调用时，它们会在访问变量时沿着作用域链查找`currentLetter`变量，因为它们自己的作用域中没有变量。请注意，它们都可以访问*相同*的父作用域，因此它们都在访问相同的`currentLetter`变量，在`for`循环退出后，该变量将指向`'c'`.

* * *

这是使用@gpojd 的解决方案时范围图底部的样子（但不要忘记添加`var i`到循环表达式！），在`for`循环退出后：

```
[function changeLetter()]
| var i = 4
+-[function()] (IIFE in 1st loop iteration)
| | var currentLetter = 'a'
| +-[function()] (passed to 1st fadeOut call)
|   |
+-[function()] (IIFE in 2nd loop iteration)
| | var currentLetter = 'b'
| +-[function()] (passed to 2nd fadeOut call)
|   |
+-[function()] (IIFE in 3rd loop iteration)
  | var currentLetter = 'c'
  +-[function()] (passed to 3rd fadeOut call)
    | 
```

解决方案是使用[立即调用函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)(IIFE) 在每次循环迭代中创建一个中间函数范围，它将当前值的字符值传递到它自己范围内`i`的变量中 - 现在当你的淡出`currentLetter`调用函数时，它们会`currentLetter`在 IIFE 创建的函数范围内查找并使用变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:18:43.187

关闭不是你问题的一半......

for 循环阻止了任何实际动画...您正在用`#wordsDiv`图像替换 the ，因此下一张图像不可能存在。

见这里：http: [//jsfiddle.net/P8Lz5/](http://jsfiddle.net/P8Lz5/)

```
$(document).ready(function() {
    var word = 'pneumonoultramicroscopicsilicovolcanoconiosis';
    $('#newWordButton').click(animateLetters);

    function animateLetters() {
        (function changeLetter(i) {
            if (i == word.length) return;

            var currentLetter = word.charAt(i);
            console.log(currentLetter);

            $('#wordsDiv').empty();
            var img = new Image();
            img.src = 'http://placehold.it/100x100/&text=' + currentLetter;

            img.onload = function() {
                $(img).appendTo('#wordsDiv').hide().fadeIn(1000, function() {
                    $('#wordsDiv img').delay(1000).fadeOut(1000, function() {
                        changeLetter(i + 1);
                    });
                });
            };
        })(0);
    }
});​ 
```

或者，如果您希望字母一次淡入一个单词以形成一个单词，请参见此处：http: [//jsfiddle.net/P8Lz5/1/](http://jsfiddle.net/P8Lz5/1/)

# python - sudo cd 进入带有 Fabric 的目录

> ID：13458478
> 
> 赞同：3
> 
> 时间：2012-11-19T16:53:41.790
> 
> 标签：python, sudo, fabric

我是 Fabric 的新手，我正在尝试 cd 进入一个我没有权限的目录，所以我正在使用`sudo`. （目录的权限是drwx------，即700）

我正在使用 Fabric 0.9.7。

我试过这个：

```
from fabric.api import run, env
from fabric.context_managers import cd

env.hosts = [ '1.2.3.4' ]
env.user = 'username'

def test():
       run('sudo cd /my/dir')
              run('ls') 
```

但这给了我“对不起，你必须有一个 tty 才能运行 sudo”，这是可以理解的。我也试过这个：

剪辑：

```
def test():
        with cd('/my/dir'):
                run('ls') 
```

但这返回“权限被拒绝”，再次可以理解。

简而言之，我如何`sudo cd`在 Fabric 中“”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:59:42.290

这是因为`cd`它是一个 shell 内置命令，而不是一个可以运行的实际程序`sudo`。你在正确的轨道上`with cd(...):`。尝试类似：

```
with cd('/my/dir'):
    sudo('ls') 
```

我*认为*这会奏效，尽管我自己还没有尝试过。这是因为`cd`上下文管理器的工作方式是预先`cd <dirname> &&`添加到任何使用`run()`or运行的命令`sudo()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T17:05:52.683

你有什么理由不只是使用[`sudo()`](http://docs.fabfile.org/en/1.5/api/core/operations.html#fabric.operations.sudo)？它可能会解决您遇到的问题。

如果您使用的是 1.0 之前的 Fabric 版本，则需要明确[告诉它创建一个 TTY](http://fabric.readthedocs.org/en/0.9.0/api/core/operations.html#fabric.operations.sudo)：

```
sudo("ls", pty=True) 
```

否则，您可能需要编辑您的 sudoers 文件并删除或注释掉这一行：

```
Defaults    requiretty 
```

应该：

```
#Defaults    requiretty 
```

此外，它可能更烦人，但如果`with cd(...)`导致问题，您始终可以将路径作为参数传递给`ls`：

```
sudo("ls /my/dir") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-19T21:41:35.717

正如其他人所解释的那样，`cd`它是 Linux 中内置的 shell，但`sudo`仅适用于可执行文件，因此`sudo cd`无法工作。

`with c.cd()`因此，即使使用`sudo()`最新的 Fabric 也不起作用，这个任务：

```
@task
def pwd(c):
    with c.cd('/tmp'):
        c.sudo('pwd') 
```

导致以下错误：

```
sudo: cd: command not found 
```

可以说没有吸引力的解决方法是为`sudo()`命令启动一个新的 shell 并手动为其添加前缀`cd`：

```
@task
def pwd(c):
    c.sudo('sh -c "cd /tmp && pwd"') 
```

请参阅[此调用问题](https://github.com/pyinvoke/invoke/issues/687)。

# python - 在文本中搜索一长串子字符串

> ID：13458481
> 
> 赞同：4
> 
> 时间：2012-11-19T16:53:44.643
> 
> 标签：python, string, performance, substring

问题：给定一组约 250000 个整数用户 ID，以及大约 1 TB 的 JSON 格式的单行记录，将用户 ID 匹配的记录加载到数据库。

只有大约 1% 的记录与 250000 个用户 ID 匹配。我尝试使用字符串匹配来确定用户 ID 是否在原始 JSON 中，而不是 JSON 解码每条记录，这需要很长时间；如果匹配，则解码 JSON 并检查记录然后插入。

问题在于将一个原始 JSON 字符串与包含约 250k 字符串条目的集合进行匹配很慢。

这是到目前为止的代码：

```
// get the list of integer user IDs
cur.execute('select distinct user_id from users')

// load them as text into a set
users = set([])
for result in cur.fetchall():
    users.add(str(result[0]))

// start working on f, the one-json-record-per-line text file
for line in f:
    scanned += 1
    if any(user in line for user in users):
        print "got one!"
        // decode json
        // check for correct decoded user ID match
        // do insert 
```

我正在以正确的方式接近这个吗？匹配这些字符串的更快方法是什么？目前，在查找这么多用户 ID 时，这在 3ghz 机器上每秒管理约 2 个条目（不太好）。当用户 ID 列表非常短时，它管理约 200000 个条目/秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:03:05.137

[Aho-Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)似乎是为此目的而建造的。甚至还有一个方便的 Python 模块（easy_install ahocorasick）。

```
import ahocorasick

# build a match structure
print 'init empty tree'
tree = ahocorasick.KeywordTree()

cur.execute('select distinct user_id from users')

print 'add usernames to tree'
for result in cur.fetchall():
   tree.add(str(result[0]))

print 'build fsa'
tree.make()

for line in f:
     scanned += 1
     if tree.search(line) != None:
         print "got one!" 
```

这接近每秒约 450 个条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:58:28.200

尝试反转匹配算法：

```
for digit_sequence in re.findall('[0-9]+', line):
    if digit_sequence in users:
        ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T14:14:31.477

我是 C++ 自由职业者，我的客户通常是一些初创公司，它们有一些缓慢的 python/java/.net/etc 代码，他们希望它运行得更快。我通常可以让它快 100 倍。就在最近，我有类似的问题任务：在 TB 的文本数据中实现 500 万个子字符串的搜索。

我测试了几种算法。对于 Aho–Corasick，我使用了开源[http://sourceforge.net/projects/multifast/](http://sourceforge.net/projects/multifast/)。这不是最快的算法。最快的是我的算法，它是我从混合哈希表和从 Rabin–Karp 搜索算法中提取的一些想法中炮制出来的。这个简单的算法比 AC 快了 5 倍，使用的内存也少了 5 倍。平均子字符串长度为 32 个字节。因此，AC 可能不是最快的算法。

# zend-framework2 - orWhere在zf2中消失了。如何更换它？

> ID：13458482
> 
> 赞同：3
> 
> 时间：2012-11-19T16:53:46.340
> 
> 标签：zend-framework2

由于 zf2, orWhere 在 Zend\Db 的查询中不再可能，我在这里发现（[ZF2 How to orWhere()](https://stackoverflow.com/questions/13056820/zf2-how-to-orwhere)）可以替换它。在我的示例中，没有“喜欢”，只有如下查询：

```
$select->where("....")->orWhere("...") 
```

如果使用 PredicateSet 是唯一的方法，我该如何使用它来进行查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T15:04:24.103

最简单的方法是使用流利的表示法：

```
$where = new Zend\Db\Sql\Where;
$where->OR->equalTo('id', $id); 
```

如有疑问，请查看 Ralph 在他的 Zend_Db-Examples 存储库 ( [https://github.com/ralphschindler/Zend_Db-Examples](https://github.com/ralphschindler/Zend_Db-Examples) ) 中发布的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-02T12:40:27.503

orPredicate可以用于**Where() ，如下****所示**：

 **```
public function fetchLike($keyword)
{
    $where = new \Zend\Db\Sql\Where();
    $pred_url      = new \Zend\Db\Sql\Predicate\Like('url', '%' . $keyword . '%');
    $pred_notes    = new \Zend\Db\Sql\Predicate\Like('notes', '%' . $keyword . '%');
    $pred_username = new \Zend\Db\Sql\Predicate\Like('username', '%' . $keyword . '%');
    $where->orPredicate($pred_url)->orPredicate($pred_notes)->orPredicate($pred_username);

    $resultSet = $this->tableGateway->select($where);

    return $resultSet;
} 
```

当然，您可以使用**lessThanOrEqualTo**、**equalTo**等谓词来代替我使用的那种谓词。您也可以使用**andPredicate**代替**orPredicate**。

[单击此处获取 ZF2 关于谓词的信息](http://framework.zend.com/manual/2.1/en/modules/zend.db.sql.html#id7)

此外，最好以适当的方式使用命名空间；

```
use \Zend\Db\Sql\Predicate\Like;
use \Zend\Db\Sql\Where;
// Now you can use code like this:
$pred_url      = new Like('url', '%' . $keyword . '%');
// Instead of
$pred_url      = new \Zend\Db\Sql\Predicate\Like('url', '%' . $keyword . '%'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:42:59.787

现在称为`orPredicate()`See code inside`Zend\Db\Sql\Predicate\Predicate.php`

另请参阅[Zend\Db\Sql\Select](http://framework.zend.com/manual/2.0/en/modules/zend.db.sql.html#where-having)关于`where()`函数的文档，您可以传递第二个参数来定义`AND`或`OR`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T18:48:11.187

对于您的示例，如果您不使用 LIKE，则可以按如下方式进行（我自己正在寻找解决方案）：

```
 $select->where(
        array(
            new \Zend\Db\Sql\Predicate\PredicateSet(array(
                new \Zend\Db\Sql\Predicate\Operator('first_column', \Zend\Db\Sql\Predicate\Operator::OPERATOR_EQUAL_TO, $some_value),
                new \Zend\Db\Sql\Predicate\Operator('second_column', \Zend\Db\Sql\Predicate\Operator::OPERATOR_EQUAL_TO, $some_value)
                /* even more columns to compare this way... */
            ), 
            \Zend\Db\Sql\Predicate\PredicateSet::COMBINED_BY_OR)
        )
    ); 
```**

# android - 如何为 AutoCompleteTextView 创建我自己的下拉视图？

> ID：13458483
> 
> 赞同：4
> 
> 时间：2012-11-19T16:53:49.213
> 
> 标签：android, popupwindow, autocompletetextview

我想在 AutoCompleteTextView 的下拉建议列表右侧添加 PgUp/PgDn 按钮。我使用上述布局创建了自己的弹出窗口（布局 xml 如下所示）。谁能让我知道如何用我自己的弹出窗口替换 AutoCompleteTextView 的下拉列表视图？

这是我想要的样子： ![](../Images/332595a90a48f5612eb3413f4c65a75a.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:weightSum="10">

    <ListView
        android:id="@+id/listView"
        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:layout_weight="9"
        android:background="@drawable/frame">
    </ListView>
    <RelativeLayout android:id="@+id/pageUpDown" android:layout_weight="1" android:layout_width="0dp" android:layout_height="match_parent">
        <ImageButton android:id="@+id/pageUp" android:src="@drawable/pct_up_icon" android:background="@null"  android:layout_width="48dp" android:layout_alignParentTop="true" android:layout_alignParentLeft="true" android:text="" android:layout_height="48dp"></ImageButton>
        <ImageButton android:id="@+id/pageDown" android:src="@drawable/pct_down_icon" android:background="@null" android:layout_width="48dp" android:layout_alignParentBottom="true" android:layout_alignParentLeft="true" android:text="" android:layout_height="48dp"></ImageButton>
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:58:34.413

为了简单地完成此操作，我建议您设计布局（带有两个按钮）并设置为您`AutoCompleteTextView`的如下：

```
android:completionHintView="@layout/your_custom_view" 
```

稍后，您可以自定义按钮的单击事件以执行所需的分页操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:57:41.250

前段时间我自己问过这个问题，我自己也找到了解决方案。在这里检查：

[AutoCompleteTextView 下拉菜单上的样式](https://stackoverflow.com/questions/11497295/style-on-autocompletetextviiew-dropdown)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T07:06:06.940

使用 AutocompleteTextView，设置高阈值“setTreshold()”并在按钮单击时调用 showDropDown()

代码：

```
String[] values = {
"abc_0", "def_0", "ghi_0",
"abc_1", "def_1", "ghi_1",
"abc_2", "def_2", "ghi_2",
"abc_3", "def_3", "ghi_3",
};

 final AutoCompleteTextView actv = (AutoCompleteTextView) findViewById(R.id.actv);
 final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, values);
actv.setAdapter(adapter);
actv.setThreshold(256); // if not enough set Integer.MAX_VALUE
findViewById(R.id.button).setOnClickListener(new OnClickListener() {
@Override
public void onClick(View v) {
    CharSequence constraint = actv.getText();
    adapter.getFilter().filter(constraint);
    actv.showDropDown();
}
}); 
```

# html - 溢出：滚动和背景颜色 (HTML)

> ID：13458484
> 
> 赞同：0
> 
> 时间：2012-11-19T16:53:51.837
> 
> 标签：html, overflow

我有带有 div 和嵌套 div 的 HTML。嵌套 div 的宽度是容器 div 的一半，但高一倍。容器 div 溢出时滚动。

```
html, body, form
{
    height:100%;
    margin:0px;
    padding: 0px; 
}    

div#outer
{
    height:200px;
    width: 500px;
    overflow:scroll;
    background-color:Green;    
}

div#inner
{
    height:400px;
    width: 250px;
    background-color:Red;
}

<body>
<form id="form1" runat="server">
    <div id="outer">
        <div id="inner"></div>
    </div>
</form> 
```

当我滚动时，整个区域的背景是半红半绿。为什么右下区域的背景是绿色的？如果我设置溢出不会发生这种情况：可见（然后它没有被填充）。

编辑：例如添加 JSFiddle。 [http://jsfiddle.net/2Y52V/](http://jsfiddle.net/2Y52V/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:59:28.307

`visible`溢出意味着内容将“溢出”父级的边界。因此，如果定义了父级的实际大小，则不会改变。但是其他溢出策略将内容保持在父级的范围内，几乎就像“拉伸”父级一样。由于此属性，溢出通常用作*clearfix*解决方案（即`overflow: hidden`当有浮动的孩子时）。它有效地拉伸父对象以匹配，同时通过使用滚动条来保持它的物理大小。

# delphi - Delphi 2007：如何设置 TSAWARE？

> ID：13458485
> 
> 赞同：8
> 
> 时间：2012-11-19T16:53:57.980
> 
> 标签：delphi, delphi-2007, terminal-services

在 Delphi 2009 及更高版本中，您可以将此行添加到您的项目 .dpr 以在您的应用程序可执行文件中设置 TSAWARE PE 标志：

```
{$SetPEOptFlags  IMAGE_DLLCHARACTERISTICS_TERMINAL_SERVER_AWARE} 
```

我（错误地）认为 Delphi 2007 不支持这种语法。我有一个应用程序，我还不能从 2007 移植到较新的 Delphi 版本（任务正在进行中，但在接下来的几个月内不会完成） .

**更新**很简单，Windows 也必须添加到项目 .dpr 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:26:33.070

我的猜测是`Windows`您的 .dpr 文件的 uses 子句中缺少该单位。添加它，您将能够编写：

```
{$SetPEOptFlags IMAGE_DLLCHARACTERISTICS_TERMINAL_SERVER_AWARE} 
```

在您的 .dpr 文件中。虽然很明显你需要在uses子句之后写它。

该`$SetPEOptFlags`功能是在 Delphi 2007 之前的几个版本中添加的。因此，您可能看到的错误只是`IMAGE_DLLCHARACTERISTICS_TERMINAL_SERVER_AWARE`没有声明。这可以通过确保符号在 .dpr 文件中可见来解决。显然，您可以通过在 .dpr 文件中声明一个常量来做到这一点，但为了避免重复，我总是更喜欢添加 Windows 单元。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T17:07:17.390

在 D7 下编译

```
const

IMAGE_DLLCHARACTERISTICS_TERMINAL_SERVER_AWARE = $8000;

{$SetPEOptFlags  IMAGE_DLLCHARACTERISTICS_TERMINAL_SERVER_AWARE} 
```

# java - SWT - AWT 桥

> ID：13458486
> 
> 赞同：0
> 
> 时间：2012-11-19T16:54:00.553
> 
> 标签：java, swt, awt

主 GUI 是基于 SWT 的。我正在通过单击按钮从 printPDF 类运行打印操作。

```
 public void startPDFPrint() throws Exception {
   Display.getCurrent().syncExec(
        new Runnable() {
          public void run(){
             try {
              new AplotPdfPrintLocal().printPDF("c:\\temp\\file.pdf", "PDF Print Job");
           }
           catch (IOException e) {
              e.printStackTrace();
           }
           catch (PrinterException e) {
              e.printStackTrace();
           }
          }
        });
 } 
```

printPDF 类没有任何组件或 GUI。它基本上只是创建一个运行打印作业。

```
public class PDFPrintPage implements Printable { 
```

类中仅有的两个方法

```
 public void printFile(String filename) throws IOException { (setups the print)

  public int print(Graphics g, PageFormat format, int index)
        throws PrinterException { 
```

在 printFile 方法中有一行代码可以打开本地打印机对话框

```
 pjob.printDialog() 
```

该对话框基于 AWT。

如何打开此对话框，以便我的用户可以选择打印机和份数？

我已经阅读了 SWT_AWT 桥接文档，看起来您需要将 AWT 嵌入到 SWT 组件中，但我的类没有任何组件。

是否需要创建组件方法并在组件中运行 printFile 代码？

我知道如果我能弄清楚这件作品，它也将有助于解决我遇到的所有其他问题。

***编辑***

请查看我的代码并告诉我哪里出错了。它符合并运行，但我在 Dialog 行收到 SWT Thread 异常。

```
 public class PDFPrintPage extends ApplicationWindow{

  private String fileURL;
  private PageFormat pfDefault;
  private PrinterJob pjob;
  private PDFFile pdfFile;

  public PDFPrintPage(Shell parent, String inputFileName) {
     super(parent);
     this.fileURL = inputFileName;
  }

  public void run() {
    setBlockOnOpen(true);
    open();
    Display.getCurrent().dispose();
  }

  protected Control createContents(Composite parent) {
     final Composite swtAwtComponent = new Composite(parent, SWT.EMBEDDED);
     final java.awt.Frame frame = SWT_AWT.new_Frame( swtAwtComponent );
     final javax.swing.JPanel panel = new javax.swing.JPanel( );
     frame.add(panel);
     JButton swingButton = new JButton("Print");
     panel.add(swingButton);
     swingButton.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent actionevent) {
           try {
              printFile(fileURL, frame);
           }
          catch (IOException e) {
             e.printStackTrace();
          }
        }
     });
     return swtAwtComponent;
  }

  public void printFile(String filename, Frame panel) throws IOException {
     File file = new File(filename);
     FileInputStream fis = new FileInputStream(file);
     FileChannel fc = fis.getChannel();
     ByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
     pdfFile = new PDFFile(bb); // Create PDF Print Page

     final PrintPage pages = new PrintPage(pdfFile);

     pjob = PrinterJob.getPrinterJob();
     pfDefault = PrinterJob.getPrinterJob().defaultPage();
     Paper defaultPaper = new Paper();
     defaultPaper.setImageableArea(0, 0, defaultPaper.getWidth(),      defaultPaper.getHeight());
     pfDefault.setPaper(defaultPaper);
     pjob.setJobName(file.getName());

     final Dialog awtDialog = new Dialog(panel);      
     Shell parent = getParentShell();
     Shell shell = new Shell(parent, SWT.APPLICATION_MODAL | SWT.NO_TRIM);
     shell.setSize(100, 100);
     shell.addFocusListener(new FocusAdapter() {
        @Override 
        public void focusGained(FocusEvent e) {
           awtDialog.requestFocus();
           awtDialog.toFront();
        }
     });
     //if (pjob.printDialog()) {
        pfDefault = pjob.validatePage(pfDefault);
        Book book = new Book();
        book.append(pages, pfDefault, pdfFile.getNumPages());
        pjob.setPageable(book);
        try {
           pjob.print();
        }
        catch (PrinterException exc) {
           System.out.println(exc);
        }
     //}
  }

  class PrintPage implements Printable {

     private PDFFile file;

     PrintPage(PDFFile file) {
        this.file = file;
     }

     public int print(Graphics g, PageFormat format, int index) throws PrinterException {
       int pagenum = index + 1;
       if ((pagenum >= 1) && (pagenum <= file.getNumPages())) {
          Graphics2D g2 = (Graphics2D) g;
          PDFPage page = file.getPage(pagenum);
          Rectangle imageArea = new Rectangle((int) format.getImageableX(), (int) format.getImageableY(),
              (int) format.getImageableWidth(), (int) format.getImageableHeight());
          g2.translate(0, 0);
          PDFRenderer pgs = new PDFRenderer(page, g2, imageArea, null, null);
          try {
             page.waitForFinish();
             pgs.run();
          } catch (InterruptedException ie) {

          }
          return PAGE_EXISTS;
        } 
        else {
          return NO_SUCH_PAGE;
        }
    } 
   }//End PrintPage Class
  }//End PDFPrintPage Class 
```

我可能会将您的建议代码添加到完全错误的位置。我的想法是在 focusGained(FocusEvent e) 方法中添加 printDialog 调用的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:33:47.300

当您打开打印机对话框时，您需要打开一个大小为零的外壳，这样您的主 SWT 外壳看起来是不活动的，而您的 Swing 模式对话框在它上面。同样，当您关闭摆动对话框时，您需要关闭零尺寸外壳。

```
 java.awt.Dialog awtDialog = ...        
      Shell shell = new Shell(parent, SWT.APPLICATION_MODAL | SWT.NO_TRIM);
      shell.setSize(0, 0);
      shell.addFocusListener(new FocusAdapter() {
          public void focusGained(FocusEvent e) {
              awtDialog.requestFocus();
              awtDialog.toFront();
          }
      }); 
```

参考： [http ://www.eclipse.org/articles/article.php?file=Article-Swing-SWT-Integration/index.html#sec-event-threads](http://www.eclipse.org/articles/article.php?file=Article-Swing-SWT-Integration/index.html#sec-event-threads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-23T13:13:15.387

由于我没有将其添加为评论的声誉，因此我将发布答案。对于偶然发现此问题并寻找“Control 类型中的方法 addFocusListener(FocusListener) 不适用于参数 (new FocusAdapter(){})”的任何其他人。

问题是你有错误的进口。您可能已经导入了 awt FocusAdapter 而不是 swt one，反之亦然。

# themes - 如何在 Moodle 主题设置中创建自定义标记？

> ID：13458488
> 
> 赞同：3
> 
> 时间：2012-11-19T16:54:09.847
> 
> 标签：themes, settings, moodle

我需要在 Moodle 2.x 主题设置中创建一个元素列表，为此我将使用 Moodle 包含的 YUI 启用拖放重新排序。我的问题是我不知道如何使用自定义主题设置添加自定义 HTML/JS。我只能找到有关使用 Moodle 提供的预定义功能添加设置的文档，例如`admin_setting_configtext`or`admin_setting_configselect`等`admin_setting_configtextarea`​​... 我如何创建自己的标记并在主题设置页面中使用自己的 javascript？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:30:59.440

You can create a custom page using Moodle, remember to require the config and set up the page:

```
require('../../../config.php');
require_once($CFG->libdir.'/adminlib.php');
//page definition
$PAGE->set_context(get_context_instance(CONTEXT_SYSTEM));
$PAGE->set_url('/theme/your_theme/admin/manage.php');
$PAGE->set_pagetype('theme_name_manage');
$PAGE->set_title('Manage your theme');
$PAGE->set_heading('Manage your theme');
echo $OUTPUT->header();
//Page content
echo $OUTPUT->footer(); 
```

From this page you can define whatever setup or configuration you want. Finally you will want to add this page to the site admin navigation. Make sure you have a **settings.php** in the root directory of your theme and within that file you'll be wanting something like this:

```
if ($hassiteconfig) { // needs this condition or there is error on login page
    $ADMIN->add('themes', new admin_externalpage('theme_name', 
        'Manage Theme XYZ', 
        $CFG->wwwroot."/theme/name/admin/manage.php", 
        'moodle/site:config'));
} 
```

**Themes** being the reference for the "themes" admin menu I figure you probably want to add this to. Remember that you should be using get_string in the above examples instead of hard-coding strings.

# sql - 在两个条件上使用左连接的 Access-SQL 查询中缺少值

> ID：13458497
> 
> 赞同：2
> 
> 时间：2012-11-19T16:54:48.510
> 
> 标签：sql, join, criteria

我在查询时遇到问题，并且对正在发生的事情没有任何想法。我有一张桌子 T1：

```
StoreID Product ProductShipped
KH00137 Super   18
KH00137 Regular 12 
```

还有另一个表 T2，它只共享几个 StoreID：

```
StoreID Product Other data…
KH00137 Super   …
KH00137 Regular … 
```

我正在尝试使用以下查询在 StoreID 和 Product 上加入 T2：

```
SELECT T1.StoreID, T2.StoreID, T1.Product, T1\. ProductShipped
FROM T1 LEFT JOIN T2 ON (T1.Product = T2.Product) AND (T1.StoreID = T2.StoreID); 
```

但由于某种原因，它不显示 T2 StoreID 字段之一，即使它似乎已成功加入另一个字段：

```
T1.StoreID  T2.StoreID  T1.Product  T1.ProductShipped
KH00137                 Super       18
KH00137     KH00137     Regular     12 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:59:24.397

没有理由假设它已成功加入。输出数据第一行中的三个非 NULL 字段中的每一个都来自 table1。

这向我表明实际上根本没有加入。

*   测试您的数据是否存在空格和大写/小写不匹配。

使用`LENGTH()`函数类型可能表明一个字符串实际上与另一个字符串不同。 *（一个`Super`可能是 5 个字符长，`Super`另一个表中的最后可能有一个空格并且是 6 个字符长。或者在 StoreID 中可能有类似的东西？）*

此外，这也是***不***支持加入文本字段的原因之一。通过将外键 ID 保留为数字（例如整数），您几乎不会经常遇到此问题，即使您这样做也很容易调试和纠正。

祝你好运。

# javascript - 向 Node 提交 JSON 字符串时防止格式化

> ID：13458499
> 
> 赞同：1
> 
> 时间：2012-11-19T16:54:52.460
> 
> 标签：javascript, node.js, express

我正在尝试将 JSON 发布到 Node 应用程序，该应用程序将通过 GET 简单地返回它。客户端，我生成模型的 JSON 字符串，并将其 POST 到服务器：

```
$.post(serverURL, ko.mapping.toJS(viewModel), function(data) {}, "json"); 
```

这会产生一个字符串，如下所示：

```
{"switches":[{"id":1,"name":"Living Room","state":false},{"id":2,"name":"Dining Room","state":false},{"id":3,"name":"Kitchen Room","state":true},{"id":4,"name":"Aviary","state":true}]} 
```

请注意，“状态”值是不带引号的真/假，这是[有效的 JSON](http://www.json.org/)。在服务器上，如果我记录请求正文，我会得到以下信息：

```
{ switches:
[ { id: '1', name: 'Living Room', state: 'false' },
 { id: '2', name: 'Dining Room', state: 'false' },
 { id: '3', name: 'Kitchen Room', state: 'true' },
 { id: '4', name: 'Aviary', state: 'true' } ] } 
```

注意区别：

*   它引用了真/假值
*   它有不带引号的对象名称
*   引号是单引号

我的目标是简单地将原始 JSON 对象存储为其原始字符串格式，以便稍后进行 GET 请求。什么在做这种格式化，我该如何防止它？

**每个请求的附加信息**

我的 Node.JS 代码如下：

```
var express = require('express');
var app = express();
var model;

app.configure( function () {});

app.use(express.bodyParser());

app.get('/', function (req,res) {
    res.setHeader('Content-Type', 'application/json');

    console.log(model);
res.send(model);
});

app.post('/', function (req,res) {
    res.header("Access-Control-Allow-Methods", "POST");
    res.setHeader('Content-Type', 'application/json');   

    model = req.body;
    console.log(model);

});

app.listen(3000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:30:20.873

我看到几个问题：

您的`post`电话并没有告诉服务器您要发送什么样的数据。特别是，[`post`](http://api.jquery.com/jQuery.post/)( `dataType`，您为其提供`'post'`)的最后一个参数**不是**您发送***到***服务器的数据的格式，而是您期望***从***服务器返回的数据的格式。

另外，您正在使用 KnockoutJS 的`toJS`功能。根据[文档](http://knockoutjs.com/documentation/json-data.html)，这不会产生 JSON，它会产生 JavaScript 对象图。要获取 JSON 字符串，您需要使用`ko.toJSON`.

所以我的猜测（就是这样）是 Express 没有足够的信息可以使用，并且正在应用错误的解码机制，并且正在发送的数据被 jQuery 试图将其转换为表单数据而变得有点混乱。

尝试使用[`ajax`](http://api.jquery.com/jQuery.ajax/)函数并指定`contentType: "application/json"`和使用`ko.toJSON`，例如：

```
$.ajax({
  type:       'POST',
  url:         serverURL,
  data:        ko.toJSON(ko.mapping.toJS(viewModel)),
  success:     function(data) {},
  dataType:    'json' // IF you're expecting JSON back
  contentType: 'application/json'
}); 
```

（或者可能只是`data: ko.toJSON(viewModel)`，我对淘汰赛的了解还不够深入，无法确定。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:17:53.407

我认为我遇到了同样的问题，并通过在请求正文上调用 JSON.stringify 来解决它。如果有人有更合适的解决方案，我想听听，因为这似乎有点奇怪。但是OTOH它可以工作8P。

我的控制器产生了这些日志：

```
------ req.body here ----------
[ { name: 'My Watchlist',
    stocks: [ 'AACC', 'AAPL', 'VZ', 'JPM' ] } ]
------ stringified req.body here ----------
[{"name":"My Watchlist","stocks":["AACC","AAPL","VZ","JPM"]}]
---- end ------ 
```

在控制器的开头使用此代码

```
console.log('------ req.body here ----------');
console.dir(req.body);
console.log('------ stringified req.body here ----------');
console.log(JSON.stringify(req.body));
console.log('---- end ------');

try{
    var o = JSON.parse(JSON.stringify(req.body));
}
catch(e){... 
```

# javascript - 使用 AJAX 获取特定的 DOM 元素（使用 Javascript，而不是 jQuery）

> ID：13458501
> 
> 赞同：3
> 
> 时间：2012-11-19T16:54:56.603
> 
> 标签：javascript, ajax, get, xmlhttprequest, mediawiki

您如何使用 AJAX（纯 JavaScript，而***不是***jQuery）来获取页面（相同域）并仅显示特定的 DOM 元素？（如标识为“bodyContent”的 id 的 DOM 元素）。

我正在使用 MediaWiki 1.18，所以我的方法必须不那么传统（我知道可以为 MediaWiki 启用一个 jQuery 版本，但我无权这样做，所以我需要查看其他选项）。如果代码混乱，我深表歉意，但我需要以这种方式构建它是有原因的。我最感兴趣的是看看可以用 Javascript 做什么。

这是HTML代码：

```
<div class="mediaWiki-AJAX"><a href="http://www.domain.com/whatever"></a></div> 
```

这是我到目前为止的Javascript：

```
var AJAXs = document.getElementsByClassName('mediaWiki-AJAX');
if (AJAXs.length > 0) {
    for (var i = AJAXs.length - 1; i >= 0; i--) {
        var URL = AJAXs[i].getElementsByTagName('a')[0].href;
        xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                AJAXs[i].innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open('GET',URL,true);
        xmlhttp.send();
    }
} 
```

**编辑：**

感谢[lbstr](https://stackoverflow.com/users/1370750/lbstr)给出的答案，我能够想出以下内容，这很有效！你会注意到我添加了额外的步骤来删除我不想要的任何元素。无论出于何种原因，getElementById() 对 responseText 不起作用，但 getElementsByClassName() 起作用。我想这是因为在运行 AJAX 调用之前，wiki 页面上已经存在“bodyContent”的 ID。

```
//This function is necessary to read the response text correctly.
function outerHTML(node){
    // if IE, Chrome take the internal method otherwise build one
    return node.outerHTML || (
    function(n){
        var div = document.createElement('div'), h;
        div.appendChild( n.cloneNode(true) );
        h = div.innerHTML;
        div = null;
        return h;
    })(node);
}

// This code deals with populating the AJAX divs within a wiki page.
var AJAXs = document.getElementsByClassName('mediaWiki-AJAX');
if (AJAXs.length > 0) {
    for (var i = AJAXs.length - 1; i >= 0; i--) {
        (function(index){
            var URL = AJAXs[index].getElementsByTagName('a')[0].href;
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var tempDiv = document.createElement('div');
                    tempDiv.innerHTML = xmlhttp.responseText;
                    var AJAXContent = tempDiv.getElementsByClassName('mw-content-ltr')[0];

                    //Remove unnecessary "fixed" items to avoid clutter.
                    var hiddenItems = AJAXContent.getElementsByClassName('hidden-item');
                    if (hiddenItems.length > 0) {
                        for (var j = hiddenItems.length - 1; j >= 0; j--) {
                            AJAXContent.removeChild(hiddenItems[j]);
                        }
                    }
                    var protectedItems = AJAXContent.getElementsByClassName('protected-item');
                    if (protectedItems.length > 0) {
                        for (var j = protectedItems.length - 1; j >= 0; j--) {
                            AJAXContent.removeChild(protectedItems[j]);
                        }
                    }

                    //Insert the AJAX content and rerun Javascript on it.
                    if (AJAXContent !== null && AJAXContent !== undefined) {
                        AJAXs[index].innerHTML = outerHTML(AJAXContent);
                        assign_Popup_Functions(AJAXs[index]);
                        fix_External_Links(AJAXs[index]);
                        assign_iFrame_Functions(AJAXs[index]);
                    }
                }
            }
            xmlhttp.open('GET',URL,true);
            xmlhttp.send();
        })(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:12:28.367

似乎在您的回调中您可以这样做：

```
var temp = document.createElement("div");
temp.innerHTML = xmlhttp.responseText;
var bodyContent = temp.getElementById("bodyContent");
if (bodyContent !== null && bodyContent !== undefined) {
    AJAXs[i].innerHTML = outerHTML(bodyContent);
} 
```

鉴于此[SO post](https://stackoverflow.com/questions/1700870/how-do-i-do-outerhtml-in-firefox)中的这个 outerHTML 函数：

```
function outerHTML(node){
    // if IE, Chrome take the internal method otherwise build one
    return node.outerHTML || (
    function(n){
        var div = document.createElement('div'), h;
        div.appendChild( n.cloneNode(true) );
        h = div.innerHTML;
        div = null;
        return h;
    })(node);
} 
```

请记住，如果您对多个`AJAXs`容器执行此操作，您最终可能会得到具有相同 ID ( `bodyContent`) 的多个项目。确保你想出一些方法来避免这种情况。也许你想要 innerHTML 代替？

**编辑：**

我还忘了指出您的设置会出现的错误。由于您的回调将在循环完成*后*到达，因此值`i`将始终为`0`，因此您不会更新正确的容器。你需要做这样的事情：

```
for (var i = AJAXs.length - 1; i >= 0; i--) {
    (function(index){
        var URL = AJAXs[index].getElementsByTagName('a')[0].href;
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                AJAXs[index].innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open('GET',URL,true);
        xmlhttp.send();
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:54:21.663

iframe 是一种方便的方法。以下是高级步骤：

1.  创建隐藏的 iframe
2.  加载远程网址
3.  onload 访问 iframe 内容
4.  获取您的特定元素

**如果您的远程页面包含修改页面内容的 JavaScript**（简单的 ajax 请求不会运行脚本） ，则iframe 将特别有用。

这绝对是像 jQuery 这样的库真正有帮助的情况，因为它会让一切对你透明。

# ios - 在 UICollectionView 中复制标注

> ID：13458503
> 
> 赞同：8
> 
> 时间：2012-11-19T16:54:59.587
> 
> 标签：ios, ios5, ios6, uicollectionview, uicollectionviewcell

我在每个单元格中都有一个带有 UIImageView 的 UICollectionView，现在我想添加 Copy Callout，就像在 Photos.app 中一样：

![在此处输入图像描述](../Images/509d8731e93aa5ce4d2e06e1819b197e.png)

我在 UICollectionViewDelegate 中看到了这个方法：

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
} 
```

经过几分钟的研究，我发现了 UIMenuController 类，据我所知，我必须使用它来获取菜单，但无论如何，我认为必须有更简单的方法，然后创建 UIGestureRecognizer，并创建、定位等。我的用户界面菜单。

**我在正确的轨道上吗？你怎么能实现这个功能？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T03:12:25.877

是的，你在正确的轨道上。您还可以使用此技术实现剪切、复制、粘贴之外的自定义操作。

[UICollectionView 的自定义操作](http://paulsolt.com/2012/11/uicollectionview-custom-actions-and-uimenucontroller/)

```
// ViewController.h
@interface ViewController : UICollectionViewController

// ViewController.m
-(void)viewDidLoad
{
    [super viewDidLoad];
    self.collectionView.delegate = self;

    UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"Custom Action"
                                                      action:@selector(customAction:)];
    [[UIMenuController sharedMenuController] setMenuItems:[NSArray arrayWithObject:menuItem]];

}

#pragma mark - UICollectionViewDelegate methods
- (BOOL)collectionView:(UICollectionView *)collectionView
      canPerformAction:(SEL)action
    forItemAtIndexPath:(NSIndexPath *)indexPath
            withSender:(id)sender {
    return YES;  // YES for the Cut, copy, paste actions
}

- (BOOL)collectionView:(UICollectionView *)collectionView
shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (void)collectionView:(UICollectionView *)collectionView
         performAction:(SEL)action
    forItemAtIndexPath:(NSIndexPath *)indexPath
            withSender:(id)sender {
    NSLog(@"performAction");
}

#pragma mark - UIMenuController required methods
- (BOOL)canBecomeFirstResponder {
    // NOTE: The menu item will on iOS 6.0 without YES (May be optional on iOS 7.0)
    return YES;
}

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    NSLog(@"canPerformAction");
     // The selector(s) should match your UIMenuItem selector
    if (action == @selector(customAction:)) {
        return YES;
    }
    return NO;
}

#pragma mark - Custom Action(s)
- (void)customAction:(id)sender {
    NSLog(@"custom action! %@", sender);
} 
```

**注意：iOS 7.0 更改行为**

1.  在您的 UICollectionViewCell 子类中，您需要添加自定义操作方法，否则不会出现任何内容。

    ```
    // Cell.m
    #import "Cell.h"

    @implementation Cell

    - (id)initWithFrame:(CGRect)frame {
        self = [super initWithFrame:frame];
        if (self) {
            // custom logic
        }
        return self;
    }

    - (void)customAction:(id)sender {
        NSLog(@"Hello");

        if([self.delegate respondsToSelector:@selector(customAction:forCell:)]) {
            [self.delegate customAction:sender forCell:self];
        }
    }
    @end 
    ```

2.  您需要创建一个委托协议并将其设置在每个单元格上以回调维护您的 UICollectionView 的 UIController。这是因为单元格不应该与您的模型无关，因为它只涉及显示内容。

    ```
    // Cell.h
    #import <UIKit/UIKit.h>

    @class Cell; // Forward declare Custom Cell for the property

    @protocol MyMenuDelegate <NSObject>
    @optional
    - (void)customAction:(id)sender forCell:(Cell *)cell;
    @end

    @interface Cell : UICollectionViewCell

    @property (strong, nonatomic) UILabel* label;
    @property (weak, nonatomic) id<MyMenuDelegate> delegate;
    @end 
    ```

3.  在您的 ViewController 或 UICollectionViewController 的子类中，您需要遵守协议并实现新方法。

    ```
    // ViewController.m
    @interface ViewController () <MyMenuDelegate>
    @end

    // @implementation ViewController  ...

    - (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath;
    {
        Cell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"MY_CELL" forIndexPath:indexPath];
        cell.delegate = self;
        return cell;
    }
    // ...

    // Delegate method for iOS 7.0 to get action from UICollectionViewCell
    - (void)customAction:(id)sender forCell:(Cell *)cell {
        NSLog(@"custom action! %@", sender);
    } 
    ```

    ![UICollectionView 的自定义长按操作菜单](../Images/25638bcb2b018df8002816f15aff206e.png)

4.  **可选**：在您的 UIView 子类中，如果您在此处实现方法 canPerformAction，而不是在 UIViewController 中，则可以覆盖默认的剪切、复制、粘贴。否则，该行为将在您的自定义方法之前显示默认方法。

    ```
    // Cell.m
    - (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
        NSLog(@"canPerformAction");
        // The selector(s) should match your UIMenuItem selector

        NSLog(@"Sender: %@", sender);
        if (action == @selector(customAction:)) {
            return YES;
        }
        return NO;
    } 
    ```

    ![来自 UICell 的自定义操作 canPerformAction](../Images/9900229c2dfb1d48511241bb2acaed8e.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-19T17:33:03.333

这是完整的解决方案：

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath {
        return YES;
    }

- (BOOL)collectionView:(UICollectionView *)collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
        if ([NSStringFromSelector(action) isEqualToString:@"copy:"])
            return YES;
        else
            return NO;
    }

- (void)collectionView:(UICollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
        if ([NSStringFromSelector(action) isEqualToString:@"copy:"]) {
            UIPasteboard *pasteBoard = [UIPasteboard pasteboardWithName:UIPasteboardNameGeneral create:NO];
            pasteBoard.persistent = YES;
            NSData *capturedImageData = UIImagePNGRepresentation([_capturedPhotos objectAtIndex:indexPath.row]);
            [pasteBoard setData:capturedImageData forPasteboardType:(NSString *)kUTTypePNG];
        }
    } 
```

在我的情况下，我只允许在我的 CollectionView 中复制功能，如果按下副本，我会将单元格内的图像复制到粘贴板。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-10T17:20:14.880

也许有点晚了，但我可能为那些仍在寻找这个的人找到了一个更好的解决方案：

在 UICollectionViewController 的 viewDidLoad 中添加您的项目：

```
UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"Title" action:@selector(action:)];
[[UIMenuController sharedMenuController] setMenuItems:[NSArray arrayWithObject:menuItem]]; 
```

添加以下委托方法：

```
//This method is called instead of canPerformAction for each action (copy, cut and paste too)
- (BOOL)collectionView:(UICollectionView *)collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
        if (action == @selector(action:)) {
            return YES;
        }
        return NO;
    }
    //Yes for showing menu in general
    - (BOOL)collectionView:(UICollectionView *)collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath {
        return YES;
    } 
```

如果你还没有，子类 UICollectionViewCell。添加您为项目指定的方法：

```
- (void)action:(UIMenuController*)menuController {

} 
```

这样您就不需要任何 becomeFirstResponder 或其他方法。您将所有操作集中在一个地方，如果您以单元格本身作为参数调用通用方法，则可以轻松处理不同的单元格。

编辑： uicollectionview 不知何故需要此方法的存在（您的自定义操作不会调用此方法，我认为 uicollectionview 只是检查是否存在）

```
- (void)collectionView:(UICollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {

} 
```

# php - 此模式的 PHP 正则表达式

> ID：13458506
> 
> 赞同：0
> 
> 时间：2012-11-19T16:55:20.460
> 
> 标签：php, regex, preg-match

在正则表达式方面需要帮助。

1) 格式：

```
 Advisor Geologist – HighMount Exploration & Production LLC – Oklahoma City, OK 
```

我想获取最后一个字符和破折号之间的文本。IE。`Oklahoma City, OK`. 请注意，文本可能包含多个破折号。

试过这个：

```
~-([.*$]+)~ 
```

试图在破折号和字符串结尾 (.*$) 之间找到。需要知道如何检查最后一次出现的破折号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T16:58:04.667

您不需要正则表达式，[`explode()`](http://php.net/explode)破折号上的字符串，并取最后一个元素。

```
$str = 'Advisor Geologist – HighMount Exploration & Production LLC – Oklahoma City, OK';
$arr = explode( '–', $str);
$last = trim( end( $arr));
echo $last; 
```

效率更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:12:59.543

如果您需要使用正则表达式，请使用

```
$pattern = '/[^\s–-][^–-]*?(?=\s*$)/';
preg_match($pattern, $subject, $matches); 
```

**[在这里](http://ideone.com/JhqGY0)**测试这个演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:44:20.733

strrpos [()](http://php.net/manual/en/function.strrpos.php)也可以提供帮助。

```
 $str = 'Advisor Geologist – HighMount Exploration & Production LLC – Oklahoma City, OK';
 $result = trim(substr($str, strrpos($str, '-')+1)); 
```

对于固定格式，您可以使用`list() & explode()`：

```
 $str = 'Advisor Geologist – HighMount Exploration & Production LLC – Oklahoma City, OK';
 list($occupation, $company, $city) = explode('-', $str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:23:28.193

# java - 覆盖 ActionListener 中的 run() 方法

> ID：13458507
> 
> 赞同：1
> 
> 时间：2012-11-19T16:55:21.253
> 
> 标签：java, multithreading, swing, actionlistener, jcheckbox

我想访问`t.isStopped()`被覆盖的`run()`方法，但出现以下错误。

> 不能在不同方法中定义的内部类中引用非最终变量 t

如果我将 t 设置为最终变量

> 局部变量 t 可能尚未初始化

```
<!-- language: java -->

jHibernateCheckBox = new JCheckBox("Sleep / Hibernate after ");
jHibernateTextField = new JTextField("240");

jHibernateCheckBox.addActionListener(new ActionListener() {

  @Override
  public void actionPerformed(ActionEvent e) {

     StoppableThread t = new StoppableThread() {

        @Override
        public void run() {
           t.setIsRunning(true);
           long timestamp = new Date().getTime();
           int minutes = Integer.parseInt(jHibernateTextField.getText());
           long secounds = minutes * 60;
           long millisecounds = secounds * 1000;
           long elapsedTime = new Date().getTime();

           do {
              try {
                 Thread.sleep(1000);
                 millisecounds -= new Date().getTime() - elapsedTime;
                 secounds = millisecounds / 1000;
                 if(secounds < 60) {
                    jHibernateTextField.setText("" + secounds);
                    jRemainingLabel.setText(" secounds remaining");
                 }
                 else {
                    jHibernateTextField.setText("" + secounds / 60);
                    jRemainingLabel.setText(" minutes remaining");
                 }
              } catch (InterruptedException e) {
                 // TODO Auto-generated catch block
                 e.printStackTrace();
              }
              elapsedTime = new Date().getTime();
           }while(!t.isStopped() && timestamp + minutes * 60 * 1000 > new Date().getTime());

           jHibernateTextField.setText("" + minutes);

           if(t.isStopped()) return;
           else {
              console.out("Computer wird schlafen gelegt =)");
              //Hibernate (siehe LAPTOP)
           }

        }
     };

     Thread thread = new Thread(t);

     if(jHibernateCheckBox.isSelected()) {
        jHibernateTextField.setEnabled(false);
        thread.start();
     }
     else {
        jHibernateTextField.setEnabled(true);
        t.setIsStopped(true);
     }
  } 
```

});

是否可以访问内部类中的变量 t ，或者如果再次单击复选框，是否有人知道如何停止线程？

我只是希望当我再次单击 jHibernateCheckBox 时计时器停止工作......也许还有另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:36:02.443

与您的问题无关，但在您发布的代码片段中，您违反了 Swing 线程规则。所有 Swing 组件只能从 Event Dispatch Thread 访问/修改。`StoppableThread`不允许修改您的 Swing 组件，并且可能会导致运行时出现奇怪的行为。

快速浏览一下您的代码后，您似乎可以使用 a`SwingWorker`并触发进度事件。或多或少与[`JProgressBar`教程](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)中说明的机制相同（他们使用 a 的部分`SwingWorker`）

有关更多信息，请参阅[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:05:18.847

您可以尝试在实现中使用“this”关键字吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:06:17.233

```
 StoppableThread t = new StoppableThread() {

                    @Override
                    public void run() {
                        t.setIsRunning(true);
                        long timestamp = new Date().getTime();
                        int minutes = Integer.parseInt(jHibernateTextField.getText());
                        long secounds = minutes * 60;
                        long millisecounds = secounds * 1000;
                        long elapsedTime = new Date().getTime();

                        do {
                            try {
                                Thread.sleep(1000);
                                millisecounds -= new Date().getTime() - elapsedTime;
                                secounds = millisecounds / 1000;
                                if(secounds < 60) {
                                    jHibernateTextField.setText("" + secounds);
                                    jRemainingLabel.setText(" secounds remaining");
                                }
                                else {
                                    jHibernateTextField.setText("" + secounds / 60);
                                    jRemainingLabel.setText(" minutes remaining");
                                }
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                            elapsedTime = new Date().getTime();
                        }while(!t.isStopped() && timestamp + minutes * 60 * 1000 > new Date().getTime());

                        jHibernateTextField.setText("" + minutes);

                        if(t.isStopped()) return;
                        else {
                            console.out("Computer wird schlafen gelegt =)");
                            //Hibernate (siehe LAPTOP)
                        }

                    }
                }; 
```

在 run 方法中将 t 替换为`this`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-20T07:42:25.180

我尝试了一些新的东西，现在它可以工作了。我不知道这是否是一个错误，但
只是看看。

```
private StoppableThread t;

public void initComponents() {
...
...
t = new StoppableThread() {
        @Override
        public void run() {
            setIsRunning(true);
            long timestamp = new Date().getTime();
            int minutes = Integer.parseInt(jHibernateTextField.getText());
            long secounds = minutes * 60;
            long millisecounds = secounds * 1000;
            long elapsedTime = new Date().getTime();

            do {
                try {
                    Thread.sleep(1000);
                    millisecounds -= new Date().getTime() - elapsedTime;
                    secounds = millisecounds / 1000;
                    if(secounds < 60) {
                        jHibernateTextField.setText("" + secounds);
                        jRemainingLabel.setText(" secounds remaining");
                    }
                    else {
                        jHibernateTextField.setText("" + secounds / 60);
                        jRemainingLabel.setText(" minutes remaining");
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                elapsedTime = new Date().getTime();
            }while(!isStopped() && timestamp + minutes * 60 * 1000 > new Date().getTime());

            jHibernateTextField.setText("" + minutes);

            if(isStopped()) return;
            else {
                console.out("Computer wird schlafen gelegt =)");
                //Hibernate (siehe LAPTOP)
            }

        }
    };

    jHibernateCheckBox.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            Thread thread = new Thread(AutoBarbarPanel.this.t);

            if(jHibernateCheckBox.isSelected()) {
                jHibernateTextField.setEnabled(false);
                thread.start();
            }
            else {
                jHibernateTextField.setEnabled(true);
                t.setIsStopped(true);
            }
        }

    });
} 
```

感谢所有答案

# c++ - 对象构造后初始化 const 成员变量

> ID：13458512
> 
> 赞同：1
> 
> 时间：2012-11-19T16:55:47.230
> 
> 标签：c++, constants

我经常发现自己希望我可以让对象的成员变量为 const，但系统允许在构造后初始化该 const 变量。有没有一种机制可以让我这样做？

为了澄清，这里有一个例子：

```
class A
{
public:
    A(){}
    initialize(int x) { c = x; }
private:
    const int c;
} 
```

我希望能够做这样的事情。我在构造时没有这些信息，所以我不能简单地将初始化移动到构造函数的初始化列表中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:04:04.667

不，您不能在构造后初始化 const 成员。

但是不要忘记，您可以在初始化列表中调用静态函数，因此在大多数情况下，您*可以*从初始化列表中初始化成员

```
class A
{
public:
    A(){}
    initialize(int x):c(computeC(x)) {}
private:
    const int c;
    static int computeC(int){/*...*/}
}; 
```

您还可以为该成员定义特殊的 getter 并使用它来访问成员。

```
class A
{
public:
    A(){}
    initialize(int x) { c_internal = x; }
private:
    const int& c() const { return c_internal; }
    int c_internal;
} 
```

# android - Nexus 7 Android Java VideoView，无法播放此视频

> ID：13458519
> 
> 赞同：3
> 
> 时间：2012-11-19T16:56:11.537
> 
> 标签：android, android-videoview

我尝试使用 videoview lib 在我的 nexus 7（android 4.2）上流式传输视频，但是当我启动应用程序时，我的 nexus 7 显示“无法播放此视频”，希望您能提供帮助。我的源代码：

```
package com.test.prog;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.VideoView;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Uri viduri=Uri.parse("http://www.law.duke.edu/cspd/contest/finalists/viewentry.php?file=docandyou");

        VideoView video=(VideoView)findViewById(R.id.videoview);
        video.setVideoURI(viduri);

    }
} 
```

和布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    tools:context=".MainActivity" >

    <VideoView
        android:id="@+id/videoview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
   />

</RelativeLayout> 
```

LogCat 说：

```
11-19 17:46:08.504: D/VideoView(16804): Error: 1,0
11-19 17:46:19.504: D/MediaPlayer(16804): Couldn't open file on client side, trying server side
11-19 17:46:19.504: E/MediaPlayer(16804): Unable to to create media player 
```

问候基督徒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:58:12.063

```
`video.start` 
 after you set --> `$`video.setVideoURI(viduri); 
```

我可以使用与您相同的代码在我的 nexus 7 4.1.2 版本上运行视频

# c# - 同一类型的多个导出中的 MEF 不起作用（但它们单独工作）

> ID：13458521
> 
> 赞同：1
> 
> 时间：2012-11-19T16:56:13.187
> 
> 标签：c#, .net, mef

我有一个类 ClassA 实现的接口 IInterfaceA。然后还有 3 个类从 ClassA 派生——ClassA1、ClassA2 和 ClassA3——它们都在单独的项目 DLL 中。

我现在有一个 Windows 服务（通过在控制台应用程序中使用 TopShelf 启动），它位于控制台应用程序的 Program 类的顶部：

```
[ImportMany]
public List<IInterfaceA> importsList { get; set; } 
```

在从 Main 函数中创建的 Program 实例调用的函数中，我执行以下操作：

```
var path = Path.GetDirectoryName(Assembly.GetEntryAssembly().Location);
var catalog = new DirectoryCatalog(path);
var container = new CompositionContainer(catalog);
container.ComposeParts(this); 
```

如果我将 ClassA1.dll 放在目录目录中，ComposeParts 将正常工作，并且 importList 中将有一项。如果我将 JUST ClassA2.dll 或 JUST ClassA3.dll 放在目录目录中，也会发生同样的情况 - MEF 代码工作正常。

但是 - 如果我将多个 DLL 放入其中，例如 ClassA1.dll 和 ClassA2.dll - MEF 失败并且importsList 中没有项目。但它不会引发任何 MEF 错误/异常 - 它只是不起作用。

有人以前见过这个并且知道为什么吗？可能是因为基础 ClassA 类在其他项目的类型中是 MEF，而且那些 MEF 中的类型也是其他地方的类型中的 MEF - 即，MEF 的深度大约有 3 个级别！

谢谢

# mysql - 难以猜测的 SQL 数据库表名和列名是否有助于防止 SQL 注入？

> ID：13458522
> 
> 赞同：22
> 
> 时间：2012-11-19T16:56:15.170
> 
> 标签：mysql, sql, sql-injection

我刚刚遇到一个开发人员，他在他的 MYSQL 数据库中的每个表和列名前都加上下划线（例如 _users、_name、_active）。当我质疑这种做法时，他说这有助于防止 SQL 注入攻击——我以前从未遇到过这种做法/建议。它如何帮助防止 SQL 注入攻击？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-19T16:57:31.633

不。

他的想法是“如果攻击者不知道我的表的名称，那么攻击者就无法弄乱它们。” 但是，您仍然容易受到 SQL 注入的攻击，并且攻击者仍然可以导致任意系统调用，可能是对众所周知的系统表。如果他添加了一些 SQL 代码，导致对系统表进行很长时间的查询，从而使您的服务器陷入瘫痪，该怎么办？

通过默默无闻的安全根本不是安全。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T16:59:22.610

`_this`，`_`这里与安全无关，因此它很容易受到攻击

**好读**

[防止SQL注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection?rq=1)

# css - 我的下拉 CSS 菜单上有一个奇怪的填充问题，不知道它来自哪里或如何删除它

> ID：13458525
> 
> 赞同：0
> 
> 时间：2012-11-19T16:56:26.603
> 
> 标签：css, menu, nav

我有一个 CCS 下拉菜单，对我来说效果很好，只是下拉链接左侧有一个奇怪的填充，我不明白它们来自哪里。我已经在这里和网上搜索过，找不到是什么原因造成的。也许我因为缺乏经验而错过了它，但我仍然找不到它。我希望下拉列表位于中心或左侧，但没有下面显示的填充。请让我知道是什么原因造成的。

```
 <div>
        <ul id="menu">
    <li><a href="#">Home</a></li>
    <li><a href="#">Fruit</a>
        <ul>
             <li><a href="#">Aplle</a></li>
             <li><a href="#">Banana</a></li>
             <li><a href="#">Orange</a></li>
        </ul>
    </li>
    <li><a href="#"> Veggie</a>
        <ul>
             <li><a href="#">Broccoli</a></li>
             <li><a href="#">Tomato</a></li>
             <li><a href="#">Carrot</a></li>
        </ul>
    </li>                                     
        </ul>
    </div>

HERE is my css:

    #menu{
    width:100%;
    background:#318598;
    text-align:center;
    z-index:0;
}

#menu > li{
    display:inline-block;
    position:relative;
    line-height:35px;
    list-style-type: none;
}

#menu li a{
    display:block;
    text-decoration:none;
    padding:0px 10px;
    color:#fff;
    text-align:center;

}
/* Dropdown Event Properties */
#menu li ul{
   position:absolute;
   top: 35px;
   min-width:150px;
   background-color:rgba(0,0,0,0.5);
   z-index:1;
   list-style-type: none;
}

#menu li ul li ul{
    top:0;
    left:150px;               
}

#menu li ul li a:hover{
   background:rgba(255,255,255,0.5);
}

#menu li ul{
    display: none;

}
#menu li:hover > ul{
    display:block;

} 
```

这是我的小提琴 [http://jsfiddle.net/squinny/jz4hM/](http://jsfiddle.net/squinny/jz4hM/)

小提琴也没有真正表现出来。悬停选择器悬停在整个下拉项目上，在 Firefox 中，它悬停在除了左侧下拉项目的四分之一之外的所有内容上，非常烦人。感谢所有想法！

小提琴上的css规范化关闭：http: [//jsfiddle.net/squinny/jz4hM/7/](http://jsfiddle.net/squinny/jz4hM/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:59:55.730

您正在使用`min-width: 150px;`so并相应`width`地`auto`设置填充

[**演示**](http://jsfiddle.net/jz4hM/3/)

CSS

```
#menu li ul{
   position:absolute;
   top: 35px;
   width:auto;
   background-color:rgba(0,0,0,0.5);
   z-index:1;
   list-style-type: none;
} 
```

或者你可以给`padding-right: /*Whatever*/`

[**右填充演示**](http://jsfiddle.net/jz4hM/5/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T16:59:10.350

您需要使用 css 重置文件。

jsFiddle 正在使用它，因此您在那里看不到问题。

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# matlab - 需要 MATLAB 插值和排序点帮助

> ID：13458526
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:56:29.553
> 
> 标签：matlab, image-processing, interpolation

我现在不得不使用 MATLAB 进行图像处理。但我对 MATLAB 几乎一无所知，这可能是我唯一一次使用 MATLAB（我希望如此）。所以我想得到你的帮助。这是我到目前为止所做的：

我成功地从 .trk 文件中读取了数据并解析了它的标题和正文。现在我必须应用插值。在此之前，这里是关于我的变量的信息：

我有`tracks <1x110470 struct>`。在轨道结构下，我有两个向量。它们是`nPoints`和`matrix`。`nPoints`包括向量中存在的点数`matrix`。

例如，如果我选择轨道（1,95607），nPoints=3 和 matrix={(1.2323,1.4441,2.345),(2.333,4.555,4.123),(1.22,2.33,3.44)}

nPoints 不是一个固定的数字。它甚至可以是 100 等等。但是矩阵是一个`nPoints*3`向量。我总是有3个坐标。

现在我要做的是一个基本的插值，比如取一半的边界并添加新的点。让我假设，在轨道（1,2）下我有三个点 a,b,c,d 然后我需要添加点 (a+b)/2 和 (b+c)/2 和 (c+d)/ 2.

首先，我什至无法编写一个成功的算法来做到这一点。请你帮助我好吗？（插值将应用于所有轨道。但我不会在轨道（1,1）和轨道（1,2）之间进行任何插值，我只会将它应用于轨道内的点，而且轨道中的点是未排序。）

其次，我想知道的是：是否有可能拥有一种进行参数化插值的算法。我的意思是：

假设我的观点是：a,b

如果参数=1，那么我只想添加 (a+b)/2

如果参数=2，那么除了参数=1时的参数外，我还希望有 (a+(a+b)/2)/2 和 ((a+b)/2)+b)/2

.. .. ..

我希望它像那样迭代。可能吗？

我编码已经好几个小时了，现在我开始筋疲力尽了。我将非常感谢您的帮助。

亲切的问候，艾玛迪斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:06:47.523

我真的无法弄清楚你真正想要什么“参数化插值”，我把我最好的猜测放在这里。

我猜你想在某个时候进行一次`[a b c d] -> [a (a+b)/2 b (b+c)/2 c (c+d)/2 d]`转换，可能需要多次迭代。

对于这个问题，我的解决方案是

```
ret = function interp(v, rounds)
    n=length(v);
    avg = (v(1:n-1)+v(2:n))./2;
    temp = [v(1:n-1); avg];
    ret = [temp(:), v(n)];
    if rounds>1
        ret = interp(ret, rounds-1);
    end
end 
```

变换由`[a b c d] -> [a (a+b)/2 b (b+c)/2 c (c+d)/2 d]`给出
`interp([a b c d], 1)`。

其他示例：`interp([1 2], 2)`-> `[1 1.25 1.5 1.75 2]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:03:33.877

查看[Signal Processing](https://dsp.stackexchange.com/?as=1)和官方的 Matlab 帮助 (F1)。

# tidesdk - 无法加载 php 模块 - linux 64 位

> ID：13458533
> 
> 赞同：3
> 
> 时间：2012-11-19T16:56:48.887
> 
> 标签：tidesdk

我想使用带有 php 脚本的 TideSDK 开发人员并按照入门教程进行操作。

当我使用 php 模块启动基本的 hello 脚本时，应用程序启动但调试屏幕显示此消息：

[Ti.Host] [错误] 无法加载模块（/home/casoars/.tidesdk/modules/linux/php/1.3.1-beta/libtidephp.so）：“加载模块时出错（/home/casoars/.tidesdk /modules/linux/php/1.3.1-beta/libtidephp.so）：libgmp.so.3

我对 libphp5.so 模块有完全相同的消息。

无法使用此消息创建/启动其他 php 模块（例如）：

[Ti.Host] [错误] 无法加载模块（/home/casoars/.tidesdk/modules/linux/php/1.3.1-beta/libltdl.so）：“无法从模块（/home/casoars）加载 CreateModule 符号/.tidesdk/modules/linux/php/1.3.1-beta/libltdl.so）：/home/casoars/.tidesdk/modules/linux/php/1.3.1-beta/libltdl.so：未定义符号：CreateModule

我在我的计算机上验证了所有 TideSDK 特定位置，一切正常。

我在 Linux Mint 13 'Cinnamon' 64 位

TideSDK 1.3.1 测试版

对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:17:23.097

看起来你缺少 libgmp3c2。这是一个测试版，我们正在制定一个解决方案，以确保在安装 linux 时依赖项可用。很可能会为 Ubuntu 安装 .deb 以确保这一点，而不是在 TideSDK 本身中捆绑更多库。官方支持的 Linux 是 Ubuntu，但肯定对不同风格的更广泛的 Linux 支持感兴趣，例如 Fedora。Mint 的 UI 非常简单且极简。

# apache-flex - Flex 库和 ActionScript 库有什么区别？

> ID：13458534
> 
> 赞同：3
> 
> 时间：2012-11-19T16:56:51.997
> 
> 标签：apache-flex, actionscript

Flex 库和 ActionScript 库 (Flash Builder 4.7) 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:38:38.200

Flex 是指 Adob​​e 提供的组件。Actionscript 是语言。因此，Flex 库将包含使用或扩展 Flex 组件的代码，而 Actionscript 库则不包含。

# servlets - 将 Eclipse 应用程序部署到服务器

> ID：13458540
> 
> 赞同：1
> 
> 时间：2012-11-19T16:57:15.143
> 
> 标签：servlets, deployment, jar

我正在构建一个 Java servlet，它需要一些 jars(libs) 用于在本地服务器（例如 Tomcat）中进行测试，但是当 servlet 部署到生产服务器时不需要这些（因为这些在生产中已经可用）。是否有推荐的最佳实践/方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:03:46.837

我会将库 JAR 添加到本地应用服务器安装中，以使其看起来类似于您稍后要部署到的生产服务器。

在预 tomcat 6 的情况下：

```
tomcat-dir/common/lib 
```

编辑：在 tomcat 6 及更高版本的情况下：

```
tomcat-dir/lib 
```

结果可能是您在本地服务器上运行的其他应用程序也可能会看到此库。但也许这不是问题 [如果它们在两个 Web 应用程序中，Tomcat 是否会将相同的库文件两次加载到内存中？](https://stackoverflow.com/questions/267953/managing-libraries-in-tomcat)

# python - DLL 加载失败，不是适用于 x86 和 x64 DLL 的有效 Win32 应用程序

> ID：13458543
> 
> 赞同：0
> 
> 时间：2012-11-19T16:57:24.543
> 
> 标签：python, dll

尝试运行最新版本的热图。[http://jjguy.com/heatmap/](http://jjguy.com/heatmap/)

在 64 位和 32 位 dll 中，DLL 负载一直困扰着我。（在我尝试加载两个 DLL 时，类似的问题似乎无关紧要）

我正在运行 Windows 7。我已经卸载并重新安装了 2.7.3 64 位。

## 空闲顶线：

> Python 2.7.3（默认，2012 年 4 月 10 日，23:24:47）[MSC v.1500 64 位 (AMD64)] 在 win32 上

## 我试过加载

C:\Python27\DLLs\cHeatmap-x86.dll

> ImportError：DLL 加载失败：%1 不是有效的 Win32 应用程序。

C:\Python27\DLLs\cHeatmap-x64.dll

> ImportError：DLL 加载失败：%1 不是有效的 Win32 应用程序。

我可以运行热图 1.1，但那是在添加 DLL 之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:34:05.050

你有这个dll吗？C:\Windows\System32\msvcr110.dll

从另一台计算机复制 dll 为我解决了这个问题，不知道如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:14:32.017

Resolved. Blank DLL files were created by the build.bat because the environment variable vcinstalldir is blank if a full version of visual studio isn't installed. DLLs were blank, filesize 0KB

Loaded clean DLLs from github. Filesize 9 & 10kb.

Heatmap library imports & functions as designed.

# android - android 服务 onBind SecurityException

> ID：13458544
> 
> 赞同：5
> 
> 时间：2012-11-19T16:57:27.127
> 
> 标签：android, service

我不知道为什么，但在*某些设备*中，我的服务不允许绑定。

```
java.lang.RuntimeException: Unable to create application mypackage.MyApplication: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@41680e78 (pid=16805) when binding service Intent { cmp=mypackage/.MyService }
        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4394)
        at android.app.ActivityThread.access$1300(ActivityThread.java:141)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:5039)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@41680e78 (pid=16805) when binding service Intent { cmp=mypackage/.MyService }
        at android.os.Parcel.readException(Parcel.java:1425)
        at android.os.Parcel.readException(Parcel.java:1379)
        at android.app.ActivityManagerProxy.bindService(ActivityManagerNative.java:2720)
        at android.app.ContextImpl.bindService(ContextImpl.java:1431)
        at android.app.ContextImpl.bindService(ContextImpl.java:1407)
        at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
        at mypackage.MyApplication.openService(MyApplication.java:151)
        at mypackage.MyApplication.onCreate(MyApplication.java:110)
        at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1000)
        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4391)
        ... 10 more
java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@41680e78 (pid=16805) when binding service Intent { cmp=mypackage/.MyService }
        at android.os.Parcel.readException(Parcel.java:1425)
        at android.os.Parcel.readException(Parcel.java:1379)
        at android.app.ActivityManagerProxy.bindService(ActivityManagerNative.java:2720)
        at android.app.ContextImpl.bindService(ContextImpl.java:1431)
        at android.app.ContextImpl.bindService(ContextImpl.java:1407)
        at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
        at mypackage.MyApplication.openService(MyApplication.java:151)
        at mypackage.MyApplication.onCreate(MyApplication.java:110)
        at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1000)
        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4391)
        at android.app.ActivityThread.access$1300(ActivityThread.java:141)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:5039)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
        at dalvik.system.NativeStart.main(Native Method) 
```

**来自 MyApplication 的代码：**

```
@Override
public void onCreate() {
    super.onCreate();
    openService();
    }

public void openService() {
        Intent service = new Intent(this, MyService.class);
        mConnection = new ServiceConnection() {
            @Override
            public void onServiceConnected(ComponentName name, IBinder service) {
                mService = IMyService.Stub.asInterface(service);
                if (mListener != null) {
                    mListener.onServiceStarted(mService);
                }
            }
            @Override
            public void onServiceDisconnected(ComponentName cn) {
                mService = null;
            }
        };
        bindService(service, mConnection, Context.BIND_AUTO_CREATE); // 151 line
    } 
```

**显现：**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="mypackage"
    android:versionCode="25"
    android:versionName="2.3.2" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" /> 
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <application
        android:name=".MyApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/CustomTheme"
        android:allowBackup="true" >

        <!-- android:configChanges="orientation" -->
        <activity
            android:name=".ui.activities.NewSearchActivity" 
            android:launchMode="singleTop"
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- other activities -->

        <service
            android:name="mypackage.MyService"
            android:enabled="true" />

    </application>

</manifest> 
```

请帮我！谢谢！

# c++ - 模板类中不可复制的静态 const 成员类

> ID：13458546
> 
> 赞同：1
> 
> 时间：2012-11-19T16:57:33.100
> 
> 标签：c++, templates, static-members, composition, noncopyable

我有一个不可复制的（继承自`boost::noncopyable`）类，用作自定义命名空间。另外，我还有另一个类，它使用以前的类，如下所示：

```
#include <boost/utility.hpp>
#include <cmath>

template< typename F >
struct custom_namespace
    : boost::noncopyable
{

    F sqrt_of_half(F const & x) const
    {
        using std::sqrt;
        return sqrt(x / F(2.0L));
    }

    // ... maybe others are not so dummy const/constexpr methods

};

template< typename F >
class custom_namespace_user
{

    static
    ::custom_namespace< F > const custom_namespace_;

public :

    F poisson() const
    {
        return custom_namespace_.sqrt_of_half(M_PI);
    }

    static
    F square_diagonal(F const & a)
    {
        return a * custom_namespace_.sqrt_of_half(1.0L);
    }

};

template< typename F >
::custom_namespace< F > const custom_namespace_user< F >::custom_namespace_(); 
```

此代码导致下一个错误（即使没有实例化）：

**错误：在类“custom_namespace_user”中没有声明“const custom_namespace custom_namespace_user::custom_namespace_()”成员函数**

下一种方式是不合法的：

```
template< typename F >
::custom_namespace< F > const custom_namespace_user< F >::custom_namespace_ = ::custom_namespace< F >(); 
```

我应该怎么做才能声明这两个类（首先是第二个不可复制的静态 const 成员类）？这可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:02:51.517

您的代码被解析为函数声明，而不是对象定义。

解决方案是去掉括号：

```
template< typename F > ::custom_namespace< F > const custom_namespace_user< F >::custom_namespace_; 
```

# c# - 检测 HTTPHandler 启动

> ID：13458547
> 
> 赞同：0
> 
> 时间：2012-11-19T16:57:35.113
> 
> 标签：c#, header, httphandler

有没有办法检测 httphandler 是否已经开始传输？

我正在尝试进行大型动态 Excel 导出（以 html 表格格式）。我可以这样做，但是从 httphandler 获取消息并开始下载有很长的延迟。我已经关闭了输出缓冲区，所以延迟似乎是在等待 SQL 服务器将数据转储到 sqldataset 中。

无论如何，我想将用户发送到一个新页面，让页面显示一条消息，并在 httphandler 开始发送文件后自动关闭。

有没有办法检测第一个文件头是否已发送？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:07:49.650

我建议构建一个带有消息“正在编译数据，您的下载将很快开始”的普通（.aspx）登录页面，然后将用户重定向到处理程序以进行实际下载。这样，您将处理单击下载链接和数据到达用户可能认为有问题的地方之间可能存在的延迟。

# ruby-on-rails - 通过替换 URL 中的字符来进行 301 重定向？

> ID：13458549
> 
> 赞同：0
> 
> 时间：2012-11-19T16:57:40.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, routing

不知何故，谷歌索引了错误的 URL。不知道怎么做，但唉，我们到了。

我需要使用此设置转发所有 URL ...

`example.com/features.reports`至`example.com/features/reports`

这里的常数是域和“特征”......基本上任何`features.`应该转发到`features/`

如何在路线中进行设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:51:47.797

尝试这个：

```
match "/features.*path" => redirect("/features/%{path}") 
```

这将返回一个 301 永久移动的重定向。

有关重定向和通配符的更多信息，请参阅[Rails 指南](http://guides.rubyonrails.org/routing.html)。

# rtc - 如何使用 scm 工具创建包含流的所有组件的存储库工作区？

> ID：13458554
> 
> 赞同：3
> 
> 时间：2012-11-19T16:57:47.630
> 
> 标签：rtc, jazz, ibm-jazz

我正在尝试使用“scm”自动更新流中的文件

以下是我认为它应该如何工作：

1.  以当前用户（我）身份登录到存储库
2.  创建一个新的存储库工作区，其中包含给定 Stream 的所有组件
3.  加载新创建的工作区的组件
4.  更新文件

我在第 2 点。阅读[http://pic.dhe.ibm.com/infocenter/rtc/v1r0m0/index.jsp?topic=%2Fcom.ibm.team.scm.doc上的“创建工作区”文档%2Ftopics%2Fc_scm_cli.html](http://pic.dhe.ibm.com/infocenter/rtc/v1r0m0/index.jsp?topic=%2Fcom.ibm.team.scm.doc%2Ftopics%2Fc_scm_cli.html)它没有提到如何创建一个包含给定流的所有组件的新工作区。那么我该如何实施第 2 点呢？

对我的方法的任何评论如果可以改进，也值得赞赏。

我已经通过 scm 登录到 rtc repo，这是我用来尝试从流中创建快照的命令

> scm 创建快照 -n 测试 -d 测试“mystream”

但我收到一个错误：

```
Problem running 'create snapshot':
subcommand "snapshot" requires argument-based initialization, but does not provide a directory argument. 
```

我的命令正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:21:39.820

您最好的选择是首先在流上创建一个**快照**，然后将该快照添加到您的存储库工作区。

看到[这个线程](https://jazz.net/forum/questions/11627/possible-for-command-line-scm-tool-to-create-a-snapshot)：

```
scm create snapshot [options] <workspace/stream> 
```

通过将快照与新流相关联，这将在一个命令中添加*所有组件基线（请参阅*[此线程](https://jazz.net/forum/questions/42310/question-related-to-delivering-snapshot-to-a-stream)）

```
scm snapshot promote 
```

# android - 创建正则表达式以匹配 Nagios 中的任何字段

> ID：13458555
> 
> 赞同：1
> 
> 时间：2012-11-19T16:57:48.640
> 
> 标签：android, json, html-parsing, nagios

我是 Nagios 的新手。如何在 Android 中使用 Regex 创建 HTML 解析 Nagios 原始数据？它取自 nagios status.dat 还是 status.cgi？任何人都可以帮助或提供任何建议..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:45:55.210

您可以使用[jsoup](http://jsoup.org/) (Java HTML Parser) 进行简单的 HTML 解析，即

```
String url = "http://www.google.com";
List<String> images = new ArrayList<String>(); // list of images
Document doc = Jsoup.connect(url).get();
Elements img = doc.select("img");
for (Element el : img)
{
    String imageUrl = el.attr("src");
    images.add(imageUrl);
} 
```

# tfsbuild - 构建后从构建中删除源

> ID：13458556
> 
> 赞同：0
> 
> 时间：2012-11-19T16:57:54.503
> 
> 标签：tfsbuild

我有大约 60 个 TFS 构建，它们在一堆机器上运行，这些机器都非常有规律地构建。

我们不断地用完空间，在我们的构建机器上看到 80 gigs 的 TFS 源令人沮丧。天哪，我们在周末使用了 20 GB 的硬盘空间！

我正在寻找一种在构建后立即删除构建源的方法。我们真的不太关心速度，（我们宁愿构建真正完成）所以再次下载源不是问题。

它主要是占用空间的 SOURCE 目录，而不是放置文件夹，因此保留策略并没有真正为我们做任何事情。我们不关心构建的输出，只关心它们是否构建成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:02:00.280

将此作为操作添加到构建定义 xaml 的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:24:32.260

正如 Chris 所提到的，您可以添加一个 InvokeProcess 活动。[你可以在我的博客](http://www.ewaldhofman.nl/?tag=/build+2010+customization)上找到关于你的选项的一个很好的概述

# android - Android 应用程序，finish() 不起作用

> ID：13458568
> 
> 赞同：-2
> 
> 时间：2012-11-19T16:58:41.627
> 
> 标签：android, activity-finish

该`finish()`方法将我送回主要活动，而不是终止应用程序。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:01:05.523

我想它可以工作，因为`finish()`它并没有以任何方式终止应用程序。无论如何，Android上没有这样的概念。如您`finish()`所见，它的作用是终止**活动**。[查看文档](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)

一般来说，它通常有助于理解你在做什么，所以 RTFM 关于“行为不端”的方法在询问之前听起来像是一个很好的习惯，可以快速解决大多数“不起作用”的问题，比如这个。

您还应该遵循 SO 的问题：[退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:48:30.390

Finish 终止一个活动，而不是一个应用程序。要终止应用程序，请在启动它的入口活动上调用 finish()（从而清除堆栈）。

# oracle - Oracle触发器：条件语句

> ID：13458571
> 
> 赞同：0
> 
> 时间：2012-11-19T16:59:01.793
> 
> 标签：oracle, triggers

我在表格中有一个产品列表，我想创建一个触发器来读取特定产品的库存，然后如果库存少于 5 则显示一条消息。这个概念很简单。

这是我到目前为止所拥有的。

```
SET SERVEROUTPUT ON
SET ECHO ON

CREATE OR REPLACE TRIGGER TRG_REORDERSTOCK
AFTER INSERT OR UPDATE OF S_QUANTITY ON STOCK_INVENTORY
FOR EACH ROW
BEGIN
IF :OLD.S_QUANTITY <= 10 THEN
     DBMS_OUTPUT.PUT_LINE ('Warning: ----- product with ID ('  || :OLD.BR_ID || ') has (' || :NEW.S_QUANTITY || ') units remaining, please re-order -----' );
    ELSE
        DBMS_OUTPUT.PUT_LINE ('UPDATE COMPLETE');
    END IF;
END;
/ 
```

现在为了测试触发器，我将更新特定产品的手头数量；

```
UPDATE STOCK_INVENTORY
SET S_QUANTITY = 4
WHERE BR_ID = 1
AND P_ID = 6; 
```

结果是：

```
Warning: ----- product with ID (1) has (4) units remaining, please re-order ----- 
```

这意味着触发器有效。然而，stock_inventory 有一些库存水平低于 10 的产品，但在我有条件的情况下，它只显示当前交易的消息。

这是 stock_inventory 中一些产品的列表，这是一个链接器表；

SQL> SELECT * FROM STOCK_INVENTORY;

```
 BR_ID|      P_ID|S_QUANTITY
----------|----------|----------
         1|         1|        10
         1|         6|         4
         1|         3|        30
         1|         8|        24
         1|         9|        18
         2|        10|         9
         2|         2|        10
         2|        20|        15
         2|        16|        17
         2|        13|        20
         3|        21|        15 
```

如何显示数量小于 10 的产品列表？我对甲骨文很陌生。非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:07:16.793

首先，你为什么要为这种事情使用触发器？为什么您希望触发器列出除了当前交易影响的产品之外需要重新订购的产品？由于绝对不能保证任何人都会看到写入的任何内容`DBMS_OUTPUT`，因为提醒某人订购产品 1 以重新订购产品 6 似乎违反直觉，并且因为您通常希望将库存更新与库存订购分开，整个方法似乎没有意义。

假设这是一项家庭作业，但是您可以改用语句级触发器

```
CREATE OR REPLACE TRIGGER trg_new_reorder_stock
  AFTER INSERT OR UPDATE ON stock_inventory
BEGIN
  FOR x IN (SELECT *
              FROM stock_inventory
             WHERE s_quantity <= 10)
  LOOP
    dbms_output.put_line( 'Reorder ' || x.p_id || ' it has only ' || x.s_quantity || ' units remaining.' );
  END LOOP;
END; 
```

由于这涉及语句级触发器，因此您可以查询`stock_inventory`表而不必担心会出现变异表异常。但是，这也意味着每次插入单行时，您都在对整个表执行潜在的昂贵查询，这是低效的。

# android - 当闪光灯切换按钮打开时，手电筒活动在闪光灯活动后按时崩溃

> ID：13458585
> 
> 赞同：2
> 
> 时间：2012-11-19T16:59:41.690
> 
> 标签：android, multithreading, flashlight

你能帮我吗。我是 android 开发和这个网站的新手。我对烦人的手电筒示例有一点问题。我试图添加频闪功能。它工作正常。但是如果我在 StrobeLightConfig Activity （第二个活动）上按下后退按钮，当切换按钮打开并频闪工作时，我会遇到异常并且应用程序崩溃。如果我在切换按钮关闭时按下后退按钮，一切正常并且工作正常。我认为这个问题与线程。

只有当led频闪灯工作时才会出现这个问题。对不起，如果这个问题已经存在。我试图在这个网站上找到关于这个问题的信息。

日志猫：

```
11-19 20:28:53.381: E/AndroidRuntime(21737): FATAL EXCEPTION: main
11-19 20:28:53.381: E/AndroidRuntime(21737): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.eugene.android/com.eugene.android.FlashLightActivity}: java.lang.RuntimeException: Fail to connect to camera service
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2194)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.os.Looper.loop(Looper.java:154)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.app.ActivityThread.main(ActivityThread.java:4944)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at java.lang.reflect.Method.invokeNative(Native Method)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at java.lang.reflect.Method.invoke(Method.java:511)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at dalvik.system.NativeStart.main(Native Method)
11-19 20:28:53.381: E/AndroidRuntime(21737): Caused by: java.lang.RuntimeException: Fail to connect to camera service
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.hardware.Camera.native_setup(Native Method)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.hardware.Camera.<init>(Camera.java:307)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.hardware.Camera.open(Camera.java:283)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at com.eugene.android.FlashLightActivity.onCreate(FlashLightActivity.java:83)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.app.Activity.performCreate(Activity.java:4524)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
11-19 20:28:53.381: E/AndroidRuntime(21737):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
11-19 20:28:53.381: E/AndroidRuntime(21737):    ... 11 more
11-19 20:28:53.391: D/(115): [GECameraParameters::getGPUEffect] enter
11-19 20:28:53.391: D/(115): [GECameraParameters::getGPUEffect] leave. no key GPU-effect
11-19 20:28:53.391: D/(115): [GECameraParameters::getGPUEffectParam] leave. no key GE-param0
11-19 20:28:53.391: D/(115): [GECameraParameters::getGPUEffectParam] leave. no key GE-param1
11-19 20:28:53.391: I/GPUPostEffect(115): int mlabs::GPUPostEffect::setParameters(mlabs::GPUPostEffect::GPUTask*): old effect = -1, new effect = -1.
11-19 20:28:53.391: D/GPUPostEffect(115): setParameters: isGEInit == false: no call to ChooseEffect.
11-19 20:28:53.391: E/EmbeddedLogger(367): App crashed! Process: com.eugene.android
11-19 20:28:53.391: E/EmbeddedLogger(367): App crashed! Package: com.eugene.android v1 (1.0)
11-19 20:28:53.391: E/EmbeddedLogger(367): Application Label: AWESOME Flashlight
11-19 20:28:53.401: W/ActivityManager(367):   Force finishing activity com.eugene.android/.FlashLightActivity
11-19 20:28:53.401: W/ActivityManager(367):   Force finishing activity com.eugene.android/.StrobeLightConfig 
```

手电筒活动：

```
public class FlashLightActivity extends Activity {
protected static final Parameters params = null;
private boolean isLighOn = false;
protected Camera camera;
protected RelativeLayout relativeLayout;
private android.widget.TextView TextView;   
private android.widget.ImageView ImageView;

public void onStart(){
super.onStart();

}
public void onResume(){
    super.onResume();

    }
public void onPause(){
    super.onPause();

        }

public void onStop() {
    super.onStop();

    if (camera != null) {
        camera.release();
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView = (android.widget.TextView) findViewById(R.id.textView1);
    relativeLayout = (RelativeLayout) findViewById(R.id.relativeLayout1);
    ImageView= (android.widget.ImageView) findViewById(R.id.imageView1);

    Context context = this;
    PackageManager pm = context.getPackageManager();

        if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        Log.e("err", "Device has no camera!");
        return;
    }

    camera = Camera.open();

        final Parameters p = camera.getParameters();

    relativeLayout.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            if (isLighOn) {

                relativeLayout.setBackgroundResource(R.drawable.light1);
                TextView.setText(R.string.light_off_text);
                Log.i("info", "torch is turn off!");

                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                camera.setParameters(p);
                camera.stopPreview();
                isLighOn = false;
                //ledControl("lcd-backlight", 30);

            } else {

                Log.i("info", "torch is turn on!");

                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                TextView.setText(R.string.light_on_text);
                camera.setParameters(p);
                camera.startPreview();
                isLighOn = true;
                relativeLayout.setBackgroundResource(R.drawable.light2);

            }

        }

    });

    ImageView.setOnClickListener(new OnClickListener() {

        @Override

public void onClick(View v)
{
switch (v.getId()) 
{
    case R.id.imageView1:

        Intent intent = new Intent(FlashLightActivity.this, StrobeLightConfig.class);
        startActivity(intent);
       camera.release();
        }

}

});

}
    } 
```

频闪灯配置活动：

```
public class StrobeLightConfig extends FlashLightActivity {
StrobeRunner runner;
Thread bw;
Dialog dialog;
public final Handler mHandler = new Handler();
public final Runnable mShowToastRunnable = new Runnable() {
    public void run() {
        showMessage();
    }
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    /* dialog = new Dialog(StrobeLightConfig.this);
     dialog.setContentView(R.layout.main1);

     dialog.setTitle("Write Message");
     dialog.setCancelable(true);

     inp = (EditText) dialog.findViewById(R.id.morsetext);
     Button okB = (Button) dialog.findViewById(R.id.ok);
     Button cancelB = (Button) dialog.findViewById(R.id.cancel);*/
    super.onCreate(savedInstanceState);
  setContentView(R.layout.main1);
  camera.release();
    final ToggleButton togglebutton = (ToggleButton) findViewById(R.id.ToggleButton01);

    runner = StrobeRunner.getInstance();
    runner.controller = this;

    if(runner.isRunning)
    {   

    }
    else
    {
        try
        {

            camera = Camera.open();

            if(camera==null)
            {
                togglebutton.setEnabled(false);
                TextView t = (TextView)findViewById(R.id.TextView01);
                t.setText(R.string.nocamera);
                return;
            }

            camera.release();
        }
        catch(RuntimeException ex)
        {
            togglebutton.setEnabled(false);
            TextView t = (TextView)findViewById(R.id.TextView01);
            t.setText(R.string.nocamera);
            Toast.makeText(getApplicationContext(), "Error connecting to camera flash.", Toast.LENGTH_LONG).show();
            return;
        }
    } 

    togglebutton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // Perform action on clicks
            if (togglebutton.isChecked()) {
                bw = new Thread(runner);
                bw.start();
            } else {
                runner.requestStop = true;
            }
        }
    });

    final SeekBar skbar = (SeekBar)findViewById(R.id.SeekBar01);
    skbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            runner.delay=progress;

        }
    });

    final SeekBar skbaroff = (SeekBar)findViewById(R.id.SeekBar02);
    skbaroff.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            runner.delayoff=progress;

        }
    });

}

public void onPause()
{
     super.onPause();       
    runner.requestStop=true;
    camera.release();

        }

@Override
public void onStop() {
    super.onStop();
    runner.requestStop=true;
    ToggleButton togglebutton = (ToggleButton) findViewById(R.id.ToggleButton01);
    togglebutton.setChecked(false);

}

public void showMessage()
{
    String err = runner.errorMessage;
    runner.errorMessage="";
    if(!err.equals(""))
    {
        Context context = getApplicationContext();
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, err, duration);
        toast.show();
    }

    ToggleButton togglebutton = (ToggleButton) findViewById(R.id.ToggleButton01);
    togglebutton.setChecked(false);
}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub

    if(keyCode == KeyEvent.KEYCODE_BACK){
            Intent i = new Intent(StrobeLightConfig.this, FlashLightActivity.class);
    startActivity(i);

    }
    return super.onKeyDown(keyCode, event);
}        
} 
```

StrobeRunner 活动：

```
public class StrobeRunner implements Runnable {
protected StrobeRunner()
{

}

public static StrobeRunner getInstance()
{
    return ( instance == null ? instance = new StrobeRunner() : instance );
}

private static StrobeRunner instance;

public volatile boolean requestStop = false;
public volatile boolean isRunning = false;
public volatile int delay = 0;
public volatile int delayoff = 500;
public volatile StrobeLightConfig controller;
public volatile String errorMessage = "";

public void run() {
    if(isRunning)
        return;

    requestStop=false;
    isRunning = true;

    Camera cam = Camera.open();

    Camera.Parameters pon = cam.getParameters(), poff = cam.getParameters();

    pon.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
    poff.setFlashMode(Camera.Parameters.FLASH_MODE_OFF);

    while(!requestStop)
    {
        try{
            cam.setParameters(pon);
            Thread.sleep(delay);
            cam.setParameters(poff);
            Thread.sleep(delayoff);
        }
        catch(InterruptedException ex)
        {

        }
        catch(RuntimeException ex)
        {
            requestStop = true;
            errorMessage = "Error setting camera flash status. Your device may be unsupported.";
        }
    }

    cam.release();

    isRunning = false;
    requestStop=false;
    controller.mHandler.post(controller.mShowToastRunnable);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T19:00:30.903

在**StrobeLightConfig**中，您必须删除*onKeyDown*方法，您不必覆盖它，因为默认情况下它会将您返回到**FlashLightActivity**并且在您的情况下，您打开**FlashLightActivity**然后调用*return super.onKeyDown(keyCode, event);* 再次返回**FlashLightActivity**。

**所以现在如果你想在从StrobeLightConfig**返回到 FlashLightActivity 后让闪光灯继续工作，你**必须**保存你的参数并在你使用*StartActivityForResult*和*onActivityresult*返回它们时将它们放在**FlashLightActivity**中，如果你想关闭闪光灯按下后退按钮后，只需删除*onKeyDown*方法，一切都会好起来的

 ***感谢您的代码，这对我开始学习**相机**API来说是一个很好的开始***

# c# - 相邻多边形的简化

> ID：13458592
> 
> 赞同：2
> 
> 时间：2012-11-19T17:00:01.370
> 
> 标签：c#, vector-graphics, polygons, jvectormap, douglas-peucker

我正在努力将旧坐标系的一些地图/区域转换为更简单（不太详细）的模型，以便在网络上表示（使用[jVectorMap](http://jvectormap.com/)）。我已成功使用 Douglas Peucker 算法（来自此处的代码：http: [//www.codeproject.com/Articles/18936/AC-Implementation-of-Douglas-Peucker-Line-Approxi](http://www.codeproject.com/Articles/18936/A-C-Implementation-of-Douglas-Peucker-Line-Approxi)）。

它工作得很好，但是这个实现没有考虑到这些区域相互对齐（共享边界），这在使用更高的容差时会导致非常丑陋的结果，如下所示。

![在此处输入图像描述](../Images/2b906dbac069a191f8a1e2b84db271e3.png)

是否有可能实施区域保持一致的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:05:26.750

如果您对 Python 有一定的经验，您可以尝试我编写的[简化脚本，它是 jVectorMap GIS 转换器的一部分。](https://github.com/bjornd/jvectormap/blob/develop/converter/simplifier.py)不幸的是，它还没有完成：您需要手动安装依赖项，在脚本中定义参数（路径、驱动程序）等。

只需在脚本中设置以下参数：

```
tolerance = 1000
infile = 'Kn99_sve.MIF'
outfile = 'map.mif' 
```

并将驱动程序名称形式更改`ESRI Shapefile`为`MapInfo File`.

要运行脚本，您需要 Python 2.7 并安装 Python 模块：gdal、shapely、anyjson。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T17:58:09.257

在 arcgis 你有简化多边形： http: [//resources.arcgis.com/en/help/main/10.1/index.html#//007000000011000000](http://resources.arcgis.com/en/help/main/10.1/index.html#//007000000011000000)

# node.js - 更新集合时 Meteor.flush 中的流星异常会破坏客户端之间的反应性

> ID：13458593
> 
> 赞同：4
> 
> 时间：2012-11-19T17:00:05.473
> 
> 标签：node.js, meteor

当我从前端调用 Collection.update 时（允许方法调用），更新确实可以正常工作，但是抛出了下面的异常（在 Chrome 的 JS 控制台中，而不是在服务器中）。尽管发生了更新，但连接到同一集合的其他客户端在刷新浏览器之前看不到更新——我怀疑是因为异常。

知道是什么原因造成的吗？

```
Exception from Meteor.flush: Error: Can't create second landmark in same branch
    at Object.Spark.createLandmark (http://checkadoo.com/packages/spark/spark.js?8b4e0abcbf865e6ad778592160ec3b3401d7abd2:1085:13)
    at http://checkadoo.com/packages/templating/deftemplate.js?7f4bb363e9e340dbaaea8d74ac670af40ac82d0a:115:26
    at Object.Spark.labelBranch (http://checkadoo.com/packages/spark/spark.js?8b4e0abcbf865e6ad778592160ec3b3401d7abd2:1030:14)
    at Object.partial [as list_item] (http://checkadoo.com/packages/templating/deftemplate.js?7f4bb363e9e340dbaaea8d74ac670af40ac82d0a:114:24)
    at http://checkadoo.com/packages/handlebars/evaluate.js?ab265dbab665c32cfd7ec343166437f2e03f1a54:349:48
    at Object.Spark.labelBranch (http://checkadoo.com/packages/spark/spark.js?8b4e0abcbf865e6ad778592160ec3b3401d7abd2:1030:14)
    at branch (http://checkadoo.com/packages/handlebars/evaluate.js?ab265dbab665c32cfd7ec343166437f2e03f1a54:308:20)
    at http://checkadoo.com/packages/handlebars/evaluate.js?ab265dbab665c32cfd7ec343166437f2e03f1a54:348:20
    at Array.forEach (native)
    at Function._.each._.forEach (http://checkadoo.com/packages/underscore/underscore.js?772b2587aa2fa345fb760eff9ebe5acd97937243:76:11) 
```

**编辑 2**

如果在控制台中运行更新调用，也会发生错误。它发生在更新的第一次运行时，但到那时，连接到它的任何其他浏览器上的反应性都会被破坏。

**编辑** 这是触发更新的可点击项目的模板：

```
<template name="list_item">
  <li class="checklistitemli">
  <div class="{{checkbox_class}}" id="clitem_{{index}}">
    <input type="checkbox" name="item_checked" value="1" id="clcheck_{{index}}" class="checklist_item_check" {{checkbox_ticked}}> {{title}}
  </div>
  </li>
</template> 
```

这是点击“list_item”的事件处理程序：

```
Template.list_item.events = {
  'click .checklistitem' : function(ev) {
    this.checked = !this.checked; 
    var updateItem = {}; 
    updateItem['items.'+this.index+'.checked'] = this.checked; 
    console.log("The error happens here");
    Lists.update({_id: this._id}, {$set:updateItem}, {multi:false} , function(err) { 
      console.log("In callback, after the error"); 
    });
  }
} 
```

整个内容可在[http://checkadoo.com 获得](http://checkadoo.com)（它是我的基于 Tornado 的 Python 应用程序的一个端口）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T17:34:34.673

我发现这通常是重复 ID 的问题。@Harel 的问题不包括实际呈现集合的代码，因此我们无法说出他的问题的根本原因，但 @Drew 在评论中提供的重现抛出此错误，因为它正在呈现具有重复的“_id”值。

我已经整理了@Drew 复制的工作版本： [https ://github.com/alanning/meteor-buggy-fix](https://github.com/alanning/meteor-buggy-fix)

关键修复是确保插入的饮料项目没有重复的“_id”字段：

```
 Template.drink_from_menu.events({
    'click .buy_drink': function () {
      var drink = {name: this.name, price: this.price};

      console.log("this = ", this);

      // using 'this' doesn't work because it already has a '_id' field and 
      // you would be trying to render multiple drinks with the same id
      // which causes Spark to throw the "Can't create second landmark 
      // in same branch" error
      //Tabs.update({_id:Session.get('tabId')}, {$push: {ordered_drinks: this}});

      // either ensure that the objects you want Spark to render have a 
      // unique id or leave off the _id completely and let Spark do it for you
      Tabs.update({_id:Session.get('tabId')}, {$push: {ordered_drinks: drink}});
    }
  }); 
```

# objective-c - xcode ios ARC（自动引用计数）关于 dispatch_async 和 nsdata

> ID：13458595
> 
> 赞同：1
> 
> 时间：2012-11-19T17:00:24.527
> 
> 标签：objective-c, ios, memory-management, automatic-ref-counting, grand-central-dispatch

我有一个关于 xcode ARC 的初学者问题。以下代码在没有内存问题的情况下工作，因为内存由 ARC 释放。

```
- (void)viewDidLoad
{
    [super viewDidLoad];    
    // test nsmutabledata
    dispatch_queue_t testQueue = dispatch_queue_create("testQueue", NULL);
    dispatch_async(testQueue, ^{
        while (1) {
            NSMutableData *testData = [[NSMutableData alloc]initWithCapacity:1024*1024*5];
            NSLog(@"testData size: %d", testData.length);
        }
    });
} 
```

* * *

但是，以下内容没有，并在几秒钟后给我内存分配错误。

```
+ (NSMutableData *) testDataMethod
{
    NSMutableData *testDataLocal =  [[NSMutableData alloc]initWithCapacity:1024*1024*5];
    return testDataLocal;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // test nsmutabledata
    dispatch_queue_t testQueue = dispatch_queue_create("testQueue", NULL);
    dispatch_async(testQueue, ^{
        while (1) {
            NSMutableData *testData = [RootViewController testDataMethod];
            NSLog(@"testData size: %d", testData.length);
        }
    });
} 
```

我对ARC有错误的理解吗？我虽然 testDataLocal 被计算一次，但在方法退出时超出了范围。testData 是另一个计数，但在循环的下一次迭代中 testData 应该没有计数，并被系统释放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:05:51.713

在第一段代码中，`NSMutableData`对象在每次循环迭代结束时被释放，从而避免了任何内存问题。

在第二段代码中，返回值`testDataMethod`很可能是自动释放的。由于您的应用程序在一个紧密的循环中运行，因此自动释放池从未有机会被刷新，因此您很快就会耗尽内存。

尝试将您的第二段代码更改为：

```
while (1) {
    @autoreleasepool {
        NSMutableData *testData = [RootViewController testDataMethod];
        NSLog(@"testData size: %d", testData.length);
    }
} 
```

# css - 将边框应用到背景图像

> ID：13458596
> 
> 赞同：1
> 
> 时间：2012-11-19T17:00:25.180
> 
> 标签：css

我有一些 div，它们的背景使用以下方法设置为图像：

```
background:url(myimage.jpg); 
```

现在我要做的是在设置为背景的图像上设置一个边框。

我不想在 div 上设置边框，因为这不会给出预期的结果，它必须是图像上的边框。

不确定这是否可能，是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:27:41.587

您可以尝试使用多个背景，方法是将您的基本背景图像和第二个背景图像设置为边框。

```
#container {
background-image: url(Main-bg), url(Border-img.png); 
background-position: center center, left bottom; /* border bottom in this case */ 
background-repeat: no-repeat; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T17:07:56.983

正如您提到的那样，不可能完全做到这一点。由于背景图像是样式而不是内容，因此不能向其添加其他样式。

最好的选择是创建一个不同的图像文件来提供更粗的边框。

# objective-c - openActiveSessionWithReadPermissions 不会自动登录

> ID：13458597
> 
> 赞同：6
> 
> 时间：2012-11-19T17:00:41.937
> 
> 标签：objective-c, ios, facebook-ios-sdk

我最近开始使用 Facebook SDK 3.1，在使用`openActiveSessionWithReadPermissions`.

实际上，login in 工作得很好，如果有可用的缓存令牌，它会在不显示 Facebook UI 的情况下登录，如果没有，它会显示 UI。

在我拨打`reauthorizeWithPublishPermissions`. 如果我调用`reauthorizeWithPublishPermissions`，然后关闭并重新打开应用程序，然后调用`openActiveSessionWithReadPermissions`，它会显示 Facebook UI 并要求用户说“是的，我可以读取权限”，即使有可用的缓存令牌。

如果我拨打电话，它只会错误地显示 Facebook UI `reauthorizeWithPublishPermissions`，否则一切正常。

打开阅读代码：

```
[FBSession openActiveSessionWithReadPermissions:readpermissions allowLoginUI:YES
                                         completionHandler:^(FBSession *aSession, FBSessionState status, NSError *error) {
            [self sessionStateChanged:[FBSession activeSession] state:status error:error];
            if (status != FBSessionStateOpenTokenExtended) {
                // and here we make sure to update our UX according to the new session state
                FBRequest *me = [[FBRequest alloc] initWithSession:aSession
                                                         graphPath:@"me"];
                [me startWithCompletionHandler:^(FBRequestConnection *connection,
                                                 NSDictionary<FBGraphUser> *aUser,
                                                 NSError *error) {
                    self.user = aUser;

                    aCompletionBlock(aSession, status, error);
                }];
            }
        }]; 
```

sessionStateChanged 函数：

```
- (void)sessionStateChanged:(FBSession *)aSession state:(FBSessionState)state error:(NSError *)error {

    if (aSession.isOpen) {
        // Initiate a Facebook instance and properties
        if (nil == self.facebook || state == FBSessionStateOpenTokenExtended) {
            self.facebook = [[Facebook alloc]
                             initWithAppId:FBSession.activeSession.appID
                             andDelegate:nil];

            // Store the Facebook session information
            self.facebook.accessToken = FBSession.activeSession.accessToken;
            self.facebook.expirationDate = FBSession.activeSession.expirationDate;
        }
    } else {
        // Clear out the Facebook instance
        if (state == FBSessionStateClosedLoginFailed) {
            [FBSession.activeSession closeAndClearTokenInformation];
        }
        self.facebook = nil;
    }
} 
```

Publish 调用，带有一个空的 aPublishAction 用于测试：

```
- (void)doPublishAction:(void(^)(FBSession *aSession, NSError *error))aPublishAction {

    if ([FBSession.activeSession.permissions
         indexOfObject:@"publish_actions"] == NSNotFound) {

        NSArray *writepermissions = [[NSArray alloc] initWithObjects:
                                     @"publish_stream",
                                     @"publish_actions",
                                     nil];

        [[FBSession activeSession]reauthorizeWithPublishPermissions:writepermissions defaultAudience:FBSessionDefaultAudienceFriends completionHandler:^(FBSession *aSession, NSError *error){
            if (error) {
                NSLog(@"Error on public permissions: %@", error);
            }
            else {
                aPublishAction(aSession, error);
            }

        }];

    }
    else {
        // If permissions present, publish the story
         aPublishAction(FBSession.activeSession, nil);
    }
} 
```

提前感谢您所做的一切，我将不胜感激任何和所有的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:18:18.567

您需要添加

`[FBSession.activeSession handleDidBecomeActive];`

[如迁移](http://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)指南`-(void) applicationDidBecomeActive:(UIApplication *)application`中所述，添加到您的应用程序委托中的方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-26T09:45:42.740

如果您使用 openActiveSessionWithPermissions 而不是 openActiveSessionWithReadPermissions 会怎样？

# javascript - 使用 jquery 为每 7 个元素添加不同的类

> ID：13458598
> 
> 赞同：4
> 
> 时间：2012-11-19T17:00:40.883
> 
> 标签：javascript, jquery, html

我正在创建一个包含帖子列表的博客页面。每篇博文都有相同的 html，例如：

```
<article class="post">
  post 1
</article> 
```

我想给每 7 篇文章一个类序列（'medium','small','large','large','small','small','medium'）

```
<article class="post medium">
  post 1
</article>
<article class="post small">
  post 2
</article>
<article class="post large">
  post 3
</article>
<article class="post large">
  post 4
</article> 
```

当我发布第 8 篇博客时，一切都从头开始。这甚至可能吗？

任何指向正确方向的点都将非常受欢迎！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:06:14.893

您可以使用 addClass 并检查其索引：

```
var classNames = ['medium','small','large','large','small','small','medium'];

$('article.post').addClass(function(i){
    return classNames[ i % classNames.length ];
}); 
```

演示：http: [//jsfiddle.net/wgdv4/](http://jsfiddle.net/wgdv4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T17:04:44.907

我建议使用**CSS3 选择器**——我知道它被标记为 JavaScript，但你已经在使用 HTML5，所以你也可以。老实说，与编写纯 JS 或 JQuery 函数相比，它会为您节省大量时间：任何时候您都可以摆脱不使用 JavaScript 的困扰。无论如何，[在这里查看选择器](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

这将一组中的第一个节点的类，然后是第 8 个，然后是第 15 个等更改为中后，并以相同的方式继续，但对于后小的第 2、第 9 等，依此类推。

```
ul li:nth-child(1n+7) {  
  class: "post medium";
}

ul li:nth-child(2n+7) {  
  class: "post small";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T17:05:59.187

使用 jQuery 可以通过以下方式完成：

```
var classes = ["medium", "small", "large", "large", "small", "small", "medium"];
$(".post").each(function(i) {
    $(this).addClass(classes[i % classes.length]);
}); 
```

**演示：http:** [//jsfiddle.net/DCYjF/](http://jsfiddle.net/DCYjF/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T17:06:17.503

```
var klasses = ['medium','small','large','large','small','small','medium'];

$('article.post').each(function( index)
{
$(this).addClass( klasses[index % klasses.length] );
}); 
```

这将遍历您的帖子，使用`index`变量 to pull from `klasses`，这是您的类的数组。当它到达`klasses`阵列的“末端”时，它会重新开始，这要归功于`%`操作员。

编辑：看起来我们很多人都采用了类似的解决方案。需要注意的一件事是，此解决方案使用 .length 作为项目数量的指标，而不是硬编码的 7。我不在乎您是否不接受此答案，但我建议您使用长度，这样您就可以添加/删除类，而无需在其他地方更改您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T17:03:26.330

查找 mod 运算符 - (%)。如果 n 可以被 7 整除（其中 n 是当前帖子的 id），则执行 (n % 7 == 0) 将返回 true，您可以使用它来重置样式计数。

# java - 如何在没有整数 bigdecimal 指数的情况下计算功率？

> ID：13458600
> 
> 赞同：2
> 
> 时间：2012-11-19T17:00:44.737
> 
> 标签：java, bigdecimal

尝试计算 (a+b)^n 其中 n 是 BigDecimal 变量中的实数值，但 BigDecimal.pow 旨在仅接受整数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:22:05.753

如果输入在 double 支持的幅度范围内，并且结果中不需要超过 15 个有效数字，则将 (a+b) 和 n 转换为 double，使用 Math.pow，并将结果转换回 BigDecimal。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-30T18:02:07.923

只要您只是使用整数作为指数，您就可以使用一个简单的循环来计算 x^y：

```
public static BigDecimal pow(BigDecimal x, BigInteger y) {
    if(y.compareTo(BigInteger.ZERO)==0) return BigDecimal.valueOf(1); //If the exponent is 0 then return 1 because x^0=1
    BigDecimal out = x;
    BigInteger i = BigInteger.valueOf(1);
    while(i.compareTo(y.abs())<0) {                                   //for(BigDecimal i = 1; i<y.abs(); i++) but in BigDecimal form
        out = out.multiply(x);
        i = i.add(BigInteger.ONE);
    }
    if(y.compareTo(BigInteger.ZERO)>0) {
        return out;
    } else if(y.compareTo(BigInteger.ZERO))<0) {
        return BigDecimal.ONE.divide(out, MathContext.DECIMAL128);    //Just so that it doesn't throw an error of non-terminating decimal expansion (ie. 1.333333333...)
    } else return null;                                               //In case something goes wrong
} 
```

或者对于 BigDecimal x 和 y：

```
public static BigDecimal powD(BigDecimal x, BigDecimal y) {
    return pow(x, y.toBigInteger());
} 
```

希望这可以帮助！

# matlab - 离散化连续数据的分箱技术

> ID：13458603
> 
> 赞同：1
> 
> 时间：2012-11-19T17:00:58.950
> 
> 标签：matlab, machine-learning, binning

我有以下数据集，

第 1 至 6 列

```
1.0000         0    0.9954   -0.0589    0.8524    0.0231
1.0000         0    1.0000   -0.1883    0.9304   -0.3616
1.0000         0    1.0000   -0.0336    1.0000    0.0049
1.0000         0    1.0000   -0.4516    1.0000    1.0000
1.0000         0    1.0000   -0.0240    0.9414    0.0653
1.0000         0    0.0234   -0.0059   -0.0992   -0.1195
1.0000         0    0.9759   -0.1060    0.9460   -0.2080
     0         0         0         0         0         0
1.0000         0    0.9636   -0.0720    1.0000   -0.1433 
```

我正在尝试使用二进制拆分来构建决策树，其中一个问题是数据继续存在，并且我当前的实现通过保持数据原样并进行拆分而变得计算密集。我必须说，如果你只是构建一个分类器，那就太糟糕了。

就我而言，我正在做十倍并将分类器从 5-50（装袋）增加。我正在考虑以这种方式将数据存储到 0.2 个存储桶中，但我意识到存在负数。我正在使用 matlab 来实现。我是一个 Matlab NewB，不确定是否有预定义的方法来处理这样的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:07:10.167

不确定这是否完全解决了您的问题，但如果您的问题是动态定义“桶”，您可以这样做：

```
% Find the minimum and maximum of the matrix
Mmin = min(M(:));
Mmax = max(M(:));

% Assume you have a matrix M with positive and negative values, and want it in bins of 0.2
buckets = Mmin:0.2:Mmax;

% OR assume you want to spread them equally over a fixed amount of bins, say 100
buckets = linspace(Mmin,100,Mmax); 
```

编辑：

假设你想根据一列的值来划分矩阵，比如 3，那么你可以这样做：

```
% Define the relevant column as a vector for easy handling
v = M(:,3);

% Assume you want to spread them equally over a fixed amount of bins, say 100
buckets = linspace(min(v),100,max(v));
% Now see which column belongs in each bucket
bucket_idx = ones(size(v));
for i = 2:length(buckets)
    bucket_idx(v>buckets(i-1)&(v<buckets(i)) = i;
end 
```

这会告诉您每行属于哪个存储桶，将其矢量化会更好，但目前这是我能想到的最快的解决方案。我认为一旦你知道所有东西都属于哪个桶，你应该能够解决剩下的问题。

# c# - 在 ASP.NET 中使用简单的 CSharpCodeProvider 时出现与 LINQ 相关的错误

> ID：13458605
> 
> 赞同：1
> 
> 时间：2012-11-19T17:01:06.513
> 
> 标签：c#, asp.net, linq, web-config, csharpcodeprovider

我创建了一个非常简单的自定义编译器：

```
public class SimpleCompiler : CSharpCodeProvider
{
    public SimpleCompiler() : base()
    {
        File.AppendText("d:\foo.txt","bar");
    }
} 
```

在我的 web.config 文件中，我复制/粘贴了现有配置来声明这个新编译器。

```
<compiler language="c#;cs;csharp" extension=".cs" type="XXX.SimpleCompiler, XXX" warningLevel="4">
    <providerOption name="CompilerVersion" value="v3.5"/>
    <providerOption name="WarnAsError" value="false"/>
</compiler> 
```

但是在使用以下代码访问用户控件时出现错误：

```
<asp:Label runat="server" ID="Label3">
    <%# 
         string.Join("<br/>",((ReadOnlyCollection<AAA>)Eval("ListOfAs")).Select(x => x.Name).ToArray())                                 
    %>
 </asp:Label> 
```

它失败`>`了`<AAA>`。某处应该缺少某些东西（使用？），但是使用标准编译器可以很好地构建`Microsoft.CSharp.CSharpCodeProvider`。

错误信息是：

> 编译器错误消息：CS1525：无效的表达式术语“>”

**更新：**它似乎与 LINQ 有关。它在控制代码中使用 LINQ 的所有页面上都失败。但是 System.Core.dll 包含在 Web.config 中。

**Update2：**我能够在一个新的 Web 应用程序项目中重现它。

1.  添加一个新类：

    ```
    namespace WebApplication1
    {
        public class SimpleCompiler : CSharpCodeProvider
        {
            private void Log(string message)
            {
                File.AppendAllText("d:\\foo.txt", DateTime.Now.Ticks+Environment.NewLine);
            } 
       } 
    ```

    }

2.  更新`web.config`

    ```
    <system.codedom>
        <compilers>
          <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="WebApplication1.SimpleCompiler, WebApplication1">
              <providerOption name="CompilerVersion" value="v3.5"/>
              <providerOption name="WarnAsError" value="false"/>
            </compiler>
        </compilers>
    </system.codedom> 
    ```

3.  更改`Default.aspx`为：

    ```
    <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %>
    <%@ Import Namespace="System.Linq" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
        <head runat="server"></head>
        <body>
            <form id="form1" runat="server">
            <div>
                <%
                    int x = (new int[] { 1, 2, 3, 4, 5 }).Where(z => z > 2).Count();
                    this.Response.Write(x);
                %>
            </div>
            </form>
        </body>
    </html> 
    ```

如果我将项目更新为`4.0`，它可以工作。但我不能在其他人中这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:14:08.607

尝试添加到 Web.config：

```
<pages>
   <namespaces>
      <add namespace="System.Linq" />
   </namespaces>
</pages> 
```

和

```
<compilation>
    <assemblies>
        <add assembly="System.Core" />
    </assemblies>
</compilation> 
```

# sql-server - 如何在预定义的服务器 + 选择的数据库 + 新的空白查询打开的情况下打开 SQL Server Management Studio

> ID：13458608
> 
> 赞同：0
> 
> 时间：2012-11-19T17:01:15.097
> 
> 标签：sql-server, sql-server-2005

我白天使用 SQL Server Management Studio 数千次，每次打开它以选择服务器、选择数据库并按新查询时，我都觉得很烦人……

我正在使用 Windows 集成身份验证

我想找到一种自动设置它们的方法

我从 2005 年开始使用 Studio

我不是在寻找“你为什么不让它保持打开”的答案，请......

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:34:14.300

试试这个（我使用的是 SSMS 2008）：

1.  为您的用户打开属性窗口，然后将*默认数据库*值更改为您想要的值。

2.  转到`Tools/options/Environment/General`并选择“启动时”中的“打开新查询窗口”

# javascript - drupal_add_js 在 hook_user_login 中不起作用

> ID：13458609
> 
> 赞同：0
> 
> 时间：2012-11-19T17:01:18.550
> 
> 标签：javascript, drupal, drupal-7

使用 Drupal 7 我在 hook_user_login 中使用 drupal_add_js 添加 js。

添加 js 后，我可以调用 drupal_get_js() 并且我可以看到我的 js 已添加，但是当页面加载时 js 已经消失。

我的代码是：

```
function popups_user_login(&$edit, $account) {
    $js = 'some inline js here';
    drupal_add_js($js, array('type'=>'inline', 'weight'=>1));
    drupal_add_js(drupal_get_path('module', 'popups').'/popups.js', array('weight'=>2));
} 
```

该模块的目的是在满足某些条件时在用户登录后创建一个弹出窗口。

drupal.org 上也有类似的[问题](http://drupal.org/node/1372506)。

谁能告诉我这里发生了什么？

（我已经在 2 个单独的 Drupal 7 安装上尝试过这个，并且在两个站点上都遇到了同样的问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:11:26.537

就像克莱夫说的那样，这是由于登录后直接发生重定向。这可以通过安装Devel并在Devel设置页面上打开“显示重定向页面”来检查。

解决方案是在 hook_user_login 中设置一个会话变量（在我的例子中，它包含我想要显示的弹出窗口的 nid），然后可以在 hook_page_alter 中读取它并添加此时添加的必要 JS。

# javascript - 排列菜单项以填补空白

> ID：13458610
> 
> 赞同：3
> 
> 时间：2012-11-19T17:01:19.557
> 
> 标签：javascript, jquery, html, css, jquery-isotope

我希望我的菜单 div 根据图像 1 中的标记移动。第二张图像显示了原始菜单，就像现在一样。我如何移动`divs`以填满空间。我尝试使用`isotope`但`wookmark`没有运气。我无法让它工作。阿比帮助表示赞赏。

HTML 标记：

```
<div id="megamenu1" class="megamenu">
        <div class="column">
            <h3>
                Web Development</h3>
            <ul>
               <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
                <li><a href="http://www.codingforums.com">Coding Forums</a></li>
                <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
                <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
                <li><a href="http://www.codingforums.com">Coding Forums</a></li>
                <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
                <li><a href="http://www.codingforums.com">Coding Forums</a></li>
                <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
            </ul>
        </div>
        <div class="column">
            <h3>
                News Related</h3>
            <ul>
                <li><a href="http://www.cnn.com/">CNN</a></li>
                <li><a href="http://www.msnbc.com">MSNBC</a></li>
                <li><a href="http://www.google.com">Google</a></li>
                <li><a href="http://news.bbc.co.uk">BBC News</a></li>
                <li><a href="http://www.google.com">Google</a></li>
                <li><a href="http://news.bbc.co.uk">BBC News</a></li>
                <li><a href="http://news.bbc.co.uk">BBC News</a></li>
                <li><a href="http://www.google.com">Google</a></li>
                <li><a href="http://news.bbc.co.uk">BBC News</a></li>
            </ul>
        </div>
        <div class="column">
            <h3>
                Technology</h3>
            <ul>

                <li><a href="http://www.codingforums.com">Coding Forums</a></li>
                <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
                <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            </ul>
        </div>
        <div class="column">
            <h3>
                Web Development</h3>
            <ul>
               <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
                <li><a href="http://www.codingforums.com">Coding Forums</a></li>
                <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
                <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
                <li><a href="http://www.codingforums.com">Coding Forums</a></li>
                <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
            </ul>
        </div>
        <div class="column">
            <h3>
                News Related</h3>
            <ul>
                <li><a href="http://www.cnn.com/">CNN</a></li>
                <li><a href="http://www.msnbc.com">MSNBC</a></li>
                <li><a href="http://www.google.com">Google</a></li>
                <li><a href="http://news.bbc.co.uk">BBC News</a></li>
                <li><a href="http://news.bbc.co.uk">BBC News</a></li>
                <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
                <li><a href="http://www.codingforums.com">Coding Forums</a></li>
                <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
                <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
                <li><a href="http://www.codingforums.com">Coding Forums</a></li>
                <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
                  <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
                <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
                <li><a href="http://www.cssdrive.com">CSS Drive</a></li>

            </ul>
        </div>
        <div class="column">
            <h3>
                Technology</h3>
            <ul>
                <li><a href="http://www.news.com/">News.com</a></li>
                <li><a href="http://www.slashdot.com">SlashDot</a></li>
                <li><a href="http://www.digg.com">Digg</a></li>
                <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
                <li><a href="http://www.news.com/">News.com</a></li>
                <li><a href="http://www.slashdot.com">SlashDot</a></li>
                <li><a href="http://www.digg.com">Digg</a></li>
                <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
            </ul>
        </div>
        <div class="column">
            <h3>
                Technology</h3>
            <ul>
                <li><a href="http://www.news.com/">News.com</a></li>
                <li><a href="http://www.slashdot.com">SlashDot</a></li>
                <li><a href="http://www.digg.com">Digg</a></li>
                <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
                <li><a href="http://www.news.com/">News.com</a></li>
                <li><a href="http://www.slashdot.com">SlashDot</a></li>
                <li><a href="http://www.digg.com">Digg</a></li>
                <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
                <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
            </ul>
        </div>
        <div class="column">
            <h3>
                Technology</h3>
            <ul>
                <li><a href="http://www.news.com/">News.com</a></li>
                <li><a href="http://www.slashdot.com">SlashDot</a></li>
            </ul>
        </div>
    </div> 
```

**JAVASCRIPT：**

```
<script type="text/javascript">
        jkmegamenu.definemenu("megaanchor", "megamenu1", "mouseover")
</script> 
```

**CSS：**

```
.megamenu{
position: absolute;
display: none;
left: 0;
top: 0;
background: white;
border: 1px solid #f06b24;
border-width: 5px 1px;
padding: 10px;
font: normal 12px Verdana;
z-index: 100;
width:805px;

}

.megamenu .column{
float: left;
width: 180px; /*width of each menu column*/
margin-right: 5px;
}

.megamenu .column ul{
margin: 0;
padding: 0;
list-style-type: none;
}

.megamenu .column ul li{
padding-bottom: 5px;
}

.megamenu .column h3{
background: #e0e0e0;
font: bold 13px Arial;
margin: 0 0 5px 0;
}

.megamenu .column ul li a{
text-decoration: none;
}

.megamenu .column ul li a:hover{
color: red;
} 
```

这是指向菜单示例的链接 http://www.javascriptkit.com/script/script2/jkmegamenu.shtml[很](http://www.javascriptkit.com/script/script2/jkmegamenu.shtml)`.js`长，所以我没有在此处粘贴[.js 文件链接](http://www.javascriptkit.com/script/script2/jkmegamenu.js)。 ![在此处输入图像描述](../Images/295fffb2dd03488e19a1c6b591ad3747.png)

![ttt](../Images/9c689accfe9ecc8b34c478fa4f687af4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:32:21.917

我不太确定您是否正在寻找一种解决方案来自动填写空格（使用同位素）或想要有特定的顺序。

无论如何，两者同时是不可能的。Isotope 将尝试按照您放置的顺序排列您的内容，但如果它可以用在稍远一点的列中填充一个小间隙，它将放置它。

**使用同位素**填充空白很容易：http: [//jsfiddle.net/jaap/QfwJa/1/](http://jsfiddle.net/jaap/QfwJa/1/)

**让它们按特定顺序排列。**

如果您希望内容以特定顺序显示，请首先在您的 html 中按该顺序放置内容。我注意到您将每个“内容块”称为一列。如果您希望您的内容按特定顺序排列，首先创建 4 个实际列，这些列中的内容...

像这样：

[http://codepen.io/anon/pen/ByCde](http://codepen.io/anon/pen/ByCde)

```
<div id="megamenu1" class="megamenu">
<div class="column">
        <div class="content">
        <h3>
            Web Development</h3>
        <ul>
           <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
            <li><a href="http://www.codingforums.com">Coding Forums</a></li>
            <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
            <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
            <li><a href="http://www.codingforums.com">Coding Forums</a></li>
            <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
            <li><a href="http://www.codingforums.com">Coding Forums</a></li>
            <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
        </ul>
    </div>
      <div class="content">
        <h3>
            Technology</h3>
        <ul>
            <li><a href="http://www.news.com/">News.com</a></li>
            <li><a href="http://www.slashdot.com">SlashDot</a></li>
            <li><a href="http://www.digg.com">Digg</a></li>
            <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
            <li><a href="http://www.news.com/">News.com</a></li>
            <li><a href="http://www.slashdot.com">SlashDot</a></li>
            <li><a href="http://www.digg.com">Digg</a></li>
            <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
        </ul>
    </div>      
</div>

<div class="column">
            <div class="content">
        <h3>
            News Related</h3>
        <ul>
            <li><a href="http://www.cnn.com/">CNN</a></li>
            <li><a href="http://www.msnbc.com">MSNBC</a></li>
            <li><a href="http://www.google.com">Google</a></li>
            <li><a href="http://news.bbc.co.uk">BBC News</a></li>
            <li><a href="http://www.google.com">Google</a></li>
            <li><a href="http://news.bbc.co.uk">BBC News</a></li>
            <li><a href="http://news.bbc.co.uk">BBC News</a></li>
            <li><a href="http://www.google.com">Google</a></li>
            <li><a href="http://news.bbc.co.uk">BBC News</a></li>
        </ul>
    </div>
    <div class="content">
        <h3>
            Technology</h3>
        <ul>
            <li><a href="http://www.news.com/">News.com</a></li>
            <li><a href="http://www.slashdot.com">SlashDot</a></li>
            <li><a href="http://www.digg.com">Digg</a></li>
            <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
            <li><a href="http://www.news.com/">News.com</a></li>
            <li><a href="http://www.slashdot.com">SlashDot</a></li>
            <li><a href="http://www.digg.com">Digg</a></li>
            <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
            <li><a href="http://www.techcrunch.com">Tech Crunch</a></li>
        </ul>
    </div>
</div>

<div class="column">
            <div class="content">
        <h3>
            Technology</h3>
        <ul>

            <li><a href="http://www.codingforums.com">Coding Forums</a></li>
            <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
            <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
        </ul>
    </div>
    <div class="content">
        <h3>
            News Related</h3>
        <ul>
            <li><a href="http://www.cnn.com/">CNN</a></li>
            <li><a href="http://www.msnbc.com">MSNBC</a></li>
            <li><a href="http://www.google.com">Google</a></li>
            <li><a href="http://news.bbc.co.uk">BBC News</a></li>
            <li><a href="http://news.bbc.co.uk">BBC News</a></li>
            <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
            <li><a href="http://www.codingforums.com">Coding Forums</a></li>
            <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
            <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
            <li><a href="http://www.codingforums.com">Coding Forums</a></li>
            <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
              <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>

        </ul>
    </div>
</div>

<div class="column">
    <div class="content">
        <h3>
            Web Development</h3>
        <ul>
           <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
            <li><a href="http://www.codingforums.com">Coding Forums</a></li>
            <li><a href="http://www.javascriptkit.com/domref/">DOM Reference</a></li>
            <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
            <li><a href="http://www.codingforums.com">Coding Forums</a></li>
            <li><a href="http://www.javascriptkit.com">JavaScript Kit</a></li>
            <li><a href="http://www.dynamicdrive.com/">Dynamic Drive</a></li>
            <li><a href="http://www.cssdrive.com">CSS Drive</a></li>
        </ul>
    </div>

    <div class="content">
        <h3>
            Technology</h3>
        <ul>
            <li><a href="http://www.news.com/">News.com</a></li>
            <li><a href="http://www.slashdot.com">SlashDot</a></li>
        </ul>
    </div>
</div> 
```

# sql - 加入超过 2 个表

> ID：13458615
> 
> 赞同：2
> 
> 时间：2012-11-19T17:01:44.327
> 
> 标签：sql, join

我有三张桌子。

*   表数据包含来自“data.txt”文件的各个部分的数据。
*   表限制包含来自“limits.txt”文件的数据表的限制。
*   表格文件是上面每个单独的 .txt 文件的列表。

所以“文件”表看起来像这样。如您所见，它是存在的每个文件的列表。LimitsA 文件将包含每个 A 类型数据文件的限制。

```
ID  File_Name  Type  Sub-Type
1   DataA_10   A     10
2   DataA_20   A     20
3   DataA_30   A     30
4   LimitsA    A     NONE
5   DataB_10   B     10
6   DataB_20   B     20
7   LimitsB    B     NONE 
```

“数据”表如下所示。File_ID 是“文件”表中的外键。具体来说，这将是上面 DataA_10 的数据：

```
ID  File_ID  Dat1  Dat2  Dat3... Dat20
1   1        50    52    53 
2   1        12    43    52 
3   1        32    42    62 
```

“限制”表如下所示。File_ID 是“文件”表中的外键。具体来说，这将是上述 LimitsA 的数据：

```
ID  File_ID  Sub-Type  Lim1  Lim2
1   4        10        40    60    
2   4        20        20    30    
3   4        30        10    20 
```

所以我想要做的是将“限制”表中的正确限制加入相应“数据”表中的数据。DataA_10 的每一行将具有来自 LimitsA 表的“40”和“60”限制。不幸的是，没有办法直接将限制表链接到数据表。做到这一点的唯一方法是回顾文件表并看到 LimitsA 和 DataA_10 属于 A 类型。一旦我将这两者链接在一起，我就需要专门只获取 Sub-Type 10 的限制。

最后，我想要一个看起来像这样的结果。

结果：

```
ID  File_ID  Dat1  Dat2  Dat3... Dat20  Lim1  Lim2
1   1        50    52    53             40    60
2   1        12    43    52             40    60
3   1        32    42    62             40    60 
```

我希望这足够清楚，可以理解。在我看来，这似乎是一个加入 2 个以上表的问题，但我一直无法在网上找到合适的解决方案。如果您有解决方案或任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:11:20.523

您的“文件”表实际上是 2 个已合并的独立（但相关）概念。如果您使用子查询将它们分开，您将更容易进行连接。请注意，像这样加入不是最有效的方法，但同样也不是给定的模式......

```
SELECT Data.*, Limits.Lim1, Limits.Lim2
FROM (SELECT * FROM Files WHERE SubType IS NOT NULL) DataFiles
JOIN (SELECT * FROM Files WHERE SubType IS NULL) LimitFiles
  ON LimitFiles.Type = DataFiles.Type
JOIN Data 
  ON DataFiles.ID = Data.File_ID
JOIN Limits
  ON LimitFiles.ID = Limits.File_ID
  AND DataFiles.SubType = Limits.SubType
ORDER BY Data.File_ID 
```

**更新**

更具体地说明如何改进架构：目前，该`Files`表没有明确的方法来区分数据和限制文件条目。除此之外，数据条目没有指向单个限制文件条目的明确链接。虽然这两个都可以在上面的 SQL 中计算出来，但是这样的逻辑可能无法很好地与查询优化器配合使用，并且肯定不能保证您需要的 Data-Limit 链接。

考虑以下选项：

*   不是通过链接到“限制”文件`Type`，而是直接链接到限制条目`Id`。在该链接上设置外键以确保预期的限制条目可用。
*   将“限制”条目与“数据”条目分开，方法是将它们放在单独的表中。
*   在外键上创建索引。为此，为所有外键添加索引 - 默认情况下 SQL Server 不这样做。

其中，我认为有一个外键是必不可少的，而其他的则是适度的改进。

# asp.net - 我可以在 ASP.NET WebForms 中按顺序将控件添加到 PlaceHolder 控件吗？

> ID：13458622
> 
> 赞同：0
> 
> 时间：2012-11-19T17:02:12.087
> 
> 标签：asp.net, webforms

在 ASP.NET WebForms (v 3.5) 中，我动态创建了一个控件，并在循环中`PlaceHolder`添加了 `Label`、`literal`和控件。`TreeView`如果我运行应用程序，循环执行两次，我发现先显示了两个`Label`s和两个`literal`s，然后`TreeView`出现了两个控件。但是，我想按 - `Label`、`literal`、`TreeView`和 ...的顺序显示控件。

为了解决这个问题，我尝试了 `ControlPlaceHolder1.Controls.Add()`函数`ControlPlaceHolder1.Controls.AddAt()`。这些都不能按我想要的顺序显示控件。

有什么办法可以解决这个问题吗？

# prolog - 更新列表的第 n 个元素

> ID：13458623
> 
> 赞同：2
> 
> 时间：2012-11-19T17:02:16.030
> 
> 标签：prolog

我是 prolog 的新手，我在 prolog 中有一个列表`A=[1,2,3,4]`，比我使用`nth(N,[_|T],R)`. 现在我有第 N 个元素`R`，比我做了一些计算`R`。现在我想要更新列表中的第 n 个元素。

因为我要对列表中的每个元素进行大量计算，所以我不能每次都创建一个新列表。

我没有找到任何更新列表的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:44:23.813

从您与@Orbling 交换的评论看来，您需要的是一种 maplist [/](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) 4

```
process_list(A, B, C) :-
   maplist(process_elem, A, B, C).

process_elem(A, B, C) :- C is A + B. % or whatever needed 
```

如果您正在使用索引，`process_elem`那么这是不合适的。然后递归访问列表，向下传递索引

```
process_list(A, B, C) :-
   process_list(1, A, B, C).
process_list(I, [A|As], [B|Bs], [C|Cs]) :-
   C is A + B * I, % or whatever needed
   J is I + 1,
   !, process_list(J, As, Bs, Cs).
process_list(_, [], [], []). 
```

**编辑**只是为了添加@Orbling建议的[问题](https://stackoverflow.com/questions/8519203/prolog-replace-an-element-in-a-list-at-a-specified-index)答案中公开的各种方式，这里是使用[nth0](http://www.swi-prolog.org/pldoc/man?predicate=nth0/4) / 4的方式

```
?- I = 6, nth0(I,"hello world",_,T), nth0(I,U,0'W,T), format('~s',[U]).
hello World 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:37:58.307

关于我们的对话，您可以将两个列表添加在一起，创建第三个列表，方法是指定源列表的两个头元素相加在一起，构成结果列表的头元素，并且这适用于其余的列表。

还需要一个基本情况，即当两个源列表为空时，结果列表也应为空。

```
addLists([X|A], [Y|B], [Z|C]) :- Z is X+Y, addLists(A, B, C).
addLists([], [], []). 
```

请记住，您的目标始终是指定答案的约束，而不是回答它的方法。Prolog 与其他编程语言非常不同，因为您不告诉它如何做某事，您只需告诉它答案为真的条件并让它推断它。

# user-interface - 自动调整 JavaFX 2 HTMLEditor 控件的大小

> ID：13458624
> 
> 赞同：1
> 
> 时间：2012-11-19T17:02:18.560
> 
> 标签：user-interface, javafx-2, rich-text-editor

我正在尝试使用 HTMLEditor 制作一个可编辑的控件（我想要一个像 Swing 的 JEditorPane 或 JTextPane 这样的富文本窗格，但似乎我需要等待几年）。我想让用户输入文本并且控件会变得适合。我尝试在滚动条出现时捕获一个事件并增加大小直到它消失，但我不知道如何等到 JavaFX 线程实际重新调整其父控件的大小。

可能有比这更好的方法......有什么想法吗？如果文本被删除，任何想法如何减少它？

TIA 迈克·沃茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:27:45.717

对于编辑控件，使用[contenteditable 设置为 true](http://html5doctor.com/the-contenteditable-attribute/)的 WebView ，如本[示例](https://stackoverflow.com/questions/10685395/webview-with-contenteditable-cannot-be-focused-programmatically)或[自定义 HTMLEditor](https://gist.github.com/2514709)。

使用类似于此[编辑器的](http://jewelsea.wordpress.com/2011/12/11/codemirror-based-code-editor-for-javafx/)[Java/JavaScript 桥](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)与其交互。您可以[使用 JQuery 编写 WebView 脚本](https://forums.oracle.com/forums/thread.jspa?messageID=10444280)。运行[时间轴](http://docs.oracle.com/javafx/2/api/javafx/animation/Timeline.html)，使用[JQuery 维度查询脚本](http://api.jquery.com/category/dimensions/)轮询编辑控件的文本维度，并[适当调整控件大小](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Control.html#setPrefSize(double,%20double))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:03:34.457

[旁注：我已经添加了这个作为答案，即使它只是来自jewelsea's的细节 - 我在回复评论时无法格式化代码]。

这在一定程度上起到了作用：

在 WebView 组件的 html 中，`<div id='measured'>`在所有文本块周围添加了一个标签

`setOnKeyPressed`使用和调用向 WebView 添加了一个处理程序`checkHeight()`

```
private int lastOffsetHeight;

private void checkHeight() {
    int newHeight = (Integer)webview.getEngine().executeScript(
            "document.getElementById(\"measured\").offsetHeight;") + 14;

    if (newHeight != lastOffsetHeight) {
        lastOffsetHeight = newHeight;
         webview.setPrefHeight(newHeight);
    }
} 
```

这还不错，主要问题是如果所有文本都被删除，那么 WebView 组件会删除 div。正如jewelsea 提到的，JQuery 可能是一个更好的解决方案，但如果我解决了包含库的问题，我会更新它;-)

# html - Twitter 引导程序错误？我的模态插件无法正常工作

> ID：13458627
> 
> 赞同：0
> 
> 时间：2012-11-19T17:02:29.620
> 
> 标签：html, twitter-bootstrap, tornado

我的页面代码中有这个 html 部分：

```
 </tr>
      {% for sens in sensors %}
      <td>
        <div class="sens_id">
          {{ sens.id }}
        </div></td>
      <td>
        <div class="sens_edit">
          <a href="/networks/{{ net.id }}/sensors/edit?id={{ sens.id }}"><i class="icon-pencil"></i></a>
        </div></td>
      <td>
        <div class="modal hide" id="myModal">
          <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3>Are you sure you want delete " {{ sens.name }} " ?</h3>
          </div>
          <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <a href="/networks/{{ net.id }}/sensors/delete?id={{ sens.id }}" class="btn btn-primary">Delete</a>
          </div>
        </div>

        <a data-toggle="modal" href="#myModal"><i class="icon-trash"></i></a>
    </div></td> 
```

这段代码，对于我网络中的每个传感器，制作一个包含传感器名称的表格，链接到编辑页面和垃圾桶图标以删除传感器。

但是这个链接

```
<a href="/networks/{{ net.id }}/sensors/delete?id={{ sens.id }}" class="btn btn-primary">Delete</a> 
```

始终删除列表的第一个传感器，例如 sens.id 始终相同。如果传感器用于 ex。200，与垃圾桶图标关联的模态插件始终删除列表顶部的传感器。

这是 twitter 引导程序的错误吗？我怎样才能解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:07:01.933

`id`在您的文档中是唯一的，因此通过为所有不同的模式对话框重复相同的 id，当您单击垃圾桶图标时，无法区分您打开的是哪一个。

每个模态对话框都需要一个唯一的 id。

```
<div class="modal hide" id="myModal_{{ sense.id }}"> 
```

和

```
<a data-toggle="modal" href="#myModal_{{ sense.id }}"><i class="icon-trash"></i></a> 
```

# ios - 从哪里调用 iOS 后台线程 - 堆栈内存溢出

> ID：13458631
> 
> 赞同：1
> 
> 时间：2012-11-19T17:02:56.260
> 
> 标签：ios, performance, instruments

我试图弄清楚为什么我的程序在某一时刻挂起。我非常了解我在主线程上进行的大量调用，但我不知道调度队列是什么，占了将近一半的时间。我如何追踪该呼叫的来源？下面是 Instruments 的截图：

![在此处输入图像描述](../Images/c717f4f62c3c9126a4e3885087dbbc3f.png)

# c++ - 字符串压缩算法

> ID：13458632
> 
> 赞同：2
> 
> 时间：2012-11-19T17:02:57.117
> 
> 标签：c++, compression

我一直想在 C++ 中压缩一个字符串并将其压缩状态显示到控制台。我一直在四处寻找东西，但到目前为止找不到合适的东西。我找到它最接近的事情是：

[如何使用 LZMA 简单地压缩 C++ 字符串](http://ptspts.blogspot.com/2011/11/how-to-simply-compress-c-string-with.html)

但是，我找不到在任何地方都可以使用的 lzma.h 标头。

基本上，我正在寻找这样的功能：

```
std::string compressString(std::string uncompressedString){
//Compression Code

return compressedString;
} 
```

压缩算法的选择并不重要。任何人都可以帮我找到这样的东西吗？先感谢您！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T17:29:34.387

根据文章中的指示，我相当肯定他们正在使用[XZ Utils](http://tukaani.org/xz/)，因此请下载该项目并使生成的库在您的项目中可用。

但是，有两个警告：

*   将压缩字符串转储到控制台不是很有用，因为该字符串将包含所有可能的字节值，其中大部分无法在控制台上显示
*   压缩短字符串（实际上是任何少量数据）并不是大多数通用压缩器的设计目的，在许多情况下，压缩结果将与输入一样大甚至更大。但是，我没有使用 LZMA 处理小数据量的经验，对您的用例进行数据代表的广泛测试将告诉您它是否按预期工作。

我一直在使用的一种算法可以对少量数据进行良好的压缩（在 300-500 字节大小的数据块上进行测试）是[范围编码](http://en.wikipedia.org/wiki/Range_encoding)。

# python - python 如何在每次循环迭代时生成新的随机数？

> ID：13458633
> 
> 赞同：2
> 
> 时间：2012-11-19T17:02:54.940
> 
> 标签：python

我编写了一个小数学测验，我需要将其插入一个循环（while..）以使其迭代用户想要的新时间。特别是，我如何让它在每次迭代时生成“新随机数”。我知道我可以插入一个控制变量，例如 keep_going = y 让用户决定是否继续。

请参阅下面的代码，感谢您的帮助！

```
import random

first_num = random.randint(1,500)
second_num = random.randint(1,500)

print (first_num)
print (second_num)

answer = int(input('Entrer la somme des deux nombres: '))

if answer == first_num + second_num:
    print("It's correct!")

else:
    print("It's wrong!") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:08:05.367

你需要的是一个[while 循环](http://en.wikipedia.org/wiki/While_loop)。这将永远循环，直到用户得到正确的问题，但你可以在这之后放置任何条件`while`，最终可能是错误的。

然后我使用`raw_input()`让用户确定是否继续。这是实现您的目标的众多方法之一。

```
import random

while True:

    first_num = random.randint(1,500)
    second_num = random.randint(1,500)

    print (first_num)
    print (second_num)

    answer = int(input('Entrer la somme des deux nombres: '))

    if answer == first_num + second_num:
        print("It's correct!")
        break
    else:
        print("It's wrong!")
        tryAgain = raw_input('Try again? [(y)/n] ')
        if tryAgain.lower() == 'n':
            break 
```

# php - 在 codeigniter 问题中使用 where 子句

> ID：13458636
> 
> 赞同：0
> 
> 时间：2012-11-19T17:03:10.033
> 
> 标签：php, codeigniter

我正在登录用户。因此，在用户输入电子邮件和密码后，我想检查具有该电子邮件和密码的用户是否存在。出于这个原因，我使用了两次 where 子句，但不知何故它不起作用。也许是因为我使用不正确。如何修复我的以下代码

```
$this->db->where('email', $this->input->post('email'));
$this->db->where('password', $pass . $salt); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:21:42.343

哪里工作正常，第二个是错误的，你传递了密码+盐，但你没有编码任何东西，只是连接它们。因此，如果您的密码是 bob 并且您的 salt 是胡椒，那么您将 bobpepper 作为密码字段传递给查询。

根据加密，您的代码应类似于以下内容：

```
 $password = md5($this->input->post('password'). $salt);  //swap the md5 for whatever encryption method you're using.
 $this->db->where('email', $this->input->post('email'));
 $this->db->where('password', $password); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:46:26.730

您不需要执行两次 where 子句。

```
public function login(){

    try
    {
        $user = $this->db->select()->where()->get(); // mysql query

        if( !$user)
            throw new Exception("User not found!");

        if( !$this->compare_password($this->input->post('password'), $user->password ) )
            throw new Exception("Passwords did not match!");
    }
    catch(Exception $e) 
    {
        $this->session->set_flashdata('error', $e->getMessage());
        log_message('error', $e->getMessage()); 
        redirect('/');
    }

    //we got this far so everything should be OK

    $this->session->set_flashdata('success', 'Login Successfull');
    redirect('dashboard');
} 
```

**注意：**您可能希望在生产模式下使用比这更好的密码哈希算法！！

```
protected function hash_password($password){
    return sha1( $pw . $this->config->item('encryption_key') );
}

protected function compare_password($pw, $dbpw){
    return ( sha1($pw . $this->config->item('encryption_key') ) === $dbpw )
} 
```

# sql - SQL Sum 当天的多个值

> ID：13458638
> 
> 赞同：3
> 
> 时间：2012-11-19T17:03:19.620
> 
> 标签：sql, sql-server, sql-server-2008

这是我的桌子

```
TIME                     Status
2012-11-15 8:30:00.000   "WAS_FLOW"
2012-11-15 9:00:00.000   "WAS_FLOW"
2012-11-15 10:30:00.000  "H2_FLOW"
2012-11-11 12:14:00.00   "O23HZ_FLOW"
2012-11-11 8:00.00.000   "AZ_FLOW"
2012-11-12 9:00.000      "BZ_FLOW" 
```

我希望我的结果显示：

```
TIME         "WAS FLOW"    
2012-11-11   0
2012-11-12   0
2012-11-15   2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:54:51.470

```
SELECT CAST(TIME AS date) AS TIME,
       COUNT(CASE WHEN Status = 'WAS_FLOW' THEN Status END) AS 'WAS_FLOW'
FROM dbo.your_table
GROUP BY CAST(TIME AS date) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/c9db8/1/0)上的演示[](http://sqlfiddle.com/#!3/c9db8/1/0)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:09:42.060

这里的其他答案都有轻微的故障。这是一个我希望能*直接*为你工作的。

```
SELECT
  DATEADD(DAY, DATEDIFF(DAY, 0, [time]), 0)             AS [date],
  SUM(CASE WHEN status = 'WAS_FLOW' THEN 1 ELSE 0 END)  AS [count]
FROM
  yourTable
GROUP BY
  DATEADD(DAY, DATEDIFF(DAY, 0, [time]), 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:09:27.267

试试下面：

```
 SELECT DISTINCT  CONVERT(VARCHAR(10), a.TIME, 101),
          CASE b.COUNT WHEN NULL THEN 0 ELSE b.COUNT END AS "WAS FLOW"
   FROM MyTable AS a 
       LEFT JOIN 
            (SELECT Count(STATUS) AS "COUNT"
             FROM MyTable
             WHERE Status = 'WAS_FLOW'
             GROUP BY Time
            ) AS b
   ON a.TIME= b.TIME; 
```**

# xslt - 使用 xslt 1.0 对多次出现的唯一元素进行分组

> ID：13458640
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:03:29.010
> 
> 标签：xslt, grouping

要求;

我必须发送独特的组作为高层的响应。

唯一性条件：

1.  如果两个`<partyfund>`组进入一个`<request>`组，并且每个`<partyfund>`组具有相同的元素和子组，则删除重复的`<partyfund>`组。

2.  如果一个`<fund>`组中有多个`<partyfund>`组，并且每个`<fund>`组具有相同的元素和子组，则删除重复`<fund>`组。

3.  如果一个`<fundcollection>`组中有多个`<fund>`组，并且每个`<fundcollection>`组具有相同的元素和子组，则删除重复`<fundcollection>`组。

4.  如果一个`<valuewithcode>`组中有多个`<fundcollection>`组，并且每个`<valuewithcode>`组具有相同的元素，则删除重复的组。

5.  组内`<fundcollection>`假设如果`<valuewithcode>`出现 2 次，`<valuecodeA>`并且组`<valuecodeB>`之间`<valuecodeC>`的任何一个有差异，`<valuewithcode>`那么两者都`<valuewithcode>`应该作为输出发送。

6.  为了唯一性，请确保它 `<partyfundcode>`及其关联组应该是唯一的。

`<fundclass>`并且`<funddate>`其关联组`<fund>`应该是唯一的。

`<fundcode>`并且它的关联组`<fundcollection>`应该是唯一的

`<valuecodeA> <valuecodeB> <valuecodeC>`并且它的关联组`<valuewithcode>`应该是唯一的

1.  应计算重复节点的数量。

    我试图解释这个要求。我也在示例 xml 上尝试了下面的代码并得到了结果，但它没有在`<fund>`级别上对元素进行分组。请帮助解决这个问题。

输入 XML：

```
<request>
    <party>
        <partyfund>
            <partyfundcode>PFC</partyfundcode>
            <fund>
                <fundclass>1</fundclass>
                <funddate>2001-01-01</funddate>
                <fundcollection>
                    <fundcode>CFL</fundcode>
                    <valuewithcode>
                        <amount>10</amount>
                        <valuecodeA>200012DS</valuecodeA>
                        <valuecodeB>200011GH</valuecodeB>
                        <valuecodeC>200014UT</valuecodeC>
                    </valuewithcode>
                </fundcollection>
                <fundcollection>
                    <fundcode>CFL</fundcode>
                    <valuewithcode>
                        <amount>10</amount>
                        <valuecodeA>200012DS</valuecodeA>
                        <valuecodeB>200011GH</valuecodeB>
                        <valuecodeC>200014UT</valuecodeC>
                    </valuewithcode>
                </fundcollection>
            </fund>
            <fund>
                <fundclass>1</fundclass>
                <funddate>2001-01-01</funddate>
                <fundcollection>
                    <fundcode>CFL</fundcode>
                    <valuewithcode>
                        <amount>10</amount>
                        <valuecodeA>200012DS</valuecodeA>
                        <valuecodeB>200011GH</valuecodeB>
                        <valuecodeC>200014UT</valuecodeC>
                    </valuewithcode>
                </fundcollection>
                <fundcollection>
                    <fundcode>CFL</fundcode>
                    <valuewithcode>
                        <amount>10</amount>
                        <valuecodeA>200012DS</valuecodeA>
                        <valuecodeB>200011GH</valuecodeB>
                        <valuecodeC>200014UT</valuecodeC>
                    </valuewithcode>
                </fundcollection>
            </fund>
            <fund>
                <fundclass>1</fundclass>
                <funddate>2001-01-01</funddate>
                <fundcollection>
                    <fundcode>CFL</fundcode>
                    <valuewithcode>
                        <amount>10</amount>
                        <valuecodeA>44444</valuecodeA>
                        <valuecodeB>200011GH</valuecodeB>
                        <valuecodeC>200014UT</valuecodeC>
                    </valuewithcode>
                </fundcollection>
                <fundcollection>
                    <fundcode>CFL</fundcode>
                    <valuewithcode>
                        <amount>10</amount>
                        <valuecodeA>200012DS</valuecodeA>
                        <valuecodeB>200011GH</valuecodeB>
                        <valuecodeC>200014UT</valuecodeC>
                    </valuewithcode>
                </fundcollection>
                <fundcollection>
                    <fundcode>CFL</fundcode>
                    <valuewithcode>
                        <amount>10</amount>
                        <valuecodeA>200012DS</valuecodeA>
                        <valuecodeB>200011GH</valuecodeB>
                        <valuecodeC>200014UT</valuecodeC>
                    </valuewithcode>
                </fundcollection>
            </fund>
        </partyfund>
    </party>
</request> 
```

**我的代码的实际输出**

```
 <request>
      <partyfund>
        <partyfundcode>PFC</partyfundcode>
        <fund>
          <fundclass>1</fundclass>
          <funddate>2001-01-01</funddate>
          <fundcollection>
            <fundcode>CFL</fundcode>
            <valuewithcode>
              <amount>40</amount>
              <valuecodeA>200012DS</valuecodeA>
              <valuecodeB>200011GH</valuecodeB>
              <valuecodeC>200014UT</valuecodeC>
            </valuewithcode>
          </fundcollection>
          <fundcollection>
            <fundcode>CFL</fundcode>
            <valuewithcode>
              <amount>10</amount>
              <valuecodeA>44444</valuecodeA>
              <valuecodeB>200011GH</valuecodeB>
              <valuecodeC>200014UT</valuecodeC>
            </valuewithcode>
          </fundcollection>
        </fund>
        <fund>
          <fundclass>1</fundclass>
          <funddate>2001-01-01</funddate>
        </fund>
        <fund>
          <fundclass>1</fundclass>
          <funddate>2001-01-01</funddate>
        </fund>
      </partyfund>
    </request> 
```

**预期结果应该是**

```
<request>
    <partyfund>
        <partyfundcode>PFC</partyfundcode>
        <fund>
            <fundclass>1</fundclass>
            <funddate>2001-01-01</funddate>
            <fundcollection>
                <fundcode>CFL</fundcode>
                <valuewithcode>
                    <amount>40</amount>
                    <valuecodeA>200012DS</valuecodeA>
                    <valuecodeB>200011GH</valuecodeB>
                    <valuecodeC>200014UT</valuecodeC>
                </valuewithcode>
            </fundcollection>
        </fund>
        <fund>
            <fundclass>1</fundclass>
            <funddate>2001-01-01</funddate>
            <fundcollection>
                <fundcode>CFL</fundcode>
                <valuewithcode>
                    <amount>10</amount>
                    <valuecodeA>44444</valuecodeA>
                    <valuecodeB>200011GH</valuecodeB>
                    <valuecodeC>200014UT</valuecodeC>
                </valuewithcode>
            </fundcollection>
            <fundcollection>
                <fundcode>CFL</fundcode>
                <valuewithcode>
                    <amount>20</amount>
                    <valuecodeA>200012DS</valuecodeA>
                    <valuecodeB>200011GH</valuecodeB>
                    <valuecodeC>200014UT</valuecodeC>
                </valuewithcode>
            </fundcollection>
        </fund>
    </partyfund>
</request> 
```

**用于转换的代码**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:key name="partyfund-check" match="partyfund" use="concat(partyfundcode,'+',fund)"/>
    <xsl:key name="fund-check" match="fund" use="concat(../partyfundcode,'+',funddate,'+',fundclass)"/>
    <xsl:key name="fundcollection-check" match="fundcollection" use="concat(../../partyfundcode,'+',../funddate,'+',../fundclass,'+',fundcode)"/>
    <xsl:key name="fundcollection-check1" match="fundcollection" use="concat(../../partyfundcode,'+',../funddate,'+',../fundclass,'+',fundcode,'+',.)"/>
    <xsl:key name="valuewithcode-check" match="valuewithcode" use="concat(../../../partyfundcode,'+',../../funddate,'+',../../fundclass,'+',../fundcode,'+',valuecodeA, '+', valuecodeB,'+',valuecodeC,'+',../../fundcollection)"/>

    <xsl:template match="/">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="party">

        <xsl:for-each select="partyfund[generate-id(.)=generate-id(key('partyfund-check',concat(partyfundcode,'+',fund))[1])]">
            <xsl:for-each select="key('partyfund-check',concat(partyfundcode,'+',fund))">
                <partyfund>
                    <xsl:copy-of select="partyfundcode"/>
                    <xsl:for-each select="fund[generate-id(.)=generate-id(key('fund-check',concat(../partyfundcode,'+',funddate,'+',fundclass))[1])]">
                        <xsl:for-each select="key('fund-check',concat(../partyfundcode,'+',funddate,'+',fundclass))">
                            <fund>
                                <xsl:copy-of select="fundclass"/>
                                <xsl:copy-of select="funddate"/>
                                <xsl:for-each select="fundcollection[generate-id(.)=generate-id(key('fundcollection-check',concat(../../partyfundcode,'+',../funddate,'+',../fundclass,'+',fundcode))[1])]">
                                    <xsl:for-each select="key('fundcollection-check',concat(../../partyfundcode,'+',../funddate,'+',../fundclass,'+',fundcode))[generate-id(.)=generate-id(key('fundcollection-check1',concat(../../partyfundcode,'+',../funddate,'+',../fundclass,'+',fundcode,'+',.))[1])]">
                                        <fundcollection>
                                            <xsl:copy-of select="fundcode"/>
                                            <xsl:for-each select="valuewithcode[generate-id(.)=generate-id(key('valuewithcode-check',concat(../../../partyfundcode,'+',../../funddate,'+',../../fundclass,'+',../fundcode,'+',valuecodeA, '+', valuecodeB,'+',valuecodeC,'+',../../fundcollection))[1])]">
                                                <xsl:for-each select="key('valuewithcode-check',concat(../../../partyfundcode,'+',../../funddate,'+',../../fundclass,'+',../fundcode,'+',valuecodeA, '+', valuecodeB,'+',valuecodeC,'+',../../fundcollection))[1]">
                                                    <valuewithcode>
                                                        <amount>
                                                            <xsl:value-of select="sum(key('valuewithcode-check',concat(../../../partyfundcode,'+',../../funddate,'+',../../fundclass,'+',../fundcode,'+',valuecodeA, '+', valuecodeB,'+',valuecodeC,'+',../../fundcollection))/amount)"/>
                                                        </amount>
                                                        <xsl:copy-of select="valuecodeA"/>
                                                        <xsl:copy-of select="valuecodeB"/>
                                                        <xsl:copy-of select="valuecodeC"/>
                                                    </valuewithcode>
                                                </xsl:for-each>
                                            </xsl:for-each>
                                        </fundcollection>
                                    </xsl:for-each>
                                </xsl:for-each>
                            </fund>
                        </xsl:for-each>
                    </xsl:for-each>
                </partyfund>
            </xsl:for-each>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:41:03.473

考虑生成一个密钥并使用像这个例子这样的组

[XSLT 中的分组](https://stackoverflow.com/questions/9740981/grouping-in-xslt)

这将帮助您选择唯一值等。

# c# - 如果 EnableOptimization 设置为 true，JS 包不会呈现

> ID：13458642
> 
> 赞同：21
> 
> 时间：2012-11-19T17:03:30.970
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我不知道我是否做错了什么，但这可能是 MVC4 中的一个错误。我想知道我该如何解决这个问题？

## 工作场景

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        ScriptBundle scriptBundle = new ScriptBundle("~/js");
        string[] scriptArray =
        {
            "~/content/plugins/jquery/jquery-1.8.2.min.js",
            "~/content/plugins/jquery/jquery-ui-1.9.0.min.js",
            "~/content/plugins/jquery/jquery.validate.min.js",
            "~/content/plugins/jquery/jquery.validate.unobtrusive.min.js",
            "~/content/plugins/bootstrap/js/bootstrap.min.js",
        };
        scriptBundle.Include(scriptArray);
        scriptBundle.IncludeDirectory("~/content/js", "*.js");
        bundles.Add(scriptBundle);

        BundleTable.EnableOptimizations = true;
    }
} 
```

`@Scripts.Render("~/js")`
*转换为（例如 IT WORKS！）*
`<script src="/js?v=VeCPNK561DZp34yjmWbLrNM35Kf6gaNDl0xsMMC25BQ1"></script>`

## 没有那么多工作场景

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        ScriptBundle scriptBundle = new ScriptBundle("~/js");
        string[] scriptArray =
        {
            "~/content/plugins/jquery/jquery-1.8.2.min.js",
            "~/content/plugins/jquery/jquery-ui-1.9.0.min.js",
            "~/content/plugins/jquery/jquery.validate.min.js",
            "~/content/plugins/jquery/jquery.validate.unobtrusive.min.js",
            "~/content/plugins/bootstrap/js/bootstrap.min.js",
        };
        scriptBundle.Include(scriptArray);
        scriptBundle.IncludeDirectory("~/content/js", "*.js");
        bundles.Add(scriptBundle);

        // BundleTable.EnableOptimizations = true; // I could set it to 'false' for same result, it's false by default
    }
} 
```

`@Scripts.Render("~/js")`
*转换为（例如它不起作用！）*
`(nothing, couple of empty break lines)`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-19T17:07:11.417

如果我的理解是正确的，您应该使用“非最小”JavaScript 文件定义您的捆绑包。当您启用优化时，它将为您交换非最小文件为最小文件：

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        ScriptBundle scriptBundle = new ScriptBundle("~/js");
        string[] scriptArray =
        {
            "~/content/plugins/jquery/jquery-1.8.2.js",
            "~/content/plugins/jquery/jquery-ui-1.9.0.js",
            "~/content/plugins/jquery/jquery.validate.js",
            "~/content/plugins/jquery/jquery.validate.unobtrusive.js",
            "~/content/plugins/bootstrap/js/bootstrap.js",
        };
        scriptBundle.Include(scriptArray);
        scriptBundle.IncludeDirectory("~/content/js", "*.js");
        bundles.Add(scriptBundle);
    }
} 
```

调试时优化设置为 false，但在发布模式下默认为 true。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-07T07:14:02.637

是的，它不适用于 *.min.js 之类的文件。

> “如果您将一个文件添加到您的包中，该文件的名称以 .min.js 结尾（就像我所做的那样）并且未启用优化（例如，在 web.config 中将调试设置为 true，并且尚未设置 BundleTable.EnableOptimizations为真），此文件将被忽略（即不会在您的 html 中为其生成脚本包含）。”

在这里您可以阅读完整的原始回复： [http ://blog.degree.no/2013/06/javascript-file-missing-resource-bundle-asp-net-web-optimization-framework/](http://blog.degree.no/2013/06/javascript-file-missing-resource-bundle-asp-net-web-optimization-framework/)

# django - 在 ModelChoiceField 上设置初始值在 __init__ 中不起作用

> ID：13458645
> 
> 赞同：0
> 
> 时间：2012-11-19T17:03:41.133
> 
> 标签：django, django-forms

在 Django 中，应该有两种方法来设置外键的初始值。我的第二种方法似乎对我不起作用，我不明白为什么：

**模型：**

```
class Task(models.Model):
    contact = models.ForeignKey(Contact, null=True, blank=True) 
```

***作品：***

**看法：**

```
form = TaskForm(contact, instance=task, prefix='form', initial = {'contact' : contact.pk}) 
```

**形式：**

```
class TaskForm(ModelForm):
    def __init__(self, contact, *args, **kwargs):
        super(TaskForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Task 
```

* * *

***不起作用*****：**

**看法：**

```
form = TaskForm(contact, instance=task, prefix='form') 
```

**形式：**

```
class TaskForm(ModelForm):
    def __init__(self, contact, *args, **kwargs):
        super(TaskForm, self).__init__(*args, **kwargs)
        if contact:        
            self.fields['contact'].initial = contact.pk

    class Meta:
        model = Task 
```

# ios - 无线部署 ios 应用程序。企业应用程序

> ID：13458650
> 
> 赞同：0
> 
> 时间：2012-11-19T17:03:59.690
> 
> 标签：ios, deployment, installation, enterprise, ipa

我在内部企业模式下开发了一个应用程序。在测试时，我使用的是我公司提供给我的 iPad。我对它进行了测试。我有开发者会员中心的证书。测试很好。

现在我已经在我们的安全服务器上部署了文件。我有一个链接，其中存在“.ipa”文件。因此，我使用了相同的测试 iPad，并通过 iPad 上的 safari 从该链接下载了该应用程序。它安装并成功运行。现在我把这个链接给了我团队的另一位成员，他有自己的 iPad。当他单击该链接时，它开始安装但没有完成。他收到一个错误。他收到的错误是

`"Unable to download Application.XYZ app could not be installed at this time. Done .Retry."`

与另一台 iPad 相同。这些 iPad 未在会员中心注册测试中。所以我有一个想法。由于在测试时我的测试 iPad 上都有证书，它可能已经识别并安装了它。但是其他全新的 iPad 没有被识别。那么我该怎么做呢？我怎么能说我的应用程序可以安全地安装在属于我同事的一般 iPad 上。如果我不清楚，请询问。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:44:15.540

bobnoble 是正确的。您需要有一个企业分发证书才能使用它。开发证书类似于临时证书，因为您需要单独标识将使用的设备 UDID。

我们与企业客户做了很多工作，我从不使用开发证书，主要是为了减少混乱。如果我们的一位开发人员变得粗鲁，这可能是个问题 :)，但这是我们愿意抓住的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:22:23.503

在 xcode 中，您可以在分配提供的配置文件时选择项目或目标。

确保签署目标。testflight 网站上有一个很好的教程：http: [//help.testflightapp.com/customer/portal/articles/494413-how-to-create-an-ipa-xcode-4-3-](http://help.testflightapp.com/customer/portal/articles/494413-how-to-create-an-ipa-xcode-4-3-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-06T09:55:06.663

您对分发证书和企业证书感到困惑。在您的情况下，您应该使用 Enterprise 或 Adhoc 证书。企业证书不是给个人而是给组织的，它不是在创建其他证书的地方创建的。

# r - 函数system.time()中=和<-操作符的区别

> ID：13458653
> 
> 赞同：2
> 
> 时间：2012-11-19T17:04:17.900
> 
> 标签：r, assignment-operator

我正在使用函数 system.time() 并且我发现了一些令我惊讶的东西。我经常使用分配符号“=”而不是“<-”。我知道大多数 R 用户使用“<-”，但我认为“=”在我的代码中更清晰。因此，我使用“=”在函数 system.line() 中分配一个值，并出现以下错误消息：Error: unexpected '=' in "system.time(a[,1] ="

这是代码：

```
a = matrix(1, nrow = 10000)

require(stats)
system.time(a[,1] = a[,1]*2) #this line doesn't work 
#Error: unexpected '=' in "system.time(a[,1] ="
system.time(a[,1] = a[,1]*2) #this line works
system.time(for(i in 1:100){a[,1] = a[,1]*i}) #this line works!!!! 
```

我发现：[“=”和“<-”之间是否存在技术差异，](https://stackoverflow.com/questions/6140694/is-there-a-technical-difference-between-and)这解释了我不能在函数中使用“=”进行分配，因为它是在函数中分配参数的符号。但我惊讶地发现它有时可以工作（见下面的代码）。

有谁知道它为什么在这里工作？（这也是为什么它在第一种情况下不起作用，因为我猜 a[,1] 不是函数 system.time() 的参数...）

非常感谢你。埃德温。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:12:38.530

将您的代码用`{ ... }`大括号括起来，它将起作用：

```
system.time({a[,1] = a[,1]*2})
   user  system elapsed 
      0       0       0 
```

* * *

从`?"<-"`

> 运算符 <- 和 = 分配到评估它们的环境中。运算符 <- 可以在任何地方使用，而运算符 = 只允许在顶层（例如，在命令提示符下键入的完整表达式中）或作为表达式括号列表中的子表达式之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T09:17:13.290

在`system.time(a[,1] = a[,1]*2)`等号中并不意味着赋值，它被解释为试图绑定一个“命名参数”；但`system.time`没有该名称的参数。

在`system.time(for(i in 1:100){a[,1] = a[,1]*i})`等号中确实是在做作业；这很好用。

如果你写`system.time(a[,1] <- a[,1]*2)`了`<-`只能表示赋值，而不是参数绑定，它就可以了！

但要小心！如果您写了`system.time(a[,1] < - a[,1]*2)`，它也“有效”，但可能不符合您的意思！

# jquery - 向这个 jQuery 添加活动类...？

> ID：13458654
> 
> 赞同：0
> 
> 时间：2012-11-19T17:04:27.513
> 
> 标签：jquery, toggle

我有一个简单的切换开关，它工作得很好，设法将它拼凑在一起，因为知之甚少或一无所知..

html..

```
<ul>
    <li id="menu-item-346" class="parents-toggle"><a href="#">Parent Button</a>

        <ul class="sub-menu">

            <li id="menu-item-347" class="parents-toggle-inner"><a href="#">Child Button</a>

            <ul class="sub-menu">
                <li id="menu-item-348" class="menu-item">Button</a></li>
                <li id="menu-item-349" class="menu-item">Button</a></li>
            </ul>
    </li>
</ul> 
```

jQuery....

```
 $(".parents-toggle > a").click(function () {
         $(".parents-toggle > ul.sub-menu").not($(this).siblings()).slideUp();
         $(this).siblings(".sub-menu").slideToggle();
      });

      $(".parents-toggle-inner > a").click(function () {
         $(".parents-toggle-inner > ul.sub-menu").not($(this).siblings()).slideUp();
         $(this).siblings(".sub-menu").slideToggle();
      }); 
```

当您单击按钮以折叠其菜单时，是否有可能将一个活动类添加到该特定按钮，以便当您单击并打开菜单时，按钮保持不同的颜色...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:08:40.033

`toggleClass()`当然，只需像这个**[jsFiddle 示例](http://jsfiddle.net/j08691/HQXvX/)**一样使用 jQuery 的函数。

```
$(".parents-toggle > a").click(function() {
    $(this).toggleClass('toggled');
    $(".parents-toggle > ul.sub-menu").not($(this).siblings()).slideUp();
    $(this).siblings(".sub-menu").slideToggle();
});

$(".parents-toggle-inner > a").click(function() {
    $(this).toggleClass('toggled');
    $(".parents-toggle-inner > ul.sub-menu").not($(this).siblings()).slideUp();
    $(this).siblings(".sub-menu").slideToggle();
});​ 
```

通过添加`$(this).toggleClass('toggled');`到您的函数中，您可以根据需要添加/删除类。

# mysql - 如何计算一个值出现在按天分组的列中的次数？

> ID：13458657
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:04:33.840
> 
> 标签：mysql

我的表结构是：

```
CREATE TABLE `survey` (
  `id` int(11) NOT NULL auto_increment,
  `submitdate` datetime default NULL,
 `answer` varchar(5) collate utf8_unicode_ci default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=499 ; 
```

这里`answer`包含a1、a2、a3等值。

我想根据答案计算最近 10 天的记录。如果某一天没有记录，它应该是零。

我想要的输出是

```
date         count answer
19-11-2012      10    a1
19-11-2012       8    a2
19-11-2012       0    a3
18-11-2012      30    a1
18-11-2012      30    a2
18-11-2012      30    a3 
```

我使用了类似的查询

```
SELECT days.day, count(survey.id)
FROM
  (select curdate() as day
   union select curdate() - interval 1 day
   union select curdate() - interval 2 day
   union select curdate() - interval 3 day
   union select curdate() - interval 4 day
   union select curdate() - interval 5 day
   union select curdate() - interval 6 day
   union select curdate() - interval 7 day
   union select curdate() - interval 8 day
   union select curdate() - interval 9 day) days
  left join survey
   on days.day = date(survey.submitdate)
group by
  days.day 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:11:12.380

您可以使用 SUBDATE 函数回顾 10 天，并使用“>”比较日期。您还需要按答案和日期分组，因为您正在尝试计算每天每个单独答案的计数。

```
SELECT DATE(submitdate) AS day
answer,
COUNT(*) AS answer_count
FROM survey
WHERE DATE(submitdate) > DATE(SUBDATE(CURRENT_DATE, 10))
GROUP BY day, answer; 
```

# c - 使用 C 开发 Linux 内核中的 TASK_UNINTERRUPTIBLE 和进程线程

> ID：13458661
> 
> 赞同：1
> 
> 时间：2012-11-19T17:04:43.673
> 
> 标签：c, linux, linux-kernel

我有一个正在运行的进程，它创建了多个用户模式线程。如果内核将进程的状态更改为`TASK_UNINTERRUPTIBLE`（或`TASK_INTERRUPTIBLE`）进程创建的线程是否会自动挂起？

这不是一个家庭作业问题。我正在阅读一本描述如何实现信号量的操作系统书籍。在他们的实现中，信号量结构维护当前等待信号量的进程的链表。从我目前了解到的情况来看，这样的信号量只能用于同步进程，而不是线程。正确的？链表中的线程进入一种`TASK_INTERRUPTIBLE`状态，直到信号量可用，此时通过将其状态设置为 来唤醒一个进程`TASK_RUNNING`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:19:59.827

`task`在 Linux 中，每个线程都是在进程范围内单独运行的。见`/proc/self/task/`。它们甚至是使用与新进程相同的内核函数创建的。Linux 中的线程起源于“轻量级进程”。每个任务都有一个唯一的任务 id ( `tid`)，类似于进程 id ( `pid`)，实际上主线程（执行 main() 的线程）与`tid`进程相同`pid`。

Linux 中线程和进程之间唯一的功能区别是所有线程（任务）共享所有进程资源，除了

*   调度参数（包括`TASK_UNINTERRUPTIBLE`, `TASK_INTERRUPTIBLE`）
*   堆
*   任务编号
*   线程`main()`标识进程

因此`TASK_INTERRUPTIBLE`可以单独应用于每个线程。

因此，信号量非常适合用于同步线程。在这种情况下，如果一个线程阻塞在一个信号量上，那就是那个线程。

# mysql - MySql 查询超慢

> ID：13458665
> 
> 赞同：0
> 
> 时间：2012-11-19T17:05:02.043
> 
> 标签：mysql, performance

我有以下超级慢的查询（仅需要 4-5 秒才能得到结果。我想知道是否有人可以看到我可以用这个查询做不同的事情来加快它的速度？

谢谢！

```
SELECT
accounts.id AS account_id,
accounts. NAME AS account_name,
accounts.assigned_user_id account_id_owner,
users.user_name AS assigned_user_name,
opportunities_cstm.firstname_c, opportunities_cstm.lastname_c,
opportunities.`name`, TRIM(
    Concat(
        Ifnull(
            opportunities_cstm.firstname_c,
            ''
        ),
        ' ',
        Ifnull(
            opportunities_cstm.lastname_c,
            ''
        )
    )
) AS 'cfull' FROM
opportunities 
LEFT JOIN users ON opportunities.assigned_user_id = users.id 
LEFT JOIN accounts_opportunities ON opportunities.id = accounts_opportunities.opportunity_id 
LEFT JOIN accounts ON accounts_opportunities.account_id = accounts.id
LEFT JOIN opportunities_cstm ON opportunities.id = opportunities_cstm.id_c
WHERE
(
    (
        opportunities.sales_stage IN (
            'Prospecting',
            'Appointment Set',
            'MeetAndGreet',
            'Qualification',
            'Needs Analysis',
            'Locating Vehicle',
            'Demo',
            'Trade Evaluation',
            'Negotiation',
            'Manager T/O',
            'Write Up',
            'Credit App Submitted',
            'Pending Finance',
            'Loan Approval',
            'Deposit',
            'Delayed Decision',
            'Sold-Vehicle Ordered',
            'Sold-Pending Finance',
            'Sold/Pending Delivery',
            'Price Quoted',
            'Service Pending'
        )
    )
)
AND (
accounts_opportunities.deleted IS NULL
OR accounts_opportunities.deleted = 0
)
AND (
accounts.deleted IS NULL
OR accounts.deleted = 0
)
AND opportunities.deleted = 0
ORDER BY
opportunities.date_entered DESC,
opportunities.id DESC
LIMIT 0,21 
```

这是来自同一查询的解释：

```
╔═════════════╦════════════════════════╦════════╦═ ═════════════════════════╦═════════════════════╦══ ═══════╦══════════════════════════════════════════ ══╦═══════╦═════════════════════════════╗
║ select_type ║ table ║ type ║ possible_keys ║ key ║ key_len ║ ref ║ rows ║ extra ║
╠═════════════╬════════════════════════╬════════╬═ ═════════════════════════╬═════════════════════╬══ ═══════╬══════════════════════════════════════════ ══╬═══════╬══════════════════════════════
║ 简单 ║ 机会 ║ 范围 ║ sales_stage, idx_deleted ║ sales_stage ║ 78 ║ null ║ 25161 ║ 使用where；使用文件排序║
║ 简单 ║ 用户 ║ eq_ref ║ PRIMARY, idx_id_deleted ║ PRIMARY ║ 108 ║ version4.opportunities.assigned_user_id ║ 1 ║ ║
║ simple ║ accounts_opportunities ║ ref ║ idx_oppid_del_accid ║ idx_oppid_del_accid ║ 111 ║ version4.opportunities.id ║ 1 ║ 使用 where；使用索引║
║ 简单 ║ 账户 ║ eq_ref ║ PRIMARY,idx_accnt_id_del ║ PRIMARY ║ 108 ║ version4.accounts_opportunities.account_id ║ 1 ║ 使用where ║
║ 简单 ║ 机会_cstm ║ eq_ref ║ 初级 ║ 初级 ║ 108 ║ version4.opportunities.id ║ 1 ║ ║
╚═════════════╩════════════════════════╩════════╩═ ═════════════════════════╩═════════════════════╩══ ═══════╩══════════════════════════════════════════ ══╩═══════╩═════════════════════════════╝

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:01:01.163

我看到两个问题。

首先，您使用了两个不同的`WHERE (... IS NULL OR ... = 0)`标准。那些慢得无法形容。这是因为索引对于查找 NULL 值没有用。如果您可以摆脱这些`deleted`列中 NULL 的可能性，也许通过声明它们，`NOT NULL DEFAULT 0`您可以将这些条件更改为`WHERE ... = 0`. 这应该加快很多事情。这是因为索引对于查找 NULL 值没有用。

其次，您正在创建一个很棒的大合并结果集，然后对其进行排序以查找最新项目。

在加入之前，您可以尝试从“机会”表中预先选择项目。做这样的事情：

```
SELECT   whatever....
FROM (
         SELECT * 
           FROM opportunities
          WHERE opportunities.deleted = 0
            AND opportunities.sales_stage IN (
            'Prospecting',
            'Appointment Set',  etc etc  ...
            'Service Pending' )
       ORDER BY opportunities.date_entered DESC,
                opportunities.id DESC
          LIMIT 0,21
      ) opportunities 
LEFT JOIN users ON opportunities.assigned_user_id = users.id
...
ORDER BY
opportunities.date_entered DESC,
opportunities.id DESC
LIMIT 0,21 
```

这很可能可以通过从联接的右侧删除一堆记录来减少 LEFT JOIN 操作的基数来加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:40:01.703

我不确定它会有所改善，但我会尝试的是：

```
SELECT your_fields
FROM
  (SELECT * --or just the fields you need
   FROM
     opportunities
   WHERE
     opportunities.deleted = 0 AND
     opportunities.sales_stage IN (stage1, stage2, ...)
  ) opportunities1
  LEFT JOIN users ON opportunities1.assigned_user_id = users.id 
  LEFT JOIN accounts_opportunities ON opportunities1.id = ...etc...
WHERE
  (accounts_opportunities.deleted IS NULL
   OR accounts_opportunities.deleted = 0)
  AND (accounts.deleted IS NULL OR accounts.deleted = 0)
ORDER BY ...etc... 
```

让我知道它是否有任何改进（但也可能会更慢）。另一个想法是使用一个包含您需要过滤的所有阶段的表：

```
CREATE TABLE filter_stage (
  stage varchar(255)); 
```

（255或尝试匹配sales_stage的实际长度，如果您也索引此列会更好）您输入所有要过滤的字符串：

```
INSERT INTO filter_stage VALUES ('Prospecting'), ('Appointment Set'), ('...'), ... 
```

然后你从你的第一个查询中删除你的 IN 子句，然后你的 FROM 变成：

```
FROM
  opportunities INNER JOIN filter_stage
  ON opportunities.sales_stage = filter_stage.stage
  LEFT JOIN ... 
```

让我知道它是否有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:08:28.190

不要使用 IN。IN 在 mysql 中运行缓慢，使用 Exists

```
DROP TABLE IF EXISTS tempTable;
CREATE TEMPORARY TABLE tempTable ( sales_stage VARCHAR(50) NOT NULL );
insert into tempTable () values ('Prospecting'),('Appointment Set'),('MeetAndGreet'),...,('Service Pending');

SELECT
...
WHERE EXISTS(select sales_stage from tempTable where opportunities.sales_stage = sales_stage); 
```

# google-bigquery - 在 BigQuery 的查询部分插入，使用 google-api-php-client

> ID：13458666
> 
> 赞同：0
> 
> 时间：2012-11-19T17:05:06.497
> 
> 标签：google-bigquery, google-api-client, google-api-php-client

我想在 php 脚本中使用 INSERT 命令在数据库中插入数千条记录，因为它更容易访问，但是[https://developers.google.com/bigquery/docs/query-reference](https://developers.google.com/bigquery/docs/query-reference)，这不显示 INSERT在 php 中查询时可以使用的命令，例如 $quert->setQuery("Insert into ... values...") ，已在 BigQuery Web 控制台的查询表中尝试过此操作，但似乎没有工作，无论如何使用 setQuery() 和其他命令来插入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:04:37.640

除了 Jordan 的回答之外，还有一段代码可以帮助您开始使用 Google BigQuery API 和[Google API PHP 客户端库](http://code.google.com/p/google-api-php-client/)以编程方式将您自己的数据加载到 BigQuery 中。请注意，此代码段只是将加载作业的原始 API 响应吐出，包括屏幕上的作业 ID - 您必须添加自己的轮询逻辑来检查加载作业状态。

*（我们将添加有关加载您自己的数据的其他文档，以及更多 PHP 示例）。*

```
<?php

require_once "google-api-php-client/src/Google_Client.php";
require_once "google-api-php-client/src/contrib/Google_BigqueryService.php";

session_start();

$client = new Google_Client();

// Visit https://code.google.com/apis/console to generate your
// oauth2_client_id, oauth2_client_secret, and to register your oauth2_redirect_uri.
$client->setScopes(array('https://www.googleapis.com/auth/bigquery'));
$client->setClientId('XXXXXXXXX.apps.googleusercontent.com');
$client->setClientSecret('XXXXXXXXX');
$client->setRedirectUri('http://YOURAPPLICATION/index.php');

// Instantiate a new BigQuery Client 
$bigqueryService = new Google_BigqueryService($client);

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

?>
<!doctype html>
<html>
<head>
  <title>BigQuery API Sample</title>
</head>
<body>
<div id='container'>
  <div id='top'><h1>BigQuery API Sample</h1></div>
  <div id='main'>
<?php

    if (isset($_GET['logout'])) {
      unset($_SESSION['token']);
    }

    if (isset($_GET['code'])) {
      $client->authenticate($_GET['code']);
      $_SESSION['token'] = $client->getAccessToken();
      header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
    }

    if (isset($_SESSION['token'])) {
      $client->setAccessToken($_SESSION['token']);
    }

    if ($client->getAccessToken()) {

        // Your project number, from the developers.google.com/console project you created
        // when signing up for BigQuery
        $project_number = 'XXXXXXXXXXXXXX';

        // Information about the destination table
        $destination_table = new Google_TableReference();
        $destination_table->setProjectId($project_number);
        $destination_table->setDatasetId('php_test');
        $destination_table->setTableId('my_new_table');

        // Information about the schema for your new table
        $schema_fields = array();
        $schema_fields[0] = new Google_TableFieldSchema();
        $schema_fields[0]->setName('first');
        $schema_fields[0]->setType('string');

        $schema_fields[1] = new Google_TableFieldSchema();
        $schema_fields[1]->setName('last');
        $schema_fields[1]->setType('string');        

        $destination_table_schema = new Google_TableSchema();
        $destination_table_schema->setFields($schema_fields);

        // Set the load configuration, including source file(s) and schema
        $load_configuration = new Google_JobConfigurationLoad();
        $load_configuration->setSourceUris(array('gs://YOUR_GOOGLE_CLOUD_STORAGE_BUCKET/file.csv'));
        $load_configuration->setDestinationTable($destination_table);
        $load_configuration->setSchema($destination_table_schema);

        $job_configuration = new Google_JobConfiguration();
        $job_configuration->setLoad($load_configuration);

        $load_job = new Google_Job();
        $load_job->setKind('load');        
        $load_job->setConfiguration($job_configuration);

        $jobs = $bigqueryService->jobs;
        $response = $jobs->insert($project_number, $load_job);

        echo '<pre>';
        print_r($response);
        echo '</pre>';

    $_SESSION['token'] = $client->getAccessToken();
    } else {
      $authUrl = $client->createAuthUrl();
      print "<a class='login' href='$authUrl'>Authorize Access to the BigQuery API</a>";
    }

?>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:13:57.537

BigQuery 不支持 INSERT 命令。您需要创建一个加载作业。有关详细信息，请参阅[https://developers.google.com/bigquery/docs/import#localimport](https://developers.google.com/bigquery/docs/import#localimport)。

# git - 将更改从 ftp 导入到 git

> ID：13458676
> 
> 赞同：1
> 
> 时间：2012-11-19T17:05:47.693
> 
> 标签：git, ftp, merge

我正在与几个开发人员一起做一个项目。目前他们都将他们的工作存储在一个 ftp 服务器上，并且他们没有使用任何 VCS。因此，我创建了自己的本地 git 存储库，这样我就可以了解更改的历史记录。

我合并所有内容的方式类似于[这个](https://stackoverflow.com/a/2943235/393805)答案。我有一个 ftp 代码的分支，然后我会从 ftp 下载最新的代码，然后我会提交并合并。我唯一的问题是它变得一团糟——我无法跟踪从 ftp 中删除了哪些文件。我只能看到新文件和更改的文件。

还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:15:51.820

Yes, there is a better solution. These other 'couple of developers' need to learn to use version control.

Whether it be Git, Mercurial, Bazaar, Subversion, or any of the paid vcs products (Perforce, etc.), there is no excuse for not using version control for any project.

There is even free, private hosting available for any of the above technologies.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T17:22:53.567

您可以使用一个新的工作目录来获取每个新副本，这样它就不会有任何已被删除的文件。然后将其与用于暂存`git add -A`文件以删除和使用`$GIT_DIR`环境变量相结合，以指定要使用的 git 存储库所在的位置。

```
git checkout ftp
mkdir /tmp/ftp
cd /tmp/ftp
# Get fresh copy of code from ftp server
GIT_DIR=~-/.git git add -A
GIT_DIR=~-/.git git commit
cd ~-
git reset --hard 
```

# jquery - jQuery XML 中的 HTML

> ID：13458682
> 
> 赞同：2
> 
> 时间：2012-11-19T17:06:01.503
> 
> 标签：jquery, html, xml

我的问题是我无法动态创建`<script>`. 有没有人有办法解决这个问题？我认为这是因为我正在尝试做一些 XML 最初无法做到的事情。我想知道我的 XML 是否需要更改，也许我需要在某个地方使用 html 调用，而不是感谢您的帮助。

```
$(document).ready(function(){
    $.get('js.xml', function(data){

        $(data).find('info').each(function(){

            var $info = $(this);
            var links = $info.find("scp");

            var html = '<script type="text/javascript" src="' + links + '"></script>';

            $('body').append($(html));

        });

    });

}); 
```

---------------------！！添加了 JSFIDDLE -------------------------------

[提琴手](http://jsfiddle.net/cornelas/fbXa8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:12:03.307

尝试使用`$.getScript`而不是将其附加到 DOM，例如：

```
$(document).ready(function(){
    $.get('js.xml', function(data){

        $(data).find('info').each(function(){

            var $info = $(this);
            var links = $info.find("scp");

            $.getScript(link);

        });

    });

}); 
```

您的 xml 文件似乎包含：

```
<location>
<info>
<scp>
<script type="text/javascript" src="https://www.printersmall.com/jqueryui/1.8.17/jquery.cookie.js"></script>
</scp>
</info>
</location> 
```

你的 xml 文件应该是这样的：

```
<location>
<info>
<scp>
    www.printersmall.com/jqueryui/1.8.17/jquery.cookie.js
</scp>
</info>
</location> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:13:02.180

`links`是一个 jQuery 对象，如果 scp 的内容是脚本源，那么你需要使用`.text()`它来获取它。

```
var links = $info.find("scp").text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:40:08.603

您不需要动态创建脚本标签。您只需要注入您的依赖项。我会推荐一个像 angular 这样的框架，但 getScript 也适用于 jQuery。将 getScript 之类的东西与依赖注入一起使用的问题在于，您的代码库最终不会具有良好的结构和模块化。您最终会得到紧密耦合的代码，这将导致长期问题。我建议使用 AngularJS 之类的东西来鼓励松散耦合。当您构建非常动态的软件时，这是一个大问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:10:50.137

我不是专家，但我认为不`data`一样`$(data)`

# objective-c - 当我按下返回按钮时如何控制导航控制器？

> ID：13458686
> 
> 赞同：0
> 
> 时间：2012-11-19T17:06:15.897
> 
> 标签：objective-c, xcode, storyboard

我无法使用导航控制器控制视图控制器上的某些变量。因此，当我按下后退按钮时，我想在该视图控制器上运行一个方法（函数），然后再转到前一个视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:15:25.013

You can either define a custom action for the back button, run your code, and then call `[UINavigationController popViewController:animated:]`, or you can set your code in `-viewWillDisappear:` if that's appropriate for what you're doing.

# gnuplot - 如何在 3d 图中沿顶部边界放置 tic 标记？

> ID：13458688
> 
> 赞同：3
> 
> 时间：2012-11-19T17:06:19.580
> 
> 标签：gnuplot

我在 Gnuplot 中制作了一些 3D 曲面图，在我的图的每个边界上都有 tic 标记会非常有用。在随附的示例图中，左上角或右上角水平边界（边界 256 和 512）上没有 tic 标记。为了在后面的垂直平面上绘制垂直网格线，我需要在这些边框上有 tic 标记。我怎样才能做到这一点？

![在此处输入图像描述](../Images/dfc7075474bc253876e9f2462c385594.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:12:39.957

我还没有找到使用`grid`and解决这个问题的方法`border`。但是，有一个相对简单的解决方法，它仅在您每次绘制数据时不更改范围时才有用。

基本上，您在后墙上绘制一个与 xy 平面中网格线的线型、数量和位置相匹配的恒定曲面。

首先，设置范围。我给它们贴上了标签，因为我们稍后会需要这些数字。

```
xmin=0    ; xmax = 100
ymin=0.01 ; ymax=1000
zmin=0    ; zmax=990
set xrange [xmin:xmax]
set yrange [ymin:ymax]
set zrange [zmin:zmax] 
```

设置 z 轴与 xy 平面 (ticslevel) 的交点，我猜到了一个视角以在视觉上与您的示例相匹配。我们想在之前设置这些`multiplot`。

```
set ticslevel 0.0
set view 60,45,1 
```

现在是乐趣。对于这一部分，您必须知道 xy 平面中的网格线数（与 x 和 y 轴上的主要抽动数相同）。我们将首先绘制后网格墙，因此它们最后位于您的数据/函数后面。另外，我关闭了这部分的网格和边框，但如果你把它们留在里面，它们应该完全重叠。

```
set multiplot
unset grid
set border 0 
```

即使 y 轴具有对数刻度，网格也是线性分离的（等距网格线）。所以此时我想要y轴上的线性比例。（如果您`set logscale y`在此之前，请将其注释掉。）我不想要 y 轴上的线性标签，因为它们在对数刻度上是不同的，所以我相应地设置了格式。

```
set format y ""
set isosamples 6,9 # - set this to number of tics on y-axis,z-axis 
```

这是在不同范围内绘图时唯一可能更改的手动设置。您需要将数字设置为`isosamples`y 轴、z 轴上的抽动数。

为了控制 gnuplot 将为每个表面使用多少行，我们需要设置 isosamples（在上面完成）和虚拟变量的范围`u,v`。注意线类型 0，它是网格线类型。我在 x = xmin 处绘制我的第一面墙：

```
set parametric
set urange [ymax:ymin]
set vrange [zmax:zmin]
splot xmin,u,v w lines lt 0 
```

同样，我们在 y = ymax 处做另一面墙。

```
set urange [xmin:xmax]
set vrange [zmin:zmax]
splot u,ymax,v w lines lt 0
unset parametric 
```

现在我有了墙，我可以绘制图片中已有的内容。设置边框，抽动，重新启用我们之前禁用的 y 轴标签，设置 y 轴上的对数刻度（现在是个好时机）并将 isosamples 重置为默认值。

```
set xtics mirror
set ytics mirror
set ztics mirror
set grid ytics xtics back
set logscale y
set format y " %g"
set isosamples 10,10 
```

并按照您的习惯绘制数据/功能。

```
splot 'data.txt' w lines
unset multiplot 
```

我们完成了......

可能的必要修改：
我猜你的 x 和 y 轴与我的不同，因为相反的东西很容易通过`view 60,135,1`. 不过，这也会切换 x 和 y。然后，您的表面将更改坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:56:57.390

您可以尝试使用和在那里*设置抽动*。这是**[Xtics](http://gnuplot.sourceforge.net/docs_4.2/node295.html)**的文档。`x2tics``y2tics`

# windows - Windows 8 MDM - 公司应用

> ID：13458695
> 
> 赞同：2
> 
> 时间：2012-11-19T17:06:58.780
> 
> 标签：windows, windows-8, windows-runtime, mdm

在浏览文章时“http://blogs.msdn.com/b/b8/archive/2012/04/19/managing-quot-byo-quot-pcs-in-the-enterprise-include-woa.aspx ”，我遇到了“代理然后执行服务查找以根据用户的电子邮件地址定位组织的管理基础架构”的声明。

我知道这是公司应用程序连接到组织网络的方式。问题是：

1.  这是什么服务？这是由组织开发和托管的东西吗？

2.  如果是，那么 Company App 将如何连接到此特定服务 URL 以进行注册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:11:00.083

可以使用[Windows Intune](http://www.microsoft.com/en-us/windows/windowsintune/pc-management.aspx)和[Microsoft System Center 2012 SP1](http://www.microsoft.com/en-us/server-cloud/system-center/configuration-manager-2012.aspx)管理 Windows RT 设备。Intune 是 Microsoft 的一项基于云的服务（每个用户每月 11 美元），而 SCCM 在您公司的网络中自托管。

由于目前没有关于 Microsoft 使用的协议的信息，因此很难判断未来是否可以实现自定义实现。他们很可能使用[Windows Phone 8 MDM 代理](http://download.microsoft.com/download/5/C/4/5C460CE2-3B0F-45CE-805D-1A3D5697639C/WP8_Enterprise_Device_Management_Protocol.pdf)( [OMA DM XML](http://en.wikipedia.org/wiki/OMA_Device_Management) ) 使用的类似协议。

查看[这篇文章](http://mobilitydojo.net/2012/12/20/windows-rt-mdm-first-impressions/)，了解如何使用 Windows Intune 管理 Windows RT 设备。

# php - Yii 模型规则（）方法不起作用

> ID：13458697
> 
> 赞同：0
> 
> 时间：2012-11-19T17:07:03.857
> 
> 标签：php, validation, yii, yii-validation

嗨，我的一个应用程序模型的 rules() 方法有问题。

### 这是规则（）：

```
public function rules() 
{ 
  $newRules = array(
    array('password_verification', 'required'),
    array('password_verification', 'length', 'min'=>6, 'max'=>32),
    array('password', 'compare', 'compareAttribute'=>'password_verification'),
    array('username, email', 'length', 'min'=>3,'max'=>255),
    array('password', 'length','min'=>6, 'max'=>32),
    array('username, email', 'unique'),
    array('email', 'email'),
    array('valid_until_formated','compare', 
          'compareAttribute'=>'valid_from_formated','operator'=>'>'),
    array('id, type,username, password, password_verification, email, valid_from, valid_until, valid_until_formated, valid_from_formated, added_on, created_by','safe'),
  );
} 
```

（对不起代码的格式）。

### 这就是问题所在：

我想测试“valid_until_formated”是否大于“valid_from_formated”。

当我用错误的值（valid_from 大于 vali_ until）提交我的表单时，我收到一条错误消息，我可以在 firebug 上看到它，但这些值已插入数据库中。

但是例如，如果我尝试使用已使用的用户名或字符数少于 6 的密码，那么我会遇到错误并且在数据库中没有创建任何内容？

有谁知道为什么这条规则不起作用（即使我收到一条错误消息）？（这是valid_until_formated的格式，例如：“20121118”）

感谢您阅读我，并为我的近似英语感到抱歉。

祝你有美好的一天 ：）

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:43:55.620

谢谢大家的回答。

实际上这是我做的一个转储错误。

我不知道 save() 方法调用了 validate() 方法。实际上我试图保存一个用户，但我不明白为什么我的 CustomUser 模型中的规则没有运行 - *_* -。

测试是在我的 User:rules() 上进行的，而我的 CustomUser::rules() 继承了我的 User::rules() ...无论如何我都这样解决了这个问题。

> if(myCustomUser->validate()){
> 
> 我的用户 = 新用户；
> 
> ……
> 
> 我的用户->保存（假）；
> 
> }

像这样，我可以使用我的 CustomUser 的验证规则创建一个用户。

谢谢，祝你有美好的一天:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T01:35:42.100

听起来您的值之间的比较没有按预期工作。

根据[CCompareValidator.php 文件](https://github.com/yiisoft/yii/blob/1.1.12/framework/validators/CCompareValidator.php)：

```
case '>':
    if($value<=$compareValue)
    {
            $message=$this->message!==null?$this->message:Yii::t('yii','{attribute} must be greater than "{compareValue}".');
            $this->addError($object,$attribute,$message,array('{compareAttribute}'=>$compareTo,'{compareValue}'=>$compareValue));
    }
    break; 
```

根据其工作方式，您的比较似乎是倒退的。如果你翻转你的`'>'`to会发生什么`'<'`？

# r - 在 R 中确定向量中的最小值

> ID：13458702
> 
> 赞同：6
> 
> 时间：2012-11-19T17:07:12.237
> 
> 标签：r

我需要一些帮助来确定向量中的多个最小值。假设，我有一个向量 x：

```
x<-c(1,10,2, 4, 100, 3) 
```

并想确定最小的 3 个元素的索引，即 1、2 和 3。我需要 的索引，因为我将使用索引来访问另一个向量中的相应元素。当然，排序会提供最小值，但我想在排序之前知道它们实际出现的索引。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T17:08:44.297

为了找到索引试试这个

```
which(x %in% sort(x)[1:3])  # this gives you and index vector
[1] 1 3 6 
```

这表示第一个、第三个和第六个元素是向量中的前三个最低值，看看这些是哪些值：

```
x[ which(x %in% sort(x)[1:3])]  # this gives the vector of values
[1] 1 2 3 
```

要不就

```
x[c(1,3,6)]
[1] 1 2 3 
```

如果您有任何重复值，您可能需要先选择唯一值，然后对它们进行排序以找到索引，就像这样（@Jeffrey Evans 在他的回答中建议）

```
which(x %in% sort(unique(x))[1:3]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T17:14:42.347

我想你的意思是你想知道底部 3 个元素的索引是什么？在这种情况下，你想要`order(x)[1:3]`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T17:17:20.647

You can use unique to account for duplicate minimum values.

```
x<-c(1,10,2,4,100,3,1)
which(x %in% sort(unique(x))[1:3]) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T17:25:51.030

这是另一种`rank`包含重复项的方法。

```
 x <- c(x, 3)
 # [1]   1  10   2   4 100   3   3
 which(rank(x, ties.method='min') <= 3)
 # [1] 1 3 6 7 
```

# node.js - 安装 iisnode 后所有应用程序出现 503“服务不可用”错误

> ID：13458710
> 
> 赞同：2
> 
> 时间：2012-11-19T17:07:27.910
> 
> 标签：node.js, iis-7, iisnode

在 Windows Server 2008 SP2（32 位）上安装**iisnode**后，所有以前运行的应用程序都报告“HTTP 错误 503。服务不可用”。这些应用程序都没有注册或使用 iisnode 模块。

应用程序池在处理它们的第一个请求后停止。事件日志将错误报告为 EventID 5002：

*“应用程序池‘DefaultAppPool’由于服务于该应用程序池的进程中的一系列故障而被自动禁用。”*

在该错误之前，有几个警告作为事件 ID 3139：

*“工作进程 '1688' 服务应用程序池 'DefaultAppPool' 中协议 'http' 的侦听器通道报告了侦听器通道故障。数据字段包含错误号。”*

我已授予 node.exe (v0.8.14) 以及 C:\Program Files\iisnode\iisnode.dll 的应用程序池标识读取/执行权限。

*如果我从 iis 中删除 iisnode 模块，则站点和应用程序池运行良好。*

关于如何解决这些错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:20:51.630

这是由于这个错误：[https](https://github.com/tjanczuk/iisnode/issues/231) ://github.com/tjanczuk/iisnode/issues/231 。该错误已经修复，带有修复的新版本 iisnode 将很快发布。

同时，您可以在 Windows Server 2008 R2 上使用 iisnode 0.2.0 或移回 iisnode 0.1.21。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-26T17:02:27.513

仅供在 Windows 事件查看器中收到此错误的任何人使用：

> 模块 DLL C:\Program Files\iisnode\iisnode.dll 加载失败。数据是错误的。

但不使用 Node，我的解决方案是简单地编辑`C:\Windows\System32\inetsrv\config\applicationHost.config`文件并删除所有引用的行`iisnode`（有 2 行）。

本质上，我们已经将旧的 IIS 服务器同步到新的服务器以迁移代码，旧的服务器安装了 IISNode，但新的没有。由于应用程序实际上并不需要 IISNode，因此只需从 IIS 配置中删除对它的引用即可为我们解决问题。

# android - iText：在 android 中创建 pdf 文件时遇到问题

> ID：13458716
> 
> 赞同：0
> 
> 时间：2012-11-19T17:07:53.627
> 
> 标签：android, pdf, itext

iText 在 android 中创建 pdf 文件时遇到问题。它不断崩溃，并且此错误不断出现在 log cat 中：

`java.lang.NoClassDefFoundError: com.itextpdf.text.Document`

这是我的java文件：

```
import java.io.FileNotFoundException;
import java.io.FileOutputStream;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;

public class MainActivity extends Activity {

public static Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    button = (Button) findViewById(R.id.Submit);

    button.setOnClickListener(new OnClickListener() 
    {           
        public void onClick(View arg0) 
        {
            // TODO Auto-generated method stub

            toPDF();

        }
    });
}

public void toPDF(){

    Document document=new Document();
    try {
        PdfWriter.getInstance(document,new FileOutputStream("try.pdf"));
        document.open();
        document.add(new Paragraph("Hello Android!! :)"));
        document.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (DocumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
 } 
```

我已经包含`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>`在 AndroidManifest.xml 中

这是我的.classpath ..

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
     <classpathentry kind="src" path="src"/>
     <classpathentry kind="src" path="gen"/>
     <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
     <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itextpdf-5.3.4.jar"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itextpdf-5.3.4-javadoc.jar"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itextpdf-5.3.4-sources.jar"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itext-pdfa-5.3.4.jar"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itext-pdfa-5.3.4-javadoc.jar"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itext-pdfa-5.3.4-sources.jar"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itext-xtra-5.3.4.jar"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itext-xtra-5.3.4-javadoc.jar"/>
     <classpathentry kind="lib" path="C:/Users/joan/Documents/Eclipse Workspace/itext-5.3.4/itext-xtra-5.3.4-sources.jar"/>
     <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

我也尝试插入 SD 卡，因为有人说这可能是问题，但它仍然崩溃了......

希望任何人都可以帮助我..我是android的新手.. :|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:26:11.683

您会收到此错误的原因只有三个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在 /libs 文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于 /libs 中。将其放在那里并将其重新添加到构建路径中。

大多数情况下，出现此类错误是因为较新版本的 ADT 要求所有外部 jar 都位于 libs 文件夹中。您的同事可能与您使用的版本不同，因此出现了错误。

在您的情况下，只需将所有必要的 jar 文件`itext-5.3.4`从`libs`.

# java - 空格分隔的字符串java所需的正则表达式

> ID：13458723
> 
> 赞同：0
> 
> 时间：2012-11-19T17:08:16.717
> 
> 标签：java, regex, boost-regex, regex-greedy, regex-lookarounds

我有一个处理许多空格分隔字符串的操作，我正在为字符串匹配函数寻找一个正则表达式，如果第一个空格之前的前两个字符串以大写字母开头，它将触发传递，如果不是，则返回 false。

例子：

```
"AL_RIT_121 PA_YT_32 rit cell 22 pulse" 
```

将作为前两个子字符串返回 true，并分别以大写字母`AL_RIT_121`和`PA_YT_32`开头`A``P`

```
"AL_RIT_252 pa_YT_21 mal cell reg 32 1 ri" 
```

将`p`在小写中返回 false。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T17:10:35.947

```
Pattern.compile("^\\p{Lu}\\S*\\s+\\p{Lu}") 
```

将使用该`.find()`方法。没有理由`matches`在前缀测试中使用，但如果您有外部约束，只需执行

```
Pattern.compile("^\\p{Lu}\\S*\\s+\\p{Lu}.*", Pattern.DOTALL) 
```

要打破这一点：

1.  `^`匹配字符串的开头，
2.  `\\p{Lu}`匹配任何大写字母，
3.  `\\S*`匹配零个或多个非空格字符，包括`_`
4.  `\\s+`匹配一个或多个空格字符，并且
5.  第二个`\\p{Lu}`匹配开始第二个单词的大写字母。

在第二个变体中，`.*`结合`Pattern.DOTALL`匹配输入的其余部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T17:11:06.453

简单地`string.matches("[A-Z]\\w+ [A-Z].*")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:27:30.633

看一下这个：

```
 public static void main(String[] args) 
{
    String text = "AL_RIT_121 pA_YT_32 rit cell 22 pulse";

    boolean areFirstTwoWordsCapitalized = areFirstTwoWordsCapitalized(text);

    System.out.println("areFirstTwoWordsCapitalized = <" + areFirstTwoWordsCapitalized + ">");

}

private static boolean areFirstTwoWordsCapitalized(String text)
{
    boolean rslt = false;

    String[] words = text.split("\\s");

    int wordIndx = 0;

    boolean frstWordCap = false;
    boolean scndWordCap = false;

    for(String word : words)
    {
        wordIndx++;

        //System.out.println("word = <" + word + ">");

        Pattern ptrn = Pattern.compile("^[A-Z].+");

        Matcher mtchr = ptrn.matcher(word);

        while(mtchr.find())
        {
            String match = mtchr.group();

            //System.out.println("\tMatch = <" + match + ">");

            if(wordIndx == 1)
            {
                frstWordCap = true;
            }
            else if(wordIndx == 2)
            {
                scndWordCap = true;
            }
        }
    }

    rslt = frstWordCap && scndWordCap;

    return rslt;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T17:15:15.187

You can use a specific regex if those two examples demonstrate your input format:

```
^(?:[A-Z]+_[A-Z]+_\d+\s*)+ 
```

Which means:

```
^           - Match the beginning of the string
(?:         - Start a non-capturing group (used to repeat the following)
    [A-Z]+  - Match one or more uppercase characters
    _       - Match an underscore
    [A-Z]+  - Match one or more uppercase characters
    _       - Match an underscore
    \d+     - Match one or more decimals (0-9)
    \s*     - Match zero or more space characters
)+          - Repeat the above group one or more times 
```

You would use it in Java like this:

```
Pattern pattern = Pattern.compile("^(?:[A-Z]+_[A-Z]+_\\d+\\s*)+");
Matcher matcher = p.matcher( inputString);
if( matcher.matches()) {
    System.out.println( "Match found.");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T17:51:45.130

尝试这个：

```
public class RegularExp 
{

    /**
     * @param args
     */
    public static void main(String[] args) {
        String regex = "[A-Z][^\\s.]*\\s[A-Z].*";
        String str = "APzsnnm lmn Dlld";
        System.out.println(str.matches(regex));

    }

} 
```

# python-3.x - Python未能找到所有重复项

> ID：13458724
> 
> 赞同：0
> 
> 时间：2012-11-19T17:08:22.713
> 
> 标签：python-3.x, random-sample

这与随机抽样有关。我正在使用 random.sample(number,5) 从数字中包含的数字范围内返回随机数列表。我使用 while i < 100 返回一百组五个数字。要检查重复项，我正在使用：

```
if len(numbers) != len(set(numbers)): 
```

识别具有重复项的集合，然后使用 random.sample(number,5) 尝试进行另一次随机化以将集合替换为重复项。我似乎得到了大约 8% 的重新随机分配（使用打印语句来说明哪个数字被重复），但似乎遗漏了大约 5%。我做错了什么？实际代码如下：

```
while i < 100:
    set1 = random.sample(numbers1,5)
if len(set1) != len(set(set1))
    print('duplicate(s) found, random selection repeated')
set1 = random.sample(numbers1,5) 
```

在另一个例程中，我尝试执行与上述相同的操作，但通过添加相同的集合来搜索两组中的重复项，并将 set2 替换为 set1。这给出了相同类型的故障。set2 例程缩进并放置在上述例程的正下方。而 i < 100: 对于 set2 不重复。我希望我已经清楚地解释了我的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:26:26.577

您的代码中没有任何内容可以阻止第二个样本重复。如果你做了类似第二个while循环的事情怎么办？

```
while i<100:
    i+=1
    set1 = random.sample(numbers1,5)
    while len(set1) != len(set(set1)):
        print('duplicate(s) found, random selection repeated')
        set1 = random.sample(numbers1,5) 
```

当然，您仍然缺少执行某些操作的代码部分……除此之外，如果没有完整的代码示例，很难说出您可能需要更改的内容。

编辑：这是来自评论的代码示例的工作版本：

```
def choose_random(list1,n):
    import random 
    i = 0 
    set_list=[]
    major_numbers=range(1,50) + list1
    print(major_numbers) 
    while i <n: 
        set1 =random.sample(major_numbers,5) 
        set2 =random.sample(major_numbers,2) 
        while len(set(set1)) != len(set1):
            print("Duplicate found at %i"%i)
            print set1
            print("Changing to:")
            set1 =random.sample(major_numbers,5) 
            print set1
        set_list.append([set1,set2])
        i +=1
    return set_list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:49:36.613

您提供的代码显然有一些差距并且无法按原样工作，因此我无法确定您的错误到底在哪里，但是`set1 = random.sample(numbers1,5)`在循环结束后运行`while`（如果按照您的问题写成无限）会撤消您的所有操作以前做过，因为它会覆盖您设法设置`set1`的任何内容。

无论如何，`random.sample`应该给你一个无需更换的样品。如果你有任何重复，`random.sample(numbers1, 5)`那意味着你已经有重复`numbers1`。如果不应该是这种情况，您应该检查的内容`numbers1`并可能强制它包含唯一的所有内容，例如通过使用`set(numbers1)`。

如果原因是你想要一些`numbers1`更高概率的元素，你可能想把它作为

```
set1 = random.sample(numbers1, 5)
while len(set1) != len(set(set1)):
    set1 = random.sample(numbers1, 5) 
```

这可能是一个无限循环，但如果`numbers1`包含至少 5 个不同的元素，它将在某个时候退出循环。如果您不喜欢这个循环永远不会退出的理论可能性，您可能应该使用加权样本而不是`random.sample`, （在 stackoverflow 上有一些如何做到这一点的示例）并删除您已经从权重表。

# math - 按位与 x&y=z, x =?

> ID：13458725
> 
> 赞同：1
> 
> 时间：2012-11-19T17:08:24.383
> 
> 标签：math, bit-manipulation, bitwise-operators

只是一个关于按位运算符 & 的快速问题。

如果知道`x & y == z`并且我知道 的值，`y`有`z`没有办法可以计算 的值`x`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T17:10:17.803

如果您被告知*x是唯一的，那么不，对于**y*的任意值，没有办法做到这一点。否则，该方程有 2 ^(n 个)不同的解，其中*n是**y*的零位数。

例如，让我们考虑一位数字。如果*y*为 1，则*x*的值必须与*z*相同（1&1 = 1；0&1 = 0）。如果*y*为零，*z*也将为零，*x*可以是 1 或 0 (0&0 = 0; 1&0 = 0)。

在多位数上，*y上的每个零位使**x*的可能值的数量加倍，因此 2 ^n

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T17:10:32.920

不，简单的例子

```
0&0 = 0
1&0 = 0 
```

# scala - Stackoverflow 与 scala specs2

> ID：13458727
> 
> 赞同：0
> 
> 时间：2012-11-19T17:08:33.127
> 
> 标签：scala, testing, playframework-2.0, stack-overflow, specs2

我目前正在使用 specs2 库为 scala 中的播放应用程序编写一些单元测试。在编译过程中，我经常遇到堆栈溢出错误。我已将链拆分为多个测试，但有些测试非常大并且错误仍然存​​在......我没有成功更改堆栈的大小（或者错误仍然存​​在，即使我输入了一个巨大的值，并且修改系统限制）。有人有想法吗？问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:33:18.547

这个问题是specs2设计中固有的。您可能想尝试 ScalaTest。它没有问题。除此之外，您需要增加筹码量。你说你试过了，所以要么没用，要么你增加得不够。不知道你是如何编译的，但要让 scalac 增加它的堆栈大小，你可以在编译之前尝试这样的事情：

JAVA_OPTS="-server -Xmx4096M -Xms256M -Xss20M" 导出 JAVA_OPTS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T06:40:40.853

您现在可以使用[字符串插值](http://etorreborre.blogspot.com.au/2013/05/the-latest-release-of-specs2-2.html)并且不再有任何编译问题。

# sql - 来自 2 个单独的表的 COUNT

> ID：13458728
> 
> 赞同：0
> 
> 时间：2012-11-19T17:08:34.393
> 
> 标签：sql, sql-server

我有两个表，其中包含需要计数的数据

登录历史和登录尝试

一种是不包括登录尝试的登录历史表。

Login History 的主键是 REF_ID，但也包含 Customer_ID。Login Attempts 表还包括 Customer_ID

我正在尝试获取特定 Customer_id 的登录尝试次数和登录历史记录。我得到了一个 Customer_ID 的列表并将它们放在一个临时表“#a”中这是我试图用来获取这个计数的查询。

```
SELECT COUNT (la.customer_ID) as login_attempts FROM
LOGIN_ATTEMPTS la
JOIN LOGIN_HISTORY lh
on la.Customer_ID = lh.customer_ID
where la.customer_ID in (select Customer_ID from #a)group by la.customer_ID 
```

我需要的结果集是 Customer_ID，以及每个客户的登录尝试次数和旁边的历史记录。我尝试了几种不同的方法，但我的 GROUP BY 或 COUNT 语法总是以错误告终。

我还假设我可以在这里的某个地方添加一个 SUM 函数，但我不确定我需要如何构建它。我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:21:53.550

```
Select customer_ID
,(Select Count(*) from LOGIN_ATTEMPTS l where l.customer_ID=a#.ID) as [LOGIN_ATTEMPTS]
,(Select Count(*) from LOGIN_HISTORY h where h.customer_ID=a#.ID) as [LOGIN_HISTORY]
from a# 
```

并且不使用#

```
Select customer_ID
,(Select Count(*) from LOGIN_ATTEMPTS l where l.customer_ID=a2.ID) as [LOGIN_ATTEMPTS]
,(Select Count(*) from LOGIN_HISTORY h where h.customer_ID=a2.ID) as [LOGIN_HISTORY]
( 
Select Distinct customer_ID from
(
select customer_ID from LOGIN_ATTEMPTS
union
select customer_ID from LOGIN_HISTORY
) a1
)a2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:15:18.117

```
SELECT 
  COUNT (*)  AS Attempts, 
   la.Customer_ID 
FROM
  LOGIN_ATTEMPTS la
JOIN 
   LOGIN_HISTORY lh
on la.Customer_ID = lh.customer_ID
where 
   la.customer_ID in (select Customer_ID from #a)
group by 
   la.customer_ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:13:39.617

这是@bummi 第二种方法的变体，没有额外的子查询：

```
Select customer_ID,
       sum(case when ltype = 'A' then 1 else 0 end) as LoginAttempts,
       sum(case when ltype = 'H' then 1 else 0 end) as LoginHistory
from ((select 'A' as ltype, customer_ID
       from LOGIN_ATTEMPTS
      ) union all
      (select 'H' as ltype, customer_id
       from LOGIN_HISTORY
      ) 
     ) l
where customer_Id in (select Customer_Id from #A)
group by customer_Id 
```

# android - java.lang.RuntimeException：无法启动活动 ComponentInfo{myActivityPathName}：java.lang.NullPointerException

> ID：13458731
> 
> 赞同：0
> 
> 时间：2012-11-19T17:08:53.040
> 
> 标签：android, android-activity

我知道周围有类似的问题，但所有答案都是针对这些应用程序的。请帮忙。这是我有问题的活动的代码

```
 public class MainActivity extends Activity implements OnClickListener
{
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
ViewFlipper flipper;
private GestureDetector gestureDetector;
static View passedView;
static String folderName = "myOffice";
static String folderPath = Environment.getExternalStorageDirectory() + "/" + folderName;

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    flipper = (ViewFlipper)findViewById(R.id.viewFlipper1);
    flipper.setOnClickListener(this);
    Button button1_1 = (Button)findViewById(R.id.button1_1);
    button1_1.setOnClickListener(this);
    Button button1_2 = (Button)findViewById(R.id.button1_2);
    button1_2.setOnClickListener(this);
    Button button3 = (Button)findViewById(R.id.button3);
    button3.setOnClickListener(this);
    Button newDoc = (Button)findViewById(R.id.newDoc);
    newDoc.setOnClickListener(this);
    listTest();
    gestureDetector = new GestureDetector(new MyGestureDetector());
    View mainview = (View) findViewById(R.id.viewFlipper1);

    // Set the touch listener for the main view to be our custom gesture listener
    mainview.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) 
        {
            if (gestureDetector.onTouchEvent(event)) 
            {
                return true;
            }
            return false;
        }
    });
}

public static void checkForDirectory() 
{
    File folder = new File(folderPath);
    if (folder.exists() == false) 
    {
        folder.mkdir();
    }       
}

public String[] getFiles() 
{
    String[] fileNames;
    File f = new File(folderPath);
    File[] files = f.listFiles();
    if (files.length == 0)
    {
        return null;
    }
    else 
    {
        fileNames = new String[files.length];
        for (int i=0; i < files.length; i++) 
        {
            fileNames[i] = files[i].getName();
        }
        return fileNames;
    }       
}

public void listTest()
{
    final ListView listView;
    String[] filesInFolder = getFiles();
    listView = (ListView)findViewById(R.id.listView1);
    listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, filesInFolder));
    listView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() 
    {
        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View v, int position, long id) 
        {
            TextView tv = (TextView)v;
            String fName = (String) tv.getText();
            File file = new File(folderPath, fName);
            showDeletedToast();
            return file.delete();               
        }

        private void showDeletedToast() 
        {
            Toast toast = Toast.makeText(getApplicationContext(), "File deleted, Will be removed from the list.", Toast.LENGTH_LONG);
            toast.show();
        }
    });

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
        {
            Intent intent = new Intent(getApplicationContext(), TextActivity.class);
            startActivity(intent);
            passedView = TextActivity.getView(v);
        }               
    }); 
    listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, filesInFolder));

}   

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v)
{   
    if (v.getId()==  R.id.button1_1) 
    {
        flipper.showNext();
    }
    else if(v.getId()==  R.id.button1_2)
    {
        flipper.showNext();
        flipper.showNext();
    }
    else if(v.getId()== R.id.newDoc)
    {
        Intent intent = new Intent(this, TextActivity.class);
        startActivity(intent);
    }
}

class MyGestureDetector extends SimpleOnGestureListener 
{
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) 
    {
        if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
        {
            return false;
        }

        // right to left swipe
        if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
        {
            flipper.showNext();
            MainActivity.this.overridePendingTransition(
                    R.anim.slide_in_right,
                    R.anim.slide_out_left
                    );
            // left to right swipe
        } 
        else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
        {
            flipper.showPrevious();
            MainActivity.this.overridePendingTransition(
                    R.anim.slide_in_left, 
                    R.anim.slide_out_right
                    );
        }

        return false;
    }

    // It is necessary to return true from onDown for the onFling event to register
    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
} 
```

}

为什么会发生这种情况，如何解决这个问题？LogCat 输出：

```
11-19 22:55:58.730: E/AndroidRuntime(10964): FATAL EXCEPTION: main
11-19 22:55:58.730: E/AndroidRuntime(10964): java.lang.RuntimeException: Unable to start                                                        activity ComponentInfo{com.illuminatiRN.myOffice/com.illuminatiRN.myOffice.MainActivity}:   java.lang.NullPointerException
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1818)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.app.ActivityThread.access$500(ActivityThread.java:122)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.os.Looper.loop(Looper.java:132)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.app.ActivityThread.main(ActivityThread.java:4126)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at java.lang.reflect.Method.invokeNative(Native Method)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at java.lang.reflect.Method.invoke(Method.java:491)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at dalvik.system.NativeStart.main(Native Method)
11-19 22:55:58.730: E/AndroidRuntime(10964): Caused by: java.lang.NullPointerException
11-19 22:55:58.730: E/AndroidRuntime(10964):    at java.util.Arrays$ArrayList.<init>(Arrays.java:47)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at java.util.Arrays.asList(Arrays.java:163)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:128)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at com.illuminatiRN.myOffice.MainActivity.listTest(MainActivity.java:100)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at com.illuminatiRN.myOffice.MainActivity.onCreate(MainActivity.java:49)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
11-19 22:55:58.730: E/AndroidRuntime(10964):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:00:08.423

您传递给is的*filesInFolder* 数组将抛出您在堆栈跟踪中看到的。确保此数组（*filesInFolder*）**不为 null**。当您从该方法返回该数组时，请修改它以便返回一个空数组 if is 。`String``ArrayAdapter``null``NullPointerException`***`getFiles()``files.length``0`***

# xml - 在 XSLT 中创建 Href 锚点

> ID：13458739
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:09:22.470
> 
> 标签：xml, xslt, fancybox-2

我有一些指向模态灯箱的隐藏 div 的链接。在我的 XML 中，我没有定义灯箱。我只是创建了一些在选中时弹出灯箱的条件。

当 chrome 通过链接访问灯箱时，它们会在我的 xsl 中正常弹出。但是，Internet Explorer 和 Firefox 不会生成“#links”的绝对 URL，因此浏览器在读取它时会遇到问题。

我需要将 href 链接转换为适当的 xslt。我的代码如下：

```
 <xsl:choose>
       <xsl:when test="EnableLightbox5 ='true'">
       <div class="webbuttons" id="athletics"><a class="fancybox" href="#athleticsbtn">
       <img src="images/{Button5}" /></a>
       </div></xsl:when>

       <xsl:when test="EnableLightbox5 ='false'">
       <div class="webbuttons" id="athletics">
       <a class="fancybox" href="{Page[@Name = 'Button5Link']/@URL}">
       <img src="images/{Button5}" /></a>
       </div></xsl:when>
 </xsl:choose> 
```

如果我的锚点不是 XML 中的元素，我将如何生成指向锚定 div 的 href 链接？即#athletisbtn

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:16:15.850

href to anchor probably need a BASE tag in the document HEAD element.

```
<base href="http://yourdomain.com/" /> 
```

See also SO post [anchor a + Link to base URL](https://stackoverflow.com/questions/7578620/anchor-a-link-to-base-url)

This is if you need to add the anchor to the 'false' case:

```
href="{concat(Page[@Name = 'Button5Link']/@URL, '#athleticsbtn')}" 
```

# grid - 网格数据和极坐标图

> ID：13458744
> 
> 赞同：2
> 
> 时间：2012-11-19T17:09:53.390
> 
> 标签：grid, matplotlib, interpolation

我正在使用 matplotlib 将一些数据拟合到网格并将其绘制为极坐标投影。类似于下面的示例。但是，我希望它在绘图边缘以 0/360 度相交的地方平滑。有谁知道我是怎么做到的？？

```
from pylab import *
import random

x = linspace(0, 360, 361).astype(int)
x = x*pi/180
y = linspace(0.05, 0.5, 800)
xgrid, ygrid = meshgrid(x, y)

baz = []
for c in range(2000): baz.append(random.randint(0,360))

freq = rand(len(baz))
pwr = rand(len(baz))

zgrid = griddata(baz,freq,pwr, xgrid, ygrid)
subplot(111,  polar=True)
pcolormesh(xgrid, ygrid, zgrid)
show() 
```

由于griddata创建的掩码，我正在使用的数据也有一个间隙（我使用上面的griddata，然后在一个循环中对许多网格求和）。我想填补缺失的部分（见附图），有人知道怎么做吗？

![在此处输入图像描述](../Images/bcf89e717ee589afb8791252b645fd0b.png) 谢谢戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:16:01.043

如果您知道哪些网格在 0/360 度位置聚集在一起，您可以将它们连接起来并对其进行样条插值[（scipy 插值）](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html)。对于您的第二个问题，我不确定，但是如何在极坐标中创建网格？这会解决你的问题吗？

亲切的问候

# asp.net - 在aspx中添加html

> ID：13458745
> 
> 赞同：0
> 
> 时间：2012-11-19T17:09:54.917
> 
> 标签：asp.net, html, for-loop

我在 ASPX 中有这个 for 循环

```
 for (i = 0; i < ds.Tables[0].Rows.Count; i++)
        {

            strFname += ds.Tables[0].Rows[i]["first_name"].ToString();
            strLname += ds.Tables[0].Rows[i]["last_name"].ToString();
            str = String.Format("{0} {1} ", strFname, strLname);

        } 
```

我希望 Fname 将在 The Fname 旁边，并且在下一行中相同（直到最后一个）我希望在每一行中，名字将在姓氏旁边（在每一行中只有一个 Fname 和一个 Lname）和下一行同样的事情。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:28:54.890

`Response.Write`打印到 HTML 输出流。[http://msdn.microsoft.com/en-us/library/ms525585(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525585(v=vs.90).aspx)

```
Response.write(str); 
```

您还可以使用简写符号进行输出

```
<%= str %> 
```

或者

```
<%: str %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:30:50.267

使用`Repeater`控制更适合您的情况。在其标记中，您可以使用`td`在 LastName 旁边显示 FirstName 并`tr`连续显示它们。见[例子](http://dotnet-wpf.blogspot.com/2008/05/binding-datatable-to-asprepeater.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:40:00.220

Since you did not display your full code, we are not sure how you are displaying this on the full page. You can use a Repeater, Gridview, Listview, or some custom display container.

Below is an example of how to do it with a ListView:

Default.aspx:

```
<asp:ListView ID="lvData" runat="server" ItemPlaceholderID="phItem" OnItemDataBound="lvData_ItemDataBound">
  <LayoutTemplate>
    <table>
      <thead>
        <tr>
          <th>Fullname</th>
        </tr>
      </thead>
      <tbody>
        <asp:PlaceHolder ID="phItem" runat="server" />
      </tbody>
    </table>
  </LayoutTemplate>
  <ItemTemplate>
    <tr>
      <td><asp:Literal ID="litFullname" runat="server" /></td>
    </tr>
  </ItemTemplate>
</asp:ListView> 
```

Default.aspx.cs

```
protected void lvData_ItemDataBound(object sender, ListViewItemEventArgs e)
{
  //Get the data item that was passed in, in this case which number for this row.
  var data = (int)e.Item.DataItem;

  //Create temp first and last names
  var firstName = "First" + data.ToString();
  var lastName = "Last" + data.ToString();

  //Display it to the listview
  var litFullname = (Literal)e.Item.FindControl("litFullname");
  litFullname.Text = string.Format("{0} {1}", firstName, lastName);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:13:29.113

```
str = String.Format("{0}&nbsp;{1}<br />", strFname, strLname); 
```

# bluetooth - 无需用户交互即可连接外部附件蓝牙设备

> ID：13458749
> 
> 赞同：5
> 
> 时间：2012-11-19T17:10:12.833
> 
> 标签：bluetooth, core-bluetooth, accessory, eaaccessory

根据从 iOS 6 开始使用 showBluetoothAccessoryPickerWithNameFilter 的 EAAccessoryManager 类参考，我们可以显示一个配件选择器，它可以帮助用户连接外部配件，包括通过蓝牙唯一 ID 的 iAP。

现在我们想以编程方式连接该列表中的一个外部附件。

我们需要您的支持。

我们如何以编程方式连接手机范围内的任何外部设备？

我们如何在没有用户交互的情况下以编程方式连接任何外部设备？

我们如何以编程方式获取用户手机范围内的外部设备列表？

我们如何获取范围内但未连接的外部设备的 EAAccessory 对象列表？

我们可以将 EAAccessory 对象存储在 NSUserDefaults 中吗？如果是，我们该怎么做？由于 EAAccessory EAAccessory 没有实现 encodeWithCoder 和 initWithCoder 方法，所以它不允许将其存储到 NSUserDefaults 中。

使用 BTLE 我们可以解决这个问题，但我们需要 BT Classic 中的解决方案。

# perl - Perl DBI fetchrow_array 问题

> ID：13458753
> 
> 赞同：3
> 
> 时间：2012-11-19T17:10:26.120
> 
> 标签：perl, dbi

我有以下问题。我有一个存储过程，用于更新或将数据插入到名为 UpdateData 的数据库中。它看起来大致是这样的（虽然简化了）：

```
CREATE PROCEDURE [dbo].[UpdateData] 
   @dataId as int,
   @data as int,
AS
BEGIN 
SET NOCOUNT ON;
declare @count int
select @count = (select COUNT(*) from DataTable data where data.id = @dataId)
if @count = 1
begin
update DataTable set data = @data from DataTable where  data.id = @dataId
select 'Updated' [operation] ,  @@ROWCOUNT [count]
end
else
begin
insert into DataTable (id, data)  values(@dataId, @data)
select 'Inserted' [operation] , @@ROWCOUNT [count]
end
END 
```

我使用 DBI 通过准备好的语句迭代我的数据从 perl 调用这个存储过程。然后我使用对 fetchrow_array 的调用来获取有关执行了哪个操作的信息：

```
my $dbh = getDBHandle($debug);
foreach (@Data) {
     $updateData->execute($->[0], $_->[1]);
     my @row = $updateData->fetchrow_array;
     my ($action, $count) = ($row[0], $row[1]);
     print $row[0] .",$action, $count\n";
 } 
```

发生的情况是，一旦运行任何更新语句，随后所有插入的操作描述都会从“插入”截断为“插入”。我认为这是因为字符串 'updated' 比 'inserted' 少了一个字符，一旦 fetchrow_array 在列中使用该字符串调用，它就会重置某种限制。如果我使两个描述字符串之间的区别不止一个，比如修改存储过程以使用“更新”而不是“更新”（两个字符与“插入”的差异）

```
select 'Update' [operation] ,  @@ROWCOUNT [count] 
```

我得到错误：

```
 DBD::ODBC::st fetchrow_array failed: [Microsoft][ODBC SQL Server Driver]String data, right truncation (SQL-01004) 
```

总而言之，输出看起来像

1，插入，10

2，更新，15

3,插入,20

4，更新，5

关于为什么执行不独立以及解决此问题的最佳方法是什么的任何想法。我知道我可以使动作相同，但我想要一个更好的解决方案。

编辑：一个后续问题。如果 UpdateData 过程需要调用另一个也返回数据的过程。是否有可能在 Perl 中获得两个结果集。一个来自内部程序，一个来自外部程序。现在， >fetchrow_array 只获取内部结果集。

编辑 2：关于数据截断的原始问题，我想知道为什么在每次执行后调用 $updateData->finish 不会导致每次执行时都重置宽度。IE

```
 foreach (@Data) {
       $updateData->execute($->[0], $_->[1]);
       my @row = $updateData->fetchrow_array;
       my ($action, $count) = ($row[0], $row[1]);
       print $row[0] .",$action, $count\n";
       $updateData->finish;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:41:20.887

当我们不知道表中的数据时，很难尝试重现您的问题。与此类问题一样，最好尝试编写一个小型自包含脚本来演示该问题。当我尝试猜测您的场景并运行时：

```
use DBI;
use strict;
use warnings;

my $h = DBI->connect('dbi:ODBC:xx','xx','xx',
                     {RaiseError => 1, PrintError => 0});

eval {
    $h->do(q/drop table mje/);
    $h->do(q/drop procedure pmje/);
};

$h->do(<<'EOT');
create table mje (id int, data int)
EOT

#my @data = (1,1,2);
#my $s = $h->prepare(q/insert into mje (id, data) values(?,?)/);
#foreach (@data) {
#    $s->execute($_, $_);
#}

$h->do(<<'EOT');
CREATE PROCEDURE pmje (
    @dataId as int,
    @data as int)
AS
BEGIN
SET NOCOUNT ON;
declare @count int
select @count = (select COUNT(*) from mje where id = @dataId)
if @count = 1
begin
update mje set data = @data from mje where id = @dataId
select 'Updated' [operation] ,  @@ROWCOUNT [count]
end
else
begin
insert into mje (id, data)  values(@dataId, @data)
select 'Inserted' [operation] , @@ROWCOUNT [count]
end
END
EOT

my $s = $h->prepare(q/{call pmje(?,?)}/);
my @data = (1,2,1);
foreach (@data) {
    $s->execute($_, $_);
    my @row = $s->fetchrow_array;
    my ($action, $count) = ($row[0], $row[1]);
    print $row[0] .",$action, $count\n";
 } 
```

我得到：

```
Inserted,Inserted, 1
Updated,Updated, 1
Inserted,Inserted, 1 
```

但是，我可能没有使用与您相同的 ODBC 驱动程序（我在 Linux 上使用的是 Easysoft SQL Server 驱动程序）。您看到的截断错误表明 DBD::ODBC 将该列绑定的缓冲区太小。DBD::ODBC 使用 SQLDescribeCol 来获取所需的缓冲区大小，因此在您的情况下，我建议 SQLDescribeCol 返回 7 而不是 8。这应该相当直接地证明您是否启用 DBD::ODBC 跟踪，但是，您是如何做的这取决于您的 DBI 和 DBD::ODBC 的最新程度。如果您最近有 DBI 和 DBD::ODBC，只需：

设置 DBI_TRACE=DBD=x.log (windows) 或导出 DBI_TRACE=DBD=x.log (unix)

如果这不会在 x.log 中产生太多

设置 DBI_TRACE=15=x.log (windows) 导出 DBI_TRACE=15=x.log (unix)

并运行你的脚本。当我这样做时，我会得到这样的一行：

```
 DescribeCol column = 1, name = operation, namelen = 9, type = VARCHAR(12), precision/column size = 8, scale = 0, nullable = 0 
```

它告诉我为该列返回的缓冲区大小为 8。您之前可能得到 7，现在可能得到 128。我认为没有任何问题，例如 ODBC 驱动程序或数据库如何知道缓冲区应该是多大？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:01:54.960

虽然我仍然不知道为什么会出现这种行为，但我确实找到了解决方案。如果在存储过程中声明了一个变量，输出将被放入其中并且大小足够大，那么一切都会按预期进行。也就是说，这可以解决问题：

```
CREATE PROCEDURE [dbo].[UpdateData] 
    @dataId as int,
    @data as int,
AS
BEGIN 
SET NOCOUNT ON;
declare @operation varchar(128)
declare @count int
select @count = (select COUNT(*) from DataTable data where data.id = @dataId)
if @count = 1
begin
update DataTable set data = @data from DataTable where  data.id = @dataId
set @operation = 'Updated'
select @operation [operation] ,  @@ROWCOUNT [count]
end
else
begin
insert into DataTable (id, data)  values(@dataId, @data)
set @operation = 'Inserted'
select @operation [operation] ,  @@ROWCOUNT [count]
end
END 
```

编辑：这是对 bohicas 帖子的回复。以下脚本（对他发布的内容稍作修改，重现了我机器上的问题）。

```
use DBI;
use strict;
use warnings;

my $debug = 0;
my $h = DBI->connect('dbi:ODBC:xx','xx','xx',
                 {RaiseError => 1, PrintError => 0});

eval {
    $h->do(q/drop table mje/);
    $h->do(q/drop procedure pmje/);
};

$h->do(<<'EOT');
create table mje (id int, data int)
EOT

$h->do(<<'EOT');
CREATE PROCEDURE pmje (
    @dataId as int,
    @data as int)
AS
BEGIN
SET NOCOUNT ON;
declare @count int
select @count = (select COUNT(*) from mje where id = @dataId)
if @count = 1
begin
update mje set data = @data from mje where id = @dataId
select 'Updated' [operation] ,  @@ROWCOUNT [count]
end
else
begin
insert into mje (id, data)  values(@dataId, @data)
select 'Inserted' [operation] , @@ROWCOUNT [count]
end
END
EOT

my $s = $h->prepare(q/{call pmje(?,?)}/);
my @data = (1);
foreach (@data) {
    $s->execute($_, $_);
    my @row = $s->fetchrow_array;
    my ($action, $count) = ($row[0], $row[1]);
    print $row[0] .",$action, $count\n";
    $s->finish();
 }
 $h->disconnect();

 $h = getDBHandle($debug);
 $s = $h->prepare(q/{call pmje(?,?)}/);

@data = (1,2);
foreach (@data) {
    $s->execute($_, $_);
    my @row = $s->fetchrow_array;
    my ($action, $count) = ($row[0], $row[1]);
    print $row[0] .",$action, $count\n";
    $s->finish();
 } 
```

# javascript - 从锚链接到达时切换 DIV

> ID：13458758
> 
> 赞同：2
> 
> 时间：2012-11-19T17:10:37.037
> 
> 标签：javascript, html

我制作了一个功能，可以在单击某个元素时打开并显示一个 div。我在一页上有几个。如何在仅打开某个 div 的情况下链接到该页面？我希望能够像这样链接：“http://domain.com/#cat1”..

超级感谢解答！

**HTML：**

```
<a href="#cat1" id="cat1" class="h3 toggle">Lorem ipsum</a>
                        <div class="list-container">
                            <ul class="list">
                                <li class="faq">
                                    <p>Lorem ipsum</p>
                                </li><ul> 
```

**JavaScript：**

```
hShow : function(event) {
            var el = $(this),
                arrow = $('span.arrow', this),
                container = el.next('div.list-container'),
                faqList = $('.faq-list:nth(0)', container),
                hList;

            event.stopPropagation();
            event.preventDefault();

            if (container.height() > 0) {
                // collapse
                el.removeClass('expanded');
                container.css({'padding-bottom': '0px'}).animate({'height': '0px'}, 250);
            } else {
                // expand
                hList = faqList.height();
                el.addClass('expanded');
                container.animate({'height': hList +'px'}, 250, function() {
                        $(this).css({
                            'padding-bottom': '10px',
                            'height': 'auto'
                        });
                    });
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:35:22.123

只需使用相同的逻辑处理您的链接点击和页面加载事件。在 div 上方找到一个锚点，并显示对应的 div：

```
function openDivUnderAnchor(name){
    name = name.replace('#','');
    $('div.collapsible').hide();
    $('a[name='+name+']').next('div').show();
}

$(document).ready(function(){
    // opens the correct div if its link is clicked
    $(document).on('click', 'a.open', function(){
        openDivUnderAnchor($(this).attr('href'));
    });
    // opens the correct div if its anchor is specified in the URL
    openDivUnderAnchor(location.hash);
});​

<ul>
    <li><a class="open" href="#one">first</a></li>
    <li><a class="open" href="#two">second</a></li>
    <li><a class="open" href="#three">third</a></li>
    <li><a class="open" href="#four">fourth</a></li>
</ul>

<a name="one"></a>
<div class="collapsible">first div</div>

<a name="two"></a>
<div class="collapsible">second div</div>

<a name="three"></a>
<div class="collapsible">third div</div>

<a name="four"></a>
<div class="collapsible">fourth div</div>​ 
```

工作小提琴：http: [//jsfiddle.net/q2v2S/2/](http://jsfiddle.net/q2v2S/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:20:11.953

[您可以使用 URL 的“本地部分”，即在http://www.example.com/#cat1](http://www.example.com/#cat1)之类的 URL 中，# 后面的部分“cat1”。例如，在这部分中输入您要显示的 div 的 id，或者在您的情况下是按钮链接的 id。

首先，您在没有打开任何 div 的情况下显示页面，然后使用 Javascript 使用 document.location.hash 获取本地部分，即您的按钮 ID。然后您只需显示与该 id 对应的 div 或模拟单击按钮。

哈希技术的一个很好的总结：http: [//blog.mgm-tp.com/2011/10/must-know-url-hashtechniques-for-ajax-applications/](http://blog.mgm-tp.com/2011/10/must-know-url-hashtechniques-for-ajax-applications/)（针对 Ajax 进行了描述，但适用于任何动态）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:17:44.457

我过去这样做的方法是查看 URL 哈希，然后“伪造”点击。

例如：

```
$(function()
{
if(!location.hash) return; // don't do anything if no hash set

$('a.toggle[href="' + location.hash + '"]').click();
}); 
```

因此，在加载（`$(function() { ... });`）时，如果设置了哈希（`if(!location.hash)...`），则找到带有类切换的锚标记，该标记将 href 设置为当前`location.hash`并在其上伪造单击事件。这应该会触发它的扩展，就像用户实际点击它一样。

# string - 字符串的拆分或字符

> ID：13458762
> 
> 赞同：1
> 
> 时间：2012-11-19T17:10:42.590
> 
> 标签：string, actionscript-3, flash

我正在写一个赌场游戏，我需要加密我通过套接字传递的所有数据，所以我想要尽可能多的性能，因为加密和解密可能会发生很多，我不希望它迟钝。

`String`我的问题是，当您拥有 a并且您想高速获取它的字符时，哪个性能更快，`myString.charAt(i)`或者拥有`var a:Array = myString.split('');`然后像这样获取它们`a[i];`

我的`for`周期可能会运行 60-100 次或更多。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:31:31.857

您始终可以通过在代码执行之前和之后使用 getTimer 来测试自己，看看在您的情况下什么更有效，以及它是否重要：

```
var testTime:int;
var before:int = getTimer();

//You code here

testTime = getTimer() - before;
trace(testTime); 
```

所以基本上，你输入你的两个算法并检查执行需要多少时间。

编辑：Apocalyptic0n3 自然是正确的。最好使用 new Date.time() 而不是 getTimer() 因为它在冻结的情况下更准确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:35:22.707

benbjo 的建议是中肯的。如果性能*确实*是一个问题，那么最好的测试用例是您实际使用代码的情况，尤其是因为垃圾收集和 JIT'er 使得事情在*实际*性能方面变得不可预测。

也就是说，该`charAt`方法通常会比`split()`. 在内存方面应该没有太大区别——两种方法都是为每个字符创建一个新字符串。除此之外，`split()`显然还创建了一个额外的数组。

这两种方法的比较：

字符：

```
var s:String = "";
for (var j:int = 0; j < len; j++)
{
    // The string concat seems to be enough to confuse the JIT compiler.
    s += v.charAt(j);
} 
```

分裂：

```
var s:String = "";
var arr:Array = v.split("");
for (var j:int = 0; j < len; j++)
{
    // The string concat seems to be enough to confuse the JIT compiler.
    // Using just arr[j] seems to be unfairly optimized.
    s += arr[j];
} 
```

可以预见，相关编译的 ABC 字节码在两者之间是相同的，除了对 split 的调用以及数组访问与调用`charAt()`。换句话说，ASC 编译器没有疯狂的优化噱头（无论如何这些都很少见）。

上面的每个代码运行 10 次，迭代 1000 次，在发布播放器上发布构建：

```
FP WIN 11,5,502,110           :  #Runs  #Iter           Avg           Min           Max          Iter
charAt :: string length: 50   :     10   1000        9.0 ms          6 ms         10 ms     0.0090 ms
split  :: string length: 50   :     10   1000       13.0 ms          8 ms         19 ms     0.0130 ms
charAt :: string length: 500  :     10   1000       68.5 ms         58 ms         97 ms     0.0685 ms
split  :: string length: 500  :     10   1000      100.5 ms         86 ms        136 ms     0.1005 ms
charAt :: string length: 1000 :     10   1000      149.3 ms        119 ms        202 ms     0.1493 ms
split  :: string length: 1000 :     10   1000      201.2 ms        162 ms        261 ms     0.2012 ms
charAt :: string length: 2000 :     10   1000      283.8 ms        230 ms        378 ms     0.2838 ms
split  :: string length: 2000 :     10   1000      326.9 ms        307 ms        423 ms     0.3269 ms
charAt :: string length: 4000 :     10   1000      575.8 ms        475 ms        752 ms     0.5758 ms
split  :: string length: 4000 :     10   1000      665.0 ms        609 ms        888 ms     0.6650 ms
charAt :: string length: 5000 :     10   1000      650.9 ms        581 ms        915 ms     0.6509 ms
split  :: string length: 5000 :     10   1000      863.4 ms        769 ms       1219 ms     0.8634 ms
charAt :: string length: 10000:     10   1000     1300.5 ms       1155 ms       1707 ms     1.3005 ms
split  :: string length: 10000:     10   1000     1797.3 ms       1534 ms       2461 ms     1.7973 ms 
```

Avg = 每次运行的平均时间（1000 次迭代）

Min = 单次运行的最短时间

Max = 单次运行的最长时间

Iter = 单次迭代的平均时间。

运行之间的差异相当大，可能是由于在某些运行期间发生了垃圾收集。但结果始终是赞成的`charAt()`。在每次运行之前`split()`调用一次而不是在每次迭代中重做一次并没有太大区别。换句话说，性能上的差异确实在于访问数组比调用慢`charAt()`。然而，这并不是*很大*的区别，例如，使用`indexOf`而不是正则表达式来搜索字符串。

一般来说，虽然这不是一成不变的规则，但对于像字符串操作这样的简单任务，最明显的方法可能是更快的方法。FlashPlayer 团队花了很多时间优化字符串操作、连接等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T22:27:50.303

好的，这对于评论来说太多了。

首先，很难说出你想要做什么以及为什么需要比较这些东西，但正如我已经说过的那样。如果您正在研究序列化 - 学习使用内置序列化。当有人重新发明轮子时，我已经看到这种情况发生了很多次，并且在*所有可能的方面都比*内置的轮子差了几个*数量级。*这样做的唯一借口是，如果你正在学习事情是如何运作的。

 *当然，如果您计划处理数十万个文件 - 您可以用 C 编写并在 AIR 或类似的语言中使用本机扩展，这肯定会赢。

现在，如果您想知道处理字符串数据的最快方法，那不是我们的选择。最快的方法是将其加载到域的内存中并使用所谓的“炼金术操作码”来访问数据字节。如果字符串使用 8 位编码，这将非常快，如果使用 Unicode，则不会那么快。显然，如果您要测试之前建议的内容，这也会影响您的测试。

第二个最佳选择：由整数组成的向量，它们是字符代码。这些更好地优化并使用不同的内存分配模型。

第三快的可能是`ByteArray`或`BitmapData`。

**但是**，如果您在序列化中做了一些愚蠢的事情，这一切都绝对不重要。为了正确地做到这一点，你真的需要一个好的策略，你需要很好地理解信息论，以预测这种或其他*压缩*数据的方式将如何减小大小，或者更容易或更快地实现等等在。在这个领域有很多糟糕的决定变得流行的好例子。Base64 编码、XML 和 JSON 格式是卡住的粗心设计的例子。

谈到 Flash，选择是绝对显而易见的，在各个方面，AMF 都比您可能拥有的任何选项都要好。您需要对自己正在做的事情有一个非常深入的了解，自己动手并做得更好。

PS. One more note: if you don't want to make additional allocations with `charAt` - you can use `substr` or `substring`, because these don't cause reallocations, but will prevent the source string from being deallocated until the subtracted string lives.*

# php - 将 SAP 时间表集成到 Web API

> ID：13458764
> 
> 赞同：5
> 
> 时间：2012-11-19T17:10:53.607
> 
> 标签：php, api, sap

我一直在尝试找到一种将我们的 SAP 时间表与 Web API 集成的方法。我想要做的是允许用户通过（更用户友好的）Web 界面输入他们的时间表，并让这些时间表自动输入到我们的 SAP 系统中。目前我们使用 SAPGUI 7.10rev3 输入时间表，这是一场噩梦！我已经四处寻找 API 参考资料，但它们似乎都过于冗长，并且需要的 SAP 知识比我个人所知道的要多得多。

通过我的研究，我能够在这里找到对 .NET 连接器的引用：

[在 ASP.NET 项目中集成 SAP？](https://stackoverflow.com/questions/12616961/integrating-sap-in-asp-net-project)

但是，我的项目将使用 LAMP 设置。我能够找到[这个](http://www.sdn.sap.com/irj/sdn/index?rid=/webcontent/uuid/6bc9313b-0a01-0010-2e97-c469626d725a)似乎有很多资源的页面：

通过进一步的调查，我找到了一个[这个页面](http://saprfc.sourceforge.net/)，这似乎是一个很好的起点。

所以，我的问题是，有人可以给我一些关于从这里去哪里的方向吗？是否有任何更新时间表的参考或文档可以帮助我的情况？或者是否有对 SAP 用于我可以使用 LAMP 更新的时间表的数据库表的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:58:53.123

后端 API 通常很复杂，这是有充分理由的 - 如果您以前没有访问 ABAP 后端系统的经验，您可能必须在经验丰富的 SAP 顾问的帮助下克服这种复杂性。首先要做的是获得这些顾问或管理员的合作——否则你可能会遇到各种非技术问题。

假设我们正在讨论 CA-TS，那么您至少在 BAPI/RFC 编程方面处于正确的轨道上。阅读[BAPI 编程指南](http://help.sap.com/saphelp_46c/helpdata/en/a5/3ec8074ac011d1894e0000e829fbbd/frameset.htm)（一个过时的版本，但那里没有太大变化）——其中一个示例甚至与[timesheet](http://help.sap.com/saphelp_46c/helpdata/en/8b/40aee2c95c11d1ad0c080009b0fb56/frameset.htm)相关。[然后](http://help.sap.com/saphelp_46c/helpdata/en/60/051f2bc925d311b60f0060b03c2bff/frameset.htm)，以事务为起点查看 BAPI 定义，并联系您选择的顾问或管理员以获取详细信息`BAPI`。

此外，如果您以前从未访问过 R/3 系统，请注意，事情通常比乍看起来要复杂得多。你被警告了...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:08:24.767

或者，您可以直接在 SAP 中开发 Web 界面，使用[BSP](http://scn.sap.com/community/abap/bsp)、[WebDynpro](http://scn.sap.com/community/web-dynpro-abap)甚至[ITS](http://scn.sap.com/community/its)
更新：有关表格、功能的信息...对于更新时间表，您可以在[SDN/SCN中搜索](http://scn.sap.com/welcome)

# android - Android ICS 网络位置未更新

> ID：13458767
> 
> 赞同：3
> 
> 时间：2012-11-19T17:11:03.353
> 
> 标签：android, networking, location, android-4.0-ice-cream-sandwich

我有一个应用程序，我曾经用 2.3.3 在我的 Android 手机上进行测试，它使用 GPS 和网络位置。但是，我尝试了两部不同的 ICS (4.0+) 手机，但网络位置从未更新。我在清单中拥有所需的权限（INTERNET、ACCESS_LOCATION、ACCESS_GPS、ACCESS_COARSE_LOCATION、ACCESS_FINE_LOCATION、ACCESS_NETWORK_STATE）并且它曾经可以工作。

我可以通过 lastKnownLocation 在 ICS 中获得位置“提示”，但我确实需要启用网络位置。它仍然适用于 Android 2.3.3，但不适用于更新的版本。

ICS 有什么我必须更改的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:06:00.817

我的两部 4.1.1 Android 手机都遇到了同样的问题。似乎该位置以某种方式“卡”在一个位置并且不想改变。

重新启动手机，位置更新将开始正常工作。

我还尝试了 Play Market 中使用 MapView 的其他应用程序，但它们也找不到我当前的位置。GoogleMaps 应用程序没有受到这个问题的影响，而且它总是可以正常工作。

顺便说一句，您使用的权限超出了您的需要。您必须包含 android.permission.INTERNET，以及以下其中一项：android.permission.ACCESS_FINE_LOCATION 或 android.permission.ACCESS_COARSE_LOCATION。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-03T09:08:09.320

设备重新启动后，网络位置提供程序工作正常，但一段时间后它停止更新。

这是已知问题：

[https://code.google.com/p/android/issues/detail?id=57707](https://code.google.com/p/android/issues/detail?id=57707)

不幸的是还没有解决方案。所以请为这个问题投票。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:44:19.167

我与华为 G330D (4.0.4) 有非常相似的问题 - 网络位置根本不起作用（即使最初的 lastKnownLocation 返回 null），尽管谷歌应用程序（地图、本地）工作正常并正确显示网络位置。仍然找不到如何解决它:-(

# html - 删除 HTML 代码中由换行符添加的空格（使用 CSS？）

> ID：13458775
> 
> 赞同：8
> 
> 时间：2012-11-19T17:11:37.893
> 
> 标签：html, css

我有一些看起来像这样的html：

```
<span>
  398
  <span>comments posted in</span>
</span> 
```

`398`因为 html 中有换行符，所以在后面渲染了一个空格。由于我不会进入的原因，无法删除此换行符。有没有办法阻止在那里渲染空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T17:14:54.123

不，使用 CSS 是不可能的。虽然你可以使用`float`，但在这里行不通。

但我有一个蹩脚的想法，给这个CSS（理想案例）：

```
span span {margin-left: -1em;}
span span {margin-left: -1ex;} 
```

但实际情况是这样的：

```
span span {margin-left: -0.4em;}
span span {margin-left: -0.7ex;} 
```

`1em`或者`1ex`是 CSS 中空格字符的宽度。希望它有效！大家都知道`em`。所以关于`ex`：

> “ex”单位由字体的“x-height”定义。之所以称为 x 高度，是因为它通常等于小写字母“x”的高度。但是，即使对于不包含“x”的字体，也会定义“ex”。

### 演示：http: [//jsfiddle.net/UmdfA/](http://jsfiddle.net/UmdfA/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T17:17:01.120

我想我们都同意，在可能的情况下，正确的解决方案*是*：

```
<span>
  398<span>comments posted in</span>
</span> 
```

但是你可以使用一些 CSS 恶作剧来解决这个问题......

```
span span {
    margin-left: -1ex;
} 
```

或者

```
span span {
    position: relative;
    left: -1ex;
} 
```

# php - 重定向后 Firefox 未存储 PHP 会话

> ID：13458776
> 
> 赞同：1
> 
> 时间：2012-11-19T17:11:52.223
> 
> 标签：php, session, facebook-graph-api

我正在使用 Facebook 的服务器端用户身份验证来尝试让人们登录到我们的网站。为了防止 CSRF，Facebook 建议创建一个随机会话状态变量，将其传递给 FB，然后 FB 将其传回以比较值以确保没有安全问题。这似乎在除 Firefox 之外的所有浏览器中都能正常工作。Firefox 正在发送状态变量，但在返回站点时不会存储它。session_start() 出现在文档的顶部，因为出于安全原因，我删除了一些变量和其他代码，所以下面没有引用它。

```
if(empty($code)) {
    $rand = md5(uniqid(rand(), TRUE)); // CSRF protection
    $_SESSION['mbny_state'] = $rand;
    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id="
        . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
        . $_SESSION['mbny_state'] . "&scope=publish_stream,user_birthday,user_hometown,email";
    header('Location: ' . $dialog_url);
}

$state = $_REQUEST['state'];
$secret_state = $_SESSION['state'];

// Check session state to prevent hacking
if($secret_state == $state) {
    $token_url = "https://graph.facebook.com/oauth/access_token?"
        . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
        . "&client_secret=" . $app_secret . "&code=" . $code;

    $response = file_get_contents($token_url);
    $params = null;
    parse_str($response, $params);

    // store the access token for future requests
    $_SESSION['access_token'] = $params['access_token'];

    // define graph url allowing us to communicate with FB with user's account
    $graph_url = "https://graph.facebook.com/me?access_token="
        . $params['access_token'];

    $user = json_decode(file_get_contents($graph_url));
}
else {
    $error_message = 'An error has occurred. Your session ID does not match. Please exit and try again.<br /><br />' . $secret_state . ' :: ' . $state . ' :: ' . $_SESSION['test'];
} 
```

Firefox 会显示错误消息。我在文档后面返回了 $_SESSION['state'] 的值，它即将变为 NULL。

此外，我在会话中添加了一个名为 test 的测试变量，它被 Firefox 很好地存储了。我错过了什么？

提前致谢。

**编辑：**似乎 Firefox 愿意在 if 语句之外存储会话变量。如果我在 if 语句之前设置 $_SESSION['myny_state'] ，它会在 FB 以 $code 返回时存储该值。这里的问题是状态肯定不匹配，因为它在每次页面调用时都会被重置，因为它在 if 语句之外。

我们说话的时候我正在掉头发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:16:34.487

在对 Firefox 内部发生的事情进行了非常密切的关注后，我注意到 Firefox 正在从域名中删除“www”，即使该地址最初包含“www”。然后会话被保存到[http://domain.com/whatever](http://domain.com/whatever)，而 Facebook 应用程序将用户重定向回[http://www.domain.com/whatever](http://www.domain.com/whatever)。

有两种方法可以解决这个问题。我选择使用 .htaccess 重写条件来解决这个问题：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301] 
```

这也可以通过如下设置 session.cookie_domain 来实现：

```
ini_set('session.cookie_domain', '.domain.com'); 
```

希望有人觉得这很有用。也许它会为您节省五个小时的调试时间，而这些东西实际上是没有错误的。

附带说明一下，强制您的网站使用 www 或不使用 www 被认为是良好的 SEO 实践 - 而不是两者兼而有之。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T17:19:07.143

`$_SESSION`vars 存储在服务器端，而不是客户端。

1.  你在哪里打电话`session_start()`？因为它不在您引用的代码中。
2.  您的浏览器中是否禁用了 cookie？IIRC PHP 通常设置一个 cookie`PHPSESSID`来将客户端浏览器与服务器的会话数据连接起来。

## 重新编辑

Facebook 可能会删除您的状态变量，因为它没有进行 urlencoded。尝试更换：

```
urlencode($my_url) . "&state=" . $_SESSION['state'] 
```

和：

```
urlencode($my_url . "&state=" . $_SESSION['state']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:18:49.000

如果这是您的完整代码，则必须`session_start();`在顶部或开始使用 Session 变量之前添加。

此外，您需要`session_start();`在要添加/检索数据的所有页面上添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T06:03:43.223

有时重启你的火狐浏览器可以解决问题。我不知道为什么，但它有效。

# ios - iPad上UITabbarItem的最大宽度？

> ID：13458777
> 
> 赞同：0
> 
> 时间：2012-11-19T17:11:54.967
> 
> 标签：ios, xcode, ipad, uitabbar, uitabbaritem

iPAD 上每个项目的最大宽度是多少，例如 5 个项目。我知道在 iPad 上左右角有一些空间，但是每个项目的宽度有多大？（在 iPHone 上很容易计算……但在 iPad 上呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:58:53.310

**这是新的Mobile HIG（人机界面指南）**的屏幕截图。从中，您可以获得**标签栏图标的大小**。它只是**近似值**。但是您可以将此作为参考，并根据项目的数量计算宽度。对于您的 5 件商品，

**在 iPad 标准中，它的 30 * 5 = 150 px**

**在 iPad 视网膜中，它的 60 * 5 = 300 像素**

![在此处输入图像描述](../Images/e7bbfa852772fae5ba93656c69596392.png)

# asp.net - 将 system.web 应用程序池添加到 web.config 会导致 500 内部服务器错误

> ID：13458779
> 
> 赞同：8
> 
> 时间：2012-11-19T17:11:56.957
> 
> 标签：asp.net, web-config, iis-7.5

我正在尝试将以下内容添加到我的 webconfig

```
<system.web>
    <applicationPool maxConcurrentRequestsPerCPU="5000" maxConcurrentThreadsPerCPU="0" requestQueueLimit="5000"/>
</system.web> 
```

但是，当我这样做时，会出现以下错误。

```
The configuration section 'applicationPool' cannot be read because it is missing a section declaration 
```

如何为此添加部分声明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:18:29.063

我不相信您可以将其添加到 web.config 文件中。它应该在您的 Aspnet.config 文件中。

[Web 设置架构](http://msdn.microsoft.com/en-us/library/dd560844.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T10:43:48.207

我认为您可以将其设置为覆盖 pr。应用程序下的部分

```
<system.webServer><httpRuntime> 
```

和

```
<system.webServer><serverRuntime> 
```

您可以进入 IIS 并在配置编辑器下的站点检查

# objective-c - 存储大量键值对的正确解决方案是什么？NSDictionary 与 DB

> ID：13458781
> 
> 赞同：2
> 
> 时间：2012-11-19T17:12:15.623
> 
> 标签：objective-c, ios, sqlite, nsdictionary

我需要用字典中的其他单词替换单词。字典包含大约 1500 个键值对（所有 NSStrings 都包含一个应该被另一个单词替换的单词）。字典是动态建立的。使用数据库对我来说看起来有点过分，但将所有单词存储在字典中也感觉不好。（它们可能会存储更长的时间，在极少数情况下也会存储在磁盘上。）

在这种情况下，iOS 应用程序的正确解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:05:26.590

1500 个键值对是单词 -> 单词？

那不是很大。实际上，这非常小。

只需将它们粘贴在 NSDictionary 中并将其作为 plist 写入存储。

确保对所述字典的访问被隔离在类的接口后面，以便将来可能导致大小爆炸的任何扩展需求都可以完全在所述接口后面完成，而不会影响客户端。

# java - 从 Glassfish 3.1.2 调用 REST Web 服务的安全错误

> ID：13458782
> 
> 赞同：1
> 
> 时间：2012-11-19T17:12:23.953
> 
> 标签：java, rest, jersey, jax-rs, glassfish-3

我在 Glassfish 3.1.2 中为 Ajax 应用程序创建了一个代理 RESTful Web 服务。我在 Glassfish 中定义了一个 RESTful Web 服务，然后调用外部 RESTful Web 服务。我使用 Jersey Client 类来调用外部 Web 服务：

```
 ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);          
    MultivaluedMap queryParams = new MultivaluedMapImpl();

    queryParams.add("dtype", datatypeStr);
    queryParams.add("bbox", boundingBoxStr);
    WebResource webResource = client.resource(callURL);
    WebResource webResource = client.resource(callURL);

    ClientResponse response =  webResource.queryParams(queryParams).accept("application/atom+xml").get(ClientResponse.class); 
```

上面的代码在独立客户端中运行，它也适用于 Glassfish 3.1，但在 Glassfish 3.1.2 中它会因未经授权的错误而失败。

所以我想我有两个问题，使用 Jersey 客户端 jar 是在 Glassfish 中创建代理 Web 服务的最佳方式吗？Glassfish 3.1.2 中的更改导致了未经授权的错误。

我读到 Glassfish 3.1.2 中添加了[CSRF 保护](http://blogs.steeplesoft.com/2012/03/glassfish-3-1-2-rest-security-and-the-jersey-client/)，但这只会影响调用部署到 Glassfish 的 RESTful Web 服务的客户端，而不是从 Glassfish 调用外部 Web 服务。

在此先感谢您的帮助。

# python - 最短相同十进制表示

> ID：13458784
> 
> 赞同：3
> 
> 时间：2012-11-19T17:12:34.037
> 
> 标签：python, decimal

> **可能重复：**
> [从十进制中删除尾随零](https://stackoverflow.com/questions/11227620/drop-trailing-zeros-from-decimal)

如何获得`Decimal`比较相等的最短表示？

例如：

*   `Decimal('89.00')`->`'89'`
*   `Decimal('123.010')`->`'123.01'`
*   `Decimal('0.0')`->`'0'`

目前，我有自己的实现，它首先转换为字符串，使用

```
if chanstr.endswith('0'):
    chanstr = chanstr[:chanstr.rfind('.')] 
```

效果很好，只有 2 LOC；但是有没有更好的方法来写这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:12:34.037

您可以使用[normalize](http://docs.python.org/3.2/library/decimal.html#decimal.Decimal.normalize)方法来实现此目的：

```
In [112]: print(decimal.Decimal("89.00").normalize())
89 
```

另请参阅[此答案](https://stackoverflow.com/a/11227743/974555)。

# web-applications - 手机模拟器查看源码？

> ID：13458792
> 
> 赞同：1
> 
> 时间：2012-11-19T17:13:00.027
> 
> 标签：web-applications, android-emulator, emulation, view-source

我想在 WebApp 上查看源代码，但是当我使用桌面输入 URL 时，浏览器会转发到桌面版本。

然后我尝试了 Opera 移动模拟器，但它可以在移动设备的每一种方式中运行，包括不允许我“查看源代码”。

有没有一种方法可以让我在计算机上查看网页，但就像我在移动设备上一样，但仍然可以查看代码，就像我在普通计算机上一样？

我试过 IE、Safari、Chrome 和 Firefox，它们都将页面转发到桌面版本，所以我永远无法在我的计算机上查看移动设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T09:49:54.060

您可以尝试[尝试移动网络浏览器模拟器](http://www.kythuatmang.net/mobile-web-browser-emulator.php)。请注意，您必须选中复选框才能查看移动版本，然后像往常一样查看源代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T13:30:21.523

我遇到了同样的问题，我找到了一个可行的解决方案。摘要：您可以将 Opera Desktop 调试器控制台设置为与 Opera Mobile 模拟器一起工作。

请参阅[使用 Opera 开发人员工具调试移动网页](http://www.development-cycle.com/2012/11/debugging-mobile-web-pages-with-opera-developer-tools/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-02T01:33:52.490

您可以使用 Opera Mobile 和 Opera Developer Tools，但您需要安装旧版本的 Opera（Chromium 之前的版本）。它们可在[Opera 的 FTP 站点上](http://arc.opera.com/pub/opera/)找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-05T13:15:51.067

在桌面上，您可以使用 Chrome 的模拟功能。

[https://developer.chrome.com/devtools/docs/device-mode](https://developer.chrome.com/devtools/docs/device-mode)

您还可以在搭载 Android 4 及更高版本的设备上使用远程调试。

[https://developer.chrome.com/devtools/docs/remote-debugging](https://developer.chrome.com/devtools/docs/remote-debugging)

# java - 将抽象或接口与内部或“依赖”类一起使用

> ID：13458795
> 
> 赞同：1
> 
> 时间：2012-11-19T17:13:05.287
> 
> 标签：java, interface, matrix, abstract

我发现自己反复用“单元”对象的二维数组制作一个“矩阵”类（我的标题中的“依赖”类，不确定是否有一个标准术语，一个外部的类，但只能从调用其构造函数和方法的类）。所以当然，我希望自己构建一些可重用的类和/或接口。

矩阵如下所示：

```
public class Matrix {

private Cell matrix[][];
private float spaceWidth, spaceHeight;
private int xCols, yRows;

public Matrix(int xCols, int yRows, float width, float height){
    matrix = populateCells(xCols,yRows);
    spaceWidth = width / xCols;
    spaceHeight = height / yRows;
    this.xCols = xCols;
    this.yRows = yRows;
}

public Cell[][] populateCells(int xCols, int yRows) {
    Cell c[][] = new Cell[xCols][yRows];
    int k = 0;
    for (int i = 0; i < xCols; i++){
        for(int j = 0; j < yRows; j++){
            c[i][j] = new Cell(i,j,k);
            k++;
        }
    }
    return c;
}
...
}

public class Cell {
private int x, y, num;

public Cell(int x, int y, int num, String name){
    this.x = x;
    this.y = y;
    this.num = num;
}

public float getX(){return x;}
public float getY(){return y;}
public int getNum(){return num;}
} 
```

我希望每个 Cell 和每个 Matrix 都具有这些属性。当我想扩展 Cell 以添加属性时，问题就来了。无论我尝试什么接口和/或抽象的组合，我似乎都无法弄清楚如何在不逐字重写 Matrix.populateCells 的情况下扩展 Matrix 和 Cell，只使用新的 Cell 名称。换句话说，我想在不破坏 Matrix 中对它的每个引用的情况下扩展 Cell。

所以基本上，我如何组织它以便抽象做它应该做的事情，即限制重复代码、封装等？

* * *

总结一下我对所选答案的实现：

```
public interface ICell {

public abstract int getX();
public abstract int getY();
public abstract int getNum();

}

public class Cell implements ICell {
private int x, y, num;

public Cell(int x, int y, int num){
    this.x = x;
    this.y = y;
    this.num = num;
}

    //getters...
}

public class WaveCell extends Cell implements ICell {
private boolean marked;

public WaveCell(int x, int y, int num) {
    super(x, y, num);
    marked = false;
}

public boolean isMarked() {return marked;}
public void setMarked(boolean marked) {this.marked = marked;}

    // More new stuff...    
}

public class WaveMatrix extends Matrix {

public WaveMatrix(int xCols, int yRows, float width, float height) {
    super(xCols, yRows, width, height);
}

@Override
public ICell newCell(int i, int j, int k){
    ICell c = new WaveCell(i,j,k);
    return c;
}
    ...
 }

 public class Matrix {

private ICell matrix[][];
private float spaceWidth, spaceHeight;
int xCols, yRows;

public Matrix(int xCols, int yRows, float width, float height){
    matrix = populateCells(xCols,yRows);
    spaceWidth = width / xCols;
    spaceHeight = height / yRows;
    this.xCols = xCols;
    this.yRows = yRows;
}

public ICell[][] populateCells(int xCols, int yRows) {
    ICell c[][] = new ICell[xCols][yRows];
    int k = 0;
    for (int i = 0; i < xCols; i++){
        for(int j = 0; j < yRows; j++){
            c[i][j] = newCell(i,j,k);
            k++;
        }
    }
    return c;
}

public ICell newCell(int i, int j, int k){
    ICell c = new Cell(i,j,k);
    return c;
}
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:43:15.033

有很多方法可以处理这个问题。

* * *

**一个矩阵实现，一个单元实现**

在我看来，如果您的 Cell 类上只有一个“可自定义”属性，那么最不理想的做法是将属性简单地传递给 Matrix 类的构造函数，以便在填充调用期间使用。

```
public Matrix(String cellName, int xCols, int yRows, float width, float height){
    matrix = populateCells(cellName, xCols,yRows);
    // ...
}

public Cell[][] populateCells(String cellName, int xCols, int yRows) {
    // ...
} 
```

这种方法几乎不能算作面向对象的编程，并且变得非常难以维护您为 Cell 类确定的更“可定制”的行为。不建议。

* * *

**多矩阵实现**

或者，您可以创建 Matrix 类的层次结构，其中包含核心行为的抽象超类和能够更适当地填充其自己的单元格类型的专门子类。

```
public abstract class Matrix<T extends Cell> {

    private public T matrix[][];

    public Matrix(int xCols, int yRows, float width, float height){
        matrix = populateCells(xCols,yRows);
        // ...
    }

    public T[][] populateCells(int xCols, int yRows) ;
}

public class RedBloodCellMatrix extends Matrix<RedBloodCell> {

    @Override
    public RedBloodCell[][] populateCells(int xCols, int yRows) {
        // ...
    }
} 
```

这种方法没有错，它是一种经典的多重继承策略。

* * *

在我看来，另一个更可取的选择是将单元群视为可插入的***战略***行为，您可以在运行时将其插入到 Matrix 类中。这种方法可以被认为是[组合优于继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)原则的一种实现：

```
public class Matrix {

    private public Cell matrix[][];
    private CellPopulationStrategy cellPopulationStrategy;
    // ...

    public Matrix(CellPopulationStrategy strategy, int xCols, int yRows, float width, float height){
        matrix = populateCells(strategy, xCols,yRows);
        // ...
    }

    public Cell[][] populateCells(CellPopulationStrategy strategy, int xCols, int yRows) {
        return strategy.populateCells(xCols, yRows);
    }
}

public interface CellPopulationStrategy {
    public Cell[][] populateCells(int xCols, int yRows);
}

public RedBloodCellPopulationStrategy implements CellPopulationStrategy{

    @Override
    public Cell[][] populateCells(int xCols, int yRows) {
        // ...
    }
} 
```

这是一种极好的使用方法，因为它可以很好地适应对象复杂性（特别是当您想要覆盖多个封装对象的行为时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:33:46.617

> 不是我不想改变populateCells，而是我不想调用super并循环遍历数组，然后在child中再做一遍。

如果您希望能够以`Matrix`一种可以执行额外步骤的方式进行扩展，`populateCells`您可以简单地将其中的一部分移动到您可以覆盖的方法中。就像下面的代码

```
public class Matrix {

    public Cell[][] populateCells(int xCols, int yRows) {
        Cell c[][] = new Cell[xCols][yRows];
        int k = 0;
        for (int i = 0; i < xCols; i++){
            for(int j = 0; j < yRows; j++){
                c[i][j] = getCell(i,j,k);
                k++;
            }
        }
        return c;
    }

    public Cell getCell(int i, int j, int k) {
        return new Cell(i, j, k);
    }

}

class SuperMatrix extends Matrix {
    @Override
    public Cell getCell(int i, int j, int k) {
        Cell c = super.getCell(i, j, k);
        modify(c);
        return c;
    }
} 
```

* * *

您也可以使用上述与@Perception 建议的相同策略模式。不同之处在于，在下面的代码中只`ICell`生成了一个，而在另一个示例中，完整的单元格数组将是产品。

```
public class Matrix {
    /** a common cell interface */
    public interface ICell {
        public int getX();
        public int getY();
    }

    /** somthing that knows how to produce a cell */
    public interface CellProducerStrategy {
        public ICell getCell(int i, int j, int k);
    }

    /** method of Matrix that is always the same for all Cells and Strategies */
    public ICell[][] populateCells(int xCols, int yRows, CellProducerStrategy strategy) {
        ICell c[][] = new ICell[xCols][yRows];
        int k = 0;
        for (int i = 0; i < xCols; i++){
            for(int j = 0; j < yRows; j++){
                c[i][j] = strategy.getCell(i,j,k);
                k++;
            }
        }
        return c;
    }

    // ---------- some implementation --------------------

    static class DefaultCell implements ICell {
        public DefaultCell(int i, int j, int k) {
            // something
        }
        @Override
        public int getX() {
            return 0;
        }
        @Override
        public int getY() {
            return 0;
        }
    }

    public static class DefaultCellProducer implements CellProducerStrategy {
        @Override
        public ICell getCell(int i, int j, int k) {
            return new DefaultCell(i, j, k);
        }
    }

    // ---------- alternative implementation --------------------

    static class NamedCell implements ICell {
        private String name;
        public NamedCell(int i, int j, int k, String name) {
            // something
            this.name = name;
        }
        @Override
        public int getX() {
            return 0;
        }
        @Override
        public int getY() {
            return 0;
        }
        public String getName() {
            return this.name;
        }
    }

    public static class NamedCellProducer implements CellProducerStrategy {
        @Override
        public ICell getCell(int i, int j, int k) {
            return new NamedCell(i, j, k, "John-" + i*j*k);
        }
    }
} 
```

上面的代码没有使用泛型，它的缺点是如果你想使用基类中没有定义的方法，你需要将项目转换为它们的实际类型。

```
Matrix m = new Matrix(5, 5, new Matrix.NamedCellProducer());
ICell cell = m.get(0,0);
if (cell instanceof NamedCell) {
    String name = ((NamedCell)cell).getName();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:49:33.607

据我了解，您需要使构造函数 public Cell(int x, int y, int num) 在所有派生类中工作。请看下面的例子——它基于受保护的 init 方法。

```
public class Cell {
protected int x, y, num;

public Cell() {
}

public Cell(int x, int y, int num) {
    init(x, y, num);
}

protected void init(int x, int y, int num) {
    this.x = x;
    this.y = y;
    this.num = num;
}

public float getX() {
    return x;
}

public float getY() {
    return y;
}

public int getNum() {
    return num;
}
}

public class CellWithName extends Cell {
protected String name;

public CellWithName(int x, int y, int num, String name) {
    init(x, y, num);
    this.name = name;
}
} 
```

# javascript - 组合 - 选择启用/禁用

> ID：13458797
> 
> 赞同：0
> 
> 时间：2012-11-19T17:13:22.270
> 
> 标签：javascript, jquery, combobox

我有 3 个组合框（选择），如果我从第一个中选择一个选项，我需要启用第三个。

*   类别（启用）
*   子类别（禁用）
*   葡萄（禁用）

如果我选择`Wines`我`categories`需要启用`grapes`

```
$('#subcategories').attr('disabled','disabled');
$('#grapes').attr('disabled','disabled');

$("#categories").change(function () {
$("#categories option:selected").each(function () {
    var v_elegido=$(this).val();    
    $('#subcategories').removeAttr('disabled');

    if($(this).val() == "Vinos")  {
        $('#grapes').removeAttr('disabled');
    } else {
        $('#grapes').attr('disabled','disabled');
    }

    $.post("subcategories.php", { elegido: v_elegido }, function(data){
        $("#subcategories").html(data);
    });  

});

 <?php if ($campo == 'varietales') { ?>    

    <div class="col_texto" align="right"><?php echo $campo ?>:&nbsp;</div>
  <div id="varietal" style="visibility:visible;">
        <select name="varietales" id="varietales">
        <option value="0">-</option>
        <?php
            $conn = DataBase::getInstance();
                $rel=false;
                $relacion='_'.$campo;
                $conn->setQuery('SELECT * FROM `_'.$campo.'` ORDER BY id ASC');
                if ($conn->len()==0){
                    $rel=true;
                    $relacion=$campo;
                    $conn->setQuery('SELECT * FROM `'.$campo.'` ORDER BY id ASC');
                }
                if ($conn->len()==0){
                    $rel=true;
                    $relacion=$campo.'s';
                    $conn->setQuery('SELECT * FROM `'.$campo.'s` ORDER BY id ASC');
                }
                if ($conn->len()>0){
                $rs = $conn->loadObjectList();
                foreach($rs as $valor){?>
            <option value="<?php echo $valor->id ?>"><?php echo $valor->titulo ?></option>
            <?php 
                }}?>
            </select> 
      </div>      
         <?php } else { ?>
    <?php if ($campo == 'bodegas') { ?>    

    <div class="col_texto" align="right"  style="visibility:visible;"><?php echo $campo ?>:&nbsp;</div>
  <div>
        <select name="bodegas" id="bodegas">
        <option value="0">-</option>
        <?php
            $conn = DataBase::getInstance();
                $rel=false;
                $relacion='_'.$campo;
                $conn->setQuery('SELECT * FROM `_'.$campo.'` ORDER BY id ASC');
                if ($conn->len()==0){
                    $rel=true;
                    $relacion=$campo;
                    $conn->setQuery('SELECT * FROM `'.$campo.'` ORDER BY id ASC');
                }
                if ($conn->len()==0){
                    $rel=true;
                    $relacion=$campo.'s';
                    $conn->setQuery('SELECT * FROM `'.$campo.'s` ORDER BY id ASC');
                }
                if ($conn->len()>0){
                $rs = $conn->loadObjectList();
                foreach($rs as $valor){?>
            <option value="<?php echo $valor->id ?>"><?php echo $valor->titulo ?></option>
            <?php 
                }}?>
            </select> 
      </div>      
         <?php } else { ?>

   <?php if ($campo == 'subcategorias') { ?>    

    <div class="col_texto" align="right"><?php echo $campo ?>:&nbsp;</div>
  <div>
        <select name="<?php echo $campo ?>" id="<?php echo $campo ?>">
        <option value="0">-</option>
        <?php
            $conn = DataBase::getInstance();
                $rel=false;
                $relacion='_'.$campo;
                $conn->setQuery('SELECT * FROM `_'.$campo.'` ORDER BY id ASC');
                if ($conn->len()==0){
                    $rel=true;
                    $relacion=$campo;
                    $conn->setQuery('SELECT * FROM `'.$campo.'` ORDER BY id ASC');
                }
                if ($conn->len()==0){
                    $rel=true;
                    $relacion=$campo.'s';
                    $conn->setQuery('SELECT * FROM `'.$campo.'s` ORDER BY id ASC');
                }
                if ($conn->len()>0){
                $rs = $conn->loadObjectList();
                foreach($rs as $valor){?>
            <option value="<?php echo $valor->id ?>"><?php echo $valor->titulo ?></option>
            <?php 
                }}?>
            </select>
    </div>        

         <?php  } else { ?> 

         <div class="col_texto" align="right"><?php echo $campo ?>:&nbsp;</div>
         <div>
        <select name="categorias" id="categorias">
        <option value="0">-</option>
        <?php
            $conn = DataBase::getInstance();
                $rel=false;
                $relacion='_'.$campo;
                $conn->setQuery('SELECT * FROM `_'.$campo.'` ORDER BY id ASC');
                if ($conn->len()==0){
                    $rel=true;
                    $relacion=$campo;
                    $conn->setQuery('SELECT * FROM `'.$campo.'` ORDER BY id ASC');
                }
                if ($conn->len()==0){
                    $rel=true;
                    $relacion=$campo.'s';
                    $conn->setQuery('SELECT * FROM `'.$campo.'s` ORDER BY id ASC');
                }
                if ($conn->len()>0){
                $rs = $conn->loadObjectList();
                foreach($rs as $valor){?>
            <option value="<?php echo $valor->id ?>"><?php echo $valor->titulo ?></option>
            <?php 
                }}?>
            </select>
           </div>  

         <?php } ?>      
         <?php } ?>          
         <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:21:20.513

所以你需要做的就是获取 val.. 并相应地设置 disabled 属性

```
$("#categories").change(function(){
    $('#grapes').prop('disabled',$(this).val() != 'Vinos');
}); 
```

这是假设您有选项的值，并且您首先选择的第三个选项是“Vinos”

[.prop()](http://api.jquery.com/prop/)也是自 jQuery 1.6+ 以来设置 disabled 属性的首选方法

> 应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法

# c++ - 用一些信息注释 C++ 二进制文件

> ID：13458800
> 
> 赞同：4
> 
> 时间：2012-11-19T17:13:30.790
> 
> 标签：c++, linux, bash, executable, embedding

我正在尝试使用各种信息为 c++ 二进制文件“加水印”。在构建时包含这些信息很困难，因为我不控制构建过程。[到目前为止，我从这里](https://stackoverflow.com/questions/10491704/embed-a-executable-binary-in-a-shell-script)得到的唯一想法接近我的想法，它是一个脚本，当给定一个 c++ 二进制文件时，它会生成一个如下所示的 Bash 脚本。

简而言之，它将一个 bash if-else 附加到原始二进制文件中，它检查第一个参数是否为“--version”（在这种情况下它会回显一些信息）或不是（在这种情况下它只是将自身解码为文件“originalBinary " 然后运行 ​​./originalBinary)。

这显然并不理想：

*   我现在有 2 个二进制副本（对于大型二进制文件可能有问题）和
*   正在运行的进程开始于`./originalBinary`这对于不知道发生了什么的人来说是令人困惑的

我想知道的是我是否可以做一些事情，比如`./originalBinary`用某种特殊的替换调用`exec $0`，我也可以告诉 exec 不要从头开始读取文件，但偏移量为 100 个字符（或任何开头的 Bash 位的长度是）。

另一个想法是让 Bash 脚本自己编辑，即用 sed 删除它的前 21 行，`./$0`调用自身，然后在`./$0`命令返回时附加 if-else。然而，这似乎很脆弱（如果机器在调用返回之前崩溃怎么办？）。

最后，我得到的印象是，当二进制文件是共享资源时，这将失败，因为链接器在尝试加载库时会被开始时的 bash 内容弄糊涂:(

或者，您能否建议任何其他方式来注释 c++ 二进制构建后？

我考虑准备一个包含所需信息的目标文件，而不是将其链接到给定的二进制文件中，但这需要我以某种方式将 ELF 转换回进入其中的目标文件，将我的目标文件添加到列表中，然后重新链接（我从[这里](https://stackoverflow.com/questions/8822947/embedding-binary-into-elf-with-objcopy-may-cause-alignment-issues)得到的印象是可以做到这一点，`objcopy`但我还没有设法让它发挥作用）。此外，这种方法的问题在于没有很好的方法来获取信息，例如使用“--version”调用二进制文件。

我想做的事是不可能的吗？我希望我能清楚地解释事情。

谢谢。

```
#!/bin/bash

function PrintInformation()
{
    echo "various bits of information"
}

if [[ $# -eq 1 && "$1" == "--version" ]]; then
    PrintInformation
    exit 0
else
    uudecode $0
    ./originalBinary
    exit 0
fi

begin 755 originalBinary
M?T5,1@(!`0````````````(`/@`!````X`9```````!``````````'`1````
M`````````$``.``)`$``'@`;``8````%````0`````````!``$```````$``
M0```````^`$```````#X`0````````@``````````P````0````X`@``````
M`#@"0```````.`)````````<`````````!P``````````0`````````!````
M!0````````````````!``````````$```````*0*````````I`H`````````
M`"````````$````&````\`T```````#P#6```````/`-8```````6`(`````
M``"8`P``````````(````````@````8````@#@```````"`.8```````(`Y@
M``````#``0```````,`!````````"``````````$````!````%0"````````
M5`)```````!4`D```````$0`````````1``````````$`````````%#E=&0$
M````L`D```````"P"4```````+`)0```````-``````````T``````````0`
M````````4>5T9`8`````````````````````````````````````````````
M````````````"`````````!2Y71D!````/`-````````\`U@``````#P#6``
...............// my uuencode'd binary here
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:48:59.530

您可以使用 libelf、ELFsh 或其他 ELF 工具在二进制文件中创建您自己的“部分”，并将您想要的任何内容放入其中。 [这个问题](https://stackoverflow.com/questions/1088128/adding-section-to-elf-file "这个问题")有更多的链接。如果您只想*将*数据块添加到二进制文件中，则使用**objcopy --add-section**（如[在此处回答](https://stackoverflow.com/questions/5479691/is-there-any-standard-way-of-embedding-resources-into-linux-executable-image)）可能会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:09:16.037

这有点像 hack，但您可以采取的一种方法是嵌入这样的字符串：

```
static const char *version = "<<<VERSION-INFORMATION-HERE>>>"; 
```

在你的代码中。您的程序可以根据需要将其打印出来。确保字符串足够长，以容纳真实版本信息所需的所有信息。然后，您可以编辑生成的二进制文件，用您的“水印”覆盖此字符串。这是一个（不是很漂亮，但功能强大）Perl 脚本，可以做到这一点：

```
die "Usage $0 original-binary-file output-binary-file version-info" unless ($#ARGV == 2);

$original = $ARGV[0];
$modified = $ARGV[1];
$new_version = $ARGV[2];
$version_magic = "<<<VERSION-INFORMATION-HERE>>>";

if (length($new_version) > length($version_magic)) {
    die "$0: Length of version string '$new_version' must be less than that of '$version_magic'\n"
}
$new_version .= "\0" x (length($version_magic) - length($new_version));

open(IN, $original)
    or die "\nCan't open $original for reading: $!\n";

open(OUT, ">$modified")
    or die "\nCan't open $modified for writing: $!\n";

binmode IN;
binmode OUT;

my $buffer;
my $size = -s $original;

read(IN, $buffer, $size)
    or die "$0: Failed to read $size bytes from $original: $!\n";

$buffer =~ s/\Q$version_magic\E/$new_version/;

print OUT $buffer
    or die "$0: Failed to write $size bytes to $modified: $!\n";

close IN
    or die "$0: Can't close $original: $!\n";

close OUT
    or die "$0: Can't close $modified: $!\n";

chmod 0755, $modified;

print "Created $modified\n"; 
```

# shell - awk 中的外部变量

> ID：13458804
> 
> 赞同：21
> 
> 时间：2012-11-19T17:13:52.430
> 
> 标签：shell, awk

我有一个脚本，其中的脚本片段是：

```
x=3
awk '$2=$x{print $1}' infile 
```

外部变量是`x`,

但它会提示错误`awk`

那么在这种情况下，如何使`awk`运行成功呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-19T17:32:08.423

您传递一个外部变量以用于`awk`选项`-v`：

```
some_variable=3
awk -v x=$some_variable '$2 == x {print $1}' infile 
```

另请注意，您需要将代码从更改`$2=$x`为`$2 == x`

*   改用：后者是`==`赋值`=`
*   不要在脚本`$`内部为普通变量添加前缀。`awk`

另外：您需要为`-v`要传入的每个变量指定一个，例如：

```
var1=2
var2=4
awk -v x=$var1 -v y=$var2 '$2 == x {print y " " $1}' infile 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-19T17:32:36.267

`awk`有一个`-v`用于此目的的选项，或者正如@nevelis 提到的，只需使用双引号：

```
awk -v x=3 ' $2==x {print $1} ' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-23T14:33:33.273

GAWK 还支持以下语法：

```
awk '$2 == x {print $1}' x=3 infile 
```

一个有趣的用法是：

```
awk '$2 == x {print $1}' x=3 infile1 x=10 infile2 
```

在这种情况下`x`将等于`3`for`infile1`和等于`10`for`infile2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-28T19:07:24.370

```
set -a    
x=3
awk '$2==ENVIRON["x"]{print $1}' infile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T17:15:50.817

Use "" - bash won't substitute single quotes.

Eg:

> x=3 awk "\$2=$x{print \$1}" infile

# mysql - 使用 IN 时订购

> ID：13458808
> 
> 赞同：2
> 
> 时间：2012-11-19T17:14:12.850
> 
> 标签：mysql

我只是想知道 IN 在 My SQL 查询中是如何工作的？

假设我有代码

```
select * from myTable WHERE id IN (5,9,2,4,6,3); 
```

这是否相当于

```
select * from myTable WHERE id = 5;
select * from myTable WHERE id = 9;
select * from myTable WHERE id = 2;
select * from myTable WHERE id = 4;
select * from myTable WHERE id = 6;
select * from myTable WHERE id = 3; 
```

## **或者**

顺序是随机的？

* * *

## 编辑 1

**这里 ORDER 并不意味着`ORDER BY`. 我的意思是先 5，然后是 9，然后是 2，依此类推**

## 或者

**随机顺序意味着先 4，然后 3，然后 2，依此类推....**

请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:20:58.543

不

在 MySQL 中，**IN**子句是使用***Binary Search***执行的。[参考](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)

这意味着搜索针对性能进行了优化，并且不会按顺序遍历列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:16:34.537

顺序是随机的（好吧，在技术上不是*随机*的，但你不能可靠地预测它）。您发布的查询相当于：

```
SELECT * FROM myTable WHERE id = 5 OR id = 9 OR id = 2 OR id = 4 OR id = 6 OR id = 3 
```

如果你想要一个特定的顺序，你将需要使用一个`ORDER BY`子句。`IN`无论您对规范中的值使用什么顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:20:12.057

不，你需要更具体。当您在单独的查询中查询 id 时，答案是否定的。如果需要订单，您需要添加 orderby 子句。此外，等于运算符始终是随机的，因此当您混合 IN 运算符和等于 where 子句中的顺序时，这一点很重要。

# jquery - jQuery：附加特定日期的所有数据的总和

> ID：13458809
> 
> 赞同：5
> 
> 时间：2012-11-19T17:14:18.737
> 
> 标签：jquery, json, sum

我从 API 中检索一些数据并将其附加如下：

```
if (jsontext == '[]') {
    return false
} else {

    var newTr = '';
    for (var i = 0; i < json.length; i++) {
        newTr += (' / ' + json[i].date + ' ' + json[i].price);

    }

    console.log(newTr);

} 
```

这给了我一个巨大的结果列表：

*/ 07-09-2012 72.60 / 11-09-2012 194.98 / 03-09-2012 94.82 / 04-09-2012 187.56 / 31-10-2012 72 / 18-09-2012 204.75 / 26-09-2012 243.3\. 14-09-2012 86.40 / 20-09-2012 91.63 / 28-09-2012 96.56 / 01-09-2012 94.62 / 17-09-2012 94.86 / 17-09-2012 83.25 / 12-09-2012 94.85 / -09-2012 94.86 / 18-09-2012 68.74 / 21-09-2012 94.86 / 21-09-2012 94.86 / 24-09-2012 144.23 / 28-09-2012 92.77 / 30-09-2012 92.77 / 28 09-2012 92.77 / 13-09-2012 151.12 / 03-09-2012 125.80 / 05-09-2012 92.61 / 05-09-2012 95.54 / 12-09-2012 94.59 / 12-09-2012 94.59 / 1 -2012 125.83 / 18-09-2012 109.38*

继续前进。

如何获取 09 月份的定价总和？

**日期格式为 dd-mm-yyyy**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:58:18.907

我假设您拥有的是如下所示的字符串，

```
"/ 07-09-2012 72.60 / 11-09-2012 194.98 / 03-09-2012 94.82 / 04-09-2012 187.56 / 31-10-2012 72 / 18-09-2012 204.75 / 26-09-2012 243.73 / 14-09-2012 86.40 / 20-09-2012 91.63 / 28-09-2012 96.56 / 01-09-2012 94.62 / 17-09-2012 94.86 / 17-09-2012 83.25 / 12-09-2012 94.85 / 18-09-2012 94.86 / 18-09-2012 68.74 / 21-09-2012 94.86 / 21-09-2012 94.86 / 24-09-2012 144.23 / 28-09-2012 92.77 / 30-09-2012 92.77 / 28-09-2012 92.77 / 13-09-2012 151.12 / 03-09-2012 125.80 / 05-09-2012 92.61 / 05-09-2012 95.54 / 12-09-2012 94.59 / 12-09-2012 94.59 / 13-09-2012 125.83 / 18-09-2012 109.38" 
```

如果是这种情况，那么您需要解析字符串以按月计算总和。

**演示：http:** [//jsfiddle.net/pBNNt/](http://jsfiddle.net/pBNNt/)

**完整代码：**

```
var resultArr = result.split('/');
var results = {}; //sum by month
for (var i = 0; i < resultArr.length; i++) {    
    if ( resultArr[i].length >= 11) { //it has date
        var resultTkn = resultArr[i].split(' ');

        if (resultTkn[1].length == 10) { //it is a date
            var date = resultTkn[1].split('-');
            var sum = 0;
            if (results.hasOwnProperty(date[1])) {
                sum = results[date[1]];
            }

            sum += parseFloat(resultTkn[2]);
            results[date[1]] = sum;
        }
    }
} 
```

现在您可以使用结果对象按月访问总和。`results["09"]`回来`3305.93`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T17:36:55.313

编辑：我试图根据评论尽可能清楚地解释这一点：

首先，您需要添加函数，该函数负责解析您的日期字符串（`input`格式为 dd-mm-yyyy 的参数），并返回正确的日期对象：

```
// parse a date in dd-mm-yyyy
function parseDate(input) {
    var parts = input.match(/(\d+)/g);
    // new Date(year, month [, date [, hours[, minutes[, seconds[, ms]]]]])
    return new Date(parts[2], parts[1] - 1, parts[0]); // months are 0-based
} 
```

在执行您所询问的写入功能之后 - 返回提供的月份的价格总和：

```
// get sum of prices for given month
function getSumForMonth(data, month) {
    var sum = 0;
    month -= 1; // months are 0-based 
    $.each(data, function (idx, item) {
        if (parseDate(item.date).getMonth() == month) {
            sum += parseFloat(item.price);
        }
    });
    return sum;
} 
```

要得到你想要的，你必须调用上面定义的函数。参数是你的`data`json 变量，`month`参数是你想要得到结果的月份的索引：

```
var sum = getSumForMonth(json, 9); // sum for september
console.log(sum); 
```

编辑 2：在反序列化的 json 对象中出现空项时的保护...

```
$.each(data, function(idx, item) {
    if (item != null && item.date != null && item.price != null) {
        if (parseDate(item.date).getMonth() == month) {
            sum += parseFloat(item.price);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:16:14.380

这只是 techfoobar 的解决方案，所以他值得称赞。仅仅因为拼写错误（我的而不是我的），它不起作用。这是适用于您的问题的完整列表。

请注意，这个 (=his) 是一个比公认的更好的解决方案，因为总和是在解析 json 时创建的，而不是通过再次拆分它（读取所有 json，将其合并到一个 var，再次拆分以计算总和都是无用的工作）。

```
var sums = [];

if (jsontext == '[]') {
    return false
} else {

    var mY;
    var newTr = '';
    for (var i = 0; i < json.length; i++) {
        newTr += (' / ' + json[i].date + ' ' + json[i].price);
        mY = json[i].date.split('-');
        mY = mY[1] + '-' + mY[2];
        sums[mY] == undefined ? sums[mY] = parseFloat(json[i].price) : sums[mY] += parseFloat(json[i].price);
    }

    console.log(newTr);

}

function getMonthSum(y,m) {
    return sums[y+"-"+m];
}

alert(getMonthSum("2012","09")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:31:15.993

尝试这个：

```
// declare before looping through your JSON
var sums = [];

...
newTr += (' / ' + json[i].date + ' ' + json[i].price);
...

// month-year
var mY = json[i].date.split('-');

/* EDIT: changed my to mY */
mY = mY[1] + '-' + mY[2];

// this will give you an array with sums for each month
sums[mY] == undefined ? sums[mY] = parseFloat(json[i].price) : sums[mY] += parseFloat(json[i].price); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T17:31:55.133

这是一个快速的片段：

```
 var string_array = yourStringLine.split("/");
    var length = string_array.length;
    var sum = 0;
    for(var y = 0; y < length; y++) {
       var date_data = string_array[y].split(" ");
       var month = date_data[0].split("-")[1];
       if(month == "09") {
            sum += parseFloat(date_data[1]);
       }
    } 
```

这很丑陋，但我认为您可以理解。这是简单的字符串解析。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T15:47:30.210

The simplest solution, and I would think obvious one, is to use Regular Expressions.

This function will do the test:

```
function forGivenMonth(month, input){
    var custom_regex = "[0-9]{2}-" + month + "-[0-9]{4}"
    var regex = new RegExp(custom_regex);
    if(regex.test(input)) {
      return true;
    } else {
      return false;
    }
} 
```

And then in your existing code:

```
if (jsontext == '[]') {
    return false
} else {
    var sum = 0;
    for (var i = 0; i < json.length; i++) {
        if(forGivenMonth("09", json[i].date){
            sum += json[i].price;
        }
    }
    console.log(sum);
} 
```

You can keep replacing the `"09"` in the function call with different months.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-25T18:57:15.450

我会说最好避免字符串拆分，因为它会表现不佳，并采用基于正则表达式的解决方案。虽然已经有了这样的答案，但我认为有更好的方法来做到这一点（一如既往，也可能有比这更好的方法）

在这里，我编写了一个函数，它可以接受源、月份和年份并返回总和。我避免使用拆分功能。

```
 function(source, month, year) {
        var rexp = new RegExp("/\\s+\\d{2}-" + month + "-" + year + "\\s+(\\d+\\.\\d+)\\s+", "g");

        var tot = 0;
        var m = rexp.exec(source);
        while (m) {
            var n = new Number(m[1]);
            tot += (n || 0.0)
            // This is only for debugging purposes
            $("#container").append($('<span>').text(" Found match : " + m[0] + ", Number => " + m[1] + ", Total => " + tot.toString())).append($('<br />'));

            m = rexp.exec(source);
        }

        return tot;
    } 
```

对于完整的解决方案检查这个[小提琴](http://jsfiddle.net/BuddhiP/NUmf4/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-28T16:48:42.667

```
// Testing Setup
var jsontext;
var json = [
    { date:"07-09-2012", price:"72.60"},
    { date:"11-09-2012", price:"194.98"},
    { date:"03-09-2012", price:"94.82"},
    { date:"04-09-2012", price:"187.560"},
    { date:"31-10-2012", price:"72"},
    { date:"18-09-2012", price:"204.75"},
    { date:"26-09-2012", price:"243.73"},
    { date:"14-09-2012", price:"86.40"},
    { date:"20-09-2012", price:"91.63"},
    { date:"28-09-2012", price:"96.56"},
    { date:"01-09-2012", price:"94.62"},
    { date:"17-09-2012", price:"94.86"},
    { date:"17-09-2012", price:"83.25"},
    { date:"12-09-2012", price:"94.85"},
    { date:"18-09-2012", price:"94.86"},
    { date:"18-09-2012", price:"68.74"},
    { date:"21-09-2012", price:"94.86"},
    { date:"21-09-2012", price:"94.86"},
    { date:"24-09-2012", price:"144.23"},
    { date:"28-09-2012", price:"92.77"},
    { date:"30-09-2012", price:"92.77"},
    { date:"28-09-2012", price:"92.77"},
    { date:"13-09-2012", price:"151.12"},
    { date:"03-09-2012", price:"125.80"},
    { date:"05-09-2012", price:"92.61"},
    { date:"05-09-2012", price:"95.54"},
    { date:"12-09-2012", price:"94.59"},
    { date:"12-09-2012", price:"94.59"},
    { date:"13-09-2012", price:"125.83"},
    { date:"18-09-2012", price:"109.38"}
];

//  New function
//
function sum( month, data ) {
    var sum = 0;
    $.each( data,function(i,val){
        var parts = val.date.split("-");
        if( parts.length==3 && parseInt(parts[1])==month ) {
            sum += parseFloat("0"+val.price);
        }
    });
    return sum;
}

// Your Code
//
if (jsontext == '[]') {
    return false
} else {

    var newTr = '';
    for (var i = 0; i < json.length; i++) {
        newTr += (' / ' + json[i].date + ' ' + json[i].price);

    }
    console.log(newTr);

    // !!!  THE CALL TO MY CODE !!!!
    console.log(sum(9,json));

} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-11-20T07:38:07.110

if (jsontext == '[]') { return false } else {

```
var newTr = '';
var newmonth=0'';
var sum=0;  
for (var i = 0; i < json.length; i++) {
    newTr += (' / ' + json[i].date + ' ' + json[i].price);

newmonth=parseDate(json[i].date).getMonth();
if (parseDate(json[i].date).getMonth() <> newmonth)
{
  newmonth=parseDate(json[i].date).getMonth();
  newTr += (' / '+'Total for month '+ newmonth +' :'+sum);
  sum = 0;
}
    else
{
   sum+= parseFloat(json[i].price);
}

}

console.log(newTr); 
```

}

函数解析日期（输入）{

```
var parts = input.match(/(\d+)/g);
// new Date(year, month [, date [, hours[, minutes[, seconds[, ms]]]]])
return new Date(parts[2], parts[1] - 1, parts[0]); // months are 0-based 
```

}

# java - Eclipse Indigo 在安装 m2e-wtp 插件时遇到问题

> ID：13458811
> 
> 赞同：2
> 
> 时间：2012-11-19T17:14:28.830
> 
> 标签：java, eclipse, maven, plugins, eclipse-wtp

我想在我的 Eclipse Indigo 中安装插件 m2e-wtp，它允许 maven 构建 .war 文件。

我尝试了使用市场以及安装软件选项，但我得到的是：

![在此处输入图像描述](../Images/82e729a1143d278de4a027b724c51d16.png)

在网站[https://www.eclipse.org/m2e-wtp/download/](https://www.eclipse.org/m2e-wtp/download/)我看到一条消息说：

> 请注意，m2e-wtp 和 Sonatype 的 m2eclipse-wtp 重叠，不能一起安装。

但我不明白这是否是我的情况。我检查了我安装的插件，我没有看到任何地方提到的 Sonatype，请看这张我的 m2e 安装插件的图像：

![在此处输入图像描述](../Images/73b3c40cc6af0a678f60c2f95ae1ad73.png)

我以为它可能已经安装了，所以我尝试从 svn 位置和本地工作区导入需要此插件的 maven 项目，但它不起作用：

![在此处输入图像描述](../Images/c1d5736f82ae27dd26b8889e10884465.png)

我的 Eclipse 中缺少什么，为什么我不能进行需要 m2e-wtp 插件的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:22:28.793

您没有在已安装的插件中​​看到该插件，因为安装失败：

> m2eclipse-wtp 项目已移至 Eclipse 基金会。*m2eclipse-wtp 插件现已弃用，取而代之的是较新的 m2e-wtp*
> 
> **从市场自动安装已暂停**。m2eclipse-wtp 0.15.3 可以从[http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/手动安装](http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/)

来自：[http ://marketplace.eclipse.org/content/maven-integration-eclipse-wtp](http://marketplace.eclipse.org/content/maven-integration-eclipse-wtp)

您应该`m2e-wtp`通过 Eclipse Marketplace 安装。请注意实际安装`m2e-wtp`而不是`m2eclipse-wtp`（只需搜索“m2e-wtp”，因为某些搜索实际上会调出旧的 m2eclipse-wtp 插件）。m2e 插件的 groupId 为`org.eclipse.m2e`.

# tcp - 通过 TCP 客户端使用远程计算机文件夹填充 TreeView

> ID：13458812
> 
> 赞同：0
> 
> 时间：2012-11-19T17:14:33.770
> 
> 标签：tcp, treeview, tcpclient, populate

我想制作一个资源管理器来使用远程计算机查看文件夹`TcpClient`

有人有任何解决方案吗？

我采用的方法是在服务器端，当我发送字符串“DirectoryInfo 路径”时，服务器启动`DirectoryInfo mypath`返回字符串中的文件夹并使用 NetworkStream 将它们发送回，然后我读取流并将它们添加到树中使用一个非常原始和糟糕的方法，例如：

```
TreeNode hdd1 = new TreeNode(@"C:\");
string[] folder =Regex.Split("return string from netStream", "\r\n");
foreach (string fd in folder)
{
hdd1.Nodes.Add(fd);
}
treeView1.Nodes.Add(hdd1); 
```

这就是我如何在“C:\”中获得第一个文件夹的方式，正如你所看到的，这是一种原始方法，关于如何做到这一点的任何想法？或者如何获取下一个子文件夹等等，或者至少改进我的代码？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T16:22:09.260

由于一切都非常有帮助，我设法找到了一种方法。

我使用递归方法将远程PC上的所有目录添加到a`TreeNode` 然后我使用`BinaryFormatter`序列化节点，然后使用`BinaryFormatter`反序列化我的PC上的节点并将其添加到`TreeView`.

欢迎其他方式在这里分享。

# scala - 如何让 gradle 为自定义源集生成 junit 测试结果报告？

> ID：13458813
> 
> 赞同：2
> 
> 时间：2012-11-19T17:14:41.117
> 
> 标签：scala, junit, gradle, specs2

我已经为我的项目中的功能测试设置了一个源集。一切都按预期工作，除了生成 junit 测试报告。我看不到我缺少什么配置位。这是我所拥有的：

```
sourceSets {
    // Note that just declaring this sourceset creates two configurations.
    funcTest {
        scala {
            srcDir 'src/funcTest/scala'
            compileClasspath += main.output
            runtimeClasspath += main.output
        }
    }
}

configurations {
    funcTestCompile.extendsFrom testCompile
    funcTestRuntime.extendsFrom testRuntime
}

task funcTest(type:Test){
    description = "Run integration tests (located in src/funcTest/...)."
    testClassesDir = project.sourceSets.funcTest.output.classesDir
    testSrcDirs = project.sourceSets.funcTest.scala.source
    classpath = project.sourceSets.funcTest.runtimeClasspath
    dependsOn test
} 
```

以上构建并运行我的测试。但是，报告目录结构如下所示：

```
./build/reports/tests/No source file found at src/test/scala/com/hp/snapfish/ecommerce/taxservice/mongo/base-style.css
./build/reports/tests/No source file found at src/test/scala/com/hp/snapfish/ecommerce/taxservice/mongo/css3-pie-1.0beta3.htc
./build/reports/tests/No source file found at src/test/scala/com/hp/snapfish/ecommerce/taxservice/mongo/MongoConfigTest.html
./build/reports/tests/No source file found at src/test/scala/com/hp/snapfish/ecommerce/taxservice/mongo/MongoConfigTest.scala.html
./build/reports/tests/No source file found at src/test/scala/com/hp/snapfish/ecommerce/taxservice/mongo/report.js
./build/reports/tests/No source file found at src/test/scala/com/hp/snapfish/ecommerce/taxservice/mongo/style.css 
```

我错过了什么？为什么要创造那个

> 在 src 找不到源文件

目录？我认为它需要知道它应该在寻找 scala 文件，但我不知道如何告诉它。我一定遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:05:08.920

在你的 build.gradle 文件中尝试这样的事情：

```
test {
    testLogging {
        // log results to "build/test-results" directory
        exceptionFormat "full"
        events "started", "passed", "skipped", "failed", "standardOut", "standardError"
    }
} 
```

然后，您应该在如下位置找到输出： project-root/build/test-results 。我不确定如何在“主”源主干上执行此操作，但这适用于“测试”主干。如果你有一个单元测试，你可以试试这个，也许会得到一个更好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T04:04:20.963

我不知道“在 src 找不到源文件”来自哪里，但尝试设置`testResultsDir`(XML) 和`testReportDir`(HTML)。无论如何，您都必须设置这些，否则您将覆盖`test`任务生成的文件。

```
reports.junitXml.destination = "$buildDir/test-results/TaskName"  
reports.html.destination = "$buildDir/test-results/TaskName" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:07:20.353

问题出在 scala 规范上（请参阅[https://groups.google.com/forum/?fromgroups=#!topic/specs2-users/zxOWrMEL8rY](https://groups.google.com/forum/?fromgroups=#!topic/specs2-users/zxOWrMEL8rY)）。这不是梯度问题。我需要对specs2进行更多调查。感谢您的建议。

# javascript - 如果 选中，向下滚动页面？

> ID：13458823
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:15:04.237
> 
> 标签：javascript, scroll

反正我可以做那个东西吗？
所以如果我们滚动一个选项，它会向下滚动到我想要的位置？

例如：

```
<select name="test>
<option>a</option>
<option>b</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:25:50.823

是的，假设您的标记反映了`select`选项，我建议，给定以下 HTML：

```
<select id="test">
    <option value="a">a</option>
    <option value="b">b</option>
    <option value="c">c</option>
</select>

<div id="a">
    <p>Contents in #a</p>
</div>

<div id="b">
    <p>Contents in #b</p>
</div>

<div id="c">
    <p>Contents in #c</p>
</div> 
```

你可以使用：

```
​var select = document.getElementById('test');

select.onchange = function(){
    window.location.hash = this.getElementsByTagName('option')[this.selectedIndex].value;
};​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QD2xs/)。

或者：

```
var select = document.getElementById('test');

select.onchange = function(){
    var id = this.getElementsByTagName('option')[this.selectedIndex].value,
        el = document.getElementById(id),
        top = el.offsetTop;
    window.scrollTo(0,top);
};​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QD2xs/1/)。

# bugzilla - new Status in bugzilla not showing up

> ID：13458824
> 
> 赞同：3
> 
> 时间：2012-11-19T17:15:05.880
> 
> 标签：bugzilla

I wanted to add a new Status I went to Administration->Field Values->Status

I then added a new one "WAITING-REPONSE" sortkey 50

But when i go back to an existing bug that status is not there?

Is there something else i need to do?

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:51:34.443

您必须将其包含在工作流程中：

管理 > 错误状态工作流程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T03:24:02.243

我们可以通过在 techzilla 数据库的“bug_status”表中添加新条目来在 Bugzilla 中添加新状态。

例如：-

```
+----+-------------+---------+----------+
| 编号 | 价值 | 排序键 | 活跃|
+----+-------------+---------+----------+
| 1 | 未确认 | 100 | 1 |
| 2 | 新 | 200 | 1 |
| 3 | 已分配 | 300 | 1 |
| 4 | 重新开放 | 400 | 1 |
| 5 | 已解决 | 500 | 1 |
| 6 | 已验证 | 600 | 1 |
| 7 | 关闭 | 700 | 1 |
| 8 | 回复 | 800 | 1 |
+----+-------------+---------+----------+
8 行一组（0.01 秒）

```

使用插入查询将新状态添加到此表中。

INSERT INTO bug_status VALUES('',........);

*   创建新的错误并在前端进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-06T07:48:26.000

遵循步骤：-

1）首先在管理角色的帮助下在“字段值”下添加错误状态。

2）转到“错误状态工作流程”并选中重新打开行的所有复选框。

3）现在从重新打开“验证重新打开”列中选择复选框

# r - Exclude arbitrary variables from summary tables in R

> ID：13458825
> 
> 赞同：3
> 
> 时间：2012-11-19T17:15:09.530
> 
> 标签：r, formatting

> **Possible Duplicate:**
> [how to succinctly write a formula with many variables from a data frame?](https://stackoverflow.com/questions/5251507/how-to-succinctly-write-a-formula-with-many-variables-from-a-data-frame)
> [omit some coefficients from mtable/outreg-type table](https://stackoverflow.com/questions/11040380/omit-some-coefficients-from-mtable-outreg-type-table)

I'm using write.mtable() from the memisc package to display results for several regressions in a (tab-separated) table that can be easily pasted into Word/Excel/etc.

Because these tables tend to get big pretty quickly, there are times when I want to restrict the output to an arbitrary subset of the variables included in the regressions.

Is there a simply way to *not* include results for certain explanatory variables in regression tables without actually removing these variables from the regressions themselves? The easy way is to just delete the rows once they've been pasted into Word/Excel/etc, of course, but perhaps there's a more elegant solution.

* * *

For example, starting with an example from the documentation for mtable:

```
lm0 <- lm(sr ~ pop15 + pop75,              data = LifeCycleSavings)
lm1 <- lm(sr ~                 dpi + ddpi, data = LifeCycleSavings)
lm2 <- lm(sr ~ pop15 + pop75 + dpi + ddpi, data = LifeCycleSavings)
mtable123 <- mtable("Model 1"=lm0,"Model 2"=lm1,"Model 3"=lm2, summary.stats=c("sigma","R-squared","F","p","N"))
mtable123 
```

Is it possible to remove, say, pop75 from the output as below (not that there's any reason to do this here, but as an example of the type of output I'm trying to achieve):

```
Calls:
Model 1: lm(formula = sr ~ pop15 + pop75, data = LifeCycleSavings)
Model 2: lm(formula = sr ~ dpi + ddpi, data = LifeCycleSavings)
Model 3: lm(formula = sr ~ pop15 + pop75 + dpi + ddpi, data = LifeCycleSavings)

==========================================
              Model 1   Model 2   Model 3 
------------------------------------------
(Intercept)  30.628***  6.360*** 28.566***
             (7.409)   (1.252)   (7.355)  
pop15        -0.471**            -0.461** 
             (0.147)             (0.145)   
dpi                     0.001    -0.000   
                       (0.001)   (0.001)  
ddpi                    0.529*    0.410*  
                       (0.210)   (0.196)  
------------------------------------------
sigma          3.931     4.189     3.803  
R-squared      0.262     0.162     0.338  
F              8.332     4.528     5.756  
p              0.001     0.016     0.001  
N             50        50        50      
========================================== 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:51:44.813

据我所知，您不能直接从`mtable`.

但是，您可以从模型本身中删除系数。例如，使用 lm0

```
lm0$coefficients 
```

将列出模型的各个部分。要删除“pop75”，您可以执行以下操作：

```
lm0$coefficients <- lm0$coefficients[names(lm0$coefficients) != "pop75"] 
```

你可以走了。要删除很多系数：

```
lm0$coefficients <- lm0$coefficients[!names(lm0$coefficients) %in% c("pop75","pop15")] 
```

如果你有一堆模型，你可以写一个循环或者使用`by`/`apply`来提高效率。

*注意：（`lm0$coefficients[names(lm0$coefficients)=="pop75"] <- NULL`即尝试删除 中的一个元素`list`）将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:28:56.043

好的，根据 Josh O'Brien 在评论中链接的问题和 Señor O 的代码，我认为这是做我想做的最简单和最灵活的方法：

```
excluded_vars <- c("pop75")
mtable123$coefficients <- mtable123$coefficients[,,!dimnames(mtable123$coefficients)[[3]] %in% excluded_vars,,drop=F]
mtable123 
```

此解决方案还应该使添加到要在显示中排除的变量列表变得相当容易。

感谢大家！！！

# javascript - websoket connection lost on ios 6 then getting a message

> ID：13458831
> 
> 赞同：0
> 
> 时间：2012-11-19T17:15:36.053
> 
> 标签：javascript, iphone, ios, html, websocket

I try to implement simple websocket application.
Client: [http://test1.w99.moonsite.co.il/](http://test1.w99.moonsite.co.il/)
admin: [http://test1.w99.moonsite.co.il/admin.html](http://test1.w99.moonsite.co.il/admin.html)

The client makes initial connection successfully but then it gets packet from admin, the connection is lost.
Failed on iphone 4 with IOS 6.0.1 with 3G connection. Works fine on canary chrome and iphone with wifi connection

did anyone implemented websocket application for iphone?

# django - Django 挂在 {% url %} 模板标签上

> ID：13458832
> 
> 赞同：1
> 
> 时间：2012-11-19T17:15:47.307
> 
> 标签：django, django-templates

我有 Django 安装，以前运行良好。现在它挂了 5 分钟，然后连接超时。

经过一番调查，我发现它在尝试反转模板中的 URL 时挂起。所以这里是总结：

1.  Devserver 在同一台机器上使用相同的代码可以正常工作
2.  Apache WSGI 下的 Django 对于没有 {% url %} 标记的模板可以正常工作（url 调度程序、视图处理程序、模板引擎）
3.  django shell 中的 reverse('search') 工作正常
4.  {% url search %} 挂起（不使用 CPU 或占用内存 - 只是挂起）

我还检查了缓存引擎（memcached）和 celery+rabbitMQ - 一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:45:25.077

也许有些牵强，但在 1.5 {% url 'path.to.some_view' %} 中是这样做的（注意撇号。）看看这是否有效并没有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:12:18.343

这似乎是 scipy 包的问题。出于某种原因，每当我安装 python-scipy 包（sudo apt-get install python-scipy）时，django 就会停止工作。仍然不知道为什么，但是在删除此包后，它又恢复了正常。

# jquery - Why is my Ajax returning data instead of a Google Chart?

> ID：13458844
> 
> 赞同：2
> 
> 时间：2012-11-19T17:16:34.700
> 
> 标签：jquery, ajax, charts

I'm currently trying to create charts loading data by jQuery/Ajax. I have a simple function:

```
function loadMorePosts(url){
$.ajax({
  url: url
}).done(function( html ) {
  $("#postDataTable").append(html);
});
} 
```

In the `<head>` section I have:

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script>
google.load("visualization", "1", {packages:["corechart"]});    
</script> 
```

Normally chart is draw with this code:

```
var dataPostChart1 = google.visualization.arrayToDataTable([
['Name:','x1:','x2:','x3:'],
['Count: ',61360,0,1873]
]);

var postOptions1 = {
legend: {'position':'none'},
chartArea: {left:40, width:150, height: 150},
colors: ['#6666ff','#33cc00','#cc00cc'],
vAxis: {'textStyle': {'fontSize': 10}},
hAxis: {'textPosition':'none', 'gridlines':{'count':0}}
};

var postChart1 = new google.visualization.ColumnChart(document.getElementById('graph10151496349581102_1'));
postChart1.draw(dataPostChart1, postOptions1); 
```

After loading via Ajax, I get the same data and no chart. What am I doing wrong?

# matlab - 计算传递函数系数

> ID：13458846
> 
> 赞同：0
> 
> 时间：2012-11-19T17:16:47.427
> 
> 标签：matlab

我已经导出了域中弹簧质量系统组合的传递函数，`s`它的形式为

```
G = (as*s + bs +c) / (ps + q) 
```

我有与位移相关的测量数据作为输入和力作为输出，我知道频率和采样率。

如何`a,b,c,p and q`使用 MATLAB 计算常量的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:32:40.447

是的，这可以使用`fminsearch`. 有关更多信息，请阅读[函数文档](http://www.mathworks.com/help/matlab/ref/fminsearch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:06:05.200

您没有提供足够的信息来给出完整的答案 (*)，但听起来您要进行某种最小二乘曲线拟合。`fminsearch`将为此工作，但有更好的选择。我倾向于使用`nlinfit`来自统计工具箱，但也有`lsqcurvefit`来自优化工具箱和`fit`来自曲线拟合工具箱。

(*) 您的数据到底是什么？在已知频率的正弦驱动力下，位移是时间的函数吗？但是您必须拥有多个驱动频率的数据，因为您需要了解多个频率的响应才能提取传递函数的所有 5 个参数，对吗？

# python - How can I make a pyrex extension type with multiple constructors

> ID：13458851
> 
> 赞同：2
> 
> 时间：2012-11-19T17:17:05.993
> 
> 标签：python, pyrex

I've got a Pyrex extension type like this:

```
cdef extern from "some_include.h":
  ctypedef struct AThing:
    ... 
```

It is wrapped by a Pythoninc extension type:

```
cdef class Foo:
  cdef AThing c_val
  def __init__(self, somestring):
    self.c_val = from_string(somestring) 
```

I would like to be able to create instances of this extension type from within Pyrex code elsewhere, using the existing C value, like so:

```
cdef some_func(avalue):
  cdef AThing val
  ...
  val = some_func()
  a_dict['foo'] = Foo()
  a_dict['foo'].c_val = val 
```

...but this results in "Cannot convert 'AThing' to Python object". What's the general technique to create a Pyrex extension type that can be initialised from both Python and C?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:34:39.183

我想通了。我的问题是我正在这样做：

```
rv = {}
rv['val'] = ExtensionType()
rv['val'].c_attr = val 
```

这不起作用，因为 rv['val'] 现在是一个 python 对象，所以你不能访问 cdef attrs。你需要使用中间的 cdef，像这样

```
cdef ExtensionType tmpvar
rv = {}
tmpvar = ExtensionType()
tmpvar.c_attr = val
rv['val'] = tmpvar 
```

# post - 用于获取 URL 的工具，该工具将使我的浏览器 POST 到不同的 URL

> ID：13458853
> 
> 赞同：2
> 
> 时间：2012-11-19T17:17:18.503
> 
> 标签：post, web, get

我记得几个月前我看到了一个可以解决我现在遇到的问题的工具。

我想要一个 URL，当我用浏览器访问它时（即使用 GET 请求），它会自动使我的浏览器“提交”一个带有指定 POST 数据的指定 URL 的 POST 表单。所有这些数据自然会在原始 URL 的 GET 变量中编码。（澄清一下，我不想要 AJAX 请求，我希望浏览器实际转到 POST URL。）

我记得有一个工具可以做到这一点。我可以自己写，但也许有人记得现有工具的名称/URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T23:56:54.753

完成：[https](https://github.com/cool-RR/get_to_post) ://github.com/cool-RR/get_to_post （根本没有记录，使用风险自负。）

# c# - 为什么我们需要将序列化属性装饰到类和属性或实现一些接口来持久化数据？

> ID：13458854
> 
> 赞同：1
> 
> 时间：2012-11-19T17:17:19.387
> 
> 标签：c#, serialization, json.net, cross-cutting-concerns

据我了解，大多数序列化/反序列化技术使用反射来创建对象并设置或获取值。那么为什么要在类中显式绑定这些属性，例如 [XmlIgnore]... 用于 xml，[Serializable]... 在二进制序列化中，[JsonPropery]...Json.Net 等。既然这些就对象而言就像横切关注点，我们不能在对象之外做同样的事情吗？

如果关注点分开，用户可以控制对象图/树的哪一部分需要在哪个上下文以及如何进行序列化/反序列化等？

是否有任何这样的框架使整个序列化成为方面，即在类的关注之外？

**Edit1：**我的要求如下我的应用程序将数据存储在一个巨大的树形结构中。客户的要求是能够以 xml 格式序列化某些数据，以及 Json 中的某些数据（我不知道为什么这样要求），我们将大部分数据以二进制序列化为遗留代码。

现在有一些类，其中一部分数据需要以 XML 格式显示，而另一部分（这些也可以是 xml 数据或二进制序列化数据的一部分）在 Json 中。

所以我正在寻找一个解决方案

1.  类不应该知道任何特定于序列化的属性，相反，序列化程序框架可以提供足够的工具来轻松地进行序列化而无需触及类。
2.  该框架应该允许保留我想要的私有和公共数据。这可以特定于类或实例，也可以特定于某些上下文中实例的某些属性。
    例如
    *   SaveTemplate：应该只保存树的每个分支中的几个节点
    *   SaveDocument：应该完全保存树中的一个分支
    *   SavePackage：应该保存整个树。
3.  应该允许序列化为不同的格式，如 xml、二进制、json 等以用于不同的目的。

所以我计划评估某些序列化框架以实现相同的目标。我发现 Json.Net 可以给我以下

*   **没有像xml 序列化**一样为公共属性放置序列化标签。
*   向后兼容二进制序列化。即我不必更改二进制序列化接口实现
*   不需要参数少的构造函数。

但是，我仍然需要上面第 2) 和 3) 点中提到的能力。我还没有详细探索过 Json.Net 或任何其他框架。

有什么框架可以帮助我实现同样的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:28:46.357

嗯，是。XML 序列化可以处理任何具有以下两个警告的对象，这两个警告都不需要属性修饰：

*   该对象必须有一个公共的、无参数的构造函数。
*   所有应序列化的信息必须位于公开可见的字段或属性中。

简单的。但是，没有属性的 XML 序列化会为对象生成“默认”XML 结构。如果您试图使通过序列化对象生成的 XML 类符合预先存在的 XML 文档格式，如 SOAP 请求或 HTML 或 XAML，则此默认结构可能不起作用，因此必须对其进行自定义通过使用任一属性，告诉内置序列化引擎如何调整它产生的内容，或使用自定义序列化例程，基本上覆盖内置引擎并完全按照您的意愿行事。

最基本的二进制序列化需要将一个属性 Serializable 应用于类本身。这只不过是对编译器或运行时的一个提示，即此类的定义应包含在为此目的而创建的一组“序列化程序集”中。然而，再一次，如果你只是告诉它对象*可以*被序列化，而不告诉它*如何*序列化，你会得到默认行为；可能包含您不想要的字段，或者序列化程序可能会遇到无法序列化的问题。

简而言之，有几个内置的或免费提供的序列化器可以使用最少的元数据；但是，如果它们不允许您自定义流程以准确产生所需的结果，那么它们的用处将受到极大限制。所以，他们做到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:15:10.420

通过您的编辑，除其他外引用私有字段：坦率地说，您正在扩展任何一个序列化程序将提供的功能集。您可能可以使用扩展 API 来完成其中的一些工作，但这将是很多工作，而不是 100%。如果花时间与序列化程序和调试作斗争，您将花费很多时间。

在这种情况下，有一个更好的解决方案：编写一组与您的域实体完全无关的 DTO 类型。序列化/反序列化 DTO - 随意注释 DTO，就像没有明天一样：它们的*唯一目的*是表达序列化意图。然后只需映射到/从 DTO 和实体类型。

这样，如果两全其美，您将获得最好的。序列化程序对 DTO 很满意（您可以根据需要调整数据，通过调整 DTO 类型），并且您的域实体非常干净，完全不知道序列化问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:26:32.007

通常，您的类/实例将具有许多与 XML 无关的私有字段和其他公共属性。

[XMLElement(...)] 之类的属性也用于定义永远不会更改的 XML 元素的名称。即使您更改了类中的属性名称，序列化和反序列化仍然有效。

如果您不想使用这些元素，您可以自由地实现自己的 XMLWriter 或 XMLReader。您还可以创建 XMLWriter 的实例并使用它的 Write 方法来编写您想要的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:41:15.700

是的。`XmlSerializer`如果您不介意`XmlAttributeOverrides`在运行时配置实例并将其传递给重载的构造函数，则可以这样做。使用这种方法，您可以使用 XML 属性做所有可以做的事情，但是在执行此操作时缓存和重用您创建的序列化程序**至关重要（不要每次都创建新实例）。**

对于二进制文件，protobuf-net 允许您在运行时通过`RuntimeTypeModel`例如`RuntimeTypeModel.Default.Add(typeof(SomeClass), false).Add("X", "Y", "Z");`. 然而，现实情况是，序列化程序通常很复杂，有很多选项。在大多数情况下，将配置与实体一起保存更容易。但是是的：有些确实允许您在运行时完全配置它们。

# html - 图像在滑过它们时似乎“剪切”

> ID：13458855
> 
> 赞同：3
> 
> 时间：2012-11-19T17:17:19.847
> 
> 标签：html, css, ipad

在 ipad 2（以及 ipad 3 上）上查看我的一个网站时，我遇到了一些奇怪的行为。

该网站是一个非常高的信息图，需要用户滚动/滑动浏览。所有图像都是`img`div/spans/paragraphs 上的标签或背景，并且是绝对定位的。当我滑过它们时，我的一些图像似乎发生了剪切。

这是一个[动画 gif](https://i.stack.imgur.com/pufjq.gif)，显示了我所看到的（不要盯着它看太久，它可能会催眠）：

![滚动剪](../Images/0be4932063602b3e39e6b1035b6da06a.png)

图像实际上应该如下所示：

![原始图像](../Images/8bb1ed0ada3262efc49c12b4c91af416.png)

我的示例中的图像不是特别大。它只是一个 110kb 的 24 位 png。

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:25:05.767

只是一个疯狂的猜测，但您可以尝试通过将以下样式应用于包含图像的元素来[强制 Safari 使用硬件加速：](http://davidwalsh.name/translate3d)

```
.forceAccel > * { -webkit-transform: translate3d(0,0,0); } 
```

只要我已经测试过，它通常可以解决闪烁的问题。

# ruby-on-rails-3 - Rails 3 - 如何替换回形针中的现有附件

> ID：13458859
> 
> 赞同：4
> 
> 时间：2012-11-19T17:17:21.417
> 
> 标签：ruby-on-rails-3, paperclip

我有一个发票模型。创建发票时，需要附件。这行得通。

如何在更新期间更换附件？我希望删除原始附件。当我在编辑屏幕上有相同的表单字段时，它不会在提交时更新。旧文件还在。此外，它显示“没有选择文件”，即使有一个。我可以单击查看附件，它显示得很好。

发票.rb

```
has_attached_file :attachment,
  :url => "http://...../attachments/:id/:style/:basename.:extension",
  :path => ":rails_root/public/attachments/:id/:style/:basename.:extension"
  validates_attachment_presence :attachment
  validates_attachment_size :attachment, :less_than => 5.megabytes 
```

_form.html.erb

```
<label>Invoice Attachment: </label>
<%= f.file_field :attachment %>

<%= link_to 'View Attachment', @invoice.attachment.url %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:14:02.367

您需要做的就是打电话`update_attributes`或等效，回形针会自动删除旧附件。例如，假设您有这个表格（来自[回形针文档](https://github.com/thoughtbot/paperclip#quick-start "回形针文档")）：

```
<%= form_for @user, :url => users_path, :html => { :multipart => true } do |form| %>
  <%= form.file_field :avatar %>
  ...
<% end %> 
```

在您的控制器中，您可能具有以下内容：

```
def update
  @user = User.find(params[:id])
  @user = User.update_attr(params)
end 
```

或者，如果您只想更新附件，您可以这样做：

```
def update
  @user = User.find(params[:id])
  avatar_data = params.slice('avatar')
  @user = User.update_attr(avatar_data)
end 
```

无论哪种情况，旧附件都将从存储中删除，新文件将取而代之。

# eclipse - 从 m2eclipse 运行对话框将 -D 参数传递给 maven

> ID：13458860
> 
> 赞同：14
> 
> 时间：2012-11-19T17:17:32.100
> 
> 标签：eclipse, maven, m2eclipse

我想知道如何从 m2eclipse 对话框将参数传递给 maven 的命令行。

这是我要为其创建配置的脚本（bat） - 使用 m2eclipse：

```
@echo off
set HOST_NAME=localhost.fds.com
set SECURE_ASSETS_PORT=9678

title Running Legacy Application

mvn -Dhostname=%HOST_NAME% -DASSET_SERVER_URL_OVERRIDE=https://%HOST_NAME%:%SECURE_ASSETS_PORT% -Dassets.port.num=9876 -Dassets.secure.port.num=%SECURE_ASSETS_PORT jetty:run -P assets 
```

![这是作为 Maven 构建对话框运行](../Images/dde2211418edb677179b9d07551f6bc7.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T17:53:02.543

这就是参数名称和值部分的用途。我认为您将 -D 关闭。

# bash - 将变量值转换为bash中的新变量

> ID：13458864
> 
> 赞同：1
> 
> 时间：2012-11-19T17:17:48.877
> 
> 标签：bash, shell

我在下面定义了一个函数。每次遍历数组时，我都希望它更新现有变量 ( `${1}_FLAG}`)。没有按我的预期工作。基本上，如果存在所述包的新版本，请将标志设置为 true，以便我可以调用另一个函数。

删除了“额外”变量，因为人们对它们很感兴趣。我需要的是在循环时更新`HTTP_FLAG` `PHP_FLAG`and变量。`MOD_QOS`

```
HTTP_FLAG=false
PHP_FLAG=false
MOD_QOS=false

PKGS=(HTTP PHP MOD_QOS);

check_new_version() {        
    # If a new version is available, download the source file
    if [ ${!check_version} != ${!current_version} ]
    then
        ...
        ...
        ${1}_FLAG=true
    fi
} 

for i in "${PKGS[@]}"
do
    check_new_version $i
done

if ${HTTP_FLAG}; then
    ...
    ...
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:46:35.520

我认为你需要`eval`：

```
$ set -- FOO
$ FOO_FLAG=false
$ eval ${1}_FLAG=true
$ echo $FOO_FLAG
true
$ 
```

在`bash`中，您想使用该`${!var}`符号，但我没有设法找到可行的直接调用。`var`这通过变量接近，但不完全存在：

```
$ var=${1}_FLAG
$ FOO_FLAG=false
$ ${!var}=true
bash: false=true: command not found
$ : ${!var}=true
$ echo $FOO_FLAG
false
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:34:32.780

bash 有[间接参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)，所以你可以这样做：

```
varname=${1}_LINK
value=${!varname} 
```

例子

```
$ foo_LINK="hello world"
$ set -- foo
$ varname=${1}_LINK
$ echo ${!varname}
hello world 
```

# php - Paypal Payflow 沙盒 ACH 错误

> ID：13458866
> 
> 赞同：1
> 
> 时间：2012-11-19T17:18:01.833
> 
> 标签：php, paypal

我在沙盒模式下运行 PayPals Payflow 服务（或至少尝试）。当我拨打电话时，我只会得到以下信息：

```
RESULT=25
RESPMSG=Not signed up for this tender type 
```

我不是在传递信用卡数据，而是在传递带有银行路由信息的 ACH 数据。

根据[PayPal](http://www.paypalobjects.com/en_US/vhelp/paypalmanager_help/result_values_for_transaction_declines_or_errors.htm)，它说：

> 无效的主机映射。您正在尝试处理诸如 Discover Card 之类的支付类型，但您的商业银行尚未设置为接受此卡类型。

有谁知道我如何**在 PayPal Payflow 中启用沙箱**以启用**ACH 测试**？此帐户将永远不会用于除沙盒之外的任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:54:21.767

我不得不联系 PayPal 在我的沙盒帐户中添加 ACH 功能。

# python - python只打印文本文件中的名称

> ID：13458868
> 
> 赞同：0
> 
> 时间：2012-11-19T17:18:11.670
> 
> 标签：python, string, python-3.x, namedtuple

我不能让它只打印名字。
这是我到目前为止得到
的，这里是malenames.txt的链接：

[http://www.ics.uci.edu/~kay/malenames.txt](http://www.ics.uci.edu/~kay/malenames.txt)

```
from collections import namedtuple
FN = namedtuple('FN','name percent people rank')
FirstN = namedtuple('FirstN','FN')

def firstname()->str:
    '''returns a firstname from text file'''
    filein = open('malenames.txt','r')
    for str in filein:
        s = str.split('\t')
        print (s)
    FN1 = FN(s)
    F1 = FirstN(FN1)
    for name in F1:
        print(name)

firstname() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:20:00.340

这应该这样做：

```
with open("malenames.txt") as f:
   for line in f:
      print (line.split()[0]) 
```

# opencv - 如何使用kmeans2估计颜色量化的簇数

> ID：13458870
> 
> 赞同：1
> 
> 时间：2012-11-19T17:18:37.580
> 
> 标签：opencv, k-means, quantization

我想用 kmeans2 算法量化一些图像。我的问题是找到（接近）最佳集群数。

有人知道如何估计集群的数量吗？我的想法是在 hsv-color-space 中创建色调的累积直方图。但我不知道如何使用这些信息来估计计数。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:40:47.200

我个人使用以下方法：

**伪代码**：

```
int k = 1;
double oldCompactness = std::numeric_limits<double>::max();
double compactness = kmeans(data, k);
while( compactness/oldCompactness < threshold ) {
    oldCompactness = compactness;
    k = k + 1;
    compactness = kmeans(data, k);
} 
```

紧凑性随着集群数量的增加而降低（如果集群与数据点一样多，它应该变为零）。

我应该指出，集群的最佳数量非常依赖于应用程序。例如，在您的应用程序中，我不知道您是否更喜欢高数据缩减（低 k）或良好的视觉表示（高 k）或折衷（*介于*两者之间）。

你可以[在这里](http://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set)寻找更多/更好的想法。或者[在这里](https://class.coursera.org/ml/lecture/preview/index)（第 8 周），如果您喜欢视频。

# c++ - 使用 sf_open_fd() 时，libsndfile 总是出现段错误

> ID：13458872
> 
> 赞同：1
> 
> 时间：2012-11-19T17:18:46.987
> 
> 标签：c++, memory, stream, libsndfile

我正在尝试为我正在构建的应用程序流式传输音频，但我遇到了我正在使用的库的障碍。这个库是 libSndFile。每当我调用此函数时，该库总是有一个 SEGFAULT `sf_open_fd(int fd, int mode, SF_INFO *info, int close_desc);`，而不是`sf_open(const char *path, int mode, SF_INFO *info)`因为我需要让 libSndFile 解码内存缓冲区中的数据。我无法理解`sf_virtual_open()`文档，所以我改用它。我可以使用 fileno() 获得一个有效的文件描述符（它通常返回 14）并且我的 FILE 流是有效的，所以它就是这个函数。我不知道它可能在哪里 SEGFAULTing 或在什么地方。有没有更好的方法让 libSndFile 解码内存缓冲区，或者我没有使用正确的方法？

这是问题代码（我添加了一些注释让它更有意义）

```
memset(&/*SF_INFO*/mInfo, 0, sizeof(SF_INFO));

/* FILE* */mpFileStream = tmpfile();

fwrite(/* void* */aBuffer, /*int*/aSize, 1, mpFileStream);

int iDescriptor = fileno(mpFileStream);

if(iDescriptor == -1)
{
    return /*enum EError*/EError_Unknown;
}

/* SNDFILE* */mFile = sf_open_fd(iDescriptor, SFM_READ, mInfo, SF_TRUE);

return mFile != NULL ? /*enum EError*/EError_None : /*enum EError*/EError_Unknown; 
```

我真的更喜欢不写入磁盘，但我必须获得一个有效的文件描述符和流。

注意：我正在使用 g++ 4.6.3 在 Xubuntu 12.04 上进行编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:36:04.597

可能在第一行：

memset(&/*SF_INFO*/mInfo, 0, sizeof(SF_INFO));

您稍后使用 mInfo 作为指针参数调用 sf_open_fd()，所以我猜测 mInfo 实际上是 SF_INFO* 而不是 SF_INFO。memset() 允许任何指针类型，因此您不会收到编译错误。

顺便说一句，您不需要写入磁盘 - tmpfile() 返回一个打开的文件，该文件应该与 fileno() 一起使用。

编辑：实际上，当您说您不知道 SEGFAULT 发生在哪里时，我可能误解了您的问题。我在 libsndfile 文档中发现的一件事是，如果您的程序链接到与库不同的运行时，则无法使用 sf_open_fd()。这可能是问题所在。

# python - Python，lxml - 获取兄弟标签的（大）孩子的文本

> ID：13458875
> 
> 赞同：3
> 
> 时间：2012-11-19T17:18:50.640
> 
> 标签：python, xml-parsing, lxml, siblings, dspace

我有一个要解析的 XML，这对我来说真的很棘手。

```
<bundles>
  <bundle>
    <bitstreams>
      <bitstream>
        <id>1234</id>
      </bitstream>
    </bitstream>
    <name>FOO</name>
  </bundle>
  <bundle> ... </bundle>
</bundles> 
```

我想遍历这个 XML 并找到名称**元素**值为“FOO”的**包的****比特流**内的所有**id值。**我对任何未命名为“FOO”的捆绑包不感兴趣，并且捆绑包中可能有任意数量的捆绑包和任意数量的比特流。

 ******我一直在用`tree.findall('./bundle/name')`它来查找 FOO 包，但这只是返回一个列表，我无法为**id**值单步执行：

```
for node in tree.findall('./bundle/name'):
if node.text == 'FOO':
 id_values = tree.findall('./bundle/bitstreams/bitstream/id')
 for value in id_values:
     print value.text 
```

这会打印出*所有*的 id 值，而不是 bundle 'FOO' 的值。

我如何遍历这棵树，找到**名为**FOO的**包**，获取这个**包**节点并收集嵌套在其中的**id**值？XPath 参数在这里不正确吗？

 ******我正在使用 Python 进行`lxml`绑定，但我认为任何 XML 解析器都可以；这些不是大型 XML 树。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T19:04:44.887

你可以使用`xpath`来达到目的。以下 Python 代码完美运行：

```
import libxml2
data = """
<bundles>
  <bundle>
    <bitstreams>
      <bitstream>
        <id>1234</id>
      </bitstream>
    </bitstreams>
    <name>FOO</name>
  </bundle>
</bundles>
"""
doc = xmllib2.parseDoc(data)
for node in doc.xpathEval('/bundles/bundle/name[.="FOO"]/../bitstreams/bitstream/id'):
    print node 
```

或使用`lxml`（`data`与上面的示例相同）：

```
from lxml import etree

bundles = etree.fromstring(data)

for node in bundles.xpath('bundle/name[.="FOO"]/../bitstreams/bitstream/id'):
    print(node.text) 
```

输出：

```
1234 
```

如果`<bitstreams>`元素总是在`<name>`元素之前，您还可以使用更高效的 xpath 表达式：

```
'bundle/name[.="FOO"]/preceding-sibling::bitstreams/bitstream/id' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:59:06.913

您的问题之一是“这里的 XPath 参数不正确吗？”。好吧，`findall()`不接受 XPath 表达式。它使用称为[ElementPath](http://lxml.de/tutorial.html#elementpath)的简化版本。此外，您的第二次调用与第`findall()`一次调用的结果没有任何关系，因此它只会返回`id`所有 s 中`bundle`的 s。

对您的代码稍作修改也应该可以工作（它与 XPath 表达式基本相同）：

```
for node in tree.findall('./bundle/name'):
    if node.text != 'FOO':
        continue
    id_values = node.getparent().findall('./bitstreams/bitstream/id')
    for value in id_values:
        print value.text 
```************

# java - 使用jung查找两个节点之间的所有最短路径

> ID：13458876
> 
> 赞同：1
> 
> 时间：2012-11-19T17:18:50.203
> 
> 标签：java, jung

我知道如何使用 DijkstraShortestPath 找到最短路径，但我想知道如何找到两个节点之间的所有最短路径，并将它们打印出来。

例如有两条最短路径都是顶点 A 和 C 之间的 3 跳，像这样打印出 [A,B,D,C] 和 [A,E,F,C] 谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:31:55.477

您必须稍微破解 DSP 代码才能做到这一点；JUNG 没有内置此功能。根据您的需要，您可以采用几种不同的方法来解决此问题，但基本思想是您找到终止条件并调整它们，并确保数据结构将存储你需要的东西。

# php - 将 POST 数据从 Android 应用程序发送到 PHP 脚本

> ID：13458878
> 
> 赞同：0
> 
> 时间：2012-11-19T17:18:56.597
> 
> 标签：php, android

我正在尝试从 android 应用程序向 PHP 脚本发送一些 POST 数据。PHP 脚本应该是什么样子的？这是我尝试过的，但它不起作用；

安卓代码：

```
class SendPostReqAsyncTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... params) {

        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.alex26.0fees.net/script.php");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("id", "12345"));
            nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {

    }
} 
```

PHP 脚本：

```
<?php
if(isset($_POST['id']))
    echo $_POST['id'];
if(isset($_POST['stringdata']))
    echo $_POST['stringdata'];
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:27:35.327

通过 POST 发送到 PHP 脚本的任何内容都以`$_POST`数组结尾。脚本将如何处理它是另一个问题。最简单的测试，将 $_POST 的内容写入名为“myfile.txt”的文件（注意每个请求都会覆盖文件的内容）：

```
<?php

    file_put_contents("myfile.txt", print_r( $_POST, true ));

?> 
```

在你的脚本中回显是没有意义的——你没有消耗服务器响应也没有显示它，那么它怎么能“工作”呢？

# php - 从数组创建 JSON 对象

> ID：13458881
> 
> 赞同：0
> 
> 时间：2012-11-19T17:19:10.903
> 
> 标签：php, arrays, json, object

我有一堆数组，我想从这些数组中创建一个 JSON 对象。

示例数组：

```
$brand = array('Kawasaki', 'Yamaha', 'Puch', 'Honda');
$colors = array('blue', 'red', 'yellow', 'blue'); 
```

我想要的输出：

```
$motorbikes = {
    motorbike1 {
        brand: 'Kawasaki',
        color: 'blue'
    },
    motorbike2 {
        brand: 'Yamaha',
        color: 'red'
    },
    motorbike3 {
        brand: 'Puch',
        color: 'yellow'
    },
    motorbike4 {
        brand: 'Honda',
        color: 'blue'
    }
} 
```

实现这一目标的最佳和最优雅的方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:20:39.573

最简单的方法是`json_encode()`。

`$brand_json = json_encode($brand);`

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

不过，修复这些数组。：

```
$brand = array('Kawasaki', 'Yamaha', 'Puch', 'Honda');
$colors = array('blue', 'red', 'yellow', 'blue'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T17:23:55.227

我只是把它放在一起，它不是你想要的输出的完美匹配，但它应该让你朝着你需要的方向前进。

```
<?php

$brand = array('Kawasaki', 'Yamaha', 'Puch', 'Honda');
$colors = array('blue', 'red', 'yellow', 'blue');

$temp = array();
for ($i = 0; $i < count($brand); $i++)  {
    $temp["motorbike$i"]['brand'] = $brand[$i];
    $temp["motorbike$i"]['color'] = $colors[$i];
}

echo json_encode($temp);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:30:43.900

```
$brand = array('Kawasaki', 'Yamaha', 'Puch', 'Honda');
$colors = array('blue', 'red', 'yellow', 'blue');

$motorbikes = array();

for($i=0; $i<count($brand); $i++)
{
    $motorbikes['motorbike' . ($i+1)] = array(
        'brand' => $brand[$i],
        'color' => $colors[$i]
    );
}

echo json_encode($motorbikes); 
```

**输出**（没有缩进）

```
{
    "motorbike1":{
        "brand":"Kawasaki",
        "color":"blue"
    },
    "motorbike2":{
        "brand":"Yamaha",
        "color":"red"
    },
    "motorbike3":{
        "brand":"Puch",
        "color":"yellow"
    },
    "motorbike4":{
        "brand":"Honda",
        "color":"blue"
    }
} 
```

[键盘演示](http://codepad.org/LAoCEjzQ)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T17:22:49.003

```
$motorbikes = array(
    'motorbike1' => array('brand' => 'Kawasaki', 'color' => 'Blue'),
    'motorbike2' => array('brand' => 'Yamaha', 'color' => 'Red'),
);

echo json_encode($motorbikes); 
```

# iphone - iOS 开发者是否有任何“主题”？

> ID：13458882
> 
> 赞同：6
> 
> 时间：2012-11-19T17:19:14.813
> 
> 标签：iphone, ios, ipad, uiappearance

我知道 iOS 框架有一个概念`UIAppearance`，允许您轻松调整应用程序中控件的视觉外观。我想知道是否有任何已发布的调色板/主题库在 iOS 环境中运行良好？

例如，iOS 等效的 jQuery Mobile 主题滚轮：

[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

（注意：我先用谷歌搜索了这个！）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T02:21:56.220

如果您正在寻找一种更好的方式来设置应用程序界面的样式，那么您有几个选择。

有一个开源项目 NUI，位于[https://github.com/tombenner/nui.git](https://github.com/tombenner/nui.git)

它允许您使用类似 CSS 的界面设置样式。一个缺点是您必须将一些类重命名为 NUI 接口类而不是标准用户接口类的固有类。

此外，还有 Pixate，它允许您在[http://www.pixate.com上使用 CSS 直接设置样式](http://www.pixate.com)

然而，根据他们的 Kickstarter 页面，它还没有上市，售价 300 美元。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T09:21:01.173

到目前为止，我已经找到了两种选择：

首先是[App Design Vault](http://www.appdesignvault.com/)。它们的价格范围从每个主题 59 美元到 89 美元不等。基本上你必须为不同的元素使用每个主题的 Apply 方法。缺点是您无法修改主题，如果您决定更改主题，则必须找到对主题应用方法的每次调用并将其更改为新主题。但是，这也使您能够混合不同的主题并同时使用它们。

接下来是[Pixate](http://www.pixate.com/)，它基本上从 CSS 文件中提取设计并将其应用于您的元素。这有一个免费试用版，许可证从 79 美元起，这是学术性的，最高可达 1299 美元。尽管许多 CSS 关键字与标准 CSS 相同，但是您需要了解它们的特殊查询和关键字才能充分利用它。当然，它们都有据可查。这样做的好处是，如果您决定更改主题，您需要做的就是替换 CSS 文件。

两者都在 Objective-C 和 MonoTouch (Xamarin) 中工作。我现在正试图看看哪个更适合与 Monotouch.Dialog 一起使用

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-02T20:18:37.560

总结和供将来参考，

应用程序设计

*   [http://www.pixeden.com/mobile-apps](http://www.pixeden.com/mobile-apps)
*   [http://www.appdesignvault.com/](http://www.appdesignvault.com/)

我们还有以下“CSS 引擎”

*   [http://www.pixate.com/](http://www.pixate.com/)
*   [https://github.com/tombenner/nui](https://github.com/tombenner/nui)
*   [http://nativecss.com/](http://nativecss.com/)
*   [https://github.com/robertwijas/UISS](https://github.com/robertwijas/UISS)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-08T08:39:14.600

我个人使用过[NUI](https://github.com/tombenner/nui)，它可以作为 cocoapod 使用，易于使用和定制。我投票给 NUI，虽然如果选择商业路线，[原生 CSS是一个不错的选择。](http://nativecss.com/)它具有一些非常好的内置开箱即用样式。

除了设置基本 iOS 组件的样式外，您还可以将自定义样式添加到特定元素并使其几乎像 CSS 一样工作

# javascript - 安装我的 Firefox 扩展后导航到网站

> ID：13458884
> 
> 赞同：0
> 
> 时间：2012-11-19T17:19:22.727
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在使用 Firefox Add-On SDK 1.1 来构建我的扩展程序，并且想知道如何在用户安装我的扩展程序后只打开一个新选项卡？

这个答案[在安装插件后在 Firefox 中打开我的页面](https://stackoverflow.com/questions/4824998/opening-my-page-in-firefox-after-installing-the-addon)并没有真正的帮助，因为它在插件 SDK 中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:50:55.620

当然它有帮助，您所要做的就是使用[simple-storage](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/simple-storage.html)而不是 prefs 和[tabs.open](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/tabs.html)而不是 gBrowser.addTab：

```
const tabs = require("tabs");
const storage = require("simple-storage");

if (storage.storage.first_run == undefined) {
    storage.storage.first_run = false;
    tabs.open("https://www.google.com");
} 
```

# c# - 访问 App.config

> ID：13458887
> 
> 赞同：0
> 
> 时间：2012-11-19T17:19:32.493
> 
> 标签：c#, configuration, connection-string, app-config

我的 App.config 中有以下内容，如何使下面的代码工作？？？？

```
configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="WpfDatabind3.Properties.Settings.cbfSQL1ConnectionString"
            connectionString="Data Source=STEPHANS-PC\SQLEXPRESS;Initial Catalog=cbfSQL1;Integrated Security=True"
            providerName="System.Data.SqlClient" />
    </connectionStrings>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
</configuration> 
```

我不知道如何访问 App.config 中的连接字符串。

```
DataSet myDataSet;

private void OnInit(object sender, EventArgs e)
{
  string mdbFile = Path.Combine(AppDataPath, "BookData.mdb");
  string connString = string.Format(
      "Provider=Microsoft.Jet.OLEDB.4.0; Data Source={0}", mdbFile);
  OleDbConnection conn = new OleDbConnection(connString);
  OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM BookTable;", conn);

  myDataSet = new DataSet();
  adapter.Fill(myDataSet, "BookTable");

  // myListBox is a ListBox control. 
  // Set the DataContext of the ListBox to myDataSet
  myListBox.DataContext = myDataSet;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T17:21:01.477

添加对`System.Configuration.dll`您项目的引用。然后使用[ConfigurationManager](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)类。它允许按名称获取连接字符串设置：

```
string connString = ConfigurationManager
   .ConnectionStrings["WpfDatabind3.Properties.Settings.cbfSQL1ConnectionString"]
   .ConnectionString; 
```

# javascript - 需要帮助理解 JS 代码

> ID：13458889
> 
> 赞同：1
> 
> 时间：2012-11-19T17:19:34.570
> 
> 标签：javascript, closures

嗨，我是 javascript 新手，无法理解以下代码：

```
var createAdders = function () {

    var fns = [];

    for (var i = 1; i < 4; i++) {

        fns[i] = (function (n) {
            return i + n;
        });
    }
    return fns;
}
var adders = createAdders();
adders[1](7); //11 ??
adders[2](7); //11 ??
adders[3](7); //11 ?? 
```

据我了解， 7 作为参数传递，但`createAdders()`没有将 7 分配给任何变量，这是否意味着 7 被传递给下一个函数，`createAdders()`即匿名函数并分配给变量`n`。

**我的逻辑正确吗？**

上面的代码似乎确实有效，但每次调用的结果都是 11。我在一个非常可靠的博客中找到了这段代码作为闭包有用的示例。然后以以下方式更改上面的代码以引用闭包的优点。

```
var createAdders = function () {
    var fns = [];
    for (var i = 1; i < 4; i++) {
        (function (i) {
            fns[i] = (function (n) {
                return i + n;
            });
        })(i)     //// why is (i) used here? what purpose does it serve??////
    }
    return fns;
}

var adders = createAdders();
adders[1](7); //8 
adders[2](7); //9 
adders[3](7); //10 
```

**这里是否也应用了相同的逻辑？**

**我需要了解如何为 n 分配值 7**

**为什么在新代码的函数末尾使用 (i)？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:34:57.357

在 JavaScript 中，我们没有块作用域，只有函数作用域。

在第一个示例中，唯一`i`声明的属于`createAdders`范围，这意味着在循环中创建的所有函数`for`都将在范围链中查找相同的内容`i`并返回相同的值。用代码解释：

```
//   here's the only `i` declaration
for (var i = 1; i < 4; i++) {

    fns[i] = (function (n) {
        return i + n; //this line will retrieve the `i` variable declared above,
                      //that being always 4 after the loop ends
    });
} 
```

在第二个示例中，您将在循环内创建一个带有[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)的新范围- 它为每次迭代创建一个新的执行上下文。

在 IIFE 内部创建的函数将访问 IIFE 的执行上下文的`i`. 这`i`对于每次迭代都是唯一的，因为您将外部传递`i`给 IIFE，这将成为 IIFE 的形式参数`i`。

简而言之，每次迭代都会`i`通过 IIFE 包装器创建一个新的执行上下文。

按顺序阅读评论：

```
//  1\. Outer `i` declared here
for (var i = 1; i < 4; i++) {
    (function (i) {// 3\. Outer `i` becomes the formal parameter `i` of the IIFE, 
                   // it is a "different" `i` in a new execution context (scope)
        fns[i] = (function (n) {
            return i + n; // 4\. seeks the `i` value of the IIFE
        });
    })(i) // 2\. Outer `i` passed to IIFE
} 
```

当您调用在 IIFE 内创建的函数时，作用域链将检索作用域链中“最接近的” ，即创建函数的 IIFE`i`的形式参数。`i`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:25:53.010

在第一个块中，`createAdders()`返回一个函数数组，每个函数（在函数体的内部`for`循环中创建`createAdders()`）将参数`n`（7 值）与`i`在循环中创建的变量相加，至此，在循环结束时，值为 4（这解释了 11）。

当您进行调用时，将返回`adders[1](7)`存储在数组`fns`中位置 1 的函数，然后使用参数调用该函数`n = 7`，然后该函数继续将此参数与函数的`i`变量相加`createAdders`（此时该值是`4`invoke `adders[1](7)`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:26:03.840

在 javascript 中，即使在外部函数完成执行后，内部函数也始终可以访问其外部函数变量。这种行为称为闭包。

在第一个片段中，您将迭代 3 次并将函数推入数组。当循环完成执行时，您的变量 i 设置为 4。您推入数组的函数可以访问此变量。所以无论你在数组的哪个索引处执行函数，你总是得到 11（4 + 7）。

在第二个片段中，您正在使用一个自执行匿名函数来保存 i 的值。这个匿名函数会在每次交互时立即执行。因为这个匿名函数内部定义的闭包函数每次都会引用 i 的新值。

所以你在数组中有一个三个函数，每个函数都有单独的值 i (1,2,3) 如下编写第二个片段可以更清楚

```
var createAdders = function(){
var fns = [ ];
for (var i=1; i<4; i++) { 
    (function(a) {
        fns[a] = (function(n) {
            return a+n;
        });
    })(i)    
}
return fns;} 
```

在javascript中，您可以将函数作为返回值。其次，数组可以在自己内部存储函数。

您在代码中所做的是在数组中推送一个函数，该函数接受单个参数，然后调用它。

```
adders[1](7); 
```

可以分解如下

```
var fn = adders[1];
fn(7); //thats how n is set to 7 
```

# rad - HTML5 Builder 更改客户端移动页面

> ID：13458890
> 
> 赞同：1
> 
> 时间：2012-11-19T17:19:42.813
> 
> 标签：rad, html5builder

我刚刚下载了 HTML5 Builder 的试用版，并创建了许多客户端移动页面。我认为有一种方法可以切换当前在我的测试应用程序中显示的客户端移动页面，但找不到如何执行此操作。这是一个不正确的假设吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:18:27.890

**您可以通过页面之间的链接**切换页面。

例如，如果您的主页名为*unit1.js*，并且您希望能够从那里转到*unit2.js ，请向**unit1.js*添加指向*unit2.php*的链接。（*不是错字，链接必须指向 .php 文件，然后在移动部署过程中修复*）

 **要创建链接，您可以使用例如**MLink**组件，并将目标页面写入其*Link*属性。**

# css - Firefox 打印时无法应用 CSS

> ID：13458894
> 
> 赞同：1
> 
> 时间：2012-11-19T17:19:54.083
> 
> 标签：css, firefox

我使用的是 Firefox 16.0.2。我想用导入文件中定义的 css 规则打印一个 div 内容。尝试在 Chrome 中打印时，它工作正常，但在 Firefox 中，打印的页面没有 css 格式。

```
<html>
    <head>
        import css here
    </head>
    <body>
        <div id="printable"></div>
    </body>
</html> 
```

使用javascript打印 div id=printable 时，paper 结果只有 HTML 内容，没有 CSS 规则，屏幕上的结果是完美的。是否有任何方法可以用于定义所有 css 的 Firefox 打印，任何帮助将不胜感激。

下面的补充是我打印 div 的 javascript

```
function print(id) 
{
    var mywindow = window.open('', id, 'height=600,width=800');
    var data = document.getElementById(id).innerHTML;
    mywindow.document.write('<html><head><title>Print</title>');
    mywindow.document.write('<link rel="stylesheet" href="../../lib/css/report/main.css" type="text/css" />');
    mywindow.document.write('</head><body >');
    mywindow.document.write(data);
    mywindow.document.write('</body></html>');

    mywindow.print();
    mywindow.close();

    return true;
} 
```

在 main.css 我尝试使用 @media print {#printable.....} 但它不起作用。在 Javascript 中，我尝试将 media="print" 放在链接标签中，但打印预览仍然没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:22:40.040

为什么不使用特定于打印的媒体查询呢？

```
@media print {
   #printable {
     /*Print style goes here*/
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:13:10.873

您的脚本写出一些 HTML 来开始加载样式表，然后`print()`在不等待样式表实际加载的情况下调用。您可能希望在触发`print()`该加载事件之前不调用。`<link>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:26:17.740

或者...尝试将 media="print" 添加到您的 div

所以做类似的事情：

```
<html>
    <head>
        import css here
    </head>
    <body>
        <div id="printable" media="print"></div>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-09T20:55:51.053

受到 Boris Zbarsky 的启发，经过更多的谷歌搜索，我得到了它的工作原理：

首先创建一个名为**print.html**的存根 HTML 文件：

```
<!doctype html>
<html lang='en-us'>
<head>
<meta charset='utf-8'>
<!-- the print.css link doesn't need to be of media type 'print' -->
<link rel='stylesheet' type='text/css' href='print.css'>
</head>
<body>
  <div id='print_this'>
    <!-- All the 'printable' stuff will be inserted here -->
  </div>
</body>
</html> 
```

然后在要打印的 html 文档中使用**jQuery ，创建一个窗口对象（称为***print_window ，如下所示）并使用***HTML 存根文件**加载它，然后收集您要打印的所有 HTML 并将其填充到*print_window*对象中。然后*打印*窗口对象：

```
// ============= jQuery ===============
function divPrint() 
{
    var print_window = window.open('print.html');  // Loads the HTML stub file
    // Do this in an onLoad event to make sure, before printing, CSS and all else
    // is loaded and ready -- else you'll likely get a blank page.
    print_window.onload = function () {
        // Create an array, containing the print_window object, that will be passed to the each() method.
        var pw = [this];
        // Find each element of class printable and grab its inner HTML and insert it into
        // the stub's 'print_this' block.
        $('.printable').each(function(index) {
            pw[0].document.getElementById('print_this').insertAdjacentHTML('beforeend', $(this).html());
        }, pw);

        // Print the print_window which is now embellished with all the stuff that was tagged as printable.
        this.print();
        this.close();
    }
}

$(document).ready(function() {
    $('#btnPrint').click(function(){
        divPrint();
    });
}); 
```

并且，这是上面 jQuery 代码可能处理的示例（也在同一个文件中）：

```
<!-- Note that the button doesn't get printed because it is not of class 'printable' -->
<button type='button' id='btnPrint'>Print Page</button>
<div id='stuff_not_to_print'>
  <h1>Your mother wears army boots!</h1>
</div>
<div class='printable'>
  <p>Your mother is a swell lady who's pretty, too!</p>
</div>
<div class='printable'>
  <p>Yer dad's pretty cool, too!</p>
</div>
<div>
  <p>This won't print!</p>
</div> 
```

然后，如果你想把上面的 HTML 格式化成非常漂亮的格式，那么创建一个名为 print.css 的 CSS 文件**，****HTML**存根文件**print.html**可以加载该文件。

# c - 将指针存储到地图中

> ID：13458897
> 
> 赞同：1
> 
> 时间：2012-11-19T17:20:10.090
> 
> 标签：c, pointers, map

这是我在做什么的一个粗略的想法：

```
Map map;
create_map(map); //initialize map
Value x,y;
while(...){
  ...
  x = ...;
  y = ...;
  put(map, x, (void *) &y);
  ...
} 
```

Map 的类型为 {Value, (void *)}。地图是自定义编写的，但我没有编写。我试图弄清楚它是在哪里定义的，如果我找到它会更新。映射所做的只是将 Value 和 (void *) 的关联存储在某种结构中。

我认为正在发生的事情是插入到地图中的值 y 没有得到我想要的值。它在 while 循环执行后存储 y 的任何值。我希望每次迭代的地址都不同，并指向不同版本的 y。

因此，对于上面的代码，对于映射中的任何键 X，它们都指向相同的值。我希望他们指向不同的价值观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:24:27.740

为了做你想做的事，你需要分配不同的“价值”副本，如下所示：

```
Map map;
Value x;
Value *y;
create_map(map); //initialize map
while(...){
  ...
  x = ...;
  y = malloc(sizeof(Value));
  *y = ...;
  put(map, x, (void *) y);
  ...
} 
```

只是不要忘记在最后解除分配。

# android - 数据库未关闭错误虽然在代码中关闭

> ID：13458901
> 
> 赞同：0
> 
> 时间：2012-11-19T17:20:11.980
> 
> 标签：android, sql

我有一个问题，我现在正在努力解决几天。它一直给我一个**错误，即我的数据库没有关闭**。我从我的 sql 数据库中取出项目并将它们放在带有自定义适配器的 gridview 中。如果您单击一个项目，它将带您到另一个类（answer.java）。什么都不做并点击后退按钮不会导致错误，但是如果我调用某个函数并在此函数之后点击后退按钮，我会**在按下后退按钮时**收到 close() 错误。所以这是确切的错误：

```
 11-19 19:56:22.485: E/Database(7403): close() was never explicitly called on database '/data/data/com.test.game/databases/quizDb' 
11-19 19:56:22.485: E/Database(7403): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
11-19 19:56:22.485: E/Database(7403):   at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1847)
11-19 19:56:22.485: E/Database(7403):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
11-19 19:56:22.485: E/Database(7403):   at com.test.game.db.DataBaseHelper.openDataBase(DataBaseHelper.java:117)
11-19 19:56:22.485: E/Database(7403):   at com.test.game.Answer.loadDataBase(Answer.java:179)
11-19 19:56:22.485: E/Database(7403):   at com.test.game.Answer.onClick(Answer.java:240)
11-19 19:56:22.485: E/Database(7403):   at android.view.View.performClick(View.java:2491)
11-19 19:56:22.485: E/Database(7403):   at android.view.View$PerformClick.run(View.java:9086)
11-19 19:56:22.485: E/Database(7403):   at android.os.Handler.handleCallback(Handler.java:587)
11-19 19:56:22.485: E/Database(7403):   at android.os.Handler.dispatchMessage(Handler.java:92)
11-19 19:56:22.485: E/Database(7403):   at android.os.Looper.loop(Looper.java:130)
11-19 19:56:22.485: E/Database(7403):   at android.app.ActivityThread.main(ActivityThread.java:3683)
11-19 19:56:22.485: E/Database(7403):   at java.lang.reflect.Method.invokeNative(Native Method)
11-19 19:56:22.485: E/Database(7403):   at java.lang.reflect.Method.invoke(Method.java:507)
11-19 19:56:22.485: E/Database(7403):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:861)
11-19 19:56:22.485: E/Database(7403):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:619)
11-19 19:56:22.485: E/Database(7403):   at dalvik.system.NativeStart.main(Native Method) 
```

我想我找到了导致此错误的代码部分，如果我不再在 answer.java 文件中调用 myDbHelper.insertString(...) ，我就不会再收到错误了...

```
public void insertString(int id, int level, String field, String player) {

    Cursor c = myDataBase.rawQuery(
            "SELECT * FROM ANSWERS WHERE QUESTION_ID=" + id
                    + " AND PLAYER ='" + player + "'", null);

    myDataBase = this.getWritableDatabase();

    if (c != null) {
        myDataBase.execSQL("UPDATE ANSWERS SET " + field + "=1"
                + " WHERE QUESTION_ID=" + id + " AND LEVEL =" + level
                + " AND PLAYER='" + player + "'");
    } else {
        myDataBase
                .execSQL("INSERT INTO ANSWERS (level, player, question_id, "
                        + field + ") VALUES ("+ level + ",'" + player + "'," + id + ", 1)");
    }

    c.close();
    if (myDataBase != null) {
        myDataBase.close();

    }

} 
```

我尝试但未解决的一件事是将其添加到我的 answer.java 文件中：

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            if (myDbHelper != null) {
                 myDbHelper.close();
            }
return true;
        }

        return super.onKeyDown(keyCode, event);
    } 
```

// 我的 databasehelper.java 中的 .close() 是：

```
@Override
public synchronized void close() {
    if (myDataBase != null)
        myDataBase.close();
    if (c != null)
        c.close();
    super.close();
} 
```

希望有人能给我指点灯！

编辑

@sam 你的解决方案给了我这个：

```
11-19 19:52:42.735: E/AndroidRuntime(6982): FATAL EXCEPTION: main
11-19 19:52:42.735: E/AndroidRuntime(6982): android.database.sqlite.SQLiteException: attempt to write a readonly database: UPDATE ANSWERS SET showhint1=1 WHERE QUESTION_ID=18 AND LEVEL =1 AND PLAYER='trst'
11-19 19:52:42.735: E/AndroidRuntime(6982):     at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1763)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at com.test.game.db.DataBaseHelper.insertString(DataBaseHelper.java:301)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at com.test.game.Answer.onClick(Answer.java:241)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at android.view.View.performClick(View.java:2491)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at android.view.View$PerformClick.run(View.java:9086)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at android.os.Handler.handleCallback(Handler.java:587)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at android.os.Looper.loop(Looper.java:130)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at java.lang.reflect.Method.invokeNative(Native Method)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at java.lang.reflect.Method.invoke(Method.java:507)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:861)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:619)
11-19 19:52:42.735: E/AndroidRuntime(6982):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:40:11.723

```
Cursor c = myDataBase.rawQuery(
        "SELECT * FROM ANSWERS WHERE QUESTION_ID=" + id
                + " AND PLAYER ='" + player + "'", null);

//Try adding this
myDatabase.close();

myDataBase = this.getWritableDatabase(); 
```

编辑：尝试进行如下更改：

```
myDatabase.close();
myDataBase = this.getWritableDatabase();
Cursor c = myDataBase.rawQuery(
        "SELECT * FROM ANSWERS WHERE QUESTION_ID=" + id
                + " AND PLAYER ='" + player + "'", null);

//move this to before the rawQuery
//myDataBase = this.getWritableDatabase(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:10:01.463

显然，您在多个位置打开数据库：

```
// myDataBase is already open or else this could not work
Cursor c = myDataBase.rawQuery(
        "SELECT * FROM ANSWERS WHERE QUESTION_ID=" + id
                + " AND PLAYER ='" + player + "'", null);

// You are opening myDataBase again
myDataBase = this.getWritableDatabase(); 
```

只需通过您的代码查找`getWritableDatabase()`并`getReadableDatabase()`找到您忘记关闭它的任何位置。*或者*，如果您经常访问数据库，请在 Activity 中打开数据库一次，`onResume()`然后在`onPause()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:57:47.220

这与其说是一个黑客的答案。但是您可以尝试在数据库助手类的 openDatabase 方法中关闭数据库。像下面这样的东西可能会起作用。

```
 if (this.db.isOpen()) {
       this.db.close();
    } 
```

# sql - where 子句中使用等于和 IN 的 CASE 语句

> ID：13458910
> 
> 赞同：1
> 
> 时间：2012-11-19T17:21:21.320
> 
> 标签：sql, sql-server-2008, case-statement, in-clause

```
WHERE CONDITION1='ABC'
AND Status =
    CASE  @Option 
            WHEN 1 THEN 'True'
            WHEN 2 THEN 'False'
            WHEN 3 THEN  NULL
            WHEn 4 THEN **IN ('True', 'False', NULL)**
    END 
```

如何编写一个查询，其中我的第一个选项直接匹配，`=` 但我的最后一个选项需要一个`IN`

上面的查询给出了错误，但我想要类似的东西，我无法找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:25:19.940

一条`CASE`语句不能返回一组值......但这个查询应该给你相同的结果：

```
WHERE CONDITION1='ABC'
AND Status =
    CASE  
        WHEN 1 THEN 'True'
        WHEN 2 THEN 'False'
        WHEN 3 THEN NULL
        WHEN 4 THEN Status
    END 
```

另外，请注意，除非您有`ANSI_NULLS OFF`, `Status`will never `= NULL`... 您需要`IS NULL`用于此比较，并且您需要`CASE`完全放弃该声明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T17:32:16.660

跳过 CASE 语句并使用 OR。并且根据 ANSI 标准[，不要与 NULL 比较](https://stackoverflow.com/questions/9004570/why-does-comparing-a-sql-date-variable-to-null-behave-in-this-way/9004627#9004627)：

```
WHERE CONDITION1='ABC'
AND ((@Option = 1 AND Status = 'True') OR
     (@Option = 2 AND Status = 'False') OR
     (@Option = 3 AND Status IS NULL) OR
     (@Option = 4 AND (Status IS NULL OR Status IN ('True', 'False')))) 
```

# magento - Magento Pro 配送方式未加载

> ID：13458914
> 
> 赞同：0
> 
> 时间：2012-11-19T17:21:27.203
> 
> 标签：magento

-- 这是 Magento Pro 版本。1.11.1.0--

出于某种原因，我新添加的统一费率模块正在破坏 Magento 的单页结帐。设置送货地址后，它会一直闪烁“正在加载下一步”，但下一步永远不会加载。禁用我的新模块使其再次工作。以下是相关的配置文件：

**/app/code/local/TEST/Shipping/etc/config.xml**

```
<?xml version="1.0"?>
<config>
    <modules>
        <TEST_Shipping>
            <version>0.1.0</version>
            <depends>
              <Mage_Shipping />
            </depends>
        </TEST_Shipping>
    </modules>
    <global>
        <models>
           <gtshipping>
                <class>TEST_Shipping</class>
            </gtshipping>
        </models>
        <resources>
            <gtshipping_setup>
               <setup>
                    <module>TEST_Shipping</module>
                </setup>
                <connection>
                    <use>directory_setup</use>
                </connection>
           </gtshipping_setup>
            <gtshipping_read>
                <connection>
                    <use>local_read</use>
                </connection>
            </gtshipping_read>
       </resources>
        <sales>
            <shipping>
                <carriers>
                    <flatrate2>
                        <class>TEST_Shipping_Model_Carrier_Flatrate2</class>
                    </flatrate2>
                </carriers>
            </shipping>
        </sales>
    </global>
    <default>
        <carriers>
            <flatrate2>
                <active>1</active>
                <sallowspecific>0</sallowspecific>
                <model>test_shipping_model_carrier_flatrate2</model>
                <name>Fixed</name>
                <price>5.00</price>
                <title>Flat Rate</title>
                <type>I</type>
                <specificerrmsg>This shipping method is currently unavailable. If you would like to ship using this shipping method, please contact us.</specificerrmsg>
                <handling_type>F</handling_type>
            </flatrate2>
        </carriers>
    </default>
</config> 
```

**/app/code/local/TEST/Shipping/etc/system.xml**

```
<?xml version="1.0"?>
<config>
<sections>
<carriers>
<groups>
<flatrate2 translate="label">
                    <label>Flat Rate</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>2</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <active translate="label">
                            <label>Enabled</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </active>
                        <name translate="label">
                            <label>Method Name</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>3</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </name>
                        <price translate="label">
                            <label>Price</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>5</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </price>
                        <handling_type translate="label">
                            <label>Calculate Handling Fee</label>
                            <frontend_type>select</frontend_type>
                            <source_model>shipping/source_handlingType</source_model>
                            <sort_order>7</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </handling_type>
                        <handling_fee translate="label">
                            <label>Handling Fee</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>8</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </handling_fee>
                        <sort_order translate="label">
                            <label>Sort Order</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>100</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </sort_order>
                        <title translate="label">
                            <label>Title</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>2</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </title>
                        <type translate="label">
                            <label>Type</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_shipping_flatrate</source_model>
                            <sort_order>4</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </type>
                        <sallowspecific translate="label">
                            <label>Ship to Applicable Countries</label>
                            <frontend_type>select</frontend_type>
                            <sort_order>90</sort_order>
                            <frontend_class>shipping-applicable-country</frontend_class>
                            <source_model>adminhtml/system_config_source_shipping_allspecificcountries</source_model>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </sallowspecific>
                        <specificcountry translate="label">
                            <label>Ship to Specific Countries</label>
                            <frontend_type>multiselect</frontend_type>
                            <sort_order>91</sort_order>
                            <source_model>adminhtml/system_config_source_country</source_model>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                            <can_be_empty>1</can_be_empty>
                        </specificcountry>
                        <showmethod translate="label">
                            <label>Show Method if Not Applicable</label>
                            <frontend_type>select</frontend_type>
                            <sort_order>92</sort_order>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </showmethod>
                        <specificerrmsg translate="label">
                            <label>Displayed Error Message</label>
                            <frontend_type>textarea</frontend_type>
                            <sort_order>80</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </specificerrmsg>
                        <model translate="label">
                              <label>Model</label>
                              <frontend_type>text</frontend_type>
                              <sort_order>900</sort_order>
                              <show_in_default>1</show_in_default>
                              <show_in_website>1</show_in_website>
                        </model>
                    </fields>
                </flatrate2>
            </groups>
        </carriers>
    </sections>
</config> 
```

**/app/code/local/TEST/Shipping/Model/Carrier/Flatrate2.php**

```
class TEST_Shipping_Model_Carrier_Flatrate2
    extends Mage_Shipping_Model_Carrier_Abstract
    implements Mage_Shipping_Model_Carrier_Interface
{

    protected $_code = 'flatrate2';
    protected $_isFixed = true;

    /**
     * Enter description here...
     *
     * @param Mage_Shipping_Model_Rate_Request $data
     * @return Mage_Shipping_Model_Rate_Result
     */
    public function collectRates(Mage_Shipping_Model_Rate_Request $request)
    {
        if (!$this->getConfigFlag('active')) {
            return false;
        }

        $freeBoxes = 0;
        if ($request->getAllItems()) {
            foreach ($request->getAllItems() as $item) {

                if ($item->getProduct()->isVirtual() || $item->getParentItem()) {
                    continue;
                }

                if ($item->getHasChildren() && $item->isShipSeparately()) {
                    foreach ($item->getChildren() as $child) {
                        if ($child->getFreeShipping() && !$child->getProduct()->isVirtual()) {
                            $freeBoxes += $item->getQty() * $child->getQty();
                        }
                    }
                } elseif ($item->getFreeShipping()) {
                    $freeBoxes += $item->getQty();
                }
            }
        }
        $this->setFreeBoxes($freeBoxes);

        $result = Mage::getModel('shipping/rate_result');
        if ($this->getConfigData('type') == 'O') { // per order
            $shippingPrice = $this->getConfigData('price');
        } elseif ($this->getConfigData('type') == 'I') { // per item
            $shippingPrice = ($request->getPackageQty() * $this->getConfigData('price')) - ($this->getFreeBoxes() * $this->getConfigData('price'));
        } else {
            $shippingPrice = false;
        }

        $shippingPrice = $this->getFinalPriceWithHandlingFee($shippingPrice);

        if ($shippingPrice !== false) {
            $method = Mage::getModel('shipping/rate_result_method');

            $method->setCarrier('flatrate2');
            $method->setCarrierTitle($this->getConfigData('title'));

            $method->setMethod('flatrate2');
            $method->setMethodTitle($this->getConfigData('name'));

            if ($request->getFreeShipping() === true || $request->getPackageQty() == $this->getFreeBoxes()) {
                $shippingPrice = '0.00';
            }

            $method->setPrice($shippingPrice);
            $method->setCost($shippingPrice);

            $result->append($method);
        }

        return $result;
    }

    public function getAllowedMethods()
    {
        return array('flatrate2'=>$this->getConfigData('name'));
    }

} 
```

任何人有任何想法为什么它不显示？我在控制台中没有看到 ajax 加载错误。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:45:29.333

固定的！这是由于模型的命名。test 需要在 config 的模型定义中大写。

# regex - 使用 grep 或 sed 更改值

> ID：13458917
> 
> 赞同：3
> 
> 时间：2012-11-19T17:21:49.637
> 
> 标签：regex, sed, grep

我可以用 grep/sed 增加 txt 文件中的一些数字吗？

我想找到文件中的所有数字并将它们增加 5。这可以使用 grep 和 sed 还是我需要为此编写应用程序？

编辑：文件有 n 行以数字开头 - 数字而不是一些文本。就像电影的标题。

示例行：

```
34 - 36 : Some text. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:28:16.277

您可以将 perl 用作：

```
perl -i -pe 's/(\d+)/$1+5/eg' filename 
```

[**看见**](http://ideone.com/ov6MU2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:27:48.670

应该是awk。将记录分隔符更改为空格（假设这是您想要做的），然后如果记录匹配正则表达式`^[0-9]*$`转换为数字加 5 并打印，否则打印。

这是一个非常完整的解决方案，但“留作练习”来编写代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:36:13.023

我相信您应该使用`awk` [更改字段的内容](http://www.gnu.org/software/gawk/manual/gawk.html#Changing-Fields)

```
>cat 1.txt
34 - 36 : Some text.

cat 1.txt | awk '{ $1=$1+5; $3=$3+5; print $0; }'
39 - 41 : Some text. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T00:19:32.490

这可能对您有用（GNU sed 和 Bash）：

```
sed 's/[0-9]\+/$((&+5))/g;s/.*/echo "&"/e'  file 
```

# magento - Magento 从 app/code/local 但不是 app/code/community 加载扩展

> ID：13458924
> 
> 赞同：1
> 
> 时间：2012-11-19T17:22:09.087
> 
> 标签：magento, magento-1.7

我们为 Magento 创建了一个扩展并放在 app/code/local 文件夹下。然后扩展正确加载。但是后来我们将扩展移动到 app/code/community 并且它不再起作用。通过将扩展名移动到另一个这样的文件夹，我们做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:32:26.180

在`app/etc/modules/namespace_modulename.xml`

改变

`<codePool>local</codePool>`

到

`<codePool>community</codePool>`

# gwt - 更喜欢使用 record.getAttribute 还是 record.getAttributeAsTYPE？

> ID：13458926
> 
> 赞同：0
> 
> 时间：2012-11-19T17:22:23.123
> 
> 标签：gwt, smartgwt

我将 MySQL 用于开发环境，但我的应用程序可能位于暂存环境的 SQLServer 上。

在我的数据库中，布尔值 ( `boolean`) 记录为**VARCHAR**，整数 ( `int`) 也记录为**VARCHAR**。

[像getAttributeAsBoolean(java.lang.String)](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/core/DataClass.html#getAttributeAsBoolean%28java.lang.String%29)这样的方法 record.getAttributeAsTYPE 是否合适/确定使用？还是使用类似的东西更好`type myvar = new TYPE(record.getAttribute("COLUNM_NAME"))`？

在解决方案 1 和 2 之间使用什么更好？

*示例 1：*

```
boolean mybool = record.getAttributeAsBoolean("COLUNM_NAME"); // Solution 1

boolean mybool = new Boolean(record.getAttribute("COLUNM_NAME")); // Solution 2 
```

*示例 2：*

```
int myint = record.getAttributeAsInt("COLUNM_NAME"); // Solution 1

int myint = new Interger(record.getAttribute("COLUNM_NAME")); // Solution 2 
```

对我来说，`VARCHAR`可能更`java.lang.String`接近于`java.lang.Boolean`或`java.lang.Integer`。因此，我认为在这些示例中，“解决方案 2”更加确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:30:44.697

这取决于。如果您绝对确定属性的值是您需要的类型，您应该使用 getAttributeAsTYPE()。您的数据源（如果您使用 ds.xml）如何定义该字段？它可能会被 smartGWT 隐式转换。

看起来您的值存储为字符串（例如：record.setAttribute("COLUMN_NAME", "12345")，调用 record.getAttributeAsInt("COLUMN_NAME") 可能会因类型异常而失败。在这种情况下，您唯一能做的就是要做的是实例化 Integer 或静态转换它：Integer.parseInt(recrod.getAttribute())。

getAttributeAsTYPE 很方便，我尽可能多地使用它，但您必须确保在设置时该值是正确的类型。

# mongodb - MongoDB pullAll 具有多个参数的对象

> ID：13458928
> 
> 赞同：3
> 
> 时间：2012-11-19T17:22:28.530
> 
> 标签：mongodb, pull, mongodb-query

我只想使用 pullAll 从 mongoDB 的数组中删除几个对象

```
db.collection.update({'_id': ObjectId(".....")}, { $pullAll : { 'notifications' : [{'type' : type}, {'id': id}]} }) 
```

为什么这不起作用？什么是正确的语法？

更新：

该文件是：

```
{
    "_id" : ObjectId("......"),
    "notifications" : [ { "type" : "aaa",
                          "id" : "123" },
                        { "type" : "bbb",
                          "id" : "123" },
                        { "type" : "ccc",
                          "id" : "234" }]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:40:49.040

您的问题可能是两个地方之一：

首先，您的更新存在语法问题：

```
db.collection.update({'_id': ObjectId(".....")}, 
     { $pullAll : 
         { 'notifications' : [{'type' : type}, {'id': id}]
         } 
     }
) 
```

应该：

```
db.collection.update({'_id': ObjectId(".....")}, 
     { $pullAll : 
         { 'notifications' : [{'type' : type, 'id': id}]
         }  
     }
) 
```

请注意，我将`}, {`type 和 id 删除并加入到单个 JSON 子文档中。

另一个问题是您的数组元素似乎具有`id`形式为“123”的字符串的值-您确定将字符串传递给更新语句吗？字符串“123”不等于整数 123。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:51:16.667

要使用*$pullAll*，您需要完全匹配整个对象。为什么不直接使用*$pull*，我相信它会满足您的需求

# ruby-on-rails - respond_to 在我的创建操作中表现得很奇怪

> ID：13458929
> 
> 赞同：0
> 
> 时间：2012-11-19T17:22:34.623
> 
> 标签：ruby-on-rails

我有以下控制器（非常基本）。

```
class ActivityTypesController < ApplicationController
  respond_to :html

  def show
    @model=ActivityType.find(params[:id])
    respond_with @model
  end

  def new
    @folder = Folder.find(params[:folder_id])
    @model = @folder.activity_types.build
    respond_with @folder, @model
  end

  def create
    @folder = Folder.find(params[:folder_id])
    @model = @folder.activity_types.build(params[:activity_type])

    if @model.save
      flash[:notice] = 'hoorraaaaayyy'
    end

    respond_with @folder, @model, location: root_path
  end

  def edit
    @folder = Folder.find(params[:folder_id])
    @model = ActivityType.find(params[:id])
    respond_with @folder, @model
  end

  def update
    @folder = Folder.find(params[:folder_id])
    @model = @folder.activity_types.find(params[:id])

    if @model.update_attributes(params[:activity_type])
      flash[:notice] = 'yeeeeaaaaaaah'
    end

    respond_with @folder, @model, location: root_path
  end 
```

有趣的是：动作中的`:location`选项`#create`被忽略，而在动作中`#update`，它被尊重。

我不知道，为什么会这样。更奇怪的是：当删除 inside 时，它​​似乎停留在`:location`动作上并呈现视图，而不是重定向到视图。`#create``#update``edit``#show`

有谁知道我如何追踪这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:16:15.223

我发现了问题。

我们有一个`activity_types/create.html.haml`仅呈现`_form.html.haml`部分视图的视图（这似乎是先前不干净的实现或新/创建操作组合的解决方法的遗留物）。

因为`respond_with`总是首先检查相应的视图，所以在创建之后，它会渲染`create`看起来与`edit`操作相同的视图。因此，如果您也遇到类似的情况，请确保您没有任何阻止`respond_to`重定向到任何其他操作的视图。

顺便说一句：如果您只接受`:html`请求，那么您只需要在and操作`respond_with`中调用，因此它会在出现错误时自动呈现and表单。但是，如果您想提供例如 JSON 或 XML 并拥有，那么您也需要在操作中使用 a （以及任何其他应使用数据响应调用的操作）。`create``update``new``edit``respond_to :xml``respond_with @my_model``#show``my_action.xml`

# python - 在python中向上计数然后向下计数

> ID：13458931
> 
> 赞同：6
> 
> 时间：2012-11-19T17:22:41.363
> 
> 标签：python

我正在尝试编写标准的蛇选秀，其中 A 队选择，B 队，C 队，C 队，B 队，A 队，令人作呕。

如果 13 号选秀权（或 x 号选秀权）刚刚发生，我如何才能确定哪支球队接下来会为 n 支球队选秀。

我有类似的东西：

```
def slot(n,x):
    direction = 'down' if (int(x/n) & 1) else 'up'
    spot = (x % n) + 1
    slot = spot if direction == 'up' else ((n+1) - spot)
    return slot 
```

我觉得有一个比这个解决方案更简单、更 Python 的东西。有人愿意破解它吗？

所以我又玩了一会儿。我正在寻找单个值的返回，而不是计算循环列表的最佳方法。最直接的答案可能是：

```
def slot(n, x): # 0.15757 sec for 100,000x 
    number_range = range(1, n+1) + range(n,0, -1)
    index = x % (n*2)
    return number_range[index] 
```

这将创建一个列表 [1,2,3,4,4,3,2,1]，计算出索引（例如 13 % (4*2) = 5），然后从列表中返回索引值（例如4）。列表越长，功能越慢。

我们可以使用一些逻辑将列表减半。如果我们向上计数（即`(int(x/n) & 1)`返回 False），我们会得到明显的索引值 (x % n)，否则我们从 n+1 中减去该值：

```
def slot(n, x): # 0.11982 sec for 100,000x 
    number_range = range(1, n+1) + range(n,0, -1)
    index = ((n-1) - (x % n)) if (int(x/n) & 1) else (x % n)
    return number_range[index] 
```

仍然完全避免列表是最快的：

```
def slot(n, x): # 0.07275 sec for 100,000x
    spot = (x % n) + 1
    slot = ((n+1) - spot) if (int(x/n) & 1) else spot
    return slot 
```

如果我将列表作为变量而不是产生一个：

```
number_list = [1,2,3,4,5,6,7,8,9,10,11,12,12,11,10,9,8,7,6,5,4,3,2,1]
def slot(n, x): # 0.03638 sec for 100,000x
    return number_list[x % (n*2)] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T17:33:56.973

为什么不使用 itertools[`cycle`](http://docs.python.org/2/library/itertools.html#itertools.cycle)功能：

```
from itertools import cycle
li = range(1, n+1) + range(n, 0, -1) # e.g. [1, 2, 3, 4, 4, 3, 2, 1]
it = cycle(li)

[next(it) for _ in xrange(10)] # [1, 2, 3, 4, 4, 3, 2, 1, 1, 2] 
```

注：之前我已经回答了如何上下跑，如下：

```
it = cycle(range(1, n+1) + range(n, 0, -1)) #e.g. [1, 2, 3, 4, 3, 2, 1, 2, 3, ...] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T17:38:13.970

这是一个可以满足您想要的生成器。

```
def draft(n):
    while True:
        for i in xrange(1,n+1):
            yield i
        for i in xrange(n,0,-1):
            yield i

>>> d = draft(3)
>>> [d.next() for _ in xrange(12)]
[1, 2, 3, 3, 2, 1, 1, 2, 3, 3, 2, 1] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T17:50:39.133

```
from itertools import chain, cycle

def cycle_up_and_down(first, last):
    up = xrange(first, last+1, 1)
    down = xrange(last, first-1, -1)
    return cycle(chain(up, down))

turns = cycle_up_and_down(1, 4)
print [next(turns) for n in xrange(10)] # [1, 2, 3, 4, 4, 3, 2, 1, 1, 2] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-20T20:56:22.020

这是一个先加后减的数字列表：

```
>>> [ -abs(5-i)+5 for i in range(0,10) ]
[0, 1, 2, 3, 4, 5, 4, 3, 2, 1] 
```

写出来：

```
count_up_to = 5
for i in range( 0, count_up_to*2 ):
  the_number_you_care_about = -abs(count_up_to-i) + count_up_to
  # do stuff with the_number_you_care_about 
```

更容易阅读：

```
>>> list( range(0,5) ) + list( range( 5, 0, -1 ) )
[0, 1, 2, 3, 4, 5, 4, 3, 2, 1] 
```

写出来：

```
count_up_to = 5
for i in list( range(0,5) ) + list( range(5, 0, -1) ):
  # i is the number you care about 
```

另一种方式：

```
from itertools import chain
for i in chain( range(0,5), range(5,0,-1) ):
  # i is the number you care about 
```

# android - 使用手势更改 ImageView 中的图像

> ID：13458932
> 
> 赞同：0
> 
> 时间：2012-11-19T17:22:47.540
> 
> 标签：android, imageview

我正在尝试实现一些东西来改变 ImageView 中的图像，比如图像库。

我有这个 XML 来显示 ImageView

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical">
    <HorizontalScrollView
            android:id="@+id/hsv_ScrollImage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:scrollbars="none">
            <ImageView
                android:id="@+id/id_imgFinal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>    
        </HorizontalScrollView>    
</LinearLayout> 
```

我的应用程序显示处于横向模式的图像，这就是我使用 Horizo​​ntalScrollView 的原因。现在我遇到了问题，我会尝试用某种手势实现一些改变为其他图像的东西，但我不知道 Horizo​​ntalScrollView 是否对此有问题。有人可以帮我吗？哪种方法最常用于此活动？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:46:16.190

[这里](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)有一个很好的 ViewPager 教程。您甚至可以与[Gesture-ImageView](https://github.com/jasonpolites/gesture-imageview/)集成以向图库添加缩放功能。

啊! 不要忘记[将此补丁](https://github.com/photo/gesture-imageview/commit/58445b80cee19eafd5436d8a5cf6df6fcec4af12)添加到 Gesture-ImageView 以更好地集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:59:27.650

使用 Gallery UI 小部件怎么样？正是针对这样的场景。[这是](http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/)它的教程和[参考](http://developer.android.com/reference/android/widget/Gallery.html)。

# physics - 时间和空间的连贯性

> ID：13458937
> 
> 赞同：1
> 
> 时间：2012-11-19T17:23:06.340
> 
> 标签：physics

如果发生以下情况，我在相干性实验中会有什么样的结果（形成的干涉图案，总吞吐量强度是否改变）：

1) Rc 大于 R 且 t 小于 tc 2) Rc 大于 R 且 t 大于 tc 3) Rc 小于 R 且 t 小于 tc 4) Rc 小于且 t 大于 tc

其中 Rc 和 tc 是光束的空间和时间相干长度（在这种情况下是激光）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T02:29:06.717

在所有四种情况下，都没有形成干涉图案。为了发生干扰，两个源都必须具有空间和时间相干性。

参考这个链接： [http ://www.phys.ttu.edu/~huang24/Teaching/Phys2401/LectureNotes/Ch37A.pdf](http://www.phys.ttu.edu/~huang24/Teaching/Phys2401/LectureNotes/Ch37A.pdf)

[http://www.phys.uconn.edu/~gibson/Notes/Section5_2/Sec5_2.htm](http://www.phys.uconn.edu/~gibson/Notes/Section5_2/Sec5_2.htm)

[http://www.phys.uconn.edu/~gibson/Notes/Section5_3/Sec5_3.htm](http://www.phys.uconn.edu/~gibson/Notes/Section5_3/Sec5_3.htm)

# html - 当我添加 doctype 时，我的 1 个 div 移动

> ID：13458940
> 
> 赞同：-2
> 
> 时间：2012-11-19T17:23:20.177
> 
> 标签：html

我正在尝试向我的索引页面添加一个文档类型，但每次我这样做时都会将 div 移动到屏幕的左上角。

我可以看到类似的问题，但无法理解它们与我的关系。

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <head>
    <title>Crafty Pixies</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

    <script type="text/javascript">
    <!-- hide from none JavaScript Browsers 
    if (document.images) {
    img1 = new Image();
    img1.src = "images/bac01.png";
    img2 = new Image();
    img2.src = "images/05_01.png";
    img3 = new Image();
    img3.src = "images/05_03.jpg";
    img4 = new Image();
    img4.src = "images/buttons/05_04.png";
    img5 = new Image();
    img5.src = "images/buttons/05_04-over.png";
    img6 = new Image();
    img6.src = "images/buttons/05_06.png";
    img7 = new Image();
    img7.src = "images/buttons/05_06-over.png";
    img8 = new Image();
    img8.src = "images/buttons/05_07.png";
    img9 = new Image();
    img9.src = "images/buttons/05_07-over.png";
    img10 = new Image();
    img10.src = "images/buttons/05_08.png";
    img11 = new Image();
    img11.src = "images/buttons/05_08-over.png";
    img12 = new Image();
    img12.src = "images/05_11.png";
    img13 = new Image();
    img13.src = "images/05_02.png";
    img14= new Image();
    img14.src = "images/Cards/06_01s.png";
    img15= new Image();
    img15.src = "images/Cards/06_02s.png";
    img16 = new Image();
    img16.src = "images/Cards/06_04s.png";
     img17 = new Image();
    img17.src = "images/Cards/06_05s.png";
    img18 = new Image();
    img18.src = "images/Bags/08_01s.png";
    img19 = new Image();
    img19.src = "images/Bears/10_01s.png";
    img20= new Image();
    img20.src = "images/Babies/12_01s.png";
    img21 = new Image();
    img21.src = "images/cases/09_01s.png";
    img22 = new Image();
    img22.src = "images/logos/twitlog.png";
    img23 = new Image();
    img23.src = "images/logos/fbbadge.bmp";
    // End Hiding -->
    </SCRIPT> 

    <style type="text/css">
    body.noScroll { 
       background-color: #AF8750;
       background-attachment: absolute;
    }

    { font-family: 'Lucida Casual', 'Comic Sans MS'; color: #8C6A3E
    }
    h1
    { font-family:'Lucida Casual', 'Comic Sans MS';
    }
    h2
    { font-family:'Lucida Casual', 'Comic Sans MS';
    }
    h3
    { font-family:'Lucida Casual', 'Comic Sans MS';
    }
    h4
    { font-family:'Lucida Casual', 'Comic Sans MS';
    }
    p
    { font-family:'Lucida Casual', 'Comic Sans MS';
    }
    img
    {  border-style: none;
    }
    table { border: 2px double #AF8750;  background-color: #DEA862; font-family: 'Lucida     Casual', 'Comic Sans MS'; color: #8C6A3E
    }
td { border: 2px double #AF8750; font-family: 'Lucida Casual', 'Comic Sans MS'; color: #8C6A3E
    }
tr { border: 2px double #AF8750; font-family: 'Lucida Casual', 'Comic Sans MS'; color: #8C6A3E
    }
    a:link {font-family: 'Lucida Casual', 'Comic Sans MS'; color:#8C6A3E;} /* unvisited link */
    a:visited {font-family: 'Lucida Casual', 'Comic Sans MS'; color:#ffffff;;} /* unvisited link */
    a:hover {font-family: 'Lucida Casual', 'Comic Sans MS'; color:#ffffff;;} /* unvisited link */
    a:active {font-family: 'Lucida Casual', 'Comic Sans MS'; color:#ffffff;;} /* unvisited link */
    </style>
    </head>

    <BODY bgcolor="#AF8750">

    <div id="layer2" style="position:absolute; top:188; left:35; width:280; height:307; z-index:2; padding:0px; background-color:#DEA862; border: 0px;">
    <table style="position:relative; top:4; left:4; width:270; cellpadding:2; cellspacing:2;">
    <tr>
    <td colspan="2" align="center">
    <h3><b>Follow Us</b></h3>
    </td>
    </tr>
    <tr>
    <td></td>
    </tr>
    <tr>
    <td align="center" valign="middle"><a href="http://twitter.com/craftypixies" target="_blank"><img src="images/logos/twitlog.png" alt="" /></a></td>
    <td align="center" valign="middle"><a href="http://en-gb.facebook.com/craftypixies" target="_blank"><img src="images/logos/fbbadge.bmp" alt="" /></a></td>
    </tr>
    </table>
    </div>
    <a href="index.htm"><img style="position:absolute; TOP:15px; LEFT:330px; WIDTH:136px; HEIGHT:56px; PADDING: 0px; BORDER: 0px" src="images/buttons/05_04.png" alt="" /></a> 
    <a href="products.htm"><img style="position:absolute; TOP:15px; LEFT:468px; WIDTH:136px; HEIGHT:56px; PADDING: 0px; BORDER: 0px" src="images/buttons/05_06.png" alt="" /></a> 
    <a href="contact.htm"><img style="position:absolute; TOP:15px; LEFT:604px; WIDTH:136px; HEIGHT:56px; PADDING: 0px; BORDER: 0px" src="images/buttons/05_07.png" alt="" /></a> 
    <a href="links.htm"><img style="position:absolute; TOP:15px; LEFT:740px; WIDTH:136px; HEIGHT:56px; PADDING: 0px; BORDER: 0px" src="images/buttons/05_08.png" alt="" /></a> 
    <img style="position:absolute; TOP:15px; LEFT:25px; WIDTH:300px; HEIGHT:56px; PADDING: 2px" src="images/05_01.png" alt="" /> 
    <img style="position:absolute; TOP:73px; LEFT:25px; WIDTH:300px; HEIGHT:110px; PADDING: 2px" src="images/logos/05_03.jpg" alt="" /> 
    <img style="position:absolute; TOP:500px; LEFT:25px; WIDTH:300px; HEIGHT:20px; PADDING: 2px" src="images/05_11.png" alt="" /> 
    <img style="position:absolute; TOP:73px; LEFT:329px; WIDTH:548px; HEIGHT:73px; PADDING: 2px" src="images/05_12.png" alt="" /> 
    <img style="position:absolute; TOP:235px; LEFT:329px; WIDTH:548px; HEIGHT:129px; PADDING: 2px" src="images/05_13.png" alt="" /> 
    <img style="position:absolute; TOP:486px; LEFT:329px; WIDTH:548px; HEIGHT:41px; PADDING: 2px" src="images/05_14.png" alt="" /> 
    <a href="cards.htm"><img style="position:absolute; TOP:150px; LEFT:332px; WIDTH:89px; HEIGHT:83px; Border: 0px" src="images/cards/06_01s.jpg" alt="" /> 
    <img style="position:absolute; TOP:150px; LEFT:423px; WIDTH:89px; HEIGHT:83px; Border: 0px" src="images/cards/06_02s.jpg" alt="" /> 
    <img style="position:absolute; TOP:150px; LEFT:514px; WIDTH:89px; HEIGHT:83px; Border: 0px" src="images/cards/06_04s.jpg" alt="" /> 
    <img style="position:absolute; TOP:150px; LEFT:605px; WIDTH:89px; HEIGHT:83px; Border: 0px" src="images/cards/06_05s.jpg" alt="" /> 
    <img style="position:absolute; TOP:150px; LEFT:697px; WIDTH:89px; HEIGHT:83px; Border: 0px" src="images/cards/06_02s.jpg" alt="" /> 
    <img style="position:absolute; TOP:150px; LEFT:787px; WIDTH:89px; HEIGHT:83px; Border: 0px" src="images/cards/06_01s.jpg" alt="" /></a> 
    <a href="bags.htm"><img style="position:absolute; TOP:365px; LEFT:332px; WIDTH:133px; HEIGHT:114px; Border: 0px" src="images/bags/08_04s.jpg" alt="" /></a> 
    <a href="bears.htm"><img style="position:absolute; TOP:365px; LEFT:468px; WIDTH:133px; HEIGHT:114px; Border: 0px" src="images/bears/10_01s.jpg" alt="" /></a> 
    <a href="baby.htm"><img style="position:absolute; TOP:365px; LEFT:605px; WIDTH:133px; HEIGHT:114px; Border: 0px" src="images/babies/12_01s.jpg" alt="" /></a> 
    <a href="cases.htm"><img style="position:absolute; TOP:365px; LEFT:742px; WIDTH:133px; HEIGHT:114px; Border: 0px" src="images/cases/09_01s.jpg" alt="" /></a>
    </body>
     </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:46:29.627

这就是您的 HTML 文档的开头应该是什么：

```
<!doctype html>

<html>
<head>
    <title>Crafty Pixies</title>
    <meta charset="utf-8"> 
```

只需将此部分复制粘贴到文档的开头，*而不是*在该元素之前拥有的所有`<script>`内容。

现在，确保一切看起来都正确，**不要**更改这个顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:51:25.890

[按照绝对定位不使用 XHTML](https://stackoverflow.com/questions/4932480/absolute-positioning-not-working-with-xhtml)的建议，添加`px`到您的`top`、和div id "layer2" 中的属性？.`left``width``height`

# objective-c - 为什么标签栏隐藏在导航上？

> ID：13458941
> 
> 赞同：1
> 
> 时间：2012-11-19T17:23:22.357
> 
> 标签：objective-c, ios, xcode, uinavigationcontroller, uitabbarcontroller

我创建了一个标签栏应用程序，当在 viewcontroller 1 中单击按钮时存在一个模式视图控制器，并且使用导航控制器我可以从模式视图导航到 Viewcontroller2 我的问题是，当我导航到 viewController2 时，标签栏是隐藏的，如何显示标签栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:55:24.670

如果您将视图控制器推送到导航控制器的堆栈中，则标签栏将保留：

```
[self.navigationController pushViewController:viewController2 animated:YES]; 
```

但是，如果您将其呈现为模态视图控制器，那么它将成为顶部/最前面的视图（以全屏显示），从而隐藏标签栏，直到视图控制器被关闭：

```
[self presentViewController:viewController2 animated:YES completion:nil]; 
```

模态视图控制器的重点是强制用户在应用程序内执行任何其他操作之前处理呈现的视图控制器。如果您需要访问`viewController1`in ，那么您可以在显示视图控制器之前`viewController2`声明一个属性`viewController1 *previousViewController`in`viewController2`并设置`viewController2.previousViewController = self;`(in )。`viewController1`或者，您可以尝试将视图（在定义框架时减去标签栏的高度）添加到标签栏控制器的视图中。

# heroku - 云上的 Node.js TCP 套接字服务器 [Heroku/AppFog]

> ID：13458943
> 
> 赞同：11
> 
> 时间：2012-11-19T17:23:37.287
> 
> 标签：heroku, cloud, appfog, non-web

*可以在Cloud*上运行面向 Node.js TCP Socket 的应用程序，更具体地说是在**Heroku**或**AppFog**上。

它不会是一个 Web 应用程序，而是一个用于访问客户端程序的服务器。基本思想是利用*云*的能力——可扩展性和易于使用的平台。

我知道这样的应用程序可以轻松地在*Amazon AWS*等 IaaS 上运行，但我真的很想利用*Heroku*或*AppFog*的 PaaS 功能。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T09:14:09.130

我有理由确定这不能回答手头的问题：“是否可以运行面向 Node.js TCP Socket 的应用程序”。所有 PaaS 公司（包括 Nodejitsu）都支持仅 HTTP[S] 的传入连接反向代理。

通常对于 node.js + 任何带有面向套接字的连接的 PaaS，您都希望使用 WebSockets，但是：

1.  Heroku 不支持 WebSockets，并且只会将您的连接保持打开 55 秒（请参阅：[https](https://devcenter.heroku.com/articles/http-routing#timeouts) ://devcenter.heroku.com/articles/http-routing#timeouts ）

2.  AppFog 不支持 WebSockets，但我不确定它们如何处理长期持有的 HTTP 连接。

3.  Nodejitsu 支持 WebSockets 并将保持您的连接打开直到关闭或重置。我们的 node.js 驱动的反向代理让我们非常便宜。

我们计划在未来通过自定义端口支持前端 TCP 负载平衡。敬请关注！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T21:29:07.230

AppFog 和 Heroku 为您的应用程序提供了一个任意端口来侦听，该端口是从端口 80 映射的端口。您无需选择端口。如果您需要长时间保持连接打开，请参阅下面的我的编辑。如果您的客户端不需要维护和打开连接，您应该考虑创建一个 RESTful API，它会发出 json 供您的客户端应用程序使用。80 端口已经足够了，Node.js 和 Express 是在 paas 上创建 API 的绝佳组合。

**应用雾**

[https://docs.appfog.com/languages/node#node-walkthrough](https://docs.appfog.com/languages/node#node-walkthrough)

```
var port = process.env.VCAP_APP_PORT || 5000; 
```

**Heroku**

[https://devcenter.heroku.com/articles/nodejs](https://devcenter.heroku.com/articles/nodejs)

```
var port = process.env.PORT || 5000; 
```

**编辑**：如 indexzero 所述，AppFog 和 Heroku 仅支持 http[s] 并关闭长期保持的连接。只要有活动，AppFog 就会保持连接打开。这可以通过使用 Socket.io 或[Pusher等第三方解决方案来解决](http://pusher.com/ "推杆")

```
// Socket.io server
var io = require('socket.io').listen(port);
...
io.configure(function () { 
  io.set("transports", ["xhr-polling"]); 
  io.set("polling duration", 12); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T09:55:41.473

tl;博士 - 以目前的世界状况，这根本**不可能**；您必须购买具有自己公共 IP 地址的虚拟机。

我发现的所有 PaaS 提供商在其所有应用程序前面都有一个 HTTP 路由器。这使他们能够在一个 IP 地址下容纳数十万个应用程序，极大地提高了可扩展性，因此 - 他们如何免费提供应用程序托管。因此，在 HTTP 的情况下，`Hostname`标头用于唯一标识应用程序。

但是，在 TCP 情况下，必须使用 IP 地址来标识应用程序。因此，为了使其发挥作用，PaaS 提供商将被迫从其 IPv4 范围内为您分配一个。这将无法扩展主要有两个原因：IPv4 地址空间已完全耗尽，以及“传统”网络的缓慢步伐将使虚拟机物理移动变得困难。（“传统”网络是指标准/非 SDN 网络。）

这两个问题的解决方案是 IPv6 和 SDN，尽管我预见到无处不在的 SDN 会在 IPv6 之前出现——然后它可以用来解决各种 IPv4 问题。尽管还有很长的路要走，但亚马逊已经在他们的数据中心使用了 SDN。同时，只需购买一个具有公共 IP 地址的虚拟机/linux 容器实例并在那里运行您的 TCP 服务器。

# django - Django：从更新对象创建对象时输入日期格式不同

> ID：13458945
> 
> 赞同：2
> 
> 时间：2012-11-19T17:23:46.013
> 
> 标签：django, django-forms, django-settings

当我创建一个对象并将日期放入具有 dd/mm/yyyy 格式的输入文本字段时（witch 是我想要的应用程序格式），它工作正常。但是当我尝试修改它时（这意味着我获取了该对象的密钥并在数据库中更新它），输入日期格式更改为 yyyy-mm-dd （我认为这是默认值）并且该`is_valid()`方法永远不会返回 True . 我做了很多事情，包括覆盖 locale formats.py 文件，但它仍然不起作用。

这是我的settings.py：

```
# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Caracas'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

#Path for date formats
FORMAT_MODULE_PATH  = 'config.formats'

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True 
```

我的 forms.py（第一个类用于创建，第二个用于更新/修改）：

```
class CrearPizarraForm(forms.Form):
    """
    Form para crea pizarra
    """
    nombre = forms.CharField(max_length=50)
    descripcion = forms.CharField(max_length=100, widget=forms.Textarea)
    fecha_creacion = forms.DateField()
    fecha_final = forms.DateField()

    class ModificarPizarraForm(forms.Form):
    """
    Form para modificar pizarra
    """
    nombre = forms.CharField(max_length=50)
    descripcion = forms.CharField(max_length=100, widget=forms.Textarea)
    fecha_final = forms.DateField() 
```

我在views.py中的创建方法：

```
@login_required
def crear_pizarra(request):
    """
    Metodo que crea una nueva pizarra llamando a CreadorPizarra
    """
    if request.method == 'POST':
        #solucion temporal al problema del formato de fecha
        form = CrearPizarraForm(request.POST)
        if form.is_valid():
            data = form.cleaned_data
            #Variables que se pasaran al metodo CreadorPizarra
            nombrepiz = data['nombre']
            descripcionpiz = data['descripcion']
            fechaCreacion = data['fecha_creacion']
            fechaFinal = data['fecha_final']
            #Se obtiene el usuario actual para ponerlo de creador (verificar)
            usuario = request.user
            #Metodo que guarda la pizarra en la base de datos.
            CreadorPizarra(nombrepiz,descripcionpiz,fechaCreacion,fechaFinal,usuario)
            lista = obtener_pizarras(request)
            return render(request, 'app_pizarras/listar.html', { 'lista' : lista, })
        else:
            return render(request, 'app_pizarras/crear_pizarra.html',{'form': form, })

    form = CrearPizarraForm()
    return render(request, 'app_pizarras/crear_pizarra.html', { 'form': form, }) 
```

我在views.py中的修改方法：

```
@login_required
def modificar_pizarra(request):
    """
    Metodo que sirve para modificar una pizarra de la base de datos
    """
   if request.method == 'POST':
      if request.POST.__contains__('nombre'):
          form = ModificarPizarraForm(request.POST)
            if form.is_valid():
                data = form.cleaned_data
                #Variables que se pasaran al metodo CreadorPizarra
                nombrepiz = data['nombre']
                descripcionpiz = data['descripcion']
                fechaFinal = data['fecha_final']
                #Metodo que guarda la pizarra en la base de datos.
                modificar(nombrepiz,descripcionpiz,fechaFinal,)
                lista = obtener_pizarras(request)
                return render(request, 'app_pizarras/listar.html', { 'lista' : lista, })
            else:
                print "form no valido"
                idpiz = request.POST['idpiz']
                lista = []
                lista.append(request.POST['nombre'])
                lista.append(request.POST['descripcion'])
                lista.append(request.POST['fechafinal'])
                return render(request, 'app_pizarras/modificar_pizarra.html', { 'form': form, 'idpiz' : idpiz, 'lista' : lista }) 
```

我还创建了一个配置目录，其中的格式目录包含到“en”目录中，日期格式的覆盖文件formats.py：

```
# -*- encoding: utf-8 -*-
# This file is distributed under the same license as the Django package.
#

# The *_FORMAT strings use the Django date format syntax,
# see http://docs.djangoproject.com/en/dev/ref/templates/builtins/#date
DATE_FORMAT = 'd/m/Y'
TIME_FORMAT = 'P'
DATETIME_FORMAT = 'N j, Y, P'
YEAR_MONTH_FORMAT = 'F Y'
MONTH_DAY_FORMAT = 'F j'
SHORT_DATE_FORMAT = 'd/m/Y' 
SHORT_DATETIME_FORMAT = 'm/d/Y P'
FIRST_DAY_OF_WEEK = 0 # Sunday

# The *_INPUT_FORMATS strings use the Python strftime format syntax,
# see http://docs.python.org/library/datetime.html#strftime-strptime-behavior
DATE_INPUT_FORMATS = (
            '%d/%m/%Y',  # '25/10/2006'
                # '%b %d %Y', '%b %d, %Y',            # 'Oct 25 2006', 'Oct 25, 2006'
                    # '%d %b %Y', '%d %b, %Y',            # '25 Oct 2006', '25 Oct, 2006'
                        # '%B %d %Y', '%B %d, %Y',            # 'October 25 2006', 'October 25, 2006'
                            # '%d %B %Y', '%d %B, %Y',            # '25 October 2006', '25 October, 2006'
                            )
TIME_INPUT_FORMATS = (
            '%H:%M:%S',     # '14:30:59'
                '%H:%M',        # '14:30'
                )
DATETIME_INPUT_FORMATS = (
            '%m/%d/%Y %H:%M:%S',     # '10/25/2006 14:30:59'
                '%Y-%m-%d %H:%M:%S',     # '2006-10-25 14:30:59'
                    '%Y-%m-%d %H:%M',        # '2006-10-25 14:30'
                        '%Y-%m-%d',              # '2006-10-25'
                            '%m/%d/%Y %H:%M',        # '10/25/2006 14:30'
                                '%m/%d/%Y',              # '10/25/2006'
                                    '%m/%d/%y %H:%M:%S',     # '10/25/06 14:30:59'
                                        '%m/%d/%y %H:%M',        # '10/25/06 14:30'
                                            '%m/%d/%y',              # '10/25/06'
                                            )
DECIMAL_SEPARATOR = u','
THOUSAND_SEPARATOR = u'.'
NUMBER_GROUPING = 3 
```

我认为 Django 可以识别最后一部分，因为日期以预期的格式显示，问题是我更新时的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:10:02.913

尝试在 ModificarPizarraForm 类中为 DateField 设置 input_formats：

```
 fecha_final = forms.DateField(input_formats=settings.DATE_INPUT_FORMATS) 
```

* * *

从[表单字段文档的 DateField 部分](https://docs.djangoproject.com/en/dev/ref/forms/fields/#datefield)：

> 如果未提供 input_formats 参数，则默认输入格式为：
> 
> *   '%Y-%m-%d', # '2006-10-25'
> *   '%m/%d/%Y', # '10/25/2006'
> *   '%m/%d/%y', # '10/25/06'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:47:16.093

我认为您的代码是正确的，请检查您的模板是否存在错误。

# javascript - 用于检查用户代理字符串中是否存在关键字的正则表达式

> ID：13458946
> 
> 赞同：3
> 
> 时间：2012-11-19T17:23:48.567
> 
> 标签：javascript, regex

我在 Javascript 中使用正则表达式来嗅探用户代理字符串。下面是一些伪代码：

```
is_not_tablet_bool = /android.+mobile/i.test(navigator.userAgent.toLowerCase());
switch(true)
{
     case (is_not_tablet_bool):
         return true;
     break;
} 
```

我正在尝试制作一个正则表达式，它会做一些与上述相反的事情，即

1.  确保 'android' 关键字出现在字符串中，同时
2.  确保字符串中没有“mobile”关键字

感谢预期的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T17:30:54.777

## 负前瞻

正则表达式有一个称为负前瞻的结构，它匹配正则表达式中的字符串而不捕获前瞻部分：

你的正则表达式应该这样写：

```
/android(?!.*mobile)/i 
```

这将匹配任何包含单词**android**且后跟单词**mobile**且忽略大小写的字符串。这也意味着您可以删除`toLowerCase`呼叫。

### 加法：负后视

如果您只需要匹配其中包含单词**android**但缺少**移动设备**（之前或之后）的字符串，则可以使用负前瞻和后瞻的组合。

```
/(?<!mobile.*)android(?!.*mobile)/i 
```

但问题是**Javascript 不支持负面的lookbehinds**。因此，您必须采用不同的技巧来帮助您确定这种情况。

有几种可能性，其中以下似乎是最有趣的（最后一个很有用）：

1.  替换之后将失败的匹配负字符串：

    ```
    var nav = navigator.userAgent.replace(/mobile.*android/, "fail" );
    return /android(?!.*mobile)/i.test(nav); 
    ```

2.  使用两个前瞻。一个在普通字符串上，另一个在反向字符串上，同时还有一个反向的正则表达式：

    ```
    var nav = navigator.userAgent;
    var after = /android(?!.*mobile)/i.test(nav);
    var before = /diordna(?!.*elibom)/i.test(nav.split("").reverse().join(""));
    return before && after; 
    ```

3.  简单是关键。两个简单的正则表达式也可以解决问题：

    ```
    var nav = navigator.userAgent;
    return /android/i.test(nav) && !/mobile/i.test(nav); 
    ```

* * *

> ***注意：**我不确定您的代码是否是实际代码，因为如果是，我强烈建议您重新考虑使用* `switch(true)` *语句并将其替换为*
> `return is_not_tablet_bool;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:51:12.323

我不认为使用正则表达式会使这项任务变得更容易。[`String.indexOf(...)`我将使用以下方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)简单地检查这些字符串的包含和排除：

```
function isNotAndroidMobile(userAgentString) {
  var ua = userAgentString.toLowerCase();
  return (ua.indexOf('android')>=0) && (ua.indexOf('mobile')===-1);
} 
```

# java - CXF 通话时长记录

> ID：13458947
> 
> 赞同：2
> 
> 时间：2012-11-19T17:23:52.483
> 
> 标签：java, logging, cxf

我正在使用自定义 cxf 拦截器来记录服务调用的请求/响应，我想记录调用时间以及响应。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:30:27.630

您需要将开始时间存储到`Exchange`您的 in-interceptor 中（如果您是服务器，如果您是客户端，则为 out-interceptor）

```
message.getExchange().put("com.myapp.startTime", System.currentTimeMillis()); 
```

并在输出（分别输入）拦截器中检索它

```
long timeTaken = System.currentTimeMillis() - (Long)message.getExchange().get("com.myapp.startTime"); 
```

根据您现有拦截器在链中的确切位置，您可能希望在一对专用的拦截器中执行此操作，其中一个尽可能早地在链中，而一个尽可能晚地输出（对于服务器，反之亦然如果您是客户）。

# git - git 与上层项目同名的子项目

> ID：13458953
> 
> 赞同：1
> 
> 时间：2012-11-19T17:24:17.760
> 
> 标签：git

我的`home`文件夹有一个 git 存储库（我称之为`origin`）。在我`home`的文件夹中，我有`workspace/`一些项目中的文件夹。

我尝试使用以下方法为我的一个项目创建另一个存储库：

```
$ git remote add origin ssh://tirengarfio@173.223.56.251/home/tirengarfio/git/my_project 
```

但我得到：

> 致命：远程来源已经存在。

那是因为正如我已经说过的，我正在为我的`home`文件夹使用一个名为 origin 的远程...

我知道我可以使用另一个名字，但我很好奇如何再次使用`origin`my_project 存储库这个词。或者我应该只使用另一个名字？你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:33:58.553

`git remote`不创建存储库。要创建新存储库，您需要使用`git init`或`git clone`。

我怀疑你想做：

```
cd ~/workspace
git clone ssh://tirengarfio@173.223.56.251/home/tirengarfio/git/my_project 
```

这将创建一个新的存储库，`~/workspace/my_project`该存储库是该 URL 的克隆。新的存储库已经设置了一个远程命名，该远程命名`origin`指向创建克隆的 URL。

# objective-c - 如何设置 NSMenu/NSMenuItems 的字体？

> ID：13458963
> 
> 赞同：6
> 
> 时间：2012-11-19T17:24:58.953
> 
> 标签：objective-c, cocoa, interface-builder, nsmenuitem, nsmenu

我不知道如何在我的 NSMenu 中设置我的 NSMenuItems 的字体/样式。我在 NSMenu 上尝试了 setFont 方法，但它似乎对菜单项没有任何影响。NSMenuItem 似乎没有 setFont 方法。我希望它们都具有相同的字体/样式，所以我希望我可以在某处设置一个属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T17:34:08.437

NSMenuItem 支持属性字符串作为标题：

```
- (void)setAttributedTitle:(NSAttributedString *)string; 
```

示例代码：

```
NSMenuItem *menuItem = [[NSMenuItem alloc] initWithTitle:@"Hi, how are you?" action:nil keyEquivalent:@""];
NSDictionary *attributes = @{
                              NSFontAttributeName: [NSFont fontWithName:@"Comic Sans MS" size:19.0],
                              NSForegroundColorAttributeName: [NSColor greenColor]
                            };
NSAttributedString *attributedTitle = [[NSAttributedString alloc] initWithString:[menuItem title] attributes:attributes];
[menuItem setAttributedTitle:attributedTitle]; 
```

文档：[https ://developer.apple.com/library/mac/#documentation/cocoa/reference/applicationkit/classes/nsmenuitem_class/reference/reference.html](https://developer.apple.com/library/mac/#documentation/cocoa/reference/applicationkit/classes/nsmenuitem_class/reference/reference.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-19T17:35:54.593

它们可以具有属性标题，因此您可以将属性字符串设置为标题，其中包含所有属性，包括字体：

```
NSMutableAttributedString* str =[[NSMutableAttributedString alloc]initWithString: @"Title"];
[str setAttributes: @{ NSFontAttributeName : [NSFont fontWithName: @"myFont" size: 12.0] } range: NSMakeRange(0, [str length])];
[label setAttributedString: str]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-03T01:24:12.273

`+ menuBarFontOfSize:`from`NSFont`是你的朋友。

*   如果您不打算更改字体系列，则应使用`[NSFont menuBarFontOfSize:12]`获取默认字体并设置新大小。
*   如果您只是更改颜色，您仍然需要通过执行`[NSFont menuBarFontOfSize:0]`.

* * *

所以只改变`NSMenuItem`颜色：

```
NSDictionary *attributes = @{
                              NSFontAttributeName: [NSFont menuBarFontOfSize:0],
                              NSForegroundColorAttributeName: [NSColor greenColor]
                            };

NSAttributedString *attributedTitle = [[NSAttributedString alloc] initWithString:[menuItem title] attributes:attributes];
[menuItem setAttributedTitle:attributedTitle]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-25T09:35:34.567

实际上`[NSMenu setFont:]`适用于所有菜单项子菜单（如果最后一个没有自己的字体）。也许您在设置菜单字体之前设置了属性标题？实现它，在编写自己的程序来遍历菜单项之后。

如果您需要一些自定义处理（即更改并非所有项目的字体，或为不同项目自定义字体），这里有一个简单的迭代代码：

```
@implementation NSMenu (MenuAdditions)

- (void) changeMenuFont:(NSFont*)aFont
{
    for (NSMenuItem* anItem in self.itemArray)
    {
        NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObject:aFont forKey:NSFontAttributeName];
        anItem.attributedTitle = [[[NSAttributedString alloc] initWithString:anItem.title attributes:attrsDictionary] autorelease];

        if (anItem.submenu)
            [anItem.submenu changeMenuFont:aFont];
    }
}

@end 
```

# rvm - 乘客在“gem update --system”之后抛出 Bundler::GemfileError

> ID：13458964
> 
> 赞同：1
> 
> 时间：2012-11-19T17:25:05.380
> 
> 标签：rvm, bundler, passenger

## 背景

在我的本地机器上，我尝试通过我的 gemfile 安装“子弹”gem，`bundle`似乎没有发生任何事故，但是在重新启动我的应用程序时，乘客开始抛出错误`Invalid gemspec for uniform_notifier`。似乎其他人遇到了[这个问题](https://github.com/flyerhzm/bullet/issues/58)，并且[StackOverflow 上的建议解决方案](https://stackoverflow.com/a/9005150/995663)说通过运行来更新 RubyGems：

## 问题

```
gem update --system 
```

这在运行时没有产生错误消息，但是现在没有应用程序将启动。他们都给出了相同的模糊乘客错误：

```
PhusionPassenger::UnknownError
There was an error in your Gemfile, and Bundler cannot continue. (Bundler::GemfileError) 
```

我从我的 gemfile 中删除了“bullet”，所以它现在恢复到昨天工作的状态，所以我认为我的 gemfile 中不会有错误。此外，我所有的其他应用程序现在都坏了，它们的 gemfile 根本没有改变。

以供参考：

```
ruby -v
ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.5.0]
rails -v
Rails 3.2.6
rvm --version
rvm 1.1.4 by Wayne E. Seguin 
```

当我`gem list`为全局和本地 gemsets 执行操作时，它显示已安装**bundler 1.1.0**。

**编辑：**我还应该提到，运行`rails s`启动一个 WEBrick 服务器就好了，我可以在 localhost:3000 访问我的应用程序，所以只有在乘客下才会出现这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:12:33.653

你提交了你的 Gemfile.lock 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:27:34.327

我可以通过运行将 ruby​​gems-update 回滚到以前安装的版本来解决此问题

```
gem update --system 1.8.11 
```

那时我所有的应用程序都重新开始工作了。我仍然不确定问题出在哪里，并且很乐意将接受的答案从我自己的答案转换为可以提供更深入了解为什么更新 ruby​​gems-update 会破坏乘客集成的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T21:00:28.103

我希望 Phusion Passenger 的人能给出一个明确的答案，但我只想说我经历过同样的事情。更新 ruby​​gems 破坏了乘客-nginx 的集成，需要重新编译乘客-nginx 模块。不知道为什么会这样。我的猜测是该模块以某种方式编译时对特定版本的 ruby​​gems 进行了硬引用。

# css - 如何替换 :target 以便我的 css 仍然有效并且我不需要附加到我的 url？

> ID：13458965
> 
> 赞同：1
> 
> 时间：2012-11-19T17:25:06.103
> 
> 标签：css

我正在编写一个当前使用 :target 的教程，该教程在 url 中查找 #clock。我想从 url 中删除 #clock 并只使用 index.html 但我不确定如何更新 css 所以我的动画仍然有效。任何人都可以建议吗？我尝试结合转换代码 abd 转换代码，但这不起作用。

CSS

```
#clock img[src*='second'] {
-webkit-transition: -webkit-transform 600000s linear;
-moz-transition: -moz-transform 600000s linear;
-o-transition: -o-transform 600000s linear;
-ms-transition: -ms-transform 600000s linear;
transition: transform 600000s linear;
}

#clock:target img[src*='second'] {
-webkit-transform: rotate(3600000deg);
-moz-transform: rotate(3600000deg);
-o-transform: rotate(3600000deg);
-ms-transform: rotate(3600000deg);
-transform: rotate(3600000deg);
} 
```

HTML

```
<div id="experiment">
  <p class="start"><a href="#clock" id="start">Start Clock</a></p>
  <div id="clock">
          <div id="hour"><img src="img/hourHand.png" /></div>
          <div id="minute"><img src="img/minuteHand.png" /></div>
          <div id="second"><img src="img/secondHand.png" /></div>
  </div>
</div> 
```

更新

```
#clock #second img {-webkit-animation: loading 1000s infinite;}

@keyframes loading{
  0%   {-webkit-transform: rotate(0deg);}
  100% {-webkit-transform: rotate(3600000deg);}
} 
```

# cordova - Phonegap + Blackberry：没有ondeviceready

> ID：13458967
> 
> 赞同：0
> 
> 时间：2012-11-19T17:25:10.653
> 
> 标签：cordova, blackberry

开发PhoneGap + Blackberry 一直是我最近的噩梦... onDeviceReady 没有启动，我在任何地方都找不到webworkers.js... 任何人都有某种使用BB 7.1 运行的复杂应用程序？

**添加代码：** 我在 PhoneGap 示例中使用默认代码：

```
<html>
<head>      
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello World</title>
</head>
<body>
    <div class="app">
        <h1>Apache Cordova</h1>
        <div id="deviceready" class="blink">
            <p class="event listening">Connecting to Device</p>
            <p class="event received">Device is Ready</p>
        </div>
    </div>
    <script type="text/javascript" src="js/webworks.js"></script>  
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body> 
```

并使用波纹扩展，我得到以下控制台日志：

```
Viewport target-densitydpi is not supported. index.html:24
GET http:// localhost/bb/js/webworks.js 404 (Not Found) index.html:36
Ripple :: Environment Warming Up (Tea. Earl Gray. Hot.) ripple.js:475
XHR finished loading: "http://localhost/bb/config.xml". ripple.js:484
webworks.handset :: Initialization Finished (Make it so.) ripple.js:475
eula response:  true ripple.js:483
XHR finished loading: "http://localhost/bb/config.xml". ripple.js:484
Viewport target-densitydpi is not supported. index.html:24
GET http:// localhost/bb/js/webworks.js 404 (Not Found) 
```

我使用的是 Windows 8 x64，可能与它有关？？？

C:\Program Files (x86)\Research In Motion\BlackBerry WebWorks SDK 2.3.1.5 中没有 Ripple 文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:18:45.010

我也有完全一样的问题。远程托管的代码不起作用，因为没有可以复制到远程 Web 树的 webworks.js。

如果远程托管，phonegap 的示例代码将不起作用。

# asp.net - 通过 https 获取 .aspauth cookie

> ID：13458970
> 
> 赞同：0
> 
> 时间：2012-11-19T17:25:12.697
> 
> 标签：asp.net, authentication, cookies, https

这在 http 上运行良好，但在 https 上不起作用。

```
private Cookie GetAuthCookie(string user, string pass)
    {
        var http = WebRequest.Create(_baseUrl+"Users/Login") as HttpWebRequest;
        http.AllowAutoRedirect = false;
        http.Method = "POST";
        http.ContentType = "application/x-www-form-urlencoded";
        http.CookieContainer = new CookieContainer();
        var postData = "UserName=" + user + "&Password=" + pass + "&RememberMe=true&RememberMe=false&ReturnUrl=www.google.com";
        byte[] dataBytes = System.Text.Encoding.UTF8.GetBytes(postData);
        http.ContentLength = dataBytes.Length;
        using (var postStream = http.GetRequestStream())
        {
            postStream.Write(dataBytes, 0, dataBytes.Length);
        }
        var httpResponse = http.GetResponse() as HttpWebResponse;
        return httpResponse.Cookies[FormsAuthentication.FormsCookieName];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:58:41.737

它可能是 SSL 证书问题，您将通过 WebClient 或 WebRequest 访问 SSL 看到这一点，具体取决于您的证书颁发者的情况。有关如何解决此[问题的详细信息](https://stackoverflow.com/questions/560804/how-do-i-use-webrequest-to-access-an-ssl-encrypted-site-using-https)，请参阅此先前的问题。

# jquery-ui-dialog - JQueryUI 对话框隐藏选项可防止关闭事件触发

> ID：13458978
> 
> 赞同：1
> 
> 时间：2012-11-19T17:25:58.590
> 
> 标签：jquery-ui-dialog

当使用添加了**隐藏**选项的 JQueryUI 对话框时，**关闭**事件永远不会触发。请参阅下面的小提琴以两种方式进行复制。
有没有我不知道的解决方法？我尝试重新排序它们，但没有奏效。有任何想法吗？

[http://jsfiddle.net/johntrepreneur/f4Ytr/3/](http://jsfiddle.net/johntrepreneur/f4Ytr/3/)

**JAVASCRIPT（用于小提琴）：**

```
var $dialog = $('<div></div>').html('Using the hide dialog option ' +
        'prevents the close event from firing. Clicking close does ' +
        'nothing. Try commenting out the javascript line with the ' +
        'hide effect to see the alert show up after clicking close.'
    ).dialog({
        close: function () { alert('this will never show if hide option is active'); },
        //hide: { effect: 'drop', direction: 'up' } //comment out to see alert show up
    });
$dialog.dialog('open'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:26:57.237

您在小提琴中使用 jQuery UI 1.7.2。如果您将其替换为最新版本（1.9.1 - //ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js），那么您的代码将按预期工作。我不知道这些版本之间到底发生了什么变化，但你去吧

# java - 如何使用 Jersey 将对象编组到 JSON 中的数组 - 这是 GET 方法

> ID：13458979
> 
> 赞同：0
> 
> 时间：2012-11-19T17:26:05.090
> 
> 标签：java, json, jersey

我正在尝试使用 Jersey 框架以 JSON 格式获取以下格式的对象，我该如何编写

```
{
  "EmployeeID" : 123,
  "Employee" : { 
       "Name" :"John",
       "address: "1234,eldenSt",
       "Phone": 123456
        } 

} 
```

感谢你的帮助

谢谢

# java - 自动化 APK 逆向工程

> ID：13458982
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:26:15.273
> 
> 标签：java, android

我目前正在构建一个模型，以确定 Android 应用程序上的哪些权限对用户构成最大威胁。为此，我总共有 2gb 的恶意 Android 应用程序 apk，我需要解压缩并获取其 manifest.xml。我已经调查并发现 APK 工具可以让我对这些文件进行逆向工程并获得我想要的文件。我的问题是，有没有办法自动化这个，所以我不必为每个 apk 文件手动执行这个过程？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:35:53.093

通常“脚本”是指使用脚本语言编写的程序。这里没有额外的魔法，所以如果你知道你想做什么，你知道怎么做，过程可以自动化然后“是”。你可以写一个“脚本”。

# ruby-on-rails-3 - 使用自定义域设计 heroku

> ID：13458985
> 
> 赞同：1
> 
> 时间：2012-11-19T17:26:24.223
> 
> 标签：ruby-on-rails-3, heroku, devise

所以我遇到了这个奇怪的问题，它只出现在我的一个 heroku 实例上。我有一个使用自定义域部署到 heroku 的 rails/devise 应用程序，当我登录时，它重定向到 herokuapp 域而不是自定义域。所有其他 url，链接都保留在自定义域上，但只要检查身份验证，它就会重定向到 herokuapp 域。有什么遗漏吗？提前致谢。

# facebook - 以编程方式将选项卡添加到粉丝页面

> ID：13458990
> 
> 赞同：0
> 
> 时间：2012-11-19T17:27:12.350
> 
> 标签：facebook, facebook-graph-api

我有一个网站，人们可以登录并链接他们的 FB 粉丝页面。当他们链接他们的粉丝页面时，我保存 pageId 和一个身份验证令牌，然后我将其传递给 FB API 以发布到他们的墙上。

我想做的是在我的网站上有一个按钮，单击该按钮时，将添加一个新标签，该标签本质上是一个 iframe，带有一个指向我网站上他们的个人资料页面的 url。

环顾四周，我只看到了引用应用程序 ID 的示例。我的印象是这个应用程序 ID 不是我的应用程序的 ID，而是每个用户需要创建自己的应用程序，然后我可以设置该应用程序的页面 url，这对我来说太技术性了观众。

最好，整个过程可以在我的站点内进行，调用类似于：{fbEndPoint}/newTab?authinfo={their token}&pageId={fbPageId}&url={urlToTheirProfilePageOnMySite}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:13:18.577

要回答我自己的问题...

我想做的是有一种方法可以知道在选择选项卡时要从我的站点显示哪个自定义页面。我想当添加标签时，我需要在我的网站上提供指向他们个人资料页面的 URL。我没有意识到的是，当向粉丝页面添加标签时，真正发生的是我的应用程序被添加到标签中，并且将在 iframe 中显示的 URL 是我的“页面标签 URL”应用程序设置。

当有人访问该选项卡时，Facebook 会在 signed_request 参数中为我提供正在查看应用程序的页面 ID。使用提供的 signed_request 参数中的 pageId，我可以查找要在我的网站上显示的自定义页面，因为我知道哪个成员在提供的 pageId 中安装了我的应用程序。

希望对某人有所帮助！

# c# - 两个向量之间的角度 2D

> ID：13458992
> 
> 赞同：13
> 
> 时间：2012-11-19T17:27:20.637
> 
> 标签：c#, vector, xna

我正在尝试计算两个向量之间的角度。我试过这个，但它总是返回零：

```
public double GetAngle(Vector2 a, Vector2 b)
{
double angle = Math.Atan2(b.Y, b.X) - Math.Atan2(a.Y, a.X);
return angle;
}

GetAngle(new Vector2(1,1), new Vector2(50,50)); 
```

[![矢量图](../Images/6fe1dff7aac7f39405fb53a2ff45dedd.png)](https://i.stack.imgur.com/sVPA2.png)[![我需要的角度](../Images/ee38d8325a4d91fad080674bba5feb7a.png)](https://i.stack.imgur.com/77Mf3.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-19T17:32:29.590

您应该查看`atan2`（[此处](http://msdn.microsoft.com/en-us/library/system.math.atan2.aspx)）的文档。

您正在寻找的是找到 B（您的左上向量）和 A（您的右下向量）之间的差异，然后将其作为参数传递给`atan2`

```
return Math.Atan2(b.Y - a.Y,b.X - a.X); 
```

您的代码当前所做的是找到向量`b`参考`0,0`的角度并减去向量参考的`a`角度`0,0`。

你总是得到 0 的原因是因为`1,1`和`50,50`在同一条线上交叉`0,0`（两个调用都返回大约`0.785398`），所以减去它们会导致`0`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-24T07:57:27.600

我认为代码显示如下，来自 .NET 源代码的副本可以帮助您。

参考： [http ://referencesource.microsoft.com/#WindowsBase/Base/System/Windows/Vector.cs,102](http://referencesource.microsoft.com/#WindowsBase/Base/System/Windows/Vector.cs,102)

```
/// <summary>
/// AngleBetween - the angle between 2 vectors
/// </summary>
/// <returns>
/// Returns the the angle in degrees between vector1 and vector2
/// </returns>
/// <param name="vector1"> The first Vector </param>
/// <param name="vector2"> The second Vector </param>
public static double AngleBetween(Vector vector1, Vector vector2)
{
    double sin = vector1._x * vector2._y - vector2._x * vector1._y;  
    double cos = vector1._x * vector2._x + vector1._y * vector2._y;

    return Math.Atan2(sin, cos) * (180 / Math.PI);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-02T21:41:03.180

一个简单的解决方案应该是这样的：

```
Vector2 a_normalized = normalize(a);
Vector2 b_normalized = normalize(b);
double angle = arccos(dot(a_normalized,b_normalized)); 
```

[http://simple.wikipedia.org/wiki/Dot_product](http://simple.wikipedia.org/wiki/Dot_product)

这是伪代码，因为 C# 不是我的世界。对不起

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-11T15:50:09.883

如果您正在寻找“向量 a 和 b 之间的角度”，您需要向量 a 的角度和向量 b 的角度的增量：

```
Math.Atan2(b.Y, b.X) - Math.Atan2(a.Y, a.X) 
```

但是该图与“向量之间的角度”不匹配。该图的答案确实是先前给出的答案：

```
Math.Atan2(b.Y - a.Y, b.X - a.X) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T17:32:05.107

您必须在 Atan2 方法中使用 x 和 y 的差异：

`Math.Atan2(b.Y - a.Y,b.X - a.X);`

另外，我相信这会给你从`0`你提供的三角形斜边的角度（不完全确定）。

我建议尝试`Math.PI - angle`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-25T13:44:44.643

我参加聚会有点晚了，但是 Vector 类的静态方法怎么样：

```
Vector.AngleBetween(vector1, vector2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-19T17:34:53.083

tan（角度）=对面/相邻

arctan（相反/相邻）= 角度

对面 = ay - by

相邻 = bx - ax

```
Math.Atan((a.Y - b.Y) / (b.X - a.X)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-19T17:36:02.927

因为你使用vector2类，我想你可以使用

抗体

获取从 a 到 b 的向量。

所以你需要的角度是：Pi - 角度（ab）。

# java - 基于Keys排序

> ID：13458993
> 
> 赞同：0
> 
> 时间：2012-11-19T17:27:24.097
> 
> 标签：java, dictionary, collections

我有一个键值对形式的集合，我试图根据键本身对它进行排序，集合中的值是

```
cd,20
ef,65
ab,28
gh,76 
```

现在如图所示，第一个是 key ，请告诉我根据 key 本身对它进行排序的方法，这就是我正在寻找的输出。

```
ab,28
cd,20
ef,65
gh,76 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:34:07.653

只需从原始地图创建一个[TreeMap 。](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)TreeMap 根据键的自然顺序进行排序，因此

```
for (Map.Entry e : treeMap.entrySet()) {
   // generics elided for clarity 
```

将被排序。来自文档`entrySet()`：

> 返回此映射中包含的映射的 Set 视图。集合的迭代器以升序键顺序返回条目。

使用`entrySet()`意味着您可以在一次操作中拉取键和对应的值，而不必获取键，然后返回地图获取值。这是一个小的优化，但值得了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:34:56.123

```
TreeMap<String, Integer> map = new TreeMap<>();
// insert entries:
map.put("ab", 12);
// ...
// insertion order does not matter
for (String key : map.keySet()) {
    System.out.println(key + ", " + map.get(key));
}
// will always print in sorted order 
```

# java - 休眠锁模式UPGRADE_NOWAIT和UPGRADE有什么区别？

> ID：13458997
> 
> 赞同：1
> 
> 时间：2012-11-19T17:27:28.793
> 
> 标签：java, hibernate

hibernate (v3.6) 锁定模式 UPGRADE_NOWAIT 和 UPGRADE 有什么区别？

在什么情况下我们会使用这些锁定模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:42:06.610

基本区别在于锁的获取（wait or nowait）

`UPGRADE`已弃用。尝试使用 Oracle 样式获取升级锁`select for update`。

`UPGRADE_NOWAIT`- 尝试使用 Oracle 样式获取升级锁`select for update **nowait**`。这种锁定模式的语义，`once obtained, are the same as UPGRADE`.