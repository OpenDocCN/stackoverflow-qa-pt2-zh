# StackOverflow 问答 13389000-13389999

# python - 在 RoR 和 python 中锁定数据库表

> ID：13389000
> 
> 赞同：0
> 
> 时间：2012-11-14T23:11:30.770
> 
> 标签：python, mysql, ruby-on-rails, activerecord, sqlalchemy

我正在尝试同步两个进程/程序的 MySQL 访问。一种是用 RoR 编写的，另一种是用 Python 编写的。

`Database : MySQL`
`Python ORM Tool : sqlalchemy`
`RoR Gem : Active Records`

在数据库中的所有表中，两个程序只能写入其中的一个。我可以以某种方式锁定数据库中的整个表，以免损坏表中的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:44:09.843

[`LOCK TABLES`](http://dev.mysql.com/doc/refman/5.1/en/lock-tables.html)和/或[交易](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-transactions.html)。

# java - Java Swing 在 1 个 JFrame 中的几个 JPanel 中更改 JTextField 的上下文

> ID：13389004
> 
> 赞同：1
> 
> 时间：2012-11-14T23:11:45.247
> 
> 标签：java, swing, jframe, jpanel, jtextfield

也许你可以在这里帮助我:)
我想“模拟”比如 10 个机器站。在我的`JFrame`/ `Container`（我都尝试过）中，我放置了这 10 个机器（= 10`JPanels`包含 x 按钮、文本字段，以及我想要的任何设计），并且我希望每个机器都有不同的信息并根据我的需要进行更改。

我尝试用 a 更改 a 的值`JTextField`（`JButton`例如设置机器的优先级 + 1。但我无法区分 10 个“优先级提高”按钮:(

你如何做到这一点？我的想法是以某种方式谈论`JPanel`它的来源，但我不能。

```
 Container wizardFrame = new JFrame();
    wizardFrame.setLayout(new GridLayout(2,5));     

    String Name;
    for(int i = 1; i < 11; i++){

    Name = "Maschine " + i;

    fillWizardFrame(wizardFrame, Name, i);      
    }       
    wizardFrame.setVisible(true);       
}

public void fillWizardFrame(Container wizardFrame, String Name, int i) {

    JPanel MaschineId = new JPanel();
    MaschineId.setLayout(new BorderLayout());

    JTextField maschineName = new JTextField(Name ,10);
    MaschineId.add(maschineName, BorderLayout.WEST);
    maschinePrioritaet = new JTextField("20",10);
    MaschineId.add(maschinePrioritaet,BorderLayout.CENTER);
    JButton Higher = new JButton("Higher " + i);   Higher.addActionListener(this); 

    MaschineId.add(Higher, BorderLayout.NORTH);
    wizardFrame.add(MaschineId);        
}

@Override
public void actionPerformed(ActionEvent event) {
    if(event.getActionCommand().contains("Higher")){
        System.out.println("Higher pressed " + event.getActionCommand());
    }
       // i tried .getID , .getSource etc... :/

} 
```

我想`maschinePrioritaet`用我的“更高”按钮更改值，但我不能......这件事花了我几个小时的搜索和尝试，但找不到东西。

非常感谢你的帮助！
最好的，安德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:37:48.353

您必须更多地使用对象，尤其是视图（如在 MVC 中）。一个视图代表一个对象，在这种情况下它看起来像一些机器（它是一个名称、一个 ID 和一个优先级）。因此，您需要创建一个附加到该模型的机器面板。

这里有一些更接近的东西（但仍有许多改进要做）：

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Wizard {
    public Wizard() {
        JFrame wizardFrame = new JFrame();
        wizardFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        wizardFrame.setLayout(new GridLayout(2, 5));
        String name;
        for (int i = 1; i < 11; i++) {
            name = "Maschine " + i;
            MashinePanel mashinePanel = new MashinePanel(name, i);
            wizardFrame.add(mashinePanel.getPanel());
        }
        wizardFrame.pack();
        wizardFrame.setVisible(true);
    }

    public static class MashinePanel implements ActionListener {
        private final String name;
        private final int id;
        private JTextField maschineNameTF;
        private JFormattedTextField maschinePrioritaetTF;
        private JButton higher;
        private JPanel machinePanel;

        public MashinePanel(String name, int i) {
            super();
            this.name = name;
            this.id = i;
            machinePanel = new JPanel();
            machinePanel.setLayout(new BorderLayout());
            maschineNameTF = new JTextField(name, 10);
            machinePanel.add(maschineNameTF, BorderLayout.WEST);
            maschinePrioritaetTF = new JFormattedTextField(20);
            maschinePrioritaetTF.setColumns(10);
            machinePanel.add(maschinePrioritaetTF, BorderLayout.CENTER);
            higher = new JButton("Higher " + i);
            higher.addActionListener(this);
            machinePanel.add(higher, BorderLayout.NORTH);
        }

        public JPanel getPanel() {
            return machinePanel;
        }

        public String getName() {
            return name;
        }

        public int getId() {
            return id;
        }

        @Override
        public void actionPerformed(ActionEvent event) {
            if (event.getActionCommand().contains("Higher")) {
                Object value = maschinePrioritaetTF.getValue();
                int priority = 20;
                if (value instanceof Integer) {
                    priority = (Integer) value;
                }
                maschinePrioritaetTF.setValue(priority + 1);
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Wizard();
            }
        });
    }
} 
```

# java - AppEngine java.util.Date 与 Struts2 中的时区

> ID：13389011
> 
> 赞同：1
> 
> 时间：2012-11-14T23:12:16.837
> 
> 标签：java, google-app-engine, datetime, struts2

我在 Google App Engine 中使用 Struts2。

我`java.util.Date`在实体中拥有财产。

```
private Date date = null;

public Date getDate() {
    return date;
}
public void setDate(Date date) {
    this.date = date;
} 
```

我想用我们的`timezone`which is显示日期`GMT+8`。所以我认为有以下几点：

```
<s:date name="dateAdded" format="MMM. d, yyyy / hh:mm a" timezone="GMT+08:00" /> 
```

但它没有显示正确的时间`GMT+8`。

任何人都可以解释这种行为吗？如何显示它`GMT+8`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:42:22.950

我认为您需要使用时区名称：

```
 <s:date name="dateAdded" format="MMM. d, yyyy / hh:mm a" timezone="PST" /> 
```

或者

```
 <s:date name="dateAdded" format="MMM. d, yyyy / hh:mm a" 
                                               timezone="America/Los_Angeles" /> 
```

# perl - Ld.exe 已停止使用 Perl Strawberry 进行安装

> ID：13389017
> 
> 赞同：2
> 
> 时间：2012-11-14T23:12:58.367
> 
> 标签：perl, module, installation, cmd, strawberry-perl

尝试在草莓设置上安装模块（Devel::Declare）时出现错误窗口，告诉我“ld.exe 已停止工作”。

这是我在 CMD 上运行的命令：cpan Devel::Declare

你可以在这里看到输出： [http ://www.textswell.com/read,4230519294302](http://www.textswell.com/read,4230519294302)

然后我尝试进行手动安装，所以我下载了 .zip 文件，并在其上运行 perl Makefile.pl 并且它做得很好......但是当我做了 make（实际上是 dmake 但它是一样的）它有一个错误并弹出一个错误窗口，显示“ld.exe 已停止工作”。这是输出： [http ://textuploader.com/?p=6&id=greom](http://textuploader.com/?p=6&id=greom)

感谢您花时间阅读它，我希望有人可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-14T21:03:46.490

我有这个问题。这是由于我的 PATH 环境变量中存在另一个编译器环境（MinGW-64）。“dmake”被“perl Makefile.PL”调用，但错误的链接/加载器（ld.exe）被调用。我将旧的编译器环境移出了路径，它运行良好。

# ruby - 多态显示多项目

> ID：13389018
> 
> 赞同：0
> 
> 时间：2012-11-14T23:12:59.113
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, polymorphism

我正在尝试创建多态关系并展示它们。

这里是我的人际关系

```
events
  has_many :comments, :as => :commentable
users
  has_many :comments, :as => :commentable
comments
  belongs_to :comments, :polymorphic => true 
```

评论有以下型号

```
#  commentable_id   :integer
#  commentable_type :string(255) 
```

现在我的目标将显示在与事件相关的 event#index 项目上，但也会显示所有comments.description 根据每个事件排序

```
*********************         *********************
Event.title                   Event.title
Event.description             Event.description
{Comment.body}                {Comment.body}   
...                           ...                     
**********************        ********************** 
```

等等。

这是我的控制器

```
def index
    @mosttop = Event.all[1..-1]
    @loc = @mosttop.comments
end 
```

但是，如果我这样做，我会得到一个未定义的位置。我想知道我做错了什么。另外，我的路线是遵循

```
resources :events do
  resources :comments do
end 
```

目前我还没有使用构建创建关系，但只是在链接处`event/1/comments`创建它

控制器有跟随

```
 def create
    @comment = @commentable.comments.new(params[:comment])
    ...
   end

  private

    def load_commentable
      resource, id = request.path.split('/')[1,2]
      @commentable = resource.singularize.classify.constantize.find(id)
    end
  end 
```

# templates - 开始 Joomla 开发 - 模板和模块？

> ID：13389020
> 
> 赞同：-1
> 
> 时间：2012-11-14T23:13:09.397
> 
> 标签：templates, joomla, twitter-bootstrap

我计划开始我的 Joomla 开发冒险，所以我一直在挖掘 Joomla 初学者的一些资源，例如： [Joomla 2.5 Beginner Guide](http://magazine.joomla.org/issues/issue-feb-2012/item/677-Joomla-2-5-Beginner-s-Guide)

我想我已经掌握了基本概念，尽管我怀疑是否有人不介意为我澄清。

如果我有自己的模板（我打算使用自己的 Twitter Bootstrap 模板），并且我打算将其转换为 Joomla，并且在该模板中已经有一些模块的示例，例如首页滑块、推荐、合作伙伴链接等等，据我了解，这些必须作为模块使用，因为 Joomla 允许一个组件和一个页面中的许多模块（因此索引页面可能将欢迎消息作为组件，将滑动横幅、推荐作为模块）。

所以我的问题是我是否必须自己编写这些推荐、页面滑块模块？因为我已经有了样本（css 和 html）并且我知道它们将如何定位。为每个模块编写模块不是有点矫枉过正吗？如果在后期我正在制作另一个网站，并且我有另一个模板怎么办？

此外，从我看到的示例来看，Joomla 模板只有一个定义所有位置的 html 模板（index.php）。如果我想为一个模板定义两种可能的布局，可以吗？或者它必须进入不同的模板，我在我的模板管理器中分别分配它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:24:42.777

好的，首先，对于 Joomla 版本，您有 2 个选择。

1.  Joomla 2.5，因为它是推荐的长期版本。

2.  Joomla 3.0 是完全基于 Bootstrap 的新的短期版本，因此可能更容易对其进行调整以使其看起来像您的模板。

通常我会推荐 Joomla 2.5，但在你的情况下，我认为 Joomla 3.0 可能是最好的选择。

至于模块，你不一定要自己写。[你可以从Joomla Extensions Directory](http://extensions.joomla.org)下载所有这些东西。如果您担心模块的定位，那么只需确保模板将模块位置放在正确的位置即可。当涉及到模块时，使用 Joomla 3.0 模板并将其调整为看起来像您的模板会容易得多，因为它已经有很多或预定义的位置。如果您觉得需要添加更多，您可以这样做。请参阅以下链接：

[在 Joomla 1.5/2.5 中添加您自己的模块位置](http://docs.joomla.org/How_do_you_add_a_new_module_position%3F)

[在 Joomla 3.0 中添加您自己的模块位置](http://www.inmotionhosting.com/support/edu/joomla-3/create-template/add-module-positions)

我希望这对您的 Joomla 冒险和好运有所帮助。

差点忘了，还请确保您的 Joomla 版本保持最新，这与许多在这里发布问题的人不同：) 我在这里发布了一个关于为什么它很重要的[答案](https://stackoverflow.com/questions/12247985/why-should-i-keep-my-joomla-version-up-to-date/12247989#12247989)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:43:17.630

您绝对正确 Joomla 允许 1 个组件和许多模块！您也可以将模板转换为 Joomla 模板。尽管注意 Joomla 3.0 使用引导程序（但仍然很新，并且添加了许多新功能 - 尽管它在技术上是稳定的），因此您可能更容易使用它。您也可以通过该框架轻松包含引导程序等。链接[在这里](http://docs.joomla.org/Adding_JavaScript#JQuery)如何做到这一点

[请参阅此处](http://docs.joomla.org/How_do_you_add_a_new_module_position?)有关模板中模块和模块位置的链接。虽然顶部的数字表示这是 1.0、1.5 和 2.5。2.5 标题下的位也适用于 Joomla 3.0！

就模板的不同布局而言，如果布局变化很大，通常最好有两个单独的模板。[但是，如果布局差异很小，添加表单域](http://docs.joomla.org/Form_field)并在后端创建两个[模板样式](http://docs.joomla.org/Template_style)并为每种样式选择带有表单域的布局并没有错！

如果您想使用自定义模块，恐怕是的，您必须这样做。但是，那里有模块和组件编写器可以为您构建基础知识，因此您几乎可以将代码直接复制并粘贴到一个文件中（在这里和那里进行一些更改）。你也可以使用 Joomla 扩展目录——你甚至可以找到你更喜欢的东西！

就在另一个站点上使用模块/组件而言，这实际上要容易得多。创建后，您可以进入 Joomla 后端并再次安装您的扩展程序，然后使用 FormFields 或[模板覆盖](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)调整它！

有更多问题欢迎随时提问！

# autohotkey - FormatTime 命令混淆 %A_DDD% 格式。例如，我可以得到 'We14' 和 'We7' 而不是 'Wed' 和 '10on' 而不是 'Mon'

> ID：13389024
> 
> 赞同：2
> 
> 时间：2012-11-14T23:13:13.993
> 
> 标签：autohotkey

我使用[FormatTime](http://www.autohotkey.com/docs/commands/FormatTime.htm)命令为我的笔记本笔记制作时间戳，我通常使用的公式如下所示：

```
:*:ibsfo:: 
FormatTime, ExecutorTimeStamp,, h:mm tt, %A_DDD%. dd-MM-yyyy
SendInput |%ExecutorTimeStamp%| (1)| (2)| (3)| (4)|-`r{Left 21}
return 
```

它应该给出这样的结果：

```
|1:24 PM, Wed. 14-11-2012| (1)| (2)| (3)| (4)|- 
```

但相反，我得到了这样的东西：

```
|1:24 PM, We14\. 14-11-2012| (1)| (2)| (3)| (4)|- 
```

一周中的其他日子也会发生同样的情况。这种混乱结果的更多例子是：

```
We14, We7, SaP, We10, 10on, T2u, T4u 
```

为什么会发生这种情况，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:39:50.270

尝试这样的事情：

```
:*:ibsfo::
FormatTime, ExecutorTimeStamp,, h:mm tt, ddd dd-MM-yyyy
SendInput %ExecutorTimeStamp%
return 
```

输出：

```
6:41 PM, Wed 14-11-2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T22:37:48.987

> > 为什么会这样

名为“格式”的参数需要某些关键字母 - 或 - 一些特殊关键字来表示日期/时间的一部分。

%A_DDD% 被解释为一周中某一天的名称，Sunday ... Saturday 来自任何名称的字母都被解释为更多的关键字母。

# c++ - 在 CMap 或 std::map 中使用指针/地址作为键和值时访问冲突

> ID：13389030
> 
> 赞同：0
> 
> 时间：2012-11-14T23:14:07.303
> 
> 标签：c++, visual-c++, stl, mfc

我正在尝试使用内存地址或指针类型作为键和值，但由于某种原因，我在插入时遇到访问冲突。

```
class SomeClass
{
public:
    std::map<MyClass*, MyClass*> stlMapPointer;
    std::map<size_t, size_t> stlMapAddress;
    CMap<MyClass*, MyClass*, MyClass*, MyClass*> mfcMapPointer;
    CMap<size_t, size_t, size_t, size_t> mfcMapAddress;
}

SomeOtherClass
{
public:
    SomeClass *m_someClassRef;
    void SomeOtherClass::some_method(MyClass* ptr, ...);
}

void SomeOtherClass::some_method(MyClass* ptr, ...)
{
    MyClass* test = ptr;
    size_t address = reinterpret_cast<size_t>(test); // I realize size_t is technically not portable

    // PROBLEM STARTS HERE:  Every single one of the following insertions will yield an access violation while calling various internal CMap/std::map calls.
    m_someClassRef->stlMapPointer.insert(std::pair<MyClass*, MyClass*>(test, test));
    m_someClassRef->stlMapPointer.insert(std::pair<size_t, size_t>(address, address));
    m_someClassRef->mfcMapPointer.SetAt(test, test);
    m_someClassRef->mfcMapAddress.SetAt(address, address);
} 
```

MyClass 没有复制构造函数，但我认为这无关紧要。如果这完全相关，我也坚持使用 Visual Studio 6。

关于为什么会发生这种情况的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:20:11.680

对于那些好奇的人：问题是在应用程序的其他地方，在 SomeClass 实例上调用了一个 memset 来初始化内存。

是什么让这个问题令人困扰（在注意到 memset 之前）：map 成员是常规实例成员（而不是指针），导致 Map 成员明显存在但处于错误状态的非常奇怪的结果。

感谢评论，我想到尝试将 SomeClass 映射成员改为指针（例如 CMap* mfcMapAddress）。瞧，即使在我的构造函数创建了一个 CMap 实例之后，指针值也会被擦除为零。

谢谢！

# python - 在 Python 3x 中基于用户输入打印对象属性

> ID：13389034
> 
> 赞同：2
> 
> 时间：2012-11-14T23:14:43.177
> 
> 标签：python

首先，我想说我是一名 Python 初学者（或就此而言的编程初学者），并且我试图弄清楚如何根据用户输入从对象中打印属性。

这是我到目前为止的代码：

```
class Customer:
    "De klasse customer"

    def __init__(self, naam, adres, woonplaats, email):   
        self.naam = naam
        self.adres = adres
        self.woonplaats = woonplaats
        self.email = email

input1 = input ("Enter the object name")
print(input1.naam) ## ** << This is what i like to know**

a = Customer('Name1', 'address', 'Utrecht', 'Email1@hotmail.com')
b = Customer('Name2', 'Bonestaak', 'Maarssen', 'Bijjaapishetaltijdraakhotmail.com') 
```

所以我基本上想要这个：`print(a.naam)`工作，但'a'必须由用户输入。

做了一些搜索，但到目前为止没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:19:25.847

您可以使用以下`locals`功能：

```
>>> a = {1:'abc'}
>>> obj = raw_input('Obj?> ')
Obj?> a
>>> print locals()[obj][1]
abc
>>> 
```

然而，这是一个**非常**不安全的结构（当地人还有其他东西！）

* * *

更清洁的方法是：

```
customers = {
    'a' : Customer('Name1', 'address', 'Utrecht', 'Email1@hotmail.com')
    'b' : Customer('Name2', 'Bonestaak', 'Maarssen', 'Bijjaapishetaltijdraakhotmail.com')
}

customer = raw_input('Customer? > ')
print customers[customer].naam 
```

不过，您需要`KeyError`妥善处理！

# javascript - 在 HTML 画布上拖放和删除动态文本

> ID：13389038
> 
> 赞同：0
> 
> 时间：2012-11-14T23:14:47.533
> 
> 标签：javascript, text, canvas, drag-and-drop

我在网上找到了许多关于在 HTML 画布中拖放图像和形状的教程。但它们似乎都旨在移动页面加载时在画布内生成的对象。我正在构建一个应用程序，让用户单击虚拟键盘上的按钮，然后单击画布以显示相应的数字或字符。这是我的代码：

```
 <script type="text/javascript">
            var mathCanvas = document.getElementById("matharea");
            var ctx = mathCanvas.getContext("2d");
            ctx.font="20px Arial";

            var placementCallback = function(){}

            mathCanvas.onselectstart = function(){return false;}

            function insertOne(){placementCallback = function(x, y){ctx.fillText('1', x-6,y+6);}};
            function insertTwo(){placementCallback = function(x, y){ctx.fillText('2', x-6,y+6);}};
            function insertThree(){placementCallback = function(x, y){ctx.fillText('3', x-6,y+6);}};

            mathCanvas.onclick = function(event){
                placementCallback(event.offsetX, event.offsetY);
            }
</script> 
```

我删掉了一些插入函数以使其更短（我的 HTML 中的按钮具有调用这些函数的 onclick 属性）。我需要能够选择放置在屏幕上的字符并实现拖放和删除功能，但我想不出一种方法来处理页面加载后放置在屏幕上的文本（我'我对 Javascript 相当陌生）。我该怎么做？我不指望任何人给我代码来做到这一点，但如果我能朝着正确的方向前进，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:16:44.040

问题是画布是即时模式。无论你告诉它放在画布上，它都会立即放在画布上。它不会让您以任何方式、形状或形式修改该值。

可以把它想象成 MS Paint（或您的操作系统的等价物）和 Photoshop 之间的区别。
在 PS 中，您可以拥有可以四处移动和编辑的图层，当您决定完成图像时，您可以保存它并将所有数据展平。

当您在 MS Paint 中制作图像时，只要您单击或键入，您放在那里的那个东西就在那里，并且它不会移动/被编辑，除非您擦除它、在它上面绘制或在一个部分周围绘制一个矩形并且移动整个矩形（包括您要编辑的内容周围的像素）。

只需调用 fillText 就会在那个瞬间画出文字，但不会记住它画了什么，它在哪里，它是什么，文本与周围像素有何不同，等等。

因此，您的通用解决方案是您需要将文本转换为对象，然后将这些对象的一个​​方面（文本内容）绘制到屏幕上。

如果您的文本发生更改，您可以在对象中进行更改，然后重新绘制它（因为您的对象将存储其`X`和`Y`坐标，并将使用`context.measureText(textObj.text).width`方法/属性存储其宽度值），当您单击画布时，您可以检查单击的坐标，如果这些坐标与您的文本对象存储的坐标相交，那么您可以修改其在屏幕上的位置。

在这方面，您应该查看那些处理画布上拖动对象的示例。
单击按钮应被视为***创建***其中一个对象的一种方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T23:32:12.583

我知道这是很多代码......但我不想通过它..这是我很久以前构建的东西的一部分......只需复制并粘贴到一个 html 文件中......我希望它帮助您满足您的需求：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>      

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js" type="text/javascript"></script>
        <script src="http://jquery-ui.googlecode.com/svn/tags/latest/external/jquery.bgiframe-2.1.2.js" type="text/javascript"></script>
        <script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/minified/i18n/jquery-ui-i18n.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
        <script>

        ;(function($) {

        $.fn.insertAtCaret = function (myValue) {

        return this.each(function() {

        //IE support
        if (document.selection) {

        this.focus();
        sel = document.selection.createRange();
        sel.text = myValue;
        this.focus();

        } else if (this.selectionStart || this.selectionStart == '0') {

        //MOZILLA / NETSCAPE support
        var startPos = this.selectionStart;
        var endPos = this.selectionEnd;
        var scrollTop = this.scrollTop;
        this.value = this.value.substring(0, startPos)+ myValue+ this.value.substring(endPos,this.value.length);
        this.focus();
        this.selectionStart = startPos + myValue.length;
        this.selectionEnd = startPos + myValue.length;
        this.scrollTop = scrollTop;

        } else {

        this.value += myValue;
        this.focus();
        }
        });
        };

        })(jQuery);

        $(function go_prev() {
        //When you click on a link with class of poplight and the href starts with a # 
        $('a.poplight[href^=#]').click(function() {
            var popID = $(this).attr('rel'); //Get Popup Name
            var popURL = $(this).attr('href'); //Get Popup href to define size

            //Pull Query & Variables from href URL
            var query= popURL.split('?');
            var dim= query[1].split('&');
            var popWidth = dim[0].split('=')[1]; //Gets the first query string value

            //Fade in the Popup and add close button
            $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a href="#" class="close"><img src="close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>');
            //Define margin for center alignment (vertical   horizontal) - we add 80px to the height/width to accomodate for the padding  and border width defined in the css
            var popMargTop = ($('#' + popID).height() + 90) / 2;
            var popMargLeft = ($('#' + popID).width() + 80) / 2;
            //Apply Margin to Popup
            $('#' + popID).css({
                'top' : 10,
                'margin-left' : -popMargLeft
            });

            //Fade in Background
            $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
            $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer - .css({'filter' : 'alpha(opacity=80)'}) is used to fix the IE Bug on fading transparencies 

            return false;
        });

        //Close Popups and Fade Layer
        $('a.close, #fade').live('click', function() { //When clicking on the close or fade layer...
            $('#fade , .popup_block').fadeOut(function() {
                $('#fade, a.close').remove();  //fade them both out
            });
            return false;
        });
        });
        </script>

        <script>
        var NumIms = 0;
        var NumTxts = 0;

        //IMAGE VARIABLES
        var ImIds=[];
        var ImNm=[];
        var ImWdth=[];
        var ImHght=[];

        //TEXT VARIABLES
        var TxtIds=[];
        var Txt=[];
        var TxtFnt=[];
        var TxtCol=[];
        var TxtSz=[];

        var MyWidth;
        var MyHeight;
        var img;

        function MoveOver(id,Rid) {
            var img = new Image();
            img.src = Rid;
            MyWidth = img.width;
            MyHeight = img.height;
                $("#UpIm" + id).append("W=" + MyWidth + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H=" + MyHeight);
                $("#containment-wrapper").append('<div id="AdIm' + id + '" class="draggable ui-widget-content" style="width:' + MyWidth + 'px; height:' + MyHeight + 'px;  background-image: url(' + Rid + '); position:absolute; left:18px; top:18px;"></div>');

                ImIds[id]="AdIm" + id;
                ImNm[id]=Rid;
                ImWdth[id]=MyWidth;
                ImHght[id]=MyHeight;

                $( "#AdIm" + id ).draggable();
                var f = document.getElementById('UpIm' +id);
                var Olddiv = document.getElementById('ul' + id);
                f.removeChild(Olddiv);
        }
        </script>
        <script>
        function removeIm(id) {
            var f = document.getElementById('files');
            var Folddiv = document.getElementById('UpIm' + id);
            f.removeChild(Folddiv);

            var d = document.getElementById('containment-wrapper');
            var Dolddiv = document.getElementById('AdIm' + id);
            d.removeChild(Dolddiv);
            ImIds.splice(id,1,"deleted");

        }
        </script>

        <script type="text/javascript" >
        var iid = -1;
        var pic_real_width, pic_real_height, img;

        function removeFormIm(Rid,id) {
            var f = document.getElementById('files');
            var Folddiv = document.getElementById('UpIm' + id);
            f.removeChild(Folddiv);

            var d = document.getElementById('containment-wrapper');
            var Dolddiv = document.getElementById('AdIm' + id);
            d.removeChild(Folddiv);
        }

        </script>

        <style>
        #containment-wrapper { width: 845px; height:150px; border:2px solid #ccc; }

        #fade { /*--Transparent background layer--*/
            display: none; /*--hidden by default--*/
            background: #000;
            position: fixed; left: 0; top: 0;
            width: 100%; height: 100%;
            opacity: .80;
            z-index: 9999;
        }
        .popup_block{
            display: none; /*--hidden by default--*/
            background: #fff;
            padding: 20px;
            border: 20px solid #ddd;
            float: left;
            font-size: 1.2em;
            position: fixed;
            top: 50%; left: 50%;
            z-index: 99999;
            /*--CSS3 Box Shadows--*/
            -webkit-box-shadow: 0px 0px 20px #000;
            -moz-box-shadow: 0px 0px 20px #000;
            box-shadow: 0px 0px 20px #000;
            /*--CSS3 Rounded Corners--*/
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
        }

        .t_t{
            display: none; /*--hidden by default--*/
            background: #fff;
            padding: 20px;
            border: 20px solid #ddd;
            float: left;
            font-size: 1.2em;
            position: fixed;
            top: 50%; left: 50%;
            z-index: 99999;
            /*--CSS3 Box Shadows--*/
            -webkit-box-shadow: 0px 0px 20px #000;
            -moz-box-shadow: 0px 0px 20px #000;
            box-shadow: 0px 0px 20px #000;
            /*--CSS3 Rounded Corners--*/
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
        }
        img.btn_close {
            float: right;
            margin: -55px -55px 0 0;
        }
        /*--Making IE6 Understand Fixed Positioning--*/
        *html #fade {
            position: absolute;
        }
        *html .popup_block {
            position: absolute;
        }
        </style>

        <script>
        function changeTxt(id){
            var my_txt;
            my_txt =  document.getElementById('TxtIn' + id).value;
            document.getElementById('AdText' + id).innerHTML = my_txt;
            Txt[id] = my_txt;
            }
        </script>
        <script>
        function makebold(id){
        $('#TxtIn' + id).insertAtCaret('<b></b>');
        changeTxt(id);
            }

        function makeitalic(id){
        $('#TxtIn' + id).insertAtCaret('<i></i>');
        changeTxt(id);
            }

        function makecenter(id){

            var my_txt;
            my_txt =  document.getElementById('TxtIn' + id).value;
            $("textarea#TxtIn" + id).val('<center>' + my_txt + '</center>');
            changeTxt(id)
            }

        function makebr(id){
        $('#TxtIn' + id).insertAtCaret('<br>');
        changeTxt(id);
            }

        function makelink(id){
            get_color = document.getElementById('fcolor' + id).value;
            $('#TxtIn' + id).insertAtCaret('<a href="http://" style="text-decoration:none; color:#' + get_color + ';"></a>');
            changeTxt(id);
            }
            function makeh2(id){
        $('#TxtIn' + id).insertAtCaret('<H2></H2>');
        changeTxt(id);
            }
            function makeh3(id){
        $('#TxtIn' + id).insertAtCaret('<H3></H3>');
        changeTxt(id);
            }
        </script>
        <script>
        function callFontType(id){
            var type;
            type = document.getElementById('ftype' + id).value;
            document.getElementById('AdText' + id).style.fontFamily=type;
            TxtFnt[id] = type;
            }
        </script>

        <script>
        function CxColor(id){
            var Clor;
            Clor = document.getElementById('fcolor' + id).value;
            Clor = '#' + Clor;
            document.getElementById('AdText' + id).style.color=Clor;
            TxtCol[id] = Clor;
            }
         </script>

        <script>
        function changeFSize(id){

            var my_size;
            my_size =  document.getElementById('SizeIn' + id).value;
            my_size = my_size + 'px';
            document.getElementById('AdText' + id).style.fontSize = my_size;
            TxtSz[id] = my_size;
            }
        </script>

        <script>
        var id = -1;
                function addFormField() {
        id = id + 1;
        $("#divTxt").append("<span id='row" + id + "'><small>Add: to textbox:</small><input value=\"b\" onclick=\"makebold(" + id + ")\" title=\"bold: &lt;b&gt;text&lt;/b&gt;\" type=\"button\"><input value=\"i\" onclick=\"makeitalic(" + id + ")\" title=\"italic: &lt;i&gt;text&lt;/i&gt;\" type=\"button\"><input value=\"center\" onclick=\"makecenter(" + id + ")\" title=\"center: &lt;center&gt;text&lt;/center&gt;\" type=\"button\"><input value=\"BR\" onclick=\"makebr(" + id + ")\" title=\"BR: &lt;br&gt;\" type=\"button\"><input value=\"link\" onclick=\"makelink(" + id + ")\" title=\"link: &lt;a href= &gt;URL&lt;/a&gt;\" type=\"button\"><input value=\"H2\" onclick=\"makeh2(" + id + ")\" title=\"H2: &lt;H2&gt;text&lt;/H2&gt;\" type=\"button\"><input value=\"H3\" onclick=\"makeh3(" + id + ")\" title=\"H3: &lt;H3&gt;text&lt;/H3&gt;\" type=\"button\"><br><table><tr><td><a onClick='removeFormField(\"#row" + id + "\",\"" + id + "\"); return false;'>REMOVE</a></td><td>&nbsp;&nbsp;<textarea cols=50 rows=5 name='txt[]' id='TxtIn" + id + "'  onKeyUp=\"changeTxt(" + id + ");\">Text " + id + "</textarea></td><td>Font:<select onChange=\"callFontType(" + id + ");\" id=\"ftype" + id + "\"><option value=\"Arial, Helvetica, sans-serif\">Arial</option><option value=\"Impact, Charcoal, sans-serif\">Impact</option><option value=\"Palatino Linotype, Book Antiqua, Palatino, serif\">Palatino</option><option value=\"Tahoma, Geneva, sans-serif\">Tahoma</option><option value=\"Century Gothic, sans-serif\">Century Gothic</option><option value=\"Lucida Sans Unicode, Lucida Grande, sans-serif\">Lucida Grande</option><option value=\"Arial Black, Gadget, sans-serif\">Arial Black</option><option value=\"Times New Roman, Times, serif\">Times New Roman</option><option value=\"Arial Narrow, sans-serif\">Arial Narrow</option><option value=\"Verdana, Geneva, sans-serif\">Verdana</option><option value=\"Copperplate, Copperplate Gothic Light, sans-serif\">Copperplate</option><option value=\"Lucida Console, Monaco, monospace\">Lucida Console</option><option value=\"Gill Sans, Gill Sans MT, sans-serif\">Gill Sans</option><option value=\"Trebuchet MS, Helvetica, sans-serif\">Trebuchet</option><option value=\"Courier New, Courier, monospace\">Courier New</option><option value=\"Georgia, Serif\">Georgia</option></select><br>Color: <input id=\"fcolor" + id + "\" class=\"color\" value=\"000000\"><img src=\"go.png\" style=\"vertical-align:middle;\" onClick='CxColor(" + id + ");'><br>Size: <input type='text' size='4' value=\"12\" name='txt[]' id='SizeIn" + id + "'  onKeyUp=\"changeFSize(" + id + ");\"></td></tr></table><br><hr style=\"width:800px; float:left;\"><br></span>");
        $("#containment-wrapper").append('<span id="AdText' + id + '" class="draggable ui-widget-content" style="position:absolute; left:18px; top:18px; font-size:16px; font-family:Arial, Helvetica, sans-serif;">Text ' + id + '</span>');
        $( "#AdText" + id ).draggable();//{ containment: "#containment-wrapper", scroll: true }

        $('#fcolor' + id).load(jscolor.init());

        TxtIds[id] = "AdText" + id;
        Txt[id] = "Ad Text";
        TxtFnt[id] = "Arial";
        TxtCol[id] = "#000000";
        TxtSz[id] = "16";

        $('#row' + id).highlightFade({
            speed:1000
        });
        document.getElementById("id").value = id;
    }
        function removeFormField(Rid,id) {
            $(Rid).remove();
            var d = document.getElementById('containment-wrapper');
            var olddiv = document.getElementById('AdText' + id);
            d.removeChild(olddiv);
            TxtIds.splice(id,1,"deleted");
        }
        function GetURL(id) {

                var gurl;
                var Ims = "";
                var len=ImIds.length;
                NumIms = 0;
                NumTxts = 0;

                //############ Start Get Images for URL ##############
                for(var i=0; i<len; i++) {
                NumIms++;
                var value = ImIds[i];
                Ims += '&ImName' + i + '=' + value;
                if (value != "deleted"){

                value = ImNm[i];
                Ims += '&ImNm' + i + '=' + value;
                value = ImWdth[i];
                Ims += '&ImWidth' + i + '=' + value;
                value = ImHght[i];
                Ims += '&ImHeight' + i + '=' + value;
                value = $('#AdIm' + i).position().left - $('#AdIm' + i).closest('#containment-wrapper').position().left;
                Ims += '&ImLt' + i + '=' + value;
                value = $('#AdIm' + i).position().top - $('#AdIm' + i).closest('#containment-wrapper').position().top;
                Ims += '&ImTop' + i + '=' + value;
                }
                }
                //########### End Get Images For URL #####################
                len=TxtIds.length;
                //############ Start Get Texts for URL ##############
                for(var i=0; i<len; i++) {
                NumTxts++;
                var value = TxtIds[i];
                Ims += '&TxtName' + i + '=' + escape(value);
                if (value != "deleted"){
                value = Txt[i];
                Ims += '&Txt' + i + '=' + escape(value);
                value = TxtFnt[i];
                Ims += '&TxtFnt' + i + '=' + escape(value);
                value = TxtCol[i];
                value = value.substring(1);
                Ims += '&TxtCol' + i + '=' + escape(value);
                value = TxtSz[i];
                Ims += '&TxtSz' + i + '=' + escape(value);
                value = $('#AdText' + i).position().left - $('#AdText' + i).closest('#containment-wrapper').position().left;
                Ims += '&TxtLt' + i + '=' + value;
                value = $('#AdText' + i).position().top - $('#AdText' + i).closest('#containment-wrapper').position().top;
                Ims += '&TxtTop' + i + '=' + value;
                }
                }
                //########### End Get Texts For URL #####################

                gurl = "ad.php?AdType=hero&ImNum=" + NumIms + "&TxtNum=" + NumTxts;
                gurl = gurl + Ims;
                //alert(gurl);gurl = escape( gurl );
                $("#genurl" + id).html('<textarea id="fe_text" cols=50 rows=5 name="ad_url">' + gurl + '</textarea><br><br><table><tr><td><font style="font-family:Arial, Helvetica, sans-serif; font-size:16px; color:#009999">Preview Gernerated Ad:</font></td><td><a href="' + gurl + '" target="_blank"><img src="view.png"></a></td></tr></table><br>');

            }

        </script>

           <script type="text/javascript">
            $(document).ready(function(){
                $("#myform1").validate({
                    debug: false,
                    submitHandler: function(form) {
                        // do other stuff for a valid form
                        $.post('process.php', $("#myform1").serialize(), function(data) {
                            $('#results').fadeIn('fast');
                            var mySplitResult = data.split("|||");
                        if(mySplitResult[1] !== "fail" && mySplitResult[1] !== "disable"){
        $('#upd1').html('<textarea id="fe_text" cols=50 rows=5 readonly="readonly">' + mySplitResult[1] + '</textarea><br />');
                        }
                        $('#results').html(mySplitResult[0]);
                            $('#prev1').html(mySplitResult[1]);
                                setTimeout(function() {
                                $('#results').fadeOut('slow');
                                }, 2500);

                        });
                    }
                });
            });

            </script>

        <script type="text/javascript" src="jscolor.js"></script>

        </head>

        <body>

        <div id="containment-wrapper">
        <!--<span id="AdText0" class="draggable ui-widget-content">For Testing ...  </span> -->
        </div>

        <div style="margin-left:50px;">
        <center><p style="font-family:Arial, Helvetica, sans-serif; font-size:24px; color:#FF0099">Text Field Input</p>
        <p><a href="#" onClick="addFormField(); return false;"  style="font-family:Arial, Helvetica, sans-serif; font-size:16px; color:#6633FF;">Add Text Field</a></p></center>
        <form action="#" method="get" id="form1" style="font-family:Arial, Helvetica, sans-serif; font-size:16px;">
        <input type="hidden" id="id" value="1">
        <div id="divTxt"></div>
        </form>
        </div>

        <!-- End Hidden Divs -->
        </body>
        </html> 
```

# ajax - 使用 jQuery 在页面上复制 AdSense - 是否违反 AdSense 规则？

> ID：13389040
> 
> 赞同：3
> 
> 时间：2012-11-14T23:14:51.263
> 
> 标签：ajax, load, adsense

我需要使用 AJAX 加载 Google Adsense 广告。我发现，此时是不允许的，所以我在想这个：

我通常将 Google javascript 代码包含到 DIV 中的 HTML 页面中，其中包含一些 ID，例如：

```
<div id="google_ad">
  <script>
  google_ad_client = "ca-pub-XXXXXXXXXXXXXXXXXXXX";                            
  google_ad_slot = "XXXXXXXXXXX";
  google_ad_width = 300;
  google_ad_height = 250;
  </script>
  <script src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div> 
```

然后，当我通过 AJAX 加载新内容时，我使用一些 CLASS 创建新的 DIV，然后将内容复制到这样的每个中：

```
$('#content').append($('<div>').load('http://www.foo.com/load.php'), function(){
  $('.google_ad').html($('#google_ad').html());
})); 
```

您认为这没问题还是违反了 Google AdSense 规则？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T06:42:35.933

自 2006 年以来，我一直是 Adsense 发布者，您的 ajax 技巧看起来很酷。所以您的意思是您完整且未更改的 Google Adsense 代码在 load.php 文件中？

根据[此链接](https://productforums.google.com/forum/#!categories/adsense/i-have-an-active-account-working-with-adsense)（谷歌论坛），通过 ajax 加载您的 Adsense 代码与通过 IFRAME 加载您的 Adsense 代码相同。

因此，为了保护您的 AdSense 帐户，请自然放置您的 AdSense 代码。

# c - 错误：在 '[' 标记之前应为 ')'

> ID：13389045
> 
> 赞同：-3
> 
> 时间：2012-11-14T23:15:34.257
> 
> 标签：c, methods

我收到一个错误：在 '[' 标记之前应为 ')'

它所指的线是 `void quicksort(values[noOfNums],0,(noOfNums - 1));`

但我看不出它有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:19:31.387

“void”这个词使它看起来像一个快速排序的声明，但你显然是在调用它。删除 void，或写：

```
(void) quicksort( values[noOfNums], 0, noOfNums - 1 ); 
```

为了未来维护者的理智，请考虑重命名`noOfNums`为更易于理解的名称。

# plugins - EE 1x 插件不会解析嵌套的插件标签

> ID：13389046
> 
> 赞同：1
> 
> 时间：2012-11-14T23:15:35.720
> 
> 标签：plugins, expressionengine

我写了一个简单而简短的表达式引擎 1x 插件，它可以很好地满足我的需要。
使用以下代码可以正常工作：

```
{exp:iv_simple_rss_parser feed="http://imccomunicacion.tumblr.com/rss" strip_tags="yes"}
    Title {title}
    {exp:word_limit total="20"}{description}{/exp:word_limit}
    {link}
{/exp:iv_simple_rss_parser} 
```

我需要限制 {description} 变量，所以我想使用 word_limit 插件，如您所见。事实是一切正常，但描述标签不受 word_limit 的限制。似乎 EE 没有解析那个嵌套插件，它只是忽略了它，就像它不存在一样。当 word_limit 插件在我的插件中时，如何让 EE 解析它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:07:58.720

这是因为最里面的插件标签首先解析，此时`{description}`还不存在。您可以通过添加到外部插件标签来[反转解析顺序：](http://expressionengine.com/user_guide/templates/plugins.html#changing-parsing-order)`parse="inward"`

```
{exp:iv_simple_rss_parser feed="http://imccomunicacion.tumblr.com/rss" strip_tags="yes" parse="inward"}
    Title {title}
    {exp:word_limit total="20"}{description}{/exp:word_limit}
    {link}
{/exp:iv_simple_rss_parser} 
```

# google-chrome - “扩展安装失败：包无效。详细信息：'page_action.default_icon'的值无效。'”

> ID：13389048
> 
> 赞同：3
> 
> 时间：2012-11-14T23:16:13.410
> 
> 标签：google-chrome, google-chrome-extension, manifest

我之前写过 Chrome 扩展，但这是我第一次使用清单版本 2。所以，我想我应该直接研究支持多远的 v2，以便我可以应用`minimum_chrome_version`.

但是，出于某种原因，每当我尝试在任何版本的 Chrome < v23（我相信是当前版本）上安装我`Package is invalid. Details: 'Invalid value for 'page_action.default_icon'.'.`的扩展程序时，在尝试从原始源安装扩展程序时都会收到错误消息（请参阅屏幕截图），打包`CRX`的，或者拆包的`CRX`。

奇怪的是，我什至没有使用`page_action`- 我正在使用`browser_action`......

我在 Chrome 版本上收到此错误：

*   10.0.648.133
*   15.0.874.106
*   18.0.1025.168
*   19.0.1084.56
*   20.0.1132.47
*   21.0.1180.77
*   22.0.1229.0

可能还有其他版本。

无论如何，这是我的`manifest.json`：

```
{
    /* Appearance */
    "name": "Save as Shortcut",
    "description": "Save the current page's URL as a shortcut file (*.url)",
    "icons": {  "16": "images/icons/icon_16.png",
                "48": "images/icons/icon_48.png",
                "128": "images/icons/icon_128.png" 
             },

    /* Linked code */
    "browser_action": {
        "default_icon": {
            "19": "images/icons/icon_19.png",
            "38": "images/icons/icon_38.png"
        },
        "default_title": "Save this page's URL as a shortcut file (*.url)",
        "default_popup": "html/popup.html"
    },

    /* Technical details */
    "version": "0.10.200",
    "manifest_version": 2,
    /* "minimum_chrome_version": "23.0.0.0", */

    /* Security */
    "permissions": [
        "tabs"
    ]
} 
```

![安装](../Images/ef22d9c67d564285dde5b82494b1b0e1.png)

![错误信息](../Images/4dc4772e57a35f61e27573e5df452b59.png)

（Chrome v20.0.1132.43 截图）

编辑1：......有人吗？

编辑 2：Cmann。别让我风滚草。;/

编辑3：*风滚草*

编辑4：认真的吗？没人知道？那是第一次。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T22:50:44.817

尽管在我看来，语法与[Google 自己的示例](https://developer.chrome.com/extensions/browserAction.html#manifest)相同（除了路径和文件名），但导致错误的行是：

```
"default_icon": {
    "19": "images/icons/icon_19.png",
    "38": "images/icons/icon_38.png"
}, 
```

使用以下块而不是前一个块修复了错误（至少在 Chrome v20 中）：

```
"default_icon": "images/icons/icon_38.png" 
```

[正如 Google 文档](https://developer.chrome.com/extensions/browserAction.html#manifest)中所述，Chrome 会自动调整较大图标的大小以适应较小的要求，因此不应该有任何功能或美学损失。

由于第一个代码块在 Chrome v23 中无缝运行，我只能假设该问题是由谷歌在 v < 23 中存在但在 v23 中修复的版本 2 清单的实现中的故障引起的。

虽然，我没有听说过很多问题，所以我可能是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:27:53.850

它发生在我身上，只有在注释掉“minimum_chrome_version”后我才解决了问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-13T12:18:22.553

对我来说，图标默认设置为一个数组，我用我的图标将其更改为对象。

“图标”：{“32”：“图标/eye_icon-32.png”}

然后它修复了错误

# performance - 最好将 ADD EAX,4 编码为 r/m32 imm32 或 r32 imm8？x86 程序集

> ID：13389052
> 
> 赞同：0
> 
> 时间：2012-11-14T23:16:26.237
> 
> 标签：performance, optimization, assembly, x86

给出指令：

```
ADD EAX, 4 
```

在 x86 程序集 P2+ 中，如果目标是执行速度并且代码大小无关紧要，将其编码为`ADD EAX, imm32`(op code 05) 还是(op code 83 /0) 会更好吗？`ADD r/m32, imm8`

请注意，EAX 在这种情况下是一个指针，因此`ADD AL, imm8`不可行。

选项 2（操作码 83 / 0）将导致更小的代码大小，但根据我有限的理解，它可能不像选项 1 那样流水线，即使它更短。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:24:13.290

如果您不是针对某个特定的 CPU（例如“Intel Pentium II, model 2”而不仅仅是“P2+”）进行优化，请猜测一下。不管你怎么猜，有些 CPU 可能更快，有些可能更慢（但我希望对于大多数 CPU 来说根本不会有任何区别）。

如果您正在针对一个特定的 CPU 进行优化，只需猜测。另一种方法是在您计划使用它的确切条件下对其进行分析，然后意识到您想在 2 天后更改代码，并且浪费了 8 个小时来搞乱分析。

最后; 如果您正在编写代码优化器（例如，作为编译器后端或优化汇编器的一部分），那么只需猜测——您需要担心的事情远比这重要得多。另一种方法是使用大约 50 台不同的计算机，并在所有计算机上配置许多不同的指令序列；并使用结果为许多不同的情况创建规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:59:50.520

选择简写形式 83 /0。代码密度将提高，这意味着性能和功耗在许多处理器上都有适度的提高机会。编码胖立即值没有好处。

现代 x86 处理器上的指令缓存大小至少为 32KB，这意味着适度的代码密度改进**不会真正改善缓存**。[请参阅Steenkiste](http://www.cs.cmu.edu/~prs/papers.html "斯蒂恩斯克")的论文“代码密度对指令缓存性能的影响” 。抱歉，我似乎找不到该链接的免费链接。

真正的潜在胜利是密集代码在紧密循环中执行。如果循环足够紧，现代处理器可以采取捷径，它们只获取和解码指令一次，然后从流水线本身的内部缓冲中执行小循环。即使循环性能由于数据危险或其他原因而受到限制，这些技巧仍然可以降低功耗。

# android - Twitter Streaming API 与 Twitter 搜索实时事件流

> ID：13389054
> 
> 赞同：0
> 
> 时间：2012-11-14T23:16:34.630
> 
> 标签：android, twitter, twitter4j, twitter-streaming-api

我将在内部提供一个 twitter 提要和允许转发、收藏和回复推文的 Android 应用程序。我知道有一个搜索 api 和一个流 api。这是一个重大的现场活动，我只是想知道搜索 api 是否是要走的路，或者流 api 是否会更好。

所以基本上在直播活动的 android 应用程序中，我有一个 twitter 提要，可以读取它允许用户重新发推文等。所以它就像应用程序中的一个小 twitter 客户端。流式传输是通往这里的路，还是它比它的价值更麻烦，并且搜索 api 更适合某种类型的轮询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:35:13.813

如果你想显示实时结果，你绝对应该使用流 api。如果您的活动的推文率太高，您可能会错过一些数据，但如果是本地活动，我认为您可能不会达到该比率（如果您的关键字集的推文率超过 1%全球流量，那么你可能会开始错过一些推文）。要检索错过的推文，您可以定期在后台进程中运行推特搜索，以检索在事件时间间隔内到达的最后一条推文。

因此，最好的方法是运行流 api 并检查您是否缺少任何推文，推特会通过向您发送跟踪限制通知来通知您有关此推文的信息。因此，在这种情况下，您也可以并行运行 twitter 搜索。

对于这种情况，最重要的想法是为您的活动确定可能的最佳关键字集。如果您的关键字集过于宽泛，那么您最终可能会检索到噪声数据，因此明智地选择关键字集可以为您节省大量时间并提高系统的性能和可用性。

# php - 使用 Codeigniter 处理 ajax 响应

> ID：13389059
> 
> 赞同：1
> 
> 时间：2012-11-14T23:17:04.613
> 
> 标签：php, jquery, ajax, codeigniter

我一直在通过返回 json 编码的数组作为响应来处理成功/错误消息，但我突然想到这可能不是处理通知的正确方法。

例如，我的控制器将如下所示：

```
public function controller_name() {
    //validate form input
    $this->form_validation->set_rules('id', 'id', 'required|is_natural_no_zero');

    // if validation was successful with no errors
    if ($this->form_validation->run() && $this->model_name->method()) {

        $this->data['status'] = 'success';
        $this->data['message'] = 'This is the success message';
        echo json_encode($this->data);

    } else {
        $this->data['status'] = 'error';
        $this->data['message'] = validation_errors();
        echo json_encode($this->data);
    }
} 
```

然后是 jQuery：

```
$.ajax({
    url: url,
    type: 'POST',
    data: data,
    success: function (r) {

        json = $.parseJSON(r);

        if (json.status == 'success') {
            if (json.message == 'added') {
                $this.addClass('success');
            } else {
                $this.removeClass('success');
            }
        } else {
            console.log('There was an error')
        } 
```

执行此操作的最佳实践方法是什么？我可以抛出异常来使用 ajax 错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T23:29:55.180

发送错误的 http 状态代码应该触发 jQuery ajax 错误处理程序：

```
public function controller_name() {
    //validate form input
    $this->form_validation->set_rules('id', 'id', 'required|is_natural_no_zero');

    // if validation was successful with no errors
    if ($this->form_validation->run() && $this->model_name->method()) {
        $this->data['message'] = 'This is the success message';
    } else {
        $this->output->set_status_header('400'); //Triggers the jQuery error callback
        $this->data['message'] = validation_errors();

    }
    echo json_encode($this->data);
} 
```

JS：

```
$.ajax({
    url: url,
    type: 'POST',
    data: data,
    success: function (r) {
        var json = $.parseJSON(r);

    },

    error: function( jqXhr ) {
        if( jqXhr.status == 400 ) { //Validation error or other reason for Bad Request 400
            var json = $.parseJSON( jqXhr.responseText );
        }
    }
}); 
```

# c# - 如何在已处理的控件中绘制位图

> ID：13389060
> 
> 赞同：1
> 
> 时间：2012-11-14T23:17:05.113
> 
> 标签：c#, .net, image-processing, bitmap

我正在使用 C# .NET 下的指纹传感器。它通过处理控件显示捕获的指纹，如下所示：

```
this.Sensor.SetDisplay((int)this.PictureBoxFingerprint.Handle); 
```

我需要获取传感器显示的图像并将其保存到图像控件。但是， PictureBoxFingerprint.Image 不包含任何数据（我想是因为处理策略）。我尝试使用包含表单中的 DrawToBitmap 方法，设置放置指纹图像的所有坐标，但也没有任何运气。有没有另一种方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:45:23.907

如果您无法获取图像，这听起来像是一个不合标准的库。

假设 PictureBoxFingerprint 是一个标准的窗口控件，您可能会从基本互操作中获得一些好处；获取控制 dc 和 bitblit（复制）内容到内存位图中。本文 [1] 应该为您指明正确的方向；从`int CaptureAnImage(HWND hWnd)`方法开始。

当然，问题是您获得的图像质量可能不是那么好，这取决于它在屏幕上发生的事情。祝你好运

[1] [http://msdn.microsoft.com/en-gb/library/windows/desktop/dd183402(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd183402(v=vs.85).aspx)

# ruby-on-rails - 如何在 mongoid 中保存嵌入式类？

> ID：13389062
> 
> 赞同：1
> 
> 时间：2012-11-14T23:17:25.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我正在使用带有 mongoid 2 的 Rails 3。我有一个 mongoid 类论坛，其中 embeds_many 主题。主题 embeds_many forumposts

当我尝试保存论坛帖子时，在我的控制器中执行以下操作...

```
@forum = Forum.find(params[:forum_id])
@forum.topics.find(params[:topic_id]).forumposts.build(:topic_id => params[:forumpost][:topic_id], :content => params[:forumpost][:content], :user_id => current_user.id,:posted_at => Time.now, :created_at => Time.now, :updated_at => Time.now)
if @forum.save 
```

保存时我得到...

> 2012-11-14 23:15:39 UTC:Time 的未定义方法“每个”

为什么我会收到这个错误？

我的论坛帖子类如下...

```
class Forumpost
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Paranoia

  field :content, type: String
  field :topic_id, type: String
  field :user_id, type: String
  field :posted_at, type: DateTime

    attr_accessible :content, :topic_id, :user_id, :posted_at, :created_at, :updated_at

  validates :content, presence: true
  validates :topic_id, presence: true
  validates :user_id, presence: true

    belongs_to :topic
    belongs_to :user

end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T02:14:04.000

您的示例代码有很多错误/奇怪，所以让我们看看我们是否可以从头开始：

您说论坛嵌入了许多主题，其中嵌入了许多帖子。但是您的模型正在使用 belongs_to 关联。Belongs_to 用于不同于*嵌入文档的**引用*。如果您的主题模型有这个：

 *```
class Topic
  ...
  embeds_many :forumposts
  ...
end 
```

那么你的 Forumpost 模型应该有这个：

```
class Forumpost
  ...
  embedded_in :topic
  ...
end 
```

在此处阅读参考与嵌入式文档：http: [//mongoid.org/en/mongoid/docs/relations.html](http://mongoid.org/en/mongoid/docs/relations.html)

下一点，您不需要将 :topic_id 放入论坛帖子，因为您是在主题之外构建它。

下一点，不要保存论坛，保存论坛帖子。与其先构建然后保存，不如尝试一次性创建。

下一点，而不是设置 user_id => current_user.id，尝试设置 user => current_user。这是belongs_to 关联提供的魔力……它更干净，避免弄乱ID。

下一点，为什么需要 created_at （由 Mongoid::Timestamps 提供）和 posted_at ？

最后一点，您不需要设置时间戳，它们应该在创建/更新时自动设置（除非出于某种原因您实际上需要posted_at）。

尝试更多类似的东西：

```
@forum = Forum.find(params[:forum_id])
@topic = @forum.topics.find(params[:topic_id])
if @topic.forumposts.create(:content => params[:forumpost][:content], :user => current_user)
  #handle the success case
else
  #handle the error case
end 
```*

# php - POST 不带表单的数据

> ID：13389067
> 
> 赞同：0
> 
> 时间：2012-11-14T23:17:47.457
> 
> 标签：php, forms, post

基本上，我有一堆从数据库中获取的数据，并放在我的页面中的表格中。现在，我在表中输入了用户名、会话等，并将其作为发布数据发送到下一个 PHP 页面，然后我用它在数据库中查找更多内容等等。

显然，这不是一个很好的用户体验。只需单击表格中的项目会更容易，所有内容都会自动发送到下一页。

我不确定我会怎么做。

我的表格现在是名字和姓氏，所以如果你点击某一行，它应该转到下一页，将每个单元格作为数据发送。

编辑：一些例子：

传统上，您使用表单执行此操作

```
 <form method="post" action="pageDataIsGoingTo.php"> 
```

将数据发送到下一页。但是，我不想用表单来做这件事；而是当他们单击发送数据的 URL 和/或按钮时。我想我可以“隐藏”视图中的数据，但我仍然不知道实际继续执行此操作的功能。

我会制作一个 javascript 按钮/功能，以不可见的形式设置某些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:48:35.100

您可以使用不可见/隐藏的表单字段。这可能是你最好的猜测。`POST`如果你想要一个 ajax调用，但你想加载其他页面，Javascript 将是一个很好的解决方案。所以隐藏的表单域是您的解决方案。

与表数据并行。

您需要在表单中嵌入隐藏字段和可见项目行（因此每个项目行还包含一个表单和隐藏表单字段以及可见的提交按钮，您可以使用 css 设置样式）

这假设您的表包含更多您可以选择发送的项目。

虽然我会用主干和 jquery 来做这件事，并用 ajax 做这一切。

# jquery - addClass, removeClass, if hasClass 问题

> ID：13389069
> 
> 赞同：0
> 
> 时间：2012-11-14T23:17:58.217
> 
> 标签：jquery

我有 3 组按钮，它们的行为类似于单选按钮。

单选按钮工作正常，但我需要删除 ID 为 #filter1-none 的按钮的活动类，前提是其他任何按钮都具有活动类。最好的方法是 if/then 解决方案还是我可以使用 .filter 来做到这一点？

这是无线电行为。

```
$('.filter .btn').click(function () {
    $(this).addClass('active').siblings('.active').removeClass('active');
}); 
```

这是html：

```
<div class="btn-group pull-right filter" data-toggle="buttons-radio">
    <button type="button" class="btn btn-large btn-flat" id="filter1-none">Show All</button>
</div>

<div class="btn-group pull-right mr filter" data-toggle="buttons-radio">
    <button type="button" class="btn btn-large btn-flat" id="filter1-LI">LI</button>
    <button type="button" class="btn btn-large btn-flat" id="filter1-LPO">LPO</button>
    <button type="button" class="btn btn-large btn-flat" id="filter1-NLI">NLI</button>
</div>

<div class="btn-group pull-right mr filter" data-toggle="buttons-radio">
    <button type="button" class="btn btn-large btn-flat" id="filter1-Low">Low</button>
    <button type="button" class="btn btn-large btn-flat" id="filter1-Medium">Medium</button>
    <button type="button" class="btn btn-large btn-flat" id="filter1-Urgent">Urgent</button>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:42:34.567

```
 $('.filter .btn').click(function () {
        $('#filter1-none').removeClass('active');
        $(this).addClass('active').siblings('.active').removeClass('active');
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:22:23.600

我不确定我是否理解正确，但要知道是否有任何其他元素具有“活动”类，为什么不检查选择器返回的数组是否有任何元素？

```
if ($('.active').length > 1) {
    // There are two elements with the 'active'
    // class. One of them is the button with id
    // filter1-none
    $('#filter1-none').removeClass('active');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:43:18.903

如果我理解正确，这就是你想要的 javascript。如果您单击的按钮未`#filter1-none`从中删除活动类

```
var $none = $('#filter1-none');
$('.filter .btn').click(function () {
   $none.removeClass('active');
   $(this).addClass('active').siblings('.active').removeClass('active');
});​ 
```

# actionscript-3 - AS3：类的实例化

> ID：13389070
> 
> 赞同：0
> 
> 时间：2012-11-14T23:18:10.903
> 
> 标签：actionscript-3, instance, extending-classes

这是我的问题：我有一个扩展主类的共享类。在我的共享课程中，我正在实例化其他课程并将它们添加到其中。班级

```
package 
{
import flash.display.Sprite;
public class Shared extends Main
{
    public var m:Mirror = new Mirror(span, i*span+j, _x, _y, size, d);
    public var g:Grid = new Grid(i*span+j,size, addl, span, _x, _y);
    public var b:Ball = new Ball(30); 
    public var mc:MovieClips = new MovieClips(30, _x, _y, size, span); 
    public var l:Level = new Level(levelCount); 
    public function Shared(){
        this.addChild(m); 
        this.addChild(g);
        this.addChild(b);
        this.addChild(mc);
        this.addChild(l);
    }
}

} 
```

现在，在我的 main 中，我还使用了 Shared 的一个实例，如下所示：

```
private function init(e:Event = null):void 
    {
        var sh:Shared = new Shared();

        stage.addChild(sh.b);
        stage.addChild(sh.mc);
        stage.addChild(sh.l);

        for (i = 0; i < span; i++) 
        {
           for (j = 0; j < span; j++) 
           {
               stage.addChild(sh.g);
               if(addl.indexOf(i*span+j)==true){
                    stage.addChild(sh.m);
                }
            }
        }
    } 
```

我没有收到任何错误，但没有对象出现在舞台上，我找不到问题。我认为我的问题是 Shared 类没有扩展 Sprite，但是我必须将大量参数传递给 Shared，有没有办法绕过这个？所以我仍然可以扩展 Main ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:55:22.593

我不认为你想让你的`Shared`类继承你的`Main`类，记住通过使用`extends Main`你的类之后，你继承了它的所有代码，这意味着你继承了创建你的`Shared`类的实例的函数，它可能会导致堆栈溢出。

扩展类与获取类的实例不同。主类的所有 i/j/size 等属性都是一个完全独立的实例，而不是继承 Main 的 Shared 类中的实例。

这可能是您想要做的：

```
public class Shared extends Sprite { //extend Sprite instead of Main
    public var m:Mirror; //don't instantiate these objects yet, just declare them
    public var g:Grid;
    public var b:Ball; 
    public var mc:MovieClips; 
    public var l:Level; 

    public function Shared(main:Main){  //pass in a reference to your main class instance
        //instanciate these objects in your constructor
        m = new Mirror(main.span, main.i*main.span+main.j, main._x, main._y, main.size, main.d); //all these vars (span, i,j,_x,_y, size, d, addl) are not defined anywhere that you've shown, I'm assuming they are part of your main class
        g = new Grid(main.i*main.span+main.j,main.size, main.addl, main.span, main._x, main._y);
        b = new Ball(30); 
        mc = new MovieClips(30, main._x, main._y, main.size, main.span); 
        l = new Level(main.levelCount); 

        this.addChild(m); 
        this.addChild(g);
        this.addChild(b);
        this.addChild(mc);
        this.addChild(l);
    }
} 
```

在您的主要课程中：

```
private function init(e:Event = null):void 
{
    var sh:Shared = new Shared(this); //pass a reference to this Main class instance

    //stage.addChild(sh.b); // just add the Shared instance to the stage directly
    //stage.addChild(sh.mc);
    //stage.addChild(sh.l);

    addChild(sh); //you only need to add the Shared class instance, since you've already added those other objects in the Shared class

    /* no idea what your trying to do here, but I don't think it's what you're expecting
    for (i = 0; i < span; i++) 
    {
       for (j = 0; j < span; j++) 
       {
           stage.addChild(sh.g);
           if(addl.indexOf(i*span+j)==true){
                stage.addChild(sh.m);
            }
        }
    }
    */
} 
```

请多解释一下您的代码，我可以更新此答案以使其更相关。

# java - 使用谷歌 API 语音到带有时间戳的文本

> ID：13389071
> 
> 赞同：1
> 
> 时间：2012-11-14T23:18:21.043
> 
> 标签：java

我正在开发一个 Java 应用程序来将语音转换为文本。我使用 Java 语音 API 将语音转换为文本，该 API 记录音频文件，然后将其转换为 FLAC 文件，将其发布到谷歌，响应被带到一个字符串。摆在我面前的挑战是，我需要在音频文件中为每个单独的语句（假设检测到句号）打上时间戳。

如何才能做到这一点？我是 Java 新手。
我的主文件：

```
 import com.darkprograms.speech.microphone.Microphone;
         import com.darkprograms.speech.recognizer.Recognizer;

          import javax.sound.sampled.AudioFileFormat;
          import javax.swing.*;
          import java.awt.event.ActionEvent;
          import java.awt.event.ActionListener;

          public class DoItAll extends JFrame {
          JButton stop = new JButton("Stop");
          JButton run = new JButton("Run");
          JButton process = new JButton("Process");
          Microphone microphone = new Microphone(AudioFileFormat.Type.WAVE);
          Recognizer recognizer = new Recognizer();
          String audioFile = "c:/eclipse/f.wav";

          public DoItAll(){
          stop.addActionListener(new ActionListener() {
          public void actionPerformed(ActionEvent e) {
          microphone.close();
                 }
           });
           run.addActionListener(new ActionListener() {
           public void actionPerformed(ActionEvent e) {
           try {

                     microphone.captureAudioToFile(audioFile);
            } catch (Exception e1) {
           e1.printStackTrace();  //To change body of catch statement use File 
          JOptionPane.showMessageDialog(null, e1.getMessage());
                 }
           }
          });
           process.addActionListener(new ActionListener() {
           public void actionPerformed(ActionEvent e) {
           String response = "error";
            try {
          response = recognizer.getRecognizedDataForWave(audioFile).getResponse();
         } catch (Exception e1) {
           e1.printStackTrace(); 
          response = e1.getMessage();
           }
           JOptionPane.showMessageDialog(null, response);
            }
            });
         getContentPane().setLayout(new BoxLayout(getContentPane(), BoxLayout.X_AXIS));
          getContentPane().add(run);        
          getContentPane().add(stop);
          getContentPane().add(process);
          setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
          pack();
          show();
           }

          public static void main(String[] args) {
          new DoItAll();
           }

          } 
```

我的语音 API 来自这个[链接](https://github.com/The-Shadow/java-speech-api)。

感谢帮助。

# c# - 通过 C# 运行时从命令行获取 GCC 的输出

> ID：13389074
> 
> 赞同：2
> 
> 时间：2012-11-14T23:18:27.020
> 
> 标签：c#, c#-4.0, c#-3.0

我目前正在通过我的 C# 应用程序编译 C 程序。**如果 gcc 输出任何内容，则表示出现错误。我想检索此错误并将其显示给用户。**

目前，我正在这样做...

```
 var proc = new Process
        {
            StartInfo = new ProcessStartInfo
            {
                FileName = _cCompilerPath,
                Arguments = " ./file.c",
                UseShellExecute = false,
                RedirectStandardOutput = true,
                CreateNoWindow = true                    
            }
        };

        proc.Start();
        string message = string.Empty;
        while (!proc.StandardOutput.EndOfStream)
        {
            string line = proc.StandardOutput.ReadLine();
            message = string.Concat(message, line);      
        }
        MessageBox.Show("OUTPUT :" + message); 
```

但即使程序中出现错误，也不会重定向到标准输出，并且 EndOfStream 始终返回 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:26:21.940

我敢打赌它正在写信给`StandardError`。

```
 RedirectStandardError = true,

    ....

    while (!proc.StandardError.EndOfStream)
    {
        string line = proc.StandardError.ReadLine();
        message = string.Concat(message, line);      
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:21:46.473

`Console.WriteLine("message");`如果您正在使用控制台，请使用。`MessageBox`用于 WinForms 应用程序。

```
Console.WriteLine("OUTPUT: {0}", message); 
```

`Console.WriteLine`写入标准输出。

# java - Java 中旋转、增加大小和清除 Box 图像的方法

> ID：13389075
> 
> 赞同：0
> 
> 时间：2012-11-14T23:18:30.313
> 
> 标签：java

我正在创建一个 java 程序来绘制一个盒子的图像。我已经完成了大部分代码。但是，我很难找出一种将盒子旋转特定度数的方法。我还试图创建一种方法来按百分比增加框的大小并清除画布上所有绘制的图像。

这是我到目前为止的代码： // My Box class import java.awt.Rectangle;

```
public class Box 
{
  public Box(Shapes canvasRef, int leftSide, int topLeft, int theWidth, int theHeight)
{
  left = leftSide;
  top= topLeft;
  width = theWidth;
  height = theHeight;
  canvas = canvasRef;
  theBox = new Rectangle(left, top, width, height);
  canvas.addToDisplayList(this);
  show = false;
}
public void draw()
{
  show = true;
  theBox = new Rectangle(left, top, width, height);
  canvas.boxDraw();
}
public void unDraw()
{
  show = false;
  theBox = new Rectangle(left, top, width, height);
  canvas.boxDraw();
}
public Rectangle getBox()
{
  return theBox;
}

public void moveTo(int newX, int newY)
{
  left = newX;
  top = newY;
  draw();
}
// This is the method that I tried but doesn't do anything
  public void turn(int degrees) 
  {
    int newAngle = angle + degrees;
    angle = newAngle % 60;
  }
  clearWorld()
  {
    // Clears the "canvas" upon which boxes are drawn
  }
 public void grow(int percentage)
  {       
   //The box grows the specified percentage, 
     about the center, i.e. increase each side of the box  
     the percentage indicated, with the center unchanged 
  }

// My Driver Program
import javax.swing.JFrame;

public class DisplayList
{
public static void main(String[] args)
{
JFrame frame = new JFrame("Joe The Box");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(250, 250);
Shapes component = new Shapes();
frame.add(component);
frame.setVisible(true);
Box b1 = new Box(component, 150, 100, 30, 50);
Box b2 = new Box(component, 100, 100, 40, 60);
b1.draw();
b2.draw();
b1.turn(90);
b2.grow(100);
b1.clearWorld();
Delay.sleep(2);
b2.moveTo(10,10);
}
}

  public boolean showBox()
  {
    return show;
  }
  private int left;
  private int top;
  private int width;
  private int height;
  private int angle = 0;
  private Shapes canvas;
  private Rectangle theBox;
  private boolean show;
} 
```

任何人都可以帮我解决我的 Box 类的最后三种方法吗？我真的很想添加什么？我愿意接受任何建议。谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:27:42.967

如果要围绕 (0,0) 旋转框，则将每个坐标预乘一个[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)：

```
x=x*Math.cos(t)-y*Math.sin(t)//result of matrix multiplication.
y=x*Math.sin(t)+y*Math.cos(t)//t is the angle 
```

或者，转换为极坐标，`r=Math.hypot(x,y)` `theta=Math.atan2(x,y)`并将角度添加到 theta: `theta+= rotationAngle`。然后转换回直角坐标：`x=r*Math.cos(theta)` `y=r*Math.sin(theta)`

顺便说一句，您不需要模数；大于 360 的角度也可以。哦，**所有的角度都应该是弧度**。如果它们是度数，首先乘以 2pi/360 以将它们转换为弧度。

要缩放框，请将每个坐标乘以恒定的缩放因子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:32:27.527

至少有两种方法可以围绕原点旋转一个点，这两种方法在数学上都是等效的：

1.  使用三角函数计算该点的新 (x, y) 坐标。

2.  使用线性代数，特别是线性变换矩阵，来表示旋转。

我建议您搜索一些关键字以了解有关这些解决方案的更多信息。如果您遇到不明白的具体细节，请回来提出更多问题。您可能还想查看我们的姊妹网站[http://math.stackexchange.com](http://math.stackexchange.com)，在那里您可以提出特定于旋转动画背后的数学的问题。

一旦您了解了如何将旋转应用于单个点，您只需对盒子的每个顶点重复计算即可。如果您将单个点的计算封装到它自己的方法中，这将是最简单的。

# javascript - 在 Metro 应用程序中嵌入带有远程网站的 iframe 的正确方法

> ID：13389076
> 
> 赞同：1
> 
> 时间：2012-11-14T23:18:31.740
> 
> 标签：javascript, iframe, windows-8, microsoft-metro

在我的 win 8 Metro 应用程序中通过 iframe 嵌入外部网站时遇到问题。

我只是按照通常的方式做

```
<iframe src="http://d1303.de/boom.htm"></iframe> 
```

如果嵌入式网页出现严重错误（javascript 错误......，就像[http://d1303.de/boom.htm](http://d1303.de/boom.htm)的情况一样），我的整个应用程序崩溃并且 Visual Studio 抱怨某些脚本文件中的某些内容深入包含的网站。

处理远程 iframe 时有什么特别需要考虑的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:48:08.137

我在 msdn 论坛上问过这个问题，最后在[这里得到了 Steven Cheng](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/7114e66e-4fcd-47e9-8d3d-339adbe3110b)的帮助回答：

> 对于基于 Windows Store javascript 的应用程序，通过 iframe 引用的外部网页将在与本地页面（从项目内容文件夹加载）不同的上下文中加载。因此，iframe 托管的外部页面将无法访问某些系统 API 和资源。
> 
> 对于您的情况，我认为 iframe 托管的外部页面不会导致主 Windows Store 应用程序（主机应用程序）崩溃。我创建了一个简单的测试 Windows 应用商店 JavaScript 应用程序（使用导航项目模板）并添加一个页面以在 iframe 元素中显示“http://d1303.de/boom.htm”页面。这是我的行为：
> 
> 1）通过“Ctrl + F5”启动时，导航到iframe页面时，由于脚本错误，页面无法加载iframe内容。但是托管应用程序没有崩溃，我仍然可以导航回其他页面在其他页面上运行良好。
> 
> 2) 当通过“F5”开始调试应用程序时，在导航到 iframe 页面时会进入 Visual Studio。这是因为默认调试设置会在应用程序中发生未处理的 js 异常时进入 VS IDE（您可以通过“调试 --> 异常...”菜单查看配置）。此外，如果我选择“继续”，该应用程序仍然可以继续运行（导航到其他页面以工作）。
> 
> 所以 iframe 引用页面中的脚本错误只会破坏它自己的页面。有关在基于 javascript/html 的 windows 商店应用程序中加载的网页的不同上下文的更多信息，以下书籍非常适合您：
> 
> 免费电子书：使用 HTML、CSS 和 JavaScript 编程 Windows 8 应用程序（第一次预览版） [http://blogs.msdn.com/b/microsoft_press/archive/2012/06/04/free-ebook-programming-windows-8- apps-with-html-css-and-javascript-first-preview.aspx](http://blogs.msdn.com/b/microsoft_press/archive/2012/06/04/free-ebook-programming-windows-8-apps-with-html-css-and-javascript-first-preview.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T01:05:02.140

嗨，因为在 Windows 8 中你不能从其他域注入，你不能只将 iframe 嵌入到你的代码中，但你可以做的是：

您可以制作一个 div，而不是在 div 内设置 innerHTML 并将响应静态到其他 URL，您可以尝试这样：

---HTML---

```
<div id="container"></div> 
```

---JS---

```
WinJS.xhr({
url: 'http://yourwebsitehere'
}).done(function (result) {
     var domContainer = document.getElementById("container");
     domContainer.innerHTML = toStaticHTML(result.response);
}); 
```

但它不会像一个 iframe 一样，但你仍然可以使用它，如果你只是想显示来自其他域的页面。

-Yusak Setiawan-

[http://apptivate.ms/apps/1271/mathboard](http://apptivate.ms/apps/1271/mathboard)

# sql-server - SQL Server 存储过程生成日历

> ID：13389079
> 
> 赞同：0
> 
> 时间：2012-11-14T23:19:16.987
> 
> 标签：sql-server, stored-procedures, calendar

我有一个存储过程，它返回全天的时间段，以及每个时间段的容量。

```
 ALTER PROCEDURE [dbo].[TimeSlots_Sel] 
    ( 
        @dateReqd date, 
        @typeReqd varchar(5) = 'ATI' 
    ) 
    AS 
    BEGIN 
        SET NOCOUNT ON; 
        DECLARE @timeNow time(0) = CONVERT(time(0),GETDATE()) 

        IF @dateReqd >= CONVERT(date, GETDATE()) 
                BEGIN 
                        DECLARE @tblWIP AS dbo.tvpWIP 

                        INSERT INTO @tblWIP 
                                SELECT [Type], [status_id], Scheduled_Call 
                                FROM dbo.WIP 
                                WHERE status_id = 70 
                                        AND Scheduled_Call >= @dateReqd 
                                        AND Scheduled_Call < DATEADD(dd,1,@dateReqd) 

                        SELECT ts.SlotTime, 
                                dbo.funCapacity(@tblWIP, @dateReqd, ts.SlotTime, @typeReqd) AS [Capacity] 
                        FROM dbo.TimeSlots ts 
                        WHERE NOT EXISTS 
                        ( 
                                SELECT * 
                                FROM dbo.Downtime dt 
                                WHERE dbo.funStrToDateTime(YEAR(@dateReqd),MONTH(@dateReqd),DAY(@dateReqd), DATEPART(HOUR, ts.SlotTime),DATEPART(MINUTE, ts.SlotTime)) 
                                        BETWEEN 
                                                dbo.funStrToDateTime(YEAR(@dateReqd),dt.StartMonth, dt.StartDay, dt.StartHour, dt.StartMin) 
                                        AND dbo.funStrToDateTime(YEAR(@dateReqd),dt.EndMonth, dt.EndDay, dt.EndHour, dt.EndMin) 
                        ) 
                        AND dbo.funCapacity(@tblWIP, @dateReqd, ts.SlotTime, @typeReqd) > 0 
                        AND 
                        ( 
                                @dateReqd > GETDATE() 
                                OR 
                                ts.SlotTime >= @timeNow 
                        ) 
                        ORDER BY SlotTime 
                END 
   END 
```

所以我得到这样的信息

```
SlotTime    Capacity
--------------------
09:00:00    3
09:30:00    3
10:00:00    3
10:30:00    3
11:00:00    3
11:30:00    2
12:00:00    2
12:30:00    2 
```

但现在我需要按日期显示一个显示未来 7 天容量的网格。任何想法如何修改存储过程以返回类似这样的内容

```
SlotTime Sun 14/11/2010 Mon 15/11/2010 Tue 16/11/2010 Wed 17/11/2010 Thu 18/11/2010 Fri 19/11/2010 Sat 20/11/2010
09:00:00 3              3              3              1              3              1              1
09:30:00 3              3              3              3              3              3              3
10:00:00 3              3              3              1              3              3              3
10:30:00 3              3              3              1              3              1              2
11:00:00 3              3              3              3              3              3              3
11:30:00 3              3              3              1              3              3              3 
```

我确实有一个类似的程序来创建一个做类似事情的日历，但我发现很难显示我想要的东西。这是另一个存储过程：

```
ALTER PROCEDURE [dbo].[Calendar_Sel] ( @StartDate DATE ) 
AS 
BEGIN 
        SET NOCOUNT ON 

        DECLARE @EndDate DATE = DATEADD(Day,6,@StartDate) 
        DECLARE @dates VARCHAR(MAX) 
        DECLARE @datevals VARCHAR(MAX) 
        DECLARE @sql NVARCHAR(MAX) 
        DECLARE @ParmDefinition NVARCHAR(100) 

        ;WITH cte AS 
        ( 
                SELECT @StartDate AS DateColumn UNION ALL 
                SELECT DATEADD(Day,1,DateColumn) FROM cte WHERE DateColumn < @EndDate 
        ) 

        SELECT DateColumn INTO #temp FROM cte 

        SET @dates = STUFF((SELECT ',[' + CONVERT(VARCHAR,DateColumn,112) + ']' FROM #temp FOR XML PATH('') ),1,1,'') 
        SET @datevals = STUFF((SELECT ',COALESCE([' + CONVERT(VARCHAR,DateColumn,112) + '],'''') AS [' + CONVERT(VARCHAR,DateColumn,112) + ']' FROM #temp FOR XML PATH('') ),1,1,'') 

        SET @sql = ' 
                DECLARE @EndDate DATE = DATEADD(Day,6,@StartDate) 
                ;WITH cte AS 
                ( 
                        SELECT @StartDate AS DateColumn UNION ALL 
                        SELECT DATEADD(Day,1,DateColumn) FROM cte WHERE DateColumn < @EndDate 
                ) 
                ,cte1 AS 
                ( 
                SELECT DISTINCT r.RoomID, CONVERT(VARCHAR,DateColumn,112) AS DateColumn,  
                        CAST(CASE       WHEN EXISTS(SELECT * FROM dbo.Payments WHERE BookingID = b.BookingID) THEN 1 ELSE 0     END AS CHAR(1)) 
                        + CAST(b.BookingID AS CHAR(15)) + c.Surname AS CompoundKey 
                FROM dbo.Bookings b 
                JOIN dbo.BookingsDetails bd 
                        ON b.BookingID = bd.BookingID 
                JOIN dbo.Customers c 
                        ON c.CustomerId = b.CustomerId 
                JOIN dbo.Rooms r 
                        ON r.RoomId = bd.RoomId 
                JOIN cte 
                        ON cte.DateColumn BETWEEN b.DateArrive AND DATEADD(Day,-1,b.DateLeave) 
                ) 
                SELECT Room, 
                        Price1 = dbo.funStayPrice(@StartDate,DATEADD(Day,1,@StartDate),RoomTypeID,0), 
                        Price2 = dbo.funStayPrice(DATEADD(Day,1,@StartDate),DATEADD(Day,2,@StartDate),RoomTypeID,0), 
                        Price3 = dbo.funStayPrice(DATEADD(Day,2,@StartDate),DATEADD(Day,3,@StartDate),RoomTypeID,0), 
                        Price4 = dbo.funStayPrice(DATEADD(Day,3,@StartDate),DATEADD(Day,4,@StartDate),RoomTypeID,0), 
                        Price5 = dbo.funStayPrice(DATEADD(Day,4,@StartDate),DATEADD(Day,5,@StartDate),RoomTypeID,0), 
                        Price6 = dbo.funStayPrice(DATEADD(Day,5,@StartDate),DATEADD(Day,6,@StartDate),RoomTypeID,0), 
                        Price7 = dbo.funStayPrice(DATEADD(Day,6,@StartDate),DATEADD(Day,7,@StartDate),RoomTypeID,0), 
                        SUBSTRING([' + CONVERT(VARCHAR,@StartDate,112) + '],16,12) AS Entry1, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,1,@StartDate),112) + '],16,12) AS Entry2, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,2,@StartDate),112) + '],16,12) AS Entry3, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,3,@StartDate),112) + '],16,12) AS Entry4, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,4,@StartDate),112) + '],16,12) AS Entry5, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,5,@StartDate),112) + '],16,12) AS Entry6, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,6,@StartDate),112) + '],16,12) AS Entry7, 
                        SUBSTRING([' + CONVERT(VARCHAR,@StartDate,112) + '],2,15) AS ID1, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,1,@StartDate),112) + '],2,15) AS ID2, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,2,@StartDate),112) + '],2,15) AS ID3, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,3,@StartDate),112) + '],2,15) AS ID4, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,4,@StartDate),112) + '],2,15) AS ID5, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,5,@StartDate),112) + '],2,15) AS ID6, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,6,@StartDate),112) + '],2,15) AS ID7, 
                        SUBSTRING([' + CONVERT(VARCHAR,@StartDate,112) + '],1,1) AS Status1, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,1,@StartDate),112) + '],1,1) AS Status2, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,2,@StartDate),112) + '],1,1) AS Status3, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,3,@StartDate),112) + '],1,1) AS Status4, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,4,@StartDate),112) + '],1,1) AS Status5, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,5,@StartDate),112) + '],1,1) AS Status6, 
                        SUBSTRING([' + CONVERT(VARCHAR,DATEADD(Day,6,@StartDate),112) + '],1,1) AS Status7 
                FROM 
                ( 
                        SELECT r.RoomName, r.RoomName + '' ['' + rt.TypeDescription + '']'' AS Room, rt.RoomTypeID, '+ @datevals + ' 
                        FROM cte1 
                        PIVOT (MAX(CompoundKey) FOR DateColumn IN (' + @dates + ')) AS p 
                        RIGHT OUTER JOIN dbo.Rooms r 
                                ON r.RoomID = p.RoomID 
                        JOIN dbo.RoomTypes rt 
                                ON rt.RoomTypeID = r.RoomTypeID 
                ) x 
                ORDER BY CASE WHEN ISNUMERIC(RoomName) = 1 THEN CAST(RoomName AS INT) ELSE 0 END, RoomName'; 

        SET @ParmDefinition = N'@StartDate DATE'; 

        EXEC sp_executesql @sql, @ParmDefinition, 
                @StartDate = @StartDate; 
END 
```

如果有人可以帮助我归还容量表，我将不胜感激。我希望在 GridView 中显示这些信息并且已经有了列标题，所以我只需要正确的数据存储过程。

非常感谢您的帮助。我相信任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:11:45.937

我试图稍微简化您的请求并提出这个解决方案。基本上，我们得到一个日期和时间列表，并与一个函数交叉连接以获取容量（我在这里使用了一个随机数），然后以日期为中心。由于列将是动态的，我们需要使用动态查询来获取列标题。

希望您可以使用它来应用到您自己的查询。

```
CREATE TABLE #TimeSlots (SlotTime TIME)

INSERT  INTO #TimeSlots VALUES  ('09:00:00')
INSERT  INTO #TimeSlots VALUES  ('09:30:00')
INSERT  INTO #TimeSlots VALUES  ('10:00:00')
INSERT  INTO #TimeSlots VALUES  ('10:30:00')
INSERT  INTO #TimeSlots VALUES  ('11:00:00')
INSERT  INTO #TimeSlots VALUES  ('11:30:00')

CREATE TABLE #DateSlots (Dates DATE)

INSERT  INTO #DateSlots VALUES  (GETDATE())
INSERT  INTO #DateSlots VALUES  (DATEADD(DAY, 1, GETDATE()))
INSERT  INTO #DateSlots VALUES  (DATEADD(DAY, 2, GETDATE()))
INSERT  INTO #DateSlots VALUES  (DATEADD(DAY, 3, GETDATE()))
INSERT  INTO #DateSlots VALUES  (DATEADD(DAY, 4, GETDATE()))
INSERT  INTO #DateSlots VALUES  (DATEADD(DAY, 5, GETDATE()))
INSERT  INTO #DateSlots VALUES  (DATEADD(DAY, 6, GETDATE()))
INSERT  INTO #DateSlots VALUES  (DATEADD(DAY, 7, GETDATE()))

DECLARE @PivotColumnHeaders VARCHAR(MAX)
SELECT  @PivotColumnHeaders = COALESCE(@PivotColumnHeaders + ',[' + CAST(Dates AS VARCHAR) + ']', '[' + CAST(Dates AS VARCHAR) + ']')
FROM    #DateSlots
WHERE   Dates BETWEEN GETDATE() AND DATEADD(DAY, 7, GETDATE())

DECLARE @PivotTableSQL NVARCHAR(MAX)
SET @PivotTableSQL = N'
    SELECT *
    FROM (
        SELECT SlotTime, cast(Dates as varchar) Dates, Abs(Checksum(NewId())) % 4 AS Capacity
        FROM #TimeSlots
        CROSS JOIN #DateSlots
        WHERE Dates BETWEEN GETDATE() AND DATEADD(DAY, 7, GETDATE())
    ) AS Source
    PIVOT
    (
        MAX(Capacity)
        FOR Dates IN (
          ' + @PivotColumnHeaders + '
        )
    ) AS PivotTable
'

EXECUTE(@PivotTableSQL)

DROP TABLE #TimeSlots
DROP TABLE #DateSlots 
```

# sql-server - 如何从本地数据库中使用巨大的 Where 子句查询远程数据库

> ID：13389083
> 
> 赞同：2
> 
> 时间：2012-11-14T23:19:41.040
> 
> 标签：sql-server, database, oracle

我正在使用从远程数据库（remotedb、Oracle）中提取的数据填充本地数据库（localdb、SQL Server）中的表。

远程数据库是跨互联网的，当然，本地数据库是我的数据库服务器的本地数据库。

我需要从 remotedb 中提取数据，为了从 remotedb 中提取数据，我只需要从特定键值（例如 remotedb 表上的 user_id 字段）中提取数据。

密钥集很大，大约。10,000。

哦，顺便说一句，remotedb 是只读访问，我无权访问 imp/exp 或批处理之类的东西，也无权访问服务器（它与外部供应商合作）。

目前，我正在使用这样的查询：

```
SELECT
   <my data>
FROM
   <remotedb>.<remote_table> join <remotedb>.<remote_table> ...
WHERE
   <remotedb>.<remote_table>.<remote_field> in
   ( <select that returns my 20,000 IDs> ) 
```

这对我来说似乎是一个蛮力解决方案，但我想不出任何其他方法来做到这一点。

有没有人解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:44:14.797

如果我正确地阅读了您的陈述，我们在过去的一家公司也遇到过类似的问题，它对业绩造成了影响。除非供应商可以事先为您提取所有信息并且您执行查询，否则我看不到其他方法。

# matlab - 如何选择给定（非常大）矩阵的单个元素，查看它们是否在特定范围内并在 Matlab 中更改它们？

> ID：13389086
> 
> 赞同：4
> 
> 时间：2012-11-14T23:19:54.653
> 
> 标签：matlab, matrix, range, element, pi

我有一个 256x938 的矩阵。我需要遍历每个单独的元素，看看它是否在 -pi < element < pi 范围内，如果不是，那么我们需要减去或添加 2*pi 的倍数才能得到该范围内的元素。最好不使用 for 循环，因为我们发现它们非常低效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:43:56.460

Not unlike the other solutions posed, but a bit cleaner since it requires only one simple line of code...

```
B = mod(A+pi,2*pi) - pi;

A = -20:2:20;
mod(A+pi,2*pi) - pi
ans =
  Columns 1 through 12
 -1.1504  0.84956 2.8496 -1.4336  0.56637 2.5664 -1.7168  0.28319 2.2832   -2   0  2

  Columns 13 through 21
 -2.2832 -0.28319 1.7168 -2.5664 -0.56637 1.4336 -2.8496 -0.84956 1.1504 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:28:59.500

这是你想要的吗？

```
B=rem(A,2*pi)
B(A<-pi)=A(A<-pi)+2*pi
B(A>pi)=A(A>pi)-2*pi 
```

中的每个元素`b`都是`B`now `-pi <= b <= pi`。

它不能成为`-pi < b < pi`问题中所要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:26:02.087

我现在手头没有 Matlab，所以我的建议可能行不通，但我希望这个想法能行。

尝试这种方式：

```
c = cos(B); % will set all your elements between [-1 1]
B2 = acos(c);  % will return values between [0 PI] but for some the sign will be wrong
B2 = B2.*sign(sin(B)); % should set the correct sign for each element. 
```

希望这有效。

我本可以将所有三行浓缩为 1，但我试图使这个想法尽可能清晰。

# typescript - 如何运行 TypeScript 源代码中包含的测试？

> ID：13389087
> 
> 赞同：1
> 
> 时间：2012-11-14T23:19:55.463
> 
> 标签：typescript

[TypeScript](http://typescript.codeplex.com/)带有完整的源代码和单元测试。

如何运行这些测试？还是仅通过[构建整个事物](https://stackoverflow.com/questions/13256885/how-do-i-build-the-typescript-compiler-tsc-js-from-source)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:22:57.233

在 Windows 上（最好是 VS2012 或 2010 命令提示符，或者在 PATH 上有合适的东西），运行：

`nmake runtests`

您需要将`TYPESCRIPT_HOST`环境变量设置为`node`（安装了 node.js）。或者，`nmake runtests HOST=node`。

您还可以运行一部分测试：

`nmake runtests tests=tests\compiler\someVariousTest.ts`

仅编译器测试还有一个较小的子集：

`nmake runtests-compiler`

# php - 地址为“www”的网站无法正常工作

> ID：13389088
> 
> 赞同：7
> 
> 时间：2012-11-14T23:19:58.263
> 
> 标签：php, .htaccess, webserver

我有一个网站，例如 test.com。

当我在浏览器中将该站点作为“test.com”时，我得到了该站点。

但是，当我尝试使用“www.test.com”时，它显示服务器未找到问题。

它没有任何 htaccess 文件，index.php 页面中也没有任何内容会导致此问题。

任何人都有任何想法

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T23:31:53.377

1) 检查你的 dns

2) 您可能需要添加记录 DNS www IN CNAME domain.com。

3）发送邮件以支持托管。

享受=)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T23:26:27.667

有几个潜在的原因，但它们归结为两大类：dns 或服务器配置。
DNS 可以使用 ping、dig、nslookup 或任何数量的其他工具进行测试，具体取决于您使用的操作系统。基本上，如果您检查 example.com 和 www.example.com 的 IP 地址，它们都应该具有相同的 IP 地址（由句点分隔的四个数字组成的组）。
如果他们这样做，那么在这种情况下您的 dns 就可以了（在其他情况下，您希望他们做不同的事情，但现在，只需确保它们具有相同的 IP 地址）。
接下来，您需要告诉您的 Web 服务器配置，告诉它 example.com 和 www.example.com 应该使用相同的文件和内容。对于 Apache，这可以使用 ServerName 和 ServerAlias 指令来完成。
希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:24:29.823

您需要使用您的域提供商编辑您的 DNS 设置和记录。

# android - CLANG/GCC C 解析器将静态指针识别为函数

> ID：13389089
> 
> 赞同：1
> 
> 时间：2012-11-14T23:19:59.613
> 
> 标签：android, c, gcc, android-ndk, clang

我正在尝试`bat-hosts.c`从[Batctl 2011.2.0](http://downloads.open-mesh.org/batman/stable/sources/batctl/batctl-2011.2.0.tar.gz)编译。但是，这是 CLANG 3.1 编译器从 Android NDK rev 发出的错误消息。8c：

> bat-hosts.c:41:1：错误：函数声明器中的存储类说明符无效

我在同一个 NDK rev 中从 GCC 4.6 收到类似的错误消息。

第 41 行内容如下：

```
static struct hashtable_t *host_hash = NULL; 
```

这个指向结构的指针`hashtable_t`（在 中定义`hash.h`）在任何函数之外被声明为静态，并在声明时指向`NULL`，我认为这是有效的。

`std`我尝试在选项设置为`gnu11`、`c11`、`gnu1x`、`c1x`和的情况下运行 GCC/CLANG `c99`。

我的问题是：

> 为什么编译器将此指针标识为函数声明？

提前致谢

编辑： `hashtable_t`结构定义：

```
struct hashtable_t {
    struct element_t **table;                   /* the hashtable itself, with the buckets */
    int elements;                               /* number of elements registered */
    int size;                                   /* size of hashtable */
    hashdata_compare_cb compare;                /* callback to a compare function.
                                                 * should compare 2 element datas for their keys,
                                                 * return 0 if same and not 0 if not same */
    hashdata_choose_cb choose;                  /* the hashfunction, should return an index based
                                                 * on the key in the data of the first argument
                                                 * and the size the second */
}; 
```

第二次编辑：谢谢大家的帮助。在按照@JonathanLeffler 的建议创建了一个 SSCCE 之后，我发现这个问题与一个额外的库有关，我忘记了我包括在内。很抱歉浪费您的时间：-/

@JonathanLeffler，如果您愿意，您可以发布回复，我会将其标记为答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:48:26.577

按照要求：

> `hashdata_compare_db`和的 typedef 是什么`hashdata_choose_cb`？那里有存储类吗？基本上，您应该向我们展示重现问题的 SSCCE（[简短、独立、正确的示例](http://sscce.org/)）。应包括所有（但仅）必要的标题。尽可能只使用标准标题。
> 
> 通常，创建 SSCCE 的过程无论如何都会帮助您解决问题。

而且，事实上，创建 SSCCE 似乎至少让您对您的问题有了新的认识。

祝你好运追踪问题的其余部分。

# xampp - 无法从其他计算机访问 XAMPP

> ID：13389091
> 
> 赞同：1
> 
> 时间：2012-11-14T23:20:04.667
> 
> 标签：xampp

我已经在我的 windows7（64 位）上安装了 xampp。我可以从我自己的计算机上查看我的 php 网站，但同一网络中的其他人无论尝试我自己的 IP 192.168.x.xx/web 文件夹或 127.0.0.1/web 文件夹都无法打开。

我之前在 32 位 win7 中做过同样的事情，效果很好。我想知道我怎样才能让它工作？

我对 php 和 xampp 很陌生，所以请提供更多详细信息。真的很感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-04T12:22:24.510

如果您使用的是 Windows，那么您所要做的就是转到允许应用程序通过 Windows 防火墙。单击允许另一个应用程序选择 Apache 并标记公共和私有。再次允许另一个应用程序这次选择 xampp 并标记公共和私有并完成点击应用并退出。通过按 windows button+r write cmd 打开 cmd ，而不是在 cmd write ipconfig find your ip 。比打开你的浏览器写下你的 ip [http://192.168.1.x](http://192.168.1.x)你将在 xampp 启动页面上。如果你想访问你的本地站点，只需将 / 放在你的 ip 前面，例如[http://192.168。 1.x/你的网站](http://192.168.1.x/yousite)。现在您可以在专用网络计算机上访问您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:22:51.360

尝试运行此命令并验证您的 Web 服务器端口是否正在侦听所有接口 (0.0.0.0)：

```
netstat -an | find "LISTEN" 
```

在您专门配置它之前，Tomcat 不监听 0.0.0.0 是很常见的。

除此之外，验证端口没有被某些东西阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:23:12.037

127.0.0.1 肯定不会工作，因为那是本地机器的 ip 地址。您是否可能在您的 url 中缺少端口号，所以从另一台计算机尝试 192.168.xx:80/index.html 或类似

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-02T09:38:32.807

更改您的防火墙设置。它会打开所以请关闭窗口防火墙设置。我希望它会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-08T05:39:01.460

可能是您的防火墙配置已打开，更改它，您的问题将得到解决。我也有同样的问题，通过这种方式解决了。

# java - jqgrid检查主键

> ID：13389097
> 
> 赞同：0
> 
> 时间：2012-11-14T23:20:39.213
> 
> 标签：java, javascript, database, jqgrid, web

我有 jqgrid 的问题

我在 jqgrid 中使用添加对话框功能。所以我可以轻松添加数据

问题是重复键。

我想在用户插入数据时检查主键是否已经存在。

我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:25:42.710

我建议您使用用户输入[验证](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#custom_checking_example)。要测试页面上是否已经存在的元素，`newid`您可以测试`$("#" + newid).length > 0`。

# php - Bash 脚本在执行 PHP 脚本 8 次后停止

> ID：13389102
> 
> 赞同：0
> 
> 时间：2012-11-14T23:20:54.510
> 
> 标签：php, bash

我有一个执行 php 脚本的 bash 脚本。我的 bash 知识很差，我需要执行该 PHP 脚本大约一百次。我只是复制粘贴了执行行：

```
#!/bin/bash
php /home/me/public_html/script/stats.php 1 2 3
php /home/me/public_html/script/stats.php 1 2 3
php /home/me/public_html/script/stats.php 1 2 3
... 
```

1,2,3 是我传递给 php 脚本的参数。

一切正常，但在第 8 行 bash 脚本挂起后不会进入下一个执行。所以我必须重新启动它。

有什么问题？

**UPD**

PHP（不是完整的脚本，而是一般的想法）

它从检索命令行参数开始。将它们传递给在 msql 查询中使用它们的函数。msql 查询的每个结果都被传递给另一个函数，该函数使用该结果形成一个 url，从中检索逗号分隔的字符串并处理它，将其拆分为数组并插入另一个表。main函数完成后msql链接关闭，脚本退出。

```
<?php
if (($argv[1] > 0) && ($argv[2] > 0) && ($argv[3] > 0)) {
echo "All good! Here we go: ";
echo "\n";
gatherstats($argv[1],$argv[2],$argv[3]);

} else {
echo "no\n";

}

function gatherstats($y,$m,$cl){ 

  Require 'db.php';
// SQL QUERY HERE AND A LOOP TO PROCESS RESULTS

//CALLS UP NEXT FUNCTION FOR EACH RESULT
 crawl($a,$b,$c);

}

function crawl($atr,$year,$month) { 

       //forms up specific url from passed vars and processes it

    }

  mysqli_close($link);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:24:10.797

也许第 8 个 php 脚本调用由于某种原因挂起。您可以这样做以避免键入命令 100 次：

```
for i in {1..100}; do
   php /home/me/public_html/script/stats.php 1 2 3 > some_log_file_$i.log
done 
```

在 php 脚本中添加一些打印语句并检查 8 调用的日志以查看发生了什么。如果要求不停止调用（即使失败），那么您可以使脚本调用异步使用

```
for i in {1..100}; do
   php /home/me/public_html/script/stats.php 1 2 3 > some_log_file_$i.log &
done 
```

# ruby-on-rails-3 - 有没有办法从 Rails 3 日志文件中确定访问者统计信息？

> ID：13389112
> 
> 赞同：0
> 
> 时间：2012-11-14T23:21:55.757
> 
> 标签：ruby-on-rails-3, visitor-statistic, web-statistics, log-analysis

最近，我们构建和托管的 Rails 3 应用程序在安装 Google Analytics 跟踪器时遇到了一些问题。这导致上个月跟踪的统计数据大大减少。我们有来自应用程序的生产日志，我想知道是否有人知道任何方法来解析这些以生成访问者统计信息（类似于网络分析包提供的信息）。我们需要在本周提供一份统计报告，并希望对失踪的访客有一些了解。任何建议或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:03:29.390

可能更好的查看位置是您的 Web 服务器日志。5 或 10 年前，所有流行的分析软件都吞噬了 Web 服务器日志，我们那里也有一些免费的。谷歌“网络日志分析”，看看有没有合适的。

问题是，网络日志包含所有流量，对于许多网站，这可能来自您不关心的各种来源，例如 GoogleBot 和其他抓取您的网站以添加到搜索索引的其他来源......等等。寻找会尝试过滤掉这些的软件，并且还会知道忽略资产（JS、CSS、图像等）。分析不必担心这类事情，因为它基于在真实访问者浏览器中运行的 cookie 和 javascript。

无论这些程序有多好，您都需要考虑两件事。

1.  数字与 GA 不一致，如果你试图把它们加起来，你会发疯的——差异可能大得惊人，高达 20% 或更多。
2.  配置软件的工作量可能比配置软件的价值要多——即使您这样做了，与 GA 相比，详细程度也相形见绌。

如果您使用 grep 很方便，Rails 日志可能会帮助您获得一些快速和肮脏的计数（尽管它们也会记录所有流量，除非用户需要登录，在这种情况下，日志可能会少一点噪音）。

另一种方法可能是查看您的数据库——您是否可以跟踪任何可以作为访问或您一直跟踪的任何其他目标的代理的东西？这有多大用处完全取决于您的应用程序以及您在数据库中存储的内容。

以上的一些组合可能是获得某事的最佳方式，但我讨厌成为坏消息的承担者——你从日志中收集到的东西很可能会造成更多的混乱，而不是它的价值。去过那里，试过了:-(

汤姆

# java - 在 Scala 中使用重载的 vargs 方法覆盖 Java 接口

> ID：13389121
> 
> 赞同：11
> 
> 时间：2012-11-14T23:22:28.077
> 
> 标签：java, scala

有没有办法在 Scala 中实现以下 Java 接口？

```
public interface Request {
    void acceptLanguage(Locale... locales);
    void acceptLanguage(String... locales);
} 
```

我试过了：

```
override def acceptLanguage(locales: Locale*) : Unit =
override def acceptLanguage(locales: String*) : Unit = 
```

但这给了我：

```
error: double definition:
have same type after erasure 
```

我试过这个：

```
override def acceptLanguage(locales: Locale*) (implicit Manifest[Locale]) : Unit = {}
override def acceptLanguage(locales: String*) (implicit Manifest[String]): Unit = {} 
```

但这给出了不同的签名，因此覆盖失败

我使用的是 2.9.2 版。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T23:35:57.367

使用`@varargs`注释：

```
override def acceptLanguage(@varargs locales: Locale*) : Unit =
override def acceptLanguage(@varargs locales: String*) : Unit = 
```

# php - 表单提交后是否可以使用 get 方法检索表单中的自定义文本？

> ID：13389124
> 
> 赞同：0
> 
> 时间：2012-11-14T23:22:40.240
> 
> 标签：php, forms, get

这是我的代码。我想在提交表单时从与 LI 中的输入关联的跨度中获取文本，并且在页面重新加载后，文本应该坚持 id 为“getSpan”的 div

```
<html>
<head>
</head>
<body>
<form id="myForm" action="so.php" method="get">
    <li><span>some text1</span><input name="Load" type="submit" value="Google" /></li>
    <li><span>some text2</span><input name="Load" type="submit" value="MSN" /></li>
    <li><span>some text3</span><input name="Load" type="submit" value="Yahoo" /></li>
</form>     
<div id="container">
    <?php
        if (isset($_GET['Load'])) {
            $value = $_GET['Load'];
            echo "<iframe width=\"560\" height=\"349\" src=\"http://www.{$value}.com\"></iframe>";
        }
    ?>
    <div id="getSpan"></div>
</div>
</body>
</html> 
```

我尝试使用隐藏类型输入，但 url 显示 2 个参数，一个用于主输入，另一个用于我试图避免的隐藏输入。

**更新** 我还按照@Paul S 的建议尝试了混合获取和发布，但如果我使用发布方法，我无法为 URL 添加书签。有人请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:29:01.983

您无法读取任何未通过 GET/POST 传递的静态内容。一种解决方法是硬编码返回值并将其与您的文本匹配，例如：

```
<?php
    if (isset($_GET['Load'])) {
        $value = $_GET['Load'];
        switch ($value) {
            case 'Yahoo': $myValue = 'some text1'; break;
            case 'MSN':   $myValue = 'some text2'; break;
        }
        echo "<iframe width=\"560\" height=\"349\" src=\"http://www.{$myValue}.com\"></iframe>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:29:55.763

jQuery 是您所需要的，请尝试：

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js">
</script>
<script type="text/javascript">
    $(function(){
        var formAction = $("#myForm").attr('action');
        $("button.submitBtn").click(function(e){
            var getValue = $(this).text().toLowerCase();
            var spnValue = $(this).parent().find("span:first").text();
            $("#myFrame").attr("src", "http://www."+getValue+".com");
            $("#getSpan").text(spnValue);
            window.history.pushState("","", "so.php?page="+getValue);
        });
    });
</script>
</head>
<body>

<ul>
    <li><span>some text1</span><button class="submitBtn">jQuery</button></li>
    <li><span>some text2</span><button class="submitBtn">MSN</button></li>
    <li><span>some text3</span><button class="submitBtn">digg</button></li>
</ul>     
<div id="container">
<iframe id="myFrame" width="560" height="349" src="http://www.jquery.com">
</iframe>
<div id="getSpan"></div>
</div>
</body>
</html> 
```

没有表格没有重新加载，这将适用于所有现代浏览器。

顺便说一句，谷歌和雅虎不让你能够将他们的页面包含在 iFrame 中

我希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T00:45:26.080

感谢穆罕默德和保罗。我能够解决这个问题 :) 我在表单上使用 GET 方法在 URL 中显示所需的查询，该查询可以添加书签，而对于其他查询，我使用 isset 检查表单提交并从我创建的缓存文件中获取值。多谢你们。

# ruby-on-rails-3 - 在 Rails 中检查端口是否打开

> ID：13389125
> 
> 赞同：1
> 
> 时间：2012-11-14T23:22:42.667
> 
> 标签：ruby-on-rails-3

在我的 Rails 3.2 应用程序中，我使用了来自[TradingView](https://www.tradingview.com/)的嵌入式 javascript 图表。但是，似乎[必须打开端口 443 才能显示](https://getsatisfaction.com/tradingview/topics/doesnt_work_choose_a_stock_to_chart_and_nothing_happens?from_gsfn=true)。因此，我正在尝试检查端口是否对用户开放，如果没有，则显示图表之外的其他内容。

我发现这篇文章[“Ruby - 查看端口是否打开”](https://stackoverflow.com/questions/517219/ruby-see-if-a-port-is-open)并且一直在处理这个答案：

```
require 'socket'
require 'timeout'

def port_open?(ip, port, seconds=1)
  Timeout::timeout(seconds) do
    begin
      TCPSocket.new(ip, port).close
      true
    rescue Errno::ECONNREFUSED, Errno::EHOSTUNREACH
      false
    end
  end
rescue Timeout::Error
  false
end 
```

但是，我将其修改为：

```
def port_open?(ip, port=443, seconds=1) 
```

因为要检查的端口对我来说总是一样的。

我正在调用这样的方法：

```
@ip = request.remote_ip
test = port_open?(@ip) 
```

当我在防火墙后面时，我发现了这个问题。

我不明白的是，我现在可以看到图表，因为我不在防火墙后面，但是如果我在本地运行下面的代码，我可以看到图表，但我收到了`false`.

但是，如果我改变`port=3000`我收到的真实。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:21:51.090

1000以下的端口受系统保护，需要以root权限运行。乍一看，我猜这就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:28:59.250

端口 443 是 SSL (https) 连接的正常通道——如果一家公司在其防火墙上对该端口设置出站限制，那将是相当令人惊讶的。更有可能的是，站点的 IP 地址可能会受到限制。

进入命令行并尝试使用 telnet。首先尝试一些你知道有效的东西，比如谷歌

```
> telnet google.com 443
> Trying 74.125.226.231...
> Connected to google.com.
> Escape character is '^]'. 
```

`Connected to google.com`响应表明您的计算机已成功连接到端口和 IP 地址。否则，它将挂`Trying x.x.x.x...`在线上。

另一种可能性是您的 Intranet 设置为通过代理服务器 - 您在内部与网络中的机器建立连接，然后它反过来建立实际连接。这可能会把事情搞砸——不确定你需要做什么来处理它，但有些特别——浏览器有处理代理服务器的特殊设置，所以你的 Rails 代码也需要这样做。

# gwt - fb:comment 设置错误高度（将评论减半）

> ID：13389132
> 
> 赞同：0
> 
> 时间：2012-11-14T23:23:01.313
> 
> 标签：gwt, facebook-javascript-sdk

我正在构建一个 GWT 应用程序，并尝试在某些地方动态添加 facebook 评论框。这工作正常，除了 facebook SDK 没有正确计算高度。它始终将其设置为 160 像素。

这意味着只有一半的第一条评论是可见的，即使有多个评论（即它被明显地切成两半）。如果我在 GWT 之外使用相同的代码，它工作正常（即高度计算正确）。

有人知道 facebook SDK 如何计算盒子的高度吗？或者我还能尝试什么？

* * *

细节：

我初始化 facebook SDK 如下：

```
public static native void initFacebookSDK()
/*-{
    window.fbAsyncInit = function() {
        // init the FB JS SDK
        FB.init({
            appId : '<my-app-id>', // App ID from the App Dashboard
            channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
            status : true, // check the login status upon init?
            cookie : true, // set sessions cookies to allow your server to access the session?
            xfbml : true
        // parse XFBML tags on this page?
        });

        // Additional initialization code such as adding Event Listeners goes here

    };

    // Load the SDK's source Asynchronously
    (function(d, debug) {
        var js, id = 'facebook-jssdk', ref = d
                .getElementsByTagName('script')[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement('script');
        js.id = id;
        js.async = true;
        js.src = "//connect.facebook.net/en_US/all"
                + (debug ? "/debug" : "") + ".js";
        ref.parentNode.insertBefore(js, ref);
    }(document, false));
}-*/; 
```

我按如下方式添加 div：

```
//_root is a vertical panel
_root.add(new HTML("<div id=\"mydiv\"></div>")); 
```

然后我像这样填充div：

```
public static native void showComments(String currentUrl_)
/*-{
    var mydiv = $doc.getElementById('mydiv');
    mydiv.innerHTML = "<fb:comments href='" + currentUrl_
            + "' num_posts='5' width='422'></fb:comments>";
    FB.XFBML.parse(mydiv);
}-*/; 
```

问题是 facebook SDK 总是使用以下内容填充 div：

```
<span style="height: 160px; width: 422px;">
  <iframe ...>...</iframe>
</span> 
```

而如果我不使用 GWT，height 参数会相应更改，例如：

```
<span style="height: 1469px; width: 422px;">
  <iframe ...>...</iframe>
</span> 
```

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:37:23.967

解决了。

在 JSNI 中，我应该分别使用 $doc 和 $wnd，而不是 document 和 window。[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#writing](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#writing)

在我的辩护中，我尝试过这个，但缺少的成分是我需要将 FB 对象引用为 $wnd.FB，例如：

$wnd.FB.init(...) 和 $wnd.FB.XFBML.parse(...)

希望这可以帮助某人。

# sql - SSAS Cube excel 数据透视表向下钻取

> ID：13389133
> 
> 赞同：1
> 
> 时间：2012-11-14T23:23:04.567
> 
> 标签：sql, excel, pivot, ssas, cube

在 excel 中，当您双击数据透视表中的数字时，它会创建一个包含一些向下钻取信息的新工作表。

我的问题是如何控制该部分中显示的内容？添加或删除。如果有人能在立方体内指出我正确的方向，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:22:00.983

在您的 SSAS 多维数据集中，转到操作选项卡。在那里，您可以定义钻取操作并指定为该操作显示哪些维度/度量。您还可以将它们设置为面板高级部分下的默认钻取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T10:06:32.487

请注意，您要求的这个特定功能被命名为“drillthrough”，而不是“drill down”

# iphone - #ifdef 检查设备是否为 iPhone 5

> ID：13389137
> 
> 赞同：3
> 
> 时间：2012-11-14T23:23:20.213
> 
> 标签：iphone, if-statement, height, preprocessor

我写：

```
#define IS_IPHONE_5 ([UIScreen mainScreen].bounds.size.height == 568.0)

#ifdef IS_IPHONE_5
#define SCREEN_HEIGHT 568
#else
#define SCREEN_HEIGHT 480
#endif 
```

但它总是返回该设备是 iPhone 5 ......我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T23:38:08.997

你的`IS_IPHONE_5`宏很好。你可以这样做：

```
if (IS_IPHONE_5) {
    // do something specific for iPhone 5
} 
```

在编译时，此代码将转换为：

```
if (([UIScreen mainScreen].bounds.size.height == 568.0)) {
} 
```

问题是你的`SCREEN_HEIGHT`宏。整个`#ifdef`块将在编译时进行评估。由于您确实定义`IS_IPHONE_5`了，因此`SCREEN_HEIGHT`将始终设置为 568。

您需要在运行时确定屏幕高度。你可以从：

```
[UIScreen mainScreen].bounds.size.height 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T23:30:05.583

屏幕高度检查必须在运行时完成。#ifdef IS_IPHONE_5 不会在运行时评估，而是在预编译时评估。您可以将屏幕高度代码作为类的运行时方法的一部分来调用。

你可以做类似的事情

```
- (BOOL) isIphone5
{
    return ([UIScreen mainScreen].bounds.size.height == 568.0);
} 
```

或如下 maddy 建议的那样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-09T09:21:11.860

Try this define

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T23:36:58.220

任何以 开头的指令`#`都由预处理器处理；所以在应用程序甚至被编译之前。

现在您需要在定义中执行运行时代码；特别是 - `[UIScreen mainScreen].bounds.size.height`。显然，当应用程序尚未编译时，这不会被执行！

在大多数使用该`#ifdef`指令的桌面应用程序中，这是因为它是由预处理器在编译时根据`#define`通常位于主机源文件中的语句进行评估的。（也就是说，我将在 Mac OS X 机器上为 Mac OS X 编译代码，因此预处理器会在`#define`其他地方找到语句以允许它识别它的平台）

对于您正在做的事情，您将不得不在应用程序实际在设备上运行时检测屏幕尺寸；不在编译时间之前 - 因为在编译之后它可以在任何设备上运行。

底线是**预处理器条件语句仅在编译时是有条件的——一旦应用程序被编译，它们就不能改变执行；它们就像您正在编译的任何其他代码一样变为“静态”。**

# vb.net - 通过 WebAPI 操作接收复杂数据

> ID：13389140
> 
> 赞同：0
> 
> 时间：2012-11-14T23:23:34.573
> 
> 标签：vb.net, asp.net-web-api, custom-model-binder

我需要一种将复杂的 Web 请求转换为 .Net 对象的方法。我知道 WebAPI 使用默认模型绑定器，对于复杂的数据，需要自定义模型绑定器。

**对象**

```
Public Class LapMobileModel
    Public Property Type As Integer
    Public Property EndTime As String
    Public Property StartTime As String
End Class

Public Class RaceMobileModel
    Public Property RaceName As String
    Public Property UserId As Integer
    Public Property Laps As IEnumerable(Of LapMobileModel)
    Public Property numberOfRacers As String
    Public Property PreRacePosition As String
    Public Property PostRacePosition As String
End Class

Public Class RaceListMobileModel
    Public Property RaceList As IEnumerable(Of RaceMobileModel)
End Class 
```

**动作**（在 ApiController 中）

```
Public Function SyncLapData(ByVal raceList As RaceListMobileModel) As String
    'stuff
    Return "OK"
End Function 
```

我有一个自定义模型绑定器的骨架：

```
Imports System.Web.Http
Imports System.Web.Http.ModelBinding
Imports System.Web.Http.Controllers

Public Class EventDataModelBinder
    Implements IModelBinder

    Public Function BindModel(actionContext As HttpActionContext, 
                              bindingContext As ModelBindingContext) 
                              As Boolean Implements IModelBinder.BindModel
    End Function
End Class 
```

**问题：**

如何使用`actionContext`获取构建所需的数据`RaceListMobileModel`？

如何正确地将其存储在`bindingContext`?

现在，数据正在通过带有 JSON 内容的 POST 发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:38:05.250

Web api 不使用模型绑定来绑定请求正文中的数据。你应该看看参数绑定。[http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx)

对于 json 内容，web api 默认使用 json.net 序列化器来绑定模型。它支持嵌套模型或集合。所以我没有看到你的模型中有任何不支持的东西。你在反序列化 json 时遇到过什么问题吗？或者你在绑定数据的时候有什么特殊的逻辑？

# java - Java 乒乓球游戏 Graphics 或 geom 2D

> ID：13389145
> 
> 赞同：5
> 
> 时间：2012-11-14T23:24:21.053
> 
> 标签：java, awt, pong

我的第一个项目是用 Java 制作游戏 Pong。因为我需要计算我的`x`位置和`y`位置的增量，我认为最好的方法是使用双变量（如果我错了，请原谅）。但是您不能使用 double 来填充 lib 中的形状`java.awt.*`。

在这里我计算球击中桨后的角度

```
int c = (int) Math.atan2(ball.getPosY(), ball.getPosX());
int delta_x = (int) (1 * Math.cos(c));

    int delta_y = (int) (1 * Math.sin(c));
    this.dx += delta_x;
    this.dy += delta_y; 
```

用`dx`and`dy`我改变了乒乓球的`x`and的位置。`y`我在这里画我的乒乓球。

```
g.setColor(Color.WHITE);
g.fillOval(this.posX, this.posY, 25, 25); 
```

如果我想让`dx`and`dy`更准确​​，我必须将`delta_y`and的类型更改`delta_x`为加倍。但`fillOval()`不适用于双变量。那么我是否必须制作我的图形`geom.Point2D.Double`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:00:25.007

对 delta 使用双精度值，但将最终坐标转换为 int。

像这样（以伪代码风格的东西）：

```
int delta_x=1.3, delta_y=-0.4
public void update(){
   double x=(pong_ball.getX()+delta_x);
   double y=(pong_ball.getY()+delta_y);
   pong_ball.setX(x);
   pong_ball.setY(y);
}
// in the pong_ball code
public void paint(Graphics g){
   paintBall((int) x, (int) y);
} 
```

编辑：对不起，我意识到了一个错误。如果 delta 足够小，球就不会移动！因此，您也需要将球的坐标存储在双打中，并且仅在最终绘制球时才投射...对不起

编辑 2：请注意，上面的代码不可编译。您需要更多代码（例如实际的 xy 字段、jframe 代码等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:04:05.537

这是 Erin W 的代码。他使用的是 Graphics 2D：

```
/*
 * Copyright (c) 2007 Eric Woroshow
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

package ca.ericw.pong;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Font;
import java.awt.Frame;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.Stroke;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.image.BufferStrategy;

public class Pong {

    public static final String GAME_NAME = "PONG!";
    private static final int GAME_WIDTH = 320;
    private static final int GAME_HEIGHT = 240;
    private static final int GAME_FPS = 60;
    private static final int PADDLE_HEIGHT = 60;
    private static final int PADDLE_HALFWIDTH = 5;
    private static final float PADDLE_SPEED = 2f;
    private static final float BALL_RADIUS = 5;
    private static final float BALL_SPEED_INCREASE = 1.05f;
    private static final int GFX_SPACER = 10;
    private static final int SCORE_TO_WIN = 5;
    private static final int INTERPOINT_DELAY = GAME_FPS;
    private static final int INTERGAME_DELAY = 3 * GAME_FPS;

    private Frame window;
    private BufferStrategy bufStrat;
    private boolean[] keys;

    private Font titleFont;
    private Font menuFont;
    private Font scoreFont;
    private Font winnerFont;
    private Stroke centreStroke;

    private boolean finished;

    private int timer;
    private long timeThen, timeNow, timeLate;

    private enum GameState { MENU, INGAME, POINTSCORED, WINNER };
    private GameState state;

    private float playerLY, playerRY;
    private float ballX, ballY, ballVX, ballVY;
    private int playerLScore, playerRScore;
    private boolean singlePlayer;

    /**
     * Creates and runs a new game of Pong.
     */
    public Pong() {
        init();
        run();
        quit();
    }

    /**
     * Initializes the game state and display.
     */
    private void init() {
        // setup game state
        titleFont = new Font("Verdana", Font.BOLD, 60);
        menuFont = new Font("Verdana", Font.BOLD, 10);
        scoreFont = new Font("Fixed Width", Font.BOLD, 80);
        winnerFont = new Font("Verdana", Font.BOLD, 18);
        centreStroke = new BasicStroke(BALL_RADIUS, BasicStroke.CAP_BUTT,
                                       BasicStroke.JOIN_MITER, 10f, new float[]{8f}, 0f);
        keys = new boolean[256];
        singlePlayer = false;
        state = GameState.MENU;
        resetPoint();

        // setup the game window
        window = new Frame(GAME_NAME);
        window.setIgnoreRepaint(true);
        window.setUndecorated(true);
        window.setSize(GAME_WIDTH, GAME_HEIGHT);
        window.setResizable(false);
        window.setLocationRelativeTo(null);
        window.addWindowListener(new WindowAdapter(){
            public void windowClosing(WindowEvent evt){ finished = true; }
        });
        window.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent e) { keys[e.getKeyCode()] = true; }
            public void keyReleased(KeyEvent e) { keys[e.getKeyCode()] = false; }
        });

        // show the window
        window.setVisible(true);
        window.requestFocus();

        // setup double buffering on the display
        window.createBufferStrategy(2);
        bufStrat = window.getBufferStrategy();
    }

    /**
     * Runs the game, executing game logic and rendering the current state.
     */
    private void run() {
        while(!finished) {
            logic();
            render();
            sync();
        }
    }

    /**
     * Cleans up any resources and exits the program as soon as possible.
     */
    private void quit() {
        window.dispose();
    }

    /**
     * Updates the game state for a frame.
     */
    private void logic() {
        if (keys[KeyEvent.VK_ESCAPE]) {
            finished = true;
            return;
        }

        switch(state) {
            case MENU:
                updateMenu(); break;
            case INGAME:
                updateGame(); break;
            case POINTSCORED:
                updatePointScored(); break;
            case WINNER:
                updateWinner(); break;
        }
    }

    private void updateMenu() {
        if (keys[KeyEvent.VK_1]) { // start single player game
            singlePlayer = true;
            resetGame();
            state = GameState.INGAME;
        } else if (keys[KeyEvent.VK_2]) { // start two player game
            singlePlayer = false;
            resetGame();
            state = GameState.INGAME;
        }
    }

    private void updateGame() {
        // calculate new position for player one
        if (keys[KeyEvent.VK_A] && playerLY > 20) {
            playerLY -= PADDLE_SPEED;
        }
        if (keys[KeyEvent.VK_Z] && playerLY + PADDLE_HEIGHT < GAME_HEIGHT - 20) {
            playerLY += PADDLE_SPEED;
        }

        // calculate new position for player two 
        if (!singlePlayer) {
            if (keys[KeyEvent.VK_UP] && playerRY > 20) {
                playerRY -= PADDLE_SPEED;
            }
            if (keys[KeyEvent.VK_DOWN] && playerRY + PADDLE_HEIGHT < GAME_HEIGHT - 20) {
                playerRY += PADDLE_SPEED;
            }
        } else {
            updateAI();
        }

        // do collision detection
        updateBallCollision();        

        // calculate new position for the ball
        ballX += ballVX;
        ballY += ballVY;
    }

    private void updatePointScored() {
        timer++;
        if (timer >= INTERPOINT_DELAY) {
            timer = 0;

            if (playerLScore >= SCORE_TO_WIN || playerRScore >= SCORE_TO_WIN) {
                // one player has one after the last point
                state = GameState.WINNER;
            } else {
                // need to keep playing to find a winner
                resetPoint();
                state = GameState.INGAME;
            }
        }
    }

    private void updateWinner() {
        timer++;
        if (timer >= INTERGAME_DELAY) {
            timer = 0;
            state = GameState.MENU;
        }
    }

    /**
     * Renders the current state of the game.
     */
    private void render() {
        Graphics2D g = (Graphics2D)bufStrat.getDrawGraphics();
        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        switch(state) {
            case MENU:
                renderMenu(g); break;
            case INGAME:
            case POINTSCORED:
                renderGame(g); break;
            case WINNER:
                renderWinner(g); break;
        }

        g.dispose();
        bufStrat.show();
    }

    private void renderMenu(Graphics2D g) {
        // clear the screen
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, GAME_WIDTH, GAME_HEIGHT);

        // draw the title
        g.setFont(titleFont);
        g.setColor(Color.WHITE);
        g.fillRect(0, 70, GAME_WIDTH, 5);
        g.drawString(GAME_NAME, 55, 130);
        g.fillRect(0, 140, GAME_WIDTH, 5);

        // draw the instruction text
        g.setFont(menuFont);
        g.drawString("(1) player - (2) players - (Esc)ape", 70, GAME_HEIGHT - 10);
    }

    private void renderGame(Graphics2D g) {
        // clear the screen
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, GAME_WIDTH, GAME_HEIGHT);

        // draw the scores
        g.setFont(scoreFont);
        g.setColor(Color.DARK_GRAY);
        g.drawString(String.valueOf(playerLScore), 120, 70);
        g.drawString(String.valueOf(playerRScore), 155, 70);

        // draw the top and bottom edges
        g.setColor(Color.WHITE);
        g.fillRect(GFX_SPACER, GAME_HEIGHT - 2 * GFX_SPACER, GAME_WIDTH - 2 * GFX_SPACER, GFX_SPACER);
        g.fillRect(GFX_SPACER, GFX_SPACER, GAME_WIDTH - 2 * GFX_SPACER, GFX_SPACER);

        // draw the centre line
        g.setStroke(centreStroke);
        g.drawLine(GAME_WIDTH / 2, 2 * GFX_SPACER, GAME_WIDTH / 2, GAME_HEIGHT - 2 * GFX_SPACER);

        // draw the two paddles
        g.setColor(Color.WHITE);
        g.fillRect(GFX_SPACER, (int)playerLY, GFX_SPACER, PADDLE_HEIGHT);
        g.fillRect(GAME_WIDTH - 2 * GFX_SPACER, (int)playerRY, PADDLE_HALFWIDTH * 2, PADDLE_HEIGHT);

        // draw the ball
        g.setColor(Color.WHITE);
        g.fillRect((int)(ballX - BALL_RADIUS), (int)(ballY - BALL_RADIUS),
                   (int)(BALL_RADIUS * 2), (int)(BALL_RADIUS * 2));
    }

    private void renderWinner(Graphics2D g) {
        // render the game in the background
        renderGame(g);
        Color maskBack = new Color(100, 100, 100, 128);
        g.setColor(maskBack);
        g.fillRect(0, 0, GAME_WIDTH, GAME_HEIGHT);

        // draw the winner string
        String winner = (playerLScore > playerRScore)
                            ? "Left player wins!"
                            : "Right player wins!";

        g.setFont(winnerFont);
        g.setColor(Color.WHITE);
        g.drawString(winner, 85, 120);
    }

    /**
     * Resets the position of the ball and paddles for a new point.
     */
    private void resetPoint() {
        playerLY = GAME_HEIGHT / 2 - PADDLE_HEIGHT / 2;
        playerRY = GAME_HEIGHT / 2 - PADDLE_HEIGHT / 2;
        ballX = GAME_WIDTH / 2;
        ballY = GAME_HEIGHT / 2;
        ballVX = (Math.random() > 0.5) ? 2 : -2;
        ballVY = (Math.random() > 0.5) ? 2 : -2;
    }

    /**
     * Resets the game state for a new game.
     */
    private void resetGame() {
        playerLScore = 0;
        playerRScore = 0;
        resetPoint();
    }

    /**
     * Checks for collision of the ball again the walls and player paddles. If a
     * player has scored this method will change the state appropriately.
     */
    private void updateBallCollision() {
        // check for collision against the top and bottom
        if ((ballY - BALL_RADIUS <= 2 * GFX_SPACER) ||
            (ballY + BALL_RADIUS >= GAME_HEIGHT - 2 * GFX_SPACER)) {
            ballVY = -ballVY;
        }

        // check for collision with paddles
        final int PADDLE_HALFHEIGHT = PADDLE_HEIGHT / 2; 

        // calculate the penetration on each axis
        float penRX = PADDLE_HALFWIDTH + BALL_RADIUS - Math.abs(ballX - (GAME_WIDTH - 15));
        float penRY = PADDLE_HALFHEIGHT + BALL_RADIUS - Math.abs(ballY - (playerRY + PADDLE_HALFHEIGHT));
        float penLX = PADDLE_HALFWIDTH + BALL_RADIUS - Math.abs(ballX - 15);
        float penLY = PADDLE_HALFHEIGHT + BALL_RADIUS - Math.abs(ballY - (playerLY + PADDLE_HALFHEIGHT));

        if (penRX > 0 && penRY > 0) { // hit right paddle
            ballVX = -ballVX;
            if (penRX < penRY) {
                ballX -= penRX;
            } else {
                ballY += (ballY > playerRY) ? penRY : -penRY;
                ballVY = -ballVY;
            }
        } else if (penLX > 0 && penLY > 0) { // hit left paddle
            ballVX = -ballVX;
            if (penLX < penLY) {
                ballX += penLX;
            } else {
                ballY += (ballY > playerLY) ? penLY : -penLY;
                ballVY = -ballVY;
            }
        }

        // increase the speed of the ball with every hit
        if ((penRX > 0 && penRY > 0) || (penLX > 0 && penLY > 0)) {
            ballVX *= BALL_SPEED_INCREASE;
            ballVY *= BALL_SPEED_INCREASE;
        }

        // check for points scored
        if (ballX < 0) {
            playerRScore++;
            state = GameState.POINTSCORED;
        } else if (ballX > GAME_WIDTH) {
            playerLScore++;
            state = GameState.POINTSCORED;
        }
    }

    /**
     * Runs the artificial stupidity calculations for this frame.
     */
    private void updateAI() {
        float paddleDest;

        if (ballVX > 0) {
            // ball is moving toward AI, move paddle to ball
            paddleDest = ballY - PADDLE_HEIGHT / 2;
        } else {
            // ball is moving away, move paddle back to centre
            paddleDest = GAME_HEIGHT / 2 - PADDLE_HEIGHT / 2;
        }

        if (playerRY > paddleDest && playerRY > 20) {
            playerRY -= PADDLE_SPEED;
        } else if (playerRY < paddleDest && playerRY + PADDLE_HEIGHT < GAME_HEIGHT - 20) {
            playerRY += PADDLE_SPEED;
        }
    }

    /**
     * Synchrnoizes the display to the desired frame rate.
     */
    private void sync() {
        long timeOfNextFrame = (1000000000l / GAME_FPS) + timeThen;
        timeNow = System.nanoTime();

        while(timeOfNextFrame > timeNow + timeLate) {
            try {
                Thread.sleep(1);
            } catch (InterruptedException e) { }
            timeNow = System.nanoTime();
        }

        if (timeNow > timeOfNextFrame) {
            timeLate = timeNow - timeOfNextFrame;
        } else {
            timeLate = 0;
        }

        timeThen = timeNow;
    }

    /**
     * Entry point to the application.
     */
    public static void main(String[] args) {
        Pong p = new Pong();
    }
} 
```

# java - Android 应用程序和外部数据库之间通信的最佳方式

> ID：13389148
> 
> 赞同：0
> 
> 时间：2012-11-14T23:24:45.033
> 
> 标签：java, android, mysql, database, architecture

我正在启动一个 Android 应用程序，我需要一个外部数据库，也许是 MySQL。

在我的数据库中链接我的应用程序的最佳方式是什么？我应该有一个带有控制器的 Web 应用程序来访问数据库，还是应该创建 Web 服务来在我的应用程序和服务器之间建立连接？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:28:44.433

创建一个具有 API 的 Web 服务，以便从 Android 获取指令以及对 Db 的本机访问。

# ios - 如何在 Instagram 等应用中使用“@”提及用户

> ID：13389150
> 
> 赞同：5
> 
> 时间：2012-11-14T23:24:48.643
> 
> 标签：ios, django, tagging, instagram

我正在创建一个具有照片共享功能的应用程序，并且我正在尝试添加功能以提及（或标记）用户。Twitter 最初是使用带有用户名的“@”来标记用户，但现在从 Facebook 到 Instagram 的一切都在使用它。这是在 iOS 端还是在后端实现的东西？我目前正在用 Django 对后端进行编程，但出于某种原因，我认为这将在 iOS 端完成。令人惊讶的是，他们关于如何在 Django 或 iOS 中提及用户的信息很少。

基本上，在创建帖子时，我想通过键入“@”后跟用户名（之间没有空格）来创建用户提及，这将在帖子中显示他们的姓名，如下所示：@username 可以点击，领先返回该用户的个人资料。如果我对我的问题有任何不清楚的地方，请告诉我。任何帮助，例如指出我从哪里开始这样的事情的正确方向，将不胜感激。谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:22:15.230

在 iOS 上收听输入。当用户键入一个`@`，后跟一个字符时，调用您服务器上的一个 url（`/user/lookup/?username=joe`例如），该 URL 路由到一个查找以 . 开头的用户的视图`joe`。将其作为 json 返回并在下拉列表中显示。

来源：[如何在 Instagram 等应用中使用“@”提及用户](https://stackoverflow.com/questions/13389150/how-to-mension-users-with-in-app-like-instagram#comment18288126_13389150)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T07:18:55.687

你可以在 UITextView 委托中尝试这样的事情：

```
- (void)textViewDidChange:(UITextView *)textView
{
    _words = [self.textView.text componentsSeparatedByString:@" "];
    NSPredicate* predicate = [NSPredicate predicateWithFormat:@"SELF BEGINSWITH[cd] '@'"];
    NSArray* names = [_words filteredArrayUsingPredicate:predicate];
    if (_oldArray)
    {
        NSMutableSet* set1 = [NSMutableSet setWithArray:names];
        NSMutableSet* set2 = [NSMutableSet setWithArray:_oldArray];
        [set1 minusSet:set2];
        if (set1.count > 0)
            NSLog(@"Results %@", set1);
    }
    _oldArray = [[NSArray alloc] initWithArray:names];
} 
```

其中 _words、_searchResults 和 _oldArray 是`NSArrays`.

# algorithm - 极小极大评估函数

> ID：13389155
> 
> 赞同：2
> 
> 时间：2012-11-14T23:25:07.357
> 
> 标签：algorithm, tree, minimax

我正在使用 Unity3D 开发游戏《最终幻想 VIII》中看到的迷你游戏 Triple Triad。

基本游戏是一个 3x3 网格，玩家和 NPC 手里拿着 5 张牌。目标是在棋盘被填满时持有最多的牌。卡片的顶部、底部、左侧和右侧有 4 个数字。玩家将一张牌放在网格上，另一位玩家可以将一张牌放在它旁边，然后将比较牌上的数字（例如，如果一张牌在中间，而对手在它的左边打了一张，对手卡的右值将与已经存在的卡的左值进行比较）。如果一张牌大于另一张牌，则玩家将“拿走”对手的牌。

关于三重三合会的更多细节可以在这里看到：http: [//finalfantasy.wikia.com/wiki/Triple_Triad](http://finalfantasy.wikia.com/wiki/Triple_Triad)

我目前正在为单人游戏设计 AI，以便人类可以与 NPC 对战。我已经决定开发 AI 的最佳方式是使用带有 alpha-beta 修剪的 Minimax 算法，以便轮流为 AI 找出最佳可能的移动。

我遇到的问题是，我在互联网上看到的大多数示例都显示了 tic-tac-toe 的评估器功能。这比三元组评估器要简单得多，因为该函数必须考虑卡片上的值以及正在播放的位置（例如，拿走一张敌人的卡片）。

有没有人对我如何编写这个评估器函数有任何提示？或者至少我怎样才能将这个站点的代码改编成一个可以评估我的板子的三元组？

[http://www3.ntu.edu.sg/home/ehchua/programming/java/JavaGame_TicTacToe_AI.html](http://www3.ntu.edu.sg/home/ehchua/programming/java/JavaGame_TicTacToe_AI.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:49:04.850

评估函数有两种风格：如果您可以看到游戏的结束（就像您在井字游戏中总是可以看到的那样，即使您在 Commodore 64 上运行），您可以将结果完全基于结果是否是成功的。然后，游戏引擎将只选择获胜的动作（或者，如果可能，平局）。

如果您*看*不到残局，这在任何有趣的游戏中都更为常见，您需要一个函数来计算中间棋盘位置，以衡量它如何有利于每个玩家。例如，在国际象棋中，您可以为每个棋子分配点值，然后将每边的材料数量相加并减去。因此，人工智能将有利于更大的物质优势。然后你给评估者加分以控制对手，依此类推。

如果您不太了解如何玩游戏（我已经为我不知道如何玩的游戏编写了不止一次的 AI！），那么您可以简单地针对人类或其他 AI 玩家调整您的 AI，直到它完成好。我专门编写了一个程序来对抗 7th Guest 中的显微镜拼图（它是 Ataxx 的变体）。我不得不写它，因为我和我的室友无法击败游戏！很明显，棋盘覆盖的某些功能是正确的功能，我尝试了连接组的奖励等等，直到我的 AI 可以击败游戏的 AI。我自己还是打不过Ataxx，我自己的AI更狠，快把我宰了。

# c - 警告：传递 'quicksort' 的参数 1 使指针从整数而不进行强制转换

> ID：13389158
> 
> 赞同：0
> 
> 时间：2012-11-14T23:25:41.020
> 
> 标签：c, function, methods

我收到警告：`warning: passing argument 1 of 'quicksort' makes pointer from integer without a cast`.

函数声明如下：`void quicksort(int x[], int first, int last)`

我正在使用调用函数 `quicksort(values[noOfNums],0,(noOfNums - 1));`

不确定这里到底出了什么问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T23:28:09.283

您将（可能无效）值作为第一个参数传入数组末尾，而不是传入数组本身（作为指针）。

函数调用应该看起来更像：

```
quicksort(values, 0, noOfNums - 1); 
```

# xslt - XSLT：有效测试“表亲”节点是否存在

> ID：13389163
> 
> 赞同：2
> 
> 时间：2012-11-14T23:25:49.647
> 
> 标签：xslt, xpath, xslt-1.0

我有以下 XML：

```
<types>
    <type>
        <name>derived</name>
        <superType>base</superType>
        <properties>
            <property>
                <name>B1</name>
            </property>
            <property>
                <name>D1</name>
            </property>
        </properties>
    </type>
    <type>
        <name>base</name>
        <properties>
            <property>
                <name>B1</name>
            </property>
        </properties>
    </type>
</types> 
```

我想转换成这个输出：

```
derived
    D1

base
    B1 
```

请注意，节点`/types/type[name='derived']/properties/property[name='B1']`已被跳过，因为它存在于基本类型中：`/types/type[name='base']/properties/property[name='B1']`.

我想出了这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <!-- Do nothing for base class properties -->
    <!-- Wouldn't be necessary if the match criteria could be applied in the select -->
    <xsl:template match="property"/>

    <xsl:template match="property[not(//type[name=current()/../../superType]/properties/property[name=current()/name])]">
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="name"/>
        <xsl:text>&#10;</xsl:text>
    </xsl:template>

    <xsl:template match="types/type">
        <xsl:value-of select="name"/>
        <xsl:text>&#10;</xsl:text>
        <xsl:apply-templates select="./properties"/>
        <xsl:text>&#10;</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

这可行（使用 Notepad++ 中的 XML 工具插件），但`not(//type[name=current()/../../superType]/properties/property[name=current()/name])`XPath 表达式**效率极低**：当应用于 200K 行 XML 文件时，转换需要**280 秒**。如果没有这个 XPath 表达式，转换只需要**2 秒**。

有什么方法可以加快速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:50:50.510

测量这个速度...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" encoding="utf-8"/>
<xsl:strip-space elements="*"/>

<xsl:key name="kPropertyByName" match="property" use="name" /> 

<xsl:template match="property">
  <xsl:variable name="supertype" select="../../superType/text()" />
  <xsl:if test="($supertype = '') or not ( key('kPropertyByName',name)/../../name[.=$supertype])">
    <xsl:value-of select="concat('&#x09;',name,'&#x0A;')" /> 
  </xsl:if>  
</xsl:template>  

<xsl:template match="type">
  <xsl:value-of select="concat(name,'&#x0A;')" />
  <xsl:apply-templates select="properties" />
  <xsl:text>&#x0A;</xsl:text>
</xsl:template>  

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:08:58.257

加速它的最简单方法是使用优化的 XSLT 处理器 - Saxon-EE 应该将此表达式视为可以从哈希索引中受益的表达式，将其从 O(n^2) 变为 O(n)。

按照 Durkin 的建议，下一个最佳方法是使用键对其进行手动优化。

# php - 在基本电子邮件跟踪像素中找不到 SQL 语法错误

> ID：13389167
> 
> 赞同：-6
> 
> 时间：2012-11-14T23:25:58.280
> 
> 标签：php, mysql, sql

我正在尝试设置一个非常简单的电子邮件跟踪像素……事实证明它没有我最初预期的那么简单。

我的服务器正在运行 linux 和 mysql v. 5.1.65

```
<?php

$username = '*******';
$db_password = '*******';
$database = '*******';

$IP = $_SERVER['REMOTE_ADDR'];

$CAMPAIGN = $_GET['MID'];

mysql_connect('localhost',$username,$db_password);
@mysql_select_db($database) or die( "Unable to select database");

mysql_query("INSERT INTO email_table VALUES ('$CAMPAIGN', '$IP',)") or die(mysql_error() );
mysql_close();
exit;
?> 
```

我得到：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ')' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:27:51.877

最后似乎有一个额外的逗号：

```
INSERT INTO email_table VALUES ('$CAMPAIGN', '$IP',) 
```

尝试：

```
INSERT INTO email_table VALUES ('$CAMPAIGN', '$IP') 
```

顺便说一句，我不会过多地判断您的代码，但通过 IP 跟踪人员并不是很可靠。例如，公司防火墙后面的大量公司流量可以使用相同的 IP 地址。

此外，它看起来`$CAMPAIGN`来自 HTTP 帖子，如果您没有[参数化 SQL](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection) ，这可能是一个安全问题。

# authentication - Jenkins 仅使用 OpenID 身份验证将访问权限限制为 Google Apps 域用户

> ID：13389176
> 
> 赞同：5
> 
> 时间：2012-11-14T23:26:52.830
> 
> 标签：authentication, jenkins, openid, google-apps, jenkins-plugins

使用[Jenkins OpenID 插件](https://wiki.jenkins-ci.org/display/JENKINS/OpenID+Plugin)，我可以将 Jenkins 配置为使用我的 Google Apps OpenID 作为提供者。匿名用户仍然能够访问该应用程序（他们只有读取访问权限），但我希望拥有它，以便用户被迫使用 Google App 域登录，或者他们被拒绝访问。

我目前正在使用“登录用户可以做任何事情”的 Jenkins 授权设置，我尝试使用“基于矩阵的身份验证”并拒绝匿名用户，假设登录用户仍然有权限，是否有特殊的组值我可以在基于矩阵的身份验证中使用“登录用户”吗？

似乎“基于矩阵的安全性”仅在使用 Google Apps OpenID 时适用于特定用户（我不相信 Google Apps for Domains 支持[OpenIDTeam 扩展](https://dev.launchpad.net/OpenIDTeams)

![在此处输入图像描述](../Images/ee4968046ebb786a1eab1ba6c5819d54.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:34:11.093

是的，您可以使用一个特殊的小组来执行此操作，但查找有关如何执行此操作的信息并不明显。如果您将鼠标悬停在基于矩阵的安全表上的*“总体 - 读取”*列上，您将获得解决方案。

它指出

> 阅读权限是查看几乎所有 Jenkins 页面所必需的。当您不希望未经身份验证的用户查看 Jenkins 页面时，此权限很有用 - 从匿名用户撤消此权限，然后添加“经过身份验证的”伪用户并授予读取权限。

我将以下技术与[OpenID 插件](https://wiki.jenkins-ci.org/display/JENKINS/OpenID+plugin)结合使用，该插件允许我指定一个 Google Apps for Business 域来保护 Jenkins

*警告：请确保在开始之前备份您的安装，因为如果出现错误，您可能会将自己锁定在 Jenkins 之外。与仅从备份恢复相比，取消选择插件和设置需要更长的时间。*

1.  确保您选择的 OpenID 提供商仍然可以与您当前的“登录用户可以做任何事情”设置正常工作
2.  为授权选择“基于矩阵的安全”模式
3.  将新的“已验证”组（小写“a”）添加到基于矩阵的安全表中。
4.  使用新的“已验证”行右侧的“检查所有”图标来勾选所有权限框。
5.  使用“匿名”行右侧的“全部选中”图标取消选中所有权限框。
6.  保存设置
7.  重新加载詹金斯

![基于矩阵的安全表，带有如前所述扩展的整体读取帮助文本](../Images/64c4c53c21ac127ec44d76ac83be73d4.png)

现在，每次用户想要查看 Jenkins 时，他们必须已经登录到他们的 Google 帐户，并且没有人可以在没有登录的情况下查看任何作业名称或视图。

希望这可以帮助。

# c++ - boost::iostreams::mapped_file_sink 抛出未知异常

> ID：13389177
> 
> 赞同：0
> 
> 时间：2012-11-14T23:27:18.257
> 
> 标签：c++, linux, exception, boost, memory-mapped-files

你们能帮我破译抛出的未知异常`boost::iostreams::mapped_file_sink`吗？

我的配置

*   提升 1.51
*   Windows 7 上的 Visual Studio 2012
*   Ubuntu 上的 GCC 4.7

这是我的代码

```
try
{
    boost::iostreams::mapped_file_params params_;
    boost::iostreams::mapped_file_sink sink_;
    params_.length = 0;
    params_.new_file_size = 1024;
    params_.path = "./test.bin";
    sink_.open(params_);
    sink_.close();
}
catch (std::ios::failure& ex)
{
    std::cout << "\t" << "what: " << ex.what() << "\n";
}
catch (std::system_error& ex)
{
    std::cout << "\t" << "code: " << ex.code() << "  what: " << ex.what() << "\n";
}
catch (std::runtime_error& ex)
{
    std::cout << "\t" << ex.what() << "\n";
}
catch (boost::archive::archive_exception& ex)
{
    std::cout << "\t" << ex.what() << "\n";
}
catch (boost::exception& ex)
{
    std::cout << "blah\n";
}
catch (std::exception& ex)
{
    std::cout << "\t" << ex.what() << " --- " << typeid(ex).name() << "\n";
} 
```

它始终适用于 Windows。

在 Ubuntu 中，它会创建给定大小的空文件，但会在`open()`. **如果**存在，则后续执行代码不会导致异常。

最糟糕的是，我看不到异常的原因。我只能捕捉到`std::exception`其`what()`返回无意义的“std::exception”。

为了找出问题所在，我拼命地尝试输出`typeid(ex).name()`显示

```
N5boost16exception_detail10clone_implINS0_19error_info_injectorISt9exception 
```

根据谷歌的意思是：`boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<std::exception> >`

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:23:41.147

经过 50 分钟的猜测，我发现问题出在`length`现场。文档没有说，但它的默认值必须是 -1，如源代码中所述

```
BOOST_STATIC_CONSTANT(size_type, max_length = static_cast<size_type>(-1)); 
```

我直观地假设，如果我设置`new_file_size`为大于零，它将忽略`length`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:51:49.123

您可以在调试器中运行代码并在实际引发异常的函数中设置断点，例如`__cxa_throw`. 您的系统上的函数名称可能不同：使用`nm -po program | less`并搜索包含`throw`. 在那些看起来最有可能是由系统创建的断点中设置一个断点。如果只有很少的异常被抛出，你也可以在`std::exception::exception()`.

# .net - 在 .NET 中，如何确定 Windows 1252 代码页中存在的哪些字符在 EBCDIC 37 代码页中不存在？

> ID：13389182
> 
> 赞同：0
> 
> 时间：2012-11-14T23:27:31.567
> 
> 标签：.net, encoding, character-encoding

我有一个使用 Windows 1252 代码页（从 SQL Server 2008 varchar 字段输入）读取数据的进程。然后我将此数据写入一个平面文本文件，该文件由使用 EBCDIC 37 代码页的 IBM 大型机系统获取。该系统将文件转换为其自己的字符集。但是，扩展 ASCII 范围内的某些内容（字符代码 128 - 255）不会被大型机很好地转换。我认为这是因为 Windows 字符集中的某些字符在 EBCDIC 字符集中不存在。

有没有一种通用的方法来确定我需要过滤掉哪些字符，例如左单引号、右单引号、左双引号、右双引号、项目符号、短划线和短划线，（Windows 代码 145 - 151，分别），仅举几例？如果是这样，是否有一些算法可以用来确定最接近的 EBCDIC 等价物可能是什么（例如左单引号或右单引号的普通单引号）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:42:09.177

我一直在寻找解决此问题的通用方法，而不是只关注 EBCDIC 37，并且我不想直观地比较两个代码图表。我编写了一个简短的程序（在 VB.NET 中）来查找存在于一个代码页而不是另一个代码页中的所有字符。

```
' Pick source and target codepages.
Dim sourceEncoding As Encoding = Encoding.Default ' This is Windows 1252 on Windows OS.
Dim targetEncoding As Encoding = Encoding.GetEncoding("IBM037")

' Get every character in the codepage.
Dim inbytes(256) As Byte
For code As Integer = 0 To 255
    inbytes(code) = Convert.ToByte(code)
Next

' Convert the bytes from the source encoding to the target, then back again.
' Those bytes that convert back to the original value exist in both codepages.
' The bytes that change do not exist in the target encoding.
Dim input As String = sourceEncoding.GetString(inbytes)
Dim outbytes As Byte() = Encoding.Convert(sourceEncoding, targetEncoding, inbytes)
Dim convertedbytes As Byte() = Encoding.Convert(targetEncoding, sourceEncoding, outbytes)
Dim output As String = sourceEncoding.GetString(convertedbytes)
Dim diffs As New List(Of Char)()
For idx As Integer = 0 To input.Length - 1
    If input(idx) <> output(idx) Then
        diffs.Add(input(idx))
    End If
Next

' Print results.
Console.WriteLine("Source: " + input)
Console.WriteLine("(Coded): " + String.Join(" ", inbytes.Select(Function (x) Convert.ToInt32(x).ToString()).ToArray()))
Console.WriteLine()
Console.WriteLine("Target: " + output)
Console.WriteLine("(Coded): " + String.Join(" ", convertedbytes.Select(Function (x) Convert.ToInt32(x).ToString()).ToArray()))
Console.WriteLine()
Console.WriteLine("Cannot convert: " + String.Join(" ", diffs.Select(Function (x) Convert.ToInt32(x).ToString()).ToArray())) 
```

对于 Windows 1252 到 EBCDIC 37 的情况，有 27 个字符未映射。我选择了我认为最适合这些角色的东西。

# r - 将文本数据导入 R 并删除无关的标题和其他不需要的文本

> ID：13389196
> 
> 赞同：2
> 
> 时间：2012-11-14T23:28:51.077
> 
> 标签：r, text, import, text-files

我有一个大文本文件，其中包含来自统一犯罪报告的数据。理想情况下，我想做的只是导入数据并忽略文件中的其他无关内容。实际数据由空格分隔，当数据进入另一个“页面”时，标题信息会重复。我首先尝试使用以下代码导入数据（并且仅导入数据）并手动添加我自己的标题：

```
 data <- read.fwf("2010SHRall.txt", 
        c(-4,3,8,2,4,5,6,5,4,3,3,4,4,3,3,4,6,5,3,6,26,3),   
        skip=5,       
        col.names=c("AGE","AGENCY","G","MO","HOM","INC","SIT","VA","VS","VR","VE","OA","OS","OR","OE","WEAP","REL","CIR","SUB","AGENCYNAME","STATE"), 
        strip.white=FALSE) 
```

这有效，然后在第 51 行退出。我绝对是一个新手 R 程序员，我尝试用谷歌搜索答案以及搜索 Stack Overflow，但我不知道从这里去哪里。这是我要导入的文本文件[的链接。](https://dl.dropbox.com/u/6804142/2010SHRall.txt)同样，我正在尝试导入数据并删除任何具有标题信息的行或完整数据集不需要的其他部分。

任何人都可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:22:34.827

这应该可以工作：

```
text <- readLines('/tmp/2010SHRall.txt')
group.start <- '^      AGENCY'
group.end <- '(^B)|(^0END OF GROUP)'
data <- character()
inside.group <- FALSE
for (line in text) {
  if (inside.group) {
    if (grepl(group.end, line))
      inside.group <- FALSE
    else
      data <- append(data, line)
  } else if (grepl(group.start, line)) {
    inside.group <- TRUE
  }
}
read.fwf(textConnection(data),
         widths=c(-4,3,8,2,4,5,6,5,4,3,3,4,4,3,3,4,6,5,3,6,26,3),
         header=FALSE,
         col.names=c("AGE","AGENCY","G","MO","HOM","INC","SIT","VA","VS","VR","VE","OA","OS","OR","OE","WEAP","REL","CIR","SUB","AGENCYNAME","STATE"), 
         strip.white=TRUE) 
```

`group.start`它保留与和`group.end`正则表达式匹配的行之间的所有行，并丢弃其余行。

# python - pandas：按二级索引范围对 MultiIndex 进行切片

> ID：13389203
> 
> 赞同：36
> 
> 时间：2012-11-14T23:29:30.823
> 
> 标签：python, pandas

我有一个带有这样的 MultiIndex 的系列：

```
import numpy as np
import pandas as pd

buckets = np.repeat(['a','b','c'], [3,5,1])
sequence = [0,1,5,0,1,2,4,50,0]

s = pd.Series(
    np.random.randn(len(sequence)), 
    index=pd.MultiIndex.from_tuples(zip(buckets, sequence))
)

# In [6]: s
# Out[6]: 
# a  0    -1.106047
#    1     1.665214
#    5     0.279190
# b  0     0.326364
#    1     0.900439
#    2    -0.653940
#    4     0.082270
#    50   -0.255482
# c  0    -0.091730 
```

我想获取第二个索引（' `sequence`'）在 2 到 10 之间的 s['b'] 值。

在第一个索引上切片工作正常：

```
s['a':'b']
# Out[109]: 
# bucket  value
# a       0        1.828176
#         1        0.160496
#         5        0.401985
# b       0       -1.514268
#         1       -0.973915
#         2        1.285553
#         4       -0.194625
#         5       -0.144112 
```

但不是在第二种情况下，至少通过两种最明显的方式：

1) 这将返回元素 1 到 4，与索引值无关

```
s['b'][1:10]

# In [61]: s['b'][1:10]
# Out[61]: 
# 1     0.900439
# 2    -0.653940
# 4     0.082270
# 50   -0.255482 
```

但是，如果我反转索引并且第一个索引是整数并且第二个索引是一个字符串，它可以工作：

```
In [26]: s
Out[26]: 
0   a   -0.126299
1   a    1.810928
5   a    0.571873
0   b   -0.116108
1   b   -0.712184
2   b   -1.771264
4   b    0.148961
50  b    0.089683
0   c   -0.582578

In [25]: s[0]['a':'b']
Out[25]: 
a   -0.126299
b   -0.116108 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-15T00:30:57.783

正如[Robbie-Clarken 回答的那样](https://stackoverflow.com/a/31490891/1240268)，从 0.14 开始，您可以[在传递给 loc 的元组中传递一个切片](http://pandas.pydata.org/pandas-docs/stable/advanced.html#using-slicers)：

```
In [11]: s.loc[('b', slice(2, 10))]
Out[11]:
b  2   -0.65394
   4    0.08227
dtype: float64 
```

实际上，您可以为每个级别传递一个切片：

```
In [12]: s.loc[(slice('a', 'b'), slice(2, 10))]
Out[12]:
a  5    0.27919
b  2   -0.65394
   4    0.08227
dtype: float64 
```

*注意：切片包括在内。*

* * *

### 老答案：

您也可以使用以下方法执行此操作：

```
s.ix[1:10, "b"] 
```

（最好在单个 ix/loc/iloc 中执行，因为此版本允许分配。）

这个答案是在 2013 年初[引入 iloc](https://github.com/pydata/pandas/pull/2922)之前编写的，即位置/整数位置 - 在这种情况下可能是首选。创建它的原因是为了消除整数索引 pandas 对象的歧义，并且更具描述性：“我正在对位置进行切片”。

```
s["b"].iloc[1:10] 
```

也就是说，我有点不同意 ix 的文档：

> 最稳健和一致的方式

不是，最一致的方式是描述你在做什么：

*   使用 loc 作为标签
*   使用 iloc 作为位置
*   两者都使用 ix （如果你真的必须）

记住[python 的禅宗](https://www.python.org/dev/peps/pep-0020/)：

> 显式优于隐式

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-18T11:53:55.230

从 pandas 0.14.0 开始，可以通过提供包含[切片对象的元组来](https://docs.python.org/3/library/functions.html#slice)[切片多索引](http://pandas.pydata.org/pandas-docs/stable/advanced.html#using-slicers)对象：`.loc`

```
In [2]: s.loc[('b', slice(2, 10))]
Out[2]:
b  2   -1.206052
   4   -0.735682
dtype: float64 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-07-07T14:38:44.923

由于 pandas 0.15.0 这有效：

```
s.loc['b', 2:10] 
```

输出：

```
b  2   -0.503023
   4    0.704880
dtype: float64 
```

* * *

与 a`DataFrame`它略有不同（[来源](https://stackoverflow.com/a/38153375/4960855)）：

```
df.loc(axis=0)['b', 2:10] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-15T00:47:54.870

我能想到的最好方法是在这种情况下使用“选择”。尽管它甚至在文档中说“只有在没有更直接的方法时才应使用此方法。”

[索引和选择数据](http://pandas.pydata.org/pandas-docs/dev/indexing.html)

```
In [116]: s
Out[116]: 
a  0     1.724372
   1     0.305923
   5     1.780811
b  0    -0.556650
   1     0.207783
   4    -0.177901
   50    0.289365
   0     1.168115

In [117]: s.select(lambda x: x[0] == 'b' and 2 <= x[1] <= 10)
Out[117]: b  4   -0.177901 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T00:16:53.580

不确定这是否理想，但可以通过创建蒙版来工作

```
In [59]: s.index
Out[59]: 
MultiIndex
[('a', 0) ('a', 1) ('a', 5) ('b', 0) ('b', 1) ('b', 2) ('b', 4)
 ('b', 50) ('c', 0)]
In [77]: s[(tpl for tpl in s.index if 2<=tpl[1]<=10 and tpl[0]=='b')]                                                               
Out[77]: 
b  2   -0.586568
   4    1.559988 
```

**编辑：**海登的解决方案是要走的路

# vba - 循环遍历 VBA 中的所有集合

> ID：13389207
> 
> 赞同：2
> 
> 时间：2012-11-14T23:29:52.727
> 
> 标签：vba, collections, excel

我有一个程序，我在 VBA 中创建了几个不同的集合。程序完成后，我需要删除每个集合中的记录。我已经能够使用以下代码静态删除集合：

```
Sub Empty_Collections()
    Dim Count As Integer
    Dim i As Long

    Count = Managers.Count
    For i = 1 To Count
         Managers.Remove (Managers.Count)
    Next i

    Count = FS.Count
    For i = 1 To Count
         FS.Remove (FS.Count)
    Next i

    Count = Staff.Count
    For i = 1 To Count
         Staff.Remove (Staff.Count)
    Next i

    Count = Clusters.Count

    For i = 1 To Count
         Clusters.Remove (Clusters.Count)
    Next i

End Sub 
```

但是，由于我将来可能会添加其他集合，是否有可能具有类似于此的代码：

```
Dim Item As Collection
Dim Count As Integer
Dim i As Long

For Each Item In Worksheets
    Count = Item.Count

    For i = 1 To Count
         Item.Remove (Item.Count)
    Next i

Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T19:18:00.667

虽然我犹豫要创建这样的全局变量，但这是一个可能的解决方案：

在`ThisWorkbook`Excel 对象中，添加以下内容：

```
Private pCollections As Collection
Public Property Get Collections() As Collection
    If pCollections Is Nothing Then: Set pCollections = New Collection
    Set Collections = pCollections
End Property
Public Property Set Collections(Value As Collection)
    Set pCollections = Value
End Property

Public Sub AddCollection(Name As String)
    Dim Coll As New Collection
    Me.Collections.Add Coll, Name
End Sub

Public Sub EmptyCollections()
    Dim Coll As Collection
    For Each Coll In Me.Collections
        EmptyCollection Coll
    Next Coll
End Sub

Private Sub EmptyCollection(ByRef Coll As Collection)
    Do While Coll.Count > 0
        ' Remove items from the end of the collection
        Coll.Remove Coll.Count
    Loop
End Sub 
```

然后添加和使用集合，如下所示：

```
' Add collections
' (without helper)
Dim Managers As New Collection
ThisWorkbook.Collections.Add Managers, "Managers"

' (with helper)
ThisWorkbook.AddCollection "FS"
ThisWorkbook.AddCollection "Staff"
ThisWorkbook.AddCollection "Clusters"

' Add items to collection
' (access collection via named key for ease-of-use)
ThisWorkbook.Collections("Managers").Add "Alice"
ThisWorkbook.Collections("Managers").Add "Bob"

' (or original reference if desired
Managers.Add "Carl"

Debug.Print Managers.Count ' => 3
Debug.Print ThisWorkbook.Collections("Managers").Count ' => 3

' Add collection later
ThisWorkbook.AddCollection "FutureCollection"

' Empty all collections
ThisWorkbook.EmptyCollections 
```

这可能比您要查找的要复杂一些，但它的优点是可以将集合添加到中心位置，以便以后可以全部清空。

# javascript - 如果音频在另一个选项卡或窗口中播放，如何关闭声音

> ID：13389209
> 
> 赞同：1
> 
> 时间：2012-11-14T23:29:56.207
> 
> 标签：javascript, tabs, background-music

我完全意识到在网站上播放背景音乐是​​一个可怕的想法。但是，我的客户坚持这样做。我们遇到了各种各样的麻烦。首先，我们必须找到一个脚本让歌曲“跟随”浏览器（对于那些正在寻找这种东西的人来说，它被称为“HTML5 背景音频播放器”），记住歌曲在页面加载之间被切断的位置。

然而，我们现在遇到了一个新问题。如果站点一次在多个选项卡或窗口中打开，则音乐会自动播放。

我也完全清楚，如果您决定在新选项卡或窗口中打开站点中的另一个页面，简单的解决方案就是手动静音。我讨论过这个。然而，我的客户是一个非常“特殊”的人，他坚持认为计算机“应该知道我何时打开新页面”。

我的问题是：这样的事情存在吗？我不知道这将如何在 JavaScript 中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:36:17.267

您应该使用 cookie 或/和 HTML5 会话存储来记录您的游戏已经开始。然后，如果有，您不会在后续页面加载时启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:44:20.027

如果您正在谈论动态打开一个新选项卡，通过单击链接并单击调用`window.open();`，然后`.open()`返回对子窗口的引用，然后您可以在父脚本中与之通信：`var childWindow = window.open(url);`

否则，饼干？
查询字符串中的会话参数，如果打开新选项卡，您可以更改该参数。

另一个建议，如果您只使用 html5-audio，则类似于使用`localStorage`.
大多数支持 HTML5 的浏览器`window.Audio;`也支持`window.localStorage;`.
您必须明确检查是否确实支持和启用了 localStorage，但这只是良好的公民身份。

然后您应该能够为选项卡设置一个随机 ID，将该 ID 保存在会话存储中，将“is_playing”或 localStorage 中的任何字段设置为您在会话存储中为选项卡提供的 ID...

...然后在每个新选项卡上，检查 localStorage 中的“is_playing”是否为空，或者 ID 是否等于 sessionStorage 中设置的 ID。

localStorage 和 sessionStorage 的区别在于 sessionStorage 在关闭浏览器后会被清空，并且它也不应该在选项卡之间共享。

# ios - OpenSSL RSA_public_encrypt 奇怪的行为

> ID：13389211
> 
> 赞同：0
> 
> 时间：2012-11-14T23:30:14.957
> 
> 标签：ios, openssl

我正在尝试使用 OpenSSL 在 C 中编写一个简单的加密例程，但我发现了一些奇怪的东西。我不是 C 大师，也不是 OpenSSL 专业人士。所以我可能犯了一个错误。

功能如下

```
char *rsa_encrypt(char *data)
{
    const char xponent_in_hex[] = "010001";
    const char modulus_in_hex[] = "D0BA16F11907E7B0819705A15264AC29BEE9F1EC5F22642992
    D3E27100B7F212864A624A12FFB6D531712B0B0225AAD0C2E313D077A7DB2A5A33483EEFF41A9D";    

    BIGNUM *xponent = NULL;
    BIGNUM *modulus = NULL;

    BN_hex2bn(&xponent, xponent_in_hex);
    BN_hex2bn(&modulus, modulus_in_hex);

    RSA *rsa = RSA_new();
    rsa->e = xponent;
    rsa->n = modulus;
    rsa->iqmp = NULL;
    rsa->d = NULL;
    rsa->p = NULL;
    rsa->q = NULL;

    char encoded[512] = { 0 };
    RSA_public_encrypt(
    strlen(data), 
    (const unsigned char *)data, 
    (unsigned char *)encoded,
    rsa, 
    RSA_PKCS1_OAEP_PADDING
);

    RSA_free(rsa);

    return (encoded);
}

int _tmain(int argc, _TCHAR* argv[])
{
    printf("%s\n", base64_encode(rsa_encrypt("ABC")));
    printf("%s\n", base64_encode(rsa_encrypt("ABC")));
    printf("%s\n", base64_encode(rsa_encrypt("ABC")));
} 
```

我多次在相同的数据上调用该函数，每次调用它都会生成不同的值。这显然是**错误**的，因为创建的**RSA 结构的****指数**和**模数**是恒定的，并且每次调用中的输入数据都是相同的。

 **那么为什么`RSA_public_encrypt`会这样呢？

**我应该如何为基于指数**和**模数**的 RSA 加密生成公钥？

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:32:21.110

这实际上是正确的，你没有犯错。您的困惑源于`RSA_PKCS1_OAEP_PADDING`参数 to `RSA_public_encrypt`。

RSA加密过程其实是：

1.  获取明文（plain）并对其*进行编码*，生成encoded_plain。
2.  加密encoded_plain。

（如您所料，解密过程要求您先解密该值，然后再解码消息）。

该`RSA_PKCS1_OAEP_PADDING`参数指定应如何编码明文（应使用 OAEP 编码）。

一个简化的解释是 OAEP 填充使用一些随机值作为填充，因此`xxxxxxxABC`和`yyyyyyyABC`和`zzzzzzzABC`都是纯文本的有效编码纯文本值，并且那些编码纯文本加密为不同的值。如果您执行相应的解密（和解码，通过将相同的`RSA_PKCS1_OAEP_PADDING`参数传递给`RSA_private_decrypt`）操作，您仍然应该获得“ABC”作为每个密文的输出，因为填充剥离了所有三个密文。

（如果你想准确一点，OAEP 编码方案更复杂，请参阅[RFC 3447 第 7.1.1 节](https://www.rfc-editor.org/rfc/rfc3447#section-7.1.1)。但这些可能是你不关心的细节。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T23:16:55.440

The scope of encoded ends at the end of the rsa_encrypt function. Your return pointer will point to an invalid area of memory, that might not contain what you expect anymore because somebody else (another thread, for example) wrote over it. The answer explaining the padding is correct.**

# google-maps - 地图投影像素到纬度比例？

> ID：13389214
> 
> 赞同：1
> 
> 时间：2012-11-14T23:30:26.147
> 
> 标签：google-maps, google-maps-api-3, map-projections

我使用 Google Maps API v3 创建了一个自定义地图。这是一个虚构世界的矩形地图，而不是现实世界中的任何东西。

我一直在阅读有关如何在自定义 Google 地图中使用投影的文章。我需要使用投影，因为使用投影放置标记和区域，它们不会水平重复。无论如何，我从教程中提取了以下代码：

```
var tilesize = 256;

function MyProjection(){}

MyProjection.prototype.fromLatLngToPoint = function(latLng)
{
    var x = latLng.lng() * tileSize;
    var y = latLng.lat() * tileSize;
    return new google.maps.Point(x, y);
};

MyProjection.prototype.fromPointToLatLng = function(point)
{
    var lng = point.x * (1.0 / tileSize);
    var lat = point.y * (1.0 / tileSize);
    return new google.maps.LatLng(lat, lng);
};

function LatLngToPixels(latLng)
{
    var pnt = MyProjection.prototype.fromLatLngToPoint(latLng);
    return [pnt.x * 8, pnt.y * 8];
}

function PixelsToLatLng(pxs)
{
    var pnt = {x: pxs[0] / 8, y: pxs[1] / 8};
    return MyProjection.prototype.fromPointToLatLng(pnt);
} 
```

我已经将它应用到我的地图上，它似乎有效。但是，我试图弄清楚如何改变投影的比例。当我放置这样的标记时：

```
new google.maps.Marker(
{
    map: map,
    position: new google.maps.LatLng(0, 0)
}); 
```

标记位于地图的左上角。如果我这样做：

```
new google.maps.Marker(
{
    map: map,
    position: new google.maps.LatLng(1, 1)
}); 
```

标记位于右下角。

所以我基本上有一个最小的经度和纬度为0，最大为1。如何更改上述功能，以便规模更易于管理？比如 0 到 90 或 0 到 180？在现实世界的经度和纬度坐标方面更有意义的东西？或者投影不可能做到这一点？我对预测的想法以及它们的最终目的到底是什么感到有些困惑，所以也许我错过了重点……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T06:02:56.000

投影的目的是在 2D 表面（如一张纸或计算机屏幕）上显示 3D 对象（如行星）。

[](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-coordinates)**这是一个包含墨卡托投影对象[**的 Google 示例。**](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-coordinates)请注意，Google Maps API V3 使用[**世界坐标**](https://developers.google.com/maps/documentation/javascript/maptypes#MapCoordinates)的概念，整个世界在缩放级别 0 的 256x256 像素的单个图块上表示，然后根据缩放级别放大，因此**

 **`pixelCoordinate = worldCoordinate * Math.pow(2,zoomLevel)`**

# php - 替换字符串中的拼写错误的单词

> ID：13389216
> 
> 赞同：0
> 
> 时间：2012-11-14T23:30:39.557
> 
> 标签：php, search, google-search, levenshtein-distance

我有一个正在处理的基本搜索脚本。我希望用户能够输入多个关键字。如果其中一个关键字拼写错误，我想为搜索结果更改该词和/或显示“您的意思是……”消息。

我已经尝试过 levenshtein 但它似乎只适用于一个单词，而且似乎不是很可靠。在使用此功能时，在测试中，我想出了这个：

```
<?php
$input = 'ornage ptoato';

$possible_words = explode(' ', trim(strtolower($input)));

foreach($possible_words as $value){

   $words  = array('sony','red', 'indigo','orange','bell','toshiba','potato');

   $shortest = -1;

   foreach ($words as $word) {

       $lev = levenshtein($value, $word);

       if ($lev == 0) {

           $closest = $word;
           $shortest = 0;

           break;
       }

       if ($lev <= $shortest || $shortest < 0) {
           // set the closest match, and shortest distance
           $closest  = $word;
           $shortest = $lev;
       }
   }

}
echo "Input word: $input<br>";
if ($shortest == 0) {
    echo "Exact match found: $closest";
} else {
    echo "Did you mean: $closest?\n";
}

?> 
```

foreach 中有 foreach 是因为我试图为搜索字符串中的每个单词执行此操作。

我基本上希望它像谷歌的“你的意思是..”和 eBay 的“找到一二的 0 个结果，所以我们搜索一二三”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:00:55.193

您的代码需要稍作调整。

```
<?php
$input = 'ornage ptoato toshiba butts';
$possible_words = explode(' ', trim(strtolower($input)));
$words = array('sony','red', 'indigo','orange','bell','toshiba','potato');
$threshold = 4;

foreach($possible_words as $value){
    $shortest = -1;
    if( in_array($value, $words) ) {
        printf("Exact match for word: %s\n", $value);
    } else {
        foreach ($words as $word) {
             $lev = levenshtein($value, $word);

             if ($lev <= $shortest || $shortest < 0) {
                  // set the closest match, and shortest distance
                  $closest  = $word;
                  $shortest = $lev;
             }
        }
        if($shortest < $threshold) {
            printf("You typed: %s.\nAssuming you meant: %s\n", $value, $closest);
        } else {
            printf("Could not find acceptable match for: %s\n", $value);
        }
    }
} 
```

1.  检查可接受的匹配项需要进入外循环。
2.  在计算 Levenshtein 距离之前，您可以使用它`in_array()`来搜索完全匹配
3.  您可能只想在合理范围内匹配单词。[心疼`$threshold`]

输出：

```
You typed: ornage.
Assuming you meant: orange
You typed: ptoato.
Assuming you meant: potato
Exact match for word: toshiba
Could not find acceptable match for: butts 
```

# c++ - 当从记录集或数据库查询中填充时，如何跟踪树中的项目？

> ID：13389218
> 
> 赞同：0
> 
> 时间：2012-11-14T23:30:56.203
> 
> 标签：c++, windows, visual-c++

在我的数据库中，我有一个带有 guid 和名称字段的表。guid 是我的主键。我可以使用“名称”数据字段查询表并填充树。我的问题是名称字段不是唯一的，因此很难跟踪它是哪个 guid + 名称组合。例如，我的树视图可能看起来像这样：

```
-Cities in America
 |
 -Cities in Oregon
      |
      +Milwaukee
      +Salem
 |
 -Cities in Wisconsin
      |
      -Milwaukee
      -Madison 
```

俄勒冈州的密尔沃基市与威斯康星州的导游不同。当用户点击任一密尔沃基时，我如何跟踪选择了哪一个？我需要知道该选择的 guid，以便我可以重新查询数据库并获取与该城市有关的其他字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:42:28.050

当您将一个项目插入到树视图中时，您可以包含一个 lParam。它只是一个 32 位项目，因此您不能直接存储 GUID，但您可以（例如）在将项目插入树时创建一个 GUID 数组，并将索引存储到 lParam 中的数组中。

当用户单击一个项目时，它将选择该项目，您将收到一条[`TVN_SELCHANGED`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773544.aspx)消息，其中将包含（除其他外）一个指向 a 的指针[`TVITEM`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773456.aspx)，该指针将包含您作为项目的一部分插入的 lParam。然后，您可以使用它来查找您的 GUID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:44:24.203

您可以使用`Tag`属性来存储您的 GUID。请参阅[Control.Tag 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)

**已编辑：**对于 MFC CTreeCtrl，请参见[CTreeCtrl::SetItemData](http://msdn.microsoft.com/en-us/library/xk6c77ff%28v=vs.80%29.aspx)
它只存储 32 位值，因此要跟踪您的标签，您必须创建所有标签的索引——您可以使用向量来存储标签和`SetItemData`指向标签的指针在向量中。

# iphone - 在 ios6 中播放视频

> ID：13389221
> 
> 赞同：1
> 
> 时间：2012-11-14T23:31:30.613
> 
> 标签：iphone, ios, xcode, ipad, mpmovieplayercontroller

当应用程序开始时，视频将自动运行

但是按下主页按钮并再次打开应用程序冻结并且不知道为什么

我能做些什么？

```
- (void)viewDidLoad{

    m_player = [[MPMoviePlayerController alloc] initWithContentURL:url];
            [m_player.backgroundView setBackgroundColor:[UIColor blackColor]];
            [m_player.view setBackgroundColor:[UIColor blackColor]];
            [m_player setControlStyle:MPMovieControlStyleNone];
            [[m_player view] setFrame:[self.view bounds]];

            [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];

            [m_player play];
            [self.view addSubview:[m_player view]];
    }

- (void) moviePlayBackDidFinish:(NSNotification*)_notification
{

        [[NSNotificationCenter defaultCenter] removeObserver:self
                                              name:MPMoviePlayerPlaybackDidFinishNotification
                                                      object:nil];

        [m_player.view removeFromSuperview];
        [m_player stop];
        m_player = nil;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:21:18.317

**这段代码帮助我避免在按下主页按钮并且视频播放和工作时冻结应用程序！！！**

```
[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(handleEnteredBackground:)
                                             name: UIApplicationDidEnterBackgroundNotification
                                           object: nil];

-(void)handleEnteredBackground:(NSNotification*)_notification{

   [m_player play];

} 
```

# ruby - 有没有一种在 ruby 中切换文件扩展名的好方法？

> ID：13389225
> 
> 赞同：4
> 
> 时间：2012-11-14T23:32:00.227
> 
> 标签：ruby

我想切换文件的扩展名。例如：

`test_dir/test_file.jpg``.txt`应该给`test_dir/test_file.txt`。

我还希望该解决方案可以处理具有两个扩展名的文件。

`test_dir/test_file.ext1.jpg`应该`.txt`应该给`test_dir/test_file.ext1.txt`

同样，在没有扩展名的文件上，它应该只添加扩展名。

`test_dir/test_file`应该给`.txt`test_dir/test_file.txt

我觉得这应该很简单，但我还没有找到一个简单的解决方案。这是我现在所拥有的。我认为它真的很难看，但它似乎确实有效。

```
def switch_ext(f, new_ext)
  File.join(File.dirname(f), File.basename(f, File.extname(f))) + new_ext
end 
```

你有没有更优雅的方法来做到这一点？我在互联网上看过，但我猜我错过了一些明显的东西。有什么需要注意的问题吗？我更喜欢不使用正则表达式的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:32:47.200

您的示例方法并不那么难看。请继续在字符串正则表达式上使用文件命名语义感知方法。您可以尝试[`Pathname`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html)stdlib ，这可能会使它更干净一些：

```
require 'pathname'

def switch_ext(f, new_ext)
  p = Pathname.new f
  p.dirname + "#{ p.basename('.*') }#{ new_ext }"
end

>> puts %w{ test_dir/test_file.jpg test_dir/test_file.ext1.jpg testfile .vimrc }.
 | map{|f| switch_ext f, '.txt' }
test_dir/test_file.txt
test_dir/test_file.ext1.txt
testfile.txt
.vimrc.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:11:48.100

```
def switch_ext(filename, new_ext)
  filename.chomp( File.extname(filename)) + new_ext
end 
```

我刚刚在这个长期讨论的底部找到了我自己的问题的答案。 [http://www.ruby-forum.com/topic/179524](http://www.ruby-forum.com/topic/179524)

我个人认为这是我见过的最好的一个。我绝对想避免使用正则表达式，因为它们对我来说很难记住，因此容易出错。

对于点文件，此函数只是将扩展名添加到文件中。这种行为对我来说似乎是明智的。

```
switch_ext('.vimrc', '.txt') # => ".vimrc.txt" 
```

如果有任何问题，请继续发布更好的答案，并发表评论让我知道您是否在此答案中发现任何缺陷。我现在将问题悬而未决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T01:42:06.350

```
def switch_ext(f, new_ext)
  (n = f.rindex('.')) == 0 ?  nil : (f[0..n] + new_ext)
end 
```

`'.'`如果它不是第一个字符，它将找到最正确的出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T00:32:03.607

正则表达式是为这类任务发明的。

```
def switch_ext f, new_ext
  f.sub(/((?<!\A)\.[^.]+)?\Z/, new_ext)
end

puts switch_ext 'test_dir/test_file.jpg', '.txt'
puts switch_ext 'test_dir/test_file.ext1.jpg', '.txt'
puts switch_ext 'testfile', '.txt'
puts switch_ext '.vimrc', '.txt' 
```

输出：

```
test_dir/test_file.txt
test_dir/test_file.ext1.txt
testfile.txt
.vimrc.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T03:08:18.627

```
def switch_ext(filename, ext)
    begin
        filename[/\.\w+$/] = ext
    rescue
        filename << ext
    end
    filename
end 
```

用法

```
>> switch_ext('test_dir/test_file.jpeg', '.txt')
=> "test_dir/test_file.txt"

>> switch_ext('test_dir/no_ext_file', '.txt')
=> "test_dir/no_ext_file.txt" 
```

希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T00:34:41.740

您可以使用正则表达式，也可以使用内置文件名操作工具之类的东西`File`：

```
%w[
  test_dir/test_file.jpg
  test_dir/test_file.ext1.jpg
  test_dir/test_file
].each do |fn|
  puts File.join(
    File.dirname(fn),
    File.basename(fn, File.extname(fn)) + '.txt'
  )
end 
```

哪个输出：

```
test_dir/test_file.txt
test_dir/test_file.ext1.txt
test_dir/test_file.txt 
```

我个人使用这些`File`方法。他们知道不同操作系统对文件名分隔符的需求，因此移植到另一个操作系统是轻而易举的事。在您的用例中，这没什么大不了的。混合路径操作，它变得更加重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T03:12:01.850

```
def switch_ext f, new_ext
  "#{f.sub(/\.[^.]+\z/, "")}.#{new_ext}"
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-17T10:58:13.287

Since Ruby 1.9.1 the easiest answer is [Pathname::sub_ext(replacement)](https://apidock.com/ruby/v2_5_5/Pathname/sub_ext) which strips off the extension and replaces it with the given replacement (which can be an empty string `''`):

```
Pathname.new('test_dir/test_file.jpg').sub_ext('.txt')
=> #<Pathname:test_dir/test_file.txt>

Pathname.new('test_dir/test_file.ext1.jpg').sub_ext('.txt')
=> #<Pathname:test_dir/test_file.ext1.txt>

Pathname.new('test_dir/test_file').sub_ext('.txt')
=> #<Pathname:test_dir/test_file.txt>

Pathname.new('test_dir/test_file.txt').sub_ext('')
=> #<Pathname:test_dir/test_file> 
```

One thing to watch out for is that you need to have a leading `.` in the replacement:

```
Pathname.new('test_dir/test_file.jpg').sub_ext('txt')
=> #<Pathname:test_dir/test_filetxt> 
```

# asp.net - ASP.NET 中的 PDF 自定义 Http 标头

> ID：13389231
> 
> 赞同：0
> 
> 时间：2012-11-14T23:32:23.033
> 
> 标签：asp.net

我正在尝试向 PDF 和 XML 文件添加自定义标题，以将它们隐藏在搜索引擎中。

谷歌是这样为 apache 解释的：

```
<Files ~ "\.pdf$">
  Header set X-Robots-Tag "noindex, nofollow"
</Files> 
```

任何想法如何在 ASP.NET 中实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:44:05.020

在 asp.net mvc 中，您可以使用具有适当重载的 ActionLink

```
 @Html.ActionLink("PDF", "/pdf.pdf", null, new {title = "pdf file", rel="noindex, nofollow") 
```

它会生成类似的代码

```
 <a href="/pdf.pdf" rel="noindex, nofollow" title="pdf file">PDF</a> 
```

# php - 如何更改链接？

> ID：13389236
> 
> 赞同：-3
> 
> 时间：2012-11-14T23:33:13.603
> 
> 标签：php

我有 youtube 链接，例如[http://www.youtube.com/watch?v=Bfp-T29m0BM](http://www.youtube.com/watch?v=Bfp-T29m0BM)

我想做，当我放这个链接时，我想打印；

[http://www.youtube.com/embed/Bfp-T29m0BM](http://www.youtube.com/embed/Bfp-T29m0BM)

如何仅从输入中获取 v 值，例如 $link？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:38:35.280

```
<?php

$url = 'http://www.youtube.com/watch?v=Bfp-T29m0BM';

$uri = parse_url($url);

parse_str($uri['query']);

echo 'http://www.youtube.com/embed/'. $v; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T23:36:44.070

试试这个

```
$link = "http://www.youtube.com/watch?v=Bfp-T29m0BM";
$regex = preg_match("/\?v=([a-ZA-Z0-9-_]*)/", $link, $matches);

var_dump($matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:38:20.777

在 php 手册中阅读有关使用 explode() 的内容。带回一些您测试过的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T23:42:29.390

```
$url = parse_url($youtube_link);
parse_str($url['query'], $query);
echo "$url[scheme]://$url[host]/embed/$query[v]"; 
```

# javascript - 将javascript值传递给html

> ID：13389237
> 
> 赞同：-1
> 
> 时间：2012-11-14T23:33:15.150
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:39:51.983

完成处理后，您可以操作链接的目标`imgIndex`。

```
document.getElementById("yourLinkId").href = "?action=viewcomic&id=" + window.imgIndex; 
```

除此之外，您可以将事件处理程序附加到链接，我在这里将其作为 jQuery 的示例显示：

```
$("#yourLinkId").on("click", function()
{
    $(this).attr("href", "?action=viewcomic&id=" + window.imgIndex);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T23:41:46.457

如果你像这样回`imgIndex`显到`<a>`标签中，你可以这样做：

```
<a href="?action=viewcomic&id=<?php echo $imgid ?>"><img id="prevkey" src="./images/SiteDesign/prev.png" alt="Comic Navigation" /></a> 
```

然后您可以使用以下命令从查询字符串中获取 imgid：

```
<?php $imgid = $_GET["id"] ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T23:43:11.543

您不能在链接中使用 php 变量吗？如果可以，是最好的解决方案。

```
<a href="?action=viewcomic&id=<?php echo $imgid; ?>"><img id="prevkey" src="./images/SiteDesign/prev.png" alt="Comic Navigation"/></a> 
```

# android - Imageview中的旋转图像重叠角落

> ID：13389240
> 
> 赞同：1
> 
> 时间：2012-11-14T23:33:37.023
> 
> 标签：android

我正在使用以下代码

```
<rotate
xmlns:android="http://schemas.android.com/apk/res/android"
android:fromDegrees="0"
android:toDegrees="360"
android:pivotX="50%"
android:pivotY="50%"
android:repeatCount="infinite"
android:duration="36000" /> 
```

和

```
Animation rotate = AnimationUtils.loadAnimation(this, R.anim.rotate);
findViewById(R.id.yourImageId).startAnimation(rotate);
rotate.reset();
rotate.start(); 
```

目的是在 Imageview 中旋转图像。

因为这个图像视图有背景色，这似乎会旋转整个 ImageView 控件，并且它开始与放置在它旁边的文本视图重叠，例如在旋转 45 度后，一个角将与放置在它左侧的视图重叠

我想表明容器没有旋转，而只是图像。

我无法删除背景，这会在我的特定情况下干扰 UI 感觉。

将其放入 Layout 并从此 imageview 中删除背景并旋转是个好主意吗？还是有更聪明的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:18:34.857

您可以重叠 2 个视图（一个仅与背景重叠，另一个与您的图像重叠）并将其设置`Animation`为仅与图像一起旋转视图。

问候。

# login - 错误的密码重定向到错误的页面？

> ID：13389243
> 
> 赞同：0
> 
> 时间：2012-11-14T23:33:48.903
> 
> 标签：login

因此，我使用 php 和 mysql 数据库整理了一个非常粗略的登录表单，并设置（或者我认为）使用“loginFailed=true&reason=password”重定向回登录页面。我正在尝试只是让它重定向回登录，并显示错误的密码消息，但它只是重定向到主索引页面。

我在这里做错了什么？当然，由于我缺乏编码知识，我从一些预先存在的代码中大量借用了代码，但在重定向之前它确实按预期工作了一段时间。

这是代码：

密码检查.php

```
// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$password=$_POST['password']; 

// To protect MySQL injection (more detail about MySQL injection)
$password = stripslashes($password);
$password = mysql_real_escape_string($password);
$sql="SELECT * FROM $tbl_name WHERE password='$password'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("password"); 
header("location:admin.html");
}

else {
die(header("location:login.html?loginFailed=true&reason=password"));
}
?> 
```

这是登录页面中的密码字段：

```
<span class="add-on"><i class="icon-list-alt"></i></span>
<input type="password" id="inputIcon" class="span4" name='password' id='password' maxlength="50" placeholder="<?php $reasons = array("password" => "Yo shitbird, wrong password."); if ($_GET["loginFailed"]) echo $reasons[$_GET["reason"]]; ?>" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:04:17.490

尝试将[`header()`](http://us2.php.net/manual/en/function.header.php)命令移出[`die()`](http://us2.php.net/manual/en/function.die.php)通话：

```
else {
    header("location:login.html?loginFailed=true&reason=password");
    die();
} 
```

这段代码还有很多其他潜在的问题，我建议阅读一些关于这个主题的教程，[那里有很多](http://duckduckgo.com/?q=login+php+tutorial)；尽管要小心，但有许多低质量的 PHP 教程可能会教给您危险的做法。了解有关[PHP 安全性](http://phpsec.org/projects/guide/)的更多信息很重要，特别是如果此代码将位于可公开访问的 Web 服务器上。

问题之一是您以纯文本形式存储密码。密码永远不应该以纯文本形式存储，它们应该被加盐并使用[安全的散列算法](http://www.f-secure.com/weblog/archives/00002095.html)存储。[PHPass](http://www.openwall.com/phpass/)是一个很好的工具来帮助解决这个问题。

# href - 在Java中用撇号提取href值

> ID：13389246
> 
> 赞同：0
> 
> 时间：2012-11-14T23:33:56.600
> 
> 标签：href, jsoup

我是 JSoup 的新用户。我想`href`从 html 中提取值。

例如：

```
 String html = "<p>An <a href='http://exa'mple.com'><b>example</b></a> link.</p>";
 Document doc = Jsoup.parse(html);
 Element link = doc.select("a").first();
 String linkHref = link.attr("href"); 
```

我得到的输出为`"http://exa"`，但我需要输出为`"http://exa'mple.com"`（href 中的原始文本）。`link.outerHtml()`正在提供一些不同的文本。

我无法更改 HTML。HTML 是用户的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:37:49.543

尝试这个：

`String html = "<p>An <a href='http://exa%27mple.com'><b>example</b></a> link.</p>";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:44:59.850

我看不出这是怎么可能的，因为 jsoup 解析器会期望一个 ' 来关闭 href 参数，而这正是它所得到的。我认为你唯一的选择是预先解析用户提供的字符串，但即使这样也很棘手，因为你必须想出一个规则来区分“正确”和“不正确”的引号。

# c# - 在运行时将包装器附加到所有现有的事件处理程序

> ID：13389248
> 
> 赞同：0
> 
> 时间：2012-11-14T23:34:15.493
> 
> 标签：c#, winforms, event-handling

我目前非常需要现有应用程序的日志记录，并且无法将我期望的日志记录级别直接添加到代码中。作为一种解决方法，我很乐意在每次触发事件时完成一定数量的日志记录。

我正在考虑一个解决方案，我可以在运行时解析整个应用程序以使用事件到包装器到处理程序来包装所有事件到处理程序的绑定；并且，理想情况下，也可以在运行时解开它们。在伪代码中，这将是：

```
IDictionary<Event, Action<object, EventArgs>) originalBindings = ...;

public void SetWrapBindings()
{
   var allBindingsToReplace = Assembly.GetAssembly().GETALLEVENTS()
      .Where(eventInfo => eventInfo.GetOtherMethods().Any());

   foreach(var binding in allBindingsToReplace)
   {
     binding.event -= binding.handler;
     binding.event += HandlerWrapper;
     originalBindings.Add(binding.event, binding.handler);
   }

}

public static void HandlerWrapper(object o, EventArgs e)
{
    // Do some logging
    try
    {
       var handler = originalBindings.TryGetValue(/* something */);
       handler.Invoke(o, e);
    }
    // Do more logging
} 
```

在这一堆伪代码中，有很多步骤我无法编写，可能是因为我没有找到正确的 API 用法，但也可能是因为其中的某些操作在理论上是不可能的（在这种情况下我会喜欢知道为什么）。这些是：

*   迭代应用程序的所有事件（这可能很容易）
*   为我的字典识别一个好的键
*   在每一步，从上下文中获取相关信息

当然，将一个额外的处理程序绑定到每个现有事件（执行前/后执行例程而不真正包装处理程序）会有所帮助，但是在 try-catch 中执行真正的处理程序是一件好事。

任何部分答案仍然非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:39:40.410

如果您正在寻找非侵入式系统范围的日志记录，最好使用[PostSharp](http://www.sharpcrafters.com/)等面向方面的编程框架。 [此页面](http://www.sharpcrafters.com/solutions/logging)为您正在寻找的内容提供了一个不错的起点。

**编辑：** 要添加到这一点，看看实现一个`EventInterceptionAspect`如果你真的只是想知道什么时候引发任何事件。同样，PostSharp 博客是一个很好的信息来源，[本文](http://www.sharpcrafters.com/blog/post/PostSharp-Principals-Day-11-e28093-Interception-e28093-Part-3.aspx)展示了这个方面的实现，它执行简单的标准输出日志记录，包括添加、删除和调用。

# r - 如何在R中获取两个日期之间的天数

> ID：13389250
> 
> 赞同：-1
> 
> 时间：2012-11-14T23:34:51.187
> 
> 标签：r, days

我有一个如下数据集：

```
money   date1    date2
"300"  "10/30 " " 11/1" 
"400"  "10/28 " " 10/31"
"360"  "10/28 " " 10/30"
"440"  "10/25 " " 10/28"
"620"  "10/21 " " 10/28" 
```

我想为第一行提取两个日期之间的天数，例如 10/30、10/31 和 11/1。此外，我的代码应该为每个提取的日期分配一个数字。这个数字应该是钱/（天数）。例如，我想获得 10/30,10/31，以及 11/1 和 300/3（即=100），300/3,300/3。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:06:43.747

这将给出该时间段内每天的总数

```
data$date1<-as.Date(paste(data$date1,"/2012"),  "%m/%d/%Y")
data$date2<-as.Date(paste(data$date2,"/2012"),  "%m/%d/%Y")
data$perday<-with(data, money/(date2-date1))
period <- as.Date(min(data$date1):max(data$date2), origin = "1970-01-01")
sum <- sapply(period, function(x) sum(data[x >= data$date1 & x <= data$date2, 'perday']))
sumperday<-as.data.frame(period, sum) 
```

# iphone - 在现有应用程序上推送通知。证书问题

> ID：13389252
> 
> 赞同：2
> 
> 时间：2012-11-14T23:35:02.060
> 
> 标签：iphone, apple-push-notifications

我正在开发一个大型应用程序。在开发过程中，我们决定添加推送通知。我在 Apple Developer Site 中创建了一个新的 App ID。

应用 ID 为：*8NG823UBLP.com.mobiikk.ServicioDeAdministracionTributaria*

为生产和开发启用推送。为两者下载了证书并创建了 .p12。.p12 文件在服务器上，服务器端的一切看起来都很好，但应用程序没有收到推送通知。

该应用程序被授予推送通知，并且它们在设置中设置为 ON。

捆绑包 ID在*info.plist*中更改为*com.mobiikk.ServicioDeAdministracionTributaria*

 *该团队一直在寻找答案，但没有任何运气。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T23:44:17.723

如果您打开现有应用程序的通知，则必须重新创建配置文件（最好从 Xcode 管理器中清除旧配置文件，然后刷新它们或关闭 xcode 并通过 iphone 配置实用程序替换它们 - 确保摆脱旧配置文件配置文件）（您仍然可以保留相同的旧 appID，只需刷新该 AdHoc/Enterprise/AppStore 配置文件 - 它包含有关启用 APNS 的说明）

否则，您的服务器端可能看起来不错，但应用程序永远不会收到注册设备的成功通知，也无法将令牌传递到您的服务器端，但您会收到失败通知，警告您设备控制台日志中的权利错误和缺少 APNS 配置文件

由于您没有在应用程序方面说明您在做什么，因此很难确切地说出您的问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T23:33:37.987

以防万一有人遇到同样的问题。解决这个问题的唯一方法是创建一个全新的项目。我将旧文件中的每个文件都复制到了新文件中。给它一个新的 Bundle ID，创建一个新的配置文件，新的 App ID，并下载新的证书。所以总而言之，没有简单的方法可以将现有项目转移到接受推送通知的项目。*

# php - 如何减少 VPS 内存使用量

> ID：13389254
> 
> 赞同：0
> 
> 时间：2012-11-14T23:35:10.607
> 
> 标签：php, apache, vps

我的 VPS 有问题。

我们正在使用 VPS 来运行我们的 CMS 和我们的网站，目前我们有 300MB 的内存限制，现在我们即将达到限制。

为了保持低成本（我知道，增加内存并不是很贵），但如果我找到一个优化我们所拥有的解决方案，会更好。

我能做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:04:32.420

我建议增加内存 - 更多内存，更快的网站 :-) 但是如果速度不重要，减少所有缓存大小，将 php memory_limit 设置为 8M，禁用操作码缓存（APC，eAccelerator）或尝试将 Raspberry Pi 作为服务器，现在来了512MB :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-12T09:59:13.587

我有一个 256MB 的小型 vps，它使用 apache + php + mariadb (mysqld)

我发现对于一个简单的 wordpress 页面，每次请求 20MB 时，apache 都会吞噬内存。它会安定下来，但随着时间的推移会吞噬交换空间并让一切变得缓慢。我怀疑有办法微调 mpm_event 和 mpm_worker 以停止进入交换，但我不知道如何。

在如此紧凑的环境中工作时，重要的是要知道什么正在使用什么内存并减少所有内容，以便最大限度地减少交换。

下面是我所做的总结，我设法获得了 100MB 的物理空间用于调整，这不是一个负载很重的服务器，但需要可访问（并且便宜）：

*   使用 slackware（操作系统和默认服务似乎比 debian 使用更少的内存，也许我的提供程序图像上默认加载的更少）
*   关闭 mysqld innodb 表并使用 myisam
*   如果相关，配置 mysqld 以减少缓存大小
*   安装 cms 新鲜，所以他们肯定在使用 myisam 或更改所有表

*   在 apache 中选择使用 mod_mpm_prefork 而不是 mpm_event 和 mpm_worker （“apachectl -V”会告诉你正在使用哪个）

*   为 maxserver 设置合理的值（从服务器和请求数量的低值开始，然后进行处理）

*   在通过 ssh 执行“免费观看”或“顶部”时测试负载下的服务器

*   随着负载的增加，您应该能够看到内存和正在创建和销毁的进程
*   调整您的 httpd 服务器设置并重新测试直到满意

*   我希望看到最大内存不超过 90%，并在负载消失时减少内存，然后我确信它会保持不变而不会停止（开始使用交换）。

*   检查您的 php.ini 内存设置，如另一个答案中所述。

*   我还设置了一个 cron 作业，以便在交换开始大量使用时向我发送电子邮件，因此如果我找不到使用内存的内容，我可以重新启动某些东西甚至重新启动整个服务器，这种情况应该越来越少发生更多你微调。

如前所述，这不是一个在重负载下表现良好的环境，但成本对您来说可能更重要。

就我的两便士值...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T18:59:20.450

我会像推荐的 Concerto49 一样查看 Nginx，如果您只有一个网站，也可以考虑 Litespeed (www.litespeedtech.com)，他们有一个免费版本，可能足以为您的网站提供动力。

如果它是基于 PHP 的，那么去掉所有你不使用的东西。使用 APC/XCache 处理每个请求。Nginx 也有一个缓存模块，它可以帮助你避免在每个请求仍然新鲜的情况下点击 PHP。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T01:43:15.880

它是什么类型的 VPS？OpenVZ？冼？虚拟机？如果是 OpenVZ，它有 VSwap 或 Burst 内存吗？

您正在运行什么类型的 CMS / 网站？它是基于 PHP 的吗？你在用阿帕奇吗？如果是这样，您是否尝试过 nginx？我会考虑优化 Web 服务器组件并删除未使用的进程/应用程序以减少内存并提高性能。

# jakarta-ee - 是否可以在不停止或暂停服务器的情况下备份 GlassFish 服务器 2.1.1 域？

> ID：13389259
> 
> 赞同：1
> 
> 时间：2012-11-14T23:35:51.187
> 
> 标签：jakarta-ee, glassfish, backup, jcaps

我们正在使用带有内置 GlassFish 2.1.1 应用服务器的 JCAPS 6.3，我们想创建默认域 (C:\JavaCAPS63\appserver\domains\domain1) 的复制。

是否可以通过将“domain1”文件夹中的所有内容复制并粘贴到另一台服务器的文件夹中来执行备份？

我们真的不想停止/暂停当前服务器。

非常感谢，如果有人会帮助。

# c# - 如何确定是什么阻止了应用程序运行非提升（非管理员）

> ID：13389260
> 
> 赞同：0
> 
> 时间：2012-11-14T23:35:51.933
> 
> 标签：c#, permissions, uac, administrator, elevated-privileges

有没有办法检测是什么阻止了应用程序在非提升状态下运行？当我们以提升的权限运行我们的应用程序时，它的运行没有任何问题。在非提升状态下运行会阻止应用程序启动。

是否有任何技巧来检测可能阻止应用程序运行非提升的原因？

我们的应用程序不会将数据写入受保护的文件夹，即程序文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:58:26.240

您可以在 Windows 事件查看器中查看它引发的异常（不是最有效的方法），或者使用显示或记录异常信息的异常处理程序包装整个程序（如果您能够编辑和构建，这是一种更好的方法该项目）。一旦出现异常，查找权限不足的操作应该不会太麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:55:07.050

您应该将错误记录到文件（或控制台，或任何您喜欢的东西），以查看导致问题的指令。您也可以在调试中检测到错误，但对于此 VS 不得以管理员身份运行。

无论如何，最常见的原因是您试图写入一个只有提升权限才能写入的目录（例如 Program Files、Windows...），或者 HKEY_CURRENT_USER 以外的任何配置单元中的注册表项。

# python - 模式匹配 Twitter Streaming API

> ID：13389267
> 
> 赞同：0
> 
> 时间：2012-11-14T23:36:31.327
> 
> 标签：python, regex, twitter, tweepy

我正在尝试将 Streaming API 中的某些值插入到字典中。其中之一是在使用 track=keyword 的过滤方法中使用的术语的值。我已经编写了一些代码，但在打印语句中我收到“遇到异常：'term'”错误。这是我的部分代码：

```
 for term in setTerms:
     a = re.compile(term, re.IGNORECASE)
     if re.search(a, status.text):
         message['term'] = term
     else:
         pass

      print message['text'], message['term'] 
```

这是过滤器代码：

```
setTerms = ['BBC','XFactor','Obama']
streamer.filter(track = setTerms) 
```

它匹配字符串，但我还需要能够匹配所有实例，例如。BBC 还应与#BBC、@BBC 或 BBC1 等匹配。

所以我的问题是，如果 re.search(term, status.text)，我将如何在 setTerms 例如 BBC 中获得一个术语来匹配所有这些实例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:41:24.120

您是否尝试过将所有搜索词放在一个表达式中？

即 setTerms = '(BBC)|(XFactor)|(Obama)'，然后查看它是否匹配整个字符串（不仅仅是单个单词？

# c++ - 将内存分配给结构向量的指针时出现 SEG FAULT

> ID：13389268
> 
> 赞同：1
> 
> 时间：2012-11-14T23:36:33.870
> 
> 标签：c++, vector, segmentation-fault, std

```
struct LeafDataEntry   
{
    void *key;
    int a;
};

int main(){

    //I want to declare a vector of structure
    vector<LeafDataEntry> leaves;

    for(int i=0; i<100; i++){
       leaves[i].key = (void *)malloc(sizeof(unsigned));
       //assign some value to leaves[i].key using memcpy
    }

} 
```

在上面的 for 循环中执行 malloc 时，我收到此代码的 SEG FAULT 错误....有关将内存分配给结构向量中的指针的任何替代方法的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T23:39:37.857

这是因为您试图分配给一个还没有元素的向量。改为这样做：

```
for(int i=0; i<100; i++){
    LeafDataEntry temp;
    leaves.push_back(temp); 
    leaves[i].key = (void *)malloc(sizeof(unsigned));
    //assign some value to leaves[i].key using memcpy
 } 
```

这样，您将访问实际内存。

在评论中，OP 提到数组中的元素数量将在运行时决定。您可以设置`i < someVar`哪些将允许您`someVar`在运行时决定列表的大小。

另一个答案

```
leaves.resize(someVar) //before the loop 
```

不过，这可能是一种更好的方法，因为它可能会更有效率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T23:40:27.427

您正在索引一个空向量。尝试使用

```
leaves.resize(100); 
```

循环之前。

# caching - 如何在 Jekyll 静态站点生成器中使用 version.rb 插件

> ID：13389269
> 
> 赞同：0
> 
> 时间：2012-11-14T23:36:40.247
> 
> 标签：caching, plugins, jekyll, liquid

这是插件代码...

```
module Jekyll
  module VersionFilter
    def versioned_url(input)
      "#{input}?#{Time.now.to_i}"
    end
  end
end

Liquid::Template.register_filter(Jekyll::VersionFilter) 
```

我正在尝试缓存我的 .css 文件的失败/版本控制。我是液体新手。我无法弄清楚这个基本插件。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:06:59.353

您需要将 version.rb 放入 Jekyll 站点根目录下的 _plugins/ 目录中。如果您没有 _plugins/ 目录，请创建一个。

对于使用 - 它看起来提供了一个可以应用于文本的新过滤器 - 因此您可以在模板中使用它来过滤对 CSS 文件的引用，添加查询字符串以便它们不会被缓存 - 但我'确定无论您从哪里获得代码，都会有更多信息。

对于它的价值，使用查询字符串打破缓存并不是最好的解决方案。最好编写一个插件，在实际文件名中添加一个新字符串，然后将该字符串添加到模板中包含这些资产的 url 中——但这有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:58:46.203

如果您可以选择使用现有插件进行静态资产版本控制，请尝试[jekyll-minibundle](https://github.com/tkareine/jekyll-minibundle)。

假设您保留未标记的 CSS 文件`_styles`（注意 _，因为您不希望将这些文件导出到生产站点）并希望标记的 CSS 文件出现在 中`css`，请执行以下操作：

```
<link href="{% ministamp _styles/site.css css/site.css %}" rel="stylesheet" media="screen, projection"> 
```

与指南针结合使用效果很好，只需将指南针导出到`_styles`.

# security - 错误日志中此错误消息的含义是什么？

> ID：13389270
> 
> 赞同：3
> 
> 时间：2012-11-14T23:36:40.873
> 
> 标签：security, cpanel, error-log

在我的共享主机帐户中，我注意到主错误日志下的 CPanel 错误日志中有以下错误。

我需要知道这个错误的危险是什么，我们在哪里看到了*受害者*和*攻击者*这两个词？这是什么意思？

> [2012 年 11 月 14 日星期三 16:26:28] [错误] [客户端 xx.163.xxx.xxx] 抓到了种族条件滥用者。攻击者：2194，受害者：0 打开文件所有者：0，引用者：[http ://www.orleansren.com/cgi-sys/suspendedpage.cgi](http://www.orleansren.com/cgi-sys/suspendedpage.cgi)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T05:32:11.573

可能是这样的：http: [//www.mail-archive.com/dev@httpd.apache.org/msg55666.html](http://www.mail-archive.com/dev@httpd.apache.org/msg55666.html)，但除非您是列出的网站：[http://www.orleansren，否则可能不是问题。 com/](http://www.orleansren.com/) . 有人有机会在访问符号链接时更改它。您看到此消息意味着它已被修补。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-20T12:46:41.203

错误的权限或所有权也可能触发此错误。我已经通过更改我的应用程序目录的所有权来解决它。它以前由root拥有。

通过以下方式检查文件所有权

`ls -la filename`

如果它不属于您的用户，请以超级用户身份登录并更改所有权。

`chown myuser:myuser filename`

# python - 从 Python 脚本调用类

> ID：13389274
> 
> 赞同：1
> 
> 时间：2012-11-14T23:36:54.487
> 
> 标签：python

您将如何从另一个 Python 脚本调用下面的 MLStripper 类？

**主要 Python 脚本：**

```
 import ConfigParser
    import os
    from HTMLParser import HTMLParser

    c = imaplib_connect.open_connection()
    try:
        config = ConfigParser.ConfigParser()
        config.read([os.path.expanduser('~/reader.config')])
        test = MLStripper.strip_tags("<br>testing</br>")
        print test 
```

**我想打电话的班级：**

```
 class MLStripper(HTMLParser):
            def __init__(self):
                 self.reset()
                 self.fed = []
            def handle_data(self, d):
                 self.fed.append(d)
            def get_data(self):
                 return ''.join(self.fed)

            def strip_tags(html):
                 s = MLStripper()
                 s.feed(html)
                 return s.get_data() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:38:39.600

该类需要首先被实例化：

```
import ConfigParser
import os
from HTMLParser import HTMLParser

c = imaplib_connect.open_connection()
try:
    config = ConfigParser.ConfigParser()
    config.read([os.path.expanduser('~/reader.config')])
    ML = MLStripper()
    test = ML.strip_tags("<br>testing</br>")
    print test 
```

# php - iPhone：使用唯一标识符将数据从 iPhone 发送到 mySQL

> ID：13389276
> 
> 赞同：0
> 
> 时间：2012-11-14T23:37:02.350
> 
> 标签：php, iphone, mysql, ios, uniqueidentifier

我有一个 iPhone 应用程序需要向 mySQL 服务器发送数据（这是一个投票）。但是用户每天只能投票一次，每个用户只能投票一次。我通过向 PHP 脚本发送 HTTP 请求连接到 mySQL 服务器。

我需要的是用户正在使用的 iPhone 的某种唯一标识符。我认为如果用户使用两部 iPhone 投票两次是可以的，所以这不是一个大问题：标识符的目的是识别每部 iPhone。

我怎样才能得到这个？我会使用 [[UIDevice currentDevice] uniqueIdentifier] 但我读过它现在已弃用。我读过一个开源库，但它似乎有隐私泄露。

你们能想出任何方法来做到这一点，无论是通过 XCode 还是通过 PHP？我只会将 hasVoted BOOL 保留在应用程序中，但随后用户可以将其卸载并重置...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:58:39.110

您可以使用它`CFUUIDCreate`来制作一个随机的、唯一的 ID。然后保存身份证。不要使用 `NSUserDefaults`，因为如果用户重新安装应用程序，它会被删除。我会把它保存在钥匙串中。这不会被删除，除非 iPhone 被擦除，并且用户不能修改钥匙串。

# jaxb - 编组 JUnit 测试时如何强制 JAXBException

> ID：13389277
> 
> 赞同：8
> 
> 时间：2012-11-14T23:37:04.473
> 
> 标签：jaxb

在编组 JUnit 测试时，我无法找到强制 JAXBException 的方法。有没有人有任何想法？

这是我的编组代码：

```
 public String toXml() {
          log.debug("Entered toXml method");
    String result = null;
    try {
        JAXBContext jaxbContext = JAXBContext.newInstance(Config.class);
        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        StringWriter writer = new StringWriter();
        jaxbMarshaller.marshal(this, writer);
        result = writer.toString();
    } catch (JAXBException e) {
          log.error(e);
    }
          log.debug("Exiting toXml method");
    return result;
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:39:21.177

`JAXBException`在操作期间有多种创建方法`marshal`：

**1 - 封送一个无效的对象**

您可以`JAXBException`在编组操作期间通过编组`JAXBContext`不知道的类的实例来生成 a（即以您的示例并使用它来编组 的实例`Foo`）。这将产生以下异常。

```
Exception in thread "main" javax.xml.bind.JAXBException: class forum13389277.Foo nor any of its super class is known to this context.
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:594)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:482)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:315)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:244)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:95)
    at forum13272288.Demo.main(Demo.java:27) 
```

**2 - 封送无效输出**

如果您尝试编组到无效输出，例如`OutputStream`已关闭的输出：

```
 FileOutputStream closedStream = new FileOutputStream("src/foo.xml");
    closedStream.close();
    jaxbMarshaller.marshal(this, closedStream); 
```

然后你会得到一个`MarshalException`它是一个子类`JAXBException`。

```
Exception in thread "main" javax.xml.bind.MarshalException
 - with linked exception:
[java.io.IOException: Stream Closed]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:320)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:244)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:95)
    at forum13272288.Demo.main(Demo.java:27)
Caused by: java.io.IOException: Stream Closed
    at java.io.FileOutputStream.writeBytes(Native Method)
    at java.io.FileOutputStream.write(FileOutputStream.java:318)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.flushBuffer(UTF8XmlOutput.java:413)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.endDocument(UTF8XmlOutput.java:137)
    at com.sun.xml.bind.v2.runtime.output.IndentingUTF8XmlOutput.endDocument(IndentingUTF8XmlOutput.java:165)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.endDocument(XMLSerializer.java:852)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.postwrite(MarshallerImpl.java:369)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:316)
    ... 3 more 
```

# jpa - 触发器更新后如何将实体 Bean 与数据库同步

> ID：13389279
> 
> 赞同：0
> 
> 时间：2012-11-14T23:37:25.000
> 
> 标签：jpa, ejb, glassfish-3, ejb-3.1, jta

PostgreSQL 9.1
Glassfish 3.1.2.2
火狐 10.0.0.7
Linux

我正在使用 JPA 在 PostgreSQL 中持久化实体。但是，有一个由触发器填充的表（名为 Position），我使用该表的一个实体作为只读的。实体从不将数据持久保存到此表中，因为它是从触发器加载和操作的。我可以将数据加载到我的托管 bean 并查看 Position 表数据。

我遇到的问题是，一旦触发器修改了数据库（位置表），当再次查询位置表时，值仍然相同。Position 实体仍然包含旧值并且没有重新加载。

这是处理 Position 实体的 bean。我添加了 em.flush() 没有帮助，并且不确定如何以这种方式使用 em.refresh() 。实际上，无论如何，同步将如何提供帮助，因为它不知道我想在没有查询的情况下同步到什么。

非常感谢任何帮助。

EJB...

```
@Stateless
public class PositionBean implements IPosition {
    @PersistenceContext(unitName="positionbean-pu")
    private EntityManager em;

    public Position getPositionById(Integer posId) {
        Position pos = null;

        try {
            pos = (Position) em.createNamedQuery("findPosition")
                .setParameter("posId", posId).getSingleResult();
        }
        catch (Exception e) {
            throw new EJBException(e.getMessage());
        }

        return pos;
   } 
```

实体 bean ...

```
@Entity
@SequenceGenerator(name="posIdGen", initialValue=10000,
    sequenceName="pos_seq", allocationSize=1)
@NamedQuery(name="findPosition",
    query="SELECT p FROM Position p WHERE p.posId = :posId")
@Table(name="Position")
public class Position implements Serializable {
    // ... 
```

持久性.xml

```
<persistence-unit name="positionbean-pu" transaction-type="JTA">
    <jta-data-source>jdbc/postgreSQLPool</jta-data-source>
</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:17:10.603

万一有人遇到这种情况，我学会了如何使用 refresh() 并解决了我的问题。

```
 pos = (Position) em.createNamedQuery("findPosition")
            .setParameter("posId", posId).getSingleResult();

        em.refresh(pos); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-02T18:12:51.823

在我看来，创建“外部”更新的只读实体的正确方法如下：

1.  [如this answer](https://stackoverflow.com/a/43256648/5223047)`@Access`中所述，通过将注释设置为`AccessType.FIELD`（或删除注释，因为它是默认访问类型），对实体类使用基于字段的注释。[还建议仅按照此答案](https://stackoverflow.com/a/5115599/5223047)中的说明提出公共吸气剂。这可以防止实体在应用程序中被修改。
2.  在文件中启用选择性共享缓存模式`persistence.xml`并将注释添加`@Cacheable(false)`到实体类中，如[本答案](https://stackoverflow.com/a/3664293/5223047)中所述。这会强制 JPA 在您调用时始终从持久层加载实体`EntityManager#find(...)`。

# java - JSP中的ArrayList方法

> ID：13389280
> 
> 赞同：0
> 
> 时间：2012-11-14T23:37:29.873
> 
> 标签：java, jsp

我尝试在 JSP 中创建 arrayList 方法，如下所示：

```
 <%!
       public int x = 0;
       public ArrayList array = new ArrayList();
       array.add(new ArrayList());
       public ArrayList cidTime (int cid, int w)
       {
            ((ArrayList)array.get(x)).add(cid);
            ((ArrayList)array.get(x)).add(w);
            x++;
            return array;
       }
      %> 
```

但它返回错误：

```
 Syntax error on token(s), misplaced construct(s) 
                    Syntax error on token "add", = expected after this token 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-15T18:34:58.773

您正在使用 JSP 声明标记`<%!`。根据[此处](http://www.javatpoint.com/jsp-declaration-tag)的信息，它将**声明和方法**`service`放置在 JSP 页面的方法主体之外。这意味着您的调用`array.add(new ArrayList());`导致了问题，因为它不是变量声明或方法声明。

# wpf - 从 XAML 指向 View 中的 ModelView

> ID：13389281
> 
> 赞同：1
> 
> 时间：2012-11-14T23:37:30.623
> 
> 标签：wpf, xaml, mvvm

在以下代码中，我收到错误：

**无法创建“MainViewModels”的实例**......而且，DataContext 总是用红线标记。任何帮助表示赞赏。

```
<Window x:Class="SimpleMvvmUsingWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SimpleMvvmUsingWPF"
        Title="MainWindow" Height="350" Width="525"
        >

    <Window.Resources>
        <local:MainViewModels x:Key="MainViewModels" />
    </Window.Resources>

    <Grid DataContext="{StaticResource MainViewModel}" >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="First Name:" Margin="5"></TextBlock>
            <TextBox Grid.Column="1" Margin="5" Width="100" Text="{Binding ModelPerson.FirstName, Mode=TwoWay, ValidatesOnDataErrors=True}"></TextBox>
        </StackPanel>
        <StackPanel Orientation="Horizontal" Grid.Row="1">
            <TextBlock  Text="Last Name:" Margin="5"></TextBlock>
            <TextBox Grid.Column="1" Margin="5" Width="100" Text="{Binding ModelPerson.LastName}"></TextBox>
        </StackPanel>
        <StackPanel Orientation="Horizontal" Grid.Row="2">
            <TextBlock  Text="Update Date:" Margin="5"></TextBlock>
            <TextBox Grid.Column="1" Margin="5" Width="100" Text="{Binding ModelPerson.UpdatedDate}"></TextBox>
        </StackPanel>
        <Button  Grid.Column="2" Grid.Row="3" Width="100"/>

    </Grid>

</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:21:41.647

问题是由于在*`INotifyPropertyChanged`*接口实现中使用了错误的参数。我向方法传递了错误的参数*`OnPropertyChanged()`*。

# mybatis - 在 mybatis 中嵌套 hashmap 作为结果

> ID：13389282
> 
> 赞同：1
> 
> 时间：2012-11-14T23:37:37.157
> 
> 标签：mybatis, nested-sets

我有一个要求 im Mybatis 3，将包含连接的选择查询的结果转换为嵌套的哈希图结果。

例如，考虑以下 mybatis 映射器条目：

```
 <select
        id="testCaseSelect"
        fetchSize="1000"
        flushCache="false"
        resultMap="testCaseResultMap" resultType="list">
SELECT TESTCASE_ID,
        TC.TITLE,
        TC.DESCRIPTION ,
        TC.CREATION_DATE ,
        TCS.STATUS_NAME,
        TCP.PRIORITY_NAME ,
        TCCBY.FIRST_NAME,
        TCCBY.LAST_NAME,
        TCST.SEQUENCE_NO ,
        TCST.DESCRIPTION ,
        TCST.EXPECTED_RESULT ,
        TCCMNTS.COMMENT_TEXT ,
        TCCMNTS.LOGGING_DATE
      FROM TESTCASE TC
      INNER JOIN TESTCASE_STATUS TCS
      ON TC.STATUS_ID=TCS.STATUS_ID
      INNER JOIN TESTCASE_PRIORITY TCP
      ON TC.PRIORITY_ID=TCP.PRIORITY_ID
      INNER JOIN USERS TCCBY
      ON TC.CREATED_BY=TCCBY.USER_ID
      LEFT JOIN TESTCASE_STEPS TCST
      ON TC.TESTCASE_ID=TCST.TESTCASE_ID
      LEFT JOIN TESTCASE_COMMENTS TCCMNTS
      ON TC.TESTCASE_ID=TCCMNTS.TESTCASE_ID WHERE TESTCASE_ID BETWEEN 326780 AND 326800
</select>
<resultMap
        id="testCaseResultMap"
        autoMapping="true"
        type="hashMap" >
        <result
            column="TESTCASE_ID"
            property="tcId" />
        <result
            column="TITLE"
            property="title" />
        <result
            column="DESCRIPTION"
            property="description" />
        <result
            column="CREATION_DATE"
            property="createdOn" />
        <association
            columnPrefix="TCS"
            javaType="hashMap"
            property="testCaseStatus" >
            <id
                column="STATUS_ID"
                property="id" />
            <result
                column="STATUS_NAME"
                property="status" />
        </association>
        <association
            columnPrefix="TCP"
            javaType="hashMap"
            property="testCasePriority" >
            <id
                column="PRIORITY_ID"
                property="id" />
            <result
                column="PRIORITY_NAME"
                property="priority" />
        </association>
        <association
            columnPrefix="TCCBY"
            javaType="hashMap"
            property="testCaseCreator" >
            <id
                column="USER_ID"
                property="id" />
            <result
                column="FIRST_NAME"
                property="firstName" />
            <result
                column="LAST_NAME"
                property="lastName" />
        </association>
        <collection
            columnPrefix="TCST"
            javaType="hashMap"
            ofType="list"
            property="testCaseSteps" >
            <id
                column="STEP_ID"
                property="id" />
            <result
                column="SEQUENCE_NO"
                property="stepNo" />
            <result
                column="description"
                property="step" />
            <result
                column="expected_result"
                property="result" />
        </collection>
        <collection
            columnPrefix="TCCMNTS"
            javaType="hashMap"
            ofType="list"
            property="testCaseComments" >
            <id
                column="COMMENT_ID"
                property="id" />
            <result
                column="COMMENT_TEXT"
                property="comment" />
            <result
                column="LOGGING_DATE"
                property="commentedOn" />
        </collection>
    </resultMap> 
```

测试用例对象有一个优先级对象，由对象、状态对象、步骤集合和注释集合创建。

```
 public static void main(String[] args)
    {
        SqlSessionFactory factory = getSqlSessionFactory();
        SqlSession session = factory.openSession();
        List<Map> list = session.selectList("testCaseSelect");
        System.out.print(Arrays.toString(list.toArray()));
    } 
```

当我运行上面的代码时，我得到一个包含 34 个哈希映射的列表，每个返回的行都有一个。每个 hashmap 包含 column_name 及其值作为键值对。

我想要的是有一个具有以下结构的哈希映射：

```
root(hashMap)=>{
           tcid(String),
           title(String),
           description(String),
           createdOn(String),
           testCaseStatus(hashMap)=>{
                                        status(String)
                                    },
           testCasePriority(hashMap)=>{
                                         priority(String)
                                      },
           testCaseCreator(hashMap)=>{
                                         firstName(String),
                                         lastName(String)
                                     },
           testCaseSteps(list of hashMap):[{
                                                stepno(String),
                                                step(String),
                                                result(String),
                                          }],

           testCaseComments(list of hashMap):[{
                                                comment(String),
                                                commentedOn(String)
                                           }],
        } 
```

在mybatis中可以实现吗？

# php - PHP 报告错误的 MIME 类型

> ID：13389288
> 
> 赞同：0
> 
> 时间：2012-11-14T23:38:04.827
> 
> 标签：php, mime-types, mime

我正在设计一个简单的 PHP 脚本来允许上传 *.cpp 源文件。作为一项基本的安全措施，我会在将临时文件移动到永久位置之前检查其 MIME 类型。当我`file --mime myfile.cpp`在终端（在 Mac OS X 上）运行时，它显示为`text/x-c`. `application/octet-stream`然而，出于某种原因，服务器将其视为一个。在`/etc/mime.types`“cpp”扩展名下`text/x-c++src`，我相信这是 Mac 上 MIME 类型的问题。

我已经从 Ubuntu 尝试了相同的程序，它工作正常（它显示为`text/x-c++src`）。我在两台计算机上都使用 Chrome。

这本身并不完全是一个编程问题，但可能有一些我不熟悉的 PHP 技巧。

```
$temp_file=$_FILES["file"]["type"];
if(($temp_file!="text/x-c++src")||($temp_file!="text/x-c")) {
    echo "<p style=\"color:red;font-style:italic\">Please upload a valid C++ file.</p>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:49:21.727

`$_FILES['userfile']['type']`包含浏览器发送的 mime 类型（在上传期间）。你可以使用它，但你不能相信它。

尝试使用以下方法获取 mime 类型`$_FILES['userfile']['tmp_name']`：

```
$mime = mime_content_type($tmp_name);
// or, as this is deprecated:
$info = new finfo(FILEINFO_MIME_TYPE);
$mime = $info->file($tmp_name); 
```

或者，您可以通过`strrchr($_FILES['userfile']['name'], '.')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:49:07.403

服务器会看到上传它的浏览器所说的任何类型。

浏览器通常不太擅长确定文件类型，恶意上传者总是可以覆盖它。

你不能相信 mime 类型。如果您想合理可靠地知道它是什么类型的文件，则必须使用诸如`file`嗅探数据之类的实用程序。

# php - 使用php将数据连接并插入到mysql表中

> ID：13389291
> 
> 赞同：3
> 
> 时间：2012-11-14T23:38:11.223
> 
> 标签：php

我是一个 PHP 新手，现在一直在尝试使用 PHP 连接到 MySQL 数据库，这样我就可以将数据插入到我创建的表中，但我无法做到这一点。

我怀疑问题出在我的 PHP`.ini`文件中，但这只是我。
如果有人能帮我配置我的 PHP`.ini`文件，我将不胜感激，这样我就可以连接到 MySQL 并将数据插入我的表中。如果您想知道，这是我的 PHP 脚本。
任何帮助将不胜感激。

```
<?php

$host ="localhost";
$username = "username";
$password = "password";
$database = "database1";
$table ="users";
$con = mysql_connect("localhost","username","password");

if (!$con)
{
die('Could not connect:'.mysql_error());
}
mysql_select_db("database1",$con);

$mysql = "INSERT INTO $table(name,email,password)
VALUES('$_POST[name]','$_POST[email]','$_POST[password]";

if(mysql_query($mysql)) die(mysql_error()); 
echo"Data inserted";
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:53:20.143

我修改了你的一些代码，这应该可以工作。你有一堆小错误。我建议你阅读一些关于连接和 php 语法的教程。

以下是连接到数据库的一些非常基本的示例：http: [//www.w3schools.com/php/php_mysql_connect.asp](http://www.w3schools.com/php/php_mysql_connect.asp)

此外，一旦您掌握了窍门，这里有一个非常好的教程，可以教您为数据库创建类的 OOP 方法：http: [//net.tutsplus.com/tutorials/php/real-world-oop-with- php 和 mysql/](http://net.tutsplus.com/tutorials/php/real-world-oop-with-php-and-mysql/)

据我所知，这不是ini问题。我希望这有帮助。

```
<?php
//Set your variables
$host = "127.0.0.1";
$username = "username";
$password = "password";
$database = "database1";
$table = "users";

//Make your connection to database
$con = mysql_connect($host,$username,$password);

//Check your connection
if (!$con) {
die("Could not connect: " . mysql_error());
}

//Select your database
$db_selected = mysql_select_db($database, $con);

//Check to make sure the database is there
if (!$db_selected) {
    die ('Can\'t use the db : ' . mysql_error());
}

//Run query
$result = mysql_query("INSERT INTO $table(name,email,password) VALUES('$_POST[name]','$_POST[email]','$_POST[password]'");

//Check Query
if (!$result) {
die("lid query: " . mysql_error());
}
echo "Data inserted";

mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:41:02.600

首先，你为什么`<br/>`在你的 PHP 语句中有？删除所有这些。此外，您必须使用 PDO 或 mysqli_ 而不是 mysql_ 库，不推荐使用 mysql_ 。

# ruby-on-rails - 查找注释代码的工具/宝石

> ID：13389304
> 
> 赞同：6
> 
> 时间：2012-11-14T23:39:14.700
> 
> 标签：ruby-on-rails, ruby

在我们与多个开发人员和样式的项目过程中，我们有一些测试和代码被注释掉了。有没有一种简单的方法可以找到所有被注释掉的代码？

该工具应该足够聪明，可以发现被注释的是 ruby​​ 代码，而不是真正的注释。

在这一点上我只能想到 grep 之类的`grep #`，但它应该更聪明，更少手动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:54:58.567

看来您需要一种`looks_like_ruby`方法才能执行此操作：

```
puts line if line =~ /^\s+#/ && looks_like_ruby(line) 
```

一个快速而肮脏的实现（在我的脑海中）

```
def looks_like_ruby(text)
  text =~ Regexp.union((Kernel.methods + Object.methods).uniq.map(&:to_s))
end 
```

不完美，但比 grepping for`#`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:49:24.113

这可能很难看，但我认为您可以使用 rake 任务检查每个“.rb”文件，每行一行，将其与正则表达式匹配（类似于 /#.*\n/），并`eval("matching_string")`在每个匹配项上运行一个。如果注释不是 ruby​​ 代码，它只会失败。

# android - Android SDK 示例中的这段代码会导致父 Activity 的内存泄漏吗？

> ID：13389306
> 
> 赞同：0
> 
> 时间：2012-11-14T23:39:28.370
> 
> 标签：android

因此，通过阅读/研究有关内存泄漏的信息，建议将所有内部类设为静态以避免内存泄漏。但是，通过查看 SDK 示例（特别是 TicTacToeLib），他们在不使用静态内部类的情况下实现了回调。这会导致内存泄漏吗？如果不是，为什么？

```
private Handler mHandler = new Handler(new MyHandlerCallback());

private class MyHandlerCallback implements Callback {
        public boolean handleMessage(Message msg) {
            if (msg.what == MSG_COMPUTER_TURN) {

                // Pick a non-used cell at random. That's about all the AI you need for this game.
                State[] data = mGameView.getData();
                int used = 0;
                while (used != 0x1F) {
                    int index = mRnd.nextInt(9);
                    if (((used >> index) & 1) == 0) {
                        used |= 1 << index;
                        if (data[index] == State.EMPTY) {
                            mGameView.setCell(index, mGameView.getCurrentPlayer());
                            break;
                        }
                    }
                }

                finishTurn();
                return true;
            }
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:24:37.957

是的，如果此示例将 a 保留`Message`在队列中，则会导致泄漏。但这不是一个非常严重的泄漏，因为它通常仅限于相当短的时间。

但是有一种相当简单的方法可以防止泄漏：

将以下两个类放入您的项目中

```
/** Callback that decouples the wrapped Callback via WeakReference */
public class SafeCallback implements Handler.Callback {
    private final WeakReference<Handler.Callback> mCallback;
    public SafeCallback(Handler.Callback callback) {
        mCallback = new WeakReference<Handler.Callback>(callback);
    }
    @Override
    public boolean handleMessage(Message msg) {
        Handler.Callback callback = mCallback.get();
        if (callback != null)
            return callback.handleMessage(msg);
        // else warn, return true, ..?
        return false;
    }
} 
```

* * *

```
/** replacement for anonymous inner Handler implementations */
public abstract class SafeHandler implements Handler.Callback {
    @Override
    public abstract boolean handleMessage(Message msg);

    public final Handler get() {
        return new Handler(new SafeCallback(this));
    }
    public final Handler get(Looper looper) {
        return new Handler(looper, new SafeCallback(this));
    }
} 
```

现在您几乎可以像以前一样使用`Handler`/`Callback`了，但它不再泄漏。

所以要么喜欢

```
public class TestActivity extends Activity {
    private Handler mHandler;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mHandler = new SafeHandler() { // << instead of new Handler() {
            @Override
            public boolean handleMessage(Message msg) {
                // handle message
                return false;
            }
        }.get(); // << Notice this added .get()
    }
} 
```

或喜欢

```
public class TestActivity2 extends Activity implements Handler.Callback {

    private Handler mHandler;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mHandler = new Handler(new SafeCallback(this)); // << wrapped in SafeCallback
    }

    @Override
    public boolean handleMessage(Message msg) {
        // handle message
        return false;
    }
} 
```

* * *

泄漏问题`Handler`是每个`Message`/ `Runnable`（实际上被包裹在 a 中`Message`）都知道它的目标，即对`Handler`or有一个硬引用`Callback`。如果该目标是一个非静态内部类，它将隐含对外部类的硬引用，该外部类通常是一个`Activity`.

这意味着只要您的`Messages`排队`Handler`，您​​的整体`Activity`就不能被垃圾收集。

为了解决这个问题，必须打破从`Message`to的硬引用链。`Activity`该类`SafeCallback`通过只`WeakReference`对您的`Activity`.

这意味着，`Message`现在有一个硬引用，`SafeCallback`但那里的部分绑定现在可以被垃圾收集。如果发生这种情况，结果会`Handler.Callback callback = mCallback.get();`被简单地丢弃。反正没有更有用的目标了。它仍在泄漏自身，但这是一个几乎是空的类，因此不会导致问题。`null``Message``SafeCallback`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T00:20:13.880

我会从你试图解决什么用例的角度来处理它，而不是语言本身在做什么。如果您“嵌套类”（不是内部类，因为内部类不能是静态的）需要能够在其父类上调用非静态方法，或者读取非静态成员，那么您别无选择，但使其成为非静态的。如果您可以避免不访问任何父类的非静态资源，那么请务必这样做（无论如何您都会节省一些内存）。但是，如果您担心内存泄漏并且要像示例中那样将嵌套类设为私有，那么您真的不应该 不必担心，因为该类的实例只能在父类本地创建（除非您创建父类的静态成员，该成员包含对嵌套类实例的引用，在这种情况下，该对象将是直到父类被VM卸载）。总之，我个人不会太担心您的嵌套类是声明为静态还是非静态，但如果您担心内存泄漏，请更关注该类实例的生命周期。

# java - 这个用于替换转义字符的 Java 正则表达式如何工作？

> ID：13389307
> 
> 赞同：1
> 
> 时间：2012-11-14T23:39:28.467
> 
> 标签：java, regex

以下 Java 正则表达式“似乎”正在工作。目的是删除 escapeChar-反斜杠`"\"`。那就是`"\\{"`应该成为`"{"`。

我的问题是

1.  正则表达式字段中的 10 个字符不是 - 右括号“)” - 关闭从 char5 开始的正则表达式组吗？那么这对 char10 的右括号后的字符如何工作？
2.  有人可以为我分解这个正则表达式吗？

    ```
    str = str.replaceAll("\\\\([{}()\\[\\]\\\\!&:^~-])", "$1"); 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:43:58.067

删除逃逸后，我们剩下

```
 \\([{}()\[\]\\!&:^~-])
     ^character class 
```

这里字符类中的所有内容都是文字，除了`[`,`]` 并且`\`已被转义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T23:50:07.780

> 正则表达式字段中的 10 个字符不是 - 右括号“)” - 关闭从 char5 开始的正则表达式组吗？那么这对 char10 的右括号后的字符如何工作？

不。括号，两者`(`都不`)`是字符类中的元字符。请注意，在字符类中，只有这些字符`^-[]\`具有特殊含义。

在插入符号 ( `^`) 和破折号 ( `-`) 的情况下，如果策略性地放置在 char 类中，它们将失去其特殊含义：插入符号如果放置在除开头之外的任何位置，`-`如果它放置在开头*或*结尾。

> 有人可以为我分解这个正则表达式吗？

让我们去掉 Java 需要的双重转义，变成`\\\\([{}()\\[\\]\\\\!&:^~-])`：

```
\\([{}()\[\]\\!&:^~-])   # the actual regex 
```

其中分解为：

```
\\                   # match literal backslash
 (                   # open capture group
  [                  # open character class, matching any of
   {}()\[\]\\!&:^~-  # these characters: {}()[]\!&:^~-
  ]                  # close character class
 )                   # close capture group 
```

基本上它说：匹配一个反斜杠，后跟这些字符之一`{}()[]\!&:^~-`，并将其​​放入捕获组。此捕获组用于替换 ( `$1`)，它将整个匹配项（反斜杠 + 字符）替换为字符本身。

换句话说，这会从这些特殊字符中删除前导反斜杠。

# php - Google Drive API 域范围授权 - PHP 实例化驱动器服务对象错误

> ID：13389309
> 
> 赞同：2
> 
> 时间：2012-11-14T23:39:37.140
> 
> 标签：php, google-drive-api

我一直在尝试实现一个程序，将我的用户网站的备份上传到谷歌驱动器。他们所有人都在我的域上拥有一个帐户，因此我完成了为我的应用程序授予域 wde 授权的步骤，如下所述：[https ://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

不幸的是，他们用于实例化驱动服务对象的示例代码在许多层面上都失败了。这里是：

```
<?php

require_once "google-api-php-client/src/Google_Client.php";
require_once "google-api-php-client/src/contrib/Google_DriveService.php";
require_once "google-api-php-client/src/contrib/Google_Oauth2Service.php";
session_start();

$DRIVE_SCOPE = 'https://www.googleapis.com/auth/drive';
$SERVICE_ACCOUNT_EMAIL = '<some-id>@developer.gserviceaccount.com';
$SERVICE_ACCOUNT_PKCS12_FILE_PATH = 'privatekey.p12';

/**
 * Build and returns a Drive service object 
 * authorized with the service accounts
 * that acts on behalf of the given user.
 *
 * @param userEmail The email of the user.
 * @return Google_DriveService service object.
 */
function buildService($userEmail) {
  $key = file_get_contents(KEY_FILE);
  $auth = new Google_AssertionCredentials(
      SERVICE_ACCOUNT_EMAIL,
      array(DRIVE_SCOPE),
      $key);
  $auth->setPrn($userEmail);
  $client = new Google_Client();
  $client->setUseObjects(true);
  $client->setAssertionCredentials($auth);
  return new Google_DriveService($client);
}

?> 
```

第一个明显的错误是他们让你设置了变量，但函数使用了常量。因此，我硬编码了常量（KEY_FILE、SERVICE_ACCOUNT_EMAIL 等）应该存在的内容，以查看它是否有效，然后出现以下错误：

```
Fatal error: Call to undefined method Google_AssertionCredentials::setPrn() 
```

有没有人对如何解决这个问题有任何建议或意见？如果你用谷歌搜索这些问题，谷歌只会提供一页又一页的链接到他们自己的文档，正如我上面显示的那样，它根本不起作用。

基本上，我希望看到一个示例，说明如何使用已被授予域范围访问权限的“服务帐户”来实例化驱动器服务对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:19:05.940

文档中似乎有一些拼写错误（如果我们编写了文档，则应该将其称为 bug :)）。

```
<?php

require_once "google-api-php-client/src/Google_Client.php";
require_once "google-api-php-client/src/contrib/Google_DriveService.php";
require_once "google-api-php-client/src/contrib/Google_Oauth2Service.php";
session_start();

function buildService($userEmail) {

  $DRIVE_SCOPE = 'https://www.googleapis.com/auth/drive';
  $SERVICE_ACCOUNT_EMAIL = '<some-id>@developer.gserviceaccount.com';
  $SERVICE_ACCOUNT_PKCS12_FILE_PATH = 'privatekey.p12';

  $key = file_get_contents($SERVICE_ACCOUNT_PKCS12_FILE_PATH);

  $auth = new Google_AssertionCredentials($SERVICE_ACCOUNT_EMAIL, array($DRIVE_SCOPE), $key); // Changed!

  $auth->prn = $userEmail; // Changed!

  $client = new Google_Client();
  $client->setUseObjects(true);
  $client->setAssertionCredentials($auth);
  return new Google_DriveService($client);
}

$service = buildService('email@yourdomain.com');

$file = new Google_DriveFile();
$file->setTitle('My document');
$file->setDescription('A test document');
$file->setMimeType('text/plain');

$data = "contents";

$createdFile = $service->files->insert($file, array('data' => $data,'mimeType' =>'text/plain',));

print_r($createdFile); 
```

1.  他们定义了三个变量，但使用了三个三个常量——删除了常量并使用了变量。

2.  没有办法`Google_AssertionCredentials::setPrn()`。该属性`prn`的可见性是公开的。所以你可以将它设置为 `$auth->prn = $userEmail;`

# cakephp - CakePHP - 为保存创建和修改服务器时间偏移

> ID：13389315
> 
> 赞同：1
> 
> 时间：2012-11-14T23:39:55.600
> 
> 标签：cakephp

与网络服务器所在的位置相比，我的目标市场位于一个非常不同的时区。因此，我的保存方法时间戳 Created 和 Modified 的用处要小得多。无论如何，只要将这两个字段保存在应用程序中，我就可以为我的应用程序定义一个全局偏移量，以便时间与我的目标市场时区匹配？例如，从每条 Created 记录中扣除 5h？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:48:35.623

将您的日期时间存储为 UTC，并在显示时将它们转换为适当的用户时区，使用[CakeTime::convert](http://book.cakephp.org/2.0/en/core-utility-libraries/time.html#CakeTime%3a%3aconvert)。如果您有用户帐户，请让用户选择他们自己的时区。如果您不这样做，请选择对您有意义的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:45:25.240

把它放在你的 Config/bootstrap.php 中：

```
date_default_timezone_set('UTC');  //or whatever your timezone is 
```

它只是基于服务器时间，实际上与 CakePHP 无关 - 所以只需用 PHP 更改默认时区，你应该很高兴。 `'created'`并将`'modified'`基于指定的时区。

# css - Flexbox 不包装弹性项目

> ID：13389317
> 
> 赞同：6
> 
> 时间：2012-11-14T23:40:13.293
> 
> 标签：css

**我正在尝试使用 flexbox （inb4：我不关心 IE）**为我的网站设置布局，但由于某种原因，这些项目没有换行。

[http://jsfiddle.net/EnUuA/](http://jsfiddle.net/EnUuA/)

```
section { display:-webkit-flex; -webkit-flex-flow: row wrap; width: 200px; /* ... */ }
div { -webkit-flex: 1; width:48%; /* ... */ } 
```

​我试过设置一个宽度，`px`我试过完全删除宽度..仍然没有换行！

***那么*，我怎样才能让我的 flexbox 环绕在它们的容器中呢？**

*请在回答之前确保您的回答实际上使用了[灵活的盒子模型](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)，而不仅仅是给我块级元素。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T17:54:29.310

似乎（截至今天）该`flex-flow`属性不在 Firefox 中（至少 CR 2012 版本）。

但是，您可以在 Opera/Chrome 中看到此小提琴中的包装。

Safari Nightly 也有它的功能[http://nightly.webkit.org](http://nightly.webkit.org)

[编辑] 愚蠢的指南针忘记了前缀

参考：

[https://developer.mozilla.org/en-US/docs/CSS/flex](https://developer.mozilla.org/en-US/docs/CSS/flex) [https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)

**注意**从 FF 21.0a1 开始，它不支持`flex-wrap`

至少您可以验证该属性是否有效：

[http://jsfiddle.net/M7yLn/1/](http://jsfiddle.net/M7yLn/1/)

![像老板一样包装](../Images/2945fff0c9d5590692118096faa6d5d7.png)

# typescript - typescript.js 和 typescriptServices.js 有什么区别？

> ID：13389318
> 
> 赞同：14
> 
> 时间：2012-11-14T23:40:17.007
> 
> 标签：typescript

TypeScript 在其“bin”文件夹中带有 3 个 JavaScript 编译文件：

*   tsc.js -- 命令行运行编译器本身；
*   typescript.js -- ??
*   typescriptServices.js -- ??

我猜其中之一应该是“TypeScript 语言服务”，但另一个是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T23:52:02.723

`typescript.js`是一些随机内部工具使用的东西。它没有任何真正的面向外部的目的，尽管例如您可以使用它来构建类似于 TypeScript Playground 的东西。

`tsc.js`是`typescript.js`加上命令行前端。

`typescriptServices.js``typescript.js`加上语言服务（例如用于提供 Intellisense 功能）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-17T17:54:34.193

typescriptServices 也可用于在运行中、在节点中或在浏览器中转译 TS 文件。

# python - 为什么两个类实例似乎共享相同的数据？

> ID：13389325
> 
> 赞同：2
> 
> 时间：2012-11-14T23:40:56.677
> 
> 标签：python, class

当我遇到一个意想不到的问题时，我正在用 Python 做一些工作。我有一个类，以及两个变量 x 和 y。x 和 y 是类的单独副本，每个副本都有自己的数据。所以我设置 x 等于类并给它一些值，然后对 y 做同样的事情。但是，一旦我尝试使用该数据，我就会意识到我覆盖了 x 的值。似乎我没有创建要使用的类的两个单独副本，而是创建了对同一类的两个引用。所以这是代码中的一般示例：

```
x = someClass()
x.set(2, 0)
y = someClass()
y.set(3, 0)
print(x) 
```

最终结果是打印 3 而不是 2。我想创建一个单独的“版本”类来为每个变量保存不同的数据。不确定如何。使用 Python 3.3。这是该类的代码：

```
class someClass:
    def __init__(self, list = [0,0,0,0,0,0,0,0,0,0]):
        self.list = list
    def __repr__(self):
        return str(self.list)
    def set(self, loc, val):
        if ((loc >= 0) & (loc <= 9)):
            self.list[loc] = val 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T23:59:53.303

你掉进了一个常见的 Python 新手陷阱。使用列表作为默认变量`def __init__(self, list = [0,0,0,0,0,0,0,0,0,0])`意味着该类的所有实例与该参数的值共享相同的列表实例。另请参阅[“Least Astonishment”和可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

顺便说一句，如果您想使用容器对象（例如列表）作为默认参数，一个常见的习惯用法是使用`None`并检查它。例如：

```
def __init__(self, values=None):
    if values is None:
        values = [0] * 10 
```

管他呢。不像默认参数那样清楚地自我记录，但它有效。

作为旁注，不要`list`用作变量名，因为它会影响（有些常用的）`list`内置函数。

# sql - SELECT 中的上限字段值

> ID：13389328
> 
> 赞同：2
> 
> 时间：2012-11-14T23:41:05.077
> 
> 标签：sql, sql-server, tsql

我正在尝试限制特定字段，以使它们不超过特定值。

例如，像这样就足够了，我可以指定一个字段不应超过 8：

```
SELECT (
        cap(t.MondayHrs,8) 
        + cap(t.TuesdayHrs,8)
        + cap(t.WednesdayHrs,8)
        + cap(t.ThursdayHrs,8)
        + cap(t.FridayHrs,8)
       ) as TotalHours 
```

如果MondayHrs = 7，那么它应该作为7 添加到TotalHours。如果MondayHrs = 10，那么它应该作为8（我的上限值）添加到TotalHours

T-SQL 中是否有任何内置的东西可以促进这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T23:49:12.633

```
create function Cap (@Value float,@maxValue float) Returns float 
as
begin
Declare @Result float
if @Value > @maxValue select @Result=@Maxvalue else select @Result=@Value
Return @Result
end; 
```

用法

```
Select dbo.Cap(1,10),dbo.Cap(11,10) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-25T23:25:39.790

尝试...

```
select least(t.MondayHrs,8) 
    + least(t.TuesdayHrs,8)
    + least(t.WednesdayHrs,8)
    + least(t.ThursdayHrs,8)
    + least(t.FridayHrs,8)
   ) as TotalHours 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T23:57:31.513

另一种想法是使用 CASE。例如：

```
SELECT ( 
       (CASE WHEN t.MondayHrs > 8 THEN 8 ELSE t.MondayHrs END)
       + (CASE WHEN t.TuesdayHrs > 8 THEN 8 ELSE t.TuesdayHrs END)
) as TotalHours 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T23:48:21.203

您可以为此编写一个函数，例如 MySQL [GREATEST](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_greatest)。

然后你可以做类似的事情

```
select greatest(some_col, 8) +
       greatest(other_col, 8) + 
       ...
from your_table 
```

# tridion - 以 WEBDAV 形式显示结构组 SDL Tridion

> ID：13389330
> 
> 赞同：3
> 
> 时间：2012-11-14T23:41:25.620
> 
> 标签：tridion, webdav

在我们的安装中，我只能在使用 WEBDAV 连接到 CME 时看到 Building Block。我想知道是否也可以显示结构组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T23:54:08.777

不幸的是没有。只有 Building Blocks 文件夹对 WebDAV 公开。此行为不可配置。

# jquery - 在通过 jquery ajax 通过 $q 返回的 rails haml partials 中显示 ng-attributes

> ID：13389332
> 
> 赞同：1
> 
> 时间：2012-11-14T23:41:40.880
> 
> 标签：jquery, ajax, coffeescript, haml, angularjs

所以我正在为一个预先存在的 Rails 应用程序编写一个 Angular 前端。我知道在将后端转换为通过 JSON 将 REST Api 直接提供给 ngResource 之前，使用 $q 充其量只是一个中间步骤，但不幸的是，目前在各种 Ruby 位置中存在太多逻辑，无法轻松地将所有内容重写为纯 Angular 格式。

问题是，我如何正确实例化和处理返回的部分中的 ng 属性。以下是经过净化的代码版本。

```
 Company.Controller.TypeAccordionController = (scope, http, element, q, typeJQueryService) ->

   scope.validateForm = (event) ->
     console.log "we are here"

   scope.getTheDamnType = (id) ->
     typeJQueryService.multipart(id).then (response)->
       angular.element('.datePicker').datepicker()

  Company.Controller.TypeAccordionController.$inject = ['$scope', '$http', '$element', '$q','typeJQuery'] 
```

返回的 HAML 正在页面上正确显示，并且日期选择器正在成功实例化。返回的 HAML 的第一行是：

```
 = form_for @type, :html=>{:class=>'form-horizontal type-form', :"ng-submit"=>"validateForm($event);"} do |f| 
```

有趣的旁注：将 ng-attributes 放在 HAML 中的原始 DOM 元素上就像一个魅力。例子：

```
 = form_for @type, :html=>{:class=>'form-horizontal type-form', :"ng-controller"=>"someFormController"} do |f| 
```

以上将不起作用。然而，下面的工作就像一个魅力：

```
 = form_for @type, :html=>{:class=>'form-horizontal type-form', :"ng-controller"=>"someFormController"} do |f|
      %div(ng-controller=someFormController) 
```

进行显示的服务工作如下：

```
 Company.MyModule.factory 'TypeJQuery', ($q, $rootScope) ->
   multipart: (element) ->
     deferred = $q.defer()
     $.get "..." + element, (data) ->
       $rootScope.$apply ->
         deferred.resolve data
     deferred.promise 
```

但是，提交时没有任何反应，日志不会打印。另一种尝试是：

```
 scope.validateForm = (event) ->
     console.log "we are here"

   scope.getTheDamnType = (id) ->
     typeJQueryService.multipart(id).then (response)->
       angular.element('.datePicker').datepicker()
       angular.element('form').attr("ng-submit", "validateForm($(this).attr('id'))") 
```

同样没有任何有用的事情发生。

关于如何解决这个问题的任何建议？附带说明：稍后在返回的部分中，还有另一个带有 ng-controller 的元素。不用说有用的事情不会发生在它身上。

编辑： HAML 实际上并没有被原始返回，而是通过以下 js.erb 路由：

```
 $('div.form_<%= @artifact.id %>').replaceWith("<%=j render 'form' %>"); 
```

然后返回表单部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:23:14.567

我需要查看您正在输出的 HTML 的其余部分，但我马上可以告诉您，您的验证似乎是错误的。

Angular 中的验证通常由指令完成。如果一个表单是 $invalid 它永远不会点击 ng-submit，因此你的验证函数永远不会被调用。*如果*您的表单有效，ng-submit 应该适用于您想要调用的任何函数。

看一下这个在 Angular 中的表单验证演示：

[http://plnkr.co/edit/B3joUY](http://plnkr.co/edit/B3joUY)

如果您需要一些自定义验证，那也是可行的，它只需要一个自定义验证指令。但这是一个完全不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:48:12.390

我发现有趣的注释：在模板（haml、erb 等）中的 rails 函数上设置 ng-attributes 似乎不起作用，而直接在该部分中的 DOM 元素上设置它是一种享受。例子：

```
 = form_for @type, :html=>{:class=>'form-horizontal type-form', :"ng-controller"=>"someFormController"} do |f| 
```

上面的方法不起作用，它会默默地失败，DOM 检查会在表单元素上显示控制器，它只是不起作用。然而以下：

```
 = form_for @type, :html=>{:class=>'form-horizontal type-form'} do |f|
       %div(ng-controller=someFormController) 
```

有谁知道为什么/如何绕过这个限制并将 ng 属性直接放在 rails 函数上？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:37:52.133

答案如下：

```
 typeJQueryService.multipart(id).then (response)->
          scope.form = compile(response.substring(response.indexOf("<form"), response.lastIndexOf("</form>")))(scope)
          angular.element("div.form_" + id).parent().html compile(scope.form)(scope) 
```

显然，首先将 $compile 作为 compile 注入控制器。

然后，直接返回 HAML，而不是返回 jQuery。

# java - 更快地更新图像像素

> ID：13389350
> 
> 赞同：1
> 
> 时间：2012-11-14T23:43:21.187
> 
> 标签：java, image-processing

我正在制作类似程序的图像编辑，当我想编辑大图像时，它真的开始变慢。什么是快速编辑大图像的好方法？这个例子调整了图像的亮度，它可以工作，但是当我得到像 3456x2304 这样的大图像时，它真的很慢。

我有一个滑块，每次移动时都会调用这个函数。

```
// Slider in a dialog box
private void sldBrightnessStateChanged(javax.swing.event.ChangeEvent evt) {
    // Get the position of the slider
    int val = sldBrightness.getValue();
    // Set the text in the textbox
    txtBrightness.setText("" + val);
    // New Brightness class (see below)
    Brightness adjustment = new Brightness();
    adjustment.amount(val);
    adjustment.applyFilter();
    // get the result built by applyFilter();
    Canvas.preview = Preview.getImage();
    // Update main program
    this.getParent().repaint();
} 
```

然后是过滤器：

```
package pocketshop.graphics.adjustments;

import java.awt.image.BufferedImage;
import pocketshop.Canvas;
import pocketshop.graphics.Colors;
import pocketshop.graphics.Preview;

public class Brightness{

    protected int amount = 0;

    public void amount(int amount){
        this.amount = amount;
    }

    public void applyFilter(){
        int width = Canvas.image.getWidth();
        int height = Canvas.image.getHeight();
        int[] pixels = new int[width * height];

        Canvas.image.getRGB(0, 0, width, height, pixels, 0, width);
        for(int i = 0; i < pixels.length; i++){
            int pixel = pixels[i];
            //int pixel = Canvas.image.getRGB(x, y);
            int red = Colors.red(pixel);
            int green = Colors.green(pixel);
            int blue = Colors.blue(pixel);

            red += amount;
            if(red > 255){
                red = 255;
            }else if(red < 0){
                red = 0;
            }

            green += amount;
            if(green > 255){
                green = 255;
            }else if(green < 0){
                green = 0;
            }

            blue += amount;
            if(blue > 255){
                blue = 255;
            }else if(blue < 0){
                blue = 0;
            }
            pixels[i] = Colors.rgba(red, green, blue);
        }
        //BrightnessContrastDialog.preview.setRGB(0, 0, width, height, pixels, 0, width);
        BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
        img.setRGB(0, 0, width, height, pixels, 0, width);
        Preview.setImage(img);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:52:25.480

> 我有一个滑块，每次移动时都会调用这个函数。

在滑块停止移动之前不要调整图像。我不知道 Swing，但我打赌有一个测试可以`evt`说明它是在移动还是已经停止。

按照您的方式，随着滑块的移动，applyFilter 可能会被调用 100 次或更多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T06:48:33.553

据我了解，图片是为用户提供的，以便立即反馈所做的更改，您可以做什么我们显示图片的下采样版本并在滑块移动时对其执行亮度更改，这将很快。一旦用户对她使用滑块选择的值感到满意，您就可以将更改应用于原始图像。您可以添加应用按钮或其他东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:53:42.513

我建议您研究[OpenCL](https://developer.nvidia.com/opencl)及其 Java 绑定[JOCL](http://www.jocl.org/)。OpenCL 是一个用于直接与各种不同显卡上的 GPU 交互的库。JOCL 是 OpenCL API 的 Java 绑定库。

公平的警告，这可能比您想要解决的要多得多，因为您将在比 Swing 低得多的水平上工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T04:32:21.740

我不确定，但看起来您使用的是[BufferedImage.TYPE_INT_ARGB](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/image/BufferedImage.html)类型的 BufferedImage。这意味着 BufferedImage 正在使用 WritableRaster，而该 WritableRaster 正在使用 DataBufferInt 类型的 DataBuffer。在其最简单的形式中，DataBufferInt 只不过是一个 int[] 的包装器。如果您可以获取 Canvas 正在使用的 BufferedImage，则获取其 WritableRaster 并从那里获取 DataBufferInt：

```
WritableRaster raster = Canvas.image.getRaster();
DataBufferInt dataBuffer = (DataBufferInt)raster.getDataBuffer();
int[] pixels = dataBuffer.getData(); 
```

现在您有了代表像素的 int[]，您可以遍历它并更改组件：

```
for (int i = 0, len = pixels.len; i < len; ++i) {
  int pixel = pixels[i];

  int red = ((pixel & 0x00FF0000) >> 16) + amount;
  if (red < 0) red = 0 else if (red > 255) red = 255;

  int green = ((pixel & 0x0000FF00) >> 8) + amount;
  if (green < 0) green = 0 else if (green > 255) green = 255;

  int blue = (pixel & 0x000000FF) + amount;
  if (blue < 0) blue = 0 else if (blue > 255) blue = 255;

  pixels[i] = (pixels[i] & 0xFF000000) + (red << 16) + (green << 8) + blue;
} 
```

这意味着预览中的 BufferedImage 中的像素正在就地更改，而无需创建另一个新像素的 int[] 和另一个 BufferedImage。

我不确定这是否会起作用，但很多时候它有助于 Java 省去中间人并且不创建尽可能多的对象。

如果这不起作用，请查看[Java Advanced Imaging](http://www.oracle.com/technetwork/java/javase/tech/jai-142803.html)。

# sql - 声明一个 int * int 类型的 SQL 变量？

> ID：13389351
> 
> 赞同：2
> 
> 时间：2012-11-14T23:43:28.513
> 
> 标签：sql, tsql, sql-server-2012

在 T-SQL 中是否可以执行以下操作？

```
declare @pair int * int 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:52:02.083

在 Sql Server 中，[您可以创建自己的数据类型](http://msdn.microsoft.com/en-us/library/ms175007.aspx)。

要模拟一对，您可以[创建一个](http://www.sqlservercentral.com/blogs/steve_jones/2012/09/19/creating-a-user-defined-table-type/)包含两个整数的用户定义表类型：

```
CREATE TYPE Pair AS TABLE
( 
    Value1 INT,
    Value2 INT
);

DECLARE @Pair Pair

INSERT @Pair
VALUES (1, 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:48:23.030

不。根据[文档](http://msdn.microsoft.com/en-us/library/ms188927.aspx)，您必须声明 a`data_type`并且`(int, int)`不是`data_type`

```
DECLARE 
{{ @local_variable [AS] data_type } | [ = value ] } 
```

> 数据类型
> 
> 是任何系统提供的公共语言运行时 (CLR) 用户定义的表类型，或别名 > 数据类型。变量不能是 text、ntext 或 image 数据类型。

# c - 如何从文件读取到无符号字符缓冲区并在 C 中写入文件

> ID：13389353
> 
> 赞同：-2
> 
> 时间：2012-11-14T23:43:59.760
> 
> 标签：c, tcp, udp

我想从文件中读取到无符号字符缓冲区，并将该信息写回文件中。我正在使用无符号字符缓冲区，因为我需要通过 UDP 套接字发送此信息。

问题是我似乎找不到从缓冲区正确读取文件并从缓冲区写入的方法。

谁能指出一个方法来做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:47:18.353

看一下`write`and`read`函数，or `fread`and `fwrite`。他们应该做的伎俩。

例如，您将缓冲区写入文件：

```
int fd = open("file", O_CREAT | O_WRONLY, 0600);
write(fd, yourBuffer, numberOfCharactersToWrite); 
```

该`write`函数可能会返回一些错误代码，请阅读它的手册。

`fwrite`用法非常相似，请查看[此处的站点](http://www.cplusplus.com/reference/clibrary/cstdio/fwrite/)。

# java - 在 Android 应用程序中为 Toast 编写 JUnit 测试

> ID：13389361
> 
> 赞同：2
> 
> 时间：2012-11-14T23:44:48.540
> 
> 标签：java, android, unit-testing, error-handling, junit

我经常用来`Toast.makeText().show()`向我的 Android 应用程序的用户显示消息。这些可以是下一步要做什么的说明或错误消息。作为我的 JUnit 测试的一部分，我想包含这些消息按预期出现的断言。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T13:12:10.177

我通过使用**Robotium**框架来做到这一点，并在显示吐司后立即调用它：

```
 TextView toastTextView = solo.getText(0);
     if(toastTextView != null){
         String toastText = toastTextView.getText().toString();
         assertEquals(toastText, "Your expected text here");
     }
     //wait for Toast to close
     solo.waitForDialogToClose(5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-29T21:17:37.360

自从最初提出这个问题以来，我发现以下解决方案对我很有效：

```
public static void waitForToast(Solo solo, String message) {
    Assert.assertTrue(solo.waitForDialogToOpen(TIME_OUT));
    Assert.assertTrue(solo.searchText(message));
} 
```

# erlang - 如何检查具有自动生成名称（amq.gen-*）的队列是否存在？

> ID：13389364
> 
> 赞同：1
> 
> 时间：2012-11-14T23:45:49.970
> 
> 标签：erlang, rabbitmq

在未生成名称的情况下，调用`#'queue.declare'`以获取新创建的队列或具有给定名称的现有队列就足够了。但是，当使用自动生成的名称（以前缀开头`amq.gen-`）时，它并不是那么简单。首先`amq.`是限制前缀，所以没有办法调用`#'queue.declare'{queue=<<"amq.gen-xxx">>}`.

我也尝试使用`passive=true`选项，虽然我可能会传递受限名称，但当队列不存在时，我会收到退出错误。以下是错误报告：

```
** Handler sse_handler terminating in init/3
   for the reason exit:{{shutdown,
                        {server_initiated_close,404,
                            <<"NOT_FOUND - no queue 'amq.gen-wzPK0nIBPzr-dwtZ5Jy58V' in vhost '/'">>}},
                    {gen_server,call,
                        [<0.62.0>,
                         {call,
                             {'queue.declare',0,
                                 <<"amq.gen-wzPK0nIBPzr-dwtZ5Jy58V">>,
                                 true,false,false,false,false,[]},
                             none,<0.269.0>},
                         infinity]}} 
```

有没有办法解决这个问题？

**编辑**：*这是这个问题背后的一个短篇故事。免责声明：我是二郎新手，所以也许有更好的方法让它工作:)*

我有一个基于 gen_server 的应用程序，它与 Web 浏览器保持 SSE（服务器端事件）连接。每个连接都绑定到 rabbitmq 队列。SSE 连接中断时，在给定超时后自动尝试重新连接 - 这是 Web 浏览器开箱即用的支持。为了重用以前创建的队列，我试图检查给定名称的队列（取自请求 cookie）是否已经存在。这一切都在`init`回调中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:08:19.707

`amq.`如果队列已经存在，您可以使用前缀声明队列。你会得到`Declare-Ok`队列`access-refused`是否存在。（我的问题是，你为什么要这样做？；）

此外，您可以使用被动选项来检查它是否已经存在。根据[AMQP 参考](http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare)`not-found`，如果队列不存在，服务器会将其视为错误。为了在您的 Erlang 客户端中捕捉到​​这一点，您可以尝试以下内容：

```
try 
    %% declare queue with passive=true
    queue_exists
catch exit:{{shutdown, {server_initiated_close,404,_},_,_} -> 
    queue_does_not_exist 
end 
```

# ruby-on-rails - 如何调试sidekiq？

> ID：13389365
> 
> 赞同：2
> 
> 时间：2012-11-14T23:46:32.690
> 
> 标签：ruby-on-rails, debugging, sidekiq

今天airbrake报告了一个异常。它的摘要说，当 sidekiq 在失败后尝试重试作业时会出现问题。以下是摘要参数的样子：

```
{
 "retry"=>"true",
 "queue"=>"default",
 "class"=>"AdwordsReportWorker",
 "args"=>"[\"2\", \"2012-11-13\"]",
 "jid"=>"51d568e46c412adc327153c8",
 "error_message"=>"wrong number of arguments(1 for 0)",
 "error_class"=>"ArgumentError",
 "failed_at"=>"2012-11-14 13:56:12 UTC",
 "retry_count"=>"0",
 "controller"=>"",
 "action"=>""
} 
```

我似乎只有在作业失败并重试时才会出现异常。我想调试这个，但我不知道从哪里开始:-(

我的问题是：

1.  工人在什么情况下理解它**未能**完成工作（他决定重试）？我如何迫使工人失败以试图重现问题？
2.  是否有关于调试/示例 sidekiq 工作人员的好教程？
3.  我正在使用**sidekiq 2.3.3**。升级到新版本会解决问题吗？

**奖金轨道**。[实际](http://pastie.org/private/yccpaccwnc0mdzohkptl5a)的堆栈跟踪意外地以

```
[GEM_ROOT]/gems/activerecord-3.2.8/lib/active_record/associations/association.rb:98:in `initialize' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:11:44.080

我找不到如何调试 sidekiq，但显然我所指的问题是 Rails 中的一个已知错误。

这里有几行：

*   [https://github.com/mperham/sidekiq/issues/601](https://github.com/mperham/sidekiq/issues/601)
*   [https://github.com/rails/rails/issues/7770](https://github.com/rails/rails/issues/7770)

# ruby - 如何为 Ruby 设置文件和目录？

> ID：13389368
> 
> 赞同：0
> 
> 时间：2012-11-14T23:46:52.857
> 
> 标签：ruby, irb

我正在为 App Academy 做准备工作，但我很难设置文件/目录以便能够正确运行所有内容。我有几个问题，但无法找到具体的答案：

1.  如何在 windows 终端中创建目录？
2.  您如何在 IRB 中运行以前用记事本编写的文件？我在记事本中写了一些简单的脚本，因为 Sublime 导致我严重偏头痛。或者如何将记事本文件更改为 Ruby 文件？
3.  你如何在 IRB 中创建新文件`test_code.rb`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:01:29.083

1) 在 Windows 命令提示符下并导航到您的工作目录时，键入`md directory_name`

2）除非您特别告诉记事本，否则记事本会将您的文件保存为`.txt`文件。您只需将文件扩展名从 重命名`*.txt`为`*.rb`.

3) 当你在你的 Windows 机器上安装 Ruby 时，Ruby 解释器无疑会被添加到你的路径中，所以你应该能够`*.rb`直接从 windows cmd 提示符运行你的文件并且它会执行。
**要在 IRB 中*加载***它：确保从文件所在的同一文件夹中运行 IRB `*.rb`。一旦启动 IRB 会话，请键入`load 'my_file.rb'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:01:17.630

IRB 是测试代码的绝佳环境，但不适用于编写完整的脚本。使用 Notepad 或 Notepad++ 或 Vim for Windows 或您选择的编辑器，只要它能够生成文本（非文字处理文档）。

您可以在终端或资源管理器中创建目录，没关系。只需记下您创建它的位置，以免丢失它。

如果您想在 Ruby 中运行脚本，只需键入`ruby /path/to/the/file/script_to_run.rb`，Ruby 解释器就会加载并运行该文件。

您*可以*将脚本加载到 IRB 并观察它运行，但这很少是我们需要做的事情。更多时候你会想用 Ruby 运行脚本，并在 IRB 中尝试，因为它就像一个暂存器。

# keyboard - 如何在 Keyboard Maestro 中模拟 HOLDING 击键？

> ID：13389370
> 
> 赞同：5
> 
> 时间：2012-11-14T23:47:12.980
> 
> 标签：keyboard, keyboard-shortcuts, keystroke, keyboard-maestro

使用 Keyboard Maestro 5，我希望能够为我的一个宏模拟在特定时间内按住特定键。我不确定这目前是否可行，而且我还没有找到解决方法。任何帮助将不胜感激如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-05T19:07:49.407

一个旧帖子，但是关于键盘大师的一个常见问题。

好消息和坏消息。先说坏消息：

Keyboard Maestro（当前版本 7）的开发者说，

> “不，键盘大师不能按住任何按钮或键。”

现在好消息。该论坛的另一张海报说：

> Karabiner 是完美的……在 Karabiner 中定义一个组合键并将其映射到您的 KM 宏。

[这是键盘大师论坛上该主题的链接。](https://forum.keyboardmaestro.com/t/press-and-hold-keystroke/1004/2?u=mark)

# machine-learning - PCA 的频率或计数

> ID：13389373
> 
> 赞同：2
> 
> 时间：2012-11-14T23:47:26.023
> 
> 标签：machine-learning, pca

我有许多观察结果是对给定用户发生的某个事件的计数。例如

```
 login_count logout_count
user1            5            2
user2           20           10
user3           34            5 
```

我想将这些变量与其他一些变量一起提供给 PCA，只是想知道我是否应该直接使用计数（并缩放列）或使用百分比（并在之后缩放列），例如

```
 login_count logout_count
user1         0.71         0.28
user2         0.66         0.33
user3         0.87         0.13 
```

哪一种是表示数据的更好方式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:33:37.297

取决于您要从数据中提取的信息。

如果相关性`login=p*logout`，那么我会选择第一个。另一个有点奇怪，因为你应该在 100% 的时间里登录（你怎么会知道它是 user1？）和注销可能是 28%。而且您还具有依赖性`1-login_procent_i=logout_procent_i`，它将在预处理之前和之后为您提供完美的相关性。

# twitter-bootstrap - Bootstrap（推特）手风琴根本不起作用

> ID：13389376
> 
> 赞同：2
> 
> 时间：2012-11-14T23:47:33.010
> 
> 标签：twitter-bootstrap, accordion

我一辈子都无法让 bootstrap （或 jquery-collapse ）工作。

我已经将代码范围缩小到几乎是直接从文档中复制的示例，但仍然没有：

代码： http: [//pastebin.com/kL0rWWw4](http://pastebin.com/kL0rWWw4)

结果：

![](../Images/e70a26279e44cf11e05b6031d21b03eb.png)

那是chrome，没有点击。点击任何东西绝对不会：\

非常感谢任何提示。

Brgds，斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:00:44.387

我猜您的 js 依赖项之一未正确链接。我将您的基本 html 复制到 js fiddle 并包含引导依赖项和 jquery，一切都按预期工作：http: [//jsfiddle.net/fzN4K/](http://jsfiddle.net/fzN4K/)

由于 bootstrap 需要 jquery，请尝试在 bootstrap.js 之前包含 jquery.js。即换行：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="../bootstrap/js/bootstrap.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:04:25.773

您好，您的问题是您在包括引导程序（需要它）之后调用 jquery 库。要修复它，请按如下方式更改顺序：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="../js/jquery-ui.js"></script>
<script src="bootstrap/js/bootstrap.js"></script> 
```

# string - 如何在 Perl 中反转一串数字？

> ID：13389377
> 
> 赞同：3
> 
> 时间：2012-11-14T23:47:37.413
> 
> 标签：string, perl, numbers, reverse, csv

我有一个包含数值的字符串。我想以相反的顺序显示数值。

一个行不通的想法是使用内置的 reverse 函数：

```
my $j = "12,11,10,9";
my $k = reverse($j);
print $k; 
```

但是该代码输出：

```
9,01,11,21 
```

当我们想要：

```
9,10,11,12 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T23:51:51.957

简洁版：

```
my $j = "12,11,10,9";
print join ",", reverse split /,/, $j; 
```

括号版本：

```
my $j = "12,11,10,9";
print(join(",", reverse(split(/,/, $j)))); 
```

如果我稍微分解一下：

```
my $j = "12,11,10,9";
my @j = split /,/, $j;
print join ",", reverse @j; 
```

**输出**

```
9,10,11,12 
```

**笔记**

*   看`perldoc -f reverse`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T23:52:41.720

将字符串放入数组中，然后反转数组输出。您只是将完整的字符串按原样反转。

```
@j_array = split(/,/, $j); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:59:00.513

由于您没有提供有关输入来源的任何信息，因此*常见* `reverse()`答案的替代方法是发出`sort`：

[http://codepad.org/q3dIkzO4](http://codepad.org/q3dIkzO4)

```
my $j = "12,11,10,9";
my $k = join ',' , sort {$a <=> $b} split /,/ , $j;

print $j, "\n";
print $k; 
```

* * *

同一件事分解成更多行：

[http://codepad.org/pwTvg1c1](http://codepad.org/pwTvg1c1)

```
my $j = "12,11,10,9";        # Original string
my @k = split ',', $j;       # Breaking the numbers into an array
@k = sort {$a <=> $b} @k;    # Applying a sort (could use "reverse()" in its place)
my $k = join ',' , @k;       # Combine the numbers with a comma

print $j,"\n";
print $k; 
```

# mongodb - 如何在 AppFog/CloudFoundry 上使用 MongoDB 部署 Grails？

> ID：13389379
> 
> 赞同：0
> 
> 时间：2012-11-14T23:47:47.430
> 
> 标签：mongodb, grails, cloud-foundry, appfog, grails-2.1

Grails 在本地与 mongodb 插件配合得很好，但我在 AppFog 上遇到了问题。

对于 MongoDB 以外的数据库，在 AppFog 上部署 Grails 的说明非常清楚。该文档似乎暗示了 MongoDB 的自动配置，但如果我将我的配置设置为以下，它就不起作用。

```
//DataSource.groovy

grails {
  mongo {
    host = "localhost"
    port = 27017
    databaseName = "dbname"
  }
} 
```

自动配置似乎没有用正确的主机名替换 localhost。看来我需要从 VCAP_SERVICES 中设置值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:47:47.430

联系支持后，答案是使用 VCAP_SERVICE 环境变量。在网上搜索之后，我想出了如何在配置中检索和使用 VCAP_SERVICES。

```
grails {
    def vcap = System.env.VCAP_SERVICES
    def credentials = vcap ? grails.converters.JSON.parse(vcap)["mongodb-1.8"][0]["credentials"] : null
    mongo {
        host = credentials ? credentials.hostname : "localhost"
        port = credentials ? credentials.port : "27017"
        username = credentials ? credentials.username : null
        password = credentials ? credentials.password : null
        databaseName = credentials ? credentials.db : "dbname"
    }
} 
```

我还创建[了一个 github gist 这个配置](https://gist.github.com/4062384)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T05:15:45.697

您的 Grails 项目中是否安装了[CloudFoundry 插件？](http://grails.org/plugin/cloud-foundry)该插件对 Grails 应用程序中的 MongoDB 和其他数据源进行自动重新配置。

如果由于某种原因您不能或不想使用 Grails CloudFoundry 插件，则使用上面显示的环境变量的另一种方法是使用[cloudfoundry-runtime Java API](https://github.com/cloudfoundry/vcap-java/tree/master/cloudfoundry-runtime)。此 API 使您可以访问存储在环境变量中的相同信息，但它比直接解析环境变量要干净一些。

# javascript - Javascript 序列中的三元运算符

> ID：13389382
> 
> 赞同：0
> 
> 时间：2012-11-14T23:48:02.937
> 
> 标签：javascript

我从 Javascript 库中获得了以下代码：

```
function func_1()
{
    if ( null == decimal ) 
    {
        return dPR || (dpr(2) ? 2 : dpr(1.5) ? 1.5 : dpr(1) ? 1 : 0);
    }
} 
```

我对`if`语句中的代码特别感兴趣。

我还能怎么写这样它更容易阅读？！就像现在一样，我无法理解。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T23:51:11.007

它相当于：

```
if (dPR) {
    return dPR;
} else {
    if (dpr(2)) {
        return 2;
    } else {
        if (dpr(1.5)) {
            return 1.5;
        } else {
            if (dpr(1)) {
                return 1;
            } else {
                return 0;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:52:46.790

```
if (dPr) {
    return dPr;
} 
else {
    if (dpr(2))
        return 2
    else if (dpr(1.5))
        return 1.5;
    else if (dpr(1))
        return 1;
    else 
        return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:50:55.043

```
if ( decimal == null ) {

    if ( dPR ) {

        return dPR;

    } else {

        if ( dpr(2) ) {

            return 2;

        } else if ( dpr(1.5) ) {

            return 1.5;

        } else if ( dpr(1) ) {

            return 1;

        } else return 0;

    }

} 
```

# java - Java接口上的多重继承

> ID：13389384
> 
> 赞同：30
> 
> 时间：2012-11-14T23:48:15.707
> 
> 标签：java, multiple-inheritance

我认为多重继承在 Java 中总是非法的，但是这段代码可以编译：

```
public interface A {
  void a();
}

public interface B {
  void b();
}

public interface AB extends A, B {
} 
```

有一个空的界面`AB`会被认为是一种不好的做法吗？有没有办法在避免空接口（使用泛型或其他方式）的同时实现类似的东西？

注意：我不是在问如何通过接口模拟多重继承。我意识到我可以做到以下几点：

```
public class AbImpl implements A, B {
  public void a() {}
  public void b() {}
} 
```

由于各种原因，我需要一个具有两种方法的接口。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-14T23:51:08.200

不允许*实现*的多重继承。不过，组件可以继承多个接口。

继承多个接口没有问题，因为您只是定义要实现的新方法签名。传统上被视为导致问题或至少是混乱的功能的多个副本的继承（例如，[死亡的钻石](http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-14T23:54:59.313

一个接口可以扩展一个或多个其他接口。您还可以在您的类中实现多个接口。这是合法的，因为接口只是合同 - 没有实现。您只是定义了一个类能够做什么的契约，而没有说明该类将如何做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T23:56:25.237

实现接口不是“继承”，而是在*扩展*类时。

实现接口用于声明一个类“看起来像”某物，而扩展类用于声明一个类“是”某物。

“看起来像”多个事物是可以的，但不能“成为”多个事物。

使用扩展多个接口的空接口作为将一组接口收集到单个接口以传达更广泛但可重用的 API 的一种方式并没有错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-20T13:28:39.287

试试这个，它需要 Java 8。

只需将文件复制并保存到 Stateful.java 中。

它也可以在这里找到： [https ://bitbucket.org/momomo/opensource/src/e699d8da450897b5f6cd94a5d329b3829282d1d6/src/momomo/com/Stateful/Stateful.java?at=default](https://bitbucket.org/momomo/opensource/src/e699d8da450897b5f6cd94a5d329b3829282d1d6/src/momomo/com/Stateful/Stateful.java?at=default)

```
 /**************************************************************************************************************************************
 * Copyright(C) 2014, Mo Enterprises Inc.                                                                                             *
 * All rights reserved.                                                                                                               *
 * Mo Enterprises Inc Opensource License 'MoL1'.                                                                                      *
 *                                                                                                                                    *
 * (1) Use of this source code, wether identical, changed or altered is allowed, for both commercial and non-commercial use.          *
 *                                                                                                                                    *
 * (2) This source code may be changed and altered freely to be used only within your entity/organisation, given that a notice of all *
 *     changes introduced are listed and included at the end of a copy of this exact copyright notice, including the name and date of *
 *     the entity/organization that introduced them.                                                                                  *
 *                                                                                                                                    *
 * (3) The redistribution or publication to the public of this source code, if changed or altered, is striclty prohibited using any   *
 *     medium not owned, and/or controlled by Mo Enterprises Inc unless a written consent has been requested and recieved by          *
 *     representatives of Mo Enterprises Inc.                                                                                         *
 *                                                                                                                                    *
 * (4) The distribution of any work to the public derived through the use of this source code, wether identical, changed or altered,  *
 *     is allowed, as long as it in full compliance of (3).                                                                           *
 *                                                                                                                                    *
 * (5) Mo Enterprises Inc considers the techniques and design patterns employed in this source code as unique and making the          *
 *     redistribution of this source code with altered names, and/or a rearrangement of code as a severe breach of the copyright law  *
 *     and this license. Mo Enterprises Inc reserves all rights to puruse any and all legal options.                                  *
 *                                                                                                                                    *
 * (6) All copies of this source code, wether identical, changed/altered must include this entire copyright notice, list all changes  *
 *     made including the name and date of the entity/organization that introduced them, as wel as the following disclaimer:          *
 *                                                                                                                                    *
 *     THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND                                                *
 *     ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                                                  *
 *     WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE                                                         *
 *     DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR                                                *
 *     ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES                                                 *
 *     (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;                                                   *
 *     LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND                                                    *
 *     ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT                                                     *
 *     (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS                                                  *
 *     SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                                   *
 *                                                                                                                                    *
 * Please contact us on opensource@{at}momomo.com if you have an improvement to this source code you'd like to contribute.            *
 * We'll make sure to include your name and/or organisation as a contributor if accepted.                                             *
 **************************************************************************************************************************************/   

import java.util.IdentityHashMap;
import java.util.Map;

/**
 * @Author Mo. Joseph
 *
 * Consider memory leakage usage.
 * None of the public methods below should be used outside of the interface extending Stateful!
 */
@SuppressWarnings("unchecked")
public interface Stateful {
        /**
         * @Private access only! Strict enforcement, otherwise risks for memomry leaks!
         */
        static final Map<Stateful, IdentityHashMap<Class<State>, State>> STATES = new WeakIdentityHashMap<>( );

        /**
         * @Protected access only! Strict enforcement, otherwise risks for memomry leaks!
         *
         * Note, this method can not be generified!
         * If so, then it will conflict when a class implements several Stateful interfaces.
         */
        default <Y extends Stateful, T extends State<Y>> T $(Class<T> clazz) {
                synchronized (this) {
                        IdentityHashMap<Class<State>, State> map = STATES.get(this);
                        if ( map == null ) {
                                STATES.put(this, map = new IdentityHashMap<>() );
                        }

                        State state = map.get(clazz);
                        if (state == null) {
                                try {
                                        map.put(cast(clazz), state = clazz.newInstance() );
                                } catch (Throwable e) {
                                        throw new RuntimeException(e);
                                }
                        }
                        return (T) state;
                }
        }

        /**
         * @Protected access only! Strict enforcement, otherwise risks for memomry leaks!
         * May only be extended from within an interface that implements Stateful.
         */
        static interface State<Y extends Stateful> {}

        /**
         * @Private
         * Util method for casting used here. Simple casting won't work for some reason.
         */
        static <T>T cast(Object obj){
                return (T) obj;
        }

        /*******************************************************************************
         * Example code below:
         *******************************************************************************/
        public static void main(String[] args) {
                Person mo = new Person();
                mo.setName("Mo. Joseph");
                mo.setStreet("Mansion Street 1");
                System.out.println(mo.getName());
                System.out.println(mo.getStreet());

                Pet garfield = new Pet ();
                garfield.setName("Garfield");
                System.out.println(garfield.getName());

                Person santa = new Person();
                santa.setName("Santa");
                santa.setStreet("North Pole Street 1");
                System.out.println(santa.getName());
                System.out.println(santa.getStreet());

                mo.setName("mo");
                System.out.println(mo.getName());
                System.out.println(santa.getName());
                System.out.println(garfield.getName());
                System.out.println(santa.getStreet());
        }

        public static class Person implements Named, Address {

        }

        public static class Pet implements Named {

        }

        public static interface Named extends Stateful {
                static class State implements Stateful.State<Named> {
                        private String name;
                }

                public default void setName(String name) {
                        $(State.class).name = name;
                }

                public default String getName() {
                        return $(State.class).name;
                }
        }

        public static interface Address extends Stateful {
                static class State implements Stateful.State<Address> {
                        private String street;
                }

                public default void setStreet(String street) {
                        $(State.class).street = street;
                }

                public default String getStreet() {
                        return $(State.class).street;
                }
        }
        /************************************************************************************/

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T00:07:55.267

在[这个相关的问题](https://stackoverflow.com/questions/3556652/how-do-java-interfaces-simulate-multiple-inheritance)中，杰伊提供了一个答案。区别在于指定实现与接口。

仅当两个函数具有相同名称时，才会出现实现问题。这是因为对于“我使用什么 f() 实现？”这个问题没有明显的选择。具有多种实现。

具有相同功能名称的两个接口不会出现此问题，因为它不需要进行此选择。相反，您只需要实现您自己的手头功能版本。

例如，我们可以看一个[允许多重继承的对应物——C++](http://www.learncpp.com/cpp-tutorial/117-multiple-inheritance/)。这个链接很好地解释了事情，并提供了一些代码/图像示例。需要注意的一件事是，由于您需要明确定义函数所属的类，因此您可以轻松地缓解 C++ 中的问题。

然而，在 Java 中，我们真的不必这样做（因为只有附加到对象的方法，如果你愿意的话），因此没有方法来确定调用的范围。我们必须引用父类的唯一选项是使用`super`关键字或使用`static`函数。因此，除非对系统进行额外的更改，否则在 Java 中将没有明确的选择来解决此问题，而收益甚微。

# iphone - 如何允许用户每天只使用一次应用程序？

> ID：13389392
> 
> 赞同：1
> 
> 时间：2012-11-14T23:48:50.560
> 
> 标签：iphone, ios, timing

我是一名新程序员，并且已经搜索过这个答案，但我认为我可能没有使用正确的术语。

我想要做的是允许用户在 24 小时内只使用一次我的应用程序，这是一个游戏。如果他们尝试在 24 小时之前玩游戏，我想要一个提醒，告诉他们稍后再回来。我已经看到其他给你“积分”的游戏这样做了，但似乎找不到代码。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:51:55.810

使用`NSDate`类获取当前日期 ( `[NSDate date]`)，然后使用`NSUserDefaults`类保存此值。打开应用程序时，检索该值，然后将旧日期与当前日期进行比较。如果已经过了一天，请不要做任何事情。否则，显示警报。

```
//setting the date
[[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"Date"];

//retrieve date
NSDate *date = [[NSUserDefaults standardUserDefaults] objectForKey:@"Date"];

//now compare the dates 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T00:16:01.363

同意上述回复：坚持一个NSDate。如果您对重新安装时可能违反的约束没有意见，那么 NSUserDefaults 最有意义。

您需要问和回答的另一个问题是“运行”一次的真正含义。这是否意味着启动一次并运行很多，或者只激活一次，或者其他什么？假设用户玩了一分钟然后接到电话（那是一个 didFinishLaunching 和两个 didBecomeActive），那么您如何执行？

What you might really need is a total play time that cannot exceed some value over the trailing 24 hours.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T23:52:18.943

您的应用程序打开，您将当前日期/时间设置为游戏开始的时间。*每次应用程序打开时，您都会检查您是否已超过保存的日期/时间 24 小时，如果没有，则将它们带到另一个视图或仅显示一条消息，告诉他们在_*小时后回来。

查看将 NSDates 保存到 NSUserDefaults 以及如何比较 NSDates，您应该能够相对轻松地完成此操作。

这种方法的问题是他们能够删除应用程序并重新安装它，这将重置您的 NSUserDefaults 或该应用程序的任何其他本地存储。为了解决这个问题，您必须在服务器上创建用户帐户（可能是您看到的其他应用程序所做的），或者至少为他们的设备发送一个唯一 ID 并在服务器端处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T23:54:58.180

您可以在[此处](https://stackoverflow.com/questions/13308313/ios-timer-outside-application/13308385#13308385)查看我的回答以获取类似的问题。

无论如何，如果用户在设备上手动重新安装应用程序或更改日期，它不会阻止。为了实现您的需求，最好保留并验证用户实际通过您的外部服务器运行应用程序的日期。也许您可以在服务器端使用 php 并通过 NSURLConnection POST 请求连接到它。

# apache - apache 重写为 lighttpd 重写

> ID：13389394
> 
> 赞同：1
> 
> 时间：2012-11-14T23:48:54.490
> 
> 标签：apache, url-rewriting, lighttpd

我在我们的 Apache 网络服务器中使用这个规则：

```
RewriteCond %{REQUEST_FILENAME} !-*\.jpg$                                                                                                                                                                
RewriteCond %{REQUEST_FILENAME} !-f                                                                                                                                                                      
RewriteCond %{REQUEST_FILENAME} !-d                                                                                                                                                                      
RewriteRule ^(.*)$ /index.php?req=$1 [QSA] 
```

你能帮我吗，我怎样才能将它迁移到 1.4.20 lighttpd+ [url_rewrite-ifnotfile](http://redmine.lighttpd.net/projects/lighttpd/repository/revisions/2647)？

[我在这里](https://stackoverflow.com/questions/9613979/apache-rewrite-rule-to-lighttpd)和[这里](http://redmine.lighttpd.net/projects/1/wiki/Docs_ModRewrite)发现了类似的东西，但我不能使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:18:18.330

根据我[在这里](https://stackoverflow.com/questions/9613979/apache-rewrite-rule-to-lighttpd)的回复， 请使用以下内容：（我已经修改了重写以适应您的要求）：

```
url.rewrite-if-not-file = (
    "^(.*)$" => "/index.php?req=$1"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:14:11.300

从 apache 设置来看，在这种情况下，您最好的选择是升级到 1.4.24+，否则这些重写规则将开始变得复杂，因为您需要指向存在的每个文件。例如这样的事情：

```
url.rewrite = (
    "^/index.php$" => "/index.php",
    "^/page1.php$" => "/page1.php",
    "^/page2.php$" => "/page2.php",
    .
    .
    .
    "^/pageN.php$" => "/page.php",
    .
    .
    .
    "^/uploads/uploadedfile.pdf$" => "/uploads/uploadedfile.pdf",
    .
    .
    .
    "(.*)" => "/index.php?req=$1"
) 
```

如果您的应用程序没有很多用户需要直接访问的文件，您可以如上所述解决此问题。但是，一旦您开始处理上传的内容或任何动态内容，您就会遇到问题。

就我个人而言，我过去总是通过添加任何我不想轻松重写的内容到子目录中来避免此类问题，然后您可以使用通配符（这在您的情况下可能有效也可能无效），如下所示：

```
url.rewrite = (
    "^/content/(.*)$" => "/content/$1",
    "(.*)" => "/index.php?req=$1"
) 
```

如果以上都没有任何用处，您可以使用 php 脚本来提供所有动态内容，但这会带来一系列问题和不灵活。例如：

```
<?php

    $fullPath = '/path/to/files/' . $_GET['filename'];

    if( file_exists($fullPath) ){

        // Parse Info / Get Extension 
        $fsize = filesize($fullPath);
        $path_parts = pathinfo($fullPath);
        $ext = strtolower($path_parts["extension"]);

        // Determine Content Type 
        switch ($ext) {
            case "pdf": $ctype="application/pdf"; break;
            case "exe": $ctype="application/octet-stream"; break;
            case "zip": $ctype="application/zip"; break;
            case "doc": $ctype="application/msword"; break;
            case "xls": $ctype="application/vnd.ms-excel"; break;
            case "ppt": $ctype="application/vnd.ms-powerpoint"; break;
            case "gif": $ctype="image/gif"; break;
            case "png": $ctype="image/png"; break;
            case "jpeg":
            case "jpg": $ctype="image/jpg"; break;
            default: $ctype="application/force-download";
        }

        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: private",false);
        header("Content-Type: $ctype");
        header("Content-Disposition: attachment; filename=\"".basename($fullPath)."\";" );
        header("Content-Transfer-Encoding: binary");
        header("Content-Length: ".$fsize);

    } else
        exit('File Not Found');
?> 
```

希望有帮助

# java - 添加两个双精度值导致值等于java中的第二个双精度值

> ID：13389395
> 
> 赞同：1
> 
> 时间：2012-11-14T23:48:54.240
> 
> 标签：java, double, add, conditional-statements

例如以下一个：

```
 double b = 1.0; 
        int v[] = {1,1,1,0,1,0,1}; 
        double a[] = {0.001953125, 0.00390625, 0.0078125, 0.015625, 0.03125, 0.0625, -0.125};
        System.out.println(b);
        for(int i = 0; i <7; i++)
        {
            b = b + v[i] == 0 ? a[i] : -a[i];
            System.out.println(b);
        } 
```

给出：

```
1.0
-0.001953125
-0.00390625
-0.0078125
-0.015625
-0.03125
-0.0625
0.125 
```

和这个：

```
 double b = 1.0; 
        int v[] = {1,1,1,0,1,0,1}; 
        double a[] = {0.001953125, 0.00390625, 0.0078125, 0.015625, 0.03125, 0.0625, -0.125};
        System.out.println(b);
        for(int i = 0; i <7; i++)
        {
            b = b + (v[i] == 0 ? a[i] : -a[i]);
            System.out.println(b);
        } 
```

给出：

```
1.0
0.998046875
0.994140625
0.986328125
1.001953125
0.970703125
1.033203125
1.158203125 
```

这是否意味着在第一个（不带括号）中首先将b的值更改为0或直接设置为a[i]的值？！

使用 ？对于 if/else 另外意味着我必须在条件/if/else 部分周围使用括号？！谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T23:51:18.577

由于[运算符的优先级，](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)这`b + v[i] == 0 ? a[i] : -a[i]`被解析为

```
(b + v[i]) == 0 ? a[i] : -a[i] 
```

由于`+`具有比 更高的优先级`==`，因此表达式的语义与您认为的不同。

您可以通过使用括号来强制执行评估顺序或使用`+=`在这种特定情况下使问题消失的运算符来避免该问题。

# javascript - 找出数组元素出现的次数

> ID：13389398
> 
> 赞同：21
> 
> 时间：2012-11-14T23:49:02.027
> 
> 标签：javascript, arrays

我是 JavaScript 新手，我已经学习和练习了大约 3 个月，希望能在这个话题上得到一些帮助。我正在做一个扑克游戏，我想做的是确定我是否有一对、两对、三对、四对或满堂。

例如，在 中`[1, 2, 3, 4, 4, 4, 3]`，1 出现 1 次，4 出现 3 次，以此类推。

我怎么可能让我的计算机告诉我一个数组元素出现了多少次？

解决了，这是最终产品。

```
 <script type="text/javascript">
    var deck = [];
    var cards = [];
    var convertedcards = [];
    var kinds = [];
    var phase = 1;
    var displaycard = [];
    var options = 0;
    var endgame = false;

    // Fill Deck //
    for(i = 0; i < 52; i++){
        deck[deck.length] = i;          
    }

    // Distribute Cards //
    for(i = 0; i < 7; i++){
        cards[cards.length] = Number(Math.floor(Math.random() * 52));
        if(deck.indexOf(cards[cards.length - 1]) === -1){
            cards.splice(cards.length - 1, cards.length);
            i = i - 1;
        }else{
            deck[cards[cards.length - 1]] = "|";
        }
    }

    // Convert Cards //
    for(i = 0; i < 7; i++){
        convertedcards[i] = (cards[i] % 13) + 1;
    }

    // Cards Kind //
    for(i = 0; i < 7; i++){
        if(cards[i] < 13){
            kinds[kinds.length] = "H";
        }else if(cards[i] < 27 && cards[i] > 12){
            kinds[kinds.length] = "C";
        }else if(cards[i] < 40 && cards[i] > 26){
            kinds[kinds.length] = "D";
        }else{
            kinds[kinds.length] = "S";
        }
    }

    // Card Display //
    for(i = 0; i < 7; i++){
        displaycard[i] = convertedcards[i] + kinds[i];
    }

    // Hand Strenght //
    var handstrenght = function(){
        var usedcards = [];
        var count = 0;
        var pairs = [];
        for(i = 0, a = 1; i < 7; a++){
            if(convertedcards[i] === convertedcards[a] && a < 7 && usedcards[i] != "|"){
                pairs[pairs.length] = convertedcards[i];
                usedcards[a] = "|";
            }else if(a > 6){
                i = i + 1;
                a = i;
            }
        }

        // Flush >.< //
        var flush = false;
        for(i = 0, a = 1; i < 7; i++, a++){
            if(kinds[i] === kinds[a] && kinds[i] != undefined){
                count++;
                if(a >= 6 && count >= 5){
                    flush = true;
                    count = 0;
                }else if(a >= 6 && count < 5){
                    count = 0;
                }
            }
        }
        // Straight >.< //
        var straight = false;
        convertedcards = convertedcards.sort(function(a,b){return a-b});
        if(convertedcards[2] > 10 && convertedcards[3] > 10 && convertedcards[4] > 10){
            convertedcards[0] = 14;
            convertedcards = convertedcards.sort(function(a,b){return a-b});
        }
        alert(convertedcards);
        if(convertedcards[0] + 1 === convertedcards[1] && convertedcards[1] + 1 === convertedcards[2] && convertedcards[2] + 1 === convertedcards[3] && convertedcards[3] + 1 === convertedcards[4]){
            straight = true;
        }else if(convertedcards[1] + 1 === convertedcards[2] && convertedcards[2] + 1 === convertedcards[3] && convertedcards[3] + 1 === convertedcards[4] && convertedcards[4] + 1 === convertedcards[5]){
            straight = true;
        }else if(convertedcards[2] + 1 === convertedcards[3] && convertedcards[3] + 1 === convertedcards[4] && convertedcards[4] + 1 === convertedcards[5] && convertedcards[5] + 1 === convertedcards[6]){
            straight = true;
        }
        // Royal Flush, Straight Flush, Flush, Straight >.< //
        var royalflush = false;
        if(straight === true && flush === true && convertedcards[6] === 14){
            royalflush = true;
            alert("You have a Royal Flush");
        }
        else if(straight === true && flush === true && royalflush === false){
            alert("You have a straight flush");
        }else if(straight === true && flush === false){
            alert("You have a straight");
        }else if(straight === false && flush === true){
            alert("You have a flush");
        }
        // Full House >.< //
        if(pairs[0] === pairs[1] && pairs[1] != pairs[2] && pairs.length >= 3){
            fullhouse = true;
            alert("You have a fullhouse");
        }else if(pairs[0] != pairs[1] && pairs[1] === pairs[2] && pairs.length >= 3){
            fullhouse = true;
            alert("You have a fullhouse");
        }else if(pairs[0] != pairs[1] && pairs[1] != pairs[2] && pairs[2] === pairs[3] && pairs.length >= 3){
            fullhouse = true;
            alert("You have a fullhouse");
        }
        // Four of a kind >.< //
        else if(pairs[0] === pairs[1] && pairs[1] === pairs[2] && pairs.length > 0){
            alert("You have four of a kind");
        }
        // Three of a kind >.< //
        else if(pairs[0] === pairs[1] && flush === false && straight === false && pairs.length === 2){
            alert("You have three of a kind");
        }
        // Double Pair >.< //
        else if(pairs[0] != pairs[1] && flush === false && straight === false && pairs.length > 1){
            alert("You have a double pair");
        }
        // Pair >.< //
        else if(pairs.length === 1 && flush === false && straight === false && pairs.length === 1 ){
            alert("You have a pair");
        }
        alert(pairs);
    };
    while(endgame === false){
        if(phase === 1){
            options = Number(prompt("Your hand: " + displaycard[0] + " " + displaycard[1] + "\n\n" + "1\. Check" + "\n" + "2\. Fold"));
        }else if(phase === 2){
            options = Number(prompt("Your hand: " + displaycard[0] + " " + displaycard[1] + "\n\n" + displaycard[2] + " " + displaycard[3] + " " + displaycard[4] + "\n\n" + "1\. Check" + "\n" + "2\. Fold"));
        }else if(phase === 3){
            options = Number(prompt("Your hand: " + displaycard[0] + " " + displaycard[1] + "\n\n" + displaycard[2] + " " + displaycard[3] + " " + displaycard[4] + " " + displaycard[5] + "\n\n" + "1\. Check" + "\n" + "2\. Fold"));
        }else if(phase === 4){
            options = Number(prompt("Your hand: " + displaycard[0] + " " + displaycard[1] + "\n\n" + displaycard[2] + " " + displaycard[3] + " " + displaycard[4] + " " + displaycard[5] + " " + displaycard[6] + "\n\n" + "1\. Check" + "\n" + "2\. Fold"));
        }
        switch(options){
            case 1:
                    if(phase === 5){
                        handstrenght();
                        endgame = true;
                    }else{
                        phase++;
                    }
                    break;
            case 2:
                    endgame = true;
                    break;
            default:
                    endgame = true;
                    break;
        }
    }

</script> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-14T23:55:47.390

*   为总计数保留一个变量
*   遍历数组并检查当前值是否与您要查找的值相同，如果是，则将总计数加一
*   循环后，总计数包含您要查找的数字在数组中的次数

显示您的代码，我们可以帮助您找出问题所在

这是一个简单的实现（因为您没有不起作用的代码）

```
var list = [2, 1, 4, 2, 1, 1, 4, 5];  

function countInArray(array, what) {
    var count = 0;
    for (var i = 0; i < array.length; i++) {
        if (array[i] === what) {
            count++;
        }
    }
    return count;
}

countInArray(list, 2); // returns 2
countInArray(list, 1); // returns 3 
```

countInArray 也可以实现为

```
function countInArray(array, what) {
    return array.filter(item => item == what).length;
} 
```

更优雅，但可能不如性能，因为它必须创建一个新数组。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-01-30T17:33:08.473

用`filter`and`length`看起来很简单，但是对内存有很大的浪费。

如果你想使用漂亮的数组方法，合适的方法是`reduce`：

```
function countInArray(array, value) {
  return array.reduce((n, x) => n + (x === value), 0);
}
console.log(countInArray([1,2,3,4,4,4,3], 4)); // 3
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T23:56:37.123

出色地..

```
var a = [5, 5, 5, 2, 2, 2, 2, 2, 9, 4].reduce(function (acc, curr) {
  if (typeof acc[curr] == 'undefined') {
    acc[curr] = 1;
  } else {
    acc[curr] += 1;
  }

  return acc;
}, {});

// a == {2: 5, 4: 1, 5: 3, 9: 1} 
```

从这里开始： [计算 JavaScript 数组元素的出现次数](https://stackoverflow.com/questions/5667888/counting-occurences-of-javascript-array-elements)

或者你也可以在那里找到其他解决方案..

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T00:57:18.567

当定位到足够新的浏览器时，您可以使用[`filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter). （MDN 页面还为该函数提供了一个 polyfill。）

```
var items = [1, 2, 3, 4, 4, 4, 3];
var fours = items.filter(function(it) {return it === 4;});
var result = fours.length; 
```

您甚至可以像这样抽象过滤函数：

```
// Creates a new function that returns true if the parameter passed to it is 
// equal to `x`
function equal_func(x) {
    return function(it) {
        return it === x;
    }
}
//...
var result = items.filter(equal_func(4)).length; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T00:36:16.087

这是胡安回答的一个实现：

```
function count( list, x ) {

    for ( var l = list.length, c = 0; l--; ) {

        if ( list[ l ] === x ) {

            c++;
        }
    }

    return c;

} 
```

更短：

```
function count( list, x ) {

    for ( var l = list.length, c = 0; l--; list[ l ] === x && c++ );

    return c;

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-06T18:48:32.860

这是一个使用 Array Object Prototype 的实现，并且具有额外级别的功能，如果没有提供搜索项，则返回长度：

```
Array.prototype.count = function(lit = false) {
    if ( !lit ) { return this.length}
    else {
        var count = 0;
        for ( var i=0; i < this.length; i++ ) {
            if ( lit == this[i] ){
                count++
            }
        }
        return count;
    }
} 
```

* * *

这有一个非常简单的用法，如下：

```
var count = [1,2,3,4,4].count(4);  // Returns 2
var count = [1,2,3,4,4].count();   // Without first parameter returns 5 
```

# proxy-server - 在开发环境中切换 hosts 文件

> ID：13389401
> 
> 赞同：3
> 
> 时间：2012-11-14T23:49:07.127
> 
> 标签：proxy-server, hosts-file, web-development-server

在开发网站（使用 win7）时，我发现自己经常更改主机文件中的 IP 地址。我的机器上有一个开发环境，测试服务器上有代码，登台服务器上有代码，实时服务器上有代码。我全天多次切换这些服务器。我通常通过注释掉大量主机条目来管理此问题，取消注释我要使用的条目，然后使用 ipconfig /flushdns 最后重新启动我的浏览器。这样的皮塔！

我已经读过，在本地安装代理服务器将在此过程中采取几个步骤。这种情况下最好的代理服务器（在win7上）是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:33:15.607

您可以做的是创建 3 个主机文件；hosts_1、hosts_2 和 hosts_3，在 hosts 目录中；C:\Windows\System32\Drivers\Etc，分别对应。测试，分期和现场设置。然后，您可以编写一个批处理文件 (*.bat)，它使用您选择的主机设置覆盖真实的主机文件，例如使用用户提示。

```
@echo off
set /p UserInputPath= Which hosts file? (1=test, 2=staging, 3=live)
cd C:\Windows\System32\Drivers\Etc
xcopy /y hosts_%UserInputPath% hosts
ipconfig /flushdns 
```

将此示例与一些用于终止浏览器进程、重新启动它等的命令结合起来。谷歌搜索“批处理 + 进程”可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:28:42.310

您可以设置您的主机文件以将域指向 LAN ip（只是为了防止数据包到达某处以防您破坏某些东西），然后您需要一个动态更改目标的代理。您正在寻找的是[反向代理](https://en.wikipedia.org/wiki/Reverse_proxy)，例如 Squid 或 Varnish。不幸的是，我不知道如何设置这样的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T16:39:34.060

您可以使用[http://hostprofiles.codeplex.com/](http://hostprofiles.codeplex.com/)非常方便。

问候吉斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T19:16:59.100

将您的普通主机文件复制到 hosts.normal、hosts.testing、hosts.staging 和 hosts.live。对于每个文件都有一个 bat 文件，该文件会删除当前主机并将相应的 hosts.* 文件复制到主机中。然后你可以运行选择的批处理文件来切换配置。

此外，将命令提示符固定到任务栏。这样，您只需右键单击该图标，您应该会在上下文菜单中看到批处理文件。固定它们，您将在任务栏中获得这些配置的快速访问菜单。

但否则我只会使用 web.config 转换来处理这种情况。

# jquery - 缓慢滑动页面背景图片

> ID：13389406
> 
> 赞同：1
> 
> 时间：2012-11-14T23:49:26.907
> 
> 标签：jquery, css, css-transitions

我正在尝试使用背景图像制作一个安静的效果。我试图让它非常缓慢地向左移动，然后在看到整个图像后停止。

此刻图像根本不动。

```
<!DOCTYPE html>
<html>
<head>
<style> 
body
{
width:100%;
height:100px;
top:0;
background-image:url('http://upload.wikimedia.org/wikipedia/commons/0/0c/Yercaud_scenery.jpg');
position:relative;
-webkit-animation:mymove 4s infinite; /* Safari and Chrome */
}

@-webkit-keyframes mymove /* Safari and Chrome */
{
0%   {top:0px;left:-70px;}
25%  {top:0px;left:-50px;}
75%  {top:0px;left:30px;}
100% {top:0px;left:31px}
}

</style>
</head>
<body>

<p>here is some sample text</p>

</body>
</html> 
```

任何帮助将不胜感激。我不一定只使用 css，但如果可能的话，我会更喜欢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:40:05.890

我想要更轻更简单的东西，而不是通过 css 使用关键帧。我似乎找到了一个涉及使用几行 jquery & css 的解决方案。

Javascript：

```
<script>
$(function(){
$("body").animate({backgroundPositionX : "-450"}, 25000);
});
</script> 
```

CSS：

```
<style type="text/css">
  body {
    background-image: url('../imgs/bg-image.jpg');
    background-repeat:repeat-x;
    }
</style> 
```

# android - ActionBarSherlock + 拆分操作栏菜单 + 带有“withText”的项目不显示文本。怎么修？

> ID：13389407
> 
> 赞同：2
> 
> 时间：2012-11-14T23:49:38.103
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock，并且正在尝试向 ActionBar 添加选项菜单。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/menu_prev"
        android:title="@string/menu_previous"
        android:icon="@drawable/left_navigation"
        android:showAsAction="always|withText" />

    <item android:id="@+id/menu_next"
        android:title="@string/menu_next"
        android:icon="@drawable/right_navigation"
        android:showAsAction="always|withText" />

</menu> 
```

drawable-mdpi 目录中的图标为 32x32 像素。当 ActionBar 被拆分（纵向）时，图标显示但没有文本显示（虽然空间很大）。长按图标 祝标题。当 ActionBar 未拆分（横向）时，图标和文本都按预期显示。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);

    return super.onCreateOptionsMenu(menu);
} 
```

Menu、MenuInflater 和 getSupportMenuInflater() 都使用 ActionBarSherlock 实现。

清单中的“应用程序”声明：

```
android:uiOptions="splitActionBarWhenNarrow" 
```

我该怎么做才能让它在纵向时显示每个项目的标题？

编辑：可能相关的是我正在运行 Android 4.0.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:32:38.597

如果您使用的是 Android >= 3.0 ABS 使用操作栏的系统实现，因此您看到的行为是正确的。请参阅@CommonsWare 对问题的评论，了解为什么会出现这种行为。

# css - 垂直对齐自动换行标签旁边的输入并支持非自动换行标签？

> ID：13389408
> 
> 赞同：0
> 
> 时间：2012-11-14T23:49:39.093
> 
> 标签：css, html

[http://jsfiddle.net/9ctTD/18/](http://jsfiddle.net/9ctTD/18/)

我有一些标签可能会或可能不会自动换行。当标签自动换行时，我的输入元素垂直对齐到包含 div 的底部。我希望我的输入元素与自动换行元素的中心对齐。

我能够通过使用来实现这一点`vertical-align: 50%`，但这具有破坏非自动换行标签/输入对对齐的负面影响。

我查看了[有关对齐的 StackOverflow 帖子](https://stackoverflow.com/questions/4466596/css-how-to-align-vertically-a-label-and-input-inside-a-div)，但它似乎解决了与我遇到的问题不同的问题。

任何人都知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:58:33.383

```
label {
  max-width: 80px;
  vertical-align:middle;
} 
```

​</p>

# nginx - 用 nginx 建立一个网络堆栈？

> ID：13389409
> 
> 赞同：0
> 
> 时间：2012-11-14T23:49:40.430
> 
> 标签：nginx, amazon-web-services, ip-address, load-balancing

我有一个专用服务器，其 nginx Web 服务器位于英国数据中心，ngnix 充当前端服务器，然后将用户引导到我在美国的 aws 上拥有的其他实例。客户端会看到什么 IP 地址，ngnix 前端服务器（这是所需的结果），还是客户端仍然知道位于美国的实例或服务器 IP 地址？

PS。nginx 在这里充当负载均衡器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:58:19.413

通常，用户连接到“www.yoursite.com”，然后在 DNS 中进行查找。

假设只有一个 DNS 条目（对应于您的 nginx 前端），那么就这些用户而言，他们只与那一台机器交谈。

有时人们使用循环 DNS，其中多台机器对应一个给定的主机名。不过，大概你会知道你是否正在这样做（：

您可以通过在连接时跟踪您的流量来确认这一点。也许使用[WireShark](http://www.wireshark.org/)？

# jquery - 鼠标悬停时显示谷歌饼图

> ID：13389415
> 
> 赞同：1
> 
> 时间：2012-11-14T23:50:29.010
> 
> 标签：jquery, css, google-visualization

我想在鼠标悬停某个元素时显示我的图表。一切正常，除了我无法停止 slideToggle 返回其原始位置。

一旦鼠标“超出目标”，它就会收缩，但如果鼠标仍在图表上，它应该会继续出现。

```
$(document).ready(function () {
            $("#test").hover(function () {
                $("#chart_div").slideToggle('slow');
            });
        }); 
```

我为这个问题做了一个[jsFiddle](http://jsfiddle.net/BrOSs/FDpd4/)，而不是在这里粘贴整个代码。

编辑

[这](http://jsfiddle.net/rathoreahsan/SGUbC/)是一个目标示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:17:09.393

您可以通过定义 mouseenter 和 mouseleave 事件来做到这一点，如下例所示：

```
$(document).ready(function() {
    $("#test").mouseenter(function() {
        $("#chart_div").show('slow');
    });
    $(".outerClass").mouseleave(function() {
        if(!$('#chart_div').is(':hover')) {
            $("#chart_div").hide('slow');
        }
    });
});​ 
```

您的 html 结构应类似于此示例：

```
<div class="outerClass">
    <div id="test"><strong>TEST.</strong></div>
    <div id="chart_div"></div>
</div>
<div id="another_div">here is out of the pie div</div> 
```

[现场示例](http://jsfiddle.net/FDpd4/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:06:22.113

最好的解决方案是将其更改为`.click()`

但是，如果您需要在将鼠标悬停 TEST 移动时显示图表并在将鼠标移回测试时隐藏图表，那么您`.mouseenter()`

```
$(document).ready(function() {
    $("#test").mouseenter(function() {
        $("#chart_div").slideToggle('slow');
    });
});​ 
```

[http://jsfiddle.net/fnTXQ/](http://jsfiddle.net/fnTXQ/)

# actionscript-3 - 创建类时，我似乎无法让一个对象拉另一个变量对象？

> ID：13389421
> 
> 赞同：0
> 
> 时间：2012-11-14T23:51:16.683
> 
> 标签：actionscript-3

我正在尝试创建两个 var 一个 var 是一个对象，它在同一个类中获取另一个对象

```
package plus1 
{

public class ScreenInfo 
{

    //setting a button to 0 means that it is disabled 

    public var object:Object = { button1:_Object2 };

    public var _Object2:Object = { name:"test name" };                          

    public function ScreenInfo() 
    {

    }

}

} 
```

但每次我这样做

```
var screens:ScreenInfo = new ScreenInfo(); 
var obj:Object = screens.object["button1"] 
```

该对象是空的，为什么它不应该将第二个对象传递给我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:57:29.297

因为您使用的是变量初始值设定项，所以您不能安全地使用对其他成员的引用。你怎么知道`_Object2`当你创建时它存在`object`？

`object`我建议你在你的类的构造函数中移动实例化：

```
public var object:Object;
public var _Object2:Object = { name:"test name" };

public function ScreenInfo(){
    this.object = {button1:_Object2};
} 
```

# php - MYSQL 表不会更新

> ID：13389434
> 
> 赞同：0
> 
> 时间：2012-11-14T23:52:27.140
> 
> 标签：php

我正在构建一个个人资料图片系统，由于某种原因，我的表似乎无法使用 MYSQL UPDATE 查询。下面你应该只选择你的图像并单击上传，它将图像移动到文件夹而不是目录到数据库。

请帮忙：

```
 if (file_exists("userdata/profile_pics/".@$_FILES["profilepic"]["name"]))
     {
echo @$_FILES["profilepic"]["name"]." Already exists";
   }
   else
    {
   move_uploaded_file(@$_FILES["profilepic"]["tmp_name"],"userdata/profile_pics/".$_FILES["profilepic"]["name"]);
 echo "Uploaded and stored in: userdata/profile_pics/".@$_FILES["profilepic"]["name"];
$profile_pic_name = @$_FILES["profilepic"]["name"];
$profile_pic_query = mysql_query("UPDATE users SET profile_pic='$profile_pic_name' WHERE username={$_SESSION['user_login']}");

  }
  }
  else
   {
  echo "Invailid File! Your image must be no larger than 1MB and it must be either a .jpg, .jpeg, .png or .gif";
   }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:56:29.330

试试这个：将引号添加到用户名变量

```
 $username = $_SESSION['user_login']; 
 "...WHERE username='$username'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:57:33.457

尝试将会话变量放在引号中`username='".$_SESSION['user_login']."'`

# java - 即时更新本地运行的基本 cloudbees java 应用程序

> ID：13389435
> 
> 赞同：1
> 
> 时间：2012-11-14T23:52:34.403
> 
> 标签：java, web-applications, cloudbees

尝试运行基本的 java 应用程序（backbone.js 和 jax-rs）我惊喜地发现在 src/main 中修改 js 或 html 文件不需要重新构建应用程序。只需在浏览器中刷新它就足以更新应用程序。

但是更改 java 文件，我找不到如何在本地更新应用程序。

使用 Eclipse 它会自动编译到目标/类中，但是应用程序不会在浏览器中更新。我找不到任何bees 命令导致更新。我也没有看到编译命令。

杀死正在运行的 tomcat 和 'bees run' 是诀窍，但问题是，在基本的 Java Web 应用程序的情况下是否可以进行即时更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:47:31.490

我不确定如何使用普通的 Java 应用程序来做到这一点。一种选择是使用内置自动重新加载功能的 Playframework，并且在 CloudBees 上得到很好的支持。[http://wiki.cloudbees.com/bin/view/RUN/Playframework](http://wiki.cloudbees.com/bin/view/RUN/Playframework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:48:41.300

如果您希望在正在运行的应用程序中重新加载 Java 类，则需要使用 JavaRebel 或 Javeleon 之类的东西。

# javascript - 使用 if 语句切换禁用

> ID：13389436
> 
> 赞同：0
> 
> 时间：2012-11-14T23:52:38.210
> 
> 标签：javascript, html, if-statement, radio-button

所以我在禁用这个东西时遇到了麻烦。我正在尝试使用 IF 语句和单选按钮来禁用。我试过没有如果没有成功。如果可以的话请帮忙！我的代码如下。

```
<html>
<h1>Convert Temperature</h1>
<body>
<input id="example" type="radio" onClick="toggle('example', 'disableMe')" name="Radio" value="Radio"> 
From Fahrenheit to Celsius </br>
<input id="example" type="radio" onClick="toggle('example', 'disableMe')" name="Radio" value="Radio"> From Celsius to Fahrenheit
</br>
</br>
</br>
<form name="converter">
Celsius: <input id="disableMe" type="text" name="celsius" onChange="CelsiusConverter()"><br />
Fahrenheit: <input id="disableMe" type="text" name="fahrenheit" onChange="FahrenheitConverter()"><br />
<input type="button" value="Convert!" />
</form>
</body>
<script language="JavaScript">
<!--
function CelsiusConverter(){
document.converter.fahrenheit.value = (document.converter.celsius.value * 9 / 5) + 32
}
function FahrenheitConverter(){
document.converter.celsius.value = (document.converter.fahrenheit.value - 32) * 5 / 9
}
//-->
function toggle(radioID, toggleID) { 
var radio = document.getElementById(radioID); 
var toggle = document.getElementById(toggleID); 
updateToggle = radio.checked ? toggle.disabled=true : toggle.disabled=false;

if (radioID = checked)
{
toggle.disable=true;
}
}
</script>
</html> 
```

我知道我在那里的 IF 看起来不正确，需要修复一些东西，但我不知道如何！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:57:07.683

```
 if (radioID = checked) {
toggle.disable=true;
} 
```

应该

```
if(radioID == checked) {
toggle.disable = true;
} 
```

因为您没有将checked 的值分配给radioID (=)，而是比较两者(==)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:11:05.810

代码存在一些问题。这是对我有用的一个，并进行了一些简化：

首先，更改您的控件，使它们具有不同的 ID 和 onClick：

```
<input id="example1" type="radio" onClick="toggle(1)" name="Radio" value="Radio"> 
...
<input id="example2" type="radio" onClick="toggle(2)" name="Radio" value="Radio">
...
<input id="disableMe1" type="text" name="celsius" onChange="CelsiusConverter()">
...
<input id="disableMe2" type="text" name="fahrenheit" onChange="FahrenheitConverter()">
... 
```

最后，将其编码为您的切换功能：

```
function toggle(id) { 
var base = 'disableMe';
var disable = document.getElementById(base+id); 
var enable = document.getElementById(base+(id == 1 ? 2 : 1));
disable.disabled = true;
enable.disabled = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:13:15.093

*   为了挑剔，您应该更喜欢 === 到 == 进行比较。
*   您还应该使 id 在您的页面中独一无二。
*   更改`<script language="javscript"`为`<script type="text/javascript"`
*   您认为`checked`比较中的价值是多少？
*   jQuery会在这里帮助你

# .net - 用于在 vb.net 和 vs2012 中解压缩 RAR 存档的 DLL 文件

> ID：13389440
> 
> 赞同：3
> 
> 时间：2012-11-14T23:53:00.760
> 
> 标签：.net, vb.net, dll, visual-studio-2012, rar

在尝试解压缩 RAR 存档时，我需要一些有关我的 vb.net 编程的帮助。我在 VB.NET 中有来自 Chilkat 的 VS2012 的最新版本，但它不包含`Chilkat.RAR`方法。我曾尝试使用 unrar.dll v3.9.3，但我无法将引用添加到我的项目，因为它与 VS2012 不兼容。它说 DLL 不是一个有效的程序集，并检查并确保它是一个有效的程序集。我只需要可以解压缩 RAR 存档的东西（不需要密码方法，最好只有 1 个文件，而不是目录中的所有文件）。这必须与 .net framework 4.0 AND/OR 4.5 兼容，并且必须能够在 Microsoft Visual Studio 2012 Pro（VB.NET 环境）中引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T06:00:44.813

RARLAB (http://www.rarlab.com/rar_add.htm) 中的 Unrar.dll 是一个本地库，因此您不能将其作为参考添加到 VB.NET 项目中。您必须使用 Platform Invoke 来使用它的 API，这就是 Chilkat 的 RAR 库所基于的。

如果你想要一个托管库，你可以查看[http://sharpcompress.codeplex.com](http://sharpcompress.codeplex.com)。

Sevenzipsharp.codeplex.com 基于 7-zip 的原生库，因此声称支持 RAR 格式。

dotnetzip.codeplex.com 是一个托管 ZIP 库，它不支持 RAR，@Steve 不应在评论中说明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T03:56:02.620

SharpCompress 是一个用于 .NET/Mono/Silverlight/WP7 的压缩库，它可以解压缩、解压缩、解压缩、解压缩 unbzip2 和 ungzip，具有只进读取和文件随机访问 API。实现了对 zip/tar/bzip2/gzip 的写支持。

主要功能是支持不可搜索的流，因此可以动态处理大文件（即下载流）。

现在在 GitHub 上：[https ://github.com/adamhathcock/sharpcompress](https://github.com/adamhathcock/sharpcompress)

# java - 尝试在表中显示数据库的全部内容时出现 JSP 错误

> ID：13389442
> 
> 赞同：0
> 
> 时间：2012-11-14T23:53:12.507
> 
> 标签：java, jsp, jdbc

基本上我正在尝试遍历我的数据库并显示里面的所有信息。我理解这个概念，但我的实现显然是错误的，因为 Tomcat 不断给我以下错误：

```
Root cause:

javax.servlet.ServletException: Operation not allowed after ResultSet closed 
```

任何帮助将非常感激。我知道问题出在我的 while 循环上，但我的知识有限，我无法发现我需要进行的更改。请随时更改代码。

```
<%@ page import="java.sql.*" %>

<%
String connectionURL = "jdbc:mysql://addr.to.db:3306/dbname";
Connection connection = null;
Statement statement = null;
ResultSet rs = null;
%>

<html>

<head>
<title>JSP Server Response</title>
</head>

<body>
<h1>JSP Server Response:</h1>

<!--Get information from HTML form for manipulation-->

<%
    String songName = request.getParameter("newSongName");
String artistName = request.getParameter("newArtistName");
String password = request.getParameter("pass");
String radioResults = request.getParameter("dbIO");
%>

<%

Class.forName("com.mysql.jdbc.Driver").newInstance();
connection = DriverManager.getConnection(connectionURL, "userName", "password");
statement = connection.createStatement();
String query = "SELECT * FROM song_info;";
rs = statement.executeQuery(query);

//Add or Delete Information from DB

if(radioResults.equalsIgnoreCase("insert"))
{
    statement.executeUpdate("INSERT INTO song_info (songTitle, artistName) VALUES                     ('"+artistName+"','"+songName+"')");
}
else if(radioResults.equalsIgnoreCase("delete"))
{
statement.executeUpdate("DELETE FROM song_info WHERE artistName='"+songName+"'");
}
%>

<table>
<tr>
<th>Song Name</th><th>Artist Name</th>
</tr>

<% while(rs.next()){ %>
<tr>
<td align=center> <%= rs.getString("songTitle")%></td>
<td align=center> <%= rs.getString("artistName")%></td>
</tr>
<%}%>
</table>

<%
rs.close();
statement.close();
connection.close();
%>

Information Submitted to Server:

Artist Name: <%=songName%> <br />
Song Name: <%=artistName%> <br />
Password: <%=password%><br />
Radio Button Selection: <%=radioResults%><br /><br />

Password Correct: 

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:45:52.877

设法提出了一个临时解决方案，将数据库的所有行连接成一个长字符串，然后将字符串显示给浏览器：

```
<%

Class.forName("com.mysql.jdbc.Driver").newInstance();
connection = DriverManager.getConnection(connectionURL, "userName", "dbPass");
statement = connection.createStatement();
String query = "SELECT songTitle, artistName FROM song_info";
rs = statement.executeQuery(query);

String db_contentsORIGINAL = "";

while (rs.next()) {
    String artName = rs.getString("artistName");
    String sName = rs.getString("songTitle");

    String db_entry = "<b>Artist:</b> " + artName + " | " + "<b>Song Title:         </b>" + sName + "<br />";

        db_contentsORIGINAL += db_entry;
}

//Add or Delete Information from DB

if(radioResults.equalsIgnoreCase("insert"))
{
statement.executeUpdate("INSERT INTO song_info (songTitle, artistName) VALUES         ('"+artistName+"','"+songName+"')");
}
else if(radioResults.equalsIgnoreCase("delete"))
{
statement.executeUpdate("DELETE FROM song_info WHERE artistName='"+songName+"'");
}

%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:25:44.907

问题是您使用同一个`Statement`对象来执行多个查询。如果您重新使用`Statement`，那么任何`ResultSet`来自先前执行的资源都将被关闭。

解决方案是重新排序查询（就像您在自己的答案中所做的那样），或者`Statement`为查询和更新使用单独的对象。

此外，您当前的代码也会让您接触到 SQL 注入。请`PreparedStatement`与参数化查询一起使用。这将保护您免受大多数（如果不是全部）SQL 注入攻击。

# java - 创建 Java 会话

> ID：13389444
> 
> 赞同：0
> 
> 时间：2012-11-14T23:53:35.283
> 
> 标签：java, jsp, session

验证用户登录凭据后，我正在尝试创建会话。我导入了以下内容：

```
import javax.servlet.http.HttpSession; 
```

我正在使用以下代码：

```
HttpSession session = request.getSession(); 
session.setAttribute("sessionName","sessionValue"); 
```

但是，我收到以下有关的错误`request`

```
request cannot be resolved. 
```

我的完整代码：

```
package com.q1labs.qa.xmlgenerator.controller.managesession;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.sql.SQLException;
import java.util.HashMap;
import javax.servlet.http.HttpSession;
import com.q1labs.qa.xmlgenerator.model.db.DbLoginQueries;

public class Login {

    private DbLoginQueries query = new DbLoginQueries();

    public String login(String username, String password) throws SQLException, FileNotFoundException, ClassNotFoundException, IOException{

        String returnUrl = "";
        //Code verifiying users credentials (Code has been removed)

        //If valid is true then credentials are correct
        if(valid == true){
        //If credentials are correct then create a session
        HttpSession session = request.getSession(); 
        session.setAttribute("sessionName","sessionValue");

            returnUrl = "home.jsp";
        }else{
            returnUrl = "index.jsp";
        }

        return returnUrl;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:08:02.127

在我看来，您正在尝试在 Java 类中使用 JSP 代码。只有在 JSP 请求中才有可以在 scriplet 中使用的隐式对象。

在 Java 中，需要使用 servlet 并覆盖方法 doGet(HttpServletRequest req, HttpServletResponse resp) 或 doPost(HttpServletRequest req, HttpServletResponse resp)

# iphone - 使用私有 api 启动设置应用程序

> ID：13389448
> 
> 赞同：1
> 
> 时间：2012-11-14T23:54:14.213
> 
> 标签：iphone, ios, iphone-privateapi

由于使用`prefs://`URL 打开 Settings.app 在 iOS 5.1+ 中不再有效，我想知道是否可以使用私有 API 启动设置？注意：不适用于应用商店。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:11:30.273

## 使用私有 API

### GitHub 项目[iOS-Runtime-Headers](https://github.com/nst/iOS-Runtime-Headers)

> 以下是从运行时自省派生的 iOS Objective-C 标头。
> 
> 标头是使用[RuntimeBrowser for iPhone](https://github.com/nst/RuntimeBrowser/)生成的。

对设置应用程序特别感兴趣，请查看[Preferences.Framework](https://github.com/nst/iOS-Runtime-Headers/tree/master/PrivateFrameworks/Preferences.framework)。我从来没有直接处理过这个问题，但似乎还有其他关于这个主题的问题：

1.  [iOS 私有 API 文档](https://stackoverflow.com/questions/1150360/ios-private-api-documentation)
2.  [有谁知道我如何找到 IOS5 Iphones/ipod 的标头。越狱开发](https://stackoverflow.com/questions/9443584/does-anybody-know-how-i-can-find-the-the-headers-for-ios5-iphones-ipod-jailbrea)
3.  [应用程序在后台时获取屏幕截图？（允许私有 API）](https://stackoverflow.com/questions/10380553/get-a-screenshot-while-app-is-in-background-private-apis-allowed)
4.  [更多的...](https://stackoverflow.com/search?q=iOS-Runtime-Headers)

## 使用 URL

根据[这个关于 SO 的答案](https://stackoverflow.com/a/11218825/384110)，不再可能使用**URL***手动*启动设置应用程序。

 **> 通过我的开发者帐户询问 Apple 是否有办法以编程方式启动 WiFi 设置对话框。这是回应：
> 
> > “我们的工程师已经审查了您的请求，并得出结论认为，鉴于当前发货的系统配置，没有支持的方式来实现所需的功能。”

但是，如果您使用的是本地 Twitter 或 Facebook SDK，则会出现一个对话框，询问用户是否登录。[来自此 SO question](https://stackoverflow.com/q/12638132/384110)的更多信息，示例图片如下。

![没有 Facebook 帐户 - 设置示例](../Images/b1e7aabf8240dfed0510d9e69489c4c6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:20:52.523

我没有具体的答案。但是，我会建立在先前关于 Facebook 或 Twitter 的答案的基础上。我认为，拆卸 Twitter 或社交框架并找到显示此对话框的位置是有意义的。如果你会找到这个地方，你可以检查“设置”按钮后面的代码。

应该有一些 API 可以切换到 Preferences。但是，可能是该代码存在于某些具有权利的服务组件中，您将无法获得。**

# php - 用 phpunit 创建一个模拟类？

> ID：13389449
> 
> 赞同：12
> 
> 时间：2012-11-14T23:54:18.930
> 
> 标签：php, phpunit

有没有办法用 phpunit 创建一个模拟类，而不是一个模拟对象？我正在寻找一种方法来进行依赖注入，而不必显式传递类可能需要在构造函数（或任何地方）中使用的每个对象。对于所有这些情况都会返回“true”的东西：

```
public function testAAAA()
{
  $foo = $this->getMock('foo', array('bar'));
  var_dump(class_exists('foo', false));
  var_dump(method_exists('foo', 'bar'));
  var_dump(method_exists($foo, 'bar'));
} 
```

这打印：

```
bool(true)
bool(false)
bool(true) 
```

表明虽然它确实成功地创建了一个假的 'foo' 类，但它没有绑定一个 'bar' 方法到它。

我正在使用 phpunit 3.7.5。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T00:55:05.617

我怀疑您实际上并不想这样做（因为您可以使用 PHPUnit 的 mockbuilder 禁用构造函数等，请参阅[文档](http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mock-objects)），但假设您确实想要或需要这样做，这应该可以解决问题：

```
$foo = $this->getMockBuilder('nonexistant')
        ->setMockClassName('foo')
        ->setMethods(array('bar'))
        ->getMock();

    var_dump(class_exists('foo', false));
    var_dump(method_exists('foo', 'bar'));
    var_dump(method_exists($foo, 'bar'));

    $cls = new ReflectionClass('foo');
    var_dump($cls->hasMethod('bar')); 
```

老实说，我不确定为什么需要在上面指定不同的名称（不存在和 foo）的细节，但它似乎与 PHPUnit 的行为有关，当被模拟的类还不存在时，并且 setMockClassName 生成一个类扩展该类。或者其他的东西。它可能有效地解决了错误/边缘情况——这是库的奇怪用法。你应该可以`getMock`单独通过函数做同样的事情，只是更丑。

顺便说一句，听起来您应该熟悉[php 的反射功能](http://www.php.net/manual/en/book.reflection.php)。它不是最强大的反射库，但它非常好。我已经使用它根据类的构造函数参数和“模型”库的属性生成有关必需字段和可选字段的元信息，其中该元信息用于生成接受正确类型值的表单。也就是说，生成类型化的表单，无需表单所针对的类的实例，也无需手写大量愚蠢的代码——整个功能总共大约 100 行。显然我不知道你想做什么，但从你帖子中的少量信息来看，我猜它更接近那种类型的元事物。

# javascript - Javascript - 将字段值连接到onclick按钮链接？

> ID：13389453
> 
> 赞同：0
> 
> 时间：2012-11-14T23:54:42.503
> 
> 标签：javascript

我有一个问题需要解决我最初没有编写的现有应用程序。这是一段代码，它没有做它打算做的事情。它应该做的是获取字段的值，然后单击“搜索”，将其附加到重定向以将查询字符串传递到目标页面：

```
<form name="frm_someform">
    <input type="text" name="f_date" id="f_date"/>
    <input type="button" value="Search" onclick="parent.location='runreport.asp?date=' + document.frm_someform.elements['f_date'].value); + '"/>
</form> 
```

现在，正如您的 javascript 人员可以清楚地看到的那样，串联不起作用。我已经搜索了如何正确连接的高低，但有些东西没有正确翻译（在我的脑海中）。请注意，如果我取出串联，重定向工作正常，所以有一些导致问题的原因。是的，当然在上面的例子中，我可以简单地用一个真正的“提交”按钮让表单提交正确的值，但为了简单起见，我在这里删减了代码——它比我上面的例子复杂得多。

（**注意，我通过其他javascript函数成功测试了连接，但存在纯内联代码必须不同的可能性*）

提前致谢， 比姆斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T00:00:14.823

请试试这个：

```
<form name="frm_someform">
    <input type="text" name="f_date" id="f_date"/>
    <input type="button" value="Search" onclick="parent.location='runreport.asp?date='+ document.getElementById('f_date').value"/>
</form> 
```

# ruby - 如何使用 Prawn 为图像添加边框？

> ID：13389459
> 
> 赞同：2
> 
> 时间：2012-11-14T23:55:18.017
> 
> 标签：ruby, prawn, prawnto

如何使用 Prawn（pdf 库）为图像添加边框？如果这是可能的，你也可以添加填充吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:40:18.020

您可以使用 bounding_box 和 stroke_bounds 添加边框。在此示例中，我在图像周围设置了边框。我什至给了它 15 的填充。让它成为一个函数应该相对容易，其中填充参数可用于计算图像宽度和 bounding_box 宽度之间的差异。

```
require 'prawn'

Prawn::Document.generate("test.pdf") do
    text "Boxed Image", :align=>:center, :size=>20
    bounding_box([0, cursor], :width => 330) do
        move_down 15
        image "image.jpg", :fit => [300, 600], :position => :center
        move_down 15
        stroke_bounds
    end
end 
```

# javascript - 是否可以省略 try 和/或 catch 块的卷曲，如 if 和 else 块？

> ID：13389466
> 
> 赞同：11
> 
> 时间：2012-11-14T23:55:57.510
> 
> 标签：javascript, syntax, if-statement, try-catch, curly-braces

```
if (foo) {
  bar;
} 
```

可以缩短为

```
if(foo) bar; 
```

因为它只是块中的一个语句。

我想知道这是否同样适用于 try/catch ......我不喜欢我的代码中多余的东西。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-15T00:07:33.170

根据 ECMAScript 5，需要一个块，这意味着您需要花括号。

[http://es5.github.com/#x12.14](http://es5.github.com/#x12.14)

> 尝试语句：
> 
> `try Block Catch`
> 
> `try Block Finally`
> 
> `try Block Catch Finally`
> 
> 抓住 ：
> 
> `catch ( Identifier ) Block`
> 
> 最后 ：
> 
> `finally Block`

[http://es5.github.com/#x12.1](http://es5.github.com/#x12.1)

> 堵塞 ：
> 
> `{ StatementList opt }`
> 
> 声明列表：
> 
> `Statement`
> 
> `StatementList Statement`

# c# - 如何缩小（缩放）整个图形结构？

> ID：13389467
> 
> 赞同：2
> 
> 时间：2012-11-14T23:55:58.863
> 
> 标签：c#, winforms, graphics, scaling, graphics2d

我正在尝试将很多矩形放入位图中，它将显示在图片框中。在我的真实代码中，我计算出可以包含所有矩形的总宽度和高度，然后将其除以位图的大小，得到我的缩放因子。问题是我不知道如何执行缩放。下面的代码是我需要做的一个简单版本。

请记住，我不能依赖图片框的缩放能力（拉伸），我不想简单地将比例应用于所有矩形的宽度和高度，因为在我的真实代码中它不会很好地工作. 我需要一种在图形中缩小它的方法。位图保持与 (300 X 300) 相同的大小很重要。谢谢。下面的代码是我到目前为止所得到的，但大小没有任何变化。

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication22
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        Bitmap BM = new System.Drawing.Bitmap(300, 300);
        Pen PenTest = new System.Drawing.Pen(Brushes.Red);
        private void Form1_Load(object sender, EventArgs e)
        {
             using (Graphics GR = Graphics.FromImage(BM))
            {

                GR.DrawRectangle(PenTest, new Rectangle(0,0,500,500));

                 // I need a scale of 0.60 in this example, because 300/500 = .6

                GR.ScaleTransform(.6F, .6F);//Doesn't Work. No Change at all in the size of the rectangle.

            }

            pictureBox1.Image = BM;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:02:54.647

[Graphics.ScaleTransform](http://msdn.microsoft.com/en-us/library/zhc2xxtx.aspx)执行转换，但不绘制任何内容。

在对图形对象执行转换后，您需要绘制一个矩形：

```
 using (Graphics GR = Graphics.FromImage(BM))
 {
     // ....

     GR.ScaleTransform(.6F, .6F);
     GR.DrawRectangle(PenTest, new Rectangle(0,0,500,500));

 } 
```

# combobox - 如何在组合框 onchange 事件触发时使用新值重新加载 ZK PivotTable 中的数据

> ID：13389468
> 
> 赞同：0
> 
> 时间：2012-11-14T23:56:22.383
> 
> 标签：combobox, zk, zul

当 ombobox onchange 事件触发时，我需要在 ZK 数据透视表中重新加载数据。

如果用户从组合框 { 如下代码所示 } 中更改值，则数据应根据用户选择而更改。

索引.zul

```
<window apply="org.zkoss.pivot.demo.PivotDemoBaseController"  >
    <hlayout>
        <panel id="main" hflex="1" border="normal">
            <caption label="2012 Data">
                <toolbarbutton id="exportCsvBtn" label="Export CSV"  />
                <toolbarbutton id="exportXlsBtn" label="Export XLS" />
                <toolbarbutton id="exportXlsxBtn" label="Export XLSX" />
            </caption>
            <panelchildren>
                <vlayout spacing="0">
                    <pivottable id="pivot" hflex="1" pageSize="15"  >

                        <combobox model="${lm}"  id="selectGeo"/>
                        <div>All People</div>
                    </pivottable>
                    <div id="descDiv" />
                </vlayout>
            </panelchildren>
        </panel>
        <panel id="field" title="Control" width="300px" border="normal"  >
            <panelchildren>
                <vlayout style="padding: 10px">
                    <!-- Predefined scenario: -->
                    <hlayout id="preDef" spacing="0"  />
                    <div class="footnote" style="padding: 5px 0">(Drag fields among the areas below)</div>
                    <pivot-field-control id="pfc" height="300px" />
                    <hlayout hflex="1">
                        <checkbox id="autoUpdate" label="Auto Update" checked="true" />
                        <div hflex="1" />
                        <!-- <button id="updateBtn" label="Update" disabled="true" autodisable="+self" /> -->
                    </hlayout>
                    <separator />
                    <checkbox id="colGrandTotal" label="Enable grand total for columns" />
                    <checkbox id="rowGrandTotal" label="Enable grand total for rows" />
                    <div>
                        <radiogroup id="dataOrient">
                            Data field orientation:
                            <radio id="colOrient" label="column" />
                            <radio id="rowOrient" label="row" />
                        </radiogroup>
                    </div>
                </vlayout>
            </panelchildren>
        </panel>
    </hlayout>
</window> 
```

下面是我的控制器的代码

公共类 PivotDemoBaseController 扩展 SelectorComposer {

```
private static final long serialVersionUID = -7531153593366258488L;

private static final String[] TITLES = new String[] { "(Data Title)", "(Column Title)", "(Row Title)" };

@Wire
private Pivottable pivot;

@Wire
private PivotFieldControl pfc;

@Wire
private Button updateBtn;

@Wire
private Checkbox colGrandTotal, rowGrandTotal;

@Wire
private Radio colOrient, rowOrient;

@Wire
private Hlayout preDef;

@Wire
private Div descDiv;

private TabularPivotModel _model;

@Wire
private Combobox selectGeo;

private CellStyleConfigurator styleConfigurator;

public void onCheck$autoUpdate(CheckEvent event) {
    boolean deferred = !event.isChecked();
    pfc.setDeferredUpdate(deferred);
    if (!deferred)
        updateBtn.setDisabled(true);
}

@Listen("onChange = #selectGeo")
public void onChangeSelectGeo(Event event) {        
     String geography = selectGeo.getValue();
   System.out.println("Value---"+geography);

}

public void onClick$updateBtn() {
    pfc.update();
}

public void onPivotFieldControlChange$pfc() {
    if (!pfc.isUpdated())
        updateBtn.setDisabled(false);
}

public void onCheck$colGrandTotal(CheckEvent event) {
    System.out.println("PivotDemoBaseController.onCheck$colGrandTotal()");
    pivot.setGrandTotalForColumns(event.isChecked());
}

public void onCheck$rowGrandTotal(CheckEvent event) {
    pivot.setGrandTotalForRows(event.isChecked());
}

public void onCheck$dataOrient(CheckEvent event) {
    pivot.setDataFieldOrient(((Radio)event.getTarget()).getLabel());
}

public void onClick$exportCsvBtn() throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    PivotExportContext context = Exports.getExportContext(pivot, true, TITLES);
    Exports.exportCSV(out, context);
    Filedownload.save(out.toByteArray(), "text/csv", "pivot.csv");
    try {
        out.close();
    } catch (IOException e) {}
}

public void onClick$exportXlsBtn() throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    PivotExportContext context = Exports.getExportContext(pivot, true, TITLES);
    Exports.exportExcel(out, "xls", context, styleConfigurator);
    Filedownload.save(out.toByteArray(), "application/vnd.ms-excel", "pivot.xls");
    try {
        out.close();
    } catch (IOException e) {}
}

public void onClick$exportXlsxBtn() throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    PivotExportContext context = Exports.getExportContext(pivot, true, TITLES);
    Exports.exportExcel(out, "xlsx", context, styleConfigurator);
    Filedownload.save(out.toByteArray(), "application/vnd.ms-excel", "pivot.xlsx");
    try {
        out.close();
    } catch (IOException e) {}
}

@NotifyChange("*")
@Override
public void doAfterCompose(Component comp) throws Exception {
    System.out.println("PivotDemoBaseController.doAfterCompose()");
    super.doAfterCompose(comp);
    StaticPivotModelFactory pmf = StaticPivotModelFactory.INSTANCE;

    //PivotModelFactory pmf= (PivotModelFactory) arg.get("factory");
    _model = pmf.build();
    pivot.setModel(_model);
    pfc.setModel(_model);
    Executions.createComponents(pmf.getDescriptionURI(), descDiv, null);

    loadConfiguration(pmf.getDefaultConfigurator());

    // load predefined scenario
    for(PivotConfigurator conf : pmf.getConfigurators())
        preDef.appendChild(getPreDefDiv(conf));
}

private void initControls() {
    System.out.println("PivotDemoBaseController.initControls()");
    // grand totals
    colGrandTotal.setChecked(pivot.isGrandTotalForColumns());
    rowGrandTotal.setChecked(pivot.isGrandTotalForRows());

    // data orientation
    ("column".equals(pivot.getDataFieldOrient()) ? 
            colOrient : rowOrient).setChecked(true);

    pfc.syncModel(); // field control
}

private Component getPreDefDiv(final PivotConfigurator conf) {
    Div div = new Div();
    div.setHflex("1");
    div.setSclass("predef");
    div.appendChild(new Label(conf.getTitle()));
    div.addEventListener("onClick", new EventListener(){
        public void onEvent(Event event) throws Exception {
            loadConfiguration(conf);
        }
    });
    return div;
}

private void loadConfiguration(PivotConfigurator conf) {
    System.out.println("PivotDemoBaseController.loadConfiguration()");
    _model.clearAllFields(true);
    conf.configure(_model);
    conf.configure(pivot);
    pivot.setPivotRenderer(conf.getRenderer());
    styleConfigurator = conf.getCellStyleConfigurator();
    initControls();
} 
```

}

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T08:04:27.473

我认为您的意思是[@NotifyChange](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Syntax/ViewModel/@NotifyChange)注释，但它用于 MVVM 数据绑定，您没有使用它。
您可以切换到[MVVM 数据绑定](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM)，或者您应该像这样更新它：

```
@Listen("onChange = #selectGeo")
public void onChangeSelectGeo(CheckEvent event) {
    // Manipulate pivot element here.
} 
```

有关详细信息，请参阅[CheckEvent](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/event/CheckEvent.html)和[MVVM 与 MVC](http://books.zkoss.org/wiki/Small_Talks/2011/December/MVVM_in_ZK6%3ain_Contrast_to_MVC)。

# antlr - 如何用默认值替换缺少的可选令牌？

> ID：13389475
> 
> 赞同：3
> 
> 时间：2012-11-14T23:56:55.790
> 
> 标签：antlr, antlr3

想象一下，我有以下规则。我想将其设为`TYPE_ID`可选，但如果缺少它，请将其替换为 AST 中的一些默认值。

```
assignment : TYPE_ID? ID '->' expression 
TYPE_ID : ('A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')* ; 
```

例如，我有以下代码要解析，给定上述规则，假设它`expression`可以根据需要工作。

```
monday -> 1.
Number tuesday -> 2. 
```

我想让 AST在树的前面有一个*东西*，它出现在下一棵树`monday`的同一个地方。`Number`

我已经搜索和搜索，无法弄清楚如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:46:09.367

您可以执行以下操作：

```
tokens {
  EMPTY;
}

 assignment :   TYPE_ID ID  '->' expression -> ^( TYPE_ID ID '->' expression)
            |   ID          '->' expression -> ^( EMPTY ID '->' expression)
            ; 
```

# windows-mobile-6.5 - 有没有办法在 Windows Mobile 设备上启用 FIPS 模式？

> ID：13389477
> 
> 赞同：1
> 
> 时间：2012-11-14T23:57:05.650
> 
> 标签：windows-mobile-6.5, fips

我正在使用 Windows Mobile 6.5 设备，并且想知道，有没有办法在其上启用 FIPS only 模式，就像在 Windows 7 和 XP 中一样？

我在桌面操作系统上找到的等效设置是：

```
Security Settings/Local Policies/Security Options/
System cryptography: Use FIPS compliant algorithms for encryption, hashing and signing = Enabled 
```

我正在寻找等效设置或注册表修复（假设它甚至可能）。

Mozilla 网站上有关于什么是[FIPS的解释。](https://developer.mozilla.org/en-US/docs/NSS/FIPS_Mode_-_an_explanation)FIPS 模式在整个操作系统中强制执行更严格的安全实践。这很重要，因为它是那些需要符合 FIPS 的人的要求（许多政府部门都要求）。

如果有帮助，我们将在我们的应用程序中使用 RSAENH 加密模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:59:39.137

不，Windows Mobile 6.5 中没有这样的规定。

从[http://technet.microsoft.com/en-us/library/cc750357.aspx](http://technet.microsoft.com/en-us/library/cc750357.aspx)，我们可以看到 Microsoft 加密库根本不检查 FIPS 本地策略标志，这取决于应用程序。

> 注 – 操作系统或经过验证的加密库（CAPI 或 CNG）不会强制执行 FIPS 策略。相反，每个单独的应用程序都必须检查此标志并强制执行经过验证的密码库的安全策略。

（如果您想知道，.NET 框架在这里算作一个应用程序，它检查桌面操作系统上的标志，而不是底层加密库）

了解这一点后，您必须查看[Windows Mobile Cryptographic Provider (RSAENH) 的安全策略，](http://csrc.nist.gov/groups/STM/cmvp/documents/140-1/140sp/140sp560.pdf)以了解如何确保 FIPS 合规性：

> **安全操作**
> 
> Microsoft Windows CE 和 Windows Mobile 增强加密模块 (RSAENH) 由应用程序在 FIPS 批准模式下使用，方法是在 FIPS 批准模式下调用各个函数。**应用程序负责**确保它不会以使应用程序不符合 FIPS 的方式执行未经批准的功能。未经批准的功能包括：
> 
> • 使用未经批准的算法的任何功能

此外，安全策略提到了哪些是未经批准的 FIPS 算法。您可以确保不使用它们来保持 FIPS 兼容。这些是它列出的未经批准的算法，您不得使用：

> *   RSA 密钥对生成（密钥大小从 384 到 16384）（RSAENH 模块未实现已批准的 X9.31 密钥对生成算法）
> *   RSA使用私钥和公钥加密和解密
> *   RC2 密钥对派生（密钥大小从 40 到 128）
> *   RC2 密钥对生成（密钥大小从 40 到 128）
> *   RC2 ECB / CBC 加密/解密
> *   RC4 密钥对派生（密钥大小从 40 到 128）
> *   RC4 密钥对生成
> *   RC4 加密/解密
> *   MD2 哈希
> *   MD4 哈希
> *   MD5 哈希
> *   基于 MD5 的密钥哈希消息验证码 (HMAC)
> *   未经批准的软件伪随机数生成器 (PRNG)（由硬件数据和应用程序提供的数据播种）
> *   局域网管理器哈希生成

# youtube-api - 这是什么类型的 Youtube API Feed？

> ID：13389478
> 
> 赞同：0
> 
> 时间：2012-11-14T23:57:06.540
> 
> 标签：youtube-api

所以我有这个损坏的 Youtube 播放列表（从 Youtube 提要获取播放列表信息的 PHP 循环）。奇怪的是，当一些重复/失败的上传视频被删除时，它就坏了，不知道为什么。

无论如何，我有这个播放列表提要 URL，它似乎不起作用，但之前工作过：[http ://gdata.youtube.com/feeds/api/playlists/6549D4CA7BB99B16?v=2](http://gdata.youtube.com/feeds/api/playlists/6549D4CA7BB99B16?v=2)

/playlists/ 后面的数字是多少？它看起来不像播放列表 ID（因为它们似乎以“PL”开头）或用户 ID [http://www.youtube.com/playlist?list=PL6549D4CA7BB99B16](http://www.youtube.com/playlist?list=PL6549D4CA7BB99B16)。

我在代码中有几个这样的提要，它们都曾经工作过。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:54:32.710

它是播放列表 ID——YouTube 显然最近刚刚进行了一项更改，需要附加“PL”字符，如下所示：

[http://gdata.youtube.com/feeds/api/playlists/PL6549D4CA7BB99B16?v=2](http://gdata.youtube.com/feeds/api/playlists/PL6549D4CA7BB99B16?v=2)

# c - 找到超过第 80 个百分位的值？

> ID：13389482
> 
> 赞同：0
> 
> 时间：2012-11-14T23:57:16.687
> 
> 标签：c, arrays, algorithm

当数组中有重复值时，我需要找到第一个超过 x[floor(0.8*N)+1] 的数字。但我不确定如何做到这一点。x 指的是按升序排序的整数数组。非常感谢您的帮助。

```
void eightypercentile(int x[], values)
{
  int eightiethpercentile;
  if( x[floor(0.9*N)+1] <= x[floor(0.8*N)])
  {
    eightiethpercentile = /*first number that exceeds x[floor(0.8*N)+1] */
  }
  int eightiethpercentile = x[floor(0.8*N)+1];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:19:15.683

一种方法：

```
nc = ceil(N * 0.8)
nf = floor(N * 0.8)
if (nc == nf) nc++;
while (x[nc] == x[nc-1]) 
  nc++;
return x[nc]; 
```

# hibernate - 如何在 Grails 中的数据库中持久化闭包？

> ID：13389484
> 
> 赞同：2
> 
> 时间：2012-11-14T23:57:18.287
> 
> 标签：hibernate, grails, serialization, groovy

我正在尝试将 Groovy 闭包（[据称是可序列化](http://groovy.codehaus.org/api/groovy/lang/Closure.html)的）作为我的 Grails 域对象之一的属性。目前我基本上是这样做的：

```
class MyClass {
    ....
    Closure myClosure
    static mapping = { myClosure size: 1024 * 1024, type: 'blob' }
}
new MyClass(myClosure: { ... do some stuff .. }.dehydrate()).save() 
```

我尝试将“blob”更改为“二进制”，但这不起作用。我收到类似于以下内容的错误： **context.GrailsContextLoader Error execution bootstraps: BootStrap$_obj_closure3 cannot be cast to java.sql.Blob**

我应该如何设置我的域对象以便能够存储闭包？

我正在使用带有 Groovy 2.0 的 Grails 2.1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:14:55.553

我需要这个：

```
static mapping = {
    myClosure sqlType: 'blob'
} 
```

# php - mysql/php 中的行位置

> ID：13389486
> 
> 赞同：1
> 
> 时间：2012-11-14T23:57:29.260
> 
> 标签：php, mysql, sql

> **可能重复：**
> [MySql 行号？](https://stackoverflow.com/questions/3126972/mysql-row-number)

我的 mysql 表中有 10 个名称，我想获取特定名称的位置。我没有找到任何解决方案。

```
ID      NAMES
1       APPLE  
3       MANGO 
5       PARROT
9       TREE
12      HOUSE
14      AIRPLANE
19      ROCKET
22      SHIP
38      BOAT 
41      MOUNTAIN 
```

假设我想要 HOUSE 的职位，我应该得到的答案是 5。但我无法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:00:06.813

```
SELECT `rank`
FROM
(
  select @rownum:=@rownum+1 `rank`, p.* 
  from TableName p, (SELECT @rownum:=0) r 
  order by ID 
) s
WHERE names = 'house' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/4e3c4/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:04:17.277

```
$query = "SELECT * FROM TABLE";

$result = mysql_query($query, );
$num = mysql_numrows($result);
$i = 0;
while($i < $num) {
    $name = mysql_result($result, $i, "NAMES");
    if($name == "House")
        break;

   $i++;
}

// $i contains position of "House" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T00:13:24.607

从基本的角度来看，这整个想法实际上是错误的。根据关系模型，特定行没有特定位置。**这就是为什么如果您执行查询，除非**您指定`ORDER BY`子句，否则RDBMS 可能会以任何顺序返回行。是的，当您执行查询时，行总是以相同的顺序返回。但这更多是约定或巧合，而不是要求。依赖它是错误的。

因此，在您的情况下， 的位置`HOUSE`可以是 1 到 N 之间的任何值（N = 行数）。

# php - 如何配置 Charles 以从独立的 Flash 播放器捕获流量？

> ID：13389491
> 
> 赞同：1
> 
> 时间：2012-11-14T23:58:00.973
> 
> 标签：php, flash, amf, charles-proxy

我有一个 .swf 从服务器（AMFPHP）发送和接收一些数据，在我的例子中是本地主机，但查尔斯似乎无法捕获流量。我已经在 Chrome 和其他应用程序上对其进行了测试，它工作正常，它只是独立的 Flash 播放器，似乎对 Charles 不太友好：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:15:37.197

你看过 Charles Menu-> Proxy 吗？有一个设置用于系统代理和另一个用于 os. 操作系统应该做你想做的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T14:55:20.733

ServiceCapture 应该能够为您执行此操作并解码 AMF。

[http://kevinlangdon.com/serviceCapture/](http://kevinlangdon.com/serviceCapture/)

# java - javafx中目录路径中的文件名

> ID：13389492
> 
> 赞同：1
> 
> 时间：2012-11-14T23:58:02.853
> 
> 标签：java, javafx, filenames

我想从 Javafx 2 中的目录路径获取文件名，不带扩展名，但使用过滤器（*.jpeg，*.jpg...）。文件名应该是字符串列表。但我不知道我该怎么做。

如果有人知道怎么做，请寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:39:39.893

例如手动管理此类文件

```
 File f = new File("D:\\dir_name\\");
    if (f.isDirectory()) {
        String[] list = f.list();
        for (int pos = 0; pos < list.length; pos++) {
            if (list[pos].contains(".")//contains extension
                    && list[pos].lastIndexOf(".") != (list[pos].length() - 1))//point is not last character
            {
                list[pos]=list[pos].substring(0,list[pos].lastIndexOf("."));                       
            }

        }     
    } 
```

# php - 从 PHP exec() 函数读取 git push 的输出

> ID：13389494
> 
> 赞同：5
> 
> 时间：2012-11-14T23:58:18.633
> 
> 标签：php, git, bash, operating-system

我正在为我的框架的命令行工具编写部署命令。它使用 git 进行部署。

我有一条线我这样做：

```
exec("git push {$remote} {$branch}:{$branch}", $shell_output, $status); 
```

我想将 push 的输出放在里面`$shell_output`，但它没有发生（输出只显示在终端上）。我认为因为`git`是一个外部程序，因此会创建一个新的输出流？

我尝试使用[此处](https://stackoverflow.com/questions/5461175/php-command-line-output-buffer-outputs-regardless-of-buffer-settings)描述的输出缓冲区无济于事。我敢肯定 SO 上有一些东西可以回答这个问题，但经过大量挖掘后无法找到它。

所以任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T00:09:11.293

git 将其输出发送到 STDERR 而不是 STDOUT，因此您需要使用以下内容重定向它：

`git push REPO --progress 2>&1`

或文件：

`git push REPO --progress > /path/to/file 2>&1`

# sql-server - SQL Server 使用文本文件更新表列

> ID：13389495
> 
> 赞同：1
> 
> 时间：2012-11-14T23:58:21.010
> 
> 标签：sql-server

下面是数据库中的表存储：

```
 ID     Age     SectionID
 111    29       NULL
 100    30       NULL 
```

使用文本文件更新 Column Age（请参阅下面的示例数据）

```
 ID     Age     SectionID
 111    29       231
 100    30       456 
```

文本文件没有列名。我厌倦了使用导入向导，但似乎它再次将所有列添加到表中。我只需要将 SectionID 列添加到表中。谁能告诉我如何选择设置来实现这一点？谢谢！！！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:02:38.880

您可以使用[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx)将数据插入临时表，执行`UPDATE`并删除临时表。

例子：

```
CREATE TABLE #TEMP (
  ID INT,
  Age INT,
  SectionID INT)
GO

BULK INSERT #TEMP
FROM 'HereGoesYourFileName'
WITH
 (
    FIELDTERMINATOR =' ',
    ROWTERMINATOR = '\n'
  )    
GO

UPDATE ot
SET ot.SectionID = t.SectionID
FROM OriginalTable ot JOIN #TEMP t ON ot.ID = t.ID
GO

DROP TABLE #TEMP
GO 
```

# python - 使用 mako 和 rst2pdf 维护导入文本的格式

> ID：13389498
> 
> 赞同：0
> 
> 时间：2012-11-14T23:58:37.947
> 
> 标签：python, mako, rst2pdf

我创建了一个从 csv 输入呈现 pdf 文件的模板。但是，当 csv 输入字段包含用户格式、换行符和缩进时，它会与 rst2pdf 格式引擎混淆。有没有一种方法可以在不破坏文档流程的同时保持输入文本的格式，从而始终如一地处理用户输入？下面的示例脚本：

```
from mako.template import Template
from rst2pdf.createpdf import RstToPdf

mytext = """This is the first line
Then there is a second
Then a third
   This one could be indented

I'd like it to maintain the formatting."""

template = """
My PDF Document
===============

It starts with a paragraph, but after this I'd like to insert `mytext`. 
It should keep the formatting intact, though I don't know what formatting to expect.

${mytext}

"""

mytemplate = Template(template)
pdf = RstToPdf()
pdf.createPdf(text=mytemplate.render(mytext=mytext),output='foo.pdf') 
```

我尝试在模板中添加以下函数以在`|`每行的开头插入，但这似乎也不起作用。

```
<%!
def wrap(text):
    return text.replace("\\n", "\\n|")
%> 
```

那么`${mytext}`就会变成`|${mytext | wrap}`. 这会引发错误：

```
<string>:10: (WARNING/2) Inline substitution_reference start-string without end-string. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:45:37.120

实际上，事实证明我在正确的轨道上，我只需要在`|`和文本之间留一个空格。所以下面的代码有效：

```
from mako.template import Template
from rst2pdf.createpdf import RstToPdf

mytext = """This is the first line
Then there is a second
Then a third
    How about an indent?

I'd like it to maintain the formatting."""

template = """
<%!
def wrap(text):
    return text.replace("\\n", "\\n| ")
%>

My PDF Document
===============

It starts with a paragraph, but after this I'd like to insert `mytext`. 
It should keep the formatting intact.

| ${mytext | wrap}

"""

mytemplate = Template(template)
pdf = RstToPdf()
#print mytemplate.render(mytext=mytext)
pdf.createPdf(text=mytemplate.render(mytext=mytext),output='foo.pdf') 
```

# solr - Solr DataImportHandler 不能识别像 $skipDoc 这样的特殊命令，为什么？

> ID：13389500
> 
> 赞同：2
> 
> 时间：2012-11-14T23:58:40.513
> 
> 标签：solr

我试图弄清楚为什么这个配置不能识别特殊命令`$skipDoc`和`$skipRow`，但真的不知道出了什么问题，我使用的是 solr 4.0：

```
<?xml version="1.0"?>
<dataConfig>
<dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/db" user="root" password=""/>
    <document>
        <entity name="item" query="SELECT * FROM description">
             <field column="id" name="id" />
         <field column="$skipDoc"  regex=".*" replaceWith="true" sourceColName="title"/>
        </entity>
    </document>
</dataConfig> 
```

我删除了不需要的字段以使示例保持简单，但主要是配置。

solr 的开发人员做了哪些没有在文档中写的东西来神奇地开始使用这个命令？还是野兽是我？

* * *

野兽就是我，aserba 告诉我，我需要将transformer="RegexTransformer" 添加到每个实体中，每个实体都有一个由正则表达式修改的字段，在这个例子中，我们需要它：

```
<?xml version="1.0"?>
<dataConfig>
<dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/db" user="root" password=""/>
    <document>
        <entity name="item" transformer="RegexTransformer" query="SELECT * FROM description">
             <field column="id" name="id" />
         <field column="$skipDoc"  regex=".*" replaceWith="true" sourceColName="title"/>
        </entity>
    </document>
</dataConfig> 
```

希望对其他人的帮助对我来说很头疼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:25:59.333

试试怎么样`<field column="${skipDoc}" regex=".*" replaceWith="true" sourceColName="title"/>`

# ruby-on-rails - 保存时如何将模型属性设置为其他属性的值 - Rails

> ID：13389506
> 
> 赞同：1
> 
> 时间：2012-11-14T23:59:10.100
> 
> 标签：ruby-on-rails, activerecord

创建包含“screen_name”属性的用户时，我想将名为“username”的用户属性的值设置为 screen_name 的值，但默认情况下是小写。

我正在使用活动记录和导轨，对此最好的解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T00:01:31.777

您可以`before_create`在文件中添加过滤器`app/models/user.rb`：

```
before_create :set_username

def set_username
  self.username = screen_name.downcase
end 
```

# jakarta-ee - 在 tomcat 上跟踪/分析应用程序

> ID：13389507
> 
> 赞同：3
> 
> 时间：2012-11-14T23:59:16.370
> 
> 标签：jakarta-ee, tomcat, profiling, tomcat6

我一直在尝试找到一些开源组件来跟踪（调用堆栈/方法调用堆栈）/配置文件在 tomcat 上的应用程序。

我曾尝试查看 Eclipse Diver、JIVE for eclipse 和 javacalltracer、java melody、psi 探针等选项。

这些选项似乎无法实现目标：

1.  查看调用跟踪、调用顺序（包括过滤器、监听器、Tomcat 类和我的 Web 应用程序类）。

2.  为组件的调用/内存分析提供时间中断。

我试图找到与 JProfiler 提供的功能内联的东西。

是否有任何工具/开源项目可以提供类似的功能？

**我的系统信息：**

> Windows 7 企业版 64 位。
> 
> 雄猫 6.0.20
> 
> JDK 6
> 
> 多个 web 应用程序（大约 10 个），带有 spring 和 ibatis。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:43:40.417

我强烈推荐[BTrace](https://github.com/btraceio/btrace)。它允许您跟踪/检查/等远远超出您提到的内容。它是免费的。

# c# - 单击 ContentControl 不会使其获得焦点

> ID：13389508
> 
> 赞同：2
> 
> 时间：2012-11-14T23:59:18.287
> 
> 标签：c#, windows-8, winrt-xaml

我正在使用我自己的类，派生自 ContentControl（我们称之为 MyControl） 我希望用户能够订阅我的控件的 KeyDown 和 KeyUp 事件。

我遇到的问题是 MyControl 似乎没有收到任何关键事件。我推断这可能是一个焦点问题。例如，如果我在我的项目中添加一个以编程方式将焦点设置在 MyControl 上的按钮，那么我将开始接收这些事件。问题是，只要我点击任何地方，包括在我自己的控件上，它似乎就会失去焦点（无论哪种方式，键都不再起作用了）。我也无法通过单击将其取回，但似乎我必须使用 MyControl.Focus 方法。

所以，我的问题是：如何使控件能够通过单击它来接受焦点？

* * *

此外，为了您的享受，我在下面添加了一个小示例项目来演示我遇到的问题：

主页.xaml

```
<Page
x:Class="Focus.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Focus"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="300"/>
    </Grid.ColumnDefinitions>
    <Grid x:Name="BG">

    </Grid>
    <StackPanel Grid.Column="1" Orientation="Vertical">
        <StackPanel Orientation="Horizontal">  
            <Button Content="Focus" Click="FocusClick"/>
        </StackPanel>
        <TextBlock x:Name="InfoText" FontSize="16" TextWrapping="Wrap" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
    </StackPanel>
</Grid>
</Page> 
```

MainPage.xaml.cs

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;

namespace Focus
{
/// <summary>
/// An empty page that can be used on its own or navigated to within a Frame.
/// </summary>
public sealed partial class MainPage : Page
{

    public static MainPage Current;
    public MyControl ctrl;

    public MainPage()
    {
        this.InitializeComponent();
        Current = this;
        ctrl = new MyControl();
        BG.Children.Add(ctrl);

        ctrl.KeyDown += ctrl_KeyDown;
        ctrl.KeyUp += ctrl_KeyUp;
    }

    void ctrl_KeyUp(object sender, KeyRoutedEventArgs e)
    {
        ShowInfo("Pressed " + e.Key);
    }

    private void ctrl_KeyDown(object sender, KeyRoutedEventArgs e)
    {
        ShowInfo("Released " + e.Key);
    }

    /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }

    public void ShowInfo(string text)
    {
        InfoText.Text = text + Environment.NewLine + InfoText.Text;
    }

    private void FocusClick(object sender, RoutedEventArgs e)
    {
        ctrl.Focus(FocusState.Programmatic);
    }
}
} 
```

我的控制.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Windows.Foundation;
using Windows.UI;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Shapes;
using Windows.UI.Xaml;

namespace Focus
{
public class MyControl : ContentControl
{

    public MyControl()
        : base()
    {
        LinearGradientBrush lb = new LinearGradientBrush();
        lb.StartPoint = new Point(0, 0);
        lb.EndPoint = new Point(1, 1);
        lb.GradientStops.Add(new GradientStop() { Color = Colors.Red, Offset = 0, });
        lb.GradientStops.Add(new GradientStop() { Color = Colors.Yellow, Offset = 1, });

        Rectangle rect = new Rectangle();
        rect.Width = 800;
        rect.Height = 1000;
        rect.Fill = lb;
        this.Content = rect;
    }
}
} 
```

这是通过一个名为 Focus 的空白项目完成的。上面的 3 个文件分别是 MainPage.xaml、MainPage.xaml.cs 和 MyControl.cs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:52:03.473

我已经运行了您的示例，并且似乎 WinRT 中存在一些错误，您可以阅读此[MSDN Thread](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/5ce24f74-00dc-471c-8a2b-a221423df1b0/ "MSDN 线程")。`LostFocus`作为一种解决方法，您可以添加对您控制的事件的订阅：

```
ctrl.LostFocus += ctrl_LostFocus;
void ctrl_LostFocus(object sender, RoutedEventArgs e)
{
    ((MyControl)sender).Focus(FocusState.Programmatic);
} 
```

并在每次丢失时手动将焦点设置为您的控件。但对我来说，这是一个糟糕的解决方案，因为您的控制将始终集中。当然你可以扩展这个方法来提供一些额外的逻辑。

# c# - 自定义验证器控件不会阻止页面提交

> ID：13389512
> 
> 赞同：1
> 
> 时间：2012-11-14T23:59:56.693
> 
> 标签：c#, asp.net, gridview

我的页面上有一个 GridView，在 Edit 模板的输入字段上有验证控件（需要和正则表达式）。基本上，当用户在 GridView 中单击“编辑”时，我正在验证用户提交的输入。

这是一些示例标记：

```
<asp:TemplateField HeaderText="Name" SortExpression="Name">
    <EditItemTemplate>
        <asp:TextBox ID="EditFacultyName" runat="server" Text='<%# Bind("Name") %>' 
            CausesValidation="True"></asp:TextBox>
        <br />
        <asp:RequiredFieldValidator ID="EditFacultyNameRequired" runat="server" 
            ControlToValidate="EditFacultyName" ErrorMessage="You must provide a name" 
            ValidationGroup="ValidateGridView" Display="Dynamic"></asp:RequiredFieldValidator>
        <asp:RegularExpressionValidator ValidationExpression="^[a-zA-Z0-9 ]*$" 
            ID="EditFacultyNameRegex" runat="server" 
            ControlToValidate="EditFacultyName" 
            ErrorMessage="Must be alphanumeric characters and spaces" Display="Dynamic" ValidationGroup="ValidateGridView"></asp:RegularExpressionValidator>
    </EditItemTemplate>
    <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%# Bind("Name") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

当我失去对输入元素的焦点时，验证控件会触发，但如果我单击 GridView 中的“更新”，它们不会阻止页面提交。

我做了一个更形象的例子。

![在此处输入图像描述](../Images/50c80fb1a1690ec0bf02734bacb48221.png)

在这里，您可以看到 Name 字段为空，并且 Location 字段包含无效字符。验证控件向我显示一个错误，但是当我单击更新（以红色圈出）时，它们仍然会通过并被添加到数据库中。

我怎样才能阻止这种情况发生？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:59:00.640

您需要`IsValid`在服务器端代码的更新事件处理程序中检查页面的属性。除了客户端验证之外，这样做是一个很好的做法，因为恶意用户可以轻松绕过客户端验证。

```
protected void OnUpdate(object sender, EventArgs e)
{
    if(Page.IsValid)
    {
        // update data store
    }
} 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.isvalid(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.isvalid(v=vs.100).aspx)

# c# - Tweetsharp：检索特定用户的推文列表

> ID：13389516
> 
> 赞同：7
> 
> 时间：2012-11-15T00:00:17.687
> 
> 标签：c#, asp.net, tweetsharp

在官方 TS 文档、其他 Tweetsharp SO 帖子或挖掘图书馆的类中找不到这个；所以我想我会问。您如何使用 Tweetsharp 从特定用户那里检索最新推文列表？

您可以假设我正在使用关注我想要检索的推文的用户的帐户进行身份验证。我什至可以使用用户本身的帐户进行身份验证。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T20:59:37.690

使用 ListTweetsOnSpecifiedUserTimeline()。

例如：

```
var service = new TwitterService(ConsumerKey, ConsumerSecret);
service.AuthenticateWith(AccessToken, AccessTokenSecret);
var currentTweets = service.ListTweetsOnSpecifiedUserTimeline(screenName:"screen name", page:1, count:100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-14T21:35:06.210

该方法在更新版本中略有不同。它现在称为 ListTweetsOnUserTimeline()

你现在要像这样通过选项：

```
 var currentTweets = service.ListTweetsOnUserTimeline(new ListTweetsOnUserTimelineOptions
                {
                    ScreenName = "yourTwitterHandle",
                    Count = 5,
                }); 
```

# ios - 奇怪的 UIControlEventEditingChanged 行为？

> ID：13389523
> 
> 赞同：0
> 
> 时间：2012-11-15T00:01:03.087
> 
> 标签：ios, text, uitextfield, uicontrolevents

每当我的 UITextField 中的文本发生更改时，我都会尝试使用 UIControlEventEditingChanged 注册更新。然而，发生了一些非常奇怪的事情，handlefieldTextChanged 仅在我删除 UITextField 中的字符时调用，而不是在我输入内容时调用。

这是我的代码：

```
[textField setDelegate:self];
[textField addTarget:self action:@selector(handlefieldTextChanged) forControlEvents:UIControlEventEditingChanged];

- (IBAction)handlefieldTextChanged {
    NSLog(@"handleChange");
} 
```

现在，handlefieldTextChanged 在头文件中声明，它是一个 IBAction，只是为了查看在 Interface Builder 中连接它是否可以解决任何问题，但它没有。

无论如何是什么导致这种情况发生？无论我尝试什么，我都无法获得真正的文本字段更改更新。

编辑1：

```
- (NSString *)removeBadWordsFromString:(NSString *)string {
    for (NSString * word in badWords){
        string = [string stringByReplacingOccurrencesOfString:word withString:@"" 
                                                      options:NSCaseInsensitiveSearch range:NSMakeRange(0, string.length)];
    }
    return string;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    [textField setText:[self removeBadWordsFromString:[NSString stringWithFormat:@"%@%@", textField.text, string]]];
    return (string.length == 0);
} 
```

# android - 使用片段将文本设置为文本视图

> ID：13389526
> 
> 赞同：0
> 
> 时间：2012-11-15T00:01:20.127
> 
> 标签：android, android-layout

[首先我在这里](https://stackoverflow.com/questions/11839966/settext-from-inside-a-fragment)尝试了示例中的提示（getActivity），但它不起作用

```
TextView text = (TextView)
getActivity().findViewById(R.nrOfBooksInCollection);//This results in nullpointer exception
text.setText("Text from a fragment");//This results in nullpointer exception 
```

下面的代码也不起作用。使用以下代码在 Eclipse 中没有出现错误，它只是不会更改文本视图“nrOfBooksInCollection”中的文本。

```
package com.ahmad.actionBar;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TableLayout;
import android.widget.TextView;

public class FragMent2 extends Fragment
{
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
Bundle savedInstanceState)
{
    View view = inflater.inflate(R.layout.summary, null);
    SimpleBookManager testBook = new SimpleBookManager();
    TextView nrOfBooksfield = (TextView) view.findViewById(R.id.nrOfBooksInCollection);
        String text = Integer.toString(testBook.count());
        nrOfBooksfield.setText(text);//The text doesn't change at all
        nrOfBooksfield.setText("text");//Neither does this
        return inflater.inflate(R.layout.summary, container, false);
    }
    } 
```

它在我使用活动时工作，所以 XML 文件很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:13:02.327

您在 ViewGroup 之外膨胀您的视图。尝试：

```
View view = inflater.inflate(R.layout.summary, container, null);
...
return view; 
```

# .net - Castle Windsor 的瞬态对象和 .NET 4.0 的 Parellel.For<>()

> ID：13389531
> 
> 赞同：1
> 
> 时间：2012-11-15T00:01:46.910
> 
> 标签：.net, castle-windsor, task-parallel-library, castle

我有一个使用 ANTLR 实现的复杂抽象语法树解析器/生成器，并且我将每个节点的状态维护为瞬态温莎对象。因此，在解析器启动之前，我执行 container.Install(FromXml)，它是每个状态的大 XML，将在树解析器中使用。

问题是我按顺序向下树至少 30 个级别，其中包含非常繁重的内务管理状态对象，用于 2000 行的表格数据，每行 200 个字段，以便尝试减少时间，我试图利用 .NET 的并行循环作为：

```
// for each row 
Parellel.For(0, N (i) => 
{ 
   // for each column 
   Parellel.For(0, N, (i) => 
   { 
      // use (i) in constructing a XML node tree using windsor container invoked states for       
      each node. 
   } 
}); 
```

但是我切换到 Parellel.For 与传统的 for 循环相比，我开始在状态中遇到错误，我的跟踪计数器，回溯字典正在发生冲突，说已经调用的状态以及什么不是。

我的容器本身被包裹在一个单例中，这有关系吗？对象是在瞬态中动态创建的，因此不会每次调用 container.resolve() 都会为我创建新对象。在 resolve() 和 release() 调用之间工作的两个线程是否会因为每个线程都应该有自己的状态对象？

# php - 如何让用户保持登录状态，直到他们注销或关闭浏览器

> ID：13389536
> 
> 赞同：2
> 
> 时间：2012-11-15T00:02:14.067
> 
> 标签：php, session, cookies

下面我有 3 个 php 脚本，从用户登录到存储登录详细信息，然后再注销。现在我正在做的是我正在使用`$SESSION`来确定哪个用户已登录，然后使用 session_gcmaxlife 添加额外的时间，以便会话不会过期 12 小时。因此，这意味着用户可以保持登录状态 12 小时，在这段时间之后，它将自动注销用户。这只是制作登录系统的一个非常基本的原因。

但我想要做的是能够让用户无限期地保持登录状态，直到他们点击注销链接或关闭浏览器。我的问题是，在尽可能减少代码更改的情况下，如何更改以下代码以使用户保持登录状态，直到用户注销或关闭浏览器？

这可以通过最少的代码更改来完成吗，我展示 5 个 php 脚本的原因是为了让我可以看到每个不同的脚本需要进行哪些更改，所以我应该能够对应用程序中的其他脚本进行更改.

能否请您显示一个示例代码，以便我可以查看如何以及在何处进行更改。

以下是 php 脚本，以显示当前正在发生的事情：

1.  **Teacherlogin.php**（这是用户输入登录详细信息以登录应用程序的脚本）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php

// connect to the database
include('connect.php');
include('member.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

  // required variables (make them explciit no need for foreach loop)
  $teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
  $teacherpassword = (isset($_POST['teacherpassword'])) ? $_POST['teacherpassword'] : '';
  $loggedIn = false;
  $active = true;

  if ((isset($username)) && (isset($userid))){
      echo "You are already Logged In: <b>{$_SESSION['teacherforename']} {$_SESSION['teachersurname']}</b> | <a href='./menu.php'>Go to Menu</a> | <a href='./teacherlogout.php'>Logout</a>";
  }
  else{

  if (isset($_POST['submit'])) {

      $teacherpassword = md5(md5("g3f".$teacherpassword."rt4"));  

    // don't use $mysqli->prepare here
    $query = "SELECT TeacherId, TeacherForename, TeacherSurname, TeacherUsername, TeacherPassword, Active FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("ss",$teacherusername,$teacherpassword);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbTeacherId, $dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword, $dbActive);

    while($stmt->fetch()) {
      if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
if ($dbActive == 0) {
    $loggedIn = false;
    $active = false;
    echo "You Must Activate Your Account from Email to Login";
}else {
    $loggedIn = true;
    $active = true;
      $_SESSION['teacherid'] = $dbTeacherId;
      $_SESSION['teacherusername'] = $dbTeacherUsername;
}
      }
    }

    if ($loggedIn == true){
      $_SESSION['teacherforename'] = $dbTeacherForename;
      $_SESSION['teachersurname'] = $dbTeacherSurname;
      header( 'Location: menu.php' ) ;
      die();
    }

    if (!$loggedIn && $active && isset($_POST)) {
    echo "<span style='color: red'>The Username or Password that you Entered is not Valid. Try Entering it Again</span>";
    }

       /* close statement */
    $stmt->close();

    /* close connection */
    $mysqli->close();
  }
?> 
```

**2\. member.php**（这个脚本包含`$SESSION`变量来确定哪个用户登录。这是一个非常重要的脚本，被包含（使用`include（member.php）能够确定用户是否已经登录） )

```
<?php

if (isset($_SESSION['teacherforename'])) {

$_SESSION['teacherforename'] = $_SESSION['teacherforename'];

}

if (isset($_SESSION['teachersurname'])) {

$_SESSION['teachersurname'] = $_SESSION['teachersurname'];

}

if (isset($_SESSION['teacherid'])) {

      $userid = $_SESSION['teacherid'];

  }

if (isset($_SESSION['teacherusername'])) {

      $username = $_SESSION['teacherusername'];

  }

        ?> 
```

3teacherlogout.php **（**最后这是注销页面，当用户单击注销链接（目前仅显示在menu.php中）时，它将转到该页面，并显示一条消息并执行注销销毁会话）

```
<?php

ini_set('session.gc_maxlifetime',12*60*60);
ini_set('session.gc_divisor', '1');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_lifetime', '0');
require_once 'init.php'; 

ini_set('display_errors',1); 
error_reporting(E_ALL);

session_start();

?>

</head>

<?php

include('member.php');

?>

<body>

<?php

if ((isset($username)) && (isset($userid))){
session_destroy();
echo "You have been Logged Out | <a href='./home.php'>Home</a>";
}

else {

echo "You are Not Logged In";

}

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T00:09:06.563

不要粗鲁，但看起来您并不了解会话和 cookie 如何正常工作。与其粘贴 5 页没人会看的代码，为什么不尝试自己解决问题并通过研究会话 + cookie 来学习一些东西呢？如果有人给你答案，如果你不理解它背后的概念，你将一无所获。

[http://us3.php.net/manual/en/session.idpassing.php](http://us3.php.net/manual/en/session.idpassing.php)

[http://us3.php.net/cookies](http://us3.php.net/cookies)

[http://www.tuxradar.com/practicalphp/10/0/0](http://www.tuxradar.com/practicalphp/10/0/0)

还@see[在窗口关闭时销毁会话？](https://stackoverflow.com/questions/959655/destroy-session-on-window-close)

# java - 删除包装异常的堆栈跟踪：坏主意？

> ID：13389537
> 
> 赞同：0
> 
> 时间：2012-11-15T00:02:17.753
> 
> 标签：java, logging, exception-handling, error-handling

当记录一个包装的异常时，你通常会得到一个关于包装器的长堆栈跟踪，如果有空间的话，还有几行实际的根本原因。但根本原因是我想阅读其堆栈跟踪的异常！

我将我的应用程序中的大多数异常包装在我控制的自定义异常中。（在下面的背景中对此进行推理。）为了解决这个日志记录问题，让我的自定义包装异常在构造时简单地删除它们的大部分堆栈跟踪是否合理？

如果我在构造包装器时删除了大部分堆栈跟踪，那么所有内容都会被精美地记录下来：log4j 似乎打印了 n 行关于异常及其原因的日志，并且将包装器的堆栈跟踪截断为 1 个元素为大量关于根本原因的堆栈跟踪。

我想不出任何情况，我想知道的可能不仅仅是第一行跟踪，但有些事情让我对删除堆栈跟踪信息感到困惑。我缺乏经验，我无法弄清楚我的直觉是否正确，或者我只是对不寻常的情况感到不舒服。谁能告诉我这可能有什么问题？

**相关的背景**：

我试图在大型 java webapp 中找出一个合理的第一次通过体面的错误处理。我目前的计划是在异常发生时将异常包装在自定义异常中，然后让它们冒泡到记录它们的顶层。（我想使用我的自定义包装器为我看到的每个异常附加一个唯一的 ID，这样我就可以将该 ID 传播到 UI 并在事后很长时间内轻松找到相关日志。）

[这是一个与何时记录链式异常](https://stackoverflow.com/questions/13282993/when-to-log-chained-exceptions)密切相关的后续问题？，我担心如何记录链式异常，以便获得更多关于实际原因的信息，而不是一堆关于后续包装器的无用堆栈跟踪。其中一个建议——不要链接所有层，而是让异常冒泡到我可以控制日志记录的顶层——是合理的，只要它们到达顶层，就很容易将代码放在一个地方记录根本原因，而不是包装。但是，如果我有理由捕获并记录这些异常之一，我就会再次陷入默认的日志记录行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:45:28.753

堆栈跟踪中的“... 101 多行”并不意味着堆栈跟踪不完整，因为该功能仅隐藏了冗余信息。有关更多详细信息，请参阅以下问题的编辑和接受的答案：

[如何停止在日志中截断堆栈跟踪](https://stackoverflow.com/questions/437756/how-do-i-stop-stacktraces-truncating-in-logs)

至于你的后续问题：

> 即使我的日志中的信息都是完整的，我宁愿只看到根本原因，或者首先查看根本原因。

据我所知，log4j 将堆栈跟踪渲染委托给 Throwable.printStackTrace，它不允许自定义格式。但是，它的继承者[Logback](http://logback.qos.ch/)可以在顶部写入根本原因的堆栈跟踪。

# java - 如何定义复杂的形状？

> ID：13389540
> 
> 赞同：0
> 
> 时间：2012-11-15T00:02:35.223
> 
> 标签：java, image, shape

对于这张图片，我试图为每个“领土”定义一个形状。我将如何做到这一点？

![被分割成形状的图像](../Images/0b1b3bb27783f8a716df74218b938002.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:10:17.873

我不确定你想如何实现，但这种通用方法应该有效：

*   使用边界线离散地分隔图像中的区域，这样它们就不再相互困难了。（例如，使用形态侵蚀。）
*   对图像执行“连接分量”（CC）操作，为每个区域的像素（1、2、3、...）生成不同的标签。您可能可以在网上找到一些代码来执行此操作，但是编写自己的 CC 函数很容易。
*   当用户点击一个区域时，将鼠标的 X/Y 坐标映射到您标记的图像上，以找到该点下的区域标签，并报告标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:25:58.977

希望您可以将您的区域的形状定义为一系列点 - 即 (x1, y1)、(x2, y2) 等，然后您可以使用此处定义的命中测试算法之一：[我如何确定是否为 2D点在多边形内？](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)（那里有几个很好的答案，足够笼统，您可以调整这些概念以满足您的需求）。

# java - 装饰器模式和委托模式的区别

> ID：13389544
> 
> 赞同：28
> 
> 时间：2012-11-15T00:02:52.697
> 
> 标签：java, design-patterns, decorator, delegation

装饰器模式和委托模式（如果有的话）有什么区别？我不想只知道实现细节，还想知道用例差异和如何使用它们的主观观点。

*   [装饰图案](http://en.wikipedia.org/wiki/Decorator_pattern)
*   [委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)

> **编辑：**您能否指出使用这些模式（尤其是委托，因为 Java IO 类中使用了装饰）的源代码（在 OS 项目中）。我正在寻找一些真正的用法，而不仅仅是虚拟示例。也许这些模式是相同的，只是标题不同。随意写下这个意见。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-15T08:17:11.020

装饰器使用委托，但以一种非常具体的方式。

委托（或组合）不像通过协调使用其他几个对象来构建复杂行为的一般方式那样是一种模式。它通常以固定或静态的方式使用。“设置或静态”我的意思是这样的：

```
class Delegator {
  private final ClassA a = new ClassA();
  private final ClassB b = new ClassB();

  public void doWork() {
     a.setup();
     final ResFromA resa = a.getRes();
     b.setup();
     b.consume(resa);
  }

} 
```

请注意，Delegator 不与 ClassA 或 ClassB 共享任何类型或接口，并且知道 a 和 b 的确切类型。

装饰器是一种在运行时使用委托向逻辑实体添加行为的动态方式。在装饰器中，所有实体共享一个公共接口，并使用委托来连接它们的工作。

```
public interface Item {
  public void drawAt(final int x, final int y);
}

public class CircleAround implements Item {
  private final Item wrapped;
  private final int radius;

  public CircleAround(public final Item wrapped, public final int radius) {
    this.wrapped = wrapped;
    this.radius = radius;
  }

  public void drawAt(final int x, final int y) {
    // First handle whatever we are wrapping
    wrapped.drawAt(x,y);
    // Then add our circle
    Graphics.drawCircle(x, y, radius);
  }

} 
```

请注意，与第一个示例不同，CircleAround 不知道它包装的项目的确切类型，并与其共享一个公共接口。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-15T00:20:04.250

我认为“委托模式”将无法非常清楚地通过什么是或不是模式的试金石。例如，人们仍然总是说“我知道工厂模式”。没有工厂模式。这是一个成语（参见 James Coplien 的 Advanced C++）。该页面也很弱；我不认为简单的委托是责任倒置。

当被装饰的代码必须被扩充时使用装饰器。装饰器将自己包裹在被装饰者周围并仍然调用它的方法，它只是在之前或之后做一些事情。这是你看到人们在 Aspects 出现时经常谈论 Decorator 的原因之一：它是一种依赖于中介的模式，而不是与其队列的合作。（这也是为什么在很多情况下，例如当你没有源代码时，你必须使用装饰器。）

当您想要获取正在工作的东西并让它做其他事情但根本不改变界面时，装饰器效果最好。想象一下，您有一个 Repository 类，它提供了一个接口，其中包含 CRUD 方法。现在您要添加缓存。您可以创建一个装饰存储库的 CachedRepository 并在读取时查找缓存，如果它不存在，那么它将调用常规存储库方法，否则，它可以只返回缓存的副本。Repository 类中没有更改任何代码，并且该类的用户对缓存一无所知。

# jquery - 在通过 jquery ajax 通过 $q 返回的 rails haml partials 中执行 jquery

> ID：13389547
> 
> 赞同：1
> 
> 时间：2012-11-15T00:03:10.090
> 
> 标签：jquery, ajax, coffeescript, haml, angularjs

所以我正在为一个预先存在的 Rails 应用程序编写一个 Angular 前端。我知道在将后端转换为通过 JSON 将 REST Api 直接提供给 ngResource 之前，使用 $q 充其量只是一个中间步骤，但不幸的是，目前在各种 Ruby 位置中存在太多逻辑，无法轻松地将所有内容重写为纯 Angular 格式。

问题是，我如何正确实例化和处理返回的部分中的 ng 属性。以下是经过净化的代码版本。

```
 Company.Controller.TypeAccordionController = (scope, http, element, q, typeJQueryService) ->

    scope.getTheDamnType = (id) ->
      typeJQueryService.multipart(id).then (response)->
        angular.element('.datePicker').datepicker()

   Company.Controller.TypeAccordionController.$inject = ['$scope', '$http', '$element',      '$q','typeJQuery'] 
```

返回的 HAML 正在页面上正确显示，并且日期选择器正在成功实例化。返回的 HAML 包含以下内容：

```
 = ff.check_box :completed, :class => "field sale_#{sale.price}", :disabled => sale.completed? 
```

通过以下服务：

```
 Company.MyModule.factory 'TypeJQuery', ($q, $rootScope) ->
   multipart: (element) ->
     deferred = $q.defer()
     $.get "..." + element, (data) ->
       $rootScope.$apply ->
         deferred.resolve data
     deferred.promise 
```

在指令中定义了以下 Javascript：

```
 Company.Directive.DatePickerDirective = ->
   restrict: 'C'
   controller: Company.Controller.TypeAccordionController
   link: (scope, element, attrs) ->
     $(".type-form input[type='checkbox']").click (e)->
          $checkbox = $(e.target)
          $date = $checkbox.parent('.checkbox').siblings(".target").find('.actually_completed_on_date')
          if $checkbox.is(':checked')
              if $date.val() == undefined || $date.val().length == 0
                  $date.val($.datepicker.formatDate("dd-M-yy", new Date()))
              else
                  $date.val("")

   Company.MyModule.directive 'datePicker', Company.Directive.DatePickerDirective 
```

请注意，在围绕此包装 Angular 之前，javascript 过去直接存在于资产管道中，并且过去运行得很好。

# php - 如何添加到 stdObject 数组？

> ID：13389549
> 
> 赞同：0
> 
> 时间：2012-11-15T00:03:43.983
> 
> 标签：php, arrays

这是 print_r($object) 的结果：

```
Array
(
    [0] => stdClass Object
      (
        [title] => Test procedures in watermelons
        [nid] => 494
        [type] => chsmanuscript
      )

    [1] => stdClass Object
      (
        [title] => How to eat cookies
        [nid] => 520
        [type] => chsmanuscript
      )
) 
```

如何在此对象数组中手动​​添加第三个对象项？我尝试了以下方法，但它不起作用：

```
$object[2]->title = 'test';
$object[2]->nid   = '999';
$object[2]->type  = 'chsmanuscript' 
```

错误是：致命错误：无法使用 DatabaseStatementBase 类型的对象作为数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:04:44.313

`stdClass`在尝试访问它的成员之前，您必须首先在特定数组元素中创建一个新对象：

```
$object[2] = new stdClass();
$object[2]->title = 'test';
$object[2]->nid   = '999';
$object[2]->type  = 'chsmanuscript' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:07:27.610

```
 $object[] = (object)array('title'=>'test', 
                   'ndid'=>'999',
                   'type'=> 'chsmanuscript'); 
```

这会推送到数组，如果您需要将其推送到第三个位置，请在 $object[#] 中指定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T00:10:13.920

你也可以这样做

```
$object[2] = (object)array('title'=>'test', 'nid'=>'999', 'type'=>'chsmanuscript'); 
```

# json - Oracle：以 JSON 格式返回行？

> ID：13389550
> 
> 赞同：3
> 
> 时间：2012-11-15T00:03:49.647
> 
> 标签：json, oracle

有没有办法告诉 Oracle 从查询中以 JSON 字符串的形式返回行？

例如，

```
select 11,'abc' from dual; 
```

会回来

```
[11,"abc"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T02:03:28.520

没有简单的功能，没有。Sourceforge有[PL/JSON](http://sourceforge.net/projects/pljson/)。此外，这篇[ORA-0001](http://ora-00001.blogspot.com/2010/02/ref-cursor-to-json.html)博客文章演示了一种使用 XML 的方法（页面下方）。

# c# - 创建子矩阵

> ID：13389553
> 
> 赞同：0
> 
> 时间：2012-11-15T00:03:55.783
> 
> 标签：c#, datetime

我想在 tradeTime > sessionBegin 和 < sessionEnd `SubMatrix`.`ArrayList`

```
DateTime tradeTime;
private DateTime sessionBegin;
private DateTime sessionEnd;

int[,] hTrades =
{
    { 2012, 11, 9, 10, 24, 1, -1, 8515 }, 
    { 2012, 11, 9, 10, 24, 2, -1, 8515 }, 
    { 2012, 11, 9, 10, 44, 3, 1, 8530 }, 
    { 2012, 11, 9, 10, 44, 4, 1, 8535 }, 
    { 2012, 11, 9, 10, 55, 5, -1, 8537 }, 
    { 2012, 11, 9, 10, 55, 6, -1, 8537 }, 
    { 2012, 11, 9, 11, 1, 7, 1, 8552 }, 
    { 2012, 11, 9, 11, 7, 8, 1, 8556 }, 
    { 2012, 11, 11, 18, 18, 1, 1, 8617 }, 
    { 2012, 11, 11, 18, 18, 2, 1, 8617 }, 
    { 2012, 11, 11, 18, 18, 3, 1, 8617 }, 
    { 2012, 11, 11, 18, 18, 4, 1, 8617 }
};

tradeTime = new DateTime(hTrades[i, 0], hTrades[i, 1], hTrades[i, 2],
    hTrades[i, 3], hTrades[i, 4], 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:26:48.403

首先，处理那个二维数组可能会有点尴尬。为简化起见，您可以将该矩阵的每一行分组为一个对象：

```
class Trade
{
    public DateTime Date { get; set; }
    public int Value1 { get; set; }
    public int Value2 { get; set; }
}

....

DateTime sessionBegin = new DateTime(2012, 11, 9, 11, 0, 0);
DateTime sessionEnd = new DateTime(2012, 11, 9, 12, 0, 0);
List<Trade> trades = new List<Trade>();

for(int i = 0; i < hTrades.GetLength(0); i++)
{
    trades.Add(new Trade()
    {
        Date = new DateTime(hTrades[i, 0], hTrades[i, 1], hTrades[i, 2], hTrades[i, 3], hTrades[i, 4], 0),
        Value1 = hTrades[i, 5],
        Value2 = hTrades[i, 6]
    });
}

var sessionTrades = trades.Where(t => t.Date > sessionBegin && t.Date <= sessionEnd); 
```

这将找到`Trade`与以下交易相对应的对象：

```
{ 2012, 11, 9, 11, 1, 7, 1, 8552 },
{ 2012, 11, 9, 11, 7, 8, 1, 8556 } 
```

# .net - 可变长度后视中的平衡组

> ID：13389560
> 
> 赞同：14
> 
> 时间：2012-11-15T00:04:17.240
> 
> 标签：.net, regex, lookaround, balancing-groups

> **TL;DR：**在 .NET 的lookbehinds 中使用捕获（特别是平衡组）会改变获得的捕获，尽管它不应该产生影响。.NET 的lookbehinds 是什么破坏了预期的行为？

我试图想出对[另一个问题的答案，以此](https://stackoverflow.com/questions/13387132/regular-expression-to-check-if-a-string-is-within-certain-pattern-that-may-conta)作为玩弄 .NET 平衡组的借口。但是，我无法让它们在可变长度的后视中工作。

首先，请注意，我不打算有效地使用这个特定的解决方案。这更多是出于学术原因，因为我觉得可变长度后视发生了一些我不知道的事情。并且知道将来当我实际上需要使用这样的东西来解决问题时，它可能会派上用场。

考虑这个输入：

```
~(a b (c) d (e f (g) h) i) j (k (l (m) n) p) q 
```

目标是匹配所有字母，这些字母在括号内，前面有`~`，不管有多深（所以从`a`到`i`）。我的尝试是在后视中检查正确的位置，以便我可以在一次调用中获取所有字母`Matches`。这是我的模式：

```
(?<=~[(](?:[^()]*|(?<Depth>[(])|(?<-Depth>[)]))*)[a-z] 
```

在后视中，我尝试找到一个`~(`，然后我使用命名的组堆栈`Depth`来计算无关的左括号。只要在其中打开的括号`~(`从未关闭，则向后查找应该匹配。如果到达了右括号，`(?<-Depth>...)`则无法从堆栈中弹出任何内容，并且后向查找应该失败（即，对于来自 的所有字母`j`）。不幸的是，这不起作用。相反，我匹配`a`, `b`, `c`, `e`, `f`,`g`和`m`. 所以只有这些：

```
~(a b (c) _ (e f (g) _) _) _ (_ (_ (m) _) _) _ 
```

这似乎意味着一旦我关闭了一个括号，lookbehind 就无法匹配任何东西，**除非**我回到我之前去过的最高嵌套级别。

好的，这可能只是意味着我的正则表达式有些奇怪，或者我没有正确理解平衡组。但后来我尝试了这个，没有向后看。我为每个字母创建了一个字符串，如下所示：

```
~(z b (c) d (e f (x) y) g) h (i (j (k) l) m) n
~(a z (c) d (e f (x) y) g) h (i (j (k) l) m) n
~(a b (z) d (e f (x) y) g) h (i (j (k) l) m) n
....
~(a b (c) d (e f (x) y) g) h (i (j (k) l) z) n
~(a b (c) d (e f (x) y) g) h (i (j (k) l) m) z 
```

并在其中的每一个上使用了这种模式：

```
~[(](?:[^()]*|(?<Depth>[(])|(?<-Depth>[)]))*z 
```

并且根据需要，所有案例都匹配，其中替换和之后的所有案例`z`之间的一个字母失败。`a``i`

那么（可变长度）lookbehind 做了什么打破了平衡组的这种使用？我整个晚上都试图研究这个（并找到了像[这样的](http://weblogs.asp.net/whaggard/archive/2005/02/20/377025.aspx)页面），但我在回顾中找不到这个的单一用途。

如果有人可以将我链接到有关 .NET 正则表达式引擎如何在内部处理 .NET 特定功能的一些深入信息，我也会很高兴。我发现[了这篇很棒的文章](http://www.moserware.com/2009/03/how-net-regular-expressions-really-work.html)，但它似乎并没有进入（可变长度）lookbehinds，例如。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T23:11:26.937

我想我明白了。
首先，正如我在其中一个评论中提到的，`(?<=(?<A>.)(?<-A>.))`永远不匹配。
但后来我想，怎么`(?<=(?<-A>.)(?<A>.))`办？它确实匹配！
怎么样`(?<=(?<A>.)(?<A>.))`？匹配`"12"`,`A`是 captures `"1"`，如果我们查看`Captures`集合，它是`{"2", "1"}`- 前两个，然后是一个 - 它是相反的。
**因此，在向后看时，.net 从右到左匹配和捕获**。

现在，我们怎样才能让它从左到右捕获呢？这很简单，真的 - 我们可以使用前瞻来欺骗引擎：

```
(?<=(?=(?<A>.)(?<A>.))..) 
```

应用于您的原始模式，我想出的最简单的选择是：

```
(?<=
    ~[(]
    (?=
        (?:
            [^()]
            |
            (?<Depth>[(])
            |
            (?<-Depth>[)])
        )*
        (?<=(\k<Prefix>))   # Make sure we matched until the current position
    )
    (?<Prefix>.*)           # This is captured BEFORE getting to the lookahead
)
[a-z] 
```

这里的挑战是，现在平衡部分可能会在任何地方结束，所以我们让它一直到达当前位置（类似`\G`或`\Z`在这里有用的东西，但我不认为 .net 有）

这种行为很可能记录在某处，我会尝试查找它。

这是另一种方法。这个想法很简单——.net 想要从右到左匹配？美好的！拿那个：（
提示：**从底部开始阅读**- 这就是.net的做法）

```
(?<=
    (?(Depth)(?!))  # 4\. Finally, make sure there are no extra closed parentheses.
    ~\(
    (?>                     # (non backtracking)
        [^()]               # 3\. Allow any other character
        |
        \( (?<-Depth>)?     # 2\. When seeing an open paren, decreace depth.
                            #    Also allow excess parentheses: '~((((((a' is OK.
        |
        (?<Depth>  \) )     # 1\. When seeing a closed paren, add to depth.
    )*
)
\w                          # Match your letter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T04:37:20.593

我认为问题在于数据而不是模式。数据具有需要匹配的“发布”项目，例如

(ab (c) 定义)

其中 de 和 f 需要匹配。更*平衡*的数据将是

(ab(c)(d)(e)(f))

* * *

所以我对这个示例数据采取的策略需要大括号后的赛后情况：

〜（ab（c）d（ef（g）h）i）jk

j & k 应该被忽略的地方......我的模式失败并捕获了它们。

有趣的是，我命名了捕获组以找出它们进入的位置，而 j 和 k 在捕获三中进入。我留给你的不是答案，而是尝试看看你是否可以改进它。

```
(~                         # Anchor to a Tilde
 (                         # Note that \x28 is ( and \x29 is )      
  (                          # --- PRE ---
     (?<Paren>\x28)+          # Push on a match into Paren
     ((?<Char1>[^\x28\x29])(?:\s?))*
   )+                         # Represents Sub Group 1
  (                           #---- Closing
   ((?<Char2>[^\x28\x29])(?:\s?))*
   (?<-Paren>\x29)+           # Pop off a match from Paren

  )+  
  (
     ((?<Char3>[^\x28\x29])(?:\s?))*   # Post match possibilities
  )+

 )+
(?(Paren)(?!))    # Stop after there are not parenthesis    
) 
```

这是使用我自己创建的工具进行的比赛（也许有一天我会发布）。请注意，˽ 显示匹配空格的位置。

```
Match #0
               [0]:  ~(a˽b˽(c)˽d˽(e˽f˽(g)˽h)˽i)˽j˽k
       ["1"] → [1]:  ~(a˽b˽(c)˽d˽(e˽f˽(g)˽h)˽i)˽j˽k
       →1 Captures:  ~(a˽b˽(c)˽d˽(e˽f˽(g)˽h)˽i)˽j˽k
       ["2"] → [2]:  (e˽f˽(g)˽h)˽i)˽j˽k
       →2 Captures:  (a˽b˽(c)˽d˽, (e˽f˽(g)˽h)˽i)˽j˽k
       ["3"] → [3]:  (g
       →3 Captures:  (a˽b˽, (c, (e˽f˽, (g
       ["4"] → [4]:  g
       →4 Captures:  a˽, b˽, c, e˽, f˽, g
       ["5"] → [5]:  ˽i)
       →5 Captures:  ), ), ˽h), ˽i)
       ["6"] → [6]:  i
       →6 Captures:  ˽, h, ˽, i
       ["7"] → [7]:  
       →7 Captures:  ˽d˽, , ˽j˽k, 
       ["8"] → [8]:  k
       →8 Captures:  ˽, d˽, ˽, j˽, k
   ["Paren"] → [9]:  
  ["Char1"] → [10]:  g
      →10 Captures:  a, b, c, e, f, g
  ["Char2"] → [11]:  i
      →11 Captures:  ˽, h, ˽, i
  ["Char3"] → [12]:  k
      →12 Captures:  ˽, d, ˽, j, k 
```

# scheme - 在方案中添加列表元素

> ID：13389563
> 
> 赞同：0
> 
> 时间：2012-11-15T00:04:27.840
> 
> 标签：scheme

如何编写一个将列表和数字作为参数并使用尾递归计算并返回列表中从头开始直到遇到数字 m 的第一个实例的所有数字的总和的 Scheme 过程？（如果从未遇到过，则返回值将是列表中所有元素的总和。）例如，(proc (list 1 2 3 4 5 6) 4) 应该返回 6。我处理了该过程及其基本案例，如果列表为空，则返回 0。但是我需要另一个基本情况，当列表不包含作为参数给出的数字时，它返回列表元素的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:58:44.880

Óscar López 的回答是正确的。这是相同代码的一个版本，使用命名`let`，即（在我看来，至少）更易于阅读：

```
(define (add-until lst num)
  (let loop ((lst lst)
             (acc 0))
    (if (or ???
            (= ??? ???))
        acc
        (loop ??? (+ ??? ???))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:47:09.200

因为这是作业，所以这次我不会给你一个直接的答案。以下是需要做什么的总体思路，请填空：

```
(define (add-until lst num acc)
  (if (or <???>            ; if the list is null
          (= <???> <???>)) ; or the current element equals `num`
      acc                  ; then return the accumulator
      (add-until           ; else make a recursive call
       <???>               ; advance to the next element in list
       num                 ; pass along the same `num`
       (+ <???> <???>))))  ; update the accumulator with current element 
```

如果在函数返回后除了返回其值之外没有任何事情可做，则函数调用被称为尾递归，正如您在上面的代码中看到的那样`else`，过程中的部分以调用结束`add-until`并且之后没有其他事情要做.

通常，*累加器*用于保存计算的部分结果，并在递归的基本情况下在最后返回。在这个例子中，累加器被调用`acc`并且在每次迭代时它的值都会被更新，最后它被返回。

当然，累加器需要初始化为合适的值。对于问题中的示例，这是您调用该`add-until`过程的方式：

```
(add-until '(1 2 3 4 5 6) 4 0)
=> 6 
```

或者，您可以定义两个过程 - 一个实现实际迭代并接收累加器作为参数的助手（这是我在上面概述的那个），另一个只接收两个参数并始终调用带有初始值的助手过程的值`0`。

# expression-blend-4 - Blend 4 不喜欢 64 位 dll？

> ID：13389573
> 
> 赞同：1
> 
> 时间：2012-11-15T00:06:19.880
> 
> 标签：expression-blend-4

我在 Visual Studio 中将项目设置为 x64，当我切换到 Blend 并尝试添加对象数据源时，除非我将其切换回 x86，否则我的程序集不会出现。Blend 不支持 64 位 dll 吗？

编辑：是的，我确实选中了“显示所有程序集”复选框。

# android - CursorAdapter 抛出“无法读取 [...] col -1”

> ID：13389578
> 
> 赞同：0
> 
> 时间：2012-11-15T00:06:43.317
> 
> 标签：android, android-cursoradapter

我不习惯这种适配器，而且我遇到了 CursorAdaptor 的问题。这是我的课程：

```
public class TicketsAdapter extends CursorAdapter {
    private Cursor cursor;
    private Context context;
    private final LayoutInflater inflater;

    public TicketsAdapter (Context context, Cursor cursor) {
        super(context, cursor, FLAG_REGISTER_CONTENT_OBSERVER);
        this.cursor = cursor;
        this.context = context;
        inflater = LayoutInflater.from(context);
    }

    public void bindView(View view, Context context, Cursor cursor) {
        //cursor.moveToFirst();     I have tried this, same error   
        //try {    I have used this 'try' and find out here's the code where an exception is being throwed
        TextView ticketId = (TextView) view.findViewById(R.id.ticketId);
        TextView ticketCourse = (TextView) view.findViewById(R.id.ticketCourse);
        TextView ticketDate = (TextView) view.findViewById(R.id.ticketDate);
        TextView ticketTime = (TextView) view.findViewById(R.id.ticketTime);
        RelativeLayout row = (RelativeLayout) view.findViewById(R.id.ticketRow);
        TextView jogodaveia = (TextView) view.findViewById(R.id.textView1);

        ticketId.setText(cursor.getString(cursor.getColumnIndex("ticket_id")));
        ticketCourse.setText(cursor.getString(cursor.getColumnIndex("course")));
        ticketDate.setText(cursor.getString(cursor.getColumnIndex("date")));
        ticketTime.setText(cursor.getString(cursor.getColumnIndex("departure")));

        String present = cursor.getString(cursor.getColumnIndex("present"));

        if (present.equals("0")) {
            row.setBackgroundColor(Color.rgb(210, 245, 210));
            jogodaveia.setTextColor(Color.rgb(16, 181, 4));
        } else {
            row.setBackgroundColor(Color.rgb(255, 255, 255));
            jogodaveia.setTextColor(Color.rgb(206, 109, 0));
        }
        //} catch (Exception e) {android.util.Log.w("ADAPTER", e.toString());}
    }

    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        final View view = inflater.inflate(R.layout.ticket,parent,false); 
        return view;
    }
} 
```

在我的 Tickets.java 中，我有：

```
public class Tickets extends ListActivity {
    private SQLiteDatabase db=null;
    private Cursor cursor=null;
    private ListView layout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tickets);

        layout = getListView();
        layout.setDividerHeight(3);

        db = (new DatabaseHelper(this)).getWritableDatabase();
        cursor = db.rawQuery("SELECT _id, ticket_id, course, date, departure FROM tickets ORDER BY date",
                                                            null);
        //cursor.moveToFirst();   I have tried this here too
        layout.setAdapter(new TicketsAdapter (Tickets.this, cursor));

    }
    ....
} 
```

我得到的错误是

```
Failed to read row 0, column -1 from a CursorWindow which has 5 rows, 5 columns.
11-15 00:03:30.700: W/ADAPTER(1756): java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it. 
```

但是，我的列表仍然显示，但不能正常工作。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:22:19.193

```
Failed to read row 0, column -1 
```

这意味着找不到您的*列之一，行索引很好。*

* * *

在这里你要求`"present"`：

```
String present = cursor.getString(cursor.getColumnIndex("present")); 
```

`"present"`但是您在查询中忘记了：

```
cursor = db.rawQuery("SELECT _id, ticket_id, course, date, departure FROM tickets ORDER BY date", null); 
```

* * *

此外，您应该`newView()` *一次*找到所有视图并将它们存储在 ViewHolder 中。您的列索引也是如此。无需重复搜索相同的信息，这将为您提供更快的应用程序。

# php - MySQL可以自动将空字符串转换为NULL吗？

> ID：13389579
> 
> 赞同：20
> 
> 时间：2012-11-15T00:06:43.387
> 
> 标签：php, mysql, forms, sql-null

MySQL 空字符串与这里的 NULL 相比，[MySQL 有一个很好的 SO，最好插入 NULL 或空字符串？](https://stackoverflow.com/questions/1267999/mysql-better-to-insert-null-or-empty-string)，但是它没有考虑“一致性”——即，如果你想在你的表中只有一个选择（即空字符串或 NULL），应该是哪一个？

我的问题是，我可以让 MySQL 自动将空字符串存储为 NULL 吗？

在阅读了之前的 SO 之后，我通常倾向于存储 NULL，但问题是我有很多带有可选字段的 PHP 表单，并且（当留空时）这些返回空字符串。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-15T00:10:04.893

你可以用`NULLIF()`

你像这样使用它：

```
NULLIF('test','') --> returns 'test'
NULLIF(''    ,'') --> returns NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:13:52.973

作为 NULLIF 的替代方法，您可以将默认值设置为 NULL 并且不传递空字段。

# iphone - UIDatePicker 绘制时间到另一种颜色

> ID：13389583
> 
> 赞同：1
> 
> 时间：2012-11-15T00:07:30.470
> 
> 标签：iphone, objective-c, ios, uidatepicker

我有 UIDatePicker，我想在 UIDatePicker 中绘制时间，例如灰色

我需要这个，如果在我的图形中绘制了一些间隔，那么在 datePicker 中用户无法选择这个时间

![在此处输入图像描述](../Images/82d2d5441f98846245c097ae1c2d336d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:57:43.123

很抱歉告诉你，但`UIDatePicker`不支持像你描述的那样设置有效时间范围。唯一的选项是最小和最大日期。如果你真的需要这个，你需要从头开始构建一个自定义控件，这将花费很多精力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:30:13.777

I think I found my solution, I can draw time to another color

```
for (UIView *view in datePicker.subviews) {
        for (UIView *subView in view.subviews) {
            for (UIView *subSubView in subView.subviews) {
                for (UIView *thirdSubView in subSubView.subviews) {
                    for (UILabel *label in thirdSubView.subviews) {
                        if ([label isKindOfClass:[UILabel class]]) {
                            label.textColor = [UIColor redColor];
                        }
                    }
                }
            }
        }
    } 
```

![enter image description here](../Images/dbf7c77c817054632f09ca4fc1dbe610.png)

I need to catch event when scrolling DatePicker, I doing this, and this work, but I break the scroll

```
for (UIView *view in datePicker.subviews) {
        for (UIView *subView in view.subviews) {
            Class UIPickerTableView = objc_getClass("UIPickerTableView");

            if ([subView isKindOfClass:UIPickerTableView]) {
                UITableView *sub = (UITableView *) subView;
                sub.delegate = self;
            }
            for (UIView *subSubView in subView.subviews) { 
```

![enter image description here](../Images/0feb9b345d557684769806067f84bc36.png)

I try doing another way, but it doesn't work

```
for (UIView *view in datePicker.subviews) {
        for (UIView *subView in view.subviews) {
            Class UIPickerTableView = objc_getClass("UIPickerTableView");

            Method targetMethod = class_getInstanceMethod(UIPickerTableView, @selector(scrollViewDidScroll:));
            Method newMethod = class_getInstanceMethod(UIPickerTableView, @selector(__scrollViewDidScroll:));
            method_exchangeImplementations(targetMethod, newMethod);

            for (UIView *subSubView in subView.subviews) { 
```

# websocket - stomp-websocket + ActiveMQ

> ID：13389592
> 
> 赞同：1
> 
> 时间：2012-11-15T00:08:13.293
> 
> 标签：websocket, activemq, stomp

我设法让 ActiveMQ 通过 WebSockets 与 Stomp 一起工作[https://github.com/jmesnil/stomp-websocket](https://github.com/jmesnil/stomp-websocket)但我遇到了一个与多个消费者/订阅者共享相同 IP/路由器有关的奇怪问题。

我们的 ActiveMQ 服务器位于我们的办公室外。当办公室的两个订阅者连接到队列时，分派到队列的消息一次只发送给一个订阅者，但不会同时发送给两个消费者。

当我查看 ActiveMQ 管理面板上的连接选项卡时，我看到以下内容：

ID：ip-10-32-59-175-56297-1352930853863-2:199 StompSocket_565594188 true false

ID：ip-10-32-59-175-56297-1352930853863-2:370 StompSocket_350506451 真假

我是否在 ActiveMq 配置方面遗漏了什么，这与 Stomp JS 库有关还是其他什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:25:18.637

这是队列的本质，只有一个订阅者会收到放置在队列上的消息，如果您想要消息广播，那么您想要订阅一个主题。

[队列与主题](http://activemq.apache.org/how-does-a-queue-compare-to-a-topic.html)

# cakephp - 模型视图控制器中关联 HABTM 模型的 CakePHP 分页

> ID：13389596
> 
> 赞同：0
> 
> 时间：2012-11-15T00:08:36.710
> 
> 标签：cakephp, pagination, cakephp-2.0

我有两个模型 - 产品和类别 类别模型 HABTM 产品

当我创建视图控制器来查看单个类别时，我的递归设置为 1，因此我可以加载该类别中的产品。这很简单，工作正常。

但是，我怎样才能只对类别中的产品进行分页和/或排序。我尝试了三四种不同的方法，但没有一种方法能满足我的期望——我可以将分页产品传递给视图以创建排序/分页产品的网格。

这是控制器，所有标准的东西：

```
//CATEGORY CONTROLLER
public function view($id = null) {

    $category = $this->Category->find('first', array(
        'recursive' => 1,
        'conditions' => array('Category.id' => $id)
    ));

    if (empty($category)) {
        $this->redirect(array('action' => 'index'), 301);
        $this->Session->setFlash('The category could not be found.');
    }
    $this->set(compact('category'));

    // paginate products and make them available to view -- ???

} 
```

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:26:44.960

在[分页文档](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)中，搜索以下文本

> 以您要配置的模型命名数组的键

这包括如何处理多个和/或“其他”模型。简而言之，你想要的东西看起来像：

```
// CategoriesController::view()
$this->paginate = array(
    'Product' => array(
        'conditions' => array('Product.category_id' => $category_id)
    ),
);
$products = $this->paginate('Product');
$this->set(compact('products')); 
```

请注意，条件现在排列在名为“产品”的键下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T22:02:10.493

与此处提出的另一个问题相同的方法。解决方案：[如何从一个类别中获取书籍，不包括其他类别（通过交叉表）](https://stackoverflow.com/questions/13394429/how-to-get-books-from-one-category-excluding-other-category-through-cross-table#answer-13406919)

将链接模型与分页结合起来，您就完成了。获取所有相关产品后，您只需按 product_id 而不是 category_id 进行过滤。使用链接模型进行分页查找也应该有效。虽然从未尝试过。只是测试它;）

问候 func0der

# nuget - 使用项目引用创建 NuGet 包

> ID：13389597
> 
> 赞同：0
> 
> 时间：2012-11-15T00:08:40.570
> 
> 标签：nuget, symbols

我们有以下解决方案结构：

```
Solution
--Project1
--Project2
... 
```

在项目 2 中是接口。项目 1 对项目 2 有参考。我们正在使用 Nuget.exe 构建包，如下所示：

```
NuGet.exe Pack Project1.csproj -Symbols 
```

我们得到的是两个包，一个带有源代码而 pdb 的另一个仅带有程序集。但是缺少的是来自其他项目（项目 2）的源、pdb 和程序集。如果我们手动添加它（这是相当乏味的工作），我们可以将符号包上传到符号服务器。

我们做错了什么？我们是否有必要也从项目 2 构建 NuGet 包并使项目 1 依赖于该项目（这也是相当乏味的工作）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:22:28.427

是的，您需要为项目 2 创建一个包并将其添加为项目 1 的依赖包。我已经提出了一个[问题](http://nuget.codeplex.com/workitem/2825)，看看是否有办法对其进行优化。

谢谢

布瓦

# android - 在没有 GSM 连接的情况下在 android 中填充 SMS

> ID：13389599
> 
> 赞同：1
> 
> 时间：2012-11-15T00:09:00.273
> 
> 标签：android, sms

有没有办法可以在 Android 上创建 SMS 来测试我正在创建的应用程序？这是在实际手机上。我相信有一种方法可以在模拟器上做到这一点。手机本身可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:55:19.287

您可以使用我的代码片段生成 SMS 消息

```
 private static void createFakeSms(Context context, String sender,
        String body) {
    byte[] pdu = null;
    byte[] scBytes = PhoneNumberUtils
            .networkPortionToCalledPartyBCD("0000000000");
    byte[] senderBytes = PhoneNumberUtils
            .networkPortionToCalledPartyBCD(sender);
    int lsmcs = scBytes.length;
    byte[] dateBytes = new byte[7];
    Calendar calendar = new GregorianCalendar();
    dateBytes[0] = reverseByte((byte) (calendar.get(Calendar.YEAR)));
    dateBytes[1] = reverseByte((byte) (calendar.get(Calendar.MONTH) + 1));
    dateBytes[2] = reverseByte((byte) (calendar.get(Calendar.DAY_OF_MONTH)));
    dateBytes[3] = reverseByte((byte) (calendar.get(Calendar.HOUR_OF_DAY)));
    dateBytes[4] = reverseByte((byte) (calendar.get(Calendar.MINUTE)));
    dateBytes[5] = reverseByte((byte) (calendar.get(Calendar.SECOND)));
    dateBytes[6] = reverseByte((byte) ((calendar.get(Calendar.ZONE_OFFSET) + calendar
            .get(Calendar.DST_OFFSET)) / (60 * 1000 * 15)));
    try {
        ByteArrayOutputStream bo = new ByteArrayOutputStream();
        bo.write(lsmcs);
        bo.write(scBytes);
        bo.write(0x04);
        bo.write((byte) sender.length());
        bo.write(senderBytes);
        bo.write(0x00);
        bo.write(0x00); // encoding: 0 for default 7bit
        bo.write(dateBytes);
        try {
            String sReflectedClassName = "com.android.internal.telephony.GsmAlphabet";
            Class cReflectedNFCExtras = Class.forName(sReflectedClassName);
            Method stringToGsm7BitPacked = cReflectedNFCExtras.getMethod(
                    "stringToGsm7BitPacked", new Class[] { String.class });
            stringToGsm7BitPacked.setAccessible(true);
            byte[] bodybytes = (byte[]) stringToGsm7BitPacked.invoke(null,
                    body);
            bo.write(bodybytes);
        } catch (Exception e) {
        }

        pdu = bo.toByteArray();
    } catch (IOException e) {
    }

    Intent intent = new Intent();
    intent.setClassName("com.android.mms",
            "com.android.mms.transaction.SmsReceiverService");
    intent.setAction("android.provider.Telephony.SMS_RECEIVED");
    intent.putExtra("pdus", new Object[] { pdu });
    intent.putExtra("format", "3gpp");
    context.startService(intent);
}

private static byte reverseByte(byte b) {
    return (byte) ((b & 0xF0) >> 4 | (b & 0x0F) << 4);
} 
```

它将调用新的 SMS。[其他问题你可以在我的回答](https://stackoverflow.com/a/12338541/1050058)中看到更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:15:10.420

是的。使用运营商的适当电子邮件网关向您的电话号码发送电子邮件（即 5555555555@mobile.att.net）

该电子邮件将作为 SMS 消息发送到您的手机。

# ruby-on-rails - 'rails generate model...' 不返回任何内容

> ID：13389603
> 
> 赞同：0
> 
> 时间：2012-11-15T00:09:10.673
> 
> 标签：ruby-on-rails, ruby, omniauth

所以我目前正在关注本教程： http: [//net.tutsplus.com/tutorials/ruby/how-to-use-omniauth-to-authenticate-your-users/](http://net.tutsplus.com/tutorials/ruby/how-to-use-omniauth-to-authenticate-your-users/)

并且在第 5 步上很糟糕。我设法执行第 4 步，它使用 generate 命令创建一个新的控制器文件。现在我需要为用户创建一个具有名称和电子邮件作为属性的模型。输入：

'rails 生成模型用户名：字符串电子邮件：字符串'

它只挂了几秒钟，然后什么也没返回，只是让我再次访问命令行。（运行 Windows 7）

我不知道我是否遗漏了什么，我已经为 sqlite3 和 activeRecord 安装了 gem，我认为这不是一个问题。

我完全迷失了，因为它没有给我任何信息，也没有创建我期望的文件。我在我的应用程序目录 C:\user\steve\documents\gitrepositories\AppName 中键入这些命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:23:21.023

我认为教程令人困惑；因为它说“在 Rails 控制台（rails 控制台）中，创建新模型”。而且您不应该在 rails 控制台（“rails c”命令）中执行该操作，您应该在 Windows 控制台中执行该命令，当然也应该在应用程序的根文件夹中执行该命令。该命令非常好，希望这会有所帮助

更新：

尝试在所述命令之前进行捆绑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T12:13:40.307

我对 Rails 4.2.5 和 Ruby 2.3 也有同样的问题。跑步`bundle update`为我解决了这个问题。

# php - 用 Apache mod-rewrite 重写 url

> ID：13389605
> 
> 赞同：0
> 
> 时间：2012-11-15T00:09:56.940
> 
> 标签：php, apache, mod-rewrite

我有一个由两个域共享的应用程序；domain1.com 和 domain2.com 都在它们的虚拟目录中：

```
RewriteEngine on
Options +FollowSymlinks
RewriteRule ^/application(.*)$ c:/server/web/application/www/$1 
```

这样 domain1.com/application 和 domain2.com/application 都指向它，我不必将应用程序物理地放在每个域下的文件夹中。

现在，我想开始让更深的网址看起来“更好”：

```
domain1.com/application/account/0322734174/notes/desc 
```

代替：

```
domain1.com/application/account/index.php?number=0322734174&view=notes&sort=desc 
```

但我无法让它与任何东西一起工作，而我尝试的一切都无济于事。我认为这是一个规则冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:48:27.807

我想到了！

```
RewriteLog
RewriteLogLevel 4 
```

是你的朋友（加上大量的反复试验和时间）

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^/application/(.*)$ c:/server/web/application/www/$1
RewriteRule ^c:/server/web/application/www/account/([^/\.]+)/?$ c:/server/web/application/www/account/index.php?action=$1 
```

作品。在第一条规则之后必须使用绝对路径

谢谢你的时间

# javascript - stringByEvaluatingJavaScriptFromString，查找特定的输入标签

> ID：13389610
> 
> 赞同：1
> 
> 时间：2012-11-15T00:10:18.890
> 
> 标签：javascript, ios, uiwebview

我已经将一个网页加载到我的 UIWebView 中，并且该页面包含许多输入标签。我想确定一个看起来像：

`<input name="j_username" type="text" tabindex="1" />`

你知道我会在 stringByEvaluatingJavaScriptFromString 中写什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:23:08.507

我会使用 document.getElementsByName：

```
NSString* jsString = @"var myElement = document.getElementsByName(\"j_username\")[0];";
[theWebView stringByEvaluatingJavaScriptFromString:jsString]; 
```

# sql - KornShell SQL 脚本解析器——从 ksh 并行执行

> ID：13389611
> 
> 赞同：0
> 
> 时间：2012-11-15T00:10:21.027
> 
> 标签：sql, shell, parsing, parallel-processing, ksh

我正在尝试在 KornShell (ksh) 协同进程中并行运行一堆脚本。其中一些脚本包含许多 DDL 语句。这些 DDL 语句被确定为独立的，并且针对不同的（和大型/昂贵的，例如：3500 万行及以上）数据库对象工作。为了并行运行它们，我正在考虑为每个 DDL 语句创建单独的子脚本 - 这样我就可以说： SQL*Plus - 这将是很多 :( - 导致读取和写入过多 -因为它是一个批处理过程，所以所需的时间不是很关键，但是（在这个单一的磁盘并行执行环境中可能仍然会导致抖动）..

我仍然不喜欢物理脚本扩散的想法。想知道是否有办法从 ksh 调用解析器，以便我可以从相当大的脚本文件中提取每个 DDL / DML 或任何其他语句并以编程方式执行它们在后台进程中..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:15:42.440

这会起作用吗：

```
cat DDL_statements | parallel -j20 --pipe -N 10 sql oracle://scott:tiger@server 
```

这假设 DDL_statements 是 1 行长（如果它们不是 1 行长，请举几个例子）。它并行运行 20 个作业，并以 10 个语句块的形式启动它们。

它使用 GNU Parallel（和 GNU sql - GNU Parallel 的一部分）。

# objective-c - 自定义文本字段 - 镜像自动更正

> ID：13389613
> 
> 赞同：3
> 
> 时间：2012-11-15T00:10:56.187
> 
> 标签：objective-c, ios, core-text, uikeyboard, uitextinput

我正在使用 CoreText 实现自定义 UITextView（基于 EGOTextView）并符合[`UITextInput`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInput_Protocol/Reference/Reference.html)协议。除了一件烦人的事情外，我几乎所有东西都运行良好（呸！）。自动更正建议文本垂直镜像，其突出显示略微向右移动。这是它的样子：

![镜像自动校正](../Images/28eb4c94ba87b41db1090196a13acde2.png)

在文本字段中，我输入了“helo”，它会自动更正为“帮助”。如您所见，自动更正文本（而不是其背景）是垂直镜像的。此外，它向右水平偏移约 7pt。

为了解决第二个问题（水平偏移），我已经验证该`firstRectForRange:`方法返回正确的`CGRect`. 我已经通过两种方式做到了这一点。第一个是目视检查当我显示 a 时`UIMenuController`它是否出现在正确的位置（确实如此）。二是围绕`CGRect`返回的 by画一个轮廓`firstRectForRange:`。这是与`CGRect`概述相同的文本。

![概述 CGRect](../Images/0a6d0a895014daa899177bb3ce5f63a3.png)

如您所见，正确的区域被勾勒出来，但自动更正被错误地标记/突出显示。

我很乐意分享任何代码，但这是一个庞大的课程，我现在很困惑。任何指针将不胜感激！

**编辑：**源代码可在此存储库的 Experimental 分支上找到：[github.com/cbrauchli/EGOTextView](https://github.com/cbrauchli/EGOTextView)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:37:55.847

我在尝试您的代码时也遇到了同样的问题，我发现没有必要实现

```
- (UIView *)textInputView {
    return _textContentView;
} 
```

请参阅[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInput_Protocol/Reference/Reference.html)（这通常是 UITextInput-adopting 类的一个实例。）以获取更多帮助。如果你想保持这个方法的实现，就`return self`从它开始，因为这里`self (EGOTextView)`是 UITextInput-adopting 类的一个实例。

我最后尝试了这个并且工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T02:26:42.037

```
@implementation EGOContentView

@synthesize delegate=_delegate;

- (id)initWithFrame:(CGRect)frame {...} 
```

添加这个：

```
- (void)addSubview:(UIView *)view
{
    if([view isKindOfClass:NSClassFromString(@"UIAutocorrectInlinePrompt")])
    {
        view.layer.geometryFlipped = !view.layer.geometryFlipped;
    }
    [super addSubview:view];
} 
```

我要说的只是猜测。当 EGOTextView 的图层几何被翻转时，没有上面的代码就可以了，但是文本是颠倒的。所以我的猜测是系统变得“混乱”（可能是一个错误？），因为它会检查 EGOTextView 的图层几何是否被翻转并基于此调整 UIAutocorrectInlinePrompt 的几何。但事实上，EGOContentView 的几何图形不是 EGOTextView 的，而且 UIAutocorrectInlinePrompt 视图是 EGOContentView 的子视图，但由于它是基于 EGOContentView 的超级视图层“调整”的，所以它最终会颠倒过来。

# c# - 具有角色 db_datawriter 的用户无法选择表单数据库

> ID：13389615
> 
> 赞同：1
> 
> 时间：2012-11-15T00:11:18.073
> 
> 标签：c#, sql-server

我像这样在我的程序中创建新的登录名和用户（使用 sql 存储过程）

```
//new login
SqlCommand cmd = new SqlCommand("sp_addlogin", conn);
cmd.CommandType = CommandType.StoredProcedure;
string login = radTextBox2.Text;
string password = radTextBox3.Text;
cmd.Parameters.Add(new SqlParameter("@loginame", login));
cmd.Parameters.Add(new SqlParameter("@passwd", password));
int i = cmd.ExecuteNonQuery();
....
//new user
SqlCommand cmd = new SqlCommand("sp_adduser", conn);
cmd.CommandType = CommandType.StoredProcedure;
string username = radTextBox1.Text;
string role;
try
{
   switch (radDropDownList1.SelectedItem.Text)
   {
     case "Admin": { role = "db_owner"; break; }
     case "Guest": { role = "db_datareader"; break; }
     case "User": { role = "db_datawriter"; break; }
     default: { this.radLabelElement1.Text = "Role was not chosen!"; return; }
   }
 }
 catch (NullReferenceException) { this.radLabelElement1.Text = "Role was not chosen!"; return; };
 string login = radTextBox2.Text;
 cmd.Parameters.Add(new SqlParameter("@loginame", login));
 cmd.Parameters.Add(new SqlParameter("@name_in_db", username));
 cmd.Parameters.Add(new SqlParameter("@grpname", role));
 int result = cmd.ExecuteNonQuery(); 
```

因为我希望数据库的每个用户都拥有数据库中的所有权限，默认情况下`admin`，只有数据库中所有表的读取权限`guests`和读取/写入/更新/删除权限。`user`

我想如果`db_owner`允许在数据库中做所有事情，那么 db_datawriter 允许读取/写入/更新/删除数据库中的数据，而 db_datareader 只能从数据库中读取数据。但是，当我为具有 db_datawriter 角色的用户使用登录名和密码时，我遇到了一个异常（当我尝试查看数据网格时）-'对对象'表名'、数据库'数据库名'、模式'dbo'的 SELECT 权限被拒绝。 ..另一方面，具有`db_datareader`角色的用户可以看到它但无法编辑（因此它可以正常工作）。

有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T00:39:47.437

如果您需要读取和写入功能，那么他们将需要 db_datawriter 和 db_datareader 角色。db_datawriter 仅授予写入能力，因为在某些用例中，您希望用户能够写入数据库但不能从中读取。

# java - “樱桃可乐清单”是“可乐清单”吗？

> ID：13389617
> 
> 赞同：6
> 
> 时间：2012-11-15T00:11:43.863
> 
> 标签：java, generics

我得到“类型不匹配：无法转换`List<CherryCoke>`为`List<Coke<?>>`”

看起来“樱桃可乐清单”不是“可乐清单”。这是违反直觉的。无论如何，如果它必须是 a`List<Coke<?>>`并且我必须有一个子类，我怎么能创建那个'xs' `Coke<Cherry>`？

```
class Taste { }
class Cherry extends Taste { }

abstract class Coke<T extends Taste> { }    

class CherryCoke extends Coke<Cherry> { }

class x {
  void drink() {
    List<Coke<?>> xs = Arrays.asList(new CherryCoke());
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T00:14:21.820

你是对的——“可乐列表”不是“樱桃可乐列表”——“扩展可乐的东西”列表是“樱桃可乐列表”。

您可能想定义`xs`为`List <? extends Coke<?>> xs = Arrays.asList(new CherryCoke());`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T00:44:03.130

As others have pointed out, `List<CherryCoke>` and `List<Coke<?>>` are not the same thing.

But that's not really the issue here. It's not necessary to type `xs` as `List<? extends Coke<?>>`. You could have just as well created a new `List<Coke<?>>` and then added a new `CherryCoke` to it.

The error simply has to do with the compiler inferring `asList`'s type parameter `T` incorrectly. If you specify `T` yourself it compiles:

```
List<Coke<?>> xs = Arrays.<Coke<?>>asList(new CherryCoke()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T00:18:42.917

```
List<Coke<?>> xs = Arrays.asList(new CherryCoke()); 
```

`List<CherryCoke>`不是`List<Coke<?>>`(List of Coke of anything) 的子类型。

你应该定义你的泛型类型的上限。

```
List<? extends Coke<?>> xs = Arrays.asList(new CherryCoke()); 
```

# java - 如何创建Native线程并与主线程通信

> ID：13389625
> 
> 赞同：1
> 
> 时间：2012-11-15T00:13:07.637
> 
> 标签：java, android, c++, java-native-interface, native

我有这个需要 UI（主）线程和 JNI 线程之间通信的 android 项目。

我知道如何从 JNI 编写和调用方法，但不知道如何创建本机线程。

假设我的java线程（主线程），在应用程序触发并调用构造函数的开始时，它将构造按钮和布局，并构造一个Native线程。此本地线程将触发但会休眠以等待事件。

一旦用户点击一个按钮，这个发送信号到 Native 线程，Native 线程就会做一些事情，例如返回字符串 helloworld 给主线程。所以我想必须有同步数据。

我尝试寻找示例，但没有。一些帮助将不胜感激。示例代码会很好，ty。

# symfony - 使用 Symfony2 FOSRestBundle 验证数据

> ID：13389630
> 
> 赞同：1
> 
> 时间：2012-11-15T00:13:30.707
> 
> 标签：symfony, fosrestbundle

使用 FOSRestBundle 验证 POST 数据到 Symfony2 Rest API 的最佳方法是什么？我通常会使用路由要求，但是使用 FOSRestBundle 自动生成路由，我不确定最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:02:38.007

如果您使用 Param 注释，则可以像 GET 数据一样验证 POST 数据。例如，如果您需要 ID 和密码，您可以使用：

```
/**
 * POST /login.json
 *
 * @RequestParam(name="id", requirements="\d+", description="User id")
 * @RequestParam(name="password", requirements="\w{8,}", description="Password")
 */
public function postLoginAction(ParamFetcherInterface $paramFetcher)
{
    ...
} 
```

注意使用@RequestParam 而不是@QueryParam - 前者用于POST，后者用于GET。如果您需要更多关于使用 Param 注释的示例，请查看示例应用程序。

# c++ - 对于 unordered_map，对于具有 3 个无符号字符和一个 int 的结构，什么是好的散列函数？

> ID：13389631
> 
> 赞同：0
> 
> 时间：2012-11-15T00:13:33.697
> 
> 标签：c++, unordered-map, hash-function

我只想使用我的结构作为键的 unordered_map，因为我不需要任何排序..但我无法找到自己拥有所有这些哈希的东西..

作为一个相关的问题..当人们比较无序和有序映射时，他们从不谈论哈希函数，那怎么可能？一个糟糕的哈希函数不能让无序映射比映射慢吗？（仅由于散列函数）

```
struct exemple{

  unsigned char a,b,c;
  unsigned int n;

  bool operator == ( const exemple & other) const {..}
};

namespace std {
template <>
struct hash<exemple> : public std::unary_function<const exemple &, std::size_t>
{
    inline std::size_t operator()(const exemple & exemple_p ) const
    {
        return 0;// what do I do
    }
}; 
```

}

-edit- a,b,c 只能有值 'a', 'b', 'c' 或 'd', n 在 3 到 60 之间变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:26:12.337

您在散列函数中所做的事情取决于您获得的值，不一定取决于它们的类型。如果所有四个数据成员包含均匀分布的每个值，我会将这两个字符组合成一个`unsigned long`并返回两个值异或的结果：

```
typedef unsigned long ulong;
return n ^ (ulong(a << 16) | ulong(b << 8) | ulong(c)); 
```

它当然是*一个*哈希函数。它是否运作良好是一个不同的问题。您也可以将结果与`std::hash<unsigned long>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T00:24:18.000

这是一个基线哈希函数：

```
unsigned long long h = (n << 24) | (a << 16) | (b << 8) | c;
return std::hash(h); 
```

即，只需将成员打包到一个`unsigned long long`中，然后将工作卸载到`std::hash`. `int`在32 位宽和64 位的常见情况下，`long long`假设您的字符不是负数，这会将对象中的所有信息用于哈希。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T01:03:04.973

将您`struct`作为一个整体考虑为一串字节（准确地说是 7 个）。您可以对这 7 个字节使用任何可接受的通用字符串散列函数。这是应用于您的示例的 FNV（Fowler/Noll/Vo）通用位串哈希函数（在给定的哈希函子类中）：

```
inline std::size_t operator()(const exemple& obj ) const
{
  const unsigned char* p = reinterpret_cast<const unsigned char*>( &obj );
  std::size_t h = 2166136261;

  for (unsigned int i = 0; i < sizeof(obj); ++i)
    h = (h * 16777619) ^ p[i];

  return h;
} 
```

请注意我如何将对`exemple`结构 ( `obj`) 的引用转换为指向的指针，`const unsigned char`以便我可以一个接一个地访问结构的字节，并将其视为不透明的二进制对象。请注意，`sizeof(obj)`实际上可能是 8 而不是 7，具体取决于编译器的填充（这意味着结构中的某处有一个垃圾填充字节，可能介于`c`和之间`n`。如果需要，可以重写散列函数以遍历`a`、`b`和`c`然后按顺序（或任何顺序）的字节`n`，这将消除任何填充字节（可能存在或可能不存在）对您的`struct`.

是的，一个糟糕的哈希函数可能会`unordered_map`比`ordered_map`. 这并不总是被讨论，因为像上面给出的 FNV 哈希这样的通用快速算法被假定为那些使用 的人使用`unordered_map`，并且在这些情况下，通常 a`unordered_map`比 a 更快`ordered_map`，代价是迭代容器元素的能力为了。但是，是的，您必须对数据使用良好的散列函数，并且通常使用这些众所周知的散列之一就足够了。然而，最终，每个散列函数都有其弱点，具体取决于输入数据（这里是`exemple`结构的内容）的分布。

可以在[Eternally Confuzzled](http://eternallyconfuzzled.com/tuts/algorithms/jsw_tut_hashing.aspx)中找到关于广义散列和示例散列函数的一个很好的讨论，包括一个类似于我给你的 C 风格的 FNV 散列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-11T19:33:12.373

[`boost::hash_combine`](https://www.boost.org/doc/libs/1_66_0/doc/html/hash/combine.html)专为此目的而设计：

```
std::size_t hash = 0;
for (const auto& value : {a, b, c}) {
    boost::hash_combine(hash, value);
}
boost::hash_combine(hash, n);
return hash; 
```

# php - 即使有 100.000 个用户同时访问它，也只在第一次运行 PHP 脚本

> ID：13389632
> 
> 赞同：1
> 
> 时间：2012-11-15T00:13:39.870
> 
> 标签：php, file

标题很清楚：

我有一个 PHP 文件，我希望它只在第一次执行，即使有 100.000 个用户尝试同时访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:20:43.827

您可以使用写入服务器的锁定文件来执行此操作，例如：

```
if (!is_file("visited_once.txt"))
{
    //you're the one
    file_put_contents("visited_once.txt", "");
} 
```

但也许数据库解决方案会更复杂，因为我不能 100% 确定文件解决方案适用于 100.000 个并发请求。

**创建你的表**

```
CREATE TABLE visited
(
    visit int NOT NULL,
    UNIQUE (visit)
); 
```

**根据要求做这样的事情**

```
try
{
    $db->query("INSERT INTO visited VALUES (0)");
    //you're the one
}
catch (Exception $ex)
{
    //nope! Already visited
} 
```

这使用唯一键并依赖于数据库一致性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:18:20.697

```
<?php
if(file_exists('check.txt')) exit;
file_put_contents('check.txt','1');
...your code...
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:18:43.267

我会将一些内容写入文件作为脚本正在执行的标志，并在脚本结束时删除文件。在脚本开始时检查文件是否存在。

例如：

```
$flag_file = 'flag.tmp';
if (file_exists($flag_file)) exit();
file_put_contents($flag_file, 1);

// rest of the script

unlink($flag_file); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T00:19:05.610

你可以写入一个 txt 文件或 MySQl 表吗？如果是这样，将文本文件中的字符或 MySQL 表中的字段设置为 0，并且 PHP 脚本第一次运行时，将其设置为 1，并使用 if 语句：

```
RETRIEVE YOUR NUMBER VIA TXT OR MYSQL
$myVar = YOUR NUMBER;

if ($myVar > 0){
//don't run
}
else{
//run
} 
```

# telerik - 获取 Kendo UI Web TreeView 中的复选框列表

> ID：13389636
> 
> 赞同：4
> 
> 时间：2012-11-15T00:14:14.020
> 
> 标签：telerik, treeview, kendo-ui

如何在 Kendo UI Web TreeView 中获得选中复选框的列表？我在 API 的任何地方都找不到这个功能，但我认为这将是一个非常基本的操作..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T23:14:40.767

实际上没有 API 方法，但您可以使用 jQuery 轻松获取它们。

要获得复选框选定的输入，请使用

```
$('#treeviewName :checked'); 
```

要获取选中的容器**li**元素，请使用：

```
$('#treeviewName :checked').closest('li'); 
```

获得**li**元素后，您可以将其传递给 TreeView 的[dataItem](http://docs.kendoui.com/api/web/treeview#dataitem)方法并获取底层模型，从而获取其 ID 或其他属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-28T13:04:39.710

在剑道演示中，他们提供了以下算法：

```
 // function that gathers IDs of checked nodes
    function checkedNodeIds(nodes, checkedNodes) {
        for (var i = 0; i < nodes.length; i++) {
            if (nodes[i].checked) {
                checkedNodes.push(nodes[i].id);
            }

            if (nodes[i].hasChildren) {
                checkedNodeIds(nodes[i].children.view(), checkedNodes);
            }
        }
    }

    // show checked node IDs on datasource change
    function onCheck() {
        var checkedNodes = [],
            treeView = $("#treeview").data("kendoTreeView"),
            message;

        checkedNodeIds(treeView.dataSource.view(), checkedNodes);

        if (checkedNodes.length > 0) {
            message = "IDs of checked nodes: " + checkedNodes.join(",");
        } else {
            message = "No nodes checked.";
        }

        $("#result").html(message);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T18:41:56.937

从[从树视图收集检查的节点](http://docs.kendoui.com/getting-started/web/treeview/overview)：

```
var treeview = $("#treeview").data("kendoTreeView");
var checkedNodes = [];

function gatherStates(nodes) {
    for (var i = 0; i < nodes.length; i++) {
        if (nodes[i].checked) {
            checkedNodes.push(nodes[i].id);
        }

        if (nodes[i].hasChildren) {
           gatherStates(nodes[i].children.view());
        }
    }
}

gatherStates(treeview.dataSource.view()); 
```

这似乎没有考虑通过级联检查的未扩展节点：checkChildren 属性。

# c# - 从 C# 中的原始 TCP 流中获取 unicode 字符串

> ID：13389641
> 
> 赞同：3
> 
> 时间：2012-11-15T00:14:49.640
> 
> 标签：c#, mysql, utf-8

所以我正在尝试对一些用 C# 编写的软件进行修改，但我并不是真正的开发人员。该代码从客户端读取数据并从中获取值。我看到的问题是，当您从客户端获得使用非英文字符的值时，它会变得乱码。有问题的代码是：

```
public static string ReadNT(BinaryReader stream)
{
  ret = "";
  byte addByte = 0x00;
  do {
    addByte = ReadByte(stream);
    if (addByte != 0x00)
      ret += (char)addByte;
  } while (addByte != 0x00);
  return ret;
} 
```

据我所知，它正在通过流并将事物一一转换为字符以获取字符串。问题在于它不适用于 unicode/utf8。有没有办法将其转换为适用于 utf8 值的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:40:54.690

您可以尝试使用 StreamReader 类来读取 UTF8 字符串。

```
public static string ReadNT(BinaryReader stream)
{
   return (new StreamReader(stream, Encoding.UTF8, false)).ReadString();
} 
```

如果这是您可以控制的，您应该考虑在字符串本身之外传输字符串的大小。

```
public static string ReadNT(BinaryReader stream, int length)
{
    return Encoding.UTF8.GetString(stream.ReadBytes(length));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:08:36.800

尝试这个：

```
public static string ReadNT(BinaryReader stream)
{
    List<byte> bytes = new List<byte>();
    byte addByte = 0x00;

    do
    {
        addByte = ReadByte(stream);

        if (addByte != 0x00)
        {
            bytes.Add((char)addByte);
        }
    } while (addByte != 0x00);

    return Encoding.UTF8.GetString(bytes.ToArray());
} 
```

您不能一次转换一个字符，因为有些字符可以用一个以上的字节表示，因此我使用`List<byte>`来收集整个流。

我认为这里最大的警告是您需要确保客户端正在向您发送 UTF8 格式的文本。

**编辑：**

除了对此答案的评论之外，来自[Can UTF-8 contains zero byte?](https://stackoverflow.com/questions/6907297/can-utf-8-contain-zero-byte)

> 是的，UTF8 中的零字节是代码点 0，NUL。没有其他 Unicode 代码点将以 UTF8 编码，其中任何地方都带有零字节。

因此可以安全地假设如果您收到一个零字节，它是 NUL 并且实际上不是代码点的一部分。

# hadoop - Hadoop MapReduce for 循环

> ID：13389644
> 
> 赞同：0
> 
> 时间：2012-11-15T00:15:06.073
> 
> 标签：hadoop, mapreduce

我有一个变量`_b`。我正在累积添加，但是随着 for 循环的每次迭代，`k`变量都被重置为`0`. 相同的代码可以作为本地 Java 应用程序正常工作。有谁知道为什么会这样？这是我的程序中的代码片段：

```
public void map(Object key, Text value, Context context)
{
    int m, b, _m, _b;

    for (int i = 1; i <= N; ++i)
    {
        for (int j = i; j <= N; ++j)
        {
            _m = 0;
            _b = 0;
            for (int k = i; k <= j; ++k)
            {
                int _bTemp=0;
                context.write(new Text(Integer.toString(i)+","+Integer.toString(j)),new Text("Reset_bTemp=" + _bTemp + " ShouldNotReset_b=" + _b ));
                /* Calculating smallM, _m and assigning it to global variable m */
                _m += calculateSmallM(k,queryWord,value);
                //context.write(new Text(Integer.toString(i)+","+Integer.toString(j)),new Text("_m=" + _m));
                /* Calculating smallB, _b and assigning it to global variable b */
                _bTemp = calculateSmallB(k,value);
                _b += _bTemp;
                context.write(new Text(Integer.toString(i)+","+Integer.toString(j)),new Text("_bTemp=" + _bTemp + "_b=" + _b ));
            }// end of for k

            /* Assigning _m and _b to m and b */
            m = _m;
            b = _b;

            /* Calculating Discrepancy Score */
            discrepancyScore = calculateDiscrepancyScore(m,b,M,B);

            if (discrepancyScore > dmax)
            {
                dmax = discrepancyScore;
                iMax = i;
                jMax = j;

            }

        }// end of for j

        hotspot_interval = Double.toString(dmax) + "=(" + Integer.toString(iMax) + "," + Integer.toString(jMax) + ")-(" + Integer.toString(i) + "," + Integer.toString(j) + ")";
        hotspot.set(hotspot_interval);

    }// end of for i 
}

public int calculateSmallB(int k, Text value, Context context) throws IOException, InterruptedException
{
    int colon;
    String line = null;
    String tpifreqList = null;
    String lineWord = null;
    StringTokenizer st = new StringTokenizer(value.toString(),"\n");
    line = st.nextToken();
    //while (st.hasMoreTokens()) 
    //while((line = st.nextToken()) != null)
    while(line != null)
    {
        //line = st.nextToken();
        colon = line.indexOf("::");
        lineWord = line.substring(0, colon);
        tpifreqList = line.substring(lineWord.length() + 2); 
        /* lineWord.length()+1 will give the string starting with ":" */
        context.write(new Text(lineWord), new Text("Value of _b just after while(" + k + ")=" + smallB));

        /* trimming to remove whitespaces */
        tpifreqList = tpifreqList.trim();
        String[] tpiFreq = tpifreqList.split(","); /* Splitting to get a array of tpindex-freq values */
        /* Iterating through the array to retrieve and sum up all the frequencies for the 'word' occurring at tpindex k */
        for (int n = 0; n < tpiFreq.length; n++) 
        {

            tpiFreq[n] = tpiFreq[n].trim();
            /* Checking if the tpindex is equal to k */
            if (tpiFreq[n].indexOf(Integer.toString(k)) == 0) 
            {
                /* If yes, retrieve the frequency */
                int hypen = tpiFreq[n].indexOf("-");
                int freq = Integer.parseInt(tpiFreq[n].substring(hypen + 1));
                //_b += freq;
                smallB += freq;
                context.write(new Text(lineWord), new Text("calculateSmallB(" + k + ")=" + smallB));
            }
        }
        context.write(new Text(lineWord), new Text("_b just after for(" + k + ")=" + smallB));
        line = st.nextToken();
    }
    return smallB;
} 
```

# php - RSS 无效的提要

> ID：13389646
> 
> 赞同：0
> 
> 时间：2012-11-15T00:15:24.287
> 
> 标签：php, xml, wordpress, rss

[http://validator.w3.org/appc/check.cgi?url=craft.tutsplus.com%2F%3Ffeed%3Dapp](http://validator.w3.org/appc/check.cgi?url=craft.tutsplus.com%2F%3Ffeed%3Dapp)

有人知道错误是什么吗？这肯定不是它所指向的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:24:02.670

`<li>`在第 246 和 247 行，元素内部有无效字符（Unicode 0x7） 。

![在此处输入图像描述](../Images/44d37e5ffe85ec0b0c885d7096b7bd28.png)

# objective-c - NSAttributedString 在 iOS 6 之前可用吗？

> ID：13389647
> 
> 赞同：9
> 
> 时间：2012-11-15T00:15:37.340
> 
> 标签：objective-c, ios, ios5, ios6

我发现关于 NSAttributedString 6 之前的 iOS 版本可用性的信息相互矛盾。如果它有点向后兼容，这将非常有用。

这里它说它从 iOS 4 开始可用： [为什么 iPhone 上没有 NSAttributedString？](https://stackoverflow.com/questions/729135/why-no-nsattributedstring-on-the-iphone?answertab=oldest#tab-top)

在 Apple 网站上显示 iOS 6 及更高版本：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)

我尝试在我的代码中实现它，如下所示：

```
NSAttributedString *commentString = [[NSAttributedString alloc] initWithString:@"I really love raisins" attributes:@{NSForegroundColorAttributeName: [UIColor blackColor]}]; 
```

它在 iOS 6 中有效，但在我尝试在 iOS 5 或 iOS 5.1 中运行时无效。我没有测试过早期版本。

我只是想使用旧版本中未包含的功能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T00:24:09.703

它从iOS3.2开始就存在了。然而，在某些 UI 控件（如 UILabel、UIButton、UITextView 等）中使用它们的能力仅在 iOS6 之后才可用。您仍然可以使用 CoreText for < 6.0 来使用它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T00:21:00.650

`NSAttributeString``initWithString:attributes:`根据 iOS 参考文档，该方法自 iOS 3.2 以来就已经存在。`NSAttributedString`在 iOS 4.0 中添加了一些方法。所有作为`UIKit`类别添加的方法都是在 iOS 6.0 中添加的。

这条线的问题：

```
NSAttributedString *commentString = [[NSAttributedString alloc] initWithString:@"I really love raisins" attributes:@{NSForegroundColorAttributeName: [UIColor blackColor]}]; 
```

是`NSForegroundColorAttributeName`直到 iOS 6.0 才添加常量。

所以虽然`NSAttributedString`已经存在了一段时间，但直到 6.0 才添加所有有用的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T00:20:53.147

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)

> 在 iOS 6 及更高版本中，您可以使用属性字符串在文本视图、文本字段和其他一些控件中显示格式化文本

它只是IOS6 afaik。该类在 IOS6 之前可用，但功能不可用。所以你的最终假设是正确的:)

# php - HTML 表格上的 PHP 数据 - 展开 HTML 表格

> ID：13389648
> 
> 赞同：-1
> 
> 时间：2012-11-15T00:15:37.593
> 
> 标签：php, html, mysql, css

我想从数据库中获取数据并将其显示在 html 表中。我的困境是，如果返回的行数超过 x，我需要能够扩展 html 表，如下图所示。因此，例如，如果只返回 10 行，它们将显示在一个直表中（如第一个示例图像所示）。然而，如果返回 20 个，它会将其中一些推到右侧的第二个“表”（如第二个示例图像所示）。我不确定如何使用 php 来完成此操作。如果有人可以帮助我，我将不胜感激。

![我的设想](../Images/8448a238a1c39d7493fc191b9d02d720.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:21:43.323

我认为我将采取的方法是将行从 MySQL 获取到两个单独的 2D 数组中，而不是尝试`<table>`即时构建两个 HTML。

在 MySQL fetch 循环中，遍历每一行的列，当超过 number 时`$maxcols`，开始追加到另一个数组。然后在完成 fetch 循环后，分别遍历这两个数组以构建您的 HTML 表。

有几种方法可以管理嵌套循环。这是第一个想到的

```
// An array initialized for each table (will become 2D arrays)
$t1 = array();
$t2 = array();

// Max cols in the first table
$maxcols = 10;

// Your fetch loop (pseudocode since we don't know which API you use)
while ($row = $result->fetch()) {
    // New row in both table arrays
    $new_t1 = array();
    $new_t2 = array();

    // Loop over columns
    $idx = 0;
    foreach ($row as $col) {
      if ($idx < $maxcols) {
         // Index is less than maxcols, append to the first table's new row
         $new_t1[] = $col;
      }
      // >= maxcols, append to second table's new row
      else $new_t2[] = $col;

      // Increment the index
      $idx++;
    }
    // Each of the two `$new_t* arrays now comprises a complete table row
    // Append each new array as a row onto the correct table 2D array
    $t1[] = $new_t1;
    $t2[] = $new_t2;
} 
```

然后循环遍历每个数组`$t1, $t2`以构建您的两个表。

# php - 使用服务器命令取消所有会话变量

> ID：13389651
> 
> 赞同：1
> 
> 时间：2012-11-15T00:15:45.283
> 
> 标签：php

> **可能重复：**
> [如何清除所有用户的会话？](https://stackoverflow.com/questions/2317294/how-to-clear-session-of-all-users)

是否可以从服务器 (LAMP) 发出命令来破坏所有当前会话变量？我希望能够在站点维护期间强制所有用户退出会话。有没有一种有效的方法可以做到这一点，或者这只是愚蠢的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:27:39.713

就像 Paul 上面评论的那样：您可以删除会话存储。这将终止所有当前用户会话，会话数据将丢失。

```
$sessionFiles = glob(session_save_path().'/*');
foreach($sessionFiles as $file) {
    if(is_file($file)) {
        unlink($file);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:18:46.900

你可以尝试这样的事情：

```
$session_path = session_save_path();

shell_exec("rm " . $session_path . "/sess_*"); 
```

# iphone - 如何在 iOS 上以单声道覆盖 ClientBase.CreateChannel

> ID：13389652
> 
> 赞同：3
> 
> 时间：2012-11-15T00:15:57.283
> 
> 标签：iphone, ios, wcf, mono, xamarin.ios

我正在将 .NET WCF 应用程序移动到 Mono 以在 iOS 中使用。因为 iOS 中的 Mono 不支持动态代码生成，所以我需要重写`ClientBase.CreateChannel`，如这篇文章所示：

[Monotouch/WCF：如何在没有 svcutil 的情况下使用 wcf 服务](https://stackoverflow.com/questions/10054581/monotouch-wcf-how-to-consume-the-wcf-service-without-svcutil)

此解决方案使用通用的`ChannelBase<TChannel>`. 虽然此类被定义为`ClientBase<TChannel>`.Net 4.0 中的内部类，但我在 Mono 源代码中找不到它。似乎有一个未实现的非泛型`ChannelBase`in版本`System.ServiceModel.Channels`，但我认为这里没有使用它。

如果有人让这个解决方案起作用，您能否详细说明您是如何访问的`ClientBase<TChannel>`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:53:25.487

我们最终发现`ChannelBase<TChannel>`作为`ClientBase<TChannel>`. 它被标记为内部。我们必须删除 internal 修饰符才能使用该类并重新编译 mono，但是之前引用的帖子中的解决方案起作用了。

我无法解释为什么`ChannelBase<TChannel>`被标记为内部。这似乎与 .Net 中的定义不匹配。

# silverlight - PivotItem 中的动画内容更改

> ID：13389655
> 
> 赞同：0
> 
> 时间：2012-11-15T00:16:22.570
> 
> 标签：silverlight, xaml, animation, windows-phone, windows-phone-8

Windows Phone 8 项目。我正在改变`Content`a `PivotItem`（从 a`Grid`到 a `WebBrowser`）。有没有办法通过翻页效果或侧滑效果来为这种变化设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:57:18.387

我建议你重新考虑这种方法。首先，在枢轴中使用浏览器控件会导致触摸手势的各种 UI 问题。如果用户向左或向右滑动，他们的意图是导航枢轴还是调整浏览器中的视图？Microsoft 可能会拒绝此实施。您应该考虑从数据透视页面导航到包含浏览器控件的新页面。在导航期间使用页面转换很简单，并且可以在 Windows Phone Toolkit（以前称为 Silverlight Toolkit for Windows Phone）中使用。

[http://phone.codeplex.com](http://phone.codeplex.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T22:00:47.860

正如 Inkog 所说，在数据透视项目中使用网络浏览器控件可能不是一个好主意。但是如果你还想做，你可以改变内容，然后在代码中调用[Windows Phone工具包](http://phone.codeplex.com/)中的页面过渡，来获得页面动画效果，比如滑入或旋转栅门。

[这是在 WP7 的WP 工具包](http://phone.codeplex.com/)中使用导航转换的一个很好的指南，但我猜它会类似于 WP8 的工具包：http: [//windowsphonegeek.com/articles/Windows-Phone-7-Navigation-Transitions-分步指南](http://windowsphonegeek.com/articles/Windows-Phone-7-Navigation-Transitions-Step-By-Step-guide)

否则，您可以使用情节提要创建自己的[动画，这很容易使用 Expression Blend](http://blogs.msdn.com/b/kevinash/archive/2011/12/21/flipping-card-animation-for-windows-phone-7-using-expression-blend.aspx)，然后在您更改内容时运行这些动画。

# excel - Groovy 脚本挂起

> ID：13389657
> 
> 赞同：2
> 
> 时间：2012-11-15T00:16:44.277
> 
> 标签：excel, jdbc, groovy

我在 WinXP（版本：Excel 97-2000）中为一个非常简单的 Excel 电子表格设置了一个用户 DSN ODBC 数据源：

```
A_NUMBER  A_DATE      A_STRING
1001      10/1/2012   Red
1002      10/2/2012   Green
1003      10/3/2012   Blue 
```

当我运行以下 groovy 脚本（Groovy 版本：1.7.8 JVM：1.6.0_10）来读取数据时

```
import groovy.sql.Sql

def static main(def args) {
    def dbParameters = [url: 'jdbc:odbc:mySpreadSheet', user:'', password:'', driver: 'sun.jdbc.odbc.JdbcOdbcDriver']          
    def sql = Sql.newInstance(dbParameters)

    sql.eachRow('select * from [Sheet1$]') { row ->
        println "${row.A_NUMBER} ${row.A_DATE} ${row.A_STRING}"         
    }

    sql.close()

    println "done???"
} 
```

它产生以下输出：

```
1001.0 2012-10-01 00:00:00.0 Red
1002.0 2012-10-02 00:00:00.0 Green
1003.0 2012-10-03 00:00:00.0 Blue
done??? 
```

但它永远不会退出！

我尝试从 Windows 命令提示符和 cygwin bash shell 运行它，在这两种情况下它都会挂起，直到我用 ctrl-c 杀死

我可以通过添加强制脚本退出

`throw new RuntimeException("force exit")`

在 println 之后，但这似乎非常极端。

知道为什么脚本挂起吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-13T19:09:04.733

从来没有真正找到答案，但最好的建议来自 Ralf，它是添加该行

```
System.exit(0) 
```

在 main 方法的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:29:19.833

我使用您的代码自己设置了此测试，完全一样，并且在完成后退出脚本没有任何问题。我认为这与您的 Cygwin shell 有关。如果您在常规 DOS shell 中运行它，您可能会发现它正确退出。

```
import groovy.sql.Sql
def static main(def args) {
    def dbParameters = [url: 'jdbc:odbc:RefList10000', user:'', password:'', driver: 'sun.jdbc.odbc.JdbcOdbcDriver']          
    def sql = Sql.newInstance(dbParameters)
    sql.eachRow('select * from [referenceList10000$]') { row ->
        println "${row.RefListName} ${row.Value}"         
    }
    sql.close()
    println "done"
} 
```

发起人：

```
@echo off
:: Microsoft Windows [Version 6.1.7601]
SET JAVA_HOME=C:\Java\jdk1.6.0_33_x32
SET PATH=%JAVA_HOME%\bin;%PATH%
groovy SQL.gv
pause 
```

# jsf-2 - 如何强制以 IE8 的文档模式打开页面

> ID：13389658
> 
> 赞同：1
> 
> 时间：2012-11-15T00:16:49.160
> 
> 标签：jsf-2, internet-explorer-8, doctype, intranet

我们已经部署了我们的 webapp，它是使用 JSF、Spring 和 Hibernate 在我们内部网络（内部网）的 Tomcat 服务器上开发的。当我在本地测试我的应用程序时，它工作正常。

但是一旦我部署到**DEV**，我就会遇到样式问题。当我一个接一个地有两个下拉菜单时，顶部的下拉菜单与另一个重叠。

当我将文档模式设置为“IE7 标准”时会发生这种情况。当我将文档模式更改为“IE8 标准”时，一切正常。

为了将文档模式强制为 IE8 标准，我[根据此链接](https://stackoverflow.com/questions/3652870/ie8-compability-and-document-mode)在我的 HTML 文档部分尝试了这个元标记，但它对我不起作用：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

如何强制我的页面在 Intranet 上按照 IE8 标准呈现？我的应用程序是否以 Internet 上的 IE8 标准呈现？

编辑：我在我的开发者工具中看到了一些东西。即使我保留了`<meta>`它，`<head>`但我的**primefaces 样式和脚本**在此之前加载了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:43:14.617

奇怪，[这个项目](http://social.msdn.microsoft.com/Forums/en/iewebdevelopment/thread/afb57ce6-d149-4a09-8811-63c0645c92e6)是昨天发布的，不确定它是否适用于你的情况：

> 如果 x-ua 兼容设置出现在样式表之后，IE 8 将忽略它。为了让 IE 确认元设置，请将其放在顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:12:57.433

我很高兴地告诉我，我终于能够通过在 primefaces 中使用这个链接来解决这个问题。而且[这篇文章](https://stackoverflow.com/questions/6860779/how-to-make-a-meta-tag-the-first-one-in-the-head-section)也有助于在整个应用程序中做到这一点

[http://blog.primefaces.org/?p=1433](http://blog.primefaces.org/?p=1433)

# jquery - 将数据表中的行选择限制为 3

> ID：13389666
> 
> 赞同：1
> 
> 时间：2012-11-15T00:17:59.120
> 
> 标签：jquery

我目前正在使用 jQuery 数据表插件，想知道是否有任何方法可以将行选择限制为 3。现在用户可以选择无限数量的行。这是我的代码的 jsfiddle：http: [//jsfiddle.net/EfFA2/](http://jsfiddle.net/EfFA2/)

JS

```
$(document).ready(function() {    
$('#example5').dataTable( {
        "bPaginate": true,
        "bLengthChange": false,
        "bFilter": true,
        "bSort": true,
        "bInfo": true,
        "bAutoWidth": false
    } );
    /* Add/remove class to a row when clicked on */
    $('#example5 tr').click( function() {
        $(this).toggleClass('row_selected');
    } );
 } );
 $('#example5').css('min-height','300');  

$('.btn_r').click(function(){
  $('.row_selected').removeClass('row_selected')
})
​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T00:27:10.757

将此添加为选项：

```
"iDisplayLength": 3 
```

完整示例：

```
$('#example5').dataTable({
    "bPaginate": true,
    "bLengthChange": false,
    "bFilter": true,
    "bSort": true,
    "bInfo": true,
    "bAutoWidth": false,
    "iDisplayLength": 3
}); 
```

更新小提琴：http: [//jsfiddle.net/EfFA2/3/](http://jsfiddle.net/EfFA2/3/)

另一方面，如果[Beno](https://stackoverflow.com/users/320956/beno)对您的问题的解释是正确的，请将您的点击处理程序修改为：

```
$('#example5 tr').click(function() {
    var self = $(this);
    if (self.hasClass('row_selected')) {
        self.removeClass('row_selected');
    } else {
        if ($('#example5 tr.row_selected').length < 3) {
            $(this).addClass('row_selected');
        }
    }
}); 
```

更新小提琴：http: [//jsfiddle.net/EfFA2/4/](http://jsfiddle.net/EfFA2/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T00:23:09.770

你可以这样做：

```
$(document).ready(function() {    
$('#example5').dataTable( {
        "bPaginate": true,
        "bLengthChange": false,
        "bFilter": true,
        "bSort": true,
        "bInfo": true,
        "bAutoWidth": false
    } );
    /* Add/remove class to a row when clicked on */
    $('#example5 tr').click( function() {
        if($('.row_selected').length < 3 || 
           $(this).hasClass('row_selected')) {
            $(this).toggleClass('row_selected');
        }
    } );
 } );
 $('#example5').css('min-height','300');  

$('.btn_r').click(function(){
  $('.row_selected').removeClass('row_selected')
}) 
```

[​演示](http://jsfiddle.net/EfFA2/1/)

# java - Eclipse 不允许形成作为正则表达式的字符串

> ID：13389667
> 
> 赞同：0
> 
> 时间：2012-11-15T00:18:01.790
> 
> 标签：java, regex, eclipse

尝试将正则表达式分配为字符串变量，但 Eclipse IDE 不允许这样做。为什么？ ![在此处输入图像描述](../Images/2572d4ff84f18d1b5e4ff6ed42e7178a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T00:19:52.513

您必须改用“ `\\s`”。这是因为`\s`不是`String`转义，而是在正则表达式中使用。Java 将看到您的字符串并将其更改`\\`为单个`\`（作为`\\`转义`\`符）。您还必须为所有其他转义执行此操作（例如`pattern = "(\\s)*(\\w\\w(\\w)*)...`）

为了使这更容易理解，您知道如何在`String`(like `String s = "He said, \"Wow.\"";`) 中加上引号吗？好吧，您可以通过将反斜杠`String`转义为`\\`. 然后它将这些反斜杠发送到正则表达式函数/类，然后它们会理解它们。

# perl - 使用 perl 设置环境变量

> ID：13389669
> 
> 赞同：7
> 
> 时间：2012-11-15T00:18:06.867
> 
> 标签：perl, variables, environment, tcsh

我正在尝试使用 Perl 设置环境变量。它应该将此变量导出到外部（在当前 shell 中），而不仅仅是在脚本中。

我试过了：

```
`setenv X1 /p/fsd`

system("setenv X1 /p/fsd") == 0 or die "failed:$?"

system command "setenv X1 /p/fsd" failed: -1

$ENV{"X1"} = "/p/fsd"; 
```

似乎没有任何工作。

如果重要的话，我正在使用 TCSH。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T00:19:29.413

```
$ENV{"X1"} = "/p/fsd"; 
```

是正确的方法。

测试[`perlconsole`](http://sukria.net/perlconsole.html)：

```
Perl> $ENV{X1} = "/p/fsd";
/p/fsd

Perl> system('echo $X1');
/p/fsd
0 
```

**笔记**

*   需要单引号（或反斜杠）`echo $X1`以防止`perl`自行插入。
*   您不能更改父外壳的 ENV，请参阅[http://www.perlmonks.org/?node_id=684685](http://www.perlmonks.org/?node_id=684685)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-15T01:33:58.057

知道如何设置环境变量同样重要的是如何删除它：

```
delete $ENV{"X1"}; 
```

这将删除 perl 进程和任何子进程的环境变量。但仍会为父进程设置环境变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T00:50:18.077

因为里面没有特殊字符`setenv X1 /p/fsd`，

```
system("setenv X1 /p/fsd") 
```

相当于

```
system("setenv", "X1", "/p/fsd") 
```

它失败了，因为没有名为`setenv`. 如果不存在此优化，您将获得不同的结果*。在这种情况下，

```
system("setenv X1 /p/fsd") 
```

相当于

```
system("sh", "-c", "setenv X1 /p/fsd") 
```

那也行不通，因为`sh`没有`setenv`命令。因此，您可以改为运行以下命令：

```
system("tcsh", "-c", "setenv X1 /p/fsd") 
```

但这将毫无意义。您将创建一个外壳，设置其中一个变量。然后 shell 退出并且它的变量不再存在。

如果你想设置 Perl 及其子级可以看到的环境变量，只需使用

```
$ENV{X1} = "/p/fsd";         # Until end of program 
```

或者

```
local $ENV{X1} = "/p/fsd";   # Until end of scope 
```

* * *

* — 优化代码的行为不应与未优化代码不同，但由于优化只是改变了你得到的错误，它是可以接受的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T13:35:22.107

正如其他回复所提到的，您不能在子级的父级中设置环境变量。但是，您可以在 perl 中执行一些复杂的操作，然后将最终结果传回 shell 进行设置。例如，在`tcsh`：

```
eval `perl -le 'print q(setenv X1 /p/fsd)'` 
```

你可以让这种感觉更加透明，例如，

```
alias x1.pl 'eval `x1.pl`' 
```

# jakarta-ee - Java EE 中的唯一编号生成

> ID：13389670
> 
> 赞同：0
> 
> 时间：2012-11-15T00:18:11.760
> 
> 标签：jakarta-ee, jpa

我正在为医疗通道中心开发一个应用程序，多个用户使用 JSF 和 JPA 为医生预订预约。序列号对于医生、日期和会话是唯一的。我试图从计算先前的预订中获得一个唯一的序列号并添加一个，但如果同时出现两个请求，则两个预订会获得相同的编号，从而导致功能出现问题。在这种情况下如何获得唯一编号？我可以使用应用程序范围的 bean 来生成它吗？（我认为从数据库序列号中获取唯一编号是不切实际的，因为有几个医生、会话和每天他们必须有不同的预订号。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:57:39.077

这是我的做法：

在数据库中有一个包含 6 列的表：

*   id（自动生成的主键）
*   医生编号
*   日期
*   会议
*   柜台
*   版本（映射到带有注释的字段`@Version`，用于乐观锁定）

确保在 [doctorId, date, session] 上添加一个唯一的约束。

创建一个服务，在它自己的事务中运行（REQUIRES_NEW 传播），调用

```
 getNextValue(doctorId, date, session) 
```

该服务应从数据库表中获取与其三个参数相对应的计数器，将其返回并递增。如果还没有行，它应该创建它。

仍然有可能让两个并发事务尝试同时创建或增加同一行。在创建的情况下，由于唯一约束，其中一个事务将回滚。在增量的情况下，由于 JPA 乐观锁定，其中一个事务将回滚。

如果服务回滚，则重试，直到不再有异常。

这避免了将所有这些计数器存储在内存中，是无状态的，因此如果您重新启动应用程序不会导致任何问题，并且即使您有一个服务器集群也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:02:09.847

这是在数据库中使用序列的完美案例。

您应该在 DB 表中创建 ID，并确保该字段是通过序列自动生成的，然后您无需担心两行使用相同的值。

# php - PHP 注意：未定义变量：customerName

> ID：13389672
> 
> 赞同：-1
> 
> 时间：2012-11-15T00:18:21.603
> 
> 标签：php, mysql

不知道为什么我的日志中出现此错误。

PHP 注意：未定义变量：customerName 这里是第 74 行：$arrOrderDetails = $purchaseOrder->load($customerName);

这个即时通讯从另一个类的实例返回“$customerName”是代码：

```
public function load($customerName){
$orderDetails = array();
//Adding first order detail
$orderData = array
    ('order_id' => 1, 
    'customer_name' => 'Lancaster Landscapes',
    'description' => 'Golf Balls-Titlest DT Solo', 
    'quantity' => 13,
    'price' => 33,
    'total' => 432.25
    );
$orderDetail = new OrderDetail($orderData);
$array_push($orderDetails, 1, $orderDetail);

return $orderDetails; 
```

}

我仍然会向数组中添加更多元素。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:26:19.617

它只是一个通知，也不会破坏代码，但是如果你想清理它，在分配 $customername 之前你包括

```
 $customername=''; 
```

该通知应该消失

# c# - 在 WPF Canvas.Children 问题上查找绘制顺序

> ID：13389674
> 
> 赞同：1
> 
> 时间：2012-11-15T00:18:41.823
> 
> 标签：c#, wpf

我需要确定画布中包含的子项的绘制顺序。所以我遇到了这个问答：

[如何比较属于同一逻辑/视觉树的两个 WPF 控件的相对 Z 顺序？](https://stackoverflow.com/questions/8186844/how-to-compare-the-relative-z-order-of-two-wpf-controls-that-are-part-of-the-sam)

这在大多数情况下都能正常工作，但有时我会从这段代码中得到一个错误：

```
private Panel FindWindowRoot(FrameworkElement child)
{
    FrameworkElement current = child;
    while(current as Window == null)
    {
        current = (FrameworkElement)VisualTreeHelper.GetParent(current); 
    }
    return ((Window)current).Content as Panel;
} 
```

该调用`VisualTreeHelper.GetParent(current)`最终引发异常“值不能为空”。

这是我如何使用`DrawOrderComparer`.

```
ucVertexControl Control = new ucVertexControl(vertex);
cnvDrawingArea.Children.Add(Control);
SortedChildren = cnvDrawingArea.Children.OfType<FrameworkElement>().OrderByDescending(x => x, new Classes.DrawOrderComparer()).Cast<UIElement>().ToList(); 
```

我的理论是，排序发生在新控件甚至定义了父控件之前，因为它稍后会被某些事件设置。问题是我不知道那是什么事件以及我是否可以听它。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:32:58.310

我相信我找到了解决方案。

我不知道任何会从画布触发的事件，但我知道我的每个用户控件都有一个`Loaded`事件。所以我改变了这个：

```
ucVertexControl Control = new ucVertexControl(vertex);
cnvDrawingArea.Children.Add(Control);
SortedChildren = cnvDrawingArea.Children.OfType<FrameworkElement>().OrderByDescending(x => x, new Classes.DrawOrderComparer()).Cast<UIElement>().ToList(); 
```

对此：

```
ucVertexControl Control = new ucVertexControl(vertex);
Control.Loaded += new RoutedEventHandler(Control_Loaded);
cnvDrawingArea.Children.Add(Control); 
```

该`Control_Loaded`函数只是转身并调用此方法：

```
private void UpdateSortedChildren()
{
    if (cnvDrawingArea.Children.OfType<FrameworkElement>().Any(x => !x.IsLoaded)) return;
    SortedChildren = cnvDrawingArea.Children.OfType<FrameworkElement>().OrderByDescending(x => x, new Classes.DrawOrderComparer()).Cast<UIElement>().ToList();
} 
```

由于有时我会在一次调用中添加多个子项，因此该方法只会在所有控件加载后执行。错误已经消失，所以希望这就是问题所在。

# ruby-on-rails - 如何在我的 Rails 应用程序中缓存顶级导航树

> ID：13389678
> 
> 赞同：0
> 
> 时间：2012-11-15T00:18:51.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, caching, optimization

我的haml文件中有这个逻辑

```
 %ul.menu
      - Page::NAVS.each do |navigation|
        %li.main_nav.has-sub
          = link_to navigation, main_headers(navigation)
          %ul
            - Page.parent_nav(navigation).each do |page|
              = page_children(page) 
```

它为我的导航菜单构建导航，我想知道我可以为每个用户缓存它。导航不会根据用户而改变，因此用户第一次访问页面时导航保持不变。有没有办法在第一次访问时缓存它并仅在我需要时更改

我在看，`fresh_when`但我不确定在此处实现该功能或页面缓存的最佳方法...任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:27:42.367

似乎[片段缓存](http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching)可能是一个不错的选择

# android - 无法运行 Android 虚拟设备管理器“android avd”得到 NullPointerException

> ID：13389680
> 
> 赞同：6
> 
> 时间：2012-11-15T00:19:06.387
> 
> 标签：android, adt

尝试启动 avd 时出现 NullPointerException。我刚刚下载了适用于 Mac 的 ADT 包并运行了 android avd。有谁知道为什么会失败？

```
$ ./android avd
java.lang.NullPointerException
    at com.android.sdklib.internal.avd.AvdInfo.getDeviceName(AvdInfo.java:158)
    at com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.fillDevices(DeviceManagerPage.java:497)
    at com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.fillTable(DeviceManagerPage.java:357)
    at com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.createContents(DeviceManagerPage.java:259)
    at com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.<init>(DeviceManagerPage.java:130)
    at com.android.sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.createDeviceTab(AvdManagerWindowImpl1.java:210)
    at com.android.sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.createContents(AvdManagerWindowImpl1.java:193)
    at com.android.sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:133)
    at com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94)
    at com.android.sdkmanager.Main.showAvdManagerWindow(Main.java:369)
    at com.android.sdkmanager.Main.doAction(Main.java:311)
    at com.android.sdkmanager.Main.run(Main.java:119)
    at com.android.sdkmanager.Main.main(Main.java:102) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T00:03:51.410

以下对我有用：

我从命令行导航到 Android-SDK 文件夹的工具文件夹。从那里我运行了这个命令：

```
android list avd 
```

这产生了我所有虚拟设备的列表，但其中一个显示自己是问题所在。确切的输出如下：

```
The following Android Virtual Devices could not be loaded:
   Name: Tab31
   Path: /Users/User/.android/avd/Tab31.avd
   Error: Failed to parse properties from /Users/User/.android/avd/Tab31.avd/config.iniere 
```

如果您看到此内容，请记下“名称”属性（在我的情况下为“Tab31”）并运行以下命令（显然将我的 AVD 名称替换为您的名称）：

```
android delete avd -n Tab31 
```

之后，我可以毫无问题地启动 AVD Manager。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T05:59:02.030

昨晚我遇到了同样的问题，终于找到了让模拟器开始工作的方法：

列出可用的目标： android list targets

android create avd -n {name} -t {targetID} （对于 {name} 我选择了平板电脑 - 相信它是任意的）

== 仍然没有工作，但后来我发现 =>

> 我在 manifest.xml 文件上方右键单击，选择选项运行方式 -> 运行配置 -> 在选项卡目标上，然后选择创建的 AVD。

（来自[尝试运行 Android 应用程序时的 Eclipse 启动错误](https://stackoverflow.com/questions/2143392/eclipse-launch-error-when-trying-to-run-an-android-app)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-14T16:31:03.043

如果上述解决方案均无效，则删除主目录中的 .android 文件夹将有效

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T16:56:18.880

在移动我的 Android SDK 并通过设置环境变量 ANDROID_SDK_HOME 更改基本目录后，我遇到了同样的问题。原来在以下文件中有一个路径（ANDROID_SDK_HOME 下面的路径）。

.android/avd/nameofphone.ini

该文件中的“path=”设置是绝对的，因此如果您在文件中移动，它将不再正确。将其更改为同一目录中 avd 文件的正确绝对路径解决了我的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-09T23:32:01.547

这通常是因为创建新的 AVD 失败或其中一个 AVD 的配置已损坏。

转到 ~/.android/avd

检查 AVD 列表。如果您认为其中一个 AVD 导致了问题，请 sudo rm -r (UNIQUE PART OF AVD NAME)*

这将删除该 AVD。然后重试android avd

@BreakingBad 的解决方案工作正常，除非配置损坏

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T23:51:21.463

看起来此问题已在 SDK 工具的**21.0.1 预览版 1 中得到修复。**

[http://code.google.com/p/android/issues/detail?id=40400](http://code.google.com/p/android/issues/detail?id=40400)

最可能的原因是 AVD 管理器无法解析的无效属性文件。更新到 SDK 工具的预览频道应该可以解决这个问题，或者您可以等待正式发布。

更新后，AVD 管理器启动并在我的列表中显示无效的 AVD，我可以将其删除。

# eclipse - 如果我调试 JSF webapp，它会给我 SOURCE NOT FOUND

> ID：13389682
> 
> 赞同：1
> 
> 时间：2012-11-15T00:19:14.933
> 
> 标签：eclipse, debugging, jsf, glassfish

> **可能重复：**
> [在 Eclipse 中调试 Java 代码时出现“找不到源”](https://stackoverflow.com/questions/6754207/i-get-source-not-found-when-debugging-my-java-code-in-eclipse)

我正在使用 Eclipse Juno、Glassfish 并尝试调试 JSF webapp。我在调试模式下启动服务器，我进入一个页面，我做一个动作进入一个动作方法。调试开始，类选项卡中的类名是正确的，但使用 .method（例如 LoginForm.loginAction()），名称附近的图标是堆栈跟踪的图标，并且在内容中，我的源应该在哪里，我得到一个未找到源...但我可以正确看到变量，堆栈跟踪中的行号，但没有源...

我调试了 JSF，但使用的是以前版本的 Eclipse。这很奇怪……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:57:14.207

我也一样，有人建议我删除调试配置，我已经完成了，但没有任何反应，我确定问题来自eclipse，只需删除并重新安装，

# python - 正则表达式从 email.message_from_string 中过滤掉“>”和“=20”

> ID：13389684
> 
> 赞同：1
> 
> 时间：2012-11-15T00:19:19.030
> 
> 标签：python, regex, encoding, mime

我想编写一个正则表达式来过滤掉通过 imaplib 和下面我的 Python 脚本中的电子邮件模块拉入的电子邮件中的所有垃圾。我认为正则表达式是最好的，但随时提出更好的解决方案。知道为什么电子邮件文本在下面的单词*be=tter*中有等号吗？原始电子邮件*更好*。

**Python 片段：**

```
emailMessage = email.message_from_string
print emailMessage.get_payload(): 
```

**打印文本：**

```
>=20
> >>>>
> >>>> Hope this makes it through you spam filter but couldn't think of a be=
tter subject.
> >>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:05:24.930

正如 Karl Knechtel 在评论中所说，您的消息被编码为[quoted-printable](http://en.wikipedia.org/wiki/Quoted-printable)。要对其进行解码，请使用[`quopri.decodestring()`](http://docs.python.org/library/quopri.html#quopri.decodestring)：

```
import quopri

decoded = quopri.decodestring(emailMessage.get_payload()) 
```

使用正则表达式去除“垃圾”字符效率低下，这也意味着每当您的输入中出现新字符时，您都必须修改您的代码。

但是，如果在解码后您想`>`在每行的开头丢失字符[以及它们之间的任何空格]，那么对于*那个*，正则表达式是一个合理的解决方案：

```
import re

chevrons = re.compile("(?m)^[> ]*")
stripped = re.sub(chevrons, "", decoded) 
```

`(?m)`顺便说一句，表示正则表达式是[multiline](http://docs.python.org/library/re.html#re.MULTILINE)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:28:00.763

如果您的消息与下面的正则表达式匹配，则过滤掉：

```
 ^>=\d$ 
```

IE

```
 if not (re.match('^>=\d$', emailMessage)):
    print emailMessage.get_payload(): 
```

# python - 无法实例化子目录中定义的类

> ID：13389687
> 
> 赞同：2
> 
> 时间：2012-11-15T00:19:29.903
> 
> 标签：python, oop, class, syntax

我的（简化的）项目布局如下：

```
/__init__.py
/test.py
/lib/__init__.py
/lib/client.py 
```

我`test.py`的很简单：

```
import lib.client
A = client()
A.Test() 
```

我的`lib\client.py`开头如下：

```
import ui #(another class in the lib dir)

class client(object):
    """
    (Blah)
    """
    UI = None

    def __init__():
        UI = ui()

    def Test():
        print "Success" 
```

当我尝试运行 test.py 时，我可以进入代码并看到客户端中的定义被解析，但是，当我到达实例化客户端的行时，我得到以下异常：

```
NameError: name 'client' is not defined 
```

如果我将该行更改为：

```
A = lib.client() 
```

然后我得到

```
'module' object is not callable 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:31:21.347

`lib.client`您拥有的对象`import lib.client`是模块，而不是类。要实例化该类，您需要在模块对象中调用该类：

`A = lib.client.client()`

或者，正如@rantanplan 所说，从模块中导入类

```
from lib.client import client
A = client() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T00:34:19.883

我刚刚了解到您以这种`Java`方式进行导入。

在 python 中，当你这样做时：

```
import lib.client 
```

您不会提供该模块中的所有定义。您刚刚提供了实际模块 -`client.py`

因此，要么您像现在一样保留导入方案并执行

```
import lib.client
A = lib.client.client() 
```

或者

```
from lib.client import client
A = client() 
```

另外我建议你用大写的驼峰命名你的python类，即

```
class Client(object): 
```

因为它是 python 约定。

# php - PHP -> MySQL | 如何处理选择结果

> ID：13389688
> 
> 赞同：0
> 
> 时间：2012-11-15T00:19:32.710
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

背景资料：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

如果 SELECT 在成功时返回资源，它实际上是否在成功时返回 TRUE？那么它仍然有效吗？：

```
<?php
$result = mysql_query('SELECT * WHERE 1=1');
if ($result) {
    //resultset is valid?
}

?> 
```

我几乎可以肯定它确实如此，但它是如何工作的？mysql_query() 是否只返回几个属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:22:58.863

从[关于 booleans 的 PHP 手册条目](http://www.php.net/manual/en/language.types.boolean.php)：

> 转换为布尔值时，以下值被视为 FALSE：
> 
> *   布尔值 FALSE 本身
> *   整数 0（零）
> *   浮点数 0.0（零）
> *   空字符串和字符串“0”
> *   一个元素为零的数组
> *   具有零成员变量的对象（仅限 PHP 4）
> *   特殊类型 NULL（包括未设置的变量）
> *   从空标签创建的 SimpleXML 对象
> 
> 其他所有值都被视为 TRUE（**包括任何资源**）。

重点是我的，但适用于您的情况。

另外，不要`mysql_*`在代码中使用这些函数。这些功能不再维护，正在[被弃用](http://news.php.net/php.internals/53799)。相反，您应该使用[MySQLi](http://php.net/mysqli)或[PDO](http://php.net/pdo)。不知道用哪个？[这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该有所帮助。

# php - 如何仅使用会话 ID 查找 IP 地址？

> ID：13389692
> 
> 赞同：1
> 
> 时间：2012-11-15T00:19:43.617
> 
> 标签：php, session, ip, sessionid

实际上这是一个简单的问题，但我可能无法向谷歌提出正确的问题。这是问题所在：

认为我有一个客户连接的网站。我为每个连接的客户端存储会话 ID（即 sbf1qql1qikvr4vnsvbomr1d61），我想使用这些会话 ID 检索 IP 地址。我正在运行一个 php 代码

```
root@34s:~# php checkSessions.php 
```

在服务器机器上。并且`checkSessions.php`具有与以下代码类似的代码

```
//Enter an infinite loop
while(1)
{
            //Get session ids and user ids from the database 
    $q1 = $db->getQ("SELECT user_id, session_id, FROM all_sessions");
    foreach($q1 as $q)
    {
        if($q[0]==63)
        {
                         // Now, I need to get IP adress. I only have a session id
        }
    }

           // Wait 2 seconds and do the same procedure again 
       sleep(2);
} 
```

那么，您能否提供任何方法来使用此会话 ID 找出客户端的 IP 地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:22:39.187

会话不存储 IP 地址或任何其他额外信息。您需要在会话启动时将其添加到会话中。IE：

```
session_start();
$_SESSION['ip'] = $_SERVER['REMOTE_ADDR']; 
```

# c# - 如何在 XAML 文件中使用多个 ControlTemplate？

> ID：13389695
> 
> 赞同：2
> 
> 时间：2012-11-15T00:20:02.250
> 
> 标签：c#, wpf, visual-studio

我在使用 WPF 时遇到了这个烦人的问题，我无法理解。我正在尝试创建的是具有可移动工具窗口的绘图程序（这是一项学校作业）的非常基本的实现，例如在 Photoshop 中。

我设法弄清楚我可以使用这个元素“Thumb”来实现简单的拖动功能。由于 Thumb 元素本身不可见，并且我用作容器（DockPanel）的对象没有 DragDelta 属性，我只是创建了一个 ControlTemplate 并将其附加到 Thumb，所以现在我有了一个可拖动的颜色工作正常的选择器。到现在为止还挺好。

但是，当我想创建额外的 ControlTemplate 以用于我计划使用的其他 Thumb 元素时会出现问题（我收到错误：属性“VisualTree”被设置了不止一次。）。这就是我想要帮助的。我在这里粘贴了我的整个 Window.Resources-tag，这样你就可以看到发生了什么。

```
<Window.Resources>          
        <Style x:Key="toolBoxBtn" TargetType="Button">
            <Setter Property="Width" Value="60" />
            <Setter Property="Height" Value="60" />
            <Setter Property="Margin" Value="5" />
            <Setter Property="DockPanel.Dock" Value="Top" />
        </Style>

        <Style x:Key="style1" TargetType="{x:Type Thumb}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">

                        <DockPanel Background="#e6e6e6" HorizontalAlignment="Left" Margin="0" Height="auto" Width="auto" Canvas.Left="640" Canvas.Top="8">
                            <Label VerticalAlignment="Top" DockPanel.Dock="Top" Background="#282828" Foreground="white" Content="Colors" HorizontalAlignment="Stretch" Width="auto" Height="auto" />

                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="7" VerticalAlignment="Center">
                                    <Rectangle DockPanel.Dock="top" Name="red" Fill="Red" Height="20" Width="20" Stroke="Black" MouseDown="getColor" />
                                    <Rectangle DockPanel.Dock="top" Name="blue" Fill="Blue" Height="20" Width="20" Stroke="Black" MouseDown="getColor"/>
                                    <Rectangle DockPanel.Dock="top" Name="green" Fill="GreenYellow" Height="20" Width="20" Stroke="Black" MouseDown="getColor"/>

                                    <Rectangle DockPanel.Dock="top" Name="customColorSlot1" Fill="White" Height="20" Width="20" Stroke="Black" MouseDown="getColor" />
                                    <Rectangle DockPanel.Dock="top" Name="customColorSlot2" Fill="White" Height="20" Width="20" Stroke="Black" MouseDown="getColor"/>
                                    <Rectangle DockPanel.Dock="top" Name="customColorSlot3" Fill="White" Height="20" Width="20" Stroke="Black" MouseDown="getColor"/>
                                </StackPanel>
                                <GroupBox Header="Selected Color">
                                    <Rectangle Name="currentColor" Fill="White" Height="40" Width="40" Stroke="Black" MouseDown="test"/>
                                </GroupBox>
                            </StackPanel>
                        </DockPanel>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="fillTool" TargetType="{x:Type Thumb}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Ellipse HorizontalAlignment="Left" Height="19" Margin="310,330,0,0" VerticalAlignment="Top" Width="19" Fill="Blue"/>
                        <Ellipse HorizontalAlignment="Left" Height="12" Margin="317,316,0,0" VerticalAlignment="Top" Width="12" Fill="Blue"/>
                        <Ellipse HorizontalAlignment="Left" Height="8" Margin="307,320,0,0" VerticalAlignment="Top" Width="7" Fill="Blue"/>
                        <Ellipse HorizontalAlignment="Left" Height="3" Margin="317,302,0,0" VerticalAlignment="Top" Width="3" Fill="Blue"/>
                        <Ellipse HorizontalAlignment="Left" Height="5" Margin="311,310,0,0" VerticalAlignment="Top" Width="5" Fill="Blue"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources> 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:42:43.800

`ControlTemplate`只能包含一个孩子。尝试将其更改`Canvas`为

```
 <Style x:Key="fillTool" TargetType="{x:Type Thumb}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Canvas>
                           <Ellipse HorizontalAlignment="Left" Height="19" Margin="310,330,0,0" VerticalAlignment="Top" Width="19" Fill="Blue"/>
                           <Ellipse HorizontalAlignment="Left" Height="12" Margin="317,316,0,0" VerticalAlignment="Top" Width="12" Fill="Blue"/>
                           <Ellipse HorizontalAlignment="Left" Height="8" Margin="307,320,0,0" VerticalAlignment="Top" Width="7" Fill="Blue"/>
                           <Ellipse HorizontalAlignment="Left" Height="3" Margin="317,302,0,0" VerticalAlignment="Top" Width="3" Fill="Blue"/>
                           <Ellipse HorizontalAlignment="Left" Height="5" Margin="311,310,0,0" VerticalAlignment="Top" Width="5" Fill="Blue"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

# java - 在cygwin中将多个jar文件设置为类路径

> ID：13389701
> 
> 赞同：2
> 
> 时间：2012-11-15T00:20:42.873
> 
> 标签：java, cygwin, classpath

我有程序`x.java`，`c:\cygwin\programs\x.java`它使用`y.jar`它`z.jar`也在文件夹中`c:\cygwin\programs`。

在窗口中：

```
c:cygwin\programs>javac -classpath c:\cygwin\programs\y.jar;c:\cygwin\programs\z.jar x.java 
```

没有错误。

在cygwin中

(1)

```
$javac -classpath c\:/cygwin/programs/y.jar;c\:/cygwin/programs/z.jar x.java 

Errors: $'PK\003\004': Command not found. 
```

(2)

```
$javac -classpath c:\cygwin\programs\y.jar;c:\cygwin\programs\z.jar x.java 

Errors: -bash command Command not found. 
```

(3)

```
$javac -classpath 'c:/cygwin/programs/y.jar;c:/cygwin/programs/z.jar' x.java

No error. 
```

为什么在（1），（2）的情况下会出错......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:39:07.767

你搞砸了转义字符 back-slash `\`。在基于 Unix 的环境中，最好`/`用作路径分隔符。如果出于某种原因要使用反斜杠，请使用附加的反斜杠`\\`，即将其视为路径中的文字。

**由于上述原因，前两条语句不会导致正确的路径并因此失败。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:46:23.640

Cygwin 将`;`字符视为开始一个新的命令行，因此在 (1) 中它试图执行单独的命令

```
$ javac -classpath c\:/cygwin/programs/y.jar
$ c\:/cygwin/programs/z.jar x.java 
```

错误消息来自 Cygwin 试图将 jar 文件直接作为脚本执行。

您可以使用 (3) 中的方法引用整个参数`''`，或者转义分号：

```
$ javac -classpath c\:/cygwin/programs/y.jar\;c\:/cygwin/programs/z.jar x.java 
```

# c# - 连接到 Web 服务时抛出异常

> ID：13389706
> 
> 赞同：1
> 
> 时间：2012-11-15T00:21:03.597
> 
> 标签：c#, .net, web-services, soap

我在通过 HTTPS 从 .NET Windows 应用程序使用 Java Web 服务时遇到问题。Web 服务需要服务器身份验证，但是当我尝试调用任何方法时，我收到以下错误：

> HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器收到的身份验证标头是“基本领域=登录”。

我将 Web 服务添加为 Visual Studio 中的服务引用。这是我的应用程序配置：

在`<security>`部分我有这个：

```
<security mode="Transport">
  transport clientCredentialType="None" proxyCredentialType="None"
   realm="" />
   <message clientCredentialType="UserName" algorithmSuite="Default" />
 </security> 
```

在`<httpsTransport>`部分我有这个：

```
<httpsTransport manualAddressing="false" maxBufferPoolSize="524288"
  maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
  bypassProxyOnLocal="false"
  hostNameComparisonMode="StrongWildcard" keepAliveEnabled="true"
  maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
  realm="" transferMode="Buffered" 
  unsafeConnectionNtlmAuthentication="false"
  useDefaultWebProxy="true" requireClientCertificate="false" /> 
```

我的代码如下所示：

```
ServiceReference1.servicePortTypeClient service = new ServiceReference1.servicePortTypeClient ("enpointbindingname"); 
service .ClientCredentials.UserName.UserName = "username";          
service .ClientCredentials.UserName.Password = "password";
service.method(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:39:09.483

从服务器的响应来看，webservice 似乎需要基本的 http 身份验证。这意味着传输级别的身份验证，而不是消息级别的身份验证。所以也许安全配置可能是这样的：

```
<security mode="Transport">
    <transport clientCredentialType="Basic" />
</security> 
```

如果 web 服务确实使用带有基本身份验证的 HTTPS，那么[这个 msdn 页面](http://msdn.microsoft.com/en-us/library/ms733775.aspx)详细描述了这个场景。

# spring - Active MQ + Spring 3.0 - 请求/响应实现 - 示例程序得到响应但消息消费者计数不断上升并等待永远

> ID：13389709
> 
> 赞同：1
> 
> 时间：2012-11-15T00:21:16.343
> 
> 标签：spring, activemq, spring-jms

我正在尝试示例项目来实现 Spring 3 + Active MQ 请求/响应同步。我创建了一个 spring 配置文件，一个将消息放入队列的消息生产者和一个消费消息并返回响应的消息消费者......

我收到了回复...但是我的示例程序似乎没有结束...当我检查 Apache Active MQ 管理控制台时，我发现每次运行测试类时消费者数量都会不断增加...我必须在 Eclipse 中手动终止它，以便在管理控制台中减少计数...

我在这里提到了这个线程 -[堆栈溢出线程](https://stackoverflow.com/questions/8006891/javax-jms-messageconsumer-hangs-on-receive-when-consumer-closed)- 遇到同样问题的人.. 但看起来我已经有了这个解决方案，但仍然没有看到我的问题得到解决

我也提到[了这里](http://codedependents.com/2010/03/04/synchronous-request-response-with-activemq-and-spring/)和[这里](http://codedependents.com/2009/10/16/efficient-lightweight-jms-with-spring-and-activemq/)来创建我的解决方案

所以这是我的代码

```
 <!-- creates an activemq connection factory using the amq namespace -->

<bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="tcp://localhost:61616" />
</bean>

<!-- 
<bean id="connectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory"
    init-method="start" destroy-method="stop">
    <property name="connectionFactory" ref="jmsConnectionFactory" />
    <property name="maxConnections" value="100" />
</bean>
 -->

<!-- CachingConnectionFactory Definition, sessionCacheSize property is the 
    number of sessions to cache -->

<bean id="connectionFactory"
    class="org.springframework.jms.connection.CachingConnectionFactory">
    <constructor-arg ref="jmsConnectionFactory" />
    <property name="exceptionListener" ref="jmsExceptionListener" />
    <property name="sessionCacheSize" value="1" />
    <property name="cacheConsumers" value="false" />
    <property name="cacheProducers" value="false" />
</bean>

<!-- JmsTemplate Definition -->
<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <constructor-arg ref="connectionFactory" />

</bean>

<jms:listener-container connection-factory="connectionFactory">
    <jms:listener id="request.queue.listener" destination="test.request"
        ref="testMessageListener" />
</jms:listener-container>

<bean id="WorkerClient" class="com.vzwcorp.legal.eplm.active.mq.framework.WorkerClient" /> 
```

请求者类

```
@Component 
```

公共类请求者{

```
private static final class ProducerConsumer implements
        SessionCallback<Message> {

    private static final int TIMEOUT = 5000;

    private final String msg;

    private final DestinationResolver destinationResolver;

    private final String queue;

    public ProducerConsumer(final String msg, String queue,
            final DestinationResolver destinationResolver) {
        this.msg = msg;
        this.queue = queue;
        this.destinationResolver = destinationResolver;
    }

    public Message doInJms(final Session session) throws JMSException {
        MessageConsumer consumer = null;
        MessageProducer producer = null;
        try {
            final String correlationId = UUID.randomUUID().toString();
            final Destination requestQueue = destinationResolver
                    .resolveDestinationName(session, queue + ".request",
                            false);
            final Destination replyQueue = destinationResolver
                    .resolveDestinationName(session, queue + ".response",
                            false);
            // Create the consumer first!
            consumer = session.createConsumer(replyQueue,
                    "JMSCorrelationID = '" + correlationId + "'");
            final TextMessage textMessage = session.createTextMessage(msg);
            textMessage.setJMSCorrelationID(correlationId);
            textMessage.setJMSReplyTo(replyQueue);
            // Send the request second!
            producer = session.createProducer(requestQueue);
            producer.send(requestQueue, textMessage);
            // Block on receiving the response with a timeout
            return consumer.receive(TIMEOUT);
        } finally {
            // Don't forget to close your resources
            JmsUtils.closeMessageConsumer(consumer);
            JmsUtils.closeMessageProducer(producer);
        }
    }
}

private final JmsTemplate jmsTemplate;

@Autowired
public Requestor(final JmsTemplate jmsTemplate) {
    this.jmsTemplate = jmsTemplate;
}

public String request(final String request, String queue) {
    // Must pass true as the second param to start the connection
    TextMessage message = (TextMessage) jmsTemplate.execute(
            new ProducerConsumer(request, queue, jmsTemplate
                    .getDestinationResolver()), true);
    try {
        return message.getText();
    } catch (JMSException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return "exception in requestor";
    }
} 
```

}

消息监听类

```
@Component 
```

公共类 TestMessageListener 实现 MessageListener {

```
@Autowired
private WorkerClient WorkerClient;

@Override
public void onMessage(Message arg0) {
    WorkerClient.delegateToClient(arg0);

} 
```

}

工人客户端类

```
@Component 
```

公共类 WorkerClient 实现 ApplicationContextAware {

```
private ApplicationContext ctx;

private JmsTemplate jmsTemplate;

public void delegateToClient(Message arg0) {
    MessageProducer producer = null;
    if (arg0 instanceof TextMessage) {
        try {
            final TextMessage message = (TextMessage) arg0;

            System.out.println("Message received by Listener: "
                    + message.getJMSCorrelationID() + " - "
                    + message.getText());

            jmsTemplate.setDefaultDestination(message.getJMSReplyTo());

            Session session = jmsTemplate.getConnectionFactory()
                    .createConnection()
                    .createSession(false, Session.AUTO_ACKNOWLEDGE);
            producer = session.createProducer(message.getJMSReplyTo());
            final TextMessage textMessage = session
                    .createTextMessage("I did it at last");
            textMessage.setJMSCorrelationID(message.getJMSCorrelationID());
            textMessage.setJMSReplyTo(message.getJMSReplyTo());
            producer.send(message.getJMSReplyTo(), textMessage);

        } catch (Exception e) {
            e.printStackTrace();

        } finally {
            JmsUtils.closeMessageProducer(producer);
        }
    }
}

@Override
public void setApplicationContext(ApplicationContext arg0)
        throws BeansException {
    ctx = arg0;
    this.jmsTemplate = (JmsTemplate) ctx.getBean("jmsTemplate");
} 
```

终于到了测试班

```
public class TestSync {

public static void main(String[] args) {

    ApplicationContext ctx = new ClassPathXmlApplicationContext(
            "activeMQConfiguration.xml");
    OrderService orderService = (OrderService) ctx.getBean("orderService");
    JmsTemplate jmsTemplate = (JmsTemplate) ctx.getBean("jmsTemplate");
     Requestor req = new Requestor(jmsTemplate);
    //CopyOfRequestor req = new CopyOfRequestor(jmsTemplate);
    String response = req.request("Hello World", "test");
    System.out.println(response);

} 
```

}

那么如何修复消息消费者返回和我的测试类结束？请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:45:39.593

问题基本上是应用程序上下文保持活动状态可能是因为 JMS 侦听器容器传播的线程。解决方法是在 main 方法的末尾显式调用 ApplicationContext.close()，这应该会导致所有 bean（包括 JMS 侦听器）的有序关闭。

更好的解决方法是使用 Spring Test Support，它将负责初始化和关闭应用程序上下文，而不是您需要显式地执行它。

```
@RunWith(SpringJUnit4Runner.class)
@ContextConfiguration(...)
public class TestSync{

    @Autowired OrderService orderService;

    @Test
    public void testJMS(){
        ...
    }

} 
```

# eclipse - Eclipse 无头构建

> ID：13389711
> 
> 赞同：1
> 
> 时间：2012-11-15T00:21:44.167
> 
> 标签：eclipse, build-automation

我们有一个 Eclipse 工作区，用于处理依赖 CDT、Android NDK、SWIG 和 Java 的项目。我们在每个项目的属性页面的 Builders 部分下都有以下构建器：

1) SWIG Builder 2) CDT Builder 3) Android Resource Manager 4) Android Pre Compiler 5) Java Builder 6) Android Package Builder 7) Scanner Configuration Builder 8) Post Build Step

当然，其中一些是自定义构建器 - 我想知道是否有一种方法可以从命令行启动无头构建，依次运行上述所有构建器。我知道 CDT 和 Java 无头构建完全可以单独使用，但我还不相信可以使用 eclipse 从命令行构建像上面这样更复杂的项目。有没有人做过类似的事情？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:49:05.730

只是一个更新，以防其他人碰到同一堵墙并想知道我最终做了什么——据我所知，上述问题的答案是否定的。我最终使用 Ant make 文件按顺序调用构建器，效果很好。

# php - 在 PHP 中获取原始 HTTP 请求正文的可靠方法

> ID：13389712
> 
> 赞同：2
> 
> 时间：2012-11-15T00:21:48.420
> 
> 标签：php, apache, http

> **可能重复：**
> [获取原始帖子数据](https://stackoverflow.com/questions/1361673/get-raw-post-data)

从`php://input`作品中读取，除非请求正文为`multipart/form-data`格式，在这种情况下不会读取任何内容。

我听说`php://input`只能从一次读取，这就是我怀疑可能导致这种情况的原因（即 PHP 可能会在我得到`php://input`它之前读取它）。`multipart/form-data`但是，在测试中，我发现我可以多次从流中读取而不会出现问题。

不管是什么格式，有没有办法获取请求正文？

这是我到目前为止所得到的：

```
$body = '';   

$handle = fopen('php://input', 'r');
while(!feof($handle)) {
    $body .= fread($handle, 1024);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:50:38.487

您可以使 PHP 始终填充 $HTTP_RAW_POST_DATA 请参阅[http://www.php.net/manual/en/ini.core.php#ini.always-populate-raw-post-data](http://www.php.net/manual/en/ini.core.php#ini.always-populate-raw-post-data) 不是最有效的方法。

# javascript - 40 位整数在 JavaScript 中是否准确表示？

> ID：13389713
> 
> 赞同：5
> 
> 时间：2012-11-15T00:21:50.567
> 
> 标签：javascript, node.js, floating-point, v8

我正在使用需要生成（使用`*`和`+`操作）并比较 40 位整数的服务器端计算。我知道此时 V8 引擎将数字存储为`Double`而不是`int`. 我可以依靠这些数字来正确生成和比较吗？

我的直觉说是的——双打应该不会有问题——但我不知道如何检查或在哪里可以找到这方面的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T00:23:50.137

## 是的。

JavaScript[`Number`](http://ecma-international.org/ecma-262/5.1/#sec-4.3.19)是一个 64 位 IEEE 754 浮点值，可以存储从 -2 ^(53)到 2 ^(53)的整数而不会损失精度，因为双精度数最多可以存储 53 位尾数（显式为 52）。

**参考资料**：

*   [ECMA-262：4.3.19 数值](http://ecma-international.org/ecma-262/5.1/#sec-4.3.19)

*   [双精度浮点数（维基百科）](http://en.wikipedia.org/wiki/Double_precision)

# javascript - 如何在循环中从listitem /无序列表的输入中获取值

> ID：13389714
> 
> 赞同：1
> 
> 时间：2012-11-15T00:21:55.147
> 
> 标签：javascript, input, listitem

我正在尝试创建一个通用 JS 来从输入中获取 id 和 value。然后，将它们放入 JsonObject 中以传回服务器。清单是这样的：

```
<ul id="myList" data-role="listview" data-inset="true">
    <li> Field One <input id="Field_One" /></li>
    <li> Field Two <input id="Field_Two" /></li>
    <li> Field Three <input id="Field_Three" /></li>
    <li> Field Four <input id="Field_Four" /></li>
</ul> 
```

我可以获取列表项的数据，

```
function Test(){
    var unorderedList = document.getElementById('myList'); 
    var ListItems = unorderedList.getElementsByTagName('li');  
    var listID

    for (var i = 0; i < ListItems.length; i++) {
        listID = ListItems[i].firstChild.data;
        //alert(listID);
    };  
} 
```

但我无法进一步获取文本 ID 或值。（好吧，如果我有 id 那么我可以获得价值......）。

如何通过循环获取 ul/il 中的输入 id/值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:29:06.307

没有人说这`firstChild`将是输入。事实上，它很可能是一个文本节点。

试试看：

```
function Test() {
    var unorderedList   = document.getElementById('myList'),
        ListItems       = unorderedList.getElementsByTagName('li');  

    for (var input, i = 0; i < ListItems.length; i++) {
        input = ListItems[i].getElementsByTagName('input')[0];
        console.log(input.id, input.value);
    }
} 
```

**[代码示例](http://jsfiddle.net/ECJYE/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:28:04.700

您可以使用 getAttribute 来获取 id。所以：

```
 listID = ListItems[i].firstChild.getAttribute('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:30:52.123

您可以直接获取输入。在您的示例中，似乎没有理由首先获取 LI：

[http://jsfiddle.net/ysL5B/](http://jsfiddle.net/ysL5B/)

```
function Test(){
    var unorderedList = document.getElementById('myList'); 
    var ListItems = unorderedList.getElementsByTagName('input');  

    for (var i = 0; i < ListItems.length; i++) {
        console.log(ListItems[i].id);
        console.log(ListItems[i].value);
    }
} 
```

# java - 从 Java JNI 捕获 C 标准错误

> ID：13389716
> 
> 赞同：6
> 
> 时间：2012-11-15T00:21:58.947
> 
> 标签：java, c, java-native-interface, stderr

我有一个用 C 开发的大程序，大多数函数都有几 `fprintf(stderr, "message")`行。

但现在我需要在 Java 程序中使用这些函数。所以，我实现了一个JNI接口在Java和C之间进行通信。一切正常，Java和C可以通信，但是现在我想在Java中捕获C的几个stderr......我该怎么做？

干杯；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:43:26.140

根据我对同样问题的经验，我可以看出 JNI 桥对通过标准流从 JNI 输出的重要性有非常奇怪的看法。通常它会进行大量缓存，溢出不可预测的块和时间，我们没有弄清楚如何强制刷新。

我们最终`*printf()`用记录到文件的方式对语句进行了大规模正则表达式替换，完全在 C 端完成。跟踪生成的日志文件比任何试图让 JVM 相信当 C 层这么说时你确实需要日志记录的尝试更可靠，而不是当 JVM 决定缓冲区时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:46:40.830

基于[这个答案](https://stackoverflow.com/a/13389875/18573)，我认为你应该能够重新分配[进程的 stderr](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setErr%28java.io.PrintStream%29)。您将需要另一个线程在 JNI 函数执行时从中读取数据，以免它阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:40:09.227

当您调用 JNI 库时，会将其加载到 JVM 进程中，因此库 STDOUT 和 STDERR 将是 JVM STDOUT 和 STDERR。所以问题是特定于操作系统的，更像是“进程如何读取自己的 STDOUT/STDERR？”

有几种可能性[内部捕获/重定向标准输出？](https://stackoverflow.com/questions/7286918/internally-capture-redirect-stdout)，但我认为仅读取库的 STDOUT 或 STDERR 并不容易（我认为在我给您的示例中，一旦执行重定向，您就无法返回使用控制台进行输出（*））。

正如所评论的，答案将在很大程度上取决于您的操作系统。

(*) 我可能错了，我对 C/系统编程不是很精通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-15T06:45:24.940

一种可能的解决方法是执行以下操作，可在[http://www.thecodingforums.com/threads/redirect-cout-and-cerr-to-system-out-and-system-err.635861/找到](http://www.thecodingforums.com/threads/redirect-cout-and-cerr-to-system-out-and-system-err.635861/)

> 我想出的解决方案是使用两种方法创建一些 JNI 代码：
> 
> *   将标准输出重定向到管道的一种
> *   一个将输出存储在那里的
> 
> 然后流是：
> 
> *   调用重定向的函数
> *   进行多个其他 JNI 调用
> *   获取输出并将其写入我想要的位置

上面链接提供的[实现](http://www.vajhoej.dk/arne/eksperten/jniredirect/)如下所示

```
#include <stdio.h>
#include <fcntl.h>
#include <io.h>
#include <jni.h>

#include "Nat1.h"

#define MAXBUF 20480

static int oldstdout;
static int pipehandles[2];
static char buf[MAXBUF];

JNIEXPORT void JNICALL Java_Nat2_init(JNIEnv *cntx, jobject me)
{
    oldstdout = _dup(_fileno(stdout));
    _pipe(pipehandles,MAXBUF,_O_BINARY);
    _dup2(pipehandles[1],_fileno(stdout));
 }

JNIEXPORT jstring JNICALL Java_Nat2_done(JNIEnv *cntx, jobject me)
{
    int n;
    fflush(stdout);
    _dup2(oldstdout,_fileno(stdout));
    n = _read(pipehandles[0],buf,sizeof(buf));
    buf[n] = '\0';
    return (*cntx)->NewStringUTF(cntx,buf);
} 
```

这有点麻烦，因为您需要*开始*捕获标准错误，然后在以后想要查看它时获取它。

# jquery - 为什么 Joomla 加载 mootools-core 和 mootools-more 两次？

> ID：13389720
> 
> 赞同：0
> 
> 时间：2012-11-15T00:22:08.590
> 
> 标签：jquery, mootools, joomla2.5

建立了一个简单的网站，似乎无法弄清楚为什么会这样：

```
 <script src="media/system/js/mootools-core.js" type="text/javascript"></script>
  <script src="media/system/js/core.js" type="text/javascript"></script>
  <script src="media/system/js/mootools-more.js" type="text/javascript"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
  <script src="/mylocalfolder/media/plg_jblibrary/jquery/jquery.noconflict.js" type="text/javascript"></script>
  <script src="/mylocalfolder/media/system/js/mootools-core.js" type="text/javascript"></script>
  <script src="/mylocalfolder/media/system/js/core.js" type="text/javascript"></script>
  <script src="/mylocalfolder/media/system/js/caption.js" type="text/javascript"></script>
  <script src="/mylocalfolder/media/system/js/modal.js" type="text/javascript"></script>
  <script src="/mylocalfolder/media/system/js/mootools-more.js" type="text/javascript"></script> 
```

什么可能导致 mootools-core.js、core.js 和 mootools-more.js 以两条不同的路径拉入两次？哪里是搜索的好地方？考虑到我唯一考虑使用它的是模态窗口（已停用，无效），这是很多垃圾，可以免费加载。我尝试调用`JHTML::_('behavior.modal');`几次以查看它是否会继续调用其他副本，但它不会。

任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:18:25.727

Joomla 有一个内置的 api 来加载这样的 mootools：`JHTML::_('behavior.mootools');`不管你提到多少次，joomla 都会加载`mootools-core.js`一次`mootools-more.js`。

我猜您的模块或插件之一正在手动将 mootools 添加到输出的头部，它可能是这样的：

```
$doc =& JFactory::getDocument();
$doc->addScript("media/system/js/mootools-core.js"); 
```

# asynchronous - NFS 同步与异步

> ID：13389721
> 
> 赞同：0
> 
> 时间：2012-11-15T00:22:15.303
> 
> 标签：asynchronous, sync, nfs

我正在使用 NFS 来允许两台服务器通过简单的文本文件进行通信，但是有时读取文本文件以获取信息的服务器似乎正在读取不完整的文件，然后因为这个崩溃。然后我去看看导致它崩溃的“不完整”文件，文件是完整的。读取这些文件的服务器是否有可能在 NFS 完成写入之前看到它们？我仅在完全写入时才使用 linux`mv`将它们从本地计算机移动到 NFS，因此“不应该”在 NFS 上存在不完整的状态。

这个问题可能与同步与异步有关吗？现在我正在使用异步。根据我的理解，异步只是意味着您从写入中返回并且您的程序可以继续运行，并且此写入将在以后发生。而同步意味着您的进程将等待该写入完成，然后再继续。更改为同步可以解决此问题吗？或者有没有更好的方法来处理这个？我知道两台服务器可以通过数据库进行通信，但实际上我这样做是为了降低数据库的使用率。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:05:45.343

`mv`跨文件系统转换为`cp`+`rm`并且肯定不是原子的，即使没有涉及 NFS。您应该首先将文件复制到目标文件系统中的临时文件，然后将其重命名为正确的名称。例如，而不是：

```
$ mv myfile.txt /mnt/targetfs/myfile.txt 
```

做：

```
$ mv myfile.txt /mnt/targetfs/.myfile.txt.tmp
$ mv /mnt/targetfs/.myfile.txt.tmp /mnt/targetfs/myfile.txt 
```

（这假设读取文件的进程会忽略它，而它没有正确的名称。）

# c# - 如何使用模板和页面连接将图像添加到 pdf

> ID：13389723
> 
> 赞同：1
> 
> 时间：2012-11-15T00:22:25.383
> 
> 标签：c#, .net-4.0, itextsharp

我正在努力在多页 PDF 上插入图像。为了创建几个页面，我使用了 PdfConcatenate，它可以工作。我可以完美地添加我的模板页面。当我尝试添加图像时，问题就开始了。它只是不加载它们。

这是用于添加图像的代码：

```
 string pdfTemplate = @"Tools\template.pdf";
        string targetPdfPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), fileName + ".pdf");

        FileStream output = new FileStream(targetPdfPath, FileMode.Create);
        PdfConcatenate pdfConcatenate = new PdfConcatenate(output);

        PdfReader pdfReader = new PdfReader(pdfTemplate);
        MemoryStream memoryStream = getMemoryStream(output);
        PdfStamper pdfStamper = new PdfStamper(pdfReader, output);

        int cardIndex = 1;

        foreach (Registry reg in registries)
        {
            setFields(reg, pdfStamper, cardIndex);

            if (cardIndex == 4)
            {
                pdfConcatenate.AddPages(pdfReader);
                pdfReader = new PdfReader(pdfTemplate);
                pdfStamper = new PdfStamper(pdfReader, output);

                cardIndex = 1;
            }
            else
            {
                cardIndex++;
            }
        }

        //if (cardIndex != 1)
        //    pdfConcatenate.AddPages(pdfReader);

        //make the form no longer editable
        pdfStamper.FormFlattening = true;

        pdfStamper.Close();
        pdfReader.Close();
        //pdfConcatenate.Close(); 
```

如果对 PdfStamper 使用 MemoryStream 并取消注释这些行：

```
//if (cardIndex != 1)
//    pdfConcatenate.AddPages(pdfReader);
//pdfConcatenate.Close(); 
```

我得到它来添加页面，但没有图像。

知道出了什么问题吗？

> **解决方案：（感谢@mkl）**

```
 string pdfTemplate = @"Tools\template.pdf";
        string targetPdfPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), fileName + ".pdf");

        FileStream output = new FileStream(targetPdfPath, FileMode.Create);
        PdfConcatenate pdfConcatenate = new PdfConcatenate(output);

        PdfReader pdfReader = new PdfReader(pdfTemplate);
        MemoryStream memoryStream = new MemoryStream();
        PdfStamper pdfStamper = new PdfStamper(pdfReader, memoryStream);

        int cardIndex = 1;

        foreach (Registry reg in registries)
        {
            setFields(reg, pdfStamper, cardIndex);

            if (cardIndex == 4)
            {
                pdfStamper.FormFlattening = true;
                pdfStamper.Close();
                PdfReader tempReader = new PdfReader(memoryStream.ToArray());

                pdfConcatenate.AddPages(tempReader);

                memoryStream = new MemoryStream();
                pdfReader = new PdfReader(pdfTemplate);
                pdfStamper = new PdfStamper(pdfReader, memoryStream);

                cardIndex = 1;
            }
            else
            {
                cardIndex++;
            }
        }

        if (cardIndex != 1)
        {
            pdfStamper.FormFlattening = true;
            pdfStamper.Close();
            PdfReader tempReader = new PdfReader(memoryStream.ToArray());

            pdfConcatenate.AddPages(tempReader);

            tempReader.Close();
        }

        pdfStamper.Close();
        pdfReader.Close();
        pdfConcatenate.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:22:11.097

问题很可能是对如何`PdfStamper`工作的一些误解。您似乎认为它以某种方式操纵了`PdfReader`it 标记中的数据，以及事先从该阅读器导出的页面。情况**并非**如此，a`PdfStamper`根据阅读器中的数据生成一个新的 PDF 文件（在其输出流中），但阅读器本身的内容并未更新以反映所有更改（`PdfReader`在此过程中可能会触摸对象, 但是，之后不可重复使用）。所以...

正如评论中已经提到的，您有`PdfConcatenate`和未知数量的`PdfStamper`实例都在编写相同的“FileStream”输出。由于这些对象中的每一个都创建了一个独立的 PDF，因此如果其中一个获胜，您将很幸运，因为这样您至少会得到一个正确的 PDF 作为输出。否则，您要么得到一些异常，要么得到由多个混合 PDF 组成的垃圾。因此，仅使 PdfConcatenate 以您的输出文件为目标。

如果您的实际意图是每次重复填写模板字段中 4 张卡片的内容并合并结果，**则不**`PdfReader`应将模板中的页面添加到`PdfConcatenate`--- 该阅读器中的页面未填写！--- 而是将 PdfStamper 输出到 a `MemoryStream`，填充其字段，展平其表单，关闭它，在新的 中打开其输出`PdfReader`，并将该阅读器中的所有页面添加到 PdfConcatenate。

我不敢将其放入代码中，因为我主要使用 Java 并且写下未经测试的 C# 代码很可能会包含多个错误... ;)

PS：目前您指望`PdfReader`您打开的所有实例都在某处隐式关闭。虽然目前确实如此，但 iText SVN 存储库中的最近签入似乎表明这些隐式关闭调用已从代码中删除。因此，也请开始明确关闭`PdfReader`不再使用的实例。否则，由于读者关闭得太晚，您很快将不得不处理内存泄漏。

# python - 将一个 EXE 及其依赖项转换为一个独立的 EXE

> ID：13389724
> 
> 赞同：3
> 
> 时间：2012-11-15T00:22:30.903
> 
> 标签：python, compilation, exe, cx-freeze

我正在使用 cx_Freeze 将 Python 程序编译成可执行文件，它工作得很好，但问题是它不会将程序编译成一个 EXE，而是将它们转换成一个`.exe`文件和一大堆`.dll`文件，包括`python32.dll`那些对于要运行的程序。

有谁知道我如何将所有这些文件打包成一个`.exe`文件？我宁愿它是一个普通的 EXE 文件，而不仅仅是一个将 DLL 复制到临时目录以启动程序的文件。

**编辑：**这是参考 Python 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:26:11.150

您至少有两个选择：**PyInstaller**或**py2exe**。

使用 py2exe，有​​一个名为[bundle_files](http://www.py2exe.org/index.cgi/SingleFileExecutable)的选项，您可以设置：

*   **3**（默认）：不捆绑。
*   **2**：捆绑除 Python 解释器之外的所有内容。
*   **1**：捆绑一切，包括 Python 解释器。

这是一个示例**setup.py**：

```
from distutils.core import setup
import py2exe, sys, os

sys.argv.append('py2exe')

setup(
    options = {'py2exe': {'bundle_files': 1}},
    windows = [{'script': "single.py"}],
    zipfile = None,
) 
```

这种方法不需要将文件提取到临时位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:40:12.320

在将 python 脚本编译到一个文件中时，Pyinstaller 通常是更简单的选择。

```
pyinstaller.py program.py --onefile 
```

请参阅此处的文档：http: [//www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw](http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:30:23.673

你试过innosetup吗？它可以从 cxfreeze 的输出创建安装程序文件。可能有一个选项可以将所有内容捆绑到一个文件中。

# c# - 处理未定义抽象方法C#的调用

> ID：13389734
> 
> 赞同：0
> 
> 时间：2012-11-15T00:23:21.250
> 
> 标签：c#, serialization, error-handling, deserialization, abstract

我有一个抽象类，它调用它的一个抽象方法，如下所示：

```
public abstract class VirtualAsset : ISerializable
{
    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        SerializeAsset(info);
    }

    public abstract void SerializeAsset(SerializationInfo info);
} 
```

问题是，由于我信任用户输入，恶意用户（或不知道自己在做什么的用户）极有可能尝试传入 VirtualAsset 的实例，而不是实现所需抽象函数的子类...事实上，当我故意这样做时，程序崩溃而没有错误。

我试过使用 try-catch 无济于事......有效处理这个问题的最佳方法是什么？每次调用可覆盖的方法时都必须检查 self.GetType() 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:27:52.363

> 问题是，由于我信任用户输入，恶意用户（或不知道自己在做什么的用户）极有可能尝试传入 VirtualAsset 的实例

不，这是不可能的。根据定义，抽象类不能被实例化。没有人能够创建 的实例`VirtualAsset`，并且任何不实现抽象方法的派生类也必须是抽象的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:28:22.320

由于无法创建抽象类的实例，因此可验证代码不存在此问题。

现在，如果一个人传递了一个类的名称，而您尝试创建这样的类，创建将失败。它将失败是因为无法创建抽象类，而不是因为它试图调用抽象方法。

# ruby-on-rails - 在单一资源中嵌套资源

> ID：13389735
> 
> 赞同：0
> 
> 时间：2012-11-15T00:23:25.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

鉴于以下路线：

```
resource :public_profile do
  resources :posts
end

resource :private_profile do
  resources :posts
end 
```

在 中，我如何`PostsController`确定我嵌套在哪个单一资源中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:54:10.667

您可以将它们路由到不同的控制器（通过在路由中指定），这些控制器是从相同的“基本”控制器 PostsController 扩展而来的。在扩展控制器中，您可以识别它们：

前任：

```
resource :public_profile do
  resources :posts, :controller => "public_profile_posts_controller"
end

resource :private_profile do
  resources :posts, :controller => "private_profile_posts_controller"
end 
```

和控制器

```
class PublicProfilePostsController < PostsController
 before_filter :identify_controller

 def identify_controller
  @nested_resource_of = :public_profile
 end
end

class PrivateProfilePostsController < PostsController
 before_filter :identify_controller

 def identify_controller
  @nested_resource_of = :private_profile
 end
end 
```

然后您可以访问该变量

> `@nested_resource_of`

在 PostsController 动作中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:54:32.290

您可以做到这一点的一种方法是创建另外 2 个扩展一些 main 的控制器`PostsController`，并使用

```
resource :public_profile do
  resources :posts, controller: "PublicPostsController"
end

resource :private_profile do
  resources :posts, controller: "PrivatePostsController"
end 
```

你甚至可以通过多种方式做到这一点。例如，也许它是有意义的

```
class ProfileController < ApplicationController; end
class PostsController < ApplicationController; end

class Private::ProfileController < ProfileController; end
class Private::PostsController < PostsController; end

class Public::ProfileController < ProfileController; end
class Public::PostsController < PostsController; end 
```

带路由

```
resource :public_profile, controller: "Public::ProfileController" do
  resources :posts, controller: "Public::PostsController"
end

resource :private_profile, controller: "Private::ProfileController" do
  resources :posts, controller: "Private::PostsController"
end 
```

无论您如何设置，您都可以轻松“知道”您嵌套在哪个资源中，因为您实际上将在特定于该嵌套的单独控制器中运行，因此可以为特定于该嵌套的逻辑提供一个完美的位置。对于一般逻辑，您会将其放入 parent`PostsController`中。

* * *

你可以做到这一点的另一种方法是添加一个`before_filter`喜欢`PostsController`

```
before_filter :check_nesting

private
  def check_nesting
    @is_public_profile = params.include?(:public)
  end 
```

并有类似的路由

```
resource :public_profile, public: true do
  resources :posts, controller: "PublicPostsController"
end

resource :private_profile, private: true do
  resources :posts, controller: "PrivatePostsController"
end 
```

不过我不喜欢这种方法。

# amazon-ec2 - 如何从 CloudWatch 警报重启 EC2 实例

> ID：13389737
> 
> 赞同：2
> 
> 时间：2012-11-15T00:23:43.163
> 
> 标签：amazon-ec2, amazon-cloudwatch

有时我的应用程序会因任何原因而死机，我可以使用 CloudWatch 检测到这种情况，并且 CPU 使用率指标下降。此时我想重新启动 java 应用程序或整个 EC2 实例。有什么建议我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-24T04:54:00.733

[AWS CloudWatch](https://aws.amazon.com/cloudwatch/)现在提供[重启 EC2 实例操作](https://aws.amazon.com/blogs/aws/new-amazon-cloudwatch-action-reboot-ec2-instance/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T14:14:17.283

您可以让 CloudWatch 终止您的 EC2 实例，并让 AutoScaling 启动另一个配置了您的应用程序的“新”实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:47:40.807

如果只有您的应用程序停止但 EC2 实例工作。

您可以使用 CloudWatch API 编写一个 shell 监控应用程序，并在必要时拍摄该应用程序，然后将其作为 cron 任务。或者，您可以直接在您的 EC2 实例中使用 shell。

自动重启 EC2 实例太危险了，您可以尝试 Autoscaling，它会在您的实例冻结时自动启动一个新实例并保持您的 SLA。

# c# - 用对象属性和其他值填充文本模板的最有效方法

> ID：13389740
> 
> 赞同：1
> 
> 时间：2012-11-15T00:24:02.500
> 
> 标签：c#, asp.net

我有程序员处理不同的对象，例如具有制造商和位置的产品。

我有需要定义配置规则的网页设计师，这些配置规则实际上是模板，应该能够使用来自产品或制造商的可变元素。

因此，我们从配置文件中读取了如下字符串：

```
string template = "Hello visitor, look at this [Product.Name] made by [Product.Manufacturer.Name], today it costs only [Price]"; 
```

现在我正在寻找最通用的设置，最好的性能，让程序员拥有这样的东西：

```
public static ParseTemplate(string template, params string[] values){
    //parsing
} 
```

甚至更好（想法素描方式）

```
public static ParseTemplate(string template, params object[] objects){
    //parsing
    return template.Replace("[objectName.PropertyName]", objectName.PropertyValue);

} 
```

程序员应该能够指向一个模板，在这个模板上抛出他们拥有的任何值/对象，并且应该返回一个解析过的字符串，其中所有可能的占位符都替换为正确的值；

我们应该先用 KeyValuePairs 建立一个列表吗？这就是我现在所做的，但是程序员必须明确地用对填充这些列表，所以我正在寻找更简单的东西。

他们是否有可能只输入“原始对象”，并有一个帮助器来整理这些对象的属性并获取它们的值？

反思可以帮助我们吗？或者有没有更简单的方法？

# vba - VBA代码挂Excel

> ID：13389741
> 
> 赞同：0
> 
> 时间：2012-11-15T00:24:07.833
> 
> 标签：vba, excel

我编写了一个代码来获取文件中的原始数据并根据报告的“日期”汇总数据，并根据“日期”值将此汇总数据复制到目标工作簿中。

当我尝试运行此代码时。它适用于一个文件，但挂断在另一个文件中。当我尝试调试它时，我无法遵循代码流。它突然破裂。你能帮我解决这个问题吗？

```
Option Explicit
Sub file_select()
Dim RequiredFileName As Variant, i As Integer
Dim targetWorkbook As Workbook
' making weak assumption that active workbook is the target
Set targetWorkbook = Application.ActiveWorkbook
'RequiredFileName = "c:\myfiles\test.xls"
On Error GoTo EndNow
RequiredFileName = Application.GetOpenFilename(FileFilter:="ALL Files (*.*), *.*", Title:="Get File", MultiSelect:=True)
For i = 1 To UBound(RequiredFileName)
    MsgBox RequiredFileName(i), , GetFileName(CStr(RequiredFileName(i)))
Next i
For i = 1 To UBound(RequiredFileName)
    Call ProcessOpenFile(RequiredFileName(i), targetWorkbook)
Next i
EndNow: End Sub

Function GetFileName(filespec As String)
Dim fso As Object
Set fso = CreateObject("Scripting.FileSystemObject")
GetFileName = fso.GetFileName(filespec)
End Function

Sub ProcessOpenFile(RequiredFileName, targetWorkbook As Workbook)
Dim RequiredWorkbook As Workbook
'Dim targetWorkbook As Workbook
' get the required workbook
Set RequiredWorkbook = Application.Workbooks.Open(RequiredFileName)

Dim targetSheet As Worksheet
Set targetSheet = targetWorkbook.Worksheets("Summary_NV")
Dim RequiredSheet As Worksheet
Set RequiredSheet = RequiredWorkbook.Sheets(1)        'here assumed that source workbook consists only of one sheet i.e., is the required sheet.
RequiredWorkbook.Sheets.Add After:=Sheets(Sheets.Count)
RequiredWorkbook.Sheets(Sheets.Count).Select
RequiredWorkbook.Sheets(Sheets.Count).Name = "SUMMARY" & Sheets.Count
Call Sort_Before(RequiredWorkbook)        'sorting the required file data according to date.

If RequiredSheet.Name = "EVDO_SC_Summary" Then
    Call ProcessEVDO(RequiredSheet)        'get the summary of report
    Call Sort_After(RequiredWorkbook)        ' sort the summary according to date
    Call DateChange(RequiredWorkbook)        'changing date format
ElseIf RequiredSheet.Name = "CDMAVoice_SC_Summary" Then
    Call ProcessVoice(RequiredSheet)
    Call Sort_After(RequiredWorkbook)
    Call DateChange(RequiredWorkbook)
ElseIf RequiredSheet.Name = "CDMAData_SC_Summary" Then
    Call ProcessData(RequiredSheet)
    Call Sort_After(RequiredWorkbook)
    Call DateChange(RequiredWorkbook)
End If

Dim iRow As Integer
Dim LastRow_Req As Integer
Dim LastRow_Tar As Integer
Dim LastCol_Req As Integer
LastRow_Req = RequiredWorkbook.Sheets(Sheets.Count).Cells(Rows.Count, 1).End(xlUp).Row        'last row summary data
LastCol_Req = RequiredWorkbook.Sheets(Sheets.Count).Cells(1, Columns.Count).End(xlToLeft).Column        'last column of summary data
LastRow_Tar = targetSheet.Cells(Rows.Count, 1).End(xlUp).Row        'last row of target sheet used
RequiredWorkbook.Sheets(Sheets.Count).Range("B1").Resize(LastRow_Req, LastCol_Req - 1).Select        'selecting summary data for copying
Selection.Copy

If targetSheet.Cells(LastRow_Tar, 1).Value < RequiredWorkbook.Sheets(Sheets.Count).Range("A1").Value Then        'if date entered in target sheet last cell is less
    If RequiredWorkbook.Sheets(1).Name = "EVDO_SC_Summary" Then        'then the summary report date
        targetSheet.Activate
        Cells(LastRow_Tar + 1, 16).Select
        Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                                                      :=False, Transpose:=False
        Cells(LastRow_Tar + 1, 1).Select
        Call Date_update(RequiredWorkbook, targetWorkbook, LastRow_Tar + 1, 1)
    ElseIf RequiredWorkbook.Sheets(1).Name = "CDMAVoice_SC_Summary" Then
        targetSheet.Activate
        Cells(LastRow_Tar + 1, 2).Select
        Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                                                      :=False, Transpose:=False
        Cells(LastRow_Tar + 1, 1).Select
        Call Date_update(RequiredWorkbook, targetWorkbook, LastRow_Tar + 1, 1)
    ElseIf RequiredWorkbook.Sheets(1).Name = "CDMAData_SC_Summary" Then
        targetSheet.Activate
        Cells(LastRow_Tar + 1, 9).Select
        Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                                                      :=False, Transpose:=False
        Cells(LastRow_Tar + 1, 1).Select
        Call Date_update(RequiredWorkbook, targetWorkbook, LastRow_Tar + 1, 1)
    End If
End If

For iRow = targetSheet.Range("A12").Row To LastRow_Tar
    RequiredWorkbook.Activate
    If targetSheet.Cells(iRow, 1).Value < RequiredWorkbook.Sheets(Sheets.Count).Range("A1").Value Then
        GoTo A
    ElseIf targetSheet.Cells(iRow, 1).Value = RequiredWorkbook.Sheets(Sheets.Count).Range("A1").Value Then
        If RequiredWorkbook.Sheets(1).Name = "EVDO_SC_Summary" Then
            targetSheet.Activate
            Cells(iRow, 16).Select
            Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                                                          :=False, Transpose:=False
            Cells(iRow, 1).Select
            Call Date_update(RequiredWorkbook, targetWorkbook, iRow, 1)
            Exit For
        ElseIf RequiredWorkbook.Sheets(1).Name = "CDMAVoice_SC_Summary" Then
            targetSheet.Activate
            Cells(iRow, 2).Select
            Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                                                          :=False, Transpose:=False
            Cells(iRow, 1).Select
            Call Date_update(RequiredWorkbook, targetWorkbook, iRow, 1)
            Exit For
        ElseIf RequiredWorkbook.Sheets(1).Name = "CDMAData_SC_Summary" Then
            targetSheet.Activate
            Cells(iRow, 9).Select
            Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                                                          :=False, Transpose:=False
            Cells(iRow, 1).Select
            Call Date_update(RequiredWorkbook, targetWorkbook, iRow, 1)
            Exit For
        End If
    ElseIf targetSheet.Cells(iRow, 1).Value > RequiredWorkbook.Sheets(Sheets.Count).Range("A1").Value Then
        If RequiredWorkbook.Sheets(1).Name = "EVDO_SC_Summary" Then
            targetSheet.Activate
            Cells(iRow, 16).Select
            Selection.Insert Shift:=xlDown
            Exit For
            Cells(iRow, 1).Select
            Call Date_update(RequiredWorkbook, targetWorkbook, iRow, 1)
        ElseIf RequiredWorkbook.Sheets(1).Name = "CDMAVoice_SC_Summary" Then
            targetSheet.Activate
            Cells(iRow, 2).Select
            Selection.Insert Shift:=xlDown
            Cells(iRow, 1).Select
            Call Date_update(RequiredWorkbook, targetWorkbook, iRow, 1)
            Exit For
        ElseIf RequiredWorkbook.Sheets(1).Name = "CDMAData_SC_Summary" Then
            targetSheet.Activate
            Cells(iRow, 9).Select
            Selection.Insert Shift:=xlDown
            Cells(iRow, 1).Select
            Call Date_update(RequiredWorkbook, targetWorkbook, iRow, 1)
            Exit For
        End If
    End If
A:     Next
RequiredWorkbook.Close savechanges:=False
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-14T22:54:29.467

在评论中回答“代码进入无限循环” – [user1806794](https://stackoverflow.com/users/1806794/user1806794)

# sql - SQL 返回 2 列

> ID：13389743
> 
> 赞同：-4
> 
> 时间：2012-11-15T00:24:11.047
> 
> 标签：sql, oracle

我有两个复杂的 select 语句，每个语句都返回一个相同类型的值。我试图将它们组合成一个类似于 UNION 的语句，只是不是在一列中返回 2 行，而是返回 2 个不同名称的列，每个列包含一个值。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:30:23.950

你总是可以做

```
SELECT (SELECT the_first_select) AS col1, (SELECT the_second_select) AS col2
FROM DUAL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:27:31.867

```
select (select 'expr1'), (select 'expr2') 
```

# java - inconsolata 和 netbeans

> ID：13389746
> 
> 赞同：1
> 
> 时间：2012-11-15T00:24:22.310
> 
> 标签：java, netbeans, windows-7, fonts, 64-bit

当我安装[inconsolata](http://www.levien.com/type/myfonts/inconsolata.html)时，一切看起来都很好，但是当我尝试在 netbeans 上查看它时，它看起来像这样： [![在此处输入图像描述](../Images/17e263ea276c5745643530fb281eb4fc.png)](https://i.imgur.com/F5ZSn.png)

我尝试同时使用 ttf 和 otf 版本，但它们看起来都一团糟。

这是一个java问题吗？Win 7 64位问题？有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:37:21.080

您可以尝试在 NetBeans 中禁用字体抗锯齿功能。

打开你的[netbeans.conf](http://wiki.netbeans.org/FaqNetbeansConf)

作为部分的`netbeans_default_options`一部分添加`-J-Dswing.aatext=false -J-Dawt.useSystemAAFontSettings=off`.

[编辑：fvu 还提供了指向NetBeans 字体呈现常见问题解答](http://wiki.netbeans.org/FaqFontRendering#Anti-aliasing_in_NetBeans_7.1)中相关部分的有用链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:05:25.793

如果您想使用 NetBeans 字体呈现设置，请查看[http://wiki.netbeans.org/FaqFontRendering](http://wiki.netbeans.org/FaqFontRendering)

不幸的是，本文的结论是默认字体渲染设置提供了最佳体验。至少在 Windows 下。我已经尝试了 Inconsolata 的所有可能性，默认设置确实提供了最好的外观。

作为一种解决方法，您可以尝试两件事：

*   降低配色方案的对比度，即通过降低背景亮度和/或增加字体亮度。它使字体渲染问题不那么明显。
*   使用 NegativeScreen：[http ://arcanesanctum.net/negativescreen/](http://arcanesanctum.net/negativescreen/)

您可能会发现您的体验有所改善，但这取决于您的个人喜好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T23:00:10.143

不只是 NetBeans，尽管它也可能不仅仅是 Inconsolata 字体的错。在构建 NetBeans 的底层 Java 系统级别似乎存在问题。我这样说是因为同样的问题也出现在 Jetbrains 创建的 IDE 中——IntelliJ IDEA、WebStorm、PyCharm，可能还有其他。

# php - PHP - 很难理解为什么会回显某个值。可以在 if 内部进行赋值并在 else 中执行吗？

> ID：13389749
> 
> 赞同：1
> 
> 时间：2012-11-15T00:24:40.883
> 
> 标签：php

大家好！请原谅我的无知，我对php很陌生。

我很难理解为什么 php 代码会以这种方式运行。该代码正在运行，但我对为什么会回显这些值一无所知。

（出于解释目的，代码已被简化，但它通常会根据自定义列数填充和格式化表格）

**问题 ** **（见代码）*

 *为什么变量`$cell`回显（参见：??????问题??????）：1 2 3 4 5 6 7？我期待 0 1 2 3 4 5 6 // 因为我认为它的起点是 $cell = 0，就像在开始时分配的那样。唯一合理的原因是它从 $cell +=$i （从 for 循环）继承了它的值，但是当 case 是 $col=2 时，不是第一个语句完全跳过并且只执行了 else 语句吗？

```
<?php
for ($i=1; $i <= 7 ; $i++)  {
    $cell = 0;
    echo "<tr>";

    for ($col=1; $col <= 2; $col++) {
        echo "<td>" ;
        if ($col == 1) {
            echo $cell; // echoes: 0 0 0 0 0 0 0 ----> because $cell = 0
            $cell +=$i;
            echo $cell; // echoes: 1 2 3 4 5 6 7  ----> because of  $cell +=$i;
        } else {
            echo $cell ; // echoes: 1 2 3 4 5 6 7    ?????? QUESTION ?????
            $cell +=7;
            echo $cell; // echoes: 8 9 10 11 12 13 14
        }
        echo "</td>";
    }
    echo "</tr>";
}
?> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T00:30:17.383

在内部`for`循环的第一次迭代中，当`$col==1`then`$cell`增加 1。当`$col`不是`1`（在这种情况下唯一可能的值是`2`），那么你已经增加了`$cell`by的值`1`，因此它不再是`0`。

所以你有了：

```
i = 1 | $cell = 0 | $col = 1 // $cell +=$i; => $cell += 1; => $cell = 1;
i = 1 | $cell = 1 | $col = 2 // $cell += 7; => $cell = 8;
i = 2 | $cell = 0 | $col = 1 // $cell +=$i; => $cell += 2; => $cell = 2;
i = 2 | $cell = 2 | $col = 2 // $cell += 7; => $cell = 9;
// etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:48:13.387

`$cell`echo`1 2 3 4 5 6 7`而不是`0 1 2 3 4 5 6`仅`$cell`在您的第二个 for 循环中增加，并在您的第一个 for 循环中设置回 0 的原因：

真正发生的是：

循环1

=> `$cell = 0;`// $cell 设置为零

循环2

=> `$cell += $i;`// $cell 增加 1
=> `$cell += 7;`// $cell 增加 7

在这种情况下， $cell 为零只会发生在**第一个 for 循环**中，或者如果您在增量**之前回显它。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:36:52.030

$cell 永远不会回显 0 因为当第二个 for 循环开始时 $col 将等于 1 因此 $cell 将是 $cell += $i 它总是会给你 $cell == 1 因为 $i == 1 当代码开始运行。希望这有帮助*

# ios - 如何在初始化过程中及早获取子视图帧

> ID：13389750
> 
> 赞同：2
> 
> 时间：2012-11-15T00:25:00.123
> 
> 标签：ios, uistoryboard

我正在将一些代码从 XIB 更改为情节提要。设置情节提要场景的子视图的帧边界的时间似乎存在很大差异。

此代码经常使用的技术是：

*   UIView 子视图具有在 XIB 或故事板文件中定义的尺寸（允许程序员以外的其他人修改 UI）
*   UIViewController 有一个到对象的链接作为`IBObject UIView *`
*   在 UIViewController 中`- viewWillAppear()`，会进行某些计算并根据这些计算完成绘图。

例如，在我们的 XIB 或 Storyboard 文件中，有一个 UIView 我们希望将其分成四个区域。控制器查看该 UIView 的边界，查看其框架，然后在 UIView 中绘制四个框，每个框的大小为四分之一。

在.h中：

```
IBOutlet UIView *outputColorKeyView; 
```

在 .m 中`viewWillAppear`：

```
CGRect keyBounds = [outputColorKeyView bounds];

float high = keyBounds.size.height;
float wide = keyBounds.size.width;

float cellWidth = wide/4.0;

XLog(@"Dimensions for the color key are: %f %f", high, wide); 
```

我的问题是，在 XIB 下，这很好用：我能够看到我必须绘制的区域的尺寸是 200 点宽（例如），而单元格可以绘制 50 点宽。

在 Storyboards 下，这不再适合我：当我从控制器的`viewWillAppear`方法调用时，我得到一个 (0,0,0,0) 的帧：

`[18:09:16.901|4096] Dimensions for the color key are: 0.000000 0.000000`

但是，从程序生命周期的后期运行（由按钮触发），我得到了正确的结果：

`[18:09:35.812|4096] Dimensions for the color key are: 36.000000 734.000000`

有没有办法在视图出现之前获取这些信息？我会这么认为，但`viewWillAppear`似乎是实际呈现视图之前的最后机会。或者是否有一些我遗漏的明显开关可以使这项技术按预期工作？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:09:01.190

答案是在对我的[后续问题](https://stackoverflow.com/questions/13406574/gettting-subviews-frames-in-storyboard)的回答中给出的......做这些事情的地方是在布局完成之后，在`viewDidLayoutSubviews`

我不清楚为什么信息会发生变化，从最初的描述文件（无论是 XIB 还是 Storyboard）中的数据最早可用`viewDidLoad`到现在是 (0,0,0,0)，但不同的*是*如果您遵循书籍和网络中的大量教程代码，请注意。

# javascript - 使用 javascript 更改标签

> ID：13389751
> 
> 赞同：42
> 
> 时间：2012-11-15T00:25:37.127
> 
> 标签：javascript, html

我想知道如何用这样的纯 javascript 更改标签

```
 <span>some text</span> 
```

我想把它改成那个

```
 <div>some text</div> 
```

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-15T00:34:16.747

您不能像那样更改元素的类型，而是必须创建一个新元素并将内容移入其中。例子：

```
var e = document.getElementsByTagName('span')[0];

var d = document.createElement('div');
d.innerHTML = e.innerHTML;

e.parentNode.replaceChild(d, e); 
```

演示：http: [//jsfiddle.net/Guffa/bhnWR/](http://jsfiddle.net/Guffa/bhnWR/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-18T08:30:07.303

刚刚为此编写了一个 jQuery 插件。

```
(function( $ ) {
  $.fn.replaceTag = function(newTag) {
    var originalElement = this[0]
    , originalTag = originalElement.tagName
    , startRX = new RegExp('^<'+originalTag, 'i')
    , endRX = new RegExp(originalTag+'>$', 'i')
    , startSubst = '<'+newTag
    , endSubst = newTag+'>'
    , newHTML = originalElement.outerHTML
    .replace(startRX, startSubst)
    .replace(endRX, endSubst);
    this.replaceWith(newHTML);
  };
})(jQuery); 
```

用法：

```
$('div#toChange').replaceTag('span') 
```

这种方法最大的优点是id保留了原始元素的所有属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T00:33:40.417

如果 jquery 是可以接受的，请使用 replaceWith。

```
$('span').each(function() {

  $(this).replaceWith($('<div>' + this.innerHTML + '</div>'));

}); 
```

这是一个 JSFIDDLE 工作[演示](http://jsfiddle.net/SJuYh/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T00:34:28.020

你不能这样做。您要做的是获取您的内容`span`，然后将其删除并创建新`div`内容并用以前的内容填充它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-15T00:42:30.560

假设：您要替换的跨度被包装在 id 为“foo”的 div 中

在纯 javascript 中，您可以执行以下操作：

```
 var original_html = document.getElementById('foo').innerHTML;

 original_html = original_html.replace("<span>", "<div>");

 original_html = original_html.replace(new RegExp("</span>"+$), "</div">)
 document.getElementById('foo').innerHTML=original_html; 
```

但是，如果您不一定期望跨度被您可以始终获得的元素（通过 id 或其他方式）紧密包裹，则 javascript 变得相当复杂。无论哪种情况，真正的答案是：使用 jQuery。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-15T00:31:42.910

如果使用 jquery

```
 Var spantxt = $('span').text();
 $('body').append('<div>'+spantext+'</div'); 
```

请注意，这仅在只有一个跨度时才有效，否则使用 id 选择器

# replication - 复制中的副本

> ID：13389756
> 
> 赞同：0
> 
> 时间：2012-11-15T00:26:08.903
> 
> 标签：replication, distributed-system

系统中的数据是项目（即对象）的集合。这些逻辑对象由一组称为副本的物理副本实现。副本是物理对象，每个都存储在一台计算机上，其数据和行为与系统操作的某种程度的一致性相关联。

我的问题是

1 对象应该是物理的，副本应该是逻辑的 2 副本是精确副本还是原始副本的一部分，即足够的信息 3 副本存储在哪里，单个对象有多少个副本？4 当客户端连接到对象时，他们访问的是副本还是原始对象？

我试图在网上找到我的问题的答案，但不能因此不得不在 stackoverflow 上发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:21:47.117

答案主要取决于您使用什么“系统”。没有通用的复制机制。但是，问题 #1 和 #2 的答案应该始终相同： 1\. 副本是物理对象 2\. 副本是精确副本。几乎每个分布式系统都使用自产的东西。这里有一些例子：

*   MySQL 复制：客户端/服务器应用程序。在 master 上执行的事务将被转移到 slave。配置的从属设备的数量是副本的数量。副本和原始版本不同：副本是原始版本的延迟版本。回答您的问题：

    1.  取决于配置的从节点数量 4\. 取决于客户端使用主节点或从节点之一
*   CouchBase 集群：所有节点都是平等的，没有主节点。对象和副本通过散列函数分布在节点之间。如果一个节点发生故障，其余节点将重新分发故障节点的对象和副本。您的问题的答案： 3\. 您可以配置您想要拥有的副本数。4\. 有 2 个选项：

    *   客户端可以连接到任何节点，如果对象位于其他地方，节点将代理请求
    *   客户端知道对象分布机制并知道集群的结构。因此客户端可以直接连接到存储所需对象的节点。

# terminal - Homebrew 已安装一半。无法重新安装或卸载 - 如何手动卸载？

> ID：13389760
> 
> 赞同：7
> 
> 时间：2012-11-15T00:26:32.897
> 
> 标签：terminal, command, installation, uninstallation, homebrew

我似乎把自己挖到了一个角落。

我第一次安装 Homebrew 进行到一半，但它卡住了。大约 15 分钟的等待后，我退出了终端。我最初的输入是来自 homebrew [homepage](https://brew.sh/)的内容。

```
ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)" 
```

我重新打开终端并尝试重新安装并得到 -

```
It appears Homebrew is already installed. If your intent is to reinstall you
should do the following before running this installer again:
rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup 
```

所以，按照建议，我跑了

```
rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup 
```

并得到

```
-bash: brew: command not found 
```

我尝试从 Homebrew FAQ 运行卸载脚本，但这似乎也没有帮助。还有什么我可以尝试的吗？我将如何手动卸载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:28:34.180

那么如果你再次运行 ruby​​ -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)" 会发生什么呢？

在你杀死终端之后，你 ps auxw | grep -E 'ruby|curl' 并杀死那些？

您是否将 /usr/local 用于其他任何事情？如果没有，您可以 rm -rf /usr/local 并再次运行安装命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:16:23.387

我不是终端的专业人士，但我在 .gitconfig 中发现了一行阻止我运行安装：

```
[push]
    default = simple 
```

从我的 .gitconfig 中注释掉该行后，安装运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-12T09:56:58.107

如果您运行`rm -rf /usr/local`，您可能会获得权限被拒绝或有删除其他已安装程序文件的风险。仅删除`/usr/local/Homebrew/`对我有用的文件夹

# powershell - 从 RunOnce 运行 PowerShell

> ID：13389762
> 
> 赞同：1
> 
> 时间：2012-11-15T00:26:37.280
> 
> 标签：powershell, registry, runonce

我正在尝试在模板自定义期间运行一组 powershell 命令。这些命令被注入到注册表中的 RunOnce。

```
%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe -command &{Add-Type -Assembly System.Web; [Web.Security.Membership]::GeneratePassword(21,7) | Select-Object @{N="Group";E={"Test Group"}}, @{N="Username";E={"TestUser"}}, @{N="Password";E={$_}} | Export-Csv -Path C:\stuff\user.csv -NoTypeInformation} 
```

我知道这些命令有效，因为我可以在 powershell 控制台中运行它们。我知道 "%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe -command &{PSCODE}" 是正确的，因为其他 runonce 命令将正确运行。我无法弄清楚我的语法的哪一部分失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:27:35.127

这可能是一个漫长的试错过程，为了节省您宝贵的时间，我建议您使用脚本文件而不是那个长命令：

```
%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe -File c:\script.ps1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T14:31:46.693

只想补充一点，为了运行一系列命令，您必须在不带引号的情况下运行它。至少只有这样它对我有用：

```
C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -noexit Import-Module Hyper-V; Get-VMSwitch \"*Virtual*\" | Remove-VMSwitch -Force; New-VMSwitch -NetAdapterName \"Ethernet\" -Name \"VMNet\" 
```

# google-api - 通过 API 对 Google 文档的 ACL 请求进行批处理相当慢

> ID：13389763
> 
> 赞同：4
> 
> 时间：2012-11-15T00:26:45.013
> 
> 标签：google-api, acl, google-docs-api, batch-processing

我正在使用第 3 版（是的，我知道有 google drive API）并且我正在尝试按照[此处](https://developers.google.com/google-apps/documents-list/#batching_acl_requests)批处理 ACL 请求。

我在谷歌游乐场（以及我自己的代码）中运行了一个测试，以将 150 个用户作为“作者”（角色）添加到文档中。

xml 看起来像：

```
<feed xmlns="http://www.w3.org/2005/Atom"
    xmlns:gAcl="http://schemas.google.com/acl/2007"
    xmlns:batch="http://schemas.google.com/gdata/batch">
  <category scheme="http://schemas.google.com/g/2005#kind"
      term="http://schemas.google.com/acl/2007#accessRule"/>
  <entry>
<id>https://docs.google.com/feeds/default/private/full/document:1111/acl/user:owner@example.com</id>
    <batch:operation type="query"/>
  </entry>
<entry><batch:id>1</batch:id><batch:operation type="insert"/><gAcl:role value="writer"/><gAcl:scope type="user" value="test1@example.com"/></entry>
<entry><batch:id>2</batch:id><batch:operation type="insert"/><gAcl:role value="writer"/><gAcl:scope type="user" value="test2@example.com"/></entry>
....
<entry><batch:id>150</batch:id><batch:operation type="insert"/><gAcl:role value="writer"/><gAcl:scope type="user" value="test150@example.com"/></entry>
</feed> 
```

处理这个需要 60 秒以上，然后响应返回 500 错误。它似乎确实添加了所有 150，但需要一段时间。如果我要直接在 google 共享对话框的文本区域中添加 150 个电子邮件地址，则需要更短的时间（8-10）。

我没有正确使用 API 吗？API 不是模仿 google 分享 UI 界面吗？

更新：在进一步研究中，批处理 api 看起来实际上只是在“通过网络”节省您的时间，但在服务器端（谷歌）它只是一次发送一个请求。我可以看到，如果我直接在 google 共享对话框的文本区域中添加 150 个电子邮件地址，则需要 8-10 秒，然后如果我添加 151，则需要 8-10 秒。这告诉我谷歌正在根据现有列表验证新条目。通过直接的在线互动，它可以一次完成所有 150 个；使用批次，它一次需要一个并在每个之后进行验证 - 总时间为 5 分钟以上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:48:18.700

如果您要对大量文件进行这些更改，并且要添加的用户列表至少有时是相同的，那么您应该考虑将用户放入 Google 组。然后，您可以简单地将 google 组添加到文件 ACL 中，从而显着减少 API 调用次数和所用时间。

因此，如果需要与 150 个用户共享 2 个文件，使用您当前的方法将需要 150 次 API 调用（即使网络流量是批处理的）。这会导致大约 300 个 API 调用。

如果使用组方法共享 2 个文件，则共享第一个文件将需要 152 次 API 调用（1 次 API 调用来配置组，150 次 API 调用来将用户添加为成员，1 次 API 调用来与组共享文件）。但是共享第二个文件只需要 1 个 API 调用。这导致只有 153 个 API 调用。

您还可以将文件集中到集合中并共享集合而不是单个文件，以减少所需的 API 调用次数。

Group Provisioning API 调用记录在： [https ://developers.google.com/google-apps/provisioning/#creating_a_group](https://developers.google.com/google-apps/provisioning/#creating_a_group)

Add Member to Group API 调用记录在： [https ://developers.google.com/google-apps/provisioning/#adding_a_member_to_a_group](https://developers.google.com/google-apps/provisioning/#adding_a_member_to_a_group)

# php - 为什么我的查询导致基数违规错误 PDO/PHP MySQL

> ID：13389766
> 
> 赞同：1
> 
> 时间：2012-11-15T00:26:49.660
> 
> 标签：php, mysql, pdo, cardinality

我正在使用 PDO 生成以下查询：

```
 INSERT INTO MyTable (ID, Data) 
  VALUES ( 
    (:id_0, :data_0), (:id_1, :data_1), (:id_2, :data_2), 
    (:id_3, :data_3), (:id_4, :data_4), (:id_5, :data_5), 
    (:id_6, :data_6), (:id_7, :data_7), (:id_8, :data_8), 
    (:id_9, :data_9)  
  ) 
```

这个查询是在一个循环中生成的，所以我只是得到了`print_r($query);`部分并粘贴在这里。

然后在我的 PHP 中，我有一个循环绑定参数，如下所示：

```
 $c = 0;
   foreach($data as $key=> $value)
   {
        $insert->bindValue(":id_{$c}", $key, DB::PARAM_INT);
        $insert->bindValue(":data_{$c}", $value, DB::PARAM_STR);
        $c++;
   } 
```

我收到以下错误：

```
SQLSTATE[21000]: Cardinality violation: 1241 Operand should contain 1 column(s) 
```

我的表定义如下所示：

```
 CREATE TABLE MyTable(
        ID INT PRIMARY KEY,
        Data TEXT
    ) ENGINE=MyISAM 
```

谁能帮我？

```
 $data - this just holds key - value pairs where key is integer and value
 is serialized array. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:35:01.303

`()`从您的`VALUES`子句中删除外部。`VALUES`不包含多行子句`()`，但每个以逗号分隔的行组都`()`包含在`VALUES (1,2,3),(3,2,1),(1,2,3)`. 通过封闭整个行列表，MySQL 必须将外部错误解释`()`为结果将是第一列的表达式的开头。

```
VALUES /* no ( here... */
    (:id_0, :data_0), (:id_1, :data_1), (:id_2, :data_2), 
    (:id_3, :data_3), (:id_4, :data_4), (:id_5, :data_5), 
    (:id_6, :data_6), (:id_7, :data_7), (:id_8, :data_8), 
    (:id_9, :data_9)  
/* no ) here... */ 
```

# javascript - iScroll 4 不能滚动吗？

> ID：13389767
> 
> 赞同：0
> 
> 时间：2012-11-15T00:26:53.647
> 
> 标签：javascript, jquery, html, css, iscroll4

> **可能重复：**
> [IScroll 包装器没有得到高度。！](https://stackoverflow.com/questions/13459864/iscroll-wrapper-doesnt-get-a-height)

我的代码如下：

```
<div id ="wrapper" data-role="content" height="100%">
            <div id="scroller">
                <div class="homebutton_zeile">
                    <a id="picture_home" href="#pictrues">
                        <div class="homebutton_all">
                           <div class="homebutton_name">Picture</div>
                            <div class="homebutton_picture">
                             <img src="images/picture.png" alt="image" style="position: relative; width:100%;">
                            </div>
                        </div>
                    </a>        
                </div>
            </div>
        </div> 
```

但是 Scroller div 说，滚动没有高度。所以我可以用鼠标移动它，但如果我在包装器的同一页面上得到更多，它就不会正确显示。

有人可以帮我吗？

# php - 从元标记更改文本

> ID：13389771
> 
> 赞同：1
> 
> 时间：2012-11-15T00:27:19.087
> 
> 标签：php, simple-html-dom

需要大写元标记的内容，该站点有超过 75 个文件，我真的很想手动完成。尝试使用 simple_html_dom，但找不到方法....有什么提示吗？

这是标签的一个例子：

```
<meta name="description" content="Aproveche nuestras ofertas y sea el primero en alcanzar nuestro objetivo de promociones !!!!!" /> 
```

这就是我一直在尝试做的，但想不出如何解决它：

```
$scraptedText =  file_get_html('../index.html'); 
$change = split('<meta name="description"', $scraptedText);
$change = split(' />',  $change[1]);
$change = $change[0];
$change = strtoupper($change); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:37:54.537

使用 jQuery，您可以执行以下操作：

```
var meta = $('meta').attr('content');
$('meta').attr('content', meta.toUpperCase()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:44:00.323

对不起，对于那个反问题：

但是为什么要使描述大写呢？

一些（大）搜索引擎可以在“大喊大叫”的情况下暂停您的服务。（或者你有没有看到一个网站@google 这样做（大写的喊叫）？还是我误解了？

否则，辅助方法可以解决您的问题（我使用 Zend 框架并使用了他们的 View_Helper： http: [//framework.zend.com/manual/1.8/en/zend.view.helpers.html#zend.view.helpers](http://framework.zend.com/manual/1.8/en/zend.view.helpers.html#zend.view.helpers)

它是免费的，可以通过包含实现）

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:44:32.787

查看[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)：

```
function matchToUpper($matches) {
    return str_replace($matches[1], strtoupper($matches[1]), $matches[0]);
}
$scraptedText = preg_replace_callback('%<meta name="description" content="(.*?)" />%', 'matchToUpper', $scraptedText); 
```

# wpf - 如何在其他一切之上绘制 WPF 装饰器？

> ID：13389772
> 
> 赞同：2
> 
> 时间：2012-11-15T00:27:26.997
> 
> 标签：wpf, z-order, adorner, adornerdecorator

我在[DateTimePicker 控件](https://gist.github.com/1150228)中添加了一个 Adorner，但它没有显示在其他控件之上。为什么？我如何解决它？

![我的装饰品](../Images/47154e3b89f031c2e48e54c54c9c5e3c.png)

我的 XAML 目前是这样的：

```
<UserControl x:Class="IntelliMap.WPF.DateTimePicker"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:wpftc="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit"
             mc:Ignorable="d">
    ...
    <AdornerDecorator>
        <Grid>
            ...
            <TextBox x:Name="DateDisplay" 
                         HorizontalAlignment="Stretch" ...>
            </TextBox>
            ...
        </Grid>
    </AdornerDecorator>
</UserControl> 
```

装饰器本身是一个独立于 UserControl 的类，并添加到构造函数中：

```
public DateTimePicker()
{
    InitializeComponent();
    ...

    AdornerLayer adornerLayer = AdornerLayer.GetAdornerLayer(DateDisplay);
    if (adornerLayer != null)
    {
        adornerLayer.Add(_upDownBtns = new TextBoxUpDownAdorner(DateDisplay));
        _upDownBtns.Click += (textBox, direction) => { OnUpDown(direction); };
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:56:18.280

问题的出现显然是因为由`AdornerDecorator`控制的 Adorner 只能保证出现在 AdornerDecorator 内的控件之上。有必要将窗口的大部分内容包装在 AdornerDecorator 中，但是这样做之后，`AdornerLayer.GetAdornerLayer()`在某些情况下可能看不到 AdornerDecorator 并返回 null。

文档声称“GetAdornerLayer 从指定的 开始沿着可视树向上走`UIElement`，并返回它找到的第一个装饰层。” 实际上，`GetAdornerLayer`找不到`AdornerDecorator`位于 .NET 3.5 之外的位置`UserControl`，至少在 .NET 3.5 中找不到。我通过完全按照自己`GetAdornerLayer`声称的方式解决了这个问题：

```
static AdornerLayer GetAdornerLayer(FrameworkElement subject)
{
    AdornerLayer layer = null;
    do {
        if ((layer = AdornerLayer.GetAdornerLayer(subject)) != null)
            break;
    } while ((subject = subject.Parent as FrameworkElement) != null);
    return layer;
}
public DateTimePicker()
{
    InitializeComponent();
    ...
    this.Loaded += (s, e) =>
    {
        // not null anymore!
        AdornerLayer adLayer = GetAdornerLayer(DateDisplay);
    };
} 
```

最后，`GetAdornerLayer`必须从`Loaded`事件而不是构造函数中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:32:27.687

默认窗口样式中已经有一个装饰层，该装饰层位于窗口内容的上方。

因此，只需从 UserControl 中删除 AdornerLayer 即可。

# prolog - 如何通过引用一个接受两个参数的规则来创建一个接受一个参数的规则？（初学者）

> ID：13389774
> 
> 赞同：1
> 
> 时间：2012-11-15T00:27:31.040
> 
> 标签：prolog

我想创建以下规则：

```
rule2(X) :-
  is "true" if rule1(X,Y) is false. 
```

* * *

所以 rule2 将输出一个“true” for `X`，如果 rule1 输出一个“false” for`X`和*任何*值`Y`

* * *

我希望这是有道理的。我是初学者`prolog`。这很有趣，但我已经在这个问题上停留了几个小时！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:40:34.520

我建议使用逻辑不`\+/1`支持一种`!, fail`方法：

```
rule2(X):- \+ (rule1(X,_)). 
```

# eclipse - 无法通过eclipse读取JVM参数集

> ID：13389777
> 
> 赞同：0
> 
> 时间：2012-11-15T00:27:39.543
> 
> 标签：eclipse, jakarta-ee, tomcat, jvm

在 Eclipse 中，我设置了以下 JVM（系统）参数（Window -> Preferences -> Tomcat -> JVM Settings -> Append to JVM Parameters）：

```
file.read=c:\user\data.ini 
```

现在，当我尝试使用程序中的以下命令读取相同的参数时， `System.getProperty("data.ini");`它返回一个空值。

有人可以帮助弄清楚我做错了什么吗？

我正在使用 Tomcat 版本 6.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:51:52.120

尝试按以下格式设置参数：

```
-Dfile.read=c:\user\data.ini 
```

然后通过以下代码行获取参数：

```
String value = System.getProperty("file.read"); 
```

# jquery - 样式边框间距即使在元素删除后也会累积间距和边框

> ID：13389779
> 
> 赞同：-1
> 
> 时间：2012-11-15T00:27:42.913
> 
> 标签：jquery, html, css

谢谢阅读。

我有这个 html 片段

```
<div class="table">
    <!--1st row --->
    <div class="cell_short table_cell">1</div>
    <div class="cell_medium table_cell">Nickname</div>
    <div class="cell_short table_cell">-</div>
    <div class="clear"></div>
    <!--2nd row --->
    <div class="cell_short table_cell">2</div>
    <div class="cell_medium table_cell">Nickname</div>
    <div class="cell_short table_cell">-</div>
    <div class="clear"></div>
    <!--3rd row --->
    <div class="cell_short table_cell">3</div>
    <div class="cell_medium table_cell">Nickname</div>
    <div class="cell_short table_cell">-</div>
    <div class="clear"></div>
    <!--4th row --->
    <div class="cell_short table_cell">4</div>
    <div class="cell_medium table_cell">Nickname</div>
    <div class="cell_short table_cell">-</div>
    <div class="clear"></div>
    <!--5th row --->
    <div class="cell_short table_cell">5</div>
    <div class="cell_medium table_cell">Nickname</div>
    <div class="cell_short table_cell">-</div>
    <div class="clear"></div>
    <!--6th row --->
    <div class="cell_short table_cell">6</div>
    <div class="cell_medium table_cell">Nickname</div>
    <div class="cell_short table_cell">-</div>
    <div class="clear"></div>
    <!--7th row --->
    <div class="cell_short table_cell">7</div>
    <div class="cell_medium table_cell">Nickname</div>
    <div class="cell_short table_cell">-</div>
    <div class="clear"></div>
    <!--8th row --->
    <div class="cell_short table_cell">8</div>
    <div class="cell_medium table_cell">Nickname</div>
    <div class="cell_short table_cell">-</div>
    <div class="clear"></div>
</div>​ 
```

还有这种风格

```
.table {
border-spacing: 2px 1px;
background-color: black;
width: 316px;
}
.table_cell {
height: 30px;
line-height: 30px;
position: relative;
display: table-cell;
background-color: red;
}
.cell_short {
width: 80px;
text-align: center;
}
.cell_medium {
width: 150px;
text-align: center;
}​ 
```

[jsFiddle](http://jsfiddle.net/XhC9X/3/)

如您所见，我有一个有几行的表。一行的每个单元格都有边框间距：2px 1px。当我尝试使用 jquery 从 DOM 中删除一行时，会删除整行但保持边框间距：2px 1px。如果我删除几行边框间距：2px 1px 累积并留下大空间。我不知道这是否微不足道，但我找不到任何相关的东西。

谁能启发我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:54:28.713

如果不给我们 javascript 脚本，就很难猜出问题所在。

无论如何，您为什么不创建表格而不是创建 div 的色调？

如果您的目标是获得一张桌子，请使用一张桌子。调整你的 CSS 也会更容易！之后使用 javascript 更容易修改。

学习表格：[http ://www.quackit.com/html/html_table_tutorial.cfm](http://www.quackit.com/html/html_table_tutorial.cfm)

一旦你有了你的表，只需为每一行添加一个不同的 id ( `<tr id=row_numb>...</tr>`)，然后使用 javascript，你就可以删除想要的行。

结果，您的错误将消失（css 将始终跟随），并且您将拥有更清晰的代码。

# qt - 在 Windows 7 上安装 Qt 4.8.3 & QtWebkit 问题

> ID：13389785
> 
> 赞同：2
> 
> 时间：2012-11-15T00:28:20.750
> 
> 标签：qt, user-interface, qt4, qtwebkit, qt4.8

我刚刚将我的 Qt 更新到 4.8.3，因为从旧版本构建的程序与新框架不兼容。

所以我必须升级。

这个过程令人沮丧且耗时。这么多问题就出来了。

我从这个网址下载 Qt：http: [//qt-project.org/downloads](http://qt-project.org/downloads)

一开始，我安装了 MinGW （我不是 MSVC 的粉丝）。

我尝试了最新（我认为是 4.6）版本的 MinGW 和订购版本（4.4）。但是，在我安装 MinGW 并尝试安装 Qt 4.8.3 后，在此过程中，显示​​以下消息：

> ```
> There is a problem with your MinGW installation:
> The installer could not find a valid C:\MinGW\include\w32api.h (Only versions with W32API 3.13 are supported)
> 
> Do you still want to continue? (Your installation may not work) 
> ```

4.6版本确实有这个w32api.h文件，不知道怎么回事。而且我很难用这个头文件找到 MinGW 4.4。

我决定忽略这个警告并继续安装 Qt 和 Qt creator。之后，我打开我当前的项目，配置它（为什么配置变得如此复杂......），我尝试构建它。

然后出现以下消息，因为我使用的一些外部库需要异常处理：

> 禁用异常处理，使用 -fexceptions 启用

而且我不知道如何启用它。我尝试在 QMAKE_CXXFLAGS 中添加***-fexceptions***标志，但它不起作用。

顺便说一句，我也试过Qt的VC版本，但是我之前用的是MinGW，VC编译器有很大的不同，如果我使用VC版本，要让它被VC编译器编译需要很长时间。

有谁知道如何在 Windows 上安装 Qt 4.8.3？我的项目以前运行良好，现在只想编译成功.......

这些不是唯一的问题。我也在 Mac 机器上更新了 Qt，因为它是基于 unix 的，所以编译器更容易工作。

但是，我在我的项目中使用了 QtWebkit 库，显然，他们更改了这个库，并且它与订购版本不兼容。

我可以在 Mac 上编译我的项目，但是，每次我运行它时，都会出现以下按摩并且程序停止。

> dyld：找不到符号：_OBJC_CLASS_$_CALayerHost 引用自：/Library/Frameworks/QtWebKit.framework/Versions/4/QtWebKit 预期在：/System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
> 
> 程序意外结束。

有谁知道如何解决这个 QtWebKit 问题？我会很感激的。

记得Qt在nokia下的时候，安装和使用都是那么的简单，Qt SDK就是完美的。

我真的很讨厌被digia买后所做的改变............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:15:16.043

我找到了前两个问题的解决方案：

对于第一个问题，如我所述，下载诺基亚Qt提供的MinGW [ftp.qt.nokia.com/misc/MinGW-gcc440_1.zip [ftp.qt.nokia.com]](http://ftp.qt.nokia.com/misc/MinGW-gcc440_1.zip) 尝试了几个版本的MinGW 4.4，我觉得这个是唯一的作品。

关于第二个问题，在项目文件中添加如下配置：

> 配置 += 异常

现在 QWebKit 问题只是一个未解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:58:59.533

您的 MinGW 包含目录中是否包含两个“i”，或者在 SO 上发布时是否存在印刷错误？看：

```
The installer could not find a valid C:\MinGW\iinclude\w32api.h 
```

# spring - Spring MVC - @Autowired 不提供 Bean

> ID：13389791
> 
> 赞同：4
> 
> 时间：2012-11-15T00:29:14.263
> 
> 标签：spring, spring-mvc, annotations, datasource, autowired

我在使用 @Autowired 注释将 xml 文件中定义的数据源 bean 放入 Spring 中的类时遇到了一些麻烦。

有人知道这里发生了什么吗？似乎 *Impl 类中的 dataSource 没有被连接。

dao-context.xml

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:8889/spring" />
    <property name="username" value="user" />
    <property name="password" value="1234" />
</bean> 
```

PersonDaoImpl.java

```
public class PersonDaoImpl implements PersonDao {

@Autowired
private DataSource dataSource;  
private JdbcTemplate jdbcTemplate = new JdbcTemplate();

public DataSource getDataSource() {
    return dataSource;
}

public void setDataSource(DataSource dataSource) {
    System.out.println("SETTING DATA SOURCE");
    this.dataSource = dataSource;
}

public List<Person> getPersonList() {
    // TODO Auto-generated method stub
    return null;
}

public void savePerson(Person person) {
    // TODO Auto-generated method stub

}

public Person getPersonById(int id) {
    System.out.println("Getting Person: " + id);        
    return null;
}

@Override
public int getPersonCount(){
    String sql = "SELCECT COUNT(*) FROM PERSON";
    jdbcTemplate.setDataSource(getDataSource());
    int count = jdbcTemplate.queryForInt(sql);
    System.out.println("Count of Person: " + count);
    return count;
}

public JdbcTemplate getJdbcTemplate() {
    return jdbcTemplate;
}

public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
    this.jdbcTemplate = jdbcTemplate;
} 
```

}

...最后，例外。

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: No DataSource specified
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

java.lang.IllegalArgumentException: No DataSource specified
    org.springframework.util.Assert.notNull(Assert.java:112)
    org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:97)
    org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:382)
    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:456)
    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:464)
    org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:472)
    org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:477)
    org.springframework.jdbc.core.JdbcTemplate.queryForInt(JdbcTemplate.java:486)
    com.myPackage.rest.dao.impl.PersonDaoImpl.getPersonCount(PersonDaoImpl.java:50)
    com.myPackage.rest.HomeController.home(HomeController.java:36)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

任何帮助将不胜感激，干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T01:30:44.937

您的数据源需要在 JdbcTemplate 中设置（我没有看到您这样做）。此外，由于您将`@Autowired`注释放在字段上，我认为它不使用 setter，所以这就是您的 setDataSource 方法没有被调用的原因。由于您的异常表明您调用了 jdbcTemplate.execute 并且 dataSource 为空，因此这是有道理的。

如果你看这里：[http](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/jdbc.html) ://static.springsource.org/spring/docs/current/spring-framework-reference/html/jdbc.html有一个自动装配数据源的例子，但想法是：

```
public class  MyDao {

    private JdbcTemplate jdbcTemplate;

    @Autowired
    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:10:48.153

是的，多亏了这两个回复，我才得到了这个工作。

dao-context（如上，添加了这个）：

```
 <bean id="personDao" class="com.mypackage.rest.dao.impl.PersonDaoImpl">
        <property name="dataSource" ref="dataSource"/>
    </bean> 
```

实现类

```
@Repository
public class PersonDaoImpl implements PersonDao {

    private JdbcTemplate jdbcTemplate;

    @Autowired
    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    public int getPersonCount(){
        String sql = "select count(*) from person";
        return jdbcTemplate.queryForInt(sql);
    }

} 
```

我错过的另一个重要部分是控制器中的依赖注入 Impl 实例。

```
@Controller
public class HomeController {

    @Autowired
    private PersonDao personDao;

    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, Model model) {

        int personCount = personDao.getPersonCount();               
        model.addAttribute("personCount", personCount );

        return "home";
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:58:04.443

需要将 impl 类标记为由 spring 处理：

```
@Repository
public class PersonDaoImpl implements PersonDao { 
```

现在如果正在使用spring包扫描，它将找到这个类并处理所有@Autowired注解

# oracle - 锁定从父表中删除而不是错误

> ID：13389796
> 
> 赞同：3
> 
> 时间：2012-11-15T00:29:58.773
> 
> 标签：oracle

我有 Oracle Database 11g Enterprise Edition Release 11.2.0.1.0。我有父表 t1 和 t2 与引用 t1(col1) 的外键。我想知道为什么会有锁定？请检查我做了什么...

# 会议 1

```
SQL> create table t1(col1 char(1), primary key(col1));
Table created.

SQL> insert into t1 values('1');
1 row created.
SQL> insert into t1 values('2');
1 row created.
SQL> insert into t1 values('3');
1 row created.
SQL> insert into t1 values('4');
1 row created.
SQL> insert into t1 values('5');
1 row created.

SQL> commit;
Commit complete.

SQL> create table t2(col1 char(1), col2 char(2), foreign key(col1) references t1(col1));
Table created.

SQL> insert into t2 values('1','0');
1 row created.
SQL> commit;
Commit complete.

SQL> update t2 set col2='9';   --not committed yet!
1 row updated. 
```

# 会议 2

```
SQL> delete from t1;    -- Lock happens here!!! 
```

# 会议 1

```
SQL> commit;
Commit complete. 
```

# 会议 2

```
delete from t1          -- The error occurs after I commit updating query in session 1.
*
ERROR at line 1:
ORA-02292: integrity constraint (KMS_USER.SYS_C0013643) violated - child record found 
```

谁能解释我为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:08:21.080

`delete from t1;`尝试锁定子表 T2。如果会话正在等待整个表锁定，它甚至不能尝试删除任何内容。

发生这种异常锁定行为是因为您有一个[未编制索引的外键](http://docs.oracle.com/cd/E11882_01/server.112/e16508/datainte.htm#CNCPT1657)。

如果你创建一个索引，`create index t2_idx on t2(col1);`你会得到`ORA-02292`错误而不是锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:33:51.347

锁定来自您的线路：`insert into t2 values('1','0');`当您在会话 2 中从 t1 删除时，锁定不会发生。

想想看。在会话 1 中插入此行后，就会有从 t2.col1 到 t1.col1 的引用。此时外键已被验证，Oracle 知道 '1' 存在于 t1 中。如果会话 2 可以从 t1 中删除该行，那么会话 2 将在 t2 中有一个未提交的行，该行具有对 t1 的无效引用，这没有任何意义。

# scala - 在 Scala 中，是否可以对类型进行别名但不允许交叉使用像 Haskell 这样的别名/非别名类型？

> ID：13389800
> 
> 赞同：20
> 
> 时间：2012-11-15T00:30:19.557
> 
> 标签：scala, haskell, types

在 Haskell 中，我相信可以以编译器不允许别名类型和非别名类型之间的引用的方式对类型进行别名。根据[这个堆栈溢出问题](https://stackoverflow.com/questions/2649305/why-is-there-data-and-newtype-in-haskell)，可以`newtype`像这样使用Haskell：

```
newtype Feet = Feet Double
newtype Cm   = Cm   Double 
```

where`Feet`和`Cm`的行为类似于 Double 值，但尝试将一个`Feet`值与一个`Cm`值相乘会导致编译器错误。

编辑：Ben 在评论中指出，Haskell 中的上述定义是不够的。`Feet`并且`Cm`将是新类型，在这些类型上不会定义任何函数。做了更多的研究，我发现以下方法会起作用：

```
newtype Feet = Feet Double deriving (Num)
newtype Cm   = Cm   Double deriving (Num) 
```

这将创建一个从现有类型派生的新`Num`类型（需要使用 switch: `-XGeneralizedNewtypeDeriving`）。`Show`当然，这些新类型从其他类型（例如,等）派生出来会更有价值`Eq`，但这是正确评估 所需的最低要求`Cm 7 * Cm 9`。

Haskell 和 Scala 都有`type`，它只是为现有类型加上别名并允许无意义的代码，例如 Scala 中的这个示例：

```
type Feet = Double
type Cm = Double

val widthInFeet: Feet = 1.0
val widthInCm: Cm = 30.48

val nonsense = widthInFeet * widthInCm

def getWidthInFeet: Feet = widthInCm 
```

`newtype`假设它做了我认为它做的事情，Scala 是否有等价物？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T10:23:10.327

另一种选择是使用值类。这些创建了一个围绕底层类型的包装器，该包装器在编译时转换为对原始类型的直接访问，类上的方法被转换为关联对象的静态调用。例如：

```
class CM(val quant : Double) extends AnyVal {
  def +(b : CM) = new CM(quant + b.quant)
  def *(b : Int) = new CM(quant * b)
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-15T01:30:31.517

是的，您在 scala 中使用了称为 Unboxed Tagged Types 的东西。

这就是 Tagged 的​​定义方式：

```
type Tagged[U] = { type Tag = U }
type @@[T, U] = T with Tagged[U] 
```

这允许你做这样的事情

```
sealed trait Feet

def Feet[A](a: A): A @@ Feet = Tag[A, Feet](a)
Feet: [A](a: A)scalaz.@@[A,Feet]

scala> val mass = Feet(20.0)
mass: scalaz.@@[Double,Feet] = 20.0

scala> 2 * mass
res2: Double = 40.0 
```

还要添加 CM

```
sealed trait CM

def CM[A](a: A): A @@ CM = Tag[A, CM](a)
CM: [A](a: A)scalaz.@@[A,CM]

scala> val mass = CM(20.0)
mass: scalaz.@@[Double,CM] = 20.0 
```

如果您想将乘法限制为仅 Feet，那么您可以编写一个 typeclass 类型乘法函数

```
trait Multiply[T] { self =>
   def multiply(a: T, b: T): T
}
implicit val footInstance = new Multiply[Feet] {
   def multiply(a: Feet, b: Feet): Feet = Feet(a * b)
}
implicit val cmInstance = new Multiply[CM] {
  def multiply(a: CM, b: CM): CM = CM(a * b)
}

def multiply[T: Multiply](a: T, b: T): T = {
  val multi = implicitly[Multiply[T]]
  multi.multiply(a,b)
} 
```

然后你可以做

```
multiply(Feet(5), Feet(10)) // would return Feet(50) 
```

这是 Scala 能做到的最好的

要了解有关盒装类型的更多信息，请查看 [http://eed3si9n.com/learning-scalaz-day3](http://eed3si9n.com/learning-scalaz-day3)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-31T19:36:32.670

您可以`NewType`从 scala-newtype 库中使用！

**无耻插件：**我是scala-newtype的作者

[https://github.com/estatico/scala-newtype](https://github.com/estatico/scala-newtype)

这结合了 Scalaz 和 Shapeless 的想法，并直接引入了 Haskell 的想法（如 GeneralizedNewTypeDeriving）。

这是您的代码使用 newtype 时的样子。我们将给出两者`Feet`以及`Cm`它们自己的不同类型，并让它们`Numeric`基于 Double 的类型派生类型类（它`deriving`会自动执行）。

然后我们可以使用提供的扩展方法`Numeric.Implicits`——

```
object Example {

  type Feet = Feet.Type
  object Feet extends NewType.Default[Double] {
    implicit val num: Numeric[Type] = deriving
  }

  type Cm = Cm.Type
  object Cm extends NewType.Default[Double] {
    implicit val num: Numeric[Type] = deriving
  }

  val widthInFeet = Feet(1.0)
  val widthInCm = Cm(30.48)

  import Numeric.Implicits._

  // Does not compile:
  // val nonsense = widthInFeet + widthInCm

  // Compiles!
  val doubleWidthInFeet: Feet = widthInFeet + widthInFeet
} 
```

但是，您`*`在示例中使用，我们不希望`Feet * Feet = Feet`它真正应该是`Feet * Feet = Feet²`，所以让我们添加一个`FeetSq`类型来表示它，并定义我们自己的操作比`Numeric`-

```
object Example {

  type Feet = Feet.Type
  object Feet extends NewType.Default[Double] {
    implicit final class Ops(val self: Feet) extends AnyVal {
      def +(other: Feet) = Feet(self.repr + other.repr)
      def -(other: Feet) = Feet(self.repr - other.repr)
      def *(other: Feet) = FeetSq(self.repr * other.repr)
    }
  }

  type FeetSq = FeetSq.Type
  object FeetSq extends NewType.Default[Double]

  type Cm = Cm.Type
  object Cm extends NewType.Default[Double]

  val widthInFeet = Feet(1.0)
  val widthInCm = Cm(30.48)

  // Does not compile:
  // val nonsense = widthInFeet * widthInCm

  // Compiles!
  val squareFeet: FeetSq = widthInFeet * widthInFeet
} 
```

在这里，我们使用 an`implicit final class Ops`来定义我们的新类型的方法。这个类在编译时被淘汰，所以在运行时我们只是从`Ops`对象中调用扩展方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-17T15:26:18.070

为了

```
val widthInCm: Cm = 30.48

def getWidthInFeet: Feet = widthInCm 
```

，简单地定义`Feet`和`Cm`像这样：

```
type Feet <: Double
type Cm <: Double 
```

只要您不将它们向上转换为`Double`. 自己看：

```
def getWidthInFeet: Feet = widthInCm

Error:(1, 28) type mismatch;
 found   : widthInCm.type (with underlying type Cm)
 required: Feet
    def getWidthInFeet: Feet = widthInCm 
```

一个副作用是您需要将`Double`值向下转换为`Cm`或`Feet`显式以获取实例：

```
val widthInCm: Cm = 30.48.asInstanceOf[Cm] 
```

此外，您不能`Double`在不丢失类型信息的情况下对它们进行任何操作（因此您必须一直向下转换它们）。

# ms-office - Microsoft Outlook 2010 - 用于指示电子邮件是发送给我还是抄送给我的自定义字段

> ID：13389805
> 
> 赞同：0
> 
> 时间：2012-11-15T00:30:47.670
> 
> 标签：ms-office, outlook-2010

有谁知道如何在 Microsoft Outlook 2010 中创建自定义字段（列）。我收到很多电子邮件，想在我的收件箱文件夹中定义一个新列，我可以在其中以某种方式对电子邮件进行分类并显示是/否标志指明我的电子邮件地址是在 TO：列表还是 CC：列表中。这将针对收件箱视图中的每封电子邮件显示。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:40:58.357

您可以使用[表单区域](http://msdn.microsoft.com/en-us/library/bb157865.aspx)来更改 UI

或者像[这个项目一样通过 PInvoke 注入你的控件](http://www.codeproject.com/Articles/27262/Additional-custom-panel-in-Microsoft-Outlook)

# google-chrome - iphone上的脉动文本

> ID：13389807
> 
> 赞同：2
> 
> 时间：2012-11-15T00:30:53.940
> 
> 标签：google-chrome, mobile, safari

我正在通过 iphone（Safari 和 Chrome）浏览我的新网站，并且我一直看到**脉动的文本**！我尝试了不同的 iphone，但我仍然看到文字奇怪地跳动。

1.  我删除了所有的 javascript 文件，同样的事情。
2.  我做了一些CSS调整，什么都没有。

以前有人遇到过这种情况吗，因为我没有发现任何类似的问题。

[http://uniteworks.com/demo.html](http://uniteworks.com/demo.html)

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:07:54.243

我有一个类似的问题。原来原因是我们链接上的 css 转换属性：

```
-o-transition:.3s;
-ms-transition:.3s;
-moz-transition:3s;
-webkit-transition:.3s;
transition:.3s; 
```

似乎 iPhone 以一种奇怪的方式处理悬停事件，导致了这种奇怪的脉动。我们关闭了移动设备上的过渡，它解决了问题。

# excel - Excel总结

> ID：13389810
> 
> 赞同：0
> 
> 时间：2012-11-15T00:31:13.767
> 
> 标签：excel, excel-formula

我有这个，例如：

```
ColA   ColB  
X      1
Y      2
Z      3
X      4 
```

我希望能够总结 B 列中的所有值

*   列 A=X 或
*   A列=Y。

结果应该是 7 (1+2+4)。

我这样做了：

`SUM(IF(COUNTIF(A:A,"X"),VLOOOKUP("X",A:B,2,),"0"), IF(COUNTIF(A:A,"Y"),VLOOOKUP("Y",A:B,2,),"0"))`

出于某种原因，它返回 3。由于某种原因，它没有添加 X 的第二个值。

任何想法为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T05:38:42.930

您的公式返回错误（o 太多！）但带有`VLOOKUP`s `3`。由于问题不在于`Y`，因此通过取出公式的那部分来简化问题：

```
=IF(COUNTIF(A:A,"X"),VLOOKUP("X",A:B,2,),"0") 
```

这导致`1`. 但也是如此：

```
=VLOOKUP("X",A:B,2,) 
```

因此`COUNTIF(A:A,"X")`（`2`因为有两个实例而返回`X`）实际上并没有帮助。替换为`7`, or `103`or `5=5`- 没有区别。

您显然知道，普通的 VLOOKUP 一旦找到符合其“规则”的第一个实例，就会停止“搜索”，但不幸的`2`是，在找到第一个匹配项后，插入带有 COUNTIF 的“VLOOKUP”不足以“告诉”VLOOKUP，现在去寻找第二个也是”。

因此，您所表达的问题的答案是“是的。VLOOKUP 无法通过 =COUNTIF 函数识别多个实例。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:10:20.563

```
=SUMPRODUCT(((A2:A5="X")+(A2:A5="Y"))*(B2:B5)) 
```

如果您选择公式的一部分并按 Ctrl+=，您可以看到它是如何计算的。

```
=SUMPRODUCT((({TRUE;FALSE;FALSE;TRUE})+({FALSE;TRUE;FALSE;FALSE}))*(B2:B5)) 
```

现在，当这两个数组相加时，TRUE 被强制为 1，FALSE 被强制为零。

```
=SUMPRODUCT(({1;1;0;1})*(B2:B5)) 
```

得到的 1 和 0 数组乘以来自 B2:B5 的数组。

```
=SUMPRODUCT({1;2;0;4}) 
```

并总结为7。

# c - const char **name VS char *name[]

> ID：13389814
> 
> 赞同：2
> 
> 时间：2012-11-15T00:31:39.437
> 
> 标签：c, arrays, pointers, char

我知道这个话题已经讨论过好几次了，我想我基本上知道数组和指针之间的区别，但我对数组如何准确地存储在 mem 中很感兴趣。

例如：

```
const char **name = {{'a',0},{'b',0},{'c',0},0};
printf("Char: %c\n", name[0][0]); // This does not work 
```

但如果它像这样声明：

```
const char *name[] = {"a","b","c"};
printf("Char: %c\n", name[0][0]); // Works well 
```

一切正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T01:09:29.700

当您定义一个变量时

```
char const*  str = "abc";
char const** name = &str; 
```

它看起来像这样：

```
+---+     +---+    +---+---+---+---+
| *-+---->| *-+--->| a | b | c | 0 |
+---+     +---+    +---+---+---+---+ 
```

当您使用表单定义变量时

```
char const* name[] = { "a", "b", "c" }; 
```

你有一个指针数组。这看起来像这样：

```
 +---+     +---+---+
          | *-+---->| a | 0 |
          +---+     +---+---+
          | *-+---->| b | 0 |
          +---+     +---+---+
          | *-+---->| c | 0 |
          +---+     +---+---+ 
```

可能令人困惑的是，当你将这个数组传递到某个地方时，它*会衰减*为一个指针，你会得到：

```
+---+     +---+     +---+---+
| *-+---->| *-+---->| a | 0 |
+---+     +---+     +---+---+
          | *-+---->| b | 0 |
          +---+     +---+---+
          | *-+---->| c | 0 |
          +---+     +---+---+ 
```

也就是说，你得到一个指向数组第一个元素的指针。递增这个指针移动到数组的下一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T00:42:16.180

字符串**文字**隐式转换为`char const*`.

花括号初始化程序没有。

与您的示例无关，但值得知道：直到并包括 C++03，为了与旧 C 兼容，字符串文字也可以隐式转换为`char*`(no `const`)，但在 C++11 中，这种不安全的转换终于被删除了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T00:53:41.770

您的第一个示例声明了一个指向 char 指针的指针。第二个声明了一个指向 char 的指针数组。不同之处在于第一个间接层多了一层。没有图纸有点难以描述。

以假组装风格，

```
 char **name = {{'a',0},{'b',0},{'c',0},0}; 
```

将转化为：

```
t1:  .byte 'a', 0
  .align somewhere; possibly somewhere convenient
t2:  .byte 'b', 0
  .align
t3:  .byte 'c', 0
  .align
t4:  .dword t1, t2, t3, 0
name:  .dword t4 
```

而第二个，

```
 char *name[] = {"a","b","c"}; 
```

可能会为 t1、t2 和 t3 生成相同的代码，但随后会执行

```
name:  .dword t1, t2, t3 
```

那有意义吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T01:08:00.020

数组作为连续的对象序列存储在内存中，其中该对象的类型是数组的基本类型。因此，对于您的数组：

```
const char *name[] = {"a","b","c"}; 
```

数组的基本类型是，数组`const char *`的大小是 3（因为你的初始化程序有三个元素）。它在内存中看起来像这样：

```
| const char * | const char * | const char * | 
```

请注意，数组的元素是指针——实际的字符串并不存储在数组中。这些字符串中的每一个都是一个字符串文字，它是一个`char`. 在这种情况下，它们都是两个`char`s 的数组，所以在内存的其他地方你有三个未命名的数组：

```
| 'a' |  0  |
| 'b' |  0  |
| 'c' |  0  | 
```

初始化器将`name`数组的三个元素设置为指向这三个未命名数组的初始元素。 `name[0]`指向`'a'`,`name[1]`指向`'b'`和`name[2]`指向`'c'`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T01:09:33.203

您必须查看声明变量时会发生什么，以及存储变量数据的内存在哪里。

首先，简单地写是什么意思：

```
char x = 42; 
```

您获得了足够的字节来在堆栈上保存一个字符，并且这些字节被设置为值 42。

其次，当你声明一个数组时会发生什么：

```
char x[] = "hello"; 
```

您在堆栈上获得 6 个字节，它们被设置为字符 h、e、l、l、o 和值零。

现在如果你声明一个字符指针会发生什么：

```
const char* x = "hello"; 
```

“你好”的字节存储在静态内存中的某个位置，您可以获得足够的字节来保存堆栈上的指针，并且它的值设置为保存字符串值的静态内存的第一个字节的地址。

那么现在当你在第二个例子中声明它时会发生什么？您将获得三个单独的字符串存储在静态内存中，“a”、“b”和“c”。然后在堆栈上，您会得到一个由三个指针组成的数组，每个指针都设置为这三个字符串的内存位置。

那么你的第一个例子是什么？看起来你想要一个指向指针数组的指针，但问题是这个指针数组会去哪里？这就像我上面的指针示例，应该在静态内存中分配一些东西。然而，碰巧你不能像这样使用大括号初始化在静态内存中声明一个二维数组。因此，您可以通过将数组声明为函数外部的变量来做您想做的事情：

```
const char* name_pointers[] = {"a", "b", "c"}; 
```

然后在函数内部：

```
const char** name = name_pointers; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T00:46:09.297

The reason the first snippet does not work is that the compiler re-interprets the sequence of characters as the value of a pointer, and then ignores the rest of the initializers. In order for the snippet to work, you need to tell the compiler that you are declaring an array, and that the elements of that array are arrays themselves, like this:

```
const char *name[] = {(char[]){'a',0},(char[]){'b',0},(char[]){'c',0},0}; 
```

With this modification in place, your program works and produces the desired output ([link to ideone](http://ideone.com/CnQi5D)).

# python - ctypes 将指针传递给结构中的字段

> ID：13389816
> 
> 赞同：4
> 
> 时间：2012-11-15T00:31:49.060
> 
> 标签：python, pointers, struct, ctypes

我需要在 Python 中构造以下数据类型以传递给 C 函数：

```
struct {
  unsigned a,b,c;
  char data[8];
}; 
```

但是，我实际上需要将指向数据字段的指针传递给函数，而不是指向结构的指针，而且我不知道该怎么做。

这是我到目前为止所拥有的：

```
from ctypes import *                                                           
class MyStruct(Structure):                                              
  _fields_ = [("a",c_uint), ("b",c_uint), ("c",c_uint), ("data",c_char*8)]
mystruct = MyStruct(0,1,8,"ABCDEFGH")
external_c_function(mystruct.data) 
```

现在在 CI 中有这个功能：

```
int external_c_function(char *data) {
  int a = ((unsigned *)data)[-1];
  int b = ((unsigned *)data)[-2];
  int c = ((unsigned *)data)[-3];
  ...
} 
```

问题是，当函数被调用时，“数据”正确指向“ABCDEFGH”，但是当我尝试获取它之前的其余结构数据时，它是垃圾。我究竟做错了什么？mystruct 不是像真正的 C 结构一样按顺序保存在内存中吗？我怀疑数组发生了一些有趣的事情：我真的在做这样愚蠢的事情吗？

```
struct {
  unsigned a,b,c;
  char *data; // -> char[8]
}; 
```

如果是这样，我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T04:36:28.090

您可以使用元素的偏移量通过引用传递指向结构元素的指针：

```
external_c_function(byref(mystruct,MyStruct.data.offset)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T04:23:59.010

似乎当您引用 时`mystruct.data`，会制作数据的副本。我这样说是因为 python 命令`type(mystruct.data)`返回`str`，而不是 C 类型。

我认为您无法修改`external_c_function`以接受结构开头的指针，因为这将是最明显的解决方案。因此，您需要以某种方式在 python 中进行 C 风格的指针算术 - 即获取`mystruct`（可能使用`ctypes.pointer`）的地址，然后找出一种方法以适当的字节数增加该指针。

我不知道如何在 python 中进行这种指针运算，或者是否可以以任何稳健的方式进行。但是，您总是可以`external_c_function`使用另一个 C 函数来执行必要的指针运算。

**编辑**

马克的回答巧妙地解决了这个问题。我关于错误发生原因的评论仍然是正确的。

# mysql - mysql 在大表上慢选择 order by

> ID：13389817
> 
> 赞同：3
> 
> 时间：2012-11-15T00:31:54.880
> 
> 标签：mysql, performance, select, sql-order-by

我有一个存储在 mysql 中的大表（基本上是一个日志），如下所示：

```
 CREATE TABLE `log` (
    `ID_1` int(10) unsigned NOT NULL,
    `ID_2` int(10) unsigned NOT NULL,
    `DELTA` tinyint(3) unsigned NOT NULL,
    `ACTIVE` tinyint(1) NOT NULL,
    `DATA` bigint(20) unsigned NOT NULL,
  ) ENGINE=MyISAM DEFAULT CHARSET=utf8$$ 
```

没有索引。数据是在随机时刻插入随机数据的，并且工作正常。然后，表脱机（没有读/写操作）。此时的表大小约为 180M 记录。我在 ID_1、ID_2、DELTA、ACTIVE 字段（全部 4 个，升序）上添加索引。它的工作速度相当快（3-4 分钟）。

现在，我正在尝试按 ID_1、ID_2、DELTA、ACTIVE（与索引相同的字段和相同的顺序）按升序从表中获取所有数据，但选择在“排序结果”中保留了很长时间（在 SHOW PROCESSLIST) 直到返回第一行。我试图提示/强制 SELECT 语句使用索引（即 FORCE INDEX / USE INDEX），但没有任何区别。关于如何提高此类查询的响应速度的任何提示：

```
SELECT `ID_1`, `ID_2`, `DELTA`, `ACTIVE` FROM `log` ORDER BY `ID_1`, `ID_2`, `DELTA`, `ACTIVE` ASC; 
```

?

在这里提出了一个类似的问题：[Slow ORDER BY in large table](https://stackoverflow.com/questions/3228603/slow-order-by-in-large-table) - 但没有答案。认为发布一个喜欢它是个好主意，也许现在有人知道答案了。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T01:32:24.640

为了有效地对数据进行排序，您必须使用要在`ORDER BY`子句中使用的所有列添加复合索引。索引中列的顺序必须与`ORDER BY`子句中的列顺序相同。

在您的情况下，它将是：

```
ALTER TABLE `log` ADD INDEX mySortIndex(`ID_1`, `ID_2`, `DELTA`, `ACTIVE`); 
```

要检查 MySQL 如何执行您的查询，请使用：

```
EXPLAIN SELECT `ID_1`, `ID_2`, `DELTA`, `ACTIVE` FROM `log` ORDER BY `ID_1`, `ID_2`, `DELTA`, `ACTIVE` ASC; 
```

输出将告诉您使用了哪些索引。

如果您只需要已知数量的结果行，您可以使用`LIMIT`来阻止 MySQL 对整个表进行排序：

```
SELECT `ID_1`, `ID_2`, `DELTA`, `ACTIVE`
FROM `log` ORDER BY `ID_1`, `ID_2`, `DELTA`, `ACTIVE` ASC
LIMIT 100; 
```

# c# - 我可以从我的 ASP .NET MVC 视图中删除 WebForms 脚本标记吗？

> ID：13389818
> 
> 赞同：0
> 
> 时间：2012-11-15T00:32:00.500
> 
> 标签：c#, asp.net-mvc-3

```
<div class="firstColumn">
<% for (int rowCount = 0; rowCount < Model.TaskAttributes.Count; rowCount += 2)
   {%>
       <%= Html.EditorFor(model => model.TaskAttributes[rowCount]) %>
 <%}
%>
</div> 
```

所以，我有这段代码可以正常工作，但我对所有 MVC 标记不满意。

该解决方案尚不支持 Razor 语法，所以我坚持使用这种语法，但我想知道它是否可以完全清除。

我在想应该起作用的是：

```
<div class="firstColumn">
<% for (int rowCount = 0; rowCount < Model.TaskAttributes.Count; rowCount += 2)
   {
       Html.EditorFor(model => model.TaskAttributes[rowCount]);
   }
%>
</div> 
```

但是，这不会在我的页面上呈现任何 EditorFor。看来 editorFor 之前的 '<%=' 很关键。有什么方法可以表达这一点而不必关闭和打开标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:57:29.780

这真的和它会得到的一样好。你需要有：

```
<%= Html.EditorFor(model => model.TaskAttributes[rowCount]) %> 
```

...以便将输出发送到响应流。即使使用 MVC3 语法，您也必须编写：

```
@for (int rowCount = 0; rowCount < Model.TaskAttributes.Count; rowCount += 2) {
    @Html.EditorFor(model => model.TaskAttributes[rowCount])
} 
```

而不仅仅是：

```
@for (int rowCount = 0; rowCount < Model.TaskAttributes.Count; rowCount += 2) {
    Html.EditorFor(model => model.TaskAttributes[rowCount])
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:51:44.600

```
<div class="firstColumn">
    @for (int rowCount = 0; rowCount < Model.TaskAttributes.Count; rowCount += 2)
    {
        @Html.EditorFor(model => model.TaskAttributes[rowCount])
    }
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:41:39.413

<%= 是 Response.Write() 的快捷方式。你试过吗？

# html - 特定表格行的 CSS

> ID：13389820
> 
> 赞同：2
> 
> 时间：2012-11-15T00:32:03.360
> 
> 标签：html, css

我有一个有几行的简单表。最上面的行包含标题，而它下面的行具有数据的 id 属性。我一直在尝试为只有 id 属性数据的表行设置 CSS，但到目前为止只能为整个表设置它。

```
<table width = "80%" align="center" id="example">
<tr>
<td><h3>ID</h3></td>
<td><h3>First Name</h3></td>
<td><h3>Last Name</h3></td>
</tr>
<tr id="data">
<td>1</td>
<td>Joe</td>
<td>Schmoe## Heading ##</h3><td>
</tr>
</table> 
```

和CSS。我尝试将 #example tr 更改为 tr #data ，但没有成功。我知道我忽略了一些简单的东西，但我不确定是什么。

```
table#example {
    border-collapse: collapse;   
}
tr #data{
    background-color: #eee;
    border-top: 1px solid #fff;
}
tr #data:hover {
    background-color: #ccc;
}
tr #data {
    background-color: #fff;
}
tr #data th, tr #data td {
    padding: 3px 5px;
}
tr #data td:hover {
    cursor: pointer;
} 
```

我没有使用类，因为我对 CSS 不够熟悉，并且只能使用一次 id 并不是我需要的限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T00:39:46.170

您可以使用类，但更好的是，根本不要使用类（HTML 标记是您的朋友）！这是您问题的干净解决方案：

### HTML

```
<table>
    <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Last Name</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Joe</td>
        <td>Schmoe</td>
    </tr>
</table> 
```

### CSS

```
th {
  font-weight: bold;
  /* More styles here */
}

td {
  background: #EEE;
  border-top: 1px solid #FFF;
}

tr:hover td {
  cursor: pointer;
  background: #CCC;
}

/* Styles upon styles */ 
```

Simply use the [`th` element](https://developer.mozilla.org/en-US/docs/HTML/HTML_Elements/th) to specify the *table header*. To get each table data row to highlight as you mouse over it, simply use the `tr:hover td` rule to catch that case. See [this fiddle](http://jsfiddle.net/vNPEj/) for a working example.

# sql - 执行存储过程并更新表

> ID：13389826
> 
> 赞同：1
> 
> 时间：2012-11-15T00:32:47.033
> 
> 标签：sql, sql-server-2008, stored-procedures

我有需要使用存储过程的结果更新表的要求。

例子：

```
Declare @result1 decimal
Declare @price deciaml

Create Table #OrderDetails
{ 
    @orderID bigint
    ,@orderName nvarchar(9)
    ,@orderPrice decimal
    ,@orderFlag nchar(1)
}

Insert into #OrderDetails
{ 
    @orderID 
    ,@orderName 
    ,@orderPrice
    ,@orderFlag
} Select * from CartDetails

Update #OrderDetails
set @orderFlag = 1
from #OrderDetails
where orderID = 1

--Now update each row of #OrderDetails by calling a stored procedure
Update #OrderDetails
set @orderPrice= @result1
from (exec store_proc_calc_price orderID, orderName, @price = @result1 Output) 
```

有没有办法为每一行执行存储过程`#OrderDetails`并更新`@orderPrice`存储过程的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:35:23.177

是的，你可以这么做。您需要创建一个游标来循环遍历表的所有行并为每一行调用存储过程。查看帮助中的光标示例，它非常简单......

# facebook - 如何检测 API 是否关闭？

> ID：13389841
> 
> 赞同：0
> 
> 时间：2012-11-15T00:34:55.373
> 
> 标签：facebook, button, error-handling, facebook-like

当我输入这个 fb:like 按钮时，Facebook API 健康页面正在报告错误 [https://developers.facebook.com/live_status](https://developers.facebook.com/live_status)

我相信它很快就会回来，但我怎么能检测到呢？原因是；我希望隐藏页面上的其他元素，因为当您有 Facebook 功能时它看起来很奇怪，然后按钮丢失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:37:23.730

从该站点获取 JSON 响应：[https ://www.facebook.com/feeds/api_status.php](https://www.facebook.com/feeds/api_status.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T01:13:02.147

**对于 NodeJS：**

可以使用Node自带的https模块：[https ://nodejs.org/api/https.html#https_https_request_options_callback](https://nodejs.org/api/https.html#https_https_request_options_callback)

我在我的 Node.js 服务器上为此苦苦挣扎，但找到了解决方案。我试图做一个没有运气的 http 请求（一直得到一个不受支持的浏览器问题），但是当我尝试用 cURL 做它时，它工作得很好。

因此，我决定在我的 NodeJS 请求的标头中传递一个 User-Agent，因为我遇到了不受支持的浏览器问题：

```
var https = require("https");

var options = {
      hostname: 'www.facebook.com',
      port: 443,
      path: '/feeds/api_status.php',
      method: 'GET',
      headers: {
        "User-Agent": 'curl/7.43.0'
      }
};

var req = https.request(options, function(res) {
      res.on('data', function(d) {
        process.stdout.write(d);
      });
});

req.end();

req.on('error', function(e) {
    console.error(e);
}); 
```

api_status 然后在您的控制台中打印出来，如下所示：

```
{
   "current": {
      "health": 1,
      "subject": "Facebook Platform is Healthy"
    },
    "push": {
       "status": "Complete",
       "updated": "2016-01-27T16:05:12-08:00",
       "id": 61183893
    }
} 
```

你可以用它做你需要的。例如，如果您想使用它来查看 Facebook API 是否健康，您可以执行以下操作：

```
var facebookIsHealthy;

var req = https.request(options, function(res) {
   res.on('data', function(d) {
      // d is a buffer object

      var bufferString = d.toString();
      var bufferObject = JSON.parse(bufferString);

      if(bufferObject.current.health === 1) {
          facebookIsHealthy = true;
      }

      else {
          facebookIsHealthy = false;
      }
   });
}); 
```

希望这可以帮助！

# c++ - 使用来自 linux 终端的外部库编译 c++ 文件

> ID：13389842
> 
> 赞同：1
> 
> 时间：2012-11-15T00:34:59.603
> 
> 标签：c++, linux, compilation, terminal

我有以下文件：

```
ex1.cpp    ex1.h
GLee.cpp   GLee.h 
```

我想让它在以下路径上使用库（openmesh 库）：

> 主页/xyz/Downloads/OpenMesh-2.3/src/OpenMesh/

我试图用这个来执行它：

```
g++ -Wall -o ex1 ex1.cpp GLee.cpp -L/..path../ 
```

但没有运气，输出是：

在 ex1.cpp:17:0 中包含的文件中：ex1.h:28:38：致命错误：OpenMesh/Core/IO/MeshIO.hh：没有此类文件或目录编译终止。

这样做的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:39:26.050

你需要放在`-I path`命令行上。所以从错误来看，看起来你会这样做：

```
g++ -Wall -o ex1 ex1.cpp GLee.cpp -I /home/xyz/Downloads/OpenMesh-2.3/src 
```

# json - JSON解析的困惑

> ID：13389851
> 
> 赞同：0
> 
> 时间：2012-11-15T00:36:16.323
> 
> 标签：json, haskell, yesod

我正在研究我的 json 服务器的 I/O 方面，并且有一种方法我无法正确处理。首先，我将给出错误，然后是涉及的代码和数据类型，以及之后对问题的一些评论。

`("X-Response-Body-Start","<!DOCTYPE html>\n<html><head><title>Invalid Arguments</title></head><body><h1>Invalid Arguments</h1><ul><li>when expecting a unit constructor (U1), encountered String instead</li></ul></body></html>")`

期待单位承包商？

好的，这是一些相关的代码。让我们看看我们能不能看出我哪里出错了 `from Datatypes.hs`

```
data JobID = JobID Project Int deriving Generic

data Project = BNAP deriving (Show,Generic) -- one day to be an ADT

instance ToJSON Project where
   toJSON = toJSON . show

instance FromJSON Project

instance FromJSON JobID
instance ToJSON JobID 
```

测试代码

```
testReadR :: IO Value
testReadR = do
   req <- parseUrl readURI
   manager <- newManager def
   pBody <- runResourceT $ do
               reqBody <- readObject
               liftIO $ print reqBody
               Response _ _ _ body <- http (buildReq req reqBody) manager
               pBody <- body $$+- sinkParser json
               return pBody  -- (return wraps it up)
   closeManager manager
   return pBody

buildReq :: forall a (m :: * -> *) (t :: * -> *).
            ToJSON a =>
            Request t -> a -> Request m
buildReq req reqBody =
   let reqBodyBS = Data.Aeson.encode reqBody
       rHeaders = [(hContentType,pack "application/json")]
   in  req {method = fromString "POST"
           , requestBody = RequestBodyLBS reqBodyBS
           ,requestHeaders=rHeaders
           }
readObject :: ResourceT IO Value
readObject = do -- I took a bunch out because I thought simplifiying would help me
                -- solve this
   return $ Data.Aeson.toJSON $ JobID BNAP 306 
```

处理程序

```
postReadR :: Handler RepJson
postReadR = do
   conf <- parseJsonBody_ :: Handler JobID        
   liftIO $ print conf
   testJ <- jsonToRepJson $ toJSON $ JobID BNAP 305
   jValue <- jsonToRepJson conf -- to be replaced with 
                                -- Either ErrorReport Response
                                -- (or something like that)
   return jValue 
```

当我将线路更改为 `conf <- parseJsonBody_ :: Handler Value`

`print conf`产量 `Array (fromList [String "BNAP",Number 306])`

所以看来问题出在字符串“BNAP”上，但我不知道为什么。关于如何解决这个问题的任何想法？有没有我没有看到的明显答案？

更新：我有一个新错误。我确定我破坏了这个`FromJSON`实例。

```
test: ResponseTimeout

instance FromJSON Project where
   parseJSON (String p) = parseJSON $ toJSON p
   parseJSON _ = mzero 
```

这里的挑战是它`Project`是一元类型。我研究的例子似乎都没有解决这个问题。但是我知道 p 是 a `Text`，并且`toJSON`可以从中`Value`得出a ，并且可以得出`parseJSON`a 。所以一切都好吗？好吧，我仍然收到上述错误，这根本没有信息。有任何想法吗？`Parser``Value`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:44:54.517

```
instance ToJSON Project where
   toJSON = toJSON . show

instance FromJSON Project 
```

这些实例不能一起工作。泛型`FromJSON`实例需要泛型单元构造函数`U1`，但该`ToJSON`实例生成一个`String "BNAP"`.

如果你有一个手写的`ToJSON`实例，你还需要一个手写的`FromJSON`实例。

* * *

```
instance FromJSON Project where
   parseJSON (String p) = parseJSON $ toJSON p
   parseJSON _ = mzero 
```

`p`是 a `Text`，我们有

```
instance ToJSON Text where
    toJSON = String 
```

所以上面的 for`Project`循环实例，因为它扩展了`parseJSON (String p) = parseJSON (String p)`.

对于现在的类型，

```
instance FromJSON Project where
    parseJSON (String "BNAP") = return BNAP
    parseJSON _               = mzero 
```

如果您启用了应该可以工作`OverloadedStrings`，如果没有，

```
instance FromJSON Project where
    parseJSON (String p)
        | p == pack "BNAP" = return BNAP
    parseJSON _            = mzero 
```

# actionscript-3 - 我可以将 FlexMobile 项目制作成纯 as3 吗？

> ID：13389854
> 
> 赞同：2
> 
> 时间：2012-11-15T00:36:42.950
> 
> 标签：actionscript-3, apache-flex, mobile

我有一个想要作为移动项目运行的 as3-robotlegs（信号）应用程序。我发现我不能有一个纯 as3 入门类，即。

这适用于 Flash 专业或纯 as3 项目

```
 public class TestX extends Sprite
{
    protected var context:ApplicationContext;
    use namespace mx_internal;

    public function TestX()
    {
        LoaderConfig.mx_internal::_url = loaderInfo.url;
        LoaderConfig.mx_internal::_parameters = loaderInfo.parameters;
        context = new ApplicationContext(this);     <---
        this.stage.nativeWindow.visible = true;
    }
} 
```

现在对于 FlexMobile，我需要在 index.mxml 中执行类似的操作

```
 <fx:Declarations>
        <context:SignalCafeContext contextView="{this}"/>   <----
    </fx:Declarations> 
```

但是我真的需要将我所有的 Flash 组件都转换为 Flex UIComponent 还是有办法在 FlexMobile 项目中使用纯 as3（无 mxml）？

谢谢

**编辑**：

我花了几天时间来整理这些很棒的答案……据我所知，它们都是正确的，我发现艾米发布任意 swfs 效果很好，我发现使用纯 actionscript 移动项目更容易

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:44:30.827

命令行 Adob​​e AIR 开发人员工具 (ADT) 可以为移动设备打包 SWF。

这样，从各种工具链创建的任何单一 SWF 都可以打包用于移动设备。

*   下载[AIR 3.5 SDK](http://www.adobe.com/devnet/air/air-sdk-download.html)。
*   确保 JRE，或使用来自 Flash Builder 的 JRE。
*   执行 adt 将 SWF 打包到 IPA：

    ```
    adt -package -target [ipa-test | ipa-debug | ipa-app-store | ipa-ad-hoc]
        -keystore iosPrivateKey.p12 -storetype pkcs12 -storepass qwerty12
        -provisioning-profile ios.mobileprovision
        HelloWorld.ipa
        HelloWorld-app.xml
        HelloWorld.swf icons Default.png 
    ```

否则，Flash Builder 4.6 具有纯 ActionScript 移动项目：

*   选择*文件*»*新建 ActionScript 移动项目*

    ![新的动作脚本移动项目](../Images/e7861b8bd1e8a04a083222c866049c00.png)

*   尽管 AIR 引用了 Flex SDK，但该项目将是纯 ActionScript。

    ![项目地点](../Images/52a72e36ce5ecbab36387f97cadb8913.png)

*   选择移动设置。

    ![移动设置](../Images/24f2cc51d25a5d86cf7235cfa6b896b0.png)

*   确保所有引用都合并到代码中。

    ![内置设置](../Images/e769740f789142da95c1e6953ce0aeca.png)

*   哪个会将您的项目存根为：

    ```
    package
    {
        import flash.display.Sprite;
        import flash.display.StageAlign;
        import flash.display.StageScaleMode;

        public class X extends Sprite
        {
            public function X()
            {
                super();

                // support autoOrients
                stage.align = StageAlign.TOP_LEFT;
                stage.scaleMode = StageScaleMode.NO_SCALE;
            }
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T01:22:04.177

> 但是我真的需要将我所有的 Flash 组件都转换为 Flex UIComponent 还是有办法在 FlexMobile 项目中使用纯 as3（无 mxml）？

在 Flash Builder 4.6 中，您可以创建 ActionScript Mobile 项目；这应该做你想做的事。创建一个 Flex Mobile 项目，假设您将依赖于 Flex 框架，并对您强加一些特定的模式，例如让您的主应用程序文件是扩展 Application.xml 的 MXML 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T01:36:21.440

您可以使用[这些步骤](http://renaun.com/blog/2011/05/using-flash-builder-4-5-to-package-arbitrary-swfs-for-ios-android-and-playbook/)将您的 swf 发布到移动设备上。

*   创建一个新的 ActionScript Mobile 项目并为其命名。
*   转到项目-> 属性-> 构建器。
*   取消选中“Flex”构建器（但保留“AIR application.xml 构建器”）
*   现在将您的任意 swf（即：myapp.swf）复制到 bin-debug 文件夹中。
*   在默认包空间中创建一个与 swf 同名的 ActionScript 类（即：myapp.as）。
*   右键单击 myapp.as 文件，然后单击“设置为默认应用程序”</li>
*   现在它会生成一个 myapp-app.xml，去打开和编辑你喜欢的。
*   单击运行配置并为您想要的平台打包您的应用程序。
*   重复步骤以将更多 SWF 添加到包中。

[您还可以在此处](http://renaun.com/blog/2011/09/using-flash-builders-mobile-workflow-with-flash-professional-projects/)找到在 Flash Pro 和 Flash Builder 之间来回切换的步骤。

# ide - 在 Aptana 3 中创建新文件而不创建新项目

> ID：13389857
> 
> 赞同：2
> 
> 时间：2012-11-15T00:36:58.570
> 
> 标签：ide, aptana, aptana3, new-project

我如何能够在 Aptana 3 中创建新的 .php 或 .html（示例），而无需执行创建新项目文件的过程来完成它。

我在 Mac 上运行并运行 Aptana Studio 3.2.2

如果有人可以通过链接引导我走向正确的方向，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:10:08.363

每个文件都需要成为项目的一部分。

我用来保留一个备用项目，在那里我可以快速打开临时工作文件，而无需创建新项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T02:46:11.313

文件>从模板新建>HTML>选择您要创建的 HTML 文件类型并设置好

# algorithm - 后缀树中的最大和最小节点数

> ID：13389858
> 
> 赞同：9
> 
> 时间：2012-11-15T00:37:14.853
> 
> 标签：algorithm, suffix-tree

后缀树中的最大和最小节点数是多少？我该如何证明呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T06:21:05.850

假设输入文本`N`长度为字符，包含根节点和所有叶子节点的最小节点数为 ，包含根节点和叶子节点`N+1`的最大节点数为`2N-1`。

**最小证明：**每个后缀必须至少有一个叶子节点，并且有`N`后缀。不需要任何内部节点，例如：如果文本是唯一符号序列`abc$`，则没有分支，因此在生成的后缀树中没有内部节点：

![在此处输入图像描述](../Images/092d45273fd2b6310ae8436cc5b74ded.png)

因此，最小值是总和节点中的`N`叶子、`0`内部节点和`1`根节点`N+1`。

**最大证明：**叶节点的数量永远不能大于，因为叶节点是后缀结束的地方，并且长度为 的字符串中`N`不能有多个不同的后缀。（事实上​​，你总是有完全不同的后缀，因此叶节点是完全不同的。）根节点总是完全是，所以问题是内部节点的最大数量是多少。每个内部节点都会在树中引入一个分支（因为后缀树的内部节点至少有 2 个子节点）。每个新分支最终必须导致至少一个额外的叶节点，因此如果您有内部节点，则必须至少有`N``N``N``N``1``K``K+1`叶节点，并且根节点的存在需要至少一个额外的叶（除非树是空的）。但是叶子节点的数量是有界的`N`，所以内部节点的最大数量是有界的`N-2`。这总共产生了`N`叶、`1`根和最多的`N-2`内部节点`2N-1`。

要看到这不仅是一个理论上的上限，而且一些后缀树实际上达到了这个最大值，请考虑一个只有一个重复字符的字符串：'aaa$'。确认其后缀树有 7 个节点（包括根和叶）：

![在此处输入图像描述](../Images/7244eb5178ece4dfeb9e81065d01b214.png)

**总结：**很明显，唯一真正的变量是内部节点的数量；`1`对于所有后缀树，根和叶的数量是恒定的`N`，而内部节点的数量在`0`和之间变化`N-2`。

# c# - 使用反射将属性值与该值的字符串表示形式进行比较

> ID：13389861
> 
> 赞同：-1
> 
> 时间：2012-11-15T00:37:32.230
> 
> 标签：c#, reflection

我已经搜索过并且已经接近了，但我无法完全理解下一步需要做什么。所以我有一个函数，它接受我的对象和一个字符串。

该字符串的格式为“property=value”；所以我将 = 符号处的字符串拆分为 2 个字符串，prop 和 value。现在我想将对象中的相同属性与字符串进行比较。所以我有这样的事情：

*   澄清编辑：我想 tostring() 会起作用，我想我所追求的是相反的。因为实际的属性值类型可能是 bool、datetime、int 或 string（可能还有其他，但没有自定义对象），所以我想我需要以某种方式将值转换或转换为正确的类型并进行比较。

*   第 2 次澄清。对于那些询问的人，上下文是我正在尝试创建一个简单的用户可定义规则系统来评估数据。由于数据是我的人类输入的，我最大的担心是其他类型的字符串表示我不会以与它们实际上是那些类型相同的方式进行比较，例如如果它们是十进制类型，则 1.00 应该 = 1.0，但如果它们是字符串则不会类型。

    ```
    private static bool evaluateCriteria(string s, Client o){

        bool evaluation = false;

        string prop = s.Split('=')[0];
        string value = s.Split('=')[1];

        var propvalue = (o).GetType().GetProperty(prop).GetValue(o, null);  

        //ok so not I want to compare value to propvalue, but don't know how
        // evaluation = (value == propvalue);

        return evaluation;

    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:41:57.580

将您的反射代码更改为：

```
var propvalue = (o).GetType().GetProperty(prop).GetValue(o, null).ToString(); 
```

如果您要查找的值采用特殊格式，您可能需要对其进行一些格式化以确保它与格式匹配。

您可能还应该在问题中提供更多上下文，因为它对您要实现的目标非常模糊，并且可能有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:42:31.460

您是否关心该属性实际返回的类型？

如果它评估为字符串，你应该能够做一些简单的事情，比如

```
return value == propvalue.ToString(); 
```

也许我错过了一些东西......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:58:49.690

我不确定你想要什么，但我认为是这个。比较两个字符串值

```
return string.Compare(value, propvalue.ToString()) == 0; 
```

# c - 在 C 中使用 crypt 进行简单密码比较

> ID：13389863
> 
> 赞同：4
> 
> 时间：2012-11-15T00:38:11.870
> 
> 标签：c, unix, cryptography

我从用户那里读取了第一个密码并对其进行了加密。然后我读取了第二个密码并对其进行了加密。然后我比较了两个加密密码，但比较总是表明它们是相等的。我将问题缩小到这个：在第二次加密之后，`password`和`guess`变量具有相同的值。这是一个奇怪的错误；任何人都可以提供见解和/或修复吗？

先感谢您。编码：

```
int main(void)
{
  char salt[] = "00";
  char *password;
  char *guess;

  password = crypt(getpass("Enter Password1:"), salt);
  printf("password = %s\n", password);

  guess = crypt(getpass("Enter Password2:"), salt);
  printf("password = %s\n", password);
  printf("guess = %s\n", guess);

  puts(strcmp(guess, password) == 0
       ? "Access Granted." : "Access Denied.");

  return 0;
} 
```

输出：

```
Enter Password1:
password = 007XN7q4UF/o6
Enter Password2:
password = 00MqrTyK65aEA
guess = 00MqrTyK65aEA
Access Granted. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T00:44:05.143

根据手册页`crypt`，它返回一个指向静态缓冲区的指针。

您必须同时复制`guess`和`password`：

```
password = strdup(crypt(getpass("Enter Password1:"), salt));
...
guess = strdup(crypt(getpass("Enter Password2:"), salt)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T00:43:55.067

复制（`strcopy`或`strdup`）返回的值`crypt`。

从手册页[`crypt`](http://linux.die.net/man/3/crypt)：

> 返回值指向其内容被每次调用覆盖的静态数据。

```
password = strdup(crypt(getpass("Enter Password1:"), salt));
...
guess = strdup(crypt(getpass("Enter Password2:"), salt));
...
free(guess);
free(password); 
```

或者，您可以使用较少可移植性`crypt_r`，它允许您指定一个包含非静态缓冲区的结构（并且如果在堆栈上分配，您不必显式释放，如下所示）：

```
crypt_data password_data = { 0 };
crypt_data guess_data = { 0 };
...
password = crypt_r(getpass("Enter Password1:"), salt, &password_data);
...
guess = crypt_r(getpass("Enter Password2:"), salt, &guess_data); 
```

请注意，每个`crypt_data`结构都消耗大约 128kB 的内存，这超出了您的需求；`crypt_r`的主要受众是可能同时调用的多线程应用程序`crypt`。

# c# - 将三位数字转换为文本

> ID：13389865
> 
> 赞同：-2
> 
> 时间：2012-11-15T00:38:28.597
> 
> 标签：c#

对于三位数，我在执行此操作时遇到了一些麻烦。我可以对两位数执行此操作，但是当我将 if 语句添加到字符串 TwoDigit 时，它会告诉我检测到无法访问的代码。这是我尝试过的：-

```
{
    class Program
    {
        static string[] digitWords =
        { "zero", "one", "two", "three", "four",
            "five", "six", "seven", "eight", "nine",
            "ten", "eleven", "twelve", "thirteen", "fourteen",
            "fifteen", "sixteen", "seventeen", "eighteen", "nineteen" };

        static string[] tenWords =
        { "", "", "twenty", "thirty", "forty",
          "fifty", "sixty", "seventy", "eighty", "ninety" };

        static string[] hundredWords = { "One-hundred", "two-hundred",
          "three-hundred", "four-hundred", "five-hundred", "six-hundred",
          "seven-hundred", "eight-hundred", "nine-hundred"}

        static string TwoDigit(int num)
        {
            if (num < 0 || num > 99) return "";
            if (num < 20) return digitWords[num];
            if (num % 10 == 0)
                return tenWords[num / 10];
            else
                return tenWords[num / 10] + "-" + digitWords[num % 10];

            if (num % 100 == 0)
                return digitWords[num / 100] + "-" + hundredWords[num % 100];
            else
                return digitWords[num / 100] + "-" + hundredWords[num % 100] + "-" + digitWords[num % 100];
        }

        static void Main(string[] args)
        {
            for (int i = 0; i <= 19; i++)
                Console.WriteLine("{0}: {1}", i, TwoDigit(i));
            for (int i = 20; i <= 99; i +=7)
                Console.WriteLine("{0}: {1}", i, TwoDigit(i));
            for (int i = 100; i <= 1100; i += 7)
                Console.WriteLine("{0}: {1}", i, TwoDigit(i));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:53:39.987

我前段时间在 SO 上找到了以下代码，并相信它是一个令人钦佩的紧凑型 Linq 来解决这个问题。我现在找不到帖子，所以如果有人认出了它，并且可以链接到原始解决方案，那就太好了。我不是为此获得荣誉的人。

```
 private static Dictionary<string, long> numberTable =
    new Dictionary<string, long>
    {{"zero",0},{"one",1},{"two",2},{"three",3},{"four",4},
    {"five",5},{"six",6},{"seven",7},{"eight",8},{"nine",9},
    {"ten",10},{"eleven",11},{"twelve",12},{"thirteen",13},
    {"fourteen",14},{"fifteen",15},{"sixteen",16},
    {"seventeen",17},{"eighteen",18},{"nineteen",19},{"twenty",20},
    {"thirty",30},{"forty",40},{"fifty",50},{"sixty",60},
    {"seventy",70},{"eighty",80},{"ninety",90},{"hundred",100},
    {"thousand",1000},{"million",1000000},{"billion",1000000000},
    {"trillion",1000000000000},{"quadrillion",1000000000000000},
    {"quintillion",1000000000000000000}};

    public static long ToLong(string numberString)
    {
        var numbers = Regex.Matches(numberString, @"\w+").Cast<Match>()
             .Select(m => m.Value.ToLowerInvariant())
             .Where(v => numberTable.ContainsKey(v))
             .Select(v => numberTable[v]);
        long acc = 0, total = 0L;
        foreach (var n in numbers)
        {
            if (n >= 1000)
            {
                total += (acc * n);
                acc = 0;
            }
            else if (n >= 100)
            {
                acc *= n;
            }
            else acc += n;
        }
        return (total + acc) * (numberString.StartsWith("minus",
              StringComparison.InvariantCultureIgnoreCase) ? -1 : 1);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:47:30.100

对于您遇到的错误的特定问题：

您的第三个 if 语句将始终返回一个值，因此您永远不会到达第四个 if 语句。（请记住，一旦您返回，您就完成了该功能，其余代码将不会被执行！）

此外，您可能想在这里重新考虑您的逻辑，因为输入任何值 > 99 只会返回 "" 作为最终答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T01:11:05.257

我相信您可以通过在 TwoDigit 顶部添加一个字符串来解决此问题，该字符串将不同的值连接到其上，然后在最后返回新字符串：

```
static string TwoDigit(int num)
{
    string newstring = ""; 

    if (num < 0 || num > 99) return "";
    if (num < 20) return digitWords[num];
    if (num % 10 == 0)
        newstring += tenWords[num / 10];
    else
        newstring += tenWords[num / 10] + "-" + digitWords[num % 10];

    if (num % 100 == 0)
        newstring += digitWords[num / 100] + "-" + hundredWords[num % 100];
    else
        newstring += digitWords[num / 100] + "-" + hundredWords[num % 100] + "-" + 
              digitWords[num % 100];

   return newstring; 
} 
```

如果我理解正确的话，这样的事情应该会起作用。

发生这种情况的原因（正如其他人所提到的）是第一个 if/else 块将始终退出函数，无论传入什么值。您的编译器正在检测到这一点并向您抛出错误，因为它有一种感觉正在做一些你不打算做的事情。（C# 是强类型的，编译器不允许像 C 或 C++ 之类的语言那样做很多类似的事情，C 或 C++ 会允许这样做，但你会得到意想不到的结果和逻辑错误）

编辑：经过进一步思考，您需要更改连接数字的顺序（第一个，十秒，最后一个）以使其有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-17T12:14:14.443

刚刚在[这里](http://www.blackbeltcoder.com/Articles/strings/converting-numbers-to-words)看到了这个有趣的解决方案：

```
namespace NumToText
{
    static class NumberToText
    {
        private static string[] _ones =
        {
            "zero",
            "one",
            "two",
            "three",
            "four",
            "five",
            "six",
            "seven",
            "eight",
            "nine"
        };

        private static string[] _teens =
        {
            "ten",
            "eleven",
            "twelve",
            "thirteen",
            "fourteen",
            "fifteen",
            "sixteen",
            "seventeen",
            "eighteen",
            "nineteen"
        };

        private static string[] _tens =
        {
            "",
            "ten",
            "twenty",
            "thirty",
            "forty",
            "fifty",
            "sixty",
            "seventy",
            "eighty",
            "ninety"
        };

        // US Nnumbering:
        private static string[] _thousands =
        {
            "",
            "thousand",
            "million",
            "billion",
            "trillion",
            "quadrillion"
        };

        /// <summary>
        /// Converts a numeric value to words suitable for the portion of
        /// a check that writes out the amount.
        /// </summary>
        /// <param name="value">Value to be converted</param>
        /// <returns></returns>
        public static string Convert(decimal value)
        {
            string digits, temp;
            bool showThousands = false;
            bool allZeros = true;

            // Use StringBuilder to build result
            StringBuilder builder = new StringBuilder();
            // Convert integer portion of value to string
            digits = ((long)value).ToString();
            // Traverse characters in reverse order
            for (int i = digits.Length - 1; i >= 0; i--)
            {
                int ndigit = (int)(digits[i] - '0');
                int column = (digits.Length - (i + 1));

                // Determine if ones, tens, or hundreds column
                switch (column % 3)
                {
                    case 0:        // Ones position
                        showThousands = true;
                        if (i == 0)
                        {
                            // First digit in number (last in loop)
                            temp = String.Format("{0} ", _ones[ndigit]);
                        }
                        else if (digits[i - 1] == '1')
                        {
                            // This digit is part of "teen" value
                            temp = String.Format("{0} ", _teens[ndigit]);
                            // Skip tens position
                            i--;
                        }
                        else if (ndigit != 0)
                        {
                            // Any non-zero digit
                            temp = String.Format("{0} ", _ones[ndigit]);
                        }
                        else
                        {
                            // This digit is zero. If digit in tens and hundreds
                            // column are also zero, don't show "thousands"
                            temp = String.Empty;
                            // Test for non-zero digit in this grouping
                            if (digits[i - 1] != '0' || (i > 1 && digits[i - 2] != '0'))
                                showThousands = true;
                            else
                                showThousands = false;
                        }

                        // Show "thousands" if non-zero in grouping
                        if (showThousands)
                        {
                            if (column > 0)
                            {
                                temp = String.Format("{0}{1}{2}",
                                    temp,
                                    _thousands[column / 3],
                                    allZeros ? " " : ", ");
                            }
                            // Indicate non-zero digit encountered
                            allZeros = false;
                        }
                        builder.Insert(0, temp);
                        break;

                    case 1:        // Tens column
                        if (ndigit > 0)
                        {
                            temp = String.Format("{0}{1}",
                                _tens[ndigit],
                                (digits[i + 1] != '0') ? "-" : " ");
                            builder.Insert(0, temp);
                        }
                        break;

                    case 2:        // Hundreds column
                        if (ndigit > 0)
                        {
                            temp = String.Format("{0} hundred ", _ones[ndigit]);
                            builder.Insert(0, temp);
                        }
                        break;
                }
            }

            // Append fractional portion/cents
            builder.AppendFormat("and {0:00}/100", (value - (long)value) * 100);

            // Capitalize first letter
            return String.Format("{0}{1}",
                Char.ToUpper(builder[0]),
                builder.ToString(1, builder.Length - 1));
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T00:45:26.263

You have code with `return` in both branches - as result code after that `if` condition will never be executed:

```
 if (condition)
   {
      return 1;
   }
   else 
   { 
     return 2;
   }
   // never will reach here
   var i = 1; // unreachable code. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T00:42:24.883

您可能会更清楚错误发生的位置，但我可以看到后半部分`TwoDigit()`无法访问。由于返回之前的语句的两种情况，`if`都无法执行下面的代码。return 语句退出该方法，并且不再执行该方法中的其他语句。这就是它无法到达的原因。

[您可以在我的文章Converting Numbers to Words](http://www.blackbeltcoder.com/Articles/strings/converting-numbers-to-words)中的代码中看到我是如何做到这一点的。

# css - Coderwall 用画布模糊背景效果

> ID：13389868
> 
> 赞同：5
> 
> 时间：2012-11-15T00:39:19.663
> 
> 标签：css, canvas, background

这个背景效果是如何`coderwall.com`做的，他们拍摄一张小图像，模糊它，并将其调整到视口的 100%。这是一个例子：[https ://coderwall.com/p/on5ojq](https://coderwall.com/p/on5ojq)

我试过了：

```
<canvas class="blur" src="https://d3levm2kxut31z.cloudfront.net/assets/locations/Mexico-1c39f581666a50a97c5130e13837ff20.jpg" width="300" height="200"></canvas> 
```

然后添加以下css：

```
.blur {
  min-width: 100%;
  min-height: 100%;
  position: fixed;
  top: 0;
  left: 0;
  z-index: -2;
  opacity: 0.7;
} 
```

但它不起作用。

请参阅以下`jsFiddle` [http://jsfiddle.net/RDdbt/1/](http://jsfiddle.net/RDdbt/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-20T21:39:57.343

尝试这个：

```
var CanvasImage=function(e,t){
    this.image=t,
    this.element=e,
    this.element.width=this.image.width,
    this.element.height=this.image.height;
    var n=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,
    r=navigator.appVersion.indexOf("Mac")>-1;
    n&&r&&(this.element.width=Math.min(this.element.width,300),this.element.height=Math.min(this.element.height,200)),
    this.context=this.element.getContext("2d"),
    this.context.drawImage(this.image,0,0)
};

CanvasImage.prototype={
    blur:function(e){
        this.context.globalAlpha=.5;
        for(var t=-e;t<=e;t+=2)
            for(var n=-e;n<=e;n+=2)
                this.context.drawImage(this.element,n,t),
            n>=0&&t>=0&&this.context.drawImage(this.element,-(n-1),-(t-1));
            this.context.globalAlpha=1
        }
},

$(function(){
    var image,canvasImage,canvas;
    $(".blur").each(function(){
        canvas=this,
        image=new Image,
        image.onload=function(){
            canvasImage=new CanvasImage(canvas,this),
            canvasImage.blur(4)
        },
        image.src=$(this).attr("src");
    });
}); 
```

[http://jsfiddle.net/RDdbt/6/](http://jsfiddle.net/RDdbt/6/)

# android - Android 4.2 破解了我的 AES 加密/解密代码

> ID：13389870
> 
> 赞同：14
> 
> 时间：2012-11-15T00:39:21.397
> 
> 标签：android, aes

这是我第一次在这里寻求帮助，我的部门（政府）已经在市场上发布了一些应用程序（Google Play），并且加密和描述工作非常好，直到昨天我在我的电脑上安装了 Jelly Bean 4.2关系。加密工作正常，它实际上是加密要存储的信息。虽然解密时，我得到了一个完全一样的异常：**pad block损坏**. 我检查了字符串，它在其他设备上与它一致（使用相同的密钥进行测试），这意味着它完全相同。问题是我们需要保持与以前版本的向后兼容性，这意味着如果我更改代码中的某些内容，它应该能够读取旧的加密信息。它存储在 SQLite 上的加密信息，因为我需要将其编码为 Base64。异常发生在这一行**byte[] decrypted = cipher.doFinal(encrypted);**

这是我的课：

```
import java.security.SecureRandom;

import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

import android.util.Base64;

public class EncodeDecodeAES {

    private final static String HEX = "0123456789ABCDEF";

    public static String encrypt(String seed, String cleartext) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] result = encrypt(rawKey, cleartext.getBytes());
        String fromHex = toHex(result);
        String base64 = new String(Base64.encodeToString(fromHex.getBytes(), 0));
        return base64;
    }

    public static String decrypt(String seed, String encrypted) throws Exception {
        String base64 = new String(Base64.decode(encrypted, 0));
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] enc = toByte(base64);
        byte[] result = decrypt(rawKey, enc);
        return new String(result);
    }

    public static byte[] encryptBytes(String seed, byte[] cleartext) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] result = encrypt(rawKey, cleartext);
        return result;
    }

    public static byte[] decryptBytes(String seed, byte[] encrypted) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] result = decrypt(rawKey, encrypted);
        return result;
    }

    private static byte[] getRawKey(byte[] seed) throws Exception {
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
        sr.setSeed(seed);
        try {
            kgen.init(256, sr);
        } catch (Exception e) {
    //      Log.w(LOG, "This device doesn't suppor 256bits, trying 192bits.");
            try {
                kgen.init(192, sr);
            } catch (Exception e1) {
    //          Log.w(LOG, "This device doesn't suppor 192bits, trying 128bits.");
                kgen.init(128, sr);
            }
        }
        SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();
        return raw;
    }

    private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(clear);
        return encrypted;
    }

    private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec);
        byte[] decrypted = cipher.doFinal(encrypted);
        return decrypted;
    }

    public static String toHex(String txt) {
        return toHex(txt.getBytes());
    }

    public static String fromHex(String hex) {
        return new String(toByte(hex));
    }

    public static byte[] toByte(String hexString) {
        int len = hexString.length() / 2;
        byte[] result = new byte[len];
        for (int i = 0; i < len; i++)
            result[i] = Integer.valueOf(hexString.substring(2 * i, 2 * i + 2), 16).byteValue();
        return result;
    }

    public static String toHex(byte[] buf) {
        if (buf == null)
            return "";
        StringBuffer result = new StringBuffer(2 * buf.length);
        for (int i = 0; i < buf.length; i++) {
            appendHex(result, buf[i]);
        }
        return result.toString();
    }

    private static void appendHex(StringBuffer sb, byte b) {
        sb.append(HEX.charAt((b >> 4) & 0x0f)).append(HEX.charAt(b & 0x0f));
    }

} 
```

我想知道（如果有人帮助我），我对这段代码做错了什么，或者它是否是 Android 4.2 的问题，如果它是 4.2 的问题，是否有任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T02:44:59.273

**警告**此答案`SecureRandom`用于密钥派生，这与其目的相反。`SecureRandom`是一个随机数生成器，**不能**保证在平台之间产生一致的输出（这是导致问题的原因）。密钥派生的正确机制是`SecretKeyFactory`. 这篇[nelenkov 的博客文章](http://nelenkov.blogspot.ru/2012/04/using-password-based-encryption-on.html)对这个问题有很好的描述。此答案为您受向后兼容性要求限制的情况提供了解决方案；但是，您应该尽快迁移到正确的实现。

* * *

好的，今天有更多时间做一些研究（并删除我的旧帖子，这实际上是行不通的，抱歉）我得到了一个运行良好的答案，我确实在 Android 2.3.6、2.3.7 上进行了测试（这基本上是一样的），4.0.4 和 4.2 并且它已经工作了。我对这些链接做了一些研究：

[Android 4.2 上的加密错误](https://stackoverflow.com/questions/13383006/encryption-error-on-android-4-2)，

[升级到 1.45 时出现 BouncyCastle AES 错误](https://stackoverflow.com/questions/4405334/bouncycastle-aes-error-when-upgrading-to-1-45)，

[http://en.wikipedia.org/wiki/Padding_(密码学)](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)

然后，由于上面这些链接上的内容，我得到了这个解决方案。这是我的课（现在工作正常）：

```
 package au.gov.dhsJobSeeker.main.readwriteprefssettings.util;

    import java.security.SecureRandom;

    import javax.crypto.Cipher;
    import javax.crypto.KeyGenerator;
    import javax.crypto.SecretKey;
    import javax.crypto.spec.SecretKeySpec;

    import android.util.Base64;

    public class EncodeDecodeAES {

private final static String HEX = "0123456789ABCDEF";
private final static int JELLY_BEAN_4_2 = 17;
private final static byte[] key = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };

// static {
// Security.addProvider(new BouncyCastleProvider());
// }

public static String encrypt(String seed, String cleartext) throws Exception {
    byte[] rawKey = getRawKey(seed.getBytes());
    byte[] result = encrypt(rawKey, cleartext.getBytes());
    String fromHex = toHex(result);
    String base64 = new String(Base64.encodeToString(fromHex.getBytes(), 0));
    return base64;
}

public static String decrypt(String seed, String encrypted) throws Exception {
    byte[] seedByte = seed.getBytes();
    System.arraycopy(seedByte, 0, key, 0, ((seedByte.length < 16) ? seedByte.length : 16));
    String base64 = new String(Base64.decode(encrypted, 0));
    byte[] rawKey = getRawKey(seedByte);
    byte[] enc = toByte(base64);
    byte[] result = decrypt(rawKey, enc);
    return new String(result);
}

public static byte[] encryptBytes(String seed, byte[] cleartext) throws Exception {
    byte[] rawKey = getRawKey(seed.getBytes());
    byte[] result = encrypt(rawKey, cleartext);
    return result;
}

public static byte[] decryptBytes(String seed, byte[] encrypted) throws Exception {
    byte[] rawKey = getRawKey(seed.getBytes());
    byte[] result = decrypt(rawKey, encrypted);
    return result;
}

private static byte[] getRawKey(byte[] seed) throws Exception {
    KeyGenerator kgen = KeyGenerator.getInstance("AES"); // , "SC");
    SecureRandom sr = null;
    if (android.os.Build.VERSION.SDK_INT >= JELLY_BEAN_4_2) {
        sr = SecureRandom.getInstance("SHA1PRNG", "Crypto");
    } else {
        sr = SecureRandom.getInstance("SHA1PRNG");
    }
    sr.setSeed(seed);
    try {
        kgen.init(256, sr);
        // kgen.init(128, sr);
    } catch (Exception e) {
        // Log.w(LOG, "This device doesn't suppor 256bits, trying 192bits.");
        try {
            kgen.init(192, sr);
        } catch (Exception e1) {
            // Log.w(LOG, "This device doesn't suppor 192bits, trying 128bits.");
            kgen.init(128, sr);
        }
    }
    SecretKey skey = kgen.generateKey();
    byte[] raw = skey.getEncoded();
    return raw;
}

private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES"); // /ECB/PKCS7Padding", "SC");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(clear);
    return encrypted;
}

private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES"); // /ECB/PKCS7Padding", "SC");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    byte[] decrypted = cipher.doFinal(encrypted);
    return decrypted;
}

public static String toHex(String txt) {
    return toHex(txt.getBytes());
}

public static String fromHex(String hex) {
    return new String(toByte(hex));
}

public static byte[] toByte(String hexString) {
    int len = hexString.length() / 2;
    byte[] result = new byte[len];
    for (int i = 0; i < len; i++)
        result[i] = Integer.valueOf(hexString.substring(2 * i, 2 * i + 2), 16).byteValue();
    return result;
}

public static String toHex(byte[] buf) {
    if (buf == null) return "";
    StringBuffer result = new StringBuffer(2 * buf.length);
    for (int i = 0; i < buf.length; i++) {
        appendHex(result, buf[i]);
    }
    return result.toString();
}

private static void appendHex(StringBuffer sb, byte b) {
    sb.append(HEX.charAt((b >> 4) & 0x0f)).append(HEX.charAt(b & 0x0f));
}

    } 
```

然而，PBrando 的答案（上面，也有效，因为我将其标记为解决方案。），虽然我正在寻找一种方法来保持与它现在相似的应用程序文件大小，但我选择使用这种方法。因为我不需要导入外部罐子。我确实放了整个班级，以防万一你们中的任何人遇到同样的问题，并且只想复制和粘贴它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:01:25.347

您可以尝试使用 SpongyCastle 库。它是经过修补以在 Android 上编译的 BouncyCastle。

由于它与 BouncyCastle 兼容（只是包名和服务提供者不同，“SC”而不是“BC”），并且 Android 使用 BouncyCastle 的子集，因此在您的代码中集成 SpongyCastle 应该是一件小事。

你可以在这里找到 SpongyCastle：[http ://rtyley.github.com/spongycastle/](http://rtyley.github.com/spongycastle/)

按照他们网站中的说明，注意注册 SpongyCastle：

```
static {
    Security.addProvider(new org.spongycastle.jce.provider.BouncyCastleProvider());
} 
```

当您获得加密对象的实例时，还要指定提供者（“SC”）。

# php - php 和 javascript 中的 xml 数据

> ID：13389880
> 
> 赞同：0
> 
> 时间：2012-11-15T00:40:41.473
> 
> 标签：php, javascript, xml

我是 php 和 javascript 新手，所以不要生气。好的，所以我想从另一台服务器获取 xml 文件，然后只提取一个数据（数字）并将其放入 javascript 变量中，以便我可以使用它进行计算。

我有这段代码可以很好地获取 xml 文件，并且我得到了带有我需要的数据的 $result 变量，但是我无法将该数据保存在 javascript 变量中。我在 javascript 中需要这个数字的原因是因为所有的计算都是用 javascript 编码的。

这是php代码：

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,
'http://www.pbz.hr/Downloads/PBZteclist.xml');
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$xml = curl_exec($ch);

echo($xml);

curl_close($ch); 

$xmlObject = new SimpleXMLElement($xml);
$node = $xmlObject->children();
$result =   $node[0]->Currency[12]->BuyRateForeign;
echo("<br />");
echo("<br />");
echo $result;
?> 
```

我需要来自 EUR7,480000 的数据

这个数字 7,480000 是我需要提取并保存在 javascript 变量中的全部内容。

也许我这样做的方式不正确，但我已经尝试了一切。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:47:01.830

假设您不打算使用 Ajax 执行此操作：

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.pbz.hr/Downloads/PBZteclist.xml');
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$xml = curl_exec($ch);

echo($xml);

curl_close($ch);

$xmlObject = new SimpleXMLElement($xml);
$node = $xmlObject->children();
$result =   $node[0]->Currency[12]->BuyRateForeign;
?>
<script type="text/javascript">
    var rate = '<?php echo $result; ?>';
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:50:09.130

如果您希望在页面加载时在 javascript 中设置数据，您可以使用 php 回显 javascript 字符串以启动变量。

在 PHP 中：

```
<script>
<?php echo "var data = ".$result; ?>
</script> 
```

如果您要异步获取数据，则必须使用 javascript AJAX 调用 PHP 页面，该页面以某种格式 (JSON) 或单个字符串值输出您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T01:47:43.023

我建议使用 xpath 获取值，以防顺序发生变化。如果要用作字符串，请将其括在引号中。如果您在计算中使用它，您可能需要去掉逗号等...

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,
'http://www.pbz.hr/Downloads/PBZteclist.xml');
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$xml = curl_exec($ch);
curl_close($ch);

//echo($xml);

$sxe = new SimpleXMLElement($xml);

$result = $sxe->xpath("//Currency[@Code='978']");
$BRF = $result[0]->BuyRateForeign;
?>
<script>
  var bfr_string = '<?= $BRF?>'; //string
  var bfr_number = <?= str_replace(',','.',$BRF)?>; //number
</script> 
```

# iphone - Keychain访问中找不到公钥和私钥

> ID：13389882
> 
> 赞同：1
> 
> 时间：2012-11-15T00:40:49.330
> 
> 标签：iphone, ios, xcode

我想我不小心从钥匙串访问->登录->密钥中删除了公钥和私钥。现在，当我生成新证书时，我看不到这些密钥。我可以知道如何恢复或重新下载这些吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:45:12.357

如果您删除了私钥（并且没有备份），那么您需要登录您的 Apple Developer 帐户，转到配置门户，撤销当前的开发人员或分发密钥，然后按照步骤创建新的。

**注意：您必须重新下载您可能还创建的任何应用程序配置文件才能使用新的私钥**

# android - Android 和 WiFi Direct - 连接问题

> ID：13389886
> 
> 赞同：4
> 
> 时间：2012-11-15T00:41:06.003
> 
> 标签：android, wifi, wifi-direct

所以我一直在使用 WiFi Direct 很长一段时间，在整个过程中，我一直被连接问题所困扰。自从更新到 4.1 后，不再有打开和关闭 WiFi Direct 的硬按钮，我似乎总是与连接不一致。对于我的使用，我不需要找到对等点，只需从早期交互中存储的设备地址连接到对等点。有时设备会立即连接，有时第二台设备不会收到邀请，有时第一台设备会被卡住，试图无限期地发送邀请。下面是我的连接代码，它非常简单，所以我不确定出了什么问题。任何帮助，将不胜感激！非常感谢你。

```
WifiP2pConfig config = new WifiP2pConfig();
SlideMenuItem item = sideMenu.getItem(itemId);
config.deviceAddress = item.label;
config.wps.setup = WpsInfo.PBC;

if (progressDialog != null && progressDialog.isShowing()) {
     progressDialog.dismiss();
 }
progressDialog = ProgressDialog.show(mContext, "Press back to cancel",
                "Connecting to :" + item.label, true, true);
manager.connect(channel, config, new ActionListener() {

            @Override
            public void onSuccess() {
                // WiFiDirectBroadcastReceiver will notify us. Ignore for now.
            }

            @Override
            public void onFailure(int reason) {
                Toast.makeText(mContext, "Connect failed. Retry.", Toast.LENGTH_SHORT).show();
            }
        });

@Override
public void onConnectionInfoAvailable(WifiP2pInfo arg0) {
    // TODO Auto-generated method stub
    if (progressDialog != null && progressDialog.isShowing()) {
        progressDialog.dismiss();
    }
    Toast.makeText(this, "Succesfully connected.", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-18T12:38:18.203

我有 4.0 和 4.1 设备，据我所知，4.0 可以选择打开 Wi-Fi Direct，因为在 4.1 中它始终处于打开状态。人们没有意识到这一点的原因是因为 Wi-Fi Direct 4.0 要求关闭常规 Wifi。后来，在 4.1 中，启用常规 Wifi 是启用“始终在线”Wi-Fi Direct 的原因。

所以 TL;DR 版本：如果找不到 Wi-Fi Direct 选项，请打开常规 WiFi。

不是100％，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2013-08-16T18:12:27.300

为什么不使用 WiFi 拍摄？您只需打开 WiFi，当您进行 WiFi 拍摄时，它会自动显示 WiFi Direct 已打开。要发送文件，只需按住文件并选择发送。将出现一个选项，“WiFi 拍摄”。这个应用程序将直接通过 WiFi 发送。

# sql - SQL函数REGEXP_SUBSTR：正则表达式如何获取两个字符之间的内容但不包含它们

> ID：13389887
> 
> 赞同：0
> 
> 时间：2012-11-15T00:41:06.673
> 
> 标签：sql, regex, oracle

对于这些字符串

```
 RSLR_AIRL19_ID3454_T20030913091226
   RSLR_AIRL19_ID3122454_T20030913091226
   RSLR_AIRL19_ID34_T20030913091226 
```

ID后面的号码怎么获取？

或者如何获取两个字符之间的内容但不包含它们？

我用这个`'/\_ID([^_]+)/'`得到了像数组这样的匹配（ [0] => _ID3454 [1] => 3454 ）

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:42:47.637

使用[pcre](/questions/tagged/pcre "显示标记为“pcre”的问题")和[perl](/questions/tagged/perl "显示标记为“perl”的问题")引擎：

```
ID\K\w+ 
```

**笔记**

`\K`“重新开始”比赛。

见[http://www.phpfreaks.com/blog/pcre-regex-spotlight-k](http://www.phpfreaks.com/blog/pcre-regex-spotlight-k)（`php`使用`pcre`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:52:22.573

要在 之后提取数字`ID`，您可以编写类似的查询。

```
SQL> with t1 as(
  2    select 'RSLR_AIRL19_ID3454_T20030913091226' as col from dual union all
  3    select 'RSLR_AIRL19_ID3122454_T20030913091226'     from dual union all
  4    select 'RSLR_AIRL19_ID34_T20030913091226'          from dual
  5  )
  6  select regexp_substr(col, '^([[:alnum:]]+_){2}ID([[:digit:]]+)_([[:alnum:]]+){1}$', 1, 1, 'i', 2) as ID
  7    from t1
  8  ;

ID
-------------
3454
3122454
34 
```

或者，如果您想从第一次出现的模式中提取数字而不验证整个字符串是否与特定格式匹配：

```
SQL> with t1 as(
  2    select 'RSLR_AI_RL19_ID3454_T20030913091226' as col from dual union all
  3    select 'RSLR_AIRL19_ID3122454_T20030913091226'      from dual union all
  4    select 'RSLR_AIRL19_ID34_T20030913091226'           from dual
  5  )
  6  select regexp_substr(col, 'ID([[:digit:]]+)', 1, 1, 'i', 1) as ID
  7    from t1
  8  ;

ID
--------------
3454
3122454
34 
```

# c# - 我如何在 C# 中导入 System.Windows

> ID：13389889
> 
> 赞同：1
> 
> 时间：2012-11-15T00:41:26.957
> 
> 标签：c#, using

你好，我已经复制了这个 FFT 实现，但它说没有像 System. ***Windows***我怎样才能使这个代码工作？已经得到了答案，我只是想编辑这篇文章，所以它现在对某人有用。

资料来源： http: [//gerrybeauregard.wordpress.com/2011/04/01/an-fft-in-c/](http://gerrybeauregard.wordpress.com/2011/04/01/an-fft-in-c/)

代码：：

```
using System;
using System.Net;

namespace FFT {

    public class FFT2 {
        // Element for linked list in which we store the
        // input/output data. We use a linked list because
        // for sequential access it's faster than array index.
        class FFTElement {
            public double re = 0.0;     // Real component
            public double im = 0.0;     // Imaginary component
            public FFTElement next;     // Next element in linked list
            public uint revTgt;         // Target position post bit-reversal
        }

        private uint m_logN = 0;        // log2 of FFT size
        private uint m_N = 0;           // FFT size
        private FFTElement[] m_X;       // Vector of linked list elements

        /**
         *
         */
        public FFT2() {
        }

        /**
         * Initialize class to perform FFT of specified size.
         *
         * @param   logN    Log2 of FFT length. e.g. for 512 pt FFT, logN = 9.
         */
        public void init(
            uint logN) {
            m_logN = logN;
            m_N = (uint)(1 << (int)m_logN);

            // Allocate elements for linked list of complex numbers.
            m_X = new FFTElement[m_N];
            for (uint k = 0; k < m_N; k++)
                m_X[k] = new FFTElement();

            // Set up "next" pointers.
            for (uint k = 0; k < m_N - 1; k++)
                m_X[k].next = m_X[k + 1];

            // Specify target for bit reversal re-ordering.
            for (uint k = 0; k < m_N; k++)
                m_X[k].revTgt = BitReverse(k, logN);
        }

        /**
         * Performs in-place complex FFT.
         *
         * @param   xRe     Real part of input/output
         * @param   xIm     Imaginary part of input/output
         * @param   inverse If true, do an inverse FFT
         */
        public void run(
            double[] xRe,
            double[] xIm,
            bool inverse = false) {
            uint numFlies = m_N >> 1;   // Number of butterflies per sub-FFT
            uint span = m_N >> 1;       // Width of the butterfly
            uint spacing = m_N;         // Distance between start of sub-FFTs
            uint wIndexStep = 1;        // Increment for twiddle table index

            // Copy data into linked complex number objects
            // If it's an IFFT, we divide by N while we're at it
            FFTElement x = m_X[0];
            uint k = 0;
            double scale = inverse ? 1.0 / m_N : 1.0;
            while (x != null) {
                x.re = scale * xRe[k];
                x.im = scale * xIm[k];
                x = x.next;
                k++;
            }

            // For each stage of the FFT
            for (uint stage = 0; stage < m_logN; stage++) {
                // Compute a multiplier factor for the "twiddle factors".
                // The twiddle factors are complex unit vectors spaced at
                // regular angular intervals. The angle by which the twiddle
                // factor advances depends on the FFT stage. In many FFT
                // implementations the twiddle factors are cached, but because
                // array lookup is relatively slow in C#, it's just
                // as fast to compute them on the fly.
                double wAngleInc = wIndexStep * 2.0 * Math.PI / m_N;
                if (inverse == false)
                    wAngleInc *= -1;
                double wMulRe = Math.Cos(wAngleInc);
                double wMulIm = Math.Sin(wAngleInc);

                for (uint start = 0; start < m_N; start += spacing) {
                    FFTElement xTop = m_X[start];
                    FFTElement xBot = m_X[start + span];

                    double wRe = 1.0;
                    double wIm = 0.0;

                    // For each butterfly in this stage
                    for (uint flyCount = 0; flyCount < numFlies; ++flyCount) {
                        // Get the top & bottom values
                        double xTopRe = xTop.re;
                        double xTopIm = xTop.im;
                        double xBotRe = xBot.re;
                        double xBotIm = xBot.im;

                        // Top branch of butterfly has addition
                        xTop.re = xTopRe + xBotRe;
                        xTop.im = xTopIm + xBotIm;

                        // Bottom branch of butterly has subtraction,
                        // followed by multiplication by twiddle factor
                        xBotRe = xTopRe - xBotRe;
                        xBotIm = xTopIm - xBotIm;
                        xBot.re = xBotRe * wRe - xBotIm * wIm;
                        xBot.im = xBotRe * wIm + xBotIm * wRe;

                        // Advance butterfly to next top & bottom positions
                        xTop = xTop.next;
                        xBot = xBot.next;

                        // Update the twiddle factor, via complex multiply
                        // by unit vector with the appropriate angle
                        // (wRe + j wIm) = (wRe + j wIm) x (wMulRe + j wMulIm)
                        double tRe = wRe;
                        wRe = wRe * wMulRe - wIm * wMulIm;
                        wIm = tRe * wMulIm + wIm * wMulRe;
                    }
                }

                numFlies >>= 1;     // Divide by 2 by right shift
                span >>= 1;
                spacing >>= 1;
                wIndexStep <<= 1;   // Multiply by 2 by left shift
            }

            // The algorithm leaves the result in a scrambled order.
            // Unscramble while copying values from the complex
            // linked list elements back to the input/output vectors.
            x = m_X[0];
            while (x != null) {
                uint target = x.revTgt;
                xRe[target] = x.re;
                xIm[target] = x.im;
                x = x.next;
            }
        }

        /**
         * Do bit reversal of specified number of places of an int
         * For example, 1101 bit-reversed is 1011
         *
         * @param   x       Number to be bit-reverse.
         * @param   numBits Number of bits in the number.
         */
        private uint BitReverse(
            uint x,
            uint numBits) {
            uint y = 0;
            for (uint i = 0; i < numBits; i++) {
                y <<= 1;
                y |= x & 0x0001;
                x >>= 1;
            }
            return y;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:50:44.870

`System.Windows`是 Windows Presentation Foundation 命名空间。本文假设您有一个 WPF 应用程序。如果您没有，您可以从 Visual Studio 的 File > New Project > ... > Windows > WPF Application 创建一个。

WPF 是一种为 MS Windows 创建图形桌面应用程序的方法。如果您来自命令行操作系统，您可能更愿意制作 Windows 控制台应用程序。

如果您想学习如何创建 WPF 应用程序，您需要[WPF 教程](http://code.msdn.microsoft.com/vstudio/Introduction-to-Building-b8d16419)。

# c++ - C++ 的效率

> ID：13389891
> 
> 赞同：6
> 
> 时间：2012-11-15T00:41:38.637
> 
> 标签：c++, performance, artificial-intelligence

我正在尝试设置一棵树（最终用于“神经网络”并试图使设置尽可能高效。不幸的是，即使设置树也需要大约 3 分钟，我无法弄清楚是什么让它变得如此低效。我试图尽可能使用指针来最小化负载，但它仍然需要永远。我做错了什么？

PS。这最终适用于井字游戏 AI（是的，我知道这可以通过查看愚蠢的游戏来解决，但我想将其作为一个简单的 AI 来自学。

树的每个分支将有 9 个节点，每个节点分支出另一个 9。这使得最后一组分支大约有 4 亿个节点。有什么方法可以更有效地执行此代码吗？

```
#include <iostream>
#include <vector>

using namespace std;

class Node;
class Set;

class Node {
    public:
        Node(double, Set*);
        Node();
        double value;
        Set * nextSet;
};
class Set {
    public:
        Set(vector<Node *>);
        Set();
        vector<Node *> nodes;
};
class NeuralNet {
    public:
        Set * firstSet;
};
Node::Node(double val, Set * newSet){
    value = val;
    nextSet = newSet;
}
Set::Set(vector<Node *> input){
    nodes = input;
}
Node::Node(){
    Set temp;
    nextSet = &temp;
}
Set::Set(){
    vector<Node *> temp;
    nodes = temp;
}
void setUpNeuralNetRecursive(Set * curSet, int curDepth){
    if(curDepth<9){
        for(int i=0;i<9;i++){
            Set newSet;
            Node newNode(1,&newSet);
            (*curSet).nodes.push_back(&newNode);
            setUpNeuralNetRecursive(&newSet, curDepth+1);
        }
    }
}
void setUpNeuralNet(NeuralNet net){
    Set newSet;
    net.firstSet=&newSet;
    setUpNeuralNetRecursive(&newSet, 0);
}
int main()
{
    cout << "Setting up neural network.  This may take up to 3 minutes." << endl;
    NeuralNet net;
    setUpNeuralNet(net);
    cout << "Setup ended." << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:53:43.997

你有一个完全平衡的 9 叉树吗？**不要**为每个元素分配一个节点！相反，为您的节点分配一个数组并使用计算导航树：

*   要从节点导航`i`到其父节点，您需要计算`(i - 1) / 9`
*   要找到您要计算的最左边的孩子`i * 9 + 1`

（或类似的东西；现在是半夜，我还没准备好做这个数学）。在任何情况下，您都可以使用这样的公式导航一个完全平衡的 n 叉树。例如，这种方法用于[d-heaps](http://en.wikipedia.org/wiki/D-ary_heap)。这种方法的优点是您只有一个大的分配并且导航树变成了计算而不是内存查找。

也就是说，我怀疑你是否真的想要这样的树：每一步选择的数量都会变少，你可能想完全杀死某些树枝。不过，树的技术可能仍然有用。

# charts - 除非电子表格打开，否则 Google Apps 脚本发布的仪表板不会加载数据

> ID：13389892
> 
> 赞同：1
> 
> 时间：2012-11-15T00:41:45.193
> 
> 标签：charts, google-apps-script

我有一组从谷歌网站链接到的已发布仪表板。仪表板都是从谷歌电子表格中提取数据，它们是相当基本的——主要是可过滤的数据表。这是一个非常大的电子表格，有很多 vlookup 和一些导入范围、一些过滤器公式、一些查询公式……发生了很多事情……通常你会得到“一些公式需要一段时间来处理消息"

如果您打开了电子表格，仪表板就可以很好地工作。或者如果其他人打开它。但是，如果您关闭电子表格并等待一段时间，然后在电子表格关闭时尝试运行仪表板，则仪表板通常不会提取任何数据。

我怀疑我需要让仪表板等待数据加载更长时间，或者如果可能的话，以某种方式在“背景”中打开电子表格。有什么想法吗？这是我拥有的示例仪表板：

```
 function doGet() {

  var ss = SpreadsheetApp.openById("0Aq2VphSIvT4NdE1IRTlzV0NyWF9XZ1hsX2hXZG0xdHc");
  var lastrow = ss.getSheetByName('CIC Student Aggregate').getLastRow();
  var data = ss.getSheetByName('CIC Student Aggregate').getRange(1, 1, lastrow, 13);

  var StudentFilter = Charts.newStringFilter()
        .setFilterColumnLabel("Student Name")
        .build();
  var TotalsFilter = Charts.newNumberRangeFilter()
      .setFilterColumnLabel("Total Interactions")
      .build();

  var tablechart = Charts.newTableChart()
      .setDimensions(680, 550)
      .setDataViewDefinition(Charts.newDataViewDefinition()
                         .setColumns([0,1,7,8,9,10,11,12]))
    .build();   

    var piechart = Charts.newPieChart()
      .setDimensions(330, 350)
      .setDataViewDefinition(Charts.newDataViewDefinition()
                         .setColumns([0,12]))
      .build();  

  var dashboard = Charts.newDashboardPanel()
      .setDataTable(data)
      .bind([StudentFilter,TotalsFilter], [tablechart,piechart])
      .build();

  var uiApp = UiApp.createApplication()
      .setTitle("Interactions Totals")
      .setWidth(980)
      .setHeight(600);

 dashboard.add(uiApp.createVerticalPanel()
               .add(StudentFilter).add(TotalsFilter)
               .setSpacing(1)
    .add(uiApp.createHorizontalPanel()
        .add(uiApp.createVerticalPanel())
              .add(tablechart).add(piechart) 
        ));
  uiApp.add(dashboard);
  return uiApp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:31:43.013

do you still have your problem ?

If it is the case, do you have some 'importrange' in your dashboard ?

If you read data with appscript on a range where the data is generated via importrange, it will return nothing if the spreadsheet is closed.

In fact, 'importrange' is triggered only when a user open a spreadsheet. Appscript doesn't trigger the 'importrange' on Spreadsheet opening.

# javascript - 迭代多边形内的每个点

> ID：13389897
> 
> 赞同：1
> 
> 时间：2012-11-15T00:42:13.030
> 
> 标签：javascript, canvas, polygon

假设我在网格环境中有某个多边形的顶点，我如何遍历它包含的每个单元格（包括边缘上的单元格）？

为了澄清，我有以下顶点（算作左上角是`(0, 0)`）：

```
//each point is [x, y]
var verts = [
    [1, 1],
    [3, 1],
    [3, 2],
    [4, 2],
    [4, 4],
    [0, 4],
    [0, 3],
    [1, 3]
]; 
```

这将定义一个多边形，例如：

![网格](../Images/836fbfc5d4ddb73a5f5b343099c444ad.png)

根据上面的顶点，每个绿点都是我想要迭代的点。顶点沿着多边形边缘的方向没有模式，它可以围绕多边形顺时针或逆时针移动。但是，它们将井然有序；也就是说，如果你放下笔并按顺序移动到每个顶点，而不抬起，它会在不交叉多边形内部的情况下绘制轮廓。

用例是我`imageData`通过画布 API 加载了来自 PNG 的文件。这个PNG被分成“区域”，我需要迭代当前“区域”的每个像素。每个“区域”都由一个顶点数组定义，如上。

我尝试了类似以下的方法，它将为数组中的每组 4 个顶点创建一个正方形来迭代。

```
for(var v = 0, vl = verts.length - 4; v < vl; ++v) {
    //grabbing the minimum X, Y and maximum X, Y to define a square to iterate in
    var minX = Math.min(verts[v][0], verts[v + 1][0], verts[v + 2][0], verts[v + 3][0]),
        minY = Math.min(verts[v][1], verts[v + 1][1], verts[v + 2][1], verts[v + 3][1]),
        maxX = Math.max(verts[v][0], verts[v + 1][0], verts[v + 2][0], verts[v + 3][0]),
        maxY = Math.min(verts[v][1], verts[v + 1][1], verts[v + 2][1], verts[v + 3][1]);

    for(var x = minX; x < maxX; ++x) {
        for(var y = minY; y < maxY; ++y) {
            //do my checks on this pixel located at X, Y in the PNG
        }
    }
} 
```

但是有两个大问题：

1.  它可以在多边形内重复点，并且
2.  它可以抓取多边形外的点

我可以通过跟踪我检查的点来解决第一个问题，所以我不会重复检查。第二个只能通过`PointInPoly`对每个点进行检查来解决，这会使这个解决方案比我想要的要重得多。

**编辑**
迭代整个图像中的每个像素并对每个像素进行`PointInPoly`检查也是不可接受的；它甚至比上述算法还要慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:29:31.283

如果您的多边形是凸的，您可以执行以下操作：

*   为多边形的每条边创建一条线，表示一侧在内侧，一侧在外侧（这是基于法线，可能取决于缠绕方向）
*   对于您已经计算的边界框内的每个像素，检查该像素是否位于线的内侧。如果像素位于任何一条线的外侧，则它位于多边形之外。如果它在所有这些里面，那么它在里面。

基本算法来自这里：[https ://github.com/thegrandpoobah/voronoi/blob/master/stippler/stippler.cpp#L187](https://github.com/thegrandpoobah/voronoi/blob/master/stippler/stippler.cpp#L187)

如果您的多边形*不是*凸面的，那么我要做的就是在画布上以已知颜色实际绘制多边形，然后应用[迭代洪水填充算法](https://stackoverflow.com/questions/1257117/does-anyone-have-a-working-non-recursive-floodfill-algorithm-written-in-c%5D)。这要求您至少知道内部的一个像素，但这不应该是一项昂贵的测试。但是，如果您不能在屏幕外缓冲区（不熟悉画布标签）中执行此操作，这可能不适合 JavaScript。

# assembly - 如何在 MASM 32 中从小写更改为大写？

> ID：13389901
> 
> 赞同：2
> 
> 时间：2012-11-15T00:42:29.543
> 
> 标签：assembly, masm

我有这段代码，据我说应该将每个字符切换为其大写形式，我已经检查了位掩码，这很好。但是，当我打印字符串时，它仍然是小写形式。

```
 .MODEL SMALL
            .STACK 
                    .DATA

MEN         DB      'abcd'

        .CODE

            ORG     100H
MAIN        PROC    FAR

            LEA     BX, MEN+1
            MOV   CX, 20

OTRO:       MOV     AH,[BX]
            CMP      AH, 61H 
            JB          OTRO2
            CMP     AH, 7AH
            JA         OTRO2
            AND     AH, 11011111B 
            MOV     [BX], AH

  OTRO2:    INC        BX
            LOOP    OTRO
            MOV     AX, 4C00H
            INT       21H

  MAIN      ENDP

  END     MAIN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:44:02.303

你跳过了第一个字符，

```
LEA     BX, MEN+1 
```

并循环超出字符串的长度，

```
MOV   CX, 20 
```

但除此之外，它似乎在这方面起作用。你是如何打印字符串的？它不在提供的代码中。

# search - Searching and match count for phrase with Solr

> ID：13389908
> 
> 赞同：3
> 
> 时间：2012-11-15T00:42:58.590
> 
> 标签：search, solr, phrase

I am using Solr to index documents and now I need to search those documents for an exact phrase and sort the results by the number of times this phrase appears on the document. I also have to present the number of times the phrase is matched back to the user.

I was using the following query (here I am searching by the word SAP):

```
{
    :params => {
            :wt => "json",
        :indent => "on",
          :rows => 100,
         :start => 0,
             :q => "((content:SAP) AND (doc_type:ClientContact) AND (environment:production))",
          :sort => "termfreq(content,SAP) desc",
            :fl => "id,termfreq(content,SAP)"
    }
} 
```

Of course this is a representation of the actual query, that is done by transforming this hash into a query string at runtime.

I managed to get the search working by using `content:"the query here"` instead of `content:the query here`, but the hard part is returning and sorting by the `termfreq`.

Any ideas on how I could make this work?

Obs: I am using Ruby but this is a legacy application and I can't use any RubyGems, I am using the HTTP interface to Solr here.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:25:08.827

我能够使它工作添加一个**ShingleFilter**到我的`schema.xml`：

就我而言，我开始使用 SunSpot，所以我只需要进行以下更改：

```
<!-- *** This fieldType is used by Sunspot! *** -->
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <!-- This is the line I added -->
    <filter class="solr.ShingleFilterFactory" maxShingleSize="4" outputUnigrams="true"/>
  </analyzer>
</fieldType> 
```

在进行该更改、重新启动 Solr 并重新编制索引之后，我能够`termfreq(content, "the query here")`在查询 ( `q=`)、返回字段 ( `fl=`) 甚至排序 ( `sort=`) 上都使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T11:37:26.240

放在`debug=results`solr url 的末尾，它也会给你短语 freq。

# java - Change logger level for single class through system property

> ID：13389911
> 
> 赞同：3
> 
> 时间：2012-11-15T00:43:32.670
> 
> 标签：java, log4j, slf4j, logback

Is there a way to change the *logging level* of a class using a System Property in the launcher? I want to be able to easily and quickly change the debug level of a class depending on which class I'm working on. Being able to do it at launch time with something like `-Dcom.example.package.myclass.logger.level=TRACE`
or
`-Dcom.slf4j.trace=com.example.package.myclass`

would be very useful.

I'm using slf4j/logback but i'm also interested in a way to do it in log4j

I know how to change the level programatically, but i don't want to have to change code, just the launcher

If it's relevant, I'm using a configuration file `logback-test.xml`

If it's not possible, is there another trick to do this without changing code or having to pollute the clean xml file?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:38:30.310

[更新]

我重新阅读了你的问题，我认为我们可以更接近。

将以下内容添加到您的 logback.xml：

```
 <if condition='isDefined("com.slf4j.trace")'>
    <then>
      <logger name="${com.slf4j.trace}" level="TRACE"/>
    </then>
  </if> 
```

[如Logback Setup page](http://logback.qos.ch/setup.html#janino)中所述，将 Codehaus Janino 和 Apache commons-compiler jar 添加到您的类路径中。

现在你启动你的应用程序

```
-Dcom.slf4j.trace=com.example.package.MyClass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:54:51.017

来自 logback 文档的一些想法：

> Logback-classic 可以扫描其配置文件中的更改，并在配置文件更改时自动重新配置自己。

```
<configuration scan="true" scanPeriod="30 seconds" > 
  ...
</configuration> 
```

此外，您可以将默认配置文件的位置指定为系统属性：

```
java -Dlogback.configurationFile=/path/to/config.xml chapters.configuration.MyApp1 
```

所以它比你描述的更方便。

# tcl - Expect : error can't read "ip": no such variable

> ID：13389912
> 
> 赞同：0
> 
> 时间：2012-11-15T00:43:51.917
> 
> 标签：tcl, expect

I am a newbie in expect / TCL and trying to parse an HTML page that has output some thing like below:

```
<li><p>Timestamp: Wed, 14 Nov 2012 16:37:50 -0800
<li><p>Your IP address: 202.76.243.10</p></li>
<li><p class="XXX_no_wrap_overflow_hidden">Requested URL: /</p></li>
<li><p>Error reference number: 1003</p></li>
<li><p>Server ID: FL_23F7</p></li>
<li><p>Process ID: PID_1352939870.809-1-428432242</p></li>
<li><p>User-Agent: </p></li> 
```

My script is below. I am able to get the web page which I am not able to parse the line "Your IP address:" which is giving me errors:

```
#!/usr/bin/expect -f
set timeout -1
spawn telnet www.whatismyip.com 80
send "GET /\r\n"
expect
set output $expect_out(buffer)
foreach line [split $output \n] {
        regexp {.*<li><p>Your IP Address Is:.*?(\d+\.\d+\.\d+\.\d+)} $line ip
        if {[string length ${ip}]} {
                puts $ip
    }
} 
```

The error is:

```
 Connection closed by foreign host.
can't read "ip": no such variable
    while executing
"string length ${ip}"
    ("foreach" body line 3)
    invoked from within
"foreach line [split $output \n] {
        regexp {.*<li><p>Your IP Address Is:.*?(\d+\.\d+\.\d+\.\d+)} $line ip
        if {[string length ${ip}]} {
 ..."
    (file "./t4" line 7) 
```

Any pointers where I am doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:51:22.573

正则表达式不匹配，因此未分配变量。您应该检查结果`regexp`以查看匹配是否成功；当不使用`-all`to 选项时`regexp`，您可以将其视为布尔值。尝试这个：

```
foreach line [split $output \n] {
    if {[regexp {<li><p>Your IP Address Is:.*?(\d+\.\d+\.\d+\.\d+)(?!\d)} $line -> ip]} {
        puts $ip
    }
} 
```

这`->`确实是一个（奇怪的！）变量名，它将保存整个匹配的字符串；我们对它不感兴趣（只是括号部分），所以我们使用非字母来助记“这将到那里”（`ip`变量的子匹配）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T02:33:31.810

您的行包含“地址”（小写），但您尝试匹配“地址”（大写）。将
`-nocase`选项添加到 regexp 命令。此外，Tcl 正则表达式不能混合贪婪——第一个量词确定整个表达式是贪婪还是非贪婪（我现在找不到记录在哪里）。

```
regexp -nocase {IP Address.*(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})} $line -> ip 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:01:07.113

如果您的最终目标是获取主机的外部 IP，请使用 API 解决方案，例如来自 exip.org 的解决方案：

```
#!/usr/bin/env tclsh

set api http://api-nyc01.exip.org/?call=ip
if {[catch {exec curl --silent $api} output]} {
    puts "Failed to acquire external IP"
} else {
    puts "My external IP is $output"
} 
```

请访问他们的[API](http://www.exip.org/api)站点以获取更多信息，尤其是如果您居住在美国境外。此解决方案需要`curl`，您可能需要安装它。

# backbone.js - how to use includes/partials in Rails 3 Backbone ejs.jst files

> ID：13389917
> 
> 赞同：0
> 
> 时间：2012-11-15T00:43:59.860
> 
> 标签：backbone.js, ejs, jst

I'm using the backbone-on-rails gem with javascript (as opposed to coffeescript) to render views for a model. Everything works fine, but my view code is kind of long so I'd like to refactor things out to use includes/partials.

Heres' my code:

in my views/model_show.js file

```
AppName.Views.ModelNameShow = Backbone.View.extend({

  template: JST['main'],

  initialize: function() {
    this.render();
  },

  render: function() {
    this.model.fetch({async:false});
    $(this.el).html(this.template({ model: this.model }))
    $('#main_content').html(this.el);
  }

}); 
```

in my templates file I'd like to so something like this in templates/main.jst.ejs

```
<% if(this.model) { %>
    <h2> model found</h2> 
    <%- include top_section %>
    <%- include middle_section %>
    <%- include bottom_section %>
<% } else { %> 
    <h3>Claim not found <a href='#'>Back</a></h3> 
<% } %> 
```

where top_section would be a file under templates (like templates/top_section.jst.ejs)

Problem is I keep getting the following errors (firebug output).

> SyntaxError: missing ) in parenthetical [Break On This Error]
> 
> ...2> model found \n\t',(''+ include top_section ).replace(/&/g, '&').replace(/

which causes this error because the template isn't rendered

```
TypeError: this.template is not a function
[Break On This Error]   

$(this.el).html(this.template({ model: this.model })) 
```

I should mention that I've tried a few different syntaxes like the ones below, but those just throw different errors.

```
<%= include top_section %>
<%- include(top_section) %> 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:22:14.943

作为现在的权宜之计，我刚刚创建了一个模板哈希并在渲染中枚举它们。不理想，但目前有效。这是代码现在的样子。

视图/model_show.js 文件

```
AppName.Views.ModelNameShow = Backbone.View.extend({

  templates: {
    top_section: JST['top_section'],
    middle_section: JST['middle_section'],
    bottom_section: JST['bottom_section']
  },

  initialize: function() {
    this.render();
  },

  render: function() {
    this.model.fetch({async:false});
    var zuper = this;
    $.each(this.templates, function(key, value) {
      //iterate over each template and set the html for the div with id=key with template
      //For example $('#top_section).html(JST template for top_section)
      $('#' + key).html(zuper.templates[key]({ model: zuper.model }))
    })
  }

}); 
```

模板文件现在看起来像这样。

```
<% if(this.model) { %>
    <h2> model found</h2> 
    <div id="top_section"/>
    <div id="middle_section"/>
    <div id="include bottom_section"/>
<% } else { %> 
    <h3>Model not found <a href='#'>Back</a></h3> 
<% } %> 
```

正如我所说 - 不理想，但现在是一种功能性的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:18:57.160

在 EJS 中，partial 的正确语法是这样的：

```
<%= this.partial({url: 'templates/partial.ejs'}) %> 
```

# wpf - WPF Combobox SelectedIndex Property Binding Not working

> ID：13389926
> 
> 赞同：2
> 
> 时间：2012-11-15T00:44:56.417
> 
> 标签：wpf, wpf-4.0

I am trying to bind the SelectedIndex property of combobox to my ViewModel. Here is the code.

**Xaml:**

```
<ComboBox x:Name="BloodGroupFilter" SelectedIndex="{Binding Path=SelectedBloodGroupIndex, Mode=TwoWay}">
    <ComboBox.ItemsSource>
        <CompositeCollection>
            <ComboBoxItem Foreground="red" FontStyle="Italic">No Filter</ComboBoxItem>
            <CollectionContainer Collection="{Binding Source={StaticResource BloodGroupEnum}}"/>
        </CompositeCollection>
    </ComboBox.ItemsSource>
</ComboBox> 
```

**ViewModel**

```
private int _selectedBloodGroupIndex = 4;
public int SelectedBloodGroupIndex {
    get { return _selectedBloodGroupIndex; }
    set { 
        _selectedBloodGroupIndex = value; 
    }
} 
```

As you can see I am trying to set the SelectedIndex of combobox to "4". This doesn't happen and SelectedIndex is set to 0\. Also, when user selects a particular item of the combobox, I was expecting that the ViewModel's SelectedBloodGroupIndex property will update itself to the currently selected item of combobox, but this doesn't happen either. The ViewModel property is never invoked(both set and get). Any reasons why binding is failing for the above code.

**Update**

```
<UserControl.Resources>
    <ObjectDataProvider x:Key="BloodGroupEnum" MethodName="GetValues" ObjectType="{x:Type sys:Enum}">
        <ObjectDataProvider.MethodParameters>
            <x:Type TypeName="enums:BloodGroup" />
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>
</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T06:04:28.607

您需要在ViewModel的**SelectedBloodGroupIndex**的设置器中更改通知属性。我希望您确实对 PropertyChanged 事件有所了解。

```
<Window x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:myWindow="clr-namespace:WpfApplication4"
    Title="MainWindow" Height="800" Width="800" WindowStartupLocation="CenterScreen">

<Grid>
    <ComboBox SelectedIndex="{Binding SelectedIndex}">
        <ComboBoxItem Content="1"/>
        <ComboBoxItem Content="2"/>
        <ComboBoxItem Content="3"/>
        <ComboBoxItem Content="4"/>
        <ComboBoxItem Content="5"/>
    </ComboBox>
</Grid> 
```

```
 public partial class MainWindow :Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new MyViewModel();
    }
}

public class MyViewModel :INotifyPropertyChanged
{
    public MyViewModel()
    {
        SelectedIndex = 2;
    }
    private int _selectedIndex;
    public int SelectedIndex 
    { 
        get
        {
            return _selectedIndex;
        }
        set
        {
            _selectedIndex = value;
            Notify("SelectedIndex");
        }
  }

    public event PropertyChangedEventHandler PropertyChanged;

    private void Notify(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# .htaccess - 重写配置以将目录重定向到子域

> ID：13389929
> 
> 赞同：0
> 
> 时间：2012-11-15T00:45:13.190
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有 domain.com/forums 但我需要帮助将论坛重定向到 sub.domain.com

下面的作品，但我最终得到

```
sub.domain/forums/topic-name-here

RewriteEngine on
RewriteRule ^(.*)$ http://sub.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:53:30.030

试试这个：

```
RewriteEngine on
RewriteCond %{REQUEST_URI}  ^\/?forum\/.* 
RewriteRule ^\/?forum\/(.*)$ http://sub.domain.com/$1 [R=301,L] 
```

PS我使用“/？” 因为我忘记了 REQUEST_URI 格式:(

# java - 将国际字符从 MySQL 输出到 Java/Android

> ID：13389931
> 
> 赞同：0
> 
> 时间：2012-11-15T00:45:41.510
> 
> 标签：java, android, mysql, utf-8

假设有人使用这个字母：ë。他们将其输入到 EditText 框中，并正确存储在 MySQL 数据库中（通过 php 脚本）。但是要使用该特殊字符来获取该数据库字段会导致 Java/Android 中的输出为“null”。

看来我的数据库已正确设置和存储。但检索是个问题。我必须在 PHP 端解决这个问题还是在 Java/Android 中处理它？ **编辑**：*我不相信这与 PHP 方面有任何关系，所以我对 Java 方面更感兴趣。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:45:01.463

听起来类似于：[android, UTF8 - 如何确保 UTF8 用于共享首选项](https://stackoverflow.com/questions/9227763/android-utf8-how-do-i-ensure-utf8-is-used-for-a-shared-preference/14152728#14152728)

我怀疑问题发生在 Web 服务和 Android 应用程序之间的 Web 界面上。一方面发送 UTF-16 或 ISO 8859-1 字符，另一方面将其解释为 UTF-8（反之亦然）。确保：

*   来自 Android 的 Web 请求使用 UTF-8
*   Web 服务使用 UTF-8 进行回复。

与其他答案一样，使用 HTTP 调试代理检查 Android 应用程序和 Web 服务之间发送的字符是否符合您的预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:57:55.080

我建议将您的数据库访问代码提取到标准 Java 环境中，然后对其进行编译和测试。这将帮助您隔离问题。

通常即使存在编码问题，您也不会得到 null。检查其他问题以及是否引发其他异常。

如果您确定正确插入了字符串，则绝对不是 PHP 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:54:39.597

可能混淆了 UTF-8 和 UTF-16 或您可能用于存储这些国际字符的任何其他字符集。在 UTF-16 中，字符 ë 将存储为两个字节，第一个字节为空字节 (0x00)。如果这个双字节被错误地传回为 UTF-8，那么空字节将被视为字符串终止符的结尾；导致输出空值而不是国际字符。

首先，您需要 100% 确保您的国际字符正确存储在数据库中。在网站上的 php 页面中看到正确的结果并不能保证这一点；因为两个错误可以给你一个权利。过去，我经常看到数据库中错误存储的字符在网页或某些系统上仍然正确显示。这看起来没问题，直到您需要从另一个系统访问您的数据库，此时；因为你不能在第二个系统上重复同样的错误，所以一切都变得松散了。

# python - 从多个网站下载文件。

> ID：13389932
> 
> 赞同：1
> 
> 时间：2012-11-15T00:45:48.673
> 
> 标签：python, web, download

这是我的第一个 Python 项目，所以它非常基础和初级。我经常要为朋友清除病毒，并且我使用的免费程序经常更新。我没有手动下载每个程序，而是尝试创建一种简单的方法来自动化该过程。由于我也在尝试学习python，我认为这将是一个很好的练习机会。

问题：

我必须找到带有一些链接的 .exe 文件。我可以找到正确的 URL，但在尝试下载时出现错误。

有没有办法将所有链接添加到列表中，然后创建一个函数来遍历列表并在每个 url 上运行该函数？我已经用谷歌搜索了很多，但我似乎无法让它发挥作用。也许我没有朝着正确的方向思考？

```
import urllib, urllib2, re, os
from BeautifulSoup import BeautifulSoup

# Website List
sas = 'http://cdn.superantispyware.com/SUPERAntiSpyware.exe'
tds = 'http://support.kaspersky.com/downloads/utils/tdsskiller.exe'
mbam = 'http://www.bleepingcomputer.com/download/malwarebytes-anti-malware/dl/7/?1'
tr = 'http://www.simplysup.com/tremover/download.html'
urllist = [sas, tr, tds, tr]
urrllist2 = []

# Find exe files to download

match = re.compile('\.exe')
data = urllib2.urlopen(urllist)
page = BeautifulSoup(data)

# Check links
#def findexe():
for link in page.findAll('a'):
    try:
        href = link['href']
        if re.search(match, href):
            urllist2.append(href)

    except KeyError:
        pass

os.chdir(r"C:\_VirusFixes")
urllib.urlretrieve(urllist2, os.path.basename(urllist2)) 
```

如您所见，我已将功能注释掉，因为我无法使其正常工作。

我应该放弃列表并单独下载它们吗？我试图提高效率。

任何建议，或者如果您能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:57:28.800

除了[mikez302 的回答](https://stackoverflow.com/a/13389982/464744)之外，这里还有一种更易读的方式来编写您的代码：

```
import os
import re
import urllib
import urllib2

from BeautifulSoup import BeautifulSoup

websites = [
    'http://cdn.superantispyware.com/SUPERAntiSpyware.exe'
    'http://support.kaspersky.com/downloads/utils/tdsskiller.exe'
    'http://www.bleepingcomputer.com/download/malwarebytes-anti-malware/dl/7/?1'
    'http://www.simplysup.com/tremover/download.html'
]

download_links = []

for url in websites:
    connection = urllib2.urlopen(url)
    soup = BeautifulSoup(connection)
    connection.close()

    for link in soup.findAll('a', {href: re.compile(r'\.exe$')}):
        download_links.append(link['href'])

for url in download_links:
    urllib.urlretrieve(url, r'C:\_VirusFixes', os.path.basename(url)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:52:12.450

`urllib2.urlopen`是用于访问单个 URL 的函数。如果要访问多个，则应遍历列表。你应该这样做：

```
for url in urllist:
    data = urllib2.urlopen(url)
    page = BeautifulSoup(data)

    # Check links
    for link in page.findAll('a'):
        try:
            href = link['href']
            if re.search(match, href):
                urllist2.append(href)

        except KeyError:
            pass

    os.chdir(r"C:\_VirusFixes")
    urllib.urlretrieve(urllist2, os.path.basename(urllist2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T00:36:22.387

上面的代码对我不起作用，在我的情况下，这是因为页面通过脚本组装它们的链接，而不是将其包含在代码中。当我遇到这个问题时，我使用了以下代码，它只是一个刮板：

```
import os
import re
import urllib
import urllib2

from bs4 import BeautifulSoup

url = ''

connection = urllib2.urlopen(url)
soup = BeautifulSoup(connection) #Everything the same up to here 
regex = '(.+?).zip'       #Here we insert the pattern we are looking for
pattern = re.compile(regex)
link = re.findall(pattern,str(soup)) #This finds all the .zip (.exe) in the text
x=0
for i in link:
    link[x]=i.split(' ')[len(i.split(' '))-1] 
# When it finds all the .zip, it usually comes back with a lot of undesirable 
# text, luckily the file name is almost always separated by a space from the 
# rest of the text which is why we do the split
    x+=1  

os.chdir("F:\Documents")
# This is the filepath where I want to save everything I download

for i in link:
    urllib.urlretrieve(url,filename=i+".zip") # Remember that the text we found doesn't include the .zip (or .exe in your case) so we want to reestablish that. 
```

这不如先前答案中的代码有效，但它几乎适用于任何站点。

# excel - Excel中的if语句是怎样写的

> ID：13389934
> 
> 赞同：-1
> 
> 时间：2012-11-15T00:46:05.810
> 
> 标签：excel, math

我需要根据售出的门票数量将门票分成特定的列。

售票：100

```
 1-10    11-50   51-100  100+ (tickets sold)

            10      40      50      0 
```

所以很明显，它将限制 10 到第一列，40 到第二列，50 到第三列，其余的将在第 4 列中。它需要计算每列有多少已售出的门票需要进入特定列。

示例 2：

售票：33

```
 1-10    11-50   51-100  100+ (tickets sold)

            10      23      0      0 
```

我知道如何使用 javascript 来做到这一点，但我不太喜欢 excel 脚本。

我该如何写这个表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:04:50.063

假设 K1 包含票的数量并且第一行包含您可以使用的上限：

```
10                 50                             100
=K1-MAX(0; K1-A1)  =$K1-SUM($A2:A2)-MAX(0;$K1-B1) =$K1-SUM($A2:B2)-MAX(0;$K1-C1) 
```

第二列公式可以拉过去。

![在此处输入图像描述](../Images/7e3d5278f7b5d1ba87a8f31ec98f039b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:57:36.950

示例 1：

```
=IF(A2>10, 10, IF(A2>50, 50, "Less than 10 tickets sold")) 
```

示例 2：

```
=IF(AND(A2>1, A2<11), 10, IF(AND(A2>11, A2<51), 23, IF(A2>50, 0, "NA"))) 
```

# image - Mpi Scatter 动态分配二维数组（pgm 文件图像）

> ID：13389939
> 
> 赞同：2
> 
> 时间：2012-11-15T00:46:23.983
> 
> 标签：image, image-processing, 2d, mpi, scatter

我已经实现了一个运行良好的二维数组 Mpi scatter。我的意思是主处理器可以分散初始大阵列的二维部分。问题是当我使用动态分配的 2d 图像文件作为输入时，它不起作用。我想肯定是内存有问题。有没有办法动态获取大二维数组的二维部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T17:44:45.233

我有一个类似的问题，但它是动态分配的一维向量。解决了我的问题如下：

```
#include <stdio.h>
#include "mpi.h"

main(int argc, char** argv) {

    /* .......Variables Initialisation ......*/
    int Numprocs, MyRank, Root = 0;
    int index;
    int *InputBuffer, *RecvBuffer;
    int Scatter_DataSize;
    int DataSize;
    MPI_Status status;

    /* ........MPI Initialisation .......*/
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &MyRank);
    MPI_Comm_size(MPI_COMM_WORLD, &Numprocs);

    if (MyRank == Root) {
        DataSize = 80000;

        /* ...Allocate memory.....*/

        InputBuffer = (int*) malloc(DataSize * sizeof(int));

        for (index = 0; index < DataSize; index++)
            InputBuffer[index] = index;
    }

    MPI_Bcast(&DataSize, 1, MPI_INT, Root, MPI_COMM_WORLD);
    if (DataSize % Numprocs != 0) {
        if (MyRank == Root)
            printf("Input is not evenly divisible by Number of Processes\n");
        MPI_Finalize();
        exit(-1);
    }

    Scatter_DataSize = DataSize / Numprocs;
    RecvBuffer = (int *) malloc(Scatter_DataSize * sizeof(int));

    MPI_Scatter(InputBuffer, Scatter_DataSize, MPI_INT, RecvBuffer,
            Scatter_DataSize, MPI_INT, Root, MPI_COMM_WORLD);

    for (index = 0; index < Scatter_DataSize; ++index)
        printf("MyRank = %d, RecvBuffer[%d] = %d \n", MyRank, index,
                RecvBuffer[index]);

    MPI_Finalize();

} 
```

这个链接有帮助我的例子： [http ://www.cse.iitd.ernet.in/~dheerajb/MPI/Document/hos_cont.html](http://www.cse.iitd.ernet.in/~dheerajb/MPI/Document/hos_cont.html)

希望这可以帮助。

# javascript - Javascript 正则表达式中的 g 和 m 修饰符有什么区别？

> ID：13389940
> 
> 赞同：3
> 
> 时间：2012-11-15T00:46:34.320
> 
> 标签：javascript, regex

在 javascript 正则表达式中，您可以为全局添加一个“g”修饰符，为多个添加一个“m”。它们之间有什么区别，或者它们是同一个东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T00:48:52.300

`m`不代表“multiple”，而是代表“multiline”。它分别在行的开头和结尾进行匹配（而不仅仅是字符串的开头和结尾）`^`。`$`

好吧，`g`实际上意味着“全局”，因此正则表达式引擎在第一个匹配之后继续寻找更多匹配。

[进一步阅读正则表达式修饰符。](http://www.regular-expressions.info/modifiers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-22T02:37:23.200

`/m`可以考虑为`/g`.

这是一个简单的测试：

```
hello my darling 
you are so sweat
and hello my beauty
hello my lady
you are so kind
hello my heartbeat
you drum like a spring wind 
```

`/^hello/g`: 只会匹配一个子字符串，就是开头的那个，整个字符串的“hello”。

> `/g`用于匹配从开头“hello”到结尾“wind”的整个字符串。

`/^hello/gm`: 将单独匹配 1,4,6 行。

> `/gm`也用于匹配整个字符串，但它会通过换行符分割整个字符串 > 并且它将使用给定的模式（逐行）测试每一行 > 而不是简单地测试整个字符串的开头到结尾。

希望它会有所帮助。

# hadoop - 从地图函数hadoop写入文本输出

> ID：13389946
> 
> 赞同：1
> 
> 时间：2012-11-15T00:47:24.397
> 
> 标签：hadoop

输入 ：

a,b,c,d,e

q,w,34,r,e

1,2,3,4,e

在映射器中，我将获取最后一个字段的所有值，并且我想发出 (e,(a,b,c,d)) 即它发出 (key, (该行中的其余字段))。

帮助表示赞赏。

当前代码：

```
public static class Map extends Mapper<LongWritable, Text, Text, Text> {
   private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
        String line = value.toString(); // reads the input line by line   
        String[] attr = line.split(","); // extract each attribute values from the csv record
         context.write(attr[argno-1],line); // gives error seems to like only integer? how to override this?
        }
    }
 } 
 public static class Reduce extends Reducer<Text, IntWritable, Text, IntWritable> {

    public void reduce(Text key, Iterable<IntWritable> values, Context context) 
      throws IOException, InterruptedException {
        // further process , loads the chunk into 2d arraylist object for processing
    }
      public static void main(String[] args) throws Exception {
    String line; 
    String arguements[];
    Configuration conf = new Configuration();

        // compute the total number of attributes in the file
    FileReader infile = new FileReader(args[0]);
    BufferedReader bufread = new BufferedReader(infile);
    line = bufread.readLine();
    arguements = line.split(","); // split the fields separated by comma
    conf.setInt("argno", arguements.length); // saving that attribute value 
    Job job = new Job(conf, "nb");
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);
        job.setMapperClass(Map.class); /* The method setMapperClass(Class<? extends Mapper>) in the type Job is not applicable for the arguments (Class<Map>) */
    job.setReducerClass(Reduce.class);
    job.setInputFormatClass(TextInputFormat.class);
    job.setOutputFormatClass(TextOutputFormat.class);
    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));
    job.waitForCompletion(true);
 }` 
```

请注意我遇到的错误（见评论）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:19:07.013

所以这很简单。首先解析您的字符串以获取密钥并将该行的其余部分作为值传递。然后使用身份归约器，它将所有与列表相同的键值组合在一起作为您的输出。它应该是相同的格式。

所以你的地图功能将输出：

e, (a,b,c,d,e)

e, (q,w,34,r,e)

e, (1,2,3,4,e)

然后在身份减少之后它应该输出：

e, {a,b,c,d,e; q,w,34,r,e; 1,2,3,4,e}

```
public static class Map extends Mapper<LongWritable, Text, Text, Text> {
   private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
        String line = value.toString(); // reads the input line by line   
        String[] attr = line.split(","); // extract each attribute values from the csv record
         context.write(attr[argno-1],line); // gives error seems to like only integer? how to override this?
        }
    }

    public static void main(String[] args) throws Exception {
        String line; 
        String arguements[];
        Configuration conf = new Configuration();

        // compute the total number of attributes in the file
        FileReader infile = new FileReader(args[0]);
        BufferedReader bufread = new BufferedReader(infile);
        line = bufread.readLine();
        arguements = line.split(","); // split the fields separated by comma
        conf.setInt("argno", arguements.length); // saving that attribute value 
        Job job = new Job(conf, "nb");
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class);
        job.setMapperClass(Map.class); 
        job.setInputFormatClass(TextInputFormat.class);
        job.setOutputFormatClass(TextOutputFormat.class);
        FileInputFormat.addInputPath(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));
        job.waitForCompletion(true);
 } 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-01-09T21:47:12.050

找到替代逻辑。实施、测试和验证。

# iphone - 如何在我的 iphone 应用程序中每隔一段时间补充游戏币。

> ID：13389947
> 
> 赞同：2
> 
> 时间：2012-11-15T00:47:28.513
> 
> 标签：iphone, objective-c, ios, xcode

我正在用 X Code 制作游戏应用程序。用户在玩游戏时会赢或输“硬币”。我了解 Apple 要求您确保他们最终免费获得更多的货币，如果它们用完。我将在 IAP 中拥有。但是我想花一些时间或其他方法每天给他们说 100 个额外的硬币。因此，如果他们用完，他们会回来并有更多的货币可以玩。

我很新，如果有人能提出一个简单的方法来做到这一点，我将不胜感激。

目前，我将货币存储在一个名为“硬币”的 long long 变量中。我还使用 NSUserDefalts 来存储“硬币”的数量。我将把它用于 IAP。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:51:03.467

将您最后一次向用户提供免费硬币的时间以及剩余硬币存储在用户默认值中。每当您检查硬币的剩余“余额”时，请查看该附加变量，并将其与当前时间进行比较。如果差值大于 24 小时，则给用户额外的硬币，并将新值存储在默认值中。

# javascript - HTML/JavaScript 使用输入字段 + 按标记匹配删除 DIV

> ID：13389950
> 
> 赞同：-1
> 
> 时间：2012-11-15T00:47:53.237
> 
> 标签：javascript, jquery, html, dynamic

我试图在输入字母时从文档中删除 div，但我似乎无法理解逻辑和/或语法。目前，我用来执行此操作的代码在 html 文档中被注释掉，其工作版本删除了在其下方未注释的内容。我所有的代码都在下面。对此的任何帮助都会很棒。

同样，我试图根据用户输入的内容删除一个 div 元素。

[HTML](http://pastebin.com/7us0aBb6)

[CSS](http://pastebin.com/NKhaQ6UC)

[JavaScript](http://pastebin.com/EsfYFt93)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:09:30.827

我不太确定你到底要做什么，因为那个代码太难破译了。

这里有一些代码将根据 keyup 删除一个 div。它会删除包含与您键入的相同字母的 div。不确定这是否与您想要的相似，但希望这会有所帮助：

[http://jsfiddle.net/h2fa4/1/](http://jsfiddle.net/h2fa4/1/)

**HTML：**

```
<html>
<head><title>Remove Divs</title></head>
<body>
    Enter a character to remove the div with the corresponding letter:
        <input id="in" />
    <br />
    <div id="parent">
        <div>A div</div>
        <div>B div</div>
        <div>C div</div>
        <div>D div</div>
        <div>A div</div>
        <div>B div</div>
        <div>C div</div>
        <div>D div</div>
        <div>A div</div>
        <div>B div</div>
        <div>C div</div>
        <div>D div</div>
        <div>A div</div>
        <div>B div</div>
        <div>C div</div>
        <div>D div</div>
        <div>A div</div>
        <div>B div</div>
        <div>C div</div>
        <div>D div</div>
    </div>
</body>
</html> 
```

**jQuery代码：**

```
$("#in").keyup(function(event) {
    var val = String.fromCharCode(event.which);
    $("#parent div:contains('" + val + "')").remove();
}); 
```

# javascript - 使用 Grunt Copy 任务时文件树的展平

> ID：13389952
> 
> 赞同：4
> 
> 时间：2012-11-15T00:47:59.043
> 
> 标签：javascript, node.js, gruntjs

不确定我是否遗漏了什么，但我为 grunt-contrib-copy 任务设置了以下 grunt 设置。

```
copy: {
  build: {
    files: {
      "server-dist/": "server/**/*.!(coffee)",
      "client-dist/": "client/**/*.!(coffee)"
    }
  }
} 
```

正如我期望的那样，client-dist 复制文件树递归地运行，但 server-dist 所有子文件夹都被展平到基本文件夹。任何想法为什么会发生这种情况？这是输入/输出

```
server/
  views/
    errors/
      404.jade
    layouts/
      base.jade 
```

变成

```
server/
  errors/
  layouts/
    base.jade 
```

视图文件夹被完全炸毁。还有一件事……当我删除 !(coffee) 时，它可以工作，但我需要排除咖啡文件，因为我有一个 grunt-coffee watch 任务正在运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-04T08:54:23.963

A followup to zacks comment:

```
copy: {  
    mytask: {  
        files: [  
        {expand:true, cwd:'dev-js/abc/', dest:'js/test/', src:['def.js']}  
        ]  
    }  
} 
```

This copies the file `./dev-js/abc/def.js` to `./js/test/def.js` - at least on my 0.4.1 version. Zacks comment and the link included was very helpful, especially the fact, that `basePath` has been replaced.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:55:30.920

显然，该`grunt-contrib-copy`任务有一个复杂的逻辑，它试图自动检测复制源文件的基本目录（参见[相关问题](https://github.com/gruntjs/grunt-contrib-copy/issues/12)）

解决方案是明确指定[`basePath`](https://github.com/gruntjs/grunt-contrib-copy/#basepath-string)选项：

```
copy: {
  build: {
    files: {
      "server-dist/": "server/**/*!(.coffee)"
    },
    options: {
      basePath: 'server' // base directory in the source path
    }
  }
} 
```

**P.S.** I'm not sure, however, why removing `!(.coffee)` changes the behaviour for you. I tried the same on my local machine and get the same results when specifying `"server/**/*"` instead of `"server/**/*.!(coffee)"` (i.e. the `views` folder is skipped)

# c# - 使用 override void WriteEndElement() 时如何使用 XmlWriterSettings()？

> ID：13389960
> 
> 赞同：10
> 
> 时间：2012-11-15T00:49:14.570
> 
> 标签：c#, xml, serialization

我正在使用不导入缩写的空 xml 元素的旧应用程序。例如：

坏空：

```
<foo /> 
```

好空：

```
<foo></foo> 
```

我知道实现这一点的解决方案，我现在将介绍：

```
public class XmlTextWriterFull : XmlTextWriter
{

    public XmlTextWriterFull(Stream stream, Encoding enc) : base(stream, enc)
    {
    }

    public XmlTextWriterFull(String str, Encoding enc) : base(str, enc) 
    {
    }

    public override void WriteEndElement()
    {
        base.WriteFullEndElement();
    }
} 
```

和客户端代码：

```
 var x_settings = new XmlWriterSettings();
                    x_settings.NewLineChars = Environment.NewLine;
                    x_settings.NewLineOnAttributes = true;
                    x_settings.NewLineHandling = NewLineHandling.Replace;
                    x_settings.CloseOutput = true;
                    x_settings.Indent = true;
                    x_settings.NewLineOnAttributes = true;

                    //var memOut = new MemoryStream();
                    var writer = new XmlTextWriterFull(outputFilename, Encoding.UTF8); //Or the encoding of your choice
                    var x_serial = new XmlSerializer(typeof(YOUR_OBJECT_TYPE));
                    x_serial.Serialize(writer, YOUR_OBJECT_INSTANCE);

                    writer.Close(); 
```

但是，如果您仔细观察`XmlWriterSettings`，客户端代码中从未使用过。因此，xml 输出的格式非常糟糕。我的问题是：我如何调整上面的代码来接受`XmlWriterSettings`？

使用工厂创建方法和密封/内部/抽象类使其难以实现覆盖。

我会接受另一种解决方案，我不同意我的上述解决方案。

*   解决方法

第 1 步：在您的解决方案中创建以下类：

```
public class XmlTextWriterFull : XmlTextWriter
{
    public XmlTextWriterFull(TextWriter sink) : base(sink)
    {
        Formatting = Formatting.Indented;
    }

    public override void WriteEndElement()
    {
        base.WriteFullEndElement();
    }
} 
```

第 2 步：添加以下客户端代码。确保将 YOUR_OBJECT_TYPE 和 YOUR_OBJECT_INSTANCE 替换为您正在使用的类和实例：

```
TextWriter streamWriter = new StreamWriter(outputFilename);
var writer = new XmlTextWriterFull(streamWriter);

var x_serial = new XmlSerializer(typeof (YOUR_OBJECT_TYPE));
x_serial.Serialize(writer, YOUR_OBJECT_INSTANCE);

writer.Close(); 
```

上面的解决方法将产生以下空 xml 元素格式：

```
<foo>
</foo> 
```

此解决方法的问题在于它添加了换行符（请注意元素位于不同的行上）。这对您来说可能是可以接受的，但会导致我的旧应用程序出现问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T10:18:54.913

这个怎么样。

`XmlWrappingWriter`从[http://www.tkachenko.com/blog/archives/000585.html](http://www.tkachenko.com/blog/archives/000585.html)获取很棒的课程（为简洁起见，我省略了代码）。

有了它，我们可以创建一个子类，如下所示（与您原来的非常相似）：

```
public class XmlTextWriterFull2 : XmlWrappingWriter
{
    public XmlTextWriterFull2(XmlWriter baseWriter)
        : base(baseWriter)
    {
    }

    public override void WriteEndElement()
    {
        base.WriteFullEndElement();
    }
} 
```

然后可以像这样调用它（再次非常相似）：

```
var x_settings = new XmlWriterSettings();
x_settings.NewLineChars = Environment.NewLine;
x_settings.NewLineOnAttributes = true;
x_settings.NewLineHandling = NewLineHandling.None;
x_settings.CloseOutput = true;
x_settings.Indent = true;
x_settings.NewLineOnAttributes = true;

using (XmlWriter writer = XmlWriter.Create(outputFilename, x_settings))
{
    using (XmlTextWriterFull2 xmlTextWriterFull = new XmlTextWriterFull2(writer))
    {
        var x_serial = new XmlSerializer(typeof(YOUR_OBJECT_TYPE));
        x_serial.Serialize(xmlTextWriterFull, YOUR_OBJECT_INSTANCE);
    }
} 
```

在我的例子中，一个元素之前被渲染为

```
<Foo>
</Foo> 
```

变成了

```
<Foo></Foo> 
```

* * *

正如您在问题中提到的那样，这实际上是一个非常棘手的问题，因为一切都被密封/内部等，使得覆盖相当困难。我认为我最大的问题是试图让一个`XmlWriter`接受`XmlWriterSettings`：除了这种方法，我找不到让原件`XmlTextWriterFull`尊重给定的方法`XmlWriterSettings`。

[MSDN](http://msdn.microsoft.com/en-us/library/a09119h4.aspx)指出这种方法：

```
XmlWriter.Create(XmlWriter, XmlWriterSettings) 
```

可用于应用`XmlWriterSettings`到`XmlWriter`. 我无法让它像我想要的那样工作（例如，缩进从来没有工作过），并且在反编译代码时，似乎所有设置都与这个特定方法一起使用，因此为什么我的调用代码只是传入（`outputFile`某种流也可以工作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-05T02:58:36.163

您在问题中提供的解决方案添加了额外的换行符（启用缩进时），因为我们告诉作者将此元素视为有子元素。

这是我如何修改您的解决方法以动态操作缩进以避免那些额外的换行符。

```
public class XmlTextWriterFull : XmlTextWriter
{
    public XmlTextWriterFull(TextWriter sink)
        : base(sink)
    {
        Formatting = Formatting.Indented;
    }

    private bool inElement = false;

    public override void WriteStartElement(string prefix, string localName, string ns)
    {
        base.WriteStartElement(prefix, localName, ns);

        // Remember that we're in the process of defining an element.
        // As soon as a child element is closed, this flag won't be true anymore and we'll know to avoid messing with the indenting.
        this.inElement = true;
    }

    public override void WriteEndElement()
    {
        if (!this.inElement)
        {
            // The element being closed has child elements, so we should just let the writer use it's default behavior.
            base.WriteEndElement();
        }
        else
        {
            // It looks like the element doesn't have children, and we want to avoid emitting a self-closing tag.
            // First, let's temporarily disable any indenting, then force the full closing element tag.
            var prevFormat = this.Formatting;
            this.Formatting = Formatting.None;
            base.WriteFullEndElement();
            this.Formatting = prevFormat;
            this.inElement = false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-19T17:19:22.797

以下代码片段强制在同一行上打印结束标记（对不起 vb 版本，使用 C# 重写应该很容易）：

```
Imports System.Xml
Imports System.IO
Public Class CustomXmlTextWriter
    Inherits XmlTextWriter

    Public Sub New(ByRef baseWriter As TextWriter)
        MyBase.New(baseWriter)
        Formatting = Xml.Formatting.Indented
    End Sub

    Public Overrides Sub WriteEndElement()
        If Not (Me.WriteState = Xml.WriteState.Element) Then
            MyBase.WriteEndElement()
        Else
            Formatting = Xml.Formatting.None
            MyBase.WriteFullEndElement()
            Formatting = Xml.Formatting.Indented
        End If
    End Sub

End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:58:43.627

另外的选择。

```
public class XmlCustomTextWriter : XmlTextWriter
{
    private TextWriter _tw = null;

    public XmlCustomTextWriter(TextWriter sink)
        : base(sink)
    {
        _tw = sink;
        Formatting = Formatting.Indented;
        Indentation = 0;
    }

    public void OutputElement(string name, string value)
    {
        WriteStartElement(name);
        string nl = _tw.NewLine;
        _tw.NewLine = "";
        WriteString(value);
        WriteFullEndElement();
        _tw.NewLine = nl;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-09T08:00:12.817

把它留在这里以防有人需要它；因为上面的答案都没有为我解决，或者看起来有点矫枉过正。

```
 FileStream fs = new FileStream("file.xml", FileMode.Create);
    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Indent = true;
    XmlWriter w = XmlWriter.Create(fs, settings);
    w.WriteStartDocument();
    w.WriteStartElement("tag1");

        w.WriteStartElement("tag2");
        w.WriteAttributeString("attr1", "val1");
        w.WriteAttributeString("attr2", "val2");
        w.WriteFullEndElement();

    w.WriteEndElement();
    w.WriteEndDocument();
    w.Flush();
    fs.Close(); 
```

诀窍是设置***XmlWriterSettings.Indent = true***并将其添加到***XmlWriter***。

# ***编辑：***

或者，您也可以使用

```
w.Formatting = Formatting.Indented; 
```

而不是添加 XmlWriterSettings。

# php - Zend 模型中的构造函数

> ID：13389961
> 
> 赞同：0
> 
> 时间：2012-11-15T00:49:34.590
> 
> 标签：php, zend-framework, constructor

在我的模型中，我正在扩展 Zend_Db_Table_Abstract。在里面，我有一个`protected $_name = 'table_name'`. 现在，如果我定义一个构造函数和一个私有变量`private $_var`并在构造函数中定义它，模型就不再工作了！当我打电话`$this->createRow()`或任何事情时，什么都没有发生！为什么这个构造函数会这样做？！

这就是我所拥有的：

```
 <?php
 class myClass extends Zend_Db_Table_Abstract
 {
      protected $_name = 'table_name';
      private $_var;

      public function __construct($var)
      {
           $this->_var = $var;
      }

      public function getById($id)
      {
           $select = $this->select()->where('id =?',$id);
           return $this->fetchRow($select);
      }
 } 
```

这不行！如果我删除 __construct() 和私有变量，那么它可以工作！为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:50:37.530

如果你重写 的构造函数`Zend_Db_Table_Abstract`，你可能应该调用父构造函数：

```
class MyClass extends Zend_Db_Table_Abstract
{
      protected $_name = 'table_name';
      private $_var;

      public function __construct($var)
      {
           $this->_var = $var;
           parent::__construct(); // add this
      }

      // the rest...
} 
```

父构造函数调用一些受保护的方法`_setup()`（依次调用 `_setupDatabaseAdapter()`and `_setupTableName()`）和`init()`（在父构造中是空的，但您可以使用它在对象实例化的最后一步添加一些处理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:41:28.557

提问时你必须更清楚。如果需要，请编写代码.. 没有人可以仅凭 2 条信息来确定您的应用程序出了什么问题.. 话虽如此..

首先你应该在构造函数之外定义你的变量，如果你必须在构造函数内部初始化。您的模型不会神奇地知道存在连接到您的数据库的 db 抽象类。您必须在模型构造函数中创建一个对象。

这是代码

```
// DB Abstract class
class Application_Model_DbTable_myTable extends Zend_Db_Table_Abstract
{

protected $_name = 'myTable';

}

// Your model class
class Application_Model_myModel {

private $_var;

public function __construct() {
    $this->_var = new Application_Model_DbTable_myTable();
 }
} 
```

希望这就是你要找的东西.. 也是我从你的问题中理解的唯一东西。

丁斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:20:58.147

其他答案中已暗示但未说明...您的类失败了，因为您覆盖了构造函数并且没有调用父构造函数，因此没有正确创建对象。

通常在构造这些类时，它们是通过 setOptions() 构造的，它在构造函数中接受一个数组。因此，如果您真的必须重写构造函数，您可以尝试以下操作：

```
public function __construct($var, $config = array())
 {
      $this->_var = $var;
      parent::__construct($config);      
 } 
```

现在您应该能够设置变量并传递您需要传递的任何配置值。

但是，如果可能的话，最好避免使用构造函数并使用提供的`init()`方法。

```
<?php
 class myClass extends Zend_Db_Table_Abstract
 {
      protected $_name = 'table_name';
      private $_var;

      public function init()
      {
           $this->_var = $var;
      }

      public function getById($id)
      {
           $select = $this->select()->where('id =?',$id);
           return $this->fetchRow($select);
      }
 } 
```

# algorithm - 如何在其他两个点之间找到某个点的位置？

> ID：13389962
> 
> 赞同：2
> 
> 时间：2012-11-15T00:49:35.480
> 
> 标签：algorithm, math, point

假设我在笛卡尔坐标平面上有两个点，`A`并且`B`，其`x`和`y`坐标是双精度`float`s。如何找到`C`它们之间距离的任意百分比的点的位置？

换句话说，以下方法中的内容是什么而不是“ `//Do magic to C`”？请记住，`A`and`B`每个都由两个`double`s 组成，它们分别代表它们的`x`和`y`坐标。

```
public static findProgressPoint(DoublePoint A, DoublePoint B, double position)
{
  if (position > 1 || position < 0) //Ensure that position is between 0 and 1, inclusive
    position = position - (int)position;
  DoublePoint C = new DoublePoint(0.0, 0.0);
  //Do magic to C
  return C;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:54:08.810

这应该有效：

```
double px = x1 + (x2-x1)*position;
double py = y1 + (y2-y1)*position;
DoublePoint C = new DoublePoint(px, py); 
```

`px`是与的值成比例的距离`x`之间的坐标；是对应的坐标。`x1``x2``x1``position``py``y`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:55:24.533

```
DoublePoint C = new DoublePoint( position * (A.x + B.x), position * (A.y + B.y) ); 
```

# ajax - 选择单选按钮时加载特定的表单字段

> ID：13389963
> 
> 赞同：0
> 
> 时间：2012-11-15T00:49:57.777
> 
> 标签：ajax, forms, yii

我是 Yii 的一个相当新的用户.. 使用它不到 2 个月.. 我正在尝试做一个注册表单，在加载时它只显示 2 个单选按钮（比如选择 1 是个人，选择 2 是组织)，当用户选择一个选项时，我想使用 ajax 动态显示与他的选择相对应的字段。

注意：我使用的是 yii-user 扩展，我打算使用同一张表来存储个人和组织用户，因为它们只有 3 个属性不同。

我已经被这个问题困扰了2天，无法解决它..

这是我的代码片段：registration.php（查看）

```
<?php $this->pageTitle=Yii::app()->name . ' - '.UserModule::t("Registration"); 
$this->breadcrumbs=array( 
        UserModule::t("Registration"), 
); 
?> 

<h1><?php echo UserModule::t("Registration"); ?></h1> 

<?php if(Yii::app()->user->hasFlash('registration')): ?> 
<div class="success"> 
<?php echo Yii::app()->user->getFlash('registration'); ?> 
</div> 
<?php else: ?> 

<div class="form"> 
<?php $form=$this->beginWidget('UActiveForm', array( 
        'id'=>'registration-form', 
        'enableAjaxValidation'=>true, 
        'disableAjaxValidationAttributes'=>array('RegistrationForm_verifyCode'), 
        'clientOptions'=>array( 
                'validateOnSubmit'=>true, 
        ), 
        'htmlOptions' => array('enctype'=>'multipart/form-data'), 
)); ?> 

        <p class="note"><?php echo UserModule::t('Fields with <span class="required">*</span> are required.'); ?></p> 

        <?php echo $form->errorSummary(array($model,$profile)); ?> 

    <div class="row"> 
    <?php echo $form->radioButtonList($model, 'profile_type', array(0=>'Person',1=>'Company'),array('separator'=>'', 'labelOptions'=>array('style'=>'display:inline'), 'onclick' =>CHtml::ajax(array("type"=>"GET", "url"=>array("registration/add"), "data"=>array('test'=>'js:this.value'), "update"=>"#test")))); ?> 

        </div> 
```

注册控制器.php

```
public function actionAdd() {  
            if(Yii::app()->request->isAjaxRequest){   
                    $this->renderPartial("/user/test",array('model'=>$model),false,true);    
                    Yii::app()->end();               
            } 
    } 
```

测试.php

```
<?php 
$val = $_GET['test']; 

if($val == 1){ 
  echo "yes"; 
//nothing added yet 
} 
else{ 
        echo "no"; 
        ?> 
  <div class="row">  
    <?php echo $form->labelEx($model,'username'); ?> 
        <?php echo $form->textField($model,'username'); ?> 
        <?php echo $form->error($model,'username'); ?> 
  </div> 
<div class="row"> 
        <?php echo $form->labelEx($model,'email'); ?> 
        <?php echo $form->textField($model,'email'); ?> 
        <?php echo $form->error($model,'email'); ?> 
        </div> 

        <div class="row"> 
        <?php echo $form->labelEx($model,'password'); ?> 
        <?php echo $form->passwordField($model,'password'); ?> 
        <?php echo $form->error($model,'password'); ?> 
        <p class="hint"> 
        <?php echo UserModule::t("Minimal password length 4 symbols."); ?> 
        </p> 
        </div> 

        <div class="row"> 
        <?php echo $form->labelEx($model,'verifyPassword'); ?> 
        <?php echo $form->passwordField($model,'verifyPassword'); ?> 
        <?php echo $form->error($model,'verifyPassword'); ?> 
        </div> 
<?php 

} 
?> 
```

当我选择 Person (choice 0) 时收到的错误如下： 致命错误：在 test.php 中的非对象上调用成员函数 labelEx()

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:46:39.760

确凿的证据就是错误`Fatal error: Call to a member function labelEx() on a non-object in test.php`——它告诉你这`labelEx()`不是一种方法。查看您的`view.php`，您可以看到`labelEx()`被称为方法的`$form`。

问题是当视图`test.php`被渲染时，它不知道`$form`你在`registration.php`. `test.php`只知道你传递给它的参数（在这种情况下，只有`$model`）。

而不是使用`$form->method()`，只需`CActiveForm::method`在您的视图中使用，例如：

```
 <div class="row">  
    <?php 
        echo CActiveForm::labelEx($model,'username')
        echo CActiveForm::textField($model,'username');
        echo CActiveForm::error($model,'username');
    ?>
  </div> 
```

我还将您连续的 PHP 块组合成一个块，以便于阅读/解析/等。

# python-3.x - 创建双模网络

> ID：13389964
> 
> 赞同：1
> 
> 时间：2012-11-15T00:49:58.353
> 
> 标签：python-3.x, social-networking

使用 Python 3.2 我正在尝试将数据从 CSV 文件转换为双模式网络。对于那些不知道这意味着什么的人来说，这个想法很简单：

这是我的数据集的片段：

```
Project_ID    Name_1    Name_2    Name_3    Name_4 ... Name_150
    1           Jean      Mike
    2           Mike
    3           Joe       Sarah     Mike      Jean        Nick
    4           Sarah     Mike
    5           Sarah     Jean      Mike      Joe 
```

我想创建一个 CSV，将 Project_ID 放在 CSV 的第一行，并将每个唯一名称放在第一列（单元格 A1 为空白），然后如果该人从事给定项目，则在 i,j 单元格中放置一个 1。注意：我的数据有全名（中间首字母），没有两个人有相同的名字，所以不会有任何重复。

最终的数据输出如下所示：

```
 1             2              3              4              5 
Jean        1             0              1              0              1
Mike        1             1              1              1              1
Joe         0             0              1              0              1
Sarah       0             0              1              1              1
...        ...           ...            ...            ...            ...
Nick        0             0              1              0              0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:55:16.317

从使用[CVS 阅读器开始](http://docs.python.org/2/library/csv.html#reader-objects)

```
import csv

with open('some.csv', 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        print row 
```

请注意，行将读取为每行的数组。

可能应该在开始之前创建输出数组。从[这个问题](https://stackoverflow.com/a/9126397/544198)开始，您可以这样做

```
buckets = [[0 for col in range(5)] for row in range(10)] 
```

# php - 使用 cURL 在变量中发布常量

> ID：13389966
> 
> 赞同：0
> 
> 时间：2012-11-15T00:50:05.933
> 
> 标签：php, mysql, curl

晚上好各位溢出者，我有一个小问题，我正在尝试解决，但无法解决，我希望你能提供帮助。

我有一个通过 cURL 将字符串发送到网站的脚本。这完全符合预期，并且网页响应正常。我的问题是我想利用的网站上有一组定义（为了说明目的，下面的示例：）。我已经添加了对存储定义的文件的引用，这就像一个魅力。

> 定义（'TABLE_COUNTER'，'计数器'）；

假设（除了所有安全性和胡言乱语）我要发送到的网站上的脚本有一个简单的：

> mysql_query($_POST['aaa']);

其中 $_POST['aaa'] 将是一个有效的查询。如果在相关网站上我要执行以下操作，结果将执行：

> mysql_query("SELECT * FROM" .TABLE_COUNTER);
> 
> 翻译成：
> 
> mysql_query("SELECT * FROM 计数器");

但是，我似乎无法在网站端获取脚本来执行任何定义了常量的 sqlquery。任何帮助将不胜感激（我在这里失去了很多头发！）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:22:35.103

这样做的方法是`eval`：

```
$myquery_string = 'mysql_query('.$_POST['aaa'].');';
eval($myquery_string); 
```

但是，我真的不建议这样做，因为这意味着表单输入可以包含几乎有效的 PHP 代码，并且它将由您的脚本执行。这比典型的 SQL 或 XSS 注入更糟糕。

此外，在填写表格时，用户必须在查询的文字部分周围包含所有必要的引号。

更好的解决方案是为您的输入定义模板语言，并让 PHP 脚本用适当的常量替换模板占位符。但我不会为你写这个。

# ruby-on-rails - 在 Rails 的 config/initializers/constants.rb 中更改时全局值不会更新

> ID：13389968
> 
> 赞同：0
> 
> 时间：2012-11-15T00:50:09.783
> 
> 标签：ruby-on-rails, constants, global, config, initializer

我正在开发一个 Rails 项目，我正在尝试更新一些用于应用程序中选择字段的全局数组。我进入了所有数组定义所在的 constants.rb 文件。我将值修改为我想要的。但是当我去应用程序查看更改时，它们似乎没有更新。

我环顾四周，据我所知，更新这些值的唯一方法是重新启动服务器。但我只能通过 SSH 访问服务器。这是真的？还是有另一种方法来刷新这些值？我尝试刷新浏览器缓存，但这并没有什么不同。任何见解将不胜感激，感谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:25:12.930

是的，您需要重新启动服务器才能使这些更改生效。根据设置的方式，“服务器”可能意味着不同的东西。它可能是 Apache、nginx、unicorn、thin 或其他东西。

如果它具有像Passenger 那样的超时功能，它也可能最终“重新启动”自己。

胡思乱想……是否有任何源代码控制和部署过程？这些天我没有看到很多人直接在服务器上更改文件......我提到它以防万一，因为下次部署它时您的更改将丢失。

# java - 如何让一个简单的 Android 应用在按下按钮后显示一个数字

> ID：13389974
> 
> 赞同：1
> 
> 时间：2012-11-15T00:50:37.310
> 
> 标签：java, android

我正在尝试根据 Android Developers 网站上的第一个教程制作一个非常简单的 Android 应用程序，但遇到了障碍。这可能是一件非常愚蠢的事情，但我的代码可以编译并且对我来说看起来不错，但没有做它应该做的事情。这是我的 MainActivity Java。在你把你的体重放在地球上之后，它应该在火星上显示你的体重。但是，当我按下“发送”按钮时，什么也没有发生。

```
 public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
}
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
// Do something in response to button
EditText editText = (EditText) findViewById(R.id.editText1);
int weight = Integer.parseInt(editText.getText().toString());
double fweight = mweight(weight);
String finalmessage = Double.toString(fweight);
TextView textView = new TextView(this);
textView.setTextSize(40);
textView.setText(finalmessage);
}
public double mweight(int eweight) {
    double mass, mars_g = 3.711;
    mass = eweight / 9.780327;
    return mass * mars_g;
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:04:24.730

您需要将新的 TextView 附加到当前布局`View#addView()`或将整个布局切换到您的 TextView `Activity#setContentView()`：

```
TextView textView = new TextView(this);
textView.setTextSize(40);
textView.setText(finalmessage);
setContentView(textView); // Add me! 
```

为了清楚起见，这假设您已经`android:onClick="sendMessage"`在 Button 的 XML 中使用过。

# c++ - C++ 动态地将类成员定义为对象或对另一个成员的引用

> ID：13389980
> 
> 赞同：1
> 
> 时间：2012-11-15T00:51:43.027
> 
> 标签：c++, pointers, dynamic, reference, constructor

假设我有一个类如下：

```
class Solution {    
public:    
    std::vector<double> x;
} 
```

假设我有一个功能如下：

```
void function(Solution& sol) {
    // do some calculations on the solution vector
} 
```

在某些情况下，我会想`function`直接使用 vector 执行计算`x`。但是，在某些情况下，我会希望使用由 vector 的映射生成的另一个向量来执行计算`x`。

考虑到这些可能的情况，在类中引入一个附加成员是有意义的`Solution`，但在第一种情况下，这个附加成员将简单地引用`x`，而在第二种情况下，这个附加成员本身就是另一个`std::vector`由一些映射确定的成员形式。

因此，理想情况下，我可以添加一个 ctor 来`Solution`创建/定义一个名为`y`a`std::vector`或仅仅是对`x`. 然后，我`function`可以直接使用`y`.

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:57:44.717

您可以将您的功能定义为：

```
void function(std::vector<double>& x) 
```

并根据情况将不同的向量传递给它

**在 ctors 中使用引用进行**编辑****

 **```
class Solution 
{    
    std::vector<double> x;
    std::vector<double>& y; 
public:    
    Solution(std::vector<double>& _y) : y(_y) { }
    Solution() : y(x) { }
    void function() { /* do work on y*/ }    
}; 
```

这样你`function`总是在同一个引用上操作，但你可以控制这个引用引用的数据。请注意，`x`并且`y`现在是私有的——这确保这些成员仅通过`function()`方法在本地使用。**

# javascript - 无法获取元素 javascript 谷歌应用脚 本

> ID：13389984
> 
> 赞同：1
> 
> 时间：2012-11-15T00:53:12.737
> 
> 标签：javascript, xml, google-apps-script

我正在尝试获取提要中的链接元素，我可以获取`description`and `title`，但无法获取该`link`元素。我觉得很奇怪。这是我的代码

```
var url = "http://healthyhow.net/feed";
var response = UrlFetchApp.fetch(url);
var shareDoc = Xml.parse(response.getContentText(), true);

var root = shareDoc.getElement(); // feed element

var entries = root.getElement("channel").getElements("item");
for (var i=0; i<1; i++) { //just pick the first entry
    var e = entries[i];
    var title = e.getElement("title").getText();
    var link = e.getElement("link").getText();
   var description = e.getElement("description").getText();
} 
```

谁能指出这里有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:39:40.673

[文档](https://developers.google.com/apps-script/class_xml#parse)表明您应该对 HTML 使用宽松的解析 - 目前尚不清楚这在下面做什么，但在您的情况下，它可能会将 HTML`<link>`元素与具有相同标签名称的通用 XML 元素混淆。它似乎将链接条目解析为您的代码的类似内容（您可以在 中看到`shareDoc.toXmlString()`）：

```
<link/>http://healthyhow.net/l-arginine-natural-treatment-for-hypertension/ 
```

因为它是一个空标签，所以没有文本。

改变：

```
var shareDoc = Xml.parse(response.getContentText(), true); 
```

成为：

```
var shareDoc = Xml.parse(response.getContentText(), false); 
```

你应该能够得到链接文本。

# algorithm - 分层数据的最佳图形绘制算法？

> ID：13389985
> 
> 赞同：3
> 
> 时间：2012-11-15T00:53:14.703
> 
> 标签：algorithm, language-agnostic, graph, graph-drawing

*我有一个几乎是树的有向**无环*图的集合，在以下意义上：每个图都有一个*root*，并且顶点被组织成*级别*，如果*v* [1]和*v* [2]是顶点，那么如果*v* [1]的级别是小于*v* [2]的水平，则图中没有从*v* [2]到*v* [1的边，尽管从]*v* [1]可能有很多边****[*[*[*[*[*[*[到相同或更高级别的顶点。例如，表达式树、函数调用图或线性类层次结构都是此类图的示例。以下是此类图表的示例：]*]*]*]*]*]*]****

 ***```
 A1            
             /  \           A1 -> A4, A3
            /    \          A3 -> A2, A6, A7
          A4  A2--A3        A2 -> A6
              | \ / \
              A6 \_ A7 
```

有大量的绘图算法，我无法确定哪种算法最适合这种情况。一些初步研究表明，绘制 Hasse 图的算法可能是合适的，但似乎此类算法的输出并不适合我试图建模的数据结构类型。还有几种用于对分层数据进行建模的算法，但我不确定哪种算法会在易于实现和效率之间取得平衡。前一种方法的一个问题是这些图既有根又有方向。如果可能，该算法将支持*循环*图，并最大限度地减少数值计算的数量，但这不是必需的。由于这些原因，我宁愿避免使用力导向算法，如果可能的话，*点*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:47:47.713

如果它确实是一棵树，那么我之前已经看到这个[Reingold-Tilford Tree 绘制算法](http://bl.ocks.org/4063550)工作得很好。

顺便说一句，我觉得允许节点 A2 '上升'到与其祖先相同的级别的决定并没有真正帮助那么多。

相反，我会允许一个节点进一步下降而不是上升。在我看来，这个例子可以画得更好，如下所示。

```
 A1            
         /  \           A1 -> A4, A3
        /    \          A3 -> A2, A6, A7
      A4     A3         A2 -> A6
            / | \
          A2  |  A7
            \ |
             A6 
```

这样，您甚至不需要标记边缘方向。【我是不是误会你的原图了？我认为A2和A7之间没有优势对吧？]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T06:50:32.847

这不是一个真正的答案，但评论太长了。

您的图与一般的有向无环图有何不同？

DAG 不必有根，但我认为这对绘制图形影响不大。

就级别而言，对于任何 DAG，都可以定义一个函数 level(v)，使得对于任何边 vi → v [j]，level(i) ≤ level(j) [。]平凡水平函数是顶点在顶点的拓扑顺序中的索引。另一个是从根到顶点的最长路径的长度。

Reingold-Tilford 树绘制算法绘制有序树（即，顶点的边是有序的树）。您的示例表明您的图表没有排序，实际上您面临的主要问题是找到一个边缘排序，以最大限度地减少边缘交叉。因此，这可能是您要解决的问题。（这不是一个简单的问题。）

`dot` actually does pretty well with DAGs, in my experience, although it sometimes needs a bit of a helping hand. In particular, if you know the level of each vertex, you can make a subgraph for each level with the attribute `rank = "same"'. (See [this example](http://www.graphviz.org/content/sdh).)***

# android - 重新启动的活动无法获得它在重新启动之前启动的服务状态

> ID：13389986
> 
> 赞同：1
> 
> 时间：2012-11-15T00:53:19.757
> 
> 标签：android

这是一种情况，我有一个启动服务的android活动（该服务旨在发送/接收文件等）。通过在 Activity 类对象中创建的处理程序将服务 sendMessage() 发送到 Activity。Activity 然后显示当前操作服务在其包含的视图上执行的状态。

这是问题

1.  活动开始
2.  Activity 在全局对象中创建了 Handler
3.  Activity 启动服务 -
4.  用户通过活动命令服务开始发送/接收文件的过程
5.  该服务现在很忙，并且还通过通过全局对象获得的处理程序向 UI 发送消息
6.  Activity 接收并处理Message() 并在 UI 上发布状态
7.  用户现在将我的活动发送到后台（可能是他开始使用另一个应用程序）
8.  在此过程中，android 可能会杀死我的 Activity 但服务正忙/正在运行
9.  同时服务结束
10.  一段时间后，用户打开 Activity，
11.  （问题） Activity 启动 onCreate 被调用 Activity 不知道服务的最后状态。它是成功完成还是失败或任何其他状态最后状态..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:06:22.110

这取决于您启动服务的方式，您应该如何进行。

假设最简单的情况，服务在同一个进程和模式下运行`START_STICKY`，服务将保留在内存中，直到您`stopService()`从活动中调用。

在这种情况下，您可以创建一个存储服务当前状态（即未启动、运行、错误、完成等）的类级别静态变量，并从您的活动中对其进行测试。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:06:34.810

SharedPreferences、SQLite、文本文件或只是静态变量或应用程序实例的变量/字段（在代码的任何位置实现应用程序的单例以获取实例）。静态变量和应用程序实例一旦被 android 杀死，就会丢失内存中的状态。

# ruby-on-rails-3 - 如何验证表单中的位置地址？

> ID：13389996
> 
> 赞同：4
> 
> 时间：2012-11-15T00:54:24.247
> 
> 标签：ruby-on-rails-3, validation

我想验证用户填写的邮政地址是否正确。

假设我们有字段 street、street_number、postal_code、city 和 country

当用户输入他的国家是法国并且城市是纽约时，如何显示错误？

或者

如何检测到邮政编码与城市不对应？

是否有使用 Ruby On Rails 解决此问题的策略，还是我应该只信任用户条目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:16:49.967

有几家公司发布美国邮政编码目录，通常不会非常昂贵，有些公司甚至附带纬度/经度数据。这是在美国或北美验证城市和州的最常见方式。国家和城市的全球邮政编码可能是一个更难的问题，或者至少是一个更昂贵的问题。

另一种方法是使用 Google Maps API，也许与您可以从位置感知浏览器（所有现代浏览器）获得的数据结合使用。老实说，我使用 API 已经有一段时间了，但似乎记得你可以在给定纬度/经度的情况下获得非常详细的信息。Google 现在对 Maps API 的大量使用收费，但如果您的网站流量甚至中等，那么您可能仍处于自由区。

在某种程度上，您必须信任用户。我记得不久前我们在我们的数据库中发现用户报告的邮政编码异常——似乎每个人都住在加利福尼亚州的比佛利山庄。那是在 2000 年左右，当时电视节目“90210”的原始版本还在——那是邮政编码 :-)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T20:04:37.557

您是否考虑过仅使用[jQuery 插件来](http://smartystreets.com/kb/liveaddress-api/website-forms#example)为您验证地址？它对许多用户免费，每月最多 250 次查找，并且始终是最新的（您无需维护数据库）。

顺便说一句，我在 SmartyStreets 工作。如果城市与邮政编码匹配，还有一个邮政编码 API 可用于查找，反之亦然。无论哪种方式，我们都付出了很多努力来使用户体验积极，即使他们输入的地址并不完全有效。

# python - Python文件修改时间通过套接字获取和设置

> ID：13389998
> 
> 赞同：1
> 
> 时间：2012-11-15T00:54:46.967
> 
> 标签：python, file, time, python-3.x

我已经编写了一些代码，在其中获取文件的修改时间

```
os.path.getmtime('path') 
```

它返回一些数字，如`965465464.19234`. 我将其转换为字节并通过套接字发送。在另一端，我读取了套接字并尝试使用以下方法将此时间戳设置为另一个文件：

```
os.utime('path',(access_time, modified_time)) 
```

`access_time`当我尝试设置`modified_time`从套接字接收的内容时，我确保保持不变。但是`utime`需要一个整数，所以我截断了这个数字（例如：）`965465464`，然后一切正常。

我会因为截断而失去任何东西吗？怎样才能做得更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:16:00.027

我不认为问题与 modified_time 是浮点数或整数有关。下面的代码应该可以工作。我做了所有事情，但通过网络发送。

```
import os
from datetime import datetime
from calendar import timegm
import sys
st_info = os.stat('foo.py')
st_info.st_atime #acces time
st_info.st_mtime #modified time
mtime = st_info.st_mtime
atime = st_info.st_atime
# send over the wire
os.utime('foo.py', (atime, mtime)) 
```

如您所见， os.utime 可以很好地处理浮点数。

时间

出[15]：1322517342.0

在[16]中：类型（mtime）

出[16]：浮动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T04:11:55.887

`getmtime()`返回`st_mtime`。从[文档](http://docs.python.org/dev/library/os.html#os.stat)：

> 注意：**st_atime、st_mtime 和 st_ctime 属性的确切含义和分辨率取决于操作系统和文件系统。**例如，在使用 FAT 或 FAT32 文件系统的 Windows 系统上，st_mtime 的分辨率为 2 秒，而 st_atime 的分辨率仅为 1 天。有关详细信息，请参阅您的操作系统文档。同样，尽管 st_atime_ns、st_mtime_ns 和 st_ctime_ns 始终以纳秒表示，但许多系统不提供纳秒精度。在确实提供纳秒精度的系统上，用于存储 st_atime、st_mtime 和 st_ctime 的浮点对象无法保留所有这些，因此会稍微不精确。**如果您需要确切的时间戳，您应该始终使用 st_atime_ns、st_mtime_ns 和 st_ctime_ns。**

^(强调我的)

您可以使用`ns`参数将整数纳秒从`os.stat()`to 传递到`os.utime()`：

```
os.utime(path, ns=(access_time_ns, modified_time_ns)) 
```