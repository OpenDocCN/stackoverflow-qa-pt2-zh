# StackOverflow 问答 13423000-13423999

# c# - 例外 - 最佳实践

> ID：13423001
> 
> 赞同：2
> 
> 时间：2012-11-16T19:19:01.813
> 
> 标签：c#, exception, exception-handling

我一直在考虑异常处理。

`User`实现基于提供的用户名参数获取对象的方法的最佳实践是什么。见下文。

```
 /// <summary>
    /// Gets a user.
    /// </summary>
    /// <param name="username">Username</param>
    /// <returns>User instance</returns>
    public Model.User GetUser(string username)
    {
        return Context.Users.SingleOrDefault(u => u.Username.ToLower() == username.ToLower());
    } 
```

如果不存在具有该`username`参数的用户，最好返回一个空`User`对象还是抛出一个指定用户不存在的自定义异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:21:18.593

我的建议是，如果程序在没有用户的情况下无法继续，则抛出异常。如果您找不到用户或者这将是登录失败是可以的，那么我将返回 null。如果程序在没有获得用户的情况下无法继续并且它不能说重定向到再次登录，我只会抛出异常。

请记住，抛出异常更像是返回 null 的昂贵操作（我的意思是没有什么值得注意的，并且确实像这样思考（微优化），但异常应该用于正常的业务逻辑）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T19:23:34.283

抛出异常。否则，您的调用者和调用者的调用者以及其他所有人都需要检查`null`，或者需要处理空集合。

如果这是一种通用方法，意味着在调用者*知道*他需要检查 null 的上下文中使用，那么我会以不同的方式执行此操作。`private`如果没有匹配的用户，我将有一个返回 null 的方法。我会添加一个使用“try”模式的调用者：

```
public bool TryGetUser(string username, out Model.User user) 
```

还有一个只是简单地返回用户，但如果找不到则抛出异常

```
public Model.User GetUser(string username) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T19:29:39.690

首先，我只想建议改进您在不区分大小写的情况下比较字符串的方法。

```
/// <summary>
/// Gets a user.
/// </summary>
/// <param name="username">Username</param>
/// <returns>User instance</returns>
public Model.User GetUser(string username)
{
    return Context.Users.SingleOrDefault(u => 
       string.Compare(u.Username, username, true));
} 
```

[MSDN 上的字符串比较](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)

**现在我对这个问题的建议**

而不是返回null。[您可能希望使用null 对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)返回一个 Null 对象。

```
public class User
{

  public static readonly User Null = new Null{Username = "Anonymous"};

  ...

} 
```

然后你的方法变成：

```
public Model.User GetUser(string username)
{
    return Context.Users.SingleOrDefault(u => 
       string.Compare(u.Username, username, true)) ?? Model.User.Null;
} 
```

这在不需要的情况下很有用`null`。它消除了`null`以后检查的需要。例如，如果此用户对象具有关联的权限，您只需确保“空用户”没有权限即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T19:24:35.990

我会说调用方法可以决定找不到用户的结果是否需要抛出异常。如果提供了用户名，但未找到，则返回 null 对我来说是有意义的，并让调用代码决定它需要如何进行。

鉴于该方法的通用性，如果找不到提供的用户名，为什么要抛出异常？如果发生数据库错误等是一回事，但如果 SELECT 没有任何行，我认为这并不例外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T18:41:37.123

我不同意之前发布的答案。

例外只应在*特殊*情况下使用。未能找到匹配值并不例外。IMO，返回`null`要优雅得多——它将是否向调用者抛出异常的决定留给调用者，而不是被调用者，这是有道理的；你问一个用户的方法，如果没有，它什么也不返回。

此外，您的代码和其他答案每次都会遍历整个集合，这将是不必要的缓慢。您应该使用字典进行快速查找（当然，除非用户集合经常发生更改，导致无法进行缓存）。

例子：

```
class MyClass
{
    private Dictionary<String,User> _userLookup;

    public MyClass()
    {
        _userLookup = Context.Users.ToDictionary(u => u.UserName.ToLower());
    }

    private User getUserByName(String name)
    {
        var lowerName = name.ToLower();
        return _userLookup.ContainsKey(lowerName) ? _userLookup[lowerName] : null;
    }     
} 
```

# c++ - 列表初始化不能用于私有成员吗？

> ID：13423007
> 
> 赞同：5
> 
> 时间：2012-11-16T19:19:23.717
> 
> 标签：c++, c++11, list-initialization

```
struct A
{
private:
    int a, b, c;
};

int main()
{
    A a1{};
    A a2 = {};

    return 0;
} 
```

该代码由 VC++ 2012 编译（最新更新“2012 年 11 月 CTP”）。

我希望 a1 和 a2 是零初始化的，但不是。a1 和 a2 未初始化。

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T19:28:52.490

你的意思是微软的社区技术预览编译器，他们甚至没有足够的信心称之为*beta*，它有*错误*吗？;)

这是一个错误；它应该按照您的预期运行。请这样报告。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T19:38:28.723

^(请注意，此答案略有改写，最终结果与以前相反。感谢[@David Rodríguez - dribeas](https://stackoverflow.com/users/36565/david-rodriguez-dribeas)启发了我。:))

**这是一个错误。**Clang 3.2 主干和 GCC 4.7+ 也同意并将零初始化成员。

是时候来点标准的了。请注意，`T x{};`（或`= {}`）可以解释为列表初始化*或*聚合初始化。`A`这里不是*聚合*，因为它具有私有成员，因此不能由后者初始化。

`§8.5.1 [dcl.init.aggr] p1`

> *聚合*是一个数组或一个类（第 9 条），其中 [...] 没有私有或受保护的非静态数据成员 [...]

这只会留下列表初始化，并且会同时对`a1`和进行值初始化`a2`。

`§8.5.1 [dcl.init.list] p3`

> 类型的对象或引用的列表初始化`T`定义如下：
> 
> *   如果初始化列表没有元素并且`T`是具有默认构造函数的类类型，则该对象是值初始化的。

对于我们的具体情况，值初始化指定如下：

`§8.5 [dcl.init] p7`

> 如果`T`是没有用户提供的构造函数的（可能是 cv 限定的）非联合类类型，则该对象是零初始化的 [...]

这反过来意味着成员应该被清零。

# java - Java/Android 中的 Rss 提要布局

> ID：13423009
> 
> 赞同：0
> 
> 时间：2012-11-16T19:19:28.130
> 
> 标签：java, android, xml, rss

我想`RSS`在 Android 应用程序中显示一个 Feed。`XML`基本上，它当然是从文件中读取的。我想在 Android 中显示两个项目`listView`： `title`, `description`.

我希望提要这样做：

```
title
description

title
description

title
description

title
description 
```

相反，它正在这样做：

```
title
title
title
title
title
title

description
description
description
description
description
description 
```

我可以根据这段代码的情况来了解原因，但我不知道如何像示例 1 那样进行布局。

**这是代码：**

```
private class RSSHandler extends DefaultHandler {

    public void startElement(String uri, String localName, String qName,
            Attributes attrs) throws SAXException {

        if (localName.equals("item")) {
            item = true;
        }

        if (localName.equalsIgnoreCase("title")) {
            fTitle = true;
        }

        if (localName.equalsIgnoreCase("description")) {
            fDesc = true;
        }

    }

    public void endElement(String namespaceURI, String localName,
            String qName) throws SAXException {

    }

    public void characters(char[] ch, int start, int length)
            throws SAXException {

        if (fTitle) {
            titleResult = titleResult + (new String(ch, start, length))
                    + "\t\n\n";
            fTitle = false;
        }

        if (fDesc) {
            rssResult = rssResult + (new String(ch, start, length))
                    + "\t\n\n";
            fDesc = false;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:32:36.337

您正在维护两个字符串并稍后将它们组合起来，您应该在构建它们时将它们组合起来。根据您的示例，您应该使用以下内容：

```
public void characters(char[] ch, int start, int length)
        throws SAXException {

    if (fTitle) {
        titleResult = titleResult + (new String(ch, start, length))
                + "\t\n";
        fTitle = false;
    }

    if (fDesc) {
        titleResult = titleResult + (new String(ch, start, length))
                + "\t\n\n";
        fDesc = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:40:31.840

相反，你这样做：

```
if (fTitle) {
        titleResult = titleResult + (new String(ch, start, length))
                + "\t\n\n";
        fTitle = false;
    }

if (fDesc) {
        rssResult = rssResult + (new String(ch, start, length))
                + "\t\n\n";
        fDesc = false;
    } 
```

看你正在编写两个字符串，一个有很多标题，另一个有很多描述。

尝试在那里制作`List<String>`并添加你的对象：

```
List<String> feeds = new ArrayList<String>();
...
public void characters(char[] ch, int start, int length)
        throws SAXException {

    String feed = new String("");
    if (fTitle) {
        feed = new String(ch, start, length)
                + "\t\n\n";
        fTitle = false;
    }

    if (fDesc) {
        feed = feed + (new String(ch, start, length))
                + "\t\n\n";
        fDesc = false;
    }
    feeds.add(feed);
} 
```

然后您可以使用打印来显示您的列表：

```
for(String feed : feeds) {
  <Use your string>
  feed.doSometing();
} 
```

但最好的做法是制作一个 Feed 对象来存储标题和描述，例如：

```
List<Feed> feeds = new ArrayList<Feed>();
Feed feed = new Feed(title, description);
feeds.add(feed);
for(Feed feed : feeds) {
  feed.getTitle().doSometing();
  feed.getDescription().doSometing();
} 
```

=)

# asp.net - 使用活动目录登录身份验证 asp.net

> ID：13423010
> 
> 赞同：-1
> 
> 时间：2012-11-16T19:19:46.720
> 
> 标签：asp.net, vb.net, authentication, active-directory

我有一个项目，我需要使用活动目录登录到用 asp.net 制作的网站，我按照本教程....

[来自 ASP .NET 的 Active Directory 身份验证](http://msdn.microsoft.com/en-us/library/ms180890%28v=vs.80%29.aspx)

现在我想获取用户组，我尝试了 default.aspx.vb 页面中的下一个代码，但不起作用..

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Response.Write("Hello, " + Server.HtmlEncode(User.Identity.Name))

    Dim id As FormsIdentity = CType(User.Identity, FormsIdentity)

    If id IsNot Nothing Then

        Dim ticket As FormsAuthenticationTicket = id.Ticket
        Response.Write("<p/>TicketName: " + ticket.Name)
        Response.Write("<br/>Cookie Path: " + ticket.CookiePath)
        Response.Write("<br/>Ticket Expiration: " + ticket.Expiration.ToString())
        Response.Write("<br/>Expired: " + ticket.Expired.ToString())
        Response.Write("<br/>Persistent: " + ticket.IsPersistent.ToString())
        Response.Write("<br/>IssueDate: " + ticket.IssueDate.ToString())
        Response.Write("<br/>UserData: " + ticket.UserData)
        Response.Write("<br/>Version: " + ticket.Version.ToString())
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:30:22.110

我找到了一个更好的解决方案，比我在互联网上找到的任何答案都更容易。

首先，我创建一个类来验证用户是否在活动目录中的组中：

```
Imports System.Security.Principal   

Public Class AutorizationFun
    Dim access As Boolean = False
    Dim id As WindowsIdentity = WindowsIdentity.GetCurrent()
    Public User As WindowsPrincipal = New WindowsPrincipal(id) 
```

# 区域“组验证”

```
'Belongs to sample group
Private Function inSampleGroup() As Boolean
    Return User.IsInRole("bth0\GG BTUC-SAMPLEGROUP")
End Function
Private Function inSampleGroup2() As Boolean
    Return User.IsInRole("bth0\GG BTUC-SAMPLEGROUP2")
End Function 
```

# 结束区域

```
Public Function ProgramsAccsess(ByVal vPage As String) As Boolean
    access = False

    Select Case vPage
        Case "~/Sample.aspx"
            If inSampleGroup() Then
                access = True
            End If
        '---------------------------------------------------------------------
    End Select
    '*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
    'access = True
    '*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
    Return access
End Function   

End Class 
```

然后你必须在所有页面后面的代码中创建一个函数：

```
'create var
    Dim ValidateUser As New AutorizationFun

    Protected Sub VerifyAccessPage()
        If ValidateUser.ProgramsAccsess(Request.AppRelativeCurrentExecutionFilePath) = False Then
            Response.Redirect("~/DeniedAccess.aspx")
        End If
    End Sub 
```

并完成必须使用 Page_load 事件中的函数：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        'check whether page is postback or not            
        If Not Page.IsPostBack Then
            VerifyAccessPage()
        End If
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:25:57.787

如果您的服务器在 Windows 域中，它应该连接到 Active Directory，因此通过使用 Windows 身份验证，您已经使用 AD 凭据登录（因为用户之前必须在域中，否则浏览器将要求提供 AD 凭据)

要获取用户组，您可以使用[DirectorySearcher](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.aspx)类，显然当您

# c++ - 复杂的钻石问题：C++ 虚拟继承

> ID：13423012
> 
> 赞同：5
> 
> 时间：2012-11-16T19:19:56.337
> 
> 标签：c++, multiple-inheritance, virtual-inheritance

我有一个看起来像这样的钻石问题：

```
 __ A
  /    |\
 |  B  |  \
v|/v v\|v  \v
 B2   B3    C
  \v  /v   /
    B4    /
     \   /
       D 
```

我尝试了很多方法来制作最好的虚拟继承来避免重复，但我找不到解决方案。A 类包含一个位置。这是一个示例输出：

```
Call: A() position pointer is: 0x2203be8
Call: B()
Call: B2() position pointer is: 0x2203be8
Call: B3() position pointer is: 0x2203be8
Call: C() position pointer is: 0x2203a28
Call: B4() position pointer is: 0x2203be8
Call: D() position pointer is: 0x2203a28 
```

为什么 D 和 C 没有相同的位置指针？为什么这个 A::position 没有构造函数？我应该做什么样的虚拟继承来解决这个问题？谢谢。

编辑：

这是一个代码示例：

```
class A;
class B;
class B2 : public virtual B, public virtual A;
class B3 : public virtual B, public virtual A;
class C : public virtual A;
class B4 : public virtual B2, public virtual B3;
class D : public B4, public C; 
```

编辑2：为了输出，我把这段代码放在每个构造函数中：

```
A::A()
{
    std::cerr << "Call: A() position pointer is: " << &_position << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:38:41.653

Since you say the below code, which works on the implementations I have, is broken for you then obviously the code isn't the problem. The problem is with something else in your set up; perhaps a compiler bug. You should narrow down what else could be the cause of the problem; since the code itself is ruled out as a problem perhaps the best next step is to update your compiler.

In any case that makes this question rather specific to your set up. If you do find a solution that might apply to other people then you should come back and post it. Until then I'm voting to close this question.

* * *

I'm trying to reproduce your issue. Here's the code I'm using:

```
#include <iostream>

struct A { int a; };
struct B { int b; };
struct B2 : virtual B, virtual A {};
struct B3 : virtual B, virtual A {};
struct B4 : virtual B2, virtual B3 {}; // these virtuals are unnecessary in this case...
struct C : virtual A {};
struct D : B4, C {};

int main() {
    D d;
    std::cout << &((B4*)&d)->a << '\n';
    std::cout << &((B3*)(B4*)&d)->a << '\n';
    std::cout << &((B2*)(B4*)&d)->a << '\n';
    std::cout << &((A*)(B2*)(B4*)&d)->a << '\n';
    std::cout << &((A*)(B3*)(B4*)&d)->a << '\n';
    std::cout << &((C*)&d)->a << '\n';
    std::cout << &((A*)(C*)&d)->a << '\n';
} 
```

But the results I get are as expected, where the `a` member is the same for every object. I get the same results if I use print the addresses out in the constructors as well: [http://ideone.com/8FdQ1O](http://ideone.com/8FdQ1O)

If I make a slight change and remove the `virtual` keyword from C's definition:

```
...
struct C : A {};
... 
```

([version using constructors](http://ideone.com/yhW9EM))

then I do see the problem you describe where C has it's own A sub-object different from the virtual one used by B2, B3, and B4.

Are you sure you're using the `virtual` keyword in all the places you need it? The results you show seem to indicate you're missing it somewhere. Also I note that the output you show does not reflect the same order of constructors as the code fragments you show; the output shows A() first, but the code indicates that B() should be executed first.

* * *

The way virtual inheritance works is that a most derived type will contain a single virtual sub-object for each type that is virtually inherited anywhere in the inheritance tree. Additionally the most derived type will contain a sub-object for each instance of non-virtual inheritance:

```
struct A {};
struct B : virtual A {};
struct C : A, B {};
struct D : virtual A, C {};
struct E : A, D {};
struct F : virtual A, E {};
struct G : A, F {};

G g; 
```

`g` contains a total of four `A` sub objects; one for each time `A` is non-virtually inherited (in `C`, `E`, and `G`), and once for all of the times `A` is virtually inherited (in `B`, `D`, and `F`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:25:06.503

你目前有什么代码？看起来解决方案将是：

```
class D;
class C : public virtual D;
class B4 : public virtual D;
class B2 : public virtual B4;
class B3 : public virtual B4;
class B : public B2, public B3;
class A : public B2, public B3, public C; 
```

根据你的图表。如果我读错了并且 A 是基础，而不是 D。那么它需要看起来像这样：

```
class A;
class B;
class B2 : public virtual B, public virtual A;
class B3 : public virtual B, public virtual A;
class C : public virtual A;
class B4 : public virtual B2, public virtual B3;
class D : public B4, public C; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:54:32.990

> 为什么 D 和 C 没有相同的位置指针？

因为您从 B4 和 C 非虚拟继承 D。这意味着您有 A 的两个副本（和两个指针）。

在 D 构造函数中 &B4::position 与 &C::position 不同

> 为什么这个 A::position 没有构造函数？

不知道，您的 A 类是否有可能具有多个构造函数，并且 C::C() 调用了默认静默构造函数？

> 我应该做什么样的虚拟继承来解决这个问题？

让一切虚拟化。这意味着您需要从 D::D() 显式调用每个构造函数（即 A::A(),B::B(),B2::B2(),B3::B3(),C:: C（） ）。

Tbh 我相信你应该重新考虑你的等级制度。我不知道细节，但似乎您的问题通过组件设计有一个更清洁的解决方案。

# xslt - XSTL - 维护序列

> ID：13423013
> 
> 赞同：-1
> 
> 时间：2012-11-16T19:19:58.707
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我有一个输入xml：

```
<group>
    <item>
    <id>item 1</id>
    <CategoryName>blue</CategoryName>
    <id>item 2</id>
    <CategoryName>orange</CategoryName>
    <id>item 3</id>
     <CategoryName>green</CategoryName>
</item>
</group> 
```

我想把它改造成

```
<group>
<item>
    <itemNode><id>item 1</id><itemNode>
    <Color>blue</Color>
    <itemNode><id>item 2</id><itemNode>
    <Color>orange</Color>
    <itemNode><id>item 3</id><itemNode>
     <Color>green</Color>
</item> 
```

当我使用 xpath 时，它首先显示 itemNodes 标签，然后显示颜色标签，但不是按照数据最初所在的顺序。

有什么想法可以改变但仍然保持顺序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:43:23.743

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="item">
<group>
  <item>
    <xsl:for-each select="id">
      <xsl:variable name="pos" select="position()" />
      <itemNode><id><xsl:value-of select="."/></id></itemNode>
      <color><xsl:value-of select="../CategoryName[$pos]"/></color>
    </xsl:for-each>
  </item>
</group>
</xsl:template>
</xsl:stylesheet> 
```

# xml - 通过遍历数组来构建嵌套的 xml

> ID：13423018
> 
> 赞同：0
> 
> 时间：2012-11-16T19:20:16.613
> 
> 标签：xml, simplexml

我创建了一个用于接受 $key=>$value 对数组的简单方法。我想遍历该数组并构建一个 simpleXML 对象。该方法几乎有效；但是，它会在每次迭代中覆盖我的子节点。

编码：

```
public function format_comment($fieldValues)
{
    $xml = new SimpleXMLElement("<ROOT></ROOT>");
    foreach($fieldValues as $field=>$value)
    {
        if($field=='header')
        {
            $xmlChange = $xml->addChild('CHANGE');
            $xmlChange->addAttribute('field', $value);
        }
        elseif($field=='subheader')
        {
            $newXML = $xmlChange->addChild('NEW');
            $newXML->addAttribute('field', $value);
        }
        elseif($field=='newvalue')
        {
            $xmlNewValue = $newXML->addChild('VALUE', $value);
        }
        elseif($field=='oldvalue')
        {
            $xmlFrom = $xmlChange->addChild('FROM');
            $xmlFrom->addAttribute('field', $field);
            $xmlFromValue = $xmlFrom->addChild('VALUE', $value);
        }
    }
    return($xml->asXML());
} 
```

作为输入，我使用以下数组：

```
$note_fields = array('header'=>'Communication', 'subheader'=>'contacted', 'newvalue'=>'Dale J Neimeier','header'=>'Communication', 'subheader'=>'note', 'newvalue'=>'blah blah blah', 'header'=>'Communication', 'subheader'=>'note', 'newvalue'=>'new text', 'oldvalue'=>'previous text'); 
```

我的输出如下：

```
<ROOT>
    <CHANGE field="Communication">
        <NEW field="note">
            <VALUE>new text</VALUE>
        </NEW>
        <FROM field="oldvalue">
            <VALUE>previous text</VALUE>
        </FROM>
    </CHANGE>
</ROOT> 
```

我可以看到，通过我的数组的每次迭代，“CHANGE”标签和它的所有孩子都会被覆盖。我只是不知道为什么以及如何修复它。

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:26:25.207

问题实际上出在我构建 $note_fields 数组的方式上。由于我有重复键，它们只是相互覆盖。

# codeigniter - 我可以在 PyroCMS 中嵌入助手吗？

> ID：13423019
> 
> 赞同：2
> 
> 时间：2012-11-16T19:20:21.997
> 
> 标签：codeigniter, pyrocms

```
 {{ blog:posts limit="1" order-by="created_on" order-dir="desc" category="nurse" }}
    <p>
      {{ helper:word_limiter limit="10" string={{ helper:strip_tags value=body }} }}
    </p>
  {{ /blog:posts }} 
```

似乎不起作用。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:05:29.943

如果您尝试将带有属性的标签发送到另一个属性，它实际上看起来像这样：

```
{{ blog:posts limit="1" order-by="created_on" order-dir="desc" category="nurse" }}
<p>
  {{ helper:word_limiter limit="10" string={ helper:strip_tags value=body } }}
</p>
{{ /blog:posts }} 
```

双括号表示“我现在开始 Lex”。
单括号表示“我将这些属性分组到此调用”。

# python - Django：'str'对象没有属性'user'

> ID：13423022
> 
> 赞同：7
> 
> 时间：2012-11-16T19:20:48.597
> 
> 标签：python, django, decorator

这是我的视图代码：

```
@login_required
def get_top(type):
    o = Work.objects.filter(types = "Fan Fiction").order_by("-date_updated")[:10]
    list = []
    for o in o:
        l.title = o.title
        l.href = "/" + o.id
        list.append(l)
    return l

@login_required
def main_home(request):
    fanfiction = get_top("ff")
    poetry = get_top("pw")
    originalwork = get_top("ow")
    return render_to_response("Main/main_home.html", {'STATIC_URL':STATIC_URL, "poetry":poetry, "fan":fanfiction, "original":originalwork}) 
```

这是模型的代码：

```
class Work(models.Model):
    title = models.CharField(max_length=30)
    summery = models.TextField()
    user = models.ForeignKey(User)
    date_published = models.DateField()
    date_updated = models.DateField()
    one_shot = models.BooleanField()
    completed = models.BooleanField()
    TYPES = (
        ('FF', 'Fan Fiction'),
        ('OF', 'Original Work'),
        ('PW', 'Poetry Work'),
        )
    types = models.CharField(max_length=2, choices=TYPES)
    fandom1 = models.ForeignKey(Book, blank = True, null= True, related_name='f_1')
    fandom2 = models.ForeignKey(Book, blank = True, null= True, related_name='f_2')
    def __unicode__(self):
    return self.title + '-' + self.user.email 
```

这是错误：`'str' object has no attribute 'user'`在“get_top（“ff”）”

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T19:23:23.347

请删除方法`@login_required`的装饰器`get_top`。

这试图做的是，`@login_required`尝试验证该用户是否已登录。这是试图找到一个`User`对象实例，`ff`因此`str`是堆栈跟踪。通常从obj`@login_required`获取，但是由于您没有将其传入，因此会出现错误。`User``request``get_top`

我的建议是您应该维护一组特定的方法，其中一些方法可能需要`views.py`链接到 API url 。其他一组方法是辅助方法（如）。这些不暴露于外界（因此不需要）。`urls.py``@login_required``get_top``@login_required`

如果您必须`get_top`在内部和外部公开，那么您的第一个参数`get_top`必须是`request`对象，然后是其他参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:30:42.640

get_top 不返回 HttpResponse，因此 Django 无法正确应用 @login_required 装饰器（假设它返回具有 .user 属性的 HttpResponse）

# javascript - SDK2：RallyGrid 列中的复选框？

> ID：13423028
> 
> 赞同：1
> 
> 时间：2012-11-16T19:21:00.530
> 
> 标签：javascript, sdk, grid, rally

我想在集会网格中添加一个带有复选框的列（类似于“选择默认值”）。使用“checkcolumn”xtype 看起来应该很简单。但这需要你链接一些额外的 extjs 样式，我不确定如何在 Rally extjs 框架中做到这一点：

[Extjs 4 校验列不可见](https://stackoverflow.com/questions/7469482/extjs-4-checkcolumn-not-visible)

这是 ext-js 中此类列的示例：http: [//dev.sencha.com/deploy/ext-3.4.0/examples/grid/edit-grid.html](http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/edit-grid.html)

有没有办法用拉力赛网格做到这一点？

我最终使用了基于以下 anwser 的快速而肮脏的解决方案：

```
{text: 'Default', dataIndex:'selected', align: 'center', width: 50, renderer: function(value, style, item, rowIndex) {
    return "<input type='radio' name='primaryIndex' alt='"+ rowIndex + "' " + (value ? "checked='checked'" : "") + ">";
}}, 
```

和：

```
 checkRadioClick: function(event) {
            var button = event.getTarget('input[type="radio"]');

            if (button) {
                       ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:49:17.610

目前 Ext 的网格（Rally 网格扩展）不支持复选框列。开箱即用的最接近的东西是布尔列：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Boolean](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Boolean)

这是因为网格要求您必须单击一个单元格来启动编辑，并且复选框列在没有该操作的情况下可以立即编辑。

鉴于此，我认为您应该能够通过在列配置中简单地为该列指定一个渲染器来渲染一个复选框列。但是，当它们发生变化时，将值从网格中恢复出来可能会有点挑战，因为这些值不会被提交到存储中的底层记录（因为没有触发实际的编辑）。

还有一个用户在这里提交了 CheckColumn，您可以使用或至少作为示例来开始：
[http ://docs.sencha.com/ext-js/4-1/source/CheckColumn.html#Ext -ux-CheckColumn](http://docs.sencha.com/ext-js/4-1/source/CheckColumn.html#Ext-ux-CheckColumn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:02:14.560

也许这是新的预览版本之一？我这样做了：

```
Ext.create( 'Rally.ui.grid.Grid', {
            selType: 'checkboxmodel',
            selModel: {
                injectCheckbox: 1,
                mode: 'SIMPLE',
                listeners: {
                    selectionchange: function( model, selected ) {
                        // do stuff
                    },
                    scope: this
                }
            } 
```

# ruby-on-rails-3 - 在 Rails 应用程序中创建单个、自定义、全局可用的对象

> ID：13423029
> 
> 赞同：0
> 
> 时间：2012-11-16T19:21:03.183
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我很难找到答案。我想创建一个自定义类（我知道该怎么做）并让它实例化——一个实例——可以从我的应用程序中全局访问。我希望集中和抽象一些代码，并将这个全局可用的对象用作接口。我不敢相信这是多么奇怪。

我需要在这个对象中提供模型等。

帮助表示赞赏。

我正在运行 Rails 3.2.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:38:49.810

您放入的任何模型`app/models`都将由 Rails 自动加载，因此您可以在其中粘贴自定义模型。

该类将在您的整个应用程序中可用，因此您是否可以只使用类方法取决于您。如果您希望它成为单例，请参阅[这篇有用的文章](http://dalibornasevic.com/posts/9-ruby-singleton-pattern-again)。

最后，如果您需要模型以某种特定方式实例化，只需将其放入[初始化程序](http://guides.rubyonrails.org/configuring.html#using-initializer-files)中即可。应用程序启动时，其中的任何文件`config/initializers`都将运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:43:50.183

你可能想要一个单身人士......

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html)

但是，这仅适用于该应用程序进程。如果您运行多个应用程序服务器（即多个瘦实例或乘客），每个服务器都将拥有自己的实例。

如果您需要真正全球化的东西，您将不得不考虑其他选择。

# javascript - 从另一个页面加载和更改 iFrame 'src'

> ID：13423034
> 
> 赞同：2
> 
> 时间：2012-11-16T19:21:31.017
> 
> 标签：javascript, jquery, css, iframe, src

我有一个带有 iFrame 的页面和四个指向本机文件的链接，每个链接在被召唤时都正确显示在 iFrame 中。我已经用直接的 HTML 做到了这一点。问题是当我最初登陆页面时，我有一个空的 iFrame，直到我点击任何链接。

在到达时使用第一个链接填充 iFrame 不仅会很好，而且如果有一种方法可以到达此页面并显示任何其他剩余链接（如果事实上这就是内容），那将是一个真正的好处有人来找。例如，如果我将我的四个链接的锚点放在另一个页面上，那么如果有人可以选择第二个项目并在到达 my-iFrame-page.php 时发现它填充 iFrame，那将是理想的。

我不反对使用 jQuery 或任何类型的 javascript，但我担心对于脚本新手来说，理解语法很重要。如果有人可以发布一个实现我所追求的工作示例，我会欣喜若狂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:24:09.370

您可以设置`src=""`iframe 的属性，该属性将设置默认页面。

> 例如，如果我将我的四个链接的锚点放在另一个页面上，那么如果有人可以选择第二个项目并在到达 my-iFrame-page.php 时发现它填充 iFrame，那将是理想的。

不用说，如果你有一个前面的页面链接到包含 iframe 的页面，你可以将请求中作为参数选择的 url 传递给 iframe 页面，然后用 PHP 将其解析为属性。

* * *

为简单起见，假设您有两个页面：sourcepage.php 和 framepage.php。sourcepage.php 包含一个带有四个单选按钮和一个提交到 framepage.php 的提交按钮的表单。单选按钮都是同一组的一部分，并且有四个值——根据您的评论“苹果”、“香蕉”、“樱桃”和“桃子”。Apples 收音机的值为 1，Bananas 为 2，依此类推。每个收音机都有名称“page”。

这意味着当您提交表单时，在 sourcepage.php 上您需要以下代码

```
<?php
    $pageIndex = $_GET["page"];
    $pageUrl = "";

    switch ($pageIndex)
    {
        case "1":
            $pageUrl = "apples.html";
            break;
        case "2":
            $pageUrl = "bananas.html";
            break;
        // And so on...
    }
?>

<!-- And then later... -->

<iframe src="<?php echo $pageUrl; ?>"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:41:42.397

使用 JS 获取 URL 参数，当然也可以在页脚的链接中添加参数。假设你的 iframe 有 id="iframe"，这就行了:)

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
    $(document).ready(function() {

        function get_url_param(name) {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.href);
            if (results == null) {
                return "";
            } else {
                return results[1];
            }
        }

        if (get_url_param('show') == '') {
            $('#iframe').attr('src', 'wall-structures.php'); // Setting your default page....
        } else {
            $('#iframe').attr('src', get_url_param('show') + '.php');
        }

    });
</script>
</head>
<body>

    <a href="portfolio.php?show=wall-structures">Wall & Structures</a><br />
    <a href="portfolio.php?show=ovens-barbecues">Ovens & Barbecures</a><br />
    <a href="portfolio.php?show=pillars-arches">Pillars & Arches</a><br />
    <a href="portfolio.php?show=stairs-retaining-walls">Stairs & Retaining Walls</a><br />

    <iframe id="iframe"></iframe>

</body>
</html> 
```

如果不想用JS，也可以用纯PHP来做：

```
<?php

    if (isset($_GET['show'])) {
        $iframe_src = $_GET['show'] . '.php';
    } else {
        $iframe_src = 'somedefaultpage.php';
    }

?>

<a href="portfolio.php?show=wall-structures">Wall & Structures</a><br />
<a href="portfolio.php?show=ovens-barbecues">Ovens & Barbecures</a><br />
<a href="portfolio.php?show=pillars-arches">Pillars & Arches</a><br />
<a href="portfolio.php?show=stairs-retaining-walls">Stairs & Retaining Walls</a><br />

<iframe src="<?php echo $iframe_src; ?>"></iframe> 
```

# forms - 表单字段 - 输入部分 URL 并转到完整 URL 目标

> ID：13423038
> 
> 赞同：-1
> 
> 时间：2012-11-16T19:21:44.850
> 
> 标签：forms, url, field

如何创建一个表单字段，用户在其中输入部分 URL，然后单击以访问该完整 URL？

例子。[在此处输入我们的公司名称].website.com（提交按钮）-> 转到 companyname.website.com

我需要这个完整的代码片段，从到请。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:33:58.800

在 HTML/PHP 中，您可以执行以下操作：

HTML 表单：

```
<form method="post" action="target.php">
<input type="text" name="beforeUrl" />.website.com
<input type="submit" value="Click here" />
</form> 
```

PHP：

```
<?php
header('Location: http://'.$_POST['beforeUrl'].'.website.com');
?> 
```

PS：这是基本代码，但您确实保护了您的 POST var。

# ember.js - 在 emberjs 上设计自定义组件/视图

> ID：13423044
> 
> 赞同：0
> 
> 时间：2012-11-16T19:22:15.090
> 
> 标签：ember.js

我在 Ember 上做事时遇到了麻烦，我敢肯定这是因为我还没有完全掌握做事的“Ember 方式”，而且我正在尝试做一些脱离标准教程的范围。

我正在开发某种带有建议的文本字段组件，它将出现在我的网络应用程序的每个页面中。我不会在这里询问有关如何做到这一点的所有细节，而只是问一些我从一开始就无法完成的具体事情。以下是我目前所拥有的相关代码片段。

```
// handlebars template: searchbar.hbs
{{view App.SearchField viewName="searchField"}}
<div class="results" {{bindAttr class="searchField.hasFocus"}}>
  This is where the results for whatever the user has typed are shown.
</div>

// coffeescript source of the views: searchbar.coffee
App.SearchBar: Ember.View.extend
  templateName: 'searchbar'

App.SearchField: Ember.TextField.extend
  placeholder: 'Search'
  hasFocus: false
  eventManager: Ember.Object.create
    focusIn: (event, view) ->
      @set('hasFocus', true)
    focusOut: (event, view) ->
      @set('hasFocus', false)

// somewhere in the layout of the pages in my app
<div id="header">
  {{App.SearchBar}}
</div> 
```

这可能还需要一个控制器，但我还没有开发它，因为我还不知道它在这个设置中的位置。

首先，我希望在搜索字段获得焦点后立即出现建议弹出面板。这就是我在上面尝试在搜索字段上实现 hasFocus 属性的原因。但是如何让我的 div.results 面板对输入字段的焦点状态做出反应？

一般来说，这是我的问题的核心，我如何连接所有东西来开发这个组件？如果答案是将其附加到控制器上，那么如何为该组件设置一个控制器，以及如何指定它是它的控制器，以便它充当所有内容的上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:45:04.720

我认为你必须清楚地区分关注点。与视图相关的东西（即用 jquery 操作 DOM）应该留在视图中。与应用程序状态相关的东西应该在控制器中。不过，在您的情况下，我认为您可以简单地在 hasFocus 属性上绑定观察者，并显示建议。就像是：

```
App.SearchField: Ember.TextField.extend
  placeholder: 'Search'
  hasFocus: false
  eventManager: Ember.Object.create
    focusIn: (event, view) ->
      @set('hasFocus', true)
    focusOut: (event, view) ->
      @set('hasFocus', false)

  focusDidChange: (->
    if @hasFocus 
      $('.results')... // here I let you do the suggestion stuff 
                       // based on data retrieved from the controller
    else
       // probably hide the results div.
  ).observes('hasFocus') 
```

# iphone - 将 UITextField 插入 TableView

> ID：13423047
> 
> 赞同：0
> 
> 时间：2012-11-16T19:22:24.550
> 
> 标签：iphone, ios, xcode

我想在 tableView 中有 textFields。因此，我将它们手动插入到情节提要的 tableView 中并修改了它们的各个属性。但是，当我运行程序时，我看不到文本字段。我用一个开关重复了同样的过程。但它仍然没有运行。因此，我认为尽管对象存在于情节提要中，但并未显示这些对象。

Q1。知道为什么会这样吗？

为了克服这个问题，我以编程方式插入了这些对象。对于 UISwitch，我`cellForRowAtindexPath`在`initWithStyle:style reuseIdentifier:reuseIdentifier`.

```
UISwitch *newSwitch = [[UISwitch alloc] initWithFrame:CGRectMake(25, 55, 77, 27)];
[newSwitch addTarget: self action: @selector(pictureSwitchAction:) forControlEvents:UIControlEventValueChanged];
[self.view addSubview:newSwitch]; 
```

这工作正常。`pictureSwitchAction`方法按预期调用。

但是，当我尝试用 UITextField 做类似的事情时，应用程序崩溃了。（仅供参考......`field0`被声明为`property`。）这是我的代码：

```
field0 = [[UITextField alloc] initWithFrame:CGRectMake(0, 50, 320, 44)];   // (1)
cell = (UITableViewCell *)[field0 superview];                              // (2)
[self.view addSubview:field0];                                             // (3) 
```

(1) 和 (2)（注释 (3)）使应用程序崩溃。错误：`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:'`

我的理解是，必须先返回单元格，然后才能为其分配一些价值。但是（1）和（3）（注释（2））没有结果。我不知道为什么这适用于开关而不是 UITextField。

对 Q1 的任何回应以及如何以编程方式插入 textField？

谢谢！

**编辑 1**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone; // VERY IMPORTANT

    if(indexPath.section == 2)
    {
        if (indexPath.row == 0)
        {
            field0 = [[UITextField alloc] initWithFrame:CGRectMake(0, 50, 320, 44)];
            cell = (UITableViewCell *)[field0 superview];
           // [self.view addSubview:field0];
        }

        if (indexPath.row == 1)
        {
            field1 = [[UITextField alloc] initWithFrame:CGRectMake(0, 50, 300, 43)];
            cell = (UITableViewCell *)[field1 superview];            
            // [self.view addSubview:field1];
        }

       if (indexPath.row == 2)
       {
            field2 = [[UITextField alloc] initWithFrame:CGRectMake(0, 50, 300, 43)];
            cell = (UITableViewCell *)[field2 superview];
            // [self.view addSubview:field2];
        }
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:05:29.037

在这里，您应该在代码中进行更改，例如 As

**答案 1：- 如果您想通过简单地添加其他视图来自定义单元格，您应该将它们添加到内容视图中。这样它们将在单元格进入和退出编辑模式时得到适当的定位。**

**答案 2**崩溃原因：- 因为您没有返回 UITableViewCell.As Crash Log ItSelf 解释相同`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:'`

答案 3 -为此`My understanding is that the cell has to be return first before I can allocate some value to it`。在这里，对于此行，我会说您完全错了，只是想。`can you put mango inside the basket even if you don't have that basket.means you will need that` . 因此，只要您首先要添加类似您需要的东西，然后您可以在其上添加任何对象，最后返回您将在方法中看到的那样`textfield`，就会出现相同的概念。我想你现在清楚了。`TableCell``create(allocate)``tableCell``tableCell``CellForRowAtIndexPath`

对于 UISwitch 您正在通过`self.view`手段添加它。`controller's view`查看您的代码`[self.view addSubview:]`显示切换 mainView（conrtoller 视图）而不是 Shwoing 。`tableViewCell`对于 TextField 它由于这条线而无法正常工作，这`cell = (UITableViewCell *)[field0 superview];`是完全错误的。

只是为了您的信息，请参见下面的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

cell.selectionStyle = UITableViewCellSelectionStyleNone; // VERY IMPORTANT

if(indexPath.section == 2)
{

    if (indexPath.row == 0)
    {
        UITextField* thisTextField =[[UITextField alloc] initWithFrame:CGRectMake(originX, originY, width ,hieght)];//pass the co-ordinate.
        [thisTextField setBackgroundColor:[UIColor clearColor]];
        [thisTextField setTag:indexPath.row];//here by setting this you can access further it         
        thisTextField.delegate= self;
        [[cell contentView] addSubview:thisTextField];
        // If you want to customize cells by simply adding additional views, 
        // you should add them to the content view .
        //  so they will be positioned appropriately as the cell transitions into and out of editing mode.
    }

return cell; 
```

}

我建议你应该从视图层次结构和 UITableView 的基础开始。

谢谢

# clojure - 为什么 Clojure 默认使用上下文类加载器？

> ID：13423048
> 
> 赞同：19
> 
> 时间：2012-11-16T19:22:25.340
> 
> 标签：clojure, classloader, contextclassloader

为什么*use-context-classloader*默认设置为 true？

为什么 Clojure 不使用当前的类加载器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:15:58.573

您可以通过设置类加载器来覆盖其行为，`clojure.lang.Compiler.LOADER`即。

```
final ClassLoader ccl= ClojurePlugin.class.getClassLoader();
clojure.lang.Var.pushThreadBindings(clojure.lang.RT.map( clojure.lang.Compiler.LOADER, ccl) );
try {
  ...
  clojure.lang.RT.loadResourceScript( cljFile );
  ...
}finally{
  clojure.lang.RT.popThreadBindings();
} 
```

ClojurePlugin 是你的类。

但是当您第一次使用 RT 类时（即加载 RT 类时），它将使用上下文类加载器来加载即。`clojure/core`，所以你可能想把上面的代码包装成：

```
ClassLoader previous = Thread.currentThread().getContextClassLoader();
final ClassLoader parentClassLoader = ClojurePlugin.class.getClassLoader();
Thread.currentThread().setContextClassLoader(parentClassLoader);
try {
  ...
  //above code here
  ...
} finally {
  Thread.currentThread().setContextClassLoader(previous);
} 
```

否则您可能会收到一些错误消息，例如：

```
Caused by: java.io.FileNotFoundException: Could not locate clojure/core__init.class or clojure/core.clj on classpath:
        at clojure.lang.RT.load(RT.java:432)
        at clojure.lang.RT.load(RT.java:400)
        at clojure.lang.RT.doInit(RT.java:436)
        at clojure.lang.RT.<clinit>(RT.java:318)
        ... 16 more 
```

否则，如果你这样做而不是前者，你会得到类似的东西：

```
21:10:59 [SEVERE] java.io.FileNotFoundException: Could not locate Clojure resource on classpath: cljminecraft/core.clj
21:10:59 [SEVERE]       at clojure.lang.RT.loadResourceScript(RT.java:366)
21:10:59 [SEVERE]       at clojure.lang.RT.loadResourceScript(RT.java:346)
21:10:59 [SEVERE]       at clojure.lang.RT.loadResourceScript(RT.java:338)
21:10:59 [SEVERE]       at cljminecraft.ClojurePlugin.loadClojureFile(ClojurePlugin.java:25)
21:10:59 [SEVERE]       at cljminecraft.ClojurePlugin.loadClojureNameSpace(ClojurePlugin.java:38)
21:10:59 [SEVERE]       at cljminecraft.ClojurePlugin.start(ClojurePlugin.java:53)
21:10:59 [SEVERE]       at cljminecraft.BasePlugin.onEnable(BasePlugin.java:235)
21:10:59 [SEVERE]       at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:217)
21:10:59 [SEVERE]       at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:374)
21:10:59 [SEVERE]       at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:381)
21:10:59 [SEVERE]       at org.bukkit.craftbukkit.CraftServer.loadPlugin(CraftServer.java:270)
21:10:59 [SEVERE]       at org.bukkit.craftbukkit.CraftServer.enablePlugins(CraftServer.java:252)
21:10:59 [SEVERE]       at net.minecraft.server.MinecraftServer.j(MinecraftServer.java:320)
21:10:59 [SEVERE]       at net.minecraft.server.MinecraftServer.e(MinecraftServer.java:299)
21:10:59 [SEVERE]       at net.minecraft.server.MinecraftServer.a(MinecraftServer.java:258)
21:10:59 [SEVERE]       at net.minecraft.server.DedicatedServer.init(DedicatedServer.java:147)
21:10:59 [SEVERE]       at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:398)
21:10:59 [SEVERE]       at net.minecraft.server.ThreadServerApplication.run(SourceFile:856) 
```

如果你都不做（但你仍然调用类似`clojure.lang.RT.loadResourceScript( cljFile );`then 你得到第一个错误（显然）

# ruby-on-rails - Ruby Rails：在类似 Ebay 的应用程序中，我如何接受和确认投标？

> ID：13423050
> 
> 赞同：0
> 
> 时间：2012-11-16T19:22:41.947
> 
> 标签：ruby-on-rails, ruby, join

我对如何设置表结构来做到这一点感到困惑。一个项目有一个出价，并且该出价属于该项目。接受该项目投标的人必须是该项目的所有者。我不知道如何将项目所有者的 ID 传递给我的投标接受功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:37:43.120

您不需要传递`user_id`给`accept`方法。您所需要的只是确保试图接受的人有权这样做。

简单的方法可能是使用[cancan](https://github.com/ryanb/cancan)或类似的 gem。

对于更复杂的解决方案，您可以阅读有关[DCI](http://en.wikipedia.org/wiki/Data,_Context,_and_Interaction)模式的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:40:50.823

如果一个投标有一个项目并且一个项目有一个所有者，您应该能够从投标中查询所有者

```
class Item < ActiveRecord::Base
   has_many :bids
   has_one :owner
end

class Bid < ActiveRecord::Base
   has_one :item
end 
```

像这样：

```
bid.item.owner 
```

然后检查所有者是提交者

# python - App Engine Django 非 rel 竞争条件

> ID：13423053
> 
> 赞同：1
> 
> 时间：2012-11-16T19:22:50.447
> 
> 标签：python, django, google-app-engine, race-condition

我目前正在使用 django non-rel web 框架开发一个谷歌应用引擎应用程序。我有一种方法可以将钱从一个帐户转移到另一个帐户，非常简单。当我使用调试器在本地服务器上运行它时，它工作得很好并且可以正确转移所有资金。但是，当我在应用程序引擎上远程运行它时，我会得到奇怪的负值。该方法的关键在于：

```
pubAccount.secondary_money = pubAccount.secondary_money + transaction.money
pubAccount.money = pubAccount.money - transaction.money 
```

经过广泛的研究，我发现这可能是由于我*没有*使用交易，这意味着传输绝不是原子的，因此可能会发生竞争条件。但是 django non-rel 不能正确支持事务，并且它支持的部分不直接被应用程序引擎支持，并且据我发现，python-app 引擎工具包支持的任何东西都不受 django non-rel 支持.

所以谁能告诉我如何使用 django non-rel 在应用程序引擎上进行交易！？一定有人把它搞定了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:46:10.647

简单，使用[db.run_in_transaction()](https://developers.google.com/appengine/docs/python/datastore/transactions)

**编辑：**

如果有帮助，这是我使用的分支，运行 django-1.4，支持祖先查询。

```
https://github.com/dragonx/djangoappengine.git -> django-1.4 branch
https://github.com/dragonx/django-1.4.git -> 1.4-nonrel branch
https://github.com/dragonx/djangotoolbox.git -> features/django-1.4 branch
https://github.com/dragonx/django-dbindexer.git -> develop branch (although the 1.4wip branch looks better) 
```

# sql-server-2008 - T SQL - 空变量

> ID：13423054
> 
> 赞同：4
> 
> 时间：2012-11-16T19:23:04.503
> 
> 标签：sql-server-2008, tsql

我有一个从 .aspx.cs 页面调用的存储过程。我有一个参数，有时在调用 sproc 时无法发送。因此，我正在执行以下操作：

```
 IF @variable is null
     BEGIN
         ...do this...
     END
 Else 
         ...do that... 
```

我的问题出在 IF 语句中。据我所知，当我使用以下任何一种时：

*   `if @parameterVariable = null`
*   `if @parameterVariable = ''`
*   `if @parameterVariable <= 0`

什么都没发生！？当我在 SSMS 中调试存储过程时，我发现（即使参数为空（没有用户选择））光标转到并运行 ELSE 语句中的代码。难道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T19:26:18.957

使用可选参数：

```
 CREATE PROCEDURE uspTest
    @param1 varchar(50) = null,

AS
    BEGIN
        SELECT col1, col2
        FROM Table1
        WHERE
                ((@Param1 IS NULL) OR (col1 = @Param1)) 
    END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T19:27:40.840

`if @parameterVariable = null`是错的。将其更改为`if @parameterVariable IS NULL`.

这是一个演示这个的 SQL Fiddle：[http ://www.sqlfiddle.com/#!6/6cb42/1](http://www.sqlfiddle.com/#!6/6cb42/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T19:27:51.590

在 SMSS 中调试时，您必须选中“传递空值”框。否则你的值是一个空字符串或类似的东西。

我一直使用你建议的模式，它对我很有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T19:42:44.180

我建议您阅读此页面 => [ANSI NULLS](http://msdn.microsoft.com/library/ms188048.aspx)

其实`if @var = null`没有错，一切都取决于 ANSI_NULLS 的值 :)

# android - 具有 Oberserver 模式的 Android - 如何初始化活动？

> ID：13423060
> 
> 赞同：1
> 
> 时间：2012-11-16T19:23:49.883
> 
> 标签：android, android-activity, initialization

我目前正在开发一个 Android 应用程序作为直升机的遥测应用程序。我有一个 udp 服务器，它通过网络发送数据。

有一个 udp 客户端在一个单独的线程中来处理网络连接。在我的 ConnectActivity 中，我添加了这样的观察者：

```
Observer dataView = new DataViewActivity();
Observer osmDroidView = new OSMDroidMapsActivity();

udpClient.getDataNotifier().addObserver(dataView);
udpClient.getDataNotifier().addObserver(osmDroidView); 
```

例如，在我的 OptionsMenu 中，我开始了我的 DataViewActivity：

```
MenuItem dataItem = menu.add("Data");
dataItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM); 
```

DataViewActivity 实现了观察者接口。现在我的问题是，我添加到观察者列表中的数据视图实例是另一个实例，而不是我开始单击选项菜单时的数据视图。任何想法如何通过选项菜单启动相同的实例？

```
startActivity(new Intent(getApplicationContext(),
                DataViewActivity.class)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:47:46.880

你根本不应该使用`new Activity()`任何形式。无论您使用什么，您都应该仅通过执行 startActivity 调用来启动您的 Activity。您的当前 Activity 应该实现 Observer 接口并在收到通知时启动新的 Activity。您不能创建/存储活动 - 这是框架工作

# php - PHP 初学者 OOP 构建对象

> ID：13423064
> 
> 赞同：4
> 
> 时间：2012-11-16T19:24:10.367
> 
> 标签：php

提前感谢您的帮助和指导。我终于从线性编程切换到 OOP。我正在上我的第一堂课，我可以使用一点方向。我的第一堂课是具有以下属性的画廊

```
class Gallery
    {
        //Gallery Name
        public $galleryID;
        public $galleryName;

        //Client Name
        public $clientName;

        //Gallery Options
        public $bg_color;
        public $albumAgreement;
        public $maxChanges;
        public $sharing_on;

        //Revisions
        public $revisions;
} 
```

我的输出看起来像：

```
Gallery Object
(
    [galleryID] => 
    [galleryName] => 
    [clientName] => 
    [bg_color] => 
    [albumAgreement] => 
    [maxChanges] => 
    [sharing_on] => 
    [revisions] => 
) 
```

我的下一步是我想让“修订”成为一个对象，以便我的输出看起来像

```
Gallery Object
(
    [galleryID] => 
    [galleryName] => 
    [clientName] => 
    [bg_color] => 
    [albumAgreement] => 
    [maxChanges] => 
    [sharing_on] => 
    [revisions] => Revisions Object (
        [revisionID] =>
        [revisionName] =>
    )
) 
```

对于这样的事情，我应该朝着什么方向前进，这门课会是什么样子？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T20:02:34.437

> [这更像是一个**长篇评论**，因为它解释了你的困境的根源，但没有提供任何解决方案。]

## OOP 第 1 课：仅仅因为您正在使用类并不意味着您正在编写面向对象的代码。

对象中的公共属性很少有很好的用例。让我们看一下OP的示例：

```
class Gallery {
    public $galleryID;
    public $galleryName;
    // ...
} 
```

将我们的属性定义为`public`之后，以下两段代码有何不同？

```
$gallery = new Gallery;
$gallery->galleryId = 42;
$gallery->galleryName = 'some name';

// vs:

$gallery = array(
    'galleryId' => 42,
    'galleryName' => 'some name'
); 
```

如果您说*“它们根本没有什么不同”，*那么您是对的。事实上，基于对象的代码会因为`new`. 还有一些其他因素，例如传递对对象的引用而不是复制新数组的能力，但这些不会影响这种特殊情况。

## OOP 第 2 课：对象是一个黑盒子

创建一个只是可变属性集合的对象的问题在于，您的其余代码*完全了解*该对象内部发生的情况。让我们谈谈为什么这很糟糕......

在复杂性方面，人类并不是很好。好的软件旨在通过将功能封装到离散单元中来部分降低复杂性。在这种情况下，我们希望将“图库”实体的所有逻辑封装到`Gallery`类中。作为领域驱动设计 (DDD) 方法的一部分，这很有意义。我们要做的是`Gallery`与外界隔绝；我们希望它的内部实现对我们的其余代码是不透明的。我们应用程序的其余部分不应该知道或关心这些`Gallery`功能是如何工作的，只要它按预期工作即可。这里的额外好处是我们可以专注于让画廊按照它应该的方式工作，然后忘记它。我们不必被迫记住如何`Gallery`与一个`Image`或一个一起工作`Revision`. 这种松耦合是面向对象设计中最强大的工具之一。

虽然它可能适用于非常小的规模，但不可能同时将整个应用程序的逻辑保持在您的脑海中。不管你有多聪明，我们的大脑只是没有足够的内存。

回到代码，如果我们的应用程序代码知道如何`Gallery`为自己分配一个名称，那么我们已经允许“画廊”的逻辑泄漏到程序的其余部分。当我们决定要在分配新画廊名称时对其进行验证时会发生什么？我们现在必须将验证逻辑放在我们指定画廊名称的代码中的任何地方，因为我们还没有隔离关于“画廊性”这个抽象概念的所有内容。更好的设计是将`Gallery`属性分配封装在对象本身中：

```
class Gallery {
    private $galleryId;
    private $name;
    public function setName($name) {
        $this->name = $name;
    }
    public function getName($name) {
        return $this->name;
    }
} 
```

如果我们以这种方式构建我们的类，当我们需要为画廊指定名称时，我们总是有一个单一的入口点。现在，当我们对画廊的需求在未来发生变化时（**他们将会**），我们所有的应用程序代码——对画廊名称分配背后的逻辑视而不见——与破损隔离开来。我们只需向我们的名称设置器添加一个新方法，并在我们的程序中创建最小的动荡：

```
class Gallery {
    private $galleryId;
    private $name;
    public function setName($name) {
        $this->validateName($name);
        $this->name = $name;
    }
    private function validateName($name) {
        if (!preg_match('/^[a-z]+$/', $name)) {
            throw new Exception;
        }
    }
    public function getName($name) {
        return $this->name;
    }
} 
```

## 解决 OP

要回答如何将封装`Revision`对象表示为更高级别`Gallery`实例的属性的问题，我们需要一些上下文。看来 OP 试图做的是模型域实体，这些实体将被写入后端持久层（例如数据库、平面文本文件等）并从中检索。

[贫血域模型](http://en.wikipedia.org/wiki/Anemic_domain_model)是处理这个问题的一种方法，但是它通常被认为是一种反模式。[马丁福勒写道：](http://martinfowler.com/bliki/AnemicDomainModel.html)

> 贫血域模型的基本症状是乍一看它看起来像真实的东西。有对象，许多以领域空间中的名词命名，这些对象与真正的领域模型所具有的丰富关系和结构相关联。当您查看行为时，问题就来了，您会意识到这些对象几乎没有任何行为，这使得它们只不过是成袋的 getter 和 setter。实际上，这些模型通常带有设计规则，即不要将任何域逻辑放入域对象中。相反，有一组服务对象捕获所有域逻辑。这些服务位于域模型之上，并使用域模型来存储数据。

考虑到这些论点，您应该考虑使用诸如[DataMapper](http://martinfowler.com/eaaCatalog/dataMapper.html)或[Gateway](http://martinfowler.com/eaaCatalog/gateway.html)模式之类的东西来处理需要持久化到某种形式的后端存储的域对象。

## 备择方案

让我们暂时忘掉`Revision`对象，想象一下我们想使用一个`Slideshow`对象来输出画廊中的图像。这个类可能看起来像：

```
class Slideshow {
    private $gallery;
    public function __construct(Gallery $gallery) {
        $this->gallery = $gallery;
    }
    public function play() {
        // do something with the gallery here
    }
} 
```

忽略 php 代码实际上不会用于“播放”幻灯片的事实，因为这会在客户端代码中发生。这里重要的`Slideshow`是使用[Composition](http://en.wikipedia.org/wiki/Object_composition)来访问`Gallery`. 这种结构*大大*优于直接在内部使用`new`a ，因为：`Gallery``Slideshow`

1.  现在`Slideshow`是可插入的——我们可以插入任何遵循“画廊”概念的对象（通常`Gallery`会被声明为符合指定的接口契约）。

2.  现在`Slideshow`即将进行测试。我们如何处理`Gallery`提供的图像类型不合适的情况？如果我们直接在`Gallery`内部实例化 a，`Slideshow`我们将无法模拟这种情况。通过注入依赖项，`Slideshow`我们有机会测试我们的代码处理不同操作条件的能力。

当然，有时在另一个类中直接实例化一个对象是合适的。有关此主题的更多指导，我建议 Miško Hevery 在他的文章[To "new" or not to "new"](http://misko.hevery.com/2008/09/30/to-new-or-not-to-new/)中提出建议。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-16T19:28:01.597

好消息是 PHP 是动态类型的，因此您的代码几乎保持不变。当您初始化时`revisions`，只需将其初始化为`Revisions`对象的实例，就像这样

```
$gallery = new Gallery();
$gallery->revisions = new Revisions()  // assuming you have defined the Revisions class 
```

至于类应该是什么样子，根据您的 var_dump，如下所示：

```
class Revisions {
  public $revisionID;
  public $revisionName;

  public function __construct($id, $name) {
     $this->revisionID = $id;
     $this->revisionName = $name;
  }

  // if required, define a default constructor as well that does not take any parameters

} 
```

由于`revisions`您的问题并不完全清楚，您可能想要创建一个`Revision`对象而不是`Revisions`（不是复数），然后`$gallery->revisions`是`Revision`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:31:05.057

本质上，您正在为 创建一个单独的类`Revisions`，就像您为`Gallery`.

```
class Gallery
{
    //Gallery Name
    public $galleryID;
    public $galleryName;

    //Client Name
    public $clientName;

    //Gallery Options
    public $bg_color;
    public $albumAgreement;
    public $maxChanges;
    public $sharing_on;

    //Revisions
    public $revisions;
}
class Revisions {
    public $revisionID;
    public $revisionName;
}

//Set the revisions within gallery
$gallery = new Gallery();
$gallery->revisions = new Revisions(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T19:37:15.033

对 setter 和 getter 或构造函数做一些研究。我将给出一个使用下面每个具有相同最终结果的示例。

```
class Gallery
{
    //Gallery Name
    protected $galleryID;
    protected $galleryName;

    //Client Name
    protected $clientName;

    //Gallery Options
    protected $bg_color;
    protected $albumAgreement;
    protected $maxChanges;
    protected $sharing_on;

    //Revisions
    protected $revisions;

    public function setGalleryID($id)
    {
         $this->galleryID = $id;
    }

    public function getGalleryID()
    {
         return $this->galleryID;
    }

    public function setRevisions(Revisions $revisions)
    {
         $this->revisions = $revisions;
    }

    public function getRevisions()
    {
         return $this->revisions;
    }
}

$gallery = new Gallery();
$gallery->setRevisions(new Revisions());
var_dump($gallery->getRevisions()); 
```

或者使用构造函数

```
class Gallery
{
    //Gallery Name
    protected $galleryID;
    protected $galleryName;

    //Client Name
    protected $clientName;

    //Gallery Options
    protected $bg_color;
    protected $albumAgreement;
    protected $maxChanges;
    protected $sharing_on;

    //Revisions
    protected $revisions;

    public function __construct($id, Revisions $revisions)
    {
         $this->galleryID = $id;
         $this->revisions = $revisions;
    }

    public function getGalleryID()
    {
         return $this->galleryID;
    }

    public function getRevisions()
    {
         return $this->revisions;
    }
}

$gallery = new Gallery(1, new Revisions());
var_dump($gallery->getRevisions()); 
```

通过这种方式，您可以更好地控制输入内容、输出内容、只读（可获取）、只写（可设置）或两者兼而有之。例如，在 setter 中，您可以看到 Revisions 写在 $revision 之前。这确保只有一个修订对象可以设置为 $this->revisions。

# tomcat - 如何在 grails 中指定可移植的 jndi 数据源查找

> ID：13423067
> 
> 赞同：0
> 
> 时间：2012-11-16T19:24:24.687
> 
> 标签：tomcat, grails, weblogic, datasource, jndi

我知道 grails 中的 JNDI 查找非常简单

```
datasource {
  jndiName = "java:comp/env/myDataSource"
} 
```

这在 Tomcat 上效果很好。

在其他容器（WebLogic、JBOSS 等）上，相同事物的 jndiName 将只是`myDataSource`. 问题是如何将其配置为通用且*可移植*的，以便无需根据部署目标更改代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:09:58.590

您可能能够关闭您知道将在 Tomcat 中运行时设置的系统属性，而不是在其他任何地方设置，例如

```
datasource {
  jndiName = "${System.getProperty('catalina.home') ? 'java:comp/env/' : ''}myDataSource"
} 
```

# javascript - javascript本地存储

> ID：13423072
> 
> 赞同：2
> 
> 时间：2012-11-16T19:24:43.370
> 
> 标签：javascript, local-storage

如何检查本地存储值是否为空？例如..

```
localStorage.setItem('favoriteflavor','');

var taste = localStorage.getItem('favoriteflavor');

if(taste == null){
   console.log('favoriteflavor is null');
} 
else {
   console.log('favoriteflavor is NOT null');
} 
```

这是最有意义的，但我没有得到任何结果。这个我也试过了。。

```
 if(localStorage['favoriteflavor'] == 'null'){ 
   console.log('favoriteflavor is null');
 } 
```

[http://jsfiddle.net/AwsyE/6/](http://jsfiddle.net/AwsyE/6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:27:33.523

如果您设置`favoriteflavor`为空字符串，那么您应该检查它是否为空字符串而不是其他内容

```
localStorage.setItem('favoriteflavor','');
var taste = localStorage.getItem('favoriteflavor');
if(taste == ''){
   console.log('favoriteflavor is empty');    
}
else{
   console.log('favoriteflavor is NOT empty');
} 
```

或者，如果您要删除`favoriteflavor`，那么您可以对照 null 检查它

```
localStorage.setItem('favoriteflavor','chocolate');
delete localStorage['favoriteflavor'];
// or use localStorage.removeItem('favoriteflavor');

var taste = localStorage.getItem('favoriteflavor');

if(taste == null){

   console.log('favoriteflavor is null');

}
else
{
   console.log('favoriteflavor is NOT null');
} 
```

[http://jsfiddle.net/mowglisanu/AwsyE/10/](http://jsfiddle.net/mowglisanu/AwsyE/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:28:39.903

您在此处将您的项目设置为“”：

```
localStorage.setItem('favoritefla',''); 
```

并测试输出是否为 == null

```
if(localStorage['favoriteflavor'] == 'null' 
```

当它等于 '' 因为你自己之前已经设置了这个值。

我相信您正在尝试了解浏览器是否有`localStorage`容量，您可以通过测试是否可以从该对象中插入和删除项目来做到这一点，如下所示：

```
var hasStorage = (function() {
  try {
    localStorage.setItem(mod, mod);
    localStorage.removeItem(mod);
    return true;
  } catch(e) {
    return false;
  }
}()); 
```

如果浏览器具有 localStorage 容量，上述函数将返回 true。希望对你有帮助，加油

# foursquare - 在foursquare收集一个社区

> ID：13423074
> 
> 赞同：0
> 
> 时间：2012-11-16T19:24:47.510
> 
> 标签：foursquare

我正在使用 Foursquare API 制作应用程序，使用他们的 API 我可以在附近找到一些地方。

我正在使用这样的一个：

```
https://api.foursquare.com/v2/venues/explore
?ll=40.7,-74
&limit=50
&venuePhotos=1 
```

使用该 API，我可以在我的观点周围拍摄 50 个场地，但我怎样才能获得更多其他场地，比如第二页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:26:12.790

您可以使用“offset”参数来查询后续页面的结果。例如，要获取第二页，您将提供“offset=50”以指示跳过前 50 个结果。

# binary - 二进制系统（例如计算机）如何处理十进制？

> ID：13423083
> 
> 赞同：0
> 
> 时间：2012-11-16T19:25:18.873
> 
> 标签：binary, decimal, computer-science

虽然这个问题与程序没有明显关系，但我认为它很有趣，它会帮助我处理我正在研究的程序。

我的问题是这样的：

计算机是二进制系统，有 3 个基本操作可供它们使用：AND、OR 和 NOT（据我了解），它的所有其他功能都源自这些操作。我可以理解系统如何使用这些运算符对二进制数进行算术运算，但是系统如何在不使用常规运算符（即 +、-、*、/）的情况下为用户将这些数字转换为十进制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:31:35.280

你有[BCD](http://en.wikipedia.org/wiki/Binary-coded_decimal)或[IEEE 浮点](http://en.wikipedia.org/wiki/IEEE_floating_point)来处理二进制系统中的十进制，还有其他规范，但这些是最常见的，我认为 IEEE 是现在使用的计算机。

# algorithm - 证明 2^(na) = O(2^n)？

> ID：13423084
> 
> 赞同：1
> 
> 时间：2012-11-16T19:25:21.253
> 
> 标签：algorithm, complexity-theory

如何证明 2^(n+a) 是 O(2^n)？我唯一能想到的是 2^n 中的 n 是任意值，因此 n+a 也是任意值，因此 n+a = n。或者，2^(n+a) = 2^n * 2^a。2^n显然是O(2^n)，而a在2^a中作为任意值存在，所以2^a = 2^n = O(2^n)。是否有更清晰/更正式的方式来证明这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:29:15.063

对于 big-O 的正式定义，必须存在一个 M 和 n0 使得 2^(n+a) <= M*2^n 对于所有 n > n0。

如果我们选择 M = 2^a，并且 n0 = 0，那么我们可以看到 2^(n+a) = 2^a * 2^n = M*2^n，即 <= M*2^n对于所有 n > n0。因此，2^(n+a) 是 O(2^n)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:28:29.950

[请参阅此处](http://en.wikipedia.org/wiki/Big_O_notation#Formal_definition)的大 O 表示法的定义。想想你是否能找到`M`定义中的常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:29:02.800

一般来说，要证明`f(n)`是`O(g(n))`，您必须找到一个正整数`N`，使得对于所有`n >= N`，`f(n) <= g(n)`。

# c# - 为椭圆添加属性以获取鼠标事件 c#

> ID：13423086
> 
> 赞同：1
> 
> 时间：2012-11-16T19:25:22.690
> 
> 标签：c#, wpf

我在长循环中添加省略号（添加了 100 多个），并且我想知道在单击事件中循环添加的相同属性。在for循环内：

```
 var ellipse = new Ellipse();
 ellipse.myValue=12; // this needs to be editable and working
 ....
 ellipse.MouseDown += ellipseClick;
 canvas2.Children.Add(ellipse); 
```

这是听众：

```
private void ellipseClick(object sender, MouseButtonEventArgs e)
    {
        if(myValue==12) 
        ....
    } 
```

当然它有点复杂，每个椭圆都需要一个指针或 3 个 int 值。我不想在每个 Ellipse 上检查点击位置以及它是否与发送者相同。我不能扩展 Ellipse 类，因为它是密封的，我不能重写 Ellipse 类中的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:50:43.903

您可以使用`Tag`属性，但通用标签是 winforms 时代的遗留物。[在这里](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag.aspx)阅读。我不喜欢标签是它们没有类型，这意味着要从中读取，并且它们没有有意义的名称。另一种选择是：

**附件属性**

很难写，幸运的是 VS 有一个片段类型`propa`和按标签。

所以：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Shapes;

namespace SO_AttachmentProperty
{
    public sealed class EllipseAttachments
    {
        #region Field1
        public static int GetField1(DependencyObject obj)
        {
            return (int)obj.GetValue(Field1Property);
        }

        public static void SetField1(DependencyObject obj, int value)
        {
            obj.SetValue(Field1Property, value);
        }

        // Using a DependencyProperty as the backing store for Field1\.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty Field1Property =
            DependencyProperty.RegisterAttached("Field1", typeof(int), typeof(EllipseAttachments), new UIPropertyMetadata(0));
        #endregion

        #region Field2
        public static int GetField2(DependencyObject obj)
        {
            return (int)obj.GetValue(Field2Property);
        }

        public static void SetField2(DependencyObject obj, int value)
        {
            obj.SetValue(Field2Property, value);
        }

        // Using a DependencyProperty as the backing store for Field2\.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty Field2Property =
            DependencyProperty.RegisterAttached("Field2", typeof(int), typeof(EllipseAttachments), new UIPropertyMetadata(0));
        #endregion
    }
} 
```

然后像这样使用属性：

**在代码中**

```
var ellipse = new Ellipse();

//write
EllipseAttachments.SetField1(ellipse, 123);
EllipseAttachments.SetField2(ellipse, 456);

//read
var f1 = EllipseAttachments.GetField1(ellipse);
var f2 = EllipseAttachments.GetField2(ellipse); 
```

**附件属性在 xaml 中有自己的** 注意本地命名空间。

```
<Window x:Class="SO_AttachmentProperty.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SO_AttachmentProperty"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Ellipse local:EllipseAttachments.Field1="789" local:EllipseAttachments.Field2="67"/>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T19:33:25.763

您可以使用`Tag`-property 来存储附加信息。

```
ellipse.Tag = 12; 
```

我希望这是您所要求的，但根据您对我的问题的评论，您只想存储每个椭圆的信息。

您可以创建一个包含您想要的所有信息的结构或类，然后将其设置`Tag`为该类。它允许你存储任何你想要的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T19:34:08.360

您可以使用包含对象的 Tag 属性。你可以放任何你想要的东西，你可以创建你的类来保存任意数量的值。你可以做这样的事情。  

```
var ellipse = new Ellipse();
ellipse.Tag=12;

private void ellipseClick(object sender, MouseButtonEventArgs e)
{
    Ellipse ellipse = (Ellipse)sender;
    int value = (int)ellipse.Tag           
    if(value==12) 
    ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T19:36:20.323

创建一个包含椭圆并以统一方式处理鼠标悬停的自定义控件。在自定义控件（可能是所有其他控件的依赖属性）中提供了解其他省略号并根据需要获取发件人信息的能力。

# javascript - 使用 jQuery 的 .wrap 元素上方的所有子元素

> ID：13423089
> 
> 赞同：1
> 
> 时间：2012-11-16T19:25:39.393
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<div class="main_container">
  <a href="#">Financial</a>
  <div class="sub_container">
    <a href="#">Financial services</a>
    <a href="#">Government</a>
  </div>
  <img class="image" src="img/img.png">
  <a href="#">Education</a>
  <div class="sub_container">
    <a href="#">Broadcast and media</a>
    <a href="#">Education</a>
  </div>
  <a href="#">Government</a>
  <div class="sub_container">
    <a href="#">Broadcast and media</a>
    <a href="#">Government</a>
  </div>
  <img class="image" src="img/img.png">
</div> 
```

我试图环绕 img 标记上方的所有元素，但没有结果，我已经尝试使用 wrap、wrapAll、prevAll 但这些不起作用。

我试图得到的输出代码：

```
<div class="main_container">

  <div class="WRAP_CONTAINER">
      <a href="#">Financial</a>
      <div class="sub_container">
        <a href="#">Financial services</a>
        <a href="#">Government</a>
      </div>
  </div>

  <img class="image" src="img/img.png">

  <div class="WRAP_CONTAINER">
      <a href="#">Education</a>
      <div class="sub_container">
        <a href="#">Broadcast and media</a>
        <a href="#">Education</a>
      </div>
      <a href="#">Government</a>
      <div class="sub_container">
        <a href="#">Broadcast and media</a>
        <a href="#">Government</a>
      </div>
  </div>

  <img class="image" src="img/img.png">
</div> 
```

请帮忙，我开始失去理智了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:40:20.083

这应该这样做

```
​$("img")​.each(function()
{
    $(this).prevUntil("img").wrapAll("<div class='WRAP_CONTAINER'></div>");
})​;​ 
```

# arrays - 数组上的 SSE/SIMD 指令：处理边界

> ID：13423094
> 
> 赞同：1
> 
> 时间：2012-11-16T19:25:53.233
> 
> 标签：arrays, filtering, sse, simd, convolution

我有一个与英特尔 SSE 指令相关的问题，但它是 SIMD 编程/并行性的一般问题。

例如，我们可以考虑一[维滤波器/卷积](https://stackoverflow.com/questions/8163423/pipelining-1d-convolution-algorithm-using-c-on-dsp-development-board)。如果内核的大小为 3，我必须避免输入数组的第一个和最后一个元素，因为它们没有邻居（是的，我必须设置边界条件）。很容易将“特殊情况”与输入数组的其余元素分开处理（检查上面链接中的代码以查看不同的“if”语句）。

例如，当对 8 位数据使用 SSE 时，我一次可以计算 16 个值（128 位/8 位 = 16 个同时操作）。但是，我应该如何管理边界条件？在这种情况下，我对最后 16 个值（实际上是 15）有问题，即使数组大小是 16 的倍数。

我不确定我是否正确解释了问题。关键是：在处理数组和 SIMD 指令时，我应该如何处理边界？我搜索了相关的源代码，但我没有找到任何解释这一点的东西，即使在英特尔的网站上也是如此。任何想法都会受到欢迎。

# autohotkey - 替代使用睡眠功能？

> ID：13423096
> 
> 赞同：2
> 
> 时间：2012-11-16T19:26:01.017
> 
> 标签：autohotkey

你如何运行一个不被同一脚本中另一个热键命令激活的睡眠命令中断的循环？我知道一个简单的解决方法是拥有 2 个 ahk 文件，但我想合并到一个脚本中。

例如我的示例代码。wav 文件位于同一文件夹位置，因此对我有用。否则脚本将忽略 SoundPlay 命令。就像现在的代码一样，循环工作正常，但每次我运行 RandomLabel 热键（按键盘上的 s）时都会被禁用，但会在 Sleep 命令到期后再次启用。

```
Esc::Reload 
+1::Test()  
Test()  
{  
SoundPlay,Activated.wav  
Hotkey,~s,RandomLabel,Toggle  
loop  
{  
    PixelGetColor,color,707,721,Slow  
    if(color=0xFFFFFF)  
    {  
        SoundPlay,Pong.wav  
        loop  
        {  
            PixelGetColor,color,707,721,Slow  
            if(color=!0xFFFFFF)  
            {  
                SoundPlay,Ping.wav  
                break  
            }  
        }  
    }  
}  
}  
RandomLabel:  
Sleep,2000  
SoundBeep,750,300  
return 
```

编辑：代码的目标是运行不间断循环，同时在播放声音文件之前使用热键激活倒数计时器。如果可能，这一切都在 autohotkeys [1中完成。](http://www.autohotkey.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:22:44.373

试试`SetTImer`。

```
RandomLabel:  
    settimer, LabelSoundBeep, -2000
return  
LabelSoundBeep:
    SoundBeep,750,300  
return 
```

# visual-studio-2010 - Visual Studio 自动关闭 DIV 周围的 Legend

> ID：13423097
> 
> 赞同：0
> 
> 时间：2012-11-16T19:26:15.977
> 
> 标签：visual-studio-2010, html, legend, autoformatting

所以我在整个项目中都有一些代码，

```
 <fieldset>
        <div  class="legendContainerInactive">
            <legend>Legend Stuff
            </legend>
        </div>
 ....
 </fieldset> 
```

这让我的传奇故事的顶部变得漂亮而饱满 - 基本上是一个颜色条。但是，Visual Studio 已决定不能将 Legends 包含在 div 中。这可能是某个地方的标准，但天哪，我的代码是这样工作的，在所有浏览器上看起来都很棒。

每次我保存 Visual Studio 时都会添加一个关闭 div，所以它看起来像这样

```
 <fieldset>
        <div  class="legendContainerInactive">
        </div>
            <legend>Legend Stuff
            </legend>
        </div>
 ....
 </fieldset> 
```

所以我的页面不断中断，因为一个额外的 div VS 决定非常重要。我已禁用 VS 关闭格式化程序中的 div，并阻止它关闭标签。它一直在这样做。啊！我如何让它停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:35:07.877

这是因为 a`<legend>`不应该在`<div>`标签下 a`<legend>`只能在 a 下使用`<fieldset>`，它本身就是`<form>`标签的子级。

`Correct Syntax-Structure to use these will be somewhat like this:`

```
<form>
    <fieldset>
        <legend> … </legend>
    </fieldset>
</form> 
```

所以起初你不应该以这种方式使用它，VS 会继续纠正它，但如果你仍然想使用：

*   `Options`您可以在> `Text Editor`> `HTML`>中禁用此自动标记关闭`Formatting`并取消选中`Auto insert close tag`.

但是，我仍然建议按照标准约定和规则进行操作，您永远不知道下一次浏览器更新将为您带来什么..

看：

[HTML 图例标签](http://www.w3schools.com/tags/tag_legend.asp)

[DTD（文档类型定义）](http://www.w3schools.com/dtd/default.asp)

谢谢你。

# javascript - 向 Jeditable 提供回调

> ID：13423099
> 
> 赞同：0
> 
> 时间：2012-11-16T19:26:34.027
> 
> 标签：javascript, jquery, callback, jeditable, jquery-callback

**摘要：**当我尝试向Jeditable提供一个`onsubmit`或回调时，我得到了错误。`onreset``Object [function] has no method 'apply'`

**我是如何到达这里的：**我一直在开发[一个 Rails 插件，以提供 Jeditable 和 jWYSIWYG](https://github.com/pjmorse/jeditable-wysiwyg-rails)用于就地所见即所得编辑。开发是由我正在处理的 Rails 项目驱动的，该项目需要特定的功能。

我添加的选项之一是能够使用按钮触发 Jeditable 的编辑模式，而不是单击可编辑文本本身，遵循[此答案](https://stackoverflow.com/a/11955863/306084)中建议的模式。但是，下一步是在编辑模式下隐藏按钮，并在离开编辑模式时再次显示它。

隐藏很容易；我刚刚在发送`.toggle()`到按钮的触发函数中添加了一行。揭示更棘手。我想我需要`.toggle()`再次提交或取消，并且有用的是，Jeditable 提供`onsubmit`和`onreset`回调。

但是，当我尝试使用这些回调时，我得到了这个`Object [something] has no method 'apply'`错误。

**我正在尝试什么：**因为这是在 Rails 助手的上下文中，实际的机制比这更复杂一些，但结果是我试图遵循[这种模式](https://stackoverflow.com/a/1189758/306084)，在 args 中传递 Jeditable ：

```
"onsubmit":"showTrigger", 
```

然后包括这个脚本：

```
function showTrigger(settings, original) {
    $(".edit_trigger[id='element_id']").toggle();
} 
```

但是，在提交更改或取消编辑时，我收到错误

```
Object showTrigger has no method 'apply' 
```

...如上所述。

我还尝试直接发送一个函数作为`"onsubmit"`参数（即`"onsubmit": "function(settings, original){$(\".edit_trigger[id='element_id']\").toggle();}"`然后我只是得到`Object function(settings, original){$(\".edit_trigger[id='element_id']\").toggle();} has no method 'apply'`了。

我处理这个回调的方式一定有问题。有任何想法吗？

ETA：[这个答案](https://stackoverflow.com/a/11666349/306084)向我表明，当它需要一个函数时，我以某种方式向 Jeditable 提供了一个字符串。但是，因为我在 Rails 助手的上下文中工作，所以我完全不确定如何解决这个问题 - 该`"showTrigger"`位在助手中设置为 Ruby 变量，虽然`window.showTrigger()`是在加载窗口时定义的，但我不知道如何在 Ruby 变量中指定该函数，以便在页面加载时将其识别为函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:57:43.933

正如我上面的 ETA 所建议的那样，问题确实是传递一个字符串而不是一个函数。我的 Rails 助手通过获取参数散列并使用`.to_json`. 这使得字符串函数名变成了一个带引号的字符串。为了将此参数提供为 Jeditable 可以理解的函数名称，我需要将这些特定参数作为预 JSON 化参数包含在内。

换句话说，我没有定义一个包含带有函数名称的字符串的 Ruby 变量，而是定义它包含带有函数名称的 JSON 对象。而不是`trigger_reset = 'showTrigger'`我用`trigger_reset = '{ onsave: showTrigger, onreset: showTrigger }'`.

然后，我没有将它作为另一个参数包含在`args`散列中，而该散列是`args`使用 JS 添加到对象中的`$().extend()`，而是将`trigger_reset`变量的值作为第三个参数添加到`extend()`.

当然，事实证明这一切都与我最初的问题中没有包含的代码有关，所以难怪没有人能提供帮助。对不起，还是谢谢。

# mysql - 为什么不显示错误记录 MySQL 存储过程中抛出的 SQL 异常？

> ID：13423103
> 
> 赞同：3
> 
> 时间：2012-11-16T19:26:55.040
> 
> 标签：mysql, sql, stored-procedures, exception-handling

在 MySQL 存储过程中，我正在处理 SQL 异常：

```
DECLARE EXIT HANDLER FOR SQLEXCEPTION 
    BEGIN
        SELECT "SQL exception occured." AS "SQL Exception";
        SHOW ERRORS;
        SHOW WARNINGS;
        ROLLBACK;
    END; 
```

我知道正在引发异常，因为`SQL exception occured`正在显示消息并且事务被回滚。但是，在`SHOW ERRORS`or`SHOW WARNINGS`表中没有填充任何内容。为什么会这样，我如何判断抛出了哪个 SQL 异常？

这是导致神秘异常的 SQL 语句：

```
SELECT IF(count(*) = 0, TRUE, FALSE) 
FROM information_schema.COLUMNS 
WHERE TABLE_SCHEMA='myDatabase' 
AND TABLE_NAME='exam'; 
```

编辑：

[Bohemian](https://stackoverflow.com/a/13423266/1245897)已通知我异常正在被处理程序吞噬。那么如何找出异常是什么并且仍然回滚呢？在 java catch 块中，我可以使用`Exception.getMessage()`or看到异常`Exception.printStackTrace()`。MySQL中是否有类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:38:38.007

当您为 声明处理程序时`SQLEXCEPTION`，会消耗异常 - 它被视为“已处理”，因此不再存在“异常”。

如果您的存储过程流依赖于特定异常，则必须为特定[SQLSTATE 错误代码](http://dev.mysql.com/doc/refman/5.1/en/error-messages-server.html)声明处理程序，例如

```
DECLARE EXIT HANDLER FOR SQLSTATE `23000` 
```

实际上，所有的处理程序实际上都是这种形式，因为：

*   `SQLEXCEPTION``SQLSTATE`是不以 、 或 开头的值`'00'`类`'01'`的简写`'02'`
*   `SQLWARNING``SQLSTATE`是开头的值类的简写`'01'`
*   `NOT FOUND``SQLSTATE`是开头的值类的简写`'02'`

# facebook - 使用 Facebook Open Graph 进行 GA UTM 活动跟踪

> ID：13423105
> 
> 赞同：3
> 
> 时间：2012-11-16T19:27:05.990
> 
> 标签：facebook, google-analytics, facebook-opengraph, tracking

当我使用自定义 FB Open Graph 操作（绑定到 FB 文章对象）时，我使用 Google Analytics UTM Campaign URL 参数提交指向网络上原始文章的链接。我假设 FB linter 然后抓取该文章并使用页面上打开的图形标签中找到的 URL，而不是我提交的 URL，它不包含任何跟踪数据。当用户单击我打开的图表帖子中的链接时，它会转到没有原始跟踪信息的文章（Facebook 外部）。

关于如何支持开放图形共享链接的 url 参数或 UTM 活动跟踪的任何想法？或者有没有办法在域/链接级别查询 FB 见解以获取点击数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:33:24.330

您可以在创建 OG 操作时使用可选的“ref”参数。当用户单击您的 OG 故事链接时，Facebook 会将原始 ref 参数中的该值包含为“fb_ref”。更多信息可在此处获得：

[https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-action/](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-action/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T16:12:17.273

您可以在 ![在此处输入图像描述][1]人口统计部分的见解中找到它

转到 1) App Insights 2) 选择 Open Graph 3) 选择 Demographics

在右边你搜索 Ref Parameter 部分 - 你应该在那里看到统计数据

# jakarta-ee - 2 个 WAR 具有相同类时的 JBoss 类加载

> ID：13423108
> 
> 赞同：3
> 
> 时间：2012-11-16T19:27:14.767
> 
> 标签：jakarta-ee, jboss, classloader, jboss5.x

我有一个 Web 应用程序 A.war，它有两个 servlet`AServlet`和`BServlet`. 两者都实例化了一个辅助类`com.mycompany.Foo.class`（这是我自己的类，不是第三方库）。

现在我想将两个 servlet 拆分为两个单独的 WAR：A.war 将只有 AServlet，而新的 B.war 将具有`BServlet`. 将通过 HTTP GET`AServlet`调用。`BServlet`两个 WAR 都将具有`com.mycompany.Foo.class`. 我想在同一个 JBoss 实例上部署两个 WAR。

问题是，由于两个 WAR 中存在相同的类，并且 WAR 部署在同一个 JBoss 实例上，是否会出现任何类加载问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:11:47.153

`com.mycompany.Foo.class`是的，如果两个 WAR 不完全相同，就会出现问题。在 JBoss 5.1 中，默认情况下，类名是唯一的（统一类加载）。这意味着只能有一个`com.mycompany.Foo.class`，并且在两个应用程序之间共享。可以禁用此行为。

查看 (JBossClassLoaderHistory)[https://community.jboss.org/wiki/JBossClassLoaderHistory] ​​了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:51:56.550

不，你不应该遇到任何问题。默认情况下，Web 应用程序类加载器的工作方式与 Java2 委托模型不同：当 Web 应用程序首先需要一个类时，它将查找本地存储库（即 web-INF/classes 或 WEB-INF/libs 中的类和库目录）而不是委托。因此，您提出的配置将毫无问题地工作。

但是由于两个战争都包含同一个类，您是否考虑过将这个类打包到一个 jar 中并将其放在 jboss 实例 lib 目录中？这样您就不需要将它包含在您在实例中部署的所有 Web 应用程序中。

在此处查看[Jboss 文档](http://docs.jboss.org/jbossweb/2.1.x/class-loader-howto.html)。

# java - 对象名使用通配符时无法访问 mbean

> ID：13423109
> 
> 赞同：5
> 
> 时间：2012-11-16T19:27:16.817
> 
> 标签：java, regex, jmx, objectname

我在使用 ObjectName 表达式匹配访问 mbean 时遇到问题。以下代码成功设置布尔 b：

```
ObjectName objName =
    new ObjectName("UnifiedSystem-search Cluster Control l-c:class=myclass");
boolean b = (boolean)myMBeanServer.invoke(objName, "areAlertsSuppressed"); 
```

问题是 mbeanname 会根据编码环境而变化。但是，名称仅略有变化，可以通过 ObjectNames 支持的内置表达式轻松处理。以下代码（在与上述相同的环境中）抛出一个 InstanceNotFoundException：

```
ObjectName objName =
    new ObjectName("UnifiedSystem-search Cluster Control *:class=myclass");
boolean b = (boolean)myMBeanServer.invoke(objName, "areAlertsSuppressed") 
```

有什么想法可以得到我想要的结果吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T19:31:01.423

> 对象名使用通配符时无法访问 mbean

据我所知，`ObjectName`该方法不处理任何通配符模式`invoke`。您将不得不使用该`myMBeanServer.queryNames(...)`方法来查找与您的模式匹配的 bean。然后你可以`invoke`用特定的名字打电话。

```
Set<ObjectName> nameSet = myMBeanServer.queryNames(new ObjectName(
       "UnifiedSystem-search Cluster Control *:class=myclass"), null);
// then use the first name from the set
// some error checking is needed here to make sure there is a name in the set
myMBeanServer.invoke(nameSet.iterator().next(), "areAlertsSuppressed") 
```

# c++ - 如何将 BGRA 缓冲区转换为 RGBA 缓冲区格式？

> ID：13423110
> 
> 赞同：0
> 
> 时间：2012-11-16T19:27:20.437
> 
> 标签：c++, video-streaming, rgba

如何在 C++ 中将 BGRA 缓冲区转换为 RGBA 缓冲区格式

```
void ConvertBetweenBGRAandRGBA(unsigned char* input, int pixel_width,int pixel_hight,
                           unsigned char* output) {

        for (int y = 0; y < pixel_hight; y++) {
        for (int x = 0; x < pixel_width; x++) {
        const unsigned char* pixel_in = &input[y * x * 4];

        unsigned char* pixel_out = &output[y * x * 4];
        pixel_out[0] = pixel_in[2];
        pixel_out[1] = pixel_in[1];
        pixel_out[2] = pixel_in[0];
        pixel_out[3] = pixel_in[3];
     }
} 
```

但我没有得到背景颜色。

请任何人帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:43:40.407

这不是 C#，所以请适当地重新标记它。

假设这是位图数据，首先，您需要弄清楚图像的*步幅*。步幅是每行像素使用的字节数。这并不总是等于`bytes_per_pixel * pixels_per_row`。它通常与四个字节对齐，所以在这种情况下（因为 ARGB 像素每个像素使用四个字节）你应该没问题。

其次，您获取像素 (x, y) 地址的公式是错误的。像素以行优先顺序存储。这意味着，从像素缓冲区中的偏移量 0 开始，您将看到一整行像素数据；然后是另一个完整的行；等等。每行像素数据都有一个完整的字节步长。

你*可以*这样做：

```
const unsigned char* pixel_in = &input[((y * pixel_width) + x) * 4]; 
```

但是如果你的stride确实等于图片宽度，就不需要每次都计算地址，因为像素会按顺序存储：

```
void ConvertBetweenBGRAandRGBA(unsigned char* input, int pixel_width,
    int pixel_height, unsigned char* output)
{
    int offset = 0;

    for (int y = 0; y < pixel_height; y++) {
        for (int x = 0; x < pixel_width; x++) {
            output[offset] = input[offset + 2];
            output[offset + 1] = input[offset + 1];
            output[offset + 2] = input[offset];
            output[offset + 3] = input[offset + 3];

            offset += 4;
        }
    }
} 
```

如果仍然无法正确显示，请确认正确的像素包装是什么。它应该是 ARGB 或 BGRA；我从未听说过打包为 RGBA 的像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-05T20:24:30.533

杰夫的遮阳篷可以工作，但有一点细节你永远不会存储第一个偏移量。只需添加一个临时值，它就会像对我一样具有魅力：D

```
void ConvertBetweenBGRAandRGBA(unsigned char* input, int pixel_width, int pixel_height, unsigned char* output)
{
    int offset = 0;

    for (int y = 0; y < pixel_height; y++) {
        for (int x = 0; x < pixel_width; x++) {

            auto temp = output[offset];
            output[offset] = input[offset + 2];
            output[offset + 1] = input[offset + 1];
            output[offset + 2] = temp;
            output[offset + 3] = input[offset + 3];

            offset += 4;
        }
    }
} 
```

# php - 在 CodeIgniter 中使用配置文件作为对象

> ID：13423112
> 
> 赞同：0
> 
> 时间：2012-11-16T19:27:28.800
> 
> 标签：php, codeigniter, object

我不想在控制器和视图中使用和传递数组，在一段真正的代码混乱之后，我发现创建一个对象可以节省我的时间。

我对对象不是很熟练，但经过许多证明和错误（谁没有？）我明白了：

* * *

## 应用程序/**配置**/events.php：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
$config['gallery']['general_folder'] = 'gallery';
$config['gallery']['user_folder']    = 'thumb'; 
```

## 应用程序/**控制器**/events.php：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
class Events extends CI_Controller
{
  var $gallery;

  public function __construct()
  {
    parent::__construct();
    $this->config->load('events', TRUE);
    $this->gallery = (object)$this->config->item('gallery', 'events');
  }

  public function index()
  {
     $thumb = $this->gallery->user_folder; // 'thumb'
  }
} 
```

## 应用程序/**视图**/events.php：

```
echo $this->gallery->general_folder; // output: gallery 
```

* * *

问题是：是否有一种（n）（未）记录的方法可以按照 CodeIgniter 的最佳实践将这种数组转换为对象？

提前致谢。

# c# - visual studio C# 2010 转换问题

> ID：13423119
> 
> 赞同：0
> 
> 时间：2012-11-16T19:27:48.157
> 
> 标签：c#, visual-studio-2010

运行到这个问题。我在 Visual Studio 2010 中打开一个项目。转换向导出现，我按完成。它会打开项目，但无法编译，并在所有引用都存在时抱怨缺少程序集引用。我怀疑这是因为转换。.csproj 文件从：

```
<Project DefaultTargets="Build"      
 xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5"> 
```

至

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build"
xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0"> 
```

所以目标框架发生了变化。如何禁用此功能？我没有从我这边做任何事情。刚打开项目，编译失败。Visual Studio 2010 中是否有一些智能来禁用或不这样做，所以我可以进行一些开发和编译。它引用了大量其他项目，我没有转换它们的选项。

该项目最初是在 2008 年开发的，我现在在 VS 2010 中打开。

***更新*** 看起来问题是从这个旧应用程序引用的一些程序集已升级到目标框架 3.5。但是这个应用程序仍然针对 2.0。所以我升级了它的目标框架。

现在还有另一个问题。此应用程序和引用的程序集都引用了程序集 A。但应用程序引用的是 A 5.0，而引用的程序集引用的是版本 A 6.0。所以 Visual Studio 对此有所抱怨。为什么这些版本必须匹配？应用程序及其引用的程序集不能使用不同版本的通用程序集吗？

Visual Studio 中的错误报告是阴暗和可悲的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:30:20.960

不，这并没有改变目标框架。它改变了*工具*版本。它仍然应该针对相同版本的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:08:58.077

更新看起来问题是从这个旧应用程序引用的一些程序集已升级到目标框架 3.5。但是这个应用程序仍然针对 2.0。所以我升级了它的目标框架。

现在还有另一个问题。此应用程序和引用的程序集都引用了程序集 A。但应用程序引用的是 A 5.0，而引用的程序集引用的是版本 A 6.0。所以 Visual Studio 对此有所抱怨。为什么这些版本必须匹配？应用程序及其引用的程序集不能使用不同版本的通用程序集吗？

Visual Studio 中的错误报告是阴暗和可悲的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:42:17.790

有什么特别的组装吗？.NET fwk 或您自己的程序集缺少引用吗？我记得您可以通过在 csproj 文件中将版本号从 10 增加到 11 来跳过转换器（如果您来自 vs2008）

# drupal - 如何在 Drupal 7 中指定用于系统主菜单的菜单

> ID：13423120
> 
> 赞同：0
> 
> 时间：2012-11-16T19:27:49.383
> 
> 标签：drupal, drupal-7

我试图弄清楚如何指定用于系统菜单的自定义菜单。我知道我可以在 tpl 中包含自定义菜单，但要覆盖 system_main_menu 并告诉它使用不同的菜单。我假设我会在预处理函数中执行此操作，但对 Drupal 来说是新手，不知道从哪里开始。谷歌搜索后，我发现：

```
links__system_main_menu 
```

猜测这就是我将用于预处理功能的内容，但需要知道如何告诉它使用哪个自定义菜单。

编辑：

或者也许更好的问题是如何使用自定义菜单之一为主题定义系统主菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:41:50.423

进入你的管理员

管理/结构/菜单/设置

在那里你可以设置默认主菜单

更新：这是我在[drupal.org上找到的](http://drupal.org/node/1246484)

```
function yourtheme_menu_link__main_menu(array $variables) {
  $element = $variables['element'];
  $sub_menu = '';

  if ($element['#below']) {
    $sub_menu = drupal_render($element['#below']);
  }

  $element['#localized_options']['html'] = TRUE;
  $linktext = '<span class="your_class">' . $element['#title'] . '</span>';

  $output = l($linktext, $element['#href'], $element['#localized_options']);
  return '<li' . drupal_attributes($element['#attributes']) . '>' . $output . $sub_menu . "</li>\n";
} 
```

公关

# html - 我的 @Html.Partial 不在我的 _Layout.cshtml 中

> ID：13423125
> 
> 赞同：0
> 
> 时间：2012-11-16T19:28:02.820
> 
> 标签：html, css, asp.net-mvc, razor

我的屏幕如下所示：

![在此处输入图像描述](../Images/c805741f9924517cd79753f9b60bae73.png)

如您所见，客户信息和余额显示在我的 _Layout.cshtml 之外。

**这是我的 _Layout.cshtml：**

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
  <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>

  <script>
    $(function () {
      $('.focus :input').focus();
    });
  </script>

</head>
<body>
    <div class="page">
        <div id="header">

            <div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>
            <div id="menucontainer">
              <ul id="menu">

                @if (User.Identity.IsAuthenticated)
                {
                  <li>@Html.ActionLink("Update Account", "UpdateAccount" , "Account")</li>
                  <li>@Html.ActionLink("Change Password", "ChangePassword", "Account")</li>
                  <li>@Html.ActionLink("Accounts", "CustomerSummary", "Customer")</li>
                }
                else
                { 
                  <li>@Html.ActionLink("Logon", "Logon", "Account")</li>
                  <li>@Html.ActionLink("Register", "Register", "Account")</li>                  
                }

                  <li>@Html.ActionLink("ContactUs", "ContactUs", "Home")</li>
              </ul>
            </div>
        </div>
        <div id="main">
            @RenderBody()
        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html> 
```

**还有我的网页：**

```
@model SuburbanCustPortal.SuburbanService.CustomerData      

@{
    ViewBag.Title = "Account Screen";
 }

<h2>AccountScreen</h2>

<div class="leftdiv">
  <fieldset>
    <legend>customer info</legend>
    @Html.Partial("CustomerInfoPartialView", Model)
  </fieldset>
</div>

<div class="rightdiv">
    <fieldset> 
      <legend>balance</legend>
      <div>
        @Html.Partial("BalancePartialView", Model)
      </div>    
    </fieldset>
</div> 
```

任何想法为什么它不在我的布局内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:33:12.107

容器内的浮动不会在不使用“清除”div 的情况下将容器扩展至全高。例如，您需要一个清除 div `<div id="main">`：

```
<div id="main">
    @RenderBody()
    <div style="clear: both;"></div>
</div> 
```

有许多其他方法可以做到这一点，但这是最直接的。

# visual-studio - 在 Windows 8 上运行 Visual Studio 2008

> ID：13423126
> 
> 赞同：2
> 
> 时间：2012-11-16T19:28:04.040
> 
> 标签：visual-studio, windows-8

我工作的公司正在考虑从 Windows 7 升级到 Windows 8。我们正在使用 Visual Studio 2008，我们希望继续在 Windows 8 上使用它。我想知道是否有人在 Windows 8 上运行 Visual Studio，如果你是如何它对你有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T00:30:08.523

是的，我设法在 Windows 8 上使用 Visual 2008 毫无问题地构建 Win32。这不是我的主要环境，但它按预期工作。可以在同一台机器上安装 VS2008、2010 和 2012：您需要先安装最旧版本的 Visual Studio。

这并不是说所有其他 SDK 都可以在 Windows 8 上正常安装，但我怀疑大多数都可以正常工作。

# javascript - 如果可能，jQuery Moble 返回一页，否则转到此处

> ID：13423133
> 
> 赞同：1
> 
> 时间：2012-11-16T19:28:16.940
> 
> 标签：javascript, jquery-mobile

在 jQuery mobile 中是否可以检查 history.back() 是否是应用程序中的页面？如果它不是应用程序中的页面，那么我想定向到特定页面。

示例：用户从主页单击登录并转到 login.html。登录成功处理并调用 history.back() 并且用户返回主页。

用户在 login.html 处输入。登录成功处理，由于用户不是来自应用程序中的另一个页面，因此他们被带到 account.html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:01:41.763

通过存储重定向页面解决了问题。

# inputbox - Excel使用输入框通过选择工作表选项卡而不是工作表中的单元格而不是活动表来获取工作表名称

> ID：13423134
> 
> 赞同：1
> 
> 时间：2012-11-16T19:28:20.327
> 
> 标签：inputbox

我有一个包含图表、计算和数据表的 Excel 工作簿。

我在 VBA 中尝试做的是：

我有一个脚本可以设置计算表并将新数据导入其中。问题是我必须手动输入数据表的名称。我正试图尽可能地自动化这个过程，因为我和 lol 一起工作的 luddites！

我试图找出一种方法来设置一个输入框，这样当它弹出时它会提示我选择一个不同的工作表来导入数据。然后我单击数据表选项卡，它使用该工作表名称作为工作表来获取数据并在单击后启动脚本的其余部分。只需在我刚刚描述的脚本部分中单击即可。

我确实找到了这个...

```
Sub Sample()
    Dim varCellContent As Range
    Dim strDestinationSheetName As String

    On Error Resume Next
    Set varCellContent = Application.InputBox(Prompt:="Choose a sheet by clicking on any cell in it.", Type:=8)
    On Error GoTo 0

    If Not varCellContent Is Nothing Then
        strDestinationSheetName = varCellContent.Parent.Name

        MsgBox ("Sheet = " & strDestinationSheetName)
    End If
End Sub 
```

这是我需要的，但我必须使用此代码选择单元格。我需要能够不选择单元格。如果他们在工作表中走得太远，他们就会迷路！哈哈！

由于公司安全，我不能使用插件或需要安装的东西

任何帮助将不胜感激！

# jquery - jQuery FullCalendar 以编程方式更改事件渲染颜色

> ID：13423136
> 
> 赞同：1
> 
> 时间：2012-11-16T19:28:28.030
> 
> 标签：jquery, fullcalendar

我正在开发 jQuery 插件 fullcalendar 的多用户版本。每个用户都有一个独特的颜色。您在下拉列表中更改用户。因此，我可以为用户现有事件分配颜色。

问题是当您渲染一个新事件时，在初始化时分配给 fullCalendar 的 'eventColor' 属性的颜色不会改变。

假设用户 1 有例如蓝色事件。我用'eventColor'蓝色初始化fullCalendar。当我更改为具有黄色事件的用户 2 时，呈现的事件仍显示蓝色事件。我希望从我开始拖动到释放事件的那一刻，事件都是黄色的。

我尝试使用 $('.calendar').fullCalendar('option', 'eventColor', 'NEW_COLOR_HERE'); 更改事件渲染颜色 但这不起作用。

有人发现自己处于同样的情况并想出了解决方案吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:03:46.890

如果您更改全局颜色，请尝试`rerenderEvents`.

但看起来您可能只想设置一个事件的[事件](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/) `color`属性（例如 from `eventClick`），然后调用`updateEvent`.

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:12:30.653

```
function option(name, value) {

        if (value === undefined) {
           return options[name];
        }
        if (name == 'height' || name == 'contentHeight' || name == 'aspectRatio') {
            options[name] = value;
            updateSize();
        }
       // So I added these lines to the plugin and voila, it works like charm!
       if(name == 'eventColor') {
           options[name] = value;
       }
} 
```

在你的脚本中调用它

```
$('.calendar').fullCalendar('option', 'eventColor', '#NEW_COLOR_HERE'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T12:08:09.273

以编程方式更改事件颜色的一种方法，首先使用 检索事件（基于其 id）`clientEvents`，更改其颜色，最后使用 重新渲染事件`updateEvent`：

```
event = $('#full-calendar').fullCalendar('clientEvents', event_id)
event.color = 'red'
$('#full-calendar').fullCalendar('updateEvent', event) 
```

# visio - 在 Visio 中连接图层

> ID：13423139
> 
> 赞同：1
> 
> 时间：2012-11-16T19:28:34.800
> 
> 标签：visio

我正在使用组织结构图来绘制我们团队的工作图。对于每个特定的员工，我希望能够在组织结构图上单击他们的形状文件/名称，并将其绑定到另一个层，该层显示他们当前正在处理的事情的流程图。

1.  这可能吗？

2.  如何将第 1 层上的形状链接到第 2 层以完成该任务？

3.  我可以跨多个图层使用多种样式的图表吗？例如……第 1 层的组织结构图。第 2 层的头脑风暴/工程。等等。

任何和所有的帮助将不胜感激！

# css - -webkit-animation 在移动 Safari 上滚动时停止

> ID：13423140
> 
> 赞同：2
> 
> 时间：2012-11-16T19:28:35.610
> 
> 标签：css, mobile-safari, webkit-animation

我正在为移动网站制作 css3 加载动画。加载器使用以下 HTML / CSS 可以正常工作：

HTML：

```
<div class="loader"></div> 
```

CSS：

```
 .loader {
    background-color: rgba(0,0,0,0);
    border: 6px solid rgba(0,0,0,0.75);
    opacity: 0.5;
    border-top: 6px solid rgba(0,0,0,0);
    border-left: 6px solid rgba(0,0,0,0);
    border-radius: 60px;
    box-shadow: 0 0 5px rgba(0,0,0,0.5);
    width: 60px;
    height: 60px;
    margin: 0 auto;
    -moz-animation: spin 1s infinite linear;
    -webkit-animation: spin 1s infinite linear;
}

    @-moz-keyframes spin {
        0% { -moz-transform:rotate(0deg); }
        100% { -moz-transform:rotate(360deg); }
    }

    @-webkit-keyframes spin {
        0% { -webkit-transform:rotate(0deg); }
        100% { -webkit-transform:rotate(360deg); }
    } 
```

但是，在 mobil safari 上查看动画时，当页面被滚动/触摸时，动画会暂停。即使用户正在滚动页面，有没有办法让动画继续播放？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:08:25.723

我不相信这是目前可能的。您必须执行自己的滚动实现（或使用框架）以避免这种副作用。我推测，但欢迎更多技术见解 - 这是因为本机滚动和 CSS 动画都在争夺 GPU 控制 - 他们都无法拥有它

# objective-c - SdWebImage 下载缩略图然后下载高分辨率

> ID：13423149
> 
> 赞同：4
> 
> 时间：2012-11-16T19:29:14.330
> 
> 标签：objective-c, sdwebimage

我想设置一个缩略图 url 和高分辨率图像 url，以便下载第一个缩略图，然后下载高分辨率图像

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-17T17:19:31.413

实际上，你不需要创建任何隐藏的东西`UIImageView`来做这个把戏。

您要做的就是设置第一个URL（带有较小的图像）直接下载到您的`UIImageView`，然后用于`SDWebImageManager`在后台下载较大的版本。完成下载后，只需在图像视图中设置下载的图像。

您可以这样做：

```
// First let the smaller image download naturally
[self.imageView setImageWithURL:self.imageURL];

// Slowly download the larger version of the image
SDWebImageManager *manager = [SDWebImageManager sharedManager];
[manager downloadWithURL:self.currentPhoto.largeImageURL options:SDWebImageLowPriority progress:nil completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished) {
    if (image) {
        [self.imageView setImage:image];
    }
}]; 
```

注意我是如何使用`SDWebImageLowPriority`选项的。这样，图片（自然应该比第一个大）将以低优先级下载，不应该取消第一次下载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-23T08:54:48.877

很晚了，但我用下面的代码解决了我的问题

```
UIImageView * hiddenImageView = [[UIImageView alloc] init];

[hiddenImageView sd_setImageWithURL:thumbUrl completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {

    if (image) {

        mImageView.image = image;
    }

    if (originalUrl != nil) {

        [mImageView sd_setImageWithURL:originalUrl placeholderImage:image completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL){

            if (image) {

                mImageView.image = image; // optional
            }

        }];

    }
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:55:39.280

下载到视图上某个隐藏的 UIImageView，然后在加载完成后在两者之间切换，通过：

```
[cell.imageView setImageWithURL:[NSURL     
URLWithString:@"http://www.domain.com/path/to/image.jpg"]
   placeholderImage:[UIImage imageNamed:@"placeholder.png"]
   completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {... completion code here ...}]; 
```

# facebook - 无法退出帐户

> ID：13423158
> 
> 赞同：-1
> 
> 时间：2012-11-16T19:30:01.937
> 
> 标签：facebook, ipad, logout

我姐姐在我的 iPad 上登录了她的 Facebook 帐户，然后她通过左侧的底部按钮退出并离开。我的妻子去查看她的 Facebook 帐户，我的姐妹们还开着。我们再次注销，但它只是在她的帐户打开的情况下重新加载，我们可以按继续访问它。我们尝试从 iPad 上删除 Facebook。当我们重新安装它时，她的帐户仍然可以访问。她还尝试从她的最后停用她的帐户，但仍然没有快乐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:38:11.237

在 ios6 中，facebook 是操作系统的一部分。就像 ParrotMac 说的你需要在设置中更改登录。如果这不是问题，请尝试苹果或 Facebook 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:36:12.807

这是一个离题的问题，可能会被版主关闭....

但是，要注销，请转到主屏幕 [主页按钮] 进入设置，向下滚动到 Facebook，然后从选项中选择注销。

# c# - 如何轻松验证输入字符串是否是有效的 lambda 表达式？

> ID：13423161
> 
> 赞同：0
> 
> 时间：2012-11-16T19:30:14.517
> 
> 标签：c#, .net, linq, lambda

例如：

```
Validate("items.Select(item => item.ToLower())") 
```

将返回 True，而

```
Validate("var n=5;") 
```

将返回 False。

上下文是我想创建一个允许用户通过 lambda 表达式操作其数据的应用程序。如果用户输入了一个有效的 lambda 表达式，程序就会执行它。否则，它应该会失败。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T19:55:24.693

我建议保持简单并尝试执行它。如果它无效，它无论如何都会在几毫秒后失败。

它还处理语法上有效但因不同原因而失败的表达式。

如果您选择采用这种方法，那么只需要使用 Dynamic Linq 库就可以了。

# c++ - 有哪些好方法可以对二进制打包结构消息进行版本控制？

> ID：13423162
> 
> 赞同：3
> 
> 时间：2012-11-16T19:30:18.510
> 
> 标签：c++, casting

我有一个多播某些打包 POD 结构的应用程序和一个在其他二进制文件中运行的侦听器服务。侦听器服务知道结构是什么样的，因此当它接收到它们时，它会将其转换回用 a 敲击的结构`reinterpret_cast`并执行回调。

下线的问题是，如果二进制文件被发布并且需要将新信息添加到结构中，则必须重新构建这些二进制文件，否则它们将`reinterpret_cast`滥用和滥用信息。在生产环境中，这可能是一个问题，因为它一直没有那种灵活性。

有人告诉我的一件事是，解决方法是引入新样式的消息，并将它们都发送出去……随着时间的推移，应用程序最终将切换到新类型的二进制消息，直到可以停止发送旧的。我想知道是否有更好的选择。

例如，如果一个人约定只在打包结构的末尾添加新字段，那么旧的监听二进制文件可能仍然能够访问这些新字段，如果他们愿意，使用旧信息构建的那些可能仍然能够访问顶部。例如，如果发送者正在多播：

```
struct foo {
    int  a;
    char b[2];
} __attribute__ ((packed)); 
```

然后在接收端构建了几个二进制文件，这些二进制文件通过网络获取`const char* msg`消息并执行以下操作：

```
foo* fooPtr = reinterpret_cast<foo*>(msg); 
registeredGuy->callback(fooPtr); 
```

现在，如果我们决定在发送方推出额外的信息，如果我们像这样将它固定到底部，老听众可能会没事：

```
struct foo {
    int  a;
    char b[2];
    char newStuff[17];
    int  k;
} __attribute ((packed)); 
```

老接收者应该仍然能够成功投射和访问他们的旧信息，而新人可以访问新内容。这是真的？是否有更好的解决方案不会影响速度（性能非常关键）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:05:05.093

发送本质上相同消息的两个版本是一个坏主意。特别是对于性能关键的系统。您最终花费至少两倍的时间进行实际发送。您最终还会广播两倍以上的信息，因此您的网络可能会饱和。

只要消息有效负载本身就存在版本控制消息有效负载的问题。我的想法是，解决问题的最好方法是完全避免它。

关键是了解客户端将如何接收和处理入站数据。通常，客户端将侦听线路上的 UDP 帧，将其吸入，并将该帧作为消息处理。理想情况下，您的 UDP 帧小于您架构的 MTU（例如 1500 字节），因此消息不会在传输过程中被截断。他们可能会乱序到达，但这是一个完全不同的问题。

客户知道 UDP 帧有多大，因为他们把它从网络上拉下来了。他们也知道他们将处理的消息有多大，因为它只是`sizeof(MessageType)`. 他们唯一不知道的是帧大小和有效载荷大小之间的差异。您可以通过在每条消息中包含一个固定大小的标头来告诉他们。

标头看起来像这样：

```
struct MsgHeader
{
  size_t  msg_size_;
  int  msg_type_;
  char payload_[0];
}; 
```

实际的消息要么覆盖它，要么紧随其后（在 中`&payload_[0]`）。

客户端现在读取 UDP 帧，从标头中获取帧的大小，并将那么多总字节作为单个消息提取。从负载指针开始，客户端将入站数据转换为相关消息类型。如果单个消息中的数据多于客户端理解的消息类型，客户端会忽略它并将其丢弃在地板上。

当您对消息进行更改时，您需要通过不移动任何现有字段的位置来确保向后二进制兼容性。在末尾添加新字段，相应地增加标题中的帧大小，Bob 就是你的叔叔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:46:59.713

通常，您不会更改原始结构以添加其他字段，而是定义一个新结构，该结构在开始时具有与原始结构相同的字段。为了使旧客户端能够安全地处理新版本结构的二进制形式，需要将实例的大小作为字段包含在第一个版本中。

通过在每个实例中包含大小，然后 foo 可以在未来扩展到 fooex 并且旧客户端仍然可以安全地处理由 foo 和 fooex 混合组成的一系列元素，因为旧客户端可以检查每个实例的大小而不是假设它们是 foo 的大小。

例如：

```
struct foo {
 size_t size;
 int  a;
 char b[2];
} __attribute__ ((packed));

struct fooex {
 size_t size;
 int  a;
 char b[2];
 char newStuff[17];
 int  k;
} __attribute ((packed)); 
```

# objective-c - 隐藏空的 UITableViewCell

> ID：13423167
> 
> 赞同：-1
> 
> 时间：2012-11-16T19:30:46.023
> 
> 标签：objective-c, ios, admob

我正在使用 AdMob 在我的`UITableView`. 它工作正常，但是当广告更改单元格时，我的表格中出现了空单元格。

我怎样才能隐藏旧的和空的单元格？问题见图片

![在此处输入图像描述](../Images/636766135874506b8b6633ee9a14d9c3.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int row = [indexPath row];
    NSString *CellIdentifier = @"Cell";
    if(kAdFrequency - 1 == row%kAdFrequency){
        CellIdentifier = @"AdCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        [cell addSubview:_banner];
        return cell;
    }else{
        row = row - floor((float)row/kAdFrequency);

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        NGNationEventDay* day = [_events objectAtIndex:indexPath.section];
        NGNationEvent* event = [day.events objectAtIndex:row];

        cell.textLabel.text = event.name;
        cell.detailTextLabel.text = event.category;

        return cell;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:16:34.847

我认为一般来说，最好的方法是确保您的广告以一个屏幕上不会同时出现两个广告单元的频率显示（您可能只需修改 kAdFrequency 以使其成为这种情况）。

# javascript - YUI 在悬停事件上淡出

> ID：13423174
> 
> 赞同：2
> 
> 时间：2012-11-16T19:31:28.943
> 
> 标签：javascript, animation, web, yui, transition

我通常使用 jQuery，但我是第一次在 Squarespace 中构建一个站点，它已经使用了 YUI，所以我边走边看。

我想要一个简单的效果，其中链接在 mouseenter 上有点褪色，在 mouseleave 上再次变得不透明。

查看了一些 YUI 示例，这是我现在的代码：

```
 YUI().use('*',function(Y){

 //GET THAT CART UP THERE!
Y.on("domready", function() {

    var over = function(e){
  e.currentTarget.transition({
    duration:0.5,
    opacity:0.5
  });
    };

    var out = function(e){
e.currentTarget.transition({
    duration:0.5,
    opacity:1
  });
    };
Y.all('a').on('mouseenter',over);
Y.all('a').on('mouseleave',out);
});
    }); 
```

当页面加载时，我没有收到任何错误或任何东西，但在将鼠标悬停在链接上时也没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:47:03.113

乍一看，您的代码主体似乎应该可以工作。我怀疑发生的事情是 YUI 转换模块实际上没有加载。尝试将 use('*') 更改为 use('transition')。

请注意，在 use(' *') 中，'* ' 并不意味着“获取并附加所有可能的 YUI 模块”。它实际上的意思是，“把这个页面上*已经存在*的所有 YUI 模块，并将它们附加到这里。” 换句话说，在页面的某处，您需要显式加载转换模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:50:11.713

使用时`use('*')`请确保页面上已包含所有需要的文件。我的猜测是事实并非如此。

否则，您可以使用 loader 处理文件的加载，以便获得要使用的模块所需的所有文件和依赖项。

使用加载器，它看起来像：

```
YUI().use('node', 'transition', function(Y){

  //GET THAT CART UP THERE!
  Y.on("domready", function() {

    var over = function(e){
      e.currentTarget.transition({
        duration:0.5,
        opacity:0.5
      });
    };

    var out = function(e){
      e.currentTarget.transition({
        duration:0.5,
        opacity:1
      });
    };

    Y.all('a').on('mouseenter',over);
    Y.all('a').on('mouseleave',out);
  });
}); 
```

# javascript - 用于封闭多边形形状的移动触摸绘图的 Javascript 库

> ID：13423179
> 
> 赞同：0
> 
> 时间：2012-11-16T19:31:41.607
> 
> 标签：javascript, charts, draw

我想通过定义封闭区域多边形的触摸在移动屏幕上绘制形状。我还想通过说基于另一个多边形的面积减去或增加一个多边形的面积来与这些多边形交互。

我有几个 HTML5 框架的 javascript 经验，并希望将其与 sencha + phonegap 应用程序集成，但愿意接受任何其他更好地满足这一点的选项。

有什么明显的答案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:52:04.230

看起来 paperjs.org 几乎有我需要的一切。我仍在研究，所以如果其他人有想法，我会全力以赴。谢谢！

一些参考资料：使用路径的封闭形状多边形：http: [//scriptographer.org/tutorials/paths/working-with-path-items/](http://scriptographer.org/tutorials/paths/working-with-path-items/)

使用两种形状通过加减法创建一个：http: [//scriptographer.org/tutorials/paths/geometric-operations/](http://scriptographer.org/tutorials/paths/geometric-operations/)

# scala - 如何用负步骤迭代范围？

> ID：13423180
> 
> 赞同：13
> 
> 时间：2012-11-16T19:31:44.513
> 
> 标签：scala, loops, negative-number

有没有办法做类似的事情：

```
0 to -10 map { i=>
...
} 
```

repl 给了我：

```
scala.collection.immutable.IndexedSeq[Unit] = Vector() 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-16T19:34:09.617

```
0 to (-10, -1) 
```

或者

```
0 to -10 by -1 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-16T19:34:10.443

添加`by`子句：

```
0 to -10 by -1
res0: Range(0, -1, -2, -3, -4, -5, -6, -7, -8, -9, -10) 
```

# php - 三个不同的文本来调用相同的点击操作

> ID：13423182
> 
> 赞同：-2
> 
> 时间：2012-11-16T19:31:52.017
> 
> 标签：php, javascript

我的这段代码工作正常（感谢我在这个媒体中得到的所有帮助

```
$htx = $row['mia_Text'] == 'mia owo';

 <div id='inner'>
          <p style="color:#FFF;"><a href="javascript:;" onclick="pkgsPopup('<?='http://'.$hLnk?>');" rel='nofollow'>
            <?=$hTxt?>
            </a> </p>
        </div>
      </div>
      <div id='innercontent'>
      .... 
```

假设我也想（除了 $htx = $row['mia_Text'] == 'mia owo'）在同一个 $htx onclick 事件中添加另一个 mia_Text，如 'mia ekpo' 和 'mia uman'，关于如何我可以实现这个吗？

我真的很感谢所有的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:44:38.607

虽然我真的不确定您要问什么或者该代码是 php 还是 javascript，但我认为您要问的是如何将 $row['mia_Text'] 与多个条件进行比较。如果这实际上是你要问的，你可以写

```
$htx = (
    $row['mia_Text'] == 'mia owo' || 
    $row['mia_Text'] == 'mia ekpo' || 
    $row['mia_Text'] == 'mia uman'
) 
```

有更简单的编写方法，但该代码应该在 php 或 javascript 中工作。

# jquery - DOM 异常 12 使用 Jquery Mobile

> ID：13423184
> 
> 赞同：4
> 
> 时间：2012-11-16T19:31:53.827
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery-mobile v1.1 构建一个移动应用程序，并且在导航到应用程序中的另一个页面时遇到（捕获的）DOM 异常 12 错误。有问题的块从 jquery.js 文件的第 5197 行开始，是这样的：

```
try {
    // This should fail with an exception
    // Gecko does not error, returns false instead
    matches.call( document.documentElement, "[test!='']:sizzle" );
} catch( pseudoError ) {
    pseudoWorks = true;
} 
```

该页面记录发生了错误，但它不会阻止任何操作，并且一切都按预期工作，但是屏幕上会短暂显示“错误加载页面”标签。

警告：

*该错误不会在 Firefox 中引发，但会在 Chrome 和 Mobile Safari 中引发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T22:46:18.607

由于此特定问题似乎已解决，但尚未在答案中解决，因此我将笼统地说，当尝试调试 jQuery/jQuery UI/etc 文件中弹出的错误时，实际上通常不是那个文件中的一个错误，这是你使用它的一个错误，直到它进入 jQuery 才真正中断。所以你真的想弄清楚“我写的 Javascript 是在崩溃之前运行的吗？”，然后从那里开始。

# algorithm - 变量范围值数组的字典顺序

> ID：13423187
> 
> 赞同：0
> 
> 时间：2012-11-16T19:32:10.643
> 
> 标签：algorithm, math, combinations

我在最近试图解决的问题上取得了很大进展，但我可以针对特定的排序问题使用一些建议。我试图**找到一种方法来表示数字列表的字典顺序，每个数字都有自己的范围（在排序之前定义是一个问题）。**

每个列表有*7 个元素*。每个元素的范围可以从*0 到 0-3*。也许一个具体的例子会有所帮助。

我有一个包含 7 个元素的数组 [2, 1, 0, 1, 3, 2, 3]。这个列表*抽象地代表了一些可能的列表*，我想为其生成一个字典顺序。（编辑：为了更清楚。每个数字的值表示该数字可以在一组可能的列表中的最大值。因此，示例中的第一个数字可以被认为是基数为 4 的数字，第二个以 2 为基数，第三个以 1 为基数，以此类推）该列表的前几个元素如下所示：

1.  [0, 0, 0, 0, 0, 0, 0]
2.  [1, 0, 0, 0, 0, 0, 0]
3.  [2, 0, 0, 0, 0, 0, 0]
4.  [0, 1, 0, 0, 0, 0, 0]
5.  [1, 1, 0, 0, 0, 0, 0]
6.  [2, 1, 0, 0, 0, 0, 0]
7.  [0, 0, 0, 1, 0, 0, 0]
8.  [1, 0, 0, 1, 0, 0, 0]

希望模式很清楚。然后我希望能够有效地**调用一个函数 f(m)，它返回这个序列中的第 m 个值**。我发现[这篇](http://msdn.microsoft.com/en-us/library/aa289166%28v=vs.71%29.aspx)文章感觉它非常接近我正在寻找的内容（它提供了一种有效的方法来获得具有固定值组合的集合中的词典第 m 位），但我无法弥合两者之间的差距两个想法（尽管我在文章中重新创建了结果，我相信我对它们有所了解）。

任何人对如何创建一个函数 f(m) 有任何想法，该函数返回由 7 个元素列表定义的序列中的第 m 个值，类似于上面示例中提供的列表？

PS如果这个问题已经以其他形式重述并且我没有找到它，我深表歉意。我已经进行了大量搜索，但似乎没有什么能完全反映这一点。欢迎链接，头脑风暴，一般想法！

编辑 2：修复了我的示例中第一个元素是 3 而不是 2 的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:00:46.203

编辑：用更直接的转换替换了原始答案。如果您真的想看到落后的解决方案，请检查早期版本。

~~请注意，您提供的初始数组与示例列表不匹配（数组的第一个元素应该是 2）。我将在我的答案中使用更正后的数组。~~

给定一个输入数组 [2, 1, 0, 1, 3, 2, 3]，每个位置的可能元素数为，

```
[3,2,1,2,4,3,4] 
```

给我们 3*2*1*2*4*3*4 = 576 种可能性。

^(要确定列表中第 m个)成员的值（其中 0 <= m < 576）的最左边（低阶）元素，我们需要找到 m/3 的余数，或 m mod 3。下一个元素将是 (m div 3) mod 2，依此类推。在伪代码中，然后：

```
increment all elements of A by 1

// we now have A = [3,2,1,2,4,3,4]
// m is given
// result is in R[7]
for i = 0 to 6
    R[i] = m mod A[i];
    m = m div A[i];
end 
```

如果您将上面的示例列表调整为从 0 开始，您应该会得到相同的结果。这是使用 A = [3,2,1,2,4,3,4] 和 m = 11 的示例计算：

```
11 mod 3 = 2 (11 div 3 = 3)
 3 mod 2 = 1 (3 div 2 = 1)
 1 mod 1 = 0 (1 div 1 = 1)
 1 mod 2 = 1 (1 div 2 = 0)
 0 mod 4 = 0
 0 mod 3 = 0
 0 mod 4 = 0 
```

所以第 11 个列表元素（从零开始）是 [2,1,0,1,0,0,0]。

# iphone - MFMailComposeInternalViewController 中的断言失败

> ID：13423191
> 
> 赞同：1
> 
> 时间：2012-11-16T19:32:46.310
> 
> 标签：iphone, ios6, mfmailcomposeviewcontroller

在 iOS 中显示电子邮件提示时出现奇怪的断言失败

代码：

```
- (void)displayComposerSheet:(id)delegate withDataSource:(id)datasource {
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.navigationBar.tintColor = self.navigationController.navigationBar.tintColor;
    picker.mailComposeDelegate = 委托；
    //使用数据源填写电子邮件字段
    if ([[数据源收件人] 计数] > 0)
      [picker setToRecipients：[数据源收件人]]；
    [选择器设置主题：[数据源主题]]；

    [picker setMessageBody:[datasource emailText] isHTML:[datasource isHTML]];
    [[UIWindow topMostController] presentModalViewController:picker animated:YES];
    [选择器成为FirstResponder]；

    [选择器发布]；
}

```

```
MyApp[60324:907] *** -[MFMailComposeInternalViewController _endDelayingCompositionPresentation] 中的断言失败，/SourceCache/MessageUI/MessageUI-1075.10/Mail/MFMailComposeInternalViewController.m:316

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:26:05.723

唉，调酒的危险……

我将 UINavigationController 的 pushViewController 方法与我自己的内部使用 setViewControllers 的方法进行了混合。（我遇到了一些线程问题，同一个视图控制器被推送了两次。）

# php - 如果会话存储在默认的 php 会话存储中，如何删除/管理用户的会话？

> ID：13423202
> 
> 赞同：3
> 
> 时间：2012-11-16T19:33:36.540
> 
> 标签：php

当会话存储在默认的 php 会话存储中时，有什么方法可以删除用户会话？

例如，我是网站管理员，我想禁止登录用户。用户认证状态存储在会话中。我正在从数据库中删除用户行，但仍然记录了用户，并且所有必要的身份验证信息也存储在会话中。我需要删除/修改会话。

可能的方式：

*   在每个请求上从数据库加载用户的行
*   创建文件，表示删除用户的会话并在每个请求时检查此文件是否存在
*   /dev/shm 中的 crete 文件（检查速度非常快），但重新启动时文件将被删除
*   在数据库中存储会话（我的项目的开销）
*   在 nosql（redis、memcachedb）中存储会话（我的项目的开销）

除了将用户的会话存储在数据库或 nosql 数据存储中之外，还有什么优雅的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:40:19.570

我知道如何做到这一点的唯一方法是删除会话记录。如果是文件，请删除会话文件。如果会话存储在数据库或内存缓存中，请将其删除。棘手的问题是如何找到会话 id 以及是否存在一个用户。

如果它是一个文件，并且您在其中存储了电子邮件或用户 ID，则可以查找该文件。数据库中的会话存储应该易于查询。不知道你会如何在内存缓存中做到这一点。

如果您不在每个请求上重新生成会话，则始终可以将会话创建时的 session_id 设置为用户独有的东西——如果您不使用 SSL，您可能会打开一种劫持会话的方法，如果您使用唯一密钥使用很容易猜到（如 user_id）。然后，您可以在用户登录时将用户会话 ID 与用户记录一起存储在数据库中。

# jquery-mobile - IEnumerable 集合在 MVC4 控制器中始终为空

> ID：13423206
> 
> 赞同：2
> 
> 时间：2012-11-16T19:33:59.540
> 
> 标签：jquery-mobile, file-upload, asp.net-mvc-4

我在一个表单中有文本输入字段和多个文件上传。直到运行时我才知道文件或其他字段的数量。

```
<form action="/WorkOrder/Install" enctype="multipart/form-data" method="post">    
        <div class="display-label">
            Description
        </div>

        <input id="description" name="description" type="text" value="" />

        <div class="display-label">
            Photo - Before Install 
        </div>

        <input name="files" id="file1" type="file" />

        <div class="display-label">
            Photo - After Install 
        </div>

        <input name="files" id="file2" type="file" />

        <input type="submit"/>
</form> 
```

正在填充 FormCollection，但 HttpPostedFileBase 集合始终为空。Request.Files 为空。

```
 [HttpPost]
    public ActionResult Install(FormCollection formCollection, IEnumerable<HttpPostedFileBase> files)
    {
        return View();
    } 
```

我尝试只有一个文件输入并将控制器更改为接受单个 HttpPostedFileBase，问题是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:10:24.053

jQuery Mobile 试图处理表单提交。我必须在表单上设置 data-ajax="false" 以让 MVC 控制器处理文件上传。

# c# - C# 使用 HTTPWebRequest 拉取网页并从站点执行 javascript

> ID：13423209
> 
> 赞同：5
> 
> 时间：2012-11-16T19:34:06.770
> 
> 标签：c#, javascript, httpwebrequest, webbrowser-control

有没有办法使用 HTTPWebRequest 获取网页，然后执行页面上的所有 javascriptcode 以及 ajax 调用并将结果保存到字符串？

我想解析一个网站，其中一些图像是通过 js 代码生成的，并且在 js 脚本运行之前图像不在网页上。

现在我在网上搜索了一个解决方案，但我发现的只是这样的答案是不可能的，请改用网络浏览器，这对我来说不是一个选择。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:10:45.323

您可以使用 C++ http 系统来执行此操作，它可以让您对接收的数据片段进行大量控制，但我想这并不是一个真正的答案，所以......

为什么不尝试将[webkit 放入您的应用程序](http://webkitdotnet.sourceforge.net/docs/)中，并从中运行事件。它有几个事件可以在下载开始和完成时通知您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:16:49.757

我做了一些研究，只是因为我觉得它很有趣。我发现了一个名为 Phantom.js 的东西，看起来它可以满足您的需求。看看： http: [//phantomjs.org/](http://phantomjs.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:42:31.997

正如我在尝试满足急需的需求时发现的那样，这确实是不可能的。Javascript 将执行，但不会进行 Ajax 调用。

我确定的解决方案是通过代码隐藏文件（C# 代码）同步获取 Ajax 调用将拥有的所有数据，并使用脚本标签将代码隐藏变量分配给 Javascript 变量，并让 Javascript 完成它的工作（构建动态元素等）

# json - 从谷歌应用程序脚本中的 Javascript 对象中提取字段

> ID：13423213
> 
> 赞同：2
> 
> 时间：2012-11-16T19:34:10.850
> 
> 标签：json, google-apps-script

我对此很陌生，答案可能很简单，但请帮忙。

我从查询中返回以下内容，这是`jsonParse`结果

```
{"totalSize":1,
"done":true,
"records":
    [{"attributes": 
    {
        "type":"Account",
        "url":"/services/data/v21.0/sobjects/Account/001C0000012Z8Y5IAK"
    },
    "Id":"001C0000012Z8Y5IAK"
    }] 
} 
```

如何`Id`在最后提取到变量 when `totalSize = 1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:54:31.553

objectName.records[0].Id 可以解决问题。适当增加记录索引。

样本 -

```
var sforceResponse = {"totalSize":1,"done":true,"records":[{"attributes":{"type":"Account","url":"/services/data/v21.0/sobjects/Account/001C0000012Z8Y5IAK"},"Id":"001C0000012Z8Y5IAK"}]}

sforceResponse.records[0].Id //this variable contains the Id. 
```

# backbone.js - 我到底需要在骨干网中发出 jsonp 请求吗？

> ID：13423214
> 
> 赞同：0
> 
> 时间：2012-11-16T19:34:12.910
> 
> 标签：backbone.js

根据这篇文章[http://iainjmitchell.com/blog/?p=777](http://iainjmitchell.com/blog/?p=777)，我想覆盖同步。但是在不覆盖同步的情况下，我可以使用以下内容发出 JSONP 请求：

```

var Tweet = Backbone.Model.extend();

var Tweets = Backbone.Collection.extend({
型号：推特，
url: 'http://search.twitter.com/search.json?q=%40twitterapi&callback=?',
解析：函数（响应）{
返回响应。结果；
}
});

var tweets = new Tweets();

tweets.bind('reset', function(tweets) {
警报（推文.长度）；
});

推文.fetch();

```

所以问题是，发生了什么？我是否需要覆盖同步？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T19:56:31.243

考虑到默认 Backbone.sync 使用`jQuery.ajax`，您可以选择：

```
$.ajaxSetup({
    dataType: "jsonp"
}); 
```

JSONP 会阻止您使用整个 Backbone REST api，所以我建议您查看[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)看看您是否真的需要 JSONP。

更多细节在这里：[JSONP 和 Backbone.js](https://stackoverflow.com/questions/7169270/jsonp-and-backbone-js)

# spring - Web应用程序中的JBoss AS 7 Log4j不更改日志级别

> ID：13423215
> 
> 赞同：2
> 
> 时间：2012-11-16T19:34:13.260
> 
> 标签：spring, logging, jboss, log4j, jboss7.x

这是文件的内容

类/log4j.properties

```
log4j.rootCategory=DEBUG, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - <%m>%n

# Enable web flow logging
log4j.category.org.springframework.webflow=DEBUG
log4j.category.org.springframework.faces=DEBUG
log4j.category.org.springframework.binding=DEBUG
log4j.category.org.springframework.transaction=DEBUG 
```

pom.xml

```
<dependency>
   <groupId>log4j</groupId>
   <artifactId>log4j</artifactId>
       <version>1.2.17</version>
</dependency>
<dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-context</artifactId>
   <version>${org.springframework-version}</version>
   <exclusions>
           <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
           </exclusion>
   </exclusions>
</dependency> 
```

对于每个包含 commons-logging 的依赖项，SLF4j 是排除。

WEB-INF/jboss-deployment-structure.xml

```
<jboss-deployment-structure>
    <deployment>        
        <exclusions>
             <module name="org.apache.log4j" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

当我在控制台上的 Eclipse 中启动服务器时，我仍然只看到 INFO 日志和 WARN。我需要调试日志记录弹簧框架。这个配置有什么问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:38:04.133

从 JBoss wiki 页面上使用 log4j 配置您的应用程序在[https://docs.jboss.org/author/display/AS71/How+To](https://docs.jboss.org/author/display/AS71/How+To)：

我在步骤 2 中看到，在部署的 lib/ 目录中包含 log4j.properties 或 log4j.xml 文件。

你在 classes/ 目录中有你的 log4j.properties。您的 log4j 属性未正确获取（配置错误）或文档不正确。

如果它在 lib/ 目录中不起作用，则需要修复 jboss 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:46:10.753

没有什么很清楚的。似乎是 AS7 的错误

要拥有特定于应用程序的日志记录级别，您需要

> 在您的应用程序中配置 WEB-INF/classes/logging.properties 或 log4j.properties 或 log4j.xml

有关详细信息，请参阅 AS7-514 上的[ondrej](https://issues.jboss.org/browse/AS7-514) ziska 评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T00:40:52.237

配置包含在 AS7 的日志子系统中，例如 domain.xml 或 Standalone.xml，具体取决于配置文件和模式。

您需要为 org.spring 添加日志类别并增加控制台处理程序的日志级别阈值。

```
<subsystem xmlns="urn:jboss:domain:logging:1.1">
  <console-handler name="CONSOLE">
    <level name="DEBUG"/>
    ...    
  </console-handler>

  ...

  <logger category="org.spring">
    <level name="DEBUG"/>
  </logger>

  ...
</subsystem> 
```

# python - 将元组的嵌套元组递归地解构为一个平面连接列表

> ID：13423216
> 
> 赞同：1
> 
> 时间：2012-11-16T19:34:26.720
> 
> 标签：python, networkx

我认为我很聪明地将递归聚类算法的结果存储为嵌套元组的嵌套。数据存储 ID 之间的所有关系，如下所示：

```
((((((((8953L, 3409L), (8334L, 7375L)), ((7375L, 7220L), (8420L, 8556L))), (((7375L, 7220L), (8420L, 8556L)), ((8420L, 8556L), (8556L, 10089L)))), ((((11021L, 11462L), (6778L, 6854L)), ((10691L, 6652L), (11061L, 11230L))), (((6652L, 5660L), (10691L, 6652L)), ((8390L, 6032L), (10984L, 11061L))))), (((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L)))), ((((8667L, 9142L), (6491L, 7771L)), ((10391L, 8808L), (8667L, 9142L))), (((10391L, 8808L), (8667L, 9142L)), ((5882L, 9575L), (7008L, 6048L)))))), ((((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))), (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L))))), (((((11266L, 11269L), (10751L, 12192L)), ((6905L, 8811L), (11180L, 9732L))), (((12338L, 12701L), (12474L, 12569L)), ((9948L, 10073L), (8577L, 10217L)))),
((((8997L, 11091L), (11091L, 11210L)), ((10751L, 12192L), (12543L, 12143L))), (((961L, 12029L), (9262L, 11900L)), ((3825L, 7779L), (10500L, 11781L))))))), (((((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L)))), ((((11248L, 12034L), (9972L, 11248L)), ((10948L, 12013L), (10823L, 5602L))), (((10839L, 10948L), (6673L, 10839L)), ((10729L, 9687L), (1300L, 12274L))))), (((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))), 
 (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L)))))), ((((((11162L, 9208L), (6992L, 5965L)), ((9208L, 11317L), (10834L, 11318L))), (((12705L, 12769L), (3825L, 7779L)), ((12334L, 12414L), (12769L, 7059L)))), ((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L))))), (((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L)))), ((((11248L, 12034L), (9972L, 11248L)), ((10948L, 12013L), (10823L, 5602L))), (((10839L, 10948L), (6673L, 10839L)), ((10729L, 9687L), (1300L, 12274L)))))))), ((((((((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))), (((8225L, 8804L), (8804L, 6369L)), ((8289L, 8953L), (8225L, 8804L)))), ((((9380L, 7698L), (6450L, 8876L)), ((9386L, 8168L), (8876L, 7622L))), (((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))))), (((((9225L, 9777L), (6895L, 8167L)), ((10686L, 5395L), (12384L, 6816L))), (((5395L, 10211L), (10686L, 5395L)), ((10891L, 10127L), (6816L, 5622L)))), ((((9175L, 7918L), (6780L, 8004L)), ((6780L, 8004L), (10831L, 9175L))), (((6908L, 11020L), (10419L, 10235L)), ((11200L, 9756L), (11021L, 11462L)))))), 
((((((10031L, 8445L), (6165L, 8329L)), ((8445L, 12689L), (10031L, 8445L))), (((5350L, 6189L), (7374L, 5782L)), ((8355L, 7054L), (6536L, 9380L)))), ((((5395L, 10211L), (10686L, 5395L)), ((10891L, 10127L), (6816L, 5622L))), (((8355L, 7054L), (6536L, 9380L)), ((9380L, 7698L), (6450L, 8876L))))), (((((7613L, 11184L), (11184L, 5673L)), ((8929L, 5318L), (8378L, 8929L))), (((10419L, 10235L), (6377L, 6439L)), ((8378L, 8929L), (5363L, 5910L)))), ((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L))))))), (((((((8953L, 3409L), (8334L, 7375L)), ((7375L, 7220L), (8420L, 8556L))), (((7375L, 7220L), (8420L, 8556L)), ((8420L, 8556L), (8556L, 10089L)))), ((((11021L, 11462L), (6778L, 6854L)), ((10691L, 6652L), (11061L, 11230L))), (((6652L, 5660L), (10691L, 6652L)), ((8390L, 6032L), (10984L, 11061L))))), (((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L)))), 
((((8667L, 9142L), (6491L, 7771L)), ((10391L, 8808L), (8667L, 9142L))), (((10391L, 8808L), (8667L, 9142L)), ((5882L, 9575L), (7008L, 6048L)))))), ((((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))), (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L))))), (((((11266L, 11269L), (10751L, 12192L)), ((6905L, 8811L), (11180L, 9732L))), (((12338L, 12701L), (12474L, 12569L)), ((9948L, 10073L), (8577L, 10217L)))), 
 ((((8997L, 11091L), (11091L, 11210L)), ((10751L, 12192L), (12543L, 12143L))), (((961L, 12029L), (9262L, 11900L)), ((3825L, 7779L), (10500L, 11781L)))))))) 
```

我现在正在尝试将此对象转换为边缘列表以使用 networkx 进行可视化。所以每对 ID 都很容易连接——比如 10500 和 11781。但是我还需要将每个嵌套连接到它的父节点，所以（10500 和 11781）每个都需要与分支到该对的上节点的边缘连接和 (3825, 7779)。我对这一切都错了吗？

我找到的最好的模板是扁平化任何数据结构。它至少有一些关于穿过我理解的对象的逻辑：

```
def flatten(l, ltypes=(list, tuple)):
""" stolen from http://rightfootin.blogspot.com/2006/09/more-on-python-flatten.html
AKA  Mike C. Fletcher's BasicTypes library"""
ltype = type(l)
l = list(l)
i = 0
while i < len(l):
    while isinstance(l[i], ltypes):
        if not l[i]:
            l.pop(i)
            i -= 1
            break
        else:
            l[i:i + 1] = l[i]
    i += 1
return ltype(l) 
```

澄清一下，每个上层都有一个由前一层组成的 ID。例如，这里有 6 个级别：

```
((((((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))), (((8225L, 8804L), (8804L, 6369L)), ((8289L, 8953L), (8225L, 8804L)))), ((((9380L, 7698L), (6450L, 8876L)), ((9386L, 8168L), (8876L, 7622L))), (((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))))), (((((9225L, 9777L), (6895L, 8167L)), ((10686L, 5395L), (12384L, 6816L))), (((5395L, 10211L), (10686L, 5395L)), ((10891L, 10127L), (6816L, 5622L)))), ((((9175L, 7918L), (6780L, 8004L)), ((6780L, 8004L), (10831L, 9175L))), (((6908L, 11020L), (10419L, 10235L)), ((11200L, 9756L), (11021L, 11462L))))))

(((((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))), (((8225L, 8804L), (8804L, 6369L)), ((8289L, 8953L), (8225L, 8804L)))), ((((9380L, 7698L), (6450L, 8876L)), ((9386L, 8168L), (8876L, 7622L))), (((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L)))))

((((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))), (((8225L, 8804L), (8804L, 6369L)), ((8289L, 8953L), (8225L, 8804L))))

(((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L)))

((9386L, 8168L), (8876L, 7622L))

(9386L, 8168L)

9386L 
```

用这个小递归walker生成：

```
def pluck(data_in,out):
    if not isinstance(data_in[0], tuple):
        return out
    print data_in[0]
    out.append(data_in[0])
    pluck(data_in[0],out) 
```

这样就清楚了吗？我不想要一个平面列表——我是一个像树分形一样的连接成员列表。建议？

**更新** 一些好人发布了一个有用的功能，它有点工作 - 但它现在从 SO 中丢失，所以我重新发布。好的部分是它将所有元组推入一个元组列表。不好的部分是 networkx 仍然没有连接最终地图中的所有成员：

```
def flatten(t, out):
    if isinstance(t[0], tuple):
        for p in t:
            flatten(p, out)
    else:
        out.append(t)
    return out

out = []
out = flatten(data,out) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:01:26.493

```
import networkx as nx
tree = (((((((((8953L, 3409L), (8334L, 7375L)), ((7375L, 7220L), (8420L, 8556L))), (((7375L, 7220L), (8420L, 8556L)), ((8420L, 8556L), (8556L, 10089L)))), ((((11021L, 11462L), (6778L, 6854L)), ((10691L, 6652L), (11061L, 11230L))), (((6652L, 5660L), (10691L, 6652L)), ((8390L, 6032L), (10984L, 11061L))))), (((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L)))), ((((8667L, 9142L), (6491L, 7771L)), ((10391L, 8808L), (8667L, 9142L))), (((10391L, 8808L), (8667L, 9142L)), ((5882L, 9575L), (7008L, 6048L)))))), ((((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))), (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L))))), (((((11266L, 11269L), (10751L, 12192L)), ((6905L, 8811L), (11180L, 9732L))), (((12338L, 12701L), (12474L, 12569L)), ((9948L, 10073L), (8577L, 10217L)))),((((8997L, 11091L), (11091L, 11210L)), ((10751L, 12192L), (12543L, 12143L))), (((961L, 12029L), (9262L, 11900L)), ((3825L, 7779L), (10500L, 11781L))))))), (((((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L)))), ((((11248L, 12034L), (9972L, 11248L)), ((10948L, 12013L), (10823L, 5602L))), (((10839L, 10948L), (6673L, 10839L)), ((10729L, 9687L), (1300L, 12274L))))), (((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))),  (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L)))))), ((((((11162L, 9208L), (6992L, 5965L)), ((9208L, 11317L), (10834L, 11318L))), (((12705L, 12769L), (3825L, 7779L)), ((12334L, 12414L), (12769L, 7059L)))), ((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L))))), (((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L)))), ((((11248L, 12034L), (9972L, 11248L)), ((10948L, 12013L), (10823L, 5602L))), (((10839L, 10948L), (6673L, 10839L)), ((10729L, 9687L), (1300L, 12274L)))))))), ((((((((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))), (((8225L, 8804L), (8804L, 6369L)), ((8289L, 8953L), (8225L, 8804L)))), ((((9380L, 7698L), (6450L, 8876L)), ((9386L, 8168L), (8876L, 7622L))), (((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))))), (((((9225L, 9777L), (6895L, 8167L)), ((10686L, 5395L), (12384L, 6816L))), (((5395L, 10211L), (10686L, 5395L)), ((10891L, 10127L), (6816L, 5622L)))), ((((9175L, 7918L), (6780L, 8004L)), ((6780L, 8004L), (10831L, 9175L))), (((6908L, 11020L), (10419L, 10235L)), ((11200L, 9756L), (11021L, 11462L)))))), ((((((10031L, 8445L), (6165L, 8329L)), ((8445L, 12689L), (10031L, 8445L))), (((5350L, 6189L), (7374L, 5782L)), ((8355L, 7054L), (6536L, 9380L)))), ((((5395L, 10211L), (10686L, 5395L)), ((10891L, 10127L), (6816L, 5622L))), (((8355L, 7054L), (6536L, 9380L)), ((9380L, 7698L), (6450L, 8876L))))), (((((7613L, 11184L), (11184L, 5673L)), ((8929L, 5318L), (8378L, 8929L))), (((10419L, 10235L), (6377L, 6439L)), ((8378L, 8929L), (5363L, 5910L)))), ((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L))))))), (((((((8953L, 3409L), (8334L, 7375L)), ((7375L, 7220L), (8420L, 8556L))), (((7375L, 7220L), (8420L, 8556L)), ((8420L, 8556L), (8556L, 10089L)))), ((((11021L, 11462L), (6778L, 6854L)), ((10691L, 6652L), (11061L, 11230L))), (((6652L, 5660L), (10691L, 6652L)), ((8390L, 6032L), (10984L, 11061L))))), (((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L)))), ((((8667L, 9142L), (6491L, 7771L)), ((10391L, 8808L), (8667L, 9142L))), (((10391L, 8808L), (8667L, 9142L)), ((5882L, 9575L), (7008L, 6048L)))))), ((((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))), (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L))))), (((((11266L, 11269L), (10751L, 12192L)), ((6905L, 8811L), (11180L, 9732L))), (((12338L, 12701L), (12474L, 12569L)), ((9948L, 10073L), (8577L, 10217L)))),  ((((8997L, 11091L), (11091L, 11210L)), ((10751L, 12192L), (12543L, 12143L))), (((961L, 12029L), (9262L, 11900L)), ((3825L, 7779L), (10500L, 11781L)))))))))

graph = nx.Graph()

def create_graph(id,tree,graph):
    if id!=0:
        parent = (id-1)/2
        graph.add_edge(parent,id)
    if isinstance(tree[0],tuple) and isinstance(tree[1],tuple):
        create_graph(id*2+1,tree[0],graph)
        create_graph(id*2+2,tree[1],graph)
    else:
        graph.add_edge(id,tree[0])
        graph.add_edge(id,tree[1])
        graph.add_edge(tree[0],tree[1])

create_graph(0,tree,graph) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:15:06.447

这是与@Bula 类似的方法，但它使用元组作为树中的“内部节点”。您可以根据需要重新标记它们。我没有画任何标签，所以无论如何你都不会在这里看到它们。

```
import networkx as nx
import uuid

tree = ((((((((8953L, 3409L), (8334L, 7375L)), ((7375L, 7220L), (8420L, 8556L))), (((7375L, 7220L), (8420L, 8556L)), ((8420L, 8556L), (8556L, 10089L)))), ((((11021L, 11462L), (6778L, 6854L)), ((10691L, 6652L), (11061L, 11230L))), (((6652L, 5660L), (10691L, 6652L)), ((8390L, 6032L), (10984L, 11061L))))), (((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L)))), ((((8667L, 9142L), (6491L, 7771L)), ((10391L, 8808L), (8667L, 9142L))), (((10391L, 8808L), (8667L, 9142L)), ((5882L, 9575L), (7008L, 6048L)))))), ((((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))), (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L))))), (((((11266L, 11269L), (10751L, 12192L)), ((6905L, 8811L), (11180L, 9732L))), (((12338L, 12701L), (12474L, 12569L)), ((9948L, 10073L), (8577L, 10217L)))),
((((8997L, 11091L), (11091L, 11210L)), ((10751L, 12192L), (12543L, 12143L))), (((961L, 12029L), (9262L, 11900L)), ((3825L, 7779L), (10500L, 11781L))))))), (((((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L)))), ((((11248L, 12034L), (9972L, 11248L)), ((10948L, 12013L), (10823L, 5602L))), (((10839L, 10948L), (6673L, 10839L)), ((10729L, 9687L), (1300L, 12274L))))), (((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))),
 (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L)))))), ((((((11162L, 9208L), (6992L, 5965L)), ((9208L, 11317L), (10834L, 11318L))), (((12705L, 12769L), (3825L, 7779L)), ((12334L, 12414L), (12769L, 7059L)))), ((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L))))), (((((11318L, 10181L), (12334L, 12414L)), ((12292L, 11221L), (11221L, 9262L))), (((12721L, 961L), (11245L, 5132L)), ((12414L, 11245L), (12721L, 961L)))), ((((11248L, 12034L), (9972L, 11248L)), ((10948L, 12013L), (10823L, 5602L))), (((10839L, 10948L), (6673L, 10839L)), ((10729L, 9687L), (1300L, 12274L)))))))), ((((((((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))), (((8225L, 8804L), (8804L, 6369L)), ((8289L, 8953L), (8225L, 8804L)))), ((((9380L, 7698L), (6450L, 8876L)), ((9386L, 8168L), (8876L, 7622L))), (((9386L, 8168L), (8876L, 7622L)), ((6311L, 5727L), (7174L, 3611L))))), (((((9225L, 9777L), (6895L, 8167L)), ((10686L, 5395L), (12384L, 6816L))), (((5395L, 10211L), (10686L, 5395L)), ((10891L, 10127L), (6816L, 5622L)))), ((((9175L, 7918L), (6780L, 8004L)), ((6780L, 8004L), (10831L, 9175L))), (((6908L, 11020L), (10419L, 10235L)), ((11200L, 9756L), (11021L, 11462L)))))),
((((((10031L, 8445L), (6165L, 8329L)), ((8445L, 12689L), (10031L, 8445L))), (((5350L, 6189L), (7374L, 5782L)), ((8355L, 7054L), (6536L, 9380L)))), ((((5395L, 10211L), (10686L, 5395L)), ((10891L, 10127L), (6816L, 5622L))), (((8355L, 7054L), (6536L, 9380L)), ((9380L, 7698L), (6450L, 8876L))))), (((((7613L, 11184L), (11184L, 5673L)), ((8929L, 5318L), (8378L, 8929L))), (((10419L, 10235L), (6377L, 6439L)), ((8378L, 8929L), (5363L, 5910L)))), ((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L))))))), (((((((8953L, 3409L), (8334L, 7375L)), ((7375L, 7220L), (8420L, 8556L))), (((7375L, 7220L), (8420L, 8556L)), ((8420L, 8556L), (8556L, 10089L)))), ((((11021L, 11462L), (6778L, 6854L)), ((10691L, 6652L), (11061L, 11230L))), (((6652L, 5660L), (10691L, 6652L)), ((8390L, 6032L), (10984L, 11061L))))), (((((7406L, 11878L), (8398L, 7493L)), ((10419L, 10235L), (6377L, 6439L))), (((8367L, 6199L), (7263L, 7406L)), ((6199L, 7900L), (8367L, 6199L)))),
((((8667L, 9142L), (6491L, 7771L)), ((10391L, 8808L), (8667L, 9142L))), (((10391L, 8808L), (8667L, 9142L)), ((5882L, 9575L), (7008L, 6048L)))))), ((((((11087L, 9623L), (9013L, 9969L)), ((11294L, 9923L), (8390L, 6032L))), (((10656L, 11087L), (11087L, 9623L)), ((11087L, 9623L), (9013L, 9969L)))), ((((6590L, 10794L), (12483L, 6590L)), ((10794L, 8997L), (6590L, 10794L))), (((12386L, 12544L), (8196L, 11139L)), ((11266L, 11269L), (10751L, 12192L))))), (((((11266L, 11269L), (10751L, 12192L)), ((6905L, 8811L), (11180L, 9732L))), (((12338L, 12701L), (12474L, 12569L)), ((9948L, 10073L), (8577L, 10217L)))),
 ((((8997L, 11091L), (11091L, 11210L)), ((10751L, 12192L), (12543L, 12143L))), (((961L, 12029L), (9262L, 11900L)), ((3825L, 7779L), (10500L, 11781L))))))))

def add_edges(graph, tree):
    try:
        left,right = tree
    except TypeError:
        return
    graph.add_edge(tree,left)
    graph.add_edge(tree,right)
    add_edges(graph,left)
    add_edges(graph,right)

if __name__ == '__main__':
    import matplotlib.pyplot as plt
    graph = nx.Graph()
    add_edges(graph,tree)
    nx.draw(graph,node_size=10,with_labels=False)
# nicer layout with graphviz is you have it
#    nx.draw_graphviz(graph,node_size=10,with_labels=False)
    plt.show() 
```

# javascript - 如何提取字符串的特定部分

> ID：13423217
> 
> 赞同：1
> 
> 时间：2012-11-16T19:34:34.437
> 
> 标签：javascript

我在一个变量中有这串代码作为字符串：

```
.... = 40; var posY = 40; MAX_727.moveTo(posX, posY); } MAX_727.location='http://one.cam4ads.com/www/delivery/ac.php?bannerid=727&zoneid=19&target=_blank&withtext=0&source=&timeout=0&ct0='; MAX_727.blur(); window.focus... 
```

（为了便于阅读，我在开头和结尾加了点）

此代码（作为字符串操作）包含一个变量值`MAX_727.location`.

如何提取该特定变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:38:11.450

您可以使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)：

```
var value = /MAX_727\.location=\'([^\']*)/.exec(s)[1]; 
```

[示范](http://jsfiddle.net/rsqMf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:42:56.193

如果 MAX_727.location 是字符串中唯一包含在单引号中的部分，则可以将字符串拆分为包含 [ *before text* ,*text in quotes*, *after text* ] 的数组：

```
var codeString = "your String goes here";
var codeArray = codeString.split("'"); //Split the String at every ' mark, and add it to an array
var location = codeArray[1]; //Get the second value in the array, or the part of the String that was in quotes. 
```

# asp.net - 设置 FieldRenderer 的 Item 或 DataSource 属性的好方法是什么？

> ID：13423218
> 
> 赞同：4
> 
> 时间：2012-11-16T19:34:34.897
> 
> 标签：asp.net, sitecore, webforms, sitecore6

场景是我有很多 FieldRenderer。这些应该从各个地方输出数据，一些来自项目 X，另一些来自项目 Y。并且应该从项目 Z 输出属性。

假设我有一个`ItemX`要从中输出属性的公共属性，以下任何一项都可以。但我没有得到任何输出：

```
<sc:FieldRenderer runat="server" FieldName="Logo" DataSource="<%# ItemX %>" />
<sc:FieldRenderer runat="server" FieldName="Logo" DataSource="<%= ItemX.Paths.FullPath %>" />
<sc:FieldRenderer runat="server" FieldName="Logo" Item="<%# ItemX %>" />
<sc:FieldRenderer runat="server" FieldName="Logo" Item-ID="<%# ItemX.ID %>" />
<sc:FieldRenderer runat="server" FieldName="Logo" Item-ID-Guid="<%# ItemX.ID.Guid %>" /> 
```

如果我添加一个 ID`MyFieldRenderer`并在下面做丑陋的部分，我会得到正确的输出：

```
MyFieldRenderer.Item = ItemX; 
```

必须有更好的方法来做到这一点？我不确定这是特定于 Sitecore 的问题还是 WebForms 问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T23:25:38.033

如果不使用后面的代码，就不可能将 FieldRenderer 的数据源设置为服务器端对象。这是 WebForms 工作方式的结果。[Microsoft 知识库文章](http://support.microsoft.com/kb/976112)中描述了该问题：

> <%= ... %> 显示表达式等效于仅包含 Response.Write(...) 语句的嵌入式代码块。这是显示单个字符串、int 变量或常量等信息的最简单方法。[...]**请记住，显示表达式不能在服务器控件的属性中使用。这是因为 .NET Framework 直接编译整个表达式，而不是将显示的内容作为属性的值。**

换句话说，.NET 想要编译 sc:FieldRenderer，因此无法访问 <%= ItemX.Paths.FullPath %> 的运行时内容。您可以通过尝试显示以更简单的形式查看此问题：

```
<asp:TextBox runat="server" Text="<%= DateTime.Now.ToString() %>" /> 
```

在文本框中呈现**<%= DateTime.Now.ToString() %> 。**简而言之，除了服务器控件属性中的静态字符串之外，您无法获得任何其他内容。

* * *

这个问题有几种可能的解决方案：

1.  在您的 Page_Load 方法中，按照您的描述设置 FieldRenderer 的 Item 字段。如果需要使用此逻辑的子布局数量有限，这是最好的方法。

2.  您可以创建将 Item 绑定到 ItemX 的 ItemXFieldRenderer 子类：

    ```
     class ItemXFieldRenderer: FieldRenderer {
       public ItemXFieldRenderer() {
           Item = [code to retrieve ItemX];
       }
     } 
    ```

    然后，您可以在解决方案中要从 ItemX 呈现字段的任何位置使用此控件。如果大量子布局需要使用此逻辑并且您可能需要绑定的项目数量非常有限，这是最好的方法。

3.  您可以创建解析字符串属性并使用逻辑将字符串值映射到正确项目的 FieldRenderer 的子类。

4.  如果 ItemX 的路径是常量，则可以在 Datasource 属性中设置完整路径，如下所示：

    ```
    <sc:FieldRenderer runat="server" FieldName="Logo"
    DataSource="/sitecore/context/home/some/item" /> 
    ```

    您也可以使用相对路径。例如，如果上下文项有一个名为“Sources”的子文件夹，而该子文件夹又具有一个子项“Default”，则可以使用以下语法在 FieldRenderer 中引用：

    ```
    <sc:FieldRenderer runat="server" FieldName="Logo"
    DataSource="sources/default" /> 
    ```

    根据我的测试，数据源的评估不区分大小写，并且像“../..”和“//*[@@name='value']”这样的 Sitecore 查询表达式不起作用。

5.  您可以使用数据绑定来强制 ASCX 读取属性，如此[论坛线程](http://sdn.sitecore.net/Forum/ShowPost.aspx?postid=29371)中所推荐的：

    ```
    <sc:FieldRenderer id="myRenderer" FieldName="Logo" 
    DataSource=<%# ItemX.Paths.FullPath %> /> 
    ```

    在代码隐藏中，添加

    ```
    myRenderer.DataBind(); 
    ```

    使用最后一种方法，您仍然在使用代码隐藏，但是决定哪个 FieldRenderer 使用哪个项目现在包含在标记中。正如 Christian Hagelid[指出的那样](https://stackoverflow.com/a/13427050/402949)，您可以在子布局上调用 this.DataBind() 以强制 DataBind 在页面上的所有控件上递归执行。

6.  您可以使用 ASP.NET 的 ExpressionBuilder 语法来集中数据源路径的位置。有三种方法可以做到这一点：

    *   将您的路径放在 Web.config 中。将此添加到 Web.config 的 <AppSettings> 部分：

        `<add key="ItemX" value="/sitecore/content/path/to/itemx" />`
        然后将 DataSource 属性设置为：

        `DataSource=<%$ AppConfig: ItemX %>`

    *   将路径放在 App_GlobalSettings 中的 .resx 资源文件中。如果文件名为 Paths.resx，您可以使用以下语法访问其设置：

        `DataSource=<%$ Resources: Paths,ItemX %>`

    *   您可以构建一个[ExpressionBuilder](http://msdn.microsoft.com/en-us/library/system.web.compilation.expressionbuilder.aspx)类来构建将字符串值转换为路径的逻辑。请注意，ExpressionBuilder 是在 Parse 时评估的，因此您将无权访问 Sitecore 上下文。这看起来并不简单：表达式构建器需要在 Web.config 中引用，并且代码需要驻留在 App_Code 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T02:21:24.397

如果您有很多 FieldRenderer 控件并且您希望在标记中包含逻辑，那么您可以使用 <%# ... %> 表达式并调用 this.DataBind(); 在 Page.Load 的末尾。然后将绑定用户控件中的所有控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:20:14.217

我了解您希望能够像 MVC 样式那样在前端而不是在代码隐藏中执行此操作，但这种情况似乎表明前端 FieldRenderer 控件可能不是正确的工具。我显然看到了您在答案中编写的代码，但为什么不这样做呢，全部在前端：

```
<%= FieldRenderer.Render(item, "field name") %> 
```

例如

```
<%= FieldRenderer.Render(ItemX, "Logo") %> 
```

# javascript - 在网页上查找广告

> ID：13423219
> 
> 赞同：9
> 
> 时间：2012-11-16T19:34:40.367
> 
> 标签：javascript, python, html, ads, selenium-webdriver

我正在编写一个试图确定页面上是否有广告的应用程序。这目前正在使用 python 通过 selenium webdriver 使用浏览器驱动。

我认为 iframe 中存在大量广告，我制作了一个循环来查看每个框架的内部

```
browser = webdriver.Chrome()
browser.get("http://cnn.com")

all_iframes = browser.find_elements_by_tag_name("iframe")

for iframe in all_iframes:
   browser.switch_to_frame(iframe)
   print(browser.page_source)
   browser.switch_to_default_content()

browser.quit() 
```

我想知道是否有任何一致发现的标签或标签参数，我可以在多个页面上使用它们来确定页面上是否有广告（页面上的 iframe 内外）。我是否必须在每个框架内寻找诸如双击或adtech或adblade之类的东西？

或者我是否必须生成不同的规则来逐页检查？

任何人都知道广告是如何在页面上显示的？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T19:39:34.113

您可以按广告服务器搜索。

[http://pgl.yoyo.org/as/serverlist.php?hostformat=adblockplus](http://pgl.yoyo.org/as/serverlist.php?hostformat=adblockplus)

查看其他项目并了解它们如何处理相同的任务会很有帮助：

[http://adblockplus.org/en/source](http://adblockplus.org/en/source)

# macos - 如何卸载

> ID：13423220
> 
> 赞同：0
> 
> 时间：2012-11-16T19:34:40.740
> 
> 标签：macos, uninstallation, cloud-foundry

知道如何卸载 Micro CloudFoundry 吗？我在 OSX 上运行。

我搜索了整个 cloudfoundry 网站并用谷歌搜索无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:00:33.347

Micro Cloud Foundry 是一个虚拟机。要卸载，您只需删除包含该`.vmx`文件的整个文件夹。您也可以在 Fusion 中右键单击虚拟机并选择“删除”。当然，这样做之后，您将丢失部署在 Micro Cloud Foundry 上的所有内容。

# c# - 使用 EntityFramework dbContext 获取另一个表中的计数记录

> ID：13423221
> 
> 赞同：3
> 
> 时间：2012-11-16T19:34:46.067
> 
> 标签：c#, dbcontext, entity-framework-4.3.1

我首先使用 EntityFramework 4.3.1 和 Database 和 dbcontext。

假设我有 2 个表： **客户** 和 **订单** ，客户和订单之间存在一对多的关系。

我有两个要使用 EntityFramework 运行的查询，以获取不同网页的特定信息。

**第一个是：** *获取自特定日期以来下订单的所有客户。*

因此，此查询的普通 SQL 可能类似于：

```
SELECT * FROM Customer WHERE CustomerID IN (
   SELECT CustomerID FROM Order WHERE OrderDate > '01-01-2012'
) 
```

我无法弄清楚如何在 EntityFramework 中执行此操作。

我从以下代码开始，但不知道从哪里开始。

```
var customersWithOrdersAfterGivenDate = this._dbContext.Customer
   .Include("Order")
   .Where(c => ??? What do I do here ??? ); 
```

我试图做*(c.Order.OrderDate > someDate)*，但这不起作用，因为我无法从 Order 获取 OrderDate 属性，因为 EntityFramework 将 Order 视为一个集合。

**第二个问题是：** *获取给定集合或Customers的订单总数*

此查询的普通 SQL 可能如下所示：

```
SELECT CustomerID, COUNT(*)
FROM Order
WHERE CustomerID IN (*someCollectionOfIDs*)
GROUP BY CustomerID 
```

同样，我不知道如何在 EntityFramework 中执行此操作。如何从 Order 表中仅获取 CustomerID 和 CustomerID 的记录总数？我不知道如何进行分组，这样它就不会只返回每个客户的每一个订单记录。

## ----------------------------------

* * *

***更新：这是我在 Eli 反馈后的最终代码。***

要获取具有在给定日期之后创建的订单的客户：

```
var customerIDs = dbContext.Customer
   .Include("Order")
   .Where(c => c.Order.Any(o => o.DateCreated.CompareTo(startDate) > 0))
   .Select(s => new
      {
         c.CustomerID
      })
   .AsEnumerable()
   .Select(cust => cust.CustomerID)
   .ToList<int>(); 
```

要获取给定客户集合中每个客户的订单总数：

```
List<int> customerIDs = GetCustomerIDsToQuery();

var orderTotals = dbContext.Orders
   .Where(o => customerIDs.Contains(o.CustomerID))
   .GroupBy(o => o.CustomerID)
   .Select(o => new
      {
         CustomerID = o.Key,
         TotalOrders = o.Count()
      })
   .AsEnumerable(); 
```

从上面，我可以遍历集合并从匿名类型中获取值：

```
foreach(var ot in orderTotals)
{
   var customerID = ot.CustomerID;
   var totalOrders = ot.TotalOrders;
   //Do something with these values...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:40:52.260

您的 SQL 还包含一个嵌套集合，因此您的 LINQ 将是相同的。类似的东西`.Where(c => c.Orders.Any(order => order.OrderDate > someDate));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-16T23:54:31.223

`int noOfRecords = _dbContext.Customer.Count();`

这将返回实体框架中表中的记录数。

# jquery - jquery滑动隐藏内容换行

> ID：13423225
> 
> 赞同：0
> 
> 时间：2012-11-16T19:35:23.310
> 
> 标签：jquery, css, animation, sliding

我正在尝试做这个 [演示](http://jsfiddle.net/mqzuD/10/)

编辑 --- ~~这是占位符的当前情况 [问题演示]~~ [2] --- 编辑

由于某种原因，我的文本是换行符，然后在动画完成后跳到内联。我不能使用普通的“div”，因为它会影响页面的其余部分，所以我不确定如何让这个东西正常工作。

我的代码与演示中显示的完全一样，减去 div 显示内联块 css 规则

```
div {
display : inline-block;
}
.holdingbox {
position: relative;
top: 0;
}
.leftbox {
position: relative;
top: 0;
left:0;
display:inline-block;
}
.rightbox {
position: relative;
display:inline-block;
overflow:hidden;
width:0;
height:30px;
vertical-align:top;
}
.content{
width:100px;
position:absolute;
left:0;
top:0;
}
.box {
margin-left : 5px;
} 
```

​ html 是

```
<div class="holdingbox">
 <span class="leftbox">Stuff</span>
 <span class="rightbox">
     <span class="content">Stuff to reveal</span>
 </span>
</div>
<div class = "box">Text</div>​ 
```

而js是

```
 $('.holdingbox').hover(function(){
    $('.rightbox').animate({width: '90px'}, 1000)
}, function(){
    $('.rightbox').animate({width: '0'}, 1000)
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:16:37.983

创建一个新的 CSS 规则

`.inline_block { display : inline-block; }`

并在需要的地方添加它，例如

```
<div class="holdingbox inline_block">
 <span class="leftbox inline_block">Stuff</span>
  <span class="rightbox inline_block">
  <span class="content inline_block">Stuff to reveal</span>
 </span>
</div>
<div class = "box inline_block">Text</div>​ 
```

这不应该影响`divs`页面上的其他内容。

# c++ - `django model` 类型抽象可用于 C++ 吗？

> ID：13423226
> 
> 赞同：5
> 
> 时间：2012-11-16T19:35:31.197
> 
> 标签：c++, database, django, orm, django-models

在 Django（使用 python）中，您可以非常轻松地创建“模型”，使您可以抽象出所有 SQL，并简单地使用对象从数据库中检索/存储信息。

谁能指出我允许我做同样事情的 c++ 库？目前我们正在使用 postgres 后端并与 libpqxx 连接。我们正在创建自己的面向对象的数据模型，但本质上必须一遍又一遍地复制/粘贴 sql 代码，然后为每个“模型”对其进行修改。如果我们必须移动到不同的后端，上帝会帮助我们，因为大部分代码都需要调整（目前还没有抽象为创建不同的后端部分）。

是否存在允许我连接到不同类型的后端数据库并抽象出编写任何 SQL 来定义和使用我们的数据库模型的需要的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:53:24.773

虽然此[问题](https://stackoverflow.com/questions/74141/good-orm-for-c-solutions)已关闭，但其中包含许多与您的问题相关的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-14T06:49:08.367

你可能想看看木瓜：[http ://www.quince-lib.com](http://www.quince-lib.com)

它不完全是 django，但它确实可以节省您手动编写 sql 的时间。对于不同的数据库，quince 需要为每个这样的数据库建立一个对应的后端库。目前它有 PostgreSQL 和 sqlite 的后端库。

（完全披露：我写的。）

# excel - Excel VBA 单元格区域复制子例程

> ID：13423227
> 
> 赞同：0
> 
> 时间：2012-11-16T19:35:42.757
> 
> 标签：excel, vba, ms-office

各位程序员，您好，我在 Excel 中遇到 VBA 编码问题。我的问题是将数据从 VBA 中的单元格范围复制到 VBA 中的其他单元格范围。这是我拥有的子例程的示例...

```
 Public Sub CopyRange(ByVal pv_ws_source_worksheet As Worksheet, _
              ByVal pv_ws_destination_worksheet As Worksheet, _
              ByVal pv_rg_source_range As Range, _
              ByVal pv_rg_destination_range As Range)

    Dim Cell_Range As Range
    Dim CommaSplit() As String
    Dim ColonSplit() As String
    Dim i As Integer
    Dim j As Integer

    CommaSplit() = Split(pv_rg_destination_range.Address, ",")

    For Each Cell_Range In pv_ws_source_worksheet.Range(pv_rg_source_range.Address)
        pv_ws_destination_worksheet.Range(CommaSplit(i)).Value = Cell_Range.Value
        i = i + 1
    Next

End Sub 
```

此子当前可以将 B17:B24 等单元格范围复制到 B25、B18、B22、B21、B11、A12、A2、C2 等单个单元格。我需要修改这个子，以便它可以将单元格范围复制到其他单元格范围。这种想法的一个例子是 B24:B30 到 C12:C17，它们可以在不同的工作表上。请帮助我会非常喜欢它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:32:57.653

你多虑了。你可以做一个简单的：

```
Worksheet1.Range("something").Copy
Worksheet2.Range("something").PasteSpecial xlPasteValues
'If needed add this for formatting
'Worksheet2.Range("something").PasteSpecial xlPasteFormat 
```

# tree - 单词的莫尔斯译码器

> ID：13423232
> 
> 赞同：1
> 
> 时间：2012-11-16T19:36:00.903
> 
> 标签：tree, racket, morse-code

我正在尝试为莫尔斯电码编写解码器。到目前为止，我已经创建了一个包含所有字母的摩尔斯电码的树。

```
(define gap '/)
(define long-gap '_)
(define long '-)
(define short '*)

(define morsetree
(make-node "-" gap 
         (make-node "E" short
          (make-node "I" short 
           (make-node "S" short 
            (make-node "H" short empty empty)
            (make-node "V" long empty empty))
           (make-node "U" long 
             (make-node "F" short empty empty)
             empty))
          (make-node "A" long 
                     (make-node "R" short
                                (make-node "L" short empty empty)
                                empty)
                     (make-node "W" long 
                                (make-node "P" short empty empty)
                                (make-node "J" long empty empty))))

        (make-node "T" long 
         (make-node "N" short
          (make-node "D" short
           (make-node "B" short empty empty)
           (make-node "X" long empty empty))
          (make-node "K" long
           (make-node "C" short empty empty)
           (make-node "Y" long empty empty)))
         (make-node "M" long
          (make-node "G" short
            (make-node "Z" short empty empty)
            (make-node "Q" long empty empty))
          (make-node "O" long empty empty))))) 
```

我有一个可用于单个字符的解码器：

```
(define (decode-character code atree)
  (cond
   ((symbol=? (first code) '*) (decode-character (rest code)(node-left atree)))
   ((symbol=? (first code) '-) (decode-character (rest code)(node-right atree)))
   ((symbol=? (first code) '/) (node-letter atree)))) 
```

但是我的文字解码器无法正常工作：

```
 (define (decode code atree)
 (cond
 ((symbol=? (first code) '*) (decode (rest code)(node-left atree)))
 ((symbol=? (first code) '-) (decode (rest code)(node-right atree)))
 ((symbol=? (first code) '/) (cons (node-letter atree) (decode (rest code) atree)))

 ((and (symbol=? (first code) '_) (empty? (rest code))) 
                                          (cons (node-letter atree) (cons " " empty)))
((and (symbol=? (first code) '_) (not(empty? (first (rest code))))) (cons (node-letter atree)  (cons " " (decode (rest code) atree)))))) 
```

使用这个测试： (decode (list '- '/ '* '* '/ '* '_) morsetree)

给我 (list "T" "D" "B" " ") 而不是 (list "T" "I" "E" " ") 因为解码器停留在树中它停止的位置。因此，解码读取的不是 '* '* '- '* '*。

成功解码一封信后，如何“跳转”到我的 morsetree 的开头？

对于这样一个小问题，有很多文字。我不需要一个代码，只是一个很好的提示我如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:37:03.023

让您的代码基本保持不变的快速解决方法：
提供第三个参数进行解码，即完整树。始终将完整树作为第三个参数传递给下一次调用。在您开始一个新字母时的递归调用中，您将整个树传递给 atree，因此您不会在树的中间开始一个新字母。

一个需要更多工作的修复程序，但会使其（在我看来）成为一个更清洁、更好的程序：
在您的 decode 函数中，使用您已经制作的 decode-character 函数。解码函数没有理由需要了解树结构。您可以从 decode-character 中获取第一个字符，然后使用下一个 '/ 或 '_ 之后开始的代码调用 decode

# asp.net - NancyFx 和 Windows 身份验证

> ID：13423239
> 
> 赞同：21
> 
> 时间：2012-11-16T19:36:22.087
> 
> 标签：asp.net, .net, windows-authentication, nancy

我想将 NancyFx 用于 Intranet Web 应用程序。所有文档和论坛都只提到表单和基本身份验证。有人成功使用 Nancy 和 Windows 身份验证吗？

还有一个叫做 Nancy.Authentication.Stateless 的东西，但我看不到它的作用（看起来它是用于 APIs 的）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-02T15:30:56.947

[此线程](https://groups.google.com/forum/#!topic/nancy-web-framework/f7dvC8P9SyQ)讨论了将**Nancy 与 WindowsAuthentication 一起**使用。Damian Hickey 提供了一个[使用 Nancy 的示例，该示例由 OWin 和 WindowsAuthentication 托管](https://www.google.com/url?q=https%3A%2F%2Fgist.github.com%2Fdamianh%2F10086352&sa=D&sntz=1&usg=AFQjCNHO8Wytr3UL-FpTQiul92xprrtS0Q)。

我稍微修改了代码（以删除现在已弃用的代码`NancyOwinHost`）：

```
namespace ConsoleApplication1
{
    using System;
    using System.Net;
    using System.Security.Principal;
    using Microsoft.Owin.Hosting;
    using Nancy;
    using Nancy.Owin;
    using Owin;

    internal static class Program
    {
        private static void Main(string[] args)
        {
            using (WebApp.Start<Startup>("http://localhost:9000"))
            {
                Console.WriteLine("Press any key to quit.");
                Console.ReadKey();
            }
        }
    }

    internal sealed class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            var listener = (HttpListener) app.Properties["System.Net.HttpListener"];
            listener.AuthenticationSchemes = AuthenticationSchemes.IntegratedWindowsAuthentication;

            app.UseNancy();
        }
    }

    public sealed class MyModule : NancyModule
    {
        public MyModule()
        {
            Get[""] = _ =>
            {
                var env = this.Context.GetOwinEnvironment();
                var user = (IPrincipal) env["server.User"];

                return "Hello " + user.Identity.Name;
            };
        }
    }
} 
```

**特别感谢达米安！**

* * *

该示例需要以下 NuGet 包：

*   `Microsoft.Owin.Host.HttpListener`
*   `Microsoft.Owin.Hosting`
*   `Microsoft.Owin`
*   `Nancy`
*   `Nancy.Owin`
*   `Owin`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-14T23:12:19.077

对于基本的 Intranet 应用程序，我需要使用 Nancy 进行 Windows 身份验证。我以@Steven Robbins 的回答作为起点，但去掉了我们不需要的东西，然后增加了`NancyContext.CurrentUser`财产的人口。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Security.Principal;
using System.Web;
using Nancy;
using Nancy.Security;

namespace YourNamespace
{
    /// <summary>
    /// Extensions for Nancy that implement Windows Authentication.
    /// </summary>
    public static class WindowsAuthenticationExtensions
    {
        private class WindowsUserIdentity : IUserIdentity
        {
            private string _userName;

            public WindowsUserIdentity(string userName)
            {
                _userName = userName;
            }

            #region IUserIdentity

            IEnumerable<string> IUserIdentity.Claims
            {
                get { throw new NotImplementedException(); }
            }

            string IUserIdentity.UserName
            {
                get { return _userName; }
            }

            #endregion
        }

        #region Methods

        /// <summary>
        /// Forces the NancyModule to require a user to be Windows authenticated. Non-authenticated
        /// users will be sent HTTP 401 Unauthorized.
        /// </summary>
        /// <param name="module"></param>
        public static void RequiresWindowsAuthentication(this NancyModule module)
        {
            if (HttpContext.Current == null) 
                throw new InvalidOperationException("An HttpContext is required. Ensure that this application is running under IIS.");

            module.Before.AddItemToEndOfPipeline(
                new PipelineItem<Func<NancyContext, Response>>(
                    "RequiresWindowsAuthentication",
                    context =>
                    {
                        var principal = GetPrincipal();

                        if (principal == null || !principal.Identity.IsAuthenticated)
                        {
                            return HttpStatusCode.Unauthorized;
                        }

                        context.CurrentUser = new WindowsUserIdentity(principal.Identity.Name);

                        return null;
                    }));
        }

        private static IPrincipal GetPrincipal()
        {
            if (HttpContext.Current != null)
            {
                return HttpContext.Current.User;
            }

            return new WindowsPrincipal(WindowsIdentity.GetCurrent());
        }

        #endregion

    }
} 
```

你像这样使用它：

```
public class YourModule : NancyModule
{
    public YourModule()
    {
        this.RequiresWindowsAuthentication();

        Get["/"] = parameters =>
            {
                //...
            };
    } 
```

}

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-21T15:14:18.707

我最近在一个内部项目中使用了它——我不太喜欢它，它把你和 asp.net 托管联系在一起，但它确实完成了工作：

```
namespace Blah.App.Security
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Security.Principal;
    using System.Web;

    using Nancy;

    public static class SecurityExtensions
    {
        public static string CurrentUser
        {
            get
            {
                return GetIdentity().Identity.Name;
            }
        }

        public static bool HasRoles(params string[] roles)
        {
            if (HttpContext.Current != null && HttpContext.Current.Request.IsLocal)
            {
                return true;
            }

            var identity = GetIdentity();

            return !roles.Any(role => !identity.IsInRole(role));
        }

        public static void RequiresWindowsAuthentication(this NancyModule module)
        {
            if (HttpContext.Current != null && HttpContext.Current.Request.IsLocal)
            {
                return;
            }

            module.Before.AddItemToEndOfPipeline(
                new PipelineItem<Func<NancyContext, Response>>(
                    "RequiresWindowsAuthentication",
                    ctx =>
                        {
                            var identity = GetIdentity();

                            if (identity == null || !identity.Identity.IsAuthenticated)
                            {
                                return HttpStatusCode.Forbidden;
                            }

                            return null;
                        }));
        }

        public static void RequiresWindowsRoles(this NancyModule module, params string[] roles)
        {
            if (HttpContext.Current != null && HttpContext.Current.Request.IsLocal)
            {
                return;
            }

            module.RequiresWindowsAuthentication();

            module.Before.AddItemToEndOfPipeline(new PipelineItem<Func<NancyContext, Response>>("RequiresWindowsRoles", GetCheckRolesFunction(roles)));
        }

        private static Func<NancyContext, Response> GetCheckRolesFunction(IEnumerable<string> roles)
        {
            return ctx =>
                {
                    var identity = GetIdentity();

                    if (roles.Any(role => !identity.IsInRole(role)))
                    {
                        return HttpStatusCode.Forbidden;
                    }

                    return null;
                };
        }

        private static IPrincipal GetIdentity()
        {
            if (System.Web.HttpContext.Current != null)
            {
                return System.Web.HttpContext.Current.User;
            }

            return new WindowsPrincipal(WindowsIdentity.GetCurrent());
        }

        public static Func<NancyContext, Response> RequireGroupForEdit(string group)
        {
            return ctx =>
                {
                    if (ctx.Request.Method == "GET")
                    {
                        return null;
                    }

                    return HasRoles(group) ? null : (Response)HttpStatusCode.Forbidden;
                };
        }
    }
} 
```

如果它来自本地（用于测试），它会绕过所有安全检查，这可能是一个坏主意，但它是防火墙后面的事情，所以这不是问题。

不建议您逐字使用它，但可能会为您指明正确的方向:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T13:18:22.270

你可以试着帮我完成[Nancy.Authentication.Ntlm](https://github.com/toolchain/Nancy.Authentication.Ntlm)。这绝对是pre-alpha。基于我对南希内部的有限知识，我不知道如何实现几件事。

目前代码挑战客户端，验证答案。但我未能通知客户此操作成功。

但我仍然在努力。真的很难。

如果有的话，我将不胜感激您的意见和拉取请求。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-19T12:43:45.837

站在巨人的肩膀上，我以这种方式实现了它，以允许模拟身份验证以进行测试

```
using System;
using System.Collections.Generic;
using Nancy;
using Nancy.Security;

namespace Your.Namespace
{
    /// <summary>
    /// Extensions for Nancy that implement Windows Authentication.
    /// </summary>
    public static class WindowsAuthenticationExtensions
    {
        private class WindowsUserIdentity : IUserIdentity
        {
            private readonly string _userName;

            public WindowsUserIdentity(string userName)
            {
                _userName = userName;
            }

            #region IUserIdentity

            IEnumerable<string> IUserIdentity.Claims
            {
                get { throw new NotImplementedException(); }
            }

            string IUserIdentity.UserName
            {
                get { return _userName; }
            }

            #endregion
        }

        #region Methods

        /// <summary>
        /// Forces the NancyModule to require a user to be Windows authenticated. Non-authenticated
        /// users will be sent HTTP 401 Unauthorized.
        /// </summary>
        /// <param name="module"></param>
        /// <param name="authenticationProvider"></param>
        public static void RequiresWindowsAuthentication(this NancyModule module, IWindowsAuthenticationProvider authenticationProvider)
        {
            if (!authenticationProvider.CanAuthenticate)
                throw new InvalidOperationException("An HttpContext is required. Ensure that this application is running under IIS.");

            module.Before.AddItemToEndOfPipeline(
                new PipelineItem<Func<NancyContext, Response>>(
                    "RequiresWindowsAuthentication",
                    context =>
                    {
                        var principal = authenticationProvider.GetPrincipal();

                        if (principal == null || !principal.Identity.IsAuthenticated)
                        {
                            return HttpStatusCode.Unauthorized;
                        }

                        context.CurrentUser = new WindowsUserIdentity(principal.Identity.Name);

                        return null;
                    }));
        }

        #endregion

    }
} 
```

IWindowsAuthenticationProvider：

```
using System.Security.Principal;

namespace Your.Namespace
{
    public interface IWindowsAuthenticationProvider
    {
        bool CanAuthenticate { get; }
        IPrincipal GetPrincipal();
    }
} 
```

WindowsAuthenticationProvider：

```
using System.Security.Principal;
using System.Web;

namespace Your.Namespace
{
    public class WindowsAuthenticationProvider : IWindowsAuthenticationProvider
    {
        public bool CanAuthenticate
        {
            get { return HttpContext.Current != null; }
        }

        public IPrincipal GetPrincipal()
        {
            if (HttpContext.Current != null)
            {
                return HttpContext.Current.User;
            }

            return new WindowsPrincipal(WindowsIdentity.GetCurrent());
        }
    }
} 
```

实现它有点混乱，因为您需要将 IWindowsAuthenticationProvided 注入每个模块

```
public DefaultModule(IWindowsAuthenticationProvider authenticationProvider) 
        {
            this.RequiresWindowsAuthentication(authenticationProvider);
            Get["/"] = _ => "Hello World";
        } 
```

# maven - 竹子和多模块项目

> ID：13423242
> 
> 赞同：1
> 
> 时间：2012-11-16T19:36:33.567
> 
> 标签：maven, bamboo

我使用 Atlassian Bamboo 并且在运行我的 maven 模块时遇到了循环 dep 问题。

考虑我有三个模块

```
model
  dto
  dao

logic
  dto
  components

business
  dto
  service 
```

当我从我的 cmd 行运行它时，它将运行

```
model dao
model dto
logic dto
business dto
logic components
business service 
```

这是正确的，也是我设置依赖项的方式。另一方面，Bamboo 只会考虑顶级模块，因此它会看到逻辑和业务之间的循环依赖。

实际情况要复杂一些，但希望这能很好地解释它。

有没有办法让竹子运行并单独考虑每个模块而不是顶层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:14:01.500

您必须像在命令行中运行一样为每个模块创建多个计划。然后您可以对每个计划使用依赖阻塞机制来一个接一个地构建。您可以从 [1] 如何使用相关计划策略获得帮助。1\. [https://confluence.atlassian.com/display/BAMBOO/Dependency+blocking+strategies](https://confluence.atlassian.com/display/BAMBOO/Dependency+blocking+strategies)

# php - 如何检索与不同 MySQL 表中的主键关联的多个条目

> ID：13423243
> 
> 赞同：0
> 
> 时间：2012-11-16T19:36:34.250
> 
> 标签：php, mysql, sql, database

我有两张这样的桌子：

```
-----------------------------------------------------
| PLACES                                            |
-----------------------------------------------------
| Id             | Name          | Address          |
-----------------------------------------------------
| 1              | Parc          | 20 King St       |
| 2              | Bar           | 33 Main St       |
-----------------------------------------------------

-----------------------------------------------------
| PEOPLE                                            |
-----------------------------------------------------
| Id             | Place_id (fk) | Name             |
-----------------------------------------------------
| 1              | 2             | Luke             |
| 2              | 1             | Han              |
| 3              | 1             | Chewie           |
----------------------------------------------------- 
```

我想展示每个地方及其相关人员。要做到这一点，我认为每个地方都有一个带有人员列表的记录会很棒（而不是每个人条目都有相同的地方）。

我真的不熟悉 SQL 查询，所以我尝试使用 Right Join 和 Group By 没有任何积极的结果。

```
SELECT plc.name, plc.address, plp.name 
        FROM places plc
            RIGHT JOIN people plp
                ON plp.place_id = plc.id
                    GROUP BY plc.name; 
```

执行“$query->fetchAll();”后得到的结果 在 PHP 中是这样的：

```
Object {name: "Bar", address: "33 Main St", name: "Luke"}
Object {name: "Parc", address: "20 King St", name: "Han"}
Object {name: "Parc", address: "20 King St", name: "Chewie"} 
```

我想最好的解决方案是像这样过滤一些东西，这会阻止后端和前端的额外工作。但是，我**完全不知道是否有可能**：

```
Object {name: "Bar", address: "33 Main St", name: "Luke"}
Object {name: "Parc", address: "20 King St", name: ["Han", "Chewie"]} 
```

关于如何实现这一目标的任何建议或建议？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:57:56.553

最简单的方法是使用 group_concat

```
select
  place.id as `Id`,
  place.address as `address`,
  GROUP_CONCAT(people.name) as `peopleList`
from
  place,
  peoples
where
  place.id=people.place_id
group by
  place.id 
```

并且，如果您看到结果被裁剪，您可以像这样增加 GROUP_CONCAT 的大小限制：

```
SET SESSION group_concat_max_len = 8192; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:51:17.460

GROUP_CONCAT() 函数用于此目的。

这是一个查询，供您在数据库上进行测试。

```
SELECT p.*, GROUP_CONCAT(pp.name) as people_list FROM places p inner join people pp on p.id = pp.place_id group by p.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:00:08.843

弗兰克，我知道实现您目标的解决方案。你有你的查询，它返回如下结果：

```
Object {name: "Bar", address: "33 Main St", name: "Luke"}
Object {name: "Parc", address: "20 King St", name: "Han"}
Object {name: "Parc", address: "20 King St", name: "Chewie"} 
```

太好了，我会在您的查询中按名称对它们进行排序，以确保您的数据易于解析：

```
SELECT plc.name, plc.address, plp.name 
        FROM places plc
            RIGHT JOIN people plp
                ON plp.place_id = plc.id
            order by plc.id 
```

请注意，我已经排除了 group by 子句。

好的，现在您可以遍历您的对象集，构建另一组具有您所描述的结构的对象，瞧，您准备好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T19:44:58.120

尝试这个：

```
SELECT a.Name, a.Address, group_concat( b.Name ) AS pname FROM `places` AS a
LEFT JOIN `people` AS b ON a.Id = b.Place_id
GROUP BY a.Name 
```

希望这可以帮助。

# php - 不活动超时后发送请求

> ID：13423246
> 
> 赞同：-1
> 
> 时间：2012-11-16T19:36:54.693
> 
> 标签：php, jquery, ajax

我想编写一个行为类似于谷歌翻译表单的代码。

当我在输入文本框中输入一个字母时`0.5`，等待新输入的第二个延迟。如果没有收到新的输入，则将请求发送到服务器，服务器将在输出文本框中返回结果。

我写了一些东西，但它并不完整。你可以帮帮我吗？！

```
$(document).ready(function(){
  $('#source').keyup(function(){
    var keyUpTime = $.now();
    setTimeout(function(){
      if($.now() - keyUpTime >= 500) {
        sendValue($('#source').val());
      }         
    },500);         
  });
});

function sendValue(str){
  $.post("ajax.php",{ sendValue: str }, function(data){
    $('#result_box').html(data.returnValue);
  }, "json");
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:59:42.450

存储您的超时，以便在发生新事件时可以覆盖它，但如果没有进一步提供，则将其发送出去。简单地说：

```
var ajaxTimeout = null;
$('#source').on('keyup', function(e){
  var val = $(this).val();
  if (ajaxTimeout){
    clearTimeout(ajaxTimeout);
  }
  ajaxTimeout = setTimeout(function(){
    sendValue(val);
  }, 0.5e3); // 0.5 seconds
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T23:36:44.147

这是我习惯的：

```
var keyUpTime = 0;                  
    var t = 0;
    var executeAfterOneSecond = false;
    $('#source').keyup(function(){
        if(executeAfterOneSecond == false){
            executeAfterOneSecond = true;
            t = setTimeout(function(){
                executeAfterOneSecond = false;
                sendValue($('#source').val());                          
                }, 600);
            }                                   
        keyUpTime = $.now();
        setTimeout(function(){
            if($.now() - keyUpTime >= 200) {
                clearTimeout(t);
                executeAfterOneSecond = false;
                sendValue($('#source').val());          
                }           
            },200);
    }); 
```

如果字母之间的间隔小于 200ms，则不发送请求。如果超过 600ms，请求还没有发送，则请求自动转发。如果字母之间的间隔超过 200 毫秒，则发送请求。

# mysql - 或在 MySQL 中使查询非常慢

> ID：13423247
> 
> 赞同：0
> 
> 时间：2012-11-16T19:36:59.023
> 
> 标签：mysql, sql, magento

我在 MySQL 中有一个关于 magento 的大查询，这需要很长时间。我试图优化它，但我的 MySQL 知识不足以解决它，所以也许有人可以看看并给我一些正确方向的提示。

```
Select Distinct
  `e`.*,
  `cat_index`.`position` AS `cat_index_position`,
  `price_index`.`price`,
  `price_index`.`tax_class_id`,
  `price_index`.`final_price`,
  IF(price_index.tier_price IS NOT NULL, 
      LEAST(price_index.min_price, price_index.tier_price),
      price_index.min_price) AS `minimal_price`,
  `price_index`.`min_price`,
  `price_index`.`max_price`,
  `price_index`.`tier_price`
From
  `catalog_product_entity` AS `e`
    Inner Join
  `catalog_category_product_index` As `cat_index`
    On cat_index.product_id=e.entity_id And
       cat_index.store_id=1 And
       cat_index.visibility In(2, 4) And
       cat_index.category_id='2'
    Inner Join
  `catalog_product_index_price` AS `price_index` 
    On price_index.entity_id = e.entity_id And
       price_index.website_id = '1' And
       price_index.customer_group_id = 0
    Left Join
  `beta_entity_product` AS `beta` 
    On e.entity_id = beta.product_id And
       beta.entity_id In (81558, 81559, ... stupidly long list of ids)
    Left Join 
  `catalog_product_entity_int` AS `is_uni` 
    On e.entity_id = is_uni.entity_id And
       attribute_id = 179 
Where 
 is_uni.value = 1 OR 
 beta.product_id IS NOT NULL 
```

如果我在 WHERE 子句中只有 1 个条件，一切都很好，但是使用 OR 有时需要几分钟才能完成，这太长了。我必须有哪些选择才能获得更好的结果？另一个问题是我无法从中进行更多查询，而只能将结果连接在一起。一切都必须在 1 个查询中。

当我对查询执行 EXPLAIN 时，我得到以下结果（以 JSON 格式复制以获得更好的概览）：

```
{
        "data":
        [
            {
                "id": 1,
                "select_type": "SIMPLE",
                "table": "e",
                "type": "ALL",
                "possible_keys": "PRIMARY",
                "key": null,
                "key_len": null,
                "ref": null,
                "rows": 213396,
                "Extra": "Using temporary"
            },
            {
                "id": 1,
                "select_type": "SIMPLE",
                "table": "beta",
                "type": "range",
                "possible_keys": "PRIMARY",
                "key": "PRIMARY",
                "key_len": "4",
                "ref": null,
                "rows": 2833,
                "Extra": "Using where; Using index"
            },
            {
                "id": 1,
                "select_type": "SIMPLE",
                "table": "is_uni",
                "type": "ref",
                "possible_keys": "UNQ_CATALOG_PRODUCT_ENTITY_INT_ENTITY_ID_ATTRIBUTE_ID_STORE_ID,IDX_CATALOG_PRODUCT_ENTITY_INT_ATTRIBUTE_ID,IDX_CATALOG_PRODUCT_ENTITY_INT_ENTITY_ID",
                "key": "UNQ_CATALOG_PRODUCT_ENTITY_INT_ENTITY_ID_ATTRIBUTE_ID_STORE_ID",
                "key_len": "6",
                "ref": "unc_cpk.e.entity_id,const",
                "rows": 1,
                "Extra": "Using where"
            },
            {
                "id": 1,
                "select_type": "SIMPLE",
                "table": "cat_index",
                "type": "eq_ref",
                "possible_keys": "PRIMARY,IDX_CAT_CTGR_PRD_IDX_PRD_ID_STORE_ID_CTGR_ID_VISIBILITY,15D3C269665C74C2219037D534F4B0DC",
                "key": "PRIMARY",
                "key_len": "10",
                "ref": "const,unc_cpk.e.entity_id,const",
                "rows": 1,
                "Extra": "Using where"
            },
            {
                "id": 1,
                "select_type": "SIMPLE",
                "table": "price_index",
                "type": "eq_ref",
                "possible_keys": "PRIMARY,IDX_CATALOG_PRODUCT_INDEX_PRICE_CUSTOMER_GROUP_ID,IDX_CATALOG_PRODUCT_INDEX_PRICE_WEBSITE_ID",
                "key": "PRIMARY",
                "key_len": "8",
                "ref": "unc_cpk.cat_index.product_id,const,const",
                "rows": 1,
                "Extra": "Using where"
            }
        ]
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:34:39.333

有多种解决方案：

1) 拆分查询并使用 UNION - 可能的排序和分页问题 2) 添加仅用于此过滤器的新属性，而不是

is_uni.value = 1 或 beta.product_id 不为空

你只会查询

特征过滤器 = 1

3）将查询分解为多个查询 - 我建议这是第一步，因为像这个一样大的查询真的是让自己大吃一惊的好方法

顺便提一句。对这么多列的查询使用 distinct 会消耗大量资源（mysql 需要比较每一列的值！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:01:13.870

`beta.product_id`除非这是您的主键，否则您似乎需要索引？

否则，您可以将其作为一个联合查询来执行，每个查询都有不同的 where 子句：

```
SELECT DISTINCT `e`.*, `cat_index`.`position` AS `cat_index_position`, `price_index`.`price`, 
   `price_index`.`tax_class_id`, `price_index`.`final_price`, IF(price_index.tier_price IS NOT 
   NULL, LEAST(price_index.min_price, price_index.tier_price),
    price_index.min_price) AS `minimal_price`, `price_index`.`min_price`, 
   `price_index`.`max_price`, `price_index`.`tier_price` 
FROM `catalog_product_entity` AS `e`
 INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id 
      AND cat_index.store_id=1 AND cat_index.visibility IN(2, 4) AND cat_index.category_id='2'
 INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id 
  AND price_index.website_id = '1' AND price_index.customer_group_id = 0
 LEFT JOIN `beta_entity_product` AS `beta` ON e.entity_id = beta.product_id AND beta.entity_id IN (81558,81559,84592,84593,87758,87759,87760,87761,90944,90945,90946,90947,94364,94365,94366,94367,98458,98459,98460,98461,98462,98463,104194,104195,104196,104197,110151,110152,110153,110154,110155,110156,116583,116584,116585,116586,123366,123367,123368,123369,123370,123371,123372,123373,130500,130501,130502,130503,130504,130505,130506,138075,138076,138077,138078,138079,138080,146179,146180,146181,146182,146183,146184,154543,154544,154545,154546,154547,154548,154549,154550,163639,163640,163641,163642,163643,163644,163645,173998,173999,174000,174001,174002,174003,174004,174005,174006,174007,184545,184546,184547,184548,184549,184550,195249,195250,195251,195252,195253,195254,195255,195256,195257,195258,206400,206401,206402,206403,206404,206405,217632,217633,217634,217635,217636,217637,217638,217639,229029,229030,229031,229032,229033,229034,229035,229036,229037,229038,229039,229040,240350,240351,240352,240353,240354,240355,240356,240357,240358,240359,240360,240361,251631,251632,251633,251634,251635,251636,251637,251638,251639,262900,262901,262902,262903,262904,262905,262906,262907,262908,262909,274205,274206,274207,274208,274209,274210,274211,274212,274213,274214,274215,274216,274217,285747,285748,285749,285750,285751,285752,285753,285754,285755,285756,285757,285758,297747,297748,297749,297750,297751,297752,297753,297754,297755,297756,297757,297758,297759,297760,297761,309660,309661,309662,309663,309664,309665,309666,309667,322314,322315,322316,322317,322318,322319,322320,322321,334814,334815,334816,334817,334818,334819,334820,334821,334822,334823,334824,334825,334826,346810,346811,346812,346813,346814,346815,346816,346817,346818,346819,346820,346821,358550,358551,358552,358553,358554,358555,358556,358557,358558,358559,358560,358561,358562,370376,370377,370378,370379,370380,370381,370382,370383,370384,370385,370386,370387,381938,381939,381940,381941,381942,381943,381944,381945,381946,381947,381948,381949,381950,391081,391082,391083,391084,391085,391086,391087,391088,391089,391090,391091,391092,391093,396111,396112,396113,396114,396115,396116,396117,396118,396119,396120,396121,396122,396123,396124,396125)
 LEFT JOIN `catalog_product_entity_int` AS `is_uni` ON e.entity_id = is_uni.entity_id AND attribute_id = 179 

WHERE is_uni.value = 1 
UNION
SELECT DISTINCT `e`.*, `cat_index`.`position` AS `cat_index_position`, `price_index`.`price`, 
   `price_index`.`tax_class_id`, `price_index`.`final_price`, IF(price_index.tier_price IS NOT 
   NULL, LEAST(price_index.min_price, price_index.tier_price),
    price_index.min_price) AS `minimal_price`, `price_index`.`min_price`, 
   `price_index`.`max_price`, `price_index`.`tier_price` 
FROM `catalog_product_entity` AS `e`
 INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id 
      AND cat_index.store_id=1 AND cat_index.visibility IN(2, 4) AND cat_index.category_id='2'
 INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id 
  AND price_index.website_id = '1' AND price_index.customer_group_id = 0
 LEFT JOIN `beta_entity_product` AS `beta` ON e.entity_id = beta.product_id AND beta.entity_id IN (81558,81559,84592,84593,87758,87759,87760,87761,90944,90945,90946,90947,94364,94365,94366,94367,98458,98459,98460,98461,98462,98463,104194,104195,104196,104197,110151,110152,110153,110154,110155,110156,116583,116584,116585,116586,123366,123367,123368,123369,123370,123371,123372,123373,130500,130501,130502,130503,130504,130505,130506,138075,138076,138077,138078,138079,138080,146179,146180,146181,146182,146183,146184,154543,154544,154545,154546,154547,154548,154549,154550,163639,163640,163641,163642,163643,163644,163645,173998,173999,174000,174001,174002,174003,174004,174005,174006,174007,184545,184546,184547,184548,184549,184550,195249,195250,195251,195252,195253,195254,195255,195256,195257,195258,206400,206401,206402,206403,206404,206405,217632,217633,217634,217635,217636,217637,217638,217639,229029,229030,229031,229032,229033,229034,229035,229036,229037,229038,229039,229040,240350,240351,240352,240353,240354,240355,240356,240357,240358,240359,240360,240361,251631,251632,251633,251634,251635,251636,251637,251638,251639,262900,262901,262902,262903,262904,262905,262906,262907,262908,262909,274205,274206,274207,274208,274209,274210,274211,274212,274213,274214,274215,274216,274217,285747,285748,285749,285750,285751,285752,285753,285754,285755,285756,285757,285758,297747,297748,297749,297750,297751,297752,297753,297754,297755,297756,297757,297758,297759,297760,297761,309660,309661,309662,309663,309664,309665,309666,309667,322314,322315,322316,322317,322318,322319,322320,322321,334814,334815,334816,334817,334818,334819,334820,334821,334822,334823,334824,334825,334826,346810,346811,346812,346813,346814,346815,346816,346817,346818,346819,346820,346821,358550,358551,358552,358553,358554,358555,358556,358557,358558,358559,358560,358561,358562,370376,370377,370378,370379,370380,370381,370382,370383,370384,370385,370386,370387,381938,381939,381940,381941,381942,381943,381944,381945,381946,381947,381948,381949,381950,391081,391082,391083,391084,391085,391086,391087,391088,391089,391090,391091,391092,391093,396111,396112,396113,396114,396115,396116,396117,396118,396119,396120,396121,396122,396123,396124,396125)
 LEFT JOIN `catalog_product_entity_int` AS `is_uni` ON e.entity_id = is_uni.entity_id AND attribute_id = 179
WHERE beta.product_id IS NOT NULL 
```

根据您的数据，如果 OR 是互斥数据，您可以使用 UNION ALL。您正在运行的查询无法充分利用 INDEX MERGE 以使其通过 OR 语句快速运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T19:57:42.060

如果具有一个条件的每个查询都单独快速，请尝试执行

```
Select
  blah
Where
  is_uni.value = 1
Union
Select
  blah
Where
  beta.product_id Is Not Null 
```

只要他们不返回太多结果，这也将相当快。

或者当你说有一个条件时，你只是说第一个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T20:14:11.853

建议：

1.) 而不是

```
beta.product_id IS NOT NULL 
```

写

```
not (beta.product_id IS NULL) 
```

2.) 如果您想要一个查询请求，您可以创建一个存储过程或存储函数。当然，您可以使用多个查询，最后使用单个数据库服务器请求合并部分结果。

3.) 如果您有复杂的数据库逻辑，请使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)，例如[Flourish](http://flourishlib.com/docs/ObjectRelationalMapping)。

祝你好运。

# transmission - OpenELEC，未安装传输

> ID：13423251
> 
> 赞同：6
> 
> 时间：2012-11-16T19:37:31.223
> 
> 标签：transmission, xbmc

在官方文档和论坛中找不到新信息。有没有人成功在 OpenELEC 2 上安装传输？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-28T10:47:37.663

在 上`OpenELEC 3.2`，服务器附加组件已移至新的非官方附加组件存储库（请参阅[此](http://openelec.tv/news/20-project/102-new-unofficial-addon-repo)）。

要获得该附加组件，因此有必要：

`OpenELEC`1)通过从[此处](http://unofficial.addon.pro)下载来安装新的 repo（默认情况下不包含在 中） 。

2) 按照 amirnissim 描述的步骤，记住在非官方 repo 中寻找服务。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T17:10:28.547

XBMC 有 2 个不同的传输插件：

*   **服务器**插件：您必须安装它才能在您的 XBCM/OpenELEC 机器上运行传输。
*   **客户端**插件：用于从 XBMC 界面下载和管理种子。您不必为了能够下载种子而安装它。

让他们在 OpenELEC 3.0 上：

**服务器加载项**-系统→设置→加载项→获取加载项→所有加载项→服务→传输

**客户端插件**- 程序 → 获取更多 → 传输

`http://[openelecIP]:9091`您可以通过从同一网络上的任何计算机浏览来使用 Web 界面，而不是使用客户端加载项。

要找出 XBMC 的 IP，请导航至系统 → 系统信息 → 网络

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-10T20:52:56.823

对于 Openelec 4.0，您不再需要下载 zip 文件。

1.  Enable Unofficial repo: settings -> Add-ons -> get Add-ons -> All Add-ons -> Add-on repository -> Unofficial OpenELEC ...（只需点击它，它将被启用）
2.  启用传输服务：设置 -> 附加组件 -> 获取附加组件 -> 所有附加组件 -> 服务 -> 传输
3.  安装客户端：系统->设置->加载项->获取加载项->所有加载项->传输

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T05:42:41.143

是的，我在我的专用 openelec 盒子上使用传输。

不要从终端安装。由于 openelec 是嵌入式的，因此必须专门为 openelec 编译传输。

如果您通过>>程序>>获取更多..>>传输安装传输，您将只获得用户界面，..您仍然需要安装服务器

为 openelec 安装传输服务器导航到 >> 设置 >> 附加组件 >> openelec mediacenter os 附加组件 >> 服务 >> 传输

然后您可以配置服务器和客户端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-24T18:57:22.063

我正在使用 OpenElec 5.x 并尝试遵循 Snook 步骤我无法在以下位置找到传输：设置 -> 附加组件 -> 获取附加组件 -> 所有附加组件 -> 服务 -> 传输。

我已经尝试重新启动树莓/OpenElec，在安装非官方 OpenELEC 后打开/关闭树莓/OpenElec，但它从未显示。

还有其他想法吗？

# java - 为什么 Eclipse 或 IntelliJ 中的控制台总是为空？

> ID：13423256
> 
> 赞同：1
> 
> 时间：2012-11-16T19:38:03.993
> 
> 标签：java, eclipse, console, null, intellij-idea

> **可能重复：**
> [System.Console() 返回 null](https://stackoverflow.com/questions/4203646/system-console-returns-null)

代码：

```
public class Demo {

public static void main(String[] args){
    Console c = System.console();
    if (c == null) {
        System.err.println("No console.");
        System.exit(1);
    }else {
        System.out.println("Console is.");
        System.exit(0);
    }
} 
```

}

总是没有控制台。为什么 ？怎么修？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T19:39:20.327

您没有关联任何控制台。

根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#console%28%29)

> 返回与当前 Java 虚拟机关联的唯一 Console 对象，如果有，否则为 null

编辑：

从[控制台 javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)。

虚拟机是否具有控制台取决于底层平台以及调用虚拟机的方式。如果虚拟机从交互式命令行启动而不重定向标准输入和输出流，那么它的控制台将存在，并且通常会连接到启动虚拟机的键盘和显示器。如果虚拟机是自动启动的，例如通过后台作业调度程序，那么它通常不会有控制台。

# ruby - 红宝石硒鼠标移动

> ID：13423268
> 
> 赞同：0
> 
> 时间：2012-11-16T19:38:46.983
> 
> 标签：ruby, selenium

使用 xpath 或 css，我想每次使用不同的 id 或名称去 iframe，所以很难到达那里。喜欢：`enter code here`

```
<iframe src=different every time name=different every time>
<a href=need to know this><img src=need to know this></a> 
```

如果然后单击并关注链接 ang 随时随地获取并制作屏幕截图

但我知道位置总是相同的，所以使用 x 和 y 我可以去那里获取 href 属性和 img 源。我希望可以转到 x 和 y 众所周知的框架并获取 href 和 img src。因此，如果有人可以提出建议，因为我对 ruby​​ 和 selenium 2 不熟悉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:31:17.247

是我们常见的问题，但是您可以使用以下方法来解决它：

WebElement iframe = driver.findElements(By.xpath("//iframe"));

这将检索一个包含页面中所有 xpath 的数组，因此您可以（如果只有一个）获得零位置以切换到它：

driver.switchTo(iframe);

希望这可以帮到你！

# javascript - 使用 jquery then() 打印 html 和 json 结果

> ID：13423270
> 
> 赞同：0
> 
> 时间：2012-11-16T19:38:49.097
> 
> 标签：javascript, jquery, json, jquery-deferred

我正在尝试学习使用 jquery deferreds。

在 jsfiddle 上使用 html 时，我得到一个返回的对象，该对象在`then()`语句中打印时有两行：“成功”和 ajax 请求返回的 html。

所以当我这样做时：

```
$(document).on('click', '.ajax', function() {
    $.when(ajax1('<p>first</p>'), 
           ajax2('<p>second</p>'), 
           ajax3('<p>third</p>'))
     .then(function(results1, results2, results3) {
        console.log(results1);
        $('.document').append(results1);
        $('.document').append(results2); 
        $('.document').append(results3);         
        alert('all ajax done');
    });
}); 
```

[http://jsfiddle.net/loren_hibbard/AsgDz/](http://jsfiddle.net/loren_hibbard/AsgDz/)

我在控制台中得到了这个：

```
["<p>first</p>", "success", 
Object
     abort: function ( statusText ) {
     always: function () {
     complete: function () {
     done: function () {
     error: function () {
     fail: function () {
     getAllResponseHeaders: function () {
     getResponseHeader: function ( key ) {
     overrideMimeType: function ( type ) {
     pipe: function ( /* fnDone, fnFail, fnProgress */ ) {
     progress: function () {
     promise: function ( obj ) {
     readyState: 4
     responseText: "<p>first</p>"
     setRequestHeader: function ( name, value ) {
     state: function () {
     status: 200
     statusCode: function ( map ) {
     statusText: "OK"
     success: function () {
     then: function ( /* fnDone, fnFail, fnProgress */ ) {
          __proto__: Object 
```

我如何才能访问它`responseText`并避免每隔一行显示“成功”的html输出：

```
first
success
second
success
third
success 
```

而且由于我更有可能将它与 JSON 数据一起使用，我该如何解析它。现在，虽然它在我的`then()`函数中返回“ajax all complete”，但控制台中返回的对象是一组三个对象。一个是解析的 json 字符串，另一个是令人讨厌的字符串，上面写着“成功”，第三个是大对象，其中包含我未解析的 JSON 对象的 responseText。如何访问第一个对象并打印我解析的字符串？ [http://jsfiddle.net/loren_hibbard/jtvHf/1/](http://jsfiddle.net/loren_hibbard/jtvHf/1/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:46:32.617

简单的修复——每个结果对象都是一个包含三个项目的数组：

1.  结果数据
2.  状态字符串（“成功”）
3.  JQXHR 对象。

所以只需使用`results1[0]`, 等来获取数据：

```
 $('.document').append(results1[0].JSON); 
```

[演示](http://jsfiddle.net/2TCNr/1/)

* * *

（注意，您的函数中似乎还有一个错字`ajax3`——“type”被设置为`html`而不是 `post'。）

# html - 通过文本框进行 iframe 导航

> ID：13423271
> 
> 赞同：0
> 
> 时间：2012-11-16T19:38:49.440
> 
> 标签：html, iframe

我想在我的 HTML 页面中有一个文本框，还有一个`iframe`. 当用户在文本框中输入 URL 并单击提交时，`iframe`导航到该页面。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:17:09.660

使用jquery单行代码非常简单

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="application/javascript">
function navigate() {
$('#iframe1').attr('src', $('#ifrmsite').val());
return false;
}
</script></head>
<body>
Enter website url below:<br/>
    <form onSubmit="return navigate();" method="get" action="">
        <input type="text" value="http://www.w3schools.com/" name="ifrmSite" id="ifrmsite"/> 
        <input type="submit" value="Submit">
    </form>
<br /><br />
    <iframe name="iframe1" id="iframe1" src="" width="600" height="700" scrolling="auto">
    </iframe>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:03:01.257

如果您不想使用 jquery：

```
<script type="application/javascript">
function submitStuff(){
    document.getElementById('iFrame').src = 'http://' + document.theForm.url.value;
    return false ;
}
</script>
<form name="theForm" method="post" onsubmit="return submitStuff();">
<input name="url" value="">
<input type="submit" name="submitButton" value="Submit">
</form>
<iframe id="iFrame" src="http://www.default.com"></iframe> 
```

# android - 如何以编程方式设置 ga_trackingId 属性？

> ID：13423273
> 
> 赞同：3
> 
> 时间：2012-11-16T19:39:01.927
> 
> 标签：android, google-analytics, google-analytics-api

我有一个应用程序，但根据用户的选择，它将在谷歌分析中完全分开监控，所以我需要以编程方式为 EasyTracker 设置“ga_trackingId”。

我试过`EasyTracker.getTracker().setAppId(id)`没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-15T19:00:51.010

正如我在日志中看到的那样，接受的答案对我不起作用：

```
`W/GAV3﹕ Thread[main,5,main]: Missing tracking id (&tid)` 
```

分析 v3 的解决方案是：

```
EasyTracker tracker = EasyTracker.getInstance(getContext());
tracker.set("&tid", "UA-XXXX-2"); 
```

以这种方式调用它消除了错误，我可以在分析页面上看到我的事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-23T08:41:42.690

要更改 EasyTracker 的 ID，请执行以下操作：

**开始（）**

```
EasyTracker.getInstance(this).set(Fields.TRACKING_ID, "<your_ga_id");
EasyTracker.getInstance(this).activityStart(this); 
```

**停止()**

```
EasyTracker.getInstance(this).activityStop(this); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-22T00:45:57.097

您可以有两个不同的配置 xml 文件并将其设置如下：

```
GoogleAnalytics.getInstance(context).newTracker(R.xml.app_tracker); 
```

请注意，您传递的是 xml 文件，**而不是**trackingId 文件：

```
GoogleAnalytics.getInstance(context).newTracker(R.string.ga_trackingId); 
```

注意**xml.app_tracker**与**string.ga_trackingId**的区别！

使用`xml.app_tracker`配置文件！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T12:13:28.657

```
GoogleAnalytics ga = GoogleAnalytics.getInstance(getActivity());
  tracker = ga.getTracker(getString(R.string.ga_trackingId)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T13:20:31.223

我自己没有尝试过，但是从[这里](https://developers.google.com/analytics/devguides/collection/android/v2/advanced)的描述中，您可以通过以下方式创建一个新的跟踪器

```
Context mCtx = this; // Get current context.
GoogleAnalytics myInstance = GoogleAnalytics.getInstance(mCtx.getApplicationContext());
Tracker myNewTracker = myInstance.getTracker("UA-XXXX-2") // A new tracking ID. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-09T10:26:31.637

我发现`myInstance.setDefaultTracker(myNewTracker);`不工作。我这样做了：设置一个公共库项目。每个 apk 项目都会在 res\values 文件夹中获得一个带有唯一 ID 的 analytics.xml。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-30T08:10:48.780

在 values 文件夹中创建名为 analytics.xml 的 xml 文件

分析.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- Replace placeholder ID with your tracking ID -->
    <string name="ga_trackingId">UA-37995114-1</string>

    <!-- Enable automatic activity tracking -->
    <bool name="ga_autoActivityTracking">true</bool>

    <!-- Enable automatic exception tracking -->
    <bool name="ga_reportUncaughtExceptions">true</bool>

</resources> 
```

添加新的 V2 库文件（jar 文件）

```
link :- https://developers.google.com/analytics/devguides/collection/android/v2/events 
```

我希望它对你有用。

# ruby-on-rails - 将 Rails 变量从控制器传递给 JS

> ID：13423276
> 
> 赞同：1
> 
> 时间：2012-11-16T19:39:09.397
> 
> 标签：ruby-on-rails

**问题描述：**

我有一组链接的视图：

```
<% @feeds.each do |f| %>                
  <div class="feed">
    <span class="feed_counts"> <%= f.display_counts %> </span>
    <%= link_to "refresh", { :controller => 'Feeds', :action => "refresh_feed", :feed_id => f.id}, :remote => true, :class => 'refresh_feed_link' %>
    </div>
<% end %> 
```

用户单击链接并启动下一个控制器方法：

```
def refresh_feed
  @feed = Feed.find(params[:feed_id])
  @feed.parse
end 
```

现在我想将对应的 span-element 的内容更改为 @feed.total_count 值。

**我的尝试：**

好吧，据我所知，有两种方法可以在不重新加载整个页面的情况下做到这一点：

*方式一：*

我可以在我的布局中包含 js：

```
<%= render :partial => 'shared/partial_js' %> 
```

并在 partial_js 中使用此代码：

```
<script type="text/javascript">
  $().ready(function() {

    $('.refresh_feed_link').bind('click', function() {
      $(this).closest('.feed').find('span.feed_counts').text('woo');
    });
 });
</script> 
```

在这种情况下，我有 '$(this)' 并且可以找到相应的 'span' 元素。但是我没有任何可能获得我的@feed 变量值。

*方式二：*

我可以加

```
respond_to do | format |  
  format.js {render :layout => false}  
end 
```

到我的控制器并创建 refresh_feed.js.erb 文件。在这个 JS 文件中，我可以使用我的变量作为 <% @feed.total_count %>，但我不知道我的多个链接中的哪一个被点击了。换句话说，这个文件中的 $(this) 变量将是 (window) 并且我找不到相应的跨度元素。

**问题：**

有什么办法可以得到我想要的吗？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:51:52.513

有很多方法可以做到这一点。使用您描述的方式，这是“单击哪个链接”问题的简单解决方案：[dom_id](http://api.rubyonrails.org/classes/ActionController/RecordIdentifier.html#method-i-dom_id)。

1）做一个部分：app/views/feeds/_feed.html.erb

```
<%= div_for feed do %>
  <span class="feed_counts"> <%= feed.display_counts %> </span>
  <%= link_to "refresh", { :controller => 'Feeds', :action => "refresh_feed", :feed_id => feed.id}, :remote => true, :class => 'refresh_feed_link' %>
<% end %> 
```

2) 在您看来：

```
<%= render @feeds %> 
```

3) 在您的 refresh_feed.js.erb 文件中：

```
$('<%= dom_id(@feed) %>').replaceWith('<%= escape_javascript( render @feed ) %>'); 
```

还有另一种我个人更喜欢的方式，但我会花一点时间来写它，所以我把这个留在这里给你，同时我写另一种方式。

* * *

**第二种方式**

下面是我的做法，使用 CoffeeScript 和 HAML，因为它们更容易输入。你可以把它转换成普通的 JS 和 ERB，它的工作原理是一样的。

我会像这样设置我的路线：

```
resources :feeds do
  get "refresh_feed", :on => :member 
```

假设你有一个“饲料”部分，`app/views/feeds/_feed.html.haml`：

```
= div_for feed, :class => 'feed_widget' do
  %span.feed_counts= f.display_counts
  = link_to "Refresh", refresh_feed_path(f), :class => 'refresh_link' 
```

在任何视图中：

```
= render @feeds

// or, more explicit:

= render :partial => 'feed/feeds', :collection => @feeds, :as => :feed 
```

现在，在`app/assets/javascripts/feeds.js.coffee`

```
# Global Scope for CoffeesScript, ignore for JS
root = exports ? this

# Check page if there are feed widgets on it and initialize a handler for each one.
jQuery ->
  if $('div.feed_widget').length
    $('div.feed_widget').each ->
      new FeedWidget $(this)

root.FeedWidget = (container) ->
  @container = container
  @refresh_link = @container.find('a.refresh_link')
  @feed_counts = @container.find('span.feed_counts')
  this.initialize()

root.FeedWidget.prototype =
  initialize: ->
    self = this
    @feed_counts.click (event) ->
      event.preventDefault()
      $.ajax
        type: 'GET'
        url: self.refresh_link.attr 'href'
        dataType: 'json'
        error: (xhr, status, error) ->
          console.log error
          console.log xhr
        success: (data, status, xhr) ->
          self.feed_counts.text data.feed_counts 
```

然后在你的控制器中：

```
def refresh_feed
  @feed = Feed.find(params[:id]) #assuming you have a resourceful route to this.
  @feed.parse
  respond_to do |format|
    format.js { render :json => { feed_counts: @feed.counts }, :status => :ok } # use whatever method gets you the feed count here.
  end
end 
```

现在您得到一个 JSON 响应，它只是提要计数，并且您有一个 JS 侦听器/处理程序小部件，它将自动显示（和功能）并放置您呈现的部分。酷吧？

注意，上面的代码没有经过测试，因为我没有你的应用程序，所以你必须根据你的需要对其进行改进。但是提出问题，我会尽力回答。

祝你好运！

# thread-safety - Outside In 的 PDF 导出库的函数 EXOpenExport 线程安全吗？

> ID：13423278
> 
> 赞同：0
> 
> 时间：2012-11-16T19:39:15.673
> 
> 标签：thread-safety, oracle-outside-in

我正在`Oracle Outside In PDF Export`Ubuntu Linux 上围绕库为 Node.js 编写 C++ 包装器。Node.js 有一个单线程事件循环，因此任何长时间运行的处理都是在工作线程上完成的。因此，我的包装器正在调用此工作线程内的所有 PDF 导出方法。我提到这一点是为了让您确定两件事：这是一个线程环境，并且所有 PDF 导出函数都在同一个工作线程上调用。此外，我没有使用任何重定向的 IO 或 PDF 导出处理的线程。我已经初始化了指定不使用线程的库。所以所有这些处理都应该发生在我调用函数的线程中。

导出单个 PDF 甚至可能快速连续导出两个或三个 PDF 时，一切似乎都很好。当我尝试导出的 PDF 数量增加到 5 个以上时，我从 OIT 库中收到一个 SIGSEGV 分段错误。回溯如下：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffff4fd0700 (LWP 1577)]
0x00007fffeef1da26 in HandlePoolCreateHandle () from /usr/local/lib/pdfexport/libwv_core.so
(gdb) bt
#0  0x00007fffeef1da26 in HandlePoolCreateHandle () from /usr/local/lib/pdfexport/libwv_core.so
#1  0x00007fffeef1925d in Win32VCreateHandle () from /usr/local/lib/pdfexport/libwv_core.so
#2  0x00007fffed49046b in WrapBrush(void*, GdiBrush*) () from /usr/local/lib/pdfexport/libos_pdf.so
#3  0x00007fffed46e8c8 in ?? () from /usr/local/lib/pdfexport/libos_pdf.so
#4  0x00007fffed46df63 in GNGetOutputSolutionInfoAt () from /usr/local/lib/pdfexport/libos_pdf.so
#5  0x00007fffeef1e32a in ?? () from /usr/local/lib/pdfexport/libwv_core.so
#6  0x00007fffeef1e214 in ?? () from /usr/local/lib/pdfexport/libwv_core.so
#7  0x00007fffeef18ed3 in Win32VLoadOS () from /usr/local/lib/pdfexport/libwv_core.so
#8  0x00007fffeddffb24 in VwExportOpen () from /usr/local/lib/pdfexport/libex_pagelayout.so
#9  0x00007ffff4062c4d in FAOpenExport () from /usr/local/lib/pdfexport/libsc_fa.so
#10 0x00007ffff7e53270 in EXOpenExport () from /usr/local/lib/pdfexport/libsc_ex.so
#11 0x00007ffff43c0a4d in topdf_convert(uv_work_s*) ()
   from /home/ryan/repos/pdf-service/node_modules/topdf/build/Release/topdf.node
#12 0x00000000006e2ec7 in worker (arg=<optimized out>) at ../deps/uv/src/unix/threadpool.c:65
#13 0x00007ffff6fa6e9a in start_thread () from /lib/x86_64-linux-gnu/libpthread.so.0
#14 0x00007ffff6cd3cbd in clone () from /lib/x86_64-linux-gnu/libc.so.6
#15 0x0000000000000000 in ?? () 
```

我会稍微解释一下后面的痕迹。#11 上的函数是我的代码中的函数。这就是我调用所有 OIT lib 函数的函数。第 12 行及更高行的函数是与 Node.js 相关的线程函数，设置线程以运行我的代码的函数。第 10 行到第 1 行的函数都是 OIT 调用的函数。

在 PDF Export 的文档中，它说如果您要在线程环境中使用这个库，那么您每次都需要在工作线程中调用 init 和 deinit 函数。我在我的代码中这样做，你可以在这里看到：[https ://github.com/ryancole/topdf/blob/master/src/topdf.cc#L29-L74](https://github.com/ryancole/topdf/blob/master/src/topdf.cc#L29-L74)

还有什么我需要设置的会导致这种情况吗？我只是明确地指定字体目录。这些库实际上是线程安全的吗？看起来不像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:56:09.810

根据[Oracle Outside In V 8.4.0 文档（第 4.2 章，第 50 页），](http://docs.oracle.com/cd/E26550_01/dev.840/e12887.pdf)您的调用`DAInitEx`是错误的，请检查第一个参数...

> DAInitEx 应该只在每个应用程序启动时调用一次。在调用 DAInitEx 和 DADeInit 之间可以打开任意数量的文档以供访问。如果 DAInitEx 成功，无论任何其他 API 调用如何，都必须调用 DADeInit。

和

> 所有 Windows 平台以及 32 位版本的 Linux x86 和 Solaris SPARC 都支持多线程。线程函数初始化失败不会影响其他 API 调用。如果线程未初始化或失败，则调用存根函数而不是互斥函数。

# java - 在 Java 运行时向最终的静态 HashSet 添加（或删除）对象？

> ID：13423280
> 
> 赞同：0
> 
> 时间：2012-11-16T19:39:21.873
> 
> 标签：java, static, runtime, set, final

我正在使用 Java 4；前段时间我遇到了一个在公共类中声明为的变量：

```
final private static Set name = new HashSet(){
  {
     add(object1); 
     ...; 
     add(objectN);
  }
}; 
```

在某些情况下，我需要在运行时向它添加（或删除）对象。

该类有一个公共构造函数，在我必须向所述 Set 添加或删除对象之前调用它。

我认为最终变量被视为常量，因此我无法在运行时对其调用 .add(object) 和 .remove(object) 方法。但我还是这样做了，我创建了两个公共方法来执行添加和删除操作，并且它有效。

为什么？我希望它要么不编译，要么在运行时抛出某种异常。

有人可以解释吗？

非常感谢，

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:45:32.357

对变量的引用`name`基本上是一个常量，不能修改。但是，正如您所发现的，集合的*内容*可以在运行时发生变化。为了防止这种情况，您可以使其*不可变*，例如

```
final private static Set name = Collections.unmodifiableSet(new HashSet(){
    {
        add(object1); 
        ...; 
        add(objectN);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T19:41:05.703

您不能更改最终变量的引用，但可以更改状态。

例如：

你不能改变参考`name = new HashSet();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T19:41:48.863

在它们所属的类的构造函数执行后，不能为最终变量分配新的引用。但是，您绝对可以通过调用它们的方法来更改它们的内部状态。

# arrays - 通过自定义数据填充组合 ExtJS

> ID：13423281
> 
> 赞同：0
> 
> 时间：2012-11-16T19:39:29.463
> 
> 标签：arrays, extjs, datareader

我有`Combo`ExtJS，应该由 Spring MVC 中的数据填充 - 像这样：

```
 var LongRecord = Ext.data.Record.create([
        {name: 'id', mapping: 'id'}
    ]);

     var comboStore = new MyDataStore.data.Store({
        proxy: new MyDataStore.data.DwrProxy({
            invoker: function(params, arg, cb) {
                // data from server
                AssetScreener.getEntityOwnerIds(cb);
                console.log("invoker has been called");     
            }
        }),

        reader: new Ext.data.ArrayReader({}, LongRecord),
        listeners: {
               'load': function(s, recs) { 
                alert("!");

            }
         }
    }); 
```

组合码：

```
new Ext.form.ComboBox({
  store:  comboStore,
  typeAhead: true,
  triggerAction: 'all',
  editable: false,
  width: 100,
  displayField: 'id',
  valueField: 'id'
}); 
```

问题是我从服务器获取的数据看起来像这样

```
'5','0',["1","8","133"] 
```

我需要对数组进行切片`["1","8","133"]`并以组合形式显示（更改后端 java 代码是不可取的方式）。

在执行此代码后的组合中，我看到三个空项目。需要提示，请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:04:23.217

在加载事件中，您将在切片后`["1","8","133"]`从参数中获取。`recs`用于`store.loadData()`将当前存储记录替换为正确的记录。

您可以从数组中创建一个模型来为商店提供数据，如下所示：

```
var i, item, feed = [];
for(i=0; i<array.length; i++)
{
   item = array[i];
   feed.push(Ext.create('com.your.Model', {
       id : item
   }));
}
store.loadData(feed); 
```

# cakephp - Blowfish 密码行为在 Cakephp 2+ 中不起作用

> ID：13423282
> 
> 赞同：0
> 
> 时间：2012-11-16T19:39:32.987
> 
> 标签：cakephp, cakephp-2.0, encryption, blowfish

[更新到 Cakephp 2+ 后， The Bakery](http://bakery.cakephp.org/articles/xemle/2008/08/26/cipher-behavior)上的密码行为不起作用。收到错误致命错误：在触发行为***时调用未定义函数 getmicrotime() 。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T07:36:53.250

最新的稳定版 2.x 已经提供了河豚加密，`Security::hash()`因此请改用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:39:32.987

在行为的第 139 行，调用了 getMicrotime()。`srand(getMicrotime()*1000);` `getMicrotime()`已从[Cakephp 2.0](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)中删除。

只需更改`getMicrotime()`为`microtime(true)`，行为就会正常工作。

# javascript - chrome javascript 优化 深度魔法

> ID：13423287
> 
> 赞同：3
> 
> 时间：2012-11-16T19:40:00.313
> 
> 标签：javascript, google-chrome, optimization, compiler-construction, v8

我正在为 chrome 优化 javascript 中的 sha-256 > hmac > pbkdf2 加密算法

[http://jsfiddle.net/dtudury/uy3hc/](http://jsfiddle.net/dtudury/uy3hc/)

如果我将一行（在注释之后`// BREADCRUMB`）`ei = (di + t1) >>> 0;`更改为`ei = (di + t1);`我的测试仍然通过，但测试运行时从 <1s 跳到 7s

我相信这`>>> 0`告诉 chrome 它应该将值存储为（实际）int ......但它有一定程度的“货物崇拜”。

我的问题是：“这在任何地方都有记录吗？” 我很想验证它是如何工作的和/或找到一种零操作方式来告诉 chrome 整数（以及任何其他预期此类文档将揭示的 chrome js 编译器的秘密方法）

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T12:19:03.573

一般原则是，是的，Chrome / V8 会尝试确定您的代码是否一直在处理特定类型（如整数），并针对这种情况进行优化。网上有很多关于 Javascript JIT 策略的帖子和演示文稿……例如[这里](http://www.html5rocks.com/en/tutorials/speed/v8/)和[这里](https://blog.mozilla.org/javascript/2012/10/15/the-ins-and-outs-of-invalidation/)。

但是，在这种特定情况下，我的猜测是这是一个错误。一方面，我无法在 node.js 中重现它。此外，用`(di + t1)>>>0`其他常见的 int-casting 'type hints'代替似乎`(di + t1)|0`并`~~(di+t1)`没有改善 Chrome 中的内容。最后，运行 Chrome`--js-flags="--trace-opt --trace-deopt --code-comments"`表明，在缓慢的情况下，`_hashWords`它会被取消优化并重新优化数十次，这可能比根本不尝试优化时更慢。（我想这相当于 CPU 的颠簸。）有趣的是，提供去优化的原因是`shift-i`，这听起来像是编译器一直假设数字不是整数，然后每次遇到整数移位指令时都会感到惊讶。

为了回答您的具体问题，Chrome 编译的确切方式没有记录，但分析和调试性能问题的一般原则和方法是。[这是](http://floitsch.blogspot.com/)我最喜欢的关于性能分析的系列文章——它是由从事 Dart-to-JS 编译器工作的人编写的。

**编辑：** *Doh*，我刚刚意识到这`>>> 0`是转换为*无符号*整数，而`|0`转换为有符号`~~`整数。这可能就是 Chrome 的 V8 无法正确解析类型的原因。

# javascript - Jquery Flot - 初始化到特定的画布位置

> ID：13423289
> 
> 赞同：0
> 
> 时间：2012-11-16T19:40:06.547
> 
> 标签：javascript, jquery, jquery-plugins, flot

我试图找出一种方法来指定画布上的特定位置以在图表初始化时居中。有谁知道是否有办法做到这一点？

我想也许有可能触发一个情节盘到那个位置，但我似乎无法让它工作。有没有人尝试过这样做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:34:03.247

万一有人偶然发现，我在这里找到了一个非常聪明的解决方案：[How to save (preserve) the zoom state of flot graphs on Update with AJAX](https://stackoverflow.com/questions/2814906/how-to-save-preserve-the-zoom-state-of-flot-graphs-on-update-with-ajax)

基本上，Flot 图有一个功能`var options = plot.getOptions();`

然后在绘制之前，只需执行此操作，它基本上会将图表的定位和其他内容复制到新的位置。

```
$.plot(
    // selector
    $chart,
    // line data
    data,
    // plot configs
    options); 
```

繁荣，如果您有任何打开或关闭的线路，它甚至会保留。

# java - 由于编码问题，文件类在 OS X 上运行不佳

> ID：13423291
> 
> 赞同：-1
> 
> 时间：2012-11-16T19:40:09.540
> 
> 标签：java, macos, encoding, character-encoding

我的 OS X 的默认字符集是“UTF-8”，这与我正在处理的 Java 项目相同。问题是当路径包含中文字符时，File 类及其某些方法无法正常工作。（一般unicode表示一个汉字需要3个字节）

比如我先发起一个String variable = "xxx"，其中"xxx"是一个包含汉字的有效路径。之后，我通过 new File(prevStringVar) 创建了一个 File 对象。并且当调用 exists() 方法时，它总是返回 false。

调用 listFiles() 方法时更加连线。

我认为如果可以在实例化 File 对象时指定 Charset，例如构造函数 File(String path, Charset charset)，问题就会得到解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:16:26.667

只需将方法调用为**file = new File("afile")**即可在 Java 代码中创建文件对象的实例。这实际上不会在您的文件系统中创建文件，直到您向其写入内容并刷新缓冲区（关闭将刷新缓冲区）。

尝试使用简单的英文单词，例如“afile”，而不是包含中文字符。这将消除字符编码的问题。一旦你在那里工作，然后更改文件名，看看你的问题是否得到解决。

# javascript - 覆盖原型函数并正确继承其构造函数的最简洁方法是什么

> ID：13423292
> 
> 赞同：3
> 
> 时间：2012-11-16T19:40:11.427
> 
> 标签：javascript, inheritance, constructor, prototype, overriding

除了我在下面做的事情之外，还有其他方法可以在调用基函数并继承其构造函数的同时覆盖原型函数吗？

```
function MyFoo(name) {
    this.name = name;
}
MyFoo.prototype.sayName = function() {
    alert("Hi, my name is " + this.name + ".");
}

MyBar.constructor = MyFoo;
MyBar.prototype = new MyFoo();

function MyBar(name) {
    MyFoo.apply(this, arguments);
};

MyBar.prototype.sayName = function() {
    MyFoo.prototype.sayName.call(this);
    alert("It's nice to meet you!");
}

var fooJim = new MyFoo("Jim");
var barJake = new MyBar("Jake");

fooJim .sayName();
barJake .sayName(); 
```

这工作正常，但我只是好奇是否有更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:25:37.997

不，您模拟类继承的方法本质上是 JavaScript 语言所允许的极简主义。

如果您想在您的应用程序中大量使用类继承并希望最大限度地减少冗余代码，您可以：

*   编写您自己的一组实用方法来操作“类”。
*   或 google 搜索“javascript oop frameworks”以找到适合您需要的库。

我也忍不住建议这本书（希望它不会被视为垃圾邮件）：Stoyan Stefanov 的“JavaScript Patterns”。它有一个非常好的章节，介绍了在 javascript 中模拟类继承的不同技术。

# c# - 动态类创建 - FileNotFound 异常

> ID：13423299
> 
> 赞同：0
> 
> 时间：2012-11-16T19:40:23.313
> 
> 标签：c#

我正在尝试在运行时创建动态类，但是当我在最后一行运行程序时出现以下错误。有谁知道如何解决这个问题？我尝试在网上搜索类似的问题，但没有一个解决方案对我有帮助。提前感谢您的帮助

无法加载文件或程序集 'file:///C:\Users\xxxx\AppData\Local\Temp\jelsfwqz.dll' 或其依赖项之一。该系统找不到指定的文件。

```
string code2 = "using System;" +
"using System.Collections.Generic;" +
"using System.Linq;" +
"using System.Text;" +
"" +

"    public sealed class CustomClass" +
"    {" +

"    }" 
;

        // Compiler and CompilerParameters
        CSharpCodeProvider codeProvider = new CSharpCodeProvider();

        CompilerParameters compParameters = new CompilerParameters();

        CodeDomProvider compiler = CSharpCodeProvider.CreateProvider("CSharp");

        // Compile the code
        CompilerResults res = codeProvider.CompileAssemblyFromSource(compParameters, code2);

        // Create a new instance of the class 'CustomClass'
        object myClass = res.CompiledAssembly.CreateInstance("CustomClass"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:50:12.440

固定代码：

```
 string code2 = 
    "    public sealed class CustomClass" +
    "    {" +

    "    }"
    ;

    // Compiler and CompilerParameters
    CSharpCodeProvider codeProvider = new CSharpCodeProvider();

    CompilerParameters compParameters = new CompilerParameters();

    CodeDomProvider compiler = CSharpCodeProvider.CreateProvider("CSharp");

    **compParameters.ReferencedAssemblies.Add("System.dll");**

    // Compile the code
    CompilerResults res = codeProvider.CompileAssemblyFromSource(compParameters, code2);

    // Create a new instance of the class 'CustomClass'
        object myClass = res.CompiledAssembly.CreateInstance("CustomClass"); 
```

# bash - 如何使用 logger 命令登录到 linux 中的特定文件？

> ID：13423303
> 
> 赞同：15
> 
> 时间：2012-11-16T19:40:43.780
> 
> 标签：bash, logging

我将运行以下脚本：

```
#!/bin/bash
./myprogram

#get exit code
exitvalue=$?

#log exit code value to /var/log/messages
logger -s "exit code of my program is " $exitvalue 
```

但我不希望写入日志消息，`/var/log/messages`因为我没有 root 权限。相反，我希望将其写入我的主目录中的文件：`/home/myuser/mylog`

我应该如何修改`logger`上面的命令？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T20:08:27.407

我不认为你真的需要（或想要）参与`logger`/`syslog`为此。只需将脚本的最后一行替换为：

```
echo "Exit code of my program is $exitvalue" >> /some/file/that/you/can/write/to 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-16T20:39:15.340

If you want to use `logger` so that the message appears both in the system logs and in some file of yours, you might do

```
 logger -s your message 2> $HOME/somefile 
```

since the `-s` option to `logger` also outputs on *stderr* which is redirected to the file with `2>`

You could want to use `2>> $HOME/somefile` to append (not overwrite) your `$HOME/somefile` (read about [`bash` redirections](https://www.gnu.org/software/bash/manual/html_node/Redirections.html)), and (see [logger(1)](http://man7.org/linux/man-pages/man1/logger.1.html) for details) you may prefer to pass the program option `--id=$$` to `logger`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-14T14:41:06.537

简短的“官方”回答是，不幸的是，你不能。

但是，在大多数情况下（例如，在许多 Linux 发行版上），您可能很幸运拥有一个`logger`既支持该`--no-act`选项，又自己实现一些消息格式的实现（见下文），在这种情况下，您可以使用 (中等丑陋）这样的命令来放置a）格式正确的消息，b）到文件中，c）不污染系统日志：

```
logger --no-act -s "Oh dear..." 2>&1 | sed 's/^<[0-9]\+>//' >> /tmp/my.log 
```

*（向@BasileStarynkevitch 和@Kieveli 大声喊叫，他们之前都提到了其中的一部分，而不是整个故事。）*

**笔记：**

1）为了匹配通常的日志文件格式，我不得不“删除”在我的 Debian 机器上输出的`<PRIVAL>`字段（`PRIVAL`= `FACILITY`* 8 + ）。`PRIORITY`你的旅费可能会改变。

2) POSIX 本身并*没有*定义`logger`命令应该如何处理（任何）它的选项。例如，[GNU 记录器](https://www.gnu.org/software/inetutils/manual/html_node/logger-invocation.html)根本不支持`--no-act`。此外，在 2 年前发布此答案的原始版本时，`-s`在我的系统上没有*对*打印输出进行任何格式化，它只是单独回显原始消息，使其完全无用。（我当时没有使用 Systemd，这可能解释了差异，在 logger 源代码中看到了各种与 Systemd 相关的条件调用，但这只是模糊的猜测。）

`logger`3)对于这个微不足道的用例，该命令如此“历史上不友好”的最可能原因是它只是系统记录器的一个相当简单的前端。这意味着您提供给它的任何东西基本上都会直接通过`syslogd`（或`systemd-journald`等），而后者又会进行各种其他进一步的处理和分派（到各种出口：本地和远程的文件、套接字等） ，以及桥接权限级别（因此在您的示例中，您仍然可以登录`syslog`或`user.log`，例如，即使您可能无权直接写入这些文件）。

为了`logger`能够直接正确地记录到文件中，它要么必须（重新）实现系统记录器的一些职责，要么将`syslog()`std. 库函数，或者它不会比一个微不足道的 echo one-liner 更有能力（也许比上面的`logger`调用更简单！;)）。无论哪种方式，这似乎都是个坏主意。

更好的解决方案可能是 POSIX 接口（[logger](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/logger.html)、[syslog()](http://man7.org/linux/man-pages/man3/syslog.3.html)）有一种方法可以在消息中指定一个 ad-hoc 出口/设施参数（如文件名），这样就可以在不重新配置系统的情况下登录到自定义文件（普通用户无论如何都无权这样做）。

然而，由于缺乏更好的东西，“规范的”Linux`logger` [实现](ftp://ftp.kernel.org/pub/linux/utils/util-linux/)实际上似乎复制了一些 syslog 功能，所以我们大多数人都可以免费享受这种奢侈。;)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-11T12:42:04.213

我认为您更好的选择是使用该`date`命令，而不是`logger`在您不想写入系统日志文件的情况下（并且没有权限这样做）。

有关如何使用日期为消息添加前缀并将其写入文件的详细信息，请参阅“[回显前的时间戳”。](https://unix.stackexchange.com/questions/88661/timestamp-before-an-echo)`date`

您创建一个如下所示的 bash 函数，调整`date`格式字符串以获得您想要的内容：

```
echo_time() {
    echo `date +'%b %e %R '` "$@"
} 
```

在您的 bash 脚本中，您将使用：

```
echo_time "Your message here" >> ${LOGFILE} 
```

这会将以下内容放入您的`${LOGFILE}`文件中：

```
Mar 11 08:40 your message here 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-16T19:49:41.587

```
$ man logger 
```

> Logger 为 syslog(3) 系统日志模块提供了一个 shell 命令接口。

如果您希望将内容记录到其他地方，则需要更改您的 syslog 配置。例如，您可以建立一个在您的主目录中具有输出文件的特定*设施。*不过，您需要成为 root 才能做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-16T08:52:09.880

您可以在脚本文件的顶部创建一个像这样的小型记录器函数：

```
#! /bin/bash

#LOG FILE location
log_file=/tmp/mylogfile.log

#the LOG function
LOG()
{
time=$(date '+%Y-%m-%d %H:%M:%S')
echo "$time"" >>> "$1 >>${log_file}
}

message= echo "test logger message"
#to send loggers to your log file use
LOG "my message logged to my log file with timestamp = ""$message" 
```

检查输出：

```
head -1 /tmp/mylogfile.log
2019-09-16 14:17:46 >>> my message logged to my log file with timestamp = test logger message 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-16T11:12:10.857

我可以使用`cat -`女巫回显您的输出，然后`>> [file]`女巫将输出打印到`[file]`终端的插图，因此命令将是

```
cat - >> [file] 
```

缺点是你必须使用 ctrl+C 或 ctrl+Z 退出`logger`对于在线代码更好

# apache - XAMPP 指向根文件夹外的文件

> ID：13423313
> 
> 赞同：0
> 
> 时间：2012-11-16T19:41:20.933
> 
> 标签：apache, apache2, xampp, localhost, document-root

我第一次在 Mac 中使用 XAMPP。访问除根文件夹（htdocs）以外的问题时遇到问题。当我将我的 Web 应用程序放在具有默认 httpd.conf 文件的 htdocs 中时，当我尝试将我的 Web 应用程序 URL 指向 httpd.conf 时它会抛出**`You don't have permission to access / on this server.`**错误

我知道要修改根文件夹，我需要更改我的 XAMPP/etc/httpd.conf 文件

使用默认 XAMPP MAC 设置，我正在尝试更改 XAMPP/etc/httpd.conf 文件中的服务器根目录、文档根目录和目录，如下所示

```
ServerRoot "/Applications/XAMPP/xamppfiles"

DocumentRoot "/Users/ravi/Documents/Development/Backbone/backboneboilerplate"

<Directory />
#Options FollowSymLinks
Options Indexes FollowSymLinks Includes ExecCGI
AllowOverride All
Order deny,allow
Allow from all
</Directory>

<Directory "/Users/ravi/Documents/Development/Backbone/backboneboilerplate">

Options Indexes FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all

</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:56:48.580

这是chmod问题。我尝试将 chmod -r 777 提供给 Development 文件夹、主干文件夹和 Backboneboilerplate .. 它有效。

# asp.net - 一个页面中的多个更新面板，每个面板都有一个自定义验证器，都在回发时触发

> ID：13423314
> 
> 赞同：0
> 
> 时间：2012-11-16T19:41:29.767
> 
> 标签：asp.net, updatepanel, customvalidator

我有一个场景......一个带有多个更新面板的页面，每个更新面板都有一些控件（具有自动回发功能）和与此控件关联的自定义验证器。

问题是......在更新面板中的控件回发时，页面中前面的更新面板中的所有自定义验证器都会被触发。

谷歌搜索这个问题并没有给出明确的解决方案。我怎样才能阻止这种情况发生？这是一个错误还是缺少一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:45:03.083

在更新面板中设置 Mode="Conditional" 然后为每个更新面板声明触发器。这样，每个更新面板在将其设置为更新的触发器中都是有选择性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:52:03.643

这个使用验证组的解决方案怎么样：

[http://simpledotnetsolutions.wordpress.com/2010/12/05/multiple-updatepanels-and-conditional-validation/](http://simpledotnetsolutions.wordpress.com/2010/12/05/multiple-updatepanels-and-conditional-validation/)

# command-line-arguments - Inno Setup IDE 和 ISCC/ISPP 通过定义

> ID：13423317
> 
> 赞同：7
> 
> 时间：2012-11-16T19:41:40.717
> 
> 标签：command-line-arguments, inno-setup

我想同时使用 InnoIDE 和 ISCC/ISPP，不同之处在于我想传入一个参数，该参数将覆盖脚本中的 #define。

在命令行中我可以通过`/Dmyarg=myvalue`. 这与脚本中的相同`#define myarg myvalue`。

遗憾的是，脚本优先于命令行值。我知道，我试过了。我显然可以在脚本中注释掉，`#define`命令行定义将起作用，但是我将无法使用 IDE 进行构建。

是否可以在项目的某个地方设置一个`#define`内部 InnoIDE，或者是否有一些方法可以让命令行`#define`优先？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-17T08:54:16.730

在您的脚本中，执行以下操作：

```
#ifndef myarg
# define myarg "mydefault"
#endif 
```

现在，如果您在 IDE 中编译，或者如果您使用命令行而不指定`/Dmyarg="something"`，那么它将使用脚本中指定的默认值。否则，如果您确实在命令行上指定了某些内容，那么它将改用它。

# node.js - 在 Express 3 中关闭数据库连接

> ID：13423322
> 
> 赞同：6
> 
> 时间：2012-11-16T19:41:57.483
> 
> 标签：node.js, express

在 Express 3 中，当进程存在时如何处理关闭数据库连接？

`.on('close', ...`除非您明确使用 HTTP 服务器的`.close()`调用，否则不会发出该事件。

到目前为止，这是我最接近的，但它使用`process.on`而不是`server.on`：

```
process.on('SIGTERM', function () {
   // Close connections.
   process.exit(0);
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T00:14:51.473

根据以下信息：

*   [https://github.com/visionmedia/express/issues/1366](https://github.com/visionmedia/express/issues/1366)
*   [http://blog.argteam.com/coding/hardening-node-js-for-production-part-3-zero-downtime-deployments-with-nginx/](http://blog.argteam.com/coding/hardening-node-js-for-production-part-3-zero-downtime-deployments-with-nginx/)

--

```
var express = require('express');

var app = express();
var server = app.listen(1337);
var shutting_down = false;

app.use(function (req, resp, next) {
 if(!shutting_down)
   return next();

 resp.setHeader('Connection', "close");
 resp.send(503, "Server is in the process of restarting");
 // Change the response to something your client is expecting:
 //   html, text, json, etc.
});

function cleanup () {
  shutting_down = true;
  server.close( function () {
    console.log( "Closed out remaining connections.");
    // Close db connections, other chores, etc.
    process.exit();
  });

  setTimeout( function () {
   console.error("Could not close connections in time, forcing shut down");
   process.exit(1);
  }, 30*1000);

}

process.on('SIGINT', cleanup);
process.on('SIGTERM', cleanup); 
```

标`Connection: close`头用于告诉任何`keep-alive`连接在下次发送 HTTP 请求时关闭。更多信息在这里：[http ://www.jmarshall.com/easy/http/#http1.1s4](http://www.jmarshall.com/easy/http/#http1.1s4)

我不知道是否有其他方法可以关闭`keep-alive`连接。`keep-alive`除非连接关闭，否则节点进程将挂起。默认空闲超时为 2 分钟。更多信息。关于 node.js`keep-alive`超时（包括更改超时）：[如何在 nodejs 服务器中设置 HTTP Keep-Alive 超时](https://stackoverflow.com/questions/12651466/how-to-set-the-http-keep-alive-timeout-in-a-nodejs-server)

# arrays - 每个元素的初始化列表都是一个关联数组，关联数组的最后一个元素是perl中的两个d数组？

> ID：13423324
> 
> 赞同：-5
> 
> 时间：2012-11-16T19:42:05.127
> 
> 标签：arrays, perl, list, matrix, associative

我正在尝试创建一个数据库。列表中的每个元素都包含关联数组形式的详细信息，每个关联数组的最后一个元素是一个二维数组，我需要帮助初始化它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:28:47.127

您需要详细说明您正在尝试做什么，但这可能会有所帮助：它以您描述的方式初始化 Perl 数据结构。请注意，哈希不能有“最后一个”元素（比“关联数组”更好的名称），因为哈希是无序的。我已经使用`customers`数据字段来保存您所说的二维数组。

```
use strict;
use warnings;

my @list = (
  {
    id => 1,
    name => 'cattle',
    customers => [
      [ 'World Bank', 'Space Marines', 'Undersea Exploration' ],
      [ 1, 2, 3 ],
      [ 0.0500, 0.6322, 0.9930 ],
    ],
  },
  {
    id => 2,
    name => 'arable',
    customers => [
      [ 'Jack Spratt', 'Molly Malone', 'The Whistler' ],
      [ 4, 5, 6 ],
      [ 0.0022, 0.1130, 0.6930 ],
    ],
  },
  {
    id => 3,
    name => 'seafood',
    customers => [
      [ 'Tai Chi School of Fishery', 'Latin Intermediary College', 'Ping Pong Gymnastics' ],
      [ 7, 8, 9 ],
      [ 0.0012, 0.8540, 0.9817 ],
    ],      
  },
); 
```

# c - 如何将结构变量从客户端发送到套接字？

> ID：13423338
> 
> 赞同：0
> 
> 时间：2012-11-16T19:43:03.303
> 
> 标签：c, sockets, client

我正在研究套接字编程。客户端必须向服务器发送一个结构变量。我该怎么办？我已经创建了服务器和客户端，但我被困在了这一点上。

PS：我正在用C编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:45:48.710

在客户端使用写入并在服务器端使用读取？我认为你必须更精确..它总是相同的数据结构吗？如果不是，你怎么知道你收到了哪条消息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:53:29.607

假设您正在尝试发送结构的实例，您可以只发送二进制数据（用结构的大小写入结构）。这假设您在结构中没有任何指针，并且您的结构定义在两侧都完美匹配（同样的位对齐）。

这不是很便携，并且做了很多假设。

更好的选择是将数据编码为标准格式。我喜欢 JSON，主要是因为它很简单并且有大量的解析器。您可以将结构编码为 JSON（有关库，请参见[http://json.org/](http://json.org/)），通过套接字发送它，然后在另一端对其进行解码。

您还需要发送数据的大小，因此您可能需要提出一个简单的协议（前 4 个字节是 JSON 数据的大小，然后发送 JSON 数据）。

自定义协议非常糟糕，因此您可能需要研究标准化协议。如果您只想通过 TCP 发送二进制数据，请考虑使用 WebSocket 协议。这基本上是我所描述的，但更灵活一些。

这就是我所做的，而且效果很好。

# jquery - $.getJSON 渲染数据在 IE8 中不起作用，但在 IE9 和 FireFox 中起作用

> ID：13423341
> 
> 赞同：1
> 
> 时间：2012-11-16T19:43:12.913
> 
> 标签：jquery, internet-explorer-8, render

我在下面进行此函数调用，以根据用户所做的下拉选择获取结果，并在 Div 标记中呈现结果。问题是这在 Firefox 和 IE9 中运行良好，但在 IE8 中不显示结果表。我可以在 IE8 中看到带有检索值的警报消息，但表格显示为空。任何帮助表示赞赏。

```
function retrieveExams() {
    $.getJSON('/request/opscert/retrieveOpscertExams',
            { certificateType : $('#selectedApplicationType').val(),
                classTypeOne : $('#selectedApplicationClassTypeOne').val(),
                classTypeTwo : $('#selectedApplicationClassTypeTwo').val()},
            function(data, textStatus, jqXHR) {
                var html = $('#OpsCertExams').render(data);
                alert(html);
                $('#examTable').html(html);
                $('#examTable tr:odd').css('background-color','#BBBBAA');

                $('#ajaxWaitNoteDiv').hide();
            }
    );
} 
```

//这是嵌入在div标签中以显示结果的下表。此表工作正常，并显示了 Firefox 和 IE9 中的结果。

```
<table id="examTable" style="width:100%"></table> 
```

//这是迭代并显示结果的脚本

```
<script id = "OpsCertExams" type="text/x-jsrender">
    <tr>
        <td style="width:20%;font-size:12px;text-align:center">{{:examDate}}</td>
        <td style="width:20%;font-size:12px;text-align:center">{{:examTime}}</td>
        <td style="width:20%;font-size:12px;text-align:center">{{:examLocation}}/td>
        <td style="width:20%;font-size:12px;text-align:center">{{:examType}}</td>
    </tr>
</script> 
```

# java - 无法创建用于在具有 4 个属性的图中添加顶点的函数/方法

> ID：13423347
> 
> 赞同：-3
> 
> 时间：2012-11-16T19:43:41.637
> 
> 标签：java, vertex-attributes

我无法创建一个函数/方法来在 Java 中添加具有 4 个属性的顶点，即年龄、名称、maritalStatus 和索引，其中新顶点需要插入到指定的索引中。

有人可以指导我如何去做吗？

我如何存储这些详细信息；以邻接矩阵、邻接列表或数组列表的形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:49:16.957

您使用一个类来记忆属性（例如人类类）。然后将创建的对象放入 ArrayList 中。

# ios - UISplitView，在设置代表时接收语义问题

> ID：13423348
> 
> 赞同：2
> 
> 时间：2012-11-16T19:43:45.347
> 
> 标签：ios, xcode, delegates, uisplitviewcontroller

我一直在关注 Big Nerd Ranch 的 iOS 编程指南（第 3 版）来设置我的 Xcode 项目，该项目显示我公司产品的列表，然后是每个产品的详细视图。

我让应用程序按照我需要的方式流畅地运行，但是当我试图想象用户体验时，我开始遇到麻烦。为 iPad 添加一个 UISplitViewController 让我头痛欲裂，浪费了许多下午。

目前，我的委托相关代码报告了语义问题。一个在 DetailViewController.h 中，另一个在 ListViewController.m 中。

在发布之前，我会总结一下我对这段代码的意图，但由于我缺乏经验，我可能会错过一些微妙之处：

AppDelegate 分配 UITableViewController（ListViewController 类）和 UIViewController（DetailViewController 类），然后检查是否有 iPad。如果是 iPad，它会使用两个视图的数组创建一个 UISplitViewController。否则，它将 ListViewController 加载为主视图。

在我尝试在两个视图之间创建委托关系之前，应用程序已成功构建，但 iPad UISplitViewController 仅加载了一个空的详细视图。iphone 加载 ListViewController，然后选择一行显示一个空的详细视图 (DetailViewController)。当您返回 TableView 并选择相同或另一个表格单元格时，正确的信息将加载到 DetailView 中。这让我相信 TableView 的初始实例没有正确传递选择，但返回它（重新分配它？）会纠正问题。我希望委托设置能解决这个问题。由于我无法使该部分正常工作，因此我无法测试该理论。我只是想我会提到它。

关于 UISplitViewController 问题和教程，我已经尽可能多地环顾四周（正确的关键字和搜索字词让我望而却步），但它们都与我在项目中已经设置的内容大不相同，无论是在应用程序的行为或代码的整体结构。当我看起来如此接近时，我宁愿不必重新开始。

我打开了 BigNerdRanch 示例代码（它确实有效），正如我所说，唯一的区别似乎与我想要显示我的信息的方式有关。在这一点上，我需要一些帮助，请找出我做错了什么。

提前致谢！

AppDelegate.m:

```
#import "ProductFeedAppDelegate.h"
#import "ListViewController.h"
#import "DetailViewController.h"

@implementation ProductFeedAppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    ListViewController *lvc = [[ListViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *masterNav = [[UINavigationController alloc] initWithRootViewController:lvc];

    DetailViewController *dvc = [[DetailViewController alloc] init];
    [lvc setDetailViewController:dvc];

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

        UINavigationController *detailNav = [[UINavigationController alloc] initWithRootViewController:dvc];
        NSArray *vcs = [NSArray arrayWithObjects:masterNav, detailNav, nil];
        UISplitViewController *svc = [[UISplitViewController alloc] init];

        //set delegate
        [svc setDelegate:dvc];
        [svc setViewControllers:vcs];

        [[self window] setRootViewController:svc];

    } else {

        [[self window] setRootViewController:masterNav];

    }

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

//... trimmed out some template code to spare you
@end 
```

` ListViewController.h:

```
 #import <Foundation/Foundation.h>
#import "ProductItemCell.h"
//#import "ItemStore.h"
#import "DetailViewController.h"

@class DetailViewController;

@class RSSChannel;

@interface ListViewController : UITableViewController 
{

    RSSChannel *channel;
}

@property (nonatomic, strong) DetailViewController *detailViewController;

-(void)fetchEntries;

@end

//A new protocol named ListViewControllerDelegate
@protocol ListViewControllerDelegate

//Classes that conform to this protocol must implement this method:
- (void)listViewController:(ListViewController *)lvc handleObject:(id)object;
@end 
```

ListViewController.m：

```
#import "ListViewController.h"
#import "RSSChannel.h"
#import "RSSItem.h"
#import "DetailViewController.h"
#import "ContactViewController.h"
#import "FeedStore.h"

@implementation ListViewController
@synthesize detailViewController;

- (void)transferBarButtonToViewController:(UIViewController *)vc
{
    // Trimming Code
}
- (id)initWithStyle:(UITableViewStyle)style
{
    // Trimming Code
}

- (void)showInfo:(id)sender
{
    // Create the contact view controller
    ContactViewController *contactViewController = [[ContactViewController alloc] init];

    if ([self splitViewController]) {
        [self transferBarButtonToViewController:contactViewController];

        UINavigationController *nvc = [[UINavigationController alloc]
                                       initWithRootViewController:contactViewController];

        // Create an array with our nav controller and this new VC's nav controller
        NSArray *vcs = [NSArray arrayWithObjects:[self navigationController],
                        nvc,
                        nil];

        // Grab a pointer to the split view controller
        // and reset its view controllers array.
        [[self splitViewController] setViewControllers:vcs];

        // Make contact view controller the delegate of the split view controller
        [[self splitViewController] setDelegate:contactViewController];

        // If a row has been selected, deselect it so that a row
        // is not selected when viewing the info
        NSIndexPath *selectedRow = [[self tableView] indexPathForSelectedRow];
        if (selectedRow)
            [[self tableView] deselectRowAtIndexPath:selectedRow animated:YES];
    } else {
        [[self navigationController] pushViewController:contactViewController
                                               animated:YES];
    }

    // Give the VC the channel object through the protocol message
   // [channelViewController listViewController:self handleObject:channel];
}

- (void)viewDidLoad
{
    // Trimming Code
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    return [[channel items] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    // Trimming Code

}

- (void)fetchEntries
{
    // Trimming Code
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (![self splitViewController])
        [[self navigationController] pushViewController:detailViewController animated:YES];
    else {
        [self transferBarButtonToViewController:detailViewController];
        // We have to create a new navigation controller, as the old one
        // was only retained by the split view controller and is now gone
        UINavigationController *nav =
        [[UINavigationController alloc] initWithRootViewController:detailViewController];

        NSArray *vcs = [NSArray arrayWithObjects:[self navigationController],
                        nav,
                        nil];

        [[self splitViewController] setViewControllers:vcs];

        // Make the detail view controller the delegate of the split view controller
        [[self splitViewController] setDelegate:detailViewController];

    }

    RSSItem *item = [[channel items] objectAtIndex:[indexPath row]];

     // Next line reports: No visible @interface for 'DetailViewController' declares the selector 'listViewController:handleObject:'
    [detailViewController listViewController:self handleObject:item]; 

}

@end 
```

DetailViewController.h：

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import "ListViewController.h"

@class RSSItem;
@class Reachability;

@interface DetailViewController : UIViewController <ListViewControllerDelegate> // Cannot find protocol declaration for 'ListViewControllerDelegate' 
{
    __weak IBOutlet UILabel *nameField;
    __weak IBOutlet UITextView *descriptField;
    __weak IBOutlet UIImageView *imageView;
    __weak IBOutlet UITextView *introtextField;
    __weak IBOutlet UIButton *dsButton;
    __weak IBOutlet UIButton *aeButton;
    __weak IBOutlet UIButton *imButton;
}

-(BOOL)reachable;

@property (nonatomic, strong) RSSItem *item;
@property (nonatomic, strong) UIImage *productImage;

@end 
```

DetailViewController.m：

```
#import "DetailViewController.h"
#import "RSSItem.h"
#import "RSSChannel.h"
#import "Reachability.h"

@interface DetailViewController ()

@end

@implementation DetailViewController

- (void)listViewController:(ListViewController *)lvc handleObject:(id)object
{
    //RSSItem *item = object; //This was in the example code but if left in the next line reported "Local declaration of 'item' hides instance variable"
    // Validate the RSSItem
    if (![item isKindOfClass:[RSSItem class]])
          return;

    [self setItem:item];
    [[self navigationItem] setTitle:[item name]];

    [nameField setText:[item name]];
    [descriptField setText:[item descript]];
    [introtextField setText:[item introtext]];
}

@synthesize item;

- (BOOL)reachable{
    // Trimming Code
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[self view] setBackgroundColor:[UIColor whiteColor]];
}

- (void)viewWillAppear:(BOOL)animated
{
    if (item){
        [super viewWillAppear:animated];

        [nameField setText:[item name]];
        [descriptField setText:[item descript]];
        [introtextField setText:[item introtext]];
        // Trimming Code (all the stuff that looks for this or that value and acts upon it)
    }  else {
        // The following appears in the log:
        NSLog(@"There's no item selected");
    }

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:59:21.823

我认为您遇到了一个问题，编译器因有几个而感到困惑

```
#import "DetailViewController.h" 
```

如果您从 ListViewController.h 中删除此导入并保留

> @class DetailViewController;

然后我认为这将摆脱你的编译器问题。

不过，您可能需要添加`< UISplitViewControllerDelegate >`到其他几个类。看起来您将它们设置为拆分视图上的委托，但未采用协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:05:19.923

委托关系没有 100% 正确设置。这是解决此问题的方法。

在 ListViewController.m 中，添加了一个类扩展：

```
@interface ListViewController() <UISplitViewControllerDelegate>
@end 
```

在 ListViewController.h 中，删除：

```
#import "DetailViewController.h" 
```

在 DetailViewController.h 中，将行更改为：

```
@interface DetailViewController : UIViewController <ListViewControllerDelegate, UISplitViewControllerDelegate> 
```

在 ContactViewController.h 中，将行更改为：

```
@interface ContactViewController : UIViewController <MFMailComposeViewControllerDelegate, UISplitViewControllerDelegate> 
```

这些东西清除了所有错误。正如我在原始帖子中所希望的那样，这并没有纠正我的项目未传递给 detailViewController 的问题，因为该问题是在 DetailViewController.m 的 handleObject 语句中使用“item”而不是“object”的结果。

# iphone - 在 iOS 中嵌套 UIViewController

> ID：13423350
> 
> 赞同：0
> 
> 时间：2012-11-16T19:43:53.227
> 
> 标签：iphone, ios, uiviewcontroller

考虑一个`UIViewController`其视图包含另一个视图`UIViewController`。

说父`UIViewController`级负责调用子控制器的生命周期方法是否正确？方法如：

```
- (void)viewWillAppear:(BOOL)animated;
- (void)viewDidAppear:(BOOL)animated;
- (void)viewWillDisappear:(BOOL)animated;
- (void)viewDidDisappear:(BOOL)animated; 
```

例如：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [_childViewController viewWillAppear:animated];
} 
```

如果是这样，必须调用哪些方法？

有一个更好的方法吗？显然，上述方法是不向前兼容的：如果添加了新的生命周期方法，则需要修改父类以传播新方法的调用。

或者嵌套视图控制器只是一个坏主意，应该避免？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:53:37.957

正确的做法是将视图控制器添加为子视图控制器。您需要同时维护视图层次结构（将视图添加为子视图）和视图*控制器*层次结构（将视图控制器添加为子视图）。然后为您调用所有生命周期方法。

相关方法是`addChildViewController:`和`didMoveToParentViewController:`。

在 WWDC 2011 中有一个关于视图控制器遏制的演讲，我建议观看视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:07:47.900

如果您想创建一个仍然支持 iOS 4 的层次结构，您确实需要自己转发 addChildViewController: 文档中详述的消息。

如果没有针对 iOS 4 并且您只需要为 ios 5 及更高版本构建，请坚持使用 jrturton 所说的新 API。

# c# - 使用 LINQ 做我需要做的更好的方法？

> ID：13423353
> 
> 赞同：1
> 
> 时间：2012-11-16T19:43:57.650
> 
> 标签：c#, linq, refactoring

我不确定是否有更有效的方法来做我正在使用 LINQ 做的事情......我有两个枚举：

enumA(string): `{ "Andy", "Bill", "Charlie", "Doug" }`
enumB(foo): `{ "Doug", "Edward", "George", "Bill" }`（注意 enumB 实际上包含对象）

```
var dictionary = new Dictionary<string, 
foreach (var a in enumA)
{
    var b = enumB.SingleOrDefault(x => String.Equals(x.ToString(), a));

    if (b != null)
        dictionary[a] = b;
} 
```

* * *

当我确定可能有一种更“正确”的方式使用 LINQ 创建字典时，一遍又一遍地枚举 enumB 并以这种方式创建字典对我来说似乎很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:46:46.993

您可以使用

```
join 
```

和

```
ToDictionairy 
```

之后打电话。

```
 var listA = "abcd";
        var listB = "cdef";

        var tuples = from charFromA in listA
                    join charFromB in listB
                    on charFromA.ToString() equals charFromB.ToString() // instead of ToString(), do something complex
                    select new { A = charFromA, B = charFromB };

        var dictionairy = tuples.ToDictionary(keySelector: t => t.A,elementSelector: t => t.B); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:55:03.510

```
var query = from b in enumB.Where(x => x != null)
            join a in enumA on b.ToString() equals a
            select new { a, b };
var dictionary = query.ToDictionary(x => x.a, x => x.b); 
```

或者使用流畅的 API：

```
var dictionary = enumB.Where(b => b != null)
                      .Join(enumA, 
                            b => b.ToString(), 
                            a => a, 
                            (b, a) => new { a, b })
                      .ToDictionary(x => x.a, x => x.b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:56:27.087

```
var dictionary = enumA
    .Join(enumB, a => a, b => b.ToString(), (a, b) => new { A = a, B = b })
    .ToDictionary(i => i.A, i => i.B); 
```

如果有任何重复的键，这将引发异常，因此您可以使用：

```
var dictionary = enumA
    .Join(enumB, a => a, b => b.ToString(), (a, b) => new { A = a, B = b })
    .Aggregate(new Dictionary<string, Foo>(), (dict, i) => {
        dict[i.A] = i.B;
        return dict;
    }); 
```

这将保留最后一个匹配值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T20:02:01.060

```
var dict = enumA.Join(enumB, a => a, b => b, (a, b) => new {a, b})
                .GroupBy(x => x.a)
                .ToDictionary(x => x.Key, x => x.First()); 
```

GroupBy 是为了消除 enumB 中可能的重复。

如果 enumB 重复项不存在，您可以将其简化为

```
var dict = enumA.Join(enumB, a => a, b => b, (a, b) => new {a, b})
                .ToDictionary(x => x.a, x => x.b); 
```

# uiscrollview - 控制对角线滑动是用于水平 UIScrollView 还是嵌套垂直 UIScrollView？

> ID：13423354
> 
> 赞同：5
> 
> 时间：2012-11-16T19:44:08.257
> 
> 标签：uiscrollview, ios6, nested, swipe, diagonal

### 短的

如何控制 UIScrollView 上的滑动是否产生了足够大的 Y 增量以被视为垂直滑动并让它由嵌套的 UIScrollView (UIWebView) 处理？

### 长

我有一个 UIScrollView 水平页面。“页面”是一个 UIWebView（其中包含一个 UIScrollView）并且只能垂直滚动。内容大小均已正确设置，以便按预期工作。

但是，我注意到，当您尝试快速水平滑动时，您很有可能会稍微对角滑动。如果它只是一点点，滚动视图会按照我的意愿处理它，但是 Y delta 不时足以使嵌套滚动视图（UIWebView）将滑动识别为垂直滑动，而 X delta 可以考虑大到足以指示水平滑动。

我发现很多旧文章解释说应该覆盖标准的 UIResponder 触摸方法（例如`touchesBegan:withEvent:`），但是，现在这一切都由手势识别器处理。

那么如何影响分页滚动视图的平移手势识别器以允许更多的 Y 增量用于水平滑动？

根据我的需要，使其工作的一种方法是：

*   `delaysContentTouches`在分页滚动视图上设置为`NO`
*   对嵌套滚动视图的平移手势识别器添加对分页滚动视图的平移手势识别器的依赖以失败。

但是，这会破坏嵌套滚动视图中的垂直滚动，从而在滑动结束并快速完成之前无法识别它们。我怀疑这是因为分页滚动视图的平移手势识别器在触摸结束之前不会失败。

# java - 检测特殊字符的按键

> ID：13423357
> 
> 赞同：0
> 
> 时间：2012-11-16T19:44:15.923
> 
> 标签：java, jbutton, keylistener

当按下具有相同字母/符号的键时，我试图更改按钮的背景颜色，但问题是此代码不适用于符号和空格，我做错了什么，如何解决？

这是代码：

```
 private String names[]={"`"," 1 "," 2 "," 3 "," 4 "," 5 "," 6 "," 7 "," 8 "," 9 "," 0 "," - "," + ","  Backspace  "
        ,"  Tab  "," Q "," W "," E "," R "," T "," Y "," U "," I "," O "," P "," [ "," ] "," \\ "
        ,"  Caps Lock "," A "," S "," D "," F "," G "," H "," J "," K "," L "," ; "," ' ","  Enter  "
        ,"  Shift  "," Z "," X "," C "," V "," B "," N "," M "," , "," . "," / "," ^ "
        ,"                             "," < "," ! "," > "};

public void keyPressed(KeyEvent event)
    {
        int code= event.getKeyCode();
        String x;

        for(int i=0;i<names.length;i++)
        {

            s=names[i];
            x=s.trim();

            if(x.contentEquals(event.getKeyText(code)) )
            {
                backColor=but[i].getBackground();
                but[i].setBackground(Color.RED);
                break;
            }
        }
    }

    public void keyReleased(KeyEvent event)
    {
        String x;
        int code= event.getKeyCode();

        for(int i=0;i<names.length;i++)
        {
            s=names[i];
            x=s.trim();

            if(x.contentEquals(event.getKeyText(code)))
            {System.out.println("outside");
                but[i].setBackground(backColor);
                break;
            }
        }
    } 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:04:44.013

我会看看你的`names`数组并将其与结果进行比较`KeyEvent#getKeyText`

我的小测试程序输出了这个......

```
[PRESSED ] "Space"
[TYPED   ] "Unknown keyCode: 0x0"
[RELEASED] "Space"
[PRESSED ] "Enter"
[TYPED   ] "Unknown keyCode: 0x0"
[RELEASED] "Enter" 
```

你的`names`数组有存储空间`" Space "`，这是永远不会匹配的。

您永远不应该依赖结果，`KeyEvent#getKetText`因为它没有考虑键盘的当前扩展状态（即如果按下 shift），这可能会改变键的状态。

例如，如果我输入 [']，我的测试程序将输出`Quote`，但如果我输入 [shift+']（应该产生 ["]），它仍然会显示`Quote`. 甚至不要让我开始使用 { 和 [ :P

如果您对显示击键文本不感兴趣，则最好依靠虚拟键值

```
public class PaintMyKeys {

    public static void main(String[] args) {
        new    PaintMyKeys();
    }

    public PaintMyKeys() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PaintMyKeysPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintMyKeysPane extends JPanel {

        private JLabel label;

        public PaintMyKeysPane() {

            setLayout(new BorderLayout());

            label = new JLabel("Press space to change colors", JLabel.CENTER);
            label.setOpaque(true);

            add(label);

            addKeyListener(new KeyAdapter() {

                protected int random() {
                    return (int)Math.round(Math.random() * 255);
                }

                protected Color randomColor() {

                    int r = random();
                    int g = random();
                    int b = random();
                    int a = random();

                    return new Color(r, g, b, a);

                }

                @Override
                public void keyReleased(KeyEvent e) {
                    if (e.getKeyCode() == KeyEvent.VK_SPACE) {
                        label.setBackground(randomColor());
                        label.setForeground(randomColor());

                    }
                }
            });

            setFocusable(true);
            requestFocusInWindow();        
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:54:05.743

作为一般规则，`getKeyText()`浏览器的结果并不统一，并且与实际上是文本（字母和数字）的键无关。

我认为你应该重新考虑你的使用方法`getKeyCode()`。

有用的链接：

*   [此页面](http://www.asquare.net/javascript/tests/KeyCode.html)可用于测试哪个 keyCode 与某个键相关联。
*   [此页面](http://www.javascripter.net/faq/keycodes.htm)为您提供密钥和密钥代码之间的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:57:57.027

据我所知，getKeyText() 方法返回单词而不是大多数符号（例如，“.”的代码产生“PERIOD”）。不要在名称数组中使用“.”等类似名称，而是使用“PERIOD”和“SPACE”。

[这](http://www.java2s.com/Code/Java/Event/GetKeyText.htm)是 getKeyText() 方法的代码，它准确显示了哪些字符将返回键的名称。

# xml - xsl：选择出现次数较多的元素

> ID：13423360
> 
> 赞同：3
> 
> 时间：2012-11-16T19:44:21.540
> 
> 标签：xml, xslt

在 xsd 文件中，我定义了一个出现次数较多的元素：

```
<xs:element name="Type" type="xs:string" maxOccurs="unbounded"/> 
```

所以在 xml 文件中，对象可能包含更多的“类型”元素。在 xsl 文件中，我所做的是：

```
<xsl:for-each select="Movies/Movie">
<tr>
<td><xsl:value-of select="Type"/></td>
</tr>
</xsl:for-each> 
```

通过这种方法，我只能获得该节点集中的第一个“Type”元素。但是我想选择“电影/电影”节点集中存在的所有“类型”元素，有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:35:52.167

在 XSLT 1.0 中，当 xsl:value-of 选择多个节点时，将忽略除第一个之外的所有节点。在 XSLT 2.0 中，您将获得所有选定节点的空格分隔连接。从您的证据中听起来好像您正在使用 XSLT 1.0。如果要在 XSLT 1.0 中选择多个元素，则需要一个 for-each：

```
<xsl:for-each select="Type">
  <xsl:value-of select="."/>
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:36:09.593

您将需要使用另一个`xsl:for-each`或使用`xsl:apply-templates`。

这是一个不使用的示例`xsl:for-each`...

**XML 输入**

```
<Movies>
    <Movie>
        <Type>a</Type>
        <Type>b</Type>
        <Type>c</Type>
    </Movie>
    <Movie>
        <Type>1</Type>
        <Type>2</Type>
        <Type>3</Type>
    </Movie>
</Movies> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/*">
        <html>
            <xsl:apply-templates/>
        </html>
    </xsl:template>

    <xsl:template match="Movie">
        <tr>
            <xsl:apply-templates/>
        </tr>
    </xsl:template>

    <xsl:template match="Type">
        <td><xsl:value-of select="."/></td>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<html>
   <tr>
      <td>a</td>
      <td>b</td>
      <td>c</td>
   </tr>
   <tr>
      <td>1</td>
      <td>2</td>
      <td>3</td>
   </tr>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:47:55.013

尝试以下操作（匹配并选择索引为 1）：

```
 <xsl:template match="/Movies/Movie">
       <xsl:value-of select="Type[1]"/>
  </xsl:template> 
```

# jaxb - JAXBException：意外元素（uri：“”，本地：“workConfigRestWrapper”）。预期元素是 <{}Config>、<{}MyMap>

> ID：13423366
> 
> 赞同：1
> 
> 时间：2012-11-16T19:45:10.180
> 
> 标签：jaxb, unmarshalling, xml-binding

我需要使用 xml 绑定解组映射给出错误。

MyMap.java：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "MyMap")
public class MyMap {
@XmlElement(name = "Config", required = true)
private final List<Config> config = new ArrayList<Config>();

public List<Config> getConfig() {
    return this.config;
}
} 
```

MyAdaptor.java : 公共类 MyAdaptor 扩展 XmlAdapter> {

```
@Override
public MyMap marshal(Map<String,String> v) throws Exception {
    MyMap myMap = new MyMap();
    List<Config> aList = myMap.getConfig();
    for ( Map.Entry<String,String> e : v.entrySet() ) {
        aList.add(new Config(e.getKey(), e.getValue()));
    }
    return myMap;
}

@Override
public Map<String,String> unmarshal(MyMap v) throws Exception {
    Map<String,String> map = new HashMap<String,String>();
    for (Config e : v.getConfig()) {
        map.put(e.getKey(), e.getValue());
    }
    return map;
}
} 
```

配置.java：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "Config")
public class Config {

@XmlAttribute(name = "key", required = true)
private final String key;
@XmlAttribute(name = "value", required = true)
private final String value;

public Config(String key, String value) {
    this.key = key;
    this.value = value;
}

public Config() {
    this.key = null;
    this.value = null;
}

public String getKey() {
    return key;
}

public String getValue() {
    return value;
}
} 
```

客户端代码：

```
 String getConfigurationMethod = baseUrl + "getConfiguration";
            byte[] getConfigurationResponse = (byte[]) this
                .sendGetMethod(getConfigurationMethod);
            unmarshaller = this.getUnmarshaller(MyMap.class);
    reader = new StringReader(new String(getConfigurationResponse));
    MyMap myMap = (MyMap) unmarshaller.unmarshal(reader); 
```

错误信息：

JAXBException：意外元素（uri：“”，本地：“workConfigRestWrapper”）。预期元素是 <{}Config>、<{}MyMap> javax.xml.bind.UnmarshalException：意外元素（uri：“”，本地：“workConfigRestWrapper”）。预期元素是 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:662) 上 com.sun.xml.bind.v2 上的 <{}Config>、<{}MyMap>。 runtime.unmarshaller.Loader.reportError(Loader.java:258) 在 com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:253) 在 com.sun.xml.bind.v2。 runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:120) 在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1063) 在 com.sun.xml.bind。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:51:43.260

我将客户端代码修改为：

```
 byte[] getConfigurationResponse = (byte[]) this.util
            .sendGetMethod(this.getConfigurationMethod);

    Unmarshaller unmarshaller = this.getUnmarshaller(**WorkConfigRestWrapper.class**);
    StringReader reader = new StringReader(new String(getConfigurationResponse));
    **WorkConfigRestWrapper wrk** = (WorkConfigRestWrapper) unmarshaller
            .unmarshal(reader); 
```

我使用的是 myMap 而不是包装类。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:52:42.987

尝试在 MyMap.java 类上放置注释 @XmlType(propOrder = {})。通过使用这种类型，您可以按任何顺序读取文件的内容。

# android - 微调器和 onItemSelected

> ID：13423378
> 
> 赞同：0
> 
> 时间：2012-11-16T19:45:53.533
> 
> 标签：android

如果我有 2 个微调器取决于类型 ArrayList>

```
 spinner2.setOnItemSelectedListener(new OnItemSelectedListener() {
                    @Override
                    public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {
                         ArrayList<HashMap<String, String>> arrList = new ArrayList<HashMap<String,String>>();
                        for (HashMap<String, String> map2 : arrList) {
                            String value = map2.get("SectionID");
                            // Do something

                            Context context = getApplicationContext();

                            int duration = Toast.LENGTH_SHORT;

                            Toast toast = Toast.makeText(context, value, duration);
                            toast.show();
                        Log.d("wwwwwwwwwwwwwwwwwwww: ", value);
                        // Do something
                    }
                    }
                    @Override
                    public void onNothingSelected(AdapterView<?> adapter) {

                    }
                }); 
```

我确实喜欢这样，但是发生了事情并且 logcat 没有错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:53:22.720

> 在用户单击微调器中的项目后，我不知道如何在此数组中获取带有标签（courseid）的项目。

如果您只想`courseid`从每一行获取，则不需要自定义 OnItemSelectedListener。简单使用：

```
// Let's use the regular listener     vvvvvvvvvvvvvvvvvvvvvv
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {
        HashMap<String, String> map = arrList.get(position);
        String id = map.get("courseid");
        // Do something
    }

    @Override
    public void onNothingSelected(AdapterView<?> adapter) {}
}); 
```

`arrList`保存 SimpleAdapter 数据的类变量在哪里。

* * *

> 我确实喜欢这样，但是发生了事情并且 logcat 没有错误

那是因为你刚刚创建`arrList`，所以它是*空*的：

```
ArrayList<HashMap<String, String>> arrList = new ArrayList<HashMap<String,String>>();
for (HashMap<String, String> map2 : arrList) { // This arrList has no data! 
```

您需要使用创建 SimpleAdapter 时使用的 ArrayList。

```
new SimpleAdapter(this, arrList, ...); 
```

这是您**必须**使用的 ArrayList，它**必须**是一个类变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:30:54.787

你的帖子有点难以理解，但我想我有一个想法。您有一个由数组列表填充的微调器，在微调器上的每个“梯级”的每个索引处都有多个哈希图。因此，当项目被选中时，您想要获取被选中的单个键并对其进行处理。众所周知，a`hashMap`并没有真正被索引，所以我们必须使用其他方法来获取它，对吗？

```
 ArrayList<HashMap<String, String>> arrList = new ArrayList<HashMap<String,String>>();

        spinner.setOnItemSelectedListener(new CustomOnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> adapterView, View view,
                    int position, long id) {

                // for each key in the hashMap at this position..
                for (String key : arrList.get(position).keySet()) {
                    if (key == "Calculus") {
//                      do something
                    } else if (key == "Physics") {
//                      do something else
                    }
                }                                       
            } 
```

这个想法很简单。您在微调器上选择的位置的索引处获得 hashMap 的整个 keySet，然后根据它所说的内容为其中的每个键做一些事情。假设您那里只有一个键值对，这应该没有太多麻烦。

**但**我不得不说你真的应该重新考虑一下设计。您有多个 hashMap 容器，每个容器只保存一件事。实在是太浪费资源了。很难推荐一个替代方案，因为我不完全知道这些数据是如何被使用的，但你应该知道在 java 中制作对象不是免费的。

# android - Android：通过提供商网络在手机上打电话时无法连接到互联网

> ID：13423382
> 
> 赞同：0
> 
> 时间：2012-11-16T19:46:16.487
> 
> 标签：android, phone-call, connectivity

我编写了一个 android 应用程序，只要有电话，它就会使用 HttpClient 连接到远程服务器。这样做是为了在服务器中记录呼叫信息。服务器向用户发送一个显示为敬酒的响应。所有这些（应该）发生在用户拿起电话之前。我还设置了连接超时。连接服务器的代码编写为 IntentService。

现在，当用户通过 wifi 连接到互联网时，这在模拟器和移动设备上工作得非常好，但是如果他通过提供商网络 (3G) 连接，则只有在用户挂机后才会与服务器进行通信 [弹出窗口用户挂机后显示]。

测试：HTC - Sprint

我想知道这种行为是因为提供商网络/手机还是代码问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:50:11.653

Sprint 的 3G 网络 (EVDO) 不允许同时进行数据和语音连接。

允许语音+数据的网络是：

*   4G (LTE)
*   4G（微信）
*   HSPA+ (美国电话电报公司)

# c++ - 尝试使用 next_permutation 在 C++ 中模拟 python 组合

> ID：13423383
> 
> 赞同：7
> 
> 时间：2012-11-16T19:46:23.030
> 
> 标签：c++, python, std, itertools

我需要将用 Python 编写的代码段移植到 C++ 中，但该代码段使用 Python 中的 itertools 组合。

我真正有兴趣移植到 C++ 的行是这一行：

```
for k in combinations(range(n-i),2*i): 
```

`range(n-i)`在 Python 中将生成一个列表`0 to (n-i) - 1`

设 n = 16, i = 5

`print range(n-i)`

输出：

`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`

和 python 组合将在该列表中生成所有可能的组合。

例如

`print list(combinations(range(n-i),2*i))`

输出：

```
[(0, 1, 2, 3, 4, 5, 6, 7, 8, 9),
(0, 1, 2, 3, 4, 5, 6, 7, 8, 10),
(0, 1, 2, 3, 4, 5, 6, 7, 9, 10),
(0, 1, 2, 3, 4, 5, 6, 8, 9, 10),
(0, 1, 2, 3, 4, 5, 7, 8, 9, 10),
(0, 1, 2, 3, 4, 6, 7, 8, 9, 10),
(0, 1, 2, 3, 5, 6, 7, 8, 9, 10),
(0, 1, 2, 4, 5, 6, 7, 8, 9, 10),
(0, 1, 3, 4, 5, 6, 7, 8, 9, 10),
(0, 2, 3, 4, 5, 6, 7, 8, 9, 10),
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)]

```

我想使用`std::vector`和`next_permutation`从 C++ 生成类似的输出，但我仍然得到错误的结果。这是我目前的做法：

```
for(int j = 0; j < n-i; j++) {
        temp_vector.push_back(j); 
} 
```

该代码段相当于`range(n-i)`Python 中的代码段。

但以下片段：

```
do {
     myvector.push_back(temp_vector);
} while(next_permutation(temp_vector.begin(),temp_vector.begin()+2*i));
cout<<myvector.size()<<endl; 
```

不等同`combinations(range(n-i),2*i))`于 Python，我尝试了很多变体，但仍然无法得出我期望的结果。

例如：

设 n = 16 i = 5

**Python**

`>>> print len(list(combinations(range(n-i),2*i)))`

`11`

**C++**

```
#include <vector>
#include <iostream>

using namespace std;
int main() {
    vector<int> temp_vector;
    vector< vector<int> > myvector;
    int n = 16, i = 5;
    for(int j = 0; j < n - i; j++) {
            temp_vector.push_back(j);
    }
    do {
            myvector.push_back(temp_vector);
    } while(next_permutation(temp_vector.begin(), temp_vector.begin()+2*i));
    cout<<myvector.size()<<endl;
    return 0;
} 
```

`g++ combinations.cpp`

`./a.out`

`3628800`

任何指导将不胜感激！非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:57:08.740

组合和排列不是一回事。

组合是来自另一个集合的项目子集的无序列表。排列是列表中项目的唯一顺序。

您正在从 11 个事物的列表中生成 10 个事物的所有组合，因此您将获得 11 个结果，每个结果都缺少原始 11 个项目中的一个。

生成每个排列将生成原始 11 个项目的每个唯一顺序。由于本例中的项目都是唯一的，这意味着结果将是 11！列出每个包含所有 11 个项目的位置。但是，您仅从前 10 个项目生成排列，因此您将获得 10 个！列表，其中不包含第 11 项。

您需要找到一种算法来生成组合而不是排列。

* * *

没有用于组合的内置算法。std::next_permutation 可用作生成组合的算法的一部分：请参阅[在 c++ 中生成组合](https://stackoverflow.com/questions/9430568/generating-combinations-in-c)。

[这是](https://howardhinnant.github.io/combinations.html)组合算法的旧提案草案，包括代码。

# linux - 如何从 linux 命令验证 Erlang 配置文件

> ID：13423387
> 
> 赞同：5
> 
> 时间：2012-11-16T19:46:47.280
> 
> 标签：linux, erlang

我可以通过运行命令来验证配置文件

```
file:consult("settings.config"). 
```

我可以从 linux 命令执行此操作吗？我知道我可以打开 erl shell 并运行此命令，但我想使用一个 shell 命令来执行此操作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T20:49:26.250

您可以使用 escript 文件来执行此操作。像这样的东西：

验证脚本

```
#!/usr/bin/env escript
main([ConfigFile]) ->
    {ok, Terms} = file:consult(ConfigFile),
    io:format("~p~n",[Terms]). 
```

然后你可以从命令行调用它：

```
./validate.escript path/to/file.config 
```

如果出现问题，它将打印配置条款列表或抛出错误。

# jquery - 克隆表中的行时初始化自动完成

> ID：13423393
> 
> 赞同：1
> 
> 时间：2012-11-16T19:47:13.250
> 
> 标签：jquery, jquery-ui

每次在我的表中克隆一行时，我都需要初始化我的自动完成字段。到目前为止，仅在页面加载时初始化我的第一行。这是我的代码[http://jsfiddle.net/4XZMb/951/](http://jsfiddle.net/4XZMb/951/)

```
function addRow(){

    var numberExistingRows = 1;
    //  use "ADD" button to add new row

    $('#add_row').click(function() {
        // keep track of number of rows for input names
        numberExistingRows++;

        // clone a row
        var $row = $('.dataRow:last').clone();

        $row.find('.deleteRow').click(deleteRow);

        // strip previous values and fix names of inputs
        $row.find('input').each(function() {
            var $input = $(this); // cache this input into jQuery object in lieu of using $(this) in below functions for clarity and performance

            $input.val(""); // reset value to none

            // fix names
            var thisInputName = $input.attr('id');
            $input.attr('id', thisInputName);
        });

        $('#tableSo').append($row);

        return false;

    });   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:00:53.030

您有多个具有相同 ID 的元素。这不是有效的 HTML。而是使用一个指定它是特定类型的自动完成的类，然后在新行中选择该类以进行初始化。

```
function autocompleteSo(row){

    row.find( ".tableService" ).autocomplete({
            source: 'services/add_services.php?servtype=1',
            select: function(event, ui) {
            row.find('.id_servtype').val(ui.item.id);

        }
     });

     row.find( "soClient" ).autocomplete({
            source: 'salesorders/add_sales_order.php?client=1',
            select: function(event, ui) {
            row.find('id_client').val(ui.item.id);

        }
     });

     row.find( "tableProject" ).autocomplete({
            source: 'salesorders/add_sales_order.php?project=1',
            select: function(event, ui) {
            row.find('id_project').val(ui.item.id);

        }
     });
} 
```

像这样，然后在创建行时调用 autocompleteSo 。

```
 <tr class="dataRow soRows">
     <td>
         <input type="text" class="input-medium tableService" name="tableService" />
         <input type="hidden" class="id_servtype" name="id_servtype[]" />
     </td>
     ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:08:44.103

我已经更新了你的[jsFiddle](http://jsfiddle.net/4XZMb/952/)。

我将`id`'s 更改为 classes，以便与重复的 's 没有冲突`id`。

```
var autocompleteSo = function(row){
    var $row = $(row)
    $row.find( ".tableService" ).autocomplete({
            source: 'services/add_services.php?servtype=1',
            select: function(event, ui) {
            $('.id_servtype').val(ui.item.id);

        }
     });

     $row.find( ".soClient" ).autocomplete({
            source: 'salesorders/add_sales_order.php?client=1',
            select: function(event, ui) {
            $('.id_client').val(ui.item.id);

        }
     });

     $row.find( ".tableProject" ).autocomplete({
            source: 'salesorders/add_sales_order.php?project=1',
            select: function(event, ui) {
            $('.id_project').val(ui.item.id);

        }
     });
} 
```

然后在行的追加之后，我会运行这段代码。

```
$('#tableSo').append($row);
autocompleteSo($('#tableSo tr').eq(numberExistingRows - 1)); 
```

# android - 微调器位置和共享首选项

> ID：13423395
> 
> 赞同：1
> 
> 时间：2012-11-16T19:47:16.040
> 
> 标签：android, sharedpreferences, android-spinner, android-appwidget

我有一个带有简单 textview 的 appwidget，它可以作为配置活动中的 edittextfield 进行编辑，使用微调器，用户可以更改文本大小，我需要保存微调器选择，并使用 sharedpreferences 再次恢复，我需要 appwidgetid，所以用户可以添加多个appwidget。

我已经尝试了很多东西并且已经完成了 2 天的研究，但是我无法让它工作，一旦添加了小部件，我就会强制关闭。

这是我认为看起来最好的，但它不起作用。[微调器选择 - 保存到 SharedPreferences，然后检索](https://stackoverflow.com/questions/5068115/spinner-selection-save-to-sharedpreferences-then-retrieve)

这真让我抓狂！任何解决此问题的建议将不胜感激

问候雅各布·哈特格

保存和加载首选项

```
 // Write the prefix to the SharedPreferences object for this widget
    static void saveTitlePref(Context context, int appWidgetId, String text) {

            SharedPreferences.Editor editor = context.getSharedPreferences(PREFS_NAME, 0).edit();
        editor.putString(PREF_PREFIX_KEY + appWidgetId, text);
        spinner.getSelectedItemPosition();
        editor.putInt(spinnerSelection + appWidgetId, 0);
        editor.commit();
    }

    // Read the prefix from the SharedPreferences object for this widget.
    static String loadTitlePref(Context context, int appWidgetId) {
        SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, 0);

            String prefix = prefs.getString(PREF_PREFIX_KEY + appWidgetId, null);

        spinner.setSelection(prefs.getInt(spinnerSelection + appWidgetId, 0));

        // If there is no preference saved, get the default from a resource
        if (prefix != null) {
            return prefix;
        } else {
            return context.getString(R.string.appwidget_prefix_default);
        }
    } 
```

几乎完整的代码：

```
public class WidgetConfig extends Activity implements OnItemSelectedListener{

    Dialog myDialog;
    Context context;
    static EditText info;
    static Spinner spinner;
    private static final String[] paths = { "10", "12", "14", "16", "18", "20",
        "22", "24", "26", "28", "30", "32", "34", "36", "38", "40", "50", "60"};

    File path = null;
    private static final String PREFS_NAME = "com.harteg.NotesWidgetPro.Widget";
    private static final String PREF_PREFIX_KEY = "prefix_";
    private final static String FONT_SIZE_KEY="fontsize";
    static String spinnerSelection;

    int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;   

    public WidgetConfig() {
        super();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.widgetconfig);
        context = WidgetConfig.this;

        // back button = cancel
        setResult(RESULT_CANCELED);

        info = (EditText) findViewById(R.id.etwidgetconfig);

        findViewById(R.id.bwidgetconfig).setOnClickListener(mOnClickListener);
        findViewById(R.id.bwidgetconfig1).setOnClickListener(mOnClickListener);

        // Find the widget id from the intent.
        Intent intent = getIntent();
        Bundle extras = intent.getExtras();
        if (extras != null) {
            mAppWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,
                    AppWidgetManager.INVALID_APPWIDGET_ID);
        }

        // If they gave us an intent without the widget id, just bail.
        if (mAppWidgetId == AppWidgetManager.INVALID_APPWIDGET_ID) {
            finish();
        }

        info.setText(loadTitlePref(WidgetConfig.this, mAppWidgetId));

        //------------ Text Size spinner ---------------
        spinner = (Spinner) findViewById(R.id.TxtSizeSP);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(WidgetConfig.this,
                android.R.layout.simple_spinner_item, paths);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);
        spinner.setSelection(7);
        spinner.setOnItemSelectedListener(this);

        //--------------------------------------------------

    } // onCreate finished

    public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context); 

        switch (position) {
        case 0:
            info.setTextSize(10.0f);
            views.setFloat(R.id.tvConfigInput, "setTextSize", 10);
            break;
        case 1:
            info.setTextSize(12.0f);
            views.setFloat(R.id.tvConfigInput, "setTextSize", 12);
            break;

        ....

        case 17:
            info.setTextSize(28.0f);
            views.setFloat(R.id.tvConfigInput, "setTextSize", 60);
           break;  
        }
        appWidgetManager.updateAppWidget(mAppWidgetId, views);
    }

    public void onNothingSelected(AdapterView<?> arg0) {

    }

    View.OnClickListener mOnClickListener = new View.OnClickListener() {
        public void onClick(View v) {

            // When the button is clicked, save the string in our prefs and
            // return that they clicked OK.
            String titlePrefix = info.getText().toString();
            saveTitlePref(context, mAppWidgetId, titlePrefix);

            // Push widget update to surface with newly set prefix
            AppWidgetManager appWidgetManager = AppWidgetManager
                    .getInstance(context);
            Widget.updateAppWidget(context, appWidgetManager, mAppWidgetId,
                    titlePrefix);

            // Make sure we pass back the original appWidgetId
            Intent resultValue = new Intent();
            resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                    mAppWidgetId);
            setResult(RESULT_OK, resultValue);
            finish();

        }
    };

    // Write the prefix to the SharedPreferences object for this widget
    static void saveTitlePref(Context context, int appWidgetId, String text) {

        //Getting the SharedPreference object
        SharedPreferences.Editor editor = context.getSharedPreferences(PREFS_NAME, 0).edit();

        // save the values to preferences
        editor.putString(PREF_PREFIX_KEY + appWidgetId, text);

        spinner.getSelectedItemPosition();
        editor.putInt(spinnerSelection + appWidgetId, 0);

        // Saves the values
        editor.commit();
    }

    // Read the prefix from the SharedPreferences object for this widget.
    static String loadTitlePref(Context context, int appWidgetId) {
        SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, 0);
        String prefix = prefs.getString(PREF_PREFIX_KEY + appWidgetId, null);

        spinner.setSelection(prefs.getInt(spinnerSelection + appWidgetId, 0));

        // If there is no preference saved, get the default from a resource
        if (prefix != null) {
            return prefix;
        } else {
            return context.getString(R.string.appwidget_prefix_default);
        }
    }

    static void deleteTitlePref(Context context, int appWidgetId) {
    }

    static void loadAllTitlePrefs(Context context,
            ArrayList<Integer> appWidgetIds, ArrayList<String> texts) {
    }

...

} 
```

更新：

我添加了这样的日志标签：

```
Log.v(TAG, "before save");
        spinner.getSelectedItemPosition();
        editor.putInt(spinnerSelection + appWidgetId, 0);
        Log.v(TAG, "after save");

Log.v(TAG, "before load");
        spinner.setSelection(prefs.getInt(spinnerSelection + appWidgetId, 0));
        Log.v(TAG, "after load"); 
```

但它们甚至没有出现在日志中：

```
11-16 21:25:08.470: E/AndroidRuntime(1337): FATAL EXCEPTION: main
11-16 21:25:08.470: E/AndroidRuntime(1337): java.lang.RuntimeException: Unable to start receiver com.harteg.NotesWidgetPro.Widget: java.lang.NullPointerException
11-16 21:25:08.470: E/AndroidRuntime(1337):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2236)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at android.app.ActivityThread.access$1500(ActivityThread.java:130)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at android.os.Looper.loop(Looper.java:137)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at java.lang.reflect.Method.invokeNative(Native Method)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at java.lang.reflect.Method.invoke(Method.java:511)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at dalvik.system.NativeStart.main(Native Method)
11-16 21:25:08.470: E/AndroidRuntime(1337): Caused by: java.lang.NullPointerException
11-16 21:25:08.470: E/AndroidRuntime(1337):     at com.harteg.NotesWidgetPro.WidgetConfig.loadTitlePref(WidgetConfig.java:267)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at com.harteg.NotesWidgetPro.Widget.onUpdate(Widget.java:32)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at android.appwidget.AppWidgetProvider.onReceive(AppWidgetProvider.java:66)
11-16 21:25:08.470: E/AndroidRuntime(1337):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2229)
11-16 21:25:08.470: E/AndroidRuntime(1337):     ... 10 more 
```

如果我删除用于保存和加载位置的行，则小部件可以完美运行

更新：

我也尝试过：

多变的：

```
private final static String PREF_PREFIX_KEY_FONT_SIZE = "prefix_fontsize_"; 
```

保存：

```
editor.putInt(PREF_PREFIX_KEY_FONT_SIZE + appWidgetId, spinner.getSelectedItemPosition()); 
```

装载：

```
prefs.getInt(PREF_PREFIX_KEY_FONT_SIZE + appWidgetId, spinner.getSelectedItemPosition()); 
```

给我同样的错误。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:16:01.850

我得到了它的工作，这就是我所做的

我将微调器编辑为：

```
//------------ Text Size spinner ---------------
        spinner = (Spinner) findViewById(R.id.TxtSizeSP);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(WidgetConfig.this,
                android.R.layout.simple_spinner_item, paths);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

        // Retrieve spinner position from sharedpreferences
        SharedPreferences sharedPref = getSharedPreferences(PREFS_NAME + mAppWidgetId, MODE_PRIVATE);
        int spinnerValue = sharedPref.getInt("userChoiceSpinner",-1);
        if(spinnerValue != -1) 
          // set the value of the spinner 
          spinner.setSelection(spinnerValue);

        spinner.setOnItemSelectedListener(this); 
```

在我添加了 onItemSelected() 方法中的所有案例之后：

```
// save inputed spinner position to sharedpreferences
        int userChoice = spinner.getSelectedItemPosition();
        SharedPreferences sharedPref = getSharedPreferences(PREFS_NAME + mAppWidgetId, 0);
        SharedPreferences.Editor prefEditor = sharedPref.edit();
        prefEditor.putInt("userChoiceSpinner", userChoice);
        prefEditor.commit(); 
```

这也可能有效：http: [//a2zandroidtutorials.blogspot.dk/2012/07/spinner-with-previously-selected-value.html](http://a2zandroidtutorials.blogspot.dk/2012/07/spinner-with-previously-selected-value.html)

# ruby-on-rails - 服务器重启后设置思考狮身人面像（Rails 项目）

> ID：13423400
> 
> 赞同：0
> 
> 时间：2012-11-16T19:47:47.793
> 
> 标签：ruby-on-rails, thinking-sphinx, thin, unicorn

**问题：** 我试图在服务器重启后让 sphinx 再次运行。当我尝试启动它时似乎没有 sphinx.conf 文件：

```
>searchd

Sphinx 2.0.4-release (r3135)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

FATAL: no readable config file (looked in /etc/sphinxsearch/sphinx.conf, ./sphinx.conf). 
```

我跑了：

```
rake thinking_sphinx:configure
rake thinking_sphinx:index
rake thinking_sphinx:start 
```

问题是由于某种原因没有创建 etc/sphinxsearch/ **sphinx.conf**文件...我是 thinking_sphinx 的新手，这可能不是唯一的问题（与网站有关），但似乎没有设置完全。有关输出和更多信息，请阅读以下内容：

**背景信息：** 我正在做一个我最初没有设置的项目。我们重新启动服务器以查看我们在常量文件中所做的一些更改。但是在重新启动后，当您导航到该站点时，该项目不再显示。当您输入直接的 IP 地址时，它只会显示“欢迎使用 Nginx”。

该端口是开放的并且通过我们的托管服务器工作，所以我被告知我必须重新启动一些服务。我遇到的问题之一是thinking_sphinx。这是我引用[的 sphinx 站点的 rake 任务。](http://pat.github.com/ts/en/rake_tasks.html)以及[sphinx 的常见配置问题](http://www.claytonlz.com/2010/09/thinkingsphinx-conf-problems/)。

我设置了 sphinx.yml 开发路径（我们没有使用生产）。然后我跑了

```
>rake thinking_sphinx:index 
```

即使它输出一些警告，这似乎也有效：

```
Generating Configuration to /home/potato/streetpotato/config/development.sphinx.conf
   (0.2ms)  SELECT @@global.sql_mode, @@session.sql_mode;
Sphinx 2.0.4-release (r3135)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file '/home/potato/streetpotato/config/development.sphinx.conf'...
indexing index 'bar_core'...
WARNING: collect_hits: mem_limit=0 kb too low, increasing to 14080 kb
collected 249 docs, 0.0 MB
sorted 0.0 Mhits, 100.0% done
total 249 docs, 32394 bytes
total 0.254 sec, 127298 bytes/sec, 978.49 docs/sec
indexing index 'bar_delta'...
WARNING: collect_hits: mem_limit=0 kb too low, increasing to 14080 kb
collected 0 docs, 0.0 MB
total 0 docs, 0 bytes
total 0.003 sec, 0 bytes/sec, 0.00 docs/sec
skipping non-plain index 'bar'...
indexing index 'synonym_core'...
WARNING: collect_hits: mem_limit=0 kb too low, increasing to 13568 kb
collected 3 docs, 0.0 MB
sorted 0.0 Mhits, 100.0% done
total 3 docs, 103 bytes
total 0.003 sec, 30356 bytes/sec, 884.17 docs/sec
indexing index 'synonym_delta'...
WARNING: collect_hits: mem_limit=0 kb too low, increasing to 13568 kb
collected 0 docs, 0.0 MB
total 0 docs, 0 bytes
total 0.002 sec, 0 bytes/sec, 0.00 docs/sec
skipping non-plain index 'synonym'...
indexing index 'user_core'...
WARNING: collect_hits: mem_limit=0 kb too low, increasing to 13568 kb
collected 100 docs, 0.0 MB
sorted 0.0 Mhits, 100.0% done
total 100 docs, 3146 bytes
total 0.013 sec, 239348 bytes/sec, 7608.03 docs/sec
skipping non-plain index 'user'...
total 11 reads, 0.000 sec, 3.8 kb/call avg, 0.0 msec/call avg
total 37 writes, 0.000 sec, 2.5 kb/call avg, 0.0 msec/call avg 
```

然后我跑了

```
>rake thinking_sphinx:configure

Generating Configuration to /home/potato/streetpotato/config/development.sphinx.conf
(0.2ms)  SELECT @@global.sql_mode, @@session.sql_mode; 
```

最后运行：

```
>rake thinking_sphinx:start

Started successfully (pid 29623). 
```

现在即使我的日志说：

```
[Fri Nov 16 19:34:29.820 2012] [29623] accepting connections 
```

仍然没有生成 sphinx.conf 文件，当我尝试使用 searchd 命令时，它仍然给我错误...

```
>searchd --stop

Sphinx 2.0.4-release (r3135)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

FATAL: no readable config file (looked in /etc/sphinxsearch/sphinx.conf, ./sphinx.conf). 
```

我很茫然，我知道这是超长的，但这只是因为我很迷茫并试图提供尽可能多的信息。我比昨天更进一步，但它似乎仍然没有完全工作。我可能还需要在独角兽或瘦身方面做更多的设置。我只是想弄清楚如何让网站重新启动并再次运行......如果有人遇到类似的问题，他们的网站在重新启动后关闭并重新启动（特别是 Nginx 和 unicorn 上的 Rails 项目）或瘦使用狮身人面像）任何见解将不胜感激。

谢谢，

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:28:54.903

所以，是的，这是 ThinkingSphinx（恕我直言）中的一个漏洞——您可以`sphinxd`使用各种 rake 任务（根据需要生成配置）启动服务器……但这在生产中不起作用。

在我去年工作的一个项目中（在 Linux 服务器上运行），我们创建了一个`/etc/init.d`脚本来启动`sphinxd`——它接受包括配置文件路径在内的选项。我们使用 capistrano 进行部署，并将生成的代码放在`app/shared`源代码树之外的目录中。我相信有一些预定义的 capistrano 任务将在模型更改或以其他方式影响 Sphinx 的功能时重建特定于 Rails 的配置文件（与您提到的 rake 任务相同）。

对于我们来说，这是我们长期以来一直推迟站点搜索的案例之一，而我们的一位开发人员在一个下午就将其“全部设置”好了。部署它需要更多的工作。

（刚刚看到@prakash-murthy 的回答——他提供了一些有关在初始化 sphinxd 时如何指定配置路径的详细信息）。但诀窍是让它在系统启动时启动并指向 ThinkingSphinx 生成的配置。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T00:38:08.423

好的，所以在一天半之后，我终于把它全部设置好并让它运行（它不仅仅是狮身人面像）。我还必须让 nginx 和 unicorn 在后台启动并运行，因为我们没有设置脚本来在服务器重新启动时重新启动它们......

重新启动服务器时，您必须重新启动一些服务才能访问应用程序：

1) thinking_sphinx
***参考网站***
[http://pat.github.com/ts/en/rake_tasks.html](http://pat.github.com/ts/en/rake_tasks.html)
[http://www.claytonlz.com/2010/09/thinkingsphinx-conf-problems/](http://www.claytonlz.com/2010/09/thinkingsphinx-conf-problems/)

```
a)create/modify  app/config/sphinx.yml

    development:
      morphology: stem_en
      port: 9312
      bin_path: "/usr/bin"             # set up the path to binary for searchd
      searchd_binary_name: searchd
      indexer_binary_name: indexer
      #mem_limit: 128M
    test:
      morphology: stem_en
      port: 9312
      mem_limit: 128M
    production:
      morphology: stem_en
      port: 9312
      mem_limit: 512M
    # the searchd ip, in case it's not on localhost
    # address: 10.10.0.0
    # this is by default included in db/sphinx
    # searchd_file_path: "/path/to/shared/folder/sphinx"

b)rake thinking_sphinx:index
c)rake thinking_sphinx:configure       # creates config/development.sphinx.conf which helps define sphinx's indexing

d)# then you have to start sphinx, there are 2 ways to do this

    rake thinking_sphinx:start
    rake thinking_sphinx:stop

    OR

    searchd
    searchd --stop

    # only the rake commands worked for me, when I tried to run searchd
    # I got an error FATAL: no readable config file (looked in /etc/sphinxsearch/sphinx.conf, ./sphinx.conf).
    # for some reason we dont have a sphinx.conf file, but the rake commands work without it

e)# once you start thinking_sphinx check log/searchd.log file for the line
    [Fri Nov 16 19:34:29.820 2012] [29623] accepting connections 
```

2）nginx
***参考站点：***
[http ://wiki.nginx.org/CommandLine](http://wiki.nginx.org/CommandLine)

```
a) check that nginx is up and running
    i) start server 
        # to check where nginx resides type in this into server console
        which nginx
        # whatever path it gives you is how you start the server this is my path
        /usr/sbin/nginx 
    ii) stop server
        /usr/sbin/nginx -s stop # use the path given by which command 
```

3）独角兽（启动应用服务器）
***参考站点：***
[http ://codelevy.com/2010/02/09/getting-started-with-unicorn.html](http://codelevy.com/2010/02/09/getting-started-with-unicorn.html)

```
a) test if unicorn will run after previous changes
    unicorn_rails -p 3000
    # the site should now be up and running, check that it is
    # console should now log the different actions you do on the site 

b) create unicorn.rb in config folder (if none is there)
    # only start this step if the step above got the site running
    # close the console or exit the process you started above
    # contents of unicorn.rb 
    worker_processes 2      #(starts 2 child processes, not completely neccissary)
    preload_app true
    timeout 30
    listen 3000

    after_fork do |server, worker|
      ActiveRecord::Base.establish_connection
    end

c) run unicorn in the background
    # make sure you exited the process above before running this
    unicorn_rails -c config/unicorn.rb -D

    # this was giving me an error that it said was logged by stderr
    # I got the command to run by adding a command to the front
    http://stackoverflow.com/questions/2325152/check-for-stdout-or-stderr

    exec 2> /dev/null unicorn_rails -c config/unicorn.rb -D

d) (optional) check stats from starting unicorn

    i) pgrep -lf unicorn_rails
        #sample output
        5374 unicorn_rails master -c config/unicorn.rb -D             
        5388 unicorn_rails worker[0] -c config/unicorn.rb -D    # not needed currently  
        5391 unicorn_rails worker[1] -c config/unicorn.rb -D    # not needed currently

    ii) cat tmp/pids/unicorn.pid # from inside the streetpotato folder
        #sample output
        5374 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:21:39.487

冷静下来！！:-)

首先，您不需要`/etc/sphinxsearch/sphinx.conf`文件；这只是`searchd`在您未指定任何配置文件时尝试使用的默认文件。

正如您的日志输出所示，您的 rails 应用程序`/home/potato/streetpotato/config/development.sphinx.conf`在启动`searchd`进程时正在使用文件。

`ps -fe | grep searchd`在您的开发机器上运行；你应该看到类似这样的输出：

```
501 14128     1   0   0:00.00 ttys004    0:00.00 searchd --pidfile --config /home/potato/streetpotato/config/development.sphinx.conf
501 14130 13546   0   0:00.00 ttys004    0:00.01 grep searchd 
```

所以 rails app`searchd`使用`--config /home/potato/streetpotato/config/development.sphinx.conf`参数调用，以指定不同的 conf 文件。

从您的日志中，很明显`thinkingsphinx`运行良好。您可以通过登录并在其中定义了[thinking_sphinx索引](http://pat.github.com/ts/en/indexing.html)的模型之一上`rails console`运行方法来进一步确认。`search`

例如：如果您的应用具有`Article`上述链接中所示的模型，则以下命令将显示`National Parks`其中包含的所有文章：

```
$ rails console
> Article.search( "National Parks" )
=> [#<Article id: 15,... >, #<Article id: 22,...>,...] 
```

真正的问题是重新启动服务器后应用程序未显示。`thinking sphinx`这与运行良好无关。

尝试回滚您在上面提到的常量文件中所做的所有更改，并确保应用程序工作正常。然后开始一项一项地进行更改，并隔离破坏您的应用程序的一项更改。

# c++ - break 退出程序 - C++

> ID：13423402
> 
> 赞同：5
> 
> 时间：2012-11-16T19:47:51.407
> 
> 标签：c++

我是C++初学者，下面的程序很简单，但是我不知道为什么当输入“EXIT”时，程序终止，虽然它应该打印出之前输入的名称！

这是代码：

```
#include <iostream>
#include <string>
#include <set> 

using namespace std;

int main()
{
  set <string> myset;
  set <string> :: const_iterator it;
  it = myset.begin();

  string In;
  int i=1;

  string exit("EXIT");

  cout << "Enter EXIT to print names." << endl;

  while(1)
  {
    cout << "Enter name " << i << ": " ;
    cin >> In;

    if( In == exit)
      break;

    myset.insert(In);
    In.clear();
    i++;
  }

  while( it != myset.end())
  {
    cout << *it << " " ;
    it ++ ;
  }

  cout << endl;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:53:49.130

完成插入后，您需要再次确定集合的开头：

```
it = myset.begin(); 
```

应该在第二个`while`循环之前进行。

* * *

如果您能够使用 C++11 功能，请考虑使用基于范围的 for 循环。请注意，它不需要使用任何迭代器：

```
for( auto const& value : myset )
  std::cout << value << " ";
std::cout << "\n"; 
```

如果您无法使用 C++11 功能，请考虑使用常规 for 循环。请注意，迭代器的范围仅限于 for 循环：

```
for(std::set<std::string>::const_iterator it=myset.begin(), end=myset.end(); 
      it != end; ++it)
  std::cout << *it << " ";
std::cout << "\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T19:54:41.780

```
it = myset.begin(); 
```

将此行移至显示名称的循环之前。问题是它在顶部，集合中没有元素，它获取结束迭代器的值，所以显示循环立即结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:55:55.747

`it == myset.end();``true`在第一个 while 循环完成执行后计算结果。您需要在循环之间添加这行代码`it = myset.begin();`

# node.js - 如何关闭 db 和 http 连接

> ID：13423405
> 
> 赞同：0
> 
> 时间：2012-11-16T19:47:59.800
> 
> 标签：node.js, mongodb

我正在尝试从 MongoDB 读取并将内容打印到网页。我正在使用 mongodb 模块从 Mongo 中读取数据。

我能够成功读取数据并将其打印到网页，但我无法弄清楚何时关闭数据库以及何时结束 http 连接。因此我的网页打印结果，但一直在等待服务器发送一些东西。

我提到了以下问题，但无法理解在这种特定情况下我需要做什么：

*   [寻求在 Node.JS 中读取 MongoDB 的帮助](https://stackoverflow.com/questions/5526246/looking-for-help-with-reading-from-mongodb-in-node-js)
*   [何时在 Nodejs 中关闭 MongoDB 数据库连接](https://stackoverflow.com/questions/8373905/when-to-close-mongodb-database-connection-in-nodejs)
*   [如何关闭与 MongoDB 服务器的所有连接](https://stackoverflow.com/questions/8830402/how-to-close-all-connections-to-the-mongodb-server)

这是我的代码：

```
/* Opens the secondary collection and goes through each entry*/
var getClientIDs = function(collect, res) {
  db.collection(collect, function(err, collection) {

      var cursor = collection.find();

      cursor.each(function(err, item) {
            if(item != null) {          
            console.log(item['_id'] +"\t" + item['name']);
            res.write(item['_id'].toString());
            res.write("&emsp;&emsp;");
            res.write(item['name'].toString());
            res.write("</br>");
            }
            /*else {
                res.end("The End"); 
                db.close();     
            } Closes connection before other stuff is done. */
      });
    });

}
/* Opens the main collection and goes through each entry*/
var openCollection = function(collect, res) {
    console.log(green);
    // Establish connection to db
    db.open(function(err, db) {

      // Open a collection
      db.collection(collect, function(err, collection) {

          // Create a cursor
          var cursor = collection.find();

          // Execute the each command, triggers for each document
          cursor.each(function(err, item) {
                if(item != null) {
                getClientIDs(item['_id'], res);
                }
                /* else {
                    db.close();
              }   This closes the connection before other stuff is done */
          });
        });
      });
}
/* Start Here */ 
var http = require('http');
var port = 8888;
http.createServer(function (req, res) {
    res.writeHead(200,{"Content-Type": "text/html; charset=utf-8"});
    openCollection('company',res);
}).listen(port); 
```

db 的方式是有一个名为“company”的集合，其中有一堆 ID。还有其他名称为 id 的集合：

```
company   = {{ _id: 'A001' }
             { _id: 'A002' }
             { _id: 'A003' }
            }      
A001 = {{_id: "A001-01", "name":"foo"}  
        {_id: "A001-02", "name":"bar"}}

A002 = {{_id: "A002-01", "name":"foo2"}  
        {_id: "A002-02", "name":"bar2"}} 
```

我没有以这种方式创建集合。这就是我必须使用并创建的脚本，它只会在网页上打印 ID 和名称。

使用我的代码，网页打印：

```
A001-01    foo
A001-02    bar
A002-01    foo2
A002-02    bar2 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:12:43.053

当您使用本机驱动程序打开 MongoDB 连接时，您实际上打开了一个包含 5 个连接的池（默认情况下）。因此，最好在您的应用程序启动时打开该池并使其保持打开状态，而不是在每次请求时打开和关闭该池。

您在关闭 HTTP 响应方面走在了正确的轨道上；只需`res.end();`在响应完成时调用（即在回调中时）`item`。`null``cursor.each`

# html - 使外部 div 包含内部 div 和表单

> ID：13423407
> 
> 赞同：1
> 
> 时间：2012-11-16T19:48:10.627
> 
> 标签：html, css, web-applications

我是 css 的新手，我正在处理一个我无法理解的问题。我有一个父 div“页脚”，其中包含一个子 div“投票”。此 div 包含一个当前由图像按钮组成的表单。

当使用“Inspect Element”查看时，页脚 div 的高度为 0px，只显示定义的边距。为什么是这样？如果没有定义，父div不应该保持内部div调整它的大小吗？

添加文本元素（在代码示例中注释掉的行）时恰好是这种情况，但在这种特殊情况下，我不需要添加任何文本，因此这不是一个选项。

任何提示？

```
<html>
<head>
<style type="text/css">
#footer {
    margin: 0.2em;
}
#vote {
    float: right;
}
#voteForm {
    float: right;
    margin: 0.2em;
}
</style>
</head>
<body>

<div id="footer">
    <div id="vote">
        <form id="voteForm" name="voteForm" action="/vote.php" method="post">
        <input type="image" src="image/vote.png">
        </form>
    </div>
<!--    <h3>Hello</h3> -->
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:50:13.000

你还没有清除你的花车。

```
<html>
<head>
<style type="text/css">
#footer {
    margin: 0.2em;
}
#vote {
    float: right;
}
#voteForm {
    float: right;
    margin: 0.2em;
}

.clear {
   clear:both;
}
</style>
</head>
<body>

<div id="footer">
    <div id="vote">
        <form id="voteForm" name="voteForm" action="/vote.php" method="post">
        <input type="image" src="image/vote.png">
        </form>
    </div>
    <div class="clear"><!-- --></div>
<!--    <h3>Hello</h3> -->
</div> 
```

When you float an element you take it out of the normal flow of the page until it is cleared. So without the clear the `#footer` contains nothing because `#vote` and `#voteForm` are both outside of the flow of the page.

# python - 在numpy（Python）中按组对数组元素的乘积

> ID：13423408
> 
> 赞同：4
> 
> 时间：2012-11-16T19:48:11.037
> 
> 标签：python, numpy

我正在尝试构建一个返回数组元素子集乘积的函数。基本上我想构建一个`prod_by_group`执行此操作的函数：

```
values = np.array([1, 2, 3, 4, 5, 6])
groups = np.array([1, 1, 1, 2, 3, 3])

Vprods = prod_by_group(values, groups) 
```

结果`Vprods`应该是：

```
Vprods
array([6, 4, 30]) 
```

对于我认为应该类似于的元素总和，这里有一个很好的答案： [https ://stackoverflow.com/a/4387453/1085691](https://stackoverflow.com/a/4387453/1085691)

我尝试采用第`log`一个，然后`sum_by_group`，然后`exp`，但遇到了数字问题。

对于按组划分的元素的最小值和最大值，这里还有一些其他类似的答案： [https ://stackoverflow.com/a/8623168/1085691](https://stackoverflow.com/a/8623168/1085691)

编辑：感谢您的快速回答！我正在尝试它们。我应该补充一点，我希望它尽可能快（这就是我试图以某种矢量化方式在 numpy 中获取它的原因，就像我给出的示例一样）。

编辑：我评估了迄今为止给出的所有答案，下面的@seberg 给出了最好的答案。这是我最终使用的完整功能：

```
def prod_by_group(values, groups):
    order = np.argsort(groups)
    groups = groups[order]
    values = values[order]
    group_changes = np.concatenate(([0], np.where(groups[:-1] != groups[1:])[0] + 1))
    return np.multiply.reduceat(values, group_changes) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:04:18.497

如果您的组已经排序（如果不是，您可以使用 s`np.argsort`执行此操作），您可以使用 s 的`reduceat`功能来执行此操作`ufunc`（如果它们未排序，您必须先对它们进行排序才能有效地执行此操作）：

```
# you could do the group_changes somewhat faster if you care a lot
group_changes = np.concatenate(([0], np.where(groups[:-1] != groups[1:])[0] + 1))
Vprods = np.multiply.reduceat(values, group_changes) 
```

如果您的小组很少，或者 mgilson 回答。但是如果你有很多组，那么这会更有效率。由于您避免为每个组的原始数组中的每个元素使用布尔索引。另外，您可以避免使用 reduceat 在 python 循环中进行切片。

当然，pandas 很方便地进行这些操作。

编辑：对不起`prod`在那里。ufunc 是`multiply`. 您可以将此方法用于任何二进制文件`ufunc`。这意味着它基本上适用于所有可以在两个输入数组上按元素工作的 numpy 函数。（即，乘法通常将两个数组元素相乘，相加相加，最大值/最小值等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:03:52.467

首先为组设置掩码，以便在另一个维度上扩展组

```
mask=(groups==unique(groups).reshape(-1,1))
mask
array([[ True,  True,  True, False, False, False],
       [False, False, False,  True, False, False],
       [False, False, False, False,  True,  True]], dtype=bool) 
```

现在我们乘以 val

```
mask*val
array([[1, 2, 3, 0, 0, 0],
       [0, 0, 0, 4, 0, 0],
       [0, 0, 0, 0, 5, 6]]) 
```

现在您已经可以沿着轴 1 执行 prod 了，除了那些零点，这很容易修复：

```
prod(where(mask*val,mask*val,1),axis=1)
array([ 6,  4, 30]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-30T23:11:50.440

正如评论中所建议的，您也可以使用[Pandas 模块](http://pandas.pydata.org/)。使用该[`grouby()`](http://pandas.pydata.org/pandas-docs/stable/groupby.html)功能，这个任务变成了一个单行：

```
import numpy as np
import pandas as pd

values = np.array([1, 2, 3, 4, 5, 6])
groups = np.array([1, 1, 1, 2, 3, 3])

df = pd.DataFrame({'values': values, 'groups': groups}) 
```

那么`df`看起来如下：

```
 groups  values
0       1       1
1       1       2
2       1       3
3       2       4
4       3       5
5       3       6 
```

现在您可以像这样对每个组`groupby()`使用`groups`列和`apply`numpy的功能`prod()`

```
 df.groupby(groups)['values'].apply(np.prod) 
```

这为您提供了所需的输出：

```
1     6
2     4
3    30 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T20:02:31.340

好吧，我怀疑这是一个很好的答案，但这是我能想到的最好的答案：

```
np.array([np.product(values[np.flatnonzero(groups == x)]) for x in np.unique(groups)]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T20:07:44.743

这不是一个 numpy 解决方案，但它相当易读（我发现有时 numpy 解决方案不是！）：

```
from operator import itemgetter, mul
from itertools import groupby

grouped = groupby(zip(groups, values), itemgetter(0))
groups = [reduce(mul, map(itemgetter(1), vals), 1) for key, vals in grouped]
print groups
# [6, 4, 30] 
```

# c# - 是否可以通过 C# 在 Powerpoint 插件中检测撤消/重做？

> ID：13423409
> 
> 赞同：1
> 
> 时间：2012-11-16T19:48:36.153
> 
> 标签：c#, add-in, powerpoint, undo, undo-redo

是否可以通过 C# 在 Powerpoint 插件中检测撤消/重做事件？或者是否可以访问已发生的事情或操纵撤消/重做列表？

我问是因为我没有看到任何允许这样做的东西，这让我感到惊讶，我期待它是可能的，所以我问主要是希望我错过了什么。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:52:20.477

遗憾的是，PPT 没有公开撤消列表，并且没有可以捕获的事件来让您知道撤消/重做何时发生。

我想可以实现自己的撤消堆栈，但这似乎是斯蒂芬金写小说的那种东西。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-21T20:40:44.360

我也在寻找 Ctrl+Z/Undo 的事件。Undo 功能的 idMso 控件是一个库，因此就通过 customUI 中的 a 重新调整用途而言，这是一个死胡同。没有内置的 Application.OnUndo 事件，我唯一能想到的另一件事是使用 WinAPI 连接到 PowerPoint 的 WindowProc 过程以检测 Ctrl+Z。我简单地尝试了一下，可以检测到该组合键，但我鄙视这种事情导致的不稳定性，导致 PowerPoint 在某些系统上可能崩溃，并且无法解决 macOS。如果有人想要改进它，这里是该技术的基础：

```
Option Explicit

Private Declare PtrSafe Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As Any, ByVal lpWindowName As Any) As LongPtr
Private Declare PtrSafe Function GetActiveWindow Lib "user32" () As LongPtr
Private Declare PtrSafe Function RegisterHotKey Lib "user32" (ByVal hwnd As LongPtr, ByVal ID As Long, ByVal fsModifiers As Long, ByVal vk As Long) As Long
Private Declare PtrSafe Function UnregisterHotKey Lib "user32" (ByVal hwnd As LongPtr, ByVal ID As Long) As Long

Private Declare PtrSafe Function CallWindowProc Lib "user32" Alias "CallWindowProcA" ( _
                                        ByVal lpPrevWndFunc As LongPtr, _
                                        ByVal hwnd As LongPtr, _
                                        ByVal MSG As Long, _
                                        ByVal wParam As LongPtr, _
                                        ByVal lParam As LongPtr) As LongPtr
Public hWndPPT As LongPtr

Public Type POINTAPI
  x As Long
  y As Long
End Type

Public Type MSG
    hwnd As LongPtr
    Message As Long
    wParam As LongPtr
    lParam As LongPtr
    time As Long
    PT As POINTAPI
End Type

#If Win64 Then
   Private Declare PtrSafe Function SetWindowLongPtr Lib "user32" Alias "SetWindowLongPtrA" (ByVal hwnd As LongPtr, ByVal nIndex As Long, ByVal dwNewLong As LongPtr) As LongPtr
#Else
   Private Declare PtrSafe Function SetWindowLongPtr Lib "user32" Alias "SetWindowLongA" (ByVal hwnd As LongPtr, ByVal nIndex As Long, ByVal dwNewLong As LongPtr) As LongPtr
#End If

Private Const GWL_WNDPROC As Long = -4& ' Sets a new address for the window procedure

Private PrevWndFunc As LongPtr          ' Pointer to the initial window proc

Private Const WM_HOTKEY = &H312&        ' HotKey message

Private Const MOD_Control = 2           ' Either CTRL key

Public Sub RegisterCtrlZ()

    Dim returnedVal

    hWndPPT = GetPPThWnd

    returnedVal = RegisterHotKey(hwnd:=hWndPPT, ID:=1, fsModifiers:=MOD_Control, vk:=vbKeyZ)
    Debug.Print "RegisterHotKey returned " & returnedVal

    ' Set the window callback procedure
    PrevWndFunc = SetWindowLongPtr(hWndPPT, GWL_WNDPROC, AddressOf WindowProc)

End Sub

Public Sub UnregisterCtrlZ()

    Dim returnedVal

    hWndPPT = GetPPThWnd

    returnedVal = UnregisterHotKey(hwnd:=hWndPPT, ID:=1)
    Debug.Print "UnregisterHotKey returned " & returnedVal

    PrevWndFunc = SetWindowLongPtr(hWndPPT, GWL_WNDPROC, PrevWndFunc)

End Sub

Public Function WindowProc(ByVal hwnd As LongPtr, ByVal uMsg As Long, ByVal wParam As LongPtr, ByVal lParam As LongPtr) As LongPtr

    ' Check if a hotkey and the main PPT window is the active window
    If uMsg = WM_HOTKEY And GetActiveWindow = hWndPPT Then
        Debug.Print "Hotkey " & wParam & " event (Ctrl+Z)"
    End If

    ' Call the next window proc
    WindowProc = CallWindowProc(PrevWndFunc, hwnd, uMsg, wParam, lParam)

End Function

' Get the handle for the PowerPoint window
Public Function GetPPThWnd() As LongPtr

    Select Case Val(Application.Version)
        Case 8
            GetPPThWnd = FindWindow("PP97FrameClass", 0&)
        Case 9 To 12
            GetPPThWnd = FindWindow("PP" & Val(Application.Version) & "FrameClass", 0&)
        Case Else
            GetPPThWnd = FindWindow("PPTFrameClass", vbNullString)
    End Select

End Function 
```

# c# - 如何在 aspx 页面的广告旋转器中显示不同类型的图像

> ID：13423410
> 
> 赞同：0
> 
> 时间：2012-11-16T19:48:37.713
> 
> 标签：c#, asp.net, telerik, rotator

我有一个广告旋转器，文件内容来自表格列，问题是有时文件列内容是图像，有时是文本文件或列是空的。我的问题是，当没有附件图像或附件存在但它不是图像，它是 .txt 文件或 .doc 文件时，如何显示静态图像。

```
<telerik:RadRotator ID="rrotAttachmentImages" runat="server"                                                      
  RotatorType="CoverFlowButtons"
Height="250px" Width="700px"
    ItemHeight="225px" ItemWidth="700px"                                                   
 ScrollDuration="100" >
 <ItemTemplate>
      &nbsp;&nbsp;&nbsp;&nbsp;                                                  
 <asp:CheckBox ID="chkImageDefault" runat="server" 
  Text="Default Image" Visible='<%# Eval("Default").ToString() == "1" %>'></asp:CheckBox>                                                  
 <asp:Label ID="lblImages_Comments" runat="server" Text="Comments:"></asp:Label>
<telerik:RadTextBox ID="rtxtImageComments" runat="server" Width="300px" Text='<%# Eval("Comments") %>' Enabled="false" ></telerik:RadTextBox>
<asp:Image runat="server" ID="Image" ImageUrl='<%# Eval("File") %>' AlternateText="Image"></asp:Image>   </ItemTemplate>  </telerik:RadRotator> 
```

c#代码：

```
 //get file attachments                     
  IQueryable<TableName> IqryAttachments = DAL.GetFileAttachments(recordid, "somepagename");
                    rrotAttachmentImages.DataSource = IqryAttachments;
                    rrotAttachmentImages.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:46:03.223

使用 ItemDataBound 事件解决了它：

ASP代码：

```
 <telerik:RadRotator ID="rrotAttachmentImages" runat="server"                                                      
  RotatorType="CoverFlowButtons"
Height="250px" Width="700px"
    ItemHeight="225px" ItemWidth="700px"                                                   
 ScrollDuration="100"
onitemdatabound="rrotAttachmentImages_ItemDataBound" >
 <ItemTemplate>
      &nbsp;&nbsp;&nbsp;&nbsp;                                                  
 <asp:CheckBox ID="chkImageDefault" runat="server" 
  Text="Default Image" Visible='<%# Eval("Default").ToString() == "1" %>'></asp:CheckBox>                                                  
 <asp:Label ID="lblImages_Comments" runat="server" Text="Comments:"></asp:Label>
<telerik:RadTextBox ID="rtxtImageComments" runat="server" Width="300px" Text='<%# Eval("Comments") %>' Enabled="false" ></telerik:RadTextBox>
<asp:Image runat="server" ID="Image" ImageUrl='<%# Eval("File") %>' AlternateText="Image"></asp:Image>   </ItemTemplate>  </telerik:RadRotator> 
```

ItemDataBound 事件的 C# 代码：

```
 protected void rrotAttachmentImages_ItemDataBound(object sender, RadRotatorEventArgs e)
    {
        #region Fixing Document Icon

        Image imgImage = e.Item.FindControl("Image") as Image;
        string strFile = imgImage.ImageUrl; 
        bool booImage = false;

        if (string.IsNullOrEmpty(strFile))
        {
            imgImage.ImageUrl = "~/somefolder/NoImage.jpg";
        }
        else
        {
            if (strFile.ToLower().EndsWith(".jpeg")) booImage = true;
                if (strFile.ToLower().EndsWith(".jpg")) booImage = true;
                if (strFile.ToLower().EndsWith(".gif")) booImage = true;
                if (strFile.ToLower().EndsWith(".bmp")) booImage = true;
                if (strFile.ToLower().EndsWith(".png")) booImage = true;
                if (!booImage)
                {
                    if (strFile.ToLower().EndsWith(".txt") || strFile.ToLower().EndsWith(".doc")
                        || strFile.ToLower().EndsWith(".docx")
                        || strFile.ToLower().EndsWith(".xls") || strFile.ToLower().EndsWith(".xlsx"))
                    {
                        imgImage.ImageUrl = "~/somefolder/DocumentIco.png";
                    }
                    else
                    {
                        imgImage.ImageUrl = "~/somefolder/NoImage.jpg";
                    }
                }
        }

        #endregion
    } 
```

# php - 如何在mysql中插入多个值

> ID：13423411
> 
> 赞同：-2
> 
> 时间：2012-11-16T19:48:42.183
> 
> 标签：php, mysql

好的，我不知道该怎么说，因为我从来没有听说过或做过这个，但我敢肯定有人知道。基本上我所做的是为企业创建一个列表，其中电话号码、其他法定名称、SIC 代码等字段可以在列中插入多个值，例如可以在电话号码列中插入许多电话号码在该业务的表中。你将如何在 mysql 和 php 中实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:54:21.243

这可以通过所谓的**多对一**^([1])关系来完成。

您有一个`company`表，其中包含诸如 、 等字段`companyID`（`name`所有单个值（一对一）值）。

然后，您有一个`phones`表，它将引用原始的`companyID`，同时在多行中提供信息。例如：

```
company
-------
id | name
1  | Stack Overflow
2  | Hello World!

phones
------
comapnyID | phoneID | number
1         | 1       | 1234567890
1         | 2       | 0987654321
2         | 3       | 1234509876 
```

这表示公司 1 有两个电话号码，公司 2 有一个。

您可以使用 MySQL JOIN 子句轻松选择那些。

[1：一个公司可能有多个电话号码，但一个电话号码只能属于一个公司。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:56:19.933

如果您真的想这样做，这真的很糟糕，请将信息（例如电话号码）存储为单个逗号分隔的字符串 (071124,421223,2244)。然后，在 php 中，使用`$telephones=explode(',',$theString);`

然后你将把你的号码作为一个数组 ($telephones)。

但我真的不推荐这个。

# javascript - 如何在javascript中进行重复移动？

> ID：13423413
> 
> 赞同：0
> 
> 时间：2012-11-16T19:48:48.997
> 
> 标签：javascript, function, move

我在下载文件时使用 JavaScript 制作进度条。我已经将它作为图片从服务器移动到客户端，但我不知道如何让它重复，所以进度会继续。我用过这个脚本。我需要做什么？

```
<style type="text/css">
#apDiv1 {
    position:absolute;
    width:142px;
    height:140px;
    z-index:1;
    background-color: #FFFFFF;
    background-image: url(server.png);
}
#apDiv2 {
    position:absolute;
    width:142px;
    height:140px;
    z-index:2;
    left: 500px;
    top: 15px;
    background-color: #FFFFFF;
    background-image: url(laptop.png);
}
#apDiv3 {
    position:absolute;
    width:346px;
    height:140px;
    z-index:3;
    left: 153px;
    top: 15px;
}
body {
}
</style>
<div id="apDiv1"></div>
<div id="apDiv2"></div>
<div id="apDiv3"><br />
  <script type="text/javascript">
<!--
var imgObj = null;
var animate ;
function init(){
   imgObj = document.getElementById('myImage');
   imgObj.style.position= 'relative'; 
   imgObj.style.left = '0px'; 
}
function moveRight(){
imgObj.style.left = 200 + 200 + 'px';
if (10 <= left) {
imgObj.style.left = (left + 300) + 'px';
imgObj.style.visibility='visible';

} else

if (left>=500) {
imgObj.style.left = '0px';
}
}
function animate(){
animate = setTimeout(moveRight,200);

}
window.onload =init;
//-->
</script>
</head>
<body>
<form>
<img src="file:///C|/Documents and Settings/Administrator/Desktop/New Folder (2)/folder.png" width="65" height="67" id="myImage" />
<p>Click the buttons below to handle animation</p>
<input type="button" value="Shkarko" onclick="moveRight();" />
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:54:18.117

使用`setInterval()`代替`setTimeout()`：

```
function animate(){
    animateInterval = setInterval(moveRight,200);
} 
```

当你准备好让它停止动画时，调用`clearInterval(animateInterval)`

确保重命名`animate`变量，使其不与`animate()`函数冲突。您还需要`animate()`在某个时候实际调用以启动它。

**编辑：** 您需要打开 JavaScript 控制台并查看收到的错误消息（提示：按下`f12`键）。您在第二条语句中收到错误，`moveRight()`因为`left`未定义。

此外，`animate()`永远不会调用，因此您设置的任何间隔或超时都不会被触发。

中存在逻辑错误`moveRight()`。即使`left`已定义，`else if`也永远不会调用您的语句。如果`left` *大于*，`500`则*也*大于。`10`第一个`if`将被调用，`else if`因此将被忽略。

您的 HTML 无效。您有一个`</head>`没有匹配的打开标签的关闭`<head>`标签。你有一个`<body>`没有结束标签的开放`</body>`标签。如果您*确实*有这些标签，那么您将遇到其他麻烦 -`<div>`元素将位于 中`<head>`，因此甚至不会被渲染。最后一个`<div>`元素的结束标签会出现在`<body>`即使打开标签在`<head>`.

# java - Java 的paintComponent 中没有显示任何内容。我该如何解决？

> ID：13423414
> 
> 赞同：0
> 
> 时间：2012-11-16T19:48:52.247
> 
> 标签：java, user-interface, graphics, paint, paintcomponent

在Java 中，我需要用paintComponent 画一条简单的线。这是我的尝试，但是当我执行程序时没有显示任何内容。请告诉我这样做的正确方法。

```
import javax.swing.*;
import java.awt.*;

public class DrawLine extends JPanel {

    public Illusion(Color backColor){
        setBackground(backColor);
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.setColor(Color.black);
        g.drawLine(100, 100, 300, 100);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:05:40.560

你在黑色背景上画了一条黑线，所以我会说它工作得很好。尝试改变线条的颜色

```
 g.setColor(Color.Red);
    g.drawLine(100, 100, 300, 100); 
```

你也没有考虑到面板的实际大小，我会做更多的事情

```
 g.drawLine(0, 0, getWidth(), getHeight()); 
```

作为测试

您可能想通读

*   [使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)
*   [二维图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

# xhtml - 使用 h:commandButton 切换 rich:dataScroller

> ID：13423416
> 
> 赞同：1
> 
> 时间：2012-11-16T19:48:56.213
> 
> 标签：xhtml, richfaces

有没有人用a`commandButton`来`rich:dataScroller`打开和关闭？我是否需要制作一个 bean 来跟踪 bean 是否`rich:dataScroller`处于活动状态并执行 bean 的操作`commandButton`来切换 bean？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T05:37:08.937

你说的开/关是什么意思？这是否意味着显示/隐藏？如果是这样，你可以做这样的事情。假设您有下表，其下方有 a`datascroller`和 a `commandButton`。

```
<h:form>
     <rich:dataTable var="_usr" value="#{myBean.users}" rows="5">
        <rich:column>
          #{_usr.userName}
        </rich:column>
        <f:facet name="footer">
          <rich:datascroller id="myScroller" />
        </f:facet>
     </rich:dataTable>
     <a4j:commandButton value="Show/Hide" onclick="toggleScroller(#{rich:element('myScroller')});"/>
</h:form> 
```

显示/隐藏的javascript函数`datascroller`如下。

```
<script>
  function toggleScroller(scroller) {
      if(scroller.style.display == 'none') {
          scroller.style.display = ''
        } else {
            scroller.style.display = 'none'
        }
    }
</script> 
```

或者您可以使用 的`rendered`属性`<rich:datascroller>`根据 bean 属性来呈现它。

# security - Firefox 不建议信用卡号码

> ID：13423419
> 
> 赞同：3
> 
> 时间：2012-11-16T19:49:14.223
> 
> 标签：security, firefox, credit-card

我注意到 Firefox 不建议以前使用的信用卡号码。例如，假设我有一个输入字段，用户应该在其中输入信用卡号。如果他们输入其他任何内容，则提交表单，如果他们再次关注该字段，则会建议先前输入的值，但如果他们输入有效的信用卡号，则不会与其他建议一起建议。

我很欣赏这个细节，因为它增加了一点安全性，但是 Firefox 是如何做到的呢？它是否检查所有输入框中的所有值以查看它们是否看起来像信用卡号，如果是，请避免将它们保存以供以后建议使用？可以停用此行为吗？最后，Firefox 是唯一这样做的浏览器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:02:15.303

Firefox 4.0+ 会扫描信用卡号，如果发现则不会存储以进行自动填充。我不相信这可以被禁用。

正如其他人所建议的那样，有一些方法可以要求浏览器不要记住自动填充的字段，但由浏览器来尊重请求。

# actionscript-3 - 如何让命中检测在 Flash 中工作？

> ID：13423436
> 
> 赞同：3
> 
> 时间：2012-11-16T19:50:36.283
> 
> 标签：actionscript-3, flash-cs6

艾夫斯尝试了许多命中检测，但似乎没有一个对我有用。我试过 hittest hittestobject hitarea。当我的对象（即 a 或 b 影片剪辑完全进入 c 影片剪辑时，我希望 c 移动 300 x 方向。只要它在 c 影片剪辑中有效，就不需要进行精确点检测。

```
package  {

import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.media.Sound;
import flash.ui.Mouse;

public class bakingCake extends MovieClip {

    public function bakingCake() {
        // constructor code

        var object:MovieClip = new MovieClip;

        a.addEventListener(MouseEvent.MOUSE_DOWN,objectA);
        b.addEventListener(MouseEvent.MOUSE_DOWN,objectB);

        if (object.hitArea(c) == true)
        {
                c.x = 300;
        }           

        function objectA():void
        {           
            object = a;             
            object.addEventListener(MouseEvent.MOUSE_OVER,objectFun);
        }

        function objectB():void
        {
            object = b;
            object.addEventListener(MouseEvent.MOUSE_OVER,objectFun);
        }       

        function objectFun(event:MouseEvent):void
        {

            object.addEventListener(MouseEvent.MOUSE_DOWN,drag);
            object.addEventListener(MouseEvent.MOUSE_UP,sDrag);
        }
        function drag(event:MouseEvent):void
        {
            object.startDrag();
        }
        function sDrag(event:MouseEvent):void
        {
            object.stopDrag();

        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:29:56.357

你试过 getBounds() 吗？
我建议条件：

```
if (c.getBounds(c.parent).containsRect(a.getBounds(c.parent))
 || c.getBounds(c.parent).containsRect(b.getBounds(c.parent))) {
    c.x = 300;
} 
```

IMO 最好的方法是检查它是否由 ENTER_FRAME 事件触发，附加到任何对象。

# css - 为什么 CSS 浮动在我需要时不起作用

> ID：13423440
> 
> 赞同：-1
> 
> 时间：2012-11-16T19:50:46.093
> 
> 标签：css, css-float, multiple-columns

我正在制作一个块网格，有点像 Pinterest 布局，当我发现浮动元素都扩展到它们所在行中最高块的高度时。

“嘿！” 我想。“如何应用它使我的侧边栏与我的内容高度相同！” 但由于某种原因，它不能那样工作。我到处寻找一个等高列的解决方案，它只使用浮动，就好像它们是一个网格一样，但似乎没有。

所以我的问题可以总结为：如何像浮动正方形网格一样轻松制作等高列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:23:35.330

当然，您可以制作等高的列——无需 hack、JavaScript 或一百万个额外的标记（尽管在 IE7 或更低版本中支持不是很好）。秘密是`display: table-cell`在相邻元素上使用。

HTML：

```
<div class="container">
    <div id="col1">
        Small content here
    </div>

    <div id="col2">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    </div>
</div> 
```

CSS：

```
div.container { display: table }

div.container > div { display: table-cell; border: 1px solid; padding: 1em }

div#col1 { background: orange } 
```

演示：

[http://jsfiddle.net/y9e4d/](http://jsfiddle.net/y9e4d/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:57:02.613

您可以使用 height: 100%，但这需要父元素具有 100% 的高度。首先将 html 和 body 高度设置为 100%，然后逐步向下遍历元素。

您还可以使用 jQuery 获取特定元素的高度，然后根据所选元素使用 jQuery 设置侧边栏的高度。

可能是这样的：

```
$(document).ready(function() {
$('#sidebar').height($('#container').height());
}); 
```

工作示例：

```
 <!DOCTYPE html>
    <html>
    <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script>
        $(document).ready(function() {
                         $('#sidebar').height($('#container').height());
                    });
    </script>
    </head>
    <body>

            <div style="height: 200px; border: 1px solid red; width: 500px; float: left;" id="container">Content</div>
            <div style="border: 1px solid green;" id="sidebar">Sidebar</div>

    </body>
    </html> 
```

# c# - 在 Right CTRL / VK_RCONTROL 的 keydown 处执行功能

> ID：13423445
> 
> 赞同：0
> 
> 时间：2012-11-16T19:50:54.503
> 
> 标签：c#, keyboard, compact-framework

我有一个设备，它有一个类似枪的握把和一个扳机。当我按下这个触发器时，我想启动一些功能。当我扣动扳机时，它会在 KeyDown 事件中返回**H,RControlKey 。**

问题是，当按下触发键（H，ControlKey）时，我该如何执行功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-01T00:29:35.937

也许是这样的：

```
 if (e.KeyCode == Keys.RControlKey)
            {
               //your code
            } 
```

这也适用于 A、B 或 shift 等其他键。

# python - FFT 会帮助我匹配两个图像吗？

> ID：13423447
> 
> 赞同：0
> 
> 时间：2012-11-16T19:51:16.523
> 
> 标签：python, photolibrary

我想使用 PIL 库在 python 中创建照片马赛克。

FFT 会帮助我从给定的图片集中找到图片的最佳匹配吗？

我尝试过使用 rgb 颜色空间，但输出似乎没问题。我需要强大的性能，所以考虑使用 fft。

也请提供一些其他有价值的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:59:47.247

激发想法的实现可能很有用。[关联](https://github.com/doda/similus)

否则谷歌“图像相似性措施”。顶部链接将是这个[问题](https://stackoverflow.com/questions/25977/how-can-i-measure-the-similarity-between-two-images)，它可能再次提供您寻找的所需方向。

# c - 如何将 int 数组和 char 数组写入文件

> ID：13423453
> 
> 赞同：0
> 
> 时间：2012-11-16T19:51:51.093
> 
> 标签：c, io

我试图在二进制文件中写入和读取整数数组。这两个函数或多或少看起来像这样。

### 保存功能

```
int numbers[6]={0, 2, 3, 3, 0, 1};
FILE *file;
if(file=fopen(filename, "wb")==NULL)
{
    printf("Something went wrong reading %s\n", filename);
    return 0;
}
else
{
    int i;
    for(i=0; i<6; i++)
        fprintf(file, "%d", numbers[i]);
}
fclose(file); 
```

### 加载函数

```
FILE *saved_data;
int errors=0;
if((saved_data=fopen(filename, "rb"))==NULL)
    errors++;
else
{
    fread(first, sizeof(int), 1, saved_data);
    fread(second, sizeof(int), 1, saved_data);
    fread(third, sizeof(int), 1, saved_data);
    fread(fourth, sizeof(int), 1, saved_data);
    fread(fifth, sizeof(int), 1, saved_data);
    fread(sixt, sizeof(int), 1, saved_data);
}
fclose(saved_data); 
```

现在，当我调试程序时，调试器告诉我第一个元素如下

```
(gdb) print first
$1 = (int *) 0x7fff5fbff968
(gdb) print *first
$2 = 858993200 
```

我无法理解这一点。用编辑器打开文件时***显示 023301***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:57:16.483

的互补功能`fread`是`fwrite`，不是`fprintf`。您正在做的`fprintf`是将整数作为文本而不是二进制放入文件中。

另外，请确保传递指向 的指针`fread`，而不是整数。您不显示 , 等的声明`first`，`second`但如果您声明了类似

```
int first, second, third, fourth, fifth, sixt; 
```

那么你需要使用类似的代码

```
fread(&first, sizeof(int), 1, saved_data); 
```

而不是

```
fread(first, sizeof(int), 1, saved_data); 
```

由于您的整数已经在一个数组中，您可以一次性编写数组

```
fwrite(numbers, sizeof(int), 6, file); 
```

并完全避免`for`循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:58:00.367

如果您不反对将文件一直保留为文本，请将 fopen 更改为以文本形式打开，并更改您的 read 语句以将它们作为文本读入。就目前而言，您似乎不一致地将文件在一部分中视为文本，然后在另一部分中视为二进制文件，这可能会损坏它。

# java - 计算机特定 ID？

> ID：13423454
> 
> 赞同：6
> 
> 时间：2012-11-16T19:51:53.283
> 
> 标签：java

我正在尝试使用 Java 生成特定的计算机 ID。我考虑过诸如硬盘序列号、Windows 序列号、CPU ID 或 MAC 地址之类的东西，但其他计算机可能有相同的。例如，如果有人盗版 Windows 7，他们可能有相同的序列号作为某人.. 我想知道是否有人可以给我一种方法来生成一个永远不会改变并且可以使用 Java 检索的计算机特定 ID？

我做了一些研究，发现了一些有用的功能。而且，我在想​​这样的事情。但是如果他们改变他们的硬件，它会改变计算机ID。有人知道我可以使用的东西吗？

```
public String getComputerID(){
    InetAddress ip = InetAddress.getLocalHost();
    NetworkInterface network = NetworkInterface.getByInetAddress(ip);
    byte[] mac = network.getHardwareAddress();
    String sn = getSerialNumber("C");
    String cpuId = getMotherboardSN();
    return MD5(mac + sn + cpuId);
}

public String MD5(String md5) {
try {
        java.security.MessageDigest md = java.security.MessageDigest.getInstance("MD5");
        byte[] array = md.digest(md5.getBytes());
        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < array.length; ++i) {
        sb.append(Integer.toHexString((array[i] & 0xFF) | 0x100).substring(1,3));
    }
        return sb.toString();
    } catch (java.security.NoSuchAlgorithmException e) {
    }
    return null;
}

public String getSerialNumber(String drive) {
String result = "";
    try {
    File file = File.createTempFile("realhowto",".vbs");
    file.deleteOnExit();
    FileWriter fw = new java.io.FileWriter(file);

  StringBufferring vbs = "Set objFSO = CreateObject(\"Scripting.FileSystemObject\")\n"
                +"Set colDrives = objFSO.Drives\n"
                +"Set objDrive = colDrives.item(\"" + drive + "\")\n"
                +"Wscript.Echo objDrive.SerialNumber";  // see note
    fw.write(vbs);
    FileWriter.close();
      Process p = Runtime.getRuntime().exec("cscript //NoLogo " + file.getPath());
      BufferedReader input =
        new BufferedReader
        (new InputStreamReader(p.getInputStream()));
    String line;
    while ((line = input.readLine()) != null) {
        result += line;
    }
    input.close();
    }
    catch(Exception e){
        e.printStackTrace();
    }
    return result.trim();
}

public String getMotherboardSN() {
String result = "";
try {
File file = File.createTempFile("realhowto",".vbs");
file.deleteOnExit();
FileWriter fw = new java.io.FileWriter(file);

String vbs =
"Set objWMIService = GetObject(\"winmgmts:\\\\.\\root\\cimv2\")\n"
+ "Set colItems = objWMIService.ExecQuery _ \n"
+ " (\"Select * from Win32_BaseBoard\") \n"
+ "For Each objItem in colItems \n"
+ " Wscript.Echo objItem.SerialNumber \n"
+ " exit for ' do the first cpu only! \n"
+ "Next \n";

fw.write(vbs);
fw.close();
Process p = Runtime.getRuntime().exec("cscript //NoLogo " + file.getPath());
BufferedReader input =
new BufferedReader
(new InputStreamReader(p.getInputStream()));
String line;
while ((line = input.readLine()) != null) {
result += line;
}
input.close();
}
catch(Exception e){
e.printStackTrace();
}
return result.trim();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:27:52.453

我实际上确实相信您应该使用硬件配置文件中的某些东西。
可以将计算机视为一组硬件，包括网络接口。一个典型的模式可以是通过管理网络计算机的管理系统将 MAC 地址和生成的 ID 组合在一起。
在向管理系统注册过程中唯一标识机器的 MAC 地址。
作为注册的结果，管理系统可以返回一个生成的UniqueId，
存储在注册它的计算机上，供以后使用。
注册成功后，可以更换网卡，因为电脑不依赖MAC地址来识别。
您还可以考虑使用 linux dmidecode 实用程序
（对于 linux 机器，
因为您提供了基于 win 的解决方案，
所以对于我们的 linux 读者，
我想建议一个 linux 替代方案）（如果您要唯一识别的机器具有 linux 和dmidecoe 安装）。
使用 dmidecoe，您可以获得更多硬件配置文件，并对其执行一些哈希函数，并生成一个唯一 ID，该 ID 将唯一（准确地说，很有可能）标识您的机器。[在此处](http://www.nongnu.org/dmidecode/)
阅读有关 dmidecode的更多信息。 当然，如果您使用“从操作系统获取硬件信息”方法（即 dmidecode 或您在获取 MAC 地址后的部分建议，

您需要一个跨平台代码来检查 java 程序运行的操作系统是什么，您可以使用以下方法：

```
System.getProperty("os.name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-27T03:22:04.317

***在查看了每个人的意见之后，我在谷歌上搜索了很多次，我得出了这个结论***

从技术上讲，好像您卸下并更换了一个组件，这将是一台全新的计算机，要生成真正的计算机特定 ID，您必须从系统中的每个组件中获取特定变量（即序列号） ，将它们全部组合起来，这将是一个“计算机特定 ID”。但是，由于计算机非常容易更改，因此最接近的方法是采用 LAST LIKELY TO CHANGE 组件，并从中获取特定变量作为计算机 ID。这通常是主板或其他不太可能更改的组件。因此，最接近的可能是主板的序列号（或其他一些子组件）。在我个人看来。

***为什么主板最不可能改变？***

似乎主板是人们考虑更换的最后一部分，尤其是在较新的计算机上。除非绝对需要，否则他们通常不会更改它。另一个可行的选择是 NIC。老实说，您使用哪种硬件取决于您，但最好使用的是您认为最不可能更改的硬件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T22:48:17.457

对于磁盘/卷，它可能是：

```
 /**
     * Execute system console command 'vol' and retrieve volume serial number
     *
     * @param driveLetter - drive letter in convetion 'X:'
     * @return - Volume Serial Number, typically: 'XXXX-XXXX'
     * @throws IOException
     * @throws InterruptedException
     */
    static final String getVolumeSerial(String driveLetter) throws IOException, InterruptedException {
        Process process = Runtime.getRuntime().exec("cmd /C vol " + driveLetter);
        InputStream inputStream = process.getInputStream();
        InputStream errorStream = process.getErrorStream();
        if (process.waitFor() != 0) {
            Scanner sce = new Scanner(errorStream);
            throw new RuntimeException(sce.findWithinHorizon(".*", 0));
        }
        Scanner scn = new Scanner(inputStream);
        // looking for: ': XXXX-XXXX' using regex
        String res = scn.findWithinHorizon(": \\w+-\\w+", 0);
        return res.substring(2).toUpperCase().trim();
    } 
```

# c# - 通用方法错误

> ID：13423457
> 
> 赞同：0
> 
> 时间：2012-11-16T19:52:10.593
> 
> 标签：c#

我正在尝试做类似的事情：

```
public DataObjectBase GetCurrentSettings<T>(string path) where T : DataObjectBase
    {
        if (string.IsNullOrEmpty(path))
        {
            throw new ArgumentException("Path cannot be empty.");
        }

        return _currentSettings[T].Invoke(path);
    } 
```

但它不会编译。我怎样才能做到这一点？我基本上导入了一个 IEnumerable 类，这些类可以使用 MEF 和 importmany 属性来操作我的 DataObjects。然后在构造函数中，我将每个操作变成一个键控字典，这样我就不必在每次调用时都运行查询。

_currentSettings 是一个`Dictionary<Type, Func<string, DataObject>>`

# core-data - 来自 UIManagedDocument 的数据库快速持久存储

> ID：13423460
> 
> 赞同：4
> 
> 时间：2012-11-16T19:53:06.410
> 
> 标签：core-data, store, timing, persistent

我通过 UIManagedDocument 创建了一个数据库。如果我慢慢添加记录，一切正常。如果我快速（记录之间的 3-4 秒），记录在获取时会出现乱序，并且可能无法在应用程序停止/启动时继续存在。

UIManagedDocument 在 vi​​ewDidAppear 中创建并在“useDocument”（下面提供的代码）中修改，该文件检查不存在的数据库并在必要时创建它或只是打开它。

同样，我认为我的问题是核心数据没有立即存储到 SQLite。

```
-(void)setExampleDatabase:(UIManagedDocument *)exampleDatabase {
    if ( _exampleDatabase != exampleDatabase ) {
        _exampleDatabase = exampleDatabase;
        NSMutableDictionary *pragmaOptions = [NSMutableDictionary dictionary];
        [pragmaOptions setObject:@"FULL" forKey:@"synchronous"];
        [pragmaOptions setObject:@"1" forKey:@"fullfsync"];

        NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                                 pragmaOptions, NSSQLitePragmasOption,
                                 [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                 [NSNumber numberWithBool:YES, NSInferMappingModelAutomaticallyOption, nil];
        exampleDatabase.persistentStoreOptions = options;
        //
        // Does the file exist?? Is not, create it.
        if ( ! [[NSFileManager defaultManager] fileExistsAtPath:    [self.exampleDatabase.fileURL path]] ) {
            [self.exampleDatabase saveToURL:self.exampleDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            //
            // OK, the creation has been done, enable the add button so records can be created
            self.addButton.enabled = YES;
            }];
        //
        // The file exists, but it's close, so open it.
        } else if ( self.exampleDatabase.documentState == UIDocumentStateClosed ) {
            [self.exampleDatabase openWithCompletionHandler:^(BOOL success) {
                if ( success ) {
                    //
                    // It's now successfully opened, enable the add button, load the data from
                    // the core data database and cause the objects to be displayed in the table view
                    // "getCounts" is immediately below this method
                    self.addButton.enabled = YES;
                    [self getCounts:self.exampleDatabase.managedObjectContext];
                    [self.tableView reloadData];
                } else {
                   NSLog(@"Error opening a closed database");
                }
            } ];
        } else if ( self.exampleDatabase.documentState == UIDocumentStateNormal ) {
            //
            // OK, the database is opened. Enable the add button, load the data from
            // the core data database and cause the objects to be displayed in the table view
            // "getCounts" is immediately below this method
            self.addButton.enabled = YES;
            [self getCounts:self.exampleDatabase.managedObjectContext];
            [self.tableView reloadData];
        } else {
            NSLog(@"Something is wrong in useDocument - it exists in an unknown state");
            exit(1);
        }
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    if ( ! self.exampleDatabase ) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"DefaultDb"];
        self.exampleDatabase = [[UIManagedDocument alloc] initWithFileURL:url];
    }
} 
```

# java - Java ExecutorCompletionService 作为 API 响应者

> ID：13423461
> 
> 赞同：0
> 
> 时间：2012-11-16T19:53:09.567
> 
> 标签：java, api, executorservice, threadpoolexecutor

我有一个服务器应用程序，它监听`ServerSocket`传入的查询。提交查询的客户端希望打开一个到服务器的套接字，将他们的查询传递到上游，然后（可能在很短的一段时间后）从他们用来提交查询的*同一个套接字读取对其查询的响应。*

为此，我正在尝试使用`ExecutorCompletionService`. 不同的查询类被传递给不同`Callable`的 s，但都期望返回 a`String`作为它们的结果。

在我达到实际尝试回复客户的阶段之前，所有这些都是可以管理的。这些`Future`对象目前都是 type `Future<String>`，但我无法将该结果（the `String`）与适当的`Socket`.

我的解决方案是让我所有的`Callable`s 都是看起来像`Callable<StringSocketPair>`的类型；`StringSocketPair`

```
public class StringSocketPair {
    Socket sock;
    String content;
} 
```

但这一切似乎有点奇怪，因为现在我必须将 传递`Socket`给`Callable`构造函数，以便它可以将它与方法的`String`结果一起返回`call()`。所有这些都是为了让我可以将其推`String`送到`Socket`另一个轮询线程中`ExecutorCompletionService.take()`。

另一种选择是使用`Runnable`s 而不是`Callable`s 并让每个`Runnable`任务自己响应`Socket`，但是由于我有十几种查询类型，每个都有自己的任务对象，我宁愿不必添加`respondToClient()`一些调用kind 到`run()`每个任务对象的每个方法的末尾。

对于我认为相当常见的设置，必须有一个更简单的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:09:54.293

按照使用 的想法`Runnable`，您可以使用[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)来定义响应功能。这将防止您必须为每个任务编写公共代码，因为公共代码将放置在实现 Runnable 的抽象父类中。

模板方法模式：

```
abstract class TemplateSuperClass implements Runnable {
    public void run() {
        //some setup code here
        String message = taskWork(...);
        socket.write(message);
        //common cleanup code
    }

    abstract String taskWork(...);
}

class HelloWorld extends TemplateSuperClass {
    String taskWork(...) {
        return "Hello World";
    }
} 
```

否则，您可能正确地更改 Callable 以返回响应消息和套接字的元组。

# asp.net-mvc-3 - 使用 ViewData 启用/禁用 Html.EditorFor

> ID：13423462
> 
> 赞同：0
> 
> 时间：2012-11-16T19:53:09.593
> 
> 标签：asp.net-mvc-3

我的应用程序是 MVC3 ASPX C#；我正在尝试使用以下方法启用/禁用 Html.EditorFor： 在模型中：

```
 public bool IsReadOnly { get; private set; } 
```

在控制器中：

```
 if (MySession.Current._progress == 100)
       ViewData["ReadOnly"] = true; 
```

在视图中：

```
... Inherits="System.Web.Mvc.ViewPage<Models.CTAHFormEdit>" %>
 <script runat="server" type="text/C#">
        bool isReadOnly = false;
        protected void Page_Load(object sender, EventArgs e)
        {
            if ((bool?)this.ViewData["ReadOnly"] == true)this.isReadOnly = true;
        }
    </script>
    <%: Html.EditorFor(model => model.Vessel_calcification, Model.IsReadOnly)%> 
```

这没有用。我也试过：

```
 <%: Html.EditorFor(model => model.Subject_motion, new { @disable = true })%> 
```

也没有工作！

最好的解决方案，因为我在同一个视图中也有下拉列表和复选框是使用 @disable = true 和 @readonly = true 或 false 并且能够使用 ViewBag 更改 true 或 false。任何建议，提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:30:37.253

你可以试试这个：

```
@Html.TextBoxFor(model => model.Subject_motion, new { @readonly = "readonly" }) 
```

下面解释一下EditorFor和TextBoxFor的区别：

[MVC 和 Razor 中 Html.TextboxFor 和 Html.EditorFor 的区别](https://stackoverflow.com/questions/4826173/mvc3-html-textboxfor-vs-html-editorfor)

# python - Motor 和 MongoDB 返回 None

> ID：13423472
> 
> 赞同：3
> 
> 时间：2012-11-16T19:53:49.250
> 
> 标签：python, mongodb, asynchronous, tornado

我使用电机驱动程序异步访问读取 mongo 集合。当我运行我的应用程序时，它返回一个 None 值。当我与 PyMongo 同步运行它时，它运行正常。我在这两个地方都遵循了示例：http: [//blog.mongodb.org/post/30927719826/motor-asynchronous-driver-for-mongodb-and-python](http://blog.mongodb.org/post/30927719826/motor-asynchronous-driver-for-mongodb-and-python)和[http://emptysquare.net/motor/pymongo/api /motor/tutorial.html](http://emptysquare.net/motor/pymongo/api/motor/tutorial.html)。

这是我的部分代码：

```
import tornado.httpserver
import tornado.websocket
import tornado.ioloop
import tornado.web
import tornado.options
from tornado import gen
from bson import json_util
import json
import os.path
import motor

events = []

class WSHandler(tornado.websocket.WebSocketHandler):
    @tornado.web.asynchronous
    @gen.engine

    def open(self):
        import traceback
        global events
        print "tailing for events %s...." % events

        try:
            coll = db.blah_tail  
            cursor = coll.find(
                { "$and" : [
                        {"term": {"$in": events}}, 
                        { "$or" : [
                                {"coordinates.type" : "Point"}, 
                                {"place.full_name" : {"$ne" : None}}
                        ]}
                    ]}, 
                           {"coordinates" : 1, "place.full_name" : 1}, 
                            tailable = True, timeout  = False )      

            while cursor.alive:

                    try:
                        doc = yield motor.Op(cursor.next_object)
                        print doc
                        self.write_message(json.dumps(doc, default = json_util.default))
                    except StopIteration:
                        pass

db = motor.MotorConnection().open_sync().blah

if __name__ == "__main__":
    print 'Server is alive.....'
    app = tornado.web.Application(
    handlers=[(r'/', MainHandler),                                   
    (r'/ws', WSHandler)
    ], db=db,
    template_path=os.path.join(os.path.dirname(__file__), "templates"),
    debug=True)

    tornado.options.parse_command_line()
    http_server = tornado.httpserver.HTTPServer(app)
    http_server.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

Motor 使应用程序异步，但我不确定为什么它基本上没有从数据库中的集合中读取任何内容。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:14:11.830

能够通过将代码修改为：

```
doc = yield motor.Op(cursor.next_object)
if doc:
    print doc
    self.write_message(json.dumps(doc, default = json_util.default)) 
```

因此，如果第一次调用没有返回文档，请防止返回 None。Motor 的创建者的摘录更好地解释为：“问题是，仅仅因为 cursor.alive 是 True 并不能真正保证 next_object 将实际返回一个文档。如果 find 根本没有匹配任何文档，则第一次调用返回 None .. .", (http://emptysquare.net/blog/category/motor/)。

# xcode - xcode - 更改所有图形组件的设计

> ID：13423473
> 
> 赞同：0
> 
> 时间：2012-11-16T19:53:50.650
> 
> 标签：xcode, graphics

有没有一种方法可以改变storyboard中某个组件类型（比如所有的按钮）的图形而不用一个一个的改变？

我必须使用购买的设计更改所有组件的外观。然而，我在故事板中的观点很多，我会投入太多来一一改变它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:15:33.650

在 xcode 的屏幕左侧有一个所有视图控制器的列表，您可以展开所有视图控制器并按 command + 选择您想要的控件，然后您可以进行一些更改。

因此这些更改会影响所有控件。

我认为这是唯一的方法。

# windows-8 - windows 8中的Flyout和SettingFlyout控件有什么区别

> ID：13423475
> 
> 赞同：0
> 
> 时间：2012-11-16T19:53:53.490
> 
> 标签：windows-8, flyout

Windows 8 中的 Flyout 和 SettingFlyout 控件有什么不同？我看到动画是不同的。但是还有别的吗？

**更新：** 此示例演示了如何使用 ApplicationSettings API 和设置弹出按钮将应用的设置 UI 与设置魅力集成

[http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49/sourcecode?fileId=50852&pathId=106473882](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49/sourcecode?fileId=50852&pathId=106473882)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:27:23.580

SettingsFlyout 用于通过设置合同与设置窗格一起使用。Flyout 用于主 UX。

# objective-c - 在块参数中向下转换是一种不好的做法吗？

> ID：13423478
> 
> 赞同：3
> 
> 时间：2012-11-16T19:54:04.057
> 
> 标签：objective-c, ios

举个例子，而不是这样写：

```
NSArray *someArray = @[@"1", @"2", @"3", @"4"];
[someArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSString *aString = obj;
    // do something
}]; 
```

如果您知道块方法中的常量，则可以直接向下转换对象以使其更简洁：

```
[someArray enumerateObjectsUsingBlock:^(NSString *aString, NSUInteger idx, BOOL *stop) {
    // do something
}]; 
```

这是否违反任何最佳实践或 oop 原则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:07:10.063

我很确定这很好。只要您知道数组中的内容，就可以随意静态输入`id`参数。无论如何，它主要是一天结束时的语法糖。我总是静态地输入我能输入的任何东西。它可以帮助我捕捉错误并使事情更容易阅读。此外，正如 H2CO3 指出的那样，可以将对象分配给 a`id`和返回而无需强制转换。

# regex - 时间：2019-06-10 标签：c#regex@"[;]+"

> ID：13423484
> 
> 赞同：0
> 
> 时间：2012-11-16T19:54:25.627
> 
> 标签：regex

在c#中，有一行代码如：

```
string[] values = Regex.Split(fielddata, @"[;]+"); 
```

这分裂在什么价值观上？我对 @ 符号中的文字以及方括号和 + 在这里的含义感到有些困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:00:21.390

@ 是逐字字符串文字，这意味着您不必转义特殊字符。正如 Asad 已经说过的，它拆分为一个或多个连续的分号，其中 + 代表 1 或更多（正则表达式语法）

这是一个可运行的示例：http: [//ideone.com/whLqUe](http://ideone.com/whLqUe)

```
 string input = "a;b; ;c;;;d";
        string[] values = Regex.Split(input, @";+");
        foreach (var value in values)
            Console.WriteLine(value); 
```

输出

```
a
b

c
d 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:00:41.940

[这是一个很好的教程。](http://www.regular-expressions.info/tutorial.html)

`[...]`是匹配方括号内的任何单个字符的字符类。在这种情况下，它是多余的，只是写作`@";+"`意味着完全相同。

`+`重复前一个字符或模式 1 次或多次。

所以这会连续分裂`;`（尽可能多）。

逐字字符串 ( `@"..."`) 仅用作一种良好做法。一旦您需要转义正则表达式中的内容，如果您使用普通字符串，它就会变得难看。同样，在这个特定示例中，省略`@`. 但这是值得习惯的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T19:59:37.407

这些括号是不必要的。该正则表达式等效于以下内容：

```
string[] values = Regex.Split(fielddata, @";+"); 
```

它将拆分为任意数量的分号，因此`"1;2;;3;;4;;;5;;6;7"`将返回一个数组：

```
['1', '2', '3', '4', '5', '6', '7'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T20:02:43.350

split 方法将在 1 个或多个分号上拆分字段数据。@ 符号意味着您不必对字符进行转义，并且字符串是双引号之间的逐字记录。

如果`fielddata = "a;b;c;;d;e;;;f"` 那么

```
values = ["a","b","c","d","e","f"] 
```

# java - 在矩形数组中找到重叠的最快方法是什么？

> ID：13423488
> 
> 赞同：3
> 
> 时间：2012-11-16T19:54:33.817
> 
> 标签：java, 2d, collision-detection, slick2d

我在业余时间从事“游戏”，几乎纯粹是作为一种学习体验，并且正处于需要在玩家实体和敌人实体之间进行碰撞检测的地步。

玩家和所有敌人都共享一个基类 ，`Entity`这使他们能够访问 x、y、高度和宽度属性。使用这些，我可以为每个实体构建一个矩形，并尝试找到重叠。如果有重叠，则发生碰撞。

因此，按照上面的逻辑，我们可以假设以下数据位于 Rectangles 数组中：

```
X    Y    HEIGHT   WIDTH
------------------------
0    0    25       50
0    50   25       25
0    100  25       30
50   200  25       50
150  250  25       25
150  50   25       30 
```

确定这些实体（矩形）是否与其他实体相交的最快方法是什么？简单地遍历数组并将每个元素与其他元素进行比较是不够的 (O(n^2))。有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T19:58:16.967

您想使用某种空间索引或结构，以便快速找到彼此靠近的元素。

一种常用的数据结构是[四叉树](http://en.wikipedia.org/wiki/Quadtree)。

# php - /src="http/':"src=\"{$pageUrl} 中的否定

> ID：13423490
> 
> 赞同：0
> 
> 时间：2012-11-16T19:54:52.217
> 
> 标签：php, regex, smarty, regex-negation

smarty中的正则表达式。我需要找到并替换所有不同于

```
src = "http:// 
```

我正在尝试使用该功能

```
regex_replace:'/src="http/':"src=\"{$pageUrl}" 
```

有否定文本的迹象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:59:12.563

您可能需要负前瞻：

```
regex_replace:"/src=\"(?!http:\/\/).*?\"/":"src=\"{$pageUrl}\"" 
```

# java - javax.servlet.ServletException：java.lang.NoClassDefFoundError：org/apache/commons/pool/KeyedObjectPoolFactory

> ID：13423491
> 
> 赞同：2
> 
> 时间：2012-11-16T19:54:59.000
> 
> 标签：java, oracle10g, database-connection, apache-commons-dbcp

我正在尝试[`BasicDataSource`](https://commons.apache.org/proper/commons-dbcp/apidocs/org/apache/commons/dbcp2/BasicDataSource.html)使用[DBCP](https://commons.apache.org/proper/commons-dbcp/configuration.html)建立与 Oracle 数据库的连接。

我[`commons-dbcp-1.4-bin.zip`](http://www.eu.apache.org/dist//commons/dbcp/binaries/commons-dbcp-1.4-bin.zip)从[这里](http://commons.apache.org/dbcp/download_dbcp.cgi)下载。

类路径上有三个 jar 文件。

1.  commons-dbcp-1.4
2.  ~~commons-dbcp-1.4-sources~~

4.  ~~commons-dbcp-1.4-javadoc~~

我正在使用以下代码来建立连接。

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import org.apache.commons.dbcp.BasicDataSource;

public class DatabaseConnection {

    private final static BasicDataSource BASIC_DATA_SOURCE = new BasicDataSource();
    private final static String SQL = "SELECT * FROM admin WHERE login_id=? AND admin_pwd=?";

    static {
        BASIC_DATA_SOURCE.setDriverClassName("oracle.jdbc.OracleDriver");
        BASIC_DATA_SOURCE.setUrl("jdbc:oracle:thin:@localhost:1521:xe");
        BASIC_DATA_SOURCE.setUsername("wagafashiondb");
        BASIC_DATA_SOURCE.setPassword("root");
    }

    private static Connection getConnection() throws SQLException {
        return BASIC_DATA_SOURCE.getConnection();
    }

    public boolean exists(String userName, String password) throws SQLException {
        Connection connection = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        boolean exists = false;

        try {
            connection = getConnection();
            ps = connection.prepareStatement(SQL);
            ps.setString(1, userName);
            ps.setString(2, password);
            rs = ps.executeQuery();
            exists = rs.next();
        } finally {
            try {
                if (connection != null) {connection.close();}
                if (ps != null) {ps.close();}
                if (rs != null) {rs.close();}
            } catch (SQLException e) {

            }
        }
        return exists;
    }
} 
```

它抛出以下异常，

```
javax.servlet.ServletException: java.lang.NoClassDefFoundError: org/apache/commons/pool/KeyedObjectPoolFactory 
```

这似乎暗示我使用了错误的来源。导致此异常的原因可能是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T20:17:51.333

解决方案

您需要`commons-pool`在类路径上获取库 (JAR)。该事实被指示为[项目依赖](http://commons.apache.org/dbcp/dependencies.html)`commons-pool`项列表`commons-dbcp`中的依赖项

解释

基本上，`NoClassDefFoundError`Java 执行结果需要一个不在类路径上的特定类。这是因为类需要其他类（通常以`import`s 表示）。在您的情况下（至少）其中一个类`commons-dbcp`声明了对`org/apache/commons/pool/KeyedObjectPoolFactory`.

类的名称使用`/`分隔符给出。`org/apache/commons/pool/KeyedObjectPoolFactory`如果这是一个通用名称（不是您自己的类），您可以尝试通过在 Google 中输入全名（例如 ）来查找从何处获取它。

# c++ - 基于 C++ 表单的应用程序中的 ActiveX 控件

> ID：13423493
> 
> 赞同：1
> 
> 时间：2012-11-16T19:55:07.417
> 
> 标签：c++, winforms, visual-studio-2010, activex

是否可以像我们在基于 MFC 对话框的应用程序中使用的那样在基于 C++ 表单的应用程序中使用 ActiveX 控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:08:36.747

[是的，您可以使用AxHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.axhost.aspx)类在 WinForms 中托管 ActiveX 控件。

# php - 为什么覆盖方法参数违反了 PHP 中的严格标准？

> ID：13423494
> 
> 赞同：42
> 
> 时间：2012-11-16T19:55:09.140
> 
> 标签：php, oop

我知道 StackOverflow 中有几个类似的问题，比如[这个问题](https://stackoverflow.com/questions/13220489/method-overriding-and-strict-standards)。

为什么覆盖方法参数违反了 PHP 中的严格标准？例如：

```
class Foo
{
    public function bar(Array $bar){}
}

class Baz extends Foo
{
    public function bar($bar) {}
} 
```

> 严格标准： Baz::bar() 的声明应与 Foo::bar() 的声明兼容

在其他 OOP 编程语言中你可以。为什么 PHP 不好？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-16T20:03:44.363

在 OOP 中，[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)代表**单一责任、开放封闭、里氏替换、接口隔离和依赖倒置**。

[Liskov 替换](http://en.wikipedia.org/wiki/Liskov_substitution_principle)原则指出，在计算机程序中，如果**Bar**是*Foo的子类型，则**Foo*类型的对象可以用**Bar**类型的对象替换，而不会改变该程序的任何所需属性（正确性、执行的任务等）。 ）。

在强类型编程语言中，当重写 Foo 方法时，如果您更改 Bar 中的签名，您实际上是在*重载*，因为原始方法和新方法具有不同的签名。由于 PHP 是弱类型的，这是不可能实现的，因为编译器无法知道您实际调用了哪些方法。（因此你不能有两个同名的方法，即使它们的签名不同）。

因此，为避免违反 Liskov Substituition 原则，发出严格标准的警告，告诉程序员由于子类中方法签名的更改，可能会出现某些问题。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-15T06:42:53.250

我知道我迟到了，但答案并没有真正说明实际问题。

问题是 PHP 不支持函数/方法重载。在无类型语言中支持函数重载是很困难的。

暗示有帮助。但在 PHP 中它非常有限。不知道为什么。例如，您不能暗示变量是 int 或 Boolean，但数组很好。去搞清楚！

其他面向对象的语言使用函数重载来实现这一点。也就是说函数的签名明显不同。

因此，例如，如果以下情况是可能的，我们就不会有问题

```
class Foo
{
    public function bar(Array $bar){
        echo "Foo::bar";
    }
}

class Baz extends Foo
{
    public function bar(int $bar) {
        echo "Baz::bar";
    }
}

$foo = new Baz();
$bar = new Baz();
$ar = array();
$i = 100;

$foo->bar($ar);
$bar->bar((int)$i);

would output

Foo::bar
Baz::bar 
```

当然，当涉及到构造函数时，php 开发人员意识到他们必须实现它，不管你喜不喜欢！因此，他们只是在第一种情况下抑制错误或不提出错误。

这是愚蠢的。

一位熟人曾经说过 PHP 实现对象只是作为实现命名空间的一种方式。现在我并不那么挑剔，但做出的一些决定确实倾向于支持该理论。

在开发代码时，我总是打开最大的警告，我从来没有在不了解它的含义和含义的情况下放过警告。就我个人而言，我不关心这个警告。我知道我想做什么，而 PHP 做的不对。我来这里是为了寻找一种选择性抑制它的方法。我还没有找到方法。

所以我会捕获这个警告并自己压制它。可惜我需要这样做。但我对 STRICT 很严格。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T19:57:33.800

您可以覆盖参数，但签名应该匹配。如果你`Array`在前面放出来`$bar`，就没有问题了。

例如，如果您添加了一个附加参数，那么只要第一个参数具有相同的类型提示，就没有问题。这是任何语言的好习惯。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T19:58:07.567

因为您声明的`Foo`应该`$bar`是 type `array`，而在 extended 中`Bar`，`$bar`没有声明 's 的类型。

这不是错误，而是警告。您应该使方法定义与原始基类兼容。但是，如果您知道自己在做什么，则可以安全地忽略它（并且**只有**在您知道自己在做什么的情况下！！！）

# objective-c - 在发布到后端之前编辑 UIImage 上的 Exif 数据

> ID：13423498
> 
> 赞同：2
> 
> 时间：2012-11-16T19:55:12.837
> 
> 标签：objective-c, ios, uiimage, exif

# 问题

我正在将图像发布到服务器，但是当我将它们拉回设备时，它们会侧身。

我的想法是附加到图像的 Exif 数据告诉服务器如何定位图像。

如何在发送之前从相机或库中编辑 UIImage 上的 exif 数据？我已经看到了在图像返回时旋转图像的解决方案，但我想要一个解决方案，甚至在它发布之前。

可能发生的事情的一个线索是，当 imageOrientation 发布时它是正常的，但无论如何都会从服务器返回 Up 。这是否可能意味着服务器正在剥离确定方向所需的 Exif 数据？

谢谢你。

# python - 合并和排序两个已排序的文本文件

> ID：13423503
> 
> 赞同：-2
> 
> 时间：2012-11-16T19:55:41.840
> 
> 标签：python, sorting, text, merge, mergesort

我有两个文本文件：

### 样本-r1.txt

```
Bud Abbott 51 92.3
Mary Boyd 52 91.4
Hillary Clinton 50 82.1 
```

### 样本-r2.txt

```
Don Adams 51 90.4
Jill Carney 53 76.3
Randy Newman 50 41.2 
```

我想用姓氏合并和排序它们，这是每行的第二个索引（程序可能不使用任何预先存在的合并或排序软件）

这是我的代码

```
one = open("sample-r1.txt",'r')
two = open("sample-r2.txt",'r')

for line in one:
    k = line.rstrip().split('\t')

for record in two:
    h= record.rstrip().split('\t')

i=0
j=0
newList=[]

while i < len(k) and j<len(h) :
    if k[i][1] <= h[j][1]:
        newList.append(k[i])
        i+=1            
    else:
        newList.append(h[j])
        j+=1

print(newList) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:54:50.787

首先，不清楚您的输入是制表符分隔的。使用`split()`而不是`split('\t')`确保您获得所有列。

其次`while`，当任一输入用尽时，您的循环将终止，但另一个输入仍将保留一些数据。输出太短应该很明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:29:06.153

试试这个：一些修复：k,h.append 而不是 k,h= 否则 k 和 h 是列表并且 k[][] 是一个字符而不是一个字符串

```
one = open("sample-r1.txt",'r')
two = open("sample-r2.txt",'r')
k=[]
h=[]
for line in one:
    tmp=line.rstrip().split('\t')
    if len(tmp)>1:
        k.append ( tmp )
for record in two:
    tmp=record.rstrip().split('\t')
    if len(tmp)>1:
        h.append ( tmp )
i=0
j=0
newList=[]
while i < len(k) and j < len(h):
    if k[i][1] <= h[j][1]:
        newList.append(k[i])
        i+=1
    else:
        newList.append(h[j])
        j+=1
while i < len(k):
    newList.append(k[i])
    i+=1
while j < len(h):
    newList.append(h[j])
    j+=1
for row in newList:
    print("\t".join(row)) 
```

# java - getX() 调用上的 NullPointerException (Scene2d + Libgdx)

> ID：13423506
> 
> 赞同：1
> 
> 时间：2012-11-16T19:55:57.800
> 
> 标签：java, libgdx, scene2d

我正在尝试创建一个简单的 BreakOut 克隆来熟悉 LibGDX 和 scene2d。但是，在组装了一个非常基本的示例以开始使用之后，我在一个定义非常明确的对象上得到了 NullPointerException。

我有一个名为 Paddle 的 Actor 类，它在我的程序中有一个名为 paddle 的实例。它被声明为全局变量并在 create() 方法中初始化。当我运行程序时，它会在代码中的 render() 方法中返回一个错误，用于检查桨是否超出屏幕边界：

```
// make sure the paddle stays within the bounds of the screen
if(paddle.getX() < 0) paddle.setX(0); // <--- error is detected here
if(paddle.getX() > 800 - 200) paddle.setX(600); 
```

这是返回的错误：

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: java.lang.NullPointerException
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:111)
Caused by: java.lang.NullPointerException
    at com.freakout.Game.render(Game.java:150)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:190)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:108) 
```

这是 Paddle 类；

```
public class Paddle extends Actor {
TextureRegion region;
public Paddle(){
    region = new TextureRegion(new Texture(Gdx.files.internal("paddle.png")), 800/2 - 200 /2, 20);
    }
} 
```

[这是代码](http://pastebin.com/ktAs1Bix)，以防有助于查看整个内容。

**编辑：**感谢评论，我找到了答案：我意识到我在发布后立即错过了什么 - 看起来我重新定义了 paddle 变量的范围（通过使用 Paddle paddle = new Paddle(...)）在本地方法而不是全局。因此，当它试图访问该对象时，它总是返回 null，因为该对象在 create() 方法之外是不可访问的。

如果您的 Actor 在基本调用中无法正常工作，这可能是您的罪魁祸首。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:30:22.423

我浏览了您的代码，发现在您的`create()`方法中，您通过“”创建了一个 Paddle，并将其分配给该行“”中`new Paddle()`的局部变量“ ”。所以实际上正因为如此，Game 类的名为“”的变量仍未初始化（因为被方法的局部变量隐藏）。因此，当在您的方法中访问它时，您会得到.`paddle``Paddle paddle = new Paddle();``paddle``render()``NullPointerException`

要摆脱这个东西，只需将“ `Paddle paddle = new Paddle();`”这条线变成“ `paddle = new Paddle();`”，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:16:47.427

`paddle`变量赋值为 null 或未初始化。

# css - 背景图像路径在Firefox中不起作用

> ID：13423510
> 
> 赞同：5
> 
> 时间：2012-11-16T19:56:20.767
> 
> 标签：css, image, firefox, background, background-image

我`<li>`在 Firefox 中加载背景图像时遇到问题。

我的原始代码是：

```
background: #bdcad7 url(../images/navbg.png) repeat-x; 
```

它在 chrome 和 IE 中运行良好，但在 FF 中运行良好。

```
background: #bdcad7 url(images/navbg.png) repeat-x; 
```

也适用于 IE 和 chrome 但不适用于 FF

让它在 FF 中工作的唯一方法是如果我包含下一个目录级别

```
background: #bdcad7 url(/includes/images/navbg.png) repeat-x; 
```

但这在其他浏览器中不起作用。

我已经尝试了所有我能想到的变体`./`，`../`包括引号、双引号、使用`background-image`等，但无法让它在所有浏览器中工作。相对路径似乎在 FF 中读取不同（这是我以前从未见过的）

在所有浏览器中有效的是具有图像的完整 url 或绝对路径，但每个在文本编辑器上占用 3 行，所以我想尽可能避免它。

任何关于为什么 Firefox 给我带来困难的见解都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:43:24.217

我感谢所有的意见。尽我所能，我认为这是目录路径中服务器端某处出现的问题。

我已经对 css 进行了两次和三次检查，尝试了所有可能的变体，并且无法在测试文档上复制错误。

我认为唯一的选择是采用完整的绝对路径，以防其他人遇到同样的问题。

```
background:#F1F1F4 url(/dir1/dir2/dir3/dir4/includes/style/images/background.png) top left repeat-x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:09:06.207

正确的语法是

`background: #bdcad7 url(../images/navbg.png) repeat-x right top`

因此，您可能必须添加最后 2 个参数才能使其正常工作。
如果您向我们提供站点结构，将会有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:12:21.377

尝试`url('../images/navbg.png')`使用“”。无论如何我都会这样做，而且它似乎并不疼，所以也许它会有所帮助？值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T10:09:01.003

背景：url（“../images/navbg.png”）重复-x滚动右上方#BDCAD7；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T20:02:07.573

确保包含背景的 div 具有一定的高度。此外，请确保图像文件名与 CSS 文件的路径相关。

更多可能的解决方案可以在这里找到 -[背景图像在 Firefox 中不显示](https://stackoverflow.com/questions/371337/background-image-is-not-displayed-in-firefox)

# twitter - 使用多个关键字抓取 Twitter

> ID：13423511
> 
> 赞同：1
> 
> 时间：2012-11-16T19:56:21.003
> 
> 标签：twitter, web-crawler

我们有一些关于组建网络爬虫以从 Twitter 收集一些数据的快速问题。

例如，如果我们想使用几百个`user IDs`作为关键字来收集一些必要的推文。但是，我们似乎只能使用有限数量的关键字（12 个？），我们可以一次启动一个爬虫。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:36:39.460

由于[Twitter API 限制（速率限制）](https://dev.twitter.com/docs/rate-limiting/1.1)，无法想象爬取整个网站，除非您有很多时间或除非您付费才能获得对 twitterhose 的特殊访问权限，这应该是解决问题的唯一方法你提到的问题

# c++ - std::ws 是否应该在文件末尾引发故障位？

> ID：13423514
> 
> 赞同：9
> 
> 时间：2012-11-16T19:56:33.520
> 
> 标签：c++, gcc, clang, iostream, manipulators

**使用 std::ws 操纵器从流中提取是否应该提高失败位？**在以下代码中，Clang 编译的（在 Xcode 4.5.1 中）程序无法通过最终断言。显然`s >> std::ws`在 EOF 会导致失败。然而 GCC 4.7.2 通过了这个断言。哪个是对的？

```
#include <iostream>
#include <sstream>
#include <cassert>

int main(int argc, const char * argv[])
{
    {
        // Read string with trailing ws.
        std::istringstream s( "test   " );
        std::string test;

        s >> std::ws;
        assert( !s.fail() );    // No ws to skip, but no failure.

        s >> test;
        assert( test == "test" );
        assert( !s.fail() );

        s >> std::ws;
        assert( !s.fail() );    // No prob skipping trailing ws.
    }
    {
        // Retry with no trailing ws.
        std::istringstream s( "test" );
        std::string test;

        s >> std::ws;
        assert( !s.fail() );    // No ws to skip, but no failure.

        s >> test;
        assert( test == "test" );
        assert( !s.fail() );

        s >> std::ws;
        assert( !s.fail() );    // CLANG: Skipping absent ws at eof raises failbit.
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-21T16:24:23.540

我相信 libc++ 正在正确地实施标准。

[我引用了 N3290，它是 C++11 标准草案。C++14 不会改变这一点。]

`ws`在 [istream.manip] 中有描述，其中指出：

> 效果：表现为一个未格式化的输入函数（如 27.7.2.3，第 1 段所述），除了它不计算提取的字符数并且不影响后续调用 is.gcount() 返回的值。在构造一个哨兵对象后，只要下一个可用字符 c 是空格或直到序列中没有更多字符，就会提取字符。空格字符的区分标准与 sentry::sentry (27.7.2.1.3) 使用的标准相同。如果 ws 因为没有更多可用字符而停止提取字符，它会设置 eofbit，但不会设置失败位。

这里确定正确行为的关键短语是“在构建哨兵对象之后”。

Sentry 对象在 [istream::sentry] 中进行了描述，其中的文本开始...

> 1 类哨兵定义了一个类，负责做异常安全的前缀和后缀操作。
> 
> 显式哨兵（basic_istream& 是，bool noskipws = false）；
> 
> 2 效果：如果 is.good() 为 false，则调用 is.setstate(failbit)。否则，准备格式化或 > 未格式化的输入。……*等等*……

这是唯一可用的哨兵构造函数，所以这是 libc++ 使用的构造函数。

因此在提取任何字符之前设置了失败位，因此段落末尾的文本不适用。如果流包含`" "`（即末尾的单个空格），则调用`std::ws`不会设置失败位，只是 eof （这是 OP 预期发生的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T20:18:05.260

C++11，§27.7.2.4/1：

> 如果`ws`停止提取字符，因为没有更多可用它设置`eofbit`，但不是`failbit`。

所以，`ws`机械手不`failbit`直接设置。但是，正如 Marshall Clow 在他的回答中指出的那样，它不必 - 它需要创建一个哨兵对象，并且哨兵对象需要设置故障位 if `!stream.good()`。

# c - 使用 fopen（C 编程语言）和“a+”模式附加文件

> ID：13423515
> 
> 赞同：1
> 
> 时间：2012-11-16T19:56:36.033
> 
> 标签：c, unicode, utf-8, fopen

我无法在 UTF-8 中创建文件以进行附加。[MSDN 文档](http://msdn.microsoft.com/en-us/library/yeby3zcb.aspx)指出，使用“ a+”作为模式参数会打开文件进行“读取和附加”，这是我需要做的。出于某种原因，当不存在文件并且我正在动态创建一个新文件时，在新文件中创建的[BOM 或字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)格式不正确。

基本上，它只写入 3 个字节中的前 2 个。它应该写入字节 0xEF、0xBB 和 0xBF，但它只写入前两个（0xEF 和 0xBB）。如果您在文本编辑器中查看它，它应该看起来像这样：ï»¿，但看起来像这样：ï»。有人见过这个吗？也许是一个已知的 fopen 错误？这是我用来打开的代码，我正在使用简单的 fwrite 来写入文件。当我为模式传入“w”（写入）时，一切正常，但 BOM 的“a”或“a+”格式错误：

```
_tfopen(PathToFile,UNICODE_CHAR_MACRO("a+, ccs=UTF-8")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:55:28.730

我终于想通了。我们使用的第三方软件实际上剥离了 BOM 的最后一个字节，认为它是[ctrl-z MS-DOS end of file character](http://en.wikipedia.org/wiki/Control-Z)。

# java - 卡在哈希表的两倍大小上

> ID：13423522
> 
> 赞同：0
> 
> 时间：2012-11-16T19:57:29.853
> 
> 标签：java, hash, map

我不知道如何将哈希表的大小加倍。这是代码：

```
private void doubleLength () {
  //Remember the old hash table array and allocate a new one 2 times as big

  HashMap<K,V> resizedMap = new HashMap<K,V>(map.length * 2);

/*Traverse the old hash table adding each value to the new hash table.
 Instead, add it to by applying
 hashing/compression again (compression will be DIFFERENT, because the
 length of the table is doubled, so we compute the same hash value but
 compute the remainder using the DIFFERENT TABLE LENGTH).*/
   for (int i = 0; i < map.length; i++) {
        for (K key : map[i].entry) { //iterator does not work here
                    resizedMap.put(key, map[i].get(key)); //should go here
    }

} 
```

哈希表是 LN 对象的数组，其中 LN 由以下内容定义：

```
public static class LN<K1,V1> {
   public Map.Entry<K1,V1> entry;
   public LN<K1,V1>        next;

   public LN (Map.Entry<K1,V1> e, LN<K1,V1> n)
   {entry = e; next = n;}
} 
```

我的班级中有一个可迭代对象，但它不允许 map[i].entry.entries()。

```
public Iterable<Map.Entry<K,V>> entries () {
return new Iterable<Map.Entry<K,V>>() {
  public Iterator<Map.Entry<K,V>> iterator() {
    return new MapEntryIterator();
  }
};
} 
```

我对如何将公共 LN[] 地图的大小加倍感到非常迷茫；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:07:19.067

当`HashMap`哈希表太满时，它已经调整了自己的大小。您不必调整它的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:09:20.653

您的代码将无法编译。如果您想将地图初始化为两倍大小，则更容易执行此操作（假设`map`也是`Map`）：

```
private void doubleLength () {
  //Remember the old hash table array and allocate a new one 2 times as big
  HashMap<K,V> resizedMap = new HashMap<K,V>(map.size()* 2);
  resizedMap.putAll(map);
} 
```

此外，您似乎对事物的访问方式很奇怪。如果您需要遍历地图，它应该看起来像：

```
for (K key : map.keySet()){
  V value = map.get(key); //get the value from the map
  //do what you need to do
} 
```

现在如前所述，您不需要调整 HashMap 的大小。它已经这样做了。从[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)：

> HashMap 的实例有两个影响其性能的参数：初始容量和负载因子。容量是哈希表中的桶数，初始容量只是哈希表创建时的容量。负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。当哈希表中的条目数超过负载因子和当前容量的乘积时，对哈希表进行重新哈希（即重建内部数据结构），使哈希表的桶数大约增加一倍。

# wpf - 饼图自定义颜色

> ID：13423523
> 
> 赞同：2
> 
> 时间：2012-11-16T19:57:30.103
> 
> 标签：wpf, charts, wpftoolkit, pie-chart

我正在尝试开发用于图表的自定义控件。

我正在使用 WPF 工具包，但我找不到如何（是吗？）为饼图中的每个部分设置特定颜色。

我不明白他们为什么把这个弄得这么复杂。许多应用程序对现有类别使用特定颜色，在图表中使用相同颜色是否合理？

# mysql - 实现一个简单的日历

> ID：13423533
> 
> 赞同：5
> 
> 时间：2012-11-16T19:58:03.377
> 
> 标签：mysql, calendar

在尝试实现一个简单的日历时，我走到了死胡同。这是我几周的表模式：

```
DROP TABLE IF EXISTS `weeks`;
CREATE TABLE `weeks` (
  `weeknum` varchar(255) NOT NULL DEFAULT '',
  `period1` varchar(255) DEFAULT NULL,
  `period2` varchar(255) DEFAULT NULL,
  `A11` varchar(255) DEFAULT NULL,
  `A22` varchar(255) DEFAULT NULL,
  `A31` varchar(255) DEFAULT NULL,
  `A32` varchar(255) DEFAULT NULL,
  `C11` varchar(255) DEFAULT NULL,
  `C12` varchar(255) DEFAULT NULL,
  `C21` varchar(255) DEFAULT NULL,
  `C22` varchar(255) DEFAULT NULL,
  `C31` varchar(255) DEFAULT NULL,
  `C32` varchar(255) DEFAULT NULL,
  `D11` varchar(255) DEFAULT NULL,
  `D12` varchar(255) DEFAULT NULL,
  `D21` varchar(255) DEFAULT NULL,
  `D22` varchar(255) DEFAULT NULL,
  `D31` varchar(255) DEFAULT NULL,
  `D32` varchar(255) DEFAULT NULL,
  `E11` varchar(255) DEFAULT NULL,
  `E12` varchar(255) DEFAULT NULL,
  `E21` varchar(255) DEFAULT NULL,
  `E22` varchar(255) DEFAULT NULL,
  `E31` varchar(255) DEFAULT NULL,
  `E32` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`weeknum`)
) ENGINE=InnoDB DEFAULT CHARSET=greek; 
```

列名是房间号，weeknum 取值从 15 到 45。在运行包含 weeknum（例如 40）作为参数的查询后，我得到一些房间号（E31、E32 等）。我只想将相应行和列的单元格值设置为“是”，具体取决于查询的结果。例如：运行后

```
select room.roomnum
from payment,contract,room,customer
where payment.contractID = contract.contractID
and contract.roomID=room.roomID
and customer.customerID=payment.customerID
and payment.yearkoino='2009' and contract.weeknum=40 
```

我得到：

```
+---------+
| roomnum |
+---------+
| c21    |
| a32    |
| c12    |
| d12    |
| d11    |
| e22    |
| a22    |
| c31    |
| e12    |
+---------+ 
```

这也是一个屏幕截图，可能会让您了解我正在尝试做什么：

[http://img37.imageshack.us/img37/7633/screenshotoy.png](http://img37.imageshack.us/img37/7633/screenshotoy.png)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:22:00.180

一般来说，这些类型的任务最好使用第三范式。

一个表用于 Weeks，一个用于 Rooms，然后第三个表用于跟踪关系 RoomWeek。

RoomWeek 至少有两个字段 - RoomNum、Room.RoomNum 的子项 WeekNum、Week.WekNum 的子项状态、跟踪“是/否”等其他需要的字段

下一步是使用 Room 和 Week 表的交叉连接填充 RoomWeek，以便为每种可能性获取一行。

因此，当您有一个查询返回给定一周的房间列表时，您会执行类似的操作

```
update RoomWeek, payment,contract,room,customer
set RoomWeek.status = "Yes"
where payment.contractID = contract.contractID
and contract.roomID=room.roomID
and customer.customerID=payment.customerID
and payment.yearkoino='2009' and contract.weeknum=40 
and RoomWeek.weeknum = contract.weeknum
and RoomWeek.Roomnum = room.roomnum 
```

如果您坚持更新当前表，那么它很棘手，因为当您想要更新的列取决于数据本身（返回的 roomnum）时，更新像 Week 这样的表要困难得多 - 这是可以做到的，但如果房间改变，你的桌子必须改变，代码可能需要改变等。

# javascript - 在扩展网站的同时使 HTML 画布更大

> ID：13423535
> 
> 赞同：0
> 
> 时间：2012-11-16T19:58:14.843
> 
> 标签：javascript, browser, html5-canvas, scale

您是否知道如何在缩放整个网站时不缩放 HTML 画布元素（在大多数浏览器中为 ctrl+“+”），而是使其尺寸更大？我有一个应用程序，您可以在其中查看大图像，在画布元素中缩放和平移它们。现在我认为使用 ctrl+"+" 缩放网站以有更多空间查看图像会很酷。因为默认情况下，画布也会缩放，你什么也得不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:20:35.943

您可以使用本文中描述的技术[http://novemberborn.net/2007/12/javascriptpage-zoom-ff3-128](http://novemberborn.net/2007/12/javascriptpage-zoom-ff3-128)中描述的技术。

主要思想是放置任意两个元素并设置第一个元素的 css 值（以像素为单位，如 top\left\width 等）和第二个元素的百分比值。当您缩放页面时，百分比值保持不变，但像素值会根据缩放系数而变化。基于这些更改，您可以计算比例因子并将其与画布尺寸相乘以对其进行缩放。

如何计算比例因子，您可以在脚本块中文章的演示链接中找到。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-16T20:08:59.153

像 Zoomooz.js 这样的东西可以工作 - [http://janne.aukia.com/zoomooz/](http://janne.aukia.com/zoomooz/)

# ruby-on-rails - ruby on rails ActionMailer 错误

> ID：13423536
> 
> 赞同：0
> 
> 时间：2012-11-16T19:58:14.963
> 
> 标签：ruby-on-rails

我第一次尝试使用 ActionMailer。

我的邮件看起来像这样：

```
class RequestMailer < ActionMailer::Base
 default from: "fred@ameipro.com"
 def request_email(worequest)
 @worequest = worequest
 mail(:to => "dave@ameipro.com", :subject => "New Service Request")
 end
end 
```

但是，我收到以下错误： Net::SMTPFatalError in WorequestsController#create

```
550 Cannot receive from specified address <fred@ameipro.com>:     Unauthenticated senders not allowed 
```

我该如何纠正？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:04:49.133

这是来自邮件服务器的错误 - 它拒绝从您的地址发送电子邮件。那是您需要诊断的部分。为了帮助您，我们需要有关您尝试发送的服务器的更多信息。要进行故障排除，我会尝试配置不同的客户端以通过您的服务器发送，然后尝试从 fred@ameipro.com 向 dave@ameipro.com 发送电子邮件，看看会发生什么。

# python - Argparse 子解析器：在命令列表中隐藏元变量

> ID：13423540
> 
> 赞同：11
> 
> 时间：2012-11-16T19:58:23.480
> 
> 标签：python, argparse

我在我的程序中将 Python argparse 模块用于命令行子命令。我的代码基本上是这样的：

```
import argparse

parser = argparse.ArgumentParser()
subparsers = parser.add_subparsers(title="subcommands", metavar="<command>")

subparser = subparsers.add_parser("this", help="do this")
subparser = subparsers.add_parser("that", help="do that")

parser.parse_args() 
```

运行“python test.py --help”时，我想列出可用的子命令。目前我得到这个输出：

```
usage: test.py [-h] <command> ...

optional arguments:
  -h, --help  show this help message and exit

subcommands:
  <command>
    this      do this
    that      do that 
```

我可以以某种方式删除`<command>`子命令列表中的行并仍将其保留在使用行中吗？我试图将 help=argparse.SUPPRESS 作为参数提供给 add_subparsers，但这只是隐藏了帮助输出中的所有子命令。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-17T09:21:55.383

我通过添加一个新的 HelpFormatter 来解决它，如果格式化一个 PARSER 操作，它只会删除该行：

```
class SubcommandHelpFormatter(argparse.RawDescriptionHelpFormatter):
    def _format_action(self, action):
        parts = super(argparse.RawDescriptionHelpFormatter, self)._format_action(action)
        if action.nargs == argparse.PARSER:
            parts = "\n".join(parts.split("\n")[1:])
        return parts 
```

# c# - 动态修改RouteValueDictionary

> ID：13423545
> 
> 赞同：4
> 
> 时间：2012-11-16T19:59:03.523
> 
> 标签：c#, asp.net-mvc, routes, asp.net-mvc-routing

作为[这个问题](https://stackoverflow.com/q/13382175/1324019)的后续，我正在尝试实现自定义路由约束，以便`RouteValueDictionary`为特定路由动态修改。

我已经完成了 95%：我可以根据提供的参数模式匹配任何路由，匹配 url 中指定的操作。此过程的最后一步是覆盖 RouteValueDictionary 以将键重命名为控制器操作的适当参数。

这是我的代码的相关片段（整个类将近 300 行，所以我不想全部添加，但如果需要我可以添加）：

```
public class CustomRouteConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string paramName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        if (routeDirection.Equals(RouteDirection.UrlGeneration)) {
            return false;
        }

        //this will grab all of the "actual" parameters out of the RVD, excluding action and controller 
        Dictionary<string, object> unMappedList = values.Where(x => x.Key.Contains("param")).OrderBy(xi => xi.Key).ToDictionary(
            kvp => kvp.Key, kvp => kvp.Value);

        string controller = values["controller"] as string;
        string action = values["action"] as string;

        //this method tries to find the controller using reflection
        Type cont = TryFindController(controller);

        if (cont != null) {
            MethodInfo actionMethod = cont.GetMethod(action);

            if (actionMethod != null) {
                ParameterInfo[] methodParameters = actionMethod.GetParameters();

                //this method validates that the parameters of the action that was found match the expected parameters passed in the custom constraint; it also performs type conversion
                if (validateParameters(methodParameters, unMappedList)) {
                    for (int i = 0; i < methodParameters.Length; i++) {
                        values.First(x => x.Key == unMappedList.ElementAt(i).Key).Key = methodParameters.ElementAt(i).Name; 
                        //above doesn't work, but even if it did it wouldn't do the right thing

                        return true;
                    }
                }
            }
        }

        return false;
    }
} 
```

以下是我使用自定义约束的方式：

```
routes.MapRoute(
    name: "Default2",
    url: "{controller}/{action}/{param1}-{param2}",
    defaults: new { controller = "Admin", action = "Index" },
    constraints: new { lang = new CustomRouteConstraint(new RoutePatternCollection( new List<ParamType> { ParamType.INT, ParamType.INT })) }
); 
```

（我传递给构造函数的基本上是在说“要查找的参数模式是两个整数”。所以当`Match`调用该方法时，如果 url 中指定的操作有两个整数参数，它将返回 true，而不管实际参数名称。）

那么，有没有办法可以覆盖这个请求的 RouteValueDictionary ？还是有其他我想念的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T06:01:28.367

如果我理解正确，问题是什么：

> 那么，有没有办法可以覆盖这个请求的 RouteValueDictionary ？还是有其他我想念的方法可以做到这一点？

我采用了您的解决方案并更改了这些行以替换参数名称：

```
for (int i = 0; i < methodParameters.Length; i++)
{
    // I. instead of this

    //values.First(x => x.Key == unMappedList.ElementAt(i).Key)
    //    .Key = methodParameters.ElementAt(i).Name; 
    //above doesn't work, but even if it did it wouldn't do the right thing

    // II. do this (not so elegant but working;)
    var key = unMappedList.ElementAt(i).Key;
    var value = values[key];
    values.Remove(key);
    values.Add(methodParameters.ElementAt(i).Name, value);

    // III. THIS is essential! if statement must be moved after the for loop
    //return true;
}
return true; // here we can return true 
```

**注意：**我喜欢你的方法。有时扩展/调整路由然后转到代码并“修复不正确的参数名称”更为重要。当然，它们很可能是不正确的。

这就是关注点分离的力量。

*   URL 地址是一个地方。
*   控制器、动作和参数名称另一种。
*   以及具有强大自定义功能的路由...

...作为唯一正确的地方来处理它。这是关注点分离。不调整动作名称以提供 URL ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:57:34.720

您可以使用正则表达式轻松地将参数限制为正整数：

```
private const string IdRouteConstraint = @"^\d+$";

routes.MapRoute(
   name: "Default2",
   url: "{controller}/{action}/{param1}-{param2}",
   defaults: new { controller = "Admin", action = "Index" },
   constraints: new { param1 = IdRouteConstraint, param2 = IdRouteConstraint}); 
```

正如我在回答您[之前的问题](https://stackoverflow.com/questions/13382175/route-patterns-vs-individual-routes)中所说的那样，您不必担心控制器操作中的参数名称。给那些过于有意义的名字会让你陷入困境。

# excel - 如何使用范围和字符串比较来减少代码的运行时间

> ID：13423546
> 
> 赞同：2
> 
> 时间：2012-11-16T19:59:07.697
> 
> 标签：excel, vba

我有以下代码，它完全符合我的需要，但是，循环运行时间太长（3 分钟以上）。我是 VBA 的新手，所以我不确定 1）最好的替代方案是什么 2）如何为该替代方案使用正确的语法并让我的代码完美运行。谢谢！

```
Dim i As Integer
For i = 2 To 13000

If Sheets("Sheet1").Range(Cells(i, 3), Cells(i, 3)) = "Police" 
    And Sheets("Sheet1").Range(Cells(i, 14), Cells(i, 14)) = "Bi-wkly Uniform Pay" Then _
Sheets("Sheet1").Range(Cells(i, 3), Cells(i, 3)) = "Police - Uniform"

Next i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:32:40.457

在循环中访问工作表非常慢。更好的方法是将数据复制到`Variant`数组上的数组循环中，然后将结果复制回工作表

像这样的东西：

```
Sub Demo()
    Dim i As Long
    Dim datCol3 As Variant
    Dim datCol14 As Variant

    With Sheets("Sheet1")
        ' Copy data into a Variant Array
        datCol3 = .Range(.Cells(1, 3), .Cells(13000, 3)).Formula
        datCol14 = .Range(.Cells(1, 14), .Cells(13000, 14)).Value
        ' Loop over the array
        For i = 2 To 13000
            If datCol3(i, 1) = "Police" And datCol14(i, 1) = "Bi-wkly Uniform Pay" Then
                datCol3(i, 1) = "Police - Uniform"
            End If
        Next
        'Return the results to the sheet
        .Range(.Cells(1, 3), .Cells(13000, 3)).Formula = datCol3
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:17:16.787

这可能不是最好的答案，但尝试设置局部变量

Var sht1 = Sheets("Sheet1") 可能会稍微减少对工作表对象的选择。此外，不需要使用 (i, 3) 选择范围和单元格，因为它是单个单元格的范围，所以结合起来你会有类似的东西

```
 If sht1.Range.Cells(i,3) = "Police" And sht1.Range.Cells(i,14) = "Bi-wkly Uniform Pay" Then sh1.Range.Cells(i,3) = "Police Uniform" 
Next i 
```

如果这不起作用并且您可以将其放在不同的列中（例如列 O 或 15），那么您只需使用一个公式，然后拖动/双击，或者您可以类似地在整个列上使用数组公式并且然后按 ctrl + shift + enter 使其计算为数组公式。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:29:56.310

**建议一**

代替：

```
If Sheets("Sheet1").Range(Cells(i, 3), Cells(i, 3)) = "Police" 
    And Sheets("Sheet1").Range(Cells(i, 14), Cells(i, 14)) = "Bi-wkly Uniform Pay" Then _
  Sheets("Sheet1").Range(Cells(i, 3), Cells(i, 3)) = "Police - Uniform" 
```

经过：

```
With Sheets("Sheet1")
  If .Range(Cells(i, 3), Cells(i, 3)) = "Police" _
      And .Range(Cells(i, 14), Cells(i, 14)) = "Bi-wkly Uniform Pay" Then _
    .Range(Cells(i, 3), Cells(i, 3)) = "Police - Uniform"
End With 
```

**建议二**

代替：

```
.Range(Cells(i, 3), Cells(i, 3)) 
```

经过

```
.Cells(i, 3) 
```

**建议 3**

添加：

```
Application.ScreenUpdating = False 
```

如果没有此语句，则每次更改都会重新绘制屏幕。这比其他任何事情都消耗更多的时间。

# liferay - Liferay：根据角色检查权限

> ID：13423547
> 
> 赞同：4
> 
> 时间：2012-11-16T19:59:11.190
> 
> 标签：liferay

我想检查登录用户是否有权在 portlet 上执行特定操作。假设页面上有一个“创建产品”按钮，如果管理员以外的任何人登录，我想隐藏它。你如何在前端和后端检查它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:05:10.193

您应该在前端和后端检查它。为此，您可以使用 PermissionChecker。[http://docs.liferay.com/portal/6.0/javadocs/com/liferay/portal/security/permission/PermissionChecker.html](http://docs.liferay.com/portal/6.0/javadocs/com/liferay/portal/security/permission/PermissionChecker.html)

编辑：

你可以在这里找到一些例子：[http ://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/security-and-permissions](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/security-and-permissions)

# .net - .net mvc3 按日期变量对对象列表进行排序

> ID：13423551
> 
> 赞同：0
> 
> 时间：2012-11-16T19:59:17.307
> 
> 标签：.net, asp.net-mvc-3

我有一个“BlogPost”列表，每个都有一个日期变量。

.net mvc3 中是否有一种简单的方法可以根据日期对列表进行排序，还是我需要手动编写自己的排序算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:03:34.327

由于您提供的信息很少，因此做出了很多假设，只需使用 Linq。

```
List<BlogPost> posts = GetBlogPosts();
posts.Sort(b => b.Date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:12:01.893

> 还是我需要手动编写自己的排序算法？

不！！我们不再生活在石器时代...

您在您的问题中没有提供任何信息，例如什么是数据访问机制 Linq？使用任何像 NHibernate 这样的 ORM？还是实体？还是 linq2sql？或者通过打开连接然后执行sql语句来查询数据库？

如果您使用的是 Linq，那么您可以尝试

```
var _x = ( from x in DBContext.BlogPost
           orderby x.Date select x).ToList(); 
```

或者

```
string myConnectionString = "connectionstring"; //you connectionstring goes here

SqlCommand cmd= new SqlCommand("select * from BlogPost order by Date", new SqlConnection(myConnectionString));
cmd.Connection.Open();
//some execute scalar stuff goes here i really dont remember 
cmd.Connection.Close(); 
```

# ios - 读取未知数量的传入字节

> ID：13423552
> 
> 赞同：0
> 
> 时间：2012-11-16T19:59:19.057
> 
> 标签：ios, cocoa-touch, cocoaasyncsocket

我的应用程序使用 AsyncSocket 通过 TCP 与服务器通信。通信有两种情况：

1.  应用程序向服务器发送一些东西，服务器做出响应。应用程序需要读取此响应并对其中的信息进行处理。这个响应总是相同的长度，例如，一个响应总是 6 个字节。

2.  应用程序处于“空闲”状态，服务器在某个时间启动通信（应用程序未知）。该应用程序需要读取服务器发送的任何内容（可以是任意数量的字节，但第一个字节将指示后面有多少字节，因此我知道何时停止读取）并处理此信息。

第一种情况工作正常。`readDataToLength:timeout:tag`返回我需要的东西，我可以用它做我想做的事。这是我不确定如何实施的第二种情况。我不能使用`readDataToLength:timeout:tag`，因为我事先不知道长度。

我想我可以做点什么`readDataWithTimeout:tag:`，将超时设置为-1。我相信，这使得套接字不断地监听任何进来的东西。但是，这可能会干扰响应我发送的内容而传入的数据（情况 1）。该应用程序无法再区分来自情况 1 或情况 2 的传入数据。

这里有谁能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:19:42.847

您的错误在于网络协议设计。

除非您的协议具有此信息，否则无法区分响应与服务器发起的通信。网络延迟会阻止您描述的基于时间的明显方法可靠地工作。

在您的情况下修复协议的一种简单方法（如果服务器启动的消息总是小于 255 个字节） - 将第 7 个字节添加到响应的开头，值为 FF。

这样你就可以读取DataWithTimeout:tag: 1 个字节。超时时重试，直到有数据。如果接收到的值是 FF，则使用 再读取 6 个字节`readDataToLength:6 timeout: tag:`，并将其解释为对您之前发送的请求的响应。如果是其他值，则使用 读取消息`readDataToLength:theValue timeout: tag:`，并处理服务器启动的消息。

# jdbc - 获取活动连接的 JDBC 用户权限

> ID：13423554
> 
> 赞同：1
> 
> 时间：2012-11-16T19:59:27.853
> 
> 标签：jdbc, permissions

我正在尝试为通过 JDBC 连接到 SQL 数据库提供正确的错误代码。提供错误的服务器名称或 sql 实例非常容易，因为要捕获异常。同样使用无效的用户名/凭据...

但我的问题是，如果我得到一个有效的连接，我想获得用户对特定数据库的权限。我可能错过了，但似乎没有 connection.getPermissionsForUser() 方法或类似的东西。我唯一能想到的就是触发插入查询以查看我是否具有写入权限或选择查询看看我是否有读取权限。这些似乎不是很有说服力，所以我希望可能有更好的方法来做到这一点。

具体来说，有没有办法在连接字符串中获取用户的权限？

# c# - 在 C# 中使用 String 中的泛型动态创建对象

> ID：13423559
> 
> 赞同：0
> 
> 时间：2012-11-16T19:59:45.290
> 
> 标签：c#, generics

可以说我有

```
public partial class DeleteThisStruct<TKey, TValue> 
```

但是，我必须将 TKey 和 TValue 的值作为字符串从文件中读取（我已经有一种方法可以做到这一点，所以假设我已经有 2 个字符串）示例：“MyNamespace.MyClass”和“MyNamespace.MyClass2”

第二个问题是需要实例化此对象的代码是从不同的项目但在相同的解决方案中调用的。假设我在 ProjectA 中实例化，而 DeleteThisStruct 在 ProjectB 中（包含在对 ProjectA 的引用中）

无论是否使用泛型，我将如何动态实例化 DeleteThisStruct 并从中获取成员值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:24:53.820

[查看http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx](http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx)中的“构造通用类型的实例”部分。您将需要根据字符串检索类型对象，但请注意，通常仅“MyNamespace.MyClass”不足以检索必要的类型对象。如果没有程序集名称，您只能从 mscorlib 程序集和当前程序集 (http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx) 中获取类型。

# java - 有没有比 netty 更好的套接字框架？

> ID：13423564
> 
> 赞同：2
> 
> 时间：2012-11-16T20:00:11.517
> 
> 标签：java, sockets, netty

就像标题说的我需要知道它！我看到 netty 在性能上相当不错，但想知道它现在是否最好。问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:13:27.813

我会考虑使用[Apache-Mina](http://mina.apache.org/)作为广泛使用的替代方案。例如，我们在[oVirt](http://www.ovirt.org)开源项目中使用它
在主机注册过程中在虚拟化管理器 Java EE 应用程序和运行虚拟机的主机之间建立 SSH 连接，并验证与主机的连接性（通过 ssh 尝试）。
此外，
我过去曾使用过[JBoss-Remoting](http://www.jboss.org/jbossremoting)，
它可以为您提供基于 TCP 的协议（例如 RMI、HTTP 等）的抽象。
我用它从一个用于视频处理的管理应用程序构建了一个通信层， 我相信还有更多的选择，这真的取决于你的需求。
我用它从一个用于视频处理的管理应用程序和一个负责获取视频内容进行处理的独立 J2SE 应用程序

# c# - 集合中的重复键处理

> ID：13423567
> 
> 赞同：1
> 
> 时间：2012-11-16T20:00:28.943
> 
> 标签：c#, asp.net, .net, vb.net, collections

我有一个 microsoft visual basic 集合（在命名空间中`Microsoft.VisualBasic`） - 它使用 Microsoft.VisualBasic.Dll 库。

```
private Collection myCollection; 
```

当我向它添加值时，我收到以下错误：

> 添加失败，无法插入重复键

我该如何处理？我需要通过所有的身份证。例如，如果有一组 ID（例如 10、11、12、13、10），如果代码 10 重复，则此行失败：

```
myCollection.Add(myIDs.ID);  // this code throws exception 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T20:04:32.910

[http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.collection.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.collection.aspx)

添加之前，请检查集合是否已包含密钥。

```
if(!myCollection.Contains(myIDs.ID))
    myCollection.Add(myIDs.ID); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:20:16.507

如果您想要重复项，我认为您的意思是“我需要传递所有 ID”，您可能想要使用 List 甚至更好的 List(of Integer) 而不是 Collection。

```
List<int>  IntList = new List<int>;
           IntList.Add(MyIds.ID); 
```

# php - 了解 CakePHP 中的参数

> ID：13423568
> 
> 赞同：0
> 
> 时间：2012-11-16T20:00:31.010
> 
> 标签：php, cakephp

我一直在用链接在 CakePHP 中进行试验，并注意到有时你只是传递参数，有时传递带有前缀名称的参数。两个链接有什么区别：

```
$this->Html->link('Edit', array('controller'=>'users','action'=>'edit', $user['User']['id']));

$this->Html->link('Edit', array('controller'=>'users','action'=>'edit', 'id'=> $user['User']['id'])); 
```

由于路由功能，他们创建的 URL 在很大程度上无关紧要，但在第一个示例中，我直接在控制器方法中访问 id，例如：

```
public function edit( $id ) 
```

但是对于命名参数，我必须使用路由器物理传递它！

任何人都可以对此有所了解吗？有什么区别以及何时使用...

**另外值得注意的是，在 CakePHP 3.0 中，他们删除了看起来很奇怪的命名参数，因为两个链接仍然可以工作......对此有什么想法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:17:41.053

您不必通过路由器传递命名参数。他们只是最终在

```
$this->request->named[...] // or
$this->request['named'][...]; // or
$this->request->params['named'][...] 
```

它们将被删除以支持查询字符串参数：“？foo = bar＆...”，然后将（就像已经！）通过

```
$this->request->query('foo'); // >= 2.3
$this->request->query['foo']; // <= 2.2 
```

ETC

通过也将始终可通过

```
$this->request->pass[...]; // or
$this->request['pass'][...]; // or
$this->request->params['pass'][...]; 
```

但是你可能已经发现阅读[http://book.cakephp.org/2.0/en/controllers/request-response.html](http://book.cakephp.org/2.0/en/controllers/request-response.html)

传递一次和命名/查询之间的主要区别在于后者更具可交换性，而传递一次由于它们直接访问

```
public function xyz($one, $two, $three) 
```

然后更深入地集成，应该用于传递的独特信息。命名/查询的没有特定的顺序，更像是分页和其他流畅的信息。

对我来说，传递的参数实际上改变了网站（自己的规范链接等），而其他人不这样做，并且“规范链接”返回到没有任何命名/查询参数的网站（以避免分页等重复内容）。

# javascript - 从 plupload 队列中删除文件？

> ID：13423572
> 
> 赞同：5
> 
> 时间：2012-11-16T20:00:50.053
> 
> 标签：javascript, ajax, file-upload, plupload

我正在尝试限制可以通过 plupload 上传的文件扩展名。

因为过滤器不能与 HTML5 运行时一起正常工作，所以我不能使用它们。因此我将以下代码绑定到`FilesAdded`事件

```
var extensionArray = ['pdf', 'doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx'];
uploader.bind('FilesAdded', function (up, files) {
    var invalid = 0;
    for (var i in files) {
        var extension = files[i].name
                                .substr((files[i].name.lastIndexOf('.') + 1))
                                .toLowerCase();

        if (extension == '' || -1 === $.inArray(extension, extensionArray)) {
            uploader.splice(i, 1); //also tried uploader.removeFile(files[i])
            invalid++;
            continue;
        }
        //dom manipulation to add file occurs here
    }
}); 
```

但是，虽然这停止了对任何无效文件的 dom 操作，但它似乎并没有真正从队列中删除该项目，因为当我启动上传时，它们都被发送了！

HTML5 和 Flash 运行时都会发生这种情况。我还没有测试过其他的。

绑定到`FilesRemoved`事件，它永远不会被触发！但是在它输出到控制台`console.log('Invalid files detected');`之前插入`uploader.splice(...`，所以该行被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:32:41.170

短版：调用函数**后**需要绑定`filesAdded`事件。**`init()`**

 **我调试的第一步是[从 github](https://github.com/moxiecode/plupload) ^(18 Nov 2012)获取未压缩版本。一旦我有了它，我就可以追踪这个问题。

所以主要问题似乎`removeFile()`是从来没有调用过，但是为什么呢？

`removeFile()`被定义为：

```
removeFile: function (file) {
    var i;

    for (i = files.length - 1; i >= 0; i--) {
        if (files[i].id === file.id) {
            return this.splice(i, 1)[0];
        }
    }
} 
```

好的，很简单，这会遍历 files 数组，如果有一个文件具有匹配的 ID，那么我们调用 splice 函数。

那么，拼接是什么样子的呢？

`splice()`被定义为：

```
splice:function (start, length) {
    var removed;

    // Splice and trigger events
    removed = files.splice(start === undef ? 0 : start, length === undef ? files.length : length);

    this.trigger("FilesRemoved", removed);
    this.trigger("QueueChanged");

    return removed;
} 
```

对，这就是`FilesRemoved`应该触发事件的地方，那为什么不是呢？

回到`removeFile()`函数中，如前所述，它仅**在找到匹配的 id**时才调用 splice 。

因此，下一步是确定是否调用了 removeFile 函数。

插入`console.log('removeFile called', files);`第一行给了我们输出： `removeFile called []`

嗯，一个空数组！

好吧，看起来我们绑定到`FilesAdded`事件正在停止它的通常行为，没问题。让我们添加`uploader.files.push(file)`到我们的`FilesAdded`绑定中。你瞧。当我们点击开始时，只会发送正确的文件。

它正在工作......但不完全是。
我在那里有几个额外的绑定，只是为了调试目的，其中一个是 on `QueueChanged`。每次发生更改时，这都会记录队列中的文件数量。

我注意到的是队列中的文件数量实际上并没有反映出队列中有文件被删除。

所以，很快`console.log(uploader.files.length)`，这证实了这里还有其他事情发生。

下一步是查看添加文件的默认操作。

看着我注意到开发人员也决定绑定到事件，在 init 函数中执行此操作。从我的角度来看，这是一个奇怪的选择。但这是他们的选择。

因此，查看它们的绑定内部，它们也`files.push(file)`意味着我们正在获取所有文件 + 数组中正确文件的副本。

注意到绑定发生在`init()`, 函数中，我`uploader.files.push(file)`从绑定中删除了 ，将`init()`调用移至`FilesAdded`绑定之前。现在一切正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-05T10:58:42.617

```
uploader=newplupload.Uploader({
//-----
});

uploader.bind('FilesAdded',function(up,files)
{
//----
up.refresh();//RepositionFlash/Silverlight
});

uploader.bind('QueueChanged',function(up,files){

//#doc-filelist is the id of dive, which shows the Queue
$('#doc-filelist').html('');

$.each(uploader.files,function(i,file){
$('#doc-filelist').append(
'<div id="'+file.id+'">'+
file.name+'('+plupload.formatSize(file.size)+')<b></b>'+
'<spanclass="remove_file"data-file="'+i+'">X</span>'+
'</div>');
});

if(uploader.files.length==0){
 // #uploadfiles button for start upload
$('#uploadfiles').addClass('disabled');
}

});

 uploader.bind('UploadComplete', function (up, file) {
    up.splice();
    up.refresh();

}); 

$('.relevant-document').on('click','.remove_file',function(e){

uploader.splice($(this).attr('data-file'),1);

uploader.refresh();
}); 
```**

# iphone - 后台任务运行时未调用 iOS applicationWillEnterForeground 和黑屏

> ID：13423576
> 
> 赞同：2
> 
> 时间：2012-11-16T20:01:00.250
> 
> 标签：iphone, objective-c, ios

当用户暂停我的应用程序时，我正在使用后台任务来完成一些操作。这工作正常，但我只是注意到，如果用户在后台任务完成之前重新激活应用程序，屏幕将保持黑色并且 applicationWillEnterForeground: 永远不会被调用。

一旦后台任务完成，一切都会再次正常并调用 applicationWillEnterForeground，但是有没有办法让应用程序在任务运行时重新激活？

我所能找到的就是让后台任务不断检查剩余时间，并注意当应用程序重新激活时这变得非常高。然后它可以自行结束并出现应用程序，但这仍然意味着应用程序黑屏半秒左右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:01:08.883

快速提问。你在使用 beginBackgroundTaskWithExpirationHandler 吗？

您是否正在异步运行实际工作？如this answer所示？ [目标 c - 正确使用 beginBackgroundTaskWithExpirationHandler](https://stackoverflow.com/questions/10319643/objective-c-proper-use-of-beginbackgroundtaskwithexpirationhandler)

如果没有，您应该在 a-sychornously 上运行您长时间运行的工作，否则它将作为您的主 RunLoop 的一部分执行。这确实会阻止您的应用程序重绘和响应，直到长时间运行的任务完成。

# security - BAN 逻辑 - 获取消息的新鲜度

> ID：13423577
> 
> 赞同：1
> 
> 时间：2012-11-16T20:01:05.180
> 
> 标签：security, logic, network-protocols

关于 BAN 逻辑的快速问题。

假设我推导出 A 相信 B 说 {Kr}Ka

我已经知道新鲜（Ka）。

那么我可以得出结论，作为新鲜（Ka）那么 {Kr}Ka 也是新鲜的。

简而言之，我的问题是：如果我有一条由新鲜密钥加密的消息，我可以断定整个消息都是新鲜的吗？

谢谢你的帮助。

# java - 在 for 循环中遗漏了一个数字？（爪哇）

> ID：13423579
> 
> 赞同：0
> 
> 时间：2012-11-16T20:01:12.053
> 
> 标签：java

对，在我开始之前：这是一个硬件问题。

我们必须打印出：-20, -15, -10, -5, 5, 10, 15, 20

```
for(i = -20; i<25; i += 5)
    {
        System.out.println(i);
    } 
```

我已经让它输出所有数字，但是，我们不允许输出 0。

这个问题把我难住了。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:04:34.650

所以在编程中有条件语句。在 java 中，这个关键字是`if`. 这些语句仅在它们检查的条件为真时执行。

在您的情况下，您有一个条件，“我想打印除零以外的所有数字”。你可以把它变成一个 if 语句。为此，您将您的声明转换为“只要数字不为零，就打印出来”之类的内容。所以一旦你达到了这个，你可以写：

`if (i != 0) System.out.println(i);`

所以每次你通过循环时，条件都会检查是否`i`有任何不同于零的数字。如果是打印语句将执行。当它为零时，它不会做任何事情，因为我们放置的语句不会评估为真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:03:07.173

```
for(i = -20; i<25; i += 5)
    {
     if(i != 0)
        System.out.println(i);
    } 
```

# jquery - Jquery插入html字符串而不是DOM节点

> ID：13423582
> 
> 赞同：0
> 
> 时间：2012-11-16T20:01:13.467
> 
> 标签：jquery, string, dom

我有一些嵌套列表，我希望能够插入上一级元素：

```
<ul>
<li>Item 1
<ul>
<li class="selecteditem">Item 1.1</li>
<li>Item 1.2</li>
<li>Item 1.3</li>
</ul>
</li>
<li>Item 2</li>
</ul>
<!-- language: lang-js -->
//I try to do it as follows:
$('li.selecteditem').after('</ul></li><ul>"... 
```

但是 after() 方法只允许插入 DOM 节点，所以所有关闭的标签 "" 都被忽略了。有没有办法在我想要的地方准确地注入这个 html 字符串？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:13:45.853

你在寻找这样的东西吗？

```
$('.selecteditem').append('<li>Item 1.4</li>');​ 
```

如果您使用`.append()`将 html 插入某个元素，则将 html 保留在其中。

[示例小提琴](http://jsfiddle.net/eddiarnoldo/xJDAt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:09:19.527

我知道您现在需要什么，但是 DOM 操作只能在给定 DOM 节点或可以转换为 DOM 节点的有效标记的情况下发生。你可以做的是这样的事情，虽然这是一个非常老套的解决方案：

```
var html = $('ul').html().replace('<li class="selecteditem">Item 1.1</li>','<li class="selecteditem">Item 1.1</li></ul></li><ul>...');
$('ul').html(html); 
```

# ruby-on-rails - 我想使用 Railsnstaller 如果我已经安装了 Git，我是否需要做一些不同的事情？

> ID：13423586
> 
> 赞同：-4
> 
> 时间：2012-11-16T20:01:36.243
> 
> 标签：ruby-on-rails, git

我下载了 railsinstaller，它会询问我的 Git 姓名和地址。我已经安装了 git。填写此信息会搞砸我的 Git，还是会识别出我已经有 Git 连接？如果我已经安装了 Git，我是否需要做任何不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:00:01.593

也许您可以只复制文件中的信息`~/.gitconfig`？

# hibernate - Primefaces延迟加载数据表中没有数据

> ID：13423587
> 
> 赞同：7
> 
> 时间：2012-11-16T20:01:36.477
> 
> 标签：hibernate, datatable, primefaces, lazy-loading

我正在尝试在我的 primefaces 数据表设置中实现延迟加载。目前，这在没有延迟加载实现的情况下工作，但是在实现延迟加载后我在数据表中没有数据。但是，我可以在我的 LoadData 方法中打印我的列表，以验证数据是否正在加载到我的列表中，但是一旦我的 LazyModel 返回并尝试加载数据表，似乎就会出现问题。这可能只是我忽略的一些简单的事情。任何帮助是极大的赞赏！

这是我的 ScreenshotListProducer 类代码：

```
 @ManagedBean
    @RequestScoped
    public class ScreenshotListProducer implements Serializable  {
       private static final long serialVersionUID = 1L;
       @Inject
       private EntityManager em;

       private List<Screenshot> screenshots;

       private LazyDataModel<Screenshot> lazyModel = null;

       private int pageSize = 5;

       public void setPageSize(int pageSize) {
           this.pageSize = pageSize;
       }

       public int getPageSize() {
           return pageSize;
       }

       @Produces
       @Named
       public List<Screenshot> getScreenshots() {
          System.out.println("************* getting screenshots list **************");
          return screenshots;
       }

       @PostConstruct
       public void LoadData() {
            lazyModel = new LazyDataModel<Screenshot>() {
                private static final long serialVersionUID = 1L;

                    @Override
                    public List<Screenshot> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters) {      
                    int start = first;
                    int end = first + pageSize;

                    try {
                        CriteriaBuilder cb = em.getCriteriaBuilder();
                        CriteriaQuery<Screenshot> criteria = cb.createQuery(Screenshot.class);
                        Root<Screenshot> screenshot = criteria.from(Screenshot.class);
                        criteria.select(screenshot).orderBy(cb.asc(screenshot.get("time")));

                        TypedQuery<Screenshot> s = em.createQuery(criteria);
                        s.setMaxResults(end - start);
                        s.setFirstResult(start);

                        screenshots = s.getResultList();
                        System.out.println("************* lazy screenshot list created **************");
                        for (Screenshot lazylist : screenshots) {
                          System.out.println("id numbers in lazy list: " + lazylist.getId());
                        }
                    } catch (NullPointerException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    return screenshots;
                  }
            };
       }

   public LazyDataModel<Screenshot> getLazyModel() {
        return lazyModel;
    } 
```

这是我的截图类：

```
@Entity
@XmlRootElement
@Table(name="Test2012", uniqueConstraints = @UniqueConstraint(columnNames = "id"))
public class Screenshot implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Column(name = "id", columnDefinition="INT")
    private Long id;

    private Timestamp time;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Timestamp getTime() {
        return time;
    }

    public void setTime(Timestamp time) {
        this.time = time;
    }   
} 
```

这是我的 xhtml 代码：

```
 <p:dataTable id="table1" var="scrshot" rowKey="#{scrshot.id}" value="#{screenshotListProducer.lazyModel}" paginator="true" rows="7" paginatorPosition="bottom" 
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                 rowsPerPageTemplate="7,20,50,100" widgetVar="dataTable" currentPageReportTemplate="(Number of Records: {totalRecords})"
                 emptyMessage="No screenshot data found with given criteria" lazy="true" scrollable="true" draggableColumns="true" scrollHeight="217" style="width: 100%;">  
          <f:facet name="header">  
            <p:outputPanel>  
                <h:outputText value="Search all fields: "/>  
                <p:inputText id="globalFilter" onkeyup="dataTable.filter()"/>  
            </p:outputPanel>  
          </f:facet> 
          <p:column selectionMode="multiple"/>  
          <p:column id="time" headerText="Time" sortBy="#{scrshot.time}" filterBy="#{scrshot.time}" filterMatchMode="startsWith">  
            <h:outputText value="#{scrshot.time}"/>  
          </p:column>   
          <p:column id="id" headerText="ID" sortBy="#{scrshot.id}" filterBy="#{scrshot.id}" filterOptions="#{scrshot.id}" filterMatchMode="exact">  
            <h:outputText value="#{scrshot.id}"/>  
          </p:column>  
    </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T07:19:10.987

Well in the case of lazy loader you will have to set total count of you records like "this.setRowCount(total_records_that_are_there);" in your "load" method. It is necessary for the lazy loader to determine how much pages there will be so that the next and previous buttons on data table can be determined i.e (Enable/disable). Like [0 is start] and [total/rowsize] is the total number of pages however you fetch using the load method with (first and pagezie => skip and limit);

# php - WordPress 上较早/以前的帖子与类别

> ID：13423588
> 
> 赞同：0
> 
> 时间：2012-11-16T20:01:37.457
> 
> 标签：php, wordpress

当仅在页面上显示 1 个类别的帖子时，我在让我的旧/新帖子在 Wordpress 上工作时遇到了一些重大问题。

在我定义一个类别之前它工作得非常好，但现在我的客户想要一个页面上的一个类别，另一个页面上的另一个类别。

我正在使用的代码粘贴在下面。如果您想要临时登录，我可以为您设置.. 过去 2 小时这让我发疯了！

```
<?php $my_query = new WP_Query($querystring . 'cat=3&posts_per_page=8');
  while ($my_query->have_posts()) : $my_query->the_post();
  $do_not_duplicate = $post->ID; ?>

<?php /* Start the Loop */ ?>

                <?php get_template_part( 'content', get_post_format() ); ?>

        <div class="post"  id="post-<?php the_ID(); ?>">     
                    <h2 class="date"><?php the_time('F j, Y') ?></h2></div>

            <div class="entry-content">
                <?php the_content('Read the rest of this entry'); ?>
                <?php wp_link_pages('<p><strong>Pages:</strong> ', '</p>', 'number'); ?>

                                </div>

        <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:40:52.967

用这个更正的版本替换您的代码。您必须使用 query_posts 来处理 $querystring，而不是 WP_Query（因为它不是新的，它使用的是同一个，用其他参数补充它的查询字符串）：

```
<?php query_posts($querystring . 'cat=-123&posts_per_page=8');
if ( have_posts() ) while ( have_posts() ) : the_post();
$do_not_duplicate = $post->ID; ?>

<?php /* Start the Loop */ ?>

            <?php get_template_part( 'content' ); ?>

    <div class="post"  id="post-<?php the_ID(); ?>">     
                <h2 class="date"><?php the_time('F j, Y') ?></h2></div>

        <div class="entry-content">
            <?php the_content('Read the rest of this entry'); ?>
            <?php wp_link_pages('<p><strong>Pages:</strong> ', '</p>', 'number'); ?>

                            </div>

    <?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:27:09.883

谢谢你的帮助。我已经设法使用 WP Posts Filter 插件让它工作。不完美，但一种解决方法可以满足我的需要。

# mercurial - 关闭名称中带有冒号“：”的分支

> ID：13423589
> 
> 赞同：2
> 
> 时间：2012-11-16T20:01:38.113
> 
> 标签：mercurial

我有一个名称中包含冒号 (':') 的分支。我怎样才能关闭它？

我无法完全更新它（目录中的文件在“hg up”之后会更新，尽管我收到一条错误消息“abort: ':' cannot be used in a name”；并且“hg summary”显示正确修订号和标签，但以前的分支名称）。“hg ci --close-branch”以“abort：只能关闭分支头”退出。

我可以通过具有正确名称的变更集以这种方式重新提交它，然后使用克隆或剥离修剪旧的变更集，但我想知道是否有另一种解决方案。

UPD 我已经使用了解决方法，但仍然想知道一个简单的解决方案，因为其他人可能会觉得它有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:07:49.757

您的问题不清楚，但我能够创建一个名称中带有冒号的命名分支，通过修订号而不是名称对其进行更新，然后将其关闭：

```
C:\temp>hg branches
blah:blah                      2:32fbac773905
default                        1:f132a6d0ce30

C:\temp>hg glog --template "{rev} {branch} {desc}\r\n"
o  2 blah:blah file3
|
| @  1 default file2
|/
o  0 default file1

C:\temp>hg update 2
1 files updated, 0 files merged, 1 files removed, 0 files unresolved

C:\temp>hg ci --close-branch -m closed

C:\temp>hg glog --template "{rev} {branch} {desc}\r\n"
@  3 blah:blah closed
|
o  2 blah:blah file3
|
| o  1 default file2
|/
o  0 default file1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:55:46.167

Mercurial 的文档在这一点上有点误导：分支名称中的冒号是可以接受的，但是当您尝试使用该名称时，它会被误解为修订范围。为了防止 hg 被解析`blah:blah`为一个范围，你可以把它写成`"branch('blah:blah')"`. 例如：

```
hg log -r "branch('blah: blah')" 
```

以上适用于相对较新的 mercurial 版本。听起来您还有其他与版本相关的问题，但请尝试一下。

# javascript - Ember Bindings：将属性绑定到其子属性

> ID：13423591
> 
> 赞同：1
> 
> 时间：2012-11-16T20:01:40.483
> 
> 标签：javascript, ember.js

我有一个有两个 childViews 的 Ember.View.ParentView。其中之一是 ContainerView。ParentView 的另一个子视图需要访问 ContainerView 的子视图。

在 ContainerView 中，我尝试过使用：

```
 this.get('parentView').set('foo', this.get('childViews') ) 
```

希望这会将 ParentView 中的属性设置为 childView 视图的数组。但是，在ParentView的第二个childView中，调用：

```
 foo = this.get('parentView').get('foo') 
```

返回一个类数组而不是实例。所以我现在正在尝试使用绑定。如何创建属性与类子属性的绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:41:12.707

使用该`viewName`属性在父实例中设置 childViews 实例的名称（请参阅[此处](https://github.com/emberjs/ember.js/pull/212)的相关提交）：

```
App.MyParentView = Ember.View.extend({

  containerViewChilds: 'fooContainer.childViews',

  aContainerView: Ember.ContainerView.extend({
    // ...
  }),

  anotherView: Ember.View.extend({
    containerViewChildsBinding: 'parentView.containerViewChilds'
    // ...
  })
}); 
```

`App.MyParentView`模板：

```
{{view view.aContainerView viewName="fooContainer"}}

{{view view.anotherView}} 
```

# eclipse - Tomcat 7 中的 Eclipse 4.2（Juno）“无法使用所选类型创建服务器”

> ID：13423593
> 
> 赞同：54
> 
> 时间：2012-11-16T20:01:46.117
> 
> 标签：eclipse, tomcat, tomcat7, ubuntu-12.04, eclipse-juno

我已经安装了：

*   日食朱诺
*   java-6-openjdk-i386（在 Eclipse 中选择为默认 JRE）
*   java-7-openjdk-i386

当我尝试在 Eclipse 中添加新服务器 Tomcat7 时，我收到此消息

**'无法使用所选类型创建服务器'**

我无法继续。添加Tomcat6服务器没问题。

我读了这个[问题](https://stackoverflow.com/questions/8025841/eclipse-3-7-indigo-tomcat7-cannot-create-a-server-using-the-selected-typ)，但它并没有为我解决

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-11-17T00:21:58.560

1\. 要修复错误**“无法使用所选类型创建服务器”，请**运行以下命令：

```
cd ~/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/    
rm org.eclipse.jst.server.tomcat.core.prefs    
rm org.eclipse.wst.server.core.prefs 
```

2\. 一旦你这样做，另一个错误

**'无法在 /usr/share/tomcat7/conf 加载 Tomcat 服务器配置。配置可能损坏或不完整 /usr/share/tomcat7/conf/catalina.policy（没有这样的文件或目录）'**

因此，要解决此问题，请运行以下命令：

```
cd /usr/share/tomcat7
sudo ln -s /var/lib/tomcat7/conf conf
sudo ln -s /etc/tomcat7/policy.d/03catalina.policy conf/catalina.policy
sudo ln -s /var/log/tomcat7 log
sudo chmod -R 777 /usr/share/tomcat7/conf 
```

3\. 重启服务器和 Eclipse

4\. 添加新服务器

*   选择服务器类别下的服务器；
*   创建**新服务器向导**；
*   选择**Apache / Tomcat v7.0 Server**并按 Next；
*   进入**Tomcat安装目录****/usr/share/tomcat7**，点击Next；
***   在“Available”下的左窗格中选择您的项目，然后按 Add> 将其移动到**Configured**下的右窗格；按**完成**；**

 **Eclipse 需要启动服务器，为此，首先它必须停止在后台运行的服务器。

> sudo 服务 tomcat7 停止

如果不需要开机自动启动，我们可以使用以下命令

> sudo update-rc.d tomcat7 禁用

如果在服务器启动期间，您收到如下警告：

```
WARNING: Problem with directory [/usr/share/tomcat7/common/classes], exists: [false], isDirectory: [false], canRead: [false]
WARNING: Problem with directory [/usr/share/tomcat7/common], exists: [false], isDirectory: [false], canRead: [false]
WARNING: Problem with directory [/usr/share/tomcat7/server/classes], exists: [false], isDirectory: [false], canRead: [false]
WARNING: Problem with directory [/usr/share/tomcat7/server], exists: [false], isDirectory: [false], canRead: [false]
WARNING: Problem with directory [/usr/share/tomcat7/shared/classes], exists: [false], isDirectory: [false], canRead: [false]
WARNING: Problem with directory [/usr/share/tomcat7/shared], exists: [false], isDirectory: [false], canRead: [false] 
```

您可能还需要运行以下命令：

```
cd /usr/share/tomcat7
sudo ln -s /var/lib/tomcat7/common common
sudo ln -s /var/lib/tomcat7/server server
sudo ln -s /var/lib/tomcat7/shared shared 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-10T16:49:37.170

这是一个可能发生的已知问题，要解决此错误，请尝试以下一项或全部操作：

去

> Window–>Preferences–>Server–>Runtime Environments

并修复服务器损坏的路径/链接。

或者重命名

`org.eclipse.jst.server.tomcat.core.prefs`至 `org.eclipse.jst.server.tomcat.core.prefs.bak`

（或者您可以删除此文件）。这个文件可以在`\workspace\.metadata\.plugins\org.eclipse.core.runtime\.settings`

重命名

`org.eclipse.wst.server.core.prefs to org.eclipse.wst.server.core.prefs.bak`（或删除文件）。

该文件也可以在与上述相同的位置找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-17T22:14:44.260

我让 Eclipse 与 Tomcat 一起工作了几天，然后突然出现错误“无法加载 tomcat 服务器配置可能已损坏或不完整”——对我来说，修复是在 Windows > 首选项 > 服务器 > 运行时环境下删除 Tomcat——然后重新添加相同的服务器，它再次开始工作而没有错误 -

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T15:13:16.880

Windows > 首选项 > 服务器 > 运行时环境 > 添加

选择您的目标服务器位置

重试

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-02T12:27:30.443

导航到 windows->Preferences->RuntimeEnvironments，它会显示你现有的 tomcate 配置。点击编辑按钮，检查 tomcat 安装目录是否正确。如果 tomcat 安装目录在错误的位置，你会得到这种错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-30T07:08:24.143

Hiii .. 我在 Eclipse JUNO 版本的 Windows 7 操作系统中遇到了同样的问题。并从谷歌找到了解决方案。

当您第一次创建服务器时，它将按照正常步骤完成。但由于某种原因，我们需要删除服务器。大多数情况下，我们通过右键单击服务器并单击删除来从 Eclipse 中的服务器选项卡中删除。此时服务器已从服务器选项卡中删除，但不会从工作区中永久删除。因此，当我们重新创建具有相同版本的服务器时，我们无法在选择服务器版本后单击下一步按钮。

所以这里是完整的屏幕截图指南，如何解决此类问题。

[http://codeofjava.blogspot.in/2014/08/solution-of-getting-error-when-re.html](http://codeofjava.blogspot.in/2014/08/solution-of-getting-error-when-re.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-02T05:50:11.670

我在debian中遇到了同样的问题。下面的链接帮助我 [http://crunchify.com/eclipse-how-to-fix-installing-apache-tomcat-server-issue-blank-server-name-field/](http://crunchify.com/eclipse-how-to-fix-installing-apache-tomcat-server-issue-blank-server-name-field/)

注意：debian 上 eclipse 的默认工作区目录是 /home/userNameFolder/workspace

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-28T03:11:13.050

我有解决办法，只要改正用户权限，如Ubuntu命令：sudo chown -R yourname:yourgroup /opt/apache-tomcat-7.0.55，然后重启eclipse，就OK了。**

# asp.net - 禁用菜单项时，如何将 VS Profiler 2012 附加到 ASP.NET 解决方案？

> ID：13423594
> 
> 赞同：4
> 
> 时间：2012-11-16T20:01:50.870
> 
> 标签：asp.net, visual-studio, profiling

我已按照说明尝试使用 Visual Studio 2012 Profiler 分析我的 ASP.NET 解决方案：http: [//msdn.microsoft.com/en-us/library/ms182384.aspx](http://msdn.microsoft.com/en-us/library/ms182384.aspx)

但是，当我打开右键菜单时，“附加/分离”菜单项被禁用。

我需要做什么才能启用此功能？

![VS Profiler 性能资源管理器右键菜单](../Images/74b9f9fd541813b714ebfb18e91f6cb7.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T19:29:32.723

显然，在使用检测时，您不能将 VS Profiler 附加到进程，因为二进制文件必须由分析器修改然后启动。

但是，您可以使用命令行： [http ://social.msdn.microsoft.com/forums/en-US/vstsprofiler/thread/f2f291da-8e83-4fa4-b4cb-a184965bfe16](http://social.msdn.microsoft.com/forums/en-US/vstsprofiler/thread/f2f291da-8e83-4fa4-b4cb-a184965bfe16)

# actionscript - 错误 1046：找不到类型或不是编译时常量

> ID：13423596
> 
> 赞同：2
> 
> 时间：2012-11-16T20:02:00.617
> 
> 标签：actionscript, compiler-errors, flash-cs6, compile-time-constant

我正在尝试在 CS6 中为我正在上课的课程制作交互式 Flash 视频。我和教授简单地谈过这个问题，他也无法弄清楚这个问题。奇怪的是它说错误在第 2 行和第 3 行。当我删除这些行上的代码时，它**仍然**说错误在这些行上。看看我的 AS 并告诉我你的想法。

```
import flash.events.MouseEvent;
import flash.display.MovieClip;
import flash.display.Stage;
import flash.events.*;

public class Essay1 extends MovieClip{

public function Essay1() {

    mc_Gas.visible = false;
    mc_Drive.visible = false;
    mc_Outside.visible = false;
    mc_DriveZoom.visible = false;
    mc_Dash.visible = false;

    mc_Start.btn_Start.addEventListener(MouseEvent.MOUSE_DOWN, gotoWindow);
    mc_Drive.btn_Drive.addEventListener(MouseEvent.MOUSE_DOWN, gotoZoom);
}
public function gotoWindow(MouseEvent):void{
    mc_Start.gotoAndPlay(2);
}
public function gotoZoom(MouseEvent):void{
    mc_DriveZoom.visible = true;
    mc_DriveZoom.mc_Car3.mc_HeadDown.gotoAndPlay(2);
}

} 
```

这是错误消息：

F:\WDMD201\Essay\Essay1.as，第 2 行 1046：找不到类型或不是编译时常量：mc_Dash。

F:\WDMD201\Essay\Essay1.as，第 2 行 1046：找不到类型或不是编译时常量：mc_Drive。

F:\WDMD201\Essay\Essay1.as，第 3 行 1046：找不到类型或不是编译时常量：mc_Gas。

F:\WDMD201\Essay\Essay1.as，第 3 行 1046：找不到类型或不是编译时常量：mc_Start。

F:\WDMD201\Essay\Essay1.as，第 4 行 1046：找不到类型或不是编译时常量：mc_Outside。

F:\WDMD201\Essay\Essay1.as，第 5 行 1046：找不到类型或不是编译时常量：mc_DriveZoom。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:31:46.507

问题是您正在尝试访问未知属性。要访问它们，您需要在舞台上声明与实例名称匹配的属性。将所有属性`mc_Dash`、`mc_Drive`等声明为成员变量：

```
public class Essay1 extends MovieClip {

    public var mc_Dash:MovieClip;

    public function Essay1 {
    .... 
```

# php - 将 Composer 与 PHP 全局包含路径一起使用

> ID：13423599
> 
> 赞同：3
> 
> 时间：2012-11-16T20:02:07.703
> 
> 标签：php, autoload, composer-php

在与 Composer 会面之前，我使用的是 Zend 的自动加载器。

我有一个库（我们称之为 LibEx），它位于 PHP 的全局包含路径 ( `c:\xampp\php\pear`) 中。它必须在全局包含文件夹中，因为很多项目都使用它。因此，如果我更改 LibEx 中的功能，每个项目都可以访问最新版本。

如果我想将我的代码推送到服务器，我只需将我的 LibEx 文件`library`夹复制到 Zend 可自动加载的文件夹中。在 Composer 之前，我使用这种方法：

```
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/library'),
    realpath(APPLICATION_PATH . '/library/Zend'),
    get_include_path(),
)));

include "Zend/Loader/Autoloader.php";
Zend_Loader_Autoloader::getInstance()->registerNamespace('LibEx'); 
```

现在我爱上了 Composer。这真是太棒了，我也可以用它自动加载我的项目特定库：

```
"autoload": {
    "psr-0": {"MyLib": "src/"}
} 
```

但是如何自动加载不在 DocumentRoot 或 WebRoot 中的 LibEx 文件夹？即使它在服务器中并复制到`src`文件夹下，如何仍然自动加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:16:23.823

你试过这个吗？

```
"autoload": {
    "psr-0": {"MyLib": "c:\somewhere\project\src"}
} 
```

在 Linux 上软链接文件夹将是一个可能的解决方案，我不知道 Windows 现在是否支持它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-07T16:08:27.010

你可以加 ：

```
"config": {
    "use-include-path": true
}, 
```

对于您的 composer.json，这将考虑到全局 php 配置中定义的路径，并且您不必对完整路径进行硬编码。

# c# - 在 Visual Studio 中从 WPF 项目引用网站

> ID：13423606
> 
> 赞同：0
> 
> 时间：2012-11-16T20:02:20.013
> 
> 标签：c#, visual-studio, visual-studio-2012, hybrid

我的解决方案有两个项目：一个指向包含 Web 文件（html、css、js 等）的本地文件夹的网站。和一个 C# WPF 应用程序。我想让我的 html 文件成为我的 WPF 项目中的资源，但我想不出一种方法来做到这一点。

本质上，我不想在任何地方复制我的 html 文件，但我想在我的 C# 项目中引用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:09:48.217

右键单击您的项目并选择“添加现有项目”，在您的文件类型下拉列表中选择“所有文件”，最后在“添加”下拉列表中选择“添加为链接”。

# php - 修改 我的价值 PHP 中的 XML 元素

> ID：13423612
> 
> 赞同：0
> 
> 时间：2012-11-16T20:02:48.977
> 
> 标签：php, xml, dom

我正在尝试使用 PHP 以编程方式修改一些 XML 元素。他们有形式

```
<string name="myname1">myvalue1</string>
<string name="myname2">myvalue2</string> 
```

等等。我无法控制这个 XML 文件的传入结构。有没有在 PHP 中编辑这些的好方法？我尝试使用 DOMDocument，但我没有太多运气让它工作，因为元素没有指定 ID，并且按标签名称进行搜索会给我所有字符串，而不是我想要的字符串。感谢您的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:06:47.203

DOMXPath 很好地解决了这个问题：

```
$dom = new DOMDocument();
$dom->loadXML($input);
$xpath = new DOMXPath($dom);
$string = $xpath->query("//string[@name='myname1']")->item(0);
if( $string) {
    // do something
} 
```

# android - 大屏幕和超大屏幕的布局对我的项目没有影响

> ID：13423619
> 
> 赞同：0
> 
> 时间：2012-11-16T20:03:18.107
> 
> 标签：android, layout, size, screen

我正在尝试调整手机和平板电脑（大和 Xlarge）的布局，我正在使用布局的最佳实践配置，如[http://developer.android.com](http://developer.android.com)（res/layout-large/my_layout.xml 和res/layout-xlarge/my_layout.xml ）但是当我在不同的虚拟设备上测试它时，我发现大型和 xlarge 平板电脑（文本看起来很小）没有任何影响，即使我对大型和 xlarge 布局使用更大的尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:06:31.157

不再推荐使用`large`and`xlarge`限定符——您应该改用最小宽度限定符。对于 7 英寸平板电脑，您可以使用`sw600dp`，对于 10 英寸平板电脑，您可以使用`sw720dp`。

# python - 使用 Python re.match 提取字符串

> ID：13423624
> 
> 赞同：25
> 
> 时间：2012-11-16T20:03:39.980
> 
> 标签：python, regex, python-2.7

```
import re
str="x8f8dL:s://www.qqq.zzz/iziv8ds8f8.dafidsao.dsfsi"

str2=re.match("[a-zA-Z]*//([a-zA-Z]*)",str)
print str2.group()

current result=> error
expected => wwwqqqzzz 
```

我想提取字符串`wwwqqqzzz`。我该怎么做？

可能有很多点，比如：

```
"whatever..s#$@.d.:af//wwww.xxx.yn.zsdfsd.asfds.f.ds.fsd.whatever/123.dfiid" 
```

在这种情况下，我基本上想要以 and 为界的`//`东西`/`。我该如何做到这一点？

还有一个问题：

```
import re
str="xxx.yyy.xxx:80"

m = re.search(r"([^:]*)", str)
str2=m.group(0)
print str2
str2=m.group(1)
print str2 
```

好像`m.group(0)`和`m.group(1)`一样。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-16T20:07:36.753

`match`尝试匹配**整个**字符串。改为使用`search`。然后，以下模式将符合您的要求：

```
m = re.search(r"//([^/]*)", str)
print m.group(1) 
```

基本上，我们正在寻找`/`，然后使用尽可能多的非斜线字符。那些非斜线字符将被捕获在第 1 组中。

事实上，有一种稍微高级一点的技术可以做到这一点，但不需要捕获（这通常很耗时）。它使用所谓的[lookbehind](http://www.regular-expressions.info/lookaround.html)：

```
m = re.search(r"(?<=//)[^/]*", str)
print m.group() 
```

Lookarounds 不包括在实际匹配中，因此是所需的结果。

这（或任何其他合理的正则表达式解决方案）不会`.`立即删除 s。但这可以在第二步中轻松完成：

```
m = re.search(r"(?<=//)[^/]*", str)
host = m.group()
cleanedHost = host.replace(".", "") 
```

这甚至不需要正则表达式。

当然，如果你想删除除字母和数字之外的所有内容（例如`www.regular-expressions.info`变成`wwwregularexpressionsinfo`），那么你最好使用 regex 版本`replace`：

```
cleanedHost = re.sub(r"[^a-zA-Z0-9]+", "", host) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T20:19:41.890

```
print re.sub(r"[.]","",re.search(r"(?<=//).*?(?=/)",str).group(0)) 
```

请参阅**[此演示](http://ideone.com/PwykWS)**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-14T15:59:57.257

```
output=re.findall("(?<=//)\w+.*(?=/)",str)

final=re.sub(r"[^a-zA-Z0-9]+", "", output [0])

print final 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-17T13:06:50.307

```
import re
str_1="x8f8dL:s://www.qqq.zzz/iziv8ds8f8.dafidsao.dsfsi"

str2=re.match(".*//([a-zA-Z.]*)",str_1)
print(str2.group(1).replace('.','')) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-01-16T10:58:16.990

```
import re
str="x8f8dL:s://www.qqq.zzz/iziv8ds8f8.dafidsao.dsfsi"
re.findall('//([a-z.]*)', str) 
```

# javascript - Javascript 下拉菜单

> ID：13423633
> 
> 赞同：0
> 
> 时间：2012-11-16T20:04:21.383
> 
> 标签：javascript, html, css, drop-down-menu

我无法让我的下拉菜单正常工作。我试图让一堆项目显示在此选项卡下，但我无法让 showtab 功能工作。我试图给出`tabList`equal to`currentTab`的基础 UL - 但它在那里出错，然后我无法为其设置 z-index 以使其显示。这是一个[JSFiddle](http://jsfiddle.net/VNzmL/)：

**HTML**

```
<ul class="tabMenu">
         <li class="tab" style="background-color: rgb(221, 221, 255)"><a href="#">Computers</a>
            <ul style="z-index: 1">
               <li><a href="#">Desktop</a></li>
               <li><a href="#">Notebooks</a></li>
               <li><a href="#">Tablets</a></li>
               <li><a href="#">Remanufactured</a></li>
            </ul>
         </li>
         <li class="tab"><a href="#">Electronics</a>
            <ul>
               <li><a href="#">Televisions</a></li>
               <li><a href="#">Cameras</a></li>
               <li><a href="#">Camcorders</a></li>
               <li><a href="#">MP3 Players</a></li>
               <li><a href="#">Game Stations</a></li>
               <li><a href="#">PDAs</a></li>
            </ul>
         </li>
         <li class="tab"><a href="#">Accessories</a>
            <ul>
               <li><a href="#">Monitors</a></li>
               <li><a href="#">Printers</a></li>
               <li><a href="#">Memory</a></li>
               <li><a href="#">Drives</a></li>
               <li><a href="#">Networking</a></li>
               <li><a href="#">Mobile</a></li>
            </ul>
         </li>
         <li class="tab"><a href="#">Software</a>
            <ul>
               <li><a href="#">Utilities</a></li>
               <li><a href="#">Business</a></li>
               <li><a href="#">Games</a></li>
               <li><a href="#">Multimedia</a></li>
               <li><a href="#">Operating Systems</a></li>
            </ul>
         </li>
         <li class="tab"><a href="#">Services</a>
            <ul>
               <li><a href="#">Tech Support</a></li>
               <li><a href="#">Downloads</a></li>
               <li><a href="#">Drivers</a></li>
               <li><a href="#">Documents</a></li>
               <li><a href="#">Customer Service</a></li>
               <li><a href="#">Contacts</a></li>
            </ul>
         </li>
         <li class="tab"><a href="#">Store</a>
            <ul>
               <li><a href="#">Shopping Cart</a></li>
               <li><a href="#">Checkout</a></li>
               <li><a href="#">Your Account</a></li>
               <li><a href="#">Shipping</a></li>
               <li><a href="#">Specials</a></li>
            </ul>
         </li>
      </ul>​ 
```

**CSS**

```
ul                  {list-style-type: none}
ul a                {color: black; text-decoration: none}
.tabMenu            {position: absolute; top: 33px; left: 90px; width: 800px}
.tabMenu > li       {width: 100px; height: 20px; text-align: center;
                     float: left; margin-right: 5px}
.tabMenu > li > a   {display: block; margin: 0px; padding: 2px 3px;
                     border-left: 2px solid rgb(221, 221, 221); 
                     border-top: 2px solid rgb(155, 155, 155);
                     border-right: 4px solid rgb(102, 102, 102);
                     border-bottom: 1px solid white}
.tabMenu > li > a:hover {color: black; background-color: rgb(221, 221, 255)}

.tabMenu > li > ul  {position: absolute; top: 20px; left: 0px; width: 710px;
                     padding-top: 5px;
                     background-color: rgb(221, 221, 255);
                     border-left: 2px solid rgb(221, 221, 221);
                     border-right: 4px solid rgb(102, 102, 102);
                     border-bottom: 1px solid black}

.tabMenu > li > ul > li {float: left; width: 16%; height: 25px}
.tabMenu > li > ul > li > a {display: block; margin: 0px; padding: 2px 3px;
                             font-size: 0.9em}
.tabMenu > li > ul > li > a:hover {color: blue}​ 
```

**Javascript**

```
var currentTab = null;
var maxZ = 1;
window.onload = setTabs;

function setTabs(){
    var menuTabs = new Array();
    var allElems = document.getElementsByTagName("*");

    for(var i = 0; i < allElems.length; i++){
        if(allElems[i].className == "tab") menuTabs.push(allElems[i]);
    }

    for(var i = 0; i < menuTabs.length; i++){
        menuTabs[i].onclick = showTab;
    }

    currentTab = menuTabs[0];
}

function showTab(){
    var tabList = document.currentTab.ul;
    currentTab.style.bgcolor = "white";
    currentTab.style.color = "rgb(221,21,255)";
    maxZ++;
    tabList.style.zIndex = maxZ;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:07:15.160

我认为这在一定程度上是一个 jsfiddle 问题——window.onload 根本不会触发我，即使我选择使用事件侦听器也是如此。我没有试图找出原因，而是转移到了[jsbin](http://jsbin.com/ohicuw/1)上的不同环境，这并没有给我带来麻烦。

仍然不起作用，但错误变得更加明显 - currentTab 不是文档的属性。你把它变成了一个全局变量，所以这不是问题。此外，您实际上没有任何方法来获取被单击的元素 - 不过，这可以通过单击事件上发生的事件来获取。

所以，我们最终得到了 showTab 的这段代码：

```
function showTab(e) {
    currentTab.style.background = "white";
    currentTab.style.color = "rgb(221,21,255)";
    var newTab = e.target.parentNode;
    var tabList = newTab.getElementsByTagName("ul")[0];
    newTab.style.background = "#ddf";

    maxZ++;
    tabList.style.zIndex = maxZ;
    currentTab = newTab;
} 
```

另外，虽然我知道人们在这里可能会有点过于亲 jQuery，但在这样的地方确实非常好——它使简单的 DOM 操作变得更加容易。如果你以前没有用过很多，你可以看看它。

# php - 在PHP中动态计算数组中元素的频率

> ID：13423644
> 
> 赞同：-1
> 
> 时间：2012-11-16T20:04:43.640
> 
> 标签：php, python

我有一个数组说：

```
$array = array(1, 5, 2, 3, 3, 4, 5, 1) 
```

我想转换此数组并将值作为键并将其频率作为值输出应该如下所示：

```
$array = array (
         "1" => 2,
         "2" => 1,
         "3" => 2,
         "4" => 1,
         "5" => 2
) 
```

我知道如何在 python 中做到这一点。但我必须用 PHP 来做。我已经在 python 中使用以下代码实现了这个：python 代码：

```
d = {}
for j in tweets: // tweet is a array of integers as given above $array
d[j] = d.get(j, 0) + 1 // This will make a dictionary with the values in the array as key and its frequency as value of the dictionary .. Get() dynamically increase the value 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:06:12.790

```
$newArray = array_count_values( $array ); 
```

在这里查看它的实际操作：[http ://codepad.org/n35PZ26I](http://codepad.org/n35PZ26I)

* * *

然后按其键对其进行排序，请使用`ksort`：

```
ksort( $newArray ); 
```

在这里查看它的实际操作：[http ://codepad.org/ZN0zHn4S](http://codepad.org/ZN0zHn4S)

# asp.net-mvc - 安装 MVC 4 后 Razor 视图中没有 Intellisense - 尝试了各种解决方案

> ID：13423645
> 
> 赞同：4
> 
> 时间：2012-11-16T20:04:46.897
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, intellisense

我最近在 VS2010 上安装了 MVC 4，但我似乎偶尔会失去智能感知。前几天我再次尝试安装 MVC 4，但仍然没有成功。这是我当前项目下的 Web.config：

```
<appSettings>
    <add key="webpages:Version" value="2.0.0.0" /> //I've also tried setting it to 1.0.0.0
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

这是我的 Views 文件夹下的 Web.config：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc,     Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
</system.web.webPages.razor> 
```

**尝试的解决方案：**

*   重新安装 MVC 4
*   更改`<add key="webpages:Version" value="2.0.0.0" />`为`<add key="webpages:Version" value="1.0.0.0" />`
*   改`<add key="webpages:Version" value="1.0.0.0" />`回`<add key="webpages:Version" value="2.0.0.0" />`
*   更改上述设置后重新启动 VS 的新实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:17:51.967

删除除 11.0 文件夹之外的任何内容，它应该可以解决它。%AppData%\Roaming\Microsoft\VisualStudio\

# jquery - 使用 Jquery 和 Jinja2 在每个元素的循环内提供 onclick 事件

> ID：13423646
> 
> 赞同：5
> 
> 时间：2012-11-16T20:04:47.573
> 
> 标签：jquery, jinja2

所以首先我对一般编程很陌生，而对 Jinja2 的定义很新。所以我将python与GAE一起用于服务器端的东西。我基本上是从网络上获取一些数据，然后对其进行解析并将其显示在网页上。为了正确显示它，我使用 jinja2 循环遍历不同的元素。

```
{% for new in news %}
    <div>{{new}}</div>
    <button id = "button"></button>
    <div id ="description"> {{new.description}}</div>
{% endfor %} 
```

描述部分在用户点击之前是隐藏的

```
$(#button).each(function(){
    $(this).click(function(){
      $(description).toggle();
    });

}); 
```

这个 html 是一个单独的页面，它被 Ajaxed 到我的主 html 页面中。所以基本上我不知道如何选择循环中的每个元素来显示单独的描述。在 Jquery 中使用 .each() 函数似乎是一个不错的起点，但它不能正常工作。有没有办法在每次循环时将 div id 更改为不同的东西，比如向它添加一个数字或让每个 id 与众不同？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T23:31:00.750

我正在做类似的事情。

您现在可能知道，在 Jinja2 中设置在循环之外的变量不能在循环内操作。Jinja2 的范围有时有点令人困惑，但我怀疑这是故意试图将太多逻辑排除在模板之外。

无论如何，我的`id`每个新闻条目都有一个价值。

```
{% for entry in news %}
    <div>{{entry.subject}}</div>
    <button id="button_{{entry.id}}" class="clickme">Click Me!</button>
    <div id="description_button_{{entry.id}}">{{entry.description}}</div>
{% endfor %} 
```

请记住，HTML id 应该是唯一的。对于 jQuery，类似：

```
$('.button').each(function(){
    $(this).click(function(){
        $('#description_'+$(this).attr('id')).toggle();
    });
}); 
```

它的作用是获取按钮的 ID 值并将其附加到 description 的 ID 选择器中`div`。

编辑，这是一个工作示例：http: [//jsfiddle.net/VQKee/](http://jsfiddle.net/VQKee/)

# marker - 在谷歌可视化地理图表上动态添加标记

> ID：13423651
> 
> 赞同：2
> 
> 时间：2012-11-16T20:05:10.320
> 
> 标签：marker, google-visualization

我正在使用 google geochart 在地图上放置标记。我希望能够在地图上动态添加和删除标记，而不必每次都重新绘制地图。有没有办法做到这一点？

谢谢 这是我的代码：

```
<div align="center">
  <div id="chart_div">
    <div id="loadingDiv"></div>
  </div>
</div>

<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type="text/javascript">
  //Load the Google Maps stuff
  google.load('visualization', '1', {'packages': ['geochart']});
  google.setOnLoadCallback(drawRegionsMap);

  //Load the Google Maps stuff
  google.load('visualization', '1', {'packages': ['geochart']});
  google.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {
    var data = new google.visualization.DataTable();
    data.addColumn('number', 'latitude');
    data.addColumn('number', 'longitude');
    data.addColumn('string', 'Location');
    data.addColumn('number', 'Size');

    //While iterating thru clients flag if user is in list, If not flagged add user to map.
    //Firefox doesn't seem to be including user in list
    var inList = false;
    for (i in clientInfo){ client = clientInfo[i];

      //Because new clients are creating with this connection, we don't want to add them to map.
      //Their clientInfo won't have an ipAddress. Only want to map one client per session
      if (client.ipAddress){
        //Flag if user is in client list
        if(client.ipAddress == userInfo.ipAddress){
          inList = true;
        }
        data.addRow([parseFloat(client.latitude), parseFloat(client.longitude), client.cityName, 4]);
      }
    }

    //If user is not in client list add him now.
    if(!inList){
      if(userInfo.ipAddress){
      data.addRow([parseFloat(userInfo.latitude), parseFloat(userInfo.longitude), userInfo.cityName, 4]);
      }
    }

    var options = {
      displayMode: 'markers',
      colorAxis: {colors: ['red', 'blue']},
      sizeAxis: {minValue: 0, maxValue: 5, minSize: 1, maxSize: 4},
      enableRegionInteractivity: true,
      legend: 'none'
    };

    var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    google.visualization.events.addListener(chart, 'regionClick', function (eventData) {
      alert('You clicked: ' + eventData.region);
    });
    chart.draw(data, options);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:52:37.067

您可以创建[仪表板](https://developers.google.com/chart/interactive/docs/gallery/controls#overview)并将控件绑定到它 - 例如[CategoryFilter](https://developers.google.com/chart/interactive/docs/gallery/controls#categoryfilter)。当控件的过滤器被修改时，图表将自动更新。

但是，这是有限的，并且考虑到您的用例，您可能必须自己调用绘图函数。

# javascript - 单击按钮，播放声音，但按钮消失

> ID：13423655
> 
> 赞同：1
> 
> 时间：2012-11-16T20:05:30.380
> 
> 标签：javascript, javascript-events

就像我在标题中所说的那样。我想要播放不同的声音，但由于某种原因，按钮上的文字在声音播放后消失了。按钮仍然有效。我需要按钮保持完整。

当按钮被点击时，还有没有让页面重新加载？

这是我的代码：

javascript:

```
function playSound() {
    var sounds = new Array(
    "battle.mp3"
);

$("button").html("<embed src=\""+sounds[Math.floor(Math.random()*(sounds.length+1))]+"\" hidden=\"true\" autostart=\"true\" />"); 
```

HTML

```
<div id="element">
<button onclick="javascript:playSound()">Try it</button>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:11:32.333

我相信该按钮正在消失，因为您正在用嵌入代码替换它的 HTML。您是否尝试过创建不同的元素（例如 div）并改为定位该元素？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:12:03.703

您似乎正在替换`playSound`函数中按钮元素内的 HTML 内容（请参见[此处](http://api.jquery.com/html/#html2)）。尝试将其嵌入到其他元素中，例如占位符`div`。

对于不重新加载页面，`false`请从您的`playSound()`函数返回

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T20:17:25.627

就像其他人说的那样，您正在更换元素。尝试将javascript更改为：

```
function playSound() {
    var sounds = new Array("battle.mp3");

    $("#soundDiv").html("<embed src=\""+sounds[Math.floor(Math.random()*(sounds.length+1))]+"\" hidden=\"true\" autostart=\"true\" />");

    return false;
} 
```

和 html 到：

```
<div id="element">
    <div id="soundDiv"></div>
    <button onclick="javascript:playSound()">Try it</button>
</div> 
```

# jquery - 需要帮助编写验证方法来检查是否允许视频 URL 以及网站上的视频是否使用 oEmbed 实际存在

> ID：13423658
> 
> 赞同：2
> 
> 时间：2012-11-16T20:05:54.527
> 
> 标签：jquery, validation, jquery-validate, oembed, remote-validation

我很难尝试添加验证器方法来检查URL*是否*被允许（来自 YouTube 或 Vimeo 使用正则表达式字符串），*以及*视频是否确实存在于网站上并且不是 404。

到目前为止，我的 URL 验证器与 URL 正确匹配，并尝试使用 oEmbed 测试远程验证：

```
var vidRegExp = /https?:\/\/(?:[0-9A-Z\-]+\.)?(vimeo\.com\/(clip\:)?(\d+).*|player\.vimeo\.com\/video\/?(\d+).*|(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w]*(?:['"][^<>]*>|<\/a>))[?=&+%\w\-]*)/i;

jQuery.validator.addMethod("checkVideoURL", (function(val, elem) {
  if (val.length === 0) {
    return true;
  }
  var match = val.match(vidRegExp);
  var settings = $('form').validate().settings;
  if (match) {
    $.extend(true, settings, {
      rules: {
        item_provider_url: {
          remote: {
            url: "http://vimeo.com/api/oembed.json",
            dataType: "jsonp",
            data: {
              format: "jsonp",
              url: function() {
                return $("#item_provider_url").val;
              }
            }
          }
        }
      },
      messages: {
        item_provider_url: {
          remote: "No video exists at this URL"
        }
      }
    });
  } else {
    $.validator.messages.checkVideoURL = "The URL you put in is not a valid YouTube or Vimeo URL. Please check your link.";
    return false;
  }
}), "Invalid URL."); 
```

我一直在 StackOverflow 上寻找正确的方法来寻找正确的方法，但似乎找不到任何有帮助的东西。上面不起作用的是远程验证部分。（例如 404/死链接：http: [//vimeo.com/54634709](http://vimeo.com/54634709)）

此外，由于显然 YouTube 和 Vimeo 有不同的 URL 来检查，我需要知道如何检查匹配的 URL 并为每个不同的站点返回不同的远程 URL。另一个大优点是扩展检查以查看视频是否允许嵌入。

上面的正则表达式字符串适用于所有这些 URL：

```
http://vimeo.com/50406912
https://vimeo.com/50406912
http://www.vimeo.com/50406912
https://www.vimeo.com/50406912
http://soundcloud.com/forss/flickermood
http://www.youtube.com/v/0zM3nApSvMg?fs=1&amp;hl=en_US&amp;rel=0
http://www.youtube.com/embed/0zM3nApSvMg?rel=0
http://www.youtube.com/watch?v=0zM3nApSvMg&feature=feedrec_grec_index
http://www.youtube.com/watch?v=0zM3nApSvMg
http://youtu.be/0zM3nApSvMg
http://www.youtube.com/watch?v=0zM3nApSvMg#t=0m10s
http://www.youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o
https://www.youtube.com/watch?v=0zM3nApSvMg#t=0m10s
https://www.youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o
http://vimeo.com/36888803
http://vimeo.com/36888803?title=0
http://player.vimeo.com/video/36888803
http://player.vimeo.com/video/36888803?title=0&amp;byline=0&amp;portrait=0
http://youtu.be/i4fjHzCXg6c
http://youtu.be/i4fjHzCXg6c?t=9s
http://www.youtube.com/watch?v=i4fjHzCXg6c
https://www.youtube.com/watch?v=i4fjHzCXg6c&feature=g-logo&t=28s 
```

任何和所有的帮助将不胜感激！

# android - 设置 android:menuCategory 属性有什么作用？

> ID：13423664
> 
> 赞同：9
> 
> 时间：2012-11-16T20:06:29.270
> 
> 标签：android, xml, menu

在Android菜单资源中， android:menuCategory 属性是否存在有什么区别？

我阅读了文档并创建了小测试代码，但我无法确定该属性和常量的含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:35:13.170

通过使用 android:menuCategory 标签，您可以指定菜单项组的类别并定义项的优先级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-09T13:00:37.210

我不知道确切的用例，`menuCategory`但我在有 HomeFragment 的项目中使用了它，我可以从它转到 LoginFragment。在 LoginFragment 中，我有一个用于转到 SettingsFragment 的菜单（在右上角）。

当我进入设置并返回时，它返回主页而不是登录页面。但我希望它回到以前的位置（登录页面）。因此我使用了menuCategory，它起作用了

```
<item
    android:menuCategory="secondary"
    android:id="@+id/settingsFragment"
    android:title="Settings"
    app:showAsAction="never" /> 
```

# ruby - Redmine - 子项目列表顺序

> ID：13423667
> 
> 赞同：2
> 
> 时间：2012-11-16T20:06:37.127
> 
> 标签：ruby, redmine

我想更改 /projects 页面上显示的子项目的顺序。目前，我的主要项目列表按“created_on”降序排列，每个项目列表按“id”升序排列。我想要做的是也按“created_on”日期对子项目进行排序。我快速浏览了 Redmine 源代码的模型和控制器，但我对 Ruby 的了解有点低，没有它很难工作。我的猜测是我需要在 /app/models/project.rb 中进行更改，但不确定它必须是哪种更改。这是Redmine的1.4.4版本。

非常需要任何建议:)

谢谢

# jquery - 访问 rcarousel 中不可见的项目

> ID：13423670
> 
> 赞同：0
> 
> 时间：2012-11-16T20:06:47.813
> 
> 标签：jquery

我有一个带有 3 个可见项目的 rcarousel，当我单击一个项目时，会从所有项目中删除一个类并添加到被单击的项目中。但是，DOM 中唯一的项目是可见的 3 个。因此，如果具有该类的项不可见，并且用户单击另一项，并且您滚动回上一项，则选择了两项。如何访问不可见的项目以从这些项目中删除课程？

这是HTML：

```
<div id="seitemvideocarouselcontainer">

    <div id="ui-carousel-prev"></div>

<div class="seitemvideocarousel">

        <div class="carousel-item">
            <div class="videothumbnail">
                <img class="seitemvideocarousel-90 selected" src="/images/library/videothumb/363303782_200.jpg" onclick="selectVideo(90)" title="Econom Recharge" alt="Econom Recharge">
            </div>
            <div class="videotitle">
                Econom Recharge 
            </div>
        </div>

        <div class="carousel-item">
            <div class="videothumbnail">
                <img class="seitemvideocarousel-84 " src="/images/library/videothumb/363159759_200.jpg" onclick="selectVideo(84)" title="Nalini Antares 12" alt="Nalini Antares 12">
            </div>
            <div class="videotitle">
                Nalini Antares 12 
            </div>
        </div>

        <div class="carousel-item">
            <div class="videothumbnail">
                <img class="seitemvideocarousel-2420 " src="/images/library/videothumb/5g8RYa1Aams.jpg" onclick="selectVideo(2420)" title="Mucka Blucka b" alt="Mucka Blucka b">
            </div>
            <div class="videotitle">
                Mucka Blucka b 
            </div>
        </div>

        <div class="carousel-item">
            <div class="videothumbnail">
                <img class="seitemvideocarousel-2438 " src="/images/library/videothumb/TTqpEJh03fI.jpg" onclick="selectVideo(2438)" title="I Uploaded This Video!" alt="I Uploaded This Video!">
            </div>
            <div class="videotitle">
                I Uploaded This Video! 
            </div>
        </div>

</div>

    <div id="ui-carousel-next"></div> 
```

这是 rcarousel 调用：

```
 $('.seitemvideocarousel').rcarousel({
        orientation: 'vertical'
    ,   visible: 3
    ,   width: 150
    ,   height: 120
    ,   start: onCarouselPageLoaded
    ,   pageLoaded: onCarouselPageLoaded
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:00:51.607

```
$('.event').on('click', function(e) {
     // Change this to selector or leave to remove class
     $(this).removeClass("class-to-remove');
}); 
```

不完全确定您在寻找什么，但这是一个基本的点击事件 + 删除类功能。

# android - “推广”链接下没有“Android Feed”

> ID：13423671
> 
> 赞同：0
> 
> 时间：2012-11-16T20:06:54.807
> 
> 标签：android, facebook

在为移动应用广告系列设置的广告系列中，说明说左侧菜单的“推广”链接下应该有一个“iOS Feed”和一个“Android Feed”。我已经在我的 Android 和 iOS 应用程序中实现了 SDK，并将两者都添加到了应用程序设置中，但我只在推广下看到了“iOS 源”。为什么我没有看到“Android Feed”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:53:52.417

您必须将“Facebook 登录”标记为已启用（即使您不需要在您的应用中实现它），以便在推广链接下显示“Android Feed”。我们正在努力尽快消除此问题，但目前只需将“Facebook 登录”标记为启用。

# web-services - 从 wsdl 创建 pojo 服务接口

> ID：13423672
> 
> 赞同：0
> 
> 时间：2012-11-16T20:06:58.973
> 
> 标签：web-services, cxf, axis2, jibx

我需要从 wsdl 创建一个 POJO 服务接口。我试过Axis和CXF。CXF 使用 jax-ws 注释生成接口。Axis ，我相信对 Web 服务客户端有不同的策略，我找不到服务接口。

让我知道您之前是否尝试过任何此类要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:41:11.980

生活，

我注意到您添加了一个 jibx 标签。您可能想查看 JiBX CXF Web 服务示例：

SOAP：http: [//jibx.sourceforge.net/maven-jibx-plugin/webservice.html](http://jibx.sourceforge.net/maven-jibx-plugin/webservice.html)

休息：http: [//jibx.sourceforge.net/maven-jibx-plugin/rest.html](http://jibx.sourceforge.net/maven-jibx-plugin/rest.html)

干杯!

大学教师

# c - 什么是不确定值？

> ID：13423673
> 
> 赞同：16
> 
> 时间：2012-11-16T20:06:59.310
> 
> 标签：c

我在 c99 标准中找到了这个

```
3.17.2
1 indeterminate value
either an unspecified value or a trap representation 
```

上述声明对我来说不是很清楚。谁能解释这是什么以及它的优缺点是什么？

一些例子将受到高度赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T20:11:16.013

两者的区别（不确定值和陷阱表示）是基本的。在一种情况下，您没有已知价值。在另一个你有一个已知的无效值。

我可以收集的不确定值的最简单示例：

```
int a;
int b = a; 
```

没有与 相关的确定“价值”的概念`a`。它有*一些东西*（因为它正在占用内存），但它所拥有的“什么”没有定义，因此是不确定的。总体而言，这个概念听起来很简单：除非已经*确定*某物是什么，否则它不能用于任何具有确定性结果的评估（如果有帮助，请考虑 r 值）。

实际值取决于语言、编译器和内存管理策略。例如，在 C 的大多数实现中，未初始化的范围变量或由调用 malloc 返回的指针指向的内存将包含之前碰巧存储在该地址的任何值。另一方面，大多数脚本语言会将变量初始化为某个默认值（0、“”等）。

关于陷阱表示，它本质上是在与基础正式定义有关的允许值的限制域之外的任何值。下面是一个希望不会混淆的示例。：

```
enum FooBar { foo=0, bar=1 };
enum FooBar fb = (enum FooBar)2; 
```

通常，它是位于底层存储表示允许的空间内的任何位模式（在可能是 的枚举中`int`）但不被视为其正式定义的受限域的有效“值”。可以在[此答案](https://stackoverflow.com/questions/6725809/trap-representation)中找到有关陷阱表示及其根源的**出色**描述。以上只是一个*非常*简单的已知无效表示可能出现的代表。实际上，它在硬件中用于检测触发无效状态的值。我认为它们是“恐慌”值。同样，上面的*代码*只是理想主义地展示了“价值”的概念，这不是“有效的”，但实际上是已知的。

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T20:09:05.910

> 除非另有说明，否则静态对象在程序启动时包含零或空指针值。仅当显式指定初始值时才会初始化自动和动态分配的对象；否则，它们最初具有不确定的值（通常，存储中恰好存在任何位模式，甚至可能不代表该类型的有效值）。

参考：[维基百科](http://en.wikipedia.org/wiki/C_%28programming_language%29)**

# c# - 如何在 Windows Phone 中以编程方式启动 Skype？

> ID：13423675
> 
> 赞同：4
> 
> 时间：2012-11-16T20:07:01.513
> 
> 标签：c#, windows-phone-7

直接说：假设我已经在我的操作系统中安装了**Skype**，我如何**从我的应用程序**启动一个拨号器，并将给定的电话号码作为参数从 Windows Phone 传递？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T22:11:30.553

截至 2014 年 10 月，2.24 版本支持 Skype Uri，您现在可以使用`skype://12345678?call`as uri（`1234678`作为电话号码）在 Windows Phone 8.1 上启动 Skype

有关语法的一些文档，请参阅[http://msdn.microsoft.com/en-us/library/office/dn745878(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/dn745878(v=office.15).aspx)。

*（免责声明：我在 Skype for Windows Phone 团队工作）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:08:46.513

我不相信你可以。使用 Windows Phone，您可以使用启动器来启动一组预定义的操作系统安装应用程序，例如电子邮件、地图等。

您可以获得的最接近的是使用电话呼叫任务。

检查： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff769550 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769550(v=vs.105).aspx)

希望有帮助。应用间通信还没有真正实现。

// 杰德

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-25T00:34:37.943

[WinJS 的Skype API](http://msdn.microsoft.com/EN-US/library/office/dn745880(v=office.15).aspx)提供了一些文档。

可悲的是，这些示例是用 JavaScript 编写的。

这是初始语法：

```
await Windows.System.Launcher.LaunchUriAsync(new Uri("skype:")); 
```

呼叫某人看起来像这样：示例：一对一对话

```
await Windows.System.Launcher.LaunchUriAsync(new Uri("skype:skype.test.user.1?call")); 
```

但是，我不知道如何在另一个应用程序中检索 Skype 联系人。这可以通过人员中心应用程序上的联系人来完成。

[在此处](https://www.youtube.com/watch?v=WacVrH9xpYc)查看应用示例。

# c - MPI_Bcast 分段错误

> ID：13423679
> 
> 赞同：3
> 
> 时间：2012-11-16T20:07:09.317
> 
> 标签：c, parallel-processing, mpi

我正在广播一个指向数组的指针

```
MPI_Bcast(&xd_sim_send, Nooflines_Sim, MPI_FLOAT, root, MPI_COMM_WORLD); 
```

从进程 0 并从 0 以外的进程接收此广播

```
MPI_Bcast(&xd_sim_recv, Nooflines_Sim, MPI_FLOAT, root, MPI_COMM_WORLD); 
```

当我尝试读取接收到的值时出现分段错误 11。像这样

```
for(i=0; i<Numlines_Sim; i++)
printf("%f\n",xd_sim_recv[i]);fflush(stdout); 
```

这里有什么问题，你能帮我解决它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:42:00.790

发送指针没有意义，因为该指针在其他并行进程中无效，请改为发送缓冲区：

```
MPI_Bcast(xd_sim_send, Nooflines_Sim, MPI_FLOAT, root, MPI_COMM_WORLD); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T20:53:57.563

如果您想在根进程使用的向量之外的向量中接收数据，那么您应该执行以下操作（伪代码）：

```
if (THIS PROCESS IS ROOT) {
    MPI_Bcast(xd_sim_send, Nooflines_Sim, MPI_FLOAT, root, MPI_COMM_WORLD);
} else {
    MPI_Bcast(xd_sim_recv, Numlines_Sim, MPI_FLOAT, root, MPI_COMM_WORLD);
} 
```

没有`&`, 因为变量`xd_sim_send` `xd_sim_recv`已经是指针，这就是`MPI_Bcast`需要的。

# css - 坚持在此布局上进行媒体查询的最佳方法

> ID：13423681
> 
> 赞同：1
> 
> 时间：2012-11-16T20:07:13.353
> 
> 标签：css, mobile, media-queries

我正在尝试学习响应式设计。我正在建立一个网站，其中一个页面是一个投资组合。我设置了以下如何布置此页面的模型。当然，这是一个非常精简的版本。我似乎无法应用正确的查询，以便这种格式在宽屏桌面、ipad 和手机上看起来没问题。我开始了第一个查询，但它当然不起作用，并且还知道这是否是普通宽屏桌面的最佳尺寸。

任何人都可以让我开始如何将其应用于此页面吗？我将继续学习教程，但需要从这里开始。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<meta name="viewport" content="width=device-width; initial-scale=1.0">
<style type="text/css">
@media screen and (max-width:1080px) {
    #main {
        width: 960px;
    }
}
body {
    background-color: #FFF;
    margin:0;
}

#main {
    width: 1080px;
    margin-right: auto;
    margin-left: auto;
    height: 860px;
    margin-top: 20px;
    margin-bottom: 20px;
}
.box {
    background-color: #CCC;
    height: 200px;
    width: 200px;
    margin-right: 20px;
    float: left;
    margin-bottom: 20px;
}
.box_last {
    background-color: #CCC;
    height: 200px;
    width: 200px;
    float: left;
    margin-bottom:20px;
}
.box_bottom {
    background-color: #CCC;
    height: 200px;
    width: 200px;
    margin-right: 20px;
    float: left;

}
.box_last_bottom {
        background-color: #CCC;
    height: 200px;
    width: 200px;
    float: left;

}
</style>
</head>

<body>
<div id="main">
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box_last"></div>

  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box_last"></div>

  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box_last"></div>

  <div class="box_bottom"></div>
  <div class="box_bottom"></div>
  <div class="box_bottom"></div>
  <div class="box_bottom"></div>
  <div class="box_last_bottom"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:16:22.400

在您当前的代码中，`#main`来自媒体查询块的内容将被覆盖。您必须将媒体查询放在 CSS 的最底部

```
#main {
    width: 1080px;
    ...
}

@media screen and (max-width:1080px) {
    #main {
        width: 960px;
    }

    .box {
        width: 200px;
        ...
    }
} 
```

然后是更小的屏幕

```
@media screen and (max-width: 480px) {
    #main {
        width: 100%;
    }

    .box {
        width: 50%;
        ...
    }
} 
```

# phpstorm - PHPStorm 不索引项目中设置的路径

> ID：13423684
> 
> 赞同：16
> 
> 时间：2012-11-16T20:07:21.577
> 
> 标签：phpstorm

在我为我的新项目提供包含路径后，PHPStorm 不会索引该目录。

我添加了 PHPUnit 目录，但它的类没有自动完成功能。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-06T11:01:37.397

*注意：此解决方案将删除所有项目*的缓存，包括**本地历史记录**。下次打开项目时将重建索引，但本地历史将永远消失。照这样说...

 *然后尝试从菜单中选择`File`> 。`Invalidate Caches / Restart...``Invalidate and Restart`*

# python - 熊猫数据框索引错误：AssertionError：索引和值的长度不匹配

> ID：13423689
> 
> 赞同：2
> 
> 时间：2012-11-16T20:07:37.770
> 
> 标签：python, cloud, dataframe, pandas

我正在尝试在 PiCloud 上运行一些模型模拟并使用 Pandas 处理结果。（PiCloud 基本上是 Amazon 集群的一个接口，我通过它在 Ubuntu 11.04 虚拟环境中运行东西）。

有问题的命令似乎是：

```
fplf_df = pd.DataFrame(fpld, columns = var_name_list, index = sample_names_ordered) 
```

fpld 是一个 dict（61 个键是字符串，值是一个 numpy 数组（长度为 1），其余为浮点数），而 var_name_list 和 sample_names_ordered 是字符串列表或数组。

当我运行包含该命令的脚本时，所有 PiCloud 作业都会因以下错误而终止：

```
Traceback (most recent call last):
 File "/usr/local/picloud/.employee/pimployee/job_util.py", line 119, in process_job
  result = func(*args, **kwargs)
 File "/home/itchy/ecopetrol/ec-working/pecube_scripts/run_eceS1_cloud.py", line 297, in  run_pecube_map
 File "/usr/local/lib/python2.7/dist-packages/pandas/core/frame.py", line 125, in __init__
sdict, columns, index = self._init_dict(data, index, columns, dtype)
 File "/usr/local/lib/python2.7/dist-packages/pandas/core/frame.py", line 176, in _init_dict
v = Series(v, index=index)
 File "/usr/local/lib/python2.7/dist-packages/pandas/core/series.py", line 172, in __new__
subarr.index = index
File "/usr/local/lib/python2.7/dist-packages/pandas/core/series.py", line 193, in _set_index
raise AssertionError('Lengths of index and values did not match!')
AssertionError: Lengths of index and values did not match! 
```

问题在于，当我在我的机器上运行它时它运行良好，当我通过 ssh 进入 Amazon 服务器上的虚拟环境并使用 IPython 手动创建 DataFrame 时它运行良好。我还尝试通过给出不存在的索引参数或其他任意索引参数来重现该错误，有些是成功的，有些则不是，但没有一个会引发这个特定的错误。在我看来（通过手动测试确认）索引的长度究竟是多少并不重要，因为这些值只组成一行，所以当添加索引时它只会填满，这正是我想要的。

那么究竟是什么导致了这个错误呢？我怀疑问题的根源在于 Pandas，但我认为如果我知道 Pandas 级别可能出了什么问题，我可以弄清楚从我的机器到虚拟环境的通信出了什么问题（或无论真正的问题是什么）。

值得一提的是：我的机器有 pandas 0.9.1rc1（最新的前沿 Ubuntu 12.04 更新，可能是今天早上），亚马逊 env 有 0.9.0（我认为）在 10 月中旬的鸡蛋中。在亚马逊上，来自终端的 IPython 和常规 python 调用似乎正在导入相同版本的 Pandas。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:28:09.210

问题是[PiCloud 的](http://www.picloud.com)默认环境运行的是旧版本的 pandas (0.3.0)，这会导致不兼容。最简单的解决方案是使用 PiCloud 的[Ubuntu Precise Environment](http://blog.picloud.com/2012/10/24/new-base-environment-ubuntu-precise/)，它运行 pandas 0.9.0。

# javascript - Javascript 的行、分支和方法覆盖率？

> ID：13423690
> 
> 赞同：1
> 
> 时间：2012-11-16T20:07:39.220
> 
> 标签：javascript

我们希望收集一些关于我们的 javascript 单元测试覆盖率的分析。我们不仅在寻找行覆盖（例如 JSCover 所做的一切），而且还在寻找分支和方法覆盖。我做了一些小的 google-fu 并没有找到太多我正在寻找的东西。有没有人遇到过处理这三个领域（或工具组合）的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:43:41.613

[JSCover](http://tntim96.github.com/JSCover/)现在支持分支覆盖

# scala - Eclipse / Scala 插件中的“非法循环引用”错误

> ID：13423693
> 
> 赞同：5
> 
> 时间：2012-11-16T20:07:47.420
> 
> 标签：scala

我创建了一个`x`包含源文件的文件夹`package.scala`。该文件包含以下代码：

```
package x

package object y
{
  trait A

  case class B extends A
} 
```

Eclipse 显示编译错误：`illegal cyclic reference involving object y`.

我不太确定这意味着什么。如果我尝试定义一个普通类（删除`case`），错误消息就会消失。另一种解决方案是使用普通对象而不是包对象：

```
package x

object y
{
  trait A

  case class B extends A
} 
```

循环引用在哪里？我怎样才能删除它？据我了解，我无法在包对象中定义特征和案例子类。但我不知道这个限制来自哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T15:39:21.890

正如 PedroFuria 所说，这是一个错误，但在这些情况下查看[与错误相关的问题总是好的。](https://scala-ide-portfolio.assembla.com/spaces/scala-ide/tickets/1000503#/activity/ticket:)具体来说，结论是在 2011 年 9 月：

*在包对象中定义类在 Scala 编译器本身中只工作了一半。您可以通过在正确的目录中定义您的类来解决此问题。我怀疑这将很快得到完全支持。*

所以最好参考这个[相关的问题](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=https://stackoverflow.com/questions/17270003/why-are-classes-inside-scala-package-objects-dispreferred&ei=ax3pUuKoIYSV0QXaxYGACg&usg=AFQjCNFHGiRyw_DiB0kWvZrG54DNsRYH7w&sig2=SM1DiHdUQfWsacFS9csaDw)，它指出很容易替换：

```
package object mypkg {
  class MyClass
} 
```

具有以下内容：

```
package mypkg {
  class MyClass
} 
```

这将适用于 Eclipse / EclipseIDE。

# java - 在不重新启动 GUI 的情况下重新启动/重玩 Java 游戏

> ID：13423696
> 
> 赞同：1
> 
> 时间：2012-11-16T20:08:27.457
> 
> 标签：java, user-interface

我正在尝试为我的 Java 游戏添加重启/重播功能。目前在我的 Game 类（GUI 和游戏被初始化的地方），我有：

```
init() method
Game() object 
```

Game 对象包含整个游戏窗口的 GUI，并包括各种对象（例如实际游戏窗口、计分板、倒数计时器等）。

我想添加一个功能，如果他们单击 GUI 上的重新启动按钮或游戏结束，游戏将重新启动（以及倒计时和计分）。我确实意识到最好重新实例化对象（得分，倒计时），但是一旦实例化它们就是我的 GUI 的一部分

```
i.e. add(scoreboard) 
```

有没有办法重新实例化对象而不必重新实例化我的 GUI？理想情况下，我只想重新实例化对象，而不必为 GUI 重新打开一个全新的 JFrame。如果有人可以为我提供我应该拥有的类和方法（以及它们做什么）的大纲，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:19:45.857

将数据（模型）与 GUI（视图）分离。

举个例子，你的记分牌可能是一个 JTable。JTable 将在视图类中，而 TableModel 将在模型类中。

您对所有 GUI 组件执行相同的操作。对于每个组件，您都有一个模型类中的组件数据模型。

这是我放在一起的秒表 GUI 的模型类。甚至无需查看 GUI，您就应该能够识别构成秒表的所有数据组件。

```
package com.ggl.stopwatch.model;

import java.util.ArrayList;
import java.util.List;

import javax.swing.table.DefaultTableModel;

public class StopwatchModel {

    protected boolean isSplitTime;

    protected long startTime;

    protected long endTime;

    protected DefaultTableModel tableModel;

    protected List<Long> splitTimes;

    protected String[] columnNames = {"", "Increment", "Cumulative"};

    public StopwatchModel() {
        this.splitTimes = new ArrayList<Long>();
        this.isSplitTime = false;
        this.startTime = 0;
        this.endTime = 0;
        setTableModel();
    }

    public void resetTimes() {
        this.splitTimes.clear();
        this.isSplitTime = false;
        this.startTime = 0;
        this.endTime = 0;
    }

    public boolean isSplitTime() {
        return isSplitTime;
    }

    public long getStartTime() {
        return startTime;
    }

    public long getEndTime() {
        return endTime;
    }

    public long getLastSplitTime() {
        int size = splitTimes.size();
        if (size < 1) {
            return getStartTime();
        } else {
            return splitTimes.get(size - 1);
        }
    }

    public long getPenultimateSplitTime() {
        int size = splitTimes.size();
        if (size < 2) {
            return getStartTime();
        } else {
            return splitTimes.get(size - 2);
        }
    }

    public DefaultTableModel getTableModel() {
        return tableModel;
    }

    public int getTableModelRowCount() {
        return tableModel.getRowCount();
    }

    public void clearTableModel() {
        tableModel.setRowCount(0);
    }

    public int addTableModelRow(long startTime, long previousSplitTime, 
            long currentSplitTime, int splitCount) {
        String[] row = new String[3];

        row[0] = "Split " + ++splitCount;
        row[1] = formatTime(previousSplitTime, currentSplitTime, false);
        row[2] = formatTime(startTime, currentSplitTime, false);

        tableModel.addRow(row);

        return splitCount;
    }

    public void setStartTime() {
        if (getStartTime() == 0L) {
            this.startTime = System.currentTimeMillis();
        } else {
            long currentTime = System.currentTimeMillis();
            int size = splitTimes.size();
            if (size > 0) {
                long splitTime = splitTimes.get(size - 1);
                splitTime = splitTime - getEndTime() + currentTime;
                splitTimes.set(size - 1, splitTime);
            }
            this.startTime = currentTime - getEndTime() + getStartTime();
        }
    }

    protected void setTableModel() {
        this.tableModel = new DefaultTableModel();
        this.tableModel.addColumn(columnNames[0]);
        this.tableModel.addColumn(columnNames[1]);
        this.tableModel.addColumn(columnNames[2]);
    }

    public void setSplitTime() {
        this.splitTimes.add(System.currentTimeMillis());
        isSplitTime = true;
    }

    public void setEndTime() {
        Long split = System.currentTimeMillis();
        if (isSplitTime) {
            this.splitTimes.add(split);
        }
        this.endTime = split;
    }

    public String formatTime(long startTime, long time, boolean isTenths) {
        long elapsedTime = time - startTime;

        int seconds = (int) (elapsedTime / 1000L);

        int fraction = (int) (elapsedTime - ((long) seconds * 1000L));
        fraction = (fraction + 5) / 10;
        if (fraction > 99) {
            fraction = 0;
        }
        if (isTenths) {
            fraction = (fraction + 5) / 10;
            if (fraction > 9) {
                fraction = 0;
            }
        }

        int hours = seconds / 3600;
        seconds -= hours * 3600;

        int minutes = seconds / 60;
        seconds -= minutes * 60;

        StringBuilder builder = new StringBuilder();

        builder.append(hours);
        builder.append(":");
        if (minutes < 10) builder.append("0");
        builder.append(minutes);
        builder.append(":");
        if (seconds < 10) builder.append("0");
        builder.append(seconds);
        builder.append(".");
        if ((!isTenths) && (fraction < 10)) builder.append("0");
        builder.append(fraction);

        return builder.toString();
    }

} 
```

分离后，您将初始化方法放入模型类中。

编辑添加：您将模型类的实例传递给您的视图类以生成视图。这是秒表 GUI 的主面板。

```
package com.ggl.stopwatch.view;

import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingConstants;

import com.ggl.stopwatch.model.StopwatchModel;
import com.ggl.stopwatch.thread.StopwatchThread;

public class StopwatchPanel {

    protected static final Insets entryInsets = new Insets(0, 10, 4, 10);
    protected static final Insets spaceInsets = new Insets(10, 10, 4, 10);

    protected JButton resetButton;
    protected JButton startButton;
    protected JButton splitButton;
    protected JButton stopButton;

    protected JLabel timeDisplayLabel;

    protected JPanel mainPanel;
    protected JPanel buttonPanel;
    protected JPanel startPanel;
    protected JPanel stopPanel;

    protected SplitScrollPane splitScrollPane;

    protected StopwatchModel model;

    protected StopwatchThread thread;

    public StopwatchPanel(StopwatchModel model) {
        this.model = model;
        createPartControl();
    }

    protected void createPartControl() {
        splitScrollPane = new SplitScrollPane(model);

        createStartPanel();
        createStopPanel();
        setButtonSizes(resetButton, startButton, splitButton, stopButton);

        mainPanel = new JPanel();
        mainPanel.setLayout(new GridBagLayout());

        int gridy = 0;

        JPanel displayPanel = new JPanel();
        displayPanel.setBorder(BorderFactory.createLineBorder(Color.BLUE, 6));

        timeDisplayLabel = new JLabel(model.formatTime(0L, 0L, true));
        timeDisplayLabel.setHorizontalAlignment(SwingConstants.CENTER);
        Font font = timeDisplayLabel.getFont();
        Font labelFont = font.deriveFont(60.0F);
        timeDisplayLabel.setFont(labelFont);
        timeDisplayLabel.setForeground(Color.BLUE);
        displayPanel.add(timeDisplayLabel);

        addComponent(mainPanel, displayPanel, 0, gridy++, 1, 1, spaceInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        buttonPanel = new JPanel();
        buttonPanel.add(startPanel);
        addComponent(mainPanel, buttonPanel, 0, gridy++, 1, 1, spaceInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        addComponent(mainPanel, splitScrollPane.getSplitScrollPane(), 0, gridy++, 1, 1, spaceInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);
    }

    protected void createStartPanel() {
        startPanel = new JPanel();
        startPanel.setLayout(new FlowLayout());

        resetButton = new JButton("Reset");
        resetButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                model.resetTimes();
                timeDisplayLabel.setText(model.formatTime(0L, 0L, true));
                splitScrollPane.clearPanel();
                mainPanel.repaint();
            }
        });

        startPanel.add(resetButton);

        startButton = new JButton("Start");
        startButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                model.setStartTime();
                thread = new StopwatchThread(StopwatchPanel.this);
                thread.start();
                displayStopPanel();
            }
        });

        startPanel.add(startButton);
    }

    protected void createStopPanel() {
        stopPanel = new JPanel();
        stopPanel.setLayout(new FlowLayout());

        splitButton = new JButton("Split");
        splitButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                model.setSplitTime();
                splitScrollPane.addSplit(model.getStartTime(), 
                        model.getPenultimateSplitTime(), 
                        model.getLastSplitTime());
                splitScrollPane.setMaximum();
                splitScrollPane.repaint();
            }
        });

        stopPanel.add(splitButton);

        stopButton = new JButton("Stop");
        stopButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                model.setEndTime();
                thread.setRunning(false);
                if (model.isSplitTime()) {
                    splitScrollPane.addSplit(model.getStartTime(), 
                            model.getPenultimateSplitTime(), 
                            model.getLastSplitTime());
                    splitScrollPane.setMaximum();
                    splitScrollPane.repaint();
                }
                displayStartPanel();
            }
        });

        stopPanel.add(stopButton);
    }

    protected void addComponent(Container container, Component component,
            int gridx, int gridy, int gridwidth, int gridheight, 
            Insets insets, int anchor, int fill) {
        GridBagConstraints gbc = new GridBagConstraints(gridx, gridy,
                gridwidth, gridheight, 1.0D, 1.0D, anchor, fill, insets, 0, 0);
        container.add(component, gbc);
    }

    protected void displayStopPanel() {
        buttonPanel.remove(startPanel);
        buttonPanel.add(stopPanel);
        buttonPanel.repaint();
    }

    protected void displayStartPanel() {
        buttonPanel.remove(stopPanel);
        buttonPanel.add(startPanel);
        buttonPanel.repaint();
    }

    protected void setButtonSizes(JButton ... buttons) {
        Dimension preferredSize = new Dimension();
        for (JButton button : buttons) {
            Dimension d = button.getPreferredSize();
            preferredSize = setLarger(preferredSize, d);
        }
        for (JButton button : buttons) {
            button.setPreferredSize(preferredSize);
        }
    }

    protected Dimension setLarger(Dimension a, Dimension b) {
        Dimension d = new Dimension();
        d.height = Math.max(a.height, b.height);
        d.width = Math.max(a.width, b.width);
        return d;
    }

    public void setTimeDisplayLabel() {
        this.timeDisplayLabel.setText(model.formatTime(model.getStartTime(), 
                System.currentTimeMillis(), true));
    }

    public JPanel getMainPanel() {
        return mainPanel;
    }

} 
```

# javascript - UIWebView，从服务器加载 HTML，但从 iPhone 注入 Javascript 和 CSS 文件

> ID：13423698
> 
> 赞同：2
> 
> 时间：2012-11-16T20:08:40.327
> 
> 标签：javascript, css, html, uiwebview

我有一个从服务器加载到 UIWebView 的 HTML5 页面。此页面使用一些 Javascript 和 CSS 文件，但我不想从服务器加载它们，因为它们非常大。我想要做的是将 iPhone 包中的 JS 和 CSS 文件作为文件，并在从服务器加载后将它们注入 UIWebView 的 HTML 页面。

这可能吗？

干杯。

# php - PHP 将空属性转换为文本或数字

> ID：13423700
> 
> 赞同：0
> 
> 时间：2012-11-16T20:08:51.963
> 
> 标签：php, xml

我有一个带有属性的 xml 文件

XML 文档

```
<SET name="John" lastname="Steve" city="New York" Country=""/> 
```

这将转换为具有 4 列的 CSV 文件。

CSV 文件

```
Name,LastName,City,Country
John,Steve,New York, 
```

我想从 Country 获取 Empty 内容并转换为像 USA 这样的默认文本

我将使用 str_replace 进行此替换。

问题是我不知道如何获取 Empty 属性，例如 if is empy var_dump。

谢谢

转换文件。

```
$filexml = 'file.xml';
    if (file_exists($filexml)){
        $xml = simplexml_load_file($filexml);
$file = fopen('clients.csv', 'w');
        $header = array('Name', 'LastName', 'City', 'Country');
fputcsv($file, $header, ',', '"');
foreach ($xml->SET as $set){
$item = array();
            $value1 = $set->attributes()->name;
            $value2 = $set->attributes()->lastname;
            $value3 = $set->attributes()->city;
            $value4 = $set->attributes()->Country;

$search_country= array('','10','12')
$replace_country = array('USA','Argentina','Canada')
$item[] = $value1;
$item[] = $value2;
$item[] = $value3;
$item[] = str_replace($search_country, $replace_country, $value4);

fputcsv($file, $item, ',', '"');    
        }
        fclose($file);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:25:36.130

用于`empty`检查值是否为空

```
$value4 = empty($set->attributes()->Country) ? "USA" : $set->attributes()->Country; 
```

# vim - 在 ViM 中，缓冲区 0 是什么？

> ID：13423702
> 
> 赞同：6
> 
> 时间：2012-11-16T20:08:58.763
> 
> 标签：vim, buffer

如果我打开了单个文件 ，则vim 命令`buflisted(0)`并返回 true。`bufexists(0)`

我不明白这一点，因为该`ls`文件的输出显示为缓冲区 1（`buflisted(1)`并且`bufexists(1)`还返回 true）。如果我在缓冲区 0 上尝试任何缓冲区操作，我会收到错误消息`Zero count`。

这似乎是一个特殊的缓冲区，但我找不到任何信息告诉我缓冲区 0 的用途。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:14:41.933

这`0`在 中进行了解释`:help bufname()`。它是当前缓冲区的“备用缓冲区”。

# facebook - 位置标记 facebook 打开图形操作，以便只有该位置的朋友在他们的提要中查看

> ID：13423711
> 
> 赞同：0
> 
> 时间：2012-11-16T20:09:24.053
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

有没有办法标记打开的图形操作以针对某些收件人而不是其他收件人？

例如，如果我的应用程序谈论各个城市的新咖啡店开业，有没有办法将“开业”行动发布到图表上，可能带有位置/坐标，这样只有当地的朋友才能看到？我真的不想向我在伦敦的朋友发送关于波特兰开业的消息。在这些情况下，我如何帮助 Facebook 处理提要相关性？

我注意到打开的图形对象上有一个“地方”属性 - 可以以某种方式使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:02:00.423

今天没有简单的方法可以做到这一点。最接近的方法是为每个发布的操作定义自定义隐私，但您必须手动选择您认为感兴趣的用户。[在https://developers.facebook.com/docs/technical-guides/opengraph/publish-action/](https://developers.facebook.com/docs/technical-guides/opengraph/publish-action/)上查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T07:40:46.957

Facebook刚刚添加了这个功能：[https ://developers.facebook.com/blog/post/2013/06/05/platform-updates--new-open-graph-business-object-type/](https://developers.facebook.com/blog/post/2013/06/05/platform-updates--new-open-graph-business-object-type/)

尽管我还没有看到在提要上使用业务对象与常规对象的效果，但我相信他们的目标是仅向操作发生地附近的人展示这些 OG 操作。

# heroku - Heroku 计划作业返回“找不到命令”，但可以使用 rake

> ID：13423712
> 
> 赞同：5
> 
> 时间：2012-11-16T20:09:33.863
> 
> 标签：heroku, scheduled-tasks, http-get

我有一个 Heroku 计划作业，应该每 10 分钟运行一次。它只是向执行某些操作的控制器的操作发出 HTTP GET 请求。

```
desc "This task is called by the Heroku scheduler add-on"
task :send_notifications => :environment do

   response = HTTParty.get('http://sendnotificationapp.com/sms/send_notifications')

end 
```

当我做 rake 时，任务运行正常：

```
heroku rake send_notifications 
```

虽然当我使用 Heroku 调度程序 GUI 将其设置为每 10 分钟运行一次时，它无法运行。相反，我收到以下错误：

```
Starting process with command `send_notifications` by scheduler@addons.heroku.com
Starting process with command `send_notifications`
bash: send_notifications: command not found
Process exited with status 127 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T20:50:46.833

听起来您将 Heroku 调度程序作业设置为`send_notifications`，而不是`rake send_notifications`or `bundle exec rake send_notifications`。

# java - 使用带有 JList 的部分填充数组

> ID：13423720
> 
> 赞同：0
> 
> 时间：2012-11-16T20:10:25.113
> 
> 标签：java, arrays

我正在创建一个使用由部分填充数组填充的 JList 的项目。这会导致 JList 中的元素为空。消除这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:13:38.390

如果您已经有部分填充的数组并且无法更改它，请使用 a`Vector`填充数组中所有非空元素，然后将其分配给`JList`.

否则，将您的对象存储在集合中而不是 an 中，并在您创建或分配对象时`array`调用其上的方法。`toArray``JList``JList#setListData`

# knockout.js - knockout.js 是否会在模型上公开更改事件？

> ID：13423724
> 
> 赞同：1
> 
> 时间：2012-11-16T20:10:53.207
> 
> 标签：knockout.js

我想观察 ViewModel 对任何属性的任何更改。这可以通过 knockout.js 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:19:56.380

Ryan Niemeyer 对为您的 Knockout 视图模型实现通用脏标志进行了出色的演练：

[http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)

得到的基本方法是使用 ko.toJSON 来比较整个视图模型的 JSON 表示，以确定是否有任何属性值发生了变化，这种方法简单而强大，只要您记住，如果您的视图模型变大并且嵌套这可能会成为一项昂贵的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:46:08.590

这段代码怎么样：

```
function subscribeToModelChange (viewModel)
{
    for (var prop in viewModel)
    {
        if (ko.isObservable (viewModel[prop])
            viewModel[prop].subscribe (function (newValue) { onModelChanged (viewModel[prop], newValue); });
    }
}

function onModelChanged (observable, newValue)
{
    alert ("Hooray!");
} 
```

您将收到有关视图模型中任何可观察到的淘汰赛更改的通知。

# javascript - 检测页面来自后退按钮的方法

> ID：13423726
> 
> 赞同：6
> 
> 时间：2012-11-16T20:10:56.210
> 
> 标签：javascript, zepto

我制作了一种方法来在单击链接时在页面底部显示加载指示器。

当有人点击后退按钮时，它当然不会刷新页面内容，从而显示加载区域。

有没有办法检测页面是否来自重定向以触发删除加载指示器的方法？

有点像这样：

```
function cameFromeBackButton(){
    //hide loading indicator
} 
```

**或者**它是一种停止后退按钮并改为触发方法的方法吗？像这样：

```
function  backButtonClicked(){
    //do stuff instead of going back
} 
```

**编辑：**这几乎就是该区域的名称

```
$('.link').click(function(){
 //make loading area
 $('container').append(loadingAreaString)

 //grab the href and goto page
 window.location.href = $(this).attr('href');

 return false
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:42:14.353

您可以从服务器传输一些令牌并将其存储在 cookie 或本地存储中。当存储的令牌与嵌入在页面中的令牌不同时 - 这意味着页面是从服务器加载的，如果值相等 - 这意味着页面是从缓存（或从后退按钮）提供的。

# python - 集成tor和python

> ID：13423728
> 
> 赞同：2
> 
> 时间：2012-11-16T20:11:00.180
> 
> 标签：python, proxy, socks, tor

我想知道如何在 Python 中通过 Tor 访问网页。

有一些类似的问题，但没有一个是完全回答的，而且很多答案是完全错误的。

我偶然发现的第一页是这个；[如何在 Python 中通过 Tor 发出 urllib2 请求？](https://stackoverflow.com/questions/1096379/tor-with-python)，最流行的答案是；

```
proxy_support = urllib2.ProxyHandler({"http" : "127.0.0.1:8118"})
opener = urllib2.build_opener(proxy_support) 
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
print opener.open('http://www.google.com').read() 
```

有几页有类似的答案，反正那个页面上有人评论了；

“阅读这个帖子的人可能值得知道端口 8118 实际上是 Privoxy 的端口，而不是 Tor。Tor 是一个严格的 SOCKS-only 代理（端口 9050），因此它拒绝所有非 SOCKS 流量（例如 HTTP）。处理非 SOCKS 流量，您需要使用 Privoxy（端口 8118）或 Polipo（端口 8123）将流量转换为 SOCKS，以便 Tor 接受。

Privoxy 更适合隐私，而 Polipo 更适合性能，因为它会缓存。”

所以这不会让我到任何地方，经过一番搜索后，我[在 TOR 上找到了这个 Python urllib？](https://stackoverflow.com/questions/5148589/python-urllib-over-tor)

我下载了socksipy，并尝试了代码。它有效，但我得到了和这个人一样的错误。他的问题没有公认的答案。该帖子来自2011年，我认为我试图澄清一个新问题是有序的。

或者，是否有一个很好的库来处理 Tor？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T04:25:44.800

是的，我们有几个 Python 库用于处理 Tor，最常见的是[stem](https://stem.torproject.org/)和[txtorcon](https://txtorcon.readthedocs.org/)。有关此类客户端使用的教程，请参见[此处](https://stem.torproject.org/tutorials/to_russia_with_love.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:31:44.707

好的，这是我使用的解决方案；

我下载了这个 - [http://pastie.org/6002288](http://pastie.org/6002288)（不记得来源，但如果你需要的话，你可以追踪它的信息）

我运行它

现在我更改了我的计算机的设置，以强制任何 dns 解析在端口 53 上本地通过我的代理名称服务器。它将它中继到 tor。

处理它，现在我可以运行以下代码，知道我是安全的！

```
import socks
import socket
def create_connection(address, timeout=None, source_address=None):
    sock = socks.socksocket()
    sock.connect(address)
    return sock

socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)

# patch the socket module
socket.socket = socks.socksocket
socket.create_connection = create_connection

import urllib

url = "http://www.google.com"
urllib.urlopen(url) 
```

Tor 仍然告诉我它只接收一个 IP 地址，而不是一个 url，我可能正在泄漏信息。但我肯定不是，因为 DNS 查找正在通过我的本地代理，该代理通过 Tor。

# javascript - JQuery - SyntaxError：不能分配保留字“this”

> ID：13423730
> 
> 赞同：0
> 
> 时间：2012-11-16T20:11:09.493
> 
> 标签：javascript, jquery, coffeescript

我正在尝试遍历 JQuery 中的变量并重新分配`this`以下 Coffeescript 中的值。

```
$.each data.rows, ->
  completion_time = [this[0], new Date(new Date('Jan 01 2000').getTime() +  this[1])]
  this = completion_time 
```

但是，这会产生以下错误消息：

> 语法错误：不能分配保留字“this”

在每次迭代中， 的值`this`看起来像这样：

> **[“abc123”, 12302103, 1230132, 1230123]**

我正在尝试做的是将其重新分配给以下值：

> **[“abc123”，12302103]**

我也尝试分配`this.value`，没有骰子。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:14:50.343

您不能重新分配`this`. 您可以修改`this`以包含新数组中的元素

受不了CoffeScript，就用JS来展示吧

```
// Clear elements from the array
this.length = 0;
// Add each element in the new array
this.push.apply(this, completion_time); 
```

# sql-server-2008 - 我可以在选择语句中使用 CAST() 吗？

> ID：13423733
> 
> 赞同：1
> 
> 时间：2012-11-16T20:11:24.610
> 
> 标签：sql-server-2008, select, casting

我正在尝试在 SQL 语句中使用 CAST()，但它不允许我在 group by 中将 CAST(myDateTime, Date) 视为 myLoginShortDate？我只知道 SQL 的基础知识，我正在努力学习更多。
5 月数据如下所示：

CustomerID int, null Email varchar(60) DateEntered DateTime

我正在尝试按日期时间的日期部分进行分组并在电子邮件上分组

我的存储过程选择部分如下所示：

```
 select  cll.Email,CAST(cll.DateEntered as Date) as LoginDate, 
              COUNT(cll.email) as FailedCount
            from [GC].[dbo].[CustomerLoginLog] as cll
            where [CustomerId] is null
            group by LoginDate, cll.Email
            order by FailedCount desc` 
```

它返回“无效的列名'LoginDate'”

我希望能够看到：

> 电子邮件、登录日期、失败计数
> 
> xyz@test.com, 11/01/12, 21
> 
> abc@test2.com, 11/01/12, 17
> 
> xyz@test.com, 10/30/12, 15

等等。我确信这只是一个初学者的错误。我把这篇文章搞砸了，但我希望有人能理解。选择格式在我的电脑上看起来更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:12:44.617

该`GROUP BY`语句在语句之前进行评估`SELECT`，因此 SQL Server 不知道您在`SELECT`语句中为表达式提供的别名。要解决此问题，您只需重复以下表达式`GROUP BY`：

```
GROUP BY CAST(cll.DateEntered AS Date) 
```

或者用 CTE 包装查询的简单部分，并对 CTE 结果进行分组：

```
;WITH MyQuery AS 
(
    SELECT
        cll.Email
        ,CAST(cll.DateEntered AS Date) AS LoginDate
    FROM 
        [GC].[dbo].[CustomerLoginLog] AS cll
    WHERE 
        cll.[CustomerId] IS NULL
)
SELECT 
    Email
    ,LoginDate
    ,COUNT(*) AS FailedCount
FROM 
    MyQuery
GROUP BY 
    LoginDate, Email
ORDER BY 
    FailedCount DESC 
```

或者，您可以在嵌套的 SELECT 语句中包含 CTE 的内容，正如[Mahmoud 指出的那样](https://stackoverflow.com/a/13423765/74757)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:14:36.427

`SELECT`statement 在子句之后（逻辑上）执行`GROUP BY`，因此`GROUP BY`子句看不到该 alias `LoginDate`。您必须使用某种子查询，或者像这样的 CTE：

```
SELECT *
FROM
(
   SELECT 
     cll.Email,
     CAST(cll.DateEntered as Date) as LoginDate, 
     COUNT(cll.email) as FailedCount
   FROM [GC].[dbo].[CustomerLoginLog] as cll
   WHERE [CustomerId] IS NULL
) t
GROUP BY LoginDate, cll.Email
ORDER BY FailedCount DESC 
```

# java - Struts 2 使用注解的列表动作类型转换

> ID：13423736
> 
> 赞同：5
> 
> 时间：2012-11-16T20:11:41.910
> 
> 标签：java, struts2

我正在尝试创建一个自定义类型转换器来从字符串来回转换对象集合。我的表单中有一个文本区域，并且想在集合中为我保存的文本区域中的每个换行符创建一个新对象。显示信息时，我想遍历集合中的对象并将其转换为带有换行符的字符串，用于我的文本区域。到目前为止，我什至无法让我的转换器触发或接收基于我拥有的注释的任何类型的错误。下面是我的类定义：

```
@Conversion()
public class FormsEdit extends JWebCrud{ 
```

在这个类里面我有一个列表：

```
private List<Formfield> formFields; 
```

在 Formnfield 类中，我有一个集合：

```
private Set<Formfieldopts> formfieldoptses = new HashSet<Formfieldopts>(0);

@TypeConversion(converter = "com.webexchange.actions.tpa.setup.forms.FormFieldOptsConverter")
public void setFormfieldoptses(Set<Formfieldopts> formfieldoptses) {
    this.formfieldoptses = formfieldoptses;
} 
```

有人可以指导我如何正确设置这些注释以使转换器启动吗？

**Struts 2 版本：** 2.2.1

**Struts 拦截器堆栈：**

```
 <interceptor-stack name="stackWithSecurity">
                            <interceptor-ref name="closeHibernateSession" />
            <!--catches exceptions pre or post action class-->
            <interceptor-ref name="exceptionInterceptor" />  
            <interceptor-ref name="security">
                <param name="excludeMethods">executeNoSecurity,executeNoSecurityOrValidation</param>
            </interceptor-ref>
            <interceptor-ref name="alias" />
            <interceptor-ref name="servletConfig" />
            <!-- Puts HTTPResponse and HTTPRequest objects on the action -->
             <interceptor-ref name="openHibernateSession" />
            <!-- Opens a db connection and creates a hibernate session -->
            <interceptor-ref name="prepare" />
            <interceptor-ref name="checkbox" /> <!-- Sets unchecked values into the action with a value of 'false' -->
            <interceptor-ref name="params" /><!-- Sets the parameters from the HTTP request to the action -->
            <interceptor-ref name="staticParams" />
            <interceptor-ref name="conversionError" />
            <!-- adds a field error when the value can't be converted to the right type -->
            <interceptor-ref name="chain">
                <!-- these properties should not be copied from one action to another on a chain -->
                <param name="excludes">dao</param>
            </interceptor-ref>
            <interceptor-ref name="validation">
                <param name="excludeMethods">
                    input,back,cancel,browse,delete,executeNoValidation,executeNoSecurityOrValidation,edit
                </param>
                <param name="validateAnnotatedMethodOnly">true</param>
            </interceptor-ref>
            <interceptor-ref name="workflow">
                <param name="excludeMethods">
                    input,back,cancel,browse,delete,executeNoValidation,executeNoSecurityOrValidation,edit
                </param>
            </interceptor-ref>
        </interceptor-stack> 
```

**动作映射：**

```
 <action name="formsSave"
        class="com.webexchange.actions.tpa.setup.forms.FormsEdit"
        method="save">
        <result name="success">/jsp/centers/tpa/setup/forms/EditForms.jsp
        </result>
        <result name="input">/jsp/centers/tpa/setup/forms/EditForms.jsp
        </result>
    </action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:47:50.980

感谢戴夫的帮助。我的 s:textarea 没有指向我试图转换的集合。在我这样做之后，转换器开始点火。对不起，我完全失败了。

# php - 正确使用 $_POST

> ID：13423738
> 
> 赞同：0
> 
> 时间：2012-11-16T20:11:56.107
> 
> 标签：php, session, session-variables

如果我有三个 PHP 页面，我们将它们命名为 one.php、two.php 和 three.php，我在第一页使用类似这样的内容：

```
<form name = "one" action = "two.php" onsubmit="return validateForm();" method ="post"> 
```

我知道我现在可以在 two.php 中使用我单独从 one.php 传递的变量...

我的问题是，我将如何在 three.php 中使用 one.php 中的变量？

每次尝试像在 two.php 中那样调用它们时，我都会不断收到“未定义索引”错误。

非常感谢您的帮助！

编辑：我应该提到我也在使用会话。

在第二页上，我做了这样的事情：

> $_SESSION['name'] = $_POST['name'];

它让我将从第一页收集的名称传递到第二页，但是当我尝试在第三页上执行此操作时，它只会显示“未定义的索引”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:14:47.360

您需要使用 $_SESSION 而不是使用 post

例如：

一个.php

```
session_start();
$_SESSION["mypostvalue"] = $_POST["mypostvalue"];
$_SESSION["mypostvalue1"] = $_POST["mypostvalue1"]; 
```

三.php

```
session_start();
echo $_SESSION["mypostvalue"];
echo "<br />";
echo $_SESSION["mypostvalue1"]; 
```

然后，一旦你完成了会话数据，你需要像这样摆脱它：

```
session_start();
$_SESSION = null;
session_destory(); 
```

**注意**每页只使用一次 session_start()，并且在任何数据发送到浏览器之前，例如 html 或空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:16:39.817

> 我知道我现在可以在 two.php 中使用我单独从 one.php 传递的变量...

不是这样的。

表单中成功的表单控件会将其值提交到`two.php`. 然后，您可以通过 访问它们`$_POST['name_of_control']`。

如果您使用从 PHP 变量创建的值（确保将它们转义以防御 XSS 攻击）生成表单控件（可能是隐藏类型），那么它们将出现在表单中并被提交。

> 我的问题是，我将如何在 three.php 中使用 one.php 中的变量？

这取决于浏览器如何访问three.php。您可以生成另一个表单并将值再次放入隐藏输入中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:14:31.437

$_POST 是每个请求您应该使用 $_SESSION 或 $_GET 将它们传递到第三个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T20:15:13.190

只需确保您的输入元素名称正确。如果要`$_POST["myvar"]`在*two.php*中使用，则 one.php 中的*属性*`name`需要为“myvar”。

 *```
<form action="two.php" method="post">
    <input type='text' value='test myvar' name='myvar' />
    <input type='submit' value='go to 2' />
</form> 
```

* * *

要在 three.php 中使用 one.php 中的变量*，*只需*将*它们作为隐藏输入传递。也就是说，将它们回显到*two.php*中的表单：

 **```
<form action="three.php" method="post">
    <input type='text' value='test var 2' name='myvar2' />

    <?php echo "<input type='hidden' name='myvar' value='" . $_POST["myvar"] . "' />"; ?>

    <input type='submit' value='go to 3' />
</form> 
```***

# sql - 哪个对性能更好，使未使用的列为空或填充值

> ID：13423748
> 
> 赞同：1
> 
> 时间：2012-11-16T20:12:57.380
> 
> 标签：sql, sql-server

我有一个表，其中有一`uniqueidentifier`列仅由某些行使用。

这样做是否是个好主意：

*   使该列可为空并使未使用行的唯一标识符为空？
*   或不使列可为空并为所有行填写 GUID 值？

`SELECT`对 uniqueidentifier 列的查询会有任何性能差异吗？那么磁盘空间呢？空值是否占用相同数量的空间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T20:57:16.010

如果您使用的是 SQL Server 2008+，您可能需要考虑使用[稀疏列](http://msdn.microsoft.com/en-us/library/cc280604.aspx)。它针对存储主要包含空值的列进行了优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:13:17.730

如果要在 where 子句中使用可为空的列，还要检查 MSSQL 过滤索引。

# java - java.util.zip.ZipException：系统找不到指定的文件

> ID：13423749
> 
> 赞同：1
> 
> 时间：2012-11-16T20:13:07.820
> 
> 标签：java, jar

我有一个我编写的 jar 文件，它基本上将制表符分隔的文本文件转换为指定的 XML 格式。它是用 Eclipse 编写的，可以在 Windows 7 的命令行中正常运行。

我一直在使用以下命令运行它：

```
java -jar convert.jar [filename] 
```

Java版本是1.6.0_21

现在我也尝试在运行 Java 版本 1.6.0_37 的 Windows XP 上运行这个 jar，它运行良好。

但是在第三台运行Windows XP的电脑上，运行上述命令时出现如下异常

```
Exception in thread "main" java.util.zip.ZipException: The system
cannot find the file specified
at java.util.zip.ZipFile.open(Native Method)
at java.util.zip.ZipFile.<init>(ZipFile.java:112)
at java.util.jar.JarFile.<init>(JarFile.java:117)
at java.util.jar.JarFile.<init>(JarFile.java:55) 
```

如果没有命令行参数，我也无法运行 jar。在这种情况下，我相信抛出了 NoClassDefFound。

```
echo %CLASSPATH% 
```

给

```
.;C:\Program Files\Java\jre6\lib\ext\QTJava.zip 
```

关于这里发生的事情有什么想法吗？我猜这第三台计算机上的环境变量有问题，但我不确定它到底是什么。提前致谢。

MANIFEST.MF 文件如下所示：

```
Manifest-Version: 1.0
Class-Path: .
Main-Class: Convert 
```

# c++ - 如何使用矢量 v，作为搜索地图的关键

> ID：13423753
> 
> 赞同：1
> 
> 时间：2012-11-16T20:13:36.617
> 
> 标签：c++, map, vector

我有一个：

```
vector<unsigned> v; 
```

如何使用向量中的数字/值作为键来搜索

```
map <unsigned, unsigned>& mp 
```

该地图由

```
map.insert(pair<unsigned, unsigned>(v, sthelse)) 
```

来自另一个数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:39:15.757

您不能使用 a`vector<unsigned>`作为关键字来搜索 a `map<unsigned, unsigned>`。正如第一个模板参数所`map<>`指示的那样，键的类型是`unsigned`，而不是`vector<unsigned>`。

您*可以*使用向量的**成员**作为键来搜索地图，如下所示：

```
for(i = 0; i < v.size(); ++i) {
  auto it = mp.find(v[i]);
  if(it != mp.end()) {
    std::cout << "Look, Martha, we caught one! " << it->second << "\n";  
} 
```

# python - 多个 -m 命令行参数（Python）

> ID：13423756
> 
> 赞同：13
> 
> 时间：2012-11-16T20:13:48.997
> 
> 标签：python, command-line, arguments

我想同时运行 cProfiler（主要用于时间测量）和我在[这里](https://github.com/fabianp/memory_profiler)找到的内存分析器。但是，两者都需要给出 -m 命令行参数，这并不能很好地发挥作用。

有没有办法让两者都运行？到目前为止，我所能做的就是让翻译对我大喊大叫。

如果您需要更多信息，请告诉我，我会尽力提供。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T15:02:49.140

`-m`使用两个参数启动两个模块是不可能的。这是因为后面的命令行参数`-m`都以`sys.argv`. 这在文档中没有明确描述，但您可以通过实验进行尝试。

创建两个 python 文件`a.py`和`b.py`.

内容`a.py`：

```
print 'a'
import sys
print sys.argv 
```

内容`b.py`：

```
print 'b' 
```

现在尝试使用两个`-m`参数运行两者：

```
$ python -m a -m b 
```

输出：

```
a
['/home/lesmana/tmp/a.py', '-m', 'b'] 
```

如您所见，模块 b 永远不会启动，因为第二个模块`-m`没有由 python 处理。它交给模块 a 来处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:45:17.300

虽然现在对我来说很明显你不能在同一个文件上使用两个 -m 参数，但我设法将一些解决方案组合在一起。不过，它有点迂回，并不完全完美。我使用了 2 个 .bat 文件，可以在[这里](http://d.pr/i/GiwC)看到。左侧是处理 cProfiler 的 .bat，右侧是处理内存分析器的 .bat。

可以在[此处](http://pastebin.com/Qe1jxCrW)和[此处查看](http://pastebin.com/3pwSgjrZ)在处理内存分析器的 .bat 中看到的 python 程序的代码。

第一个程序在我[这里](http://pastebin.com/0E5ZS9r2)的主要代码中的函数正上方的行中添加了# ，这意味着程序可以实际运行，cProfiler 可以做它的事情。

第二个程序删除了#，这意味着内存分析器可以工作。

为了使该系统与我的布局正常工作，首先需要将“@profile”注释掉。

它有点笨拙，可以使用一些改进来进一步自动化它（例如必须在处理内存分析器的 .bat 文件中指定文件的名称），但它现在就可以了。我也意识到这是一个非常具体的案例，但谁知道呢，也许有人和我处于完全相同的位置......

# javascript - URL 前缀“res://”——它是做什么的或者是什么创建了这个前缀？

> ID：13423758
> 
> 赞同：1
> 
> 时间：2012-11-16T20:13:55.033
> 
> 标签：javascript, asp.net, web-applications

我正在查看我在某个网站的 js 文件中发现的 url，我试图弄清楚它的全部内容以及谁创建了 javascript。它是一个 cookie，应该阻止用户每天多次下载 XML 文件的内容（？）或在未知的时间限制下访问。所以开始研究代码，我什至不记得我最初在哪里看到这个 url，它是在我的临时 IE 文件中的一个 cookie 中。

res://mshtml.dll/xmltreeview.js

当试图用谷歌搜索其中一条评论时没有产生任何结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:33:54.070

以下统一资源标识符 (URI) 从“C:\windows\system32”目录中的资源模块检索自定义“XML”资源。

```
res://C:%5Cwindows%5Csystem32%5Cmsxml3.dll/XML/DEFAULTSS.XSL 
```

# python - 百分比列表切片

> ID：13423759
> 
> 赞同：25
> 
> 时间：2012-11-16T20:14:03.323
> 
> 标签：python

我正在使用 python 3.2.3 IDLE，这是我的代码：

```
originalList = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]

newList = orginalList[0.05:0.95] #<<<<I have no idea what I'm doing here
print (newList) 
```

我有一个原始数字列表，它们是 1 - 100，我想从原始列表中创建一个新列表，但是新列表只能包含属于原始列表 5%- 95% 子范围的数据

所以新的列表一定是这样的`[5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18....95]`。我怎么做？我知道我的 newList 代码是错误的

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-16T20:18:01.173

```
originalList.sort()
newList = originalList[int(len(originalList) * .05) : int(len(originalList) * .95)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T20:19:30.970

```
size = len(originalList)
newList = originalList[0.05*size - 1:0.95*size + 1] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T20:20:44.383

```
sl = slice(4, 95)
print(originalList[sl]) 
```

另见[http://docs.python.org/2/library/functions.html#slice](http://docs.python.org/2/library/functions.html#slice)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T20:33:29.763

我还会使用列表推导来创建原始列表......不太容易出错。

```
originalList = range(1,101)
newList = originalList[(len(originalList)*.05)-1:len(originalList)*.95]
print newList 
```

给出想要的结果...

编辑：根据下面的评论将范围更改为更简洁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T20:18:29.600

如果要获取列表的一部分，则语法为

```
List = [1,2,3,4,5,6,7,8,9,10]
newList = [*start index*:*Index to end AT*] 
```

因此，第一个数字是子列表**开始**的索引，而第二个数字是子列表停止的索引（**不**包括该索引）。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-16T19:18:11.507

对于任意长度的列表，您可以执行以下操作：

```
>>> l = range(200)
>>> percentage = 5
>>> skip = int(len(l) * (float(percentage) / 100) / 2)
>>> len(l[skip:-skip])
190 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-10T22:04:30.650

您可以使用该`fidx`模块，它允许百分比作为索引：

```
import fidx

originalList = fidx([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100])
# or better: originalList = fidx.list(range(1,101))

newList = originalList[0.05:0.95]

print (newList) 
```

返回

```
[6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95] 
```

# php - jquery计算答案不正确

> ID：13423766
> 
> 赞同：0
> 
> 时间：2012-11-16T20:14:37.593
> 
> 标签：php, jquery, html

我的计算答案有问题。

对于问题中的每个答案，在文本输入中输入的内容都会减去该问题“总分”列下的数字与在该问题的文本输入中输入的数字。

示例如下：

![显示计算工作原理的屏幕截图](../Images/0a3913eca9a6a0a8d695e78f8f5a7b1b.png)

在文本输入中，我输入了数字 1、1 和 2。Total Marks Remaining 列下的 Total Narks 是 5，但现在是 1，因为 5 - 1 - 1 - 2 = 1 Total Mark Remaining

我遇到的问题是，如果我将顶部文本输入更改为 3，那么计算现在应该是 5 - 3 - 1 - 2 = -1 剩余总标记。但它并没有这样做，因为它在 jquery 函数中的某处声明如果 Total Marks Remaining 数小于 0，则显示原始 Total Marks Remaining 数为 5。这是不正确的，它应该只显示减号数字，以便用户知道他们需要减少 1 分。如果 Total Marks Remaining 数小于 0，如何获得要显示的负数？

下面是jquery函数的代码：

查询：

```
 $(function () {
        //alert("here");         
        var questions = $('#markstbl td[class*="_ans"]').length - 1;

        //disable single entry
        for (var i = 0; i <= questions; i++) {
            if ($("[class*=q" + i + "_mark]").length == 1) {
                var t_marks = $("[class*=q" + i + "_ans]").html();
                //alert(t_marks);
                $("[class*=q" + i + "_mark]").val(t_marks)
                    .attr("disabled", "disabled");
                //$("[class*=q"+i+"_mark]").attr("disabled","disabled");
            }
        }

        //find each question set and add listeners
        for (var i = 0; i <= questions; i++) {
            $('input[class*="q' + i + '"]').keyup(function () {
                var cl = $(this).attr('class').split(" ")[1]
                var questionno = cl.substring(cl.indexOf('q') + 1, cl.indexOf('_'));
                var tot_marks = $(".q" + questionno + "_ans_org").val();
                //alert(tot_marks);
                var ans_t = 0;
                $("[class*=q" + questionno + "_mark]").each(function () {
                    var num = (isNaN(parseInt($(this).val()))) ? 0 : parseInt($(this).val());
                    ans_t += parseInt(num);
                });
                ans_t = tot_marks - ans_t;
                //alert(ans_t);
                //var fixedno = tot_marks;
                var ans = (parseInt(ans_t) < 0) ? tot_marks : ans_t;
                $(".q" + questionno + "_ans").val(ans);
                $(".q" + questionno + "_ans_text").html(ans);
            });
        }
    });​ 
```

下面是动态 HTML 表：

HTML：

```
<body>
  <table border='1' id='markstbl'>
    <thead>
      <tr>
        <th class='questionth'>Question No.</th>

        <th class='questionth'>Question</th>

        <th class='answerth'>Answer</th>

        <th class='answermarksth'>Marks per Answer</th>

        <th class='noofmarksth'>Total Marks Remaining</th>
      </tr>
    </thead>

    <tbody>
      <?php
      $row_span  = array_count_values($searchQuestionId);
      $prev_ques = '';
      foreach ($searchQuestionId as $key => $questionId) {
      ?>

      <tr class="questiontd">
        <?php
            if ($questionId != $prev_ques) {
        ?>

        <td class="questionnumtd" name="numQuestion" rowspan=
        "<?php echo $row_span[$questionId]; ?>"><?php
                echo $questionId;
        ?><input type="hidden" name="q&lt;?php echo $questionId; ?&gt;_ans_org" class=
        "q&lt;?php echo $questionId; ?&gt;_ans_org" value=
        "<?php echo $searchMarks[$key]; ?>" /><input type="hidden" name=
        "q&lt;?php echo $questionId; ?&gt;_ans" class=
        "q&lt;?php echo $questionId; ?&gt;_ans" value=
        "<?php echo $searchMarks[$key]; ?>" /></td>

        <td class="questioncontenttd" rowspan="<?php echo $row_span[$questionId]; ?>">
        <?php
                echo $searchQuestionContent[$key];
        ?></td><?php
            }
        ?>

        <td class="answertd" name="answers[]"><?php
            echo $searchAnswer[$key];
        ?></td>

        <td class="answermarkstd"><input class=
        "individualMarks q&lt;?php echo $questionId; ?&gt;_mark_0" q_group="1" name=
        "answerMarks[]" id="individualtext" type="text" /></td><?php
            if ($questionId != $prev_ques) {
        ?>

        <td class="noofmarkstd q&lt;?php echo $questionId; ?&gt;_ans_text" q_group="1"
        rowspan="<?php echo $row_span[$questionId]; ?>"><?php
                echo $searchMarks[$key];
        ?></td><?php
            }
        ?>
      </tr><?php
          $prev_ques = $questionId;
      }
      ?>
    </tbody>
  </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:18:14.997

这条线是罪魁祸首：

```
var ans = (parseInt(ans_t) < 0) ? tot_marks : ans_t; 
```

将其更改为：

```
var ans = ans_t; 
```

# actionscript-3 - 在应用程序的模型和视图之间共享数据

> ID：13423776
> 
> 赞同：0
> 
> 时间：2012-11-16T20:15:13.343
> 
> 标签：actionscript-3, architecture

我目前正在尝试找到一个“确定的”解决方案（意思是：找到一个看起来有效的解决方案，并符合 OOP 规则）解决我一段时间以来反复出现的问题：我的不同部分的共享数据问题代码。

*请注意，我在这里的任何地方都**没有**使用任何 MVC 框架。我只是将我的数据类称为模型，将显示类称为视图（因为它的专有名称与 MVC 模式无关，人们在 MVC 模式“创建”之前就制作了视图和模型）。*

这是我的问题：每当我制作一个使用一些相当扩展数据的应用程序（例如游戏）时，我都会尝试分离逻辑（运动、碰撞等）并在两个类中显示。但是后来，我偶然发现了一个问题：如何将存储在我的逻辑类中的数据与我的视图类中的相应显示对象“绑定”，而不在不同类之间复制数据、引用或其他东西？

让我们举一个基本的例子：

*   我有一个 MyLogicClass，持有一个“EntityData”对象的向量（每个对象都有位置、大小、各种状态、处理我的项目逻辑的所有内容）

*   我有一个 MyViewClass，为 MyLogicClass 中的每个 EntityData 创建和显示 Sprite，并在游戏循环中更新它们后使它们移动。

我首先想到的是在每个数据元素中存储其对应的视图，从而允许我循环遍历我的 Vector 以更新项目逻辑，然后相应地更新视图。但这迫使我在 MyViewClass 中保存一个 MyLogicClass 引用，以确保我可以定位实体数据，迫使我将这两个类结合起来（我不想做的事情）。

另一方面，在我的数据模型（MyLogicClass 的 EntityData 对象具有 ID 参数）和我的 View 类（Sprites 持有对其原始实体数据 ID 的引用）中，每个实体都有一个 ID 的解决方案。但是，当我想针对一个特定实体强制我在我的数据模型中循环它时，然后再次循环它以在我的视图中找到相关的 Sprite。这个解决方案允许我在我的数据和我的视图之间有松散的耦合，但是每帧循环通过数百个元素两次（可能发生！）对于我来说确实听起来没有优化性能。

我可能对整个问题给予了应有的重视，但我已经不止一次偶然发现了这一点，而且我很想对此有一些其他的看法。

你们对这样的问题有什么建议/解决方案吗？

对于这种情况，是否还有其他一些我可能不知道的数据格式/层次结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:24:00.493

我所做的是使用事件和事件侦听器将它们“链接”在一起。我有我的“模型部件”抛出“显示部件”捕获和渲染/更新的特定事件。

我发现这确实让我可以通过编写测试代码来构建我的一些测试，这些代码将侦听某些事件并以这种方式进行错误检查。我的代码仍然是独立的并且可以单独测试：我可以通过触发并确保抛出具有正确值的正确事件来测试我的“模型”。同样，我可以编写一些测试代码来抛出可以被“显示”捕获的预设事件，看看它是否有任何问题。

然后，一旦一切正常，我只需重用那些相同的事件侦听器并链接到“彼此”。

后来我的“控制器”（用户输入）将操纵“模型”部分，这将导致事件被抛出到“显示器”，从而被渲染/更新。

我不知道这在遵循 mvc 模式方面是否“正确”，我对这类事情也没有任何正式的知识。我也会对其他人更有见识的意见感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:15:03.617

我想也许你想多了这个问题。我有时会这样做。

您的视图类显然必须具有某种类型的模型链接，而事件是实现此目的的好方法。这里有一些简单的东西给你一个想法。

```
 // Model class
 package
 {
    class MyModel extends EventDispatcher
    {
        // you can make them public but that would 
        // be against some oop practices. so private it is
        private var m_position:Vector2D; 

        MyModel(){}

        // one way of doing getters/getters
        // example: theModel.SetPosition(something);
        public function GetPosition():Vector2D { return m_position; }
        public function SetPosition(value:Vector2D):void 
        { 
            m_position = value; 
            ModelChanged();
        }

        // the other way
        // sample: theModel.position = something;
        public function get position():Vector2D {return m_position; }
        public function set position(value:Vector2D):void 
        { 
            m_position = value; 
            ModelChanged();
        }

        private function ModelChanged():void
        {
            dispatchEvent(new Event(Event.CHANGE));
        }
    }
}

// now for our view.
package
{
    class MyView extends Sprite // or whatever
    {
        private var model:MyModel;

        MyView(model:MyModel)
        {
            this.model = model;

            model.addEventListener(Event.CHANGE, handleModelChanged);

            // fire off an event to set the initial position.
            handleModelChanged(NULL);
        }

        private function handleModelChanged(evt:Event):void
        {
            x = model.position.x;
            y = model.position.y;
            // etc etc etc.
        }
    }
} 
```

无论如何，如果您要在模型文件中拥有逻辑，那么显然您不需要设置器，如果模型之外没有任何东西需要更改它，那么设置器没有理由。但是你确实需要吸气剂。

这将模型与视图分离，您可以以任何方式编写任何视图，并且您所提供的只是模型更改时的处理程序。只需使用 getter 公开您的视图所需的任何数据。

您现在只需遍历模型，如果其中一个发生更改，它将触发一个事件，并且正在侦听的视图将更新。

希望我没有错过任何东西，这解释了你想要什么。

编辑：我忘了补充，如果你使用类似更新功能的东西，你不必到处都有“ModelChanged()”。只需更新，并在您完成活动时触发。

# javascript - 使用jQuery按下后如何保持按钮处于活动状态

> ID：13423782
> 
> 赞同：3
> 
> 时间：2012-11-16T20:16:03.097
> 
> 标签：javascript, jquery, html, css

我看到了一些非常相似的问题，但无法找到我正在寻找的答案。我已经确定了一种解决方法，但想知道执行任务的正确方法。

我想要的是单击按钮并使活动状态保持不变。下一次单击将切换状态，这是所需的。我真正需要知道的是如何处理 uiButton:active 状态。

HTML：

```
<input type='button' class='uiButton' id='testbutton' value='testValue'> 
```

CSS：

```
.uiButton{
    background-color: red;
}

.uiButton:active{
    background-color:blue;
} 
```

Javascript/jQuery：

```
$('.uiButton').click(function() {
    $(this).toggleClass(//active state);
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T20:18:19.413

您应该创建一个活动课程

***CSS***

```
.uiButton:active, .active {
    background-color:blue;
} 
```

***JS***

```
$('.uiButton').click(function() {
    $(this).toggleClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:18:18.087

`:active`是一个 css[伪类](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)。您想要添加到元素中`.active`的[类。](http://www.w3.org/TR/CSS2/selector.html#class-html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T20:21:28.827

您希望按钮在单击后保持活动类吗？（不确定您是否要允许再次松开（红色）？）..无论如何...

CSS：

```
.uiButton {
   background-color: red;
}

.uiButton-active, .uiButton:hover {
   background-color: blue;
} 
```

然后....：

```
$('.uiButton').unbind('click').click(function() {
  $(this).attr('class', 'uiButton-active');
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T20:28:12.267

您不能触发像`:active`. 我知道的唯一选择是模拟这个

```
.uiButtonActive {
    background-color:blue;
} 
```

查看有效的[JSFIDDLE DEMO](http://jsfiddle.net/VWtXZ/)

# zend-framework - Zend View Helper 被模块隔离

> ID：13423784
> 
> 赞同：1
> 
> 时间：2012-11-16T20:16:19.107
> 
> 标签：zend-framework, module, zend-view, view-helpers

我正在使用带有模块的标准 MVC。我有 2 个视图助手类，它们使用资源在配置中自动加载...

```
resources.view.helperPath.Module1_View_Helper = "module1/views/helpers/"
resources.view.helperPath.Module2_View_Helper = "module2/views/helpers/" 
```

...除了类的前缀之外，它们都包含相同的类和方法名称。

```
class Module1_View_Helper_Notice extends Zend_View_Helper_Abstract {
public function notice() {

class Module2_View_Helper_Notice extends Zend_View_Helper_Abstract {
public function notice() { 
```

我的档案...

```
/modules/[module]/views/scripts/[action]/index.phtml 
```

...包含...

```
<?php echo $this->notice() ?> 
```

**如何根据我当前所在的路径使用特定的模块视图助手，这样我就不必为每个方法创建特定的名称？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:01:08.063

直接，我想。

```
<?php
require_once (APPLICATION_PATH . '/modules/module1/views/helpers/Notice.php');
$helper = new Module1_View_Helper_Notice ();
$helper->setView ($this);
echo $helper->notice (); 
```

# c# - 以 XML 格式保存 ImageSource (BitmapSource)

> ID：13423796
> 
> 赞同：2
> 
> 时间：2012-11-16T20:16:53.237
> 
> 标签：c#, wpf, image, xml-serialization

我正在尝试在XML 文件中保存和加载`ImageSource`（或）。`BitmapSource`快速浏览一下 SO 给了我[这个答案](https://stackoverflow.com/a/7262418/340045)。

它看起来不错，所以我尝试了一下，但我得到了一个奇怪的结果。

当我尝试这段代码时，一切正常：

```
BitmapSource testImgSrc = new WriteableBitmap(new BitmapImage(new Uri("pack://application:,,,/MyNameSpace;component/Images/MyImg.png")));
BackgroundImage = testImgSrc; 
```

但是当我尝试这段代码时，图像根本就没有出现：

```
BitmapSource testImgSrc = new WriteableBitmap(new BitmapImage(new Uri("pack://application:,,,/MyNameSpace;component/Images/MyImg.png")));
string testImgStr = ImageToBase64(testImgSrc);
BitmapSource testImg = Base64ToImage(testImgStr);
BackgroundImage = testImg; 
```

似乎没有任何错误或异常。当单步执行代码时`BackgroundImage`，它看起来被设置为一个有效的图像对象。

我的 WPF 表单有一个图像控件，它的源绑定到返回属性结果的`BackgroundImage`属性。我猜绑定工作正常，因为第一个测试按预期工作。

谁能帮我理解为什么第二个测试没有显示我的图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:56:26.253

[这个答案](https://stackoverflow.com/a/7262418/197913)`Base64ToImage`的方法有问题。[文档](http://msdn.microsoft.com/en-us/library/ms615996.aspx)指出，使用默认缓存选项，在实际使用图像之前不得关闭流。在您的情况下，这意味着该元素正在尝试访问已释放的流。`OnDemand``Image`

修复非常简单，您只需将缓存选项更改为`OnLoad`，问题就消失了：

```
BitmapSource Base64ToImage(string base64)
{
    byte[] bytes = Convert.FromBase64String(base64);
    using (var stream = new MemoryStream(bytes))
    {
        return BitmapFrame.Create(stream, BitmapCreateOptions.None, BitmapCacheOption.OnLoad);
    }
} 
```

# sql - Rails：按第二个子属性过滤模型

> ID：13423797
> 
> 赞同：1
> 
> 时间：2012-11-16T20:16:55.170
> 
> 标签：sql, ruby-on-rails, arel

我似乎无法弄清楚这一点。如果它深入一层，我可以做到。（使用类似的东西`A.joins(:bs).where("bs.paid = TRUE")`）

但我有一个模型 A `has_many B`。`B has_one C`. 终于`C`有了一个属性`paid`。

我想得到所有`A`的地方`C.paid == true`。

我正在寻找类似的东西`A.joins({:b, :c}).where("c.paid == True")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:11:28.757

Something like this?

```
A.joins(:b, :c).where(:conditions => ["c.paid = ?", true]) 
```

Found here, take a look it might interest you: "**11.2.2 Joining Multiple Associations**" [http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:29:48.430

```
paid_items = Array.new

A.bs.each do |b_item|
  paid_items << b_item if b_item.c.paid
end 
```

# wcf - 在 WinForms 项目中添加对 WCF 项目的服务引用 - 错误 TCP 错误代码 10061

> ID：13423803
> 
> 赞同：0
> 
> 时间：2012-11-16T20:17:14.813
> 
> 标签：wcf

我有多个 WCF 项目，我试图在 WinForms 项目中引用它们。当我尝试添加服务引用时，我可以看到几个项目，但一个没有显示并且拒绝让我添加它，即使我手动输入地址也是如此。当我这样做时，我得到：

元数据包含无法解析的引用：“net.tcp://localhost:14007/DispatchPuller/mex”。无法连接到 net.tcp://localhost:14007/DispatchPuller/mex。连接尝试持续了 00:00:01.0062012 的时间跨度。TCP 错误代码 10061：无法建立连接，因为目标机器主动拒绝它 127.0.0.1:14007。无法建立连接，因为目标机器主动拒绝它 127.0.0.1:14007

据我所知，所有服务都以相同的方式设置。这是两个，一个给我错误的顶部：

```
<system.serviceModel>
    <services>
      <service name="PASWCFDispatchPuller.DispatchPuller" behaviorConfiguration="tcpbehaviuor">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration="" name="nettcpDispatchPuller" contract="PASWCFDispatchPuller.IDispatchPuller">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" name="mexDispatchPuller" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:12007/DispatchPuller"/>
          </baseAddresses>
        </host>
      </service>

      <service name="PASWCFDispatchPuller.StateUpdate" behaviorConfiguration="tcpbehaviuor">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration="" name="nettcpStateUpdate" contract="PASWCFDispatchPuller.IStateUpdate">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" name="mexStateUpdate" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:12007/StateUpdate"/>
          </baseAddresses>
        </host>
      </service>

    </services>
    <behaviors>
      <serviceBehaviors>
        <!--<behavior >-->
        <behavior name="tcpbehaviuor">
          <!-- To avoid disclosing metadata information, 
            set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="false"/>
          <!-- To receive exception details in faults for debugging purposes, 
            set the value below to true.  Set to false before deployment 
            to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

添加对底部服务的引用没有问题。更改顶部端口的端口也无济于事。任何建议，将不胜感激。

# php - 如何将自己的 HTML 放入 Wordpress 主题？

> ID：13423805
> 
> 赞同：0
> 
> 时间：2012-11-16T20:17:21.233
> 
> 标签：php, html, wordpress, wordpress-theming

我安装了一个 Wordpress 主题，但我需要将我自己的 HTML 代码放在那里。所以，我想我会进入：`wp-content/themes/theme_name/header.php`并在需要的地方插入需要的 HTML 代码。

我做到了，但它并没有影响网站 - 新放置的 HTML 元素在网站中看不到。我无视什么吗？还是需要在 WP 管理中设置一些东西？还是缓存有问题？

对不起，也许是一个愚蠢的问题，我只是第一次玩 WP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:29:13.603

您博客的页面是由不同的主题“部分”创建的。`header.php`是其中之一。它创建页面的标题。通常，在大多数 HTML 输出之前。`footer.php`用于页面的页脚。如果您希望您的 HTML 代码仅出现在主页中，请使用 index.php（它调用`header.php`and `footer.php`）。如果您希望代码显示在页面中，请使用`page.php`. 如果您希望在查看帖子时显示您的代码，请使用`single.php`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:28:34.157

`get_header()`如果函数调用正确，请查看您的不同页面。正是这个功能包括`header.php`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:51:14.870

还要检查您的`"theme_name/inc"`目录。有时`header.php`or`footer.php`可以放在主主题文件夹**和**inc 中。如果是这种情况，您需要确保编辑正确的文件（中的那个`/inc`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-10T08:46:32.790

首先，您必须在 wp-admin 中检查站点中哪个主题处于活动状态假设有 3 个主题并且 21 个处于活动状态，并且您正在检查 22 个，所以这可能是您的新 html 不会显示在前端的原因，所以请检查您的当前主题并根据该位置的工作您可以检查它您当前的主题转到 wp-admin => 外观 => 主题

# javascript - jQuery Slider 为什么选择输入框？

> ID：13423809
> 
> 赞同：0
> 
> 时间：2012-11-16T20:17:26.203
> 
> 标签：javascript, jquery, slider, osclass

我已经建立了一个新的 osclass.org 站点。

jQuery 滑块（左侧）完美运行 - 但这些滑块下方的右侧文本框在某些浏览器（chrome、firefox）中不起作用。如果我单击此输入-> 输入左侧被标记。

我已经安装了 Firebug - 但我找不到错误。非常感谢您的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:57:28.393

您不应该真正将 a 嵌入`div`a `label`：

```
<label> Preis (in Euro)
     <div class="ui-slider-box">
       <div id="price-range" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><div class="ui-slider-range ui-widget-header" style="left: 0%; width: 100%;"></div><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%;"></a><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;"></a></div>
       <input type="text" id="priceMin" name="sPriceMin" value="" size="7" maxlength="7" class="min">
       <input type="text" id="priceMax" name="sPriceMax" value="" size="10" maxlength="10" class="max">
     </div>
</label> 
```

您应该在`label`上面单独拥有`div`：

```
<label> Preis (in Euro)</label>
     <div class="ui-slider-box">
       <div id="price-range" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><div class="ui-slider-range ui-widget-header" style="left: 0%; width: 100%;"></div><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%;"></a><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;"></a></div>
       <input type="text" id="priceMin" name="sPriceMin" value="" size="7" maxlength="7" class="min">
       <input type="text" id="priceMax" name="sPriceMax" value="" size="10" maxlength="10" class="max">
     </div> 
```

# java - 如何解决这个运行时异常？

> ID：13423813
> 
> 赞同：-2
> 
> 时间：2012-11-16T20:17:50.797
> 
> 标签：java, exception, user-interface, jlist, jfilechooser

如何解决此代码的运行时异常？
当单击按钮文件选择器并从中添加文件时，面板颜色消失（面板中发生错误）

这是我的代码：

```
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JLabel;
import java.awt.Color;
import java.awt.Component;
import java.awt.Desktop;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.dnd.DropTarget;
import java.awt.dnd.DropTargetDragEvent;
import java.awt.dnd.DropTargetDropEvent;
import java.awt.dnd.DropTargetEvent;
import java.awt.dnd.DropTargetListener;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.File;
import java.io.IOException;
import java.util.List;
import javax.swing.DefaultListCellRenderer;
import javax.swing.DefaultListModel;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.filechooser.FileSystemView;
import javax.swing.border.BevelBorder;
import javax.swing.JFileChooser;
import javax.swing.plaf.FileChooserUI;

public class pan extends JPanel implements DropTargetListener {

private DefaultListModel listModel = new DefaultListModel();
private DropTarget dropTarget;
private JScrollPane droparea;
private JList list;
private JButton addbutton;

// Create the panel.  
//and add to it component

public pan() {
    setLayout(null);
    addbutton = new JButton("New button");
    addbutton.setBounds(10, 10, 90, 100);
    addbutton.addActionListener(new Action());
    add(addbutton);

    list = new JList();
    dropTarget = new DropTarget(list, this);
    list.setModel(listModel);
    list.setDragEnabled(true);
    FileListCellRenderer renderer = new FileListCellRenderer();
    list.setCellRenderer(renderer);
    list.addMouseListener(new mouselistner());
    list.clearSelection();
    list.setFixedCellHeight(40);
    droparea = new JScrollPane();
    droparea.setViewportView(list);
    droparea.setBounds(10, 150, 635, 330);
    add(droparea);

}// </editor-fold>
    // Variables declaration - do not modify

// End of variables declaration

public void dragEnter(DropTargetDragEvent arg0) {
    // nothing
}

public void dragOver(DropTargetDragEvent arg0) {
    // nothing
}

public void dropActionChanged(DropTargetDragEvent arg0) {
    // nothing
}

public void dragExit(DropTargetEvent arg0) {
    // nothing
}

public void drop(DropTargetDropEvent evt) {
    int action = evt.getDropAction();
    evt.acceptDrop(action);
    try {
        Transferable data = evt.getTransferable();
        if (data.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
        List<File> files = (List<File>) data
                .getTransferData(DataFlavor.javaFileListFlavor);
            for (File file : files) {
                listModel.addElement(file);
            }
        }
    } catch (UnsupportedFlavorException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        evt.dropComplete(true);
    }
}

/** A FileListCellRenderer for a File. */
class FileListCellRenderer extends DefaultListCellRenderer {

    private static final long serialVersionUID = -7799441088157759804L;
    private FileSystemView fileSystemView;
    private JLabel label;
    private Color textSelectionColor = Color.BLACK;
    private Color backgroundSelectionColor = Color.CYAN;
    private Color textNonSelectionColor = Color.BLACK;
    private Color backgroundNonSelectionColor = Color.WHITE;

    FileListCellRenderer() {
        label = new JLabel();
        label.setOpaque(true);
        fileSystemView = FileSystemView.getFileSystemView();
    }

    @Override
    public Component getListCellRendererComponent(JList list, Object value,
            int index, boolean selected, boolean expanded) {
        label.setBorder(new BevelBorder(BevelBorder.RAISED,
                Color.LIGHT_GRAY, Color.GRAY, null, null));
        File file = (File) value;
        label.setIcon(fileSystemView.getSystemIcon(file));
        label.setText(fileSystemView.getSystemDisplayName(file));
        label.setToolTipText(file.getPath());
        if (selected) {
            label.setBackground(Color.blue);
            label.setForeground(textSelectionColor);
        } else {
            label.setBackground(backgroundNonSelectionColor);
            label.setForeground(textNonSelectionColor);
        }

        return label;
    }
}

class Action implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        if(e.getSource()==addbutton){
        //  FileSystemView fsv=FileSystemView.getFileSystemView();

            JFileChooser filechooser=new JFileChooser();
            filechooser.setMultiSelectionEnabled(true);
filechooser.setFileSelectionMode   (JFileChooser.FILES_AND_DIRECTORIES);
            File files=filechooser.getSelectedFile();
        filechooser.showDialog(null, "add");  //here panel problem i think
        listModel.addElement(files);  //and here run time error genrate 

        }

    }
}
 } 
```

2最后一行的两个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:17:57.543

问题是您在显示对话框*之前*`JFileChooser`获得了选定的文件，因此选定的文件将是`null`. 交换这两行以获得：

```
int returnValue = filechooser.showDialog(null, "add");
if (returnValue == JFileChooser.APPROVE_OPTION) {
   File files = filechooser.getSelectedFile();
   listModel.addElement("fooooo"); 
} 
```

`JFileChooser`如果单击取消按钮，最好使用返回值。

# sql-server-2008 - 当我在类路径上有 2 个不同的 jdbc jar 时，rg.codehaus.groovy.control.MultipleCompilationErrorsException

> ID：13423816
> 
> 赞同：-2
> 
> 时间：2012-11-16T20:18:02.450
> 
> 标签：sql-server-2008, jdbc, command-line, groovy, classpath

> **可能重复：**
> [MSSQLSERVER 2008 和 Groovy 的 Manifest.MF 问题](https://stackoverflow.com/questions/13311992/manifest-mf-issue-with-mssqlserver-2008-and-groovy)

我有一个非常简单的 groovy 脚本，带有 2 个数据库连接：

1.  一个到 Oracle 的数据库连接
2.  另一个到 SQLServer 的数据库连接

**问题**

当我通过 GGTS 编辑器（SpringSource 工具套件的 groovy 和 grails 版本）运行程序时，两个查询运行并返回结果正常。但是，当我从命令行运行程序时，从项目文件夹如下：

```
groovy -cp lib\jtds-1.3.0.jar lib\ojdbc6-11g.jar src\Starter.groovy 
```

我收到以下错误：

```
C:\workspace-ggts\Test>groovy -cp lib\jtds-1.3.0.jar lib\ojdbc6-11g.jar src\Star
ter.groovy
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
C:\workspace-ggts\Test\lib\ojdbc6-11g.jar: 1: unexpected char: 0x3 @ line 1, col
umn 3.
   PK♥ ßî∟9              ♦ META-INF/■╩  ♥     ☻       PK♥♦ ßî∟9            ¶   M
ETA-INF/MANIFEST.MF?æ┴N├0►D∩æ≥☼½₧α►7)R[rúΘÑá☻R½^æq6─òcç╡SΦ▀π4◄ →        ─╒3;π}╗µ
Z▬h]┤C▓╥Φ¶↕▬ç┴¬¬§V¿↔w■╤ï:7ö┬♥qí►2C╡íôtf▌Jº0♣│╧ƒ┼öφ9
     ^

1 error 
```

**我试过的**

1.  我曾尝试使用 jtds 驱动程序连接到 SQLServer，因为我认为问题是来自 Microsoft 站点的 sqljdbc4.jar[基于此相同的问题在此处以不同方式报告](https://stackoverflow.com/questions/13311992/manifest-mf-issue-with-mssqlserver-2008-and-groovy)

2.  我试过用分号来分隔类路径依赖项，但仍然是同样的错误。

3.  我已将 java 版本升级到 1.7。Groovy 版本是 2.0.5

4.  从IDE它运行良好，但从命令行我得到错误。

5.  如果我注释掉其中一个数据库访问代码（连接、查询、结果集的 println），让我的 groovy 脚本只有一个数据库连接和访问，程序从命令行运行良好。例如：

这个

```
groovy -cp lib\jtds-1.3.0.jar src\Starter.groovy 
```

或这个：

```
groovy -cp lib\ojdbc6-11g.jar src\Starter.groovy 
```

确实有效。一旦我在第二个数据库访问的类路径中添加代码和 jar，我就会收到上面报告的错误。

我没有想法或想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:26:47.863

在 Windows 上，类路径中的文件需要用分号分隔。在 Linux 或 OSX 等类 unix 平台上，分隔符是冒号。Groovy 将第二个 jar 文件视为脚本，并将脚本名称视为第一个命令行参数。

尝试这个：

```
groovy -cp lib\jtds-1.3.0.jar;lib\ojdbc6-11g.jar src\Starter.groovy 
```

你会得到一个不同的错误吗？

# linux - find 和 ls 上的通配符

> ID：13423824
> 
> 赞同：37
> 
> 时间：2012-11-16T20:18:24.043
> 
> 标签：linux, bash

我试图找出通配符来进行文件操作。

我在一个目录中有这些文件用于测试目的：

```
file_BSD.GIF  file_linux.gif  file_unix 
```

看我的 ls 命令，

```
$ ls *{.GIF,.gif}
file_BSD.GIF  file_linux.gif 
```

这没关系。

但是“find”的工作方式似乎不同：

```
$ find -name *{.GIF,.gif}
find: paths must precede expression: file_linux.gif
Usage: find [-H] [-L] [-P] [-Olevel] [-D help|tree|search|stat|rates|opt|exec] [path...] [expression] 
```

顺便说一句，我读过“-iname”应该同时定位大写和小写文件，但这似乎也不起作用：

```
$find -iname *.gif

./file_linux.gif 
```

（这也应该找到 .GIF 文件，对吧？）。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-16T20:26:20.823

`find -name *{.GIF,.gif}`是错的。

该命令首先由 shell 扩展为`find -name *.GIF *.gif`

然后进一步扩展为：

```
find -name file_BSD.GIF  file_linux.gif 
# as you have only these files in directory 
```

现在这`-name file_BSD.GIF file_linux.gif`被传递给`find`. 这是**错误**`file_linux.gif`的，因为find 不接受这样的开关。

你需要的是这个命令。

```
find -name '*.GIF' -or -name '*.gif' 
```

假设您想以`.gif`不区分大小写的方式收集文件，此 find 命令变为，

```
find -iname '*.gif' 
```

请注意此处的单引号 ( `'`)。这意味着`*.GIF`应该按*原样*发送查找，无需任何外壳扩展。find 将使用它作为模式。除非您转义 shell 元字符，否则此单引号是必需的。在这种情况下，命令看起来像

```
find -iname \*.gif 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-16T20:28:05.183

`-iname`您在使用参数时遇到问题，`find`因为您必须引用您给它的模式。

所以，你应该这样做：

```
find -iname '*.gif' 
```

这在手册中有说明：

> “...请注意，您应该理所当然地引用模式，否则shell将扩展其中的任何通配符。”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T20:28:30.653

您应该了解（与 Windows 相比）shell`*{.GIF,.gif}`在将其传递给`find`程序之前会对其进行扩展。

您可以通过将程序替换为`echo`.

所以你应该引用程序参数，比如

```
 echo \-name '*{.GIF,.gif}' 
```

所以跑

```
 find -name '*.{GIF,gif}' 
```

也许你想要

```
 find -name '*.gif' -o -name '*.GIF' 
```

请阅读[Advanced Bash Scripting Guide](http://tldp.org/LDP/abs/html/)（也许还有[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)手册页，以了解内核如何运行程序）。

# sql - SQL Server 2008 R2 查询

> ID：13423831
> 
> 赞同：-4
> 
> 时间：2012-11-16T20:19:11.950
> 
> 标签：sql, performance, sql-server-2008-r2

我正在运行以下查询，但它花费的时间太长。有没有办法让它更快或改变查询的编写方式？

请帮忙。

```
SELECT *
FROM   ProductGroupLocUpdate WITH (nolock)
WHERE  CmStatusFlag > 2
       AND EngineID IN ( 0, 1 )
       AND NOT EXISTS (SELECT DISTINCT APGV.LocationID
                       FROM CM_ST_ActiveProductGroupsView AS APGV WITH(nolock)
                       WHERE APGV.LocationID = ProductGroupLocUpdate.Locationid); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:26:16.173

尝试使用连接重写查询

```
SELECT PGLU.* from ProductGroupLocUpdate PGLU WITH (NOLOCK) 
LEFT JOIN CM_ST_ActiveProductGroupsView APGV WITH (NOLOCK) 
        ON PGLU.LocationId = APGV.LocationID
WHERE APGV.LocationID IS NULL AND CmStatusFlag>2 AND EngineID IN (0,1) 
```

根据表中的数据量，检查向 LocationId（在两个表中）、CmStatusFlag 和 EngineID 添加索引

# architecture - 数据流/爬取架构设计

> ID：13423832
> 
> 赞同：2
> 
> 时间：2012-11-16T20:19:23.513
> 
> 标签：architecture, solr, hbase

我不确定这是否是这个问题的正确论坛，但如果我能指出正确的方向，那就太好了。我们一直在使用 MySql 和 Solr 的组合来满足我们公司的所有全文和查询需求。但是随着我们客户的增长，数据量也在增长，而 MySql 并没有被证明是存储/查询的正确选择。

我一直在研究 Solr Cloud，它看起来确实令人印象深刻，但不确定我们是否应该放弃我们的存储系统。所以，我一直在探索 DataStax，但商业选择是不可能的。所以我们考虑使用 hbase 来存储数据，同时将数据索引到 Solr 云中，但是由于许多原因，这种设计似乎并不令人信服（也见基本的 Lilly）。

1.  是否建议仅使用具有多个复制的用户 Solr 云或 hbase-solr 似乎是不错的选择

2.  将 Solr Shard 和 Hbase 节点保持在同一台机器上会有多大的压力

3.  有没有计算我需要什么样的机器配置来存储 500-10 亿条记录。其中大部分是社交数据（Twitter/facebook/blogs 等）和分片数量。

问候，

阿尤什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T10:52:04.370

据我所知，最好将 HBase 和一般 NoSQL 作为混合解决方案与 MySQL 和 Oracle 等关系数据库结合使用，这就是 Facebook 和其他人所做的。他们不会完全离开关系数据库。还有一点，MySQL失效后的解决方案不一定是HBase。您可以尝试为大规模数据存储而设计的 Oracle。

抱歉英语不好。

# svg - 如何使用浏览器大小缩放在 raphaeljs 中创建的矢量路径？

> ID：13423834
> 
> 赞同：1
> 
> 时间：2012-11-16T20:19:26.147
> 
> 标签：svg, raphael, responsive-design

我为 raphaeljs 库绘制了以下 Facebook 图标，现在我希望在调整浏览器大小时调整图标大小。如何使用 Raphael 创建响应式图标？

```
var paper = Raphael(10, 10, 800, 800);

FacebookBack=paper.path('M 285.5 270.5 C 285.5 277.1 280.1 282.5 273.5 282.5 L 18.5 282.5 C 11.9 282.5 6.5 277.1 6.5 270.5 L 6.5 19.5 C 6.5 12.9 11.9 7.5 18.5 7.5 L 273.5 7.5 C 280.1 7.5 285.5 12.9 285.5 19.5 L 285.5 270.5Z');
FacebookBack.attr({'fill':'#787887','stroke':'#000000','stroke-miterlimit':'10'});

F=paper.path('M 133.8 102.8 L 160.8 102.8 L 160.8 90.5 L 160.8 78.5 L 160.8 76.5 C 160.8 65 161.1 47.1 169.5 36.1 C 178.3 24.4 190.5 16.4 211.4 16.4 C 245.4 16.4 259.8 21.3 259.8 21.3 L 253 61.3 C 253 61.3 241.8 58 231.3 58 C 220.8 58 211.4 61.8 211.4 72.3 L 211.4 76.5 L 211.4 90.5 L 211.4 102.8 L 254.4 102.8 L 251.4 141.8 L 211.4 141.8 L 211.4 277.5 L 160.8 277.5 L 160.8 141.8 L 133.8 141.8 L 133.8 102.8 L 133.8 102.8Z');
F.attr({fill:'#ffffff'});

LowerLight=paper.path('M 8.3 231.5 C 8.3 220.5 17.2 211.5 28.3 211.5 L 258.3 211.5 C 269.3 211.5 278.3 220.5 278.3 231.5 L 278.3 257.6 C 278.3 268.6 269.3 277.6 258.3 277.6 L 28.3 277.6 C 17.2 277.6 8.3 268.6 8.3 257.6 L 8.3 231.5 L 8.3 231.5Z');
LowerLight.attr({'fill':'#ffffff','stroke':'none','stroke-width':'0','fill-opacity':'0.2','stroke-opacity':'0'});

UpperLight=paper.path('');
UpperLight.attr({'fill':'#fffM 0 123.9 C 39.9 138.9 89.9 147.7 144.3 147.7 C 198.3 147.7 248.2 138.9 288 124.1 L 288 25 C 288 11.2 276.8 0 263 0 L 25 0 C 11.2 0 0 11.2 0 25 L 0 123.9 L 0 123.9Zfff','stroke':'none','stroke-width':'0','fill-opacity':'0.2','stroke-opacity':'0'});

var FacebookLogo=paper.set(FacebookBack,F,LowerLight,UpperLight); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:50:57.950

谢谢

> 德米特里·巴拉诺夫斯基

我得到了答案：

```
var FacebookLogo = paper.set(FacebookBack,F,LowerLight,UpperLight).transform("s0.25,0.25,0,0"); 
```

[单击此处查看工作示例](http://jsfiddle.net/p8mq9/)

# css - 提高 CSS 类开关的性能

> ID：13423842
> 
> 赞同：0
> 
> 时间：2012-11-16T20:19:49.067
> 
> 标签：css, performance, browser, user-interface, css-selectors

我有一个可以以**“网格或列表”**模式显示的项目列表。

这是在 HTML 中以这种方式实现的：

```
<!-- List mode -->
<div class="items list">
    <ul></ul>
</div>
<!-- Grid mode -->
<div class="items grid">
    <ul></ul>
</div> 
```

`grid/list`当用户单击一个按钮时，我只是使用 jQuery在 CSS 类之间切换。在我的样式表中，我正在设置`.items.grid > ul`/的样式`.items.list > ul`，有时会在模式中隐藏子元素`grid`，例如：

```
.items.grid .hidden-grid {
    display: none;
}

.items.grid ul li {
    float: left;
    display: inline-block;
    width: 80px;
    height: 80px;
} 
```

列表中显示的元素数量可以变化，并通过“无限滚动”加载，直到有剩余项目。

这工作得相当好，**但是当元素数量增加时它开始变慢。**我原以为这是即时的，但它会阻止浏览器。

**我该怎么做才能让它更快？**

与必须再次渲染元素的浏览器相关的外观。

这可能与CSS结构有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:26:19.680

这实际上与 CSS 选择器以及浏览器解析它们以呈现页面或再次呈现元素的方式有关。

你知道这是非常合乎逻辑的，但是**浏览器从右到左评估 CSS 选择器**，从他们最终必须设置样式的元素开始。甚至 CSS ID 也没有太大的区别。这与 jQuery 的思维方式不同。

[编写高效的 CSS 选择器](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)

[优化浏览器渲染](https://developers.google.com/speed/docs/best-practices/rendering)

[为什么浏览器从右到左匹配 CSS 选择器？](https://stackoverflow.com/questions/5797014/why-do-browsers-match-css-selectors-from-right-to-left)

所以我用类选择器替换了元素选择器，去掉了深度选择器，区别很明显。

**HTML**

```
<div class="items">
    <ul class="grid">
        <li class="item>...</li>
    </ul>
</div> 
```

**CSS**

```
.grid .item {
    ...
}

.grid .hidden-grid {
    display: none !important;
}

.list .item .description {
    ...
} 
```

# php - 组织多个 AJAX/PHP 片段

> ID：13423846
> 
> 赞同：0
> 
> 时间：2012-11-16T20:20:01.853
> 
> 标签：php, ajax, jquery

我有几个代码块，我也从各种 jquery 事件中进行 ajax 调用。我想知道将这些小代码块保存在一个大文件中是否有任何负面影响，或者将它们分开是否会更好。我现在只有一对，但可能会增长到十几个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:22:35.600

完全取决于您的应用程序的结构。一般来说，最好分解您的应用程序，以便每个单独的组件位于不同的文件中。这种方式更加干净和有条理。虽然，如果你有一个小应用程序，有时它不值得做。

我通常有多个 JS 文件页面。一个包含与整个站点相关的代码，并且包含在所有页面上。第二个文件包含与页面类型相关的代码。第三个文件包含仅与该页面相关的代码。像这样使用范围可以帮助您只保留页面上需要的代码。随着应用程序变得越来越复杂，我可能会进一步将每个大文件分解成较小的文件，以保持一切井井有条。

# ruby-on-rails - 我应该如何在 ruby 中客观化这些数据？

> ID：13423847
> 
> 赞同：-1
> 
> 时间：2012-11-16T20:20:12.737
> 
> 标签：ruby-on-rails, ruby, oop, object-oriented-analysis

我将以下文本放入一些 Ruby 对象中，以便我可以将它们写入数据库以在 Rails 应用程序中使用。这些数据是波浪预报模型的一些输出，该模型显示了海洋中特定点的海洋膨胀。第一列是日期和小时，然后是组合膨胀（对此不感兴趣），然后是单个膨胀，在任何一个小时内可能出现 1 到 6 个膨胀。

```
 +-------+-----------+-----------------+-----------------+-----------------+
 | day & |  Hst  n x |    Hs   Tp  dir |    Hs   Tp  dir |    Hs   Tp  dir |
 |  hour |  (m)  - - |    (m)  (s) (d) |    (m)  (s) (d) |    (m)  (s) (d) |
 +-------+-----------+-----------------+-----------------+-----------------+
 | 15  3 | 0.94  3   |   0.74  4.4  69 |   0.43 10.6 186 |   0.39  4.8 351 |
 | 15  4 | 0.90  3   |   0.71  4.2  68 |   0.43 10.7 186 |   0.34  4.7 347 |
 | 15  5 | 0.85  3   |   0.65  4.1  72 |   0.42 10.7 186 |   0.35  4.4 351 |
 | 15  6 | 0.81  3   |   0.61  4.2  72 |   0.42 10.7 186 |   0.32  4.5 350 |
 | 15  7 | 0.77  2   |                 |   0.41 10.8 186 |                 |
 | 15  8 | 0.73  2   |                 |   0.40 10.8 186 |                 |
 | 15  9 | 0.70  3   |   0.51  3.8  74 |   0.40 10.7 187 |   0.26  4.1 350 |
 | 15 10 | 0.67  3   |   0.49  3.8  73 |   0.39 10.7 187 |   0.24  4.2 349 |
 | 15 11 | 0.65  3   |   0.47  3.7  73 |   0.38 10.7 186 |   0.23  4.1 352 |
 | 15 12 | 0.63  2   |                 |   0.37 10.7 187 |                 |
 | 15 13 | 0.63  2   |                 |   0.35 10.6 187 |                 | 
```

我对日期、涌浪数量以及每次涌浪的信息感兴趣。我所追求的是一个包含天/小时作为键的对象，并且还包含每个膨胀的单独数据。涌浪的数量每小时会有所不同。如果我加载行：

```
| 15 11 | 0.65  3   |   0.47  3.7  73 |   0.38 10.7 186 |   0.23  4.1 352 | 
```

我想通过以下调用从对象中获取信息：

```
@forecast.date              #=> 15:11
@forecast.numswells         #=> 3 for the total swells present on that date 
@forecast.swell.1.height    #=> 0.47
@forecast.swell.1.direction #=> 73
@forecast.swell.3           #=> a swell object with all info in it for swell 3 
```

我认为我需要的是一个具有可变长度存储其他对象的对象。那可能吗？关于我应该阅读什么的任何指示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T20:45:58.187

这是一个解析该文本行的对象：

```
class DayOnTheWater

  Swell = Struct.new(:hs, :tp, :d)

  attr_reader :day, :hour

  def initialize data_line
    data = data_line.split(/[|\s]/).delete_if {|col| col.empty?}
    @day = data.shift
    @hour = data.shift
    2.times { data.shift } # remove combined swell data
    @swells = data.each_slice(3).map { |hs, tp, d| Swell.new(hs.to_f, tp.to_f, d.to_i) }
  end

  def swells
    @swells.to_enum
  end

end

example = '| 15 11 | 0.65  3   |   0.47  3.7  73 |   0.38 10.7 186 |   0.23  4.1 352 |'

object =  DayOnTheWater.new(example)
puts "day: #{object.day}"
puts "hour: #{object.hour}"
puts "\nSWELL DATA"
object.swells.each { |swell| puts swell.inspect }
puts "\nExample statistic:"
puts "Max Hs: #{object.swells.max { |a,b| a.hs <=> b.hs }}" 
```

输出：

```
day: 15
hour: 11

SWELL DATA
#<struct DayOnTheWater::Swell hs=0.47, tp=3.7, d=73>
#<struct DayOnTheWater::Swell hs=0.38, tp=10.7, d=186>
#<struct DayOnTheWater::Swell hs=0.23, tp=4.1, d=352>

Example statistic:
Max Hs: #<struct DayOnTheWater::Swell hs=0.47, tp=3.7, d=73> 
```

结构适用于简单的值对象。它们有缺点，但输入起来很快。对于公开事物列表的对象，我总是返回一个 Enumerable 而从不返回底层数据对象（这里的 swells 方法）。这很重要，因为 Enumerables 是不可变的（只读）；这可以防止其他对象更改数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T04:41:42.060

一些建议：

*   你应该更好地使用`swells`复数而不是`swell`一组东西。
*   对于不同长度的东西，Array 是最合适的。当引用 Array 的特定元素时，您应该使用`[]`方法而不是`1`,`2`等方法。（可能首先这是不可能的）。在这种情况下，请注意您应该从 开始`0`，而不是`1`。
*   `length`您可以通过在膨胀上应用该方法轻松获得膨胀的数量。你不应该有一个特定的方法`numswells`，除非它会被特别频繁地使用。

我会做这样的事情：

```
data =
"| 15 11 | 0.65  3   |   0.47  3.7  73 |   0.38 10.7 186 |   0.23  4.1 352 |"

class Forecast
  attr_reader :date, :swells
  def initialize string
    _, date, _, swells = string.split("|", 4)
    @date = date.scan(/\d+/).join(":")
    @swells = swells.scan(/[^\|]+/).select{|s| s =~ /\S/}.map{|s| Swell.new(s)}
  end
end

class Swell
  attr_reader :height, :tp, :direction
  def initialize string
    @height, @tp, @direction = string.split(/\s+/).drop(1).map(&:to_f)
  end
end

@forecast = Forecast.new(data)
p @forecast.date
p @forecast.swells.length
p @forecast.swells[0].height
p @forecast.swells[0].direction
p @forecast.swells[2]

#=> "15:11"
#=> 3
#=> 0.47
#=> 73.0
#=> #<Swell:0x000000016401d0 @height=0.23, @tp=4.1, @direction=352.0> 
```

# android - android 根据版本应用样式

> ID：13423854
> 
> 赞同：0
> 
> 时间：2012-11-16T20:20:56.057
> 
> 标签：android, android-layout, android-xml

在 android 中，我可以应用基于版本的自定义样式：

```
+-res/values-v14/styles.xml
+-res/values/styles.xml 
```

但是，如何根据版本应用定义的样式？

在值/styles.xml 中：

```
<style name="spinner_textview">
    <item name="style">@android:style/Widget.Spinner></item>
</style> 
```

以下行导致eclipse中的错误

```
<item name="style">@android:style/Widget.Spinner</item> 
```

Eclipse 说：找不到与给定名称匹配的资源：attr 'style'。

有没有办法可以应用基于 api 版本的样式？

**PS：我正在尝试申请`@android:style/Widget.DeviceDefault.Spinner`a `TextView`，但该样式仅在 api 14+ 中可用；**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:08:29.733

您正在尝试在样式声明中指定样式。

相反，您的样式应该具有“@android:style/Widget.Spinner”，因为它是继承其所有属性的父级。

```
<style name="spinner_textview" parent="@android:style/Widget.Spinner" >
 ...
</style> 
```

这种相同的样式应该有不同的父版本，具体取决于版本（通过使用 values-XX 文件夹）

# java - 在 java regexp 中使用贪婪量词 X* 时如何保留所有出现的 X？

> ID：13423859
> 
> 赞同：1
> 
> 时间：2012-11-16T20:21:17.283
> 
> 标签：java, regex, pattern-matching

我有一个正则表达式，我用它来查找字符串中 <> 之间的逗号分隔单词列表的匹配项，就像`"Hello <a1> sqjsjqk <b1,b2> dsjkfjkdsf <c1,c2,c3> ffsd"`在示例中一样

我想使用捕获组来保留大括号之间的每个单词：

这是我的表达：（`< (\w+) (?: ,(\w+) )* >`添加空格是为了便于阅读，但不是模式的一部分）

括号用于创建捕获组，`(?: )`用于创建非捕获组，因为我不想保留昏迷。

这是我的测试代码：

```
@Test
public void test() {
    String patternString = "<(\\w+)(?:,(\\w+))*>";
    Pattern pattern = Pattern.compile(patternString);
    Matcher matcher = pattern.matcher("Hello <a1> sqjsjqk <b1,b2> dsjkfjkdsf <c1,c2,c3> ffsd");
    while(matcher.find()) {
        System.out.println("== Match ==");
        MatchResult matchResult = matcher.toMatchResult();
        for(int i = 0; i < matchResult.groupCount(); i++) {
            System.out.println("  " + matchResult.group(i + 1));
        }
    }
} 
```

这是产生的输出：

```
== Match ==
  a1
  null
== Match ==
  b1
  b2
== Match ==
  c1
  c3 
```

这就是我想要的：

```
== Match ==
  a1
== Match ==
  b1
  b2
== Match ==
  c1
  c2
  c3 
```

由此我了解到，在我的表达式中，组的数量与捕获组的数量一样多，但这不是我想要的，因为我需要所有被识别为 `\w+`

有没有机会用一个 RegExp 得到我想要的东西，或者我应该用 , 等来完成`split(",")`工作`trim()`......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:25:10.470

据我所知，.NET 有唯一的正则表达式引擎，它可以为单个捕获组返回多个捕获。所以你所要求的在 Java 中是不可能的（至少不是你要求的方式）。

但是，在您的情况下，这个问题可以在一定程度上得到解决。如果您可以确定永远不会有无与伦比的收盘`>`，您可以制作您想要捕获完整匹配的东西，并通过[前瞻](http://www.regular-expressions.info/lookaround.html)要求正确的位置：

```
"\\w+(?=(?:,\\w+)*>)" 
```

这永远无法匹配外部的“单词” `<...>`，因为它们无法通过开头`<`来匹配结尾`>`。当然，这使得区分来自不同集合的元素变得困难`<...>`。

或者（我认为这更好，因为它更安全，更易读），采用两步算法。第一场比赛

```
"<([\\w,]*)>" 
```

然后`split`每个结果的第一次捕获在`,`.

# jquery - div.dialog() 不生成对话框

> ID：13423862
> 
> 赞同：0
> 
> 时间：2012-11-16T20:21:36.250
> 
> 标签：jquery, asp.net, jquery-ui-dialog

我正在使用 jQuery 创建一个对话框，其中包含来自名为“dialog-tatto”的 div 的内容。但由于某种原因，它不起作用。这是我当前的代码：

```
 var button = $(".ui-dialog-buttonpane button:contains(\"New\")"); 
    $(button).show();
    button = $(".ui-dialog-buttonpane button:contains(\"Update\")");
    $(button).hide();
    $("#dialog-tattoo").dialog("open"); 
```

这是我的 div：

```
 <div id="dialog-tattoo">
            <table>
                <tr>
                    <td>
                        <asp:Label ID="lblPersonMarkType" runat="server" Text="Mark type:" meta:resourcekey="lblPersonMarkTypeResource1" />
                        <asp:DropDownList ID="ddlPersonMarkType" Width="120px" runat="server" AppendDataBoundItems="True"
                            DataSourceID="dsPersonMarkType" DataTextField="ScarTattooName" DataValueField="ScarTattooTypeID"
                            OnPreRender="ddl_PreRender" meta:resourcekey="ddlPersonMarkTypeResource1">
                            <asp:ListItem Value="-1" meta:resourcekey="ListItemResource1">--Select--</asp:ListItem>
                        </asp:DropDownList>
                    </td>
                    <td>
                        <asp:Label ID="lblPersonBodyLocation" runat="server" Text="Body Location:" meta:resourcekey="lblPersonBodyLocationResource1" />
                        <asp:DropDownList ID="ddlPersonBodyLocation" Width="120px" runat="server" AppendDataBoundItems="True"
                            DataSourceID="dsPersonBodyLocation" DataTextField="BodyLocation" DataValueField="BodyLocationID"
                            OnPreRender="ddl_PreRender" meta:resourcekey="ddlPersonBodyLocationResource1">
                            <asp:ListItem Value="-1" meta:resourcekey="ListItemResource1">--Select--</asp:ListItem>
                        </asp:DropDownList>
                    </td>
                </tr>
                <tr>
                    <td colspan='2'>
                        <asp:Label ID="lblPersonMarkDescription" runat="server" Text="Description:" meta:resourcekey="lblPersonMarkDescriptionResource1" />
                        <asp:TextBox ID="txtPersonMarkDescription" runat="server" Height="40px" TextMode="MultiLine"
                            Width="400px" meta:resourcekey="txtPersonMarkDescriptionResource1" />
                    </td>
                </tr>
            </table>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:25:41.213

用这个

```
$("#dialog-tattoo").dialog(); 
```

代替

```
$("#dialog-tattoo").dialog("open"); 
```

[**演示**](http://jsfiddle.net/VZDan/1/)。

**更新：（**带标题）

```
$("#dialog-tattoo").dialog({
    title:'This is my Title'
}); 
```

[**演示**](http://jsfiddle.net/VZDan/2/)。

**更新：（**对于动态按钮）

```
$("<div/>",{
    'text':'Button',
    'id':'btn1',
    'class':'myBtn',
    'style':'margin:5px;color:green;'
}).button().appendTo('body'); 
```

[**演示**](http://jsfiddle.net/VZDan/5/)。

# xml - xsl 在 xml 中定义

> ID：13423864
> 
> 赞同：0
> 
> 时间：2012-11-16T20:21:46.327
> 
> 标签：xml, xslt, namespaces, xsd

我在 movies.xml 中的前几行如下：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="movies_style.xsl"?>
<movies 
    xmlns="http://www.w3schools.com" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.w3schools.com file:///B:/USC/Academic/DBMS/HWS/no3/movie_sch.xsd"> 
```

movies_style.xsl 中的前几行如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:fo="http://www.w3.org/1999/XSL/Format"> 
```

问题是如果从movies.xml文件中删除模式文件链接并仅保留标记，`<movies>`则正确样式的表显示为输出，否则浏览器中不显示任何内容，并且控制台中显示错误为：

“从带有 URL 文件:///B:/USC/Academic/DBMS/HWS/no3/movies 的框架中加载 URL 文件：///B:/USC/Academic/DBMS/HWS/no3/movies_style.xsl 的不安全尝试.xml。域、协议和端口必须匹配。”

看起来像一些命名空间错误。谁能指出到底是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T00:04:08.363

已将 targetnamespace 指定为 w3schools.org。那不应该在那里。这就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:58:07.260

问题似乎是架构文件不可通过网络访问。它位于使用文件访问的 B: 驱动器上：但 XML 和 XSL 可能使用 http: 访问，并且浏览器（假设您正在使用浏览器查看）不会使用文件加载：由于安全问题。尝试重新定位架构文件，以便可以使用 HTTP 加载它。

# foursquare - 探索 API 端点中的类别支持

> ID：13423865
> 
> 赞同：2
> 
> 时间：2012-11-16T20:22:03.183
> 
> 标签：foursquare

我想使用类别来探索一个区域。

如果我`categoryId`在对探索端点的调用中包含一个，它似乎可以工作！但是，这没有记录（在已经实验的 API 上），所以我对使用它不是超级舒服。

此端点上没有正式支持类别是否有原因？

相关，我应该在一个区域中的探索和搜索之间看到什么区别（`intent`设置为`browse`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:52:56.703

场地/探索终点很快，因此经常会出现实验性的、未记录的参数。这也意味着未记录参数的行为可能随时改变。虽然我们尽量避免做出破坏现有用户的更改，但请注意，仅应依赖记录在案的行为。

# html - 格式化 HTML 代码的工具

> ID：13423866
> 
> 赞同：4
> 
> 时间：2012-11-16T20:22:17.577
> 
> 标签：html, web-applications, formatting, format

是否有一个工具/网络应用程序可以自动将 HTML 文件整理到正确的选项卡结构中？例如，从此：

```
<table><tr><td>Hello Wolrd</td></tr></table> 
```

对此：

```
<table>
    <tr>
        <td>Hellow World!</td>
    </tr>
</table> 
```

我与很多其他人的代码一起工作，我无法忍受 HTML 中糟糕的组织。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:23:37.693

我使用[http://jsbeautifier.org/](http://jsbeautifier.org/)，它非常适用于 HTML 和 JavaScript，此外您还可以配置标识、大括号和其他东西

在这种情况下，您的代码的输出是：

```
<table>
    <tr>
        <td>Hello Wolrd</td>
    </tr>
</table> 
```

还有[http://dirtymarkup.com/](http://dirtymarkup.com/)似乎也很有用。

我发现[http://www.freeformatter.com/html-formatter.html](http://www.freeformatter.com/html-formatter.html)有各种格式化程序和验证程序。

还有[http://infohound.net/tidy/](http://infohound.net/tidy/)它似乎可以生成所有有效的 HTML 标记，以备不时之需。

另一个是[http://www.cleanuphtml.com/cleanup.html](http://www.cleanuphtml.com/cleanup.html)和通用的[http://prettydiff.com/](http://prettydiff.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:52:02.647

如果您经常使用 HTML，那么您需要某种编辑器/开发环境来帮助您。

有很多，它们很可能会提供除格式化之外的生产力功能。

所以我的建议是货比三家，看看哪个编辑器/环境最适合您的需求，并使用该特定工具提供的任何格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T18:16:16.960

在商业上，Adobe 的 Dreamweaver 有一个非常非常好的“应用源格式”功能。这可能不是您所说的价格点，但是如果您已经拥有许可证，它就可以很好地工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-30T06:06:14.613

您可以使用 Web 应用程序来格式化 HTML 文本。我经常使用的网络应用程序位于 [HTML text freeformatter](http://www.freeformatter.com/html-formatter.html)。只需按照 2-3 个步骤，您将获得格式正确的 HTML 文本。

如果您使用的是 microsoft visual studio 2012 或更高版本，您可以使用以下命令来格式化 HTML 文本-

> Ctrl+k、Ctrl+f

# sql - 在删除语句中忽略聚集和覆盖索引。发生表扫描

> ID：13423867
> 
> 赞同：3
> 
> 时间：2012-11-16T20:22:17.993
> 
> 标签：sql, sql-server-2005, database-design, indexing, database-scan

**为什么 SQL Server 2005 会发现执行表扫描比使用主键（并且仅主键）上可用的聚集索引更有效？**

**免责声明**：主键上*还有*一个非聚集、非唯一索引，没有包含列。这让我感到莫名其妙，我们已经在办公室笑得很好。如果这个指数最终成为问题，那么我们就知道该射击谁了。不幸的是，它是一个生产站点，我不能只是把它撕掉，但如有必要，我会制定计划。

也许问题不在于智力缺陷的相反指数，然而……

根据 FogLight PASS 的说法，当我们通过主键删除一行时，以下语句会导致每小时扫描约 600 次约 1000 万行的表：

```
DELETE FROM SomeBigTable WHERE ID = @ID 
```

表 DDL：

```
CREATE TABLE [SomeBigTable]
(
    [ID] [int] NOT NULL,
    [FullTextIndexTime] [timestamp] NOT NULL,
    [FullTextSearchText] [varchar] (max) NOT NULL,
    CONSTRAINT [PK_ID] PRIMARY KEY CLUSTERED
    (
        [ID] ASC
    )
) -- ...
ON PRIMARY 
```

聚集索引约束详解：

```
ADD CONSTRAINT [PK_ID] PRIMARY KEY CLUSTERED
(
    [ID] ASC 
) WITH  PAD_INDEX = OFF
       ,STATISTICS_NORECOMPUTE = OFF
       ,SORT_IN_TEMPDB = OFF
       ,IGNORE_DUP_KEY = OFF
       ,ONLINE = OFF
       ,ALLOW_ROW_LOCKS = ON
       ,ALLOW_PAGE_LOCKS = ON
       ,FILLFACTOR = 75
ON PRIMARY 
```

同一张表上的非唯一、非聚集索引：

```
CREATE NONCLUSTERED INDEX [IX_SomeBigTable_ID] ON [SomeBigTable]
(
    [ID] ASC
) WITH  PAD_INDEX = OFF
       ,STATISTICS_NORECOMPUTE = OFF
       ,SORT_IN_TEMPDB = OFF
       ,IGNORE_DUP_KEY = OFF
       ,ONLINE = OFF
       ,ALLOW_ROW_LOCKS = ON
       ,ALLOW_PAGE_LOCKS = ON
       ,FILLFACTOR = 98
ON PRIMARY 
```

[ID] 列上还有一个外键约束，指向一个同样大的表*。*

600 次表扫描约占使用相同语句对该表每小时进行的总删除操作的 4%。因此，并非此语句的所有执行都会导致表扫描。

不言而喻，但无论如何都要说...这是我想发送包装的很多讨厌的 I/O。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:58:34.297

您是否尝试过重新计算表上的[统计信息](http://msdn.microsoft.com/en-us/library/ms187348%28v=sql.90%29.aspx)并清除您的 proc[缓存](http://blog.sqlauthority.com/2007/03/23/sql-server-stored-procedure-clean-cache-and-clean-buffer/)？例如这样的：

```
USE myDatabase;
GO

UPDATE STATISTICS SomeBigTable;
GO

DBCC FREEPROCCACHE
DBCC DROPCLEANBUFFERS 
```

可能是 sql server 只是使用了错误的索引，因为当表中有不同的数据时，它缓存了一个错误的计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:09:49.313

有些事情要尝试，有些事情要检查：

你在`DELETE SomBigTable where ID = @Parameter`发表声明吗？如果是这样，@Parameter 是 int 类型，还是与被删除的列不同的数据类型？（可能不是，但我曾经遇到过一个字符串被转换为 unicode 的情况，这导致索引被忽略。）

制作数据库的副本并弄乱它：

*   尝试确定哪些删除会导致扫描，哪些不会
*   是否与FK相关表中数据的存在或不存在有关？
*   外键是否可信（通过 sys.foriegn_keys 检查）
*   放下 FK。它有什么改变吗？
*   删除第二个索引。这有什么改变吗？

可能都不是这些，但是在与它们混在一起时，您可能会偶然发现真正的问题。

# mysql - CodeIgniter SQL 更新和联合在一起？

> ID：13423870
> 
> 赞同：1
> 
> 时间：2012-11-16T20:22:40.633
> 
> 标签：mysql, sql, codeigniter, passwords

我有一个更新 MD5 加密密码的表单。在此过程中，密码字段已更新为随机令牌，然后作为链接的一部分通过电子邮件发送给用户，然后该令牌用于匹配要更新的帐户。

我必须检查两个表，因为我们将管理员和用户分成不同的表。我收到以下 SQL 错误。SQL 和 CodeIgniter 对我来说都很新。

SQL 错误：

```
Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UNION UPDATE staff SET staff_password = '098f6bcd4621d373cade4e832627b4f6' WHERE' at line 1

UPDATE admin SET admin_password = '098f6bcd4621d373cade4e832627b4f6' WHERE admin_password = 'fd323219f98afd367fee9907173012db' UNION UPDATE staff SET staff_password = '098f6bcd4621d373cade4e832627b4f6' WHERE staff_password = 'fd323219f98afd367fee9907173012db' 
```

型号代码：

```
public function update_password() {
    $sql = "UPDATE admin SET admin_password = ? WHERE admin_password = ? UNION UPDATE staff SET staff_password = ? WHERE staff_password = ?";
    $password = $this->input->post('password');
    $token = $this->input->post('token');
    $query = $this->db->query($sql, array($password, $token, $password, $token));

    if($query->num_rows() == 1) {
        return true;
    } else {
        return false;
    }
} 
```

令牌在视图中设置为隐藏字段：

```
<input type="hidden" name="token" value="<?php echo $token;?>" id="token"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:52:52.407

您可以单独更新表：

```
$this->db->update('admin',array('admin_password'=>'098f6bcd4621d373cade4e832627b4f6'),'id = 123');
$this->db->update('staff',array('staff_password'=>'098f6bcd4621d373cade4e832627b4f6'),'id = 456'); 
```

您还可以使用方法链接：

```
$this->db->where('id','123')->update('admin',array('admin_password'=>'newpass')); 
```

正如 tadman 所说，检查用户 ID 而不是密码要好得多。

查看[https://www.codeigniter.com/userguide2/database/active_record.html](https://www.codeigniter.com/userguide2/database/active_record.html)

并供将来参考：[https ://www.codeigniter.com/userguide2/libraries/encryption.html](https://www.codeigniter.com/userguide2/libraries/encryption.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:49:30.533

更新两个表时，您需要指定它们的连接方式：

```
UPDATE admin, staff
  SET admin_password=? staff_password=?
  WHERE admin_password=? AND staff_password = ? 
```

通常你会看到类似`staff.admin_id=admin.id`确保两个表连接在一起的东西。你在这里做的事情看起来很可怕。如果两个人的密码相同怎么办？你要同时改变它们。

`WHERE admin.id=?`在特定记录上更新为零会更安全。

# list - Prolog：编写现有列表的每个元素

> ID：13423871
> 
> 赞同：1
> 
> 时间：2012-11-16T20:22:41.040
> 
> 标签：list, prolog

我正在尝试做两件事。(1) 显示现有列表的每个元素，以及 (2) 搜索列表以显示包含该元素的所有名称。

以下是一些事实：

```
 classes(hannes, [cs490, cs499, cs413]).   % name has this list of classes
 classes(tony, [ma330, ma211, ma250]).
 classes(nicholas, [cs424, cs570, ma330]).
 classes(pj, [ma211, ma250, ma285, cs424]).
 classes(inga, [cs285, cs307, cs309]).
 classes(christine, [ma285, ma211, ma330]).
 classes(lisa, [cs424, cs413, cs490]).
 classes(marty, [cs570, cs424]). 
```

而且，到目前为止，这是我的规则：

```
 taking(N,C) :-               % student Name N is taking class C
      classes(N,Cs),
      [C|T] = Cs. 
```

目前，我知道这只需要列表的头部并显示它。我需要显示列表的每个项目（一次一行，如果很容易做到，但不重要）。但是，我也需要能够反过来做。如果查询 1 门课程（ma330），我希望它显示所有拥有该特定课程的学生。

查询示例1：

```
?- taking(nicholas, Classes).
Classes = [cs424, cs570, ma330] ; 
```

或者

```
?- taking(nicholas, Classes).
Classes = cs424 ;
Classes = cs570 ;
Classes = ma330 ; 
```

查询示例2：

```
?- taking(Names, ma330).
Names = tony ;
Names = nicholas ;
Names = christine ; 
```

我将继续寻找解决方案，但如果有人可以提供帮助，将不胜感激。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:15:18.180

想一想：C 是类的成员。

**编辑**确定试试这个代码：

```
taking(N,C) :-               % student Name N is taking class C
      classes(N,Cs),
      member(C, Cs). 
```

# java - 使用 Play 框架的 OpenID

> ID：13423872
> 
> 赞同：1
> 
> 时间：2012-11-16T20:22:41.633
> 
> 标签：java, playframework, openid

我正在创建一个网站，我希望用户能够使用 openID 帐户登录。我正在使用 java 和 play 框架。他们需要能够登录才能查看网站的某些部分。

我已经阅读了这里的信息： [http ://www.playframework.org/documentation/2.0/JavaOpenID](http://www.playframework.org/documentation/2.0/JavaOpenID)

我在这里下载了openid4java： [http ://code.google.com/p/openid4java/downloads/detail?name=openid4java-0.9.6.662.tar.gz&can=2&q=](http://code.google.com/p/openid4java/downloads/detail?name=openid4java-0.9.6.662.tar.gz&can=2&q=)

我是否应该将此下载中的所有 .jar 作为参考库导入到我的项目中？

我不太确定从哪里开始配置它，因为戏剧网站上的文档似乎含糊不清。

非常感谢提供的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:26:32.010

[使用http://securesocial.ws/](http://securesocial.ws/)插件 要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:34:08.967

有完整的身份验证/授权堆栈可用作模块 -[玩！认证](http://joscha.github.com/play-authenticate/)

它允许您向许多提供商注册用户，也可以使用 OpenID 或仅使用电子邮件。此外，还支持多语言、模板自定义（也在电子邮件中）等。最后，它最初是与[DeadBolt2](https://github.com/schaloner/deadbolt-2/blob/master/README.textile)一起提供的- 具有角色和用户权限的授权解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:30:37.293

与任何其他依赖项一样，您应该将 OpenID 依赖项添加到项目中，作为[sbt 依赖项管理](http://www.playframework.org/documentation/2.0/SBTDependencies)的一部分，以便它们在运行时可用。

# mongodb - 从 MongoDB 中的对象数组中删除单个对象

> ID：13423873
> 
> 赞同：6
> 
> 时间：2012-11-16T20:22:50.037
> 
> 标签：mongodb

假设我们有以下文档集合：

```
{ "_id" : ObjectId("50a69fa904c8310609600be3"), "id" : 100, "city" : "San Francisco", "friends" : [     {   "id" : 1,   "name" : "John" },  {   "id" : 2,   "name" : "Betty" },     {   "id" : 3,   "name" : "Harry" } ] }
{ "_id" : ObjectId("50a69fc104c8310609600be4"), "id" : 200, "city" : "Palo Alto", "friends" : [     {   "id" : 1,   "name" : "Carol" },     {   "id" : 2,   "name" : "Frank" },     {   "id" : 3,   "name" : "Norman" } ] }
{ "_id" : ObjectId("50a69fc304c8310609600be5"), "id" : 300, "city" : "Los Angeles", "friends" : [   {   "id" : 1,   "name" : "Fred" },  {   "id" : 2,   "name" : "Neal" },  {   "id" : 3,   "name" : "David" } ] }
    .
    .
    . 
```

现在假设 Frank (Palo Alto, id=2) 不再是我的朋友，我想将他从集合中删除。我认为以下可能有效，但它没有：

```
db.test.update({"city":"Palo Alto"},{"$pull":{"friends.name":"Frank"}}) 
```

我希望能够做这样的事情。删除文档集合中数组中的对象。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T20:35:48.223

你很亲密。查询应该是这样的：

```
db.test.update({"city":"Palo Alto"},{"$pull":{"friends":{"name":"Frank"}}}); 
```

`$pull`接受一个对象，其字段指定字段数组`"friends"`。该值`{"name":"Frank"}`表示查询（在数组内部运行）以查找要拉出的元素。

# c# - 避免刷新数据绑定下拉列表

> ID：13423874
> 
> 赞同：0
> 
> 时间：2012-11-16T20:22:52.513
> 
> 标签：c#, asp.net, data-binding

我正在开发一个指标屏幕，该屏幕将根据数据库中的不同组显示多个图表。它的一部分使用隐藏选定图表的功能，直到用户单击以显示它们。

问题是这样的：我在下拉列表中使用了 Databind，所以每次我选择一个新组时，页面都会刷新，并且所有内容都会返回到默认状态。

我的问题是：有没有一种方法可以避免每次从下拉列表中选择新选项时刷新页面？如果是这样，怎么做？如果没有，是否有更好的方法来创建下拉列表并为其附加值？如果我设置`AppendDataBoundItems`为`false`，那么我总是将所选值作为列表中的第一项。

这是我的下拉列表代码：

```
 <asp:DropDownList ID="MinistryDropdown" OnSelectedIndexChanged="Selection_Change" AutoPostback="true" AppendDataBoundItems="true" runat="server"/> 
```

然后它背后的C#代码是这样的：

```
public void Page_Load(object sender, EventArgs e){
    MinistryDropdown.DataSource = CreateDataSource();
    MinistryDropdown.DataTextField = "Description";
    MinistryDropdown.DataValueField = "Description";
    MinistryDropdown.DataBind();

...other code here...
}
ICollection CreateDataSource(){
    DataTable Ministries = new DataTable();

    Ministries = oDatabase.GetData(@"SELECT DISTINCT B.Description
        FROM tblInvolvement AS A LEFT JOIN tblMinistries AS B
        ON A.Activity = B.MinistryID");

    DataView dv = new DataView(Ministries);
    return dv;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:43:10.243

尝试使用 ASP.NET UpdatePanel。只需将您的 DropDownList 包装在其中，它应该可以工作。这是一个我没有测试的简单示例。

```
<asp:ScriptManager ID="ScriptManager" runat="server"></asp:ScriptManager>
<asp:UpdatePanel runat="server" UpdateMode="Conditional">
    <ContentTemplate>
       <asp:DropDownList ID="MinistryDropdown" OnSelectedIndexChanged="Selection_Change" AutoPostback="true" AppendDataBoundItems="true" runat="server"/>
    </ContentTemplate>
</asp:UpdatePanel> 
```

最后一点，您很快就会发现此解决方案的局限性，之后您可能更喜欢使用 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:55:34.670

我认为问题在于您正在重新绑定 Page_Load 上的数据，但您没有检查`!IsPostBack`换句话说，您的代码是否应该如下所示：

```
public void Page_Load(object sender, EventArgs e){
   if(!IsPostBack)
    {
       MinistryDropdown.DataSource = CreateDataSource();
       MinistryDropdown.DataTextField = "Description";
       MinistryDropdown.DataValueField = "Description";
       MinistryDropdown.DataBind();

      ...other code here...
   }
} 
```

# eclipse - 无法启动 Eclipse Juno

> ID：13423876
> 
> 赞同：0
> 
> 时间：2012-11-16T20:23:05.890
> 
> 标签：eclipse

我对 Eclipse 的这个问题感到非常沮丧。我经历过很多次，坦率地说，我认为 Eclipse 是垃圾。但由于我在那里进行所有 Android 开发，因此没有其他替代 IDE。这是我的问题：我无法启动 Eclipse。我完全没有改变，突然之间的`.log`文件`.metadata`抛出以下堆栈跟踪错误：

```
!ENTRY org.eclipse.osgi 4 0 2012-11-16 15:07:22.032
!MESSAGE Application error
!STACK 1
java.lang.NullPointerException
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.processHierarchy(E4Workbench.java:172)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.init(E4Workbench.java:118)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.<init>(E4Workbench.java:69)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.createE4Workbench(E4Application.java:302)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:557)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

我不知道该怎么办！我在任何地方都没有 .snap 文件。我还能尝试什么？？？

谢谢大家的帮助，伊戈尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:27:11.080

我偶尔也会遇到这个问题，确实令人沮丧。对我来说解决这个问题的是进入我的 eclipse 工作区：`<workspace>/.metadata/.plugins`并开始删除东西。这里的大部分东西都是自动生成的；设置等。我认为您可以保留`org.eclipse.core.resources`（这是您自己的很多用户设置区域）。

不幸的是，这使工作区忘记了您正在处理的项目，因此您必须重新添加它们，但对我来说这没什么大不了的，因为我将它们存储在我的文件系统的其他位置。

希望这会有所帮助！

# sql - 用Sql计算酒店的峰值容量

> ID：13423878
> 
> 赞同：2
> 
> 时间：2012-11-16T20:23:14.630
> 
> 标签：sql, oracle, oracle11gr2

有许多酒店的床位容量不同。我需要了解任何一天，每家酒店占用了多少张床位。

样本数据：

```
 HOTEL      CHECK-IN     CHECK-OUT
   A       29.05.2010   30.05.2010
   A       28.05.2010   30.05.2010
   A       27.05.2010   29.05.2010
   B       18.08.2010   19.08.2010
   B       16.08.2010   20.08.2010
   B       15.08.2010   17.08.2010 
```

中间结果：

```
HOTEL      DAY          OCCUPIED_BEDS
  A     27.05.2010           1      
  A     28.05.2010           2
  A     29.05.2010           3
  A     30.05.2010           2
  B     15.08.2010           1
  B     16.08.2010           2
  B     17.08.2010           2
  B     18.08.2010           2
  B     19.08.2010           2
  B     20.08.2010           1 
```

最后结果：

```
 HOTEL     MAX_OCCUPATION  
   A            3
   B            2 
```

[之前有人问过类似的问题。](https://stackoverflow.com/questions/8674837/sql-how-many-employees-are-working-group-by-hour?rq=1)我想获取两个日期之间的日期列表（[如 Tom Kyte 所示](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:14582643282111)`group by`）并使用. 问题是我的桌子比较大，我想知道是否有更便宜的方法来完成这项任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:37:59.807

I don't think there's a better approach than the one you outlined in the question. Create your days table (or generate one on the fly). I personally like to have one lying around, updated once a year.

Someone who understand analytic functions will probably be able to do this without an inner/outer query, but as the inner grouping is a subset of the outer, it doesn't make much difference.

```
Select
  i.Hotel,
  Max(i.OccupiedBeds)
From (
  Select
    s.Hotel,
    d.DayID,
    Count(*) As OccupiedBeds
  From
    SampleData s
      Inner Join
    Days d
      -- might not need to +1 depending on business rules.
      -- I wouldn't count occupancy on the day I check out, if so get rid of it
      On d.DayID >= s.CheckIn And d.DayID < s.CheckOut + 1 
  Group By
    s.Hotel, 
    d.DayID
  ) i
Group By
  i.Hotel 
```

After a bit of playing I couldn't get an analytic function version to work without an inner query:

If speed really is a problem with this, you could consider maintaining an intermediate table with triggers on main table.

[http://sqlfiddle.com/#!4/e58e7/24](http://sqlfiddle.com/#!4/e58e7/24)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:30:40.203

创建一个包含您感兴趣的日期的临时表

```
create table #dates (dat datetime)
insert into #dates (dat) values ('20121116')
insert into #dates (dat) values ('20121115')
insert into #dates (dat) values ('20121114')
insert into #dates (dat) values ('20121113') 
```

通过加入带有日期的预订来获得中间结果，以便每个预订日“生成”一个

```
SELECT Hotel, d.dat, COUNT(*) from bookings b
INNER JOIN #dates d on d.dat BETWEEN b.checkin AND b.checkout
GROUP BY Hotel, d.dat 
```

终于拿到Max了

```
SELECT Hotel, Max(OCCUPIED_BEDS) FROM IntermediateResult GROUP BY Hotel 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T14:06:39.063

性能问题在于连接条件不是基于相等性，这使得哈希连接成为不可能。假设我们有一张hotel_day 表，里面有酒店天对，我会尝试这样的事情：

```
select ch_in.hotel, ch_in.day,
       (check_in_cnt - check_out_cnt) as occupancy_change
from   ( select d.hotel, d.day, count(s.hotel) as check_in_cnt
         from   hotel_days d,
                sample_data s
         where  s.hotel(+) = d.hotel
           and  s.check_in(+) = d.day
         group  by d.hotel, d.day
       ) ch_in,
       ( select d.hotel, d.day, count(s.hotel) as check_out_cnt
         from   hotel_days d,
                sample_data s
         where  s.hotel(+) = d.hotel
           and  s.check_out(+) = d.day
         group  by d.hotel, d.day
       ) ch_out
where  ch_out.hotel = ch_in.hotel
  and  ch_out.day = ch_in.day 
```

权衡是双重全扫描，但我认为它仍然会运行得更快，并且可以并行化。（我假设 sample_data 很大，主要是由于预订数量，而不是酒店本身的数量。）输出是特定日期特定酒店的入住率变化，但这可以很容易地总结为总值，无论是分析函数或（可能更有效）带有批量收集的 PL/SQL 过程。

# jquery - jQuery：在 IE7 中选择

> ID：13423880
> 
> 赞同：0
> 
> 时间：2012-11-16T20:23:32.317
> 
> 标签：jquery, select, internet-explorer-7

:selected 似乎在 IE7 中不起作用。

```
var selected_value0 = $("#select").find(':selected').attr('value'); 
```

这是一个例子：http: [//jsfiddle.net/clare73/8TLqs/](http://jsfiddle.net/clare73/8TLqs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:28:14.153

不要使用`.attr('value')`，而是使用`.val()`

```
var selected_value0 = $("#select").find(':selected').val(); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/8TLqs/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:26:56.327

您的选项列表没有 value 属性。我假设您正在尝试获取选项的文本，而不是 value。如果是这样使用`.text()`如下，

```
var selected_value0 = $("#select").find(':selected').text(); 
```

**演示：http:** [//jsfiddle.net/8TLqs/1/](http://jsfiddle.net/8TLqs/1/)

如果您试图获取所选选项的值，那么您可以`.val()`像下面这样简单地使用，

```
var selected_value0 = $("#select").val() 
```

对于哪个 HTML 应该是，

```
<select id="select">
   <option value="1" selected="selected">choice 1</option> 
   <option value="1">choice 2</ option> 
</select> 
```

**演示：http:** [//jsfiddle.net/8TLqs/6/](http://jsfiddle.net/8TLqs/6/)

# javascript - 为什么我不能使用任何 DOM 函数？

> ID：13423883
> 
> 赞同：-1
> 
> 时间：2012-11-16T20:23:40.247
> 
> 标签：javascript, html, dom

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<style  type="text/css">
div.main1{
background-color:#EEE;
border: 2px dotted;
padding: 5px;
}
div.sub{
background-color:#DDD;
border: 1px dashed;
padding: 3px;
width:50%;
}
</style>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<script type="text/javascript">
function showOptions(box){
box.childNodes[0].style.visibilty = "visible";
box.childNodes[1].style.visibilty = "visible";
}

function hideOptions(box){
box.childNodes[0].style.visibilty = "hidden";
box.childNodes[1].style.visibilty = "hidden";
}
</script>
<center>

<div class="main1">
<div class="sub" onmouseover="showOptions(this);" onmouseout="hideOptions(this);"><input />               
</div>

</center>
</body>
</html> 
```

以上是我正在使用的代码示例，我正在使用 Dreamweaver ...我担心的是，当我在 showOptions(box) 方法中的“box”之后按 Ctrl + Space 时，我看不到任何 DOM 对象选项，如果我没有任何意义，我深表歉意，因为我对 HTML + Javascript 很陌生，基本上我想做的是检查给定参数是否为 HTML 元素的函数，如果是，允许我访问它的方法，例如作为“childNodes”或“setAttribute()”等等..

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:28:24.997

您所描述的称为 Intellisense/代码提示。据我了解，Dreamweaver 在这方面做得不是很好。

您是否考虑过使用其他编辑器？如果您主要使用 .Net 以外的代码，那么可能是[Komodo Edit 之](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)类的东西。

如果您要走 .Net 路线，那么当然有[Visual Studio Express](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)，它在 Intellisense/代码提示方面做得更好

**编辑**

此外，您正试图查看方法本身的智能感知——这不是本意。它旨在从其他地方查看该方法。因此，理想情况下，您可以使用 CTRL+空格，如下所示：

```
 onmouseover="showOptions(this);"
    -------------------------^Here 
```

**另一个编辑**

另外，看看你的代码，它不会工作..

您正在引用一个不存在的孩子：

```
box.childNodes[1].style.visibilty = "hidden"; 
```

childNodes 从零开始`[0]`，`input`. `[1]`没什么。

**最后**

我可以建议你安装[Firefox](http://www.mozilla.org/en-US/firefox/new/)和 Firebug。[Firebug](http://getfirebug.com/)将帮助您调试所有的 javascript。它可以很好地告诉您问题出在哪里/在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:34:41.817

您可以使用 JSDOC 提供有关类型的 IDE 提示

```
/**
 * @param {HTMLElement} box
 */
function showOptions(box){

} 
```

许多 IDE 能够读取该信息并为 HTMLElement 提供正确的方法。但是，我还没有看到一个足够聪明的人知道如果您在之后按 ctrl+space 会提出什么建议`box.childNodes[i]`

# algorithm - 如何在 OpenCV 中使用 BRISK？

> ID：13423884
> 
> 赞同：10
> 
> 时间：2012-11-16T20:23:46.207
> 
> 标签：algorithm, opencv

我找不到任何有关如何在 C/C++ 上的 OpenCV 中使用 BRISK 关键点检测器和提取器的信息。如果有人知道，请写代码或提供参考。谢谢！

PS：以及如何在 OpenCV 2.4.3 中使用它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-12T02:52:46.533

在 OpenCV 2.4.3 中获得活力的另一种方法

包含实现轻快类的头文件“opencv2/features2d/features2d.hpp”

//读取一些灰度图像

```
const char * PimA="box.png";   // object
const char * PimB="box_in_scene.png"; // image

cv::Mat GrayA =cv::imread(PimA);
cv::Mat GrayB =cv::imread(PimB);

std::vector<cv::KeyPoint> keypointsA, keypointsB;
cv::Mat descriptorsA, descriptorsB; 
```

//设置轻快的参数

```
int Threshl=60;
int Octaves=4; (pyramid layer) from which the keypoint has been extracted
float PatternScales=1.0f; 
```

//声明一个cv::BRISK类型的变量BRISKD

```
cv::BRISK  BRISKD(Threshl,Octaves,PatternScales);//initialize algoritm
BRISKD.create("Feature2D.BRISK");

BRISKD.detect(GrayA, keypointsA);
BRISKD.compute(GrayA, keypointsA,descriptorsA);

BRISKD.detect(GrayB, keypointsB);
BRISKD.compute(GrayB, keypointsB,descriptorsB); 
```

声明一种类型的匹配器

```
cv::BruteForceMatcher<cv::Hamming> matcher; 
```

另一个可以使用的匹配

```
//cv::FlannBasedMatcher matcher(new cv::flann::LshIndexParams(20,10,2));

 std::vector<cv::DMatch> matches;
 matcher.match(descriptorsA, descriptorsB, matches);

    cv::Mat all_matches;
    cv::drawMatches( GrayA, keypointsA, GrayB, keypointsB,
                         matches, all_matches, cv::Scalar::all(-1), cv::Scalar::all(-1),
                         vector<char>(),cv::DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );
    cv::imshow( "BRISK All Matches", all_matches );
    cv::waitKey(0);

    IplImage* outrecog = new IplImage(all_matches);
    cvSaveImage( "BRISK All Matches.jpeg", outrecog ); 
```

您还可以使用：特征检测器的通用接口

```
cv::Ptr<cv::FeatureDetector> detector = cv::Algorithm::create<cv::FeatureDetector>("Feature2D.BRISK");

detector->detect(GrayA, keypointsA);
detector->detect(GrayB, keypointsB);

cv::Ptr<cv::DescriptorExtractor> descriptorExtractor =cv::Algorithm::create<cv::DescriptorExtractor>("Feature2D.BRISK");

descriptorExtractor->compute(GrayA, keypointsA, descriptorsA);
descriptorExtractor->compute(GrayB, keypointsB, descriptorsB); 
```

这段代码的结果就像在这个 [http://docs.opencv.org/_images/Feature_Description_BruteForce_Result.jpg](http://docs.opencv.org/_images/Feature_Description_BruteForce_Result.jpg)

# casperjs - CasperJS 不加载页面资源

> ID：13423885
> 
> 赞同：14
> 
> 时间：2012-11-16T20:23:55.307
> 
> 标签：casperjs

我如何告诉 casper 不要加载图像、css、js 视频等。所以我只对 DOM 元素感兴趣。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-17T17:13:22.210

看看[CasperJS API](http://casperjs.org/api.html)。

```
var casper = require('casper').create({
    pageSettings: {
        loadImages:  false,        // do not load images
        loadPlugins: false         // do not load NPAPI plugins (Flash, Silverlight, ...)
    }
}); 
```

# objective-c - iOS - 钥匙串 - 密码箱，第一次启动时不保存数组

> ID：13423887
> 
> 赞同：0
> 
> 时间：2012-11-16T20:24:16.173
> 
> 标签：objective-c, ios, xcode

我可能做错了什么，但是当我使用下面的代码并希望 Lockbox 在应用程序第一次启动时将元素保存到钥匙串时，什么都没有存储。如果我然后再次运行应用程序并在 else 部分中添加元素，那么它会保存数据。

有什么建议么？

```
NSString *value = @"";
NSArray *array = [Lockbox arrayForKey:@"TestKey"];
value = [array componentsJoinedByString:@"|"];

if(value == nil)
{
    BOOL result = NO;
    NSArray *narray = [NSArray arrayWithObjects:
                       [value stringByAppendingString:@"key1"],
                       [value stringByAppendingString:@"key2"],
                       [value stringByAppendingString:@"|http://www.url.com/"],
                       [value stringByAppendingString:@"|http://www.url2.com/"],nil];
    result = [Lockbox setArray:narray forKey:@"TestKey"];
}else{
    NSArray *narray = [NSArray arrayWithObjects:
                       [value stringByAppendingString:@"key1"],
                       [value stringByAppendingString:@"key2"],
                       [value stringByAppendingString:@"|http://www.url.com/"],
                       [value stringByAppendingString:@"|http://www.url2.com/"],nil];
    result = [Lockbox setArray:narray forKey:@"TestKey"];

    NSString *keyv1 =[array objectAtIndex:0];
    NSLog(@"key value %@",keyv1);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:17:06.470

哈！明白了..一开始没看到：

第一次，没有任何东西存储在钥匙串中，所以数组是 NIL

值应该是 [nil componentsJoinedBy...]

价值为零！

所以 [nil stringByAppendinString 将始终为 nil，并且在第一次运行时将保存一个 EMPTY 数组

* * *

在第二次运行时数组不是 nil，因为 Lockbox 会读回空数组（所以一切正常）

想法，改变：

```
NSArray *array = [Lockbox arrayForKey:@"TestKey"];
value = [array componentsJoinedByString:@"|"];

if(value==nil)
... 
```

至

```
NSArray *array = [Lockbox arrayForKey:@"TestKey"];
if(array)
     value = [array componentsJoinedByString:@"|"];
else
     value = @"";

if(value.length)
... 
```

# javascript - facebook登录的安全性（Javascript SDK）

> ID：13423891
> 
> 赞同：1
> 
> 时间：2012-11-16T20:24:27.227
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我想了解如何使用带有 Javascript SDK 的 Facebook 登录安全地保存用户 ID？

我得到它使用

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
     ->>> response.authResponse.userID
    } else if (response.status === 'not_authorized') {
        window.location.href='index.php';
    } else {
        window.location.href='index.php';
    }
});
}; 
```

但我需要将其安全地保存到 mysql 数据库中。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T04:00:16.303

不要这样做——如果有的话，把整个`signedRequest`转移到你的服务器上。然后，您可以对其进行解码并验证它是否已使用您的 签名`app_secret`，并且它仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:24:58.743

如果您试图避免人们假装是其他人并使用该信息来访问您的数据库，那么您真正的问题是 facebook id 不是秘密（根本）。

您可以尝试使用third_party_id 值。每个应用每个用户一个，并且不应该在您的应用之外被发现。如果您正在寻找“足够好”的安全性，它可能会：

`FB.api("/me?fields=third_party_id,username", _updateMe);`

`function _updateMe(response) { /* do something with response.third_party_id; */ }`

# events - (Magento) 未选择时如何在购物车中设置免费送货？

> ID：13423895
> 
> 赞同：1
> 
> 时间：2012-11-16T20:24:44.523
> 
> 标签：events, magento, shopping-cart

我尝试使用事件“controller_predispatch_checkout_cart_index”并使用此功能。仅在我登录后提及，并直接转到页面/结帐/购物车，它不起作用，但重新加载页面后它确实起作用......发生了什么？？？

```
 const FREE_CODE = 'freeshipping_freeshipping';

    public function predispatchCart($observer)
    {
        $quote      = Mage::getSingleton('checkout/cart')->getQuote();

        if(! $quote->getShippingAddress()->getShippingMethod())
        {
            $quote->getShippingAddress()
                    ->setShippingMethod(self::FREE_CODE);
                    //->save();
            return true;
        }
   }
} 
```

# sql - 访问 SQL：子查询到 IIF？

> ID：13423898
> 
> 赞同：1
> 
> 时间：2012-11-16T20:25:00.017
> 
> 标签：sql, vba, ms-access, subquery

我有以下查询可以正常工作：

```
SELECT NomComplet, IIF(Count(FS3.Index) = 0, '0 (RAS)', Count(FS3.Index))  
 FROM ControleAcces INNER JOIN ( 
     Employes LEFT JOIN ( 
         SELECT FS1.Index, FS1.OTP, FS1.OTP, FS1.Axe, FS1.FaitSaillant, FS1.Utilisateur, FS2.DateInsertion  
         FROM FaitsSaillants AS FS1 INNER JOIN ( 
             SELECT Axe, Index, Max(FaitsSaillants.DateInsertion) AS DateInsertion  
             FROM FaitsSaillants  
             WHERE DateValue(DateInsertion) > #2010-01-01#  
             AND DateValue(DateInsertion) < #2011-12-31#  
             GROUP BY Axe, Index 
         ) AS FS2  
         ON (FS1.DateInsertion = FS2.DateInsertion  
         AND FS1.Index = FS2.Index)  
         WHERE FS1.Axe = 'Project' AND FS2.Axe = 'Project' 
     ) AS FS3  
     ON Employes.CIP = FS3.Utilisateur 
 )  
 ON ControleAcces.Valeur = Employes.CIP
 GROUP BY NomComplet
 ORDER BY NomComplet 
```

不要费心去完全理解它，我只希望它在第一行编辑我的 IIF 条件。实际上，条件并没有多大作用，它检查查询返回的 FS3.Index 数量，`(RAS)`如果为 0 则连接。但是，实际上，我希望它检查`FaitsSaillants`where 中是否有任何行`Axe = 'RAS'`。如果 this 的 Count() > 0，则满足条件。

我可以对 IIF 段进行子查询，例如`SELECT COUNT(Index) FROM FaitsSaillants WHERE Axe = 'RAS' AND Utilisateur = FS1.Utilisateur`？如果结果为 0，那么我将添加`RAS`到我的第二个字段的结果中。如果没有，它会保持`Count(FS3.Index)`.

我试过了，虽然语法正确，但问题是它无法检查`Utilisateur = FS1.Utilisateur`条件，因为 FS1 在主查询中。但是，我必须检查这一点，因为这是确保我正在寻找正确的东西的唯一方法：`Utilisateur`无论我是在主查询还是子查询中，它都必须相同。

**编辑：**

这是我从下面的答案/评论中尝试的简短版本。

```
SELECT NomComplet, IIf(FS2.AxeCount > 0, "0 (RAS)", count(FS3.index))
FROM ControleAcces INNER JOIN (Employes LEFT JOIN (SELECT FS2.AxeCount, FS1.Index, FS1.OTP, FS1.OTP, FS1.Axe, FS1.FaitSaillant, FS1.Utilisateur, FS2.DateInsertion  
         FROM FaitsSaillants AS FS1 INNER JOIN ( 
             SELECT Axe, Index, Max(FaitsSaillants.DateInsertion) AS DateInsertion, SUM(IIf(Axe = 'RAS', 1, 0)) As AxeCount  
             FROM FaitsSaillants 
             GROUP BY Axe, Index 
         ) AS FS2  
         ON (FS1.DateInsertion = FS2.DateInsertion  
         AND FS1.Index = FS2.Index)  
     )  AS FS3 ON Employes.CIP = FS3.Utilisateur) ON ControleAcces.Valeur = Employes.CIP
GROUP BY NomComplet; 
```

我仍然收到关于 FS2.AxeCount 的错误，它不是聚合函数 (iff) 的一部分。

我也试过这个：

```
SELECT NomComplet, IIf((select count(*) from FaitsSaillants where axe='RAS' and Utilisateur=ControleAcces.Valeur) > 0, "0 (RAS)", count(FS3.index))
FROM ControleAcces INNER JOIN (Employes LEFT JOIN (SELECT FS2.AxeCount, FS1.Index, FS1.OTP, FS1.OTP, FS1.Axe, FS1.FaitSaillant, FS1.Utilisateur, FS2.DateInsertion  
         FROM FaitsSaillants AS FS1 INNER JOIN ( 
             SELECT Axe, Index, Max(FaitsSaillants.DateInsertion) AS DateInsertion, SUM(IIf(Axe = 'RAS', 1, 0)) As AxeCount  
             FROM FaitsSaillants 
             GROUP BY Axe, Index 
         ) AS FS2  
         ON (FS1.DateInsertion = FS2.DateInsertion  
         AND FS1.Index = FS2.Index)  
     )  AS FS3 ON Employes.CIP = FS3.Utilisateur) ON ControleAcces.Valeur = Employes.CIP
GROUP BY NomComplet, ControleAccess.Valeur; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:51:51.300

我有点不清楚你想在 FaitsSaillants 表中检查什么；你说：

> 我希望它检查 FaitsSaillants 中是否有 Ax = 'RAS' 的行。如果 this 的 Count() > 0，则满足条件。

但你也说：

> 类似于 SELECT COUNT(Index) FROM FaitsSaillants WHERE Ax = 'RAS' AND Employes.CIP = FS3.Utilisateur

我的猜测是您的意思是`SELECT COUNT(Index) FROM FaitsSaillants WHERE Axe = 'RAS'`，因为在第二个 SQL 语句中，您要加入两个未在`FROM`子查询的子句中引用的表。

`DCount`在 IIF 语句中使用怎么样？

```
IIF(DCount("Index", "FaitsSaillants", "Axe='RAS'"), '0 (RAS)', Count(FS3.Index)) 
```

如果您的意思是 ，这应该可以工作`SELECT COUNT(Index) FROM FaitsSaillants WHERE Axe = 'RAS'`，但是如果您有其他想法，则需要对其进行修改。

不过需要注意的是：我会尽量少用“域”函数（DCount、DLookup 等），因为它们很慢。

顺便说一句，我相信你也可以在你的 IIF 语句中使用子查询（它会给你一个错误吗？它似乎对我有用）：

```
IIF((SELECT COUNT(*) FROM FaitsSaillants WHERE Axe = 'RAS'), '0 (RAS)', Count(FS3.Index)) 
```

只要确保将子查询放在括号中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:54:16.620

`FS3.Index`如果没有相应的记录，则为 NULL，因为 LEFT JOIN。不会考试

```
IIf(IsNull(FS3.Index), ..., ...) 
```

……够了吗？我不确定，因为还涉及其他条件和连接。

* * *

**更新**（重述评论）

我们可以从最里面的嵌套 SELECT (FS2) 中获取所需的计数 (AxeCount)：

```
SELECT
    Axe, Index, Max(FaitsSaillants.DateInsertion) AS DateInsertion,
    SUM(IIf(Axe = 'RAS', 1, 0)) As AxeCount
FROM FaitsSaillants  
... 
```

此中间结果必须通过将其包含在中间 SELECT (FS3) 的选择列表中来传递给最外层的 SELECT：

```
SELECT FS2.AxeCount, FS1.Index, ... 
```

最外面的 SELECT 有一个 GROUP BY 子句。在这种情况下，选择列表的所有字段必须包含在 GROUP BY 子句中或必须包含在聚合函数中。GROUP BY 子句按此子句中列出的字段对行进行分组。这通常会减少行数，因为它们的组字段中相似的几行被压缩成一行。这意味着选择列表的其余字段（不在组字段中）的值必须组合在一起。这就是聚合函数的作用。聚合函数是

*   平均（平均）
*   数数
*   第一，最后
*   最小值、最大值（最小值、最大值）
*   StDev、StDevP（标准差）
*   和
*   Var, VarP（方差）

请参见[SQL 聚合函数 (Access)](http://office.microsoft.com/en-us/access-help/sql-aggregate-functions-HP001032172.aspx)

现在，我们可以将它添加到最外层的选择列表中

```
IIf(SUM(FS2.AxeCount) > 0, ..., ...) 
```

# sql - 这是对 temptables 的适当使用吗？

> ID：13423899
> 
> 赞同：2
> 
> 时间：2012-11-16T20:25:00.547
> 
> 标签：sql, sql-server-2008, tsql

我有一个看起来很像这样的数据集：

```
TrxDate     DayOfWk TrxHour TrxName Succeeded
Oct 21 2012 Sunday  0       signon  1
Oct 21 2012 Sunday  0       Bal     1
Oct 21 2012 Sunday  0       Bal     1
Oct 21 2012 Sunday  0       hist    1
Oct 21 2012 Sunday  0       Bal     1 
```

实际上，我需要使用 an`INNER JOIN`来获取 uniqueID 以使结果集看起来像这样，但这是一个细节。我得到的要求是：

*   根据日期、星期几和一天中的小时进行分组。
*   输出每个组的成功登录次数。
*   输出每个组的不成功登录数。
*   输出每个组的登录总数（成功 + 不成功）。
*   输出每个组的事务总数（本质上是`Count(UniqueId)`）。

所以输出应该是这样的：

```
Date        Day of Week Hour    Login Success   Login Failures  Total Logins    Total Transactions
11/15/2012  5           22      12,000          1,000           13,000          25,000 
11/15/2012  5           23      15,223          1,500           16,723          33,000 
11/16/2012  6           0       22,000          3,000           25,000          12,554 
11/16/2012  6           1       18,000          2,000           20,000          15,899 
```

`Date`显然，在呈现方式和`DayOfWk`呈现方式上存在细微的风格差异。它们并不重要。

**问题：**我没有看到比将所有内容转储`INNER JOIN`到一个临时表中并运行扩展查询以以结果集所需的各种方式对该临时表进行编目更好的方法。这`INNER JOIN`涉及到两个具有数十万行的表。这种技术是缓慢的，速度方面的，而臃肿的，记忆方面的。这个解决方案会奏效，但我想对我的工作更自豪一点！有没有人有任何想法来更优雅地完成这一点？

我在下面的答案中大吃一惊。我的查询现在看起来像这样：

```
SELECT
LEFT(first.EntryDateTime, 11) AS [Date]
,DATENAME(weekday, first.EntryDateTime) AS [Day of Week]
,DATEPART(hh, first.EntryDateTime) AS [Hour]
,SUM(CASE WHEN second.TrxName = 'signon' AND first.Succeeded = 1 THEN 1 ELSE 0 END) AS [Login Success]
,SUM(CASE WHEN second.TrxName = 'signon' AND first.Succeeded = 1 THEN 0 ELSE 1 END) AS [Login Failure]
,SUM(CASE WHEN second.TrxName = 'signon' THEN 1 ELSE 0 END) AS [Total Logins]
,COUNT(first.UniqueId) AS [Total Transactions]

FROM
dbo.TheFirstPlace first (NOLOCK)
INNER JOIN
dbo.TheSecondPlace second (NOLOCK)
ON  first.TrxUniqueId = second.TrxUniqueId
WHERE first.EntryDateTime > DATEADD(day, -7, cast(GETDATE() As Date))
GROUP BY
    LEFT(first.EntryDateTime, 11),
    DATENAME(weekday, first.EntryDateTime),
    DATEPART(hh, first.EntryDateTime) 
```

我的结果集如下所示：

```
Date        Day of Week Hour    Login Success   Login Failure   Total Logins    Total Transactions
Nov  9 2012 Friday      0       554             26245           595             26799
Nov  9 2012 Friday      1       2113            120569          2509            122682
Nov  9 2012 Friday      2       1675            102058          1743            103733 
```

显然，这里的数学根本不起作用，我对为什么感到很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:40:47.543

`CASE`如果您使用and`SUM`语句的组合，您可能会对数据进行一次传递。这可能比执行多个`COUNT`查询更有效......如下所示：

```
SELECT
    [Date],
    [Day of Week],
    [Hour],
    SUM(CASE WHEN TrxName = 'signon' AND Succeeded = 1 THEN 1 ELSE 0 END) AS [Login Success],
    SUM(CASE WHEN TrxName = 'signon' AND Succeeded = 0 THEN 1 ELSE 0 END) AS [Login Failure],
    SUM(CASE WHEN TrxName = 'signon' 1 ELSE 0 END) AS [Total Logins],
    COUNT(UniqueId) AS [Total Transactions]
FROM
    YourTable
GROUP BY
    [Date],
    [Day of Week],
    [Hour] 
```

# php - 如何使用正则表达式仅解析第一级嵌套标签？

> ID：13423900
> 
> 赞同：3
> 
> 时间：2012-11-16T20:25:04.087
> 
> 标签：php, regex

假设我有这样一段文字：

```
<item>
   foo bar foo bar 
   <item> child item </item>
</item>
<item>
   second item
   <item> second child </item>
</item> 
```

在这里，我想要的是只解析要解析的`<item>`s 的两个顶层，并将结果以这样的数组返回给我：

```
[0] = "foo bar foo bar  <item>child item</item>"
[1] = "second item  <item>second child </item>"; 
```

但是在我的测试中，由于子级`<item>`标签与模式匹配，因此它们也被包含在内，并且我得到了一个 4 元素数组而不是我想要的 2 元素数组。

这是我使用的模式：

```
%<item>(.+)</item>%si 
```

有任何想法吗？

**编辑：这不适用于 HTML，它适用于我无法使用任何 dom 解析器的自定义内部脚本语言。所以请建议一个正则表达式解决方案。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:49:33.450

```
%<p>(.+?)^</p>%smi 
```

编辑

```
$text = "<item> foo bar foo bar <item> child item </item> </item> <item> second item <item> second child </item> </item>";
preg_match_all('%<item>(.*?<item>.*?</item>).*?</item>%si', $text, $matches);
print_r($matches[1]); 
```

输出

```
Array
(
    [0] =>  foo bar foo bar <item> child item </item>
    [1] =>  second item <item> second child </item>
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:29:17.390

正则表达式不太适合您正在做的事情。如果你走这条路，你可能会比你走一条不同的路花更多的时间。我建议你检查一个 DOM 解析器。下面的一个相当容易使用，应该可以满足您的基本需求。

[PHP 简单的 HTML DOM 解析器](http://simplehtmldom.sourceforge.net/)

另请查看[这个问题](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)，因为它会为您提供其他选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T10:23:07.703

您说输入不是 HTML，而是提供了一个看起来像 HTML 的字符串。看，正则表达式最适合纯文本，而不是标记文本。您没有透露这种输入背后的真实语言，因此，我可以建议的解决方案是基于*char 不能作为元素节点之间的文字出现*（仅作为某些实体）的*假设。`<`*

这意味着，您可以使用*否定字符类* `[^<]`并将`*`量词应用于它：

```
%<item>([^<]+)</item>%i 
```

请参阅[正则表达式演示](https://regex101.com/r/VzAoAa/1)， [PHP 演示](https://ideone.com/Irl1lN)：

```
$text = "<item> foo bar foo bar <item> child item </item> </item> <item> second item <item> second child </item> </item>";
preg_match_all('%<item>([^<]*)<item>%i', $text, $matches);
print_r($matches[1]);
// => Array ( [0] =>  foo bar foo bar  [1] =>  second item ) 
```

# python - 在python（tkinter）中播放声音时执行按键事件

> ID：13423906
> 
> 赞同：2
> 
> 时间：2012-11-16T20:25:29.640
> 
> 标签：python, audio, tkinter

我是编程新手，对python知之甚少。我正在尝试制作一个程序来测试生物学实验的听觉和视觉反应时间。对于听觉部分，我在声音开始播放时启动计时器，然后受试者必须在听到它时立即按下一个键。我的问题是，当声音仍在播放时，我无法执行任何其他操作，因此无法记录按下键的时间。这是我正在尝试做的简化版本：

```
from Tkinter import *
import time
import winsound

def chooseTest(event):
    global start
    if event.keysym == 'BackSpace':
       root.after(2000,playSound)
    elif event.keysym == 'Return':
       new_time = time.clock()
       elapsed = new_time - start
       print elapsed
    else:
       pass

def playSound():
    global start
    start = time.clock()
    winsound.PlaySound('SystemAsterisk', winsound.SND_ALIAS)

root=Tk()
root.overrideredirect(True)
root.geometry("{0}x{1}+0+0".format(root.winfo_screenwidth(),root.winfo_screenheight()))           
root.bind('<Key>',chooseTest)
root.mainloop() 
```

无论我在 *elif event.keysym == 'Return':*下放置什么，都只会在声音结束后执行。有什么方法（希望不是很复杂）来克服这个问题吗？
我能想出的唯一解决方案是发出很短的声音（毫秒？）并循环播放直到按键被按下。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:27:50.800

您需要在单独的[线程](http://docs.python.org/2/library/threading.html#threading.Thread)上启动声音。

就像是：

```
import threading

#...

def playSound():
    global start
    start = time.clock()

    def func(): 
        winsound.PlaySound('SystemAsterisk', winsound.SND_ALIAS)

    threading.Thread(target=func).start() 
```

附带说明一下，像这样悬挂全局值并不是最好的解决方案。您应该阅读类，因为它们是在各种函数调用之间共享状态的一种非常好的方法。

# jquery - 在 jquery 中检查值

> ID：13423908
> 
> 赞同：0
> 
> 时间：2012-11-16T20:25:37.043
> 
> 标签：jquery, split

在我的 jquery 中，我有显示一些按钮的代码：

```
if (values[1].length>0 && values[1]!=0) 
          {
            $("input[id="+id.slice(0,-1)+"].to-cart").show();
            $("input[id="+id.slice(0,-1)+"].to-cart").val("В корзину");
          }; 
```

但是我在值方面可能遇到的主要问题是：>8、4<、3~ 等，但是如何仅拆分变量中的数字？所以我的 >8, 40<, 3~ 我需要做检查，并将其视为 8, 40, 3... 但我有很多符号，不仅 ><

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:43:47.087

我不确定我是否正确理解了这个问题。您有类似`">8"`or的字符串，`"<4"`并且您想从字符串中取出数字？如果这是您可以使用正则表达式的问题：

```
pattern = /\d\;
digit = pattern.exec(">8"); 
```

这将返回`8`. 如果您知道您将处理多于一位的数字，您的模式应该如下所示：

```
pattern = /\d+\; 
```

# php - Silex 路由问题（除了 root 给 404 之外的其他路径）

> ID：13423910
> 
> 赞同：3
> 
> 时间：2012-11-16T20:25:44.363
> 
> 标签：php, silex

这似乎应该可以工作，但我收到 404 错误。

我的应用程序如下所示：

库/init.php：

```
$app = new Silex\Application();
$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path' => __DIR__.'/../views',
));
$app->register(new Silex\Provider\UrlGeneratorServiceProvider()); 
```

和 web/index.php：

```
require_once __DIR__.'/../lib/init.php';

$app->get('/about', function() use ($app) {
    return $app['twig']->render('about.twig.html');
})
->bind('about');

$app->get('/', function() use ($app) {
    return $app['twig']->render('index.twig.html');
})
->bind('homepage');

$app->run(); 
```

我正在使用 MAMP 在我的本地机器上进行测试。当我访问 localhost:8888/web 时，它可以很好地呈现索引页面，没有问题，但是访问 localhost:8888/web/about 会出现 404 错误。

这里发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T20:34:36.750

url 是后面的部分`web/index.php`。所以`/about`匹配`web/index.php/about`。

现在您想`index.php`从 url 中删除该位。您可以使用 HTACCESS 执行此操作，阅读[此问题](https://stackoverflow.com/questions/8424728/rewriterule-in-apache-with-symfony2-not-removing-app-php)以了解如何操作。

# php - 通过 fsockopen 使用代理

> ID：13423914
> 
> 赞同：1
> 
> 时间：2012-11-16T20:26:18.467
> 
> 标签：php, proxies

我有一个要添加代理的 Pagerank 检查脚本。我通常使用 Curl，所以我不确定如何通过代理发出请求。我希望请求从 $proxies 数组中选择一个随机代理并将其用于请求。谁能告诉我如何使用此脚本完成此操作。提前致谢。

```
$proxyauth = "username:password";

$proxies = array(
    "proxy1",
    "proxy2",
    "proxy3",
    "proxy4",
    "proxy5",
    "proxy6",
    "proxy7",
    "proxy8",
    "proxy9",
    "proxy10"
);

function check($page){
    // Open a socket to the toolbarqueries address, used by Google Toolbar
    $socket = fsockopen("toolbarqueries.google.com", 80, $errno, $errstr, 30);

    // If a connection can be established
    if($socket) {
        // Prep socket headers
        $out = "GET /tbr?client=navclient-auto&ch=".$this->checkHash($this->createHash($page))
                ."&features=Rank&q=info:".$page."&num=100&filter=0 HTTP/1.1\r\n";
        $out .= "Host: toolbarqueries.google.com\r\n";
        $out .= "User-Agent: Mozilla/4.0 (compatible; GoogleToolbar 2.0.114-big; Windows XP         5.1)\r\n";
        $out .= "Connection: Close\r\n\r\n";

        // Write settings to the socket
        fwrite($socket, $out);

        // When a response is received...
        $result = "";
        while(!feof($socket)) {
            $data = fgets($socket, 128);
            $pos = strpos($data, "Rank_");
            if($pos !== false){
                $pagerank = substr($data, $pos + 9);
                $result += $pagerank;
            }
        }
        // Close the connection
        fclose($socket);

        // Return the rank!
        return $result;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:10:00.410

使用`fsockopen`, 而不是`toolbarqueries.google.com`您连接到选定的代理。然后，您使用 GET 请求发送完整的 URL：

```
$socket = fsockopen("proxy5", 80, $errno, $errstr, 30);
...
$out = "GET http://toolbarqueries.google.com/tbr?client=..." 
```

您仍然可以发送`Host`标头，但您不需要它。

# c++ - OpenSceneGraph 3D 编程切换鼠标灵敏度

> ID：13423916
> 
> 赞同：2
> 
> 时间：2012-11-16T20:26:28.730
> 
> 标签：c++, 3d, openscenegraph

我需要输入代码来切换鼠标的灵敏度 - 增加或减少我的相机在场景中的行走速度。目前，我有一个连接事件处理程序来拦截键盘命令，并相应地处理它们。缺少的是按选定数量减慢/提高速度的正确代码。我有下面的枚举来描述可接受的增加/减少值。

```
enum CameraSpeed {_WALK = 10, _BRISK_WALK = 17, _JOG = 23, _RUN = 31, _RUN_FAST = 34, _FLY=60};
 CameraSpeed _current_camera_speed; 
```

我尝试像这样覆盖 CameraManipulator 的基类的 bool performMovement() 方法，但仔细检查后，这似乎不是我需要覆盖或用于此目的的代码。我会很感激一些帮助，不仅可以找到正确的方法，还可以修改它，以便我可以更好地控制灵敏度。

```
bool WalkingCameraManipulator::performMovement()
{
    // return if less then two events have been added
    if( _ga_t0.get() == NULL || _ga_t1.get() == NULL )
        return false;

    // get delta time
    double eventTimeDelta = _ga_t0->getTime() - _ga_t1->getTime();
    if( eventTimeDelta < 0\. )
    {
        OSG_WARN << "Manipulator warning: eventTimeDelta = " << eventTimeDelta << std::endl;
        eventTimeDelta = 0.;
    }

    // get deltaX and deltaY
    float dx = (_ga_t0->getXnormalized() - _ga_t1->getXnormalized()/_current_camera_speed);
    float dy = (_ga_t0->getYnormalized() - _ga_t1->getYnormalized())/_current_camera_speed;

    // return if there is no movement.
    if( dx == 0\. && dy == 0\. )
        return false;

    // call appropriate methods
    unsigned int buttonMask = _ga_t1->getButtonMask();
    if( buttonMask == GUIEventAdapter::LEFT_MOUSE_BUTTON )
    {
        return performMovementLeftMouseButton( eventTimeDelta, dx, dy );
    }
    else if( buttonMask == GUIEventAdapter::MIDDLE_MOUSE_BUTTON ||
            buttonMask == (GUIEventAdapter::LEFT_MOUSE_BUTTON | GUIEventAdapter::RIGHT_MOUSE_BUTTON) )
    {
        return performMovementMiddleMouseButton( eventTimeDelta, dx, dy );
    }
    else if( buttonMask == GUIEventAdapter::RIGHT_MOUSE_BUTTON )
    {
        return performMovementRightMouseButton( eventTimeDelta, dx, dy );
    }

    return false;
} 
```

# java - Maven 错误：用于编码 Cp1251 的不可映射字符

> ID：13423918
> 
> 赞同：2
> 
> 时间：2012-11-16T20:26:35.223
> 
> 标签：java, maven, cp1251

无法在 NetBeans 中编译您的项目，这是错误：

```
------------------------------------------------------------------------
BUILD FAILURE
------------------------------------------------------------------------
Total time: 4.094s
Finished at: Sat Nov 17 00:23:08 MSK 2012
Final Memory: 8M/247M
------------------------------------------------------------------------
Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project AdminCmd: Compilation failure
C:\Users\Максим\Documents\NetBeansProjects\AdminCmd\src\main\java\be\Balor\Tools\Help\String\ACMinecraftFontWidthCalculator.java:[30,33] error: unmappable character for encoding Cp1251
-> [Help 1]

To see the full stack trace of the errors, re-run Maven with the -e switch.
Re-run Maven using the -X switch to enable full debug logging.

For more information about the errors and possible solutions, please read the following articles:
[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

这是 maven 发誓的文件

[http://pastebin.com/buQEE4Fb](http://pastebin.com/buQEE4Fb)

项目到 Git - [https://github.com/Belphemur/AdminCmd](https://github.com/Belphemur/AdminCmd)

如果有人可以提供 NetBeans 或 Eclipse 的工作草案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:39:41.143

This is interesting, as your pom.xml mentions

```
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding> 
```

.. but the error message complains about Cp1251 encoding. Does the maven output mention anything else related to source encodings?

My recommendation is generally to not use *any* high-ASCII characters in your code, and use the `\uxxxx` notation instead as needed.

You can make the conversion from UTF-8 to escaped unicode at online conversion sites like [http://www.endmemo.com/convert/EMUnicode.php](http://www.endmemo.com/convert/EMUnicode.php) (this particular one seems to strip leading zeroes, I don't think that's legal in Java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:39:14.903

You have characters in that file which are likely not mapped in the Windows codepage (which is the reference to Cp1251). Try changing the project encoding to UTF-8 or similar. Look into different encoding schemes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-18T17:52:52.510

就我而言，我通过设置新的环境变量解决了这个问题：

JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8

在执行 maven 的命令行中，在执行 maven 命令之前运行当前命令：

`SET JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8`

# python - 使用 Python 计算 N 克

> ID：13423919
> 
> 赞同：31
> 
> 时间：2012-11-16T20:26:35.453
> 
> 标签：python, nlp, nltk, n-gram

我需要为包含如下文本的文本文件计算 Unigrams、BiGrams 和 Trigrams：

“仅在美国，囊性纤维化就影响了 30,000 名儿童和年轻人 吸入盐水雾可以减少充满囊性纤维化患者气道的脓液和感染，尽管副作用包括令人讨厌的咳嗽和刺鼻的味道。这就是结论本周发表在《新英格兰医学杂志》上的两项研究中的一项。”

我从 Python 开始并使用了以下代码：

```
#!/usr/bin/env python
# File: n-gram.py
def N_Gram(N,text):
NList = []                      # start with an empty list
if N> 1:
    space = " " * (N-1)         # add N - 1 spaces
    text = space + text + space # add both in front and back
# append the slices [i:i+N] to NList
for i in range( len(text) - (N - 1) ):
    NList.append(text[i:i+N])
return NList                    # return the list
# test code
for i in range(5):
print N_Gram(i+1,"text")
# more test code
nList = N_Gram(7,"Here is a lot of text to print")
for ngram in iter(nList):
print '"' + ngram + '"' 
```

[http://www.daniweb.com/software-development/python/threads/39109/generating-n-grams-from-a-word](http://www.daniweb.com/software-development/python/threads/39109/generating-n-grams-from-a-word)

但它适用于一个单词中的所有 n-gram，当我想要它来自单词之间的 CYSTIC 和 FIBROSIS 或 CYSTIC FIBROSIS 时。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-06-03T00:53:49.097

此[博客](http://locallyoptimal.com/blog/2013/01/20/elegant-n-gram-generation-in-python/)中的简短 Pythonesque 解决方案：

```
def find_ngrams(input_list, n):
  return zip(*[input_list[i:] for i in range(n)]) 
```

用法：

```
>>> input_list = ['all', 'this', 'happened', 'more', 'or', 'less']
>>> find_ngrams(input_list, 1)
[('all',), ('this',), ('happened',), ('more',), ('or',), ('less',)]
>>> find_ngrams(input_list, 2)
[('all', 'this'), ('this', 'happened'), ('happened', 'more'), ('more', 'or'), ('or', 'less')]
>>> find_ngrams(input_list, 3))
[('all', 'this', 'happened'), ('this', 'happened', 'more'), ('happened', 'more', 'or'), ('more', 'or', 'less')] 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-11-16T20:33:15.547

假设输入是一个包含空格分隔单词的字符串，就像`x = "a b c d"`您可以使用以下函数（编辑：请参阅最后一个函数以获得可能更完整的解决方案）：

```
def ngrams(input, n):
    input = input.split(' ')
    output = []
    for i in range(len(input)-n+1):
        output.append(input[i:i+n])
    return output

ngrams('a b c d', 2) # [['a', 'b'], ['b', 'c'], ['c', 'd']] 
```

如果您希望将它们重新连接到字符串中，您可以调用如下内容：

```
[' '.join(x) for x in ngrams('a b c d', 2)] # ['a b', 'b c', 'c d'] 
```

最后，这并没有将事情总结为总数，因此如果您的输入是`'a a a a'`，则需要将它们计数到一个字典中：

```
for g in (' '.join(x) for x in ngrams(input, 2)):
    grams.setdefault(g, 0)
    grams[g] += 1 
```

将所有这些放在一个最终函数中给出：

```
def ngrams(input, n):
   input = input.split(' ')
   output = {}
   for i in range(len(input)-n+1):
       g = ' '.join(input[i:i+n])
       output.setdefault(g, 0)
       output[g] += 1
    return output

ngrams('a a a a', 2) # {'a a': 3} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-11-17T15:26:00.070

使用 NLTK（自然语言工具包）并使用函数将文本标记（拆分）为列表，然后找到二元组和三元组。

```
import nltk
words = nltk.word_tokenize(my_text)
my_bigrams = nltk.bigrams(words)
my_trigrams = nltk.trigrams(words) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-10-30T14:14:55.450

python 中还有一个更有趣的模块，称为 Scikit。这是代码。这将帮助您获得特定范围内的所有克数。这是代码

```
from sklearn.feature_extraction.text import CountVectorizer 
text = "this is a foo bar sentences and i want to ngramize it"
vectorizer = CountVectorizer(ngram_range=(1,6))
analyzer = vectorizer.build_analyzer()
print analyzer(text) 
```

输出是

```
[u'this', u'is', u'foo', u'bar', u'sentences', u'and', u'want', u'to', u'ngramize', u'it', u'this is', u'is foo', u'foo bar', u'bar sentences', u'sentences and', u'and want', u'want to', u'to ngramize', u'ngramize it', u'this is foo', u'is foo bar', u'foo bar sentences', u'bar sentences and', u'sentences and want', u'and want to', u'want to ngramize', u'to ngramize it', u'this is foo bar', u'is foo bar sentences', u'foo bar sentences and', u'bar sentences and want', u'sentences and want to', u'and want to ngramize', u'want to ngramize it', u'this is foo bar sentences', u'is foo bar sentences and', u'foo bar sentences and want', u'bar sentences and want to', u'sentences and want to ngramize', u'and want to ngramize it', u'this is foo bar sentences and', u'is foo bar sentences and want', u'foo bar sentences and want to', u'bar sentences and want to ngramize', u'sentences and want to ngramize it'] 
```

在这里，它给出了 1 到 6 范围内的所有克数。它使用称为 countVectorizer 的方法。这是[链接](http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-16T20:39:38.203

使用`collections.deque`：

```
from collections import deque
from itertools import islice

def ngrams(message, n=1):
    it = iter(message.split())
    window = deque(islice(it, n), maxlen=n)
    yield tuple(window)
    for item in it:
        window.append(item)
        yield tuple(window) 
```

...或者也许您可以在一行中将其作为列表理解：

```
n = 2
message = "Hello, how are you?".split()
myNgrams = [message[i:i+n] for i in range(len(message) - n)] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-28T22:35:12.163

nltk 原生支持 ngram

'n' 是 ngram 的大小 例如：n=3 表示三元组

```
from nltk import ngrams

def ngramize(texts, n):
    output=[]
    for text in texts:
        output += ngrams(text,n)
    return output 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-18T07:34:53.407

如果效率是一个问题，并且您必须构建多个不同的 n-gram，我会考虑使用以下代码（基于 Franck 的出色答案）：

```
from itertools import chain

def n_grams(seq, n=1):
    """Returns an iterator over the n-grams given a list_tokens"""
    shift_token = lambda i: (el for j,el in enumerate(seq) if j>=i)
    shifted_tokens = (shift_token(i) for i in range(n))
    tuple_ngrams = zip(*shifted_tokens)
    return tuple_ngrams # if join in generator : (" ".join(i) for i in tuple_ngrams)

def range_ngrams(list_tokens, ngram_range=(1,2)):
    """Returns an itirator over all n-grams for n in range(ngram_range) given a list_tokens."""
    return chain(*(n_grams(list_tokens, i) for i in range(*ngram_range))) 
```

用法 ：

```
>>> input_list = input_list = 'test the ngrams generator'.split()
>>> list(range_ngrams(input_list, ngram_range=(1,3)))
[('test',), ('the',), ('ngrams',), ('generator',), ('test', 'the'), ('the', 'ngrams'), ('ngrams', 'generator'), ('test', 'the', 'ngrams'), ('the', 'ngrams', 'generator')] 
```

~ 与 NLTK 相同的速度：

```
import nltk
%%timeit
input_list = 'test the ngrams interator vs nltk '*10**6
nltk.ngrams(input_list,n=5)
# 7.02 ms ± 79 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

%%timeit
input_list = 'test the ngrams interator vs nltk '*10**6
n_grams(input_list,n=5)
# 7.01 ms ± 103 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

%%timeit
input_list = 'test the ngrams interator vs nltk '*10**6
nltk.ngrams(input_list,n=1)
nltk.ngrams(input_list,n=2)
nltk.ngrams(input_list,n=3)
nltk.ngrams(input_list,n=4)
nltk.ngrams(input_list,n=5)
# 7.32 ms ± 241 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

%%timeit
input_list = 'test the ngrams interator vs nltk '*10**6
range_ngrams(input_list, ngram_range=(1,6))
# 7.13 ms ± 165 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-20T13:11:46.290

虽然帖子很旧，但我想在这里提一下我的答案，以便大多数 ngram 创建逻辑可以在一篇帖子中。

Python 中有一个名为 TextBlob 的东西。它非常容易创建类似于 NLTK 的 ngram。

下面是代码片段及其输出，以便于理解。

```
sent = """This is to show the usage of Text Blob in Python"""
blob = TextBlob(sent)
unigrams = blob.ngrams(n=1)
bigrams = blob.ngrams(n=2)
trigrams = blob.ngrams(n=3) 
```

输出是：

```
unigrams
[WordList(['This']),
 WordList(['is']),
 WordList(['to']),
 WordList(['show']),
 WordList(['the']),
 WordList(['usage']),
 WordList(['of']),
 WordList(['Text']),
 WordList(['Blob']),
 WordList(['in']),
 WordList(['Python'])]

bigrams
[WordList(['This', 'is']),
 WordList(['is', 'to']),
 WordList(['to', 'show']),
 WordList(['show', 'the']),
 WordList(['the', 'usage']),
 WordList(['usage', 'of']),
 WordList(['of', 'Text']),
 WordList(['Text', 'Blob']),
 WordList(['Blob', 'in']),
 WordList(['in', 'Python'])]

trigrams
[WordList(['This', 'is', 'to']),
 WordList(['is', 'to', 'show']),
 WordList(['to', 'show', 'the']),
 WordList(['show', 'the', 'usage']),
 WordList(['the', 'usage', 'of']),
 WordList(['usage', 'of', 'Text']),
 WordList(['of', 'Text', 'Blob']),
 WordList(['Text', 'Blob', 'in']),
 WordList(['Blob', 'in', 'Python'])] 
```

就如此容易。

TextBlob 正在做更多的事情。请查看此文档以获取更多详细信息 - [https://textblob.readthedocs.io/en/dev/](https://textblob.readthedocs.io/en/dev/)

# ios - 在 UITableViewCell 中添加 UICollectionView 时出错

> ID：13423926
> 
> 赞同：0
> 
> 时间：2012-11-16T20:27:27.620
> 
> 标签：ios, xcode, uitableview, uicollectionview

所以我试图在 tableviewcell 中显示水平滚动的集合视图。我使用的代码是

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
UICollectionViewController *cv = [self.storyboard instantiateViewControllerWithIdentifier:@"collectionViewID"];
cv.view.frame = cell.contentView.bounds;
[self addChildViewController:cv];
[cell.contentView addSubview:cv.view];
[cv didMoveToParentViewController:self];  
return cell; 
} 
```

我收到错误消息：对象不能为零。如果有人可以帮助我理解错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:47:57.060

我已经在我的应用程序中做到了这一点。

我发现继承 UITableViewCell 更容易。我可以将所有 UICollectionView 设置和 UICollectionView 数据源和委托放在单元格的代码中。

然后，我提供了一个 NSArray 类型的公共属性，我将其传递到单元格中。然后，单元格将此数组用作它自己拥有的 UICollectionView 的数据源。

使管理变得容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:45:06.087

检查你的 UICollectionViewControlle 的属性检查器的标识符值 {collectionViewID}

编辑 [自我 addChildViewController:cv]; --> 我想你想将 cv 添加到单元格中，不是吗？

# perl - 如何使用 Perl 备份主机文件？

> ID：13423938
> 
> 赞同：-5
> 
> 时间：2012-11-16T20:28:20.553
> 
> 标签：perl, copy, backup

在运行更改它的程序之前，我需要备份主机文件。

所以我首先删除备份文件以防它已经存在，然后用新名称将主机文件复制到同一目录中。

我只需要一个完整的脚本来完成这项任务。我使用 Perl2EXE 将所有 Perl 脚本转换为 EXE。

到目前为止，这是我的代码：

```
 #use Win32::OLE;
#use Win32::OLE qw(in);
use strict;
use warnings;

use File::Spec;
use File::Copy 'copy';

$APPNAME = "TEST_TOP_Install";
###############################################################################################################################
###### This section Creates a log file on machines being pushed
###### The location of the log file is c:\winnt\Install_logs or c:\windows\Install_logs
###############################################################################################################################

###### System Root Path 
$rootpath = $ENV{"systemroot"};
$alluserspath = $ENV{"ALLUSERSPROFILE"};
$programfilespath = $ENV{"PROGRAMFILES"};
$SystemDrive = $ENV{"SystemDrive"};  # c:
$WIN32DIR = "$SystemDrive\\program files\(x86\)";

$LOGDIR = "$rootpath\\install_logs" ;
if (!-e $LOGDIR) {
    $DIR = `mkdir $LOGDIR`;
    }

open ($APPNAME, ">$rootpath\\install_logs\\$APPNAME.log");

###############################################################################################################################
######  This section writes date and time stamp and heading in the log
###############################################################################################################################

print $APPNAME ("************************************************************\n");
print $APPNAME ("This pack will uninstall and install TEST_TOP\n\n") ;

$TDATE = `date \/T`;
$TTIME = `time \/T`;

print $APPNAME ("__________________________________________\n");
print $APPNAME ("Date Started\: $TDATE\n");
print $APPNAME ("Time Started\:  $TTIME\n");
print $APPNAME ("__________________________________________\n\n");

###############################################################################################################################
## SECTION 1: Asset name
###############################################################################################################################
$ASSET = `$rootpath\\system32\\hostname\.exe`;
chomp $ASSET;

###############################################################################################################################
## SECTION x: Variables
###############################################################################################################################

$OSVERSION = `$rootpath\\system32\\reg\.exe QUERY "\\\\$ASSET\\HKLM\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion" \/v CurrentBuildNumber`;
$PRODUCTNAME = `$rootpath\\system32\\reg\.exe QUERY "\\\\$ASSET\\HKLM\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion" \/v ProductName`;

###############################################################################################################################
## SECTION 2: OS Version
###############################################################################################################################

if ($OSVERSION =~ /1381/) 
    {
        print $APPNAME ("WINDOWS NT MACHINE - $ASSET ...  exiting\n\n");
        print $APPNAME ("Exit Code: 1\n");
        exit 1;
    }
elsif  ($OSVERSION =~ /2195/)
    {
        print $APPNAME ("WINDOWS 2000 MACHINE - $ASSET ...  exiting\n\n");
        print $APPNAME ("Exit Code: 2\n");
        exit 2;
    }
elsif  ($OSVERSION =~ /2600/)
    {
        print $APPNAME ("WINDOWS XP MACHINE - $ASSET .. \n\n");

        $DisplayVersion = `reg query "\\\\$ASSET\\HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\\{B41ED86C\-800F\-48B8\-B3D7\-4AB19DBB62E5\}" \/v DisplayVersion`;

        goto WINXPINSTALL;
    }
elsif (($OSVERSION =~ /76/) || ($PRODUCTNAME =~ /Windows 7/))
    {
        print $APPNAME ("WINDOWS 7 MACHINE - $ASSET\n\n");

        $DisplayVersion = `reg query "\\\\$ASSET\\HKLM\\SOFTWARE\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\\{B41ED86C\-800F\-48B8\-B3D7\-4AB19DBB62E5\}" \/v DisplayVersion`;
    }
else 
    {
        print $APPNAME ("Unable to determine OS - $ASSET\n\n");
        print $APPNAME ("Exit Code: 3\n");
        exit 3;
    }
###############################################################################################################################
## Windows 7 ############# Windows 7 ################################### Windows 7 ############################### Windows 7 ##
###############################################################################################################################

if ($DisplayVersion =~ /1.1.10/)
    {
        print $APPNAME ("TEST exist ... uninstalling\n\n");
        goto WIN7UNINSTALLX;
    }
else 
    {
        print $APPNAME ("TEST does not exist ... Installing\n\n");
        goto WIN7INSTALLAPP;
    }

WIN7INSTALLAPP:
###############################################################################################################################
## SECTION 3: Windows 7 Install
###############################################################################################################################

sleep (2);
print $APPNAME ("TEST Installation\n");
print $APPNAME ("____________________________________________________\n\n");

autoflush STDOUT;
autoflush STDERR;

my $etc = File::Spec->catdir($ENV{SYSTEMROOT}, 'system32\drivers\etc');
my $hosts = File::Spec->catfile($etc, 'hosts');
my $backup = File::Spec->catfile($etc, 'hosts_backup.bak');

copy $hosts, $backup or die "Backup failed: $!";
print $APPNAME ("host file backup completed\n\n");

`start \/WAIT msiexec \/i "$rootpath\\MSI\\TEST_TOP\\TEST_TOP\.msi" TRANSFORMS="$rootpath\\MSI\\TEST_TOP\\TEST_TOP_WIN7\.mst" \/l*v "$rootpath\\install\_logs\\TEST\_TOP\_MSIinstall\.log" \/qn`;

$errcode=$?;
if ($errcode == 0) 
    {
        print $APPNAME ("TEST install completed successfully\n\n");
    }
else 
    {
        print $APPNAME ("TEST install failed ... $errcode\n\n");
        print $APPNAME ("Exit Code: 4\n");
        exit 4;
    }
print $APPNAME ("\n\n");
exit 0;

WIN7UNINSTALLX:
###############################################################################################################################
## SECTION 4: Windows 7 Uninstall
###############################################################################################################################

`start \/WAIT msiexec\.exe \/x \{B30ED86C\-800F\-48B8\-B3D7\-4AB19DBB62E5\} \/l*v \"$rootpath\\install\_logs\\TEST\_TOP\_MSIuninstall\.log\" \/qn`;

$errcode=$?;
if ($errcode == 0) 
    {
        print $APPNAME ("TEST uninstall completed successfully\n\n");
        sleep (5);
    }
else 
    {
        print $APPNAME ("TEST uninstall failed ... $errcode\n\n");
        print $APPNAME ("Exit Code: 5\n");
        exit 5;
    }

print $APPNAME ("\n\n");

goto WIN7INSTALLAPP;

###############################################################################################################################
### WINDOWS XP ###################### WINDOWS XP ######################### WINDOWS XP ########################## WINDOWS XP ###
###############################################################################################################################

WINXPINSTALL:

if ($DisplayVersion =~ /1.1.10/)

    {
        print $APPNAME ("TEST exist ... uninstalling\n\n");
        goto WINXPUNINSTALLX;
    }

else 
    {

        print $APPNAME ("TEST does not exist ... Installing\n\n");
        goto WINXPINSTALLAPP;
    }

WINXPINSTALLAPP:
###############################################################################################################################
## SECTION 3: Windows XP Install
###############################################################################################################################

sleep (2);
print $APPNAME ("TEST Installation\n");
print $APPNAME ("____________________________________________________\n\n");

autoflush STDOUT;
autoflush STDERR; 

my $etc = File::Spec->catdir($ENV{SYSTEMROOT}, 'system32\drivers\etc');
my $hosts = File::Spec->catfile($etc, 'hosts');
my $backup = File::Spec->catfile($etc, 'hosts_backup.bak');

copy $hosts, $backup or die "Backup failed: $!";
print $APPNAME ("host file backup completed\n\n");

`start \/WAIT msiexec \/i "$rootpath\\MSI\\TEST\_TOP\\TEST\_TOP\.msi" TRANSFORMS="$rootpath\\MSI\\TEST_TOP\\TEST_TOP_XP\.mst" \/l*v "$rootpath\\install\_logs\\TEST\_TOP\_MSIinstall\.log" \/qn`;

$errcode=$?;
if ($errcode == 0) 
    {
        print $APPNAME ("TEST install completed successfully\n\n");
    }
else 
    {
        print $APPNAME ("TEST install failed ... $errcode\n\n");
        print $APPNAME ("Exit Code: 4\n");
        exit 4;
    }
exit 0;

WINXPUNINSTALLX:
###############################################################################################################################
## SECTION 4: Windows XP Uninstall
###############################################################################################################################

 `start \/WAIT msiexec\.exe \/x \{B30ED86C\-800F\-48B8\-B3D7\-4AB19DBB62E5\} \/l*v \"$rootpath\\install\_logs\\TEST\_TOP\_MSIuninstall\.log\" \/qn`;

$errcode=$?;
if ($errcode == 0) 
    {
        print $APPNAME ("TEST uninstall completed successfully\n\n");
        sleep (5);
    }
else 
    {
        print $APPNAME ("TEST uninstall failed ... $errcode\n\n");
        print $APPNAME ("Exit Code: 5\n");
        exit 5;
    }

print $APPNAME ("\n\n");

goto WINXPINSTALLAPP; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:16:11.413

如果可能，最好使用本机 Perl 运算符或模块，而不是使用命令行实用程序。在这种情况下，[`File::Spec`](https://metacpan.org/module/File%3a%3aSpec)和[`File::Copy`](https://metacpan.org/module/File%3a%3aCopy)模块很有用。自从 Perl v5 的第一个版本以来，这两个都是核心 Perl 发行版的一部分，因此不需要在您的系统上安装。

此外，对于大多数形式的复制或输出，无需删除现有文件：将创建一个同名的新文件，并静默删除旧文件。

该程序可以满足您的需要。**请注意**，您需要以管理员身份运行它才能写入所在的系统文件夹`hosts`，否则复制将失败 - 可能出现*No such file or directory*错误。

```
use strict;
use warnings;

use feature 'say';

use File::Spec;
use File::Copy 'copy';

autoflush STDOUT;
autoflush STDERR;

my $etc = File::Spec->catdir($ENV{SYSTEMROOT}, 'system32\drivers\etc');
my $hosts = File::Spec->catfile($etc, 'hosts');
my $backup = File::Spec->catfile($etc, 'hosts_backup.bak');

say "From $hosts";
say "To $backup";

copy $hosts, $backup or die "Backup failed: $!";
say 'Success'; 
```

**输出**

```
From C:\Windows\system32\drivers\etc\hosts
To C:\Windows\system32\drivers\etc\hosts_backup.bak
Success 
```

# java - 在 Android 上拍照时发生崩溃。为什么？

> ID：13423945
> 
> 赞同：1
> 
> 时间：2012-11-16T20:28:38.827
> 
> 标签：java, android, android-camera, android-image

当我用我的设备拍照时，此代码`inputStream =`在线崩溃，错误为`java.lang.NullPointerException`

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Uri uriImage;
    InputStream inputStream = null;
    ImageView imvCover = (ImageView)this.findViewById(R.id.imvCover);
    if ((requestCode == CAPTURE_IMAGE) && resultCode == Activity.RESULT_OK) {
        uriImage = data.getData();
        try {
            inputStream = getContentResolver().openInputStream(uriImage);
            Bitmap bitmap = BitmapFactory.decodeStream(inputStream, null, null);
            imvCover.setImageBitmap(bitmap);
        } catch (NullPointerException e) {
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        imvCover.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
        imvCover.setAdjustViewBounds(true);
    }
} 
```

任何想法为什么？

这是我用来打开相机拍照的代码：

```
 Button btnTakePicture = (Button)this.findViewById(R.id.btnTakePicture);
    btnTakePicture.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(intent, CAPTURE_IMAGE);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T07:03:19.460

这种方法可能不适用于所有设备。相反，您可以指定新图像的保存位置，然后您可以使用该预先确定的文件路径来处理新图像。

```
File tempFolder = new File(Environment.getExternalStorageDirectory().getAbsolutePath() 
    + "/your_folder");
tempFolder.mkdir();
file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() 
    + "/your_folder", String.valueOf(System.currentTimeMillis()) + ".jpg");
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
startActivityForResult(intent, TAKE_PICTURE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T07:08:46.440

尝试这个..

```
 Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        File out = Environment.getExternalStorageDirectory();
    out = new File(out, "newImage.jpg");
    i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(out));
    startActivityForResult(i, 1); 
```

这是 onActivity 结果..

```
@Override
protected void onActivityResult(int requestCode, int resultcode, Intent intent)
{

 super.onActivityResult(requestCode, resultcode, intent);
File out = new File(Environment.getExternalStorageDirectory(), "newImage.jpg");

         if(!out.exists())
         {
          Log.v("log", "file not found");
          Toast.makeText(getBaseContext(),

          "Error while capturing image", Toast.LENGTH_LONG)

          .show();

        return;

       }

         Log.v("log", "file "+out.getAbsolutePath());
         File f = new File(out.getAbsolutePath());

         try {

    ExifInterface exif = new ExifInterface(out.getAbsolutePath());
     orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
    //Toast.makeText(getApplicationContext(), ""+orientation, 1).show();
    Log.v("log", "ort is "+orientation);

   } catch (IOException e)
   {
    e.printStackTrace();
   }
Bitmap photo =decodeFile(f,400,400);
  } 
```

这是 decodeFile 函数...

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
     try {
         //Decode image size
         BitmapFactory.Options o = new BitmapFactory.Options();
         o.inJustDecodeBounds = true;
         BitmapFactory.decodeStream(new FileInputStream(f),null,o);

         //The new size we want to scale to
         final int REQUIRED_WIDTH=WIDTH;
         final int REQUIRED_HIGHT=HIGHT;
         //Find the correct scale value. It should be the power of 2.
         int scale=1;
         while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
             scale*=2;

         //Decode with inSampleSize
         BitmapFactory.Options o2 = new BitmapFactory.Options();
         o2.inSampleSize=scale;
         return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
     } catch (FileNotFoundException e) {}
     return null;
 } 
```

# c++ - 带有表达式模板问题的 c++ 矩阵

> ID：13423948
> 
> 赞同：-3
> 
> 时间：2012-11-16T20:29:07.307
> 
> 标签：c++, matrix, matrix-multiplication, expression-templates

我必须制作一个使用矩阵的学校项目。在 Visual Studio 2010 中，一切正常。测试服务器具有“matrix_base”和主要功能，例如：

```
template<class T,  int N,  int M,  class LeftOp,  class RightOp> class my_matrixAdd;
template<class T,  int N,  int M,  class LeftOp,  class RightOp> class my_matrixSub;
template<class T,  int N,  int M,  class LeftOp,  class RightOp> class my_matrixMul;

template<class T,  int N,  int M>
class my_matrix //: matrix_base
{
private:
    T arrData[N][M];
    int columns;
    int rows;
public:

    my_matrix() : columns(N), rows(M) {}
    template<class LeftOp,  class RightOp>
    my_matrix<T, N, M> & operator=(
        const my_matrixAdd<T, N, M, LeftOp, RightOp> & mx)
    {
        for(int i=0; i<N; ++i)
            for(int j=0; j<M; ++j)
            {
                At(i, j) = mx.At(i, j);
            }
        return *this;
    }

    template<class LeftOp,  class RightOp>
    my_matrix<T, N, M> & operator=(
        const my_matrixMul<T, N, M, LeftOp, RightOp> & mx)
    {
        for(int i=0; i<N; ++i)
            for(int j=0; j<M; ++j)
            {
                At(i, j) = mx.At(i, j);
            }
        return *this;
    }

    template<class LeftOp,  class RightOp>
    my_matrix<T, N, M> & operator=(
        const my_matrixSub<T, N, M, LeftOp, RightOp> & mx)
    {
        for(int i=0; i<N; ++i)
            for(int j=0; j<M; ++j)
            {
                At(i, j) = mx.At(i, j);
            }
        return *this;
    }

    virtual ~my_matrix() {}
    const T& At(int n,  int m) const
    {
        return arrData[n][m];
    }
    T& At(int n,  int m)
    {
        return arrData[n][m];
    }

    const T& operator()(int n,  int m) const
    {
        return arrData[n][m];
    };

    T& operator()(int n,  int m)
    {
        return arrData[n][m];
    };

    int Columns() const { return columns; }
    int Rows()    const { return rows;    }

};

template< class T,  int N,  int M,  class LeftOp,  class RightOp>
class my_matrixAdd
{
private:
    const LeftOp& m_lhs;
    const RightOp& m_rhs;
public:
    my_matrixAdd(
        const LeftOp& lhs,  const RightOp& rhs) :
        m_lhs(lhs),  m_rhs(rhs) {}
    T At(int x,  int y) const
    {
        return m_lhs.At(x,  y) + m_rhs.At(x,  y);
    }
};

template<class T,  int N,  int M>
inline my_matrixAdd<T, N, M, my_matrix<T, N, M> , my_matrix<T, N, M>  >
operator+(const my_matrix<T, N, M>  &l,  const my_matrix<T, N, M>  &r)
{
    return my_matrixAdd<T, N, M, my_matrix<T, N, M> ,
           my_matrix<T, N, M>  > (l, r);
}

template<class T,  int N,  int M,  class LeftOp,  class RightOp>
inline my_matrixAdd<T, N, M, my_matrixAdd<T, N, M, LeftOp, RightOp> ,
       my_matrix<T, N, M>  >
       operator+(const my_matrixAdd<T, N, M, LeftOp, RightOp>  &l,
                 const my_matrix<T, N, M>  &r)
{
    return my_matrixAdd<T, N, M, my_matrixAdd<T, N, M, LeftOp, RightOp> ,
           my_matrix<T, N, M>  > (l, r);
}

template<class T,  int N,  int M,  class LeftOp,  class RightOp>
inline my_matrixAdd<T, N, M, my_matrixSub<T, N, M, LeftOp, RightOp> ,
       my_matrix<T, N, M>  >
       operator+(const my_matrixSub<T, N, M, LeftOp, RightOp>  &l,
                 const my_matrix<T, N, M>  &r)
{
    return my_matrixAdd<T, N, M, my_matrixSub<T, N, M, LeftOp, RightOp> ,
           my_matrix<T, N, M>  > (l, r);
}

int main()
{
    my_matrix<int,2,2> mtx1;
    my_matrix<int,2,2> mtx2;
    my_matrix<int,2,2> mtx3;
    my_matrix<int,2,2> mtx4;
    mtx4 = mtx1 + mtx2 + mtx3;
    return 0;
} 
```

服务器中的编译器是带有 -static -O2 参数的 g++。我得到如下错误：

> /var/www/F/I704e/3/1/teszt1.cpp：在函数'int main（）'中：
> 
> /var/www/F/I704e/3/1/teszt1.cpp:42: 错误: 'operator+(const my_matrix&, const my_matrixAdd&) 中的 'operator+' 不匹配 [with T = int, int N = 5, int M = 3, LeftOp = my_matrix, RightOp = my_matrix](((const my_matrixAdd, my_matrix >&)((const my_matrixAdd, my_matrix >*)(& operator+(const my_matrix&, const my_matrix&) [with T = int, int N = 5 , int M = 3](((const my_matrix&)((const my_matrix*)(& mtx3)))))))) + operator+(const my_matrixAdd&, const my_matrix&) [with T = int, int N = 5, int M = 3, LeftOp = my_matrix, RightOp = my_matrix](((const my_matrix&)((const my_matrix*)(& mtx6))))'</p>

就像：

> 在 /var/www/F/I704e/3/1/teszt1.cpp:6 包含的文件中：
> 
> /var/www/Hallg/I704e/3/h145172/7/feladat.cpp：在函数 'my_matrixAdd, my_matrixAdd > operator+(const my_matrixAdd&, const my_matrixAdd&) [with T = int, int N = 5, int M = 3, LeftOp = my_matrix，RightOp = my_matrix]'：

请帮我！谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:39:15.020

这是一个扩展评论。

这是我在您的问题中删除所有不需要的东西：

```
template<class LeftOp,  class RightOp> 
class my_matrixAdd;

struct matrix_base {};

class my_matrix : matrix_base
{
public:
        my_matrix() {}
        template<class LeftOp,  class RightOp> 
        my_matrix & operator=(const my_matrixAdd<LeftOp, RightOp> & mx) {
                return *this;
        }

        virtual ~my_matrix() {}
};

template< class LeftOp,  class RightOp> 
class my_matrixAdd
{
private:
        const LeftOp& m_lhs; 
        const RightOp& m_rhs; 
public:
        my_matrixAdd(const LeftOp& lhs,  const RightOp& rhs) : m_lhs(lhs),  m_rhs(rhs) {} 
};

inline my_matrixAdd<my_matrix , my_matrix  > 
operator+(const my_matrix  &l,  const my_matrix  &r) {
        return my_matrixAdd<my_matrix, my_matrix > (l, r);
}

template<class LeftOp,  class RightOp>  
inline my_matrixAdd<my_matrixAdd<LeftOp, RightOp> , my_matrix  > 
operator+(const my_matrixAdd<LeftOp, RightOp>  &l,  const my_matrix  &r) {
    return my_matrixAdd<my_matrixAdd<LeftOp, RightOp>, my_matrix>(l, r);
}
#include <utility>
int main() {
    my_matrix mtx1;
    my_matrix mtx2;
    my_matrix mtx3;
    my_matrix mtx4;

    // really, we should figure out what type these are explicitly, instead of using auto:
    auto&& tmp1 = mtx1 + mtx2;
    auto&& tmp2 = std::move(tmp1) + mtx3;
    mtx4 = std::move(tmp2);
    auto&& tmp3 = mtx2 + mtx3;
    auto&& tmp4 = mtx1 + std::move(tmp3);
    mtx4 = std::move(tmp4);

    return 0;
} 
```

请注意，此版本也无法编译。然而，原因更明显。

你应该把你的代码精简成这样，或者寻求帮助以理解为什么仍然存在错误，修复它（或者注意不再有问题），然后一次构建它。

您会注意到这些类不再做任何事情——这很好，因为类型错误不是由远程代码所做的事情引起的。（在最坏的情况下，这是由他们的签名引起的，我保持不变）。

# javascript - 如何在 JavaScript 的正则表达式中包含内联注释

> ID：13423949
> 
> 赞同：8
> 
> 时间：2012-11-16T20:29:06.963
> 
> 标签：javascript, regex, comments, emulation, inline-code

当字符串传递给 RegExp 构造函数时，内联注释起作用：

```
RegExp("foo"/*bar*/).test("foo") 
```

但不带表情。JavaScript 中是否有任何等效或替代方法来模拟RegExp 对象的[x 模式？](https://stackoverflow.com/questions/632795/how-do-you-comment-a-perl-regular-expression)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T20:32:02.273

Javascript 既不支持`x`修饰符，也不支持内联注释`(?#comment)`。[看这里。](http://www.regular-expressions.info/refflavors.html)

我想，你能做的最好的事情就是使用`RegExp`构造函数并将每一行写在单独的字符串中并将它们连接起来（字符串之间有注释）：

```
RegExp(
    "foo" + // match a foo
    "bar" + // followed by a bar
    "$"     // at the end of the string
).test("somefoobar"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:31:42.870

除了使用长度为零的子表达式之外，这是不可能的。“评论”的例子：

```
/[a-z](?!<-- Any letter)/ 
```

`(?!..)`是一个否定的前瞻。如果前一个后面没有括号内的字符串，则匹配。由于 and 之间的东西`(?!`是`)`一个真正的正则（子）表达式，除非用反斜杠转义，否则您不能使用任意字符

另一种方法是使用积极的前瞻：

```
/[a-z](?=|<-- Any letter)/ 
```

这种前瞻将始终匹配，因为显然`a-z`后面还有一个空字符串。

# java - 将默认 JFileChooser 目录设置为 JAR 位置的相对路径

> ID：13423950
> 
> 赞同：1
> 
> 时间：2012-11-16T20:29:08.943
> 
> 标签：java, swing

只是对我希望做的事情的快速总结：

我目前在我的家庭网络中的共享文件夹上有一个 Swing 应用程序（仅供个人使用，因此在这种情况下，便利胜过最佳实践）。这个应用程序是一个地图编辑器，我在家里的几台不同的计算机上使用它，如果我需要完全从不同的位置工作，我也想在其他计算机上使用它。

长话短说，我正在尝试找到一种设置方法，以便在运行 JAR 文件并打开文件选择器时，JFileChooser 默认为 JAR 所在的目录（或者更好的是 JAR 中的文件夹根文件夹）。事实上，我只能通过 JFileChooser 构造函数分配一个绝对目录。我现在正在这样做（使用网络目录），但更喜欢相对设置。

这样的事情可能吗？我无法摆脱我做错了什么的感觉，因为我想这将是一个常见问题，但我似乎无法在任何地方找到它（或者更确切地说，我在搜索时没有看到任何答案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:40:00.153

您可以使用以下方式从该 JAR 文件中的类之一获取 JAR 文件的来源：

```
ProtectionDomain pd = ThatClass.class.getProtectionDomain();
CodeSource cs = pd.getCodeSource();
URL location = cs.getLocation(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:03:40.807

您可以使用来获取实际的 JAR 位置，然后解析它并为 JFileChooser`getClass().getProtectionDomain().getCodeSource().getLocation()`设置它。`setCurrentDirectory()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-04T10:46:09.663

您可以在代码中使用它：

```
JFileChooser  fc = new JFileChooser();
fc.setCurrentDirectory(new File(".")); 
```

它将文件选择器的默认位置设置为 jar 文件的位置。

# java - 使用 Apache POI 替换依赖单元格后评估公式

> ID：13423952
> 
> 赞同：2
> 
> 时间：2012-11-16T20:29:14.480
> 
> 标签：java, excel, apache-poi

我能够使用 Apache POI 读取和写入单元格值。阅读时，我首先进行评估，以便获得正确的值。我的用例要求我阅读一张工作表，替换工作表中的一些值，然后阅读工作表的另一部分，其中包含依赖于我刚刚替换的单元格的单元格。

例子。

`A1`包含一个公式：`=B1+C1`。`B1`包含`2`和`C1`包含`3`。当我评估时，`A1`我正确地得到了`5`. 现在，如果我将 POI api 替换`C1`为`10`，我希望当我`A1`再次阅读时会看到`12`. 我不...`A1`现在评估为`null`。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:33:36.780

Apache POI 文档中似乎回答了您的问题[（在“重新计算公式”下）](http://poi.apache.org/spreadsheet/eval.html)

基本上它建议如下：

```
Workbook wb = ...
wb.getCreationHelper().createFormulaEvaluator().evaluateAll(); 
```

# cygwin - 如何使 OpenMP 在 Cygwin 下与 MinGW-64 一起工作？

> ID：13423955
> 
> 赞同：4
> 
> 时间：2012-11-16T20:29:20.427
> 
> 标签：cygwin, 64-bit, openmp, gcc4, mingw-w64

## 情景

我正在使用 C99 ANSI C 开发一个使用[OpenMP](http://www.openmp.org)和[GMP](http://gmplib.org/)的应用程序。它的自然栖息地将是具有大量内核的 linux 机器，所以那里基本上没有什么大问题，但由于我不想在这里讨论的原因，我必须在 64 位 Windows 机器上在 Cygwin 下开发。

当我使用 32 位版本的 gcc 时，某处出现了可怕的错误，并且应用程序比非常粗糙的单线程版本慢了大约 60 倍，而实际上它应该比 CPU 的数量更快. 它使工作变得不可能。我真的不知道是什么原因造成的；无论如何，我已经决定改用 64 位版本的 MinGW，`x86_64-w64-mingw32-gcc-4.5.3`确切地说是和他的朋友。

附注：我确信减速不是我的多线程中的缺陷，多线程应用程序在 linux 机器上工作正常且速度更快。

## 实际问题

设置 GMP 很容易，它可以从源代码编译而没有任何麻烦，然后就像一个魅力一样工作。*编译*下面的简单示例`-fopenmp`也很有魅力：

```
#include <gmp.h>
#include <omp.h>

int main() {
    #pragma omp parallel
    {
        mpz_t t;
        mpz_init(t);
        mpz_set_si(t,omp_get_thread_num());
        # pragma omp critical
        { 
            gmp_printf("Hello From GMP'd Thread %Zd!\n",t); 
            fflush(stdout);
        }
        mpz_clear(t);
    }
    return 0;
} 
```

但是，执行它给了我

```
$ ./test
test.exe: error while loading shared libraries: ?:
cannot open shared object file: No such file or directory 
```

我知道[这个问题](https://stackoverflow.com/questions/5532826/openmp-for-mingw-w64)，但我想在不下载任何二进制文件的情况下完成这项工作，而不是从官方 Cygwin 存储库下载任何二进制文件。由于我的示例是使用`-fopenmp`switch 编译的，我相信这也应该是很有可能的。

有人可以帮我吗？提前感谢一堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:34:09.423

我认为“加载共享库时出错：？：”意味着 cygwin 不知道在哪里可以找到`libgmp-10.dll`和/或`libgomp-1.dll`.

根据[Dependency Walker ，这两个 DLL 都是必需的](http://www.dependencywalker.com/)

![dll](../Images/66297e59efabd5c43470d76764f6e0d5.png)

在我将包含两个 DLL 的目录添加到我的`PATH`：

```
#$ x86_64-w64-mingw32-g++ -fopenmp -o w64test gmp_hello.c -lgmp
#$ file ./w64test.exe
./w64test.exe: PE32+ executable (console) x86-64, for MS Windows

#$ ./w64test.exe
/home/david/SO/hello_openmp/w64test.exe: error while loading shared
 libraries: ?: cannot open shared object file: No such file or
 directory

#$ ls /cygdrive/c/dev/cygwin/usr/x86_64-w64-mingw32/sys-root/mingw/bin/*mp*dll

/cygdrive/c/dev/cygwin/usr/x86_64-w64-mingw32/sys-root/mingw/bin/libgmp-10.dll
/cygdrive/c/dev/cygwin/usr/x86_64-w64-mingw32/sys-root/mingw/bin/libgomp-1.dll

#$ export PATH=$PATH:/cygdrive/c/dev/cygwin/usr/x86_64-w64-mingw32/sys-root/mingw/bin/

#$ ./w64test.exe
Hello From GMP'd Thread 1!
Hello From GMP'd Thread 0! 
```

**笔记**

`gmp-5.0.5`我使用以下命令编译和安装：

```
./configure --build=i686-pc-cygwin --host=x86_64-w64-mingw32 --prefix=/usr/x86_64-w64-mingw32/sys-root/mingw  --enable-shared --disable-static
make -j 2
make check
make install 
```

* * *

**更新**

您的程序也适用于 cygwin“GCC Release series 4 compiler”。

```
#$ g++ -fopenmp -o cygtest gmp_hello.c -lgmp
#$ ./cygtest.exe
 Hello From GMP'd Thread 1!
 Hello From GMP'd Thread 0!

#$ g++ -v
 Target: i686-pc-cygwin
 Thread model: posix
 gcc version 4.5.3 (GCC) 
```

您可能需要安装以下[软件包](http://cygwin.com/packages/)：

*   libgmp-devel（GMP 开发库）
*   libgmp3（GMP 运行时库）
*   libgomp1（GOMP 共享运行时）

# haskell - 如何为具有非 * 类型幻像类型参数的 GADT 导出 Eq

> ID：13423961
> 
> 赞同：5
> 
> 时间：2012-11-16T20:29:43.173
> 
> 标签：haskell, gadt, deriving, data-kinds

例如，尝试编译以下代码

```
{-# LANGUAGE StandaloneDeriving, KindSignatures, DataKinds, GADTs#-}

data ExprTag = Tag1 | Tag2

data Expr (tag :: ExprTag) where
  Con1 :: Int -> Expr tag
  Con2 :: Expr tag -> Expr tag
  Con3 :: Expr tag -> Expr Tag2

deriving instance Eq (Expr a) 
```

给出类型错误

```
Could not deduce (tag1 ~ tag)
from the context (a ~ 'Tag2)
  bound by a pattern with constructor
             Con3 :: forall (tag :: ExprTag). Expr tag -> Expr 'Tag2,
           in an equation for `=='
  at Bar.hs:11:1-29
or from (a ~ 'Tag2)
  bound by a pattern with constructor
             Con3 :: forall (tag :: ExprTag). Expr tag -> Expr 'Tag2,
           in an equation for `=='
  at Bar.hs:11:1-29
  `tag1' is a rigid type variable bound by
         a pattern with constructor
           Con3 :: forall (tag :: ExprTag). Expr tag -> Expr 'Tag2,
         in an equation for `=='
         at Bar.hs:11:1
  `tag' is a rigid type variable bound by
        a pattern with constructor
          Con3 :: forall (tag :: ExprTag). Expr tag -> Expr 'Tag2,
        in an equation for `=='
        at Bar.hs:11:1
Expected type: Expr tag1
  Actual type: Expr tag
In the second argument of `(==)', namely `b1'
In the expression: ((a1 == b1))
When typechecking the code for  `=='
  in a standalone derived instance for `Eq (Expr a)':
  To see the code I am typechecking, use -ddump-deriv 
```

我可以看到为什么这不起作用，但是有一些解决方案不需要我手动编写 Eq（和 Ord）实例吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-17T13:30:20.237

正如其他人所指出的那样，问题的关键`tag`在于`Con3`. 当你试图定义

```
Con3 s == Con3 t = ??? 
```

没有理由为什么`s`和`t`应该是相同的表达式`tag`。

但也许你不在乎？您可以完美地定义*异构*相等测试，它很乐意在`Expr`结构上比较 s，而不管标签如何。

```
instance Eq (Expr tag) where
  (==) = heq where
    heq :: Expr a -> Expr b -> Bool
    heq (Con1 i) (Con1 j) = i == j
    heq (Con2 s) (Con2 t) = heq s t
    heq (Con3 s) (Con3 t) = heq s t 
```

如果您确实关心，那么建议您`Con3`为存在量化的`tag`. 执行此操作的标准方法是使用*单例*构造。

```
data SingExprTag (tag :: ExprTag) where
  SingTag1 :: SingExprTag Tag1
  SingTag2 :: SingExprTag Tag2 
```

对 in 值的案例分析`SingExprTag tag`将准确确定是什么`tag`。我们可以将这条额外的信息输入`Con3`如下：

```
data Expr' (tag :: ExprTag) where
  Con1' :: Int -> Expr' tag
  Con2' :: Expr' tag -> Expr' tag
  Con3' :: SingExprTag tag -> Expr' tag -> Expr' Tag2 
```

现在我们可以检查标签是否匹配。我们可以为这样的标签单例编写异构相等...

```
heqTagBoo :: SingExprTag a -> SingExprTag b -> Bool
heqTagBoo SingTag1 SingTag1 = True
heqTagBoo SingTag2 SingTag2 = True
heqTagBoo _        _        = False 
```

...但是这样做是完全没有用的，因为它只给了我们一个 type 的值`Bool`，不知道这个值意味着什么，也不知道它的真实性可能赋予我们什么。知道这`heqTagBoo a b = True`一点并不能告诉类型检查器关于标签 which`a`和`b`witness 的任何有用信息。**布尔值有点缺乏信息。**

我们可以编写基本相同的测试，但在肯定的情况下提供一些标签相等的*证据。*

```
data x :=: y where
  Refl :: x :=: x

singExprTagEq :: SingExprTag a -> SingExprTag b -> Maybe (a :=: b)
singExprTagEq SingTag1 SingTag1  = Just Refl
singExprTagEq SingTag2 SingTag2  = Just Refl
singExprTagEq _        _         = Nothing 
```

现在我们用煤气做饭！我们可以实现一个实例，当标签显示匹配时，使用比较来证明对两个孩子`Eq`的`Expr'`递归`ExprTag`调用是正确的。`Con3'`

```
instance Eq (Expr' tag) where
  Con1' i    ==  Con1' j    = i == j
  Con2' s    ==  Con2' t    = s == t
  Con3' a s  ==  Con3' b t  = case singExprTagEq a b of
    Just Refl -> s == t
    Nothing -> False 
```

一般情况是，提升的类型需要它们关联的单例类型（至少在我们得到正确的 ∏ 类型之前），我们需要对这些单例家族进行生成证据的异构相等性测试，以便我们可以比较两个单例并获得类型级别当他们见证相同的类型级别值时，他们就知道了。然后，只要您的 GADT 携带任何存在的单例证人，您就可以均匀地测试相等性，确保单例测试的阳性结果为其他测试提供统一类型的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:02:07.747

这是存在主义的问题，而不是提升的那种。在这种情况下，一种解决方案是提供无类型表示

```
data UExpr = UCon1 Int | UCon2 UExpr | UCon3 UExpr deriving (Eq, Ord) 
```

那么你只需要一个函数

```
toUExpr :: Expr t -> UExpr
toUExpr (Con1 x) = UCon1 x
        (Con2 x) = UCon2 $ toUExpr x
        (Con3 x) = UCon3 $ toUExpr x 
```

并且很容易定义您想要的实例

```
instance Eq (Expr x) where
   (==) = (==) `on` toUExpr

instance Ord (Expr x) where
   compare = compare `on` toUExpr 
```

要做得比这更好，几乎可以肯定需要 Template Haskell。

# windows - 是否应该在 Windows 7 机器上安装 Powershell 的 Active Directory 模块来导入它，还是可以从 Windows 2008 R2 DC 远程导入？

> ID：13423965
> 
> 赞同：2
> 
> 时间：2012-11-16T20:29:55.470
> 
> 标签：windows, powershell, active-directory

目前我正在开发任务板，以将一些权限委派给远程管理员。我有以下问题；

-> 对于在 powershell 中导入活动目录模块，应该在本地安装还是可以从 Windows 2008 R2 DC 远程导入？

-> 为了让任务板在远程工作站上工作，管理工具应该安装在所有远程机器上还是有一种集中的方式来维护它们？

如果对我的努力有任何澄清/问题，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:44:45.250

您可以通过这种方式导入远程模块（必须在远程服务器上启用远程处理）：

创建与安装了 activedirectory 模块的服务器的 Powershell 远程会话。

```
$Session = New-PSsession -Computername Server1 
```

使用新创建的远程 Powershell 会话将模块导入该会话

```
Invoke-Command -Command {Import-Module ActiveDirectory} -Session $Session 
```

将该会话与模块一起使用，将可用的命令行开关从 activedirectory 模块添加到本地 Powershell 会话，并添加名称前缀。

```
Import-PSSession -Session $Session -Module ActiveDirectory -Prefix RM 
```

上面的代码允许在未安装此模块的计算机上使用 Active Directory 命令行开关。

在 Powershell 命令 shell 中使用 AD 命令行开关，并根据上面设置的 -Prefix 修改名称：

`Get-RMAdUser` 代替标准`Get-ADUser` `Get-RMAdComputer`代替标准`Get-ADComputer`

您可以避免，`-Prefix RM`但记住从远程导入会很方便。

对于任务板，我很确定在每个使用 ADUC mmc 管理单元安装 RSAT 的客户端上都必须存在该任务板。

# php - 将 php 循环转换为 JavaScript

> ID：13423967
> 
> 赞同：0
> 
> 时间：2012-11-16T20:29:56.903
> 
> 标签：php, jquery, arrays, loops, while-loop

我想将以下代码从 php 转换为 JavaScript：

```
$price = '270';

$allowed_sms_prices = array(
 5,7,10,15,20,25,30,35,39,40,
 45,49,50,55,59,60,69,75,79,85,
 89,95,100,125,150,175,200,225,250,275,
 300,310,315,320,325,330,335,340,345,350,
 355,360,365,370,375,380,385,390,395,400,
 405,410,415,420,425,430,435,440,445,450,
 455,460,465,470,475,480,485,490,495,500
);

while( ! in_array( $price, $allowed_sms_prices ) )
{
     $price = $price + 1;
}
echo $price; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:34:59.920

这是一个等效的javascript：

```
$price = 270;

$allowed_sms_prices = Array(
 5,7,10,15,20,25,30,35,39,40,
 45,49,50,55,59,60,69,75,79,85,
 89,95,100,125,150,175,200,225,250,275,
 300,310,315,320,325,330,335,340,345,350,
 355,360,365,370,375,380,385,390,395,400,
 405,410,415,420,425,430,435,440,445,450,
 455,460,465,470,475,480,485,490,495,500
);

while( $allowed_sms_prices.indexOf($price) == -1 )
{
     $price = $price + 1;
}
alert($price); 
```

看看这有多容易？

您的逻辑仍然存在问题，即循环没有可靠的退出条件。例如，如果该`$price`值大于`500`，则循环将无限期运行。您可以采取多种方法来纠正此问题，其中之一是检查该值是否不大于数组中的最大值。

# jquery - CSS - 如何使溢出隐藏在右侧而不是左侧？

> ID：13423970
> 
> 赞同：5
> 
> 时间：2012-11-16T20:30:17.500
> 
> 标签：jquery, css, scroll, overflow, containers

> **可能重复：**
> [“overflow-x:hidden”只有一侧？](https://stackoverflow.com/questions/8953971/overflow-xhidden-one-side-only)

我有一个水平滚动的容器，当用户向左滚动并溢出时，我希望它仍然显示，但是每当用户向右滚动时，我希望它隐藏。有什么建议么？

这是一些代码：

```
<div class="scroller">
    ... content
</div> 
```

* * *

```
.scroller {
    overflow-x: scroll;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:20:40.397

在 div 内容总是从左到右开始，所以让你的 div`position:absolute`然后 `left:0;`使用`overflow-x: hidden;`这个样式只适用于左侧隐藏

```
.scroller {
   overflow-x: hidden;
   position:absolute;
   left:0;
} 
```

# java - HTML Markdown 源代码的词法分析器 (java)

> ID：13423978
> 
> 赞同：4
> 
> 时间：2012-11-16T20:30:55.097
> 
> 标签：java, html, lexical-analysis

我什至不知道从哪里开始编写逐字符的词法分析器。我根据给定的规则和细节为 Markdown 语言（特别是 HTML）编写了 BNF 语法规则，因此不需要添加任何内容。我现在必须设计和实现一个逐字符的词法分析器，它将我的 Markdown 语言中的源文件的词位划分为标记。这是我的 BNF 语法：

终端：

```
#DOCUMENT BEGIN,
#DOCUMENT END
#HEAD BEGIN,
#HEAD END,
#TITLE BEGIN,
#TITLE END,
#PARAGRAPH BEGIN,
#PARAGRAPH END,
#BOLD BEGIN,
#BOLD END,
#ITALICS BEGIN,
#ITALICS END,
#LIST BEGIN,
#LIST END,
#ITEM BEGIN,
#ITEM END,
#LINK BEGIN,
#TEXT,
#ADDRESS,
#LINK END,
#DEFINE BEGIN,
#NAME,
#VALUE,
#DEFINE END,
#USE BEGIN,
#USE END 
```

***请注意，这些终端不区分大小写。***

非终端：

```
<document> ::= #DOCUMENT BEGIN <macro-­‐define> <head> <body> #DOCUMENT END

<head> ::= #HEAD BEGIN <title> #HEAD END | ε

<title> ::= #TITLE BEGIN <text> #TITLE END | ε

<body> ::= <inner-­‐text> <body>
           | <paragraph> <body>
           | <bold> <body>
           | <italics> <body>
           | <list> <body>
           | ε

<paragraph> ::= #PARAGRAPH BEGIN <macro-­‐define> <inner-­‐paragraph> #PARAGRAPH END

<inner-­‐paragraph> ::= <inner-­‐text> <inner-­‐paragraph>
                      | <bold> <inner-­‐paragraph>
                      | <italics> <inner-­‐paragraph>
                      | <list> <inner-­‐paragraph>
                      | ε

<inner-­‐text> ::= <macro-­‐use> <inner-­‐text>
                  | <text> <inner-­‐text>
                  | ε

<macro-­‐define> ::= #DEFINE BEGIN #NAME <text> #VALUE <body> #DEFINE END <macro-­‐define>
                    | ε

<macro-­‐use> ::= #USE BEGIN <text> #USE END | ε

<bold> ::= #BOLD BEGIN <macro-­‐define> <inner-­‐text> #BOLD END

<italics> ::= #ITALICS BEGIN <macro-­‐define> <inner-­‐text> #ITALICS END

<link> ::= #LINK BEGIN #TEXT <text> #ADDRESS <text> #LINK END

<list> ::= #LIST BEGIN #ITEM BEGIN <macro-­‐define> <inner-­‐list> #ITEM END <list-­‐items> #LIST END

<list-­‐items> ::= #ITEM BEGIN <macro-­‐define> <inner-­‐list> #ITEM END <list-­‐items> | ε

<inner-­‐list> ::= | <bold> <inner-­‐list>
                  | <italics> <inner-­‐list>
                  | <list><inner-­‐list>
                  | <inner-­‐text> <inner-­‐list>
                  | ε

<text> ::= Any plain text | ε 
```

我们可以假设诸如“<”、“>”、“&”和“/”之类的 HTML 字符不会出现在源文件的任何文本中。我们也可以假设“#”只出现在我们的 Markdown 注释之一之前（例如，#DOCUMENT）。我认为最好有单独的 Java 类来表示令牌对象，例如：*DocumentBegin、DocumentEnd、ParagraphBegin、ParagraphEnd 等。*遇到的任何词法错误（例如，#DOC BEGIN）都应该作为输出报告给控制台尽可能的错误信息。遇到第一个错误后，编译器应该退出。如果遇到错误，则不应创建输出文件。

我的问题是，我知道词法分析器应该做什么，但老实说，我不知道从哪里开始编码/实现。如果您需要更多关于问题所在的解释，请询问，我可以尽力解释。这是我们为我的班级准备的一个大项目的一部分。我无法完成这部分并失去了很多分数，但现在我只需要了解它，所以一旦我们对其进行测试，我就不会那么迷失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T03:43:23.013

好的，这有点晚了，但我们开始吧。

词法分析器通常与语法（和 BNF 表示法）相关联，但两者实际上有点不同。

词法分析器将字符转换为标记，这些标记在一定程度上被处理为语法的“原子”，而解析器将标记转换为某种中间结构（通常是树）。仅关注词法分析器部分，您可以将其视为输入的低通处理，就像我们将字母处理成单词一样。

由于您已经掌握了 BNF 语法，因此您已经知道要使用的所有标记（结束词），因此将它们列成一个列表。这个想法是如何快速决定哪些字母系列将映射到列表中的每个项目。例如

```
#, D, E, F, I, N, E, <whitespace> => #DEFINE
#, D, O, C, U, M, E, N, T, <whitespace> => #DOCUMENT
B, E, G, I, N, <whitespace> => BEGIN
E, N, D, <whitespace> => END 
```

在解析过程中会出现一些问题：

首先，你有很多比较要做。读入的第一个字符可能是“#”，如果是，那么您仍然有超过 20 个可能匹配的项目。这意味着您必须继续匹配到下一个字符，如果它是“D”，则仍然意味着有两个可能的匹配“#DEFINE”和“#DOCUMENT”。

其次，如果在处理完“#BEGIN”之后还有“#BEGIN”和“#BEGINNING”之类的词，则在抓住下一个字符之前，您无法在两者之间做出决定。在认为“消耗”字符的系统中抓取下一个字符会使下一个令牌的处理复杂化。可能需要窥视或前瞻，但这些会增加逻辑的复杂性以决定生成哪些令牌。

第三，您有一个通配符“文本”标记。该令牌几乎可以匹配任何东西，因此您需要对照所有其他令牌检查它，以确保您的令牌生成逻辑将始终知道它应该生成哪个令牌。

理想情况下，令牌生成器（Lexer）不依赖于任何解析来“知道”下一个令牌；但是，有些语言足够复杂，以至于解析器会向 Lexer 提供“提示”。避免这些类型的系统有助于更清洁的编译器实现；不幸的是，在一些已经存在的语言中，并不总是可以以这种方式构建东西。

所以，知道你知道该怎么做（在某种意义上你可能已经知道了）你会怎么做？

好吧，您需要某种索引来跟踪您使用的字符（即已完全转换为令牌），这样您就不会意外地给字符带来双重影响 Token 流。如果您要向前看，您需要第二个指针来“向前看”，并且您可能希望限制向前看的数量（以使逻辑不那么困难）。

然后你需要未知数量的数据结构（称为令牌）。虽然并不总是需要这样做，但我建议跟踪 Token 中的起始行号、起始字符索引、结束行号和结束字符索引。它使调试变得容易得多。此外，“捕获”令牌中的子字符串是个好主意。您可以随意称呼它，但有些人称其为令牌的“图像”。

自然，如果您的解析器可以区分不同*类型*的令牌，那么您应该通过某种方式将该令牌的**类型**存储在（或与）令牌中。偶尔有人对代币的“价值”有一个概念，它也可能被存储起来。

经过一番努力，您应该能够将一串字符推入 Lexer 并得到一个 Token 流。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T02:58:52.117

我发现在 Java 中执行此操作的最好的（也就是我知道的）词法分析器称为 JFlex。我们在大学使用它来标记语言，我已经在商业上使用它来为应用程序中的特定领域语言创建语法突出显示。

**JFlex 词法分析器**

[http://jflex.de/](http://jflex.de/)

**杯子解析器**

[http://www2.cs.tum.edu/projects/cup/](http://www2.cs.tum.edu/projects/cup/)

**关于 LALR(1) 解析器的一点点**

[http://en.wikipedia.org/wiki/LALR_parser](http://en.wikipedia.org/wiki/LALR_parser)

如果您需要示例（即示例代码）给我发消息，我会给您发送一些注释。尽管我确信一些大学网站（即普林斯顿）可能有一些东西，但快速谷歌并没有显示任何有用的东西。

干杯，

约翰

# java - java.lang.ArrayIndexOutOfBoundsException: 2 >= 2

> ID：13423984
> 
> 赞同：0
> 
> 时间：2012-11-16T20:31:43.630
> 
> 标签：java

我是 Java 的新手，我的第一个任务是实现一个“for”循环。我用 C++ 编写了这个程序，它用 Java 编译，但在运行时出现错误。谁能告诉我怎么了？

```
import java.util.Scanner;
import java.util.Vector;

public class GlobalMembersMain
{

    public static Vector<Integer> get_prime_factors(int number)
    {

        Vector<Integer> primefactors = new Vector<Integer>();
        for (int j = 2; j <= number; j++)
        {
            if (number % j == 0)
            {
                primefactors.add(j);
                number = number / j;
                j = 1;
            }
        }
        return primefactors;
    }

    public static void main(String[] args)
    {
        int number;
        int count = 1;
        System.out.print("Enter integer to analyse:");
        System.out.print("\n");
        Scanner scan = new Scanner(System.in);
        number = scan.nextInt();
        Vector<Integer> primefactors = new Vector<Integer>();
        primefactors = get_prime_factors(number);
        System.out.print("Prime factors are ");
        for (int a = 0; a < primefactors.size() + 1; a++)
        {
            if (primefactors.elementAt(a) == primefactors.elementAt(a+1))
            {
                count++;
            }
            else
            {
                System.out.print(primefactors.elementAt(a));
                System.out.print(" (");
                System.out.print(count);
                System.out.print(") ");
                count = 1;
            }
        }
        System.out.print("\n");
    }
} 
```

输出：

```
Enter integer to analyse:
10
Prime factors are 2 (1) Exception in thread "main" java.lang.ArrayIndexOutOfBoun
dsException: 2 >= 2
        at java.util.Vector.elementAt(Unknown Source)
        at GlobalMembersMain.main(GlobalMembersMain.java:36) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T20:32:51.270

```
 for (int a = 0; a < primefactors.size() + 1; a++)
    {
        if (primefactors.elementAt(a) == primefactors.elementAt(a+1))
        {
            count++;
        } 
```

超出`primefactors`集合的大小。2，事实上。

更改以`primefactors.size() - 1`避免此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T20:40:09.560

数组是从零开始的，我想你已经知道了。您可能不知道的是，在 Java 中 a`List`也由数组支持。当你调用时，`primefactors.size() +1`你得到的比你可能想要的多一个。例如，pf 的大小为 1，您的循环将执行以下操作：

```
pf.get(0);  //returns the only value in the list  
pf.get(1); // element doesn't exist 
```

现在另一件事是你不想使用`Vector`，一般来说在 Java 中。它是一个同步集合。你想要的是List/ArrayList。

**其他代码问题**

```
public static Vector<Integer> get_prime_factors(int number) 
```

这不需要是静态的。Java中的命名约定也是驼峰式，所以你的函数名应该是`getPrimeFactors(int number)`

`GlobalMembersMain`

最有可能被命名`GlobalMember`为类本质上是单数的，我相信您添加`Main`以表明它是包含主要功能的类。

在你的主要功能中，你会这样做：

GlobalMember 成员 = new GlobalMember();
member.getPrimeFactors(number);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:35:51.580

这就是问题所在：

```
for (int a = 0; a < primefactors.size() + 1; a++)
    {
        if (primefactors.elementAt(a) == primefactors.elementAt(a+1))
        {
            count++;
       }

//... 
```

`primefactors.elementAt(a+1)`集合中的最后一个元素将引发异常 (AIOB)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T21:32:16.777

请记住，Java 中的数组、列表和向量是从零开始的。在您的情况下，`primefactors`向量将包含两个元素，分别位于索引 0 和 1。

您面临的问题是您尝试访问`primefactors.elementAt(2)`不存在的元素。

一个问题是循环中的中断条件：

```
for (int a = 0; a < primefactors.size() + 1; a++) { 
    // ... 
} 
```

第一次`a`为0，第二次`1`都可以。但是，循环*不会*第三次中断，因为`a`将等于 2，即小于`primefactors.size() + 1`。因此，将有一个`primefactors.elementAt(2)`不存在的调用，程序将崩溃。

循环内部还有第二个问题，因为您在比较期间将循环变量加一：

```
if (primefactors.elementAt(a) == primefactors.elementAt(a+1)) { 
    // ... 
} 
```

同样，如果您将 2 作为参数传递给`primefactors.elementAt(...)`

# asp.net - Autofac with MVC4：控制器没有默认构造函数

> ID：13423992
> 
> 赞同：15
> 
> 时间：2012-11-16T20:32:30.937
> 
> 标签：asp.net, dependency-injection, asp.net-mvc-4, autofac

我一直在 MVC3 中使用 Autofac 并且喜欢它。现在我正在尝试用 MVC4 来实现它。

我通过包管理器控制台安装了 Autofac MVC4 和 Autofac WebApi 的预发布版本（Install-Package Autofac.Mvc4 -Pre 和 Install-Package Autofac.WebApi -Pre）

我调整了我的 IoC 容器如下：

```
 private static void SetAutofacContainer()
    {
        var builder = new ContainerBuilder();

        builder.RegisterControllers(Assembly.GetExecutingAssembly());
        builder.RegisterApiControllers(Assembly.GetExecutingAssembly());

        builder.RegisterType<UnitOfWork>().As<IUnitOfWork>().InstancePerHttpRequest().InstancePerApiRequest();
        builder.RegisterType<DatabaseFactory>().As<IDatabaseFactory>().InstancePerHttpRequest().InstancePerApiRequest();
        builder.RegisterType<RepositoryWrapper>().As<RepositoryWrapper>().InstancePerHttpRequest().InstancePerApiRequest();
        builder.RegisterType<ServiceWrapper>().As<ServiceWrapper>().InstancePerHttpRequest().InstancePerApiRequest();

        // Repositories
        builder.RegisterAssemblyTypes(typeof(UserRepository).Assembly).Where(t => t.Name.EndsWith("Repository")).AsImplementedInterfaces().InstancePerHttpRequest().InstancePerApiRequest();

        // Services
        builder.RegisterAssemblyTypes(typeof(UserService).Assembly).Where(t => t.Name.EndsWith("Service")).AsImplementedInterfaces().InstancePerHttpRequest().InstancePerApiRequest();

        IContainer container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
        GlobalConfiguration.Configuration.DependencyResolver = new AutofacWebApiDependencyResolver(container);

    } 
```

当我运行应用程序（通过访问 API 控制器）时，出现异常：“ **Controllers.UserController' 没有默认构造函数**”

控制器如下所示：

```
namespace Controllers
{
[Authorize]
public class UserController : ApiController
{
    private ServiceWrapper _services;

    public UserController(ServiceWrapper services)
    {
        _services = services;
    }

    // GET api/user/{userrequest}
    public IQueryable<User> Get(UserRequest request)
    {
        if (ModelState.IsValid)
        {
          '...
        }  
    } 
} 
```

我错过了什么吗？我没有设置正确吗？任何帮助将不胜感激！

**更新**

我的 API 控制器位于同一解决方案中的单独项目中。如果我将 API 控制器放在我的主 MVC 项目中，它就可以工作。有人可以告诉我如何让 Autofac 在我的 API 项目中注册 API 控制器吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-17T08:33:12.057

使用`RegisterApiControllers`您告诉 Autofac 它应该在哪里（在哪个程序集中）寻找您的方法的方法`ApiControllers`

所以下面的调用：

```
builder.RegisterApiControllers(Assembly.GetExecutingAssembly()); 
```

`ApiControllers`从当前程序集（项目）注册。

如果您`ApiController`在不同的项目中也有 s，则需要像这样使用它：

```
builder.RegisterApiControllers(typeof(UserController).Assembly); 
```

这意味着：注册**所有**形式的`ApiController`程序集（项目）`UserController`。`RegisterApiControllers`因此，即使您`ApiController`在程序集（项目）中有多个，每个程序集也只需要一个。