# StackOverflow 问答 15953000-15953999

# c# - C#异常处理：仍然得到未处理的异常

> ID：15953001
> 
> 赞同：0
> 
> 时间：2013-04-11T15:35:34.060
> 
> 标签：c#, exception-handling, try-catch

我仍然得到

> 未处理的异常：System.IndexOutOfRangeException：索引超出了数组的范围。

吐到我的屏幕上。未处理？为什么？

```
string t="";
try
{ 
     t = line.Substring(236, 14);
}
catch (Exception e)
{
    Console.WriteLine(e.Message);
    Console.WriteLine("Text: "+line+ ", Line Number: " +count);
} 
```

这就是我得到的 startIndex 不能大于字符串的长度。（从打印到控制台）参数名称：startIndex 文本：2933000000，行号：13424（从第二次打印到控制台）

我仍然得到这个：未处理的异常：System.IndexOutOfRangeException：索引超出了数组的范围。

# c# - xml xs 的问题：唯一

> ID：15953008
> 
> 赞同：1
> 
> 时间：2013-04-11T15:35:38.760
> 
> 标签：c#, xml, xsd, schema, unique

我的 xs:unique 不工作。我尝试了本网站提供的各种解决方案。它们似乎都不适合我。我正在使用 C# 针对架构验证我的 xml。例如，重复密钥 passwordomni。

下面是我的架构。

```
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mstns="http://tempuri.org/SqlManifest.xsd">
  <xs:element name="sqlmanifest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="sqlparameters" maxOccurs="1" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="sqlparameter" maxOccurs="unbounded" minOccurs="0">
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute type="xs:string" name="key" use="required"/>
                      <xs:attribute type="xs:string" name="description" use="required"/>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
                <xs:unique name="unique-key">
                  <xs:selector xpath ="mstns:sqlparameter"/>
                  <xs:field xpath="@key"/>
                </xs:unique>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="sqlcommands" maxOccurs="1" minOccurs="1">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="sqlcommand" maxOccurs="unbounded" minOccurs="1">
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute type="xs:string" name="path" use="required"/>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
                <xs:unique name="unique-path">
                  <xs:selector xpath ="mstns:sqlcommand"/>
                  <xs:field xpath="@path"/>
                </xs:unique>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute type="xs:boolean" name="transactional"/>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

下面是我的xml

```
<sqlmanifest transactional="false">
    <sqlparameters>
        <sqlparameter key="dbpath" description="Please enter dbpath"/>
        <sqlparameter key="passworduserOmni" description="Please enter password for OmniUser"/>
        <sqlparameter key="passwordadminOmni" description="Please enter password for OmniAdminUser"/>
                <sqlparameter key="passwordadminOmni" description="Please enter password for OmniAdminUser"/>
    </sqlparameters>
    <sqlcommands>
        <sqlcommand path="scripts/script1.sql"/> 
        <sqlcommand path="scripts/script2.sql" />
        <sqlcommand path="scripts/scripts3.sql" />
        <sqlcommand path="scripts/scripts4.sql" />  
                <sqlcommand path="scripts/script1.sql"/> 
    </sqlcommands>
</sqlmanifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:52:26.700

您的 XML 不使用名称空间，因此您的 XSD 应该没有目标名称空间，因此您不能在 XPath（字段/选择器）中使用任何前缀。

约束必须放置在适当的级别。因此，您`unique-key`必须在.`sqlparameters``unique-path``sqlcommands`

您更正的 XSD 如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mstns="http://tempuri.org/SqlManifest.xsd">
    <xs:element name="sqlmanifest">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="sqlparameters" maxOccurs="1" minOccurs="0">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="sqlparameter" maxOccurs="unbounded" minOccurs="0">
                                <xs:complexType>
                                    <xs:simpleContent>
                                        <xs:extension base="xs:string">
                                            <xs:attribute type="xs:string" name="key" use="required"/>
                                            <xs:attribute type="xs:string" name="description" use="required"/>
                                        </xs:extension>
                                    </xs:simpleContent>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                    <xs:unique name="unique-key">
                        <xs:selector xpath ="sqlparameter"/>
                        <xs:field xpath="@key"/>
                    </xs:unique>
                </xs:element>
                <xs:element name="sqlcommands" maxOccurs="1" minOccurs="1">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="sqlcommand" maxOccurs="unbounded" minOccurs="1">
                                <xs:complexType>
                                    <xs:simpleContent>
                                        <xs:extension base="xs:string">
                                            <xs:attribute type="xs:string" name="path" use="required"/>
                                        </xs:extension>
                                    </xs:simpleContent>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                    <xs:unique name="unique-path">
                        <xs:selector xpath ="sqlcommand"/>
                        <xs:field xpath="@path"/>
                    </xs:unique>
                </xs:element>
            </xs:sequence>
            <xs:attribute type="xs:boolean" name="transactional"/>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

如果您可视化之前和之后的约束，它将帮助您理解为什么范围应该是这样的；此外，考虑到选择器 xpath 植根于元素，它不会符合您的期望。

![在此处输入图像描述](https://i.stack.imgur.com/OPgGq.png)

# java - 计算总价

> ID：15953014
> 
> 赞同：-3
> 
> 时间：2013-04-11T15:35:48.610
> 
> 标签：java

您如何计算购买的杂货的总价格？目前，我只能计算出其中一家杂货店的数量。

以下是我使用过的类：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.text.DecimalFormat;

/**
    Long Distance Calls
*/

public class GroceryMain extends JFrame
{
    private RatePanel ratePanel;        // A panel for rates
    private QuantityPanel quantityPanel;  // A panel for minutes
    private JPanel buttonPanel;         // A panel for the buttons
    private JButton calcButton;         // Calculates everything
    private JButton exitButton;         // Exits the application

    /**
       Constructor
    */

    public GroceryMain()
    {
        // Display a title.
        setTitle("Grocery Shop");

        // Specify what happens when the close button is clicked.
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Create a RatePanel object.
        ratePanel = new RatePanel();

        // Create a MinutesPanel object.
        quantityPanel = new QuantityPanel();

        // Build the panel that contains the buttons.
        buildButtonPanel();

        // Add the panels to the content pane.
        add(ratePanel, BorderLayout.WEST);
        add(quantityPanel, BorderLayout.EAST);
        add(buttonPanel, BorderLayout.SOUTH);

        // Pack and display the window.
        pack();
        setVisible(true);
    }

    /**
       The buildButtonPanel method creates a panel containing
       buttons.
     */

    private void buildButtonPanel()
    {
        // Create a button to calculate the charges.
        calcButton = new JButton("Calculate Charges");

        // Add an action listener to the button.
        calcButton.addActionListener(new CalcButtonListener());

        // Create a button to exit the application.
        exitButton = new JButton("Exit");

        // Add an action listener to the button.
        exitButton.addActionListener(new ExitButtonListener());

        // Put the buttons in their own panel.
        buttonPanel = new JPanel();
        buttonPanel.add(calcButton);
        buttonPanel.add(exitButton);
    }

   /**
      CalcButtonListener is an action listener class for the
      calcButton component.
   */

   private class CalcButtonListener implements ActionListener
   {
      /**
         actionPerformed method
         @param e An ActionEvent object.
      */

      public void actionPerformed(ActionEvent e)
      {
         double rate;         // Applicable rate
         double totalCharges; // Total charges

         // Create a DecimalFormat object to format output.
         DecimalFormat dollar = new DecimalFormat("#,##0.00");

         // Get the applicable rate.
         rate = ratePanel.getRate();

         // Get the total charges
         totalCharges = quantityPanel.getCharges(rate);

         // Display the message.
         JOptionPane.showMessageDialog(null, "Total Charges: £" + 
                                             dollar.format(totalCharges));
      }
   } // End of inner class

   /**
      ExitButtonListener is an action listener class for the
      exitButton component.
   */

   private class ExitButtonListener implements ActionListener
   {
      /**
         actionPerformed method
         @param e An ActionEvent object.
      */

      public void actionPerformed(ActionEvent e)
      {
         System.exit(0);
      }
   } // End of inner class

   /**
      The main method creates an instance of the LongDistance
      class, causing it to display its window.
   */

   public static void main(String[] args)
   {
       GroceryMain ld = new GroceryMain();
   }
}

    import java.awt.*;
import javax.swing.*;

/**
   MinutesPanel class
   Long Distance Calls
*/

public class QuantityPanel extends JPanel
{
   private JTextField quantity;   // To get minutes
   private JTextField quantity2;   // To get minutes
   private JTextField baked_beans_JT;     // JTextField box for baked_beans
   private JTextField Cornflakes_JT;       // JTextField box for cornflakes
   private JTextField Sugar_JT; // JTextField box for sugar box
   private JTextField Tea_Bags_JT;    // JTextField box for tea bag
   private JTextField Instant_Coffee_JT;    // JTextField box for Instant_Coffee_Box
   private JTextField Bread_JT;       // JTextField box for bread box
   private JTextField Sausage_JT;  // JTextField box for sausage box
   private JTextField egg_JT;  // JTextField box for egg box
   private JTextField milk_JT;  // JTextField box for milk
   private JTextField potatoes_JT;  // JTextField box for potatoes

   /**
      Constructor
   */

   public QuantityPanel()
   {
      // Create a label prompting the user and a text field.
      //JLabel minutesMsg = new JLabel("Quantity:");
      quantity = new JTextField(5);

      quantity2 = new JTextField(5);
      baked_beans_JT = new JTextField(5);
      Cornflakes_JT = new JTextField(5);
      Sugar_JT = new JTextField(5);
      Tea_Bags_JT = new JTextField(5);
      Instant_Coffee_JT = new JTextField(5);
      Bread_JT = new JTextField(5);
      Sausage_JT = new JTextField(5);
      egg_JT = new JTextField(5);
      milk_JT = new JTextField(5);
      potatoes_JT = new JTextField(5);

      //initialize text field to 0
      baked_beans_JT.setText("0");
      Cornflakes_JT.setText("0");
      Sugar_JT.setText("0");
      Tea_Bags_JT.setText("0");
      Instant_Coffee_JT.setText("0");
      Bread_JT.setText("0");
      Sausage_JT.setText("0");
      egg_JT.setText("0");
      milk_JT.setText("0");
      potatoes_JT.setText("0");

      // Create a GridLayout manager.
      setLayout(new GridLayout(15, 1));

      // Create a border.
      setBorder(BorderFactory.createTitledBorder("QTY"));

      // Add the labels and text fields to this panel.
      //add(minutesMsg);
      //add(quantity);
     // add(quantity2);
      add(baked_beans_JT);
      add(Cornflakes_JT);
      add(Sugar_JT);
      add(Tea_Bags_JT);
      add(Instant_Coffee_JT);
      add(Bread_JT);
      add(Sausage_JT);
      add(egg_JT);
      add(milk_JT);
      add(potatoes_JT);

   }

   /**
      The getCharges method uses the specified rate to calculate
      the charges for the number of minutes entered.
      @param rate The per-minute rate.
      @return The charges for the number of minutes used.
   */

   public double getCharges(double rate)
   {
      double charges = Double.parseDouble(baked_beans_JT.getText()) * rate;

      return charges;
   }

}

    import java.awt.*;
import javax.swing.*;
import java.text.DecimalFormat;

/**
   RatePanel class
   Long Distance Calls
*/

public class RatePanel extends JPanel
{
   // Named constants for rates
   private final double BAKED_BEANS= 0.35;
   private final double CORNFLAKES = 1.75;
   private final double SUGAR = 0.75;
   private final double TEA_BAGS = 1.15;
   private final double INSTANT_COFFEE = 2.50;
   private final double BREAD = 1.25;
   private final double SAUSAGES = 1.30;
   private final double EGGS = 0.75;
   private final double MILK = 0.65;
   private final double POTATOES = 2.00;

   private JCheckBox bakedbeans; // Radio button for daytime rate
   private JCheckBox cornflakes; // Radio button for evening rate
   private JCheckBox sugar; // Radio button for off peak rate
   private JCheckBox teabags; // Radio button for off peak rate
   private JCheckBox instantcoffee; // Radio button for off peak rate
   private JCheckBox bread; // Radio button for off peak rate
   private JCheckBox sausages; // Radio button for off peak rate
   private JCheckBox eggs; // Radio button for off peak rate
   private JCheckBox milk; // Radio button for off peak rate
   private JCheckBox potatoes; // Radio button for off peak rate

   //private ButtonGroup bg;       // Radio button group

   /**
      Constructor
   */

   public RatePanel()
   {
      // Create a DecimalFormat object.
      DecimalFormat dollar = new DecimalFormat("#,##0.00");

      // Create the check boxes.
      bakedbeans = new JCheckBox("Bakedbeans (£" +
                        dollar.format(BAKED_BEANS) + " per packet)");
      cornflakes = new JCheckBox("Cornflakes (£" +
                        dollar.format(CORNFLAKES) + " per packet)");
      sugar = new JCheckBox("Sugar (£" + 
                        dollar.format(SUGAR) + " per packet)");

      teabags = new JCheckBox("Teabags (£" + 
              dollar.format(TEA_BAGS) + " per item)");
      instantcoffee = new JCheckBox("Instantcoffee (£" + 
              dollar.format(INSTANT_COFFEE) + " per packet)");
      bread = new JCheckBox("Bread (£" + 
              dollar.format(BREAD) + " per packet)");
      sausages = new JCheckBox("Sausages (£" + 
              dollar.format(SAUSAGES) + " per packet)");
      eggs = new JCheckBox("Eggs (£" + 
              dollar.format(EGGS) + " per packet)");
      milk = new JCheckBox("Milk (£" + 
              dollar.format(MILK) + " per packet)");
      potatoes = new JCheckBox("Potatoes (£" + 
              dollar.format(POTATOES) + " per packet)");

      // Create a GridLayout manager.
      setLayout(new GridLayout(15, 12));

      // Create a border.
      setBorder(BorderFactory.createTitledBorder("Select a Category"));

   // Add the check boxes to this panel.
      add(bakedbeans);
      add(cornflakes);
      add(sugar);
      add(teabags);
      add(instantcoffee);
      add(bread);
      add(sausages);
      add(eggs);
      add(milk);
      add(potatoes);
   }

   /**
      The getRate method returns the rate for the selected
      rate category.
      @return One of the constants DAYTIME_RATE, EVENING_RATE, or
              OFF_PEAK_RATE.
   */

   public double getRate()
   {
      double rate = 0.0;

      if (bakedbeans.isSelected())
         rate += BAKED_BEANS;
      if (cornflakes.isSelected())
         rate = CORNFLAKES;
      else if (sugar.isSelected())
         rate += SUGAR;
      else if (teabags.isSelected())
          rate += TEA_BAGS;
      else if (instantcoffee.isSelected())
          rate += INSTANT_COFFEE;
      else if (bread.isSelected())
          rate += BREAD;
      else if (sausages.isSelected())
          rate += SAUSAGES;
      else if (eggs.isSelected())
          rate += EGGS;
      else if (milk.isSelected())
          rate += MILK;
      else if (potatoes.isSelected())
          rate += POTATOES;

      return rate;
   }
} 
```

当用户选择多个复选框及其数量时，我希望能够计算杂货的总价格..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:37:46.230

试试 if - if 而不是 if-else if。

if - else 如果条件满足，则执行相应的语句并且不评估剩余的条件。

if -if 将评估每个条件。

```
public double getRate()
{
  double rate = 0.0;

   if (bakedbeans.isSelected())
     rate += BAKED_BEANS;
   if (cornflakes.isSelected())
     rate += CORNFLAKES;
   if (sugar.isSelected())
     rate += SUGAR;
   if (teabags.isSelected())
      rate += TEA_BAGS;
   if (instantcoffee.isSelected())
      rate += INSTANT_COFFEE;
   if (bread.isSelected())
      rate += BREAD;
   if (sausages.isSelected())
      rate += SAUSAGES;
   if (eggs.isSelected())
      rate += EGGS;
   if (milk.isSelected())
      rate += MILK;
   if (potatoes.isSelected())
      rate += POTATOES;

  return rate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:30:11.610

据我了解，`getCharges`旨在返回所选项目的总成本。当前的实现是：

```
public double getCharges(double rate)
{
  double charges = Double.parseDouble(baked_beans_JT.getText()) * rate;

  return charges;
} 
```

不幸的是，您不能使用所选烘焙豆的数量来预测客户还购买了什么:)

有几种方法可以解决这个问题，恐怕它们都需要在代码的其他地方进行修改。我建议研究数组的使用。如果您想避免这种情况，则必须执行类似的操作：

```
double charges = 0;
charges += Integer.parseInt(baked_beans_JT.getText()) * BAKED_BEANS;
charges += Integer.parseInt(cornflakes_JT.getText()) * CORNFLAKES;
... 
```

由于`getRate`不再需要该方法，因此您可以对其进行调整并节省一些复制粘贴。

但实际上，请查看数组或集合。没有它们，您将面临令人沮丧的未来。

# asp.net - WCF 客户端-服务器 NullReferenceException

> ID：15953016
> 
> 赞同：0
> 
> 时间：2013-04-11T15:36:00.503
> 
> 标签：asp.net, wcf, xpo

好的，这是我一整天都在处理的问题：

我正在使用 WCF 数据服务和 XPO 作为包含方法的服务器端的 ORM 数据模型构建 Web 应用程序表单，而在客户端，我试图在身份验证后从 Web 表单向数据库添加一行.

用户可以使用以下代码登录而不会出现问题：

```
try
            {
                ctx = null;
                ctx = new XpoContext(serviceRootUri);

                ctx.Credentials = new NetworkCredential(UserName.Text, UserPass.Text);
                var res = ctx.Users.FirstOrDefault();

                FormsAuthentication.RedirectFromLoginPage(UserName.Text, Persist.Checked);
            }

            catch (SecurityException ex)
                {
                Msg.Text = "Erreur: " + ex.Message;
                }
         } 
```

现在我想用这段代码在数据库中添加一行：

```
Uri u = new Uri(string.Format(LogIn.ctx.BaseUri + "/CreateUser?name='{0}'&pass='{1}'",
            New_UserName.Text, New_UserPass.Text), UriKind.RelativeOrAbsolute);

            LogIn.ctx.Execute(u, "GET");

            ServiceReference1.Users user = new ServiceReference1.Users();
            user.Nom = New_UserName.Text;
            user.Pass = New_UserPass.Text;

            LogIn.ctx.AddToUsers(user);
            LogIn.ctx.SaveChanges(); 
```

但在第一两行执行后发生异常。

我在登录页面中将我的上下文声明为静态：

```
private static Uri serviceRootUri = new Uri("http://localhost:28748/WcfDataService1.svc/");
public static XpoContext ctx; 
```

如您所见，我使用 LogIn.ctx 在 adduser Web 表单中调用我的上下文（登录页面中的相同上下文）

谢谢

# model - 如何从 Ember 数据中的字符串名称解析模型类？

> ID：15953026
> 
> 赞同：2
> 
> 时间：2013-04-11T15:36:33.063
> 
> 标签：model, ember.js, ember-data

我正在尝试使用 ember-data，并且我需要能够动态解析给定字符串的模型名称。

我查看了 ember-data 代码库，但在那里找不到任何东西。然后我在 ember 中找到了这个：

```
/**
  @private

  This function defines the default lookup rules for container lookups:

  * templates are looked up on `Ember.TEMPLATES`
  * other names are looked up on the application after classifying the name.
    For example, `controller:post` looks up `App.PostController` by default.
  * if the default lookup fails, look for registered classes on the container

  This allows the application to register default injections in the container
  that could be overridden by the normal naming convention.

  @param {Ember.Namespace} namespace the namespace to look for classes
  @return {any} the resolved value for a given lookup
*/
function resolverFor(namespace) {

  resolve: function(fullName) {
    return this.resolver(fullName) || this.registry.get(fullName);
  },

  normalize: function(fullName) {
    return fullName;
  },

  lookup: function(fullName, options) { 
```

我会假设 ember-data 与此功能挂钩，所以我可以这样做：

`App.resolver.resolveModel "model:#{modelName}"`

但很可惜，没有...

也许这是要走的路？（来自 store.js 行 ~1500）

```
 typeMapFor: function(type) {
    var typeMaps = get(this, 'typeMaps');
    var guidForType = Ember.guidFor(type);

    var typeMap = typeMaps[guidForType];

    if (typeMap) {
      return typeMap;
    } else {
      return (typeMaps[guidForType] =
        {
          idToCid: {},
          clientIds: [],
          recordArrays: []
      });
    }
  }, 
```

看起来商店内部有某种类型映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:33:51.200

如果您声明了模型，则序列化程序知道如何执行此操作。看`DS.Serializer typeFromAlias`

[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/serializer.js#L1103](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/serializer.js#L1103)

你从哪里来的字符串？

# mysql - MySQL 高效多表多索引选择

> ID：15953027
> 
> 赞同：1
> 
> 时间：2013-04-11T15:36:34.950
> 
> 标签：mysql, database, select, indexing

我想从数据库中的两个表中按 name1 或 name2 进行搜索。

重要提示：只有一些名称具有与之关联的辅助名称2。

表 n1 和 n2 如下：

```
table n1
|---------------*----------------*-----------------|
| id            | name1          | n2_id           |
|---------------*----------------*-----------------|
| 1             | Joseph         | 1               |
| 2             | David          | NULL            |
| 3             | James          | 2               |
|---------------*----------------*-----------------|

table n2
|---------------*----------------|
| id            | name2          |
|---------------*----------------|
| 1             | Joe            |
| 2             | Jim            |
|---------------*----------------| 
```

（我知道我可以在 n1 表中创建一个名称 2 字段，但这只是对需要此结构的更复杂系统的简化。）

我目前从表 n1 中选择如下：

```
SELECT id, name1, MATCH ( name1 ) AGAINST ( "+joe*") AS score 
FROM n1 
WHERE MATCH ( name1 ) AGAINST ( "+joe*" in boolean mode) 
order by score desc; 
```

这对于一个非常大的表非常有效。

但是，我想根据搜索字符串从 n1 和 n2 中选择 MATCHING name1 或 name2（如果存在），就好像这两个表是合并的一样。

问题是，当多个表中有不同的索引时，我遇到了按组合分数排序的选择效率问题。

这个问题不仅仅是关于如何构造 SELECT。它是关于如何以有效使用索引的方式构造 SELECT。（桌子很大）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T12:31:24.447

尝试这个

```
SELECT 
n1.id, name1, n2_id, n2.id, name2 
FROM n1 LEFT OUTER JOIN n2 ON
n2.id = n2_id 
WHERE name1 LIKE '%j%' OR name2 LIKE '%j%'
ORDER BY name1; 
```

我使用了[LEFT OUTER JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)，因为

> “只有一些名称具有与之关联的次要名称2。”

我将两个基于 n2_id 的表与 n2 中的 id 字段组合在一起。

我使用 mysql [LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)进行字符串比较。

这是[SQLFIDDLE](http://sqlfiddle.com/#!2/a0b0b/3)

# objective-c - UISearchController SearchTableView 的单元格没有响应 didSelectRowAtIndexPath

> ID：15953030
> 
> 赞同：0
> 
> 时间：2013-04-11T15:36:40.743
> 
> 标签：objective-c, uitableview, uisearchbar, uisearchdisplaycontroller

我有一个带有搜索显示控制器的主表视图。我正在使用实现的自定义 cell.h

> *   (void)setSelected:(BOOL)选定动画:(BOOL)动画

当我从主表中选择单元格时，上面的代码会更改此选定单元格的背景颜色。当我选择从搜索栏中搜索时，搜索显示控制器使用正确的背景颜色显示所选单元格

> *   (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath

但是，在搜索显示控制器上显示的该单元格不响应`didSelectRowAtIndexPath`和`didDeselectRowAtIndexPath`。另一方面，其他细胞对这两种方法都有反应。

我想要实现的是主表和搜索显示控制器上的搜索表视图之间的同步，其中选定的单元格应该在主表和搜索表视图中显示为选中状态，但允许选择和取消选择。

请指教。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:54:01.117

我找到了我的问题的答案：

利用

> *   (void)searchDisplayController:(UISearchDisplayController *)controller willShowSearchResultsTableView:(UITableView *)tableView

和

> [tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:[searchResult indexOfObject:currentFriend] inSection:0] 动画：NO scrollPosition:0];

代替

> (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath

希望能帮助到你！

# php - htaccess 重写问题

> ID：15953031
> 
> 赞同：-2
> 
> 时间：2013-04-11T15:36:42.207
> 
> 标签：php, .htaccess

在网站上工作，并遇到一些问题`.htaccess`。

我确实有一个类别链接，如下所示：

```
sharing/index.php?cf=category&id=$1 
```

我对它进行了重写：

```
sharing/cat-([^/]+)$ 
```

效果很好，然后我在脚本中添加了分页，链接中的分页是这样的：

```
sharing/cat-1?next=1 
```

我想让它像这样：

```
sharing/cat-1/page/1 
```

我已经尽力了，但没有成功。请注意`cat-1`对于类别 ID 的含义，它可能是另一个类别`cat-3`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:47:46.697

该错误来自您没有逃脱正斜杠的事实。

所以你应该试试这个 RewriteRule

```
RewriteRule ^sharing\/cat-([^\/]+)\/page\/([0-9]*)$ sharing/index.php?cf=category&id=$1&next=$2 
```

分页的链接应该是这样的：

```
sharing/cat-1/page/1 
```

不是你提到的那个（`sharing/cat-1?next=1`）

请记住，如果您的类别只是数字，最好更改`([^\/]+)`为`([0-9]*)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:45:03.633

试试下面的例子，我传递了两个变量：

```
RewriteRule ^player/([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$ players/view.php?player=$1&page=$2 [NC,L] 
```

为了扩展它，您只需将**([A-Za-z0-9-]+)/**添加到 URL，并在另一侧传递另一个参数。

# hadoop - 如何在级联中重命名管道字段？

> ID：15953035
> 
> 赞同：0
> 
> 时间：2013-04-11T15:36:51.197
> 
> 标签：hadoop, mapreduce, cascading

在两个不同的情况下，我不得不重命名管道中的所有字段以加入（使用`Merge`or `CoGroup`）。我最近做的是：

```
//These two pipes contain similar values but different Field Names
Pipe papa = new Retain(papa, fieldsFrom);
Pipe pepe = new Retain(pepe, fieldsTo);

//Where fieldsFrom.size() == fieldsTo.size() and the fields positions match
for (int i =0; i < fieldsFrom.size(); i++){

    pepe = new Rename(pepe, fieldsFrom.select(new Fields(i)), 
                            fieldsTo.select(new Fields(i)));

}

//this allows me to do this
Pipe retVal = new Merge(papa, pepe); 
```

显然这是非常脆弱的，因为我需要确保 FieldsFrom 和 FieldsTo 中的字段位置保持不变并且它们的大小相同等。

有没有更好的 - 不那么脆弱的合并方式而无需经历上述所有仪式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T12:27:30.777

您可以通过利用 Rename 处理对齐的 from/to 字段的能力来消除一些仪式，如下所示：

```
pepe = new Rename(pepe, fieldsFrom, fieldsTo); 
```

但这只是消除了 for 循环；是的，您必须确保 fieldsFrom 和 fieldsTo 大小相同且对齐以正确表达重命名。

cascading.jruby 通过将重命名包装在一个接受映射而不是从/到字段对齐的[函数中来解决这个问题。](https://github.com/mrwalker/cascading.jruby/blob/master/lib/cascading/identity_operations.rb#L24-L40)

Merge 也需要传入管道来声明相同的字段，但 CoGroup 只要求您提供 declareFields 以确保输出上没有名称冲突（所有字段都通过传播，甚至对来自所有输入的键进行分组）。

# list - 在表单上显示不同的选项 - 基于其他字段值

> ID：15953038
> 
> 赞同：0
> 
> 时间：2013-04-11T15:37:00.220
> 
> 标签：list, sharepoint, options

在 SP 2010 列表中，我有一个可以预测多种活动类型的预测。预测单位因活动类型而异。同时，用户应该能够在每个活动中选择 2-3 个合适的单位。

例子：

活动类型： - 适用单位

处理发票： - 客户发票数量/客户发票数量

处理资产负债表：-红色资产负债表数/黑色资产负债表数

处理支票： - 绿色支票的数量/蓝色支票的数量等。

我想使用 1 列作为活动类型，1 列用于适用单位，所有适用单位列表作为选项。

当用户在 newform 上输入预测时，他/她首先填充活动类型列。基于此值，我只想提供适用于活动类型的单位。

做起来很难吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:55:52.067

做起来并不难，但您确实需要了解 JavaScript。

也许这个[http://spservices.codeplex.com/wikipage?title=$%28%29.SPServices.SPCascadeDropdowns&referringTitle=Documentation](http://spservices.codeplex.com/wikipage?title=%24%28%29.SPServices.SPCascadeDropdowns&referringTitle=Documentation)可能有用......

# java - SWT 中的米勒列？

> ID：15953039
> 
> 赞同：3
> 
> 时间：2013-04-11T15:37:01.073
> 
> 标签：java, swt, miller-columns

是否有实现[米勒列](http://en.wikipedia.org/wiki/Miller_columns)的 SWT 小部件？

这就是我的意思：

![在此处输入图像描述](https://i.stack.imgur.com/NBkm1.jpg)

一种递归主细节小部件，当用户在最右边的列中选择一个项目时动态添加一个新列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:41:51.930

[opal 项目](http://code.google.com/a/eclipselabs.org/p/opal/)有一个名为[`ColumnBrowser`](http://code.google.com/a/eclipselabs.org/p/opal/wiki/ColumnBrowser).

这是一个屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/sqj7X.png)

# proxy - Squid ICAP 重写内容

> ID：15953041
> 
> 赞同：1
> 
> 时间：2013-04-11T15:37:09.317
> 
> 标签：proxy, reverse-proxy, squid, content-adaptation

我有以下需求：

1.  网络应用程序在`http://mything.com/`.
2.  反向代理服务器位于`http://mything.com/proxy/`
    1.  反向代理应该代理：`[http://mything.com/proxy/http://bbc.co.uk/](http://mything.com/proxy/http://bbc.co.uk/)`例如。
3.  反向代理应重写源页面 ( ) 中的所有链接、src、href 等，以`htp://bbc.co.uk`将它们从`http://mything.com/proxy/$1`.

我们有 90% 的 Ruby 工作实现，开发为*Rack*应用程序，一系列 8 个中间件可以完成各种工作：

*   重写cookie域
*   从我们的网站注入一个 javascript 块
*   重写链接以适应代理。

诚然，我们的 Ruby 版本还不错，但是处理一个页面大约需要一秒钟，这速度非常慢，而且根本无法融合。当我们将 SSL 引入混合时，它会变得更糟，并且管理层正在讨论剥离所有 SSL，并且只使用 http。（这自然是目光短浅，而且非常愚蠢。）

这类问题必须通过 Squid 等工具和 ICAP 等协议草案得到更广泛的解决。

我想放弃我们自己开发的解决方案，因为它是持续痛苦的根源，而且**速度很慢**。

我刚来了解*Squid*的[*Content Adaptation*](http://wiki.squid-cache.org/SquidFaq/ContentAdaptation)功能，但还没有找到合适的方法让它发挥作用。

我可以看到以下我无法解决的问题：

1.  如何从原始请求 URI 中提取 URL 组件？即我怎样才能把`.../proxy/(.*)`它用作后端地址？
2.  如何在 ICAP 程序中重写 cookie？即 ICAP 内容改编程序是否收到完整的请求？
3.  如何使用 ICAP 重写 url、链接等？（[Squirm](http://squirm.foote.com.au/)看起来很有希望，但看起来事情必须进行硬编码（参见第 1 点。）即是否有任何更智能的工具可以简单地使用正则表达式/等？

我知道这个问题有被标记为*“没有研究证据”*的风险，但我已经处于我能够确定的范围内，而无需花费数天（或看起来如此）来学习鱿鱼的错综复杂，当我唯一需要的是重写一些内容时！

# c# - 实体框架 - 如何在查询中从字符串转换为整数

> ID：15953054
> 
> 赞同：1
> 
> 时间：2013-04-11T15:37:44.153
> 
> 标签：c#, entity-framework, entity-framework-4, typeconverter, sql-function

我有一个旧数据库，其 ID 相同，存储有多种表示形式（字符串和整数）。我需要我的查询基于键加入。

我知道`SqlFunctions.StringConvert`，但它不适用于我的情况，因为 ID 具有 0 前缀，并且数字的规范表示与其他表示不具有字符串等价性。

如何在查询中将我的数字字符串值转换为整数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:55:28.290

你不能只使用 TrimStart 吗？

~~id.TrimStart('0');~~

（编辑）实际上 LINQ to Entities 不喜欢这样，所以你需要尝试这个而不是在比较之前去除前导零：

[实体框架查询中的用户修剪启动](https://stackoverflow.com/questions/7936718/user-trimstart-in-entity-framework-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:48:59.310

不确定这是否是您要查找的内容，但由于您的数字字符串中可能包含字符，您可以仅从字符串中提取数字

```
var getNumbers =Convert.ToInt32 (from t in stringToQuery
                   where char.IsDigit(t)
                   select t).ToArray().ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:52:19.743

也许你应该尝试这样的事情：

```
 //example
    List<string> texts = new List<string>();
    List<int> integers = new List<int>();
    for (int j = 1; j <= 10; j++)
    {
        text.Add("00" + j.ToString());
        integers.Add(j);
    }
    var a = from t in texts
            join i in integers on Convert.ToInt32(t) equals i
            select t; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T16:03:57.503

我会创建一个类来存储您的表示。

```
public sealed class CanonicalInt: IEquatable<int>, IEquatable<string>
{
    private int _number;
    private string _canonical
    {
        get
        {
            return ""; //logic to turn int into format
        }
        set
        {
            _number = 0; ////logic to turn string into format
        }
    }

    public CanonicalInt(int number)
    {
        _number = number;
    }

    public CanonicalInt(string number)
    {
        _canonical = number;
    }

    public bool Equals(int other)
    {
        return _number.Equals(other);
    }

    public bool Equals(string other)
    {
        if(other == null)
            return false;

        return _canonical.Equals(other);
    }

    public static implicit operator int(CanonicalInt canonicalInt) 
    {
        return canonicalInt._number;
    }

    public static implicit operator string(CanonicalInt canonicalInt) 
    {
        return canonicalInt._canonical;
    }
} 
```

用法：

```
var number = new CanonicalInt(23);
var result = number == 23; // True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T20:48:59.467

如果你的字符串总是以规范数字结尾，它们可能是 patindex、datalength 和 stringconvert 的组合？（请将模拟的 SqlFunctions 替换为真实的，然后它应该在表上的 2entities 上下文中运行）：

```
string [] Strings = new string [] {"0015","0-00152","00-0012"};
int[] Integers = new int[] { 15,12};

var MixedResult = Strings.Where(s => Integers.Any(i => (PatIndex(StringConvert(i),s) + DataLength(StringConvert(i))) == DataLength(s))).ToList(); 
```

这些只是模拟的 SqlFunction：

```
private string  StringConvert(int x) 
{
    return x.ToString();
}

private int PatIndex(string pattern,string target)
{
      return target.IndexOf(pattern);
}

private int DataLength(string x) 
{
    return x.Length;
} 
```

# html - 为什么地址元素不能在 p 元素中？

> ID：15953055
> 
> 赞同：1
> 
> 时间：2013-04-11T15:37:44.553
> 
> 标签：html, dom, seo, paragraph

我已经查看了[https://stackoverflow.com/questions/5542428/why-on-earth-is-address-a-block-level-element](https://stackoverflow.com/questions/5542428/why-on-earth-is-address-a-block-level-element)，发现它对此事几乎没有什么洞察力。

一位客户给了我一段纯文本，我正在尝试针对用户体验和搜索引擎优化对其进行优化。这是文本中间的相关片段：

```
<p>[Several sentences]. Having trouble? Contact <address style="font-style:normal;display:inline">Jane Doe at <a href="mailto:jdoe@example.com">jdoe@example.com</a> or <a href="callto:5551234567">(555) 123-4567</a></address> between the hours of 9AM and 5PM. [Several sentences].</p> 
```

然而，由于`<address>`是块级元素，DOM 最终看起来像这样：

```
<p>[Several sentences]. Having trouble? Contact </p>
<address style="font-style:normal;display:inline">Jane Doe at <a href="mailto:jdoe@example.com">jdoe@example.com</a> or <a href="callto:5551234567">(555) 123-4567</a></address>
between the hours of 9AM and 5PM. [Several sentences].<p></p> 
```

输出如下所示：

> [几句话]。遇到麻烦？接触
> 
> Jane Doe 在 jdoe@example.com 或 (555) 123-4567
> 
> 在上午 9 点到下午 5 点之间。[几句话]。

显然，这破坏了用户体验，并且不是有效的 HTML。我的问题是仅块级**背后的原因是什么`<address>`，有什么办法可以让它内联显示？**如您所见，CSS`display:inline`属性/值对这种情况没有任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:43:50.083

> 为什么地址元素不能在`p`元素中？

[因为 HTML 规范以这种方式定义了它们](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-address-element)。

> 该`address`元素表示其最近的`article`或`body`元素祖先的联系信息。如果那是`body`元素，那么联系信息将应用于整个文档。

这意味着`<address>`元素并不是用来标记任何旧地址的。这意味着您将使用 .`<address>`作为联系文章来源的一种方式。在一篇文章中，讨论“第四街 123 号”不值得使用`<address>`元素。

如果您想将其描述为用于样式目的的地址，您始终可以将其指定`class`为：

```
<span class="address">123 fourth street</span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:06:29.500

不要将`<address>`元素用于通用地址，而是将[Person 模式](http://schema.org/Person)与[Microdata](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html)或[hCard Microformat](http://www.microformats.org/wiki/hcard)或[RDFa](http://examples.tobyinkster.co.uk/hcard)一起使用。这是微数据的示例：

```
<p itemscope itemtype="http://schema.org/Person">
    [Several sentences]. Having trouble? 
    Contact <span itemprop="name">Jane Doe</span> at 
    <a itemprop="email" href="mailto:jdoe@example.com">jdoe@example.com</a>
    or <a itemprop="telephone" href="tel:5551234567">(555) 123-4567</a> 
    between the hours of 9AM and 5PM.
    [Several sentences].
</p> 
```

您可以[使用 Google 网站管理员工具测试数据提取](http://www.google.com/webmasters/tools/richsnippets?url=&html=%3Cp+itemscope+itemtype%3D%22http%3A%2F%2Fschema.org%2FPerson%22%3E%0D%0A++++%5bSeveral+sentences%5d.+Having+trouble%3F+%0D%0A++++Contact+%3Cspan+itemprop%3D%22name%22%3EJane+Doe%3C%2Fspan%3E+at+%0D%0A++++%3Ca+itemprop%3D%22email%22+href%3D%22mailto%3Ajdoe%40example.com%22%3Ejdoe%40example.com%3C%2Fa%3E%0D%0A++++or+%3Ca+itemprop%3D%22telephone%22+href%3D%22tel%3A5551234567%22%3E%28555%29+123-4567%3C%2Fa%3E+%0D%0A++++between+the+hours+of+9AM+and+5PM.%0D%0A++++%5bSeveral+sentences%5d.%0D%0A%3C%2Fp%3E)（向下滚动到标题为“提取的结构化数据”的部分）。

# perl - Perl - 需要大量时间的数据比较

> ID：15953060
> 
> 赞同：0
> 
> 时间：2013-04-11T15:38:00.227
> 
> 标签：perl

```
open(INFILE1,"INPUT.txt");

my $modfile = 'Data.txt';
open MODIFIED,'>',$modfile or die "Could not open $modfile : $!";   

for (;;) {
    my $line1 = <INFILE1>;
    last if not defined $line1;

    my $line2 = <INFILE1>;
    last if not defined $line2;

    my ($tablename1, $colname1,$sql1) = split(/\t/, $line1);
    my ($tablename2, $colname2,$sql2) = split(/\t/, $line2);

    if ($tablename1 eq $tablename2)
    {
        my $sth1 = $dbh->prepare($sql1);
        $sth1->execute;
        my $hash_ref1 = $sth1->fetchall_hashref('KEY');

        my $sth2 = $dbh->prepare($sql2);
        $sth2->execute;
        my $hash_ref2 = $sth2->fetchall_hashref('KEY');

        my @fieldname = split(/,/, $colname1);
        my $colcnt=0;
        my $rowcnt=0;
        foreach $key1 ( keys(%{$hash_ref1}) ) 
        {

            foreach (@fieldname)
            { 
                $colname =$_;

                my $strvalue1='';
                @val1 = $hash_ref1->{$key1}->{$colname};

                if (defined @val1)
                {
                    my @filtered = grep /@val1/, @metadata;
                    my $strvalue1 = substr(@filtered[0],index(@filtered[0],'||') + 2);
                }

                my $strvalue2='';
                @val2 = $hash_ref2->{$key1}->{$colname};
                if (defined @val2)
                {
                    my @filtered = grep /@val2/, @metadata2;
                    my $strvalue2 = substr(@filtered[0],index(@filtered[0],'||') + 2);
                }                   

                if ($strvalue1 ne $strvalue2 )
                { 
                    $colcnt = $colcnt + 1;
                    print MODIFIED "$tablename1\t$colname\t$strvalue1\t$strvalue2\n";
                }
            }
        }
        if ($colcnt>0) 
        {   
            print "modified count is $colcnt\n";
        }   

        %$hash_ref1 = ();
        %$hash_ref2 = ();

    } 
```

该程序是读取输入文件，其中每一行包含三个由制表符分隔的字符串。第一个是 TableName，第二个是所有列名，中间有逗号，第三个包含要运行的 sql。由于此实用程序正在比较数据，因此每个表名都有两行。每个数据库一个。因此需要从每个相应的数据库中挑选数据，然后逐列进行比较。

SQL 在结果集中作为 ID 返回，如果值来自 db，则需要通过从数组中读取将其转换为字符串（该数组包含 100K 记录，键和值由 || 分隔）
现在我运行了这个一组表，每个数据库中包含 18K 条记录。每个 sql 中从 db 中选择了 8 列。因此，对于 18K 中的每条记录，然后对于该记录中的每个字段（即 8 条），此脚本都需要大量时间。

我的问题是，是否有人可以看看它是否可以改进，以便减少时间。文件内容示例

```
INPUT.TXT      
TABLENAME   COL1,COL2   select COL1,COL2 from TABLENAME where ......    
TABLENAMEB  COL1,COL2   select COL1,COL2 from TABLENAMEB where ...... 
```

元数据数组包含类似这样的内容（每个 db 有两个 ie）

```
111||Code 1    
222||Code 2 
```

请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:26:49.410

这不是一个真正的答案，但它也不太适合评论，所以在您提供更多信息之前，这里有一些观察。

在你的内部`for`循环中，有：

```
@val1 = $hash_ref1->{$key1}->{$colname}; 
```

你的意思是`@val1 = @{ $hash_ref1->{$key1}->{$colname} };`？

后来，你检查`if (defined @val1)`？你真正想检查什么？正如[perldoc -f 定义](http://perldoc.perl.org/functions/defined.html)的那样：

> 不推荐在聚合（散列和数组）上使用“定义”。它用于报告该聚合的内存是否已分配。这种行为可能会在 Perl 的未来版本中消失。您应该改为使用简单的大小测试：

在你的情况下，`if (defined @val1)`永远都是真的。

那么，你有`my @filtered = grep /@val1/, @metadata;`哪里`@metadata`来的？您实际上打算检查什么？

然后你有`my $strvalue1 = substr(@filtered[0],index(@filtered[0],'||') + 2);`

里面发生了一些有趣的事情。

你需要用语言表达你真正想要做的事情。

我强烈怀疑你可以运行一个 SQL 查询，它会给你想要的东西，但我们首先需要知道你想要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:24:19.613

您的代码确实看起来有点不寻常，并且可以通过使用子例程而不是仅使用循环和条件来获得清晰。这里有一些其他的建议。

* * *

摘录

```
for (;;) {
  my $line1 = <INFILE1>;    
  last if not defined $line1;    
  my $line2 = <INFILE1>;    
  last if not defined $line2;  
  ...;
} 
```

过于复杂：不是每个人都知道 C-ish`for(;;)`成语。你有很多代码重复。你真的不是在说`loop while I can read two lines`吗？

```
while (defined(my $line1 = <INFILE1>) and defined(my $line2 = <INFILE1>)) {
  ...;
} 
```

是的，那条线更长，但我认为它更像是自我记录。

* * *

而不是做

```
if ($tablename1 eq $tablename2) { the rest of the loop } 
```

你可以说

```
next if $tablename1 eq $tablename2;
the rest of the loop; 
```

并保存一个级别的意图。更好的意图等于更好的可读性使得编写好的代码更容易。更好的代码可能会表现得更好。

* * *

你在做什么`foreach $key1 (keys ...)`——有些事情告诉我你没有`use strict`！（只是提示：词法变量 with`my`可以比全局变量执行得稍好）

此外，`$colname = $_`出于同样的原因，在 for 循环中执行操作是一件愚蠢的事情。

```
for my $key1 (keys ...) {
  ...;
  for my $colname (@fieldname) { ... }
} 
```

* * *

```
my $strvalue1='';
@val1 = $hash_ref1->{$key1}->{$colname};

if (defined @val1)
{
  my @filtered = grep /@val1/, @metadata;
  my $strvalue1 = substr(@filtered[0],index(@filtered[0],'||') + 2);
} 
```

我不认为这会像*你*认为的那样。

从`$hash_ref1`您检索单个元素，然后将该元素分配给一个数组（多个值的集合）。

然后你调用`defined`了这个数组。数组不能未定义，并且您正在做的事情已被弃用。对集合调用`defined`函数返回有关内存管理的信息，但不指示①数组是否为空或②数组中的第一个元素是否已定义。

将数组内插到正则表达式中不太可能有用：数组的元素与 的值（`$"`通常是空格）连接，并将生成的字符串视为正则表达式。如果存在元字符，这将造成严重破坏。

当您只需要列表的第一个值时，您可以强制列表上下文，但分配给单个标量，例如

```
my ($filtered) = produce_a_list; 
```

这使您从不需要的奇怪下标中解脱出来，这只会减慢您的速度。

然后分配给*刚刚声明*`$strvalue1`的变量。这遮住了外层。它们不是同一个变量。所以在分支之后，你仍然有空字符串。*`$strvalue1``if``$strvalue1`*

 *我会像这样写这段代码

```
my $val1 = $hash_ref1->{$key1}{$colname};

my $strvalue1 = defined $val1
  ? do {
    my ($filtered) = grep /\Q$val1/, @metadata;
    substr $filtered, 2 + index $filtered, '||'
  } : ''; 
```

`@metadata`但是，如果您预先分成对并使用正确的字段测试是否相等，这将更便宜。这将消除一些仍然潜伏在该代码中的错误。

* * *

`$x = $x + 1`是常用的写法`$x++`。

* * *

在迭代结束时清空 hashrefs 是不必要的：hashrefs 在循环的下一次迭代中被分配给一个新值。此外，对于这些简单的任务，没有必要协助 Perls 垃圾收集。

* * *

关于元数据：10 万条记录很多，所以要么将其放入数据库本身，要么至少是一个哈希。特别是对于如此多的记录，使用哈希比遍历所有条目和使用慢正则表达式要快得多……啊*！*

1.  在程序开始时从文件创建哈希

    ```
    my %metadata;
    while (<METADATA>) {
       chomp;
       my ($key, $value) = split /\|\|/;
       $metadata{$key} = $value; # assumes each key only has one value
    } 
    ```

2.  只需查找循环内的密钥

    ```
    my $strvalue1 = defined $val1 ? $metadata{$val1} // '' : '' 
    ```

那应该快得多。

（哦，请考虑为变量使用更好的名称。`$strvalue1`除了它是一个字符串值（d'oh）之外，什么都没有告诉我。`$val1`更糟。）*

# javascript - 如何从粉丝页面中筛选出最活跃的用户？

> ID：15953062
> 
> 赞同：16
> 
> 时间：2013-04-11T15:38:05.827
> 
> 标签：javascript, facebook, facebook-page, browser-extension

我正在创建一个新网站。我想使用另一个与我的主题相关的 Web 服务来推广它。我想向那些推广我的第一个网站和粉丝专页的人发送一些礼物。如何过滤掉 20 个喜欢/分享/评论我大部分帖子的用户？

任何合适的编程语言都会很好。

**[编辑]**

好的...老实说，我正在寻找一种方法来解析不是我的粉丝专页。我想向我比赛的粉丝专页最活跃的用户发送礼物，以简单地贿赂他们 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T14:14:38.263

根据 Ahmed Nuaman 的[回答](https://stackoverflow.com/a/16256373/338581)（也请给他们+1），我准备了这段代码：

用法示例：

分析[http://www.facebook.com/cern最活跃的 facebook 用户](http://www.facebook.com/cern)

`$ python FacebookFanAnalyzer.py cern likes`

`$ python FacebookFanAnalyzer.py cern comments`

`$ python FacebookFanAnalyzer.py cern likes comments`

**注意：不支持分享和内部评论**

文件：FacebookFanAnalyzer.py

```
# -*- coding: utf-8 -*-
import json
import urllib2
import sys
from collections import Counter
reload(sys)
sys.setdefaultencoding('utf8')
###############################################################
###############################################################
#### PLEASE PASTE HERE YOUR TOKEN, YOU CAN GENERETE IT ON:
####    https://developers.facebook.com/tools/explorer
#### GENERETE AND PASTE NEW ONE, WHEN THIS WILL STOP WORKING

token = 'AjZCBe5yhAq2zFtyNS4tdPyhAq2zFtyNS4tdPw9sMkSUgBzF4tdPw9sMkSUgBzFZCDcd6asBpPndjhAq2zFtyNS4tsBphqfZBJNzx'

attrib_limit = 100
post_limit = 100
###############################################################
###############################################################

class FacebookFanAnalyzer(object):

    def __init__(self, fanpage_name, post_limit, attribs, attrib_limit):
        self.fanpage_name = fanpage_name
        self.post_limit = post_limit
        self.attribs = attribs
        self.attrib_limit = attrib_limit
        self.data={}

    def make_request(self, attrib):
        global token
        url = 'https://graph.facebook.com/' + self.fanpage_name + '/posts?limit=' + str(self.post_limit) + '&fields=' + attrib + '.limit('+str(self.attrib_limit)+')&access_token=' + token
        print "Requesting '" + attrib + "' data: " + url
        req = urllib2.urlopen(url)
        res = json.loads(req.read())

        if res.get('error'):
            print res['error']
            exit()

        return res

    def grep_data(self, attrib):
        res=self.make_request(attrib)
        lst=[]
        for status in res['data']:
            if status.get(attrib):
                for person in status[attrib]['data']:
                    if attrib == 'likes':
                        lst.append(person['name'])
                    elif attrib == 'comments':
                        lst.append(person['from']['name'])
        return lst

    def save_as_html(self, attribs):
        filename = self.fanpage_name + '.html'
        f = open(filename, 'w') 

        f.write(u'<html><head></head><body>')
        f.write(u'<table border="0"><tr>')
        for attrib in attribs:
            f.write(u'<td>'+attrib+'</td>')
        f.write(u'</tr>')

        for attrib in attribs:
            f.write(u'<td valign="top"><table border="1">')

            for d in self.data[attrib]:
                f.write(u'<tr><td>' + unicode(d[0]) + u'</td><td>' +unicode(d[1]) + u'</td></tr>')

            f.write(u'</table></td>')

        f.write(u'</tr></table>')
        f.write(u'</body>')
        f.close()
        print "Saved to " + filename

    def fetch_data(self, attribs):
        for attrib in attribs:
            self.data[attrib]=Counter(self.grep_data(attrib)).most_common()

def main():
    global post_limit
    global attrib_limit

    fanpage_name = sys.argv[1] 
    attribs = sys.argv[2:] 

    f = FacebookFanAnalyzer(fanpage_name, post_limit, attribs, attrib_limit)
    f.fetch_data(attribs)
    f.save_as_html(attribs)

if __name__ == '__main__':
    main() 
```

**输出：**

```
Requesting 'comments' data: https://graph.facebook.com/cern/posts?limit=50&fields=comments.limit(50)&access_token=AjZCBe5yhAq2zFtyNS4tdPyhAq2zFtyNS4tdPw9sMkSUgBzF4tdPw9sMkSUgBzFZCDcd6asBpPndjhAq2zFtyNS4tsBphqfZBJNzx
Requesting 'likes' data: https://graph.facebook.com/cern/posts?limit=50&fields=likes.limit(50)&access_token=AjZCBe5yhAq2zFtyNS4tdPyhAq2zFtyNS4tdPw9sMkSUgBzF4tdPw9sMkSUgBzFZCDcd6asBpPndjhAq2zFtyNS4tsBphqfZBJNzx
Saved to cern.html 
```

![在此处输入图像描述](https://i.stack.imgur.com/0sE3P.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-27T20:05:11.060

方法有很多，我先从最简单的...

1.  假设涉及品牌名称或#hashtag，那么您可以这样使用搜索 API：[https](https://graph.facebook.com/search?q=watermelon&type=post&limit=1000) ://graph.facebook.com/search?q=watermelon&type=post&limit= 1000 然后迭代数据，比如最新的 1000 (参数）从所有状态中`limit`找出模式用户（出现最多的用户）。

2.  假设它只是一个页面，那么您可以访问`/<page>/posts`端点（例如：[https](https://developers.facebook.com/tools/explorer?method=GET&path=cocacola%2Fposts) ://developers.facebook.com/tools/explorer?method=GET&path=cocacola%2Fposts ），因为它会给您一个最新帖子的列表（它们是分页的，因此您可以遍历结果），这将包括一个喜欢这些帖子并对其发表评论的人的列表；然后你可以找出模式用户等等。

就代码而言，您可以使用任何东西，您甚至可以使用简单的 Web 服务器（例如 MAMP 或 WAMP 等）或 CLI 在您的机器上本地运行它。响应是所有 JSON 和现代语言能够处理这个。这是我为 Python 中的第一种方法编写的一个简单示例：

```
import json
import urllib2
from collections import Counter

def search():
  req = urllib2.urlopen('https://graph.facebook.com/search?q=watermelon&type=post')
  res = json.loads(req.read())
  users = []

  for status in res['data']:
    users.append(status['from']['name'])

  count = Counter(users)

  print count.most_common()

if __name__ == '__main__':
  search() 
```

如果您以后想参考它，我已将其粘贴在 github 上：[https ://github.com/ahmednuaman/python-facebook-search-mode-user/blob/master/search.py](https://github.com/ahmednuaman/python-facebook-search-mode-user/blob/master/search.py)

当您运行代码时，它将返回该搜索中模式用户的有序列表，例如，使用特定搜索标签发布最多评论的用户。如果您希望使用它，这可以很容易地适应第二种方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T22:07:21.273

在页面`/feed`连接处阅读页面上的帖子列表，并跟踪在每个帖子上发布和评论的用户的用户 ID，建立一个最常这样做的列表。

然后将这些存储在某处并使用系统中决定将奖金发送给谁的存储列表。

例如

[http://graph.facebook.com/cocacola/feed](http://graph.facebook.com/cocacola/feed)返回可口可乐页面上所有最近的帖子，您可以跟踪发帖者、评论者、喜欢者的 ID，以确定谁是最活跃的用户

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-29T06:28:59.493

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-21T14:43:03.280

编写一个 php 或 jquery 脚本，当用户在实际分享/喜欢到 fb 之前在您的网站上单击或分享时执行该脚本，并记录用户信息和他/她分享/喜欢的帖子。现在您可以跟踪谁分享了您的帖子最多。

PHP/Jquery 脚本将充当中间人，所以不要直接使用 facebook share/like 脚本。我将尝试找到我为此方法编写的代码。我用过 PHP 和 Mysql。尝试使用 JQuery，这将在隐藏进程方面提供更好的结果（我的意思是无需重新加载页面即可记录数据）。

# migration - Joomla 3.0：modul.js：$extend 未定义

> ID：15953064
> 
> 赞同：3
> 
> 时间：2013-04-11T15:38:07.763
> 
> 标签：migration, joomla3.0

我从 1.5.x 升级到 3.0.x。在迁移过程中，新页面设置在单独的目录中，因此可以使用旧页面而无需停机。在安装了所有必需的模块、模板和一些结构的重组后，我删除了旧页面并将所有文件从子目录移动到根目录。（另外我更改了配置，因此不再引用子目录。）一切顺利，用户前端似乎还可以。在管理页面中，我有一个主要问题：

任何需要模态面板的页面（例如为横幅定义图像、定义菜单项）都会引发 Javascript 错误并且无法使用该页面：

```
Uncaught ReferenceError: $extend is not defined modal.js:368
(anonymous function) 
```

你有任何提示如何解决这个问题吗？

谢谢。

卡斯滕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:48:04.313

尝试重新上传目录中的所有文件：

`/media/system/js/`

如果错误仍然存​​在或发生其他错误，请考虑再次上传 Joomla 核心文件。

请注意，逐个文件的 FTP 上传文件容易出错。上传 zip 并解压缩服务器上的所有内容通常更安全（更不用说它更快）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-03T14:01:32.377

对于那些仅通过重新上传 /media/system/js 无法解决的问题，对于进行极远升级（例如海报提到的 1.5.x 到 3.0.x）的人来说，此错误可能会突然出现，因为[“$extend " 在 mootools 中已被弃用](http://mootools.net/core/docs/1.6.0/Core/Core#Deprecated-Functions:extend)（并最终被删除）。

这意味着您的旧扩展可能正在尝试使用 mootools 中不再存在的代码。如果您可以找到导致问题的扩展程序的更新，那么这可能就足够了。如果你不能，那么通常很容易自己修复......

**此错误的简短修复是更改`$extend`为`Object.append`**

以下是有关升级 mootools 的更多信息，这可能有助于解决其他问题。 [https://github.com/mootools/mootools-core/wiki/Upgrade-from-1.2-to-1.3-or-1.4](https://github.com/mootools/mootools-core/wiki/Upgrade-from-1.2-to-1.3-or-1.4)

# javascript - 修复了滚动页面时表格的标题

> ID：15953066
> 
> 赞同：0
> 
> 时间：2013-04-11T15:38:11.403
> 
> 标签：javascript, jquery, css, html-table

有人可以帮我解决这种情况吗？ [Javascript 修复表头](https://stackoverflow.com/questions/15931729/javascript-fix-table-header?answertab=votes#tab-top)

我也遇到了同样的问题，但是不知道怎么解决。对不起，重复。

谢谢

编辑：我试图在 Table 的所有 TH 和 TD 标签上设置固定宽度。但仍有一些 TD TH 的宽度被弄乱了。我只想使用 DOM 找到宽度并将该宽度附加到克隆表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:52:35.223

```
$("table thead").css('position','absolute'); 
```

这会起作用

# java - DecimalFormat“模式中的多个小数分隔符”

> ID：15953067
> 
> 赞同：1
> 
> 时间：2013-04-11T15:38:12.307
> 
> 标签：java, formatting, supercsv

我想将十进制值格式化为货币值：1234.56d 应该变成“1.234,56”（这种格式在一些欧洲国家使用）。我正在使用以下模式来格式化十进制值：

```
final DecimalFormat df = new DecimalFormat("###.###.###,00");
final String formatted = df.format(1234.56d);
System.out.println(formatted); 
```

事实上，我正在使用[SuperCSV](http://supercsv.sourceforge.net)的类[FmtNumber](http://supercsv.sourceforge.net/apidocs/org/supercsv/cellprocessor/FmtNumber.html#FmtNumber%28java.lang.String%29)，但这没关系，因为模式语法是相同的： new FmtNumber("###.###.###,00");

我得到的是一个 IllegalArgumentException 消息“模式中的多个小数分隔符”。

我知道只能有一个小数分隔符。但在我的情况下，它应该是符号“，”。而“，”在我的模式中只出现一次。

我在 Web 和 StackOverflow 上搜索了这条异常消息，但没有找到有用的答案。

我的错误是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T15:40:54.533

从[javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)中的格式字符串`.`始终是小数分隔符，并且始终**是****分组**分隔符。`,`

 **它在格式化中的实际表示`String`由格式化程序实例的语言环境给出。

例如

```
final DecimalFormat decimalFormat = new DecimalFormat("###,###,##0.00", DecimalFormatSymbols.getInstance(Locale.ENGLISH)); 
```

如果您查看[javadoc](http://supercsv.sourceforge.net/apidocs/org/supercsv/cellprocessor/FmtNumber.html#FmtNumber%28java.lang.String%29)清楚地`FmtNumber`说明“使用 DecimalFormat 类和默认语言环境” - 因此您需要具有正确的默认值`Locale`才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:42:30.267

您应该使用文化而不是自定义字符串来格式化。只需使用：

```
decimalNumber.ToString("C2", CultureInfo.CreateSpecificCulture("fr-FR")); 
```**

# hadoop - 分析 Pig/Hive 编译器生成的 Map-Reduce 作业

> ID：15953072
> 
> 赞同：0
> 
> 时间：2013-04-11T15:38:38.480
> 
> 标签：hadoop, hive, apache-pig

无论如何，是否可以查看 Pig 和 Hive 生成​​的 Map-Reduce 作业的代码？

我知道使用 Hive，我可以查看抽象语法树，但似乎无法访问 MR 作业的实际 Java 代码。我在那个假设中错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T01:03:24.103

Pig 和 Hive 不生成任何 Java 代码，而是计划。可以使用 shell 中的 explain 命令查看该计划。从 SQL 生成 Java 代码的一种方法是使用[YSmart](http://ysmart.cse.ohio-state.edu/)。请注意，Hive 中发生了很多[变化](http://archive.aweber.com/thecloudavenue/FOo6Q/h/thecloudavenue_com_SQL_.htm)，以使其更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T19:59:25.443

您可以自己下载和构建源代码。

然后使用像eclipse这样的java IDE，你可以远程调试你可以检查代码。尽管您可能没有所有依赖项并且可能无法检查所有对象，但您可以比 Explain 函数更详细地查看计划。

要允许远程调试，请将调试参数添加到您的 hadoop bash 脚本中：

```
-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=1044 
```

# wpf - 为用户控件定义视图模型的类型，然后从父控件处理它

> ID：15953073
> 
> 赞同：1
> 
> 时间：2013-04-11T15:38:39.363
> 
> 标签：wpf, mvvm

我正在尝试围绕 WPF 和 MVVM 进行思考。

在我的测试应用程序中，我有`MainViewModel`一个`ChildViewModel`属性。
同样，我有一个 Window 实例化 a`MainViewModel`并有一个应该接收的子控件`MainViewModel.ChildViewModel`

对于我当前的应用程序，我有一个窗口（为简洁起见）

```
<Window.DataContext>
    <vm:MainWindowViewModel />
</Window.DataContext>
<Window.Content>
    <view:ChildView DataContext="ChildViewModel"/>
</Window.Content> 
```

如何让 ChildView 用户控件定义它需要 ChildViewModel 类型的数据上下文并接收它？

目前我通过这样设置它来创建它：

```
<UserControl.DataContext>
    <vm:ChildViewModel>
</UserControl.DataContext> 
```

但这会创建 ChildViewModel 的新实例。

我试图让这个问题尽可能简单。希望它仍然清楚
谷歌搜索出现了很多（竞争）方法，但我再也看不到森林了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:41:17.707

您`UserControl`不需要指定它是自己的`ViewModel`- 您已经在创建并绑定它。

话虽如此，您的绑定应指定为：

```
<view:ChildView DataContext="{Binding ChildViewModel}"/> 
```

混淆可能源于这样一个事实，即 MVVM 有两种截然不同的方法。在 Xaml 的`<DataContext>`标签中创建 VM 是一种“视图优先”的方法 - 视图正在创建和实例化 ViewModel。

您目前正在更多地使用 ViewModel-First 方法（类似于[我在 MVVM 上的系列](http://reedcopsey.com/series/windows-forms-to-mvvm/)），其中 ViewModel 创建其他 ViewModel，而 VIew 只是绑定到它们。

就个人而言，我发现从代码的角度来看，VM-first 更容易维护，并且通常更喜欢它。View-first 具有（可能）提供更好的设计时体验的优势，这就是许多 MVVM 倡导者使用这种方法的原因。

# android - 如何以编程方式创建 admob 横幅？

> ID：15953075
> 
> 赞同：22
> 
> 时间：2013-04-11T15:38:44.160
> 
> 标签：android, admob

如何使用代码创建 admob 智能横幅？我的布局完全是用代码构建的。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-11T16:45:09.367

您可以或多或少地这样做：

```
LinearLayout adContainer = <container>;
AdView adView = new AdView(activity)
adView.setAdSize(AdSize.SMART_BANNER);
adView.setAdUnitId(<your-publisher-id>);

// Initiate a generic request to load it with an ad
AdRequest adRequest = new AdRequest();
adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
adView.loadAd(adRequest);

// Place the ad view.
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
adContainer.addView(adView, params); 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-07T13:27:25.170

将此添加到您的**活动中**

```
//Add this in OnCreate of Activity to initialize the ad
MobileAds.initialize(getApplicationContext(), "< your-ad-unit-Id >"); 
```

```
//Add this wherever your code needs to add the ad

LinearLayout layout = new LinearLayout(this);
layout.setOrientation(LinearLayout.VERTICAL);

//Additionally to adjust the position to Bottom
layout.setGravity(Gravity.BOTTOM);

// Create a banner ad
mAdView = new AdView(this);
mAdView.setAdSize(AdSize.SMART_BANNER);
mAdView.setAdUnitId("<your-ad-unit-Id>");

// Create an ad request.
AdRequest.Builder adRequestBuilder = new AdRequest.Builder();

// Optionally populate the ad request builder.
adRequestBuilder.addTestDevice(AdRequest.DEVICE_ID_EMULATOR);

// Add the AdView to the view hierarchy.
layout.addView(mAdView);

// Start loading the ad.
mAdView.loadAd(adRequestBuilder.build());

setContentView(layout); 
```

* * *

**然后检查您是否已在Manifest**中授予权限

 **```
 <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

**在Manifest**的 <application> 里面添加下面的元数据

 **```
<meta-data android:name="com.google.android.gms.version"
           android:value="@integer/google_play_services_version" /> 
```

* * *

最后检查您是否添加了在**app gradle**中编译所需的**依赖项**

 **```
compile 'com.google.android.gms:play-services:9.6.1' 
```

* * *

* * *******

# algorithm - 在百万二叉搜索树的列表中查找下面的树是否存在

> ID：15953078
> 
> 赞同：-1
> 
> 时间：2013-04-11T15:38:50.320
> 
> 标签：algorithm, data-structures, binary-search-tree

例如，

考虑以下树，检查它们是否存在于 BST 列表中。

```
 5
          / \
         4   6
        / \
       1   3

       3
      / \
     2   4 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:00:25.190

根据根对列表进行排序（如果根相同，则左节点等）。对每个查询树进行二分搜索。

如果查询数量与列表中的元素数量相当，则此方法有效。复杂性：( (n+m)logn) 其中 m 是查询数，n 是列表中的元素数。

如果查询的数量很少，蛮力搜索是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:05:11.873

这个问题的答案是将列表中的所有树放入哈希表中，以便对树进行恒定时间搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:10:32.370

我会把它作为答案提出来，以便人们可以根据需要做出变化。

一种天真的方法是只扫描列表，比较每个节点，一旦发现要比较的两棵树有差异，就继续查看列表中的下一个。=> O(N) 其中 N 是节点的总数。

# javascript - Javascript Promise/然后失去作用域

> ID：15953080
> 
> 赞同：1
> 
> 时间：2013-04-11T15:39:12.487
> 
> 标签：javascript, backbone.js, jquery-deferred, promise, q

谁能告诉我我在这里做错了什么？

我有一个承诺，当返回结果时会丢失局部变量范围。

我需要延迟调用完成时可用的 id 值：

```
getChildren:function(id){
    service.getChildren(id)
   .then(function(result){
        var parentId = id  //null
        return result
    })
   .fail(function (error) {
        log.error(error);
    })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:56:48.030

您是否期望`result`从对 的调用中返回`getChildren()`？

如果是这样（假设`service.getChildren()`返回一个 jQuery Promise），代码需要稍微修改一下，以便`.getChildren()`返回稍后交付的*承诺：*`result`

这可以通过以下方式实现：

```
getChildren:function(id) {
    return service.getChildren(id).done(function(result) {
        //here do something generic with `result`
    }).fail(function (error) {
        log.error(error);
    });
} 
```

并且`.getChildren()`可能被称为如下：

```
myObj.getChildren(myID).done(function(result) {
    //here do something specific with `result`
}); 
```

`.then()`注意：这里似乎不需要额外的力量，但如果您想承诺交付除`result`.

# salt-stack - 有没有办法只显示更改和错误

> ID：15953082
> 
> 赞同：50
> 
> 时间：2013-04-11T15:39:22.860
> 
> 标签：salt-stack

我有相当广泛的盐配置，我希望能够看到发生了什么变化。如果我只是运行，`salt '*' state.highstate`我会得到整个列表，其中包含存在且未更改的内容 - 例如 3 到 4 个日志屏幕。但我真的很想只看到在上一份工作中发生变化的事情。

它不必为盐调用工作，它也可以使用`salt-run jobs.lookup_jid`.

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-11T23:32:08.577

我们还添加`state_output: mixed`了它将为您提供与 相同的输出`terse`，除非出现故障，在这种情况下，它将为您提供更详细的输出。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-13T03:10:59.010

您可以设置`state_verbose: False`为`/etc/salt/master`或`/etc/salt/minion`。如果要将输出缩短为每个状态一行，请设置`state_output: terse`.

您还可以在命令行上传递这些过滤器：

```
salt --state-output=terse '*' state.highstate 
```

如果您只想查看更改，可以使用`state-output=changes`或`state-output=mixed`。后一个将显示有关失败的更多信息。

有关更多详细信息，请参阅以下答案：[basepi](https://stackoverflow.com/a/17055524/1986344)，[psarossy](https://stackoverflow.com/a/28298811/1986344)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-02-03T12:20:59.900

To actually answer the question, yes, there is an output filter for changes only:

```
salt '*' state.highstate --state-output=changes 
```

This will display one liners for things that are in the right state and the proper output for the changes. ie:

```
 <...>
  Name: /etc/sudoers - Function: file.managed - Result: Clean
  Name: /etc/timezone - Function: file.managed - Result: Clean
  Name: /etc/pki/tls/certs/logstash-forwarder.crt - Function: file.managed - Result: Clean
  Name: /etc/init.d/logstash-forwarder - Function: file.managed - Result: Clean
----------
          ID: /etc/logstash-forwarder
    Function: file.managed
      Result: True
     Comment: File /etc/logstash-forwarder updated
     Started: 14:14:28.580950
    Duration: 65.664 ms
     Changes:
              ----------
              diff:
                  ---
                  +++
                  @@ -1,6 +1,6 @@
                   {
                     "network": {
                  -    "servers": [ "10.0.0.104:5000" ],
                  +    "servers": [ "10.0.0.72:5000" ],
                       "timeout": 15,
                       "ssl ca": "/etc/pki/tls/certs/logstash-forwarder.crt"
                     },

  Name: deb http://packages.elasticsearch.org/logstashforwarder/debian stable main - Function: pkgrepo.managed - Result: Clean
  Name: logstash-forwarder - Function: pkg.installed - Result: Clean
  <...> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-04-25T22:32:38.327

There are 2 options, first is to change the state_output in master's configuration file, like mentioned in the accepted answer, and it also possible to override the state output in command line, like:

```
salt --state-output=mixed \* test.version 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-11-18T18:09:09.917

从以下合并到 Salt 2015.8.0 ( [https://github.com/saltstack/salt/pull/26962](https://github.com/saltstack/salt/pull/26962) ) 的 PR 开始，现在可以`state_verbose`在运行 highstate 时从命令行切换标志。这会覆盖您可以`/etc/salt/master`在之前的答案中提到的配置。

以下命令现在应该只显示来自 highstate 运行的更改和错误`salt '*' state.highstate --state-verbose=False`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-14T06:44:17.147

您可以使用以下内容将输出缩短为一行，然后过滤该输出以仅显示更改：

salt -v 'minion' state.highstate test=True --state-output=terse --state-verbose=False

# visual-studio - AnkhSVN 将主干合并到分支

> ID：15953085
> 
> 赞同：1
> 
> 时间：2013-04-11T15:39:33.640
> 
> 标签：visual-studio, svn, version-control, ankhsvn

我正在尝试将更改从主干合并到分支中。以前，当我尝试过这个时，一切都运行良好，但是在这种情况下，合并向导在“没有未提交的更改”旁边有一个叉号，不会让我继续。我已经做了我能想到的一切来解决这个问题，但是由于我的“待更改”窗口中没有任何条目，我不知道可能是什么问题！

任何有关下一步尝试的帮助或指导将不胜感激！我正在使用带有最新稳定 2.4 AnkhSVN 版本的 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:38:40.087

TL:DR - 下载 TortoiseSVN 并使用它和 VisualSVN 服务器控制台查看到底发生了什么。

单独使用 AnkhSVN 是不可能解决的。我下载了 TortoiseSVN 并检查了解决方案 - 结果发现我与已重命名的文件夹之一存在树冲突 - 登录到 VisualSVN 管理服务器并直接删除“旧”（原始命名）文件夹并提取更新。

我发现的下一个问题是“obj”文件夹不知何故混入其中，这导致了问题，因为 Visual Studio 喜欢在此处更新文件，因此总是有文件要提交。使用 TortoiseSVN 对所有 obj 文件夹“取消版本并添加到忽略列表”（在解决方案中大约有五个项目发生了这种情况！）并提交。

完成这些步骤后，我可以使用 AnkhSVN 在 Visual Studio 中进行更新，然后使用 AnkhSVN 合并向导将更改从 Trunk 拉到 Branch。

# html - CSS 防止滚动

> ID：15953086
> 
> 赞同：1
> 
> 时间：2013-04-11T15:39:35.343
> 
> 标签：html, css, scroll

我正在为一个朋友做一个项目，其中包括为他的房地产公司制作一个网站。页面全部完成，上面有内容.. 有足够的内容我必须向下滚动才能阅读整个页面。

当我将外部 CSS 样式表的链接添加到页眉时，页面得到了我想要的外观，但由于某种原因，滚动条消失了（Chrome 和 Safari，Mac 10.8），我无法向下滚动阅读底部的内容。删除指向 CSS 的链接会恢复滚动条，但显然页面会丢失所有样式。

我附上了样式表的副本，如果有人看到可能导致这种情况的东西，我们将不胜感激。

```
#wrapper {
    width: 1024px;
    margin: 0 auto; 
}

body {
    background: #E4BD82 url("../img/bg.gif") repeat;
    font: normal 12px/150% "Verdana", "Arial", "Helvetica", sans-serif;
        color: #4b2b16;
}

body .text
{
    font: normal 12px/150% "Verdana", "Arial", "Helvetica", sans-serif;
}

#header {
    margin-left:auto;
    margin-right:auto;
    top: 0px;
    width: 1024px;
    height: 150px;
    position:relative;
    background: url("../img/header.gif") bottom left no-repeat;
}

#menu {
    height: 42px;
    list-style: none;
    position: absolute;
    bottom: 5px;
    left: 90px; 
}

#menu li {
    float: left;
    height: 42px;
    line-height: 42px; 
    padding: 13px 20px;
    color: #D89915;
    font: bold 12px "Verdana", "Arial", "Helvetica", sans-serif;
    text-decoration: none; 
}

#menu li a {
    padding: 13px 20px;
    color: #D89915;
    font: bold 12px "Verdana", "Arial", "Helvetica", sans-serif;
    text-decoration: none; 
}

#menu li a:hover {
    background-color: #4D3406;
    color: #EAF6AD; 
}   

#sidebar {
    position:fixed;
    top: 151px; height: 100%; width: 290px;
    background: url("../img/sidebar.gif") top left repeat-y;
}

#main {
    width: 734px;
    margin-left: 300px;
    min-height: 1000px;
        position: fixed;
}

div, img, form, fieldset, ul, li, h1, h2, h3, h6, p {
    margin: 0;
    padding: 5;
    border: 0; 
}

a.photo:link {
    font: normal 8px/100% "Verdana", "Arial", "Helvetica", sans-serif;
    text-decoration: none;
    color: #4b2b16;
}

a.photo:visited {
    font: normal 8px/100% "Verdana", "Arial", "Helvetica", sans-serif;
    text-decoration: none;
    color: #4b2b16;
}

a.photo:hover {
    font: normal 8px/100% "Verdana", "Arial", "Helvetica", sans-serif;
    text-decoration: underline;
    color: #4b2b16;
}

a.photo:active {
    font: normal 8px/100% "Verdana", "Arial", "Helvetica", sans-serif;
    text-decoration: none;
    color: #4b2b16;
}

.copyright {
    font: normal 8px/100% "Verdana", "Arial", "Helvetica", sans-serif;
    text-decoration: none;
    text-align: center;
}   

img.display {
    margin-left: 150px;
    padding: 1px;
    border: 5px outset;
    border-color: #EE7621;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:42:24.070

没有看到 HTML，我的第一个想法是一些`overflow: hidden`，但后来我注意到了这一点：

```
#main {
    width: 734px;
    margin-left: 300px;
    min-height: 1000px;
        position: fixed;
} 
```

这`position: fixed`可能是这里的问题。去掉它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T15:42:11.630

尝试`position:fixed;`从中删除`#main`：

```
#main {
  width: 734px;
  margin-left: 300px;
  min-height: 1000px;
  //position: fixed;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T16:03:46.060

您需要更改`#main`您正在使用的位置的属性，将其`position:fixed`更改为`position:scroll`。也不要重复 CSS 属性，而是这样做：

```
#wrapper {
        width: 1024px;
        margin: 0 auto; 
    }

    body {
        background: #E4BD82 url("../img/bg.gif") repeat;
        font: normal 12px/150% "Verdana", "Arial", "Helvetica", sans-serif;
        color: #4b2b16;
    }

    #header {
        margin:0 auto;
        top: 0px;
        width: 1024px;
        height: 150px;
        position:relative;
        background: url("../img/header.gif") bottom left no-repeat;
    }

    #menu ul {
        height: 42px;
        list-style: none;
        bottom: 5px;
        left: 90px; 
    }

    #menu ul li {
        float: left;
        height: 42px;
        line-height: 42px; 
        padding: 13px 20px;
        font-weight: bold;
    }

    #menu ul li a {
        color: #D89915;
        display: block;
        text-decoration: none; 
    }

    #menu ul li a:hover {
        background-color: #4D3406;
        color: #EAF6AD; 
    }   

    #sidebar {
        position:fixed;
        top: 151px; height: 100%; width: 290px;
        background: url("../img/sidebar.gif") top left repeat-y;
    }

    #main {
        max-width: 734px;
        margin-left: 300px;
        position: scroll;
    }

    div, img, form, fieldset, ul, li, h1, h2, h3, h6, p {
        margin: 0;
        padding: 5;
        border: 0; 
    }
    a.photo, a.photo:visited{
            font: normal 8px/100% "Verdana", "Arial", "Helvetica", sans-serif;
        text-decoration: none;
        color: #4b2b16;
    }

    a.photo:hover {
        text-decoration: underline;
    }

    .copyright {
        text-align: center;
    }   

    img.display {
        margin-left: 150px;
        padding: 1px;
        border: 5px outset;
        border-color: #EE7621;
    } 
```

# ruby-on-rails - 需要帮助理解为什么方法的单元测试不起作用

> ID：15953087
> 
> 赞同：0
> 
> 时间：2013-04-11T15:39:39.427
> 
> 标签：ruby-on-rails, unit-testing

我正在努力在我的单元测试中涵盖我模型的所有方法、关联和验证，到目前为止一切都很好。我订阅了 TreeHouse 并观看了[Ruby Foundations -](http://teamtreehouse.com/library/programming/ruby-foundations/testing)虔诚地测试。

我昨晚在为我的 Provider.rb 模型测试方法时偶然发现了这个错误：

```
class Provider < ActiveRecord::Base

  attr_accessible :description, :name
  validates :name, :presence => true
  validates :description, :presence => true
  validates :name, :length => { :minimum => 6, :maximum => 100 }
  validates :description, :length => { :minimum => 6, :maximum => 100 }
  has_many :courses
  resourcify

  def unique_locations
    Location.joins(sessions: :course).where(courses: { provider_id: self.id }).uniq.pluck('locations.name')
  end

end 
```

我对 unique_locations 方法的单元测试如下：

```
 test 'should return a list of unique locations' do
    provider = FactoryGirl.build(:provider)
    assert_equal provider.unique_locations, ["location_1", "location_2"]
  end 
```

运行测试后出现以下错误：

```
<[]> expected but was
<["location_1", "location_2"]>. 
```

我的工厂很简单：

```
FactoryGirl.define do
  factory :course do
    name 'Snowboard 101'
    description 'Snowboard course'
    association :provider, factory: :provider
  end
end

FactoryGirl.define do
  factory :provider do
    name 'The School of Hard Knocks'
    description 'School description'
  end
end

FactoryGirl.define do
  factory :session_snowboard, class: Session do
    name 'Winter Session'
    description 'Snowboarding 101'
    price 200
    class_size 4
    association :course, factory: :course
    association :location, factory: :location_1
  end

  factory :session_ski, class: Session do
    name 'skiing 101'
    description 'Start in november'
    price 100
    class_size 4
    association :course, factory: :course
    association :location, factory: :location_2
  end

end

FactoryGirl.define do
  factory :location_1 do
    name 'location_1'
  end

  factory :location_2 do
    name 'location_2'
  end

end 
```

我的 unique_locations 方法在我不同的环境中运行良好。我只是不明白为什么它没有返回测试中的唯一位置列表。

任何想法？

谢谢，弗朗西斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:29:42.413

您正在调用`FactoryGirl.build(:provider)`它只构建而不保存到数据库，所以 unique_locations 显然没有 id 可以通过。使用`create`它应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:32:02.227

因此，在对 Factory_Girl 进行了很多探索之后，我找到了解决方案：

这是我的工厂：

```
FactoryGirl.define do
  factory :provider do
    name 'McGill University'
    description 'McGill is one of the best universities in the world.'
    after(:create) {|provider| create_list(:course, 2, provider: provider) }
  end
end

FactoryGirl.define do
  factory :course do
    name 'Snowboard 101'
    description 'Snowboard course'
    provider
    after(:create) {|course| create_list(:session, 2, course: course) }
  end
end

FactoryGirl.define do
  factory :session do
    name 'Winter Session'
    description 'Snowboarding 101'
    price 150
    class_size 4
    course
    location
  end
end

FactoryGirl.define do
  factory :location do |l|
    l.sequence(:name) { |n| "location_#{n}"}
  end
end 
```

我还更新了我的测试：

```
 test 'should return a list of unique locations' do
    provider = create(:provider)
    assert_equal provider.unique_locations, %w[location_1 location_2 location_3 location_4]
  end 
```

这成功地创建了 4 个不同的位置。

# macos - 在 Mac OS 10.8（64 位）上编译 SQLCipher

> ID：15953088
> 
> 赞同：2
> 
> 时间：2013-04-11T15:39:40.343
> 
> 标签：macos, static-libraries, 32bit-64bit, sqlcipher

当我在 MacOS 64 位上编译 SQLCIPHER

```
./configure --enable-tempstore=yes CFLAGS="-DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2" LDFLAGS="/Users/administrator/Documents/openssl/lib/libcrypto.a" 
```

我得到 32bit lib libsqlite3.a 但我需要一个 64bit libsqlite3.a

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-25T18:02:01.210

新版本的 SQLCIPHER 不再需要 OpenSSL。

您首先需要配置构建，这些是 CommonCrypto 的建议设置，而不是 SSL 作为加密提供者。

```
./configure --enable-load-extension --enable-tempstore=yes \
--with-crypto-lib=commoncrypto \
CFLAGS="-DSQLITE_HAS_CODEC -DSQLITE_ENABLE_FTS3" \ LDFLAGS="/System/Library/Frameworks/Security.framework/Versions/Current/Security" 
```

然后你需要做到：

```
make 
```

您将获得一个 64 位静态链接 SQLLite 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:40:01.707

您是否已验证您正在链接 64 位版本，`libcrypto.a`因为您似乎正在自己构建 OpenSSL？`./Configure darwin64-x86_64-cc`如果您从 x86_64 的源代码构建 OpenSSL，您将需要运行。在系统上找到的 OpenSSL 版本应该包含架构的 i386 和 x86_64 版本，因此您不需要重新构建 OpenSSL。你能`file .libs/sqlite`在编译后运行并显示输出吗？

# php - Facebook应用程序的多个集成源；“需要用户会话”异常

> ID：15953089
> 
> 赞同：0
> 
> 时间：2013-04-11T15:39:40.987
> 
> 标签：php, iphone, facebook, api, facebook-php-sdk

我正在使用 API 后端在 iPhone 上编写一个测试应用程序。应用程序使用 Facebook SDK。我请求权限，正确接收它们。然后我从 iPhone 应用程序请求我的 API 后端使用 FQL 查询 Facebook 以查找使用与我相同的应用程序的用户。

我的 API 使用 Facebook PHP SDK 连接到 Facebook，但无法接收任何数据，因为它正在捕获异常：`"Requires user session"`.

我使用单个 Facebook 应用程序并选中“Native iOS App”和“Website with Facebook Login”。（“使用 Facebook 登录的网站”的站点 URL 填充了我的 API URL）。

你能告诉我这里有什么问题吗？

下图（（3）处的错误）： ![图表](https://i.stack.imgur.com/o4C0r.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T14:23:43.320

我收到了`"Requires user session"`，因为我没有将用户的 access_token 传递给 API 调用。

要解决这个问题，您显然必须添加从 Facebook 收到的 access_token。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:41:36.430

尝试添加以下行：

```
$facebook = new Facebook($api_key, $secret); $facebook = $facebook->require_login();
$facebook = $facebook->require_frame(); 
```

**参考：**

[执行 Facebook 查询时出现问题](https://stackoverflow.com/questions/3081206/problem-while-executing-facebook-query)

[在 facebook 中使用 FQL 时需要用户会话错误](https://stackoverflow.com/questions/4174938/requires-user-session-error-while-using-fql-in-facebook)

# hibernate - 使用 memcached 进行休眠 L2 缓存

> ID：15953090
> 
> 赞同：1
> 
> 时间：2013-04-11T15:39:51.690
> 
> 标签：hibernate, memcached

我正在尝试将 memcached 用于 Hibernate Level 2 缓存，但还不能让它工作。当我启动 tomcat 并启动我的应用程序时，我遇到了以下异常（java.lang.NoClassDefFoundError: org/hibernate/cache/TimestampsRegion）：

```
 javax.servlet.ServletException: Servlet execution threw an exception
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:313)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:119)
at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:55)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.xxx.webapp.filter.MemberFilter.doFilter(MemberFilter.java:70)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.xxx.webapp.filter.AuthFilter.doFilter(AuthFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.xxx.webapp.filter.LanguageHandlingFilter.doFilter(LanguageHandlingFilter.java:129)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.xxx.webapp.filter.SsoFilter.doFilter(SsoFilter.java:72)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.xxx.webapp.filter.SessionStatusFilter.doFilter(SessionStatusFilter.java:41)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.xxx.webapp.filter.BlackListFilter.doFilter(BlackListFilter.java:36)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.xxx.webapp.filter.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:143)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/cache/TimestampsRegion
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:138)
at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:393)
at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:264)
at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2283)
at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2279)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1748)
at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
atorg.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47) 
```

我使用 JPA 和 hibernate 4.1.7 作为提供者。我用于休眠 L2 缓存的 persistence.xml 属性如下所示：

```
<property name="hibernate.cache.provider_class" value="com.googlecode.hibernate.memcached.MemcachedCacheProvider" />
        <property name="hibernate.cache.use_second_level_cache" value="true" />
        <property name="hibernate.cache.region.factory_class" value="com.googlecode.hibernate.memcached.MemcachedRegionFactory"/>
        <property name="hibernate.cache.use_query_cache" value="true" /> 
         <property name="hibernate.Memcached.servers" value="localhost:11211"/>
         <property name="hibernate.Memcached.cacheTimeSeconds" value="300"/> 
```

我正在使用以下与 hibernate 和 memcached 相关的 jar 文件版本：

memcached-2.3.1.jar hibernate-memcached-1.6.jar（从com.googlecode.hibernate.memcached项目的源代码编译） slf4j-1.5.0.jar slf4j-log4j12-1.5.0.jar

我还没有解决这个问题。非常感谢你们的任何帮助。

阿伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-22T12:26:30.053

我知道这已经三年了，但这仍然非常重要。您可以在 Hibernate 4 和 5 中使用 memcached（或任何 memcache 克隆，如 elasticache）。我们自己使用 4。

您可以通过此 gradle 依赖项获取正确的 jar：

`compile 'com.github.mihaicostin:hibernate-l2-memcached:1.1.0'`

或 Maven： `<groupId>com.github.mihaicostin</groupId> <artifactId>hibernate-l2-memcached</artifactId> <version>1.1.0</version>`

它是最新的并且运行良好。在 github 上开源。 [https://github.com/mihaicostin/hibernate-l2-memcached](https://github.com/mihaicostin/hibernate-l2-memcached)

例如，我们在 Bjond 的 persistence.xml 中的一个片段。请注意，您需要该区域工厂：

```
 <property name="hibernate.dialect" value="com.bjond.persistence.converter.JsonPostgreSQLDialect"/>
    <property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform" />
    <property name="hibernate.temp.use_jdbc_metadata_defaults" value="false"/>

     <property name="hibernate.cache.use_second_level_cache" value="true" />
     <property name="hibernate.cache.use_query_cache" value="true" />    
     <property name="hibernate.memcached.REGION.cacheTimeSeconds" value="30"/>
     <property name="hibernate.cache.region.factory_class" value="com.mc.hibernate.memcached.MemcachedRegionFactory"/>
     <property name="hibernate.memcached.operationTimeout" value="5000"/>
     <property name="hibernate.memcached.connectionFactory" value="KetamaConnectionFactory"/>
     <property name="hibernate.memcached.hashAlgorithm" value="HashAlgorithm.FNV1_64_HASH"/>
     <property name="hibernate.memcached.servers" value="localhost:11211"/>
     <property name="hibernate.memcached.cacheTimeSeconds" value="300"/>
     <property name="hibernate.memcached.clearSupported" value="false"/>
     <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup"/>
     <property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.CMTTransactionFactory"/> 
     <property name="hibernate.generate_statistics" value="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:48:09.753

听起来您正在使用 Hibernate 4。要使用 hibernate-memcached，您应该拥有 HB3。在此处查看 hibernate-memcached 配置：[https ://code.google.com/p/hibernate-memcached/wiki/Configuration](https://code.google.com/p/hibernate-memcached/wiki/Configuration)

# git - 如何管理只能通过电子邮件同步的存储库

> ID：15953096
> 
> 赞同：1
> 
> 时间：2013-04-11T15:40:13.060
> 
> 标签：git, github

我有一种情况，我们在内网上运行一个 git-hub 服务器。我的公司工作站可以从这台服务器上签出一个 repo 没有问题。但是我必须在不能在公司网络上的个人笔记本电脑上开发。

目前，我一直在忽略 git repo，只是通过电子邮件给自己发送了压缩后的项目。在电子邮件大小限制下分成两半以挤压。在我的笔记本电脑上进行更改，然后通过 ZIP 再次通过电子邮件将更改发回给自己。

必须有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:43:13.633

这正是`git format-patch`目的。`master`例如，如果您开始开发，您可以`git format-patch origin/master`在`master`签出时创建一个补丁。这将在您运行命令的目录中创建一系列补丁文件。

您可以将补丁通过电子邮件发送给自己（如果需要，可以压缩它们），或将它们放在存储设备上。用于`git apply`将这些补丁文件应用于连接到公司网络的计算机上的克隆。这将重新创建您在笔记本电脑上所做的提交，然后您可以像往常一样推送它们。

# java - java高效连接多个列表

> ID：15953101
> 
> 赞同：2
> 
> 时间：2013-04-11T15:40:26.280
> 
> 标签：java, list, union

我经常发现自己编写的代码可以从多个子列表中构建一个列表。作为一个简单的示例，假设您有一个需要验证为列表的列表。写这个（必须）的一种方法是：

```
import static com.google.common.collect.Lists.newArrayList;

import java.util.List;

public class Product {

    private String name;
    private int height;

    public static List<String> validateList(List<Product> products) {
        List<String> result = newArrayList();
        valideListSize(products, result);
        for (Product product : products) {
            product.validate(result);
        }
        return result;
    }

    private static void valideListSize(List<Product> products,
            List<String> result) {
        if (products.size() > 1000) {
            result.add("List too large");
        }
    }

    private void validate(List<String> result) {
        if (name.length() > 30) {
            result.add("Name contains too many characters");
        }
        if (height > 40) {
            result.add("Product too high");
        }
    }

} 
```

但是，为了简单/维护/重用，我不喜欢将验证单个产品的逻辑与将验证结果列表添加到另一个现有列表中。我还认为改变参数会导致更难调试代码。所以我更喜欢功能性更强的风格。目前我通常会这样写（使用来自 Google Guava 的 newArrayList）：

```
import static com.google.common.collect.Lists.newArrayList;
import static java.util.Collections.emptyList;
import static java.util.Collections.singletonList;

import java.util.List;

public class Product {

    private String name;
    private int height;

    public static List<String> validateList(List<Product> products) {
        List<String> result = newArrayList();
        result.addAll(valideListSize(products));
        for (Product product : products) {
            result.addAll(product.validate());
        }
        return result;
    }

    private static List<String> valideListSize(List<Product> products) {
        if (products.size() > 1000) {
            return singletonList("List too large");
        }
        return emptyList();
    }

    private List<String> validate() {
        List<String> result = newArrayList();
        if (name.length() > 30) {
            result.add("Name contains too many characters");
        }
        if (height > 40) {
            result.add("Product too high");
        }
        return result;
    }

} 
```

这会创建许多寿命很短的小型数组列表，其中许多通常是空的（没有验证错误）。这种代码在实践中会效率低下还是在生产环境中使用这种风格可以吗？有没有更有效的方法（可能使用 Guava）来做我想做的事，同时仍然保持代码干净、易于阅读并符合 Java 最佳实践？

作为一名专业的 Java 开发人员，您会做什么？

编辑：请参阅我对第一条评论的回答，为什么我更喜欢第二种方式。我更喜欢代码的可维护性/可读性而不是过早的优化，但是因为我在日常编程中经常看到这种模式，所以我想知道是否有一种至少同样干净的简单方法。使用某种连接列表视图怎么样，例如 Iterables.concat？或者这是否也创建了许多中间类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:34:49.020

回答我自己的问题：即使在单产品验证方法中创建许多新列表时，Java 在性能方面也做得很好。我定时验证 300000 个产品列表 10 次（预热后）。

传递一个 Arraylist 的第一个实现需要 275 毫秒。使用 LinkedList 需要 300 毫秒。可能创建中间 ArrayList 的第二个实现需要 760 毫秒。使用 LinkedList 需要 580 毫秒。使用 Guava 的 ImmutableList 构建器需要 1150 毫秒。

所以我想我会继续使用我的第二种方法（也许对不需要随机访问的小列表使用 LinkedList）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:47:13.323

您可以使用不[相交集数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)（也称为联合查找数据结构）有效地完成此操作。有几种在线可用的实现，例如[这里](http://www.java2s.com/Code/Java/Collections-Data-Structure/Implementationofdisjointsetdatastructure.htm)。

# javascript - 动态主干模板变量

> ID：15953105
> 
> 赞同：0
> 
> 时间：2013-04-11T15:40:35.523
> 
> 标签：javascript, backbone.js, underscore.js

```
// Template Helper
window.template = function (id) {
return _.template($('#' + id).html());
};

// Template Helper in view.render
this.$el.html( this.template(this.model.toJSON()) );

// This Template Call in View
template: template('response-form')

// This My If Else Construction in View Initialize
if (this.model.attributes.status === true) {
  here i want set template id to response-auth
} else {
  here i want set template id to response-form
} 
```

我不知道，如何动态更改模板调用的值？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:57:10.163

您可以随时`this.template`在视图内进行更改。因此，您可以检查视图中的状态`initialize`：

```
initialize: function() {
    if(this.model.get('status'))
        this.template = template('response-auth');
    else
        this.template = template('response-form');
} 
```

或者你可以在里面做出决定`render`：

```
render: function() {
    var tmpl = null;
    if(this.model.get('status'))
        tmpl = template('response-auth');
    else
        tmpl = template('response-form');

    // your current rendering code goes here but uses
    // tmpl instead of this.template
} 
```

您采用哪种方法取决于您是否期望状态发生变化。

当然，您可以在构建视图时同时编译两者：

```
template_auth: template('response-auth'),
template_form: template('response-form'),
initialize: function() {
    // Set this.template to this.template_auth or this.template_form...
},
render: function() {
    // Or pick this.template_auth or this.template_form in here if
    // that makes sense...
} 
```

如果您希望同时使用这两个模板，那么编译它们都是有意义的，否则我会在需要做出决定之前（可能在 中`render`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T08:34:54.483

@mu 太短：我们不能通过任何方式在内部传递动态数据

> 模板（'响应验证'）；

假设我有超过 50 个模板，那么我不能放 if else 语句。

```
$(`#channel-view-${targetPlatformId}`).html(_.template(templates.manage_store_form_template_Ebay)({

$(`#channel-view-${targetPlatformId}`).html(_.template(templates.manage_store_form_template_shopify)({ 
```

上面一行有一个区别，就是通道名称，有什么方法可以在**_.template()中传递动态数据**

# asp.net - ASP 中的 Twitter 引导按钮显示

> ID：15953106
> 
> 赞同：0
> 
> 时间：2013-04-11T15:40:36.127
> 
> 标签：asp.net, css, twitter-bootstrap

我注意到 Twitter Bootstrap 内的 ASP 页面中的按钮存在问题。似乎唯一正确显示的类是“btn”类。如果我想使用“btn btn-primary”，我的蓝色按钮上会出现一个灰色渐变。当我将鼠标悬停在按钮上时，它的一半变为蓝色。我已经尝试过使用其他按钮样式，并且得到了相同的结果。

我希望下面的代码是正确的：

```
<asp:button type="button" id="btnSearch" runat="server" CssClass="btn btn-primary" Text="Search"></asp:button> 
```

完整的 HTML

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="header.aspx.vb" Inherits="Backend.header" %>

<!DOCTYPE html>

<html>
<head runat="server">
<title></title>

<link rel="stylesheet" href="css/bootstrap.css" />
<link rel="stylesheet" href="css/bootstrap-responsive.css" />
<link rel="stylesheet" href="css/custom.css" />

</head>
<body>
<form id="masterSearch" runat="server">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
          <div class="container">
              <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </a>

              <a class="brand" href="#">Company Name</a>

              <div class="nav-collapse collapse">
                  <ul class="nav">
                      <li><a href="cart.aspx">
                          <asp:Label ID="Label1" runat="server" Text="Cart"> </asp:Label></a></li>
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">History <b class="caret"></b></a>
                          <ul class="dropdown-menu">
                              <li><a href="#">New Order</a></li>
                              <li><a href="#">Order History</a></li>
                          </ul>
                      </li>
                      <li><a href="#">Invoices</a></li>
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Returns <b class="caret"></b></a>
                          <ul class="dropdown-menu">
                              <li><a href="#">Return Previous Order</a></li>
                              <li><a href="#">Return Policy</a></li>
                          </ul>
                      </li>
                      <li><a href="#">Rewards Balance</a></li>
                      <li><a href="#">Help</a></li>
                      <li><a href="#">Log Out</a></li>
                  </ul>
              </div>
          </div>
      </div>
    </div>

    <div id="wrap">
            <div class="row-fluid">

         <div class="container">

             <div class="span12">
                 <asp:Label ID="Label1" class="pull-right" runat="server" Text="Label"></asp:Label>
              </div>

       </div> <!--/container-->
   </div> <!--/row-->

    <hr />

    <div class="container">
        <div class="row-fluid">
            <div class="span2">Left Column</div><!--/left sidebar-->

            <div class="span8">
                <h5 class="pagination-centered">Search By...</h5>
                <div class="span12">

                        <input type="text" id="txtSearch1" placeholder="NDC#, Item#, Item Name..." runat="server" />
                        <asp:button type="button" id="btnSearch" runat="server" CssClass="btn btn-primary" Text="Search"></asp:button>       

                </div> <!--/search-->

                <div class="searchResults">
                    <table ID="tblSearchResults" class="table table-bordered">
                        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
                             <Columns>

                                       <asp:BoundField HeaderText="Generic" DataField="ItemDesc" />
                                       <asp:BoundField HeaderText="Brand" DataField="BrandName" />
                                        <asp:BoundField HeaderText="Item Number" DataField="ItemNumber" />
                                        <asp:BoundField HeaderText="NDC" DataField="NDC" />
                                       <asp:BoundField HeaderText="Class" DataField="ControlLevel" />
                                        <asp:BoundField HeaderText="Price" DataField="Price" />
                                        <asp:TemplateField HeaderText="Qty">

                    <ItemTemplate>
                        <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
                    </ItemTemplate>
                </asp:TemplateField>
                             </Columns>
        </asp:GridView> 

                </table>

                </div>

            </div><!--/main content -->

            <div class="span2">Right Column</div><!--/right sidebar-->
        </div><!--/row-->

    </div> <!--/container -->

     <asp:button type="button" id="btnAdd" class=" btn btn-danger" runat="server" Text="Add to Cart"></asp:button> 
&nbsp;&nbsp;
    <asp:Button ID="btnCheckOut" runat="server" Text="Check Out" />

    </form>
   </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T01:44:54.923

我不一定记得 100%，但在考虑了更多之后，我想我遇到了和你一样的事情。在查看我的一些旧代码时，我通过使用链接按钮而不是按钮控件来解决这个问题。

```
<asp:LinkButton CssClass="btn btn-small" runat="server" ID="m_ReportButton" OnClick="OnReportClick" Text="Report" />
<asp:LinkButton CssClass="btn btn-small" runat="server" ID="m_DeleteButton" OnClick="OnDeleteClick" Text="Delete" />
<asp:LinkButton CssClass="btn btn-small" runat="server" ID="m_EditButton" OnClick="OnEditClick" Text="Edit" />
<asp:LinkButton CssClass="btn btn-small" runat="server" ID="m_QuoteButton" OnClick="OnQuoteClick" Text="Quote" />
<asp:LinkButton CssClass="btn btn-small" runat="server" ID="m_ReplyButton" OnClick="OnReplyClick" Text="Reply" /> 
```

回想起来，我几乎可以肯定我做出这个改变只是为了应用更多的东西，而不仅仅是 btn 引导类。

# ios - sqlite3_prepare_v2 在 iPhone 和 iPad mini 设备上返回 OK，但在普通 iPad 设备上返回错误

> ID：15953107
> 
> 赞同：1
> 
> 时间：2013-04-11T15:40:41.123
> 
> 标签：ios, sqlite

我在这段代码中遇到了一个问题：它在 iPhone 和 iPad Mini 上工作正常，但它在大 iPad 上给出了错误消息。有什么理由吗？

代码：

```
- (sqlite3_stmt *)executeQuery:(char *)aQuery {
    NSString *dbPath = [[NSUserDefaults standardUserDefaults] objectForKey:kDBPath];
    sqlite3_stmt *statement = NULL;
    sqlite3 *database;
    if (sqlite3_open((char *)[dbPath UTF8String], &database) == SQLITE_OK) {
        if (sqlite3_prepare_v2(database, aQuery, -1, &statement, NULL) != SQLITE_OK) {
            //Here is the point: on iPad Mini and iPhone it works fine, but on the normal iPad it can't execute this query
            NSLog(@"Error on SQL - (sqlite3_stmt *)executeWithReturn:(char *)aQuery");
            statement = NULL;
        }
    } else {
        NSLog(@"Error on Open database");
    }
    return statement;
} 
```

从 LLDB 打印：

```
(lldb) print (BOOL)[[NSFileManager defaultManager] isWritableFileAtPath:dbPath]
(BOOL) $0 = YES
(lldb) print (char *)aQuery
(char *) $1 = 0x1f0a1000 "select CodAplicacao, CodLocalidade, Nome, Desc, DataCriacao, Editando from Aplicacao_en" 
```

有任何想法吗？

问候！

**编辑：**

它收到错误“数据库磁盘映像格式错误”。我在互联网上找不到如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:50:48.880

在您修改后的问题中，您通知我们`sqlite3_errmsg`报告“数据库磁盘映像格式错误”。这表明您的数据库已损坏。如果您的应用在之前某个日期执行某些数据库操作时崩溃，则可能会发生这种情况。

您可以通过运行以下 SQL 来确认这一点：

```
PRAGMA integrity_check; 
```

如果您想完成该过程，您可以将数据库从您的设备复制回您的 Mac（使用 Xcode 的 Organizer 并转到“设备”部分），然后使用您选择的 Mac SQLite 数据库工具（最坏的情况是命令行`sqlite3`程序），然后运行上一个`PRAGMA`命令。您甚至可以以编程方式执行此操作（它返回一个结果集，如`SELECT`语句）。

问题是，我们相当有信心它会报告问题。最简单的解决方法是重建数据库（例如，删除数据库，如果您最初从包中复制了它，请再次执行此操作，如果您以编程方式创建它，请重复该过程）。

如果您决定尝试从数据库中恢复用户数据，您可以考虑按照[Sergei Dorogin 的技术博客中概述的过程 - SQLiteException "database disk image is malformed"](http://techblog.dorogin.com/2011/05/sqliteexception-database-disk-image-is.html)。他为不同的平台写了这个，但基本过程可能适用于这里。问题是，除非您绝对需要恢复用户数据，否则该过程可能是不必要的。

因此，简而言之，您在该设备上的数据库已损坏，您需要重建它。只需删除应用程序（如果您的数据库在`Documents`文件夹中，则需要删除应用程序以清空该文件夹）并重新安装应用程序，您应该会很好。

* * *

更改您的日志语句：

```
NSLog(@"Error on SQL - (sqlite3_stmt *)executeWithReturn:(char *)aQuery"); 
```

至

```
NSLog(@"Error on SQL - %s: %s", __FUNCTION__, sqlite3_errmsg(database)); 
```

这应该会给你一个信息丰富的错误消息，告诉你出了什么问题。

通常，这类问题是由特定设备上的数据库版本引起的。它极不可能与设备本身有关。

也许您的应用程序在某个时候创建​​了一个空白数据库，因此找不到该表。如果您使用 Xcode 的 Organizer，请转到“设备”部分，您可以将应用程序文件夹复制到您的 Mac，然后检查您 Mac 上的数据库，看看您是否确认该数据库与您预期的一样。

# c# - 使用 PHP 或 C# 的动态建筑布局

> ID：15953111
> 
> 赞同：0
> 
> 时间：2013-04-11T15:40:57.827
> 
> 标签：c#, php, image, mapping

我正在尝试为我们的办公室制定一个解决方案，以绘制隔间和办公室布局。我们目前有 php 和 C# 应用程序，因此可以在其中构建解决方案。我们在 PHP 中已经有了一些东西，它允许我们将人们从一个隔间移动到另一个隔间，但它基于静态图像大小和点坐标。例如，隔间一位于 (3px, 4px)。虽然此解决方案有效，但它不允许更改图像大小，或者根本无法更改图像而无需大量编码以重新对齐图像上的所有点。是否有更好的解决方案可以使用或有帮助的开源库？一位同事建议 Google Maps API 或 Leaflet.js 可能会有所帮助。但是，它们都使用地理编码，所以除非我们当前的纬度和经度准确到像一只脚，否则我不会

感谢您的任何建议。

**更新** 这里是一张类似于我们正在使用的图像。我们在图像上添加绝对定位的可点击 div 以显示谁坐在那里。

![在此处输入图像描述](https://i.stack.imgur.com/s6yBz.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:44:16.870

您的同事建议的不是 GMaps API 本身，而是旋转/地理同步平移/缩放算法的实现，这些算法允许您翻转图像以及与图像相关的所有点。

没有具体的代码实现，所以我不能更具体。

# java - 使用扫描仪类读取 .txt 时出错

> ID：15953112
> 
> 赞同：0
> 
> 时间：2013-04-11T15:41:01.163
> 
> 标签：java, exception, java.util.scanner

我正在开发一个程序来读取二进制文件并将其更新为 txt 文件，它正在工作，突然它开始抛出这个错误

```
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Scanner.java:907)
    at java.util.Scanner.next(Scanner.java:1416)
    at StockManage.updateInv(StockManage.java:134)
    at StockManage.main(StockManage.java:173) 
```

这是导致错误的代码

```
try
{
    Scanner trans = new Scanner(new File(file));
    RandomAccessFile inv = new RandomAccessFile (file2,"rws");
    String tempName = "Temp" + (int)(Math.random()*1000000) + ".dat";
    RandomAccessFile newInv = new RandomAccessFile (tempName , "rws");
    File newFile = new File(tempName);

    String transISBN = trans.next();
    String author = inv.readUTF();
    String title = inv.readUTF();
    String iSBN = inv.readUTF();
    int amount = inv.readInt();

    while (inv.getFilePointer()<=inv.length())
    {
        boolean empty = true;

        while (empty&&trans.hasNext())
        {

            if (iSBN.compareTo(transISBN)<0)
            {
                empty = false;
                break;
            }
            else if (iSBN.compareTo(transISBN)==0)
            {
                int change = trans.nextInt();
                amount += change;
                transISBN = trans.next();
            }
        }

        newInv.writeUTF(author);
        newInv.writeUTF(title);
        newInv.writeUTF(iSBN);
        newInv.writeInt(amount);

        author = inv.readUTF();
        title = inv.readUTF();
        iSBN = inv.readUTF();
        amount = inv.readInt();

    } 
```

我真的坚持这个，所以任何帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:43:32.050

在对 Scanner 对象调用 next() 之前，您应该调用 hasNext() 来检查是否实际上有更多数据要读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:49:53.950

此代码部分容易出错：

```
else if (iSBN.compareTo(transISBN)==0)
{
    int change = trans.nextInt();
    amount += change;
    transISBN = trans.next();
} 
```

你控制`trans.hasNext()`在 中`while loop`，但你没有在它的顶部`transISBN = trans.next();`放一个，我猜问题会得到解决。`if(trans.hasNext())`

# iphone - UIDatePicker 调度程序错误

> ID：15953120
> 
> 赞同：0
> 
> 时间：2013-04-11T15:41:16.257
> 
> 标签：iphone, ipad, xcode4.5, uidatepicker, appdelegate

我已按照本教程 [http://ios.biomsoft.com/2011/08/27/iphone-programming-tutorial-](http://ios.biomsoft.com/2011/08/27/iphone-programming-tutorial-) --local-notifications/ 我能够运行该应用程序，但是为了运行我拥有的应用程序在我的 appdelegate.m 中删除以下代码

![在此处输入图像描述](https://i.stack.imgur.com/CPF7s.png)

您可以在上图中看到错误。

为什么我会收到错误以及如何修复错误？

这是我的代码。

。H

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UITableViewDelegate,UITableViewDataSource> {
IBOutlet UITableView *tableview;
IBOutlet UIDatePicker *datePicker;
IBOutlet UITextField *eventText;
}

@property (nonatomic, retain) IBOutlet UITableView *tableview;
@property (nonatomic, retain) IBOutlet UIDatePicker *datePicker;
@property (nonatomic, retain) IBOutlet UITextField *eventText;

- (IBAction) scheduleAlarm:(id) sender;

@end 
```

.m

```
@implementation ViewController

@synthesize datePicker,tableview, eventText;

- (IBAction) scheduleAlarm:(id) sender {

[eventText resignFirstResponder];

NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

// Get the current date
NSDate *pickerDate = [self.datePicker date];

// Break the date up into components
NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit | 
NSMonthCalendarUnit |  NSDayCalendarUnit )

fromDate:pickerDate];
NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | 
NSMinuteCalendarUnit | NSSecondCalendarUnit )

fromDate:pickerDate];
// Set up the fire time
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
[dateComps setDay:[dateComponents day]];
[dateComps setMonth:[dateComponents month]];
[dateComps setYear:[dateComponents year]];
[dateComps setHour:[timeComponents hour]];
// Notification will fire in one minute
[dateComps setMinute:[timeComponents minute]];
[dateComps setSecond:[timeComponents second]];
NSDate *itemDate = [calendar dateFromComponents:dateComps];

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil)
    return;
localNotif.fireDate = itemDate;
localNotif.timeZone = [NSTimeZone defaultTimeZone];

// Notification details
localNotif.alertBody = [eventText text];
// Set the action button
localNotif.alertAction = @"View";

localNotif.soundName = UILocalNotificationDefaultSoundName;
localNotif.applicationIconBadgeNumber = 1;

// Specify custom data for the notification
NSDictionary *infoDict = [NSDictionary dictionaryWithObject:@"someValue"  
forKey:@"someKey"];
localNotif.userInfo = infoDict;

// Schedule the notification
[[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

[self.tableview reloadData];

}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
datePicker = nil;
tableview = nil;
eventText = nil;
}

- (void)viewDidLoad{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// We only have one section
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
// Return the number of notifications
return [[[UIApplication sharedApplication] scheduledLocalNotifications] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   
*)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle  
reuseIdentifier:CellIdentifier];
}

// Get list of local notifications
NSArray *notificationArray = [[UIApplication sharedApplication]    
scheduledLocalNotifications];
UILocalNotification *notif = [notificationArray objectAtIndex:indexPath.row];

// Display notification info
[cell.textLabel setText:notif.alertBody];
[cell.detailTextLabel setText:[notif.fireDate description]];

return cell;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:45:36.253

您必须创建`viewController`第一个实例：

```
ViewController *viewController = [[ViewController alloc] init];
// set the frame, do other stuff..
[_window addSubview:viewController.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:55:28.713

请先检查您的 AppDelegate 代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

   /******
       YOUR CODE HERE

   ******/

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:22:37.310

好的，所以在玩了一些之后。我能够让应用程序运行，而无需更改应用程序委托。

不知道为什么他在教程中声明要这样做。

谢谢你的帮助。

# css - 如何将我的图库更改为单击而不是悬停？

> ID：15953123
> 
> 赞同：1
> 
> 时间：2013-04-11T15:41:31.727
> 
> 标签：css

当谈到 CSS 和一般的编码时，我有点绿色。我正在尝试制作一个画廊，并且使用其他地方的代码已经做到了这一点：

[http://mccarronandco.com/newsite/test.html](http://mccarronandco.com/newsite/test.html)

它几乎就在那里，但是当用户单击页面上的其他任何位置时，我试图停止主图片重置，因此当“焦点”离开其中一个缩略图时。这是页面的CSS：

```
.gallerycontainer{
position: relative;
float:left;
/*Add a height attribute and set to largest image's height to prevent overlaying*/
}

.thumbnail img{
    border: 1px solid white;
    margin: 0 5px 5px 0;
}

.thumbnail:focus{
    background-color: transparent;
    outline:none;
}

.thumbnail:focus img{
    border: 1px solid black;
}

.thumbnail span{ /*CSS for enlarged image*/
    position: absolute;
    left: -1000px;
    visibility: hidden;
    text-decoration: none;

}

.thumbnail span img{ /*CSS for enlarged image*/

}

.thumbnail:focus span{ /*CSS for enlarged image*/
    position: absolute;
    visibility: visible;
    top: -520px;
    left: 30px; /*position where enlarged image should offset horizontally */
    z-index: 50;
} 
```

问候，

安迪

# bash - 如何使用位置参数调用 bash 脚本？

> ID：15953127
> 
> 赞同：0
> 
> 时间：2013-04-11T15:41:37.407
> 
> 标签：bash, parameters

我有一个将使用以下命令执行的脚本，

```
bin/nutch crawl urls -dir /data/test/ 
```

bin/nutch - 脚本文件抓取、url、/data/test/ - 参数 -dir - 选项

上面的脚本应该从名为 test.sh 的 shell 脚本中执行。我有下面的代码来执行它，但它无法传递位置参数，

```
path="/home/vel/vel-home/scripting/apache-nutch-1.6/bin"
. $path/nutch "crawl" -dir "$path/urls" "$path/data/test/" 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:59:11.683

您需要使用`$1`等`$2`，才能访问传递给脚本的参数。

这是一个示例脚本：

```
NUTCH_HOME="/home/vel/vel-home/scripting/apache-nutch-1.6"
dataDir="$1"
${NUTCH_HOME}/bin/nutch crawl "${NUTCH_HOME}/urls" -dir "$dataDir" 
```

你会像这样运行它：`myscript.sh /data/test`

# c# - DevExpress 网格没有进入详细信息行

> ID：15953129
> 
> 赞同：0
> 
> 时间：2013-04-11T15:41:44.580
> 
> 标签：c#, asp.net, devexpress

请在 default.aspx.cs 中找到以下行

ASPxGridView 网格 = gvPatient.FindDetailRowTemplateControl(index, "gvOrder") as ASPxGridView;

它没有得到 gvPatient 的详细信息行模板内的 gvOrder Aspxgridview。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using ADLPRO2MODEL;
using DevExpress.Web.ASPxGridView;
using DevExpress.Web.ASPxEditors;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void gvOrder_BeforePerformDataSelect(object sender, EventArgs e)
    {
        Session["PatientNo"] = (sender as ASPxGridView).GetMasterRowKeyValue();
    }

    protected void btnSave_Click(object sender, EventArgs e)
    {
        // string key = (string)gvPatient.GetMasterRowKeyValue();

        decimal key = (decimal)Session["PatientNo"];

        int index = gvPatient.FindVisibleIndexByKeyValue(key);

        ASPxGridView grid = gvPatient.FindDetailRowTemplateControl(index, "gvOrder") as ASPxGridView;
        ASPxMemo tbNote = gvPatient.FindControl("tbNote") as ASPxMemo;
        ASPxLabel lblMsg = gvPatient.FindControl("lblMsg") as ASPxLabel;

        int patientNo = Convert.ToInt32(grid.GetSelectedFieldValues("PAT_NUMBER")[index]);
        int orderKey = Convert.ToInt32(grid.GetSelectedFieldValues("ORDER_KEY")[index]);

        ADLPRO2ENTITIES context = new ADLPRO2ENTITIES();

        ORD_D_PHA_RECOMMEND obj = context.ORD_D_PHA_RECOMMEND.FirstOrDefault(i => i.ORDER_KEY == orderKey && i.PAT_NUMBER == patientNo);

        bool? b = null;

        if (obj != null)
        {
            obj.Cont = b;

            if (tbNote.Text.Trim() != string.Empty)
            {
                obj.Note = tbNote.Text.Trim();
            }
        }
        else
        {
            obj = new ORD_D_PHA_RECOMMEND();
            obj.Cont = b;
            if (tbNote.Text.Trim() != string.Empty)
            {
                obj.Note = tbNote.Text.Trim();
            }
            obj.ORDER_KEY = orderKey;
            obj.PAT_NUMBER = patientNo;
            context.AddToORD_D_PHA_RECOMMEND(obj);
        }
        context.SaveChanges();

        tbNote.Text = string.Empty;

        lblMsg.Text = "Saved";
    }

} 
```

# signalr - 使用 SignalR 隔离特定浏览器实例

> ID：15953132
> 
> 赞同：1
> 
> 时间：2013-04-11T15:41:50.347
> 
> 标签：signalr, signalr-hub

我们正在构建一个应用程序，它将使用 SignalR 向浏览器发送消息。用户可能打开了多个浏览器实例，我们希望将每条消息发送到适当的浏览器。我们的理解是~~ClientId~~ ConnectionId 将允许我们这样做。我们遇到的问题是在代码库中的适当时间访问~~ClientId~~ ConnectionId 或 SessionId。这是我们的场景：

执行 MVC 操作，并且作为该处理的一部分，调用 Biztalk 端点。Biztalk 执行不在进程中（从 MVC 操作的角度来看），完成后不会返回。这是设计使然。为了通知 MVC 应用程序它已完成，Biztalk 通过调用 /myapp/signalr 端点向 MVC 应用程序的 SignalR 集线器发送一条消息。消息由 SignalR 接收，然后应路由到适当的浏览器实例。

由于发送给 SignalR 的消息是由 Biztalk 而不是 MVC 应用程序发送的，因此与 SignalR 的连接的 ClientId 不是标识应该接收消息的浏览器实例的那个。因此，我们试图通过在发送给 Biztalk 的消息中包含启动 Biztalk 调用的浏览器实例的~~ClientId ConnectionId 来实现类似于返回地址模式的东西。~~当 Biztalk 将其消息发送到 SignalR 时，其中一个内容是原始~~ClientId~~ ConnectionId 值。当 SignalR 处理来自 Biztalk 的消息时，它可以使用~~ClientId~~ConnectionId 包含在消息中，用于将该消息路由到适当的浏览器实例。（是的，我们知道如果浏览器已关闭并重新打开，这将不起作用，我们对此很好。）

我们面临的问题是，当最初从我们的 MVC Action 向 Biztalk 发送消息时，我们无法访问~~ClientId~~ ConnectionId，因为它仅在 Hub 的上下文中可用。这是可以理解的，因为 MVC 操作不知道要查找哪个 Hub 上下文。

我们尝试的是通过 Biztalk 消息传递 SessionId 并将其返回给 SignalR。这解决了在 Biztalk 消息中包含浏览器实例标识符并将其返回给 SignalR 的问题。它引入的事实是，当客户端连接到 Hub 时，我们无法访问 Hub 的 OnConnect 方法中的 Session（因此也无法访问 SessionId）。

据报道，David Fowler 发布了一个要点，该要点显示了如何使只读 SessionState 在集线器中可访问，但它不起作用。( [https://gist.github.com/davidfowl/4692934](https://gist.github.com/davidfowl/4692934) ) 一旦我们将此代码添加到发送到 SignalR 的应用程序消息中，就会导致 HTTP 500 错误，这是由 SignalR 引发以下异常引起的。

```
[ArgumentNullException: Value cannot be null.Parameter name: s]
System.IO.StringReader..ctor(String s) +10688601
Microsoft.AspNet.SignalR.Json.JsonNetSerializer.Parse(String json, Type targetType) +77
Microsoft.AspNet.SignalR.Json.JsonSerializerExtensions.Parse(IJsonSerializer serializer, String json) +184
Microsoft.AspNet.SignalR.Hubs.HubRequestParser.Parse(String data) +101
Microsoft.AspNet.SignalR.Hubs.HubDispatcher.OnReceived(IRequest request, String connectionId, String data) +143
Microsoft.AspNet.SignalR.<>c__DisplayClassc.<ProcessRequest>b__7() +96
Microsoft.AspNet.SignalR.<>c__DisplayClass3c.<FromMethod>b__3b() +41
Microsoft.AspNet.SignalR.TaskAsyncHelper.FromMethod(Func`1 func) +67 
```

无论我们设置 SessionStateBehavior 的模式（如 David Fowler 的要点所示），我们要么在向 Hub 发送消息时收到此异常，要么在 Hub 的 OnConnect 中时 SessionState 为 null。

所以，在所有这些序言之后，我们要问的是人们在 SignalR 中使用这种类型的断开连接的消息传递时如何更新适当的客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:11:28.950

如果您希望向集线器的正常请求之外的客户端发送数据，那么我建议您在集线器上使用静态并发字典来管理您的用户并将它们映射到相应的连接 ID。

使用这种方法，您可以在任何时候根据他们映射的连接 ID 发送给任何用户。因此，在将数据发送到 Biztalk 时，您需要做的就是发送您的用户 ID（由您创建），然后当数据流回 SignalR 时，您可以查找该给定用户 ID 的 ConnectionId（如果存在）。

最后，您可以通过在 OnConnected 中将用户添加到并发字典中来管理您的用户映射，仅当他们在 OnReconnected 中不存在时才添加，并在 OnDisconnected 中删除。

# css - 色板主题的页脚不能粘在底部

> ID：15953133
> 
> 赞同：0
> 
> 时间：2013-04-11T15:41:51.900
> 
> 标签：css, wordpress, layout, themes, woothemes

我正在使用来自 woothemes、Swatch 主题的免费 wordpress 主题。我不知道是否有人也使用这个主题。我涉及了一些问题。当帖子很短时。主题的页脚无法到达底部。留下一片空白。太丑了 所以我想找到一种方法来解决它。我已经阅读了一些 CSS 书籍并在谷歌上搜索了很多次，但我仍然找不到方法。所以，希望大家能给我一些建议。我的编程知识太差了。对此感到抱歉。希望得到您的回复。

此致。

```
/* 2.1 Containers & Columns */
#wrapper  { background: transparent url(images/wrapper-bg-colourstrip.png) repeat-x left top; padding-top: 5px; } /* Top padding is the height of the colour strip image. */

#main{width:575px;}
#main.fullwidth, .layout-full #main, .col-full {width: 900px; margin:0 auto;}

#sidebar{width:250px;}
#sidebar .secondary { width:140px; } 

.entry img { max-width:565px; }
.layout-full .entry img { max-width:890px; }

.col-left { float: left; }
.col-right { float: right; }

.two-col-right #main { float:right; }
.two-col-right #sidebar { float:left; }

    /* 2.6 Footer */
#footer{padding: 30px 0 20px; background: url(images/bg-ripple-footer.png) repeat top left; color:#999;}
#footer p {}
#footer a { color: #ffffff; }
#footer #credit img{vertical-align:middle;}
#footer #credit span{display:none;}

#footer-widgets { margin-bottom: -5px; background: url(images/bg-ripple-footer-widgets.png) repeat top left; padding:10px 0; }
#footer-widgets .block { padding:20px 10px 0 10px; float:left; }
#footer-widgets .col-1 .block { width:100%; padding-left:0; }
#footer-widgets .col-2 .block { width:420px; padding-left: 20px; }
#footer-widgets .col-3 .block { width:270px; padding-left: 16px;  }
#footer-widgets .col-4 .block { width:200px; padding-left: 10px;  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:08:15.427

该演示展示了一种广泛使用的实现粘性页脚的方法[http://ryanfait.com/sticky-footer](http://ryanfait.com/sticky-footer/)。

HTML 设置：

```
<div class="wrapper">
    <!-- Body Content -->
    <div class="push"></div>
</div>

<div class="footer">
    <!-- Footer Content -->
</div> 
```

这是执行此操作的 CSS：

```
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's   height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
} 
```

如果失败，您可以尝试向 WooThemes 寻求支持。

# svn - svn中修改的项目列表

> ID：15953136
> 
> 赞同：0
> 
> 时间：2013-04-11T15:41:53.493
> 
> 标签：svn

我需要从 svn 中列出修改后的项目名称。svn update 给出了修改的文件列表，而我正在寻找的是修改后的项目（模块）列表

U ProjectA/src/module1/xxx1.xx

U ProjectA/src/module1/xxx2.xx

U ProjectB/src/module1/xxxx.xx

U ProjectC/src/module1/xxxx.xx

我希望列表为 ProjectA、ProjectB、ProjectC。有没有办法我可以做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:39:57.100

你在 Linux/Mac 上吗？如果是，请尝试以下操作

```
svn st | grep "^M" | sed 's/U \+\([^\/]\+\).*/\1/g' | uniq 
```

# mobile - google+ 的方案是什么？

> ID：15953137
> 
> 赞同：0
> 
> 时间：2013-04-11T15:41:56.123
> 
> 标签：mobile, google-plus

我正在搜索 google+ 的方案，所以我可以创建一个链接来启动 Google+ 应用程序。

Twitter ( `twitter://user?screen_name=XYZ`) 和 Facebook ( `fb://profile/ID`) 都在工作，但我找不到 Google+ 的。

`plus://`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:28:47.107

我现在找到了方案。是`gplus://`。但是现在我需要一个像用户或配置文件这样的参数来在启动应用程序后选择一个配置文件。有人可以帮忙吗？

# c++ - 获取第 N 种可变参数模板模板？

> ID：15953139
> 
> 赞同：36
> 
> 时间：2013-04-11T15:42:04.073
> 
> 标签：c++, variadic-templates

如何获取第 N 种可变参数模板模板？例如

```
template<typename... Args>
class MyClass
{
    Args[0] mA; // This is wrong. How to get the type?

}; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-11T16:07:36.547

您可以使用`std::tuple`：

```
#include<tuple>

template<typename... Args>
class MyClass
{
    typename std::tuple_element<0, std::tuple<Args...> >::type mA;
}; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-20T21:11:51.343

如果你想要一些东西而不使用`std::tuple`这个作品

```
template<std::size_t N, typename T, typename... types>
struct get_Nth_type
{
    using type = typename get_Nth_type<N - 1, types...>::type;
};

template<typename T, typename... types>
struct get_Nth_type<0, T, types...>
{
    using type = T;
}; 
```

比

```
template<std::size_t N, typename... Args>
using get = typename get_Nth_type<N, Args...>::type;

template<typename... Args>
class MyClass
{
    get<0, Args...> mA;
}; 
```

# android - 操作栏中的水平进度条宽度

> ID：15953140
> 
> 赞同：8
> 
> 时间：2013-04-11T15:42:04.527
> 
> 标签：android, width, android-actionbar, progress

我在我的操作栏中显示一个水平进度条。我的问题是进度条宽度不是操作栏宽度，而是更小（但居中）。这是正常行为吗？我怎样才能给它屏幕宽度？

我在 onCreate 中使用它

```
 requestWindowFeature(Window.FEATURE_PROGRESS); 
```

这在我的方法中

```
public void setShowIndeterminateProgress(boolean val) {
    setProgressBarIndeterminate(true);
    setProgressBarVisibility(val);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T18:26:38.460

操作栏样式中有一个属性`android:progressBarPadding`。将其设置为`0dip`。

```
<style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:progressBarPadding">0dip</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T17:06:00.123

您需要从菜单中删除所有项目。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    //inflater.inflate(R.menu.main, menu);
    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(false);
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowCustomEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    //actionBar.setIcon(R.drawable.ic_launcher);

    LayoutInflater inflator = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflator.inflate(R.layout.actionbar_main, null);

    //actionBar.setCustomView(view);
    return true;

} 
```

然后创建一个带有进度条的 xml 布局。在其中宽度 =“match_parent”。取消注释 actionBar.setCustomView 和此方法以使用您自己的自定义视图膨胀您的 actionBar。

试试这个，给我唱歌，它对你有用吗？

# jquery - TinyMCE 添加运行时样式以禁用编辑元素

> ID：15953141
> 
> 赞同：2
> 
> 时间：2013-04-11T15:42:09.817
> 
> 标签：jquery, css, wordpress, tinymce

我正在尝试为我的简码创建更好的“在编辑器中”预览。

所以，我用 CSS 分类的 div 包装它们，我可以通过 editor-styles.css 设置样式，如下所示：

```
 if (customid != 0 && customid == 'divider_bar_soft_up' ){
        tagtext = "<div class=\"my_editor_style mceItemNoResize\">["+ customid + "/]</div>";
    } 
```

除了 mceItemNoResize 类在传输到编辑器时没有附加到元素之外，它工作正常。编辑器内的源代码如下所示：

```
<div class="my_editor_style">[divider_bar_soft_up/]</div> 
```

我的问题是“如何将自定义 css 类或样式应用于此元素，以使其不会被无意编辑（除了移动或删除）？

我试图防止用户不小心将光标插入我的包装 div 并开始输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:53:19.503

嗯，您可以在包装 div 和`return false`.

**示例**：如果已单击指定元素并将光标移动到该元素之后，则检查是否发生 ckick。请注意，如果您在该 div 中有更多 html 元素，则需要进行额外检查。

```
ed.on('init', function(e){
    ed.on('click', function(evt){
        if (evt.target == 'DIV' && evt.target.className == 'my_editor_style')
        {
            // remove selection
            ed.selection.select(evt.target);
            // collapse selection range to end
            ed.selection.collapse(0);
        }
    });
}); 
```

# python - 在python中将字符串转换为函数

> ID：15953143
> 
> 赞同：0
> 
> 时间：2013-04-11T15:42:21.153
> 
> 标签：python, string, function, module, getattr

我有一个来自数据库的字符串。此字符串是模块内的文件 .py 的名称。结构是这样的：

```
files
├── file1.py
├── file2.py
└── __init__.py 
```

`file1.py`包含：

```
def file1(imprime):
    print(imprime) 
```

`file2.py`包含：

```
def file2(imprime):
    print(imprime) 
```

我需要将字符串转换为可调用的函数。

在`main.py`文件中我尝试：

```
import files
string = "file1.py"
b = getattr(file1, string)

text = 'print this...'

b(text) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:48:58.183

有几个问题。在`string`这种情况下，不应是“.py”文件名，而是模块或函数名，因此`file1`.

`file1`但是不在范围内，因为您已经导入了`files`，并且`file1`该函数在`files.file1`模块内。

您可以让 files/ **init** .py 声明以下内容：

```
from file1 import *
from file2 import * 
```

如果您希望`file1`函数和`file2`函数存在于`files`. 然后你会做`b = getattr(files, string)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:53:13.697

您可以使用导入功能按名称导入模块并将其粘贴到文件模块上。

编辑：更改以显示如何调用该函数

```
import os
import files
wanted_file = "file1.py"
# name of module plus contained function
wanted_name = os.path.splitext(wanted_file)[0]
# if you do this many times, you can skip the import lookup after the first hit
if not hasattr(files, wanted_name):
    module = __import__('files.' + wanted_name)
    setattr(files, wanted_name, module)
else:
    module = getattr(files, wanted_name)
fctn = getattr(module, wanted_name)
text = 'print this...'
fctn(text) 
```

# javascript - 使用 javascript 将所有浏览器音频静音

> ID：15953144
> 
> 赞同：0
> 
> 时间：2013-04-11T15:42:22.293
> 
> 标签：javascript, audio, global, mute

我怀疑这甚至是可能的，但这将是一个很大的帮助。

我正在整理一个投资组合，并通过 ajax 引入外部站点以适应漂亮的小“3D”容器。

问题是.. 其中 2 个具有自动启动的音频（是的，通常是一种不好的做法，但它们在这 2 个页面上工作）。

一个是 html5 音频 - 很简单，只需`.volume`将其设置为 0。

*另一个*是`.swf.`文件。如果可能的话，我想静音页面上的所有元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:48:51.840

你控制swf的吗？如果是这样，请将其关闭。或者添加一个变量到 swf 带一个参数来控制音量（例如`http://example.com/myswf.swf?volume=0`）。

否则，这是不可能的。

# c# - 是什么导致以下错误：',' 附近的语法不正确？

> ID：15953149
> 
> 赞同：0
> 
> 时间：2013-04-11T15:42:33.407
> 
> 标签：c#, asp.net, sql, sql-server-2008, insert

我正在尝试将信息插入到 sql express 2008 数据库上的表中，当我尝试插入字段时，我收到错误“''附近的语法不正确'”有人可以向我解释一下我的代码中的原因是什么问题？

```
protected void insertworkshop_Click(object sender, EventArgs e)
    {
        using (SqlConnection conn2 = new SqlConnection(@"Data Source=CIS489_3\WILDLIFE;Initial Catalog=WildLife_Education;Integrated Security=True;"))
        {

            SqlCommand CmdSql2 = new SqlCommand("INSERT INTO [tblWorkshop] ([WorkshopName], [WorkshopBeginingDate], [WorkshopEndingDate], [WorkshopLocation], [InstructorID])VALUES (@WorkshopName, @WorkshopBeginingDate, @WorkshopEndingDate, @WorkshopLocation, @InstructorID)", conn2);
            conn2.Open();
            CmdSql2.Parameters.AddWithValue("@WorkshopName", workshopinsertname.Text.ToString());
            CmdSql2.Parameters.AddWithValue("@WorkshopBeginingDate", workshopinsertstart.Text.ToString());
        CmdSql2.Parameters.AddWithValue("@[WorkshopEndingDate", workshopinsertend.Text.ToString());
        CmdSql2.Parameters.AddWithValue("@WorkshopLocation", workshopinsertlocation.Text.ToString());
        CmdSql2.Parameters.AddWithValue("@InstructorID", insertinstructorid.SelectedValue.ToString());

        CmdSql2.Connection = conn2;
        CmdSql2.ExecuteNonQuery();
        conn2.Close();
        UpdateInsertWorkshop.Update();
        this.addnewworkshop_ModalPopupExtender.Hide();

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T15:48:06.480

`[`在您的代码中，以下行有一个额外的内容：

```
 CmdSql2.Parameters.AddWithValue("@[WorkshopEndingDate", workshopinsertend.Text.ToString()); 
```

应该：

```
 CmdSql2.Parameters.AddWithValue("@WorkshopEndingDate", workshopinsertend.Text.ToString()); 
```

# qt - QML：子属性的别名

> ID：15953151
> 
> 赞同：5
> 
> 时间：2013-04-11T15:42:34.980
> 
> 标签：qt, properties, alias, qml, qt5

我创建了对话框并尝试添加一些别名来更改它的标题和文本：

```
import QtQuick 2.0
import Ubuntu.Components 0.1
import Ubuntu.Components.Popups 0.1

Item {
    signal confirmed;
    signal canceled;

    property alias title: dialog.title
    property alias text: dialog.text

    signal show(variant caller);

    Component {
         id: dialogComponent

         Dialog {
             id: dialog
             title: "Exit Game"
             text: "Are you sure that you want to exit?"

             Button {
                 text: "cancel"
                 onClicked:
                 {
                     canceled();
                     PopupUtils.close(dialog);
                 }
             }

             Button {
                 text: "confirm"
                 color: "orange"
                 onClicked:
                 {
                     confirmed();
                     PopupUtils.close(dialog);
                 }
             }
         }
    }

    onShow:
    {
        PopupUtils.open(dialogComponent, caller)
    }
} 
```

但我有问题：

```
qrc:/ConfirmationDialog.qml:8:23: Invalid alias reference. Unable to find id "dialog" 
```

那么，如何创建这个别名呢？为什么项目看不到它？更改此属性的最佳方法是什么？

最好的问候，尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T14:33:52.970

在您实例化它之前，对话框对象将不可用，因为它位于组件内部。

如果它不在组件中，您可以参考它的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:09:42.070

那是因为`Component`QML 元素。只需`Dialog`在文件中创建顶级项目`.qml`并将**其**视为动态实例化的组件。

# ruby-on-rails - after_save 更新一个 belongs_to 模型

> ID：15953154
> 
> 赞同：0
> 
> 时间：2013-04-11T15:42:43.237
> 
> 标签：ruby-on-rails, ruby, callback, after-save

我有一个 User 模型`has_many :comments`和一个 Comment 模型`belongs_to :user`。

我想聚集`comment.ratings`起来设置`user.rating`，所以我`after_save`在我的评论模型中有一个方法，我称之为。然而，这永远不会被调用。

这是方法：

```
def update_user_rating
  user = User.find(self.is_about)
  user.trip_rating = (Comment.find_all_by_is_about(self.is_about).collect { |comment| comment.rating }.sum) / 
    Comment.find_all_by_is_about(self.is_about).count
end 
```

我检查了 ruby​​ 代码，它可以在控制台上运行，所以我认为它不是 ruby​​ 代码。

是的，我在模型中也有 after_save :update_user_rating。

我想了解我做错了什么？

**编辑：**基于调试器，我看到 user.trip_rating= 的第一部分永远不会执行。意思是我试图`next`在那条线上做，但它从未通过，所以我假设那条线是问题所在。但是再次检查rails控制台，我看到它在那里工作。我不明白！

**已解决**：尽管我不喜欢它，但这是我解决问题的方法。我删除了 after_save 回调并向用户模型添加了一个方法来计算它自己的评级，并在控制器中调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:39:40.347

也许您`update_user_rating`正在被调用，但是方法中的某些行失败了。

尝试 `user = User.find(self.user_id)`或`user = User.find_by_is_about(self.is_about)`

# quickbooks - QBWC1013：连接到 QuickBooks 时出错。0x80040408

> ID：15953163
> 
> 赞同：0
> 
> 时间：2013-04-11T15:42:56.750
> 
> 标签：quickbooks, intuit, qbwc

我无法获取 QuickBooks Web 连接器。当它运行日志时说

...

```
20130411.15:29:07 UTC   : QBWebConnector.SOAPWebService.do_serverVersion() : *** Calling serverVersion().
20130411.15:29:07 UTC   : QBWebConnector.SOAPWebService.do_serverVersion() : Received from serverVersion() following parameter:<serverVersionRet="testing version">
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.do_clientVersion() : *** Calling clientVersion() with following parameter:<productVersion="2.1.0.27">
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.do_clientVersion() : Received from clientVersion() following parameter:<clientVersionRet="">
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.do_clientVersion() : This application agrees with the current version of QBWebConnector. Allowing update operation.
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.do_authenticate() : Authenticating to application 'QBServices Raw Soap', username = 'test'
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.do_authenticate() : *** Calling authenticate() with following parameters:<userName="test"><password=<MaskedForSecurity>
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.updateWS() : Received from authenticate() following parameters:<authRet[0]=""><authRet[1]="0"><authRet[2]=""><authRet[3]="">
20130411.15:29:08 UTC   : QBWebConnector.RegistryManager.setCurrentWebServiceName() : HKEY_CURRENT_USER\Software\Intuit\QBWebConnector\CurrentWebServiceName has been set to QBServices Raw Soap
20130411.15:29:08 UTC   : QBWebConnector.RegistryManager.setCurrentWebServiceSessionTicket() : HKEY_CURRENT_USER\Software\Intuit\QBWebConnector\CurrentWebServiceSessionTicket has been set to 
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.CheckCFNResponse() : User authenticated.
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.do_authenticate() : Done.
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.OpenConnection() : Connecting to QuickBooks...
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.handleAllOtherError() : QBWC1013: Error connecting to QuickBooks. Returning error message to application.
Could not start QuickBooks.
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.do_connectionError() : *** Calling connectionError() with following parameters:<wcTicket=""><hresult="0x80040408"><message="Could not start QuickBooks.">
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.do_connectionError() : Received from connectionError() following parameters:<tryAgain="done">
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.OpenConnection() : Error connecting to QuickBooks. Application sent back DONE. Job ending.
20130411.15:29:08 UTC   : QBWebConnector.RegistryManager.setUpdateLock() : HKEY_CURRENT_USER\Software\Intuit\QBWebConnector\UpdateLock has been set to False
20130411.15:29:08 UTC   : QBWebConnector.RegistryManager.setUpdateLock() : ********************* Update session unlocked *********************
20130411.15:29:08 UTC   : QBWebConnector.WebServiceManager.DoUpdateSelected() : Update completed with errors. See log (QWClog.txt) for details. 
```

当我收到此消息时，QuickBooks 已打开。QuickBooks 中的应用程序允许自动登录。我读到，如果服务未提供文件，则将使用打开的文件，但它不起作用。我也从我的肥皂服务返回了路径，但它仍然没有工作我重新启动并再次尝试但没有工作，我成立了一家新公司来测试意志，但它没有工作。

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:00:22.297

这是你的问题 - 你返回错误的东西：

```
20130411.15:29:08 UTC   : QBWebConnector.SOAPWebService.updateWS() : 
Received from authenticate() following parameters:
<authRet[0]="">
<authRet[1]="0">
<authRet[2]="">
<authRet[3]=""> 
```

要返回的正确参数集遵循以下格式：

*   *authRet[0]* = 有效的会话票据（如果登录成功）
*   *authRet[1]* = QuickBooks 公司文件的路径（例如“C:\path\to\file.QBW”）或字符串“none”（如果无事可做）或字符串“nvu”（如果登录无效）
*   *authRet[2]* = 这是*可选*的，您可以发送一个空字符串或一个整数，指示在进行下一次更新之前等待的分钟数
*   *authRet[3]* = 这是*可选*的，您可以发送一个空字符串或一个整数，指示 Web 连接器在更新会话之间应允许的最小秒数

[这在我们的QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_web_connector#array_authenticate_string_strusername_string_strpassword)上有更详细的记录。

你做了什么来修复它：

> 我开始在我的 qwc 文件中返回 FileID 作为 authenticate 返回的数组中的第一个元素，现在它似乎可以工作了。

非常不安全 - 这意味着任何发现 FileID（绝对是暴力破解或通过社会工程策略发现）的人都能够连接到您的 SOAP Web 服务并提取潜在的敏感会计信息（信用卡号、客户等）

您应该修复您的服务以返回一个有效的、短期的会话令牌。

# c++ - 计算 2 个 D3DXVECTOR3 之间的向量，与距离无关

> ID：15953166
> 
> 赞同：0
> 
> 时间：2013-04-11T15:43:00.817
> 
> 标签：c++, math, directx-9, direction, d3dx

所以这是我的场景：我有一个宇宙飞船游戏，每艘宇宙飞船都可以瞄准另一艘飞船并发射鱼雷，而鱼雷需要一个方向矢量才能行进，矢量需要与距离无关。

我正在寻找创建一个返回这样`D3DXVECTOR3`构造的方法：

`D3DXVECTOR3 TargetVector(D3DXVECTOR3 *target, D3DXVECTOR3 *firer)`

有没有人有这方面的经验？如果有人能向我指出任何体面的、易于理解的 D3D 数学教程，那就太好了，因为到目前为止我所发现的都是基于渲染图像而不是数学方程。

谢谢！

-瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:47:04.917

如果您想要一个从ie 开始`firer`并指向的方向向量，则`target`只需减去ie ：`firer``target`

```
direction = target - firer; 
```

D3DX 库中有[D3DXVec3Subtract](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205519%28v=vs.85%29.aspx)。

如果你想要一个单位法线，它是一个长度为 1 的向量，然后使用[D3DXVec3Normalize 对其](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205515%28v=vs.85%29.aspx)进行归一化。

所以你将拥有：

```
D3DXVECTOR3 TargetVector(D3DXVECTOR3 *target, D3DXVECTOR3 *firer)
{
    D3DXVECTOR3 direction;
    D3DXVec3Subtract(&direction, target, firer);

    D3DXVec3Normalize(&direction, &direction);
    return direction;
} 
```

# javascript - 如何从外部 JSON 数据源将标记放在 Google 地图上？

> ID：15953167
> 
> 赞同：5
> 
> 时间：2013-04-11T15:43:01.483
> 
> 标签：javascript, jquery, arrays, json, google-maps-api-3

我正在尝试在我的地图上使用 API 中的位置放置一些 Google 地图标记。我尝试制作一个计算所有 JSON 数据的 for 循环，并将“驱动程序名称、驱动程序纬度和驱动程序经度”放入数组中。那么这个数组是否应该帮助谷歌地图在地图上标出这些位置。下面的代码示例：

```
setTimeout(function () {

    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,
        center: new google.maps.LatLng(62.457171, 17.350953),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    var url = "http://blackcab.didair.se/api/drivers";
    var name;
    var lat;
    var lon;
    var locations;

    $.getJSON(url,

    function (response) {
        name = response.drivers[n].name;
        lat = response.drivers[n].currentLat;
        lon = response.drivers[n].currentLon;
        for (var n = 0; n < response.drivers.length; n++)
        var locations = [
            [name, lat, lon, n], ];
        for (i = 0; i < locations.length; i++) {
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                map: map
            });

            google.maps.event.addListener(marker, 'click', (function (marker, i) {
                return function () {
                    infowindow.setContent(locations[i][0]);
                    infowindow.open(map, marker);
                }
            })(marker, i));
        });
}, 3000); 
```

由于我希望它一直重新加载这些位置，因此该代码在一个区间内。我查看了我在 Google Chrome 网络开发工具中遇到的错误，但后来我遇到了更多错误。有一个简单的解决方案吗？一个真正的“胡桃夹子”。

提前致谢！

杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T15:45:22.603

您的代码中似乎有很多错误。除了大括号，例如在实际使用声明 N 的 for 循环之前使用 N。另外：

您不应该一直在重新创建地图对象。地图对象应该在被调用的函数之外。

JSON 调用应该是您的 SetInterval 函数中的唯一内容。本质上，您将在每次调用 inerval 时清除和设置标记。

我认为接近这个的东西更好：

```
 <html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <title>Google Maps Multiple Markers</title> 
  <script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
</head> 
<body>
  <div id="map" style="width: 500px; height: 400px;"></div>

  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script type="text/javascript">

    var image = {
    url: 'https://developers.google.com/maps/documentation/javascript/examples/images/beachflag.png',
    // This marker is 20 pixels wide by 32 pixels tall.
    size: new google.maps.Size(20, 32),
    // The origin for this image is 0,0.
    origin: new google.maps.Point(0,0),
    // The anchor for this image is the base of the flagpole at 0,32.
    anchor: new google.maps.Point(0, 32)
  };
  var shadow = {
    url: 'https://developers.google.com/maps/documentation/javascript/examples/images/beachflag_shadow.png',
    // The shadow image is larger in the horizontal dimension
    // while the position and offset are the same as for the main image.
    size: new google.maps.Size(37, 32),
    origin: new google.maps.Point(0,0),
    anchor: new google.maps.Point(0, 32)
  };

    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 2,
        center: new google.maps.LatLng(62.457171, 17.350953),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    setTimeout(function () {
        loadData(); 
    },500);

    function loadData()
    {
        //alert("Loading"); 
        var marker, i;

        var url = "http://blackcab.didair.se/api/drivers";
        var name;
        var lat;
        var lon;
        var locations;

        $.getJSON(url, function (response) {handleData(response)});
    }

    function handleData(response)
    {
        //alert(response);
        var n;
        for(n=0; n<response.drivers.length; n++)
        {
            name = response.drivers[n].name;
            //alert(name);
            lat = response.drivers[n].currentLat;
            lon = response.drivers[n].currentLon;
            var myLatLng = new google.maps.LatLng(lat,lon);
            var marker = new google.maps.Marker({
                position: myLatLng,
                shadow: shadow,
                icon:image,
                map: map,
                title: name,
                zIndex: 1
            });
        }   
    }

  </script>
</body>
</html> 
```

但是，缺少特定示例，您需要删除以前的标记，仅添加新标记并添加信息框。

看看：http: [//jsfiddle.net/xu7wL/](http://jsfiddle.net/xu7wL/)

# ruby-on-rails - 通过 AJAX 加载设计注册/登录表单

> ID：15953169
> 
> 赞同：0
> 
> 时间：2013-04-11T15:43:03.467
> 
> 标签：ruby-on-rails, ajax, devise

我正在尝试使用 AJAX 针对我的会员模型呈现我使用设计 2.2.0 创建的注册/登录表单。现在，为了返回 format.js，我没有修改原始的设计 SessionsController，而是创建了一个新控制器，它仅用于渲染“设计/会话/新”模板（请注意，format.html 仅用于调试目的） - 见下面的代码：

```
class SessionsAjaxController < ApplicationController
def new
    @member = Member.new
    respond_to do |format|
            format.html { render :template => 'devise/sessions/new', :locals =>  {  :resource => @member,  :resource_name => Member } }                       
            format.js  { render :template => 'devise/sessions/new',  :layout => false, :locals =>  {  :resource => @member,  :resource_name => Member} }                          
    end  
end 
```

我在尝试直接转到“/sessions_ajax/new”或从 AJAX 加载时收到以下错误：

```
undefined method `email' for #<Class:0x410e608> 
```

并且错误指向 new.html.erb 中的“第 11 行附近”

```
10: <%= f.label :email, "EMAIL" %><br />    
11: <%= f.email_field :email, :autofocus => true %> 
```

我将资源和资源名称正确地传递为：locals，所以我不太明白我在这里做错了什么。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:26:10.727

你必须继承自`Devise::SessionsController`.

# sql-server-2008 - 将多个查询结果分组在一列中

> ID：15953173
> 
> 赞同：0
> 
> 时间：2013-04-11T15:43:17.750
> 
> 标签：sql-server-2008, drop-down-menu

是否可以使用子查询进行查询并在第一个查询的一列 ( `DropDownList style`) 中获取子查询结果？

```
Select Name, Year, (Select SchoolId from Schools) from SchoolRecords

Output :

--------------------------      List would be a DropDownList and if I open it I would get
| Name | Year | SchoolId |      the results of my subquery like so :
|      |      |          | 
--------------------------      ------------------
| Jim  | 2011 | List  || |      |             || |
|      |      |       \/ |      |             \/ |
--------------------------      ------------------
| Tom  | 2012 | List  || |      |    012312324   |
|      |      |       \/ |      |    123245465   |
--------------------------      |    456547787   | 
                                ------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:10:45.610

无法在 SQL 中创建值的下拉列表。但是如果你只想要学校列中的学校列表，那么你可以使用`FOR XML PATH`来获取列表：

```
Select Name, 
  Year, 
  STUFF((SELECT distinct ', ' + cast(s.SchoolId as varchar(10))
         from Schools s
         FOR XML PATH(''), TYPE
         ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') schools
from SchoolRecords 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/552d3/2)

然后，如果您有一个将每个`SchoolRecords`与特定关联的表`school`，那么您可以仅显示与每个用户关联的学校：

```
Select Name, 
  Year, 
  STUFF((SELECT distinct ', ' + cast(s.SchoolId as varchar(10))
         from Schools s
         inner join record_school rs
           on rs.schoolid = s.schoolid
         where r.id = rs.id
         FOR XML PATH(''), TYPE
         ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') schools
from SchoolRecords r; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/82be9/1)

# sql-server - 将字符串转换为xml并插入Sql Server

> ID：15953177
> 
> 赞同：11
> 
> 时间：2013-04-11T15:43:37.737
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我们有一个 SQL Server 2008 R2 数据库表，其中 XML 存储在`VARCHAR`数据类型的列中。

我现在必须获取 xml 的一些元素。

所以我想首先将存储为数据类型的 xml 转换为存储为`VARCHAR`数据类型的 xml `xml`。

例子 ：

表 A

```
Id(int) , ProductXML (varchar(max)) 
```

表 B

```
Id(int), ProductXML(XML) 
```

我想将`ProductXML`from`Table A`转换为 XML 数据类型并插入`Table B`.

我尝试使用`CAST()`and`CONVERT()`函数，如下所示：

```
insert into TableB (ProductXML)
select CAST(ProductXML as XML) from TableA; 
```

同样尝试转换，但我得到一个错误

> XML 解析：无法切换编码

有什么办法可以将`varchar`表中的条目转换为 XML 条目？

关于XML：它很大，有很多节点，而且它的结构是动态变化的。

示例：一行可以有一个产品的 XML 条目，另一行可以有多个产品的 xml 条目。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-11T15:48:13.443

给我们一个您的 XML 样本，因为所有这些都可以工作：

```
CONVERT(XML, '<root><child/></root>')
CONVERT(XML, '<root>          <child/>         </root>', 1)
CAST('<Name><FName>Carol</FName><LName>Elliot</LName></Name>'  AS XML) 
```

此外，您可能必须先将其转换为 nvarchar 或 varbinary（来自 Microsoft 文档）：

您可以通过将任何 SQL Server 字符串数据类型（例如 [n][var]char、[n]text、varbinary 和 image）解析为 xml 数据类型，方法是将字符串转换为 (CAST) 或将字符串转换为 (CONVERT) xml 数据类型。检查无类型 XML 以确认其格式正确。如果存在与 xml 类型关联的模式，则还会执行验证。有关详细信息，请参阅将类型化 XML 与非类型化 XML 进行比较。

XML 文档可以使用不同的编码（例如，UTF-8、UTF-16、windows-1252）进行编码。下面概述了有关字符串和二进制源类型如何与 XML 文档编码交互以及解析器如何行为的规则。

由于 nvarchar 采用两字节 unicode 编码，例如 UTF-16 或 UCS-2，因此 XML 解析器会将字符串值视为两字节 Unicode 编码的 XML 文档或片段。这意味着 XML 文档需要以两字节 Unicode 编码进行编码，以便与源数据类型兼容。UTF-16 编码的 XML 文档可以具有 UTF-16 字节顺序标记 (BOM)，但它不需要，因为源类型的上下文清楚地表明它只能是两个字节的 Unicode 编码文档。

XML 解析器将 varchar 字符串的内容视为单字节编码的 XML 文档/片段。由于 varchar 源字符串具有关联的代码页，如果 XML 本身未指定显式编码，则解析器将使用该代码页进行编码 如果 XML 实例具有 BOM 或编码声明，则 BOM 或声明需要与代码页一致，否则解析器会报错。

varbinary 的内容被视为直接传递给 XML 解析器的代码点流。因此，XML 文档或片段需要内嵌提供 BOM 或其他编码信息。解析器只会查看流以确定编码。这意味着 UTF-16 编码的 XML 需要提供 UTF-16 BOM，并且没有 BOM 且没有声明编码的实例将被解释为 UTF-8。

如果事先不知道 XML 文档的编码，并且在转换为 XML 之前将数据作为字符串或二进制数据而不是 XML 数据传递，则建议将数据视为 varbinary。例如，当使用 OpenRowset() 从 XML 文件中读取数据时，应该将要读取的数据指定为 varbinary(max) 值：

```
select CAST(x as XML) 
from OpenRowset(BULK 'filename.xml', SINGLE_BLOB) R(x) 
```

SQL Server 在内部以使用 UTF-16 编码的高效二进制表示形式表示 XML。不保留用户提供的编码，但在解析过程中会考虑。

**解决方案：**

```
CONVERT(XML, CONVERT(NVARCHAR(max), ProductXML)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-20T14:07:58.193

这对我有用：

```
select CAST(REPLACE(CAST(column3 AS NVARCHAR(MAX)),'utf-8','utf-16') AS XML) from table 
```

# android - 这是可以容忍的崩溃次数吗？你会认为 3% 是边缘情况吗？

> ID：15953178
> 
> 赞同：2
> 
> 时间：2013-04-11T15:43:38.347
> 
> 标签：android, mobile, crash, crash-reports, flurry

我的崩溃日志报告说大约 3% 的用户经历过崩溃。

具体来说，这是通过 Flurry 使用“会话”。在 50,000 个会话中，有 1500 个会话发生了崩溃。

在一个信息丰富的应用程序中，这是一个可容忍的崩溃数量。你会认为 3% 是边缘情况，统计异常值，在第 X 个百分位数中吗？

我想调查我无法从我从未听说过的设备上复制的错误，但如果这值得，我需要能够合理化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:09:20.047

![在此处输入图像描述](https://i.stack.imgur.com/tHksa.png)

我不太确定“四分位数”是什么意思，但这似乎表明应用程序崩溃比我想象的更常见。我的 iPad 上偶尔会发生这种情况。我不记得有任何应用程序在我的 Android 设备上崩溃过，尽管我确实记得由于系统不稳定而不得不重新启动它几次。

# jquery - Jquery排序表行在IE中不起作用，但在所有其他浏览器中都有效

> ID：15953180
> 
> 赞同：0
> 
> 时间：2013-04-11T15:43:55.083
> 
> 标签：jquery, asp.net, internet-explorer-8

单击列标题时，我正在尝试对表格行 Asc 和 Desc 进行排序。它在 Firefox 和 Chrome 中运行良好，但在 IE 中无法运行。我尝试了不同的方法，例如获取最新版本的 jquery，但我仍然遇到相同的问题。一些列按字母顺序排序，一些按数值排序，一些将基于空值排序，最后一些按检查状态排序。我正在根据类进行排序。

我不能使用插件。这就是我所拥有的。为什么这在除 IE 之外的所有浏览器中都有效？我看了又看，在有人以相同方式排序的任何地方都找不到这样的例子。任何信息都会有帮助。谢谢！

这是jquery-

```
<script type="text/javascript">
$(document).ready(function () {
    $('.s').click(function () { //this is my header click

        var NotOptional;
        var checkState;

        if ($(this).hasClass('o')) { //optional column
            NotOptional = false;
        } else {
            NotOptional = true;
        }
        if ($(this).hasClass('cs')) { //class on my input items
            checkState = true;
        } else {
            checkState = false;
        }

        var o = $(this).hasClass('asc') ? 'desc' : 'asc';
        $('.s').removeClass('asc').removeClass('desc');
        $(this).addClass(o);

        var colIndex = $(this).prevAll().length;  //getting the rows
        var tbod = $(this).closest("table").find("tbody")
        var rows = tbod.find("tr").not('.first');

        rows.sort(function (a, b) {

            if (checkState == true) {   //if its a check box or radio
                var A = $(a).find("td input").eq(colIndex);  //getting checkstate
                var B = $(b).find("td input").eq(colIndex);

                if (A.is(':checked') == true) {
                    A = 1;  //setting row value to compare
                } else {
                    A = 0;
                }
                if (B.is(':checked') == true) {
                    B = 1;
                } else {
                    B = 0;
                }

                if (A < B) {  //returning compare for input
                    return A < B;
                } else if (A == B) {
                    return A == B;
                } else if (A > B) {
                    return A > B;
                }

            } else {
                if (NotOptional == false) {  //not optional never blank 
                    var A = $(a).find("td").eq(colIndex).text().toUpperCase();
                    var B = $(b).find("td").eq(colIndex).text().toUpperCase();

                } else { 
//these don't have to have a value but might contain numeric, letter or a null value
                    var A = $(a).find("td").eq(colIndex).text().toUpperCase();
                    var B = $(b).find("td").eq(colIndex).text().toUpperCase();
                    if (!isNaN(A)) A = Number(A);
                    if (!isNaN(B)) B = Number(B);
                }
            }

            return o == 'asc' ? A > B : A < B;
        });

        $.each(rows, function (index, ele) {
            tbod.append(ele); //appending the rows
        });

    }); //end sortable click 
```

我坚持这一点，无法弄清楚为什么 IE 不理解行排序。如果有帮助，则此 jquery 位于 aspx 页面上的用户控件上。我已经在 IE 中使用开发工具检查了标记，并且类在那里，它通过 Jquery 单击运行，但是当它比较行时，它变得很混乱，只是随机附加它们（即 - 不排序任何东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:35:01.380

好的。我崩溃了，决定使用 Tablesorter。谢谢各位的帮助。我建议任何想要对表格进行排序并需要跨浏览器支持的人，使用表格排序器并编写自己的解析器。

[http://mottie.github.io/tablesorter/docs/example-parsers-advanced.html](http://mottie.github.io/tablesorter/docs/example-parsers-advanced.html)

# c++ - 混淆运算符优先级：a << b + c << d

> ID：15953184
> 
> 赞同：1
> 
> 时间：2013-04-11T15:44:06.773
> 
> 标签：c++, operator-precedence

运算符`+`的优先级高于`<<`C++，这意味着表达式`a << b + c << d`应计算为：

```
a << (b + c) << d 
```

但这*没有任何意义*。跟随时可以获得更多的意义

```
a << (b + (c << d)) 
```

但这违反了`+`over的优先级`<<`，不是吗？编译器如何评估“确实有意义”部分？

**更新：**当问这个问题时，我认为编译器使用了第二个变体，这就是为什么我想知道编译器是如何进行这个评估的。事实上，使用了第一个并且它是正确的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T15:47:41.693

“有意义”是主观的。这就是为什么编译器不评估“意义”，而是基于一组规则的语法。因为`<<`具有更高的优先级（由这些规则集给出），它将表达式计算为

```
 a << (b + c) << d 
```

如有疑问，请使用括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T15:48:55.433

编译器不考虑什么*是有意义的*。他们只是遵守规则。

制定规则的是语言的设计者，他们通常会尝试制定这些规则以使它们*有意义*。当然，在一个人看来是明智的，在另一个人看来却是奇怪的。真的没有办法解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T15:52:07.430

`operator <<`的优先级低于`operator +`。参见[维基百科](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)。

编译器不会试图理解是否有任何意义。他们只是遵循语法规则。要真正了解为什么左移的优先级低于加号，您可能应该问丹尼斯里奇的鬼魂。

*除此之外，如果一个语法想要给出你想要的优先级，它应该以相同*的优先级（和从左到右的关联性）进行左移和加号。

但是，如果您想到这样的用例：

```
unsigned int a, b, mid;
...
mid = a + b >> 1; 
```

那么首先计算是完全有意义的`a + b`。所以我认为最初设计 C 时，他们决定移位是在常见的数学算术之后进行的。

* * *

在 C++ 中，这甚至让事情变得更舒服。现在的方式，你可以写：

```
cout << a + b << endl; 
```

不需要括号。尽管这只是一个快乐的巧合，并且与这些优先级的原始原因没有任何关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T15:56:03.950

在这种情况下，编译器会寻找最高优先级的运算符并计算相应的运算。它命中 + 和 sum b & c。然后剩下两个 << 运算符，编译器按顺序处理它们

# python - 将 n 个参数传递给 Python 中的函数

> ID：15953185
> 
> 赞同：3
> 
> 时间：2013-04-11T15:44:08.513
> 
> 标签：python, arguments

我有一个函数，它接受可变数量的变量作为参数。我将如何将`some_list`下面示例中的内容发送到我的`myfunc2()`

```
def myfunc1(*args):
    arguments = [i for i in args]
    #doing some processing with arguments...
    some_list = [1,2,3,4,5] # length of list depends on what was  passed as *args
    var = myfunc2(???) 
```

我能想到的唯一方法是将列表或元组`myfunc2()`作为参数传递，但也许有一个更优雅的解决方案，所以我不必重写`myfunc2()`和其他几个函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:57:38.537

`args`是一个元组。`*args`转换`arg`为参数列表。您定义`myfunc2`的方式与以下相同`myfunc1`：

```
def myfunc2(*args):
    pass 
```

要传递参数，您可以一个一个地传递：

```
myfunc2(a, b, c) 
```

带运算符的石斑鱼`*`：

```
newargs = (a, b, c)
myfunc2(*newargs) 
```

或使用两种技术的组合：

```
newargs = (b, c)
myfunc2(a, *newargs) 
```

同样适用于`**`运算符，它将 dict 转换为命名参数列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T15:45:36.943

这是相当广泛的可用并且很容易在谷歌上搜索......我很好奇你搜索的内容你找不到解决方案

```
def myfunc1(*args):
    arguments = args
    some_other_args = [1,2,3,4]
    my_var = myfunc2(*some_other_args) #var is not an awesome variablename at all even in examples 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:47:23.713

怎么样：

```
myfunc(*arguments) 
```

关键字参数也是如此，例如：

```
def myfunc(*args, **kwargs):
    # pass them to another, e.g. super
    another_func(*args, **kwargs) 
```

# laravel - Laravel - 自动检测控制器

> ID：15953187
> 
> 赞同：0
> 
> 时间：2013-04-11T15:44:09.583
> 
> 标签：laravel, laravel-3

Laravel 很新，我对路由的工作原理有点困惑。

在 FuelPHP 中，我习惯于使用文件结构来定义路由。

例如，我有 admin/clients/add，我会为此使用一个 Admin_Clients 类（和一个方法 action_add）等等。

使用 Controller::detect() 注册了类 admin.clients 但是在解决它时，它选择了 Admin_Controller 类，除非我定义了我想要避免的每一个路由。

如果有人可以帮助我，将不胜感激。

Laravel 与 3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:25:10.567

在 Laravel 中有一个命名约定很重要，尤其是对于控制器。

在您的情况下，重命名`Admin_Clients`to`AdminClients_Controller`可能是更好的主意。

然后，我会限制使用`Controller::detect()`，并显式地为每个控制器创建 Route，如下所示：

```
Route::controller('AdminClients'); 
```

从现在开始，方法的访问`AdminClients_Controller`将按以下方式工作：

```
http://localhost/controller/method/arguments 
```

有关 Laravel 中路由如何工作的进一步说明，请参阅：

[http://laravel.com/docs/routing#the-basics](http://laravel.com/docs/routing#the-basics)

# objective-c - PopOverController 在视图顶部调整大小

> ID：15953193
> 
> 赞同：0
> 
> 时间：2013-04-11T15:44:23.943
> 
> 标签：objective-c, xcode, uipopovercontroller

有没有一种方法可以计算/检测 PopOverController 是否位于 View 的顶部？如果有一种方法让它显示 allowedArrowDirections:UIPopoverArrowDirectionDown 与 allowedArrowDirections:UIPopoverArrowDirectionUp 取决于您是在视图的底部还是顶部，或者是否有足够的空间来显示 popOverControl 而无需调整大小？替代方案我正在考虑向下或向上滚动视图如果没有足够的空间，但我想使用 allowedArrowDirections:UIPopoverArrowDirectionDown 和 allowedArrowDirections:UIPopoverArrowDirectionUp。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:50:53.937

从中获取您的触摸坐标

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:myView];
    NSLog("%lf %lf", touchPoint.x, touchPoint.y);
} 
```

获得 X 和 Y 点后，您可以计算打开 PopOverController 的可用空间。

如果您需要进一步的帮助，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:24:01.990

您不需要计算弹出框控制器将放置视图的位置。弹出框控制器旨在让您指定箭头***可能***指向的位置以及将添加弹出框的视图。然后弹出框控制器将计算它有空间显示弹出框视图的位置。

但是，如果您可以通过指定一个或多个`UIPopoverArrowDirection`. 例如，假设您有一个大视图（视图 A），而较小的子视图（视图 B）位于视图 A 的左侧。如果要显示位于视图 B 右侧的按钮视图的弹出框，当您展示它时，您可以告诉弹出框控制器仅在视图 A 内的按钮框架右侧显示其弹出框视图，如下所示：

```
[popoverController presentPopoverFromRect: buttonView.frame
                                   inView: viewA
                 permittedArrowDirections: UIPopoverArrowDirectionLeft
                                 animated: YES]; 
```

![](https://i.stack.imgur.com/ZSrLa.png)

**编辑**

你能在包含表格视图的视图的坐标空间中获取文本字段的框架吗？

```
CGRect frame = [tableView.superview convertRect: textField.frame fromView: textField.superview];
[popoverController presentPopoverFromRect: frame
                                   inView: tableView.superview
                 permittedArrowDirections: UIPopoverArrowDirectionLeft
                                 animated: YES]; 
```

假设 tableView 的超级视图足够大以满足您的需求，这应该可以容纳弹出框的显示。

# visual-studio - 我应该向 SVN 提交 Visual Studio 文件夹结构多远

> ID：15953194
> 
> 赞同：1
> 
> 时间：2013-04-11T15:44:25.650
> 
> 标签：visual-studio, svn

将 VS 项目提交到 SVN 时，我应该在哪个文件夹级别提交到存储库

它应该是包含 .sln 和 .suo 文件以及项目和包文件夹的解决方案父文件夹吗？

或者我应该提交项目文件夹的内容（因此不包括 .sln、.suo 文件和包文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:47:15.027

随着 Nuget 成为获取项目包的流行方式，您应该在 SVN 中包含该解决方案。您可以将解决方案设置为自动下载包，这样您就不需要实际的 Nuget 包。

这是有关[将 NuGet 与源代码管理一起使用](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:49:11.250

如果要提交所有内容，则需要在根 (.sln) 文件中提交。例如，这将允许您选择添加到解决方案中的新项目。

如果您只想提交项目特定的更改（将文件添加到某个项目），那么您可以在项目级别提交。

# android - 显示具有单个 id 的多条通知消息

> ID：15953195
> 
> 赞同：2
> 
> 时间：2013-04-11T15:44:30.093
> 
> 标签：android

我有几个同时发生的事件。我需要以串行方式向用户显示多条通知消息。

理想的情况是，每条通知消息都会轮流显示大约 2 秒。

我能得到的最接近的是使用多个 id。但是，使用多个 id 会产生我不想要的副作用。最终会在状态栏中同时显示多条通知消息。

**这使用户的状态混乱，这不是我的意图。**

## 使用多个 id（最终显示多个杂乱消息）

```
int id = 0;
private void sendNotification(String message) {
    NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this.getActivity())
            .setSmallIcon(R.drawable.ic_notification)
            .setContentTitle("MyApp")
            .setTicker(message)
            .setAutoCancel(true)
            .setOnlyAlertOnce(true)
            .setDefaults(Notification.DEFAULT_SOUND)
            .setContentText(message);
    final NotificationManager mNotificationManager =
            (NotificationManager) this.getActivity().getSystemService(Context.NOTIFICATION_SERVICE);
    mNotificationManager.notify(id++, mBuilder.build());   
} 
```

但是，如果我不使用多个 id，而是使用单个 id，***如果同时发出多个通知请求，则只会显示 1 条消息。每条消息都会轮流出现。没有消息丢失。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:55:39.323

如果您只需要`Notification`状态栏中的一个，但您希望消息指示您的应用程序的所有通知，那么您需要`Notification`通过更改消息来管理单个。

每次您重新发布`Notification`with`sendNotification(message)`时，`Notification` `ticker`文本都会更新。

例如，如果您在假设的收件箱中有一个项目通知，您可以发布这样的消息：

> 乔的消息。

当您收到多条新消息时，请将其更改为：

> 您有 (n) 条消息。

当用户按下 时`Notification`，您应该重定向到`Activity`显示所有内容的`ListView`或`GridView`，以显示您的所有*消息*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:21:24.293

我创建了自己的消息队列系统。不使用单个id，但能够实现我想要的

***如果同时发出多个通知请求，则只会显示 1 条消息。每条消息都会轮流出现。没有消息丢失。***

`this.blockingQueue.offer(message);`

这是完整的消息队列系统。

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    executor.submit(new NotificationTask());
}

private class NotificationTask implements Runnable {
    @Override
    public void run() {
        while (!executor.isShutdown()) {
            try {
                String message = blockingQueue.take();
                notification(message);
                // Allow 5 seconds for every message.
                Thread.sleep(Constants.NOTIFICATION_MESSAGE_LIFE_TIME);
            } catch (InterruptedException ex) {
                Log.e(TAG, "", ex);
                // Error occurs. Stop immediately.
                break;
            }                
        }

    }
}

@Override
public void onDestroy() {
    // Will be triggered during back button pressed.
    super.onDestroy();
    executor.shutdownNow();
    try {
        executor.awaitTermination(100, TimeUnit.DAYS);
    } catch (InterruptedException ex) {
        Log.e(TAG, "", ex);
    }
}

private void notification(String message) {
    NotificationCompat.Builder mBuilder =
        new NotificationCompat.Builder(this.getActivity())
        .setSmallIcon(R.drawable.ic_notification)
        .setContentTitle(this.getString(R.string.app_name))
        .setTicker(message)
        .setContentText(message)
        .setAutoCancel(true)
        .setOnlyAlertOnce(true);

    // Do we need to have sound effect?

    final NotificationManager mNotificationManager =
        (NotificationManager) this.getActivity().getSystemService(Context.NOTIFICATION_SERVICE);
    final int id = atomicInteger.getAndIncrement();
    mNotificationManager.notify(id, mBuilder.build());

    Handler handler = new Handler(Looper.getMainLooper());
    handler.postDelayed(new NotificationManagerCancelRunnable(mNotificationManager, id), Constants.NOTIFICATION_MESSAGE_LIFE_TIME);
}

// Use static class, to avoid memory leakage.
private static class NotificationManagerCancelRunnable implements Runnable {
    private final NotificationManager notificationManager;
    private final int id;

    public NotificationManagerCancelRunnable(NotificationManager notificationManager, int id) {
        this.notificationManager = notificationManager;
        this.id = id;
    }

    @Override
    public void run() {
        notificationManager.cancel(id);
    }
}

// For notification usage. 128 is just a magic number.
private final ExecutorService executor = Executors.newSingleThreadExecutor();
private final BlockingQueue<String> blockingQueue = new ArrayBlockingQueue<String>(128);
private final AtomicInteger atomicInteger = new AtomicInteger(0); 
```

# android - 如何在 Android 中正确使用类

> ID：15953196
> 
> 赞同：-1
> 
> 时间：2013-04-11T15:44:38.773
> 
> 标签：android, class, nullpointerexception, findviewbyid

我是编程和 Android 新手。我已经构建了一个用于数钱的小应用程序。目前它只是一个大文件，其中包含许多方法。所以我想我会整理一下，然后去上课。我有这个 clearAll 方法，我把它放在一个 ClearAll 类中：

```
import android.widget.EditText;
import android.widget.TextView;

public class ClearAll extends MainActivity {

    public void clearAll() {
        // Set EditTexts to ""
        ((EditText) findViewById(R.id.euro500)).setText("");
        ((EditText) findViewById(R.id.euro200)).setText("");
        ((EditText) findViewById(R.id.euro100)).setText("");
        ((EditText) findViewById(R.id.euro50)).setText("");
        ((EditText) findViewById(R.id.euro20)).setText("");
        ((EditText) findViewById(R.id.euro10)).setText("");
        ((EditText) findViewById(R.id.euro5)).setText("");
        ((EditText) findViewById(R.id.euro2)).setText("");
        ((EditText) findViewById(R.id.euro1)).setText("");
        ((EditText) findViewById(R.id.cent50)).setText("");
        ((EditText) findViewById(R.id.cent20)).setText("");
        ((EditText) findViewById(R.id.cent10)).setText("");
        ((EditText) findViewById(R.id.cent5)).setText("");
        ((EditText) findViewById(R.id.cent2)).setText("");
        ((EditText) findViewById(R.id.cent1)).setText("");

        // Set TextViews to "0.00"
        ((TextView) findViewById(R.id.tvEuro500Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvEuro200Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvEuro100Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvEuro50Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvEuro20Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvEuro10Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvEuro5Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvEuro2Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvEuro1Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvCent50Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvCent20Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvCent10Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvCent5Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvCent2Totaal)).setText(R.string.puntjes);
        ((TextView) findViewById(R.id.tvCent1Totaal)).setText(R.string.puntjes);

        ((TextView) findViewById(R.id.tvTotaalBedrag)).setText(R.string.puntjes);
    }
} 
```

所以在我的 MainActivity 我做：

```
ClearAll clear = new ClearAll();
clear.clearAll(); 
```

但是，当调用它时，应用程序会在 findViewById 上出现 NullPointerException 崩溃。我一直在寻找一段时间，它给我留下了比我开始时更多的问题。似乎您不能在主要活动之外使用 findViewById，因为您尚未设置 setContentView()。我不会这样做，因为它不是主要活动。我还尝试将一个简单的 toast 放在一个单独的类中并调用它，但这也会崩溃。所以我只是做得不对。

有人愿意给我一些关于如何在 Android 中正确使用类的指示吗？

干杯，

大安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:46:34.357

您需要在 onCreate() 中有 setContentView(R.layout.activity_main) 然后通过 findViewById() 获取 id，然后将文本设置为 null。

由于您尚未设置布局，因此您无法通过 findViewById() 获取 id。因此您会收到 nullpointerexception。

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
            clearAll();
           }
       public void clearAll() {
         // Set EditTexts to ""
         ((EditText) findViewById(R.id.euro500)).setText("");
         ((EditText) findViewById(R.id.euro200)).setText("");

           }

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:58:46.730

这不是关于android，这纯粹是关于java。您必须了解实例如何协同工作。

您的 ClearAll 实例不包含任何内容。

您的 clearAll 方法必须在其工作范围内。它使用 findViewById，表示范围应该是当前活动。

当前活动是（我猜）您调用 ClearAll 的 MainActivity 实例。

有几种选择：

1.  在 MainActivity 中放回 clearAll
2.  使 ClearAll 成为扩展 Activity 的抽象类。使 MainActivity 扩展 ClearAll。从 MainActivity，您现在可以调用`this.clearAll()`
3.  使 ClearAll 成为一个不扩展任何东西的抽象类。使 clearAll 成为一个以 Activity 作为参数的静态方法。使用此参数调用 findViewById 就可以了。您现在可以从 MainActivity 调用 ClearAll.clearAll(this)

我推荐选项 1。如果您将在多个课程中使用此方法，则首选选项 2 和 3。

此外，关于减少代码量，更重要的是，减少重复行，我建议为 EditText 和 TextView 制作一个 id 的 Collection (array, list ...)，并在此集合上循环以清除内容。

类似于（在 MainActivity 中）：

```
private final static int[] EDIT_IDS = new int[] {R.id.euro500, ... }
private final static int[] TEXT_IDS = new int[] {R.id.tvEuro500Totaal, ... }

private void clearAll() {
    for (int id : EDIT_IDS) {
        ((EditText) findViewById(id)).setText("");
    }
    for (int id : TEXT_IDS) {
        ((TextView) findViewById(id)).setText(R.string.puntjes);
    }
} 
```

# sql - 带有子查询的查询执行得很糟糕

> ID：15953200
> 
> 赞同：0
> 
> 时间：2013-04-11T15:44:52.683
> 
> 标签：sql, performance, oracle, query-optimization

我对以下查询的性能有疑问，我想获取有关销售线的一些信息，我想了解每个销售线的最后一个日期是在库存中收到的：

```
SELECT        XAL_SUPERVISOR.SALESTABLE.SALESNUMBER, XAL_SUPERVISOR.SALESTABLE.DEBTORACCOUNT, XAL_SUPERVISOR.SALESTABLE.DELIVERYNAME, 
                     XAL_SUPERVISOR.SALESTABLE.DELIVERYADDRESS3, XAL_SUPERVISOR.SALESTABLE.REQUISNUMBER, XAL_SUPERVISOR.SALESTABLE.CUSTOMERREF, 
                     XAL_SUPERVISOR.SALESTABLE.ROUTE, XAL_SUPERVISOR.SALESTABLE.ROUTENUMBER, XAL_SUPERVISOR.SALESTABLE.CMPVWSTATUS, 
                     XAL_SUPERVISOR.SALESTABLE.CMPLOGISTIEK, XAL_SUPERVISOR.SALESTABLE.USVEHICLE, XAL_SUPERVISOR.SALESTABLE.ELCSALSTCALL, 
                     XAL_SUPERVISOR.SALESTABLE.ELCSALSTOK, XAL_SUPERVISOR.SALESTABLE.ELCEDICODE, XAL_SUPERVISOR.SALESTRANS.ITEMNUMBER, 
                     XAL_SUPERVISOR.STOCKTABLE.ITEMNAME, XAL_SUPERVISOR.SALESTRANS.QTYORDERED, XAL_SUPERVISOR.SALESTRANS.STOCKLOC AS REGELLOC, 
                     XAL_SUPERVISOR.STOCKTABLE.STOCKLOC AS STDLOC, XAL_SUPERVISOR.SALESTABLE.DELIVERYDATE, XAL_SUPERVISOR.SALESTABLE.DATASET, 
                     XAL_SUPERVISOR.SALESTABLE.CMPCORRECTIE, XAL_SUPERVISOR.SALESTRANS.ELCORGQTYORDERED AS ORG_BESTELD, 
                     XAL_SUPERVISOR.STOCKTABLE.CMPVERVALLEN,
                         (SELECT        (SUM(STS.ENTEREDQTY) + SUM(STS.RECEIVED) - SUM(STS.DRAWN))
                           FROM            XAL_SUPERVISOR.STOCKSUM STS
                           WHERE        STS.ITEMNUMBER = XAL_SUPERVISOR.SALESTRANS.ITEMNUMBER AND STS.DATASET = 'CMP'
                           GROUP BY STS.ITEMNUMBER) AS VOORRAAD,
                         (SELECT        SUM(STS.ORDERED)
                           FROM            XAL_SUPERVISOR.STOCKSUM STS
                           WHERE        STS.ITEMNUMBER = XAL_SUPERVISOR.SALESTRANS.ITEMNUMBER AND STS.DATASET = 'CMP'
                           GROUP BY STS.ITEMNUMBER) AS BESTELD,
                         (SELECT        SUM(STS.RESERVPHYSICAL)
                           FROM            XAL_SUPERVISOR.STOCKSUM STS
                           WHERE        STS.ITEMNUMBER = XAL_SUPERVISOR.SALESTRANS.ITEMNUMBER AND STS.DATASET = 'CMP'
                           GROUP BY STS.ITEMNUMBER) AS GERESERVEERD,
                         (SELECT        DDT.QTY
                           FROM            XAL_SUPERVISOR.DEBDLVTRANS DDT
                           WHERE        DDT.TRANSID = XAL_SUPERVISOR.SALESTRANS.TRANSID AND DDT.DATASET = 'CMP') AS PAKBONAANTAL,
                         (SELECT        DIT.QTY
                           FROM            XAL_SUPERVISOR.DEBINVTRANS DIT
                           WHERE        DIT.TRANSID = XAL_SUPERVISOR.SALESTRANS.TRANSID AND DIT.DATASET = 'CMP') AS FACTUURAANTAL,
                         (SELECT        MAX(ST.DATEPHYSICAL)
                           FROM            XAL_SUPERVISOR.STOCKTRANS ST
                           WHERE        ST.ITEMNUMBER = XAL_SUPERVISOR.SALESTRANS.ITEMNUMBER AND ST.DATASET = 'CMP' AND ST.StatusInFlow < 3 AND ST.DCType = 2) 
                     AS LTSTGELEVERD
FROM            XAL_SUPERVISOR.SALESTABLE, XAL_SUPERVISOR.SALESTRANS, XAL_SUPERVISOR.STOCKTABLE
WHERE        XAL_SUPERVISOR.SALESTABLE.DATASET = XAL_SUPERVISOR.SALESTRANS.DATASET AND 
                     XAL_SUPERVISOR.SALESTABLE.SALESNUMBER = XAL_SUPERVISOR.SALESTRANS.SALESNUMBER AND 
                     XAL_SUPERVISOR.SALESTRANS.ITEMNUMBER = XAL_SUPERVISOR.STOCKTABLE.ITEMNUMBER AND 
                     XAL_SUPERVISOR.SALESTRANS.DATASET = XAL_SUPERVISOR.STOCKTABLE.DATASET AND (XAL_SUPERVISOR.SALESTABLE.DELIVERYDATE = :Leverdatum) AND 
                     (XAL_SUPERVISOR.SALESTABLE.DATASET = 'CMP') AND (XAL_SUPERVISOR.SALESTABLE.CMPCORRECTIE = 0) 
```

这部分会减慢它的速度（没有它会在 < 10 秒内运行）：

```
 (SELECT        MAX(ST.DATEPHYSICAL)
                           FROM            XAL_SUPERVISOR.STOCKTRANS ST
                           WHERE        ST.ITEMNUMBER = XAL_SUPERVISOR.SALESTRANS.ITEMNUMBER AND ST.DATASET = 'CMP' AND ST.StatusInFlow < 3 AND ST.DCType = 2) 
                     AS LTSTGELEVERD 
```

当我在 SQL plus 中运行它时，我看到它获取主查询然后暂停很长时间以获取上述子查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:30:56.593

您的选择会减慢查询速度，这会导致查询速度变慢：

1.  数学（小于）可以不使用大小写索引。
    如果列表很小，请考虑更改为 in 列表

2.  如果您没有如下索引，它会很慢

    (ST.item_number, ST.dataset, ST.status_in_flow, ST.dctype) 上的一个 XAL_SUPERVISOR(itemNumber) 上的一个 datephysical 上的一个可以由 max 使用，因为它会导致 order by。

3.  考虑首先对所有 where 子句运行查询，然后基于它执行 max 。

如果不使用索引，则有很多原因。where 子句中的数学，如果行数很大，那么肯定会考虑第 1 项，因此将使用索引。此外，如果 column 可以为 null、to_upper 等，您可以使用基于函数的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:05:40.950

SELECT 子句中的子查询往往表现不佳 一种改进方法是使用内联视图或 WITH 子句计算每个 ITEMNUMBER 的最大值，然后加入它。

```
WITH datephysical_max as
    (SELECT Max(ST.datephysical) max_ , ST.itemnumber 
        FROM   xal_supervisor.stocktrans ST 
        WHERE  
               AND ST.dataset = 'CMP' 
               AND ST.statusinflow < 3 
               AND ST.dctype = 2
        GROUP BY )  
SELECT 
      ....,
      st.LTSTGELEVERD
FROM   xal_supervisor.salestable 
       inner join xal_supervisor.salestrans 
               ON xal_supervisor.salestable.dataset = 
                  xal_supervisor.salestrans.dataset 
                  AND xal_supervisor.salestable.salesnumber = 
                      xal_supervisor.salestrans.salesnumber 
                  AND xal_supervisor.salestrans.itemnumber = 
                      xal_supervisor.stocktable.itemnumber 
       inner join xal_supervisor.stocktable 
               ON xal_supervisor.salestrans.dataset = 
                  xal_supervisor.stocktable.dataset 
       INNER JOIN datephysical_max st
               ON ST.itemnumber = xal_supervisor.salestrans.itemnumber 
WHERE  ( xal_supervisor.salestable.deliverydate = :Leverdatum ) 
       AND ( xal_supervisor.salestable.dataset = 'CMP' ) 
       AND ( xal_supervisor.salestable.cmpcorrectie = 0 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:06:10.300

您可以尝试以下几件事：

*   第四个和第五个子查询只是得到一个标量值，因此可以放入查询的主体。看起来您在这里使用子查询来避免`LEFT JOIN`.

*   第一个、第二个、第三个和第六个子查询可以使用公用表表达式 (CTE) 组合，也称为 Oracle`WITH`子句。与其他子查询值一样，现在必须使用`LEFT JOIN`.

此外，如果您使用 ANSI 连接语法，这会更容易。这是答案（尽管请注意，我省略了很多“旁观者”列，因此它会有点紧凑；如果此解决方案适合您，您可以将它们重新添加）：

```
WITH StkSum AS (
  SELECT
    STS.ITEMNUMBER,
    SUM(STS.ENTEREDQTY) + SUM(STS.RECEIVED) - SUM(STS.DRAWN) AS VOORRAAD,
    SUM(STS.ORDERED) AS BESTELD,
    SUM(STS.RESERVPHYSICAL) AS GERESERVEERD,
    MAX(ST.DATEPHYSICAL) AS LTSTGELEVERD
  FROM XAL_SUPERVISOR.STOCKSUM STS
  INNER JOIN XAL_SUPERVISOR.STOCKTRANS ST ON STS.ITEMNUMBER = ST.ITEMNUMBER
  WHERE STS.DATASET = 'CMP'
    AND ST.DATASET = 'CMP'
    AND ST.StatusInFlow < 3
    AND ST.DCType = 2
)
SELECT
  XAL_SUPERVISOR.SALESTABLE.SALESNUMBER,
  ... all those SALESTABLE and SALESTRANS and STOCKTABLE columns ...,
  StkSum.VOORRAAD,
  StkSum.BESTELD,
  StkSum.GERESERVEERD,
  NVL(XAL_SUPERVISOR.DEBDLVTRANS.QTY, 0) AS PAKBONAANTAL,
  NVL(XAL_SUPERVISOR.DEBINVTRANS.QTY, 0) AS FACTUURAANTAL,
  StkSum.LTSTGELEVERD
FROM XAL_SUPERVISOR.SALESTABLE
INNER JOIN XAL_SUPERVISOR.SALESTRANS ON
  SalesTable.DataSet = SalesTrans.DataSet AND
  SalesTable.SalesNumber = SalesTrans.SalesNumber
INNER JOIN XAL_SUPERVISOR.STOCKTABLE ON
  SalesTrans.ItemNumber = StockTable.ItemNumber AND
  SalesTrans.DataSet = StockTable.DataSet
LEFT OUTER JOIN StkSum ON StkSum.ITEMNUMBER = SalesTrans.ITEMNUMBER
LEFT OUTER JOIN XAL_SUPERVISOR.DEBDLVTRANS DDT ON DDT.TRANSID = SalesTrans.TRANSID
LEFT OUTER JOIN XAL_SUPERVISOR.DEBINVTRANS DIT ON DIT.TRANSID = SalesTrans.TRANSID
WHERE
  (XAL_SUPERVISOR.SALESTABLE.DELIVERYDATE = :Leverdatum) AND 
  (XAL_SUPERVISOR.SALESTABLE.DATASET = 'CMP') AND
  (XAL_SUPERVISOR.SALESTABLE.CMPCORRECTIE = 0) AND
  DDT.DATASET = 'CMP' AND
  DIT.DATASET = 'CMP' 
```

最后，请注意，*由于表、列和条件的数量众多，如果上面的查询是 100% 正确的，我会感到震惊*。我尽了最大努力，但我的最好在这里可能还不够好:) 可能需要调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T16:23:01.367

如果您从 .net 或 Coldfusion 等应用程序运行此查询，则可以单独运行查询并将它们加入应用程序。使用.net，它将是 linq 到 DataTable，而coldfusion 将是查询的查询。

您可以在存储过程中做同样的事情。使用来自子查询的数据填充临时表并改为连接到临时表。

虽然这类事情是违反直觉的，甚至可能代表最糟糕的做法，但有时它们适合手头的情况。

# java - 以 C++ 方式思考 Java 引用

> ID：15953201
> 
> 赞同：3
> 
> 时间：2013-04-11T15:44:56.783
> 
> 标签：java, c++, object, memory, reference

在 Java 中，当我们将 java 对象参数传递给方法`myMethod((MyObject) myObject)`时，基本上就像在 C++ 中传递对对象的引用一样`myFunction(& myObject)`。在这种情况下，Java 开发人员拥有与 C++ 程序员几乎相同的自由，如果他想传递一个引用，他只传递一个对象，如果他想复制它，他在方法中手动完成。

但这是我的问题：

假设我有三个具有特定类型对象的不同数组`MyObject`

`MyObject[] myObjectsOne`

`MyObject[] myObjectsTwo`

`MyObject[] myObjectsThree`

我需要单独拥有它们，但我还需要一个替代数组，就像上面提到的这三个的摘要一样 - 例如用作单个对象来显示所有三个的内容。

场景：创建第四个数组，它将表示前三个的值，而实际上不会在任何地方复制这些值。（不为这些值分配额外的内存）

在 C++ 中，我只需创建一个表，其中包含对这三个表中相应对象的引用。

我一直认为在 Java 中它只是为我们制作的，但是当我开始考虑它时，我并不确定。

我们现在还有：`MyObject[] myObjectsFour`

而且表演完之后..

```
myObjectsFour[0] = myObjectsOne[0]; 
```

**..是否**访问`myObjectsFour[0]`并`myObjectsOne[0]`意味着实际上访问内存级别的同一个对象？ **就像我理解的那样，它必须是那样的**，如果不是的话`myObjectsFour[0] = myObjectsOne[0].clone();`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T16:03:37.830

我认为从背景文字来看有一个轻微的误解：

> 在 Java 中，当我们将 java 对象参数传递给方法 myMethod((MyObject) myObject) 时，基本上就像在 C++ 中传递对对象的引用，例如 myFunction(& myObject)。

Java**不是**“按引用传递”的语言。它总是按值传递。*当您传递一个对象时，您通过 value*传递对该对象的引用。当您按值传递指针时，这在 C++ 中是类似的。

例如，在 Java 中：

```
public void myMethod(MyObject myObject) {
    myObject = null;
} 
```

作为“MyObject”传递的对象只是值引用。因此将其设置为 null 不会影响传递的原始对象。相应地：

```
public void myMethod(MyObject myObject) {
    myObject.myIntProperty = 15;
} 
```

如上所述，访问对象的成员是对实际对象进行的，因为它仍然是对该对象的引用。如果有帮助，请将传入的`myObject`内容视为具有与传递的原始对象的内存位置相同的内存位置的副本：

```
public void myMethod(MyObject myObject) {}
/* Example memory address: 0x009FC12A in memory, 
   a *copy* of the same address of the object that was passed */ 
```

* * *

带着这种心态，让我们来看看你的问题。这会产生什么：

```
myObjectsFour[0] = myObjectsOne[0]; 
```

*好吧，由于 Java通过 value*分配元素的引用，`myObjectsFour[0]`现在指向完全相同的对象。这表示：

```
myObjectsFour[0] = myObjectsOne[0];    
myObjectsFour[0].myIntProperty = 15; 
```

也将 的值更改`myObjectsOne[0].myIntProperty`为 15，就像上面一样。但是这样做：

```
myObjectsFour[0] = myObjectsOne[0];
myObjectsFour[0] = null; // (or anything else, for that matter) 
```

对 没有影响`myObjectsOne[0]`。它不是*同一个*变量，`myObjectsFour[0] = myObjectsOne[0];`. 它只是两个具有相同引用副本的变量。

那有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:52:34.620

是的，您将访问相同的对象。

正如评论中的一些人指出的那样，Java 引用更像是 C++ 指针而不是 C++ 引用，不同之处在于您不必删除它们并且您不能进行指针运算。

当对象被插入到 Java 数组或 Java 集合中时，数据结构指向原始对象，而不是副本。

*   创建数组或集合的副本时，不会复制其中的对象。新的数据结构指向相同的对象。
*   当您更改数组或集合中对象的某些内容时，它也会更改该对象添加到的所有其他集合，因为它们都指向同一个对象。
*   当您从数组或集合中删除对象时，它不会被删除。其他指向它的指针保持有效。（当不再存在其他指向它的指针时，它最终被垃圾收集器删除）。
*   当一个集合或数组被删除时，它指向的对象不会受到影响（除非垃圾收集器注意到不存在指向它们的其他指针）。

# database - 何时将主 UID 作为外键传递？

> ID：15953202
> 
> 赞同：1
> 
> 时间：2013-04-11T15:45:02.780
> 
> 标签：database, oracle

恐怕我的问题措辞可能有点不准确，因为我刚开始使用数据库，但我会尽力而为……所以在我的大学，我们使用 Oracle Data Modeler 对数据库进行建模。问题是：一个实体的主 UID 何时作为外键传递给另一个实体？根据我（实验性地因为我无法用谷歌搜索出来......）发现，两个实体在 1:1 绑定时交换它们的 PK - 但是其他类型的绑定呢？传递哪一侧标记为可选的密钥是否重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:12:29.500

您需要研究不同类型的关系及其映射。

据我所知，以下是三种类型的关系：

1.  **一对一**

    这是表的一行与另一表的零或一行相关的关系。理想情况下，这种关系不应在两个不同的表中实现。一张桌子就足够了。例如 - 考虑我们有`person`和`permanent_address` 表。我们假设，根据业务规则，一个人只能有一个永久地址。所以，我们可以有：

    ```
    person(personid, firstname, lastname, ...)
    permanent_address (permanent_addressid, personid, line1, line2, ...) 
    ```

    其中`personid`in`permanent_address`表是指表的`personid`列`person`。

    如果要强制外键，可以`NOT NULL`向列添加约束。

2.  **多对一**

    这是更通用和广泛使用的关系类型，其中一个表中的许多行与另一个表中的一行相关。

    例如，如果您有一个业务规则，其中一个人可以拥有多辆汽车，您有：

    ```
    person(person_id, first_name, last_name, birthdate, ...)
    car (licence_plate_number, person_id, carname, ...) 
    ```

    其中`person_id`in `car`table 是指`person_id`in `person`table。

3.  **多对多**

    这是一种关系，其中一个表中的许多行可以与另一个表中的零行、一行或多行相关。

    例如，一个人可以有很多爱好。一个爱好可以多人共享。因此，我们可以如下实现这种关系：

    ```
    person (person_id, first_name, last_name, birthdate, ....)
    hobby (hobby_id, hobby_name, hobby_type, ...)
    person_hobby (person_id, hobby_id) 
    ```

    其中`person_id`in `person_hobby`table 指的`person_id`是`person`table，`hobby_id`in `person_hobby`table 指的`hobby_id`是`hobby`table。这个中间表是实现这种多对多关系所必需的。我们可以`PRIMARY KEY`对列集 (person_id, hobby_id) 强制执行一个约束作为复合主键，以避免多次为同一个人分配相同的爱好。

# javascript - 域移动 - 重定向 javascript 文件和 php 变量

> ID：15953204
> 
> 赞同：0
> 
> 时间：2013-04-11T15:45:07.550
> 
> 标签：javascript, redirect

我正在移动网站域并逐页设置 301 重定向，但这带来了两个问题：

1) 我如何重定向一个 javascript 文件（它是用户已安装的书签，因此需要重定向到新站点）。

2) 是否可以重定向 php 变量，例如 www.domain.co.uk/view/?PID=68 - /view/ 上的重定向就足够了吗？

提前致谢 ：-）

# pydev - 安装 Egit 时，Pydev 控制台失败并出现 503 错误

> ID：15953206
> 
> 赞同：0
> 
> 时间：2013-04-11T15:45:11.500
> 
> 标签：pydev, egit

我刚刚使用 PyDev 2.5.0 在 Eclipse 3.7.2 中安装了 Egit v2.3.1。但是，现在当我尝试打开交互式 python 控制台时，我收到此错误：

```
Unable to connect debugger to Interactive Console
The interactive console will continue to operate without the additional debugger features
Unexpected error setting up the debugger connection. 
Failed to recive suitable Hello response from pydevconsole.
Last msg received: Failed to create input stream: 
Server returned HTTP response code: 503 for URL: http://151.170.94.90 
```

以及我尝试在控制台输入的任何内容都会吐出此错误

```
Failed to create input stream: Server returned HTTP response code: 503 for URL: http://151.170.94.90 
```

有谁知道可能是什么原因造成的？如果我卸载 Egit，一切似乎都会恢复正常。

提前致谢

尼尔

# html - div中的表格居中

> ID：15953210
> 
> 赞同：1
> 
> 时间：2013-04-11T15:45:22.580
> 
> 标签：html

这就是我的代码的样子：

```
<div id="outer">
   <div id="inner">
      <table> ... </table>
   </div>
</div> 
```

现在，我需要表格在内部 div 中垂直对齐。为此，我在内部 div 中添加了`display: table-cell;`和。`vertical-align: middle;`

现在，我需要的另一件事是将内部 div 水平对齐到外部 div 内部的右侧。但是，一旦我添加`float: right;`到内部 div，表格就不再在其中垂直对齐。我会提到外部 div 的宽度是固定的，而内部 div 的宽度取决于表格。

有没有办法绕过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:18:45.800

尝试使用下面给出的。

```
<div id="outer" align="center">
   <div id="inner" align="center">
      <table> ... </table>
   </div>
</div> 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:54:52.647

如果你不介意失去流量，你可以尝试`#inner`使用`position:absolute`, as [this](http://jsfiddle.net/4pxHm/)的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:48:39.227

尝试使用`text-align: right`on`#outer`如果不能解决您的问题，请添加一些标记

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T15:49:38.400

不要使用 float 来水平对齐表格，只需使用 align 属性。因为 float 会自动将其放在顶部而不是 align 属性。

# sql - 访问返回不同的值

> ID：15953217
> 
> 赞同：0
> 
> 时间：2013-04-11T15:45:32.323
> 
> 标签：sql, database, ms-access

我正在使用由其他人构建的 SharePoint 数据库。我正在通过 Microsoft Access 生成一个简单的报表。我的一切工作正常，但我有一个价值，在 SharePoint 中是一个附加到采购订单的特定买家的列表。在 SharePoint 中，它返回一个名称值，但在 Access 中，它返回一个 # 值。我想知道当从 SharePoint 表返回的数据是 = to (specified #) 时，是否可以进行简单的修复，它将返回（指定的名称）。

现在它会返回 137。我希望它返回买家名称。遗憾的是，条件格式不会扩展到格式以外的内容，并且实际上可能会更改 If [Field] 返回 [#value] 而不是 return [specified return value]。

这是我从表中查询。我只是直接拉。

```
SELECT
   [115_12 RFQ's].RFQ, [115 Procurement].PO,
   [115 Procurement].[Issued Date],
   [115 Procurement].[C/O],
   [115 Procurement].Status,
   [115 Procurement].Vendor,
   [115_12 RFQ's].[RFQ Title],
   [115 Procurement].[PO Type],
   [115 Procurement].VDR,
   [115 Procurement].[Approval Drawings Required].Value,
   [115 Procurement].[Inspection Required],
   [115 Procurement].[Actual Inspection Date],
   [115 Procurement].[Shipped Date (Vendor)],
   [115 Procurement].[Actual Delivery Date],
   [115 Procurement].[Delivering To?],
   [115 Procurement].[Delivery Required Date],
   [115 Procurement].[Promised Delivery Date],
   [115 Procurement].[Last Vendor Contact Date],
   [115 Procurement].Comments,
   [115_12 RFQ's].Commodity,
   [115_12 RFQ's].Buyers
FROM [115_12 RFQ's]
LEFT JOIN [115 Procurement]
   ON [115_12 RFQ's].ID = [115 Procurement].RFQ; 
```

**[115_12 RFQ's].Buyers**正在返回我想要返回特定值的那些数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:59:33.733

数据库中可能有一个`Buyers`表存储 ID（这是查询现在返回的内容）和与 ID 关联的人的姓名。例如：

```
[Buyers table]
BuyerID
FullName

137   Tom Jones
138   Fred Smith 
```

您需要做的是找出公开买家姓名的表或视图的名称，并修改您的查询以执行与该表/视图的连接。从那里，您可以在表格中包含买家的姓名，而不是买家 ID，或者除了买家 ID 之外。

类似这样的东西：

```
SELECT
   [115_12 RFQ's].RFQ, [115 Procurement].PO,
   [115 Procurement].[Issued Date],
   [115 Procurement].[C/O],
   [115 Procurement].Status,
   [115 Procurement].Vendor,
   [115_12 RFQ's].[RFQ Title],
   [115 Procurement].[PO Type],
   [115 Procurement].VDR,
   [115 Procurement].[Approval Drawings Required].Value,
   [115 Procurement].[Inspection Required],
   [115 Procurement].[Actual Inspection Date],
   [115 Procurement].[Shipped Date (Vendor)],
   [115 Procurement].[Actual Delivery Date],
   [115 Procurement].[Delivering To?],
   [115 Procurement].[Delivery Required Date],
   [115 Procurement].[Promised Delivery Date],
   [115 Procurement].[Last Vendor Contact Date],
   [115 Procurement].Comments,
   [115_12 RFQ's].Commodity,
   [115_12 RFQ's].Buyers,
   [Buyers].FullName
FROM [115_12 RFQ's]
LEFT JOIN [115 Procurement]
   ON [115_12 RFQ's].ID = [115 Procurement].RFQ
LEFT JOIN [Buyer] 
ON [115_12 RFQ's].Buyers = [Buyer].BuyerID; 
```

# android - Android - 取决于语言和屏幕大小的值

> ID：15953218
> 
> 赞同：3
> 
> 时间：2013-04-11T15:45:33.723
> 
> 标签：android, android-resources

请原谅我的英语不好，我是法国人！

在我的 Android 项目中，我希望为两种语言（es 和 fr）和屏幕尺寸设置不同的值。我找不到任何关于它的东西。有人能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:12:46.410

Android 允许您根据运行应用程序的设备的配置提供备用资源。在您的情况下，您需要提供：

1.  针对支持的语言翻译了不同`String`的资源。
2.  `layout`针对支持的屏幕尺寸优化了不同的资源。
3.  支持的屏幕密度的不同密度图像资源。

Android 文档很好地涵盖了这些主题：

*   [如何处理提供这些替代资源](http://developer.android.com/guide/topics/resources/providing-resources.html)
*   [如何访问和使用资源](http://developer.android.com/guide/topics/resources/accessing-resources.html)
*   [如何本地化您的应用程序](http://developer.android.com/guide/topics/resources/localization.html)

这些文档应该为您提供有关正确构建应用程序所需执行的操作的深入指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:49:03.743

阅读：http: [//developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

对于法语，将您的 Strings.xml 文件放入 values-fr

# java - SFTP 连接问题

> ID：15953223
> 
> 赞同：1
> 
> 时间：2013-04-11T15:45:44.760
> 
> 标签：java, security, sftp, websphere-commerce, wcs

当我尝试连接到 SFTP 服务器时出现异常。我相信它是一个不安全的服务器，但与 FTP 的连接也失败了。我与管理员确认服务器实际上是安全的，应该使用 SFTP。该代码在我的本地机器上运行良好，作为一个独立的 java 程序，但在我本地机器上的 Websphere 商务服务器上运行时却不行。

代码：

```
FTPSClient client = new FTPSClient();
//FTPClient  client = new FTPClient();
//client.setKeyManager(km);
System.setProperty("javax.net.debug", "all");
//client.setSocketFactory(SSLSocketFactory.getDefault()); 
client.addProtocolCommandListener(new PrintCommandListener(new PrintWriter(System.out)));
client.setTrustManager(ACCEPT_ALL);
client.enterLocalPassiveMode();
client.setWantClientAuth(false);
client.setNeedClientAuth(false);
//client.setEnabledCipherSuites(null);
System.out.println("using 990'");
client.connect("obuftp.sears.com",21); 
```

**异常（在 WCS 环境中运行时）**

```
SystemOut     O   220-| Welcome to obuftp401p FTP over SSL (FTPS) Server |
220-| We allow TLS connections on ports 21 and 990\.    |
220-| If you see "503 Login with USER first." use SSL. |
220 

SystemOut     O   AUTH TLS

SystemOut     O   234 Proceed with negotiation.

SystemErr     R   javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
SystemErr     R      at com.ibm.jsse2.b.c(b.java:169)
SystemErr     R      at com.ibm.jsse2.b.a(b.java:228)
SystemErr     R      at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:242)
SystemErr     R      at com.ibm.jsse2.SSLSocketImpl.h(SSLSocketImpl.java:437)
SystemErr     R      at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:142)
SystemErr     R      at com.ibm.jsse2.SSLSocketImpl.startHandshake(SSLSocketImpl.java:686)
SystemErr     R      at org.apache.commons.net.ftp.FTPSClient.sslNegotiation(FTPSClient.java:240)
SystemErr     R      at org.apache.commons.net.ftp.FTPSClient._connectAction_(FTPSClient.java:171) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:06:09.767

请注意，安全的 FTP 是很模糊的东西。

1.  SFTP 是 SSH 协议的一部分
2.  FTPS 是真正的“FTP 安全”，作为 FTP 协议的扩展

现在有 2 种 FTPS：隐式 (FTPS) 和显式 (FTP/ES)。

*   FTPS 是默认加密的，通常在端口 990 上工作。
*   FTP/ES 连接以常规 FTP（默认端口 21）开始，并通过“START TLS”或“START SSL”FTP 命令显式打开。

所有这些协议之间的混淆导致了很多问题。我想这也是这种情况 - 您可能将“AUTH TLS”发送到需要 SSL 数据的服务器，或者您将 SSL 数据发送到需要“AUTH TLS”的服务器。

可能`client.connect("obuftp.sears.com",990);`会很好...

您可以在[https://en.wikipedia.org/wiki/FTPS阅读更多内容](https://en.wikipedia.org/wiki/FTPS)

# excel - excel单元格需要电子表格单元格显示的数据，而excel只使用输入框中显示的其他数据

> ID：15953224
> 
> 赞同：1
> 
> 时间：2013-04-11T15:45:46.060
> 
> 标签：excel

我从呼叫管理器那里复制了数据。我想使用它在电子表格中显示的数据，即 hh:mm:ss。但是在顶部的输入框中，它显示了其他数据（我认为显示数据记录日期和时间的日期和时间）。当我尝试用来操作电子表格中的 hh:mm:ss 时，它会继续使用输入框中的数据。如何告诉excel使用电子表格中显示的数据并删除输入框中的数据？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:53:27.163

我不知道仅在 excel 中执行此操作的具体方法，但到目前为止我一直在使用的实例是：

1.  复制具有这些值的列并粘贴到记事本中，
2.  在工作表中插入一个新列并将其格式化为`Text`,
3.  从记事本复制所有内容并粘贴到该新列中。

这可能有点尴尬，但它对我有用^_^

# ios - 如何使用 iPhone SSH 进入树莓派？

> ID：15953226
> 
> 赞同：0
> 
> 时间：2013-04-11T15:45:48.293
> 
> 标签：ios, objective-c, xcode, ssh

我喜欢制作一个应用程序来控制我的树莓派。我必须通过 SSH 连接到我的 Pi，我正在使用`ssh pi@192.XXX.X.XX`通过我的 Mac 连接到我的 Pi，之后我必须输入我的 Pi 的密码。我喜欢为我的 iPhone 创建这个，我用`system("ssh pi@192.XXX.X.XX");`SSH 连接到我的 Pi，但显然我必须输入密码，但我不知道如何。有人知道如何将密码包含在`system`命令中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:52:04.447

您可以为此使用 SSH Wrapper 库，例如[libssh2-for-iOS](https://github.com/x2on/libssh2-for-iOS)。它将使您能够使用`connectToHost:port:user:password:error:` `

# android - Android DatePicker 在日历上方显示错误的年份

> ID：15953227
> 
> 赞同：2
> 
> 时间：2013-04-11T15:45:52.313
> 
> 标签：android

我正在尝试创建一个日期选择器片段，但遇到了日历上方的年份没有正确更新的问题。

我遇到的第一个问题是，如果我使用向上/向下年份按钮，片段的标题会更改为“设置日期”，并且日历上方的年份不会更新（日期网格会更新）。

第二个问题是当我用未来或过去的日期打开它时，它在标题和日历上方显示的日期是非常错误的。

展望未来，断点发生在 2037/4/11 和 2038/4/11 之间。虽然我还没有找到确切的日期，但我怀疑潜伏在后台的 32 位 unix 时间以某种方式涉及。

回到过去，但中断发生在 1902/4/11 和 1901/4/11 之间；它与 32 位时间戳的开头不一致，但与跨入 2038 年时看到的无效日期相对应。

这发生在我用于测试的 4.1 平板电脑以及 4.1 和 4.2 AVD 中。屏幕截图是从平板电脑 AVD 中截取的。

在这一点上，我想知道我是否做错了什么，或者在操作系统本身中发现了一个错误。

初始状态，今天加载： ![初始状态，今天加载](https://i.stack.imgur.com/ncHOk.png)

按+年按钮后，日历上方的错误标题年份未更新：
![按+年按钮后](https://i.stack.imgur.com/V9fB0.png)

加载日期为 2037，初始状态良好： ![加载日期为 2037](https://i.stack.imgur.com/AWLBc.png)

加载了 2038 年的日期，注意时间在标题和日历上方回溯到 1902 年： ![加载了 2038 日期](https://i.stack.imgur.com/I7Ebl.png)

加载了 1902 年的日期，没有错： ![装载了 1902 年的日期](https://i.stack.imgur.com/eprj2.png)

加载了 1901 年的日期，注意时间在标题和日历上方向前弯曲到 2037 年： ![装载了 1901 年的日期](https://i.stack.imgur.com/9ikTK.png)

我的片段类：

```
public class DatePickerFragment extends DialogFragment {
    private static int _month = 0;
    private static int _day = 0;
    private static int _year = 0;
    private static int _buttonId = 0;

    public DatePickerFragment(){
    }

    public static final DatePickerFragment newInstance(int buttonId, int year, int month, int day) {
        DatePickerFragment f = new DatePickerFragment();
        _buttonId = buttonId;
        _year = year;
        _month = month;
        _day = day;
        return f;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new DatePickerDialog(getActivity(),  mDateSetListener, _year, _month, _day);
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker view, int year, int month, int day) {
                    //update the control whose press opened the DatePpickerFragment
            Button _button = (Button)getActivity().findViewById (_buttonId);
            if(_button != null) {
                _button.setText(month+1 + "/" + day + "/" + year);
            }
        }
    };
} 
```

以及安装打开片段的按钮处理程序的代码：

```
 Button button = (Button) findViewById(buttonID);

    button.setOnClickListener( new View.OnClickListener() {
        public void onClick(View v) {

            Button button = (Button) v;
            DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT);
            Calendar c = Calendar.getInstance();
            try {
                c.setTime(df.parse(button.getText().toString()));
            } catch (ParseException e) {
                // Do nothing. Calendar defaults to the current date. Use that instead.
            }

            int year = c.get(Calendar.YEAR);
            int month = c.get(Calendar.MONTH);
            int day = c.get(Calendar.DAY_OF_MONTH);

            final DatePickerFragment newFragment = DatePickerFragment.newInstance(button.getId(), year, month, day);
            newFragment.show(getFragmentManager(), "");
        }
    });
} 
```

# sql-server - SSIS 控制流在 sql 任务后停止

> ID：15953233
> 
> 赞同：0
> 
> 时间：2013-04-11T15:46:01.180
> 
> 标签：sql-server, ssis

我有一个带有脚本任务的控制流，它检查文件是否存在，如果它存在，那么它会移动到数据流任务。如果没有找到，那么它会进入一个 SQL 任务，将详细信息写入错误日志，之后它应该移动到下一个文件进行检查。不幸的是，它在更新后停止在 SQL 任务上。

我尝试在 SQL 任务之后更改约束但没有成功。

尽管搜索找不到答案！！！

帮助最受赞赏。谢谢

抱歉，我还不能上传图片，但这里是SkyDrive上图片的 [链接。](http://sdrv.ms/17teFHB)

![对于每个容器](https://i.stack.imgur.com/BQ0Ve.jpg)

我对每个脚本任务都有一个约束，它基本上检查一个包含文件名称的变量，如果找到则运行数据流，如果没有则写入错误。这是一个更大的循环的一部分，该循环查找包含自上次处理以来的时间戳的文件。

虽然我注意到即使第一个文件在那里控制流在数据流之后停止，但现在我很困惑！！！！！！

谢谢

日志：

```
SSIS 包“P76import.dtsx”启动。
信息：进程 P76 调整文件中的 0x4004300A，SSIS.Pipeline：验证阶段开始。
信息：进程 P76 调整文件中的 0x40043006，SSIS.Pipeline：准备执行阶段开始。
信息：进程 P76 调整文件中的 0x40043007，SSIS.Pipeline：预执行阶段开始。
信息：进程 P76 调整文件中的 0x402090DC，P76 调整文件 [368]：文件“C:\Mark\P76\ImportFiles\P76_ADJUSTMENTS_20130408.csv”的处理已开始。
信息：进程 P76 调整文件中的 0x400490F4，查找 [438]：组件“查找”(438) 已缓存 4 行。
信息：进程 P76 调整文件中的 0x400490F5，查找 [438]：组件“查找”(438) 已缓存总共 4 行。
信息：进程 P76 调整文件中的 0x402090E2，查找 [438]：组件“查找”(438) 在缓存中处理了 4 行。处理时间为 0.015 秒。缓存使用了 4208 字节的内存。
信息：进程 P76 调整文件中的 0x4004300C，SSIS.Pipeline：执行阶段开始。
信息：进程 P76 调整文件中的 0x402090DE，P76 调整文件 [368]：为文件“C:\Mark\P76\ImportFiles\P76_ADJUSTMENTS_20130408.csv”处理的数据行总数为 1486。
信息：进程 P76 调整文件中的 0x402090DF，错误表 [176] 中的无效行：“组件“错误表中的无效行”（176）中的数据插入的最终提交已开始。
信息：进程 P76 调整文件中的 0x402090E0，错误表 [176] 中的无效行：“组件“错误表中的无效行”（176）中的数据插入的最终提交已结束。
信息：进程 P76 调整文件中的 0x402090DF，事务表 [411]：“组件“事务表”(411)”中数据插入的最终提交已开始。
信息：进程 P76 调整文件中的 0x402090E0，事务表 [411]：“组件“事务表”(411)”中数据插入的最终提交已结束。
信息：进程 P76 调整文件中的 0x40043008，SSIS.Pipeline：后执行阶段开始。
信息：进程 P76 调整文件中的 0x402090DD，P76 调整文件 [368]：文件“C:\Mark\P76\ImportFiles\P76_ADJUSTMENTS_20130408.csv”的处理已结束。
信息：进程 P76 调整文件中的 0x4004300B，SSIS.Pipeline：“组件“错误表的无效行”（176）”写入了 0 行。
信息：进程 P76 调整文件中的 0x4004300B，SSIS.Pipeline：“组件“事务表”(411)”写入了 1485 行。
信息：进程 P76 调整文件中的 0x40043009，SSIS.Pipeline：清理阶段开始。
SSIS 包“P76import.dtsx”完成：成功。

```

**已回答 - 通过评论** 问题是进入“检查是否有文件”脚本任务的任何约束都没有设置为 True！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-26T10:50:17.137

如果您进行流程 OR 而不是 AND，它将起作用。目前，这两个组件都必须评估为真。如果任何组件评估为真，则 OR 将起作用。右键单击流程并根据图像进行编辑。

![在此处输入图像描述](https://i.stack.imgur.com/qTSzr.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T15:42:04.980

“在 P76 调整文件之后”双击绿色链接，您将在“多个约束”框架中选择第二个单选按钮，即“逻辑或。一旦约束必须评估为真”，您将获得“优先约束编辑器”；你的问题会得到解决。

对剩余的东西做同样的改变......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:42:55.530

您的问题是，您在控制流中有两条通往同一任务的路径，而这根本行不通。

您可以做的是根据是否找到文件来设置一个变量，例如 fileABCfound、true 或 false。然后在流程步骤中，转到属性并为 Disbale 设置一个表达式，如果变量为 false，它将禁用任务。这样做而不是将表达式放在连接器中。这样，如果找不到文件，它将禁用任务并移至下一个。

# c# - 在按键时将焦点放在文本框上

> ID：15953235
> 
> 赞同：2
> 
> 时间：2013-04-11T15:46:06.323
> 
> 标签：c#, microsoft-metro

当用户开始在我的应用程序中的任何位置输入时，我想给文本框焦点。

我的页面继承自 LayoutAwarePage。

这可以实现吗？

编辑：我得到了这个代码：

```
 // In constructor
    Window.Current.CoreWindow.KeyDown += CoreWindow_KeyDown;

    // Somewhere else in class
    void CoreWindow_KeyDown(Windows.UI.Core.CoreWindow sender, Windows.UI.Core.KeyEventArgs args)
    {
        this.setSearchboxFocus((int)args.VirtualKey);
    }

    private void setSearchboxFocus(int keyCode)
    {
        if (keyCode == 38)
            return;

        if (keyCode == 40)
            return;

        if (this.searchBox.FocusState == Windows.UI.Xaml.FocusState.Unfocused)
        {
            this.searchBox.Text = "";
            this.searchBox.Focus(Windows.UI.Xaml.FocusState.Keyboard);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:00:59.667

您可以通过订阅这些事件来处理整个页面的 KeyDown/KeyUp 事件

```
Window.Current.CoreWindow.KeyDown += CoreWindow_KeyDown;
Window.Current.CoreWindow.KeyUp += CoreWindow_KeyUp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T14:18:25.980

对于将来阅读此线程的任何人，这是因为 webview。[我在这里的 msdn 论坛](http://social.msdn.microsoft.com/Forums/en-US/bf4c22cd-77ac-40b1-8585-5799bcacf9d9/how-can-i-get-keyboard-events-if-a-webview-has-focus?forum=winappswithcsharp)上问了一个类似的问题。从 Windows 8.1 开始，webview 被实现为一个单独的窗口，当它有焦点时，它会完全窃取所有键盘输入，而不会将任何键盘输入传递给控制应用程序。如果您能够更改被调用网站中的 HTML，则可以使用 javascript 侦听器在应用程序和 webview 之间传递事件，但我自己没有对此进行测试。不幸的是，目前似乎没有任何其他解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:08:19.997

这样的事情怎么样？

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (!textBox1.Focused)
    {
        textBox1.Focus();
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T16:15:22.660

这可能会有所帮助

```
private void Form1_KeyPress(object sender, KeyPressEventArgs e)
{
 textBox1.Focus();//sets focus to textBox1 when user presses a key on form
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T17:00:51.067

怎么样，在 Windows.UI.Xaml.Controls.Page 上：

```
 protected override void OnKeyDown(KeyRoutedEventArgs e)
    {
        textBox1.Focus(Windows.UI.Xaml.FocusState.Keyboard);
        base.OnKeyDown(e);
    } 
```

# javascript - AngularJS：自定义迭代/数据转换和分组......当简单的 ng-repeat 不会削减它

> ID：15953236
> 
> 赞同：2
> 
> 时间：2013-04-11T15:46:08.547
> 
> 标签：javascript, loops, angularjs, angularjs-directive, angularjs-ng-repeat

这个问题仍然[是 Angular.js 更复杂的条件循环](https://stackoverflow.com/q/15943193/301596)，但我觉得问题的答案是正确的，所以我接受了它。

因此，让我比我在原始问题中所做的详细说明。

我试图得到这个

```
<h3>11.4.2013</h3>
<ul>
 <li>oofrab | 4 | 11.4.2013 14:55 <button>remove</button></li>
 <li>raboof | 3 | 11.4.2013 13:35 <button>remove</button></li>
</ul>

<h3>10.4.2013</h3>
<ul>
 <li>barfoo | 2 | 10.4.2013 18:10 <button>remove</button></li>
 <li>foobar | 1 | 10.4.2013 12:55 <button>remove</button></li> 
</ul> 
```

从这个数据结构

```
[
    {
        "id": 4,
        "name": "oofrab",
        "date": "2013-11-04 14:55:00"
    },
    {
        "id": 3,
        "name": "raboof",
        "date": "2013-11-04 13:55:00"
    },
    {
        "id": 2,
        "name": "barfoo",
        "date": "2013-10-04 18:10:00"
    },
    {
        "id": 1,
        "name": "foobar",
        "date": "2013-10-04 12:55:00"
    }
] 
```

`ng-repeat`基本上，我想添加的标准之外的唯一额外内容是那些标题。而且我简直不敢相信我必须通过添加它们来解决这么多问题。

这就是我最终使用我在第一个问题中得到的答案[http://plnkr.co/edit/Zl5EcsiXXV92d3VH9Hqk?p=preview](http://plnkr.co/edit/Zl5EcsiXXV92d3VH9Hqk?p=preview)

*请注意，实际上最多可以有 400 个条目。而且我需要能够即时添加/删除/编辑条目*

plunker 上的例子是这样的：

**遍历原始数据，创建一个看起来像这样的新数据结构**

```
{
  "2013-10-05": [
    {
      "id": 4,
      "name": "oofrab",
      "date": "2013-10-05 14:55:00",
      "_orig_index": 0
    },
    {
      "id": 3,
      "name": "raboof",
      "date": "2013-10-05 13:55:00",
      "_orig_index": 1
    }
  ],
  "2013-10-04": [
    {
      "id": 2,
      "name": "barfoo",
      "date": "2013-10-04 18:10:00",
      "_orig_index": 2
    },
    {
      "id": 1,
      "name": "foobar",
      "date": "2013-10-04 12:55:00",
      "_orig_index": 3
    }
  ]
} 
```

**允许我通过这样做得到我想要的结果**

```
<div ng-repeat="(date,subItems) in itemDateMap">
<h3>{{date}}</h3>
<ul>
  <li ng-repeat="item in subItems">
    {{item.name}} | {{item.id}} | {{item.date}}
    <button type="button" ng-click="removeItem(item._orig_index)">x</button>
  </li>
</ul>  
</div> 
```

伟大的。但它伴随着大量问题的代价。每次添加新项目我都必须重建`itemDateMap`，每次删除项目我都必须重建`itemDateMap`，每次更改日期时，我都必须重建`itemDateMap`。当我想删除一个项目时，我必须首先获取其原始参考的索引。每次`itemDateMap`重建时，都会重新渲染整个事物。而且它不能被排序，因为它是一个对象而不是一个数组。

当有几百个条目时，它也会变得非常非常慢。我在某处读到 ng-repeat 非常聪明，可以观察值，在 dom 中移动点头，而不是重新渲染所有内容，但是当我重建整个结构时，它肯定不会以这种方式工作。

这不可能是对的，做一件非常非常简单的事情会很麻烦..

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:50:53.303

这是我的建议 - 只使用一种结构，并且只将一种结构暴露给范围（地图）。并创建一个函数来向地图添加一个项目数组，以及一个将地图转换为数组的函数（我假设您需要这个数组来进行服务器通信或其他东西）。

```
 var toKey=function(item){
    return moment(item.date).format("YYYY-MM-DD");
  }

  $scope.itemDateMap = {};
  $scope.addItemToDateMap=function(item){
    var key = toKey(item);
    if(!$scope.itemDateMap[key]){
      $scope.itemDateMap[key] = [];
    }
    $scope.itemDateMap[key].push(item);    
  }

  $scope.removeItemFromDateMap=function(item){
    var key = toKey(item), subitems = $scope.itemDateMap[key];
    var index = subitems.indexOf(item);
    subitems.splice(index,1);
    if(subitems.length === 0){
      delete $scope.itemDateMap[key];
    }
  }

  var addArrayToMap = function(items){
    for(var i=0; i<items.length; i++){
      var item = items[i]; 
      $scope.addItemToDateMap(item);
    }
  };

  $scope.mapToArray = function(){
    var items = [];
    for(var key in $scope.itemDateMap){
      var subitems = $scope.itemDateMap[key];
      for(var j=0;j<subitems.length;j++){
        var item = subitems[j];
        items.push(item);
      }
    }
    return items;
  } 
```

我已经[用我的建议更新了你的 plnkr](http://plnkr.co/edit/6YoFZzQoMmXkgznvRvvS?p=preview)。我认为它的表现相当不错。

哦 - 我刚刚注意到你想要它排序 - 我没有时间更新我的示例，但它不是很复杂。改为使用此结构（带有数组的对象的数组，而不是带有数组的对象） - 这样您就可以在根数组上使用 orderBy:'date'：

```
[
{
  date:"2013-10-05",
  items: [
    {
      "id": 4,
      "name": "oofrab",
      "date": "2013-10-05 14:55:00"
    },
    {
      "id": 3,
      "name": "raboof",
      "date": "2013-10-05 13:55:00"
    }
  ]
},
{
date:"2013-10-04",
items: [
    {
      "id": 2,
      "name": "barfoo",
      "date": "2013-10-04 18:10:00"
    },
    {
      "id": 1,
      "name": "foobar",
      "date": "2013-10-04 12:55:00"
    }
  ]
}
] 
```

# c# - 在 LINQ 中构建自定义|渐进式查询？

> ID：15953237
> 
> 赞同：0
> 
> 时间：2013-04-11T15:46:09.813
> 
> 标签：c#, asp.net, linq

我有一个包含五个文本框的页面，每个文本框代表我的数据库表中的一个字段和一个搜索按钮： ![在此处输入图像描述](https://i.stack.imgur.com/hJfLo.jpg)

如果我使用 SQL，我可以根据哪些字段中有数据来构建我的 SQL 语句。

但是，我想使用 LINQ，但我不知道如何做到这一点。例如，看看下面的查询：

```
 var db = new BookDBDataContext();

        var q =
            from a in db.Books
            where a.Title.Contains(txtBookTitle) &&
                  a.Author.Contains(txtAuthor) &&
                  a.Publisher.Contains(txtPublisher)
            select a.ID; 
```

上面的查询将返回所有字段匹配表中数据的数据。但是，如果用户没有在 txtAuthor 字段中输入作者怎么办？如果我将其构建为查询字符串，我可以检查每个字段的数据并将其添加到查询字符串中。由于这是 LINQ，我似乎无法动态更改搜索条件。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:50:25.967

```
 var db = new BookDBDataContext();

 var q = (from a in db.Books
          where a.Title.Contains(txtBookTitle));

 if(!String.IsNullOrEmpty(txtAuthor)) 
 {
      q = q.Where(a => a.Author.Contains(txtAuthor));
 }

 if(!String.IsNullOrEmpty(txtAuthor)) 
 {
      q = q.Where(a => a.Publisher.Contains(txtPublisher));
 }

 var id = q.Select(a => a.ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:52:29.537

```
from a in db.Books
  where (string.isNullorWhiteSpace(search) || a.Title.Contains(search)) &&
        (string.isNullorWhiteSpace(txtAuthor) || a.Author.Contains(txtAuthor) ) &&
        (string.isNullorWhiteSpace(txtPublisher) || a.Publisher.Contains(txtPublisher))
select a.ID; 
```

# vb.net - XNA模型翻译很奇怪

> ID：15953239
> 
> 赞同：0
> 
> 时间：2013-04-11T15:46:15.467
> 
> 标签：vb.net, 3d, xna, camera

使用时`Matrix.CreateTranslation(x,y,z)`我得到奇怪的结果。我使用固定值进行了测试，一次一个变量，并确定了以下内容：

*   更改 X 坐标时，模型从左上角移动到右下角。

*   更改 Y 坐标时，模型会按应有的方式上下移动。

*   我不打算改变 Z 坐标，但由于我的程序的性质，我无法弄清楚它到底做了什么。

我画了我的模型。旋转工作正常。我正在以正确的顺序进行翻译（至少我认为）`scale * rotation * translation`：.

我认为问题出在我的相机设置上，但我不知道到底是什么问题。我正在尝试创建一个自上而下的 RTS 相机。

这是我的相机设置：

```
campos = new Vector3(5000.0F, 5000.0F, 5000.0F)
effect.View = Matrix.CreateLookAt(campos, Vector3.Down, Vector3.Up) 
```

我可以根据需要提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:09:08.067

[Matrix.CreateLookAt](http://msdn.microsoft.com/en-us/library/bb195650.aspx)的第二个参数不是相机面对的方向，而是目标点。

如果您试图让相机向下看，请使用

```
Matrix.CreateLookAt(campos, campos + Vector3.Down, Vector3.Forward) 
```

这将告诉相机始终注视相机下方一个单位的点。

您的翻译可能效果不佳，因为相机没有看到您想要的点，因此看起来模型正在对角线移动。

# wpf - 在 ListView 的每一行中包含相同的 ComboBox

> ID：15953242
> 
> 赞同：0
> 
> 时间：2013-04-11T15:46:20.340
> 
> 标签：wpf, xaml

我正在用 XAML 设计一个 WPF 应用程序。我有一个包含 GridView 的 ListView；每个列表项对应一个公共汽车站。每个公共汽车站都属于一个“区域”，当我的应用程序运行时，它的列表是动态获取的。对于列表中的每一行，我想显示一个 ComboBox，其中填充了区域列表，用户可以使用它来将每个站点排序到适当的区域。

我知道如果区域列表是静态的，我该怎么做：只需在 GridViewColumn.CellTemplate 中定义 ComboBox 并在 XAML 中填充 ComboBox。但是，由于列表是动态的，我是否需要使用数据绑定来连接它，或者是否有更简单的方法可以使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:16:19.613

也许你应该有一个`public ObservableCollection<Zone> Zones{get;set;}`并且你可以将你的组合框绑定到 Zones 属性。

我希望这有帮助。

# asp.net-mvc-3 - Razor、ASP.Net、用户身份验证

> ID：15953243
> 
> 赞同：1
> 
> 时间：2013-04-11T15:46:21.813
> 
> 标签：asp.net-mvc-3, razor

我想知道为什么如下：

```
 @if(Request.LogonUserIdentity.IsAnonymous){
                <ul id="menu">
                    <li>@Html.ActionLink("Location", "Index", "Location")</li>
                    <li>@Html.ActionLink("Map", "Map", "Home")</li>
                    <li>@Html.ActionLink("Help", "Help", "Home")</li>
                </ul>
             @}else if(Request.LogonUserIdentity.IsAuthenticated){
                <ul id="menu">
                    <li>@Html.ActionLink("Location", "Index", "Location")</li>
                    <li>@Html.ActionLink("Service", "Index", "Service")</li>
                    <li>@Html.ActionLink("Service Assignment", "Index", "ServiceAssignment")</li>
                    <li>@Html.ActionLink("Content Management", "Index", "Content")</li>
                </ul>
             @} 
```

抛出以下错误：

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS1501：方法 'Write' 没有重载需要 0 个参数

`else if`这个错误是在我的块上抛出的。我是 ASP.net 和 razor 的新手，但据我了解，我所做的是正确的，不是吗？因为它们都是布尔返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:49:57.987

您的剃刀语法错误。您应该用 the 包围整个 if/else if 块，`@{}`并从 if/else 分支的各个右大括号中删除 @ 符号。

```
@{
    if (Request.LogonUserIdentity.IsAnonymous)
    {
        <ul id="menu">
            <li>@Html.ActionLink("Location", "Index", "Location")</li>
            <li>@Html.ActionLink("Map", "Map", "Home")</li>
            <li>@Html.ActionLink("Help", "Help", "Home")</li>
        </ul>
    }
    else if (Request.LogonUserIdentity.IsAuthenticated)
    {
        <ul id="menu">
            <li>@Html.ActionLink("Location", "Index", "Location")</li>
            <li>@Html.ActionLink("Service", "Index", "Service")</li>
            <li>@Html.ActionLink("Service Assignment", "Index", "ServiceAssignment")</li>
            <li>@Html.ActionLink("Content Management", "Index", "Content")</li>
        </ul>
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:53:34.733

我认为您不需要 else if 中的“@”。

试试这样：

```
 @if(Request.LogonUserIdentity.IsAnonymous){
           <ul id="menu">
                <li>@Html.ActionLink("Location", "Index", "Location")</li>
                <li>@Html.ActionLink("Map", "Map", "Home")</li>
                <li>@Html.ActionLink("Help", "Help", "Home")</li>
            </ul>
        }else if(Request.LogonUserIdentity.IsAuthenticated){
           <ul id="menu">
                <li>@Html.ActionLink("Location", "Index", "Location")</li>
                <li>@Html.ActionLink("Service", "Index", "Service")</li>
                <li>@Html.ActionLink("Service Assignment", "Index", "ServiceAssignment")</li>
                <li>@Html.ActionLink("Content Management", "Index", "Content")</li>
            </ul>
        } 
```

# background - Hotmail 不显示 html 或 css 背景

> ID：15953246
> 
> 赞同：0
> 
> 时间：2013-04-11T15:46:35.433
> 
> 标签：background, background-image, newsletter, hotmail

我在大多数电子邮件客户端（例如 GMail 或 Yahoo Mail）中没有显示背景的问题，但我发现[这个线程](https://stackoverflow.com/questions/8015515/background-image-css-inside-an-html-email-gmail-does-not-support)和问题通过替换（尽管我丢失了一些属性，如背景重复和位置）`<table style="background: url('bg.png');">`解决了`<table background="bg.png">`。

但是现在我在**Hotmail**中遇到了同样的问题，并且上述形式的代码似乎都不起作用。

[该页面](http://www.campaignmonitor.com/css/)是stackoverflow中大多数类似问题的答案的参考，它说Outlook.com（新hotmail）不支持css背景，我应该改用`background`属性，但我的不工作。

我做错了什么？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:37:05.160

Outlook 仅支持 body 标记中的背景。

电子邮件背景的两种方法：

通过 VML：[emailbg.net](http://emailbg.net/)

或者这里是不那么花哨的方式：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
</head>
<body style="margin: 0px; padding: 0px; background-image: url('http://lorempixel.com/100/100/food/'); background-color: #252525; background-repeat: repeat-y no-repeat; background-position: top left;" bgcolor="#252525">
<!-- BODY FAKE PANEL -->
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" background="http://lorempixel.com/100/100/food/">
  <tr>
    <td valign="top">
<!-- CENTER FLOAT -->
      <table width="600" height="800" border="0" valign="top" align="center" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
        <tr>
          <td align="center">
Center panel
          </td>
        </tr>
      </table>
<!-- /CENTER FLOAT -->
    </td>
  </tr>
</table>
<!-- /BODY FAKE PANEL -->
</body>
</html> 
```

# git - git 添加远程子模块

> ID：15953250
> 
> 赞同：0
> 
> 时间：2013-04-11T15:46:57.353
> 
> 标签：git, git-submodules

我在 git 远程存储库中有一个子模块。我在创建远程子模块之前克隆了存储库。

# 如何添加远程存储库的子模块？

我尝试了以下方法：

```
$ git submodule init
$ git submodule update 
```

和

```
$ git submodule update --init --recursive 
```

但是这些命令都不起作用——没有 .gitmodules 文件。

遥控器有一个`.gitmodules`包含有关子模块信息的文件。在远程存储库中：

```
$ git submodule
+79444cf2aaa9279b4838f52b81cc40ad3f116771 Appendix 
```

该`.gitmodules`文件已添加到存储库中，如下所示：

```
$ git status .gitmodules
# On branch master
nothing to commit (working directory clean) 
```

如果`.gitmodules`没有提交，这个命令会声明它是未跟踪的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:13:57.243

看起来该`.gitmodules`文件在您的本地存储库中尚不存在。确保此文件已在远程存储库中提交，并且您已将此提交拉到本地存储库。

# c++ - 使用 googlemock 时的 SEH 异常

> ID：15953255
> 
> 赞同：9
> 
> 时间：2013-04-11T15:47:04.627
> 
> 标签：c++, googlemock

我开始将 googlemock 与 googletest 一起使用，但遇到了我无法弄清楚的 SEH 异常。

错误信息是：

```
unknown file: error: SEH exception with code 0xc0000005 thrown in the test body. 
```

我已经阅读了一些关于 SO 和其他地方的类似问题，但还没有为这样一个简单的例子找到答案。

即这发生在我的真实代码上，但我也在下面非常简单的示例中重现了错误。我正在使用 MSVC2008 构建。

重现错误的代码：

```
#include "gtest/gtest.h"
#include "gmock/gmock.h"

#include <iostream>

using testing::Exactly;

class Production
{
public:
    virtual ~Production() {};
    virtual void fn() = 0;
};

class ProductionCode : public Production
{
public:
    virtual ~ProductionCode() {};
    void fn() 
    {
        std::cout << "CALLED ProductionCode::fn" << std::endl;
    }
};

class MockProduction : public Production
{
public:
    virtual ~MockProduction() {};
    MOCK_METHOD0(fn, void());
};

class ProductionUser
{
public:
    void methodUnderTest(Production *p)
    {
        p->fn();
    }
};

TEST(ProductionTest, CallTheProductionFunction) {
    ProductionCode p;

    ASSERT_NO_THROW( p.fn() );
}

TEST(ProductionTest, CallTheMethodUnderTest) {
    Production* p = new ProductionCode;
    ProductionUser u;

    ASSERT_NO_THROW( u.methodUnderTest(p) );

    delete p;
}

TEST(ProductionTest, CallTheMethodUnderTestWithMock) {
    MockProduction m;

    EXPECT_CALL(m, fn())
        .Times(Exactly(1));

    ProductionUser u;
    ASSERT_NO_THROW(u.methodUnderTest(&m));
} 
```

我从控制台的测试输出：

```
[==========] Running 3 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 3 tests from ProductionTest
[ RUN      ] ProductionTest.CallTheProductionFunction
CALLED ProductionCode::fn
[       OK ] ProductionTest.CallTheProductionFunction (4 ms)
[ RUN      ] ProductionTest.CallTheMethodUnderTest
CALLED ProductionCode::fn
[       OK ] ProductionTest.CallTheMethodUnderTest (2 ms)
[ RUN      ] ProductionTest.CallTheMethodUnderTestWithMock
unknown file: error: SEH exception with code 0xc0000005 thrown in the test body.

[  FAILED  ] ProductionTest.CallTheMethodUnderTestWithMock (0 ms)
[----------] 3 tests from ProductionTest (10 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 1 test case ran. (13 ms total)
[  PASSED  ] 2 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] ProductionTest.CallTheMethodUnderTestWithMock

 1 FAILED TEST

.\simple.cpp(59): ERROR: this mock object (used in test ProductionTest.CallTheMe
thodUnderTestWithMock) should be deleted but never is. Its address is @000000000
014F800.
ERROR: 1 leaked mock object found at program exit.
Press any key to continue . . . 
```

我正在使用自己的主要功能如下：

```
#include "gtest/gtest.h"
#include "gmock/gmock.h"

int main(int argc, char** argv) {
    // The following line must be executed to initialize Google Mock
    // (and Google Test) before running the tests.
    ::testing::InitGoogleMock(&argc, argv);
    return RUN_ALL_TESTS();
} 
```

我猜我在这里犯了一个非常基本的错误，谁能看到我哪里出错了？谢谢！

[原始编辑以使代码和控制台输出匹配]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-12T13:59:11.090

我认为您可以强制 gtest 不要掩盖确切的异常（可以使用以下代码完成的操作：

```
::testing::GTEST_FLAG(catch_exceptions) = false; 
```

或从命令行相同）如果然后你使用调试器，你很容易得到堆栈。或者即使你不这样做，我希望*nix-like OS 来编写核心文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-10T07:58:25.027

当我将 gmock 编译为**DLL**并将其链接到另一个项目中时，我遇到了同样的问题。经过大量尝试，我发现原因是：

**您必须在相同的配置中编译 gmock 和您的项目！**

这意味着你必须在 DEBUG(RELEASE) 配置中编译 gmock，如果你想在 DEBUG(RELEASE) 模式下链接它。如果没有，则

**未知文件：错误：SEH 异常，代码为 0xc0000005 在测试主体中引发。**

总是发生。

我希望我的经验可以帮助你，虽然你可能会在不同的场景中遇到这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-11T19:48:16.837

我收到此错误是因为我取消了对空指针的引用。

# javascript - 表格计算问题

> ID：15953256
> 
> 赞同：3
> 
> 时间：2013-04-11T15:47:10.877
> 
> 标签：javascript, jquery

这是更长表格的一小部分（为清楚起见，添加了粉色、绿色和黄色框/箭头）：

**原来的：** ![在此处输入图像描述](https://i.stack.imgur.com/UnPKs.png)

**标记：** ![在此处输入图像描述](https://i.stack.imgur.com/oWPvq.jpg)

基本上 - 当数字输入季度 - >检查（粉红色框）时，值自动求和并自动填充只读字段“总现金”（这已经在工作）。然后，一旦“已支付的退款”字段输入了一个值（包括零），它会自动与“总现金”相加并填充“最终总计”字段 - 这对于每一列都是独立的。那行得通——但我希望我不必强迫用户在已支付的退款中输入一个值，除非有一个值。最后 - 我还需要“存款”和“经理站”列中的“最终总计”来自动汇总到“存款总额”这似乎根本不起作用......

最后 - 我试图实现一个按钮来重新计算所有总数，然后再单击“提交”将其转换为 PDF - 我也被难住了。具有名称和 ID `calc`- 我愿意接受任何最佳实践解决方案。我非常乐意进行大量修改 - 作为一个新手，其中很多都采用“我的裤子座位”编码。

我对 Javascript 和 JQuery 非常陌生 - 所以请温柔一点？下面的代码（与此问题相关的部分，无论如何）：

**HTML**

```
<tr>
    <td class="label" colspan="4">Deposit / Safe / Manager Station Count</td>
</tr>
<tr>
    <td class="null"></td>
    <td class="label">Deposit</td>
    <td class="label">Manager Station</td>
    <td class="label">Safe</td>
</tr>
<tr>
    <td class="label">Quarters</td>
    <td class="field"><input type="text" name="depQuarters" class="dep" tabindex="31" /></td>
    <td class="field"><input type="text" name="manQuarters" class="man" tabindex="41" /></td>
    <td class="field"><input type="text" name="safeQuarters" class="safe" tabindex="51" /></td>
</tr>
<tr>
    <td class="label">Coins</td>
    <td class="field"><input type="text" name="depCoins" class="dep" tabindex="32" /></td>
    <td class="field"><input type="text" name="manCoins" class="man" tabindex="42" /></td>
    <td class="field"><input type="text" name="safeCoins" class="safe" tabindex="52" /></td>
</tr>
<tr>
    <td class="label">$1 Bills</td>
    <td class="field"><input type="text" name="dep1Bills" class="dep" tabindex="33" /></td>
    <td class="field"><input type="text" name="man1Bills" class="man" tabindex="43" /></td>
    <td class="field"><input type="text" name="safe1Bills" class="safe" tabindex="53" /></td>
</tr>
<tr>
    <td class="label">$5 Bills</td>
    <td class="field"><input type="text" name="dep5Bills" class="dep" tabindex="34" /></td>
    <td class="field"><input type="text" name="man5Bills" class="man" tabindex="44" /></td>
    <td class="field"><input type="text" name="safe5Bills" class="safe" tabindex="54" /></td>
</tr>
<tr>
    <td class="label">$10 Bills</td>
    <td class="field"><input type="text" name="dep10Bills" class="dep" tabindex="35" /></td>
    <td class="field"><input type="text" name="man10Bills" class="man" tabindex="45" /></td>
    <td class="field"><input type="text" name="safe10Bills" class="safe" tabindex="55" /></td>
</tr>
<tr>
    <td class="label">$20 Bills</td>
    <td class="field"><input type="text" name="dep20Bills" class="dep" tabindex="36" /></td>
    <td class="field"><input type="text" name="man20Bills" class="man" tabindex="46" /></td>
    <td class="field"><input type="text" name="safe20Bills" class="safe" tabindex="56" /></td>
</tr>
<tr>
    <td class="label">$50 Bills</td>
    <td class="field"><input type="text" name="dep50Bills" class="dep" tabindex="37" /></td>
    <td class="field"><input type="text" name="man50Bills" class="man" tabindex="47" /></td>
    <td class="field"><input type="text" name="safe50Bills" class="safe" tabindex="57" /></td>
</tr>
<tr>
    <td class="label">$100 Bills</td>
    <td class="field"><input type="text" name="dep100Bills" class="dep" tabindex="38" /></td>
    <td class="field"><input type="text" name="man100Bills" class="man" tabindex="48" /></td>
    <td class="field"><input type="text" name="safe100Bills" class="safe" tabindex="58" /></td>
</tr>
<tr>
    <td class="label">Checks</td>
    <td class="field"><input type="text" name="depChecks" class="dep" tabindex="39" /></td>
    <td class="field"><input type="text" name="manChecks" class="man" tabindex="49" /></td>
    <td class="field"><input type="text" name="safeChecks" class="safe" tabindex="59" /></td>
</tr>
<tr>
    <td class="label">Total Cash</td>
    <td class="field"><input type="text" name="depTotal" id="depTotal" class="depFinalFactor" readonly /></td>
    <td class="field"><input type="text" id="manTotal" name="manTotal" class="manFinalFactor" readonly /></td>
    <td class="field"><input type="text" id="safeTotal" name="safeTotal" class="safeFinalFactor" readonly /></td>
</tr>
<tr>
    <td class="label">Refunds Paid In</td>
    <td class="field"><input type="text" name="depRefunds" id="depRef" class="depFinalFactor" tabindex="40" /></td>
    <td class="field"><input type="text" name="manRefunds" tabindex="50" class="manFinalFactor" /></td>
    <td class="field"><input type="text" name="safeRefunds" tabindex="60" class="safeFinalFactor" /></td>
</tr>
<tr>
    <td class="label">Final Total</td>
    <td class="field"><input type="text" name="depFinalTotal" id="depFinalTotal" readonly /></td>
    <td class="field"><input type="text" name="manFinalTotal" id="manFinalTotal" readonly /></td>
    <td class="field"><input type="text" name="safeFinalTotal" id="safeFinalTotal" readonly /></td>
</tr>
<tr>
    <td class="null" colspan="2"></td>
    <td class="label">Total to Deposit</td>
    <td class="field" id="totalToDeposit"></td>
</tr>
</table>
<input type="button" name="calc" id="calc" value="Recalculate Totals" />
<input style="float: right;" type="submit" name="btn_submit" />
</form>
</body>
</html> 
```

**Javascript/JQuery**

```
$(document).ready(function(){

    //iterate through each textboxes and add keyup
    //handler to trigger sum event

    $(".accXPT1").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".accXPT1", "#accXPT1Total");
        });
    });
    $(".accXPT2").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".accXPT2", "#accXPT2Total");
        });
    });
    $(".accXPT3").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".accXPT3", "#accXPT3Total");
        });
    });

    $(".dispXPT1").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".dispXPT1", "#dispXPT1Total");
        });
    });
    $(".dispXPT2").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".dispXPT2", "#dispXPT2Total");
        });
    });
    $(".dispXPT3").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".dispXPT3", "#dispXPT3Total");
        });
    });

    $(".dep").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".dep", "#depTotal");
        });         
    });
    $(".man").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".man", "#manTotal");
        });
    });
    $(".safe").each(function() {
        $(this).keyup(function(){
            calculateSumForInput(".safe", "#safeTotal");
        });
    });

    $(".depFinalFactor").keyup(function() {
        var sum = 0;

        $(".depFinalFactor").each(function() {
        //add only if the value is number
            if(!isNaN(this.value) && this.value.length!=0) {
                sum += parseFloat(this.value);
            }
        });     

        mySum = sum.toFixed(2);

        if (mySum == $("#moneyAccountedFor").val()) {
            $("#totalToDeposit").css("color", "green");
        } else {
            $("#totalToDeposit").css("color", "red");
        }

        $("#depFinalTotal").val(mySum);
        $("#totalToDeposit").text(mySum);
    });

    $("#calc").on("click", function() {
        var sum = 0;

        $(".depFinalFactor").each(function() {
        //add only if the value is number
            if(!isNaN(this.value) && this.value.length!=0) {
                sum += parseFloat(this.value);
            }
        });     

        mySum = sum.toFixed(2);

        if (mySum == $("#moneyAccountedFor").val()) {
            $("#totalToDeposit").css("color", "green");
        } else {
            $("#totalToDeposit").css("color", "red");
        }

        $("#depFinalTotal").val(mySum);
        $("#totalToDeposit").text(mySum);
    });

    $(".manFinalFactor").keyup(function() {
        var sum = 0;

        $(".manFinalFactor").each(function() {
        //add only if the value is number
            if(!isNaN(this.value) && this.value.length!=0) {
                sum += parseFloat(this.value);
            }
        });     

        mySum = sum.toFixed(2);
        $("#manFinalTotal").val(mySum);
    });

    $(".safeFinalFactor").keyup(function() {
        var sum = 0;

        $(".safeFinalFactor").each(function() {
        //add only if the value is number
            if(!isNaN(this.value) && this.value.length!=0) {
                sum += parseFloat(this.value);
            }
        });     

        mySum = sum.toFixed(2);
        $("#safeFinalTotal").val(mySum);
    });

});

function calculateSum(myClass, myID) {

    var sum = 0;
    //iterate through each textboxes and add the values
    $(myClass).each(function() {

        //add only if the value is number
        if(!isNaN(this.value) && this.value.length!=0) {
            sum += parseFloat(this.value);
        }

    });
    //.toFixed() method will roundoff the final sum to 2 decimal places
    myTotal = sum.toFixed(2);
    $(myID).text(myTotal);
}

function calculateSumForInput(myClass, myID) {

    var sum = 0;
    //iterate through each textboxes and add the values
    $(myClass).each(function() {

        //add only if the value is number
        if(!isNaN(this.value) && this.value.length!=0) {
            sum += parseFloat(this.value);
        }

    });
    //.toFixed() method will roundoff the final sum to 2 decimal places
    myTotal = sum.toFixed(2);
    $(myID).val(myTotal);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:25:27.070

> 那行得通——但我希望我不必强迫用户在已支付的退款中输入一个值，除非有一个值。

这一切都是你想要的吗？试试下面的代码

1/ 添加这个功能

```
 function showAllTotal(){
                    var sum = 0;

                    $(".depFinalFactor").each(function() {
                    //add only if the value is number
                        if(!isNaN(this.value) && this.value.length!=0) {
                            sum += parseFloat(this.value);
                        }
                    });     

                    mySum = sum.toFixed(2);

                    if (mySum == $("#moneyAccountedFor").val()) {
                        $("#totalToDeposit").css("color", "green");
                    } else {
                        $("#totalToDeposit").css("color", "red");
                    }

                    $("#depFinalTotal").val(mySum);
                    $("#totalToDeposit").text(mySum);
                } 
```

2/ 修改某处：将上述函数添加到每个事件

```
 $(".dep").each(function() {
                    $(this).keyup(function(){
                        calculateSumForInput(".dep", "#depTotal");
                        showAllTotal();
                    });         
                });
                $(".man").each(function() {
                    $(this).keyup(function(){
                        calculateSumForInput(".man", "#manTotal");
                        showAllTotal();
                    });
                });
                $(".safe").each(function() {
                    $(this).keyup(function(){
                        calculateSumForInput(".safe", "#safeTotal");
                        showAllTotal();
                    });
                }); 
```

3/ 将“$(".depFinalFactor").keyup(function()" 处的函数替换为以下

```
 $(".depFinalFactor").keyup(function() {
                    showAllTotal();
            }); 
```

我所做的是将汇总总值的函数移动到一个函数中，并且每次用户开始在表中的一个字段上输入数字时我都会重用它。全部在您的代码中，仅此而已！

编辑：我也在小提琴上更新了你的代码。

# iphone - UIView 图层阴影在旋转后变暗

> ID：15953262
> 
> 赞同：0
> 
> 时间：2013-04-11T15:47:25.790
> 
> 标签：iphone, ios, objective-c, ipad, uiviewcontroller

我有一个 UIView 用作标题，并且我已向该视图应用了阴影。它按照我的意图出现在屏幕上，但是在旋转之后，阴影变得暗了两倍，就好像它被重新绘制在自身之上一样。随后的旋转使其更暗。这是标题和阴影的代码：

```
self.header = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, HEADER_HEIGHT)];
self.header.backgroundColor = [UIColor whiteColor];
self.header.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleWidth;

// Drop shadow.
self.header.layer.shadowColor = [UIColor blackColor].CGColor;
self.header.layer.shadowOpacity = 0.5;
self.header.layer.shadowRadius = 2.0;
self.header.layer.shadowOffset = CGSizeMake(0, 2);
//        self.header.layer.shouldRasterize = YES;
//        self.header.layer.rasterizationScale = [UIScreen mainScreen].scale; 
```

这段代码都发生在我的View Controller的viewWillLayoutSubviews中，在方法的开头调用了[super willLayoutSubviews]。我尝试将相同的代码放在 viewWillAppear:animated 中无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:47:25.790

在写出这个问题时，我想出了解决方案。每次调用 viewWillLayout 子视图时，我都在重新初始化标题。除了效率低下之外，这也导致阴影由于某种原因而被自身覆盖。我通过在 loadView 中初始化所有视图并在 viewWillLayoutSubviews 中进行框架设置来解决此问题。这解决了问题，并且更好，因为我没有重新初始化已经存在的对象。

# r - 对于 R，我们在 Python 中使用的“in”命令的替代方法是什么？

> ID：15953265
> 
> 赞同：1
> 
> 时间：2013-04-11T15:47:33.850
> 
> 标签：r, if-statement, vector

假设我在 R 中有一个数字向量。我想看看向量中是否存在特定整数。我们可以在 python 中使用“in”命令轻松地做到这一点，并且可以使用 if 语句。

我们在 R 中也有类似的东西吗？这样我就不必使用 for 循环来检查我想要的整数是否存在于向量中？我尝试了以下方法，但似乎不起作用。'normal' 是一个数据框，第二列有整数。

```
if (12069692 in normal[,2]) {print("yes")} 
```

说，

```
Error: unexpected 'in' in "if (12069692 in" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T15:48:51.683

在 R 中，它被称为`%in%`：

```
> 1 %in% c(1, 2, 3)
[1] TRUE
> 4 %in% c(1, 2, 3)
[1] FALSE 
```

它在左侧矢量化，因此您可以一次检查多个值：

```
> c(1, 4, 2, 1) %in% c(1, 2, 3)
[1]  TRUE FALSE  TRUE  TRUE 
```

（帽子提示@Spacedman）

# c# - Windows Phone - 打开时启动网站

> ID：15953270
> 
> 赞同：0
> 
> 时间：2013-04-11T15:47:51.773
> 
> 标签：c#, windows-phone-7, windows-phone-8

我正在尝试在打开应用程序时加载网站，但是当我点击构建时出现 7 个错误。有人可以帮我弄这个吗？当前代码是：

```
using Microsoft.Phone.Tasks;

namespace Microsoft.Phone.Tasks
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        Loaded += new RoutedEventHandler(MainPage_Loaded);
        {
            WebBrowserTask wbtask = new WebBrowserTask();
            wbtask.Url = "http://google.com";
            wbtask.Show();
         }
    }
} 
```

欣赏你能提出的任何建议。我在主页上没有网络浏览器控件，这可能是问题吗？我不想要任何东西，我只希望用户打开应用程序并立即打开网站......就像书签一样。

对不起，这是我的第一个项目，所以放轻松。

输出的错误是：

1>C:\Users\Dan\Documents\Visual Studio 2012\Projects\HTC elevate\HTC elevate\MainPage.xaml.cs(25,16,25,18): error CS1519: Invalid token '+=' in class,结构或接口成员声明 1>C:\Users\Dan\Documents\Visual Studio 2012\Projects\HTC elevate\HTC elevate\MainPage.xaml.cs(25,23,25,41): 错误 CS1520: Method must have返回类型 1>C:\Users\Dan\Documents\Visual Studio 2012\Projects\HTC elevate\HTC elevate\MainPage.xaml.cs(25,57,25,58): error CS1001: Identifier expected 1>C: \Users\Dan\Documents\Visual Studio 2012\Projects\HTC elevate\HTC elevate\MainPage.xaml.cs(26,9,26,10)：错误 CS1519：类、结构或接口成员中的令牌“{”无效声明 1>C:\Users\Dan\Documents\Visual Studio 2012\Projects\HTC elevate\HTC elevate\MainPage.xaml.cs(28,24,28,25): error CS1519: Invalid token '='在类、结构或接口成员声明中 1>C:\Users\Dan\Documents\Visual Studio 2012\Projects\HTC elevate\HTC elevate\MainPage.xaml.cs(29,24,29,25)：错误 CS1519：类、结构或接口成员声明中的无效标记 '(' 1>C:\Users\Dan\Documents\Visual Studio 2012\Projects\HTC elevate\HTC elevate\MainPage.xaml.cs(32,1,32,2 ): 错误 CS1022: 类型或命名空间定义，或预期文件结尾

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:08:23.517

您错误地声明了`Loaded`处理程序 - 它应该在函数的主体中。或者，我建议使用`OnNavigatedTo`：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            WebBrowserTask wbtask = new WebBrowserTask();
            wbtask.Url = "http://google.com";
            wbtask.Show();
            base.OnNavigatedTo(e);
        } 
```

原因很简单——保证每次页面加载只触发一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:07:54.667

将分配加载的事件处理程序的代码移动到 MainPage 构造函数中。它目前在类声明中，这是编译器所抱怨的。这也不是声明事件处理程序的方式。使用 Visual Studio 的 Intellisense（在您键入 += 时调用）来帮助指导您。

# c# - 将没有时区信息的 DateTime 解析为特定时区

> ID：15953271
> 
> 赞同：0
> 
> 时间：2013-04-11T15:47:52.113
> 
> 标签：c#, datetime, timezone

这是昨天回答的问题的后续内容..

[将 12 小时时间字符串转换为 DateTime 对象](https://stackoverflow.com/questions/15920915/convert-12hr-time-string-to-datetime-object)

xml 提要中的那些时间是 EST（谁做的？），但我们的时区是 BST。

所以晚上 10:30 是 02:30 AM UTC 或 03:30 AM BST

但是，TryParseExact 在本地时间产生 10:30PM（因为没有时区信息，这是可以预期的）

所以这个问题；如何将该时间解析为 UTC 上午 02:30 而不是 BST 晚上 10:30？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:54:10.833

> 但是，TryParseExact 产生当地时间晚上 10:30

不，它没有。除非你告诉它。默认情况下，除非模式中有任何偏移指示，否则解析方法将返回`DateTime`带有[`Kind`](http://msdn.microsoft.com/en-gb/library/system.datetime.kind.aspx)of 的值`Unspecified`- 这是完全合适的，因为没有指定任何信息。如果您只是将其转换为字符串，它将假定它实际上是本地时间，但这不是值本身所说的。您需要了解这三种`DateTime`- 这是一个[损坏的模型 IMO](http://noda-time.blogspot.co.uk/2011/08/what-wrong-with-datetime-anyway.html)，但这就是我们在 BCL 中得到的。

您可以将其传递给适当[`TimeZoneInfo`](http://msdn.microsoft.com/en-gb/library/system.timezoneinfo.aspx)的应用特定时区并获得适当的`DateTimeOffset`，尽管随后由您来记住所涉及的实际时区。（偏移量与时区不同。）

或者，您可以使用我的[Noda Time](http://noda-time.googlecode.com)项目，它可以更清楚地区分不同的逻辑类型。您将解析为 a `LocalTime`，然后决定与哪个`LocalDate`连接以生成`LocalDateTime`，然后您可以`ZonedDateTime`使用“America/Los_Angeles”时区（或 Windows 等效时区；选择权在您）将其转换为 a 。在执行该转换时，您将指定如果给定的本地时间由于夏令时转换而无效或不明确，您希望发生什么。

# php - PHP 回显具有范围的数组的值

> ID：15953273
> 
> 赞同：0
> 
> 时间：2013-04-11T15:48:01.307
> 
> 标签：php, multidimensional-array

我仍在学习 PHP，并且有一些奇怪的项目，我还没有找到答案。我有一个多维范围数组，我只需要回显第一组和第三组范围的值，而不是第二组的值。我很难找到一种方法来回显范围值本身。到目前为止，这是我的代码：

```
$array = array(
    1=>range(1,4),
    2=>range(1,4),
    3=>range(1,4)
);

foreach(range(1,4) as $x)
{

    echo $x;
} 
```

现在我知道我的 foreach 循环甚至没有引用我的 $array 所以这是问题 #1 但我似乎无法找到一种方法来引用循环中的 $array 并让它遍历这些值。然后我需要弄清楚如何从 $array 中做第 1 组和第 3 组。任何帮助，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:54:34.840

由于您不想在第二个索引上显示范围，您可以尝试

```
<?php

$array = array(
    1=>range(1,4),
    2=>range(1,4),
    3=>range(1,4)
);

foreach($array as $i=>$range)
{
if($i!=2)
{
    foreach($range as $value)
    {
    echo $value;
    }
}
}

?> 
```

**注意：**将变量命名为与语言对象相同的名称并不是很酷。`$array`不是一个真正可取的名字，但既然你是这样命名的，我没有改变它以避免混淆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:52:26.587

你想这样做吗？

```
foreach ($array as $item) {
    echo $item;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:52:44.950

您可以使用 print_r($array) 或 var_dump($array)。第二个更好，因为它构造了输出，但如果数组很大 - 它不会显示所有内容。在这种情况下，使用第一个 - 它会“回显”整个数组但在一行中，结果不易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T15:52:46.327

这是一种解决方案：

```
$array = array(
1=>range(1,4),
2=>range(1,4),
3=>range(1,4)
);
   $i=0;

   foreach($array as $y)
   { $i++;
          echo "<br/>";

     if($i!=0){ foreach($y as $x)
       {
           echo $x;
       }
                      }
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T15:56:59.063

Range 只是一个索引数组，所以由你决定如何表示它，你可能想要打印第一个和最后一个索引：

```
function print_range($range)
{
    echo $range[0] . " .. " . $range[count($range) - 1] . "\n";
} 
```

要选择第一个和第三个范围，请明确引用它们：

```
print_range($array[1]);
print_range($array[3]); 
```

# sql - 从几个主键 sql 中获取行

> ID：15953280
> 
> 赞同：2
> 
> 时间：2013-04-11T15:48:16.633
> 
> 标签：sql, rows

我有这些表：

```
Works
 ____________________________________________________________________
|                                                                   |
|id  user_id  cat_id  branch_id  country  budget  explanation       |
|___________________________________________________________________|

Categories
 ____________________________________________________________________
|                                                                   |
|id  category                                                       |
|___________________________________________________________________|

Categories_Branch
 ____________________________________________________________________
|                                                                   |
|id  cat_id  branch                                                 |
|___________________________________________________________________|

I want them displayed like this:
 ____________________________________________________________________
|                                                                   |
|id  country  budget  explanation  category  branch                 |
|___________________________________________________________________| 
```

我不能让它工作，当前的 sql 是：

```
SELECT works.id, works.country, works.budget, works.explanation, categories.category, categories_branch.branch
FROM works, categories, categories_branch
WHERE works.user_id = ".$_SESSION['customer_id']."
AND works.cat_id = categories.id
AND categories_branch.cat_id = categories.id
GROUP BY works.id 
```

这会使分支组错误，显示错误的组。

有谁知道如何解决这个问题？非常感谢所有帮助。

**编辑**

这是一张显示我希望它如何排序的图像，问题是显示了错误的分支。

[http://i.imgur.com/M7GIwlk.png](http://i.imgur.com/M7GIwlk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:57:47.243

让我们从这里开始，然后从那里开始：

```
SELECT works.id, works.country, works.budget, works.explanation, categories.category, categories_branch.branch
FROM works
INNER JOIN categories ON works.cat_id = categories.id
INNER JOIN categories_branch ON categories_branch.cat_id = categories.id
WHERE works.user_id = ".$_SESSION['customer_id']." 
```

# hardware - 将两个一维数组相乘的快速方法

> ID：15953286
> 
> 赞同：5
> 
> 时间：2013-04-11T15:48:37.197
> 
> 标签：hardware, vhdl, verilog, fpga, asic

我有以下数据：

```
A = [a0 a1 a2 a3 a4 a5 .... a24]
B = [b0 b1 b2 b3 b4 b5 .... b24] 
```

然后我想乘以如下：

```
C = A * B' = [a0b0 a1b1 a2b2 ... a24b24] 
```

这显然涉及 25 次乘法。

但是，在我的场景中，每次“循环迭代”只有 5 个新值移入 A（并且 5 个旧值移出 A）。有没有什么快速的方法来利用数据正在通过 A 移动而不是全新的事实？理想情况下，我想最小化乘法运算的数量（以可能更多的加法/减法/累加为代价）。我最初认为收缩阵列可能会有所帮助，但它没有（我认为！？）

更新 1：Note B 长期固定，但可以重新编程。

更新 2： A 的移位如下： a[24] <= a[19], a[23] <= a[18]... a[1] <= new01, a[0] <=新00。依此类推每个时钟周期

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:41:59.040

> 有没有什么快速的方法来利用数据正在通过 A 移动而不是全新的事实？

尽管您所做的只是向 A 移动和添加新元素，但 C 中的乘积通常都会有所不同，因为其中一个操作数通常会在每次迭代后发生变化。如果您有关于 A 或 B 的元素结构方式的其他信息，您可能会使用该结构来减少乘法次数。除非考虑任何此类结构因素，否则您必须在每个循环中计算所有 25 个产品。

> 理想情况下，我想最小化乘法运算的数量（以可能更多的加法/减法/累加为代价）。

理论上，您可以通过移动和添加数组元素来模拟乘法，将乘法次数减少到 0。在实践中，这将比硬件乘法慢，所以你最好只使用任何可用的基于硬件的乘法，除非你没有提到一些额外的相关约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:53:54.600

在前**5 个**数据集上，您最多可以保存 50 个乘法。但在那之后，它是一条平坦的乘法之路。因为对于前 5 组之后的每一组，您都需要乘以新的数据集。

我假设所有数组都初始化为零。考虑到整体的乘法量，我认为节省的 50 个没有任何用处。

但是我仍然会提示您如何保存这 50 个，也许您可​​以找到它的扩展名？

第一个数据集到达：将第一个数据集`a`与每个数据集相乘`b`。**全部**保存，只`a`复制`a[0]`到。**这里有 25 个乘法**。`a[4]``c`

 **`a[0]`第二个数据集到达：仅乘以`a[4]`（具有新数据）与`b[0]`分别`b[4]`。保存`a[0]`到`a[4]`，复制`a[0->9]`到`c`。**这里有5个乘法**

`a[0]`第3个数据集到`a[9]`了：这次乘以和复制`b[0]`到对应。**这里有 10 个乘法**`b[9]``a[0->14]``c`

 **`a[0]`第 4 个数据集：与`a[14]`对应的 `b`副本相乘。**这里有 15 个乘法**。`a[0->19]``c`

 **第5个数据集：与对应`a[0]`的副本 相乘。**这里有 20 个乘法**。`a[19]``b``a[0->24]``c`

 **节省的乘法总数：**50**次乘法。

第 6 个数据集：通常的数据乘法。**每个 25 个**。这是因为对于数组中的每个集合，`a`都有一个新的数据集可用，因此乘法是不可避免的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:18:26.620

您能否添加另一个数组 D 来标记 A 中已更改/未更改的值。每次检查此数组以决定是否进行新的乘法运算。********

# python - 在 Django 中运行测试时出现 NoReverseMatch 错误

> ID：15953287
> 
> 赞同：2
> 
> 时间：2013-04-11T15:48:36.883
> 
> 标签：python, django

我正在使用 python django 我在运行 tests.py 时出错这是什么意思：

```
Traceback (most recent call last):
  File "/home/hala/Desktop/lasting/sharesoft-13/project/tager/tager_www/tests.py", line 82, in test_saving_comments
    response=c.get(reverse('adingcomment', kwargs={'post_id' : 1, 'content':'hjhgh'}))
  File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py", line 496, in reverse
    return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
  File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py", line 416, in _reverse_with_prefix
    "arguments '%s' not found." % (lookup_view_s, args, kwargs))
NoReverseMatch: Reverse for 'adingcomment' with arguments '()' and keyword arguments '{'content': 'hjhgh', 'post_id': 1}' not found. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:52:08.090

这意味着 Django 无法找到与该特定路径名和参数匹配的路由，因此无法通过反转路由来生成 URL。

也许`adingcomment`是一个错字，应该是`addingcomment`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:52:42.740

`reverse('adingcomment', kwargs={'post_id' : 1, 'content':'hjhgh'})`未能找到 URL 路由。

也许您注册了`addingcomment`一条路线？您需要检查路线的名称和提供的参数以匹配您注册的现有路线。有关更多详细信息，请参阅URL文档的[反向解析。](https://docs.djangoproject.com/en/stable/topics/http/urls/#reverse-resolution-of-urls)

# java - 如何知道哪个是显示我的 servlet 的 JSP 网页

> ID：15953290
> 
> 赞同：2
> 
> 时间：2013-04-11T15:48:41.150
> 
> 标签：java, jsp, servlets, jboss

我有一个可以看到 JSP 的项目......但是 Jboss 向我展示了 servlet，所以在地址栏中我只能看到：

“appservleer?=AppDev”

这是一个示例，不是实际地址……但仅凭该信息，我如何才能知道 JBoss 当时正在显示哪个 JSP。

还是我对这个 Jboss、servlet、JSP 的理解有误？

一些指导将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:53:38.057

除非开发人员决定给出提示，否则您无法知道`jsp`正在显示哪个。

A[`jsp`](https://stackoverflow.com/tags/jsp/info)只是 servlet 用来呈现响应的一种视图技术。也就是说，通常`jsp`会解析并生成 html。但是，servlet 的开发人员可能决定自己写入响应。所以没有什么能真正告诉你你得到的东西是来自一个`jsp`来源还是另一个来源，即使你有一个像`www.mydomain.com/page.jsp`. 无法保证您在浏览器中看到的响应是从`jsp`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:53:30.283

确定使用哪个 JSP 进行渲染的唯一方法是查看映射下的 servlet 的源代码（在您的示例中）`"appservleer"`。

看看`web.xml`这个路径映射到哪个servlet，打开这个servlet的源代码。然后搞清楚执行路径，从`doGet(...)`or`doPost(...)`方法开始，看最后转发到哪个JSP...

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T15:57:26.970

您应该始终从 web.xml 文件开始，该文件最终将引导您到显示的实际 jsp 文件。从 servlet 映射开始，检查为 url 调用了哪个 servlet。然后深入研究 servlet 以找出它被重定向到的 jsp。如果您正在使用任何应用程序框架，请查找实现以找出映射。例如，在 spring 中，spring 配置文件或控制器类会告诉您调用重定向到哪里。

# c# - WebApiDoodle BasicAuthenticationHandler 和 WebApi 4 不允许匿名

> ID：15953291
> 
> 赞同：0
> 
> 时间：2013-04-11T15:48:43.840
> 
> 标签：c#, asp.net-web-api

这是一个 .NET 4.5 C# MVC + WebAPI 4 项目。我正在使用 WebApiDoodle 2.0.1 BasicAuthenticationHandler 来使用 MVC + WebAPI 并排安全性，如此[处](https://stackoverflow.com/questions/13004091/side-by-side-basic-and-forms-authentication-with-asp-net-web-api "这里")所述。

在我的应用程序启动中，我添加了消息处理程序：

```
globalConfig.MessageHandlers.Add(new {MyClass Derived from BasicAuthenticationHandler}()); 
```

MVC 控制器工作正常（类派生自 `System.Web.Mvc.Controller`）。

但是，WebApi 控制器（派生自`System.Web.Http.ApiController`）忽略该`System.Web.Http.AllowAnonymous`属性。他们基本上想要验证/授权一切。

如果我从 globalConfig 中删除自定义消息处理程序，WebAPI 将按预期工作，AllowAnonymous 属性允许提供匿名请求（并且具有 [Authorize] 的操作被拒绝）。

任何想法可能会发生什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:39:31.457

它看起来像那个 MessageHandler 中的一个错误

[https://github.com/WebAPIDoodle/WebAPIDoodle/blob/dev/src/WebApiDoodle.Web/MessageHandlers/BasicAuthenticationHandler.cs](https://github.com/WebAPIDoodle/WebAPIDoodle/blob/dev/src/WebApiDoodle.Web/MessageHandlers/BasicAuthenticationHandler.cs)

如果 Authorization 标头为空，它会返回一个质询 (www-challenge)，因此它永远不会调用 Web API。只有当 web api 方法由于需要授权而无法执行时，才应返回质询。它应该有这样的东西，

```
 return base.SendAsync(request, cancellationToken)
.ContinueWith<HttpResponseMessage>(r =>
{
  if (r.Result.StatusCode == HttpStatusCode.Unauthorized)
  {
    return HandleUnauthenticatedRequestImpl(request, cancellationToken);
  }

  return r.Result;
}); 
```

询问项目所有者是否可以修复处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:43:21.523

在与 WebApiDoodle 的开发人员讨论后，他提出了一种不同的方法。

您可以在此处查看讨论的详细信息：[https ://github.com/WebAPIDoodle/WebAPIDoodle/pull/8](https://github.com/WebAPIDoodle/WebAPIDoodle/pull/8)

无论如何，开发人员的重要部分：

> AllowAnonymousAttribute 内部没有逻辑。AuthorizeAttribute 尊重它。在我个人看来，如果 API 需要身份验证，每个用户都应该对 API 进行身份验证。这就是为什么您将此视为默认行为。但是，修复很容易。只需覆盖 HandleUnauthenticatedRequest 方法并将其保留为空。然后，像您所做的那样，将质询请求作为延续添加到处理程序的 SendAsync 方法。

# whitespace - 车把，空白控制

> ID：15953293
> 
> 赞同：30
> 
> 时间：2013-04-11T15:48:49.280
> 
> 标签：whitespace, handlebars.js, space, comma

我想要对空白进行精细控制，但仍然有可读的模板。

只是想通过简单的用例看看其他人的解决方案。

```
{{name}}
{{#if age}}
  , {{age}}
{{/if}}

# outputs {{name}} , {{age}}
# desire: {{name}}, {{age}} 
```

[https://github.com/wycats/handlebars.js/issues/479](https://github.com/wycats/handlebars.js/issues/479) - 提交了一张已关闭的票。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-05-13T16:14:49.500

根据[拉取请求的历史添加此功能](https://github.com/wycats/handlebars.js/pull/336)，看起来这是正确的语法：

```
<h4>
{{~#object~}}

Surrounding whitespace would be removed.

{{/object}}
</h4> 
```

结果：

```
<h4>Surrounding whitespace would be removed.</h4> 
```

**还有这种语法只修剪前导空格：**

```
<h4>
{{~#object}}

Only leading whitespace would be removed.

{{/object}}
</h4> 
```

结果：

```
<h4>Only leading whitespace would be removed.
</h4> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-09T12:34:44.697

只是对[Brian answer](https://stackoverflow.com/a/23636497/321731)的评论，如果您想修剪空格并且不希望车把同时转义您的表达式，则要使用的正确语法是：

```
{{~{EXPRESSION}~}} 
```

（修剪表达式前后的空格，而不是转义它）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-23T19:26:37.340

Handlebar 的空白控制文档可以在这里找到： [https ://handlebarsjs.com/guide/expressions.html#whitespace-control](https://handlebarsjs.com/guide/expressions.html#whitespace-control)

> 通过在大括号中添加 ~ 字符，可以从任何 mustache 语句的任一侧省略模板空格。应用时，该侧的所有空白将被删除，直到该侧的第一个车把表达式或非空白字符。

这两个逗号列表示例将具有相同的输出：

**情况1：**

```
 {{#each listItems as |item index|}}
    {{#if (eq index 0)}}
      {{~item.name~}}
    {{else~}}
      , {{item.name~}}
    {{/if}}
  {{/each}} 
```

**案例二：**

```
 {{#each listItems as |item index|}}
    {{#if (eq index 0)~}}
      {{item.name}}
    {{~else~}}
      , {{item.name}}
    {{~/if}}
  {{/each}} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-23T14:21:52.423

我认为最干净的实现是`{{"\n"~}}`在你想要在新线路上硬停的地方添加。

从`"\n"`技术上讲，除了空之外，它可以是任何东西，即`""`. 我曾经`"\n"`在编辑器中明确说明我在做什么。

**例子**

```
Three empty lines after this

{{"\n"~}}

Three empty lines before this

Two empty lines before this. No empty lines after this.

{{~"\n"~}}

No empty lines before this. 
```

**结果**

```
Three empty lines after this

Three empty lines before this

Two empty lines before this. No empty lines after this.No empty lines before this. 
```

基本上，正如其他人所说，任何帮助程序都可以使用前缀或后缀`~`。在这里，我决定传递一个不会作为助手 ( `"\n"`) 呈现的值，它允许我们`~`自由地传递以控制空格之前和之后。

# 编辑

或者：

```
Handlebars.registerHelper(
  'singleLineOnly',
  function (options) { // "this" cannot be provided to inline function!
    return options.fn(this).replace(/[\r\n]+/gm, '')
  }
)
Handlebars.registerHelper(
  'singleSpaceOnly',
  function (options) { // "this" cannot be provided to inline function!
    return options.fn(this).replace(/\s\s+/g, ' ')
  }
) 
```

这将允许您采取以下措施：

```
{{#each this}}
  {{#singleLineOnly}}
  {{#singleSpaceOnly}}

  {{calculatedAmount}}

  {{!an example comment}}
  {{#if unitOfMeasure.translate}}
    {{{unitOfMeasure.translate.value}}}
  {{/if}}

  {{!some random comment}}
  {{#unless unitOfMeasure.translate}}
    {{{unitOfMeasure.value}}}
  {{/unless}}

  {{!Some random comment}}
  {{#ifNotEquals (lowerCase product.value) "other"}}
    {{!If translated, use translated UOM}}
    {{#if product.translate}}
      {{{product.translate.value}}}
    {{/if}}
    {{!If not translated, use default UOM}}
    {{#unless product.translate}}
      {{{product.value}}}
    {{/unless}}
  {{/ifNotEquals}}

  {{!just some more logic for example}}

  {{#ifNotEquals (lowerCase ingredient.value) "other"}}
    {{!If translated, use translated UOM}}
    {{#if ingredient.translate}}
      {{{ingredient.translate.value}}}
    {{/if}}
    {{!If not translated, use default UOM}}
    {{#unless ingredient.translate}}
      {{{ingredient.value}}}
    {{/unless}}
  {{/ifNotEquals}}
  <br/>

  {{/singleSpaceOnly}}
  {{/singleLineOnly}}
{{/each}} 
```

最后得到这个：

```
 1/2 oz. first ingredient <br/>
1 pump(s) another ingredient <br/>
3/4 oz. this ingredient <br/>
2 shot(s) that ingredient <br/>
last instruction <br/> 
```

`{{#singleLineOnly}}`并且`{{#singleSpaceOnly}}`可以用作任何文本的包装器。您很可能希望将这些`~`用于额外的前后空白控制。例如：`{{~#singleLineOnly~}}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-03T07:27:55.900

您可以将 Handlebars Helper 添加到`trim()`空白处

```
{{#-}}

Surrounding whitespace would be removed.

{{/-}} 
```

更多背景信息：[https ://github.com/wycats/handlebars.js/pull/336](https://github.com/wycats/handlebars.js/pull/336)

# websphere - WebSphere：JNDI 上下文查找失败

> ID：15953295
> 
> 赞同：15
> 
> 时间：2013-04-11T15:48:51.047
> 
> 标签：websphere

我有以下...

```
Context aContext = = new InitialContext(settings);
aContext.lookup("java:comp/env/DB2_DB"); 
```

也试过...

```
aContext.lookup("DB2_DB"); 
```

web.xml

```
<resource-ref>
    <description>
    </description>
    <res-ref-name>DB2_DB</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Application</res-auth>
    <res-sharing-scope>Shareable</res-sharing-scope>
    <mapped-name>DB2_DB</mapped-name>
</resource-ref> 
```

然后在我的 ibm-web-bnd.xml 中...

```
<resource-ref name="DB2_DB" binding-name="jdbc/DB2DB" /> 
```

在 Websphere 中，我在 resources>JDBC>Data Sources 中看到绑定名称

但是当我运行我的应用程序时，我看到...

> 原因：javax.naming.NameNotFoundException：上下文：Node04Cell/nodes/Node04/servers/server1，名称：DB2_DB：未找到名称 DB2_DB 中的第一个组件。[根例外是 org.omg.CosNaming.NamingContextPackage.NotFound: IDL:omg.org/CosNaming/NamingContext/NotFound:1.0]^M

这是 WAS6-8.5 的一个端口项目

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-18T23:03:03.330

好吧，这个问题已经很老了，我看到还没有公认的答案，所以。

这是真正发生的事情：

1.  您的代码执行 JNDI 查找到`java:comp/env/DB2_DB`.
2.  WebSphere 使用 WAS 专有的部署描述符 ( `ibm-web-bnd.xml`) 将应用程序绑定“翻译”`DB2_DB`成 WebSphere JNDI 树 ( `jdbc/DB2DB`) 中的真实名称。
3.  WebSphere 查找`jdbc/DB2DB`并将其返回给调用者。

您正在`NameNotFoundException`第**一次**查找 - 查找`java:comp/env/DB2_DB`. 问题不在于找到`jdbc/DB2DB`；它是`DB2_DB`在你的组件环境中找到的。

您的部署描述符对我来说看起来不错，所以我猜您的问题的原因是这样的：

```
Context aContext = new InitialContext(settings); 
```

您正在`InitialContext`通过提供一个`Hashtable`. 当`Hashtable`您需要为构造提供特殊参数时，通常很有用，**但您必须知道何时使用它以及何时避免使用它**。在 JavaEE 容器中运行并且需要对容器的 JNDI 树进行简单访问的代码**很少**（如果有的话）应该向构造函数提供任何`Hashtable`内容`InitialContext`。

例如，如果`settings`您传入的那些包含指示在某个遥远的外部 JNDI 树上进行查找的键，我不会感到惊讶。`InitialContext``PROVIDER_URL`

因此，我将从废弃该参数开始：

```
Context aContext = new InitialContext(); 
```

然后再试一次。

如果仍然失败，请使用 WebSphere 的`dumpNamespace`实用程序来清楚地了解 WebSphere 的 JNDI 树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:41:36.710

我不确定 ibm-web-bnd.xml 做了什么，但是您可以尝试两件事。

首先，您可以尝试进行全局查找。尝试：

```
aContext.lookup("jdbc/DB2DB"); 
```

我假设数据源在数据源配置中被命名为“jdbc/DB2DB”。

否则，您应该检查[数据源是否已映射](https://www.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/udat_maprer.html)到您的应用程序中。我猜想 ibm-web-bnd.xml 应该在正确设置时进行该映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T03:10:06.093

转储命名空间并在您要查找的目标下找到 jndi。如果未找到，请将 corbaloc URL 更新为目标中给定的 URL。因为查找在我的本地工作，但不在集群环境中工作。我转储了命名空间并确定了 corbaloc URL。然后在 SIT 环境中使用该 corbaloc URL。

示例：JMS_HOST 在本地是 corbaloc::localhost:2809/NameServiceServerRoot，但在集群环境中是 JMS_HOST=corbaloc::ABC-DEF-XYZ:9810/NameServiceServerRoot

这解决了我的问题。

# python - 错误：找不到 vcvarsall.bat 来编译安装了 Visual Studio 2008 的 python 模块

> ID：15953296
> 
> 赞同：1
> 
> 时间：2013-04-11T15:48:51.530
> 
> 标签：python, python-3.x, pip

我'，尝试在 Windows 7 ( Python 3.3 ) 上编译 Python 模块并收到错误：无法找到我阅读的 vcvarsall.bat 与未安装 Visual Studio 2008 有关。但是我已经安装了 Visual Studio 2008 并且它在路径中，有什么想法吗？

编辑 - 我还检查了[如何将 easy_install 指向 vcvarsall.bat？](https://stackoverflow.com/questions/6551724/how-do-i-point-easy-install-to-vcvarsall-bat)但没有效果，我尝试设置变量但它被忽略了。

编辑 2 - 我通过查看核心发现它现在正在寻找 VS100COMNTOOLS 而不是 VS90COMNTOOLS 是 VS studio 版本不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:19:19.330

Windows 上的 Python 3.3 是[用 VS2010 构建的](http://blog.python.org/2012/05/recent-windows-changes-in-python-33.html)，它与您的 VS2008 不匹配。以前版本的 Python 确实使用了 VS2008。

您需要掌握 VS2010。

# python - 如何在 Windows 中更改 IDLE 的默认目录？

> ID：15953303
> 
> 赞同：8
> 
> 时间：2013-04-11T15:49:02.593
> 
> 标签：python, python-idle

安装目录是“d:\python2.7”，每次打开IDLE点击菜单文件和打开项，默认目录也是“d:\python2.7”。所以我必须将目录更改为我想要的位置。

有什么办法可以改变它吗？使用配置文件或更改环境变量？

我试图在环境变量中添加 PYTHONPATH，但它不起作用。我还导入 os，并使用 os.chdir()，但它只更改工作目录，而不是我想要的。

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T17:17:43.693

如果您从 Windows 快捷方式运行 IDLE，只需右键单击快捷方式，选择“属性”，然后将“开始”字段更改为您喜欢的任何目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:32:49.210

针对[Aya 的回答](https://stackoverflow.com/a/15954961/)：

> 如果您从 Windows 快捷方式运行 IDLE，只需右键单击快捷方式，选择“属性”，然后将“开始”字段更改为您喜欢的任何目录。

是的，你可以，但是 Python IDLE 将不再运行。我发现如果 IDLE 快捷方式的 Start In 目录是 C:\Python33 或 C:\Python33\Lib\idlelib （在我的情况下）它仍然可以工作，但是如果我在其中任何一个下面添加了一个新目录（例如：myfiles) 包含我的程序，则 IDLE 编辑器失败。在我的情况下，我现在花了几天时间试图通过在 IDLE 编辑器中单击 FILE+OPEN 来让 Python 轻松访问我的 .py 程序。此外，我已经尽一切努力让 IDLE 在 Windows 资源管理器中运行而不会失败，使用右键单击并选择“使用 IDLE 编辑”，但是虽然 Idle 确实打开了，但尝试从那里运行程序失败。我确实设法使用 SEND TO 让 IDLE 工作，直到我得到我的 IDLE 问题的答案 Post 这就是我想我必须做的。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:46:25.633

1.  打开空闲或 PyShell

2.  按`Alt + M`或文件 -> 打开模块

3.  输入 idlelib.IOBinding

4.  窗口打开，转到第 185 行

5.  将 'dirname = None' 或 'filename = None' 更改为您想要的值。

最终，您需要启动 PyShell 或有权编辑此模块的编辑器，例如

```
sudo idle 
```

如果您无法编辑它，您需要在同一目录中查看 idle.pyw 跟踪`IOBinding`该函数如何使用`idlelib.PyShell.main()`并更改相同的变量。

# c++ - 在某些标准流类中插入和提取浮点数是否保留其值？

> ID：15953307
> 
> 赞同：3
> 
> 时间：2013-04-11T15:49:09.767
> 
> 标签：c++, floating-point

当我调试时，有时我想打印一个函数返回的浮点数并将其用作另一个函数的输入值。我想知道指导浮点数格式的*默认参数是什么。*

以下代码中的 f1 和 f2 是否始终相同？

```
#include <sstream>
#include <cassert>
int main(int argc, const char *argv[])
{
  std::stringstream ss;

  float f1 = .1f;
  ss << f1;

  float f2;
  ss >> f2;

  assert(f1 == f2);
  return 0;
} 
```

我可以将一堆浮点数写入 std::cout 或 std::ofsteam 并将它们读回以获得完全相同的数字还是应该明确设置小数点后的数字数量（就像[这里](https://stackoverflow.com/a/10896466/18775)建议的那样？

困扰我的是，虽然 .1 不能表示为二进制分数，但它仍然可以由标准流正确格式化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T15:56:23.843

不必要。默认情况下，`ostream`输出 6 位精度。为了能够“往返”一个浮点数，您需要一个精度`std::numeric_limits<float>::max_digits10`（最常见的表示为 9）。如果流被用于持久性，而你只是持久化浮点数，只需在写入任何内容之前设置精度，例如：

```
ss.precision( std::numeric_limits<float>::max_digits10 ); 
```

（如果您需要同时处理`float`和`double`，并且不希望在 上出现多余的数字`float`，则每次输出浮点值时都需要设置精度。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:01:40.467

不，不能保证它们是相同的。

发生的情况是浮点数本身的精度比默认情况下打印出来的要高，所以只要你读入的有效数字少于默认输出精度，你打印出来的内容（至少通常）会被四舍五入回到你读入的值。

但是，如果您的数据使用了您的`float`.

```
#include <sstream>
#include <iomanip>
#include <iostream>

int main() { 
    std::istringstream buffer("0.1");
    float value;
    buffer >> value;
    std::cout << value << "\n"; 
    std::cout << std::setprecision(10) << value;
} 
```

结果：

```
0.1
0.1000000015 
```

在这种情况下，尾随`15`是（大约）0.1 与我的编译器的浮点数可以表示的最接近的近似值之间的差异。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T16:00:47.883

更重要的是，assert(f1 == f2); 当 f1 和 f2 都是浮点数时很少是正确的。你想要类似 assert(abs(f1 - f2) < tolerance); 有几种通常用于选择公差的技术。您应该使用哪一个取决于您的程序正在解决的问题。

# qt - (set PATH=...;%PATH:)=^)%) 在 Windows shell 脚本中是什么意思，在 Qt5 nmake 构建的上下文中如何克服这一行的失败？

> ID：15953310
> 
> 赞同：5
> 
> 时间：2013-04-11T15:49:31.980
> 
> 标签：qt, shell, windows-7, makefile, qt5

在尝试[使用 VS 2012 构建 Qt5（32 位）](https://stackoverflow.com/a/15893226/368896)[的过程](https://stackoverflow.com/questions/15932767/missing-qrc-mimetypes-cpp-while-attempting-to-build-qt-on-windows-7-32-bit-bu)中，我遇到了另一个构建错误。

这是：

> (设置 PATH=C:\Users\daniel347x\Desktop\Backup\__Dan_Root\qt5\qtbase\lib;%PATH:)=^)%) & C:\Users\daniel347x\Desktop\Backup__Dan_Root\qt5\qtbase\bin\ uic.exe 对话框\qfiledialog.ui -o ui_qfiledialog.h
> 
> NMAKE : 致命错误 U1077: '(set' : return code '0xc0000135'
> 
> 停止。

当我执行详细的 Google/StackOverflow 搜索时，我找不到任何与`(set PATH=...;%PATH:)=^)%)`失败问题相关的内容（返回错误代码）。`0xc0000135`

请注意，`nmake`持续很长时间（超过 1 小时）愉快地切换目录、运行中间 .exe 以及编译和链接代码文件。

我在 32 位 Visual Studio 2012 Tools 命令提示符下运行`nmake`（以及运行）；`configure`据我所知，我的所有`path`变量都已正确设置（它们包括 32 位 Perl 和 32 位 Python 的路径，尽管我认为这与这里无关）。

我重新启动了计算机，并以管理员权限运行了 VS 2012 工具命令提示符（以防它是权限错误），尝试运行`nmake`，并发生相同的错误。

然后我试图找出错误实际上是什么。那时，我被这个命令行语句的语法难住了，它显然是在 Makefile 触发的 shell 脚本中执行的：

```
(set PATH=...;%PATH:)=^)%)
                   ^^^^^^ // What do the symbols :)=^)% mean? 
```

我不理解此脚本上下文中的符号**:)=^)%**。

有人能告诉我这些符号在 Windows shell 脚本的上下文中是什么意思吗（在`nmake`Makefile 的上下文中执行（使用 VS 2012 构建 32 位 Qt5））？

作为一个附加的可选问题，我能做些什么来克服这个错误并继续构建 Qt5 而不会出现这个错误阻止进度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T17:57:08.287

这`(set PATH=...;%PATH:)=^)%)`是一个字符串替换。`help set`在命令输出中查找“环境变量替换”以获取更多信息。

该脚本预先添加了 PATH 变量，但在替换期间它会转义正确的括号，因此整行的格式正确。例如，%PATH% 可能包含一个子字符串“Program Files (x86)”，它会`set`在扩展时破坏语法。括号前的`^`符号只是一个批处理转义符号。

其次，这`(...) & ...`是一个[分组运算符](http://judago.webs.com/batchoperators.htm#841124554)，允许在同一行上编写多个命令。我不知道为什么脚本作者决定将这两个命令放在同一行，但它肯定有助于掩盖错误。

第三，虽然 NMAKE 报告了 '(set' 命令的错误，但快速检查证明返回码 (%ERRORLEVEL%) 是由该组的最后一个命令设置的，所以没有用谷歌搜索`0xc0000135`错误的 SET 和NMAKE 命令。

错误的实际来源是“uic.exe”，它位于：

```
C:\Users\daniel347x\Desktop\Backup__Dan_Root\qt5\qtbase\bin\uic.exe 
```

关于错误，0xc0000135 - 这是`The application failed to initialize properly`错误。我的猜测是“uic.exe”是使用不兼容的工具链/SDK 构建的，或者需要一些缺失的 dll。

PS 另一种解决方案：通过使用 jom 而不是 nmake[解决了类似的问题。](http://qt-project.org/forums/viewthread/20605)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T10:13:00.527

我有同样的问题。我决定将它添加到库 icu 的 PATH 路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T22:00:19.933

我在编译`Qt5.3`时遇到了同样的问题`Win8`。解决方案是确保在 PATH 变量中包含`ICU`32`openSSL`位二进制文​​件位置。如果你不`uic.exe`正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T22:45:17.147

我遇到了同样的问题，在我的情况下，我使用了一个错误编译的 ICU（用 VS2012 编译）试图将 icu 与 VS2008 一起使用，我用 VS2008 编译 ICU 并在我的 VS2008 项目中使用这些编译版本的 ICU 来解决它。

# git - 使用 Egit 共享项目中的目标位置

> ID：15953313
> 
> 赞同：3
> 
> 时间：2013-04-11T15:49:50.517
> 
> 标签：git, egit

我现在开始在 git 世界。所以，我想使用 Egit 创建一个新的存储库。

在 Team>Share Project 之后，我在 Eclipse 中创建了一个 Java 项目。

该图代表我将在下面描述的窗口：

![分享项目](https://i.stack.imgur.com/ZwUoh.jpg)

我的问题是：我有一个名为 eer 的项目，我想在 C:\Users\Marcelo\github 中创建一个存储库；

所以，egit 在 eer 中创建了一个新文件夹，所以我的路径是 C:\Users\Marcelo\github\eer\eer...

如何制作 egit 不要在 egit 存储库中创建新文件夹（项目文件夹）。

我想要这样的路径：C:\Users\Marcelo\github\eer\src; C:\Users\Marcelo\github\eer\doc ...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:56:52.030

按下创建按钮后，您放入父目录 C:\Users\Marcelo 和名称 github。

为什么？

因为我的本地存储库的名称是 github，并且保留在 C:\Users\Marcelo 中。

使用它，Eclipse 将 eer 放入 C:\Users\Marcelo\github

# c# - 使用 HTML Agility Pack 抓取分段表

> ID：15953315
> 
> 赞同：1
> 
> 时间：2013-04-11T15:49:53.770
> 
> 标签：c#, web-scraping, html-table, html-agility-pack

我正在使用敏捷包从网站上抓取数据以获取航班信息。我可以获取包含详细信息的航班列表，但我无法获取航班日期，因为数据位于单个表中并以不同的日期分隔。

下面是我试图抓取的表格示例

```
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
    <td class="schedulehead" width="14%">AIRLINE</td>
    <td class="schedulehead">FLIGHT</td>
    <td class="schedulehead">Origin</td>
    <td class="schedulehead">TIME</td>
    <td class="schedulehead">ESTIMATED</td>
    <td class="schedulehead" width="14%">STATUS</td>
</tr>

<tr>
    <td colspan="6" class="sumheadtop"> Thursday 11 April 2013</td>
</tr>
<tr>
    <td colspan="6" class="sumheadbot">&nbsp;PASSENGER ARRIVALS | DOMESTIC &amp; INTERNATIONAL | All Airlines | ALL OriginS</td>
</tr>
<tr class="schedulerow" style="height:2px"><td colspan="6"></td></tr>
<tr class="schedulerow" valign="top">
    <td class="airline"><img src="/webfids/images/ul.gif" width="100" height="24" vspace="0" alt="Air Lanka"/></td>
    <td class="flight" nowrap>UL 103</td>
    <td class="city">Colombo</td>
    <td class="time">19:25</td>
    <td class="estimated">19:13</td>
    <td class="status"><div class="statusone">LANDED</div></td>
</tr>
<tr class="schedulerow" valign="top">
    <td class="airline"><img src="/webfids/images/mj.gif" width="100" height="24" vspace="0" alt="Other"/></td>
    <td class="flight" nowrap>MJ 1104</td>
    <td class="city"></td>
    <td class="time"></td>
    <td class="estimated">&nbsp;</td>
    <td class="status">&nbsp;</td>
</tr>
<tr class="schedulerow" valign="top">
    <td class="airline"><img src="/webfids/images/ey.gif" width="100" height="24" vspace="0" alt="Other"/></td>
    <td class="flight" nowrap>EY 7400</td>
    <td class="city"></td>
    <td class="time"></td>
    <td class="estimated">&nbsp;</td>
    <td class="status">&nbsp;</td>
</tr>

<tr class="schedulerow" style="height:2px"><td colspan="6"></td></tr>
<tr>
    <td colspan="6" class="sumheadtop"> Friday 12 April 2013</td>
</tr>
<tr>
    <td colspan="6" class="sumheadbot">&nbsp;PASSENGER ARRIVALS | DOMESTIC &amp; INTERNATIONAL | All Airlines | ALL OriginS</td>
</tr>
<tr class="schedulerowtwo" style="height:2px"><td colspan="6"></td></tr>
<tr class="schedulerowtwo" valign="top">
    <td class="airline"><img src="/webfids/images/fz.gif" width="100" height="24" vspace="0" alt="Other"/></td>
    <td class="flight" nowrap>FZ 561</td>
    <td class="city">Dubai</td>
    <td class="time">24:45</td>
    <td class="estimated">&nbsp;</td>
    <td class="status">&nbsp;</td>
</tr>
<tr class="schedulerowtwo" style="height:2px"><td colspan="6"></td></tr>
<tr class="schedulerow" style="height:2px"><td colspan="6"></td></tr>
<tr class="schedulerow" valign="top">
    <td class="airline"><img src="/webfids/images/ul.gif" width="100" height="24" vspace="0" alt="Air Lanka"/></td>
    <td class="flight" nowrap>UL 105</td>
    <td class="city">Colombo</td>
    <td class="time">01:55</td>
    <td class="estimated">&nbsp;</td>
    <td class="status">&nbsp;</td>
</tr>
<tr class="schedulerow" valign="top">
    <td class="airline"><img src="/webfids/images/mh.gif" width="100" height="24" vspace="0" alt="Malaysia A/l"/></td>
    <td class="flight" nowrap>MH 9706</td>
    <td class="city"></td>
    <td class="time"></td>
    <td class="estimated">&nbsp;</td>
    <td class="status">&nbsp;</td>
</tr>
<tr class="schedulerowtwo" style="height:2px"><td colspan="6"></td></tr>
<tr>
    <td colspan="6" class="sumheadtop"> Saturday 13 April 2013</td>
</tr>
<tr>
    <td colspan="6" class="sumheadbot">&nbsp;PASSENGER ARRIVALS | DOMESTIC &amp; INTERNATIONAL | All Airlines | ALL OriginS</td>
</tr>
<tr class="schedulerow" style="height:2px"><td colspan="6"></td></tr>
<tr class="schedulerow" valign="top">
    <td class="airline"><img src="/webfids/images/ul.gif" width="100" height="24" vspace="0" alt="Air Lanka"/></td>
    <td class="flight" nowrap>UL 107</td>
    <td class="city">Colombo</td>
    <td class="time">24:55</td>
    <td class="estimated">&nbsp;</td>
    <td class="status">&nbsp;</td>
</tr>
<tr class="schedulerowtwo" style="height:2px"><td colspan="6"></td></tr>
</table> 
```

目前，我将其用作命令行代码，并遵循我当前使用的代码。

```
public void get_schedule()
    {
        string local_fname = "nhl-2010-2011.htm";

        var schedule_doc = new HtmlAgilityPack.HtmlDocument();
        schedule_doc.Load(local_fname);

        // identify all the td nodes that directly contain the text "Date"
        var ruw_nodes = schedule_doc.DocumentNode.Descendants()
                     .Where(n => n.Name == "tr")
                     .Where(n => n.GetAttributeValue("valign", null) == "top");

        foreach (var row_node in ruw_nodes)
        {

            var div_nodes = row_node.Elements("td").ToList();

            var airline_node = div_nodes.Where(n => n.GetAttributeValue("class", null) == "airline").FirstOrDefault();
            var flight_node = div_nodes.Where(n => n.GetAttributeValue("class", null) == "flight").FirstOrDefault();
            var city_nodes = div_nodes.Where(n => n.GetAttributeValue("class", null) == "city").FirstOrDefault();
            var time_node = div_nodes.Where(n => n.GetAttributeValue("class", null) == "time").FirstOrDefault();
            var est_node = div_nodes.Where(n => n.GetAttributeValue("class", null) == "estimated").FirstOrDefault();
            var status_node = div_nodes.Where(n => n.GetAttributeValue("class", null) == "status").FirstOrDefault();

            string logo = airline_node.Element("img").Attributes["src"].Value;

            string airline = airline_node.Element("img").Attributes["alt"].Value;

            string flight = flight_node != null ? flight_node.InnerText : "";
            flight = clean_text(flight);

            string city = city_nodes != null ? city_nodes.InnerText : "";
            city = clean_text(city);

            string time = time_node != null ? time_node.InnerText : "";
            time = clean_text(time);

            string est = est_node != null ? est_node.InnerText : "";
            est = clean_text(est);

            string status = status_node != null ? status_node.InnerText : "";
            status = clean_text(status);

            System.Console.WriteLine(" {0} | {1} | {2} | {3}", airline, flight, city, time);
        }

        System.Console.ReadKey();
    }
    public string strip_excessive_whitespace(string s)
    {
        char[] seps = { '\n', '\t', ' ' };
        string[] pieces = Enumerable.ToArray<string>(s.Split().Where(x => x.Length > 0));
        string r = System.String.Join(" ", pieces);
        return r;
    }
    public string clean_text(string s)
    {
        string r = s;
        r = s.Replace("&nbsp;", " ");
        r = strip_excessive_whitespace(r);
        r = r.Trim();
        return r;

    } 
```

我想像这样获取数据

*   日期 1
*   飞行1次
*   飞行2次
*   日期 2
*   飞行1次
*   飞行2次

或者像这样

*   日期 1 航班 1 时间
*   日期 1 航班 2 时间
*   日期 2 航班 1 时间
*   日期 2 航班 2 时间

# java - 无法找到或加载 main

> ID：15953320
> 
> 赞同：1
> 
> 时间：2013-04-11T15:50:13.157
> 
> 标签：java, eclipse, git

现在谷歌搜索了几个小时，似乎没有解决方案暗示问题可能是什么，我已经尝试了所有这些，但它们不起作用。问题是我在 github 上有一个项目（Eclipse 项目），我现在正在另一台计算机上尝试处理我的项目。我导入了它，得到了分支，但是当我运行项目时，我得到了一个`Error: Could not find or load main class engine.Game`

除了这台缺少 JRE7 的计算机之外，不知道会出现什么问题，但我只是将它下载到一个文件夹并将其添加到此构建的库中。我添加的另一个库使用了一个固定的文件引用`C:/...`，但我通过使它指向 eclipse 项目中的 jar 来修复它。

我一直在使用 git `.classpath`，`.project`它以前一直有效，除了今天。

我认为问题在于 JVM 尝试从包含 JRE7 的文件夹中运行文件，但这不是我的项目所在的位置。我刚刚注意到控制台标题显示：

```
<terminated> Game [Java Application] /home/USER/Desktop/jre1.7.0_17/bin/java 
```

**对于以下**发布类路径和有关 bin 文件夹的请求： bin 完全是空的，但难怪找不到 main。

*类路径*

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry kind="src" path="info"/>
<classpathentry kind="src" path="src"/>
<classpathentry kind="src" path="libs"/>
<classpathentry kind="src" path="res"/>
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7"/>
<classpathentry kind="lib" path="/home/aryann/git/KLT/libs/JOrbis.jar"/>
<classpathentry kind="output" path="bin"/>
</classpath> 
```

*项目*

```
 <?xml version="1.0" encoding="UTF-8"?>
  <projectDescription>
<name>KLT</name>
<comment></comment>
<projects>
</projects>
<buildSpec>
    <buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
</buildSpec>
<natures>
    <nature>org.eclipse.jdt.core.javanature</nature>
</natures>
    </projectDescription> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:02:32.190

出了什么问题有很多可能性。首先确保您的 bin 文件夹中确实有一个 .class 文件。然后确保 bin 文件夹确实在您的运行时类路径上。

如果这不起作用，请在此处附加您的 .classpath 和 .project 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T18:36:23.340

我应该早点发布这个。显然问题是我使用了一个代码找不到的外部 jar 库，通过添加它来修复，这次作为相对路径库（内部）。

# javascript - 真的需要明确的“.prototype”吗？

> ID：15953322
> 
> 赞同：5
> 
> 时间：2013-04-11T15:50:21.623
> 
> 标签：javascript

我经常在其他人的脚本中看到这样的内容：

```
bar = Array.prototype.slice.call(whatever, 1) 
```

但是，以下较短的符号也可以正常工作：

```
bar = [].slice.call(whatever, 1) 
```

这两个结构完全等效吗？是否有以不同方式对待它们的引擎（浏览器）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T15:51:55.823

是的，完全等效。

碰巧访问 via`.prototype`稍微快一些，因为不需要创建新的对象实例。然而，这就是我们所说的*微优化*。

* * *

完全摆脱深度链接的一个好方法是调用`Function.prototype.bind`.

例子

```
(function( slice ) {
    slice( whatever, 1 );
}( Function.prototype.call.bind( Array.prototype.slice ))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:58:44.260

严格来说，它们并不等同。这种结构：

```
[].slice.call(whatever, 1) 
```

在堆上分配新的数组实例只是为了从中获取属性。所以它有副作用——把垃圾留在堆里。

# java - 为什么亚马逊 ec2 的性能下降很多？

> ID：15953324
> 
> 赞同：0
> 
> 时间：2013-04-11T15:50:26.237
> 
> 标签：java, performance, amazon-ec2

不详细介绍我的算法，只是给出一些实验结果。对于某些给定的输入，我的 Java 顺序算法在我的笔记本电脑上运行 4 秒（Intel Core i5 430M - 2 核，4 线程，2.27 GHz，4Mb 缓存，3Gb 内存）。该算法的并行版本使用 1 个线程工作 6 秒，使用 2 个线程工作 5 秒，使用 3 个线程工作 4 秒。如果我通过 ssh 在 amazon ec2 上运行它，无论有多少线程，顺序时间为 6 秒，并行时间为 6 到 7 秒。

为什么你认为它更慢？因为亚马逊使用虚拟机并且在那里运行的代码比较慢？你的经验是什么？

我有一个应用程序，我想在具有大量内存和计算能力的环境中进行测试。目前它在亚马逊上是不成功的。

我使用普通的 Java 对象和`hppc`外部库（高性能原始计算库）。没有数据库和花哨的东西。

实例类型是c1，也许是这个（如果正确我会尽快告诉你，我知道是c1，但不知道是中型还是大型）：

```
High-CPU Extra Large Instance
7 GiB of memory
20 EC2 Compute Units (8 virtual cores with 2.5 EC2 Compute Units each)
1690 GB of instance storage
64-bit platform
I/O Performance: High
EBS-Optimized Available: 1000 Mbps
API name: c1.xlarge 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:28:04.017

根据我的经验，虚拟机具有非常昂贵的多线程任务切换惩罚，如果出现以下情况，可能会导致严重的性能损失：

1.  您的线程有很多线程间通信，并且
2.  有多个虚拟机在单个物理机器上运行。

虚拟机“核心”实际上作为线程映射到物理机的主操作系统上。如果主 OS 有 30ms 的线程量子并且 VM 也有 30ms 的线程量子，那么可能发生的情况是：

1.  VM 将尝试“唤醒”其一个虚拟内核上的睡眠线程。
2.  向硬件操作系统发送信号以唤醒物理内核上的线程。
3.  另一个 VM 正在使用它们。等待 30 毫秒的量子。
4.  线程在硬件上唤醒。

如果您的其他线程期望响应比 30 毫秒快一点，那么您就遇到了瓶颈。更糟糕的是，基于 Linux 的服务器上非空闲线程调度的默认时间量实际上是 ~100 毫秒。

Amazon EC2 系统不仅仅是虚拟机，它们是*共享*单个物理机的虚拟机。为了在每个服务器机架上获得最大的收益，亚马逊还必须在一定程度上超额订阅系统。前任：

*   物理主机有 16 个 HT 线程（8 个物理内核）
*   每个 VM 有 8 个虚拟内核
*   EC2 将在机器上粘贴 3-4 个虚拟机（超额订阅）

这样做是因为许多应用程序不使用 8 核的满载。但是，如果您与使用完整 8 核的设备配对，那么......真是太糟糕了！我不确定实际的配对比率是多少，我想亚马逊无论如何都会不断调整它。

# json - jQuery 解析 xhr.responseText

> ID：15953325
> 
> 赞同：0
> 
> 时间：2013-04-11T15:50:27.287
> 
> 标签：json, codeigniter, codeigniter-datamapper

```
var data  = xhr.responseText; 
```

当我输出这个`console.log(xhr.responseText)`. 下面是我的输出

```
["{id:1,name\":\"JOHN\",\"city\":\"null\"}"
,"{\"id\":2,\"name\":\"MICHEAL\,\"city\":\"null\"}"] 
```

我怎么得到`id`，`name`。我试过这样，`data.id`但我得到了这个错误

> jquery JSON.parse：数据意外结束。

**更新**

我正在使用带有数据映射器的代码点火器，所以我的数据映射器给出了那个 json 响应。你知道吗，我该如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:20:12.113

您已经在评论中被告知问题出在哪里：服务器生成的 JSON 无效。您可能没有使用库对 JSON 进行编码，永远不要手动对其进行编码。

您的 JSON 应该如下所示（漂亮打印时）[http://jsfiddle.net/7FKWr/](http://jsfiddle.net/7FKWr/)

```
[
  {"id": 1, "name": "JOHN", "city": null},
  {"id": 2, "name": "MICHEAL", "city": null}
] 
```

# php - 无法通过图形 api 发布

> ID：15953328
> 
> 赞同：0
> 
> 时间：2013-04-11T15:50:40.920
> 
> 标签：php, facebook

我无法理解我的代码中有什么问题。我的范围内有“publish_stream”。用户已使用所有权限对我的应用程序进行了身份验证，但仍然出现此错误。

以下是我通过图形 api 发布的代码：-

```
<?php
    try{
        $publishStream = $facebook->api("/$user/feed", 'post', array(
            'message'       => 'TESTING...',
            'link'          => 'http://example.com',
            'picture'       => 'http://example.com/image.png',
            'name'          => 'example name!',
            'caption'       => 'example caption',
            'description'       => 'PHP SDK ROCKS!',
            ));
echo "IN TRY BLOCK ";
    }catch(FacebookApiException $e){
        error_log($e);
echo "IN CATCH BLOCK ";
    }

?> 
```

给定代码的输出是：- 在 CATCH BLOCK 中。请告诉我我哪里错了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:09:26.883

基于 Facebook Graph API 文档：1）检查 $user 变量，以便肯定包含（干净的）Profile_ID，2）您需要对目标配置文件具有“发布权限”，请参阅：http: [//developers.facebook.com/ docs/concepts/login/permissions-login-dialog/#publishing-permissions](http://developers.facebook.com/docs/concepts/login/permissions-login-dialog/#publishing-permissions)

# javascript - ember linkTo 在路由的模型钩子中发送空参数

> ID：15953330
> 
> 赞同：1
> 
> 时间：2013-04-11T15:50:45.597
> 
> 标签：javascript, ember.js, ember-router

我有一个博客网站，其中的 url`/posts`应该列出所有帖子。然后单击链接`/posts/:post_id`应显示该帖子的详细信息。但是，单击链接时，似乎`linkTo`没有正确传递`:post_id`。这是我的代码：

路由器：

```
App.Router.map(function() {
  this.resource("posts", function() {
    this.resource("post", { path: "/:post_id" }, function() {
      //other routes
    });
  });

  this.route("posts.index", { path: "/" });//Links root url to posts index template
}); 
```

路线：

```
/****** Posts ******/
App.PostsRoute = Ember.Route.extend({

});

App.PostsIndexRoute = Ember.Route.extend({
  model: function() {
    return App.Post.find();
  }
});

/****** Post *******/
App.PostRoute = Ember.Route.extend({

});

App.PostIndexRoute = Ember.Route.extend({

}); 
```

控制器：

```
/****** Posts ******/
App.PostsController = Ember.ArrayController.extend({

});

App.PostsIndexController = Ember.ArrayController.extend({

});

/****** Post ******/
App.PostController = Ember.ObjectController.extend({

});

App.PostIndexController = Ember.ObjectController.extend({

}); 
```

帖子/索引模板：

```
{{#each post in controller}}
  <tr>
    <td>{{post.name}}</td>
    <td>{{post.title}}</td>
    <td>{{post.content}}</td>
    <td>{{#linkTo post.index post}}View{{/linkTo}}</td>
  </tr>
{{/each}} 
```

每次单击 时`{{linkTo post.index post}}`，它都会将我带到正确的 url，呈现正确的模板（帖子/索引），但没有任何显示。我尝试在 PostIndexRoute 中放置一个模型挂钩，如下所示：

```
App.PostIndexRoute = Ember.Route.extend({
  model: function(params) {
    return App.Post.find(params.post_id);
  }
}); 
```

但是 params =`{}` 里面没有数据。有人可以指出我正确的方向吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:58:16.507

由于您正在传递`post`对象，因此您需要`{{linkTo}}`一个接受动态 URL 段的路由。在您的示例`posts.index`中不接受参数。

```
<td>{{#linkTo post post}}View{{/linkTo}}</td> 
```

下面是一个构建代码以更好地处理路由的方法示例：[JSBin 示例](http://jsbin.com/iwaquv/4/edit)

您还应该查看[Ember.js 路由指南](http://emberjs.com/guides/routing/)作为如何构建路由的示例。

# ruby-on-rails - Rails：在关注中包含一个带有常量的关注

> ID：15953332
> 
> 赞同：27
> 
> 时间：2013-04-11T15:50:50.553
> 
> 标签：ruby-on-rails, separation-of-concerns

我担心存储常量的位置：

```
module Group::Constants
  extend ActiveSupport::Concern

  MEMBERSHIP_STATUSES = %w(accepted invited requested
    rejected_by_group rejected_group)
end 
```

我希望使用这些常量的另一个问题是：

```
module User::Groupable
  extend ActiveSupport::Concern
  include Group::Constants

  MEMBERSHIP_STATUSES.each do |status_name|
    define_method "#{status_name}_groups" do
      groups.where(:user_memberships => {:status => status_name})
    end
  end
end 
```

不幸的是，这会导致路由错误：

```
uninitialized constant User::Groupable::MEMBERSHIP_STATUSES 
```

看起来第一个问题在第二个问题中没有正确加载。如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-11T17:10:04.570

看起来这种行为是设计使然，正如在[此处](http://opensoul.org/blog/archives/2011/02/07/concerning-activesupportconcern/)很好地解释的那样。

在这种情况下，您需要做的不是`Group::Constants`extend from，`ActiveSupport::Concern`因为这将阻止其实现与其他`ActiveSupport::Concern`扩展模块共享（尽管它最终将在包含第二个模块的类中共享）：

```
module A
  TEST_A = 'foo'
end

module B
  extend ActiveSupport::Concern
  TEST_B = 'bar'
end

module C
  extend ActiveSupport::Concern
  include A
  include B
end

C::TEST_A 
=> 'foo'
C::TEST_B 
=> uninitialized constant C::TEST_B

class D
  include C
end

D::TEST_A 
=> 'foo'
D::TEST_B 
=> 'bar' 
```

简而言之，您需要制作`Group::Constants`一个标准模块，然后一切都会好起来的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-31T02:12:40.813

如果您想将所有内容保存在一个文件中，并且可以忍受一些样板文件，则可以将模块分解为“关注”位和“非关注”位：

```
module A
  FOO = [22]

  def self.included base
    base.include Concern
  end

  module Concern
    extend ActiveSupport::Concern

    class_methods do
      def foo_from_the_perspective_of_a_class_method_in_A
        {lexical: FOO, instance: self::FOO}
      end
    end
  end
end

module B
  extend ActiveSupport::Concern

  include A

  FOO += [33]

  def foo_from_the_perspective_of_an_instance_method_in_B
    FOO
  end
end

class C
  include B
end

C.foo_from_the_perspective_of_a_class_method_in_A
=> {:lexical=>[22], :instance=>[22, 33]}
C.new.foo_from_the_perspective_of_an_instance_method_in_B
=> [22, 33]
C::FOO
=> [22, 33] 
```

# jquery - 将短代码包装在临时 div 包装器中以进行编辑，然后在保存内容之前将其删除

> ID：15953334
> 
> 赞同：1
> 
> 时间：2013-04-11T15:50:56.303
> 
> 标签：jquery, css, wordpress, tinymce

我正在开发一个简码预览过滤器，在其中我将所有简码包装在 CSS 分类的 div 中，这些 div 仅用于在内容位于 tinyMCE 编辑器中时查看。

我遇到的第一个挑战是如何在保存文档之前从标记中去除包装 div。

第二个挑战是如何在保存后每次短代码出现在编辑器中时重新应用包装器。

我正在寻找一个使用 jQuery 在加载和保存例程期间解析和过滤 TinyMCE 编辑器内容的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:58:09.213

> 我遇到的第一个挑战是如何在保存文档之前从标记中去除包装 div。

这很容易。只需给你的 wrapperDivs 一个特殊的类

```
var ed = tinymce.get('my_editor_id');
$(ed.getBody()).find('div.my_special_class').each(function(){
    $(this).replaceWith(this.innerHTML);
}); 
```

> 第二个挑战是如何在保存后每次短代码出现在编辑器中时重新应用包装器。

这个比较难回答。这取决于检测短代码的难度。

# python - 在 Python 中拆分数组

> ID：15953337
> 
> 赞同：1
> 
> 时间：2013-04-11T15:50:56.897
> 
> 标签：python, arrays, numpy

我有一个数组，`(219812,2)`但我需要拆分为`2 (219812)`.

我不断收到错误`ValueError: operands could not be broadcast together with shapes (219812,2) (219812)`

我怎样才能完成？

如您所见，我需要从 u = odeint 中获取两个单独的解决方案并将它们多个。

```
def deriv(u, t):
    return array([ u[1], u[0] - np.sqrt(u[0]) ])

time = np.arange(0.01, 7 * np.pi, 0.0001)
uinit = array([ 1.49907, 0])
u = odeint(deriv, uinit, time)

x = 1 / u * np.cos(time)
y = 1 / u * np.sin(time)

plot(x, y)
plt.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:36:04.260

要提取二维数组的第 i 列，请使用`arr[:, i]`.

您还可以`u`使用`u1, u2 = u.T`.

顺便说一句，星形导入不是很好（可能在终端中用于交互使用除外），所以我在您的代码中添加了几个`np.`and `plt.`，它变成：

```
def deriv(u, t):
    return np.array([ u[1], u[0] - np.sqrt(u[0]) ])

time = np.arange(0.01, 7 * np.pi, 0.0001)
uinit = np.array([ 1.49907, 0])
u = odeint(deriv, uinit, time)

x = 1 / u[:, 0] * np.cos(time)
y = 1 / u[:, 1] * np.sin(time)

plt.plot(x, y)
plt.show() 
```

对数图看起来也更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:56:03.437

听起来你想索引到元组：

```
foo = (123, 456)
bar = foo[0] # sets bar to 123
baz = foo[1] # sets baz to 456 
```

所以在你的情况下，听起来你想要做的可能是......

```
u = odeint(deriv, uinit, time)

x = 1 / u[0] * np.cos(time)
y = 1 / u[1] * np.sin(time) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T15:59:35.937

```
u1,u2 = odeint(deriv, uinit, time) 
```

也许 ？

# php - 隐藏测试的正确答案

> ID：15953341
> 
> 赞同：0
> 
> 时间：2013-04-11T15:51:13.443
> 
> 标签：php

我有一个表格，里面有一个测试，其中包括多项选择复选框。

每个答案都是从 Wordpress 中提取的，并且在一个循环中，每个单独的复选框都以下列方式输出：

```
<input type="checkbox" name="answer[]" value="<?php echo $row['answer']; ?>" /> 
```

在 Wordpress 中，每个答案旁边都有一个复选框，如果选中则表示它是正确答案。这是输出：

```
$row['correct']; 
```

**如何将数据传递到另一个页面以检查用户检查的答案是否正确，而不允许用户查看源以查看答案？**

在第二页上，我使用以下内容输出用户检查的答案：

```
$answer = implode(", ",$_POST["answer"]);
echo $answer; 
```

显然，这些是从表单中的输入中提取的。如何检查每一项是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:05:19.880

看起来您将答案存储在 JavaScript 数组中

`<input type="checkbox" name="answer[]"...`，这可以通过使用以下内容由 PHP（在表单发布到的任何页面上）读取：

`$answers = json_decode($_POST['answer'])`

这是假设您的表单正在使用该`POST`方法，否则更改`$_POST`为`$_GET`

从那里`$answers[]`可以使用`for()`包含条件表达式的循环来循环数组，即`if($answers[$i] !== $correctAnswers[$i]) $wrongAnswers++ else $correctAnswers++`或类似的。

这一切都发生在服务器端，客户端无法查看。

由于用户将在表单提交时被发布到计算页面，您可以使用`header('Location: results.php');`将他们从空白页面引导。它应该包含在分数计算循环之后的脚本末尾。

想一想，`$_SESSION[]`如果您确实计划通知用户他们是如何做到的，您可能需要将分数存储在 a 中，以便可以从结果页面中读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:56:54.347

我认为有两种可接受的方法：

1.  给问题编号，然后在您的 PHP 文件中使用 switch 语句（或映射）来检索问题的正确答案，并以这种方式检查。

2.  在每个页面的会话中设置下一个正确值，并在生成的 PHP 页面中读取它。

第一个选项可能更可取。

# java - Java J2SSH SFTP - 主机密钥无效

> ID：15953342
> 
> 赞同：2
> 
> 时间：2013-04-11T15:51:15.617
> 
> 标签：java, j2ssh

我正在使用 J2SSH 0.2.9 SFTP。连接到特定 SFTP 站点时，我收到错误消息

主机密钥签名无效

但是使用 WinSCP 或 Filezilla 连接到同一个站点不会给我任何错误。

需要关注的特定代码区域是

```
boolean result = pk.verifySignature(sig, sigdata);
    log.info("The host key signature is " +
        (result ? " valid" : "invalid")); 
```

在 TransportProtocolClient.java 中

关键是 SSH-DSS，如果它有所作为的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:07:45.520

在没有环境可以重现的情况下在黑暗中刺伤，但我猜你连接到的任何东西都会导致`j2ssh.transport.publickey.dsa.SshDssPublicKey`.

```
163    if (!header.equals("ssh-dss")) {
164        throw new InvalidSshKeySignatureException();
165    } 
```

还有一些其他错误情况可能会导致相同的异常使水有些混乱。

```
252    } catch (NoSuchAlgorithmException nsae) {
253         throw new InvalidSshKeySignatureException();
254    } catch (InvalidKeyException ike) {
255        throw new InvalidSshKeySignatureException();
256    } catch (IOException ioe) {
257        throw new InvalidSshKeySignatureException();
258    } catch (SignatureException se) {
259        throw new InvalidSshKeySignatureException();
260    } 
```

我怀疑服务器错过了解释[IETF RFC 4253](http://www.ietf.org/rfc/rfc4253.txt)的第 13 页，并发送了一些稍微不同的东西（全部大写？），因为它对签名格式标识符的编码。我检查过的具有类似功能的其他程序似乎强制键名大写或小写，然后执行相等检查。

# javascript - Ajax / Javascript 麻烦。循环先前的请求

> ID：15953343
> 
> 赞同：0
> 
> 时间：2013-04-11T15:51:19.770
> 
> 标签：javascript, jquery, ajax

我有一小段用 PHP 加载的漂亮的 Ajax 代码。

[http://www.moneywarrier.com/client-stories/](http://www.moneyworrier.com/client-stories/)

发生的情况是，当您单击左侧导航上的菜单项时，它会重新加载具有适当内容的 Div。

然而，它的作用是遍历先前的请求，这很麻烦（单击任何左侧项目 3x，您将明白我的意思）。我想我需要找到一个相当于退出的函数；并清除任何发布数据。

我的代码调用是：

```
<a href="#"  class="media video" rel="1">Video</a> 
```

我的 JS 看起来像：

```
$(document).ready(function () {

    $('a.media').click(function () {
        var usr = $(this).attr('rel');

        $("#displaystories").html('Retrieving..');

        $.ajax({
            type: "POST",
            url: "/client-stories/media.php",
            data: "showcode=" + usr,
            success: function (msg) {
                $("#displaystories").ajaxComplete(function (event, request, settings) {
                    $(this).html(msg);
                });
            }

        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:06:01.530

每次单击时，您都将一个新的侦听器绑定到 ajaxComplete。您的成功回调应该是：

```
success: function(msg) {  
    $("#displaystories").html(msg);
} 
```

# c - 给定 k 组整数，找出所选 k 个元素之间的最小差异

> ID：15953344
> 
> 赞同：3
> 
> 时间：2013-04-11T15:51:22.007
> 
> 标签：c

我有一个算法问题。给定 k 组整数>0（它们的大小不一定相同），我必须从每组中选择 k 个数字，以便最大值和最小值之间的差异最小。示例：k=5

设置 1:89 45 22 16

设置 2:89 34

设置 3:37 62 89

设置 4:89 96

设置 5:89 91 94

答案：从所有组差 0 中选择 89。

例2（更难）k=5

设置 1:12 19 44 52 59 100

设置 2:35 60 90 94 98 101

设置 3:48 49 57 64 78 90

设置 4:15 38 56 90 97

设置 5:54 58 59 89 202

答案：k 个元素选取：52,60,57,56,54) 差 60-52=8。

关于如何处理的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:59:54.340

你可以这样做：

*   `setUnion`用所有集合的并集构造
*   将差异初始化`currentBest`为联合的最大和最小元素之间的距离
*   对于 的每个元素`setUnion`，遍历原始`K`集合，找到大于或等于它的最接近的元素。您将拥有一组最多的`K`数字。找到他们的`min`and `max`，并检查它的`currentBest`差异
*   完成后`currentBest`会有你的问题的答案。

如果联合的大小是`N`并且您对集合使用有序表示`K`，则此算法会`O(N*K*LogN)`及时找到答案。

# google-maps - 带有位置服务的 Google Maps API v3 路径

> ID：15953345
> 
> 赞同：0
> 
> 时间：2013-04-11T15:51:24.600
> 
> 标签：google-maps, geolocation

我正在为我的校园地图使用谷歌地图，并且我已经完成了建筑物的所有覆盖以及 JavaScript 以在单击覆盖时打开窗口等。我要解决的下一个问题是如何从点 A 到点 B（使用点 A 作为地理位置）。在我的校园里，有大约 2.5 英里以上的人行道，但它们不是谷歌地图中定义的路径，所以我不能使用谷歌地图提供的内置方向。

有什么办法可以让它显示从 A 点到 B 点的方向，同时让它显示沿着人行道的路径？

提前致谢。

编辑：我已经有了地理定位工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:10:48.493

如果 Google 不了解人行道，您将不得不自己绘制。您需要将有关人行道的信息存储在数据库中，然后提出一个路由算法，然后绘制一条线（使用 Polyline 类）。

对于路由算法，您可以使用 Dijkstra 算法 [http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm) 或者您可以尝试 A* [http://en.wikipedia.org/wiki/A](http://en.wikipedia.org/wiki/A) * _search_algorithm 或您可以在 Dijkstra 和 A* 页面的 Wikipedia 侧边栏中找到的其他算法之一。

折线文档： [https ://developers.google.com/maps/documentation/javascript/overlays#Polylines](https://developers.google.com/maps/documentation/javascript/overlays#Polylines)

# sql - 如何将多行excel数据传输到访问表中

> ID：15953349
> 
> 赞同：2
> 
> 时间：2013-04-11T15:51:30.383
> 
> 标签：sql, excel, vba, ms-access, insert

现在，我正在遍历 Excel 电子表格中的每一行，并使用插入查询将每一行插入到我的 Access 表中。它有效，但速度很慢。如何进行一次查询以一次添加所有记录？

这是我当前的代码

```
Sub Insert()

Dim rs As ADODB.Recordset, strSQL As String, minPrem As Double, i As Long, datetime As Date

datetime = Now()

Call DB.ConnectToDB 'Connect to the database
Set rs = New ADODB.Recordset

i = 7 'first row of data

Do While (Cells(i, 1) <> "")

    If (IsNumeric(Cells(i, 6))) Then
        minPrem = Cells(i, 6)
    Else
        minPrem = 0
    End If

    strSQL = "INSERT INTO Rates (EffectiveDate, State, Company, ClassCode, Rate, MinPremium, TimeOfEntry) VALUES " _
    & "(#" & Cells(i, 1) & "#,'" & Cells(i, 2) & "','" & Cells(i, 3) & "','" & Cells(i, 4).Text & "'," & Cells(i, 5) & "," & minPrem & ", #" & datetime & "#)"
    rs.Open strSQL, Cn

    i = i + 1
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:19:25.350

在事务中包装多个`INSERT`操作通常可以加快速度，因为单个 INSERT 被缓存，然后一次全部写入（提交）到数据库。尝试`cn.BeginTrans`在进入循环之前添加一条语句，然后`cn.CommitTrans`在退出循环后执行一条语句，看看是否有帮助。

此外，如果您只是在执行 INSERT 操作，那么您不需要弄乱单独的`Recordset`对象；你可以做`cn.Execute strSQL`。

# database - 使用 asp-classic 连接 accdb 数据库

> ID：15953351
> 
> 赞同：0
> 
> 时间：2013-04-11T15:51:47.070
> 
> 标签：database, ms-access, asp-classic

我正在尝试使用 asp-classic 将数据库连接到我的网页。我之前使用 .mdb 文件时成功了，但现在我有一个新的数据库，格式为 accdb 并且需要是因为 .mdb 文件中不支持的功能。

我用于完美工作的 .mdb 连接的代码。

```
<%@Language=VBScript %>
<%
Dim adoCon
Dim rsLogbook
Dim strSQL
Set adoCon = Server.CreateObject("ADODB.Connection")
adoCon.Open "DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=" & Server.MapPath("DatabaseName.mdb")
Set rsLogbook = Server.CreateObject("ADODB.Recordset")
strSQL = "SELECT TableName.FieldName FROM TableName;"
rsLogbook.Open strSQL, adoCon
Response.Write ("<br>")
Response.Write (rsLogbook("FieldName"))
rsLogbook.Close
Set rsLogbook = Nothing
Set adoCon = Nothing
%> 
```

我尝试用“accdb”替换“.mdb”，但没有运气。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:06:55.013

[ConnectionStrings.com](http://connectionstrings.com/access-2007)通常是为数据库连接寻找正确语法的一个很好的起点。

您在哪里将“.mdb”更改为“.accdb”？您是否进行了以下操作？

```
adoCon.Open "DRIVER={Microsoft Access Driver (*.mdb, *.accdb)}; DBQ=" & Server.MapPath("DatabaseName.accdb") 
```

**编辑：**

查看错误后（**“Microsoft OLE DB Provider for ODBC Drivers error '80004005'”**）似乎这篇知识库文章可能会解释问题和解决方法：http: [//support.microsoft.com/kb/926939](http://support.microsoft.com/kb/926939)

# asp.net - 为什么会话不加载第一次并在 asp.net 中使用 F5？

> ID：15953353
> 
> 赞同：1
> 
> 时间：2013-04-11T15:51:50.197
> 
> 标签：asp.net, vb.net

我在 Masterpage 页面加载中创建 asp.net 会话对象，并再次检查是否存在会话的内容页面。它在初始首次加载时不起作用。如果我刷新（F5）然后我就能得到这个。

## 掌握

```
Dim User As System.Security.Principal.IPrincipal
User = System.Web.HttpContext.Current.User

Dim username As String
username = User.Identity.Name

Try
    lblUsername.Text = "Welcome " & IIf(Not String.IsNullOrEmpty(GetFullName(User.Identity.Name)), GetFullName(User.Identity.Name), User.Identity.Name)

    Session("username") = username
Catch ex As Exception

End Try 
```

## 内容页

```
 If Not Page.IsPostBack Then
            If Not Session("username") Is Nothing Then
                Dim Clients As List(Of Dim_Client)
                Dim c As New Dim_Client
                Clients = c.GetClients(Session("username").ToString)
                If Clients.Count > 0 Then
                    ddlClients.DataTextField = "Client_Name"
                    ddlClients.DataValueField = "Client_Idx"
                    ddlClients.DataSource = Clients
                    ddlClients.DataBind()

                End If

            End If

        End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:54:35.193

我认为您的内容页面代码可能在您的母版页代码之前执行。您在哪些方法/事件中有这些陈述？

编辑 - 见这里：[asp-net-masterpage-load-first-or-page-load-first](https://stackoverflow.com/questions/4470196/asp-net-masterpage-load-first-or-page-load-first)。内容页 page_load 在母版页 page_load 之前触发

另一个编辑：对于解决方案，请尝试将母版页代码移动到 init 处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:00:27.253

看看这个页面。[http://msdn.microsoft.com/en-us/library/dct97kc3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dct97kc3(v=vs.100).aspx)

您的内容页 page_load 事件在母版页 page_load 事件之前被调用

此处提供更多信息：[FAQ：为 Pages、UserControls、MasterPages 和 HttpModules 引发事件的顺序](http://forums.asp.net/t/1191194.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:04:04.687

您正在使用 Windows 身份验证，请在 Global.asax 中应用程序的 Session_Start 中执行此工作 - 如果您的项目中没有，您可以通过在项目中添加新项目来添加它。

这样做有两个原因，首先是因为每个会话只需要完成一次，其次是因为它会在您的内容页面中可用并且可以从母版页中删除。

根据您的代码，您将在母版页中保留标签工作，但在会话中收集和设置用户名的工作是在应用程序类中完成的。

我会尝试提供一个代码示例，但我正在通过手机回答这个问题。

# svn - 如何让 TeamCity 查看 SVN 外部？

> ID：15953355
> 
> 赞同：6
> 
> 时间：2013-04-11T15:51:50.243
> 
> 标签：svn, teamcity, svn-externals

我有一个 TeamCity 正在从 SVN 下载来构建的项目。问题是我在项目中有一些 SVN 没有下载的外部文件，因此构建失败。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T08:17:09.870

它是内置的功能。[http://confluence.jetbrains.com/display/TCD7/Subversion](http://confluence.jetbrains.com/display/TCD7/Subversion)

# android - Android NDK JNI 共享变量有可能吗？

> ID：15953357
> 
> 赞同：0
> 
> 时间：2013-04-11T15:51:56.173
> 
> 标签：android, sdk, android-ndk, java-native-interface

我想将 JNI 方法的进度更新为进度条。在不创建多个工作线程的情况下，我能想到的最简单的方法是在 ProgressBar 活动中使用共享变量，然后如果我获得指向地址的正确指针，我只需更新 JNI 方法中的共享变量。可能吗？还是我必须想点别的？

可见的

```
static long int _PROGRESS = 0; 
```

我想从本地方法调用访问这个变量让我们说

```
JNI_EXPORT java_com_example(env, jobject......){
for loop{
   //do something
  _PROGRESS++; }} 
```

我怎样才能最好地创建一个指向共享变量的指针？还是每次发生更新时我都必须返回，我想避免这种给定的 JNI 调用开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:06:35.250

根据 Java 规则，它必须是类静态变量。Java 的全局范围内没有变量。

要从 C 端更新其中之一，请使用`JNIEnv::SetStaticLongField()`. 要读取当前值，请使用`GetStaticLongField()`。没有通过 JNI 直接访问变量。

请注意，这`long int`不是 Java 中的有效数据类型。`long`是。它对应`jlong`于 C 端，**与**C 不同`long`。

# dynamics-crm-2011 - 注册自定义工作流时出错

> ID：15953358
> 
> 赞同：0
> 
> 时间：2013-04-11T15:51:58.433
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

在使用 SDK 中的插件注册工具注册自定义工作流程时，我遇到了这个问题。如您所见，此包中没有显示 DLL。这里有什么问题？

![在此处输入图像描述](https://i.stack.imgur.com/eebBM.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:43:23.753

`package`将一种类型的项目添加到该解决方案中后，此问题得到解决。该`workflow`项目需要`RegisterFile.crmregister`部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:55:27.010

可能是因为您的类和该类中的函数不是`public`.

# vb.net - Visual Studio 2010 桌面程序中的引用突然丢失

> ID：15953359
> 
> 赞同：0
> 
> 时间：2013-04-11T15:52:02.043
> 
> 标签：vb.net, visual-studio-2010, visual-studio

在对我的项目进行一些更新时（通过 Compact SQL 3.5 不再需要使用数据库获取配置信息），我删除了对`system.data`、`system.data.datasetexentions`和`syste.dataSQlServerCE`.

当然 VS 因引用数据表和连接的错误而“吓坏了”，这是我所期望（和想要的）

然而，今天早上，Visual Studio 对表单和类型定义感到震惊，并出现以下错误：

> 错误 51 类型“System.Windows.Forms.Padding”未定义。C:\Users\Visual Studio Projects\VS2010\TK_NoDB\Forms\frmReports.Designer.vb
> 
> 错误 101 类型“System.Windows.Forms.Button”未定义。
> C:\Users\Visual Studio Projects\VS2010\TK_NoDB\Forms\rptCheckList.Designer.vb
> 
> 错误 72 类型“System.Diagnostics.DebuggerNonUserCode”未定义。C:\Users\Visual Studio Projects\VS2010\TK_NoDB\Forms\rptCheckList.Designer.vb

（超过 100 个！）

任何人都知道我可能做了什么以及如何解决它？

到目前为止我所做的：

1.  删除并阅读了所有参考资料（没有用，同样的错误）

2.  注意到智能想要将一些引用从 System.ComponentModel.IContainer 更改为 Global.System.ComponentModel.IContainer

3.  读取数据库引用（并再次删除它们）

4.  验证目标框架与框架引用匹配。

# iphone - 智能手机媒体查询（横向）

> ID：15953361
> 
> 赞同：5
> 
> 时间：2013-04-11T15:52:05.367
> 
> 标签：iphone, css, stylesheet, media-queries, landscape

我正在开发一个网站的智能手机友好版本，在处理智能手机横向的媒体查询时遇到了一个小问题。对于纵向，我正在使用以下媒体查询，它工作得非常好：

> @media only screen and (max-width : 320px) { style goes here }

但是当我将这个媒体查询用于横向时（取自 css-tricks.com），我为横向编写的样式会覆盖我为我的网站的桌面版本添加的样式。

> @media only screen and (min-width : 321px) { style goes here }

这仅在我为横向插入样式时发生，当我为纵向分配样式时不会发生这种情况。

PS 我正在 iPhone 4 上进行测试。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T16:00:56.110

您需要为横向设置最大宽度，直到宽度低于 800 像素，这才会覆盖您的桌面样式：

`@media only screen and (min-width : 321px) and (max-width: 800px) { style goes here }`

另一种可能性是将您的桌面样式包装到另一个查询中并将它们复制到您的纵向和横向样式下方：

```
/* PORTRAIT STYLES */
@media only screen and (max-width : 320px) { style goes here }
/* LANDSCAPE STYLES */
@media only screen and (min-width : 321px) { style goes here }
/* DESKTOP STYLES */
@media only screen and (min-width : 800px) { style goes here } 
```

请注意，横向样式将用于桌面版本。有时这是一种受欢迎的行为。

# if-statement - 批处理文件如果其他信息

> ID：15953366
> 
> 赞同：0
> 
> 时间：2013-04-11T15:52:25.833
> 
> 标签：if-statement, batch-file, goto

如果不满足以下条件，我正在尝试将我的脚本转到 GOTO 手册。但是，如果 get_info.bat 失败并引发错误，我的脚本会停止并仅显示批处理文件错误（调用 python 脚本）。它在满足条件但不满足错误/未满足时起作用。

```
for /f "tokens=1* delims=" %%x in ('get_info.bat ^| find /i "agentVersion: 4"') do @set HPSAAGT=%%x
ECHO %HPSAAGT%

IF "%HPSAAGT%"=="agentVersion: 45.0.31322.0" (set AGTVERSION=45.0.31322.0) ELSE IF "%HPSAAGT%"=="agentVersion: 40.0.0.1.106" (set AGTVERSION=40.0.0.1.106) ELSE (GOTO MANUAL) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:40:00.577

```
if a==b (echo ab) else if b==c (echo bc) else (goto manual)
rem some more code
pause
:manual
echo Manual 
```

工作正常。

您的 Label 是否可能有拼写错误`:manual`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:22:57.580

该代码对我来说很好......这可能是你的变量的问题。尝试`echo -%HPSAAGT%-`查看变量中是否有多余的空格。

此外，如果您只想要版本号，您应该只使用字符串操作，例如：

```
echo %HPSAAGT:~14% 
```

会导致

```
45.0.31322.0 
```

# java - 选择具有多个 where 子句的查询

> ID：15953370
> 
> 赞同：0
> 
> 时间：2013-04-11T15:52:33.197
> 
> 标签：java, sql, db2

我有一个序列号列表：`111111, 222222, AAAAAA, FFFFFF`我想`null`根据值是否存在返回相应的值或从表中返回。

目前我遍历我的序列号列表，使用以下语句进行查询：

```
"SELECT cnum FROM table WHERE serial_num = " + serialNumber[i]; 
```

如果返回值，则使用该值。

我更愿意这样做是一个查询并获得类似于以下内容的结果：

```
 Row | cnum
 ------------
   1 |  157
   2 |  4F2
   3 |  null
   4 |  93O
   5 |  null
   6 |  9F3 
```

是否有查询可以执行此操作，还是我陷入了循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:47:36.173

听起来好像您有某种 Java 数组或序列号集合，也许您想检查这些数字是否在 DB2 表中找到，并且您想一次完成整个列表，而不是一次不止一个。好想法。

因此，您希望有一组行，您可以使用这些行对表进行左连接，null 表示相应的序列不在表中。几个答案已经开始使用这种方法。但是他们没有返回您的行号，并且他们正在使用 SELECT UNION，这似乎是一种获得您想要的东西的迂回方式。

## VALUES 子句

您的 FROM 子句可以是[“嵌套表表达式”](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.ref.doc%2Fdoc%2Fr0059206.html) ，它可以是 带有相关子句的[（全选） 。](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.ref.doc%2Fdoc%2Fr0000877.html)(fullselect) 反过来可以是一个 VALUES 子句。所以你可以有这样的东西：

```
FROM (VALUES (1, '157'), (2, '4F2'), (3, '5MISSING'), (4, '93O'), ...
     ) as Lst (rw, sn) 
```

然后，您可以将其 LEFT JOIN 加入表中，并获得您要求的两列结果表：

```
SELECT Lst.rn, t.serial_num
  FROM (VALUES (1, '157'), (2, '4F2'), (3, '5MISSING'), (4, '93O'), ...
       ) as Lst (rw, sn)
  LEFT JOIN sometable t   ON t.serial_num = Lst.sn 
```

使用此方法，您可能需要一个循环来使用集合中的值构建动态 SQL 语句字符串。

如果它是嵌入式 SQL，我们可能能够引用包含您的序列号的主机数组变量。但是，唉，在 Java 中，我不确定如何在不使用循环的情况下直接在 SQL 中使用列表进行管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:12:51.223

如果您只使用“in”，它不会为缺失值返回 null，从而迫使您在应用程序中进行一些编码（可能是最有效的方式）。

如果您希望数据库完成所有工作（可能是理想的也可能不是理想的），那么无论如何您都必须欺骗 db2 返回您的列表。

像这样的东西可能会起作用，使用公用表表达式（带有部分）伪造要从 sysdummy 返回的空值：

```
with all_serials as (
select '111111' as serialNumber from sysibm.sysdummy1 union all ,
select '222222' as serialNumber from sysibm.sysdummy1 union all ,
select 'AAAAAA' as serialNumber from sysibm.sysdummy1 union all ,
select 'FFFFFF' as serialNumber from sysibm.sysdummy1 
) 
select 
    t1.serialNumber, 
    t2.serialNumber as serialNumberExists
from 
    all_serials  as t1 left outer join 
    /* Make sure the grain of the_Table is at "serialNumber" */ 
    the_table    as t2 on t1.serialNumber = t2.serialNumber 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:00:58.167

您可以使用 SQL`IN`关键字。您需要动态生成列表，但基本上它看起来像：

```
SELECT cnum FROM table WHERE serial_num in ('111111', '2222222', '3333333', 'AAAAAAA'...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T16:02:03.010

我不确定我是否正确理解了您，但这可能会有所帮助：

```
 String query = "SELECT cnum FROM table WHERE ";
 for(int i = 0; i < serialNumber.length; i++)
      query += "serial_num='" + serialNumber[i] + "' OR ";
 query += "serial_num IS NULL "
 System.out.println(query); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T16:09:02.647

尝试类似：

```
select t.cnum 
from 
(select '111111' serial_num from sysibm.sysdummy1 union all
 select '222222' serial_num from sysibm.sysdummy1 union all
 select 'AAAAAA' serial_num from sysibm.sysdummy1 union all
 select 'FFFFFF' serial_num from sysibm.sysdummy1) v
left join table t on v.serial_num = t.serial_num 
```

# c++ - 请解释这段代码

> ID：15953376
> 
> 赞同：-4
> 
> 时间：2013-04-11T15:52:39.713
> 
> 标签：c++

所以我一直试图在 C++ 中拆分一个字符串并将内容转储到一个向量中。我找到了问题的答案，所以我复制了解决方案并开始尝试理解它，但它似乎仍然非常神秘。我有以下代码片段，它混合了我制作和复制的材料。我已经评论了我理解其目的的每一行。有人可以填写剩余的评论（基本上解释他们的工作）。我想完全了解这是如何解决的。

```
ifstream inputfile; //declare file
inputfile.open("inputfile.txt"); //open file for input
string m; //declare string
getline(inputfile, m); //take first line from file and insert into string

std::stringstream ss(m);
std::istream_iterator<std::string> begin(ss);
std::istream_iterator<std::string> end;
std::vector<std::string> vstrings(begin, end);
std::copy(vstrings.begin(), vstrings.end(), std::ostream_iterator<std::string>(std::cout, "\n"));

while(true) //delay the cmd applet from closing
{
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T16:00:13.217

***免责声明：**真正的代码不应该包含我将要使用的注释。（它也不应该如此固执地神秘。）*

我添加了一个函数体和必要的标题。

```
#include <iostream>
#include <string>
#include <sstream>
#include <fstream>

int main()
{
   // Construct a file stream object
   ifstream inputfile;

   // Open a file
   inputfile.open("inputfile.txt");

   // Construct a string object
   string m;

   // Read first line of file into the string
   getline(inputfile, m);

   // Copy the string into a stringstream so that we can
   // make use of iostreams' formatting abilities
   std::stringstream ss(m);

   // Construct an iterator pair. One is set to the start
   // of the stringstream; the other is "singular", i.e.
   // default-constructed, and isn't set anywhere. This
   // is sort of equivalent to the "null character" you
   // look for in C-style strings
   std::istream_iterator<std::string> begin(ss);
   std::istream_iterator<std::string> end;

   // Construct a vector by iterating through the text
   // in the stringstream; by default, this extracts space-
   // delimited tokens one at a time. The result is a vector
   // of single words
   std::vector<std::string> vstrings(begin, end);

   // Again using iterators (albeit un-named ones, obtained
   // with .begin() and .end()), stream the contents of the
   // vector to STDOUT. Equivalent to looping through `vstrings`
   // and doing `std::cout << *it << "\n"` for each one
   std::copy(
      vstrings.begin(),
      vstrings.end(),
      std::ostream_iterator<std::string>(std::cout, "\n")
   );

   // Blocks the application until it is forcibly terminated.
   // Used because Windows, by default, under some circumstances,
   // will close your terminal after the process ends, before you 
   // can read its output. However: THIS IS NOT YOUR PROGRAM'S
   // JOB! Configure your terminal instead.
   while (true) {}
} 
```

可以说，这*不是*打印到控制台的最佳方式，换行符分隔，在磁盘上文本文件的第一行找到的每个标记。请不要从互联网上逐字复制代码并期望红海分开。

# sql - 获取Oracle中不包含“_”的表名

> ID：15953380
> 
> 赞同：2
> 
> 时间：2013-04-11T15:52:45.350
> 
> 标签：sql, oracle

我正在编写一个脚本，该脚本应该获取包含指定列的表名列表，并排除包含下划线的表名。我试过了：

```
SELECT TABLE_NAME
FROM USER_TAB_COLUMNS
WHERE 
    COLUMN_NAME = 'SERIAL_NUMBER' AND
    TABLE_NAME NOT LIKE '%\_%'; 
```

此查询仍会提取包含下划线的表名。我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T15:56:56.440

下划线是 LIKE 语句中的通配符——它只匹配一个字符。试试这个：

```
SELECT TABLE_NAME
FROM USER_TAB_COLUMNS
WHERE COLUMN_NAME = 'SERIAL_NUMBER' 
AND instr(TABLE_NAME, '_') = 0; 
```

* * *

发布后，我注意到您实际上试图逃避下划线。LIKE 没有默认的转义字符，所以你需要告诉数据库你在做什么：

```
 SELECT TABLE_NAME
FROM USER_TAB_COLUMNS
WHERE COLUMN_NAME = 'SERIAL_NUMBER' 
AND TABLE_NAME  NOT LIKE '%\_%' ESCAPE '\'; 
```

[找到更多。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/conditions007.htm#sthref2798)

# mysql - 如何通过 in($str) 订购

> ID：15953383
> 
> 赞同：2
> 
> 时间：2013-04-11T15:52:53.687
> 
> 标签：mysql, sql-order-by

当我从表中选择我有表时，我遇到了 orderby 的问题

```
ID        value
1         2201
2         5412
3         3300
4         6600
5         7700
6         2200
-------------------
My sql query:
SELECT * FROM table WHERE id in ('2','4','6','1','3') 
```

结果是：

```
ID        value
6         2200
1         2201
3         3300
2         5412
4         6600 
```

而且我不需要排序，我只想在字符串中显示位置

```
ID        value
2         5412
4         6600
6         2200
1         2201
3         3300 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:51:10.327

我已经解决了我的问题，我的代码是：

```
SELECT * FROM table WHERE id in ($str) ORDER BY FIELD(id,$str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:58:19.620

一种方法：

```
SELECT * FROM table 
WHERE id IN (2,4,6,1,3)
ORDER BY ID = 2 DESC, ID = 4 DESC, ID = 6 DESC, ID = 1 DESC, ID = 3 DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:59:44.797

SQL 无法做到这一点，因为它不能保证返回元组的顺序。您必须根据应用程序中的顺序进行排序，或者创建另一个列，如下所示：

```
1 2 5412
2 4 6600
3 6 2200

etc... 
```

并按新列排序。否则，应用程序中的代码将取决于您用来调用 sql 的语言。

问候，

杰森·波西特

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T16:01:10.053

尝试这个

```
 SELECT * FROM table1 WHERE id in ('2','4','6','1','3')
   order by FIELD(id, '2', '4', '6', '1', '3') 
```

[**在这里演示**](http://www.sqlfiddle.com/#!2/cc42b/4)

# internet-explorer - Chrome / IE、AngularJS 和 Access-Control-Allow-Origin

> ID：15953385
> 
> 赞同：0
> 
> 时间：2013-04-11T15:52:59.840
> 
> 标签：internet-explorer, google-chrome, angularjs

我正在 AngularJS 中构建一个应该可以通过 CD 分发的网络应用程序，但我已经分别使用 Chrome 和 IE 的相同来源策略碰到了一堵砖墙：

```
XMLHttpRequest cannot load file:///xxx. Origin null is not allowed by Access-Control-Allow-Origin. 
```

有什么办法可以在代码中或通过其他方式绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:40:47.440

我采用的解决方案是通过如下指令在`index.html`文件中内联定义所有模板：`<script type="text/ng-template">`

```
<script type="text/ng-template" id="/template.html">
     <h1>I'm the content</h1>
</script>
<ng-include src="/template.html"></ng-include> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T09:51:36.730

是的，你可以通过
`delete $http.defaults.headers.common['X-Requested-With'];`

在请求之前

# algorithm - 您如何为开发人员审核队列轮换开发算法？

> ID：15953389
> 
> 赞同：6
> 
> 时间：2013-04-11T15:53:07.903
> 
> 标签：algorithm, sorting

假设您有开发人员`A`, `B`, `C`, `D`, `E`,`F`并且他们互相审查彼此的工作。

您如何开发一种算法来生成审查轮换，告诉每个开发人员他们每周必须审查哪些工作并满足以下标准：

*   您不能连续两周审查同一个人
*   不能有闭环（`A`评论`B`，`B`评论`A`）
*   如果您在开始重复之前对其他开发人员进行一次审查，那就太好了。

我想我可以让它与奇数个开发人员一起工作，但我正在努力解决偶数个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:21:26.037

我似乎找到了一个受 Round Robin 轮换启发的解决方案。

对于开发人员`A`, `B`, `C`, `D`, `E`,`F`

你修复了一个开发人员，比如说`A`。然后顺时针旋转其余部分。

然后：

*   第一行的每个人都在评论他们下面的人
*   底行的每个人都检查他们上方和对角线右侧的人

**第 1 周：**

```
A B C
D E F

AD
BE
CF
DB
EC
FA 
```

**第 2 周：**

```
A D B
E F C

AE
DF
BC
ED
FB
CA 
```

**第 3 周：**

```
A E D
F C B

AF
EC
DB
FE
CD
BA 
```

**第 4 周：**

```
A F E
C B D

AC
FB
ED
CF
BE
DA 
```

**第 5 周：**

```
A C F
B D E

AB
CD
FE
BC
DF
EA 
```

尽管它仍然表现出一些人永远不会遇到其他人的不需要的属性，例如`B`避免`D`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:10:56.017

有简单[的循环锦标赛算法](http://en.wikipedia.org/wiki/Round-robin_tournament#Scheduling_algorithm)来获得所有可能的配对而无需重复。

```
Arrange developers in two columns, left column reviews right one.
Fix A place
Move all others in cyclic way.

A->F
B->E 
C->D

A->B
C->F 
D->E

A->C
D->B 
E->F

A->D
E->C 
F->B

A->E
F->D 
B->C 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T15:58:36.667

我会走 nieve 路线并通过圆形阵列旋转。因此，第 1 周每个人都评论右边的人 + 0。第 2 周每个人都评论右边的人 + 1。第 3 周，右边 + 2，等等。

```
Week 1:
  A -> B
  B -> C
  ...
  F -> A
Week 2:
  A -> C
  B -> D
  ...
  F -> B 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T23:42:05.780

这是 Haskell 中的蛮力（大约需要 10 秒才能开始）。

代码：

```
import Control.Monad (guard, replicateM)

developers = ["A", "B", "C", "D", "E", "F"]

combinations = filter (\x -> head x /= last x) . replicateM 2 $ developers

makeWeek week =
  if length week == length developers
     then [week]
     else do
       review <- combinations
       guard (notElem (take 1 review) (map (take 1) week)
              && notElem (drop 1 review) (map (drop 1) week)
              && notElem (reverse review) week
              && notElem review week)
       makeWeek (review:week)

solve = solve' [] where
  solve' weeks =
    if length weeks == length developers - 1
       then [weeks]
       else do
         week' <- makeWeek []
         guard (all (\x -> notElem x (concat . take (length developers - 1) $ weeks)) week')
         solve' (week':weeks) 
```

样本输出：

```
*Main> solve
[[[["F","B"],["E","A"],["D","C"],["C","E"],["B","D"],["A","F"]]
 ,[["F","C"],["E","B"],["D","A"],["C","D"],["B","F"],["A","E"]]
 ,[["F","A"],["E","C"],["D","B"],["C","F"],["B","E"],["A","D"]]
 ,[["F","E"],["E","D"],["D","F"],["C","B"],["B","A"],["A","C"]]
 ,[["F","D"],["E","F"],["D","E"],["C","A"],["B","C"],["A","B"]]],...etc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T07:42:54.947

我将假设通过*闭环*，您指的是长度正好为 2 的循环。也就是说，允许`A`reviews `B`、`B`reviews`C`和`C`reviews `A`。

设`n`人数，设`0, ..., n-1`姓名。

第 1 周： Person`i`审查 person 的代码`(i + 1) % n`。

第 2 周： Person`i`审查 person 的代码`(i + 2) % n`。

...

Week `n/2`： Person`i` **无法查看**person 的代码`(i + n/2) % n`，因为这会导致闭环。因此， person`i`反而审查了 person 的代码`(i + n/2 + 1) % n`。

周`n/2 + 1`：人`i`审查人的代码`(i + n/2 + 2) % n`。

...

Week `n - 1`: Person再次`i`审查 person 的代码`(i + 1) % n`，一切重新开始。

**注意**：违反了您的最后一个（可选）要求（每个人在循环再次开始之前审查每个其他人）。对于`n = 2`和`n = 4`，无论如何都不存在满足所有要求的解决方案。基本情况`n = 2`是微不足道的。考虑这种情况`n = 4`：如果你想避免闭环，至少一个人必须连续两次审查同一个人。（只需列举所有可能的评论关系即可看到这一点）。

如果您真的需要最后一个要求，则必须使用@groovy 的解决方案。我会把我的留在这里，因为它很容易计算。

# ruby-on-rails - 如何在终端中查看 Heroku 应用程序的当前数据库架构？

> ID：15953390
> 
> 赞同：38
> 
> 时间：2013-04-11T15:53:08.017
> 
> 标签：ruby-on-rails, heroku, terminal, schema

我试图在终端（Mac OS X Lion）中查看我的 Heroku 应用程序的架构，并偶然发现了一个执行此操作的命令。在终端中，我运行`heroku run more db/schema.rb`但它似乎显示了较旧的架构版本。我刚刚迁移了 Heroku 数据库，我注意到没有列出任何新列。

我似乎在 Heroku 的文档中找不到任何有用的东西。有谁知道查看 Heroku 应用程序当前数据库模式的命令？

顺便说一句，我继承了应用程序的代码，由于某种原因，所有迁移文件都被注释掉了（可能有 40 多个文件），所以我不能只在`rake db:migrate`本地运行来更新架构；因此，我想直接查看 Heroku 应用程序的架构。

有什么建议么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-11T16:03:33.653

您可以运行`heroku pg:psql`以启动 Postgres 控制台，然后发出`\d`以查看所有表，并`\d tablename`查看特定表的详细信息。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-11T17:03:53.897

对于 rails 架构，请尝试：

```
$ heroku run "bundle exec rake db:schema:dump && cat db/schema.rb" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T15:01:50.060

您可以使用[rateaux](http://rubygems.org/gems/rateaux)：

```
rake db:view:schema 
```

# scala - 动态类型和编程分布式系统

> ID：15953394
> 
> 赞同：14
> 
> 时间：2013-04-11T15:53:23.890
> 
> 标签：scala, erlang, distributed-computing, oz

来自 Scala（和 Akka），我最近开始研究其他设计时考虑到分布式计算的语言，即 Erlang（以及一点点 Oz 和 Bloom）。Erlang 和 Oz 都是动态类型的，如果我没记错的话（会尝试查找链接），人们曾尝试向 Erlang 添加类型并设法键入其中的大部分内容，但无法成功强制系统使其适合最后一点？

Oz 虽然是一门研究语言，但对我来说当然很有趣，但它也是动态类型的。

Bloom 当前的实现是在 Ruby 中实现的，因此是动态类型的。

据我所知，Scala（我认为 Haskell，虽然我相信它最初是为了探索纯粹的惰性函数语言而不是分布式系统）是唯一一种静态类型并提供语言级抽象的语言（因为缺乏更好的术语）在分布式计算中。

我只是想知道动态类型是否比静态类型具有固有的优势，**特别是在为编程分布式系统提供语言级别抽象的上下文中。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T16:09:09.723

并不真地。例如，后来发明 Oz 的同一组在[Alice ML](http://www.ps.uni-saarland.de/alice/)上做了一些工作，该项目的使命宣言是将 Oz 重新考虑为一种类型化的函数式语言。尽管它仍然是一个研究项目，但我认为它足以证明在这样的环境中可以支持相同的基本功能。

（完全披露：当时我是那个小组的博士生，Alice ML 的类型系统是我的论文。）

编辑：向 Erlang 添加类型的问题不是分布，它只是一个一般问题的实例，即事后向语言添加类型永远不会很好。另一方面，还有用于 Erlang 的 Dialyzer。

编辑 2：我应该提到，对于类型化分布式语言，还有其他有趣的研究项目，例如[Acute](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.107.4845)，其范围类似于 Alice ML，或[ML5](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.62.2318)，它使用模态类型来加强对移动性特征的检查。但它们只以纸的形式存在。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-11T16:49:14.880

对于分布式系统来说，动态类型相对于静态类型没有固有的优势。总的来说，两者都有自己的优点和缺点。

Erlang（Akka 的灵感来自 Erlang Actor Model）是动态类型的。[历史上选择Erlang](http://learnyousomeerlang.com/types-or-lack-thereof)中的动态类型，原因很简单。最初实现 Erlang 的人大多来自动态类型语言，尤其是 Prolog，因此，动态 Erlang 对他们来说是最自然的选择。Erlang 在构建时考虑到了失败。

静态类型有助于在编译时捕获许多错误，而不是像动态类型那样在运行时捕获。在 Erlang 中尝试了静态类型，但失败了。但是动态类型有助于更快的原型设计。[检查此链接以供参考，其中讨论了很多关于差异的内容](https://stackoverflow.com/questions/125367/dynamic-type-languages-versus-static-type-languages)。

主观上，我宁愿考虑问题的解决方案/算法，而不是考虑我在算法中使用的每个变量的类型。它还有助于快速开发。

这些是一些可能有帮助的链接

[动态打字的好处](http://c2.com/cgi/wiki?BenefitsOfDynamicTyping)

[静态类型与动态类型](http://gnuvince.wordpress.com/2008/02/15/static-typing-%E2%88%A7-dynamic-typing/)

[BizarroStaticTyping辩论](http://c2.com/cgi/wiki?BizarroStaticTypingDebate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:47:28.323

[Cloud Haskell](http://haskell-distributed.github.io/)正在快速成熟，静态类型，而且很棒。它唯一没有的是 Erlang 风格的热代码交换——这是动态类型分布式系统的真正“杀手级功能”（使 Erlang 难以静态类型的“最后一点”）。

# ember-data - 是否应该将事件传播到 hasMany 关系中的记录？

> ID：15953397
> 
> 赞同：3
> 
> 时间：2013-04-11T15:53:28.593
> 
> 标签：ember-data

`DS.Model`我在两个类之间有以下关系：

```
App.DocumentType = DS.Model.extend
  ...
  propertyTypeJoins: DS.hasMany("App.DocumentTypePropertyType")

App.DocumentTypePropertyType = DS.Model.extend
  documentType: DS.belongsTo('App.DocumentType') 
```

子记录总是嵌入并且从不单独保存：

```
App.Adapter.map 'App.DocumentType'
  propertyTypeJoins:
    embedded: 'always' 
```

`documentType`当我使用一条记录和 n 条相关记录提交事务时`DocumentTypePropertyType`，我收到以下错误：

`"Attempted to handle event 'didCommit' on <App.DocumentTypePropertyType:ember1806:38072> while in state rootState.loaded.updated.uncommitted. Called with undefined"`

查看代码，我意识到适配器的`didSaveRecord`方法向`didCommit`每个嵌入的记录发送了一个事件。这似乎很好，因为孩子被宣布与父母一起被保存（见`embedded: 'always'`上文）。

引发错误是因为`willCommit`事件未传播给子级，因此它们仍处于该`uncommitted`状态并且无法`didCommit`在该状态下处理。父级本身已转换到`inFlight`，因此不会在那里引发错误。

在我看来，观察到的行为是不一致的。要么所有事件都应该发送给孩子，要么不发送。否则会出现各种不一致的行为。

似乎我正在反对而不是使用 ember-data，所以我停下来思考我做错了什么。

你能告诉我吗？

# path - 特定于应用程序的 PATH 变量

> ID：15953402
> 
> 赞同：0
> 
> 时间：2013-04-11T15:53:35.533
> 
> 标签：path, java

这可能是一个没有答案的问题，但我认为仍然值得提出。我有两个应用程序 A 和 B，其中 A 需要 JRE 5，B 需要 JRE 7（它们带有 windows 和 linux 版本）。但是，需要 JRE 5 的应用程序不会针对 JRE 7 运行。如何在运行 A 和 B 之前根据我需要的两者中的哪一个来调整 PATH 环境变量以指向正确的 java 程序跑步？

似乎必须有一种方法来设置特定于应用程序的 PATH 变量/JREorJDK 指针。

谢谢，

杰森·波西特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:02:42.890

两个选项：从完整路径调用 java 引擎，具体取决于您想要的，例如对于 Java 5：

`c:\jdk5\bin\java.exe`|`/usr/bin/java5/java` `MyJava5Class`

相应地更改 java 7 的路径。

或者您可以设置 Java5_Home 和 Java7_Home 环境变量以指向这些位置的根安装目录（或者如果您像我一样懒惰直接进入 bin\java.exe）并使用它们调用 java 引擎：

`%Java5_Home%\bin\java.exe Java5Class`

或者

`$Java7_Home/bin/java MyShinyNewJava7Class`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:10:20.163

您可以在特定于您使用的 java 版本的服务器启动脚本中设置 JAVA_HOME

这有点棘手，如果您尝试在同一台服务器上部署应用程序，那么您必须修改启动脚本以在启动时获取 JAVA_HOME 值，然后相应地设置 JAVA_HOME。

对于 JBOSS，您可以在 JBOSS_HOME/bin/run.conf 中设置 JAVA_HOME

对于 tomcat，您可以在 CATALINA_HOME/bin/setEnv.cmd 中设置 JAVA_HOME

# python - 匹配多行的 Python 正则表达式 (re.DOTALL)

> ID：15953406
> 
> 赞同：0
> 
> 时间：2013-04-11T15:53:46.610
> 
> 标签：python, regex, multilinestring

我正在尝试解析具有多行的字符串。

假设它是：

```
text = '''
Section1
stuff belonging to section1
stuff belonging to section1
stuff belonging to section1
Section2
stuff belonging to section2
stuff belonging to section2
stuff belonging to section2
''' 
```

我想使用 re 模块的 finditer 方法来获取字典，例如：

```
{'section': 'Section1', 'section_data': 'stuff belonging to section1\nstuff belonging to section1\nstuff belonging to section1\n'}
{'section': 'Section2', 'section_data': 'stuff belonging to section2\nstuff belonging to section2\nstuff belonging to section2\n'} 
```

我尝试了以下方法：

```
import re
re_sections=re.compile(r"(?P<section>Section\d)\s*(?P<section_data>.+)", re.DOTALL)
sections_it = re_sections.finditer(text)

for m in sections_it:
    print m.groupdict() 
```

但这会导致：

```
{'section': 'Section1', 'section_data': 'stuff belonging to section1\nstuff belonging to    section1\nstuff belonging to section1\nSection2\nstuff belonging to section2\nstuff belonging to section2\nstuff belonging to section2\n'} 
```

所以section_data 也匹配Section2。

我还试图告诉第二组匹配除第一组以外的所有组。但这导致根本没有输出。

```
re_sections=re.compile(r"(?P<section>Section\d)\s+(?P<section_data>^(?P=section))", re.DOTALL) 
```

我知道我可以使用以下 re，但我正在寻找一个版本，我不必告诉第二组是什么样子。

```
re_sections=re.compile(r"(?P<section>Section\d)\s+(?P<section_data>[a-z12\s]+)", re.DOTALL) 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:55:19.813

使用前瞻来匹配*下一节*标题或字符串末尾的所有内容：

```
re_sections=re.compile(r"(?P<section>Section\d)\s*(?P<section_data>.+?)(?=(?:Section\d|$))", re.DOTALL) 
```

请注意，这也需要非贪婪`.+?`，否则它仍然会一直匹配到最后。

演示：

```
>>> re_sections=re.compile(r"(?P<section>Section\d)\s*(?P<section_data>.+?)(?=(?:Section\d|$))", re.DOTALL)
>>> for m in re_sections.finditer(text): print m.groupdict()
... 
{'section': 'Section1', 'section_data': 'stuff belonging to section1\nstuff belonging to section1\nstuff belonging to section1\n'}
{'section': 'Section2', 'section_data': 'stuff belonging to section2\nstuff belonging to section2\nstuff belonging to section2'} 
```

# paypal - PayPal - 禁用创建帐户选项

> ID：15953410
> 
> 赞同：0
> 
> 时间：2013-04-11T15:54:01.673
> 
> 标签：paypal

我正在使用 PayPal 网站付款标准。

使用信用卡/借记卡完成付款后，消费者会提示创建具有误导性的贝宝帐户。如果他们不想，他们必须选择“不，谢谢”退出。

有什么方法可以阻止 PayPal 提供此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:21:16.017

无法使用网站支付标准流程禁用此功能。

# sql - 扩展 IQueryable 以修改默认查询行为

> ID：15953412
> 
> 赞同：0
> 
> 时间：2013-04-11T15:54:05.003
> 
> 标签：sql, entity-framework, extension-methods, iqueryable

我不确定这是否是解决这个问题的正确方法，所以我希望通过这个问题获得领先。

假设我在大多数表中都有一个包含某个重复列的数据库。在我的大多数（如果不是全部）查询中，我必须过滤这个特定的列（即检查它是否为空）。这导致很多'.Where（x => x.Thingy == null）'散布在这个地方。

这本身当然不是一个真正的问题，但我想知道我是否可以将这种行为作为标准行为放在“更高”的某个地方，比如在 IQueryable 中。附带说明的是，在极少数情况下，过滤是不需要的。基本上，对表的每个（a 的一部分）查询都需要使用“WHERE thingy IS NULL”进行扩展，交织在连接等中。

问题是我真的不太确定从哪里开始。我不是在寻找实现，因为我宁愿自己弄清楚细节。

我正在寻找的是一个开始的地方，或者这是否可能。IQueryable 是正确的开始方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:55:00.797

您应该能够简单地公开一个预先过滤的`IQueryable<T>`属性：

```
public class ThingContext : DbContext
{
   public DbSet<Thing> Things
   {
      get { return Set<Thing>(); }
   }

   public IQueryable<Thing> ThingsWithoutThingy
   {
      get { return Things.Where(x => x.Thingy == null); }
   }
} 
```

任何插入和未过滤的查询都需要在`Things`属性上完成。任何过滤的查询都应使用该`ThingsWithoutThingy`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T15:09:28.870

您还可以在 Thing 上使用扩展方法：

```
public static class ThingExtensions
{
    public static IQueryable<Thing> WithoutThingy(this IQueryable<Thing> query)
    {
        return query.Where(x => x.Thingy == null);
    }
} 
```

然后你像这样使用它：

```
Things.WithoutThingy().Select(...) 
```

# html - 右对齐内容在代码中保持左内容优先

> ID：15953415
> 
> 赞同：0
> 
> 时间：2013-04-11T15:54:16.857
> 
> 标签：html, css, layout, positioning

请参阅以下代码：http: [//jsfiddle.net/chricholson/tyLbE/1/](http://jsfiddle.net/chricholson/tyLbE/1/)

**HTML**

```
<section>
    <div>Secondary content</div>

    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dictum nunc at nibh elementum vestibulum. Curabitur nisi tortor, porttitor sed facilisis vel, volutpat in quam.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dictum nunc at nibh elementum vestibulum. Curabitur nisi tortor, porttitor sed facilisis vel, volutpat in quam.</p>
</section> 
```

**CSS**

```
section { border: 1px solid red; overflow: hidden; }
div { float: right; width: 48%; height: 200px; background: #eee; }
p { width: 48%; } 
```

我有一个向右浮动的 div (BoxA)，它允许我将段落标签保留在任何单独的容器之外。我使用溢出技巧来确保外部容器增长到 a) 段落或 b) BoxA 的高度。

我想要的是将 HTML 重新排序为

1.  段落
2.  盒子A

对我来说显而易见的解决方案是 CSS 定位次要内容，但这当然会阻止外部容器的任何增长，如果 BoxA 框比段落列表长。我想在这里避免使用任何类型的 Javascript 来设置高度，从 SEO 的角度来看，这并不重要。

我能想到的另一个解决方案是将段落包装在它们自己的容器中，但这感觉像是不必要的标记，实际上不应该存在（这是一个真正应该由 CSS 处理的视觉事物）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:21:08.313

我不确定我是否正确，但似乎在标记中，您想将`<p>`s 移到之前，`<div>`但您希望显示与您的小提琴相同，即右侧的灰色区域。检查这个[小提琴](http://jsfiddle.net/z6TMJ/)，看看它是否能解决你的问题。

## 更新

## css

```
section{ border: 1px solid red; overflow: hidden; }
div{
   background: none repeat scroll 0 0 #EEEEEE;
   border: 1px solid #000000;
   display: table-cell;
   height: 246px;
   width: 1%;
}
p{
   clear: left;
   float: left;
   width: 48%;
} 
```

## 和标记（不变）

```
 <section>
     <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dictum nunc at nibh elementum vestibulum. Curabitur nisi tortor, porttitor sed facilisis vel, volutpat in quam.</p>
     <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dictum nunc at nibh elementum vestibulum. Curabitur nisi tortor, porttitor sed facilisis vel, volutpat in quam.</p>
     <div>
        Secondary content
     </div>

  </section> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:20:51.413

我建议您使用 html 包装器，如下例所示：

[http://jsfiddle.net/tyLbE/4/](http://jsfiddle.net/tyLbE/4/)

```
<section>
    <div class="left">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dictum nunc at nibh elementum vestibulum. Curabitur nisi tortor, porttitor sed facilisis vel, volutpat in quam.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dictum nunc at nibh elementum vestibulum. Curabitur nisi tortor, porttitor sed facilisis vel, volutpat in quam.</p>
    </div>
    <div class="right">
        Secondary content
    </div>
    <div class="clear"></div>
</section> 
```

和CSS：

```
section { border: 1px solid red; overflow: hidden; }
div.left { float: left; width: 48%; }
div.right { float: right; width: 48%; height: 200px; background: #eee; }
div.clear { clear: both; } 
```

您可以省略“清除”，因为您在左右框之后没有任何内容，但是如果您想在两个框下方有一些内容（即使它们没有相同的高度），这就是停止浮动的方法)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:57:53.613

首先，给 Ejay +1，这当然是我追求的结果。然而，有几件事让我对实施感到担忧（特别是`display: table-cell`and `width: 1%`。我真的不能指责它，因为它确实有效，但我的直觉告诉我有什么不对劲，将来可能会让我失望.它实际上确实有点破损，取决于容器宽度，我会在 Chrome 中得到 1px 的间隙：

![未知差距](https://i.stack.imgur.com/rgMSi.png)

无论如何，它激励我更加努力，我想出了这个：http: [//jsfiddle.net/z6TMJ/2/](http://jsfiddle.net/z6TMJ/2/)

**HTML**

```
<section>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dictum nunc at nibh elementum vestibulum. Curabitur nisi tortor, porttitor sed facilisis vel, volutpat in quam.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dictum nunc at nibh elementum vestibulum. Curabitur nisi tortor, porttitor sed facilisis vel, volutpat in quam.</p>
    <div>Secondary content</div>
</section> 
```

**CSS**

```
section {
    border: 1px solid red;
    overflow: hidden;
}
div {
    background: none repeat scroll 0 0 #EEEEEE;
    margin-left: 50%;
    width: 50%;
    height: 246px;
    border: 1px solid #000;
    box-sizing: border-box;
}
p {
    clear: left;
    float: left;
    width: 50%;
} 
```

s 以相同的`paragraph`方式设置样式，但现在`div`只留下 s 来做它自然的事情。然后使用(删除边距`margin-left`实际上会使s.`div``paragraph`

虽然这可能不适合所有场景，但我知道一些事情，比如容器的宽度、段落的宽度和次要内容，这种方式似乎很好。

# objective-c - CocoaLumberjack 打印每个语句 4 次

> ID：15953421
> 
> 赞同：0
> 
> 时间：2013-04-11T15:54:36.107
> 
> 标签：objective-c, macos, cocoa, cocoalumberjack

我正在使用 CocoaLumberjack 作为我正在开发的框架的默认日志记录系统。我按照 github 上的说明设置了框架。我将框架设置为打印到控制台和 Xcode。问题是，打印到 Xcode 会导致每条语句被打印 4 次。

这是正常的吗？还有什么我需要摆弄的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:36:38.683

不，这不正常。你提到你遵循了 GitHub 上的说明，但为了确保让我们排除非常明显的情况。

以下行添加了额外的记录器，通常应该只调用一次：

```
[DDLog addLogger:[DDASLLogger sharedInstance]];
[DDLog addLogger:[DDTTYLogger sharedInstance]]; 
```

您是否确保没有多次 (4) 次添加记录器？或者您已将这些行放入一个多次调用的方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-18T16:02:41.283

更新：对于 iOS => 10，有重复的日志： [https ://github.com/CocoaLumberjack/CocoaLumberjack/issues/765](https://github.com/CocoaLumberjack/CocoaLumberjack/issues/765)

# java - 在编辑时更改 JTable 单元格的字体

> ID：15953422
> 
> 赞同：1
> 
> 时间：2013-04-11T15:54:37.583
> 
> 标签：java, swing, fonts, jtable, tablecelleditor

我在我的 JTable 中设置了默认字体，如下所示

```
myTable.setFont(new java.awt.Font("Verdana", 1, 10)); 
```

我想在我的 JTable 中显示更大的字体，同时将一些数据输入到单元格中。所以我使用了**MyTableCellEditor**自定义类。

```
public class MyTableCellEditor extends AbstractCellEditor implements TableCellEditor {

    JComponent component = new JTextField();

    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected,
      int rowIndex, int vColIndex) {

        ((JTextField) component).setText((String) value);
        ((JTextField) component).setFont(new Font("Verdana", 1, 12));

        return component;
    }

    public Object getCellEditorValue() {
        return ((JTextField) component).getText();
    }
} 
```

下面是我将 CustomCellEditor 附加到我的表的代码。

```
myTable.getColumnModel().getColumn(1).setCellEditor(new MyTableCellEditor()); 
```

但是这段代码似乎不起作用。编辑时单元格字体变小，一旦我完成编辑并按Enter键，我设置的默认JTable字体（Verdana 10）就会生效。为什么会这样？我已经将 CustomCellEditor 字体设置为 ( Verdana 12 ) 到我的单元格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:03:09.260

不要为此创建一个新类。只需更改 DefaultCellEditor 的属性：

```
JTextField textField = new JTextField();
textField.setFont(new Font("Verdana", 1, 12));
textField.setBorder(new LineBorder(Color.BLACK));
DefaultCellEditor dce = new DefaultCellEditor( textField );
myTable.getColumnModel().getColumn(1).setCellEditor(dce); 
```

# jquery - jquery val() 没有显示 span 的值

> ID：15953423
> 
> 赞同：4
> 
> 时间：2013-04-11T15:54:40.413
> 
> 标签：jquery

在这里我试图获得跨度为 1 的值，这里`.text()`显示了正确的值，但`.val()`没有显示任何内容

```
<span class="commentpageno" id="commentpageno_1111" style="visibility: hidden">1</span>  

 $('.commentpageno').click(function (e) {
     alert($('.comment_page_no').text());
     alert($('.comment_page_no').val());
 }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T15:55:33.283

[val()](http://api.jquery.com/val/)不用于 span 或 div 它用于输入控件，如文本、复选框等

> .val **()**方法主要用于获取输入、选择和文本区域等表单元素的值。在元素的情况下， .val() 方法返回一个包含每个选定选项的数组；如果未选择任何选项，则返回 null，[**jQuery 文档**](http://api.jquery.com/val/)
> 
> **.text()**方法不能用于表单输入或脚本。要设置或获取 input 或 textarea 元素的文本值，请使用 .val() 方法。要获取脚本元素的值，请使用 .html() 方法，**[jQuery docs](http://api.jquery.com/text/)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T15:55:51.717

您的班级名称是`commentpageno`并且您正在听`comment_page_no`

做

```
alert($('.commentpageno').text()); 
```

因为`.val()`不适用于跨度。

# windows-7 - 在windbg中找不到符号

> ID：15953440
> 
> 赞同：0
> 
> 时间：2013-04-11T15:55:36.440
> 
> 标签：windows-7, kernel, driver, windbg

我正在尝试使用vmware和windbg在远程调试中调试内核。我已经连接到目标机器。我的驱动程序名称是comint32。我已经在目标机器上启动了我的驱动程序的服务。我想查看我的驱动程序的dbgprint。每当我尝试使用断点出现错误“无法解决'comint32！DriverEntry'处的错误”。这是windbg的当前状态输出：

```
kd> x*!
start    end        module name
80bd1000 80bd9000   kdcom      (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\kdcom.pdb\F48BD9BC030C43D89689518F892586901\kdcom.pdb
82812000 82849000   hal        (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\halmacpi.pdb\AE605D6C59454802AE1D485E0B089A571\halmacpi.pdb
82849000 82c5b000   nt         (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\ntkrpamp.pdb\684DA42A30CC450F81C535B4D18944B12\ntkrpamp.pdb
82e09000 82e8e000   mcupdate_GenuineIntel   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\mcupdate_GenuineIntel.pdb\26689A9400E04CF6AD63DC2E608DAA9C1\mcupdate_GenuineIntel.pdb
82e8e000 82e9f000   PSHED      (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\pshed.pdb\5ACEAFD8AD3A46FEAD083AFDF675DA391\pshed.pdb
82e9f000 82ea7000   BOOTVID    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\bootvid.pdb\10C3ABD4165D4ED3A9493BB094B44AEA1\bootvid.pdb
82ea7000 82ee9000   CLFS       (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\clfs.pdb\04F22EAC7BD04A1BA81A6FB5D319649F1\clfs.pdb
82ee9000 82f94000   CI         (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\ci.pdb\3358E6E48A5245F6AB97EA05356E020F1\ci.pdb
82f94000 82fdf000   volmgrx    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\volmgrx.pdb\433F00DD3CC34DE8BC3F9E4BDDACA5EE1\volmgrx.pdb
82fdf000 82fed000   PCIIDEX    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\pciidex.pdb\8B7BC6201128486CB5B03916EBD5FF8E1\pciidex.pdb
83800000 83807000   intelide   (no symbols)           
8380a000 8387cd00   dsfksvcs   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\dsfksvcs.pdb\EE67C173CB4C4B31BA3806038D42B3C01\dsfksvcs.pdb
8387d000 838b8500   DSFOleaut32   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\DSFOleaut32.pdb\F02C6A23966243E1B10F05EB634A88331\DSFOleaut32.pdb
838b9000 8392a000   Wdf01000   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\Wdf01000.pdb\A9E46808F4F748178D3071AA9EE76FB71\Wdf01000.pdb
8392a000 83938000   WDFLDR     (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\wdfldr.pdb\95D9DB57778548E6B6774520468479891\wdfldr.pdb
83938000 83980000   ACPI       (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\acpi.pdb\E7300A0CC3524834A4E1E55773C1901E1\acpi.pdb
83980000 83989000   WMILIB     (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\wmilib.pdb\F52B38A4800849D48BFFD48715A446A51\wmilib.pdb
83989000 83991000   msisadrv   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\msisadrv.pdb\5D6926DA4AD1474BAE8CBDA5909F68201\msisadrv.pdb
83991000 839bb000   pci        (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\pci.pdb\2E2A912260694615A7E97AFBA3FA934E1\pci.pdb
839bb000 839c6000   vdrvroot   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\vdrvroot.pdb\3C9D6939EF564015B8D0728611C88C221\vdrvroot.pdb
839c6000 839d7000   partmgr    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\partmgr.pdb\7CA861FF7879483ABA38CE28186F293E2\partmgr.pdb
839d7000 839df000   compbatt   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\compbatt.pdb\EE14F03B54BF49B4B62A0EF912A59C8F1\compbatt.pdb
839df000 839ea000   BATTC      (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\battc.pdb\53C47BEA2F08470BB58DFD1566285EC71\battc.pdb
839ea000 839fa000   volmgr     (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\volmgr.pdb\4AF04B598C494297B1C69F95823AA9F81\volmgr.pdb
83a24000 83a3a000   mountmgr   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\mountmgr.pdb\356DDF9839E040638E034EEA956C28F81\mountmgr.pdb
83a3a000 83a43000   atapi      (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\atapi.pdb\EF544461A5D5482980C2CA01640A6D621\atapi.pdb
83a43000 83a66000   ataport    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\ataport.pdb\C9AF9FE9166548FD86EFAC017F6023011\ataport.pdb
83a66000 83a7e000   lsi_sas    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\lsi_sas.pdb\FCC2DAF36299423A9765B62D750A97461\lsi_sas.pdb
83a7e000 83ac6000   storport   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\storport.pdb\E19FF676062D46A69EB1BB6A916896172\storport.pdb
83ac6000 83acf000   amdxata    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\amdxata.pdb\5E66F230920844408A1EE389D50B6B4A1\amdxata.pdb
83acf000 83b03000   fltmgr     (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\fltMgr.pdb\E6CA9E082E70438988788CB58DB340B01\fltMgr.pdb
83b03000 83b14000   fileinfo   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\fileinfo.pdb\EBD1E885413A4242AA515F1B06BB564F1\fileinfo.pdb
83b14000 83bcb000   ndis       (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\ndis.pdb\4DAAA54E2C26455DB2471D696BC8E6A62\ndis.pdb
83bcb000 83bfc000   fwpkclnt   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\fwpkclnt.pdb\FDE8223F22C54AEA8061EE56EA16A0251\fwpkclnt.pdb
88c00000 88c0e000   pcw        (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\pcw.pdb\D368300F340A423EBBA32FBDDDEC24B91\pcw.pdb
88c0e000 88c17000   Fs_Rec     (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\fs_rec.pdb\3465ED05A901452FAD07E77351F094591\fs_rec.pdb
88c2b000 88d5a000   Ntfs       (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\ntfs.pdb\04B176C327B240F7A576F3417A7B95032\ntfs.pdb
88d5a000 88d85000   msrpc      (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\msrpc.pdb\B4C428CFD1024C43BD3E2B10D1A8F0711\msrpc.pdb
88d85000 88d98000   ksecdd     (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\ksecdd.pdb\E84CBB7448354030A32188581CC8B37A1\ksecdd.pdb
88d98000 88df5000   cng        (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\cng.pdb\3F94705B83A0481DA755FA6A70729BDE1\cng.pdb
88df5000 88dfb000   comint32   (no symbols)           
88e25000 88e63000   NETIO      (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\netio.pdb\7A33726ABE884384BFDFB951F05D13AC2\netio.pdb
88e63000 88e88000   ksecpkg    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\ksecpkg.pdb\3D42090DFF4E4D55985F577277A3B1E91\ksecpkg.pdb
88e88000 88fd2000   tcpip      (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\tcpip.pdb\0FD6F17209C1481C9008CCDB468746392\tcpip.pdb
88fd2000 88fd7580   dsfroot    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\dsfroot.pdb\95EE5096213948909946E4333289A97F1\dsfroot.pdb
88fd8000 88fe0380   vmstorfl   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\vmstorfl.pdb\D7FD176CC0134139B2EE4BEAF352AEE41\vmstorfl.pdb
89032000 89071000   volsnap    (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\volsnap.pdb\1F66E7165E8F4BD982A34A9DFA1BBFD31\volsnap.pdb
89071000 89079000   spldr      (no symbols)           
89079000 890a6000   rdyboost   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\rdyboost.pdb\53BB42ABE1404332962CA2AEA8301D331\rdyboost.pdb
890a6000 890b6000   mup        (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\mup.pdb\E96F69551E2447289250F71FB5AB6E0C2\mup.pdb
890b6000 890be000   hwpolicy   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\hwpolicy.pdb\0F041CEBADCA48F4BC65F68463272F1D1\hwpolicy.pdb
890be000 890f0000   fvevol     (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\fvevol.pdb\DC4549C710EE425F8956C7D82BFE83651\fvevol.pdb
890f0000 89101000   disk       (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\disk.pdb\D2AD04F7F4BF45C8A8F0E2BF689326F11\disk.pdb
89101000 89126000   CLASSPNP   (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\classpnp.pdb\64A86A6AD27D4730A78ECC25166E13562\classpnp.pdb
89126000 89136000   agp440     (pdb symbols)          C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\agp440.pdb\BDB51BE7BF024CCF893C1E44B0C266C71\agp440.pdb

kd> .reload /f comint32

"comint32" was not found in the image list.
Debugger will attempt to load "comint32" at given base 00000000.

Please provide the full image name, including the extension (i.e. kernel32.dll)
for more reliable results.Base address and size overrides can be given as
.reload <image.ext>=<base>,<size>.
DBGENG:  comint32 - Partial symbol image load missing image info
DBGHELP: No header for comint32\.  Searching for dbg file
DBGHELP: c:\chapter03ghost\src\objchk_win7_x86\i386\comint32.dbg - file not found
DBGHELP: .\comint32.dbg - file not found
DBGHELP: comint32 missing debug info.  Searching for pdb anyway
DBGHELP: Can't use symbol server for comint32.pdb - no header information available
DBGHELP: C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\comint32.pdb\5E9D372C84174583B2DD476990BF10BA1\comint32.pdb already cached
DBGHELP: comint32_0 - private symbols & lines 
         C:\Program Files (x86)\Debugging Tools for Windows (x86)\sym\comint32.pdb\5E9D372C84174583B2DD476990BF10BA1\comint32.pdb - unmatched
Unable to add module at 00000000

the symbol path of windbg:
kd> .sympath
Symbol search path is: srv*;C:\Chapter03Ghost\bin
Expanded Symbol search path is: cache*;SRV*http://msdl.microsoft.com/download/symbols;c:\chapter03ghost\bin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:26:50.603

检查以确保驱动程序已加载。您可以使用`lm`或`lmvm comint32`第一个命令将列出所有模块来执行此操作，第二个命令将为您提供有关 comint32 的详细信息。如果它没有在加载的模块中列出，那么很可能驱动程序还没有加载。如果它被加载，那么它给出这个错误有点奇怪，但我猜它没有加载。

# mercurial - Mercurial：如何在拉动时添加钩子

> ID：15953441
> 
> 赞同：3
> 
> 时间：2013-04-11T15:55:36.277
> 
> 标签：mercurial, mercurial-hook

我已经为此搜索了一段时间，但什么也没看到。这可能意味着，它不应该完成，或者它就是不能完成。

我查看了 mercurial 的钩子列表，但在您发出 hg pull 命令后，我似乎找不到（或让一个工作）执行脚本。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:59:05.950

从[关于“钩子”的 hgrc 文档部分](http://www.selenic.com/hg/help/hgrc)-

```
"incoming"
  Run after a changeset has been pulled, pushed, or unbundled into the
  local repository. The ID of the newly arrived changeset is in
  "$HG_NODE". URL that was source of changes came is in "$HG_URL". 
```

或者...

```
"post-<command>"
  Run after successful invocations of the associated command. The contents
  of the command line are passed as "$HG_ARGS" and the result code in
  "$HG_RESULT". Parsed command line arguments are passed as "$HG_PATS" and
  "$HG_OPTS". These contain string representations of the python data
  internally passed to <command>. "$HG_OPTS" is a dictionary of options
  (with unspecified options set to their defaults). "$HG_PATS" is a list
  of arguments. Hook failure is ignored. 
```

（文档还详细介绍了配置的实际外观以及如何调用挂钩脚本。）

# java - 如何将文本从键盘捕获到字符串

> ID：15953444
> 
> 赞同：0
> 
> 时间：2013-04-11T15:55:40.220
> 
> 标签：java, android, string, text

我需要使用键盘系统将文本捕获到字符串。我在功能上显示键盘：`KeyboardSystem.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);` 我想在这个键盘上捕获文本。有可能的 ？

# paypal - 使用 Pay Pal v0.51 的 FireFox 安全警告

> ID：15953445
> 
> 赞同：1
> 
> 时间：2013-04-11T15:55:47.260
> 
> 标签：paypal, paypal-ipn

我正在使用 `PHP Toolkit for PayPal v0.51`

我已经设置了 Pay Pal 沙盒帐户并对 ipn.php 进行了测试，结果正常。

我已将 config.inc.php 设置为适合我的设置

`PHP Version 5.3.3-7+squeeze15` `mysql`并`cURL`安装一切正常。

**当与 IE 一起使用时，**
一切正常，事务返回到`success.php`并在`ipn_success.php` 我有它使用从 Pay Pal 发回的信息更新数据库。

**使用 Firefox 时，**
一切正常，直到我返回到 success.php 的部分，我得到一个安全警告框，其中包含以下信息。

> 尽管此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取。
> 
> 您确定要继续发送此信息吗？

如果我立即单击警告，我会返回信息并更新数据库。

如果我离开这个警告几秒钟，我会丢失所有为数据库发回站点的信息。

使用 Firefox 时如何阻止显示此安全警告

该网站使用的是 http 而不是 https，因此 Pay Pay 将发回非 ssl 网站。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-11T17:24:21.553

这实际上是我们目前正在调查的 FireFox 的一个已知问题。如果您希望在问题得到解决后收到通知，您可以向[PayPal 的商家技术支持](http://www.paypal.com/mts)开一张票。PPXO-7400

# java - ksoftware 代码签名 java 跨平台游戏

> ID：15953448
> 
> 赞同：1
> 
> 时间：2013-04-11T15:55:56.463
> 
> 标签：java, cross-platform, code-signing, leap-motion

我目前正在为 Java 中的跳跃运动控制器开发游戏。该应用程序将在 osx 和 windows 之间跨平台。我在代码签名证书上搜索了很多，我终于找到了仅售 99 美元的一年证书的 ksoftware 有没有人有这些经验？我真的很感激一些关于是否或注意选择它们的提示，或者也许还有其他更好的选择。

谢谢//西蒙尼尔森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:13:24.867

我希望我通过电子邮件很好地回答了您的问题，但如果我没有回答，请告诉我。我很乐意帮助您在两个（或所有 3 个）平台上签名您的文件。

# iphone - 可达性 hostStatus 返回假阴性

> ID：15953450
> 
> 赞同：0
> 
> 时间：2013-04-11T15:55:59.487
> 
> 标签：iphone, ios, objective-c, reachability

所以，我知道这里有很多关于实现可达性的帖子，但我找不到任何可以回答我的具体问题的帖子。

我正在实现以下代码，但由于某种原因，hostStatus 总是以 NotReachable 的形式返回。

我的 .h 文件：

```
#import <UIKit/UIKit.h>
#import "Reachability.h"

@class Reachability;
@interface ViewController : UIViewController<UINavigationControllerDelegate>{

  Reachability* hostReachable;
  Reachability* internetReachable;

}

@property (nonatomic, assign) BOOL wifiReachable;
@property (nonatomic, assign) BOOL networkReachable;
@property (nonatomic, assign) BOOL internetUsable; 
```

我的 .m 文件：

```
#import "ViewController.h"
#import "Reachability.h"
#import "Reachability.m"

@interface ViewController ()
@end

@implementation ViewController
- (void)viewDidLoad{
  [super viewDidLoad];

  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:kReachabilityChangedNotification object:nil];

internetReachable = [Reachability reachabilityForInternetConnection];
  hostReachable = [Reachability reachabilityWithHostName:@"www.google.com"];

  [internetReachable startNotifier];
   [hostReachable startNotifier];
  // now patiently wait for the notification
  [self checkNetworkStatus:kReachabilityChangedNotification];

  if(self.internetUsable==TRUE){
    //DO STUFF
  }
  else{
    [self internetAlert];
    //DO OTHER STUFF
  }
}

-(void) checkNetworkStatus:(NSNotification *)notice{

  // called after network status changes
  NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
  NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
  NSLog(@"%u", hostStatus);
  if(internetStatus==NotReachable){
    NSLog(@"The internet is down.");
    self.internetUsable=FALSE;
  }
  else{
    if(internetStatus==ReachableViaWWAN){
      NSLog(@"The internet is working via WWAN.");
      self.networkReachable=TRUE;
      self.internetUsable=TRUE;
    }
    else if (internetStatus==ReachableViaWiFi) {
      NSLog(@"The internet is working via WIFI.");
      self.wifiReachable=TRUE;
      self.internetUsable=TRUE;
    }
    else{
      self.networkReachable=FALSE;
      self.wifiReachable=FALSE;
      self.internetUsable=FALSE;
      NSLog(@"The internet is NOT useable.");
    }
  }

  if(self.internetUsable==TRUE)
  {

    if(hostStatus==NotReachable)
    {
      self.internetUsable=FALSE;
      NSLog(@"Could not connect to the host");
    }
  }

} 
```

我的猜测是它在正确检查 hostStatus 连接之前进入 CheckNetworkStatus 方法。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:36:45.730

你是对的。问题是`Reachability`调用不是同步的。该方法`-checkNetworkStatus:`是一个[回调](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)，这意味着您不直接调用它。相反，只要系统注意到网络可达性发生了变化，它就会调用该方法本身。实际上，您的代码会在`Reachability`对象被实例化后立即检查网络状态，并且早在它们从网络得到任何回复之前。删除`-checkNetworkStatus:`from `-viewDidLoad`，你应该得到正确的结果。

（无论如何，您都会收到编译器警告，因为`kReachabilityChangedNotification`它是 a而非 a ——选择并右键单击并执行“跳转到定义”以查看它——它在 中）。`#define``NSString``UINotification``Reachability.h`

-旁注 - 确保你打电话- 如果你忘记并且对象被解除分配，你会遇到烦人的崩溃（这已经让我失望了）`[[NSNotificationCenter defaultCenter]removeObserver:self name:kReachabilityChangedNotification object:nil];`。`-dealloc`

# javascript - 无法通过更改验证

> ID：15953453
> 
> 赞同：0
> 
> 时间：2013-04-11T15:56:04.243
> 
> 标签：javascript, validation, onchange

嘿，我正在使用 onchange 属性，或者我们调用它们，当使用我必须使用的 w3c 验证器时，它不会在 XHTML 1.0 Strict 中验证，我需要一种解决方法，以便我的代码仍然可以工作并验证。错误是：第 211 行，第 32 列：没有属性“onchange”

这是它影响或 w/e 的值（不按正确的顺序剪切和粘贴）

```
Cost of Registration:<input id="cost" name="cost" readonly="readonly"/>
<p>
<input type="checkbox" id="monday" name="Attending" value="monday" />Monday<br />
<input type="checkbox" id="tuesday" name="Attending" value="tuesday" />Tuesday<br />
<input type="checkbox" id="wesnesday" name="Attending"value="wednesday"/>Wesnesday<b/></p> 
```

我有另一个 onchange 验证器似乎没有问题

```
<p>
 <select id="regcat" onchange="autofill()">
 <option value="UWS Student">UWS Student</option>
 <option value="Student at another institution">Student at another institution</option>
 <option value="UWS Academic">UWS Academic</option>
 <option value="Other UWS Staff">Other UWS Staff</option>
 <option value="Academic from another Institution">Academic from another   Institution</option>
 <option value="Professional">Professional</option>
 <option value="Retired">Retired</option>
</select>
</p> 
```

可以在任何地方找到解决方法。（抱歉语法和拼写很晚）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:00:42.257

您需要通过 JavaScript 而不是属性附加事件处理程序。如果您使用 jQuery：

```
$('#regcat').change(autofill); 
```

如果您还没有使用它，您需要将它放在一个文档准备好的包装器中。最短的方法：

```
$(function() {
    $('#regcat').change(autofill);
}); 
```

如果您不使用 jQuery，您将使用[addEventListener 方法](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)（但同样，您需要考虑 DOM 已准备好）。如果您不使用 jQuery 并且需要支持 IE <9，那么不幸的是，您还必须在条件注释包装器中添加[attachEvent](http://msdn.microsoft.com/en-us/library/ms536343%28v=vs.85%29.aspx)调用。

# eclipse - 如何为上下文菜单的子菜单做出贡献？

> ID：15953454
> 
> 赞同：1
> 
> 时间：2013-04-11T15:56:08.340
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在尝试在视图部分的上下文菜单中定义一个子菜单条目。

我想通过我自己的插件在这个子菜单中贡献一个“连接配置文件”菜单项，我希望其他插件也可以为这个子菜单贡献菜单项。

我的插件.xml

```
<extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:cn.ggfan.dmp.view.explorer">
         <menu
               id="new"
               label="New">
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:new?after=additions">
         <command
               commandId="cn.ggfan.dmp.commands.addCP"
               label="Connection Profiles"
               style="push">
         </command>
      </menuContribution>
   </extension> 
```

它不起作用。我的代码有什么问题？

------------------------------------**编辑**------------
如果我定义像这样的子菜单，它的工作原理。但我仍然不知道如何在其他插件中为我的“新”子菜单做出贡献。

```
<menuContribution
            allPopups="false"
            locationURI="popup:cn.ggfan.dmp.view.explorer">
         <menu
               id="new"
               label="new">
            <command
                  commandId="cn.ggfan.dmp.commands.addCP"
                  label="Connection  Profiles"
                  style="push">
            </command>
         </menu>
      </menuContribution> 
```

![在此处输入图像描述](https://i.stack.imgur.com/NmviQ.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:46:52.433

最后，我明白了，我的“新”子菜单应该被视为“弹出”而不是“菜单”：

```
<extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:cn.ggfan.dmp.view.explorer">
         <menu
               id="cn.ggfan.new"
               label="New">
            <command
                  commandId="cn.ggfan.dmp.commands.addCP"
                  label="Connection Profile"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:cn.ggfan.new?after=additions">
         <command
               commandId="cn.ggfan.dmp.commands.addTable"
               label="Table"
               style="push">
         </command>
      </menuContribution>
   </extension> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:53:44.493

尝试使用`menu:cn.ggfan.dmp.view.explorer`而不是`popup:cn.ggfan.dmp.view.explorer`.

请参阅[使用菜单扩展点](http://tonnymadsen.blogspot.dk/2007/06/working-with-menus-extension-point.html)- 我大约 6 年前写的一篇博客文章 :-)

# java - Java Scanner 一直要求输入，直到变量为 double 或 int，或为空，此时被赋予默认值

> ID：15953456
> 
> 赞同：0
> 
> 时间：2013-04-11T15:56:17.280
> 
> 标签：java

这是我所要求的伪

```
1\. Take value
2\. is value double or int?
3\. if so, continue in program
4\. else
5\. is value empty?
6\. if value empty; value=0.08
7\. else
8\. at this stage, value is not an empty valid, or a valid double or valid int
9\. user did it wrong, prompt error
10\. jump to step one take value 
```

所以对我来说这很复杂，我对此很陌生。

我一直试图这样暗示它；

```
while ( costscan.hasNext() )
  {
    double costperkm = costscan.nextDouble();
    if (costperkm=double){
      System.out.println("Value is double");
      System.out.println("FUEL COST SAVED ");
    }
    else {
            if(costperkm=null){
               costperkm=0.08;
          }
            else{

                }
    System.out.println("FUEL COST SAVED ");
         }
    System.out.print("\n");
    System.out.print("\n");
  } 
```

我上面的代码只是玩弄的结果，所以在这个阶段它甚至可能不再有意义。希望有人能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:33:20.367

`hasNextDouble`and的问题`nextDouble`在于，只要用户按下回车键，他们就会一直要求输入。

如果你想在用户简单地按下回车时使用默认值，你应该使用`Scanner.nextLine`combine with `Double.parseDouble`，因为`nextLine`它是唯一接受空输入的 next-method。

这是一个可能的解决方案：

```
String input;
while(true) {
    input = costscan.nextLine();
    if(input.isEmpty()) {
        input = "0.08";
        break;
    }
    if(isParseable(input)) {
        break;
    }
    System.out.println("ENTER ONLY NUMBERS [DEFAULT 0.08]");
}
double costperkm = Double.parseDouble(input); 
```

该方法`isParseable`如下所示：

```
private static boolean isParseable(String str) {
    try {
        Double.parseDouble(str);
        return true;
    } catch(NumberFormatException e) {
        return false;
    }
} 
```

# dynamics-ax-2012 - Dynamics AX 2012 AOT 对象查找

> ID：15953457
> 
> 赞同：0
> 
> 时间：2013-04-11T15:56:21.233
> 
> 标签：dynamics-ax-2012, aot

任何人都有 AOT 对象的示例查找代码？（或者知道在哪里可以找到他们用于 AX 属性窗口的那个）

我需要复制您在属性窗口的几个字段中看到的功能。ExtendedDataType 字段就是一个很好的例子。键入几个字母，点击向下箭头，将出现经过筛选的 AOT ExtendedDataType 对象列表。

我一直在尝试使用 treeNode findChildren 来构建我的自定义查找列表，但它非常慢。AX 使用的任何方法都会立即发生。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T04:00:09.810

尝试这个：

```
Dictionary d = new Dictionary();
int i;
int cnt = d.tableCnt();
TableId tableId;
str nameForLookup;

for (i = 1; i <= cnt; i++)
{
    tableId = d.tablecnt2id(i);
    nameForLookup = tableid2name(tableId);
} 
```

对 Model/Util*Element 表的查询不会被缓存，并且由于它们包含的记录数量而相对较慢。

可能还有其他因素会减慢执行速度。如果您在 2012 年进行查找，您可能希望使用 XDS() 方法构建一个临时表，该方法使用上述代码自行填充，然后您可以简单地从该表中进行选择（并将为会话缓存） ：

1.  创建一个 SQL Temp 表（例如，名称类似于 MyTableLookup），添加一个名称列
2.  添加这样的方法：

    公共刷新频率 XDS()

    {

    ```
    MyTableLookup tableLookup;

    ttsbegin;
    // Use the above code to insert records into tableLookup
    ttscommit;

    return RefreshFrequency::PerSession; 
    ```

    }

3.  将您的表单绑定到 MyLookupTable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:29:57.927

您可以开发链接到正确过滤的 UtilElement 表的 estándar EDT。这将显示一个对象列表，并具有与所有表链接文本字段相同的功能。

# php - ajax post上的php会话ID更改

> ID：15953459
> 
> 赞同：0
> 
> 时间：2013-04-11T15:56:31.780
> 
> 标签：php, ajax, session-cookies, sessionid

当我从 sub.mydomain.com 到 domain.com 发布 ajax 帖子时遇到问题。我已将 cookie 设置为 .mydomain.com 并且我知道会话设置正确，因为如果我在浏览器中转到 sub.mydomain.com 会话 ID 与 mydomain.com 会话 ID 匹配。但是，当我从 sub.mydomain.com 到 mydomain.com 进行 ajax 发布时，会话 ID 会发生变化。

为了解决这个问题，我在帖子中传递了会话 ID。

但我想知道为什么它不像它应该的那样工作。

任何想法都会有所帮助。

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:03:21.223

Cookie 不会在跨源请求中发送（我假设您正在将其用于会话），为了启用此功能，您必须`withCredentials`在请求和响应上都进行设置。
请求`xhr.withCredentials = true;`
响应头`Access-Control-Allow-Credentials: true`

# javascript - less / css - 定位具有 (n) 值的数据属性的 dom 元素

> ID：15953461
> 
> 赞同：5
> 
> 时间：2013-04-11T15:56:42.157
> 
> 标签：javascript, css, less

我有一个导航菜单，它根据菜单层次结构/分类中的深度为菜单项分配一组颜色。因此，例如，所有顶级菜单项的颜色为黑色，下一级为红色，下一级为绿色，等等，并且由于层次结构非常深，我想使用数学来定位它们，有点像该css可以针对第n个孩子。但是，我不能使用 nth-child，因为这些容器元素（“浏览级别”）是从 DOM 中动态添加和删除的（它们并非同时都在 DOM 中），这就是我成为目标的原因数据属性。

所以这是CSS：

```
.browse-level[data-level="1"] li a {
  background: @level1;
}

.browse-level[data-level="2"] li a {
  background: @level2;
}

.browse-level[data-level="3"] li a {
  background: @level3;
}

.browse-level[data-level="4"] li a {
  background: @level4;
} 
```

... ETC

有 8 个颜色值（之后序列将重复）。我可以（使用 LESS 或纯 CSS）缩短此代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T15:21:12.597

我会去

```
@level1: #aaa;
@level2: #bbb;
@level3: #ccc;
@level4: #ddd;
@level5: #eee;
@level6: #fff;
@level7: #000;
@level8: #111;

.mymixin(@lev) when ( @lev > 0 ) {
  @ruleNameA: e('.browse-level[data-level="');
  @ruleNameB: e('"] li a');
  @{ruleNameA}@{lev}@{ruleNameB} {
    @bgAux: e('level@{lev}');
    background: @@bgAux ;
    }
  .mymixin( @lev - 1 ) ;
}

.mymixin(8); 
```

根据[http://less2css.org/](http://less2css.org/)它产生：

```
.browse-level[data-level="8"] li a {
  background: #111111;
}
.browse-level[data-level="7"] li a {
  background: #000000;
}
.browse-level[data-level="6"] li a {
  background: #ffffff;
}
.browse-level[data-level="5"] li a {
  background: #eeeeee;
}
.browse-level[data-level="4"] li a {
  background: #dddddd;
}
.browse-level[data-level="3"] li a {
  background: #cccccc;
}
.browse-level[data-level="2"] li a {
  background: #bbbbbb;
}
.browse-level[data-level="1"] li a {
  background: #aaaaaa;
} 
```

# vb.net - 预期值不显示在列表框中

> ID：15953462
> 
> 赞同：0
> 
> 时间：2013-04-11T15:56:43.480
> 
> 标签：vb.net

我有一个投资回报应用程序，该应用程序将收取投资金额并每年产生总额的 5% 的回报，并以`ListBox`. 我没有收到任何错误，但 GUI 没有在列表框中显示投资收益。任何建议，将不胜感激。这是我到目前为止的代码：

```
 Public Class Form1

        Const Interest_Rate As Double = 0.05

Private Sub btncmdCalculate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btncmdCalculate.Click

   Dim num_years As Integer
   Dim intCounter As Integer
   Dim current_value As Double
   Dim future_amount As Double

   current_value = Val(txtcurrent_value.Text)
       num_years = Val(txtnum_years.Text)
   current_value = current_value * Interest_Rate * num_years & vbTab _
            'calculate amount

   For intCounter = 1 To num_years
        future_amount = current_value * (1 + Interest_Rate) ^ intCounter

        lstBalances.Text = current_value * Math.Pow(1 + Interest_Rate, intCounter) &    "" & _ vbTab & FormatCurrency(current_value)"

   Next intCounter
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:04:04.473

如果 lstBalances 是一个列表框，那么您需要将您的计算添加到 Items 集合

```
lstBalances.Items.Add(current_value * Math.Pow(1 + Interest_Rate, intCounter) &  vbTab & _
                      FormatCurrency(current_value)) 
```

作为旁注：我真的不明白你的计算，所以我不能说你所做的是否正确，只是试图用列表框解决你的编程问题.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:01:05.880

您似乎正在为循环的每次迭代设置列表框的文本。根据您的描述，听起来您想为每次迭代*附加*一个值，例如：

```
lstBalances.Text &= current_value * Math.Pow(1 + Interest_Rate, intCounter) & vbTab & FormatCurrency(current_value) & vbCrLf 
```

# powershell - 如何使用powershell强制复制文件

> ID：15953474
> 
> 赞同：3
> 
> 时间：2013-04-11T15:57:19.080
> 
> 标签：powershell, copy-item

我正在使用 powershell 使用以下命令将文件复制到远程计算机：

```
Copy-Item -Path [MyPath]\* -Destination \\[server]\[MyPath] -force 
```

它工作得很好，但有时我会收到以下错误消息：“进程无法访问文件 [...]，因为它正在被另一个进程使用。”。

是否可以强制复制文件，即使它正在使用中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:05:42.257

唯一的方法是摆脱进程对您正在覆盖的文件的句柄。

它是访问文件的服务或桌面应用程序。[您可以使用SysInternals](http://technet.microsoft.com/en-US/sysinternals)中的 handle.exe 找出可以访问该文件的内容。

一旦你知道什么正在访问该文件，你就可以远程停止/杀死它（假设你有这样做的权限）。

*   [停止远程服务](http://learn-powershell.net/2012/01/15/startingstopping-and-restarting-remote-services-with-powershell/)
*   [停止远程进程 (Invoke-Command)](http://blog.wetzelerweb.com/2010/02/17/calling-stop-process-on-a-remote-machine-using-powershell/)，[停止远程进程 (WMI)](http://4sysops.com/archives/query-and-kill-a-process-on-a-remote-computer-using-powershell-and-wmi/)

# jquery - 选择器jQuery

> ID：15953478
> 
> 赞同：0
> 
> 时间：2013-04-11T15:57:31.520
> 
> 标签：jquery, html, css, jquery-selectors

你好，我正在学习 jquery 和 JavaScript，我有一堆 div 和它们里面的 span，所有这些 div 都有相同的类，而且它们所有的 span 都有相同的类，当我将鼠标悬停在 div 上时，我想要的是，使用该 div 内的标签 span 更改字母的颜色。生病让你如何构建我的 cod 和我的 jquery 函数。我想知道如何使用选择器来实现这一点。

这是jsFiddle：

```
$(".wrap-faq").on("mouseover", hoverFaq);

    function hoverFaq(){
        $(".wrap-faq .faq .txt-preg-faq").css("color", "white")
        $(this).addClass("over");
    }

$(".wrap-faq").on("mouseleave", unHoverFaq);

    function unHoverFaq(){
        $(this).removeClass("over");
    } 
```

[http://jsfiddle.net/xtatanx/jz73b/](http://jsfiddle.net/xtatanx/jz73b/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:07:03.377

我认为你想要一个简单的 CSS 悬停：

```
.faq {
    color: black;
}
.faq:hover {
    background: orange;
    color: white;
} 
```

这个[http://jsfiddle.net/saYFz/](http://jsfiddle.net/saYFz/)是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:02:40.670

当您将鼠标悬停在 div 上时，此代码将添加一个 CSS 类：

```
$(".wrap-faq").on("hover",
    function(){
        // on over, add class "over"
        $(this).addClass("over");
    },
    function(){
        // on out, remove class
        $(this).removeClass("over");
    }
); 
```

使用 CSS 进行跨度操作。喜欢：

```
.over span {color:red;} 
```

编辑：如果您只想在跨度处处理悬停，您可以简单地将选择器修改为：

```
$(".wrap-faq span") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:03:05.107

我猜这更多的是你想要的：

[http://jsfiddle.net/jz73b/1/](http://jsfiddle.net/jz73b/1/)

```
$(".contents-faq").on("mouseover", '.wrap-faq', function() {
    $(".wrap-faq .faq .txt-preg-faq").css("color", "white")
    $(this).addClass("over");
}).on("mouseleave", '.wrap-faq', function() {
    $(this).removeClass("over");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T16:04:18.087

只需在您的`hoverFaq`函数中添加这一行：

```
$(this).find('span').css('color', 'white'); 
```

在这里你可以工作：http: [//jsfiddle.net/jz73b/2/](http://jsfiddle.net/jz73b/2/)

# nsis - 在 onInit 中卸载时 NSIS 不会中止安装

> ID：15953480
> 
> 赞同：1
> 
> 时间：2013-04-11T15:57:33.193
> 
> 标签：nsis

我有一个安装程序，它强制在安装新版本之前卸载以前的版本。

但是，当最初的问题被问到时，它会这样做。但卸载对话框没有。

```
MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION \
  "${PRODUCT_NAME} is already installed. $\n$\nIf you have software older than 3.0,     please manually uninstall it with Windows before procedeing. $\n$\nClick `OK` to remove the \
  previous version or `Cancel` to cancel this upgrade." \
  IDOK uninst IDCANCEL giveup

; I am giving up
giveup:
Abort

;  Run the uninstaller
uninst:
 ClearErrors
 ExecWait '$R0 _?=$INSTDIR' ;Do not copy the uninstaller to a temp file
 IfErrors no_remove_uninstaller
 no_remove_uninstaller:
 install:
 ; ..... snip 
```

那么这里

```
Function un.onInit
   MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 "Are you sure you want to     completely remove $(^Name) and all of its components?" IDYES NoAbort
  Abort
  NoAbort:
FunctionEnd 
```

因此，当它是独立卸载时似乎很好，但是当它开始卸载时，如果用户说“否/取消”，安装程序仍然会在他们说“不”时继续。我想不出为什么。作为不良副作用，开始菜单上的程序文件图标是孤立的，uninst.exe 是孤立的。但是，如果您“手动”运行卸载程序，它似乎没问题。除了试图让这件事发挥作用之外，我没有改变任何逻辑。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:51:04.927

重要的是在 ExecWait 中引用路径，然后检查退出代码：

```
Function .onInit
StrCpy $R0 "c:\old install" ; TODO: Somehow find the old install (in the registry? InstallDirRegKey?) and put its path in $R0
IfFileExists "$R0\*.*" 0 noOldInstall
    MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION "${PRODUCT_NAME} is already installed. blahblah..." IDOK uninstOld
    Abort
    uninstOld:
    ExecWait '"$R0\uninstaller.exe" _?=$R0' $R1
    ; Exit codes are documented in Appendix D in the help file.
    StrCmp $R1 0 noOldInstall ; Success? If so we are done...
    Abort ; Uninstaller was canceled or failed, we cannot continue
noOldInstall:
FunctionEnd 
```

# django - Django TastyPie，如何在使用 ManyToMany 字段的 POST 后触发操作？

> ID：15953482
> 
> 赞同：5
> 
> 时间：2013-04-11T15:57:42.067
> 
> 标签：django, tastypie

我有一个使用 Django 和 TastyPie 构建的 REST API。我的目标是在将新数据发布到特定模型时将任务添加到我的作业队列中。

我本来打算挂入 post_save 并触发，但模型包含 ManyToMany 关系，因此在 m2m 关系更新之前触发 post_save 并挂入 m2m_changed 信号似乎很混乱。我收到多个信号事件，我的代码需要在每个事件之后检查实例并尝试确定它是否已准备好触发事件。一些 ManyToMany 字段可以为 Null，因此当我收到 m2m_changed 信号时，我并不确定它是否已完成保存。

有没有正确的方法来做到这一点？TastyPie 是否允许我加入 POST 事件并在最后做点什么？我发现的所有事情都指向我在 post_save 事件中执行此操作。

当给定模型实例的所有 m2m 更新完成时，Django 是否有办法向我发出信号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-24T22:30:37.963

如果您正在使用`POST`，那么`obj_update()`似乎对我不起作用。什么工作是使用`obj_create()`如下：

```
class Resource(ModelResource):
    def obj_create(self,bundle,**kwargs):
        bundle = super(Resource,self).obj_create(bundle,**kwargs)

        # Add code here

        return bundle 
```

需要注意的一件事`request`是不包括在内。我试过了，它给了我一个错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T06:38:05.530

您应该能够覆盖 obj_update 方法

```
class Resource(ModelResource):
    def obj_update(self, bundle, request, **kwargs):
        bundle = super(Resource, self).obj_update(bundle, **kwargs)

        # queue your task here
        return bundle 
```

# java - 如何增加字体大小

> ID：15953489
> 
> 赞同：0
> 
> 时间：2013-04-11T15:57:58.820
> 
> 标签：java, fonts, awt, font-size

我有一个对我来说似乎很愚蠢的小问题，但我无法在互联网上找到解决方案。我有一个代码，其中使用 ttf 文件初始化字体，如下所示。

```
 InputStream is = new BufferedInputStream(new FileInputStream(
            "dundalkh.ttf"));
  Font f = Font.createFont(Font.TRUETYPE_FONT, is); 
```

现在我使用图形组件在屏幕上绘制一个字符串。在绘制字符串之前，我使用以下行：

```
 g.setFont(f);
 g.drawString("Title",300,30); 
```

但是我的字体很小。当我使用 f.getSize() 方法时，它会打印 1\. 我应该如何增加字体大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:03:18.327

您需要使用 derivedFont 方法从初始对象中拉出第二个 Font 对象：

```
Font f = Font.createFont(Font.TRUETYPE_FONT, is);
Font newFont = f.deriveFont(10f); 
```

这是它的文档条目：

[http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#deriveFont(float)](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#deriveFont(float))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:07:47.787

Font 类有几种`deriveFont`方法可以创建具有不同参数的字体，特别是[font.deriveFont(12f)](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#deriveFont%28float%29)将创建大小为 12 的字体。

编辑：确保使用浮点数作为大小，因为有 derivedFont(int style) 设置字体样式，而不是大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:13:53.297

试试这个

```
Font font = new Font(Font.TRUETYPE_FONT, Font.BOLD, 30);
txt.setFont(font); 
```

# excel - 检查 Excel 中的不常见字段

> ID：15953490
> 
> 赞同：0
> 
> 时间：2013-04-11T15:58:00.070
> 
> 标签：excel

所以我在学校有一个测试，我无法解决这个问题，我想知道如何解决它。它类似于：

给你两个 Excel 电子表格，一个有 200 条记录，另一个有 300 条记录。设计一个公式/方法来确定第一个文件中不存在哪些 100 条记录。

谁能告诉我如何解决这个问题？我可以使用 COUNT 来计算有 100 条记录，但我需要记录的值。无论如何使用 COUNTIF 来解决这个问题，还是有其他方法？

如果不能在 Excel 中解决，我们也可以将其导入 Access。

编辑：下面的例子 -

假设第一个电子表格有记录 Q、W、E，第二个电子表格有记录 Q、W、E、R、T、Y。我需要一个返回值的函数：R、T、Y（因为它们是第一个电子表格中不存在的值）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:12:55.840

打开两个文件并在更大的文件中，使用一些查找函数添加一个带有公式的列，例如**[MATCH](http://office.microsoft.com/en-gb/excel-help/match-function-HP010062414.aspx)**：

```
=ISNUMBER(
   MATCH(cell_from_this_row,
         range_of_all_such_cells_from_smaller_table,
         0)) 
```

过滤所有“FALSE”值以获取缺失的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:11:07.450

以您的示例为例，您可以将公式`VLOOKUP`放在较长的电子表格中（假设电子表格较长，电子表格`Sheet2`较短`Sheet1`）。

`Sheet2`在第一条记录的附加列中：

```
=VLOOKUP(A1,Sheet1!A:A,1,FALSE) 
```

将Sheet2的记录拖动并填写下来，所有您没有的记录都`Sheet1`将返回`#N/A`。然后，您可以过滤这些`#N/A`以获取未在 中找到的记录`Sheet1`。

`VLOOKUP`所做的是在 的列中查找值并`A1`返回`A`与`Sheet1`列索引匹配的值`1`。`FALSE`意味着它寻找完全匹配。

请注意，`VLOOKUP`不区分大小写。

* * *

您仍然可以使用`COUNTIF`.

这一次，公式是：

```
=COUNTIF(Sheet1!A:A, A1) 
```

如果您有很多记录，则该公式执行起来会更简单、更短。`0`如果在另一张纸上找不到它正在寻找的值，它将返回。

# javascript - 如何使用 Javascript 在 Sharepoint 2007 文档库中创建新文件

> ID：15953494
> 
> 赞同：0
> 
> 时间：2013-04-11T15:58:08.183
> 
> 标签：javascript, sharepoint

我正在尝试使用我的内部应用程序创建一个 Sharepoint 文档库（很少有 HTML、xml、css、js 和图像一起工作以创建一个很酷的网站外观）。

我们没有可以支持 PHP/MySQL 或任何类型的数据库功能的服务器/主机...只有共享工作区可用的是 sharepoint 2007。所有用户都将使用 Internet Explorer 8。最大用户数为 1000，但他们有可能可能访问

所有页面都是静态的 - 仅查看信息，但是我确实想计算访问特定 HTML 的次数。

所以我有这段代码，每次打开页面时都会创建一个新的文本文件。

它在本地文件夹上工作得很好，但如果我把它放在共享点文档库中，它不会创建一个新文件。它也不会出错。

您能否使用这种方法或任何其他方法提供帮助，我可以收集使用信息 - 将来我什至希望有用于收集用户评论/评级的表格，这些表格将保存在如此小的文本文件中。

代码 -

```
 <HTML xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
            <HEAD> 

            <SCRIPT language="JavaScript"> 

            function WriteFile() 
            {
                var d = new Date();
                var n = d.getTime(); 
                var fso  = new ActiveXObject("Scripting.FileSystemObject"); 
                var fh = fso.CreateTextFile(n, true); 
                // fh.WriteLine("Some text goes here..."); 
                fh.Close(); 
            }

            </SCRIPT>

            </HEAD>

            <BODY>
            <P>
            <SCRIPT language="JavaScript">  WriteFile(); </SCRIPT>
            </P>
            </BODY>
            </HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:51:07.453

我使用 createFile() 函数为 Sharepoint 创建了一个 JavaScript API：http: [//aymkdn.github.io/SharepointPlus/symbols/%24SP%28%29.html#.createFile](http://aymkdn.github.io/SharepointPlus/symbols/%24SP%28%29.html#.createFile)

我认为这个功能会对你有所帮助。

同样要读取本地文件，您可以使用 ActiveX（如您所做的那样）或 Flash（[https://github.com/Aymkdn/FileToDataURI](https://github.com/Aymkdn/FileToDataURI)）

# javascript - 可以用fancybox全屏打开图片的滑块

> ID：15953497
> 
> 赞同：1
> 
> 时间：2013-04-11T15:58:16.883
> 
> 标签：javascript, jquery, fancybox, slider, fancybox-2

我尝试将 Nivo Slider (3.2) 与 fancybox (2.1.4) 一起使用。这里我有两个问题：

- 通过单击图像，我只能查看与滑块中相同大小的图像 -
打开fancybox 时，Nivo 滑块图像在背景中消失

我用了

```
$(".nivo-main-image").fancybox(); 
```

那么有没有可以做到这一点的滑块？还是我必须编写自定义滑块？滑块应将圆圈（幻灯片数量）显示为 Nivo 滑块，并且应具有下一个/上一个按钮。我还想要不发生自动转换的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:53:37.377

感谢肯尼迪：

```
function setFullImage(){
    var src = $(".nivo-main-image").attr('src');
    var image = $("img[src$='" + src + "']");
    var full = image.attr("data-fancybox-href");
    $(".nivo-main-image").attr("data-fancybox-href", full);
}

$(document).ready(function(){
    $('#slider').nivoSlider({
        animSpeed:500,
        pauseTime:3000,
        startSlide:0,
        directionNav:true,
        controlNav:true,
        controlNavThumbs:false,
        pauseOnHover:true,
        manualAdvance:false,
        //afterLoad: function(){$('#slider').data('nivo:vars').stop = true;},
        afterLoad: function(){setFullImage();},
        afterChange: function(){setFullImage();}
    });
    $('#slider').data('nivoslider').stop();
    $(".nivo-main-image").fancybox();
}); 
```

# java - Hibernate：如何使用同一个表（或实体）的两列（字段）创建约束

> ID：15953502
> 
> 赞同：2
> 
> 时间：2013-04-11T15:58:37.850
> 
> 标签：java, hibernate, jakarta-ee, orm, relational-database

我有一个包含两个日期的休眠实体：`start`和`finish`.

```
@Entity
public class MyEntity{ 

    private Date start
    private Date finish;
    ...
    @Temporal(TemporalType.DATE)
    @Column(name = "start", nullable = false)
    public Date getStart() {
        return start
    }

    @Temporal(TemporalType.DATE)
    @Column(name = "finish", nullable = false)
    public Date getFinish() {
        return finish;
    }
} 
```

我想引入一个`start`必须在之前的约束`finish`，
我可以在休眠实体中进行这种验证/检查以避免在我的表中写入无效数据吗？
如果是，如何？
我的猜测不是，可能我必须写一个触发器..对吗？有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:05:08.350

您可以使用[Hibernate Validator](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/preface.html)为您的实体添加 vlaidation。您需要引入自己的[自定义约束](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-customconstraints.html)。

或者您可以在 DAO 层中手动执行此操作：

```
public class MyEntityDAO{ 

    ....

    protected void save(MyEntity entity) {
      // check dates
      // throw some exception in a case of problems
      getCurrentSession().saveOrUpdate(entity);
    }
} 
```

`MyEntity entity`不利的一面是，如果您保存一些父实体并将通过级联保存，这将不起作用。

一个更容易做的解决方案可能是使用`@PrePersist`：

```
@Entity
public class MyEntity{ 

    ....

    @PrePersist
    protected void checkDates() {
      // check dates
      // throw some runtime exception in a case of problems
    }
} 
```

但我不确定在这种情况下 trnsaction 是否会默认回滚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:57:54.990

为 @PrePersist 的建议向 Maksym +1，只是进一步推进了这个想法。

您还可以使用 @PrePersist 和 @EntityListeners 来处理实体验证：

```
public class MyEntityValidationEventListener {
   @PrePersist
   public void validate(Object entity) {....}
}

@Entity
@EntityListeners(MyEntityValidationEventListener.class)
public class MyEntity {...} 
```

# php - Firebase PHP CURL 身份验证

> ID：15953505
> 
> 赞同：3
> 
> 时间：2013-04-11T15:58:49.807
> 
> 标签：php, authentication, firebase, firebase-security

我目前正在使用 Firebase 和 PHP 建立一个小型聊天室。我认为这对 Firebase 来说是一个很好的学习项目，到目前为止我对它非常满意！

然而，我已经碰壁了。我不确定如何通过 PHP 为 Firebase 实施身份验证系统。我需要身份验证系统执行的操作非常具体：

为了能够使用聊天，用户必须使用我的自定义 php 登录系统登录。然后，一旦他们登录，他们还将进行身份验证，以便能够在聊天中读/写。

我无法真正理解使用 CURL 的 PHP 是如何实现的（如果有的话）。

在我的`__construct`函数中有以下内容：

```
require('/libs/FirebaseLib.php');
$this->firebase = new fireBase('https://<url>.firebaseio.com');

require('/libs/JWT.php');
require('/libs/FirebaseToken.php');
$tokenGen = new Services_FirebaseTokenGenerator('<firebase-secret>');
$this->authtoken = $tokenGen->createToken(
    array(
        'id' => $this->userid
    )
); 
```

我将如何通过 Firebase 进行身份验证以让用户能够在我的聊天中读/写，并且不允许未经身份验证的用户读/写？注意：我没有对 Firebase 安全规则做任何事情——这是我的问题的一部分。

我查看了文档，我可能只是很厚，但我真的找不到我要找的东西。

希望有人指出我正确的方向。

谢谢！

**编辑：**我故意不使用 javascript 进行聊天，除了对我的 php 脚本的 ajax 调用，然后在我完成我想要对用户的消息执行的操作后将其中继到 Firebase。

**编辑 2：**添加到所用库的链接：“ [Firebase 令牌生成器](https://github.com/firebase/firebase-token-generator-php)”和“ [Firebase PHP Client](https://github.com/ktamas77/firebase-php/blob/master/firebaseTest.php) ”

**编辑 3：**我当前的代码如下所示：（[参考](https://stackoverflow.com/questions/14073328/firebase-get-data-via-rest-api-php-curl)）

**__构造：**

```
$this->authtoken = JWT::encode(
    array(
        'admin' => true,
        'debug' => true,
        'v' => 0,
        'iat' => time(),
        'd' => array('user' => 'admin')
    ),
    '<secret>',
    'HS256'
); 
```

**新消息功能：**

```
$response = $this->firebase->set('/chat.json?auth=' . $this->authtoken, array(
    'message' => array(
        'username' => 'Test',
        'time' => time(),
        'string' => 'Hello World!'
    )
)); 
```

但是它返回：`{ "error" : "invalid_token: Could not parse auth token." }`。我基本上想获得管理员权限。我尝试仅使用 Firebase 机密作为身份验证，但它返回相同的错误。

**规则：**

```
{
  "rules": {
    ".read": "auth.username == 'admin'",
    ".write": "auth.username == 'admin'"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:23:09.587

一般的工作流程是：

1.  用户通过您的自定义登录系统进行身份验证后，在您的服务器端 PHP 代码中生成一个 Firebase 身份验证令牌。（看起来您粘贴的代码片段已经走到了这一步）。
2.  将该令牌传递回客户端。
3.  让客户端调用 firebase.auth(<token>); 使用您的服务器生成的令牌对 Firebase 进行身份验证。
4.  使用安全规则来限制客户端可以读取/写入的内容，具体取决于其身份验证令牌的内容。

对于一个简单的场景，您只想允许所有经过身份验证的 Firebase 访问，您可以只使用以下安全规则：

```
{
    "rules": {
        ".read": "auth != null",
        ".write": "auth != null"
     }
} 
```

这将为经过身份验证的用户提供对整个 Firebase 的读/写访问权限。不过，您可能希望将其锁定得更多（即仅授予他们对 Firebase 某些部分的读/写访问权限）。查看我们的[安全快速入门](https://www.firebase.com/docs/security-quickstart.html)，了解身份验证和安全规则的工作原理。

如果这没有帮助，也许您可​​以详细说明您遇到困难的部分。

# xml - Kendo UI Grid 和组合列

> ID：15953507
> 
> 赞同：0
> 
> 时间：2013-04-11T15:58:54.660
> 
> 标签：xml, kendo-ui, kendo-grid

我将 Kendo UI 网格绑定到填充了 xml 的数据源。

这个对我有用。

现在我想用嵌套节点的“n”多个值（逗号分隔）填充每行的一个单元格。

xml文件示例：

```
<product id="1">
 Microsoft Office
 <tags><tag>microsoft</tag></tags>
 </product>
<product id="1">
 Ububtu Linux
 <tags><tag>Canonical</tag><tag>OS</tag><tag>Open Source</tag></tags>
 </product>
 <product id="1">
  Windows 8
  <tags><tag>microsoft</tag><tag>OS</tag></tags>
 </product>
 </product> 
```

我想要的结果：

```
ID     Product              Tags

1      Microsoft Office     microsoft
2      Ubuntu Linux         canonical, OS, Open Source
3      Windows 8            microsoft, OS 
```

对于前 2 列没有问题：

```
 $("#grid").kendoGrid({
        dataSource: {
            type: "xml",
            transport: {
                read: { url: 'some_remote_xml',
                    dataType: "xml"
                }
            },
            schema: {
                type: "xml",
                model: {
                    fields: {
                        id: { field: 'product/@id', type: "number" },
                        Product: { field: 'product/text()', type: "string" } 

                    } 
```

如何呈现“标签”列？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:32:05.303

您可以通过以下两种方式之一执行此操作：

1）提供一个“行模板”，这里演示：[http ://demos.kendoui.c​​om/web/grid/rowtemplate.html](http://demos.kendoui.com/web/grid/rowtemplate.html)

或者

2）您可以`template`在网格中为您的列设置使用自定义。

对于自定义模板，您需要在网格中列出您想要的所有列，然后为`template`应该显示自定义信息的列提供设置。

最简单的方法是将 设置`template`为一个函数，该函数接收当前数据行作为参数。然后你可以`.join`用 a 标记`,`并返回它。

```
 $("#grid").kendoGrid({
  dataSource: {
    // ... your data source here
  },

  columns: [
    {field: "id", title: "Product ID"},
    {field: "product", title: "Product Name"},
    {
      title: "Tags",
      template: function(dataRow){
        return dataRow.tags.join(", ");
      }
  ]
}); 
```

使用 KendoUI 的模板引擎可能有更好的方法来完成这项工作，但这至少会暂时显示您以逗号分隔的项目列表。

您可以在此处阅读有关列模板的信息：http: //docs.kendoui.c​​om/api/web/ [grid#configuration-columns.template](http://docs.kendoui.com/api/web/grid#configuration-columns.template)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:08:04.520

非常感谢 Derik 和 OnaBai。

我知道解决方案可以从某种剑道模板中传递出来……但困难在于实现这样的解决方案。

我的应用程序的真实代码非常复杂。

在上面的示例中，wi 不仅会管理“标签”节点，还会管理属性等......

就像是：

```
 <tags>
   <tag id="1">First tag</tag>
   <tag id="2">Second tag</tag>
   ...
  </tags> 
```

如果架构部分中的此片段返回产品 id（产品的 xml id 属性）：

```
id: { field: 'product/@id', type: "number" } 
```

...这将返回产品文本（xml 文本节点）：

```
Product: { field: 'product/text()', type: "string" } 
```

如何在模板中管理返回的一个或多个标签？

```
Tags: { field: 'product/tags' } 
```

我必须实现一个管理“标签”子节点数组的模板。

好的。

我找到了这个解决方案：

列的模板定义：

```
 //pass the 'Tags' array to a javascript function
 template: '#= myfunction(Tags) #' 
```

...然后是一个全局 javascript 函数：

```
function myfunction(e) {
var result = '';

//iteration on the 'tags' array
for (var i = 0; i < e.length ; i++) {
    result += '<a href="' + e[i]["@id"] + '">' + e[i]["#text"] + '</a>';

}
return result;  // now in the tags column of the grid we have the 'tags/tag' xml section   of each product, rendered as html anchor

} 
```

效果很好！！！

我希望这对其他朋友有所帮助。

如果您认为更好或更简单的解决方案，欢迎您;-))

# dynamics-crm-2011 - 如何在 CRM 2011 中向表单添加外部链接？

> ID：15953508
> 
> 赞同：3
> 
> 时间：2013-04-11T15:58:57.967
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我正在 CRM 2011 中创建一个表单，要求用户接受服务条款协议，并且我想在表单中放置指向该文档的外部链接。

我已阅读有关在表单左侧创建导航链接的信息，但我相信在表单中显示与“接受协议”字段相邻的链接对用户来说会更清晰。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:14:47.867

您需要创建一个 HTML Web 资源。在链接内创建一个 html 文档（例如 term.htm），（您可以使用 自定义方面`CSS`）

```
<a href="http://www.stackoverflow.com/faq" target="_blank">Stack Overflow FAQ</a> 
```

现在在 CRM 中创建一个包含 html 代码的 Web 资源并添加到表单中。

将Web资源添加到表单后，在属性里面可以更改格式样式（例如占用1行1列不滚动不边框）

通过这种方式，您可以在表单中使用支持的自定义设置一个链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:10:39.073

我可以看到两种方法：

1.  添加一个包含超链接的字段（如果创建超链接字段）它将正确运行。然后只需使用 JavaScript 将值设置为正确的 URL。但是，这意味着将其保存到数据库中，如果 URL 发生更改，则必须更新所有这些记录。

2.  添加一个非常小的 html Web 资源，其中包含 URL，并将其粘贴在表单上。

# python - Django 表单分成两个下拉列表（选择）

> ID：15953511
> 
> 赞同：0
> 
> 时间：2013-04-11T15:59:20.473
> 
> 标签：python, django, django-forms

在我的表格中，我有 expiry_date ....

```
expiry_date = forms.DateField() 
```

到期日期必须为 MMYY 格式，即 2013 年 12 月的 1213。不应包含 / 或字符。

但这在最终用户看来有点 naf 形式。那么，是否可以在 Django 中添加两个选择框 1 代表月份，1 代表年份，然后以某种方式将它们重新组合在一起以在发布前再次制作 expiry_date？

即我希望我的用户看到月份和年份的下拉菜单并选择它。

这是我到目前为止所拥有的......

```
CARD_CHOICES = [
    ('VISA', 'VISA'),
    ('MC', 'MasterCard'),
    ('DELTA', 'DELTA'),
    ('MAESTRO', 'Maestro'),
    ('UKE', 'Visa Electron'),
    ]

DATE_INPUT_FORMATS = ('MMYY',)
class OrderForm(forms.Form):
    """
    Order Form used to collect data ready for processing.
    """
    amount = forms.FloatField()
    expiry_date = forms.DateField(input_formats=DATE_INPUT_FORMATS)
    CSV = forms.CharField(max_length=3)
    card_type = forms.TypedChoiceField(choices=CARD_CHOICES, initial='VISA') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:02:07.557

你基本上需要一个`MultiValueField`

这是一个示例实现：[django-creditcard](https://github.com/bryanchow/django-creditcard-fields/blob/master/fields.py) app

```
class ExpiryDateField(forms.MultiValueField):
    """
    Form field that validates credit card expiry dates.
    """

    default_error_messages = {
        'invalid_month': _(u'Please enter a valid month.'),
        'invalid_year': _(u'Please enter a valid year.'),
        'date_passed': _(u'This expiry date has passed.'),
    }

    def __init__(self, *args, **kwargs):
        today = date.today()
        error_messages = self.default_error_messages.copy()
        if 'error_messages' in kwargs:
            error_messages.update(kwargs['error_messages'])
        if 'initial' not in kwargs:
            # Set default expiry date based on current month and year
            kwargs['initial'] = today
        months = [(x, '%02d (%s)' % (x, date(2000, x, 1).strftime(MONTH_FORMAT))) for x in xrange(1, 13)]
        years = [(x, x) for x in xrange(today.year, today.year + 15)]
        fields = (
            forms.ChoiceField(choices=months, error_messages={'invalid': error_messages['invalid_month']}),
            forms.ChoiceField(choices=years, error_messages={'invalid': error_messages['invalid_year']}),
        )
        super(ExpiryDateField, self).__init__(fields, *args, **kwargs)
        self.widget = ExpiryDateWidget(widgets=[fields[0].widget, fields[1].widget])

    def clean(self, value):
        expiry_date = super(ExpiryDateField, self).clean(value)
        if date.today() > expiry_date:
            raise forms.ValidationError(self.error_messages['date_passed'])
        return expiry_date

    def compress(self, data_list):
        if data_list:
            try:
                month = int(data_list[0])
            except (ValueError, TypeError):
                raise forms.ValidationError(self.error_messages['invalid_month'])
            try:
                year = int(data_list[1])
            except (ValueError, TypeError):
                raise forms.ValidationError(self.error_messages['invalid_year'])
            try:
                day = monthrange(year, month)[1] # last day of the month
            except IllegalMonthError:
                raise forms.ValidationError(self.error_messages['invalid_month'])
            except ValueError:
                raise forms.ValidationError(self.error_messages['invalid_year'])
            return date(year, month, day)
        return None 
```

# c# - C# 5 (in .net 4.5) 的异常处理和忘记

> ID：15953520
> 
> 赞同：8
> 
> 时间：2013-04-11T15:59:34.733
> 
> 标签：c#, asynchronous, error-handling, task-parallel-library, .net-4.5

考虑以下“即发即弃”用例：

调用者从我的方法中请求一些数据。我的方法检查缓存以查看数据是否已经存在。如果不是，它会从源中获取并缓存它。调用者在获取结果之前不需要等待缓存发生，并且如果缓存碰巧失败，该方法不应阻止调用者获取结果。我今天所拥有的，看起来像这样：

```
public Foo GetFoo(string fooKey)
{
    // look for Foo with fooKey in cache
    // if Foo is not found, get Foo with fooKey from source
    // and assign it to local variable myFoo
    Task cacheTask 
           = Task.Run
                (
                    () => CacheFoo(myFoo)// fire-and-forget the caching of myFoo
                ); 
    return myFoo;
} 
```

如果 CacheFoo 抛出一个异常，它不会被观察到，最终（在 .Net 4.5 中）它会被框架吞噬。我宁愿自己最后一次清理异常，但我不想阻塞当前线程。最好的方法是什么？

这是我尝试过的

```
try
{
    ...
   cacheTask.ContinueWith
            (
                (e) => { 
                         if (cacheTask.IsFaulted) 
                            { 
                             /* log cacheTask.Exception */; 
                             } 
                        }
                , TaskContinuationOptions.OnlyOnFaulted
            ); 
} 
```

有没有更好的办法？我是否需要 IsFaulted 上的“if”语句，还是因为我已经指定了“OnlyOnFaulted”而显得多余？

任何意见/建议将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T16:05:50.070

四件事：

*   不，您不需要[Task.IsFaulted 属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.isfaulted%28v=vs.100%29.aspx)；回调只有在出错时才会触发
*   你不需要捕捉`cacheTask`；您的回调中的the`e`是相同的任务，因此您不妨改用它。（然后同一个委托可以用于*所有*任务。）
*   如果您总是以相同的方式登录，您可能希望在任务上编写一个扩展方法，以便轻松执行此操作
*   作为添加处理程序的替代方法，您可以考虑订阅[TaskScheduler.UnobservedTaskException](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.unobservedtaskexception.aspx)并在那里执行日志记录

# angularjs - 使用 ng-grid 和 AngularJS 时，如何发送带有 rowId 的 DELETE Http Verb？

> ID：15953525
> 
> 赞同：0
> 
> 时间：2013-04-11T15:59:46.340
> 
> 标签：angularjs

我设置了以下资源、函数和单元格模板：

```
var Exam = $resource('/api/Tests', {}, {
    saveData: { method: 'PUT' }
});
$scope.delete = function (row) {
    row.entity.$delete(row.examId);
}
$scope.updateEntity = function (column, row) {
    console.log(row.entity);
    console.log(column.field);
    row.entity.$saveData();
}

{ field: '', cellTemplate: '<button ng-click="delete(row)">Delete</button>' } 
```

但是我发现它只是发送：

```
 DELETE /api/Tests HTTP/1.1 
```

有没有办法可以更改资源，以便如果行 testId 等于 1 则它正确发送

```
 DELETE /api/Tests/1 
```

请注意，我已经尝试了以下操作，但它仍将相同的 URL 发送到我的服务器：

```
 row.entity.$delete(row.entity.testId) 
```

还有一件事。我的 updateEntity 工作并发送一个 put 以及该行的 json

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:23:05.563

您可以像这样更改资源的 url：

```
var Exam = $resource('api/Tests/:id, {id:'default value here'});

Exam.$delete({id:1}); 
```

或者重新定义删除操作：

```
var Exam = $resource('api/Tests, {}, {
    $delete: {
        method: 'DELETE',
        params: {id: 'some value here'}
    }
}); 
```

看看这个类似的问题：[https ://stackoverflow.com/a/13275194/1036025](https://stackoverflow.com/a/13275194/1036025)

# android - 通过隐藏和显示与幻灯片转换交换片段会导致两者都消失

> ID：15953528
> 
> 赞同：4
> 
> 时间：2013-04-11T15:59:48.357
> 
> 标签：android, android-fragments, android-animation, swipe-gesture, android-sliding

我正在尝试使用`transaction.show`和`transaction.hide`交换片段为一对片段之间的过渡设置动画。我认为它会比使用它更简单，`replace`因为我理解这会实例化新片段。

（片段可能会被重用数百次，导致高回栈内存使用率，并且当我有一个保存所有片段信息的数据库时，管理回栈会很痛苦）

当我使用

`transaction.setCustomAnimations(R.animator.slide_out_right, R.animator.slide_in_left)`

为过渡（或其反向模拟）设置动画，动画有效，但片段在过渡后消失。

我的过渡动画在 XML 中定义如下 - 基于[此线程](https://stackoverflow.com/questions/8876126/swap-fragment-in-an-activity-via-animation/9856449#9856449)中给出的内容。

```
<?xml version="1.0" encoding="utf-8"?>
<set> 
    <objectAnimator xmlns:android="http://schemas.android.com/apk/res/android" 
    android:propertyName="x"
    android:valueType="floatType"
    android:valueFrom="0"
    android:valueTo="1280"
    android:duration="500"
    />
</set> 
```

*   我没有使用支持库。
*   我对两个片段都使用一个框架布局，因为我认为它会更简单。
*   这个问题本质上和[这个问题](https://stackoverflow.com/questions/8876126/swap-fragment-in-an-activity-via-animation/9856449#9856449)类似，但是每个片段使用了2个帧布局，并且只有在300ms动画时间内发生2个过渡时才会出现问题。作者找到了一种解决方法，可以`AnimatorSet`在每个布局上使用。作为一个 android 新手，我不确定他的意思是什么，或者我将如何去做。

知道我哪里出错了吗？有没有另一种方法可以像上面的人所做的那样为这样一个简单的片段过渡设置动画？这可能是一个错误吗？谢谢你。

# ruby-on-rails - 在 Rails 中触发嵌套资源的 Ajax 调用

> ID：15953532
> 
> 赞同：0
> 
> 时间：2013-04-11T15:59:59.107
> 
> 标签：ruby-on-rails, ajax, forms

我有以下建模：

```
 User 
  has_many :projects

  Project 
  belongs_to :user
  has_many :tasks 

  Task 
  belongs_to :project
  has_many :workIntervals 

  WorkInterval 
  belongs_to :task 
```

我将其作为嵌套资源，例如：

```
resources :projects do
  resources :tasks do
    resources :work_intervals
  end
end 
```

我从登录的 current_user 获取用户，这就是为什么我在 URL 中没有。

来自任务的 WorkInterval 用于记录用户一直在执行任务的时间。例如周一上午 10 点到周二上午 10 点。也就是说一个任务可以有几个 WorkIntervals。

当我在任务页面中时，我希望能够有一个“开始工作”按钮。但是我看不到我应该在那个按钮中放什么，它是一个 AJAX 调用吗？如果是这样，我应该在 form_for 中传递什么？因此，假设 URL 是：

```
/projects/:project_id/tasks/:task_id 
```

而且我想要一个名为“开始工作”的按钮，而不是在触发时创建一个与该任务关联的新 WorkInterval。

做正确方法的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:20:50.000

实际上，您希望在单击按钮时创建一个新的 work_interval。我看到两种方法可以实现这一点。

1.  您可以创建一个将 POST 到您指定的路径的表单，链接将是提交按钮。像这样的东西：

    ```
    <%= form_for [@project, @task, Task.work_intervals.new] do |f| %>
    <%= submit_tag "Start working" %>
    <% end %> 
    ```

2.  另一种方法是修改默认资源路由，让您可以通过 GET 操作访问 WorkIntervals 控制器上的 create 方法。

    ```
    resources :projects do
      resources :tasks do
        resources :work_intervals do
          get :create, as: :create, on: :collection
        end
      end
    end 
    ```

    您将有一个链接到上述操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:25:31.527

执行 AJAX 调用的按钮代码应该是这样的（如果我没有正确的路径，请渲染 rake 路由并查看路径`work intervals CREATE`是什么）。

```
<%= button_to "Start Working", projects_tasks_work_intervals_path(@task.project, @task), :method => :post, :remote => true %> 
```

我猜您已经在控制器中有一个创建操作，因此您可以使用 params[:project_id] 和 params[:task_id] 捕获项目和任务，并创建一个以`Time.now`.

如果您想通知用户它已保存，您可以渲染一个`create.js.erb`并在其中放置一些 javascript 代码，这些代码将在请求结束后显示。

要渲染那段 javascript 代码，您必须在您的操作中有一个`respond_to`块：

```
def create
    ..
    respond_to do |format|
      format.html
      format.js
    end
end 
```

# c# - 设置来自 Web 服务的响应的时间限制

> ID：15953536
> 
> 赞同：4
> 
> 时间：2013-04-11T16:00:05.407
> 
> 标签：c#, asp.net, web-services

如果我调用网络服务...

```
Service1 myWebService = new Service1();
int NewTotal = myWebService.CurrentBreakdowns(6); 
```

如何设置从 Web 服务获得响应的时间限制。我想给它 30 秒的响应时间，如果没有收到响应，请继续并显示“未收到及时响应”消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:14:23.517

您可以按如下方式设置超时

```
localhost.Service1 service = new localhost.Service1();
service.Timeout = 30000; 
```

其中**Timeout**表示 XML Web services 客户端等待同步 XML Web services 请求的回复到达的时间（以毫秒为单位）。

您也可以按照以下帖子中的建议尝试 SO

*   [为 .NET Web 服务设置超时值](https://stackoverflow.com/a/711360/1012641)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:22:24.990

尝试`<system.web>`在您的 web.config 中添加这一行：

```
<httpRuntime executionTimeout="30"/> 
```

将您的服务调用包装在一个`try/catch`块中并处理异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T13:07:30.857

嗨，兄弟，我用这个代码给了客户一个时间限制；

首先在类中创建服务代理

`private BussinessAdapter serviceProxy = null;`

在构造函数中分配一个新的适配器：

`serviceProxy = new BussinessAdapter();`

您可以在函数中使用此代码设置时间；

`serviceProxy.Timeout=3000000; //to 50 min I gave`

...并且您需要与网络服务超时时间同步，我的网络服务具有相同的时间限制。

# android - 从其他应用程序或浏览器重定向后创建新的 Activity 实例

> ID：15953538
> 
> 赞同：0
> 
> 时间：2013-04-11T16:00:10.907
> 
> 标签：android, android-intent, android-activity

我在从浏览器直接获得重新创建活动实例时遇到问题。
问题是：-
Activity A 调用浏览器用标志 - 做一些事情 `FLAG_ACITIVTY_NEW_TASK`。浏览器使用 Activity A 的指定 URL 方案重定向回 Activity A。重定向后，Activity A 检查意图中的令牌和其他参数。活动 A 将其意图重置为默认值`setIntent()`。
问题：-
设置意图后，如果我调用相同的活动`getIntent()`，它会给出浏览器调用活动 A 的意图。在按下后，我再次看到具有我之前设置的意图的活动 A 实例。
即堆栈看起来像 A-Browser Activity -A'

我认为 A 是创建的活动 A 的新实例，但实际更改会反映在活动 A 中。当我显示警报对话框时会出现同样的问题。当从后台堆栈中清除 A' 时，我看到活动 A 中的警报对话框，我在从浏览器获得重定向后显示该对话框。

首先，我不希望创建一个新实例（A'）。

我通过将 Activity A 的 launchMode 设置为 signleTop 但行为相同来检查场景。

感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T04:37:48.380

很抱歉发布这么晚，这是解决方案：

您是否将活动的启动模式设置为：singleTask 通过这个框架将避免为同一个活动重新创建一个新实例（如果已经存在），这样做您的活动实例将被调出并接收 onNewIntent() 回调而不是 onResume() 。在 onNewIntent() 中有你的逻辑

希望这可以帮助 ！谢谢 。

# ios - 未找到导入的文件

> ID：15953542
> 
> 赞同：1
> 
> 时间：2013-04-11T16:00:13.140
> 
> 标签：ios, xcode

我有一个在其他机器上运行的项目。导入标头“找不到文件”时出现编译器错误。

主项目有很多嵌套文件夹。其中一个文件夹是库。有问题的头文件在库中。

所以头文件的路径，从库项目开始基本上是：

libproject/header.h

导入标头的路径是：

libproject/A/B/C/otherheader.h

这是当前标头导入其他标头的方式：

`#import <libproject/otherheader.h>`

如果我将其更改为

`#import <libproject/A/B/C/otherheader.h>`

它可以工作，但是到处都使用了很多次，我认为正确的解决方案是在某处设置构建路径或其他东西。该项目在其他计算机上像这样工作。但我是一名 iOS 初学者，不知道我必须做什么。

有人可以帮助我吗，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:35:11.773

为了帮助找到问题，请查看实际的构建语句（最后一个图标，查看注释），您将在此显示中看到用于编译文件的命令行语句（单击该行右侧的图标全文）。查看是否有对包含该文件的文件夹的引用。通常这会给你一个关于clang在哪里寻找的线索。通常我将整个内容复制到编辑器中，并用返回字符替换“-”，这样我可以更轻松地阅读它。寻找 -I 行

# javascript - 如何将 javascript cookie 从 15 天计数更改为 1 天或 12 小时？

> ID：15953549
> 
> 赞同：-4
> 
> 时间：2013-04-11T16:00:27.923
> 
> 标签：javascript, jquery, html, popup

这是我正在运行的当前脚本，每 15 天加载一次弹出窗口。请告诉我如何更改代码。

```
$(window).load(function() {
  if (document.cookie.indexOf('visited=true') === -5) {
    var fifteenDays = 1000*60*60*24*15;
    var expires = new Date((new Date()).valueOf() + fifteenDays);
    document.cookie = "visited=true;expires=" + expires.toUTCString();
    $("#overlay").fadeTo(1000, .8);
    $(".playerWindow").show(750);
  }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:01:58.343

```
var fifteenDays = 1000*60*60*24; // This will be 1 day 
```

# c# - 使用 linq 从数据库 c# 中的列表填充 GridView

> ID：15953554
> 
> 赞同：0
> 
> 时间：2013-04-11T16:00:51.397
> 
> 标签：c#, wcf, linq-to-sql

我正在创建 WCF 服务，并且我创建了一种从数据库中获取一列值的方法。方法是

```
 public List<String> AllFriends(string username)
    {

        MyDatabaseEntities acontext = new MyDatabaseEntities();
        var result = from c in acontext.Friends
                     where c.Owner==username
                     select c.Friend1;
        return result.ToList();
    } 
```

我在客户端将此方法称为：

```
 List<string> friends = new List<string>();
        friends = aSave.AllFriends(Session.username).ToList();
        dataGridView2.DataSource = friends; 
```

问题是，当我运行它时，它不会用值填充网格，而是向我显示值的长度，例如

```
length
 2
 4 
```

当我在列表框或组合框上调用相同的方法时，它工作正常并向我显示正确的字符串，但在显示字符串长度的网格上。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:07:31.390

那是因为网格显示了对象的公共属性的值。所以你需要一个带有字符串属性的对象而不是字符串本身。它可以是匿名对象，例如：

```
dataGridView2.DataSource = friends.Select(f => new {Friend = f}); 
```

# image - 适用于 Xamarin.Android 的便携式裁剪图像活动（Android 的 Monodroid / Mono）

> ID：15953556
> 
> 赞同：0
> 
> 时间：2013-04-11T16:00:54.537
> 
> 标签：image, android-activity, android-camera, crop, xamarin

我正在寻找可在我的`Xamarin.Android`应用程序中使用的便携式裁剪图像活动。类似于用 Java 编写的这个：[https](https://github.com/lvillani/android-cropimage) ://github.com/lvillani/android-cropimage 。

我认为这对于那些没有实现默认`com.android.camera.action.CROP`意图操作的 Android 设备是必要的。

```
try {
    // Call the standard crop action intent (the user device may not support it).
    Intent cropIntent = new Intent ("com.android.camera.action.CROP");
    ...
    Activity.StartActivityForResult(cropIntent, ...);
} catch (ActivityNotFoundException ex) {
    // Call a custom portable crop image activity here.
} 
```

最后，是否有任何开放库可用于实现呈现的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T21:18:40.603

是的，有一个（免责声明：作者在这里）

[裁剪图像-xamarin](https://github.com/markuspalme/cropimage-xamarin)

# python - 如果值相同，则对元组求和

> ID：15953560
> 
> 赞同：5
> 
> 时间：2013-04-11T16:01:08.347
> 
> 标签：python, list, tuples

这是我的元组列表：

```
regions = [(23.4, 12, 12341234), 
           (342.23, 19, 12341234), 
           (4312.3, 12, 12551234), 
           (234.2, 12, 12341234)] 
```

我正在尝试将索引 1 和 2 处的值相同的元组列表中的第一个索引值相加。请注意，regions[0] 和 region[3] 在索引 1 和 2 处具有相同的值。

我想要的清单是：

```
result = [(257.6, 12, 12341234), 
          (342.23, 19, 12341234), 
          (4312.3, 12, 12551234)] 
```

我意识到我可能需要先将它保存为字典，可能将第二个值作为第一个键，将第三个值作为第二个键，如果它已经存在则求和。只是想知道是否有更好或更简单的方法：我在想也许使用一些相交函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T16:05:29.213

```
from collections import defaultdict

sums = defaultdict(float)
for c, a, b in regions:
    sums[a, b] += c
result = [(csum, a, b) for (a, b), csum in sums.iteritems()] 
```

没有内置函数可以做到这一点。这是一项过于专业的任务。

# ruby-on-rails - 如何反向代理activeadmin应用程序？

> ID：15953566
> 
> 赞同：0
> 
> 时间：2013-04-11T16:01:39.273
> 
> 标签：ruby-on-rails, nginx, activeadmin

我希望直接从 2 个不同的子域访问我的 rails / activeadmin 应用程序的 2 个部分：

```
admin.domain.tld => http://localhost:9999/admin/login
api.domain.tlp => http://localhost:9999 
```

我想出了这个配置，但这不起作用：

```
server {
    listen 80;
    server_name admin.domain.tld;

    location / {
        proxy_pass http://localhost:9999/admin;
        proxy_set_header Host $host;
    }
} 
```

注意：在 ActiveAdmin 中，/admin 会自动重定向到 /admin/login

```
server {
    listen 80;
    server_name api.domain.tld;

    location / {
        proxy_pass http://localhost:9999;
        proxy_set_header Host $host;
    }
} 
```

关于如何设置的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:12:22.293

如果您将子域重定向到您的应用程序，我认为解决该问题的一个好方法是检查请求子域，如果它等于 admin，则重定向到 /admin。您可以在应用程序控制器中对默认操作 EX 执行此操作：

```
if request.subdomain.present? && request.subdomain == 'admin' 
  redirect_to admin_path
end 
```

在 admin_path 中，我的意思是 activeadmin 的默认路由的路径...我从未使用过那个 gem...

我认为您可以处理应用程序中的子域，您只需将它们重定向到应用程序，然后在第一个控制器中检查您要重定向的位置。但这只是处理它的一种方法。当然有办法通过虚拟主机配置来做到这一点......

如果您不想在 application_controller.rb 中执行此操作，您可以在应用程序根负责的第一个控制器上执行此操作。想象一下你有：

```
class HomeController < ApplicationController
  before_filter :check_subdomains, :only=>[:index]

  def index 

  end

  private

  def check_subdomains
    if request.subdomain.present? && request.subdomain == 'admin' 
      redirect_to admin_path
    elsif  request.subdomain.present? && request.subdomain == 'api'
      redirect_to api_path
    end
  end

end 
```

# c - c中指向结构的指针的范围？

> ID：15953570
> 
> 赞同：1
> 
> 时间：2013-04-11T16:01:53.617
> 
> 标签：c, pointers, graph, structure

```
#include<stdio.h>
#include<conio.h>

struct GNode{
    struct gnode* nextnode;
    struct gnode* arcptr;
    int Visited;
}

typedef struct GNode* Grnd;

struct ArcNode{
    struct arcnode* nextarc;
    struct acrnode* ndptr;
}

typedef struct ArcNode* Arc;

Grnd getGraphNode(){
    Grnd NewNode=(Grnd)malloc(sizeof(struct GNode));

    NewNode->nextnode=NULL;
    NewNode->arcptr=NULL;

    return NewNode;
}

Arc getArcNode(){
    Arc NewArc=(Arc)malloc(sizeof(struct ArcNode));

    NewArc->nextarc=NULL;
    NewArc->ndptr=NULL;

    return NewArc;
}

void join(Grnd *GNode1,Grnd *GNode2){
    Arc NewArc=getArcNode();
    NewArc->ndptr=(*GNode2);

    NewArc->nextarc=(*GNode1)->arcptr;
    (*GNode1)->arcptr=NewArc;
}  

Grnd addNode(Grnd *Graph){
    Grnd NewNode=getGraphNode();

    if((*Graph)==NULL){
        (*Graph)=NewNode;  
        return NewNode;
    }

    while((*Graph)->nextnode!=NULL)
        Graph=Graph->nextnode;

    (*Graph)->nextnode=NewNode;

    return NewNode;  
} 
```

考虑到上面的C代码：我担心当我调用`join`函数来加入两个图节点时，它真的会加入它们吗？因为一旦程序超出 , 的范围`join`，`NewArc`就不存在了。因此，当我在创建图表后尝试找到给定节点的所有相邻节点时，我能做到吗？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:05:11.617

> 因为一旦程序超出了 join 的范围，NewArc 就不存在了。

这是正确的！指针本身消失了，**但它指向的内存仍然存在**，为您分配。因此，您可以自由地继续通过其他指针引用它，直到您找到`free`它为止。

* * *

```
(*GNode1)->arcptr=NewNode; 
```

我想你的意思是`NewArc`而不是`NewNode`？

# tfs - 产品待办事项和任务是否应该位于不同的迭代路径中？

> ID：15953575
> 
> 赞同：3
> 
> 时间：2013-04-11T16:02:07.883
> 
> 标签：tfs, scrum, workitem, tfs-workitem

使用 Scrum 2.1 流程模板，我注意到 TFS 中的 Sprint Backlog 查询返回了 sprint 的 Product Backlog 项目和任务的列表，但是当我查看它时，该列表看起来非常稀疏。在查询定义中浏览了一下之后，我意识到它首先匹配子链接，然后根据迭代过滤子链接。这很重要，因为几个任务没有被分配迭代，因此处于积压工作中。

不过，这让我开始思考——既然 sprint 的主要关注点是产品待办事项项目，而 PBI 意味着在单个 sprint 中开始和完成，那么为什么将任务放入其中是有意义的？不同的迭代？有原因吗？同样，Sprint Backlog 查询是否有这样的结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:21:36.603

这取决于您如何使用 TFS 来计划您的 sprint。如果您打算使用[TFS 2012 敏捷规划](http://msdn.microsoft.com/en-us/magazine/dn189203.aspx)功能的全部范围，则需要维护工作项迭代。Scrum 板功能不受 Sprint Backlog 查询（或任何其他相关查询）的影响，它由团队管理中的[调度和区域设置](http://msdn.microsoft.com/en-us/library/hh500418.aspx)控制（可在团队的主页中获得）：

![配置计划和迭代...](https://i.stack.imgur.com/D6CMf.png)

迭代取决于 PBI 的大小：如果一个 PBI，包括它的所有子任务可以适合单个 sprint，则应该将迭代设置为 sprint（例如：）`\Release 1\Sprint 4\`。

如果 PBI 大到足以跨越多个 sprint 来完成，请将其迭代保持在发布级别（例如：），`\Release 1\`并将其子任务保持在 sprint 级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T21:55:15.947

如果您在 sprint 结束时有一个可行的功能，那么剩余的工作应该分解为一个新的产品 backlog 项目和与新 PBI 相关的任务。

如果你不这样做，你最终会管理一个部分完成的 PBI 集合，这很难跟踪并且会丢弃你的报告。

我不确定您将如何有效地整理您的积压工作并进行 sprint 计划，而不会将剩余工作拆分为新的 PBI。

如果您经常遇到这种情况，请考虑将您的 PBI 分解为更小的工作块。请记住，当您将 PBI 提交到 sprint 时，理想的 PBI 规模在 3-5 天（我的规模为 3 个故事点）或更短的范围内。

这是一个描述大小的好博客：[http ://www.agileforall.com/2009/12/agile-antipattern-taking-on-large-stories/](http://www.agileforall.com/2009/12/agile-antipattern-taking-on-large-stories/)

讨论大小并包含对 3-5 天的引用的线程：[何时根据功能请求创建 PBI 以及在哪里划线以将它们分开？](https://stackoverflow.com/questions/9753059/when-to-create-pbis-from-a-feature-request-and-where-to-draw-the-line-into-spli)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:30:48.153

当您到 Sprint 结束并且 3/4 PBI 已经完成实施并被接受，而最终 PBI 有 2/3 任务完全实施时，您将做出一些艰难的决定。你：

a) 试图撕掉最后一个 PBI 的代码？

b) 将整个 Sprint 称为失败并重新开始？

c) 将未完成的子任务移动到下一个 Sprint？

这支持选项（c）。可能不是 Scrum.org 会推荐的，但这是它支持的场景。

# javascript - 设置文本区域的值并让它注册更改

> ID：15953576
> 
> 赞同：0
> 
> 时间：2013-04-11T16:02:15.367
> 
> 标签：javascript, jquery

我有一个文本区域：

```
<input id="startdate" name="startdate" type="text" value="" style="width:23%"> 
```

监听 on('change')`

```
$('#startdate').on('change', function () {
  var $formelem = $(this);
  // DO SOME WORK
  ... 
}); 
```

以及更改文本区域值的代码：

```
var keyval = location.search.replace('?', '').charAt(0);
  var filterDates;
  var clicked = [];

  function persistence(keyval) {
    function template(keyval, filterDates) {
      for ( i=0 ; i < keyval.length ; i++ ) {
        $('#'+keyval[i]).click();
      };
      if (filterDates) {
        return $('#startdate').val(filterDates);
      };
    };
    if (typeof parseInt(keyval[0]) === 'number' && keyval[0] % 1 == 0) {
      switch(keyval[0])
        {
        case '1': 
          keyval = ['.', '..', '...' ];
          filterDates = "2006-04";
          template(keyval, filterDates);
          break;
        case '2': 
          keyval = ['.', '..', '...' ]; 
          break;
        default:
          template(keyval);
        };
    } else {
      template(keyval);
    }
  }; 
```

当页面加载时，如果 url 包含 a `1`，那么我想将 textarea 的值更改为`2006-04`并让它注册一个更改，以便发生更改功能。目前文本正在更新，但该功能未运行。我认为这可能与页面未加载有关，因此我将其放在 document.ready() 中，它仍然无法正常工作。我还缺少什么吗？[API](http://api.jquery.com/val/)没有提到任何关于必须为其附加事件处理程序的内容，所以我认为 on('change') 可以解决问题.....

此外，如果我手动更改它，该函数确实完成了它应该做的工作，所以它不是函数中的代码。我在其他地方动态设置初始值的事实也与它有什么关系吗？

```
$(document).ready(function () {
    blinks(1);
    persistence(keyval);
}); 
```

和

```
//place the first value of start[] in the startdate box
$('#startdate').val(start[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:03:15.340

您可以使用以下方法*触发**更改*：

```
$('#startdate').trigger('change'); 
```

# javascript - jQuery .inArray If/Else 总是返回 -1

> ID：15953577
> 
> 赞同：0
> 
> 时间：2013-04-11T16:02:28.937
> 
> 标签：javascript, jquery

我有一个函数，我试图检查一个值是否已经存在。然而，即使值存在，它仍然返回 -1。我试图让我的 if/else 语句工作，如果一个项目存在它“警报”，如果它不运行函数 addItem();

```
$(".detail-view button").on("click", function () {
    itemExists();

    function itemExists() {
        var detailID = $(this).attr('id');
        var itemArr = [];
        $("input#lunchorder_item_entry_id").each(function (index) {
            var lunchItemID = $(this).val();

            itemArr.push(lunchItemID);
        });

        addItem();

        alert(jQuery.inArray(detailID, itemArr));

        /*
        if (jQuery.inArray(detailID, itemArr)) {
            alert("You have already added this item. If you want to change item details, please remove the item and re-add it to your cart. Thank You!");
        } else {
            // the element is not in the array
            addItem();
        } */

        console.log(itemArr);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:04:57.740

这是因为`detailID`and`itemArr`是函数的局部变量`itemExists()`，也是`undefined`您的`if`条件所在。

把它移到外面，应该修复它。

```
...
var detailID = $(this).attr('id'); 
var itemArr = [];
function itemExists() {
   ...
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:32:51.880

> 然而，即使值存在，它仍然返回 -1

我不知道如何证明这一点，因为您没有提供任何示例输入。然而，在您调用[关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)`itemExists`的方式中是/ ，并且可能是 results 。[`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)`undefined``window``$(this).attr('id')``undefined`

要解决这个问题，要么使用`itemExists.call(this)`或将 DOM 元素（甚至`$(this)`？）存储在局部变量中并使用它，或者甚至移出`itemExists`处理程序并使用显式参数调用它。

> 如果项目存在，我正在尝试让我的 if/else 语句正常工作……</p>

如您所见，返回的索引是`-1`. 这意味着要检查一个元素是否包含在数组中，您需要与 -1 进行比较，而不是将每个非零数转换为`true`：

```
if (jQuery.inArray(detailID, itemArr) != -1) 
```

# javascript - 如何将 href 合并到谷歌可视化库 javascript 中？

> ID：15953580
> 
> 赞同：0
> 
> 时间：2013-04-11T16:02:40.983
> 
> 标签：javascript, google-visualization

我正在使用 Google 的可视化库在我的 Rails 应用程序中绘制图表。我现在的代码是：

```
 var data = google.visualization.arrayToDataTable([
      ['Phrase', 'Frequency'],
        <% @frequency.each do |key,value| %>
            ['<%= key %>', <%= value %>],
        <% end %>
    ]); 
```

这行得通。但是，我想启用一个功能，允许用户单击 y 轴上的值，然后触发一个事件（例如打开一个链接）。我尝试了下面的代码，但它不起作用。关于如何将 href 合并到上面的 js 片段中的任何建议？

```
 var data = google.visualization.arrayToDataTable([
      ['Phrase', 'Frequency'],
        <% @frequency.each do |key,value| %>
            [<a href = "#"'<%= key %>'</a>, <%= value %>],
        <% end %>
    ]); 
```

我也愿意在图表上显示的工具提示中包含一个 href。

API 的链接是：[https ://developers.google.com/chart/interactive/docs/gallery/barchart](https://developers.google.com/chart/interactive/docs/gallery/barchart)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:31:18.373

有两种方法可以做到这一点。

## HTML 工具提示

第一种是使用[html 工具提示](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content#enabling_html_tooltip)在您将鼠标悬停在栏上时显示 URL。

这是最简单的方法，但它是您的第二选择。

## 自定义事件处理程序

要在单击图表项时发生某些事情，您需要创建一个自定义事件处理程序。

首先查看条形图上的[事件文档。](https://developers.google.com/chart/interactive/docs/gallery/barchart#Events)在这种情况下，您将需要使用`select`事件。

当`select`事件被调用时，您可以使用该`getSelection()`函数查看正在选择的数据行。如果您有要在第三列中使用的 URL，您可以只`data.getValue()`用于选定的行，然后使用 javascript 根据需要打开链接。

您可以根据需要对其进行配置，但这应该使您能够找到正确的路径。

# iphone - 由 plist 控制的 UIpicker 选择

> ID：15953584
> 
> 赞同：0
> 
> 时间：2013-04-11T16:03:05.530
> 
> 标签：iphone, ios, xcode, plist, uipickerviewcontroller

如果我有一个 UILabel 保存时间，使用下面的代码保存在 plist 中。现在我想加载时间，例如凌晨 1:00 并在情节提要的另一个视图控制器中的 UIPicker 上显示时间（凌晨 1:00）。如何做到这一点？

谢谢

```
- (void)viewDidLoad
{NSString *myPath = [self saveFilePath];

    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];

    if (fileExists)
    {

        NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath];
        morningtime.text = [values objectAtIndex:0];
        afternoontime.text = [values objectAtIndex:1];

    }

    UIApplication *myApp = [UIApplication sharedApplication];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(applicationDidEnterBackground:)
                                                 name:UIApplicationDidEnterBackgroundNotification
                                               object:myApp];

    [super viewDidLoad];       }
- (NSString *) saveFilePath
{
    NSArray *path =
    NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[path objectAtIndex:0] stringByAppendingPathComponent:@"savefile.plist"];
}
- (void)applicationDidEnterBackground:(UIApplication *)application {
    NSArray *values = [[NSArray alloc] initWithObjects:morningtime.text,afternoontime.text,nil];
    [values writeToFile:[self saveFilePath] atomically:YES];

} 
```

# qt - 包含不带 .h 扩展名的 QT 头文件时出错

> ID：15953585
> 
> 赞同：0
> 
> 时间：2013-04-11T16:03:05.697
> 
> 标签：qt, cmake

我的同事在 QT 中编写了一个代码，其中包括

```
#include<QtWidgets> 
```

我的任务是为所有构建的库和可执行文件编写 cmake 文件。

我收到一条错误消息，提示找不到标头。我知道如果我将其更改为具有 .h 扩展名的另一个标头，它将起作用，但是有没有办法让我不必更改他的任何代码并且仍然能够检测到这些包含？

```
cmake_minimum_required(VERSION 2.8)
PROJECT(myproject)
SET(CMAKE_CXX_FLAGS "-g -Wall")
SET(BUILD_SHARED_LIBS ON)

# Find the QtWidgets library
find_package(Qt5Widgets REQUIRED)

FIND_PACKAGE(OpenCV REQUIRED)
FIND_PACKAGE(Boost REQUIRED)

# Instruct CMake to run moc automatically when needed.
set(CMAKE_AUTOMOC ON)

SET(SRC
  src/main.cpp
  src/video_player.cpp
  src/video_widget.cpp
  src/video_widget_surface.cpp
)

set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)

include_directories(${PROJECT_SOURCE_DIR}/include ${OpenCV_INCLUDE_DIRS} ${Qt_INCLUDE_DIRS})

add_executable(myproject ${SRC} ${myproject_HEADERS_MOC}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:02:01.643

代码有问题，它应该准备好了`#include <QtWidgets>`（注意小写`t`）。如果不改变它或丑陋的黑客，就无法完成这项工作。

# java - 如何使用 java sdk 将新的 EBS 卷附加到现有的 EC2 实例？

> ID：15953587
> 
> 赞同：1
> 
> 时间：2013-04-11T16:03:10.217
> 
> 标签：java, amazon-web-services, amazon-ec2

我曾尝试使用 AttachVolumeRequest 但作为响应我收到以下错误

```
 Caught Exception: The request must contain the parameter volume
 Reponse Status Code: 400
 Error Code: MissingParameter 
```

这是我的代码，在此代码中，ec2 是我的 amazonclient 对象，到目前为止它工作正常

```
AttachVolumeRequest attachRequest=new AttachVolumeRequest()
    .withInstanceId("my instance id");
attachRequest.setRequestCredentials(credentials);

EbsBlockDevice ebs=new EbsBlockDevice();
ebs.setVolumeSize(2);

//attachRequest.withVolumeId(ebs.getSnapshotId());

AttachVolumeResult result=ec2.attachVolume(attachRequest); 
```

非常感谢任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:16:57.663

## 原因

[AWS SDK for Java](http://aws.amazon.com/sdkforjava/)中的[EbsBlockDevice](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/EbsBlockDevice.html)类用于不同的目的，因此方法[getSnapshotId()](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/EbsBlockDevice.html#getSnapshotId%28%29)仅返回*将创建卷的快照的 ID*，即不是卷 ID，因此是相应的例外。

 *## 解决方案

您很可能想改用[CreateVolumeRequest](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/CreateVolumeRequest.html)类，例如（从我的脑海中）：

```
CreateVolumeRequest createVolumeRequest = new CreateVolumeRequest()
    .withAvailabilityZone("my instance's AZ") // The AZ in which to create the volume.
    .withSize(2); // The size of the volume, in gigabytes.

CreateVolumeResult createVolumeResult = ec2.createVolume(createVolumeRequest);

AttachVolumeRequest attachRequest = new AttachVolumeRequest()
    .withInstanceId("my instance id");
    .withVolumeId(createVolumeResult.getVolume().getVolumeId());

AttachVolumeResult attachResult = ec2.attachVolume(attachRequest); 
```*

# php - 这个有效的xml如何？

> ID：15953590
> 
> 赞同：0
> 
> 时间：2013-04-11T16:03:17.563
> 
> 标签：php, xml, simplexml

我正在调用一个返回 XML 文档的 web 服务。当我调用它时，它返回以下内容：

```
 resultsetrecordtxnref1013101155943920/txnrefchannelvisa/channelamount1000.00/amountpayment_date4/11/2013 3:59:43 PM/payment_datepayment_statussuccessful/payment_statusfield_valuesfield_valuesfieldnamesTest Test/namesacct_descFalse/acct_descacct_desc_order0/acct_desc_orderhiddenFalse/hiddendefaultvalue /xpath_field0/xpath_field/fieldfieldamount1000.00/amountacct_descFalse/acct_descacct_desc_order0/acct_desc_orderhiddenFalse/hiddendefaultvalue /xpath_field0/xpath_field/fieldfieldcurrencyNGN/currencyacct_descFalse/acct_descacct_desc_order0/acct_desc_orderhiddenFalse/hiddendefaultvalue /xpath_field0/xpath_field/fieldfieldemail_addresstest/email_addressacct_descFalse/acct_descacct_desc_order0/acct_desc_orderhiddenFalse/hiddendefaultvalue /xpath_field0/xpath_field/fieldfieldphone_number+2348031155249/phone_numberacct_descFalse/acct_descacct_desc_order0/acct_desc_orderhiddenFalse/hiddendefaultvalue /xpath_field0/xpath_field/fieldfieldmerch_txnref0/merch_txnrefacct_descFalse/acct_descacct_desc_order0/acct_desc_orderhiddenFalse/hiddendefaultvalue /xpath_field0/xpath_field/field/field_values/field_valuespayment_status_descriptionTransaction Successful - Approved/payment_status_description/record/resultset 
```

这是有效的 XML，因为当我使用`simplexml_load_string`它时，它可以在运行 PHP 5.4 的本地服务器上运行，但不能在使用 PHP 5.3 的测试服务器上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:57:26.547

出于某种原因，设置打开`php_openssl.dll`修复了问题。不知道为什么......但谷歌这么说

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:06:20.480

这是您的浏览器解析 XML 并忽略所有标签的结果。尝试查看页面源代码或使用可以处理 XML 的浏览器。

# php - PHP重载“=”运算符

> ID：15953591
> 
> 赞同：2
> 
> 时间：2013-04-11T16:03:17.497
> 
> 标签：php, operator-overloading

有没有办法重载等于运算符？

假设我有这个代码：

```
$variable1 = "a";
$variable1 = "c"; 
```

每次我分配一些东西时，我都想保存到一个日志文件中，`$variable1`而不必执行以下操作：

```
$variable1 = "a";
add_to_some_logfile("a");

$variable1 = "c";
add_to_some_logfile("c"); 
```

除了将值分配给变量之外，有没有办法覆盖等号运算符以执行其他操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:13:48.313

不。PHP 不支持运算符重载，但有一些例外（如 @NikiC 所述：“PHP 支持重载某些运算符，例如 []、-> 和 (string)，还允许重载某些语言结构，例如 foreach”） .皮斯克沃尔

[php 重载 = 运算符](https://stackoverflow.com/questions/7335765/php-overload-operator)

但在[http://pecl.php.net/package/operator](http://pecl.php.net/package/operator)是一个 php 扩展，运算符重载为：+、-、*、/、%、<<、>>、.、|、&、^、~、 !, ++, --, +=, -=, *=, /=, %=, <<=, >>=, .=, |=, &=, ^=, ~=, ==, ! =、===、!==、< 和 <= 运算符。对 > 和 >= 的条件支持可通过应用补丁获得。

# php - Android 应用内计费版本 3 - 服务器端验证

> ID：15953593
> 
> 赞同：2
> 
> 时间：2013-04-11T16:03:22.467
> 
> 标签：php, android, in-app-billing

我正在制作带有应用内购买的 Android 应用程序。在[Android 开发者中心页面上](http://developer.android.com/google/play/billing/billing_integrate.html#billing-security)，我看到我必须使用签名验证购买数据（json）。我试图为此使用[Google Code 中的 PHP 工具](http://code.google.com/p/android-market-license-verification/source/browse/trunk/library/AndroidMarket/Licensing/)，但验证失败。首先失败的是这个库不是我想要的 json （据我所知），而是一些带有字段的纯文本，用`:`and连接`|`。它也拆分了这个纯字符串以获取`packageName`和验证它。我评论了这部分代码，因为下一部分更有趣：

```
$result = openssl_verify($responseData, base64_decode($signature),
  $this->_publicKey, self::SIGNATURE_ALGORITHM);

//openssl_verify returns 1 for a valid signature
if (0 === $result) {
    return false;
} else if (1 !== $result) {
    require_once 'RuntimeException.php';
    throw new AndroidMarket_Licensing_RuntimeException('Unknown error verifying the signature in openssl_verify');
} 
```

`$responseData`我的购买 json在哪里，`self::SIGNATURE_ALGORITHM`是`OPENSSL_ALGO_SHA1`，`$this->_publicKey`是：

```
$key = self::KEY_PREFIX . chunk_split($publicKey, 64, "\n") . self::KEY_SUFFIX;
$key = openssl_get_publickey($key);
if (false === $key) {
    require_once 'InvalidArgumentException.php';
    throw new AndroidMarket_Licensing_InvalidArgumentException('Please pass a Base64-encoded public key from the Market portal');
}
$this->_publicKey = $key; 
```

其中公钥是 base64 公钥，如下所述：

```
Note:To find the public key portion of this key pair, open your application's
details in the Developer Console, then click on Services & APIs, and look at the
field titled Your License Key for This Application. 
```

但是这样的验证是失败的。我读到 API 3 是新的（2012 年 12 月），并且许多其他文章和教程与它不对应。我需要更改什么来更正此验证？

此代码使用 SHA1，但在 Android 开发人员中心页面（第一个链接）上描述了公钥是带有 X.509 的 RSA ......有什么想法吗？

**UPD**：虽然试图让服务器总是说“购买正常”并将所有购买添加到数据库中，但发现这个错误是我的失败。我将json带到base64中的服务器，因为在服务器上`base64_decode`它在两个不同的地方，所以我打破了它。该库在使用 openssl 验证 json 的部分代码中工作。据我了解，Previos 版本只是验证包名称；这可能很容易重写以`productId`从 json 读取。

# asp.net-mvc-3 - 总是看到“登录菜单”

> ID：15953594
> 
> 赞同：0
> 
> 时间：2013-04-11T16:03:24.280
> 
> 标签：asp.net-mvc-3, razor

我最近询问了为什么一段代码在剃须刀语法方面不起作用，现在我又用相同的代码提出了新问题：

```
 @if(Request.LogonUserIdentity.IsAuthenticated){
            <ul id="menu">
                <li>@Html.ActionLink("Location", "Index", "Location")</li>
                <li>@Html.ActionLink("Service", "Index", "Service")</li>
                <li>@Html.ActionLink("Service Assignment", "Index", "ServiceAssignment")</li>
                <li>@Html.ActionLink("Content Management", "Index", "Content")</li>
            </ul>                
        }else{
           <ul id="menu">
                <li>@Html.ActionLink("Location", "Index", "Location")</li>
                <li>@Html.ActionLink("Map", "Map", "Home")</li>
                <li>@Html.ActionLink("Help", "Help", "Home")</li>
            </ul>
        } 
```

这次我的问题是：

为什么如果我登录**或**退出，我只能看到菜单，而你应该只看到你是否登录？

也就是说，无论我是否登录，我都会看到经过身份验证的用户菜单。我需要在控制器中更新什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:08:38.567

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httprequest.logonuseridentity.aspx)，`Request.LogonUserIdentity.IsAuthenticated`：

> 获取当前用户的 WindowsIdentity 类型。

您很可能正在使用 FormsAuthentication 并希望使用 ( [MSDN](http://msdn.microsoft.com/en-us/library/system.web.httprequest.isauthenticated.aspx) ) `Request.IsAuthenticated`。

> 获取一个值，该值指示请求是否已通过身份验证。

**编辑**

我查看了我们用来执行此逻辑的代码，我们使用`HttpContext.User.Identity.IsAuthenticated`( [MSDN](http://msdn.microsoft.com/en-US/library/system.web.httpcontext.user%28v=vs.110%29.aspx) ) 方法来执行这种类型的分支，而不是 Request 属性。也许这就是你的问题所在。

```
@if(HttpContext.Current.User.Identity.IsAuthenticated){...} 
```

# sql - 实现别名表（自引用多对多）

> ID：15953598
> 
> 赞同：0
> 
> 时间：2013-04-11T16:03:36.607
> 
> 标签：sql, sql-server, database-design, data-modeling, self-reference

我正在尝试为别名关系建模。也就是说，我的 person 表中的几条记录可能代表同一个实际的人。我不在乎谁是“主要”人。所有人员记录都具有同等的权重。

我在过去使用您在下面看到的两个表实现了这一点。

```
-------------    ------------
| Person    |    | Alias    |
|-----------|    |----------|
| PersonID  |    | AliasID  |
| LastName  |    | PersonID |
| FirstName |    ------------
------------- 
```

以下是一些示例数据：

```
Person (1, 'Joseph', 'Smith')
Person (2, 'Jane', 'Doe')
Person (3, 'Joe', 'Smith')
Person (4, 'Joey', 'Smith')
Alias(1, 1)
Alias(1, 3)
Alias(1, 4) 
```

我想我可以将 AliasID 移动到 Person 表，因为 PersonID 字段之间存在一对一的关系。但是，我可能希望在将来的某个时间向 Alias 表中添加其他字段（如序列号等）。

有没有比我这里更好的建模方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:14:24.277

我就是这样做的。

```
--DROP TABLE [dbo].[Alias]
GO
--DROP TABLE [dbo].[RealPerson]
GO

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[RealPerson]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
    BEGIN
        DROP TABLE [dbo].[RealPerson]
    END
GO

CREATE TABLE [dbo].[RealPerson]
(
    RealPersonUUID          [UNIQUEIDENTIFIER] NOT NULL DEFAULT NEWSEQUENTIALID()
    , CreateDate                smalldatetime default CURRENT_TIMESTAMP
    , MyCompanyFriendlyUniqueIdentifier             varchar(128) not null

)

GO

ALTER TABLE dbo.RealPerson ADD CONSTRAINT PK_RealPerson
PRIMARY KEY NONCLUSTERED (RealPersonUUID)
GO

ALTER TABLE [dbo].[RealPerson]
    ADD CONSTRAINT CK_MyCompanyFriendlyUniqueIdentifier_Unique UNIQUE (MyCompanyFriendlyUniqueIdentifier)
GO

GRANT SELECT , INSERT, UPDATE, DELETE ON [dbo].[RealPerson] TO public
GO

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[Alias]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
    BEGIN
        DROP TABLE [dbo].[Alias]
    END
GO

CREATE TABLE [dbo].[Alias]
(
      AliasUUID                         [UNIQUEIDENTIFIER] NOT NULL DEFAULT NEWSEQUENTIALID()
    , RealPersonUUID                    [UNIQUEIDENTIFIER] NOT NULL
    , CreateDate                        smalldatetime default CURRENT_TIMESTAMP
    , LastName                          varchar(128) not null
    , FirstName                         varchar(128) not null
    , PriorityRank                      smallint not null
)

GO

ALTER TABLE dbo.Alias ADD CONSTRAINT PK_Alias
PRIMARY KEY NONCLUSTERED (AliasUUID)
GO

ALTER TABLE [dbo].[Alias]
    ADD CONSTRAINT FK_AliasToRealPerson
    FOREIGN KEY (RealPersonUUID) REFERENCES dbo.RealPerson (RealPersonUUID)
GO

ALTER TABLE [dbo].[Alias]
    ADD CONSTRAINT CK_RealPersonUUID_PriorityRank_Unique UNIQUE (RealPersonUUID,PriorityRank)
GO

ALTER TABLE [dbo].[Alias]
    ADD CONSTRAINT CK_PriorityRank_Range CHECK (PriorityRank >= 0 AND PriorityRank < 33)
GO

if exists (select * from dbo.sysindexes where name = N'IX_Alias_RealPersonUUID' and id = object_id(N'[dbo].[Alias]'))
    DROP INDEX [dbo].[Alias].[IX_Alias_RealPersonUUID]
GO
CREATE INDEX [IX_Alias_RealPersonUUID] ON [dbo].[Alias]([RealPersonUUID])  
GO

GRANT SELECT , INSERT, UPDATE, DELETE ON [dbo].[Alias] TO public
GO

INSERT INTO dbo.RealPerson ( RealPersonUUID , MyCompanyFriendlyUniqueIdentifier )
select '11111111-1111-1111-1111-111111111111' , 'ABC'
union all select '22222222-2222-2222-2222-222222222222' , 'DEF'

INSERT INTO dbo.[Alias] ( RealPersonUUID , LastName, FirstName , PriorityRank)
select '11111111-1111-1111-1111-111111111111' , 'Smith' , 'Joseph' , 0
union all select '11111111-1111-1111-1111-111111111111' , 'Smith' , 'Joey' , 1
union all select '11111111-1111-1111-1111-111111111111' , 'Smith' , 'Joe' , 2
union all select '11111111-1111-1111-1111-111111111111' , 'Smith' , 'Jo' , 3
union all select '22222222-2222-2222-2222-222222222222' , 'Doe' , 'Jane' , 0

select 'Main Identity' as X, * from dbo.RealPerson rp join dbo.[Alias] al on rp.RealPersonUUID = al.RealPersonUUID where al.PriorityRank = 0

select 'All Identities' as X, * from dbo.RealPerson rp join dbo.[Alias] al on rp.RealPersonUUID = al.RealPersonUUID

select 'Aliai Only' as X, * from dbo.RealPerson rp join dbo.[Alias] al on rp.RealPersonUUID = al.RealPersonUUID where al.PriorityRank > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:17:14.587

首先，您应该确定您的实体。显然你有一个人，每个人都有自己的身份。它们是独一无二的，应该始终保持不变。然后你有 Alias's 他们应该在他们自己的表中具有一对多的关系。这应该使用主键、伪造键、索引来进行适当的快速查找。每个表也需要一个聚集索引来提高性能。然后，您应该使用存储过程来返回或更新表。我故意使用了某些词，因为如果你用谷歌搜索它们，你会得到很多关于你需要做什么的好信息。

# php - 使用 PHP 创建报告 - 计算趋势

> ID：15953600
> 
> 赞同：2
> 
> 时间：2013-04-11T16:03:38.893
> 
> 标签：php, mysql, report

我正在尝试从 4 组不同的数据（来自 mysql 查询的所有数字）创建报告。该报告是一项基于用户对工作不同方面的幸福感的调查，评分均在 1-10 之间（总共有 11 个问题）。在一年中完成 4 次，以了解如何事情正在发生。

我可以很好地收集所有数据，但需要一个趋势字段。此趋势字段将显示用户的得分通常较高、较低或相同。我已经设法使 4 次出现中的 2 次起作用，但我不知道如何正确地解决 4 次出现。

到目前为止，我有这个：

```
$trend = $var1 - $var2;
if ($trend > 0){ ?><img src="<?php echo base_url("assets/images/up.png")?>" /><?php }
elseif($trend == 0){ ?><img src="<?php echo base_url("assets/images/equal.png")?>" /><?php }
elseif($trend < 0){ ?><img src="<?php echo base_url("assets/images/down.png")?>" /><?php } ?> 
```

我可能在这里遗漏了一些东西，但我已经看这个网站太久了，所以从其他人那里获得一些见解会很棒。

任何帮助都会震撼我的世界。干杯。

# php - 创建 MediaWiki 皮肤时，除了 [SkinName].php 和 [skinname] 目录之外，还有其他文件需要更改吗？

> ID：15953601
> 
> 赞同：-1
> 
> 时间：2013-04-11T16:03:40.673
> 
> 标签：php, css, mediawiki, mediawiki-templates

我正在基于现有皮肤创建一个 MediaWiki 皮肤。根据来自多个来源（包括 MediaWiki 文档）的建议，我复制了现有皮肤的 .php 文件及其关联目录。在文件名和文件本身中，我对 [previousskin] 到 [newskin] 的所有引用都进行了完整的查找和替换，但是当我尝试在我的 wiki 中预览皮肤时，根本没有应用任何样式。

皮肤正在被实例化，因为我可以在我的外观偏好中选择它，但是我不确定为什么我没有看到任何样式。

我已经测试了多个浏览器，尝试复制不同的默认皮肤并重命名它们，但重命名时我似乎无法显示任何内容。

我是否缺少任何其他需要更改以反映新皮肤的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:42:17.570

想通了。其他皮肤需要以下内容：

`require_once( "$IP/skins/myskin/myskin.php" );`

在 LocalSettings.php 文件中。

# mysql - 尝试创建具有 BLOB 类型列的表时，如何消除错误消息 1064？

> ID：15953605
> 
> 赞同：0
> 
> 时间：2013-04-11T16:03:48.287
> 
> 标签：mysql

我不断收到此表的错误。我以前从未使用 blob 创建过表，所以我不明白错误消息。有人可以解释错误吗？

```
CREATE TABLE `teamc`.`newsletter` (
    `title` VARCHAR( 100 ) NOT NULL ,
    `subtitle` VARCHAR( 100 ) NOT NULL ,
    `date` DATE NOT NULL ,
     `jpg` BLOB BINARY NULL DEFAULT NULL ,
    `pdf` BLOB BINARY NULL DEFAULT NULL ,
    PRIMARY KEY ( `title` , `date` )
) ENGINE = InnoDB; 
```

MySQL给了我以下错误：

> 文档 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'BINARY NULL DEFAULT NULL, `pdf`BLOB BINARY NULL DEFAULT NULL, PRIMARY KEY ('tit' at line 1)附近使用的正确语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:06:19.887

BINARY 是一种类型，BLOB 是一种类型 - 您不能为同一列指定多种类型。你选一个：

```
CREATE TABLE `newsletter` (
    `title` VARCHAR( 100 ) NOT NULL ,
    `subtitle` VARCHAR( 100 ) NOT NULL ,
    `date` DATE NOT NULL ,
    `jpg` BLOB NULL DEFAULT NULL ,
    `pdf` BLOB NULL DEFAULT NULL ,
    PRIMARY KEY ( `title` , `date` )
) ENGINE = InnoDB; 
```

# git - git p4 提交失败

> ID：15953609
> 
> 赞同：6
> 
> 时间：2013-04-11T16:03:59.547
> 
> 标签：git, perforce, git-p4

我尝试在我一直在运行的 repo 上运行 git p4 submit 作为 git 和 perforce 之间的临时桥梁。多人将 repo 用作遥控器，并定期将其提交回 perforce。

它一直工作得很好，除了一些重复的 perforce 提交，它们的奇怪行为我似乎无法重现。然后有一天我突然收到了这个错误。我不能再推动任何 git 提交来执行。

```
user@hostname:~/Source/code$ git p4 submit -M --export-labels
Perforce checkout for depot path //depot/perforce/workspace/ located at /home/user/Source/git-p4-area/perforce/workspace/
Synchronizing p4 checkout...
... - file(s) up-to-date.
Applying ffa390f comments in config xml files
//depot/perforce/workspace/sub/folder/structure/first.xml#3 - opened for edit
//depot/perforce/workspace/sub/folder/structure/second.xml#3 - opened for edit
//depot/perforce/workspace/sub/folder/structure/third.xml#3 - opened for edit
//depot/perforce/workspace/sub/folder/structure/forth.xml#3 - opened for edit
//depot/perforce/workspace/sub/folder/structure/fifth.xml#1 - opened for edit
error: patch failed: sub/folder/structure/first.xml:1
error: sub/folder/structure/first.xml: patch does not apply
error: patch failed: sub/folder/structure/second.xml:1
error: sub/folder/structure/second.xml: patch does not apply
error: patch failed: sub/folder/structure/third.xml:1
error: sub/folder/structure/third.xml: patch does not apply
error: patch failed: sub/folder/structure/forth.xml:1
error: sub/folder/structure/forth.xml: patch does not apply
error: patch failed: sub/folder/structure/fifth.xml:1
error: sub/folder/structure/fifth.xml: patch does not apply
Unfortunately applying the change failed!
//depot/perforce/workspace/sub/folder/structure/first.xml#1 - was edit, reverted
//depot/perforce/workspace/sub/folder/structure/second.xml#3 - was edit, reverted
//depot/perforce/workspace/sub/folder/structure/third.xml#3 - was edit, reverted
//depot/perforce/workspace/sub/folder/structure/forth.xml#3 - was edit, reverted
//depot/perforce/workspace/sub/folder/structure/fifth.xml#3 - was edit, reverted
No commits applied. 
```

该错误看起来很像这个错误：

[git-p4 提交失败，补丁不适用](https://stackoverflow.com/questions/9042865/git-p4-submit-fails-with-patch-does-not-apply)

除了我没有做任何关键字替换，所以我不知道它可能是什么。添加`--verbose`似乎对解释没有多大帮助（我手头没有该命令输出）

我能想象的唯一变化是我在提交时添加了一个 .gitattributes 文件，其中包含以下内容。但是，在该 gitattributes 文件就位的情况下，在此提交之前进行的提交确实有效，所以不可能是这样（我已经使 .gitattributes 文件更详细）

```
* text eol=lf 
```

我已经尝试将远程仓库中的提交回滚到这个有问题的提交之前，然后将它们从我的仓库重新推送到这个远程仓库，然后重新提交。相同的行为。我尝试回滚，并对同一个文件进行不同的编辑，重新推送，重新提交。相同的行为。它似乎只发生在这些文件中。自回滚以来，我尝试对其他文件进行编辑并且它们可以工作。我尝试运行 dos2unix 以强制在有问题的文件上使用 unix 行结尾，但这也没有解决它。

什么命令可以让我更好地解释这里发生了什么？有我可以跟踪的 git 日志文件吗？任何援助将不胜感激。

编辑：我已经重新测试了使用和不使用 .gitattributes 文件的问题。这没有什么区别。目前我的全局 core.autocrlf 设置是输入。但是缺少 .gitattributes 文件似乎没有什么区别。这是我只用一个有问题的文件重新测试它时的样子`--verbose`。

```
user@hostname:/code$ git p4 submit -M --export-labels --verbose
Reading pipe: git name-rev HEAD
Reading pipe: ['git', 'config', 'git-p4.allowSubmit']
Reading pipe: git rev-parse --symbolic --remotes
Reading pipe: git rev-parse p4/master
Reading pipe: git cat-file commit 0457c7589ea679dcc0c9114b34f8f30bc2ee08cf
Reading pipe: git cat-file commit HEAD~0
Reading pipe: git cat-file commit HEAD~1
Reading pipe: ['git', 'config', 'git-p4.conflict']
Origin branch is remotes/p4/master
Reading pipe: ['git', 'config', '--bool', 'git-p4.useclientspec']
Opening pipe: ['p4', '-G', 'where', '//depot/perforce/workspace/...']
Perforce checkout for depot path //depot/perforce/workspace/ located at /home/user/Source/git-p4-area/perforce/workspace/
Synchronizing p4 checkout...
... - file(s) up-to-date.
Opening pipe: p4 -G opened ...
Reading pipe: ['git', 'rev-list', '--no-merges', 'remotes/p4/master..master']
Reading pipe: ['git', 'config', '--bool', 'git-p4.skipUserNameCheck']
Reading pipe: ['git', 'config', 'git-p4.detectCopies']
Reading pipe: ['git', 'config', '--bool', 'git-p4.detectCopiesHarder']
Reading pipe: ['git', 'show', '-s', '--format=format:%h %s', 'ef3b95f5fec193fe2612b28e2e3b5e7f8ba9419e']
Applying ef3b95f making test change
Opening pipe: p4 -G users
Reading pipe: ['git', 'log', '--max-count=1', '--format=%ae', 'ef3b95f5fec193fe2612b28e2e3b5e7f8ba9419e']
Reading pipe: git diff-tree -r -M "ef3b95f5fec193fe2612b28e2e3b5e7f8ba9419e^" "ef3b95f5fec193fe2612b28e2e3b5e7f8ba9419e"
//depot/perforce/workspace/sub/folder/structure/first.xml#3 - opened for edit
<stdin>:17: trailing whitespace.
<!-- comment line 1 -->
<stdin>:18: trailing whitespace.
<!-- comment line 2 -->
<stdin>:19: trailing whitespace.
<!-- comment line 3 -->
error: patch failed: sub/folder/structure/first.xml:1
error: sub/folder/structure/first.xml: patch does not apply
Unfortunately applying the change failed!
Reading pipe: ['git', 'config', '--bool', 'git-p4.attemptRCSCleanup']
//depot/perforce/workspace/sub/folder/structure/first.xml#3 - was edit, reverted
No commits applied.
Reading pipe: ['git', 'config', '--bool', 'git-p4.exportLabels']
Opening pipe: ['p4', '-G', 'labels', '//depot/ipstor.maple/automation/...']
Reading pipe: ['git', 'tag']
Reading pipe: ['git', 'config', 'git-p4.labelExportRegexp'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:07:43.220

我想到了。该问题是由行尾引起的。我用不同的文件重新测试了这个问题，在这种情况下，错误是由于在 perforce 工作区中签出的文件的行结尾是 win 样式 crlf，而 git repo 中文件的行结尾是 unix 样式如果。

在这种情况下，我在 perforce 中检查了该文件，对它运行 dos2unix 并提交，然后运行 ​​git p4 submit 并且它工作。

这不是真正的解决方案。这只是解决方法。我向 git 的邮件列表发送了一封电子邮件，请求修复。[http://marc.info/?l=git&m=136630231402536&w=2](http://marc.info/?l=git&m=136630231402536&w=2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-30T09:57:30.023

对我来说，在我设置后提交工作`git config apply.ignorewhitespace change`。

我认为发生错误是因为 git`core.whitespace`设置在默认情况下是限制性的：

> 默认开启的是blank-at-eol，在行尾查找空格；blank-at-eof，注意文件末尾的空白行；和空格前制表符，它在行首的制表符之前查找空格。

（见[http://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration](http://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration)）

设置`apply.ignorewhitespace change`允许`git apply`修复这些错误。将设置更改为`core.whitespace`限制较少也应该可以解决问题，但我没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-30T14:44:11.417

请注意，`git p4 submit`如果您不进行变基，则可能会失败。所以一定要`git p4 rebase`在提交前运行。

# c# - 当包本地存储在 diff 文件夹中时，nuget 包项目引用会变得混乱吗？

> ID：15953611
> 
> 赞同：3
> 
> 时间：2013-04-11T16:04:02.797
> 
> 标签：c#, visual-studio, tfs

当另一个开发人员从 TFS 的存储库中获取最新信息时，解决方案中每个项目的引用似乎没有正确链接。

根据我的假设，如果您使用 nuget，它会自动为您提取必要的库，不是吗？我是否必须进入 vs.net 并告诉它下载库？

或者我是否在 TFS 中添加了一些我不应该拥有的东西，以至于它假设我的包存储在特定路径中，而当其他开发人员下载存储库时它们可能不存在？

这是 vs.net 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:15:59.373

我有一些类似的问题，所以我将 NuGet 模式切换为不[将包提交到源代码控制](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)。

1.  转到**选项**->**包管理器**->**常规**并选中“允许 NuGet 在构建期间下载丢失的包”复选框，然后按“确定”。
2.  在 Visual Studio 解决方案资源管理器中右键单击解决方案，然后选择“启用 NuGet 包还原”。

我还将**.nuget**和**packages**文件夹（前面的步骤在解决方案的文件夹中创建）的内容添加到解决[方案文件夹](http://msdn.microsoft.com/en-us/library/haytww03%28v=vs.100%29.aspx)中的解决方案。这样我可以右键单击解决方案并选择“签入...”，然后将签入所有相关文件。如果这样做，那么不包含任何包文件（如 .dll 文件）非常重要在解决方案或 TFS 中，因为这将导致 NuGet 无法正常工作。如果您选择不执行此操作，则您需要使用**Pending Changes**窗口或右键单击**Source Control Explorer**中的解决方案文件夹并选择“Check In Pending Changes...”来签入您的更改。

我的 .nuget 解决方案文件夹包含以下文件：

*   Notes.txt 描述了我如何设置 NuGet、为什么按我的方式设置它以及任何使用说明/问题。
*   NuGet.config
*   NuGet.exe
*   NuGet.targets

我的包解决方案文件夹包含以下文件：

*   存储库.config

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-13T21:48:15.693

出于某种原因，“允许 NuGen 下载丢失的软件包”并没有为我解决。我注意到在我的解决方案中为 nuget 内容创建了一个“包”文件夹。我已经签入了，但默认情况下 TFS 会过滤掉 .dll 文件。所以我不得不回到我的源代码管理资源管理器中的“包”文件夹，并添加 .dll 并签入更改。

例如，这是 Visual Studio 2013 中检查我从 NuGet 获得的 EntityFramework .dll 的步骤（假设您已经检查了没有 .dll 的“包”文件夹）

1.  在源代码管理资源管理器中找到您的包文件夹
2.  单击左侧的小箭头打开文件夹
3.  在您打开的文件夹中找到“lib”文件夹
4.  右键单击“net45”文件夹（或“net40”或其他）并选择上下文选项以“将项目添加到文件夹。
5.  从“添加到源代码管理”弹出窗口中，双击“net45”文件夹。
6.  您应该会看到一些在您初次签入时被排除的 .dll 文件
7.  单击丢失的文件，然后单击下面的“下一步”按钮...
8.  希望 .dll 现在位于“要添加的项目”选项卡中……如果没有点击屏幕底部的按钮以“包含项目”。
9.  点击完成按钮
10.  签入此待定更改
11.  现在在新工作区中获取解决方案。

# ios - 以百分之一秒的时间浮动 - Objective C

> ID：15953616
> 
> 赞同：0
> 
> 时间：2013-04-11T16:04:18.953
> 
> 标签：ios, objective-c, xcode, time

我想为我的应用程序在 Apple 的排行榜上打发时间。时间采用浮点格式，例如 9.23（9 秒，百分之二十三）

如何将此浮点数转换为 NSDate 并使用以下代码传入：

```
[self.gameCenterManager reportScore: self.currentScore forCategory: self.currentLeaderBoard]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:14:02.963

您可以`NSDate`通过`float`以下方式转换`double`：

```
double score=9.23;//or anythign in float or double
NSDate *date=[NSDate dateWithTimeIntervalSince1970:score]; 
```

那么你可以使用：

```
[self.gameCenterManager reportScore:date forCategory: self.currentLeaderBoard]; 
```

# hadoop - 如何安装hadoop？我可以用它模拟多台计算机吗？

> ID：15953619
> 
> 赞同：1
> 
> 时间：2013-04-11T16:04:26.647
> 
> 标签：hadoop, mapreduce

假设我想在一个巨大的图中找到连接的组件并且节点的数量非常大。我没有很多机器可以做。我只想模拟一个大型网络和使用 mapreduce 进行计算的机器。有什么方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:30:23.340

如果您要模拟*大量*节点，唯一可行的方法是使用[亚马逊 EMR 之类的服务](http://aws.amazon.com/elasticmapreduce/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:22:39.967

我会试试这个： http: [//www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

您可以在单台计算机上安装 Hadoop，并将其仅用于学习和开发。

其他选项是使用 Cloudera 虚拟机 (CDH4)（请参阅[http://blog.cloudera.com/blog/2012/08/hadoop-on-your-pc-clouderas-cdh4-virtual-machine/](http://blog.cloudera.com/blog/2012/08/hadoop-on-your-pc-clouderas-cdh4-virtual-machine/)）

# orbeon - 无法在 Orbeon 4.0.1 上检索 Header 信息，但可以在 3.9 上使用

> ID：15953620
> 
> 赞同：0
> 
> 时间：2013-04-11T16:04:33.097
> 
> 标签：orbeon

我正在尝试使用以下函数获取标头信息：get-request-header()。

它适用于 Orbeon 3.9：

```
<xforms:bind id="control-1-bind" name="control-1" nodeset="control-1" 
 type="xforms:string" xxforms:default="xxforms:get-request-header('User-Agent')"/>
</xforms:bind> 
```

但是 Orbeon 4.0.1 上没有返回任何内容，字段为空：

```
<xf:bind id="control-1-bind" name="control-1" ref="control-1"
    xxf:default="xxf:get-request-header('User-Agent')"/> 
```

我还在演示环境（[http://demo.orbeon.com/orbeon/home/](http://demo.orbeon.com/orbeon/home/)）中进行了测试，但仍然没有。无法检索表单中的标题信息。

函数 get-request-header() 在 Orbeon 4.0.1 上不起作用。

问候， Sefer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:31:08.253

似乎 4.0 要求标题名称为小写，这看起来像是一个未缩进的回归。所以现在，作为一种解决方法，请改用`xxforms:get-request-header('user-agent')`. 一旦[这个问题](https://github.com/orbeon/orbeon-forms/issues/926)得到解决，您将能够再次使用混合大小写的标题名称。

# jquery - 如何在 asp.net 中为 Jquery 对话框标题设置工具提示

> ID：15953622
> 
> 赞同：0
> 
> 时间：2013-04-11T16:04:53.163
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我在下面创建了一个 jQuery 对话框：

```
$(document).ready(function () {
    $('.divid').dialog({
        autoOpen: false,
        draggable: true,
        width: 720,
        height: 560,
        modal: true,
        closeOnEscape: false,
        title: "My Title",
        open: function (type, data) {
            $(this).parent().appendTo("form");
        }
    });
}); 
```

我需要为对话框标题添加一个工具提示（在本例中设置为“我的标题”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:10:18.867

你可以试试这个：

```
$('.divid').dialog({
    autoOpen: false,
    draggable: true,
    width: 720,
    height: 560,
    modal: true,
    closeOnEscape: false,
    title: "My Title",
    open: function (type, data) {
        $(this).parent().appendTo("form");
    }
}).siblings('.ui-dialog-titlebar')
  .find('.ui-dialog-title')
  .prop('title', $('.divid').dialog("option", "title")); 
```

**[工作演示。](http://jsfiddle.net/CqPGm/)**

# java - 数据表中的 JSF / Primefaces selectBooleanCheckbox 组件始终未选中

> ID：15953623
> 
> 赞同：3
> 
> 时间：2013-04-11T16:04:56.897
> 
> 标签：java, jsf, checkbox, primefaces, facelets

在我的项目中，我使用的是 JSF 2.0 和 Primefaces 3.5。

在一页中，我有一个`p:dataTable`表格，一列有一个表格`selectBooleanCheckbox`。我尝试了`p:selectBooleanCheckbox`和`h:selectBooleanCheckbox`。我的代码如下：

```
<h:panelGrid columns="3">
            <p:selectBooleanCheckbox id="id" value="false" />
            <p:selectBooleanCheckbox id="id" value="true" />
            <p:dataTable id="tbl" value="#{bean.items}" var="item" paginator="false">
                <p:column>
                    <h:outputText value="#{item.value}" />
                </p:column>
                <p:column>
                    <h:outputText value="#{item.value}" />
                </p:column>
                <p:column style="white-space:normal; text-align: center;">
                    <p:selectBooleanCheckbox id="id" value="#{item.checked}" />
                    <p:selectBooleanCheckbox id="id" value="true" />
                    <p:selectBooleanCheckbox id="id" value="false" />
                    <h:selectBooleanCheckbox id="id" value="true" />
                    <h:selectBooleanCheckbox id="id" value="false" />
                </p:column>
            </p:dataTable>
        </h:panelGrid> 
```

结果：

![primefaces jsf selectBooleanCheckbox](https://i.stack.imgur.com/5Yzpm.png)

我想显示 selectBooleanCheckbox 的正确大小写。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:47:30.290

您应该使用`#{true}`or`#{false}`代替`true`or`false`
像这样：

```
<p:selectBooleanCheckbox id="id" value="#{true}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:57:58.370

您似乎没有将复选框链接到支持 bean 中的任何值。尝试将值存储在您的支持 bean 中并将其反映在您的复选框中。例如，

支持豆：

```
private Boolean value1 = true;
private Boolean value2 = false;

//appropriate getters and setters for the above values 
```

JSF 页面片段：

```
<p:selectBooleanCheckbox value="#{backingbean.value1}" itemLabel="Value 1"/>
<p:selectBooleanCheckbox value="#{backingbean.value2}" itemLabel="Value 2"/> 
```

这应该导致第一个复选框被选中（因为 value1 = true），第二个不应该是 value2 = false。以这种方式，每当您单击复选框时，它的值也将分别反映在 value1 和 value2 中。

希望有帮助...

此外，如果您想手动设置复选框以进行检查，@navand 说使用 #{true} 和 #{false} 是正确的。

# rsa - 以 0x00 开头的 RSA 模数

> ID：15953631
> 
> 赞同：2
> 
> 时间：2013-04-11T16:05:28.277
> 
> 标签：rsa, public-key-encryption, x509

```
 0:d=0  hl=4 l= 266 cons: SEQUENCE          
    4:d=1  hl=4 l= 257 prim:  INTEGER           :BDF2C14F11E80EEC62EE63135839DBD8C9140617CD497AB2E0E39E6A0CE75889B46D7EA2BE11ED8D5E05941F9BCF066E1DA9D176D32B22AD34F8F9055680F01F156AD4CAF288FBDF0BB03C1E58ADDFB8DFBC4870C18B38BAB0B3B35757BC10D662E3AD113387348E48E1B46E2DB0041BECA6DFD323EC6D204D7F9B875B9E6C51A1B37E3019D03DB71584F83ED300CC471B42D5C5F1CBD54D884A04A4CD4ABAB87B48C0BDAC4E32DE4B1EB238A3C979CFF07808511D7A4EC5898A2ED93C3BA36661FA14E252BCBDC0876C41D02FBB0B97CD1963A6CB09B274A9D395E93177A6DD00BE3B7C3AC89E53E84829E5B1E0F4048485EE09AE6711791B0B6107F6106423
  265:d=1  hl=2 l=   3 prim:  INTEGER           :010001

$ echo -n 'BDF2C14F11E80EEC62EE63135839DBD8C9140617CD497AB2E0E39E6A0CE75889B46D7EA2BE11ED8D5E05941F9BCF066E1DA9D176D32B22AD34F8F9055680F01F156AD4CAF288FBDF0BB03C1E58ADDFB8DFBC4870C18B38BAB0B3B35757BC10D662E3AD113387348E48E1B46E2DB0041BECA6DFD323EC6D204D7F9B875B9E6C51A1B37E3019D03DB71584F83ED300CC471B42D5C5F1CBD54D884A04A4CD4ABAB87B48C0BDAC4E32DE4B1EB238A3C979CFF07808511D7A4EC5898A2ED93C3BA36661FA14E252BCBDC0876C41D02FBB0B97CD1963A6CB09B274A9D395E93177A6DD00BE3B7C3AC89E53E84829E5B1E0F4048485EE09AE6711791B0B6107F6106423' | wc
      0       1     512 
```

以上是 OpenSSL 生成的 2048 位 RSA 密钥。请注意，模数字段的长度为“257”。如果您计算为模数打印的十六进制字符，您会看到它适当地为 512=256*2。在 ASN1 中，模数前面有一个 0x00。由于模数是整数，因此这不会影响 RSA 数学。但为什么会在那里？在 X509 证书中也可以看到 0x00 前缀为公钥值。这些额外的 0x00 的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:42:45.840

那是因为 ASN.1 编码。据我记得，那里的整数是有符号的，所以当它们从高于 0x80 的字节开始时，它们应该被视为负数，这就是它们以 0x00 为前缀的原因。

# javascript - jquery根据数据库记录添加列

> ID：15953638
> 
> 赞同：0
> 
> 时间：2013-04-11T16:05:53.567
> 
> 标签：javascript, jquery, html, sqlite

我有一个包含这些列的 sqlite 表：| 日期 | 重量 | 体重指数 | 心情 | 等等

我希望我的 html 页面上的表格在 html 页面上显示如下：

```
<table>
    <caption></caption>
    <thead>
         <tr>
               <td>(empty cell over row headings)</td>
               Additional tH's as needed (this is where each date entry goes)
         </tr>
    </thead>
    <tbody>
         <tr>
               <th scope="row">Weight</th>
               additional tD's as needed (this is where each weight entry goes matched with date in column heading)
         </tr>
         <tr>
               <th scope="row">BMI</th>
               additional tD's as needed (same as above)
         </tr>
    </tbody>
</table> 
```

所以基本上我为了显示目的而翻转行和列。这就是我可以使用 jQuery Visualize 插件绘制表格的所有内容，该插件会随着日期的进行而消失。可以想象，随着时间的推移，更多条目将添加到显示表的列中。到目前为止，这是我一直在搞砸的（不包括图形脚本）。我让自己完全困惑，现在我只是一团糟......任何建议都会有很大帮助。我想我在尝试将数据插入到也试图插入自身的表中时遇到了问题。我敢打赌，我可能会犯这个错误。谢谢迈克

```
function homeSuccess(tx, results) {
    // Gets initial count of records in table...
    var entries = results.rows.length;
    // Iterates over all the existing records...
    for (var i = 0; i < entries; ++i) {
        // The following element id's can be found in the div's within the table below, see element.innerHTML line...
        var element = document.getElementById('colDate');
        element.innerHTML += '<th scope="col">' + results.rows.item(i).timeStamp + '</th>';
        var element2 = document.getElementById('tdWeight');
        element2.innerHTML += '<td>' + results.rows.item(i).weight + '</td>';
        var element3 = document.getElementById('tdBmi');
        element3.innerHTML += '<td>' + results.rows.item(i).bmi + '</td>';
    };
    // 'screenView2 is a placeholder on the main html page...
    var element = document.getElementById('screenView2');
    element.innerHTML = '<br /><br /><h1>Data:</h1><br />Number of entries: ' + entries + '<br />' + '<table><caption>Mikes Health</caption><thead><tr><td></td><div id="colDate"></div></tr></thead><tbody><tr><th scope="row">Weight</th><div id="colWeight"></div></tr><tr><th scope="row">BMI</th><div id="colBmi"></div></tr></tbody></table>';

    // This section is just a test trying to plug in static elements prior to trying database data... When using this section I had the iteration section commented out.
    var element2 = document.getElementById('colDate');
    element2.innerHTML = '<th scope="col">4-1-13</th>';

    var element3 = document.getElementById('colWeight');
    element3.innerHTML = '<td scope="col">123</td>';

    var element4 = document.getElementById('colBmi');
    element4.innerHTML = '<td scope="col">321</td>';
}

function homeQuery(tx) {
    console.log("entering homeQuery");
    tx.executeSql('SELECT * FROM HEALTHGRAPH', [], homeSuccess, onSqlError);
    console.log("leaving homeQuery");
}

// Function that is called on initial page load 
function homeDBopen() {
    console.log("opening db for home data");
    theDB = window.openDatabase("hgDB", "1.0", "HealthGraph", 3 * 1024 * 1024);
    theDB.transaction(homeQuery, onTxError, onTxSuccess);
    console.log("leaving homeDBopen");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:23:11.537

肯定有人会回答这个问题，因为这似乎是很多人必须遇到的问题。有点气馁。无论如何，我在这里找到了一个可以适应我自己的项目的答案：

[http://msdn.microsoft.com/en-us/library/ie/ms532998(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms532998%28v=vs.85%29.aspx)

```
// Insert cells into the header row.
  for (i=0; i<heading.length; i++)
  {
    oCell = oRow.insertCell(-1);... etc. 
```

# java - 在 Mac OSX 10.6.8 上找不到 mysqladmin

> ID：15953641
> 
> 赞同：3
> 
> 时间：2013-04-11T16:06:03.833
> 
> 标签：java, mysql, database, netbeans

我正在尝试在 Netbeans 上设置管理路径，但在安装 MySQL 社区服务器后，我无法在 OSX 10.6.8 上找到 mysqladmin。有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:09:48.980

在 Mac 上，默认情况下，mysql 安装到`/usr/local/mysql/`

因此，二进制文件（mysql、mysqladmin 等）的路径应该是`/usr/local/mysql/bin`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:12:15.057

Mac 的 MySQL 实例默认位置：`/usr/local/mysql`

路径`mysqladmin`：`/usr/local/mysql/bin/mysqladmin`

# javascript - Javascript在rails应用程序中不起作用

> ID：15953644
> 
> 赞同：-2
> 
> 时间：2013-04-11T16:06:10.510
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

> 于 2013 年 4 月 11 日 17:59:52 +0200 为 127.0.0.1 开始 GET "/assets/jquery.js?body=1" +0200 服务资产 /jquery.js - 304 未修改 (0ms)
> 
> 在 2013-04-11 17:59:52 +0200 为 127.0.0.1 开始 GET "/assets/jquery_ujs.js?body=1" 服务资产 /jquery_ujs.js - 304 未修改 (0ms)
> 
> 在 2013-04-11 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/jquery-fileupload/vendor/jquery.ui.widget.js?body=1" 服务资产 /jquery-fileupload/vendor/ jquery.ui.widget.js - 304 未修改（0 毫秒）
> 
> 在 2013-04-11 17:59:53 +0200 开始 GET "/assets/jquery-fileupload/jquery.iframe-transport.js?body=1" for 127.0.0.1 服务资产 /jquery-fileupload/jquery.iframe- transport.js - 304 未修改（0 毫秒）
> 
> 在 2013-04-11 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/jquery-fileupload/jquery.fileupload.js?body=1" +0200 服务资产 /jquery-fileupload/jquery.fileupload.js - 304 未修改 (0ms)
> 
> 在 2013 年 4 月 11 日 17:59:53 +0200 服务资产 /jquery-fileupload/basic.js - 304 未修改 ( 0毫秒）
> 
> 2013 年 4 月 11 日 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/jquery-fileupload/vendor/tmpl.js?body=1" +0200 服务资产 /jquery-fileupload/vendor/tmpl.js - 304 未修改 (0ms)
> 
> 在 2013-04-11 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/bootstrap-transition.js?body=1" 服务资产 /bootstrap-transition.js - 304 未修改 (0ms)
> 
> 2013 年 4 月 11 日 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/bootstrap-affix.js?body=1" 服务资产 /bootstrap-affix.js - 304 未修改 (0ms)
> 
> 在 2013-04-11 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/bootstrap-alert.js?body=1" 服务资产 /bootstrap-alert.js - 304 未修改 (0ms)
> 
> 2013 年 4 月 11 日 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/bootstrap-button.js?body=1" 服务资产 /bootstrap-button.js - 304 未修改 (0ms)
> 
> 在 2013-04-11 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/bootstrap-carousel.js?body=1" 服务资产 /bootstrap-carousel.js - 304 未修改 (0ms)
> 
> 在 2013-04-11 17:59:53 +0200 为 127.0.0.1 开始 GET "/assets/bootstrap-collapse.js?body=1" 服务资产 /bootstrap-collapse.js - 304 未修改 (0ms)

关于这是什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:09:52.567

它正在工作。只是客户端已经有了你的文件，没有理由重新发送它，所以它只是发送一个 304 代码。您可以显式设置标头以拒绝浏览器缓存它，然后它将始终用于最新版本。

# javascript - Flexslider 和 Easytabs

> ID：15953649
> 
> 赞同：0
> 
> 时间：2013-04-11T16:06:23.230
> 
> 标签：javascript, jquery, flexslider

当滑块到达最后一项时，我希望选项卡循环到下一个选项卡。

这是一个[小提琴](http://jsfiddle.net/bucek/cpmvd/)。我把`flexslider`旋转木马放在`jquery`easytabs里面。

由于我只是一个初学者，这是我的脚本：

```
if (target === slider.last) {
  EASYTABS MOVE AUTOMATICLY TO THE NEXT TAB       
} 
```

* * *

修订

抱歉。我只有一个带有 4 个选项卡（面板）的 easytab，每个选项卡都有一个轮播。我想在 flexslider 到达最后一项时循环它们。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:52:08.777

我想我正确地解释了您的问题：您在页面上有一个 flexslider 幻灯片和一组 easytabs 选项卡，并且您希望每次幻灯片播放结束时选择下一个选项卡，在一个永久循环中，对吗？

如果是这样 ...

Flexslider 有一个名为 'end' 的回调，当幻灯片播放到最后一张幻灯片时触发，因此您需要绑定一个方法，在 flexslider 调用中使用类似以下内容的方法将选项卡递增到该方法：

```
// an array of the selectors for the tabs themselves
easyTabSelectors = ['#tab-1','#tab-1','#tab-1'];

// a reference to the currently active tab by index in the array easyTabSelectors
currentEasyTab = 0;

// create your flexslider
$("#flexslider-container").flexslider({

  //Put all your other flexslider config stuff here

  // bind to the 'end' callback
  end: function () {
    currentEasyTab++; // increment the currentEasyTab variable

    // if the currentEasyTab is now a tab too far, start over
    if (currentEasyTab = easyTabSelectors.length)
      currentEasyTab = 0;

    // use the easytab 'select' method to select the next tab using the array and reference
    $('#easy-tab-container').easytabs('select', easyTabSelectors[currentEasyTab]);
  }
}); 
```

如果您正在寻找在该点也停止循环播放的幻灯片，您也可以这样做。Flexslider 有很多方法和回调可以使用。

参考： - flexslider 文档/高级/所有可用的 FlexSlider 属性：[http](http://www.woothemes.com/flexslider/) ://www.woothemes.com/flexslider/ - 选择选项卡的easytabs公共方法：http: [//os.alfajango.com/easytabs/#public-methods](http://os.alfajango.com/easytabs/#public-methods)

# jquery - 通过javascript更改身体不透明度

> ID：15953656
> 
> 赞同：0
> 
> 时间：2013-04-11T16:06:36.947
> 
> 标签：jquery, css, opacity

我有一个滑块可以更改我网站的不透明度

```
<script type="text/javascript">
    $(document).ready(function() {        
        $('#slider').slider({ 
        min: 0, 
        max: 1, 
        step: 0.01, 
        value: 1,
        orientation: "vertical",
             slide: function(e,ui){
$('body').css('opacity', ui.value)
             }                
        })
    });
</script> 
```

但我不想改变我体内 2 或 3 类的不透明度。谢谢。

LE：同时我想降低一些元素的不透明度，而不是他们我想要一个黑色面具。所以在整个站点上只有 .the_window 和 .the_trigger 可见并且背景为黑色。示例：catalog-online.ro/test/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-05T09:15:18.053

尝试这个

```
document.getElementsByTagName("body").style.opacity = "0"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:15:08.590

CSS[`opacity`](http://www.w3.org/TR/css3-color/#transparency)将应用于后代元素。由于您正在更改`<body>`不透明度，因此它将影响整个页面。您必须选择页面上的其他元素并更改这些元素的不透明度，避免您不想更改不透明度的类。

**编辑：**这是一个非常[**简单的演示**](http://jsfiddle.net/Pr78v/)，可能会有所帮助：

**HTML**

```
<div id="main">Lorem ipsum, my opactiy is not affected</div>
<p>My opactiy is affected</p>
<div id="lightbox"></div> 
```

**CSS**

```
#lightbox {
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    background-color:#000;
    opacity:.6;

}

#main {
    position:relative;
    background-color:#fff;
    z-index:1;
}

p {
    color:#f00;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:15:30.850

我不是 jquery 人，但你可以在幻灯片功能中尝试这样的事情：

```
slide: function(e,ui){
   $('body').css('opacity', ui.value);
   $('#element_1_ID').css('opacity', 1);
   $('#element_2_ID').css('opacity', 1);
} 
```

将 element_1_ID 和 element_2_ID 替换为您不想对其应用不透明度的那些元素的 ID。希望它可以工作，否则另一种选择可能是设置单个元素的不透明度。将一些设置为 0，将一些设置为 1。

# file - 如何读取最新的 SPSS .por 文件格式

> ID：15953663
> 
> 赞同：2
> 
> 时间：2013-04-11T16:07:02.577
> 
> 标签：file, format, spss

有人知道 SPSS .por 文件的格式吗？我正在维护一个读取 .por 文件的实用程序。在 SPSS v12 之前，它运行良好。它不再读取使用最新版本的 SPSS (v19) 创建的 .por 文件。.por 文件格式发生了什么变化？或者我怎样才能知道如何阅读这些 .por 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-18T20:20:39.530

它们是固定的 ASCII 记录，每个记录 80 个字符。前几行是标头数据，其余的是 base-30 格式的实际数据。

您使用 SPSS 中的 IMPORT 命令将它们读入。

# java - Java中“未经检查的强制转换”警告的解释

> ID：15953666
> 
> 赞同：0
> 
> 时间：2013-04-11T16:07:24.690
> 
> 标签：java, exception, casting

我只是一个初学者，我希望有一个好的灵魂来帮助我；）我得到了这个方法并上线了：

```
( (HashSet<String>) pos[targetPos]).add(word); 
```

它给了我一个例外

```
 (Unchecked cast from Object to HashSet<String>) 
```

我试图将 Object[pos] 更改为 String[pos] 以更具体，但它在这一行给我一个错误：`pos[targetPos] = new HashSet<String>();`

```
Type mismatch: cannot convert from HashSet<String> to String 
```

这是方法：

```
public void add(String word, Object[] root){

    Object[] pos = root;
    int wordIndex = 0;
    int targetPos;

    if(word.length()>=3){
        for(int i = 1; i <=3; i++){
            targetPos = word.charAt(wordIndex) -'a'; //convert a letter into index eg a==0
            if(i==3){
                if(pos[targetPos]==null){
                    pos[targetPos] = new HashSet<String>();
                }
                ( (HashSet<String>) pos[targetPos]).add(word);
                //System.out.println(Arrays.toString(pos));
                break;

            }//end if outer if
            else{
                if(pos[targetPos]==null){
                    pos[targetPos] = new Object[28];
                }
                wordIndex++;
                pos =  (Object[]) pos[targetPos];
            }
        }//end of for
    }

} 
```

根是

```
 Object[] root = new Object[28]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:10:51.640

“未经检查的演员表”消息是一个警告。编译器警告您，它不能确定从`Object`to的显式转换`HashSet<String>`可以在运行时安全地发生，这意味着如果您的类型数组`Object`包含除 之外的*其他*`HashSet<String>`内容，那么`ClassCastException`当 JVM 尝试将该对象转换为 type `HashSet<String>`。本质上，编译器会事先警告您您正在做一些可能不安全的事情，并且以后可能会成为问题的根源。

简单地使用数组的原始对象不是一个好习惯。如果您要确定数组只包含`HashSet<String>`对象，那么您可能应该这样键入它（即`Set<String>[]`；使用接口而不是您的类型的具体实现，因为这样您可以在需要时切换实现） . 唯一应该进行显式转换的时候是当您可以*绝对确定*要转换的对象绝对是您要转换的类型时。例如，如果您有一个实现接口的对象，并且还假设您在某个类中，该类最肯定使用该接口的特定具体实现。在这种情况下，可以将其从该接口转换为具体类型。

您的方法应如下所示：

```
public void add(String word, Set<String>[] root){

    Set<String>[] pos = root; //You probably don't even need this since you have "root"
    ...
} 
```

另外，考虑使用`List`of`Set<String>`代替数组：

```
public void add(String word, List<Set<String>> root){

    List<Set<String>> pos = root; //You probably don't even need this since you have "root"
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T16:11:07.043

`pos[]`被定义为一个`Object`数组。当您将其转换为`HashSet<String>`稍后时，Java 不知道您可以这样做。这就是未经检查的强制转换 - 编译器警告您您可能正在做一些不安全的事情。

`pos`您可以通过将类型更改为来使警告消失`HashSet<String>[]`。

# jquery - 在 jquery 函数之前运行 javascript 函数

> ID：15953668
> 
> 赞同：0
> 
> 时间：2013-04-11T16:07:28.173
> 
> 标签：jquery, google-maps, google-maps-api-3, map

我在移动设备上获取用户位置并将其发送到数据库，然后运行 ​​jquery 函数在地图上绘制指针。

但是，地图似乎总是在我更新用户位置之前加载，这意味着该位置是之前设置的位置。

getGeoLocation 是使用正确位置更新数据库的函数，但它只在 jquery 函数之后运行。似乎无法解决这个问题......我怎样才能在拨打电话后才加载地图？

```
<script>
$(document).ready(function(){

    getGeoLocation();

    alert('map');

    var result = JSON.parse('<?php usersWithinRadius(); ?>');

    $('#map').gmap3({
        marker:
        {                   
            values: result,
        },
        map:
        {
          options:
          {
            zoom:12,
            mapTypeControl: false,
            navigationControl: true,
            streetViewControl: false
          }

      }

    });

});   
</script> 
```

这是 getGeoLocation 引用的代码：

```
//Initialize geolocation
function getGeoLocation() 
{       

    if(navigator.geolocation) 
    {

        navigator.geolocation.getCurrentPosition(
            recordGeoLocation, 
            geoLocationErrorHandler, {
                enableHighAccuracy: true,
                timeout: 20000,
                maximumAge: 120000
            }
        );

        return true;

    }
    else 
    {

        alert('Geolocation not supported');

        return false;

    }

}

//Map position retrieved successfully
function recordGeoLocation(position) 
{

    var data = new Object();

    data.latitude = position.coords.latitude;
    data.longitude = position.coords.longitude;

    /** Other data
    data.altitude = position.coords.altitude;
    data.accuracy = position.coords.accuracy;
    data.altitudeAccuracy = position.coords.altitudeAccuracy;
    data.heading = position.coords.heading;
    data.speed = position.coords.speed;
    **/

    recordUserGeoLocation(data.latitude, data.longitude);

}

//Send the latitude and longitude to database
function recordUserGeoLocation(latitude, longitude)
{

    var BASE_URL = $('#BASE_URL').val();

    var ajaxURL = BASE_URL + 'ajax/recordUserGeoLocation/';

    $.ajax({
        type: 'POST',
        url: ajaxURL,
        data: { 
            latitude: latitude,
            longitude: longitude
        },
        dataType: 'json',
        success: function(data){

            //The record has been added
            console.log('Recorded location: ' + latitude + ' , ' + longitude);

            alert('Recorded location: ' + latitude + ' , ' + longitude);

        }
    });

}

//Error handler
function geoLocationErrorHandler(err) 
{

    var message;

    switch(err.code) 
    {
        case 0:
            message = 'Unknown error: ' + err.message;
            break;
        case 1:
            message = 'You denied permission to retrieve a position.';
            break;
        case 2:
            message = 'The browser was unable to determine a position: ' + error.message;
            break;
        case 3:
            message = 'The browser timed out before retrieving the position.';
            break;
    }

    alert(message);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:13:06.777

您可以将其余代码`$(document).ready()`放在一个函数中，并在函数中的成功函数末尾调用它`recordUserGeoLocation()`。

```
// code to execute after you get the geo location
function initMaps() {
   var result = JSON.parse('<?php usersWithinRadius(); ?>');
   $('#map').gmap3({
      ...
   }
}

function recordUserGeoLocation(latitude, longitude) {
   ...
   $.ajax({
      ...
      success: function(data) {
         ...
         initMaps(); // now that all is done, call it
      }
   });
   ...
}

$(document).ready(function(){
    getGeoLocation(); // call just this from ready
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:17:57.543

gmap3 中有一个“回调”属性。如果我对您的理解正确，您需要将 getGeoLocation 函数调用放在回调中，以便地图信息可用。例如：

```
$(function() {
    $('#map').gmap3({
        marker:
        {                   
            values: result,
        },
        map:
        {
          options:
          {
            zoom:12,
            mapTypeControl: false,
            navigationControl: true,
            streetViewControl: false
        },
        callback: function() {
            getGeoLocation()
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:18:32.207

我刚刚意识到问题出在哪里，这是因为我在运行任何 javascript 之前在服务器端加载指针，我需要运行：usersWithinRadius via ajax 来解决问题，无论如何感谢您的帮助！

# solr - 使 CloudSolrServer 仅在领导者上运行数据导入

> ID：15953669
> 
> 赞同：0
> 
> 时间：2013-04-11T16:07:28.373
> 
> 标签：solr, dataimporthandler, solrcloud

我用 SolrCloud 建立了一个两台服务器的 Solr 集群。目前我有Master和Replica。

我想将数据导入到领导者，因为在从属上进行增量导入没有任何意义（更新不会分发给领导者）。

从文档中我得到 CloudSolrServer 知道集群状态（从 Zookeeper 获得）并且默认情况下只将所有更新发送给领导者。

我想要的是让 CloudSolrServer 将所有数据导入命令发送到主服务器。我有以下代码：

```
 SolrServer solrServer = new CloudSolrServer("localhost:2181");
        ModifiableSolrParams params = new ModifiableSolrParams();
        params.set("qt", "/dataimport");
        params.set("command", "delta-import");
        QueryResponse response = solrServer.query(params); 
```

但我看到请求仍然发送到我的服务器 localhost:8080 和 localhost:8983。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T09:43:26.767

只需将您的 solr 服务器初始化替换为以下

```
SolrServer solrServer = new CloudSolrServer("zkHost1:port,zkHost2:port"); 
```

这将导致 solr 服务器客户端向 zookeeper 咨询 solrcloud 状态。有关更多详细信息，请阅读 CloudSolrServer 文档以从 zookeeper ensemble 进行初始化。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-11-18T10:31:53.350

```
try { CloudSolrServer css = new CloudSolrServer("host1:2181,host2:2181"); css.connect(); ZkStateReader zkSR2 = css.getZkStateReader(); String leader = zkSR2.getLeaderUrl("collection_name", "shard1", 10); } catch (KeeperException e) { } catch (IOException
e) { } catch (InterruptedException e) {}
```

# python - 在 Tempita 中执行带有渲染变量的 python 代码

> ID：15953672
> 
> 赞同：0
> 
> 时间：2013-04-11T16:07:32.597
> 
> 标签：python

我正在尝试使用渲染变量在 Tempita 中运行 python 代码：

```
{{py:
import subprocess
return subprocess.check_output(["do-something","--var=http://server_host:8000/"])
}} 
```

但是 server_host 是一个变量。所以如果我这样做：

```
{{server_host}} 
```

它被正确渲染。我试图在运行 python 代码时使用 {{server_host}} 变量的渲染输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:13:41.633

我没有使用过 Tempita，但我认为以下应该可行：

```
{{py:
import subprocess
return subprocess.check_output(["do-something","--var=http://"+server_host+":8000/"])
}} 
```

# android - 即使设置为可见，Google Map v2 ImageView 仍然不可见

> ID：15953680
> 
> 赞同：1
> 
> 时间：2013-04-11T16:07:55.767
> 
> 标签：android, imageview

我需要根据用户的行为显示和隐藏 ImageView。我将 ImageView 设置为不可见，`onCreate()`并尝试在用户选择 OptionsMenu 中的项目时使其再次可见。奇怪的是它根本没有出现，只会在 Activity 恢复后出现。

这是 XML 代码：

```
<ImageView
    android:id="@+id/rectimage"
    android:layout_width="20dp"
    android:layout_height="20dp"
    android:src="@drawable/rect" /> 
```

我在哪里隐藏图像视图

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    image = (ImageView) findViewById(R.id.rectimage);
    image.setVisibility(View.INVISIBLE);
} 
```

我试图让它再次可见的地方

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {              
    case R.id.menu_visible:
        image.setVisibility(View.VISIBLE);          
    return true;
    }
    return false;
} 
```

这是 onStart 和 onResume ，什么也不做。

```
@Override
protected void onStart() {
    super.onStart();
    Log.w(TAG, "-- ON Start --");

}

@Override
public void onResume() {
    super.onResume();
    Log.w(TAG, "-- ON Resume --");
} 
```

这是我在 XML 中的可绘制资源

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"  android:shape="rectangle">
<solid android:color="@android:color/transparent"/>
<corners android:radius="20px"/> 
<stroke  android:width="2dip" android:color="#000000"/>  
</shape> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:34:24.610

这是因为您正在绘制一个透明的矩形：

```
<solid android:color="@android:color/transparent"/> 
```

你看到边界被画了吗？

另外，您是否尝试过设置断点`onOptionsItemSelected`以确保它被调用？

# php - htaccess 301 将 domain.com/dir/trackback/ 重定向到 domain.com/dir/

> ID：15953685
> 
> 赞同：0
> 
> 时间：2013-04-11T16:08:12.413
> 
> 标签：php, apache, .htaccess

正如标题所述，我遇到了一些传入流量源，它们在我的一些 URL 的末尾添加 /trackback/。由于我现有的 htaccess 抓取了目录名称，因此页面加载良好......但我不想生成大量重复的内容，无论是否添加 /trackback/。这些传入的点击需要从末尾删除 /trackback/。在不更改传入链接/来源的情况下完成此任务的最佳方法是什么？

我目前正在使用 php 检查 $_SERVER['REQUEST_URI'] 并在没有 /trackback/ 的情况下重定向回相同的 URL，但我确信 htaccess 会快得多，因为它不需要处理我网站的 php 引擎两次...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:14:17.747

最简单的解决方案是 301 重定向，它将在大多数爬虫中标记 URL，就好像他们找到的 URL（带有 /trackback/）永久重定向到没有的版本。这将使您不会让 Google 将您的内容标记为重复。

您可以使用重写来做到这一点：

```
RewriteRule ^(.*)/trackback/$ $1 [R=301,L] 
```

这将在末尾将任何带有 /trackback/ 的内容标记为重定向到没有的页面。

**注意**：这些点击很可能是寻找具有自动引用确认的博客以发布更多链接的机器人。

# android - 图片说它没有保存在文件位置

> ID：15953695
> 
> 赞同：1
> 
> 时间：2013-04-11T16:08:51.503
> 
> 标签：android, rest, logcat, android-camera-intent

在我的应用程序中，我试图将图像上传到使用 REST 技术接收的服务。

我将我的意图设置为 Launch the Camera Function 和 onActionResult 来处理图像并将其传递给 AsyncTask 处理它到服务器。

**代码：**

```
package com.testingapp;

import java.io.File;
import java.io.IOException;
import java.util.Map;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

import android.annotation.SuppressLint;
import android.app.ActionBar;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.hardware.Camera;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.provider.MediaStore.Images.ImageColumns;
import android.provider.MediaStore.MediaColumns;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;
import android.widget.Toast;

@SuppressLint("NewApi")
public class HomeActivity extends Activity {
    final static String DEBUG_TAG = "MakePhotoActivity";
    protected static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 0;
    private Camera camera;
    private int cameraId = 0;
    HttpEntity resEntity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ActionBar actionBar = getActionBar();
        actionBar.setTitle("My Relocation");
        actionBar.setIcon(R.drawable.menu_ic_launcher);
        setContentView(R.layout.activity_home);
        Bundle bundle = getIntent().getExtras();
        final int cameraId = 0;
        final TextView welcomeText = (TextView) findViewById(R.id.WelcomeText);
        final TextView relocationId = (TextView) findViewById(R.id.RelocationID);
        final TextView addressOne = (TextView) findViewById(R.id.addressOne);
        final TextView addressTwo = (TextView) findViewById(R.id.addressTwo);
        final String RelocationId = bundle.getString("UID");
        relocationId.setText("Your Relocation: #" + RelocationId);

        findViewById(R.id.viewMyContacts).setOnClickListener(
                new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        String UserId = RelocationId;
                        Intent intent = new Intent(HomeActivity.this,
                                MoveContactsActivity.class);
                         intent.putExtra("UID1", UserId);
                        startActivity(intent);
                    }
                });
        findViewById(R.id.viewMyExpenses).setOnClickListener(
                new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        String UserId = RelocationId;
                        Intent intent = new Intent(HomeActivity.this,
                                ViewRecieptsActivity.class);
                         intent.putExtra("UID3", UserId);
                        startActivity(intent);
                    }
                });
        findViewById(R.id.viewMyMoveDates).setOnClickListener(
                new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        String UserID1 = RelocationId;
                        Intent intent = new Intent(HomeActivity.this,
                                MoveDatesActivity.class);
                        intent.putExtra("UID2", UserID1);
                        startActivity(intent);
                    }
                });
        findViewById(R.id.viewExpenseReceipts).setOnClickListener(
                new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                    }
                });
        findViewById(R.id.captureReceiptPhotoButton).setOnClickListener(
                new OnClickListener() {
                    @SuppressLint("NewApi")
                    @Override
                    public void onClick(View view) {
                        // if (cameraCheck() == true) {
                        // camera.takePicture(null, null, new PhotoHandler(
                        // HomeActivity.this));
                        // }
                        String fileName = "TempPhoto";
                        ContentValues values = new ContentValues();
                        values.put(MediaColumns.TITLE, fileName);
                        values.put(ImageColumns.DESCRIPTION,
                                "Temporary Photo from Recipt Photo Taker");
                        File imageUri = new File(Environment.getExternalStorageDirectory(), "com.testingapp/");
                        if(!imageUri.exists()){
                            imageUri.mkdir();
                        }
                        Intent intent = new Intent(
                                MediaStore.ACTION_IMAGE_CAPTURE);
                        intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
                        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
                        startActivityForResult(intent,
                                CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
                    }
                });
        findViewById(R.id.WebAddress).setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                Uri uri = Uri.parse("http://www.Relocationmw.com");
                Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                startActivity(intent);  
            }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_home, menu);
        return true;
    }

    public boolean cameraCheck() {
        int Cameras = Camera.getNumberOfCameras();
        if (Cameras > 0) {
            return true;
        } else {
            return false;
        }
    }

    private File getTempFile(Context context){
          //it should return /sdcard0/TempPhoto
          final File path = new File( Environment.getExternalStorageDirectory(), "com.testingapp/" );
          if(!path.exists()){
            path.mkdir();
          }
          return new File(path, "TempPhoto");
        }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                Bundle CameraBundle = getIntent().getExtras();
                // Grab image with Uri, Turn into Image and send through AsyncTask.
                final File file = getTempFile(this);
//              try {
//                Bitmap captureBmp = Media.getBitmap(getContentResolver(), Uri.fromFile(file) );
                  // do whatever you want with the bitmap (Resize, Rename, Add To Gallery, etc)
                  new ImageUpload().execute(file);
            } else if (resultCode == RESULT_CANCELED) {
                Toast.makeText(this, "Picture was not taken",
                        Toast.LENGTH_SHORT).show();
            } else {
                Toast.makeText(this, "Picture was not taken",
                        Toast.LENGTH_SHORT).show();
            }
        }
    }

    // Handle the conversion of File to Bitmap for Sending through Intent to
    // PhotoPreview
    private class ImageUpload extends AsyncTask<File, Void, String> {

        @Override
        protected void onPreExecute() {
            if (checkNullState() == false) {
                showMyDialog();
            }
        }

        @Override
        protected String doInBackground(File... file) {

            String imageDescriptionTemp = "Photo Temp Description.";
            String PostRequestUri = "https://demo.relocationmw.com/ws_docmgmt/Service1.svc";
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(PostRequestUri);
            FileBody bin1 = new FileBody(file[0]);
            MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
            entity.addPart("Image", bin1);
            post.setEntity(entity);
            HttpResponse response;
            try {
                response = client.execute(post);
                resEntity = response.getEntity();
                final String response_string = EntityUtils.toString(resEntity);
                if(resEntity != null){
                Log.i("RESPONSE", response_string); 
                }
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            if (checkNullState() == true) {
                dismissMyDialog();
            }
            // add location once we have that figured out.
            Toast.makeText(HomeActivity.this, "Image can be viewed {Location}",
                    Toast.LENGTH_LONG).show();
        }

        protected void onProgressUpdate(Map... values) {
        }

    // ProgressDialog Tracking
    private ProgressDialog pd1;
    private boolean isMyDialogShowing;

    boolean checkNullState() {
        boolean test;
        if (pd1 != null) {
            test = true;
        } else {
            test = false;
        }
        return test;
    }

    void showMyDialog() {
        isMyDialogShowing = true;
        pd1 = new ProgressDialog(HomeActivity.this);
        pd1.setTitle("Image Uploading");
        pd1.setMessage("Uploading Image....");
        pd1.show();
    }

    void dismissMyDialog() {
        pd1.dismiss();
        isMyDialogShowing = false;
    }

}
} 
```

那就是整个活动。

这是LogCat：

```
04-11 09:51:32.090: W/System.err(26030): java.io.FileNotFoundException: /storage/sdcard0/com.testingapp/TempPhoto: open failed: ENOENT (No such file or directory)
04-11 09:51:32.095: W/System.err(26030):    at libcore.io.IoBridge.open(IoBridge.java:416)
04-11 09:51:32.095: W/System.err(26030):    at java.io.FileInputStream.<init>(FileInputStream.java:78)
04-11 09:51:32.100: W/System.err(26030):    at org.apache.http.entity.mime.content.FileBody.writeTo(FileBody.java:92)
04-11 09:51:32.100: W/System.err(26030):    at org.apache.http.entity.mime.HttpMultipart.doWriteTo(HttpMultipart.java:206)
04-11 09:51:32.100: W/System.err(26030):    at org.apache.http.entity.mime.HttpMultipart.writeTo(HttpMultipart.java:224)
04-11 09:51:32.105: W/System.err(26030):    at org.apache.http.entity.mime.MultipartEntity.writeTo(MultipartEntity.java:183)
04-11 09:51:32.105: W/System.err(26030):    at org.apache.http.impl.entity.EntitySerializer.serialize(EntitySerializer.java:97)
04-11 09:51:32.105: W/System.err(26030):    at org.apache.http.impl.AbstractHttpClientConnection.sendRequestEntity(AbstractHttpClientConnection.java:162)
04-11 09:51:32.105: W/System.err(26030):    at org.apache.http.impl.conn.AbstractClientConnAdapter.sendRequestEntity(AbstractClientConnAdapter.java:272)
04-11 09:51:32.105: W/System.err(26030):    at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:237)
04-11 09:51:32.110: W/System.err(26030):    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:119)
04-11 09:51:32.110: W/System.err(26030):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
04-11 09:51:32.110: W/System.err(26030):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
04-11 09:51:32.110: W/System.err(26030):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
04-11 09:51:32.115: W/System.err(26030):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-11 09:51:32.115: W/System.err(26030):    at com.testingapp.HomeActivity$ImageUpload.doInBackground(HomeActivity.java:220)
04-11 09:51:32.115: W/System.err(26030):    at com.testingapp.HomeActivity$ImageUpload.doInBackground(HomeActivity.java:1)
04-11 09:51:32.115: W/System.err(26030):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-11 09:51:32.115: W/System.err(26030):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-11 09:51:32.120: W/System.err(26030):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-11 09:51:32.120: W/System.err(26030):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-11 09:51:32.120: W/System.err(26030):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-11 09:51:32.125: W/System.err(26030):    at java.lang.Thread.run(Thread.java:856)
04-11 09:51:32.125: W/System.err(26030): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
04-11 09:51:32.125: W/System.err(26030):    at libcore.io.Posix.open(Native Method)
04-11 09:51:32.130: W/System.err(26030):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
04-11 09:51:32.130: W/System.err(26030):    at libcore.io.IoBridge.open(IoBridge.java:400)
04-11 09:51:32.130: W/System.err(26030):    ... 22 more 
```

我几乎 100% 确定我的导入是正确的，但我不明白为什么它不会从我指定保存到的位置获取文件。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:19:55.943

我相信相机希望使用“.jpg”文件扩展名保存您的图像。

请更改您的`"TempPhoto"`文件名，如下所示：

```
String fileName = "TempPhoto.jpg"; 
```

您还必须在以下方面进行相同的更改`getTempFile()`：

```
return new File(path, "TempPhoto.jpg"); 
```

`imageUri`应包括`fileName`如下`intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri)`：

```
File imageUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(), "com.testingapp/" + fileName)); 
```

* * *

**进一步的例子**：

如何使用本机选择菜单从相机或图库中捕获您的照片：[允许用户选择相机或图库以获得图像](https://stackoverflow.com/questions/4455558/allow-user-to-select-camera-or-gallery-for-image/12347567#12347567) *- 投票总数证明了社区的高度信任*。

# html - 带有 HTML5 元素的表格格式页面？

> ID：15953697
> 
> 赞同：2
> 
> 时间：2013-04-11T16:08:52.007
> 
> 标签：html, html-table, html-email, semantics

我可以使用 HTML5 元素在使用表格进行格式化的“页面”上概述代码吗？例如：

```
<section id="posts">
  <tr id="posts-title-row">
    <header><td id="posts-title">
      <h2>Latest Posts</h2>
    </td></header>
  </tr>
  <tr id="posts-row">
    <article><td>
      <p>Maecenas faucibus mollis interdum.</p>
    </td></article>
    <article><td>
      <p>Maecenas faucibus mollis interdum.</p>
    </td></article>
    <article><td>
      <p>Maecenas faucibus mollis interdum.</p>
    </td></article>
  </tr>
</section> 
```

一般来说，我知道这是一种极差的形式，但在电子邮件客户端（尤其是 Gmail）支持电子邮件的 CSS3 格式之前，除了使用表格来格式化 HTML 电子邮件（例如时事通讯）之外，几乎没有其他选择。但是为了我自己的语义安心，我想使用 <section>、<article> 和 <header> 类型的元素来组织事物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:24:30.317

如果它是您关心的语义，您可以使用为现有元素定义的[ARIA 角色：](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#table-aria-weak)`<section>``<article>`

```
<table id="posts" aria-role="region">
    <tr id="posts-title-row">
        <td id="posts-title" aria-role="banner">
            <h2>Latest Posts</h2>
        </td>
    </tr>
    <tr id="posts-row">
        <td aria-role="article">
            <p>
                Maecenas faucibus mollis interdum.
            </p>
        </td>
        <td aria-role="article">
            <p>
                Maecenas faucibus mollis interdum.
            </p>
        </td>
        <td aria-role="article">
            <p>
                Maecenas faucibus mollis interdum.
            </p>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:13:34.890

你可以，但是你把元素放在了错误的地方。他们需要在`<td>`s 内。您还需要将整个表格包装在`<table>`

```
<section id="posts">
    <table>
        <tr id="posts-title-row">
            <td id="posts-title">
            <header>
                <h2>Latest Posts</h2>
            </header></td>
        </tr>
        <tr id="posts-row">
            <td>
            <article>
                <p>
                    Maecenas faucibus mollis interdum.
                </p>
            </article></td>
            <td>
            <article>
                <p>
                    Maecenas faucibus mollis interdum.
                </p>
            </article></td>
            <td>
            <article>
                <p>
                    Maecenas faucibus mollis interdum.
                </p>
            </article></td>
        </tr>
    </table>
</section> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:17:27.763

好吧，只要您的电子邮件服务接受它，您就可以使用带有表格格式的 HTML5 标记。但是，您可以尝试使用 CSS（请注意，我没有说 CSS3）为您的页面赋予样式。并且永远记住**内联样式**！

在 2013 年使用表格格式就像坐马车上班，但在谈论电子邮件服务时，它仍然是镇警长。

祝你好运！

# java - Jenkins/checkstyle 认为错误的代码风格失败

> ID：15953698
> 
> 赞同：4
> 
> 时间：2013-04-11T16:09:02.100
> 
> 标签：java, playframework, jenkins, checkstyle

我正在使用 Jenkins 来测试一个 Java 软件项目（使用 play web 框架，但这并不重要）。

部分测试是关于代码风格的，为此我使用了 checkstyle。我尝试通过以下方式设置我的工作：

*   我通过命令行执行 checkstyle，它在 xml 中生成报告

`checkstyle -c /usr/share/checkstyle/sun_checks.xml -f xml -r app test -o checkstyle.xml`

*   [然后我使用这个 Jenkins 插件](https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin)添加一个构建后操作，它读取 xml 报告并集成到构建结果中

所以，现在我的问题是：当代码中有任何样式问题时，Jenkins 认为这项工作是失败的。默认情况下，在这种情况下不执行构建后操作。

可以更改这一点，以便生成报告，尽管我仍然认为糟糕的代码样式被认为是失败。我认为这可能是主观的。无论如何，有没有办法改变这种情况？一般来说，Jenkins 如何确定命令 shell 是否失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:23:14.717

如果您查看`Main`checkstyle 类 ( [link](http://sourceforge.net/p/checkstyle/code/ci/tip/tree/src/checkstyle/com/puppycrawl/tools/checkstyle/Main.java) ) 的源代码，您会看到退出代码是发现的样式问题的数量（或在某些特殊情况下为 1）。

这是 Jenkins 所关注的：退出代码 0 表示成功，非零代码表示失败。

我认为您的解决方案是无条件地使退出代码为 0。一个（bash）命令将是

```
checkstyle <arguments...> || true 
```

更一般地说，您可以编写一个小包装脚本，该脚本将运行 checkstyle，然后以代码 0 退出。

# xcode4.2 - 将 XCode 4.2 与任何 PhoneGap 版本一起使用时的问题

> ID：15953699
> 
> 赞同：0
> 
> 时间：2013-04-11T16:09:02.367
> 
> 标签：xcode4.2

我正在尝试使用多个版本的 PhoneGap 在 Snow Leopard (10.6.8) 中运行 XCode 4.2，但我尝试的大部分版本都不起作用，并且会产生多种错误。我可以使用某些特定版本的 PhoneGap 吗？

谢谢！道格拉斯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T10:49:06.530

它应该是 2.1 版本。按照这个：http:
[//zsprawl.com/iOS/2012/10/installing-cordovaphonegap-2-1-for-ios/](http://zsprawl.com/iOS/2012/10/installing-cordovaphonegap-2-1-for-ios/)

# c++ - 使用 x86/x64 流 SIMD 扩展的块匹配优化

> ID：15953701
> 
> 赞同：9
> 
> 时间：2013-04-11T16:09:03.540
> 
> 标签：c++, c, optimization, sse, simd

这将是我发布的第一个 SO 问题！

```
 std::cout << "Hello mighty StackOverflow!" << std::endl; 
```

我正在尝试使用英特尔的 SSE4.2 和/或 AVX 内在函数来优化立体视觉应用程序的“块匹配”实现。我正在使用“绝对差异之和”来找到最佳匹配块。在我的情况下，`blockSize`将是一个**奇数**，例如 3 或 5。这是我的 C++ 代码片段：

```
 for (int i = 0; i < rows; ++i) {
        for (int j = 0; j < cols; ++j) {
            minS = INT_MAX;
            for (int k = 0; k <= beta; ++k) {
                S = 0;
                for (int l = i; l < i + blockSize; ++l) {
                    for (int m = j; m <= j + blockSize ; ++m) {
                        // adiff(a,b) === abs(a-b)
                        S += adiff(rImage.at<uchar>(l, m), lImage.at<uchar>(l, m + k));
                    }
                }
                if (S < minS) {
                    minS = S;
                    kStar = k;
                }
            }
            disparity.at<uchar>(i, j) = kStar;
        }
    } 
```

我知道 Streaming SIMD Extension 包含许多指令来促进使用 SAD 进行块匹配，例如`_mm_mpsadbw_epu8`and `_mm_sad_epu8`，但它们都以 4、16`blockSize`或 32为目标。[例如来自 Intel 的这段代码](http://software.intel.com/en-us/articles/motion-estimation-with-intel-streaming-simd-extensions-4-intel-sse4#F.%20Intelr%20SSE4%20-%20Optimized%20Function%20for%2016x16%20Blocks "来自英特尔展示 BM SSE4.2 优化的示例")。我的问题是在我的应用程序`blockSize`中是一个奇数，主要是 3 或 5。

我考虑了以下起点：

```
 r0 = _mm_lddqu_si128 ((__m128i*)&rImage.at<uchar>(i, j));
            l0 = _mm_lddqu_si128 ((__m128i*)&lImage.at<uchar>(i, j));
            s0 = _mm_abs_epi8 (_mm_sub_epi8 (r0 , l0) ); 
```

`s0`但是从这里开始，我不知道有一种方法可以从!总结 3 或 5 个连续字节。

我将不胜感激对此的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:27:45.763

我怀疑如果块大小小到 3-5 字节 x 3-5 字节，那么使用 SSE 或类似指令您将获得相当少的好处，因为您将花费太多快速计算的“收益”在“swizzling”（将数据从一个地方移动到另一个地方）。

但是，查看代码，您似乎`rImage[i, j]`多次处理相同的内容，我认为这没有意义。

# mysql - mySQL 查询 - 多个表 - 按相关性排序 - 删除重复项

> ID：15953705
> 
> 赞同：0
> 
> 时间：2013-04-11T16:09:09.720
> 
> 标签：mysql

我是高级 mysql 查询的新手，所以请在这里很好......

假设我有以下表格...

```
Table Name: users

username   other_non_relevant_field
========   ========================
Bob        blah blah blah
Steve      blah blah blah
Adam       blah blah blah

Table Name: table_1

username    field_abc    field_def    other_non_relevant_field
========    =========    =========    ========================
Steve       quick        brown        blah blah blah
Adam        fox          quick        blah blah blah

Table Name: table_2

username    field_ghi    field_jkl    other_non_relevant_field
========    =========    =========    ========================
Bob         fox          fox          blah blah blah
Bob         brown        quick        blah blah blah
Steve       fox          lazy         blah blah blah
Adam        jump         dog          blah blah blah 
```

因此，假设我要返回所有用户的列表，这些用户的记录包含“快速”或“棕色”，无论他们在哪个表或字段中，并根据相关性显示结果。为此，我使用以下查询：

```
SELECT users.username, table_1.field_abc, table_1.field_def,
    table_2.field_ghi, table_2.field_jkl
FROM users
JOIN table_1 ON ( table_1.username=users.username )
JOIN table_2 ON ( table_2.username=users.username )
WHERE
    table_1.field_abc LIKE "%quick%" OR table_1.field_abc LIKE "%brown%"
    OR
    table_1.field_def LIKE "%quick%" OR table_1.field_def LIKE "%brown%"
    OR
    table_2.field_ghi LIKE "%quick%" OR table_2.field_ghi LIKE "%brown%"
    OR
    table_2.field_jkl LIKE "%quick%" OR table_2.field_jkl LIKE "%brown%"
ORDER BY (
    (
        CASE WHEN table_1.field_abc LIKE "%quick%"
        THEN 1
        ELSE 0
        END
    ) + (
        CASE WHEN table_1.field_abc LIKE "%brown%"
        THEN 1
        ELSE 0
        END
    ) + (
        CASE WHEN table_1.field_def LIKE "%quick%"
        THEN 1
        ELSE 0
        END
    ) + (
        CASE WHEN table_1.field_def LIKE "%brown%"
        THEN 1
        ELSE 0
        END
    ) + (
        CASE WHEN table_2.field_ghi LIKE "%quick%"
        THEN 1
        ELSE 0
        END
    ) + (
        CASE WHEN table_2.field_ghi LIKE "%brown%"
        THEN 1
        ELSE 0
        END
    ) + (
        CASE WHEN table_2.field_jkl LIKE "%quick%"
        THEN 1
        ELSE 0
        END
    ) + (
        CASE WHEN table_2.field_jkl LIKE "%brown%"
        THEN 1
        ELSE 0
        END
    )
) DESC; 
```

我现在有几个问题...

1）查询似乎很长。有更简单的方法吗？

2）如何使 LIKE 不区分大小写，以便 %qUiCk% 仍会返回结果？

3) 目前已返回所有相关记录；但是，我实际上只希望每个用户有一个结果，但最相关的用户首先列出。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:43:31.663

要回答问题 1)，您可以替换

```
LIKE '%a%' OR LIKE '%b%' 
```

和

```
REGEXP '(a|b)' 
```

其次，`a REGEXP b`如果为真则返回 1，如果为假则返回 0，因此您可以删除`CASE`. `ORDER BY`尝试这个：

```
SELECT users.username, table_1.field_abc, table_1.field_def,
    table_2.field_ghi, table_2.field_jkl
FROM users
JOIN table_1 ON table_1.username = users.username
JOIN table_2 ON table_2.username = users.username
WHERE
    table_1.field_abc REGEXP "(quick|brown)" OR
    table_1.field_def REGEXP "(quick|brown)" OR
    table_2.field_ghi REGEXP "(quick|brown)" OR
    table_2.field_jkl REGEXP "(quick|brown)"
ORDER BY (
    (table_1.field_abc REGEXP "(quick|brown)") +
    (table_1.field_def REGEXP "(quick|brown)") +
    (table_2.field_ghi REGEXP "(quick|brown)") +
    (table_2.field_jkl REGEXP "(quick|brown)")
) DESC; 
```

回答问题 2)。`LIKE`and `REGEXP`and even`=`默认情况下在 MySQL 中不区分大小写，for`CHAR`和`VARCHAR`字段`TEXT`。要执行区分大小写的搜索，您需要：

1.  添加`BINARY`关键字。例如：`REGEXP BINARY '(a|b)'`

2.  将字段类型更改为`BINARY`or `VARBINARY`, or`BLOB`

3.  将您正在搜索的字段的字符排序规则更改为区分大小写的排序规则。

要回答问题 3)，您需要添加一个`GROUP BY`子句，例如：

```
SELECT users.username, SUM(
    (table_1.field_abc REGEXP "(quick|brown)") +
    (table_1.field_def REGEXP "(quick|brown)") +
    (table_2.field_ghi REGEXP "(quick|brown)") +
    (table_2.field_jkl REGEXP "(quick|brown)")
) hits,
    table_1.field_abc, table_1.field_def,
    table_2.field_ghi, table_2.field_jkl
FROM users
JOIN table_1 ON table_1.username = users.username
JOIN table_2 ON table_2.username = users.username
WHERE
    table_1.field_abc REGEXP "(quick|brown)" OR
    table_1.field_def REGEXP "(quick|brown)" OR
    table_2.field_ghi REGEXP "(quick|brown)" OR
    table_2.field_jkl REGEXP "(quick|brown)"
GROUP BY
    users.username
ORDER BY (
    (table_1.field_abc REGEXP "(quick|brown)") +
    (table_1.field_def REGEXP "(quick|brown)") +
    (table_2.field_ghi REGEXP "(quick|brown)") +
    (table_2.field_jkl REGEXP "(quick|brown)")
) DESC; 
```

# android - 在 Android 启动器和其他应用程序屏幕上绘制浮动布局并管理此布局的生命周期

> ID：15953706
> 
> 赞同：3
> 
> 时间：2013-04-11T16:09:13.340
> 
> 标签：android, android-layout, android-service, android-windowmanager

我想让一个浮动布局出现在手机上任何应用程序的所有屏幕上，我可以在这个布局上进行操作，除了在这个布局旁边运行的其他应用程序可以接收它自己的操作和事件

这是一个应用程序，可以满足我的需求[https://play.google.com/store/apps/details?id=com.ninja.sms](https://play.google.com/store/apps/details?id=com.ninja.sms)

这是我一直在研究的方法：我使用 WindowManager 来绘制布局，并使用服务来管理此布局。

我使用了以下库[https://github.com/t0mm13b/TouchSoftly](https://github.com/t0mm13b/TouchSoftly) 但它有一些问题 1\. 布局不接收动作或触摸事件，动作转到该库绘制的视图下的视图。2\. 启动服务的activity终止后布局消失。

因此，我在以下代码段中对其进行了一些自定义

```
 _layOutParams = new WindowManager.LayoutParams(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT, 
            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
            PixelFormat.TRANSLUCENT);
    _layOutParams = new WindowManager.LayoutParams(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT, 
            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
            PixelFormat.TRANSLUCENT);

    _layOutParams.height = WindowManager.LayoutParams.WRAP_CONTENT;
    _layOutParams.width = WindowManager.LayoutParams.WRAP_CONTENT;
    if (_layOutParams != null) {
        Log.d(TAG, "onCreate() - Got _layOutParams!");
        _layOutParams.gravity = Gravity.RIGHT | Gravity.TOP;
    } else
        Log.d(TAG, "onCreate() - _layOutParams is null! :(");

    _hudPageView = _layOutInflater.inflate(R.layout.service_hudpageview, null); 
```

结果是：布局已经绘制并且可以获得触摸事件，但是当布局出现在屏幕上时，主页、返回和最近的应用程序按钮不起作用或对任何应用程序有任何影响。

所以仍然没有达到我想要的。

这是我正在处理的源代码和存储库，因此您可以查看我的源代码 [https://github.com/mmelsabry/FloatingLayout](https://github.com/mmelsabry/FloatingLayout)

我知道这里还有另一个问题[Floating widget / Overlay on Android 启动器](https://stackoverflow.com/questions/11443820/floating-widget-overlay-on-android-launcher)

但这无济于事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T08:56:35.947

尝试使用 TYPE_SYSTEM_OVERLAY 而不是 TYPE_SYSTEM_ALERT。

# php - 需要在点击时禁用 jquery

> ID：15953707
> 
> 赞同：0
> 
> 时间：2013-04-11T16:09:20.163
> 
> 标签：php, jquery

我有以下html代码

```
<div class='login'><a href='#'>Log in</a> to create custom dashboard</div> 
```

这是我的jQuery代码

```
$(".login").click(function() {
    $(this).children('a').removeAttr("href");
    $(this).attr('class','disabledlogin');
    ..............
} 
```

因此，当我单击“登录”链接时，会出现对话框，我需要禁用“登录”链接。但即使我更改了类属性，我也可以单击并打开另一个登录对话框。问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:10:14.043

您可以使用`.unbind()`取消绑定事件处理程序。

```
$(".login").click(function() {
    $(this).children('a').removeAttr("href");
    $(this).attr('class','disabledlogin');

    // unbind the click handler. it should no longer fire.
    $(this).unbind('click');
}); 
```

要恢复，即添加回处理程序，您需要将处理程序分成一个函数并在需要时使用绑定它`$(".login").click(onLinkClick);`

```
function onLinkClick() {
    $(this).children('a').removeAttr("href");
    $(this).attr('class','disabledlogin');

    // unbind the click handler. it should no longer fire.
    $(this).unbind('click');
}

// call this initially for binding first time
// call this whenever you need to revert
$(".login").click(onLinkClick); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-11T16:13:53.937

使用@techfoobar 建议：

```
$(".login").click(function() {
    $(this).children('a').removeAttr("href");
    $(this).attr('class','disabledlogin');

    // unbind the click handler. it should no longer fire.
    $(this).unbind('click');
} 
```

# bash - mysql转储 | gzip - $? 始终设置为 0

> ID：15953710
> 
> 赞同：2
> 
> 时间：2013-04-11T16:09:26.080
> 
> 标签：bash

我在循环中转储数据库，如果我尝试转储一个不存在的数据库，我会得到 `mysqldump: Got error: 1049: Unknown database 'yes' when selecting the database`我期望的 stderr，但是尽管错误`$?`总是返回 0。

我的代码如下：

```
for database in ${databases[@]}; do
    $dumpcmd $database | gzip > "$backupdir/$database.gz"
    result=$?
    echo "dumped database: $database ($result)"
done 
```

我想检测来自 mysqldump 的错误并将其打印到屏幕上 - 我有预感这与 gzip 的管道有关，但作为一个 C# 开发人员试图学习 bash，我被卡住了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:10:30.157

你想检查里面有什么`PIPESTATUS`：

> ```
>  PIPESTATUS
>           An  array  variable (see Arrays below) containing a list of exit
>           status values from the processes in  the  most-recently-executed
>           foreground pipeline (which may contain only a single command). 
> ```

所以，而不是`result=$?`，尝试`result=${PIPESTATUS[0]}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:27:15.940

您可以使用它来确保您的转储在执行 zip 之前有效：

```
($dumpcmd $database || echo "$dumpcmd exited with $?" 1>&2) | (gzip > "$backupdir/$database.gz" || echo "echo exited with $?" 1>&2) 
```

或者您可以`set -o pipefail`在脚本的开头使管道的返回状态成为最后一个（最右边）命令以非零状态退出的值，或者如果管道中的所有命令成功退出，则为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:11:23.863

那是因为`$?`会给你**最后**执行的命令的返回状态，在这种情况下 gzip 是什么。但`gzip`不会关心`mysqldump`错误消息。它们只是它的常规文本输出，可以压缩。

将您的示例更改为这样的内容，以了解的返回状态`mysqldump`：

```
for database in ${databases[@]}; do
    # dump to a temporary file
    $dumpcmd $database > temp.sql
    # check mysqldump's return status
    result=$?
    if [ $result != 0 ] ; then
        echo "mysqldump error"
        exit 1
    fi
    gzip temp.sql > "$backupdir/$database.gz"
    echo "dumped database: $database ($result)"
done 
```

# git - 如何添加初始提交并将文件发送到现有的 git repo？

> ID：15953714
> 
> 赞同：0
> 
> 时间：2013-04-11T16:09:34.183
> 
> 标签：git

如何添加初始提交并将文件发送到现有的 git repo？

我的尝试：

```
git remote rm origin
git remote add origin https://user@bitbucket.org/xxx/xxx.git
git push -u origin master

error: src refspec master does not match any.
error: failed to push some refs to 'https://user@bitbucket.org/xxx/xxx.git' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:34:36.970

由于您在预先存在的存储库中操作并推送到任意存储库，因此请检查一些相关详细信息：

```
git branch -avvv
git ls-remote origin 
```

您新采用的原始存储库没有名为“master”的分支，或者您自己的 master 分支配置为跟踪的任何其他名称。如果您知道要绑定到主分支的分支的名称，则可以使用

```
git push -u origin master:user2250668 
```

除非该 repo 的管理员限制了分支创建，否则会这样做。

# android - Android Webview - 我如何判断页面是否从缓存中加载？

> ID：15953719
> 
> 赞同：2
> 
> 时间：2013-04-11T16:10:00.227
> 
> 标签：android, android-webview

我正在使用 webview，我更喜欢缓存`getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);`

但我需要知道一个网页是否是第一次加载，或者它是否来自缓存。

除了自己手动缓存页面外，我看不到这样做的方法。有谁知道询问缓存的方法，webview 必须在幕后执行此操作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:21:51.640

首先，您必须为您的 webView 设置一个 WebViewClient/WebChromeClient。您可能想分别查看 WebViewClient/WebChromeClient 类。下面列出了一堆 API，我已经将其中一些您可能感兴趣的内容记下来：（摘自 Android 开发者网站）

/********WebChromeClient 类******/

public void getVisitedHistory（ValueCallback 回调）

获取所有访问历史项的列表，用于链接着色

/*********WebStorage 类 ****/

public void getOrigins（ValueCallback 回调）

获取当前使用应用程序缓存或 Web SQL 数据库 API 的源。此方法异步操作，结果通过 ValueCallback 提供。原点以 Map 类型的地图形式提供，从原点的字符串表示形式到 WebStorage.Origin 对象。

如果这些似乎都不起作用，那么您可以依靠直接查询应用程序的缓存目录（/data/data/my_app_package/cache 在 Eclipse IDE 中的 DDMS 选项卡下），以编程方式您将能够使用 getCacheDir 访问缓存目录() API。请参阅[如何查看 Android 应用程序特定缓存？](https://stackoverflow.com/questions/9916829/how-do-i-view-android-application-specific-cache)了解详细信息。

# magento - 将登录验证添加到 Magento Checkout

> ID：15953726
> 
> 赞同：0
> 
> 时间：2013-04-11T16:10:14.647
> 
> 标签：magento, checkout, opayo

**我们正在尝试做的事情**

使用 Magento CE 1.7.0.2。我们正在使用单页结帐。我们需要用户注册结帐（没有客人结帐）。但是，我们需要他们能够在单页结账时登录和/或注册。

**问题**

我们不能使用 Magento 的默认选项“需要登录才能结帐”，因为它不允许用户访问结帐页面*，除非*他们已登录。

**解决方案**

嗯，我不知道……还没有。这是我尝试过的，但它导致 SagePay 出现各种灾难性的结帐问题（多笔交易）：

```
if (!$this->getCustomerSession()->isLoggedIn()) {
    Mage::throwException(Mage::helper('checkout')->
      __('Please login. You must be logged in to checkout.'));
} 
```

任何有用的输入表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:51:44.637

> 去：模板/查出/onepage.phtml

```
**put this code on before page code**
<?php
          if (!$this->helper('customer')->isLoggedIn()) {
                header('Location: '.$this->getUrl('customer/account/login')) ;
                 exit();
          }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:07:41.650

**综上所述：**

这个功能的问题是：

1.  我们无法检查用户是否登录，因为用户可以在此页面上注册，因此在他们注册之前，他们没有登录，因此他们将在提交时提供有效请求。
2.  一页模块覆盖了 Magento 的一些默认验证行为，因此我们需要拦截模块的验证或编写我们自己的。

为了解决这个问题，我们最终验证了注册字段。如果这些为空（如果客人结账被禁用），则无法提交表单。有点丑，但是很实用。

希望其他人可以使用它。

# c# - 内存地址C#的整数句柄

> ID：15953729
> 
> 赞同：0
> 
> 时间：2013-04-11T16:10:19.183
> 
> 标签：c#

我进行此转换的主要目的是根据内存地址在 C# 中创建一个对象......它会不会太 hack-ish（或完全不正确/愚蠢）？如果是这样，有没有更好的方法来做到这一点？

像这样的东西：

```
int app_handle = 920663024; // corresponds to memory location 0x36E033F0
string app_handle_converted_to_hex = decValue.ToString("X");
MyAppClass *newApp = (MyAppClass *)app_handle_converted_to_hex; 
```

此外，这是否可能在不使用指针的情况下完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:39:52.177

您将要使用[`Marshal.PtrToStructure`](http://msdn.microsoft.com/en-us/library/4ca6d5z7.aspx)which 假定顺序布局。

查看页面底部的示例。

> 此代码假定为 32 位编译。在使用 64 位编译器之前，请将 IntPtr.ToInt32 替换为 IntPtr.ToInt64。

```
[StructLayout(LayoutKind.Sequential)]
public class INNER
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst =  10)]
    public string field1 = "Test";
}   

[StructLayout(LayoutKind.Sequential)]
public struct OUTER
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst =  10)]
    public string field1;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst =  100)]
    public byte[] inner;
}

[DllImport(@"SomeTestDLL.dll")]
public static extern void CallTest( ref OUTER po);

static void Main(string[] args)
{
    OUTER ed = new OUTER();
    INNER[] inn = new INNER[10];
    INNER test = new INNER();
    int iStructSize = Marshal.SizeOf(test);

    int sz =inn.Length * iStructSize;
    ed.inner = new byte[sz];

    try
    {
        CallTest( ref ed);
    }
    catch(Exception e)
    {
        Console.WriteLine(e.Message);
    }

    IntPtr buffer = Marshal.AllocCoTaskMem(iStructSize*10);
    Marshal.Copy(ed.inner,0,buffer,iStructSize*10);

    int iCurOffset = 0;

    for(int i = 0; i < 10; i++)
    {
        inn[i] = (INNER)Marshal.PtrToStructure(new IntPtr(buffer.ToInt32() + iCurOffset),typeof(INNER) );
        iCurOffset += iStructSize;
    }

    Console.WriteLine(ed.field1);
    Marshal.FreeCoTaskMem(buffer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:26:18.847

我能够根据我的应用程序中的现有代码找出它（非常感谢 Romoku 的提及`Marshal`）

我完成的代码如下所示：

```
int handle = 920663024; // integer pointer corresponding to memory location 0x36E033F0
IntPtr app_handle = helper.GetAppPtr(handle) // gets IntPtr based off of handle
object obj = Marshal.GetObjectForIUnknown(app_handle);
MyAppClass newApp = obj as MyAppClass; 
```

奇迹般有效！

# r - travis-ci 构建“未找到 Rakefile”时出错

> ID：15953739
> 
> 赞同：13
> 
> 时间：2013-04-11T16:10:53.113
> 
> 标签：r, travis-ci

一个 github repo 在 travis 上构建良好，而另一个几乎完全相同的 .travis.yaml 文件没有构建，并给出错误

```
rake aborted!
No Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb) 
```

我看过一些关于 travis yaml 文件没有正确处理制表符等的讨论，但我检查了没有制表符，只有空格。

我注意到`config`travis 仪表板上的行有一个正确构建的 repo 条目

![那个有效的](https://i.stack.imgur.com/RUFtM.png)

而未构建的则缺少该行

![那个不起作用的](https://i.stack.imgur.com/5gBVX.png)

但是，它们或多或少都有相同的 yaml 文件，所以我不明白为什么它的工作方式不同。

[构建的 repo 的 yaml](https://github.com/ropensci/rgbif/blob/master/.travis.yml)

[还有一个没有构建（删除了一些评论，但这并没有什么不同，我检查了）：](https://github.com/ropensci/rplos/blob/master/.travis.yaml)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T17:04:38.667

我认为您应该将文件重命名为`.travis.yml`.

有时我看到它[以正确的](https://github.com/ropensci/rgbif)方式使用，但[在这里](https://github.com/ropensci/rplos/tree/3b4c6aad392f5fd1cbf174f6911e8c39dbc2a3ca)拼写错误。这就是它不被执行的原因。

# r - 如何在“FinancialInstrument”包中使用“load.instruments”时指定其他标识符

> ID：15953742
> 
> 赞同：1
> 
> 时间：2013-04-11T16:11:04.547
> 
> 标签：r

我想`load.instruments`从`FinancialInstrument`包中使用，从 csv 文件中的元数据创建多个仪器。

我的 csv 文件`roots_test.csv`名为

```
primary_id,description,type,exchange,currency,multiplier,initialmargin,identifiers
AD,Australian Dollar-CME(Floor+Electronic Combined),future,GLOBEX,USD,100000.00,5400,AUD 
```

现在，如果我调用`load.instruments`它正确加载数据，我可以同时使用`AD`和来获取仪器`AUD`。

**但是现在说我想为同一仪器指定另一个标识符说`AD2`，怎么做？**

```
> load.instruments(file = 'roots_test.csv', default_type="future")
Warning messages:
1: In read.table(file = file, header = header, sep = sep, quote = quote,  :
  incomplete final line found by readTableHeader on 'roots_test.csv'
2: In future(primary_id = "AD", description = "Australian Dollar-CME(Floor+Electronic Combined)",  :
  underlying_id should only be NULL for cash-settled futures
3: In instrument(primary_id = primary_id, currency = currency, multiplier = multiplier,  :
  identifiersAUDdo not appear to be a named list

> getInstrument("AD")
primary_id   :"AD"
currency     :"USD"
multiplier   :1e+05
tick_size    : NULL
identifiers  :List of 1
 ..$ :"AUD"
type         :"future"
description  :"Australian Dollar-CME(Floor+Electronic Combined)"
exchange     :"GLOBEX"
initialmargin:5400
underlying_id: NULL

> getInstrument("AUD")
primary_id   :"AD"
currency     :"USD"
multiplier   :1e+05
tick_size    : NULL
identifiers  :List of 1
 ..$ :"AUD"
type         :"future"
description  :"Australian Dollar-CME(Floor+Electronic Combined)"
exchange     :"GLOBEX"
initialmargin:5400
underlying_id: NULL 
```

# c++ - 使用 openmp 并行化中止线程

> ID：15953747
> 
> 赞同：0
> 
> 时间：2013-04-11T16:11:10.220
> 
> 标签：c++, winforms, thread-safety, openmp

我遇到了一个奇怪但可以理解的错误解决方案，我自己无法弄清楚。我正在创建线程`System::Threading::Thread`来运行这样的函数：

```
try
{
   perform_adapt_rgb(alg);
   Control::Invoke(adpt_deg2);
}
   catch ( ThreadAbortException^ e ) 
{
   Control::Invoke(adpt_deg2);
   //Thread::ResetAbort();
} 
```

我没有粘贴整个东西，因为让它变得复杂是没有意义的。调用更新我的 UI .. 问题出现时 void perform_adapt_rgb(int alg); 函数为循环封装 OMP，我尝试通过 thread->Abort() 从 UI 中终止进程；功能。虽然在 Visual Studio 中测试一切正常，但如果从 exe 文件执行，它显示应用程序没有响应 -> 等待解决方案，关闭对话框。现在我的猜测是，强制 OMP-ed for 循环意外结束是导致问题的原因，但是我不完全确定，因为它确实在我可以调试的 VS 中工作。没有 OMP 一切正常。有人可以指出我的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:08:33.520

好的，伙计们，我整理好了。这可能不是最好的解决方案，但它有效，所以对我来说不再重要了。我现在要做的是将循环的长 OMP 分解为多个部分，检查一些全局布尔值以了解我是否需要退出该函数。比我简单地执行线程自杀......在评估结束时从胎面内部调用中止，而不是从 UI 中止它。如果某人有更好的解决方案，我会保持打开状态。

# c++ - 重载 'pow(const double&, double)' 的调用不明确

> ID：15953748
> 
> 赞同：5
> 
> 时间：2013-04-11T16:11:12.500
> 
> 标签：c++, compiler-errors, double

我是 C++ 新手，这是我的问题：我需要这个数量：

```
h = pow(mesh.V()[i0],1.0/3); 
```

但是每当我编译程序时都会收到此错误消息：

```
 call of overloaded ‘pow(const double&, double)’ is ambiguous 
```

如果我写

```
double V = mesh.V()[i0];
h = pow(V,1.0/3); 
```

我得到：

```
 call of overloaded ‘pow(double&, double)’ is ambiguous 
```

现在我想我明白 const double& 和 double& 指的是什么，但是我怎样才能将 const double& 转换为 double 呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:19:49.047

> 现在我想我明白 const double& 和 double& 指的是什么，但是我怎样才能将 const double& 转换为 double 呢？

请注意，某些编译器在错误消息中使用该语法来表示与代码中的含义不同的东西。错误消息告诉您用作函数参数的类型是什么，而不是函数采用什么类型。

如果你想得到`double`错误信息，你只需要调用一个按值 a 返回的函数`double`，但这**不是**你想要的。

你需要的是找出为什么调用是模棱两可的。编译器是否在稍后的错误消息中为您提供了考虑哪些函数签名？它应该，并且阅读它正在考虑的不同重载将有助于找出为什么它在这种情况下是模棱两可的。

# org-mode - 如何在 org-mode 中获得文字正斜杠？

> ID：15953749
> 
> 赞同：3
> 
> 时间：2013-04-11T16:11:12.873
> 
> 标签：org-mode

在文本中，我可以让 org-mode 以某种方式忽略正斜杠吗？语音学用来`/s/`表示一定程度的分析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T20:16:44.830

我假设您不希望文本在缓冲区或输出中显得强调。这是一个稍微复杂一点的答案，它将达到这个结果：

Org-mode 定义了一个名为的变量，`org-emphasis-alist`它定义了不同的强调模式，它们的纯文本语法是什么，以及它们如何导出到 HTML。您可以通过*在 Org-mode 已加载之前*更改此变量的值来获得所需的结果。最后一部分很关键，所以请注意——Org-mode 读取`org-emphasis-alist`加载时的值，并使用该值生成正则表达式以用于突出显示（“font-lock”）目的。

这里有两条途径：

1.  将以下行添加到您的 .emacs 文件中加载 Org-mode 的行上方：

    ```
    (setq org-emphasis-alist
      `(("*" bold "<b>" "</b>")
        ;; ("/" italic "<i>" "</i>")
        ("_" underline "<span style=\"text-decoration:underline;\">" "</span>")
        ("=" org-code "<code>" "</code>" verbatim)
        ("~" org-verbatim "<code>" "</code>" verbatim)
        ("+" ,(if (featurep 'xemacs) 'org-table '(:strike-through t))
         "<del>" "</del>"))) 
    ```

    （注意注释掉的行。）

2.  通过 Emacs 的定制工具进行更改：

    1.  `M-x customize RET`
    2.  在搜索框中输入`Org Emphasis`并单击`Search`。
    3.  单击旁边的向下箭头`Org Emphasis Alist`以显示其值。
    4.  找到并单击第二个`DEL`按钮——对应于`italic`列表项。
    5.  单击`Save for future sessions`缓冲区顶部的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:03:47.897

您可以使用

```
#+OPTIONS: *:nil 
```

关闭文本强调（粗体、斜体、下划线）。但是，这仅适用于导出本身，重点仍然可见。

有关其他导出选项，请参阅[手册](http://orgmode.org/org.html#fnd-126)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T18:53:03.923

如果您喜欢 org-mode 中正斜杠的标准强调功能，您也可以定义一个新环境。每当我进行语音/音系排版时，我都会在序言中添加以下内容：

```
\newcommand\uRep[1]{$/$\textipa{#1}$/$} 
```

# apache - 当一个 URL 的 HTML 结构未知时，如何控制 Nutch 解析和 Solr 索引的方式？

> ID：15953751
> 
> 赞同：0
> 
> 时间：2013-04-11T16:11:14.210
> 
> 标签：apache, solr, web-crawler, nutch, solr4

我正在尝试抓取一些 HTML 结构维护不善的网站，我无法控制它来更改它。当我查看由 Solr 索引的 nutch 爬取数据时，“标题”字段看起来不错，因为“内容”字段包含大量垃圾，因为它使用下拉菜单从 html 横幅中抓取所有文本并向下处理左侧菜单、导航、页脚等。

就我而言，我有兴趣将 HTML 页面上的段落中定义的“描述：”信息抓取到“内容”字段中。

示例：（原始 html）：

```
 <p><strong>Description:</strong> Apache Nutch is an open source Web crawler written in Java. By using it, we can find Web page hyperlinks in an automated manner, reduce lots of maintenance work, for example checking broken links, and create a copy of all the visited pages for searching over. 
```

如何将垃圾从“内容”字段中过滤出来，并且只有我感兴趣的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T20:44:59.077

您可以使用下面的插件根据 XPath 查询提取内容。如果您的内容在特定的 div 中，您可以使用此插件从该特定部分中提取您想要的内容。

[过滤 xpath](http://www.atlantbh.com/precise-data-extraction-with-apache-nutch/)

# c# - 使用 Linq 语句选择最大修订

> ID：15953753
> 
> 赞同：0
> 
> 时间：2013-04-11T16:11:22.083
> 
> 标签：c#, linq

我查看了其他一些答案，但似乎都不是我正在寻找的答案，而且我无法比现在更进一步地解决这些问题。

我有一张桌子，里面有我们所有的文件和修订。

我目前有这个 Linq：

```
from v in IPACS_Versions
where v.DateApproved == null
group v by v.DocumentID into g
select g.Max(t => t.Revision) 
```

这正确地给了我需要修订的项目，但是我需要选择所有字段，目前它只选择了修订字段。我对 Linq 很陌生，我该如何更改？

更多细节，以防我上面的代码完全错误。

我需要为每个文档的最大修订选择整行。主键是documentId，每个documentId可以有很多不同的修订，我需要最近的一个。另一个标准是有一个字段 dateApproved 如果它尚未被批准则为空，因此最大修订或任何尚未批准的项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:13:02.833

如果这是针对数据库进行查询，您可能需要：

```
from v in IPACS_Versions
where v.DateApproved == null
group v by v.DocumentID into g
select g.OrderByDescending(t => t.Revision).First() 
```

如果它在本地运行（LINQ to Objects），您可以使用[MoreLINQ](http://morelinq.googlecode.com)[`MaxBy`](https://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)的方法：

```
from v in IPACS_Versions
where v.DateApproved == null
group v by v.DocumentID into g
select g.MaxBy(t => t.Revision) 
```

# php - 通过单击 PHP HTML 从文本框中传递带有输入的查询字符串

> ID：15953757
> 
> 赞同：0
> 
> 时间：2013-04-11T16:11:35.723
> 
> 标签：php, html

我正在尝试通过按钮和文本框传递查询字符串。这样我在文本框中输入一些文本，然后单击图像按钮。该按钮将传递在文本框中键入的内容并将其传递到下一页。我该怎么做呢？

下面是我的代码：

```
 <input type="text" name="search" class="resizedTextbox">
    <a href=page.php?productName=$_GET["search"]><img src="images/search-btn.gif"/></a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:14:42.647

尝试这个：

```
<form method="GET" action="page.php">
<input type="text" name="search" class="resizedTextbox">
<input type="image" src="images/search-btn.gif"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:17:33.433

尝试这个

```
<form name="frm" method="get" action="page.php">
<input type="text" name="search" id="search">
<input type="submit" name="btnSearch" value="Search" onclick="location.href='http://www.website.com/index.php?search='+document.getElementById('search').value;" id="btnSearch" class="buttonSearch" />
</form> 
```

使用 java 脚本获取值并使用 get 方法传递。

# c# - Windows 8 应用程序：纸牌游戏的“捕捉”拖放

> ID：15953759
> 
> 赞同：2
> 
> 时间：2013-04-11T16:11:42.483
> 
> 标签：c#, xaml, drag-and-drop, windows-store-apps, user-interaction

在尝试使用以下代码段移动卡片（现在的图像）后，我对结果不满意。

```
Card.ManipulationDelta += (o, args) => {
    var dragableItem = o as Image;
    if (dragableItem == null) return;
    var translateTransform = dragableItem.RenderTransform as TranslateTransform;

    if (translateTransform == null) return;
    translateTransform.X += args.Delta.Translation.X;
    translateTransform.Y += args.Delta.Translation.Y;
};
Card.RenderTransform = new TranslateTransform(); 
```

控件有一个有趣的行为要加速，并且在“放下”它后会移动/滑动一点。虽然很酷，但我不想要这种行为，因此改变了主意：我正在寻找一种解决方案，可以为一张活动卡片定义特定区域，为更多卡片定义一个长凳，为甲板定义堆叠，这样人们就可以自由拖动一张牌，但只有在这些特定区域上方才能丢弃，否则它将回到指定的手牌区域。

**我可以尝试什么来实现这种期望的行为？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:18:27.010

我认为你和我在同一条船上，我正在开发 Metro 纸牌游戏应用程序，就拖放功能而言，我对我发现的内容并不满意。我最初的方法是有一个 grid \ stackpanel 或其他底层框架，用户可以将卡片图像（实际上是一个自定义控件）拖到上面，然后当用户放手时图像会捕捉到该框架。但是，我还没有找到一种合适的方法来获得这种行为，因为 Metro 似乎不支持将控件从一个父级拖放到另一个父级。

就您的问题而言，您所指的滑动效果很可能是 intertia，您可以通过不设置 TranslateInertia 模式来禁用它，例如

```
 Ellipse el = new Ellipse();
    el.Fill = new SolidColorBrush(Windows.UI.Colors.Magenta);
    el.ManipulationMode = (ManipulationModes.All ^ MainipulationModes.TranslateInteria);

    //more code to add your ManipulationDelta handler etc. 
```

您还可以通过为 MainipulationInertiaStarting 添加一个处理程序来获得对 Interia 的一些控制，尽管在处理程序中设置 e.Handled = true 并不会像其他人建议的那样完全禁用我的 interia。

我很想听听你的意见，看看你想出了什么方法来捕捉卡片，此时我正在考虑只使用一个大的 Canvas 对象并编写我自己的客户处理程序来移动鼠标以获取卡片对象可拖动，然后卡入游戏板上的一行或其他位置。

干杯，

詹姆士

# mysql - 绕过活动记录验证从数据库导入/导出数据的最佳方式

> ID：15953760
> 
> 赞同：0
> 
> 时间：2013-04-11T16:11:46.283
> 
> 标签：mysql, ruby-on-rails, import, export

我有一个大型控制台查询，它调用 130 个对象及其所有关联对象，总共约 2,000 个项目。

我想以某种方式导出此查询的原始 SQL 数据，以便可以将该原始数据注入另一个数据库。

是否有一个宝石或策略来完成这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:28:12.770

如果您不需要活动记录验证，我建议只使用 mysql：

如果您的查询很简单（或者可以分解为多个简单查询），您可以使用[mysqldump 的 --where 选项](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_where)导出您想要的数据，然后使用标准 mysql 客户端重新导入：

```
mysqldump db_name --where "id IN (1, 3, 5)" > export.sql
mysql new_db < export.sql 
```

我不认为 mysqldump 支持带有连接的查询，所以如果您有更复杂的查询，您可以使用 mysql 的[SELECT INTO OUTFILE](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)查询将数据导出到 csv，然后[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)将其导入。

# jquery - 基本的 html/php/jquery gui

> ID：15953761
> 
> 赞同：0
> 
> 时间：2013-04-11T16:11:52.523
> 
> 标签：jquery, function

我希望将 gui 与 html 和 php 放在一起以从目录加载数据。

我想在侧面菜单栏上有一个链接，将 .php 文件中的数据加载到主体区域的 a 中，但我还不完全明白如何做到这一点。您能提供的任何帮助将不胜感激。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="common/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="common/jquery-1.9.1.js"></script>

<!-- Functions -->
<script type="text/javascript">
$(document).ready(function(){
    function dataSelect(proj) {
        alert(proj.id);
        $.ajax({
            url: "core/catalogue.php?p="+proj,
                cache: false,
                success: function(html){
                    $("#dataSelect").html(html);
                }
        });
    }            
});
</script>
</head>

<body>
<form id="form1" name="form1" method="post" action="">
    <div id="topheader">
        <div class="logo">
        <div class="head"> Whatever </div>
       </div>
    </div>
    <div id="body_area">
        <div class="left">
            <div class="left_menutop"></div>
            <div class="left_menu_area">
                <div class="left_menu_title">Projects:</div>
                <div align="right">
                    <a href="#" class="left_menu" id="someProject" onclick="dataSelect(this)">Some Project</a><br />
                </div>
            </div>      
        </div>
        <div class="midarea" id="body">
            <div class="body_textarea">
                <div align="justify" id="dataSelect"></div>
            </div>
        </div>
    </div>
</form>

</body>
</html> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:48:51.287

如果其他人想要完成同样的事情，这里的代码就可以工作：

```
<!-- Functions -->
<script type="text/javascript">
$(document).ready(function(){

    $(".left_menu").click(function(){
        val = this.id;      
        $.ajax({
            url: "core/catalogue.php?p="+this.id,
                cache: false,
                success: function(html){
                    $("#dataSelect").html(html);
                }
        });
    });//end $(".left_menu").click

});//end $(document).ready
</script>
</head> 
```

# asp.net - asp.net 实体框架：继承代理的铸造

> ID：15953764
> 
> 赞同：0
> 
> 时间：2013-04-11T16:12:01.237
> 
> 标签：asp.net, entity-framework, inheritance, casting, proxy-classes

由于实体框架创建代理而不是提供“原始”实体类，您如何将父类转换为子类？这不是“正常方式”，因为自动创建的代理类不使用原始实体类的继承结构。

关闭代理创建功能对我来说不是一个选项。

欢迎任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:37:26.257

> 如何将父类转换为子类？

**如果实际运行时类型是**子级，则只能将父级强制转换为子级。对于非代理和代理来说都是如此，因为子代的代理源自子代，因此它**是**子代。父母的代理**不是**孩子，因此您不能将其投射给孩子，也不能将父母投射给孩子。

例如（使用`DbContext`API）：

```
public class Parent { ... }
public class Child : Parent { ... } 
```

然后以下两种演员都将起作用：

```
Parent parent1 = context.Parents.Create<Child>(); // proxy
Parent parent2 = new Child();                     // non-proxy

Child child1 = (Child)parent1; // works
Child child2 = (Child)parent2; // works 
```

以下两项都不起作用：

```
Parent parent1 = context.Parents.Create<Parent>(); // proxy
Parent parent2 = new Parent();                     // non-proxy

Child child1 = (Child)parent1; // InvalidCastException
Child child2 = (Child)parent2; // InvalidCastException 
```

两种演员都以“正常方式”工作。

# r - 用于擦除 NA 值的模板化 Rcpp 函数

> ID：15953768
> 
> 赞同：7
> 
> 时间：2013-04-11T16:12:09.923
> 
> 标签：r, templates, rcpp

我会编写一个函数（使用）从向量`Rcpp`中删除所有`NA`值。`R`

在这样做之前，我通过function做了一点测试`Rcpp::cppFunction`功能。

```
library(inline)
cppFunction('
  Vector<INTSXP> na_test(const Vector<INTSXP>& x) {
    return setdiff(x, Vector<INTSXP>::create(::traits::get_na<INTSXP>()));
  }
') 
```

这是这样工作的：

```
na_test(c(1, NA, NA, 1, 2, NA))
# [1] 1 2 
```

之后我尝试通过`C++` **模板机制**来概括这个功能。

因此，在一个外部*.cpp*文件（通过`sourceCpp`函数获取）中，我写了：

```
template <int RTYPE>
Vector<RTYPE> na_test_template(const Vector<RTYPE>& x) {
    return setdiff(x, Vector<RTYPE>::create(::traits::get_na<RTYPE>()));
}

// [[Rcpp::export(na_test_cpp)]]
SEXP na_test(SEXP x) {
    switch(TYPEOF(x)) {
        case INTSXP:
            return na_test_template<INTSXP>(x);
        case REALSXP:
            return na_test_template<REALSXP>(x);
    }
    return R_NilValue;
} 
```

此代码**编译但行为不同**，我无法解释原因。

实际上：

```
na_test_cpp(c(1, NA, NA, 1, 2, NA))
# [1]  2 NA NA NA  1 
```

为什么相同的功能（显然）表现不同？这里会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T06:11:59.387

跟进你的回答，我会使用这样的模板：

```
template <int RTYPE>
Vector<RTYPE> na_omit_template(const Vector<RTYPE>& x) {
    int n = x.size() ;
    int n_out = n - sum( is_na(x) ) ;

    Vector<RTYPE> out(n_out) ;
    for( int i=0, j=0; i<n; i++){
        if( Vector<RTYPE>::is_na( x[i] ) ) continue ;
        out[j++] = x[i];
    }
    return out ;
} 
```

所以想法是首先计算结果的长度，然后只使用`Rcpp`向量类而不是`std::vector`. 这将导致更少的数据副本。

* * *

使用 (svn revision >= 4308) 的开发版本`Rcpp`，它适用于所有类型，然后我们可以使用我们的`RCPP_RETURN_VECTOR`调度宏而不是编写`switch`：

```
// [[Rcpp::export]]
SEXP na_omit( SEXP x ){
     RCPP_RETURN_VECTOR( na_omit_template, x ) ;   
} 
```

`na_omit`已包含在`Rcpp`(svn revision >= 4309) 中，经过一些修改，即它可以处理命名向量和任意糖表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:16:39.993

我一直在研究有关模板问题的解决方案（即参见@Sameer 回复）。

所以我写了另一个函数，现在模板机制起作用了。

在外部`.cpp`文件中：

```
#include <Rcpp.h>
template <int RTYPE, class T>
Vector<RTYPE> na_omit_template(const Vector<RTYPE>& x) {
    typedef typename Vector<RTYPE>::iterator rvector_it;
    if (x.size() == 0) {
        return x;
    }
    std::vector<T> out;
    rvector_it it = x.begin();
    for (; it != x.end(); ++it) {
        if (!Vector<RTYPE>::is_na(*it)) {
            out.push_back(*it);
        }
    }
    return wrap(out);
}

// [[Rcpp::export(na_omit_cpp)]]
SEXP na_omit(SEXP x) {
    switch(TYPEOF(x)) {
        case INTSXP:
            return na_omit_template<INTSXP, int>(x);
        case REALSXP:                   
            return na_omit_template<REALSXP, double>(x);
        case LGLSXP:
            return na_omit_template<LGLSXP, bool>(x);
        case CPLXSXP:
            return na_omit_template<CPLXSXP, Rcomplex>(x);
        case RAWSXP:
            return na_omit_template<RAWSXP, Rbyte>(x);
        default:
            stop("unsupported data type");
    }
} 
```

此函数**删除** `NA` **values**，这是我最初的目的。

不幸的是，目前**它不适用于所有类型的向量**，如下面的`R`示例所示。

```
library(Rcpp)
sourceCpp('file.cpp')
na_omit_cpp(as.integer(c(1, NA, NA, 1, 2, NA))) # OK
# [1] 1 1 2
na_omit_cpp(as.numeric(c(1, NA, NA, 1, 2, NA)))
# [1] 1 1 2
na_omit_cpp(c(NA, 1L, NA, 3L, NA)) # OK
# [1] 1 3
na_omit_cpp(c(NA, 2L, 1, NA)) # OK
# [1] 2 1
na_omit_cpp(c(1.0, 1.1, 2.2, NA, 3, NA, 4)) # OK
# [1] 1.0 1.1 2.2 3.0 4.0
na_omit_cpp(c(1L, NaN, NaN, 0, NA)) # OK
# [1]   1 NaN NaN   0
na_omit_cpp(c(NA, NaN, 1.0, 0.0, 2.2, NA, 3.3, NA, 4.4)) # OK
# [1] NaN 1.0 0.0 2.2 3.3 4.4
na_omit_cpp(as.logical(c(1, 0, 1, NA))) # OK
# [1]  TRUE FALSE  TRUE
na_omit_cpp(as.logical(c(TRUE, FALSE, NA, TRUE, NA))) # OK
# [1]  TRUE FALSE  TRUE
# empty vectors ?
na_omit_cpp(c(NA)) # OK
# logical(0)
na_omit_cpp(numeric(0)) # OK
# numeric(0)
na_omit_cpp(logical(0)) # OK
# logical(0)
na_omit_cpp(raw(0)) # OK
# raw(0)
na_omit_cpp(as.raw(c(40,16,NA,0,2))) # NO! (R converts it to 00)
# [1] 28 10 00 00 02
# Warning message ...
na_omit_cpp(as.complex(c(-1, 2, 1, NA, 0, NA, -1))) # NO! 
# [1] -1+0i  2+0i  1+0i    NA  0+0i    NA -1+0i 
```

所以，这个函数几乎在所有情况下都有效，除了`raw`向量和`complex`向量。

**当前未解决的问题**是：

1.  我不确定为什么会出现这个错误，我想找出原因。任何想法？
2.  如@Sameer 所示，先前的模板化函数有一个奇怪的行为。
3.  如何接受`character`向量？

我想清楚了 to`case STRSXP: return na_omit_template<STRSXP, ?>(x);`但是这个陈述不能代替`std::string`, `Rcpp:String`to `?`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:19:36.377

模板机制似乎工作正常。

```
> na_test_cpp(as.numeric(c(1, NA, NA, 1, 2, NA)))
[1]  2 NA NA NA  1

> na_test_cpp(as.integer(c(1, NA, NA, 1, 2, NA)))
[1] 1 2 
```

正是这段代码适用于 INTSXP 但不适用于 REALSXP

```
Vector<REALSXP> na_test_real(const Vector<REALSXP>& x) {
  return setdiff(x, Vector<REALSXP>::create(::traits::get_na<REALSXP>()));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-07T13:51:46.967

一些实现：

```
// naive
template <int RTYPE>
Vector<RTYPE> na_omit_impl(const Vector<RTYPE>& x) {
    std::size_t n = x.size();
    // Estimate out length
    std::size_t n_out = 0;
    for(std::size_t i = 0; i < n; ++i) {
        if (Vector<RTYPE>::is_na(x[i])) continue;
        ++n_out;
    }
    // exit if no NAs
    if (n_out == n) return x;
    // allocate vector without filling
    Vector<RTYPE> res = no_init(n_out);
    // fill result vector
    for(std::size_t i = 0, j = 0; i < n; ++i) {
        if (Vector<RTYPE>::is_na(x[i])) continue;
        res[j] = x[i];
        ++j;
    }
    return res;
}

// STL algorithms
template <int RTYPE>
struct not_na {
    typedef typename Vector<RTYPE>::stored_type type;
    bool operator() (const type& i) {
        return !Vector<RTYPE>::is_na(i);
    }
};

template <int RTYPE>
Vector<RTYPE> na_omit_impl(const Vector<RTYPE>& x) {
    // Estimate out length
    std::size_t n_out = std::count_if(x.begin(), x.end(), not_na<RTYPE>());
    // exit if no NAs
    if (n_out == x.size()) return x;
    // allocate vector without filling
    Vector<RTYPE> res = no_init(n_out);
    // fill result vector
    std::copy_if(x.begin(), x.end(), res.begin(), not_na<RTYPE>());
    return res;
}

// Rcpp sugar
template <class T>
T na_omit_impl(const T& x) {
    return x[!is_na(x)];
}

// Rcpp sugar
template <class T>
T na_omit_impl(const T& x) {
    return Rcpp::na_omit(x);
} 
```

所有实现都适用于`RCPP_RETURN_VECTOR`宏：

```
// [[Rcpp::export]]
RObject na_omit(RObject x){
    RCPP_RETURN_VECTOR(na_omit_impl, x);
} 
```

# php - PHP JSON 字符串解析

> ID：15953770
> 
> 赞同：0
> 
> 时间：2013-04-11T16:12:12.830
> 
> 标签：php, json

我在访问 JSON 中的元素时遇到了一些问题。这是我的代码：

```
$raw_json = '{
        "players": [
            {
                "steamid": "76561197960435530",
                "communityvisibilitystate": 3,
                "profilestate": 1,
                "personaname": "Robin",
                "lastlogoff": 1365134746,
                "profileurl": "http://steamcommunity.com/id/robinwalker/",
                "avatar": "http://media.steampowered.com/steamcommunity/public/images/avatars/f1/f1dd60a188883caf82d0cbfccfe6aba0af1732d4.jpg",
                "avatarmedium": "http://media.steampowered.com/steamcommunity/public/images/avatars/f1/f1dd60a188883caf82d0cbfccfe6aba0af1732d4_medium.jpg",
                "avatarfull": "http://media.steampowered.com/steamcommunity/public/images/avatars/f1/f1dd60a188883caf82d0cbfccfe6aba0af1732d4_full.jpg",
                "personastate": 0,
                "realname": "Robin Walker",
                "primaryclanid": "103582791429521412",
                "timecreated": 1063407589,
                "loccountrycode": "US",
                "locstatecode": "WA",
                "loccityid": 3961
            }
    }
}';
$data = json_decode($raw_json);
print $data->players{'realname'}; 
```

我的问题是 - 我怎样才能访问像 personname 或 realname 这样的数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:14:16.167

您使用的是花括号而不是方括号。正确的语法是

```
$data->players['realname'] 
```

也就是说，您在数组中有一个对象，因此通过键访问它也不起作用。你需要这样的东西

```
$data->players[0] 
```

此外，您的 json 无效，因此您应该修复它。验证 json 的有用工具是[http://json.parser.online.fr/](http://json.parser.online.fr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:21:47.660

首先，您`JSON`的格式无效，并且该解码甚至无法正常工作。尝试

```
<?php
$raw_json = '
{
    "players": [
        {
            "steamid": "76561197960435530",
            "communityvisibilitystate": 3,
            "profilestate": 1,
            "personaname": "Robin",
            "lastlogoff": 1365134746,
            "profileurl": "http://steamcommunity.com/id/robinwalker/",
            "avatar": "http://media.steampowered.com/steamcommunity/public/images/avatars/f1/f1dd60a188883caf82d0cbfccfe6aba0af1732d4.jpg",
            "avatarmedium": "http://media.steampowered.com/steamcommunity/public/images/avatars/f1/f1dd60a188883caf82d0cbfccfe6aba0af1732d4_medium.jpg",
            "avatarfull": "http://media.steampowered.com/steamcommunity/public/images/avatars/f1/f1dd60a188883caf82d0cbfccfe6aba0af1732d4_full.jpg",
            "personastate": 0,
            "realname": "Robin Walker",
            "primaryclanid": "103582791429521412",
            "timecreated": 1063407589,
            "loccountrycode": "US",
            "locstatecode": "WA",
            "loccityid": 3961
        }
    ]
}
';
$data = json_decode($raw_json);
print_r( $data->players[0]); // or
echo $data->players[0]->personaname;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:17:44.820

尝试这个：

```
$data = json_decode($raw_json);
echo $data->players['realname']; 
```

或者您可以通过以下方式查看数据格式

```
print_r($data); 
```

或者

```
var_dump($data); 
```

# php - 带有 jquery UI 插件的州和城市组合框

> ID：15953775
> 
> 赞同：0
> 
> 时间：2013-04-11T16:12:24.050
> 
> 标签：php, javascript, jquery, jquery-ui

我正在尝试根据州（类别和子类别）选择州和城市，但是使用 jquery ui 插件搜索值时出现问题。

```
 <script type="text/javascript">

                $(function(){
                $('#cod_estados').change(function(){
                    if( $(this).val() ) {
                        $('#cod_cidades').hide();
                        $('.carregando').show();
                        $.getJSON('cidades.ajax.php?search=',{cod_estados: $(this).val(), ajax: 'true'}, function(j){
                            var options = '<option value=""></option>'; 
                            for (var i = 0; i < j.length; i++) {
                                options += '<option value="' + j[i].cod_cidades + '">' + j[i].nome + '</option>';
                            }   
                            $('#cod_cidades').html(options).show();
                            $('.carregando').hide();
                        });
                    } else {
                        $('#cod_cidades').html('<option value="">– Escolha um estado –&lt;/option>');
                    }
                });
            });
            </script> 
```

[http://imageshack.us/g/10/99913872.jpg/](http://imageshack.us/g/10/99913872.jpg/)

还记得我正在使用其他会发生冲突的 javascript 代码吗？

圈

'jQuery.noConflict()'

而不是 $ 然后是 '(function () {'

但代码停止运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:18:05.697

如果你想在 noConflict 模式下使用 jQuery，你可以`$`在你的快捷方式 domReady 调用中重新映射。

```
jQuery.noConflict();
jQuery(function($) {
    // Your code here, access $ as usual
}); 
```

# c++ - 我应该按照什么方向向我的应用程序添加 Web 服务功能？

> ID：15953779
> 
> 赞同：3
> 
> 时间：2013-04-11T16:12:33.523
> 
> 标签：c++, matlab, soap, ssl

我有一个问题，我知道有很多方法可以解决它。我希望你能帮助我选择适者。

我正在开发一个主要使用 Matlab 的应用程序，并且我尝试逐渐将它的一些功能转移到 C++ 中。我在 Windows 上开发，用于 Windows。

我对这两种编程语言非常有经验，但我对 Web 开发一无所知。

我想向这个应用程序添加一些功能，这些功能将使用托管在受 ssl 保护的服务器上的一些 web 服务。

我一个人在这个项目上，但如果需要，我可以花一些时间学习新东西。

我想知道您认为我应该更好地使用哪些工具来完成这项任务？

到目前为止，我已经尝试过以下方法但失败了：

*   直接从 Matlab 调用 web 服务。我已将自签名 ssl 证书添加到我可以在计算机上找到的每个信任库中，但我不断收到错误消息，告诉我证书无效。

*   使用 gSoap 和 c++ 调用 web 服务。为此，我需要使用 ssl 功能重建 gSoap 二进制文件。我也尝试使用 Visual Studio 和 mingw/gcc 这样做，但没有成功，我在网上找不到任何帮助。

经过几个小时/几天的浏览和寻找解决方案后，我感觉我尝试使用的工具不是最常用的，因此不是最好的文档（因此不是最适合新手），所以你的建议是什么?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:23:14.423

我认为从 C++ 模块中使用 gSoap 将是最佳选择。

此处提供了有关将 gSoap 与 SSL 一起用作客户端的信息：[使用 HTTPS/SSL 保护 SOAP 客户端](http://www.cs.fsu.edu/~engelen/soapdoc2.html#tth_sEc19.22)

关于使用 gSoap 构建 VS 应用程序的链接：[Creating a gSoap eBay Client Application with Visual C++ 2008](http://www.codeproject.com/Articles/30497/Creating-a-gSoap-eBay-Client-Application-with-Visu)

可能这有助于将 gSoap 与 MinGW 一起使用：[Using gSoap in Qt/Windows](https://stackoverflow.com/questions/2795760/using-gsoap-in-qt-windows)

# talend - 如果 tMysqlRow 中没有更新行，如何在 Talend 中构建条件分支？

> ID：15953781
> 
> 赞同：0
> 
> 时间：2013-04-11T16:12:38.997
> 
> 标签：talend

在我的 Talend 工作中，我有一些 xml 文件。这些文件中的每一个都包含一个字段，我将在 UPDATE 语句的 WHERE 子句中使用该字段。

我不会描述整个工作以及我是如何完成它的，而只会描述一小段摘录：我使用 tFileInputXML 和 tMysqlRow 组件对此进行了建模。

在 tMysqlRow 组件中，我构建了一个 UPDATE 查询，如下所示（简化）：

```
"UPDATE `my_table`
SET `my_table`.`oneField` = '" + row1.ONEFIELD + "'
WHERE `my_table`.`id` = '" + row1.ID 
```

这对我来说很好。但是如果没有更新的行，我不明白如何对异常情况建模，因为在表中找不到 ID。我知道有一个触发器“运行 if”，但我不知道如何准确地使用它。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T13:49:27.110

我认为您应该使用前面的组件 ( **tMap )，该组件将通过定义****表**的 ID 列和 XML 中的**ID**列**之间****的**连接来*过滤*XML 文件的内容。

 ******因为您的主要流程 (row1) 来自 XML 文件，所以您必须拒绝在数据库中找不到 ID 的行。这就是 tMap 组件的作用之一。

您也可以查看 tJoin 组件，但我直到现在才使用它。******

# sql - 从多行/列返回最大值

> ID：15953784
> 
> 赞同：0
> 
> 时间：2013-04-11T16:12:44.010
> 
> 标签：sql, sql-server-2000

我为此使用 SQL 2000。给定下表：

```
F1          D1          D2          D3          LN
==================================================
1           1/1         1/1         1/1         1
1           2/1         1/1         1/1         2
2           1/1         1/1         1/1         1
2           1/1         1/1         1/1         2 
```

我需要获取 D1-D3 中具有最高值的行。但是，如果它们都相同，那么我想将它们全部归还。所以上表返回的结果如下，因为第 2 行的 D1 值为 2/1，所以我不需要第 1 行，第 3 行和第 4 行的 D 值都相同，所以我想要两者那些。

```
F1          D1          D2          D3          LN
==================================================
1           2/1         1/1         1/1         2
2           1/1         1/1         1/1         1
2           1/1         1/1         1/1         2 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:07:04.100

您提供的数据不足以解决问题，但是您可以尝试以下操作：

```
create view T1 as
(
select F1, MAX(D1) D1, MAX(D2) D2, MAX(D3) D3
from table_3
group by F1
);
go

select *
from table_3 a inner join t1 b  
on
a.F1 = b.F1 and a.D1 = b.D1 and a.D2 = b.D2 and a.D3 = b.d3; 
```

还有这个

```
select *
from Table_3 a
where exists 
(
    select F1, MAX(D1) D1, MAX(D2) D2, MAX(D3) D3
    from table_3 b
    group by F1
    having a.F1 = b.F1 and a.D1 = MAX(b.D1) and a.D2 = MAX(b.D2) and a.D3 = MAX(b.d3)
) 
```

# azure - Azure Geomentry 类型引发异常无法加载文件或程序集 microsoft.sqlserver.types，版本 = 11.0.0.0

> ID：15953788
> 
> 赞同：2
> 
> 时间：2013-04-11T16:12:49.200
> 
> 标签：azure, filenotfoundexception, sqlexception

我在 Azure 上托管 Restful 服务。它工作得很好。但是今天我获得了具有几何类型的方法，使用抛出异常。有趣的是我没有更新任何东西。

我参考 microsoft.sqlserver.types, Version=10.0.0.0 使用了 NuGet 包，它运行良好。

例外：

```
System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> 
System.Data.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> 
System.Data.SqlClient.SqlException: An error occurred in the Microsoft .NET Framework while trying to load assembly id 1\. The server may be running out of resources, or the assembly may not be trusted with PERMISSION_SET = EXTERNAL_ACCESS or UNSAFE. Run the query again, or check documentation to see how to solve the assembly trust issues. For more information about this error: 
System.IO.FileNotFoundException: Could not load file or assembly 'microsoft.sqlserver.types, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified.
System.IO.FileNotFoundException: 
at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks)
at System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
at System.Reflection.Assembly.Load(String assemblyString)

at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
at System.Data.SqlClient.SqlDataReader.get_MetaData()
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
--- End of inner exception stack trace ---
at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
at System.Data.Entity.Internal.InternalContext.SaveChanges()
--- End of inner exception stack trace ---
at System.Data.Entity.Internal.InternalContext.SaveChanges()
at ... 
```

我试图引用 microsoft.sqlserver.types, Version=11.0.0.0 但没有成功。

找不到与此问题相关的任何问题。有人有这个问题吗？有什么解决办法吗？以及在 Azure 发生的事情，它今天不起作用。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:23:14.063

找到解决方案：

[从http://www.microsoft.com/en-us/download/details.aspx?id=29065](http://www.microsoft.com/en-us/download/details.aspx?id=29065)安装“Microsoft® System CLR Types for Microsoft® SQL Server® 2012”作为启动任务。

将 SQLSysClrTypes.msi 复制到项目的 Startup 文件夹中，并在同一文件夹中创建 startup.cmd 文件。注意：应该是“复制到输出目录”=“总是复制”

服务防御.csdef

```
...
<启动>
    <Task commandLine="Startup\Startup.cmd" executionContext="elevated" taskType="simple" />      
</启动>
...

```

启动.cmd

```
REM 安装 Sql Sys Clr 类型

cd /d "%~dp0"

启动 /w msiexec /i SQLSysClrTypes.msi /qn

```

它现在有效。

希望这可以为某人节省时间。快乐的编码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T00:37:21.030

ADO 团队现在发布了一个官方 NuGet 包来帮助解决这个问题。

1.  安装[Microsoft.SqlServer.Types NuGet 包](https://www.nuget.org/packages/Microsoft.SqlServer.Types/)。
2.  确保将适当版本的本机 SqlServerSpatial110.dll 程序集复制到输出目录并与您的应用程序一起部署。安装包时将在 Visual Studio 中打开的 ReadMe.txt 文件中包含有关如何执行此操作的步骤。

请在官方博客文章中[阅读所有相关信息。](http://blogs.msdn.com/b/adonet/archive/2013/12/09/microsoft-sqlserver-types-nuget-package-spatial-on-azure.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T21:54:17.333

包含空间数据类型的程序集 Microsoft.SqlServer.Types.dll 已从版本 10.0 升级到版本 11.0。引用此程序集的自定义应用程序可能会失败。

这里有几个解决方案 [https://msdn.microsoft.com/en-us/en-en/library/dn236441(v=sql.120).aspx](https://msdn.microsoft.com/en-us/en-en/library/dn236441(v=sql.120).aspx)

1.  您可以通过调用 GetSqlBytes 方法而不是上面列出的 Get 方法来在代码中解决此问题，以检索 CLR SQL Server 系统类型，如以下示例所示

    ```
     string query = "SELECT [SpatialColumn] FROM [SpatialTable]";
      using (SqlConnection conn = new SqlConnection("..."))
      { 
            SqlCommand cmd = new SqlCommand(query, conn); 

            conn.Open(); 
            SqlDataReader reader = cmd.ExecuteReader(); 

            while (reader.Read()) 
            { 
                  // In version 11.0 only 
                  SqlGeometry g = SqlGeometry.Deserialize(reader.GetSqlBytes(0)); 

                  // In version 10.0 or 11.0 
                  SqlGeometry g2 = new SqlGeometry(); 
                  g.Read(new BinaryReader(reader.GetSqlBytes(0).Stream)); 
            } 
      } 
    ```

2.  您可以通过在应用程序配置文件中使用程序集重定向来解决此问题，如以下示例所示：

    ```
     < assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         ...
         < dependentAssembly>
             < assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" culture="neutral" />
             < bindingRedirect oldVersion="10.0.0.0" newVersion="11.0.0.0" />
         < /dependentAssembly>
         ...
     < /assemblyBinding> 
    ```

3.  您可以通过为“类型系统版本”属性指定值“SQL Server 2012”以强制 SqlClient 加载程序集的 11.0 版本来解决连接字符串中的此问题。此连接字符串属性仅在 .NET 4.5 及更高版本中可用。

# c# - asp：超链接对象引用未设置为对象的实例

> ID：15953793
> 
> 赞同：0
> 
> 时间：2013-04-11T16:12:57.203
> 
> 标签：c#, asp.net, object, hyperlink, .net-1.1

对于我所有的超链接，我不断收到此错误，但不确定原因。

我查看了所有其他类似的问题，但没有任何帮助。

这是不断抛出此错误的超链接的格式。

```
<asp:HyperLink id="BuyLink" runat="server" NavigateUrl='<%# Application["ApplicationPath"].ToString() + "/StoreModules/AddToCart.aspx?PID=" + DataBinder.Eval(Container.DataItem,"ProductID").ToString() %>' ImageUrl='<%# Application["CommonImages"] + "buy_btn.gif" %>' /> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:00:59.900

如果您可以接受对 ImageUrl 属性进行硬编码，那么这应该可以工作。注意路径开头的 ~/ 以获取应用程序根文件夹：

```
<asp:HyperLink ID="BuyLink" runat="server" 
    NavigateUrl='<%# "~/StoreModules/AddToCart.aspx?PID=" + DataBinder.Eval(Container.DataItem, "ProductID").ToString() %>' 
    ImageUrl="~/CommonImagesFolder/buy_btn.gif" /> 
```

# json - Titanium App中的JSON解析（多维数组）

> ID：15953796
> 
> 赞同：0
> 
> 时间：2013-04-11T16:13:06.847
> 
> 标签：json, multidimensional-array, titanium-mobile

我想在 Titanium 中解析一个多维数组。

它是这样的： -

```
{"nodes":
    [{"node":
       {
        "title":"<a href=\"\/adf\/into-the-blue\">Into the Blue<\/a>",
        "Teaser":"Into the Blue Teaser.",
        "Knowledge":"<a href=fsdf">Americas<\/a>",
         ...
         ... 
```

这就是我所做的。（它只得到第一行：（）

// url 具有 JSON URL。

```
var xhr = Titanium.Network.createHTTPClient();
xhr.onload = function() {
    var response = xhr.responseText;
    var resultObj = JSON.parse(response);
    Ti.API.log("The Response is " + response);
    Ti.API.log("THE RESULT " + resultObj);
    updateBanners(resultObj);
    updateTable(resultObj, catid, catregion, cattopic, listByDate);
};
xhr.open("GET", url);
xhr.send(); 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:22:08.823

也许您在解析中遗漏了一部分。

```
var resultObj = JSON.parse(response); 
```

我的通常看起来像。

```
var resultObj = JSON.parse(response).NameOfMyRemoteFunctionResult; 
```

我使用 WCF Web 服务进行调用，所以这是我得到的响应类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:58:13.780

这就是我能够解决它的方法。

```
//Correct Response. Gives the total number of returned Records.
resultObj.nodes.length

 // and for a specific title of first row.

 resultObj.nodes[0].node["title"]

alert("Total Records are :- "+ responseObjArr.nodes.length + " and the 1st Title is:- " + responseObjArr.nodes[0].node["title"]); 
```

# image - 在 Magento 中添加管理配置选项卡图像

> ID：15953798
> 
> 赞同：2
> 
> 时间：2013-04-11T16:13:11.980
> 
> 标签：image, magento, configuration, magento-1.7, configurationsection

我想在其中添加图像

管理面板 -> 系统 -> 配置 -> “左侧菜单选项卡”（此处）

只需看下图我想要做什么：

![在此处输入图像描述](https://i.stack.imgur.com/iE4QI.png)

任何解决方案..??

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T16:26:09.043

在 system.xml

```
<?xml version="1.0"?>
<config>
    <tabs>
        <magepal translate="label" module="magepal">
            <label><![CDATA[<div style="position: absolute;"><img id="magepal_block" src="" alt="" border="0" /></div>&nbsp;<script>$('magepal_block').src = SKIN_URL + "images/magepal/magepal.png";</script>]]></label>
            <sort_order>400</sort_order>
        </magepal>
    </tabs> 
```

将图像放入（尺寸 158 x 18）

> /skin/adminhtml/default/default/images/magepal/magepal.png

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-09T03:08:49.780

一个更简洁的解决方案是向选项卡添加一个 css 类，然后使用在 adminhtml 布局定义中定义的 css 文件进行样式设置。

```
<?xml version="1.0"?>
<config>
    <tabs>
        <magepal translate="label" module="magepal">
            <label>MagePal</label>
            <sort_order>400</sort_order>
            <class>admin-system-config-magepal</class>
        </magepal>
    </tabs>
    .... 
```

# python - 如何在 Python 中创建多个（但单独的）空列表？

> ID：15953800
> 
> 赞同：4
> 
> 时间：2013-04-11T16:13:17.180
> 
> 标签：python, list

我编写了一个脚本，该脚本在某一时刻生成一堆空列表，应用具有以下结构的代码：

```
A,B,C,D=[],[],[],[] 
```

产生输出：

```
A=[]
B=[]
C=[]
D=[] 
```

现在的方式是，每次使用不同的数据集作为输入时，我都必须手动修改字母。我希望能够自动化。我想过这样做：

```
FieldList=[A,B,C,D]
bracket=[]
[[0]for field in FieldList]
for field in FieldList:
    bracket=bracket+["[]"]
FieldList=bracket 
```

在这里，我试图复制“A,B,C,D=[],[],[],[]”，但显然它不是这样工作的。

我也试过：

```
FieldList=[A,B,C,D]
bracket=[]
[[0]for field in FieldList]
for field in FieldList:
    field=[] 
```

但最后它只产生一个列表调用“字段”。

#

所以，这就是我需要的列表。我将从 csv 读取信息并将我从每一行提取的数据添加到列表中。如果生成“列表列表”，我仍然可以单独调用它们中的每一个以将内容附加到它们吗？

```
A,B,C,D=[],[],[],[]
with open(csvPath+TheFile, 'rb') as csvfile:    #Open the csv table
    r = csv.reader(csvfile, delimiter=';')      #Create an iterator with all the rows of the csv file, indicating the delimiter between columns
    for i,row in enumerate(r):                  #For each row in the csv
        if i > 0:                               #Skip header 
            A.append(float(row[0]))             #Extract the information and append it to each corresponding list
            B.append(float(row[1]))
            C.append(format(row[2]))
            D.append(format(row[3])) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T16:16:21.837

你把事情复杂化了。只需使用列表或字典：

```
fields = {key: [] for key in 'ABCD'} 
```

然后根据需要参考`fields['A']`等，或循环遍历结构以依次处理每个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:20:58.230

```
dict((k, []) for k in ['A','B','C','D']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:32:10.780

根据您的使用示例，您真正想要的是`zip()`：

对于此示例，请注意，`csv.reader()`基本上将文件分解为以下形式的数据：

```
[
    ["a1", "b1", "c1", "d1"],
    ["a2", "b2", "c2", "d2"],
    ...,
    ["an", "bn", "cn", "dn"]
] 
```

这个例子：

```
table = [
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12],
    ]

#How to transpose the data into columns??? Easy!

columns = zip(*table) 
```

现在，您有一个`columns`形式为 的变量：

```
columns = [
    [1, 5, 9],
    [2, 6, 10],
    [3, 7, 11],
    [4, 8, 12]
] 
```

好的，让我们将其应用于 csv 文件：

```
with open("mycsv.csv", "rb") as infile:
    reader = csv.reader(infile, delimiter=";")
    next(reader, None) #skip the header
    columns = zip(*reader) 
```

就是这样！

注意：对于此示例，我们假设`"mycsv.csv"`每行中的列数正确。您可能需要实施检查以确保所有行都“填充”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-25T15:07:55.953

[在此处](https://stackoverflow.com/questions/23999801/python-creating-multiple-lists)检查接受的答案。（回答点击或不点击）

```
>>> obj = {}
>>> for i in range(1, 21):
...     obj['l'+str(i)] = []
... 
>>>obj
{'l18': [], 'l19': [], 'l20': [], 'l14': [], 'l15': [], 'l16': [], 'l17': [], 'l10': [], 'l11': [], 'l12': [], 'l13': [], 'l6': [], 'l7': [], 'l4': [], 'l5': [], 'l2': [], 'l3': [], 'l1': [], 'l8': [], 'l9': []}
>>> 
```

# android - 孤立阿拉伯语的手写识别

> ID：15953802
> 
> 赞同：4
> 
> 时间：2013-04-11T16:13:29.617
> 
> 标签：android, ocr, arabic, tesseract, leptonica

我在 Android 操作系统中开发了一个应用程序，用于使用 Tesseract OCR 识别手写的孤立阿拉伯字符。我已经尝试过了，但在某些情况下，Tesseract 无法识别带有连接字符的手写孤立阿拉伯字符，所以我想问一下：

1.是否有任何字符识别器可以让我的应用程序更准确地识别连接字符？

2.我听说Leptonica作为Tesseract中图像处理的库，是否足以提高Tesseract中识别阿拉伯语的精度？或者是否有任何图像处理库可以使识别过程更准确？

# perl - 使用 Perl 中的参考点从文件的某些部分创建字符串

> ID：15953803
> 
> 赞同：0
> 
> 时间：2013-04-11T16:13:34.923
> 
> 标签：perl, parsing

我正在寻找创建一个 Perl 脚本来查看 snmp MIB，提取 MIB 给定参考点的部分，并将结果添加到字符串中。

例如，这是我正在使用的数据的一部分：

```
 udpOutDatagrams OBJECT-TYPE
          SYNTAX  Counter
          ACCESS  read-only
          STATUS  mandatory
          DESCRIPTION
                  "The total number of UDP datagrams sent from this
                  entity."
          ::= { udp 4 }

      -- the UDP Listener table

      -- The UDP listener table contains information about this
      -- entity's UDP end-points on which a local application is
      -- currently accepting datagrams.

      udpTable OBJECT-TYPE
          SYNTAX  SEQUENCE OF UdpEntry
          ACCESS  not-accessible
          STATUS  mandatory
          DESCRIPTION
                  "A table containing UDP listener information."
          ::= { udp 5 }

      udpEntry OBJECT-TYPE
          SYNTAX  UdpEntry
          ACCESS  not-accessible
          STATUS  mandatory
          DESCRIPTION
                  "Information about a particular current UDP
                  listener."
          INDEX   { udpLocalAddress, udpLocalPort }
          ::= { udpTable 1 } 
```

我正在寻找对象名称，添加逗号，然后是描述：

```
udpOutDatagrams, The total number of UDP datagrams sent from this entity.
udpTable, A table containing UDP listener information.
udpEntry, Information about a particular current UDP listener. 
```

有一些参考点可以使用：

1.  所有名称后紧跟字符串“OBJECT-TYPE”。
2.  所有描述都用双引号括起来，并紧跟在“DESCRIPTION”行之后

我已经整理了一个基本框架来处理这个问题。只需要一些关于用于创建名称/描述字符串的逻辑的建议。

**更新：基于 Sinan Ünür 回答的基本脚本。这一切都可以用[这个](http://search.cpan.org/~hardaker/SNMP-5.0401/SNMP.pm#___top)来完成。**

```
#!/usr/local/bin/perl -w
use strict;
use SNMP;
$SNMP::save_descriptions = 1;
my $mib = $ARGV[0];
my $object;

&SNMP::addMibDirs("/usr/share/snmp/mibs/allMibs/");
&SNMP::loadModules($mib);
&SNMP::initMib();

foreach my $key ( keys %SNMP::MIB )
{    
  print "$SNMP::MIB{$key}{label}, $SNMP::MIB{$key}{description}, $SNMP::MIB{$key}{objectID}\n"
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:42:57.070

您是否考虑过使用[SNMP](http://search.cpan.org/perldoc/SNMP)？它为您提供[%SNMP::MIB 哈希](http://search.cpan.org/perldoc/SNMP#%SNMP%3a%3aMIB)：

> 用于访问已解析 MIB 信息的绑定哈希。加载 MIB 后，此散列允许访问已解析的 MIB 元数据（MIB 的结构（即模式））。哈希返回对代表单个 MIB 属性的 SNMP::MIB::NODE 对象的祝福引用。可以使用多种“键”格式获取节点——叶名称（例如，sysDescr）或完全/部分限定名称（例如，system.sysDescr）或完全限定的数字OID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:39:52.137

正则表达式似乎是最简单的方法。

只需解析文件以查找“OBJECT-TYPE”行，然后将“OBJECT-TYPE”之前的文本作为名称。

之后查找“DESCRIPTION”，然后查找紧随其后的引号之间的文本。

然后重复！

# html - 特殊字符的十六进制到 HTML 转换

> ID：15953806
> 
> 赞同：0
> 
> 时间：2013-04-11T16:13:40.977
> 
> 标签：html, utf-8, ascii

我正在调用一个服务，它将返回特殊字符的十六进制值。如何在 java 或 javascript 中快速将它们转换为 html ascii char 代码？有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:16:17.470

我建议您查看以下网站。

[http://unicodelookup.com/](http://unicodelookup.com/)

[http://www.mikezilla.com/exp0012.html](http://www.mikezilla.com/exp0012.html)

我认为第一个是您正在寻找的，但第二个可以帮助您转换句子。

# php - php回显"和'

> ID：15953808
> 
> 赞同：-1
> 
> 时间：2013-04-11T16:13:46.403
> 
> 标签：php, echo

有人可以帮我处理这段代码吗，我知道我做错了什么，但我不知道如何修复它。

```
echo "<div onclick='showplayer('".$usersList["username"]."')' id='playerLookupNameResult' style='color:".$color.";'>Some text</div> 
```

我需要在 onclick= 之后使用 " 但它已经在 echo 之后使用了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:14:49.367

`"`你可以这样逃跑`\"`。

```
echo "<div onclick=\"'showplayer('".$usersList["username"]."')'\" id='playerLookupNameResult' style='color:".$color.";'>Some text</div> 
```

# codeigniter - Codeigniter：做 $this->db->last_query(); 执行查询？

> ID：15953811
> 
> 赞同：48
> 
> 时间：2013-04-11T16:13:50.573
> 
> 标签：codeigniter, activerecord, codeigniter-2

查询执行是否发生在`get_where()`以下 codeigniter 活动记录语句的子句中？

```
$this->db->select('*');
    $q = $this->db->get_where('Contacts', array('id' => $contact_id));

    $sql = $this->db->last_query(); 
```

或者一旦你调用它就会发生`result_array()`？

并且是`$this->db->last_query();`获取查询字符串的可靠方法。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-12T07:38:01.163

查询执行发生在所有 get 方法上，例如

```
$this->db->get('table_name');
$this->db->get_where('table_name',$array); 
```

而 last_query 包含运行的最后一个查询

```
$this->db->last_query(); 
```

如果您想在不执行的情况下获取查询字符串，则必须这样做。转到 system/database/DB_active_rec.php 从这些函数中删除 public 或 protected 关键字

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

现在您可以编写查询并将其放入变量中

```
$this->db->select('trans_id');
$this->db->from('myTable');
$this->db->where('code','B');
$subQuery = $this->db->_compile_select(); 
```

现在重置查询，因此如果您想编写另一个查询，该对象将被清除。

```
$this->db->_reset_select(); 
```

事情就完成了。干杯！！！注意：使用这种方式时，您必须使用

```
$this->db->from('myTable') 
```

代替

```
$this->db->get('myTable') 
```

运行查询。

[看看这个例子](https://stackoverflow.com/questions/11023318/using-mysql-where-in-clause-in-codeigniter/11031431#11031431)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-20T10:42:14.950

对我来说，这个`save_queries`选项被关闭了，

```
$this->db->save_queries = TRUE; //Turn ON save_queries for temporary use.
$str = $this->db->last_query();
echo $str; 
```

参考：[无法从 $this->db->last_query(); 得到结果 代码点火器](https://stackoverflow.com/questions/45363375/cant-get-result-from-this-db-last-query-codeigniter)

# html - 缩放 IE9 的奇怪错误

> ID：15953815
> 
> 赞同：1
> 
> 时间：2013-04-11T16:13:57.643
> 
> 标签：html, css, internet-explorer-9, zooming

我正在开发一个仪表板中带有可移动图表的应用程序。每个图表在元素的右上角都有一组选项，允许全屏、关闭图表等。由于图像差异（我无法更改），我不得不使用`zoom`值。这在包括 IE7 在内的所有主要浏览器中都完全符合预期，但奇怪的是，不是 IE9。

[http://jsfiddle.net/YkTjp/7/](http://jsfiddle.net/YkTjp/7/)

如果您在 Chrome 和 IE9 中并排打开小提琴，您会看到该`.icons`元素并非绝对定位到`right: 0;`，实际上它是应有的距离的两倍。如果您无法重新创建它，如下所示。

[图片在这里。如果有人可以编辑我的帖子并嵌入而不是此链接，我将不胜感激（没有 10 个代表）](http://i.stack.imgur.com/82xLZ.jpg)

底部的图片是我删除后的样子`zoom: 0.5;`，并且这里的位置似乎`right`正确。所以我只能假设它`.icons`在考虑之前计算放置在哪里`zoom`。

然而，知道这一点并没有让我更接近修复。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:20:11.797

不幸的是，由于`zoom`它不是标准的 CSS 组件，因此它的应用没有标准。

基本上，这`zoom:0.5`会导致元素被切成两半，但 IE 正在分别它所占用的空间执行此操作，**并将**它们对齐到该幻像空间的左上角，而不是仅与父级对齐。它看起来离右侧更远，但实际上它在顶部排列，并与`zoom:1`组件的左边缘对齐。

不幸的是，我想不出一个不基于 Javascript 的解决方案，但这就是问题发生的原因。

# alfresco - 缺少 Alfresco 文档派生内容

> ID：15953816
> 
> 赞同：0
> 
> 时间：2013-04-11T16:14:00.703
> 
> 标签：alfresco, cmis, alfresco-share

我创建了一个从文档派生的自定义内容类型。我正在尝试使用 CMIS 以编程方式使用 python [cmislib](http://chemistry.apache.org/python/cmislib.html)为我的文档查询我的 Alfresco 服务器（尝试使用 4.2.b 和 4.2.c） 。我有一个金字塔服务器，它接受 REST 调用并使用 CMIS 将它们发送到我的 Alfresco 服务器。

我收到此错误：

```
2013-04-11 11:19:25,526 | ERROR | Exception when serving /access_manager/search_noauth
Traceback (most recent call last):
  File "/home/hbrown/.virtualenvs/access_manager_master/local/lib/python2.7/site-packages/waitress-0.8.1-py2.7.egg/waitress/channel.py", line 329, in service
    task.service()
[...]
  File "/home/hbrown/workspace/spt/access_manager/access_manager/views/search.py", line 223, in cmis_main
    for result in repo.query(whole_query)
  File "/home/hbrown/.virtualenvs/access_manager_master/local/lib/python2.7/site-packages/cmislib/model.py", line 2467, in getContentStream
    assert(len(contentElements) == 1), 'Expected to find exactly one atom:content element.'
AssertionError: Expected to find exactly one atom:content element. 
```

我正在使用[getContentStream()](https://svn.apache.org/repos/asf/chemistry/cmislib/trunk/src/cmislib/atompub_binding.py)来检索内容。根据代码注释，我会说这是正确的 API 调用：

```
 >>> doc.getName()
    u'sample-b.pdf'
    >>> o = open('tmp.pdf', 'wb')
    >>> result = doc.getContentStream()
    >>> o.write(result.read())
    >>> result.close()
    >>> o.close()
    >>> import os.path
    >>> os.path.getsize('tmp.pdf')
    117248 
```

cmislib 中的 python 代码显然希望文档具有包含名为 的元素的 XML `content`，而我的没有。

调用代码如下所示：

```
from cmislib import CmisClient

SERVER = "localhost"
url = "http://{0}:8080/alfresco/cmisatom".format(SERVER)
client = CmisClient(url, 'admin', 'alfresco')
repo = client.defaultRepository
results = repo.query("select * from wg:bulletin")
print results[0].getContentStream().read() 
```

正在操作的 XML`getContentStream`如下所示：

```
<atom:entry>
    <atom:author>
        <atom:name/>
    </atom:author>
    <atom:id>http://chemistry.apache.org/aWQtMQ==</atom:id>
    <atom:published>2013-04-12T03:22:38Z</atom:published>
    <atom:title>Query Result id-1</atom:title>
    <app:edited>2013-04-12T03:22:38Z</app:edited>
    <atom:updated>2013-04-12T03:22:38Z</atom:updated>
    <cmisra:object xmlns:ns3="http://docs.oasis-open.org/ns/cmis/messaging/200908/">
        <cmis:properties>
            <cmis:propertyInteger displayName="Content Stream Length" localName="contentStreamLength" propertyDefinitionId="cmis:contentStreamLength" queryName="b.cmis:contentStreamLength">
                <cmis:value>249</cmis:value>
            </cmis:propertyInteger>
            <cmis:propertyId displayName="Object Type Id" localName="objectTypeId" propertyDefinitionId="cmis:objectTypeId" queryName="b.cmis:objectTypeId">
                <cmis:value>D:wg:bulletin</cmis:value>
            </cmis:propertyId>
            <cmis:propertyString displayName="Version Series Checked Out By" localName="versionSeriesCheckedOutBy" propertyDefinitionId="cmis:versionSeriesCheckedOutBy" queryName="b.cmis:versionSeriesCheckedOutBy"/>
            <cmis:propertyId displayName="Version Series Checked Out Id" localName="versionSeriesCheckedOutId" propertyDefinitionId="cmis:versionSeriesCheckedOutId" queryName="b.cmis:versionSeriesCheckedOutId"/>
            <cmis:propertyId displayName="Version series id" localName="versionSeriesId" propertyDefinitionId="cmis:versionSeriesId" queryName="b.cmis:versionSeriesId">
                <cmis:value>workspace://SpacesStore/1cd2053d-1fc4-4e85-b780-ba80284f0841</cmis:value>
            </cmis:propertyId>
            <cmis:propertyString displayName="wg:account" localName="account" propertyDefinitionId="wg:account" queryName="b.wg:account"/>
            <cmis:propertyString displayName="Version Label" localName="versionLabel" propertyDefinitionId="cmis:versionLabel" queryName="b.cmis:versionLabel">
                <cmis:value>1.0</cmis:value>
            </cmis:propertyString>
            <cmis:propertyBoolean displayName="Is Latest Version" localName="isLatestVersion" propertyDefinitionId="cmis:isLatestVersion" queryName="b.cmis:isLatestVersion">
                <cmis:value>true</cmis:value>
            </cmis:propertyBoolean>
            <cmis:propertyBoolean displayName="Is Version Series Checked Out" localName="isVersionSeriesCheckedOut" propertyDefinitionId="cmis:isVersionSeriesCheckedOut" queryName="b.cmis:isVersionSeriesCheckedOut">
                <cmis:value>false</cmis:value>
            </cmis:propertyBoolean>
            <cmis:propertyString displayName="Last Modified By" localName="lastModifiedBy" propertyDefinitionId="cmis:lastModifiedBy" queryName="b.cmis:lastModifiedBy">
                <cmis:value>admin</cmis:value>
            </cmis:propertyString>
            <cmis:propertyString displayName="Created by" localName="createdBy" propertyDefinitionId="cmis:createdBy" queryName="b.cmis:createdBy">
                <cmis:value>admin</cmis:value>
            </cmis:propertyString>
            <cmis:propertyDateTime displayName="wg:displayUntil" localName="displayUntil" propertyDefinitionId="wg:displayUntil" queryName="b.wg:displayUntil"/>
            <cmis:propertyId displayName="Alfresco Node Ref" localName="nodeRef" propertyDefinitionId="alfcmis:nodeRef" queryName="b.alfcmis:nodeRef">
                <cmis:value>workspace://SpacesStore/1cd2053d-1fc4-4e85-b780-ba80284f0841</cmis:value>
            </cmis:propertyId>
            <cmis:propertyString displayName="wg:email" localName="email" propertyDefinitionId="wg:email" queryName="b.wg:email"/>
            <cmis:propertyBoolean displayName="wg:isActive" localName="isActive" propertyDefinitionId="wg:isActive" queryName="b.wg:isActive">
                <cmis:value>false</cmis:value>
            </cmis:propertyBoolean>
            <cmis:propertyString displayName="wg:username" localName="username" propertyDefinitionId="wg:username" queryName="b.wg:username"/>
            <cmis:propertyBoolean displayName="Is Latest Major Version" localName="isLatestMajorVersion" propertyDefinitionId="cmis:isLatestMajorVersion" queryName="b.cmis:isLatestMajorVersion">
                <cmis:value>true</cmis:value>
            </cmis:propertyBoolean>
            <cmis:propertyId displayName="Content Stream Id" localName="contentStreamId" propertyDefinitionId="cmis:contentStreamId" queryName="b.cmis:contentStreamId">
                <cmis:value>store://2013/4/10/15/29/20b185d0-afae-4a7f-a06e-58eab399bdc9.bin</cmis:value>
            </cmis:propertyId>
            <cmis:propertyString displayName="Name" localName="name" propertyDefinitionId="cmis:name" queryName="b.cmis:name">
                <cmis:value>.pythonrc</cmis:value>
            </cmis:propertyString>
            <cmis:propertyString displayName="Content Stream MIME Type" localName="contentStreamMimeType" propertyDefinitionId="cmis:contentStreamMimeType" queryName="b.cmis:contentStreamMimeType">
                <cmis:value>text/plain</cmis:value>
            </cmis:propertyString>
            <cmis:propertyDateTime displayName="Creation Date" localName="creationDate" propertyDefinitionId="cmis:creationDate" queryName="b.cmis:creationDate">
                <cmis:value>2013-04-10T15:29:18.146-04:00</cmis:value>
            </cmis:propertyDateTime>
            <cmis:propertyString displayName="Change token" localName="changeToken" propertyDefinitionId="cmis:changeToken" queryName="b.cmis:changeToken"/>
            <cmis:propertyString displayName="wg:state" localName="state" propertyDefinitionId="wg:state" queryName="b.wg:state"/>
            <cmis:propertyDateTime displayName="wg:displayFrom" localName="displayFrom" propertyDefinitionId="wg:displayFrom" queryName="b.wg:displayFrom"/>
            <cmis:propertyString displayName="Checkin Comment" localName="checkinComment" propertyDefinitionId="cmis:checkinComment" queryName="b.cmis:checkinComment"/>
            <cmis:propertyString displayName="wg:application" localName="application" propertyDefinitionId="wg:application" queryName="b.wg:application"/>
            <cmis:propertyId displayName="Object Id" localName="objectId" propertyDefinitionId="cmis:objectId" queryName="b.cmis:objectId">
                <cmis:value>workspace://SpacesStore/1cd2053d-1fc4-4e85-b780-ba80284f0841;1.0</cmis:value>
            </cmis:propertyId>
            <cmis:propertyBoolean displayName="Is Immutable" localName="isImmutable" propertyDefinitionId="cmis:isImmutable" queryName="b.cmis:isImmutable">
                <cmis:value>false</cmis:value>
            </cmis:propertyBoolean>
            <cmis:propertyBoolean displayName="Is Major Version" localName="isMajorVersion" propertyDefinitionId="cmis:isMajorVersion" queryName="b.cmis:isMajorVersion">
                <cmis:value>true</cmis:value>
            </cmis:propertyBoolean>
            <cmis:propertyString displayName="wg:institution" localName="institution" propertyDefinitionId="wg:institution" queryName="b.wg:institution"/>
            <cmis:propertyId displayName="Base Type Id" localName="baseTypeId" propertyDefinitionId="cmis:baseTypeId" queryName="b.cmis:baseTypeId">
                <cmis:value>cmis:document</cmis:value>
            </cmis:propertyId>
            <cmis:propertyString displayName="Content Stream Filename" localName="contentStreamFileName" propertyDefinitionId="cmis:contentStreamFileName" queryName="b.cmis:contentStreamFileName">
                <cmis:value>.pythonrc</cmis:value>
            </cmis:propertyString>
            <cmis:propertyDateTime displayName="Last Modified Date" localName="lastModificationDate" propertyDefinitionId="cmis:lastModificationDate" queryName="b.cmis:lastModificationDate">
                <cmis:value>2013-04-10T15:29:23.384-04:00</cmis:value>
            </cmis:propertyDateTime>
        </cmis:properties>
    </cmisra:object>
</atom:entry> 
```

显然`content`这里没有为 python 代码提取命名的 XML 元素。

这是我的自定义内容文档的错误配置，还是 cmislib 未跟踪的 CMIS 更改，还是我调用了错误的 API 函数来获取内容或其他内容？

* * *

稍后：解决此问题的最小更改是调用`reload`或`getAllowableActions`。

这是原始代码：

```
def cmis_main(props, settings):
    """
    Create a CMIS query based on props and execute against Alfresco
    """
    def cmis_query(props, mapping):
        """
        Create CMIS query of AND-separated OR-clauses
        """
        # Code that formats a query string from dictionaries...

    cmis_mapping = {
        # Dictionary config for call to cmis_query
        # Nothing to see here. Move on.
        "app_sids": {
            "where_fmt": IN_WHERE_FMT,
            "key": "{0}:application".format(CMIS_NAMESPACE),
            "fn": set_format,
        },
    }

    cmis_url, cmis_user, cmis_password = cmis_args(settings)
    cmisclient = CmisClient(cmis_url, cmis_user, cmis_password)
    repo = cmisclient.getDefaultRepository()
    whole_query = cmis_query(props, cmis_mapping)
    logger.debug(whole_query)

    return [
        {
            'name': result.name,
            'content': result.getContentStream().read(),
            'content_mime_type': result.properties["cmis:contentStreamMimeType"],
        }
        for result in repo.query(whole_query)
    ] 
```

它被打破了。所以我把代码改成这样：

```
 results = list(repo.query(whole_query))
    for result in results:
        print(result.getAllowableActions())
        # or: result.reload()

    return [
        {
            'name': result.name,
            'content': result.getContentStream().read(),
            'content_mime_type': result.properties["cmis:contentStreamMimeType"],
        }
        for result in results
    ] 
```

它奏效了。我把它改成这样：

```
 results = list(repo.query(whole_query))
    for result in results:
        pass

    return [
        {
            'name': result.name,
            'content': result.getContentStream().read(),
            'content_mime_type': result.properties["cmis:contentStreamMimeType"],
        }
        for result in results
    ] 
```

它坏了。因此 XML 似乎没有完全加载到 CMISLIB 对象中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:32:25.233

在调用 getContentStream() 之前尝试执行 results[0].reload()。这不应该是必需的，但它可能会强制对象重新加载内容元素。

# java - Android：Twitter4J 异常（收到的身份验证质询为空）

> ID：15953819
> 
> 赞同：3
> 
> 时间：2013-04-11T16:14:07.167
> 
> 标签：java, android, oauth, twitter-oauth, twitter4j

我正在使用 Twitter4j 库为我在 Android 上的应用程序授权用户使用 OAuth。但是当我尝试获取 OAuth 请求令牌时，我遇到了这个异常。我知道有很多关于这个的话题（[Twitter4J + Android: Authentication Challenge is Null Exception](https://stackoverflow.com/questions/6129316/twitter4j-android-authentication-challenge-is-null-exception) like this）但没有一个能解决我的问题。这是解释我的问题的简单代码示例；

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  prefs = getSharedPreferences("twitterPrefs", MODE_PRIVATE);
  twitter = new TwitterFactory().getInstance();
  twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
  LoginButton = (Button) findViewById(R.id.login_button);
} 
```

我正在设置消费者密钥和密钥，并且我得到了格式良好的 twitter 对象，但是当用户单击登录按钮时；

```
private void loginNewUser() {
    try {
        currentRequestToken = twitter.getOAuthRequestToken(CALLBACK_URL);

        setUpViews();
        WebView twitterSite = new WebView(this);
        twitterSite.loadUrl(currentRequestToken.getAuthenticationURL());

        setContentView(R.layout.authorization_view);

    } catch (TwitterException e) {
        Toast.makeText(this, "Twitter Login error, try again later", Toast.LENGTH_SHORT).show();
    }
} 
```

我收到异常，因为 getOAuthRequestToken(CALLBACK_URL) 等于 null；**收到的身份验证质询为 null**。

我确定设备上的时间戳是正确的，并且请求令牌的异步任务也不起作用。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:04:43.727

我也偶然发现了这个问题。解决方案很简单：只需将回调 url 添加到 twitter 应用程序![在此处输入图像描述](https://i.stack.imgur.com/zrKZi.png)

# if-statement - awk：在 if 循环中使用 NR 处理位置。下一个和上一个位置

> ID：15953820
> 
> 赞同：1
> 
> 时间：2013-04-11T16:14:11.650
> 
> 标签：if-statement, awk

我的 bash 脚本中有这一行。

```
#Trying to find the FIRST maximum in the column $10
awk 'BEGIN{max=0} {if($10>=max){max=$10} else{exit}}  END{print NR}' 
```

它有效。

但我需要更复杂的东西（出于另一个目的）。我需要 awk 来检查下一行和上一行的值是否高于实际值（类似这样）：

```
awk 'BEGIN{max=0} {if($10[NR]>=max && $10[NR-1]>=$10[NR] && $10[NR+1]>=$10[NR] ){max=$10} else{exit}}  END{print NR}' 
```

但它不起作用，可能是因为我不知道如何处理列中的位置。你能帮我吗？

* * *

澄清：

我只想完整读取一列（第 10 列）并找到在前一行和下一行中具有更高值的行号。例如，如果列的值为 1,2,3,4,1,2，那么我想获得行号“5”（对应于数据中的第二个 1），因为它是列中的行旁边有两个更高的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:26:11.407

```
awk '{ if ($10 > old1 && old1 < old2) print NR-1; old2 = old1; old1 = $10; }' 
```

为了测试，我`$10`用`$1`. 在此数据上运行：

```
1
2
3
4
3
4
5
4
3
2
1
2
3
4
5
4
5
4
3
2
1 
```

它产生这个输出：

```
5
11
16 
```

# c - 结构中的C递增计数器

> ID：15953823
> 
> 赞同：2
> 
> 时间：2013-04-11T16:14:20.390
> 
> 标签：c, pointers, auto-increment

我正在做一个项目，我从文件中读取单词，将它们添加到链接列表中，然后计算单词出现的频率。我的程序正在将单词读入链接列表，但它不会在每次出现重复单词时增加计数 - 计数保持在 1。我不会粘贴我的整个代码，只粘贴适用的部分。

```
struct node {
    struct node *next;
    char word[60];
    int wordCount;
}; 
```

以及推送功能：

```
void push_front (struct node **list, char * n) {

assert (list);
int count = 0;

struct node *temp = (struct node *)malloc (sizeof (struct node));

if (!temp) {
    fprintf (stderr, "Out of memory\n");
    exit (1);
}
if (list == NULL) {
    temp->next = *list;
    strcpy(temp->word, n);
    temp->wordCount+=1;
    *list = temp;
} else {
    while (list) {
        if (temp->word == n) {
            temp->wordCount+=1;
            exit(1);
        } else {
            temp->next = *list;
            strcpy(temp->word, n);
            temp->wordCount+=1;
            *list = temp;
            break;
        }
    }
}
return;
} 
```

该程序的示例运行将是：

```
Word [0] = you, 1
Word [1] = you, 1
Word [2] = are, 1
Word [3] = a, 1
Word [4] = whipped, 1
Word [5] = what, 1
Word [6] = what, 1
Word [7] = you, 1
Word [8] = world, 1
Word [9] = you, 1
Word [10] = hello, 1 
```

现在，您可以看到每行末尾的计数器保持在 1，但是对于每个重复的单词，它应该递增，并且重复的单词也不应该添加到链表中。对不起，我是C新手！

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:18:00.490

以下对比

```
if (temp->word == n) { 
```

是指针（地址）的比较，而不是字符串的比较

C中的字符串比较不应该以上述方式完成

您可以使用`strcmp`from `#include <string.h>`：

```
if (strcmp(temp->word, n)==0) { 
```

并且您的函数包含一些要修复的错误。我重新设计了你的功能：

```
void push_front (struct node **list, char * n) {    
    assert (list);
    struct node *temp = *list;

    while (temp) {
        if (strcmp(temp->word, n) == 0) {
            temp->wordCount+=1;
            return;
        }
        temp = temp->next;
    }

    temp = (struct node *)malloc (sizeof (struct node));
    if (!temp) {
        fprintf (stderr, "Out of memory\n");
        exit (1);
    }
    temp->next = *list;
    strcpy(temp->word, n);
    temp->wordCount=1;
    *list = temp;
    return;

} 
```

在 main() 你的函数应该以这种方式调用

```
void main() {

    node *head = NULL;

    push_front (&head, "toto");
    push_front (&head, "titi");
    push_front (&head, "toto");
    push_front (&head, "titi");

    node *tmp;
    int i=0;
    for (tmp=head; tmp!=NULL; tmp = tmp->next)
        printf("Word[%d] = %s, %d\n", i++, tmp->word, tmp->wordCount);

} 
```

我对其进行了测试，执行结果如下：

```
$ ./test
Word[0] = titi, 2
Word[1] = toto, 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:30:07.010

```
if (temp->word == n) 
```

不会有帮助，因为你不能用`==`运算符比较字符串值，使用库函数 strcmp 你会得到正确的结果。另外，在这里：

```
else {
    while (list) {
        if (temp->word == n) {
            temp->wordCount+=1;
            exit(1);
        } else {
            temp->next = *list;
            strcpy(temp->word, n);
            temp->wordCount+=1;
            *list = temp;
            break;
        }
    }
} 
```

当您进入 else 案例时，您还没有`temp`与`list`. 去做。我也认为应该是：`while(*list)`

# css - 单选按钮太宽

> ID：15953824
> 
> 赞同：-2
> 
> 时间：2013-04-11T16:14:21.777
> 
> 标签：css, asp.net-mvc-4, radio-button

有人可以帮我解决这个问题。我在视图中有两个单选按钮：

```
@Html.RadioButton("technology", "Basic") Basic
@Html.RadioButton("technology2", "Advanced") Advanced 
```

它们显示如下：

![在此处输入图像描述](https://i.stack.imgur.com/tcDMG.png)

为什么它们显示得这么宽？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:21:00.493

将此页面加载到 Firefox 中并使用 Firebug 检查它并查看正在应用的 CSS。
您可以在 Firebug 中调整 CSS 以确定您希望它的外观。

确定要使用的 CSS 后，将其添加到源文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:04:09.893

在 Chrome 中调试此元素，即使是 firefox 并尝试添加`overflow: visible;` 到您的 css

# excel - 具有多个重复值的 Vlookup

> ID：15953825
> 
> 赞同：0
> 
> 时间：2013-04-11T16:14:31.403
> 
> 标签：excel, duplicates, vlookup

我正在尝试在 2 个电子表格之间进行 vlookup。其中一个电子表格有多个重复项...例如：

我在电子表格 1 中有：

```
Column A              Column B Column C Column D Column E
---------------------------------------------------------

cs_no             Alarmnet1 Alarmnet2 Alarmnet3 Alarmnet4
---------------------------------------------------------

    FLA013791    
    FLA013791
    FLA013791
    FLA013791
    FLA017564
    FLA017564
    FLA018638
    FLA018638
    FLA018638
    89517190
    89517190
    89517191
    89517192
    89517192
    FLA012274
    FLA012274
    FLA013334
    FLA018635
    FLA018635 
```

我必须将 Alarmnet 代码放在第二张纸的所需空格中

在第二个我有：

```
Column A Column B
-----------------

cs-no                    ItemNum
-----------------------------------

    89517190       AN547
    89517191       AN547
    89517192       AN547
    89517193       AN583
    89517194       AN583
    89517195       AN583
    FLA012274      AN547
    FLA013334      AN547
    FLA013791      ALARMNETGTC3
    FLA013791      AN548
    FLA016009      AN548
    FLA016927        AN548
    FLA017564        ALARMNETGTC3
    FLA017564        AN548
    FLA017974        AN548
    FLA018075        AN548
    FLA018316        AN548
    FLA018635        AN547
    FLA018636        AN547
    FLA018637        AN547
    FLA018638     ALARMNETGTC3
    FLA018638     AN549
    FLA018639     AN547
    FLA018640       AN547
    FLA018641       AN547
    FLA018642     AN547
    FLA018644       AN547
    FLA018645       AN547
    FLA018647       AN548
    FLA018647       AN560
    FLA018647       AN564
    FLA018648     AN547
    FLA018649       AN547
    FLANT10897      AN547
    FLANT10897      AN554
    FLT43270      AN547 
```

如果有人可以帮助我...会很酷...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:45:10.290

One method I have used here -

Place a formula to the left of the duplicate and append a number to it

```
=If(B2=B1,B2+(A1+"1"),B2+"1") 
```

Basically the formula states if the value is a duplicate, add 1 to it, else make it the first value appended to the end of the value.

And change your vlookup to process each value or be null if no secondary is found

```
=If(IsError(Vlookup(A1+Right(B$1, 1),'Sheet2'!A:C,3,false))=true,"",Vlookup(A1+Right(B$1, 1),'Sheet2'!A:C,3,false)) 
```

Right(B$1, 1) pulls the number off the end of the AlarmNet1 or whatever to look for the 1st through 4th values. B1 should point to that cell and be a static reference too.

If that doesn't work for your situation let me know and I can adjust my answer.

# python - PYTHONPATH：Windows 7 上的命令行调用

> ID：15953826
> 
> 赞同：0
> 
> 时间：2013-04-11T16:14:31.393
> 
> 标签：python, windows, pythonpath

我想从我的 PC 上的任何位置调用带有命令行参数的 python 脚本。

这个想法是与其他人共享相应的包，以便他们可以打开一个 CMD 窗口并运行

```
python thescript.py arg1 arg2 
```

不管他们的位置。

如何设置 python 路径/PATH 环境变量？

我在 中设置了一个包`site-packages`，将该路径添加到 $PATH 并编辑 PYTHONPATH 以包含模块目录（其中包括`__init__.py`），但 CMD 找不到相关脚本。

```
python: can't open file 'thescript.py': [Errno 2] No such file or directory 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:24:54.303

Python 不会*在*某种路径上查找脚本。

您有 2 个选项：

*   使用完整路径：

    ```
     python /path/to/thescript.py 
    ```

*   将脚本放在您的目录中`PATH`，使其可执行（`chmod +x thescript.py`）并给它一个[Shebang 行](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)：

    ```
    #!/bin/env python 
    ```

第二种选择可能更可取。在Windows上，可以安装[`pylauncher`](https://bitbucket.org/vinay.sajip/pylauncher)支持shebang行；如果您使用 Python 3.3 或更新版本，它*已经* [包含在您的 Python 安装](http://docs.python.org/3/whatsnew/3.3.html#pep-397-python-launcher-for-windows)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:54:35.287

另一种选择是为您关心的每个脚本创建一个批处理文件，并将批处理文件放在您的某个位置`PATH`，例如创建一个名为`thescript.bat`contains...

```
@echo off
the\path\to\python.exe the\path\to\thescript.py %* 
```

……那你就可以跑了……

```
thescript arg1 arg2 
```

...这是尽可能简洁的语法。

# tags - 如何创建标签？文档板

> ID：15953827
> 
> 赞同：0
> 
> 时间：2013-04-11T16:14:32.727
> 
> 标签：tags, docpad

如何制作标签？比如[http://dogfeet.github.io](http://dogfeet.github.io) 还有其他例子吗？

我添加了 docpad-plugin-tagging 但是，不显示数字标签 alttest.herokuapp.com/tags/404.html :(

以及如何为一页 alttest.herokuapp.com/posts/2013/2013-03-24_car_driving 创建标签？只有标签页面，不是全部

我的回购[https://github.com/npofopr/_altyncev_test](https://github.com/npofopr/_altyncev_test)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:06:41.697

您可以在元数据中添加标签作为数组或逗号分隔值：

```
----
title: "My post title"
tags: "tag1 tag2 tag3"
---- 
```

然后通过以下方式访问当前文档的标签：

```
@document.tags 
```

# project-management - 如何在网站上集成 SQL Server 2008 R2 Reports

> ID：15953830
> 
> 赞同：2
> 
> 时间：2013-04-11T15:06:45.067
> 
> 标签：project-management, version-control, visual-studio, sql-server, reporting

我正在创建一个主要用于查看报告的站点。数据库是带有 Reporting Services 的 SQL Server 2008 R2 Express。我正在考虑使用 Business Intelligence Development Studion 来创建报告，因为它集成良好且易于使用。该站点尚不存在，因为报告是其主要功能。

我开始为该站点使用 Visual Web Developer 2010，因为我认为它会运行良好。Microsoft 代表建议我使用 Visual Studio 2012，因为它与 SQL Server 2008 R2 兼容并且是最新版本。但是，似乎自 Visual Studio 2008 以来报告集成已停止。

我应该为我的报告和网站使用哪些工具？数据库必须是 Microsoft，但我对其他一切都很灵活。我正在寻找与数据库配合良好的工具。

我还想使用与我正在使用的任何 IDE/软件兼容/运行良好的源代码控制软件。有什么建议吗？

现在，我是唯一的开发者。一旦项目开始，我想准备好扩大到一个小团队，我想在第一时间就做好准备！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:46:47.963

如果预定义的报告是您网站的主要功能，我建议您更上一层楼并使用一些工具让您轻松创建和设计报告，例如[DBxtra](http://www.dbxtra.com/)。

# android - Android String Builder 每行读取

> ID：15953831
> 
> 赞同：2
> 
> 时间：2013-04-11T16:14:40.280
> 
> 标签：android, string, stringbuilder

我需要从字符串生成器中读取一行。问题是当我执行 .toString()... 时它将变成一个字符串，我不知道如何从中获取一行。我读过一个类似于我的问题，并得到这个答案：

* * *

```
StringBuilder sb = new StringBuilder();
sb.append("line 1");
sb.append("\\n");
sb.append("line 2");

String[] lines = sb.toString().split("\\n");
for(String s: lines){
    System.out.println("Content = " + s);
    System.out.println("Length = " + s.length());
} 
```

问题是，如果“第 1 行”或“第 2 行”实际上是一个 PASSWORD，它可能包含任何可能的字符串组合，包括“\\n”在内，该怎么办？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:56:43.187

我建议你使用像 FileReader、Reader、Scanner 这样的“阅读器”而不是“构建器/编写器”。

看看[这里](http://www.javapractices.com/topic/TopicAction.do?Id=42)，一些教程和读写文件的好例子。

# css - 如何使用固定页脚为正确的 div 获得正确的溢出？

> ID：15953832
> 
> 赞同：0
> 
> 时间：2013-04-11T16:14:40.950
> 
> 标签：css

我正在创建一个包含三个主要组件的站点 - 左侧的导航栏、中心内容（分为标题 + 数据）和页脚。页脚固定在页面底部。我在这里有 JSFiddle 示例：http: [//jsfiddle.net/6Ur89/1/](http://jsfiddle.net/6Ur89/1/)

我遇到的问题是，当#data div 对于 div 来说太大时，我希望它垂直滚动。我看到的问题是，当发生这种情况时，div 只会被推到页脚下方（而不是在页脚处停止），直到无穷大并且永远不会发生滚动。

在我的 CSS 中，我确实有这个：

```
html, body {
    overflow: hidden;
} 
```

我放入以防止出现水平和垂直滚动条（可能是由于页脚）。但是，当我删除这种样式时，整个内容 div 滚动，这几乎是我想要的（我希望标题不滚动……但这不是世界末日）。

任何人都可以在我出错的地方提供任何建议吗？再次 - 希望#data div 滚动并在页脚处停止。我想在网站底部有一个固定的页脚，我不希望页脚创建滚动条。如果您需要澄清，请告诉我。

**更新**：为 Stackoverflow 提供帮助 - 输入此问题后，立即弹出一个答案。我在包装器上放了一个clearfix，因此由于固定的页脚而不会出现滚动条。更新了我的 jsfiddle 以反映。所以，基本上，我想了解如何让*#data* div 滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:21:26.980

[http://jsfiddle.net/Xsu3Q/](http://jsfiddle.net/Xsu3Q/)

在内容 div 中添加了一个填充器：

```
 <div id="content">
    <div class='padder'>
    <div id="title">title</div>
    <div id="data">Lots of data...

.padder {padding-top: 100px;} 
```

将内容移出框架外 100px：

```
#content {
position: relative;
top: -100px;
margin-left: 350px;
height: 100%;} 
```

这样，您可以使用 height:100% 属性来匹配主体的高度，并为您的页脚减去 100px。

有关更清洁的示例，请查看类似的[答案](https://stackoverflow.com/a/15924302/1244950)

# wolfram-mathematica - 用mathematica拟合的正弦数据总和

> ID：15953837
> 
> 赞同：0
> 
> 时间：2013-04-11T16:14:53.850
> 
> 标签：wolfram-mathematica, curve-fitting, trigonometry

大家好，

我对一个数学脚本有一点问题，我需要用 3 个正弦函数的总和来拟合数据点：

```
fit = NonlinearModelFit[Data,a1*Sin[b1*x + c1] + a2*Sin[b2*x + c2] + a3*Sin[b3*x + c3], {a1, b1,c1, a2, b2, c2, a3, b3, c3}, x] 
```

我收到此错误：

```
NonlinearModelFit::cvmit: Failed to converge to the requested accuracy or precision within 100 iterations 
```

我尝试过使用不同的起始值并将 MaxIteration 设置为 10.000……也许这不是进行这种拟合的正确方法。有人对此有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:22:19.633

也许您的数据太糟糕了，但它与一个好的样本一起工作得很好：

```
data = Table[{x, Sin[ x + .3] + 2 Sin[1.2 x] + 3 Sin[1.5 x + .5]}, 
             {x, .01,  8 Pi, .001}];
fit = NonlinearModelFit[data, 
          a1*Sin[b1*x + c1] + a2*Sin[b2*x + c2] + a3*Sin[b3*x + c3], 
          {a1, b1, c1, a2, b2, c2, a3, b3, c3}, x]

Show[ListPlot[data], Plot[fit[x], {x, 0, 8 Pi}, PlotStyle -> Red], Frame -> True] 
```

![在此处输入图像描述](https://i.stack.imgur.com/TQlo9.png)

# javascript - 客户端从 C#/ASP.NET 页面中的 Javascript 调用开始文件下载？

> ID：15953840
> 
> 赞同：1
> 
> 时间：2013-04-11T16:15:00.717
> 
> 标签：javascript, asp.net

我需要从 ASP.NET 页面从 javascript 代码启动文件下载。

我最好的选择是什么？是否可以调用 Web 服务来执行此操作，或者以某种方式调用 C# 页面的常用事件处理程序？

请注意，我将检索大量数据，数兆字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:55:09.663

您可以使用隐藏的 IFRAME 元素并发起文件下载请求，这确实给人一种 AJAX 文件下载的感觉。

下载文件时，您可以在客户端的表单中执行其他活动。

是的，您也可以在此 URL 中调用 web 服务或 aspx 页面或 http 处理程序

```
function dowloadFileJS()  {
      // Create an IFRAME.
      var iframe = document.createElement("iframe");

      // Point the IFRAME to GenerateFile
      iframe.src = "GenerateFile.aspx?yourQueryString=myQueryString";

      // This makes the IFRAME invisible to the user.
      iframe.style.display = "none";

      // Add the IFRAME to the page.  This will trigger a request to GenerateFile now.
      document.body.appendChild(iframe); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:16:12.380

您可以使用 Javascript 为要下载的文件创建 iframe。看看这个答案：[使用 JavaScript 开始文件下载](https://stackoverflow.com/questions/365777/starting-file-download-with-javascript)

# c# - Silverlight 4 CollectionViewSource ListBox 基于 DataType 的过滤器

> ID：15953844
> 
> 赞同：1
> 
> 时间：2013-04-11T16:15:16.947
> 
> 标签：c#, silverlight, listbox, collectionviewsource

我有一个 ListBox，我正在加载三种类型的对象，这些对象都继承自同一个父类型。我想使用 CollectionViewSource 根据它们的类型过滤掉 ListBox 中的对象，但是我在编写过滤器时遇到了麻烦。

我的 XAML 如下：

```
<UserControl.Resources>
    <CollectionViewSource x:Key="eventsViewSource" 
                          Source="{Binding lifeCycleEvents}" >
        <CollectionViewSource.SortDescriptions>
            <compMod:SortDescription PropertyName="Date" Direction="Ascending"/>
        </CollectionViewSource.SortDescriptions>
    </CollectionViewSource>
</UserControl.Resources>

<ListBox Name="lstEventHistory"  ItemsSource="{Binding Source={StaticResource eventsViewSource}}">
...
</ListBox> 
```

在代码隐藏中，我正在加载从异步方法调用返回的对象的可观察集合：

```
private ObservableCollection<LifeCycleEvent> lifeCycleEvents;

...
                lifeCycleEvents= e.Result; 
                CollectionViewSource eventsViewSource = this.Resources["eventsViewSource"] as CollectionViewSource;
                eventsViewSource.Source = lifeCycleEvents; 
```

现在我想编写一个过滤器，它只会根据用户将在 UI 中单击的复选框显示某种类型的对象。

以下是编写一个过滤器的失败尝试：

```
eventsViewSource.Filter = new Predicate<object>(rmaFilter);

public bool rmaFilter(object item)
     {
        if(item.GetType() == typeof(RmaEvent))
            return true;
        else 
            return false;
     } 
```

这会产生以下错误：“事件 System.Windows.Data.CollectionViewSrouce.Filter 只能出现在 += 或 -= 的左侧。

我还没有找到任何完全符合我需要的教程。这样做的那些依赖于 Silverlight 中不存在的默认视图。我看过的一个这样的教程可以在[这里找到](http://www.zagstudio.com/blog/454#.UWXSyZPvtUg)

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:27:29.973

`CollectionView`and的 Filter 属性`CollectionViewSource`是一个事件，包含一个类型的集合`FilterEventHandler`，而不是`Predicate`。为 CollectionView 中的每个项目调用每个事件处理程序以确定是否应该显示它。

此外，从 Filter 属性添加或删除事件处理程序将导致调用事件处理程序并更新集合。

所以连接过滤器事件处理程序的正确代码是：

```
eventsViewSource.Filter += new FilterEventHandler(rmaFilter); 
```

并删除它：

```
eventsViewSource.Filter -= new FilterEventHandler(rmaFilter); 
```

和新的处理程序：

```
public void rmaFilter(object sender, FilterEventArgs args)
 {
    args.Accepted = args.Item is RmaType;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:29:29.643

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.filter.aspx)文档，Filter 是 CollectionViewSource 类型的事件。所以？正确的语法是：

```
eventsViewSource.Filter += new Predicate<object>(rmaFilter); 
```

在教程中，你已经链接了上面，作者使用了 CollectionViewSource 类型的[静态方法](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.getdefaultview.aspx)，它返回一个 CollectionView 对象。此 CollectionView 对象具有 Filter 属性（还不是事件！），您可以使用`=`语法将 Filter 委托分配给它

# c - RHEL5 Linux ODBC 问题

> ID：15953847
> 
> 赞同：2
> 
> 时间：2013-04-11T16:15:45.813
> 
> 标签：c, linux, unix, odbc, rhel5

我正在尝试将连接到 mssql 数据库服务器的已编译 C 代码从使用 datadirect odbc 驱动程序移动到使用已编译为 64 位且可用的 unixodbc 驱动程序管理器（版本 2.3.1）/ freetds 驱动程序（版本 0.91）。

通过链接已编译的 libodbc，我能够在 64 位 RHEL5 Linux 上成功编译它。`net.c:350: tds_select: Assertion 'timeout_seconds >= 0' failed`但是当我运行代码并且数据库连接失败时，我多次收到错误。我设置的环境变量是`ODBCINI`,`ODBCHOME`和`LDD_LIBRARY_PATH`（设置为 unixodbc 路径中的库）。

odbcinst文件中的驱动设置为libtdsodbc.so所在的路径。

我在这里错过了什么吗。`odbc.ini`,文件的权限`odbcinst.ini`似乎很好。

# google-maps - 谷歌地图自定义全景图与谷歌街景全景图冲突

> ID：15953852
> 
> 赞同：0
> 
> 时间：2013-04-11T16:15:59.747
> 
> 标签：google-maps, google-maps-api-3, google-street-view

我有一个自定义全景图，显示在建筑物外（街景）。当我做：

```
panorama.setPano(myPano);
panorama.setPosition(myLatLng); 
```

它开始显示我的全景图，但在一秒钟后停止并显示谷歌自己的街景。我发现*setPosition*方法正在触发谷歌街景。没有它，我的全景图就会完美显示。

有什么方法可以关闭或禁用谷歌数据或 StreetViewService 或任何与我的自定义全景图冲突的东西？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T22:29:49.950

这里有一个注释：[https ://developers.google.com/maps/documentation/javascript/streetview#CustomPanoramaMethod](https://developers.google.com/maps/documentation/javascript/streetview#CustomPanoramaMethod)

> 当您希望显示自定义全景图时，请勿直接在 StreetViewPanorama 上设置位置，因为这样的位置会指示街景服务请求靠近该位置的默认街景图像。相反，请在自定义 StreetViewPanoramaData 的 location.latLng 字段中设置此位置。

因此，只需像以前一样设置 pano 对象：

> 全景.setPano(myPano);

就是这样，Streetview 将使用您在 pano 对象中指定的位置。

# php - 在最后一个分组中选择第一次出现的项目

> ID：15953854
> 
> 赞同：0
> 
> 时间：2013-04-11T16:16:09.250
> 
> 标签：php, mysql, sorting, pdo, sequence

令人困惑，但是，情况如下：

我们有序列号，对应于程序每隔 1 分钟所在的位置。

```
Sequence#  |  Timestamp
   1       |   2012-04-11 12:00:00
   2       |   2012-04-11 12:01:00
   2       |   2012-04-11 12:02:00
   2       |   2012-04-11 12:03:00
   3       |   2012-04-11 12:04:00
   5       |   2012-04-11 12:05:00
   5       |   2012-04-11 12:06:00
   6       |   2012-04-11 12:07:00
   1       |   2012-04-11 12:08:00
   2       |   2012-04-11 12:09:00
   2       |   2012-04-11 12:10:00
   2       |   2012-04-11 12:11:00
   3       |   2012-04-11 12:12:00 
```

序列的持续时间可能会改变，但间隔始终相同（精确地每 1 分钟一次）。

如您所见，序列重复。**如何找到**Seqence的最新开始出现`n`？

所以，如果我想搜索序列 2，我会想要返回`2 | 2012-04-11 12:09:00`，因为它是序列 2 的最新开始出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:35:29.787

尝试：

```
SELECT t1.* FROM `table_name` t1
LEFT JOIN `table_name` t2 
on t1.`Sequence` = t2.`Sequence` and 
   t1.`Timestamp` = t2.`Timestamp` + interval 1 minute
WHERE t1.`Sequence`=2 and t2.`Sequence` is null
ORDER BY t1.`Timestamp` DESC LIMIT 1 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/4a294/4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:47:58.027

这是你想要的吗？

```
$desired_sequence=2;

$query="SELECT * FROM `table_name` ORDER BY `Timestamp` DESC";
$result = mysql_query($query);
if (mysql_errno()) { die( "ERROR ".mysql_errno($link) . ": " . mysql_error($link) ); }

$found_desired=0;
while($row = mysql_fetch_array($result))
{
    if($row['Sequence']==$desired_sequence)
    {
        $found_desired=1;
        $timestamp=$row['Timestamp'];
    }

    if( ($found_desired==1) && ($row['Sequence']!=$desired_sequence) )
    {
        return; // End the while loop because $timestamp will have your desired output.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:02:39.907

我不确定你到底想要什么。如果数据在文本文件中，我编写了一些代码。如果数据在数据库中，那就更容易了。但是，我假设因为在您的示例中您有一个 | 分离不在数据库中的数据。

```
function findLastOccurenceOfSequence ($sequenceNumber)
{
    if (@!is_int ($sequenceNumber))
        throw new Exception ("Expected param1 to be an integer");
    $data = file_get_contents ("testFile.txt");
    $dataArray = explode ("\n", $data);
    $dataArray = array_reverse ($dataArray);
    $returnLine = "";
    $sequenceStarted = false;
    foreach ($dataArray as $key => &$dataLine)
    {
        $pieces = explode ("|", $dataLine);
        if (count ($pieces) != 2)
            continue;
        list ($thisSequenceNum, $timeStamp) = $pieces;
        $thisSequenceNum = intval (trim ($thisSequenceNum));
        if ($thisSequenceNum == $sequenceNumber)
        {
            $sequenceStarted = true;
            $returnLine = $dataLine;
        }
        else if ($sequenceStarted)
        {
            break;
        }
    }

    if ($key == count ($dataArray))
    {
        throw new Exception ("Sequence not found!");
    }

    return $returnLine;
}

echo "OCCURRENCE: " . findLastOccurenceOfSequence (2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T16:26:57.873

我想这就是你想要的...

```
SELECT * FROM `table_name` WHERE `Sequence`=2 ORDER BY `Timestamp` DESC LIMIT 1 
```

# javascript - 如何选择具有复杂ID的元素

> ID：15953855
> 
> 赞同：3
> 
> 时间：2013-04-11T16:16:11.643
> 
> 标签：javascript, jquery, dom, optimization, jquery-selectors

我的页面中有元素，其 id 为`child_0_1_1_0`.
它由四个变量组成，因此最多可以有 16 个子元素。

选择元素的最佳方法是什么：

1.  使用来自四个变量的字符串操作来形成 id？
2.  选择第 n 个孩子，使用第 n 个孩子属性？

权衡是在接触 DOM 与字符串操作之间。

哪一个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:21:52.240

在 JavaScript 中，接触 DOM 几乎总是最慢的事情。字符串操作将是您最好的选择。

话虽如此，大多数任务的差异将是微不足道的。不要担心过早优化你的代码；如果第 n 个子操作允许您更轻松、更干净地编写代码，那么请使用它们！如果他们在未来证明太慢，那么就解决它。

# php - Codeigniter 图像处理程序无法保存图像

> ID：15953861
> 
> 赞同：1
> 
> 时间：2013-04-11T16:16:21.837
> 
> 标签：php, codeigniter

那么我有以下问题：我正在使用 CodeIgniter 2.1.3 并且想要上传图像并创建两个缩放图像。一个调整到大约 50x50 的大小，一个调整到大约 200x200。

上传效果很好。

但是当我想调整大小时，会发生以下错误： **无法保存图像。请确保图像和文件目录是可写的。**

我已将服务器上的权限设置为 777，但它仍然无法计算

这是类的代码：

```
public function uploadimage()
    {

         $head = array('title' => 'Upload Image');
        $error = array('error' => '');
                 $this->load->view('head',$head);
                 $this->load->view('imageUpload', $error);
                 $this->load->view('footer');
    }

    public function changeimage()
    {
          $config = array();
          $config['upload_path'] = 'img/Upload';
          $config['allowed_types'] = 'gif|jpg|jpeg|png|bmp';
          $config['max_size']   = '100';
          $config['max_width']  = '200';
          $config['max_height']  = '200';
          $config['overwrite'] = TRUE;
          $config['file_name'] = md5($this->session->userdata('username')).".png";

          $head = array('title' => 'Upload Image');
          $this->upload->initialize($config);

          if ( ! $this->upload->do_upload())
          {
                 $error = array('error' => $this->upload->display_errors());
                 $this->load->view('head',$head);
                 $this->load->view('imageUpload', $error);
                 $this->load->view('footer');
          }
          else
          {
             $uploaddata = $this->upload->data();

              //Create Thumb
              $config2 = array();
              $config2['image_library'] = 'gd';
              $config2['source_image']  = $uploaddata['full_path'];
              $config2['maintain_ratio'] = TRUE;
              $config2['width']  = 50;
              $config2['height'] = 50;
              $config2['new_image'] = '/~3612546/DateSite/img/ProfileThumbs/'.$uploaddata['file_name'];
              $this->image_lib->initialize($config2);
              if ( ! $this->image_lib->resize())
              {
                echo $this->image_lib->display_errors();
              }

              //Create resized original image so images < 200x200 get resized to get as close to 200x200
              $config3 = array();
              $config3['image_library'] = 'gd';
              $config3['source_image']  =$uploaddata['full_path'];
              $config3['maintain_ratio'] = TRUE;
              $config3['width']  = 200;
              $config3['height'] = 200;
              $config3['new_image'] = '/~3612546/DateSite/img/ProfileImages/'.$uploaddata['file_name'];
              $this->image_lib->initialize($config3);
              if ( ! $this->image_lib->resize())
              {
                  echo $uploaddata['full_path'];
                  echo $this->image_lib->display_errors();
              }

          }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:31:17.193

我真的不认为波浪号适合上传网址：

```
/~3612546/DateSite/img/ProfileImages/ 
```

然后，你所有的 url 都是大写/小写的，把它们都变成小写，如下所示：

```
/~3612546/dateSite/img/profileimages/ 
```

最后发布你现在收到什么错误，你 chmod 777 你的上传文件夹，你是把 777 添加到 dir 还是 dir+他的所有内容？（重要的是 dir+他的所有内容到 777）

# android - 如何使用带有 Cloud Endpoints 的 Google App Engine 从 Android 设备上的数据存储区检索数据？

> ID：15953865
> 
> 赞同：1
> 
> 时间：2013-04-11T16:16:45.773
> 
> 标签：android, google-app-engine, google-cloud-endpoints, google-cloud-datastore, business-logic-layer

我正在使用带有 Cloud Endpoints 的 Google App Engine 构建一个 Android 应用程序。我仔细阅读了本教程（[https://developers.google.com/eclipse/docs/endpoints-addentities](https://developers.google.com/eclipse/docs/endpoints-addentities)），因此我成功地在数据存储中执行了插入操作。此外，由于我在所有方面都面临初学者的模糊性，因此我收到了一个非常好的建议（帮助我在脑海中组织信息，然后是我的代码），方式如下（我还插入了解释):

1.  JPA 实体（仅带有 getter 和 setter 以及 JPA 注释的 POJO）=> 我有这个，是一个名为 Note 的类（我有相应的 setter 和 getter）（它存储在 myapp-AppEngine（服务器端）中。

2.  数据访问层：这是一个具有在 JPA POJO 上执行查询的方法的类（使用 EntityManagerFactory）。=> 我假设它是在我执行 Note >> Google >> Generate Cloud Endpoint Class 之后自动生成的类。获得的类是一个具有创建、读取、更新、删除操作的类。（我假设这是数据访问层？ - 如果我错了，请纠正我）。

3.  业务层：这是一个我应该处理接收到的数据的类，然后将结果传递给数据访问层。=> 这是有点不清楚的地方，因为我不确定我应该如何进行。我应该将业务层视为一个中间类，我在其中操作数据，这样我就不会直接从我的应用程序的客户端（Android 端）访问数据访问层的方法？

或者，有没有其他方法可以从我的数据存储中检索数据？即使，我认为这种组织代码的方式非常有用，清晰且自然。如果有人能告诉我如何做到这一点，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T16:40:00.777

@Cropcircles，您可以参考google提供的以下文档和示例代码：

1、使用谷歌云端点在java中设计应用引擎后端的[示例代码](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-java)

2，在 android 客户端中使用端点的[指南](https://developers.google.com/appengine/docs/java/endpoints/consume_android)和[示例代码](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-android)，即从数据存储区访问数据

[3，您还可以在IOS](https://developers.google.com/appengine/docs/java/endpoints/consume_ios)和[JavaScript](https://developers.google.com/appengine/docs/java/endpoints/consume_js)客户端中找到使用端点的指南。[IOS 示例](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-ios)代码

# c# - RemoveAccessRule c# 不从安全中删除用户名（文件夹属性）

> ID：15953866
> 
> 赞同：2
> 
> 时间：2013-04-11T16:16:48.683
> 
> 标签：c#, directory-security

我是 Stack Overflow 的新手 - 所以要友善 :)

有一个问题，我已经断断续续地学习 c# 大约一年了（第一语言），我创建了一个项目，该项目创建文件夹并根据用户来自 AD 的用户名分配权限。在复选框中显示为单独的过程。

我已设法分配规则等，并授予此用户对文件夹的权限，我试图通过尝试删除他们的权限来扩展此权限。我已经使用 RemoteAcessRule 完成了此操作，但这只会删除访问权限（如您所料），但用户仍然出现在 seucirty 中，只是没有任何权限。我的问题是以编程方式从这里删除用户需要什么。

如果需要，我可以发布代码片段，

谢谢，

# cakephp - 在 hasMany 关系中对相关数据进行分页

> ID：15953874
> 
> 赞同：2
> 
> 时间：2013-04-11T16:17:28.660
> 
> 标签：cakephp, cakephp-2.3, pagination

我在尝试对 hasMany 关系中的相关数据进行分页时遇到了一些麻烦

我有两个模型 - Collection 和 Item Collection hasMany Item Item belongsTo Collection

在 Collection view.ctp 中，它显示了正在传递的 ID 的集合详细信息以及项目的相关数据。它从 find “first” 调用中接收此数据。

```
$this->set('collection', $this->Collection->find('first', $options)); 
```

生成的数组如下所示：

```
array(
    'Collection' => array(
        'id' => '4fc923f5-0a58-453f-9507-0c0c86106d80',
        'name' => '<collection_name>'
    ),

    'Item' => array(
        (int) 0 => array(
            'id' => '4fc92403-000c-4ed2-9dae-0c0c86106d80',
            'name' => 'Item1'
        ),
        (int) 1 => array(
            'id' => '4fc9241b-35ec-4810-b511-0c0c86106d80',
            'name' => 'Item2'
        ),
        (int) 2 => array(
            'id' => '4fc96e5d-ad74-4c05-a9da-0c0c86106d80',
            'name' => 'Item3'
        ),
        (int) 3 => array(
            'id' => '4fc96e64-a110-4036-bea2-0c0c86106d80',
            'name' => 'Item4'
        )
    ) 
```

现在我可以从这个分页调用中得到相同的结果，除了添加了 0 索引

```
$this->set('items', $this->paginate('Collection', array('Collection.id'=>$id)));

array(
    (int) 0 => array(

        'Collection' => array(
            'id' => '4fc923f5-0a58-453f-9507-0c0c86106d80',
            'name' => '<collection_name>'
        ),

        'Item' => array(
            (int) 0 => array(
                'id' => '4fc92403-000c-4ed2-9dae-0c0c86106d80',
                'name' => 'Item1'
            ),
            (int) 1 => array(
                'id' => '4fc9241b-35ec-4810-b511-0c0c86106d80',
                'name' => 'Item2'
            ),
            (int) 2 => array(
                'id' => '4fc96e5d-ad74-4c05-a9da-0c0c86106d80',
                'name' => 'Item3'
            ),
            (int) 3 => array(
                'id' => '4fc96e64-a110-4036-bea2-0c0c86106d80',
                'name' => 'Item4'
            )
      )
  )
); 
```

我可以对返回的数组执行 array_shift，但是分页不起作用。我可以尝试为此创建一个自定义分页函数，但想知道是否有一种更简单的方法可以使用我正在使用的标准分页来执行此操作，因为它具有我想要的数据，只是额外的第一个数组父元素 [0]。

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:13:31.083

```
<?php

// Don't pull in child data, we'll fetch that manually.
$this->Collection->contain(); // Assuming you have this behavior.

// Get the collection.
$collection = $this->Collection->find('first', $options);

// Conditions
$this->paginate['Item'] = array(
    'conditions' => array(
        'Item.collection_id' => $collection['Collection']['id'];
    )
);

// Get the items
$items = $this->paginate('Item');

// Return to original child model structure.
array_walk($items, function(&$v) { // Anonymous functions requires PHP 5.3
    $v = $v['Item'];
});

// Add it to the collection array.
$collection['Item'] = $items;

?> 
```

这就是我在子模型上实现分页的方式。试一试，也许对你也有用。

-一种

# html - 整个（完全）覆盖 CSS 样式

> ID：15953876
> 
> 赞同：4
> 
> 时间：2013-04-11T16:17:32.350
> 
> 标签：html, css

如何覆盖类、id 或其他 CSS 选择器的整个 CSS 样式？

例如：

如果在`styles1.css`我有：

```
/* also, this file contains a lot of styles used on other pages */

.one-great-class {
    background: white
    ...
    /* a lot of properties */
} 
```

...并且在`styles2.css`（仅在一个网页中使用）我想`one-great-class` **完全**覆盖课程我要写什么？

```
.one-great-class {
    /* Is possible that a line of code to delete all styles from this class? */
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T16:22:43.320

目前在 CSS 中是不可能的。

但最终可能会有这样的属性：[`all`](http://www.w3.org/TR/css3-cascade/)

它可以取三个值：

`initial`| `inherited`|`unset`

取自[级联和继承模块](http://www.w3.org/TR/css3-cascade/)：

*“例如，如果作者在一个元素上指定 all:initial，它将阻止所有继承并重置所有属性，就好像级联的作者、用户或用户代理级别中没有出现任何规则一样。”*

根据截至 2017 年 6 月的[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/all)`all`，目前受 Chrome、Firefox/Mobile 和 Opera 支持。Safari 仅支持 CSS4 值`revert`，其他浏览器不支持。

```
 .one-great-class {
      border-radius: 50% 35% / 20% 25% 60%;
      color: red;
      font: 12px/14px Arial, serif;
      height: 20em;
      width: 20em;
    /*... etc. */
  }

  .one-great-class {
      all: initial;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:56:50.390

经测试可与 IE9、Chrome 和 Opera 一起使用。我在写它时遇到了这个问题，所以决定与其更改现有规则，不如在现有规则之后附加一个新规则。根据记忆，问题出在 Android 2.3 中的默认浏览器上

更改现有规则似乎是一个更好（更清洁）的解决方案，尽管最终证明附加新规则是选择的路径。（我通过使用画布创建图像然后设置背景图像属性来更改背景图像。图像可能非常大，因此首选更新）

**功能**

```
function replaceRuleAttrib(ruleSelector, attribText, newValue)
{
    var nSheets, nRules, sheetNum, curSheet, curStyle, curAttrib;
    var nSheets = document.styleSheets.length;

    if (nSheets == 0)
        document.head.appendChild(document.createElement('style'));
    else
    for (sheetNum = 0; sheetNum<nSheets; sheetNum++)
    {   
        curSheet = document.styleSheets[sheetNum];
        nRules = curSheet.cssRules.length;
        for (ruleNum=0; ruleNum<nRules; ruleNum++)
        {
            curRule = curSheet.cssRules[ruleNum];
            if (curRule.selectorText == ruleSelector)
            {
                for (styleI=0; styleI<curRule.style.length; styleI++)
                {
                    styleName = curRule.style[styleI];
                    styleVal = curRule.style[styleName];
                    if (styleName == attribText)
                    {
                        curRule.style[styleName] = newValue;
                        return true;
                    }
                }
            }
        }
    }
    document.styleSheets[0].insertRule( ruleSelector+'{' + attribText + ": " + newValue + "; }",  0);   
} 
```

**示例 CSS（之前）**

```
<style>
h1
{
    color: red;
}
</style> 
```

**用法：**

```
function onHeadingClick()
{
    replaceRuleAttrib('h1', 'color', 'green');
} 
```

**示例 CSS（之后）**

```
<style>
h1
{
    color: green;
}
</style> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T16:35:05.240

浏览器将应用最后出现的 css。

```
.class {
font-size: 16px;
font-size: 14px;
} 
```

该类将获得 14px 的字体大小值。

您可以将 css 清除为最终的。

```
.class {
font-size: 14px !important;
} 
```

没有流式 css 规则可以改变它。

浏览器使用这种方法优先考虑
inline < embeded < external < user-agent。

如果您认为您需要对 css 进行更多控制，请使用 javascript 直接修改 dom。

# javascript - 调整图像组的大小以适应容器，所有图像的高度都相同

> ID：15953878
> 
> 赞同：0
> 
> 时间：2013-04-11T16:17:35.317
> 
> 标签：javascript, jquery, html, css

我有一个要求，在一个设置为窗口宽度的容器中会有一到四个图像。

图像可以是所有不同的尺寸。

在 javascript 中，我必须在保持纵横比的同时调整所有图像的大小，以便所有图像的高度相同，并且它们都适合在窗口宽度内彼此相邻的一行。

html结构可以如下：http: [//jsbin.com/uhonaz/2/](http://jsbin.com/uhonaz/2/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:19:01.770

这可以通过这样的 CSS 来完成：

```
img{
    height:100%;
    width:auto;
} 
```

如果您希望四个图像适合同一行，您可以这样做：

```
img{
    height:100%;
    max-width: 25%;
    width: auto;
} 
```

对于不确定数量的图像，请尝试一些 JavaScript（我使用的是 jQuery）：

```
width = 100/$('img').length;
$('img').css('max-width', width + '%'); 
```

# sql - 使用单列和无聚合函数进行透视

> ID：15953879
> 
> 赞同：1
> 
> 时间：2013-04-11T16:17:37.233
> 
> 标签：sql, sql-server-2008

我有个疑问。我有一个名为“ID”的列。在该列中，我的值如“FieldName”后跟“FromDate”、“Value”后跟“2012/12/01”、“FieldName”后跟“ToDate”值“2013/12/01”等，

```
**ID column**    
        FieldName
        FromDt
        Value
        2010/12/01
        FieldName
        ToDt
        Value
        2013/12/21
        FieldName
        CreatedDt
        Value
        2012/10/01
        FieldName
        ModifyDt
        Value
        2013/01/02 
```

现在我想要一张像

```
**FieldName  Value**
FromDt      2010/12/01
ToDt        2013/12/21
CreatedDt   2012/10/01
ModifyDt    2013/01/02 
```

是否可以在没有聚合函数的情况下使用带有单列的数据透视？请建议我该怎么做？（使用 Pivot 或其他方法）

问候， TNNagasundar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:52:25.560

`Order By`您应该按照@Magnus 的建议做另一列。

否则，试试这个。[SQLFiddle](http://sqlfiddle.com/#!3/a3a50/8)

```
WITH cte AS
(
  SELECT ID,ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) AS row_num
  FROM tbl
 )
SELECT c1.ID AS [field_name], c2.ID AS [value]
FROM cte c1
INNER JOIN cte c2
  ON c2.row_num = c1.row_num + 2
WHERE (c1.row_num % 4) = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:50:50.750

我不知道在这种情况下使用枢轴。可以将原始顺序行拆分为 4 组，然后从每个组中选择每个第 2 行和第 4 行，如下所示：

[http://sqlfiddle.com/#!3/b2af8/13/0](http://sqlfiddle.com/#!3/b2af8/13/0)

```
with t2 as (
  select
    id,
    (row_number() over(order by (select 0)) - 1) / 4 grp,
    (row_number() over(order by (select 0)) - 1) % 4 row
  from t
)
select a.id FieldName,
  b.id Value
from t2 a
join t2 b
  on a.grp = b.grp
  and a.row = 1 -- 2nd row numbering from 0
  and b.row = 3 
```

（灵感来自[https://stackoverflow.com/a/6390282/1176601](https://stackoverflow.com/a/6390282/1176601)）

# c++ - 调用 execve() + 更改密码

> ID：15953880
> 
> 赞同：0
> 
> 时间：2013-04-11T16:17:39.357
> 
> 标签：c++, exec, environment-variables

我想编写一个`A`执行另一个程序的程序`B`。从它的目录执行程序非常重要`B`，因为它会打开`BB`位于同一目录中的程序`B`。

我的意思是： `./B`会工作

`./b/B`行不通

我想到了两种方法：

1.  做`fork()`，更改环境中的密码，然后调用`execv()`
2.  做`fork()`，创建一个时间变量`envp`，并调用`execve()`

让我们说程序`A`坐在这里：`/home/a`和程序`B`和`BB`坐在这里：`/home/a/b`

这是我的程序`A`代码`/home/a`

```
#include <iostream>
#include <errno.h>

int main() {

    int pid;
    char *cmd[20] = {"/home/a/b/B", NULL};

    if ((pid = fork()) == 0) {

        /*if (putenv("PWD=/home/a/b") < 0) {
            fprintf(stderr, "error PWD%s\n", strerror(errno));
        }*/

        char *envp[20] = {"PWD=/home/a/b", NULL};

        execve( cmd[0], cmd, envp);

        fprintf(stderr, "error: execv: %s\n", strerror(errno));
        exit(0);
    } else if (pid < 0) {
        fprintf(stderr, "error: fork: %s\n", strerror(errno));
        exit(0);
        }

    fprintf(stderr, "father quits\n"); 
```

返回0；}

我尝试了两种解决方案，但都没有奏效，我的意思是，我设法执行 program `B`，但找不到 program `BB`。我还打印了程序的`B`密码，它是`/home/a/b/`- 但仍然无法执行`BB`。

可能吗？有人可以看到我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:21:30.037

您正在寻找[`chdir()`](http://linux.die.net/man/2/chdir)而不是`envp`操纵。

# ios - char 数组的初始化字符串太长。在 Xcode 中将编译源设置为 Objective-C++ 之后

> ID：15953883
> 
> 赞同：1
> 
> 时间：2013-04-11T16:17:45.447
> 
> 标签：ios, objective-c, xcode

我创建了一个新的单视图项目来测试它。在我的 ViewController.m 里面是代码：

我不确定为什么当我将编译源设置为 ObjectiveC++ 时会出现此错误？**char 数组的初始化字符串太长**

```
static const char _basex[3] = "12"; <-This is always ok
static const char _basex2[2] = "12"; <-Gives the initializer error when compiler set to Objective-C++

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:19:25.660

C 字符串文字`"12"`采用 3 个字符、`1`、`2`和空终止符。

如果要初始化 2 char 数组，请执行以下操作：

静态 const char _basex2[2] = { '1', '2' };

# perl - 使用 selenium 和 perl 处理弹出窗口

> ID：15953884
> 
> 赞同：-3
> 
> 时间：2013-04-11T16:17:48.317
> 
> 标签：perl, selenium, popup

我想要一个针对以下场景的解决方案：在一个页面中，我正在上传一个 xml，在单击上传按钮时，我将收到一个弹出窗口进行确认（我能够检测到这一点），之后我再次收到一个弹出我无法检测到的（页面仍在浏览器中加载）。请帮我解决这个问题。

我已经尝试过很多解决方案，比如：get window ids,titles。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:40:16.513

你可以使用 -

```
$sel->get_confirmation() 
```

这将检索在上一个操作期间生成的 JavaScript 确认对话框的消息。默认情况下，confirm 函数将返回 true，与手动单击 OK 的效果相同。这可以通过事先执行chooseCancelOnNextConfirmation 命令来改变。如果生成了确认但您没有获取/验证它，则下一个 Selenium 操作将失败。

注意：在 Selenium 下，JavaScript 确认不会弹出可见对话框。

注意：Selenium 不支持在页面的 onload() 事件处理程序中生成的 JavaScript 确认。在这种情况下，将生成一个可见对话框，Selenium 将挂起，直到您手动单击确定。

返回最近的 JavaScript 确认对话框的消息。

在使用 perl 和 RC 时，您应该始终参考[WWW::Selenium - Perl Client 。](http://search.cpan.org/~lukec/Test-WWW-Selenium-1.13/lib/WWW/Selenium.pm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:45:52.553

我发现了问题@amey ...我正在尝试上传一个实际上由于firefox的一些安全问题而实际上不允许的文件...实际上这个 [**http://cakebaker.42dh有一个解决方法.com/2006/03/29/file-upload-with-selenium/**](http://cakebaker.42dh.com/2006/03/29/file-upload-with-selenium/) .....由于 Firefox 已删除对 enablePrivilege [**https://support.mozilla.org/的支持，因此无法与最新的 Selenium RC 和 Firefox 一起使用zh-CN/questions/944433。**](https://support.mozilla.org/en-US/questions/944433.) 所以似乎是转移到WEBDRIVER的任务...... [**http://git.erp5.org/gitweb/erp5.git/commitdiff/06898bbfae4f238b7e79ce05048646529216064e**](http://git.erp5.org/gitweb/erp5.git/commitdiff/06898bbfae4f238b7e79ce05048646529216064e) 感谢您的支持... .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T13:52:03.493

我的解决方案是使用以下功能：

`$driver->execute_script("Events.invokeEvent('UserDetailPage:UserDetailScreen:UserDetailToolbarButtonSet:UserDetailToolbarButtons_DeleteUserButton_act', true);");`

分析按下接受按钮时 javascript 代码的作用。并在函数中执行该代码。

# html - 不同浏览器中的文字高度

> ID：15953886
> 
> 赞同：0
> 
> 时间：2013-04-11T16:17:52.907
> 
> 标签：html, css, height

我正在设计一个网站并主要将 jquery UI 用于它提供的图标/图标类。

在 chrome 中测试时，我看到 span 元素的默认高度，它包含一些没有填充或边框的文本，高度为 20 px。

我知道它会因字体类型和大小、默认设置和浏览器而有所不同。无论如何我可以将文本的高度设置为给定的大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:34:09.823

如果我理解正确，由于不同的浏览器呈现字体的方式，您似乎面临这个问题。

如果您的字体大小正在影响其父元素的大小，那么您可能需要重新考虑如何使用边距和填充。

编辑
您可以使用 line-height 来尝试驯服行为。

# perl - perl while循环不起作用

> ID：15953891
> 
> 赞同：-1
> 
> 时间：2013-04-11T16:18:03.163
> 
> 标签：perl

下面是我用分隔符分隔并通过电子邮件列表进一步发送的文件：Device1|City|Street|roadname|region|state|area|country|countrycode

```
________________________________________________
Device1|City|Street|roadname|region|state|area|country|countrycode
Device2|City|Street|roadname|region|state|area|country|countrycode
Device3|No data found
Device4|No data found
_________________________________________________
my $filename = '/tmp/list.txt';
open my $ifh, '<', $filename
  or die "Cannot open '$file' for reading: $!";
local $/ = '';
my $filename = <$ifh>;

my @arr = split(/\|/, $filename , -1);
$Device = $arr[0];
$Region = $arr[2];
$State = $arr[3];
$area = $arr[10];
$country = $arr[19];

$logger->debug("$logid >> file information Device Name: $Device");
$logger->debug("$logid >> file information Region: $Region");
$logger->debug("$logid >> file information State: $State");
$logger->debug("$logid >> file information Area: $area");
$logger->debug("$logid >> file information Country: $country");

close( $ifh ); 
```

我能够获得以下信息，但我的要求是每当在显示“未找到数据”的行中将其分配给变量，例如..“模式”，我将通过电子邮件进一步发送。

```
$smtp->datasend("$Device1|$region|$state|$area|$country\n");
$smtp->datasend("$pattern\n"); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:43:16.703

我认为你想要的是这样的：

```
use strict;
use warnings;
open my $INPUT, '<', '/tmp/list.txt' or die $!;
while (<$INPUT>) {
    chomp;
    my ($device, $data) = split(/\|/, $_, 2);
    if ($data eq 'No data found') {
        # Do whatever you need to do when there is no data
    } else {
        my @values = split(/\|/, $data);
        my ($region, $state, $area) = @values[3,4,5];
        # Further processing as needed
    }
}
close $INPUT; 
```

几点注意事项：

*   总是`use strict`-`use warnings`它会为你解决很多问题。`my $filename`就像您声明两次的事实一样。

*   第三个参数`split`是可选的，只有当它是正数时才有意义。

*   您可能正在设置`$/ = ''`一次 slurp 整个文件，但您想逐行处理它。

# asp.net-mvc - 如何使用会话变量来确定视图？

> ID：15953893
> 
> 赞同：1
> 
> 时间：2013-04-11T16:18:06.790
> 
> 标签：asp.net-mvc, session-variables, partial-views

我有以下 Session_Start 的 global.asax 设置：

```
protected void Session_Start()
{
    HttpContext.Current.Session.Add("sourceCode", "default");
} 
```

在我的控制器上，我有以下内容：

```
public ActionResult Index(string sourceCode)
{
    if (sourceCode != null && sourceCode != "default")
    {
        Session["sourceCode"] = sourceCode;
        return View();
    }
    else
    {
        return View();
    }
} 
```

我希望能够根据这个会话变量显示不同的部分布局。这样做的正确方法是什么？我可以从控制器加载部分视图还是需要在视图上处理它？

这是一个变量，我想在网站范围内使用它来确定特殊定价和着陆页广告素材。我是否必须在每个控制器上设置相同的结构，还是有更全局的方式来做到这一点？

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:32:01.603

如果要在所有页面中显示布局，则可能需要在布局文件中添加逻辑。在那里，您将添加类似的内容（假设剃须刀）

```
@if(HttpContext.Current.Session["someValue"]){
@*render some partial*@
}else{
@*render some other partial*@
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:53:24.673

按照 MVC 的约定，控制器应该决定它应该打开哪个视图。对于这个在控制器你有这样的代码：

```
public ActionResult Index(string sourceCode)
{
if (sourceCode != null && sourceCode != "default")
{
Session["sourceCode"] = sourceCode;
ViewData["PartialView"] = "partialviewname1";               
}
else
{
ViewData["PartialView"] = "partialviewname2";                
}
return View();
} 
```

并且鉴于您可以编写如下代码：

```
<div>
@Html.Partial(Convert.ToString(ViewData["PartialView"]))
</div> 
```

如果您已经决定必须在每个请求上加载哪个部分视图，那么您可以在全局操作过滤器中编写上述逻辑。全局操作过滤器在任何请求的操作方法之前执行。要了解有关全局操作过滤器的更多信息，您可以浏览此链接。 [http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

# bnf - 如何表示此语法的语义？

> ID：15953894
> 
> 赞同：1
> 
> 时间：2013-04-11T16:18:08.193
> 
> 标签：bnf, formal-semantics, denotational-semantics

我正在编写语言规范，我需要解决以下基本问题。假设我有（诚然做作的）抽象语法：

```
<A> ::= <B> | <C>
<B> ::= 1 | 2 | 3
<C> ::= 4 | 5 | 6 
```

这种语言的指称语义是什么样的？非终结符包含在 '<' 和 '>' 中，终结符不是。我想将`1`...映射`6`到自然数域。我完全不清楚的是我是否需要为非终端提供映射。似乎我不需要，因为，例如，`<A> ::= <B> | <C>`没有意义；它只是一个结构。忽略，暂时我们*可以*完全消除这条规则。

所以，就目前而言，这就是我认为完整的指称定义应该是这样的，其中右侧（斜体）表示自然数的相应值：

`[[1]] =`*一*

`[[2]] =`*二*

`[[3]] =`*三*

`[[4]] =`*四*

`[[5]] =`*五*

`[[6]] =`*六*

`A`从美学上讲，不提,`B`或根本不提似乎很奇怪`C`，但我认为这些符号永远不会出现在*实际程序*中（如`4`：），所以也许这就足够了。我所拥有的关于这个主题的所有材料都在他们的讨论中忽略了语言定义过程的这个非常简单的具体细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:37:22.770

语义应用于语法生成的程序。当你从这个语法生成程序时，你不会看到非终结符，所以你不需要为它们定义语义。

考虑示例：

```
Exp ::= Num | Exp + Exp
Num ::= 0,1,2,... 
```

在这个例子中，有必要`Num`逐个定义整个语义，但定义语义也很重要`Exp`，因为其中一个产生式虽然不是终结的（但它有一些终结`+`性的概念 - 不会改变）有一些特殊的含义分配给它 - 加法。

因此，您将执行以下操作：

```
[[0]] = 0 // first 0 is just some string, the second is a number from N
[[1]] = 1 ...
[[Exp + Exp]] = [[Exp]] + [[Exp]] // first + sign is just string,
                                  // the second is addtion in N 
```

正如您所看到的，当您定义语义时，您正在努力为您的语法生成的每个可能的程序赋予意义。

你可以这样想：当你的产品可以递归应用时，你需要为它定义语义——这就是`Exp + Exp`. `Num`但是，无论您尝试做什么，都会直接导致终端。

旁注：值得一提的是，为什么我们用语法来定义语义。

语法是定义语义的最方便的语言定义。这是因为语义可以很容易地使用对我们语言结构的归纳来定义。我们为基本案例提供规则——终端和非平凡的生产，就像`+`​​我们的例子一样。

# java - 拆分声明和分配 = 良好实践？

> ID：15953895
> 
> 赞同：35
> 
> 时间：2013-04-11T16:18:09.323
> 
> 标签：java, variables, variable-assignment, declaration

作为 NetBeans 的狂热用户，当我引入一个新变量时，我不断收到有关拆分变量声明和分配的建议。作为一个超级快速的例子，让我们看看这个 Java 行：

```
String someInput = JOptionPane.showInputDialog(null, "- Enter something: "); 
```

相对：

```
String someInput;
someInput = JOptionPane.showInputDialog(null, "- Enter something: "); 
```

NetBeans 似乎更喜欢后者（不过我不知道其他 IDE）。虽然它显然是双向的，但如果有的话，这会被认为是“好的做法”吗？还是纯粹是个人喜好问题？

（显然，将两者分开意味着您可以将一条额外的线合并为一条，但这不是重点。）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-11T16:22:49.240

如果您只是要将它们放在连续的行中，则没有理由拆分声明和赋值。如果赋值是有条件的，或者如果它需要进入一个单独的代码块（如 try/catch，或者如果赋值进入构造函数等），我只会拆分它们。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-11T16:24:50.877

一种可以追溯到早期静态类型编程的常见模式是在需要限定范围的块的顶部声明您需要的所有变量，然后随后分配给这些值。

话虽如此，只要您能够在一年的时间内将代码的意图清楚地传达给与您一起工作的人或您自己，这并不重要。

> 让我们改变对程序构建的传统态度：与其想象我们的主要任务是指导计算机做什么，不如专注于向人类解释我们想让计算机做什么。——唐纳德·克努斯

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-11T17:52:09.050

这是在 7.0 和 7.3 之间添加到 NetBeans 的一个选项。如果您不喜欢这个提示，可以通过取消选中来更改它：工具 > 选项 > 编辑器 > 提示 > 建议 > 拆分声明

![NetBeans > Prefs > Hints > Suggestions > Split Declaration 的屏幕截图](https://i.stack.imgur.com/WIXEz.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T16:31:12.067

Netbeans 建议这样做，因为它可以加快编码速度，例如考虑这个分配

```
final String myString = "somevalue" 
```

然后您决定实际上该值取决于一些`boolean`

```
final String myString;
if(something) {
    myString = "somevalue"
} else {
    myString = "someothervalue"
} 
```

要将其中一种转换为另一种，您可以使用代码提示来溢出声明和赋值，并使用`if...else`模板在很少的步骤中生成代码。

一般来说，如果您是无条件分配，则没有理由拆分声明和分配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T16:29:18.790

大多数编程社区都非常重视的 Code Complete 在其第 241 页中建议，作为防御性编程的问题，您可以在声明每个变量时对其进行初始化（您的第一个选项）或将其初始化为接近首次使用的位置（你的第二个选择）。

尽管如此，本书建议第二个选项更好，因为如果您使用第一个选项，您的变量可能在其声明和使用之间发生了变化。

在您的情况下，第二种情况下的声明和使用之间的区别是一行。因此，本书的担忧不适用。尽管如此，它的担忧是合理的，这可能是 Netbeans 设计人员包含此技巧的原因（即使他们过度使用了它）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T16:23:51.173

我不认为这有什么大不了的。选择你喜欢的风格，并始终坚持下去（如果你在一个团队中，如果每个人都以类似的方式布置他们的代码，这会有所帮助）。

我个人更喜欢在声明时初始化我的变量。出于这个原因，我更喜欢前者而不是后者。

# github - 如何将 Eclipse 项目的内容放在 github 中？

> ID：15953896
> 
> 赞同：0
> 
> 时间：2013-04-11T16:18:12.120
> 
> 标签：github, egit

我有一个 Eclipse 项目，我在 github 上分享了它。

在我的本地存储库中，我有： .../github/eer/content_of_project

所以，在我的 github 项目[github 项目](https://github.com/marmundo/eer)中，我有 eer/content_of_project。

我在不同的项目中看到它们的内容不会留在文件夹中。例如：[参考](https://github.com/JabbR/JabbR)。

如何在我的项目中使用 Egit 将我的项目内容放在 github 的父文件夹中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:08:53.463

解决方案是当您使用 Egit 共享项目时，您必须勾选框：在项目的父文件夹中使用或创建存储库。

在创建存储库之后，因为 Egit 不建议在工作空间内创建存储库。

# c# - WPF MVVM ListBox.ItemTemplate CheckBox IsChecked 绑定

> ID：15953897
> 
> 赞同：2
> 
> 时间：2013-04-11T16:18:14.947
> 
> 标签：c#, .net, wpf, data-binding, mvvm

我正在使用的场景是编辑角色和权限。在列表框中，我想列出所有已定义的权限并检查已分配所选角色的权限。角色选择出现在单独的列表中。

我有一个简单的视图，其中包含一个显示所有权限的列表框：

```
<ListBox             
    ...
    ItemsSource="{Binding AllPermissions}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <CheckBox Content="{Binding DisplayName}" 
                      IsChecked="???"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

ItemsSource 是一组权限，而所选角色的权限是另一组。如何将 IsChecked 值绑定到集合的交集（即，如果 ListBox 中的 Permission 也在所选角色的 Permissions 中，则应选中该框）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:04:38.087

我猜你的 AllPermissions 项目来源是 Permission 对象的集合。因此，只需确保除了 DisplayName 之外，它还具有确定角色是否具有权限的内容：

```
public class Permission : ViewModelBase
{
    private string displayName;
    private bool roleHasPermission;

    public string DisplayName
    {
        get
        {
            return this.displayName;
        }
        set
        {
            this.displayName = value;
            this.RaisePropertyChanged(() => this.DisplayName);
        }
    }

    public bool RoleHasPermission
    {
        get
        {
            return this.roleHasPermission;
        }
        set
        {
            this.roleHasPermission = value;
            this.RaisePropertyChanged(() => this.RoleHasPermission);
        }
    }
} 
```

所以然后将 IsChecked 绑定到 RoleHasPermission。

现在我猜测您正在从某个地方加载可用权限，并且他们目前不知道角色是否具有权限，因此当您加载 AllPermissions 时，请计算角色是否具有权限。

我假设您从一个基类继承，该基类上有一个 RaisePropertyChanged 事件，以便在值更新时通知视图。（如使用 mvvm light 或其他框架为您提供，或者您可以自己编写）另外如果您希望能够通过选中/取消选中复选框来编辑权限，请记住设置绑定 Mode=TwoWay IE：

```
<ListBox             
...
ItemsSource="{Binding AllPermissions}">
<ListBox.ItemTemplate>
    <DataTemplate>
        <CheckBox Content="{Binding DisplayName}" 
                  IsChecked="{Binding RoleHasPermission, Mode=TwoWay}"/>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:52:42.860

我会尝试使用 IsChecked 绑定的 Converter 属性。绑定的 ConverterParameter 将设置为所选角色的权限列表。

我不知道您对 ValueConverters 有多熟悉，但我可以编写一些代码来说明这是否有帮助。ValueConverter 示例很容易在 Internet 上找到。我第一次实现 ValueConverter 时，是按照[David Anson 的博客中的这个示例进行的](http://blogs.msdn.com/b/delay/archive/2010/03/17/confessions-of-a-listbox-groupie-using-ivalueconverter-to-create-a-grouped-list-of-items-simply-and-flexibly.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:25:06.993

我会为您的角色编写一个具有权限集合的 ViewModel。

```
public class PermissionViewModel : ViewModelBase
{
    public string Name { get; set; }
    public bool HasPermission { get; set; }
}

public class RoleViewModel : ViewModelBase
{
    public string Name { get; set; }
    public ObservableCollection<PermissionViewModel> PermissionViewModels { get; set; }
}

<ListBox             
...
ItemsSource="{Binding SelectedRoleViewModel.PermissionViewModels}">
<ListBox.ItemTemplate>
    <DataTemplate>
        <CheckBox Content="{Binding Name}" 
                  IsChecked="{Binding HasPermission, Mode=TwoWay}"/>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

# loops - 通过迭代创建按钮？

> ID：15953898
> 
> 赞同：0
> 
> 时间：2013-04-11T16:18:15.933
> 
> 标签：loops, button, lua, coronasdk

我一直在使用 Corona 引擎，我试图通过循环创建多个按钮，而不是显式地创建每个单独的按钮。问题是循环似乎只生成一个按钮，这表明它只迭代一次。

以下是我到目前为止所得到的......

**更新**

```
--> Create Level Selection:

local levelSelectionGroup = display.newGroup( );

--> Level Selected:

local function levelSelected()
    print(id);
end

--> Button Creation:

local function createLevelSelection()
    local levelsToBeMade = 30; -- Ignore these random numbers for now.
    local positionX = 1; -- Ignore again.
    local positionY = 1; -- Ignore again.

    for buttonNumber=1, levelsToBeMade do
        print(buttonNumber);

        positionX = (positionX + 10); -- Ignore again.
        positionY = (positionY + 10); -- Ignore again.

        levelButton[buttonNumber] = widget.newButton{ 
            id = buttonNumber,
            label = buttonNumber,
            default = "images/levelButton.png",
            over = "images/levelButtonPressed.png",
            width = 50,
            height = 50,
            onRelease = levelSelected
        }

        levelButton[buttonNumber].x = positionX;
        levelButton[buttonNumber].y = positionY;

        levelSelectionGroup:insert(levelButton[buttonNumber]);
    end
end 
```

控制台状态...

```
attempt to index global 'levelButton' (a nil value) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:29:20.233

我猜你的变量或范围可能有问题。所以要确保levelsToBeMade 变量和positionX 和positionY 变量是正确的。如果您绝对确定，这应该可以工作：（我在您的代码中没有发现任何问题，但是我猜 for 循环更可靠。）

```
for i=1, levelsToBeMade do

    print( "levelButton+1).." will be created." )

    positionX = positionX + 10; -- Ignore numbers.
    positionY = postionY + 10; -- Ignore numbers.

    levelButton[#levelButton+1] = widget.newButton{ 
        id = #levelButton,
        label = #levelButton,
        default = "images/levelButton.png",
        over = "images/levelButtonPressed.png",
        width = 50,
        height = 50,
        onRelease = levelSelected
    }

    levelButton[#levelButton].x = positionX;
    levelButton[#levelButton].y = positionY;
end 
```

如果它不起作用，只需检查控制台并查看循环是否执行所需的时间。

最后编辑：哦，没注意到。您以前从未创建过 levelButton 表！在开始创建关卡按钮之前，您应该像这样创建：local levelButton = {}, at outside of for loop

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:35:44.447

（抱歉，我不了解 Corona，所以这可能不适用。）

什么是`levelButton`，你确定它存在吗？也许应该是`levelButtons`？

如果这没问题，请检查以确保`newButton()`实际按预期返回表：`print(levelButton[buttonNumber])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:27:36.863

您可能需要重新考虑您的算法并更改此 while 循环。

如果要生成的级别数保持不变，您可能需要执行一个 for 循环，直到达到第 31 个循环。

```
 for i=1,levelstToBeMade  do

    levelstToBeMade = (levelsToBeMade - 1); -- Ignore numbers.
    positionX = positionX + 10; -- Ignore numbers.
    positionY = postionY + 10; -- Ignore numbers.

    levelButton[levelsToBeMade] = widget.newButton{ 
        id = levelsToBeMade,
        label = levelsToBeMade,
        default = "images/levelButton.png",
        over = "images/levelButtonPressed.png",
        width = 50,
        height = 50,
        onRelease = levelSelected
    }

    levelButton[levelsToBeMade].x = positionX;
    levelButton[levelsToBeMade].y = positionY;

 end 
```

希望这可以帮助。

干杯

# jquery - 为什么我的 jQuery 不能在 IE 上运行（在 Safari、Chrome 和 FF 中运行良好）？

> ID：15953904
> 
> 赞同：0
> 
> 时间：2013-04-11T16:18:41.843
> 
> 标签：jquery, windows, wordpress, internet-explorer

他在那里，我一直在尝试几个小时而不知道（我正在使用 Wordpress），很难知道 jQuery 有什么问题。Windows/Mac 中的 FF 和 Chrome 运行良好，IE 让我发疯。

我在标题中使用：

```
<!DOCTYPE html> 
```

这是我正在做测试的网站：

[http://newportal.no-ip.org/](http://newportal.no-ip.org/)

这是我的 JS 代码：

```
 jQuery(document).ready(function() {

//Menu
    jQuery("ul.menu").superfish({
            delay       : 100,
            animation   : {opacity:'show',height:'show'},
            //speed     : 10,
            autoArrows  : true, 
            dropShadows : false
        });

//Popup FancyBox
jQuery('.fancybox-media').fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
    });

jQuery('.fancybox').fancybox(); 

    var thumbnails = 'a:has(img)[hrefjQuery=".jpg"]';
    jQuery(thumbnails).addClass("fancybox").attr("rel","fancybox");

jQuery(".popup").fancybox({
         'width' : '75%',
         'height' : '75%',
         'autoScale' : false,
         'transitionIn' : 'none',
         'transitionOut' : 'none',
         'type' : 'iframe'
     });

//Expand
jQuery('div.moexpander').hide();
    jQuery('a.moexpander').click(function(){
        jQuery(this).parent().next('div.moexpander').slideToggle();
        return false;
    });  

//Slideshow Destacados, Create an array of titles
    var titles = jQuery('#cycle div.item').find("h3").map(function() { return jQuery(this).text(); });
    //Add an unordered list to contain the navigation
    //Invoke the cycle plugin on #cycle
    jQuery('#cycle').before('<ul id="pager" class="sprites bannerBg"></ul>').cycle({
        //Specify options
        fx      :'fade', //Name of transition effect
        speed   : 600,
        delay   : -1200,
        pause   :   1,
        pager   : '#pager',     //Selector for element to use as pager container
        pagerAnchorBuilder: function (index) {               //Build the pager
        return '<li><a href="#">' + titles[index] + '</a></li>';
    },
    updateActivePagerLink: function(pager, currSlideIndex) {
        jQuery(pager).find('li').removeClass('active').filter('li:eq('+currSlideIndex+')').addClass('active');
    }
    });
  jQuery('#cycle').hover(function() {
  jQuery('.pause').show();
  }, function() {
        jQuery('.pause').hide();
    });

//Slideshow Voluntariado
    jQuery('#cyclePopular').after('<div id="navPopular">') 
        .cycle({ 
    fx          : 'scrollHorz',
    speed       : 'fast',
    delay   : -1200,
    pause   :   1,  
    pager       : '#navPopular'
    });

//Slideshow Avisos
    jQuery('#cycleAvisos').cycle({ 
    fx          : 'scrollHorz',
    delay   : -4000,
    pause   :   1,
    prev:    '#prev',
    next:    '#next',
    pager       : '#navAvisos',
    after: onAfter
    });
//Make Avisos's Height auto-resizing    
    function onAfter(curr, next, opts, fwd) {
        var jQueryht = jQuery(this).height();

        //set the container's height to that of the current slide
        jQuery(this).parent().animate({height: jQueryht});
    }

//Make all the block clickable  
jQuery("#link").click(function(){
     window.location=jQuery(this).find("a").attr("href");
     return false;
});         

//Add CSS to Sidebar Pages
jQuery('#sidebar-pages').find("li").before("<span class='sprites bulletR left'></span>");

// Tabs
 jQuery.fn.easytabs = function(){
 //Default Action
 jQuery(this).find(".easytabs_content").hide(); //Hide all content
 jQuery(this).find("ul.easytabs li:first").addClass("active").show(); //Activate first tab
 jQuery(this).find(".easytabs_content:first").show(); //Show first tab content
 jQuery(this).find(".easytabs_content li a").before("<span class='sprites bulletR'></span>"); //Show bullets

 //On Click Event
 jQuery("ul.easytabs li").click(function() {
 jQuery(this).parent().parent().find("ul.easytabs li").removeClass("active"); //Remove any "active" class
 jQuery(this).addClass("active"); //Add "active" class to selected tab
 jQuery(this).parent().parent().find(".easytabs_content").hide(); //Hide all tab content
 var activeTab = jQuery(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
 jQuery(activeTab).fadeIn(); //Fade in the active content
 return false;
 });
};//end function

jQuery("div[class^='easytabs']").easytabs(); //Run function on any div with class name of "easytabs"

// Search animation with IE statements
    var input = jQuery('input#s');
    var divInput = jQuery('div.input');
    var width = divInput.width();
    var outerWidth = divInput.parent().width() - (divInput.outerWidth() - width) - 28;
    var submit = jQuery('#searchSubmit');
    var txt = input.val();

    input.bind('focus', function() {
        if(input.val() === txt) {
            input.val('');
        }
        jQuery(this).animate({color: '#000'}, 300); // text color
        jQuery(this).parent().animate({
            width: outerWidth + 'px',
            backgroundColor: '#fff', // background color
            paddingRight: '43px'
        }, 300, function() {
            if(!(input.val() === '' || input.val() === txt)) {
                if(!(jQuery.browser.msie && jQuery.browser.version < 9)) {
                    submit.fadeIn(300);
                } else {
                    submit.css({display: 'block'});
                }
            }
        }).addClass('focus');
    }).bind('blur', function() {
        jQuery(this).animate({color: '#b4bdc4'}, 300); // text color
        jQuery(this).parent().animate({
            width: width + 'px',
            backgroundColor: '#e8edf1', // background color
            paddingRight: '15px'
        }, 300, function() {
            if(input.val() === '') {
                input.val(txt)
            }
        }).removeClass('focus');
        if(!(jQuery.browser.msie && jQuery.browser.version < 9)) {
            submit.fadeOut(100);
        } else {
            submit.css({display: 'none'});
        }
    }).keyup(function() {
        if(input.val() === '') {
            if(!(jQuery.browser.msie && jQuery.browser.version < 9)) {
                submit.fadeOut(300);
            } else {
                submit.css({display: 'none'});
            }
        } else {
            if(!(jQuery.browser.msie && jQuery.browser.version < 9)) {
                submit.fadeIn(300);
            } else {
                submit.css({display: 'block'});
            }
        }
    });

}); 
```

我会非常感谢你的帮助，

H·

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:26:14.247

我看到 IE 不太支持（或根本不支持）的两个方法调用：

*   `.hover`
*   `.slideToggle`

所有`toggle`功能都具有粗略/不一致的跨浏览器支持。我会尝试改变这一点，特别是因为`slide`效果实际上具有所有 jQuery 效果的最高开销，并且在慢速浏览器（如 IE - 尤其是旧版本）上显而易见。

至于`.hover`，我建议您阅读并使用`.mouseenter`、`.mouseleave`、`.mousein`和的组合`.mouseout`。我不记得哪个，但`.hover`实际上是其中两个的简写，但对它的支持很粗糙。其中一组是基于 IE 的内置设置，我不认为它`.hover`是简写的。

**更新 1：**

根据您的反馈，我建议您搜索`.superFish`和`fancybox`插件的源代码以确保它们不使用`fadeTo`for `opacity`，因为这将完全破坏您的脚本，并且它们使用与`opacity`兼容的正确操作技术IE。

**更新 2：**

你的`.map()`方法也是错误的。从您的其余代码中，我可以看到您正在尝试创建一个普通的 JavaScript 数组，而不是 jQuery 数组。因此，您必须调用`.get()`after `.map()`。我找到了[另一个帖子的答案](https://stackoverflow.com/a/6371943/1506793)，进一步解释了这一点。

**更新 3：**

我希望我不是傻，但我注意到了这一行：

```
jQuery('div.moexpander').hide(); 
```

在为`jQuery('div.moexpander')`. 问题是，我在任何地方都看不到另一个电话来显示`jQuery('div.moexpander')`。如果我是正确的，并且之后您没有再次显示它，则该`div.moexpander`元素将永远不会显示，并且将永远不会使用处理程序。我不知道这对您的代码/问题有多重要，因为我仍然不知道您的症状，但这很可能是一个错误。

**更新 4：**

此外，只要我们正在调试，您应该运行代码并用分号终止每个函数声明。例如，更改：

```
function someFunct() { 
    ..... 
} 
```

至

```
function someFunct() { 
    ..... 
}; 
```

尽管这在 JavaScript 中不是必需的，但在许多情况下这会影响/影响您的脚本，并且在某些情况下会使它们崩溃。

老实说，我不完全理解为什么会这样，但我遇到过这是问题的情况，我相信其中一些问题是在 IE 中。

**更新 5：**

如果这仍然不起作用，请查看jQuery 论坛上的[此线程](http://forum.jquery.com/topic/jquery-load-doesnt-work-on-first-call-in-ff3-and-ie-but-works-in-ff3-5)，该线程处理涉及 fancyBox 的 IE 加载问题。

# sql-server - MSTest 单元测试（VS 2012）与 SQL Server，间歇性主键冲突

> ID：15953905
> 
> 赞同：5
> 
> 时间：2013-04-11T16:18:43.217
> 
> 标签：sql-server, sql-server-2008, visual-studio-2012, mstest

我正在处理一个非常奇怪的问题。最初，我认为这是清理测试数据的问题......但是在完全重构了我的测试数据清理代码并且仍然看到完全相同的行为之后......我不知所措。

我在各个类中有 245 种单元测试方法。每个类都有自己独特的测试数据，我初始化这些对象，然后在每个测试方法中，通常将数据插入数据库，然后通过测试进行操作。每个测试类都有一个 ClassCleanup 方法，该方法从数据库中清除所有测试数据，并且 ClassCleanup 也在 TestInitialize 上运行，以确保在运行任何其他测试方法之前清除所有内容。

当我使用 VS 2012 测试资源管理器“全部运行”时，有 22 个测试失败。它们都因违反主键约束的一些变化而失败。这意味着，当他们为这些测试初始化​​数据时，并未从该类中的先前测试方法中清除数据。如果我重新运行所有测试，我每次都会遇到相同的测试失败。这是相当可重现的。无论我运行多少次所有测试。同样的 27 个测试因主键违规而失败。

然而，奇怪的是，如果我只重新运行那些失败的测试，只有 9 个测试失败。这也是可重现的，这意味着无论我只运行这 27 个先前失败的测试多少次，14 个将失败，其余的将通过。当我只运行失败的测试时，这种情况会继续下去，直到我达到没有一个测试失败的地步。还应该注意的是，如果我单独运行每个测试类，一切都会通过。

我知道这看起来如何。

“你显然没有清理你的测试数据。” 如果是这种情况，那么我应该看到每次运行时相同的测试都会失败，无论如何。这 27 个测试应该在每次运行时都失败，而不仅仅是在我运行其他所有测试时。

“你不能在类之间有唯一的主键，并且事情没有被清理。” 看上面。即使我在我的类中重复了主键（我没有，因为我亲自对各个类中测试数据的主键的唯一性进行了三次检查），因为这些测试不是在单独的线程上同时运行的（已通过记录 ThreadId 进行了验证），任何给定测试的清理代码都将清除重复的数据，无论如何。

“你不能使用连接池。” 不，其实我是。而且我已经使用 SQL Profiler 验证了请求肯定是合并的。此外，因为这些测试不是并行运行的，所以只有一个连接线程。

“你不应该使用连接池。” 嗯，是的，我应该，因为底层代码库支持各种 Web 项目，但为了论证，我尝试在禁用连接池的情况下运行所有​​测试（在连接字符串中使用 Pooling=false），我得到了完全相同的结果。行为上没有任何变化。

“你当地的环境肯定有问题。” 我在其他同事的开发箱（偶然使用 SQL 2012）上运行这些测试也得到了相同的结果。这不是我的环境所独有的，甚至不是我的 SQL Server 版本所独有的。

“您应该尝试从命令行运行 mstest。” 已经这样做了。结果相同。

如果有人遇到过这样的事情，请告诉我。我知道我一定缺少一些简单的东西，因为这类问题通常就是这种情况，但我已经尽可能多地尝试解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:25:22.287

*以下假设基于您的数据库处于完全恢复模式并且您在测试期间不执行任何恢复或其他诡计（例如分离/重新连接数据库等）的假设。*

这是调查您的问题的一种相当乏味的方法，但可以保证提供解决此问题所需的数据。

1.  **对数据库进行完整备份** 在开始测试套件之前执行此操作。我们将恢复数据库，因此还要确保您有足够的磁盘空间来存储 2-3 个数据库文件副本。

2.  **创建 Sql Profiler 跟踪**对于事件，选择 RPC 启动/完成、sql 批处理启动/完成、Sql 语句启动/完成、SP 语句启动/完成、TM:* 完成、SQLTransaction、DTCTransaction 和用户错误消息。捕获所有列。

3.  **重现问题** 运行最少数量的测试以产生失败。让测试完成，以便您捕获所有清理代码，然后停止探查器跟踪。

4.  **进行事务日志备份** 我们以后可能需要它来进行时间点恢复。

5.  **在跟踪中定位故障** 如果您遇到主键故障，那么应该很容易追踪，只需查找用户错误消息。写下错误发生的*确切时间。*

6.  **检查明显问题的跟踪** 从错误开始，然后向后工作，直到找到失败的测试开始。记下上次失败测试的设置开始的*确切时间。*检查此范围内的所有 sql。sql 是否**完全**符合您的预期？行数是否正确？transactionId 是否正确？*（对于不在*事务中的每个语句，transactionId 列应该不同，对于事务中的每个语句都应该*相同*）。如果您的 BEGIN TRAN/COMMIT TRAN/ROLLBACK TRAN 不匹配，transactionId 会通知您。

7.  **将数据库恢复到失败的测试设置之前** 将其恢复到新数据库，以便我们可以比较原始数据库和副本。首先使用“RESTORE DATABASE .... WITH NORECOVERY”恢复完整备份。然后使用“RESTORE LOG .. WTIH STOPAT, RECOVERY”恢复事务日志备份，并指定测试设置失败之前的时间。

8.  **验证数据库状态** 检查可能尚未清理的测试数据。一切都是应有的吗？如果没有，您可以将数据库再次还原到较早的点。您正在寻找在测试开始之前数据库处于良好、已知状态的时间点。

9.  **将数据库恢复到错误发生之前的正确位置**如果您有空间，请恢复到另一个新数据库。检查导致 PK 违规的数据。如果再次运行有问题的语句，会出现错误吗？验证它是否发生。

    *   如果没有发生，您的问题可能是不匹配的事务处理。如果你之前错过了一个 COMMIT，你可能有一个事务仍然打开。当您使用 STOPAT 进行恢复时，任何未提交的事务都将被回滚。这也可以解释如何单独运行测试，但它们一起失败。
    *   如果确实发生了，则向后工作，直到找到问题为止。在弄清楚之前，您可能需要多次恢复数据库。您的过程将是还原数据库、检查跟踪、检查数据、还原到不同点、检查跟踪、检查数据等。
10.  如果在这一切之后您仍然不知所措，那么您可能希望使用数据库快照作为单元测试的一部分进行调查。基本上，创建数据库快照，设置并运行测试，将拆卸替换为将数据库恢复为快照。这将保证每次测试之前和之后的数据库相同。

2012 Management Studio 有一个改进的数据库恢复向导，使时间点恢复变得非常容易。 **祝你好运！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:47:30.617

不知道为什么你的失败，但我有类似的东西，现在我`transactionscope`在设置中放了一个这样的：

```
public void SetUp()
{
 _transactionScope = new TransactionScope(TransactionScopeOption.RequiresNew);
} 
```

并将其丢弃在拆解处。这摆脱了我的数据库问题，让我不必编写手动清理代码。

# date - 根据用户输入创建 Google 应用程序日期

> ID：15953912
> 
> 赞同：0
> 
> 时间：2013-04-11T16:19:25.207
> 
> 标签：date, google-apps-script, google-calendar-api

```
function onFormSubmit(e) {

  var d = e.values[1] + " 10:00:00 UTC";
  var start = new Date(d);

  // oncatenating the string as above fails?   

// ... form then sends an email and adds date to a Google Calendar 
```

我正在使用 Google 电子表格来存储从该电子表格生成的 Google 表单的开始、结束、标题值。我现在想将这些值添加到 Google 日历中。

问题是，如果我使用串联来构造字符串（因此输入可以接受 2013 年 4 月 4 日），则日期失败，当我通过电子邮件向自己发送值时“日期无效”。

也许这很奇怪，但是带有调试的电子邮件还带有前面的 ' 好像它正在转义值或其他东西......

```
var emailBody = "Booking enquiry was made on " + timestamp +

  "\n\nThe details they entered were as follows: " +

  "\nFrom: " + start +  " vs original date input : " +  e.values[1] + 

   // etc 
```

Gives: 预订查询于 11/04/2013 17:53:06 进行

他们输入的详细信息如下： From: Invalid Date vs original date input : '04/03/2013

看？'04/03/2013

**更新**

Serge insas 的回复有效，但随后我发现 ' 仅在 Google 表单托管在我的 localhost 开发服务器上时出现。当页面上线（包含 iFrame）时，不需要子字符串删除技巧，因为没有 ' 前置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:11:22.720

' 用于电子表格单元格中以将值保存为字符串。如果它被删除，电子表格会将其转换为日期对象。

您可以使用像[substring()这样的字符串运算符轻松删除该 '](http://www.w3schools.com/jsref/jsref_substring.asp)

```
var withoutQuote = e.values[1].substring(1); 
```

# jquery - iFrame 嵌入会导致页面布局混乱并导致滚动时出现伪影

> ID：15953917
> 
> 赞同：1
> 
> 时间：2013-04-11T16:19:43.387
> 
> 标签：jquery, iframe, embed, lazy-loading, vine

我有一个页面，它是一个使用 JQuery、JQueryUI、Masonry、Infinite Scroll & Lazy Load 和一些自定义 JS 和 CSS 的图像网格，当内容都是图像时，它们都很好用。

我最近尝试在其中嵌入 Vine 和 YouTube，但是任何时候嵌入 iFrame，当我滚动时页面会降级，我的固定页眉和页脚在滚动时跳来跳去，背景消失并发生大量伪影。

我已经尝试删除各种 js 文件和 css 以尝试在没有任何运气的情况下隔离问题......任何人有任何想法吗？

这是没有嵌入的页面： http: [//cryptic-anchorage-3726.heroku.com/test/test.html](http://cryptic-anchorage-3726.heroku.com/test/test.html)

这是嵌入的页面会降级：http: [//cryptic-anchorage-3726.heroku.com/test/test2.html](http://cryptic-anchorage-3726.heroku.com/test/test2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:40:06.040

几天后想通了。其中一个父容器（在本例中为 ID 为 eventList 的 div）的位置：相对。通过删除它，一切都会正常呈现！

# c++ - 这在多大程度上是一种不好的做法？【循环依赖】

> ID：15953918
> 
> 赞同：-1
> 
> 时间：2013-04-11T16:19:45.373
> 
> 标签：c++, c++11, circular-dependency

（首先，对不起我的英语）

为了避免循环依赖的句法限制，我想知道下面提出的解决方案是否真的是一个解决方案，或者它是否有比冒险更多的缺点（假设这种相互依赖是不可避免的）：

原来情况：

```
class B;

class A
{
   B needed;
};

class B {}; 
```

输出：

```
B has an incomplete type. 
```

“解决方案”：

```
template<typename T = class B>
class tricky_A
{
    static_assert(is_same<T, B>::value, "Too tricky!!");

    T needed;
};

class B {};

using A = tricky_A<>;

int main()
{
   A a;  // At the instantiation point, B isn't an incomplete type.
} 
```

输出：

```
No problems. 
```

常见的解决方案是使用指针，但是当你真的不需要它们时，我看到了两个问题：

1）如果您决定保留指向其他本地对象的指针，您应该确定（或您的类的用户应该确定）您的对象的生命周期比“保留”对象的生命周期短。

2）如果你决定处理动态内存，你应该花时间保留和销毁内存，而且它迫使你处理异常处理，以使你的代码异常安全。

*) 更长的代码；较小的可读性；更难的保养；等等

我应该使用这个“解决方案”还是更好地搜索另一个？

**编辑**：你没事。这不是真正的循环依赖，所以没有什么可问的。这个问题可以关闭。

**EDIT2**： 一个更好的问题[在这里](https://stackoverflow.com/questions/15953918/to-what-extent-can-be-this-a-bad-practice-circular-dependence)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:32:22.773

我认为使用指针（我同意@Andy Prowl RE：智能指针）是首选解决方案。关于您关于更长的代码，更小的可读性，更难的维护的观点-您的“棘手”解决方案虽然聪明，但违反了所有这些租户-它更长，更难阅读，更难维护。中级 C++ 开发人员的入门应该知道如何处理指针和智能指针，但是很难期望他们理解您提出的模板解决方案。

在您的示例中，我也没有看到循环依赖；不过，我假设这`B`也取决于`A`。

处理这种设计时要记住的重要事项是：

*   分离标题和正文很有帮助
*   更喜欢`#includes`按以下顺序执行： body `#includes`， forward-reference `#includes`，最后（如果需要），header`#includes`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:50:41.200

你设计的前提是错误的。由于您的代码中没有循环依赖，因此没有什么需要修复（除了定位`B`before的定义`A`）并且不需要做额外的工作。

如果你修复你的测试用例以包含一个真正的循环依赖，你会发现你的*解决方案*没有解决它。所以基本上你有更多更复杂的代码，但仍然是同样的问题。

另请注意，处理循环依赖的*正确*方法是破坏它。一旦循环依赖消失了，管理它的需求也消失了。很少有好的设计包含真正的循环依赖。

# iphone - 如何在给定 URL 的表格单元格中显示图像？

> ID：15953924
> 
> 赞同：0
> 
> 时间：2013-04-11T16:20:02.260
> 
> 标签：iphone, objective-c, uiimage

这段代码：

```
cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"recipes"];
cell.detailTextLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"time"]; 
```

显示单元格的标题和副标题，并从 JSON 文件中获取数据。

这段代码：

```
cell.imageView.image = [UIImage imageNamed:@"test.jpg"]; 
```

向表格视图中的所有单元格显示相同的静态图像。如何使这行代码类似于前两行代码，以便从 JSON 文件中获取图像链接并将图像显示为缩略图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:28:24.867

您需要先下载图像。

这个问题在这里被问了大约一千次：

[使用 url 设置 UIImageView 图像](https://stackoverflow.com/questions/4962561/set-uiimageview-image-using-a-url)

[轻松异步图片下载 UIImage 视图](https://stackoverflow.com/questions/10616327/easy-asynchronous-image-download-uiimage-view)

[下载图片，在 UIImageView 中显示，并排序](https://stackoverflow.com/questions/12238470/download-images-display-them-in-uiimageview-and-sort)

[iPhone SDK：在显示第一个视图控制器之前下载并设置 UIImageView](https://stackoverflow.com/questions/8402669/iphone-sdk-download-and-set-uiimageview-before-first-view-controller-is-display)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:29:12.463

```
 cell.imageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[news objectAtIndex:indexPath.row] objectForKey:@"URLOfYourImage"]]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:15:54.943

如果您使用[此类别](https://github.com/rs/SDWebImage/blob/master/SDWebImage/UIImageView+WebCache.h)，则可以使用一行代码来完成。

```
[cell.imageViewPhoto setImageWithURL:[NSURL URLWithString:@"www.so.com/image.png"] placeholderImage:[UIImage imageNamed:@"placeholder.gif"]]; 
```

此外，此类别为您提供延迟加载和缓存功能，我认为这对您的需求很重要。我在我的项目中经常使用它。

# sql - 如何使用 DISTINCT 子句在 sql 中求和

> ID：15953925
> 
> 赞同：1
> 
> 时间：2013-04-11T16:20:05.227
> 
> 标签：sql, sum, distinct, sql-server-2012

在以下示例[SQL Fiddle](http://sqlfiddle.com/#!6/7b36f/17)

我应该如何继续获取每个“电话”的累积价格而不是获取最后一个值？

在下面给出的示例中，我需要生成下表：

```
Phone   Price   Purchases
50       35         3
51       50         2
52       99         3
55       21         2
53       16         2
54       21         1
56       16         1
58       22         1
57       10         2 
```

这将在 SQL-Server 2012 中完成

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:38:16.343

您应该能够使用以下内容：

```
select c1.phone,
  c2.TotalPrice,
  c1.purchases
from supportContacts c1
inner join
(
  select 
    max(Fecha) maxFecha,
    sum(price) TotalPrice, 
    phone
  from supportContacts
  group by phone
) c2
  on c1.phone = c2.phone
  and c1.Fecha  = c2.maxFecha
order by c1.phone; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!6/7b36f/71)。

子查询获取每个电话的总和以及与电话关联的最大 fecha。`phone`然后，您使用它并在 the和 the上加入您的表`fecha`以获得结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:27:40.793

我手边没有 SQL Server 2012，但试一试：

```
 select     
    phone,     
    purchases,
    price, 
    sum(price) over (partition by phone order by phone, price) as running_sum_purchases
 FROM 
    supportContacts 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:29:16.130

不就是...

```
SELECT Phone, Sum(Price), Count(Purchases)
FROM  supportContacts
GROUP BY Phone
ORDER BY 1 
```

..还是我错过了什么？ [http://sqlfiddle.com/#!6/7b36f/41](http://sqlfiddle.com/#!6/7b36f/41)

50 35 3
51 50 4
52 99 3
53 16 2
54 21 2
55 21 1
56 16 1
57 10 1
58 22 2

如果您需要每个电话的更多详细信息，可以添加子查询：

```
SELECT
  Phone,
  Sum(Price) as Total,
  Count(Purchases) as Purchase_Count,
  (SELECT TOP 1 Price
   FROM supportContacts sc2
   WHERE sc2.phone=sc1.phone
   ORDER BY fecha DESC
  ) as Most_Recent
FROM supportContacts sc1
GROUP BY Phone
ORDER BY Phone 
```

或者，对于我最终解决的实际要求:)

```
SELECT
  Phone,
  Sum(Price) as Total,
  Count(Purchases) as Purchase_Count,
  (SELECT Purchases
   FROM supportContacts sc2
   WHERE sc2.phone=sc1.phone
   AND sc2.Fecha=
     (SELECT Max(Fecha)
      FROM supportContacts sc3
      WHERE sc3.phone=sc1.phone
     )
  ) as Last_Purchase
FROM supportContacts sc1
GROUP BY Phone
ORDER BY Phone 
```

..这开始变得相当笨拙，可能有优化的可能，但我失去了玩的意愿......哈哈

但是感谢您尝试以这种方式进行的大脑锻炼:)

**编辑**
如果是我，我可能会这样做......
[http://sqlfiddle.com/#!6/7b36f/98](http://sqlfiddle.com/#!6/7b36f/98)

```
With PhoneGroup as
( SELECT
    Phone,
    Sum(Price) as Total_Price,
    Max(Fecha) as Last_Fecha
  FROM supportContacts
  GROUP BY Phone
)
SELECT
  Phone, Total_Price,
 (SELECT Purchases
  FROM supportContacts sc2
  WHERE sc2.phone=PhoneGroup.phone
    AND sc2.Fecha=PhoneGroup.Last_Fecha
 ) as Last_Purchase
FROM PhoneGroup
ORDER BY Phone 
```

# javascript - 当前不会命中断点。已调试进程加载了不同版本的脚本文件

> ID：15953930
> 
> 赞同：33
> 
> 时间：2013-04-11T16:20:31.723
> 
> 标签：javascript, visual-studio-2012

我在使用 JavaScript 的 VS 2012 中有奇怪的行为，就好像它正在缓存旧版本一样。调试时似乎没有加载对 .js 文件所做的最新更改。断点建议

“当前不会命中断点。调试进程已加载了此脚本文件的不同版本。可能需要重新加载脚本文件。”

有没有办法清除它，以便我可以随时使用最新的更改？这只是最近才开始发生（可能是因为 VS 2012 更新 2？？？），我已经使用 2012 几个月了，从来没有遇到过这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-22T17:50:36.233

所以看起来 JavaScript 文件被缓存在 IE 中。解决方案是转到 IE > Internet 选项 > 设置（在浏览历史记录下）> 检查存储页面的新版本：每次访问网页时。现在，每次我构建/运行调试器时，都会加载最新的 JavaScript 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-23T08:59:20.733

1.  转到IE>工具> Internet选项>高级选项卡>

2.  取消选中“禁用脚本调试”选项

# javascript - 在带有滑块的jquery中用逗号将数字格式化为货币

> ID：15953934
> 
> 赞同：1
> 
> 时间：2013-04-11T16:20:52.603
> 
> 标签：javascript, jquery

我正在尝试将输出格式设置为 1,023,456.50 也用于 ui.values[0] 但它显示 NaN。有任何想法吗？

[http://jqueryui.com/slider/#range](http://jqueryui.com/slider/#range)

```
$(function() {
        $( "#slider-range" ).slider({
              animate: true,
            range: true,
            min: 0,
            max: 10000000,
            step: 10000,
            values: [ 2000, 8888888 ],
            slide: function( event, ui ) {
                $( "#price-range" ).val( + ui.values[ 0 ].toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") + " - " + ui.values[ 1 ].toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") );

            }
        });
        $( "#price-range" ).val( + $( "#slider-range" ).slider( "values", 0 ).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") +
            " - " + $( "#slider-range" ).slider( "values", 1 ).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") );
    }); 
```

对于原始代码，请参见：[在此处输入链接描述](http://jqueryui.com/slider/#range)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:32:55.273

您的代码工作正常，但存在语法错误。

```
$( "#price-range" ).val( + 
```

注意**+**号。您在输出的文本中还缺少一些**$ 。**

修复错误的示例：http: [//jsfiddle.net/Dq9cP/](http://jsfiddle.net/Dq9cP/)

# windows - PowerShell v1 脚本提示输入密码

> ID：15953943
> 
> 赞同：0
> 
> 时间：2013-04-11T16:21:38.530
> 
> 标签：windows, powershell

我正在尝试将远程服务器身份验证添加到 PS1 批处理文件脚本。

所以我可以这样做：

```
Copy-Item  $src $destination -Credential $Creds 
```

我创建了一个密码文件，目前该文件与脚本位于同一目录中。它只包含密码字符串。

导致提示的行：

```
 Read-Host -AsSecureString | ConvertFrom-SecureString | Out-File password.txt 
```

当我删除 Read-Host 命令时，提示消失并且脚本按预期执行。

**问题** 进行远程服务器身份验证的正确方法是什么？

**这是脚本上下文中的新代码：**

```
[...]

  if(-not(Test-Path $destination)){mkdir $destination | out-null}

  Read-Host -AsSecureString | ConvertFrom-SecureString | Out-File password.txt
  $PW = Get-Content password.txt | ConvertTo-Securestring
  $Creds = New-Object -Typename System.Management.Automation.PSCredential -Argumentlist "SERVER02\Administrator",$PW

ForEach ($sourcefile In $(Get-ChildItem $source | Where-Object { $_.Name -match "Daily_Reviews\[\d{1,12}-\d{1,12}\].journal" }))
{ 

      [...]

      Copy-Item  $src $destination -Credential $Creds

      [...]

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:19:00.007

如果您不担心密码文件在机器之间的可移植性，您可以使用这种相当安全的方法：

```
# Capture once and store to file - DON'T PUT THIS PART IN YOUR SCRIPT
$passwd = Read-Host "Enter password" -AsSecureString
$encpwd = ConvertFrom-SecureString $passwd
$encpwd
$encpwd > $path\password.bin

# Later pull this in and restore to a secure string
$encpwd = Get-Content $path\password.bin
$passwd = ConvertTo-SecureString $encpwd

$cred = new-object System.Management.Automation.PSCredential 'john',$passwd
$cred

# NOTE: The "secret" required to rehyrdate correctly is stored in DPAPI - consequence:
#       You can only rehydrate on the same machine that did the ConvertFrom-SecureString 
```

如果您需要调试它以查看 $passwd 是否正确，您可以在调试时执行此操作：

```
$bstr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($passwd)
$str =  [System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($bstr)
[System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($bstr)
$str 
```

# c++ - #pragma 警告 - 特定于文件？

> ID：15953948
> 
> 赞同：2
> 
> 时间：2013-04-11T16:22:15.730
> 
> 标签：c++, c, c-preprocessor, pragma, preprocessor-directive

简单的问题，但我似乎无法在任何参考资料中找到答案。

如果我有 #pragma warning() 指令，编译器是否只为当前文件定义它？或者它是通过我项目中其他文件中的#includes 传播的吗？

这可能是一个更广泛的问题，不一定特定于#pragma，但这是我特别担心的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T16:27:15.833

如果将指令放在标头中，它将影响包含该标头的任何其他文件。它还会影响您使用后包含的任何标题。如果您担心使用它会影响其他文件，您可以使用`#pragma warning (push)`并`#pragma warning (pop)`撤消您只想在本地对一个文件进行的任何更改。

# ruby-on-rails - suryveyor gem 如何以 pdf 格式输出调查？

> ID：15953951
> 
> 赞同：0
> 
> 时间：2013-04-11T16:22:20.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, surveyor-gem

[我在网页http://nubic.github.io/surveyor/](http://nubic.github.io/surveyor/)中阅读了有关测量员宝石的信息

我在哪里放置此行以将调查报告导出为 pdf？

`%li= link_to "PDF", view_my_survey_path(:survey_code => response_set.survey.access_code, :response_set_code => response_set.access_code, :format => 'pdf')`

我不明白请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:56:24.643

从您提供的网站的外观来看，您应该已经生成了`surveyor:custom`控制器。然后它会告诉您安装以下两个 gem

```
 gem 'pdfkit'
  gem 'wkhtmltopdf' 
```

但就我个人而言，我更喜欢`wicked_pdf`在我看来使用。所以稍微改变一下教程，我会做以下事情：

```
rails generate surveyor:custom 
```

这将生成控制器。因此，我们稍后可以使用`wicked_pdf`将为我们提供的选项来配置它。

将以下行添加到您的 Gemfile：

```
 gem 'wicked_pdf'  #https://github.com/mileszs/wicked_pdf
    gem 'wkhtmltopdf' #https://code.google.com/p/wkhtmltopdf/ 
```

为了`wicked_pdf`正确导出，您需要在`surveyor controller`为您生成的操作中包含类似的内容。因此`index`，您的surveyor_controller.rb 操作中可能会有类似的内容

```
respond_to do |format|
      format.html
      format.pdf do
        render :pdf => "Survey Report",
               :header => {:html => {:template => 'layouts/pdf.html.erb'}}

      end
    end 
```

从这个响应块你可以/我认为有以下目录`views`-`app/views/survey/index.html.erb`在里面`index.html.erb`你会在里面有你上面的链接。

```
<%= link_to "PDF", view_my_survey_path(:survey_code => 
response_set.survey.access_code, :response_set_code => 
                     response_set.access_code, :format => 'pdf') %> 
```

我以前从未使用过测量师宝石。但是根据您提供的内容以及您想要的内容，我已尽力提供尽可能详细的解释。希望这可能对您或其他任何人有所帮助

**Wicked_PDF 使用示例**

```
 def index 
    @bookings= Booking.scoped
    booking = @bookings
    @user = current_user

    if params[:format] == 'pdf'
      @bookings= @bookings.where(:day => Date.today.beginning_of_month..Date.today.end_of_month)
    end

    respond_to do |format|
      format.html
      format.pdf do
        render :pdf => "#{Date.today.strftime('%B')} Overtime Report",
               :header => {:html => {:template => 'layouts/pdf.html.erb'}}
        OvertimeMailer.overtime_pdf(@user, booking).deliver
      end
    end
  end 
```

**查看.html.erb**

```
<%= Link_to "Overtime", "booking.png",  bookings(:format => "pdf") %> 
```

为了生成 PDF，您需要创建一个具有以下扩展名的文件，`.pdf.erb`这意味着在处理链接时，它首先处理嵌入的 ruby​​ 代码，然后输出 PDF。所以在这种情况下，我想做预订。所以我确实在我的`views/bookings/index.pdf.erb`内部创建了以下内容：

**意见/预订/index.pdf.erb**

```
<br />
<% @bookings.each do |booking| %>

<p>
  <b>Employee</b>
  <%= booking.user.try (:full_name)%>
</p>

<p>
  <b>Hospital</b>
  <%= booking.hospital.try(:name)%>
</p>

<p>
  <b>Day</b>
  <%= booking.day.to_s(:long_ordinal) %>
</p>

<p>
  <b>Overtime</b>
  <%= booking.overtime %>
</p>
    <br />
 <% end %>

<h2>Total Overtime is <b><%=@bookings.to_a.sum(&:overtime)%></b></h2> 
```

这应该给你一些核心的理由来解决

# sql - 从 SQL 过程返回字符串到 C#

> ID：15953966
> 
> 赞同：0
> 
> 时间：2013-04-11T16:22:56.850
> 
> 标签：sql, sql-server, string, procedure

我有一个这样的 SQL 创建过程查询

```
 USE KOST
    GO
    --Cabang means Branch in Bahasa.

CREATE PROCEDURE login_pro
        --received parameter
        @NoIDStaff VARCHAR(5),
        @Password VARCHAR (50)

    AS

    --sent parameter
    DECLARE @status INT
    DECLARE @IDCabang VARCHAR(5)

    --owner login
    IF EXISTS(SELECT IDCabang, [Password]
                FROM MsStaff 
                WHERE @NoIDStaff=NoIDStaff AND @Password=[Password]
                AND NoIDStaff LIKE('B%'))
            SET @status=1

    --staff login
    ELSE IF EXISTS(SELECT IDCabang, [Password]
                FROM MsStaff 
                WHERE @NoIDStaff=NoIDStaff AND @Password=[Password]
                AND NoIDStaff LIKE('A%'))
            BEGIN
            SELECT @IDCabang=IDCabang FROM MsStaff
            SET @status=2
            SET @IDCabang = (select IDCabang FROM Msstaff where @NoIDStaff=NoIDStaff AND @Password=[Password]
                AND NoIDStaff LIKE('A%'))
            END

    --neither of them login
    ELSE
            set @status=0

    select @status, @IDCabang
    GO 
```

查询返回状态值，但不返回 IDCabang。我应该怎么做才能返回 IDCabang 的值？

这是我的 C# 代码：

```
 private void submit_Click(object sender, EventArgs e)
    {
        NoIDStaff = new SqlParameter();
        Password = new SqlParameter();
        SqlConnection con = new SqlConnection(strCon);

        com = new SqlCommand();
        com.Connection = con;
        con.Open();

        com.CommandType = CommandType.StoredProcedure;
        com.CommandText = "login_pro";

        NoIDStaff.SqlDbType = SqlDbType.VarChar;
        NoIDStaff.Size = 50;
        NoIDStaff.ParameterName = "@NoIDStaff";
        NoIDStaff.Value = username.Text.ToString();
        NoIDStaff.Direction = ParameterDirection.Input;

        Password.SqlDbType = SqlDbType.VarChar;
        Password.Size = 50;
        Password.ParameterName = "@Password";
        Password.Value = password.Text.ToString();
        Password.Direction = ParameterDirection.Input;

        com.Parameters.Add(NoIDStaff);
        com.Parameters.Add(Password);

        int status;
        string IDCabang;
        status = Convert.ToInt16(com.ExecuteScalar());
        IDCabang = Convert.ToString(com.ExecuteScalar());

        //owner login
        if (status == 1)
        {
            this.Hide();
            frm = new Form2();
            frm.Show();
        }

        //staff login
        else if (status == 2)
        {
            this.Hide();
            frm4 = new Form4(IDCabang);
            frm4.Show();
        }

        else if (username.Text.Equals(""))
        {
            MessageBox.Show("Username Must be Filled!", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }

        else if (password.Text.Equals(""))
        {
            MessageBox.Show("Password Must be Filled!", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }

        else
        {
            MessageBox.Show("Invalid Username or Password", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }

        con.Close();
    } 
```

我想接收 IDCabang 作为字符串，所以我可以将它发送到 Form4。但看起来，IDCabang 没有返回任何值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:17:59.820

试试这个

```
SqlDataReader reader = com.ExecuteReader();

while (reader.Read())
{
  status = reader["Status"] == DBNull.Value ? 0 : (int)reader["Status"];
  IDCabang = reader["IDCabang"] == DBNull.Value ? null : (string)reader["IDCabang"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:31:08.627

你试过这样吗：

```
 USE KOST
    GO
    --Cabang means Branch in Bahasa.

CREATE PROCEDURE login_pro(@IDCabang VARCHAR(5))
        --received parameter
        @NoIDStaff VARCHAR(5),
        @Password VARCHAR (50)

    AS

    --sent parameter
    DECLARE @status INT

    --owner login
    IF EXISTS(SELECT IDCabang, [Password]
                FROM MsStaff 
                WHERE @NoIDStaff=NoIDStaff AND @Password=[Password]
                AND NoIDStaff LIKE('B%'))
            SET @status=1

    --staff login
    ELSE IF EXISTS(SELECT IDCabang, [Password]
                FROM MsStaff 
                WHERE @NoIDStaff=NoIDStaff AND @Password=[Password]
                AND NoIDStaff LIKE('A%'))
            BEGIN
            SELECT @IDCabang=IDCabang FROM MsStaff
            SET @status=2
            SET @IDCabang = (select IDCabang FROM Msstaff where @NoIDStaff=NoIDStaff AND @Password=[Password]
                AND NoIDStaff LIKE('A%'))
            END

    --neither of them login
    ELSE
            set @status=0

    select @status, @IDCabang
    GO 
```

也看[这个](http://www.sqlteam.com/article/stored-procedures-returning-data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:13:48.073

您正在使用 ExecuteScalar，它只会查看返回集的第一行和第一列：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar .aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

您真的想使用 ExecuteReader 或类似的东西。此外，我会在您的选择中为您的变量设置别名，以便您在查找它们时可以更轻松地引用它们（即，`SELECT @status as Status, @IDCabang as IDCabang`）。

```
SqlDataReader reader = com.ExecuteReader();

while (reader.Read())
{
  status = reader["Status"] == DBNull.Value ? 0 : (int)reader["Status"];
  IDCabang = reader["IDCabang"] == DBNull.Value ? null : (string)reader["IDCabang"];
} 
```

编辑：参考 Aaron Bertrand 的评论，您还可以在存储的过程中设置一个输出参数并阅读它。这里有更多关于如何做到这一点的详细信息：[Get output parameter value in ADO.NET](https://stackoverflow.com/questions/290652/get-output-parameter-value-in-ado-net)

# c# - c# smalldate 传递给 sql server proc

> ID：15953967
> 
> 赞同：0
> 
> 时间：2013-04-11T16:22:57.737
> 
> 标签：c#

我正在尝试将日期传递给 sql 过程，正在传递时间，并导致 proc 失败，因为时间不匹配，c# 正在传递日期 12:00:00 数据库显示日期 00:00:00

所以这是我的代码

```
public class
datetime dt_value; 
```

从 javascript 日历中获取日期

```
DT_Value = Convert.ToDateTime(Request.Form["TextBox_Tracking_ImportDate"]); 
```

尝试转换为 mm/dd/yyyy

```
string DT_Value2 = DT_Value.ToString("ddMMyyyy"); 
```

将日期传递给 sql

```
cmd.Parameters.Add(new SqlParameter("@import_date", DT_Value2));

ERROR: Error converting data type nvarchar to smalldatetime. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:24:43.743

直接通过就好了`DateTime`。。

```
cmd.Parameters.AddWithValue("@import_date", DT_Value); 
```

请参阅[SQL Server 数据类型映射](http://msdn.microsoft.com/en-us/library/cc716729.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:25:48.023

这是第一个问题：

```
string DT_Value2 = DT_Value.ToString("ddMMyyyy");
cmd.Parameters.Add(new SqlParameter("@import_date", DT_Value2)); 
```

您正在执行毫无意义的字符串转换，因此您正在破坏数据。只是不要这样做。*始终*尽可能避免字符串转换。

直接通过`DateTime`：

```
cmd.Parameters.Add(new SqlParameter("@import_date", DT_Value)); 
```

或者更好的是，明确指定类型：

```
cmd.Parameters.Add("@import_date", SqlDbType.Date).Value = DT_Value; 
```

或者仅从以下内容中明确获取日期部分`DateTime`：

```
cmd.Parameters.Add("@import_date", SqlDbType.Date).Value = DT_Value.Date; 
```

但老实说，如果您的 SQL 代码实际上知道参数是 a`Date`而不是 a `DateTime`，那么甚至不应该有时间部分的*概念*。如果您可以发布您的 SQL，那将有助于我们诊断该方面。确定要使用的正确类型非常重要——它让生活变得如此简单。

# forms - 自定义布局到 sfWidgetFormDoctrineChoice

> ID：15953970
> 
> 赞同：2
> 
> 时间：2013-04-11T16:23:01.703
> 
> 标签：forms, doctrine, symfony-1.4, symfony-forms, doctrine-query

我正在使用 Symfony 1.4 sfWidgetFormDoctrineChoice

我已将复选框添加到表单中，从而成功提取模型数据。我想要做的还包括复选框旁边的缩略图以及标题。

```
$this->setWidget('bulkUploadVideos', new sfWidgetFormDoctrineChoice(array(
    'model' => 'MediaAsset',
    'query' => Doctrine_Query::create()->select('u.url')->from('MediaAsset u')->orderBy('id DESC'),
    'add_empty' => false,
    'multiple' => true,
    'expanded' => true
   )
)); 
```

这非常棒地将查询拉入到这样排列的复选框列表中：

⧠ 绿牛仔裤

⧠ 马古先生

⧠ 下垂

在 Media Assets 表中，我还有一个要包含在布局中的图像 url。所以它看起来像这样：

|-img 缩略图-| ⧠ 绿牛仔裤

|-img 缩略图-| ⧠ 马古先生

|-img 缩略图-| ⧠ 下垂

我想也许可以使用格式化程序类，但我没有看到表单有任何变化。

**lib/form/formatters/sfWidgetFormSchemaFormatterAllVideos.class.php**

```
<?php 
class sfWidgetFormSchemaFormatterAllVideos extends sfWidgetFormSchemaFormatter {
  protected
    $rowFormat       = "<span class=\"my-label-class\">%label%</span>\n  <span>%error%%field%%help%%hidden_fields%</span>`n",
    $errorRowFormat  = "<span class=\"my-error-class\" colspan=\"2\">\n%errors%</span>\n",
    $helpFormat      = '<br />%help%',
    $decoratorFormat = "<div class='custom-video-layout'>\n  %content%</div>";
} 
```

然后我把它放在我的 MediaAssetsForm.class.php 的底部

```
public function configure() {
    parent::configure();
...
..
...
$this->getWidgetSchema()->setFormFormatterName('AllVideos'); 
```

唉，页面布局看起来完全一样。我是否错误地调用了格式化程序，或者有更简单的方法吗？

顺便说一句，仍然没有回答我如何将表格中的图像 url 查询到每个复选框的输出中的问题。这是我想解决的主要问题。表单中每条记录的缩略图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:22:59.010

格式化程序用于渲染整个表单，您需要更改其中一个小部件的渲染。

`sfwidgetFormDoctrineChoice`有一个`renderer`将格式化程序作为参数的选项。您需要的是`sfWidgetFormSelectCheckbox`. 我会做的是：

1.  创建您自己的类，该类将扩展`sfWidgetFormSelectCheckbox`该类。例如

    ```
    class sfWidgetFormMySelectWithThumbs extends sfWidgetFormSelectCheckbox {
    } 
    ```

2.  扩展该`configure`功能，使其采用另一个选项，该选项将保存您的缩略图数组。

    ```
    public function configure($options = array(), $arguments = array()) {
        parent::configure($options, $arguments);

        $this->addOption('thumbnails', array());
    } 
    ```

3.  更改`formatChoices`功能，使其在复选框前面添加图像（您可以复制和修改原始`formatChoices`功能）。

    ```
    ...
    $sources = $this->getOption('thumbnails');
    ...

    $inputs[$id] = array(
        'input' => sprintf('| %s | %s',
            $this->renderTag('img', array('src' => $sources[$key])),
            $this->renderTag('input', array_merge($baseAttributes, $attributes))
        ),
        'label' => $this->renderContentTag('label', self::escapeOnce($option), array('for' => $id)),
    ); 
    ```

4.  在您的小部件中使用格式化程序类：

    ```
     $this->setWidget('bulkUploadVideos', new sfWidgetFormDoctrineChoice(array(
        ...
        'renderer' => new sfWidgetFormMySelectWithThumbs(array('thumbnails' => $thumbanils))
        )
    )); 
    ```

    当然，您需要将缩略图列表作为数组检索，其中数组键与用于复选框值的 id 相同，但这应该不是问题。

# jmx - JConsole MBeans 选项卡在左侧树中没有“com.sun.management”节点

> ID：15953972
> 
> 赞同：0
> 
> 时间：2013-04-11T16:23:05.747
> 
> 标签：jmx, jconsole

我的环境是 Windown 7 上的 JBoss 5.1 (Jdk 1.5.x)

我已经从 JDK 1.6 bin 文件夹启动了 JC​​onsole，它拾取了在 JBoss 应用程序之上运行的本地。要按照[jconsole docs](http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html)中所述进行堆转储，但是，在 MBeans 选项卡中，我没有在树中看到“com.sun.management”节点。

我在 jboss 运行 bat 文件中提到了以下 JAVA_OPTS：

```
-Dcom.sun.management.jmxremote.port=1234
-Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.ssl=false 
```

# playframework - 子项目中的资产路由

> ID：15953976
> 
> 赞同：1
> 
> 时间：2013-04-11T16:23:12.687
> 
> 标签：playframework, playframework-2.1

我正在尝试使用播放框架创建一个管理子项目。在管理员调用`http://localhost:9000/admin/index`中，我无法访问管理员视图，资产存在问题。无法弄清楚出了什么问题：

```
val appDependencies = Seq(
// Add your project dependencies here,
javaCore,
javaJdbc,
javaEbean)

  // admin module
  val admin = play.Project(appName + "-admin", appVersion, appDependencies, path = file("modules/admin"))

  val main = play.Project(appName, appVersion, appDependencies, path = file(".")).settings( 
  // Add your own project settings here      
  ).dependsOn(admin).aggregate(admin) 
```

项目结构如下所示：

```
.
|-app
|---controllers
|---views
|-conf
|-logs
|-modules
|---admin
|-----app
|-------controllers
|---------admin
|-------views
|---------admin
|-----conf
|-----public
|-----test
|-project
|-public
|---images
|---javascripts
|---stylesheets
|-test 
```

配置/路由

```
 GET     /                           controllers.Application.index()

    ->  /admin admin.Routes

    # Map static resources from the /public folder to the /assets URL path
    GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

/modules/admin/conf/admin.routes

```
 GET     /index                           controllers.admin.Application.index()

    # Map static resources from the /public folder to the /assets URL path
    #GET     /assets/*file               controllers.admin.Assets.at(path="/public", file)
    GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

在这里`admin.routes`它不适用于此：`GET /assets/*file controllers.admin.Assets.at(path="/public", file)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:02:08.400

实际上`GET /assets/*file controllers.admin.Assets.at(path="/public", file)`in admin 不是必需的，也不是`/assets/*file controllers.Assets.at(path="/public", file)`在 admin 中。

但是这些观点需要被称为不同的。例如viewsadmin（views/admin/不起作用）

# python - 向量中元素之间的最小距离

> ID：15953983
> 
> 赞同：3
> 
> 时间：2013-04-11T16:23:48.627
> 
> 标签：python, numpy

我需要数组元素之间的最小距离。

我做了：

```
numpy.min(numpy.ediff1d(numpy.sort(x))) 
```

有没有更好/更高效/更优雅/更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:18:20.330

如果您追求绝对速度，这里有一些时间安排：

```
In [13]: a = np.random.rand(1000)

In [14]: %timeit np.sort(a)
10000 loops, best of 3: 31.9 us per loop

In [15]: %timeit np.ediff1d(a)
100000 loops, best of 3: 15.2 us per loop

In [16]: %timeit np.diff(a)
100000 loops, best of 3: 7.76 us per loop

In [17]: %timeit np.min(a)
100000 loops, best of 3: 3.19 us per loop

In [18]: %timeit np.unique(a)
10000 loops, best of 3: 53.8 us per loop 
```

的时间`unique`是希望它与 相当快，并且如果唯一数组的长度比数组本身短（因为这意味着你的答案是）`sort`，你可以在没有调用的情况下提前爆发。但是，开销大于任何收益。`diff``min``0``unique`

所以看来我能提供的唯一潜在改进是替换`ediff1d`为`diff`：

```
In [19]: %timeit np.min(np.diff(np.sort(a)))
10000 loops, best of 3: 47.7 us per loop

In [20]: %timeit np.min(np.ediff1d(np.sort(a)))
10000 loops, best of 3: 57.1 us per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:26:07.780

您当前的方法绝对是最佳的。通过首先排序，您可以减少每个元素之间的空间，`ediff1d`并将返回一个差异数组。这里有一个建议：

因为我们知道差值必须是正的，因为我们有一个升序排序，所以我们可以`ediff1d`手动实现并在差值为零的地方包含一个中断。这样，如果你有排序数组`x`：

`[1, 1, 2, 3, 4, 5, 6, 7, ... , n]`

您的函数不是通过 n 个元素，而是`ediff1d`提前中断并仅覆盖前两个元素，返回`[0]`. `min`这也减少了差异数组的大小，减少了调用所需的迭代量。

这是一个不使用 numpy 的示例：

```
x = [1, 12, 3, 8, 4, 1, 4, 9, 1, 29, 210, 313, 12]

def ediff1d_custom(x):
    darr = []

    for i in xrange(len(x)):
        if i != len(x) - 1:
            diff = x[i + 1] - x[i]
            darr.append(diff)

            if diff == 0:
                break

    return darr

print min(ediff1d_custom(sorted(x))) # prints 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:08:14.083

```
try:
    min(x[i+1]-x[i] for i in xrange(0, len(x)-1))
except ValueError:
    print 'Array contains less than two values.' 
```

# javascript - 输入字段为空时阻止表单提交

> ID：15953988
> 
> 赞同：21
> 
> 时间：2013-04-11T16:24:10.380
> 
> 标签：javascript, html, forms

当没有为`roll`输入字段提供值时，函数会生成警报，`empty()`但此空值仍会传递给`retrive.php`. 那么我怎样才能阻止这种情况的发生，并且只将值传递给`retrive.php`提供某些输入值时呢？

```
<html>
 <head>
   <title>STUDENT FORM</title>
    <script type="text/javascript">
        function empty()
        {
          var x;
          x = document.getElementById("roll-input").value;
          if (x == "") 
           { 
              alert("Enter a Valid Roll Number");
           };
        }
    </script>
</head>
 <body >
  <h1 align="center">student details</h1>       
    <div id="input">
      <form action='retrive.php' method='get'>
       <fieldset>
        <legend>Get Details</legend>
          <dl>
            <dt><label for="roll-input">Enter Roll Number</label></dt>
        <dd><input type="text" name="roll" id="roll-input"><dd>
            <input type="submit" value="submit" onClick="empty()" />
          </dl>
        </fieldset>
      </form>
    </div>  
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-11T16:26:27.730

您需要返回 false 以取消提交。

```
function empty() {
    var x;
    x = document.getElementById("roll-input").value;
    if (x == "") {
        alert("Enter a Valid Roll Number");
        return false;
    };
} 
```

和

```
<input type="submit" value="submit" onClick="return empty()" /> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/FDPmn/)**

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-04-19T14:33:52.757

使用 required 属性怎么样？

```
<input id="Name" name="Name" class="form-control" placeholder="Enter name" type="text" required/> 
```

仅适用于 html5。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-03-21T22:05:27.960

最简单的方法是将属性“required”添加到输入标签中

```
<input type="text" name="name" required> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-09T20:04:05.193

```
<form method="post" name="loginForm" id ="loginForm" action="login.php">
<input type="text" name="uid" id="uid" />
<input type="password" name="pass"  id="pass" />
<input type="submit" class="button" value="Log In"/>
<script type="text/javascript">

$('#loginForm').submit(function() 
{
    if ($.trim($("#uid").val()) === "" || $.trim($("#pass").val()) === "") {
        alert('Please enter Username and Password.');
    return false;
    }
});

</script>
</form> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-08T08:55:57.633

我用这个我认为它可能会有所帮助

```
 $(function () {
        $('form').submit(function () {
            if ($('input').val() === "") {
                alert('Please enter Username and Password.');
                return false;
            }
        });
    }) 
```

或像这样使用类或 ID

```
$('.inputClass')
$('#inputID') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-23T08:51:00.203

如果你想保存代码，你可以简单地做：

```
<input type="text" name="roll" id="roll-input">
<input type="submit" value="submit" onClick="return document.getElementById('roll-input').value !=''"/> 
```

我只是说。

# awk - 使用 awk 打印除匹配范围模式外的所有内容

> ID：15953994
> 
> 赞同：5
> 
> 时间：2013-04-11T16:24:34.420
> 
> 标签：awk, range, design-patterns

在 awk 中，范围模式不是表达式，因此不能使用“！” 不是它。那么如何实现它（使用 awk 打印除匹配范围模式之外的所有内容）？

例如

$猫 1.t

```
abd
hfdh
#  
fafa
deafa
123 
#
end 
```

我想要的结果：

猫 1.t

```
abd
hfdh
end 
```

# 编辑：

我举了一个不恰当的例子。endpattern 应该与 startpattern 不同，因为我还没有对此进行测试。那是我的错。

同时，我想以不同的方式操作范围模式和非范围模式。所以 sed 不是我的选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T17:26:53.227

你只是给出了一个**棘手**的（我不知道我应该称之为好还是坏^_^）的例子。`startpattern`您的文字与`endpattern`( `#`)完全相同

我猜你正在寻找与`sed '/#/,/#/d'`或相同的方式`sed -n '/#/,/#/!p'`

awk 中有一些**类似**（与 sed 不同）的地址模型。在手册页中有解释。我说不一样，你的例子很好。如果`start == end`awk 的地址模型不起作用：

```
kent$  echo "abd
hfdh
#  
fafa
deafa
123 
#
end"|awk '/#/,/#/{next}1'                                                                                                                                                   
abd
hfdh
fafa
deafa
123 
end 
```

因为 awk 匹配同一行（再次检查手册页），但如果它们不同，请参见以下示例：

```
kent$  echo "abd
hfdh
#  
fafa
deafa
123 
##
end"|awk '/#/,/##/{next}1'
abd
hfdh
end 
```

它会给你想要的。所以如果是这种情况，你可以这样做：

```
awk '/start/,/end/{next}1' 
```

是的，与 sed 的非常相似。

如果 start 和 end 真的相同，你想用 awk 来做，你需要 flag。

```
kent$  echo "abd
hfdh
#  
fafa
deafa
123 
#
end"|awk '/#/&&!f{f=1;next}f&&/#/{f=0;next}!f'
abd
hfdh
end 
```

好吧，例如更好地使用`^#$`，但这不是重点。我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:39:41.410

sed 是替代品吗？

```
$ sed '/#/,/#/d' input
abd
hfdh
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:56:17.513

如果你真的需要使用`awk`，这样的事情应该可以工作：

```
awk 'BEGIN{x=1} /startpattern/{x=0} /endpattern/{x=1;next} x{print}' 
```

尽管`sed`替代方案可能是一种更简单的方法（至少打字更少）。

编辑：@Kent 指出你有相同的开始和结束模式，这使得它有点棘手，但这应该工作：

```
awk 'BEGIN{x=1} /pattern/{x=!x;next} x{print}' 
```

基本上`x`每次看到模式时都会切换，并且仅在`x!=0`. 当`next`它重新打开打印时，那里避免打印图案。

# frameworks - VS 2012 上的实体框架入门工具包

> ID：15953999
> 
> 赞同：1
> 
> 时间：2013-04-11T16:24:53.777
> 
> 标签：frameworks, entity

我已经在 VS 2010 和 2012 上下载并安装了 Entity Designer Starter Kit。我创建了一个项目并自定义了该项目，以允许我（现在）为每个字段值添加三个属性：见下文：（I' d张贴图片，但我才开始在这里张贴，我没有10分）:(

正如您在上面看不到的，扩展正在运行...在 VS 2010 上，但是，我们需要使用 VS 2012 - 所以我们可以在我们的模型中获得对地理字段的新支持，但它似乎不起作用在 VS 2012 中。扩展在两个版本的扩展管理器中都显示为已安装的扩展，但在我们构建新模型或打开现有模型时不起作用（或在 2012 年做任何事情）。:(

我查看了版本信息的清单，它确实在扩展管理器中显示为已安装（在两个版本中）。（见下方清单的一部分——我们使用的是 2012 的专业版）

```
<SupportedProducts>
  <VisualStudio Version="11.0">
    <Edition>VSTS</Edition>
    <Edition>VSTD</Edition>
    <Edition>Pro</Edition>
    <Edition>Express_All</Edition>
  </VisualStudio>
    <VisualStudio Version="10.0">
      <Edition>VSTS</Edition>
      <Edition>VSTD</Edition>
      <Edition>Pro</Edition>
      <Edition>Express_All</Edition>
    </VisualStudio>
</SupportedProducts> 
```

有谁知道为什么它没有在 2012 年运行？

谢谢你的帮助！！！！！！！

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T22:31:38.883

早在 2010 年，我发现 Starter Kit 无法正常工作，可能是因为该版本适用于 VS2010 RC。

所以我重新构建了它，今天，我刚刚将它升级到VS2012。所以你可以从我的博客中得到它。

我所做的只是通过 VS 升级向导运行它，然后将清单更改为 VS2012，它工作正常。也许您可以解释更多“地理领域”，因为我还没有阅读 VS2012 中的任何更改。

[http://www.jsrsoft.co.uk/blog/post/Entity-Framework-Starter-Kit-alternative](http://www.jsrsoft.co.uk/blog/post/Entity-Framework-Starter-Kit-alternative)