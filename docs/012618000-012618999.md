# StackOverflow 问答 12618000-12618999

# android - Android MediaPlayer 停止

> ID：12618002
> 
> 赞同：1
> 
> 时间：2012-09-27T09:17:21.520
> 
> 标签：android, media-player

我有四个 ToggleButtons 的视图，每个按钮在每个状态下播放不同的声音。所以我总共有八个 MediaPlayer 实例。当用户选择一个切换按钮时，将播放声音，具体取决于切换按钮的值。这是我的一个切换按钮的代码。

```
MediaPlayer pos = MediaPlayer.create(Set.this, R.raw.pos)
MediaPlayer neg = MediaPlayer.create(Set.this, R.raw.neg);

private void onPlayer1Clicked() {
    if (((ToggleButton)Player1).isChecked())
     positive();
   else
     negative();
}

private void positive() {
    pos.start();
}

private void negative() {
    neg.start();
} 
```

我卡住的地方是在 MediaPlayer 停止之前按下另一个 ToggleButton 时，MediaPlayer 会播放两种曲调，直到第一个曲调完成。我可以停止按下 ToggleButton 上的 MediaPlayer，但我真的不想为每个按钮都输入它，因为这将是一次 Stop() 的七首曲子。

有谁知道如何用一个简单的命令停止所有 MediaPlayer 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:33:37.640

Use SoundPool . It fit better for this purpose. Check this [link](https://stackoverflow.com/a/10013407/1503155) for details.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:30:32.520

将所有`MediaPlayers`内容放在[Collection](http://developer.android.com/reference/java/util/Collection.html)中。

然后你可以遍历集合并停止它们。

# android - queryForAll() 的 Android ORMlite 性能问题

> ID：12618003
> 
> 赞同：2
> 
> 时间：2012-09-27T09:17:26.667
> 
> 标签：android, ormlite, performance

好吧，就像标题所说的那样，我在使用 ormLite 对 DAO 对象执行 queryForAll 时遇到了一些性能问题（如果需要的话，使用 android）。

我实际上正在做的唯一一件事就是执行这个：

> this.getHelper().getActivityDao().queryForAll(); （其中 this.getHelper() 返回从 OrmLiteSqliteOpenHelper 类扩展的数据库助手）

这条单行实际上需要大约 14 秒才能执行......好吧，“Activity”实体有大约 80 个字段，并且 queryForAll 返回一个长度为 74 个对象的数组，但仍然 - 这不正常，可以吗？

（对于我正在使用的日历字段

> @DatabaseField(dataType = DataType.SERIALIZABLE)

注释，我不确定这是否是日历字段的正确注释，或者它是否会导致性能问题......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:03:53.947

> 这条单行实际上需要大约 14 秒才能执行......好吧，“Activity”实体有大约 80 个字段，并且 queryForAll 返回一个长度为 74 个对象的数组，但仍然 - 这不正常，可以吗？

A`queryForAll()`不应该花费很长时间，除非您可能怀疑，您的表中有*大量*对象——或者每个对象中有大量数据。在那种情况下，`queryForAll()`基本上必须转储整个表并创建大量对象。

对于较大的查询，建议使用迭代器而不是转储整个表：

> [http://ormlite.com/docs/iterator](http://ormlite.com/docs/iterator)

例如，您可以像这样运行查询中的所有对象：

```
// page through all of the accounts in the database
for (Account account : accountDao) {
   // do something with each account here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:09:50.203

你的类是否有你用 ORM 自动刷新的外来对象或集合？我的意思是，例如`foreignAutoRefresh = true`带有注释的成员或带有注释的集合。`@ForeignCollectionField(eager = true)`这些注释将代表您执行更多查询。

如果是这种情况，您可能会无意中撤回比您想象的更多的数据。在这种情况下，我会`queryRaw()`为您需要的数据手动使用和编写一个连接语句。

# mysql - 缓存是否总能提高性能？

> ID：12618016
> 
> 赞同：7
> 
> 时间：2012-09-27T09:18:04.933
> 
> 标签：mysql, performance, caching, webserver, mediawiki

我有许多带有`PHP`and的站点`MySQL`，尤其是运行 MediaWiki，我需要提高性能。但是，我只能使用有限百分比的 CPU。

我能想到的提高性能的最好方法是启用缓存。但是，我很困惑：这真的会提高整体性能还是只是提高速度？

我能想到的是，如果缓存将使用文件，那么将需要更多的处理来获取这些文件的内容。如果会使用SQL表，那么查询这些表也需要更多的处理，也许时间会更短，但CPU使用率会更高。

这是正确的还是不正确的？缓存会消耗更多的 CPU 以提供更快的结果还是提高整体性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:35:34.957

最基本的缓存应该用于存储 CPU 密集型进程的结果。例如，如果您有一个即时创建图像的服务器端图像处理程序（例如缩略图和更大的预览），那么您不希望在每个请求上都发生此操作 - 您希望运行此过程一次并存储结果；然后，每个其他请求都会获得保存的结果。

这显然是对基本缓存的过度简化的描述，在这种情况下使用图像很好，因为您不必担心过时的数据，即实际图像多久更改一次？在您的情况下，数据库有很大不同。**如果您缓存数据，那么如何保证您的真实**数据和**缓存**数据之间不会立即出现不匹配？查询数据库并不总是一项 CPU 密集型任务（当然，您必须考虑数据库在索引、表大小等方面的设计方式），但在大多数情况下，查询设计良好的数据库在磁盘 I/O 上的消耗量远大于磁盘 I/O它在 CPU 周期上。

首先，您需要查看您的数据库设计，其次是您的查询。例如，您[是否正确规范了您的数据库](http://databases.about.com/od/specificproducts/a/normalization.htm)，您的查询是否在您可以归档时搜索大量数据，您是否在非索引字段上加入表，您的 where 子句是否查询可以被索引的字段（`IN`在这些方面特别糟糕例）。

我建议您使用[查询分析器](http://www.mysql.com/products/enterprise/query.html)并花一些时间优化您的表结构和查询以找到瓶颈，然后再进行更剧烈的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:25:06.697

参考：http: [//msdn.microsoft.com/en-us/library/ee817646.aspx](http://msdn.microsoft.com/en-us/library/ee817646.aspx)

性能：缓存技术通常用于通过将相关数据存储在尽可能靠近数据消费者的位置来提高应用程序性能，从而避免重复的数据创建、处理和传输。例如，将不会更改的数据（例如国家/地区列表）存储在缓存中可以通过最小化数据访问操作并消除为每个请求重新创建相同数据的需要来提高性能。

可扩展性：应用程序中的许多用户和流程通常需要相同的数据、业务功能和用户界面片段。如果针对每个请求都处理此信息，那么宝贵的资源将被浪费在重新创建相同的输出中。相反，您可以将结果存储在缓存中，并为每个请求重用它们。这提高了应用程序的可伸缩性，因为随着用户群的增加，这些任务对服务器资源的需求保持不变。例如，在 Web 应用程序中，Web 服务器需要为每个用户请求呈现用户界面。您可以在 ASP.NET 输出缓存中缓存呈现的页面以供将来的请求使用，从而释放资源以用于其他目的。

缓存数据还可以帮助扩展数据库服务器的资源。通过将经常使用的数据存储在缓存中，发出的数据库请求更少，这意味着可以为更多的用户提供服务。

可用性：有时，为您的应用程序提供信息的服务可能不可用。通过将这些数据存储在另一个地方，您的应用程序可能能够在网络延迟、Web 服务问题或硬件故障等系统故障中幸存下来。例如，每次用户从您的数据存储中请求信息时，您都可以返回信息并缓存结果，在每次请求时更新缓存。如果数据存储随后变得不可用，您仍然可以使用缓存的数据为请求提供服务，直到数据存储重新联机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:24:20.690

你需要分析你的外表并找出瓶颈发生在哪里。缓存是最好的页面加载类型，它根本不会影响服务器。您可以构建一个非常简单的缓存系统，该系统仅每 15 分钟重新加载一次信息。因此，如果页面在最后 15 分钟内被缓存，它会给他们一个预渲染页面。页面加载一次，它会创建一个临时文件。每 15 分钟创建一个新页面（如果有人加载该页面）。

缓存只存储服务器已经完成工作的文件。创建文件的工作已经完成，您只需存储它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:39:36.977

您使用术语“性能”和“速度”。我假设“性能”与您的 Web 服务器上的 CPU 周期有关，而“速度”与向用户提供页面所需的时间有关。您希望最大化 Web 服务器的“性能”（通过降低提供页面所需的 CPU 周期总数）同时最大化“速度”（降低提供网页所需的时间）。

对您来说好消息是缓存可以同时改善这两个指标。通过缓存内容，您可以创建一个存储在缓存中的输出页面，并且可以直接重复地提供给用户，而无需重新执行最初创建此输出页面的 PHP 代码（从而降低 CPU 周期）。从缓存中获取缓存页面比重新执行 PHP 代码消耗更少的 CPU 周期。

缓存对于请求页面的所有用户通常都相同的网页特别有用 - 例如在 wiki 中，对于通常不会经常更改的页面 - 同样是 wiki。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:58:28.630

“增强性能”听起来像是我收到的一些电子邮件......

这里发生了两件相互关联的事情。一个是“处理一个给定的请求需要多长时间？”，另一个是“在我有限的资源下，我可以同时处理多少个请求？”。人们在谈论性​​能时倾向于使用这些概念中的一个或两个。

缓存可以帮助解决这两个问题。

最有效的缓存策略使用您机器之外的资源来缓存您的东西——最明显的例子是用户的浏览器或 CDN。我假设您不能使用 CDN，但是通过花一些精力设置 HTTP 缓存标头，您可以显着减少对服务器的静态或缓慢资源的请求数量。

对于动态内容（通常是您通过查询数据库生成的网页），下一个最有效的缓存策略是缓存您的页面（部分）生成的 HTML。例如，如果您的主页上有一个“最受欢迎的项目”框，这通常会运行几个中等复杂的数据库查询，然后是一些“将数据转换为 HTML”的后端代码。如果可以缓存 HTML，就可以节省数据库查询和将数据转换为 HTML 的 CPU 工作量。

如果这不可能，您可以缓存一些数据库查询的结果。这有助于减少数据库负载，通常还可以减少 Web 服务器上的负载——运行数据库查询和处理结果所需的代码通常比从缓存中检索项目更繁重；因为它更快，它允许更快地处理您的请求，从而更快地释放资源。这减少了服务器上单个请求的负载，从而允许您处理更多并发请求。

# eclipse - Apache Tomcat 7 和 Eclipse Juno EE 集成 (Ubuntu 12.04)

> ID：12618018
> 
> 赞同：0
> 
> 时间：2012-09-27T09:18:12.953
> 
> 标签：eclipse, tomcat7, ubuntu-12.04

我目前正在设置一个 Web 服务环境，用于在 linux 机器（Ubuntu 12.04）中开发 SOAP Web 服务。我想将 Eclipse EE Juno 与 Apache Tomcat 7 一起使用。我成功安装了 tomcat（使用 sudo apt-get install）并将其配置为 Eclipse 中的服务器运行时环境。当我部署 Web 服务以对其进行测试时，一切正常。但是，当我在浏览器中键入 URL 时，没有任何效果。Apache tomcat 似乎已启动并正在运行，但未部署任何 Web 服务（实际上我从 tomcat 收到 HTTP 状态 404）。出于好奇，我转到“/var/lib/tomcat7/webapps/”目录以检查是否部署了任何 Web 应用程序，并且没有 Web 应用程序。可能是什么问题？如何正确配置我的 tomcat 以使用 Eclipse 并能够通过 IDE 部署和测试我的 Web 应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:45:37.710

通过将 IDE 配置为在服务器上拥有所有权限来解决问题。

# java - 获取授权码后使用 Google Android Auth 2.0 HTTP 发布请求进行注册

> ID：12618021
> 
> 赞同：0
> 
> 时间：2012-09-27T09:18:13.627
> 
> 标签：java, android, http-post, oauth-2.0, google-account

```
https://developers.google.com/accounts/docs/OAuth2InstalledApp 
```

我通过以下链接让用户在 webview 中使用 Google 帐户注册

```
webview.loadUrl("https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&state=%2F&response_type=code&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_id=706645665586.apps.googleusercontent.com"); 
```

其中包含我的客户端 ID 和根据 Google API 控制台给出的重定向 URI，即选择重定向 URI [https://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

最后使用 view.getTitle() 获取浏览器标题栏中返回的授权码

之后需要发送另一个请求实际的请求可能如下所示：

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded
code=4/y_jtre05wvb6QSPo0Tkx5AbLfWB
client_id=706645665586.apps.googleusercontent.com
client_secret={client_secret}&
redirect_uri=urn:ietf:wg:oauth:2.0:oob
grant_type=authorization_code 
```

所以现在在发出 HTTP POST 请求时..

```
 DefaultHttpClient httpcl = new DefaultHttpClient();
    HttpPost httpp = new HttpPost("https://accounts.google.com/o/oauth2/auth");
    List<NameValuePair> a = new ArrayList<NameValuePair>();
    a.add(new BasicNameValuePair("code", "4/y_jtre05wvb6QSPo0Tkx5AbLfWB"));
    a.add(new BasicNameValuePair("client_id", "706645665586.apps.googleusercontent.com"));
    try {
        StringEntity mEntity = new StringEntity("");
        mEntity.setContentType(" application/x-www-form-urlencoded");
        httpp.setEntity(mEntity);
        httpp.setEntity(new UrlEncodedFormEntity(a));
        HttpResponse response1 = httpcl.execute(httpp);

        String response = EntityUtils.toString(response1.getEntity());
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

所以我收到了错误的令牌响应......我从昨天开始尝试这个，建议和帮助将不胜感激..**我的主要目标是使用 android 中的 gmail 帐户获取用户信息**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:44:15.793

我认为您在这里混合了不同的流程：

*   [客户端流程](https://developers.google.com/accounts/docs/OAuth2UserAgent) **不需要**客户**端密码**，但主要用于 Javascript 应用程序。
*   不过，[已安装的应用程序流程](https://developers.google.com/accounts/docs/OAuth2InstalledApp) **确实**需要**客户端密码**：

    > 注册时获取的 client_id 和 client_secret 嵌入到你的应用程序的源代码中。在这种情况下，client_secret 显然不被视为秘密。

    您可能在[API 控制台](https://code.google.com/apis/console#access)中为*Installed application -> Android生成了一个***客户端 ID**，因此您只有一个**客户端 ID**，并且必须指定您的应用程序的**证书指纹**。这种类型的**客户端 ID**适用于最近发布和推荐的（因为它更安全）[Google Play Services](https://developers.google.com/android/google-play-services/)。

     *******如果您想手动使用*Installed Applications 流程*，您必须为*Installed application -> Other*生成一个**客户端 ID**，您还可以在其中获得一个**客户端密码**。在交换**访问令牌的****授权码**时，您需要指定所有五个参数：

     *******```
    code            The authorization code returned from the initial request
    client_id       The client_id obtained during application registration
    client_secret   The client secret obtained during application registration
    redirect_uri    The URI registered with the application
    grant_type      As defined in the OAuth 2.0 specification, this field must contain a value of authorization_code 
    ```************** 

 ********* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:18:54.757

我终于找到了工作示例 你可以使用 Google+ 开发者 API。看看[github](https://github.com/imellon/Google-Plus-Android-Sample)上的这个项目和这篇文章。[这里](http://www.imellon.com/blog/2011/11/24/integrating-google-api-to-android/)********

# java - 如何在 GC 内绘制旋转文本

> ID：12618023
> 
> 赞同：0
> 
> 时间：2012-09-27T09:18:19.147
> 
> 标签：java, text, rotation, swt, draw2d

我在 SWT GUI 中进行了一些 2D 绘图。为此，我有一个[GC 对象。](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/class-use/GC.html)

如何在[SWT Canvas](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/class-use/Canvas.html)内绘制旋转文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:21:39.367

这应该这样做：

```
Transform tr = new Transform(display);
tr.rotate(-90);
gc.setTransform(tr);

gc.drawText("Text", x, y); 
```

# javascript - 使用 Marionette.CompositeView 过滤骨干网的正确方法

> ID：12618025
> 
> 赞同：5
> 
> 时间：2012-09-27T09:18:22.393
> 
> 标签：javascript, backbone.js, marionette

我有一个`Marionette.CompositeView`需要呈现一个集合。
我想过滤这个集合`fetch`并`add`采取行动。
我尝试使用以下代码 (1)，但出现以下错误 (2)。

任何想法，谢谢。

* * *

(1)

```
var myCompositeView = Marionette.CompositeView.extend({

    initialize: function () {
        this.collection = app.taskCollection.where({type: 'todo'});
    }

}); 
```

(2)

```
// Uncaught TypeError: Object  has no method 'on' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T03:40:34.543

Marionette 的 CompositeView 和 CollectionView 都希望该`collection`设置是有效的 Backbone.Collection。Backbone 集合上的`where`方法不返回 Backbone.Collection，它返回一个数组。所以你必须围绕结果包装一个集合：

```
 initialize: function(){
  var filtered = app.taskCollection.where({type: 'todo'});
  this.collection = new Backbone.Collection(filtered);
} 
```

当然，您可以使用从 Backbone.Collection 扩展的任何类型。我只是想用这个例子来说明它是一个集合的意义。

# git - 我可以将标签推送到当前推送的 git 吗？

> ID：12618026
> 
> 赞同：0
> 
> 时间：2012-09-27T09:18:22.720
> 
> 标签：git, github, git-push, git-tag

是否可以将标签推送到 github 中当前推送的文件？我已经通过谷歌搜索，但没有任何线索。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:32:19.550

**更新**正如评论中提到的 Abizern 和 fork0，您可以标记任何 git 对象。无论如何，`git push --tags <remote> <branch>`都会解决问题。

--

正如 Shahbaz 提到的，标签用于提交，而不是文件。如果您要询问将标签推送到已推送的*提交*，是的，您可以这样做。创建标签（使用`git tag`）并输入，

```
git push --tags <remote> <branch> 
```

将 <remote> 替换为远程名称（例如：*origin*），将 <branch> 替换为分支名称（例如：*master*）。这将推送之前未推送的 <branch> 中的所有本地标签。

# c# - 不支持 URL 格式

> ID：12618027
> 
> 赞同：0
> 
> 时间：2012-09-27T09:18:26.930
> 
> 标签：c#, .net, image, bitmap, image-resizing

我正在尝试使用以下代码调整位图的大小，我在第二行收到错误：

```
Image src = Image.FromFile(@"D:\Microsite\TestASP\Images\logo.png");

Bitmap newImage = new Bitmap(600,600); //error occurs on this line

using (Graphics gr = Graphics.FromImage(newImage))
{
    gr.SmoothingMode = SmoothingMode.HighQuality;
    gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
    gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
    gr.DrawImage(src, new Rectangle(0, 0, 300, 300));
} 
```

我得到的错误是

> 不支持网址格式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:31:29.430

我怀疑您的 D 驱动器映射到本地计算机以外的其他位置。

试试这个而不是你的第一行（我知道它不是很漂亮，它正在测试一种预感）：

```
Image src = Image.FromStream(new MemoryStream(new WebClient().DownloadData(@"D:\Microsite\TestASP\Images\logo.png"))); 
```

# ios - 如何上传具有不同开发人员证书的应用程序更新

> ID：12618028
> 
> 赞同：1
> 
> 时间：2012-09-27T09:18:31.367
> 
> 标签：ios, itunes, app-store-connect

我上个月在 App Store 上成功开发并发布了一个 App。然而，从那以后，我的 Mac 崩溃了，而且（愚蠢地！）我没有备份我的钥匙串证书。我必须生成一个新证书并最终在 Apple Provisioning Portal 中创建一个新的开发人员证书。

结果 - 尽管能够签署更新的应用程序并将其部署到我的 iPhone 和 iPad，但我无法将其上传到 App Store，因为签名不同。

有没有办法解决？我是否必须重新编写应用程序并使用新的签名密钥提交新的应用程序？

我看到了这个问题： [我可以上传我的 iOS 应用程序的新版本，它的证书/配置文件与以前的不同吗？](https://stackoverflow.com/questions/8831376/can-i-upload-a-new-version-of-my-ios-app-with-a-different-certificate-profile-th/12618004#12618004)

但这并不能回答我的问题/问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:21:47.977

您的应用程序包标识符和配置必须相同，这与您编译构建的分发证书无关，前提是您正在为来自同一开发人员帐户的应用商店提交生成构建 (ipa)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:21:53.180

固定的！我登录了 Apple Provisioning Portal，撤销了我的所有证书并删除了我的所有分发配置证书。然后我删除了 XCode 中的所有内容以及我的 KeyChain 中的所有内容。我从 KeyChain 重新生成了一个新的 CSR，在 Provisioning Portal 中生成了一个新证书，然后通过 xCode 完成了剩下的工作。它找到并下载了我的开发和配置证书，一个针对我的团队，另一个是“未知”。我在 xCode 中单击了 TEAMS 并进行了刷新，然后返回配置文件说一切都设置为有效。我用新证书签署了应用程序并上传了它们。该应用程序不等待审查:)

# python - 如何在python中用空字符串替换反斜杠字符

> ID：12618030
> 
> 赞同：20
> 
> 时间：2012-09-27T09:18:36.727
> 
> 标签：python, replace

我正在尝试用以下代码替换字符串中的反斜杠“\”

```
string = "<P style='TEXT-INDENT'>\B7 </P>"

result = string.replace("\",'') 
```

结果：

```
------------------------------------------------------------
   File "<ipython console>", line 1
     result = string.replace("\",'')
                                     ^
SyntaxError: EOL while scanning string literal 
```

在这里我不需要反斜杠，因为实际上我正在解析一个带有上述格式标签的 xml 文件，所以如果有反斜杠，它会`invalid token`在解析过程中显示

我能知道如何在python中用空字符串替换反斜杠吗

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-27T09:20:13.140

```
result = string.replace("\\","") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T09:19:55.807

该错误是因为您没有向您的 中添加转义字符`'\'`，您应该`\\`为`backslash (\)`

```
In [147]: foo = "a\c\d" # example string with backslashes

In [148]: foo 
Out[148]: 'a\\c\\d'

In [149]: foo.replace('\\', " ")
Out[149]: 'a c d'

In [150]: foo.replace('\\', "")
Out[150]: 'acd' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T09:27:04.887

只是给你一个解释：反斜杠`\`在许多语言中都有特殊的含义。在 Python 中，取自[doc](http://docs.python.org/reference/lexical_analysis.html)：

> 反斜杠 () 字符用于转义具有特殊含义的字符，例如换行符、反斜杠本身或引号字符。

因此，为了替换`\`字符串，您需要使用转义反斜杠本身`"\\"`

```
>>> "this is a \ I want to replace".replace("\\", "?")
'this is a ? I want to replace' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T09:20:22.190

```
>>> string = "<P style='TEXT-INDENT'>\B7 </P>"
>>> result = string.replace("\\",'')
>>> result
"<P style='TEXT-INDENT'>B7 </P>" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-20T12:34:20.480

如果添加解决方案`string='abcd\nop.png'`

```
result = string.replace("\\","") 
```

上面的这行不通，因为它会给`result='abcd\nop.png'`.

如果您看到这里`\n`是换行符。所以我们必须替换原始字符串中的反斜杠字符（因为不会检测到'\ n'）

```
string.encode('unicode_escape')
result = string.replace("\\", "")
#result=abcdnop.png 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-05T21:09:20.233

```
import re

new_string = re.sub(r"\\\\",r" ",old_string) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T09:28:00.970

您需要用一个额外的反斜杠转义 '\' 才能与`\`.. 进行实际比较。所以您应该使用 '\'..

有关 Python中的所有内容，请参阅[Python 文档](http://docs.python.org/reference/lexical_analysis.html)- [第 2.4 节](http://docs.python.org/reference/lexical_analysis.html#string-literals)`escape sequences`。以及您应该如何处理它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-15T01:10:26.840

现在是 2020 年 8 月
。Python 3.8.1
Pandas 1.1.0
此时我同时使用了双 \ 反斜杠和 r。

```
df.replace([r'\\'], [''], regex=True, inplace=True) 
```

干杯。

# jquery - 获取通过 url 传递的表单数据并填充新表单

> ID：12618033
> 
> 赞同：0
> 
> 时间：2012-09-27T09:18:47.400
> 
> 标签：jquery, forms

我的付款处理器将 url 中的一些表单字段传递给我的会员站点注册表单……名字、姓氏和电子邮件。

我想使用电子邮件值自动填充注册表单中的用户名字段。

```
<input type="text" value="" size="10" name="username" class="fld">
<input type="text" value="" size="15" name="firstname" class="fld">
<input type="text" value="" size="15" name="lastname" class="fld">
<input type="email" value="" size="25" name="email" class="fld">
<input type="password" size="10" name="password1" class="fld"> 
```

我还希望将用户名、第一名、最后一名和电子邮件作为隐藏字段传递，并将它们的值显示为文本……所以提交表单时这三个字段不能更改。

我还想知道当支付处理器通过 url 将数据发送到注册表单时，是否有办法强制提交表单？

这样用户就不必停下来填写注册表，因为我可以通过支付处理器收集所有数据，包括密码。

jquery 是做到这一点的最佳方式......以及如何？

输入字段的表单是什么样的： ![在此处输入图像描述](../Images/747178c62c06a03e3dd07e85faec9127.png)

我想要的是： ![在此处输入图像描述](../Images/b6a001681f91526273d4ada6a03bc0d0.png)

这是注册表单的部分代码。

```
 <table cellspacing="0" cellpadding="0" class="wpm_registration ui-sortable">
    <tbody>
        <tr class="li_fld systemFld required">
                <td class="label">Username:</td>
                <td class="fld_div">
                        <input type="text" value="" size="10" name="username" class="fld">
                        <div class="desc"></div>
                </td>
        </tr>
        <tr class="li_fld required wp_field">
                <td class="label">First Name:</td>
                <td class="fld_div">
                        <input type="text" value="" size="15" name="firstname" class="fld">
                        <div class="desc"></div>
                </td>
        </tr>
        <tr class="li_fld required wp_field">
                <td class="label">Last Name:</td>
                <td class="fld_div">
                        <input type="text" value="" size="15" name="lastname" class="fld">
                        <div class="desc"></div>
                </td>
        </tr>
        <tr class="li_fld systemFld">
                <td class="label">E-mail:</td>
                <td class="fld_div">
                        <input type="email" value="" size="25" name="email" class="fld">
                        <div class="desc"></div>
                </td>
        </tr>
        <tr class="li_fld systemFld">
                <td class="label">Password (twice):</td>
                <td class="fld_div">
                        <input type="password" size="10" name="password1" class="fld"><br>
                        <input type="password" size="10" name="password2" class="fld">
                        <div class="desc">Password has to be at least 8 characters long<br>and must not contain spaces</div>
                </td>
        </tr>
        <tr class="li_submit">
                <td class="label">&nbsp;</td>
                <td class="fld_div form_button">
                        <input type="submit" value="Submit Registration" class="fld button">
                </td>
        </tr>
    </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:30:28.207

使用 jQuery，尝试检查信息是否已经在输入中。如果是这种情况，请将输入替换为它的值：

```
$(function() {
     $('input.fld').each(function() {
         if($(this).val() != '') {
             var val = $(this).val();
             $(this).parent().text(val);
         }
     });
}); 
```

而已 ！

# c# - 无法获取 FlowDocument / RichTextBox 文本

> ID：12618034
> 
> 赞同：0
> 
> 时间：2012-09-27T09:18:49.927
> 
> 标签：c#, wpf, xaml, richtextbox, flowdocument

Ia 有 RichTextBox，其内容定义如下：

```
 <FlowDocument>
                    <Paragraph x:Name="para">
                        <Label Padding="0,0,0,0" Margin="0,0,0,0">
                            <Hyperlink Click="Hyperlink_Click">
                                <Run Text="{Binding Txt}" x:Name="rxm" />
                            </Hyperlink>
                        </Label>
                        <Label Padding="0,0,0,0" Margin="0,0,0,0" FontWeight="Bold" Content=" - " />
                        <Label Padding="0,0,0,0" Margin="0,0,0,0" FontWeight="Bold" x:Name="name" Content="Some name"
                   ToolTipService.ShowDuration="10000">
                            <Label.ToolTip>
                                <ContentControl Content="Tooltip" />
                            </Label.ToolTip>
                        </Label>
                    </Paragraph>
                </FlowDocument> 
```

问题是我无法正确获取选定的文本。我得到的空白很少。因此，我尝试至少使用以下代码检索所有 FlowDocument 的文本：

```
 TextRange tr = new TextRange(
          doc.Selection.Start,
          doc.Selection.End);
        MemoryStream ms = new MemoryStream();
        tr.Save(ms, DataFormats.Xaml);
        string xamlString =
           ASCIIEncoding.Default.GetString(ms.ToArray()); 
```

事实证明，我只运行了几次，每个运行都有空白：

```
<Section xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" ...  <Paragraph>
    <Run> </Run>
    <Run> </Run>
    <Run> </Run>
    <Run> </Run>
    <Run> </Run>
</Paragraph> 
```

看起来“文档”视图与视觉视图完全不同，尽管我不知道为什么这些运行是空的。有人知道如何正确获取所选文本（即使没有任何格式）？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:20:51.787

我找到了一个合适的解决方案：

[如何复制 WPF FlowDocument InlineUIContainer 内容？](https://stackoverflow.com/questions/1611552/how-can-i-copy-wpf-flowdocument-inlineuicontainer-contents)

[确定 WPF RichTextBox 中选定的 InlineUIContainer](https://stackoverflow.com/questions/651101/determining-the-selected-inlineuicontainer-in-a-wpf-richtextbox)

处理所有可能的 FlowDocument 内容需要大量编码，但我现在对此感到满意

# javascript - 将 WebSQL 数据库另存为 .sqlite

> ID：12618035
> 
> 赞同：1
> 
> 时间：2012-09-27T09:18:53.290
> 
> 标签：javascript

我正在将 WebSQL 用于 Web 项目。我可以使用 SQLite Manager 查看 WebSQL 数据库。我了解到数据库本身保存在浏览器的应用程序数据文件夹中的某个地方（使用一个有趣的文件扩展名）。

我想知道是否有办法将 WebSQL 数据库保存为 .sqlite 文件并指定保存文件的位置（可能）。

# android - 为什么在 runOnUiThread 做同样的事情时使用处理程序？

> ID：12618038
> 
> 赞同：58
> 
> 时间：2012-09-27T09:19:10.350
> 
> 标签：android, multithreading, android-asynctask, handler

我遇到过[Handlers](http://developer.android.com/reference/android/os/Handler.html)和[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)概念。但对我来说，他们在哪些事实上完全不同似乎仍然是一个疑问。

它们都旨在从后台线程执行 UI 操作。但是，我们在这两种方法中进行选择时要考虑哪些因素。

例如，考虑`Runnable` `Thread`在后台执行 Web 服务，现在我想更新 UI。

**更新我的 UI 的最佳方式是什么？我应该去`Handler`还是`runOnUiThread`？**

我仍然知道我可以使用 a`AsyncTask`并使用`onPostExecute`. 但我只想知道区别。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-27T09:25:08.270

[Activity.runOnUiThread()是更通用的](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)[Handlers](http://developer.android.com/reference/android/os/Handler.html)的一个特例。您可以在`Handler`自己的线程中创建自己的事件查询。使用[默认构造函数](http://developer.android.com/reference/android/os/Handler.html#Handler%28%29)`Handlers`实例化**并不**意味着“*代码将在 UI 线程上运行*”。默认情况下，处理程序绑定到它们被实例化的地方。 ***`Thread`***

 ***要创建一个`Handler`保证绑定到 UI（主）线程的对象，您应该创建一个`Handler`绑定到*Main Looper*的对象，如下所示：

```
Handler mHandler = new Handler(Looper.getMainLooper()); 
```

此外，如果您检查该`runOnUiThread()`方法的实现，它正在`Handler`用于执行以下操作：

```
 public final void runOnUiThread(Runnable action) {
        if (Thread.currentThread() != mUiThread) {
            mHandler.post(action);
        } else {
            action.run();
        }
    } 
```

从上面的代码片段可以看出，如果从 UI 线程调用，`Runnable action`将立即执行。`runOnUiThread()`否则，它将发布到`Handler`，稍后将执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:23:15.917

处理程序是做事的旧方式（API 级别 1），然后`AsycTask`（API 级别 3）被引入，同时更加关注使用`runOnUIThread`（API 级别 1）。您应该尽可能避免使用处理程序，并根据您的需要更喜欢其他两个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:30:10.250

如果您为任何正在运行的任务启动线程，则处理程序有许多工作，例如**消息传递**和频繁的 UI 更新。处理程序允许您发送和处理与线程的 MessageQueue 关联的 Message 和 Runnable 对象，这在蓝牙等许多应用程序中非常有用chat ,, wifi chat ... 和处理程序具有 PostDelay 和 PostAtTime 方法，您可以通过它们播放任何视图以设置动画和更改可见性等

你必须看看这个

[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

[http://developer.android.com/tools/testing/activity_testing.html](http://developer.android.com/tools/testing/activity_testing.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-03T15:18:19.593

按照 HitOdessit 的回答。

你可以像这样创建一个类。

```
public class Global{
    private static Handler mHandler = new Handler(Looper.getMainLooper());
    public static void runOnUiThread(Runnable action){
        mHandler.post(action);
    }
} 
```

然后这样称呼它。

```
Global.runOnUiThread(new Runnable(){
    //Your code
}); 
```

这可以从任何地方运行（您可以访问您的 Global 类）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-05T13:47:25.093

> 更新我的 UI 的最佳方式是什么？我应该选择 Handler 还是 runOnUiThread？

如果您`Runnable`需要更新 UI，请将其发布在`runOnUiThread`.

但并不总是可以`Runnable`在 UI 线程上发帖。

想想场景，您需要执行**网络/IO 操作**或调用 Web 服务。在这种情况下，您不能发布`Runnable`到 UI 线程。它会抛出`android.os.NetworkOnMainThreadException`

这些类型的`Runnable`应该在不同的线程上运行，比如[HandlerThread](https://developer.android.com/reference/android/os/HandlerThread.html)。完成操作后，您可以使用`Handler`已与 UI Thread 关联的 将结果发送回 UI Thread。

```
public void onClick(View view) {

    // onClick on some UI control, perform Network or IO operation

    /* Create HandlerThread to run Network or IO operations */
    HandlerThread handlerThread = new HandlerThread("NetworkOperation");
    handlerThread.start();

    /* Create a Handler for HandlerThread to post Runnable object */
    Handler requestHandler = new Handler(handlerThread.getLooper());

   /* Create one Handler on UI Thread to process message posted by different thread */

    final Handler responseHandler = new Handler(Looper.getMainLooper()) {
        @Override
        public void handleMessage(Message msg) {
            //txtView.setText((String) msg.obj);
            Toast.makeText(MainActivity.this,
                    "Runnable on HandlerThread is completed and got result:"+(String)msg.obj,
                    Toast.LENGTH_LONG)
                    .show();
        }
    };

    NetworkRunnable r1 = new NetworkRunnable("http://www.google.com/",responseHandler);
    NetworkRunnable r2 = new NetworkRunnable("http://in.rediff.com/",responseHandler);
    requestHandler.post(r1);
    requestHandler.post(r2);

}

class NetworkRunnable implements Runnable{
    String url;
    Handler uiHandler;

    public NetworkRunnable(String url,Handler uiHandler){
        this.url = url;
        this.uiHandler=uiHandler;
    }
    public void run(){
        try {
            Log.d("Runnable", "Before IO call");
            URL page = new URL(url);
            StringBuffer text = new StringBuffer();
            HttpURLConnection conn = (HttpURLConnection) page.openConnection();
            conn.connect();
            InputStreamReader in = new InputStreamReader((InputStream) conn.getContent());
            BufferedReader buff = new BufferedReader(in);
            String line;
            while ((line = buff.readLine()) != null) {
                text.append(line + "\n");
            }
            Log.d("Runnable", "After IO call:"+ text.toString());

            Message msg = new Message();

            msg.obj = text.toString();

            /* Send result back to UI Thread Handler */
            uiHandler.sendMessage(msg);

        } catch (Exception err) {
            err.printStackTrace();
        }
    }
} 
```***

# asp.net - Jquery 单独列表项 AJAX

> ID：12618044
> 
> 赞同：0
> 
> 时间：2012-09-27T09:19:31.293
> 
> 标签：asp.net, ajax, jquery, asp.net-ajax

```
 public class searchResult
 {
public int id;
public string name;
}
/// <summary>
/// Summary description for WebService1
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
[System.Web.Script.Services.GenerateScriptType(typeof(searchResult))]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment                    the following line.
[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{

[WebMethod]
public searchResult[] Search(int txtSearch)
{
//Semuler to slow internet connection
System.Threading.Thread.Sleep(2000);

//Declare collection of searchResult
List<searchResult> resultList = new List<searchResult>();
DataSet ds = Classes.getEmployeeDetailSet("SELECT [Employee ID],[First Name] FROM     [Employee$] WHERE [Employee ID] like '" + txtSearch + "%'");
DataTable dt = new DataTable();
dt = ds.Tables[0];
if (dt.Rows.Count > 0)
{
searchResult result = new searchResult();
result.id = int.Parse(dt.Rows[0]["Employee ID"].ToString());
result.name = dt.Rows[0]["First Name"].ToString();
resultList.Add(result);
}
return resultList.ToArray();
} 
```

我创建了一个列表，例如

```
 List<searchResult> resultList = new List<searchResult>(); this
      and i have return that list
      to call this i have use ajax code like this

         $.ajax({ type: "POST",
      url: "WebService1.asmx/Search", //function that in web service
      data: "{txtSearch:" + $("#txtSearch").val() + "}", // passing value of txtSearch input
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(response) {
      var result = response.d;
      var value = '';
      $.each(result, function(index, res) {
      value = value + res.id + res.name;
      });

      alert(value);
      alert("Record was updated successfully,,");
      },
      error: function(msg) {
      alert("Error while calling web service,,");
      }
      }); 
```

我的问题是我只从数据库中获取一个元素

我想我无法在这里将 ajax 响应中的列表分开

```
 $.each(result, function(index, res) {
      value = value + res.id + res.name;
      }); 
```

我想使用这个 id+name 创建一个数组

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:51:07.567

正如 Robert Slaney 所说，您只返回数据库中的第一个结果。

在服务器端尝试这样的事情。

```
public class SearchResult
{
    public int ID;
    public string Name;
}

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
[ScriptService]
public class WebService1 : System.Web.Services.WebService
{

    [WebMethod, ScriptMethod]
    public SearchResult[] Search(int employeeID)
    {
        List<SearchResult> resultList = new List<searchResult>();
        DataSet ds = Classes.getEmployeeDetailSet("SELECT [Employee ID],[First Name] FROM [Employee$] WHERE [Employee ID] like '" + employeeID + "%'");
        DataTable dt = ds.Tables[0];

        foreach(DataRow row in dt.Rows)
        {
            resultList.Add(new SearchResult{ ID = int.Parse(row["Employee ID"].ToString()), Name = row["First Name"].ToString()});
        }
        return resultList.ToArray();
    }
} 
```

您还可以使用[Chrome 开发人员工具](https://developers.google.com/chrome-developer-tools/)来检查您的请求和响应，并验证数据是否实际被返回。

# android - 如何让 onTouch 在 Android 中像 onTap 一样工作？

> ID：12618045
> 
> 赞同：0
> 
> 时间：2012-09-27T09:19:32.350
> 
> 标签：android, android-layout, android-button

我在我的 MapActivity 中实现了一个 OnTouchListener，当然我必须重写 onTouch() 方法。

我希望它仅在我点击地图时触发 - 否则我什至无法移动地图。

这是我的 onTouch 方法：

```
@Override
public boolean onTouch(View v, MotionEvent e) {

    if (e.getAction() == MotionEvent.ACTION_DOWN) {

      // SOME ACTIONS ...

    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:25:07.940

采用：

```
e.getAction() == MotionEvent.ACTION_UP 
```

和：

```
e.getAction() == MotionEvent.ACTION_MOVE 
```

如果在和 ACTION_DOWN 之后有 ACTION_UP 事件，并且之间没有 ACTION_MOVE，则它是一个水龙头

更新：

```
private int mLastMotionEventAction = MotionEvent.ACTION_UP;

@Override
public boolean onTouch(View v, MotionEvent e) {

    if (e.getAction() == MotionEvent.ACTION_DOWN) {

      // SOME DOWN ACTIONS ...

    } else if (e.getAction() == MotionEvent.ACTION_MOVE) {

      // SOME MOVE ACTIONS ...

    } else if (e.getAction() == MotionEvent.ACTION_UP) {
       if (mLastMotionEventAction == MotionEvent.ACTION_DOWN){

         // SOME TAP ACTIONS ...

       }
    }
    mLastMotionEventAction = e.getAction();
    return true;
} 
```

另一种选择（用于敏感设备）：

```
 private long mLastDownEventTime = 0;

    @Override
    public boolean onTouch(View v, MotionEvent e) {

        if (e.getAction() == MotionEvent.ACTION_DOWN) {
           mLastDownEventTime = System.currentTimeMillis();

          // SOME DOWN ACTIONS ...

        } else if (e.getAction() == MotionEvent.ACTION_MOVE) {

          // SOME MOVE ACTIONS ...

        } else if (e.getAction() == MotionEvent.ACTION_UP) {
           if (System.currentTimeMillis() - mLastDownEventTime < 500){

             // SOME TAP ACTIONS ...

           }
        }

        return true;
    } 
```

仅当自上次按下后已过去 200 毫秒或更短时间时，才会触发点击操作。当然，您可以更改最佳 UX 的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:49:12.283

`false`如果您还想将事件传递给地图，则必须返回。否则，正如您所描述的，地图不会对触摸手势做出反应。这是因为，返回`true`意味着您*消费*了该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T17:18:53.640

我知道这是一个老问题，但正确的方法是使用`getScaledTouchSlop()`它返回以像素为单位的距离，在我们认为用户正在滚动之前，触摸可以徘徊。

在你的 onTouch 方法中像这样实现它：

```
@Override
    public boolean onTouch(final View v, MotionEvent event) {

        int mSwipeSlop = ViewConfiguration.get(context).
                    getScaledTouchSlop();
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            // DO
            break;
        case MotionEvent.ACTION_CANCEL:
            // DO
            break;
        case MotionEvent.ACTION_MOVE:
            {
                float x = event.getX() + v.getTranslationX();
                float deltaX = x - mDownX;
                float deltaXAbs = Math.abs(deltaX);
                float y = event.getY() + v.getTranslationY();
                float deltaY = Y - mDownY;
                float deltaYAbs = Math.abs(deltaY);
                float absDist = Math.sqrt(Math.pow(deltaXAbs, 2) + Math.pow(deltaXAbs, 2));
                if (!mSwiping) {
                    if (absDist > mSwipeSlop) {
                        mSwiping = true;
                    }
                }
            break;
        case MotionEvent.ACTION_UP:
            {
                if (mSwiping) {
                    // DO MOVE ACTIONS
                }
                else {
               // DO TAP ACTIONS
                }
            }
            break;
        default: 
            return false;
        }
        return true;
    }; 
```

开发者页面： http: [//developer.android.com/reference/android/view/ViewConfiguration.html#getScaledTouchSlop()](http://developer.android.com/reference/android/view/ViewConfiguration.html#getScaledTouchSlop())

# mod-rewrite - 为 SEO 重写单页 mod

> ID：12618046
> 
> 赞同：0
> 
> 时间：2012-09-27T09:19:34.323
> 
> 标签：mod-rewrite, seo

我有一个页面如下。

```
www.mysite.com/about.php 
```

我希望在 htaccess 文件中设置它，使其如下所示。

```
www.mysite.com/my-keyword-here 
```

请帮我。

提前致谢。山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:16:07.673

将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^/?my-keyword-here$ /about.php [L] 
```

所以现在如果你`http://www.mysite.com/my-keyword-here`在浏览器的 URL 地址栏中输入，你将返回`/about.php`.

# ios - Html5 Canvas：我可以在 iPad2 等非视网膜设备上画得非常清晰吗？

> ID：12618052
> 
> 赞同：2
> 
> 时间：2012-09-27T09:19:51.440
> 
> 标签：ios, html, canvas, html5-canvas

我目前正在开发一个大量使用 HTML5 的移动 Web 应用程序`<canvas>`。我在画布上画了很多圆圈和文字。

我正在执行以下操作来检测我当前是否在 HD/Retina 显示器上绘图：

```
// Retina Display ?             
if (window.devicePixelRatio == 2) {
  canvas.style.width = canvas.width + "px";
  canvas.style.height = canvas.height + "px";
  canvas.width = canvas.width * 2;
  canvas.height = canvas.height * 2;
  context.scale(2, 2);
} 
```

如果我在 Retina 显示屏上，它只会画两倍大，然后按比例缩小，这给了我非常清晰的圆圈和文字。

但是例如在 iPad2 上，文本看起来有点像素化和模糊，角落不是很清晰等等。但是当我将它与原生 iOS 应用程序进行比较时，我发现显示器实际上可以画得这么锐利，因为那里的应用程序/文本/角落看起来非常好。我想知道画布绘制是否有任何技巧可以使它看起来更清晰，或者是否有一个合乎逻辑的解释，即画布在非高清显示器上看起来不像原生 iOS 应用程序那样清晰......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:44:21.537

`<canvas>`原生文本渲染方法必须采用不同的渲染路径，因为它们比draw() 方法（如亚像素抗锯齿）具有更多用于抗锯齿的上下文信息。（如果像素放大，亚像素抗锯齿会产生非常难看的伪影）

恐怕没有解决方案可以控制这种低级别的文本渲染，您必须简单地接受`<canvas>`给您的东西。

尝试使用不同的字体。

或者，您可以尝试在 HUD 样式中`<canvas>`使用 CSS覆盖 DOM 文本。`position: absolute`

[我应该使用多个画布（HTML 5）还是使用 div 来显示 HUD 数据？](https://stackoverflow.com/questions/11384657/should-i-use-multiple-canvases-html-5-or-use-divs-to-display-hud-data/11384819#11384819)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:17:40.180

您可以尝试将坐标偏移到最近的半像素。ie 而不是这个：.lineTo(5, 5) 这样做：.lineTo(5.5, 5.5)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-10T16:35:41.403

试试下面的代码，可能会有所帮助，

```
if (window.devicePixelRatio == 2) {
  canvas.width = window.innerWidth * 2;
  canvas.height = window.innerHeight * 2;
  context.scale(2, 2);
} 
```

# javascript - 如何在页面加载完成之前使用 Javascript 更新/修改网页内容？

> ID：12618053
> 
> 赞同：0
> 
> 时间：2012-09-27T09:19:51.180
> 
> 标签：javascript, dom, browser, asp-classic

我正在尝试在群发邮件过程中显示进度条。我使用经典的 ASP，也禁用了内容压缩。我只是将一个元素的大小更新为进度条，将文本元素更新为百分比值。

然而，在页面加载期间，似乎 Javascript 被忽略了。我只看到沙漏很长一段时间，然后是 %100 的进度条。如果我在更新 Chrome 和 IE9 之间发出警报，则会按照我的预期刷新修改后的值。

是否有任何其他 Javascript 命令来替换 alert() 以帮助更新实际值？alert() 命令神奇地让浏览器立即呈现内容。

谢谢！

```
 ... Loop for ASP mail send code
 If percent <> current Then
    current = percent   

 %>
   <script type="text/javascript">
     //alert(<%=percent%>);
     document.getElementById('remain').innerText='%<%=percent%>';
     document.getElementById('progress').style.width='<%=percent%>%';
     document.getElementById('success').innerText='<%=success%>';
   </script>
 <%

 End If
 ... Loop end 
```

这些是我在代码中使用 alert() 时的屏幕截图： 如您所见，它可以工作，但用户应该多次单击“确定”。 ![js-alert.png](../Images/3624be27dc77f081f06d36566cddad10.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:40:46.070

第一步是在当前进度发生变化时将其写入 Session 变量：

```
Session("percent") = percent 
```

第二步是构建一个简单的机制，在请求时将该值输出到浏览器：

```
If Request("getpercent")="1" Then
    Response.Clear()
    Response.Write(Session("percent"))
    Response.End()
End If 
```

最后，您需要使用计时器通过 JavaScript 读取百分比。这最好用 jQuery 来完成，因为纯 JavaScript AJAX 是一个非常令人头疼的问题。添加对 jQuery 库的引用后，有这样的代码：

```
var timer = window.setTimeout(CheckPercentage, 100);
function CheckPercentage() {
    $.get("?getpercent=1", function(data) {
        timer = window.setTimeout(CheckPercentage, 100);
        var percentage = parseInt(data, 10);
        if (isNaN(percentage)) {
            $("#remain").text("Invalid response: " + data);
        }
        else {
            $("#remain").text(percentage + "%");
            if (percentage >= 100) {
                //done!
                window.clearTimeout(timer);
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:08:33.807

ASP 在完全完成处理之前不会向页面写入任何内容（除非您执行刷新）

```
Response.Buffer=true
write something
response.flush
write something else
etc 
```

（见这里的例子：http: [//www.w3schools.com/asp/met_flush.asp](http://www.w3schools.com/asp/met_flush.asp)）

更好的方法是使用 ajax。

这里的例子：

[http://jquery-howto.blogspot.com/2009/04/display-loading-gif-image-while-loading.html](http://jquery-howto.blogspot.com/2009/04/display-loading-gif-image-while-loading.html)

起初我不喜欢 ajax，但我现在喜欢它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:26:56.227

保持响应直到你的完整处理完成不是一个可行的选择，想象一下 30 个人访问同一个页面，你将有 30 个持久连接到服务器很长时间，特别是使用 IIS，我相信它不是一个可行的选择，它可能在您的开发环境中运行良好，但是当您移动生产并且更多人开始访问页面时，您的服务器可能会关闭。

我希望你看看以下

在服务器后台做处理，不要长时间保持响应

尝试编写一个驻留在服务器上并负责您的群发邮件的 Windows 服务

如果您仍然坚持在网络上执行此操作，请尝试使用 ajax 一次发送一封电子邮件，对于每个 ajax 请求发送一封电子邮件/两封

在您上面没有 response.flush 的示例中，浏览器也不会获得 % 信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:30:00.080

好吧，你没有。除了像打印点或一系列图像这样的简单效果外，它不能安全地工作，即使这样缓冲也可能会干扰。

我的方法是让您使用 ajax 请求每秒更新一个区域到一个脚本，该脚本读取日志文件或电子邮件发送计数文件或数据库中由群发邮件过程创建的此类条目。群发邮件过程也将由 ajax 启动。

# javascript - 在 Javascript 中使用 window.location 打开 PHP 页面不起作用

> ID：12618063
> 
> 赞同：0
> 
> 时间：2012-09-27T09:20:15.200
> 
> 标签：javascript, window.location, location-href

如何从 javascript 函数打开 php 页面？

1.  `window.location = "http://www.google.com";`
2.  `window.location.href = "http://www.google.com";`
3.  `location.href = "http://www.google.com";`

他们都没有工作。
甚至放入php.ini

```
allow_url_fopen = on 
```

我的方法有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:27:53.247

```
window.location = "http://www.google.com"; 
```

应该管用..

我认为您的 javascript 代码包含一些错误，因此无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:23:58.587

如果你在 <script> 标签中嵌入了这个 javascript，它应该可以工作：

```
<script type="text/javascript">
  window.location = "http://www.google.com";
</script> 
```

但是，您不能使用 thsi javascript 函数将 PHP 脚本包含在您正在编写的页面中：它只会将浏览器重定向到 google 或您在 window.location 中设置的任何其他页面。您可以使用 PHP include() 或 require() 函数从 PHP 页面中包含 PHP 脚本：

```
<?php
  include('file.php');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:26:44.370

所以 php.ini 的行 allow_url_fopen 与此无关。它是允许或不允许给 PHP 的 fopen 函数一个 url。

在这里，您要做的是使用 . 将用户重定向到另一个页面`window.location = '/page.php'`。

除非打开你的意思是在实际页面中加载，在这种情况下，请查看[有关 XHR 的 mdn 文档](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)。你应该使用 jQuery 的[加载函数](http://api.jquery.com/load/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T09:23:21.477

```
window.location.href = "http://www.google.com"; 
```

这只会将用户重定向到谷歌。

但是您不能在 JS 变量中加载页面，每个浏览器都有“跨域”限制（除非该页面与您的 JS 文件和访问者位于同一域）。

# asp.net - 使用 Web 应用程序调用服务时出现“无法连接到远程服务器”错误

> ID：12618068
> 
> 赞同：1
> 
> 时间：2012-09-27T09:20:29.457
> 
> 标签：asp.net, system.net.httpwebrequest

使用 Web 应用程序调用服务时出现“无法连接到远程服务器”错误。但是当我从控制台应用程序中使用它时，会运行相同的代码。这是堆栈跟踪：-

```
at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot,
    SocketAddress socketAddress)
at System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP)
at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure,
    Socket s4, Socket s6, Socket& socket, IPAddress& address,
    ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout,
    Exception& exception) 
```

这是我正在使用的代码：-

```
 HttpWebRequest req = HttpWebRequest.Create(url) as HttpWebRequest;
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
                    X509Certificate cert = X509Certificate.CreateFromCertFile(certificatePath);
        req.ClientCertificates.Add(cert);

                    using (StreamReader sr = File.OpenText(inFilePath))  

      {
            string xml = sr.ReadToEnd();
            string postRaw = string.Format("request={0}", System.Web.HttpUtility.UrlEncode(xml));
            byte[] buf = Encoding.UTF8.GetBytes(postRaw);

            req.ContentLength = buf.Length;
            try
            {
                Stream s = req.GetRequestStream(); //This is where I get the error.

                s.Write(buf, 0, buf.Length);
                s.Close();
            }
            catch (Exception ex)
            {
            }
        }

        HttpWebResponse resp = req.GetResponse() as HttpWebResponse;

        Console.WriteLine(string.Format("HTTP status code: {0}, content length: {1}, content encoding: {2}",
            resp.StatusCode, resp.ContentLength, resp.ContentEncoding));

        if (resp.StatusCode == HttpStatusCode.OK)
        {
            StringBuilder sb = new StringBuilder();

            using (StreamReader reader = new StreamReader(resp.GetResponseStream(), System.Text.Encoding.UTF8))
            {
                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    sb.Append(line + "\r\n");
                }
            }

            string resXml = sb.ToString();
        } 
```

web.config 中是否有任何设置需要我提到才能在 Web 应用程序中工作？

# scala - 测试给定实例是否是scala中给定类的（子）类

> ID：12618072
> 
> 赞同：3
> 
> 时间：2012-09-27T09:20:35.107
> 
> 标签：scala, types

说你给定的一个实例`List[Class[_ <: Base]]`，并说许多类扩展`Base`：

```
class A extends Base
class B extends Base
class C extends A 
```

等等'...
现在，给定的列表可能只包含一些类。例如：`val classes = classOf[A] :: Nil`好吧，当我实例化`val`它的类是否属于列表中的类型，或者它是否是列表中某个类的子类时，我该如何测试？即您将如何实施：
`def testClass(class : List[Class[_ <: Base]], instance : Base) : Boolean`
何时：

```
val classes = classOf[A] :: Nil
testClass(classes, new A) // should return true
testClass(classes, new B) // should return false
testClass(classes, new C) // should return true 
```

**用例：**
我正在尝试编写一个通用的*重试模式*，即获取一些非常容易出错的代码，并且我想重试执行它的最大尝试次数，当每次失败时，它应该执行一些“等待“ 方法。
例如

```
retryRequest({
    //Some code that throws exceptions
}, classOf[SomeException] :: classOf[SomeOtherException] :: Nil,
100, {Thread.sleep(5000)}) 
```

好吧，这可以正常工作，但它不会测试给定异常的子类：

```
def retryRequest(req : => Unit, validExceptions : List[Class[_ <: java.lang.Throwable]], tries : Int, waitMethod : => Unit) {
    var keepTrying = false
    var tryCount = 0
    do{
        try{
            logger.debug("retryRequest, try #" + tryCount)
            keepTrying = false
            req
        }catch{
            case ex if(tryCount >= tries && validExceptions.contains(ex.getClass)) => {
                throw new MaxTriesReachedException("tried for " + tryCount + "times, but no luck. " +
                                                   "you may want to try ommitting generic exceptions types from the given list.") 
            }
            case ex if (validExceptions.contains(ex.getClass)) => {
                logger.debug("intercepted " + ex.toString)
                tryCount += 1
                keepTrying = true
                waitMethod
            }
        }
    }while(keepTrying)
} 
```

我真的想替换：

```
validExceptions.contains(ex.getClass) 
```

有类似的东西：

```
validExceptions.exists(exClass => ex.isInstanceOf[exClass]) //won't compile 
```

是否可以？如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T12:18:48.683

一种更简单的方法是使用`util.control.Exception`：

```
 def retryRequest(req: => Unit, 
                   validExceptions: List[Class[_ <: Throwable]], 
                   tries: Int, 
                   waitMethod: => Unit): Unit =
   (Exception.catching(validExceptions:_*) withApply { e => 
      waitMethod
      if (tries > 1) retryRequest(req, validExceptions, tries - 1, waitMethod)
   }) { req }

  retryRequest( { println("a"); throw new Exception }, 
                List(classOf[Exception]), 
                3,
                Thread.sleep(100)) 
```

简而言之：`withApply`采用一个闭包来处理传递给的异常之一`catching`被抛出时的情况。在我们的例子中，我们只是简单地递归调用自己（鉴于重试次数很少，我认为这不是问题）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T10:35:49.637

我认为这应该有效：

```
validExceptions.exists(exClass => exClass.isAssignableFrom(ex.getClass)) 
```

[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)

# ruby - 红宝石方法。切换方式

> ID：12618074
> 
> 赞同：0
> 
> 时间：2012-09-27T09:20:43.200
> 
> 标签：ruby, oop

只是想知道为什么

```
默认移动
  world_switch(@pos_X += 1, @pos_X -= 1, @pos_Y += 1, @pos_Y -= 1)
结尾

  def world_switch（do_on_north，do_on_south，do_on_east，do_on_west）
    案例@面对# =>'北方'
    当'北'
      放 do_on_north # => 1
      do_on_north
    当'南'
      do_on_south
    当'东'
      do_on_east
    当'西'
      do_on_west
    结尾
  结尾

```

来电`world_switch`：

```
机器人 = Robot.new(0, 0, 'NORTH')
机器人.move
将 robots.instance_variable_get("@pos_X") #=> 0

```

结果什么都没有改变，我想增加或减少`instance variable @pos_X or @pos_Y`

这是我的初始化方法

```
def 初始化（pos_X，pos_Y，面对）
    @pos_X, @pos_Y, @facing = pos_X, pos_Y, 面对
  结尾

```

这就是我创建类实例的方式`robot = Robot.new(0, 0, 'NORTH')`

所有帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:46:48.077

由于您调用的方式，它什么也不做`world_switch`。Ruby 将在调用之前评估您作为参数传递的每个表达式。

所以，你用（比方说）调用 move，`@pos_X`两者`@pos_Y`都等于 0。Ruby 会：

```
@pos_X += 1 # => @pos_X = 1; param 1 will be 1
@pos_X -= 1 # => @pos_X = 0; param 2 will be 0
@pos_Y += 1 # => @pos_Y = 1; param 3 will be 1
@pos_Y -= 1 # => @pos_Y = 0; param 4 will be 0

world_switch(1, 0, 1, 0) 
```

然后`world_switch`根据 进行切换`@facing`，并简单地返回相应参数的值。它根本不会改变实例变量。

我不确定我是否清楚地解释了这一切。如果您需要澄清，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:55:48.847

当前行为的解释如[Chowlett](https://stackoverflow.com/users/93884/chowlett)所描述的那样，但是您是否打算将您的`@pos_X += 1, @pos_X -= 1`etc变成代码块，然后根据机器人面对的方式`move`准确调用其中的一个？`world_switch`

如果是这样，则需要像这样声明 move

```
def move
  world_switch(Proc.new { @pos_X += 1 }, Proc.new { @pos_X -= 1 },
    Proc.new { @pos_Y += 1 }, Proc.new { @pos_Y -= 1 })
end 
```

然后`world_switch`你可以做类似的事情

```
case @facing # => 'NORTH'
    when 'NORTH'
      do_on_north.call
    when 'SOUTH'
      do_on_south.call
 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:57:42.340

添加到 Chowlett 和 mikej 的答案（这很好地解释了为什么您的代码不起作用）。你可以尝试这样的事情：

```
class Player
  def initialize(position)
    @position = position
  end

  def move(direction)
    case direction
    when :north
      @position[:x] += 1
    when :south
      @position[:x] -= 1
    when :east
      @position[:y] -= 1
    when :west
      @position[:y] += 1
    end
  end
end

player = Player.new({:x => 0, :y => 0})
player.move(:north)
puts player.inspect
# => "#<Player:0x16c7ef8 @position={:x=>1, :y=>0}>" 
```

# hadoop - Apache Pig 对输入数据大小有任何限制吗？

> ID：12618076
> 
> 赞同：0
> 
> 时间：2012-09-27T09:20:48.787
> 
> 标签：hadoop, mapreduce, apache-pig

在处理 TeraBytes 数据时，对于典型的数据过滤问题，Apache PIG 是正确的选择吗？还是让自定义 MapReduce 代码来完成这项工作更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:40:29.523

Apache PIG 不用作存储层。PIG 是一种脚本语言，可简化可在 Hadoop 上运行的代码的创建。PIG 脚本被编译成一组 Hadoop MapReduce 作业，这些作业被提交到 Hadoop，并以与任何其他 MapReduce 作业相同的方式运行。

Hadoop 负责数据存储，而不是 PIG。

回答您的问题：不，输入数据的大小没有限制。只要输入数据可以被 PIG 加载函数解析并且可以被 Hadoop InputFormats 分割。

PIG 脚本比标准 Java Hadoop 作业更容易和更快地编写，并且 PIG 具有许多巧妙的优化，例如多查询执行，这可以使您的复杂查询执行得更快。

# asp.net-mvc - 使用带有分层 asp.net mvc 应用程序和实体框架 edmx 的 ninject

> ID：12618078
> 
> 赞同：1
> 
> 时间：2012-09-27T09:21:01.393
> 
> 标签：asp.net-mvc, dependency-injection, ninject

我正在使用 Entity Framework 5（使用 edmx）在 asp.net mvc 4 中工作。我试图让 Ninject 正常工作，但使用绑定让我很困惑。我以前见过 Ninject，但那是在 WCF 项目中，DI 被设置在 WCF 层中。

现在我有4层：

*   DataAcces（包含 edmx 和存储库，我稍后会展示）
*   业务逻辑（标准 BL）
*   普通（型号）
*   Gui（一个 mvc4 项目）

现在这是棘手的部分：我想在这里使用 DI。我在以前的 WCF 项目中看到它的使用方式是，我的 WCF 层进入了我的 DataAccess，因此我可以使用 kernel.bind。
现在我不想在这里。我没有使用 WCF。我也不想在我的 Gui 中调用我的 DataAccess。

既然我说过我会展示一些代码以供洞察：

DataAccess 中的存储库

```
public class Repo: IRepo
    {
        Entities context = new Entities();

        public IQueryable<PictureSource> PictureSource
        {
            get { return context.PictureSource; }
        }
    } 
```

我的 IRepository 就是这样的：

```
public interface IRepository
    {
        IQueryable<PictureSource> PictureSource { get; }
    } 
```

我想要做的是在我的 BusinessLogic 中。我希望能够做到以下几点：

```
public List<Picture> GetStuff(IRepository Repo)
        {
          //code
        } 
```

现在我在网上看了很多。大约 80% 的示例使用 Web Apim，这对我来说毫无用处。其他 20% 似乎只是“因为它只是一个演示”而为所欲为，并且违反了 Gui-BL-DA 原则。我已经看到了由单层组成的示例，以及在数据访问中执行业务逻辑的示例。ninject wiki 也没有帮助我，因为我是 DI 新手，而且我只看到它在现有应用程序中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:33:25.767

尝试使用 Poor-Man's-DI 进行编码。在您的构造函数中注入您的依赖项！

```
public class BusinessLogic
{ 
  private _repository;

  public BusinessLogic(IRepo repository) 
  { 
     _repository = repository;
  }

  public List<Picture> GetStuff()
  {
      _repository.PictureSource.Where(x=>x.Published == false);
  }
 } 
```

一旦你的代码库正确，在 Ninject 中注册你的依赖项。然后，Ninject 负责将您的 Repository 注入您的 BusinessLogic 类。

请注意，您的 IRepo 中有一个 IQueryable，您应该避免使用它 ( [http://www.infoq.com/news/2012/03/IQueryable-api](http://www.infoq.com/news/2012/03/IQueryable-api) )

编辑：这将是您的解决方案结构和参考：

```
MVC4 (GUI)
 -> DataAccess
 -> BusinessLogic
 -> Common

You need to setup this references, to wire up your bindings.

BusinessLogic
 -> Common (including your Interfaces!)

DataAccess
 -> Common 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T16:43:41.033

```
IKernel kernel = new StandardKernel();
kernel.Load("*.dll"); 
```

这应该在当前目录`NinjectModule`中的所有s 中加载s。`.dll`所以你不需要添加对 DAL 的引用。

# matlab - MATLAB 和卡方检验的拟合优度

> ID：12618082
> 
> 赞同：2
> 
> 时间：2012-09-27T09:21:09.317
> 
> 标签：matlab, statistics, curve-fitting

我想测量指数衰减曲线的拟合优度。我正在使用`lsqcurvefit`MATLAB 函数。有人建议我做[卡方检验](http://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test)。

我想使用 MATLAB 函数`chi2gof`，但我不确定如何告诉它数据正在拟合为指数曲线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:00:05.557

该`chi2gof`函数检验零假设，即一组数据`X`（例如 ）是从某个指定分布（例如指数分布）中抽取的随机样本。

根据您在问题中的描述，听起来您想看看您的数据`X`与指数衰减函数的拟合程度。我真的必须强调，这与测试是否从指数分布中抽取随机样本**完全不同。**`X`如果您将`chi2gof`其用于既定目的，您将得到毫无意义的结果。

`X`测试某些数据对某些函数的拟合优度的常用方法`f`是[最小二乘法](http://en.wikipedia.org/wiki/Least_squares)，或最小二乘法的某种变体。此外，最小二乘法可用于生成检验[拟合优度的](http://en.wikipedia.org/wiki/Goodness_of_fit)检验统计量，其中许多是根据卡方分布分布的。我相信这可能是您朋友所指的。

**编辑：**我有几分钟的空闲时间，所以这里有一些东西可以帮助您入门。免责声明：我从来没有专门研究过这个问题，所以下面的内容可能**不**正确。我将假设您有一组数据 x_n, n = 1, ..., N，以及数据的相应时间戳 t_n, n = 1, ..., N。现在，指数衰减函数是 y_n = y_0 * e^{-b * t_n}。请注意，通过取两边的自然对数，我们得到：ln(y_n) = ln(y_0) - b * t_n。好的，所以这建议使用 OLS 来估计线性模型 ln(x_n) = ln(x_0) - b * t_n + e_n。好的！因为现在我们可以使用标准 R^2 度量来测试拟合优度，`stats`如果您使用`regress`执行 OLS 的函数。希望这可以帮助。我再次强调，我在几分钟内就想到了这个，所以可能有充分的理由说明我的建议是一个坏主意。此外，如果您知道过程的初始值（即 x_0），那么您可能需要查看约束最小二乘法，将参数 ln(x_0) 绑定到其已知值。

# c# - 如何在 c# 5.0 中实现此代码

> ID：12618083
> 
> 赞同：1
> 
> 时间：2012-09-27T09:21:10.147
> 
> 标签：c#, c#-5.0

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Test1
{
    public class NewGenerics<T> where T:new(int)
    {

    }
} 
```

如何正确编写此代码以使其与 C# 5.0 一起编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:31:09.847

一种方法是作弊/解决方法，并使用 new() 和一个设置整数值的接口：

```
namespace Test1
{
    public class NewGenerics<T> where T: IMyInterface, new()
    {
         private static T Create(int theInteger)
         {
              var inst = new T();
              inst.SetTheInteger(theInteger);
              return inst;
         }

         ....
    }
} 
```

您可以使用 Create 方法创建实例并使用整数或您需要的任何值初始化它们。

如果您可以强制所有类型都实现特定的接口，那就是..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:32:00.640

不幸的是，当前 C# 版本中支持的通用约束集不允许指定除无参数构造函数之外的任何必需的构造函数签名。

实现这一点的唯一方法是使用反射进行运行时检查。您可以使用该[`GetType()`方法](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)检索`T`的[`Type`](http://msdn.microsoft.com/en-us/library/system.type.aspx)实例，然后用于[`GetConstructors()`](http://msdn.microsoft.com/en-us/library/system.type.getconstructors.aspx)检索[`ConstructorInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.constructorinfo.aspx)所有构造函数的实例。使用这些，您可以检查其中的任何构造函数是否`T`具有所需的签名，否则抛出异常......在您的`NewGenerics<T>`类的每个构造函数中。

这个解决方案的缺点是它只在运行时检查；它仍然会愉快地编译，并且只有在有人尝试创建您的类的实例时才抛出。

# makefile - 如何将文件从包复制到主代码库？

> ID：12618084
> 
> 赞同：1
> 
> 时间：2012-09-27T09:21:12.080
> 
> 标签：makefile, build-process

我有一个插件包来增强我们产品的工作。这个包包含一些额外的文件和一些修改过的主要代码库文件。但是我们不能直接将这个包与我们的代码库合并。我们的目标是在构建时将此包中的文件复制到主代码库。所以我们必须在makefile中做一些修改。

该包遵循与主代码库目录树类似的目录层次结构。这样做的最佳方法是什么？我正在考虑创建某种脚本来做到这一点。这是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:07:52.480

在没有看到您的任何代码的情况下，我所能建议的只是创建一个始终会执行的 make 目标，并将其作为依赖项的一部分添加到您的主代码库构建中。沿着这些思路

```
final_target : other_dependencies copy_plugin_files
    command_to_build_final_target

other_dependencies : source_files
    command_to_build_other_dependencies

.PHONY : copy_plugin_files #this makes sure this will always execute

copy_plugin_files :
    [insert script or cp command here to copy your plugin files] 
```

如果您需要先复制插件文件，则将`copy_plugin_files`依赖项放在`other_dependencies`after之前`final_target`。

如果您需要插件文件首先运行自己的制作过程，然后将`cd path/to/plugin && $(MAKE)`其作为`copy_plugin_files`目标配方的一部分。

希望有帮助！

# visual-studio - VS 11 -D_SCL_SECURE_NO_WARNINGS 在 Vs 10 中现在被视为错误

> ID：12618087
> 
> 赞同：2
> 
> 时间：2012-09-27T09:21:22.563
> 
> 标签：visual-studio, boost

我试图使用最新的 boost ::split 函数，并且使用较旧的 VS 编译器，在使用它时通常会收到警告，因为它与实现 boost 代码的不安全操作有关。

现在，当使用 Vs 11 时，它会向您抛出一个错误。有没有办法让它在不修改 boost 代码的情况下编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:32:51.780

经过更多测试后，我们发现在命令行上使用 -D_SCL_SECURE_NO_WARNINGS 是可行的。它不再显示错误。

# .net - EF 5 映射关系映射与流式 API

> ID：12618091
> 
> 赞同：1
> 
> 时间：2012-09-27T09:21:33.547
> 
> 标签：.net, entity-framework, fluent-interface

这些是表格，以*结尾的字段是PK。在**Image**表中，**HomeID**或**CarID 之一**必须具有值，而另一个为空。与**Feature**中的类似， 它们是 0 而不是 null，因此可以将其用作 Key ( `this.HasKey`)。但是当我尝试映射时，在相关记录中找不到它们。例如`Home.Images`返回 0 条记录。

```
+---------------+ +-----------------+ +------------- --+ +----------------+ +----------------+
|首页 | |汽车 | |图片 | |特色 | |特征类型 |
|---------------| |-----------------| |---------------| |---------------| |---------------|
|家庭身份证* | |车牌* | |图像ID* | |FeatureTypeId* | |FeatureTypeId* |
|标题 | |品牌 | |姓名 | |家庭身份证* | |姓名 |
|说明 | |型号| |网址 | |车牌* | | |
|地址 | |年 | |家庭I​​D(空) | | | | |
| | | | |车牌号（空） | | | | |
+---------------+ +-----------------+ +------------- --+ +----------------+ +----------------+
```

这些是我的模型和映射的代码。

```
 public class BaseModel
    {
        /// <summary>
        /// Gets or sets Id
        /// </summary>
        public int Id { get; set; }
    }

    public class Home : BaseModel
    {
        /*All direct fields*/

        public List<Image> Images{get; set;}
    }

    internal class HomeMap : EntityTypeConfiguration<Home>
    {
        public HomeMap()
        {
            /* All direct mapping to Properties to ColumnsNames */

            // I tried the following 2 lines 

            //this.HasOptional(p => p.Images).WithRequired().WillCascadeOnDelete(false);
            //this.HasOptional(p => p.Images).WithMany().Map(m => m.MapKey("ImageId")).WillCascadeOnDelete(false);
        }
     }

    /* All the same definition and mapping for the others*/
    /* ImageMap for the relation*/
    /* Image model has a field type `Home` name **Home** */

    internal class ImageMap: EntityTypeConfiguration<Image>
    {
        public ImageMap()
        {
            /* All direct mapping to Properties to ColumnsNames */
            //Currently this is what I am using for the mapping
            this.HasOptional(i => i.Home).WithMany(h => h.Images).HasForeignKey(i => i.HomeID).WillCascadeOnDelete(false);

        }
     } 
```

# image - 具有不同图像宽度的图像滑块幻灯片

> ID：12618092
> 
> 赞同：2
> 
> 时间：2012-09-27T09:21:38.247
> 
> 标签：image, slider

我有一个 div 宽度让我们说 width:900px; 高度：300px；溢出：隐藏；进入 div 有一些高度：300px 和不同宽度的图像以及 10px 的小右边距/填充；因此，支架中将有 2 个或更多图像可见。我需要 2 个按钮将图像滑动到 0 点（左：0；）。因此，当我按下下一个箭头时，下一个图像（对于一小部分可能已经可见）在 0 点向左滑动。

我找不到任何像这样工作的滑块:(

* * *

编辑找到它！

[http://jquery.lemmonjuice.com/plugins/slider-variable-widths.php](http://jquery.lemmonjuice.com/plugins/slider-variable-widths.php)

# java - Lucene 并行搜索

> ID：12618096
> 
> 赞同：2
> 
> 时间：2012-09-27T09:21:41.173
> 
> 标签：java, search, lucene, executorservice

我已经建立了一个大约 50M 文档的索引（这些文档很短）。我还有大约 1M 的查询要在索引上运行。按顺序选择一个查询并在索引上运行它很简单，但速度很慢。

我试图并行化搜索（仍然很慢）并在已经在 RAM 中的索引上运行多个搜索器。它仍然没有提高性能，所以我想知道 Lucene 是否支持并行搜索，或者考虑到索引在内存中是否有一种有效的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:45:50.740

你怎么知道你的索引在 RAM 中？你在用[`Lucene’s MMapDirectory`](http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html)吗？

另外，你[`IndexReader`用`readOnly=true`](http://wiki.apache.org/lucene-java/ImproveSearchingSpeed)?

顺便说一句，避免使用`RAMDirectory`它[会给你的 GC 带来沉重的负担](http://blog.mikemccandless.com/2012/07/lucene-index-in-ram-with-azuls-zing-jvm.html)。

# c# - 责任链设计模式的替代方案是什么？

> ID：12618101
> 
> 赞同：17
> 
> 时间：2012-09-27T09:22:00.567
> 
> 标签：c#, oop, design-patterns

我正在为业务线应用程序构建邮件模块。情况是，在发送邮件以响应某些输入时，它们应该被分组，这样用户就不会收到几封包含不同项目的连续邮件，而只会收到一封包含所有项目的邮件。此外，邮件应按特定类型分组，这取决于创建邮件通知的输入类型，我有输入列表，每个输入都有其特定的分组类型，例如：

层次结构：**员工**有**流程**有**请求**有**活动**

**活动 1：** *由员工*（因此接收者将在一封邮件中收到他拥有的此活动类型的所有流程的通知）

**活动 2：** *按进程*（接收者将获得一组关于此进程的所有请求的所有通知，以及此活动类型）

**活动 3：** *按请求*（此请求的活动将被分组）

**活动 4：** *按活动*（每个活动将在单独的邮件中发送）

这种分组会不断变化。

您可能会想，为了做到这一点，应该立即进行输入，以便同时生成邮件并进行分组，否则系统如何知道何时等待其他输入以及何时只发送单独的邮件？ . 答案是两者都有，所以我正在做的是设置一个计时器，以便邮件服务每 5 分钟运行一次，一些即时邮件可能会延迟几分钟，但这是一个负担得起的权衡。

所以我选择使用这种[责任链设计模式](https://stackoverflow.com/q/9194922/920359)，结构如下：

![邮件分组结构](../Images/a5247d2eb2907f5c4639d842c02be36b.png)

所以我有两个接口**IGroupingType**，它定义了每种类型应该如何，并且有 2 个方法：`CalculateGrouping()`: 确定这是否是活动的分组。`GroupEmailsToSend()`：如果这是分组，则获取邮件列表。

接口**IGroupingHandler**是调用每个分组类型的服务类，`GetGroupingResult()`只是调用**IGroupingType**具体实现上的 2 个方法，首先`CalculateGrouping()`获得正确的分组，当它找到时，调用`GroupEmailsToSend()`. 该接口还为每个分组注册链中的**下一个**节点。

分组枚举只是为了返回分组计算的结果。

然后还有**EndOfChainSendingGrouping**类，如果没有找到分组，我会立即发送邮件。

基本上我只需要一些关于这种结构的建议，因为我对这种模式有点陌生，它有什么陷阱吗？有什么我可以改进的吗？还是有更好的方法来做到这一点？

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:54:13.650

我认为链接听起来不错，似乎最适合这里。最终，[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)模式可用于过滤接收者列表。

# firefox - 如何在浏览器选项卡之间传递值？

> ID：12618104
> 
> 赞同：1
> 
> 时间：2012-09-27T09:22:06.527
> 
> 标签：firefox, tabs, firefox-addon, clipboard, firefox-addon-sdk

我正在尝试将值从一个选项卡传递到另一个选项卡。

我试过`sessionStorage`剪贴板，但到目前为止没有运气。这是演示，以及代码：

[https://builder.addons.mozilla.org/package/154290/latest/](https://builder.addons.mozilla.org/package/154290/latest/)

它试图做的是获取选定的文本，并将其传递给打开的选项卡：

```
// Create a new context menu item.
var menuItem = contextMenu.Item({
    label: "Check with Proofread Bot",
    context: contextMenu.SelectionContext(),
    contentScript: 'self.on("click", function () {' +
                '  var text = window.getSelection().toString();' +
                '  sessionStorage.setItem("proofread_bot_chrome", text);' +
                '  self.postMessage(text);' +
                        '});',
    onMessage: function(text) {
        clipboard.set(text);
        //sessionStorage.setItem("proofread_bot_chrome", text);
        tabs.open({
          url: "http://proofreadbot.com",
          onOpen: function onOpen(tab) {
            // do stuff like listen for content
            // loading.
            alert(clipboard.get());
            alert(selection.text);
            sessionStorage.setItem("proofread_bot_chrome", clipboard.get());
          }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:27:45.193

`sessionStorage`并且`localStorage`总是绑定到一个域。内容脚本以网页的权限运行，这意味着它们访问该网页的会话存储 - 对于传递数据不是很有用。他们根本没有剪贴板访问权限。

这意味着您无法绕过“传统”消息传递。当您打开选项卡时，您应该附加一个内容脚本，等待它准备好（内容脚本可以发送一条消息来指示）并将文本发送给它。像这样的东西：

```
onOpen: function(tab) {
  var worker = tab.attach({
    contentScript: "self.on('message', function(text) {alert(text);});" +
                   "self.postMessage(null);",
    onMessage: function() {
      worker.postMessage(text);
    }
  });
} 
```

供参考：[通信使用`postMessage()`](https://addons.mozilla.org/en-US/developers/docs/sdk/1.10/dev-guide/guides/content-scripts/using-postmessage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:24:37.303

您应该尝试使用 localStorage 而不是 sessionStorage。localStorage 在同一来源的文档之间共享。尽管它甚至在标签关闭时仍然存在，这可能会也可能不会根据您的要求而定。

sessionStorage 是每个文档的，因此不在选项卡之间共享。

# python - tornado 中的 Token 和 Oauth Access 有什么区别

> ID：12618105
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:22:07.760
> 
> 标签：python, facebook-graph-api, oauth-2.0, tornado

**Tornado**中有**Facebook OAuth2**模块，但我不明白它背后的想法：该示例将从我的墙上获取*“流”*，但是因为我想看看如何使用**Tornado**在 wal 上发布，我找到了[另一个 Python 模块](https://github.com/pythonforfacebook/facebook-sdk)，但是这个不使用**OAuth**，但需要另一个密钥：一个*Token*，当我去**Facebook**并生成它时，它给了我两个应用程序：我从 Tornado 创建的一个，第二个是“Graph API Explorer " 这让我可以在 "Extended Permission" 中生成一个长密钥，但我仍然无法在我的**Facebook** Wall 上发帖。

 ********更新：这是与 Python-Facebook 模块一起使用的代码：

```
import facebook

graph=facebook.GraphAPI("____")
profile = graph.get_object("me")
graph.put_object("me", "feed", message="I am writing on my wall!")
print profile 
```

并给我这个错误：

```
facebook.GraphAPIError: Error validating access token: This may be because the user logged out or may be due to a system error. 
```

Update2：它有效，看来我必须等待一段时间才能验证将令牌保存在他们的数据库中？

所以我的问题仍然是：Tornado 中的 Token 和 OAuth Acces 有什么区别。因为我计划在每次应用程序更新到 Facebook 用户时使用通知（将更新发布在页面的墙上以供该页面的用户看到）

更新3：Facebook似乎不允许在一段时间内发布多个帖子，否则我收到错误消息：

```
Traceback (most recent call last):
File "C:\Users\toto\Desktop\tooooooooooorfacebook.py", line 5, in <module>
graph.put_object("me", "feed", message="this is a test")
File "C:\Python27\lib\site-packages\facebook.py", line 140, in put_object
post_args=data)
File "C:\Python27\lib\site-packages\facebook.py", line 298, in request
raise GraphAPIError(response)
facebook.GraphAPIError: (#506) Duplicate status message 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T11:29:41.673

很抱歉问它，现在我认为它有所不同：

由于令牌有时间限制，因此管理员每次生成它都是一项艰巨的任务，这就是 Tornado 所做的，它每次访问都要求令牌，所以它会得到刷新的令牌。

```
self.facebook_request("/me/home", self._on_stream, access_token=self.current_user["access_token"]) 
```

所以它每次都得到令牌。

再次感谢，再次抱歉。********

# flash - 如何使对象在away3d中接收阴影

> ID：12618106
> 
> 赞同：2
> 
> 时间：2012-09-27T09:22:08.473
> 
> 标签：flash, 3d, flash-cs5, away3d

我对away3d还很陌生。在将带有阴影对象的基本场景组合在一起之后，我想知道为什么它们不会相互叠加阴影？

在我的示例中，平面上方有一个立方体，两者上方都有定向光。我怎样才能让立方体在它下面的平面上投下阴影？

该示例是使用 away 3d 3.6 编写的

```
package  {

import flash.display.MovieClip;
import flash.events.*;
import away3d.containers.View3D;
import away3d.primitives.Cube;
import away3d.primitives.Plane;
import away3d.lights.DirectionalLight3D;
import away3d.materials.PhongColorMaterial;
import away3d.materials.ColorMaterial;
import flash.geom.Vector3D;

public class Test7 extends MovieClip {

    public var view:View3D;
    public var light:DirectionalLight3D;

    public var cube:Cube;
    public var plane:Plane;     

    public function Test7() {
        // constructor code
        view = new View3D();
        view.x = 200;
        view.y = 200;
        view.z = 150;

        light = new DirectionalLight3D();
        light.direction = new Vector3D(0, -1, 0);
        light.brightness = 5;
        view.scene.addLight(light);

        plane = new Plane();
        plane.material = new PhongColorMaterial(0xCCCCCC);
        plane.width = 1000;
        plane.height = 1000;
        plane.segmentsH = 
        plane.segmentsW = 10;
        plane.y = -100;
        view.scene.addChild(plane);

        cube = new Cube();
        cube.rotationX = 45;
        cube.rotationY = 45;
        cube.segmentsD = 
        cube.segmentsH = 
        cube.segmentsW = 10;
        cube.material = new PhongColorMaterial(0x330099);
        view.scene.addChild(cube);

        addChild(view);
        addEventListener(Event.ENTER_FRAME, render);            
    }

    public function render(e:Event):void {
        view.render();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:19:15.340

实时计算阴影对 CPU 来说过于繁重，因此需要 GPU（Away 3D 4.0+） 您应该使用图形编辑器将阴影、漫射照明、全局照明、环境光遮蔽等烘焙到纹理中。这将为您提供超高质量的静态照明，因为全局照明的预先计算可能需要大量时间，而不是实时的 1\30 秒。使场景更加动态您可以将环境立方体贴图添加到模型或原始照明。

这是带有预计算阴影的演示： [http](http://alternativaplatform.com/ru/demos/temple/) ://alternativaplatform.com/ru/demos/temple/ 这个带有环境贴图的演示：http: [//alternativaplatform.com/swf/demos/mobilephone/mobilephone.swf](http://alternativaplatform.com/swf/demos/mobilephone/mobilephone.swf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:34:58.590

似乎您需要在材质中添加一个 shadowMethod。

[http://away3d.com/livedocs/away3d/4.0/away3d/materials/DefaultMaterialBase.html#shadowMethod](http://away3d.com/livedocs/away3d/4.0/away3d/materials/DefaultMaterialBase.html#shadowMethod)

[http://away3d.com/livedocs/away3d/4.0/away3d/materials/methods/FilteredShadowMapMethod.html](http://away3d.com/livedocs/away3d/4.0/away3d/materials/methods/FilteredShadowMapMethod.html)

看看这个演示，看看它是如何实现的

演示：http: [//infiniteturtles.co.uk/projects/away3d4/examples/Intermediate_PerelithKnightMD2/Intermediate_PerelithKnightMD2.html](http://infiniteturtles.co.uk/projects/away3d4/examples/Intermediate_PerelithKnightMD2/Intermediate_PerelithKnightMD2.html)

来源：http: [//infiniteturtles.co.uk/projects/away3d4/examples/Intermediate_PerelithKnightMD2/srcview/](http://infiniteturtles.co.uk/projects/away3d4/examples/Intermediate_PerelithKnightMD2/srcview/)

# parameters - SSIS 2012 使用 CATALOG.start_execution 将参数传递给包

> ID：12618115
> 
> 赞同：4
> 
> 时间：2012-09-27T09:22:45.097
> 
> 标签：parameters, ssis, package

我正在研究从配置表中读取详细信息并将详细信息传递给包的工作流程。有问题的包正在根据作为参数传递的文件名（从静态数据库表中读取）将 CSV 加载到数据库中。

我有骨头工作，我只是不明白如何正确配置目标包中的参数以正确使用它。

在我的调用过程中，我设置参数并执行包如下

```
....    
EXEC CATALOG.set_execution_parameter_value @ExecutionID
    ,@object_type = 30          -- (30 is package param!)
    ,@parameter_name = N'Parameter1'
    ,@parameter_value = @Parameter1

EXEC CATALOG.start_execution @ExecutionID 
```

object_type 似乎有 3 个用于*项目、包或执行*参数的选项......

在我的目标包中，我将**Parameter1**定义为包参数（在包设计的参数选项卡中列出

我已经配置了“平面文件源”并且连接管理器属性-> 表达式，我将 ConnectionString 覆盖设置为 @[Package::Parameter1]，这似乎不起作用。

谢谢。

.. 更新。从 execution_parameter_values 视图中，我突出显示了传递给包的内容：-

param_idexe_id|object_t|param_t|Parameter_name|parameter_value
3492|10184|20|String|Parameter1|
3493|10184|30|String|Parameter1|c:\abc.csv
3494|10184|30|String|CM.BLACKBEAST-II.StagingDB.ConnectionString|数据源=BLACKBEAST-II；初始目录=StagingDB；提供者=SQLNCLI11。 1；集成安全=SSPI；自动翻译=假；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T21:40:20.367

引用包级别变量将使用`@[Namespace::VariableName]`您显示的模式。

参数，无论是包还是项目，都将使用`@[$Project::VariableName]`和/或的语法`@[$Package::VariableName]`。

因此，在 ConnectionString 上的表达式中，您应该使用`@[$Package::Parameter1]`（并选择了一个更好的名称，但您已经知道了）。

# javascript - facebook oAuth 没有重定向回应用程序

> ID：12618123
> 
> 赞同：0
> 
> 时间：2012-09-27T09:23:10.973
> 
> 标签：javascript, facebook, jsp, oauth-2.0

我正在尝试调用 facebook oauth login。一旦弹出与 facebook 登录页面一起出现，它不会再次重定向到同一个应用程序。

```
<html>
<head>
   <script type="text/javascript" src="/mp/struts/js/base/jquery-1.7.1.min.js"></script>
   <script type="text/javascript" src="/mp/maincommon/static/js/all.js"></script>
   <script type="text/javascript">
       function onFaceBookAuth(user){
          var id = user['id'];
          var firstName = user['first_name'];
          var lastName = user['last_name'];
          var email = user['email'];

          var params = "applicantId="+id+"&firstName="+firstName+"&lastName="+lastName;
          var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            } 
            else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var response = xmlhttp.responseText;
                    if(response.indexOf("new") != -1){
                        $('#applicantId').val(id);
                        $('#fbfirstName').val(firstName);
                        $('#fblastName').val(lastName);
                        $('#fbemail').val(email);
                        $('#applicantRegisterForm').submit();
                    }
                    else{
                        window.location = 'applicantHome.jsp?applicantId='+id;
                    }
                }
        };
        xmlhttp.open("POST", "login?mode=2", true);
        xmlhttp.setRequestHeader("Content-type",
                "application/x-www-form-urlencoded");
        xmlhttp.send(params);
    }

    function fbAsyncInit(){
       FB.init({appId: '307292312637177', status: true, cookie: true, xfbml: true});
       FB.getLoginStatus(function(response) {
            var stringArr=JSON.stringify(response);
              if (response.status == 'connected') {
                  fbLoginStatus = true;
                  showLogoutText();
              } 
              else if (response.status == 'not_authorized') {
                  fbLoginStatus = false;
              } 
              else {
                // the user isn't even logged in to Facebook.
                  fbLoginStatus = false;
              }
             });
       FB.Event.subscribe('auth.login', function(response) {
           FB.api('/me', function(user) {
                if (user) {
                    if(user.id!=undefined){
                    onFaceBookAuth(user);
                    }
                }
              });
        });
        FB.Event.subscribe('auth.logout', function(response) {
        });

        FB.api('/me', function(user) {
            if (user) {
                if(user.id!=undefined){
                onFaceBookAuth(user);
                }
            }
          });
    };

   </script>
</head>
<body>
    <div id="facebookLogin" class="fb-login-button" onclick="fbAsyncInit()" data-scope="email">
                            Login with Facebook</div>
</body>
</html> 
```

弹出来输入 facebook 凭据。但是，之后它不会重定向回同一个应用程序。

这个问题与“appId”有关吗？因为我给了随机数，我不知道给“appId”什么。如何为我的应用程序获取 appId？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:32:02.483

是的，AppId 很重要。您的应用程序的 AppId 可从 Facebook 开发人员页面获得：[https ://developers.facebook.com/apps](https://developers.facebook.com/apps)

您需要先注册一个应用程序，然后才能与 Facebook API 交互，并且为了让 oAuth 正确重定向，您需要向它提供您网站的路径，您可以在上面的 url 提供的详细信息表单中设置该路径。

在根 url 上有更多关于为 Facebook 开发的信息：[https ://developers.facebook.com/](https://developers.facebook.com/)

# android - 如何使用布局适配器内的列表视图显示来自 json 的图像数量，并以编程方式在 android 中创建图像视图布局？

> ID：12618125
> 
> 赞同：1
> 
> 时间：2012-09-27T09:23:15.683
> 
> 标签：android, json, uiimageview

在这里，我使用 for 循环来获取相对布局中的图像布局，这取决于来自服务器的图像。有时来自服务器的 2 张图像或 3 张图像。

```
 @Override
                public View getView(int position, View convertView, ViewGroup parent) {
  HashMap<String,String> map=new HashMap<String, String>();
 static String host = "http://197.0.0.1/";
 static String imgurl=host+"site_media/";

                map=hashmap.get(position);
 InputStream is=null;
                InputStream is1=null;
                Drawable d,d1;
                 String photo1=(map.get(TAG_O));

     int positi=map.get(TAG_O).length();
                //    Log.i("pos",String.valueOf(positi));
                    LinearLayout parentLayout = (LinearLayout)convertView.findViewById(R.id.linear);

                    for (int i = 0; i <3; i++)
                    {
                   //   Log.i("image",photo1);

                        imageView = new ImageView(getApplicationContext());
                   //     imageView.setImageResource(R.drawable.bluecap_32);
                        imageView.setAdjustViewBounds(true);

                        LinearLayout.LayoutParams params = new    LinearLayout.LayoutParams(40,40);
                        imageView.setLayoutParams(params);

               try
                       {     
                    is1 = (InputStream) new URL(imgurl+photo1).getContent();
                       Log.i("photo",photo1);

                       }catch (MalformedURLException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    d1 = Drawable.createFromStream(is1, "src name");
                    imageView.setImageDrawable(d1);
                    parentLayout.addView(imageView, i);
                }
                    } 
```

在这里，我使用 json 从特定数组列表中获取许多图像。所以我想使用带有水平滚动视图和线性布局的图像视图布局以编程方式显示图像。但是这里的图像没有显示在列表视图中。

# css - 将 div 并排放置，一个放在另一个下方

> ID：12618127
> 
> 赞同：1
> 
> 时间：2012-09-27T09:23:22.033
> 
> 标签：css

![在此处输入图像描述](../Images/1cd4f4a2b838b92a04d0a91c85cf8b61.png)

我想`div`根据显示的图像放置。顶部的已经完成但是无法放置底部的两个我当前的样式表如下：

```
 #container {
   position: relative;
   height: 400px;
   width: 100%;
   min-width: 400px;
   margin: 0 auto;

}
#left, #right {
    position: absolute;
    bottom: 201px;
}
#left {
    left: 0;
    width: 484px;
    height: 195px;

}
#right {
    right: 0;
    width: 508px;
    height: 196px;

} 
```

我的容器包含所有 div 的另一件事

有人请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:59:15.370

与此类似的东西 - [**JSFiddle**](http://jsfiddle.net/mbN9Z/1/)？

HTML：

```
<div class="row">
    <div class="col1">One</div>
    <div class="col2">two</div>
</div>
<div class="row">
    <div class="col1">One</div>
    <div class="col2">two</div>
</div> 
```

CSS：

```
.row{ overflow: hidden; margin: 4px; }
.col1, .col2{ float: left; width: 250px; height: 100px; }
.col1{ background: red; }
.col2{ background: green; } 
```

# c# - 根据用户想要使用 C# 的项目数在列表框中动态创建图像控件

> ID：12618128
> 
> 赞同：0
> 
> 时间：2012-09-27T09:23:21.610
> 
> 标签：c#, windows-phone-7

简单的问题，但我完全糊涂了。我正在使用 C# 开发一个 wp7 应用程序。我想要一个列表框，其中输入的图像项编号应该相同，即列表框应包含“n”图像控件，其中源设置为单个图像，其中“n”是用户输入的列表框项的编号。例如，如果用户输入'10'，那么列表框应该有十个项目。我希望列表框 ItemsPanelTemplate 作为 Wrap-panel。有人可以建议我如何得到这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:52:48.167

在您的 XAML 中定义一个类似这样的 ListBox

```
<ListBox x:Name="ListBoxImages">
    <ListBox.ItemTemplate>
        <DataTemplate>
           <StackPanel>
              <Image Source="{Binding Imagesource}" Width="300"/>
           </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

然后像这样在后面的代码中设置它的Source

```
int noOfImages = 10; //Take the input from user
List<ImageClass> imageList = new List<ImageClass>();
for(int i=0; i<noOfImages; i++)
imageList.Add(new ImageClass() { Imagesource = "/user.jpg" });

ListBoxImages.ItemsSource = imageList; //Set the source of the listbox here 
```

ImageClass 在哪里，

```
public class ImageClass
{
    public String Imagesource { get; set; }
} 
```

以上是供您理解的示例。请明智地定制以满足您的需求

# html - 横幅插件中的溢出隐藏/可见

> ID：12618131
> 
> 赞同：0
> 
> 时间：2012-09-27T09:23:33.187
> 
> 标签：html, css, wordpress

我正在使用 wordpress 插件来滑动图像和文本。这个横幅有一个内容区域（和所有的一样），其中显示幻灯片的图像。可以从后端添加文本和图像。允许文本显示在图像上。我的意思是文字将显示在图像上。

我想要做的是强制该内容区域之外的文本，以便在它之外显示它。

```
 <div class='uds-bb-slides'>
       <!--slide 1-->
       <div class='uds-bb-slide'><a href="" class='uds-bb-link'>image source 1</a> 
      <div class='uds-bb-description uds-undefined' style='top:185px;left:0px;width:270px;height:34px;'>
              <div class='uds-bb-description-inside'>this is slide one text</div>
            </div>
      </div>
      <!--slide 2-->
       <div class='uds-bb-slide'><a href="" class='uds-bb-link'>image source 2</a> 
      <div class='uds-bb-description uds-undefined' style='top:185px;left:0px;width:270px;height:34px;'>
              <div class='uds-bb-description-inside'>this is slide two text</div>
            </div>
      </div>
</div> 
```

以上是插件输出。从页面加载的 javascript 中，**uds-bb-slides**被设置为**溢出：隐藏**，以便在内容中显示的滑动图像不会显示在内容之外。

这是未显示强制文本的问题。但是当在插件 js 文件中时，我让它**溢出：可见**。文本显示在外面，但横幅图像不仅显示在内容框中。Theay 从最右边来，然后向左走。我的意思是它没有正确显示它的动画

我的问题是如何在图像幻灯片正确显示时强制将文本放在外面。

用于在页面加载时隐藏**uds-bb-slides**溢出的插件 Javascript 片段

```
b(".uds-bb-slides",h).css({overflow:"hidden"}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:37:52.793

我不确定你对生成的标记有多大程度的控制，但如果可能的话，我建议以某种方式让`div`with 类`uds-bb-description uds-undefined`成为 的兄弟`.uds-bb-slides`，它具有`overflow: hidden`. 然后，您可以尝试从那里定位它。

您可以通过将两者放在包装器下来做到这一点，并将`div`两个`position: relative`子`div`元素设置为，`position: absolute`以便您可以相对于容器定位它们。

如果从插件更改输出标记太困难，您可以尝试使用 JavaScript 进行。jQuery 将使这项工作更容易，但不是绝对必要的。

基本思想是移动 DOM 中的文本，使其不再`.uds-bb-slides`是`overflow: hidden`.

**编辑：**

啊……我刚刚注意到你有`.uds-bb-slides`and`.uds-bb-slide`类，我把第二个误认为是第一个。

在这种情况下，您可能需要进行一些“黑客攻击”才能获得您想要的结果。该插件可能有一些 JavaScript 来处理整个`.uds-bb-slide`元素的可见性和移动，这意味着文本将随之而来。

*选项1：*

我不确切知道您希望它看起来如何，但在我看来，您希望文本位于侧面，但也像图像一样滑入。你可以做的一件事是有两个`.uds-bb-slides`元素。第一个将是带有图像的常规图像，但现在没有任何文本。第二个将只有没有背景图像的文本。然后，您可以将触发图像滑动的事件附加到导致文本滑动的事件。

假设有一个按钮（我不知道是否真的有一个），您可以单击它来滑动图像。你可以用 jQuery 做这样的事情：

```
// This is jQuery
$('.btnSlideImage').click(function() { // when you slide the image...
    $('.btnSlideText').click(); // trigger text slide
}); 
```

您甚至可以复制他们使用的任何代码，然后将其应用到您的第二个滑块，以实现与第一个相同的事件。

这样做的问题是您获得了第二个滑块，它可能会阻止点击或具有默认背景。您可以只将`height`and设置`width`为`0px`和 set `overflow: visible`，以便显示文本。同样，在不知道实际情况的情况下很难给出确切的细节。

*选项 2：*

您可以编写自己的文本滑块并将其放置在正确的位置。它甚至不必滑动——也许淡入淡出对你有用，使用 jQuery、CSS3 甚至纯 JavaScript 可能更容易做到。

然后，您可以将事件处理程序附加到导致图像滑动的任何内容，如选项 1 中所示：

```
// This is jQuery too
$('#whatever_makes_image_slide').click(function() {
    SlideMyText();
}); 
```

# c# - 代理的 WebService 错误

> ID：12618132
> 
> 赞同：0
> 
> 时间：2012-09-27T09:23:33.013
> 
> 标签：c#, asp.net, web-services, proxy

我有带有 asp.net Web 服务（wsdl）的 ac#win 应用程序。如果我启用了代理，应用程序将停止工作，当我查看事件日志查看器时，我会看到以下错误：

```
Framework Sürümü: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.ServiceModel.ProtocolException
Stack:

Server stack trace: 
at: System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factory, WebException responseException, ChannelBinding channelBinding)

at: System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
at: System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
at: System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
at: System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
at: System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at: System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
at: System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(System.Runtime.Remoting.Messaging.IMessage, System.Runtime.Remoting.Messaging.IMessage)
at: System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(System.Runtime.Remoting.Proxies.MessageData ByRef, Int32)
at: MatriksMessenger.MsgService.ServiceSoap.IsBlocked(System.String, System.String, System.String)
at: MatriksMessenger.LoginForm.CallService()
at: System.Threading.ThreadHelper.ThreadStart_Context(System.Object)
at: System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
at: System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
at: System.Threading.ThreadHelper.ThreadStart() 
```

我可以从浏览器访问网络服务。我怎样才能找到解决方案？

谢谢，

赢 7 , 框架 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:12:27.253

听起来 web 服务正在使用安全/身份验证设置，这些设置取决于用户与服务位于同一域中。

然后，如果您通过代理调用服务，安全性（用户）通常会丢失。当您在代理上使用 basicHttpBinding 时就是这种情况，因为这是默认设置，所以我假设您正在这样做。

如果您希望您的 web 服务能够验证用户，即使用户和服务位于不同的域中，您需要使用另一个绑定，例如 ws2007HttpFederationBinding (WIF)。

如果您只需要确保您的代理设置不会妨碍您，您可以更改 Windows 应用程序的 app.config 文件中的设置，以便服务调用将绕过代理并直接调用服务。这可以通过在 app.config 中设置绑定规范的属性来完成，有关 basicHttpBinding 可用属性的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms731361.aspx](http://msdn.microsoft.com/en-us/library/ms731361.aspx)。

您应该更改的属性是 bypassproxyonlocal 和 usedefaultproxy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:09:11.577

我想到了。我已将此行添加到 app.config

```
 <system.net>
            <defaultProxy enabled="true" useDefaultCredentials="true">
            </defaultProxy>
            <settings>
              <servicePointManager expect100Continue="false" />
            </settings>
      </system.net> 
```

# c# - Windows 安装程序中的通用应用程序数据路径

> ID：12618136
> 
> 赞同：5
> 
> 时间：2012-09-27T09:23:53.737
> 
> 标签：c#, .net, windows-installer, programdata

当我搜索时，Windows 分区中有一个名为“ProgramData”的文件夹，其中包含应用程序在运行时使用的应用程序数据。由于此文件夹不需要管理员权限并且在系统用户之间很常见，因此它是放置运行时文件的最佳位置。在 C#.Net 中，我通过以下代码到达此文件夹地址：

```
Application.CommonAppDataPath 
```

问题是当我通过 Visual Studio 安装项目创建 Windows 安装程序（msi 文件）时，我找不到将数据放入其中的正确文件夹。我想知道如何将此文件夹添加到我的安装项目中。

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T06:10:19.647

以下是添加它的方法：

1.  转到项目中的“文件系统”视图，然后右键单击“目标机器上的文件系统”
2.  在“添加特殊文件夹”下选择“自定义文件夹”并为其命名
3.  现在右键单击该文件夹并选择“属性窗口”
4.  将“DefaultLocation”属性设置为：“[CommonAppDataFolder]”
5.  现在您可以在这个新文件夹下添加您想要的任何子文件夹，并将所需的文件放在那里，您的文件应该安装在所需的路径中。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367992(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367992(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:42:23.370

由于许可的内容，我发现我的问题对于我的目的是错误的。我找到的解决方案写[在](https://stackoverflow.com/questions/5584380/visual-studio-installer-how-to-target-windows-public-documents-folder)stackoverflow.com 中，我在我的应用程序中通过以下代码将其混合以获取公共文档的地址。

```
private static string getAddress()
    {
        RegistryKey rk = Registry.LocalMachine;
        RegistryKey sk = rk.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\explorer\\Shell Folders");
        string address = "";
        if (sk != null)
        {
            address = (string)sk.GetValue("Common Documents", @"c:\Users\Public\Documents");
        }
        return address;
    } 
```

让我们概述一下我所说的和所做的，首先我发现我想要的是错误的，ApplicationData 文件夹仅供其创建者访问，而我想要一个在所有用户之间共享的文件夹。所以我找到了这个[链接](https://stackoverflow.com/questions/5584380/visual-studio-installer-how-to-target-windows-public-documents-folder)并按照它，在我的安装程序项目中的 FileSystem Explorer 中创建我想要的文件夹。然后我更改了我的 C# 代码并让它从注册表中读取地址。

# asp.net-mvc - ASP.NET MVC 4 捆绑和缩小：在调试模式下使用 Url 重写的错误路径

> ID：12618139
> 
> 赞同：2
> 
> 时间：2012-09-27T09:24:05.587
> 
> 标签：asp.net-mvc, url-rewriting, asp.net-mvc-4, asp.net-optimization

我想使用[ASP.NET MVC 4 捆绑和缩小](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)功能，请假设我们运行调试模式，因此没有捆绑任何内容，但每个引用都简单地呈现给单个标签。本地一切正常：

**例子**

```
 public static void RegisterBundles(BundleCollection bundles)
 {
      bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                  "~/Scripts/jquery-{version}.js"));
 } 
```

现在从视图调用`@Scripts.Render("~/bundles/jquery")`时，会生成一个类似的标签：

```
 <script src="/Scripts/jquery-1.8.2.js"></script> 
```

如果我只写，结果**是一样的：**

```
 <script src="@Url.Content("~/Scripts/jquery-1.8.2.js")"></script> 
```

但是当我将所有内容部署到 Internet 中的测试服务器时（仍然使用调试模式），启用了一些**Url 重写**，我将特定域或子域路由到特定文件夹。

例如，如果域`sub1.example.com`然后转发到`example.com/__sub1__`和在转发到的情况下`sub2.example.com`等等`example.com/__sub2__`。当我`sub1.example.com`在浏览器中打开时，通常没有任何线索表明会发生这种情况，Url 没有改变，所有 Url 仍然有效，使用该`Url.Content(...)`方法生成的引用也是如此。

但出于某种奇怪的原因，对`@Scripts.Render("~/bundles/jquery")`now 的调用呈现如下内容：

```
 <script src="/__sub1__/Scripts/jquery-1.8.2.js"></script> 
```

请注意“/ **sub1** ”部分，它是不应该生成的部分，并且永远不会出现在呈现的 html 代码中的某个位置，并且由于 url 重写转发失败而导致 404。

尽管...

```
<script src="@Url.Content("~/Scripts/jquery-1.8.2.js")"></script> 
```

...仍然将正确的相对路径呈现到“/Scripts/jquery-1.8.2.js”。而且我从来没有遇到过像这样重写 URL 的其他问题。而且我不想摆脱这种重写。

显然，这同样适用于样式表。

有什么我可以尝试的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:23:16.443

这是脚本/样式帮助器的当前实现的一个错误，这应该在不久（10 月初）可用的 1.1-alpha1 版本中修复，因为对使用在 ASP.NET 中注册的 VirtualPathProvider 的支持已经修复了这个一般问题问题类别（正确解析资源路径）。

# c# - 如何查询 SqlDataReader 对象以包含数据？

> ID：12618140
> 
> 赞同：-2
> 
> 时间：2012-09-27T09:24:08.340
> 
> 标签：c#, asp.net, sql-server

我正在使用用户名和密码登录，这是我在 DAL 中的代码

```
public static SqlDataReader login(SchoolBAL bal)
 {
  SqlConnection con = DBConnection.OpenConnection();
  try
   {
   int i;
   SqlCommand cmd1 = new SqlCommand("login", con);
   cmd1.CommandType = CommandType.StoredProcedure;
   cmd1.Parameters.AddWithValue("@username", bal.UserName);
   cmd1.Parameters.AddWithValue("@password", bal.Password);
   SqlDataReader dr = cmd1.ExecuteReader();
   return dr;
   }catch (Exception)
    {
      throw;
    }
 } 
```

但我想在这里返回一个整数，我该怎么做？

编辑：：

```
 Create procedure login
(@username varchar (50),@password varchar (50))

as
begin
select UserName,password from tblLogin where UserName=@username and password=@password
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:28:14.870

如果你想`int`从你的存储过程中返回，那么使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar%28v=vs.71%29.aspx) - 并返回那个值。

但是你也许应该考虑一下这个设计，这个价值对任何人意味着什么？

也许使用一个`Enum`甚至是真/假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:26:22.760

您正在返回的引用`DataReader`但返回的方法类型是`int`. 更改方法的返回类型。

```
public static bool login(SchoolBAL bal)
{
  bool isFound=false;
  using(SqlConnection con = DBConnection.OpenConnection())
   {
    using(SqlCommand cmd1 = new SqlCommand("login", con))
    {
     cmd1.CommandType = CommandType.StoredProcedure;
     cmd1.Parameters.AddWithValue("@username", bal.UserName);
     cmd1.Parameters.AddWithValue("@password", bal.Password);
     con.Open(); 
     SqlDataReader dr = cmd1.ExecuteReader();
     if(dr.Read())
       isFound=true;
     dr.Close();
     con.Close();
     }
    }
  return isFound;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:29:39.873

```
public static int login(SchoolBAL bal)
   {
       SqlConnection con = DBConnection.OpenConnection();
       try
       {
           int i;
           SqlCommand cmd1 = new SqlCommand("login", con);
            cmd1.CommandType = CommandType.StoredProcedure;
           cmd1.Parameters.AddWithValue("@username", bal.UserName);
           cmd1.Parameters.AddWithValue("@password", bal.Password);
           i = cmd1.ExecuteScalar();
           return i;              

       }
       catch (Exception)
       {

           throw;
       }
   } 
```

# magento - CMS Magento 中的自定义图像字段

> ID：12618141
> 
> 赞同：0
> 
> 时间：2012-09-27T09:24:11.017
> 
> 标签：magento

我正在尝试在 Magento CMS 页面中创建自定义图像字段。

这是我采取的步骤，

1.  在名为“banner”的数据库中创建了一个带有 cms_page 的附加列 - 这是一个 varchar (255)。

2.  用上传器代码修改了“app/code/core/Mage/Adminhtml/controllers/Cms/PageController.php”（见底部）。

3.  修改了“app/code/core/Mage/Adminhtml/Block/Cms/Page/Edit/Tab/Content.php”，添加了名为“banner”的新字段，其字段类型为“image”。

4.  删除“var/cache/”和“var/session/”中的所有内容

它只是简单地不上传/保存数据库中的文件名。为了尝试诊断发生了什么，我在 saveAction() 下方添加了 print_r($_FILES) ，它返回了一个空数组。

我错过了关键的一步吗？

这是相关代码，

**app/code/core/Mage/Adminhtml/controllers/Cms/PageController.php -**

```
public function saveAction()
{
    if ($data = $this->getRequest()->getPost()) {
        $data = $this->_filterPostData($data);
        //init model and set data
        $model = Mage::getModel('cms/page');

            if(isset($data['banner']['delete']) && $data['banner']['delete']=='1'){
                if(!empty($data['banner']['value'])){
                    $path = Mage::getBaseDir('media') . DS;
                    if(@unlink($path.$data['banner']['value'])){
                        $data['banner']='';
                    }
                }   
            }
            if(isset($_FILES['banner']['name']) && !empty($_FILES['banner']['name'])) {
                try {
                $uploader = new Varien_File_Uploader('banner');
                $uploader->setAllowedExtensions(array('jpg','jpeg','gif','png')); // or pdf or anything
                $uploader->setAllowRenameFiles(true);
                // setAllowRenameFiles(true) -> move your file in a folder the magento way
                // setAllowRenameFiles(false) -> move your file directly in the $path folder
                $uploader->setFilesDispersion(true);
                $path = Mage::getBaseDir('media') . DS;

                //$uploader->saveresized($path, $_FILES['nfile']['name'],100,72);
                //$_tmp_nfilethumb = $uploader->getUploadedFileName();

                $uploader->save($path, $_FILES['banner']['name']);
                $_tmp_nfile = $uploader->getUploadedFileName();

                //$data['nfilethumb'] = $_tmp_nfilethumb;
                $data['banner'] = $_tmp_nfile;

                }catch(Exception $e) {

                }
            }elseif(isset($data['banner']['value']) && !empty($data['banner']['value'])){
                $data['banner']=$data['banner']['value'];
            }   

        if ($id = $this->getRequest()->getParam('page_id')) {
            $model->load($id);
        }

        $model->setData($data);

        Mage::dispatchEvent('cms_page_prepare_save', array('page' => $model, 'request' => $this->getRequest()));

        //validating
        if (!$this->_validatePostData($data)) {
            $this->_redirect('*/*/edit', array('page_id' => $model->getId(), '_current' => true));
            return;
        }

        // try to save it
        try {
            // save the data
            $model->save();

            // display success message
            Mage::getSingleton('adminhtml/session')->addSuccess(
                Mage::helper('cms')->__('The page has been saved.'));
            // clear previously saved data from session
            Mage::getSingleton('adminhtml/session')->setFormData(false);
            // check if 'Save and Continue'
            if ($this->getRequest()->getParam('back')) {
                $this->_redirect('*/*/edit', array('page_id' => $model->getId(), '_current'=>true));
                return;
            }
            // go to grid
            $this->_redirect('*/*/');
            return;

        } catch (Mage_Core_Exception $e) {
            $this->_getSession()->addError($e->getMessage());
        }
        catch (Exception $e) {
            $this->_getSession()->addException($e,
                Mage::helper('cms')->__('An error occurred while saving the page.'));
        }

        $this->_getSession()->setFormData($data);
        $this->_redirect('*/*/edit', array('page_id' => $this->getRequest()->getParam('page_id')));
        return;
    }
    $this->_redirect('*/*/');
} 
```

**app/code/core/Mage/Adminhtml/Block/Cms/Page/Edit/Tab/Content.php -**

```
protected function _prepareForm()
{   
    $model = Mage::registry('cms_page');

    /*
     * Checking if user have permissions to save information
     */
    if ($this->_isAllowedAction('save')) {
        $isElementDisabled = false;
    } else {
        $isElementDisabled = true;
    }

    $form = new Varien_Data_Form();

    $form->setHtmlIdPrefix('page_');

    $fieldset = $form->addFieldset('content_fieldset', array('legend'=>Mage::helper('cms')->__('Content'),'class'=>'fieldset-wide'));

    $wysiwygConfig = Mage::getSingleton('cms/wysiwyg_config')->getConfig(
        array('tab_id' => $this->getTabId())
    );

    $fieldset->addField('content_heading', 'text', array(
        'name'      => 'content_heading',
        'label'     => Mage::helper('cms')->__('Content Heading'),
        'title'     => Mage::helper('cms')->__('Content Heading'),
        'disabled'  => false,
    ));
             $content999Field = $fieldset->addField('banner', 'image', array(
        'name'      => 'banner',
            'label'     => Mage::helper('cms')->__('Banner'),
        'title'     => Mage::helper('cms')->__('Banner'),
    ));

    $contentField = $fieldset->addField('content', 'editor', array(
        'name'      => 'content',
            'label'     => Mage::helper('cms')->__('Layout 1'),
        'title'     => Mage::helper('cms')->__('Layout 1'),
        'style'     => 'height:36em;',
        //'required'  => true,
        'disabled'  => $isElementDisabled,
        'config'    => $wysiwygConfig
    ));

         $content2Field = $fieldset->addField('content2', 'editor', array(
        'name'      => 'content2',
            'label'     => Mage::helper('cms')->__('Layout 2'),
        'title'     => Mage::helper('cms')->__('Layout 2'),
        'style'     => 'height:36em;',
        //'required'  => true,
        'disabled'  => $isElementDisabled,
        'config'    => $wysiwygConfig
    ));
        $content3Field = $fieldset->addField('content3', 'editor', array(
        'name'      => 'content3',
            'label'     => Mage::helper('cms')->__('Content'),
        'title'     => Mage::helper('cms')->__('Content'),
        'style'     => 'height:36em;',
        //'required'  => true,
        'disabled'  => $isElementDisabled,
        'config'    => $wysiwygConfig
    ));

    // Setting custom renderer for content field to remove label column
    //$renderer = $this->getLayout()->createBlock('adminhtml/widget_form_renderer_fieldset_element')
               // ->setTemplate('cms/page/edit/form/renderer/content.phtml');
   // $contentField->setRenderer($renderer);

    $form->setValues($model->getData());
    $this->setForm($form);

    Mage::dispatchEvent('adminhtml_cms_page_edit_tab_content_prepare_form', array('form' => $form));

    return parent::_prepareForm();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:31:59.317

尝试在下面添加这一行`$form->setValues($model->getData());`：

```
$form->setEnctype(Zend_Form::ENCTYPE_MULTIPART); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:59:39.080

我补充说，

Form.php 中的 'enctype' => 'multipart/form-data' 并修复了它。

```
class Mage_Adminhtml_Block_Cms_Page_Edit_Form extends Mage_Adminhtml_Block_Widget_Form
{

    protected function _prepareForm()
    {
        $form = new Varien_Data_Form(array('id' => 'edit_form', 'action' => $this->getData('action'), 'method' => 'post', 'enctype' => 'multipart/form-data'));
        $form->setUseContainer(true);
        $this->setForm($form);
        return parent::_prepareForm();
    }

} 
```

# google-chrome-extension - 从打包应用程序到扩展程序的消息传递

> ID：12618145
> 
> 赞同：1
> 
> 时间：2012-09-27T09:24:26.007
> 
> 标签：google-chrome-extension, message-passing, google-chrome-app

我看过[这篇](http://developer.chrome.com/extensions/messaging.html)关于在扩展之间传递消息的文章，当你知道扩展 id 时，它就可以工作。

但是，我真正想做的是将消息从打包的应用程序传递到扩展程序。我尝试实施上述文章中的步骤。但我收到未定义 chrome.extension 的消息。

我认为这是因为它是一个打包的应用程序，它没有 chrome.extension。

有没有办法做到这一点？

谢谢啊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T04:13:31.000

您应该能够通过[Web Intents](http://webintents.org/)完成，特别是可以针对特定应用程序/扩展的“显式”变体。请参阅应用程序存储库中的[此示例](https://github.com/GoogleChrome/chrome-app-samples/tree/master/explicit-webintents)，了解通过显式 Web 意图进行通信的两个应用程序（相同的概念可以应用于扩展程序和应用程序，除了扩展程序将通过[清单中指定的 URL](http://developer.chrome.com/extensions/manifest.html#intents)接收意图）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:49:03.723

> 跨扩展消息传递
> 
> 除了在扩展中的不同组件之间发送消息之外，您还可以使用消息传递 API 与其他扩展进行通信。这使您可以公开其他扩展可以利用的公共 API。
> 
> 侦听传入的请求和连接类似于内部情况，不同之处在于您使用 runtime.onMessageExternal 或 runtime.onConnectExternal 方法。

[http://developer.chrome.com/dev/extensions/messaging.html](http://developer.chrome.com/dev/extensions/messaging.html)

# php - 不带小数或 2 个小数的格式字符串

> ID：12618146
> 
> 赞同：1
> 
> 时间：2012-09-27T09:24:26.790
> 
> 标签：php

我有一个浮点数。我想将其转换为具有以下两个规则的字符串

*   如果浮点数没有小数部分，则不要创建任何小数部分
*   如果浮点数有小数部分，则将其转换为两位小数

例如

```
499 => "499"
499.5 => "499.50"
499.99 => "499.99"
499.989 => "499.99" 
```

你会如何在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:27:26.993

我认为这应该为您解决问题：

```
if(round(($var*100),0)%100==0)
{
    echo round($var,0);
}
else
{
    echo round($var,2);
} 
```

可能有一种更优雅的方法，但这将通过以下方式起作用：

如果浮点数乘以 100 并四舍五入以 00 结尾（足够接近以四舍五入到没有小数），则回显它没有任何小数位。否则它会四舍五入到小数点后两位——浮点数应该注意舍入太多，所以我认为总会有两个可见的点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:28:24.840

您可以在 PHP中`number_format`使用[类型转换](http://php.net/manual/en/language.types.type-juggling.php) `(string)`

```
$numbers = array(499,499.5,499.99,499.989);
foreach ( $numbers as $number ) {
    var_dump(__format($number));
} 
```

使用的功能

```
function __format($number) {
    if (is_float($number)) {
        return number_format($number, 2);
    } else {
        return (string) $number;
    }
} 
```

输出

```
string '499' (length=3)
string '499.50' (length=6)
string '499.99' (length=6)
string '499.99' (length=6) 
```

# c - 在 Pro*C 语言中，VARCHAR 和 char 有什么区别

> ID：12618150
> 
> 赞同：1
> 
> 时间：2012-09-27T09:24:49.087
> 
> 标签：c, varchar, proc

我是 Pro*C 编码的新手。VARCHAR 和 char 有什么区别吗？我可以将 VARCHAR 数据选择到字符数组中吗？会有副作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:27:25.773

是 Pro*C 预编译器添加的`VARCHAR`特殊类型，在基础 C 语言中不存在。`VARCHAR`但是，如果我没记错的话，在 C 中，您可以将变量作为结构访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:33:23.787

Char 代表一个字符，而 varchar 代表一个可变长度的字符串（char 数组）。

# php - Facebook 使用 PHP 邀请朋友加入应用程序

> ID：12618151
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:24:49.897
> 
> 标签：php, facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我正在使用[Graph API在](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)[PHP](http://en.wikipedia.org/wiki/PHP) [SDK中创建一个](http://en.wikipedia.org/wiki/Software_development_kit)[Facebook](http://en.wikipedia.org/wiki/Facebook)应用程序，我需要一个页面来邀请我的朋友加入该应用程序。PHP中是否有任何方法可以做到这一点？

我已经看到了[JavaScript](http://en.wikipedia.org/wiki/JavaScript)方法，但它不符合我的要求（我需要它作为一个页面而不是 JavaScript 弹出窗口）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:57:14.053

阅读[文档](https://developers.facebook.com/docs/reference/dialogs/requests/)。如果您不使用[JavaScript](http://en.wikipedia.org/wiki/JavaScript)方法，请参阅*直接 URL 示例*段落。

# c++ - 变量声明位置的编译器优化

> ID：12618152
> 
> 赞同：-2
> 
> 时间：2012-09-27T09:24:50.767
> 
> 标签：c++, compiler-optimization

我从[C++ 常见问题解答](http://www.parashift.com/c++-faq-lite/declare-near-first-use.html "C++ 常见问题")中读到“应在首次使用时声明本地变量”。此外，出于性能原因，Scott Meyer 的 Effective C++ Item 26 也建议使用它。但我最近碰巧听到有人说编译器足够聪明，可以优化定义变量的地方，而不管它们在函数中实际使用的范围如何。他建议在函数顶部声明变量以便于理解（虽然我不相信这个原因）。他对编译器优化是否正确？

（问题是关于性能和编译器优化。不是代码可读性）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T09:30:54.337

编译器与它无关。关于定义变量（本地或其他）有两个一般规则：保持范围和可见性尽可能小，如果可能，在定义中进行初始化。这些规则适用于人类读者，而不是编译器。作为推论，两者都确实导致“宣布当地人接近他们的第一次使用”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:29:23.090

是的，他们足够聪明。

但也有一个软件技术答案：你应该这样做，因为它是一种更好的编程风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:29:55.727

将变量声明放在使用变量的位置附近会增加局部性，并且可以使代码和程序流程更易于理解。此外，如果一个变量被放置在一个嵌套的范围内，那么它会在离开它声明的范围时被“破坏”，这有助于处理 RAII 之类的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:30:58.243

您应该始终努力编写易于阅读和理解的源代码。

即使编译器能够对此进行优化，这样做仍然是一个好习惯。它为您提供了**改进的可读性**，您无需缓存并记住变量在块开始时初始化的值。

# android - Android - 当我打开只读数据库时尝试写入只读数据库

> ID：12618153
> 
> 赞同：1
> 
> 时间：2012-09-27T09:24:50.533
> 
> 标签：android, sqlite

我一点也不明白。我尝试以这种方式打开位于我的 SD 卡中的数据库：

```
db = SQLiteDatabase.openDatabase(myPath, null, 
           SQLiteDatabase.NO_LOCALIZED_COLLATORS | SQLiteDatabase.OPEN_READONLY); 
```

但在这一行中，它抛出了这个异常：

> android.database.sqlite.SQLiteException：尝试写入只读数据库

它不会发生在我的其他设备上，只有这个具有 android 2.3.3 的设备

# web-services - 如何反序列化Web服务中的对象数组。？

> ID：12618155
> 
> 赞同：1
> 
> 时间：2012-09-27T09:25:00.067
> 
> 标签：web-services

我是使用 Web 服务的新手，我找不到任何合适的教程来反序列化客户端的对象数组。

我编写了一个客户端，它调用返回对象数组的 Web 服务的方法。但是当我运行我的客户端时，我得到一个异常，我认为它与我的反序列化代码有关。

我收到以下错误，

```
**Error :** SimpleDeserializer encountered a child element, which is NOT expected, in something it was trying to deserialize. 
```

如果有人可以帮助我，我会很高兴，

谢谢阿伦。

# php - 教义多级继承映射

> ID：12618161
> 
> 赞同：4
> 
> 时间：2012-09-27T09:25:10.410
> 
> 标签：php, database, oop, orm, doctrine-orm

我有四种类型的产品，我想将它们映射到 MySQL RDBMS 上的 Doctrine ORM 结构。产品是`PrepaidProduct`, `PostpaidProduct`, `MobilePrepaidProduct`,`MobilePostpaidProduct`结构如下：

```
abstract class Product {
    /**
     * @ORM\Column(type="integer")
     */
    private $price;

    ...
}

class PrepaidProduct extends Product {
    /**
     * @ORM\Column(type="integer")
     */
    private $credit;

    /**
     * @ORM\OneToMany(targetEntity="PrepaidDiscount")
     */
    private $prepaidDiscounts;
}

class PostpaidProduct extends Product {
    /**
     * @ORM\OneToMany(targetEntity="BundleMapping")
     */
    private $bundleMappings;
}

class MobilePrepaidProduct extends PrepaidProduct {
    /**
     * @ORM\ManyToOne(targetEntity="Device")
     */
    private $device;
}

class MobilePostpaidProduct extends PostpaidProduct {
    /**
     * @ORM\ManyToOne(targetEntity="Device")
     */
    private $device;
} 
```

主要思想是我想使用一个服务（工厂），它将使用类的基本类结构`PostpaidProduct`来创建相应的捆绑映射的结构，所以我认为我需要这个作为映射的超类。

在我看来，要走的路是有两个单独的表，一个 for`PostpaidProduct`和一个 for `PrepaidProduct`，并在那些 for `MobilePostpaidProduct`/`PostpaidProduct`和`MobilePrepaidProduct`/上有一个单表继承`PrepaidProduct`。

你们有什么感想？关于最好的建模方法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:16:07.810

如果您使用 RDBMS 层 [MySQL, Postgre]，我认为您的建议是最佳选择。

如果子类有*更多*的属性，最重要的可能是关系，你实际上是在促进组合，你的数据表示不会是稀疏的[即你在主表中不会有很多空字段]。

另一方面，如果您只想坚持作文[在大多数情况下更可取]-是`$device`移动课程中唯一的附加关系吗？如果是这样，您可以在存储库类中编写一个`findAllMobileProducts`方法，该方法将返回设备不为空的每个产品，依此类推。

# wpf - 如何将文本框的内容保存到文本文件中

> ID：12618180
> 
> 赞同：1
> 
> 时间：2012-09-27T09:26:41.580
> 
> 标签：wpf, mvvm, textbox, openfiledialog

我有一个包含一些内容的文本框。我还有一个按钮 (SAVE)，它可以打开 FileSaveDialog 并允许将内容保存在 .txt 文件中。

XAML：

```
<TextBox Height="93" IsReadOnly="True" Text="{Binding Path=ReadMessage, Mode=TwoWay}" Name="MessageRead" />

<Button Content="Save" Command="{Binding Path=SaveFileCommand}" Name="I2CSaveBtn" /> 
```

视图模型：

```
private string _readMessage = string.Empty;
    public string ReadMessage
    {
        get
        {
            return _readMessage;
        }
        set
        {
            _readMessage = value;
            NotifyPropertyChanged("ReadMessage");
        }
    }

public static RelayCommand SaveFileCommand { get; set; }

private void RegisterCommands()
    {            
        SaveFileCommand = new RelayCommand(param => this.ExecuteSaveFileDialog());
    }
private void ExecuteSaveFileDialog()
    {
        //What To Do HERE???
    } 
```

我基本上需要的是读取文本框的内容，打开文件保存对话框并将其存储在要保存在我的系统中的文本文件中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T09:34:26.923

使用[SaveFileDialog](http://msdn.microsoft.com/en-us/library/aa969773.aspx#Common_Dialogs)你可以按照这些思路做一些事情

```
string fileText = ReadMessage; 

SaveFileDialog dialog = new SaveFileDialog() 
{ 
    Filter = "Text Files(*.txt)|*.txt|All(*.*)|*" 
}; 

if (dialog.ShowDialog() == true) 
{ 
     File.WriteAllText(dialog.FileName, fileText); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:36:48.620

尝试这样的事情：

```
SaveFileDialog saveFileDialog1 = new SaveFileDialog();
   saveFileDialog1.Filter = "Text file|*.txt";
   saveFileDialog1.Title = "Save an Image File";
   saveFileDialog1.ShowDialog();

   // If the file name is not an empty string open it for saving.
   if(saveFileDialog1.FileName != "")
   {
 System.IO.File.WriteAllText(saveFileDialog1.FileName, MessageRead.Text);
} 
```

# android - 尝试在android中使用异步从url下载文件时处理异常

> ID：12618183
> 
> 赞同：1
> 
> 时间：2012-09-27T09:26:47.427
> 
> 标签：android, url, exception, asynchronous

我正在使用 AsyncTask 从 Android 中的 URL 下载文件。这是在后台下载文件的类：

```
//-----------------------------ASYNC DOWNLOADER--------------------------------
    /**
     * Background Async Task to download file
     * */
    class DownloadFileFromURL extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread
         * Show Progress Bar Dialog
         * */
        @SuppressWarnings("deprecation")
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(progress_bar_type);
        }

        //TODO Zustzinfos für alle Methoden hinzufügen
        /**
         * This method is called for executing the background task in the AsyncTask.
         * For this tutorial we are only sleeping the thread for the number of 
         * seconds passed as parameter of the function.
         * 
         * @param numSeconds: life of the task
         * @return the result of the background task
         */
        @Override
        protected String doInBackground(String... f_url) {
            int count;
            try {
                URL url = new URL(f_url[0]);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();     
                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(), 8192);     
                // Output stream to write file
                OutputStream output = new FileOutputStream("/sdcard/"+Name+".xml");

                byte data[] = new byte[1024];    
                long total = 0;  
                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress(""+(int)((total*100)/lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }
                // flushing output
                output.flush();  
                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("ASYNC",e.getMessage());
            }
            return null;
        }    
        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... progress) {
            // setting progress percentage
            pDialog.setProgress(Integer.parseInt(progress[0]));
       }     
        /**
        * After completing background task
        * Dismiss the progress dialog
        * **/
        @SuppressWarnings("deprecation")
        @Override
        protected void onPostExecute(String error) {
            // dismiss the dialog after the file was downloaded
            dismissDialog(progress_bar_type);
            String xmlPath = Environment.getExternalStorageDirectory().toString() + "/"+Name+".xml";
            Log.d("XMLDOWNLOADPATH", xmlPath);
            Log.d("DOWNLOADXML","End Download XML file");
        }

    } 
```

我希望能够在我的主要活动（异步类是主要活动的内部类）中识别是否存在异常并在对话框或 Toast 中显示错误消息。

我试图从 to 返回值`doInBackground()`并将`onPostExecute()`此字符串写入全局字符串变量，如下所示：

```
protected String doInBackground(String... f_url) {
String error = null;
try {
}
catch(Exception e){
error = e.toString();
}
return error;

@Override
protected void onPostExecute(String error) {
globalStringvariable = error;
} 
```

但这不能正常工作，对话框并不总是显示异常消息。这是解决我的问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:28:28.843

```
e.getMessage(); 
```

这就是你要找的。另请注意，如果您得到`null`，可能是因为您将其`Exception`作为泛型捕获，您应该始终尝试捕获特定`Exception`的以获取消息。

# android - 如何以编程方式从 Play 商店 URL 获取 Android 应用程序的权限列表？

> ID：12618186
> 
> 赞同：0
> 
> 时间：2012-09-27T09:26:56.293
> 
> 标签：android, google-play

我想从现有 Android 应用程序的包名称（或 google play 商店 URL）开始（例如[https://play.google.com/store/apps/details?id=com.google.android.gm](https://play.google.com/store/apps/details?id=com.google.android.gm)） ，并以编程方式获取它要求的权限列表。

在我对上述 URL 的“权限”选项卡上的 HTML 代码使用 JSoup 之前，我想知道是否存在更简洁的方法。例如，是否有用于此的 JSON API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:38:06.047

Google Play 没有官方 API 可以满足您的需求。

但是，您可能能够使用这个非官方的 API，尽管它似乎已被放弃：

[http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

我认为你最好的选择可能是获取源代码，解析它并祈祷它不会破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T07:14:33.947

目前没有简单的方法。有关此问题的更长讨论（较旧但仍然相关），请参见此处：[https ://android.stackexchange.com/questions/20619/how-to-search-the-play-store-by-permissions/69964#69964](https://android.stackexchange.com/questions/20619/how-to-search-the-play-store-by-permissions/69964#69964)

# c# - 从没有 API 的 asp.net 应用程序将视频上 传到 youtube

> ID：12618190
> 
> 赞同：1
> 
> 时间：2012-09-27T09:27:13.000
> 
> 标签：c#, youtube-api, webservices-client, youtube-channels, youtube.net-api

我只是想知道

用 c# 将视频上传到 youtube 很简单，但我想在不使用他们的 API 的情况下做到这一点。我要为office365 创建一个webpart，所以我不能使用任何外部dll。我只能使用 .NET 框架的程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:31:46.763

不简单，您必须创建一些可以完成其 API 功能的东西。您不必构建所有功能，只需构建您需要的。但是还是；不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:32:38.237

如果你想上传到youtube你应该使用他们的api，否则你无法上传到youtube，如果你的问题是在office365云上安装api，那么你可以寻找Webservices上传到Youtube，在web services的情况下您没有要在云上注册的 dll。

# c# - 将 VB.Net Linq 语句转换为 C#

> ID：12618196
> 
> 赞同：0
> 
> 时间：2012-09-27T09:27:30.250
> 
> 标签：c#, .net, vb.net, linq, silverlight-4.0

我刚刚开始学习 C# 5 (.net 4.5) 并且正在转换现有的 VB.Net Silverlight 4 业务应用程序，但我正在努力转换下面的 Vb.Net 域服务方法。

它没有编译给我“无效的表达式术语'return'”和“预期的contectual keywork 'by'”例外。

你能不能给我一些指导。

**模型**

![在此处输入图像描述](../Images/eb6fc255b2d83ffbb4963bdd0a7247ad.png)

**VB**

```
Public Function GetBusinessUnits() As IQueryable(Of BusinessUnit)

    Dim var1 = From cat In ObjectContext.CabSystemsModelCategories
                Group cat By cat.BUID Into Group
                Select BUID

    Return ObjectContext.BusinessUnits.Include("CabSystemsModelCategories").
                        Where(Function(w) var1.Contains(w.ID)).
                        OrderBy(Function(o) o.ID)

End Function 
```

**C# 到目前为止（不工作）**

```
public IQueryable<BusinessUnit> GetBusinessUnits()
{

        object var1 = from cat in ObjectContext.CabSystemsModelCategories
                    group cat by cat.BUID into group

        return ObjectContext.BusinessUnits.Include("CabSystemsModelCategories").
            Where((w) => var1.Contains(w.ID)).
            OrderBy((o) => o.ID);

} 
```

**编辑**

更改代码以包含选择会产生一个额外的异常“无效的表达式术语'选择'”

```
var result = from cat in ObjectContext.CabSystemsModelCategories
                    group cat by cat.BUID into group select BUID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:56:26.087

您正在分组为“组”，这是 C# 中的保留字。尝试这个：

```
var result = from cat
             in ObjectContext.CabSystemsModelCategories
             group cat by cat.BUID
             into grouping
             select grouping; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:11:01.820

好的，这是工作方法。

```
public IQueryable<BusinessUnit> GetBusinessUnits()
{
    var includedBU = from cat in ObjectContext.CabSystemsModelCategories
                                group cat by cat.BUID into grouping
                                select grouping.Key;

    return ObjectContext.BusinessUnits.Include("CabSystemsModelCategories").
            Where((w) => includedBU.Contains(w.ID)).
            OrderBy((o) => o.ID);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:33:56.467

在您的 C# 示例中，您`Select BUID`在设置时永远不会，`var1`否则它们是等效的。

您使用的是哪个版本的 C#？您可能应该声明`var1`为`var`而不是`Object`

# selenium-webdriver - 单击未激活的 webelement

> ID：12618200
> 
> 赞同：0
> 
> 时间：2012-09-27T09:27:44.027
> 
> 标签：selenium-webdriver

在这里，我有一个表格来填写数据，之后我需要点击添加患者按钮。表格分为四个部分，这些部分显示在选项卡中。默认情况下会加载一个选项卡，我可以毫无问题地对该选项卡中的字段进行操作，但是当我尝试单击另一个选项卡（联系信息）以填写此选项卡中的所有字段时，我遇到了问题。请你帮助我好吗

```
WebElement contact = driver.findElement(By.id("personal-contact-info"));
new Actions(driver).moveToElement(contact).click().perform();
WebElement Address = driver.findElement(By.id("ctl00_ctl00_ContentPlaceholder_ContentPlaceholder_AddPatientForm_TextBox8"));
Address.sendKeys("India"); 
```

HTML代码是

```
<div id="personal-contact-info" class="input-form">
  <div class="container">
    <div class="one-half-container first-container">
      <div class="container">
        <dl>
          <dt>Address</dt>
          <dd>
            <input class="input input-address" name="ctl00$ctl00$ContentPlaceholder$ContentPlaceholder$AddPatientForm$TextBox8" type="text" id="ctl00_ctl00_ContentPlaceholder_ContentPlaceholder_AddPatientForm_TextBox8" />
          </dd>
          <dd>
            <input class="input input-address" name="ctl00$ctl00$ContentPlaceholder$ContentPlaceholder$AddPatientForm$TextBox9" type="text" id="ctl00_ctl00_ContentPlaceholder_ContentPlaceholder_AddPatientForm_TextBox9" />
          </dd>
        </dl>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:25:46.507

如果同一窗口中有多个选项卡，则可能必须使用 Webdriver.switchTo() 方法才能进入正确的选项卡。你试过这个吗？

会是这样的。这是切换到实际 Tab 的 Parent

```
driver.switchTo().defaultContent() 
```

# php - 如何从实时服务器上的图像文件夹中获取图像？

> ID：12618201
> 
> 赞同：0
> 
> 时间：2012-09-27T09:27:46.043
> 
> 标签：php, apache, tomcat

我有一个在 localhost 上运行的 Apache 服务器和一个位于文档根目录中的 images 文件夹。为了获取图像文件夹中的所有图像，我使用以下代码

```
if (is_dir($dir)) {
  if ($dh = opendir($dir)) {
    while (($file = readdir($dh)) !== false) {
    echo "<pre>";
        echo "filename: $file : filetype: " . filetype($dir . $file) . "\n";

    $path = "/images/$file";
    echo "<img src=".$path." alt='image' width='50px' height='50px'>";
    echo "</pre>";
    }
      closedir($dh);
  }
}
?> 
```

实时我的问题是我有一个域`https://www.example.com/`，其中保存了一个图像文件夹，我需要从其中获取所有图像，我可以通过 `https://www.example.com/euf/assets/images/background.jpg`在浏览器中提供 url 来一张一张地查看图像，这意味着 euf文件夹应该保存在服务器的根目录下，所以如果我给出路径， `$dir=$_SERVER['DOCUMENT_ROOT']."euf/assets/images/"`上面的代码应该可以工作....但是在这种情况下代码不起作用。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:53:15.133

尝试这个

```
 <?php
    $dir = $_SERVER['DOCUMENT_ROOT']."your/imagesfolder/path/";
    $dh = opendir($dir);
    while (($file = readdir($dh)) !== false)
    {   

        echo "<pre>";
        echo "filename:". $file." : filetype: " . filetype($file) . "\n";

        $path = "/images/".$file;
        echo "<img src=" . $path . " alt='image' width='50px' height='50px'>";
        echo "</pre>";
    }
    closedir($dh); 
```

# android - Android 布局中的透明度会影响性能吗？

> ID：12618203
> 
> 赞同：4
> 
> 时间：2012-09-27T09:27:49.347
> 
> 标签：android, performance, android-layout

我来自 iOS 背景，其中快速视图的规则之一是尽可能避免使用透明背景和 png。我在 Android 上没有找到任何关于此的信息。所以我的问题是，我应该尽可能使用非透明视图和可绘制对象，还是 Android 不像 iOS 那样关心这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:34:41.423

就像@blackbelt 所说，透明度总是会影响性能。如果可能，请避免使用透明视图和/或图像。

此外，在 Android 中，您可以拥有半透明的视图/活动。这些将比简单的透明度影响性能几个数量级。如果可能的话，也要避免这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-24T17:34:59.323

您可能想查看[有关 overdraw 的 Android 文档](https://developer.android.com/topic/performance/rendering/overdraw)。

> 与标准过度绘制（系统通过在其顶部绘制不透明像素来完全隐藏现有绘制像素）不同，透明对象需要先绘制现有像素，这样才能出现正确的混合方程。

# spring - Spring web mvc 3.0 表单数据和图片上传问题

> ID：12618205
> 
> 赞同：0
> 
> 时间：2012-09-27T09:28:00.047
> 
> 标签：spring, jsp, spring-mvc, file-upload

我是 Spring 和 JSP 的新手。我的 web 应用程序是 spring 驱动的，我在 apache tomcat 中本地运行。

在我的 JSP 页面中，我有多个文件上传输入和许多文本输入字段。

每次，当我按下任何上传按钮时，都会有一个 HTTP`POST`请求发送到我的控制器，从那里我可以将图像保存到数据库中。

但是，我想要的是：

我将一张一张上传图片（最好留在页面中），但不会将它们保存在数据库中，然后当我按下提交以获取其余输入文本字段数据时，我提交所有数据，包括图片，一次尝试向数据库发送文本。

我在 dispatcher-servlet.xml 中听说过`scope="session"`我的控制器（bean）......但我不确定如果我将图像上传到我的控制器并返回到我的 JSP 表单，bean 会保留我已经上传的图像吗？

我认为我很难解释，所以如果我的问题不清楚，请告诉我。

如果有人能提出可能有助于实现我的目标的建议，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:54:35.760

我认为最好的方法是使用 ajax 控件上传文件，而不是为每次上传提交表单并将文件引用存储在会话范围变量（属性）中。有很多库都具有基于 ajax 的文件上传功能，例如 extJS、JQuery、GWT、DWR，以及您在 Web 应用程序中使用的任何 ajax 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:25:40.487

您是否要上传不同数量的图像，例如如果有人只想上传 2 个他们将在表单上有 2 个文件字段，或者每个人都有 5 个字段？

老实说，在这个阶段，增量上传的整个方案听起来有点过于复杂。（除非您明确需要在每次上传时显示进度条等）如果用户在上传第一张图片后放弃表单怎么办？您需要一个非常可靠的机制来跟踪整个访问，将其保留在会话中不会有帮助。用户可以从中断的地方继续吗？如果您首先使用单个表单提交单击使整个事情起作用，您可以将其分解并稍后微调该过程。我提到，既然你说你是 jsp 和 Spring 的新手（否则你对 web 开发的经验是什么？）

# javascript - 在插入 DOM 之前绑定 jQuery 事件

> ID：12618214
> 
> 赞同：2
> 
> 时间：2012-09-27T09:28:43.200
> 
> 标签：javascript, dom, jquery

我的问题是在将某些 DOM 元素插入 dom 之前，我必须在它们上创建事件侦听器。

现在通常这很容易，如下所示：

```
var button = $('<button>Click Me</button>');

button.on('click', function(){ alert('clicked'); });

$('body').append(button); 
```

但是，问题是我需要将按钮包装在其他 html 中，如本例所示：

[http://jsfiddle.net/a8xjJ/](http://jsfiddle.net/a8xjJ/)

如果我将按钮对象与 html 字符串混合，则事件侦听器会中断。那是事件侦听器与对象失去联系的时候，非常合乎逻辑。

我的问题是我需要使用 html 字符串，这是项目的限制。也许有一种方法可以在字符串上使用 dom 选择器？或者，也许您可​​以想出另一种方法来使上述小提琴工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:35:50.837

[`.delegate()`](http://api.jquery.com/delegate/)您可以使用JQuery的功能绑定动态元素。

我已将您的小提琴更新[为此](http://jsfiddle.net/a8xjJ/3/)。

```
var button = $('<button>Click Me</button>');
var html = '<form>' + button.clone().wrap('<div/>').parent().html() + '</form>';
$('div').append(html);

$(document).delegate(button,'click', function(e){ 
    e.preventDefault(); 
    alert('Clicked');
}); 
```

您还可以使用[`.on()`](http://api.jquery.com/on/)将事件绑定到动态元素上。

```
$(document).on('click', button, function(e){ 
    e.preventDefault(); 
    alert('Clicked');
}); 
```

请注意，此方法将 event 作为其第一个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:33:32.607

如果您开始使用对象，请尽量不要使用它们的字符串表示形式（它只输出*shell*，但不输出事件和其他数据）。您问题的一种可能解决方案：

```
$("<button>Click Me</button>").on("click", function(e) {
    e.preventDefault();
    alert("Clicked");
}).wrap("<form><div></div></form>").closest("form").appendTo("div"); 
```

**演示：http:** [//jsfiddle.net/a8xjJ/2/](http://jsfiddle.net/a8xjJ/2/)

# solr - 索引完成后 DataImportHandler 在做什么？

> ID：12618215
> 
> 赞同：0
> 
> 时间：2012-09-27T09:28:46.677
> 
> 标签：solr, lucene

我正在使用solr索引大约40m个项目，最终索引文件大约是20G。以下是增量导入后的消息：

```
<lst name="statusMessages">
<str name="Time Elapsed">0:51:44.149</str>
<str name="Total Requests made to DataSource">1</str>
<str name="Total Rows Fetched">5634016</str>
<str name="Total Documents Skipped">0</str>
<str name="Full Dump Started">2012-09-27 01:25:17</str>
<str name="">
Indexing completed. Added/Updated: 5634016 documents. Deleted 0 documents.
</str> 
```

我想知道什么 solr 正在做这个状态？并且消息*replication?command=details*返回是：

```
<lst name="masterDetails">
<str name="indexSize">36.69 GB</str> 
```

该指数几乎翻了一番，而且还会更大。这让我非常困惑。我正在做增量导入，为什么替换时索引会是双倍大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:30:17.673

如果您要更换大部分文件，这是正常的。lucene 中的更新包括文档的删除和重新插入，因为索引段是一次写入的。当您删除一个文档时，您并没有真正删除它，而只是将其标记为已删除，同样因为这些段是一次性写入的。

当下一次合并发生时，删除的文档将被真正删除，此时将从您拥有的小段中创建一个新的更大的段。那是您应该看到索引大小减小的时候。这意味着您的索引大小不仅应该增加。合并或多或少根据使用的合并策略发生。如果要手动强制合并，可以使用 forceMerge 操作，这是优化的新名称。根据使用的 solr 版本，您需要使用第一个或第二个。小心，因为如果您有很多文档，forceMerge 需要一段时间。也看看[这篇](http://www.searchworkings.org/blog/-/blogs/simon-says%3a-optimize-is-bad-for-you)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-13T03:50:03.607

在 Solr 3.6 之前，dataImportHandler 默认设置 optimize=true：

[http://wiki.apache.org/solr/DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)

无论其他设置如何，这都会触发将所有段合并为一个段。我认为您可以通过向 debug.jsp 添加一个优化复选框来解决这个问题，尽管我实际上并没有尝试过。

# css - 防止复选框被选中

> ID：12618217
> 
> 赞同：0
> 
> 时间：2012-09-27T09:28:55.713
> 
> 标签：css, asp.net-mvc

我可能在这里遗漏了一些明显的东西。我有一个网页，其中包含一个带有文本框和复选框的表单。

问题是该复选框只能在`<%= Html.SubmitButton ...`用作提交按钮时被选中，但我想使用`<input type="submit ...`该按钮但使用它会阻止用户单击复选框以使其选中。

什么原因可能导致这种情况？对替代/尝试的东西有什么建议吗？

注意：这只发生在 IE7 中。

**编辑：**按钮的标记是：

```
<input type="submit" value="<%=GetPlainText("testbutton", "test button")%>" /> 
```

但是，我发现如果我使用以下内容它可以工作 - 有没有办法让它看起来像一个默认按钮？即必须为它设置一个css类吗？

```
<%= Html.SubmitButton("none").Value("test button") %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:57:58.637

提交按钮将触发回发事件，复选框检查不会发生。使用 jquery 提交您的表单。使用一个简单的按钮和 onclick 调用一个 javascript 函数

```
 <button class="gbtn" onclick="submituserEntry()">
                                    <span class="label">Submit</span>
                                </button>

function submituserEntry(){
 var ChangeReq = { "CurrentPassword": exstpwd, "NewPassword": newpwd }

                var jsondata = JSON.stringify(ChangeReq)
                $.ajax({
                    type: 'POST',
                    url: "/myController/changeAction",
                    cache: false,
                    data: jsondata,
                    timeout: 10000,
                    contentType: "application/json; charset=utf-8",
                    success: function (_results) {
                        alert(_results.Message);
                    },
                    error: function (_results) {
                    }
                });} 
```

并在控制器中

```
[HttpPost]
    public ActionResult changeAction(passwordmodel _model)
    {
      String CurrentPassword=_model.CurrentPassword;
      String NewPassword= _model.NewPassword
      //do your stuff
      return View("Changesuccess");
     } 
```

# eclipse - 将axis2的简单模块或扩展实现为eclipse项目

> ID：12618218
> 
> 赞同：0
> 
> 时间：2012-09-27T09:28:57.583
> 
> 标签：eclipse, module, axis2

我希望设置一个 Eclipse 项目来实现一个简单的模块，而不是一个轴服务。我想知道是否有我可以使用的模板？

其次，我想问一下是否有任何信息来源，例如关于如何在eclipse中构建复杂的Axis2应用程序的链接，主要关注模块构建

我很欣赏你的提示。最好的问候，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:01:57.877

我可以用我自己的解决方案来解决这个问题：

使用基于axis2模块构建的自定义build.xml，我能够使用ant在Eclipse中构建模块项目。我通过快捷键触发。

build.xml 有一个 deploy.module 目标，它将模块放回axis2 $HOME/repository 文件夹。在那里运行 ant build.xml 将把axis2作为一个war-file（EAR）部署在其中，其中包含的模块准备好部署在诸如jboss之类的容器中。

eclipse 项目基于 CLASSPATH 中包含 $AXIS2/lib 的普通 java 项目（非动态 web 项目）。

由于 Jboss 支持更新时的热部署，因此您可以在终端或使用 eclipse 运行 jboss。我定制了后者的 build.xml 以支持简单的 jboss 部署。

这对我来说是一个很好的解决方案。

# php - 单步执行 PHP 更改 MySQL 结果

> ID：12618219
> 
> 赞同：0
> 
> 时间：2012-09-27T09:29:11.113
> 
> 标签：php, mysql

在普通的 PHP 5.3 下，我有一些代码使用 MySQL 首先删除一些旧记录，记录日志，执行一些小操作，然后添加新的替换记录。

删除命令如下所示：

```
DELETE FROM `rtable` WHERE `UserName`='%s'; 
```

添加命令如下所示：

```
INSERT INTO `table` (`UserName`,`Attribute`,`op`,`Value`) VALUES ('%s','%s','%s','%s'); 
```

奇怪的是，插入命令在正常运行时似乎没有执行，但是如果我启用调试器并一次单步执行一行，它似乎可以工作。同样，如果我在删除命令之后插入一个两秒的睡眠命令。它似乎工作。因此，我假设插入命令在删除命令之前运行，因此删除命令也在擦除新记录。

如何让 PHP 在继续插入命令之前等待删除操作完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:40:41.623

我不完全确定 PHP 如何处理进程以及如何运行连续查询，但如果您想确保将删除封装在事务中，您可以使用 PDO 执行此操作，如下所示：

```
$dbh->beginTransaction();
$sth = $dbh->exec("DELETE FROM `rtable` WHERE `UserName`='%s'");
$dbh->commit();
// You could also pop a transaction around the inserts 
// in case another page tries to do the same
$sth = $dbh->exec("INSERT INTO `table` 
    (`UserName`,`Attribute`,`op`,`Value`) 
    VALUES ('%s','%s','%s','%s')"); 
```

顺便说一句：我冒昧地将单引号更正为您的查询中的反引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:39:57.813

这听起来真的很奇怪。你碰巧有一个复制的数据库集群吗？此外，您是否检查 mysql_query 或任何命令的返回值并打印错误消息（当然不建议将其用于生产脚本）？

# eclipse - Qt Eclipse 集成插件是否仍可供下载？

> ID：12618223
> 
> 赞同：21
> 
> 时间：2012-09-27T09:29:21.670
> 
> 标签：eclipse, qt, eclipse-plugin

我想开始在 Eclipse IDE 中使用 Qt 开发一个新的 C++ 应用程序。我从诺基亚读到了一个 Qt 集成插件，但找不到它可以下载，也没有任何官方声明它是否已停产或重命名。

Eclipse 是否还有 Qt GUI 插件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T09:40:23.373

很久以前就停止了它的工作，当 Qt 成为开源时，它已经过时了，它从下载页面中删除了。[不过， Softpedia](https://www.softpedia.com/get/Programming/Other-Programming-Files/Qt-Eclipse-Integration.shtml)上仍提供 Windows 版本。

我必须说，如果我是你，我会使用 Qt Creator。在过去的几年里，它的开发速度加快了，它在 Qt 工作上比 Eclipse 好得多（我实际上也更喜欢它用于一般的 C++ 工作）。

# sql-server - Tsql group by 子句有例外

> ID：12618226
> 
> 赞同：0
> 
> 时间：2012-09-27T09:29:25.997
> 
> 标签：sql-server, tsql, group-by

我有一个查询问题。

这是数据（按时间戳排序）：

```
Data
    ID  Value   Timestamp
    1   0       2001-1-1
    2   0       2002-1-1
    3   1       2003-1-1
    4   1       2004-1-1
    5   0       2005-1-1
    6   2       2006-1-1
    7   2       2007-1-1
    8   2       2008-1-1 
```

我需要提取不同的值和日期的第一次出现。这里的例外是，只有在该时间范围内没有被新值打断时，我才需要对它们进行分组。所以我需要的数据是：

```
ID  Value   Timestamp
1   0       2001-1-1
3   1       2003-1-1
5   0       2005-1-1
6   2       2006-1-1 
```

我已经通过一个复杂的查询完成了这项工作，但我确信有一种更简单的方法可以做到这一点，只是想不出。有人可以帮忙吗？

这就是我开始的 - 可能可以解决这个问题。这是一个应该在值更改时定位的查询。

```
 > SELECT * FROM Data d1 join Data d2 ON d1.Timestamp < d2.Timestamp and
    > d1.Value <> d2.Value 
```

它可能可以通过很好地使用 row_number 子句来完成，但无法管理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:43:16.760

样本数据：

```
declare @T table (ID int, Value int, Timestamp date)
insert into @T(ID,  Value,   Timestamp) values
(1,   0,       '20010101'),
(2,   0,       '20020101'),
(3,   1,       '20030101'),
(4,   1,       '20040101'),
(5,   0,       '20050101'),
(6,   2,       '20060101'),
(7,   2,       '20070101'),
(8,   2,       '20080101') 
```

询问：

```
;With OrderedValues as (
    select *,ROW_NUMBER() OVER (ORDER By TimeStamp) as rn --TODO - specific columns better than *
    from @T
), Firsts as (
    select
        ov1.* --TODO - specific columns better than *
    from
        OrderedValues ov1
            left join
        OrderedValues ov2
            on
                ov1.Value = ov2.Value and
                ov1.rn = ov2.rn + 1
    where
        ov2.ID is null
)
select * --TODO - specific columns better than *
from Firsts 
```

我不依赖于`ID`连续且没有间隙的值。如果是这种情况，您可以省略`OrderedValues`（使用表格和`ID`代替`OrderedValues`and `rn`）。第二个查询只是查找没有前一行相同的行`Value`。

结果：

```
ID          Value       Timestamp  rn
----------- ----------- ---------- --------------------
1           0           2001-01-01 1
3           1           2003-01-01 3
5           0           2005-01-01 5
6           2           2006-01-01 6 
```

`rn`如果您需要此特定顺序的结果，您可以订购。

# postgresql - 将 csv 文件的一些列复制到表中

> ID：12618232
> 
> 赞同：74
> 
> 时间：2012-09-27T09:29:39.827
> 
> 标签：postgresql

我有一个包含 10 列的 CSV 文件。创建具有 4 列的 PostgreSQL 表后，我想将 10 列中的一些复制到表中。

我的 CSV 表的列如下：

```
x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 
```

我的 PostgreSQL 表的列应该是这样的：

```
x2 x5 x7 x10 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-27T11:04:22.110

## 如果是临时任务

使用输入文件中的所有列创建一个临时表

```
create temporary table t (x1 integer, ... , x10 text) 
```

从文件中复制到其中：

```
copy t (x1, ... , x10)
from '/path/to/my_file'
with (format csv) 
```

现在从 temp 插入最终表：

```
insert into my_table (x2, x5, x7, x10)
select x2, x5, x7, x10
from t 
```

放下它：

```
drop table t 
```

## 如果是频繁的任务

使用[`file_fdw`扩展名](http://www.postgresql.org/docs/current/static/file-fdw.html)。作为超级用户：

```
create extension file_fdw;

create server my_csv foreign data wrapper file_fdw;

create foreign table my_csv (
    x1 integer,
    x2 text,
    x3 text
) server my_csv
options (filename '/tmp/my_csv.csv', format 'csv' )
; 
```

将 table 的 select 权限授予将要读取它的用户：

```
grant select on table my_csv to the_read_user; 
```

然后在必要时直接从 csv 文件中读取，就好像它是一个表一样：

```
insert into my_table (x2)
select x2
from my_csv
where x1 = 2 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-08-01T00:08:57.557

You can provide the columns your want to fill with the `COPY` command. Like so:

```
\copy your_table (x2,x5,x7,x10) FROM '/path/to/your-file.csv' DELIMITER ',' CSV; 
```

[Here's the doc](http://www.postgresql.org/docs/9.3/static/sql-copy.html) for the `COPY` command.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2018-04-18T18:08:42.127

正如其他答案所指出的那样，可以指定要复制到 PG 表中的列。但是，如果没有在 CSV 中引用列名的选项，除了加载到列具有不同顺序的表中之外，它几乎没有用处。

幸运的是，从 Postgres 9.3 开始，不仅可以从文件或标准输入复制列，还可以使用 PROGRAM 从 shell 命令复制列：

> 程序
> 
> 要执行的命令。在 COPY FROM 中，输入从命令的标准输出中读取，而在 COPY TO 中，输出被写入命令的标准输入。
> 
> **请注意，该命令由 shell 调用，因此如果您需要将任何来自不受信任来源的参数传递给 shell 命令，则必须小心去除或转义任何可能对 shell 具有特殊含义的特殊字符**。出于安全原因，最好使用固定的命令字符串，或者至少避免在其中传递任何用户输入。

这是我们急切期待的功能所需的缺失部分。例如，我们可以将此选项与`cut`（在基于 UNIX 的系统中）结合使用以按顺序选择某些列：

`COPY my_table (x2, x5, x7, x10) FROM PROGRAM 'cut -d "," -f 2,5,7,10 /path/to/file.csv' WITH (FORMAT CSV, HEADER)`

但是，**`cut`在操作 CSV 时有几个限制**：它不能充分地操作带有逗号（或其他分隔符）的字符串，并且不允许按名称选择列。

还有其他几个开源命令行工具可以更好地处理 CSV 文件，例如**[csvkit](https://github.com/wireservice/csvkit)**或**[miller](https://github.com/johnkerl/miller)**。这是一个使用`miller`按名称选择列的示例：

`COPY my_table (x2, x5, x7, x10) FROM PROGRAM 'mlr --csv lf cut -f x2,x5,x7,x10 /path/to/file.csv' WITH (FORMAT CSV, HEADER)`

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-02-16T09:48:14.050

刚到这里是为了寻求一种只加载列子集的解决方案，但显然这是不可能的。因此，使用 awk （或`cut`）将想要的列提取到新文件中`new_file`：

```
$ awk '{print $2, $5, $7, $10}' file > new_file 
```

并加载`new_file`. 您可以将输出直接通过管道传输到`psql`：

```
$ cut -d \  -f 2,5,7,10 file | 
  psql -h host -U user -c "COPY table(col1,col2,col3,col4) FROM STDIN DELIMITER ' '" database 
```

注意`COPY`，不是`\COPY`。

**更新：**

正如评论中指出的那样，上述示例都不能处理数据中的引号分隔符。换行符也是如此，因为 awk 或`cut`不知道 CSV。不过，可以使用 GNU awk 处理带引号的分隔符。

这是一个三列文件：

```
$ cat file
1,"2,3",4 
```

使用 GNU awk 的[`FPAT`](https://www.gnu.org/software/gawk/manual/html_node/Splitting-By-Content.html)变量，即使引用的字段中有字段分隔符，我们也可以更改字段的顺序（或获取它们的子集）：

```
$ gawk 'BEGIN{FPAT="([^,]*)|(\"[^\"]+\")";OFS=","}{print $2,$1,$3}' file
"2,3",1,4 
```

解释：

```
$ gawk '
BEGIN {                          # instead of field separator FS
    FPAT="([^,]*)|(\"[^\"]+\")"  # ...  we define field pattern FPAT
    OFS=","                      # output field separator OFS
} 
{
    print $2,$1,$3               # change field order
    # print $2                   # or get a subset of fields
}' file 
```

请注意，这`FPAT`只是 GNU awk。对于其他 awks，它只是一个常规变量。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-08T13:41:13.903

您可以进一步采纳 James Brown 的建议，并在一行中执行所有操作：

```
$ awk -F ',' '{print $2","$5","$7","$10}' file | psql -d db -c "\copy MyTable from STDIN csv header" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-05T11:53:25.703

如果导入的行数对您来说并不重要，您还可以：

创建两个表：

*   t1（x1 x2 x3 x4 x5 x6 x7 x8 x9 x10）：包含csv文件的所有列
*   t2 (x2 x5 x7 x10)：根据需要

然后创建：

*   一个触发函数，您可以在其中将所需的列插入 t2 并返回 NULL 以防止该行被插入 t1

*   调用此函数的 t1 (BEFORE INSERT FOR EACH ROW) 的触发器。

特别是对于较大的 csv 文件，BEFORE INSERT 触发器对于预先过滤具有某些属性的行也很有用，您也可以进行类型转换。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-04T06:12:05.033

要将电子表格（Excel 或 OpenOffice Calc）中的数据加载到 postgreSQL 中：

将电子表格页面保存为 CSV 文件。首选方法是在 OpenOffice Calc 上打开电子表格并进行保存。在“导出到文本文件”窗口中，选择字符集为 Unicode (UTF8)、字段分隔符：“,”和文本分隔符“”。将显示消息说只保存活动工作表。注意：此文件必须保存在文件夹中，但不能保存在桌面上，并且必须以 UTF8 格式保存（默认的 postgreSQL 是 UTF8 编码的升级）。如果保存在桌面上，postgreSQL 将给出“拒绝访问”消息并且不会上传。

在 PostgreSQL 中，创建一个与电子表格具有相同列数的空表。

注意：在每一列上，列名必须相同，数据类型必须相同。另外，请记住字符随足够字段而变化的数据长度。

然后在 postgreSQL 上，在 SQL 窗口上，输入代码：

复制 "ABC"."def" 从 E'C:\\tmp\\blabla.csv' delimiters ',' CSV HEADER;

注意：这里 C:\\tmp 是保存 CSV 文件“blabla”的文件夹。“ABC”.“def”是在 postgreSQL 上创建的表，其中“ABC”是模式，“def”是实际表。然后按顶部的绿色按钮执行“执行查询”。当 CSV 表在每列的开头都有标题时，需要“CSV HEADER”。

如果一切正常，则不会显示错误消息，并且 CSV 文件中的表数据将被加载到 postgreSQL 表中。但如果出现错误信息，请执行以下操作：

如果错误消息表明特定列的数据太长，则增加列大小。这主要发生在字符和字符变化列上。然后再次运行“执行查询”命令。

如果错误消息表明数据类型与特定列不匹配，则更改 postgreSQL 表列上的数据类型以匹配 CSV 表中的数据类型。

在您的情况下，创建 CSV 文件后，删除不需要的列并匹配 postgre 表中的列。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2021-03-26T13:16:39.733

一种快速的方法是将表复制到本地目录是：

```
\copy (select * from table_name) to 'data.csv' CSV; 
```

# sql - 使用 sql 查询删除所有级别的子项

> ID：12618234
> 
> 赞同：1
> 
> 时间：2012-09-27T09:29:41.593
> 
> 标签：sql, sql-server

我有一个表格，其中列出了可以插入和删除的菜单。

结构如下： -

```
ID  Name                  ParentId
1  1\. Home                    0
2  2\. Products                0
3      a. SubProduct1         2
4      b. SubProduct2         2
5         i. Subsub           4
6         ii. ......          4
7  3\. About                   0 
```

顶级菜单`ParentId`始终为 0，如 1、2 和 7 所示。

子级项目将具有`ParentId`其父级的前级。`Subproduct`有 2 作为它的`parentId`。

当我删除菜单项时，应该删除所有级别的子项，而不管使用 SQL 查询的级别。

可以有任意数量的级别

级别可以达到 subsubsubsub...... 任何数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:53:50.813

这个查询怎么样：

```
DECLARE @DelID INT
SET @DelID=1

;WITH T(xParent, xChild)AS
(
SELECT ParentID, ChildId FROM Table WHERE ParentID=@DelID
UNION ALL
SELECT ParentID, ChildId FROM TABLE INNER JOIN T ON ParentID=xChild
)
DELETE FROM TABLE WHERE ParentID IN (SELECT xParent FROM T) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:54:48.193

您可以使用公共表表达式来获取从要删除的项目到树 hten 末尾的所有层次结构项目

```
;WITH ParentChildsTree
AS
(
    SELECT ID, Name, ParentId
    FROM MenuItems
    WHERE Id = @itemToDelete
    UNION ALL
    SELECT ID, Name, ParentId
    FROM ParentChildsTree c
    INNER JOIN MenuItems t ON c.ParentId = t.Id
)
DELETE FROM MenuItems 
WHERE ID IN (SELECT ID FROM ParentChildsTree); 
```

## 这是一个[**演示**](https://data.stackexchange.com/stackoverflow/query/edit/81035)。

例如，如果您将参数传递`@itemToDelete = 4`给查询，则带有 id 的项目`2`将`4`被删除。

# asp.net-mvc-3 - 为未映射的属性赋值

> ID：12618239
> 
> 赞同：0
> 
> 时间：2012-09-27T09:29:58.660
> 
> 标签：asp.net-mvc-3, nhibernate

假设，我有一个 Customer 类，其中包含一些属性，例如

*   姓名，
*   ID，
*   CompetentAuthority 类的对象等。

名称、id 等映射在 .hbm 文件中，但我已经收集了 CompetentAuthority 对象，并且我没有在 .hbm 文件中为 CompetentAuthority（一对多）做任何输入。

在 CompetentAuthority 类中，我采用了 Customer 对象，在 CompetentAuthority 的 .hbm 文件中，我做了多对一的关系。

现在，我想要具有 CompetentAuthority 列表的客户列表，但由于它只是一个对象并且没有完成映射，标准 API 不允许我进行内部连接；它给了我类似“无法解析属性”的错误

有什么办法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:11:03.833

如果您想使用 Criteria API 来应用 INNER JOIN，那么您不能这样做。CompetentAuthority 对象需要使用 NHibernate 进行映射，并且需要修改 Customer 对象的映射文件以建立两个实体之间的关系。

如果由于某种原因您无法映射 CompetentAuthority，您可以利用混合 ISession.CreateSQLQuery() 方法和 Transformers.AliasToBean() 方法，这将允许您对未映射的实体进行水合。

有关此技术的更多信息，请参阅标题为“返回非托管实体”的官方 NHibernate 文档部分或搜索使用 AliasToBean() 方法： http://nhibernate.info/doc/nh/en/index [。 html#d0e11066](http://nhibernate.info/doc/nh/en/index.html#d0e11066)

# java - System.out.print 时捕获异常时出错

> ID：12618245
> 
> 赞同：0
> 
> 时间：2012-09-27T09:30:13.150
> 
> 标签：java, exception, try-catch, throw, throws

我有 2 个类，一个实现双重查找（int i）；以及我在解决问题时使用该查找（int i）的地方，或者在这种情况下打印查找值。这种情况适用于数组。

所以我阅读了异常文档或谷歌/教科书并附带以下代码：

```
public double lookup(int i) throws Exception
{
    if( i > numItems)
        throw new Exception("out of bounds");
    return items[i];        
} 
```

并将它交给我的班级并尝试打印我的集合，其中 set 是我在上面的班级中定义的对象类型的名称。

```
public void print()
{
    for (int i = 0; i < set.size() - 1; i++)
    {
        System.out.print(set.lookup(i) + ",");

    }
    System.out.print(set.lookup(set.size()));
} 
```

我正在使用两个 print() 来避免打印中的最后一个“，”，但我得到了一个

未处理的异常 Exception（我的异常名称是 Exception）

我想我必须在我的 print() 中捕获我的异常，但无法在线找到正确的格式。我必须写吗

捕获异常异常？因为这给了我一个语法错误，说 catch 上的类型无效。

像 [http://docs.oracle.com/javase/tutorial/essential/exceptions/](http://docs.oracle.com/javase/tutorial/essential/exceptions/) 这样的来源对我帮助不大，我似乎无法理解文本告诉我的内容。我也很难找到包含多个示例的来源，我实际上可以理解示例中的编码。

那么任何人都可以给我一个上述流行语的来源/示例，也许是新Java程序员的一个不错的示例来源？我的书太可怕了，我似乎无法在网上找到上述流行语的可理解示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:34:04.473

我永远不会抛出异常。

在您的情况下，IndexOutOfBoundException 或 InvalidArgumentException 将是更好的选择。由于这些不是检查异常，因此您不需要捕获它们。

```
public double lookup(int i) {
    if(i >= numItems) // assuming numItems is not items.length
        throw new IndexOutOfBoundException("out of bounds " + i + " >= " + numItems);
    return items[i];        
} 
```

注意：检查应该是`>=`

您的`print()`方法现在将编译不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:49:37.180

**什么是异常？**

例外是针对特殊情况。通常不会发生的情况。举个例子，你去取钱，你的账户有 100 余额，你要求 200，然后 ATM 应该告诉你余额不足。

**异常类型**

*   检查异常

    这些是应用程序想要从中恢复的条件。就像上面给出的例子一样，应用程序会给你错误并继续工作。

*   错误

    这是应用程序外部的异常情况。我们说`OutOfMemoryError`当没有足够的可用内存并且应用程序无法从中恢复时。

*   运行时异常/未经检查的异常

    这些异常是应用程序异常，但在这种情况下应用程序无法从中恢复。例如`NullpointerException`，如果 value 为 null 并且您尝试对它做一些讨厌的事情。

所以上面三个只有检查的异常需要缓存。

**如何抛出和捕获已检查的异常**

`Exception`或任何子类`Exception`都是检查异常。可以使用`throw`子句抛出已检查的异常。一旦抛出异常，就必须将其包含在方法声明中的 using`throws`子句中。

因此，任何想要使用此方法的人现在都必须处理该异常。处理异常意味着调用替代流程。就像在我们的例子中，我们向用户显示文本`"Error Invalid account number."`

调用函数还可以选择`throws`通过为其调用的方法抛出的那些异常添加子句来传播异常。

```
Generate:
public static double withdraw(int i) throws Exception {
    if (i <= 0)// Out of bounds
        throw new Exception("Invalid Account Number");
    return 0.0;// something;
}

Handle:

try {
        withdraw(0);
    } catch (Exception e) {
        // do something with exception here.
        // Log the exception
        System.out.println("Error Invalid account number.");
    }

Propagate:
      public static double callWithdraw(int i) throws Exception {//Propagate exceptions
        return withdraw(i);
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:32:12.843

尝试这个

```
try
{
    print(); //print() needs to throw the same exception
} catch(Exception e)
{
   //handle exception
   System.err.println(e.getMessage()+"\n\n"+e.printStackTrace());
}
//finally {
// cleanup here if you like
// } 
```

或这个

```
public void print()
{
    for (int i = 0; i < set.size() - 1; i++)
    {
        try
        {
            System.out.print(set.lookup(i) + ",");
        } catch(Exception e)
        {
          //handle it here
        }
    }
    System.out.print(set.lookup(set.size()));
} 
```

请注意，使用“投掷”是一种简单的方法；这是一个廉价的委托，有时使编码更容易……如果可以，您应该尝试始终使用 try/catch 而不是 throws。

请注意，无论何时您最终使用带有“抛出”的东西，您都必须将其放入 try/catch 块中并正确处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:36:09.437

通常，要表示传递给您的方法的参数不正确，请使用[IllegalArgumentException](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)，它是 a`RuntimeException`并且不应被捕获。

在这种特定情况下，您不必编写任何额外的代码，[ArrayIndexOutOfBoundsException](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)应该处理不正确的数组访问。

> 抛出以指示已使用非法索引访问数组。索引为负数或大于或等于数组的大小。

# actionscript-3 - 鼠标悬停需要编码读取整行 Flash dataGrid

> ID：12618247
> 
> 赞同：1
> 
> 时间：2012-09-27T09:30:18.940
> 
> 标签：actionscript-3, datagrid, mousehover

Action Script 3 Flash CS5 我们有一个数据网格，它来自一个 csv 文件，来自一个 excel 电子表格。用户将鼠标悬停在一行上，该行中的结算影片剪辑就会显示出来。请问下面这段代码中的编码应该是什么？

我过去在按钮上管理 eventListeners，一个按钮调用一个 MovieClip，但这让我很难过。我在编码方面超出了我的舒适区，所以需要查看代码，请坐在我们的代码中。当您发布编码作为答案时，我遇到了这个网站，它看起来是我们祈祷的答案。

另一个挑战是数据网格显示名称，例如魔鬼桥，但 MC 实例名称和编码不喜欢间隙和撇号，下面的编码现在通过在行中添加字符串来做到这一点。

理想情况下，我们需要它来更改名称，以便它们与幕后的 MC 实例名称相匹配，用户可以看到间隙和撇号，但不确定是如何完成的。

我们具有虚构名称的测试数据网格目前是 3 列，但真正的 mcoy 会有更多。这是针对公交路线的，如果 Excel 表看到由于服务时间过长而添加了另一列，则保存为 csv 我想知道代码是否会看到这个或需要更改？

```
import flash.net.URLLoader;  
import flash.events.Event;  
import flash.net.URLRequest;  
import fl.data.DataProvider;  
import fl.controls.DataGrid;  

var urlLoader:URLLoader = new URLLoader();  
urlLoader.addEventListener(Event.COMPLETE,completeF);  
urlLoader.load(new URLRequest("TestNames.csv"));  
var MyDataGrid:DataGrid  

function completeF(e:Event):void{  
    var dataS:String = e.target.data;  
    var dataA:Array = dataS.split("\n").join("").split("\r");  
    var dpA:Array = [];  
    var itemA:Array;  
    var r:RegExp = /\W/g;  
    for(var i:int=0;i<dataA.length;i++){  
        itemA = dataA[i].split(",");  
        dpA.push({"column1": String(itemA[0]).replace(r, ""), "column2": String(itemA[1]).replace(r, ""), "column3": String(itemA[2]).replace(r, "")});  
    }  
    var dp:DataProvider = new DataProvider(dpA);  
    MyDataGrid.columns = ["column1","column2","column3"]  
    MyDataGrid.dataProvider = dp;  
} 
```

希望你能帮忙。

环境学

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:26:26.820

您必须定义单元格鼠标悬停事件，并在该事件函数中写下将提供颗粒行数据的代码。单元格与行和列相关联。所以我们可以得到行标识。在 Cell MouseOver 事件中，只需获取 Row id 并根据您的要求获取所选行和格式的所有列数据。

# web-services - Spring @Transaction 不适用于 JPA 和 Webservice

> ID：12618248
> 
> 赞同：0
> 
> 时间：2012-09-27T09:30:21.473
> 
> 标签：web-services, spring

我有一个代码，我通过 JPA 更新一个数据库并通过 web 服务更新 1 个数据库。但是如果我从 webservcie 得到一些异常，我的 JPA 事务不会回滚。你能建议我如何让 JPA + Webservice 作为 XA Transaction 工作吗

```
<bean id="transactionManager" class="org.springframework.transaction.jta.WebSphereUowTransactionManager">

</bean>
 <jee:jndi-lookup id="entityManagerFactory" jndi-name="persistence/persistenceUnit"/>

<tx:annotation-driven/> 
```

我的 java 类如下所示

```
@Transactional
public void method1()
{

// persist database1 through JPA

// persist database2 through Webservice
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:22:27.293

Web 服务调用抛出什么类型的异常？

RuntimeExceptions 的默认行为是回滚，因此如果 ws 抛出已检查的异常，则不会回滚，尽管您可以使用以下命令进行更改：

```
@Transactional(rollbackFor = Exception.class) 
```

# gnuplot - GNUPlot x 轴作为字符串

> ID：12618250
> 
> 赞同：0
> 
> 时间：2012-09-27T09:30:31.200
> 
> 标签：gnuplot

是否可以用字符串作为 x 轴进行绘图？

我有以下文件：

> CW15 0,577774
> 
> cw255 0,901639
> 
> cw1023 0,927813

我厌倦了以下：设置数据文件分隔符“，”设置yrange [0.0000：1.00000]

```
plot 'meanFrameDropRatio.data' u 2:xticlabel(1) smooth unique ti 'PPS 20 (Tx-Power = 200mW)' 
```

但我什么也没得到，有什么想法吗？我正在使用 GNUPlot 4.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:56:16.227

好的，我找到了解决方案。问题是使用了 GNUPlot Punkt 而不是 Komma。我不得不添加

```
set decimalsign locale "de_DE.UTF-8" 
```

# java - 带分隔符的 Java 字符串

> ID：12618251
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:30:30.997
> 
> 标签：java, string, delimiter

我有一个字符串“content/users/user/missions/mission”。我需要从中获取“content/users/user/missions”[即字符串到最后一个分隔符]。如何继续？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:33:33.067

如果您的要求如此简单，那么您可以执行以下操作：

```
String string = "content/users/user/missions/mission";
String newString = string.substring(0, string.lastIndexOf('/')); 
```

有更多奇特的方法可以做到这一点，[正则表达式](http://www.regular-expressions.info/)可能是其中之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T09:33:37.677

类中的使用`lastIndexOf`和`substring`方法`String`。

```
String str = "content/users/user/missions/mission";
String result = str.substring(0,str.lastIndexOf('/')); 
```

# iphone - NSDateComponents 不接受输入

> ID：12618255
> 
> 赞同：0
> 
> 时间：2012-09-27T09:30:55.547
> 
> 标签：iphone, objective-c

我有一个行为不端的 NSDateCategory。我正在设置年月日，但结果完全不同：

**变量：** 年 = 2012 月 = 10 天 = 1

```
 + (NSDate *)dateWithYear:(NSInteger)year month:(NSInteger)month day:(NSInteger)day 
    {
        NSCalendar *calendar = [NSCalendar currentCalendar];
        NSDateComponents *components = [[NSDateComponents alloc] init];
        [components setYear:year];
        [components setMonth:month];
        [components setDay:day];
        NSDate *result =  [calendar dateFromComponents:components];

        return result;
    } 
```

**NSLog 输出** 结果 = 2012-09-30 23:00:00 +0000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:38:25.187

添加这一行

```
[components setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]]; 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:21:33.837

这样做：

NSDateComponents* components = [日历组件:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:[NSDate date]];

# c - 如何检查位图数组的至少一个元素是否不为零？

> ID：12618257
> 
> 赞同：-2
> 
> 时间：2012-09-27T09:31:07.113
> 
> 标签：c, arrays, bitmap

我不是在寻找 C 中的函数，宏会有所帮助。这就是我想使用位图的方式。用法 ：

```
int bitmap;
if(bitmap != 0)
   do something
else
   do something 
```

假设位图变成了位图数组，我如何获得相同的结果（不进行函数调用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:34:48.127

您可以遍历数组：

```
int i;
int non_zero_found = 0;
for (i = 0; i < sizeofthearray; ++i)
{
    if (array[i] != 0)
    {
        non_zero_found= 1;
        break;
    }
}
if (non_zero_found)
{
    // do something
} 
```

# c# - 如何根据 Pattern 生成字符串

> ID：12618263
> 
> 赞同：0
> 
> 时间：2012-09-27T09:31:36.363
> 
> 标签：c#, string, string-formatting

我有一个案例，我必须根据特定模式生成交易号模式如下：

> MA 0000000/dd/mm/YYYY/00000

其中第一个零是随机数，然后当前日期和最后一个零应该是递增的

> (00001... 00010... 00100... 00578)

您能否提供正确的方法来实施此案例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T09:41:21.803

```
public static class Generator
{
    static int current = 0;
    static Random rand = new Random();

    public static string NextId()
    {
        return string.Format("MA {0:0000000}/{1}/{2:00000}", 
          rand.Next() % 100000,
          DateTime.Now.ToString("dd/MM/yyyy"),
          current++ );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:37:43.840

```
 public string NextId(int lastCount)
    {
        var rand = new Random();

        return string.Format("MA{0:0000000}/{1}/{2:00000}", 
            rand.Next(9999999),
            DateTime.Today.ToString("dd/MM/yyyy"),
            lastCount + 1);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:38:49.340

```
Random rand = new Random();
int randomNumber = rand.Next(100000000);
int counter = 1;
string str = "MA" + randomNumber.ToString() + DateTime.Now.ToString("/dd/MM/yyyy/") + counter.ToString("X4");
Console.WriteLine(str); 
```

可能您关心两件事： DateTime 格式：您可以使用：`DateTime.Now.ToString("/dd/MM/yyyy/")`

和

将前导零填充到数字中，您可以使用：

`counter.ToString("X4")`

另请参阅：[如何：用前导零填充数字](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:44:40.053

```
Random rand = new Random();
string random = rand.Next(10000000).ToString("D7");
string date = DateTime.Today.ToString("dd/MM/yyyy");
string increment = inc.ToString("D5");
String.Format("MA {0}/{1}/{2}", random, date, increment); 
```

其中 inc 是增量数。你应该知道这一点，或者找出下一个数字应该是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T09:49:43.547

```
for(int i=0;i<n;i++)
{
Console.WriteLine("MA "+(new Random()).Next(0,100).ToString("D7")+DateTime.Now.ToString("dd/MM/yyyy")+ i.ToString("D5"));
} 
```

where`Next()`生成 0 到 100 之间的随机数

`i.ToString("D5")`会给你00001 ..格式的号码

# c# - 自定义代码协定异常消息

> ID：12618265
> 
> 赞同：2
> 
> 时间：2012-09-27T09:31:47.237
> 
> 标签：c#, exception, code-contracts

我有一个这样表达的代码合同 - 它验证要存储的实体不为空并且对持久性有效。有用。晶圆厂。

```
[ContractClassFor(typeof(IRepository<,>))]
internal abstract class ContractsForIRepository<T, TId> : IRepository<T, TId> where T : IEntity
{
    private ContractsForIRepository()
    {

    } 

    public T Persist(T entity)
    {
        Contract.Requires<InvalidEntityException>(entity != null, "Entity is null");
        Contract.Requires<InvalidEntityException>(entity.IsValidForPersistence(), "Entity not valid for persistence");
        return default(T);
    }

} 
```

但是，我希望异常更有用——因为任何接收到消息的人都想知道哪个实体无效以及是什么样子。所有实体都覆盖 ToString()，所以我想将其包含在错误消息中：

```
Contract.Requires<InvalidEntityException>(entity.IsValidForPersistence(), "Entity not valid for persistence " + entity.ToString()); 
```

我已将 ToString 包括在内以明确表示 - 如果我省略它，它将被隐式调用，但我认为它使我的问题更清楚。

问题是，代码合同不允许这样做，我收到以下消息。

> 合同调用的用户消息只能是字符串文字、静态字段或至少在内部可见的静态属性。

有没有办法在异常消息中包含特定数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:46:10.350

根据[文档](http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf)：

> **2.10 合约方法的重载**
> 
> 所有的契约方法都有重载，除了布尔条件之外还接受一个字符串：
> 
> `Contract.Requires(x != null, "If x is null, then the missiles are red!");`
> 
> 只要在运行时违反合同，就会显示用户提供的字符串。**目前，它必须是编译时常量**。

所以，你问的是不可能的。

# mysql - SQL 查询以确定满足任意查询的所有值

> ID：12618267
> 
> 赞同：2
> 
> 时间：2012-09-27T09:31:56.053
> 
> 标签：mysql

我试图弄清楚如何有效地运行一组查询，这些查询将提供一个包含所有值的新表，这些值将返回任意查询的结果。

假设我的表具有如下架构：

*   ID
*   姓名
*   年龄
*   城市

列出所有将返回任意查询结果的值（例如，`SELECT * FROM main WHERE NOT city=X AND age BETWEEN Y AND Z`）的有效方法是什么？

我对此的天真方法是使用脚本并通过 {city, age, age} 的所有可能组合进行递归，并查看哪些 SELECT 返回超过 0 个结果，但这似乎非常低效。我也尝试过在 {city, age, age} 上构建大型连接，并且基本上使用该表作为查询的参数列表，但这很快就成为不可能对许多列进行查询。

对于简单的连接相等查询（例如，`SELECT * FROM main WHERE name=X AND age=Y`），这要简单得多，因为我可以执行以下操作：

```
SELECT name, age, count(*) AS count FROM main GROUP BY name, age HAVING count > 0 
```

但是我很难为比这更复杂的事情想出一个通用的方法。

任何指向正确方向的指针都会非常有帮助，谢谢。

## 编辑：

看来我在解释这一点上做得很糟糕，对不起。

想象一下，一个用户给了我一个数据库和一个模板查询并说：“告诉我我可以在这个查询中使用的所有值，这些值将从这个数据库中产生结果。” 例如，用户可能想知道将返回至少一行的所有年龄范围查询（例如，模板查询是`SELECT * FROM main WHERE age BETWEEN X AND Y`）。

在该特定示例中，可以运行 SELECT 以查找数据库中的最小/最大年龄，并告诉用户在这些年龄之间进行查询。

现在假设查询模板更复杂，例如`SELECT * FROM main WHERE NOT city=W AND age BETWEEN X AND Y AND name LIKE Z`. 如何确定可用于此查询以返回结果的 W/X/Y/Z 值的范围？它是否需要使用每个 {city, age, age, name} 组合创建一个连接表并在每一行上运行 SELECT？我怎样才能有效地做到这一点，以便操作在大型数据库上是有时间限制的？

希望这能澄清它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:45:12.587

您可以尝试在插入表后编写一个触发器，如果​​值不存在，则将它们插入到另一个表中。这样，您将拥有一个包含表的不同值的表。这张桌子看起来像

```
 columnNameFromYourTable  |  distinctValue
 city                        NY
 city                        LA
 age                         1
 age                         2
 ... 
```

然后，当您想知道表中是否存在用于查询的记录时，您可以使用以下方式查询`SELECT * FROM main WHERE NOT city=W AND age BETWEEN X AND Y AND name LIKE Z`distinctTable

```
select 1 from dual where 1=1
and not exists (select 1 from distinctTable where columnNameFromYourTable = 'city' and distinctValue = 'W')
and exists (select 1 from distinctTable where columnNameFromYourTable = 'age' and distinctValue BETWEEN X AND Y)
and exists (select 1 from distinctTable where columnNameFromYourTable = 'name' and distinctValue LIKE '%Z%') 
```

这将是相当快的。如果它返回`1`，则表中有一个条目，否则`NULL`。

# http - HTTP/1.0 响应 HTTP/1.1 请求

> ID：12618268
> 
> 赞同：8
> 
> 时间：2012-09-27T09:31:58.863
> 
> 标签：http

可以用 HTTP/1.0 响应 HTTP/1.1 请求吗？

我通过简单的套接字实现 HTTP 通信，客户端使用 HTTP/1.0 和 HTTP/1.1 发出请求，但协议独立于 HTTP 版本，因此我希望始终使用 HTTP/1.0 响应所有请求。HTTP 标准是否支持这样的通信？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T09:33:28.750

当然没关系。否则，如果你只支持 HTTP/1.0，你能做什么？

如果今天发布了 HTTP 1.2，您认为所有现有的 HTTP 1.1 服务器会发送什么作为对 HTTP 1.2 查询的回复？当然，它必须是 HTTP 1.1 回复——这就是他们所知道的全部。

只要确保您不遵循它们不同的 HTTP 1.1 规则即可。例如，默认情况下*不启用保活。*如果客户端看到 HTTP 1.0 回复，它将假定 HTTP 1.0 语义。

# html - 左边距：自动；进入 div 标签

> ID：12618271
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:32:01.340
> 
> 标签：html, css, margin

不工作 margin-left:auto; 我的html代码是：

```
<body>
 <div id='maindiv'>
    <div id='logout'>Logout</div> 
    <div id='Mcontrol'>Menu Control</div>
 </div>
<script src='control/myjs.js' language='javascript' /> </script>
</body> 
```

这是我的 CSS 代码：

```
#logout{
  margin-left:auto;
  font-family:arial;font-size:12px;
       }
#logout:hover{
  cursor:pointer;
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:37:48.840

不确定您到底想要什么，但我认为您希望在页面中心有注销按钮？

如果是; 检查这个jsFiddle：http: [//jsfiddle.net/sysBM/](http://jsfiddle.net/sysBM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:40:19.870

检查这个[链接](http://jsfiddle.net/venkateshwar/rJYCk/)

从您的解释中不清楚，但可能这就是您想要的。

# r - 计算小计（sum、stdev、average 等）

> ID：12618277
> 
> 赞同：0
> 
> 时间：2012-09-27T09:32:25.833
> 
> 标签：r, dataframe, subtotal

我一直在寻找这个，但到目前为止还没有找到明确的答案。可能一直在寻找错误的条款，但也许这里有人可以快速帮助我。这个问题有点基本。

样本数据集：

```
set <- structure(list(VarName = structure(c(1L, 5L, 4L, 2L, 3L),
 .Label = c("Apple/Blue/Nice", 
"Apple/Blue/Ugly", "Apple/Pink/Ugly", "Kiwi/Blue/Ugly", "Pear/Blue/Ugly"
), class = "factor"), Color = structure(c(1L, 1L, 1L, 1L, 2L), .Label = c("Blue", 
"Pink"), class = "factor"), Qty = c(45L, 34L, 46L, 21L, 38L)), .Names = c("VarName", 
"Color", "Qty"), class = "data.frame", row.names = c(NA, -5L)) 
```

这给出了一个数据集，如：

```
set

      VarName      Color Qty
1 Apple/Blue/Nice  Blue  45
2  Pear/Blue/Ugly  Blue  34
3  Kiwi/Blue/Ugly  Blue  46
4 Apple/Blue/Ugly  Blue  21
5 Apple/Pink/Ugly  Pink  38 
```

我想做的是相当直截了当。我想对 Qty 列求和（或平均值或标准差）。但是，我也想在以下条件下做同样的操作：

1.  VarName 包括“Apple”
2.  VarName 包括“丑陋”
3.  颜色等于“蓝色”

谁能给我快速介绍一下如何执行这种计算？

我知道其中一些可以通过 aggregate() 函数完成，例如：

```
aggregate(set[3], FUN=sum, by=set[2])[1,2] 
```

但是，我相信有比这个更直接的方法。是否有一些过滤器可以添加到类似的功能中`sum()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:08:05.287

拆分`VarName`列的最简单方法，然后子集变得非常容易。所以，让我们创建一个对象`varName`被分开：

```
##There must(?) be a better way than this. Anyone?
new_set =  t(as.data.frame(sapply(as.character(set$VarName), strsplit, "/"))) 
```

简要说明：

*   我们使用`as.character`因为`set$VarName`是一个因素
*   `sapply`依次取每个值并应用`strplit`
*   该`strsplit`函数拆分元素
*   我们转换为数据框
*   转置以获得正确的旋转

下一个，

```
##Convert to a data frame
new_set = as.data.frame(new_set)
##Make nice rownames - not actually needed
rownames(new_set) = 1:nrow(new_set)
##Add in the Qty column
new_set$Qty = set$Qty 
```

这给

```
R> new_set
     V1   V2   V3 Qty
1 Apple Blue Nice  45
2  Pear Blue Ugly  34
3  Kiwi Blue Ugly  46
4 Apple Blue Ugly  21
5 Apple Pink Ugly  38 
```

现在所有的操作都是标准的。例如，

```
##Add up all blue Qtys
sum(new_set[new_set$V2 == "Blue",]$Qty)
[1] 146

##Average of Blue and Ugly Qtys
mean(new_set[new_set$V2 == "Blue" & new_set$V3 == "Ugly",]$Qty)
[1] 33.67 
```

* * *

一旦它的形式正确，您就可以使用`ddply`which do you want (and more)

```
library(plyr)
##Split the data frame up by V1 and take the mean of Qty
ddply(new_set, .(V1), summarise, m = mean(Qty))

##Split the data frame up by V1 & V2 and take the mean of Qty
ddply(new_set, .(V1, V2), summarise, m = mean(Qty)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:09:53.290

这是你要找的吗？

```
 # sum for those including 'Apple'
 apple <- set[grep('Apple', set[, 'VarName']), ]
 aggregate(apple[3], FUN=sum, by=apple[2])
  Color Qty
1  Blue  66
2  Pink  38

 # sum for those including 'Ugly'
 ugly <- set[grep('Ugly', set[, 'VarName']), ]
 aggregate(ugly[3], FUN=sum, by=ugly[2])
  Color Qty
1  Blue 101
2  Pink  38

 # sum for Color==Blue
 sum(set[set[, 'Color']=='Blue', 3])
[1] 146 
```

最后的总和可以通过使用来完成`subset`

```
sum(subset(set, Color=='Blue')[,3]) 
```

# .net - 为 ClickOnce 部署自定义 app.config

> ID：12618281
> 
> 赞同：1
> 
> 时间：2012-09-27T09:32:49.967
> 
> 标签：.net, clickonce

我们开发了一个用于企业环境的 .NET 4 客户端应用程序（Windows 窗体）。客户端应该以多种不同的风格发布，这让我们有些头疼。其中一项要求是客户端必须能够通过 SOAP Web 服务与许多不同的应用程序服务器进行通信。应用服务器 (AS) 发布相同的 WS 接口，但底层服务器系统不同，通常我们企业为每个客户提供一个实例。其次，我们有一个内部运营部门，该部门也必须能够访问所有这些应用程序服务器，以便为我们的客户提供支持。

网络结构是这样的，在内部，AS 服务器位于 10.0.0.0/8 网络上，而所有客户都有公共 IP 地址来访问应用程序服务器。目前，我们通过 IP 访问，但正在迁移以使用 DNS 名称，尽管服务器的 DNS 名称对于内部和外部（客户的）访问将不相同。

这样做的结果是我们在 app.config 中有很多不同的配置需要管理，因为默认情况下 WS 连接信息存储在那里。我之前发布了一个相关问题（[在 app.config 中管理多个客户端端点配置（IP 地址等）的最佳方法](https://stackoverflow.com/questions/10931359/the-best-way-to-manage-multiple-client-endpoint-configurations-ip-address-etc)），它帮助很大，但我们仍在努力改进配置管理。如参考帖子中所述，如果您熟悉 Maven (Java)，我们现在可以为每个端点连接设置不同的配置/构建，类似于配置文件。

现在的问题是，由于我们使用 ClickOnce 部署并让用户通过 URL 安装，我们需要部署许多不同的变体，即对于单个 AS，我们至少需要两个部署/构建，一个与公共IP 端点和一个具有内部 IP 端点的端点。将此与大量 AS-server 相乘，很容易看出它需要我们处理大量构建配置。显然还有改进的余地。

我们考虑的一些想法和选择是：

*   跳过端点配置，至少是 app.config 中的地址部分，并让用户在设置表单中对其进行软配置。我们的经验是它也不是没有问题，通常它需要对最终用户的一些支持，他们很容易出错。

*   定制安装程序，研究是否有任何方式可以动态配置端点，例如，由于客户端应用程序将部署在发布 Web 服务的同一服务器上，安装是否可以以某种方式获取源 URL 并使用它来找到 AS 服务器？

任何关于如何改进部署过程和其他相关经验的想法都非常受欢迎。我想我们不是第一个遇到这个问题的人。

此外，如果存在更好的方法，我们愿意跳过 ClickOnce 部署。

问候， 奥拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:46:38.077

首先，可以自定义您的 app.config，然后使用 mage.exe 自定义发布它，即您不必使用 Visual Studio 进行发布。您提到您不想发布许多不同的客户，但这些知识可能有助于您对流程的想法。

其次，我建议您发布目录服务。这是一个 Web 服务（发布到一个预先确定的位置，这意味着您可以将端点地址烘焙到您的应用程序中），您通过足够的参数来查询它以识别哪个用户/客户端正在调用，它可以返回给您您需要调用的实际 Web 服务接口的 URI。目录服务可以确定您从哪里调用（它可以确定您的 IP），因此它知道您是在内部还是外部调用，并据此返回适当的 IP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T21:07:09.170

我真的很喜欢 slugster 的目录服务理念。让客户询问要调用哪个服务可以让您保持灵活性，并且如果您更改某些客户需要调用的服务，您将不必重新部署客户端。

也就是说，您可能仍然有复杂的配置。这又回到了定制你的 app.config。为此，您可以使用[ClickOnceMore](http://clickoncemore.net)。它是一个第三方构建工具（免责声明：我构建了它），用于在 Visual Studio 之外构建 ClickOnce 部署。更重要的是，它有一个宏系统，可让您设置多种配置。您可以从命令行构建它，指定您正在构建的配置。基于该配置，它可以替换 app.config 中的不同值，或者完全选择不同的 app.config 文件。有关宏系统的更多详细信息，请参见[此处](http://clickoncemore.net/documentation/browser.php?page=macros)。

# mysql - 如何使用mysql确定外键的基数

> ID：12618285
> 
> 赞同：0
> 
> 时间：2012-09-27T09:32:55.690
> 
> 标签：mysql, foreign-keys, relationship, cardinality

我陷入了一个问题，我必须使用 mysql 查找表之间关系的基数。在这篇文章之后
[MySQL：如何以编程方式确定外键关系？](https://stackoverflow.com/questions/273794/mysql-how-to-determine-foreign-key-relationships-programmatically)
我找到了与我的表相关的所有表以及作为外键的列。现在我还想找到关系的基数，即一对一、一对多或多对多。任何想法或片段将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:39:42.800

让我们假设 table`A`有一个外键`f`，它引用`k`table的主键`B`。然后您可以从架构中学习以下内容：

*   如果对 有`UNIQUE`约束`A.f`，则 中`A`的每一行最多只能有一行`B`。请注意，在多列索引的情况下，唯一约束的*所有*列都必须是外键的一部分。您可以使用`SHOW INDEX FROM tablename WHERE Non_unique = 0`来获取有关表的唯一性约束的信息。
*   如果`A.f`声明了 ，那么 中的每一行`NOT NULL`总是*至少*有一行in 。您可以使用列出列并查看其中哪些允许值。`B``A``SHOW COLUMNS FROM tablename``NULL`

如果您将“一”解释为“零或一”，那么您将获得一个使用唯一约束的一对一关系*，**以及*一个没有这样唯一约束。*`A``B`*

 **多对多*关系将使用单独的表建模，其中每一行代表关系的一个元素，其中包含的两个外键具有*多对一*关系。*

# eclipse - Eclipse：包探索未显示我的工作区中的任何内容

> ID：12618287
> 
> 赞同：0
> 
> 时间：2012-09-27T09:33:10.217
> 
> 标签：eclipse

几分钟前它工作正常。但是当我仍在处理一些未保存的文件时，我的系统由于停电而关闭`Eclipse`。

现在，如果我打开，`Eclipse`我看不到任何东西`Package Explorer`

任何解决方案？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:51:35.233

不是解决方案，而是解决我的问题：

**1.新建一个工作区文件夹**

**2.将所有项目复制到这个文件夹中**

**3\. 将它们导入 Eclipse**

```
When Eclipse is abnormally shut down, its Workspace gets corrupted.

Hence we need to create a new Workspace. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:35:57.763

你确定你还在同一个工作区吗？

# iphone - Xcode 中国际化的步骤

> ID：12618297
> 
> 赞同：1
> 
> 时间：2012-09-27T09:33:29.360
> 
> 标签：iphone, objective-c, xcode, localization

我一直在尝试将葡萄牙语翻译添加到我的应用程序中。目前都是英文的。（嗯，它是这样开始的）。

我在 UI 的主要部分使用 Storyboard。还有一些额外的 xib 文件用于表等中的可重用 UI...

无论如何，我开始尝试将应用程序国际化，并设法将 Storyboard 转换为葡萄牙语。

然后我尝试设置一些字符串（开始时只有几个）来翻译这些字符串。

我现在有一个只有葡萄牙语的故事板（我丢失了英文版），而且无论如何都没有正确翻译任何字符串。

我现在已经将所有字符串设置回只使用 @"blah" （我将 NSLocalizedString 放在几个地方）。

所以我应该回到第一方（一旦我修复了故事板）。

无论如何，是否有一个步骤列表来说明如何将应用程序本地化？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:06:33.227

有几个教程可用 - 这是好的教程之一：[http ://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

这肯定会帮助您快速入门！

但是，如果您使用的是 iOS6 xCode 4.5，您还应该检查有关本地化的新功能。苹果现在也走上了只有一个 XIB 的路线（不像以前有多个 XIB，每种语言一个 - 这是不可能维护的）

可能最重要的一点是始终使用`NSLocalizedString`，因此不需要多个 XIB。然后为每种语言添加一个新的字符串文件真的很容易。

然后你所要做的就是在项目编辑器中选择你的项目->选择右侧的信息选项卡->一直向下滚动->找到本地化，按按钮上的小+添加新语言. 而已。

# historian - 目前有哪些历史数据库可用？

> ID：12618299
> 
> 赞同：4
> 
> 时间：2012-09-27T09:33:32.107
> 
> 标签：historian, wonderware

我有一个与历史数据库有关的问题。这是我们的要求。我们需要一个能够以平均每秒 1000 次更新的速率从设备收集数据的历史数据库。每个历史数据库都会有一个设备。鉴于此要求，哪个历史数据库最适合我的要求？我看过很多选项，包括 OSISoft 的 PI System、Wonderware historian、canary 实验室的 Canary logger、GE proficy、Iconic 的 hyperhistorian 等等。这个链接帮助了我： [Historian Comparison](http://www.linkedin.com/groups/Historian-Comparison-39667.S.50536264)

但我遇到的最大问题是这些历史学家是高度可扩展的数据库，这意味着它可以收集整个工厂的数据。因此，将其用于具有 500 个数据点的设备可能会过度杀伤且成本高昂。

我想知道你们是否可以帮助我列出适合我需要的历史数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T11:50:18.167

选择 GE Proficy Historian 5.5 版。此版本能够根据 historian 许可证创建多个数据存储。但绝对是高级版本，也是唯一可以创建许多档案的版本。您必须在 historian 中创建数据存储，您可以为每个数据存储创建一个存档。您可以隔离标签以将数据发送到特定的存档

# javascript - 下拉列表未填充 Ajax

> ID：12618305
> 
> 赞同：0
> 
> 时间：2012-09-27T09:33:40.670
> 
> 标签：javascript, mysql, ajax

虽然我确定它一定是非常明显的，但我看不出我哪里出了问题。我有一个包含两个选项的下拉列表。当我选择一个选项时，它应该使用 XMLHttpRequest() 根据选择的选项从数据库中获取客户列表。

我有两个部分：

ajax2_js.php - 包含 javascript 和 html 表单。

ajax2_DBAccess.php - 包含从数据库中获取列表的 PHP。

我已经检查了第二页上的所有内容，这本身就可以正常工作（并将相关列表显示为下拉菜单），但是当我在第一页上选择该选项时，什么也没有发生。

到目前为止，我的代码是：

ajax2_js.php

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <script>
function ajaxFunction()
{
var ajaxRequest;
ajaxRequest = new XMLHttpRequest();

ajaxRequest.onreadystatechange = function()
    {
        if(ajaxRequest.readyState == 4)
            {
                document.getElementById('customerDiv').innerHTML=req.responseText;
            }
    }
ajaxResuest.open("GET", strURL, true);
ajaxRequest.send(null); 
}
        </script>           
</head>

<body>
    <form method="post" action="" name="form1">
        Network : <select name="network" onChange="ajaxFunction('ajax2_DBAccess.php?network='+this.value)">
            <option value="">Select Network</option>
            <option value="1">Net1</option>
            <option value="2">Net2</option>
         </select>
        </br>
        Customer : <div id="customerDiv">
            <select name="select">
                <option>Select Customer</option>
            </select>
        </div>
    </form>
</body> 
```

ajax2_DBAccess.php

```
<?php
$network=$_GET['network'];
$q1 = "SELECT `CustName` FROM monitor.customers where network = $network;";

$con = new mysqli('localhost:3306', 'xxx', 'xxx');

if (mysqli_connect_errno()) 
    {
        $error = mysqli_connect_error();
        echo $error;
        exit();
    }
else
    {   
        $ConfRes = mysqli_query($con, $q1); 
        if ($ConfRes)
            {
                echo "<select name=\"Customers\">";
                echo "<option>Select Customer</option>";
                while($row=mysqli_fetch_array($ConfRes, MYSQLI_ASSOC))
                    { 
                        $result = $row['CustName'];
                        echo "<option value>$result</option>";
                    };
                echo "</select>";
            }
        else
            {   
                $error = mysqli_error();
                echo $error;
                exit();
            }   
    };
?> 
```

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:35:09.487

感谢您的所有帮助，我已将其归结为三件事（全是我的错）：

```
function ajaxFunction() 
```

应该：

```
function ajaxFunction(strURL) 
```

.

```
ajaxResuest.open("GET", strURL, true); 
```

应该：

```
ajaxRequest.open("GET", strURL, true); 
```

.

最后：

```
document.getElementById('customerDiv').innerHTML=req.responseText; 
```

应该

```
document.getElementById('customerDiv').innerHTML=ajaxRequest.responseText; 
```

.

（当然还有上面提到的 SQL 注入漏洞，我也会修复）。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:53:26.267

您可以使用 XML 或 JSON 返回列表。本[教程](http://json.org/example.html)应该有所帮助。我个人会使用 XML。

```
header("Content-type: text/xml"); 

// Iterate through the rows, adding XML nodes for each

while ($row = @mysql_fetch_assoc($result)){  
  // ADD TO XML DOCUMENT NODE  
  $node = $dom->createElement("marker");  
  $newnode = $parnode->appendChild($node);   
  $newnode->setAttribute("CustName",$row['CustName']);
  } 

echo $dom->saveXML(); 
```

但是这两种方法都有很多教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:44:56.623

检查 javascript 错误日志。这可能是问题所在，“请求”中的拼写错误。ajaxResuest.open("GET", strURL, true);

此外，您的 SQL 查询在 $network 参数中存在 SQL 注入漏洞。

# javascript - Node.js 可以在 Tomcat 服务器中运行吗？

> ID：12618306
> 
> 赞同：22
> 
> 时间：2012-09-27T09:33:40.877
> 
> 标签：javascript, node.js

从到目前为止我在此博客[http://nowjs.com/](http://nowjs.com/)中所读到的内容， 我需要在服务器机器上安装 nodejs 才能使其工作。但是，我使用的是共享服务器，并且没有任何权限将某些东西放入服务器机器。

然而，将它放入容器（tomcat）是我主要做的另一件事。一般来说，当我们说服务器时，我们指的是 tomcat 或 websphere 或 jboss。

但是，如果我没记错的话，使用 nodejs 服务器意味着运行 tomcat 等的真实机器。

那么有什么方法可以在tomcat服务器中运行nodejs服务器，还是我想错了？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-27T09:49:37.270

是的，你想错了。Nodejs 的关键特性是它包含一个相当简洁的嵌入式 HTTP 服务器。想想码头。然而，现在或将来可能在 tomcat 中运行 JavaScript *。*

我建议去[http://nodejs.org/](http://nodejs.org/)观看视频，它一定会为您解决问题。

同时，我建议获取包含 SSH 访问权限的主机，最好是 root 访问权限。根访问将使安装节点更容易，并允许您在常用端口上运行它（避免以根用户身份运行节点，使用端口映射）。但是你不需要单独的 web 服务器来启动，你可以在 windows、mac 和 linux 上安装 Node.js。

# java - 使用 AbstractRoutingDataSource 切换数据源时共享事务

> ID：12618307
> 
> 赞同：3
> 
> 时间：2012-09-27T09:33:43.817
> 
> 标签：java, spring, jpa, jta, xa

[使用AbstractRoutingDataSource](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)切换活动数据源时如何在数据源之间共享事务？

到目前为止，如果没有事务，查询会在两个数据库上正确执行，但是当我启动事务时，一切都在同一个数据库上执行（即我不能再切换到第二个数据库）。

有任何想法吗？

```
@Transactional
public void crossDbTransactionTest() {
    // Selects a datasource from my pool of AbstractRoutingDataSources
    DbConnectionContextHolder.setDbConnectionByYear(2012);

    // execute something in the first database
    this.executeSomeJpaQuery("xyz"); 

    // switch to the second database
    DbConnectionContextHolder.setDbConnectionByYear(2011);

    // execute something in the second database
    this.executeSomeJpaQuery("xyz"); // on any errors rollback changes in both databases
} 
```

EDIT1（添加的配置文件）：

持久性.xml：

```
<persistence-unit name="primarnaKonekcija" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect" />
        <property name="hibernate.max_fetch_depth" value="1" />
        <property name="hibernate.transaction.manager_lookup_class"
                              value="org.hibernate.transaction.JBossTransactionManagerLookup" />
    </properties>
</persistence-unit> 
```

弹簧-jpa.xml：

```
<!-- Shared DB credentials -->
<context:property-placeholder location="classpath:config.properties" />

<!-- DB connections by year -->
<bean id="parentDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" abstract="true">
    <property name="driverClassName" value="${db.driver}" />
    <property name="username" value="${db.user}" />
    <property name="password" value="${db.password}" />
</bean>
<bean id="dataSource" class="myPackage.DbConnectionRoutingDataSource">
    <!-- Placeholder that is replaced in BeanFactoryPostProcessor -->
    <property name="targetDataSources">
        <map key-type="int">
            <entry key="0" value-ref="placeholderDs" />
        </map>
    </property>
    <property name="defaultTargetDataSource" ref="placeholderDs" />
</bean>

<!-- EntityManager configuration -->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="primarnaKonekcija" />
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="databasePlatform" value="org.hibernate.dialect.SQLServerDialect" />
            <property name="showSql" value="true" />
        </bean>
    </property>
</bean>

<tx:annotation-driven />
<tx:jta-transaction-manager /> 
```

编辑2：

尝试将所有内容切换到 JTA 和 JNDI 提供的数据源。

将 transaction-type="RESOURCE_LOCAL" 更改为 transaction-type="JTA" 也不起作用 - JtaStatusHelper 抛出 NullPointerException，表示 transactionManager 为空。

编辑 3：

将 JBossTransactionManagerLookup 添加到 persistence.xml，现在当切换到事务中的第二个数据源时，我得到“不允许添加多个最后一个资源”。

编辑4：

尝试[设置 JBOSS](https://community.jboss.org/wiki/Multiple1PC)，所以我克服了该错误 - 数据库切换现在可以使用预期的警告：“多个最后的资源已添加到当前事务中。这是事务不安全的，不应依赖。”。接下来将尝试在 JBOSS 中配置 MSSQL XA 驱动程序。

编辑 5：

[配置 MSSQL XA](http://msdn.microsoft.com/en-us/library/aa342335%28v=sql.105%29.aspx)后，一切都按预期工作，将发布一个答案，其中包含设置所需的步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:23:01.437

除非您别无选择，否则我不会推荐这种解决方案。二级缓存不可能与这样的解决方案一起使用，但它是一种（稳定的）解决方案，我被迫使用它来争取时间，直到将底层遗留数据库合并为一个。

首先在 JBoss Standalone.xml 中将您的数据库连接设置为 XA 数据源。[如果使用 MS SQL 服务器，请按照http://msdn.microsoft.com/en-us/library/aa342335.aspx](http://msdn.microsoft.com/en-us/library/aa342335.aspx)上的说明如何正确设置 XA

**独立的.xml**

```
<datasources>
    <datasource jndi-name="java:jboss/datasources/ExampleDS" pool-name="ExampleDS" enabled="true" use-java-context="true">
        <connection-url>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1</connection-url>
        <driver>h2</driver>
        <security>
            <user-name>sa</user-name>
            <password>sa</password>
        </security>
    </datasource>
    <xa-datasource jta="true" jndi-name="java:jboss/datasources/MYDB_ONE" pool-name="MYDB_ONE" enabled="true" use-java-context="true" use-ccm="true">
        <xa-datasource-property name="ServerName">
            localhost
        </xa-datasource-property>
        <xa-datasource-property name="DatabaseName">
            MYDB_ONE
        </xa-datasource-property>
        <xa-datasource-property name="SelectMethod">
            cursor
        </xa-datasource-property>
        <xa-datasource-class>com.microsoft.sqlserver.jdbc.SQLServerXADataSource</xa-datasource-class>
        <driver>sqljdbc</driver>
        <xa-pool>
            <is-same-rm-override>false</is-same-rm-override>
        </xa-pool>
        <security>
            <user-name>some_user</user-name>
            <password>some_password</password>
        </security>
        <validation>
            <valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker"/>
        </validation>
    </xa-datasource>
    <xa-datasource jta="true" jndi-name="java:jboss/datasources/MYDB_TWO" pool-name="MYDB_TWO" enabled="true" use-java-context="true" use-ccm="true">
        <xa-datasource-property name="ServerName">
            localhost
        </xa-datasource-property>
        <xa-datasource-property name="DatabaseName">
            MYDB_TWO
        </xa-datasource-property>
        <xa-datasource-property name="SelectMethod">
            cursor
        </xa-datasource-property>
        <xa-datasource-class>com.microsoft.sqlserver.jdbc.SQLServerXADataSource</xa-datasource-class>
        <driver>sqljdbc</driver>
        <xa-pool>
            <is-same-rm-override>false</is-same-rm-override>
        </xa-pool>
        <security>
            <user-name>some_user</user-name>
            <password>some_password</password>
        </security>
        <validation>
            <valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLValidConnectionChecker"/>
        </validation>
    </xa-datasource>
    <drivers>
        <driver name="h2" module="com.h2database.h2">
            <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
        </driver>
        <driver name="sqljdbc" module="com.microsoft.sqlserver.jdbc">
            <driver-class>com.microsoft.sqlserver.jdbc.SQLServerDriver</driver-class>
        </driver>
        <driver name="postgresql" module="org.postgresql">
            <xa-datasource-class>org.postgresql.xa.PGXADataSource</xa-datasource-class>
        </driver>
    </drivers>
</datasources> 
```

然后我设置了我的 entityManager bean，它使用我的 AbstractRoutingDataSource 实现作为它的数据源。这是 Spring 驱动的 JPA 设置，不使用 persistence.xml 文件；据我所知，这是使用 JBoss 7 时自动扫描实体包的唯一方法。

**springJpaConfig.xml**

```
<!-- Use @PersistenceContext annotations for injecting entity managers -->
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<!-- Set up JTA transaction manager -->
<tx:jta-transaction-manager />

<bean id="entityManagerFactoryMyDB" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="MyDB" />
    <property name="dataSource" ref="dataSourceMyDB" />
    <property name="packagesToScan" value="my.package.with.jpa.entities" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
        </bean>
    </property>
    <property name="jpaPropertyMap">
        <map>
            <entry key="javax.persistence.transactionType" value="jta" />

            <entry key="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform" />
            <entry key="jboss.entity.manager.factory.jndi.name" value="java:app/MyDBEntityManagerFactory" />

            <entry key="hibernate.dialect" value="org.hibernate.dialect.SQLServer2008Dialect" />
        </map>
    </property>
</bean>

<bean id="dataSourceMyDB" class="some.package.AbstractRoutingDataSourceMyDB">
    <property name="lenientFallback" value="false" />
    <property name="defaultTargetDataSource" value="java:jboss/datasources/ExampleDS" />
    <property name="targetDataSources">
        <map key-type="String">
            <!-- This is a placeholder that will be filled in by BeanFactoryPostProcessor -->
        </map>
    </property>
</bean>

<!-- This allows us to modify Spring configuration load the list of datasources -->
<bean class="some.package.DatasourceRegisteringBeanFactoryPostProcessor" /> 
```

我在 AbstractRoutingDataSourceMyDB 中使用 ExampleDS 作为默认值，因为您必须提供一个 defaultTargetDataSource，但我总是想手动选择一个有效的数据库，因此如果有人在没有先手动选择连接的情况下尝试访问数据库，他们将尝试在不存在的 ExampleDS 数据库，它将引发异常（非常 hacky，但它完成了工作）。

在 BeanFactoryPostProcessor 中，我现在需要填写我的数据源列表：

**数据源RegisteringBeanFactoryPostProcessor.java**

```
package some.package
class DatasourceRegisteringBeanFactoryPostProcessor implements BeanFactoryPostProcessor {
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        HashMap<String, String> connectionsListMyDB = new HashMap<>();

        // Load your connection list from wherever you need to, you can
        // enumerate them directly from JNDI or some configuration location
        connectionsListMyDB.put("db1", "java:jboss/datasources/MYDB_ONE");
        connectionsListMyDB.put("db2", "java:jboss/datasources/MYDB_TWO");

        if (connectionsList.isEmpty())
            throw new RuntimeException("No JPA connections defined");

        // Configure the dataSource bean properties
        BeanDefinitionRegistry factory = (BeanDefinitionRegistry) beanFactory;
        MutablePropertyValues mpv = factory.getBeanDefinition("dataSourceMyDB").getPropertyValues();

        ManagedMap<String, String> mm = (ManagedMap<String, String>) mpv.getPropertyValue(
                "targetDataSources").getValue();
        mm.clear();
        for (Entry<String, String> e : connectionsListMyDB.entrySet()) {
            mm.put(e.getKey(), e.getValue());
        }
    }
} 
```

这是我的 AbstractRoutingDataSource 实现，它允许我在运行时切换连接：

**AbstractRoutingDataSourceMyDB.java**

```
public class AbstractRoutingDataSourceMyDB extends AbstractRoutingDataSource {
    @Override
    protected Object determineCurrentLookupKey() {
        return getDbConnectionMyDB();
    }

    // ThreadLocal variable so that the connection gets set for the current thread
    // using spring's request scope on the class instead of ThreadLocal would also work here.
    private final ThreadLocal<String> contextHolder = new ThreadLocal<String>();

    public void setDbConnectionMyDB(String myKey) {
        Assert.notNull(myKey, "myKey cannot be null");

        contextHolder.set(myKey);

        String k = contextHolder.get();
    }

    public String getDbConnectionMyDB() {
        return (String) contextHolder.get();
    }

    public void clearDbConnectionMyDB() {
        contextHolder.remove();
    }
} 
```

请注意，在您从 DAO 类中更改当前连接之前，您必须调用 entitymanager.flush() 和 clear()，否则该事务范围内的所有挂起操作将在事务提交时在新连接上执行。这是因为 Hibernate 会话忘记了连接曾经改变过，据它所知 - 它始终是同一个数据库。

* * *

所以在你的 DAO 中你现在可以这样做：

**SomeTableDAO.java**

```
@PersistenceContext(unitName = "MyDB")
private EntityManager em;

@Autowired
private AbstractRoutingDataSourceMyDB routingSource;

public void someMethod(int id) {
    em.flush();
    em.clear();
    routingSource.setDbConnectionMyDB("db1");
    em.remove(em.getReference(Something.class, id)); // delete something in db1

    em.flush();
    em.clear();
    routingSource.setDbConnectionMyDB("db2");
    em.remove(em.getReference(Something.class, id)); // delete something else with the same id in db2
} 
```

所以你去吧，虽然它不漂亮 - 它可以完成:)

# tridion - 无需查询底层 XML 即可获取组件字段

> ID：12618309
> 
> 赞同：1
> 
> 时间：2012-09-27T09:33:46.457
> 
> 标签：tridion, tridion-2011

使用核心服务 API，是否有任何方法可以检索组件的字段，而无需求助于查询底层 XML 或使用第三方（？）包装类？

使用 TOM.NET API 相当简单

```
Tridion.ContentManager.ContentManagement.Component component = [get a component];
var componentFields = new Tridion.ContentManager.ContentManagement.Fields.ItemFields(component.Content, component.Schema);
var summary = ((Tridion.ContentManager.ContentManagement.Fields.TextField)componentFields["summary"]).Value; 
```

但是当我开始使用核心服务 API 时，它似乎有点复杂，因为没有`Tridion.ContentManager.ContentManagement.Fields.ItemFields`类可以围绕`component.Content`.

我了解 Frank van Puffelen 编写了一组[类](https://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata)来实现此包装器功能，但我对使用 SDL 未正式支持的代码（或者是吗？）有点谨慎。

目前，在我看来，使用核心服务 API 从组件中优雅地检索字段的功能尚未完全实现。我希望我会被证明是错误的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:25:33.830

如果您正在寻找一个官方包装器来访问 ComponentData 内容，那么没有这样的东西。

Frank 的课程不受官方支持，它是**开源**代码（在[MIT 许可](http://opensource.org/licenses/mit-license.php)下），但它是使用受支持的 API 构建的，所以你应该可以使用它。

另一方面，它不是一段如此广泛的代码，所以如果你有问题，你可以尝试自己解决它。正如其他开发人员所做的那样，您可以在页面评论中看到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T10:22:25.793

这个问题之前已经被问过，实际上不止一次。例如：[如何在 SDL Tridion 中使用核心服务在不加载 XML 的情况下将内容设置为组件？](https://stackoverflow.com/questions/10443439/how-to-set-content-to-a-component-without-loading-xml-in-sdl-tridion-using-core).

# jquery - 使用 jQuery 更改页脚、多个页面

> ID：12618310
> 
> 赞同：0
> 
> 时间：2012-09-27T09:33:50.237
> 
> 标签：jquery, footer

是否可以进行样式更改以在复制到多个 html 页面的页脚中说出 -tag 并在不同页面之间浏览时保持该样式更改？还是必须是 .php 才能做到这一点？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:42:32.217

我想你正在寻找像[jquery 样式表切换器](http://www.cssnewbie.com/simple-jquery-stylesheet-switcher/)这样的东西。是的，这是可能的！[您可以使用cookie](http://www.electrictoolbox.com/jquery-cookies/)存储选择的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:36:52.893

您可以将 cookie 与 javaScript 一起使用：http: [//www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# java - 使用 zxing 生成条码

> ID：12618311
> 
> 赞同：2
> 
> 时间：2012-09-27T09:33:51.167
> 
> 标签：java, javascript, jsp, jar

我能够使用 zxing 条码库生成条码，我正在使用...

```
String text = "123456789101"; 

int width  = 300;
int height = 100; 
String imgFormat = "png";

BitMatrix bitMatrix = new UPCAWriter().encode(text, BarcodeFormat.UPC_A, width, height);
MatrixToImageWriter.writeToStream(bitMatrix, imgFormat, new FileOutputStream(new    File("C:\\code_.png")));
out.println("Success!"); 
```

我得到了带有平面条形码图像的输出，但我想在该图像的底部打印'文本（字符串文本 =“123456789101”;）'，任何知道的人请帮助我。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:42:44.027

如果你的库没有实现这样的东西，我想它没有，否则这里没有问题，你可以自己在条形码图像上打印你的代码。检查[此](https://stackoverflow.com/questions/2658554/using-graphics2d-to-overlay-text-on-a-bufferedimage-and-return-a-bufferedimage/2658663#2658663 "这个")问题以简要说明如何完成。

另一种选择是在图像下以纯文本形式输出代码 - 不确定它是否适合您。

UPD：您也可以尝试[Barcode4j](http://barcode4j.sourceforge.net/ "条码4j")库。我认为它可以做这样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-28T14:50:18.427

是一个旧线程，但如果有人仍然需要它......

```
import java.awt.Color;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.Hashtable;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.EncodeHintType;
import com.google.zxing.common.BitMatrix;
import com.google.zxing.oned.Code128Writer;
import com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;

// ...
// vars width and height have image width and height (int)
// var barcodeMessage has the text under the barcode

// text
BufferedImage img = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB); // aux implementation
Graphics2D g2d = img.createGraphics();
Font font = new Font("Times", Font.PLAIN, 11);
g2d.setFont(font);
FontMetrics fm = g2d.getFontMetrics();
int textWidth = fm.stringWidth(barcodeMessage);
int textHeight = fm.getHeight();
g2d.dispose();
img = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
g2d = img.createGraphics();
g2d.setColor(backgroundColor);
g2d.fillRect(0, 0, width, height);
g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);
g2d.setFont(font);
fm = g2d.getFontMetrics();
g2d.setColor(textColor);
g2d.drawString(barcodeMessage, Math.round(Math.floor((width-textWidth)/2))-2, height-fm.getAscent());
g2d.dispose();

// barcode
Code128Writer code128Writer = new Code128Writer();
Hashtable<EncodeHintType, ErrorCorrectionLevel> hintMap = new Hashtable<EncodeHintType, ErrorCorrectionLevel>();
hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.H);
BitMatrix bitMatrix = code128Writer.encode(barcodeMessage, BarcodeFormat.CODE_128, width, height-textHeight-(2*fm.getAscent()), hintMap);

// Make the BufferedImage that are to hold the Code128
int matrixWidth = bitMatrix.getWidth();
int matrixHeight = bitMatrix.getHeight();

Graphics2D graphics = (Graphics2D) img.getGraphics();
graphics.setColor(textColor);
for (int i = 0; i < matrixWidth; i++) {
    for (int j = 0; j < matrixHeight; j++) {
        if (bitMatrix.get(i, j)) {
            graphics.fillRect(i, j+fm.getAscent(), 1, 1);
        }
    }
}
graphics.dispose(); 
```

您可以使用宽度和高度变量、字体、条形码类型等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-01T14:31:45.093

*此方法允许使用java.awt*在图像底部绘制一个白色矩形并在其上编码字符串。

```
/**
 * 
 * @param codeS String coded to a barcode
 * @param qrfile File with generated image when completed.
 * @param width in pixels
 * @param height in pixels
 * @param fontSize in pixels
 * @throws Exception 
 */
public void generateBarCode(String codeS,
        File qrfile,
        int width,
        int height,
        int fontSize) throws Exception {
    FileOutputStream qrCode = null;
    try {
        // Encode URL in QR format
        BitMatrix matrix;
        com.google.zxing.Writer writer = new Code128Writer();
        //writer = new QRCodeWriter(); in case of BarcodeFormat.QR_CODE
        try {
            matrix = writer.encode(codeS, BarcodeFormat.CODE_128, width, height);
        } catch (WriterException e) {
            //logger.error("Error generando el QR", e);
            throw new Exception("Error generando el QR");
        }
        // Create buffered image to draw to
        BufferedImage image = new BufferedImage(width,
                height, BufferedImage.TYPE_INT_RGB);
        // Iterate through the matrix and draw the pixels to the image
        for (int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++) {
                int grayValue = (matrix.get(x, y) ? 0 : 1) & 0xff;
                image.setRGB(x, y, (grayValue == 0 ? 0 : 0xFFFFFF));
            }
        }
        Graphics graphics = image.getGraphics();
        graphics.drawImage(image, 0, 0, null);

        Font f = new Font("Arial", Font.PLAIN, fontSize);

        FontRenderContext frc = image.getGraphics().getFontMetrics().getFontRenderContext();
        Rectangle2D rect = f.getStringBounds(codeS, frc);
        graphics.setColor(Color.WHITE);

        //add 10 pixels to width to get 5 pixels of padding in left/right
        //add 6 pixels to height to get 3 pixels of padding in top/bottom
        graphics.fillRect(
                (int)Math.ceil((image.getWidth()/2)-((rect.getWidth()+10)/2)), 
                (int)Math.ceil(image.getHeight() - (rect.getHeight()+6)), 
                (int)Math.ceil(rect.getWidth()+10), 
                (int)Math.ceil(rect.getHeight()+6));
        // add the watermark text
        graphics.setFont(f);
        graphics.setColor(Color.BLACK);
        graphics.drawString(codeS, 
                (int)Math.ceil((image.getWidth()/2)-((rect.getWidth())/2)), 
                (int)Math.ceil(image.getHeight() - 6));
        graphics.dispose();

        qrCode = new FileOutputStream(qrfile);
        ImageIO.write(image, "png", qrCode);

    } catch (Exception ex) {
        throw new Exception("Error generando el QR");
    } finally {
        try {
            qrCode.close();
        } catch (Exception ex) {
            throw new Exception("Error generando el QR");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-03T10:52:53.380

```
 You can Encode it Using EN_13 bellow class:
            String barcode="123456789123"; //barcode must be 13 digit
            ImageView ivBarcode;
            EAN13 code = new EAN13(barcode);
        Bitmap bitmap = code.getBitmap(860, 300);
        ivBarcode.setImageBitmap(bitmap);

/*****************************************************************/

    import android.content.Context;
    import android.graphics.Bitmap;
    import android.graphics.Canvas;
    import android.graphics.Color;
    import android.graphics.Paint;
    import android.graphics.Rect;

    public class EAN13 {

        private static final String TAG = EAN13.class.getSimpleName();

        private String data;
        Context context;

        public EAN13(Context _context) {
            context=_context;
        }

        public EAN13(String data){
            this.data = data;
        }

        public void setData(String data) {
            this.data = data;
        }

        public String getData() {
            return data;
        }

        public void init() {
            //data = null;
        }

        public byte[] initBuffer() {
            int sum = 0;

            //add start code 4byte
            sum = sum + 3;
            //add middle code 5byte
            sum = sum + 5;
            //add end code 4 byte
            sum = sum + 3;
            //add encoded data 7byte * 12
            sum = sum + (7 * 12);

            // sum = 11 + 11 + 12 + (11*dataLen);
            return new byte[sum];
        }

        public byte[] encode() {

            if(isVaildBarcodeData() == false) {
                android.util.Log.e(TAG, "invalid data length!!");
                return null;
            }

            int len = data.length();
            int pos = 0;

            init();
            byte[] buffer = initBuffer();

            int first_num = Integer.parseInt(data.substring(0, 1));
            byte[] patterns = EAN13Constant.FIRST_DIGIT[first_num];

            pos += appendData(EAN13Constant.START_PATTERN, buffer, pos, "START CODE");
            for(int i=1; i<len; i++) {
                int num = Integer.parseInt(data.substring(i, i+1));

                byte code = patterns[(i-1)];

                if(code == EAN13Constant.L_CODE) {
                    pos += appendData(EAN13Constant.L_CODE_PATTERN[num], buffer, pos, "L code based number");
                } else if(code ==EAN13Constant.G_CODE) {
                    pos += appendData(EAN13Constant.G_CODE_PATTERN[num], buffer, pos, "G code based number");
                } else { // R-code
                    pos += appendData(EAN13Constant.R_CODE_PATTERN[num], buffer, pos, "R code based number");
                }

                if(i == 6) {
                    pos += appendData(EAN13Constant.MIDDLE_PATTERN, buffer, pos, "MIDDLE CODE");
                }
            }

            pos += appendData(EAN13Constant.END_PATTERN, buffer, pos, "END CODE");

            return buffer;
        }

        public Bitmap getBitmap( int width, int height) {
            byte[] code = encode();

            if(code == null) {
                return null;
            }
            int inputWidth = code.length;
            // Add quiet zone on both sides
            int fullWidth = inputWidth + 6; // for empty(quiet) space
            int outputWidth = Math.max(width, fullWidth);
            int outputHeight = Math.max(1, height);

            int multiple = outputWidth / fullWidth;
            int leftPadding = (outputWidth - (inputWidth * multiple)) / 2;

            //BitMatrix output = new BitMatrix(outputWidth, outputHeight);
            Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
            Canvas canvas = new Canvas(bitmap);
            // new antialised Paint
            Paint bgPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
            // text color - #3D3D3D
            bgPaint.setColor(Color.rgb(255, 255, 255));

            Rect bounds = new Rect(0, 0, width, height);
            canvas.drawRect(bounds, bgPaint);

            Paint barPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
            barPaint.setColor(Color.rgb(0, 0, 0));
            barPaint.setStrokeWidth(0);

            for (int inputX = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {
                if (code[inputX] == 1) {
                    //output.setRegion(outputX, 0, multiple, outputHeight);
                    android.util.Log.e(TAG, "outputX: " + outputX + ", ouputY: 0, multiple: " + multiple + ", outputHeight: " + outputHeight);
                    //canvas.drawRect(new Rect(outputX, 0, multiple, outputHeight), barPaint);
                    //canvas.drawText(text, x, y, paint)
                    //float left, float top, float right, float bottom
                    canvas.drawRect(outputX, 0, (outputX+multiple), outputHeight, barPaint);
                }
            }
            return bitmap;
        }

        public int getSum() {
            return getSum();
        }

        public boolean isVaildBarcodeData() {
            if(data == null) {
                return false;
            }

            if(data.length() != 13) {
                return false;
            }

            if(checkNumber(data) == false) {
                return false;
            }

            return true;
        }

        private static boolean checkNumber(String data) {
            int len = data.length();

            for(int i=0; i<len; i++ ) {
                char ch = data.charAt(i);
                if (ch < '0' || ch > '9') {
                    //if((ch < 48)  || (ch > 57)) {
                    return false;
                }
            }

            return true;
        }

        private int appendData(byte[] src, byte[] dst, int pos, String debugdata) {

            System.arraycopy(src, 0, dst, pos, src.length);

            if(debugdata != null)  {
                printByteArr(debugdata, src);
            }

            return src.length;
        }

        private void printByteArr(String msg, byte[] buff) {
            if(buff == null) {
                return;
            }

            StringBuilder sb = new StringBuilder();
            for(byte by: buff) {
                sb.append(by);
            }
            android.util.Log.e(TAG, "char: " + msg + " barcode weight: " + sb.toString());
        }

    } 
```

EAN13Constant 在这里：

```
public class EAN13Constant {

public static final byte L_CODE = 0;
public static final byte G_CODE = 1;
public static final byte R_CODE = 2;

public static final byte[][] FIRST_DIGIT = {
    { L_CODE,L_CODE,L_CODE,L_CODE,L_CODE,L_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,L_CODE,G_CODE,L_CODE,G_CODE,G_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,L_CODE,G_CODE,G_CODE,L_CODE,G_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,L_CODE,G_CODE,G_CODE,G_CODE,L_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,G_CODE,L_CODE,L_CODE,G_CODE,G_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,G_CODE,G_CODE,L_CODE,L_CODE,G_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,G_CODE,G_CODE,G_CODE,L_CODE,L_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,G_CODE,L_CODE,G_CODE,L_CODE,G_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,G_CODE,L_CODE,G_CODE,G_CODE,L_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
    { L_CODE,G_CODE,G_CODE,L_CODE,G_CODE,L_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE,R_CODE },
};

public static final byte[] START_PATTERN = { 1, 0, 1 };

public static final byte[] MIDDLE_PATTERN = { 0, 1, 0, 1, 0 };

public static final byte[] END_PATTERN =  { 1, 0, 1 };

// l-code
public static final byte[][] L_CODE_PATTERN = {
    { 0,0,0,1,1,0,1 },
    { 0,0,1,1,0,0,1 },
    { 0,0,1,0,0,1,1 },
    { 0,1,1,1,1,0,1 },
    { 0,1,0,0,0,1,1 },
    { 0,1,1,0,0,0,1 },
    { 0,1,0,1,1,1,1 },
    { 0,1,1,1,0,1,1 },
    { 0,1,1,0,1,1,1 },
    { 0,0,0,1,0,1,1 },
};

// g-code
public static final byte[][] G_CODE_PATTERN = {
    { 0,1,0,0,1,1,1 },
    { 0,1,1,0,0,1,1 },
    { 0,0,1,1,0,1,1 },
    { 0,1,0,0,0,0,1 },
    { 0,0,1,1,1,0,1 },
    { 0,1,1,1,0,0,1 },
    { 0,0,0,0,1,0,1 },
    { 0,0,1,0,0,0,1 },
    { 0,0,0,1,0,0,1 },
    { 0,0,1,0,1,1,1 },
};

// r-code
public static final byte[][] R_CODE_PATTERN = {
    { 1,1,1,0,0,1,0 },
    { 1,1,0,0,1,1,0 },
    { 1,1,0,1,1,0,0 },
    { 1,0,0,0,0,1,0 },
    { 1,0,1,1,1,0,0 },
    { 1,0,0,1,1,1,0 },
    { 1,0,1,0,0,0,0 },
    { 1,0,0,0,1,0,0 },
    { 1,0,0,1,0,0,0 },
    { 1,1,1,0,1,0,0 },
};
} 
```

# perl - APT 错误：取决于：perl (= 5.14.2-6ubuntu2) 但要安装 5.14.2-6ubuntu2.1

> ID：12618314
> 
> 赞同：0
> 
> 时间：2012-09-27T09:33:59.077
> 
> 标签：perl, ubuntu, apt

我只是尝试在 Ubuntu 上使用 apt 安装 libperl-dev，但出现以下错误：

```
user@comp-2:~$ sudo apt-get install libperl-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 libperl-dev : Depends: perl (= 5.14.2-6ubuntu2) but 5.14.2-6ubuntu2.1 is to be installed
               Depends: libperl5.14 (= 5.14.2-6ubuntu2) but 5.14.2-6ubuntu2.1 is to be installed
E: Unable to correct problems, you have held broken packages. 
```

我试图用谷歌搜索这个问题，但没有找到清楚的东西。
有人可以解释一下这是什么意思：“取决于：libperl5.14 (= 5.14.2-6ubuntu2) 但要安装 5.14.2-6ubuntu2.1”，以及如何解决？
谢谢你的前面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:57:28.487

基本上，错误消息告诉您所有三个软件包（libperl-dev、perl 和 libperl5.14）需要具有完全相同的版本（5.14.2-6ubuntu2 或 5.14.2-6ubuntu2.1），但您正在尝试混合他们俩。我不能告诉你为什么会这样（也许你正试图混合来自不同发行版的包，比如 debian testing/unstable），但如果你使用 aptitude，你可以在交互式依赖求解器中检查情况（也许它甚至会自动为您找到可接受的解决方案）。

因此，请使用 aptitude 并检查软件包的版本，包括您尝试安装的软件包和您已经拥有的软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:45:29.823

没有直接回答您的问题，而是避免它发生的方法：

您不应该过多地摆弄您的系统 Perl。因为很多系统包依赖于系统 Perl。如果你搞砸了，你的系统可能会遇到麻烦。

如果您想灵活地安装 Perl，请始终使用 Perlbrew！访问这个站点，很容易：[http](http://perlbrew.pl/) : //perlbrew.pl/ Perlbrew 管理不同的 Perls，并且所有内容都安全地保存在您的 $home 中。（Perlbrew 也在 CPAN 上或以 .deb 包的形式提供，但使用上面的网站，它更节省）

如果然后将此行添加到您的 .bashrc

```
# Perl is always from perlbrew!
source ~/perl5/perlbrew/etc/bashrc 
```

您可以在终端上使用 perlbrew 命令在 Perl 安装之间轻松切换。

也许这对你有帮助？问候

# backbone.js - itemview 上的模型未显示

> ID：12618318
> 
> 赞同：1
> 
> 时间：2012-09-27T09:34:13.333
> 
> 标签：backbone.js, marionette

我在项目视图中显示模型时遇到问题。目前使用 require.js 和backbone.marionette。

这是我的标题模板：

```
// header.js  
define( [
   "jquery",
   "underscore",
   "marionette",
   "user",
   "userSession",
   "text!../../tpl/header_template.html"
   ], function ( $, _, Marionette, User, UserSession, HeaderTemplate ) {

  return Marionette.ItemView.extend( {        
     template: HeaderTemplate,

     initialize: function(){
        alert(UserSession.firstName + " " + UserSession.lastName)
     },

     onRender: function(){
        alert(UserSession.firstName + " " + UserSession.lastName)
     },

     model: new User({
        lastName: UserSession.lastName, 
        firstName: UserSession.firstName
        })
    });
  }); 
```

这是模板片段代码

```
 Logged in as <%= firstName %> <%= lastName %> 
```

这是我尝试显示 itemview 时的代码

```
// attached the view
layout.header.show(new HeaderView()); 
```

当我运行此代码时，视图呈现正常，但模型（名字和姓氏）数据不正确。名字和姓氏都为空。奇怪的是在初始化和 onRender 上，它们都正确显示了名字和姓氏。

有谁知道如何克服这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:01:50.970

我认为你应该这样做：

```
initialize: function(){

    this.model = new User({
        lastName: UserSession.lastName, 
        firstName: UserSession.firstName
    });
} 
```

# objective-c - OCMock，为什么我不能期望协议上的方法？

> ID：12618320
> 
> 赞同：8
> 
> 时间：2012-09-27T09:34:15.540
> 
> 标签：objective-c, ios, mocking, ocmock

考虑这段代码，它有效（loginWithEmail 方法被预期为预期）：

```
_authenticationService = [[OCMockObject mockForClass:[AuthenticationService class]] retain];
[[_authenticationService expect] loginWithEmail:[OCMArg any] andPassword:[OCMArg any]]; 
```

与此代码相比：

```
_authenticationService = [[OCMockObject mockForProtocol:@protocol(AuthenticationServiceProtocol)] retain];
[[_authenticationService expect] loginWithEmail:[OCMArg any] andPassword:[OCMArg any]]; 
```

第二个代码示例在第 2 行失败，并出现以下错误：

```
*** -[NSProxy doesNotRecognizeSelector:loginWithEmail:andPassword:] called! Unknown.m:0: error: -[MigratorTest methodRedacted] : ***
-[NSProxy doesNotRecognizeSelector:loginWithEmail:andPassword:] called! 
```

AuthenticationServiceProtocol 声明方法：

```
@protocol AuthenticationServiceProtocol <NSObject>
@property (nonatomic, retain) id<AuthenticationDelegate> authenticationDelegate;

- (void)loginWithEmail:(NSString *)email andPassword:(NSString *)password;
- (void)logout;
- (void)refreshToken;

@end 
```

它在类中实现：

```
@interface AuthenticationService : NSObject <AuthenticationServiceProtocol> 
```

这是在 iOS 上使用 OCMock。

`expect`当模拟为 a 时为什么会失败`mockForProtocol`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:49:42.327

这很奇怪。我在 iOS5 示例项目中添加了以下类：

```
@protocol AuthenticationServiceProtocol

- (void)loginWithEmail:(NSString *)email andPassword:(NSString *)password;

@end

@interface Foo : NSObject
{
    id<AuthenticationServiceProtocol> authService;
}

- (id)initWithAuthenticationService:(id<AuthenticationServiceProtocol>)anAuthService;
- (void)doStuff;

@end

@implementation Foo

- (id)initWithAuthenticationService:(id<AuthenticationServiceProtocol>)anAuthService
{
    self = [super init];
    authService = anAuthService;
    return self;
}

- (void)doStuff
{
    [authService loginWithEmail:@"x" andPassword:@"y"];
}

@end

@implementation ProtocolTests

- (void)testTheProtocol
{
    id authService = [OCMockObject mockForProtocol:@protocol(AuthenticationServiceProtocol)];
    id foo = [[Foo alloc] initWithAuthenticationService:authService];

    [[authService expect] loginWithEmail:[OCMArg any] andPassword:[OCMArg any]];

    [foo doStuff];

    [authService verify];
}

@end 
```

当我在 Xcode 版本 4.5 (4G182) 中针对 iPhone 6.0 模拟器运行它时，测试通过了。模拟对象的使用方式有什么不同吗？在您的情况下， _authenticationService 传递到哪里？收件人对它做了什么？

# hash - MD5 和 SHA 有哪些字符池？

> ID：12618321
> 
> 赞同：44
> 
> 时间：2012-09-27T09:34:16.500
> 
> 标签：hash, cryptography, md5, sha

MD5 和 SHA 是否只包含字母数字字符？（即，从 A 到 Z 和 0 到 9，或者它们是否排除了某些字符？）

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-27T09:36:51.167

原始形式的 MD5 和 SHA 哈希是二进制的，但是它们的常见表示是十六进制编码的字符串，其中包含字符`[a-fA-F0-9]`。

因此，如果这就是您的意思，那么字符 GZ、gz 将被“排除”。

另一种不太常见的表示是 Base64 编码 [0-9a-zA-Z+/]。

# php - 无法从 Magento 产品集合中检索价格信息

> ID：12618322
> 
> 赞同：2
> 
> 时间：2012-09-27T09:34:25.237
> 
> 标签：php, magento, magento-1.7

我正在尝试以类似于 list.phtml 的网格格式的方式在任意页面上输出某个类别的产品。

我有以下片段：

```
$category = Mage::getModel('catalog/category');
$category->load(17);
$_productCollection = $category->getProductCollection()
                               ->addAttributeToSelect('name');
$_helper = Mage::helper('catalog/output'); 
```

这给了我一个产品集合，然后我对其进行迭代：

```
foreach ($_productCollection as $_product): 

<!-- This works -->
<h2 class="product-name">
    <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>">
        <?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?>
    </a>
</h2>

<!-- This does not -->
<?php echo $this->getPriceHtml($_product, true) ?>

<!-- This just returns out of stock -->
<div class="actions">
    <?php if($_product->isSaleable()): ?>
        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')">
            <span><span><?php echo $this->__('Add to Cart') ?></span></span>
        </button>
    <?php else: ?>
        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
    <?php endif; ?>                                                    
</div>

endforeach; 
```

上面的代码除了顶部获取产品集合的调用外，都是从list.phtml中借用的。

谁能告诉我为什么没有价格和可售信息，因此为什么该商品出现缺货？以前当产品名称不可用时，我必须添加`->addAttributeToSelect('name')`，我是否需要在这些方面添加一些东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:01:23.997

请在您的 phtml 文件中尝试以下代码。

```
$category = Mage::getModel('catalog/category')->load(3);
$_productCollection = $category->getProductCollection()->addAttributeToSelect('*'); 
$productBlock=$this->getLayout()->createBlock("catalog/product");
foreach($_productCollection  as $_product)
{
    //for get the price of product 
    if($_product->isSaleable()) //this will check if product is in stock
       echo $productBlock->getPriceHtml($_product,true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:30:38.000

因此，如果您想复制一些与基本 Magento 中的功能类似的功能（例如产品列表），那么您就走在了研究核心的正确道路上。

1.  price 函数`getPriceHtml`是在抽象类中定义的方法`Mage_Catalog_Block_Product_Abstract`。所以要使用它，你需要从`Mage_Catalog_Block_Product_Abstract`一个扩展你的块。
2.  `isSaleable`返回 false 因为您没有将某些属性加入您的集合。

如果您想遵循 Magento 的逻辑，那么您应该如何实现目标。

1.  创建您自己的模块，或者只是阻止`local/Mage/Catalog/Block/YourBlock.php`. 这个块应该扩展`Mage_Catalog_Block_Product_Abstract`。之后在此块中创建一个方法`getCustomProductCollection()`：

    ```
    pubcli funciton getCustomProductCollection()
    {
        if (is_null($this->_productCollection)) {
            $category = Mage::getModel('catalog/category')->load(17);
            $layer = $this->getLayer();
            $layer->setCurrentCategory($category);
            $this->_productCollection = $layer->getProductCollection();
        }
        return $this->_productCollection;
    } 
    ```

2.  现在在您的`phtml`文件中，您只需调用此方法：

    ```
    $productCollection = $this->getCustomProductCollection(); 
    ```

其余代码将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:10:53.567

```
$productBlock=$this->getLayout()->createBlock("catalog/product");
echo $productBlock->getPriceHtml($_product,true); 
```

尝试这个

# ios - iOS 6 中的自定义 URL 方案不起作用？

> ID：12618324
> 
> 赞同：2
> 
> 时间：2012-09-27T09:34:26.270
> 
> 标签：ios, ios6

我的应用程序使用自定义 URL 方案，因此我在电子邮件中向我的用户发送一个链接，单击该链接时，会启动安装在他们设备上的我的应用程序。在 iOS 6 出现之前，它一直在无缝运行。现在，当用户单击链接甚至在 safari 中手动输入地址时，他们会收到一条错误消息：“Safari 无法打开该页面，因为它是本地文件。”

想知道是否有其他人遇到过同样的情况，或者是否有人在这方面有任何指示！

非常感谢任何帮助...

**更新**：如果我只给出我的应用程序的自定义 url 而没有任何参数，它就可以工作。例如，如果我执行“reader-app://”它会启动我的应用程序，但如果我执行“reader-app://doc=xyz”它不会不！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:38:24.610

尝试：reader-app://?doc=xyz（在 // 之后添加一个问号）这样您将指定一个查询字符串。它对我有用，但它会显示一个警告对话框，询问用户是否想用我的应用程序打开 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T10:43:14.680

尝试从 中删除`-`标志`reader-app://`。

在我从 URL 中删除下划线之前，我的 URL 无法正常工作。

前任：

`my_app://`不管用。

`myapp://`正在工作中。

*这只是一个猜测。*

# android - 如何通过代码访问“可绘制”文件

> ID：12618325
> 
> 赞同：0
> 
> 时间：2012-09-27T09:34:33.633
> 
> 标签：android

```
public static Bitmap loadBitmap(Context context, String filename){
        AssetManager assets = context.getResources().getAssets();
        InputStream buf = null;
        try {
            buf = new BufferedInputStream((assets.open("drawable/black_circle.png")));
        } catch (IOException e) {
            e.printStackTrace();
        }
        Bitmap bitmap = BitmapFactory.decodeStream(buf);
        return bitmap;
    } 
```

当我使用系统上面的代码时，会出现以下错误

```
09-27 12:33:44.470: W/System.err(18554): java.io.FileNotFoundException: drawable/black_circle.png
09-27 12:33:44.470: W/System.err(18554):    at android.content.res.AssetManager.openAsset(Native Method)
09-27 12:33:44.470: W/System.err(18554):    at android.content.res.AssetManager.open(AssetManager.java:315)
09-27 12:33:44.470: W/System.err(18554):    at android.content.res.AssetManager.open(AssetManager.java:289) 
```

我正在通过 Eclipse 在三星 Galaxy 上运行代码。如何使这项工作？

我需要动态更改文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:15:04.060

试试这种方式：

```
int image_id = getResources().getIdentifier("imagename", "drawable", getPackageName());

image.setBackgroundResource(image_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:41:20.303

在drawable文件夹下打开图像：

```
Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.black_circle); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:41:58.553

试试这个。

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.addto); 
```

如果你想从可绘制图像创建位图，那么你可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:42:02.373

你可以试试 ：

```
InputStream is = (InputStream) context.getResources().openRawResource(R.drawable.black_circle); 
```

# javascript - 使用滑块淡化图片 [Sencha Touch]

> ID：12618327
> 
> 赞同：0
> 
> 时间：2012-09-27T09:34:41.527
> 
> 标签：javascript, html, sencha-touch, slider, fade

我想寻求帮助，因为我找不到任何合适的答案。

我正在开发一个应用程序，它有 2 个模块，一个左侧和一个右侧，我可以通过切换启用/禁用。每一面都有一张图片，下面有一个滑块。滑块有 4 个步骤来改变图片。现在我希望图片有一个淡入淡出动画 onChange。我找不到一个足够接近我的问题的例子。

这是代码：

```
{
            xtype: 'container',
            name: 'rightContainer',
            flex: 1,
            padding: '2',
            items: [
                {
                    xtype: 'container',
                    id: 'containerr',
                    flex: 1,
                    html: '<img src="boerse_icon1.png" />',
                    margin: 25,
                },
                {
                    xtype: 'container',
                    flex: 1,
                    docked: 'bottom',
                    items: [
                        {
                            xtype: 'sliderfield',
                            id: 'sliderr',
                            disabled: true,
                            value: 0,
                            minValue: 0,
                            maxValue: 3,
                            margin: 25,
                            flex: 1,
                            listeners: {
                                change: function( me, Slider, thumb, newValue, oldValue, eOpts) {
                                    if (newValue == 0) {
                                        Ext.getCmp('containerr').setHtml('<img src="boerse_icon1.png" />');
                                    }
                                    if (newValue == 1) {
                                        Ext.getCmp('containerr').setHtml('<img src="boerse_icon2.png" />');
                                    }
                                    if (newValue == 2) {
                                        Ext.getCmp('containerr').setHtml('<img src="boerse_icon3.png" />');
                                    }
                                    if (newValue == 3) {
                                        Ext.getCmp('containerr').setHtml('<img src="boerse_icon4.png" />');
                                    }
                                }
                            }
                        }
                    ]
                }
            ]
        } 
```

这正是正确的容器。我正在运行 Sencha Touch 框架 2.0

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:25:37.373

你需要做的基本上是：

创建具有以下布局的面板：

```
layout: {
      type: 'card',
           animation: {
               type: 'fade',
               duration: 2000
           }
       } 
```

然后创建一个带有`change`事件监听器的滑块：

```
listeners: {
    change: function(me, Slider, thumb, newValue, oldValue, eOpts) {
        panel.setActiveItem(newValue);                        
    }
} 
```

用项目（图像）填充面板，你就可以开始了。

为此，我整理了一个可用的 Senchafiddle 供您试验： [**Senchafiddle 示例**](http://www.senchafiddle.com/#487Kl)

希望这可以帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:32:41.587

可能是这个作品。

```
 {
                xtype: 'container',
                id: 'containerr',
                showAnimation :'fadeIn',
                flex: 1,
                html: '<img src="boerse_icon1.png" />',
                margin: 25,
            }, 
```

# c# - 如何在 Winforms 中同步到不同的事件

> ID：12618328
> 
> 赞同：0
> 
> 时间：2012-09-27T09:34:46.300
> 
> 标签：c#, .net, winforms, event-handling

如果我有一个按钮可以执行某些操作，并且还有一个数据网格上的双击事件我想做同样的事情，那么确保只需要维护一个功能的最佳方法是什么？

除了执行以下操作之外，是否有任何花哨的 C# 方式来指示两个事件要执行相同的操作？

```
void button1_Click(...) { MyFunction(); }
void dataGrid1_DoubleClick(...) { MyFunction(); }
void MyFunction() {  // do stuff  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:44:54.750

我想您说的是 DataGridView (WinForms)，因此 DataGridView 中 DoubleClick 事件的签名和按钮控件上 Click 事件的签名是相同的。（一个事件处理器）。在这种情况下，您可以简单地使用表单设计器设置相同的方法或手动绑定事件

```
dataGridView1.DoubleClick += new EventHandler(MyFunction);
button1.Click += new EventHandler(MyFunction); 
```

当然 MyFunction 方法应该匹配 EventHandler 的预期签名

```
private void MyFunction(object sender, EventArgs e)
{
   // do your work
} 
```

几分钟后查看我的答案，我希望添加：

如果您发现自己需要使用 sender 对象（如 ）来区分控件，`Control c = sender as Control; if (c.Name == "someName")`我真的建议您回到第一个想法。调用一个通用方法，但为每个涉及的控件保持 EventHandler 分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:41:45.517

使用 VS，在窗体的设计器视图中，您可以在控件的属性窗口中设置要调用每个控件的每个事件的过程。

[图片](http://www.kepfeltoltes.hu/120927/sol_www.kepfeltoltes.hu_.jpg "图片")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:14:12.973

补充一下史蒂夫所说的，您将希望在表单的 Load 事件中手动将这些事件绑定到您的函数，而不是在设计器的属性窗口中使用闪电下的事件，如下所示：

```
private void Form1_Load(object sender, EventArgs e)
{
    button1.Click += MyMethod;
    dataGridView1.DoubleClick += MyMethod;
}

void MyMethod(object sender, EventArgs e)
{
    //Do Stuff
} 
```

此外，声明 EventHandler 类的新实例是多余的，因为在 C# 中引入了匿名方法，您可以直接将事件指向方法，如上所示。

# c - 在 GDB 中显示结构值

> ID：12618331
> 
> 赞同：30
> 
> 时间：2012-09-27T09:35:01.023
> 
> 标签：c, debugging, gdb, gnu

在 GDB 中，给定一个指向结构的变量，`print`将显示原始指针值并`x`显示指向的原始字节。有没有办法显示指向该结构的数据，即字段列表及其值？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-27T09:39:16.280

```
print *variable 
```

如果这样做，它将在 GDB 中显示该变量的值。
您还可以选择在缩进和换行中显示结构：

```
$1 = {
next = 0x0,
flags = {
sweet = 1,
sour = 1
},
meat = 0x54 "Pork"
} 
```

为此，您需要设置漂亮的打印：

```
set print pretty on 
```

如果你想打印一个值数组，你可以这样做：

```
print *array@len 
```

# git - 如何禁止 git commit -a 选项

> ID：12618332
> 
> 赞同：4
> 
> 时间：2012-09-27T09:35:02.667
> 
> 标签：git

我们是一组开发同一组文件的开发人员。我想确保没有人执行 git commit -a -m 或 git commit -am

包括我在内的开发人员都有这个坏习惯，`git commit -am/ -a -m`我们有很多特定于机器的配置文件，每次都会提交。我可以要求我们所有人使用 --assume-unchanged 但我想让开发人员根本无法使用 -a 标志

我可以以某种方式破解来实现这一目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T09:40:48.893

我建议您以不同的方式解决此问题：

1.  使用[.gitignore 文件](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)专门排除不能提交或
2.  使用[预提交挂钩](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)自动拒绝看起来像是使用 -a 进行的提交。

当你坚持禁用 -a 标志时：好吧，git 是开源的。查找和禁用读取 -a 命令行参数并重新编译的代码应该不会那么难。但这意味着每当发布新版本的 git 时，您都必须再次这样做，所以我真的不建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:47:33.040

您可以编写一个包装`git`脚本来检查该命令是否存在`commit`并且是否`-a`设置了标志。然后你可以放弃它并将其他所有内容传递给实际的`git`，或者提示“Bad User！Bad！”。将该脚本放在实际 git 路径之前的路径中，或者为您的`gitwrap`.

@PiotrZierhoffer 发现了这个：

> 一个例子在这里： [Disable -m in git](https://stackoverflow.com/questions/22157326/disable-m-in-git/22160650#22160650)

# zend-framework - Zend 框架 xml api

> ID：12618336
> 
> 赞同：0
> 
> 时间：2012-09-27T09:35:13.660
> 
> 标签：zend-framework, xml-parsing

我正在学习 Zend 框架。所以如果这个问题是基本的，请原谅。

我想写一个由 xml api 驱动的小应用程序。返回的xml如下。

解析这个 xml 文件的最佳方法是什么？我应该使用什么好的设计模式？我应该将它存储在模型中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T22:56:21.447

我最终扩展了 Zend_Rest_Client 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:07:56.243

我假设您想制作 PHP 变量以便与数据库一起使用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:11:48.550

您可以解析 xml 文件 Zend_Config_Xml。
[Zend 配置适配器](http://framework.zend.com/manual/1.12/en/zend.config.adapters.xml.html)

对于存储这些数据，我建议使用 xml 结构。稍后它将为应用程序提供更大的灵活性。

# ios - 适用于 iOS 的 Weka 库

> ID：12618337
> 
> 赞同：2
> 
> 时间：2012-09-27T09:35:13.700
> 
> 标签：ios, weka

你能告诉我是否有`weka`（机器学习算法）`iOS`吗？
如果是，请为我提供下载链接以下载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:21:13.990

iOS 协议说：

"3.3.2 — 应用程序本身不得以任何方式安装或启动其他可执行代码，包括但不限于通过使用插件架构、调用其他框架、其他 API 或其他方式。不得下载或使用任何解释代码在应用程序中，由 Apple 的文档化 API 和内置解释器解释和运行的代码除外。”

所以你不能启动一个 java 解释器来使用 WEKA 库。

但是......谷歌几天前发布了“Java to iOS Objective C 转换器”。WEKA 是一个“开源”项目。因此，也许，您可以尝试下载 WEKA 的（java）代码并将其从 java 转换为 Objective-C，以便在 iOS 中运行 WEKA 的算法。如果你明白了，请告诉我;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:42:38.447

Weka 是用 Java 编写的。这意味着它适应 iOS 的可能性很小。

# c# - 嵌套的 Parallel.ForEach 循环

> ID：12618338
> 
> 赞同：24
> 
> 时间：2012-09-27T09:35:21.647
> 
> 标签：c#, .net, concurrency, task-parallel-library, performance

我有一些代码，我目前正在优化多核架构中的并发性。在我的一堂课中，我发现了一个嵌套`foreach`循环。基本上，外部循环遍历`NetworkInterface`对象数组。内部循环遍历网络接口 IP 地址。

这让我想到，嵌套`Parallel.ForEach`循环一定是个好主意吗？读完这篇文章（[嵌套的 Parallel.ForEach 循环在同一个列表上？](https://stackoverflow.com/questions/3281604/nested-parallel-foreach-loops-on-the-same-list)）后，我仍然不确定在效率和并行设计方面什么适用。此示例将`Parallel.Foreach`语句应用于一个列表，其中两个循环都在该列表上执行操作。

在我的示例中，循环正在做不同的事情，所以，我应该：

1.  使用嵌套的 Parallel.ForEach 循环？
2.  父循环上的用户 Parallel.ForEach 并保持内部循环不变？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-27T09:44:32.277

Parallel.ForEach 不一定并行执行——如果可能的话，它只是一个请求。因此，如果执行环境没有 CPU 能力来并行执行循环，它就不会这样做。

如果循环上的动作不相关（即，如果它们是分开的并且不相互影响），我认为在内部和外部循环上使用 Parallel.ForEach 没有问题。

这实际上取决于执行环境。如果您的测试环境与生产环境足够相似，您可以进行时序测试，然后确定要做什么。如有疑问，请测试 ;-)

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T09:44:20.247

答案是，这取决于；

1.  拥有 IP 地址后，您将如何处理它？
2.  每个步骤需要多长时间？

线程并不便宜，它们需要时间来创建，并且需要内存才能存在。如果您没有使用这些 IP 地址做一些计算成本很高的事情，并且使用错误类型的集合进行并发访问，那么您几乎肯定会减慢您的应用程序的速度。

用于[`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)帮助您回答这些问题。

# javascript - ng-model 不更新控制器值

> ID：12618342
> 
> 赞同：277
> 
> 时间：2012-09-27T09:35:25.350
> 
> 标签：javascript, angularjs, data-binding, angular-ngmodel

可能是愚蠢的问题，但我的 html 表单带有简单的输入和按钮：

```
<input type="text" ng-model="searchText" />
<button ng-click="check()">Check!</button>
{{ searchText }} 
```

然后在控制器中（从routeProvider调用模板和控制器）：

```
$scope.check = function () {
    console.log($scope.searchText);
} 
```

为什么单击按钮时在控制台中看到视图已正确更新但未定义？

谢谢！

更新：似乎我实际上已经解决了这个问题（之前不得不想出一些解决方法）：只需将我的属性名称从更改`searchText`为`search.text`，然后在控制器中定义空`$scope.search = {};`对象，瞧……不知道为什么它在工作尽管 ;]

* * *

## 回答 #1

> 赞同：638
> 
> 时间：2014-03-31T17:54:36.543

*“如果你使用 ng-model，你必须有一个点。”*
让你的模型指向一个 object.property，你会很高兴的。

**控制器**

```
$scope.formData = {};
$scope.check = function () {
  console.log($scope.formData.searchText.$modelValue); //works
} 
```

**模板**

```
<input ng-model="formData.searchText"/>
<button ng-click="check()">Check!</button> 
```

当子范围在运行时会发生这种情况 - 例如子路由或 ng-repeats。子范围创建它自己的值，并产生名称冲突，[如下所示](https://www.youtube.com/watch?v=SBwoFkRjZvE&t=3m15s "父/子属性断开")：

有关更多信息，请参阅此视频剪辑：[https ://www.youtube.com/watch?v=SBwoFkRjZvE&t=3m15s](https://www.youtube.com/watch?v=SBwoFkRjZvE&t=3m15s)

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-09-29T08:14:39.000

**控制器作为**版本（推荐）

这里的模板

```
<div ng-app="example" ng-controller="myController as $ctrl">
    <input type="text" ng-model="$ctrl.searchText" />
    <button ng-click="$ctrl.check()">Check!</button>
    {{ $ctrl.searchText }}
</div> 
```

JS

```
angular.module('example', [])
  .controller('myController', function() {
    var vm = this;
    vm.check = function () {
      console.log(vm.searchText);
    };
  }); 
```

一个例子：[http ://codepen.io/Damax/pen/rjawoO](http://codepen.io/Damax/pen/rjawoO)

最好使用 Angular 2.x 或 Angular 1.5 或更高版本的组件

########

**老**方法（不推荐）

不建议这样做，因为字符串是原始的，强烈建议使用对象来代替

在你的标记中试试这个

```
<input type="text" ng-model="searchText" />
<button ng-click="check(searchText)">Check!</button>
{{ searchText }} 
```

这在你的控制器中

```
$scope.check = function (searchText) {
    console.log(searchText);
} 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2013-11-20T15:23:27.293

在 Mastering Web Application Development with AngularJS book p.19 中，写到

> 避免直接绑定到作用域的属性。双向数据绑定到对象的属性（在范围上公开）是一种首选方法。根据经验，您应该在提供给 ng-model 指令的表达式中添加一个点（例如，ng-model="thing.name"）。

范围只是 JavaScript 对象，它们模仿 dom 层次结构。根据[JavaScript Prototype Inheritance](http://blog.vjeux.com/2011/javascript/how-prototypal-inheritance-really-works.html)，范围属性通过范围分隔。为避免这种情况，应使用**点符号**来绑定 ng-models。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2014-09-21T11:32:05.680

使用`this`而不是`$scope`工作。

```
function AppCtrl($scope){
  $scope.searchText = "";
  $scope.check = function () {
    console.log("You typed '" + this.searchText + "'"); // used 'this' instead of $scope
  }
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>

<div ng-app>
  <div ng-controller="AppCtrl">
    <input ng-model="searchText"/>
    <button ng-click="check()">Write console log</button>
  </div>
</div>
```

**编辑：**在写这个答案的时候，我的情况比这复杂得多。在评论之后，我试图重现它以了解它为什么有效，但没有运气。我认为以某种方式（不知道为什么）生成了一个新的子范围并`this`引用了该范围。但是如果`$scope`使用它，它实际上是指父 $scope，因为 javascript 的[词法范围](https://stackoverflow.com/questions/1047454/what-is-lexical-scope)功能。

如果有人以这种方式测试并通知我们，那就太好了。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-01-21T17:07:39.623

我遇到了同样的问题，这是因为我没有先在控制器顶部声明空白对象：

```
$scope.model = {}

<input ng-model="model.firstProperty"> 
```

希望这对你有用！

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-04-03T02:04:22.417

在处理非平凡视图（有嵌套范围）时，我遇到了同样的问题。最后发现，由于 java-script 的基于原型的继承性质，在开发 AngularJS 应用程序时这是一个已知的棘手问题。AngularJS 嵌套范围是通过这种机制创建的。并且从 ng-model 创建的值被放置在子作用域中，并不是说父作用域（可能是注入控制器的那个）不会看到该值，如果不使用点，该值还将隐藏在父作用域中定义的任何同名属性强制执行原型引用访问。有关更多详细信息，请查看特定于说明此问题的在线视频[http://egghead.io/video/angularjs-the-dot/](http://egghead.io/video/angularjs-the-dot/)以及后续评论。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-09-27T11:12:39.990

看看这个小提琴[http://jsfiddle.net/ganarajpr/MSjqL/](http://jsfiddle.net/ganarajpr/MSjqL/)

我已经（我假设！）完全按照您正在做的事情做，而且它似乎正在工作。你能检查一下什么不适合你吗？

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-08-18T13:22:15.970

由于没有人提到这一点，因此可以通过添加`$parent`绑定属性来解决问题

```
<div ng-controller="LoginController">
    <input type="text" name="login" class="form-control" ng-model="$parent.ssn" ng-pattern="/\d{6,8}-\d{4}|\d{10,12}/" ng-required="true" />
    <button class="button-big" type="submit" ng-click="BankLogin()" ng-disabled="!bankidForm.login.$valid">Logga in</button>
</div> 
```

和控制器

```
app.controller("LoginController", ['$scope', function ($scope) {
    $scope.ssn = '';

    $scope.BankLogin = function () {
        console.log($scope.ssn); // works!
    };
}]); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-02-21T15:24:18.133

对我来说，问题是通过将我的数据存储到一个对象（这里是“数据”）中来解决的。

```
NgApp.controller('MyController', function($scope) {

   $scope.my_title = ""; // This don't work in ng-click function called

   $scope.datas = {
      'my_title' : "",
   };

   $scope.doAction = function() {
         console.log($scope.my_title); // bad value
         console.log($scope.datas.my_title); // Good Value binded by'ng-model'
   }

});
```

我希望它会有所帮助

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-03-13T07:12:42.670

我刚刚使用绑定到 body-element 的 root_controller 遇到了这个问题。然后我将 ng-view 与角度路由器一起使用。问题是 Angular 在将 html 插入 ng-view 元素时总是会创建一个新范围。因此，我的“检查”功能是在由我的 ng-model 元素修改的范围的父范围上定义的。

要解决这个问题，只需在路由加载的 html 内容中使用专用控制器。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-08-15T13:31:41.577

我有同样的问题。
正确的方法是将“searchText”设置为对象内的属性。

但是如果我想保持原样，一个字符串呢？好吧，我尝试了这里提到的每一种方法，但没有任何效果。
但是后来我注意到问题只出在启动中，所以我刚刚设置了 value 属性并且它起作用了。

```
<input type="text" ng-model="searchText" value={{searchText}} /> 
```

这样，该值仅设置为 '$scope.searchText' 值，并且在输入值更改时会更新。

我知道这是一种解决方法，但它对我有用..

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-09-04T09:28:53.463

You can do that to enable search in `ng-keypress` enter for input text and in `ng-click` for the icon:

```
<input type="text" ng-model="searchText" ng-keypress="keyEnter(this,$event)" />
<button ng-click="check(searchText)">Check!</button>

in the controller
$scope.search = function (searchText) {
        console.log(searchText);
    }
    $scope.keyEnter = function (serachText,$event) {
        var keyCode = $event.which || $event.keyCode;
        if (keyCode === 13) {//KeyCode for Enter key
           console.log(searchText);
        }
    } 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-12-30T08:57:51.093

我遇到了同样的问题......对我有用的解决方案是使用这个关键字............

警报（this.ModelName）；

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-03-23T11:49:30.780

为表单控件提供名称属性

# jquery - jQuery(this).find(div:first).outerWidth IE 8 错误

> ID：12618352
> 
> 赞同：0
> 
> 时间：2012-09-27T09:36:00.267
> 
> 标签：jquery, internet-explorer

以下是代码：

```
var b = this;
b.children("li").each(function() {
    var c = jQuery(this).find("div:first");
    var g = c.outerWidth();
    alert(g);
} 
```

警报语句抛出的值是每次迭代的常量值“3”，尽管它应该不同。仅在 IE8 中的错误。原因和解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:46:31.410

这不是一个错误。`outerWidth`返回“匹配元素集中第一个元素的当前计算宽度，包括填充和边框” [[1]](http://api.jquery.com/outerWidth/)。

只是碰巧在 IE8 中，由于呈现差异，内容的宽度与其他浏览器不同。

您可以通过为 div 指定固定宽度（例如`width: 640px`）来验证此行为，这将导致所有浏览器中的行为一致。有关演示，请查看：

[http://jsfiddle.net/y5Uur/1/](http://jsfiddle.net/y5Uur/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:46:49.820

默认情况下，`div`占据其父元素的整个宽度。所以所有的 div 都将具有相同的宽度：

示例：http: [//jsfiddle.net/fwHe5/1/](http://jsfiddle.net/fwHe5/1/)

现在，如果你改变它，让 div 的浮动向左并相对定位，它们不再占据整个宽度。

示例：http: [//jsfiddle.net/fwHe5/2/](http://jsfiddle.net/fwHe5/2/)

# build - cloudbees 构建中的错误：无法找到 pom.xml

> ID：12618355
> 
> 赞同：0
> 
> 时间：2012-09-27T09:36:06.723
> 
> 标签：build, pom.xml, cloudbees

当我构建我的 cloudbees 项目时，它给出了以下错误：

```
ERROR: No such file /scratch/jenkins/workspace/glassfish-myruby/pom.xml 
```

我的项目名称在哪里`glassfish-myruby`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:10:30.007

转到您创建的作业，然后单击左侧的“工作区”链接。这将向您展示您的项目是如何被签出的。pom 的位置可能与您预期的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:23:07.823

我遇到了类似的问题。我的项目建设得很好，然后突然停止并出现同样的错误：

```
Parsing POMs
ERROR: No such file /scratch/jenkins/workspace/MyMoney/pom.xml
Perhaps you need to specify the correct POM file path in the project configuration?
[cloudbees-deployer] Skipping deployment as build result is FAILURE
Finished: FAILURE 
```

我意识到我唯一改变的是添加一个 GitHub 页面（如[http://pages.github.com/](http://pages.github.com/)中所述）由于我不明白的原因，这导致我的项目从 gh-pages 分支签出而不是 master，如控制台输出中所反映的：

```
Commencing build of Revision 88d8d7ee822e02aa2cdae11e07265eb7a8403fed (origin/gh-pages) 
```

这也反映在 jenkins 工作区中（它包含 GitHub 页面文件，而不是我的项目文件）。

我确信有办法让它工作并使用 GitHub 页面，但对我来说 GitHub 页面只是一个实验，所以我使用以下方法删除了分支：

```
git push origin --delete gh-pages 
```

然后我还做了另一个提交以确保一切正常并重建。该项目现在再次从 master 签出并构建 OK。

# asp.net - 在标题中创建 2 行的 gridview

> ID：12618357
> 
> 赞同：0
> 
> 时间：2012-09-27T09:36:09.493
> 
> 标签：asp.net, gridview, footer

我想在头部创建 2 行的 gridview，如下所示： ![在此处输入图像描述](../Images/17dc4d0d4d508edd67e878bf9b132d89.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:39:33.323

您需要在 gidview 标题中进行合并，下面是文章链接，它将帮助您实现相同的目标

[GridView 列标题在 ASP.NET 中合并](http://www.codeproject.com/Articles/448762/GridView-column-header-merging-in-ASP-NET)

[合并标题 - GridView/DataGrid](http://www.codeproject.com/Articles/16049/Merge-Header-GridView-DataGrid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:42:19.723

使用 colspan：

```
<td colspan="2">1</td> 
```

# android - 将图像从 Android 发送到 Salesforce 服务器

> ID：12618372
> 
> 赞同：-2
> 
> 时间：2012-09-27T09:37:24.090
> 
> 标签：android, salesforce

我正在开发一个 android 应用程序，我需要在其中捕获图像并发送到 Salesforce 服务器。

目前我已经尝试将图像编码为base64然后发送，但我需要发送> = 500张图像同时在base64中编码。

如果我发送 >=500 个图像，服务器有效负载会接受吗？还有其他最好的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:45:01.213

Salesforce soap api 是批量创建数据的最佳方式，每个请求的限制为 200 行，每个请求的总请求大小限制为 50Mb。您需要将 500 张图片分成多个调用来[创建](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_create.htm)，这样每个单独的请求都不会超过这些限制。

# c# - XML 注释：自动生成

> ID：12618374
> 
> 赞同：1
> 
> 时间：2012-09-27T09:37:42.147
> 
> 标签：c#, monodevelop

我是 C# 开发人员已有几年了。所以，我一直使用 Visual Studio 编写代码。

**但是最近，我在一个项目中使用了 MonoDevelop，并且对XML 注释自动生成的**可能性感到非常惊讶。

所以，我想知道VS是否有这个功能，或者类似的东西。

它存在吗？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:42:39.667

我无法将它与 MonoDevelop 进行比较，但用于 Visual Studio 的一个非常好的类似工具是[GhostDoc](http://submain.com/products/ghostdoc.aspx)。

# java - liferay portlet 无法获取输入字段值

> ID：12618379
> 
> 赞同：0
> 
> 时间：2012-09-27T09:38:04.800
> 
> 标签：java, input, liferay, portlet

我无法弄清楚为什么我无法从 jsp 获取输入值。我正在使用 for cycle 为“选择”创建几个输入字段，但是当我尝试从 mvcportlet 获取值时，它什么也得不到。

```
<aui:form action="<%=addPollURL%>">
    <aui:fieldset>
        <%
            int optionCount = Integer.parseInt(optionCountS);
            for (int i = 0; i < optionCount; i++) {
        %>
        <aui:input label="<%=Integer.toString(i + 1)%>" name="choice<%=i%>"
            type="text" />
        <%
            }
        %>
        <aui:button-row>
            <aui:button value="Add poll" type="submit" />
        </aui:button-row>
    </aui:fieldset>
</aui:form> 
```

这里是 mvcportlet 方法

```
List<String> choices = new ArrayList<String>();
        int count = Integer.parseInt(actualChoiceCount);
        for (int i = 0; i < count; i++) {
            System.err
                    .println("another choice"
                            + ParamUtil
                                    .getString(
                                            actionRequest,
                                            ("choice" + i)));
            choices.add(new String(ParamUtil.getString(actionRequest,
                    ("choice" + i))));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:02:19.200

它真的很奇怪......但是一些想法或测试

1.  AddPollUrl 是具有命名操作的操作 URL，因此您的操作是在通用 portlet 中执行的吗？

2.  您确定文本字段中填充了 UI 中的值（标签中没有明确的值）吗？没有值的 ParamUtil 输出与具有空白值的输出相同

3.  尝试不使用 type=text 并将其写为单行（输入标签）

4.  尝试 aui:submit 而不是 aui:button 类型提交

5.  尝试向表单或字段添加 id（如果没有命名空间，我已经看到重复表单的一些问题）

6.  为什么是新字符串（ParamUtil ...）？

最重要的...你的 System.outs 的输出是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:47:59.947

发生这种情况是因为您的输入字段没有值。或者至少看起来是这样。您应该修改输入以将 value 参数设置为“choiceX”，例如：

```
<aui:input label="<%=Integer.toString(i + 1)%>" name="choice<%=i%>"
        type="text" value="choice<%=i%>" /> 
```

然后你会在 actionRequest 中找到它，就像 Jonny 说的：

```
request.getParameter("choice"+i); 
```

这将返回输入字段的**值**，按其名称搜索。因此，您可以在 processAction 方法中进行选择。

问候 ！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T06:53:40.760

尝试使用：

```
actionRequest.getParameter("choice" + i); 
```

这不是从请求中获取 POST 参数的标准方式。

# eclipse - 如何根据所选项目的性质在 Project Explorer 上下文菜单项中为同一操作显示不同的标签？

> ID：12618383
> 
> 赞同：1
> 
> 时间：2012-09-27T09:38:06.997
> 
> 标签：eclipse, plugins, contextmenu

我想在 Project Explorer 上下文菜单上添加一个操作。如果通过 org.eclipse.ui.popupMenus 定义操作，是否可以根据所选项目的性质显示不同的标签？我尝试定义 2 个贡献并尝试根据性质隐藏一个，但我没有找到测试项目性质的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:56:15.540

您可以尝试[http://timezra.blogspot.com/2007/12/dynamic-labels-for-eclipse-context.html](http://timezra.blogspot.com/2007/12/dynamic-labels-for-eclipse-context.html)
中概述的方法， 这只是为了创建一个动态贡献，您将获得一个返回`IMenuContribution[]`列表的方法，并且在代码中，您可以检查您想要的任何条件并返回适当的贡献。

[http://wiki.eclipse.org/Menu_Contributions#State_associated_with_the_command_is_propogated_to_UI_visible_elements](http://wiki.eclipse.org/Menu_Contributions#State_associated_with_the_command_is_propogated_to_UI_visible_elements)中概述了另一种方法，
以使`NAME`状态与命令相关联并根据需要对其进行更新，我没有尝试过，但它似乎更符合您的要求。
`<state id="NAME" class="org.eclipse.jface.menus.TextState" />`

# html - 由于 django 模板块，html 旁边的垃圾文本？

> ID：12618392
> 
> 赞同：0
> 
> 时间：2012-09-27T09:38:51.780
> 
> 标签：html, django, utf-8, django-templates

我有一个模板块来覆盖继承模板中的类名。来自块覆盖的结果 html 显示了恶意文本。

**基础.html：**

```
<html>
<body>
    {% block content %}
    <h1 class="{% block heading_style %}Base{% endblock %}">Base Page Heading</h1> 
    {% endblock%}
</body>
</html> 
```

**儿童.html：**

```
{% extends "Base.html" %}

{% block content %} 
{{block.super}}
{% block heading_style %}Login{% endblock %}
{% endblock %} 
```

块标题样式是我关心的块。

**结果html：**

![结果 html](../Images/668a235d99b7a3133599a68ca7b36397.png)

如您所见，h1 类已替换为“登录”，但它也开始在 h1 标记后将“登录”显示为文本。

我正在使用 django 1.3.3 和 Eclipse 与 pydev。我还检查了 html 文件的编码，它们是`utf-8`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:43:37.307

您已将块的定义放在块*内*的`heading_style`子项中。所以它被用于两件事：作为 中的文本内容，以及填充父级中的块。*`content``content``heading_style`*

 *移到块定义`heading_style`之外`content`，应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:43:31.313

缺少一个端块

```
{% block content %} 
{{block.super}}
{% block heading_style %}Login{% endblock %} {% endblock %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:11:43.337

我不确定覆盖块和嵌套子块以及`{{block.super}}`做事的良好组合。可能你想重新考虑你的模板而不依赖它。

这是与此相关的 django 票证（不确定是否已修复）[{{ block.super }} 不适用于嵌套的 {% block %} 语句](https://code.djangoproject.com/ticket/7324)*

# java - 解析 XML 返回 NullPointerException

> ID：12618394
> 
> 赞同：0
> 
> 时间：2012-09-27T09:39:06.693
> 
> 标签：java, android

我有以下 XML 代码

```
<?xml version="1.0" encoding="windows-1250"?>
<menu>
  <item>
    <id>0</id>
    <name>Pizzerie u soudu</name>
    <street>Havlíčkova 3</street>
    <city>779 00 Olomouc</city>
    <mobile>777035862</mobile>
    <telephone>585223042</telephone>
    <openinghours>10-22</openinghours>
  </item>
  <item>
    <id>1</id>
    <name>Pepinova pizza</name>
    <street>©meralova 10</street>
    <city>779 00 Olomouc</city>
    <mobile>776102022</mobile>
    <telephone>-</telephone>
    <openinghours>8-22</openinghours>
  </item>
</menu> 
```

我想通过以下代码解析它：

```
XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(URL);

Document doc = parser.getDomElement(xml);
NodeList nl = doc.getElementsByTagName("item");

        for (int i = 0; i < nl.getLength(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element)nl.item(i);
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_STREET, parser.getValue(e, KEY_STREET));
            map.put(KEY_CITY, parser.getValue(e, KEY_CITY));
            map.put(KEY_MOBILE, parser.getValue(e, KEY_MOBILE));
            map.put(KEY_TELEPHONE, parser.getValue(e, KEY_TELEPHONE));
            map.put(KEY_OPENINGHOURS, parser.getValue(e, KEY_OPENINGHOURS));
            menuItems.add(map);
        } 
```

但我在网上有问题

```
NodeList nl = doc.getElementsByTagName("item"); 
```

它返回有`java.lang.NullPointerException` 什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:01:50.560

在我看来，您`XMLParser`的代码是您的专有代码，并且`getDomElement`方法由于某种原因返回 NULL，例如在路径中找不到文件或其他一些错误。即使是标准 API，请检查是否有任何条件将文档值返回为 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:28:37.850

```
import java.io.File;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class parsing {
public  void parse() {

try {

File file = new File("F:\\JavaProjects\\JavaApplication12\\src\\javaapplication12\\urdoc.xml");

DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(file);
doc.getDocumentElement().normalize();

NodeList nodes = doc.getElementsByTagName("item");

String id,name,street,city,mo,tel,oh;
for (int s = 0; s < nodes.getLength(); s++) {

Node fstNode = nodes.item(s);

System.out.println("Node.ELEMENT_NODE:"+Node.ELEMENT_NODE);
if (fstNode.getNodeType() == Node.ELEMENT_NODE) {
     Element element = (Element) nodes.item(0);
NodeList idp= element.getElementsByTagName("id").item(0).getChildNodes();
id = ((Node) idp.item(0)).getNodeValue();

NodeList np= element.getElementsByTagName("name").item(0).getChildNodes();
name = ((Node) np.item(0)).getNodeValue();

NodeList sp= element.getElementsByTagName("street").item(0).getChildNodes();
street = ((Node) sp.item(0)).getNodeValue();

NodeList cp = element.getElementsByTagName("city").item(0).getChildNodes();
city = ((Node) cp.item(0)).getNodeValue();

NodeList mp = element.getElementsByTagName("mobile").item(0).getChildNodes();
mo= ((Node) mp.item(0)).getNodeValue();    

NodeList tp = element.getElementsByTagName("telephone").item(0).getChildNodes();
tel= ((Node) tp.item(0)).getNodeValue();   

NodeList op= element.getElementsByTagName("openinghours").item(0).getChildNodes();
oh= ((Node) op.item(0)).getNodeValue();   

   System.out.println("After parsing..");
   System.out.println("id "+id);
   System.out.println("name "+name);
   System.out.println("city "+city);
   System.out.println("street "+street);
   System.out.println("telephone "+tel);
   System.out.println(" mobile"+tel);
   System.out.println(" oh"+oh);

    }

}
}
 catch (Exception e)
  { 
  System.out.print("Exception: "+e);

}
}
} 
```

# php - 为 php preg_match_all 创建模式

> ID：12618400
> 
> 赞同：2
> 
> 时间：2012-09-27T09:39:26.563
> 
> 标签：php, html, regex, preg-match-all

我正在使用 preg_match_all() ，我的问题是我无法创建我想要的模式。源文本示例：

```
<td align='left'>
    <span style='font-size: 13px; font-family: Verdana;'><span>
</td>
<td>
    <a style='color: #ffff00' rel='gb_page_fs[]' title='Parodyk kitiems 8 seriją' href='/pasidalink-19577x10/'>
        <img src="/templates/filmai_black/images/ico_tool_share.gif" />
    </a>
</td>
<td>
    <small>LT titrai</small>
</td>
<td>
    <a rel='gb_page_center[528, 290]' title='Žiūrėti 8 seriją' href='http://www.filmai.in/watch.php?em=BuwgzpqtssiAGGcjeekz9PTI1NjQ0N2E~'>
        <img src="/templates/filmai_black/images/play_icon.png" width="20" onclick='set_watched_cookie_serial("19577x10", "done-tick-full-series")' />
    </a>
</td> 
```

我正在使用模式：

```
<td><small>(.*)</small></td>
<td><a rel='gb_page_center[528, 290]' title='Žiūrėti (.*) seriją' href='(.*)'><img src= 
```

我想将 (.*) 位置中的内容放入一个数组中。

有人可以纠正我的模式并解释一下吗？我想学习使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:53:23.980

除了“*不要使用 Regex 解析 HTML* ”之外，这里还有一些学习 Regexp 的超级简单的步骤。

1.  [下载并安装 RegexBuddy](http://www.regexbuddy.com/)
2.  运行正则表达式好友
3.  [从简单的事情开始](http://www.youtube.com/watch?v=xLSdaltwIk8)，然后飞起来！:)

您正在寻找的表达式是：

```
<small>(.*)</small> 
```

它找到`small`标签之间的所有字符并将它们放入反向引用中。将`Backreference`其视为一个数组。找到的第一个项目是 0，下一个是 1，依此类推。

```
// command:
preg_match_all('%<small>(.*)</small>%i', $subject, $result, PREG_PATTERN_ORDER);

// $result[0]

Array
(
    [0] => <small>LT titrai</small>
) 
```

# vim - 突出显示包含搜索词的行

> ID：12618403
> 
> 赞同：4
> 
> 时间：2012-09-27T09:39:37.147
> 
> 标签：vim

我知道可以配置 vim 以突出显示搜索词的所有匹配项。

但是，是否可以突出显示找到搜索词的整行？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T10:08:15.073

如果您通常希望突出显示当前行：

```
:set cursorline 
```

如果您只想突出显示搜索，唯一简单的方法是扩展搜索模式以覆盖整行：

```
:set hlsearch
:let @/ = '.*'.@/.'.*' 
```

请注意，在`n`/上`N`，光标现在将跳转到行首，而不是匹配的单词。此外，您将无法再`:%s//...`替换匹配的单词（无需重复搜索模式）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T10:16:24.873

确切的解决方案可能取决于您的目标：

你想让匹配的线条更加突出吗？

您想知道行号以供进一步使用吗？

你想直接在这些线上采取行动吗？

您可以使用 quickfix 窗口列出包含匹配项的行：

```
:vim! foo . | copen 
```

您可以使用该`:global`命令列出或作用于包含匹配项的每一行：

```
:g/foo<CR>          " list the lines
:g/foo/<Ex command> " act on each line 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T09:40:48.287

```
:set hlsearch 
```

将[突出显示](http://vim.wikia.com/wiki/Highlight_all_search_pattern_matches)搜索的单词。

另请注意，您可以[突出显示当前行](http://vim.wikia.com/wiki/Highlight_current_line)，即光标所在的行。因此，当您在比赛之间移动时，您移动到的完整行将突出显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-17T06:27:43.400

你可以安装这个插件[highlight.vim](https://github.com/vim-scripts/highlight.vim)。其中一个快捷键`<C-h><C-j>`允许您突出显示包含先前搜索模式的行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-27T09:41:54.530

请使用这个：

要突出显示文件中的所有搜索模式匹配项，请设置以下选项：

```
:set hlsearch 
```

要暂时禁用突出显示，请使用：

```
:nohlsearch 
```

# java - 带有 java.lang.IllegalArgumentException 的 Android 和 MJPEG

> ID：12618408
> 
> 赞同：2
> 
> 时间：2012-09-27T09:39:43.923
> 
> 标签：java, android, stream, mjpeg, ip-camera

我已经实现了帖子中的演示： [Android and MJPEG](https://stackoverflow.com/questions/3205191/android-and-mjpeg/3305276#3305276)

但是应用程序总是在一段时间后出现错误，我得到了异常：

```
java.lang.IllegalArgumentException: Invalid Unicode sequence: illegal character 
```

在类中的以下代码中`MjpegViewThread`：

```
公共无效运行（）{
    开始 = System.currentTimeMillis();
    PorterDuffXfermode 模式 = 新 PorterDuffXfermode(PorterDuff.Mode.DST_OVER);
    位图 bm;
    整数宽度；
    整数高度；
    矩形 destRect;
    画布 c = null;
    油漆 p = 新油漆（）；
    字符串 fps = "";
    而（mRun）
    {
        如果（表面完成）
        {
            尝试
            {
                c = mSurfaceHolder.lockCanvas();
                同步（mSurfaceHolder）
                {
                    尝试
                    {
                        bm = mIn.readMjpegFrame();
                        destRect = destRect(bm.getWidth(),bm.getHeight());
                        c.drawColor(Color.BLACK);
                        c.drawBitmap(bm, null, destRect, p);
                        如果（showFps）{
                            p.setXfermode（模式）；
                            如果（ovl！= null）{
                                高度 = ((ovlPos & 1) == 1) ？destRect.top : destRect.bottom-ovl.getHeight();
                                宽度 = ((ovlPos & 8) == 8) ？destRect.left : destRect.right -ovl.getWidth();
                                c.drawBitmap(ovl, 宽度, 高度, null);
                            }
                            p.setXfermode(null);
                            帧计数器++；
                            if((System.currentTimeMillis() - 开始) >= 1000) {
                                fps = String.valueOf(frameCounter)+"fps";
                                帧计数器 = 0;
                                开始 = System.currentTimeMillis();
                                ovl = makeFpsOverlay(overlayPaint, fps);
                            }
                        }
                    }
                    捕获（IOException e）
                    {
                        Log.i(TAG, "错误: "+e);
                    }
                }
            }
            捕获（异常 e）
            {
                Log.i(TAG, "错误: "+e);
            }
            最后
            {
                如果 (c != null)
                    mSurfaceHolder.unlockCanvasAndPost(c);
            }
        }
    }
}

```

我不确定以下 LogCat 信息是否有用。

```
    09-27 17:06:36.645: D/dalvikvm(10120): threadid=9: 撤消后仍然挂起 (sc=1 dc=1)
    09-27 17:06:46.745: D/dalvikvm(10120): GC_EXTERNAL_ALLOC 释放 132K，47% 释放 2998K/5575K，外部 1625K/2137K，暂停 44ms
    09-27 17:06:46.825: D/dalvikvm(10120): GC_EXTERNAL_ALLOC 释放 65K, 47% 释放 2997K/5639K, 外部 2227K/2779K, 暂停 27ms
    09-27 17:06:46.955: D/dalvikvm(10120): GC_EXTERNAL_ALLOC 释放 127K，48% 释放 2997K/5703K，外部 2827K/2827K，暂停 40ms
    09-27 17:06:47.385: D/dalvikvm(10120): GC_EXTERNAL_ALLOC 释放 142K，48% 释放 3000K/5703K，外部 2827K/2827K，暂停 31ms
    09-27 17:06:47.515: D/dalvikvm(10120): GC_EXTERNAL_ALLOC 释放 131K，48% 释放 2997K/5703K，外部 2827K/2827K，暂停 27ms
    09-27 17:06:47.615: D/dalvikvm(10120): GC_EXTERNAL_ALLOC 释放 127K，48% 释放 2997K/5703K，外部 2827K/2827K，暂停 31ms

```

谁能给我一些线索来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-14T05:39:32.320

我知道这有点旧，但我找到了解决这个问题的方法，代码运行良好，它是相机，FPS 可能设置为“可变”或“自动”。我使用的是 TrendNet TV-IP551WI，FPS 的默认设置是“自动”，我注意到程序可能会在 5 -15 秒后崩溃，我会收到非常错误的错误，我还注意到它非常生涩导致我相信fps是不对的。但是在将 fps 设置为固定速率后（不管选择一个，我选择了 20），错误应该会消失，并且不会再出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T02:17:18.173

您可能想尝试[将 mjpegview 的神经装配代码](http://bitbucket.org/neuralassembly/simplemjpegview)作为一个新的虚拟项目。这是相同的代码，但增加了增强功能。我遇到了同样的问题，然后通过一些调整尝试了他的代码，它就像一个魅力。

另外，如果您在构建 gradle 时遇到**ndk_project_path=null ，请在****android**标签内的**build.gradle**中添加以下代码块：

 **```
buildTypes {
    release {
        runProguard false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
    }
}
sourceSets.main {
    jni.srcDirs = []
    jniLibs.srcDir 'src/main'
} 
```

希望这对其他人有所帮助。**

# jquery - .hover Jquery 在鼠标悬停时闪烁

> ID：12618412
> 
> 赞同：0
> 
> 时间：2012-09-27T09:40:07.500
> 
> 标签：jquery

我试图`div`在有人将鼠标悬停在图像上时显示。

**这是我的 jQuery 代码：**

```
var $i = jQuery.noConflict(); 
$i("#overlay-<?php echo $j;?>").hover(function () {
    $i("#overlay-show-<?php echo $j;?>").fadeIn("fast");
    $i("#overlay-show-<?php echo $j;?>").fadeOut("fast");   
}); 
```

**这是我的 HTML 代码**

```
<div id="overlay-show-1" class="overlay-show" style="display: block;">
 <div class="product-price">
 <h2 class="product-name"><a title="Marotte Top"href="http://sabbathshop.com/index.php/apparel/marotte-top.html">Marotte Top</a></h2>   
 <div class="price-box">
 <span id="product-price-180" class="regular-price">
  <span class="price">$80.00</span></span>
  </div>
  </div>
   <div class="price-bottombg"></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:42:41.107

`$i("#overlay-show-<?php echo $j;?>").is(":hidden")`无论是否有匹配的选择器，都会返回一个对象。

您应该检查`length`以查看是否有匹配项：

```
if ($i("#overlay-show-<?php echo $j;?>").is(":hidden").length>0) { 
```

* * *

回应您的更新：

由于该事件只有一个函数参数`.hover()`，因此当您悬停**和**悬停时将执行此操作。

同样在您的函数中，您`fadeIn`直接调用`fadeOut`. 因此，这将导致元素淡入，然后立即再次淡出（导致您提到的闪烁）。

您应该将代码更改为仅`fadeIn`在悬停时，并且仅`fadeOut`在悬停时。

```
$i("#overlay-<?php echo $j;?>").hover(function () {
    $i("#overlay-show-<?php echo $j;?>").fadeIn("fast"); 
}, function(){
    $i("#overlay-show-<?php echo $j;?>").fadeOut("fast");  
}); 
```

# python - 将数据导出到 Excel，日期格式更改为文本

> ID：12618418
> 
> 赞同：-2
> 
> 时间：2012-09-27T09:40:22.133
> 
> 标签：python, django, excel, export-to-excel

当我将数据从我的网站 [python-django] 导出到“Excel”时，所有字段都正确显示，日期字段也显示良好，但问题是它显示为文本，因此我无法应用自动过滤器和其他高级选项它适用于“日期”格式。所以我希望仅将日期导出为“日期”类型。是否有任何设置或其他任何我们可以做的事情来实现这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:35:41.820

导入数据后，在excel中更改列的格式..

*   右键单击列顶部，选择“格式化单元格”
*   单击“数字”选项卡，然后选择“日期”并选择与您的输出匹配的格式
*   选择日期格式时，您可能需要更改区域设置以匹配您的数据库设置。

您现在应该能够按日期过滤。

（适用于 MS Office 2010）

# android - 为什么没有为图像视图执行手势监听器中的 on fling 方法？

> ID：12618420
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:40:27.320
> 
> 标签：android

onfling 方法是没有为图像视图执行手势侦听器。有人可以告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:58:49.303

试试这个代码。它对我有用。它也应该对你有用。

```
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;    

GestureDetector mGestureDetector = new GestureDetector(new MyGestureDetector());

imgvw.setOnTouchListener(new OnTouchListener() 
{ 
       @Override 
       public boolean onTouch(View v, MotionEvent event) 
       {        
           if(mGestureDetector.onTouchEvent(event);) 
                return true;

            return true;
       } 
});

class MyGestureDetector extends SimpleOnGestureListener {

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            // right to left swipe
            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) { 
                Log.i(TAG, " ---------- right to left swipe --------- "+" e1.getX() "+e1.getX()+" e2.getX() "+e2.getX());                   
            } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Log.i(TAG, " ---------- left to right swipe --------- "+" e1.getX() "+e1.getX()+" e2.getX() "+e2.getX());                   
            }
        } catch (Exception exception) {
            Log.i(TAG, exception.getMessage().toString());
        }
        return false;
    }

    @Override
    public boolean onDoubleTap(MotionEvent eMotionEvent) {
        Log.i(TAG, " ------------ double tap occured ---------- ");
        return super.onDoubleTap(eMotionEvent);
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent eMotionEvent) {
        Log.i(TAG, " ------------ single tap occured ---------- ");
        return super.onSingleTapConfirmed(eMotionEvent);
    }
} 
```

# .net - 带有扩展方法的stackoverflow异常

> ID：12618422
> 
> 赞同：0
> 
> 时间：2012-09-27T09:40:29.393
> 
> 标签：.net, entity-framework, .net-4.0, entity-framework-5

如何从 DbContext 添加扩展方法？

这会引发堆栈溢出异常：

```
 public IQueryable<T> All<T>() where T : class, new()
    {
        return this.All<T>();
    } 
```

我使用代码调用它：

```
var u = UnitOfWork.All<User>().ToList(); 
```

工作单位是：

```
 protected DBContext UnitOfWork = new DBContext (); 
```

这也会抛出：

```
return this.All<T>().AsQueryable(); 
```

我的课：

```
public class DBContext : DbContext, ISession
{

    public DBContext ()
        : this("name=myConnString")
    {

    }

    public SurventrixContext(string dbcontext)
        : base(dbcontext)
    {

    }

    #region mappings

    private void UserMappings(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().ToTable("tUsers");

        modelBuilder.Entity<User>().Property(x => x.UserID).HasColumnName("fU_UserID")
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        modelBuilder.Entity<User>().Property(x => x.FirstName).HasColumnName("fU_First_Name");
        modelBuilder.Entity<User>().Property(x => x.LastName).HasColumnName("fU_Last_Name");
        modelBuilder.Entity<User>().Property(x => x.Login).HasColumnName("fU_Login");
        modelBuilder.Entity<User>().Property(x => x.Password).HasColumnName("fU_Password");
        modelBuilder.Entity<User>().Property(x => x.Email).HasColumnName("fU_Email");
        modelBuilder.Entity<User>().Property(x => x.Tel).HasColumnName("fU_Tel");
        modelBuilder.Entity<User>().Property(x => x.CreateDate).HasColumnName("fU_CreateDate");
        modelBuilder.Entity<User>().Property(x => x.LastPasswordChangedDate).HasColumnName("fU_LastPasswordChangedDate");
        modelBuilder.Entity<User>().Property(x => x.PasswordKey).HasColumnName("fU_PasswordKey");
        modelBuilder.Entity<User>().Property(x => x.KeyExpiryDate).HasColumnName("fU_KeyExpiryDate");
        modelBuilder.Entity<User>().Property(x => x.ApiToken).HasColumnName("fU_ApiToken");

        modelBuilder.Entity<User>().HasKey(t => t.UserID)
            .Property(x => x.UserID);
    }

    #endregion

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        UserMappings(modelBuilder);

        base.OnModelCreating(modelBuilder);
    }

    public DbSet<User> User { get; set; }

    public DbSet<ReportCommit> ReportCommit { get; set; }

    public DbSet<Organization> Organization { get; set; }

    public void CommitChanges()
    {
        this.SaveChanges();
    }

    public void Delete<T>(System.Linq.Expressions.Expression<Func<T, bool>> expression) where T : class, new()
    {
        this.Delete<T>(expression);
    }

    public void Delete<T>(T item) where T : class, new()
    {
        this.Delete<T>(item);
    }

    public void DeleteAll<T>() where T : class, new()
    {
        this.DeleteAll<T>();
    }

    public T Single<T>(System.Linq.Expressions.Expression<Func<T, bool>> expression) where T : class, new()
    {
        return this.Single<T>(expression);
    }

    public IQueryable<T> All<T>() where T : class, new()
    {
        return this.All<T>().AsQueryable();
    }

    public void Add<T>(T item) where T : class, new()
    {
        this.Add<T>(item);
    }

    public void Add<T>(IEnumerable<T> items) where T : class, new()
    {
        foreach (var item in items)
        {
            this.Add<T>(item);
        }
    }

    public void Update<T>(T item) where T : class, new()
    {
        this.Update<T>(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:45:53.807

那不是扩展方法！您刚刚创建了一个递归调用自身的方法。

扩展方法如下：

```
public static IQueryable<T> All<T>(this IQueryable<T> query) where T : class, new()
{
    return query.All();
} 
```

编辑：

我检查了您的代码，您很可能根本没有在寻找扩展方法。您正在寻找：

```
public IQuerybale<T> All<T>() where T : class, new() 
{
    return this.Set<T>();
} 
```

# java - 调用 weblogic 托管的 jax-ws webservice 时出错

> ID：12618423
> 
> 赞同：0
> 
> 时间：2012-09-27T09:40:29.387
> 
> 标签：java, web-services, weblogic, jax-ws

我正在使用托管在 weblogic 10.3 上的 jax-ws webservice，在调用 webservice 时我得到以下响应

javax.xml.soap.SOAPException：无法接收消息。引起：java.io.IOException：null 引起：javax.xml.stream.XMLStreamException：javax.xml.stream.XMLStreamException：文件过早结束 引起：javax.xml.stream.XMLStreamException：文件过早结束

有谁知道它为什么来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:08:33.957

从 web 服务生成的响应不是应有的，这就是我收到此异常的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T13:17:41.127

我可能会因为重新解决一个已解决的问题而被打败，但这里就是这样。也许这会节省一些时间。

我在我正在处理的一个项目中引入了这个错误。事实证明，IDE 通过在其中一个行映射器中导入同名的旧类型来“帮助”我。my.proj.old.stuff.MyType 而不是 my.new.stuff.MyType。

# php - ini_set 不工作

> ID：12618424
> 
> 赞同：19
> 
> 时间：2012-09-27T09:40:32.487
> 
> 标签：php

事情是这样的：

```
ini_set('display_errors', '1');
ini_set('safe_mode', '0');
ini_set('allow_url_fopen', '1');
ini_set('allow_url_include', '1');
print_r(ini_get_all());

```

我得到：

```
大批（
    [allow_url_fopen] => 数组
        (
            [全局值] => 1
            [本地值] => 1
            [访问] => 4
        )

    [allow_url_include] => 数组
        (
            [全局值] =>
            [本地值] =>
            [访问] => 4
        )

```

为什么我不能在 php ini_set 函数中设置该变量？该指令被指定为 PHP_INI_ALL 然后它可以在 ini_set() 函数中定义！ [http://php.net/manual/en/ini.list.php](http://php.net/manual/en/ini.list.php)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T09:47:15.023

**`display_errors`**

可以在运行时设置（使用`ini_set()`），但如果脚本有致命错误，它不会有任何影响。这是因为未执行所需的运行时操作。

采用`ini_set('display_errors','Off');`

**`safe_mode`**

此功能自 PHP 5.3.0 起已弃用，自 PHP 5.4.0 起已移除。该指令属于`PHP_INI_SYSTEM`并且不能通过以下方式设置`ini_set()`

**`allow_url_include`**

采用`ini_set('allow_url_include', 'On');`

**`allow_url_fopen`**

该指令属于`PHP_INI_SYSTEM`并且不能通过以下方式设置`ini_set()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T09:43:41.163

这些变量不能在用户脚本中更改。该`access`值意味着：

```
PHP_INI_SYSTEM    4          Entry can be set in php.ini or httpd.conf 
```

您可以尝试将其设置为`.htaccess`：

```
php_value  allow_url_include 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:42:35.277

您是否尝试过使用布尔值而不是 0 或 1？

```
ini_set('display_errors', true);
ini_set('safe_mode', false);
ini_set('allow_url_fopen', true);
ini_set('allow_url_include', true);
print_r(ini_get_all()); 
```

或者试试这个：

```
ini_set('allow_url_include', 'on'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:42:56.433

allow_url_fopen 不能被 ini_set 修改。这是因为某些 ini 语句只能在 ini 文件中声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-25T21:27:05.097

我的回答可能跑题了，但当我的`ini_set`电话打不通时，我几乎总是通过谷歌回到这个问题。分享我的案例可能会帮助其他人`ini_set`更快地解决问题。

因此，在我的情况下`display_errors`被禁用，但 PHP 无论如何都会在浏览器中显示错误，尽管我启用`log_errors`并设置`error_log`为`C:\Windows\Temp\PHP_error.log`.

第一印象始终是*ini_set 无法正常工作，*但它可能是权限问题。如果 PHP 无法访问日志文件，那么它只会将错误发送到浏览器。

**解决方法：**确保 PHP 具有访问和写入日志文件的权限。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-18T20:45:23.443

如果您在 zabbix 界面中收到此消息`"ini_set(): Use of mbstring.internal_encoding is deprecated"`

只需转到文件 vi /usr/local/share/zabbix/include/locales.inc.php 并注释该行

```
#       ini_set('mbstring.internal_encoding', 'UTF-8');" 
```

重新启动`httpd`和`zabbix-server`守护进程，然后尝试..就是这样。！

# oracle - 如何从 java servlet 连接到 oracle？

> ID：12618430
> 
> 赞同：0
> 
> 时间：2012-09-27T09:40:48.603
> 
> 标签：oracle, servlets, connection

我从在 Jetty 中运行的 java servlet（作为 Eclipse 的一部分）连接到 oracle 时遇到问题。相同的代码在独立的 Java 应用程序中运行良好。

我的整个开发环境都在一个 mac 上。我正在使用 Eclipse 并将 ojdbc6.jar 包含在主“引用库”中，并且还将此文件拖放到 war/web-inf/lib 文件夹中。

只要线

> OracleConnectionPoolDataSource ocpds = new OracleConnectionPoolDataSource();

被调用（在servlet中）我得到了异常：

> java.security.AccessControlException：访问被拒绝（javax.management.MBeanServerPermission createMBeanServer）

我是否缺少一些安全策略？如果是这样，我究竟需要做什么来纠正这个问题？而这个 BeanServer 又是从哪里来的呢？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:18:16.520

每个 Web 容器都有自己定义数据源的方式，并通过 JNDI 使它们可用。你应该这样做。

本机 oracle 连接池似乎正在创建一个 MBeanServer，这可能是 Jetty 使用的安全管理器不允许的。请参阅[http://wiki.eclipse.org/Jetty/Feature/Secure_Mode](http://wiki.eclipse.org/Jetty/Feature/Secure_Mode)和[http://wiki.eclipse.org/Jetty/Tutorial/Jetty-Policy](http://wiki.eclipse.org/Jetty/Tutorial/Jetty-Policy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:03:09.320

解决了 - 不完全清楚为什么，但在 Eclipse 中创建了一个新的 GWT 应用程序，但这次不包括 Google App Engine（默认勾选）。当它在 Jetty 中运行时，这似乎给代码添加了一些限制......我现在已经复制了示例代码，一切都运行良好！

# c# - 使用 WebAPI 时停止 XSS

> ID：12618432
> 
> 赞同：12
> 
> 时间：2012-09-27T09:41:04.667
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-4.0

我有一个控制器可以接受

```
public class MyModel
{
   [MaxLength(400)]
   public string Message { get; set; }
} 
```

我有一个 WebApi 发布操作

```
public HttpResponseMessage Post(MyModel viewModel)
{
            if (!ModelState.IsValid)
                return new HttpResponseMessage(HttpStatusCode.BadRequest);                 
            ...
} 
```

并采取行动。

由于内容是由 javascript 写出的，而不是直接在视图中写出确切的内容，因此也没有关于危险内容的 asp.net 警告。

我想防止 XSS。目前我正在做

```
HttpUtility.HtmlEncode(Regex.Replace(p.Message, @"<[^>]*>", String.Empty)) 
```

在获取操作中。（从[Using C# regular expressions to remove HTML tags 中](https://stackoverflow.com/questions/787932/using-c-sharp-regular-expressions-to-remove-html-tags)获取一些代码）

我应该使用的 Asp.Net 中是否有任何内置保护？有什么属性可以用来装饰我的模型吗？

我注意到这个[http://stephenwalther.com/archive/2012/06/25/announcing-the-june-2012-release-of-the-ajax-control-toolkit.aspx](http://stephenwalther.com/archive/2012/06/25/announcing-the-june-2012-release-of-the-ajax-control-toolkit.aspx)但点击[http://wpl。 codeplex.com/](http://wpl.codeplex.com/)似乎受到了非常糟糕的审查。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T12:36:46.983

就您现在的代码而言，用户可以只注入不使用脚本标记的 JavaScript。

有一个可以使用的 XSS 漏洞的[常见列表。](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet#URL_string_evasion)

现在你接受一个“字符串”，你解析出来的只是 HTML 标签。不幸的是，有很多不依赖 HTML 的 XSS 攻击。

例如，将以下内容添加到 Firefox 中的 GET 请求中：`%22onmouseover=prompt%28%29//`将允许该人注入 JavaScript。

最好的办法是使用[Microsoft 的 AntiXss 库](http://wpl.codeplex.com/)，并专门对 GET 和 POST 请求的参数进行编码。

（我必须去上班，但稍后我会发布更多代码来说明如何做到这一点）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-03-16T18:50:50.617

**注意：**请阅读整个答案，我从 AntiXss 库切换到 HtmlSanitizer。还测试测试测试！我不是安全专家。

根据官方[文档](https://docs.microsoft.com/en-us/dotnet/api/system.web.security.antixss.antixssencoder?view=netframework-4.7.2)，您可以在您的中执行以下操作`web.config`：

```
<httpRuntime encoderType="System.Web.Security.AntiXss.AntiXssEncoder" /> 
```

您不再需要安装 AntiXss 库，因为它现在包含在 .NET 4.5 中。

**更新：**

事实证明，在 web.config 中设置 encoderType 是不够的，我最终做的是拦截反序列化的 json 并像这样验证它：

```
public class AntiXssConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(string);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var stringValue = (string) reader.Value;
        ThrowIfForbiddenInput(stringValue);
        return stringValue;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var token = JToken.FromObject(value);
        token.WriteTo(writer);
    }

    private static void ThrowIfForbiddenInput(string value)
    {
        if (string.IsNullOrWhiteSpace(value))
        {
            return;
        }

        var encoded = AntiXssEncoder.HtmlEncode(value, true);
        if (value != encoded)
        {
            throw new Exception("Forbidden input. The following characters are not allowed: &, <, >, \", '");
        }
    }
} 
```

像这样使用转换器：

```
config.Formatters.JsonFormatter.SerializerSettings.Converters = new List<JsonConverter>
{
    new AntiXssConverter()
}; 
```

如果数据包含任何非法字符，我只是抛出一个异常，因为我不想在我的后端接受它。其他人可能只想简单地清理输入。

为了以防万一，另一件事是配置 WebAPI 以转义 HTML 输出，如下所示：

```
config.Formatters.JsonFormatter.SerializerSettings.StringEscapeHandling = 
    StringEscapeHandling.EscapeHtml; 
```

这涵盖了我的一切。

**第二次更新：**

我决定从使用 AntiXss 库更改为使用[HtmlSanitizer](https://github.com/mganss/HtmlSanitizer)，因为 AntiXss 对所有外来字符（ä、ö 等）进行编码过于严格，即使 unicode 块我也无法允许它们在白名单中。

这个库的另一个好处是它使用 OWASP XSS Filter Evasion Cheat Sheet 进行了单元测试。[点击这里了解更多信息](https://www.owasp.org/index.php/.NET_AntiXSS_Library)。

**第三次更新：**

如果您决定使用上面的 JsonConverter 方式，则可以通过简单地在客户端设置不同的 Content-Type（例如“application/x-www-form-urlencoded”）来绕过它，并且请求将通过服务器。

为了避免这种情况，我清除了所有其他格式化程序，只留下 JSON 一个，如下所示：

```
config.Formatters.Clear();
config.Formatters.Add(new JsonMediaTypeFormatter()); 
```

然后，为了忽略特定属性（例如密码字段）上的 XSS 转换器，我从[以下答案](https://stackoverflow.com/a/53402583/1469494)中找到了一个很好的解决方案，即创建一个虚拟的“NoConverter”类，该类默认使用特定的默认转换器特性：

```
public class NoConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        throw new NotImplementedException();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override bool CanRead => false;
    public override bool CanWrite => false;
} 
```

用法：

```
[JsonConverter(typeof(NoConverter))]
public string NewPassword { get; set; } 
```

我可能仍然错过了一些东西，我绝不是专业的网络开发人员，但这是一次有趣的旅程...... :-)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-03T03:04:19.190

有两种主要的思想流派可以防止 XSS 攻击。

*   输出编码
*   输入验证

对于输出编码， Server.HtmlEncode(p.message) 应该可以解决问题（因此您当前在示例中的内容将起作用，如果您不想这样做，则不需要进行正则表达式替换。输出编码将阻止XSS）。在这里，我假设您想要进行 HTML 编码而不是 Url 编码等。

看起来您正在使用 .NET MVC 框架。您可以使用[DataAnnotations](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations%28v=vs.100%29.aspx)来执行白名单验证（仅允许安全字符）与黑名单。我会考虑使用[RegularExpressionAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute%28v=vs.100%29.aspx)。例如：

```
public class MyModel
{
   [RegularExpression(@"^[a-zA-Z''-'\s]{1,400}$", ErrorMessage = "Characters are not allowed.")]
   public string Message { get; set; }
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-06T15:20:56.300

用于在使用 WebAPI 时停止 XSS。最好使用中间件来避免/停止 XSS。我找到了一个最好的链接/博客，请更喜欢下面的链接来添加中间件。

[https://www.loginradius.com/blog/async/anti-xss-middleware-asp-core/](https://www.loginradius.com/blog/async/anti-xss-middleware-asp-core/)

在这个链接中，所有步骤都包括在内，请完成并实施。

将中间件添加到 Startup.cs 类中只有一个问题。

```
app.UseAntiXssMiddleware(); 
```

而不是我使用下面的语法在 Startup.cs 类中添加中间件。

```
app.UseMiddleware<AntiXssMiddleware>(); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-10-03T00:41:24.190

### 为了防止 Web 的安全缺陷：

尝试减轻伤害。使用防伪令牌，确保您只接受某些操作的 ssl。确保 cookie 得到适当保护。总体而言，最小化攻击面并设置障碍使其更难。

### 为了防止用户输入：

参数化用户输入，如果不能参数化，编码，但是编码要非常小心，很多漏洞都是由于编码不当造成的。编码还取决于输入的使用位置和方式。约束和验证用户输入，确保服务器只接受某些输入域。和以前一样，了解输入的所有使用方式。

### 处理来自 Web 服务器的响应：

确保您从 Web 服务器获得了 OK 状态。如果没有，请适当处理每个响应。一般来说，jquery.ajax 为您提供了使用 done、fail、always 和 statusCode 处理所有响应的选项，请参阅 jquery 文档以了解如何正确执行此操作。

## 你需要做的三件事：

1.  在表单中使用 @Html.AntiforgeryToken() 及其相应的 [ValidateAntiForgeryTokenAttribute] 属性来装饰您的类和/或方法。

2.  正确处理来自用户的输入。在数据被触及的任何地方，如果需要对其进行编码或参数化，或者以其他方式验证、约束或修改，则需要考虑上下文。

3.  正确处理来自 Web 服务器的响应。

`[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, AllowMultiple = false, Inherited = true)] public sealed class ValidateAntiForgeryTokenAttribute : FilterAttribute, IAuthorizationFilter { public Task< HttpResponseMessage > ExecuteAuthorizationFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func< Task< HttpResponseMessage > > continuation) { try { AntiForgery.Validate(); } catch { actionContext.Response = new HttpResponseMessage { StatusCode = HttpStatusCode.Forbidden, RequestMessage = actionContext.ControllerContext.Request }; return FromResult(actionContext.Response); } return continuation(); } private Task< HttpResponseMessage > FromResult(HttpResponseMessage result) { var source = new TaskCompletionSource< HttpResponseMessage >(); source.SetResult(result); return source.Task; } }`

# android - 在 MonoDroid 上部署 Maqetta Web 工作区

> ID：12618437
> 
> 赞同：1
> 
> 时间：2012-09-27T09:41:24.110
> 
> 标签：android, xamarin.android, assets, xamarin, maqetta

我正在研究使用 Xamarin (MonoDroid) 和 Maqetta 构建跨平台应用程序的可能性。在我问我的问题之前，我必须成为一名新手 Android 开发人员。

我很好奇我应该如何在我的 android 设备上部署从 Maqetta 获得的工作空间。我下载的 Zip 文件包含一个非常简单的 Web 项目，在 .html 文件中有两个视图，类似于本教程：[http ://www.youtube.com/watch?v=J0LneuYl280&feature=plcp](http://www.youtube.com/watch?v=J0LneuYl280&feature=plcp)

问题是 .zip 文件包含超过 6500 个文件，但是好的……总共不超过 8 MB。我将整个文件夹结构拖到 Visual Studio 上的 Assets 文件夹中。构建时出现以下错误：

`Error 1 Invalid resource directory name: "assets". C:\Users\the\Desktop\Jobb\ImageCaptureApplication\ImageCaptureApplication\aapt.exe ImageCaptureApplication`

我没有从这个错误中得到任何其他东西。

这个 Assets 文件夹有什么故事？如果我深入研究从 Maqetta 获得的 Web 工作区并删除“/lib/dojo/”下的“dojox”文件夹，现在至少我能够编译和构建代码，但我的网页看起来不像任何事物。

Assets 文件夹的文件编号是否太高？Maqetta 的目录树中的级别是否太多？我知道每个文件有 1 MB 的限制，但搜索告诉我，我看起来并没有违反此规则。

手动扫描 Maqetta Web 项目的每个版本以过滤掉不必要的依赖项肯定太麻烦了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:33:20.273

Maqetta 下载大小是个问题。您可以选择/取消选择单个库，但包含 Dojo 库时，将完整包含在内。您可以像以前一样手动编辑 Dojo 目录，或者使用 Dojo 构建脚本或 Dojo Web Builder (build.dojotoolkit.org) 根据您的使用情况创建工具包的较小子集。Maqetta 与 Dojo Web Builder 的集成正在进行中。

这个“资产”文件夹是 Dojo 的一部分吗？你确定它在哪里吗？我知道 Android 应用程序生成器的唯一问题是它在文件名中存在下划线问题，但我相信该问题已得到解决。

# android - 在android中放大后计算图像的大小

> ID：12618439
> 
> 赞同：0
> 
> 时间：2012-09-27T09:41:29.510
> 
> 标签：android, zooming

在我的项目中，我必须缩放图像，然后保存缩放后的图像。我可以缩放图像，但我无法获得其大小增加了多少的值。我正在使用以下代码缩放图像。

```
float newDist = spacing(event);
Log.d("Venue Page", "newDist=" + newDist);
if (newDist > 10f) {
matrix.set(savedMatrix);
float scale =newDist / oldDist;
matrix.postScale(scale,scale,mid.x,mid.y);
}
view.setImageMatrix(matrix); 
```

缩放后如何计算图像的大小？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:43:31.313

```
newWidth = oldWidth * scale;

newHeight = oldHeight * scale; 
```

# asp.net - Jquery在单个页面上的多个星级评分控制

> ID：12618440
> 
> 赞同：0
> 
> 时间：2012-09-27T09:41:33.807
> 
> 标签：asp.net, jquery

我必须在单个页面上实现多个 div 的星级控制。每个 div 里面都有一张图片，用户可以根据自己的选择对每张图片进行评分，还需要显示每张图片之前的总评分。我在 google 上发现了许多 jquery 星级控件，但这些控件都不符合我的条件。页面上的 div 数量不固定（它是一个无限的网格布局结构，其中用户滚动和新数据通过 ajax 请求附加到大多数父 div 中）。我需要一个控件，它可以通过 jquery 独立处理“n”个项目。

请为此建议我最好的插件和逻辑。

请记住我使用 asp.net 4.0 + jquery + Ajax 并与 sql server 交互以获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:01:33.040

你能试试这个插件吗[http://www.fyneworks.com/jquery/star-rating/](http://www.fyneworks.com/jquery/star-rating/)

您可以看到他们在多个场合使用了评级，如果您的页面是动态的，我建议您通过增量变量遵循评级的命名标准，并将其指定为上述插件中单选按钮的名称

希望能帮助到你

# ruby-on-rails - 使用 rails-i18n 进行反向翻译

> ID：12618442
> 
> 赞同：6
> 
> 时间：2012-09-27T09:41:41.180
> 
> 标签：ruby-on-rails, ruby, internationalization, translation, rails-i18n

我一直很高兴使用内置的[rails i18n](https://github.com/svenfuchs/rails-i18n)支持将字符串翻译成不同的语言，效果很好。最近，尽管我需要一些超出此 gem 的默认行为的东西。

由于没有更好的词，我将其称为“[反向翻译](http://www.ruby-forum.com/topic/205452)”。基本上，我的想法是我有某种语言的字符串，我希望能够调用具有另一个语言环境的方法，*如果*语言环境字符串中存在映射，则返回翻译为该语言环境的字符串。

例如，假设我有`config/locales/en.yml`

```
en:
  hello: Hello World! 
```

并在`config/locales/ja.yml`：

```
ja:
  hello: Konnichi wa! 
```

然后当我`l2l_translate`在英语语言环境中调用此方法（“语言环境到语言环境翻译”）时，以字符串和语言环境作为参数，我得到了日语翻译：

```
I18n.locale = :en
l2l_translate("Hello World!", :ja) #=> "Konnichi wa!" 
```

此外，这更棘手，我希望能够反向匹配插值字符串。所以说我有：

**配置/语言环境/en.yml**

```
en:
  minutes: "%d minutes" 
```

**配置/语言环境/ja.yml**

```
ja:
  minutes: "%d分" 
```

然后我应该能够像这样从英语翻译成日语：

```
l2l_translate("5 minutes", :ja) #=> "5分" 
```

所以基本上该字符串应该与英文翻译字符串的正则表达式匹配，然后将“5”拉出并作为参数“%d”发送给日文翻译。

显然这里有潜在的问题，如果：1）没有匹配，或2）有多个匹配。例如，可以通过引发异常来处理这些问题，或者在前一种情况下返回 nil ，在后一种情况下返回一组翻译。无论如何，这些都是小问题。

我的基本问题是：这样的事情存在吗？如果没有，是否有人对如何开发它有任何建议（比如作为宝石）？

我特别想到的应用程序是日语服务的 API 包装器。我希望能够指定可以匹配并翻译成其他语言的日语模式。默认的 i18n 支持不会这样做，而且我不知道有任何其他 gem 会这样做。

任何意见或建议将不胜感激！有关参考，另请参阅2010 年关于 i18n-rails 的反向翻译主题的[讨论](http://www.ruby-forum.com/topic/205452)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:05:13.480

我们使用[gettext](http://en.wikipedia.org/wiki/Gettext)，这是一个标准的 unix i18n 解决方案。对于 Rails，您可以使用[gettext_i18n_rails](https://github.com/grosser/gettext_i18n_rails)。需要注意的是，gettext_i18n_rails 所支持的 FastGettext 似乎没有完整的 gettext 支持，并且复数等一些高级功能也没有按预期工作。

# wordpress - PHP：条件不起作用

> ID：12618443
> 
> 赞同：0
> 
> 时间：2012-09-27T09:41:42.590
> 
> 标签：wordpress

抱歉，我是 PHP 新手，我正在尝试以下操作，但它不起作用。

```
else{
            $output = '<form name="loginform" id="loginform" action="%s" method="post">
            <div class="title">test</div>
            <div class="simplemodal-login-fields">
            You are logged in
            </form/></div></div>';
            return $output;
            echo (wp_logout_url( get_permalink() ));
            } 
```

它只显示 $output 数据我想要做的是显示 wordpress 注销链接 `<?php echo wp_logout_url( $redirect ); ?>`

这是参考：[http ://codex.wordpress.org/Function_Reference/wp_logout_url](http://codex.wordpress.org/Function_Reference/wp_logout_url)

任何建议表示赞赏

编辑：

我只是尝试了以下但没有成功

```
else {
                $html = '
                <form name="loginform" id="loginform" action="%s" method="post">
                    <div class="title">test</div>
                        <div class="simplemodal-login-fields">
                        You are logged in
                        </div>
                    </div>
                </form/>
                ';
                $html .= '<a href="' . wp_logout_url( get_permalink() ) . '">Logout</a>';
                return $html;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:48:36.787

其实你的

```
echo (wp_logout_url( get_permalink() )); 
```

无法访问，因为`return $output;`在到达此行之前返回函数。如果你想要`echo`最后一行，那么在最后保留你的`return`语句`echo`，比如

```
echo wp_logout_url( get_permalink());
return $output; 
```

或者可能想要这样

```
$output = '<form name="loginform" id="loginform" action="%s" method="post">
           <div class="title">test</div><div class="simplemodal-login-fields">
           You are logged in
           </form/></div></div>';
$output.=wp_logout_url(get_permalink());
return $output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:13:14.923

问题是我没有在 div 元素中显示 url

以下是正确的代码

```
$html = '<form name="loginform" id="loginform" action="%s" method="post">
                <div class="title">test</div>
                    <div class="simplemodal-login-fields">
                    You are logged in
                    <a href="' . wp_logout_url( get_permalink() ) . '">Logout</a>
                    </div>
                </div>
            </form/>
            ';
            return $html; 
```

# .htaccess - .htaccess 基于 HTTP_REFERER 重定向

> ID：12618445
> 
> 赞同：1
> 
> 时间：2012-09-27T09:41:45.173
> 
> 标签：.htaccess, redirect, http-referer

我正在尝试执行上面所说的操作，但出现循环错误，有时还会出现 500 错误！

我想要的是用户请求将站点的根“主页”页面重定向到`/Welcome`- 除非他们已经在浏览该站点。

这是我的代码：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^mydomain\.co\.uk$ [N]
RewriteCond %{REQUEST_URI} /index.php [N]
RewriteRule ^$ /Welcome [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:50:43.430

您可能会收到 500 错误，因为这`[N]`不是有效`RewriteCond`标志，您是否在考虑`[NC]`（没有案例）？

此外，您有一个与规则匹配直接矛盾的条件：

```
RewriteCond %{REQUEST_URI} /index.php 
```

说**URI**必须有一个`/index.php`。虽然规则本身：

```
RewriteRule ^$ /Welcome [L] 
```

说**URI**必须匹配`^$`，这意味着它必须完全匹配`/`。并且`/`永远不会`/index.php`，因此该规则立即无效。也许您正在考虑非此即彼？

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^mydomain\.co\.uk$ [NC]
RewriteRule ^(index\.php)?$ /Welcome [L] 
```

这将匹配引用者而不区分大小写`mydomain.co.uk`，并重写或者`/`重写`/index.php`为`/Welcome`

# scrapy - Scrapy：蜘蛛初始化代码放在哪里

> ID：12618447
> 
> 赞同：0
> 
> 时间：2012-09-27T09:41:48.933
> 
> 标签：scrapy, web-crawler

对此的最佳做法是什么？

比如说，我想初始化一些计数器或读取一个文件以便稍后在解析中使用它。我该怎么做？覆盖`__init__`？还是有其他更好的方法？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:16:45.973

取决于您的需要，无论是项目级别，还是简单地蜘蛛级别覆盖**init**是最好的方法。

# shell - 在不知道其用途的情况下理解代码

> ID：12618448
> 
> 赞同：0
> 
> 时间：2012-09-27T09:41:49.847
> 
> 标签：shell, unix, ksh, teradata

*我是unix的新手。但我需要理解客户给出的这段代码:(。我试图询问客户关于代码的详细信息，比如代码应该做什么，但他自己不知道。所以基本上我被一个我做的目的代码卡住了不知道，但我必须了解它的作用>.<。这是我迄今为止能够从代码中得出的结果（以评论的形式）[1] [2] [3] 等等。我有评论编号 [8] 到 [12] 的疑问/没有线索。对于 [1] 到 [7]，我觉得大多数是正确的，但如果有任何错误，请随时指出。一点背景：我应该在teradata，这可能与它有关。我的评论是粗体的{* *}

```
#!/usr/bin/ksh  **//[1] sets shell**        
set -x     **//[2]will this show the argument values before execution?**

l=$1       **//[3]$1,$2,$3 are the arguments with which this shell**
h=$2       **//is invoked.l= first argument h= second argument and**
k=$3       **//k=3rd argument.**

/export/home/someguy/daily_refresh/abc_mt_dt.ksh $l $h $k 
           **//[4] calling abc_mt_dt.ksh
             // with arguments l h and k**   

chmod 777 /export/home/someguy/daily_refresh/$k.txt 
           **// making $k.txt a read write n**
           **//executable.This im sure im right** 

while read line
   do
      echo $line |read a b c 
          **// [5] reads three values from keyboard and displays them as     
            //well as storing them in values a b and c**

      DATA_START_DT=$a 
          **// [6] variables DATA_START_DT DATA_END_DT ID set to the three** 
      DATA_END_DT=$b   **// values read from keyboard** 
      ID=$c

      echo $DATA_START_DT **//[7] displaying the values read from keyboard**
      echo $DATA_END_DT
      echo $ID

      rm -rf /export/home/someguy/daily_refresh/logs/abc_$DATA_END_DT.log 

      **//[8] rm -rf is to recursively remove files and folders .. 
          so what will this command do? will it remove all files and folders
          inside /export/home/someguy/daily_refresh/logs/ ?**

      bteq <<EOI > /export/home/someguy/daily_refresh/logs/abc_$DATA_END_DT.log 2>&1 

      **// [9] need explaination as to what this does.**
      .run file = /export/home/someguy/logon_caracal.bteq **//[10]**
      .MAXERROR 1; **//[11]**  
       DATABASE SOME_DATABASE; **//[12]** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:22:16.373

**[8]**不，它不会删除`/export/home/someguy/daily_refresh/logs/`. 它只会删除名为`/export/home/someguy/daily_refresh/logs/abc_$DATA_END_DT.log`.

在**[9]**中，脚本执行`bteq`命令。

`<< EOI`是[这里的文件](http://tldp.org/LDP/abs/html/here-docs.html)。下面的所有语句，直到包含单词 EOI 的行，都被传递给`bteq`程序。这些是`bteq`命令，而不是 shell 命令。程序的所有输出和错误`bteq`都写入`/export/home/someguy/daily_refresh/logs/abc_$DATA_END_DT.log`.

**[10]**这是包含将要处理的 SQL 请求和 bteq 命令的文件。

**[11]** MAXERROR 为 1 表示如果在处理过程中出现 2 级或更高级别的错误，bteq 将退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:05:05.373

[10] 这包含 .LOGON 命令和用于连接到 Teradata 系统的凭据。`.LOGON TPDID/UserID, Password;`

[11]`MAXERROR`表示一旦`MAXERROR`达到分配的值，BTEQ 脚本将中止。

[12]`DATABASE SOME_DATABASE`设置会话的默认数据库或直到`DATABASE`遇到下一个命令。如果对象存在于默认数据库中，这允许开发人员避免使用 {database}.{object} 完全限定他们的 SQL。

# git - 将 SVN 存储库转换为 Git 时出现致命错误

> ID：12618455
> 
> 赞同：1
> 
> 时间：2012-09-27T09:42:14.003
> 
> 标签：git, svn, git-svn, git-clone

我正在尝试使用以下命令克隆 Subversion 存储库：

```
git svn clone svn://adress/repo --stdlayout 
```

我收到一个错误`r119`：

![错误](../Images/8bd50d5658ed62f3fce76160a11375b9.png)

我试图在 结帐`branches/Mikael`，`r119`而 TortoiseSVN 告诉我它不存在。

如果我查看日志，我可以看到：

```
119 : /branches/Mikael added (en empty folder)
120 : /branches/Mikael deleted
121 : /branches/Mikael/file.txt added 
```

我能做些什么？

**编辑：**我尝试使用其他版本的 Git，1.7.8、1.7.9、1.7.10 和 1.7.11，从零开始，使用相同的命令，它们都`r119`因相同的原因而失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-15T05:58:00.080

尝试使用`--preserve-empty-dirs`，因为很明显该目录是空的。还，`git svn`最近进步了不少；我遇到了一个在 2.2.x 中仍然存在的问题，与开发人员合作并应用了一个补丁，然后在 2.2.x 后期（IIRC）中修复了它。要记住的另一件事是，git 期望在区分大小写的文件系统上运行（好吧，如果 SVN 存储库托管在区分大小写的文件系统上，至少 - 区分大小写始终是安全的选择）。因此，如果您使用的是 Windows 或 Mac，您可能需要创建一个区分大小写的文件系统，或者只是在 linux 机器或 VM 中进行转换。如果您记录了对该分支的更改，显示它已被删除然后被修改，那么您的 SVN 存储库可能会以某种方式损坏。您可能需要跳过被删除的修订。如果您已经尝试了其他所有方法，并且想尝试跳过修订，[请参阅这篇文章](https://stackoverflow.com/a/11085087/145279)。

# html - h1 之前的空行

> ID：12618456
> 
> 赞同：0
> 
> 时间：2012-09-27T09:42:16.017
> 
> 标签：html, css

我认为这是一个非常简单的 CSS 问题，但我只是不知道如何解决它。

为什么 <h1> 之前有一个空行，以及如何删除它（如果可能，不设置边距和行高）？谢谢！

```
<style>
.box-green { background-color: #CCC; }
.box-empty { height: 50px; }
</style>

<div class="box-empty box-green"></div>
<div class="box-green">
    <h1>There is an empty line before h1, why?</h1>
</div> 
```

**编辑：**

结果：[http ://tinkerbin.com/u6eB0PFQ](http://tinkerbin.com/u6eB0PFQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:44:16.073

中断在那里是因为您使用的是块元素。一个空的 <div> 元素会导致换行。`display:inline-block;`您可以通过为 div 添加 CSS来避免这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T10:09:20.323

你可以添加`display: inline`到你的 div 来解决这个问题。

见：[http ://tinkerbin.com/HDmlrG6u](http://tinkerbin.com/HDmlrG6u)

# perl - 在 perl 中显示符号而不是“∞”

> ID：12618458
> 
> 赞同：-3
> 
> 时间：2012-09-27T09:42:16.967
> 
> 标签：perl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:52:23.937

Did you try to use [HTML::Entities](http://search.cpan.org/~gaas/HTML-Parser-3.69/lib/HTML/Entities.pm)?

# php - 如何在 Mysql 中实现搜索查询

> ID：12618459
> 
> 赞同：1
> 
> 时间：2012-09-27T09:42:17.310
> 
> 标签：php, mysql

我想基于这些表在我的应用程序中实现搜索功能。

**我在搜索页面上有 5 个字段**

1.  输入框 - 关键字或标题中的任何单词
2.  作者 - 选择框（author_id 将作为值传递给函数）
3.  类别名称 - 选择框（category_id 将作为值传递给函数）
4.  themonth - 从 1 - 12 中选择框
5.  theyear - 从 2000 年到 2012 年选择框

**我想根据这些规则创建一个搜索查询，**

1.  结果数组将按 排序`insights`。`read_time`,（文章被阅读了多少次）
2.  只想得到`article`.`article_id`

**过早的工作示例在这里**

我正在运行以下查询以获取但不完整 [https://leading-people.com/search](https://leading-people.com/search)

> 选择`article`。`article_id`从哪里来。`article`_ = '1' AND ( LIKE '%%' OR LIKE '%%' OR LIKE '%%') UNION ALL SELECT 。 从内部连接到哪里。= '1' AND ( . = . AND . LIKE '%%')`article``is_active``content``title``tags``article``article_id``keywords``article``article``is_active``article``article_id``keywords``article_id``keywords``keywordtext`

表格`article` 列

*   `article_id`（基本的）
*   `is_active`
*   `title`
*   `themonth`
*   `theyear`

桌子`article_author`

评论：此表仅供参考作者详细信息在另一个表中。所以这些 id(s) 仅供参考。

列

*   `article_author_id`（基本的）
*   `author_id`
*   `article_id`

桌子`article_categories`

评论：此表仅供参考，类别详细信息在另一个表中。所以这些 id(s) 仅供参考。

列

*   `article_categories_id`（基本的）
*   `article_id`
*   `categories_id`

桌子`insights`

评论：此表仅供参考，类别详细信息在另一个表中。所以这些 id(s) 仅供参考。

列

*   `insights_id`（基本的）
*   `article_id`
*   `read_time`

桌子`keyword`

评论：此表仅供参考，类别详细信息在另一个表中。所以这些 id(s) 仅供参考。

列

*   `keyword_id`（基本的）
*   `article_id`
*   `keywordtext`

希望！我已经正确格式化了，所以每个人都可以理解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:04:44.430

这可能会帮助您完成任务：

```
$keyword_mysql= mysql_real_escape_string($keyword);

SELECT article.article_id
FROM article 
LEFT JOIN insights ON(article.article_id=insights.article_id)
WHERE article.is_active = '1' AND (content LIKE '%{$keyword_mysql}%' OR title LIKE '%{$keyword_mysql}%' OR tags LIKE '%{$keyword_mysql}%') 
UNION DISTINCT 
SELECT article.article_id 
FROM keywords INNER JOIN article WHERE article.is_active = '1' AND (article.article_id = keywords.article_id AND keywords.keywordtext LIKE '%{$keyword_mysql}%')
LEFT JOIN insights ON(article.article_id=insights.article_id)
ORDER BY insights.read_time 
```

您还可以使用反斜杠转义 $keyword_mysql 中的下划线和百分比。

如果 read_time 列不是所选字段的一部分，我不确定排序是否有效。如果没有，请将其添加到选定的字段并改为 ORDER BY read_time。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:46:07.927

在挣扎了 6,7 小时后，我很惊讶它是如此简单:-(

这是我想出的解决方案

> 选择`article`。`article_id`FROM `article`WHERE $cond ( `content`LIKE '%$term%' OR `title`LIKE '%$term%' OR `tags`LIKE '%$term%') AND `article`。`article_id`IN (SELECT `article_categories`. `article_id`FROM `article_categories`WHERE `categories_id`LIKE '$cat') AND `article`. `article_id`IN (SELECT `article_author`. `article_id`FROM `article_author`WHERE `author_id`LIKE '$author')
> 
> 联合所有选择`article`。`article_id`FROM `keywords`INNER JOIN `article`WHERE $cond ( `article`. `article_id`= `keywords`. `article_id`AND `keywords`. `keyword`LIKE '%$term%') AND `article`. `article_id`IN (SELECT `article_categories`. `article_id` FROM `article_categories`WHERE `categories_id`LIKE '$cat') AND `article`. `article_id`IN (SELECT `article_author`. `article_id`FROM `article_author`WHERE `author_id`LIKE '$author')

# c# - 需要获得格式化输出 C#

> ID：12618460
> 
> 赞同：1
> 
> 时间：2012-09-27T09:42:19.267
> 
> 标签：c#, command-line, console

我需要创建一个控制台应用程序来打印一些帮助消息。我已经这样做了，但它没有在控制台中以默认表格格式显示结果，例如，

```
c:\Users\>dir /?
Displays a list of files and subdirectories in a directory.

DIR [drive:][path][filename] [/A[[:]attributes]] [/B] [/C] [/D] [/L] [/N]
  [/O[[:]sortorder]] [/P] [/Q] [/R] [/S] [/T[[:]timefield]] [/W] [/X] [/4]

  [drive:][path][filename]
              Specifies drive, directory, and/or files to list.

  /A          Displays files with specified attributes.
  attributes   D  Directories                R  Read-only files
               H  Hidden files               A  Files ready for archiving
               S  System files               I  Not content indexed files
               L  Reparse Points             -  Prefix meaning not
  /B          Uses bare format (no heading information or summary).
  /C          Display the thousand separator in file sizes.  This is the
              default.  Use /-C to disable display of separator.
  /D          Same as wide but files are list sorted by column.
  /L          Uses lowercase.
  /N          New long list format where filenames are on the far right.
  /O          List by files in sorted order.
  sortorder    N  By name (alphabetic)       S  By size (smallest first)
               E  By extension (alphabetic)  D  By date/time (oldest first)
               G  Group directories first    -  Prefix to reverse order
  /P          Pauses after each screenful of information. 
```

我需要使用转义序列还是有任何内置功能可以像这样显示。我用谷歌搜索了它。但是找不到解决方案，任何人都可以帮助:)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:55:10.983

您应该必须使用[@-quoted](http://msdn.microsoft.com/en-us/library/system.string.aspx)字符串文字。

```
string help = @"
Usage of @-quoted literal:
  1\. Escape sequences are not processed
  2\. To include double quotes then ""double it""
";
Console.WriteLine(help); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:45:58.237

您可能想为此使用[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd%28v=vs.71%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:48:01.283

在这种非常特殊的情况下，只需将内容放在文本文件中，然后将文本文件的内容写入控制台流。

我会将文本文件作为资源来简化部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:45:52.727

只需简单地使用空格来格式化输出。

```
Console.WriteLine("DIR [drive:][path][filename] [/A[[:]attributes]]");
Console.WriteLine("  [/O[[:]sortorder]] [/P] [/Q] [/R] [/S] [/T[[:]timefield]]"); 
```

# ruby-on-rails - 如何从目录中获取文件名和扩展名

> ID：12618473
> 
> 赞同：1
> 
> 时间：2012-09-27T09:42:56.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个文件夹，我正在尝试获取所有文件名和文件扩展名。我怎么能这样做？我找不到任何有用的例子来做到这一点，如果有人可以帮助我，我已经厌倦了寻找它，我将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:48:49.173

```
Dir.glob("*")
# => ["test.rb", "a.txt", ..... ]
# or find all files recursively
Dir.glob("./**/*") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:49:24.280

你可以使用php函数`scandir('path')`

# dojo - 如何巧妙地缓存 css 和 javascript 文件？

> ID：12618479
> 
> 赞同：1
> 
> 时间：2012-09-27T09:43:14.747
> 
> 标签：dojo, browser-cache

缓存好文件是一个老问题，但要确保在您更新某些文件的一些修改时提供最后一个版本。例如，众所周知，您可以将诸如时间戳之类的 get 变量附加到文件 uri 但您失去了所有缓存优势，文件将永远不会被缓存，呵呵！目前，我发现一些网络建议的最佳方法是：

*   在 htaccess 中添加过期信息，例如：ExpiresByType text/javascript "access plus 7 days"
*   请求文件名+'-'+lastModifTimestamp(src)+fileExtension，例如：'dir/usualfilename-345678.js'。lastModifTimestamp 由服务器脚本设置，如 PHP filemtime($src)
*   然后在 htaccess 中，添加一个重写器，将 'dir/usualfilename-2345678.js' 重写为 'dir/usualfilename.js' ：`RewriteRule (.+)-[0-9]+(\.(js|css))$ $1$2 [L]`

优点是您永远不必更改您使用的文件名，即使您的访问者浏览器的行为有多聪明或怪异，缓存也是有效的，并且您确信它会在修改后获取更新的文件。

然后在我的dojoConfig（dojo 1.7+）中，我有一个包，我喜欢所有模块路径都以最后一个modif时间戳为后缀（我的dojo配置是用PHP编写的）。我发现的唯一方法是使用 aliases 属性：我必须为所有包的文件设置别名，问题是它很重，那么如果我的包中有 100 个模块，即使我需要，我也需要 100 个声明的别名只有 3 个文件……它不是很“动态”。cachebust 属性很接近，但它适用于所有文件，并且如上面所解释的那样存在问题。

我的问题是：

1.  您知道管理缓存和更新文件的更好方法吗？
2.  在 dojoConfig 中，是否有一些聪明的方法可以将此操作应用于某些包文件？

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:47:32.310

我已经以两种不同的方式完成了您正在做的事情。我不认为有一个正确的答案。最好的答案是适合您的环境。

1) 我目前的工作正在开发一个版本控制良好的产品。所以我在请求 css 和 javascript 工件时将版本附加到 url。部署新版本时，最终用户将获得新文件。

2）我还维护一些没有严格版本控制方案的小型网站。对于这些，我使用 Web 服务器启动时间的时间戳。当我部署新代码时，它需要重新启动 Web 服务器（这些不是高可用性站点）。当我将更新部署到服务器并重新启动时，最终用户将获得新文件。

* * *

编辑：

Dojo 配置有一个可以使用的“cacheBust”属性。

```
data-dojo-config="parseOnLoad: true, cacheBust: ???, packages: []" 
```

在哪里 ？？？是我之前提到的版本，服务器时间戳。

# linq - LINQ 选择一个日期范围以加入其他查询

> ID：12618481
> 
> 赞同：1
> 
> 时间：2012-09-27T09:43:25.820
> 
> 标签：linq, entity-framework, linq-to-entities

我希望创建一个 LINQ 查询，该查询将产生一个包含一系列日期的结果集。我想给它 2012-09-01 和 2012-09-05 它应该返回一个结果集，其中包含：

*   2012-09-01
*   2012-09-02
*   2012-09-03
*   2012-09-04
*   2012-09-05

我想要这个，因为我希望在后续查询的连接中使用它，这可能不包含所有日期。但是，我希望最终结果包含间隔中的所有日期，而不管其他任何查询是否返回任何结果。

我使用 LINQ to Entities。

作为一个真实的例子，它可能看起来像这样：

```
from p in projects
where p.StartDate > dateFrom && p.StartDate < dateTo
// somehow 'select' every date between dateFrom and dateTo,
// so you get one row in the resultset for each date in between. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:46:20.407

最简单的方法是创建一个`Dates`表：

```
create table Dates (
 Date DATE NOT NULL PRIMARY KEY
) 
```

并适当填写。T-SQL 没有数组或生成器函数。

该表上的聚簇索引可以快速选择所有可能日期的一小部分子范围。

您还可以添加更多列，如`DayOfWeek TINYINT NOT NULL`, `IsHoliday BIT NOT NULL`, ... 非常方便。

我还要提一下在您的应用程序代码中填写缺失日期的可能性。我认为这取决于您的确切情况，这是否更好。特别是如果您希望连接的结果用于进一步的服务器端处理，您可能需要一个日期表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:45:12.710

首先，听起来您只需要一个类似以下内容的`where`子句：

```
where foo.Date >= startDate && foo.Date < endDate 
```

您将在其中进行`endDate`独家绑定（例如 9 月 6 日午夜），以捕获“9 月 5 日期间”的任何日期/时间值*。*

然后，您可以按日期对结果进行分组......我会在 .NET（在 LINQ to Objects 中）进行后处理以处理没有结果的日期。这可能比尝试在实体框架代码中执行此操作要简单得多。

# android - 在不改变我的位置的情况下获取当前位置的经度和纬度

> ID：12618484
> 
> 赞同：3
> 
> 时间：2012-09-27T09:43:35.663
> 
> 标签：android, gps, location, latitude-longitude

我可以找到当前位置的纬度和经度。但是这些数据在更改我的当前位置之前没有显示。我想在不更改我的位置的情况下获取当前位置的经度和纬度。

```
package com.example.gps;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.Button;
import android.widget.Toast;

import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
public class MainActivity extends Activity {
MapView m;
Button b,b1,b2;
MapController mc;double l1;double l2;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    LocationManager mlocManager = 

        (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
    boolean net = mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    Location l = null;
    if(net)
        l= mlocManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if(l!=null)
    {
        l1 = l.getLongitude();
        l2 = l.getLatitude();
    }
    Toast.makeText(getApplicationContext(),l1+".."+l2, Toast.LENGTH_LONG).show();
        LocationListener mlocListener = new MyLocationListener(); 
        mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 

}

public class MyLocationListener implements LocationListener 

{ 

@Override 

public void onLocationChanged(Location loc) 

{ 

loc.getLatitude(); 

loc.getLongitude(); 

String Text = "My current location is: "+ 

"Latitud = " + loc.getLatitude() + 

"Longitud = " + loc.getLongitude(); 

Toast.makeText( getApplicationContext(), 

Text, 

Toast.LENGTH_SHORT).show(); 

} 

@Override 

public void onProviderDisabled(String provider) 

{ 

Toast.makeText( getApplicationContext(), 

"Gps Disabled", 

Toast.LENGTH_SHORT ).show(); 

} 

@Override 

public void onProviderEnabled(String provider) 

{ 

Toast.makeText( getApplicationContext(), 

"Gps Enabled", 

Toast.LENGTH_SHORT).show(); 

} 

@Override 

public void onStatusChanged(String provider, int status, Bundle extras) 

{ 

} 

}
} 
```

由于此代码从 onLocationChanged(Location loc) 方法返回数据，因此在我的设备上安装后我不会在不更改我的位置的情况下获取数据。但是我需要纬度，经度而不更改我的位置。是否可能。请给出解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:59:26.120

试试这个代码：

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the locatioin provider -> use
    // default
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
      System.out.println("Provider " + provider + " has been selected.");
      onLocationChanged(location);
    } else {
      latituteField.setText("Location not available");
      longitudeField.setText("Location not available");
      System.out.println("Location not avilable");
    }
  }

  /* Request updates at startup */
  @Override
  protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
  }

  /* Remove the locationlistener updates when Activity is paused */
  @Override
  protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
  }

  @Override
  public void onLocationChanged(Location location) {
    double lat = (double) (location.getLatitude());
    double lng = (double) (location.getLongitude());
    latituteField.setText(String.valueOf(lat));
    longitudeField.setText(String.valueOf(lng));
    Log.i(TAG, "Lattitude:" +lat);
    Log.i(TAG, "Longitude:" +lng);
  } 
```

# c# - 将数据库附加到 SQL Server 2012 失败

> ID：12618486
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:43:40.430
> 
> 标签：c#, sql-server

我已经在我的桌面上安装了 MS Sql Server 2012 并尝试编写 ac# 程序来

将 DB 文件附加到 SQL Server 2012，而我正在执行抛出的程序错误消息

如下所述，你能帮我解决吗

下面是 MS SQL Server 2012 抛出的错误消息，

数据库文件（mdf 和 ldf）

使用下面的代码：

方法 ：

```
AttachDb("sqlDb","[C:\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\sqlDb.mdf] [C:Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\sqlDb_log.ldf]"); 
```

错误信息 ：

```
 80131501 Error: An exception occurred while executing a Transact-SQL statement or batch.
    From: Microsoft.SqlServer.ConnectionInfo
     at Microsoft.SqlServer.Management.Common.ServerConnection.ExecuteNonQuery(String sqlCommand, ExecutionTypes executionType)
        at Microsoft.SqlServer.Management.Common.ServerConnection.ExecuteNonQuery(StringCollection sqlCommands, ExecutionTypes executionType)
        at Microsoft.SqlServer.Management.Smo.ExecutionManager.ExecuteNonQuery(StringCollection queries)
        at Microsoft.SqlServer.Management.Smo.Server.AttachDatabaseWorker(String name, StringCollection files, String owner, AttachOptions attachOptions)
        at Microsoft.SqlServer.Management.Smo.Server.AttachDatabase(String name, StringCollection files)
    80131500 Error: Attach database failed for Server 'sqlDbServer'. 
     From: Microsoft.SqlServer.Smo
        at Microsoft.SqlServer.Management.Smo.Server.AttachDatabase(String name, StringCollection files)
        at TestSMO.AttachDb(String dbname, String filelist) 
```

代码：

```
 static string instance = "";
     static string username = "";
     static string password = "";
     static string connection_timeout = "600";
     static string statement_timeout  = "3600";

    //create server connection object 
    static Server Connect()
    {
    ServerConnection conn = new ServerConnection();
    instance="sqlDbServer";
    if (instance.Length > 0)
        conn.ServerInstance = instance;

    if (username.Length > 0) {
        conn.LoginSecure = false;
        conn.Login = username;
        conn.Password = password;
    }

    conn.ConnectTimeout = Convert.ToInt32(connection_timeout);
        conn.StatementTimeout = Convert.ToInt32(statement_timeout);
        return new Server(conn);
    }

    //performing attache DB 
     static void AttachDb(string dbname, string filelist)
        {
            string[] files = filelist.Split(new char[] {'['}, StringSplitOptions.RemoveEmptyEntries);
            StringCollection dbfiles = new StringCollection();
            foreach (string s in files) {
                string s1 = s.TrimEnd(null);
                s1 = s1.TrimEnd(']');
                if (s1.Length > 0) dbfiles.Add(s1);
            }
            Server svr = Connect();
            string name = DecodeString(dbname);
            svr.AttachDatabase(name, dbfiles);
        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T13:20:45.103

通过向SQL Server 数据库实例的**NT AUTHORITY\SYSTEM**登录提供所有服务器角色来解决问题。

# ruby-on-rails - Rails - 缺少模板（头部优先的导轨）

> ID：12618488
> 
> 赞同：0
> 
> 时间：2012-09-27T09:44:02.940
> 
> 标签：ruby-on-rails, ajax

我正在关注 Head First Rails 这本书，但由于它使用的是 Rails 2，而不是 3，因此遇到了很多麻烦。目前，我正在经历它让您创建一个用于在 a 上预订座位的系统的部分航班。航班的显示页面有部分已预订座位和一个表格，以便您可以预订座位。

我一辈子都无法让系统正常工作，因此当您单击“预订座位”时，更改会立即出现在上面的座位列表中。Rails 一直抱怨说，当我单击“预订座位”时，缺少座位/更新模板。我什至直接在第一站使用“答案代码”，但它仍然无法正常工作！请有人帮忙！！

问题1：

这是座位的控制器代码：

```
def create
  @seat = Seat.new(params[:seat])
  render :update do |page|
    if @seat.save
      page.replace_html 'notice', 'Seat was successfully booked'
    else
      page.replace_html 'notice', 'Sorry - the seat could not be booked'
    end
    page.replace_html 'seats', :partial => 'flights/seat_list',
      :locals => {:seats =>  @seat.flight.seats }
  end
end

# PUT /seats/1
# PUT /seats/1.xml
def update
  @seat = Seat.find(params[:id])

  respond_to do |format|
    flash[:notice] = 'Seat was successfully updated.'
      format.html { redirect_to(@seat) }
      format.xml  { head :ok }
    else
      format.html { render :action => "edit" }
      format.xml  { render :xml => @seat.errors, :status => :unprocessable_entity }
    end
  end
end 
```

问题2：

在尝试“ajaxify”表单时，这本书告诉我使用 remote_form_for，据我所知，它没有出现在 rails 3 中。所以我尝试使用：

```
<h1>New seat</h1>
<% form_for(seat), :remote => true do |f| %>
  <%= f.error_messages %>
  <%= f.hidden_field :flight_id %>
  <p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </p>
  <p>
    <%= f.label :baggage %><br />
    <%= f.text_field :baggage %>
  </p>
  <p>
    <%= f.submit "Create" %>
  </p>
<% end %> 
```

但这给了我一个错误

> 显示 c:/Ruby193/coconut/app/views/flights/_new_seat.html.erb 其中第 2 行提出：
> 
> c:/Ruby193/coconut/app/views/flights/_new_seat.html.erb:2：语法错误，意外'，'，期待keyword_end'）；form_for(seat), :remote => true do |f| ^ c:/Ruby193/coconut/app/views/flights/_new_seat.html.erb:18：语法错误，意外keyword_ensure，期待$end

我在这里撞墙，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:48:12.043

去掉 _new_seat.html.erb 中的逗号并添加等号

`<%= form_for(seat), :remote => true do |f| %>`

# java - JPA & Criteria API - 仅选择特定列

> ID：12618489
> 
> 赞同：82
> 
> 时间：2012-09-27T09:44:09.823
> 
> 标签：java, hibernate, jpa, criteria-api

我只想选择特定的列（例如`SELECT a FROM b`）。我有一个通用的 DAO，我想出的是：

```
public List<T> getAll(boolean idAndVersionOnly) {
    CriteriaBuilder builder = manager.getCriteriaBuilder();
    CriteriaQuery<T> criteria = builder.createQuery(entityClazz);
    Root<T> root = criteria.from(entityClazz);
    if (idAndVersionOnly) {
        criteria.select(root.get("ID").get("VERSION")); // HERE IS ERROR
    } else {
        criteria.select(root);
    }
    return manager.createQuery(criteria).getResultList();
} 
```

错误是： `The method select(Selection<? extends T>) in the type CriteriaQuery<T> is not applicable for the arguments (Path<Object>)`。我应该如何改变它？我想得到一个`T`只有`ID`和`VERSION`字段的类型对象，而所有其他都是`null`.

类型`T`extends`AbstractEntity`具有这两个字段。

`entityClazz`是`T.class`。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-03T05:35:17.833

仅获取特定列的 JPA 方法之一是请求[Tuple](http://docs.oracle.com/javaee/6/api/javax/persistence/Tuple.html)对象。

在您的情况下，您需要编写如下内容：

```
CriteriaQuery<Tuple> cq = builder.createTupleQuery();
// write the Root, Path elements as usual
Root<EntityClazz> root = cq.from(EntityClazz.class);
cq.multiselect(root.get(EntityClazz_.ID), root.get(EntityClazz_.VERSION));  //using metamodel
List<Tuple> tupleResult = em.createQuery(cq).getResultList();
for (Tuple t : tupleResult) {
    Long id = (Long) t.get(0);
    Long version = (Long) t.get(1);
} 
```

如果您有一个代表结果的类，例如`T`您的情况，则可以使用另一种方法。`T`不需要是实体类。如果`T`有一个构造函数，如：

```
public T(Long id, Long version) 
```

然后你可以`T`直接在你的`CriteriaQuery`构造函数中使用：

```
CriteriaQuery<T> cq = builder.createQuery(T.class);
// write the Root, Path elements as usual
Root<EntityClazz> root = cq.from(EntityClazz.class);
cq.multiselect(root.get(EntityClazz_.ID), root.get(EntityClazz_.VERSION));  //using metamodel
List<T> result = em.createQuery(cq).getResultList(); 
```

请参阅此[链接](http://www.ibm.com/developerworks/java/library/j-typesafejpa/)以获取更多参考。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-26T23:14:51.433

```
cq.select(cb.construct(entityClazz.class, root.get("ID"), root.get("VERSION")));  // HERE IS NO ERROR 
```

[https://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Constructors](https://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Constructors)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T10:59:13.607

首先，我真的不明白为什么你会想要一个只有 ID 和版本的对象，而所有其他道具都是空值。但是，这里有一些代码可以为您做到这一点（它不使用 JPA Em，而是普通的 Hibernate。我假设您可以在 JPA 中找到等价物，或者简单地从 em 委托 [获取 Hibernate Session obj 从 EJB 访问 Hibernate Session使用 EntityManager](https://stackoverflow.com/questions/4335570/accessing-hibernate-session-from-ejb-using-entitymanager) ）：

```
List<T> results = session.createCriteria(entityClazz)
    .setProjection( Projections.projectionList()
        .add( Property.forName("ID") )
        .add( Property.forName("VERSION") )
    )
    .setResultTransformer(Transformers.aliasToBean(entityClazz); 
    .list(); 
```

这将返回一个对象列表，其 ID 和版本设置以及所有其他属性为 null，因为 aliasToBean 转换器将无法找到它们。同样，我不确定我是否能想到我想要这样做的情况。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-12-28T18:00:52.097

你可以做这样的事情

```
Session session = app.factory.openSession();
CriteriaBuilder builder = session.getCriteriaBuilder();
CriteriaQuery query = builder.createQuery();
Root<Users> root = query.from(Users.class);
query.select(root.get("firstname"));
String name = session.createQuery(query).getSingleResult(); 
```

您可以在其中将“名字”更改为所需列的名称。

# microsoft-metro - 用访问令牌交换 oauth2 授权码

> ID：12618493
> 
> 赞同：0
> 
> 时间：2012-09-27T09:44:19.573
> 
> 标签：microsoft-metro, oauth-2.0, google-drive-api

在我的地铁应用程序中，我使用谷歌驱动器应用程序从驱动器中获取文件。获取代码后，在与访问令牌交换代码时收到错误 400（无效请求）。这是我的 POST 请求：

[https://accounts.google.com/o/oauth2/token?client_id=59349429483.apps.googleusercontent.com&client_secret=](https://accounts.google.com/o/oauth2/token?client_id=59349429483.apps.googleusercontent.com&client_secret=) {DELETED_INTENTIONALLY}&code=4%2FY-rI6ye27Msho3mxmkT7cyDxWzDs&grant_type=authorization_code&redirect_uri=urn%3Aietf%3Awg%3Aoauth %3Aoob

我得到的响应是：状态：400 响应：{“error”：“invalid_request”}

任何人都可以让我知道我的请求的问题吗？我完全按照谷歌的文档设置请求参数。

# perl - 我可以用 Perl 随机化参数吗

> ID：12618498
> 
> 赞同：-4
> 
> 时间：2012-09-27T09:44:31.060
> 
> 标签：perl, parameters

Perl 有没有办法随机化所有参数，例如：

[http://s.example.com/x?list=hahaha&a=&b=&c=&1](http://s.example.com/x?list=hahaha&a=&b=&c=&1)

所以所有带有&a=&b=&c=&1 etc.etc.etc的参数。

这是我期望的输出？

```
for (1..10){

#random this http://s.example.com/x?list=hahaha&a=&b=&c=&1
#to be like this

print "\n";
#http://s.example.com/x?list=hahaha&b=&a=&c=&1
#http://s.example.com/x?list=hahaha&c=&a=&b=&1
##http://s.example.com/x?list=hahaha&1=&b=&1=&c

} 
```

那么有人可以帮忙吗？

Thnx 已经准备好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:26:26.680

您提供的信息不多，但这里有一个（非常简单的）方法可以帮助您入门。

## 代码

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';
use URI;
use URI::QueryParam;

# prepare
my @all  = map {chr $_} 32 .. 126;
my @word = grep /\w/ => @all;

# randomization helpers
sub rand_number      { 1 + rand 10 }
sub rand_param_name  { join '' => map {$word[rand @word]} 1 .. rand_number }
sub rand_param_value { join '' => map {$all[rand @all]}   1 .. rand_number }

# create three uris with randomized parameters
for (1 .. 3) {

    # prepare
    my $uri = URI->new('http://s.example.com/x');

    # add randomized parameters
    $uri->query_param(rand_param_name() => rand_param_value)
        for 1 .. rand_number;

    # done
    say $uri;
} 
```

## 输出

```
http://s.example.com/x?TC10=MX3+B_i!
http://s.example.com/x?BaXgf=%26%7BY%5Dxt%25o&l0f=HM%5Cd%24JB%3E)&lDQ7a94=Xh%3AB3N1jK_&dzGNz3=Y8NX4o9%5BS&YnCMxDdTew=J%5B%7B~b%23&Mr8UpMhPo=H&8_nAwh8ZHe=9%5DRY%40V&EgheAy='Uk&gmqTwKW=7PyitIn&3=V%5EKApdS%2C
http://s.example.com/x?dBA7WswJ5=GX-x&yKHeb=1y1sq%3EjPt&7G=7oa%24XF%7C)jQ&FjVo5IpF=%3BZ%5C&JB7OLer=%7C55&bYo64Fiy=L%23%40&ZhSohJVZ=-W+Rp5c+%5DD&aP=zJP%7Bu&pE5URXCWq=PHZJ%60%3D97L&6Xw7Da7=.Drb 
```

# android - 全球广播接收器 (Android)

> ID：12618513
> 
> 赞同：2
> 
> 时间：2012-09-27T09:45:15.970
> 
> 标签：android, broadcastreceiver

我有一个包含多个活动的应用程序，我希望在手机上线时收到通知（无论用户在哪个活动中）。我找到了一个广播接收器来做这件事，但我想知道是否有办法只声明这个广播接收器一次，我想避免将代码放在每个活动中（我有超过 20 个活动！ ）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:50:08.040

创建一个**父** *抽象类*，`extends Activity`并在那里定义广播接收器实现。稍后，修改您的活动类以扩展该**父**类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:03:48.100

如文档中所示，如果我们在清单文件中声明广播接收器，那么它会自动运行在后面。问题是现在您需要处理接收者的 onReceive() 方法。另一种方法是创建一个单独的 java 类并在任何你想要的地方导入。

# html - 文本缩进：-9999em 不适用于 IE9 中的 span 元素

> ID：12618516
> 
> 赞同：1
> 
> 时间：2012-09-27T09:45:33.543
> 
> 标签：html, css, internet-explorer, sprite

我在使用以下链接时遇到问题：

![在此处输入图像描述](../Images/0b636e1108ff5f916394e2045f41b520.png)

播放图像是一个`<span>`带有背景图像的元素，与 css 精灵一起使用。

当我将鼠标悬停在上图中的同位素水文学图像上时，一切正常（链接和 css 精灵）。**问题出在 IE9 中，当光标悬停在 css sprite（播放按钮）上时，sprite 会返回非悬停外观，您无法从内部单击链接（见下图）**。

如果有人知道为什么会发生这种情况，那就太棒了。这是我为它制作的[jsfiddle](http://jsfiddle.net/XvMpK/)，但它不会重现问题。

![在此处输入图像描述](../Images/0d59c080d8547bb73e4abdc89e8bba94.png)

我有以下html和css：

html:

```
 <div id="video-box-left">
                            <div class="video-img">
                                <a href="#" onclick="window.open('http://wwwindex.html','photoessay','scrollbars=no,resizable=yes,width=850,height=722')">
                                <span class="video-play-q-left">play</span>
                                <img src="resources-na/images/forum.PNG" width="200" height="155" border="1"></a>
                            </div>
                            <div class="video-text">
                                <p><strong>Food for the Future</strong><a href="#" onclick="window.open('http://www-','photoessay','scrollbars=no,resizable=yes,width=850,height=722')"></a></p>
                            </div>
                        </div> 
```

CSS：

```
#video-box-left{
    margin-left: 10px;
    margin-right: 20px;
    float: left;
    width: 210px;
}

.video-img {
    background-color: #EEEEEE;
    border: 1px solid #DDDDDD;
    margin-bottom: 5px;
    padding: 4px;
    width: 200px;
    height: 155px;
}

.video-text {

}

.video-play-q-left {
    background: url("../images/video-play-q-big.png") no-repeat scroll 0 0 transparent;
    background-position: center top;
    height: 50px;
    position: absolute;
    text-indent: -9999em;
    width: 50px;
    left: 100px; 
    top: 127px;
}

a:hover .video-play-q-left{
    background-position: center bottom;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:00:29.047

我猜这是由于文档的 DOCTYPE 问题导致 IE9 以怪癖模式呈现文档。这可以解释为什么 JSFiddle 不会重现该问题。尝试在 IE9 中打开开发者控制台，并确保文档模式和浏览器模式都设置为 IE9。如果这样可以解决您的问题，请确保您的 DOCTYPE 标签设置为 HTML 5，例如

```
<!DOCTYPE html> 
```

# c# - MVC 视图到控制器传递

> ID：12618518
> 
> 赞同：1
> 
> 时间：2012-09-27T09:45:48.263
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我开始使用 mvc 并设计一个简单的登录过程。我有两个输入用户名和密码的登录屏幕视图。但显然无法获得如何将输入值从我的视图传递到我正在使用剃须刀的控制器。这是我的片段。

```
<table>
    <tr>
        <td>
            UserName:
        </td>
        <td>
            @Html.TextBox("userName")
        </td>
    </tr>
        <tr>
        <td>
            Password
        </td>
        <td>
            @Html.Password("Password")
        </td>
    </tr>
    <tr>
        <td colspan="2">
            @Html.ActionLink("login", "SignIn")
        </td>
    </tr>
</table> 
```

我的控制器看起来像这样。（我可以使用操作链接重定向到控制器就好了。只是传递值。）

```
public ActionResult SignIn()
{
    //string userName = Request["userName"];
    return View("Home");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:55:20.993

您可以将上面的 html 内容包含在表单容器中，您将表单提交方法声明为`POST`.

```
@using (Html.BeginForm("SignIn", "Controller", FormMethod.Post, new { id = "form1" }))
{
    <table>
    <tr>
        <td>
            UserName:
        </td>
        <td>
            @Html.TextBox("userName")
        </td>
    </tr>
        <tr>
        <td>
            Password
        </td>
        <td>
            @Html.Password("Password")
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <input type="submit" value="login" name="login" />
        </td>
    </tr>
</table>
} 
```

然后，您可以将`Post`Action 放入您的控制器中：

```
[HttpPost]
public ActionResult SignIn(FormCollection frmc)
{
    /// Extracting the value from FormCollection
    string name = frmc["userName"];
    string pwd = frmc["Password"];
    return View("Home");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:55:04.463

用表格包裹你的桌子：

```
 @using (Html.BeginForm("SignIn", "controllerName", FormMethod.POST))
{
<table>
...
</table>
<input type="submit" value="Sign in" />
} 
```

并在控制器中写入：

```
[HttpPost]
public ActionResult SignIn(string userName, string Password)
{
 //sign in and redirect to home page
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T20:00:06.187

看法：

```
@using (Html.BeginForm("SignIn", "Controller", FormMethod.Post, new { id = "form1" }))
{
<table>
<tr>
    <td>
        UserName:
    </td>
    <td>
        @Html.TextBox("userName")
    </td>
</tr>
    <tr>
    <td>
        Password
    </td>
    <td>
        @Html.Password("Password")
    </td>
</tr>
<tr>
    <td colspan="2">
        <input type="submit" value="login" name="login" />
    </td>
</tr>
</table>
} 
```

模型：

```
public string userName{get;set;}
public string Password{get;set;} 
```

控制器：

```
[HttpPost]
 public ActionResult SignIn(Model obj)
 {
  //sign in and redirect to home page
   string userName = obj.username;
   string password = obj.password;
 } 
```

它可能对您有帮助。

# c# - 在 C# 中使用类似于 C/C++ 中的定义

> ID：12618519
> 
> 赞同：2
> 
> 时间：2012-09-27T09:45:50.043
> 
> 标签：c#, c-preprocessor

我正在做一个项目，我需要在设备类型之间进行切换。我想像在 C/C++ 中一样定义它们。我发现这在 C# 中是不可能的。我正在制作一些实验代码来了解它是如何工作的，但我被困在一件事上。我已经在下面的代码中指出了这一点。请看一下 ：）。我希望我的代码的想法很清楚，我应该如何更改它以使其工作？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        productnames pn = new productnames(); 
        string str = textBox1.Text;
        switch (pn) // I am getting an red line under pn; which says: A switch expression or case label must be a bool, char, string, integral, enum or corresponding nullable type
        { 
            case DEVICE1:
                label1.Text = str+"CASE1";
                break;
            case DEVICE2:
                label1.Text = str+"CASE2";
                break;
        }
    }
}
public class productnames
{
    public const string DEVICE1 = "name1";
    public const string DEVICE2 = "name2";
    public const string DEVICE3 = "name3";
    public const string DEVICE4 = "name4";
} 
```

上面的代码不起作用，因为你不能在整个类之间切换。更好的方法是这样的：

```
private const string DEVICE1 = "dev1";
private const string DEVICE2 = "dev2";

        private void button1_Click(object sender, EventArgs e)
        {
            string str = textBox1.Text;
            getCommand(str)
        }

private void getCommand(string Dev)
{
            switch (Dev) 
            { 
                case DEVICE1:
                    label1.Text = str+"CASE1";
                    break;
                case DEVICE2:
                    label1.Text = str+"CASE2";
                    break;
            }
    } 
```

这个例子可能很有用：

```
#define CMD_VERSION 0
#define CMD_TYPE 1

private void getCommandName(CMD)
{
   switch(CMD)
   {
      case CMD_VERSION:
      return ("ver");
      case CMD_TYPE:
      return ("serienummer");
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:02:14.103

让我们发挥创意，添加一个可以在现实生活中更快使用的示例。

```
using System;

namespace Draft
{
    class Program
    {
        static void Main()
        {
            const string str = "Device2";
            var strParsed = (Devices)Enum.Parse(typeof(Devices), str);

            switch (strParsed) {
                case Devices.Device1:
                    Console.WriteLine("Device 1");
                    break;
                case Devices.Device2:
                    Console.WriteLine("Device 2");
                    break;
                case Devices.Device3:
                    Console.WriteLine("Device 3");
                    break;
                case Devices.Device4:
                    Console.WriteLine("Device 4");
                    break;
            }

            Console.ReadKey();
        }

        public enum Devices {
            Device1,
            Device2,
            Device3,
            Device4
        }
    }
} 
```

[编辑]

似乎我正朝着正确的方向前进，只有您的“定义”示例才给他们整数（无论如何，它们都默认按照您声明它们的顺序）。

但是按照你的例子，它会是这样的：

```
public enum Devices {
    Device1 = 0,
    Device2 = 1,
    Device3 = 2,
    Device4 = 3
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:55:29.050

你的问题与`#define`. 一个`switch`语句不能对一个表达式进行操作，它必须被赋予一个字面值（在引擎盖下 switch 语句被编译为一个索引跳转表），即它必须是一个字符串、int 等，而不是一个 object()。

在您的情况下，它`pn`似乎`pn`应该是一个字符串或枚举。将您的代码更改为此应该可以工作：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var pn = productnames.DEVICE3; //obviously pn could be set to anything you like, or passed in to the event handler or function
        string str = textBox1.Text;
        switch (pn) 
        { 
            case productnames.DEVICE1:
                label1.Text = str+"CASE1";
                break;
            case productnames.DEVICE1:
                label1.Text = str+"CASE2";
                break;
        }
    }
}

public static class productnames
{
    public string DEVICE1 = "name1";
    public string DEVICE2 = "name2";
    public string DEVICE3 = "name3";
    public string DEVICE4 = "name4";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:58:29.563

我会说，字典会是一种更好（更快）的方式

```
var Products = new Dictionary<string, ProductInfo>()
{
    { "DEVICE1", new ProductInfo("Properties of product 1") },
    { "DEVICE2", new ProductInfo("Properties of product 1") },
    { "DEVICE3", new ProductInfo("Properties of product 1") }
};

var SelectedProduct = Products[textbox1.Text];
label1.Text = SelectedProduct.Info; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:55:05.663

使用以下代码可以解决此问题：

```
 public ProductNames
{
    public readonly static DEVICE1 = new ProductNames("DEVICE1");
    public readonly static DEVICE2 = new ProductNames("DEVICE2");
    public readonly static DEVICE3 = new ProductNames("DEVICE3");

    public string Name{get{return _name;}}  
    private readonly _name ;

    private ProductNames(string name)
    {
        _name = name;
    }  
}

// usage
ProductNames pn = GetProcuctName(/* your logic */);
switch(pn.Name)
{
    case ProductNames.DEVICE1.Name:
        // do smth
    case ProductNames.DEVICE2.Name:
        // do smth else
} 
```

# javascript - 达到字数时启用提交按钮

> ID：12618536
> 
> 赞同：1
> 
> 时间：2012-09-27T09:46:34.830
> 
> 标签：javascript, html

> **可能重复：**
> [停止按下提交按钮，直到在文本区域中写入足够的单词](https://stackoverflow.com/questions/12527942/stop-submit-button-being-pressed-until-enough-words-are-written-in-text-area)

所以基本上我有下面的代码。我希望在文本区域中的字数超过 5 时启用提交按钮。下面的代码不起作用。想法？

```
<form method="post" id="writearticle" action="submitarticle.php"> 
    <textarea rows="30" cols="85" id="content" name="content" placeholder="Write the article here. Try to abide by the instructions and keywords provided." onkeydown="checkWordCount();" ></textarea> 
    <br />      
    <input type="submit" id="submit" name="submitarticle" value="Submit Article" class="submit" disabled />     

<script type="text/javascript">                         
    function checkWordCount() { 
    var wordCount = document.getElementById('content').value.split(" ").length;
    if (wordCount > 5) { 
        document.getElementById('submit').disabled = false; 
        } else { 
            document.getElementById('submit').disabled = true; alert("lol"); 
        } 
    }
    </script>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:03:02.500

您的代码很好，问题是您正在触发的事件。如果您在 中输入超过 5 个单词，则启用`textarea`该`submit`按钮，但如果您突出显示所有文本并将其删除，则`wordCount`保持不变，因此该`submit`按钮不会被禁用。

尝试更改`onkeydown`为`onkeyup`，这应该可以解决问题。

**编辑**

针对您的评论，**请检查您使用的元素的 ID 是否唯一**，否则会导致问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:50:20.777

试试这个

```
s = document.getElementById("content").value;
s = s.replace(/(^\s*)|(\s*$)/gi,"");
s = s.replace(/[ ]{2,}/gi," ");
s = s.replace(/\n /,"\n");
len = s.split(' ').length; 
```

现在将 len 值传递给您的 if 条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:53:15.477

在 textarea-onkeyup="checkWordCount();" 的 onkeyup 函数中调用函数

然后使用 jQuery 来检查这样的计数。

```
 function checkWordCount()
    {
      var lengthofText=$("#content").val().length;
        if (lengthofText> 5) { 
               document.getElementById('submit').disabled = false; 
            } else { 
               document.getElementById('submit').disabled = true; 
            } 

      } 
```

# c# - 具有基本身份验证的 ServiceStack MonoTouch 客户端 - JSON 解析器和 Cookie 异常

> ID：12618538
> 
> 赞同：0
> 
> 时间：2012-09-27T09:46:38.297
> 
> 标签：c#, web-services, rest, xamarin.ios, servicestack

对于初学者来说，BasicAuth 似乎在服务端进行了正确配置（该服务是一个 REST 服务，继承自`RestServiceBase`，如果这在这里很重要的话），至少在使用浏览器时它工作得很好。

尝试在 MonoTouch 下将客户端用于服务时，我遇到了两个问题（我正在使用`IServiceClient`接口进行`JsonServiceClient`备份）：

1.  当我输入错误的凭据时，我会收到异常提示“用户名或密码无效”，这一切都很好。但是当我第二次输入任何东西时，无论是正确的还是错误的凭据，并尝试发送一个请求，我都会收到包含以下内容的`Internal Server Error`异常`ReponseDto`：

    `Error Code: Cookie Exception, Message: The 'Name' = '$Version' part of the cookie is invalid`

    我正在使用该`SetCredentials`方法，将`AlwaysSendBasicAuthHeader`其设置为`true`（但这并不重要，当它被设置为`false`同样的事情时）。知道为什么会发生这种情况以及如何解决吗？

2.  现在让我们假设我第一次提供了正确的凭据（当一切正常时），初始身份验证正常。现在，当我尝试从标有`[Authenticate]`属性的服务中获取 DTO 时，我得到：

    `ServiceStack.ServiceClient.Web.WebServiceException: Internal Server Error`

除了内部例外：

```
 System.IndexOutOfRangeException: Array index is out of range.
  at ServiceStack.Text.Json.JsonTypeSerializer.EatValue (System.String value, System.Int32& i) [0x00000] in <filename unknown>:0 
  at ServiceStack.Text.Json.JsonTypeSerializer.EatTypeValue (System.String value, System.Int32& i) [0x00000] in <filename unknown>:0 
  at ServiceStack.Text.Common.DeserializeListWithElements`2[DTO.Report,ServiceStack.Text.Json.JsonTypeSerializer].ParseGenericList (System.String value, System.Type createListType, ServiceStack.Text.Common.ParseStringDelegate parseFn) [0x00000] in <filename unknown>:0 
  at ServiceStack.Text.Common.DeserializeList`2+<GetParseFn>c__AnonStoreyB[System.Collections.Generic.IList`1[DTO.Report],ServiceStack.Text.Json.JsonTypeSerializer].<>m__37 (System.String value) [0x00000] in <filename unknown>:0 
  at ServiceStack.Text.JsonSerializer.DeserializeFromString (System.String value, System.Type type) [0x00000] in <filename unknown>:0 
  at ServiceStack.Text.JsonSerializer.DeserializeFromStream (System.Type type, System.IO.Stream stream) [0x00000] in <filename unknown>:0 
  at ServiceStack.ServiceClient.Web.AsyncServiceClient.HandleResponseError[IList`1] (System.Exception exception, ServiceStack.ServiceClient.Web.RequestState`1 requestState) [0x00000] in <filename unknown>:0 } 
```

据我所知，这意味着 JSON 序列化程序因未知原因而放弃。`POST`有趣的是，如果我禁用身份验证，同一段代码可以正常工作 -通过搜索请求异步获取 DTO 列表：

`client.SendAsync<IList<DTO.Report>>(searchRequest, OnSuccess, OnError)`

第一点的问题仍然存在：为什么？如何解决？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:49:12.407

好的，开始工作了。ServiceStack 本身没有任何问题，现在我认为我公然滥用客户端功能。嗯，这不是一个聪明的举动，但也许其他人会从我的错误中吸取教训。

我猜大多数问题源于使用客户端的单个实例，而不是每个请求使用一个新实例。所以出现了错误......当我更改功能以根据请求获取一个新客户端（某种小工厂）时，`POST`一个`Auth`对象运行良好，其他一切都在进行 - 似乎现在一切正常，两者都BasicAuth 和 CredentialsAuth。

故事的重点，`using`block 是你与客户的朋友，一切都表明重用客户实例是一个很大的禁忌——至少我现在可以从问题和解决方案中看出这一点。

# android - 如何获取消息 Android 并将其显示在我的活动中？

> ID：12618540
> 
> 赞同：-2
> 
> 时间：2012-09-27T09:46:44.493
> 
> 标签：android, message

我通过接收器消息`broadcast Receiver`并显示它`Toast`。但我想在我的`Activity`. 大家帮帮我？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:21:04.047

您可以在您的活动中添加一个 TextView，然后使用`TextView.setText()`方法来显示您收到的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:49:01.013

是的，收到消息后只需启动另一个活动，Braodcast 接收器不是活动，因此您不能直接从那里显示内容。

# cordova - Phonegap 外部链接不起作用

> ID：12618543
> 
> 赞同：1
> 
> 时间：2012-09-27T09:46:53.120
> 
> 标签：cordova, cordova-2.0.0

我有一个 Phonegap 2.1 应用程序，其中我使用 Cordova 作为组件。我已将测试我的白名单设置为 * 并更改将在科尔多瓦 webview 中打开所有链接的值。（当我禁用它时，链接工作正常）在另一个项目中，就我看到所有东西都没有区别。当我在模拟器上开始我的项目时，一切正常，我得到以下跟踪：

> 2012-09-27 11:45:02.395 rep[18416:c07] 多任务 -> 设备：是，应用程序：是 2012-09-27 11:45:02.572 rep[18416:c07] [INFO] 收到事件： deviceready 2012-09-27 11:45:03.780 rep[18416:c07] OpenAllWhitelistURLsInWebView 设置：在 webview 中打开 2012-09-27 11:45:04.195 rep[18416:c07] OpenAllWhitelistURLsInWebView 设置：在 webview 中打开 2012-09-27 11:45:04.903 rep[18416:c07] OpenAllWhitelistURLsInWebView 设置：在 webview 中打开

但是当我在我的设备上开始时，我得到了

> 2012-09-27 11:46:01.623 rep[2827:907] 多任务-> 设备：是，应用程序：是 2012-09-27 11:46:04.709 rep[2827:907] OpenAllWhitelistURLsInWebView 设置：在 webview 中打开

什么也没发生，当我再次按下时，我得到

> 2012-09-27 11:46:33.318 rep[2827:907] OpenAllWhitelistURLsInWebView 设置：在 webview 中打开 2012-09-27 11:46:33.325 rep[2827:907] 无法加载网页并出现错误：操作无法完成。（NSURLErrorDomain 错误 -999。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:04:03.330

我可以解决这个问题，奇怪的是我可以通过 cleaver 中的调用进行调试，看看它们是如何调用 load 方法的，但它不加载。我在调试器中重新启动 iPad 后，它显示相同，但​​它终于可以工作了，不知道为什么。

# javascript - 为什么内部函数的变量不会泄漏到外部作用域？

> ID：12618553
> 
> 赞同：4
> 
> 时间：2012-09-27T09:47:35.803
> 
> 标签：javascript

考虑以下 JavaScript 片段：

```
function outer() {
    var x = 10;
    function inner() {
        var y = 20;
    }
} 
```

显然，该变量`y`在 的上下文中不可用`outer`。`outer`遵循 ES5 规范中的流程告诉我们，当我们进入执行上下文时会发生这种情况：

*   我们进入一个新的执行上下文（[10.4](http://es5.github.com/#x10.4)）

*   由于它是一个函数，我们按照[输入函数代码 (10.4.3)中概述的步骤进行操作](http://es5.github.com/#x10.4)

    *   令*code*为*F*的 [[Code]] 内部属性的值。

[创建函数对象 (13.2)](http://es5.github.com/#x13.2)中描述了函数的 [[Code]] 内部属性。它指的是语法指定的*FunctionBody （函数的全部内容）：*

> `function` *标识符* `(` *FormalParameterList [opt]* `) {` *FunctionBody* `}`

此时我们进入[声明绑定实例化（10.5）](http://es5.github.com/#x10.5)部分并执行以下操作：

*   为函数的形式参数列表中的任何参数创建绑定

*   对于*代码*中的每个函数声明：

    *   `Function`在函数标识符和对象之间创建当前范围内的绑定（按照[函数定义 (13)](http://es5.github.com/#x13)中的指定创建）

    *   ***没有什么可说的“从代码*中删除我们刚刚处理的函数”**

*   `arguments`为对象创建绑定

*   对于*代码*中的每个变量声明：

    *   在当前范围内为变量标识符创建绑定

我的问题是，为什么此时没有为内部函数的变量声明创建绑定？似乎*代码*仍应包含外部函数的整个源文本（其中将包括内部函数的源文本）。我正在规范中寻找解释行为的东西。

* * *

**更新，更清楚一点**：我问的是当我们进入`outer`函数的上下文时会发生什么。该`inner`函数永远不会被调用，我也不关心当我们从`outer`函数返回时会发生什么。我完全对规范定义的过程感兴趣，即在进入新的执行上下文时为变量声明创建绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:54:45.243

你的想法有误。

Javascript具有函数范围。因此，您对每个函数都有一个新的执行上下文，这是真的。但是，从函数返回后，此函数上下文过期。这就是为什么在内部函数返回后您无法从内部函数访问变量的原因。您仍然处于外部函数的执行上下文中，但您无法再访问内部函数的执行上下文。

引用[规范](http://es5.github.com/#x10.4)：

> 每个返回都退出一个执行上下文。抛出的异常也可能退出一个或多个执行上下文。

编辑：为了进一步澄清这一点：函数声明的主体没有被处理（见[10.5.5.d](http://es5.github.com/#x10.5)），只有函数标识符和参数被传递给变量环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T23:10:51.080

它就[在术语*代码*（§10.1）](http://es5.github.io/#function-code)的定义中：

> *函数代码*是作为[*FunctionBody*](http://es5.github.io/#x13)的一部分解析的源文本。特定[*FunctionBody*](http://es5.github.io/#x13)的*函数代码*不**包含**任何被解析为**嵌套**[*FunctionBody*](http://es5.github.io/#x13)一部分的源文本。[](http://es5.github.io/#x13)*****[](http://es5.github.io/#x13)*****

# git - 查找存储库中最大的文件夹和每个开发人员的提交时间

> ID：12618555
> 
> 赞同：1
> 
> 时间：2012-09-27T09:47:47.770
> 
> 标签：git, git-svn

我是 git 新手，我需要分析一个 git 存储库，因此有什么方法可以找到 git 存储库（最新版本）中最大的目录，我们可以按时间范围找到每个开发人员的提交时间并缩短它们从高到低？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:38:11.930

你应该看看一些统计工具`git`。列举几个：

*   [GitStats](http://gitstats.sourceforge.net/)，用 Python 编写，需要 Gnuplot 来绘制图形
*   [GitStat](http://sourceforge.net/projects/gitstat/)（和上一个不一样，它没有's'！）
*   [Pepper](http://scm-pepper.sourceforge.net/) - 存储库统计和报告工具
*   [Gitdm](http://repo.or.cz/w/git-dm.git)（“git 数据挖掘器”）
*   [gitinspector](http://code.google.com/p/gitinspector/)

# sql - 获取 SQLite 中自增字段的 ID

> ID：12618557
> 
> 赞同：0
> 
> 时间：2012-09-27T09:47:49.027
> 
> 标签：sql, sqlite, insert, auto-increment

我正在使用 SQLite 数据库。我想进行插入并获取此插入的字段 ID（自动生成）。字段 ID 是一个自动增量键。我正在使用该语句

```
 SELECT last_insert_rowid(); 
```

这很好用。

问题是当我有许多并发插入到表中时：在这种情况下，它可能会返回一个与另一个插入（不是我的插入）相关联的 ID。

我该怎么做才能以自主方式进行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:50:57.737

来自[SQLite 文档](http://www.sqlite.org/lang_corefunc.html)；

> last_insert_rowid() 函数**从调用该函数的数据库连接返回最后一行插入**的 ROWID 。

因此，只要您在插入后立即在同一连接上调用 select，其他同时用户是完全独立的，不会导致返回值错误。

# c# - 复制文件，文件未处理

> ID：12618559
> 
> 赞同：0
> 
> 时间：2012-09-27T09:47:57.447
> 
> 标签：c#, io

我有以下用于复制文件的代码：

```
var copedFile = ConfigurationManager.AppSettings["PathToFirebirdDB"] + ".001";

using (var inputFile = new FileStream( ConfigurationManager.AppSettings["PathToFirebirdDB"],
        FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
{
    using (var outputFile = new FileStream(copedFile, FileMode.Create))
    {
        var buffer = new byte[0x10000];
        int bytes;

        while ((bytes = inputFile.Read(buffer, 0, buffer.Length)) > 0)
        {
            outputFile.Write(buffer, 0, bytes);
        }
    }
} 
```

此代码只能正常工作一次。下次我收到以下消息时：

```
 The process cannot access the file 'D:\Programs\IBExpert\db.fdb.001' because it is being used by another process. System.IO.IOException: The process cannot access the file 'D:\Programs\IBExpert\db.fdb.001' because it is being used by another process. 
```

为什么？有`using`块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:01:16.987

如果您在关闭文件后尝试重新打开文件，则该文件仍有可能被系统认为是打开的，因为它实际上是打开的。

一个典型的原因是病毒扫描程序保持文件打开以确保它没有被感染，这发生在后台，并且可能在您自己关闭文件后继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:52:18.097

可能是因为您没有关闭文件。

顺便说一句，你为什么不直接使用`File.Copy`？

# linux - 我怎么知道在 linux 中新编辑和更改了哪个文件？我应该参考哪里？

> ID：12618561
> 
> 赞同：1
> 
> 时间：2012-09-27T09:48:01.077
> 
> 标签：linux, shell

有人用我的账号编辑了一些东西，我想知道他修改了哪个文件。我曾尝试扫描“历史记录”，但这确实是一项艰巨的工作，因为历史记录列出了所有打开的文件，而不是完全更改了文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:01:02.013

如果您大致知道文件何时被修改，您可以使用`find`or`-mmin`选项`-mtime`。

从`find`手册页中，这就是选项的含义：

> **-mmin n** 文件的数据最后一次修改是在 n 分钟前。
> 
> **-mtime n** 文件的数据最后一次修改是在 n*24 小时前。

例如，要查找在过去一小时内但不是在过去 10 分钟内修改的主目录中的文件，您可以使用：

```
find /home/username -type f -mmin -60 -mmin +10 
```

# android - 无法将多个值从一个屏幕传递到android中另一个屏幕的多个文本视图框

> ID：12618562
> 
> 赞同：0
> 
> 时间：2012-09-27T09:48:02.320
> 
> 标签：android, web-services, textview

我正在尝试通过 SOAP 方法从 android 使用 Web 服务。这里我的问题是，实际上我从该 Web 服务获得了两个值，即“OrderNo”和“FreightRate”，我试图在下一个屏幕的每个文本视图框中显示这些值，但我在文本视图中什么也没得到盒子，

如何实现这个概念？请提出建议..

**注意：-** **如果我使用“orderNo”或“FreightRate”等任何一个值，我只能在另一个屏幕的文本视图框中显示任何一个值。但无法在另一个屏幕的单独文本视图框中同时显示两个值。**

*请找到我的参考资料*

**Main_WB.java**

```
 public class Main_WB extends Activity 
 {
EditText edt1,edt2;
//TextView txt_1;

Button btn;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edt1 = (EditText)findViewById(R.id.editText1);
    edt2 = (EditText)findViewById(R.id.editText2);
    btn = (Button)findViewById(R.id.button1);

    btn.setOnClickListener(new View.OnClickListener()
    {
    public void onClick(View v) 
    {
        getTMSChart(edt1.getText().toString(),edt2.getText().toString());
    //  Intent myint = new Intent(Main_WB.this,ResultActivity.class);
    //  startActivity(myint);
    }     
    });
 }

 private void getTMSChart(String FromDate,String ToDate)
 {
// txt_1 = (TextView)findViewById(R.id.textView1);

 System.setProperty("http.keepAlive", "false");        
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);        

 envelope.dotNet = true;

 String NAMESPACE = "http://tempuri.org/";
 String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";
 String METHOD = "GetTMSChart";

 SoapObject request = new SoapObject(NAMESPACE, METHOD);        
 request.addProperty("FromDate", FromDate);               
 request.addProperty("ToDate", ToDate);

 envelope.setOutputSoapObject(request);
 HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

 try 
 {
    androidHttpTransport.call(NAMESPACE + METHOD, envelope);
    SoapObject result = (SoapObject) envelope.bodyIn;
    SoapObject root =  (SoapObject) ((SoapObject)(result).getProperty(0)).getProperty("NewDataSet");
    int tablesCount = root.getPropertyCount();

    for (int i = 0; i < tablesCount; i++)
    {
       SoapObject table = (SoapObject) root.getProperty(i);
       int propertyCount = table.getPropertyCount();

    //   String[] ord = new String[propertyCount];
    //   String[] fre = new String[propertyCount];

    // int[] fre = new int[propertyCount];
    // int[] margin = new int[propertyCount];

    for (int j = 0; j < propertyCount; j++)
    {   

    String x,y;

    // int orderNo = Integer.parseInt(table.getPropertyAsString("Order_No"));
    // int freightRate = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
    // int marginPercent = Integer.parseInt(table.getPropertyAsString("Margin_Percent"));

    String orderNo =  table.getPropertyAsString("Order_No");
    String freight = table.getAttributeAsString("Freight_Rate");

    x = orderNo.toString();
    y = freight.toString();
    Intent in = new Intent(getApplicationContext(),ResultActivity.class);
    in.putExtra("gotonextpage",x);
    in.putExtra("gotonextpage", y);
    startActivity(in);

    //ord[j] = orderNo;
    //  fre[j] = freightRate;
    // margin[j]= marginPercent;

    //   x = orderNo.toString();
    //   y = fre.toString();

    //   Intent myIntent = new Intent(Main_WB.this, ResultActivity.class);
    //   myIntent.putExtra("gotonextpage", x);
    //   startActivity(myIntent);

    // whatever you do with these values
          }                   
       }
    }   
    catch (Exception e) 
    {
    }   
 } } 
```

**结果活动.java**

```
 public class ResultActivity extends Activity 
 {
String x,y;
TextView txt1,txt2;

 @Override
 public void onCreate(Bundle savedInstanceState)
 {
super.onCreate(savedInstanceState);
setContentView(R.layout.main1);

Bundle extras = getIntent().getExtras();
if(extras != null)
{   
    x = extras.getString("gotonextpage");
    y = extras.getString("gotonextpage");
}
else
{   
}
txt1 = (TextView)findViewById(R.id.txtVw);
txt2 = (TextView)findViewById(R.id.txtVw2);
txt1.setText(x);
txt2.setText(y);

}} 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:52:37.107

也许这不是您的问题，但是，在您的主要活动中，您尝试根据您的意图发送两个值，但您使用相同的键添加它们。在您的示例中，您始终发送值 y 因为您正在覆盖 x 值。

```
in.putExtra("gotonextpage",x);
in.putExtra("gotonextpage", y); 
```

如果我正确理解您的问题，您需要为您的值使用两个不同的键，在意图发送它们并提取它们时。

```
in.putExtra("gotonextpageX",x);
in.putExtra("gotonextpageY", y);

x = extras.getString("gotonextpageX");
y = extras.getString("gotonextpageY"); 
```

另一种方法是

```
x = getIntent().getStringExtra("gotonextpageX");
y = getIntent().getStringExtra("gotonextpageY"); 
```

# c++ - Qt程序不工作：程序意外结束

> ID：12618563
> 
> 赞同：0
> 
> 时间：2012-09-27T09:48:04.170
> 
> 标签：c++, qt

我正在使用 QtCreator 创建一个小型应用程序。它可以编译，但是从 QtCreator 执行时，我收到“程序意外完成”错误。

如果我尝试从控制台执行二进制文件，则会出现分段错误（核心转储）。

由于这是我第一次自己编写 Qt 代码，我想我错过了一些东西。请检查以下代码：

头文件 mainwindow.h：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

class MainWindow;
class QLabel;
class QLineEdit;
class QPushButton;

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    void createGUI();

private:
    QLineEdit *mysqlUserLineEdit;
    QLineEdit *mysqlPasswordLineEdit;
    QLineEdit *albatrossIPLineEdit;
    QLineEdit *albatrossPortLineEdit;
    QPushButton *exitButton;
    QPushButton *startButton;
};

#endif // MAINWINDOW_H 
```

源 mainwindow.cpp：

```
#include <QtGui>
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent)
{
    createGUI();

    //connect(...)
    //connect(...)

    setWindowTitle(tr("Albatross MySQL simulator"));
}

MainWindow::~MainWindow()
{

}

void MainWindow::createGUI()
{
    QVBoxLayout *mainLayout = new QVBoxLayout;
        QHBoxLayout *settingsLayout = new QHBoxLayout;
            QVBoxLayout *mysqlSettingsLayout = new QVBoxLayout;
                QHBoxLayout *mysqlUserLayout = new QHBoxLayout;
                mysqlUserLineEdit = new QLineEdit();
                QLabel *mysqlUserLabel = new QLabel(tr("&User:"));
                mysqlUserLabel->setBuddy(mysqlUserLineEdit);
                mysqlUserLayout->addWidget(mysqlUserLabel);
                mysqlUserLayout->addWidget(mysqlUserLineEdit);

                QHBoxLayout *mysqlPasswordLayout = new QHBoxLayout;
                mysqlPasswordLineEdit = new QLineEdit();
                QLabel *mysqlPasswordLabel = new QLabel(tr("&Password:"));
                mysqlPasswordLabel->setBuddy(mysqlPasswordLineEdit);
                mysqlPasswordLayout->addWidget(mysqlPasswordLabel);
                mysqlPasswordLayout->addWidget(mysqlPasswordLineEdit);
            mysqlSettingsLayout->addLayout(mysqlUserLayout);
            mysqlSettingsLayout->addLayout(mysqlPasswordLayout);

            QVBoxLayout *networkSettingsLayout = new QVBoxLayout;
                QHBoxLayout *albatrossIPLayout = new QHBoxLayout;
                albatrossIPLineEdit = new QLineEdit();
                QLabel *albatrossIPLabel = new QLabel(tr("&IP:"));
                albatrossIPLabel->setBuddy(albatrossIPLineEdit);
                albatrossIPLayout->addWidget(albatrossIPLabel);
                albatrossIPLayout->addWidget(albatrossIPLineEdit);

                QHBoxLayout *albatrossPortLayout = new QHBoxLayout;
                albatrossPortLineEdit = new QLineEdit();
                QLabel *albatrossPortLabel = new QLabel(tr("P&ort:"));
                albatrossPortLabel->setBuddy(albatrossPortLineEdit);
                albatrossPortLayout->addWidget(albatrossPortLabel);
                albatrossPortLayout->addWidget(albatrossPortLineEdit);
            networkSettingsLayout->addLayout(albatrossIPLayout);
            networkSettingsLayout->addLayout(albatrossPortLayout);
        settingsLayout->addLayout(mysqlSettingsLayout);
        settingsLayout->addLayout(networkSettingsLayout);

        QHBoxLayout *buttonsLayout = new QHBoxLayout;
        exitButton = new QPushButton(tr("&Exit"));
        buttonsLayout->addWidget(exitButton);
        startButton = new QPushButton(tr("&Start"));
        startButton->setDefault(true);
        buttonsLayout->addWidget(startButton);
    mainLayout->addLayout(settingsLayout);
    mainLayout->addLayout(buttonsLayout);
    centralWidget()->setLayout(mainLayout);
} 
```

最后是 main.cpp，它是由 QtCreator 自动生成的：

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

编辑：好的，问题是当使用 mainLayout 将它附加到主窗口时，以及 mainwindow.cpp 的最后一行。这就是它引发分段错误的地方。我应该将什么设置为中心小部件？或者有没有其他方法可以将布局附加到主窗口小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:53:28.580

一般来说，创建者中的这种行为是由于 SEGFAULT 或缺少库。

你的代码

```
 mysqlPasswordLabel->setBuddy(mysqlPasswordLineEdit);
            mysqlPasswordLayout->addWidget(mysqlPasswordLabel);
            mysqlPasswordLayout->addWidget(mysqlPasswordLineEdit); 
```

是原因。您没有初始化`mysqlPasswordLineEdit`导致 SEGFAULT

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1

> ID：12618564
> 
> 赞同：2
> 
> 时间：2012-09-27T09:48:11.407
> 
> 标签：java, arrays, swing, jtable, indexoutofboundsexception

我一直很难尝试调试此异常：`Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 1`

这是我的代码

```
package com.Homework.Table;

import java.awt.BorderLayout;
import java.awt.Container;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class ArrayTable  {
    static String [][] records;

    public static void main(String [] args)
    {
        String [] columns= { "col1", "col2", "col3","col4" };
        String array ="A&B&1&May 8 2011 12:17AM;;E&D&5&May 8 2011 12:43AM;;F&G&5&May 8 2011 7:06AM;;H&I&1&May 14 2011 11:57PM";
        records=to2dim (array ,";;","&");
        Object rows[][] =records;
        JFrame f = new JFrame("JTable Sample");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Container content = f.getContentPane();
        JTable table = new JTable(rows, columns);
        JScrollPane scrollPane = new JScrollPane(table);
        content.add(scrollPane, BorderLayout.CENTER);
        f.setSize(300, 200);
        f.setVisible(true);
    }

    public static String [][] to2dim (String source , String outerdelim, String innerdelim) {
        String [][] result = new String [source.replaceAll ("[^" + outerdelim + "]", "").length () + 1][]; 
        int count = 0;
        for (String line : source.split ("[" + outerdelim + "]"))
        {
            result [count++] = line.split (innerdelim);
        }
        return result;
    }
} 
```

这是我得到的回应

```
 Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 1
at javax.swing.JTable$1.getValueAt(Unknown Source)
at javax.swing.JTable.getValueAt(Unknown Source)
at javax.swing.JTable.prepareRenderer(Unknown Source)
at javax.swing.plaf.basic.BasicTableUI.paintCell(Unknown Source)
at javax.swing.plaf.basic.BasicTableUI.paintCells(Unknown Source)
at javax.swing.plaf.basic.BasicTableUI.paint(Unknown Source)
at javax.swing.plaf.ComponentUI.update(Unknown Source)
at javax.swing.JComponent.paintComponent(Unknown Source)
at javax.swing.JComponent.paint(Unknown Source)
at javax.swing.JComponent.paintChildren(Unknown Source)
at javax.swing.JComponent.paint(Unknown Source)
at javax.swing.JViewport.paint(Unknown Source)
at javax.swing.JComponent.paintChildren(Unknown Source)
at javax.swing.JComponent.paint(Unknown Source)
at javax.swing.JComponent.paintChildren(Unknown Source)
at javax.swing.JComponent.paint(Unknown Source)
at javax.swing.JComponent.paintChildren(Unknown Source)
at javax.swing.JComponent.paint(Unknown Source)
at javax.swing.JLayeredPane.paint(Unknown Source)
at javax.swing.JComponent.paintChildren(Unknown Source)
at javax.swing.JComponent.paintToOffscreen(Unknown Source)
at javax.swing.BufferStrategyPaintManager.paint(Unknown Source)
at javax.swing.RepaintManager.paint(Unknown Source)
at javax.swing.JComponent.paint(Unknown Source)
at java.awt.GraphicsCallback$PaintCallback.run(Unknown Source)
at sun.awt.SunGraphicsCallback.runOneComponent(Unknown Source)
at sun.awt.SunGraphicsCallback.runComponents(Unknown Source)
at java.awt.Container.paint(Unknown Source)
at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
at javax.swing.RepaintManager.seqPaintDirtyRegions(Unknown Source)
at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(Unknown Source)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:25:14.723

```
import java.awt.BorderLayout;
import java.awt.Container;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import java.util.Arrays;
public class ArrayTable  {
    static String [][] records;

    public static void main(String [] args)
    {
        String [] columns= { "col1", "col2", "col3","col4" };
        String array ="A&B&1&May 8 2011 12:17AM;;E&D&5&May 8 2011 12:43AM;;F&G&5&May 8 2011 7:06AM;;H&I&1&May 14 2011 11:57PM";
        records=to2dim (array ,";;","&");
        Object rows[][] =records;
        JFrame f = new JFrame("JTable Sample");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Container content = f.getContentPane();
        JTable table = new JTable(rows, columns);
        JScrollPane scrollPane = new JScrollPane(table);
        content.add(scrollPane, BorderLayout.CENTER);
        f.setSize(300, 200);
        f.setVisible(true);
    }

    public static String [][] to2dim (String source , String outerdelim, String innerdelim) {

        String [][] result = new String [(source.split (outerdelim)).length][];
        int count = 0;

        System.out.println("result len "+result.length);
        for (String line : source.split (outerdelim ))
            {
                result [count++] = line.split (innerdelim);
            }

        System.out.println(Arrays.deepToString(result));
        return result;
    }
} 
```

这应该适合你。`[;;]`仅匹配单个字符，因此基于此的拆分将在两个连续`;`的 . 所以应该改成 just `;;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:21:53.663

您在第 2、第 4 和第 6 行中只有一列。应该是 4 列。

# java - 按顺序排列日期

> ID：12618566
> 
> 赞同：0
> 
> 时间：2012-09-27T09:48:12.787
> 
> 标签：java, android

我正在存储用户`DatePicker`在文件中使用 a 输入的日期并从文件中读取内容并将其显示到我的历史记录页面中。请找到附上的图片

我需要根据左侧的条目以适当的顺序排列这些日期。请帮助我。谢谢。

![在此处输入图像描述](../Images/e9766e43195e04d353f8834c979b3480.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:58:23.230

如果你`java.util.Date`用来操作你的日期，它应该很容易，因为`Date`implements `Comparable`。因此，您只需将您的值读入 a`List`然后执行 a`Collections.sort(list);`以使您的日期按升序排序。

# python - 在 Apache/mod_python/Django 中运行 beautifulsoup4 的问题

> ID：12618567
> 
> 赞同：4
> 
> 时间：2012-09-27T09:48:12.980
> 
> 标签：python, django, apache, beautifulsoup, mod-python

我正在尝试使用 Django 中的 BeautifulSoup 版本 4（使用带有 mod_python 的 Apache2）动态呈现 HTML 页面。但是，只要我将任何 HTML 字符串传递给 BeautifulSoup 构造函数（参见下面的代码），浏览器就会挂起等待网络服务器。我在 CLI 中尝试了等效代码，它就像一个魅力。所以我猜这与 BeautifulSoups 环境有关，在这种情况下是 Django + Apache + mod_python。

```
import bs4
import django.shortcuts as shortcuts

def test(request):
    s = bs4.BeautifulSoup('<b>asdf</b>')
    return shortcuts.render_to_response('test.html', {}) 
```

我已经使用 pip 安装了 BeautifulSoup `pip install beautifulsoup4`，. 我尝试使用标准 Debian 软件包安装 BeautifulSoup3 `apt-get install python-beautifulsoup`，然后以下等效代码可以正常工作（来自浏览器和 CLI）。

```
from BeautifulSoup import BeautifulSoup
import django.shortcuts as shortcuts

def test(request):
    s = BeautifulSoup('<b>asdf</b>')
    return shortcuts.render_to_response('test.html', {}) 
```

我查看了 Apache 的访问和错误日​​志，但它们没有显示任何信息，即停止的请求发生了什么。我还检查了 /var/log/syslog 和 /var/log/messages，但没有更多信息。

这是我使用的 Apache 配置：

```
<VirtualHost *:80>
    DocumentRoot /home/nandersson/src
    <Directory /home/nandersson/src>
        SetHandler python-program
        PythonHandler django.core.handlers.modpython
        SetEnv DJANGO_SETTINGS_MODULE app.settings
        PythonOption django.root /home/nandersson/src
        PythonDebug On
        PythonPath "['/home/nandersson/src'] + sys.path"
    </Directory>

    <Location "/media/">
        SetHandler None
    </Location>
    <Location "/app/poc/">
        SetHandler None
    </Location>
</VirtualHost> 
```

我不确定如何进一步调试，不确定它是否是错误。任何人都知道如何解决这个问题或遇到类似问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T09:05:41.290

我正在使用 Apache2 和 mod_python。我通过显式传递“html.parser”来解决挂起问题。

```
s = bs4.BeautifulSoup('<b>asdf</b>', 'html.parser') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T19:03:54.317

这可能是[此处描述的 Cython 和 mod_wsgi 之间的交互，并在](https://techknowhow.library.emory.edu/blogs/branker/2010/07/30/django-lxml-wsgi-and-python-sub-interpreter-magic)[此处](https://bugs.launchpad.net/beautifulsoup/+bug/948577)在 Beautiful Soup 上下文中进行了探索。以下是与您类似的[早期](https://stackoverflow.com/questions/10235579/502-bad-gateway-using-beautiful-soup-python-django) [问题。](https://stackoverflow.com/questions/11398911/unable-to-load-apache-server-while-loading-external-modules-in-a-class/11402871#11402871)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T10:41:53.897

尝试

```
doc = BeautifulSoup(html, 'html5lib') 
```

在我的情况下，'html.parser' 经常导致 HTMLParseError [https://groups.google.com/forum/?fromgroups=#!topic/beautifulsoup/x_L9FpDdqkc](https://groups.google.com/forum/?fromgroups=#!topic/beautifulsoup/x_L9FpDdqkc)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-21T17:48:44.617

大约一年前我遇到过同样的问题，刚刚尝试使用新版本的 BeautifulSoup 4.3.2 进行类似的设置（django+mod_wsgi+apache2），似乎问题已得到解决。

# ios - 如何使用 GDataXML 解析器创建 GDataXMLDocument

> ID：12618570
> 
> 赞同：2
> 
> 时间：2012-09-27T09:48:22.853
> 
> 标签：ios

我需要使用 GDataXML 解析 XML 文件，只要我还必须重写它。我遇到的问题不是关于如何做到这一点，有大量的教程，我想我得到了程序。基本上有一些代码行我无法使它工作：

```
+(ArrayItems *)loadXML{ 

NSLog(@"Start");

NSString *filePath=[ArrayItemsParser dataFilePath];
if (filePath!=nil) NSLog(@"Filepath created: %@",filePath);

NSData *xmlData=[NSMutableData dataWithContentsOfFile:filePath];
if(xmlData!=nil) NSLog(@"xmlData created");

NSError *error;
GDataXMLDocument *docXML=[[GDataXMLDocument alloc] initWithData:xmlData error:&error];
if(docXML!=nil) NSLog(@"Done");

NSLog(@"End"); 
```

这是我用来将所需信息从 XML 文件加载到我创建的类模型中的静态方法的开始。基本上，当我运行项目以检查它不工作的地方时，它只会在控制台上打印“开始”。但是如果我从代码中删除这些行

```
NSError *error;
GDataXMLDocument *docXML=[[GDataXMLDocument alloc] initWithData:xmlData error:&error];
if(docXML!=nil) NSLog(@"Done"); 
```

并再次运行项目，这次它将在控制台上打印

2012-09-27 11:39:46.617 ParsingMap2 [11388:207] 开始

2012-09-27 11:39:46.619 ParsingMap2 [11388:207] 创建文件路径：/Users/ivanmelis/Library/Application Support/iPhone Simulator/5.0/Applications/CD93660C-46FB-4118-9A8D-0574433F6BAB/ParsingMap2.app/ ConfMap.xml

2012-09-27 11:39:46.619 ParsingMap2 [11388:207] xmlData 创建

2012-09-27 11:39:46.619 ParsingMap2 [11388:207] 结束

所以我想问题出在线条上

```
NSError *error;
GDataXMLDocument *docXML=[[GDataXMLDocument alloc] initWithData:xmlData error:&error];
if(docXML!=nil) NSLog(@"Done"); 
```

正如我提到的，我阅读了一些教程和 GDataXML 解析器的文档，但我无法解决问题......或者至少我看不到如何解决它。这似乎是创建 GDatatXMLDocument 的正确方法。有人可以给我一个建议吗？

# android - Android Webview：开始滚动到页面上的一个点

> ID：12618572
> 
> 赞同：2
> 
> 时间：2012-09-27T09:48:25.017
> 
> 标签：android, webview, scroll

我想在开始时将我的 webview 自动滚动到一个百分比，比如说页面的 3/4。

问题：computeVerticalScrollRange 仅在 webview 完成渲染时才知道。我不知道（并且调查过：我不知道？）webview 何时完成渲染（不是加载，而是渲染所有内容），何时大小（computeVerticalScrollRange）将是完全最终的。

什么不起作用：

1.  当 computeVerticalScrollRange 仍返回 0 时调用 WebViewClient.onPageFinished。

2.  WebChromeClient.onProgressChanged 100% 在 computeVerticalScrollRange 仍返回 0 时被调用。

3.  PictureListener.onNewPicture 有时被调用得太早，此时 computeVerticalScrollRange 还不是最终的（小于一秒后的值）。

4.  编辑 HTML，在 window.onload 上放置一个调用 Android 类的 Javascript 处理程序（使用警报）有同样的问题：computeVerticalScrollRange 有时还不是最终的（小于一秒后的值）。

有没有办法从（滚动点）网页的 3/4 开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:23:12.447

如果 computeVerticalScrollRange 发生变化，我实现了每 600 毫秒检查一次（在第一个 PictureListener.onNewPicture 之后）的**可怕解决方案。**如果此内容大小在过去 600 毫秒内没有改变，我假设网页完成加载，我进行滚动并在屏幕上显示 webview（使其可见）。

可怕：这会使每个页面加载速度减慢 600 毫秒，即使对于只有几行的页面也是如此。

可怕：对于一个非常大的页面，600 毫秒可能还不够，我的应用程序仍然不会滚动。

我仍在寻找一个好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T10:55:15.513

我所做的是创建一个`WebView`具有公共方法的自定义`computeVerticalScrollRange()`：

```
public int getVerticalScrollRange() {
    return super.computeVerticalScrollRange();
} 
```

之后在`onPageFinished()`调用此方法中：

```
private void computeWebViewHeight() {
    infoWebView.post(new Runnable() {
        @Override
        public void run() {
            int webViewHeight = customWebView.getVerticalScrollRange();
            // Also have a retryCount max so in case the webView really has a height of 0 you don't have an infinite loop
            if(webViewHeight <= 0 && webViewHeightRetryCount < 10) {
                webViewHeightRetryCount++;
                computeWebViewHeight();
            } else {
                if(webViewHeightRetryCount >= 10) {
                    // RetryCount was above max, so execute fallback
                } else {
                    // WebView has a height, do something with it
                }
                webViewHeightRetryCount = 0;
            }
        }
    });
} 
```

这样你就没有 600 毫秒的延迟。

我已将 retryCount 设置为 10，但它可能有点低，我不太确定。

# html - IE中的重叠问题

> ID：12618573
> 
> 赞同：0
> 
> 时间：2012-09-27T09:48:27.963
> 
> 标签：html, css

关于 IE 中的布局问题的一个问题。随着动态添加元素的增加，'body'部分的内部'dynamicdiv'应该与footer部分重叠。但现在一些元素被“页脚”部分重叠和隐藏。

外部 div 的位置是相对的，内部 div 的位置是绝对的。该代码适用于 FF/Chrome。

```
<div id='top' style='position: relative;' />
<div id='body' style='position: relative;  left: 44px; top: 95px; width: 275px; z-index:99'> 
  <div id = 'dynamicdiv' style='position: absolute; ...'> 
     multiple div sections will be dynamically added here during the runtime. 
  </div>
</div>
<div id='footer' style='position: relative; background-color:red;  z-index:1' /> 
```

添加 z-index 不起作用。

如何通过重叠“页脚”部分来显示“dynamicdiv”中的所有元素？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:59:08.617

检查此代码[http://jsfiddle.net/hCkjA/42/](http://jsfiddle.net/hCkjA/42/)

body div 不包含 z-index 页脚的 z-index 低于动态 div。
另外，如果您想将页脚粘贴到底部，请添加

```
#footer{ bottom:0px;} 
```

希望能帮助到你。

# c# - 跨线程操作无效：控件'label1'从创建它的线程以外的线程访问

> ID：12618575
> 
> 赞同：4
> 
> 时间：2012-09-27T09:48:35.997
> 
> 标签：c#, winforms, progress-bar

> **可能重复：**
> [为什么我收到此错误：“跨线程操作无效：控制 lbFolders 从创建它的线程以外的线程访问。”？](https://stackoverflow.com/questions/244591/why-am-i-getting-this-errorcross-thread-operation-not-valid-control-lbfolders)

我是winforms的新手。在我的代码中，我正在使用for循环更新进度条，现在我需要以循环计数的形式更新标签，如下所示 -

> 公共部分类 Form1 : Form { public Form1() { InitializeComponent();
> 
> ```
>  Shown += new EventHandler(Form1_Shown);
> 
>         // To report progress from the background worker we need to set this property
>         backgroundWorker1.WorkerReportsProgress = true;
>         // This event will be raised on the worker thread when the worker starts
>         backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
>         // This event will be raised when we call ReportProgress
>         backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
>     }
> 
>     private void Form1_Load(object sender, EventArgs e)
>     {
> 
>     }
> 
>     void Form1_Shown(object sender, EventArgs e)
>     {
>         // Start the background worker
>         backgroundWorker1.RunWorkerAsync();
>     }
> 
>     // On worker thread so do our thing!
>     void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
>     {
>         // Your background task goes here
>         for (int i = 0; i <= 100; i++)
>         {
>             label1.Text = "Trade" + i;
>             // Report progress to 'UI' thread
>             backgroundWorker1.ReportProgress(i);
>             // Simulate long task
>             System.Threading.Thread.Sleep(100);
>         }
>     }
>     // Back on the 'UI' thread so we can update the progress bar
>     void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
>     {
>         // The progress percentage is a property of e
>         progressBar1.Value = e.ProgressPercentage;
>     }
> 
> } 
> ```

但是在访问 label1 时，它会抛出错误 -

> 跨线程操作无效：控件“label1”从创建它的线程以外的线程访问。

如何更新 label1 的文本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T09:54:34.353

在您的进度处理程序中而不是在工作线程中更新您的标签。

```
// On worker thread so do our thing! 
 void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) 
 { 
     // Your background task goes here 
     for (int i = 0; i <= 100; i++) 
     { 
         // Report progress to 'UI' thread 
         backgroundWorker1.ReportProgress(i); 
         // Simulate long task 
         System.Threading.Thread.Sleep(100); 
     } 
 } 
 // Back on the 'UI' thread so we can update the progress bar - and our label :)
 void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e) 
 { 
     // The progress percentage is a property of e 
     progressBar1.Value = e.ProgressPercentage; 
     label1.Text = String.Format("Trade{0}",e.ProgressPercentage);
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T09:51:11.237

您只能从创建控件的线程（即 UI 线程）访问控件。在其他线程（如 BackgroundWorker）中，您需要使用[Control.BeginInvoke](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx)。

```
label1.BeginInvoke(delegate { label1.Text = "Trade" + i; }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:49:51.567

`backgroundWorker1_DoWork`运行在与主 UI 线程不同的线程上。

所以当你打电话时：

```
label1.Text = "Trade" + i; 
```

在 backgroundWorker1_DoWork 您的应用程序将抛出跨线程异常，因为您正在报告工作人员的进度，您可以在`backgroundWorker1_ProgressChanged`方法中更新 label1.Text 值

# css - 是否可以自定义 Bootstrap？

> ID：12618580
> 
> 赞同：0
> 
> 时间：2012-09-27T09:48:53.120
> 
> 标签：css, twitter-bootstrap, edit

是否可以编辑许可证手风琴的 bootstrap.css 文件？

我的意思是，我需要编辑一般样式，并且我不想再使用一个 css 文件。

我可以手动编辑原件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:54:30.887

如果我正确理解您的问题，您是在询问您是否可以自由修改 Bootstrap 并使用它。答案是：当然可以！

PS。Bootstrap 在[MIT 许可下获得许可](http://opensource.org/licenses/mit-license.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:03:57.613

我相信你可以。使用文本编辑器打开文件并按一些键...`TA-DAAH!`文件已编辑。

如果您的问题实际上是定制框架是否是一个好习惯，我的回答是否定的。有一个[自定义工具](http://twitter.github.com/bootstrap/customize.html)可以使用基本布局进行管理。对于任何进一步的自定义，编写您自己的样式表并覆盖引导规则。
为什么？因为将来您将需要一个原生组件，或者您需要更新到框架的最新版本。

如果您的问题是关于许可证的，正如@spinningarrow 回答的那样，是的。您可以随意编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T02:51:09.517

这是修改引导程序的**最佳实践：http:** [//getbootstrap.com/getting-started/#customizing](http://getbootstrap.com/getting-started/#customizing)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-28T19:43:58.873

不幸的是@spinningarrow 的评论不正确。Bootstrap 实际上是在 Apache License Version 2 (APLv2) 下获得许可的。可以在此处查看许可证：[https ://github.com/twitter/bootstrap/blob/master/LICENSE](https://github.com/twitter/bootstrap/blob/master/LICENSE)

# android - 算术评估器中的过多垃圾收集

> ID：12618581
> 
> 赞同：1
> 
> 时间：2012-09-27T09:48:58.427
> 
> 标签：android, garbage-collection

我正在尝试创建一个 Android 应用程序，它可以绘制用户输入的简单数学函数（本质上是一个图形计算器）。每个 onDraw 调用每秒需要数百次算术评估（在屏幕上绘制以生成图形）。当我的代码评估表达式时，程序会大大减慢，当内置方法评估表达式时，应用程序运行没有问题。

根据“LogCat”，**垃圾收集大约每秒发生 12 次**，每次暂停应用程序大约 15 毫秒，导致每秒冻结数百毫秒。我认为这是问题所在。

这是我的评估器功能的提炼版本。要评估的表达式名为“postfixEquation”，String ArrayList“list”在过程结束时保存最终答案。还有两个名为“digits”和“operators”的字符串数组，它们存储可以使用的数字和符号：

```
String evaluate(String[] postfixEquation) {

    list.clear();

    for (int i = 0; i < postfixEquation.length; i++) {

        symbol = postfixEquation[i];

        // If the first character of our symbol is a digit, our symbol is a numeral
        if (Arrays.asList(digits).contains(Character.toString(symbol.charAt(0)))) {

            list.add(symbol);

            } else if (Arrays.asList(operators).contains(symbol))  {

                // There must be at least 2 numerals to operate on
                if (list.size() < 2) {
                    return "Error, Incorrect operator usage.";
                }

                // Operates on the top two numerals of the list, then removes them 
                // Adds the answer of the operation to the list
                firstItem = Double.parseDouble(list.get(list.size() - 1));
                secondItem = Double.parseDouble(list.get(list.size() - 2));
                list.remove(list.size() - 1);
                list.remove(list.size() - 1);

                if (symbol.equals(operators[0])){ 
                    list.add( Double.toString(secondItem - firstItem) );  
                } else if (symbol.equals(operators[1])) {
                    list.add( Double.toString(secondItem + firstItem) );
                } else if (symbol.equals(operators[2])) {
                    list.add( Double.toString(secondItem * firstItem) );
                } else if (symbol.equals(operators[3])) {
                    if (firstItem != 0) {
                        list.add( Double.toString(secondItem / firstItem) );
                    } else {
                        return "Error, Dividing by 0 is undefined.";
                    }
                } else {
                    return "Error, Unknown symbol '" + symbol + "'.";
                }
            }
        }

    // The list should contain a single item, the final answer 
    if (list.size() != 1) {
        return "Error, " + list has " + list.size() + " items left instead of 1.";
    }

    // All is fine, return the final answer
    return list.get(0);
} 
```

操作中使用的数字都是字符串，因为我不确定是否可以在一个数组中保存多种类型（即字符串和双精度数），因此猖獗的“Double.parseDouble”和“Double.toString”调用。

**我将如何减少此处发生的垃圾收集量？**

如果有任何帮助，我一直在使用这些步骤来评估我的后缀表达式：[http](http://scriptasylum.com/tutorials/infix_postfix/algorithms/postfix-evaluation/index.htm) ://scriptasylum.com/tutorials/infix_postfix/algorithms/postfix-evaluation/index.htm 。几个星期以来，我一直无法解决这个问题。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:27:48.520

Java 中紧密循环的规则是*不分配任何东西*。您看到如此频繁的 GC 收集的事实证明了这一点。

您似乎正在使用 进行计算`Double`，然后转换为`String`。不要那样做，这对性能很糟糕，因为你创建了大量的字符串然后把它们扔掉（而且你在字符串之间来回转换并且翻倍很多）。只需维护一个`ArrayDeque<Double>`并将其用作堆栈——这也使您免于进行可能也会影响性能的数组调整大小。

预编译输入方程。将所有输入操作转换为`enum`实例——它们比较起来更快（只需要一个`switch`语句），甚至可能使用更少的内存。如果您需要处理双精度数，请使用通用`Object`容器和`instanceof`，或者使用同时包含操作`enum`和 的容器类`double`。预编译使您不必在紧密的循环中进行昂贵的测试。

如果你做这些事情，你的循环应该会飞起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:23:22.620

可能您的列表操作是此问题的根源。列表内部有数组，这些数组根据列表中的数据量进行扩展/缩小。因此，随机进行大量添加和删除将非常需要垃圾收集。

避免这种情况的解决方案是`List`为您的问题使用正确的实现，在开始时为列表分配足够的空间以避免调整内部数组的大小并标记未使用的元素而不是删除它们

冻结症状是因为您正在[UIThread](https://stackoverflow.com/questions/3652560/what-is-the-android-uithread-ui-thread)中进行计算。如果您不希望您的应用程序冻结，您可能需要检查是否[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)在单独的线程上进行计算。

PS：看起来你在那里做了一些无用的操作......为什么`parseDouble()` `secondItem`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:11:12.213

15ms 的暂停不会发生在您的 UI 线程中，因此它们应该不会对性能产生太大影响。如果您的 UI 在您的方法执行时暂停，请考虑在另一个线程上运行它（使用 AsyncTask）

要减少垃圾收集，您需要减少循环内分配的内存量。

我建议看：

1.  在循环外执行 Arrays.asList 函数（理想情况下，在某个地方只执行一次，例如您的构造函数或静态构造函数）
2.  如果您的列表是 LinkedList，请考虑将其更改为 ArrayList
3.  如果您的 List 是一个 ArrayList，请确保使用足够的容量对其进行初始化，这样就不需要调整其大小
4.  考虑让您的列表存储对象而不是字符串，然后您可以在其中存储符号和双精度数，并且不需要从双精度数到字符串的来回转换
5.  考虑编写一个适当的解析器（但这需要更多的工作）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:35:29.493

但是，您使用了很多字符串。虽然情况可能并非如此，但它始终是您可以检查的事情之一，因为 Java 使用 String 做了一些时髦的事情。如果您在输出时必须将字符串转换为双精度，那么就会产生相当多的开销。

您需要将数据存储为字符串吗？（请注意，答案实际上可能是肯定的）大量使用临时字符串实际上会导致垃圾收集器经常被触发。

小心过早的优化。分析器和逐行运行函数可以提供帮助

# gcc - GNU make 自动删除预编译头文件

> ID：12618587
> 
> 赞同：2
> 
> 时间：2012-09-27T09:49:20.140
> 
> 标签：gcc, gnu-make, precompiled-headers

我正在尝试使用 gmake 和 GCC 获得一个预编译的标头来加快我的构建速度。该`.gch`文件已创建，但由于某种原因，它会在构建完成后立即自动删除。

以下是相关规则：

```
cxx_pch := ./bin/analysis.h.gch

bin/%.cpp.o: src/%.cpp $(cxx_includes) $(cxx_pch)
    $(CXX) $(CPPFLAGS) $(CXXFLAGS) $(cxx_include_paths) -H -c -o $@ $<

bin/%.gch: src/pch/%
    $(CXX) $(CPPFLAGS) $(CXXFLAGS) $(cxx_include_paths) -I./src -x c++-header -o $@ $< 
```

我构建时打印的最后一件事是：

```
rm bin/analysis.h.gch 
```

我的任何规则都不可能做到这一点；`clean`只做`rm -r $(output_dir)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:54:46.740

将其标记为`.PRECIOUS:`或`.SECONDARY:`以防止 Make 将其作为中间目标进行清理。另见[http://www.gnu.org/software/make/manual/html_node/Special-Targets.html](http://www.gnu.org/software/make/manual/html_node/Special-Targets.html)

# php - Mongo DB 显示错误致命错误：未捕获的异常 'MongoConnectionException' 并带有消息 'Operation now in progress'

> ID：12618589
> 
> 赞同：1
> 
> 时间：2012-09-27T09:49:35.060
> 
> 标签：php, mongodb

Mongo DB 显示错误致命错误：未捕获的异常 'MongoConnectionException' 在 PHP 中带有消息 'Operation now in progress'。如何解决此错误以及为什么会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:19:22.600

这通常意味着驱动程序在连接到数据库时遇到问题。粘贴您的问题时，我通过 Google 的第一个结果了解到这一点；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:24:15.143

我在尝试连接到 ObjectRocket 时遇到了这个问题。解决方案是将我的 IP 添加到 ACL，然后我不再收到此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:30:36.833

正如 Remon 所说，*“我有一个错误请帮助”*在询问编程问题时效果不佳。

通常要确保的是，Mongodb 正在运行并且您正在连接到正确的，`host:port`例如

`$m = new Mongo();`

如果它不在本地主机（您的机器）和默认端口中，请尝试此操作。

```
$con = new Mongo("mongodb://{$username}:{$password}@{$host}"); 
```

也尝试使用`mongo`shell 接口连接到数据库。

# windows-8 - WinRT 项目中的 CreateFile2 错误 (ERROR_NOT_SUPPORTED_IN_APPCONTAINER)

> ID：12618592
> 
> 赞同：0
> 
> 时间：2012-09-27T09:49:42.167
> 
> 标签：windows-8, windows-runtime, visual-studio-2012, createfile

我只是在 WinRT 中处理一些文件管理 api。*我在../Packages/myApp/LocalState/*中成功创建了文件夹，但是当我尝试在该文件夹中创建新文件（*CreateFile2*）时，我得到了这个

```
error 4252: ERROR_NOT_SUPPORTED_IN_APPCONTAINER
This functionality is not supported in the context of an app container. 
```

代码：

```
localFolder = L"C:\\Users\\Tomas\\AppData\\Local\\Packages\\myApp\\LocalState\\my";
CreateDirectory(localFolder.c_str(),NULL);
localFolder += L"\\MyFile.txt";
CREATEFILE2_EXTENDED_PARAMETERS pCreateExParams;
pCreateExParams.dwSize = sizeof(CREATEFILE2_EXTENDED_PARAMETERS);
pCreateExParams.dwFileAttributes = FILE_ATTRIBUTE_NORMAL;
pCreateExParams.lpSecurityAttributes = NULL;
pCreateExParams.hTemplateFile = NULL;

HANDLE myfile = CreateFile2(localFolder.c_str(), GENERIC_READ|GENERIC_WRITE, FILE_SHARE_READ|FILE_SHARE_WRITE, OPEN_ALWAYS, &pCreateExParams);
int error = GetLastError(); 
```

我做错了什么？我应该在清单中设置一些选项吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:21:28.450

已经发现问题 - 在 pCreateExParams 结构中是 .dwFileFlags 和 .dwSecurityQosFlags 中的一些未定义值。所以这很好用：

```
CREATEFILE2_EXTENDED_PARAMETERS pCreateExParams = {0}; 
```

# java - Java Swing - mouseMoved 事件被缓慢触发

> ID：12618594
> 
> 赞同：4
> 
> 时间：2012-09-27T09:49:42.510
> 
> 标签：java, swing, mouse

目前我在 Java - Swing 中遇到了 mouseMoved 事件的问题。简而言之，我有一个 JPanel 并已将 MouseMotionListener 附加到它，以便即时隐藏或显示 JscrollPane：

```
myPanel.addMouseMotionListener(new MousePresenter()); 
```

我有自己的实现 MouseMotionListener 接口的类：

```
public class MousePresenter implements MouseMotionListener { 

  public void mouseMoved(MouseEvent e) {
   int x = e.getX();
   int y = e.getY();

   if (x>20 && x<200) {
    hideScrollBar();
   }
   else {
    showScrollBar();
   }

  }

} 
```

问题是 mouseMoved 事件没有被足够频繁地触发。在使用 MouseMotionListener 时是否有任何相关的解决方案来解决这个问题？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:02:07.807

以下似乎对我来说很好。请注意，事件的处理相当快：

```
 public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame frame = new JFrame( "TestFrame" );
        JPanel content = new JPanel( new BorderLayout() );

        final JLabel mousePosition = new JLabel( "Unknown" );
        content.add( mousePosition, BorderLayout.NORTH );

        content.addMouseMotionListener( new MouseMotionAdapter() {
          @Override
          public void mouseMoved( MouseEvent e ) {
            mousePosition.setText( "X: " + e.getX() + " Y: " + e.getY() );
          }
        } );
        frame.setContentPane( content );
        frame.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
        frame.pack();
        frame.setVisible( true );
      }
    } );
  } 
```

`hideScrollBar`您的方法可能不是这种情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:55:53.457

鼠标移动事件本质上是缓慢的，因为它会在每个像素更改时触发。

要优化整个问题，您唯一能做的就是优化您在回调处理程序中所做的事情。在你的情况下，你确实有

```
if (something)
  doA();
else
  doB(); 
```

这意味着在任何情况下，您都试图显示或隐藏滚动条，即使它已经显示或隐藏。你可以做的是：

```
if (scrollBarIsVisible && x>20 && x<200) {
  hideScrollBar();
  scrollBarIsVisible = false;
}
else if (!scrollBarIsVisible) {
  showScrollBar();
  scrollBarIsVisible = true;
} 
```

这样您就可以在从边界内部切换到外部时修改元素的可见性（这可能是一项繁重的操作，因为它可能需要重新布局事物），反之亦然。这应该会大大降低计算操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:56:10.303

如果您的所有代码都在 Event Dispatch 线程中执行，则可能会导致问题。看看这[条线索](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，并尝试将任何做大量工作的代码放在[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)线程中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T09:56:21.407

您的代码没有得到很好的优化。事实上，它总是会调用 show 或 hide Scrollbar 方法。您可能应该修改它，例如仅在可见时将其隐藏，仅在隐藏时才显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:50:41.470

问题解决了。我的应用程序中存在某些性能问题，导致了这种延迟。感谢您的努力以及您提供的信息和建议。

# ios6 - UIWebview 未在 IOS 6 上加载

> ID：12618598
> 
> 赞同：3
> 
> 时间：2012-09-27T09:49:48.987
> 
> 标签：ios6

`shouldStartLoadWithRequest:navigationType`和`webViewDidStartLoad`方法`UIWebview`被调用一次，但之后`activityIndicator`继续旋转（从 开始`webViewDidStartLoad`）并且没有任何委托方法`webViewDidFinishLoad`或被`didFailLoadWithError`调用。这只是 IOS 6 上的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:49:24.640

这在 iOS 5 和 6 中对我有用。确保在 Interface Builder 中连接插座。您可能应该做一些检查，看看是否可以访问 Internet。我正在使用 Apple Reachability 课程：

标题：

```
#import <UIKit/UIKit.h>
@interface HelpWebViewController : UIViewController <UIWebViewDelegate>
{
    IBOutlet UIWebView *webView;
    IBOutlet UIActivityIndicatorView *activityIndicator;
}

@property (nonatomic, strong) UIWebView *webView;
@property (nonatomic, strong) UIActivityIndicatorView *activityIndicator;
@property (nonatomic, strong) NSString *webHelpURLString;

- (void)webViewDidStartLoad:(UIWebView *)webView; //a web view starts loading
- (void)webViewDidFinishLoad:(UIWebView *)webView;//web view finishes loading
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error; //web view failed to load

@end 
```

实现文件：

```
 #import "HelpWebViewController.h"
    #import "Reachability.h" // Needs System Configuration Framework

    @interface HelpWebViewController ()

    @end

    @implementation HelpWebViewController

    @synthesize webView = ivWebView;
    @synthesize activityIndicator = ivActivityIndicator;
    @synthesize webHelpURLString = ivWebHelpURLString;

    -(BOOL)reachable {
        Reachability *r = [Reachability reachabilityWithHostName:@"apple.com"];
        NetworkStatus internetStatus = [r currentReachabilityStatus];
        if(internetStatus == NotReachable) {
            return NO;
        }
        return YES;
    }

    - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];    

        NSURL *webHelpURL = [NSURL URLWithString:@"support.apple.com"];
        NSURLRequest *myrequest = [NSURLRequest requestWithURL:webHelpURL];
        [self.webView loadRequest:myrequest];
        self.webView.scalesPageToFit = YES;

        if ([self reachable]) {
            NSLog(@"Reachable");
        }
        else {
            NSLog(@"Not Reachable");
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"cantOpenWebPageAlertTitle", @"Cannot Open Page - UIAlert can't open web page")
                                                            message:NSLocalizedString(@"cantOpenWebPageAlertMessage", @"The page cannot be opened because you're not connected to the Internet.")
                                                           delegate:nil
                                                  cancelButtonTitle:NSLocalizedString(@"cantOpenWebPageAlertOKButton", @"OK - accept alert")
                                                  otherButtonTitles:nil];
            [alert show];
            alert = nil;
        }
    }

    - (void)webViewDidStartLoad:(UIWebView *)webView
    {

       [self.activityIndicator startAnimating];
 }

    - (void)webViewDidFinishLoad:(UIWebView *)webView
    {
        [self.activityIndicator stopAnimating];
    }

    - (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
    {
        [self.activityIndicator stopAnimating];
    }

    @end 
```

# android - 将 Matlab 与 Android 和 Windows 手机应用程序一起使用

> ID：12618601
> 
> 赞同：1
> 
> 时间：2012-09-27T09:49:54.150
> 
> 标签：android, windows-phone-7, matlab, signal-processing

我对移动开发平台相当陌生。我想知道是否可以在 Android 和 Windows 手机应用程序中使用 Matlab 脚本。或者是否有其他一些可用的图像处理库！

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:03:51.423

有一个适用于 iOS的官方**Matlab 移动应用程序：http:** [//www.mathworks.de/mobile/](http://www.mathworks.de/mobile/)

对于 android，有**Matlab Connect**，但是 Mathworks 似乎不支持它：https: [//play.google.com/store/apps/details? id=com.chschmid.mlconnectfree&hl=en](https://play.google.com/store/apps/details?id=com.chschmid.mlconnectfree&hl=en)

在 Android 上运行的 Matlab 克隆是**Addi**：[http ://www.walkingrandomly.com/?p=3908](http://www.walkingrandomly.com/?p=3908)

# php - phpunit 3.7：@assert 注释发生了什么？

> ID：12618602
> 
> 赞同：8
> 
> 时间：2012-09-27T09:49:57.690
> 
> 标签：php, phpunit

我有 phpunit 3.7

*   在[3.6 的文档附录 B 中，](http://www.phpunit.de/manual/3.6/en/appendixes.annotations.html)有一个`@assert` 注释，而
*   在3.7的文档中，[附录B，](http://www.phpunit.de/manual/3.7/en/appendixes.annotations.html) 没有**注释** `@assert`

[官方公告](http://sebastian-bergmann.de/archives/923-PHPUnit-3.7.html)提到了一些新的注解（以及重新引入了一个以前不推荐使用的旧注解），但没有提到删除`@assert`. 在[3.7 的更新日志中。](https://github.com/sebastianbergmann/phpunit/blob/3.7/ChangeLog.md),`@assert`在页面上找不到

当我使用[代码片段在一个类上运行我的代码时](http://www.sitepoint.com/advanced-phpunit-testing-annotations-and-mocking/)

```
<?php
class MyMathClass
{
   /**
    * Add two given values together and return sum
    * @assert (1,2) == 3
    */
   public function addValues($a,$b)
   {
       return $a+$b;
   }
} 
```

输出是

```
PHPUnit 3.7.1 by Sebastian Bergmann.

Time: 1 second, Memory: 4.25Mb

No tests executed! 
```

使用 php 3.6.2

```
 phpunit MyMathClass.php
PHPUnit 3.6.12 by Sebastian Bergmann.

.

Time: 0 seconds, Memory: 2.75Mb

OK (1 test, 1 assertion) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T14:10:24.290

在做一些研究后回答我自己的问题。感谢评论者让我走上正轨。

注释已消失，因为它已移至**可选**的PHPUnit_SkeletonGenerator 包。

此时，有两个令人困惑的问题：

1.  从 phpunit“核心”中删除 @assert 注释
2.  文档未正确更新

变更日志不准确。它说（错误地）：

> 删除了已弃用的 --skeleton-class 和 --skeleton-test 开关。该功能现在由PHPUnit_SkeletonGenerator 包的 phpunit- *skel命令提供。*

更好的说法听起来更像这样：

> 删除了已弃用的 --skeleton-class 和 --skeleton-test 开关。该功能现在由 PHPUnit_SkeletonGenerator 包的可选 phpunit *-skelgen命令提供。*因此，@assert 注释已从 phpunit 核心中删除。它在通过 PEAR 安装 PHPUnit_SkeletonGenerator 后可用。

也许我会通过 github 自己更改它并通知维护人员。

# sql - 对具有不同属性的实体进行建模的最佳方法是什么？

> ID：12618604
> 
> 赞同：2
> 
> 时间：2012-09-27T09:50:04.193
> 
> 标签：sql, postgresql, attributes, entity, entity-relationship

假设我正在编写 MMORPG。我建模了一个实体`character`，它可以具有多种属性，例如、`coating`等。因为我事先不知道这些属性（它们是什么以及有多少），所以我以为我为它创建了一个额外的表，如下所示：`strength``color`

```
CREATE TABLE character (INTEGER id, VARCHAR name, INTEGER player_id); 
```

和

```
CREATE TABLE attributes (INTEGER character_id, VARCHAR key, VARCHAR value); 
```

然后，我将能够引入许多新属性。但是，我将如何查询此构造？查询

```
SELECT * FROM character JOIN attributes ON character.id=attributes.character_id; 
```

显然只适用于单个属性。我必须多次加入`attributes`表格还是有其他解决方案？

有没有办法让`attribute.value`零件有不同的类型？以我现在的方式做这件事会限制我的`VARCHAR`代表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T10:18:23.023

另一种可能性是使用[hstore](http://www.postgresql.org/docs/9.0/static/hstore.html)代替 EAV 模型。

```
CREATE TABLE character (id INTEGER, name VARCHAR,
                        player_id INTEGER, attributes hstore); 
```

这样您就可以将属性存储为映射（键 - 值）。

```
insert into character (id, name, player_id, attributes)
values (1, 'test', 1, '"attribute1"=>"value1","attribute2"=>"value2"')
      ,(2, 'test', 1, '"attribute1"=>"value1","attribute3"=>"value3"');

select (each(attributes)).key, (each(attributes)).value 
from character where id = 1;

  key text    value text
  --------------------------
   attribute1   value1
   attribute2   value2

select id, attributes->'attribute3' as value 
from character WHERE exist(attributes,'attribute3');

  id    value
  ---------------
   2   "value3" 
```

希望这可以帮助。

**更新**

我做了一个小基准来比较 hstore 和两个表。

```
CREATE OR REPLACE FUNCTION create_dummy_data()
RETURNS integer AS
$BODY$
DECLARE
   cont1       INTEGER;
   cont2       INTEGER;
   sqlInsert   VARCHAR;

BEGIN
   CREATE TABLE character (id INTEGER PRIMARY KEY
                          ,name VARCHAR
                          ,player_id INTEGER);

   CREATE TABLE attributes (character_id INTEGER
                           ,key VARCHAR
                           ,value VARCHAR
                           ,FOREIGN KEY (character_id) REFERENCES character);

   cont1 := 1;
   WHILE cont1 < 10000 LOOP
      sqlInsert := 'INSERT INTO character (id, name, player_id) VALUES (' || cont1 || ', ''character' || cont1 || ''', ' || cont1 || ');';
      EXECUTE sqlInsert;
      cont1 := cont1 + 1;
   END LOOP;

   cont1 := 1;
   WHILE cont1 < 10000 LOOP
      cont2 := 1;
      WHILE cont2 < 10 LOOP   
         sqlInsert := 'INSERT INTO attributes (character_id, key, value) VALUES (' || cont1 || ', ''key' || cont2 || ''', ' || cont2 || ');';
         EXECUTE sqlInsert;
         cont2 := cont2 + 1;
      END LOOP;       
      cont1 := cont1 + 1;
    END LOOP;

    CREATE TABLE character_hstore (id INTEGER
                                  ,name VARCHAR
                                  ,player_id INTEGER
                                  ,attributes hstore);
    cont1 := 1;
    WHILE cont1 < 10000 LOOP
       sqlInsert := 'INSERT INTO character_hstore (id, name, player_id, attributes) VALUES (' || cont1 || ', ''character' || cont1 || ''', ' || cont1 || ', ''"key1"=>"1","key2"=>"2","key3"=>"3","key4"=>"4","key5"=>"5"'');';
       EXECUTE sqlInsert;
       cont1 := cont1 + 1;
    END LOOP;   

    RETURN 1;
 END;
 $BODY$
 LANGUAGE plpgsql;

 select * from create_dummy_data();

 DROP FUNCTION create_dummy_data(); 
```

我得到了以下结果：

```
explain analyze
SELECT ca.* 
FROM character ca
JOIN attributes at ON ca.id = at.character_id
WHERE at.value = '1';
"Hash Join  (cost=288.98..2152.77 rows=10076 width=21) (actual time=2.788..23.186 rows=9999 loops=1)"

CREATE INDEX ON attributes (value);

explain analyze
SELECT ca.* 
FROM character ca
JOIN attributes at ON ca.id = at.character_id
WHERE at.value = '1';
"Hash Join  (cost=479.33..1344.18 rows=10076 width=21) (actual time=4.330..13.537 rows=9999 loops=1)" 
```

并使用 hstore：

```
explain analyze
SELECT * 
FROM character_hstore
WHERE attributes @> 'key1=>1';
"Seq Scan on character_hstore  (cost=0.00..278.99 rows=10 width=91) (actual time=0.012..3.530 rows=9999 loops=1)"

explain analyze
SELECT * 
FROM character_hstore
WHERE attributes->'key1' = '1';
"Seq Scan on character_hstore  (cost=0.00..303.99 rows=50 width=91) (actual time=0.016..4.806 rows=9999 loops=1)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:26:06.923

您所描述的是实体-属性-值模型。Google EAV，你会发现很多关于它的信息。

是的，查询是这种查询的一大缺点。选择变得非常大、复杂并且可能很慢。

正如@dotore 所描述的，有一些数据库特定的功能可用：

```
CREATE TABLE character (INTEGER id, VARCHAR name,
                    INTEGER player_id, attributes hstore); 
```

您可以阅读有关[hstore 的更多信息，请点击链接](http://www.postgresql.org/docs/9.0/static/hstore.html)。

如果此实体是您的应用程序的中心，您可能需要考虑为此类数据使用专用的键值存储。例如[CouchDB](http://couchdb.apache.org/)

# php - debian (lenny) 服务器上的 file_get_contents 失败

> ID：12618605
> 
> 赞同：0
> 
> 时间：2012-09-27T09:50:04.880
> 
> 标签：php, debian

不知道是不是因为它已经过时了，但它一直在运行一个网站并且直到最近（1 周）才工作——服务器还没有更新，所以我不确定发生了什么破坏了脚本。

这是我一直在 debian 服务器上运行（但失败）的测试脚本：

```
<?php
$url = "http://www.andyloughran.co.uk/test.html";
echo $url."\n";
$test = file_get_contents($url);
echo $test; 
```

这通常应该返回“ndy test”或类似的东西。

但是，在 debian 机器上，它只是超时了。

我已经检查过了，我可以 wget 文件：

```
<?php
exec('wget http://www.andyloughran.co.uk/test.html'); 
```

所以我不确定 file_get_contents 中有什么不起作用。

我已经检查过并且 allow_fopen_url 设置为 On。

我不仅可以提供解决此问题的建议，还可以研究如何调试 php 以便将来能够自己识别问题。

目前，Curl 并不是一个真正的选择，因为我更感兴趣的是找出它停止工作的原因，而不是替代方案。

谢谢！

这是 strace 错误：

```
open("/dev/urandom", O_RDONLY)          = 3
read(3, "\202\231\320\206"..., 4)       = 4
close(3)                                = 0
open("/dev/urandom", O_RDONLY)          = 3
read(3, "cdO\37"..., 4)                 = 4
close(3)                                = 0
brk(0x9133000)                          = 0x9133000
open("http_test.php", O_RDONLY|O_LARGEFILE) = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=187, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7837000
read(3, "<?php\n\nini_set('display_errors', "..., 4096) = 187
_llseek(3, 0, [0], SEEK_SET)            = 0
time(NULL)                              = 1348748612
fstat64(0, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 0), ...}) = 0
fstat64(0, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 0), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7836000
_llseek(0, 0, 0xbfae579c, SEEK_CUR)     = -1 ESPIPE (Illegal seek)
fstat64(1, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 0), ...}) = 0
fstat64(1, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 0), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7835000
_llseek(1, 0, 0xbfae579c, SEEK_CUR)     = -1 ESPIPE (Illegal seek)
fstat64(2, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 0), ...}) = 0
_llseek(2, 0, 0xbfae579c, SEEK_CUR)     = -1 ESPIPE (Illegal seek)
getcwd("/root"..., 4096)                = 6
time(NULL)                              = 1348748612
lstat64("/root", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
lstat64("/root/http_test.php", {st_mode=S_IFREG|0644, st_size=187, ...}) = 0
ioctl(3, SNDCTL_TMR_TIMEBASE or TCGETS, 0xbfae3798) = -1 ENOTTY (Inappropriate ioctl for device)
read(3, "<?php\n\nini_set('display_errors', "..., 8192) = 187
read(3, ""..., 4096)                    = 0
read(3, ""..., 8192)                    = 0
close(3)                                = 0
munmap(0xb7837000, 4096)                = 0
write(1, "http://www.andyloughran.co.uk/tes"..., 40http://www.andyloughran.co.uk/test.html
) = 40
socket(PF_INET6, SOCK_DGRAM, IPPROTO_IP) = 3
close(3)                                = 0
socket(PF_NETLINK, SOCK_RAW, 0)         = 3
bind(3, {sa_family=AF_NETLINK, pid=0, groups=00000000}, 12) = 0
getsockname(3, {sa_family=AF_NETLINK, pid=28901, groups=00000000}, [12]) = 0
time(NULL)                              = 1348748612
sendto(3, "\24\0\0\0\26\0\1\3DEdP\0\0\0\0\0\0\0\0"..., 20, 0, {sa_family=AF_NETLINK, pid=0, groups=00000000}, 12) = 20
recvmsg(3, {msg_name(12)={sa_family=AF_NETLINK, pid=0, groups=00000000}, msg_iov(1)=[{"0\0\0\0\24\0\2\0DEdP\345p\0\0\2\10\200\376\1\0\0\0\10\0\1\0\177\0\0\1\10"..., 4096}], msg_controllen=0, msg_flags=0}, 0) = 156
recvmsg(3, {msg_name(12)={sa_family=AF_NETLINK, pid=0, groups=00000000}, msg_iov(1)=[{"@\0\0\0\24\0\2\0DEdP\345p\0\0\n\200\200\376\1\0\0\0\24\0\1\0\0\0\0\0\0"..., 4096}], msg_controllen=0, msg_flags=0}, 0) = 64
recvmsg(3, {msg_name(12)={sa_family=AF_NETLINK, pid=0, groups=00000000}, msg_iov(1)=[{"\24\0\0\0\3\0\2\0DEdP\345p\0\0\0\0\0\0\1\0\0\0\24\0\1\0\0\0\0\0\0"..., 4096}], msg_controllen=0, msg_flags=0}, 0) = 20
close(3)                                = 0
stat64("/etc/resolv.conf", {st_mode=S_IFREG|0644, st_size=95, ...}) = 0
open("/etc/hosts", O_RDONLY|O_CLOEXEC)  = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=141, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7837000
read(3, "127.0.0.1 localhost.localdomain l"..., 4096) = 141
read(3, ""..., 4096)                    = 0
close(3)                                = 0
munmap(0xb7837000, 4096)                = 0
open("/etc/hosts", O_RDONLY|O_CLOEXEC)  = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=141, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7837000
read(3, "127.0.0.1 localhost.localdomain l"..., 4096) = 141
read(3, ""..., 4096)                    = 0
close(3)                                = 0
munmap(0xb7837000, 4096)                = 0
open("/etc/ld.so.cache", O_RDONLY)      = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=32850, ...}) = 0
mmap2(NULL, 32850, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb7820000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/libnss_dns.so.2", O_RDONLY)  = 3
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0\220\v\0\0004\0\0\0x"..., 512) = 512
fstat64(3, {st_mode=S_IFREG|0644, st_size=17880, ...}) = 0
mmap2(NULL, 20616, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0xca5000
mmap2(0xca9000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x3) = 0xca9000
close(3)                                = 0
munmap(0xb7820000, 32850)               = 0
stat64("/etc/resolv.conf", {st_mode=S_IFREG|0644, st_size=95, ...}) = 0
gettimeofday({1348748612, 441933}, NULL) = 0
socket(PF_INET, SOCK_DGRAM, IPPROTO_IP) = 3
connect(3, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("8.8.8.8")}, 28) = 0
fcntl64(3, F_GETFL)                     = 0x2 (flags O_RDWR)
fcntl64(3, F_SETFL, O_RDWR|O_NONBLOCK)  = 0
gettimeofday({1348748612, 442194}, NULL) = 0
poll([{fd=3, events=POLLOUT}], 1, 0)    = 1 ([{fd=3, revents=POLLOUT}])
send(3, "2k\1\0\0\1\0\0\0\0\0\0\3www\fandyloughran\2co\2"..., 40, MSG_NOSIGNAL) = 40
poll([{fd=3, events=POLLIN}], 1, 5000)  = 1 ([{fd=3, revents=POLLIN}])
ioctl(3, FIONREAD, [102])               = 0
recvfrom(3, "2k\201\200\0\1\0\0\0\1\0\0\3www\fandyloughran\2co\2"..., 1024, 0, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("8.8.8.8")}, [16]) = 102
close(3)                                = 0
gettimeofday({1348748612, 755352}, NULL) = 0
socket(PF_INET, SOCK_DGRAM, IPPROTO_IP) = 3
connect(3, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("8.8.8.8")}, 28) = 0
fcntl64(3, F_GETFL)                     = 0x2 (flags O_RDWR)
fcntl64(3, F_SETFL, O_RDWR|O_NONBLOCK)  = 0
gettimeofday({1348748612, 755589}, NULL) = 0
poll([{fd=3, events=POLLOUT}], 1, 0)    = 1 ([{fd=3, revents=POLLOUT}])
send(3, "\312-\1\0\0\1\0\0\0\0\0\0\3www\fandyloughran\2co\2"..., 56, MSG_NOSIGNAL) = 56
poll([{fd=3, events=POLLIN}], 1, 5000)  = 1 ([{fd=3, revents=POLLIN}])
ioctl(3, FIONREAD, [121])               = 0
recvfrom(3, "\312-\201\203\0\1\0\0\0\1\0\0\3www\fandyloughran\2co\2"..., 1024, 0, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("8.8.8.8")}, [16]) = 121
close(3)                                = 0
stat64("/etc/resolv.conf", {st_mode=S_IFREG|0644, st_size=95, ...}) = 0
gettimeofday({1348748613, 222946}, NULL) = 0
socket(PF_INET, SOCK_DGRAM, IPPROTO_IP) = 3
connect(3, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("8.8.8.8")}, 28) = 0
fcntl64(3, F_GETFL)                     = 0x2 (flags O_RDWR)
fcntl64(3, F_SETFL, O_RDWR|O_NONBLOCK)  = 0
gettimeofday({1348748613, 223253}, NULL) = 0
poll([{fd=3, events=POLLOUT}], 1, 0)    = 1 ([{fd=3, revents=POLLOUT}])
send(3, "\254Q\1\0\0\1\0\0\0\0\0\0\3www\fandyloughran\2co\2"..., 40, MSG_NOSIGNAL) = 40
poll([{fd=3, events=POLLIN}], 1, 5000)  = 1 ([{fd=3, revents=POLLIN}])
ioctl(3, FIONREAD, [56])                = 0
recvfrom(3, "\254Q\201\200\0\1\0\1\0\0\0\0\3www\fandyloughran\2co\2"..., 1024, 0, {sa_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("8.8.8.8")}, [16]) = 56
close(3)                                = 0
gettimeofday({1348748613, 400717}, NULL) = 0
socket(PF_INET, SOCK_STREAM, IPPROTO_IP) = 3
fcntl64(3, F_GETFL)                     = 0x2 (flags O_RDWR)
fcntl64(3, F_SETFL, O_RDWR|O_NONBLOCK)  = 0
connect(3, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr("85.119.82.243")}, 16) = -1 EINPROGRESS (Operation now in progress)
poll([{fd=3, events=POLLIN|POLLOUT|POLLERR|POLLHUP}], 1, 60000) = 1 ([{fd=3, revents=POLLOUT}])
getsockopt(3, SOL_SOCKET, SO_ERROR, [0], [4]) = 0
fcntl64(3, F_SETFL, O_RDWR)             = 0
send(3, "GET /test.html HTTP/1.0\r\n"..., 25, MSG_DONTWAIT) = 25
send(3, "Host: www.andyloughran.co.uk\r\n"..., 30, MSG_DONTWAIT) = 30
send(3, "User-Agent: PHP\r\n"..., 17, MSG_DONTWAIT) = 17
send(3, "\r\n"..., 2, MSG_DONTWAIT)     = 2
poll([{fd=3, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 1, 0) = 0 (Timeout)
poll([{fd=3, events=POLLIN|POLLERR|POLLHUP}], 1, 60000^C <unfinished ...> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:24:32.277

*   allow_url_fopen = 在 php.ini 中打开
*   检查您的 DNS，ping www.andyloughran.co.uk
*   将服务器扔出最近的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:29:49.470

不久前我有同样的问题。这是一个 DNS 问题。重新启动网络服务器有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T12:39:39.823

file_get_contents 不适用于 URI。试试这个：

```
$Stuff = file_get_contents($_SERVER['DOCUMENT_ROOT']."path/filename"); 
```

file_get_contents 将很高兴“看到”一个本地且可访问的路径。它会将文件内容呈现为一种“功能感谢”；）

# php - php curl获取代理

> ID：12618607
> 
> 赞同：2
> 
> 时间：2012-09-27T09:50:07.367
> 
> 标签：php, windows, curl

我在 Windows 中使用 PHP 脚本发出 curl 请求以成功发出 SOAP 请求，并且我试图准确地追踪这个成功的请求是如何在 C#.NET 中复制它的。

如何使用 PHP 检测`curl`将使用哪个代理服务器？

[我希望php curl](http://php.net/manual/en/book.curl.php)`curl_getopt`中可能有一个，所以我可以做类似的事情：

```
curl_getopt(CURLOPT_PROXY); 
```

但可惜它不存在。

有什么方法可以让我找出将通过哪个代理服务器`php curl`进行连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:53:24.300

### 1\. 你告诉 curl 使用什么代理，而不是 viaversa：

```
function wget($url)
{
    $options = array(
        CURLOPT_URL             => $url,
        CURLOPT_HEADER          => false,
        CURLOPT_FOLLOWLOCATION  => true,
        CURLOPT_RETURNTRANSFER  => true,
        CURLOPT_TIMEOUT         => 30,
        CURLOPT_PROXY           => '...proxy.ip...',
        CURLOPT_PROXYPORT       => '...proxy.port...',
        CURLOPT_USERAGENT       => 'Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.8.0.9) Gecko/20061206 Firefox/1.5.0.9',
    );
    $ch = curl_init();
    curl_setopt_array($ch, $options);
    $content = curl_exec($ch);
    $error = curl_error($ch);
    return (!$error && $content) ? $content : null;
} 
```

### 2.另一种解决方案 >

并查看此答案>[如何获取先前使用 curl_setopt() 设置的选项？](https://stackoverflow.com/questions/5356075/how-to-get-an-option-previously-set-with-curl-setopt)

### 3\. 重写 curl_setopt() 函数

[http://php.net/manual/en/function.override-function.php](http://php.net/manual/en/function.override-function.php)

ps你可能需要[http://php.net/manual/en/function.rename-function.php](http://php.net/manual/en/function.rename-function.php)

### 4.使用runkit覆盖函数

[http://php.net/manual/en/book.runkit.php](http://php.net/manual/en/book.runkit.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:09:30.043

如果它使用与您的 Windows 配置相同的配置，您应该能够像这样找到它（未经测试，因为我没有 Windows 服务器）：

```
<?php
    $proxyServerString = shell_exec('reg query "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings" | find /i "proxyserver"');
    $proxyServerString = trim($proxyServerString);
    /*
        $proxyServerString should be 'ProxyServer    REG_SZ    http=127.0.0.1:8888;https=127.0.0.1:8888'
    */
    preg_match("/ProxyServer *REG_SZ *(.*)/i", $proxyServerString, $match);
    /*
        $match[1] will be something like 'http=127.0.0.1:8888;https=127.0.0.1:8888'
    */
    $proxyServersTemp = explode(";", $match[1]);
    $proxyServers = array();
    foreach ($proxyServersTemp as $proxyServerTemp) {
        preg_match("/^(.*?)=(.*?):(.*?)$/", $proxyServerTemp, $proxyMatch);
        $proxyServers[] = array(
            "protocol" => $proxyMatch[1],
            "address" => $proxyMatch[2],
            "port" => $proxyMatch[3]
        );
    }
    print_r($proxyServers);
?> 
```

`$proxyServers`现在应该包含如下内容：

```
Array
(
    [0] => Array
        (
            [protocol] => http
            [address] => 127.0.0.1
            [port] => 8888
        )

    [1] => Array
        (
            [protocol] => https
            [address] => 127.0.0.1
            [port] => 8888
        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:59:24.433

一种方法是，您可以向`www.whatismyip.com`或类似站点发出 curl 请求并检查 html 响应以找出您正在使用的代理（如果您是）。

# forms - 玩2形式限制

> ID：12618609
> 
> 赞同：6
> 
> 时间：2012-09-27T09:50:16.963
> 
> 标签：forms, validation, scala, playframework, playframework-2.0

我正在尝试通过远程身份验证服务对用户进行身份验证。我已经编写了将消息发送到服务并等待结果的辅助方法：

```
def authenticateAwait(email:       String,
                      password:    String
                     ): Either[String, Option[User]] = {
  try {
    val future = authenticate(email, password)
    Right(Await.result(future, timeout.duration))
  } catch {
    case _ ⇒ Left("Unable to connect to authentication server")
  }
} 
```

`Left[String]`如果无法发送消息或没有响应，则返回错误描述。如果收到服务响应，则返回`Right[Option[User]]`。`Option[User]`服务根据身份验证结果进行响应。

为了执行实际的身份验证，我使用几个验证器创建了表单，这里是：

```
val loginForm = Form(
  tuple(
    "email"    → email,
    "password" → nonEmptyText
  ) verifying ("Invalid email or password", result => result match {
    case (email, password) ⇒
      User.authenticateAwait(email, password) match {
        case Left(_) ⇒ true
        case Right(optUser) ⇒ optUser.isDefined
      }
  }) verifying ("Unable to connect to authentication server", result => result match {
    case (email, password) ⇒
      User.authenticateAwait(email, password) match {
        case Left(_) ⇒ false
        case Right(optUser) ⇒ true
      }
  })
) 
```

有一件事让我担心这段代码，它调用`authenticateAwait`了两次。这意味着每次验证将发送两条消息。我真正需要的是调用`authenticateAwait`一次，存储结果并对其执行各种验证。似乎没有简单的解决方案。

要执行身份验证，访问所需的表单字段，这意味着应该绑定然后验证表单，但是没有办法将错误附加到现有表单（我错了吗？）。

错误只能在创建过程中附加到表单，因此我应该在验证器中执行身份验证，但随后会出现上述问题。

我带来的临时解决方案是在其中定义一个方法和一个`var`。

```
def loginForm = {
  var authResponse: Either[String, Option[commons.User]] = null

  Form(
    tuple(
      "email"    → email,
      "password" → nonEmptyText
    ) verifying ("Invalid email or password", result ⇒ result match {
      case (email, password) ⇒
        authResponse = User.authenticateAwait(email, password)
        authResponse match {
          case Left(_) ⇒ true
          case Right(optUser) ⇒ optUser.isDefined
        }
    }) verifying ("Unable to connect to authentication server", result ⇒ result match {
      case (email, password) ⇒
        authResponse match {
          case Left(_) ⇒ false
          case Right(optUser) ⇒ true
        }
    })
  )
} 
```

这显然是一个 hack。有没有更好的解决方案？

**更新：** 在我看来，表单应该只清理输入，但稍后应该在表单之外执行身份验证。问题是错误作为 的一部分发送到视图，`Form`并且不可能将错误附加到现有表单。也没有简单的方法可以创建带有错误的新表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:01:12.947

您必须了解的是 Form 是不可变的。但是有一个易于使用的实用方法来构造一个添加了错误的新表单：

```
loginForm.copy(errors = Seq(FormError("email", "Already registered"))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:20:58.020

当然，将身份验证与验证混为一谈只会使简单的操作变得复杂。下面是未经测试的，但这是我要进入的方向，正确的预测通过理解过滤。

```
// point of validation is to sanitize inputs last I checked
val form = Form(tuple("email"→ email, "password"→ nonEmptyText)
val res = for{
  case(e,p) <- form.bindFromRequest.toRight("Invalid email or password")
  success   <- User.authenticateAwait(e,p).right 
} yield success
res fold( Conflict(Left(_)), u=> Ok(Right(u)) ) 
```

# android - Android中是否存在一组大于屏幕尺寸的预览尺寸？

> ID：12618630
> 
> 赞同：0
> 
> 时间：2012-09-27T09:51:12.960
> 
> 标签：android

我的手机（屏幕）是 1280X720。
从`parameters.getSupportedPreviewSizes()`，不存在大于 1280X720 的一种尺寸。
有谁知道是否有一些设备存在一组预览尺寸大于 Android 中的屏幕尺寸？
从我的角度来看，如果预览尺寸大于屏幕尺寸，那是没有用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:45:31.647

不，它不是无用的，如果需要，您可以将预览图像捕获为实际图片。

有比屏幕尺寸更大的预览尺寸，我认为几乎所有具有 800x480 分辨率和 5MP 相机（Galaxy S 系列）的手机的最大预览尺寸为 1280x720。

在分辨率较低的手机 (480x320) 上，您可以找到可以提供 800x600 预览尺寸的不错的相机。

比屏幕尺寸更大的预览尺寸的最佳用途是提供高质量的缩放。

# asp.net-mvc - 如何在本地数据库上实现 windows azure 缓存？

> ID：12618631
> 
> 赞同：0
> 
> 时间：2012-09-27T09:51:22.750
> 
> 标签：asp.net-mvc, azure, azure-connect

我正在使用 asp.net mvc 作为 web 角色在 windows azure 上工作。我正在尝试从 azure 窗口连接到我的本地数据库，并且我成功连接到了我的本地数据库。现在我的网站性能很差，因为我的表有很多记录。为了提高性能，我决定使用 Windows azure 缓存。我需要使用 CRUD 操作在表中显示所有记录，并且每次对数据进行操作时，我都需要对数据的缓存版本进行操作。我关注了一些来自 msdn 的链接，

[http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_buildingappswithcacheservice_topic4#_Toc310505084](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_buildingappswithcacheservice_topic4#_Toc310505084)

但我不完全清楚该怎么做。所以请指导我在本地数据库上实现 Windows azure 缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:58:06.127

当我遇到这个问题时，本教程对我很有帮助 [http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)

特别是在网络配置中

```
 <caching>
      <outputCacheSettings>
        <outputCacheProfiles>
           <add name="Cache1Hour" duration="3600" varyByParam="none"/>
        </outputCacheProfiles>
      </outputCacheSettings>
    </caching> 
```

# jquery - 切换 html 值

> ID：12618638
> 
> 赞同：0
> 
> 时间：2012-09-27T09:51:50.363
> 
> 标签：jquery, html

> **可能重复：**
> [切换按钮和切换可见性](https://stackoverflow.com/questions/2652119/toggle-button-and-toggle-visibility)

我在一个页面上有一段文字，它充当一个按钮，

```
<span class="button">Show Activities</span> 
```

当您单击它时，它会隐藏或显示一些 html。我想更改它的html，所以我尝试了这个

```
$('.button').click(function() {
    $(this).siblings('.overview').slideToggle('slow');
    $(this).html("<span>Hide activities</span>")
}); 
```

它更改了 html 的文本，但我希望它在我再次单击它时变回来。是否有类似切换的功能，但可以将 html 重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:55:10.697

我相信您正在考虑的选择器是跨度的“innerHTML”，一旦您完成显示文本，您可以在 javascript 中更改它，以便“显示活动”更改为“隐藏活动”，然后只写一个与“显示活动”代码完全相反的小功能。:)

```
<span class="button" id="hideShow">Show Activities</span> 
```

然后在你的javascript中：

```
var elem = document.getElementById('hideShow');
elem.innerHTML = "Hide Activities"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:55:12.437

我想这可以帮助你

[http://www.wikihow.com/Toggle-HTML-Display-With-JavaScript](http://www.wikihow.com/Toggle-HTML-Display-With-JavaScript)

```
var textHidden = true;
function toggle() {
var ele = document.getElementById("toggleText");
var text = document.getElementById("displayText");
if(textHidden) {
    ele.style.display = "inline";
    text.innerHTML = "Show";
    textHidden = false

}
else {
    textHidden = true
    ele.style.display = "none";
    text.innerHTML = "Hide";

}
}​ 
```

html

```
<a id="displayText" href="#" onclick="toggle();">Show Further Details Specification</a>    
<div id="toggleText" style="display:none;"><h1>peek-a-boo</h1></div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:56:25.320

只需使用以下`text()`方法：

```
$(this).text(
    function(i,t) {
        return t.indexOf('Hide') !== -1 ? 'Show activities' : 'Hide activities';
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7N2qH/1/)。

此外，缓存您的`$(this)`对象以减少*每次调用时`$(this)`*的 DOM 遍历：

```
$('.button').click(function() {
    var that = $(this);
    that.siblings('.overview').slideToggle('slow');
    that.text(function(i, t) {
        return t.indexOf('Hide') !== -1 ? 'Show activities' : 'Hide activities';
    });
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7N2qH/2/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:56:50.720

```
var a=false;

$('.button').click(function() {
    $(this).siblings('.overview').slideToggle('slow');
    if(!a){
    $(this).html("Hide activities");
    a=true;
    }
else
{
$(this).html("Show activities");
    a=false;
}

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T09:57:31.817

试试这个

```
var text = $(this).text() == 'Show Activities' ? 'Hide Activities' : 'Show Activities';
$(this).html(text); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T10:24:43.310

看一下这个！...

> $('.button').click(function() {
> 
> ```
> $(this).siblings('.overview').slideToggle('slow');
> 
> if($(this).text() == 'Show Activities')
>     $(this).text('Hide Activities');
> else
>     $(this).text('Show Activities'); 
> ```
> 
> });

# ruby - Ruby中的有序数组重复

> ID：12618639
> 
> 赞同：0
> 
> 时间：2012-09-27T09:51:55.603
> 
> 标签：ruby, arrays

```
x = []
a = [1,2,3]
a.each{|i| x<<i; x<<i} 
```

回报：

`[1,1,2,2,3,3]`

Ruby 是否有内置或更快的方法来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:17:01.787

```
a = [1, 2, 3]
n = 2

a.flat_map {|i| [i]*n} # => [1, 1, 2, 2, 3, 3] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:56:11.950

```
a = [1,2,3]
a = (a*2).sort
#=> [1,1,2,2,3,3]
a.map{ |i| [i,i] }.flatten
#=> [1,1,2,2,3,3] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:00:12.887

```
a.zip(a).flatten 
```

或者，如果您需要重复`n`次数，

```
a.zip(*[a]*(n-1)).flatten 
```

基于注入的（技术上，each_with_object）：

```
a.each_with_object([]){|e, acc| n.times{acc << e}} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T10:05:35.567

一般来说：

```
Benchmark.measure{1000000.times{x=[]; a.each{|i| x<<i; x<<i}}}
1.530000   0.000000   1.530000 (  1.552974)

Benchmark.measure{1000000.times{a.zip(a).flatten}}
4.140000   0.000000   4.140000 (  4.136788)

Benchmark.measure{1000000.times{a.collect{|i| [i, i]}.flatten}}
4.150000   0.000000   4.150000 (  4.158172) 
```

在这种特定情况下，fl00r 的答案是最快的：

```
Benchmark.measure{1000000.times{(a*2).sort}}
1.170000   0.000000   1.170000 (  1.173677) 
```

# c# - 缩放时线条消失（使用“动态数据显示”）

> ID：12618640
> 
> 赞同：1
> 
> 时间：2012-09-27T09:52:02.267
> 
> 标签：c#, wpf, dynamic-data-display

在我的 WPF 项目中，我使用[动态数据显示](http://dynamicdatadisplay.codeplex.com)来绘制图表。我在某处读到，如果您放大非常深，线条消失（未绘制）是一个常见错误。

有没有人解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:38:35.777

虽然不是针对您的错误的精确解决方案，但您可以通过使用缩放限制将用户放大得太深来阻止用户。这样，用户将永远不会通过放大那么深来体验这个错误。您可以找到此错误发生的缩放比例，并限制该 DataRect 的缩放比例。我编写了自己的类来限制 D3 中的缩放，并将为您提供。

这里：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;

namespace Microsoft.Research.DynamicDataDisplay.ViewportRestrictions {
/// <summary>
/// Represents a restriction, which limits the maximal size of <see cref="Viewport"/>'s Visible property.
/// </summary>
public class ZoomInRestriction : ViewportRestriction {
    /// <summary>
    /// Initializes a new instance of the <see cref="MaximalSizeRestriction"/> class.
    /// </summary>
    public ZoomInRestriction() { }

    /// <summary>
    /// Initializes a new instance of the <see cref="MaximalSizeRestriction"/> class with the given maximal size of Viewport's Visible.
    /// </summary>
    /// <param name="maxSize">Maximal size of Viewport's Visible.</param>
    public ZoomInRestriction(double height, double width) {
        Height = height;
        Width = width;
    }

    private double height;
    private double width;

    public double Height {
        get { return height; }
        set {
            if (height != value) {
                height = value;
                RaiseChanged();
            }
        }
    }

    public double Width {
        get { return width; }
        set {
            if (width != value) {
                width = value;
                RaiseChanged();
            }
        }
    }

    /// <summary>
    /// Applies the specified old data rect.
    /// </summary>
    /// <param name="oldDataRect">The old data rect.</param>
    /// <param name="newDataRect">The new data rect.</param>
    /// <param name="viewport">The viewport.</param>
    /// <returns></returns>
    public override DataRect Apply(DataRect oldDataRect, DataRect newDataRect, Viewport2D viewport) {
        if ((newDataRect.Width < width || newDataRect.Height < height)) {
            return oldDataRect;
        }
        return newDataRect;
    }
}
} 
```

现在您可以在代码中使用它来实现这样的限制：

```
plotter.Viewport.Restrictions.Add(new ZoomInRestriction(height, width)); 
```

虽然不是该错误的确切解决方案，但您至少应该能够阻止用户体验它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T12:32:44.963

有关详细信息，请参阅[https://dynamicdatadisplay.codeplex.com/discussions/484160](https://dynamicdatadisplay.codeplex.com/discussions/484160)

在`LineGraph.cs`，方法`OnRenderCore`。替换以下行

```
context.BeginFigure(FilteredPoints.StartPoint, false, false); 
```

至

```
context.BeginFigure(FilteredPoints.StartPoint, true, false); 
```

# javascript - 快速移动光标时的Jquery悬停问题

> ID：12618641
> 
> 赞同：4
> 
> 时间：2012-09-27T09:52:07.787
> 
> 标签：javascript, jquery, html

我的 Jquery 悬停效果有两个问题。

1.  如果您将鼠标移入和移出非常快（几次），即使鼠标不再位于包含的 DIV 内，它也会保持鼠标悬停效果。

我需要类似 if(background is visible && mouse not in div element ) 然后播放鼠标移出动画。（重置封面标志）

1.  与鼠标移入鼠标效果相同的问题，封面标志有时不会弹回原来的位置，有时会。这只发生在您快速移动光标时。

[http://jsfiddle.net/e7BLv/13/](http://jsfiddle.net/e7BLv/13/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:25:22.883

我已将[JSfiddle](http://jsfiddle.net/e7BLv/29/)更改为使用最新的 jQuery 库，并将弹跳动画更改为简单的淡入淡出……而且它似乎按预期工作。

**我想您的反弹效果（由 jQuery UI 提供）可能是以某种方式阻止正确停止的罪魁祸首。**

## 鼠标事件处理程序外部的延迟动画

如果需要，请使用简单的过渡，并且如果可能的话，通过延迟执行将动画移出事件处理程序，因此快速悬停不会触发任何过渡动画。这可能是确保正确处理和记录所有鼠标事件的最佳方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:05:59.470

这可能是动画队列的问题。检查 jQuery 的停止方法。官方文档中的示例将帮助您[http://api.jquery.com/stop/](http://api.jquery.com/stop/)。

正如文档建议的那样，可能需要将 jQuery 版本更新到 > 1.7。如果您不能使用更新的 jQuery 版本，并且您正在更改不透明度，则必须将不透明度设置为 0 / 1，而不是使用 fadeIn fadeOut。前任：

```
$el.bind('mouseenter',function(){
    $(this).stop().animate({
        opacity: 1
    });
}).bind('mouseleave',function(){
    $(this).stop().animate({
        opacity: 0
    }); 
```

# javascript - 将“参数到动态”JSP 传递给 JSP

> ID：12618649
> 
> 赞同：1
> 
> 时间：2012-09-27T09:52:38.177
> 
> 标签：javascript, html, jsp

有 JSP 文件 upLoad.jsp 和 popup_Tree.jsp，在页面 upLoad.jsp 上的 ViewTree.jsp 当您单击按钮时`(value="...")`，打开弹出窗口`(ViewTree.jsp)`，其中显示目录树，您可以选择保存文件的文件夹。在弹出窗口中有一个“上传”按钮。

有 JSP 文件 upLoad.jsp

```
<form name="fupload" method="post" enctype="multipart/form-data">
Upload file: <input type="f" name="f[]" id="filename" multiple="true" />
<input type="submit" value="Upload" onClick="return buttonupload();"/>
<input type="button" value="..." onClick="top.popup_Show('/_additional/upload_Js/ViewTree', 300, 380);return false;void(0);"/>           
</form>
<% ...
String[] pathDir = request.getParameterValues("pathDir"); 
%> 
```

popup_Tree.jsp

```
<% ...
String pathDir = getServletContext().getRealPath(dir);
%>
<form style="display:none;">
<input type="hidden" name="dirPatch" id="dirPatch" value="<%=pathDir%>"/>
</form> 
```

我想传达`(from popup_Tree.jsp to upLoad.jsp)`保存文件的路径

我这样做是为了传达“文件夹的路径”的含义：popup_Tree.jsp -->

```
<% String pathDir = getServletContext().getRealPath(dir);%>
<form style="display:none;" name="f" metod="post" action= "/_additional/upload.jsp">
<input type="hidden" name="dirPatch" id="dirPatch" value="<%= pathDir %>"/>
</form>
<%
    request.setAttribute("dirPtch", pathDir);
        String strViewPage="/_additional/upload.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(strViewPage);
        if (dispatcher != null){
        dispatcher.forward(request, response);
        } 
%> 
```

upLoad.jsp -->

```
<%
out.println(request.getAttribute("dirPtch"));
%> 
```

但输出 - 空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:41:24.770

您正在发布一个隐藏的表单变量：

```
<input type="hidden" name="dirPatch" id="dirPatch" value="<%= pathDir %>"/> 
```

所以，`upload.jsp`你需要使用[`getParameter`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String))：

```
<% out.println(request.getParameter("dirPtch")); %> 
```

或者，您可以使用[EL](https://stackoverflow.com/tags/el/info)：

```
${param.dirPtch} 
```

# java - Cordova 插件访问活动自定义方法

> ID：12618650
> 
> 赞同：2
> 
> 时间：2012-09-27T09:52:40.753
> 
> 标签：java, android, cordova, plugins

我目前正在制作一个 Cordova 插件，该插件将调用一个在主要活动上启动补间动画的方法。

`cordova.getActivity().customMethod();`

不起作用，因为插件不知道该方法是否实现。我该怎么做呢？

谢谢！

编辑：为了更好地澄清我的问题：**如何让 Cordova 插件在当前活动中启动 Android 视图动画？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:35:49.530

您是否将插件名称添加到 plugins.xml 或 config.xml（从版本 2.0.0 开始）？

喜欢 -->

```
<plugin name="Your_plugin_name" value="packagename.Your_plugin_name"/> 
```

编辑：

因为你只是在你的活动中调用一个方法，我不想为此编写一个插件......但你可以通过从插件中的该活动中获取引用并调用该方法来做到这一点。毕竟插件是用本机 Java 代码实现的。但是如果你已经实现**了 CordovaWebView**，那么我宁愿直接从 javascript 调用它。

在 onCreate 中：

```
cordovaWebView.getSettings().setJavaScriptEnabled(true);
cordovaWebView.addJavascriptInterface(this, "reference"); 
```

在你的活动中：

```
public void animate()
{
   //do animation
} 
```

在 JS 中：

```
reference.animate(); 
```

随心所欲。

# macos - 在 OS/X 上使用 glDrawElements（OpenGL 3.2 核心配置文件）

> ID：12618659
> 
> 赞同：1
> 
> 时间：2012-09-27T09:53:16.557
> 
> 标签：macos, opengl, glfw

我正在尝试将一些 OpenGL 3.2 代码从 Windows 移植到 OS/X 10.8（使用 GLFW 核心配置文件），但是当我调用 glDrawElements 时得到一个 INVALID_OPERATION (glError())。glDrawArrays 函数工作正常，所以我的着色器初始化好了。

以下片段很好地解释了我在做什么。知道我做错了什么吗？

```
struct Vertex {
 vec2 position;
 vec3 color;
};

void display() {
    glClearColor(0.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    glUseProgram(shaderProgram);

    mat4 projection = Ortho2D(-15.0f, 15.0f, -15.0f, 15.0f);
    glUniformMatrix4fv(projectionUniform, 1, GL_TRUE, projection);

    glBindVertexArray(shapeVertexArrayBuffer);

    mat4 modelView;

    // upper left
    modelView = Translate(-7,+7,0);
    glUniformMatrix4fv(modelViewUniform, 1, GL_TRUE, modelView);
    glDrawArrays(GL_TRIANGLE_FAN, 0, rectangleSize); // renders correctly

    // upper right
    modelView = Translate(+7,+7,0);
    glUniformMatrix4fv(modelViewUniform, 1, GL_TRUE, modelView);
    GLuint indices[6] = {0,1,2,3,4,0};
    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, indices); //INVALID_OPERATION

    glfwSwapBuffers();
}

void loadGeometry() {
    vec3 color(1.0f, 1.0f, 0.0f);
    Vertex rectangleData[rectangleSize] = {
        { vec2( 0.0,  0.0 ), color },
        { vec2( 5.0, -5.0 ), color },
        { vec2( 5.0,  0.0 ), color },
        { vec2( 0.0,  5.0 ), color },
        { vec2(-5.0,  0.0 ), color },
        { vec2(-5.0, -5.0 ), color }
    };
    shapeVertexArrayBuffer = loadBufferData(rectangleData, rectangleSize);
}

GLuint loadBufferData(Vertex* vertices, int vertexCount) {
    GLuint vertexArrayObject;

    glGenVertexArrays(1, &vertexArrayObject);
    glBindVertexArray(vertexArrayObject);

    GLuint vertexBuffer;
    glGenBuffers(1, &vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, vertexCount * sizeof(Vertex), vertices, GL_STATIC_DRAW);

    glEnableVertexAttribArray(positionAttribute);
    glEnableVertexAttribArray(colorAttribute);
    glVertexAttribPointer(positionAttribute, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *)0);
    glVertexAttribPointer(colorAttribute  , 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *)sizeof(vec2));

    return vertexArrayObject;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T09:57:27.747

您应该在顶点缓冲区之后创建一个索引缓冲区。

```
GLuint elementBuffer;
glGenBuffers(1, &elementBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, elementBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW); 
```

然后你可以打电话`glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);`

# ios - 应用内“发送反馈邮件”按钮

> ID：12618661
> 
> 赞同：1
> 
> 时间：2012-09-27T09:53:18.020
> 
> 标签：ios, app-store, feedback, review

您是否允许在您的 iOS 应用程序中放置“发送反馈”按钮（例如，打开邮件至应用程序支持）？

我记得在 App Store 提交程序文档和/或 UI 指南之一上阅读过，您不允许在自己的应用程序中放置自定义“发送反馈”表单（或按钮？），因为用户应该使用 App Store 评论取而代之的机制。但是，我似乎再也找不到这个了，所以我不确定这是否仍然有效。

有人知道更多吗？这似乎是（希望）让用户（甚至是不满意的用户）与您合作并防止他们在您根本无法回复的情况下写愤怒评论的明显方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:55:14.980

过去，我在一些应用程序中包含了一个“发送反馈”按钮，这些应用程序打开了电子邮件模式，迄今为止没有任何审查问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:07:34.827

不，这不是被禁止的，事实上，这是与您的应用客户互动的更好方式。我的公司 Apptentive 为像您这样的应用程序开发人员提供服务，以增强应用程序内反馈（电子邮件的改进，因为它可以让您的客户留在应用程序中）并且在应用程序中与您的客户互动的结果是您有更多的快乐客户和更好的评价。

# mysql - 获取最近更新的记录 Doctrine Mysql

> ID：12618662
> 
> 赞同：0
> 
> 时间：2012-09-27T09:53:19.927
> 
> 标签：mysql, select, doctrine-orm

我需要编辑表中存在的数据。编辑后，我想保留旧数据的副本。`update`因此，我没有使用语句，而是使用an`insert`将新的更新数据插入到同一个表中。两组数据有一定`id`的相同之处，它可以帮助我跟踪变化。该表还有一个`autoincrement`字段。如下所示：

```
> id Data            Data_id
> 1\. Data1                01
> 2\. Data1_edit1          01
> 3\. Data2                02
> 4\. Data2_edit1          02 
```

id 是`autoincrement`，Data_id 有助于记录更改。表也​​是`timestampable`。这样 Data1 的时间戳将低于 Data1_edit1。

假设我想获取`Data2`ie `id` `4`& `Data1`ie的最新更新记录`id` `2`，我正在尝试使用：

```
-> select("*") 
-> from("data")
-> groupBy("Data_id") 
```

正如所料，这将返回`Data1`& `Data2`，我将如何返回`Data1_edit1`and `Data2_edit1`？

我正在使用`Doctrine 2`和`Mysql`

帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:27:54.527

```
select * from yourtable
where id in(select max(id) from yourtable group by data_id) 
```

它工作正常。SQL 小提琴

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/6e04c/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:14:33.547

你可以试试这个：

```
select * from data where (data_id, id ) in ( select data_id, max(id) from data group by Data_id ); 
```

# wordpress - 通过 wordpress xmlrpc api 发布自定义字段时的编码问题

> ID：12618668
> 
> 赞同：1
> 
> 时间：2012-09-27T09:53:39.900
> 
> 标签：wordpress, xml-rpc, custom-fields

我对 wordpress xml-rpc api 有疑问。我的代码从 xml 获取一些数据并发布到博客。页面标题贴得很好，博客上没有问题，但是自定义字段被破坏了。

代码文件、xml、博客设置和数据库表它们都是 utf-8 编码的。

```
function wpPostXMLRPC($title,$body,$rpcurl,$username,$password,$thumbnail,$cfields,$category,$keywords='',$encoding='UTF-8') {

$title = html_entity_decode(htmlentities($title,ENT_NOQUOTES,$encoding));
$body = html_entity_decode(htmlentities($body,ENT_NOQUOTES,$encoding));
$keywords = html_entity_decode(htmlentities($keywords,ENT_NOQUOTES,$encoding));
array_walk($cfields,arr_encoding); // this function does the same thing with above

$content = array(
    'title'=>$title,
    'description'=>$body,
    'mt_allow_comments'=>0,  // 1 to allow comments
    'mt_allow_pings'=>0,  // 1 to allow trackbacks
    'post_type'=>'post',
    'mt_keywords'=>$keywords,
    'categories'=>array($category),
    'custom_fields' => $cfields
);

$params = array(0,$username,$password,$content,true);
$request = xmlrpc_encode_request('metaWeblog.newPost',$params);

$ch = curl_init();
curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
curl_setopt($ch, CURLOPT_URL, $rpcurl);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 100);
curl_setopt($ch, CURLOPT_ENCODING, "UTF-8" ); 
$results = curl_exec($ch);
if(curl_errno($ch))
    echo '<hr>curl error:'.curl_error($ch)."<hr>";
curl_close($ch);
return $results;} 
```

这是`arr encoding`功能：

```
function arr_encoding($cfields){
if(is_array($cfields))
    array_walk($cfields, 'arr_encoding');
else if(is_string($cfields))
    $cfields = html_entity_decode(htmlentities($cfields,ENT_NOQUOTES,"UTF-8"));} 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:11:25.803

好的，这里是：

不要使用

```
xmlrpc_encode_request('blogger.newPost',$params); 
```

并使用：

```
xmlrpc_encode_request('blogger.newPost',$params,
                            array('encoding'=>'UTF-8','escaping'=>'markup')); 
```

# javascript - javascript:window.close() 和 Opera

> ID：12618674
> 
> 赞同：1
> 
> 时间：2012-09-27T09:54:21.533
> 
> 标签：javascript, opera

我正在使用 asp.net 网络表单。我将简单的 JavaScript 函数添加到按钮 OnClientClick - 我需要关闭窗口。但是，在表单数据更改后，这种简单的代码和平在 Opera (12.10) 中停止工作：

```
 <script type="text/javascript">
        function CloseCurrentWindow(sender, args) {
            window.close(); // self.close() and this.close() act similar
        }
    </script> 
```

有谁知道这类问题（也许还有解决方案）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:23:21.867

经过几个小时的调查，我发现当前浏览器 Opera 不支持使用 _target=blank 创建的对象（windows）上的 window.colse() 函数。只有那些使用 javascript 创建的窗口才能被 javascript 处理，这是可悲的..

希望将来他们会将这种行为更改为对用户更友好（或对开发人员友好）

# c - 在 C 中动态声明变量/结构

> ID：12618675
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:54:22.557
> 
> 标签：c

例如，我有一个文件，上面写着

```
char,5
int,6 
```

阅读上面的文件，是否可以在代码中声明2个变量数组？所以将来如果我添加一个新行它会自动声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:57:07.847

不，不是在 C 中。
您需要编写一个脚本来读取此文件并编写 c 程序。
简而言之，您需要的是一个**C 源代码生成器**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:56:30.727

当然，只需编写您想要的代码。您可以从一个可以保存字符或整数的结构开始（用一些布尔值或整数来指示哪个）。然后你可以分配一个任意大小的数组。

当您阅读第一行时，创建一个包含 5 个此类结构的数组。将它们的类型变量设置为“char”。

当您读取第二个留置权时，将大小增加 6。将这六个新的设置为整数。

等等。

您可以使用 an`enum`来跟踪数组中每个条目的类型。您可以使用 a`struct`来保存整数值、字符值（或只是重新使用整数值）和类型。您可以制作`isInteger`、`setIntegerValue`、等辅助函数`getCharacterValue`。

# java - Java Eclipse WebService 部署 WebSphere 7.0

> ID：12618679
> 
> 赞同：1
> 
> 时间：2012-09-27T09:54:35.593
> 
> 标签：java, eclipse, web-services

我正在使用 Eclipse Juno 下面的[Here](http://www.slideshare.net/skkar2k2/writing-simple-web-services-using-eclipse-editor)开发一个简单的测试自下而上 WebService 。作为服务器，我在远程计算机上使用 Webshere 7.0。

当我尝试为服务器生成 WSDL 时（右键单击 RequestHandler.java-> Web 服务-> 创建 Web 服务-> 配置：服务器运行时：WebSphere Application Server v7.0 Web 服务运行时：IBM WebSphere JAX-WS

我收到以下错误：

```
Errors occurred during wsgen.
    java.lang.NoClassDefFoundError: com/sun/tools/internal/ws/wscompile/WsgenTool
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at com.ibm.ast.ws.jaxws.emitter.jdk6.command.AbstractEmitterCommand.loadClass(AbstractEmitterCommand.java:166)
    at com.ibm.ast.ws.jaxws.emitter.jdk6.command.WsGenCommand.execute(WsGenCommand.java:82)
    at com.ibm.ast.ws.jaxws.emitter.command.WsGenCommand.execute(WsGenCommand.java:64)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand(CommandFragmentEngine.java:419)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTop(CommandFragmentEngine.java:359)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveForwardToNextStop(CommandFragmentEngine.java:254)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$6.run(SimpleCommandEngineManager.java:294)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:1028)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runForwardToNextStop(SimpleCommandEngineManager.java:264)
    at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToNextStop(WizardPageManager.java:91)
    at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish(WizardPageManager.java:262)
    at org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish(DynamicWizard.java:382)
    at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:827)
    at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:432)
    at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
    at org.eclipse.jface.window.Window.open(Window.java:801)
    at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.run(DynamicPopupWizard.java:130)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    Caused by: java.lang.ClassNotFoundException: com.sun.tools.internal.ws.wscompile.WsgenTool
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 65 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:10:15.387

此错误的原因是包含 wsgen 任务类的 jar 文件未包含在您的类路径中。如果您使用的是 jdk1.6，请检查您使用的是 jdk1.6 而不是 jre 的 eclipse 环境。因为在 java 1.6 中你可以在 JAVA_HOME/bin 下找到 wsgen 任务。

如果您使用的是其他版本的 java，请尝试在您的应用程序服务器 lib 文件夹下搜索相关的 jar。

请注意：要检查您的 Eclipse 使用的是 jdk 还是 jre，请转到 windows->preferences->java->Installed JREs 并选择 jdk 而不是 jre。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:58:35.337

感谢 rbhawsar。你很准。

我需要先设置环境变量。即：路径：C:\Program Files (x86)\Java\jdk1.6.0_35\bin JAVA_HOME: C:\Program Files (x86)\Java\jdk1.6.0_35

自从上次接触 JAVA 以来，我已经关注了[这个链接](http://www.roseindia.net/java/learn-java-in-a-day/download-and-install-java.shtml)已经超过 6 年了。所以现在回到正题：）

# javascript - 使用 jquery 加载函数将值从一个 html 传递到另一个

> ID：12618681
> 
> 赞同：0
> 
> 时间：2012-09-27T09:54:38.113
> 
> 标签：javascript, jquery, html

我陷入了一个奇怪的问题。我正在使用的代码在一个页面上运行良好，但在另一个页面上却不工作。我尽我所能，我什至更改了文档标题以匹配正在工作但没有一个对我有用的页面。然后我创建了一个新页面并只输入了传递内容的编码，但它在新页面中也不起作用。我完全糊涂了，不知道该怎么办。

代码：

```
<head>
<script type="text/javascript">
$(document).ready(function(){
$('#bill2').load('http://website.com/fare.html #bill2')
})
</script>
</head>

<body>
<fieldset id="bill2">
</fieldset>
</body> 
```

此代码在一个页面中有效，而在另一个页面中无效，请告诉我我遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:58:37.863

试试这个，让我知道——

```
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$('#bill2').load('http://website.com/fare.html#bill2');
});
</script>
</head>

<body>
<fieldset id="bill2">
</fieldset>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:03:01.220

这不是答案，但我认为我不应该在评论中写这个。

试试这个完整的语法来找出错误

```
$("#success").load("xxx.php", function(response, status, xhr) 
{
  if (status == "error") 
  {
    var msg = "Sorry but there was an error: ";
    $("#error").html(msg + xhr.status + " " + xhr.statusText);
  }
}); 
```

# windows-8 - 是否有 Windows 8 应用程序目录网站（不是可从 Windows 8 中访问的网站）？

> ID：12618684
> 
> 赞同：2
> 
> 时间：2012-09-27T09:54:47.023
> 
> 标签：windows-8

通过 Windows 8 中的 Windows 商店是了解当前可用应用程序的唯一方法（以及是否已经采用了应用程序创意）？我见过这样的 Windows 8 应用程序链接 - [http://apps.microsoft.com/webpdp/en-in/app/bigflix/cd3aa73b-e60e-44b6-bbe9-6898050a3502](http://apps.microsoft.com/webpdp/en-in/app/bigflix/cd3aa73b-e60e-44b6-bbe9-6898050a3502)

...但是转到根站点会引发“403 - 禁止访问：访问被拒绝”，并且搜索“Windows 8 商店”没有提供任何有用的结果。我想在 Windows 8 正式发布后会有一些东西，但我还缺少什么吗？作为一名开发人员，我希望看到一个应用程序的摘要列表，其中显示了简要说明、其特性和使用的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:58:32.533

对我们来说不幸的是，Microsoft 没有提供有关商店应用程序的任何此类信息。我们所能做的就是从这里和那里收集一些信息。例如，Zdnet 提到了应用程序的数量。

看看[这里](http://www.zdnet.com/with-a-month-to-go-until-windows-8s-launch-2000-plus-windows-store-apps-7000004790/)和[这里](http://www.winappupdate.com/welcome-to-winappupdate/)

这个[链接](http://www.directionsonmicrosoft.com/update/92-september-2012/3787-windows-storethe-state-of-the-store.html?start=1)可能特别有用，因为它提供了估计的应用程序类别细分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:00:49.207

我创建了网站[http://metrostorescanner.com/](http://metrostorescanner.com/)以查看所有国家/地区的应用程序中的新功能（但您也可以使用国家/地区过滤器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T03:56:37.023

更新 - 现在甚至可以从非 Windows 8 机器上搜索[Windows Store](http://windows.microsoft.com/en-us/windows/search#q=top+free&s=Store)和[Windows Phone 应用程序，还可以从 Microsoft 官方网站按类别查看应用程序。](http://www.windowsphone.com/en-us/store/featured-apps)

正如@mamata-dalal 和@gyurisc 所提到的，目前没有官方的Windows 8 应用程序目录。

我遇到了与我正在寻找的内容接近的网站[Windows8Apps （尽管并不完美）。](http://www.windows8apps.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T16:49:20.923

我找到了一个包含站点地图的文件，您可以将其用于列出应用程序： http: [//apps.microsoft.com/webpdp/sitemap/sitemap_1.xml](http://apps.microsoft.com/webpdp/sitemap/sitemap_1.xml)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T17:36:59.380

[http://www.greatwindowsapps.com](http://www.greatwindowsapps.com)是网络上的可搜索目录。它不是整个商店，内容被过滤以删除质量差的应用程序。披露：这是我的网站，很明显我认为这是一个优势:)

[http://drunktester.azurewebsites.net/](http://drunktester.azurewebsites.net/)是使用澳大利亚内容的完整商店。他发布了源代码 (https://github.com/VikingCode/DrunkStore)，因此您可以根据需要为任何国家/地区进行设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T06:50:02.067

目前，除了 Windows 8 应用商店是唯一的地方之外，没有其他地方，但我相信很快就会有很多网站对这些应用程序进行分类。

# php - 共享一个旧 PHP 项目及其 Zend 重构部分的域

> ID：12618686
> 
> 赞同：2
> 
> 时间：2012-09-27T09:54:49.340
> 
> 标签：php, zend-framework, subdomain, virtualhost

我正在重构一个用过程 PHP 开发的旧项目，并使用 Zend 采用新的面向对象方法。

该网站有两个主要部分： - 杂项页面，主域（www）上仍然在线的许多旧页面 - 论坛部分，我在论坛子域上使用 Zend 重构的部分

目标是在涵盖两个子域的 Zend 主项目上重构整个网站。

现在我必须重构主域的一些页面，因为这些域已经分离了虚拟主机：www 域设置为特定目录，论坛域设置为另一个目录（Zend 目录），每个都有自定义网址重写。

显而易见的解决方案是将旧页面目录与论坛目录合并，但我不能，因为它会破坏 Zend 的文件夹架构。

理想的解决方案是在主域的 vitualhost 中添加一个 regexp 子句，将 www 的一些 url 重定向到 Zend 项目目录的目录，但我还没有找到方法。

还有其他方法吗？我还可以创建一些临时子域来托管重构的页面，但这不是一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:28:02.863

我不明白。为什么不对本地环境进行干净的重构，然后部署它并进行 DNS 迁移？为什么要让新旧代码共存？你说过：“目标是在一个涵盖两个子域的 Zend 主项目上重构整个网站”。然后继续！重构、部署旧域名并将其重定向到新域名！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:12:36.230

最后，我选择了一种混合解决方案，我将对某些部分使用临时子域，直到我可以一次性重构其余的旧页面。

# svn - 使用 TeamCity 提交 svn

> ID：12618687
> 
> 赞同：4
> 
> 时间：2012-09-27T09:54:53.637
> 
> 标签：svn, teamcity, commit

我正在使用 Visual Studio 和 TeamCity 工具。我在 TeamCity 中添加了项目。**当 TeamCity 项目构建成功时，TeamCity 会自动将 bin/Release 文件夹中的新二进制文件提交到指定的 SVN 路径（例如 svn:\abc.com\root\trunk ）。**有谁知道我怎样才能做到这一点？请让我知道步骤。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:06:41.430

将`Command Line`构建步骤添加到您的 TC 配置中，就在主要构建步骤之后，包含 command `commit_build.bat`。创建一个`commit_build.bat`文件，该文件将使用标准 svn 命令将您的工件提交到 SVN。

不要忘记提交`commit_build.bat`回购。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:46:03.837

我们的构建过程包括构建和单元测试步骤完成后的“标记”MsBuild 步骤。此步骤会清除构建中的任何额外文件（例如，如果您正在构建要在其他地方引用的项目，则不必要的外部依赖项）并提交二进制文件。这只是一个 MsBuild 步骤，它运行一个标记已构建项目的 MsBuild 脚本。

您可以使用脚本中 MsBuild 调用的 TargetOutputs 元素获取项目构建的 DLL 列表，例如：

```
<MSBuild Projects="yourSolutions" Targets="Rebuild" Properties="Configuration=Release;Platform=x86">
    <Output ItemName="BinaryOutputs" TaskParameter="TargetOutputs"/>
</MSBuild> 
```

然后你可以使用标准的 svn 命令来提交你的文件。

# java - 如何使用来自 java PKCS#12 密钥库的证书来加密和解密文件？

> ID：12618690
> 
> 赞同：10
> 
> 时间：2012-09-27T09:55:04.977
> 
> 标签：java, cryptography, pkcs#12

谁能解释如何使用存储在 java 'PKCS#12` 密钥库中的证书来加密和解密文件？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-27T12:13:39.167

正如提到 Eugene Mayevski，您的问题是错误的，无法以原始形式回答。但我会试着为你澄清一下。[PKCS#12](http://en.wikipedia.org/wiki/PKCS_12) - 加密格式*用于存储*证书和私钥。当您加密或解密数据时，您使用密码实现和*内容*`PKCS#12`。

Java 内置支持使用 PKCS#12 密钥库，使用此容器与标准 JKS 密钥库没有太大区别。

例如，加载 JKS 密钥库的代码

```
KeyStore store = KeyStore.getInstance(KeyStore.getDefaultType());
store.load(is, password.toCharArray()); 
```

和加载 PKCS#12 密钥库的代码

```
KeyStore store = KeyStore.getInstance("PKCS12");
store.load(is, password.toCharArray()); 
```

之后，您可以无限制地访问密钥库内容。您可以获得存储在密钥库中的证书和密钥，而无需在 Firefox 中使用导入/导出进行奇怪的操作。

```
Key key = store.getKey("alias_for_key", password.toCharArray()); 
```

接下来，当您拥有密钥和证书时，就是加密。用于加密。你需要 Cipher 类的实例。

```
Cipher c = Cipher.getInstance(key.getAlgorithm());
c.init(Cipher.ENCRYPT_MODE, key); 
```

准备加密的密码。如果加密数据相对较小，可以使用`update()`方法，其他方法是创建`CipherOutputStream`.

要解密，只需使用不同的模式初始化密码，并且取决于加密算法，密钥。对称算法的密钥相同，非对称算法加密使用公钥，解密使用私钥。

在[本文中](http://en.wikipedia.org/wiki/Cryptography)，您可以了解有关密码学的更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T09:57:31.873

[这篇博文应该完美地向您解释](http://coenos.com/blog/?p=257)。

> 对 PEM 文件使用 PKCS12 加密。
> 
> 要使其运行，您首先需要一个 PFX（个人文件交换）格式的 Java 密钥库。

**密钥工具命令：**

```
 keytool -genkeypair -alias mykeystore -keypass lala -keystore
 mykeystore.pfx -storepass lala -validity 10000 -keyalg RSA -keysize
 2048 -storetype pkcs12 
```

这将生成 mykeystore.pfx 文件。该文件可以在 Firefox 中作为证书导入。

**导入**——打开火狐——工具——选项——高级——查看证书——你的证书——导入——选择PFX文件——导入。

**导出**- 选择证书 - 查看 - 详细信息 - 将其导出到 X.509 PEM）。（您也可以导出到 DER）

**1\. 私钥**

首先，我们需要从 PFX 文件中提取私钥。

**2\. 公钥**

其次，您需要使用公钥加密文件。但首先你需要公钥。

**3\. 用公钥加密**

现在您有了可以加密文件的公钥。

**4\. 用私钥解密**

所以现在文件被加密了，它可以被发送/存储给接收方......好吧......接收它并解密它。要解密它，我们需要私钥，幸运的是，它保存/存储在 private.pem 文件中

**5\. 使用 AES 密钥进行加密/解密**

另一种加密/解密内容的方法是通过 AES 256 位密钥。密钥将在每个文件中随机生成并写入文件系统。然后可以使用上述 RSA 机制对这个 AES 密钥进行加密。这将提高大文件的加密性能。

来源 - [http://coenos.com/blog/?p=257](http://coenos.com/blog/?p=257)

# nhibernate - 如何将多个数据库连接到 NHibernate？

> ID：12618699
> 
> 赞同：0
> 
> 时间：2012-09-27T09:55:21.813
> 
> 标签：nhibernate, nhibernate-mapping

我想重新编程我的产品以在我的项目中使用两个、三个或更多数据库。

现在我有一个 MSSQL 数据库，产品通过 Nhibernate 连接到这个数据库（`hibernate.cfg.xml`带有一个连接字符串的标准文件）。

我不想通过唯一标识符分隔表中的记录。

我能做到吗？

```
<property name="connection.connection_string">
   Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Application.mdf;Integrated Security=True;User Instance=True
</property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:32:23.200

有多种解决方案可以做到这一点，其中两个是：

1.  为每个数据库使用不同的配置/会话工厂
2.  如果数据库位于同一数据库服务器上，您可以将数据库名称放入映射中：databasename.dto.TableName

# lisp - 函数和二元运算

> ID：12618701
> 
> 赞同：0
> 
> 时间：2012-09-27T09:55:31.403
> 
> 标签：lisp

我想创建一个函数：OP from `i=n`to `p = f(i)` OP is a binary operator

这是我的功能

```
(defun sigmaOP (f o n p)
(loop for i from n to p do
(let (val (o (val (funcall f i))))
)
val
) 
```

f 是函数 o 是运算符 n 是开始，p 是结束

打电话给我

```
(sigmaOP (lambda (x) (* 2 x)) '+ 1 3) 
```

但它不起作用 o 参数不被视为运算符。如果我删除了这个功能`o`，而是有`+ or *,`......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:05:45.037

运算符也是要调用的函数，因此您需要在前面`o`加上`funcall`，或将其用作调用中的参数，例如减少。你在想这样的事情吗？

```
(defun sigmaOP (f o n p)
  (reduce o
    (loop for i from n to p
          collect (funcall f i)))) 
```

称呼：

```
(sigmaOP (lambda (x) (* 2 x)) #'+ 1 3) 
```

# grails - Grails --- 加载器约束违规

> ID：12618704
> 
> 赞同：0
> 
> 时间：2012-09-27T09:55:40.133
> 
> 标签：grails, geb

在我的一个应用程序中，我必须将 geb 与 grails 一起使用。我安装了 geb 插件并添加了依赖 selenium 独立 jar。

现在的问题是在我清理或编译时出现如下错误

交互模式退出并出现错误：加载器约束违规：当解析被覆盖的方法时，当前类的类`"org.apache.xerces.jaxp.SAXParserImpl.getXMLReader()Lorg/xml/sax/XMLReader;"`加载器及其超类加载器（）对于签名中使用的类型具有不同的类对象（使用 --stacktrace 查看完整跟踪)`(instance of org/codehaus/groovy/grails/cli/support/GrailsRootLoader)``org/apache/xerces/jaxp/SAXParserImpl,``instance of <bootloader>``org/xml/sax/XMLReader`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:33:00.167

排除 Selenium 的传递依赖，以便`xml-apis`在您的`BuildConfig.groovy`:

```
dependencies {
    test("org.seleniumhq.selenium:selenium-htmlunit-driver:$seleniumVersion") {
        exclude "xml-apis"
    }
    test "org.codehaus.geb:geb-spock:$gebVersion"
    test "org.codehaus.geb:geb-junit4:$gebVersion"
} 
```

有关更多详细信息，请参阅[此示例项目](https://github.com/geb/geb-example-grails/blob/master/grails-app/conf/BuildConfig.groovy)。

# objective-c - 在 NSArray 中存储 UITouch

> ID：12618707
> 
> 赞同：0
> 
> 时间：2012-09-27T09:55:48.533
> 
> 标签：objective-c, ios

我正在尝试将 UITouches 存储在字典或数组中并且遇到了一些麻烦。存储 CGPoints 工作正常，但存储 UITouches 不行。

进一步说明：在触摸开始时初始化数组，将每个UITouch存储在一个数组中，当触摸结束时我想输出数组。我一直在寻找一段时间，但我还没有找到任何示例代码来执行此操作。

```
NSMutableArray *touchesArray;
NSMutableArray *pointArray;

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    touchesArray = [[NSMutableArray alloc] init];

    pointArray = [[NSMutableArray alloc] init];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self];
     [pointArray addObject:[NSValue valueWithCGPoint: currentPoint]];

    [touchesArray addObject:[NSValue valueWithPointer:(__bridge const void *)(touch)]];

    for (UITouch *touch in touches)
    {
        NSLog(@"x location %f",[touch locationInView:self].x);
    }

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{        

    for (UITouch *touch in touches)
    {        
        NSLog(@"%f",[touch locationInView:self].x);
    }

    for(id p in pointArray){
        NSValue *val = p;
        CGPoint point = [val CGPointValue];
        NSLog(@"%f",point.x);
    }

    //ERROR!
    for(id p in touchesArray){
        NSValue *val = p;
        UITouch *t = (UITouch*) p;
        NSLog(@"%@",[t timestamp]);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:41:48.147

使用包装器对象对我有用。UITouch 总是指向同一个地址。

```
#import "TouchInfo.h"

@implementation TouchInfo

@synthesize timestamp;
@synthesize location;

@end

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
int ns = [touches count];
NSLog(@"number of touches  %i",ns);
for(UITouch *touch in touches)
{
    NSNumber *val = [NSNumber numberWithFloat:[touch timestamp]];        
    TouchInfo *touchInfo = [[TouchInfo alloc] init];
    touchInfo.location = [touch locationInView:self];
    touchInfo.timestamp = [touch timestamp];
}
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

int nt = [touchesArray count];
for (int i = 0; i < nt; i++){
    TouchInfo *touchInfo = (TouchInfo*)[touchesArray objectAtIndex:i];
    NSLog(@"%f  %f   %f",touchInfo.timestamp,touchInfo.location.x,touchInfo.location.y);    

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:13:18.063

做这个：

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    if(!touchesArray){
    touchesArray = [[NSMutableArray alloc] init];
    }
    if(!pointArray){
    pointArray = [[NSMutableArray alloc] init];
    }
 } 
```

现在

```
 -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

   UITouch *touch = [touches anyObject];

   [touchesArray addObject:touch];

   ..........
 } 
```

检索时这样做：

```
 UITouch *touch = (UITouch*)[touchesArray objectAtIndex:0]; 
```

# javascript - 如何使用 Backbone.LocalStorage 在 localStorage 中存储值

> ID：12618717
> 
> 赞同：1
> 
> 时间：2012-09-27T09:56:20.893
> 
> 标签：javascript, backbone.js, local-storage

如果我尝试以下代码：

```
var c = new Backbone.Collection(); 

c.localStorage = new Backbone.LocalStorage("items");  

c.add({title: 'exemple'});

c.toJSON(); // [object] 
```

如果我试图看到，`localStorage.items`我什么也看不到。

我应该如何将数据存储在 localStorage 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:21:40.333

为了将您的收藏保存在 localStorage 中，您需要`create a new instance of a model within a collection`.

```
var c = new Backbone.Collection(); 

c.localStorage = new Backbone.LocalStorage("items");  

c.create({title: 'exemple'});

c.toJSON(); // [object]

localStorage.items; // will be defined 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T09:59:32.590

你想做什么？Backbones localStorage 适配器用于将模型保存到 localStorage 而不是 REST 服务。如果您尝试在 localStorage 中存储一些附加值，您仍然可以使用`localStorage.setItem("foo", "bar")`

# facebook - 单击应用程序将我带到我的 Facebook 页面

> ID：12618722
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:56:35.387
> 
> 标签：facebook, redirect

我想为我正在开发的 Facebook 页面创建一个应用程序，但是当我单击顶部名为“应用程序”的链接时，它只会将我重定向到 Facebook 页面。我尝试过使用不同的浏览器，并且效果相同。

发生了什么，如何解决？

我可以使用另一个 Facebook 帐户，即我自己的帐户来创建应用程序，然后将其添加到其他人，还是必须是 Facebook 页面的所有者？

科林。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:41:47.213

> 我可以使用另一个 Facebook 帐户，即我自己的帐户来创建应用程序，然后将其添加到其他人，还是必须是 Facebook 页面的所有者？

您*必须*使用您的**个人**帐户。只有**用户**帐户可以是开发人员 - 而不是页面。

（而且您必须通过 Facebook 验证您的帐户——通过手机短信或信用卡验证。）

# c# - 以编程方式配置端点

> ID：12618724
> 
> 赞同：0
> 
> 时间：2012-09-27T09:56:36.210
> 
> 标签：c#, windows-8

首先，让我先说我没有做端点/网络类型的东西的经验，所以我的问题可能看起来有点愚蠢，所以请多多包涵:)

我正在为 Windows Phone 7 编写的应用程序移植到 Windows 8（Metro 应用程序）上。在原始 App 中，有一个 ServicesReference.ClientConfig 文件，它定义了 App 连接到服务器的 URL、绑定和其他位（地址已更改）：

```
<client>
  <endpoint address="https://someurl.com/userservice.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_UserServices"
        contract="UserApi.UserServices" name="User_Services" />
  <endpoint address="https://someurel.com/dataservice.svc"
      binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_DataServices"
      contract="DataApi.DataServices" name="Data_Services" /> 
```

此外，在 WP7 项目中，已经添加了两个“服务引用”（一个用于用户服务，一个用于数据服务），以及支持 Reference.cs 生成的文件。当我尝试将服务引用添加到 Win8 项目（VS2012）时，它生成了一个空白的 reference.cs 文件，所以我只是将 WP7 项目中的 Reference.cs 文件添加到 W8 项目中，并复制了 ServiceReferences.ClientConfig 文件进入 W8 项目（因此在目录结构方面，它看起来与 WP7 项目相同）。我认为这些 Reference.cs 文件是为合约提供接口的文件

现在，当我运行 W8 应用程序时，在需要访问服务的部分出现错误：

> 用户代码未处理 InvalidOperationException 在 ServiceModel 客户端配置部分中找不到名称为“User_Services”和合同“UserApi.UserServices”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。

所以我认为应用程序没有使用 ServicesReferces.ClientConfig 文件来获取端点和网络地址，或者它没有找到我已导入项目的 Reference.cs 文件。那么，假设首先它没有通过 ServicesReferences.ClientConfig 文件正确找到端点，是否可以在代码中做同样的事情？

到目前为止，我得到的是：

```
BasicHttpBinding binding = new BasicHttpBinding();
EndpointAddress endpoint = new EndpointAddress(new Uri("https://someurl.com/someservice.svc")); 
```

但我不知道如何更进一步（我将它添加到 App.xaml.cs 中）

希望这个问题有意义。如果您需要任何进一步的信息，请告诉我，我会在去的时候尝试了解它，并在此端点业务上对自己进行更多教育

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:20:32.753

我遇到了同样的问题，我试图将所有内容包装在一些类中。这就是我所做的：首先，我创建了一个名为 ClientService 的类，它在其中创建并包装了 EndpointAdress：

编辑Win8：

```
public class ClientService
{
   public Type ContractType {get;set;}
   public EndpointAdress EndpointAdress {get;set;}
   public Binding Binding { get; private set; }

   public ClientService(Type contractType)
   {
     ContractType = contractType;
     CreateEndpoint();
     CreateBinding();
   }

   private void CreateEndpoint()
   {
       EndpointAdress = new EndpointAddress(....) //You can get some parameters about the service adress in the Constructor of this class
   } 

   private void CreateBinding()
   {
       Binding = new BasicHttpBinding();  //Or your specific Binding
   }
} 
```

一旦有了这个，我就创建了一个包含所有客户端注册的静态类。一旦我启动我的应用程序，我就会添加所有这些。像这样的东西：

```
ClientServices.AddClientService(new ClientService(typeof(IYourService));

public static class ClientServices
{
    private static readonly Dictionary<Type, ClientService> _clientServices;

    static ClientServices()
    {
        _clientServices = new Dictionary<Type, ClientService>();
    }

    public static void AddClientService(ClientService clientService)
    {
        if (!_clientServices.ContainsKey(clientService.ContractType))
        {
            _clientServices.Add(clientService.ContractType, clientService);
        }
    }

    public static ClientService GetClientServiceBy(Type contract)
    {
        if (_clientServices.ContainsKey(contract))
        {
            return _clientServices[contract];
        }
        throw new ArgumentException(string.Format("The contract's Type {0} is not registered. Please register the client's endpoint.", contract));
    }
} 
```

因此，当我的应用程序启动时，我将所有客户端端点都注册在一个静态类中。现在，当我想调用服务时，我有一个名为 ServiceInvoker 的包装器。每当我想调用服务时，我都会这样使用它：

```
var invoker = new ServiceInvoker();
    var result = invoker.InvokeService<IMyService, MyObjectReturnType>(
        proxy => proxy.DoSomething(myParameters));
    return result; 
```

InvokeService 如下所示：

```
public TResult InvokeService<TServiceContract, TResult>(Func<TServiceContract, TResult> invokeHandler) where TServiceContract : class
{
    ICommunicationObject communicationObject;
    var arg = CreateCommunicationObject<TServiceContract>(out communicationObject);
    var result = default(TResult);
    try
    {
        result = invokeHandler(arg);
    }
    catch (Exception ex)
    {
        throw;
    }

    finally
    {
        try
        {
            if (communicationObject.State != CommunicationState.Faulted)
                communicationObject.Close();
        }
        catch
        {
            communicationObject.Abort();
        }
    }
    return result;
}

private TServiceContract CreateCommunicationObject<TServiceContract>(out ICommunicationObject communicationObject)
    where TServiceContract : class
{
        var clientService = GetClientService(typeof(TServiceContract));
         var arg = new ChannelFactory<TServiceContract>(clientService.Binding, clientService.EndpointAdress).CreateChannel();
        communicationObject = (ICommunicationObject)arg;
        return arg;
}

private ClientService GetClientService(Type type)
    {
        var clientService = ClientServices.GetClientServiceBy(type);
        return clientService;
    } 
```

**这里的主要问题是，由于 DLL 不能在 Windows 应用商店应用程序中引用，所以使这个示例工作的唯一方法是复制我们传输到类库（Windows 应用商店应用程序）的所有服务接口和可能的对象。这样我们就可以创建一个通道并连接到 WCF 服务。复制接口可能是一种解决方法，但不是一个好方法。服务参考或其他代码生成工具是要走的路。**

**此外，在这种情况下，异步和等待是不可能的。**

**ServiceInvoker apprach 用于[创建 WCF ChannelFactory](https://stackoverflow.com/questions/3200197/creating-wcf-channelfactoryt "创建 WCF ChannelFactory<T>")

# c# - 带有内容模板的 ASP.NET 自定义控件

> ID：12618726
> 
> 赞同：3
> 
> 时间：2012-09-27T09:56:40.773
> 
> 标签：c#, asp.net, user-controls, custom-controls

我在 ASP.NET 3.5 中创建了 LoginView ASP.NET 控件的“克隆”，以满足我们公司的需要，并且我试图了解它如何实现在不同模板中设置具有相同 ID 的控件的能力。例如，这是带有 LoginView 控件的 ASPX 标记：

```
 <asp:LoginView ID="lv" runat="server">
        <AnonymousTemplate>
            <asp:Label ID="lbl" runat="server" />
        </AnonymousTemplate>
        <LoggedInTemplate>
            <asp:Label ID="lbl" runat="server" />
        </LoggedInTemplate>
    </asp:LoginView> 
```

这是有效的标记，页面工作正常。
现在我创建了我的自定义控件：

```
 [ParseChildren(true)]
    [PersistChildren(false)]
    public class ContentControl : Panel
    {
        [PersistenceMode(PersistenceMode.InnerProperty)]
        public PlaceHolder AnonymousView { get; set; }

        [PersistenceMode(PersistenceMode.InnerProperty)]
        public PlaceHolder LoggedinView { get; set; }

        public ContentControl()
        {
            this.Init += new EventHandler(ContentControl_Init);
        }

        void ContentControl_Init(object sender, EventArgs e)
        {
            if (AnonymousView == null)
            {
                AnonymousView = new PlaceHolder();
            }

            if (LoggedinView == null)
            {
                LoggedinView = new PlaceHolder();
            }

            this.Controls.Add(AnonymousView);
            this.Controls.Add(LoggedinView);

            AnonymousView.ID = "AnonymousView";
            LoggedinView.ID = "LoggedinView";

            AnonymousView.Visible = !MyContext.IsLogged;
            LoggedinView.Visible = MyContext.IsLogged;
        }
    } 
```

现在，当我使用带有以下标记的控件时，我收到 ID 为“lbl”的控件在页面上多次存在的错误：

```
 <TL:ContentControl ID="c" runat="server" CssClass="dd">
        <AnonymousView>
            AnonymousView
            <asp:Label ID="lbl" runat="server" />
        </AnonymousView>
        <LoggedinView>
            LoggedinView
            <asp:Label ID="lbl" runat="server" />
        </LoggedinView>
    </TL:ContentControl> 
```

如何允许在两个模板中拥有相同 ID 的控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:07:28.453

您需要开发模板化控件：[Building Templated Custom ASP.NET Server Controls](http://msdn.microsoft.com/en-us/library/aa478964.aspx)

并使用实现 INamingContainer 作为模板容器的控件：[使用 TemplateInstance.Single 避免 FindControls](http://weblogs.asp.net/zeeshanhirani/archive/2008/05/31/use-templateinstance-single-to-avoid-findcontrols.aspx)

# asp.net-mvc-3 - 如何处理 EF 和 MVC 应用程序中的继承实体？

> ID：12618727
> 
> 赞同：1
> 
> 时间：2012-09-27T09:56:42.573
> 
> 标签：asp.net-mvc-3, entity-framework-4

我正在开发 MVC 应用程序并使用剃刀语法。我使用了模型优先方法。

我有两个实体，客户和潜在客户。Lead 继承自 Customer。

当 IsActive 属性为 true 时，将 Customer 视为潜在客户，否则将是客户。

请检查 edmx 文件图像。

![在此处输入图像描述](../Images/4988815d5a48c09bc05a3118c8c51341.png)

当我从 model 生成 DB 时，我得到了两个表 Customer Table 和 Customer_Lead 表。

这是客户表。

![在此处输入图像描述](../Images/5e0313b35a49ac3cbe1f21bbb1e529f7.png)

这是 Customer_Lead 表。

![在此处输入图像描述](../Images/0388caf0aa6ae20c9ec3550ea2258aa3.png)

现在的问题是当我运行主要实体的索引视图时，它会给出错误。

> 传入字典的模型项的类型为 PagedList.PagedList1[CRMEntities.Customer]，但此字典需要 PagedList.IPagedList1[CRMEntities.Lead] 类型的模型项。

我对如何为从其他实体继承的实体编写视图以及如何在使用继承的实体时访问这两个表中的数据感到困惑。

索引视图代码如下...

```
@model PagedList.IPagedList<CRMEntities.Lead>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            Status
        </th>
        <th>
            IsQualified
        </th>
        <th>
            Name
        </th>
        <th>
            Address
        </th>
        <th>
            OfficePhone1
        </th>
        <th>
            Website
        </th>
        <th>
            Email2
        </th>
        <th>
            Email1
        </th>
        <th>
            FaxNo
        </th>
        <th>
            Remark
        </th>
        <th>
            Rating
        </th>
        <th>
            BusinessType
        </th>
        <th>
            IsActive
        </th>

    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Status)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsQualified)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Address)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.OfficePhone1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Website)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email2)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FaxNo)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Remark)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Rating)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BusinessType)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsActive)
        </td>

        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table> 
```

我在索引中有以下代码...

```
public ViewResult Index()
{

    var LeadList = (from c in db.Customers
                    where (c.IsActive == true)
                    orderby (c.Id)
                    select c);

   //What should I return ? 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:26:37.293

您的视图看起来不错，但您正试图将客户列表传递给它。尝试从上下文中获取潜在客户列表。

```
public ActionResult Index()
{
    ...
    var leadList = db.Customers.OfType<CRMEntities.Lead>().Where(c => c.IsActive).OrderBy(c => c.Id);

    return View(leadList);
} 
```

# javascript - 点击检测画布JS

> ID：12618734
> 
> 赞同：1
> 
> 时间：2012-09-27T09:57:11.590
> 
> 标签：javascript, algorithm, data-structures, canvas

我想检测对使用路径绘制的画布元素的点击。到目前为止，我已经想到将元素路径存储在 javascript 数据结构中，然后检查匹配元素坐标的命中坐标。我相信已经有算法可以用于细化 o 坐标搜索。当元素数量较大时，渲染每个元素路径并检查命中将是低效的。谁能指出我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:46:24.760

JavaScript 画布上下文有一个 isPointInPath 方法。

[https://www.w3schools.com/tags/canvas_ispointinpath.asp](https://www.w3schools.com/tags/canvas_ispointinpath.asp)

如果您想实现自己的 Point In Polygon 算法，请查看 Wikipedia 页面

[http://en.wikipedia.org/wiki/Point_in_polygon#Point_in_polygon_queries](http://en.wikipedia.org/wiki/Point_in_polygon#Point_in_polygon_queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:03:21.683

有一些库正在 j= 这样做，例如：

paper.js [http://paperjs.org/](http://paperjs.org/)

面料.js [http://fabricjs.com/](http://fabricjs.com/)

kenetic.js [http://kineticjs.com/](http://kineticjs.com/)

我建议你要么检查代码库，要么在这些基础上构建。

# php - 使用phpcassa按排序顺序进行multiget

> ID：12618737
> 
> 赞同：0
> 
> 时间：2012-09-27T09:57:18.583
> 
> 标签：php, database, cassandra, phpcassa

我在 cassandra 中有一个键空间，其列族（让 A）具有复合键另一个列族（让 B）我正在存储存在于 A 列族中的确切行数。当我使用 multiget 获取数据时，它没有给出实际的排序数据。

```
A: [1] = 13;

B:
   [6014:2:0] = "aaaaaa";
   [6014:2:1] = "bbbbbb";
   [6014:2:2] = "cccccc";
   [6014:2:3] = "dddddd";
   [6014:2:4] = "eeeeee";
   [6014:2:5] = "ffffff";
   [6014:2:6] = "gggggg";
   [6014:2:7] = "hhhhhh";
   [6014:2:8] = "iiiiii";
   [6014:2:9] = "jjjjjj";
   [6014:2:10] = "kkkkkkk";
   [6014:2:11] = "lllllll";
   [6014:2:12] = "mmmmmmm"; 
```

我的代码

```
require_once(__DIR__.'/phpcassa/lib/autoload.php');
use phpcassa\Connection\ConnectionPool;
use phpcassa\ColumnFamily;
use phpcassa\SystemManager;
use phpcassa\Schema\StrategyClass;

$connection = new ConnectionPool('KEYSPACE', array('XXXX', 'YYYY', 'ZZZZ'));
$numDtls = new ColumnFamily($connection, 'A');
$key = 1;
$num_details = $numDtls->get($key);
$num = $num_details;

$json = '';
$key_array = array();
if(isset($num)){
    $str = new ColumnFamily($connection, 'B');
    for($i = 0;$i <= $num; $i++){
        $key_array[] = array($table, $flag, $i);
    }

    $detail = $str->multiget($key_array);
    $json = json_encode($detail);
} 
```

它给出的输出为

```
6014:2:0
6014:2:6
6014:2:9
6014:2:11
6014:2:4
6014:2:1
6014:2:12
6014:2:8
6014:2:7
6014:2:10
6014:2:3
6014:2:5
6014:2:2 
```

它以混乱的顺序给出输出......如何以排序方式获得？以及如何获得超过 100 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:20:56.620

Multiget 不做任何订购保证，完全停止。至于如何获得超过 100 行......你问错了问题，大型 multigets 是一种反模式。您需要进行非规范化，以便您可以使用单个切片获取所需的数据。在此处查看我的“时间线”示例：[http ://www.datastax.com/dev/blog/schema-in-cassandra-1-1](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)

# c# - 使用办公应用程序简单地查询数据库？

> ID：12618738
> 
> 赞同：4
> 
> 时间：2012-09-27T09:57:25.530
> 
> 标签：c#, sql-server, ms-office, apps-for-office

我正在尝试开始[为 office 编写我的第一个应用程序](http://msdn.microsoft.com/en-us/library/jj220082%28v=office.15%29.aspx)。

我想做的很简单。我有一个客户 ID 数据库。当我将鼠标悬停在其中一个 ID 上时，我希望应用程序查询数据库并在应用程序的右侧显示客户信息。

使用办公应用程序这应该是一件非常简单的事情，但我在他们的网页上找不到任何指导或帮助。

谁能提供一些简单的示例代码来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:09:10.843

我认为这些 Microsoft 官方示例会对您有很大帮助。

**示例 1（位复数）**

[http://msdn.microsoft.com/en-us/library/fp142290(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/fp142290(v=office.15).aspx)

**示例 2（看起来很简单）**

[http://msdn.microsoft.com/en-us/library/fp142161(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/fp142161(v=office.15).aspx)

**示例 3（使用 Visual Studio）**

[http://msdn.microsoft.com/en-us/library/fp179835(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/fp179835(v=office.15).aspx)

快乐的编码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:02:18.367

我可以说我花了一些时间阅读[本教程](http://msdn.microsoft.com/en-us/library/fp142161%28v=office.15%29.aspx)，试图找到这个问题的解决方案。关于如何继续编写 Office 应用程序，我有一些建议。

1.  当您将鼠标悬停在 Excel/etc 中的 ID 字段上时，我不建议您填充数据。您将多次访问数据库。我会设置它，让用户选择一个带有 ID 的单元格，然后在您的应用程序面板中，将有一个按钮单击或事件，它将调用 SQL Server 以返回数据。

2.  您将需要某种可用于从 SQL Server 检索数据的 Web API。该事件将传递用户选择的您的 ID，然后 Web API 将返回客户详细信息以填充到您的应用程序面板中。

[在 MSDN](http://msdn.microsoft.com/en-us/library/jj220082%28v=office.15%29.aspx)网站上的教程中设置应用程序面板似乎非常简单。您可以使用 HTML 和 CSS 设置它来设计页面。

我认为你要做的最重要的事情就是设置 API 来访问数据。

# php - Codeigniter：加载带有#id的视图文件到url以向下滚动页面

> ID：12618745
> 
> 赞同：1
> 
> 时间：2012-09-27T09:57:36.647
> 
> 标签：php, validation, codeigniter, view

我在 codeigniter 中使用表单验证类。一切正常，但是当它重新加载带有错误的表单时，页面再次位于顶部。（因为它已刷新）。有没有办法可以`#id`在 url 的末尾添加一个，这样它就会在表单所在的页面更下方加载？

我尝试`redirect('form/form#form, 'refresh')`了哪个有效，但没有解决错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:24:22.070

你只是在做一个简单的表单验证，对吧？如果是这样，您应该能够在出错后使用 set_value 重新填充您的表单。

[http://codeigniter.com/user_guide/libraries/form_validation.html#repopulatingform](http://codeigniter.com/user_guide/libraries/form_validation.html#repopulatingform)

如果您使用 CI 的表单验证，我假设您的表单会返回到控制器。然后控制器应该确定去哪里。

```
 if ($this->form_validation->run() == FALSE) {
      $this->load->view('form#anchor');
  } else {
      $this->load->view('formsuccess');
  } 
```

您应该能够根据验证期间遇到的错误在控制器中动态设置 #anchor 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:23:56.253

问题是如果您重定向页面，那么 POST 数组就会被清除。因此 set_value() 无法重新填充您的表单。

有几种方法可以解决这个问题

1.  覆盖会话库。在这个库中，将您的帖子数组粘贴到重定向时的会话 flash_data 中。然后在您的 set_value 函数（其中有 2 个）中，如果您在 post 数组中找不到任何内容，请查找您的 flashdata。
2.  不要使用 set_value 函数。相反，在你的动作控制器中将你的表单数据放入 flashdata，在你的表单中，使用 $this->session->flashdata('form_field_1')，而不是 set_value('form_field_1');

就重定向而言，您做对了。

很抱歉懒惰并没有发布代码。如果这还不够清楚，请告诉我，我可以发布代码。

# c# - 从 DLL 调用 C# 中的 C++ 函数 - 奇怪的参数

> ID：12618747
> 
> 赞同：2
> 
> 时间：2012-09-27T09:57:44.243
> 
> 标签：c#, c++, dll, com

我有一个用 C++ 编写的函数，带有下一个标题：

```
void EncodeFromBufferIN(void* bufferIN,int bufferINSize, unsigned char*  &bufferOUT, int &bufferOUTSize); 
```

我已经像这样编辑了 .h 和 .cpp 文件，以便能够通过在 C# 中导入 DLL 来调用该函数：

```
**EncodeFromBufferIN.h**
extern "C" {
     __declspec(dllexport) void EncodeFromBufferIN(void* bufferIN, int bufferINSize, unsigned char*  &bufferOUT, int &bufferOUTSize);
}
**EncodeFromBufferIN.cpp**
extern void EncodeFromBufferIN(void* bufferIN, int bufferINSize, unsigned char*  &bufferOUT, int &bufferOUTSize){
    // stuff to be done
} 
```

但现在我的问题是我不知道如何在 C# 中调用该函数。我在 C# 中添加了下一个代码，但不确定如何将参数传递给函数。

```
[DllImport("QASEncoder.dll")]
        unsafe public static extern void EncodeFromBufferIN(void* bufferIN, int bufferINSize, out char[] bufferOUT, out int bufferOUTSize); 
```

bufferIN 和 bufferOUT 应该是字符串，但如果我这样调用函数：

```
public string prepareJointsForQAS()
{
   string bufferIN = "0 0 0 0 0";
   char[] bufferOUT;
   int bufferOUTSize;
   EncodeFromBufferIN(bufferIN, bufferIN.Length, bufferOUT, bufferOUTSize);
} 
```

我收到此错误：“...的最佳重载方法匹配有一些无效参数”。那么应该如何传递参数呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:54:47.363

编组最适合 C 风格的调用。所以最好在你的公共接口上使用纯 C。如果将本机代码更改为

```
void EncodeFromBufferIN(
    unsigned char* bufferIN, 
    int bufferINSize, 
    unsigned char* bufferOUT,     
    int* bufferOUTSize); 
```

那么C#中的调用可以这样

```
[DllImport("QASEncoder.dll")]
public static extern void EncodeFromBufferIN(
    String bufferIN, 
    int bufferINSize, 
    StringBuilder bufferOUT, 
    ref int bufferOUTSize);

String inStr = new String(255);
int inSize = 255;
// make an educated estimate for the output size 
// and preallocate in C# (I am guessing 255)
StringBuilder outStr = new StringBuilder(255);
int outSize = 255;

EncodeFromBufferIN(inStr, inSize, outStr, outSize); 
```

这样，您可以避免非托管代码中的内存分配（尽管可行）会变得混乱。

希望这能让你继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T19:06:01.793

一些对我有用的更正：

```
 string inStr = "Value to pass";
        int inSize = inStr.Length;
        StringBuilder outStr = new StringBuilder(255);
        int outSize = 255;

        EncodeFromBufferIN(inStr, inSize, outStr, ref outSize); 
```

问候。

# ruby-on-rails - 由于类图，Rspec + factory_girl 无限循环？

> ID：12618750
> 
> 赞同：0
> 
> 时间：2012-09-27T09:57:51.277
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我有简单的 rspec 测试，例如：

```
describe Flow do
  it "has a valid factory" do
    create(:flow).should be_valid
  end
end 
```

像 factory_girl 一样：

```
FactoryGirl.define do
  factory :flow do
    association :source
    ...some other associations...
  end
end 
```

现在，当我运行它并查看 rspec 的日志时，有一系列 sql 指令永远循环（> 2 小时）。循环完全相同，一遍又一遍地重复，由于`sequence()`工厂中的字段，只有一些值发生了变化。

我知道我的类图是循环的，这意味着 A 类与 B 类关联，B 类与 C 类关联，C 类与 A 类关联。

这可能是这种“无限”（可能在某个时候结束）循环的来源还是正常行为？我怎样才能防止这种情况发生？

# facebook - 如何将应用中的图像与相册图像链接，以便应用中的喜欢会喜欢相册中的图像？

> ID：12618752
> 
> 赞同：0
> 
> 时间：2012-09-27T09:57:54.883
> 
> 标签：facebook, photos

我需要一种方法来让应用程序内的图像中的“喜欢”相当于专辑上的喜欢。

例如，如果 image1 在应用中被点赞，那么包含 image1 的相册也会获得点赞。
这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:07:03.310

您可以使用按钮之类的插件

[这里是链接](https://developers.facebook.com/docs/reference/plugins/like/)

# java - 从 SOAPMessageContext 获取方法参数

> ID：12618756
> 
> 赞同：0
> 
> 时间：2012-09-27T09:58:18.787
> 
> 标签：java, web-services, jax-ws, handler

是否可以通过在客户端使用处理程序来获取通过 Web 服务调用传递的参数？每次我这样做时，我都会尝试记录我发送到网络服务的参数。

在这个追逐中，使用我分配给 Web 服务的 jax-ws 处理程序。这是处理程序外观和方法的一个简单而常见的示例。

```
 public class RafaSOAPHandler implements SOAPHandler<SOAPMessageContext> {

        @Override
        public boolean handleMessage(SOAPMessageContext context) {
        System.out.println("Client : handleMessage()......");
             // TODO: GET METHOD PARAMETERS HERE.
        return true;
        }

        @Override
        public boolean handleFault(SOAPMessageContext context) {
        System.out.println("Client : handleFault()......");
        return true;
        }

        @Override
        public void close(MessageContext context) {
        System.out.println("Client : close()......");
        }

        @Override
        public Set<QName> getHeaders() {
        System.out.println("Client : getHeaders()......");
        return null;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:25:23.560

> 是否可以通过在客户端使用处理程序来获取通过 Web 服务调用传递的参数？

答案很简单：是的，这是可能的。您可以像这样提取肥皂消息`SOAPMessageContext`：

```
public boolean handleMessage(SOAPMessageContext context) {
    SOAPMessage message = context.getMessage();
    SOAPHeader header = message.getSOAPHeader();
    SOAPEnvelope envelope = message.getSOAPPart().getEnvelope();
} 
```

只要您有肥皂信封，您就可以从`SOAP`消息中获得任何参数。

# jquery - Jquery UI自动完成检测值是否未更改

> ID：12618757
> 
> 赞同：0
> 
> 时间：2012-09-27T09:58:21.980
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我知道有一个用于 jquery UI 自动完成的事件，它是`change`事件。但`change`事件仅在输入字段的值更改时触发。如果值没有改变，我想触发一个函数。所以我想要类似于`nochange`事件的东西？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:07:59.890

在 document.ready 中使用 setInterval() 可以检查文本是否在时间间隔内更改，如果没有更改，您可以执行一些操作。

```
$(document).ready(function() {
  setInterval(function() {
   // check whether the text is changed or not
  }, 2000);
}); 
```

# java - 如何在带有 dom4j 的 xpath 中使用 count() 方法？

> ID：12618760
> 
> 赞同：3
> 
> 时间：2012-09-27T09:58:25.347
> 
> 标签：java, xml, parsing, dom4j

我想得到书的节点数：

```
<books>
<book>1</book>
<book>2</book>
<book>3</book>
</books>

Document document = null;
try
{           
    InputStream in = new FileInputStream(new File("./src/main/java/live.xml"));
    document = reader.read(in);
}
catch (Exception e)
{
    e.printStackTrace();
}

Node node = document.selectSingleNode("count(/books/book)"); 
```

异常：： `org.dom4j.XPathException`评估 XPath 时发生异常：XPath 表达式的结果不是节点。它是：3.0 类型：java.lang.Double。

我的问题是如果我想在 xpath 中使用 count 方法，如何将 Node 类型转换为 Double 类型？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:54:47.453

**使用[numberValueOf()](http://dom4j.sourceforge.net/dom4j-1.6.1/apidocs/org/dom4j/Node.html#numberValueOf%28java.lang.String%29)**

> 公众[号](http://java.sun.com/j2se/1.3/docs/api/java/lang/Number.html)numberValueOf( [String](http://java.sun.com/j2se/1.3/docs/api/java/lang/String.html) xpathExpression)
> 
> *numberValueOf* 计算 XPath 表达式，如果 XPath 表达式的结果是数字，则返回 XPath 表达式的数值；如果结果不是数字，则返回 null。
> 
> **参数**：*xpathExpression* - 是要评估的 XPath 表达式
> 
> **返回：** XPath 表达式的数字结果；如果结果不是数字，则返回 null。

例子：

```
document.numberValueOf("count(/books/book)"); 
```

# knockout.js - 淘汰赛分页

> ID：12618763
> 
> 赞同：2
> 
> 时间：2012-09-27T09:58:32.123
> 
> 标签：knockout.js, paging

我有一个带有分页功能的视图模型，它维护 pageIndex 属性。Viewmodel 有一个带有页面的 pages 数组。每个页面都有自己的 pageNumber 属性。

我的视图模型的分页代码：

```
//paging
pageIndex: ko.observable(),
pageSize: ko.observable(),
pageCount: ko.observable(),
pages: ko.observableArray([]),
nextPage: function () {
    alert("Next");
    this.pageIndex = this.pageIndex + 1;
    alert(this.pageIndex);
},
previousPage: function () {
    //alert("PRev");
    this.pageIndex = this.pageIndex - 1;
    alert(this.pageIndex);
},
gotoPage: function (page) {
    //alert("GO:" + page.pageNumber);
    this.pageIndex = page.pageNumber;
    alert(this.pageIndex);
}, 
```

在我看来，我有一个嵌套列表：

```
<nav id="paging">
<ul class="paginationList">
    <li class="paginationList" data-bind="visible: pageIndex > 0">
        <a href="#" data-bind="click: previousPage"><<</a>
    </li>
</ul>
<ul class="paginationList" data-bind="foreach: pages">
    <li class="paginationList">
            <a href="#" data-bind="click: $parent.gotoPage, css: { disabled: $parent.pageIndex == $data.pageNumber }, text: $data.pageNumber"></a>     
    </li>
</ul>
<ul class="paginationList">
    <li class="paginationList" data-bind="visible: pageIndex < pageCount">
        <a href="#" data-bind="click: nextPage">>></a>
    </li>
</ul> 
```

它可以工作，但是当单击“下一步”功能时 pageIndex 会发生变化，但锚点禁用状态不会改变。

我无法解决它为什么会发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T10:03:33.017

`pageIndex`不是属性而是函数。将其设置为：

```
this.pageIndex(page.pageNumber); 
```

# sql - 存储过程中的动态 T-SQL：关键字 FROM 附近的错误。新查询中的代码完美运行

> ID：12618771
> 
> 赞同：1
> 
> 时间：2012-09-27T09:58:55.507
> 
> 标签：sql, tsql, stored-procedures, syntax-error, dynamic-sql

我正在使用 SQL Server 2008 R2 (T-SQL) 并具有动态 SQL 代码，该代码将一些数据插入到临时表中。如果我在新查询窗口或 PRINT 代码中运行代码，然后在新查询窗口中运行一切都很好，但是如果我尝试从存储过程中运行它会抛出错误

```
Msg 156, Level 15, State 1, Procedure users, Line 3
Incorrect syntax near the keyword 'FROM'. 
```

如果我删除行`INSERT INTO #viewsTmp (webId, listId, viewName, viewTitle)`，代码运行良好。我在同一个存储过程中有类似的代码，并且该代码很好。

温度表：

```
CREATE TABLE #viewsTmp 
(
    webId uniqueidentifier,
    listId uniqueidentifier,
    viewName NVARCHAR(128),
    viewTitle NVARCHAR(255)
) 
```

变量@databaseName 被声明为存储过程的参数

```
@databaseName NVARCHAR(255) 
```

在新查询窗口中可以的代码，但如果从存储过程运行则不行：

```
SET @sql = N'
INSERT INTO #viewsTmp (webId, listId, viewName, viewTitle)
SELECT c.tp_WebId, c.tp_ID, b.LeafName, c.tp_Title
FROM (
    SELECT *
    FROM (
        SELECT [ListId], [LeafName], [Type], [WebId]
              ,ROW_NUMBER() OVER (PARTITION BY ListId ORDER BY DirName) AS RowNumber
          FROM ['+@databaseName+'].[dbo].[Docs]
          WHERE [LeafName] = ''users''
    ) AS a
    WHERE  [RowNumber] = 1 AND [Type] = 1
) AS b
INNER JOIN 
    (SELECT [tp_WebId], [tp_ID], [tp_Title] FROM ['+@databaseName+'].[dbo].[Lists]) 
    AS c 
    ON b.ListId = c.tp_ID AND b.WebId = c.tp_WebId

';
--PRINT @sql
exec sp_executesql @sql; 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:25:34.700

我按照 Dale Burrell 的建议逐步分解和组合代码，并进行了一些小的修改......并且代码运行和不运行。我不知道那是什么......最后我发现了一个我的错误......

代码本身没问题，但是我将@webId 作为参数来调用在代码之后调用的内部过程，并且出现错误。我有一个 webId 的所有行，但恰好有另一行（设计中的例外），我为这一行传递了与另一行相同的 webId，然后在这个子例程中出现错误。所以错误消息不是针对上面的代码，而是针对被调用过程中的某些代码...

哦，我的……5个小时的时间……

在各方面，非常感谢您的帮助！我今天学到了另一件事关于 T-SQL 中的错误。

# javascript - Javascript图像幻灯片循环

> ID：12618775
> 
> 赞同：3
> 
> 时间：2012-09-27T09:59:18.020
> 
> 标签：javascript, html, image, slideshow

我有幻灯片的代码。但是我想要做的是加载一个输入框，让用户输入文件夹的名称，然后页面找到该文件夹​​并显示该文件夹中的每个图像。**我设法通过拥有两个不同的页面来做到这一点，一个带有输入框，另一个显示图像。**

但是，我宁愿不对图像源进行硬编码，因为我希望网页在服务器上运行，但不同的幻灯片放映可能会在公司的不同地方运行。根据我所做的研究，我认为我需要一个 for 循环来循环文件夹中的每张图片，但不能 100% 确定。这是我到目前为止所得到的：

我已经从上一页传入了文件夹名称。但是正如您所看到的，图像路径仍然是硬编码的。我想要一个 for 循环来循环遍历每张图片并将它们全部显示在网页上，无论它们在哪里/有多少只要输入正确文件夹/幻灯片名称。由于图像文件夹都将位于网络路径上的同一位置。

```
 <!DOCTYPE html>
<html>

<head>
<script type="text/javascript">
var first = getUrlVars()["SlideShowTest"];

function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}
//alert(first)
//-->
</script>

</head>
<body>

<script type="text/javascript">
<!--
var step=1
function slideit(){
document.images.slide.src=eval("image"+step+".src")
if(step<3)
step++
else
step=1
setTimeout("slideit()",2500)
}
slideit()
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:37:41.263

看起来它可能会起作用。

关于样式，您可以将图像放入数组中以摆脱 eval：

```
var images= [];
var image;
image= new Image();
image.src= '...';
images.push(image);

for(var i=0; i<images.length; ++i) { 
   image= images[i];
   ...
} 
```

最好使用 setInterval("slideit()",2500); 一次而不是 setTimeout。

# grails - Spring Security UI Grails 只为管理员搜索/创建/编辑用户？

> ID：12618783
> 
> 赞同：0
> 
> 时间：2012-09-27T09:59:35.133
> 
> 标签：grails, user-interface, spring-security, admin

我目前正在研究 Grails 中的解决方案，并且我已经安装了以下安全插件：

*   Spring 安全核心
*   弹簧安全用户界面

我基本上会有一个具有以下安全结构的解决方案：

*   超级用户
*   管理员（针对不同的业务领域）
*   用户（不同业务领域内）

所以基本上我安装了 Spring Security UI 是为了让各个 Business Area Admins 管理他们自己的区域，他们应该能够使用 UI 以便让他们只搜索自己区域中的用户，在他们自己的区域中创建用户区域和编辑用户只在他们自己的区域。然而，spring security UI 让有权访问一揽子访问权限的人可以做任何事情。

我在 spring 安全域模型中添加了一个额外的字段，即“区域”，所以我在想当管理员搜索用户时，他们只会看到与他们在同一区域中的用户，当他们创建一个用户时，他们只能这样做所以对于他们自己的区域，他们只能编辑自己区域的用户。

下面是 Spring Security UI 用于搜索用户的一些代码，我可以修改它以便只返回与当前登录的管理员位于同一区域的用户吗？或者，还有更好的方法？

```
def userSearch = {

    boolean useOffset = params.containsKey('offset')
    setIfMissing 'max', 10, 100
    setIfMissing 'offset', 0

    def hql = new StringBuilder('FROM ').append(lookupUserClassName()).append(' u WHERE 1=1 ')
    def queryParams = [:]

    def userLookup = SpringSecurityUtils.securityConfig.userLookup
    String usernameFieldName = userLookup.usernamePropertyName

    for (name in [username: usernameFieldName]) {
        if (params[name.key]) {
            hql.append " AND LOWER(u.${name.value}) LIKE :${name.key}"
            queryParams[name.key] = params[name.key].toLowerCase() + '%'
        }
    }

    String enabledPropertyName = userLookup.enabledPropertyName
    String accountExpiredPropertyName = userLookup.accountExpiredPropertyName
    String accountLockedPropertyName = userLookup.accountLockedPropertyName
    String passwordExpiredPropertyName = userLookup.passwordExpiredPropertyName

    for (name in [enabled: enabledPropertyName,
                  accountExpired: accountExpiredPropertyName,
                  accountLocked: accountLockedPropertyName,
                  passwordExpired: passwordExpiredPropertyName]) {
        Integer value = params.int(name.key)
        if (value) {
            hql.append " AND u.${name.value}=:${name.key}"
            queryParams[name.key] = value == 1
        }
    }

    int totalCount = lookupUserClass().executeQuery("SELECT COUNT(DISTINCT u) $hql", queryParams)[0]

    Integer max = params.int('max')
    Integer offset = params.int('offset')

    String orderBy = ''
    if (params.sort) {
        orderBy = " ORDER BY u.$params.sort ${params.order ?: 'ASC'}"
    }

    def results = lookupUserClass().executeQuery(
            "SELECT DISTINCT u $hql $orderBy",
            queryParams, [max: max, offset: offset])
    def model = [results: results, totalCount: totalCount, searched: true]

    // add query params to model for paging
    for (name in ['username', 'enabled', 'accountExpired', 'accountLocked',
                  'passwordExpired', 'sort', 'order']) {
        model[name] = params[name]
    }

    render view: 'search', model: model
} 
```

编辑....

我相信这可能与下面的代码有关：

```
def results = lookupUserClass().executeQuery(
            "SELECT DISTINCT u $hql $orderBy",
            queryParams, [max: max, offset: offset]) 
```

我想我只需要更改此语句，以便它查找当前登录的用户“区域”与用户相同的区域的用户列表。谁能帮我解决这个问题？？

编辑 2……

我现在已经对此进行了研究，并且已经能够获取用户区域，现在我需要做的就是修改对数据库的查询，以查找与管理员搜索具有相同区域的用户。我试过以下没有运气，有人可以帮我解决这个问题，因为我知道这一定很简单，只是似乎无法到达那里：-S

```
 def user = springSecurityService.currentUser
        def userArea = user.area

        def hql = new StringBuilder('FROM ').append(lookupUserClassName()).append(' u WHERE 1=1 AND u.area = userArea') 
```

编辑 3.......

非常感谢我的问题解决了一半，现在只是 Ajax 部分：

我尝试了以下代码，以修改对 Ajax 函数的搜索，使其仅返回用户区域与当前登录用户相同的结果：

```
String username = params.term
            String usernameFieldName = SpringSecurityUtils.securityConfig.userLookup.usernamePropertyName
            def user = springSecurityService.currentUser

            setIfMissing 'max', 10, 100

            def results = lookupUserClass().executeQuery(
                    "SELECT DISTINCT u.$usernameFieldName " +
                    "FROM ${lookupUserClassName()} u " +
                    "WHERE LOWER(u.$usernameFieldName) LIKE :name AND LOWER(u.area) = :area " +
                    "ORDER BY u.$usernameFieldName",
                    [name: "${username.toLowerCase()}%"],
                    [area: "user.area"],
                    [max: params.max]) 
```

还尝试更改参数如下：

```
[area: user.area] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:27:00.820

控制器正在构建 HQL 查询，因此您不能只说“ `WHERE u.area = userArea`”，您需要使用命名参数并将值放入`queryParams`映射中

```
 def user = springSecurityService.currentUser

    def hql = new StringBuilder('FROM ').append(lookupUserClassName()).append(
        ' u WHERE u.area = :userArea ')
    def queryParams = [userArea:user.area] 
```

对于问题的第二部分（Ajax 位），我怀疑您是否需要`LOWER`转换，并且您还需要将所有查询参数放入一个地图中（第二个地图参数仅用于分页设置）：

```
def results = lookupUserClass().executeQuery(
   "SELECT DISTINCT u.$usernameFieldName " +
   "FROM ${lookupUserClassName()} u " +
   "WHERE LOWER(u.$usernameFieldName) LIKE :name AND u.area = :area " +
   "ORDER BY u.$usernameFieldName",
   [name: "${username.toLowerCase()}%", area:user.area],
   [max: params.max]) 
```

如果您确实希望`area`检查不区分大小写，请将其保留为，`LOWER(u.area) = :area`但您还需要将要测试的值转换为小写：

```
 [name: "${username.toLowerCase()}%", area:user.area.toLowerCase()], 
```

# cakephp - 在 Cakephp 中放置和访问 app/webroot 之外的图像

> ID：12618786
> 
> 赞同：1
> 
> 时间：2012-09-27T09:59:45.237
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我目前将上传的图像保存在*/cakephp/uploads/*中，而不是在*/cakephp/app/webroot/imgs/*中进行。

当我尝试通过 URL 访问图像时，如下所示：

```
http://myweb.com/cakephp/uploads/imageName.jpg 
```

它显示 404 错误。我想，由于*.htaccess*，或者更具体地说，是由于我在带有 ISS7 的 Windows 下使用的*web.config文件。*

*有没有办法在不修改web.config*文件的情况下访问它们？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T10:09:45.103

我的理解是，任何**没有**放在`webroot`文件夹中的东西都不能通过 url 直接访问。要访问 webroot 之外的文件，您可以使用[Media Views](http://book.cakephp.org/2.0/en/views/media-view.html)。

我只是把你的`uploads`文件夹放在你的文件夹里`APP`，`http://myweb.com/cakephp/app/uploads`

然后调整`path`到`path => APP . 'uploads' . DS`

目前尚不清楚您为什么要这样做；如果您只想像平常一样访问图像，请将`uploads`in 放入您的`img`目录。

通常，您会使用这种方法来提供文件等，允许用户身份验证等。

# javascript - Jquery 为特定的包装器使用名称选择器

> ID：12618788
> 
> 赞同：0
> 
> 时间：2012-09-27T09:59:49.443
> 
> 标签：javascript, jquery

我正在使用以下选择器：

```
$('#details:input[name=addr]').remove(); 
```

我正在尝试从div中检索所有在字段中`addr`设置的输入字段。`name``#details`

但是该字段不会被删除。选择器返回一个 Object 实体，但不会发生删除。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:01:24.470

尝试

`$("#details input[name=addr]").remove()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:03:47.177

试试这个代码。

```
 $("#details input[name=addr]").remove(); 
```

# jquery - Jquery：取消选中一个单选按钮（在一组 1 个单选按钮中）

> ID：12618791
> 
> 赞同：0
> 
> 时间：2012-09-27T09:59:53.637
> 
> 标签：jquery, radio-button

我有这段代码可以取消选中一组单选按钮：

```
$('form[id^="fm-form"]')
     .find("input.groupOfButtons:radio:checked")
     .prop('checked',false); 
```

当组中至少有两个单选按钮时，这可以正常工作。

如果只有一个，则脚本不起作用。

当只有 1 个单选按钮时，如何禁用单选按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:13:16.973

检查这个程序，它对我有用

```
 <html>
            <head>
                <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
                <script type="text/javascript">
                    $(document).ready(function()
                    {
                        $("#Check").click(function()
                        {                    
                            $("#radio").prop('checked', true);
                        });

                        $("#UnCheck").click(function()
                        {                    
                            $("#radio").prop('checked', false);
                        });
                    });
                </script>
            </head>
            <body>
                <input type="radio" id="radio" />
                <button id="Check">Check</button>
                <button id="UnCheck">Un Check</button>
            </body>
        </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:10:25.207

尝试使用[removeProp](http://api.jquery.com/removeProp/)而不是 prop

```
.removeProp('checked') 
```

# wpf - 加载操作在获取 100000+ 条记录时卡住了 wcf ria services silverlight

> ID：12618792
> 
> 赞同：0
> 
> 时间：2012-09-27T09:59:56.977
> 
> 标签：wpf, wcf, silverlight, wcf-ria-services

我调用了一个 wcf ria 服务函数，它返回超过 100,000 条记录。当我调试代码时，该函数返回的对象需要正常时间来加载这么多记录。但是当在视图模型的加载操作的回调函数中时，它会无限期地卡在那里。任何人都可以请指导我。

请检查下面我的视图模型的代码...

```
EntityQuery<DataSetData> KPIPivotGridViewDataQuery = GridDataContext.GetPivotGridViewKPIDataQuery(KPIInfo.KPI_Id, srcTableName, HelperMethods.GetLanguageID(), dateCol, StDate, EdDate);
            LoadOperation<DataSetData> loPivotGridViewDataQuery =   GridDataContext.Load(KPIPivotGridViewDataQuery);

            loPivotGridViewDataQuery.Completed += (sender, e) =>
            {
                LoadOperation<DataSetData> vals = sender as LoadOperation<DataSetData>;
                if (!vals.HasError)
                {
                    DataSetData data = vals.Entities.FirstOrDefault();
                    IEnumerable KPIPivotGridViewData = DynamicDataBuilder.GetDataList(data);
                    this.PivotGridViewPagedView = new RadGVPagging(KPIPivotGridViewData);//new ObservableCollection<object>(KPIPivotGridViewData.Cast<object>());

                    this.isBusy = false;
                }
                else
                {
                    this.isBusy = false;
                    //this.BIChart.IsBusy = false;
                    SilverlightMessageBox.ShowErrorDialog(vals.Error.Message, rm.GetString("msgErrorHeading", CultureInfo.CurrentUICulture));
                    ISFLogging.AddLog(vals.Error.Message, "GetPivotGridViewData.loChartDataQuery_Completed");
                }
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:40:06.257

您可以传递的数据量是有限制的。也许检查一下如何改变它

[如何增加可以从 RIA 服务传回的数据量？](https://stackoverflow.com/questions/5263939/how-do-i-increase-the-amount-of-data-i-can-pass-back-from-a-ria-service)

还有这个

[http://forums.silverlight.net/t/148523.aspx](http://forums.silverlight.net/t/148523.aspx)

# apache - 一旦首先应用 All，Apache AllowOverride none 就不适用于子目录

> ID：12618793
> 
> 赞同：1
> 
> 时间：2012-09-27T10:00:09.870
> 
> 标签：apache, .htaccess

我不确定这里出了什么问题，但我有以下配置：

```
 # Root
    <Directory /var/www/xxx/>
            AllowOverride All

            Header always append Directory Home
    </Directory>

    # images
    <Directory /var/www/xxx/images/>
            AllowOverride None

            Order allow,deny
            allow from all

            Header always append Directory images
    </Directory> 
```

在根目录中，我有一个 .htaccess 文件，将其包含在目录中的任何位置。

我想要做的是从这个配置中排除“图像”目录。我为每个目录添加了一个特殊的标头，以便我可以调试它，并根据下面的 CURL 命令 - 它正确地遵循规则。

```
< HTTP/1.1 401 Authorization Required
< Directory: Home, images
< Last-Modified: Fri, 21 Sep 2012 09:47:28 GMT
< ETag: "9e81e5-4069-20b94c00"
< Accept-Ranges: bytes
< Content-Length: 16489
< Connection: close
< Content-Type: image/png 
```

问题是我收到 401 而不是 200OK，根据标题（主页，图像） - 它首先得到“全部”，然后应该用“无”覆盖它 - 但它没有，我还在收到401，这可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:10:25.150

您在父目录中有一个需要授权的 htaccess 文件，该文件将应用于该`/images/`目录。该`AllowOverride`指令允许 htaccess 文件中的指令，它不会删除或禁止父 htaccess 文件可能具有的任何内容。

因此，如果您有：

1.  文档根目录：`AllowOverride All`
2.  文档根目录 htaccess 文件：需要验证，有效用户

进而：

1.  图片目录：`AllowOverride None`
2.  图像目录 htaccess：此文件中的任何内容都不会应用，因为`AllowOverride`

但父 htaccess 中的所有指令仍然适用。

如果您希望`/images`从需要身份验证的目录中排除，您需要在父 htaccess（或 vhost 配置，或任何您的设置）中的身份验证设置中设置排除项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:19:38.260

通过使用“满足任何”，我解决了子目录没有 AUTH 的问题

```
<Directory /var/www/xxx/images/>
    allow from all
    Satisfy Any

    Header always append Directory images
</Directory> 
```

# javascript - 如果连接了 jquery-ui.js，我应该连接 jquery-ui.css 吗？

> ID：12618797
> 
> 赞同：1
> 
> 时间：2012-09-27T10:00:15.790
> 
> 标签：javascript, jquery, html, css

如果页面看起来很好但没有，我应该同时连接`jquery-ui.js`和文件吗？`jquery-ui.css``jquery-ui.js``jquery-ui.css`

我应该关心`jquery-ui.css`吗？

`jquery-ui.js`我的滑块绝对需要PS ，但即使没有 jquery-ui.css，滑块看起来也不错。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:03:34.077

是的你应该。

大多数 jQuery UI 小部件依赖于该文件中定义的样式规则来执行它们的布局。省略它会给你带来奇怪的错误，例如，对话框没有正确呈现，或者选项卡和手风琴布局不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:11:30.047

是的，例如，如果您在页面上使用 ui.datepicker，如果您的页面中不包含 css 文件，则不会采用日历的样式。

# api - 从 LinkedIn API 中的浏览器 URL 获取公共 URL

> ID：12618802
> 
> 赞同：1
> 
> 时间：2012-09-27T10:00:46.053
> 
> 标签：api, linkedin

如何从浏览器 URL 获取公共 URL？通过“浏览器 URL”，我的意思是：

[http://www.linkedin.com/profile/view?id=34661816&pid=5000742&authType=name&authToken=j2C6&trk=pbmap](http://www.linkedin.com/profile/view?id=34661816&pid=5000742&authType=name&authToken=j2C6&trk=pbmap)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T23:23:51.060

您无法使用“浏览器 URL”获取公开个人资料 URL。通过 LinkedIn API，您可以使用以下 API 调用获取用户的公开个人资料 URL：

获取[http://api.linkedin.com/v1/people/~:(public-profile-url)](http://api.linkedin.com/v1/people/~:(public-profile-url))

请注意，我将“public-profile-url”作为字段选择器传递。这也假设您已经正确验证了您的应用程序：[https ://developer.linkedin.com/documents/authentication](https://developer.linkedin.com/documents/authentication)

# c# - 绘制给定线条列表的形状

> ID：12618806
> 
> 赞同：0
> 
> 时间：2012-09-27T10:01:07.567
> 
> 标签：c#, opengl, polygon, shape, shapes

我正在使用 C# OpenTK，但是 C++ OpenGL 中的任何代码都很好，我理解。

我有一个标记列表。标记定义为 2 坐标，以及指向循环中下一个标记的指针。从本质上讲，如果您要遵循这些指针的路径，您最终会到达您开始使用的标记。这就是最初定义形状的方式。

这些“循环”之一可能不是列表中的所有标记。可能包含多个“循环”。以字母“A”为例：

![在此处输入图像描述](../Images/8a3d63b8e470fae0968c16feb579d4cf.png)

此处的此形状将由 2 个“循环”定义。一个是轮廓（8 个标记），而另一个循环是（3 个标记）内的三角形。

*（标记 - 指针）*

*   1-2、2-3、3-4、4-5、5-6、6-7、7-8、8-1
*   9-10、10-11、11-9

我需要一种方法，可以让我在屏幕上画出这样的东西。[此处](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)所述的解决方案将正确解决位图级别的问题（逐个像素检查它是否在多边形内），但是效率非常低，特别是考虑到**这些标记应在运行时连续移动**的事实。

要求这些形状应该能够包含诸如 A（倒置）中的三角形之类的东西，并且最好允许“循环”的重叠边界，但第二个东西不是必需的。

我猜所采用的方向要么是某种转换为三角形，要么是一些具有内置 OpenGL 功能的花哨技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:43:35.110

您正在寻找带孔 的[三角剖分。](http://en.wikipedia.org/wiki/Polygon_triangulation)

查看[通用多边形剪裁器 (GPC)](http://www.cs.man.ac.uk/~toby/gpc/#Features)。

# javascript - javascript 变量替换 this.refresh ， window.refresh

> ID：12618807
> 
> 赞同：1
> 
> 时间：2012-09-27T10:01:08.753
> 
> 标签：javascript, android, html, ios, cordova

在我的 phone-gap index.html javascript 部分中，window.refresh 用于 IOS，this.refresh 用于 android。我想对两者使用相同的 index.html。通过(navigator.userAgent.toLowerCase().match()，我可以区分IOS和android，但是我不想每次window都应用这个条件。或者this.是要使用的。我可以全局应用这个条件吗并将值分配给变量，即 android 的“this”和 IOS 的“window”，然后在需要的地方使用该变量。这种事情是否可能或任何解决方法，以便可以避免多个 if -else 语句。

任何建议都非常受欢迎。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:06:41.137

扩展 jsalonen 答案

```
<script>
function browserRefresh()
{
   if(this.refresh === undefined) {
        window.refresh();
    } else {
        this.refresh();
    } 
}
</script> 
```

当您想刷新时，只需致电

```
browserRefresh(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:02:34.867

如果存在，您可以尝试`this.refresh`并调用它。如果它未定义，您可以回退到`window.refresh`. 代码示例：

```
if(this.refresh === undefined) {
    window.refresh();
} else {
    this.refresh();
} 
```

我不确定哪种方式最有意义，但我希望你明白这个概念：如果某物是`undefined`，你不能称之为它，需要找出其他东西。

# actionscript-3 - AS3 键盘事件行为在操作系统上有所不同

> ID：12618809
> 
> 赞同：2
> 
> 时间：2012-09-27T10:01:13.177
> 
> 标签：actionscript-3, keyboard

我在 a`KeyboardEvent`上使用了 a ，`TextArea`并尝试在char 样式按键上执行一些操作。我的问题是我没有一种均匀的方法来捕捉这些字符。`>``/`

例如，对于`>`按下的，在 Mac 上：

```
String.fromCharCode(event.charCode); // -> ">"
trace(event.keyCode);                // -> 62 
```

在 Windows 上：

```
String.fromCharCode(event.charCode); // -> "<"
trace(event.keyCode);                // -> 226 
```

我在其他网站上找到了这个：

> 不同的操作系统对键盘事件的行为不同，因为闪存只是插入操作系统已经存在的键盘接口。注意 键盘在 Windows、Mac 和 Linux 之间的作用不同。

那么，对于这些用例，我可以使用哪些最佳实践来保持一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:54:37.310

您应该使用 charCode，因为它使用 charset（支持 ASCII 的默认 UTF-8）会更准确，keycode 是来自键盘的代码，这意味着您可以对相同的键使用不同的代码，例如从“main”中减去" kebord 的一部分和数字键盘中的减号将有不同的代码。

[了解 keyCode 和 charCode 属性](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf64a29-7fdb.html#WS2db454920e96a9e51e63e3d11c0bf64a29-7fed)

# javascript - 使用原型属性定义 Javascript 函数

> ID：12618811
> 
> 赞同：1
> 
> 时间：2012-09-27T10:01:21.577
> 
> 标签：javascript

这段代码有什么问题？

```
(function (){
    'use strict';

    // add hasClass function
   String.prototype.hasClass = function (className) {
       return this.className.search('(\\s|^)' + className + '(\\s|$)') != -1 ? true : false;
   };

   console.log(document.getElementById('link').hasClass('test'));    
})(); 
```

我希望它会返回`true`or `false`，但我得到的只是

```
TypeError: document.getElementById("link").hasClass is not a function** 
```

**UPD：**谢谢大家。现在我懂了。我应该将方法设置为对象或元素（更正确的是什么？）而不是字符串！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T10:15:36.887

document.getElementById('link') 不返回字符串，而是返回 DOM 元素。你可以试试这个： -

```
 Element.prototype.hasClass = function (className) {
       return this.className.search('(\\s|^)' + className + '(\\s|$)') != -1 ? true : false;
   };

   console.log(document.getElementById('link').hasClass('test')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:03:10.810

据我所知，`hasClass`is not a method of `Element`，您可能会想到 jQuery 方法，因此您必须使用 jQuery 并使用 jQuery 选择器选择元素。其他框架也可能有这样的方法，我相信 YUI 也有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T10:48:37.093

这样做的方法是编写一个接收 DOM 元素的函数，因为 String 对象与它无关；）

一个简单的例子：

```
function hasClass(element, classcheck){
  return element.className.indexOf(classcheck) !== -1;
} 
```

所以你的代码看起来像：

```
(function (){
    'use strict';

    // add hasClass function
    function hasClass(element, classcheck){
      return element && element.className && element.className.indexOf(classcheck) !== -1;
    }

   console.log(hasClass(document.body,'test'));
})(); 
```

显然，您应该检查第一个参数是否实际上也是一个 DOM 元素（实现这一点的方法有很多），但这是正确的方法。

# ios - iOS：在应用程序处于活动状态时读取短信，就像 Drivesafe.ly 一样

> ID：12618813
> 
> 赞同：0
> 
> 时间：2012-09-27T10:01:25.447
> 
> 标签：ios, sms

您能否指出一种允许应用程序在应用程序处于活动状态时读取短信的方法。

我知道很多人说这是不可能的，但 Drivesafe.ly 做到了，我知道一些银行应用程序做到了。唯一有效的条件是应用程序当前处于活动状态（显示在屏幕上）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:58:53.357

恐怕它在 iPhone 上仍然不可能。如果您查看 Drivesafe.ly 应用程序的[iTunes 页面](https://itunes.apple.com/nz/app/drivesafe-ly/id412490747?mt=8#038;ls=1)，就会有相关通知。

它说：

> ...该应用程序不会大声朗读直接来自您的无线运营商的本地文本消息。不幸的是，这在今天的 iOS 设备上在技术上是不可能的......

# java - Android Webview - 如果太大，则调整图像大小

> ID：12618814
> 
> 赞同：2
> 
> 时间：2012-09-27T10:01:27.020
> 
> 标签：java, android, image, webview, image-resizing

我正在用 Java 编写一个 Android 应用程序，它基本上用作私人论坛的论坛阅读器。该应用程序显示一个线程列表，一旦用户选择一个线程，就会打开一个新的 Activity，它基本上由一个 WebView 组成。该应用程序下载并解析论坛主题的源代码 (html)，然后返回仅包含所需信息的“帖子”项目列表（例如作者、html 内容等）。最后，我只是从该帖子列表中构建一些 HTML 并将其显示在 WebView 中。

虽然这工作得很好，但图像存在一个问题：有时图像非常大，用户必须水平和垂直滚动才能看到整个图像。我想将这些图像的大小调整为 WebView 的宽度（以便它们始终完全可见），并可选择将它们转换为打开全尺寸图像的超链接。

由于我自己解析线程 HTML，理论上我可以获取每个 img 标签并为其添加一个“width=100%”属性。那么问题是小图像（例如表情符号！）也被调整大小并且被放大得非常大。我只想调整太大而无法在设备上显示的图像。

我怎样才能做到这一点？我能想到的一些方法（但不能完全达到所需的解决方案）当然是：

*   在 WebView 中显示之前修改帖子内容的 HTML，
*   更改 WebView 用于显示帖子内容的 CSS 样式表
*   将 javascript 添加到 WebView 源

基本上我可以完全访问 HTML、CSS 和 Javascript，但我仍然无法弄清楚如何调整太大的图像（但不是太大的图像）。

缩放不是问题，因为此 WebView 已禁用它。

有谁知道如何达到这种效果？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T00:32:12.480

您是否尝试在 HTML 文件中设置视口？

下面是一个如何实现这一目标的示例，对于高密度、中密度和低密度设备，您可以设置最小规模、最大规模等参数。

```
function setViewPort() {
    var viewport = document.querySelector("meta[name=viewport]");

    //high-density screen
    if (window.devicePixelRatio == 1.5) {
        viewport.setAttribute("content", "target-densitydpi=high-dpi, width=device-width, height=device-height, initial-scale=1.15, minimum-scale=1.15, maximum-scale=1.8" );
    }
    //medium-density screen
    else if (window.devicePixelRatio == 1.00) {
        viewport.setAttribute("content", "target-densitydpi=low-dpi, width=device-width, height=device-height, initial-scale=1.3, minimum-scale=1.3, maximum-scale=1.3");
    }
    //low-density screen
    else if (window.devicePixelRatio == 0.75) {
        viewport.setAttribute("content", "target-densitydpi=device-dpi, width=device-width, height=device-height, maximum-scale=1.3");
    }} 
```

还要检查来自 WebApps 的 Android Doc [Targeting Screens](http://developer.android.com/guide/webapps/targeting.html)

# css - ie 9 中不显示背景图片

> ID：12618816
> 
> 赞同：0
> 
> 时间：2012-09-27T10:01:32.683
> 
> 标签：css, internet-explorer, internet-explorer-9

我的一张背景图片没有显示在 ie 9 中，[这里](http://djembefola.com/shop/index.php)称为“djembe-drums” 。

它在 FF 和其他浏览器中工作....任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:05:24.337

您`djembecategory`在该元素上有类而不是`djembeCategory`.

在 IE 的许多版本/模式中存在一个错误，其中 CSS 选择器区分大小写。

# google-visualization - 获取谷歌可视化图表中的选定值

> ID：12618818
> 
> 赞同：0
> 
> 时间：2012-09-27T10:01:40.703
> 
> 标签：google-visualization

我在谷歌可视化图表中工作。我设计了一个 orgChart。这是我的代码。

```
 <script type='text/javascript'>
    google.load('visualization', '1', { packages: ['orgchart'] });
    google.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Name');
        data.addColumn('string', 'Manager');

        data.addRows([
    [{ v: 'TOP', f: 'TOP' }, ''],
    [{ v: 'TOP CO', f: 'TOP CO' }, 'TOP'],
    [{ v: 'TOP FR', f: 'TOP FR' }, 'TOP'],
    [{ v: 'EAST', f: 'EAST' }, 'TOP CO'],
    [{ v: 'WEST', f: 'WEST' }, 'TOP CO'],
    [{ v: 'FRAN', f: 'FRAN' }, 'TOP FR'],
    [{ v: 'ADIRAN', f: 'ADIRAN' }, 'EAST'],
    [{ v: 'FINGER', f: 'FINGER' }, 'EAST'],
    [{ v: 'CENTRAL', f: 'CENTRAL' }, 'WEST'],
    [{ v: 'NORTH', f: 'NORTH' }, 'WEST']
    ]);

   var chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
   chart.draw(data, { allowHtml: true });

   google.visualization.events.addListener(chart, 'select', function () {
   var selection = chart.getSelection()[0];
   var label = data.getColumnLabel(selection.column);
   alert(label);
 }); 
```

}

我对这个概念很陌生。每当我点击任何数据时，我都会收到类似的错误

```
Microsoft JScript runtime error: Invalid column index undefined. Should be an integer in the range [0-1]. 
```

我给出的数据格式是否错误，或者我需要其他任何东西。我的要求是，当我单击数据装置时，单击的值应显示在 ALERT BOX 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:42:12.483

我意识到这是一个旧帖子，但我认为如果它得到解决它可能会对其他人有所帮助。

您无法实现您的目标，因为表格可视化仅处理行选择。该列将始终未定义。

# c++ - 将动态数组传递给函数

> ID：12618819
> 
> 赞同：0
> 
> 时间：2012-09-27T10:01:44.260
> 
> 标签：c++, linker-errors

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我正在将一个动态整数数组传递给一个函数，但我无法让它工作。

```
int * tempP1;

tempP1 = new int [numP1+1]; 
```

称呼：

```
Polynomial P1(numP1, tempP1); 
```

原型：

```
Polynomial(int tempNum, int * tempPoly); 
```

功能：

```
Polynomial::Polynomial(tempNum, int *tempPoly) 
```

错误：

```
Undefined symbols for architecture x86_64:
  "Polynomial::Polynomial(int, int*)", referenced from:
     _main in ccDOuaGg.o
  "Polynomial::~Polynomial()", referenced from:
     _main in ccDOuaGg.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:08:37.407

我解决了这个问题。我以错误的方式编译该程序。

# extjs - EXTJS MVC 饼图

> ID：12618820
> 
> 赞同：0
> 
> 时间：2012-09-27T10:01:47.737
> 
> 标签：extjs, extjs4, extjs-mvc, sencha-charts

我有一个饼图和一个显示在其下方的网格，两者都使用同一个商店。

并且，在商店中，有以下字段：

总计、已分配、已使用、剩余。

是否可以使饼图只有四个字段中的三个，因为我不希望总字段出现在饼图中，但网格应该有它。那么，谁能告诉我最好的方法是什么？

代码如下：

饼形图

```
var chart1 = Ext.create('Ext.chart.Chart', {
        id : 'chart1',
        xtype : 'chart',
        theme : '',
        animate : true,
        shadow : true,
        height : 250,
        width : 250,
        store : LicSumStore,
        series : [{
            type : 'pie',
            angleField : 'value',

            showInLegend : true,
            highlight :{
                segment :{
                    margin :20
                }
            } ,
            label : {
                field : 'title',
                display :'rotate',
                contrast : true,
                font : '12px Arial'
            },
            title : 'Licenses',

        }],

    }); 
```

网格

```
 var licSummaryGrid = Ext.create('Ext.grid.Panel',{
        title :'LicenseSummary',
        store : LicSumStore,
        enableColumnResize : false,
        columns : [
            {
                text : 'License Type', 
                dataIndex : 'title',
                width : 150,
                sortable : false,
                hideable : false,

            },
            {
                text : 'Count', 
                dataIndex : 'value', 
                width : 100,
                sortable : false,
                hideable : false,

            }
        ],

        height : 180,
        width : 255

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:51:40.167

解决了这个问题，通过在网格中添加总计字段，使用汇总类型，而不是修改饼图中的数据。因此，我摆脱了商店中的总字段，并在网格中计算了它。

这是代码：

```
{
    text: 'License Type',
    dataIndex: 'title',
    width: 150,
    sortable: false,
    hideable: false,
    summaryRenderer: function () {
        return Ext.String.format('Total');
    }
}, {
    text: 'Count',
    dataIndex: 'value',
    width: 100,
    sortable: false,
    hideable: false,
    summaryType: 'sum'

} 
```

# javascript - Javascript 获取 NaN:NaN:NaN

> ID：12618825
> 
> 赞同：2
> 
> 时间：2012-09-27T10:01:52.947
> 
> 标签：javascript, date, countdowntimer

我正在制作一个网站，如果用户登录，则为用户提供一定的注销时间，其中定义了注销时间，剩余时间是从注销时间 - 服务器时间获得的。

我已经通过 PHP 获得了注销时间和服务器时间，但我想动态显示剩余时间，因此需要 Javascript。我尝试使用以下代码：

```
function timerStart(arg1, arg2){
    var counter = setInterval(function() {getTimeLeft(arg1,arg2); }, 1000);
}

function getTimeLeft(arg_endtime, arg_currenttime){
    var endtime = new Date(arg_endtime);
    var curtime = new Date(arg_currenttime);

    var timeleft = new Date(endtime - curtime); //endtime - curtime;

    tlHours = timeleft.getHours();
    tlMinutes = timeleft.getMinutes();
    tlSeconds = timeleft.getSeconds();

    document.getElementById("timeleft").value = tlHours + ":" + tlMinutes + ":" + tlSeconds;

} 
```

其中 arg1 的值为 '2011:10:11 17.30.00' 而 arg2 的值为 '2011:10:11 15:55:31' 作为字符串（是的，它们的格式不同）。但是当我尝试上面的代码时，我得到了 NaN:NaN:NaN。我对 Javascript 非常陌生（3 天）并试图赶上最后期限，因此非常感谢您提供详尽的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:07:26.303

是 '2011:10:11 17.30.00' 并且 arg2 的值是 '2011:10:11 15:55:31' 更改为

是 '2011/10/11 17:30:00' 而 arg2 的值是 '2011/10/11 15:55:31' ??

[http://jsfiddle.net/8XF3F/7/](http://jsfiddle.net/8XF3F/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:06:41.110

Javascript 中的 NaN 表示“不是数字”，因此您很可能有一个计算结果不是数字（因为 javascript 通常不会给您抛出错误，而是继续）。您应该尝试通过断点或 console.log 找出 endTime 和 curTime 实际具有的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T10:07:19.153

我的猜测是 JavaScript 的`Date`对象不喜欢你传递给它的格式。来自 MDN：

> 该字符串应采用解析方法可识别的格式（符合 IETF 的 RFC 1123 时间戳）。

但是，构造函数被重载以接受提供日期的许多不同方法。如果我这样做，我会使用 UNIX 时间，乘以 1000 以将其转换为毫秒，这很容易摆脱 PHP，并且在 PHP 和 JavaScript 中，当您对其进行算术运算时更直观。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T10:09:36.723

函数的格式`Date()`必须非常具体。

我在这里模拟了它：http: [//jsfiddle.net/PtGxk/](http://jsfiddle.net/PtGxk/)

如您所见，您的日期是“/”分隔的，您的时间是“：”分隔的，一切都很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:08:21.777

```
document.getElementById("timeleft").value = parseInt(tlHours) + ":" + parseInt(tlMinutes) + ":" + parseInt(tlSeconds); 
```

# android - Android Time 类：它在本地与毫秒是线性的吗？

> ID：12618828
> 
> 赞同：0
> 
> 时间：2012-09-27T10:02:08.143
> 
> 标签：android, time

我的意思是：

```
Time time = new Time();
time.setToNow();
long millis = time.toMillis(false);
time.monthDay++; 
```

是

```
time.toMillis(false) == millis + 24l*3600*1000 
```

总是正确的？

同样的问题

```
time.hour++; 
```

因为我认为时间系统极其复杂，我不知道有什么保证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:27:00.227

根据[文档](http://developer.android.com/intl/ru/reference/android/text/format/Time.html#toMillis%28boolean%29)，`public long toMillis (boolean ignoreDst)`您应该`toMillis(true)`在添加或减去天数或明确设置“monthDay”字段后使用。另一方面，如果您要增加或减少小时或分钟，那么您应该使用`toMillis(false)`.

`toMillis(false)`如果你想读回你在解析日期字符串时设置的毫秒数，你`set(long)`也应该使用它。`set(Time)`

查找`public int isDst()`有关以下内容的更多信息`ignoreDst`：
这个时间是夏令时。其中之一：
正 - 在 dst
0 - 不在 dst
负 - 未知

# android - 无法在android上编译avahi

> ID：12618829
> 
> 赞同：3
> 
> 时间：2012-09-27T10:02:10.533
> 
> 标签：android, android-ndk, cross-compiling

我是交叉编译的新手，我被分配了使用 android 补丁[http://avahi.org/ticket/354](http://avahi.org/ticket/354)将 avahi 核心编译到 android 的任务。ndk-build avahi-configure V=1 成功，但是当我运行：ndk-build V=1 NDK_LOG=2 APP_ABI="armeabi armeabi-v7a" 时，它会发出大量警告，并且在 socket.o 上也会出错

欢迎任何建议。

错误：/home/ruoruo/Software/android-ndk-r8b/platforms/android-14/arch-arm/usr/include/linux/if.h:85:12：警告：枚举器列表末尾的逗号 [-pedantic ] /home/ruoruo/Software/android-ndk-r8b/platforms/android-14/arch-arm/usr/include/linux/if.h:90:22：警告：枚举器列表末尾的逗号 [-pedantic] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:68:8: 错误：重新定义'struct in6_pktinfo' /home/ruoruo/Software/android-ndk- r8b/platforms/android-14/arch-arm/usr/include/linux /ipv6.h:21:8: 注意：最初定义在这里/home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/ avahi-core/socket.c：在函数“avahi_mdns_mcast_join_ipv6”中：​​/home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:150:64：警告：未使用的参数'a' [-Wunused-parameter] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv4'中：/home/ruoruo/Software /android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:647:9：警告：变量'found_addr'设置但未使用[-Wunused-but-set-variable] /home/ruoruo/软件/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv6'中：/home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core /socket.c:809:24：警告：变量 'found_iface' 已设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi- core/socket.c:809:9: 警告：变量 'found_ttl' 设置但未使用 [-Wunused-but-set-variable] make:[-Wunused-parameter] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv4'中：/home/ruoruo/Software/android-ndk- r8b/samples/avahi_exports/jni/avahi-core/socket.c:647:9：警告：变量'found_addr'设置但未使用[-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk -r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv6'中：/home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c： 809:24：警告：变量 'found_iface' 已设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c ：809：9：警告：变量'found_ttl'设置但未使用[-Wunused-but-set-variable] make：[-Wunused-parameter] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv4'中：/home/ruoruo/Software/android-ndk- r8b/samples/avahi_exports/jni/avahi-core/socket.c:647:9：警告：变量'found_addr'设置但未使用[-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk -r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv6'中：/home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c： 809:24：警告：变量 'found_iface' 已设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c ：809：9：警告：变量'found_ttl'设置但未使用[-Wunused-but-set-variable] make：avahi_recv_dns_packet_ipv4'：/home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:647:9：警告：变量'found_addr'设置但未使用[-Wunused-but-设置变量] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv6'中：/home/ruoruo/Software/android-ndk-r8b/ samples/avahi_exports/jni/avahi-core/socket.c:809:24：警告：变量 'found_iface' 已设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b /samples/avahi_exports/jni/avahi-core/socket.c:809:9：警告：变量 'found_ttl' 已设置但未使用 [-Wunused-but-set-variable] 使：avahi_recv_dns_packet_ipv4'：/home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:647:9：警告：变量'found_addr'设置但未使用[-Wunused-but-设置变量] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv6'中：/home/ruoruo/Software/android-ndk-r8b/ samples/avahi_exports/jni/avahi-core/socket.c:809:24：警告：变量 'found_iface' 已设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b /samples/avahi_exports/jni/avahi-core/socket.c:809:9：警告：变量 'found_ttl' 已设置但未使用 [-Wunused-but-set-variable] 使：设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv6'中：/home/如若/软件/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:809:24：警告：变量'found_iface'设置但未使用[-Wunused-but-set-variable] /home /ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:809:9：警告：变量'found_ttl'设置但未使用[-Wunused-but-set-variable] make ：设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c：在函数'avahi_recv_dns_packet_ipv6'中：/home/如若/软件/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:809:24：警告：变量'found_iface'设置但未使用[-Wunused-but-set-variable] /home /ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:809:9：警告：变量'found_ttl'设置但未使用[-Wunused-but-set-variable] make ：设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:809:9：警告：变量'found_ttl ' 设置但未使用 [-Wunused-but-set-variable] make:设置但未使用 [-Wunused-but-set-variable] /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni/avahi-core/socket.c:809:9：警告：变量'found_ttl ' 设置但未使用 [-Wunused-but-set-variable] make:*** [/home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/obj/local/armeabi/objs/avahi-core/socket.o] 错误1

这是我的 Android.mk

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

AVAHI_TOP := /home/ruoruo/Software/android-ndk-r8b/samples/avahi_exports/jni
CONFIGURE := configure
CONFIGURE_LDFLAGS := -lc -ldl

AVAHI_BUILT_SOURCES := \
    avahi-common/Android.mk \
    avahi-core/Android.mk \
    avahi-client-uninstalled.pc \
    avahi-client/Android.mk \
    avahi-utils/Android.mk \
    avahi-glib/Android.mk \
    avahi-glib-uninstalled.pc \
    avahi-gobject/Android.mk \
    avahi-gobject-uninstalled.pc \
    avahi-daemon/Android.mk

avahi-configure-real:
    cd $(AVAHI_TOP) ; \
#    CC="$(CONFIGURE_CC)" \
#    CFLAGS="$(CONFIGURE_CFLAGS)" \
#    LD=$(TARGET_LD) \
    LDFLAGS="$(CONFIGURE_LDFLAGS)" \
#    CPP=$(CONFIGURE_CPP) \
#    CPPFLAGS="$(CONFIGURE_CPPFLAGS)" \
#    PKG_CONFIG_LIBDIR=$(CONFIGURE_PKG_CONFIG_LIBDIR) \17
#    PKG_CONFIG_TOP_BUILD_DIR=$(PKG_CONFIG_TOP_BUILD_DIR) \
    $(AVAHI_TOP)/$(CONFIGURE) --host=arm-linux-androideabi \
    --disable-nls --disable-gtk --disable-gtk3 \
    --disable-dbus --disable-python \
    --disable-xmltoman --with-xml=none \
    --disable-glib --disable-gobject --disable-qt3 --disable-qt4 \
    --disable-gdbm --disable-libdaemon \
    --with-distro=none --disable-core-docs \
    --disable-Werror
    echo "before make file"
    for file in $(AVAHI_BUILT_SOURCES); do \
       rm -f $$file && \
        make -C $$(dirname $$file) $$(basename $$file) ; \
    done

    avahi-configure: avahi-configure-real

    .PHONY: avahi-configure

    CONFIGURE_TARGETS += avahi-configure

    #include all the subdirs...
    #-include $(AVAHI_TOP)/avahi-common/Android.mk
    #-include $(AVAHI_TOP)/avahi-client/Android.mk
    -include $(AVAHI_TOP)/avahi-core/Android.mk
    #-include $(AVAHI_TOP)/avahi-daemon/Android.mk
    #-include $(AVAHI_TOP)/avahi-glib/Android.mk
    #-include $(AVAHI_TOP)/avahi-gobject/Android.mk
    #-include $(AVAHI_TOP)/avahi-utils/Android.mk

#generate libavahi.so and libavahi.a
LOCAL_MODULE    := avahi_static
LOCAL_MODULE_FILENAME := libavahi
-include $(BUILD_STATIC_LIBRARY)

LOCAL_MODULE    := avahi_shared
LOCAL_MODULE_FILENAME := libavahi
-include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:59:34.713

您下载的补丁不是最新的。最新的 NDK r8b 包含`linux/ipv6.h`在早期版本的 NDK 上找不到的文件。不幸的是，这种对 NDK 的更改，尽管很受欢迎，但从未被记录在案。

这意味着您必须`socket.c`通过删除行来撤消对文件的补丁

```
67  #ifdef __BIONIC__ 
68  struct in6_pktinfo { 
69      struct in6_addr ipi6_addr; 
70      int ipi6_ifindex; 
71  }; 
72  #endif 
73 
```

从`avahi-core/socket.c`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:28:48.700

`Application.mk`使用以下内容创建：

```
APP_OPTIM := release
APP_PLATFORM := android-7
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -DANDROID
APP_ABI := armeabi armeabi-v7a
APP_MODULES := avahi_static 
```

`APP_ABI="armeabi armeabi-v7a"`然后在你的`ndk-build`命令中省略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:19:21.460

```
1.tar avahi-0.6.31
2.patch -p1 < 0001-Add-Android-support.patch (http://avahi.org/ticket/354)
patch -p1 < 0002-Add-uninstalled.pc.in-files.patch 

3.cd avahi-0.6.31 ./configure --sysconfdir=/etc --localstatedir=/var make 

4.cd the subdirectories make Android.mk 

then,you will see Android.mk in all the subdirectories.

5.ndk-build V=1 NDK_LOG=2 APP_ABI="armeabi armeabi-v7a" 
```

# ruby-on-rails - Ruby on Rails：NilClass:Class 的未定义方法“model_name”

> ID：12618834
> 
> 赞同：1
> 
> 时间：2012-09-27T10:02:47.990
> 
> 标签：ruby-on-rails, ruby, database, model, controller

我试图允许用户将项目输入数据库。其中一个字段允许他们为该项目输入多种技术。

这是我的项目控制器，新建和创建操作。

```
def new
    @project = Project.new

@all_technols = Technol.all

@project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end

def create

    @project = Project.new(params[:project])

params[:technols][:id].each do |technol|

if !technol.empty?

    @project.projecttechnols.build(:technol_id => technol)
end
end

end 
```

这是我的多选技术下拉列表的新项目视图。

```
<%= fields_for(@project_technol) do |ab| %>

<div class="tech">
<%= ab.label "All Tech" %><br/>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true} ) %>
</div>
<% end %> 
```

目前，我有一个页面，用户可以在其中输入一项新技术。但我想将此选项移至创建新项目页面，他们可以在其中选择现有技术，或输入新技术，或两者兼而有之，他们将与该项目一起保存。

**编辑：更改为问题，并添加模型文件**

但是，当我尝试保存一个新项目时，我收到了这个错误。

```
undefined method `model_name' for NilClass:Class

Extracted source (around line #233):

233: <%= fields_for(@project_technol) do |ab| %>
234: 
235: <div class="tech">
236: <%= ab.label "All Tech" %><br/> 
```

**项目.rb**

```
class Project < ActiveRecord::Base

  attr_accessible :tech

  has_many :projecttechnols
  has_many :technols, :through => :projecttechnols
end 
```

**技术.rb**

```
class Technol < ActiveRecord::Base
  attr_accessible :tech

has_many :projecttechnols
has_many :projects, :through => :projecttechnols
end 
```

**工程技术.rb**

```
class Projecttechnol < ActiveRecord::Base
  attr_accessible :project_id, :technol_id

belongs_to :technol
belongs_to :project
end 
```

**编辑2：**

```
def new
    @project = Project.new

@all_technols = Technol.all

#@project_technol = @project.projecttechnols.build

@project_technol = Projecttechnol.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:11:50.460

参考[这个](http://edgeguides.rubyonrails.org/association_basics.html#has-many-association-reference)

改变

```
@project.projecttechnols.build 
```

至

```
@project.technols.build 
```

假设您有以下模型声明

项目.rb

```
has_many :technols 
```

技术.rb

```
belongs_to :project_id 
```

# java - 追加两个单链表

> ID：12618837
> 
> 赞同：4
> 
> 时间：2012-09-27T10:03:08.660
> 
> 标签：java, algorithm, data-structures, linked-list

我正在尝试使用 Java 实现 LinkedList，只是为了测试我的技能。我遇到了一个问题，我必须附加我创建的两个链表。我在这里陷入了一个无限循环。有什么办法可以改进代码并实现所需的输出？

个人/个人：

列表 A：4->3->2->1->0

列表 B：4->3->2->1->0

O/P 应该是：4->3->2->1->0->4->3->2->1->0

```
class List {
    int val;
    List next;

    public List(int val) {
        this.val = val;
    }

    public String toString() {
        String output = "";
        List current = this;

        while (current != null) {
            output += current.val + "->";
            current = current.next;
        }
        return output + "NULL";
    }
}

class AppendLinkedLists {

    static List push(List list, int num) {
        List newList = new List(num);
        newList.next = list;
        return newList;
    }

    static List appendLists(List listA, List listB) {
        if (listA == null)
            return listB;
        else {
            List tempList = listA;
            while (tempList.next.next != null) {
                tempList = tempList.next;
            }
            tempList.next.next = listB;
            return listA;           
        }
    }

    public static void main(String[] args) {
        List listA = new List(0);
        listA = push(listA, 1);
        listA = push(listA, 2);
        listA = push(listA, 3);
        listA = push(listA, 4);

        List listB = listA;

        System.out.println("Input List A : " + listA.toString());
        System.out.println("Input List B : " + listB.toString());
        listA = appendLists(listA, listB);
        System.out.println("Combined Input Lists A and B : " + listA.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:07:09.470

您没有 2 个列表。你只有一个。

```
 List listB = listA; 
```

将引用分配`listB`给指向`listA`。因此，您正在附加`listA`到自身上。

无论您有什么其他问题，我都会纠正这个问题（最简单的方法是以与`listB`您的创建方式类似的方式创建`listA`）。

我的另一条评论（希望您不介意）是您创建了一个 List 对象，但它自己的行为很少/没有。我不会创建您的`AppendLinkedLists`类，而是将功能放入`List`对象中，例如：

```
listA = push(listA, 1); 
```

写：

```
listA.push(1); 
```

等等。所以*行为被封装在* `List` *object*中。同样，您可以编写：

```
listA.push(listB); 
```

通过使用*重载*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:11:42.917

我看不到附加代码逻辑..

但是你的问题是

列表列表B=列表A；

这不符合您的期望，请创建一个新的 listB。并将listA的内容复制到listB。相反，它正在做的是创建一个新的 listB 并将 listA 的引用 ID 复制到 listB。即只有一个列表，listA。

先纠正这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T10:11:53.180

您说您有 2 个列表，即`listA`和`listB`，但您只调用`new`了一次。

```
List listA = new List(0); 
```

它将创建一个新列表并`listA`指向它。

```
List listB = listA; 
```

它会`listB`指向同一个列表，`listA`指向它。

因此，如果您还想创建另一个列表，请以与创建方式相同的方式创建`listA`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:09:09.677

您处于无限循环中，因为 listA 与 listB 是同一个列表 - toString 永远不会结束，因为您已经创建了一个循环。事实上（虚构的）字段 listA.End.next 将指向 listA.Start。

您必须重新创建 listB 或实际复制 listA。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:09:21.073

我认为你面临的问题是 ListA 和 ListB 实际上是同一个列表，所以如果你修改一个，你也会修改另一个。因此，当您将 ListB 附加到 ListA 时，实际上是在将 ListA 附加到 ListA，这会导致一个无限列表。

问题出在这一行：

```
List listB = listA; 
```

所做的是将第二个指针 (ListB) 分配给 ListA 指向的同一个列表。

要修复它，您需要制作 ListA 的实际副本。鉴于您正在尝试测试您的技能，我将留下确切的“如何”作为练习；）

# iphone - 嵌入在 UIWebView 中的电影播放器 确实在 iPhone 上进入全屏，但在 iPad 上没有

> ID：12618843
> 
> 赞同：4
> 
> 时间：2012-09-27T10:03:24.167
> 
> 标签：iphone, ios, ipad, uiwebview, streaming

我的应用中有**UIWebView**可以播放一些流媒体。当我在 iPhone 嵌入式电影播放器​​上运行应用程序时，它以全屏方式启动，但在 iPad 上却没有。流仅停留在 UIWebView 框架内。

为什么在 iPad 上不能全屏播放？我怎么可能强制嵌入式电影播放器​​进入全屏模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:16:42.750

iPad 在播放电影时不会以全屏模式启动，您必须通过单击左上角的按钮或双指缩放将其更改为全屏模式。

# android - 不同纵横比的Android可绘制资源

> ID：12618846
> 
> 赞同：4
> 
> 时间：2012-09-27T10:03:42.137
> 
> 标签：android, drawable, android-resources, aspect-ratio

分辨率为 240x320、480x640、1536x1152 的屏幕...纵横比为 0.75，分辨率为 480*800 的屏幕纵横比为 0.6 等。

我需要为不同的纵横比使用不同的资源。

我可以为 Android 指定配置文件夹按屏幕纵横比拍摄图像吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:29:24.467

您可以为资源指定`long`和`notlong`。

请参阅[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)

> long：长屏，如WQVGA、WVGA、FWVGA
> 
> notlong：非长屏，如QVGA、HVGA、VG

# android - android中的图像破碎效果

> ID：12618847
> 
> 赞同：-1
> 
> 时间：2012-09-27T10:03:44.247
> 
> 标签：android, animation

Hay Guys 我正在尝试开发一个 android 游戏，在其中我需要一个图像破碎效果。当我搜索逻辑时，我得到了一个使用 Opengl 和 Cocos2d 在 Iphone 中实现的逻辑（我认为）他们正在做的是分割整个图像（纹理）成小三角形并以随机速度沿随机方向移动它们。但我无法将代码直接实现到 android 项目中，而且我不知道从哪里开始。谁能帮我把我的纹理分成不同的小三角形三角形..提前谢谢..如果需要演示代码[http://www.cocos2d-iphone.org/forum/topic/19523](http://www.cocos2d-iphone.org/forum/topic/19523) 伙计们请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:25:14.717

你可以用 cocos2d-x 代替 android

# python - 检查数组的元素是否存在于python中的另一个数组中

> ID：12618852
> 
> 赞同：0
> 
> 时间：2012-09-27T10:03:49.143
> 
> 标签：python, arrays, numpy

我有两个数组

```
a = array([1,2,3])    
b = array([2,7]) 
```

现在我想检查 a 的元素是否在 b 中，返回的答案应该是 (False, True, False)。有没有一些简单的方法可以在不使用函数的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:47:46.173

这个怎么样：

```
>>> numpy.setmember1d(a, b)
array([False,  True, False], dtype=bool) 
```

更新，谢谢seberg。对于较新版本的 numpy，这是：

```
>>> numpy.in1d(a, b)
array([False,  True, False], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:09:52.247

使用标准 python 列表：

```
>>> a = [1, 2, 3]
>>> b = [2, 7]
>>> tuple(x in b for x in a)
(False, True, False) 
```

假设您的`array`函数返回一个同时支持迭代和`in`运算符的对象，它应该工作相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:24:58.413

仅使用 numpy：

```
>>> (a[:,None] == b).any(axis=-1) 
```

（所以，我们`a`从 a转换`(N,)`为一个`(N,1)`数组，然后使用 numpy 的广播测试是否相等。我们最终得到一个`(N, M)`数组（假设它`b`有一个形状`(M,)`......），我们只需检查`True`每一行是否有`any(axis=-1)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T10:10:54.363

好吧，这就是我对列表的处理方式：

```
>>> a = [1, 2, 3]
>>> b = [2, 7]
>>> result = []
>>>
>>> for x in a:
...    result.append(x in b)
...
>>> print result
[False, True, False] 
```

# html - 删除输入和跨度标签之间的间隙

> ID：12618857
> 
> 赞同：0
> 
> 时间：2012-09-27T10:03:59.187
> 
> 标签：html, css

你好，

**编辑**：我遵循了以下评论中提到的建议。然后，它在 IE 中运行良好，但问题仍然存在于谷歌浏览器中......有人可以帮助我......*这是更改后的代码*

```
<!DOCTYPE HTML>
<html>
  <head>
  <style>
  .inputBox{
   white-space:nowrap;
    font-size:0;
  }
   .inputBox input{
    border:1px solid #9AAABD;
    box-shadow:inset 0px 1px 3px #b7c2d0;
    float:left;
   }
   .iconHolder{
    background:#fff url('ComboBoxArrow_regular.png') 50% 50% no-repeat;
    width:12px;
    height:19px;
    line-height:12px;
    font-size:16px;
    float:left;
}
  .iconHolder:hover{
     background:#007DC0 url('ComboBoxArrow_hover.png') 50% 50% no-repeat;
  }
  </style>
 </head>

 <body>
  <span class="inputBox">
    <input type="text">
    <span class="iconHolder"></span>
  </span>

 </body>
</html> 
```

这是两张图片： ![ComboBoxArrow_hover](../Images/62a7da2380e13bb9d1b6e2f5da8e9c00.png)![ComboBoxArrow_regular](../Images/7f66ad099619af7cc28089ecff047693.png)

我想开发一个下拉列表框。我正在使用输入字段和一个`<span>`标签来保存`down arrow icon`列表框的外观。
问题是输入字段和跨度之间存在不必要的差距，这真的很难看。可以消除这个差距吗？[这](http://jsfiddle.net/L7Vax/)是示例应用程序。这里我用于`V`测试目的，但实际上应该有一个图像。

**注意**：跨度的高度应该等于输入的标签，如果我们改变浏览器的分辨率，它们的对齐不应该被扭曲......

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T10:07:38.500

不要在代码中做任何事情。只需删除 HTML 中输入字段和跨度之间的空格。写成——

```
<span class="inputBox">
    <input type="text"><span class="iconHolder">V</span>
</span> 
```

[**JSFiddle**](http://jsfiddle.net/L7Vax/3/)

编辑：

或使元素向左浮动-

```
input, .iconHolder{ float: left; }

.iconHolder{
    background:#007DC0 url('arrow.gif') 50% 50% no-repeat;
    width:12px;
    height:18px;
} 
```

[**另一个小提琴**](http://jsfiddle.net/L7Vax/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:07:48.670

嗨，现在他们是两种方法

冷杉是给`float left;`你的`input`和`iconHolder`

```
.inputBox input, .iconHolder{
float:left;
} 
```

* * *

> [演示](http://jsfiddle.net/L7Vax/2/)

* * *

**其次是** 定义你的跨度`display:inline-block;`或`vertical-align:top;`给**父母**

`font-size:0;`或**孩子**`font-size:12px;`根据您的设计给予

***[现场演示](http://jsfiddle.net/L7Vax/1/)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T10:09:53.723

将此属性添加到它们两者中浮动：左；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T10:15:18.517

检查我的**[演示](http://jsfiddle.net/vijaysarin/28v4K/1/)**

这是对您的 CSS 的一点更改，

```
.inputBox{
   white-space:nowrap;
    font-size:0;
  }
   .inputBox input{
    border-left:1px solid #9AAABD;
    border-top:1px solid #9AAABD;
    border-bottom:1px solid #9AAABD;
    border-right:1px solid #b7c2d0;
    box-shadow:inset 0px 1px 3px #b7c2d0;
    float:left;
   }
   .iconHolder{
    background:#007DC0 url('arrow.gif') 50% 50% no-repeat;
    width:12px;
    height:18px;
    line-height:12px;
    font-size:16px;
    float:left;
}
  .iconHolder:hover{
     background:#ff6600 url('arrow2.gif') 50% 50% no-repeat;
  } 
```

**已编辑**

**​谷歌浏览器更新**`margin:0;`：在文本框中添加零边距 ( )。对我来说在 Chrome 中运行良好。

```
.inputBox{
}
.inputBox input{
    border-left:1px solid #9AAABD;
    border-top:1px solid #9AAABD;
    border-bottom:1px solid #9AAABD;
    border-right:1px solid #b7c2d0;
    box-shadow:inset 0px 1px 3px #b7c2d0;
    float:left;
    margin:0;
}
.iconHolder{
    background:#007DC0 url('arrow2.png') 50% 50% no-repeat;
    width:15px;
    height:20px;
    float:left; 
}
.iconHolder:hover{
    background:#ff6600 url('arrow.png') 50% 50% no-repeat;
} 
```

**UPDATE-2**：带有许多类似下拉菜单的整个 HTML 页面。

```
<!DOCTYPE HTML>
<html>
    <head>
        <style>
            .inputBox{
            }
            .inputBox input{
                border-left:1px solid #9AAABD;
                border-top:1px solid #9AAABD;
                border-bottom:1px solid #9AAABD;
                border-right:1px solid #b7c2d0;
                box-shadow:inset 0px 1px 3px #b7c2d0;
                float:left;
                margin:0;
            }
            .iconHolder{
                background:#007DC0 url('arrow2.png') 50% 50% no-repeat;
                width:15px;
                height:20px;
                float:left; 
            }
            .iconHolder:hover{
                background:#ff6600 url('arrow.png') 50% 50% no-repeat;
            }
        </style>
    </head>

    <body>
        <span class="inputBox">
            <input type="text">
            <span class="iconHolder"></span>
        </span>

        <span class="inputBox">
            <input type="text">
            <span class="iconHolder"></span>
        </span>

        <br/>

        <span class="inputBox">
            <input type="text">
            <span class="iconHolder"></span>
        </span>

        <br/>

        <table>
            <tr>
                <td>  
                    <span class="inputBox">
                        <input type="text">
                        <span class="iconHolder"></span>
                    </span>
                </td>
                <td>
                    <span class="inputBox">
                        <input type="text">
                        <span class="iconHolder"></span>
                    </span>
                </td>
            </tr>
        </table>
    </body>
</html> 
```

# forms - Cakephp 清理

> ID：12618858
> 
> 赞同：0
> 
> 时间：2012-09-27T10:04:07.190
> 
> 标签：forms, cakephp, textarea, cakephp-2.1, sanitization

我正在使用 Sanitize::clean 发表评论，但它用 \n 替换了 textarea 中的 New Line

我需要干净的数据，但需要原始样式，而不是将 NEW LINE 转换为 \n

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-17T16:52:53.753

在你的变量上使用它：

`nl2br(h($var))`

[nl2br](http://php.net/manual/en/function.nl2br.php)在字符串中的所有换行符之前插入 HTML 换行符，而[h](http://api.cakephp.org/2.2/function-h.html)是 CakePHP 的 PHP`htmlspecialchars`函数的快捷方式。

除了数据之外，您不需要做更多的事情`nl2br(h($var))`。

# objective-c - 其他类的滑块最大值

> ID：12618861
> 
> 赞同：-1
> 
> 时间：2012-09-27T10:04:08.850
> 
> 标签：objective-c, xcode

//第 1 类

```
int sliderMaximum;
float sliderMaximumDigital;

-(void)viewDidLoad
{
[super viewDidLoad];
class 2 *V1 = [[class 2 alloc] init];

sliderMaximum = V1.TeamAmountAfterSave;
NSNumber *yourNumber = [NSNumber numberWithInt:sliderMaximum];
sliderMaximumDigital = [yourNumber floatValue];

[sliderTeamSelect setMaximumValue:sliderMaximumDigital];

} 
```

//类2

```
int teamAmount;

@synthesize TeamAmountAfterSave; (In .h file (@property int TeamAmountAfterSave;))

TeamAmountAfterSave = teamAmount; 
```

// 此代码几乎可以正常工作，唯一的问题是我的滑块最大值设置为 0。

// PS。teamAmount 具有按下按钮的次数的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:18:27.097

您正在分配一个新的视图控制器 ( `[[CompetitionViewController alloc] init]`)，然后您立即查询其属性之一 ( `sliderMaximum = V1.TeamAmountAfterSave`)。因此，除非`init`of`CompetitionViewController`没有明确设置属性读取的值`TeamAmountAfterSave`，否则它当然是 0。

我不知道您要完成什么，但听起来您想要一个存储/管理数据的管理器对象（可能是单例）。视图控制器不是这样做的地方。

# vba - 将数据添加到受密码保护的工作表

> ID：12618872
> 
> 赞同：2
> 
> 时间：2012-09-27T10:04:57.770
> 
> 标签：vba, excel, excel-2003

我有一张带密码的表格。但我需要从 vba 代码中添加一些数据。我怎样才能做到这一点？也许我可以重置密码，然后添加数据，然后重新设置

```
 Me.Parent.Worksheets("Sheet1").Unprotect 111

Me.Parent.Worksheets("Sheet1").Protect Password:=111, DrawingObjects:=True, Contents:=True, Scenarios:=True 
```

当我使用简单密码时，代码有效，但如果我设置 pass: pass111111 - 出现错误密码错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:28:34.837

我建议使用此代码来保护您的工作表

```
Sub ProtectSheet()
    Sheets("Sheet1").Protect Password:="111111", _
    Contents:=True, userInterfaceOnly:=True
End Sub 
```

注意使用`userInterfaceOnly:=True`

当您使用`UserInterfaceOnly`参数设置为`True`如上所示的 Protect 方法时，您将保护用户界面而不是宏。因此，您无需取消保护工作表即可从宏中添加数据。您可以直接使用它执行操作。例如

```
Sub ProtectSheet()
    Sheets("Sheet1").Protect Password:="111111", _
    Contents:=True, userInterfaceOnly:=True

    Sheets("Sheet1").Range("A1").Value = "Hello World!"
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:13:42.693

这简单：

```
sub Protect_Sheet()
Thisworkbook.Sheets(1).Unprotect Password:="Password"

'Do something 

Thisworkbook.Sheets(1).Protect Password:="Password"

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:13:29.877

如果您已将其设置为受保护，`Password = 111`则必须使用该密码取消保护，然后可以使用新密码重新保护：

```
 Me.Parent.Worksheets("Sheet1").Unprotect Password:="111"

        Me.Parent.Worksheets("Sheet1").Protect Password:="pass111111", DrawingObjects:=True, Contents:=True, Scenarios:=True 
```

这是我能想到解释这一点的唯一原因。

# android - 当数据库不断更新时，我在哪里关闭我的数据库？

> ID：12618873
> 
> 赞同：0
> 
> 时间：2012-09-27T10:05:01.793
> 
> 标签：android, service, database-connection

在我的应用程序中，我有 Contacts_sync.java 类，它同步联系人和 offline_Messages.java，其中包含用户离线时收到的消息，它每五秒检查一次新消息。

现在问题出在应用程序启动时，联系人同步服务启动，并且每隔五秒另一个检查离线消息的服务也启动。

所以在这种情况下，我如何设法关闭数据库。如果我在offlineMessage 服务中关闭数据库，那么如果有任何正在进行的联系人同步过程，那么它会给我数据库关闭错误。

这是我的 Logcat

```
09-27 13:22:45.125: E/Database(6970): close() was never explicitly called on database 'sipchat.db' 
09-27 13:22:45.125: E/Database(6970): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
09-27 13:22:45.125: E/Database(6970):   at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1849)
09-27 13:22:45.125: E/Database(6970):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:822)
09-27 13:22:45.125: E/Database(6970):   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:856)
09-27 13:22:45.125: E/Database(6970):   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:849)
09-27 13:22:45.125: E/Database(6970):   at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:556)
09-27 13:22:45.125: E/Database(6970):   at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
09-27 13:22:45.125: E/Database(6970):   at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
09-27 13:22:45.125: E/Database(6970):   at org.sipchat.sipua.ui.DatabaseHelper.<init>(DatabaseHelper.java:39)
09-27 13:22:45.125: E/Database(6970):   at org.sipchat.sipua.ui.Contact_sync.onCreate(Contact_sync.java:110)
09-27 13:22:45.125: E/Database(6970):   at android.app.ActivityThread.handleCreateService(ActivityThread.java:1949)
09-27 13:22:45.125: E/Database(6970):   at android.app.ActivityThread.access$2500(ActivityThread.java:117)
09-27 13:22:45.125: E/Database(6970):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:989)
09-27 13:22:45.125: E/Database(6970):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-27 13:22:45.125: E/Database(6970):   at android.os.Looper.loop(Looper.java:130)
09-27 13:22:45.125: E/Database(6970):   at android.app.ActivityThread.main(ActivityThread.java:3687)
09-27 13:22:45.125: E/Database(6970):   at java.lang.reflect.Method.invokeNative(Native Method)
09-27 13:22:45.125: E/Database(6970):   at java.lang.reflect.Method.invoke(Method.java:507)
09-27 13:22:45.125: E/Database(6970):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
09-27 13:22:45.125: E/Database(6970):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
09-27 13:22:45.125: E/Database(6970):   at dalvik.system.NativeStart.main(Native Method) 
```

任何想法和建议将不胜感激
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:07:52.357

不要关闭数据库。[没有必要](https://groups.google.com/forum/#!msg/android-developers/NwDRpHUXt0U/jIam4Q8-cqQJ)（无论如何，数据都会尽早安全地写入持久存储）。在应用程序启动时打开它一次，并在应用程序的整个生命周期内重复使用相同的连接。

请注意，保持单个连接很重要，可能作为`static`您的`Application`类的成员，这样它就不会触发您在垃圾收集器尝试清理它时看到的警告消息。

# android - 在 StartActivityforResult 上打开我自己的文件资源管理器

> ID：12618875
> 
> 赞同：0
> 
> 时间：2012-09-27T10:05:05.103
> 
> 标签：android, android-intent

我想从我的 sdcard 中获取一个文件并将其转换为字节数组；为此，我使用`startActivityforResult()`了只打开任何已安装的文件资源管理器的方法，如果没有安装任何文件资源管理器则没有。所以我使用[这里](http://www.dreamincode.net/forums/topic/190013-creating-simple-file-chooser/)的代码创建了一个文件资源管理器。但是我无法`startActivityForResult()`像以前一样打开它并获取文件:(我该怎么办？有什么想法或例子吗？

# javascript - 页面加载时如何自动调用按钮提交

> ID：12618876
> 
> 赞同：1
> 
> 时间：2012-09-27T10:05:11.953
> 
> 标签：javascript, php, jquery

我想在页面加载时调用按钮提交。我编码为：

```
 (function($) {
              //Id of form: searchform
              document.searchform.submit(); 

    })(jQuery); 
```

但是页面请求自动多时间。我只想在加载页面时自动提交一次。你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:14:50.587

而不是直接**提交**表格

**例子**

```
$(document).ready(function(){

    $('#form_id').submit();

}); 
```

**编辑**

为避免第二次页面提交取一个`hidden`字段并在调用前检查值`submit()`

在视图中

```
<input type="hidden" id="visits" value="<?= $visit?>" /> 
```

脚本

```
$(document).ready(function(){

    if($('#visits').val() == 1)
        $('#form_id').submit();

}); 
```

当您第一次加载页面时，将值传递给`$visit`is `1`，除此之外的任何值`1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:20:05.020

如果您只需要向同一页面提交一次，您应该添加某种变量，您可以像这样检查：

```
<form name="searchform" id="searchform" action="newpage.php" method="post">
  <input type="hidden" name="whatever" value="myvalue" />
  <input type="text" name="search" value="" />
  <?php if ( $_POST['whatever'] != 'myvalue' ) { ?>
  <script type="text/javascript" language="javascript">
    document.searchform.submit();
  </script>
  <?php } ?>
</form> 
```

这将只提交一次，因为第二次会有一个 post 值。

希望有帮助。

# javascript - 将目标 c 控制器类的参数发送到 phoneGap 中的 index.html

> ID：12618878
> 
> 赞同：0
> 
> 时间：2012-09-27T10:05:20.670
> 
> 标签：javascript, ios

我如何将目标 c 控制器类的参数发送到 phoneGap 中的 index.html 是 javascript ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:10:45.990

最简单的方法是：

```
[webView stringByEvaluatingJavaScriptFromString:@"SetValue(newValue)"]; 
```

其中 SetValue 是您自己的 javacript setter 函数

# xml - 从字段引用到 Joomla xml 中的另一个字段

> ID：12618881
> 
> 赞同：0
> 
> 时间：2012-09-27T10:05:31.200
> 
> 标签：xml, templates, joomla, parameters, filelist

我在 Joomla 2.5 中向我的模板后端添加了一些参数。对于第一个，我希望用户选择一个文件夹。

```
<field name="folder" type="folderlist" directory="/images" label="TPL_NAME_PARAMETER_FOLDER_LABEL" description="TPL_NAME_PARAMETER_FOLDER_DESC"/> 
```

对于第二个，我想让用户***从第一个字段中选择的文件夹中选择一个文件***

```
<field name="file" type="filelist" directory="CHOSEN_FOLDER" label="TPL_NAME_PARAMETER_FILE_LABEL" description="TPL_NAME_PARAMETER_FILE_DESC" /> 
```

从我已经读过的内容来看，这在 .xml 文件中是不可能的吗？有人有解决方法吗？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:18:10.940

我不会介绍所有代码，但基本上你必须使用该`<params addpath="">`方法调用一个元素。您需要创建一个名为“folderlist”的 PHP 文件，并添加代码以覆盖选择列表。

```
jimport('joomla.html.html');
jimport('joomla.html.parameter.element');

class JElementFolderlist extends JElement {

//functions go in here

} 
```

您需要对 filelist.php 执行相同的操作，但在此文件中，添加一些 javascript，以便根据从 folderlist.php 中选择的内容加载新的文件列表。

我知道这不是您需要的所有代码的完整答案，但它可以让您开始。

# javascript - JQuery ajax 忽略 url

> ID：12618892
> 
> 赞同：0
> 
> 时间：2012-09-27T10:06:29.660
> 
> 标签：javascript, jquery, ajax

我有函数**tryGetTicket必须在我的****loginUrl**调用 ajax 请求。**但是当我调用这个函数时，它会忽略我的 ULR 并在没有loginUrl**的情况下发送 get 请求，即我希望什么请求会在[http://example.com/sys/login](http://example.com/sys/login)但实际上是[http://example.com](http://example.com)发送。怎么了？

```
$(function(){
 var tryGetTicket =
            function (loginUrl, param)
            {
                var ticket = null;
                $.ajax({
                    url: loginUrl,
                    dataType: "json",
                    data: param,
                    success: function( response ) {
                        var result = null;
                        //do something
                        ticket = result;
                    }
                });
                return ticket;
            }       

        $("#importDialog").click (function(event) {
            event.preventDefault();
            var alfTicket = getCookie("alf_ticket");
            var ticket = tryGetTicket("/sys/login", $.param({"alf_ticket" : alfTicket}));
            ///...
            }   
        }); 
```

* * *

**答：** 它工作正常。感谢您的建议。

```
 $(function(){
 var tryGetTicket =
            function (loginUrl, param, callback)
            {
                var ticket = null;
                $.ajax({
                    url: loginUrl,
                    dataType: "json",
                    data: param,
                    success: function( response ) {
                        var result = null;
                        //do something
                        ticket = result;
                        callback(ticket);
                    }
                });
            }       

        $("#importDialog").click (function(event) {
            event.preventDefault();
            var alfTicket = getCookie("alf_ticket");
            var ticket = 
               tryGetTicket("/sys/login", 
                            $.param({"alf_ticket" : alfTicket}), 
                            function(){
                               ///...
                            });
            }   
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:10:55.347

您`tryGetTicket`几乎总是会返回`null`，因为`$.ajax`调用是异步的。

没有`tiket`和`result`变量。

您如何检查实际调用了哪个 URL？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:12:20.960

可能是因为`tiket`笔误？:P

AJAX 调用也是异步的（这就是第一个 A 的用途），因此您可以在成功函数中获得结果并在那里对其进行处理。

因此，在单击函数中调用 tryGetTicket 就像您现在所做的那样，但是将所有这些内容移到`///...`tryGetTicket 的成功函数中，或者创建一个新函数并从该成功函数中调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:13:14.607

试试这个

```
var Path =  "http://example.com"; 
```

现在在 url 路径中添加这个变量，比如

```
url: Path+loginUrl, 
```

# android - 如果 GoogleCredential 过期，如何检查它

> ID：12618895
> 
> 赞同：1
> 
> 时间：2012-09-27T10:06:34.210
> 
> 标签：android, google-api, oauth-2.0, credentials, access-token

我已经从 save-access-token 和 saved-refresh-token 初始化了 GoogleCredential 变量。但我不知道检查它是否过期？

我知道 GoogleCredential 有一个函数 getExpiresInSeconds。但是，如果我从保存的访问令牌和保存的刷新令牌初始化 GoogleCredential，则函数 getExpiresInSeconds 将返回 null。

这种情况下 getExpiresInSeconds 不会为空

```
mResponse = mFlow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute();
mCredential =  new GoogleCredential.Builder().setClientSecrets(CLIENT_ID, CLIENT_SECRET).setJsonFactory(mJsonFactory).setTransport(mHttpTransport).build();
mCredential.setFromTokenResponse(mResponse);
mCredential.getExpiresInSeconds() // will return expired value in second 
```

但在这种情况下

```
String accessTokenSave = mPrefs.getString(GOOGLE_DRIVE_TOKEN, "NO KEY");
String accessRefreshTokenSave = mPrefs.getString(GOOGLE_DRIVE_REFRESH_TOKEN, "NO KEY");

mHttpTransport = new NetHttpTransport();
mJsonFactory = new JacksonFactory();
mCredential = new GoogleCredential.Builder()
.setClientSecrets(CLIENT_ID, CLIENT_SECRET)
.setJsonFactory(mJsonFactory)
.setTransport(mHttpTransport).build();

mCredential.setAccessToken(accessTokenSave);
mCredential.setRefreshToken(accessRefreshTokenSave);
mCredential.getExpiresInSeconds() // will return null value 
```

那么我如何检查 mCredential 案例从 accessTokenSave 和 accessRefreshTokenSave 加载它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:40:14.133

访问令牌将在一小时后过期，而刷新令牌将一直有效，直到被用户撤销。但是，您永远不应该依赖这些时间，而是准备在凭据不再有效时捕获异常，并做出相应的反应。

检查文档以获取完整流程的描述以及实现它的示例代码：[https ://developers.google.com/drive/credentials](https://developers.google.com/drive/credentials)

# c# - 我如何重构这两种方法？

> ID：12618899
> 
> 赞同：1
> 
> 时间：2012-09-27T10:06:40.077
> 
> 标签：c#, refactoring

```
 public static void outputDetail(DateTime previousTime, ref double[] array, StreamWriter streamWriter)  //the parameter in here is not necessary, but want to maintain a similiarity in the TimeOfDay class
    {
        string outputString = previousTime.ToString("yyyy/MM/dd");
        Boolean bypass = true;

        for (int i = 1; i < array.Length - 1; i++)
        {
            outputString = outputString + "," + array[i].ToString();

            if (array[i] != 0)
                bypass = false;
        }
        if (bypass == false)
            streamWriter.WriteLine(outputString);

        for (int i = 0; i < array.Length; i++)
        {
            array[i] = 0;
        }
    }

    public static void outputDetail(DateTime previousTime, ref int[] array, StreamWriter streamWriter)  //the parameter in here is not necessary, but want to maintain a similiarity in the TimeOfDay class
    {
        string outputString = previousTime.ToString("yyyy/MM/dd");
        Boolean bypass = true;

        for (int i = 1; i < array.Length -1; i++)
        {
            if (array[i] != 0)
            {
                outputString = outputString + "," + array[i].ToString();
                bypass = false;
            }
            else
            {
                outputString = outputString + ",";
            }
        }
        if (bypass == false)
            streamWriter.WriteLine(outputString);

        for (int i = 0; i < array.Length; i++)
        {
            array[i] = 0;
        }
    } 
```

它们完全相同，只有一个采用双精度数组，一个采用 int 数组，我看到一些使用 Iconvertible 的示例，但我无法正确使用语法。有人可以为该方法发布一些可行的片段吗？

我该怎么称呼它？

编辑：非常感谢您的回答，我有另一个更复杂的案例需要重构，这里的建议不适用于这两种方法。请点击此链接了解更多详情

[我如何重构这两种方法？第2部分。](https://stackoverflow.com/questions/12620374/how-do-i-refactor-these-2-method-part-2)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:12:23.807

将您的代码更改为：

```
 public static void outputDetail<T>(DateTime previousTime, ref T[] array, System.IO.StreamWriter streamWriter)  //the parameter in here is not necessary, but want to maintain a similiarity in the TimeOfDay class
    {
        string outputString = previousTime.ToString("yyyy/MM/dd");
        Boolean bypass = true;

        for (int i = 1; i < array.Length - 1; i++)
        {
            if (!Object.Equals(array[i], default(T)))
            {
                outputString = outputString + "," + array[i].ToString();
                bypass = false;
            }
            else
            {
                outputString = outputString + ",";
            }
        }
        if (bypass == false)
            streamWriter.WriteLine(outputString);

        Array.Clear(array, 0, array.Length);
    } 
```

有什么改变？

首先是方法签名：它接受一个通用类型的数组（`T`所以不管它是`int`、`double`还是）。`bool``strings`

现在您必须将比较修复为零。零是 int 和 double 的默认值，因此您可以使用 default(T) 来获取实际类型和`Object.Equals()`比较的默认值（`==`并且`!=`没有为泛型类型定义运算符）。

最后，您只需清除数组（再次为零），这样您就可以简单地使用它`Array.Clear()`来完成所有工作（它甚至比手工制作的还要快一点`for`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:45:51.683

其他答案是正确的，使用泛型是最好的，在这里我只是使用 Linq 重构你的代码，以便更清洁：

```
public static void outputDetail<T>(DateTime previousTime, ref T[] array, 
                                   StreamWriter streamWriter) where T : struct
{
    if (array.Any(a => !a.Equals(default(T))))
    {
        string outputString = string.Join(",", 
                                          previousTime.ToString("yyyy/MM/dd"),
                                          string.Join(",", array));

        streamWriter.WriteLine(outputString);
    }

    array = Enumerable.Repeat(default(T), array.Length).ToArray();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:14:28.183

这应该有效。顺便说一句，像这样连接字符串是 GC 的负担，看看 StringBuilder 类。

```
 public static void outputDetail<T>(DateTime previousTime, ref T[] array, StreamWriter streamWriter)  //the parameter in here is not necessary, but want to maintain a similiarity in the TimeOfDay class
    {
        var outputString = new StringBuilder(previousTime.ToString("yyyy/MM/dd"));
        Boolean bypass = true;

        for (int i = 1; i < array.Length - 1; i++)
        {
            outputString.Append("," + array[i]);

            if (!(array[i].Equals(default(T))))
                bypass = false;
        }
        if (bypass == false)
            streamWriter.WriteLine(outputString);

        for (int i = 0; i < array.Length; i++)
        {
            array[i] = default(T);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:41:52.307

只是另一种想法，就像在 Java 中一样，您可以创建一个名为 Number 的抽象类，Integer、Doubles 等从这个抽象类继承。然后，您可以将数组替换为数字数组。这是可扩展的，您可以混合类型。

此示例适用于 Java，但给出了想法。[http://www.daniweb.com/software-development/java/threads/185870/one-method-for-stack-of-either-integer-or-double-parameters](http://www.daniweb.com/software-development/java/threads/185870/one-method-for-stack-of-either-integer-or-double-parameters)

```
public abstract class Number
{
}

public static void outputDetail(DateTime previousTime, ref Number[] array, StreamWriter streamWriter)  //the parameter in here is not necessary, but want to maintain a similiarity in the TimeOfDay class
{
    string outputString = previousTime.ToString("yyyy/MM/dd");
    Boolean bypass = true;

    for (int i = 1; i < array.Length - 1; i++)
    {
        outputString = outputString + "," + array[i].ToString();

        if (array[i] != 0)
            bypass = false;
    }
    if (bypass == false)
        streamWriter.WriteLine(outputString);

    for (int i = 0; i < array.Length; i++)
    {
        array[i] = 0;
    }
} 
```

这是关于该主题的有趣讨论。[http://www.dreamincode.net/forums/topic/261696-a-abstract-number-class/](http://www.dreamincode.net/forums/topic/261696-a-abstract-number-class/)

# database - Primefaces：DataTable 在排序时再现数据

> ID：12618902
> 
> 赞同：1
> 
> 时间：2012-09-27T10:06:44.633
> 
> 标签：database, sorting, primefaces, datatable

我遇到了 Primefaces DataTable 的问题。我想用过滤和排序构建一个复杂的数据表。我对 Primefaces 真的很陌生，所以我研究了 Primefaces Showcase 上的示例。

如果您第一次单击排序按钮，则会复制整个列表并进行排序。在第二次单击时，它会正常排序。

输出如下所示：

初始：列表有 3 个项目。第一次点击：列表有 6 个项目，按 ASC 排序 第二次点击：列表有 6 个项目，按 DES 排序

我很困惑，找不到错误。请帮我解决一下这个。

注意：我在 Apache Tomcat 7.x 上使用 Primefaces 3.4 和 JSF 2.1

仪表板.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

<h:form id="frm_dashboard">

    <p:growl autoUpdate="true" showDetail="true" />

    <p:dataTable var="AntragsDatenObj" value="#{dashboardController.obj_offAntraege}" rowKey="#{AntragsDatenObj.antr_id}" paginator="false" rows="20"  
                 selection="#{dashboardController.selektierterAntrag}" selectionMode="single" id="dt_AntragsDatenObj" style="font-size: 12px; width: 96%">  

        <p: ajax event="rowSelect" update=":frm_dashboard:display" oncomplete="Dialog.show()" />  

        <f:facet name="header">  
            Liste von Anträgen  
        </f:facet>  

        <p:column headerText="ID" sortBy="#{AntragsDatenObj.antr_id}" id="dt_antr_id" style="font-size: 12px;">  
            #{AntragsDatenObj.antr_id}  
        </p:column>  

        <p:column headerText="Start" sortBy="#{AntragsDatenObj.urlb_startdatum}" id="dt_urlb_startdatum" style="font-size: 12px;">  
            #{AntragsDatenObj.urlb_startdatum}  
        </p:column>  

        <p:column headerText="Ende" sortBy="#{AntragsDatenObj.urlb_enddatum}" id="dt_urlb_enddatum" style="font-size: 12px;">  
            #{AntragsDatenObj.urlb_enddatum}  
        </p:column>  

        <p:column headerText="Länge" sortBy="#{AntragsDatenObj.urlb_laenge}" id="dt_urlb_laenge" style="font-size: 12px;">  
            #{AntragsDatenObj.urlb_laenge}  
        </p:column>

        <p:column headerText="Benutzer" sortBy="#{AntragsDatenObj.user_name}" id="dt_user_name" style="font-size: 12px;">  
            #{AntragsDatenObj.user_name}  
        </p:column>

    </p:dataTable>

<p:dialog header="Details" widgetVar="Dialog" resizable="false"  
           width="200" showEffect="explode" hideEffect="explode">  

     <h:panelGrid id="display" columns="2" cellpadding="4">  

         <f:facet name="header">  
             Details
         </f:facet>  

         <h:outputText value="ID:" />  
         <h:outputText value="#{dashboard.selektierterAntrag.antr_id}" id="antr_id"/>  

         <h:outputText value="Startdatum:" />  
         <h:outputText value="#{dashboard.selektierterAntrag.urlb_startdatum}" id="urlb_startdatum"/>  

         <h:outputText value="Enddatum:" />  
         <h:outputText value="#{dashboard.selektierterAntrag.urlb_enddatum}" id="urlb_enddatum"/>  

         <h:outputText value="Länge:" />  
         <h:outputText value="#{dashboard.selektierterAntrag.urlb_laenge}" id="urlb_laenge"/>  
     </h:panelGrid>  
 </p:dialog>  

</h:form> 
```

MangedBean 称为 DashboardController.java 包中的lean.controller；

```
import java.util.List;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import lean.dataobjects.AntragsDatenObj;

@ViewScoped
@ManagedBean
public class DashboardController {

    private List<AntragsDatenObj> obj_offAntraege;

    private AntragsDatenObj selektierterAntrag;

    public List<AntragsDatenObj> getObj_offAntraege() {
        return obj_offAntraege;
    }

    public AntragsDatenObj getSelektierterAntrag() {
        return selektierterAntrag;
    }

    public void setSelektierterAntrag(AntragsDatenObj selektierterAntrag) {
        this.selektierterAntrag = selektierterAntrag;
    }

    public DashboardController() {

        try{

            this.obj_offAntraege = lean.sql.QueryLibrary.getOffneAntraegeMitDaten();

        } catch (Exception e){

            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,"#DashBoard001 KOMPONENTE: getoffneAntraege ist abgestürzt: ",e.getMessage()));

        }

    }

} 
```

数据对象 AntragsDatenObj.java 包lean.dataobjects；

```
import java.util.Date;

public class AntragsDatenObj {

    private int antr_id;
    private int antr_status;
    private Date urlb_startdatum;
    private Date urlb_enddatum;
    private int urlb_laenge;
    private String user_name;

    public AntragsDatenObj(int antr_id, int antr_status, Date urlb_startdatum, Date urlb_enddatum, int urlb_laenge, String user_name) {
        this.antr_id = antr_id;
        this.antr_status = antr_status;
        this.urlb_startdatum = urlb_startdatum;
        this.urlb_enddatum = urlb_enddatum;
        this.urlb_laenge = urlb_laenge;
        this.user_name = user_name;
    }

    public int getAntr_id() {
        return antr_id;
    }

    public int getAntr_status() {
        return antr_status;
    }

    public Date getUrlb_startdatum() {
        return urlb_startdatum;
    }

    public Date getUrlb_enddatum() {
        return urlb_enddatum;
    }

    public int getUrlb_laenge() {
        return urlb_laenge;
    }

    public String getUser_name() {
        return user_name;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:11:43.980

我为我的英语道歉。

datatable.js 第 108 行有问题

```
sortorder = columnHeader.data('sortorder');

if(sortorder) {
    if(sortorder === 'DESCENDING')
        _self.sort(columnHeader, 'ASCENDING');
    else if(sortorder === 'ASCENDING')
        _self.sort(columnHeader, 'DESCENDING');
}
else {
    _self.sort(columnHeader, 'ASCENDING');
} 
```

最初 columnHeader.data('sortorder') 是空的，即使选择了已排序的列。

**修复：**例如，在 ajax 成功时

```
$('body').ajaxSuccess(...); 
```

做

```
function() {
    $('.ui-datatable .ui-sortable-column.ui-state-active').each(function() {
        column = $(this);

        if (!column.data('sortorder')) {
            if (column.find('.ui-icon-triangle-1-n')) {
                column.data('sortorder', 'ASCENDING');
            } else if (column.find('.ui-icon-triangle-1-s')) {
                column.data('sortorder', 'DESCENDING');
            }
        }
    });
} 
```

# c# - Sharepoint 2010 更改用户 Active Directory 组策略，以编程方式将用户添加到 SharePoint 组

> ID：12618903
> 
> 赞同：2
> 
> 时间：2012-09-27T10:06:50.060
> 
> 标签：c#, sharepoint-2010, active-directory, group-policy

我很少有使用 Active Directory 安全组授予权限的网站集。

因此，一个网站集可能有 3 个包含 AD 安全组的网站权限组。

现在是否可以在 SharePoint 中编写一个函数来允许单个用户更改 AD 安全组？

过去，我使用[此](http://www.mstechblogs.com/sharepoint/en/programmatically-add-user-to-sharepoint-group/)代码将单个用户更改为另一个帐户。

我也会有与 Active Directory 同步的问题吗？

如果我错过了什么，请告诉我。

# batch-file - 删除包含 WAR 文件的文件夹

> ID：12618904
> 
> 赞同：1
> 
> 时间：2012-09-27T10:06:53.430
> 
> 标签：batch-file

我在 E 驱动器中有一个文件夹，其中包含很少的 .WAR 文件。

我编写了一个如下的批处理脚本来删除包含 .WAR 文件的文件夹。

```
 @echo off

    rmdir /s /q "path to my folder" 
```

该代码不会删除该文件夹。

谁能帮我？。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:55:06.967

如果您收到的错误消息是“该进程无法访问该文件，因为它正被另一个进程使用”。那么您的默认目录可能等于“我的文件夹的路径”。将以下行添加到批处理脚本的“rmdir”行之前：“cd \” 这将确保您的默认目录不是您要删除的目录。

# jquery - 如何相对于其他 div 的幻灯片向下移动一个 div？

> ID：12618905
> 
> 赞同：-2
> 
> 时间：2012-09-27T10:06:57.597
> 
> 标签：jquery

我正在做一个下拉菜单，其中有 2 个文本框和按钮。我在网站顶部有一个按钮。当有人点击一个 div 正在向下滑动时。我做了这么多。我需要知道如何使用 div 的幻灯片来按下该按钮..请帮助我..

这是我用于向下滑动 div 的 jquery 代码

```
 $('.link_sign_in').click(function(){

                var left=$('.link_sign_in').position().left;
                var top=$('.link_sign_in').position().top;

                $(".drop_down").css("left",left-235);
                $(".drop_down").css("top",0);
                $('.drop_down').slideDown();

                }); 
```

下拉框的下拉框的css

```
.drop_down{
        background-color: #ffffff;
        -webkit-border-bottom-right-radius: 5px;
        -webkit-border-bottom-left-radius: 5px;
        -moz-border-radius-bottomright: 5px;
        -moz-border-radius-bottomleft: 5px;
        border-bottom-right-radius: 5px;
        border-bottom-left-radius: 5px;
        height: 200px;
        width: 300px;
        z-index:100;
        top :200px;
        left:200px;
        position: absolute;
        border: 2px solid #F8C82A;

        -webkit-box-shadow: 0px 8px 15px rgba(50, 50, 50, 0.5);
        -moz-box-shadow:    0px 8px 15px rgba(50, 50, 50, 0.5);
        box-shadow:         0px 8px 15px rgba(50, 50, 50, 0.5);

        border-top: none;
        } 
```

代码关闭登录div

```
.link_sign_in,.link_sign_up{
        cursor:pointer;
        float:left; 
        width:50px;
        margin-left:5px;
        border: 2px solid #f8c82a;
        padding:5px;
        -webkit-border-bottom-right-radius: 5px;
        -webkit-border-bottom-left-radius: 5px;
        -moz-border-radius-bottomright: 5px;
        -moz-border-radius-bottomleft: 5px;
        border-bottom-right-radius: 5px;
        border-bottom-left-radius: 5px;
        border-top: none;

        -webkit-box-shadow: 0px 8px 15px rgba(50, 50, 50, 0.5);
        -moz-box-shadow:    0px 8px 15px rgba(50, 50, 50, 0.5);
        box-shadow:         0px 8px 15px rgba(50, 50, 50, 0.5);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:12:56.483

添加`* { position:relative;}`到 CSS 文档的顶部。这将导致所有页面元素都相对于它们的父元素，这会覆盖某些浏览器的默认行为。然后，确保该按钮实际上是一个容器的 CHILD，其中包含要向下滑动的 div 和按钮。然后，使用`left:20px;`或其他测量值（使用`top`或`bottom`或`right`如果需要）将按钮定位在您想要的位置。然后，当您向下“滑动” div 时，将幻灯片应用于包含您的按钮和滑动 div 的容器 div。这样，按钮和 div 都将向下滑动，并且按钮将保持在您希望它相对于滑动 div 的位置。

# sql - 行到列 SQL 查询

> ID：12618907
> 
> 赞同：0
> 
> 时间：2012-09-27T10:07:03.477
> 
> 标签：sql, sql-server, pivot

我正在编写一个将在 .NET 应用程序中使用的查询，因此我希望 SQL Server 2008 为我完成大部分处理，而不是运行应用程序的客户端 PC。

我正在尝试从我加入的一些表中获取数据。

这是一个例子：

```
SELECT SUBSTRING(CAST(CAST(HCPD.SeferCikisZamani AS TIME) AS VARCHAR), 1, 5) AS Kalkis, SUBSTRING(CAST(CAST(HCPD.DonusZamani AS TIME) AS VARCHAR), 1, 5) AS Donus, V.AracPlaka
FROM HAT_CALISMA_PLANI HCP WITH(NOLOCK)
INNER JOIN HAT_CALISMA_PLANI_DETAY HCPD WITH(NOLOCK) ON HCPD.HatCalismaPlaniKey = HCP.HatCalismaPlaniKey
INNER JOIN VALIDATOR V WITH(NOLOCK) ON V.ValidatorKey = HCPD.ValidatorKey
WHERE HCP.HatKey = 2 AND CAST(HCPD.SeferCikisZamani AS DATE) = '2012-09-25'
ORDER BY Kalkis 
```

此查询返回以下结果：

```
Kalkis  Donus   AracPlaka
-------------------------
01:51   02:01   07 ABY 04
02:02   02:12   07 AB 978
02:21   02:31   07 ABY 04
02:32   02:42   07 AB 978
03:01   03:11   07 ABY 04
03:02   03:12   07 AB 978
03:31   03:41   07 ABY 04
03:42   03:52   07 AB 978
04:01   04:11   07 ABY 04 
```

但是，在我的报告中，它们应该看起来像这样，

```
 07 ABY 04   07 AB 978
Kalkis  06:15       06:30
Donus   07:45       08:00
Kalkis  08:00       08:10
Donus   09:30       09:40
Kalkis  10:00       10:15
Donus   11:30       11:45
Kalkis  12:30       12:45
Donus   14:00       14:15 
```

顺便说一句，这些就像公共汽车时刻表。有谁知道实现这一目标的好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T10:29:07.150

在查询之前查看数据会更容易，但如果要使用现有查询，可以执行以下操作：

```
select *
from
(
  select AracPlaka, val, col,
     row_number() over(partition by AracPlaka order by VAL, col) rn
  from
  (
    SELECT SUBSTRING(CAST(CAST(HCPD.SeferCikisZamani AS TIME) AS VARCHAR), 1, 5) AS Kalkis, 
      SUBSTRING(CAST(CAST(HCPD.DonusZamani AS TIME) AS VARCHAR), 1, 5) AS Donus, 
      V.AracPlaka
    FROM HAT_CALISMA_PLANI HCP WITH(NOLOCK)
    INNER JOIN HAT_CALISMA_PLANI_DETAY HCPD WITH(NOLOCK) 
      ON HCPD.HatCalismaPlaniKey = HCP.HatCalismaPlaniKey
    INNER JOIN VALIDATOR V WITH(NOLOCK) 
      ON V.ValidatorKey = HCPD.ValidatorKey
    WHERE HCP.HatKey = 2 
      AND CAST(HCPD.SeferCikisZamani AS DATE) = '2012-09-25'
   -- ORDER BY Kalkis
  ) x
  unpivot
  (
    val
    for col in(Kalkis, Donus)
  ) u
) x1
pivot
(
  max(val)
  for AracPlaka In([07 ABY 04], [07 AB 978])
) p 
```

由于您尝试使用`PIVOT`两列，因此最简单的方法是先`UNPIVOT`使用`Kalkis`和`Donus`列，然后将 应用于`PIVOT`数据。

这是一个[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6d5f0/42)（不包括您的原始查询）

# java - 为什么 SessionEvents 侦听器不用于 Facebook 登录和注销？

> ID：12618911
> 
> 赞同：0
> 
> 时间：2012-09-27T10:07:13.587
> 
> 标签：java, android, facebook, listener, logcat

我遇到了以下问题——在我的应用程序中集成 Facebook 时，我已经实现了登录/注销的密钥。身份验证成功后，她必须调用授权并替换按钮中的文本。如果用户已经登录 - 她必须调用注销方法并在注销后更改按钮中的文本。一路上，我发现当你调用授权时，我不停地旋转进度，最后什么也没发生，但我摆脱了这个 Facebook 恶作剧。所以问题是他们登录和注销是正确的，但是 - 文本没有变化，日志也不起作用。有什么问题？我希望能得到你的帮助。

```
facebookButton = (Button)findViewById(R.id.facebook_button);
        facebookButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if (facebookProvider.getFacebook().isSessionValid()) {
                    Log.d("YES", "");
                    SessionEvents.LogoutListener logoutListener = new     SessionEvents.LogoutListener() {

                    public void onLogoutFinish() {
                        facebookButton.setText("Login");
                        Log.d("Logout", "Finish");
                    }

                    public void onLogoutBegin() {
                        Log.d("Logout", "Begin");
                        // 
                    }
                };
                SessionEvents.addLogoutListener(logoutListener);
                facebookProvider.facebookLogout();
                Log.d("Logout", "");
            } 
            else {
                Log.d("NO", "");
                SessionEvents.AuthListener loginListener = new SessionEvents.AuthListener() {

                    public void onAuthSucceed() {
                        facebookButton.setText("Logout");
                        Log.d("Login", "Succeed");
                    }

                    public void onAuthFail(String error) {
                        Log.d("Login", "Fail");
                        //
                    }
                };
                SessionEvents.addAuthListener(loginListener);
                facebookProvider.facebookLogin();
                Log.d("Login", "");
            }

        }
    }); 
```

# java - 如何在 Java 中实现一个数据库监听器

> ID：12618915
> 
> 赞同：71
> 
> 时间：2012-09-27T10:07:22.077
> 
> 标签：java, database, listener

我有一个要求，如果在 db 表中插入一条记录，则需要自动执行 java 进程。实现 db 侦听器的最简单方法是什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-08T15:51:45.693

我有 Oracle 的解决方案。你不需要创建你自己的，因为现在 Oracle 购买了 Java，它为它发布了一个监听器。据我所知，这在内部不使用轮询，而是将通知推送到 Java 端（可能基于某些触发器）：

```
public interface oracle.jdbc.dcn.DatabaseChangeListener 
extends java.util.EventListener {
    void onDatabaseChangeNotification(oracle.jdbc.dcn.DatabaseChangeEvent arg0);
} 
```

您可以像这样实现它（这只是一个示例）：

```
public class DBListener implements DatabaseChangeListener {
    private DbChangeNotification toNotify;

    public BNSDBListener(DbChangeNotification toNotify) {
        this.toNotify = toNotify;
    }

    @Override
    public void onDatabaseChangeNotification(oracle.jdbc.dcn.DatabaseChangeEvent e) {
        synchronized( toNotify ) {
            try {
                toNotify.notifyDBChangeEvent(e); //do sth
            } catch (Exception ex) {
                Util.logMessage(CLASSNAME, "onDatabaseChangeNotification", 
                    "Errors on the notifying object.", true);
                Util.printStackTrace(ex);
                Util.systemExit();                                       
            }
        }       
    }
} 
```

**编辑：**
您可以使用以下课程进行注册：`oracle.jdbc.OracleConnectionWrapper`

```
public class oracle.jdbc.OracleConnectionWrapper implements oracle.jdbc.OracleConnection {...} 
```

假设您在某处创建了一个方法：

```
public void registerPushNotification(String sql) {
    oracle.jdbc.driver.OracleConnection oracleConnection = ...;//connect to db

    dbProperties.setProperty(OracleConnection.DCN_NOTIFY_ROWIDS, "true");
    dbProperties.setProperty(OracleConnection.DCN_QUERY_CHANGE_NOTIFICATION, "true");

    //this is what does the actual registering on the db end
    oracle.jdbc.dcn.DatabaseChangeRegistration dbChangeRegistration= oracleConnection.registerDatabaseChangeNotification(dbProperties);

    //now you can add the listener created before my EDIT
    listener = new DBListener(this);
    dbChangeRegistration.addListener(listener);

    //now you need to add whatever tables you want to monitor
    Statement stmt = oracleConnection.createStatement();
    //associate the statement with the registration:
    ((OracleStatement) stmt).setDatabaseChangeRegistration(dbChangeRegistration); //look up the documentation to this method [http://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/jdbc/OracleStatement.html#setDatabaseChangeRegistration_oracle_jdbc_dcn_DatabaseChangeRegistration_]

    ResultSet rs = stmt.executeQuery(sql); //you have to execute the query to link it to the statement for it to be monitored
    while (rs.next()) { ...do sth with the results if interested... }

    //see what tables are being monitored
    String[] tableNames = dbChangeRegistration.getTables();
    for (int i = 0; i < tableNames.length; i++) {
        System.out.println(tableNames[i]    + " has been registered.");
    }
    rs.close();
    stmt.close();
} 
```

此示例不包括 try-catch 子句或任何异常处理。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-05T21:20:40.140

这里有一个类似的答案：[How to make a database listener with java?](https://stackoverflow.com/questions/4594955/how-to-make-a-database-listener-with-java)

您可以使用支持事务的消息队列来执行此操作，并在事务被提交或（连接关闭）不支持通知的数据库时触发消息。在大多数情况下，您将不得不手动通知并跟踪要通知的内容。

**Spring 为AMQP**和**JMS**提供了一些自动事务支持。您可以使用的一种更简单的替代方法是[Guava 的 AsyncEventBus](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/eventbus/AsyncEventBus.html)，但这仅适用于一个 JVM。对于以下所有选项，我建议您使用消息队列通知平台的其余部分。

## 选项 - 非轮询非数据库特定

**ORM 选项**

一些像**Hibernate JPA这样的库** [有实体侦听](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html)器，可以让这更容易，但那是因为他们假设他们管理所有的 CRUDing。

对于常规**JDBC**，您必须自己记账。也就是说，在提交或关闭连接之后，您将向 MQ 发送消息，说明某些内容已更新。

**JDBC 解析**

簿记的一个复杂选项是包装/装饰您的`java.sql.DataSource`和/或`java.sql.Connection`自定义的，以便在[`commit()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#commit())（并关闭）您然后发送消息。我相信一些联合缓存系统可以做到这一点。您可以捕获已执行的 SQL 并解析以查看它是 INSERT 还是 UPDATE，但如果没有非常复杂的解析和元数据，您将无法获得行级监听。遗憾的是，我不得不承认这是**ORM**提供的优势之一，因为它知道您的更新内容。

**道选项**

如果您*不*使用 ORM，最好的选择是在事务关闭后手动在您的 DAO 中发送一条消息，说明一行已更新。*只需确保在发送消息之前交易已关闭。*

## 选项 - 轮询非数据库特定

有点遵循@GlenBest 的建议。

我会做一些不同的事情。我会将定时器外部化或使其只有一台服务器运行定时器（即调度程序）。我只会使用`ScheduledExecutorService`（最好将其包装在 Guava's 中`ListenerScheduledExecutorService`）而不是 Quartz（恕我直言，使用石英来轮询超级杀伤力）。

您想要观看的所有表格都应该添加一个“通知”列。

然后你做类似的事情：

```
// BEGIN Transaction
List<String> ids = execute("SELECT id FROM table where notified = 'f'");
//If db not transactional either insert ids in a tmp table or use IN clause
execute("update table set notified = 't' where notified = 'f'")
// COMMIT Transaction
for (String id : ids) { mq.sendMessage(table, id); } 
```

## 选项 - 数据库特定

使用 Postgres `NOTIFY`，您仍然需要在某种程度上进行轮询，因此您将完成上述大部分操作，然后将消息发送到总线。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-09-27T10:14:22.917

一个通用的解决方案可能包括在感兴趣的表上创建一个触发器，通知任何侦听器有关`INSERT`事件。一些数据库已经为这种进程间通知提供了正式的方法。例如：

### 甲骨文：

*   这[`DBMS_ALERT`](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_alert.htm)是进行此类通知的一种简单方法
*   [Oracle AQ / Oracle Streams](http://www.oracle.com/technetwork/database/information-management/streams-fov-11g-134280.pdf)提供更复杂的队列机制

### Postgres：

*   该[`NOTIFY`](http://www.postgresql.org/docs/9.2/static/sql-notify.html)声明是此类通知的简单方法

### 其他：

*   其他数据库中可能有类似的通知机制，我不知道。
*   您始终可以通过在事件表中插入事件来实现自己的事件通知队列表，该事件表由 Java 进程使用/轮询。但是，要做到这一点并提高性能可能会非常棘手。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-06T10:05:49.800

假设：

*   拥有标准的可移植代码比 Java 程序的即时实时执行更重要。您希望允许对替代未来技术的可移植性（例如，避免专有数据库事件、外部触发器）。Java 进程可以在记录添加到表后稍微运行（例如 10 秒后）。即调度+轮询或实时触发器/消息/事件都是可以接受的。

*   如果一次将多行添加到表中，您希望运行一个进程，而不是很多。数据库触发器将为每一行启动一个 java 进程 - 不合适。

*   服务质量很重要。即使出现硬件或软件致命错误，您也希望 java 程序再次运行并处理不完整的数据。

*   您想在您的环境中应用强大的安全标准（例如，避免让 java 或 DB 直接执行 OS 命令）

*   你想最小化代码

    1.  不依赖专有数据库功能的核心 Java 标准代码：

        *   使用 ScheduledExecutorService 或 Quartz 调度程序（或 unix cron 作业或 windows 任务调度程序）每分钟运行一次 java 程序（或每 10 秒运行一次）。它既充当调度程序又充当看门狗，确保程序全天候运行。Quartz 也可以部署在应用服务器中。
        *   让您的 java 程序运行 1 分钟（或 10 秒），循环，通过 JDBC 查询 DB 并休眠几秒钟，然后最终退出。
    2.  如果您的应用程序服务器中有应用程序：创建一个使用 Timer Service 的 Session Bean，并再次通过 JDBC [Session Bean Timer Service](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)查询表。

    3.  有一个写入/附加到文件的数据库触发器。使用 java 7 filewatcher 在文件更改时触发逻辑[Java 7 File Watcher](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

还有另一种选择：使用带有 DB 适配器触发逻辑（例如 Fuse 或 Mule 或 OpenAdapter）的开源 ESB，但这会提供超出您声明要求的强大功能，并且安装和学习既费时又复杂。

使用 @Schedule 的 EJB 计时器示例：

```
public class ABCRequest {
   // normal java bean with data from DB
}

@Singleton
public class ABCProcessor {    
    @Resource DataSource myDataSource;   
    @EJB ABCProcessor abcProcessor;
    // runs every 3 minutes 
    @Schedule(minute="*/3", hour="*")
    public void processNewDBData() {
        // run a JDBC prepared statement to see if any new data in table, put data into RequestData
        try
        {
           Connection con = dataSource.getConnection();
           PreparedStatement ps = con.prepareStatement("SELECT * FROM ABC_FEED;");
           ...
           ResultSet rs = ps.executeQuery();
           ABCRequest abcRequest
           while (rs.hasNext()) {
               // population abcRequest
           }
           abcProcessor.processABCRequest(abcRequst);
        } ...
    }    
}

@Stateless
public class class ABCProcessor {
    public void processABCRequest(ABCRequest abcRequest) {
    // processing job logic
    }
} 
```

另请参阅：有关将 CDI 事件对象从 EJB 发送到 Web 容器的信息，[请参阅此答案](https://stackoverflow.com/questions/13060337/remote-polling-in-managedbean-and-notify-client-view-via-push)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T23:50:53.447

我不确定该解决方案在多大程度上满足您的需求，但可以考虑作为一种选择。如果您使用的是 oracle，那么您可以编写一个 java 程序并将其编译为 oracle 函数。您可以从插入后触发器调用您的 java 程序。

[oracle DB中的Java程序](http://docs.oracle.com/cd/B28359_01/java.111/b31225/chone.htm)

# c# - 将按钮单元绑定到 DatagridView 中的图像链接

> ID：12618916
> 
> 赞同：0
> 
> 时间：2012-09-27T10:07:25.193
> 
> 标签：c#, datagridview

我有一个 gridview 通过类和代码 id 的方法加载带有代码的列：

```
 Queue objQueue = new Queue();
            dataGridView1.DataSource = objQueue.GetAllQueue();
            DataGridViewButtonColumn btnFile = new DataGridViewButtonColumn();
            btnFile.UseColumnTextForButtonValue = true;
            btnFile.Name = "btnViewFile";
            btnFile.Text = "View";
            btnFile.HeaderText = "View Image";
            dataGridView1.Columns.Add(btnFile); 
```

在数据网格视图中加载按钮没有问题，但我如何绑定此按钮以通过新设计的表单或 Windows 图像和传真查看器打开图像链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:00:35.060

您可以将事件处理程序附加到 DataGrid 视图

```
dataGridView1.CellClick += new DataGridViewCellEventHandler(dataGridView1_CellClick); 
```

并将其处理为

```
void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == 0) //Or your Button Index location
            {
                MessageBox.Show("Here");
            }
        } 
```

然后，您可以创建一个新表单并显示它或按照您的意愿打开一个图像链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:46:04.910

解决方案 ：

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex ==1) //Assuming the button column as second column, if not can change the index
            {
                //check if anything needs to be validated here
                Form1 f = new Form1();
                f.navId = dataGridView1.Rows[e.RowIndex].Cells[2].Value.ToString();
                f.Show();

            }
        } 
```

在上面的代码中，使用这个语句分配 id 的值 f.navId = dataGridView1.Rows[e.RowIndex].Cells[2].Value.ToString();

为此，只需在目标表单中声明一个公共变量（例如，navId）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:31:41.330

这应该工作

```
btnFile.Click += btnFile_Click; 
```

现在定义 btnFile_Click 文件以在响应中流式传输图像

# tfs - TFS 将案例附加到现有签到

> ID：12618919
> 
> 赞同：0
> 
> 时间：2012-09-27T10:07:33.850
> 
> 标签：tfs, checkin

我检查了一些代码，但我忘了附上案例。有没有办法可以返回并将案例附加到现有的签到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:54:15.640

*   打开“案例”工作项（我假设您正在谈论*测试用例*或*用例*）
*   在“所有链接”选项卡上单击“链接到”
*   选择“变更集”作为链接类型并选择适当的变更集。
*   按确定

TFS 链接双向工作，因此通过在工作项中添加到变更集的链接，变更集也将具有到工作项的链接。

# ruby-on-rails - 使用 capistrano 部署时“本地”gem 不起作用

> ID：12618927
> 
> 赞同：3
> 
> 时间：2012-09-27T10:08:02.840
> 
> 标签：ruby-on-rails, ruby, capistrano, bundler, activeadmin

我正在做一个需要 active_admin gem 的项目。但我需要修改 activeadmin ：

*   我在我创建的目录中克隆了 active_admin 存储库：`/vendor/gems/`
*   删除 .git 内部：`/vendor/gems/active_admin/`
*   将文件夹添加到我自己的 git 存储库
*   我修改了 Gemfile 以指向该文件夹：

    `gem "active_admin", :path => "vendor/gems/active_admin"`

它在本地开发机器上运行良好：我这样做`bundle install`并且运行良好：

```
Using activeadmin (0.5.0) from source at ./vendor/gems/active_admin 
```

但是当我做 a 时`cap deploy`，bundle 抱怨：

```
 ** [out] Could not find activeadmin-0.5.0 in any of the sources 
```

有什么神奇的解决方案吗？我应该将 activeadmin 包含在另一个目录中，例如 lib 并将其从 gemfile 中删除吗？

谢谢你帮助我！

Pof

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:32:35.337

尝试指定 git 路径而不是本地路径。

```
gem "active_admin", :git => 'git://........../gem_name.git' 
```

我在部署到 heroku 时遇到了同样的问题，我让它在指定 git 路径而不是本地路径时工作。检查：[如何在heroku上使用本地宝石？](https://stackoverflow.com/questions/12280684/how-to-get-working-a-local-gem-on-heroku)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:59:33.397

Bundler v1.2 确实从 github 获取了它，请[在此处](http://gembundler.com/v1.2/index.html)查看详细信息。

同样使用 bundler，您可以将构建的 gem 打包到 repo 中，而无需为它们克隆 github repos。赶紧跑

```
$ bundle package
$ bundle install 
```

在您的存储库中，并提交捆绑程序添加到存储库的 gem。或者，您可以使用您在本地构建的 gem 将它放在 /vendor/cache 中，所有其他的最终都在其中。

# c++ - 创建交换链失败

> ID：12618933
> 
> 赞同：2
> 
> 时间：2012-09-27T10:08:34.607
> 
> 标签：c++, directx

我正在关注 DX 示例和 MSDN 参考，但我现在碰壁了。

我从 D3D11CreateDeviceAndSwapChain() 获得 E_InvalidArg 的 HRESULT。我知道这是我通过的 IDXGIAdapter，因为如果我将其更改为 null，它就会起作用。

我无法弄清楚我的初始化有什么问题。也许有更好知识的人知道我做错了什么。这里是：

变量：

```
vector<IDXGIAdapter1*> vAdapters;
IDXGIAdapter1* selectedVAdapter; // Constructor inits this to null 
```

方法：

```
void refreshVideoAdapters(){
    IDXGIAdapter1* pAdapter;
    IDXGIFactory1* pFactory=NULL;

    uint lastID=0;
    if(selectedVAdapter){
        DXGI_ADAPTER_DESC1* desc=NULL;
        selectedVAdapter->GetDesc1(desc);
        lastID=desc->DeviceId;
        releaseVideoAdapter();
    }

    if(FAILED(CreateDXGIFactory1(__uuidof(IDXGIFactory1), (void**)&pFactory))) return;

    for(uint i=0; pFactory->EnumAdapters1(i, &pAdapter)!=DXGI_ERROR_NOT_FOUND; i++){
        vAdapters.push_back(pAdapter);

        if(lastID){
            DXGI_ADAPTER_DESC1* desc=NULL;
            pAdapter->GetDesc1(desc);
            if(lastID==desc->DeviceId){
                selectedVAdapter=pAdapter;
                lastID=0;
            }
        }
    }

    if(pFactory) pFactory->Release();
}
void releaseVideoAdapter(){
    for(uint i=0; i<vAdapters.size(); i++){
        vAdapters[i]->Release();
        vAdapters[i]=NULL;
    }
    vAdapters.clear();
    selectedVAdapter=NULL;
}
IDXGIAdapter1* getVideoAdapter(){return selectedVAdapter;}
bool setVideoAdapter(uint num=0){
    if(num<vAdapters.size()){
        selectedVAdapter=vAdapters[num];
        return 1;
    }
    return 0;
} 
```

通话的相关部分：

```
 ...
    D3D_FEATURE_LEVEL featureLevels[]={
        D3D_FEATURE_LEVEL_11_0,
        D3D_FEATURE_LEVEL_10_1,
        D3D_FEATURE_LEVEL_9_3,
    };
    uint featuresSize=ARRAYSIZE(featureLevels);

    D3D_DRIVER_TYPE driverTypes[]={
        D3D_DRIVER_TYPE_HARDWARE,
        D3D_DRIVER_TYPE_WARP,
        D3D_DRIVER_TYPE_REFERENCE,
    };
    uint driversSize=ARRAYSIZE(driverTypes);

    refreshVideoAdapters();
    setVideoAdapter();

    DXGI_SWAP_CHAIN_DESC sd;
    ZeroMemory( &sd, sizeof( sd ) );
    sd.BufferCount = 1;
    sd.BufferDesc.Width = 42;
    sd.BufferDesc.Height = 42;
    sd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    sd.BufferDesc.RefreshRate.Numerator = 60;
    sd.BufferDesc.RefreshRate.Denominator = 1;
    sd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    sd.OutputWindow = hWnd;
    sd.SampleDesc.Count = 1;
    sd.SampleDesc.Quality = 0;
    sd.Windowed = TRUE;

    HRESULT success=D3D11CreateDeviceAndSwapChain(
        selectedVAdapter, driver, NULL, flag, featureLevels, featuresSize, 
        D3D11_SDK_VERSION, &sd, &swapChain, &deviceInterface,
        &selectedFeatureLevel, &deviceContext);

       ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T10:17:28.417

您没有显示整个 D3D11CXreateDeviceAndSwapChain() 调用，所以我只能猜测 - 您是否注意到[文档中的](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476083%28v=vs.85%29.aspx)那一段？

> 如果将 pAdapter 参数设置为非 NULL 值，则还必须将 DriverType 参数设置为 D3D_DRIVER_TYPE_UNKNOWN 值。如果将 pAdapter 参数设置为非 NULL 值并将 DriverType 参数设置为 D3D_DRIVER_TYPE_HARDWARE 值，则 D3D11CreateDeviceAndSwapChain 返回 E_INVALIDARG 的 HRESULT。

很容易被那个困住，因为“嘿，我希望设备使用硬件支持”:-)

# node.js - node js中req和res对象的属性和方法

> ID：12618939
> 
> 赞同：2
> 
> 时间：2012-09-27T10:09:08.910
> 
> 标签：node.js, express

node js中可用的response和request对象的属性和方法有哪些？

喜欢：`request.url`或`res.end`，`res.write`？

我在哪里可以找到所有列出的属性？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:39:36.127

在 JavaScript 中找出对象具有哪些函数、属性……的最简单方法是将对象序列化为字符串并将该字符串打印到控制台。

基本上这是一个单行，例如：

```
console.log(JSON.stringify(req)); 
```

这向您展示了该`req`对象所拥有的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:50:47.967

[http://nodejs.org/api/http.html](http://nodejs.org/api/http.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T02:45:06.333

为了更好地理解 nodejs 固有的模块之一，您应该首先阅读它的文档。然后，如果需要进一步了解，您将需要探索定义它的源代码。（大多数内部模块本身都是用 JavaScript 编写的。）

例如，ServerResponse 对象（通常作为“res”传递到 HTTP 请求处理程序）在 http.js 的第 867 行定义，可以在[https://github.com/joyent/node/的 nodejs 源代码中找到blob/master/lib/http.js](https://github.com/joyent/node/blob/master/lib/http.js)

通过探索源代码，您将能够看到对象本身支持哪些方法和属性。

然后，要充分了解对象的工作原理并发现其**所有**方法和属性，您需要遵循其继承树。

> ServerResponse 继承自
> 
> > OutgoingMessage（在同一个文件中定义），它本身继承自
> > 
> > > Stream（在stream.js中定义）进一步继承自
> > > 
> > > > events.EventEmitter，当然是一个
> > > > 
> > > > > 目的

因此，ServerResponse 的方法和属性的完整列表是：

```
ServerResponse

  statusCode             property
  _implicitHeader()      method
  assignSocket()         method
  detachSocket()         method
  writeContinue()        method
  writeHead()            method
  writeHeader()          method

  _buffer()              (from OutputMessage) method
  _finish()              (from OutputMessage) method
  _flush()               (from OutputMessage) method
  _renderHeaders()       (from OutputMessage) method
  _send()                (from OutputMessage) method
  _storeHeader()         (from OutputMessage) method
  _writeRaw()            (from OutputMessage) method
  addTrailers()          (from OutputMessage) method
  destroy()              (from OutputMessage) method
  end                    (from OutputMessage) method
  getHeader()            (from OutputMessage) method
  removeHeader()         (from OutputMessage) method
  setHeader()            (from OutputMessage) method
  write()                (from OutputMessage) method

  pipe()                 (from Stream) method

  addListener()          (from EventEmitter) method
  emit()                 (from EventEmitter) method
  listeners()            (from EventEmitter) method
  on()                   (from EventEmitter) method
  once()                 (from EventEmitter) method
  removeAllListeners()   (from EventEmitter) method
  removeListener()       (from EventEmitter) method
  setMaxListeners()      (from EventEmitter) method

  arguments              (from Object) property
  caller                 (from Object) property
  length                 (from Object) property
  name                   (from Object) property
  prototype              (from Object) property
  super_                 (from Object) property

  __defineGetter__()     (from Object) method
  __defineSetter__()     (from Object) method
  __lookupGetter__()     (from Object) method
  __lookupSetter__()     (from Object) method
  constructor()          (from Object) method
  hasOwnProperty()       (from Object) method
  isPrototypeOf()        (from Object) method
  propertyIsEnumerable() (from Object) method
  toLocaleString()       (from Object) method
  toString()             (from Object) method
  valueOf()              (from Object) method
  apply()                (from Object) method
  bind()                 (from Object) method
  call()                 (from Object) method 
```

通过跟踪对象的整个继承树，您可以深入了解 nodejs 的工作原理，并欣赏它是一个多么了不起的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:14:56.470

您可以在任何 Node.js 手册网站上找到许多列出的属性，例如[http://nodemanual.org/latest/nodejs_dev_guide/creating_an_http_server.html](http://nodemanual.org/latest/nodejs_dev_guide/creating_an_http_server.html)

# magento - magento中消息（成功/错误）的路径？

> ID：12618942
> 
> 赞同：1
> 
> 时间：2012-09-27T10:09:11.933
> 
> 标签：magento

我想在 magento 中更改消息（成功/错误）的位置。我得到了那个代码。

这是布局：

```
<layout>
    <default>
        <reference name="after_body_start">
            <block type="core/template" name="top.messages" template="core/messages/top.phtml" before="-" />
        </reference>
    </default>
</layout> 
```

这是一个模板文件：

```
<?php $_messageCollection = $this->getMessagesBlock()->getMessageCollection() ?>

<?php if ($_messageCollection->count()): ?>
<div>
<?php
    echo $this->getMessagesBlock()->getGroupedHtml();
    $_messageCollection->clear();
?>
</div>
<?php endif; ?> 
```

这是用于将错误/成功消息更改到页面顶部的代码之一。

我需要更改消息的设计。哪个文件包含messages.phtml？我使用了这个路径文件`app/design/frontend/your_package/your_theme/template/core/`。

但它不起作用。任何人都可以帮助为此更改设计。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:33:49.330

html 不是在模板文件中生成的，而是在块中生成的 - [Mage_Core_Block_Messages](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/Block/Messages.php#L229)

因此，如果您想自定义它，那么：

1.  重写`Mage_Core_Block_Messages`，以便您可以提供自己的版本`getGroupedHtml()`
2.  自定义您的模板，以便它使用`getMessages()`而不是`getGroupedHtml()`

如果您使用方法 2，那么您可以查看 core/messages.phtml 以获得灵感。您的模板可能类似于：

```
<?php  

$types = array(
    Mage_Core_Model_Message::ERROR,
    Mage_Core_Model_Message::WARNING,
    Mage_Core_Model_Message::NOTICE,
    Mage_Core_Model_Message::SUCCESS
);

$html = '';
foreach ($types as $type) {
    if ( $messages = $this->getMessagesBlock()->getMessages($type) ) {
        if ( !$html ) {
            $html .= '<ul class="messages">';
        }
        $html .= '<li class="' . $type . '-msg">';
        $html .= '<ul>';

        foreach ( $messages as $message ) {
            $html.= '<li>';
            $html.= $message->getText();
            $html.= '</li>';
        }
        $html .= '</ul>';
        $html .= '</li>';
    }
}
if ( $html) {
    $html .= '</ul>';
}
echo $html;
?>
<?php $_messageCollection = $this->getMessagesBlock()->getMessageCollection()->clear() ?> 
```

虽然不是最好的模板代码，所以您需要考虑重构并将一些逻辑移到一个块中，这将涉及创建您自己的模块。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T10:31:33.917

Prasoft 首先我了解您需要更改错误消息的位置和设计。

I. 更改设计：您可以编辑 Css 来做到这一点，但如果您想更改 HTML 结构，请参考文件

> magento/app/design/frontend/base/default/template/core/messages.phtml

当然，您需要在主题中进行更改。

二、要更改消息的位置，您需要参考该文件。

> magento/app/design/frontend/base/default/template/page/1column.phtml

参考代码。

```
<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<?php echo $this->getChildHtml('after_body_start') ?>
<div class="wrapper">
   <?php echo $this->getChildHtml('global_notices') ?>
    <div class="page"> 
    <?php echo $this->getChildHtml('header') ?>
    <div class="main-container col1-layout">
        <div class="main">
            <?php echo $this->getChildHtml('breadcrumbs') ?>
            <div class="col-main">
                <?php echo $this->getChildHtml('global_messages') ?>
                <?php echo $this->getChildHtml('content') ?>
            </div>
        </div>
    </div>
    <?php echo $this->getChildHtml('footer') ?>
    <?php echo $this->getChildHtml('before_body_end') ?>
</div>
</div>
<?php echo $this->getAbsoluteFooter() ?>
</body> 
```

当您谈论总是出现在该部分下的错误消息时，要更改位置，请根据您的 HTML 结构`global_messages`重新定位此行。`<?php echo $this->getChildHtml('global_messages') ?>`

# iphone - 从屏幕捕获的图像创建视频

> ID：12618952
> 
> 赞同：1
> 
> 时间：2012-09-27T10:09:39.170
> 
> 标签：iphone, objective-c, ios

我正在尝试创建一个应用程序的视频，该视频以定义的帧速率捕获屏幕截图。一切实际上都工作正常，只是 iPad 3 和 iPad 2 上的“renderInContext：”函数似乎不遵守屏幕捕获的指定帧速率。我知道，由于屏幕的大小还考虑了视网膜显示，renderInContext ：执行速度比 iPhone 或 iPod 慢。

事情是在 iPad 3 上，如果我将捕获速率设置为每秒 10 帧，捕获实际上是每秒 2 帧，这意味着我无法捕获 8 帧，这使得渲染的视频非常跳跃和不流畅。在 iPad 2 上，我最多可以达到每秒 6 帧，这是可以忍受的。然而，iPad 2 将在一段时间后面临淘汰，我假设 iPad 3 将是市场上唯一可用的设备。所以我想 iPad 3 将是我应该改进我的代码的地方。

我不期待在 iPad 3 上拥有 10 fps 或更高的屏幕捕获率，只要在 iPad 3 上拥有至少 6 fps 的捕获率就可以了。然而，如果我使用整个屏幕（即 768X1024），它似乎 renderInContext: 在 iPad 3 中，它似乎需要至少 800 毫秒才能完成渲染。显然我有 renderInContext: 在特定帧速率（例如 1/10 fps）的计时器上运行。如果某些对 renderInContext: 的调用重叠说例如它需要 800 毫秒才能完成，但我有另一个对 renderInContext 的调用：在说 1/10FPS（这将是 0.0813）之后，我会侦察，那么理论上我仍然以速率捕获。将图像存储在数组中以供以后处理似乎很好，但由于分配了大量内存，我会收到内存警告，然后会发生崩溃。

无论如何，我的问题是，有没有其他方法可以使用“renderInContext:”方法访问显示缓冲区。甚至，只是将 CVImageRef 写入文件而不在写入 png 之前将 CVImageRef 转换为 UIImage？或者一种方法可以确保我可以以我设置的相同帧速率编写 ImageRef 处理，这样我就知道几乎没有重叠并确保正确释放内存。

# php - Symfony 2.1 会话本地值和主值（阅读 phpinfo）

> ID：12618953
> 
> 赞同：1
> 
> 时间：2012-09-27T10:09:39.573
> 
> 标签：php, session, symfony, symfony-2.1, phpinfo

当我从 symfony 2.0 迁移到 symfony 2.1 时，我遇到了会话问题。

我正在使用 simplesamlphp 进行身份验证，并且在 symfony 2.0 上一切正常。

在 Symfony 2.1 上是不行的。我在 phpinfo->session 上检查了它们之间的差异，这是我得到的：

```
 symfony2.1         symfony 2.0        Master Value
session.save_handler         user              files                files

session.save_path     (..)/symproject/app   (..)/wamp/tmp      (..)/wamp/tmp
                      /cache/dev/sessions 
```

这个值必须等于 php.ini，因为 simplesaml 需要它！

我可以`framework:session:save_path`在 config.yml 上设置属性，但我认为这不是一个好习惯，因为保存路径可能会有所不同，具体取决于我是否在本地开发机器上（我的项目在 git 上）。

关于 save_handler，我找不到在 config.yml 上指定它的方法。我是否坚持使用“用户”？

这个 symfony 版本发生了什么？在 symfony 2.0 中这是开箱即用的！请帮忙。没有像样的文档（相信我我看过！！）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:51:32.563

终于我明白了！

Symfony 2.1 默认具有 Native* 驱动程序。这会覆盖 php.ini 上现有的配置。

如果要使用 php-ini 配置，则必须将其传递`null`给`NativeSessionStorage`处理程序 arg 的构造函数。

这是通过在 config.yml 上放置以下配置来完成的：

```
framework:
    session:
        handler_id: ~ 
```

可以在 [此处](https://github.com/symfony/symfony/pull/5267)阅读有关此决定的更多信息。

symfony 文档和升级手册中缺少此信息。

# ruby-on-rails - Ruby如何将数据发送到其他页面上的输入并将结果发送到我的应用程序？

> ID：12618962
> 
> 赞同：0
> 
> 时间：2012-09-27T10:10:02.510
> 
> 标签：ruby-on-rails, ruby, http, get, net-http

在我的 Ruby on Rails 应用程序中，我需要将获取请求发送到另一个网页，之后该页面将被重定向并且所有搜索结果都将可见......但是我如何在 Rails 中做到这一点？我只需要发送 get-request 并获取我的应用程序元素值，这些元素在特定的 css id 或类中，也将是数组......

对于第一部分，我认为使用 net::http 很好，但是如何解决问题的第二部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:24:37.407

您可以使用[Mechanize](http://mechanize.rubyforge.org/)进行网页抓取。它使用 Nokogiri 来解析页面。

# c# - 将 DirectShow c++ 的 API 与 C#（COM 组件）一起使用

> ID：12618963
> 
> 赞同：4
> 
> 时间：2012-09-27T10:10:05.277
> 
> 标签：c#, c++, com, directshow, regsvr32

我正在使用 Directshow 开发一个 Windwos 表单应用程序。开始时，我使用位于 windows/system32 中的 Quarts.dll 来获取 Directshow 的基本 API。过了一会儿，我意识到我需要 Directshow 的整个 API，因为我需要创建一个新的 Video Renderer 过滤器（VM7）。为此，我需要访问 Directshow c++ API 中提供的一些接口。我发现 Directshow 是一个 COM 组件，如果我找到正确的绑定方式，我可以在 C# 中访问他的 API。

现在，这就是我为访问 API 所做的：

我发现 Windows SDK 中提供了 C++ API。我需要的 API 位于 devenum.idl、axcore.idl 和 axextend.idl。

这些是接口描述语言文件，我发现我可以通过 cmd 使用 midl.exe 创建一个 .tlb 文件（一个类型库），现在在文件的帮助下我可以访问我需要的接口。但是要使用 midl 编译器，我需要创建一个新的 .idl 文件，其中包含我想要的接口，它看起来像这样：

```
import "devenum.idl";
import "axcore.idl";
import "axextend.idl";

[
uuid(A68F9934-FDB9-4AAE-A631-F9307171B2FA),
helpstring("DirectShow interfaces")
]
library DirectShow
{
    interface IFilterGraph;
    interface ICreateDevEnum;
    interface IGraphBuilder;
    interface ICaptureGraphBuilder2;
    interface IFileSinkFilter;
    interface IFileSinkFilter2;
    interface IAMAudioInputMixer;
}; 
```

这需要创建一个新的 guid。

之后，我能够运行 midl 并创建一个 .tlb 文件，但是当我尝试添加对 .tlb 文件的引用时，它给出了一个错误。

我找到了一种从 .tlb 文件创建 .dll 文件的方法，方法是通过 .tlb 文件上的 cmd 运行 tlbimp.exe。它创建了一个我成功添加到我的项目中的 .dll。现在 Visual Studio 知道如何与我试图获得的所有接口进行交互。

但是对于我现在面临的问题：

在运行时我收到此错误：

**由于以下错误，检索具有 CLSID {56A868A9-0AD4-11CE-B03A-0020AF0BA770} 的组件的 COM 类工厂失败：80040154 未注册类（来自 HRESULT 的异常：0x80040154 (REGDB_E_CLASSNOTREG)）。**

我可以看到问题的组件 clsid 不是我创建的 .idl 文件中库的 clsid，它可以证明问题出在我正在使用的导入文件上，可能是这些文件中的错误 guid？

我还认为问题可能是 .dll 未在我的系统上注册。我尝试使用 regsvr32 但它给了我一个错误说：

**模块“directshow.dll”已加载，但未找到入口点 DLLRegisterServer...**

现在有人请救救我，告诉我如何解决这个问题或建议我通过 c# 使用 Directshow 的 C++ API 的不同解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:00:22.343

您将很难直接从 C# 代码连接 DirectShow API。幸运的是，这项工作已经完成并可作为[DirectShow.NET 库](http://directshownet.sourceforge.net/)使用。它带有您需要的所有绑定和示例项目。

特别是这个错误

> 由于以下错误，检索具有 CLSID {56A868A9-0AD4-11CE-B03A-0020AF0BA770} 的组件的 COM 类工厂失败：80040154 未注册类（来自 HRESULT 的异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

告诉您正在尝试使用`IGraphBuilder`接口标识符`IID`作为 coclass 标识符`CLSID`。这预计不会奏效。

# scipy - scipy.interpolate.LinearNDInterpolator 在大型数据集上无限期挂起

> ID：12618971
> 
> 赞同：4
> 
> 时间：2012-09-27T10:10:34.520
> 
> 标签：scipy, interpolation

我在 Python 中插入一些数据以在常规网格上重新网格化，以便我可以部分集成它。数据表示一个高维参数空间的函数（目前为 3，将扩展到至少 5 个）并返回可观察的多值函数（目前为 2，将扩展到 3，然后可能扩展到数十个）。

[`scipy.interpolate.LinearNDInterpolator`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.LinearNDInterpolator.html)由于缺少任何其他明显的选项，我正在执行插值（并且因为我理解`griddata`只是调用它）。在一个较小的数据集（15,000 行列数据）上它可以正常工作。在较大的集合 (60,000+) 上，该命令似乎无限期地运行。`top`表示 iPython 正在使用 100% CPU 并且终端完全没有响应，包括对`C-c`. 到目前为止，我已经离开了几个小时无济于事，最终我想通过几百万个条目。

我怀疑这个问题与[这张票](http://mail.scipy.org/pipermail/scipy-user/2011-March/028844.html)有关，但据说是在我昨天升级到的 SciPy 0.10.0 中修补的。

我的问题基本上是*如何在大型数据集上执行多维插值*？根据我的尝试，解决方案可能来自几个可能的地方，但我没有找到它们的运气。（由于几个 scipy 的子域[似乎已关闭](http://www.downforeveryoneorjustme.com/www.scipy.org)，我的搜索没有帮助......）

*   怎么了`LinearNDInterpolator`？或者，至少，我怎样才能找出问题所在并尝试规避上吊？
*   有没有办法重新制定插值，这样`LinearNDInterpolator`就可以了？也许通过谨慎地将数据分块以将其重新划分为部分？
*   还有其他更适合该问题的高维插值器吗？（我注意到大多数 SciPy 的替代方案都仅限于 <2D 参数空间。）
*   还有其他方法可以将多维数据放到常规用户定义的网格中吗？这就是我试图通过插值来做的一切......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T16:13:25.423

问题很可能是您的数据集太大，因此无法在合理的时间内完成其 Delaunay 三角剖分的计算。检查`scipy.spatial.Delaunay`使用从完整数据集中随机挑选的较小数据子集的时间缩放，以估计完整数据集计算是否在宇宙结束之前完成。

如果您的原始数据位于矩形网格上，例如

```
v[i,j,k,l] = f(x[i], y[j], z[k], u[l]) 
```

那么使用基于三角测量的插值是*非常*低效的。最好使用张量积插值，即通过一维插值方法对每个维度进行连续插值：

```
import numpy as np
from scipy.interpolate import interp1d

def interp3(x, y, z, v, xi, yi, zi, method='cubic'):
    """Interpolation on 3-D. x, y, xi, yi should be 1-D
    and z.shape == (len(x), len(y), len(z))"""
    q = (x, y, z)
    qi = (xi, yi, zi)
    for j in range(3):
        v = interp1d(q[j], v, axis=j, kind=method)(qi[j])
    return v

def somefunc(x, y, z):
    return x**2 + y**2 - z**2 + x*y*z

# some input data
x = np.linspace(0, 1, 5)
y = np.linspace(0, 2, 6)
z = np.linspace(0, 3, 7)
v = somefunc(x[:,None,None], y[None,:,None], z[None,None,:])

# interpolate
xi = np.linspace(0, 1, 45)
yi = np.linspace(0, 2, 46)
zi = np.linspace(0, 3, 47)
vi = interp3(x, y, z, v, xi, yi, zi)

import matplotlib.pyplot as plt
plt.subplot(121)
plt.pcolor(xi, yi, vi[:,:,12])
plt.title('interpolated')
plt.subplot(122)
plt.pcolor(xi, yi, somefunc(xi[:,None], yi[None,:], zi[12]))
plt.title('exact')
plt.show() 
```

如果您的数据集分散且对于基于三角测量的方法来说太大，那么您需要切换到不同的方法。一些选项是一次处理少量最近邻居的插值方法（可以使用 kd-tree 快速检索此信息）。反向距离称重就是其中之一，但它可能是最糟糕的之一——可能有更好的选择（如果没有进一步的研究，我不知道）。

# ios - IOS 6 - 播放视频后状态栏不显示

> ID：12618981
> 
> 赞同：2
> 
> 时间：2012-09-27T10:11:28.890
> 
> 标签：ios, statusbar

我的应用程序中有一个`MPMoviePlayerViewController`，并且正在使用它来全屏播放视频。

这在 iPad 上的 IOS 5 操作系统上运行良好。

但是在 iPad 3 上的 iOS 6 上，播放视频后，状态栏会消失并被空白所取代。

`[[UIApplication sharedApplication]setStatusBarHidden:NO];` 有视频的地方用恢复状态栏是不是很马虎？

由于我的应用程序很大，任何人都可以提供替代方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:33:15.603

我向 MPMoviePlayerDidExitFullscreenNotification 添加了一个观察者。在这个观察者中，我创建了一个 NSTimer 以在两秒后触发。在 NSTimer 触发的消息中，我重置了状态栏样式以及状态栏。计时器是必需的，因为我注意到状态栏在退出全屏动画完成后很长时间进入不一致状态。

因此，在管理 MPMoviePlayer 的 ViewController 中，我执行以下操作：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerDidExitFullScreenCallback:) name:MPMoviePlayerDidExitFullscreenNotification object:self.moviePlayerController]; 
```

然后在通知选择器中：

```
- (void) moviePlayerDidExitFullScreenCallback:(NSNotification *)aNotification {

    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(setStatusBarVisible:) userInfo:nil repeats:NO];

} 
```

在 setStatusBarVisible 选择器中：

```
- (void) setStatusBarVisible: (NSTimer *)timer {
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque];
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T06:57:38.070

我也遇到过同样的问题，iOS 6 似乎有一些问题，使用 `MPMovieControlStyleEmbeded`它`FullScreen = YES` 时可能无法播放视频或两次调用播放器，这会产生一些帧定位问题。

我最终不得不将整个应用程序更改为`presentMoviePlayerViewControllerAnimated`从视图控制器中使用，这似乎是在这个新的 iOS 6 中播放视频的更合适的方式

[MPMoviePlayerController 全屏模式问题](https://stackoverflow.com/questions/5689107/mpmovieplayercontroller-fullscreen-mode-issue)

# eclipse-plugin - 如何在 Eclipse rcp 编辑器视图上添加 keydown/up 事件监听器？

> ID：12618984
> 
> 赞同：2
> 
> 时间：2012-09-27T10:11:37.177
> 
> 标签：eclipse-plugin, eclipse-rcp

所以我基本上需要从 Eclipse 编辑器视图中获取按键向上/向下事件。我用谷歌搜索了几个小时，但只从 shell 中找到了按键事件（[就像在这里一样](http://www.java2s.com/Tutorial/Java/0280__SWT/Geteventtype.htm)）。但是此方法在编辑器视图中/从编辑器视图中不起作用。那么也许有人知道如何在编辑器中添加按键事件监听器？

PS我正在使用eclipse 4.2。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:39:56.457

我找到了方法（感谢irc中的人）

```
// ITextEditor editor;
((StyledText)editor.getAdapter(org.eclipse.swt.widgets.Control.class)).addKeyListener(new KeyListener() {

    @Override
    public void keyReleased(KeyEvent e) {
        System.out.println("key released");
    }

    @Override
    public void keyPressed(KeyEvent e) {
        System.out.println("key pressed ");
    }
}); 
```

# asp.net - 伪造 MVC Server.Transfer：Response.End() 不会结束我的线程

> ID：12618996
> 
> 赞同：3
> 
> 时间：2012-09-27T10:12:05.273
> 
> 标签：asp.net, asp.net-mvc, server.transfer

我在这里有两个问题，如果第一个问题得到回答，第二个问题是无关紧要的，但我认为在技术上仍然很有趣......我会尽量清楚：

*   第一个问题：我的目标是在 MVC 中伪造一个 Server.Transfer，是否有任何下降的方法可以做到这一点，我发现了很多关于它的文章，但大多数都是关于重定向/重新路由的，这在我的情况下是不可能的（不是至少我能想到）。

这是上下文，我们有两个版本的网站，一个“桌面”版本和一个移动版本。我们的营销人员希望在同一个 url 上提供两个版本的主页（因为 SEO 专家是这么说的）。

这听起来微不足道和简单，在大多数情况下，除了...相同的应用程序）。

因为桌面版本代表了我们大约 95% 的流量，所以这应该是默认设置，并且我们希望仅当用户在移动设备上或确实需要时，才从后面的 ASPX 代码“传输”（因此相同的 url）到 MVC 视图看手机版。据我目前所见，没有简单的方法可以做到这一点（Server.Transfer 只执行一个新的处理程序 - 因此页面 - 如果有一个物理文件）。因此，到目前为止，有没有人以适当的方式做到这一点？

这让我想到：

*   第二个问题：我确实建立了自己的转移到 MVC 机制，但后来发现 Response.End() 实际上不再结束正在运行的线程，有人知道为什么吗？

显然，我不希望有任何答案出乎意料，所以这就是我正在做的事情：

在需要转移到移动设备的页面中，我执行以下操作：

```
protected override void OnPreInit(EventArgs e) {
  base.OnPreInit(e);
  MobileUri = "/auto/intro/index"; // the MVC url to transfer to
  //Identifies correct flow based on certain conditions 1-Desktop 2-Mobile
  BrowserCheck.RedirectToMobileIfRequired(MobileUri);
} 
```

而我由 RedirectToMobileIfRequired 调用的实际 TransferToMobile 方法（我跳过了检测部分，因为它非常不相关）看起来像：

```
/// <summary>
/// Does a transfer to the mobile (MVC) action. While keeping the same url.
/// </summary>
private static void TransferToMobile(string uri) {
  var cUrl = HttpContext.Current.Request.Url;

  // build an absolute url from relative uri passed as parameter
  string url = String.Format("{0}://{1}/{2}", cUrl.Scheme, cUrl.Authority, uri.TrimStart('/'));

  // fake a context for the mvc redirect (in order to read the routeData).
  var fakeContext = new HttpContextWrapper(new HttpContext(new HttpRequest("", url, ""), HttpContext.Current.Response));
  var routeData = RouteTable.Routes.GetRouteData(fakeContext);

  // get the proper controller
  IController ctrl = ControllerBuilder.Current.GetControllerFactory().CreateController(fakeContext.Request.RequestContext, (string)routeData.Values["controller"]);

  // We still need to set routeData in the request context, as execute does not seem to use the passed route data.
  HttpContext.Current.Request.RequestContext.RouteData.DataTokens["Area"] = routeData.DataTokens["Area"];
  HttpContext.Current.Request.RequestContext.RouteData.Values["controller"] = routeData.Values["controller"];
  HttpContext.Current.Request.RequestContext.RouteData.Values["action"] = routeData.Values["action"];

  // Execute the MVC controller action
  ctrl.Execute(new RequestContext(new HttpContextWrapper(HttpContext.Current), routeData));

  if (ctrl is IDisposable) {
    ((IDisposable)ctrl).Dispose(); // does not help
  }

  // end the request.
  HttpContext.Current.Response.End();
  // fakeContext.Response.End(); // does not add anything
  // HttpContext.Current.Response.Close(); // does not help
  // fakeContext.Response.Close(); // does not help
  // Thread.CurrentThread.Abort(); // causes infinite loading in FF
} 
```

在这一点上，我希望 Response.End() 调用也能结束线程（如果我跳过整个伪造控制器执行位，它会结束），但事实并非如此。

因此，我怀疑要么是我伪造的上下文（这是我发现能够使用新 url 传递当前上下文的唯一方法），要么是控制器阻止了线程被杀死。

fakeContext.Response 与 CurrentContext.Response 相同，并且结束虚假上下文响应或终止线程的几次尝试并没有真正帮助我。

在 Response.End() 之后运行的任何代码实际上都不会呈现给客户端（这是一个小小的胜利），因为正在关闭响应流（以及连接，客户端中没有“无限加载”）。但是代码仍在运行，这并不好（在尝试编写 ASPX 页面、编写标题等时，显然也会产生大量错误）。

因此，任何新的领导都将受到欢迎！

总结一下： - 有没有人有一种不那么老套的方法来实现在同一个 url 上共享 ASPX 页面和 MVC 视图？- 如果没有，有没有人知道我如何确保我的回复真的被结束了？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:48:27.800

好，

对于有兴趣的人，我至少可以回答问题 1 :)。当我第一次使用该功能时，我查看了以下（非常接近的）问题：

[如何在 ASP.NET MVC 中模拟 Server.Transfer？](https://stackoverflow.com/questions/799511/how-to-simulate-server-transfer-in-asp-net-mvc)

并尝试了 Stan 创建的 Transfer Method （使用*httpHandler.ProcessRequest*）和*Server.TransferRequest*方法。两者都对我不利：

*   第一个在 IIS 中不起作用，（因为我需要在页面中调用它，而这似乎已经太晚了）。
*   对于需要在 IIS 中运行网站的开发人员来说，第二个问题非常烦人（没什么大不了的，但仍然......）。

看到我的解决方案显然不是最佳的，我不得不回到 IIS 解决方案，这似乎是最适合生产环境的解决方案。

该解决方案适用于一个页面并在另一个页面上触发了无限循环......

就在那时我被指出了我懒惰地丢弃的原因：我们的 url 重定向模块。它使用 Request.RawUrl 来匹配一个规则，而且令人惊讶的是，**Server.TransferRequest 保留了原始的 Request.RawUrl，而 app.Request.Url.AbsolutePath 将包含转移到的 url。**所以基本上我们的 url 重写模块总是重定向到原来的请求，它试图转移到新的请求，等等。

在 url 重写模块中改变了这一点，并希望一切仍然像魅力一样工作（显然很多测试将跟随这样的改变）......

为了解决开发人员的问题，我选择将这两种解决方案结合起来，这可能会增加开发和生产之间不同行为的风险，但这就是我们有测试服务器的目的......

所以这是我的传输方法最后的样子：

**再一次，这意味着从 ASPX 页面转移到 MVC 操作，从 MVC 到 MVC，您可能不需要任何复杂的东西，因为您可以使用 TransferResult 或只是返回不同的视图、调用另一个操作等。**

```
private static void Transfer(string url) {
  if (HttpRuntime.UsingIntegratedPipeline) {
    // IIS 7 integrated pipeline, does not work in VS dev server.
    HttpContext.Current.Server.TransferRequest(url, true);
  }

  // for VS dev server, does not work in IIS
  var cUrl = HttpContext.Current.Request.Url;
  // Create URI builder
  var uriBuilder = new UriBuilder(cUrl.Scheme, cUrl.Host, cUrl.Port, HttpContext.Current.Request.ApplicationPath);
  // Add destination URI
  uriBuilder.Path += url;
  // Because UriBuilder escapes URI decode before passing as an argument
  string path = HttpContext.Current.Server.UrlDecode(uriBuilder.Uri.PathAndQuery);
  // Rewrite path
  HttpContext.Current.RewritePath(path, true);
  IHttpHandler httpHandler = new MvcHttpHandler();
  // Process request
  httpHandler.ProcessRequest(HttpContext.Current);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:16:21.260

我没有做太多研究，但似乎发生了以下事情`Response.End()`：

```
public void End()
{
    if (this._context.IsInCancellablePeriod)
    {
        InternalSecurityPermissions.ControlThread.Assert();
        Thread.CurrentThread.Abort(new HttpApplication.CancelModuleException(false));
    }
    else if (!this._flushing)
    {
        this.Flush();
        this._ended = true;
        if (this._context.ApplicationInstance != null)
        {
            this._context.ApplicationInstance.CompleteRequest();
        }
    }
} 
```

这至少可以提供“为什么”（`_context.IsInCancellablePeriod`）。您可以尝试使用您最喜欢的 CLR 反编译器来跟踪它。

# java - 电子邮件地址中的方括号字符

> ID：12618999
> 
> 赞同：0
> 
> 时间：2012-09-27T10:12:37.933
> 
> 标签：java, special-characters, jakarta-mail, email-address, square-bracket

当我们收到一个包含方括号的`MimeMessage`收件人时，我们会在调用时得到 ' ' 。`InternetAddresses``javax.mail.internet.AddressException: Local address contains illegal character in string``MimeMessage.getAllRecipients()`

下面的电子邮件地址是我们得到上述异常的一个例子：

`"ABC NAME-DEM-SAST1" <ABCNAME-DEM-SAST1[001-SAST1@domain.com]>`

上面的示例地址是实际有效的电子邮件地址吗？如果是，为什么不能从中创建 InternetAddress？

例如 InternetAddress add = new InternetAddress( `"\"ABC NAME-DEM-SAST1\" <ABCNAME-DEM-SAST1[001-SAST1@domain.com]>"`, false);

我查看[了邮件地址](https://stackoverflow.com/questions/4608554/javamail-problem-with-n-characters-in-mail-addresses?answertab=active#tab-top)问题中带有 ñ 字符的 Javamail 问题以寻求答案，但无济于事。

我正在使用 javamail 1.4 并且 JVM 在 Linux 主机系统上运行。

对此问题的任何见解将不胜感激！

问候，下午。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:52:31.163

[这种解释](http://www.cs.tut.fi/~jkorpela/rfc/822addr.html)表明“[”和“]”是电子邮件地址中的无效字符，除非用于绑定域文字（例如 [192.1.0.0]）。如果示例地址应显示名称和相应的地址，则正确的语法应为

```
"ABC NAME-DEM-SAST1" <001-SAST1@domain.com> 
```

Microsoft Office 使用方括号来标记一次性地址 ( [http://msdn.microsoft.com/en-us/library/cc842281.aspx](http://msdn.microsoft.com/en-us/library/cc842281.aspx) )，但这似乎是非标准化的，也与给定的不匹配例子。

[电子邮件地址 RFC](http://www.faqs.org/rfcs/rfc2822.html)。