# StackOverflow 问答 15612000-15612999

# solr - 带有空格和通配符的 solr 查询

> ID：15612001
> 
> 赞同：0
> 
> 时间：2013-03-25T09:54:27.323
> 
> 标签：solr

我有一个名为“allnames”的 solr 字段 - 类型字符串，其值类似于“JOHN SMITH”等等。

当我使用通配符编写此查询时

`q=allnames:JO*`

它工作正常，我得到了我想要的响应，JOHN SMITH、JONATHAN LENORD 等等

但如果我写

`q=allnames:JOHN S*`

我的结果为零。问题可能出在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:08:04.437

您需要转义 SOlr 查询中的特殊字符。

[这](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Escaping%20Special%20Characters)是Lucene对特殊字符的定义。

尝试搜索

```
q=allnames:JOHN\ S* 
```

注意空格前的反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-24T06:58:40.977

只需处理查询中的空间。用这个：

```
q=allnames:JOHN\ S* 
```

代替：

```
q=allnames:JOHN S* 
```

# git - 如何将新文件夹（包含其他文件夹和文件）推送到现有的 git repo？

> ID：15612003
> 
> 赞同：31
> 
> 时间：2013-03-25T09:54:45.857
> 
> 标签：git, directory, push

我使用`git clone sshurl`. 正如预期的那样，这在我的桌面上创建了一个文件夹。

现在，我想将整个文件夹推送到 git 中，而不是单个文件。例如，我克隆的文件夹名为`project_iphone`. `my_project`现在我添加另一个名为`project_iphone`. 该`my_project`文件夹还包含许多文件和文件夹。

我的问题是，我应该如何将`my_project`文件夹推送到服务器？

分步说明会很有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-25T10:01:54.457

您需要`git add my_project`暂存新文件夹。然后`git add my_project/*`上演它的内容。然后提交您使用的内容，最后使用（我假设您希望推送到主分支）`git commit`将您的更改推送回源。`git push origin master`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-12T16:39:31.480

您不能推送新的空文件夹。首先，您必须在新文件夹中创建至少一个新文件，然后您可以添加、提交和推送它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-07T07:08:24.867

您可以直接进入 Web IDE 并在那里上传您的文件夹。

脚步：

1.  转到 Web IDE（主要位于克隆选项下方）。
2.  在您的路径中创建新目录
3.  上传您的文件和文件夹

在某些情况下，您可能无法直接上传包含文件夹的整个文件夹，在这种情况下，您必须自己创建目录结构。

# javascript - 如何在 ios 浏览器中使我的所有 onclick 事件可点击？

> ID：15612004
> 
> 赞同：2
> 
> 时间：2013-03-25T09:54:51.910
> 
> 标签：javascript, html, jquery-mobile

我正在使用 HTML5/JqueryMobile 创建网页。我知道 onclick 功能在 ios 设备浏览器上不起作用。如何更改所有可点击的 onclick 事件？以便我可以点击 ios 设备浏览器。

这仅适用于我创建的 uniqueID。

```
 $("#Button").tap(function(e) {
    e.preventDefault();
    alert("test");
}); 
```

我希望所有 onclick 事件都被点击。知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:15:08.130

下面的代码将捕获`tap`您的所有事件`document`。

```
$(document).on('tap', function () {
 $('<p>tap</p>').appendTo('#content'); // example
}); 
```

这适用于 iOS 浏览器以及桌面浏览器（已*测试*）。

```
<div data-role="page" id="page">
 <div data-role="header">
  <h1>Header</h1>
 </div>
 <div data-role="content" id="content">Tap events</div>
  <div data-role="footer">
  <h4>Footer</h4>
 </div>
</div> 
```

# visual-c++ - 在 32 位和 64 位应用程序中使用 GDi 绘图

> ID：15612010
> 
> 赞同：1
> 
> 时间：2013-03-25T09:54:57.190
> 
> 标签：visual-c++, mfc, gdi+, gdi

可以将 COM 32 位进程外服务器用于 GDI 在 64 位进程上绘图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:01:00.400

是的，它可以。对于 GDI 对象句柄和窗口句柄，保证只有低 32 位将用于 64 位模式，因此在 32 位和 64 位之间传递它们应该是安全的。当然，COM 服务器*必须*处于进程之外。

[从这个页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384231%28v=vs.85%29.aspx)引用

> 在 64 位 Windows 上，进程外 32 位 COM 服务器可以与 64 位客户端通信，进程外 64 位 COM 服务器可以与 32 位客户端通信。因此，如果您有一个不支持 COM 的 32 位 DLL，您可以将其包装在进程外 COM 服务器中，并使用 COM 编组对 64 位进程的调用。

同样，从[这个页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384203%28v=vs.85%29.aspx)

> 64 位版本的 Windows 使用 32 位句柄来实现互操作性。在 32 位和 64 位应用程序之间共享句柄时，只有低 32 位有效，因此截断句柄（将其从 64 位传递到 32 位时）或对句柄进行符号扩展（将其从 32 位传递到 64 位时）。可以共享的句柄包括用户对象（如窗口 (HWND)）的句柄、GDI 对象（如钢笔和画笔（HBRUSH 和 HPEN））的句柄，以及命名对象（如互斥体、信号量和文件句柄）的句柄。

# css - CSS文本背景颜色被切断

> ID：15612014
> 
> 赞同：1
> 
> 时间：2013-03-25T09:55:08.393
> 
> 标签：css, text, background-color

首先，这是指导方针以及我想要实现的目标：

![在此处输入图像描述](../Images/490151065bbcd7e7d2187b30577f1596.png)

它不需要看起来 100% 相似，但应该在每个 EndOfLine 处至少留一个空格。好吧，当我尝试这样做时会发生这种情况：

![在此处输入图像描述](../Images/9311f36feef944ee665ed7a0bc682030.png)

如您所见，第一行的结尾和第二行的开头与边框没有空间。另一方面，第一行的开头和第二行的结尾确实有一个空格。

这是我的 HTML 和 CSS 标记。

```
<div class="headline-h2">
<h2>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod    tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.</h2>
</div>

h2 {
background-color: #000000;
clear: left;
color: #FFFFFF;
display: inline;
float: left;
font-size: 14px;
font-weight: normal;
padding: 4px;
position: relative;
}

.headline-h2 {
float: left;
margin-bottom: 28px !important;
width: 100%;
} 
```

我已经尝试了一些事情，但我无法终生解决这个问题。我还必须补充一点，文本是可变的，因此如果客户想要它，它可能会完全不同。还需要说的是，我们明确需要它作为内联元素。我知道它适用于块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:01:02.217

为什么不只是添加`padding`到您的`h2`：

```
h2 {
    background-color: #000000;
    clear: left;
    color: #FFFFFF;
    display: inline-block;
    float: left;
    font-size: 14px;
    font-weight: normal;
    position: relative;
    padding-left: 5px;
    padding-right: 5px; 
} 
```

# c# - 有没有什么情况下finally块没有被执行？

> ID：15612022
> 
> 赞同：2
> 
> 时间：2013-03-25T09:55:49.237
> 
> 标签：c#

请注意此代码：

```
 class CTestFinally
  {
      public static void Run()
      {
          try
          {
              TryAndTry();
          }
          catch (Exception exError)
          {
              Console.WriteLine(exError.Message);
          }
          finally
          {
              Console.WriteLine("Finally...!");
          }
          Console.ReadKey();
      }

      static void TryAndTry()
      {
          try
          {
              TryAndTry();
          }
          catch (Exception exError)
          {
              Console.WriteLine(exError.Message);
          }
          finally
          {
              Console.WriteLine("Try: Finally...!");
          }
          }
}
      } 
```

最后从未执行，因为我们得到堆栈溢出错误。

除了上述问题之外，是否有任何情况下finally块不被执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:57:46.733

`StackOverflowException`是 CLR 主机通常会特别处理的少数几种异常之一。例如，ASP.NET 将终止工作进程。这*很难*调试，因为您的应用程序就这样消失了。我确信 SQL Server 有类似的策略（比如卸载 appdomain）。

原因是这是一个不稳定的条件，不允许可靠的错误恢复（毕竟您的堆栈不可用！例如，您可以不调用您的记录器或发送电子邮件。堆栈上没有空间。）。

另一种是OutOfMemoryException（你甚至不能分配一个异常——这就是CLR预分配一个OOM实例的原因......）。我认为 ASP.NET 可以容忍这种情况，而 SQL Server 会杀死您的 appdomain。

对于正常的例外情况，这可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:00:36.547

这将永远不会执行`finally`：

```
using System;

namespace Demo
{
    public static class Program
    {
        [STAThread]
        public static void Main(string[] args)
        {
            try
            {
                Console.WriteLine("In try");
                Environment.FailFast("Aaaaaargh");
            }

            finally
            {
                Console.WriteLine("In finally");
            }
        }
    }
} 
```

# jquery - jQuery如何选择儿童第一级div

> ID：15612026
> 
> 赞同：1
> 
> 时间：2013-03-25T09:55:56.977
> 
> 标签：jquery, css, target

我在定位一些没有类的 div 时遇到了一点问题，这些 div 位于表结构中：

```
<table class="blog" cellspacing="0" cellpadding="0">
  <tbody>
    <tr>
      <td valign="top">
        <div>               <--- I want to target this
          <table class="some_table_class">
            <tbody>
              <tr>
                <td class="someclass" valign="top">
                   <div>This div should stay untouched, and every of his potential div children</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div></div>      <--- I want to target this
        <div></div>      <--- I want to target this
        <div></div>      <--- I want to target this
         .
         .
         .
      </td>
    </tr>
  </tbody>
</table> 
```

我试图在 CSS 中做到这一点，`.blog td[valign="top"]>div`但这个也影响了第二个 div + 似乎 IE 不明白 [valign="top"] 是什么

所以我想用jQuery为那些div添加一些类

有什么有效的方法可以做到这一点吗？

`.blog>tbody>tr>td>div`......我觉得有点奇怪而且用起来很长

谢谢你的任何想法

我忘了..*我只能用 jquery 编辑 html 结构，我无权访问 .php / .html 文件*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:59:18.817

尝试这个

```
 $('td[valign="top"]').find("div") // this will find all the divs 
```

**更新**

要么你用类选择器命名所有的 div，然后用类选择器来获取它。

否则你可以用它`not()`来排除它..但需要给出一个应该被排除的 id 或类......

**HTML**

```
<div id="notthis">This div should stay untouched, and every 
```

**jQuery**

```
$('td[valign="top"]').find("div:not('#notthis')").addClass('test'); 
```

[小提琴](http://jsfiddle.net/bipen/Myykv/)中的简单示例

**评论后更新**

```
$('td[valign="top"]').find("div:not('.someclass div')").addClass('test') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:58:40.140

在我看来，你应该更多地依赖你自己设置的类，而不是 html 属性。

如果您确定自己的标记，请尝试`$('table.blog>tbody>tr>td>div')`. 但是，如果我是你，我会在更靠近目标项目的地方添加一个类，以便编写一个更简单的选择器.. 这样可以更灵活地维护。

# android - 泄露的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView{41df1e28 VE.... R.....ID 0,0-60,60} 最初添加在这里

> ID：15612035
> 
> 赞同：1
> 
> 时间：2013-03-25T09:56:36.400
> 
> 标签：android

我正在使用以下代码来显示我的 webview。我在我的 onCreate() 中使用了这个

```
import java.io.IOException;
import java.net.URL;
import java.util.Calendar;

import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.myrestaurant.utils.MyProgressDialog;

import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.app.Activity;
import android.app.AlarmManager;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.graphics.Bitmap;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class BeapSoundActivity extends Activity implements OnClickListener{

    WebView wvLink;
    MyProgressDialog pgrDialog;
    AlertDialog alertDialog;
//  Button btnStop;
    static TextView pending_number;
     MediaPlayer mMediaPlayer;
     int pending;
     PendingIntent pendingIntent ;

     static {

//         StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

           StrictMode.setThreadPolicy( new StrictMode.ThreadPolicy.Builder().permitAll().build());
       }

     MyProgressDialog dialog;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.beap_sound);
        pending_number=(TextView)findViewById(R.id.order_num);

           Log.e("tvvvv",""+BeapSoundActivity. pending_number);
//      btnStop=(Button)findViewById(R.id.stop);
        wvLink=(WebView)findViewById(R.id.webview1);
//      btnStop.setOnClickListener(this);

//       mMediaPlayer = new MediaPlayer();
           TelephonyManager manager = (TelephonyManager)this.getSystemService(Context.TELEPHONY_SERVICE);
            if(manager.getPhoneType() == TelephonyManager.PHONE_TYPE_NONE){
//              return "Tablet";
            }else{
//              return "Mobile";
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            } 
//       doInBack dob=new doInBack();
//         

         Intent svc=new Intent(BeapSoundActivity.this, BackgroundService.class);
           pendingIntent = PendingIntent.getService(BeapSoundActivity.this, 0, svc, 0);

           AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

           Calendar calendar = Calendar.getInstance();
           calendar.setTimeInMillis(System.currentTimeMillis());
           calendar.add(Calendar.SECOND, 2);
           alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 10*1000, pendingIntent);

//          startService(svc);

           if(pgrDialog!=null){
            pgrDialog.dismiss();
        }
        pgrDialog=MyProgressDialog.show(BeapSoundActivity.this, null,null);
        alertDialog = new AlertDialog.Builder(this).create();

        wvLink.setWebViewClient(new myWebClient());
        wvLink.getSettings().setJavaScriptEnabled(true);
        wvLink.loadUrl(" http://mybusinessapp2.testshell.net");
//          pgrDialog.dismiss();
        Log.e("pend",""+pending);

    }

    public void setPendings(){

    }

//end of doBack 

    public class myWebClient extends WebViewClient
    {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub
            super.onPageStarted(view, url, favicon);

        }

         public void onPageFinished(WebView view, String url) {
//                Log.i(TAG, "Finished loading URL: " +url);

                if (pgrDialog.isShowing()) {
                    pgrDialog.dismiss();
                }
            }

         public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
//                Log.e(TAG, "Error: " + description);
                Toast.makeText(BeapSoundActivity.this, "Oh no! " + description, Toast.LENGTH_SHORT).show();
                alertDialog.setTitle("Error");
                alertDialog.setMessage(description);
                alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        return;
                    }
                });
                alertDialog.show();
            }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // TODO Auto-generated method stub

            view.loadUrl(url);
            return true;

        }
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
//      if(v.equals(btnStop)){
//          mMediaPlayer.stop();
//      }
    }
}

  Here is Logcat output:

    03-25 15:18:30.984: E/WindowManager(4133): Activity com.myrestaurant.activities.BeapSoundActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{41ded2d8 V.E..... R.....ID 0,0-60,60} that was originally added here
    03-25 15:18:30.984: E/WindowManager(4133): android.view.WindowLeaked: Activity com.myrestaurant.activities.BeapSoundActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{41ded2d8 V.E..... R.....ID 0,0-60,60} that was originally added here
    03-25 15:18:30.984: E/WindowManager(4133):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.app.Dialog.show(Dialog.java:281)
    03-25 15:18:30.984: E/WindowManager(4133):  at com.myrestaurant.utils.MyProgressDialog.show(MyProgressDialog.java:45)
    03-25 15:18:30.984: E/WindowManager(4133):  at com.myrestaurant.utils.MyProgressDialog.show(MyProgressDialog.java:27)
    03-25 15:18:30.984: E/WindowManager(4133):  at com.myrestaurant.utils.MyProgressDialog.show(MyProgressDialog.java:22)
    03-25 15:18:30.984: E/WindowManager(4133):  at com.myrestaurant.activities.BeapSoundActivity.onCreate(BeapSoundActivity.java:96)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.app.Activity.performCreate(Activity.java:5104)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.os.Handler.dispatchMessage(Handler.java:99)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.os.Looper.loop(Looper.java:137)
    03-25 15:18:30.984: E/WindowManager(4133):  at android.app.ActivityThread.main(ActivityThread.java:5039)
    03-25 15:18:30.984: E/WindowManager(4133):  at java.lang.reflect.Method.invokeNative(Native Method)
    03-25 15:18:30.984: E/WindowManager(4133):  at java.lang.reflect.Method.invoke(Method.java:511)
    03-25 15:18:30.984: E/WindowManager(4133):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-25 15:18:30.984: E/WindowManager(4133):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-25 15:18:30.984: E/WindowManager(4133):  at dalvik.system.NativeStart.main(Native Method)
    03-25 15:18:31.016: E/tvvvv(4133): android.widget.TextView{41d5be50 V.ED.... ......ID 0,0-0,0 #7f080006 app:id/order_num} 
```

当我在 Google Nexus（7 英寸平板电脑）中运行此程序时，我没有收到任何错误，但在 Nexus 手机中我收到了错误消息。有人可以帮我解决这个问题吗？

# asp.net - Web 服务调用 (asmx) 重定向到 default.aspx

> ID：15612036
> 
> 赞同：2
> 
> 时间：2013-03-25T09:56:37.733
> 
> 标签：asp.net, web-services, iis

环境：Windows Server 2012、IIS8、.Net 4 Web 应用程序。当我像这样调用 Web 服务（AJAX 调用）时：http: [//site.com/srv.asmx/getSomething](http://site.com/srv.asmx/getSomething) 我的请求被重定向（302）到[http://site.com/srv.asmx/getSomething/Default。 aspx](http://site.com/srv.asmx/getSomething/Default.aspx) 而不是调用 getSomething 方法。

有没有人见过这个？就好像 IIS（或框架？）不明白这是对 *.asmx 的请求，只是附加了默认文档。

我收到的确切错误消息：

[http://site.com/filenotfound.htm?aspxerrorpath=/srv.asmx/getSomething/default.aspx](http://site.com/filenotfound.htm?aspxerrorpath=/srv.asmx/getSomething/default.aspx) 错误 404：找不到文件或页面

谢谢！

---更新---我自己找到了解决方案

**- - 解决方案 - -**

此行为是由无扩展 URL 处理程序引起的。这篇知识库文章对我帮助很大：http: [//support.microsoft.com/kb/2520479](http://support.microsoft.com/kb/2520479)

我还没有尝试安装补丁（也许这是最简单的解决方案）。我刚刚重新安排了处理程序。

对于受影响的站点 applicationHost.config（位于 C:\Windows\System32\inetsrv\config 下）具有以下内容：

```
<location path="site.com">
    <system.webServer>
        <handlers>
            <clear />
            <add name="ExtensionlessUrl-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
            <add name="TraceHandler-Integrated-4.0" path="trace.axd" verb="GET,HEAD,POST,DEBUG" type="System.Web.Handlers.TraceHandler" preCondition="integratedMode,runtimeVersionv4.0" />
            <add name="WebAdminHandler-Integrated-4.0" path="WebAdmin.axd" verb="GET,DEBUG" type="System.Web.Handlers.WebAdminHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

--- 跳过 ---

如您所见 - ExtensionlessUrl 处理程序（其中之一）列在顶部。这意味着它是第一个有机会处理请求的人。所以它愉快地使用了我的“无扩展”网络服务调用。

*.asmx 处理程序也在下面，但它没有机会被调用。

因此，为了解决这个问题，我将无扩展 URL 处理程序移到了底部的第二个位置（就在静态文件处理程序的前面）：

```
 <system.webServer>
        <handlers>
            <clear />
            <add name="TraceHandler-Integrated-4.0" path="trace.axd" verb="GET,HEAD,POST,DEBUG" type="System.Web.Handlers.TraceHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

--- 跳过 ---

这已经为我解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:03:34.783

这可能是您使用`FormAuthentication`并尝试在未登录的情况下访问服务的原因。
您可以在这种情况下使用位置路径

```
 <location path="srv.asmx">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T16:30:48.477

我有一个类似的问题，[https://ws.qa.llsettlement.com/StandardNotificationReceiver/StandardNotificationReceiver.svc](https://ws.qa.llsettlement.com/StandardNotificationReceiver/StandardNotificationReceiver.svc)。在我的情况下，我开发的服务器没有重定向到 HTTPS，但问题服务器是。所以我最初需要通过 HTTPS 发送请求。这是通过将 customBinding 设置为 use 来实现的`<httpsTransport />`，然后我可以通过 HTTP 将 URL 转换为 HTTPS。

# openerp - 从 openerp 中的 startdate 和 duration 获取结束日期的函数

> ID：15612037
> 
> 赞同：0
> 
> 时间：2013-03-25T09:56:44.650
> 
> 标签：openerp

这是第一个代码
类 timetable_timetable(osv.osv):
      _name='timetable.timetable'
      _columns={
           'name': fields.char('Name',size="64",required=True),
           'course': fields.many2one（'college.course'，'Course'），
           'semester'：fields.many2one（'course.semester'，'Semester'），
           'subject'：fields.one2many（'timetable.subjects'，'timetable_id ','主题')
}
timetable_timetable()

这是第二个代码
类 timetable_subjects(osv.osv):
    _name = 'timetable.subjects'
    _columns ={
           'timetable_id' : fields.many2one('timetable.timetable','Time Table'),
           'subject_id': fields.many2one ('semester.subject','Subject'),
           'start_date': fields.datetime('Start Date',store=True),
           'duration' : fields.float('Duration',size=64,required=True) ,
           'end_date' : fields.datetime('End Date',store=True),
           'professor' : fields.many2one('professor.professor','Professor')
           }
timetable_subjects()

我想创建一个函数 on_change，它从 start_date 和持续时间返回 end_date。那么我该如何实现该功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:22:04.593

**在end_date**`onchange`的方法中编写此代码，

 **```
from datetime import datetime
from dateutil.relativedelta import relativedelta

def my_onchange(self, cr, uid, ids, s_date, duration):
    return {'value': {'end_date': (datetime.strptime(s_date,'%Y-%m-%d %H:%M:%S') + relativedelta(days=duration)).strftime('%Y-%m-%d %H:%M:%S')}} 
```

如果您的持续时间是几个月或几年，请写`relativedelta(months=duration)`几个月和`relativedelta(years=duration)`几年，同样的方式是**几小时或几分钟或几秒钟**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:33:31.633

def on_change(self, cr, uid, ids, t_date, duration):

```
 res = {'end_date': False}
    if t_date:
        now = datetime.strptime(t_date, '%Y-%m-%d %H:%M:%S')

        e_date = now + timedelta(hours=duration)
        print e_date
        f_date = datetime.strftime(e_date, '%Y-%m-%d %H:%M:%S')
        res['end_date'] = f_date
    return {'value': res} 
```**

# c# - 在pdf c#中的另一个图像上添加图像水印

> ID：15612044
> 
> 赞同：4
> 
> 时间：2013-03-25T09:57:01.117
> 
> 标签：c#, itextsharp

全部，

我正在尝试使用 itextsharp 在 pdf 中添加图像水印。水印按预期出现在所有页面上，但已经有图像。我希望我的水印图像出现在 pdf 的现有图像之上。我正在使用以下代码添加图像

```
 using (Stream output = new FileStream(outputFile, FileMode.Create, FileAccess.Write, FileShare.None))
        {
            using (PdfStamper pdfStamper = new PdfStamper(pdfReader, output))
            {
                for (int pageIndex = 1; pageIndex <= pdfReader.NumberOfPages; pageIndex++)
                {
                    pdfStamper.FormFlattening = false;
                    iTextSharp.text.Rectangle pageRectangle = pdfReader.GetPageSizeWithRotation(pageIndex);
                    PdfContentByte pdfData = pdfStamper.GetUnderContent(pageIndex);
                    pdfData.SetFontAndSize(BaseFont.CreateFont(BaseFont.HELVETICA_BOLD, BaseFont.CP1252, BaseFont.NOT_EMBEDDED), 10);
                    PdfGState graphicsState = new PdfGState();
                    graphicsState.FillOpacity = 0.4F;
                    pdfData.SetGState(graphicsState);
                    pdfData.BeginText();

                    iTextSharp.text.Image jpeg = iTextSharp.text.Image.GetInstance(wtrmrkimg, BaseColor.GREEN);
                    float width = pageRectangle.Width;
                    float height = pageRectangle.Height;
                    jpeg.ScaleToFit(width, height);
                    jpeg.SetAbsolutePosition(width / 2 - jpeg.Width / 2, height / 2 - jpeg.Height / 2);
                    jpeg.SetAbsolutePosition(50, 50);
                    jpeg.Rotation = 45;                       

                    pdfData.AddImage(jpeg);

                    pdfData.EndText();
                }
                pdfStamper.Close();
            }
            output.Close();
            output.Dispose();
        } 
```

我还附上了当前代码的输出： ![这是有问题的图像](../Images/a821097509d7d1a8f06620d4c126e5ae.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T13:03:46.380

我刚刚通过更换让它工作

```
PdfContentByte pdfData = pdfStamper.GetUnderContent(pageIndex); 
```

和

```
PdfContentByte pdfData = pdfStamper.GetOverContent(pageIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T16:54:49.860

代替

```
jpeg.SetAbsolutePosition(width / 2 - jpeg.Width / 2, height / 2 - jpeg.Height / 2); 
```

和

```
jpeg.SetAbsolutePosition(width / 2 - jpeg.ScaledWidth / 2, height / 2 - jpeg.ScaledHeight / 2); 
```

并删除

```
jpeg.SetAbsolutePosition(50, 50); 
```

使水印居中

# objective-c - 可可/目标c：如何知道光标下的控件是哪个？

> ID：15612050
> 
> 赞同：2
> 
> 时间：2013-03-25T09:57:25.780
> 
> 标签：objective-c, cocoa

我正在制作一个应用程序，它将检测全局鼠标事件并记录执行的操作。

例如：如果我单击 finder（或任何其他应用程序，如 firefox、safari 等）上的关闭/最小化按钮，则应用程序应该能够检测到这一点。直到现在我可以在单击时在光标下找到窗口名称。所以我可以捕捉鼠标点击事件。但我无法找到如何准确检测在该窗口上单击了哪个按钮/控件。

我`NSEvent addGlobalMonitorForEventsMatchingMask:(NSLeftMouseDownMask| NSRightMouseDownMask ) handler:^(NSEvent *event){ }`用于捕获鼠标事件。

那么有没有办法让我知道点击了哪个按钮/控件？或者，如果在查找器上单击文件夹图标，那么有没有办法知道所选文件夹的名称。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:12:06.077

这很简单。检查 dev.apple.com mac 库中的 UIElementInspector 示例。以下是链接：

[https://developer.apple.com/library/mac/#samplecode/UIElementInspector/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/UIElementInspector/Introduction/Intro.html)

# ruby - 用 888 匹配所有文件名的正则表达式，除了那些包含 888/444、888/447 或 888/405 的文件名？

> ID：15612053
> 
> 赞同：3
> 
> 时间：2013-03-25T09:57:29.323
> 
> 标签：ruby, regex

我们无法创建正则表达式来匹配所有包含 888 的文件名，但包含 888/444、888/447 或 888/405 的文件名除外。

我们尝试使用字符类并否定它们，但它们似乎不起作用。建议？

这是我们尝试过的：`/888.[^(444)|(447)|(405)]/`

我们使用的是 Ruby 1.9.3。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:07:32.437

建议：

```
%r"888(?!/444|/447|/405)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T10:06:59.883

使用负前瞻：

```
888.(?!(444)|(447)|(405)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T10:07:12.747

```
[^a-z] 
```

匹配不在范围内的字符`a-z`。在您的尝试中，您已经在角色类中放置了一个交替组，但它根本不像那样工作。相反，您需要使用否定的环视断言（假设 Ruby 支持这些）：

```
/^888(?!(44[47]|405)).*$/ 
```

要打破这一点：

```
^           # Anchor to start of string
888         # Match 888
(?!         # Negative lookahead
  (         # Alternation group
    44[47]  # Match 444 or 447
    |       # ...or...
    405     # 405
  )
)
.*          # Match any number of any characters
$           # Anchor to end of string 
```

请注意，根据您的要求，“匹配任意数量的任意字符”部分将受到否定前瞻的限制，因此 444、447 和 405 将*不*匹配。

因此，这将匹配`888123`, `888 foo bar`，但不允许`888444`or`888447`等​​。

* * *

**编辑**要匹配出现在字符串中任何位置的要求：

```
/888(?!.*4(4[47]|05)).*/ 
```

即，匹配任何 888 后跟任何内容（包括任何内容），但 444、447 或 405 除外。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T10:32:03.690

我要去：

```
/^(?!.*888\/(444|447|405)).*888.*/ 
```

我不相信有更简单的方法可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:10:11.210

如果你有一些非常具体的东西，比如你现在拥有的东西，为什么不匹配逆向然后过滤掉匹配的项目呢？

像这样：

```
/(888\/444)|(888\/447)|(888\/405)/ 
```

匹配那些你不想要的，使用它并相应地消除。

# database - 业务逻辑设计

> ID：15612057
> 
> 赞同：0
> 
> 时间：2013-03-25T09:57:38.200
> 
> 标签：database, design-patterns

我正在使用 asp.net 和 sql server 开发一个网站，我正在使用 EF 和代码优先方法作为数据访问层，而业务逻辑层（BLL）我为每个实体开发了一个类，其中包含以下功能查询该实体的数据库和返回对象，我的问题是关于我可以在哪里实现从不同表返回数据的函数，而不仅仅是从 BLL 中的一个表返回数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:54:33.613

DAO 层应该从底层数据存储创建模型对象。在某些情况下，要创建特定模型，必须查询不同的表。在这种情况下，将与多个表（而不是服务）交互的是 DAO。

BLL 可能会在同一个服务中处理不同的模型。但是，对于一种模型，它应该依赖于一个 DAO。

换句话说，DAO 被映射到模型类而不是底层表。

# java - 如何从时区字符串创建 DateTimeZone 对象？

> ID：15612059
> 
> 赞同：0
> 
> 时间：2013-03-25T09:57:40.107
> 
> 标签：java, datetime, timezone, jodatime

有没有办法从时区字符串表示创建（joda）DateTimeZone 对象，如“EDT”或“+0330”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-11T08:00:05.540

或许值得指出的是，虽然 jodatime 不支持三字母时区标识符（“UTC”除外），`java.util.TimeZone`但它支持；您可以使用以下[方法](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html#forTimeZone-java.util.TimeZone-)从 a创建一个`DateTimeZone`实例：`TimeZone`[`DateTimeZone.forTimeZone`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html#forTimeZone-java.util.TimeZone-)

```
DateTimeZone.forTimeZone(TimeZone.getTimeZone("...")) 
```

**但** `TimeZone`也不支持“EDT”。来自 Javadoc：

> 为了与 JDK 1.1.x 兼容，还支持一些其他的三字母时区 ID（例如“PST”、“CTT”、“AST”）。但是，它们的使用已被弃用...

请注意“一些”：在撰写本文时，PDT 未列在`TimeZone.getAvailableIDs()`（至少在 ideone.com 上）。如果您尝试在此处使用“PDT”，您将[得到 GMT 时区](http://docs.oracle.com/javase/8/docs/api/java/util/TimeZone.html#getTimeZone-java.lang.String-)：

> [`TimeZone.getTimeZone`返回] 指定的时区，如果无法理解给定的 ID，则返回 GMT 时区。

所以最好避免这种方法，除非你能保证你只会尝试将它用于支持的时区标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:04:42.093

Joda API 不支持缩写时区名称（如“EDT”）的映射。

为什么？

因为他们是模棱两可的！例如，EDT 可以表示 UTC-4 或 UTC+11。

因此，如果您想实现映射，您需要决定如何*映射*名称，然后自己创建和填充映射。

来源： [http ://www.timeanddate.com/library/abbreviations/timezones/](http://www.timeanddate.com/library/abbreviations/timezones/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:29:37.580

您可以使用此代码获取 DateTimeZone 对象 -

```
//User Defined
        DateTimeZone dtz = DateTimeZone.forID("America/New_York");
        //System Default TimeZone
        DateTimeZone dtzz = DateTimeZone.forID(TimeZone.getDefault().getID()); 
```

# sql - 选择不同的日期和计数

> ID：15612060
> 
> 赞同：2
> 
> 时间：2013-03-25T09:57:43.013
> 
> 标签：sql, sql-server-2008

我的示例表结构是：

```
TestDate
----------------------
2013-03-25 14:26:40.830
2013-03-20 13:37:39.763
2012-09-10 14:55:55.667
2013-03-20 13:33:20.480 
```

我的查询是：

```
SELECT DISTINCT 
    REPLACE(RIGHT(CONVERT(VARCHAR(20), TestDate, 106), 8), ' ', '-') AS  TT
    ,(SELECT COUNT(*) 
      FROM Test bp 
      WHERE 
        CONVERT(VARCHAR(20), p.TestDate, 6) = CONVERT(VARCHAR(20), bp.TestDate, 6)) AS Posts 
 FROM Test p 
```

我得到了一个结果：

```
TT         Posts
Mar-2013    1
Mar-2013    2
Sep-2012    1 
```

但我想要一个结果：

```
TT         Posts
Mar-2013    3
Sep-2012    1 
```

但我无法在我的查询中找到我的错误。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:07:25.653

您是否尝试选择每个月的行和计数？

如果是这样 - 尝试这样的事情：

```
SELECT  
   YEAR(Testdate), MONTH(Testdate),
   COUNT(*) totalPost
FROM    
   tableName
GROUP BY
   YEAR(Testdate), MONTH(Testdate) 
```

**更新：**如果您**坚持**在 SQL Server 内部进行格式化（我认为这样做是错误的地方......） - 然后使用这样的东西：

```
SELECT DISTINCT
   SUBSTRING(DATENAME(MONTH, TestDate), 1, 3) + '-' + CAST(YEAR(TestDate) AS VARCHAR(4)),
   YEAR(Testdate), MONTH(Testdate),
   TotalPosts = COUNT(*) 
FROM    
   tableName
GROUP BY
   SUBSTRING(DATENAME(MONTH, TestDate), 1, 3) + '-' + CAST(YEAR(TestDate) AS VARCHAR(4)),
   YEAR(Testdate), MONTH(Testdate)
ORDER BY
   YEAR(Testdate), MONTH(Testdate) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T09:59:23.237

你需要先`DATETIME`投入`DATE`。

```
SELECT  CAST(TestDate AS DATE) DATE_ONLY,
        COUNT(*) totalPost
FROM    tableName
GROUP   BY  CAST(TestDate AS DATE) 
```

# ios - 在uiscrollview中点击后如何旋转图像？

> ID：15612062
> 
> 赞同：0
> 
> 时间：2013-03-25T09:57:48.093
> 
> 标签：ios, uiscrollview, rotation, xcode4.5

```
- (void)configureView

{
  lblwelcome.text=@"Welcome To Gallery World";
    for (UIImageView *subview in self.view.subviews) {
        [subview removeFromSuperview];
    }

    UIBarButtonItem *addAcc = [[UIBarButtonItem alloc]
                               initWithTitle:@"Zoom"
                               style:UIBarButtonItemStylePlain
                               target:self
                               action:@selector(zoomEnabled)];

    UIBarButtonItem *delAcc = [[UIBarButtonItem alloc]
                               initWithTitle:@"Rotate"
                               style:UIBarButtonItemStylePlain
                               target:self
                               action:@selector(rotateEnabled)];

    NSArray *arrBtns = [[NSArray alloc]initWithObjects:addAcc,delAcc, nil];
    self.navigationItem.rightBarButtonItems = arrBtns;

    categoryScrollX=30;
    categoryScrollY=30;

    [scr.delegate self];
    scr.frame = self.view.frame;
    for (UIImageView *subview in scr.subviews) {
        [subview removeFromSuperview];
    }
    height = 200;
    width = 400;
    pos_y =0;
    pos_x =0;
    int idx=0;
    CGFloat x=0;
    switch (_itemNo) {
        case 0:
            for(int i=1;i<6;i++)
            {//imageView.frame = CGRectMake(categoryScrollX, categoryScrollY, (self.view.frame.size.width/4)-25, self.view.frame.size.width/4-5);
                UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(categoryScrollX, categoryScrollY, (self.view.frame.size.width/4)-25, self.view.frame.size.width/4-5)];
                [image setImage:[UIImage imageNamed:[NSString stringWithFormat:@"e1%d.png",i]]];
                [scr addSubview:image];
                x+=320;
                UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
                tapGesture.numberOfTapsRequired = 1;
                tapGesture.delegate = self;
                image.userInteractionEnabled = YES;
                [image addGestureRecognizer:tapGesture];
//                [image.layer setBorderColor: [[UIColor yellowColor] CGColor]];
//                [image.layer setBorderWidth: 0.9];
//                image.layer.MasksToBounds = false;
//                image.layer.ShadowColor = [[UIColor alloc] initWithRed:0 green:0 blue:0 alpha:0.5].CGColor;
//                image.layer.ShadowOpacity = 1.0f;
//                image.layer.ShadowOffset = CGSizeMake(0, 2.5f);
//                image.clipsToBounds = NO;

                CALayer* layer = [image layer];
                [layer setBorderWidth:2.0f];
                [image setContentMode:UIViewContentModeScaleAspectFit];
                [layer setBorderColor:[UIColor whiteColor].CGColor];

                scr.minimumZoomScale = scr.frame.size.width / imgview.frame.size.width;
                scr.maximumZoomScale = 2.0;
                [scr setZoomScale:scr.minimumZoomScale];
                scrollPosition++;
                currentIndex++;
                if(scrollPosition>4)
                {
                    categoryScrollY = categoryScrollY+self.view.frame.size.width/4+12;
                    scrollPosition=0;
                    currentIndex = currentIndex+scrollPosition;
                    categoryScrollX=30;
                }
                else
                {
                    categoryScrollX= (categoryScrollX+self.view.frame.size.width/4)-6;
                }

            }

            scr.pagingEnabled=YES;
            scr.contentSize = CGSizeMake(320*5, 300);

             _detailDescriptionLabel.text=@"Accessories";
             self.title=@"Accessories";
            [self.view addSubview:scr];

            break; 
```

.....按照上述方式使用不同图像的其他情况....

上面是我的配置视图，我只是在 UiScrollview 中添加了一些动态图像，并且我在每个图像上添加了点击手势......具有以下内容

```
-(void)handleSingleTap:(UITapGestureRecognizer *)rec{

    for (UIImageView *subview in scr.subviews) {
        [subview removeFromSuperview];
    }

    UIView *img = [rec view];
    img.frame = self.view.frame;
    [self.view addSubview:img];

} 
```

现在我想要的是在点击后我想为该图像提供旋转效果.. 只是这个 Xcode 环境以及 iOS 开发的初学者。

一些我如何成功地在 uiscrollview 中显示图像..但是在谷歌搜索之后我找不到旋转图像的良好指导。所以任何人都可以帮助我在图像被点击后在 uiscrollview 中对 uiimageview 图像进行旋转?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:00:53.230

试试这样

```
-(IBAction)ButtonAction:(id)sender{
    CABasicAnimation *fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
        fullRotation.fromValue = [NSNumber numberWithFloat:0];
        fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
        fullRotation.duration = 1;
        fullRotation.repeatCount = 1;
        [imageview.layer addAnimation:fullRotation forKey:@"360"];

} 
```

取一个按钮并为该按钮执行操作（调用此方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:59:25.747

您可以使用以下代码旋转 imageView：

`imageView.transform = CGAffineTransformMakeRotation(angle);`

# android - 如何在 Android 中包含文件以及识别的语音？

> ID：15612063
> 
> 赞同：1
> 
> 时间：2013-03-25T09:57:48.643
> 
> 标签：android, file, audio, voice-recognition, google-now

我有一个应用程序，我想在其中发送已识别的文本以及它所听到的声音。问题是我似乎无法让它工作。似乎是在 JellyBean 问题之后。Google Now“自我说明”和 Google Keep 都使用它，所以它应该可以工作....

在[recognitionListener](http://developer.android.com/reference/android/speech/RecognitionListener.html) 中有一个名为onBufferReceived 的方法。问题是我无法得到它。

有任何想法吗？

# sql-server-2005 - 为什么我的查询太慢 sql server 2005

> ID：15612064
> 
> 赞同：-1
> 
> 时间：2013-03-25T09:57:56.897
> 
> 标签：sql-server-2005

我有两个表序列号，Org

```
create table org(
  org_id  INT NOT NULL IDENTITY(1,1)PRIMARY KEY CLUSTERED,
  orgName VARCHAR(10)
  )
create table serialNumber(id  INT NOT NULL IDENTITY(1,1)PRIMARY KEY CLUSTERED,
                          org_id INT FOREIGN KEY REFERENCES org,
                          serialNumber BIGINT,
                          transferedStatus INT DEFAULT(0),
                          parentID INT NULL FOREIGN KEY REFERENCES serialNumber)

insert into org values('ORG A')
insert into org values('ORG B')
insert into org values('ORG C')
insert into org values('ORG D')
insert into org values('ORG E')

insert into serialNumber values(1,123456100,0,NULL)
insert into serialNumber values(1,123456101,0,NULL)
insert into serialNumber values(1,123456102,0,NULL)
insert into serialNumber values(1,123456103,0,NULL)
insert into serialNumber values(1,123456104,0,NULL)
insert into serialNumber values(1,123456105,0,NULL) 
```

我想将序列号（123456100）从 ORG A 转移到 ORG B 并将其标记为已转移转移状态 = 0（有库存）转移状态 = 1（无库存）

这是我的查询，它可以工作，但是当我要传输大量序列号（10K）时它太慢了……我知道还有其他方法可以做到，但是怎么做？！

```
declare @parentID int
declare @From_org_id  int 
declare @To_org_id  int 
declare @serialNumber BIGINT

set  @From_org_id  = 1
set  @To_org_id  = 2
set @serialNumber = 123456101

/* mark the serialNumber as transfered */

UPDATE serialNumber                             
set
transferedStatus = 1 
Where   
org_id              = @From_org_id
AND serialNumber    = @serialNumber 

/* find ID of the source of Serial Number */
select TOP 1 @parentID = id
FROM serialNumber
Where org_id            = @From_org_id 
  AND transferedStatus  = 1
    AND serialNumber    = @serialNumber 
ORDER BY id DESC

insert into serialNumber values(@To_org_id,@serialNumber,0,@parentID) 
```

[sqlfiddle 链接](http://sqlfiddle.com/#!3/85226/10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:03:48.013

您是逐行进行的，因此难怪 10k 行会很慢。尝试修改您的过程，使其适用于表值参数而不是 int。tbv 使用示例：http: [//blog.sqlauthority.com/2008/08/31/sql-server-table-valued-parameters-in-sql-server-2008/](http://blog.sqlauthority.com/2008/08/31/sql-server-table-valued-parameters-in-sql-server-2008/) 基于集合的操作肯定会更快。

# java - 神秘的导出apk

> ID：15612070
> 
> 赞同：2
> 
> 时间：2013-03-25T09:58:16.800
> 
> 标签：java, android, eclipse, export, apk

我在导出 apk 时遇到了一个奇怪的问题。当我在 Eclipse 上运行项目时，它工作正常。但是，如果我在删除旧手机后导出 apk 并安装同一部手机，则它不是同一个应用程序。看来我最后的更改不会影响导出的 apk。这就像之前缓存的导出 apk，当我尝试导出时，我总是得到相同的 apk 文件而不是新的 apk。你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:41:49.630

尝试在 Eclipse中删除`bin`和/或文件夹。`generated`（也许也尝试像这样开始`eclipse -clean`）

# ubuntu - LEX 和 YACC：NLP 中的语法实现

> ID：15612071
> 
> 赞同：1
> 
> 时间：2013-03-25T09:58:18.577
> 
> 标签：ubuntu, nlp, yacc, lex

我正在尝试构建 NLP 。但问题是我无法在其中获得一些东西。例如：如果在行动中我说

> printf("打印第三个参数 %s", $3) ;

然后它没有给我第三个论点而是它显示

> 打印第三个参数（空）

由于我正在尝试构建 NLP，因此包含参数对我来说很重要。所以我该怎么做 。下面我包括一些示例代码和输出：

pro.yacc 文件：

```
 %{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "y.tab.h"

int yylex(void) ;
static void yyerror(char *str) 
{
    printf("yyerror : %s " , str) ;
}
%}

%error-verbose
%token ASK
%token FIELD
%token QUALIFIER
%token MOJ
%token WORD
%token TOTAL
%token TABLE
%token EOL

%% 

translate   :   select
        |   count
            ;                                                                                                                                                    

select  :    ASK QUALIFIER TABLE EOL        { printf("SELECT *  FROM %s",$3) ;} 
    |    ASK FIELD QUALIFIER TABLE EOL    { printf("SELECT DISTINCT %s FROM %s ", $2, $4) ;} 
    |    ASK QUALIFIER TABLE FIELD EOL    { printf("SELECT DISTINCT %s FROM %s ", $4, $3) ;}
    |    ASK QUALIFIER FIELD WORD FIELD QUALIFIER TABLE EOL    { printf("SELECT DISTINCT %s , %s FROM %s", $3, $5, $7) ;}        
    ;

count     :    MOJ TABLE EOL    { printf("SELECT COUNT(*) FROM %s", $2) ;}
    ;

%%

#include "lex.yy.c"
extern int yylex() ;
extern int yyparse() ;
extern FILE *yyin ;
int main() 
{
    FILE *myfile = fopen("sample.txt" , "r") ;
    if(!myfile)
    {
        printf("Can't open the file ") ;
        return -1 ;
    }
    yyin = myfile ;
    do
    {
        yyparse();
    }while(!feof(yyin)) ;
    yylex_destroy() ;
    return 0 ;
} 
```

pro.lex：

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "y.tab.h"
#include "pro.tab.h"

void yyerror(char *str) ;

int line_num = 1 ;
%}

%%

[\t] ;

"reply"    { return ASK  ; }

"display"   { return ASK  ; }

"and"   { return WORD ; } 

"of every"  { return QUALIFIER  ; }

"all"  { return QUALIFIER  ; } 

"the"  { return QUALIFIER  ; }

"every"  { return QUALIFIER  ; }    

"name"   { return FIELD ; }   

"id"   { return FIELD ; } 

"how many"   { return MOJ ; }

"book"  { return TABLE   ; }   

"."   { return EOL ; } 

%% 
```

在使用 i/p 运行输入文件 sample.txt 后：“阅读每一本书。” （不包括引号我得到了o / p

```
 SELECT * FROM (null) 
```

. 我实际上应该用 book 代替 (null) 。.. 我怎么做 ？

PS：每次我尝试在所有语法中打印该参数时都会得到这个空值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:51:16.427

您的词法分析器正在返回一个标记号 ( `TABLE`)，但您的解析器正试图将其解释为一个字符串。将您的解析规则更改为

```
select  :    ASK QUALIFIER TABLE EOL        { printf("SELECT *  FROM %d",$3) ;} 
```

我认为你会看到不同之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:06:37.050

您的词法分析器没有保留单词的拼写——它只是返回一个数字，而没有确保该单词除了 as 之外可用`yytext`。`yytext`当令牌到达时，您的语法没有复制。因此，如果您需要保留字符串（以便您可以区分“回复”和“显示”，例如，令牌 ASK 的两种替代拼写），那么您必须确保信息被保存、复制、发布。到语法规则运行时，它很可能已经读取了更多的标记——甚至可能遇到了 EOF。因此，您通常需要一个更复杂的 YYSTYPE（和`%union`）结构，以便您可以在以后获得所需的信息。

# c# - 带有 CancellationToken 参数的 CopyTo

> ID：15612074
> 
> 赞同：2
> 
> 时间：2013-03-25T09:58:38.680
> 
> 标签：c#, .net, cancellation-token

我看到`CopyToAsync`有`CancellationToken`争论。但我不需要`CopyToAsync`，因为我的代码已经在后台线程中执行。我只想有一个`CopyTo`重载，`CancellationToken`它每次复制 bufferSize 字节时都会检查它。有没有内置的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:55:10.590

我刚刚采用了 .NET CopyTo 实现并在循环中添加了一行：

```
public static void CopyTo(this Stream source, Stream destination, int bufferSize, CancellationToken cancellationToken)
{
    var buffer = new byte[bufferSize];
    int count;
    while ((count = source.Read(buffer, 0, buffer.Length)) != 0)
    {
        cancellationToken.ThrowIfCancellationRequested();
        destination.Write(buffer, 0, count);
    }
} 
```

但令我失望的是 .NET Framework 设计人员并不关心取消长时间运行的同步操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:06:07.277

我可以说内置实现是`CopyToAsync`使用 CancellationToken。

在我看来，与构建自己的 Cancellation 实现相比，您将花费更少的时间来实现`CopyToAsync`（而不是）（并且减少错误/错误的风险）。`CopyTo`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:08:43.267

对于没有更好答案的情况：您可以使用 10 行 C# 代码实现一个同步复制循环作为可重用的辅助方法。看看 Reflector 是如何做到的。

# php - 将 PHPExcel 与 ZendFramework 2 集成

> ID：15612075
> 
> 赞同：0
> 
> 时间：2013-03-25T09:58:39.017
> 
> 标签：php, zend-framework2

我尝试将 PHPWord 和 PHPExcel 这两个库用作 ZendFramework2 中的两个库，也就是说将它们放在 Zend Framework 2 的 /lib 中并将它们加载到我的控制器中

在我的 autoload.php 我把以下

```
<?php

// autoload.php generated by Composer

require_once __DIR__ . '/composer' . '/autoload_real.php';

return ComposerAutoloaderInit689ffe38af096b92264c8f237441d64e::getLoader();

require_once 'Zend/Loader/Autoloader.php';
$loader = Zend_Loader_Autoloader::getInstance();
$loader->autoloadernamespaces[] = "Excel_";
$loader->registerNamespace('Excel_');

$loader->setFallbackAutoloader(true);

if ($configSection == 'development')
{
$loader->suppressNotFoundWarnings(false);
} 
```

我的控制器是：

```
<?php
namespace Auth\Controller;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\Excel\PHPExcel;

class AuthController extends AbstractActionController
{
public function LoginAction()
{
$objPHPExcel = new PHPExcel_Reader_Excel5();
$document = $objPHPExcel->load('example1.xls');

echo date('H:i:s') , " Données Ajoutées Avec Succés" ;
$document->setActiveSheetIndex(0)
        ->setCellValue('A1', 'Mike')
        ->setCellValue('D2', 'Spils);
        // Save Excel5 file

$objWriter = PHPExcel_IOFactory::createWriter($document, 'Excel5');
$objWriter->save(str_replace('.php', '.xls', __FILE__));

}
} 
```

` 但是该类没有被加载

我收到以下错误

```
( ! ) Fatal error: Class 'Auth\Controller\PHPExcel_Reader_Excel5' not found in         C:\wamp\www\zend\module\Auth\src\Auth\Controller\AuthController.php on line 14 
```

任何人都可以帮我pleeeeaase ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-11T11:30:27.330

如果您使用 composer 加载 zendframework，请尝试使用 composer.php 加载 phpExcel lib。

从项目文件夹中的命令行运行以下命令：

```
php composer.phar selfupdate

php composer.phar require phpoffice/phpexcel 
```

控制器方法中的访问为：

```
$excelObj = new \PHPExcel(); 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T07:28:21.057

如果您使用“经典”骨架

下载库（在 MyApp/vendor/library/ 中）网站是： http: [//phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

PHPExcel 的架构是由前缀组成的（比如 zf1），所以对我来说，像这样使用“Zend\Loader\ClassMapAutoloader”更容易：修改模块的文件 autoload_classmap

```
<?php
return array('PHPExcel'=>__DIR__.'/../../vendor/library/PhpExcel/PHPExcel.php',); 
```

所以你可以使用：

```
$excel = new \PHPExcel(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:08:00.467

我还没有任何使用ZF2的经验。但我很确定你注册了一个错误的命名空间，它应该是：

```
$loader->autoloadernamespaces[] = "PHPExcel_";
$loader->registerNamespace('PHPExcel_'); 
```

~~**编辑**~~

你`Zend/Excel/PHPExcel`在这个位置有你的 PHPExcel 库吗？

好吧，我不确定，但它不应该放在 Zend 的核心库中。

```
use PHPExcel\Reader\Excel5; 
```

也许它应该与 Zend 的库平行放置。

```
- Zend/    
- PHPExcel/ 
```

~~**编辑 2**~~

 ~~如果 Zendframework 2 文件夹结构是这样的：

```
- vendor/
    - zendframework/zendframework/library/Zend
    - PHPExcel/
    - autoload.php 
```

也许这应该是`PHPExcel`我认为你的图书馆的位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:26:14.527

正如@ro-ko 所建议的那样，您应该将文件夹放在供应商中，所以

```
vendor/PHPExcel 
```

然后打开 vendor/composer/autoload_namespaces.php

你会看到这样的东西

```
<?php

// autoload_namespaces.php generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
    'Zend\\' => $vendorDir . '/zendframework/zendframework/library/',
    'ZendTest\\' => $vendorDir . '/zendframework/zendframework/tests/',
); 
```

只需添加您的命名空间和该数组的路径，例如...

```
return array(
    'Zend\\' => $vendorDir . '/zendframework/zendframework/library/',
    'ZendTest\\' => $vendorDir . '/zendframework/zendframework/tests/',
    'PHPExcel\\' => $vendorDir . '/PHPExcel/',
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-11T13:49:30.757

这就是解决我在 ZF2 中的问题的原因。

将此添加到

> /vendor/composer/autoload_namespaces：

```
'PHPExcel' => array($vendorDir . '/zendframework/zendframework/library/Zend/PHPExcel/'), 
```

并在控制器中实例化类：

```
$objPHPExcel = new \PHPExcel(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-17T16:53:08.940

该问题与自动加载 PHPExcel 类有关。该`vendor/autoload.php`文件是自动生成的文件。这意味着“不要编辑此文件并期望您的更改能够坚持”。或者，为了避免自动加载 PHPExcel 类出现问题，可以使用 zf2 模块[MvlabsPHPExcel将](https://github.com/mvlabs/MvlabsPHPExcel)[PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)库轻松集成到 zend 框架 2 中。

之后，您需要启用该`MvlabsPHPExcel`模块：

```
<?php
return [
    'modules' => [
        // ...
        'MvlabsPHPExcel',            
    ],
    // ...
]; 
```

之后，您就可以在控制器内部使用了。

```
$phpExcelObject = $this->serviceLocator->get('mvlabs.phpexcel.service')->createPHPExcelObject(); 
```~~

# code-coverage - 无论如何将两个gcov文件合并为一个

> ID：15612077
> 
> 赞同：9
> 
> 时间：2013-03-25T09:58:42.393
> 
> 标签：code-coverage, gcov

我在 macosx 平台上使用 gcov 进行覆盖测试。我通过 set 完成 xcode 的配置：

```
1\. Build Settings ==> Generate Test Coverage Files == Yes
2\. Build Settings ==> Instrument Progaram Flow == Yes
3\. Build Phases ==> Link Binary with library ==> add "libprofile_rt.dylib" 
```

然后生成文件“ `Test.d, Test.dia, Test.gcno, Test.gcda, Test.o`”然后我使用`gcov-4.2 -b Test.gcno`命令生成`Test.m.gcov`文件（这是我想要的），但是下次我再次运行测试用例时，文件“ `Test.d, Test.dia, Test.gcno, Test.gcda, Test.o`”将再次生成，并且数据将被重置。

所以我有两个问题：

1.  有什么方法可以让我累积这些覆盖文件中的数据，以便我可以运行我的项目很多次，然后在最后生成文件。
2.  如果＃1 是无望的，你能告诉我如何将`merge two Test.gcno`文件（通过两次运行生成）合并为一个。我在终端中尝试 gcov，以下是 gcov 命令的选项：

    ```
    gcov-4.2 -help
    Usage: gcov [OPTION]... SOURCEFILE

    Print code coverage information.

      -h, --help                      Print this help, then exit
      -v, --version                   Print version number, then exit
      -a, --all-blocks                Show information for every basic block
      -b, --branch-probabilities      Include branch probabilities in output
      -c, --branch-counts             Given counts of branches taken
                                        rather than percentages
      -n, --no-output                 Do not create an output file
      -l, --long-file-names           Use long output file names for included
                                        source files
      -f, --function-summaries        Output summaries for each function
      -o, --object-directory DIR|FILE Search for object files in DIR or called FILE
      -p, --preserve-paths            Preserve all pathname components
      -u, --unconditional-branches    Show unconditional branch counts too

    For bug reporting instructions, please see:
    <URL:http://developer.apple.com/bugreporter>. 
    ```

感谢您提前提供的所有帮助

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-27T15:59:04.713

通常的工作流程`gcov`是

1.  使用覆盖支持编译和链接 ( `-fprofile-arcs -ftest-coverage`)
2.  运行您的可执行文件，可能多次，可能使用不同的参数/设置。`.gcda`这将在文件中创建累积使用信息
3.  调用`gcov`以获取人类可读格式的覆盖率统计信息 ( `.gcov`)

所以基本上，应用程序的连续运行将导致累积的覆盖率统计。只是这些累积会发生在`.gcda`文件中，而不是文件中，所以每次想要查看更新的统计信息时`.gcov`都必须重新运行。`gcov`

# ruby - 没有路线匹配 [GET] "/" 设计

> ID：15612080
> 
> 赞同：1
> 
> 时间：2013-03-25T09:58:48.163
> 
> 标签：ruby, ruby-on-rails-3, devise, gem

配置设计后，我可以使用这些路线：

```
new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
        user_session POST   /users/sign_in(.:format)       devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
       user_password POST   /users/password(.:format)      devise/passwords#create
   new_user_password GET    /users/password/new(.:format)  devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                     PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
   user_registration POST   /users(.:format)               devise/registrations#create
new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                     PUT    /users(.:format)               devise/registrations#update
                     DELETE /users(.:format)               devise/registrations#destroy
               about GET    /about(.:format)               pages#about
                root        /                              pages#home 
```

现在我在 home.html.erb 文件中使用它：

```
<p> 
<%= link_to 'Sign up now!',  new_user_regsitration_path , class: "btn btn-large btn-primary" %>
</p> 
```

每次我运行服务器时，我都会收到此路由错误：

```
No route matches [GET] "/" 
```

请帮忙？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:03:20.170

如果没有任何帮助，只需重新启动您的服务器。我有同样的错误，无法弄清楚发生了什么！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:28:25.773

您在主页上的链接中有错字：

```
new_user_regsitration_path 
```

应该：

```
new_user_registration_path 
```

# sql - 如何获得六个月的每个月的最小日期？

> ID：15612081
> 
> 赞同：1
> 
> 时间：2013-03-25T09:58:50.243
> 
> 标签：sql, oracle, plsql

我有这样的数据。

```
Process_date   SEQ_No
-------------  ---------
16-MAR-13   733
09-MAR-13   732
02-MAR-13   731
24-FEB-13   730
16-FEB-13   728
09-FEB-13   727
02-FEB-13   726
26-JAN-13   725
21-JAN-13   724
12-JAN-13   723
05-JAN-13   722
29-DEC-12   721
24-DEC-12   720
15-DEC-12   719
08-DEC-12   718
03-DEC-12   717
22-NOV-12   716
17-NOV-12   715
10-NOV-12   714
03-NOV-12   713
29-OCT-12   712
23-OCT-12   711
13-OCT-12   710
05-OCT-12   709
28-SEP-12   708
22-SEP-12   707
15-SEP-12   706
08-SEP-12   705
01-SEP-12   704 
```

每个月管理员都会刷新实际的数据表，并且上面的表会自动更新为唯一的 seq_no 和 process_date。

我需要提取每个月的最小日期（过去 6 个月的第一次刷新 - 不包括当前月份）以及与该月相关的 seq_no，因此使用连接（使用 seq_no - 在主表中可用）我可以组合实际数据。

我需要这样的结果：

```
02-MAR-13   731 ( I don't need MAR as it should not take current month data) 
```

所以我需要如下的最终结果：

```
02-FEB-13   726
05-JAN-13   722
08-DEC-12   718
03-NOV-12   713
05-OCT-12   709
01-SEP-12   704 
```

--很抱歉问这样的直接问题。我不知道该怎么做。这就是我没有准备/发布任何查询的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:07:34.683

```
select Process_date, SEQ_No
  from (select Process_date, SEQ_No, 
               row_number() over (partition by trunc(process_date, 'mm') order by process_date) rn
          from yourtab
         where Process_date < trunc(sysdate, 'mm'))
 where rn = 1; 
```

会那样做

小提琴示例：[http ://sqlfiddle.com/#!4/a5452/1](http://sqlfiddle.com/#!4/a5452/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:07:06.400

我不明白 seq_no 在另一个表中是如何...但是使用输入数据：

```
select 
    min(process_date), 
    min(seq_no) keep (dense_rank first order by process_date)
from 
    your_table
where 
    process_date between add_months(trunc(sysdate,'MM'),-7) 
                     and last_day(add_months(sysdate, -1))
group by 
    trunc(process_date,'MM'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:41:39.300

尝试：

```
SELECT seq_no,process_date FROM my_table
WHERE process_date IN (SELECT min(process_date) 
                       FROM my_table 
                       GROUP BY TRUNC(process_date,'MM')) 
```

# backbone.js - 骨干路由器没有导航方法

> ID：15612087
> 
> 赞同：1
> 
> 时间：2013-03-25T09:59:19.240
> 
> 标签：backbone.js, router

只是想知道为什么我的路由器没有导航方法？

我已经`new App.Router;`正确调用了。在我看来，我尝试像这样调用我的索引视图：

```
addTrip: function(e){

    e.preventDefault() ;

    //Adding to collection
    var newTrip = this.collection.create({
        title: this.$('#new_trip #title').val(),
        where: this.$('#new_trip #where').val(),
        desc: this.$('#new_trip #desc').val(),
        rating: this.$('#new_trip .active').text()
    }, { wait: true })  ;

    if(newTrip.validationError){
        this.errorReport(newTrip.validationError) ;
    }

    this.clearForm() ;

    //Navigate to home route
    App.Router.navigate('', true) ;

} 
```

我在 Chrome 开发工具中收到以下错误：

`Uncaught TypeError: Object function (){ return parent.apply(this, arguments); } has no method 'navigate'`

我什至尝试从控制台调用导航，但它似乎也不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T10:22:01.687

您应该在路由器对象上调用导航。看来您是在课堂上调用它。

```
App.myRouter = new Backbone.Router() //or if you have your own base router class App.myRouter = new App.Router() 

myRouter.navigate('', true); 
```

# powershell - 如何将变量与命令的其余部分结合起来

> ID：15612088
> 
> 赞同：1
> 
> 时间：2013-03-25T09:59:19.910
> 
> 标签：powershell

如何将变量与命令的其余部分结合起来，而不会出现错误：

即我想发出：

```
Set-MailboxFolderPermission -Identity fred.bloggs@here.com:\Calendar -User Default -AccessRights Reviewer 
```

但是使用变量 $email 作为电子邮件地址。我试过了：

```
Set-MailboxFolderPermission -Identity $email:\Calendar -User Default -AccessRights Reviewer 
```

但这给出了一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:07:35.830

冒号 ( `:`) 是变量名称中的有效字符（它是范围说明符或 PSDrive 引用），因此它会查找变量`$email:`（它本身是无效的，但在这里仍然存在问题）。您需要一个子表达式和引号：

```
"$($email):\Calendar" 
```

或转义冒号：

```
$email`:\Calendar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:29:45.020

您还可以使用大括号来隔离变量。请注意，使用此语法，变量名称不包含美元符号：

```
"${email}:\Calendar" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:03:27.250

除非在双引号中，否则变量不会扩展：

```
set-MailboxFolderPermission -Identity "$email:\Calendar" -User Default -AccessRights Reviewer 
```

# android - 如何存储android移动应用程序数据存储云数据库（如我的sql）？

> ID：15612089
> 
> 赞同：3
> 
> 时间：2013-03-25T09:59:21.637
> 
> 标签：android, cloud

如何存储android移动应用程序数据存储云数据库（如我的sql）？

我是开发 android 应用程序的新手。我想了解 android 移动应用程序数据如何存储和检索像 mySQL 这样的桉树云数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T11:06:02.050

云是一组提供服务的服务器的术语。因此，如果您将数据托管（存储）在云中，则意味着您已经注册了一项服务，该服务允许您远程存储和检索数据。

数据将存储在某个物理服务器上，但云的好处是您不必担心如何维护硬件/软件。

某些服务允许您存储和检索数据，而无需提前进行任何配置。

其中之一是 Parse.com。您可以使用 API 将数据存储在云中[https://parse.com/products/data#howitworks](https://parse.com/products/data#howitworks)。

Parse.com 可让您在直观的浏览器电子表格界面[https://parse.com/products/data#overview](https://parse.com/products/data#overview)中管理您的对象。

# selenium - 使用 selenium 的全日历自动化

> ID：15612096
> 
> 赞同：1
> 
> 时间：2013-03-25T09:59:32.270
> 
> 标签：selenium, fullcalendar

如何使用 selenium 进行全日历自动化 .. 如下图所示，我想在 11:00 时单击 Marzp 26 它是一个 jQuery 插件 .. 请帮助

![在此处输入图像描述](../Images/9a06c1a04e479ccb3c97b39fc781a273.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-14T22:02:45.857

Fullcalendar 中的一些网格可能很难使用，因为它们是在 z 层中构建的。解决这个问题的一种方法是像用户一样使用 selenium 来移动鼠标。

这可以使用动作链来完成：

```
from selenium import webdriver
from selenium.webdriver.common.action_chains import ActionChains

# Get the row for 11:00:00
time_row = self.browser.find_element_by_css_selector('tr[data-time="11:00:00"]')
action = ActionChains(self.browser)

# Select the day by moving a fraction of the width of the <tr>
# In this case, I am moving to Wed on the 7-day agendaWeek view.
action.move_to_element_with_offset(time_row, time_row.rect['width']/2, time_row.rect['height']/2)
action.click()
action.perform() 
```

# linq - 将 IQueryable 与实体框架一起使用时的空值

> ID：15612104
> 
> 赞同：0
> 
> 时间：2013-03-25T09:59:49.873
> 
> 标签：linq, entity-framework, linq-to-entities

可以说我有这个`IQueryable`变量：

```
var result= (from fruit in fruitTable 
                 join dapple in applesIQuery on fruit.fruitType equals dapple.fruitType into apples 
                 from apple in apples.DefaultIfEmpty()
                 select new foo ); 
```

applesIQuery 来自另一个`IQueryable`由另一组联接组成的。

```
applesIQuery =(from a in anotherTable select new {id = foo}) ; 
```

我需要处理的情况`applesIQuery == null`，基本上是创建一个 id=0 的 1 个元素的列表，但没有将 转换`IQueryable`为`IEnumerable`. 就像是 ：

```
applesIQuery =(from a in anotherTable select new {id = foo})?? Iqueriable {new {id=0}} ; 
```

任何指向正确方向的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:39:23.707

applesIQuery 是 IQueryable 类型，不会为空。假设您的意思是如果查询不返回任何结果，请尝试以下操作：

```
applesIQuery = applesIQuery.Count() == 0 ? new ArrayList(){ new { id = 0 } }.AsQueryable() : applesIQuery; 
```

# java - 在带有 HTML 字段的字符串中加载空格时遇到问题

> ID：15612106
> 
> 赞同：-1
> 
> 时间：2013-03-25T09:59:53.770
> 
> 标签：java, html, jsp, servlets

我正在做一个登录系统的事情。有添加、删除和更改。我正在使用 Java、Servlets、JSP 也使用与 MySQL 处理程序的连接，当我想显示包含空格的字符串时出现问题，例如

输入字符串：Jorge Lopez

要显示的字符串：Jorge

最奇怪的是我放了一个 textarea 并正确地向我展示了链条。

我尝试替换\n\r 不起作用，实际上在链打印和显示之前正确但是当放置在html 字段值时它也没有出现。

我希望有一个人可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:13:05.490

在 a`textarea`中，您不使用该`value`属性，而只是将文本放在`textarea`打开和关闭标签内

```
<textarea>Jorge Lopez</textarea> 
```

在`input`文本字段中，您必须用单引号或双引号将文本括在`value`属性中`'``"`

```
<input type="text" value="Jorge Lopez"/> 
```

使用动态 JSP 值，您仍将使用引号将值括起来

```
<input type = "text" value="<%= usr.getName() %>" /> 
```

在 HTML 中，您可以[省略引号](http://www.w3.org/TR/REC-html40/intro/sgmltut.html#h-3.2.2)。但是该值仅限于某些字符，并且不得包含空格。

在您的情况下，生成的文本字段看起来像

```
<input type="text" value=Jorge Lopez /> 
```

它被解释为一个属性`value="Jorge"`和一个`Lopez`没有属性值的属性。

# javascript - 将 D3-WordCloud 中的主词水平居中

> ID：15612107
> 
> 赞同：3
> 
> 时间：2013-03-25T09:59:58.863
> 
> 标签：javascript, d3.js, alignment, center, words

我有以下 WordCloud。原始代码来自 Jason Davies D3-JavaScript-WordCloud Example。 [https://github.com/jasondavies/d3-cloud/blob/master/examples/simple.html](https://github.com/jasondavies/d3-cloud/blob/master/examples/simple.html)

下面的大部分代码来自这个非常有用的教程（德语）： http: [//www.advitum.de/blog/2012/04/tagcloud-mit-php-und-javascript-erstellen-word-cloud-d3/](http://www.advitum.de/blog/2012/04/tagcloud-mit-php-und-javascript-erstellen-word-cloud-d3/) 谢谢拉尔斯·艾伯特！

编辑：现在我学到了更多。我已经清除了无意义的代码。

**我的目标是将数组中的第一个单词水平居中。**

第一个词现在水平居中，但现在 Cloud 中有一个间隙。就在单词没有定位的 x,y 点。

**我的新问题是：如何消除这个差距？**

谢谢你。

```
var wordcloud, size = [800, 800]; //Cloud Size
var fillColor = d3.scale.category20b();

function loaded() {
    d3.layout.cloud()
        .size(size) 
        .words(words)
        .font("Impact")
        .fontSize(function(d) { return d.size;})
        .rotate(function() { return ~~(Math.random() * 2) * 90; })
        .on("end", draw)
        .start();       
}

function draw(words) {
    wordcloud = d3.select("body")
        .append("svg")
        .attr("width", size[0])
        .attr("height", size[1])
        .append("g")
        .attr("transform", "translate(" + (size[0]/2) + "," + (size[1]/2) + ")");
    wordcloud.selectAll("text")
        .data(words)
        .enter()
        .append("text")
        .style("font-size", function(d) { return d.size + "px"; })
        .style("fill", function(d) { return fillColor(d.text.toLowerCase()); })
        .attr("text-anchor", "middle")

     //Edit
    .attr("transform", function(d, i) {
        if(i == 0){
            return "translate(" + [0, 0] + ")rotate(" + 0 + ")";    //handle first element
        }else{
            return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")"; //handle the rest
        }
    })
    //--------------

    .text(function(d) { return d.text; });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T01:45:35.393

使用等于大小计算之一的负边距：

```
 wordcloud.selectAll("text")
     ...
     ...
     ...
     .style("margin-left", function(d) {return d.size + "px"}) 
```

# javascript - Javascript 2D数组排序 - 按数值

> ID：15612111
> 
> 赞同：2
> 
> 时间：2013-03-25T10:00:02.177
> 
> 标签：javascript, sorting, multidimensional-array

我已经看到了与这个问题类似的另外几篇文章，但没有一个适用于我的场景并且迷失了如何解决这个问题（例如[按第二个值对 2D 数组进行排序](https://stackoverflow.com/questions/3524827/sort-a-2d-array-by-the-second-value)）

我将解释这个问题——我在 JavaScript 中面临的问题；

我有两个数组，用于在 3rd 方产品中创建图表。我有以下变量；

标签[“股票 A”、“股票 B”、“股票 C”、“股票 D”]

值[“200”、“1000”、“900”、“800”]

我想要这个在二维数组中

排序[“库存 B，1000”，“库存 C，900”，“库存 D，800”，“库存 A，200”]

如果可能的话，我想按数值排序。问题是，当我在上面发布的问题中使用解决方案时，它只会将该值与另一个值进行比较。我需要这个来遍历已经存储在数组中的每个值。

上周我在某个地方发现了另一种非常冗长的方式，但它正在对诸如 100、1000 之类的值进行排序——我认为这归结为不是整数等，但没有这样的运气。周五我一怒之下删除了代码。

我希望那里的某个好心人可以帮助新的编码员。O 这些值以字符串形式出现，因此需要将它们转换为整数。

数组中有无限数量的条目，一旦我对这些条目进行了正确排序，我需要保留前 10 个，然后将其他条目分组到一个总数中 - 所以我将有 11 个条目。但是，我需要先进行排序，然后才能解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:04:20.107

> 我想要这个在二维数组中
> 
> `sorted["Stock B, 1000","Stock C, 900", "Stock D, 800", "Stock A, 200"]`

那不是二维数组，而是字符串的一维数组。这将是一个二维数组：

```
sorted = [["Stock B", 1000], ["Stock C", 900], ["Stock D", 800], ["Stock A", 200]]; 
```

...您可以像这样按第二个值排序：

```
sorted.sort(function(a, b) {
    var avalue = a[1],
        bvalue = b[1];
    if (avalue < bvalue) {
        return -1;
    }
    if (avalue > bvalue) {
        return 1;
    }
    return 0;
}); 
```

但是使用一维对象数组可能会更好：

```
sorted = [
    {name: "Stock B", quantity: 1000},
    {name: "Stock C", quantity: 900},
    {name: "Stock D", quantity: 800},
    {name: "Stock A", quantity: 200}
]; 
```

...你可以这样排序：

```
sorted.sort(function(a, b) {
    var avalue = a.quantity,
        bvalue = b.quantity;
    if (avalue < bvalue) {
        return -1;
    }
    if (avalue > bvalue) {
        return 1;
    }
    return 0;
}); 
```

# ns2 - 如何在 Ns-2 中实现多个队列

> ID：15612114
> 
> 赞同：2
> 
> 时间：2013-03-25T10:00:15.920
> 
> 标签：ns2

在我的项目中，我想将其区`incoming traffic`分为多个类，例如`critical`, `normal`,`delay sensitive`数据包,

**想要将每种类型的数据包放入具有不同优先级的单独队列中，**

我按顺序定义了最高优先级：

1.  关键数据包，
2.  延迟敏感数据包
3.  正常的数据包。

我如何在 NS-2 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:58:31.163

使用模型中的`Queue/dsRED`队列`diffserv`。

您可以在中查看示例脚本

```
$NS_HOME/tcl/ex/diffserv/ 
```

# tomcat - tomcat 启动了吗？

> ID：15612117
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:00:20.990
> 
> 标签：tomcat, centos

通过运行命令 $ ./startup.sh 我得到

```
Using CATALINA_BASE:   /home/ec2-user/apache-tomcat-7.0.37
Using CATALINA_HOME:   /home/ec2-user/apache-tomcat-7.0.37
Using CATALINA_TMPDIR: /home/ec2-user/apache-tomcat-7.0.37/temp
Using JRE_HOME:        /usr
Using CLASSPATH:       /home/ec2-user/apache-tomcat-7.0.37/bin/bootstrap.jar:/home/ec2-user/apache-tomcat-7.0.37/bin/tomcat-juli.jar 
```

然后再次将控件返回给shell，如何发现tomcat启动成功或抛出了一些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:01:32.380

如果您没有收到任何错误，正在运行，请打开浏览器进行测试并转到：

```
http://localhost:8080 
```

8080 是默认的tomcat 端口，如果您在配置文件中更改了它，请更改URL。您应该会看到 tomcat 欢迎页面。

您也可以测试它是否也在 shell 中运行：

```
ps aux | grep tomcat 
```

您可以使用（来自 tomcat 目录）查看日志：

```
cat logs/catalina.out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:01:54.760

检查日志文件`log`以查看是否引发了错误。

# html - 我如何制作一个 文件在所有页面上连续播放？

> ID：15612120
> 
> 赞同：23
> 
> 时间：2013-03-25T10:00:37.593
> 
> 标签：html, html5-audio

我想知道如何让音频文件在所有页面上“连续”播放。因此，如果音频文件已经播放了 20 秒，那么当在另一个页面上导航时，它将从中断的地方继续。我也试图在离开主页后降低音量。我将不胜感激任何提示或建议！谢谢=D

```
<audio src="songforsite.mp3" loop="true" autoplay="true" controls>
Unsupported in Firefox
</audio> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-25T11:26:31.323

对的，这是可能的。尝试这个：

```
<audio preload="auto" src="a.mp3" loop="true" autobuffer>
Unsupported in Firefox
</audio>

<script>

function setCookie(c_name,value,exdays)
{
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name)
{
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++)
    {
      x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
      y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
      x=x.replace(/^\s+|\s+$/g,"");
      if (x==c_name)
        {
        return unescape(y);
        }
      }
}

var song = document.getElementsByTagName('audio')[0];
var played = false;
var tillPlayed = getCookie('timePlayed');
function update()
{
    if(!played){
        if(tillPlayed){
        song.currentTime = tillPlayed;
        song.play();
        played = true;
        }
        else {
                song.play();
                played = true;
        }
    }

    else {
    setCookie('timePlayed', song.currentTime);
    }
}
setInterval(update,1000);
</script> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-25T10:46:35.957

如果您真的导航到另一个页面，那么您将无法获得真正的连续播放。

常见的方法有以下三种：

*   在弹出窗口中打开您的音频播放器
*   框架：一个用于显示页面的主框架，一个用于音频播放器的小框架
*   不是真正导航到其他页面，而是使用 AJAX 执行所有操作，因此实际上不会重新加载页面，而只是动态更改文档结构的一部分；可能会添加真正的链接功能，包括使用 HTML5 History API 更改地址栏

所有方法都有其优点/缺点。Popup 可能是最容易实现的，并且缺点最少（与框架相比）。

> 我也试图在离开主页后降低音量。

然后捕捉任何点击您的“主页”链接/按钮，并调用参数值范围为 0 到 1`volume`的元素的方法来设置音量。`audio`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-08T07:01:46.227

嗯 .. 一种干净整洁的方式，是 soundcloud.com 和 spoify.com 通过 ajaxifing 所有页面制作的方式

修复页面并通过 ajax 更改页面内容，并更改 url 以给用户导航的错觉这不是最简单或最快的解决方案，但它是最干净的..远离对浏览器不兼容的恐惧

# ios - 在 UITableView 中显示数组中的选择性数据

> ID：15612130
> 
> 赞同：0
> 
> 时间：2013-03-25T10:01:08.227
> 
> 标签：ios, xcode, uitableview, nsmutablearray

我有一个 NSMutableArray 显示为

```
 (
          13002,
          My Drive,
          13006,
          Testing1,
          13007,
          Testing123    
 ) 
```

在我的 NSLog

我想用名称（我的驱动器、测试 1 和测试 123）填充我的 UITableView，并希望使用 ID 作为字幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:08:12.063

```
NSmutableArray *element; //contains your array

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

    static NSString *cellIdentifier = @"MyCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellIdentifier];

    element = [array objectAtIndex:indexPath.row];
    cell.textLabel.text = element;

    element = [array objectAtIndex:indexPath.row +1 ];
    cell.subtitle.text = element; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:08:17.400

您还应该考虑使用免费的 Sensible TableView 框架。您只需将数组传递给框架，它就会自动将其显示在表格视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:09:45.710

在 indexpath 方法和行数方法中使用单元格作为行，如下所示

```
 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
        return array.count/2;
 }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
      int row = [indexPath row]*2;

      static NSString *CellIdentifier = @"Cell";

      UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if (cell == nil) {
              cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
              cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
              cell.textLabel.font = [UIFont boldSystemFontOfSize:14];
     }    

     cell.textLabel.text = [array objectAtIndex:row+1];
     cell.detailTextLabel.text = [array objectAtIndex:row];

     return cell;
} 
```

你的问题会解决...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:22:31.217

根据您的应用程序，您可能需要考虑使用 NSMutableDictionary 而不是数组。这样，您的数据模型将准确地表示这些名称映射到 id 的事实。您可以使用

```
NSArray *arrayOf Keys = [theDictionary allKeys]; 
```

获取字典中的键数组，然后执行以下操作：

```
cell.textLabel.text = [theDictionary objectForKey:[arrayOfKeys objectAtIndex:indexPath.row]];
cell.detailtextLabel.text = [arrayOfKeys objectAtIndex:indexPath.row]; 
```

# android - 如何在 Xamarin Studio 中调试小部件应用程序？

> ID：15612132
> 
> 赞同：2
> 
> 时间：2013-03-25T10:01:13.500
> 
> 标签：android, debugging, xamarin.android, xamarin, xamarin-studio

我正在 Xamarin Studio 中试验[简单的小部件应用程序](https://github.com/xamarin/monodroid-samples/tree/master/SimpleWidget)，并想知道如何调试它。尝试常规的“运行-> 开始调试”（F5）会产生

> 应用程序不包含可启动的活动

据我了解[ActivityAttribute.MainLauncher](http://androidapi.xamarin.com/?link=P%3aAndroid.App.ActivityAttribute.MainLauncher)属性是专门为此目的而设计的，但在我正在玩的示例中没有将其应用到的活动。

ps 有没有类似于“附加到进程”功能的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:44:56.507

似乎除了将您的小部件嵌入到自己创建的活动中仅用于调试目的之外，仍然没有简单的解决方案。我发现的 Xamarin 团队的最后一篇文章在[这里](http://comments.gmane.org/gmane.comp.gnome.mono.monodroid/4326)。

我已经尝试了一些使用空活动的方法并试图欺骗调试器 - 但失败了。

# spring - Spring数据源和范围

> ID：15612136
> 
> 赞同：1
> 
> 时间：2013-03-25T10:01:30.030
> 
> 标签：spring, hibernate, scope

我有一个项目，其中 DB 已移入 claster。

我必须将我的范围从 singelton 更改为 request。

我对 sigelton 的配置是：

```
<bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.userrw}" />
    <property name="password" value="${jdbc.userrwpass}" />
    <property name="removeAbandoned" value="true"/>
    <property name="removeAbandonedTimeout" value="60"/>
    <property name="logAbandoned" value="true"/>
    <property name="testOnReturn" value="true"/>
    <property name="timeBetweenEvictionRunsMillis" value="60000"/>
    <property name="minEvictableIdleTimeMillis" value="60000"/>
    <property name="testOnBorrow" value="true"/>
    <property name="validationQuery" value="SELECT 1"/>
    <property name="validationInterval" value="30000"/>
    <property name="suspectTimeout" value="60"/>
    <property name="jdbcInterceptors" value="org.apache.tomcat.jdbc.pool.interceptor.ResetAbandonedTimer" />

</bean> 
```

当我改变时：

```
<bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close" scope="request"> 
```

我得到错误：

```
 ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name
 'transactionManager' defined in ServletContext resource [/WEB-INF/hibernate-context.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception 
is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still 
receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1385)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:306)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1389)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1653)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1662)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1642)
        at java.lang.Thread.run(Thread.java:679) 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:09:47.943

通常每个应用程序而不是每个请求只需要一个**DataSource实例。**它失败的原因是 Spring 在启动时尝试初始化**DataSource**，当时还没有可用的请求。

所以删除**范围=“请求”**

# activeadmin - 在 ActiveAdmin 中下载分页资源的所有记录

> ID：15612139
> 
> 赞同：3
> 
> 时间：2013-03-25T10:01:32.707
> 
> 标签：activeadmin

我正在尝试使用 Active Admin 中已经存在的收集操作“download_csv”来下载资源的所有记录。但是，该操作仅下载当前页面的内容。由于我已经对资源进行了分页，因此需要从所有页面下载数据。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-16T01:43:57.230

只为未来的谷歌人。我的修复（适用于当前的 Master 1.0.0pre）是将以下内容添加到`config/initializers/active_admin.rb`：

```
module ActiveAdmin
  class ResourceController
    module DataAccess
      # needed for current active admin master
      def max_per_page
        30_000
      end

      def per_page
        return 30_000 if %w(text/csv application/xml application/json).include?(request.format)

        return max_per_page if active_admin_config.paginate == false

        @per_page || active_admin_config.per_page
      end
    end
  end
end 
```

根据需要更换最大值。这适用于 csv、xml 和 json 下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T15:28:30.517

这个答案可能有点晚，但希望它可以帮助某人。

这是我在当前应用程序中的工作方式：

```
csv do
  ModelName::ATTR_ADMIN_EXPORT.each do |sym|
    column sym
  end
end 
```

在模型中，我的 ATTR_ADMIN_EXPORT 定义如下：

```
ATTR_ADMIN_EXPORT = [:name, :created_at] 
```

让我知道这是否适合您！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T02:40:19.187

你可以试试这个

```
before_filter :only => :index do
  @per_page = 10 unless request.format == 'text/csv'
end 
```

此代码还将使分页动态化。

```
 before_filter :only => :index do
   if params[:pag].blank?
     @per_page = AdminSetting.where(:name => 'JobPagination').first.value.to_i unless request.format == 'text/csv'
   else
     @per_page = 10  
   end
 end 
```

# erlang - Erlang：gen_tcp:recv() 没有收到客户端发送的数据包？

> ID：15612140
> 
> 赞同：4
> 
> 时间：2013-03-25T10:01:39.093
> 
> 标签：erlang, client-server, limit, packet, gen-tcp

我修改[了此服务器](https://stackoverflow.com/questions/15602314/erlang-server-cursor-hangs-on-command-line)以使用`gen_tcp:recv`以将数据包的字节数限制为 50。我注释掉了该行`inet:setopts(Socket, [{active, once}]),`，因为`gen_tcp:recv`应该是`{active,false}`. 这是客户端 erl shell

```
2> cp3:client().
exit
3> 
```

这是服务器端 erl shell

```
4> cp3:server().
Started Server:
<0.46.0>
Accept Server:
Pid <0.48.0>
Connection accepted 
Accept Server:
Loop Server:
5> 
```

`{tcp_closed, Socket}`我还想知道如果`gen_tcp:recv`没有创建套接字，我怎么知道套接字是否以返回值关闭？

```
-module(cp3).
-export([client/0, server/0,start/0,accept/1,enter_loop/1,loop/1]).

client() ->
    {ok, Socket} =  gen_tcp:connect("localhost", 4001,[list, {packet, 0}]),
    ok = gen_tcp:send(Socket, "packet"),
    receive
        {tcp,Socket,String} ->
            io:format("Client received = ~p~n",[String]),       
            io:format("Client result = ~p~n",[String]),
            gen_tcp:close(Socket)
        after 1000 ->
            exit        
    end.

server() -> 
    Pid = spawn(fun()-> start() end),
    Pid.

start() ->  
    io:format("Started Server:~n"),
    {ok, Socket} = gen_tcp:listen(4001, [binary, {packet, 0},{reuseaddr, true},{active, false}]),
    accept(Socket).

accept(ListenSocket) ->
    io:format("Accept Server:~n"),
    case gen_tcp:accept(ListenSocket) of
        {ok, Socket} ->
            Pid = spawn(fun() ->
                io:format("Connection accepted ~n", []),
                enter_loop(Socket)
            end),
            io:format("Pid ~p~n",[Pid]),
            gen_tcp:controlling_process(Socket, Pid),
            Pid ! ack,
            accept(ListenSocket);
        Error ->
            exit(Error)
    end.

enter_loop(Socket) ->
    %% make sure to acknowledge owner rights transmission finished
    receive ack -> ok end,
    loop(Socket).

loop(Socket) ->
    %% set socket options to receive messages directly into itself
    %%inet:setopts(Socket, [{active, once}]),
    io:format("Loop Server:~n"),
    case gen_tcp:recv(Socket, 50) of
    {ok, Data} ->  
        case Data of
            <<"packet">> ->                 
                io:format("Server replying = ~p~n",[Data]),   
                gen_tcp:send(Socket, Data),
                loop(Socket)                  
        end;
    {error, Reason} ->      
        io:format("Error on socket ~p reason: ~p~n", [Socket, Reason])          
    end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:59:37.510

我对你的问题不是很清楚，但是上面的代码不起作用。希望以下内容能解答您的问题。您的 tcp 接收`case gen_tcp:recv(Socket, 50) of`有一个错误。它正在等待读取 50 个字节。检查[gen_tcp:recv/2](http://www.erlang.org/doc/man/gen_tcp.html#recv-2)的文档。将长度（packer 6 的长度，但最好改为）0 以接收所有字节。

该值不限制数据的大小，但在接收到长度为 50 的数据之前，它不会发回数据。相反，您可能需要接受然后检查它。

# jquery-validation-engine - 仅当另一个字段的值为 x 或 y 时才需要 jQuery-Validation-Engine

> ID：15612142
> 
> 赞同：0
> 
> 时间：2013-03-25T10:01:46.063
> 
> 标签：jquery-validation-engine

```
 "requiredInFunction": {
                "regex": "none",
                "func": function(field, rules, i, options){
                    if (field.val() === '' && $('#CartItem_vision').val()==="Progressive") {
                        return false;

                    }
                    if (field.val() === '' && $('#CartItem_vision').val()==="Bifocal")
                    {
                        return false;
                    }
                    else
                    {
                        return true;
                    }
                },
                "alertText": "Addition is Required"
            }, 
```

验证[自定义[requiredInFunction]]

此验证不执行任何操作。

除非我输入了 validate[required, custom[requiredInFunction]]，但即使 CartItem_vision 不是“Progressive”或“Bifocal”，它也成为必需的。我希望它们仅在值为“渐进式”或“双焦”时才需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T14:04:19.760

在您的功能中，您可以添加

`rules.push('required');`

像这样 ：

```
function checkCell(field, rules, i, options){
    if ($('#cellNum').val().length > 0 && field.val().length == 0) {
        rules.push('required'); 
        return "Provider necessary with phone number";
    }
} 
```

这意味着如果 #cellNum 已填充，则提供程序是必需的。初始化是：

```
<select name="provider" id="provider" class="validate[funcCall[checkCell]"> 
```

# ios - 如何检查 NSDictionary 中的值和整数值是否相同？

> ID：15612146
> 
> 赞同：-2
> 
> 时间：2013-03-25T10:02:03.350
> 
> 标签：ios, xcode, nsarray, plist, nsdictionary

我有一个字典，其值如图所示，我有书籍 ID 的整数值。如何检查 bookid 是否匹配？![在此处输入图像描述](../Images/3be6b5f6e188c1dd1a6bd9908b35f67c.png)

这是我的检查代码

```
NSMutableDictionary *plistdictionary = [[NSMutableDictionary alloc]initWithContentsOfFile:metaDataPath];
NSMutableArray *notes=[plistdictionary objectForKey:@"usernotes"];
NSLog(@"notes value %@",notes);
NSArray *CollectingBookid=[[NSArray alloc]init];
CollectingBookid=[notes valueForKey:@"bookid"];
NSArray *CollectingPages=[[NSArray alloc]init];
CollectingPages=[notes valueForKey:@"pagenumber"];
NSArray *CollectingNotes=[[NSArray alloc]init];
CollectingNotes=[notes valueForKey:@"notes"];
NSLog(@"collection of book id%@",CollectingBookid);
NSString *bookid=@"95";
NSString *page=@"1";
int c=[CollectingBookid count];
for(int i=0;i<c;i++)
{
    NSString *singleBookids=[CollectingBookid objectAtIndex:i];
    NSString *singlePage=[CollectingPages objectAtIndex:i];
    if([singleBookids isEqualToString:bookid])
        {
            if([singlePage isEqualToString:page])
            {
                NSMutableArray *CompleteUserNotes=[[NSMutableArray alloc]init];
                CompleteUserNotes=[CollectingNotes objectAtIndex:i];
                NSLog(@"Selected Notes%@",CompleteUserNotes);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:14:11.283

创建谓词并通过过滤数组找到userNote

```
/*As your plist has bookId as string its taken as string. 
But if you have bookId as integer before checking 
convert it to string for predicate to work*/
NSInteger bookId = 92;
NSString *bookIdString = [NSString stringWithFormat:@"%d",bookId];

NSInteger pageNumber = 12;
NSString *pageNumberString = [NSString stringWithFormat:@"%d",pageNumber];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"bookid == %@ AND pagenumber == %@",bookIdString,pageNumberString];

//filteredUserNotes will have all notes matching bookId
NSArray *filteredUserNotes =  [notes filteredArrayUsingPredicate:predicate];

//Assuming you only has one entry for bookId and you want a single one
NSDictionary *userNote = [filteredUserNotes lastObject]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:25:54.737

我在记事本里写这个。抱歉可能出现的错误。

```
 NSMutableDictionary *plistdictionary = [[NSMutableDictionary alloc]initWithContentsOfFile:metaDataPath];
NSMutableArray *notes=[plistdictionary objectForKey:@"usernotes"];
int bookid = 95;
int page = 1;
for (NSDictionary *collectingObject in notes)
{
    int collectingBookid = [[collectingObject objectForKey:@"bookid"] intValue];
    int collectingPageid = [[collectingObject objectForKey:@"pagenumber"] intValue];
    if (collectingBookid == bookid && collectingPageid == page)
    {
        NSString *collectingNote = [collectingObject objectForKey:@"notes"];
        NSLog(@"Note is: %@", collectingNote);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T10:24:09.503

您使用字符串格式进行正确比较。

如果要与整数进行比较，请使用以下代码：

```
int bookid=95;
int page=1;
int c=[CollectingBookid count];
for(int i=0;i<c;i++)
{
    NSString *singleBookids=[CollectingBookid objectAtIndex:i];
    NSString *singlePage=[CollectingPages objectAtIndex:i];
    if([singleBookids intValue]==bookid)
    { 
        if([singlePage intValue]==page)
        {
            NSMutableArray *CompleteUserNotes=[[NSMutableArray alloc]init];
            CompleteUserNotes=[CollectingNotes objectAtIndex:i];
            NSLog(@"Selected Notes%@",CompleteUserNotes);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:15:32.517

您可以使用它来比较整数值

```
[singleBookids intValue]==[bookid intValue]; 
```

# php - fsockopen ssl 连接不工作

> ID：15612147
> 
> 赞同：2
> 
> 时间：2013-03-25T10:02:01.800
> 
> 标签：php, openssl, fsockopen

我正在尝试在 smtp 服务器上使用 php 函数 fsockopen 在我的本地服务器上的端口 465 上使用 ssl 和 apache。它适用于 php 命令行，但是当脚本在我的浏览器中运行时出现 SSL 错误。

php.ini

```
extension=php_openssl.dll line is not commented 
```

phpinfo 通过 Apache

```
Loaded Configuration File : D:\localhost\php-5.4.11\php.ini
openssl
OpenSSL support enabled
OpenSSL Library Version OpenSSL 0.9.8x 10 May 2012
OpenSSL Header Version  OpenSSL 0.9.8x 10 May 2012 
```

带有命令行的phpinfo

```
Loaded Configuration File => D:\localhost\php-5.4.11\php.ini
openssl
OpenSSL support => enabled
OpenSSL Library Version => OpenSSL 0.9.8x 10 May 2012
OpenSSL Header Version => OpenSSL 0.9.8x 10 May 2012 
```

我的剧本

```
$smtp = fsockopen('ssl://in.mailjet.com', 465, $errno, $errstr, 30);
$response = fgets($smtp, 4096);
if(empty($smtp)){
   echo $response;
   return false;
}
echo $response . '<br/>';
fclose($smtp); 
```

apache下的输出

```
Warning: fsockopen(): SSL: crypto enabling timeout in XXX on line 2
Warning: fsockopen(): Failed to enable crypto in XXX on line 2
Warning: fsockopen(): unable to connect to ssl://in.mailjet.com:465 (Unknown error) in XXX on line 2 
```

使用命令行输出

```
220 srv12.mailjet.com ESMTP Mailjet
<br/> 
```

平台：我在 Windows 8 64 上使用 PHP 5.4.11 / Apache 2.2.22 (Win32)

-- 编辑 -- 我已经尝试按照建议使用 TLS：

```
$smtp = fsockopen('tls://in.mailjet.com', 567, $errno, $errstr, 30); 
```

我得到

```
E_WARNING: fsockopen(): in XXX on line XXX 
```

错误消息为空白，`$errno = (int) 0`并且`$errstr = (string) ''`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:37:20.247

我将我的 Apache 版本从 2.2 更新到 2.4，它现在可以工作了。

我已经按照这个教程：http: [//lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/](http://lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/)得到新的 Apache 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T01:01:18.930

我在使用验证码的联系表单中遇到了类似的问题，出现错误

```
fsockopen(): unable to connect to ssl://mail.google.com:443 
```

这是在安装了 Joomla 的 FreeBSD 虚拟机上。

搜索，我发现[http://php.net/manual/en/function.fsockopen.php](http://php.net/manual/en/function.fsockopen.php)提到了证书验证。

安装了 FreeBSD 端口`ca_root_nss`，其中包括来自 Mozilla NSS 库中证书颁发机构的根证书的证书验证。

# c - 在C中连接多个字符串的更好方法是什么

> ID：15612148
> 
> 赞同：0
> 
> 时间：2013-03-25T10:02:10.490
> 
> 标签：c, linux, macros

我想使用宏在c中连接几个字符串，我所做的是：

```
#define PROCESS_NAME         "process_a"

#ifdef WITH_PID_FILE
#define PROCESS_PID          "-p /tmp/process_a.pid"
#else
#define PROCESS_PID          ""
#endif

#define PROCESS_CMD          PROCESS_NAME" -i %s -a %s "PROCESS_PID" &" 
```

但它看起来真的很糟糕，有没有更好的方法？

我的目标是在 snprintf 中使用 PROCESS_CMD 并执行系统调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:05:02.113

如果 的内容`macros`是固定的并且不会更改，并且您将在多个位置使用它们，那么这很好。
然而，使用宏 in`snprintf`可能会使命令的可读性降低，乍一看也不那么明显。

看看[这里](http://c-faq.com/cpp/index.html)关于宏的使用。

# c# - 转换列表 到字节 [] 数组

> ID：15612149
> 
> 赞同：0
> 
> 时间：2013-03-25T10:02:13.230
> 
> 标签：c#, serialization

我有要转换为字节 [] 数组的员工对象列表...

我使用以下代码进行转换：

```
 private byte[] ObjectToByteArray(List<Employee> obj)
        {
            if (obj == null)
                return null;
            var bf = new BinaryFormatter();
            var ms = new MemoryStream();
            bf.Serialize(ms, obj);
            return ms.ToArray();
        } 
```

但它给了我以下错误..

```
 at System.Runtime.Serialization.FormatterServices.InternalGetSerializableMembers(RuntimeType type)
   at System.Runtime.Serialization.FormatterServices.GetSerializableMembers(Type type, StreamingContext context)
   at System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo()
   at System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize(Type objectType, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter converter, SerializationBinder binder)
   at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteArray(WriteObjectInfo objectInfo, NameInfo memberNameInfo, WriteObjectInfo memberObjectInfo)
   at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Write(WriteObjectInfo objectInfo, NameInfo memberNameInfo, NameInfo typeNameInfo)
   at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(Object graph, Header[] inHeaders, __BinaryWriter serWriter, Boolean fCheck)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph, Header[] headers, Boolean fCheck)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph)
   at ExportToExcel.Controllers.HomeController.ObjectToByteArray(List`1 obj) in C:\Users\mutturajnb\Documents\Visual Studio 2010\Projects\ExportToExcel\ExportToExcel\Controllers\HomeController.cs:line 46
   at ExportToExcel.Controllers.HomeController.Index() in C:\Users\mutturajnb\Documents\Visual Studio 2010\Projects\ExportToExcel\ExportToExcel\Controllers\HomeController.cs:line 26
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
```

我需要用 装饰我的班级成员 `SerializableAttribute`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:11:16.733

至少，您需要确保将 Employee（和所有组成成员）标记为可序列化。

感谢您发布堆栈跟踪，但如果这不能解决您的问题，异常消息也会有所帮助！

# android - 如何在android中使用HttpPost将包含%符号的字符串发送到webservice？

> ID：15612152
> 
> 赞同：4
> 
> 时间：2013-03-25T10:02:27.927
> 
> 标签：android, url, http-post

我需要使用 HttpPost 将包含 % (EX: abc%xyz) 的字符串发送到 web 服务。

我使用了以下逻辑，但在 (%) 的位置出现了 IllegalCharacter 异常。

```
**updatepeople.php?pilotid=1651&firstname=Nexus&lastname=Google&nickname=abc%xyz**

       final int TIMEOUT_MILLISEC = 20000;
      HttpParams httpParams = new BasicHttpParams();
      HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
      HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
      HttpConnectionParams.setTcpNoDelay(httpParams, true);
      HttpClient httpClient = new DefaultHttpClient(httpParams);

       URLEncoder.encode(url, "UTF-8");
       HttpPost httpPost = new HttpPost(url);
  ResponseHandler<String> resHandler = new BasicResponseHandler();
  page = httpClient.execute(httpPost, resHandler);
   return page; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:13:02.643

当您在查询字符串中传递值时尝试使用此代码，而不是将此作为实体传递。

现在您的网址仅包含页面链接，没有任何参数，它将以**`updatepeople.php`**

```
HttpPost httpPost = new HttpPost(url);

List<NameValuePair> param = new ArrayList<NameValuePair>();
param.add(new BasicNameValuePair("pilotid", "1651"));
param.add(new BasicNameValuePair("firstname", "Nexus"));
param.add(new BasicNameValuePair("lastname", "Google"));
param.add(new BasicNameValuePair("nickname", "abc%xyz"));

httpPost.setEntity(new Unew UrlEncodedFormEntity(param)); 
```

现在执行它并继续

# ios - removeObserver 在一个类上，将删除所有类上相同 keypath 的所有观察者？

> ID：15612156
> 
> 赞同：1
> 
> 时间：2013-03-25T10:02:38.693
> 
> 标签：ios, objective-c

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我在很多课程上都有这段代码：

```
[[NSUserDefaults standardUserDefaults] addObserver:self
                                        forKeyPath:CAR_MODE
                                           options:NSKeyValueObservingOptionNew
                                           context:NULL]; 
```

在每个类上，我在每个 dealloc 上添加：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

我的问题是：**我必须在每个班级上删除观察者吗？**

如果我`CAR_MODE`在类实例上“观察”，`Class1`并且如果我删除on 的`Class2`观察者，我会删除“观察”吗？`CAR_MODE``Class1``Class2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:06:17.273

首先，我假设对于“类”，您的意思是“类实例”或“对象”：

> 如果我在 Class1 和 Class2 上“观察”CAR_MODE，如果我删除 Class1 上 CAR_MODE 的观察者，我是否会删除 Class2 上的“观察”？

不，每个对象都有自己的观察者，所以如果你在“ClassInstance1”上删除它，它不会在“ClassInstance2”上被删除。

# java - String 类中的 substring 方法导致内存泄漏

> ID：15612157
> 
> 赞同：16
> 
> 时间：2013-03-25T10:02:39.363
> 
> 标签：java, memory, memory-leaks

据说`substring` String类中的方法会导致内存泄漏。这是真的吗？如何？它有什么替代方案？
特别是在寻找答案，
还有哪些其他可能导致 Java 内存泄漏的事情？这将帮助我在编码时小心。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-25T10:04:31.280

在过去的 JDK 版本中，该`substring`方法的实现将构建一个新`String`对象来保存对整个 char 数组的引用，以避免复制它。因此，您可能会在不经意间保留对只有一个字符串的非常大的字符数组的引用。这是一个可能引发的错误[示例。](https://stackoverflow.com/questions/10951812/java-not-garbage-collecting-memory)

这种方法现在已经改变，这种“泄漏”不再存在。

如果您想使用旧的 JDK（比 OpenJDK 7、Update 6 更早）并且希望在 之后具有最少的字符串`substring`，请使用构造函数采用另一个字符串：

```
String s2 = new String(s1.substring(0,1)); 
```

至于你的第二个问题，关于“其他可能导致 java 内存泄漏的事情”，不可能以建设性的方式回答。在 java 标准库中，您可以轻松地保留对对象的隐藏引用的情况下，并没有很多实例。在一般情况下，请注意您构建的所有引用，最常见的问题可能出现在未清理的集合或外部资源（文件、数据库事务、本机小部件等）中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-25T10:05:07.533

该`substring()`方法不会为 a 分配新的字符数组`String`，而是简单地在*现有的*char 数组上生成`String`带有窗口的 a 。这是享元模式的实施，被认为是一种优化。

 *因此，如果我有一个巨大的`String`（char 数组）然后创建一个子字符串，即使我垃圾收集了原始字符串，原始 char 数组仍然存在（尽管您认为您有一个子字符串，例如 2 个字符）。当（例如）解析大量输入数据（可能是 XML 文件）并通过以下方式提取少量文本时，经常会遇到此问题`substring()`

使用看似多余`String(String str)`的构造函数（`String`构造函数采用`String`!）解决了这个问题，因为它分配了一个新的（可能更小）的 char 数组，允许对原始数组进行垃圾收集。

请注意，此行为自 Java 7u6 起已更改。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-25T10:04:57.553

字符串子字符串可能会导致保留比您预期更多的内存。因此，这不是内存泄漏，因为此内存可以正常恢复。

最简单的解决方案是使用最新版本的 Java 7，它不这样做。由于这是 Oracle 唯一免费支持的版本，因此无论如何您都应该考虑这样做。

因此，它在 Java 7 更新 5 中已“修复”。恕我直言，与其说是修复不如说是简化了实现。获取每个子字符串的副本需要更多的工作，并且可能会消耗更多的内存，但这确实意味着少了一件需要担心的事情。

> 有哪些其他因素会导致 Java 中的内存泄漏？

任何对象都可以被清理，因此不可能在 C/C++ 术语的意义上创建内存泄漏。你可以做的是错误地抓住物体。一个常见的例子是忘记关闭像 JDBC 资源这样的资源。这可能会导致您以意想不到的方式保留记忆。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-25T10:05:55.977

在 String 对象中，当您调用 时`substring`，该`value`属性在两个字符串之间共享。

所以，如果你从一个大字符串中得到一个子字符串并保存很长时间，那么大字符串就不会被垃圾回收。实际上，它可能会导致内存泄漏。*

# c - 从 C 中的文件一次访问中读取 N 个整数

> ID：15612158
> 
> 赞同：2
> 
> 时间：2013-03-25T10:02:41.740
> 
> 标签：c, file-io, sorting, external-sorting

我试图*在 C 中实现外部排序*。

我最初必须从文件中读取 N 个整数（取决于主内存），以便我可以对它们应用快速排序，然后继续合并过程。

我可以想到这两种方式：

1.  从文件中一个一个地读取 N 个整数并将它们放入一个数组中，然后对它们进行排序。
2.  将大量数据读入一个大字符数组，然后使用 sscanf 从中读取整数。

第一种方法显然很慢，第二种方法使用大量额外内存（但我们的主内存有限）

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:01:46.150

不要试图比你的操作系统更聪明，它可能支持一些聪明的内存管理功能，这会让你的生活更轻松，你的代码更快。

假设您使用的是符合 POSIX 的操作系统，那么您可以使用[mmap(2)](http://man7.org/linux/man-pages/man3/mmap64.3.html)。

1.  使用 mmap 将文件映射到内存中
2.  解决
3.  同步它

这样，操作系统将在空间紧张时处理交换数据，并在您需要时交换数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:01:20.737

由于`stdio`文件操作是缓冲的，因此您不必担心第一个选项，尤其是在文件不大的情况下。请记住，您不是直接对文件进行操作，而是对该文件在内存中的表示。

例如，如果您一次扫描一个数字，系统将从文件中读取更大的部分（在我的系统上它是 4096 字节，或者如果文件更短，则读取整个文件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:27:43.327

您可以使用下面的函数从文件中一一读取整数，并在旅途中继续排序和合并....

该函数将文件名和整数计数作为参数，并从文件中返回 int。

```
int read_int (const char *file_name, int count)
{
  int err = -1;
  int num = 0;

  int fd = open(filename, O_RDONLY);
  if(fd < 0)
  {
    printf("error opening file\n");
    return (fd);
  }

  err = pread(fd, &num, sizeof(int), count*sizeof(int));
  if(err < 0)
  {
    printf("End of file reached\n");
    return (err);
  }

  close(fd);
  return (num);  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:05:41.240

在阅读的同时进行排序是最好的方法。并将您的数据保存到链表而不是数组中更有效的排序

您可以使用`fscanf()`从文件中逐个整数地读取整数。并尝试在您从文件中读取整数时进行排序。我的意思是当您从文件中读取整数时，将其放入数组中正确的位置，以便在您完成读取时对数组进行排序。

以下示例逐个整数地从文件中读取，并在读取的同时使用排序插入它们。整数被保存到数组中而不是链表中

```
void sort_insert(int x, int *array, int len)
{
    int i=0, j;
    for(i=0; i<(len-1); i++)
    {
        if (x > array[i])
            continue;
        for (j=(len-1); j>i; j--)
            array[j] = array[j-1];
        break;
    }
    array[i] = x;
}

void main() {
    int x, i;
    int len = 0;
    int array[50];
    FILE *fp = fopen("myfile.txt", "r");

    while (len<50 && fscanf(fp, " %d",&x)>0)
    {
        len++;
        sort_insert(x, array, len);
    }
    for (i=0; i<len; i++)
    {
        printf("array[%d] = %d\n", i, array[i]);
    }

} 
```

# c# - 比较两个列表之间的差异

> ID：15612162
> 
> 赞同：19
> 
> 时间：2013-03-25T10:02:58.173
> 
> 标签：c#, visual-studio, list, compare

我正在尝试检查两者之间的`List<string>`区别`c#`。

例子：

```
List<string> FirstList = new List<string>();
List<string> SecondList = new List<string>(); 
```

`FirstList`填充有以下值：

```
FirstList.Add("COM1");
FirstList.Add("COM2"); 
```

`SecondList`填充有以下值：

```
SecondList.Add("COM1");
SecondList.Add("COM2");
SecondList.Add("COM3"); 
```

现在我想检查 中的某些值`SecondList`是否等于 中的值`FirstList`。

如果两个列表中存在相同的值，例如：COM1 和 COM2，则从列表中过滤它们，并将剩余的值添加到另一个列表中。

因此，如果我要创建一个新的`ThirdList`，它将仅填充“COM3”，因为其他值是重复的。

如何创建这样的支票？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-25T10:04:15.310

尝试使用[except](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx) LINQ 扩展方法，它只从第一个列表中获取项目，而这些项目不存在于第二个列表中。示例如下：

```
List<string> ThirdList =  SecondList.Except(FirstList).ToList(); 
```

您可以使用以下代码打印结果：

```
Console.WriteLine(string.Join(Environment.NewLine, ThirdList)); 
```

或者

```
Debug.WriteLine(string.Join(Environment.NewLine, ThirdList)); 
```

注意：不要忘记包括：`using System.Diagnostics;`

**印刷：**

```
COM3 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-25T10:04:30.457

您可以使用[`Enumerable.Intersect`](http://msdn.microsoft.com/en-us/library/bb460136.aspx)：

```
var inBoth = FirstList.Intersect(SecondList); 
```

或检测仅在两个列表之一中的字符串[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)：

```
var inFirstOnly = FirstList.Except(SecondList);
var inSecondOnly = SecondList.Except(FirstList); 
```

得到你的`ThirdList`：

```
List<string> ThirdList = inSecondOnly.ToList(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-25T10:04:49.610

对于这个需求之王，你可以利用`Except`函数。

```
List<string> newlist =  List1.Except(List2).ToList(); 
```

* * *

或者你可以这样做，所以下面的一个创建新的列表三，其中包含在 list1 和 list2 中不常见的项目

```
var common = List1.Intersect(List2);

var list3 = List1.Except(common ).ToList();
list3.AddRange(List2.Except(common ).ToList()); 
```

当 list1 和 list2 有不同的项目时，上面的帮助是满的

```
List<string> list1= new List<string>();
List<string> list2 = new List<string>(); 
```

FirstList 填充有以下值：

```
list1.Add("COM1");
list1.Add("COM2");
list1.Add("COM4"); 
```

SecondList 填充了以下值：

```
list2 .Add("COM1");
list2 .Add("COM2");
list2 .Add("COM3"); 
```

通过使用上面的代码`list3 contains COM4 and COM3.`

# jquery - jquery表单提交完全没有效果

> ID：15612165
> 
> 赞同：0
> 
> 时间：2013-03-25T10:03:11.777
> 
> 标签：jquery

在我的表单上使用 jquery`.submit()`完全没有效果。我什至检查了我网站上的其他 javascript，以确保该方法没有被覆盖。控制台也是空的，没有错误。我的代码：

```
<form method='POST' id='manualform'>
                <input type="submit" value="submit" name="submit" id="hiddensubmit" style="display:none;"/>
                    <div>$MANUAL$</div>
                    <div class="space20"></div>
                    <input class="required email" id="emailinput" type="text" name="email" placeholder="meno@email.com" style="font-family:arial;font-size:12px;color:white;width:250px;height:40px;background-color:black;opacity:0.5;padding-left:10px;" />
                    <div class="space20"></div>
                    <div
                        style="height: 50px; width: 300px; background-image: url('img/wow_img_pdf_icon.png'); background-repeat: no-repeat; background-position: 10px top; padding-top: 5px;">
                        <a id="action3" style="display: block; margin-left: 110px;"
                            >$STAHNOUT$</a>

                    </div>
                </form> 
```

jQuery：

```
$(document).ready(function() {
            $('#action2').scrollToFixed({
                marginTop: 20,
                fixed: function(){$('#hiddenfixed').css('display','');$('#action2').css('background-position','bottom');}   ,
                preUnfixed :function(){$('#hiddenfixed').css('display','none');$('#action2').css('background-position','top');} 
            });

            $('#action3').click(function(){     
                $('#manualform').validate({                 

                });             
                if(!($('#manualform').valid())) return false;
                else {
                    $('#hiddensubmit').attr('value','submit');
                    $('#manualform').submit();
                }                   
            });
        }); 
```

即使我尝试用 重新定义提交事件`$('#manualform').submit(function(){alert(1);});`，也完全没有效果。我真的很绝望，神经紧张，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-22T16:17:48.657

我今天遇到了这个问题，我发现这是因为提交按钮的名称属性是“提交”，与您的示例相同。

我没有在较新版本的 jQuery 中对此进行测试，但我在仍在使用 jQuery 1.4.2 的旧网站上工作时看到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:38:55.867

my workaround for this: instead of `$('#manualform').submit();` do `$('#hiddensubmit').click();`.

my guess is some other javascript might have re-declared the submit() call, but i couldn't find it. still remains a mystery to me.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:20:23.850

1.  将 validate 调用放在 click 函数之外。它只需要在页面加载时调用一次。

[http://jsfiddle.net/samliew/n4MRM/](http://jsfiddle.net/samliew/n4MRM/)

```
$('#manualform').validate();

$('#action3').click(function() {
    console.log('link clicked');
    if($('#manualform').valid()) {
        $('#hiddensubmit').attr('value', 'submit');
        console.log('form submitted');
        $('#manualform').submit();
    }
}); 
```

# android-layout - 如何在一个活动中显示多个 ListView

> ID：15612167
> 
> 赞同：0
> 
> 时间：2013-03-25T10:03:24.743
> 
> 标签：android-layout, android-listview

在我的应用程序中，我需要明智地一次显示多个（三个）列表视图。任何人都可以建议我实现这一点的最佳方法。

在此先感谢，钱德拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:22:55.437

如果您在 XML 文件中创建 ListView，您可以像这样指定 ID 属性：`android:id="@+id/listView1`，为每个`ListView`. 在您的 Java 代码中，您需要扩展 Activity 并创建三个`ListView`对象并将它们指向 XML 文件中的 ID。一旦你掌握了 ListView 的句柄，你就想`ArrayAdapter<String>`为每个`ListView`. 我更喜欢使用`ArrayList<String>`传统的`String[]`简单方式，因为对我来说，它们更容易使用。下面的工作 Java 示例适用于单个`ListView`. 将变量和对象再复制两次，另外两个名称不同`ListViews`。希望这可以帮助：

```
public class MainListActivityExample extends Activity {

    ListView listView1;
    ArrayList<String> lvContents1 = new ArrayList<String>;
    ArrayAdapter<String> lvAdapter1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Tell the method which layout file to look at
        setContentView(R.layout.listViewExample_activity);

        // Point the ListView object to the XML item
        listView1 = (ListView) findViewById(R.id.listView1);

        // Create the Adapter with the contents of the ArrayList<String>
        lvAdapter1 = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, lvContents1);

        // Attach the Adapter to the ListView
        listView1.setAdapter(lvAdapter1);

        // Add a couple of items to the contents
        lvContents1.add("Foo");
        lvContents1.add("Bar");

        // Tell the adapter that the contents have changed
        lvAdapter1.notifyDataSetChanged();
} 
```

为了添加另外两个 ListView，再创建两个`ListView`对象、两个`ArrayList<String>`对象和两个`ArrayAdapter<String>`对象，每个对象都有相应的名称，以便您知道哪个属于哪个。然后，您可以按照完全相同的步骤来初始化它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:05:06.407

也许你想研究碎片。

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# javascript - jQuery 中带有 .each() 的子对象的目标子对象

> ID：15612168
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:03:25.907
> 
> 标签：javascript, jquery, html

我正在遍历元素并获取该元素`src`的子元素的属性。我有这个 HTML 代码：

```
<noscript data-alt="super awesome">
    <img src="http://farm9.staticflickr.com/8235/8585847956_39864361e3.jpg" alt="something" />
</noscript>
<noscript data-alt="super awesome">
    <img src="http://farm9.staticflickr.com/8235/8585847956_39864361e3.jpg" alt="something" />
</noscript> 
```

和 jQuery：

```
$('body').children().each(function() {
  var noscriptTag = $(this)[0];

  var imgAlt = noscriptTag.getAttribute("data-alt");
  var img_src = noscriptTag.find('img');
  var img_regular = img_src.getAttribute("src");
  console.log(img_regular);
}); 
```

但我收到了这个错误：

```
Uncaught TypeError: Object #<HTMLElement> has no method 'find' 
```

我还尝试了各种其他组合（如`$(this).find('img');`），但没有成功。

这是演示：http: [//jsfiddle.net/LjWhw/](http://jsfiddle.net/LjWhw/)

如何定位该`img`元素的标签？谢谢！

* * *

**更新：**您不能`<noscript>`使用 JavaScript 定位内部元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:04:50.220

您正在尝试在 DOM 对象上调用 find jQuery 函数，使用`jQuery`对象而不是`DOM`javascript 对象来调用 find 。

*改变*

```
var noscriptTag = $(this)[0]; 
```

*至*

```
var noscriptTag = $(this); 
```

**编辑：**您还需要相应地更改代码`img_src.getAttribute("src");`， `img_src[0].getAttribute("src");`例如 `img_src.attr("src");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:08:22.470

我建议你这样做：

```
$('body').children().each(function() {
  var noscriptTag = $(this).find('noscript').first();
   //---------------^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^-----this way
  var imgAlt = noscriptTag.getAttribute("data-alt");
  var img_src = noscriptTag.find('img');
  var img_regular = img_src.attr("src");
  console.log(img_regular);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:10:27.920

尝试这个

[http://jsfiddle.net/UQJsy/1/](http://jsfiddle.net/UQJsy/1/)

```
$('noscript').each(function () {
    var noscriptTag = $(this);

    var imgAlt = noscriptTag.attr("data-alt");
    var img_src = noscriptTag.children('img');
    var img_regular = img_src.attr("src");
    alert(imgAlt);
}); 
```

# javascript - 如何处理“在新标签页中打开”事件？

> ID：15612169
> 
> 赞同：1
> 
> 时间：2013-03-25T10:03:26.637
> 
> 标签：javascript, browser

我正在开发一项服务，该服务在页面上呈现一系列资源。资源 - 是数据库中的一条记录，具有“url”和“visited”字段。

当用户点击资源 url 时，将通过发送 ajax PUT 请求在数据库中将其标记为“visited: true”。它运行良好，直到用户决定在新选项卡中打开 url。当我打开给定 url 的上下文菜单并选择“在新选项卡中打开”时，javascript 不会捕获此事件，并且不会更新数据库中的记录。

在这个问题[“在新标签中打开”的 Javascript 事件中，](https://stackoverflow.com/questions/12365339/javascript-event-for-open-in-new-tab)他们建议将“点击”处理程序更改为“onmousedown”。但是，这个处理程序只捕获打开上下文菜单，即使当我关闭它时，也没有选择任何东西。

是否有任何标准方法来处理“在新选项卡中打开”事件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:11:48.233

首先将资源 URL 重定向到您的站点 ( `yoursite.com/record_click?to=actual.url`)。当用户单击 URL 时，无论采用何种方式，您都可以跟踪 URL 的打开情况——甚至可能不再需要 AJAX 请求。

# android - 如何使用 Maven 运行机器人测试用例？

> ID：15612176
> 
> 赞同：1
> 
> 时间：2013-03-25T10:03:52.530
> 
> 标签：android, unit-testing, maven, robotium

我有 2 个库项目，1 个同时使用库项目的主项目和一个测试项目。我正在使用 maven 构建我的应用程序。它工作正常。我添加了类似的模块

```
 <modules>
    <module>lib1</module>
    <module>lib2</module>
    <module>main app</module>
    <module>AutomatedUnitTestFrameWork</module>

</modules> 
```

我正在使用robotium 来测试我的应用程序。当我运行mvn install 命令时，它显示状态为成功。但是测试用例没有运行，我没有得到任何测试结果。我还需要添加junit 依赖还是surefire 插件？请引导我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T05:57:36.310

是的，您需要添加 surefire 插件来检测您的 java 文件中的测试用例。所以你需要添加它的依赖。

# c# - C# 使用 SQL 方法需要关闭方法吗？

> ID：15612178
> 
> 赞同：0
> 
> 时间：2013-03-25T10:03:57.467
> 
> 标签：c#, sql, connection, using

在 C# 中为 SQL 连接使用`using`块时，这也是一种关闭方法吗？我在问，因为我需要明确使用该`con.Open()`方法。我找到了这个例子：

```
using (SqlConnection con = new SqlConnection(connectionString))
{
   con.Open(); // open method

   string queryString = "select * from db";
   SqlCommand cmd = new SqlCommand(queryString, con);
   SqlDataReader reader = cmd.ExecuteReader();
   reader.Read();

   ???         // What about a close method?
} 
```

还是该`using`块关闭连接本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:08:07.717

不，您不必`Close`调用`SqlConnection`. 当它在使用结束时被丢弃时，它会自动关闭。（-`Dispose`方法调用`Close()`）[[1]](http://msdn.microsoft.com/en-Us/library/aa326260%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:09:40.070

其他答案是正确的，但是，我想更明确一点。[MSDN](http://msdn.microsoft.com/en-us/library/sd2728ad.aspx)声明如下
：

> **Close**和**Dispose**在功能上是等效的。

因为 using`using`将调用`Dispose`一个单独的调用 to`Close`是不需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:07:08.760

您不必关闭它 -`using`就足够了。[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)说：

> 为确保连接始终关闭，请在 using 块内打开连接，如以下代码片段所示。这样做可确保在代码退出块时自动关闭连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:07:14.373

`using`翻译为：

```
SqlConnection con = new SqlConnection(connectionString)
try
{
   con.Open(); <-- open method

   string queryString = "select * from db";
   SqlCommand cmd = new SqlCommand(queryString, con);
   SqlDataReader reader = cmd.ExecuteReader();
   reader.Read();
}
finally
{
    if (con!= null)
        ((IDisposable)con).Dispose();
} 
```

在哪里`((IDisposable)con.Dispose();`关闭要关闭的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:18:50.603

当您使用“使用”关键字并在其中创建连接时。只要到达右括号时，只要存在“using”关键字的范围，连接就会打开连接会自动关闭，因为它是在范围内定义的并且范围不存在

换句话说，将其视为只能在范围内访问的局部变量。希望这会有所帮助。

# asp.net - 为数据集指定列

> ID：15612180
> 
> 赞同：0
> 
> 时间：2013-03-25T10:04:00.583
> 
> 标签：asp.net, data-binding, dataset

我不知道在标题中具体写什么。如果您认为它的标题不正确，我会更改它。这是问题所在。我正在将下拉列表绑定到数据集（表），我需要从其中需要名称、地址行 1、地址行 2、城市、电子邮件、国家/地区等字段......并且我想在标签上显示这些字段（值）。这是完整的代码：

```
 public String GetSessionObject()
    {
        string strSession = "";
        if (HttpContext.Current.Session["SessionEmail"] != null)
        {
            strSession = HttpContext.Current.Session["SessionEmail"].ToString();

        }
        return strSession;
    }

    public DataSet BindDropDownListToAUserAddress()
    {

        DataSet ds = new DataSet();
        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();
        string strQuery = "SELECT *, FirstName +' '+  LastName as FullName from AUserAddress where AUser_ID = (Select ID from AUser where Email='" + GetSessionObject() + "')";
        SqlCommand cmd = new SqlCommand(strQuery, con);
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        da.Fill(ds, "AUserAddress");
        con.Close();
        return ds;
    }

  ddlName.DataSource = objBindDDL.BindDropDownListToAUserAddress().Tables["AUserAddress"];
            ddlName.DataTextField = "FullName";
            ddlName.DataBind();
            lblDisplayAddressLine1.Text = objBindDDL.BindDropDownListToAUserAddress().Tables["AUserAddress"].Columns.("AddressLine1").ToString();-----------???? 
```

这就是我卡住的地方。我需要来自特定列的值才能显示在特定标签上。我有什么选择？请指导....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:36:04.180

我了解您的问题，因为您可以这样做

```
 // Get User's Details
   DataSet ds=BindDropDownListToAUserAddress();

   // Now from this dataset you can get the specific column like this
   if(ds!=null && ds.Tables.Count>0)
   {
     // I am assuming that your table contains single row of specific user
     string AddressLine1= ds.Tables[0].Rows[0]["AddressLine1"].ToString();
     string AddressLine2= ds.Tables[0].Rows[0]["AddressLine2"].ToString();
   } 
```

# javascript - 更改固定页面中的可变内容

> ID：15612181
> 
> 赞同：0
> 
> 时间：2013-03-25T10:04:08.387
> 
> 标签：javascript

我应该创建一个索引页面，其中某些部分（例如页眉和页脚）是固定的，但主要内容是可变的，我想我必须将我的内容设置为 iframe 并使用 javascript 更改 iframe src 但我不知道该怎么做. 我怎样才能做到这一点 ？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:14:34.927

嗨，如果适合您的项目，也许有比框架更好的选择（这是“坏”做法），您可以使用基于 jquery 的脚本作为[Pagify](http://bytemuse.com/Pagify/#usage)

或您选择的其他一些：[JQUERY ONE PAGE SCRIPTS](http://www.webresourcesdepot.com/awesome-jquery-plugins-for-creating-single-page-websites/) 这样，您将以更好的现代方式表示您的内容。但这始终取决于最终结果必须是什么。因此，如果不是答案，请提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:15:09.437

你可以用css来做

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<script src="http://code.jquery.com/jquery-1.7.1.js"></script>
<style type="text/css">
body {
    margin: 0px;
}
#wrapper {
    width: 1000px;
    margin-top: 0;
    margin-right: auto;
    margin-bottom: 0;
    margin-left: auto;
}
#wrapper #header {
    width: 1000px;
    height: 80px;
    background-color: #C90;
    position: fixed;
    float: left;
}
#wrapper #main {
    float: left;
    font-family: Arial, sans-serif;
    font-size: 12px;
    color: #333;
    padding: 5px;
    width: 990px;
    margin-top: 80px;
margin-bottom: 80px;
}
#wrapper #footer {
    background-color: #C60;
    height: 80px;
    width: 1000px;
    position: fixed;
    bottom: 0px;
    float: left;
}
</style>
<script>

</script>
</head>
<body>
    <div id="wrapper">
        <div id="header">
            Header
        </div>
        <div id="main">
          <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Duis ligula lorem, consequat eget, tristique nec, auctor quis, purus. Vivamus ut sem. Fusce aliquam nunc vitae purus. Aenean viverra malesuada libero. Fusce ac quam. Donec neque. Nunc venenatis enim nec quam. Cras faucibus, justo vel accumsan aliquam, tellus dui fringilla quam, in condimentum augue lorem non tellus. Pellentesque id arcu non sem placerat iaculis. Curabitur posuere, pede vitae lacinia accumsan, enim nibh elementum orci, ut volutpat eros sapien nec sapien. Suspendisse neque arcu, ultrices commodo, pellentesque sit amet, ultricies ut, ipsum. Mauris et eros eget erat dapibus mollis. Mauris laoreet posuere odio. Nam ipsum ligula, ullamcorper eu, fringilla at, lacinia ut, augue. Nullam nunc.</p>
          <p>.....</p>
        </div>
        <div id="footer">footer</div>
    </div>
</body>
</html> 
```

然后您可以使用 Ajax 从服务器加载数据

# xslt - xsl if 在 xsl if

> ID：15612190
> 
> 赞同：1
> 
> 时间：2013-03-25T10:04:38.937
> 
> 标签：xslt

嗨，我有以下 xml。

```
<primaryie>
<content-style font-style="bold">Administration</content-style>
</primaryie> 
```

当我应用下面的 xslt 时，它工作正常。（内容样式部分）

```
 <xsl:template match="primaryie">
    <div class="primaryie">
    <xsl:apply-templates select="content-style"/>
    <xsl:if test="contains(current()/text(), '.')">
    <xsl:variable name="numberString" select="substring(current()/text(), string-length(substring-before(current()/text(),'.'))-1)"></xsl:variable>
    <xsl:call-template name="numbersToLink">
    <xsl:with-param name="numbersString" select="$numberString"></xsl:with-param>
    </xsl:call-template>
    </xsl:if>
    </div>
    </xsl:template>
    <xsl:template name="numbersToLink">
        <xsl:param name="numbersString"></xsl:param>
        <xsl:choose>
            <xsl:when test="contains($numbersString, ',')">
                <xsl:call-template name="splitByComma">
                    <xsl:with-param name="numString" select="$numbersString"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($numbersString, '-')">
                <xsl:call-template name="splitByHyphen">
                    <xsl:with-param name="numString" select="$numbersString"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="5 >= string-length(normalize-space($numbersString))">
                <xsl:variable name="x">
                    <xsl:value-of select="substring-after($numbersString,'.')"></xsl:value-of>
                </xsl:variable>
                <xsl:variable name="y">
                    <xsl:value-of select="normalize-space(substring-before($numbersString,'.'))"></xsl:value-of>
                </xsl:variable> 

                <xsl:variable name="conca">
                    <xsl:value-of select="concat('er:#BVI_CH_0',$y,'/P',$y,'-',$x)"/>
                </xsl:variable>    
                <a href="{$conca}">
                    <xsl:value-of select="$numbersString"/>
                </a>
            </xsl:when>
            <xsl:otherwise>

            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
 <xsl:template name="splitByComma">
        <xsl:param name="numString"></xsl:param>
        <xsl:choose>
            <xsl:when test="contains(substring-before($numString,','), '-')">
                <xsl:call-template name="splitByHyphen">
                    <xsl:with-param name="numString" select="$numString"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($numString,',')">
<xsl:variable name="abc">
<xsl:value-of select="normalize-space(substring-before($numString,'.'))"/>
</xsl:variable>
<xsl:variable name="def">
<xsl:value-of select="substring-before(substring-after($numString,'.'),',') "/>
</xsl:variable>
<xsl:variable name="conct">
<xsl:value-of select="concat('er:#BVI_CH_0',$abc,'/P',$abc,'-',$def)"/>
<!--"concat(concat('er:#BVI_CH_0',,'/P',$y,'-',$x)"/-->
</xsl:variable>
                <a href="{$conct}">
                    <xsl:value-of select="substring-before($numString,',')"/>
                </a>
                <xsl:text>, </xsl:text>
                <xsl:if test="contains(substring-after($numString,','), '.')">
                    <xsl:call-template name="numbersToLink">
                        <xsl:with-param name="numbersString" select="normalize-space(substring-after($numString,','))"/>
                    </xsl:call-template>
                </xsl:if>
            </xsl:when>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="splitByHyphen">
        <xsl:param name="numString"></xsl:param>
        <xsl:choose>
            <xsl:when test="contains($numString,'-')">
<xsl:variable name="abc">
<xsl:value-of select="normalize-space(substring-before($numString,'.'))"/>
</xsl:variable>
<xsl:variable name="def">
<xsl:value-of select="substring-before(substring-after($numString,'.'),'-') "/>
</xsl:variable>
<xsl:variable name="conct">
<xsl:value-of select="concat('er:#BVI_CH_0',$abc,'/P',$abc,'-',$def)"/>
<!--"concat(concat('er:#BVI_CH_0',,'/P',$y,'-',$x)"/-->
</xsl:variable>
                <a href="{$conct}">
                    <!--<xsl:value-of select="substring-before($numString,'-')"/>-->
                    <xsl:value-of select="substring-before($numString,'-')"/>
                </a>
                <xsl:text>&#x2013;</xsl:text>
                <xsl:if test="contains(substring-after($numString,'-'), '.')">
                    <xsl:call-template name="numbersToLink">
                        <xsl:with-param name="numbersString" select="normalize-space(substring-after($numString,'-'))"/>
                    </xsl:call-template>
                </xsl:if>
            </xsl:when>
        </xsl:choose>
    </xsl:template> 
```

但我在与以下 xml 状态相同的文档中有一个特殊情况。

```
<primaryie>
 <content-style font-style="bold">VIRRGIN system</content-style> 7.204, 7.205
</primaryie> 
```

在这里，当我应用上述模板时，它正在使用内容样式，但我希望它也适用于 numberstolink 模板。

输出如下。

当前的：

```
 <div class="primaryie"><span class="font-style-bold">Virgin Islands Special Trust Act (VISTA) 9.077</span></div> 
```

解释：

```
 <div class="primaryie"><span class="font-style-bold">Virgin Islands Special Trust Act (VISTA)<a href="er:#BVI_CH_09/P9-077"> 9.077</a></span></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T18:07:25.830

请在您的代码中更改以下部分

```
<xsl:template match="primaryie">
    <div class="primaryie">
        <xsl:apply-templates select="content-style"/>
        <xsl:if test="contains(current(), '.')">
            <xsl:variable name="numberString" select="substring(current(), string-length(substring-before(current(),'.'))-1)"></xsl:variable>
            <xsl:call-template name="numbersToLink">
                <xsl:with-param name="numbersString" select="$numberString"></xsl:with-param>
            </xsl:call-template>
        </xsl:if>
    </div>
</xsl:template> 
```

仅使用 Current() 而不是 Current()/Text()

给 XML 的输出是

```
<div class="primaryie">VIRRGIN system<a href="er:#BVI_CH_07/P7-204"> 7.204</a>, <a href="er:#BVI_CH_07/P7-205">7.205</a></div> 
```

# eclipse - Eclipse 首选项设置、优先级和更改默认值

> ID：15612194
> 
> 赞同：2
> 
> 时间：2013-03-25T10:04:50.007
> 
> 标签：eclipse, eclipse-plugin

我正在创建一个带有一些预安装插件的 Eclipseinstallation，并且我正在尝试将首选项设置为一些默认值。首选项在 plugin_customization.ini 文件中设置，Eclipse 启动

```
-pluginCustomization
plugins/<my_plugin>/plugin_customization.ini 
```

我已验证 ini 文件中的某些值确实有效，但未设置某个设置。这很可能是因为该设置不是原始首选项的一部分，而是由插件添加的。大概这个插件然后设置了一个默认值，这个默认值是不正确的，我需要覆盖它。

所以这就引出了问题1，在Eclipse中设置首选项的优先级是什么？我的猜测是；

1.  命令行参数 -pluginCustomization
2.  插件在代码中设置首选项
3.  保存的工作区设置

还有更多的选择吗？

问题2; 如果我需要确保设置了某个首选项值并且不会被另一个插件覆盖，我的选择是什么？

# jquery - jQuery .on 多个事件和选择器

> ID：15612196
> 
> 赞同：3
> 
> 时间：2013-03-25T10:04:57.363
> 
> 标签：jquery, jquery-on

目前，我有一个缓存变量 ，`$this`我正在应用它`.on`来响应各种可能类型的行为触发器。

```
$this.on('click','.trigger a',rowTrigger);
$this.on('click','.actions nav a',rowAction); 
```

在[jQuery .on 文档](http://api.jquery.com/on/ "jQuery .on 文档")中，它没有提到是否有办法将上述两者组合成一个调用。例如，这样的事情可能很好：

```
$this.onAny({
    click: [
        {'.trigger a':rowTrigger},
        {'.actions nav a':rowAction}
    ]
}); 
```

有没有办法实现这种声明（例如一个现有的插件来扩展`.on`）？

**更新**

用例（在当前代码中，在一个不错的解决方案之前）：

```
// Plugin 1:
function addTriggers(){
  $this.find('td:last').append('<span class="trigger"><a href="#"></a></span>');
  return {selector:'.trigger a', event:'click', target: $this, callback: rowTrigger};
}

// Plugin 2:
function addInlineNavigation(){
  $navCode = '...'
  $this.find('td:last').append('<div class="actions">'+$navCode.html()+'</div>');
  return {selector:'.actions nav a', event:'click', target: $this, callback: rowAction};
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T10:11:37.780

> 有没有办法实现这种声明（例如一个现有的插件来扩展`.on`）？

我不知道一个。写起来几乎是微不足道的。不过，与链接相比，我没有看到它有太多优势：

```
$this.on('click','.trigger a',rowTrigger)
     .on('click','.actions nav a',rowAction); 
```

但同样，插件并不复杂。这是未经测试的草稿：

```
jQuery.fn.onAny = function(options) {
    var eventName, eventSpec, eventEntry, selector, i;

    for (eventName in options) {
        eventSpec = options[eventName];
        if (jQuery.isArray(eventSpec)) {
            // Your example, where each event name has an array of objects
            // keyed by selector, where the value is the handler
            for (i = 0; i < eventSpec.length; ++i) {
                eventEntry = eventSpec[i];
                for (selector in eventEntry) {
                    this.on(eventName, selector, eventEntry[selector]);
                }
            }
        }
        else {
            // Assuming just a straight handler here
            this.on(eventName, eventSpec);
        }
    }

    return this;
}; 
```

# python - 如何在 python 中创建跨模块、即时变量名？

> ID：15612203
> 
> 赞同：0
> 
> 时间：2013-03-25T10:05:12.443
> 
> 标签：python, class, interface, module, on-the-fly

我正在尝试做的是创建一个带有类的模块；和一个函数，它是该类的接口；以及此函数中的动态变量名，它指向该类的实例。这个函数和类本身应该在一个单独的模块中，它们的用法应该在不同的python文件中。

我认为，当您查看我的代码时，更容易理解我想要做什么：

这是`first.py`：

```
class FirstClass:
    def setID(self, _id):
        self.id = _id
    def func(self):
        pass

# An 'interface' for FirstClass
def fst(ID):
    globals()['%s' % ID] = FirstClass(ID)
    return globals()['%s' % ID] 
```

现在，如果我直接调用`fst('some_text')`，`first.py`结果几乎是我梦寐以求的，因为以后，任何时候我写`some_text.func()`，它都会调用`func()`，因为`some_text`它指向`FirstClass`.

但是，当`second.py`是这样的时候：

```
from first import fst

fst('sample_name')
sample_name.func() 
```

那么python的答案将是这样的：

```
NameError: name 'sample_name' is not defined. 
```

这有点合理..所以我的问题是：是否有“更漂亮”的方法或完全不同的方法来做到这一点？还是我必须在我的代码中更改一些小东西才能完成这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:08:47.530

不要在函数中将其设置为全局。相反，只需从函数返回新实例并将全局设置为该返回值：

```
def fst(ID):
    return FirstClass(ID) 
```

然后在`second.py`：

```
sample_name = fst('sample_name') 
```

如果在函数内部，则声明`sample_name`一个`global`.

该`globals()`方法只返回您调用它的模块的全局变量。它永远不会返回任何调用函数的全局变量。如果你觉得你需要访问这些全局变量，重新考虑你的代码，你*很少*，如果有的话，需要改变任何调用你的函数的全局变量。

如果您绝对*确定*需要访问调用者全局变量，则需要开始使用堆栈帧进行黑客攻击：

```
# retrieve caller globals
import sys
caller_globals = sys._getframe(1).f_globals 
```

但是，作为[`sys._getframe()`](http://docs.python.org/2/library/sys.html)国家的文件：

> **CPython 实现细节**：此函数应仅用于内部和专用目的。它不保证在 Python 的所有实现中都存在。

# django - 如何使用 Chef 在一个 git 存储库中部署两个 django 项目？

> ID：15612205
> 
> 赞同：0
> 
> 时间：2013-03-25T10:05:17.393
> 
> 标签：django, chef-infra, gunicorn, cookbook

[我有一个带有两个Django](https://www.djangoproject.com/) 1.5 项目的 git 存储库：一个用于网站，另一个用于 REST api。git 存储库如下所示：

```
api_project/
www_project/
logs/
manage.py
my_app_1/
my_app_2/ 
```

该`manage.py`文件默认为`www_project.settings`. 要启动`api_project`，我运行：

```
DJANGO_SETTINGS_MODULE=api_project.settings ./manage.py shell 
```

我想我可以设置 3 个 git 存储库，一个用于通用应用程序，一个用于 api 项目，一个用于 www 项目，使用 git 子模块等等，但这似乎有点矫枉过正。到目前为止，一切正常。

但现在我正在尝试使用[Chef](http://www.opscode.com/chef/)部署此设置。我想使用[application](http://community.opscode.com/cookbooks/application)和[application_python](http://community.opscode.com/cookbooks/application_python)食谱，并使用[gunicorn](http://gunicorn.org/)运行我的 django 项目，但这些食谱似乎一次只部署一个项目。

这是我的 www_project 厨师食谱的样子：

```
application "django_app" do
    path "/var/django"
    owner "django"
    group "django"
    repository "git.example.com:blabla"
    revision "master"
    migrate true
    packages ["libevent-dev", "libpq5" , "git"]
      # libevent-dev for gevent (for gunicorn), libpq5 for postgresql
    environment "DJANGO_SETTINGS_MODULE" => "www_project.settings"
      # for syncdb and migrate

    django do
        local_settings_file "www_project/settings.py"
        settings_template "settings.py.erb"
        purge_before_symlink ["logs"]
        symlinks "logs" => "logs"
        collectstatic true
        database do
            database "blabla"
            engine "postgresql_psycopg2"
            username "django"
            password "super!password"
        end
        database_master_role "blabla_postgresql_master"
        migration_command "/var/django/shared/env/bin/python manage.py" +
           " syncdb --noinput && /var/django/shared/env/bin/python" +
           " manage.py migrate"
    end

    gunicorn do
        app_module "www_project.wsgi:application"
        preload_app true
        worker_class "egg:gunicorn#gevent"
        workers node['cpu']['total'].to_i * 2 + 1
        port 8081
        proc_name "blabla_www"
    end
end 
```

我只想知道如何为 api_project 添加另一个 gunicorn 资源。有没有人遇到过类似的问题？您是否建议修补我的 application_python 食谱的本地副本以允许多个项目在一个 git 存储库中？或者我应该经历建立 3 个独立的 git 存储库的痛苦吗？或者任何其他解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:06:46.113

您可以将代码分成两个单独的“应用程序”块，因为其中定义的所有资源都是子资源，实际执行是在“应用程序”级别完成的。

另一种解决方案是分叉/修补 application_python 提供程序 django 和 gunicorn 以允许更复杂的行为，例如允许部署多个应用程序。尽管这么多用户可能不需要付出所有的努力和复杂性。

# javascript - 无法在 Webdriverjs 中使用高级用户交互

> ID：15612207
> 
> 赞同：3
> 
> 时间：2013-03-25T10:05:23.237
> 
> 标签：javascript, node.js, webdriver

我正在尝试使用[webdriverjs](https://code.google.com/p/selenium/wiki/WebDriverJs)单击 Flash 动画。

我尝试使用高级用户交互，但似乎无法单击我想要的位置。甚至当我尝试单击普通的 Web 元素（例如按钮）时也不会。

理想情况下，我想做如下的事情：

```
element = driver.findElement(webdriver.By.Id("elementID"));

driver.actions()
.mouseMove(element)
.mouseClick()
.perform(); 
```

-或者-

```
driver.actions()
.click(element)
.perform(); 
```

但是，我从独立服务器得到的反馈总是 [someaction: nothing] 的形式。

我尝试通过'nativeEvents'在浏览器功能中启用firefox本机事件：true，但没有帮助。

否则，我可以使用 webdriverjs 通常单击页面上的元素。（闪光灯除外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T15:50:00.020

Selenium 无法与 Flash 对象交互。

如果你想这样做，你需要修改 flash 对象的源代码，以提供一些 JavaScript 可以访问的测试钩子，然后使用类似的东西：

*   [https://code.google.com/p/flex-ui-selenium/](https://code.google.com/p/flex-ui-selenium/)
*   [https://code.google.com/p/flash-selenium/](https://code.google.com/p/flash-selenium/)

# c# - 循环遍历模型属性并在代码文件中获取值

> ID：15612210
> 
> 赞同：3
> 
> 时间：2013-03-25T10:05:35.587
> 
> 标签：c#, asp.net-mvc-3, loops, model

在我的应用程序中，我创建了一个方法来对我的数据进行排序并创建一个传递给我的数据层的列表。我已经重载它以接受参数对象 [] 和模型。我正在编写接受模型的重载方法，但循环遍历它时遇到问题。

**这是我的控制器方法**

```
 [HttpPost]
        public ActionResult CreateUser(vw_UserManager_Model model)
        {
            // Return Model to view with error message when not valid.
            if (!ModelState.IsValid == true)
            {
                return View(model);
            }
            else
            {
                List<string> myParams = DataCleaner.OrganizeParams(model);
            } 
```

**这是我在将数据传递到数据层之前组织数据的方法**

```
public static List<string> OrganizeParams(vw_UserManager_Model model)
        {
            List<string> myParams = new List<string>();

            var modelProperties = model.GetType().GetProperties();

            foreach (var property in model.GetType().GetProperties())
            {
                switch (property.PropertyType.Name)
                {
                    case "String":
                        myParams.Add("System.String" + ":" + property.GetValue(property.PropertyType.Name, null));
                        break;
                    case "Guid":
                        myParams.Add("System.Guid" + ":" + property.GetValue(property.PropertyType.Name, null));
                        break;
                    case "Int32":
                        myParams.Add("System.Int32" + ":" + property.GetValue(property.PropertyType.Name, null));
                        break;
                    case "Boolean":
                        myParams.Add("System.Boolean" + ":" + property.GetValue(property.PropertyType.Name, null));
                        break;
                }
            }
            return myParams;
        } 
```

我在 Switch/Case 逻辑中所做的实际上不起作用，因为我在断点中查看了我的对象并且看不到我需要在代码中编写什么。我知道我也可以使用 IEnumerable，但我不太确定我想怎么做。

有什么建议么？

**概括**

如何在MVC3的代码文件中循环模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T07:25:39.640

这对我有用，但看起来你很接近:)

```
public static List<string> OrganizeParams(vw_UserManager_Model model)
{
    List<string> myParams = new List<string>();

    foreach (var property in model.GetType().GetProperties())
    {
        switch (property.PropertyType.GenericTypeArguments.FirstOrDefault().Name.ToString())
        {
            case "String":
                myParams.Add("System.String" + ":" + property.GetValue(model, null));
                break;
            case "Guid":
                myParams.Add("System.Guid" + ":" + property.GetValue(model, null));
                break;
            case "Int32":
                myParams.Add("System.Int32" + ":" + property.GetValue(model, null));
                break;
            case "Boolean":
                myParams.Add("System.Boolean" + ":" + property.GetValue(model, null));
                break;
        }
    }
    return myParams;
} 
```

# javascript - 如何使用 jsp 或 jquery 打开弹出窗口？

> ID：15612213
> 
> 赞同：7
> 
> 时间：2013-03-25T10:05:51.240
> 
> 标签：javascript, jquery, jsp

在我的程序中有一个超链接..

当我们单击 hiperlink 时，将打开一个小弹出窗口并询问姓名，并使用表单发送此姓名。

那么如何使用 jsp 或 javascript 或 jquery 创建弹出窗口呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-25T10:11:10.027

您可以为此使用 window.open

```
window.open("page url",null,
"height=200,width=400,status=yes,toolbar=no,menubar=no,location=no"); 
```

看看这个链接.. [window.open](http://msdn.microsoft.com/en-in/library/ie/ms536651%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T10:10:14.240

以下 JavaScript 将打开一个新的浏览器窗口，宽 450 像素，高 300 像素，带有滚动条：

```
window.open("http://myurl", "_blank", "scrollbars=1,resizable=1,height=300,width=450"); 
```

您可以将其添加到这样的链接中：

```
<a href='#' onclick='javascript:window.open("http://myurl", "_blank", "scrollbars=1,resizable=1,height=300,width=450");' title='Pop Up'>Pop Up</a> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-25T10:10:21.383

```
<a href="javaScript:{openPopUp();}"></a>
<form action="actionName">
<div id="divId" style="display:none;">
UsreName:<input type="text" name="userName"/>
</div>
</form>

function openPopUp()
{
  $('#divId').css('display','block');
$('#divId').dialog();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:09:11.163

尝试这个：

**脚本：**

```
function winOpen()
{
    window.open("yourpage.jsp");
} 
```

**HTML：**

```
<a href="javascript:;" onclick="winOpen()">Pop Up</a> 
```

阅读[https://developer.mozilla.org/en/docs/DOM/window.open](https://developer.mozilla.org/en/docs/DOM/window.open)了解`window.open`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:10:05.967

可以在jquery中完成-

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
    $( "#dialog" ).dialog();
    });
    </script>

    <div id="dialog" title="Basic dialog">
    //your form layout
    </div> 
```

# sql - 我可以在 oracle 中组合或连接列值，如下所示

> ID：15612218
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:06:03.853
> 
> 标签：sql, oracle

基础数据：

```
 DEPTNO ENAME
---------- ----------
        20 SMITH
        30 ALLEN
        30 WARD
        20 JONES
        30 MARTIN
        30 BLAKE
        10 CLARK
        20 SCOTT
        10 KING
        30 TURNER
        20 ADAMS
        30 JAMES
        20 FORD
        10 MILLER 
```

期望的输出：

```
 DEPTNO EMPLOYEES
---------- --------------------------------------------------
        10 CLARK,KING,MILLER
        20 SMITH,FORD,ADAMS,SCOTT,JONES
        30 ALLEN,BLAKE,MARTIN,TURNER,JAMES,WARD 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:11:25.873

您没有指定 Oracle 的版本，但在 Oracle 11g 中，您可以使用[`LISTAGG`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)：

```
select DEPTNO,
  listagg(ENAME, ',') within group (order by ENAME) as ename
from yourtable
group by DEPTNO 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/9b460/2)

在 Oracle 10g 中，您可以使用[`wm_concat()`](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)

```
select DEPTNO,
  wm_concat(ENAME) as ename
from yourtable
group by DEPTNO 
```

您还应该能够使用以下内容：

```
SELECT LRRID,
       LTRIM(MAX(SYS_CONNECT_BY_PATH(CDSID,','))
       KEEP (DENSE_RANK LAST ORDER BY curr),',') AS elements
FROM   
(
  SELECT LRRID,
    CDSID,
    ROW_NUMBER() OVER (PARTITION BY LRRID ORDER BY CDSID) AS curr,
    ROW_NUMBER() OVER (PARTITION BY LRRID ORDER BY CDSID) -1 AS prev
  FROM WLRR_LRR_NOTIFY_TABLE
)
GROUP BY LRRID
CONNECT BY prev = PRIOR curr AND LRRID = PRIOR LRRID
START WITH curr = 1; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/3467d/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:15:25.297

emmmm试试这个。。

```
SELECT DEPTNO, LISTAGG(ENAME, ' ') WITHIN GROUP (ORDER BY ENAME) AS ENAME
FROM   <TABLE-NAME>
GROUP BY DEPTNO; 
```

# solr - 在多值字段solr4.0中存储键值对

> ID：15612220
> 
> 赞同：2
> 
> 时间：2013-03-25T10:06:11.650
> 
> 标签：solr, solr4

我正在使用 solr4.0。我想将属性的键值对存储在多值字段中。

示例：我有一些文档（产品）将属性作为一个字段，并且我将属性作为单独的文档进行了索引，以支持自动建议。现在在一些汽车建议中，我还必须显示产品的方面数。为此，我使用 solr joins 4.0 并对属性进行刻面。在这里，我想获取属性的名称和 ID。我怎么能做到这一点？

查询如下所示

```
localhost:8980/solr/searchapp/select?q=%7B!join+from=attr_id+to=prod_attr_id%7Dterms:red&wt=json&indent=true&facet.field=prod_attr_id&facet=true&rows=1000&fl=product_name,product_id 
```

# hibernate - 无法获取 JoinedColumn 属性的数据

> ID：15612221
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:06:14.637
> 
> 标签：hibernate

在连接列属性上获取数据时出现异常：

```
My Java Code:

@Entity
public class CustomizedProfile {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public Integer id;

        @ManyToOne(fetch=FetchType.EAGER)
    public ApplicationProfile applicationProfile;

@OneToMany
         @JoinColumn(name="custprofileNumcomm_id") 
         public List<UIAnyFieldTemplate> numCommUIList; 

    @OneToMany
        @JoinColumn(name="custprofilePOS_id") 
    public List<UIAnyFieldTemplate> posUIList;

    @OneToOne
    public Customer customer;

    public Integer getId() {
        return id;
    }

    public ApplicationProfile getApplicationProfile() {
        return applicationProfile;
    }

    public void setApplicationProfile(ApplicationProfile applicationProfile) {
        this.applicationProfile = applicationProfile;
    }

    public Customer getCustomer() {
        return customer;
    }
    public void setCustomer(Customer customer) {
        this.customer = customer;
    }

    public List<UIAnyFieldTemplate> getNumCommUIList() {
        return numCommUIList;
    }

    public void setNumCommUIList(List<UIAnyFieldTemplate> numCommUIList) {
        this.numCommUIList = numCommUIList;
    }

    public List<UIAnyFieldTemplate> getPosUIList() {
        return posUIList;
    }

    public void setPosUIList(List<UIAnyFieldTemplate> posUIList) {
        this.posUIList = posUIList;
    }

}

UIAnyFieldTemplate.Java
=========================

@Entity
public class UIAnyFieldTemplate implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    }

My DAO Method:
===============

public List<UIAnyFieldTemplate> getDynamicMIDUIAnyFieldList(
            Integer customerId, String appName) throws AtlasDAOException {
        Session session = hibernateUtil.getSession();
        List<UIAnyFieldTemplate> uiAnyFieldTemplates = null;
        Query query1 = session
                .createQuery(" select cp.numCommUIList from CustomizedProfile cp WHERE cp.applicationProfile.appName="
                        + "'"
                        + appName
                        + "'"
                        + " and cp.customer.customerId="
                        + customerId +" and cp.custprofileNumcomm_id=cp.id");
        uiAnyFieldTemplates = (List<UIAnyFieldTemplate>) query1.list();
        return uiAnyFieldTemplates;
    } 
```

* * *

```
org.hibernate.QueryException: could not resolve property: custprofilenumcomm_id of: com.ingenico.atlas.axis.profile.service.UIAnyFieldTemplate [ select cp.numCommUIList from com.ingenico.atlas.axis.profile.service.CustomizedProfile cp, com.ingenico.atlas.axis.profile.service.UIAnyFieldTemplate as ut WHERE cp.applicationProfile.appName='EMV FR' and cp.customer.customerId=10022 and ut.custprofilenumcomm_id=cp.id]
    at org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:81)
    at org.hibernate.persister.entity.AbstractPropertyMapping.toType(AbstractPropertyMapping.java:75)
    at org.hibernate.persister.entity.AbstractEntityPersister.toType(AbstractEntityPersister.java:1451)
    at org.hibernate.hql.ast.tree.FromElementType.getPropertyType(FromElementType.java:312)
    at org.hibernate.hql.ast.tree.FromElement.getPropertyType(FromElement.java:487)
    at org.hibernate.hql.ast.tree.DotNode.getDataType(DotNode.java:611)
    at org.hibernate.hql.ast.tree.DotNode.prepareLhs(DotNode.java:263)
    at org.hibernate.hql.ast.tree.DotNode.resolve(DotNode.java:210)
    at org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:117)
    at org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:113)
    at org.hibernate.hql.ast.HqlSqlWalker.resolve(HqlSqlWalker.java:867)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.expr(HqlSqlBaseWalker.java:1323)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.exprOrSubquery(HqlSqlBaseWalker.java:4385)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.java:3858)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1909)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1837)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.whereClause(HqlSqlBaseWalker.java:824)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:610)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:294)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:237)
    at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:254)
    at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:185)
    at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:98)
    at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:156)
    at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:135)
    at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1760)
    at com.ingenico.atlas.dao.cardpayment.UIAnyFiledDAO.getDynamicMIDUIAnyFieldList(UIAnyFiledDAO.java:90)
    at com.ingenico.atlas.dao.cardpayment.UIAnyFiledDAO$$FastClassByCGLIB$$d416f474.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at com.ingenico.atlas.dao.cardpayment.UIAnyFiledDAO$$EnhancerByCGLIB$$8967d76f.getDynamicMIDUIAnyFieldList(<generated>)
    at com.ingenico.atlas.dao.cardpayment.UIAnyFieldDAOTest.getNumCommUIAnyFieldListTest(UIAnyFieldDAOTest.java:112)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:717)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.endTransaction(TransactionalTestExecutionListener.java:522)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener.endTransaction(TransactionalTestExecutionListener.java:293)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener.afterTestMethod(TransactionalTestExecutionListener.java:186)
    at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:406)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:91)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:13:11.840

CustprofileNumcomm_id 不是 CustomizedProfile 的属性，所以不能写 cp.CustprofileNumcomm_id。

它是另一个实体的列。

您必须为该列描述子实体的属性才能使用它。

# grails - 无法对 hasMany 关系进行排序

> ID：15612222
> 
> 赞同：0
> 
> 时间：2013-03-25T10:06:17.147
> 
> 标签：grails, groovy

我正在尝试对对象列表进行排序，我在网上搜索，但我不明白为什么它不起作用。

这是我的域类，其中包含我要排序的列表：

```
class MyClass {
    Integer bar
    static hasMany = [**foos : Foo**]
} 
```

对象 Foo 看起来像这样：

```
class Foo {
    LocalDate day
    String name
} 
```

我想按日期对 foos 进行排序。所以我试着写：

```
MyClass myClass = new MyClass()
//foos contains 10 days.
myClass.foos = myClass.foos.sort { it.day } 
```

我不明白错误在哪里以及为什么我的列表没有正确排序。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:04:57.927

`hasMany``Set`默认情况下由 a 支持。尝试将其更改为 a `List`，例如：

```
class MyClass {
    Integer bar
    List foos
    static hasMany = [foos : Foo]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T10:32:53.233

默认情况下，您有两种选择如何对对象进行排序。两者都在可排序类中：

1.  （对于简单的排序算法）：

    ```
    static mapping = {
        sort 'dateCreated':'desc'
    } 
    ```

2.  （对于复杂的排序算法，您使用一个函数）：

    ```
    class Target implements Comparable {

    ...

        int compareTo(o) {

            if(o instanceof Target) {
                Target t = (Target) o
                // sort multidimensional
                return (this.target_definition_order <=> t.target_definition_order ?:
                this.target_order <=> t.target_order )
            } else
                return 0
        }

    } 
    ```

您的问题可能是特殊类的排序算法`LocalDate`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:37:15.187

如果您使用 Date 对象而不是 LocalDate，则使用您提供的代码进行排序。

```
 use(TimeCategory) {
            MyClass myClass = new MyClass(bar: 1)
            Date today = new Date()
            def foo = new Foo(name: "a", day: today)
            myClass.addToFoos(foo)
            myClass.save(flush: true)
            foo = new Foo(name: "a", day: today+1.second)
            myClass.addToFoos(foo)
            foo = new Foo(name: "a", day: today+2.second)
            myClass.addToFoos(foo)
            foo = new Foo(name: "a", day: today+3.second)
            myClass.addToFoos(foo)
            foo = new Foo(name: "a", day: today+4.second)
            myClass.save(flush: true)
        } 
```

使用 myClass.foos.sort{it.date} 或 myClass.foos.sort{it.date}.reverse() 会给出正确的结果。

# excel - 如何在excel中将时间从HH：MM：SS格式化为HHMM？

> ID：15612235
> 
> 赞同：8
> 
> 时间：2013-03-25T10:06:40.060
> 
> 标签：excel, excel-formula

我有一个 Excel 表，其中一列是交易时间，其格式是 HH:MM:SS。但我需要 HHMM 格式的交易时间，以便我可以将该 Excel 表上传到我的应用程序中。到目前为止，我正在手动格式化每一行，有什么方法可以一次将所需的格式应用于整列？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T10:22:05.473

**如果只是为了你的眼睛：**

选择整列，右键单击选择中的某处，转到单元格格式，选项卡编号，类别自定义。

类型 HHmm

按确定

完毕。

**如果您需要将其作为实际值：**

创建一个包含以下公式的列`=TEXT(<targetcell>;"HHmm")`

请注意，是否需要 , 或 ; 取决于语言。在那个公式中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:25:05.623

你有两个选择：

*   自定义格式字段。
*   在另一个单元格中使用函数。假设，单元格`A1`包含文本`15:48:58`。您在另一个单元格（例如 B1）中使用公式作为`=TEXT(HOUR(A1),"00")&TEXT(MINUTE(A1),"00")`. 这将输出作为`1548`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-06T15:00:27.470

例如，输入单元`.633`格`B2`。当我们转换`0.633`为时间意味着我们转换`0.633`天。我们将 24 小时视为 1 天。

按照步骤：

1.  选择 B2 单元格并右键单击。
2.  从快捷菜单中，转到格式化单元格。出现单元格格式对话框。
3.  在对话框中。单击类别列表下的自定义。`hh:mm:ss`从正确的列表中查找。
4.  `hhmmss`现在在“类型：”下方的右侧编辑它。

您可以从 msofficeworld 阅读本教程：[在 Excel 中格式化时间](http://msofficeworld.com/format-time-in-excel/)

# iphone - 无法在 UIPageViewController 中实现 UITextview

> ID：15612240
> 
> 赞同：5
> 
> 时间：2013-03-25T10:06:55.933
> 
> 标签：iphone, ios, objective-c, ipad, uipageviewcontroller

我有一个奇怪的问题，我有一个页面应用程序，其中一个页面我使用了一个`UITextView`，但是当我点击`UITextView`它时它会移动到下一页，不能在上面写任何东西。

我用的时候没有问题`UIPageViewControllerTransitionStylePageCurl`。唯一的问题是`UIPageViewControllerTransitionStyleScroll`. 有人知道解决方案吗？请帮我

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-07T21:01:00.803

*我自己也遇到了同样的问题，这似乎是UITextField*或*UITextView*成为*UIScrollView*内的第一响应者时发生的一些默认行为的结果。

**防止*UITextView*滚动*UIPageViewController*的解决方案是首先将其嵌入到*UIScrollView*中，而不是直接嵌入到页面的主视图中。**

这是因为当*UITextView*成为第一响应者时，它将在视图层次结构中搜索*UIScrollView*类型的最早的超级视图，并且它将滚动该滚动视图以适应覆盖屏幕的键盘。如果您不将*UITextView*包装在*UIScrollView*中，则您的*UIPageViewController*的内部*UIScrollView*将被选择并滚动，从而产生不良行为。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-25T10:19:13.763

你可以参考下面的链接。。

UIPageViewControllerTransitionStylePageCurl - [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

UIPageViewControllerTransitionStyleScroll - [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

# java - 需要了解公共和私人

> ID：15612241
> 
> 赞同：-2
> 
> 时间：2013-03-25T10:06:58.117
> 
> 标签：java, private, public

我已经粘贴了代码，现在我的查询是在名为“accesssp”的第一类中，我添加了对象，然后编写了 SOP，那么为什么我不能将输出作为 B 的值？b 的访问是私有的，但我在同一个类中获取值

我已经完成了我不明白的 BOLD 部分。

```
class accesssp  {

public int a=56;
private int b=5566;
public int c=58766;

System.out.println(b);

}

class accesssp1 extends accesssp{

public void accessd()   {

    System.out.println(a);
    System.out.println(c);

}

}
public class Access_Spf {

public static void main(String[] args) {

    accesssp1 sp1 = new accesssp1();
    sp1.accessd();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:08:26.083

好吧，它的 cuz system.out.println 语句应该在方法/构造函数体内，就像您在第 2 和第 3 种情况中所做的那样。这是一个编译器错误。

```
class accesssp  {

public int a=56;
private int b=5566;
public int c=58766;

System.out.println(b);//should be inside a method/cons body

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:16:10.187

SOP 应该在任何方法中。使用构造函数并在构造函数内部打印，然后在**accesssp1的构造函数中调用super()**

```
class accesssp  {

public int a=56;
private int b=5566;
public int c=58766;

public accesssp()

{
System.out.println(b);
}

}

class accesssp1 extends accesssp{

public accesssp1()
{
super();
}

public void accessd()   {

System.out.println(a);
System.out.println(c);

}

}
public class Access_Spf {

public static void main(String[] args) {

accesssp1 sp1 = new accesssp1();
sp1.accessd();

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:12:30.020

`System.out.println(b);`既不在`main()`方法中，也不在任何函数中。这不能像您所做的那样直接执行。在旁注中，变量`b`将无法在`accesssp1`课堂上访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:07:58.333

java中有访问说明符，有，

```
private, public and protected. 
```

以上每一个都有其特点，它们是根据那里的范围和可见性来解释的。

```
private has scope & visibility resides only on inside a function or there the class. 
```

例如。：

```
public class classFirst
{
    private int variableName1;//scope and visibility inside this class
    public void function1()
    {
       private int variableName2;//scope and visibility inside this function not use outside.
    }
} 
```

public 具有范围和可见性位于项目的任何位置（当它可以在外部调用时，只能使用其对象调用。）。这些值通过它们的对象访问。

例如。：

```
public class classSecond
{
    public int variableName1;//scope and visibility anywhere on the project
    public void function1()
    {
       public int variableName2;//scope and visibility anywhere on the project
    }
} 
```

受保护的范围和可见性在类内部，并且还访问了公共继承类。

所以`System.out.println(b);`语句必须在第一类的构造函数中。

# android - Android视图比较两个视图是否相等

> ID：15612245
> 
> 赞同：9
> 
> 时间：2013-03-25T10:07:06.907
> 
> 标签：android, android-layout

我在布局上有 4 个按钮，对于每个按钮，它们都具有以下属性：

`android:onClick="numberChosen"`

现在，我计划做的是在我的活动中（它使用具有 4 个按钮的布局），我有类似的东西：

```
public class Blah extends Activity{
    String fileName;
    Button one;
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_number_players_selection_screen);
        one = (Button) findViewById(R.id.number_players_one);
    }

    public void numberChosen(View v){
        if(v == one){                              // <-------- first way
            System.out.println("first way");      
        }
        if(v.getId()==R.id.number_players_one){    // <--------  second way
            System.out.println("second way");
        }
    }
} 
```

如果您注意方法中发生的情况`numberChosen`，在这两种方法之间，哪一种更好？还是他们都在做同样的事情？

在旁注中，做`android:onClick="numberChosen"`的比仅仅设置更好还是更差`View.onClickListener`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:22:38.840

从我的角度来看，两种方法都是正确的，它们都能完成工作。从性能的角度来看，第二种方式*可能*会更好。

此外，就像一些建议的那样，如果您在库项目中使用 ADT 14 或更高版本，则可能无法使用**switch case** ，因为 ID 不是最终的（常量），因此您必须仅在这种情况下使用 if 语句.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-26T17:36:22.860

I am using min SDK 14 and this solution is not working in some cases (work only for first row of my list adapter)

```
findViewById(R.id.item_icon_favourite) == view 
```

solved by comparing with IDs

```
R.id.item_icon_favourite == view.getId() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:14:39.223

```
 public class Blah extends Activity implements OnClickListener{
                String fileName;
                Button one;
                @Override
                public void onCreate(Bundle savedInstanceState){
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_number_players_selection_screen);
                    one = (Button) findViewById(R.id.number_players_one);

one..setOnClickListener(this); // way 1 to do that

    // more better way would be customized for whole app 

    **one..setOnClickListener(new MyClickListener());**
                }

            /** The click event observer pattern for the different items on the view
                 * 
                 * @see android.view.View.OnClickListener#onClick(android.view.View)
                 */
                @Override
                public void onClick(View v) {
                    switch (v.getId()) {
                    case R.id.number_players_one:

                        // best way 1
                        break;
            default :
            break;
            }

            } 

            } 
```

一个更自定义的实现，您可以为应用程序中的不同部分自定义侦听器，如下所示：

```
public class MyClickListener implements OnClickListener {
    private Context mContext;
    @Override
    public void onClick(View v) {
        mContext = v.getContext();

        switch (v.getId()) {
        case R.id.number_players_one:

        // best way 2 and more better among all
            break;

        default:
            break;
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:21:02.480

我建议您使用`switch`更具可读性的案例。无论您使用的是天气`android:onClick="numberChosen"`还是`View.onClickListener()`

# dependency-injection - 用于在复杂层次结构中注入运行时依赖项的抽象工厂

> ID：15612247
> 
> 赞同：1
> 
> 时间：2013-03-25T10:07:09.497
> 
> 标签：dependency-injection, abstract-factory

给定以下类层次结构

*   A类需要B类
*   B类需要C类

我们得到一个像这样的依赖图：

```
ClassA --> ClassB --> ClassC 
```

因此，如果我们使用 DI，我们将 ClassC 注入到 ClassB 中，将 ClassB 注入到 ClassA 中。

但是现在假设 ClassC 是一个运行时依赖项（例如某种策略）。注入运行时依赖项的建议方法是引入一个抽象工厂，如

```
ClassCFactory 
```

现在我们可以将 ClassCFactory 注入 ClassB 并得到下图

```
ClassA --> ClassB --> ClassCFactory 
```

现在我们在 ClassB 中有一个方法，我们可以调用它来让工厂完成它的工作。例如

```
ObjB.SelectC(MyRuntimeValue) 
```

但现在在我们的应用程序中，我们对 ClassB 一无所知（可能涉及更多层）。一种解决方案可能是在 ClassA 中有一个 SelectC

```
ObjA.SelectC(MyRuntimeValue) -(calls)-> ObjB.SelectC(MyRuntimeValue) 
```

或者我们只是违反得墨忒耳法则并做类似的事情

```
ObjA.ObjB.SelectC(MyRuntimeValue) 
```

我想每个人都同意第二种解决方案不是要走的路。但是第一个解决方案也有几个缺点，特别是如果我们之间有更多的层。

我们也可以将工厂上拉一级来创建 ClassB，但 ClassB 真的是运行时依赖吗？你建议什么解决方案？或者它甚至是一个糟糕的类设计？

恕我直言，最好依赖于对象实际需要什么来完成其工作，而不是依赖于创建所需对象的工厂。但是考虑到这个想法，DI容器将毫无用处......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:18:20.943

> 注入运行时依赖项的建议方法是引入抽象工厂

您不一定需要一个抽象工厂来在运行时注入东西。您可以使用 setter 注入或方法注入将简单的依赖项直接传递给您的对象。

当您必须从一系列相关对象*族*中生成对象但直到运行时才知道哪个族时，可以选择抽象工厂。您的示例中没有任何内容表明情况如此，因此 YAGNI/KISS 会指示不要使用。

> 但现在在我们的应用程序中，我们对 ClassB 一无所知（可能涉及更多层）。

您能否详细说明为什么这在您的场景中是正确的？对我来说，似乎总会有某种执行上下文知道 ClassB 并能够将 C 注入其中。不过，它不必与将 ClassB 注入 A 的执行上下文相同。

IoC 也被称为好莱坞原则 - `"Don't call us, we'll call you"`. 根据您的应用程序，谁`"we"`是谁以及该`"call you"`部分将在何时发生可能会有很大差异，没有硬性规定。如果您担心 ObjectA 可能对 ClassC 了解太多，只需将其注入委托给其他人即可。DI 容器可以在这方面提供很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T10:21:35.020

我发现运行时依赖也很麻烦，而且我认为抽象工厂的框架开销是烦人的额外代码，我不想存在。但不幸的是，我还没有想到更好的方法。

但是，在您上面的示例中，您的两种选择之间似乎没有任何显着差异。

在一种情况下，您有

```
ObjA.ObjB.SelectC(MyRuntimeValue) 
```

而在另一个你会有

```
ObjA.ObjB.ObjC 
```

在我看来，这两种选择都有相同的优点和缺点。

正如您所指出的，为了避免违反得墨忒耳定律，您必须添加许多通过功能。这并不总是值得权衡，但绝对值得考虑。

# perl - Perl：用列表中的值替换文本字符串（文本文件或标量上下文）

> ID：15612250
> 
> 赞同：0
> 
> 时间：2013-03-25T10:07:14.153
> 
> 标签：perl, list, foreach, substitution

我是 perl 新手，但读过 Schwartz、foy 和 Phoenix 的“Learning Perl”，对语言的理解很薄弱。即使在使用了这本书和网络之后，我仍然在苦苦挣扎。

我的目标是能够做到以下几点：

1.  搜索特定文件夹（当前文件夹）并获取具有完整路径的文件名。使用完整路径和当前文件夹名保存文件名。

2.  打开一个模板文件并在特定位置（例如使用替换）以及当前文件夹名（在同一文本文件的另一个位置，我还没有做到这一点）插入具有完整路径的文件名。

3.  将新修改的文​​件保存到特定位置（当前文件夹）的新文件中。

我有许多要处理的文件/文件夹，并计划将 perl 程序复制到每个文件夹中，以便 perl 程序可以创建新的 .

我到目前为止......：

```
use strict;
use warnings;
use Cwd;
use File::Spec;
use File::Basename;
my $current_dir = getcwd;
open SECONTROL_TEMPLATE, '<secontrol_template.txt' or die "Can't open SECONTROL_TEMPLATE: $!\n";
my @secontrol_template = <SECONTROL_TEMPLATE>;
close SECONTROL_TEMPLATE;
opendir(DIR, $current_dir) or die $!;
my @seq_files = grep {
    /gz/
    } readdir (DIR);
open FASTQFILENAMES, '> fastqfilenames.txt' or die "Can't open fastqfilenames.txt: $!\n";
my @fastqfiles;
foreach (@seq_files) {
    $_ = File::Spec->catfile($current_dir, $_);
    push(@fastqfiles,$_);
}
print FASTQFILENAMES @fastqfiles;
open (my ($fastqfilenames),  "<", "fastqfilenames.txt") or die "Can't open fastqfilenames.txt: $!\n";
my @secontrol;
foreach (@secontrol_template) {
    $_ =~ s/@/$fastqfilenames/eg;
    push(@secontrol,$_);
}
open SECONTROL, '> secontrol.txt' or die "Can't open SECONTROL: $!\n";
print SECONTROL @secontrol;
close SECONTROL;
close FASTQFILENAMES; 
```

我的问题是我无法弄清楚如何使用我的文件列表来替换模板文本文件中的“@”：

```
my @secontrol;
foreach (@secontrol_template) {
    $_ =~ s/@/$fastqfilenames/eg;
    push(@secontrol,$_);
} 
```

替换函数不会将“@”替换为 $fastqfilenames 中列出的文件列表。我将“@”替换为 GLOB(0x8ab1dc)。

我这样做是错误的吗？我是否应该不使用替代品，因为这无法做到，然后在 template.txt 文件中插入文件列表（$fastqfilenames）？我可以用文件内容代替 $fastqfilenames（例如 s/A/{r file.txt ...）吗？有什么建议么？

干杯，

詹姆斯T

**编辑：**

这让一切变得更好。

```
foreach (@secontrol_template) {
    s/@/$fastqfilenames/g;
    push @secontrol, $_;
} 
```

正如这两个建议， $fastqfiles 是一个文件句柄。

替换这个： ~~open (my ($fastqfilenames), "<", "fastqfilenames.txt") or die "Can't open fastqfilenames.txt: $!\n";~~

有了这个：

```
my $fastqfilenames = join "\n", @fastqfiles; 
```

一切都很好。谢谢你们俩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:13:27.190

`$fastqfilenames`是一个文件句柄。您必须先从文件句柄中读取信息，然后才能使用它。

但是，您还有其他问题。

您正在将所有文件名打印到文件中，然后从文件中读取它们。这不仅是一个有问题的设计（为什么要再次从文件中读取，因为您已经在数组中拥有了所需的内容？），它甚至也不起作用：

Perl 出于性能原因缓冲文件 I/O。您写入文件的行实际上可能还不存在，因为 Perl 一直在等待，直到它保存了一大块数据，才一次将其全部写入。

您可以通过几种不同的方式覆盖此缓冲行为（如果您完成写入文件句柄，则关闭文件句柄是最简单的），但正如我所说，没有理由再次重新打开文件并从中读取。

另请注意，`/e`正则表达式替换中的选项将替换评估为 Perl 代码。在您的情况下，这不是必需的，因此您应该将其删除。

**解决方案：**不要重新打开文件并读取它，只需使用`@fastqfiles`您之前在模板中替换时创建的变量即可。目前尚不清楚用文件名替换的确切含义`@`。

*   你想`@`用所有文件名的列表一起替换每个吗？如果是这样，您可能需要在进行替换之前以某种方式[`join`将文件名放在一起。](http://perldoc.perl.org/functions/join.html)

*   您想为每个文件名创建一个单独版本的模板文件吗？如果是这样，您需要一个内部`for`循环来遍历每个模板的每个文件名。而且您需要的不仅仅是简单的替换，因为替换会在第一次通过时更改原始字符串。如果您使用的是 Perl 5.16，则可以使用`/r`非破坏性替换选项： `push(@secontrol,s/@/$file_name/gr);`否则，您应该在替换之前复制到另一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:19:28.543

`$_ =~ s/@/$fastqfilenames/eg;`

`$fastqfilenames`是文件句柄，而不是文件内容。

无论如何，我建议使用[Text::Template](http://search.cpan.org/perldoc?Text%3a%3aTemplate)模块来完成这种工作（文件文本替换）。

# wcf - 如何在 node.js 中使用 WCF 肥皂 Web 服务

> ID：15612251
> 
> 赞同：8
> 
> 时间：2013-03-25T10:07:19.953
> 
> 标签：wcf, node.js, soap

我使用节点模块 wcf.js 尝试了很多网络中可用的示例。但无法得到任何适当的结果。我正在使用以下网址

> [https://webservice.kareo.com/services/soap/2.1/KareoServices.svc?wsdl](https://webservice.kareo.com/services/soap/2.1/KareoServices.svc?wsdl)

任何可以在代码的帮助下向我解释的人都会非常有帮助。我想知道如何访问 node.js 中的 wsdl

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-20T08:55:43.163

请看一下[wcf.js](https://www.codeproject.com/Articles/379389/Wcf-js-Call-WCF-web-services-from-Node-js/%20%22)

简而言之，您可以按照以下步骤操作：

1.  npm 安装 wcf.js

2.  像这样编写代码：

代码

```
var Proxy = require('wcf.js').Proxy; 
var BasicHttpBinding = require('wcf.js').BasicHttpBinding; 

var binding = new BasicHttpBinding();

//Ensure the proxy variable created below has a working wsdl link that actually loads wsdl    
var proxy = new Proxy(binding, "http://YourHost/YourService.svc?wsdl");

/*Ensure your message below looks like a valid working SOAP UI request*/
var message = "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' xmlns:sil='http://YourNamespace'>" +
                "<soapenv:Header/>" +
                "<soapenv:Body>" +
                "<sil:YourMethod>" +
                "<sil:YourParameter1>83015348-b9dc-41e5-afe2-85e19d3703f9</sil:YourParameter1>" +
                "<sil:YourParameter2>IMUT</sil:YourParameter2>" +
                "</sil:YourMethod>" +
                "</soapenv:Body>" +
                "</soapenv:Envelope>";
/*The message that you created above, ensure it works properly in SOAP UI rather copy a working request from SOAP UI*/

/*proxy.send's second argument is the soap action; you can find the soap action in your wsdl*/
proxy.send(message, "http://YourNamespace/IYourService/YourMethod", function (response, ctx) {
    console.log(response);
    /*Your response is in xml and which can either be used as it is of you can parse it to JSON etc.....*/
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T06:49:58.027

你没有那么多选择。

您可能想要使用以下之一：

*   节点肥皂
*   冲洗
*   肥皂剧

我尝试使用 node-soap 使用以下代码获取 INR USD 汇率。

```
app.get('/getcurr', function(req, res) {
var soap = require('soap');
var args = {FromCurrency: 'USD', ToCurrency: 'INR'};
var url = "http://www.webservicex.net/CurrencyConvertor.asmx?WSDL";
soap.createClient(url, function(err, client) {
    client.ConversionRate(args, function(err, result) {
        console.log(result);
    });
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-28T17:05:57.793

Code Project 有一个[简洁的示例](http://www.codeproject.com/Articles/379389/Wcf-js-Call-WCF-web-services-from-Node-js)，它使用[wcf.js](https://github.com/yaronn/wcf.js)，其中 api 类似于 wcf，因此无需学习新的范例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-06T17:29:52.290

我认为另一种选择是：

*   使用[SoapUI](http://www.soapui.org)之类的工具来记录输入输出xml消息
*   使用[节点请求](https://github.com/mikeal/request)形成输入 xml 消息以将请求发送 (POST) 到 Web 服务（请注意，标准的 javascript 模板机制，如[ejs](http://embeddedjs.com/)或[mustache](https://github.com/janl/mustache.js)可以在这里为您提供帮助），最后
*   使用 XML 解析器将响应数据反序列化为 JavaScript 对象

是的，这是一种相当肮脏和低级的方法，但它应该可以毫无问题地工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:15:43.120

您可能想要使用以下之一：

*   [节点肥皂](https://github.com/milewise/node-soap)
*   [冲洗](https://github.com/kr1sp1n/douche)
*   [肥皂剧](https://github.com/jmoyers/soapjs)

另外，还有[一个问题](https://stackoverflow.com/questions/8655252/node-js-how-to-consume-soap-xml-web-service)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-11T05:04:44.980

就我而言，我使用了[https://www.npmjs.com/package/soap](https://www.npmjs.com/package/soap)。根据 SOAP 1.2，默认`forceSoap12Headers`选项设置为`false`阻止`node-soap`生成正确的肥皂消息。检查更多细节：[我对 SOAP namespaces 感到困惑](https://stackoverflow.com/questions/403980/i-am-confused-about-soap-namespaces)。将其设置为 后`true`，我能够调用 .NET WCF 服务。这是一个对我有用的 TypeScript 代码剪辑器。

```
import * as soap from 'soap';
import { IOptions } from 'soap';

// ...

const url = 'https://www.your-domain.com/stock.svc?wsdl';
const opt: IOptions = {
  forceSoap12Headers: true,
};

soap.createClient(url, opt, (err, client: soap.Client) => {
  if (err) {
    throw err;
  }

  const wsSecurityOptions = {
    hasTimeStamp: false,
  };

  const wsSecurity = new soap.WSSecurity('username', 'password', wsSecurityOptions);
  client.setSecurity(wsSecurity);
  client.addSoapHeader({ Action: 'http://tempuri.org/API/GetStockDetail' }, undefined, 'wsa', 'http://www.w3.org/2005/08/addressing');
  client.addSoapHeader({ To: 'https://www.your-domain.com/stock.svc' }, undefined, 'wsa', 'http://www.w3.org/2005/08/addressing');

  const args = {
    symbol: 'GOOG',
  };

  client.GetStockDetail(
    args,
    (requestErr, result) => {
      if (requestErr) {
        throw requestErr;
      }

      console.log(result);
    },
  );
}); 
```

这里有几个`node-soap`使用文档的链接：

1.  [https://github.com/vpulim/node-soap/tree/master/test](https://github.com/vpulim/node-soap/tree/master/test)
2.  [https://github.com/vpulim/node-soap](https://github.com/vpulim/node-soap)

# python - bool 类型的任何（[class.method(), foo.bar(), etc.etc()]) 参数中的 foo 不可迭代

> ID：15612254
> 
> 赞同：0
> 
> 时间：2013-03-25T10:07:24.860
> 
> 标签：python, python-2.7

我目前正在为 6.00x 课程设置问题，并且遇到了一个奇怪的错误。

错误是：

```
Traceback (most recent call last):
  File "ps6_test.py", line 157, in test7PhraseTrigger
    self.assertTrue(pt.evaluate(a), "PhraseTrigger doesn't find phrase in title")
  File "/home/tayler/Dropbox/Programming/6.00x/ProblemSets/ProblemSet6/ps6.py", line 148, in evaluate
    story.getTitle()])
TypeError: argument of type 'bool' is not iterable 
```

引发错误的代码段是：

```
class PhraseTrigger(Trigger):
    def __init__(self, phrase):
        self.phrase = phrase
    def evaluate(self, story):
        return self.phrase in any([story.getSubject(), story.getSummary(),
            story.getTitle()]) 
```

我正在运行一个提供的简单测试套件，它设置变量并创建一些实例。我不确定为什么在`in any()`比较两个之后迭代布尔值。为什么`any()`在两次比较后迭代布尔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:09:37.237

`any`不迭代布尔值，`any`返回一个`in`试图迭代的布尔值。你的意思可能是这样的：

```
any(self.phrase in text for text in [
       story.getSubject(), story.getSummary(), story.getTitle()
  ]) 
```

`any``True`如果给定它的可迭代对象的任何元素评估为，则返回`True`，`False`否则返回。

简单来说，上面的代码意思是

*如果`any`其中一个是 True: ，则返回 True: `self.phrase in story.getSubject()`，`self.phrase in story.getSummary()`或`self.phrase in story.getTitle()`*

你可以用另一种方式写它：

```
any([self.phrase in story.getSubject(),
     self.phrase in story.getSummary(),
     self.phrase in story.getTitle()
  ]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:10:39.053

如错误所述，`any`返回一个布尔值。如果其任何参数返回 True，则返回 True。

如果您想检查该短语是否是任何值，您可能需要：

```
return any([self.phrase in val for val in [story.getSubject(), story.getSummary(), story.getTitle()]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:09:35.367

`any()`不是*迭代*布尔值，它返回一个布尔值。它应该这样做，请参阅[文档](http://docs.python.org/2/library/functions.html#any)。

因此，您要做的是检查是否*有任何*方法或返回值`getSubject`， 然后尝试迭代该 True 或 False 值。`getSummary``getTitle`

# bash - basename 命令未按预期工作

> ID：15612255
> 
> 赞同：4
> 
> 时间：2013-03-25T10:07:25.513
> 
> 标签：bash, shell, unix, ubuntu-12.04, rename

我写了一个shell脚本来将我最后的很多JPG转换为pdf

```
 #!/bin/bash
set -xv
for i in `ls -v *.JPG`;
 do i=$(basename "$i")
 convert "$i" "$i.pdf" ;
 done 
```

JPG是

> DSCN2612.JPG DSCN2618.JPG DSCN2624.JPG

我得到的转换后的pdf文件有名字

> DSCN2612.JPG.pdf DSCN2618.JPG.pdf DSCN2624.JPG.pdf

现在注意在我的 shell 脚本中使用 basename 命令，我希望得到的 pdf 名称是

> DSCN2612.pdf DSCN2618.pdf DSCN2624.pdf

哪里输出不一样。我正在使用 Ubuntu 12.04 和 basename --version 显示

> basename (GNU coreutils) 8.13 版权所有 (C) 2011 Free Software Foundation, Inc. 许可证 GPLv3+：GNU GPL 版本 3 或更高版本 [http://gnu.org/licenses/gpl.html](http://gnu.org/licenses/gpl.html)。这是免费软件：您可以自由更改和重新分发它。在法律允许的范围内，不提供任何保证。

在终端上我只需输入

> basename DSCN2612.JPG
> 我得到了输出
> 
> DSCN2612.JPG

正如我所料

> DSCN2612

只有这样我的理解是错误的，或者我使用这个脚本的方式有一些错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T10:12:35.830

该`basename`命令有两种用途，剥离路径前缀和（可选）剥离后缀。

要去除路径前缀，您可以简单地将路径传递给它，例如

```
basename /path/to/file.ext
# file.ext 
```

要另外去除后缀，您需要告诉`basename`您要去除的后缀，例如

```
basename /path/to/file.ext .ext
# file

basename DSCN2612.JPG .JPG
# DSCN2612 
```

因此，`basename`不会“自动检测”后缀，因为在 unix 中，文件不一定有后缀。换句话说，句号后的字母不一定是后缀，所以你需要明确告诉它要去掉什么后缀。

但是，对于“自动检测”和剥离，有一些特定于 bash 的替代方案。例如，

```
x="file.ext"
echo ${x%.*}
# file 
```

在不了解更多信息的情况下，我可能会将您的脚本编写为

```
for jpg in *.JPG; do
    base=${jpg%.*}
    convert "$jpg" "$base.pdf"
done 
```

# c# - 访问被拒绝用我的 C# WCF webService 写入文件

> ID：15612257
> 
> 赞同：0
> 
> 时间：2013-03-25T10:07:29.557
> 
> 标签：c#, wcf, web-services, exception, permissions

我在我的服务器**Windows 2008 R2**上托管了一个 WCF Web 服务。一切都在我的本地主机项目**Visual Studio 2012**上完美运行。

但是，一旦部署在我的服务器上。当我的 WCF 尝试将 XML 文件保存在 C:\ 中时，我的应用程序引发异常。

我立即认为它来自权限问题。我尝试在用户**IUSR**的著作中添加权限，但它没有任何改变。我什至尝试将所有权限应用于用户“每个人”。但是没有成功！一个主意 ？谢谢

这是我的项目配置的屏幕截图：

![在此处输入图像描述](../Images/bf0c484835a1ed8d0a9280215e6257b8.png)

![在此处输入图像描述](../Images/0941361d1a7aae602bd4a37d05f00308.png)

引发异常的代码：

```
XmlTextWriter myXmlTextWriter = new XmlTextWriter("c:/world.xml", null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:27:01.110

为什么要保存到根驱动器文件夹？例如，当您尝试保存到时会发生什么`C:\Stuff`？

如果这没有像我那样运行，`Network Service`我会冒险猜测这是因为 UAC 之类的东西会阻止您写入某些被认为受到限制的地方。

# html - 清除两个浮动 div 的页脚

> ID：15612259
> 
> 赞同：1
> 
> 时间：2013-03-25T10:07:33.997
> 
> 标签：html, css

这非常令人困惑，我正在使用 BootStrap 中的 clearfix 类来尝试简单地清除页脚，但它不起作用。我的代码如下：

```
<div>
    <div class="left">Left</div>
    <div class="right">Right</div>
    <div class="footer clearfix">Footer</div>
</div> 
```

* * *

```
.left {
    background-color: red;
    float: left;
}

.right {
    background-color: blue;
    float: right;
}

.footer {
      background-color: orange;
}

// Clear fix
.clearfix {
  *zoom: 1;
}

.clearfix:before,
.clearfix:after {
  display: table;
  line-height: 0;
  content: "";
}

.clearfix:after {
  clear: both;
} 
```

我在这里提琴：http: [//jsfiddle.net/RYYFw/3/](http://jsfiddle.net/RYYFw/3/)

请您告知为什么这个简单的清理不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:09:00.430

您需要添加`clear: both`到您的页脚：

```
.footer {
    background-color: orange;
    clear: both;
} 
```

请参阅[**更新的 jsFiddle**](http://jsfiddle.net/RYYFw/4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:13:20.850

`clearfix`不起作用，因为您通常会使用它来根据其中浮动的元素为父容器提供高度值。

你应该使用的是`clear: both;`

因此，您应该在页脚上应用它：

```
.footer {
  background-color: orange;
  clear: both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:10:14.983

添加`clear:both`到 .footer

```
.footer {
      background-color: orange; clear: both;
} 
```

**[演示](http://jsfiddle.net/RYYFw/5/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:15:00.430

有问题的 Cleafix 与您认为的不同。

在这种情况下，引导程序 clearfix 意味着具有`clearfix`该类的任何浮动元素都将具有适当的高度（默认情况下，如果浮动元素位于非浮动元素内，则非浮动元素的高度将为 0）

（为了更好的[http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)）

你想要的是一种清除页脚的方法，如下所示：

```
.clear { clear: both; } 
```

该`clear`属性表示浮动元素不允许在所述元素的任何一侧（也可以左右分配）

# asp.net - 更新时将旧选择而不是新选择输入 SQLServer 的列表框

> ID：15612267
> 
> 赞同：0
> 
> 时间：2013-03-25T10:07:49.870
> 
> 标签：asp.net, listbox

我对 webforms asp.net 网页上的几个列表框有疑问，非常感谢任何帮助。

我有一个页面允许插入用户配置文件，然后允许更新该新配置文件。

在更新时，当用户选择一些新的列表项来更新已设置列表框的旧列表项时，代码以某种方式将列表项添加到以前的项目列表（来自数据库的项目）中，而不是覆盖旧值与所选列表项的新列表。

以下是我对设置进行编码的方式。

1.  我有一个在表单加载时动态填充的列表框 -

2.  当表单加载时，这是从 SQLServer 2008 R2 数据库填充的 -

3.  当用户在列表框中选择一个或多个值时，这些值将作为逗号分隔的字符串输入数据库 -

4.  从数据库中提取新输入的值并设置与选定项目相同的列表框 -

5.  当用户选择一些新的列表项来更新列表时，代码会以某种附加方式将列表项添加到先前的项列表（来自数据库的项）中，而不是用新的选定列表项列表覆盖旧值。

ps 抱歉，没有代码，因为编辑器不允许我发布任何代码。请参阅下面的链接以获取完整的帖子

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:39:34.483

Use `!IsPostBack` property in `page_load`

# linux - 在unix中找到两个引号中的单词

> ID：15612268
> 
> 赞同：1
> 
> 时间：2013-03-25T10:07:58.080
> 
> 标签：linux, unix, awk

我想在这些行中显示最后一个单词我试图寻找例如单词值但没有答案，所以我想查找引号之间的单词但是我的文件包含引号之间的其他单词我实际上不需要在知道我的html文件是的情况下显示select标签的值。

```
grep '*' hosts.html | awk '{print $NF}' 
```

例如：

```
value='www.visit-tunisia.com'>www.visit-tunisia.com 
value='www.watania1.tn'>www.watania1.tn 
value='www.watania2.tn'>www.watania2.tn 
```

我会

```
www.visit-tunisia.com 
www.watania1.tn 
www.watania2.tn 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:38:31.973

You need to set the field separator to `>` you do this with the `-F` option:

```
$ awk -F'>' '{print $NF}' hosts.html
www.visit-tunisia.com
www.watania1.tn
www.watania2.tn 
```

Note: I'm not sure what you are trying to achieve by `grep '*' hosts.html`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:38:43.817

Interpreting the comment liberally, you have input lines which might contain:

```
value='www.visit-tunisia.com'>www.visit-tunisia.com
value='www.watania1.tn'>www.watania1.tn
value='www.watania2.tn'>www.watania2.tn 
```

and you would like the names which are repeated on a line as the output:

```
www.visit-tunisia.com
www.watania1.tn
www.watania2.tn 
```

This can be done using `sed` and capturing parentheses.

```
sed -n -e "s/.*'\([^']*\)'.*\1.*/\1/p" 
```

The `-n` says "don't print unless I say to do so". The `s///p` command prints if the substitute works. The pattern looks for a stream of 'anything' (`.*`), a single quote, captures what's inside up to the next single quote (`'\([^']*\)'`) followed by any text, the captured text (the first `\1`), and anything. The replacement text is what was captured (the second `\1`).

Example:

```
$ cat data
www and wotnot
value='www.visit-tunisia.com'>www.visit-tunisia.com
blah
value='www.watania1.tn'>www.watania1.tn
hooplah
value='www.watania2.tn'>www.watania2.tn
if 'nothing' is required, nothing will be done.
$ sed -n -e "s/.*'\([^']*\)'.*\1.*/\1/p" data
www.visit-tunisia.com
www.watania1.tn
www.watania2.tn
nothing
$ 
```

Clearly, you can refine the `[^']*` part of the match if you want to. I used double quotes around the expression since the pattern matches on single quotes. Life is trickier if you need to allow both single and double quotes; at that point, I'd put the script into a file and run `sed -f script data` to make life easier.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:09:40.387

```
sed 's/.*>\(.*\)/\1/g' your_file 
```

# vba - 遍历文件夹中的文件以在 Word 文档中进行更改

> ID：15612274
> 
> 赞同：0
> 
> 时间：2013-03-25T10:08:08.907
> 
> 标签：vba, ms-word

我的文件夹中有很多 Word 文档，我想将自定义样式应用到这些文档中。

这是我的 VBA 代码。我希望 VBA 能够转到特定文件夹并将自定义样式应用于所有 word 文档。有任何想法吗？

```
Sub styleapply()
'
' styleapply Macro
'
'
    Selection.WholeStory
    ActiveDocument.UpdateStyles
    'WordBasic.ApplyQFSetTemplate
    Selection.Style = ActiveDocument.Styles("sam'style")
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:29:09.413

这应该让你大部分时间到达那里：

```
Sub OpenWordFolder()
    Dim fd As FileDialog
    Dim doc As Document
    Set fd = Application.FileDialog(msoFileDialogFolderPicker)
    fd.AllowMultiSelect = True
    fd.Show
    For Each folderItem In fd.SelectedItems
        fileItem = Dir(folderItem & "\" & "*.docx")
        While fileItem <> ""
            Set doc = Documents.Open(FileName:=folderItem & "\" & fileItem)
            Selection.WholeStory
            Selection.Style = ActiveDocument.Styles("sam'style")
            doc.Close SaveChanges:=True
            fileItem = Dir
        Wend
    Next
End Sub 
```

请注意，我不确定 ActiveDocument 是否具有您创建的自定义样式 - 您可能需要将具有自定义样式的原始文档设置为 Document 对象，然后使用该 Document 对象为每个文件设置样式我开了。

# c# - 在asp.net C#中将图像上传到ImageBox

> ID：15612276
> 
> 赞同：1
> 
> 时间：2013-03-25T10:08:18.533
> 
> 标签：c#, asp.net, image, upload

我想将图像上传到`ImageBox`网页`Asp.net`上。我正在使用 C# 语言和我使用`<asp:FileUpload>`标签的浏览。请问有什么想法吗？

问候

```
<asp:FileUpload ID="imgUpload" runat="server"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:16:09.903

您可以通过 FileUpload 评估上传的文件并使用`SaveAs`方法保存。[你可以在这里](http://asp.net-tutorials.com/controls/file-upload-control/)阅读更多。

```
string filename = Path.GetFileName(imgUpload.FileName);
FileUploadControl.SaveAs(Server.MapPath("~/") + filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:44:32.270

试试下面的链接，我认为这些可以提供帮助。 [http://www.daniweb.com/forums/thread32985.html#](http://www.daniweb.com/forums/thread32985.html#) [http://www.daniweb.com/forums/thread112662.html#](http://www.daniweb.com/forums/thread112662.html#)

# linux - 打印文件的前 N 个单词

> ID：15612279
> 
> 赞同：6
> 
> 时间：2013-03-25T10:08:24.800
> 
> 标签：linux, unix, scripting, awk

有没有办法打印文件的前 N ​​个单词？我试过 cut 但它会逐行读取文档。我想出的唯一解决方案是：

```
sed ':a;N;$!ba;s/\n/δ/g' file | cut -d " " -f -20 | sed 's/δ/\n/g' 
```

本质上，用文件中不存在的字符替换换行符，应用“cut”和空格作为分隔符，然后恢复换行符。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:19:39.707

您可以使用`awk`打印前 n 个单词：

```
$ awk 'NR<=8{print;next}{exit}' RS='[[:blank:]]+|\n' file 
```

这将打印前 8 个单词。每个单词都在单独的行上输出，您是否希望保留文件的原始格式？

**编辑：**

以下将保留文件的原始格式：

```
awk -v n=8 'n==c{exit}n-c>=NF{print;c+=NF;next}{for(i=1;i<=n-c;i++)printf "%s ",$i;print x;exit}' file 
```

**演示：**

```
$ cat file
one two
thre four five six
seven 8 9 
10

$ awk -v n=8 'n==c{exit}n-c>=NF{print;c+=NF;next}{for(i=1;i<=n-c;i++)printf "%s ",$i;print x;exit}' file
one two
thre four five six
seven 8 
```

一个小警告：如果打印的最后一行不使用单个空格作为分隔符，则该行将丢失其格式。

```
$ cat file 
one     two
thre     four five six
seven        8 9 
10

# the 8th word fell on 3rd line: this line will be formatted with single spaces
$ awk -v n=8 'n==c{exit}n-c>=NF{print;c+=NF;next}{for(i=1;i<=n-c;i++)printf "%s ",$i;print x;exit}' file
one     two
thre     four five six
seven 8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T10:18:30.540

假设单词是由空格分隔的非空格，您可以使用`tr`将文档转换为每行一个单词的格式，然后计算前 N 行：

```
tr -s ' \011' '\012' < file | head -n $N 
```

`N=20`您想要的字数在哪里或任何值。注意`tr`是纯过滤器；它只从标准输入读取，只写入标准输出。该`-s`选项“挤压”出重复的替换，因此输入中的每个空格或制表符序列都有一个换行符。（如果文件中有前导空白，则会得到一个初始空白行。有多种处理方法，例如将前 N+1 行从输出中提取出来，或者过滤掉所有空白行。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T15:52:39.223

使用 GNU awk，我们可以将 RS 设置为正则表达式并使用 RT 访问匹配的字符串：

```
$ cat file
the quick
brown     fox     jumped over
the
lazy
dog's back

$ gawk -v c=3 -v RS='[[:space:]]+' 'NR<=c{ORS=(NR<c?RT:"\n");print}' file
the quick
brown

$ gawk -v c=6 -v RS='[[:space:]]+' 'NR<=c{ORS=(NR<c?RT:"\n");print}' file
the quick
brown     fox     jumped over

$ gawk -v c=9 -v RS='[[:space:]]+' 'NR<=c{ORS=(NR<c?RT:"\n");print}' file
the quick
brown     fox     jumped over
the
lazy
dog's 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:14:04.170

perl 的一种方法：

```
perl -lane 'push @a,@F;END{print "@a[0..9]"}' file 
```

注意：索引从零开始，因此示例将打印前十个单词。单词将打印在由单个空格分隔的单行上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:12:34.963

为什么不尝试将您的单词变成线条，然后直接使用`head -n 20`呢？

例如：

```
for i in `cat somefile`; do echo $i; done | head -n 20 
```

它并不优雅，但它确实有相当少的线噪声正则表达式。

# c# - C#：为什么函数调用比手动内联更快？

> ID：15612280
> 
> 赞同：16
> 
> 时间：2013-03-25T10:08:25.203
> 
> 标签：c#, performance, release, inline, inline-code

我已经测量了计算 2 的幂的两种方法的执行时间：

**1) 内联**

```
result = b * b; 
```

**2）通过简单的函数调用**

```
result = Power(b); 
```

在调试模式下运行时，一切都如预期的那样：调用函数比在线计算要昂贵得多（在线 385 毫秒与函数调用 570 毫秒）。

在发布模式下，我希望编译器能够大大加快函数调用的执行时间，因为编译器会在内部内联非常小的`Power()`函数。但我不希望函数调用比手动内联计算更快。

最令人惊讶的是：在发布版本中，第一次运行需要 109 毫秒，而第二次运行调用 to`Power()`只需要 62 毫秒。

**函数调用如何比手动内联更快？**

这是您的复制程序：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Starting Test");

        // 1\. Calculating inline without function call
        Stopwatch sw = Stopwatch.StartNew();

        for (double d = 0; d < 100000000; d++)
        {
            double res = d * d;
        }

        sw.Stop();
        Console.WriteLine("Checked: " + sw.ElapsedMilliseconds);

        // 2\. Calulating power with function call
        Stopwatch sw2 = Stopwatch.StartNew();

        for (int d = 0; d < 100000000; d++)
        {
            double res = Power(d);
        }

        sw2.Stop();
        Console.WriteLine("Function: " + sw2.ElapsedMilliseconds);

        Console.ReadKey();
    }

    static double Power(double d)
    {
        return d * d;
    }
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-25T10:11:04.543

你的测试是错误的。在第二部分中，您使用 a`int d`而不是 double。也许它解释了时差。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-25T10:17:09.807

正如 Xavier 正确发现的那样，您在一个循环中使用 double ，在另一个循环中使用 int 。将两者更改为相同的类型将使结果相同 - 我对其进行了测试。

此外：您在这里真正衡量的是添加和比较的持续时间。您*没有*测量 平方的持续时间`d`，因为它根本没有发生：在发布版本中，优化器完全删除了循环体，因为没有使用结果。您可以通过注释掉循环体来确认这一点。持续时间将相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T10:22:36.703

Daniel Hilgarth 是对的，计算根本没有发生，因为未使用结果（在调试模式下可能不是这种情况）。试试下面的例子，你会得到正确的结果：

```
static void Main(string[] args)
    {
        Console.WriteLine("Starting Test");
        var list = new List<int>();
        // 1\. Calculating inline without function call
        Stopwatch sw = Stopwatch.StartNew();

        for (int d = 0; d < 100000000; d++)
        {
            int res = d * d;
            list.Add(res);
        }

        sw.Stop();
        Console.WriteLine("Checked: " + sw.ElapsedMilliseconds);
        // 2\. Calulating power with function call

        list = new List<int>();
        Stopwatch sw2 = Stopwatch.StartNew();

        for (int d = 0; d < 100000000; d++)
        {
            int res = Power(d);
            list.Add(res);
        }

        sw2.Stop();
        Console.WriteLine("Function: " + sw2.ElapsedMilliseconds);

        Console.ReadKey();
    } 
```

# javascript - 调用猫鼬保存方法时async.js挂起的瀑布方法

> ID：15612289
> 
> 赞同：1
> 
> 时间：2013-03-25T10:08:54.047
> 
> 标签：javascript, node.js, asynchronous, express, mongoose

我正在尝试使用[异步瀑布方法](https://github.com/caolan/async#waterfall)，但是当它到达其中一个功能时，它会挂起。我怀疑这是因为 save() 操作对于执行上下文来说太慢了，但这就是我开始使用异步瀑布的原因，所以我可以等待返回的值，直到它进入系列中的下一个函数（传递正确的数据，`counted`在我下面的例子中）。

// 在我的用户控制器中：

```
async.waterfall([
  function(callback) {
    getSubmission(id, function(submission) {
      if (submission) {
        callback(null, submission);
      }
    });
  },
  function(submission, callback) {
    var submissionId = submission._id;

    getViews(submissionId, ip, function(count) {
      if (count) {
        callback(null, count, submissionId);
      }
    });
  },
  // Those top two functions work perfectly passing what
  // I need to this one which is where I'm having trouble
  function(views, submissionId, callback) {
    // addView is called because it is actually
    // inserting a row in the db, but never returns from the caller
      addView(submissionId, ip, function(added) {
        // this callback doesn't fire
        if (added) {
          callback(null, added);
        }
      });
  },
  function(added, callback) {
    console.log(added);
  }
 ]); 
```

这就是`addView()`（也在用户控制器中，前面的`async.waterfall`代码也在其中）：

```
var addView = function(submissionId, ip, callback) {
  Submission.addView({
    submissionId : submissionId,
    ip: ip
  }, function(err, counted) {
    if (err) {
      throw err;
    }

    if (counted) {
      callback(counted);
    }
  });
}; 
```

这就是它在调用时调用的内容（在我的提交模型文件中）`Submission.addView()`：

```
exports.addView = function(obj, fn) {
  var ip = obj.ip,
      submissionId = obj.submissionId,
      submissionView = new SubmissionView(obj);
// it gets to this point

  submissionView.save({
    ip : ip,
    submission_id : submissionId
  }, function(err, counted) {
    fn(err, counted);
  });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:06:49.093

每当异步“挂起”时，通常是因为尚未调用回调。

您需要确保在所有代码路径中调用回调。我还建议您将任何异步回调的第一个参数保留为错误，即使您不使用它，因为这是整个 node.js 使用的模式。一些模块依赖于这种模式。例如域。

如果您进行以下更改，那么我预计会在某处弹出一些错误：

```
getSubmission(id, function(submission) {
      if (submission) {
        callback(null, submission);
      }
    }); 
```

应该是这样的：

```
getSubmission(id, function(err, submission) {
      if(err){
        return callback(err);
      }
      if (!submission) {
        return callback('no submission found');
      }
      callback(null, submission);
    }); 
```

# java - 为什么 joda DateTimeZone 的 getOffset() 方法需要“即时”？

> ID：15612296
> 
> 赞同：14
> 
> 时间：2013-03-25T10:09:05.223
> 
> 标签：java, datetime, timezone, jodatime

我正在尝试做的事情：

从 DateTimeZone 对象，我试图以毫秒为单位获取 GMT 偏移量。例子：

```
DateTimeZone gmt= // somehow get gmt zone object
long offset = gmt.getOffsetSomehow(); // expect offset = 0

DateTimeZone ny_est = // somehow get that time zone object representing "EST" offset of NY zone
long offset = ny_est.getOffsetSomehow(); // expect offset = -18000000 = -5*60*60*1000

DateTimeZone hkt = // somehow get HK time zone object
long offset = hkt.getOffsetSomehow(); // expect offset = 28800000 = 8*60*60*1000 
```

Joda 的 DateTimeZone 对象有一个名为[getOffset](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTimeZone.html#getOffset%28long%29)的方法，它接受一个参数。问题：

1.  为什么该方法需要一个参数？我本来希望该方法不会期望任何参数，而只是按照我想要的虚构“getOffsetSomehow（）”方法的方式行事。
2.  如何在上面的代码段中获取时区对象？
3.  什么实际的方法/代码片段可以让我得到我想要得到的“偏移”值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T10:23:13.353

这是因为偏移量随时间而变化。一个例子是夏令时。另一个是决定移动到另一个时区的国家。

如果你想要当前的偏移量，现在就这样提交：

```
int offset = DateTimeZone.forID("Europe/Berlin").getOffset(new DateTime());
System.out.println(offset); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:18:26.690

2）您可以通过这种方式获取 TimeZone 对象 -`TimeZone tz = TimeZone.getTimeZone("Asia/Kolkata");`

3 您可以通过这种方法获得偏移值 -

```
double timezoneval = 0.0;
        Calendar cal = Calendar.getInstance();
        cal.set(2013, 3, 25, 10, 0,0);
        TimeZone tz = TimeZone.getDefault();
        boolean t = tz.inDaylightTime(cal.getTime());
        if (t)
            timezoneval = ((TimeZone.getDefault().getRawOffset())
                    / (60 * 60 * 1000D) + (TimeZone.getDefault()
                    .getDSTSavings() / (60 * 60 * 1000D)));
        else
            timezoneval = ((TimeZone.getDefault().getRawOffset()) / (60 * 60 * 1000D)); 
```

1）我没有得到你的问题。

此偏移值将适用于夏令时和非夏令时国家。

# frameworks - Kohana v3.30 子文件夹路由

> ID：15612297
> 
> 赞同：0
> 
> 时间：2013-03-25T10:09:06.690
> 
> 标签：frameworks, routing, kohana

我对子文件夹路由有一个小问题，在 kohana 中有很多关于路由的问题，但我都写了，我仍然有问题，我在 boostrap 中添加了以下几行：

```
Route::set('admin', 'folder(/<controller>(/<action>(/<id>)))')
->defaults(array(
'directory' => 'folder',
'controller' => 'test',
'action' => 'pokaz',
 )); 
```

我的控制器文件夹（应用程序/控制器/文件夹）中有文件夹，我的控制器：

```
class Controller_Folder_Test extends Controller {
public function action_pokaz() {
    echo "dasdsadsad";
   }
 } 
```

当我写这个网址时： 1\. [http://example.com/kohana/index.php/test/pokaz](http://example.com/kohana/index.php/test/pokaz) - （Kohana - 未找到网址）2\. [http://example.com/kohana/index.php/folder /test/pokaz](http://example.com/kohana/index.php/folder/test/pokaz) - (Kohana - 未找到 url) 3\. 没有 /index.php/ - 404 未找到 - Apache

所以我真的不知道我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:39:12.057

好的，它正在工作，我将文件夹名称从“文件夹”上的“文件夹”更改为“文件夹”，仅此而已：D Thx 无论如何寻求帮助；]

# big-o - 具有正常数的 Big-O

> ID：15612298
> 
> 赞同：0
> 
> 时间：2013-03-25T10:09:09.713
> 
> 标签：big-o

在这个 Big-O / 计算复杂性问题中，假设 a 和 b 是大于 1 的正常数，并且 n 是可变参数。

我假设 a ^(n+1) = O( an ^n ) ， a ^(bn) = O( an ^n ) & a ^(n+b) = O( ^(an n) )

首先，我需要知道我的假设是否正确。

如果是这样，我将如何证明 f(n) = O(f(n))。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:05:08.143

回想一下 big-O 的定义：

> f(n) ∈ O(g(n)) 表示存在正常数 c 和 k，因此对于所有 n ≥ k，0 ≤ f(n) ≤ cg(n)。对于函数 f，c 和 k 的值必须是固定的，并且不能依赖于 n。

让 g=f, c=1 和 k=0，那么你有一个 f(n) ∈ O(f(n)) 的简单证明

类似地，从 a ^(n+1) =a⋅a ^n，令 f(n)=a ^(n+1) , g(n)=a ^n , c=a, k=0 ，再次证明 O(a ^(n+1) )=O(a ^n ) 是微不足道的。^(O(a n+b) )=O(a ^n )的证明是相同的。
O(a ^(bn) ) 不等于 O(a ^n ) 且 a,b>1，请参阅[big-o notation 中的指数增长](https://stackoverflow.com/questions/15041273/exponential-growth-in-big-o-notation)

# java - 删除 JasperReports 服务器存储库的文件夹

> ID：15612302
> 
> 赞同：0
> 
> 时间：2013-03-25T10:09:24.600
> 
> 标签：java, spring, jasper-reports, jasperserver

*我想删除JasperReports Server*存储库的文件夹之一。

我正在使用*JR Server*`repository.deleteFolder(string URI)`的 API 。但是，在删除该文件夹时，我得到“拒绝访问”，尽管我已经通过下面的方式授予了该文件夹的*管理员*权限。我还手动创建了一个 securitycontext 对象，因为这是部署我的应用程序时调用的代码

 **```
public void enableRoleAdministrator(ExecutionContext ctx, String userName,
        String folderName) {
    try {
        List ctxAttrib = ctx.getAttributes();
        if (ctxAttrib != null) {

            ctxAttrib.add(ObjectPermissionService.PRIVILEGED_OPERATION);
        } else {
            ctxAttrib = new ArrayList<String>();
            ctxAttrib.add(ObjectPermissionService.PRIVILEGED_OPERATION);

        }
        ctx.setAttributes(ctxAttrib);

        ObjectPermission userPermission = objectPermissionService
                .newObjectPermission(null);
        User user = profileAttributeService.getUserAuthorityService()
                .getUser(ctx, userName);
        userPermission.setURI("repo:/" + folderName);
        System.out.println("The URI is "+userPermission.getURI());
        userPermission.setPermissionRecipient(user);
        System.out.println("The userPermission is "+userPermission.getPermissionRecipient().toString());
        System.out.println("The user is "+user);
        userPermission.setPermissionMask(ADMINISTRATION);
        objectPermissionService.putObjectPermission(ctx, userPermission);
        System.out.println("Before calling delete Folder");
        repository.deleteFolder(ctx, folderName);

        System.out.println("After calling delete Folder");

    } catch (Exception ex) {
        logger.log(Level.SEVERE, "Exception occurred" + ex.getMessage());
        System.out.println("Exception while deletingnnn forlder "+ex.getMessage());
        ex.printStackTrace();

    }
} 
```**

# node.js - 寻找为多个网站构建集中式身份验证的最佳方式

> ID：15612305
> 
> 赞同：1
> 
> 时间：2013-03-25T10:09:34.323
> 
> 标签：node.js, authentication

长话短说，我有几个客户想在他们的网站上管理一些东西，所有网站都是用`nodejs`.

我为这些网站构建了一个小型 CMS。

请记住，我的网站都没有 https，这是我想要发生的事情：

*   客户访问**我的**网站并提交包含他的密码和用户名的表单
*   我 http**将**他的凭据发布到**他的**网站
*   **如果凭据正常，**他的**网站返回一个 json 为**OK 200****

 **问题：

*   这是最好的方法吗？
*   我应该使用什么加密方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:54:45.533

不，这不是最好的方法。您永远不应该通过 http 进行身份验证，而且您绝对不应该在服务器和客户端之间进行自己的加密。请考虑使用 SSL。您可以获得支持子域和多个网站的通配符 SSL 证书，例如：x.example.com y.example.com z.example.com

这是一个反复出现的问题，答案将始终是使用已建立的技术和算法，而不是重新发明轮子并可能引入您自己的安全漏洞。

请参阅[这篇](http://www.matasano.com/articles/javascript-cryptography/)关于 javascript 密码学的文章以及为什么不这样做。

但是，当您将网站包裹在 SSL 中时，您可以使用您解释的方法，然后它将是安全的。**

# spss - 我想在 SPSS 中使用 IF 条件求和

> ID：15612309
> 
> 赞同：0
> 
> 时间：2013-03-25T10:09:41.150
> 
> 标签：spss

我正在寻找 SPSS 中的 sum if 语法。我有 3 个变量。UUID 在这里重复。我想对每个 UUID（例如：68d92）和 Virt 标志 P 的服务器计数求和。我想要 SPSS 中的语法。我怎样才能做到这一点？

```
server_conunt    `UUID`           `virt_flag` `P count (excel formula)`                                  ANswer
 1                68d92               P         '=SUMIFS([server_count],[uuid],[@uuid],[virt_flag],"P")  13
 1                68d92               P
 1                68d92              HP
 6                68d92              P
 1                68d92              P
 1                68d92              Hp
 1                68d92               P
 1                68d92               P 

 1                af8b1              P                                                                        7 
 1                af8b1              Hp 
 2                af8b1              P
 1                af8b1              Hp
 1                af8b1              P 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:19:33.210

对条件使用临时 SELECT IF 并使用 AGGREGATE 来获取新数据集中或附加到每个案例的计数。例如，要附加到现有案例，

```
temporary.
select if virt_flag eq 'P'.
aggregate /outfile=* mode=addvariables
 /break UUID
 /sum_server_conunt = sum(server_conunt). 
```

# django - ModelForms 和 ForeignKeys

> ID：15612314
> 
> 赞同：0
> 
> 时间：2013-03-25T10:09:55.263
> 
> 标签：django, django-forms

我有以下型号：

```
class Project(models.Model):
    name = models.CharField(max_length=50)

class ProjectParticipation(models.Model):
    user = models.ForeignKey(User)
    project = models.ForeignKey(Project)

class Receipt(models.Model):
    project_participation = models.ForeignKey(ProjectParticipation) 
```

此外，我有以下 CreateView：

```
class ReceiptCreateView(LoginRequiredMixin, CreateView):
    form_class = ReceiptForm
    model = Receipt
    action = 'created' 
```

我现在想要一个下拉菜单，用户可以在其中选择项目，新收据应该用于。用户应该只看到他被分配到的项目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:30:47.070

我找到了使用 ModelChoiceField 的解决方案：

```
class ProjectModelChoiceField(ModelChoiceField):
    def label_from_instance(self, obj):
        return obj.project

class ReceiptForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(ReceiptForm, self).__init__(*args, **kwargs)
        self.fields['project_participation'] = ProjectModelChoiceField(queryset= ProjectParticipation.objects)
class Meta:
    model = Receipt 
```

然后在 CreateView 中：

```
class ReceiptCreateView(...)
    def get_form(self, form_class):
        form = super(ReceiptCreateView, self).get_form(form_class)
        form.fields['project_participation'].queryset = ProjectParticipation.objects.filter(user=self.request.user)
        return form 
```

有没有办法直接在ModelForm中过滤查询集？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:58:37.233

简单的答案就是创建一个阅读文档的[模型表单，这是基本的。](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

您可能还想查看[相关名称](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)，这样您就可以在 FK 上获得相反的信息。

```
class ProjectParticipation(models.Model):
    user = models.ForeignKey(User)
    project = models.ForeignKey(Project, related_name='ProjectParticipation') 
```

# linux-kernel - 是否可以在 Linux 内核中分配大内存块？

> ID：15612315
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:09:56.023
> 
> 标签：linux-kernel

是否可以在 Linux 内核中分配一大块内存，例如 64 MiB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:15:42.423

您不能在单个 kmalloc() 或其他内存分配例程中分配 linux 内核代码中的 64 MB 内存。它有限且依赖于拱门。

您可以通过使用**引导时内存分配技术**来做到这一点。你可以参考[http://www.xml.com/ldd/chapter/book/ch13.html](http://www.xml.com/ldd/chapter/book/ch13.html)

[http://www.xml.com/ldd/chapter/book/ch07.html#t5](http://www.xml.com/ldd/chapter/book/ch07.html#t5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:51:46.217

您使用的是哪种引导加载程序？我认为在引导加载程序中，可以将一些引导参数传递给 Linux Kernelm，例如“mem=1000MB”。然后您可以使用此参数在高端保留一定数量的内存。内核启动后，内核模块或用户空间进程可以使用这个保留的内存区域来实现您的简单堆管理。没有其他人会触及这个区域。但是bootmem只能在内核启动时使用，在内核启动后释放。这不是你想要的。

# java - Jacob：在 Excel 文件中调用 vb 函数而不调用“打开”语句

> ID：15612316
> 
> 赞同：2
> 
> 时间：2013-03-25T10:10:04.380
> 
> 标签：java, excel, jacob, vba

我正在使用 Jacob 调用驻留在 Excel 文件中的宏中的 VB 函数。

这是我的代码：[我将文件和 vb 函数名称作为参数传递给下面的 java 方法]

```
private static void callExcelMacro(File file, String macroName) {
    ComThread.InitSTA();

    final ActiveXComponent excel = new ActiveXComponent("Excel.Application");

    try {
        // This will open the excel if the property is set to true
        excel.setProperty("Visible", new Variant(false));

        final Dispatch workbooks = excel.getProperty("Workbooks").getDispatch();
        //String    eventSink = null ;
        int id = Dispatch.get(workbooks, "Count").getInt();
        System.out.println("le nbre" + id);
        Dispatch.call(workbooks, "Add");
        Dispatch workBook = Dispatch.call(workbooks, "Open", file.getAbsolutePath()).toDispatch();
        //new DispatchEvents(sourceOfEvent, eventSink, progId)

        //new DispatchEvents(workBook, w , "Excel.Application");
        //System.out.println("le résultat"+eventSink);      

        //d.safeRelease();
        Variant V1 = new Variant( file.getName() + macroName);
        // Calls the macro
        final Variant result = Dispatch.call(excel, "Run", V1);

        // Saves and closes
        //Dispatch.call(workBook, "Save");

        com.jacob.com.Variant f = new com.jacob.com.Variant(true);
        //  Dispatch.call(workBook, "Close", f);

    } catch (Exception e) {
        e.printStackTrace();
    } finally {

        excel.invoke("Quit", new Variant[0]);
        ComThread.Release();
    }
} 
```

代码运行良好，但我的问题是我不想调用指令

```
Dispatch workBook = Dispatch.call(workbooks, "Open", file.getAbsolutePath()).toDispatch(); 
```

它向我显示了默认宏执行的内容（带有输入字段的界面）。

有没有办法在不“打开”Excel文件的情况下“运行”VB函数？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:22:22.097

如果不打开文件，就**无法**在 Excel 工作簿中执行 VBA 函数...

当然，您可以通过禁用 Excel 应用程序对象上的事件来阻止 AUto_open 宏运行。

在 Excel VBA 中，我们这样做：

```
Application.enableevents=false 
```

*（经常与 ScreenUpdating 和 DisplayAlerts 等其他设置结合使用）*

在 Java 中，也许你使用：

```
excel.setProperty("EnableEvents", new Variant(false)); 
```

我希望能*指引*你正确的方向（大声笑，繁荣繁荣！）

菲利普

# google-app-engine - 无法将 Cloud SQL 与 appengine 连接的 android 项目集成？

> ID：15612318
> 
> 赞同：0
> 
> 时间：2013-03-25T10:10:06.160
> 
> 标签：google-app-engine, eclipselink, datanucleus, google-cloud-sql

我有一个与 GCM 工作的 appengine 连接的 android 项目。现在，我想将本地主机上的 Mysql 实例连接到 appengine 应用程序。我已按照这些[说明](https://developers.google.com/eclipse/docs/cloudsql)进行操作，但徒劳无功。

本地 mysql 实例上的表如下所示

```
+---------+-------------+------+-----+---------+----------------+
| Field   | Type        | Null | Key | Default | Extra          |
+---------+-------------+------+-----+---------+----------------+
| _ID     | bigint(5)   | NO   | PRI | NULL    | auto_increment |
| COLUMN1 | varchar(20) | NO   |     | NULL    |                |
+---------+-------------+------+-----+---------+----------------+ 
```

我正在尝试使用端点向该表添加一行。但是，appengine 项目不断地向本地数据存储添加行。

此外，在文档中使用了 EclipseLink。一方面，默认情况下将 datanucleus 库添加到 appengine 项目中，然后出现[带有 EclipseLink 文档的 JPA](https://developers.google.com/eclipse/docs/cloudsql-jpatools)。文档令人困惑。

我应该使用 datanucleus 还是 EclipseLink？这两种方法我都试过了，都失败了。端点使用 Datanucleus 库。例如 Endpoints 使用`JPACursorHelper`Datanucleus 中的类。我想要实现的是在本地应用引擎开发中使用端点在上表中添加一行。

**请注意：**

1.  我有一个带注释的[Test.java](http://paste.ubuntu.com/5645963/)类，我已经为其生成了一个[端点类](http://paste.ubuntu.com/5645966/)。
2.  我已将`<class>`标签添加到 persistence.xml。
3.  注释处理器配置有 Datanucleus。
4.  Database Development 透视图显示本地实例已连接。
5.  我的首选是Datanucleus。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:44:51.217

您的“TestEndpoint”类将不起作用，因为它是 AppEngine/Datastore 特定的（使用该 JPACursorHelper 类）。您需要使用标准 JPA 功能编写一个类……无论该方法试图做什么。使用[GAE 特定的功能](http://code.google.com/p/datanucleus-appengine/source/browse/trunk/src/com/google/appengine/datanucleus/query/CursorHelper.java) ，您将失去可移植性。

# android - net.sqlcipher.database.SQLiteException：不是错误：

> ID：15612323
> 
> 赞同：6
> 
> 时间：2013-03-25T10:10:27.173
> 
> 标签：android, sqlite, xmlpullparser, sqlcipher

我在我的 android 应用程序数据库中收到此错误。

在`SQLite`数据库中，我`assets`借助此代码从文件夹中的脚本获取数据库查询。

```
manager = context.getResources().getAssets();
            input = manager.open("createDb.xml");
            xpp.setInput(input, null);
            int type = xpp.getEventType();
            while(type != XmlPullParser.END_DOCUMENT) {
                if(type == XmlPullParser.START_DOCUMENT) {

                    Log.d(Tag, "In start document");
                }
                else if(type == XmlPullParser.START_TAG) {
                    Log.d(Tag, "In start tag = "+xpp.getName());
                }
                else if(type == XmlPullParser.END_TAG) {
                    Log.d(Tag, "In end tag = "+xpp.getName());

                }
                else if(type == XmlPullParser.TEXT) {
                    Log.d(Tag, "Have text = "+xpp.getText()); 
                    String strquery = xpp.getText();
                    db.execSQL(strquery);
                }
                type = xpp.next();
            }
        } 
        catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

并且工作正常。

但我在`SQLCipher`数据库中运行相同的代码，它总是给出这个错误和应用程序崩溃。

即使我已经添加了所有必要的库。

```
Failure 0 (not an error) on 0x1a1ab0 when executing '
 FATAL EXCEPTION: main
 net.sqlcipher.database.SQLiteException: not an error: 
    at net.sqlcipher.database.SQLiteDatabase.native_execSQL(Native Method)
    at net.sqlcipher.database.SQLiteDatabase.execSQL(SQLiteDatabase.java:1834)
    at com.acs.android.fwk.database.ScriptExecutor.executeScripts(ScriptExecutor.java:86)
    at com.acs.android.fwk.database.DatabaseHelper.onCreate(DatabaseHelper.java:55)
    at net.sqlcipher.database.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:121)
    at com.acs.android.fwk.database.DatabaseAdapter.open(DatabaseAdapter.java:79)
    at com.acs.android.fwk.database.DatabaseAdapter.<init>(DatabaseAdapter.java:49)
    at com.acs.android.fwk.database.DatabaseAdapter.getInstance(DatabaseAdapter.java:37)
    at com.acs.nomad.ui.controller.DbDemoController.saveData(DbDemoController.java:27)
    at com.acs.nomad.ui.controller.DbDemoController_$1.onClick(DbDemoController_.java:39)
    at android.view.View.performClick(View.java:3511)
    at android.view.View$PerformClick.run(View.java:14105)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

请提供任何帮助。

坦斯克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:14:16.070

验证您是否已将`icudt46l.zip`文件包含在`assets`目录中，因为这是 SQLCipher for Android 运行所必需的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T04:54:52.503

我得到了解决方案：-

我只是添加

```
else if(type == XmlPullParser.TEXT) {
    Log.d(Tag, "Have text = "+xpp.getText());
    if(xpp.isWhitespace())
    {

    }
    else
    {
    String strquery = xpp.getText();
    db.execSQL(strquery);
    }

} 
```

我正在检查之后是否有空白，`ENDTAG`然后什么都不做，然后转到下一个。

# php - Cms 数据库许可证结构

> ID：15612330
> 
> 赞同：0
> 
> 时间：2013-03-25T10:10:41.290
> 
> 标签：php, mysql, database, data-structures, structure

我目前正在构建一个大 cms。有一张桌子叫`posts`

**她的专栏：**

`licenses_id` `post_id` `title`

现在我想要的是，当具有许可证 id 的用户例如`sSj1j221321` 插入一个新帖子时，它将在`posts`表上搜索最后`post_id`一个具有相同 licenses_id 的用户并将其插入为 post_id + 1。

**我该怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:30:26.463

您可以使用查询来获取下一个 post_id，如下所示：

1.  您可以进行查询以获取 licenses_id 的下一个 post_id，如下所示：

    ```
    SELECT `post_id`+1 AS `next_id` FROM `posts` 
    WHERE `licenses_id`='sSj1j221321' ORDER BY `post_id` DESC LIMIT 1 
    ```

2.  从上面获取`next_id`，然后`post_id`在插入查询中使用它。

# html - Web SQL 数据库将在浏览器中保留多长时间？

> ID：15612331
> 
> 赞同：7
> 
> 时间：2013-03-25T10:10:43.847
> 
> 标签：html, client-side, data-storage

我目前在我的 chrome 和 safari 浏览器中使用 web SQL 数据库。这非常适合我的要求。代码已启动并运行，并使用 HTML 概念。我做了一些研发，发现这项技术已被弃用，不再受支持。他们中的大多数人建议使用索引数据库。我不认为这对我来说是一个可行的选择，因为涉及到很多代码。

我仍然在最新的浏览器中看到 Web sql DB，并且我的应用程序运行顺利。

**我的问题和担心是，他们会从 Chrome 和 safari 浏览器中完全删除 WEB SQL 吗？**

如果发生这种情况，我将彻底完蛋。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:19:40.633

如果你的目标是移动浏览器，你可以使用 Web Sql ，或者你可以使用 index db。查看链接 [离线访问 - SQLite 或索引数据库？](https://stackoverflow.com/questions/12247380/offline-access-sqlite-or-indexeddb)

# jquery - 无法理解如何正确使用 .on

> ID：15612333
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:10:52.440
> 
> 标签：jquery

可能是一个愚蠢的问题，但对 JQuery 来说仍然是新的。

我有一个 div 作为一个按钮来通过 .load 加载内容，问题是我在 JS 中加载的任何内容都无法正常工作。

**HTML：**

```
<div class="a" id="aa">Button #1</div>
</br>
</br>
<div id="loada"></div>
</br>
</br>
<div id="loadb"></div> 
```

**JS：**

```
$(document).ready(function(){
  $('#aa').click(function(){
    $('#loada').load('load.htm #bb');
});
  $('#bb').click(function(){
    $('#loadn').load('load.htm #cc');
}); 
```

});

**加载 HTM：**

```
<div class="b" id="bb">Button #2</div>
<div class="c" id="cc">Content #1</div> 
```

我知道您需要对已加载的 JS 使用 .on 来处理动态创建的 HTML，但是我似乎无法正确处理。

有谁能帮忙吗？

编辑：下面有什么问题？

```
$('#bb').on('click', '#bb', function(event){
  $('#loadb').load('load.htm #cc');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:13:32.130

```
$("#selector").on("click", function(event){
}); 
```

委托事件方法仅将事件处理程序附加到一个元素

```
 $("#selector").on("click", "selector", function(event){

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:19:05.000

您可以尝试像这样单击加载的回调函数：

```
$(document).ready(function(){
  $('#aa').click(function(){
    $('#loada').load('load.htm #bb',function(){
        $('#bb').click(function(){
            $('#loadb').load('load.htm #cc');
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T10:15:12.527

```
 $(document).ready(function(){
      $('#aa').on("click",function(){
        $('#loada').load('load.htm #bb');
           $('#bb').on("click",function(){
                   $('#loadn').load('load.htm #cc');
                 });
          });
    });

if you are using jQuery 1.9 use "on" , if using older version use "live". [live is deprecated remember.] 
```

# java - back和cancelbutton的实现有什么区别？

> ID：15612334
> 
> 赞同：2
> 
> 时间：2013-03-25T10:10:57.607
> 
> 标签：java, android, button, destroy

我是一个尝试学习 Java/Android 编程的新手。

我在 Eclipse 中为 Android 做一个应用程序并创建了一些按钮。我有一个后退和一个取消按钮。

例子：

我有一个 EditText，你可以用你的名字写。如果你写上你的名字并按下后退按钮，那么你会回到上一个 Activity，但如果你去同一个 Activity，那么你仍然会看到你在 EditText 中写的名字。

但是如果你按下cancel按钮，你会回到之前的Activity，但是当你回来的时候，你的名字会是空的。我将“杀死”或“停止”活动。

这是我用于后退按钮的代码，你会为取消按钮使用什么？谢谢你。

```
public void onClick(View v) {
    switch(v.getId()){
    case R.id.buttonBack:
        Intent intent = new Intent (AllActivity.this, MenuActivity.class);
        startActivity(intent);
        break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:12:49.973

对于取消按钮，您可以使用以下方法，这将终止活动。

```
 finish() 
```

所以在你的代码中它看起来像这样：

```
 public void onClick(View v) {
     switch(v.getId()){
     case R.id.cancel:
         finish();
         break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:31:28.167

您可能感兴趣的另一种方法是自己清除 EditText 的内容。您需要在 xml 文件中为 EditText 定义一个 id，以便您可以通过编程方式访问它。

```
<EditText 
```

布局的东西在这里：

```
 android:layout_width="fill_parent" 
```

...然后是 id 属性

```
 android:id="@+id/edit_text_id"
    > 
```

然后在您的代码中，您将在您的类中添加以下内容（而不是在任何方法中）：

```
EditText anEditText; 
```

然后在你的 onCreate() 中，在布局膨胀之后（如果它提前出现，它将导致应用程序崩溃）：

```
anEditText = (EditText) findViewById(R.id.edit_text_id); 
```

名称 edit_text_id 并不重要，但它是我们在布局文件中使用的名称

接下来在 onClick 方法中添加取消（在 case 语句之后）：

```
//this wipes the text from the textbox
anEditText.setText("");
// add the rest of the back button code after this and your good! 
```

祝你好运！请记住，我们曾经都是新手。如果你想成为一名优秀的 android 程序员，我建议你先获得扎实的 Java 背景。这本免费的书对我帮助很大！

[Java 笔记](http://math.hws.edu/javanotes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:18:07.770

根据流程或应用流程的要求，这几乎没有什么区别。对于取消和返回工作是相同的，例如，如果您打开任何对话框并提供取消按钮将关闭/关闭您的对话框，就像返回按钮执行此操作一样。在使用 Activity 实现时，如果您为关闭当前活动而实现，则只需调用 finish() 方法即可完成这两个选项。由于后退按钮通常用于完成您当前的活动并返回。

# php - 用于更新数据库的未定义索引

> ID：15612346
> 
> 赞同：0
> 
> 时间：2013-03-25T10:11:30.047
> 
> 标签：php, mysql

我似乎找不到我的代码有什么问题。

我只是想有一个不偏不倚的意见，因为对我来说它是完美的，它不是 xD。

```
<?php
    require("common.php");
    if(empty($_SESSION['user']))
    {
        header("Location: login.php");
        die("Redirecting to login.php");
    }
    if(!empty($_POST))
    {

        if($_POST['eID'] != $_SESSION['user']['eID'])
        {
           $query = "
            SELECT
                1
            FROM users
            WHERE
                eID = :eID
        ";

        $query_params = array(
            ':eID' => $_POST['eID']
        );
              try
        {
            $stmt = $db->prepare($query);
            $result = $stmt->execute($query_params);
        }
        catch(PDOException $ex)
        {
            die("Failed to run query: " . $ex->getMessage());
        }

        $row = $stmt->fetch();

        if($row)
        {
            die("This employee ID is already registered");
        }
        }
        if(!empty($_POST['password']))
        {
            $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647));
            $password = hash('sha256', $_POST['password'] . $salt);
            for($round = 0; $round < 65536; $round++)
            {
                $password = hash('sha256', $password . $salt);
            }
        }
        else
        {
            $password = null;
            $salt = null;
        }
        $query_params = array(
            ':eID' => $_POST['eID'],
            ':user_id' => $_SESSION['user']['id'],
        );
        if($password !== null)
        {
            $query_params[':password'] = $password;
            $query_params[':salt'] = $salt;
        }
        $query = "
            UPDATE users
            SET
                eID = :eID
        ";
        if($password !== null)
        {
            $query .= "
                , password = :password
                , salt = :salt
            ";
        }
        $query .= "
            WHERE
                id = :user_id
        ";

        try
        {
            $stmt = $db->prepare($query);
            $result = $stmt->execute($query_params);
        }
        catch(PDOException $ex)
        {
            die("Failed to run query: " . $ex->getMessage());
        }
        $_SESSION['user']['eID'] = $_POST['eID'];
        header("Location: private.php");
        die("Redirecting to private.php");
    }

?>
<h1>Edit Account</h1>
<form action="edit_account.php" method="post">
    Username:<br />
    <b><?php echo htmlentities($_SESSION['user']['username'], ENT_QUOTES, 'UTF-8'); ?></b>
    <br /><br />
    EmployeeID:<br />
    <input type="text" name="eID" value="<?php echo htmlentities($_POST['eID'], ENT_QUOTES, 'UTF-8'); ?>" />
    <br /><br />
    Password:<br />
    <input type="password" name="password" value="" /><br />
    <i>(leave blank if you do not want to change your password)</i>
    <br /><br />
    <input type="submit" value="Update Account" />
</form> 
```

它是一个代码，它将改变我数据库中的数据。似乎我的“eID”有错误

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T10:20:11.550

这应该消除错误：

```
 if($_POST['eID'] != $_SESSION['user']['eID'])
        {
           $query = "
            SELECT
                1
            FROM users
            WHERE
                eID = ".$_POST['eID'];
   } 
```

如果 eID 是字符串值，则替换：

```
eID = ".$_POST['eID']; 
```

和

```
eID = '".$_POST['eID']."'"; 
```

# symfony - 在 symfony 中设置布尔值并更新

> ID：15612347
> 
> 赞同：0
> 
> 时间：2013-03-25T10:11:33.093
> 
> 标签：symfony, boolean, setvalue

我试图在更新期间设置布尔值。但返回错误。

这里是实体。

```
/**
 * Set status
 *
 * @param boolean $status
 * @return CongressStaffer
 */  
public function setMailStatus($status)
{
    $this->status = $status;

    return $this;
}

/**
 * Get status
 *
 * @return boolean
 */
public function getMailStatus()
{
    return $this->status;
} 
```

$staff->setMailStatus();

$em->flush();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:16:49.070

你得到什么样的错误？

**此外，**您需要将值传递给您的设置器，

```
$staffer->setMailStatus(true); // Or false 
```

**或者，**在你的设置器中定义一个默认值，

```
public function setMailStatus($status = false) // Or true
{
    // ...
} 
```

# php - 用于获取数组中节点的树遍历

> ID：15612350
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:11:39.937
> 
> 标签：php, tree

我有一棵这样的树

```
 2 
   /  |  \
  3   4   6
     / \
    7   8
         \ 
          9 
```

在 db 表中看起来像这样

```
 node_id parent_id  
       2        0
       3        2
       4        2
       6        2
       7        4
       8        4
       9        8 
```

问题是，如果我将 4 个节点 id 传递给函数，则返回应该在一个数组中（或逗号分隔），其中 7,8 和 9 （表示所有节点低于 4 ）。我尝试了递归函数，但没有得到我真正期望的结果。请在PHP中提出一些可能的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:22:35.763

可以看这篇文章： http: [//mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)（原来是在mysql.com下发表的，后来被删了）

对于您的数据，您可以尝试类似于以下内容：

```
CREATE TABLE `tree` (node_id INT NOT NULL,
parent_id   INT NOT NULL);

INSERT INTO `tree`(node_id, parent_id) VALUES(2,0),
(3,2),
(4,2),
(6,2),
(7,4),
(8,4),
(9,8);

SELECT t1.node_id AS lev1, t2.node_id AS lev2, t3.node_id AS lev3, t4.node_id AS lev4
FROM tree AS t1
LEFT JOIN tree AS t2 ON t2.parent_id = t1.node_id
LEFT JOIN tree AS t3 ON t3.parent_id = t2.node_id
LEFT JOIN tree AS t4 ON t4.parent_id = t3.node_id
WHERE t1.node_id = 4; 
```

# list - 如何为下拉列表创建弹性组合框

> ID：15612351
> 
> 赞同：0
> 
> 时间：2013-03-25T10:11:47.157
> 
> 标签：list, apache-flex, drop-down-menu, combobox

我想创建一个弹性组合框，但需要分组显示，并具有三个级别，格式如下。有谁有这种经历吗？

字体下拉列表

1.  中国人：

    1.1。简体中文：

    1.1.1。方松

    1.1.2。黑

    1.1.3。凯

    1.1.4。歌曲

    1.2\. 繁体中文：

    1.2.1。凯

    1.2.2。宋

2.  日本人：

    2.1。日本平成阁哥特式

    2.2\. 日本平成丸哥特式

    2.3\. 日本平成民调

3.  韩国人：

    3.1。韩国哥特式

    3.2\. 韩国明祖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:02:12.500

## 第一步：创建一个有层次感的模型类

最简单的形式是这样的：

```
public class Node {

    public var label:String;
    public var depth:int;

} 
```

## 第 2 步：创建一个自定义 ItemRenderer，将其`depth`转换为视觉填充

```
<!-- HierarchicalItemRenderer.mxml -->
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
                xmlns:s="library://ns.adobe.com/flex/spark">

    <s:Label id="labelDisplay" left="3 + (10 * data.depth)"/>

</s:ItemRenderer> 
```

## 第 3 步：使用自定义 ItemRenderer

```
<DropDownList itemRenderer="path.to.HierarchicalItemRenderer"/> 
```

一个实例作为数据提供`IList`者。`Node`

# jquery - jquery Cycle 通过回调禁用幻灯片

> ID：15612358
> 
> 赞同：1
> 
> 时间：2013-03-25T10:12:08.567
> 
> 标签：jquery, jquery-cycle

有什么办法可以使用“之前”回调来禁用幻灯片？幻灯片使用 nex / prev 选项“手动”工作，所以我想禁用这些。我尝试删除 id 属性，但这并没有禁用按钮。

也许 forwardFlag 选项可以用于此？

```
$('#slider-form').cycle({
        fx:     'fade', 
        speed:  'fast',
        prev:   '#prev', 
        next:   '#next', 
        width:  940,
        fit: 1,
        before: onBefore,
        after: onAfter,
        nowrap: 1,
        timeout: 0      
    });

function onBefore(currSlideElement, nextSlideElement, options, forwardFlag) {
    //condition is not met: disable next/prev animation

    //condition is met: enable navigation
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:23:05.813

您可以使用暂停和恢复选项。

```
$('#slider-form').cycle('pause'); 

$('#slider-form').cycle('resume'); 
```

检查这个[例子](http://malsup.com/jquery/cycle/pause.html)。

**更新**

您可以尝试这种不同的方式。

删除默认的下一个/上一个选项。创建您自己的按钮。

单击该按钮使用下一个/上一个功能。

例如。

```
$("#my_next_button").click(function(){

 condition {

        $('#slider-form').cycle('next');
 }

}); 
```

# spring - 在 Spring Hibernate 应用程序中将业务逻辑放在哪里？

> ID：15612360
> 
> 赞同：1
> 
> 时间：2013-03-25T10:12:13.120
> 
> 标签：spring, hibernate, business-logic

我有一个使用 Spring 和 Hibernate 框架编写的应用程序。一切正常，但我确实有一个问题：如果控制器通过调用服务层方法来调用业务逻辑，那么某些代码应该去哪里，例如在下面的代码中，用于设置新人员角色和密码的代码是否应该在控制器方法中处理 AddPerson 页面的 POST 请求，还是在服务层方法中？

```
// Saves addPerson.jsp.
 @RequestMapping(value = "/add", method = RequestMethod.POST)
 public String postAdd(@ModelAttribute("person") Person person) {  
      logger.debug("PersonController.postAdd called");

      // Create random number for new Person's password.
      person.setPassword(String.valueOf(Java_Utils.getRandomNumber()));

      // Create role for new Person.
      person.setRole("PERSON");

      // Add Person.
      personService.add(person);

      // Set records.jsp
      return "redirect:/demo/main/record/list";
 } 
```

这当然只是一个简单的例子，但我很好奇。PERSON 的作用是满足使用 Tomcat 的约束，以防止用户到达经过身份验证的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:23:57.290

它应该在服务层。控制器层用于处理和翻译 GUI 内容。但是创建用户并正确配置它不是 GUI 的东西，它是一个业务（或技术）用例，因此应该将它放在服务中。

```
`personService.createPersonWithRandomPassword();` 
```

# mysql - 我的大型 mysql 表注定要失败吗？

> ID：15612361
> 
> 赞同：1
> 
> 时间：2013-03-25T10:12:18.300
> 
> 标签：mysql, database, optimization, data-structures, query-optimization

我在本地计算机上建立了一个 mysql 表来存储股市数据。表名是`minute_data`，结构很简单：

![在此处输入图像描述](../Images/0f28187d13854951499103f5d2e01c7a.png)

您可以看到我将键列设置为 date 和 symbol -> 的组合`concat(date,symbol)`。这样我就`insert ignore ...`可以在不复制日期/符号组合的情况下进行查询以将数据添加到表中。

有了这张表，数据检索就很简单了。假设我想获取 symbol 的所有数据`CSCO`，那么我可以简单地执行以下查询：

```
select * from minute_data where symbol = "CSCO" order by date; 
```

一切都在“工作”。该表现在包含来自 1000 多个符号的数据，已经超过 2200 万行。我认为所有 1000 个符号甚至还没有半满，所以我期待继续增加表格的大小。

查询此表时，我开始看到严重的性能问题。例如，下面的查询（我经常想做，查看特定交易品种的最新日期）需要超过 1 分钟才能完成，并且只返回 1 行！

```
select * from minute_data where symbol = "CSCO" order by date desc limit 1; 
```

这个查询（也很重要）平均也需要超过 1 分钟：

```
select count(*), symbol from minute_data group by symbol; 
```

性能问题使得继续以这种方式处理数据变得不切实际。这些是我想向社区提出的问题：

继续将我的数据集构建到这个表中是徒劳的吗？

对于这样的数据集，MySQL 完全不是一个糟糕的选择吗？

我可以对这张表做些什么来提高性能？

为此我应该使用什么样的数据结构（而不​​是 MySQL 表）？

谢谢你！

**更新**

我提供来自 的输出`explain`，与以下 2 个查询相同：

```
explain select count(*), symbol from minute_data group by symbol;
explain select * from minute_data  where symbol = "CSCO" order by date desc limit 1; 
```

![在此处输入图像描述](../Images/0eec715f28cef2c95692f0e31c6890d5.png)

**更新 2**

很简单的修复。我执行了这个查询来删除`key_col`我上面定义的无用的，并在 2 列上创建了一个主键：日期和符号：

alter table minute_data 删除主键，添加主键（日期，符号）；

现在我尝试了以下查询，不到 1 秒就完成了：

```
select * from minute_data  where symbol = "CSCO" order by date desc limit 1; 
```

此查询仍然需要很长时间才能完成（72 秒）。我想这仍然是因为查询必须在一个查询中列出所有 2200 万行？：

```
select count(*), symbol from minute_data group by symbol; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:24:50.827

你的 key_col 完全没用。你知道你可以在多列上有一个主键吗？我建议您删除该列并按此顺序在（日期，符号）上创建一个新的主键，因为您的日期列具有更高的基数。此外，您可以（如果需要）在（符号、日期）上创建另一个唯一索引。发布`EXPLAIN`您最重要的查询。的基数是`symbol`多少？

**更新：**

您在说明中看到的是，没有可以使用的索引，它扫描了整个 2250 万行。请尝试使用上述方法。如果您现在不想删除 key_col，您至少应该在符号列上添加一个索引。

# php - 我如何在 php 中使用 python 的“For循环”来反转字符串？

> ID：15612362
> 
> 赞同：0
> 
> 时间：2013-03-25T10:12:21.273
> 
> 标签：php, python, loops

这是python代码：

```
def is_palindrome(s):
    return revers(s) == s

def revers(s):
    ret = ''
    for ch in s:
        ret = ch + ret
    return ret

print is_palindrome('RACECAR') 
# that will print true 
```

当我将该函数转换为 php 时。

```
function is_palindrome($string){
    if (strrev($string) == $string) return true;
    return false;
}
$word = "RACECAR";
var_dump(is_palindrome($word));
// true 
```

这两个函数都可以正常工作，但是，我如何在循环中使用 php 反转字符串？

```
$string = str_split(hello);
$output = '';
foreach($string as $c){
        $output .= $c;
}
print $output;
// output 
hello 
//i did this, 
```

这是工作发现，但有什么方法可以更好地做到这一点？$string = "你好"; $lent = strlen($string);

```
$ret = '';
for($i = $lent; ($i > 0) or ($i == 0); $i--)
{
    $ret .= $string[$i];
    #$lent = $lent - 1;
}

print $output;
//output 
olleh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:14:41.743

代替

```
$output .= $c; 
```

和

```
$output = $c . $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:31:37.653

我猜不能更短。有一个循环:)

```
$word = "Hello";

$result = '';
foreach($word as $letter)
    $result = $letter . $result;

echo $result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:25:51.720

我没有尝试该代码，但我认为它应该可以工作：

```
$string = "hello";
$output = "";
$arr = array_reverse(str_split($string)); // Transform "" to [] and then reverse => ["o","l","l,"e","h"]
foreach($arr as $char) {
    $output .= $char;
}

echo $output; 
```

另一种方式：

```
$string = "hello";
$output = "";
for($i = strlen($string); $i >= 0; $i--) {
    $output .= substr($string, $i, 1);
}
echo $output; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T10:13:33.163

strrev() 是一个在 PHP 中反转字符串的函数。 [http://php.net/manual/en/function.strrev.php](http://php.net/manual/en/function.strrev.php)

```
$s = "foobar";
echo strrev($s); //raboof 
```

如果你想检查一个单词是否是回文：

```
function is_palindrome($word){ return strrev($word) == $word }

$s = "RACECAR";
echo $s." is ".((is_palindrome($s))?"":"NOT ")."a palindrome"; 
```

# css - 如果地图的高度更大，街景无法正确显示图像

> ID：15612364
> 
> 赞同：1
> 
> 时间：2013-03-25T10:12:23.813
> 
> 标签：css, google-maps, google-maps-api-3, google-street-view

我根据以下使用了街景

```
/* Map html */
<div id="mapDiv" class="">
    <div id="map-holder">
    <div id="map_canvas" class="bigmap"></div>
    <div id="map_stv" class="minimap" style="display: none"></div>
    </div>
</div>

/* Css associated */
.bigmap{
    width:100%;
    height:100%;
}

.minimap{
    width:50%;
    height:100%;
}
#map_stv {
    position: absolute;
    top: 0;
    right: 0;
}
#map_stv img {
    border: none !important;
    max-width: none !important;
} 
```

当我需要显示街景时，我将小地图类添加到 map_canvas 并切换 map_stv。它工作正常。但是当地图的尺寸​​为 768x1024 时，我会遇到以下问题

![在此处输入图像描述](../Images/452e9d7b2da2ec43436d75f92c7c11fe.png)

有没有人遇到过这个？对此有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:37:25.693

[我为你做了一个小提琴！](http://jsfiddle.net/fyDkD/11/)

问题是，您的地图对于图像来说太长了，因此街景图像的顶部被切断了。

为了使您的地图具有响应性，我刚刚添加了：

```
style="width: 99%; height: 99%; 
```

到你的`#map-holder`div。

总之，我最好的选择是尝试在地图上保持或多或少均匀的纵横比，`width`并且`height`

# php - 图片转base64字符串

> ID：15612365
> 
> 赞同：0
> 
> 时间：2013-03-25T10:12:25.223
> 
> 标签：php, html, string, image

我已将图像上传到名为 images 的文件夹中，现在我试图将图像转换为字符串，但它对我不起作用，这是我的代码，任何人都可以将我重定向到正确的方向，我想将其转换为base64 字符串我已经尝试了很多代码，图像现在存储在图像文件夹中。

```
<?php
//define a maxim size for the uploaded images in Kb
define ("MAX_SIZE","1000"); 

//This function reads the extension of the file. It is used to determine if the file    is an image by checking the extension.
function getExtension($str) {
$i = strrpos($str,".");
if (!$i) { return ""; }
$l = strlen($str) - $i;
$ext = substr($str,$i+1,$l);
return $ext;
}

//This variable is used as a flag. The value is initialized with 0 (meaning no error  found)  
//and it will be changed to 1 if an errro occures.  
//If the error occures the file will not be uploaded.
$errors=0;
//checks if the form has been submitted
if(isset($_POST['Submit'])) 
{
//reads the name of the file the user submitted for uploading
$image=$_FILES['image']['name'];
//if it is not empty
if ($image) 
{
//get the original name of the file from the clients machine
$filename = stripslashes($_FILES['image']['name']);
//get the extension of the file in a lower case format
$extension = getExtension($filename);
$extension = strtolower($extension);
//if it is not a known extension, we will suppose it is an error and will not  upload the file,  
//otherwise we will do more tests
if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") &&  ($extension != "gif")) 
{
 //print error message
 echo '<h1>Unknown extension!</h1>';
 $errors=1;
 }
 else
 {
 //get the size of the image in bytes
 //$_FILES['image']['tmp_name'] is the temporary filename of the file
 //in which the uploaded file was stored on the server
 $size=filesize($_FILES['image']['tmp_name']);

 //compare the size with the maxim size we defined and print error if bigger
 if ($size > MAX_SIZE*1024)
 {
 echo '<h1>You have exceeded the size limit!</h1>';
 $errors=1;
 }

//we will give an unique name, for example the time in unix time format
$image_name=time().'.'.$extension;
//the new name will be containing the full path where will be stored (images folder)
$newname="images/".$image_name;
//we verify if the image has been uploaded, and print error instead
$copied = copy($_FILES['image']['tmp_name'], $newname);
if (!$copied) 
{
echo '<h1>Copy unsuccessfull!</h1>';
$errors=1;
}}}}

 //If no errors registred, print the success message
 if(isset($_POST['Submit']) && !$errors) 
 {
 echo "<h1>File Uploaded Successfully! Try again!</h1>";
 function encode_img($image_name)
 {
 $fd = fopen ($image_name, 'rb');
 $size=filesize ($image_name);
 $cont = fread ($fd, $size);
 fclose ($fd);
 $encimg = base64_encode($cont);
 return $encimg;
 } 
 $image_base64=encode_img('$image_name'); 
 echo $image_base64;// to encode the image 
 }
 ?>
 <!--next comes the form, you must set the enctype to "multipart/frm-data" and use an input type "file" -->
 <form name="newad" method="post" enctype="multipart/form-data"  action="">
 <table>
 <tr><td><input type="file" name="image"></td></tr>
 <tr><td><input name="Submit" type="submit" value="Upload image"></td></tr>
 </table>   
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:16:30.737

简单使用 file_get_contents

```
$contents = file_get_contents('path to your image');
$encode   = base64_encode($contents); 
```

# c# - 从 C# 打印到非默认打印机

> ID：15612370
> 
> 赞同：0
> 
> 时间：2013-03-25T10:12:41.507
> 
> 标签：c#, printing

我需要能够在没有用户输入的情况下自动打印出许多文档。

该应用程序将位于服务器上并在每天的某个时间点打印。我需要将一些文档打印到一台打印机和一些到另一台打印机。

我无法让我的代码打印到非默认打印机，除非该非默认打印机是 Microsoft XPS 文档编写器，这导致我怀疑权限。

我正在设置打印机，`PrinterSettings.PrinterName = "*printername*"`但出现打印机异常错误，提示设置不正确。

我确实找到了一篇提到类似错误的文章，但这是与 ASP.Net 而不是 C# - 它与 Windows Impersonation 有关，但我真的不明白如何让它在 c# 中工作。

我应该补充一点，我知道网络打印机名称是正确的，因为我有一点 MS 代码来显示所有已安装的打印机并从它提供的列表中复制了名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:28:37.793

如果要设置默认打印机，可以通过 winapi 执行：

```
[DllImport("winspool.drv", CharSet = CharSet.Unicode, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool SetDefaultPrinter(string Name); 
```

如果您想在代码完成后重置默认打印机，您可能需要 winapi 中的另一种方法：

```
[DllImport("winspool.drv", CharSet = CharSet.Unicode, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool GetDefaultPrinter(StringBuilder pszBuffer, ref int size); 
```

您可以通过以下方式获得的所有可用打印机的列表：

```
List<string> printers = PrinterSettings.InstalledPrinters.Cast<string>().ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:37:18.687

我刚刚发现，如果我打印到 \servername\printername 它可以工作，而不是打印到控制面板中显示的打印机名称。我现在有一个不同的问题 - 如果我打印到默认打印机，即不指定打印机，那么它会很快将它们吐出。如果我指定一台打印机，它会等待大约一分钟然后打印，然后等待一分钟然后打印下一个等等 - 为什么这样需要更长的时间？

# python - 将图像 ( png ) 转换为矩阵，然后转换为一维数组

> ID：15612373
> 
> 赞同：13
> 
> 时间：2013-03-25T10:12:43.753
> 
> 标签：python, image-processing, numpy

我有 5 张图片，我想将每个图像转换为 1d 数组并将其作为向量放入矩阵中。
我希望能够再次将每个矢量转换为图像。

```
img = Image.open('orig.png').convert('RGBA')
a = np.array(img) 
```

我不熟悉 numpy 的所有功能，想知道是否还有其他工具可以使用。
谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-25T10:50:53.337

```
import numpy as np
from PIL import Image

img = Image.open('orig.png').convert('RGBA')
arr = np.array(img)

# record the original shape
shape = arr.shape

# make a 1-dimensional view of arr
flat_arr = arr.ravel()

# convert it to a matrix
vector = np.matrix(flat_arr)

# do something to the vector
vector[:,::10] = 128

# reform a numpy array of the original shape
arr2 = np.asarray(vector).reshape(shape)

# make a PIL image
img2 = Image.fromarray(arr2, 'RGBA')
img2.show() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-12-01T16:27:59.007

```
import matplotlib.pyplot as plt

img = plt.imread('orig.png')
rows,cols,colors = img.shape # gives dimensions for RGB array
img_size = rows*cols*colors
img_1D_vector = img.reshape(img_size)
# you can recover the orginal image with:
img2 = img_1D_vector.reshape(rows,cols,colors) 
```

请注意，它`img.shape`返回一个元组，并且`rows,cols,colors`如上所述的多重赋值让我们计算转换为一维向量和从一维向量转换所需的元素数量。

您可以显示 img 和 img2 以查看它们是否相同：

```
plt.imshow(img) # followed by 
plt.show() # to show the first image, then 
plt.imshow(img2) # followed by
plt.show() # to show you the second image. 
```

请记住，在 python 终端中，您必须关闭`plt.show()`窗口才能返回终端以显示下一个图像。

对我来说这是有道理的，并且只依赖于 matplotlib.pyplot。它也适用于 jpg 和 tif 图像等。我尝试使用的 png 具有 float32 dtype，而我尝试使用的 jpg 和 tif 具有 uint8 dtype（dtype = 数据类型）；每个似乎都有效。

我希望这是有帮助的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T20:08:57.327

我曾经使用以下代码将 2D 转换为 1D 图像阵列：

```
import numpy as np
from scipy import misc
from sklearn.decomposition import PCA
import matplotlib.pyplot as plt

face = misc.imread('face1.jpg');
f=misc.face(gray=True)
[width1,height1]=[f.shape[0],f.shape[1]]
f2=f.reshape(width1*height1); 
```

但我还不知道如何稍后在代码中将其更改回 2D，还要注意并非所有导入的库都是必需的，希望对您有所帮助

# php - 使用 MySQL 的对象上的迭代器

> ID：15612375
> 
> 赞同：1
> 
> 时间：2013-03-25T10:12:44.537
> 
> 标签：php, mysql, oop

我正在考虑这样的问题......假设我们有一个类Person：

```
 class Person {  
    private $iPersonId;
    private $sName;  
    private $sLastName;  
    private $rConn;

public function __construct($rConn, $iPersonId) {
$this->rConn = $rConn;
$this->iPersonId = $iPersonId;
}

   public function load() {
      // load name and last name using the $rConn object and $iPersonId
   }  
   } 
```

现在我们想对很多人执行一些操作，所以我们编写了一个新类：

```
class People {

private $aPeople = array();

public function addPerson(Person $oPerson) {
// ...
}

public function loadPeople() {
// PROBLEM HERE //
}

} 
```

现在有两个问题： 1\. Person 和 People 具有相同的加载接口（函数 load()），但如果我想在 People 中迭代 $aPeople 来加载他们的数据，那么这将导致 maaaaany 查询，例如：

```
SELECT * FROM people WHERE id = 1
SELECT * FROM people WHERE id = 2
SELECT ......
.....
.... 
```

如果想加载 1000，那么事情会变得繁荣 :) 。

如何设计此代码以在一个查询中加载所有用户？（在）

1.  我必须在添加到 People 的每个 Person 对象中继续使用依赖注入。这违反了 DRY 规则，而且看起来不太好。

那么亲爱的用户，设计这段代码的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:45:11.517

[如果您在 Symfony2 ( http://symfony.com/doc/2.0/book/service_container.html](http://symfony.com/doc/2.0/book/service_container.html) )中构建服务，您只需添加方法即可。在“人”上使用“load()”听起来不正确。它本身加载了什么？让您的对象或实体访问数据库也是一种不好的做法，这会导致不必要的依赖关系。

*   您的实体或对象永远不应该具有加载自身的功能，这是不好的做法。让其他东西管理实体或对象。
*   不要产生导致混乱的依赖关系，保持对象有自己的用途。PersonEntity 永远不应该知道有关数据库连接或 EntityManager 的任何信息
*   构建您的代码，以便您可以将其移动到另一个项目中，而不会破坏 Composer。[http://getcomposer.org/](http://getcomposer.org/)

例如我将如何在 symfony2 中做到这一点

```
class PeopleService
{
  private $em;

  /**
   * @param EntityManager $em
   */
  public function __construct(EntityManager $em)
  {
    $this->em = $em;
  }

  /**
   * @param int $id
   * @return Person
   */
  public function loadPerson($id)
  {
    // do something and return 1 person
    return $this->em->find('MyBundleNamspace:Person', $id);
  }

  /**
   * @return array of Person objects
   */
  public function loadPeople()
  {
    // do something and return an array with persons
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:33:38.290

我建议在 People 中使用静态方法来加载大量人员。这还需要您重写构造函数，或添加另一个方法来初始化其他数据。

```
class Person {  
  protected $_data
  protected $rConn;

  public function __construct($rConn, $iPersonId) {
    $this->rConn = $rConn;
    $this->_data = array();
    $this->_data['id'] = $iPersonId;
  }

  public function load() {
    // load name and last name using the $rConn object and $iPersonId
  }

  // under the assumption, that $rConn is a mysqli connection
  // if not rewrite the specific section
  // also there is no injection protection or error handling in here
  // this is just a workflow example, not good code!
  public static function loadPeople($ids) {
    $res = $rConn->query("select * from people where id in (" . implode(',', $ids) . ")");
    $people = array();
    while ($row = $res->fetch_assoc()) {
      $p = new People($rConn, $row['id']);
      $p->setData($row);
      $people[] = $p;
    }
    $res->free();
    return $people;
  }

  public function setData($data) {
    foreach ($data as $key => $value {
      $this->_data[key] = $value;
    }
  }
} 
```

# c - 在 C 中使用包含的最佳实践

> ID：15612380
> 
> 赞同：3
> 
> 时间：2013-03-25T10:12:57.327
> 
> 标签：c, include

我正在学习`C`，我不确定在哪里包含文件。基本上我可以`.c`在文件中或`.h`文件中执行此操作：

**选项1**

测试.h

```
int my_func(char **var); 
```

测试.c

```
#include <stdio.h>
#include "test.h"
int my_func(char **var) {printf("%s\n", "foo");}
int main() {...} 
```

**选项 2**

测试.h

```
#include <stdio.h>
int my_func(char **var); 
```

测试.c

```
#include "test.h"
int my_func(char **var) {printf("%s\n", "foo");}
int main() {...} 
```

使用**选项 2**，我只需要包含`test.h`在我需要库的任何`.c`文件中。我看到的大多数示例都使用**选项 1**。

是否有一些一般规则何时做什么，或者这是个人喜好的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:16:12.107

不要使用`include`s，你不需要。

我会选择“选项1”之类的东西。为什么是“类似”？因为我会为 . 创建一个单独的文件，`main`我会将所有声明保存`.h`在`.c`.

当然，这两个选项都是有效的。

如果您只想在 中包含一个标头`main`，您可以创建一个仅包含`include`s 的标头文件 - 这是一种常见的做法。这样，您可以只包含一个标题，而不是多个标题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T10:16:04.670

我倾向于选择选项 1，因为循环依赖在选项 2 中会很快出现并咬住你，并且减少输入大小是保证更快编译时间的最佳方法。选项 2 倾向于将所有内容都包含在内，无论您是否真的需要它。

也就是说，最好尝试一下对构建项目有用的方法。硬性规定往往不适用于这类问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T10:14:42.037

两个选项都是正确的。C 标准允许两种解决方案

必须制作所有 C 标准头文件，以便它们可以按任意顺序多次包含：

> 标准标题可以以任何顺序包含；每个都可以在给定范围内多次包含，与仅包含一次没有任何不同的效果

（来自[预处理器 #ifndef](https://stackoverflow.com/questions/9690212/preprocessor-ifndef)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:54:01.953

没有规则指定您遵循特定的时尚。即使您在 test.c 文件中包含/不包含在内，只要您将其包含在 test.h 文件中并将该 test.h 文件包含在 test.c 中，它也不会太麻烦。希望你清楚这一点。

这是因为，您有 #ifndef、#define、#endif 之类的预处理器指令。它们被称为**Include 守卫**。这些在 inbuild 头文件中使用。但是，当您包含您编写的文件时，请使用您的选项 2，或使用包含防护以确保安全。

包含警卫的工作方式如下。#ifndef 任何东西 #define 任何东西 .. .. .. #endif

因此，当您第一次包含时，ANYTHING 尚未定义。所以 ifndef 返回 true，然后 ANYTHING 被定义，等等......但是下一次如果你包含同一个文件（错误地） ifndef 将返回 false，因为现在定义了 ANYTHING，所以文件不会被包含一点也不。这种保护对于避免头文件中存在的变量重复声明是必要的。那会给你一个编译错误。

希望能帮助干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:35:35.907

我更喜欢在 c 文件中使用包含。如果您的程序变得越来越大，您可能会忘记在一个头文件中包含某些内容，但它包含在您使用的另一个头文件中。通过将它们包含在 c 文件中，您在编辑其他文件时不会丢失包含。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T10:18:41.430

我不认为有一个普遍的规则（从“语法”的角度来看，你的选择都是正确的并且会起作用）。通常所做的是在 .h 文件中包含库所需的头文件（如选项 1 所示），或者是因为在使用库时需要它们（从而避免始终包含相同的头文件集在你的 .c 文件中，这更容易出错），或者因为它们在 .h 文件本身中被提及（例如，如果你`int32_t`在 .h 文件的函数原型中使用 as 类型，你当然需要包括`<stdint.h>`在 .h 文件中）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T11:27:00.673

我更喜欢选项 1。我想知道我在项目中使用了什么，并且在很多时候，选项 1 在时间和效率上都比选项 2 更有效。

# windows - Windows Azure 门户登录到门户并收到错误“我们无法将您登录到门户”

> ID：15612384
> 
> 赞同：12
> 
> 时间：2013-03-25T10:13:09.037
> 
> 标签：windows, azure, login, portal, subscription

1.  打开浏览器
2.  导航到[http://www.windowsazure.com/en-us/](http://www.windowsazure.com/en-us/)
3.  选择门户右上角
4.  使用我的电子邮件地址登录
5.  收到以下错误

[https://manage.windowsazure.com/Error/Login?getsupport=true&f=255&MSPPError=-2147217320](https://manage.windowsazure.com/Error/Login?getsupport=true&f=255&MSPPError=-2147217320)

收到错误“我们无法将您登录到门户，请联系客户服务寻求帮助。”

使用 IE 或 Chrome，是否隐身，是否清除 cookie，是否清除缓存。问题依然存在。还尝试在多种设备媒体中心 PC、运行 windows 7、iPhone 5、ipad 3 的桌面...

在 2012 年 11 月之前，我已经毫无问题地访问了 windows azure 订阅。

我点击了客户服务链接，澳大利亚号码是 13 20 58 我已联系该号码，解释说我无法访问我的 windows azure 订阅，每次登录时都会收到错误消息。他们继续将我重定向到其他支持团队，在那里我重复我的详细信息以及他们再次重定向我或提供电话号码的问题。在一种情况下，我被重定向到一个不再存在的号码。另一个我被告知要在 windows azure 门户页面上提出一个案例，这是我在登录时收到错误的同一门户页面，当我询问替代选项时没有。到目前为止，我已经与 msdn 支持团队、windows 订阅支持、在线服务等进行了交谈，但仍然没有解决方案。在最新的支持电话中，他们说要在论坛上提出这个问题，所以就这样吧。

无论如何，长话短说，我可能已经花了 3 个多小时打电话给微软支持解释问题，等待等待，被重定向，重复......我仍然无法访问我的 windows azure 订阅

我签入了 commerce.microsoft.com，并且有一个与我的电子邮件地址关联的 windows azure 订阅 Subscription-1 Windows Azure MSDN - Visual Studio Premium

有人对如何解决此问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-14T04:27:21.333

*为像我一样并跳过阅读 OP 问题下方的评论（小字体）的人进行编辑。这已解决，是由于我在下面列出的第一个原因。但是，它也可能（并且已经）由于其他原因在过去发生过，所以不妨将这个回复保留在这里，以防它帮助其他人。*

*   尝试登录[https://portal.azure.com/](https://portal.azure.com/)
*   manage.windowsazure.com 甚至无法解析任何网站的 DNS - 我不确定您如何获取该地址（可能来自尚未更新的 Azure IAM 管道的某些部分）以及（更有趣的是）您如何获取该地址能够打开该链接 - 也许这是仅在您所在地区可用的东西！（但我在这里伸展）。

无论如何，我还尝试查找类似问题的其他实例，一般而言，我发现此问题与帐户已转换到 Office 365 的情况有关。

*   [此处](https://social.msdn.microsoft.com/Forums/en-US/b2375030-ecc7-4460-aac1-12124ee59fb6/windows-azure-portal-login-to-portal-and-receive-error-8220we-are-having-trouble-logging-you-into?forum=windowsazuremanagement)移动了一个帐户并导致创建了两个具有不同密码的帐户 - 此处的解决方案是将 Office 365 帐户（新帐户）设置为用于设置 Azure 帐户的旧帐户的共同管理员。
*   [此处](http://www.viding.se/?p=62)的帐户未在 Azure AD 存储中正确预配，必须使用 DirSync 删除并重新创建
*   [在这里](https://social.microsoft.com/Forums/security/zh-CN/bcb8d97b-0043-46c8-86ee-f7083b21e966/acs20012-the-request-is-not-a-valid-wsfederation-protocol-message?forum=WindowsAzureAD)，问题似乎与 Azure AD 中的（新）帐户配置有关。

一般来说，这似乎是一个很难向 1 级支持解释的问题。与您的组织 IT 管理员交谈可能会有更好的经验，并让他们检查可能与上述内容相似的任何不一致之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-31T02:52:54.313

有一段时间它发生了等待一段时间，然后重试

或者只是在 twitter 上询问 azure 支持

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-06-25T19:34:01.107

很高兴听到支持解决了这个问题。自此发布以来，我们对登录过程和帐户类型进行了许多更新（包括添加 MFA）。在 TechEd 上，我们宣布了一个新门户（视频 @ [http://channel9.msdn.com/Blogs/Windows-Azure/Azure-Preview-portal](http://channel9.msdn.com/Blogs/Windows-Azure/Azure-Preview-portal)），如果您想了解即将发生的事情。

# alloy - 碳氢化合物合金模型

> ID：15612386
> 
> 赞同：1
> 
> 时间：2013-03-25T10:13:13.470
> 
> 标签：alloy

我需要使用合金模拟碳氢化合物结构基本上我需要设计烷烃、烯烃和炔烃基团我创建了以下签名（烯烃示例）

```
sig Hydrogen{}
sig Carbon{}
sig alkenegrp{
    c:one Carbon,
    h:set Hydrogen,
    doublebond:lone alkenegrp
}
sig alkene{
    unit : set alkenegrp
}
fact{
    all a:alkenegrp|a not in a.doublebond.*doublebond
    all a:alkenegrp|#a.h=mul[#(a.c),2]
}
pred show_alkene{
    #alkene>1
}
run show_alkene 
```

这适用于烯烃，但是当我尝试通过改变**所有 a:alkynegrp|#ah=minus[mul[#(ac),2],2]**的事实来为烷烃或炔烃设计相同的东西时，它不起作用。谁能建议我如何实现它？

我的问题陈述是在有机化学中饱和碳氢化合物是完全由单键组成的有机化合物，并被氢饱和。饱和烃的通式是 C [n] H [2n+2]（假设非环状结构）。也称为烷烃。不饱和烃在碳原子之间具有一个或多个双键或三键。具有双键的称为烯烃。具有一个双键的那些具有式 C [n] H [2n]（假设非环状结构）。含有三键的称为炔烃，通式为C [n] H [2n-2]。模拟碳氢化合物并给出谓词以生成烷烃、烯烃和炔烃的实例。我们尝试过：

```
sig Hydrogen{}
sig Carbon{}

sig alkane{
c:one Carbon,
h:set Hydrogen,
n:lone alkane
}

fact{
//(#h)=add [mul[(#c),2],2]
//all a:alkane|a not in a.*n
all a:alkane|#a.h=mul[#(a.c),2]
}
pred show_alkane(){}

run show_alkan 
```

e

烷烃的一般公式是 C [n] H [2n+2]，对于乘法，我们可以使用 mul 内置函数，但我们不能写加法，因为我们必须做 C [n] H [2n+2]。我们应该写什么才能使它适用于烷烃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:03:59.603

我现在对烷烃、烯烃和炔烃有了更好的了解，但我仍然不明白为什么你认为你的合金模型不起作用。

要表达 C [n] H [2n-2]约束，您当然可以写出您建议的内容

```
all a:alkynegrp |
   #a.h = minus[mul[#(a.c), 2], 2] 
```

问题只是在您`alkane`所说的 sig 声明中`c: one Carbon`，这会将碳原子的数量固定为 1，因此`minus[mul[#(a.c), 2], 2]`总是会计算为 0。我假设您想为任意数量的碳合金（因为 C [n] ) 所以你应该把它从 更改`c: one Carbon`为`c: set Carbon`。如果您然后运行`show_alkane`谓词，您应该得到一些碳数大于 1 的实例，因此氢数大于 0。

此外，对于烷烃式

```
all a:alkynegrp |
   #a.h = plus[mul[#(a.c), 2], 2] 
```

默认范围 3 是不够的，因为当`a.c`非空时您将需要至少 4 个氢原子，但您可以通过显式给出范围来解决此问题

```
run show_alkane for 8 
```

如果这不是您所说的问题，请更具体地说明您认为“它不起作用”的原因，即您期望 Alloy 做什么以及 Alloy 实际上做什么。

# solr - 是否可以过滤 solr Document 中返回的字段？

> ID：15612387
> 
> 赞同：0
> 
> 时间：2013-03-25T10:13:13.927
> 
> 标签：solr, lucene

我有如下所示的 solr 文档：

```
<doc>
    <str name="some_attribute">some_attribute_value</str>
    <!-- ... -->
    <arr name="locationCoordinates">
      <str>48.117,11.539</str>
      <str>23.423,11.342</str>
      <!-- ... -->
    </arr>
</doc> 
```

我的问题是是否可以过滤文档的返回字段以仅返回某些值，例如仅返回`locationCoordinates`另一个点 50 公里范围内的值，而将其他值排除在外。

即返回上述文件，但只有第一个`locationCoordinates`。

我真的不知道这在 Solr 中是否可行（因为面向文档的结构），但我至少可以问:)。

也许我还应该详细说明我想使用此功能的方式以及为此“找到”的替代方案：

1.  更改文档设计以在每个位置创建一个文档（优点：有效，缺点：需要在客户端检查重复项，Solr 数据库中的大量重复数据）

2.  保留这个结构（优点：工作，不必更改当前结构，缺点：我必须自己（在客户端）排序正确的坐标，因此遇到距离计算问题（我已经过滤了文档事先按距离，如果我在客户端计算的距离很差，可能会丢失一些数据）

3.  在 Solr 端为位置（及其名称等）创建一个新的文档“类型”，并使用类似外键的结构将位置添加到文章中，以便计算我必须查询的距离首先到达可到达的位置，然后加入文章（优点：一切都在 solr 端有效，缺点：我需要 Solr-Joins）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:58:14.760

> 1.  更改文档设计以在每个位置创建一个文档（优点：有效，缺点：需要在客户端检查重复项，Solr 数据库中的大量重复数据）

如果这是您唯一关心的问题，您可能可以考虑将 设置`locationCoordinates`为每个文档的**unique_key 。**

通过这样做，您**不允许** `locationCoordinates`在您的索引中重复，从而消除了在客户端检查重复项的需要。

# google-maps - 基于视口和缩放级别获取一组纬度值的算法或公式

> ID：15612392
> 
> 赞同：0
> 
> 时间：2013-03-25T10:13:23.117
> 
> 标签：google-maps, maps, openlayers

我需要在地图上显示大约 50,000 个标记。但我只能绘制 10000 个点。如果我错了，我想以这种方式纠正我......而不是一次获取整个数据，只需获取视口中的点并取决于缩放级别。

例如：谷歌地图：在一个缩放级别上，如果我们放大更多城市，则只显示州

我坚持使用缩放级别..如何关联缩放级别和视口。是否有任何算法或公式有助于获取经纬度值，或者需要在数据库中硬编码，例如特定的经纬度，这是缩放级别范围所以在检查获取范围时。

我正在使用 openlayers bbox 功能来获取边界

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:38:22.613

google.maps.Map.getBounds() 将返回视口的纬度/经度边界。

与谷歌地图所能处理的相比，50,000 个标记已经很多了；您必须放大才能有足够的标记以低于限制。通过使用点而不是标记创建自定义图块，您可能会做得更好。[您可以在http://maps.webfoot.com/demos/election2008/](http://maps.webfoot.com/demos/election2008/)看到一个示例

向下滚动到第三个叠加层以查看点；选择邮政编码以查看很多点。

# c# - 基于其属性删除 XDocument 节点的问题

> ID：15612393
> 
> 赞同：1
> 
> 时间：2013-03-25T10:13:25.327
> 
> 标签：c#, linq, linq-to-xml

我正在尝试根据其属性删除被调用的`CreditCard`节点，但它没有按预期工作。`XDocument``doc``name`

`doc`是我的`XDocument`，它看起来像这样：

```
XDocument doc = new XDocument(
                new XComment("XML test file"),
                new XElement("CreditCards",
                    new XElement("CreditCard",
                        new XAttribute("Name", "TestCard1"),
                        new XAttribute("phoneNumber", 121212142121)),
                    new XElement("CreditCard",
                        new XAttribute("Name", "TestCard2"),
                        new XAttribute("phoneNumber", 6541465561)),
                    new XElement("CreditCard",
                        new XAttribute("Name", "TestCard3"),
                        new XAttribute("phoneNumber", 445588))
                )
            ); 
```

这是我尝试运行的查询，但它不会删除节点。`name`是一个字符串，我作为参考传递给这个函数，告诉它要删除什么

```
var q = from node in doc.Descendants("CreditCards")
                        let attr = node.Attribute("name")
                        where attr != null && attr.Value == name
                        select node;
q.ToList().ForEach(x => x.Remove()); 
```

我没有收到任何错误，但也没有删除任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:48:32.590

您的查询中有小写的属性名称`name`。但是在您的 xml 属性名称中是`Name`. Xml 区分大小写。属性`Name`也是元素的子`CreditCard`元素，而不是元素的子`CreditCards`元素：

```
doc.Descendants("CreditCards")
   .Elements()
   .Where(c => (string)c.Attribute("Name") == name) 
   .Remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:23:21.900

您的代码正在寻找带有名称的“CreditCards”，而不是“ **CreditCard** **”**。您也没有在示例文档中的任何地方使用属性。

尝试以下操作；

```
doc.Descendants("CreditCard")
   .Where(x => (string)x.Element("Name") == name)
   .Remove(); 
```

# jquery-mobile - iPad 上的 HTML5 画布（使用 Phonegap）未按预期工作

> ID：15612394
> 
> 赞同：2
> 
> 时间：2013-03-25T10:13:25.990
> 
> 标签：jquery-mobile, canvas, easeljs

我正在使用 Phonegap 和 jQuery mobile 开发一个 iPad 应用程序。所需的功能之一是允许应用程序的用户在 2 个框中签名（他们的签名）。我正在使用[**easel.js**](http://www.createjs.com/#!/EaselJS)来处理画布元素上的“绘图”。

该页面的 HTML 结构类似于：

```
<div class="signature-wrapper sw1">
    <canvas class="flexBox" id="myCanvas" width="240" height="240"></canvas>
</div>

<div class="signature-wrapper sw2">
    <canvas class="flexBox" id="myCanvas2" width="240" height="240"></canvas>
</div> 
```

2 个画布元素是绘制签名的位置。在每个元素下方是用于清除和保存每个元素的按钮。单击时，它们会触发功能以清除画布，或将画布保存到图像（然后将图像放置在画布上，并在清除时移除）

保存功能类似于：

```
function saveStage1(){
    var canvas  = document.getElementById("myCanvas"); 
    var imageData = canvas.toDataURL("image/png");
    $('.sw1').append("<img src='" + imageData +"' style='position: absolute; left: 0px; top: 0px;' />");   
} 
```

基本上，它只是获取画布的内容并将其保存为 PNG 图像，然后将其附加到画布元素的包装器中。为了清楚起见，我在此处的代码中省略了其他代码，用于处理`localStorage`和`db.transactions`.

此功能按预期工作。

下一个功能是清除画布：

```
function clearStage1(){
    oldMidX, oldMidY, oldX, oldY = null;
    delete window.currentShape;
    stage.clear();
    stage.removeAllChildren();
    stage.update();

    var canvas  = document.getElementById("myCanvas"); 
    var context = canvas.getContext("2d");

    var imageObj = new Image();
    imageObj.onload = function() {
        context.drawImage(imageObj, 0, 0);
    };
    imageObj.src = 'images/signature-client.png';
    $('.sw1 img').remove();
} 
```

这将清除画布，清空一些变量，并重新创建画布。

这在 chrome 和 safari 中 100% 有效，但在 iPad 上作为 Phonegap 应用程序无法正常工作。**在 iPad 上，您可以绘图，但是一旦您单击保存或清除，您将无法在不导航并返回屏幕的情况下进行绘图**。页面上的 save 和 clear 函数似乎都存在 JavaScript 错误，这会阻止任何进一步的 JavaScript 在不“重新加载”页面的情况下执行。

我已经在 mac 上的 Safari 中设置了我的控制台来查看 xcode 应用程序，并且日志中没有错误。任何帮助，将不胜感激。

# java - 使用附加参数调用 AsyncTask 类以检查在何处显示图像

> ID：15612400
> 
> 赞同：0
> 
> 时间：2013-03-25T10:13:33.593
> 
> 标签：java, android, parameters, android-asynctask

我正在使用 AsyncTask 类为我的测验应用程序下载图像。这是**课程**：

```
public class DownloadImagesTask extends AsyncTask<ImageView, Void, Bitmap>{

    ImageView imageView = null;

    @Override
    protected Bitmap doInBackground(ImageView... imageViews) {
        this.imageView = imageViews[0];
        return download_Image((String)imageView.getTag());
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        // imageView.setImageBitmap(result);
        downloaded_image = new BitmapDrawable(result);
        //setting question image
        question_view.setCompoundDrawablesWithIntrinsicBounds(null, null, null, downloaded_image);
    }

    private Bitmap download_Image(String url) {

        //---------------------------------------------------
        Bitmap bm = null;
        try {
            URL aURL = new URL(url);
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
        } catch (IOException e) {
            Log.e("Hub","Error getting the image from server : " + e.getMessage().toString());
        } 
        return bm;

        //--------------------------------------------------
    }

} 
```

图像正在下载，我将图像放入我的**问题 TextView**中，如下所示：

```
downloaded_image = new BitmapDrawable(result);
//setting question image
question_view.setCompoundDrawablesWithIntrinsicBounds(null, null, null, downloaded_image); 
```

我**从我的活动中给这个班级打电话，**如下所示：

```
//image download
String imageURL = "http://cache.daylife.com/imageserve/074efG3gPV4oK/50x50.jpg";

image_downloadView.setTag(imageURL);
new DownloadImagesTask().execute(image_downloadView); 
```

我想传递一些额外的参数，以确定我是下载问题的图像还是答案 TextViews。

我如何实现这一目标？

提前致谢！

**PS：对于每组问题，我在申请中都有一个问题和四个选项。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:20:39.803

您可以将参数传递给 AsyncTask 构造函数。

```
DownLoadImagesTask dt= new DownLoadImagesTask("hello",1); //passing string and integer value
dt.execute(image_downloadView); 
```

在异步任务中

```
String s;
int value;
public DownLoadImagesTask(String string, int i) {
    // TODO Auto-generated constructor stub
    s=string;
    value=1; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:41:56.957

您可以将第一个参数的类型更改为对象（或创建自定义参数类/哈希 - 最佳选择）并将多个项目传递给它。

```
ImageView imgView = (ImageView) findViewById(R.id.imageView1);
String param = "parameter";

MyAsyncTask task = new MyAsyncTask();
task.execute(param, imgView);

private class MyAsyncTask extends AsyncTask<Object, Void, Void> {

    private String parameter;
    private ImageView imgView;

    @Override
    protected Void doInBackground(Object... params) {

        //Looping option
        for (Object object : params) {
            if (object instanceof String) {
                this.parameter = (String) object;
                //do_something
            } else if (object instanceof ImageView) {
                //do_something_else 
            }
        }

        //Direct access option

        this.parameter = (String) params[0];
        this.imgView = (ImageView) params[1];

        return null;
    }   

} 
```

在您的情况下，您可以通过 View

```
new DownloadImagesTask().execute(image_downloadView, question_resultView);

private class DownloadImagesTask extends AsyncTask<View, Void, Bitmap> {

    TextView questionView = null;
    ImageView imageView = null;

    @Override
    protected Bitmap doInBackground(View... views) {
        for (View view : views) {
            if (view instanceof ImageView) {
                this.imageView = (ImageView) view;
            } else if (view instanceof TextView) {
                this.questionView = (TextView) view;
            }
        }

        return download_Image((String)imageView.getTag());

    } 

    @Override
    protected void onPostExecute(Bitmap result) {
        // imageView.setImageBitmap(result);
        downloaded_image = new BitmapDrawable(result);
        //setting question image
        questionView.setCompoundDrawablesWithIntrinsicBounds(null, null, null, downloaded_image);
    }

} 
```

# java - Android-Stuck 与两个视图的比较

> ID：15612402
> 
> 赞同：0
> 
> 时间：2013-03-25T10:13:49.507
> 
> 标签：java, android

我有两组按钮，在我的 android 应用程序中，每组都有三个按钮和三个活动，例如活动 A、活动 B 和活动 C。

**A组**

```
Button 1

Button 2

Button 3 
```

**B组**

```
Button 5 

Button 6

Button 7 
```

如果我单击按钮 1，然后单击按钮 5，则必须打开活动 A

如果我单击按钮 2，然后单击按钮 6，则必须打开活动 B

如果我单击按钮 3，然后单击按钮 7，则必须打开活动 C。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:05:24.243

这是一个例子：

```
<LinearLayout 
        android:id="@+id/group_A"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <Button 
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="startActivityA"/>
        <Button 
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="startActivityB"/>
        <Button 
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="startActivityC"/>
    </LinearLayout>

    <LinearLayout 
        android:id="@+id/group_B"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <Button 
            android:id="@+id/button5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="startActivityA"/>
        <Button 
            android:id="@+id/button6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="startActivityB"/>
        <Button 
            android:id="@+id/button7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="startActivityC"/>
    </LinearLayout> 
```

在您想要开始您的活动 A、B 和 C 的活动中，您需要定义您的方法，例如

```
public void startActivityA(View view) {
    Intent i = new Intent(this, ActivityA.class);
    startActivity(i);       
} 
```

# inline-assembly - 获取 ARM 内联汇编中的地址

> ID：15612404
> 
> 赞同：2
> 
> 时间：2013-03-25T10:13:53.027
> 
> 标签：inline-assembly, iar

ARM Cortex-M3 的 IAR 编译器提供内联汇编。如何将特定函数的地址存储到堆栈上的某个位置？

C代码会这样

```
void tick();

void bar()
{
    int x;
    // modify a value on stack
    (&x)[4] = &tick;
} 
```

虽然这通常有效，但编译器在发布版本中对其进行了优化。我试图用内联汇编对其进行编码

```
void bar()
{
    int x;
    asm("ldr r0,%0" : : "i" (&tick));
    asm("str r0,[sp+#0x10];
} 
```

`ldr`IAR 编译器不接受该指令。问题是这条指令需要一个带有寄存器和偏移量的寻址模式。函数的实际地址`tick`存储在函数后面，`ldr`指令仅保存到保存实际地址的内存位置的偏移量。反汇编类似这样：

```
 ldr r0,??tick_address
    str r0,[sp+#0x10]
    bx lr ; return
??tick_address dd tick 
```

如何`tick`立即获取寄存器的地址以将其用于堆栈操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:14:24.657

GNU GCC 内联汇编可以通过伪空语句进行简单的*赋值*`asm()`，例如：

```
asm("" : "=r"(foo) : "0"(tick)); 
```

这告诉编译器：

1.  该变量`foo`将从内联汇编块之后的寄存器中获取
2.  变量`tick`将被传入 - 在*同一个*寄存器中（参数零）

使用哪个寄存器的实际选择完全留给编译器。

这里的技巧是*输出*和*输入*约束——我们只是将（一个且唯一的）输入*别名*到输出，编译器将自行选择合适的寄存器，并生成加载/存储相应变量所需的指令在“实际”内联汇编代码之前/之后。你甚至可以这样做：

```
asm("" : "=r"(foo1), "=r"(foo2) : "0"(tick1) , "1"(tick2)); 
```

在单个内联汇编语句中执行两个“分配”。

即使实际的内联程序集为空（如此处），编译器生成的“设置输入，检索输出”代码生成也会发生。

另一个例子：假设你想读取当前的程序计数器——`PC`寄存器。您可以通过两个不同的内联汇编语句在 ARM 上执行此操作：

```
asm("" : "=pc"(foo));
asm("mov %0, PC" : "=r"(foo)); 
```

这不是 100% 相同的；在第二种情况下，编译器知道它想`foo`在*之后*看到的任何寄存器`asm`，它都会在那里找到它。在前者中，编译器知道要在语句`foo` *之后*使用它，它需要从`PC`. 两者之间的区别在于，如果您这样做：

```
uintptr_t *val;
uintptr_t foo;

asm("" : "=pc"(foo));
*val = foo; 
```

在这种情况下，编译器可能会识别出 this 可以转换为单个`str [R...], PC`，因为它知道`foo`在`pc`asm 之后。你是通过以下方式写的吗

```
asm("mov %0, PC" : "=r"(foo));
*val = foo; 
```

编译器将被迫创建（假设它选择`R0`/ `R1`for `foo`/ `val`）：

```
MOV R0, PC
STR [R1], R0 
```

此行为的文档主要[位于 GCC 手册的“扩展 ASM”部分中](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)，请参阅人为`combine`指令的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:16:09.507

您的代码中没有分配变量`x`，因此它的值是未定义的，并且`foo`不需要设置为未定义的值来更改`foo`。

您需要将值分配给变量，而不是您假设编译器用来实现它的某个内存位置。

# c# - Skype 机器人帮助 .NET 错误

> ID：15612405
> 
> 赞同：1
> 
> 时间：2013-03-25T10:13:57.230
> 
> 标签：c#, .net, bots, skype

我试图制作一个 Skype 机器人，它会在发送某个关键字时自动发回一条消息。它似乎在 MVS 中运行良好，但是当我实际运行它时，我收到此错误未处理的异常已在您的应用程序中发生；

```
************** Exception Text **************
System.Runtime.InteropServices.COMException (0x80040154): Retrieving the COM class factory for component with CLSID {830690FC-BF2F-47A6-AC2D-330BCB402664} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
   at SkypeBing.Form1.Form1_Load(Object sender, EventArgs e) in c:\Users\Harry\Desktop\SkypeBot\Form1.cs:line 21
   at System.Windows.Forms.Form.OnLoad(EventArgs e)
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl()
   at System.Windows.Forms.Control.WmShowWindow(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

这是应用程序的代码；

```
using System;
using System.Windows.Forms;
using SKYPE4COMLib;

namespace SkypeBing
{
    public partial class Form1 : Form
    {
        private Skype skype;
        private const string trigger = "!"; // Say !help
        private const string nick = "HM-STORE BOT";

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            skype = new Skype();
            // Use skype protocol version 7 
            skype.Attach(7, false); 
            // Listen 
            skype.MessageStatus +=new _ISkypeEvents_MessageStatusEventHandler(skype_MessageStatus);
        }
        private void skype_MessageStatus(ChatMessage msg, TChatMessageStatus status)
        {
            // Proceed only if the incoming message is a trigger
            if (msg.Body.IndexOf(trigger) >= 0)
            {
                // Remove trigger string and make lower case
                string command = msg.Body.Remove(0, trigger.Length).ToLower();

                // Send processed message back to skype chat window
                skype.SendMessage(msg.Sender.Handle, nick + " Says: " + ProcessCommand(command));
            }
        }

        private string ProcessCommand(string str)
        {
            string result;
            switch (str)
            {
                case "hello":
                    result = "Hello! Type !key if you are intrested in a key";
                    break;
                case "key":
                    result = "To buy a key go to http://www.mywebsite.org! if you enjoyed shopping at us please leave a vouch on our post!";
                    break;
                case "date":
                    result = "Current Date is: " + DateTime.Now.ToLongDateString();
                    break;
                case "time":
                    result = "Current Time is: " + DateTime.Now.ToLongTimeString();
                    break;
                case "who":
                    result = "This is the HM skype bot!";
                    break;
                default:
                    result = "To buy a key or anything else go to http://www.hmstore.zzl.org!";
                    break;
            }

            return result;
        }
    }
} 
```

# c# - Azure ServiceBus & async - 是，还是不是？

> ID：15612407
> 
> 赞同：5
> 
> 时间：2013-03-25T10:14:06.680
> 
> 标签：c#, multithreading, asynchronous, servicebus, context-switch

我在 Azure 上运行服务总线，**每秒发送大约 10-100 条消息**。

最近我已经切换到**.net 4.5**并且所有人都兴奋地重构了所有代码以在每行中至少有两次**“async”和“await** ”，以确保它“正确”完成:)

现在我想知道它实际上是**好还是坏**。如果您可以查看代码片段并让我知道您的想法。我特别担心如果**线程上下文切换**没有给我带来更多的痛苦而不是好处，从所有的异步中......（看看！dumpheap 这绝对是一个因素）

只是一点描述 - 我将发布 2 种方法 - 一种在 ConcurrentQueue 上执行 while 循环，等待新消息，另一种方法一次发送一条消息。我也完全按照 Azure 博士的规定使用瞬态故障处理模块。

发送循环（从头开始，等待新消息）：

```
private async void SendingLoop()
    {
        try
        {
            await this.RecreateMessageFactory();

            this.loopSemaphore.Reset();
            Buffer<SendMessage> message = null;

            while (true)
            {
                if (this.cancel.Token.IsCancellationRequested)
                {
                    break;
                }
                this.semaphore.WaitOne();
                if (this.cancel.Token.IsCancellationRequested)
                {
                    break;
                }

                while (this.queue.TryDequeue(out message))
                {                       
                    try
                    {
                        using (message)
                        {
                            //only take send the latest message
                            if (!this.queue.IsEmpty)
                            {
                                this.Log.Debug("Skipping qeued message, Topic: " + message.Value.Topic);
                                continue;
                            }
                            else
                            {
                                if (this.Topic == null || this.Topic.Path != message.Value.Topic)
                                    await this.EnsureTopicExists(message.Value.Topic, this.cancel.Token);

                                if (this.cancel.Token.IsCancellationRequested)
                                    break;
                                await this.SendMessage(message, this.cancel.Token);
                            }
                        }
                    }
                    catch (OperationCanceledException)
                    {
                        break;
                    }
                    catch (Exception ex)
                    {
                        ex.LogError();
                    }
                }
            }
        }
        catch (OperationCanceledException)
        { }
        catch (Exception ex)
        {
            ex.LogError();
        }
        finally
        {
            if (this.loopSemaphore != null)
                this.loopSemaphore.Set();
        }
    } 
```

发送消息：

```
private async Task SendMessage(Buffer<SendMessage> message, CancellationToken cancellationToken)
    {
        //this.Log.Debug("MessageBroadcaster.SendMessage to " + this.GetTopic());
        bool entityNotFound = false;

        if (this.MessageSender.IsClosed)
        {
            //this.Log.Debug("MessageBroadcaster.SendMessage MessageSender closed, recreating " + this.GetTopic());
            await this.EnsureMessageSender(cancellationToken);
        }

        try
        {
            await this.sendMessageRetryPolicy.ExecuteAsync(async () =>
            {
                message.Value.Body.Seek(0, SeekOrigin.Begin);
                using (var msg = new BrokeredMessage(message.Value.Body, false))
                {
                    await Task.Factory.FromAsync(this.MessageSender.BeginSend, this.MessageSender.EndSend, msg, null);
                }
            }, cancellationToken);
        }
        catch (MessagingEntityNotFoundException)
        {
            entityNotFound = true;                
        }
        catch (OperationCanceledException)
        { }
        catch (ObjectDisposedException)
        { }
        catch (Exception ex)
        {
            ex.LogError();
        }

        if (entityNotFound)
        {
            if (!cancellationToken.IsCancellationRequested)
            {
                await this.EnsureTopicExists(message.Value.Topic, cancellationToken);
            }
        }
    } 
```

上面的代码来自每秒发送 1 条消息的“Sender”类。在任何给定时间我都有大约 50-100 个实例在运行，所以它可能是相当多的线程。

顺便说一句，不要担心 EnsureMessageSender、RecreateMessageFactory、EnsureTopicExists 太多，它们不会经常被调用。

如果我只需要一次发送一条消息，而不用担心异步内容并避免随之而来的开销，那么让一个后台线程处理消息队列并同步发送消息不是更好吗？

请注意，将一条消息发送到 Azure 服务总线通常只需几毫秒，这并不昂贵。（除了速度很慢、超时或服务总线后端出现问题时，它可能会在尝试发送内容时挂起一段时间）。

感谢和抱歉这么长的帖子，

斯蒂沃

**建议的解决方案**

这个例子可以解决我的情况吗？

```
static void Main(string[] args)
    {
        var broadcaster = new BufferBlock<int>(); //queue
        var cancel = new CancellationTokenSource();

        var run = Task.Run(async () =>
        {
            try
            {
                while (true)
                {
                    //check if we are not finished
                    if (cancel.IsCancellationRequested)
                        break;                       

                    //async wait until a value is available
                    var val = await broadcaster.ReceiveAsync(cancel.Token).ConfigureAwait(false);
                    int next = 0;

                    //greedy - eat up and ignore all the values but last
                    while (broadcaster.TryReceive(out next))
                    {
                        Console.WriteLine("Skipping " + val);
                        val = next;
                    }

                    //check if we are not finished
                    if (cancel.IsCancellationRequested)
                        break;

                    Console.WriteLine("Sending " + val);

                    //simulate sending delay
                    await Task.Delay(1000).ConfigureAwait(false); 

                    Console.WriteLine("Value sent " + val);                        
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex);
            }

        }, cancel.Token);

        //simulate sending messages. One every 200mls 
        for (int i = 0; i < 20; i++)
        {
            Console.WriteLine("Broadcasting " + i);
            broadcaster.Post(i);
            Thread.Sleep(200);
        }

        cancel.Cancel();
        run.Wait();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:01:15.097

你说：

> 上面的代码来自每秒发送 1 条消息的“Sender”类。在任何给定时间我都有大约 50-100 个实例在运行，所以它可能是相当多的线程。

这是异步的一个很好的例子。你在这里保存了很多线程。异步*减少了*上下文切换，因为它*不是*基于线程的。在需要等待的情况下，它不会进行上下文切换。相反，下一个工作项正在同一个线程上处理（如果有的话）。

出于这个原因，您的异步解决方案肯定会比同步解决方案更好地扩展。需要衡量它是否在 50-100 个工作流实例中实际使用更少的 CPU。实例越多，异步速度越快的可能性就越高。

现在，实现存在一个问题：您使用的`ConcurrentQueue`不是异步就绪的。因此，即使在异步版本中，您实际上也确实使用了 50-100 个线程。它们要么阻塞（你想避免）要么忙等待燃烧 100% 的 CPU（这在你的实现中似乎就是这种情况！）。您需要摆脱这个问题并使排队也异步。也许 a`SemaphoreSlim`在这里有帮助，因为它可以异步等待。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T13:35:42.503

首先，请记住`Task`!= `Thread`。任务（和`async`方法延续）被安排到线程池中，微软在线程池中进行了大量优化，只要您的任务相当短，它们就会产生奇迹。

查看您的代码，一行会引发一个标志：`semaphore.WaitOne`. 我假设您将其用作一种信号，表明队列中有可用数据。这很糟糕，因为它是方法内部的*阻塞*`async`等待。通过使用阻塞等待，代码从轻量级延续变为更重的线程池线程。

所以，我会按照@usr 的建议，用`async`-ready 队列替换队列（和信号量）。[TPL 数据流`BufferBlock<T>`](http://msdn.microsoft.com/en-us/library/hh160414.aspx)是一个可[通过 NuGet](https://nuget.org/packages/Microsoft.Tpl.Dataflow)`async`获得的生产者/消费者队列。我首先推荐这个，因为听起来您的项目可以从更广泛地使用数据流中受益，而不仅仅是作为队列（但队列是一个很好的起点）。

存在其他`async`现成的数据结构；我的[AsyncEx 库](http://nitoasyncex.codeplex.com/)有几个。自己构建一个简单的也不难；我有[一篇关于这个主题的博文](http://blog.stephencleary.com/2012/12/async-producer-consumer-queue-2-more.html)。但我建议在您的情况下使用 TPL Dataflow。

# c# - 如何知道在上下文菜单中右键单击了同一个链接标签中的哪个链接？

> ID：15612412
> 
> 赞同：1
> 
> 时间：2013-03-25T10:14:19.223
> 
> 标签：c#, contextmenustrip, linklabel

我有一个`LinkLabel`附加的上下文菜单条。此上下文菜单有 2 个选项：“复制超链接”或“打开超链接”。链接标签中只有一个链接时没有问题。但是我不知道您如何（如果可以）知道`Links`链接标签中属性中的哪个链接被右键单击。这就是我拥有的适用于单个链接的内容：

```
private void contextMenuStrip_ItemClicked(object sender, ToolStripItemClickedEventArgs e)
{
    ContextMenuStrip item = sender as ContextMenuStrip;
    LinkLabel tempLink = item.SourceControl as LinkLabel;
    if (e.ClickedItem.Text == "&Open Hyperlink")
    {
        System.Diagnostics.Process.Start(tempLink.Links[0].LinkData.ToString());
    }
    else
    {
        System.Windows.Forms.Clipboard.SetText(tempLink.Links[0].LinkData.ToString());
    }
} 
```

欢迎提供有关如何知道`Links`单击了哪些内容的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:26:06.530

有几种方法可以做到这一点。快速一个是`opening`上下文菜单条上的事件。在该发件人中将是右键单击的任何内容。

您可以将其存储为 currentLinkLabel，或者您可以设置`Tag`菜单项的属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T02:36:29.773

使用点击事件并输入以下代码 LinkLabel llb = (LinkLabel)sender; 现在 llb.Text 具有您单击链接标签的文本。

# javascript - 使用 jquery 更新列表顺序

> ID：15612413
> 
> 赞同：0
> 
> 时间：2013-03-25T10:14:33.167
> 
> 标签：javascript, jquery, html

我有 HTML 代码：

```
<ul>
    <li>Item 1: <button id="down_1">Down</button></li>
    <li>Item 2: <button id="down_2">Down</button><button id="up_2">Up</button></li>
    <li>Item 3: <button id="down_3">Down</button><button id="up_3">Up</button></li>
    <li>Item 4: <button id="down_4">Down</button><button id="up_4">Up</button></li>
    <li>Item 5:                                  <button id="up_5">Up</button></li>
</ul> 
```

并想使用 jQuery 来更新列表顺序。

```
<script>
    $(document).ready(function() {
        $('[id^="down_"]').each(function() {
            var id = this.id;
            $('#' + id).click(function() {
                ///A code to change this <li>..</li> with the next one??
            });
        });
        $('[id^="up_"]').each(function() {
            var id = this.id;
            $('#' + id).click(function() {
                ///A code to change this <li>..</li> with the previous one??
            });
        });
    });
</script> 
```

如何编写用于更改顺序的 JavaScript/jQuery 代码？例如，如果我按下 id="down_3" 的按钮，那么结果是：

```
<ul>
    <li>Item 1: <button id="down_1">Down</button></li>
    <li>Item 2: <button id="down_2">Down</button><button id="up_2">Up</button></li>
    <li>Item 4: <button id="down_4">Down</button><button id="up_4">Up</button></li>
    <li>Item 3: <button id="down_3">Down</button><button id="up_3">Up</button></li>
    <li>Item 5:                                  <button id="up_5">Up</button></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:20:00.223

胡乱猜测 ？

```
$(document).ready(function() {
    $('[id^="up_"]').on('click', function() {
        var li = $(this).closest('li');
        li.prev('li').before(li);
    });

    $('[id^="down_"]').on('click', function() {
        var li = $(this).closest('li');
        li.next('li').after(li);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/rMW2E/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:21:19.717

相反，您可以使用`.on()`

```
$('[id^="down_"]').on('click',function() {  }); 
```

并用于排序。

```
<script type="text/javascript">
    $(function(){
        $('[id^="down_"],[id^="up_"]').on('click',function(){
            var row = $(this).parents("li:first");
            if ($(this).is(".up"))
            {
                row.insertBefore(row.prev());
            }
            else
            {
                row.insertAfter(row.next());
            }
        });
    });
</script> 
```

### **[`Demo`](http://jsfiddle.net/hDh3k/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:28:26.373

[@adeneo 答案的](https://stackoverflow.com/a/15612527/82548)一种稍微替代的方法：

```
$('li button.down, li button.up').click(
    function (e) {
        e.preventDefault();
        var that = $(this),
            li = that.closest('li'),
            direction = that.hasClass('down');
        li[direction ? 'insertAfter' : 'insertBefore'](direction ? li.next() : li.prev());
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XmwBQ/1/)。

`id`请注意，为了便于选择，我已将 s 更改为共享类名。

# java - 如何在我的应用程序中从 Play 商店添加应用程序下载链接

> ID：15612414
> 
> 赞同：1
> 
> 时间：2013-03-25T10:14:33.177
> 
> 标签：java, android

如何在我的应用程序中添加来自 Play 商店的应用程序下载链接。

前任。我知道应用程序包名称为 com.test.abc

我想在我的应用程序中提供一个链接，以便当用户单击该链接时，包名称为 com.test.abc 的应用程序应该从 Play 商店下载并安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:20:48.587

您必须`market://`在`Intent`

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+theAPPName)); 
```

# java - PrintStream 类型中的方法 println(boolean) 不适用于参数 (void)

> ID：15612422
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:15:05.670
> 
> 标签：java, jsp

我想从 SQL JSTL tags 打印结果集值 retrive。但它给出了错误 org.apache.jasper.JasperException: Unable to compile class for JSP:

在 jsp 文件中的第 219 行发生错误：/testVoucher.jsp PrintStream 类型中的方法 println(boolean) 不适用于参数 (void) 216: 217:
218: <% 219: System.out.println ( 220: %> 221: 222: <%

在 jsp 文件中的第 220 行出现错误：/testVoucher.jsp 语法错误，插入 ")" 以完成表达式 217:
218: <% 219: System.out.println( 220: %> 221: 222: <% 223：）；

在 jsp 文件中的第 223 行发生错误：/testVoucher.jsp 令牌“)”上的语法错误，删除此令牌 220: %> 221: 222: <% 223: ); 224: %> 225:
226:

堆栈跟踪： org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92) org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330) org.apache.jasper.compiler.JDTCompiler.generateClass( JDTCompiler.java:439) org.apache.jasper.compiler.Compiler.compile(Compiler.java:334) org.apache.jasper.compiler.Compiler.compile(Compiler.java:312) org.apache.jasper.compiler。 Compiler.compile(Compiler.java:299) org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317) org.apache.jasper。 servlet.JspServlet.serviceJspFile(JspServlet.java:342) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267) javax.servlet.http。HttpServlet.service(HttpServlet.java:717)

主要部分代码如下

```
<sql:preparedStatement id="pst" conn="conn"> 
   <sql:query>
       SELECT A.BANK_NAME,B.SCHEME_NAME SCHEME_DESC,
                 TO_CHAR(SUM(B.GROSS),'99,99,99,99,990.00') GROSS,
                round(SUM(B.TDS),0) TDS,
                 TO_CHAR(SUM(B.ADVANCE),'99,99,99,99,990.00') ADVANCE,
         TO_CHAR(SUM(B.PARTIAL),'99,99,99,99,990.00') PARTIAL,
                 TO_CHAR(SUM(B.NET),'99,99,99,99,990.00') NET
        FROM       VW_VOUCHER_ALLOCATION_DETAIL B, VW_SCHEME_ACCOUNT A
        WHERE    B.VOUCHER_NO='<%=voucher%>'
                 AND B.ID       =   A.EXPENSE_SCH_CODE
                 AND (B.GROSS>0 OR B.ADVANCE>0 OR B.PARTIAL>0)
    GROUP BY A.BANK_NAME,B.SCHEME_NAME                                  
        ORDER     BY A.BANK_NAME, B.SCHEME_NAME

    </sql:query>  

                <sql:resultSet id="rs">  
                    <tr style="height:20px">
                      <td CLASS="BORDER_"><b><sql:getColumn colName="BANK_NAME"/></b></td>

                      <td CLASS="BORDER_" ><sql:getColumn colName="SCHEME_DESC"/></td>
                      <td CLASS="BORDER_" align="right"><sql:getColumn colName="GROSS"/></td>
                      <td CLASS="BORDER_" align="right"><sql:getColumn colName="TDS"/></td>
                      <td CLASS="BORDER_" align="right" bgcolor="#e2d36d"><sql:getColumn colName="ADVANCE"/></td>
                      <td CLASS="BORDER_" align="right" bgcolor="#e2d36d"><sql:getColumn colName="PARTIAL"/></td>
                      <td CLASS="BORDER_" align="right"><sql:getColumn colName="NET"/></td>                  
                    </tr>
       /////it give error here ///////////////////////////   
                    <%
                    System.out.println(
                     %>
                            <sql:getColumn colName="SCHEME_DESC"/>
                            <%
                            );
                    %>

                 </sql:resultSet> 
```

整个代码如下：

```
<%@ include file="/include_session_check.jsp" %>
<%@ include file="/include_db_tld.jsp" %>
<%@page import="java.util.ArrayList"%>
<center>
    <%!
    ArrayList<String> BankName_list=new ArrayList<String>();
    %>
    <%
        String voucher="2012-2013/001188";
                //com.GEN_Utility.nvl(request.getParameter("voucher"));

        ArrayList<String> Scheme_list=new ArrayList<String>();
        ArrayList<Float> Gross_List=new ArrayList<Float>();
        ArrayList<Float> TDS_List=new ArrayList<Float>();
        ArrayList<Float> Adv_List=new ArrayList<Float>();
        ArrayList<Float> Partial_List=new ArrayList<Float>();
        ArrayList<Float> Net_List=new ArrayList<Float>();

    System.out.println(" voucher "+voucher);
    %>    
<br>        
<DIV CLASS="PGBREAK" STYLE="background-color: white; WIDTH: 800px;">
<table width="793" height="70">
<TR>
<TD width="55%">
        <img src="<%=STRpath%>index/Logo_new.bmp">
</TD>
<TD width="45%"><br><b>Mirae Asset Global Investments(I) Pvt Ltd</b> <br>
Unit No. 606, 6th Floor, Windsor Bldg.,<br>
Off CST Road, Kalina, Santacruz(E),<br>
Mumbai - 400 098.<br>
www.miraeassetmf.co.in
</TD>       
</TR>
</table>

<hr width="793" noshade="true">
<sql:preparedStatement id="pst" conn="conn"> 
  <sql:query>
    SELECT DISTINCT  A.VOUCHER_NO,A.DT_CASHFLOW,
             TO_CHAR(A.AMT_FINAL,'99,99,99,99,990.00') AMT_FINAL,A.TDS,
             TO_CHAR(A.AMT_ADJUST,'99,99,99,99,990.00') AMT_ADJUST,
             TO_CHAR(A.AMT_NET,'99,99,99,99,990.00') AMT_NET,
             TO_CHAR(A.AMT_ADVANCE,'99,99,99,99,990.00') AMT_ADVANCE,
             TO_CHAR(A.AMT_PARTIAL,'99,99,99,99,990.00') AMT_PARTIAL,
             A.EXPENSE_DESC,A.EXPENSE_CHARGE,A.ALLOCATION_PERIOD,
             DECODE(B.ALLOCATION_ID,'7','(Quarterly AUM)',
                                    '8',(SELECT (TO_CHAR(A.FROM_DT,'Mon-YYYY')||' - '||TO_CHAR(A.TO_DT,'Mon-YYYY')) ALLOCDT FROM DATA_AVG_AUM A, DATA_TRAN_BILL B
                                            WHERE A.TRAN_ID =   B.TRAN_ID
                                             AND  B.VOUCHER_NO='<%=voucher%>')) QTRAUM
    FROM     VW_VOUCHER_DETAIL A, DATA_TRAN_BILL B , MAST_ALLOCATION C
    WHERE  A.VOUCHER_NO = B.VOUCHER_NO
        AND B.ALLOCATION_ID = C.ID
        AND A.VOUCHER_NO='<%=voucher%>'
  </sql:query>
  <sql:resultSet id="rs">    
  <b>Approval Memo</b><br><br>
  <table width="793" border="0" cellspacing="0" cellpadding="0" style="border: 1px solid #6e6e6e;">
    <tr>
        <td colspan="4" valign="TOP" align="center">
            <%--------------------------%>
             <table width="98%" border="0" cellspacing="0" cellpadding="0" >
                <tr  bgcolor="#c5c5c5" style="height:20px">
                  <td width="10">&nbsp;</td>
                  <td width="200" nowrap><b>Vocuher No.</b></td>
                  <td width="10">:</td>
                  <td width="0" colspan="5"><sql:getColumn colName="VOUCHER_NO"/></td>
                </tr>

                <tr>
                  <td>&nbsp;</td>
                  <td><b>Allocation Period</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="ALLOCATION_PERIOD"/>&nbsp;<sql:getColumn colName="QTRAUM"/></td>

                  <td>&nbsp;</td>
                  <td><b>Expense Type</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="EXPENSE_DESC"/></td>

                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td><b>Cash Flow Date</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="DT_CASHFLOW"/></td>

                  <td>&nbsp;</td>
                  <td><b>Expense Charge To</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="EXPENSE_CHARGE"/></td>
                </tr>               
               <tr>
                  <td>&nbsp;</td>
                  <td><b>Gross Amount</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="AMT_FINAL"/></td>
                </tr>   

                <tr>
               <%--   <td>&nbsp;</td>
                  <td><b>Gross Amount</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="AMT_FINAL"/></td>
               --%>
                  <td>&nbsp;</td>
                  <td><b>TDS (%)</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="TDS"/>%</td>
                </tr>

                <tr>
                  <td>&nbsp;</td>
                  <td><b>Adjusted Amount</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="AMT_ADJUST"/></td>
                </tr>   

                <tr>
                  <td>&nbsp;</td>
                  <td><b>Advance/Partial</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="AMT_ADVANCE"/> / <sql:getColumn colName="AMT_PARTIAL"/></td>
                <%--  <td>&nbsp;</td>
                  <td><b>Net Payable</b></td>
                  <td>:</td>
                  <td><sql:getColumn colName="AMT_NET"/></td> --%>
                </tr>

                <tr>
                  <td>&nbsp;</td>
                  <td><b>Net Payable</b></td>
                  <td>:</td>
                  <td><b><sql:getColumn colName="AMT_NET"/></b></td>
                </tr>                 

               <tr>
                  <td colspan="4">&nbsp;</td>
                </tr>   

               <tr>
                  <td>&nbsp;</td>
                  <td><b>Narration</b></td>
                  <td>:</td>
                  <td colspan="5">
                            <sql:preparedStatement id="pst" conn="conn"> 
                               <sql:query>
                                        SELECT PAYMENT_REMARKS   FROM     DATA_TRAN_BILL  
                                        WHERE  VOUCHER_NO='<%=voucher%>'
                               </sql:query> 
                               <sql:resultSet id="rs">
                                      <sql:getColumn colName="PAYMENT_REMARKS"/>             
                               </sql:resultSet> 
                            </sql:preparedStatement>
                  </td>
                </tr>
  <!--              <tr>
                  <td colspan="4">&nbsp;</td>
                </tr>-->
                <tr>
                  <td>&nbsp;</td>
                  <td><b>Scheme Allocation</b></td>
                  <td>:</td>
                  <td>&nbsp;</td>
                </tr>                
            </table>
            <%--------------------------%>                
        </td>
    </tr>

<sql:preparedStatement id="pst" conn="conn"> 
   <sql:query>
       SELECT A.BANK_NAME,B.SCHEME_NAME SCHEME_DESC,
                 TO_CHAR(SUM(B.GROSS),'99,99,99,99,990.00') GROSS,
                round(SUM(B.TDS),0) TDS,
                 TO_CHAR(SUM(B.ADVANCE),'99,99,99,99,990.00') ADVANCE,
         TO_CHAR(SUM(B.PARTIAL),'99,99,99,99,990.00') PARTIAL,
                 TO_CHAR(SUM(B.NET),'99,99,99,99,990.00') NET
        FROM       VW_VOUCHER_ALLOCATION_DETAIL B, VW_SCHEME_ACCOUNT A
        WHERE    B.VOUCHER_NO='<%=voucher%>'
                 AND B.ID       =   A.EXPENSE_SCH_CODE
                 AND (B.GROSS>0 OR B.ADVANCE>0 OR B.PARTIAL>0)
    GROUP BY A.BANK_NAME,B.SCHEME_NAME                                  
        ORDER     BY A.BANK_NAME, B.SCHEME_NAME

    </sql:query>  

    <tr>
      <td colspan="4" align="center">
            <%--------------------------%> 
          <DIV STYLE="height: 510px;" ID="fix">
            <table width="750" border="0" cellspacing="1" cellpadding="0" style="border: 1px solid #6e6e6e;">
                <tr  bgcolor="#c5c5c5"  style="height:20px;">
                  <td CLASS="BORDER_" style="border-bottom: 1px solid #6e6e6e;"><B>Custody Name</B></td>
                  <td CLASS="BORDER_" style="border-bottom: 1px solid #6e6e6e;"><B>Scheme Name</B></td>
                  <td CLASS="BORDER_" style="border-bottom: 1px solid #6e6e6e;"><B>Gross</B></td>
                  <td CLASS="BORDER_" style="border-bottom: 1px solid #6e6e6e;"><B>TDS</B></td>
                  <td CLASS="BORDER_" style="border-bottom: 1px solid #6e6e6e;"><B>Advance</B></td>
                  <td CLASS="BORDER_" style="border-bottom: 1px solid #6e6e6e;"><B>Partial</B></td>
                  <td CLASS="BORDER_" style="border-bottom: 1px solid #6e6e6e;"><B>Net</B></td>                  
                </tr>

                <sql:resultSet id="rs">  
                    <tr style="height:20px">
                      <td CLASS="BORDER_"><b><sql:getColumn colName="BANK_NAME"/></b></td>

                      <td CLASS="BORDER_" ><sql:getColumn colName="SCHEME_DESC"/></td>
                      <td CLASS="BORDER_" align="right"><sql:getColumn colName="GROSS"/></td>
                      <td CLASS="BORDER_" align="right"><sql:getColumn colName="TDS"/></td>
                      <td CLASS="BORDER_" align="right" bgcolor="#e2d36d"><sql:getColumn colName="ADVANCE"/></td>
                      <td CLASS="BORDER_" align="right" bgcolor="#e2d36d"><sql:getColumn colName="PARTIAL"/></td>
                      <td CLASS="BORDER_" align="right"><sql:getColumn colName="NET"/></td>                  
                    </tr>

                 </sql:resultSet>                     
</sql:preparedStatement>
 <%
    for(int index=0;index<BankName_list.size();index++){
        System.out.println("BankName_list "+BankName_list.get(index));
    }
 %>                    
<sql:preparedStatement id="pst" conn="conn"> 
   <sql:query>
       SELECT   TO_CHAR(SUM(B.GROSS),'99,99,99,99,990.00') GROSS,
         TO_CHAR(SUM(B.TDS),'99,99,99,99,990.00') TDS,
         TO_CHAR(SUM(B.ADVANCE),'99,99,99,99,990.00') ADVANCE,
         TO_CHAR(SUM(B.PARTIAL),'99,99,99,99,990.00') PARTIAL,
         TO_CHAR(SUM(B.NET),'99,99,99,99,990.00') NET
        FROM VW_VOUCHER_ALLOCATION_DETAIL B
        WHERE    B.VOUCHER_NO='<%=voucher%>'
                AND (B.GROSS>0 OR B.ADVANCE>0 OR B.PARTIAL>0)
   </sql:query> 
   <sql:resultSet id="rs">
         <tr style="height:20px">
             <td CLASS="BORDER_">&nbsp;</td>
             <td CLASS="BORDER_" align="right"><b>Grand Total  </b></td>
             <td CLASS="BORDER_" align="right"><b><sql:getColumn colName="GROSS"/></b></td>
             <td CLASS="BORDER_" align="right"><b><sql:getColumn colName="TDS"/></b></td>
             <td CLASS="BORDER_" align="right"><b><sql:getColumn colName="ADVANCE"/></b></td>
             <td CLASS="BORDER_" align="right"><b><sql:getColumn colName="PARTIAL"/></b></td>
             <td CLASS="BORDER_" align="right"><b><sql:getColumn colName="NET"/></b></td>
         </tr>

   </sql:resultSet> 
   </sql:preparedStatement>

<tr style="height:20px">
 <td CLASS="BORDER_">&nbsp;</td>
 <td CLASS="BORDER_" align="right" colspan="2"><b>Adjusted Amount  </b></td>
 <td CLASS="BORDER_" colspan="5" align="right"><sql:getColumn colName="AMT_ADJUST"/></td>
</tr>
<tr style="height:20px" bgcolor="#c5c5c5">
 <td CLASS="BORDER_">&nbsp;</td>
 <td CLASS="BORDER_" align="right" colspan="2"><b>Net Payable Amount  </b></td>
 <td CLASS="BORDER_" colspan="5" align="right"><b><sql:getColumn colName="AMT_NET"/></b></td>
</tr>
</sql:resultSet>    
</sql:preparedStatement>
  </table>
  </DIV>

            <%--------------------------%>          
      </td>
    </tr>   
    <TFOOT>
        <sql:preparedStatement id="pst" conn="conn"> 
        <sql:query>
            SELECT DECODE(CNT,1,
                   C.MAP_1 || ' ' || 
                   B.VENDOR_NAME,
                   ' '
                   ) DESCR
            FROM   
            (
                SELECT A.VOUCHER_NO,COUNT(DISTINCT(VENDOR_ID)) CNT,MAX(A.VENDOR_ID) VENDOR_ID,MAX(A.PAYMENT_MODE) PAYMENT_MODE
                FROM   DATA_TRAN_BILL A
                GROUP BY A.VOUCHER_NO       
            ) A,MAST_VENDOR B,MAST_PAYMENT_MODE C
            WHERE   A.VENDOR_ID=B.ID
                    AND A.PAYMENT_MODE=C.ID
                    AND A.VOUCHER_NO='<%=voucher%>'
        </sql:query>  
        <sql:resultSet id="rs">  
        <TR>
            <TD colspan="3" STYLE="font-size: 13px; ">&nbsp;&nbsp;<sql:getColumn colName="DESCR"/></TD>
        </sql:resultSet> 
        </sql:preparedStatement>   
        <TD STYLE="font-size: 10px; ">
                            <DIV STYLE="height:60px; " ID="fix">
                                    <sql:preparedStatement id="pst" conn="conn"> 
                                       <sql:query>
                                                SELECT DISTINCT V.BANK_NAME,V.ACC_NO,C.DESCR,V.IFSC_NEFT 
                                                FROM  DATA_TRAN_BILL A,MAST_PAYMENT_MODE C, MAST_VENDOR V
                                                 WHERE  A.PAYMENT_MODE = C.ID
                                                 AND    A.VENDOR_ID    = V.ID
                                                 AND    C.DESCR      IN  ('NEFT','RTGS','RTGS/NEFT')
                                                 AND    A.VOUCHER_NO   = '<%=voucher%>'
                                       </sql:query> 
                                       <sql:resultSet id="rs">   
                                      <table align="right" border="0" width="70%">
                                          <tr>
                                              <td>Bank Name : </td>
                                              <td><sql:getColumn colName="BANK_NAME"/> </td>
                                          </tr>
                                          <tr>
                                              <td>Account No. : </td>
                                              <td><sql:getColumn colName="ACC_NO"/> </td>
                                          </tr>
                                          <tr>
                                              <td><sql:getColumn colName="DESCR"/> Code : </td>
                                              <td><sql:getColumn colName="IFSC_NEFT"/> </td>
                                          </tr>
                                      </table>
                                      </sql:resultSet> 
                                    </sql:preparedStatement>
                            </DIV>
        </TD>
        </TR>
    </TFOOT>

  </table>
  <br><br><br>
   <table width="793" border="0" cellspacing="0" cellpadding="0">
    <tr style="height:15px">
      <td colspan="5">&nbsp;</td>
    </tr>       
    <tr align="center">
      <td width="30">&nbsp;</td>
      <td width="153" style="border-top: 1px solid #6e6e6e;">Maker</td>
      <td width="500">&nbsp;</td>
        <td width="153" style="border-top: 1px solid #6e6e6e;">Checker</td>
         <td width="500"></td>
      <td width="153" style="border-top: 1px solid #6e6e6e;">Approver</td>
      <td width="30">&nbsp;</td>      
    </tr>

   </table><BR>
   </DIV>  
   <BR>
</center>
<sql:closeConnection conn="conn"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:18:03.120

PrintStream 类型中的方法 println(boolean) 不适用于参数

`<sql:getColumn colName="SCHEME_DESC"/>`这里空无一人

没有任何方法可以使用带有 0 参数的 println。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:26:56.877

似乎您将脚本让和 jstl 标记混合在一起。

`System.out.println( %><sql:getColumn colName="SCHEME_DESC"/><% ..`

# android - Listview 中的 Drawable Divider 填充父级

> ID：15612427
> 
> 赞同：0
> 
> 时间：2013-03-25T10:15:11.650
> 
> 标签：android, xml, listview

我有这张图片：

![在此处输入图像描述](../Images/3562cc9ea7e9aae880d3d4fec650b660.png)

我想将此图像分配给列表视图的分隔符属性。问题是图像扩展了所有宽度，当我在设备中执行此应用程序时，图像是两条水平线，而不是两个点。

这是我的 XML 代码：

```
<com.handmark.pulltorefresh.library.PullToRefreshListView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pull_refresh_list"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:cacheColorHint="#00000000"
    android:divider="@drawable/divider_list_view"
    android:dividerHeight="4dp"
    android:fadingEdge="none"
    android:fastScrollEnabled="false"
    android:footerDividersEnabled="false"
    android:headerDividersEnabled="false"
    android:scrollbars="none"
    android:paddingLeft="5dp"
    android:paddingRight="5dp" /> 
```

这是我的 9.png：

![在此处输入图像描述](../Images/19b1f0a5c89d3d2837e1f6098f5e3e20.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:27:16.823

无法更改列表分隔符的宽度，因为它的流程是由 os 框架管理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:41:35.230

我不确定我从不厌倦它，但一个可能的想法是，尝试从您的图像中制作一个具有额外透明度的 9patch 图像，让系统拉伸图像的不可见部分。

# php - 使用PHP删除字符串开头的所有特殊字符

> ID：15612431
> 
> 赞同：0
> 
> 时间：2013-03-25T10:15:19.110
> 
> 标签：php, regex, string

如何使用 PHP 删除字符串开头（首字母应为字母数字）中的所有特殊字符？请

$String = "+&,你好+{+ +$world";

删除字符串开头的所有特殊字符后

字符串应该变成“Hello+{+ +$world”

帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:17:27.023

尝试使用`trim`以获取更多信息，请参阅此[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

要从字符串开头删除，您可以使用`ltrim` [http://www.php.net/manual/en/function.ltrim.php](http://www.php.net/manual/en/function.ltrim.php)

要从字符串末尾删除，您可以使用`rtrim` [http://www.php.net/manual/en/function.rtrim.php](http://www.php.net/manual/en/function.rtrim.php)

您的示例代码

```
$String = "+&,Hello+{+ +$world";
echo ltrim($String,"&+,"); 
```

您可以在 ltrim 中添加更多字符以从字符串的第一个中删除

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:34:10.577

这将替换开头不是字母数字的所有内容：

```
preg_replace('/^([^a-zA-Z0-9])*/', '', $string); 
```

更新：

如果您需要在字符串的开头和结尾修剪非字母数字字符，请使用以下命令：

```
<?php

$string = "++&5Hello ++f s world6f++&ht6__)  ";

echo preg_replace('/(^([^a-zA-Z0-9])*|([^a-zA-Z0-9])*$)/', '', $string); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:26:28.697

```
<?php
function string_cleaner($result)
{
    $result = strip_tags($result);
    $result = preg_replace('/[^\da-z]/i', ' ', $result);
    $result = preg_replace('/&.+?;/', '', $result); 
    $result = preg_replace('|%([a-fA-F0-9][a-fA-F0-9])|', ' ', $result);
    $result = preg_replace('|-+|', ' ', $result);
    $result = preg_replace('/_+/', ' ', $result);
    $result = preg_replace('/&#?[a-z0-9]+;/i','',$result);
    $result = preg_replace('/[^%A-Za-z0-9 _-]/', ' ', $result);
    $result = preg_replace('/^\W+|\W+$/', '', $result);
    $result = preg_replace('/\s+/', ' ', $result);
    $result = trim($result, ' ');
    return $result;
}
?>

<?php
echo string_cleaner($content);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:16:23.247

尝试这个

```
 preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '', $String); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:19:00.100

使用修剪 - 这是一个内置功能： http: [//php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T10:20:21.153

我认为使用 ltrim 会更有用，因为您想在字符串的开头删除：[http ://www.php.net/manual/en/function.ltrim.php](http://www.php.net/manual/en/function.ltrim.php)

# php - 更改数据库密码后如何更改我在livecart中的数据库信息？

> ID：15612441
> 
> 赞同：0
> 
> 时间：2013-03-25T10:15:50.717
> 
> 标签：php, cart

我的livecart更改数据库密码后无法访问，但找到数据库配置文件，发现消息如下：

```
return
  'mysql://guaguaco_lcdb:.@RR?HbQ+CBQ@localhost/guaguaco_livecartdb'; 
```

我该怎么做才能更改密码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:46:07.447

密码在第一个 : 和最后一个 @ 之间

mysql://guaguaco_lcdb: **.@RR?HbQ+CBQ** @localhost/guaguaco_livecartdb

改成这个mysql://guaguaco_lcdb:NEWPASSWORD@localhost/guaguaco_livecartdb

其中 NEWPASSWORD 是您的新密码

# ios - CGContext 的可变大小

> ID：15612442
> 
> 赞同：0
> 
> 时间：2013-03-25T10:15:52.247
> 
> 标签：ios, cgcontext, cgimage, memory-optimization

我目前正在使用 a`UIGraphicsBeginImageContext(resultingImageSize);`创建图像。

但是当我调用这个函数时，我并不确切知道`resultingImageSize`.
确实，我开发了某种消耗大量内存的视频处理，我不能先处理后绘制：我必须*在*视频过程中绘制。

如果我设置，例如`UIGraphicsBeginImageContext(CGSizeMake(300, 400));`，超过 400 的绘制部分会丢失。

那么有没有一种解决方案来设置可变大小的 CGContext，或者调整 CGContext 的大小**而内存消耗很少**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:14:02.013

我通过每次必须调整大小时创建一个更大的新上下文来找到解决方案。这是魔术功能：

```
void MPResizeContextWithNewSize(CGContextRef *c, CGSize s) {
    size_t bitsPerComponents = CGBitmapContextGetBitsPerComponent(*c);
    size_t numberOfComponents = CGBitmapContextGetBitsPerPixel(*c) / bitsPerComponents;
    CGContextRef newContext = CGBitmapContextCreate(NULL, s.width, s.height, bitsPerComponents, sizeof(UInt8)*s.width*numberOfComponents,
                                                    CGBitmapContextGetColorSpace(*c), CGBitmapContextGetBitmapInfo(*c));
    // Copying context content
    CGImageRef im = CGBitmapContextCreateImage(*c);
    CGContextDrawImage(newContext, CGRectMake(0, 0, CGBitmapContextGetWidth(*c), CGBitmapContextGetHeight(*c)), im);
    CGImageRelease(im);

    CGContextRelease(*c);
    *c = newContext;
} 
```

我想知道是否可以对其进行优化，例如使用`memcpy`，[如建议的here](https://stackoverflow.com/a/6316092/127493)。我试过了，但它使我的代码崩溃。

# c# - 在运行时失败时更改应用程序文化

> ID：15612443
> 
> 赞同：1
> 
> 时间：2013-03-25T10:15:54.627
> 
> 标签：c#, winforms, culture

所有，我有一个本地化的 WinForms 应用程序。我创建了一个工具，用户能够在运行时更改应用程序所需的文化/语言。为了避免做任何花哨的事情，当用户确实想要更改文化时，系统会提示他们必须重新启动应用程序才能使文化更改生效（这是合理的，因为这不会经常发生）。然后，我将所需的新语言作为字符串存储在我的一个设置 XML 文件（“de-DE”、“en-US”、“en-GB”等）中。然后当应用程序重新启动时，如果需要，我切换到所需的文化：

```
// Main constructor.
public SqlEditorForm(string[] args) 
{
    // Load settings.
    username = Environment.UserName;
    userSettings = UserSettings.Instance();
    advUserSettings = AdvanceUserSettings.Instance();
    CheckChangeCurrentCulture();

    isInitialising = true;
    InitializeComponent();

    ...
}

private void CheckChangeCurrentCulture()
{
    //if (!Debugger.IsAttached)
    //  Debugger.Launch();
    if (advUserSettings.DefaultCulture)
        return;
    else
    {
        CultureInfo culture = new CultureInfo(advUserSettings.CustomCultureString);
        Thread.CurrentThread.CurrentCulture = culture;
        Thread.CurrentThread.CurrentUICulture = culture;
    }
} 
```

现在，当从 VS2012 以调试/发布模式运行时，这种机制可以正常工作。但是，当我在（运行 Windows 7 (x86/x64)）各种机器上安装应用程序时，这种机制不再起作用，也就是说，文化不会从机器默认值切换。

我已将调试器附加到已安装的应用程序，并且正在调用更改文化的代码，并且逻辑似乎正在运行并且没有引发异常，但文化/语言没有改变。我已经对 SO 提出了很多问题，但找不到涵盖此特定问题的适用问题。

**为什么这种机制在 VS2012 中有效，但不适用于已安装的应用程序？为了实现我想要的行为，我需要做什么？**

谢谢你的时间。

*请注意，我也尝试将调用替换为`CheckChangeCurrentCulture();`：*

```
Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo("de-DE");
Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("de-DE"); 
```

*这也适用于 VS2012（调试和发布模式），但不适用于已安装的应用程序。我还将机器文化`Start`-> `Control Panel`->`Region and Language`更改为德语（“de-DE”），期望应用程序和 .NET 框架检测到我有可用的文化并使用它。对于已安装的应用程序，这也失败了。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:02:51.013

也许在您的生产机器上，由于某种原因无法加载新文化的卫星组件，因此您的应用程序会退回到中性文化。

使用 Microsoft sysinternals Process Monitor 工具检查不成功的卫星程序集文件访问。

您还可以使用 .NET fuslog 工具[http://msdn.microsoft.com/en-us/library/e74a18c4.aspx检查](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)

# django - 如何为多个视图设置 cookie？

> ID：15612444
> 
> 赞同：1
> 
> 时间：2013-03-25T10:15:56.890
> 
> 标签：django, django-views

我的网站有很多视图，我想检查每个视图中的 cookie，如果没有，请保存它们。但网站有很多意见。

如何对所有视图只执行一次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T12:34:34.277

您可以编写自定义中间件来实现您的目标，因为您有很多视图，当然您不能更新每个视图。自定义中间件将是这样的：

```
class MyCookieProcessingMiddleware(object):

    # your desired cookie will be available in every django view
    def process_request(self, request):
        # will only add cookie if request does not have it already
        if not request.COOKIES.get('your_desired_cookie'):
            request.COOKIES['set_your_desired_cookie'] = 'value_for_desired_cookie'

    # your desired cookie will be available in every HttpResponse parser like browser but not in django view
    def process_response(self, request, response):
        if not request.COOKIES.get('your_desired_cookie'):
            response.set_cookie('set_your_desired_cookie', 'value_for_desired_cookie')
        return response 
```

在您的`settings.py`文件中，只需将路径添加到您的自定义中间件，如下所示：

```
MIDDLEWARE_CLASSES = (
    'django.contrib.sessions.middleware.SessionMiddleware',
    'MyProject.myapp.mymodule.MyCookieProcessingMiddleware',  # path to custom class
) 
```

中间件的顺序很重要，你的属于 SessionMiddleware 之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:31:05.913

我的理解是，您想设置一次 cookie，然后想在任何视图中检查它的值。如果这是您的问题，那么您可以在这样的视图中保存一次 cookie：

```
from project.settings import IS_COOKIE_SET # Set Global value for cookie
response = render_to_response("your-template.html")
if !IS_COOKIE_SET:  
    response.set_cookie('key', 'value')
    return response
else:
    return response 
```

您可以在任何其他视图中检查 cookie 的值，如下所示：

```
request.COOKIES.get('key', None) # Return None If cookie not exists 
```

# heroku - Heroku，mysql2的数据导入错误

> ID：15612445
> 
> 赞同：0
> 
> 时间：2013-03-25T10:15:57.187
> 
> 标签：heroku, mysql2, dbimport

我是 Heroku 的初学者。我将我的现有 ruby​​ on rails 应用程序推送到 heroku 中，这很好。接下来我使用“push”命令将我的mysql数据推送到heroku，如下所示。

```
$heroku config:add DATABASE_URL='mysql2://<my CLEARDB_DATABASE_URL>@<myapp>.herokuapp.com/heroku_db?reconnect=true'
$heroku db:push mysql2://<my CLEARDB_DATABASE_URL>@<myapp>.herokuapp.com/<my dump file> 
```

但我得到如下错误。

```
Failed to connect to database:
Sequel::DatabaseConnectionError -> Mysql2::Error: Can't connect to MySQL server on '<myapp>.herokuapp.com' (110) 
```

我很困惑我应该怎么做。有人告诉我如何解决它。

非常感谢。

-小野

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:16:22.100

不要使用`db:push`或`db:pull`。请在本地导出一个 sql 文件，然后像这样通过管道输入：

```
$ heroku pg:psql DATABASE_URL -a app_name < file.sql 
```

或者更好的是，在本地使用 Postgres 并使用 pgbackups 来导入/导出，如下所示：[Importing and Exporting Heroku Postgres Databases with PG Backups](https://devcenter.heroku.com/articles/heroku-postgres-import-export)

# asp.net-mvc-4 - ASP.Net Web 项目在不同项目中部署数据库迁移

> ID：15612446
> 
> 赞同：1
> 
> 时间：2013-03-25T10:16:02.560
> 
> 标签：asp.net-mvc-4, asp.net-web-api, entity-framework-5

我们的解决方案（基本上）包含 3 个不同的项目。

*   网络接口
*   MVC
*   数据库核心
*   领域

Web Api 和 MVC 项目（如您所料）是 Web 项目，而 DbCore 和 Domain 是类库项目。

DbCore 包含实体框架定义、配置以及迁移。

Web Api 通过 Domain 连接 DbCore。该基础架构运行良好，但我想在部署时部署和应用迁移数据库。但是部署向导没有向我显示有关该选项的选项，因为 Web 项目不包含任何 DbContext 定义。

我怎样才能做到这一点？

# jquery - 如何使用 widgetwar 动态更改组件的样式？

> ID：15612448
> 
> 赞同：1
> 
> 时间：2013-03-25T10:16:05.950
> 
> 标签：jquery, jsf, primefaces

有没有办法让通知栏自动隐藏。我的意思是我们可以使用 JavaScript 做到这一点。但是 Primefaces 是否提供任何其他功能来做到这一点？

而且我还想知道如何将样式更改为 JavaScript 中的小部件。

例如

```
<p:notificationBar widgetVar="notify" /> 
```

我可以用

```
notify.show() and notify.hide() 
```

但是如何在 JavaScript 中更改背景颜色等样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:19:29.683

您可以按如下方式访问 CSS：

```
jQuery(notify.jq).css(); 
```

`css()`根据 jQuery 参考手册使用函数。

# c# - Sqlite 使用 url C# 连接到远程文件

> ID：15612452
> 
> 赞同：2
> 
> 时间：2013-03-25T10:16:15.310
> 
> 标签：c#, sqlite

我一直试图让我的 sqlite 读取远程文件，但只是平淡地告诉我这不支持有解决方法吗？

这是给出错误的函数

```
 public void Run(string sql,string check,string file)
      {
        SQLiteConnection m_dbConnection;
        string test = "Data Source=" + file + ";Version=3;";
        m_dbConnection = new SQLiteConnection(test);
        m_dbConnection.Open();
        SQLiteCommand command = new SQLiteCommand(sql, m_dbConnection);
        SQLiteDataReader reader = command.ExecuteReader();
        if (check == "0")
        {
            while (reader.Read())
                comboBox1.Items.Add(reader["name"] + "." + reader["TLD"]);
            comboBox1.SelectedIndex = 0;
        }
        else
        {
           proxy = reader["proxyip"].ToString();
           check = "0";
        }
    } 
```

我得到的错误是“不支持 URI 格式”

文件变量由 2 个值之一填充。

```
 string filelocal = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles) + "\\unblocker\\sites.db"; 
```

或者

```
 string remotefile = "http://127.0.0.1/test.db"; 
```

给出错误的是远程文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:38:04.990

The Connection string uses as a datasource the db file which is expected on your local file system, take a look at this [example code](http://www.devart.com/dotconnect/sqlite/docs/Devart.Data.SQLite~Devart.Data.SQLite.SQLiteConnection.html).

You can transorfm this using:

```
Uri uriFormatted = new Uri(file);
uriFormatted.AbsolutePath; // Try to use this value instead to call your function 
```

**EDIT**

SQLite is a local standalone database, that is used for standalone software

Consider using [SQLitening](http://www.sqlitening.com/support/index.php):

SQLitening is a client/server implementation of the popular SQLite database.

# asp.net - 网络服务添加失败

> ID：15612457
> 
> 赞同：0
> 
> 时间：2013-03-25T10:16:27.130
> 
> 标签：asp.net, visual-studio-2010, web-services

我的项目中有一个网络服务。每当我尝试添加服务参考时，它都会显示特定错误

```
Could not create type 'json_read.GetMapLocation'. 
```

源错误

```
Line 1:  <%@ WebService Language="C#" CodeBehind="GetMapLocation.asmx.cs" Class="json_read.GetMapLocation" %> 
```

这是我的网络服务

```
<%@ WebService Language="C#" CodeBehind="GetMapLocation.asmx.cs" Class="json_read.GetMapLocation" %> 
```

后面的代码

```
namespace json_read
{
    /// <summary>
    /// Summary description for GetMapLocation
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    //[System.Web.Script.Services.ScriptService]
    public class GetMapLocation : System.Web.Services.WebService
    {

        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        } 
```

我在这个错误中苦苦挣扎了几天，但还没有灵魂。感谢您的帮助。

# uart - XBEE S1 模块的配置

> ID：15612458
> 
> 赞同：2
> 
> 时间：2013-03-25T10:16:29.673
> 
> 标签：uart, xbee

我有两个 Xbee 系列 1 模块。我想将一台配置为发送器，一台配置为接收器。有人可以推荐一个好的网站或教程链接来做同样的事情吗？任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:02:00.473

Digi International 有一个[专门用于示例的完整网站](http://examples.digi.com/)，其中包括一些刚入门的示例。它包括一个[基本的 XBee 802.15.4（系列 1）聊天](http://examples.digi.com/get-started/basic-xbee-802-15-4-chat/)，听起来像您正在寻找的东西。

# javascript - 使用 Javascript 获取移动设备的实际高度

> ID：15612461
> 
> 赞同：1
> 
> 时间：2013-03-25T10:16:45.900
> 
> 标签：javascript, jquery

有没有办法在 javascript/jQuery 中以纵向模式获取 Android 设备的实际设备高度？我正在使用带有 Android 版本 2.3.6 的 Galaxy S Advance

到目前为止，我已经尝试了以下选项：

```
screen.height
window.innerHeight
document.documentElement.clientHeight

$(window).height() 
```

所有这些选项都返回 450 像素，这不是设备高度。像素比是 1.5，所以 450*1.5 = 675。我的实际设备高度应该是 800，所以我错过了地址栏的 125 像素。

有没有办法计算实际屏幕的高度？

我知道这不会是 800，而是 800/1.5，即 533。

提前致谢 ：）

PS。抱歉，如果有任何混淆，但问题是关于我必须在 Android 上测试的网站，而不是 Java 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:25:45.390

如果您想要以像素为单位的高度值，您可以使用 getSize：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int height = size.y; 
```

如果您不在 Activity 中，您可以通过 WINDOW_SERVICE 获得默认显示：

```
WindowManager wm = (WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay(); 
```

在引入 getSize 之前（在 API 级别 13 中），您可以使用现在已弃用的 getHeight 方法：

```
Display display = getWindowManager().getDefaultDisplay(); 
int height = display.getHeight();  // deprecated 
```

# objective-c - 在没有 UIViewController 的情况下加载 XIB 文件

> ID：15612463
> 
> 赞同：4
> 
> 时间：2013-03-25T10:16:48.180
> 
> 标签：objective-c, xcode, uiview, interface-builder, xib

我想使用 Interface Builder 设计一个 UIView 和一些子视图（UIWebView、UIToolbar、一些 UIBarButtonItems、进度指示器等等），但我认为传统上没有必要这样做，通过使用 UIViewController，使用`presentViewController:animated`等等

所以，我创建了一个自定义类， `.h`文件代码如下：

```
@interface FileInteractionManager : NSObject {

}

@property (nonatomic, retain) IBOutlet UIView *fileView;
@property (nonatomic, retain) IBOutlet UIWebView *fileWebView;

@property (nonatomic, retain) IBOutlet UIBarButtonItem *printButton;
@property (nonatomic, retain) IBOutlet UIBarButtonItem *optionsButton;
@property (nonatomic, retain) IBOutlet UIBarButtonItem *doneButton; 
```

我的 .m 文件如下：

```
@implementation FileInteractionManager

@synthesize fileView, fileWebView, doneButton, optionsButton, printButton;

-(id)init {

    NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"FileInteractionView" owner:self options:nil];

    NSLog(@"Load success!");

    return self;
} 
```

最后，我创建了一个名为“FileInteractionView.xib”的独立 xib 文件，将文件的所有者更改为我在上面创建的自定义类，然后连接 IBOutlets。

当我在我的类上调用该`init`方法时，我可以在调试器中看到我的所有 IBOutlet 对象都已正确实例化。

我的问题是：

1.  该`loadNibNamed:owner:options:`方法是加载我的独立 .xib 文件的正确方法吗？我不喜欢这个方法返回一个我没有用的数组（返回的顶级对象与我的变量匹配`fileView`，但我已经通过 Interface Builder 链接了它们）。

2.  我的一般方法在解决我的问题时是否正确？我执行上述步骤是因为我想要一个`UIView`可以添加到现有 UIViewController 的简单对象，而不是呈现和关闭一个全新的 UIViewController。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:33:39.000

我使用了一些不同的方法。我创建了 UIView (MyCustomView ie) 的子类，然后是带有视图 UI 的 xib，并更改了刚刚定义的（主）视图类。然后在 xib 中，您可以将插座链接到自定义视图本身（而不是文件所有者）。最后在类定义中，我创建了一个这样的函数：

```
+ (id) newFromNib
{
    NSArray *nibArray = [[UINib nibWithNibName:NSStringFromClass([self class]) bundle:nil] instantiateWithOwner:nil options:nil];
    return nibArray[0];
} 
```

只是几个注意事项：1）这是一个类方法，你可以将“self”用于“NSStringFromClass（[self class]）”之类的东西，但真正的对象是返回的变量2）这个例子假设xib有相同的类的名称（通过 NSStringFromClass([self class]) 所以我可以在不更改任何内容的情况下复制粘贴它；））并且您的视图是 xib（标准）中定义的第一个视图。如果您在一个 xib 中存储多个“主”视图，请选择正确的元素。

所以我需要 MyCustomView 我做类似的事情：

```
MyCustomView* mycv = [MyCustomView newFromNib]; 
```

然后设置框架/中心并添加到超级视图...如果您有一个复杂的 UI 元素“库”并希望通过 xib 设计它们然后在需要时添加，我认为这种方式非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-16T12:25:43.227

il Malvagio Dottor Prosciutto 的回答很好。这是一个可能的替代方案。

## 在 NS_DESIGNATED_INITIALIZER 中加载 nib 并成为子视图的所有者

如果我们接受`xib`只持有一个子视图而不是视图本身，那么我们可以加载子视图`initWithFrame:`并在`xib`.

```
@interface MyCustomView ()
@property (strong, nonatomic) IBOutlet UIView *subview;
@end

@implementation MyCustomView
- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    [[NSBundle mainBundle] loadNibNamed:NSStringFromClass([self class]) owner:self options:nil];
    [self addSubview:self.subview];
    return self;
}
@end 
```

# objective-c - 比较两个音频文件

> ID：15612469
> 
> 赞同：1
> 
> 时间：2013-03-25T10:16:56.243
> 
> 标签：objective-c

在我的应用程序中，我想比较两个声音文件并找出它们是否相同或不同。流程是：用户录制两个音频文件，将它们存储到文档目录中，再次获取它们进行比较，并检查它们是否相同或不同。我怎样才能做到这一点？

# javascript - 循环通过 XML 解析器？

> ID：15612470
> 
> 赞同：3
> 
> 时间：2013-03-25T10:17:01.860
> 
> 标签：javascript, jquery, html, loops, xml-parsing

我正在开发一个应用程序，单击一个按钮，存储在 XML 文件中的文档信息列表将显示在屏幕上的`<ul>`标记中。函数中的当前 JavaScript 是；

```
 function viewXMLFiles() {
        xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", "TestInfo.xml", false);
        xmlhttp.send();

        xmlDoc = xmlhttp.responseXML;

        document.getElementById("docname").innerHTML = xmlDoc.getElementsByTagName("document_name")[0].childNodes[0].nodeValue;
        document.getElementById("filetype").innerHTML = xmlDoc.getElementsByTagName("file_type")[0].childNodes[0].nodeValue;
        document.getElementById("fileloc").innerHTML = pathToRoot + "/" + document.getElementById("docname").innerHTML;

        document.getElementById("docname1").innerHTML = xmlDoc.getElementsByTagName("document_name")[1].childNodes[0].nodeValue;
        document.getElementById("filetype1").innerHTML = xmlDoc.getElementsByTagName("file_type")[1].childNodes[0].nodeValue;
        document.getElementById("fileloc1").innerHTML = pathToRoot + "/" + document.getElementById("docname1").innerHTML;
    } 
```

但我想设置它，以便即使添加更多文件信息，该功能也会显示它。我已经看过[Jquery xml parsing loops](https://stackoverflow.com/questions/7447640/jquery-xml-parsing-loops) this question，但我无法让该功能正常工作。这是 XML 文件；

```
 <document_list>

<document>

    <document_name>Holidays.pdf</document_name><br />

    <file_type>.pdf</file_type> <br />

    <file_location>TEST</file_location> <br />

</document>

<document>

    <document_name>iPhone.jsNotes.docx</document_name><br />

    <file_type>.docx</file_type><br />

    <file_location>TEST</file_location><br />

</document>

 </document_list> 
```

这是我正在使用的 HTML。有一个按钮和`<ul>`我正在使用的标签；

```
<button onclick = "viewXMLFiles(); document.getElementById('showDocumentLink').style.display = 'block';">View Document Info</button><br>

    <div id = "doclist">
        <h2>Document 1;</h2>
        <label>Document Name;</label><br><span id = "docname"></span><br>
        <label>File Type</label><br><span id = "filetype"></span><br>
        <label>File Location</label><br><span id = "fileloc"></span><br>
    </div>

    <div id = "doclist">
        <h2>Document 2;</h2>
        <label>Document Name;</label><br><span id = "docname1"></span><br>
        <label>File Type</label><br><span id = "filetype1"></span><br>
        <label>File Location</label><br><span id = "fileloc1"></span><br>
    </div> 
```

谁能帮我把它变成一个循环？我已经链接了 jQuery 和 jQTouch，所以我可以同时使用它们。

非常感谢你提前xx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:39:55.907

使用以下循环代码。

```
<script>
    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc );
    var documents = $xml.find('document_list');

    documents.children('document').each(function() {
      var name = $(this).find('document_name').text();
      var file_type = $(this).find('file_type').text();
      var file_location = $(this).find('file_location').text();

      // now do whatever you like with above variable
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:12:37.620

使用 Irfan 的答案作为基础，将值添加到标签中添加一个计数器，然后只需将从 XML 解析循环中获取的值插入到相应的范围中。

```
<script>
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", "TestInfo.xml", false);
    xmlhttp.send();

    xmlDoc = xmlhttp.responseXML;
    $xml = $( xmlDoc );
    var documents = $xml.find('document_list');

    var doccount = 0;

    //will be used to find the HTML elements
    var namelabel = "docname"; 
    var typelabel = "filetype"; 
    var locationlabel = "fileloc";

    documents.children('document').each(function() {
      var name = $(this).find('document_name').text();
      var file_type = $(this).find('file_type').text();
      var file_location = $(this).find('file_location').text();

      //after the first document we need to add the number to the span id
      if(doccount > 0){ 
         namelabel = "docname" + doccount;
         typelabel = "filetype" + doccount;
         locationlabel = "fileloc" + doccount;
      }

      //insert the XML values into the label
      $('span#'+namelabel).html(name);
      $('span#'+typelabel).html(file_type);
      $('span#'+locationlabel).html(file_location);  

      //increment the counter
      doccount++;
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:29:50.933

这是一个本机 JavaScript 实现，因此您可以查看如何以这种方式进行操作并进行比较等。

```
function viewXMLFiles() {
    // var everything
    var xmlhttp = new XMLHttpRequest(),
        xmlDoc,
        nodes, i, j, counter = -1, suffix,
        document_name, file_type, file_location;
    // request page
    xmlhttp.open("GET", "TestInfo.xml", false),
    xmlhttp.send();
    // false meant synchronous req. so can go straight to reading document
    xmlDoc = xmlhttp.responseXML;
    // loop over <document> nodes
    nodes = xmlDoc.childNodes; // shorthand
    j = nodes.length;
    for (i = 0; i < j; ++i) {
        if ('document' === nodes[i].tagName.toLowerCase()) {
            // nodes[i] is a <document>, increment counter
            ++counter;
            // get nodes of intrest
            document_name = nodes[i].getElementsByTagName("document_name")[0];
            file_type = nodes[i].getElementsByTagName("file_type")[0];
            file_location = nodes[i].getElementsByTagName("file_location")[0];

            // do what you want with these, e.g.
            suffix = counter || ''; // don't append a number for 0
            document.getElementById('docname'+suffix).textContent = document_name.textContent;
            document.getElementById('filetype'+suffix).textContent = file_type.textContent;
            document.getElementById('fileloc'+suffix).textContent = pathToRoot + "/" + file_location.textContent;
        }
    }
} 
```

此外，正如我在评论中提到的，您应该考虑 HTML 的有效性；

*   属性名称/值对的等号周围不应有空格，即`<tag attrib="val"/>` **不** `<tag attrib = "val"/>`
*   每个*id*属性都应该有一个唯一的值，不与文档上的任何其他属性共享，即**不** `<tag id="shared"/><tag id="shared"/>`

# debugging - 为什么 GHC 中直接导入的函数与我用从 GHC 库复制的源代码编写的函数有很大不同

> ID：15612471
> 
> 赞同：5
> 
> 时间：2013-03-25T10:17:06.393
> 
> 标签：debugging, haskell, memory-leaks, garbage-collection, ghc-api

```
module Has (r,p,s) where

import Prelude ((==),Bool(..),otherwise,(||),Eq)
import qualified Data.List as L

filter :: (a -> Bool) -> [a] -> [a]
filter _pred []    = []
filter pred (x:xs)
  | pred x         = x : filter pred xs
  | otherwise      = filter pred xs 
```

问题1：这`filter`是从 的库中复制`GHC`的，但是为什么它消耗越来越多的内存*与*直接导入的相比`filter`，它消耗的内存数量是恒定的。

```
elem :: (Eq a) => a -> [a] -> Bool
elem _ []       = False
elem x (y:ys)   = x==y || elem x ys 
```

问题2：这个`filter`是从库里复制过来`GHC`的，但是为什么和直接使用的*一样*消耗越来越多的内存，和直接导入*的相比，消耗的内存**也*越来越多。`elem`**`filter`**

 **```
r = L.filter (==1000000000000) [0..]
p = filter (==1000000000000) [0..]
s = 1000000000000 `elem` [0..] 
```

GHC 版本：7.4.2 操作系统：Ubuntu 12.10 编译 -O2 优化

正如上面的`filter`and`elem`的定义所暗示的， `p = filter (==1000000000000) [0..]`and`s = 1000000000000 `elem` [0..]`都`[0..]`应该逐渐被垃圾回收。但两者都`p`消耗`s`越来越多的内存。而`r`其中定义的直接导入`filter`会消耗一定数量的内存。

我的问题是为什么 GHC 中直接导入的函数与我使用从 GHC 库复制的源代码编写的函数有很大不同。我想知道GHC是否有问题？

我还有一个问题：上面的代码是从我写的一个项目中抽象出来的，这个项目也面临着“消耗越来越多的内存，理论上应该是垃圾回收”的问题。所以我想知道有没有办法找到 GHC 中哪个变量占用了这么多内存。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:46:43.950

ghci 中内存消耗的原因不是`filter`or的代码`elem`。`filter`（尽管in的重写规则`GHC.List`通常使它更好一点。）

让我们看一下使用 ( ) 生成的核心 ghc-7.4.2 的（部分`-O2`）`-ddump-simpl`。首先`r`，使用`GHC.List.filter`：

```
Has.r1
  :: GHC.Integer.Type.Integer
     -> [GHC.Integer.Type.Integer] -> [GHC.Integer.Type.Integer]
[GblId,
 Arity=2,
 Unf=Unf{Src=<vanilla>, TopLvl=True, Arity=2, Value=True,
         ConLike=True, Cheap=True, Expandable=True,
         Guidance=IF_ARGS [0 0] 60 30}]
Has.r1 =
  \ (x_awu :: GHC.Integer.Type.Integer)
    (r2_awv :: [GHC.Integer.Type.Integer]) ->
    case GHC.Integer.Type.eqInteger x_awu Has.p5 of _ {
      GHC.Types.False -> r2_awv;
      GHC.Types.True ->
        GHC.Types.: @ GHC.Integer.Type.Integer x_awu r2_awv
    }

Has.r :: [GHC.Integer.Type.Integer]
[GblId,
 Str=DmdType,
 Unf=Unf{Src=<vanilla>, TopLvl=True, Arity=0, Value=False,
         ConLike=False, Cheap=False, Expandable=False,
         Guidance=IF_ARGS [] 40 0}]
Has.r =
  GHC.Enum.enumDeltaIntegerFB
    @ [GHC.Integer.Type.Integer] Has.r1 Has.p3 Has.p2 
```

`Has.p3`是`0 :: Integer`，并且`Has.p2`是`1 :: Integer`。重写规则 (for `filter`and `enumDeltaInteger`) 把它变成了 (用更短的名字)

```
r = go fun 0 1
  where
    go foo x d = x `seq` (x `foo` (go foo (x+d) d))

fun n list
    | n == 1000000000000 = n : list
    | otherwise          = list 
```

如果被内联，这可能会更有效`fun`，但关键是要`filter`编辑的列表不存在，它被融合了。

`p`另一方面，如果没有重写规则，我们得到

```
Has.p1 :: [GHC.Integer.Type.Integer]
[GblId,
 Unf=Unf{Src=<vanilla>, TopLvl=True, Arity=0, Value=False,
         ConLike=False, Cheap=False, Expandable=False,
         Guidance=IF_ARGS [] 30 0}]
Has.p1 = GHC.Enum.enumDeltaInteger Has.p3 Has.p2

Has.p :: [GHC.Integer.Type.Integer]
[GblId,
 Str=DmdType,
 Unf=Unf{Src=<vanilla>, TopLvl=True, Arity=0, Value=False,
         ConLike=False, Cheap=False, Expandable=False,
         Guidance=IF_ARGS [] 30 0}]
Has.p = Has.filter @ GHC.Integer.Type.Integer Has.p4 Has.p1 
```

`[0 .. ]`列表( `Has.p1`)的顶级 CAF ，并`Has.filter`应用于`(== 1000000000000)`列表。

所以这个确实创建了要过滤的实际列表 - 因此它的效率有点低。

但通常（运行已编译的二进制文件），这在内存消耗方面没有问题，因为列表在被消耗时会被垃圾收集。但是，由于我无法理解的原因，ghci`[0 .. ]`在评估`p`or时确实保留了列表`s`（但它有自己的 副本`[0 .. ]`，所以这里不是不需要的共享），正如可以从`-hT`堆配置文件中收集到的那样（评估`s`，所以只有一个列表单元格的可能来源。使用 ghci 调用`+RTS -M300M -hT -RTS`，因此在内存使用量达到 300M 后不久，ghci 终止）：

![在此处输入图像描述](../Images/5ad2c4cfaa85b7498285c96ddd080a5d.png)

所以ghci中内存消耗的原因是要过滤的列表的硬编码。如果您使用`Has.filter`提示符处提供的列表，则内存使用量与预期一样是恒定的。

我不确定 ghci 保留列表`[0 .. ]`是错误还是预期行为。**

# algorithm - 使用 levenshtein 距离的两个全文相似度

> ID：15612475
> 
> 赞同：6
> 
> 时间：2013-03-25T10:17:17.137
> 
> 标签：algorithm, statistics, levenshtein-distance

我有两个要比较的文本文件。我所做的是：

1.  我把它们都分成了句子。
2.  我已经测量了一个文件中的每个句子与第二个文件中的每个句子之间的 levenshtein 距离。

我想计算这两个文本文件之间的平均相似度，但是我很难提供任何有意义的值 - 显然算术平均值（所有距离的总和 [标准化] 除以比较次数）是一个坏主意。

如何解释这样的结果？

编辑：距离值已标准化。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T13:45:54.920

levenshtein 距离有一个最大值，即最大值。两个输入字符串的长度。不能比这更糟了。因此，两个字符串 a 和 b 的归一化相似性指数（0=bad, 1=match）可以计算为 1-distance(a,b)/max(a.length, b.length)。

从文件 A 中取一个句子。你说你会将它与文件 B 的每个句子进行比较。我猜你正在寻找 B 中距离最小的句子（即最高相似度指数）。

只需计算所有这些“最小相似性指数”的平均值。这应该可以让您粗略估计两个文本的相似性。

但是，是什么让您认为两个相似的文本可能会打乱它们的句子？我个人的意见是，你还应该引入停用词列表、同义词等等。

尽管如此：还请检查三元组匹配，这可能是您正在寻找的另一种好方法。

# matlab - matlab如何对卫星图像进行预处理

> ID：15612477
> 
> 赞同：1
> 
> 时间：2013-03-25T10:17:25.683
> 
> 标签：matlab

我有卫星图像，需要在 matlab 中进行大气校正。我如何在matlab中编写代码进行大气校正。我尝试过 imadjust、histeq 和 adapthisteq，还有直方图均衡。当我运行代码时，我得到一个输出。我只是不确定代码是否确实进行了大气校正。这是代码

```
image1 = imread('200904010000-msg-ch05-k.pgm');
image2 = imread('200904010000-msg-ch08-k.pgm');
[image3] = imread('200904010000-msg-ch11-k.pgm');
images = {image1, image2, image3};
image1 = images{1};
image2 = images{2};
image3 = images{3};
image1_imadjust = imadjust(image1);
image1_histeq = histeq(image1);
image1_adapthisteq = adapthisteq(image1);
imshow(image1);
title('Original');
figure, imshow(image1_imadjust);
title('Imadjust');
figure, imshow(image1_histeq);
title('Histeq');
figure, imshow(image1_adapthisteq);
title('Adapthisteq');image2_imadjust = imadjust(image2);
image2_histeq = histeq(image2);
image2_adapthisteq = adapthisteq(image2);
figure, imshow(image2);
title('Original');
figure, imshow(image2_imadjust);
title('Imadjust'); 
```

# image - 邮件显示图像之间的白色间隙

> ID：15612481
> 
> 赞同：0
> 
> 时间：2013-03-25T10:17:47.200
> 
> 标签：image, newsletter, mailing

在 Ymlp.com 网站上，我设计了一份时事通讯。两个图像在彼此下方，但在 Outlook (2007) 中，它们之间有一个小的白色间隙。Gmail、Hotmail 和 Thunderbird 没有这个问题。在[http://www.yn5.nl/2b-xcl/mailing/map/witregel.jpg](http://www.yn5.nl/2b-xcl/mailing/map/witregel.jpg)你可以看到问题。这是邮件：[http ://www.yn5.nl/2b-xcl/mailing/map/view.html](http://www.yn5.nl/2b-xcl/mailing/map/view.html)

如何去除空白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:09:28.220

您需要`display:block;`在图像的样式标签中

# matlab - 使用 wavread 时出错 无效的波形文件。原因：无法打开文件

> ID：15612483
> 
> 赞同：0
> 
> 时间：2013-03-25T10:18:01.717
> 
> 标签：matlab

我收到错误 Error using wavread (line 67) Invalid Wave File。原因：无法打开文件。

energy_per_frame 错误（第 2 行）[inpu fs] = wavread(file);

这是调用 energy_per_frame 的函数的源代码。

```
 [inpu fs] = wavread(file);
clc;clear;close all;
file = input('Enter name of wav file  ', 's');
counter=0;
for test_number = 0:4
for test_number2 = 0:20
        counter=counter+1;
        reference = dtw_avg(test_number2);
        test = energy_per_frame(file);
        distance(counter) = dtw(test,reference);
end 
```

这是函数 energy_per_frame 的源代码

```
 [inpu fs] = wavread(file);
    fn = fs/2;
bins = 512; %useable bins
frame_length = bins;
window = hamming(frame_length);
overlap = .5;
number_of_frames = (length(inpu)/(frame_length)/overlap) - 1; 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:27:08.767

好吧，你的函数定义应该是这样的

```
function [ output_args ] = energy_per_frame( input_args )
%UNTITLED Summary of this function goes here
%   Detailed explanation goes here

end 
```

看起来您缺少`function`关键字。

但是，如果第一个块只是应该是一个脚本，那么您在实际获得用户输入文件名之前就调用了 wavread。此外，实际上没有必要像在函数中那样调用 clear 等。

# javascript - 在请求完成之前调用 ajax 成功

> ID：15612485
> 
> 赞同：2
> 
> 时间：2013-03-25T10:18:03.677
> 
> 标签：javascript, ajax, tomcat

我的心事就这样结束了……

我遇到的问题是，大约在同一时间（通过请求大约 60-70 分钟）为 ajax 请求调用了成功函数，但 tomcat 日志证明该请求仍在运行。

（观点：请求应该返回一个空字符串（“”）或一个html页面（错误）但是当调用成功函数时，它返回一个长度为2的字符串结果=“”（2个空格字符）

我不能让它在 chrome 中重现，只有 IE（这是一个问题，因为我们满足 IE 的特殊性）

起初我认为这是一个 jQuery 问题，因为我在发送请求时运行了多个民意调查（以更新 jQuery 进度条信息）

然而...

当我只使用一个异步 ajax 请求（不是 jQuery）来测试这个时，该请求调用一个 Java 方法，该方法每秒在日志中循环打印 3 小时，它总是在 3600 秒标记附近调用成功（还剩 7200 秒）。

示例代码：

```
var http_request = false;
  if (window.XMLHttpRequest) {
    http_request = new XMLHttpRequest();
    if (http_request.overrideMimeType) {
      http_request.overrideMimeType('text/text');
    }
  }
  else if (window.ActiveXObject) {
    try {
      http_request = new ActiveXObject("Msxml2.XMLHTTP");
    } 
    catch (e) {
      try {
        http_request = new ActiveXObject("Microsoft.XMLHTTP");
      } 
      catch (e) {}
    }
  }
  if (!http_request) {
    alert('Giving up: Cannot create an XMLHTTP instance');
    return false;
  }
  url += "&random=" + Math.random();
  http_request.open('GET', url, true);
  http_request.onprogress = function () { };
  http_request.ontimeout = function () { };
  http_request.onerror = function () { }; 
  http_request.onreadystatechange = function(){
    if (http_request.readyState == 4) {
      if (http_request.status == 200) {
        result = http_request.responseText;
        alert("success: ("+result.length+") ["+result+"]");             
      }
    }   
  }; 
```

注意：这不是超时错误（至少不是 ajax 错误），因为 ajax 超时选项似乎可以正常工作并相应地返回超时错误，但正如我所说，它不是超时错误...成功函数被调用得太早。

希望有人可以提供帮助:)

干杯，
史蒂夫。

**更新：**

我已经使用网络选项卡捕获运行了请求，它显示结果被中止：[这里](http://img255.imageshack.us/img255/3866/ajaxup.jpg)

谢谢@ArunPJohny，这给了我一个新的方向。是否有某种“onAbort”ajax回调？正如我所认为的那样，这种响应会被“错误：”回调捕获

**更新 2：**

从那以后，我找到了许多 SO 主题的方法，更值得注意的是：[xmlhttprequest timeout / abort not working as expected?](https://stackoverflow.com/questions/8995085/xmlhttprequest-timeout-abort-not-working-as-expected?rq=1)

Tim 提供了一些有用的链接来捕获中止，但仍然不知道它为什么中止。

后续：[这里](https://stackoverflow.com/questions/15657598/ieonly-request-aborted)

# embedded - 模拟器生成的关于（管道信息、停顿、执行周期）的 NEON 输出不清楚

> ID：15612486
> 
> 赞同：0
> 
> 时间：2013-03-25T10:18:03.770
> 
> 标签：embedded, arm, simd, neon, cortex-a8

我在理解 NEON 模拟器的输出时遇到了一些问题。生成的输出是神秘的，并且没有适当的文档来理解模拟器输出。

例如 ： ![在此处输入图像描述](../Images/1806b9877e4a732588966c18464e9ed6.png)

在上图中，第一列的信息没有清楚地解释。lc 是什么意思? 有时下面给出的语法与表中的数据格式不匹配。

代码和数据位于[http://pulsar.webshaker.net/ccc/sample-55d49530](http://pulsar.webshaker.net/ccc/sample-55d49530)。[我在优化霓虹代码](https://stackoverflow.com/questions/8533833/some-doubts-in-optimizing-the-neon-code)的一些疑问中找到了一些帮助，但并不完全清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:47:59.840

它不是'LC'，而是'1C'，即one-C，这意味着指令需要一个周期。

# c - c语言结构中的函数指针有什么用？

> ID：15612488
> 
> 赞同：6
> 
> 时间：2013-03-25T10:18:13.810
> 
> 标签：c, struct, function-pointers

我猜想在结构中使用函数指针与在结构中封装函数有关......？如果是这样，那么这究竟是如何实现的？

在结构中包含函数指针而不是简单地定义函数有什么好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T10:33:08.717

结构中的函数指针是 C 中对象编程的基础（参见[http://www.planetpdf.com/codecuts/pdfs/ooc.pdf](http://www.planetpdf.com/codecuts/pdfs/ooc.pdf)）。它确实适用于中型到大型 C 项目。

*一个例子：*

***标题：***

```
typedef struct TPile
{
    int(*Push)(struct TPile*, int);
    int(*Pop)(struct TPile*);
    void(*Clear)(struct TPile*);
    void(*Free)(struct TPile*);
    int(*Length)(struct TPile*);
    void(*View)(struct TPile*);

    int Nombre;

    struct Titem *Top;

} TPile ; 
```

***资源：***

```
TPile TPile_Create()
{
    TPile This;
    TPile_Init(&This);
    This.Free = TPile_Free;

    return This;
}

TPile* New_TPile()
{
    TPile *This = malloc(sizeof(TPile));
    if(!This) return NULL;
    TPile_Init(This);
    This->Free = TPile_New_Free;

    return This;
}

void TPile_Clear(TPile *This)
{
    Titem *tmp;

    while(This->Top)

    {
      tmp = This->Top->prec;
      free(This->Top);
      This->Top = tmp;
    }

    This->Nombre = 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:15:08.313

在结构中包含函数指针对于某些数据结构（例如二叉搜索树）很有用。

可以说，我想插入一个结构为

```
struct Employee {
      int eid;
      char *name;
 }; 
```

进入二叉搜索树。但我希望 BST 在存储和搜索时使用我的函数来比较元素。

bst 结构如下。

```
 struct BST {
     struct _node *root;
     int (*compare)(void *e1 , void *e2);
 }; 
```

现在，我将按如下方式使用 BST。

```
 int main(void){
      struct Emp e1  = { 1, "John" };
      struct BST *t = create_tree();
      t->set_compare( &compare );

      t->insert(e1);

      t->get(e1);
       ...
  }

  int compare(void *e1 , void *e2)
  {
      //type cast e1, e2 as struct Emp 
      // return the comparison result based on id
  } 
```

我看到的优点是我不需要继续将此函数指针传递给我的所有 BST 操作函数。

但是将所有公共函数存储在 struct 中会将 OOP 风格带入 C 代码中，就像其他人所说的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:33:42.187

假设该函数接受 2 个变量并调用 4 个不同的函数。假设有一个结构如下：

```
/* Input 1                Input 2                 Function pointer
{
{ 0,                       0,                   Function00},
{ 0,                       1,                   Function01},
{ 1,                       0,                   Function10},
{ 1,                       1,                   Function11}
} 
```

将输入值与结构值进行比较并调用相应的函数会很容易。

使用 if..else... 似乎更好，但想想有超过 100 个这样的情况需要检查的情况

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:22:01.590

在结构中定义函数指针的好处与代码设计有关。目标是让您的代码更有条理。

在结构中定义变量和函数就像在面向对象语言中定义类

有关更多详细信息，请参阅以下[链接](https://stackoverflow.com/questions/351733/can-you-write-object-oriented-code-in-c)

# javascript - 通过模板字段打开 NavigateUrl 窗口

> ID：15612489
> 
> 赞同：0
> 
> 时间：2013-03-25T10:18:21.320
> 
> 标签：javascript, jquery, asp.net, ajax, telerik

我尝试 从网格视图中的按钮打开[NavigateUrl Telerik Window](http://demos.telerik.com/aspnet-ajax/window/examples/contenttemplatevsnavigateurl/defaultcs.aspx)`update panel` ，但我失败了，它根本没有打开窗口

* * *

# 我的 .aspx ：

```
<asp:TemplateField HeaderText="details" ItemStyle-HorizontalAlign="Center">
       <ItemTemplate>
          <asp:ImageButton ID="ibtn_details" runat="server" ImageUrl="~/images/details.png"
          CommandArgument='<%#((GridViewRow)Container).RowIndex%>' CommandName="Get_details" />
       </ItemTemplate>
 </asp:TemplateField>

   <telerik:RadWindow runat="server" ID="radwin_popupdetails" NavigateUrl="PopUpDetail.aspx"
                Modal="true" InitialBehaviors="Maximize">
   </telerik:RadWindow> 
```

* * *

```
 <script type="text/javascript">
            function openWinNavigateUrl() {
                $find("<%=radwin_popupdetails.ClientID %>").show();
            }
 </script> 
```

* * *

# 我的 .cs ：

```
 protected void gv_inbox_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            int index = Convert.ToInt32(e.CommandArgument);

            if (e.CommandName == "Get_details")
            {

                Session["main_code"] = int.Parse(((HiddenField)gv_inbox.Rows[index].Cells[1].FindControl("HDN_MainCode")).Value);

                //System.Web.UI.ScriptManager.RegisterClientScriptBlock(UpdatePanel2, UpdatePanel2.GetType(), "Open window", "openWinNavigateUrl(); return false;", true);
               RadScriptManager.RegisterStartupScript(this, this.GetType(), "tabSelectedScript", "openWinNavigateUrl();", true);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:05:40.057

看看以下资源，它们将帮助您做到这一点，甚至改进：

[http://www.telerik.com/community/forums/aspnet-ajax/window/opening-radwindow-from-the-server.aspx](http://www.telerik.com/community/forums/aspnet-ajax/window/opening-radwindow-from-the-server.aspx)

[http://demos.telerik.com/aspnet-ajax/controls/examples/integration/gridandwindow/defaultcs.aspx?product=window](http://demos.telerik.com/aspnet-ajax/controls/examples/integration/gridandwindow/defaultcs.aspx?product=window)

# symfony - 捆绑包中的 symfony2 资产管理

> ID：15612491
> 
> 赞同：1
> 
> 时间：2013-03-25T10:18:33.513
> 
> 标签：symfony, bundle, assets

目前，我的项目中有一个全局`assets.yml`文件，我在其中定义我的资产并在整个应用程序中使用它们。我有几个捆绑包，它们的所有资产都在这个全局中定义，这`assets.yml`既不明确也不好。

我想`assets.yml`为每个捆绑包定义一个具有相应资产的产品。它们将位于捆绑配置中。

我不知道如何使它们可用于整个应用程序。我应该`import`以某种方式使用还是框架加载文件（名称遵循特定约定）？我很感激提示我如何实现上述目标。

* * *

编辑：我应该再解释一下...在我的 config.yml 中，我将 assets.yml 作为资源导入：

```
imports:
    - { resource: assets.yml } 
```

assets.yml 如下所示：

```
assetic:

  use_controller: false

  filters:
    cssrewrite: ~
    yui_js:
      jar: %kernel.root_dir%/Resources/java/yui-compressor.jar
      #apply_to: "\.js$"
    yui_css:
      jar: %kernel.root_dir%/Resources/java/yui-compressor.jar
      #apply_to: "\.css$"

  assets:   
    jquery:
      inputs:
        - '%kernel.root_dir%/Resources/public/js/jquery-1.8.0.js'
        - '%kernel.root_dir%/Resources/public/js/jquery.sizes.js'
        - '%kernel.root_dir%/Resources/public/js/jquery.form.js'
        - '%kernel.root_dir%/Resources/public/js/jquery.validate.js'
        - '%kernel.root_dir%/Resources/public/js/jquery.metadata.js'
    [...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:50:05.650

查看官方文档以了解[如何为 Bundle 公开语义配置](http://symfony.com/doc/current/cookbook/bundles/extension.html)

*一些参考：*

> 创建捆绑包时，您有两种处理配置的选择：
> 
> 1.  **普通服务配置**（简单）：您可以在位于您的捆绑包中的配置文件（例如 services.yml）中指定您的服务，然后从您的主应用程序配置中导入它。这真的很容易，快速且完全有效。如果您使用参数，那么您仍然可以灵活地从您的应用程序配置中自定义您的包。有关详细信息，请参阅“使用导入导入配置”。
>     
>     
> 2.  **公开语义配置**（高级）：这是使用核心捆绑包完成配置的方式（如上所述）。基本思想是，您无需让用户覆盖单个参数，而是让用户只配置一些专门创建的选项。作为捆绑开发人员，您然后解析该配置并在“扩展”类中加载服务。使用此方法，您无需从主应用程序配置中导入任何配置资源：扩展类可以处理所有这些。

所以主要思想是`Extension`在每个包中创建类并加载包特定的配置文件。

您还可以查看核心 symfony 或第三方包以获取一些示例。

# sql - 使用条件计算列中所有产品的平均成本和更新成本

> ID：15612492
> 
> 赞同：1
> 
> 时间：2013-03-25T10:18:36.953
> 
> 标签：sql, sql-server, sql-server-2000

请帮我以下：

我有“产品”表并有以下任务：计算“单价”列中所有产品的平均成本和更新成本，条件是当前价格>平均，然后-10%，如果<+20%

顺便需要用到变量

请帮我写我使用 SQL Server 2000 的脚本

我写了这样的东西：

```
DECLARE @Average_cost

SELECT @Average_cost = AVG(UnitPrice)  FROM Products  

UPDATE Products
SET UnitPrice = CASE WHEN UnitPrice > @Average_cost 
                      THEN -10% 
                      ELSE UnitPrice < @Average_cost 
                      THEN + 20% 
```

之前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:51:39.933

```
DECLARE @Average_cost

SELECT @Average_cost = AVG(UnitPrice)  FROM Products  
UPDATE Products
SET UnitPrice = (CASE WHEN UnitPrice > @Average_cost 
                      THEN UnitPrice - (UnitPrice * .1)
                      WHEN UnitPrice < @Average_cost 
                      THEN UnitPrice + (UnitPrice * .2)  
                      ELSE @Average_cost                   
                END) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:34:11.033

试试这个

```
UPDATE Products
SET UnitPrice = (CASE WHEN UnitPrice > @Average_cost 
                      THEN UnitPrice - UnitPrice/10 
                      WHEN UnitPrice < @Average_cost 
                      THEN UnitPrice + UnitPrice/5                      
                END) 
```

# c# - 覆盖文件但仍读取内容

> ID：15612493
> 
> 赞同：2
> 
> 时间：2013-03-25T10:18:37.680
> 
> 标签：c#, xml, file-io, linq-to-xml

我正在尝试找到最合理的方法来打开文件，修改其内容，然后将其写回文件。

如果我有以下“MyFile.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<node>
  <data>this is my data which is long</data>
</node> 
```

然后想按照这个来修改：

```
private static void Main(string[] args)
{
    using (FileStream stream = new FileStream("Myfile.xml", FileMode.Open))
    {
        XDocument doc = XDocument.Load(stream);
        doc.Descendants("data").First().Value = "less data";
        stream.Position = 0;
        doc.Save(stream);
    }
} 
```

我得到以下结果。请注意，由于总文件长度小于我在结尾处得到不正确数据之前的长度。

```
<?xml version="1.0" encoding="utf-8"?>
<node>
  <data>less data</data>
</node>/node> 
```

我想我可以使用`File.ReadAll*`，`File.WriteAll*`但这意味着打开两个文件。有没有办法说“我想打开这个文件，读取它的数据，当我保存时删除旧的内容”而不关闭并重新打开文件？我发现的其他解决方案包括`FileMode.Truncate`，但这意味着我无法阅读内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:22:24.657

您必须像这样使用[FileStream.SetLength](http://msdn.microsoft.com/en-us/library/system.io.filestream.setlength.aspx)：

```
stream.SetLength(stream.Position); 
```

**写完**之后。**
当然，假设位置在写入数据的末尾。**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:23:09.743

为什么要先将文件读入文件流？

您可以执行以下操作：

```
private static void Main(string[] args]
{
   string path = "MyFile.xml";
   XDocument doc = XDocument.Load(path);
   // Check if the root-Node is not null and other validation-stuff
   doc.Descendants("data").First().Value = "less data";
   doc.Save(path);
} 
```

流的问题是，您可以读取或写入。

我读过，使用 .net-Framework 4.5 也可以在流上读写，但还没有尝试过。**

# jquery - preventDefault 不应该出现在子 li 中

> ID：15612494
> 
> 赞同：0
> 
> 时间：2013-03-25T10:18:40.370
> 
> 标签：jquery, html, preventdefault

我在下面有以下代码和 jsFiddle 链接。在我看来，我的代码应该可以工作，它会找到正确的 li 标签并禁用默认操作，问题是它会在不应该的情况下将其重复到子元素中。你能解释一下吗？

[http://jsfiddle.net/andyjh07/6HAvV/](http://jsfiddle.net/andyjh07/6HAvV/)

HTML：

```
<ul id="nav">
    <li class=""><a href="home.htm">Home</a>
    </li>
    <li class="nav_parent"><a href="our-projects.htm">Our Projects</a>
        <ul class="nav_child">
            <li class=""><a href="the-palms-at-corozal.htm">The Palms At Corozal</a>
            </li>
            <li class=""><a href="the-lakes-at-consejo.htm">The Lakes At Consejo</a>
            </li>
        </ul>
    </li>
    <li class="nav_parent"><a href="about-us.htm">About Us</a>
        <ul class="nav_child">
            <li class=""><a href="who-we-are.htm">Who We Are</a>
            </li>
            <li class=""><a href="other-projects.htm">Other Projects</a>
            </li>
            <li class=""><a href="partners.htm">Partners</a>
            </li>
        </ul>
    </li>
    <li class="nav_parent"><a href="about-belize.htm">About Belize</a>
        <ul class="nav_child">
            <li class=""><a href="general-info.htm">General Info</a>
            </li>
            <li class=""><a href="investing-in-belize.htm">Investing In Belize</a>
            </li>
            <li class=""><a href="useful-links.htm">Useful Links</a>
            </li>
        </ul>
    </li>
    <li class=""><a href="news.htm">News Articles</a>
    </li>
    <li class=""><a href="contact-us.htm">Contact Us</a>
    </li>
</ul> 
```

jQuery：

```
$(document).ready(function () {
    $('ul#nav li:eq(1)').addClass('removeLink');
    $('.removeLink').click(function (e) {
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:21:26.823

问题是您绑定到`li`元素，并且由于子元素在 中`li`，它们也会触发`click`事件。

尝试更新并防止仅单击`a`元素：

```
$('.removeLink > a').click(); 
```

这是一个[**更新的 jsFiddle**](http://jsfiddle.net/6HAvV/1/)。

# java - 如何将字节数组存储为哈希图中的值？

> ID：15612501
> 
> 赞同：2
> 
> 时间：2013-03-25T10:18:50.767
> 
> 标签：java, android, hashmap, linkedhashmap

我试图在 LinkedHashMap 中存储一个字节数组

```
static Map<Long, byte[]> lhm2 = new LinkedHashMap<Long, byte[]>(1000); 
```

但

```
lhm2.get(1) 
```

将抛出 NullPointerException。lhm2 包含密钥 1，我检查它是否不为空

```
if(lhm2.get(1) != null){
    System.out.println("not null");
} 
```

有什么建议么？

提前致谢！

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:58:11.087

你的钥匙应该很长，所以最好这样做

```
lhm2.get(1L) 
```

而不是像

```
lhm2.get(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:22:58.767

你应该做：

```
if(lhm2.contains(1){
    lhm2.get(1)
} 
```

# jquery - 在词缀插件中动态更改偏移量

> ID：15612503
> 
> 赞同：1
> 
> 时间：2013-03-25T10:18:58.357
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap, affix

我正在使用引导词缀插件在右角幻灯片上制作一个带有内容的 div。我在窗口顶部有另一个部分，它将展开以打开另一个部分以显示一些详细信息。问题是，当展开 details 部分的 div 时，必须更新附加 div 的偏移量。我做过这样的事情

```
 <div class="affixed-box" data-offset-top="160" data-spy="affix">

    $(".detail-btn").click(function(){
    if ($(".opened").length > 0) //The detail div is expanded
         { 
      $(".affixed-box").attr('data-offset-top','160'); 
    }

    else    
   { 
     $(".affixed-box").attr('data-offset-top','400');
   }
    }); 
```

我已经从开发人员工具中验证了偏移量得到了更新，但是附加元素的行为保持不变（它仍然被附加在相同的顶部位置）。我还需要做什么来动态更新偏移顶部值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T04:48:12.347

我正在处理的一个新站点也有类似的情况（当窗口调整大小时，附加导航栏上方的幻灯片会改变高度，使附加导航栏的偏移量错误）。

答案是从 jQuery 数据缓存中删除词缀数据，然后删除与词缀插件关联的所有类，如下所示：

```
$([selector]).removeData('affix').removeClass('affix affix-top affix-bottom'); 
```

我发现在[https://github.com/twbs/bootstrap/issues/5870的底部](https://github.com/twbs/bootstrap/issues/5870)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:31:01.680

查看 scrollspy('refresh') 方法是否有帮助：http: [//twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

```
.scrollspy('refresh') 
```

当使用 scrollspy 和从 DOM 中添加或删除元素时，你需要像这样调用 refresh 方法：

```
$('[data-spy="affix"]').each(function () {
var $spy = $(this).scrollspy('refresh')
}); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:06:58.870

根据[手册](http://twitter.github.com/bootstrap/javascript.html#affix)，您可以将数据属性传递给返回偏移值的函数。

如果您要从 JSFiddle 开始解决这个问题，那么已经处理过它的人可以轻松地帮助您。

# windows-8 - 用于 POS 的锁定 Windows 8

> ID：15612509
> 
> 赞同：1
> 
> 时间：2013-03-25T10:19:06.577
> 
> 标签：windows-8, point-of-sale, windows-rt

我使用 Surface SDK 为 POS 应用程序开发了一个 Windows 7 应用程序（使用触摸屏从您的餐桌上订购饮料/食物）。

我想开始迁移到使用 Metro 应用程序，因为我担心 Surface SDK 很快就会死掉（而且我希望应用程序能够发展）。

我最大的问题是关于 Windows 8 以及如何“锁定”它以供公众使用。

基本上我希望机器启动并运行我的 Metro 应用程序，当然还可以防止用户使用魅力或其他手势访问操作系统。

我知道如何保护 Windows 7 和更早版本，但不知何故，新的 Metro 系统感觉完成如此简单的任务会变得更加困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:59:12.247

除了 GPO，我们为触摸设备（在我们的案例中为 Surface Pro）做的其他事情是构建一个与所有屏幕边缘重叠的自定义外壳（因此您将设备放在一个外壳中，但外壳覆盖了一点触摸屏），因此用户无法调出 Charm 菜单、切换应用程序或使用“Microsoft”按钮。您可以通过在操作系统中从左侧滑动来关闭从以前的应用程序切换。

这有点严重，但你把它放在公共场所，所以我想你还是打算把它放在一个围栏里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:07:13.450

我确实相信 Windows 7 上的相同 GPO 也适用于 Windows 8，但有一些例外。网上有一些我觉得有用的讨论（我需要锁定一些 Windows 8 平板电脑，这些让我继续前进）。唯一的问题是我还没有弄清楚如何锁定 RT 平板电脑。

[Windows 8 平板电脑锁定](http://social.technet.microsoft.com/Forums/en-US/w8itproinstall/thread/2f52d7ef-8597-43c1-9a36-7a69c4966091/)

[关于锁定windows 8开始屏幕的讨论](http://www.eightforums.com/general-support/18239-does-windows-8-support-creating-locked-down-start-screen.html)

# android - 在android中滑动时如何隐藏/显示列表视图项目上的隐藏组件？

> ID：15612510
> 
> 赞同：7
> 
> 时间：2013-03-25T10:19:07.377
> 
> 标签：android

这就是我所做的。当您滑动列表视图的项目时，我已经在列表视图的项目上显示了隐藏的组件现在我需要在其他项目被滑动或滚动列表视图时再次隐藏组件。

```
public class MainActivity extends Activity {

    ListView lstView1;
    ArrayList<HashMap<String, String>> MyArrList;
    GestureDetector gestureDetector;
    View.OnTouchListener gestureListener;

    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 100;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        MyArrList = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map;

        /*** Rows 1 ***/
        map = new HashMap<String, String>();
        map.put("ImageID", "1");
        map.put("ImageDesc", "Sea View1");
        map.put("ImagePath", "pic_a");
        map.put("status", "false");
        MyArrList.add(map);

        /*** Rows 2 ***/
        map = new HashMap<String, String>();
        map.put("ImageID", "2");
        map.put("ImageDesc", "Sea View2");
        map.put("ImagePath", "pic_b");
        map.put("status", "false");
        MyArrList.add(map);

        /*** Rows 3 ***/
        map = new HashMap<String, String>();
        map.put("ImageID", "3");
        map.put("ImageDesc", "Sea View 3");
        map.put("ImagePath", "pic_c");
        map.put("status", "false");
        MyArrList.add(map);

        /*** Rows 4 ***/
        map = new HashMap<String, String>();
        map.put("ImageID", "4");
        map.put("ImageDesc", "Sea View 4");
        map.put("ImagePath", "pic_d");
        map.put("status", "false");
        MyArrList.add(map);

        // listView1
        lstView1 = (ListView) findViewById(R.id.listView1);

        lstView1.setAdapter(new ImageAdapter(this));
        // lstView1.setEnabled(false);

        gestureDetector = new GestureDetector(new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        };
        lstView1.setOnTouchListener(gestureListener);
        //lstView1.setOnScrollListener(l)
    }

    class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            try {
                if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                    return false;
                // right to left swipe
                if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                        && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

                    int pos = YourSlideRightToLeft(lstView1.pointToPosition(
                            (int) e1.getX(), (int) e1.getY()));
                    MyArrList.get(pos).put("status", "true");
                    ((BaseAdapter) lstView1.getAdapter())
                            .notifyDataSetChanged();

                } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                        && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    // left to right swipe
                    YourSlideLeftToRight(lstView1.pointToPosition(
                            (int) e1.getX(), (int) e1.getY()));
                    int pos = YourSlideRightToLeft(lstView1.pointToPosition(
                            (int) e1.getX(), (int) e1.getY()));
                    MyArrList.get(pos).put("status", "true");
                    ((BaseAdapter) lstView1.getAdapter())
                            .notifyDataSetChanged();

                }
            } catch (Exception e) {
                // nothing
                return true;
            }

            return true;

        }
    }

    // Command for Slide Right to Left (<-----)
    public int YourSlideRightToLeft(int position) {
        Toast.makeText(
                MainActivity.this,
                "<-- Your Slide Right to Left ImgID = "
                        + MyArrList.get(position).get("ImageID"),
                Toast.LENGTH_SHORT).show();
        return position;
    }

    // Command for Slide Left to Right (<-----)
    public int YourSlideLeftToRight(int position) {
        Toast.makeText(
                MainActivity.this,
                "---> Your Slide Left to Right ImgID = "
                        + MyArrList.get(position).get("ImageID"),
                Toast.LENGTH_SHORT).show();
        return position;
    }

    public class ImageAdapter extends BaseAdapter {
        private Context context;

        public ImageAdapter(Context c) {
            // TODO Auto-generated method stub
            context = c;
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return MyArrList.size();
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            if (convertView == null) {
                convertView = inflater.inflate(R.layout.activity_column, null);
            }

            // ColImage
            ImageView imageView = (ImageView) convertView
                    .findViewById(R.id.ColImgPath);
            imageView.getLayoutParams().height = 80;
            imageView.getLayoutParams().width = 80;
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(5, 5, 5, 5);
            int ResID = context.getResources().getIdentifier(
                    MyArrList.get(position).get("ImagePath"), "drawable",
                    context.getPackageName());
            imageView.setImageResource(ResID);

            // ColImgID
            TextView txtPosition = (TextView) convertView
                    .findViewById(R.id.ColImgID);
            txtPosition.setPadding(10, 0, 0, 0);
            txtPosition.setText(MyArrList.get(position).get("ImageID") + ".");

            // ColPicname
            TextView txtPicName = (TextView) convertView
                    .findViewById(R.id.ColImgDesc);
            txtPicName.setPadding(5, 0, 0, 0);
            txtPicName.setText(MyArrList.get(position).get("ImageDesc"));
            String value = MyArrList.get(position).get("status");
            if (value.contentEquals("true")) {
                ((TableRow) convertView.findViewById(R.id.tableRow4))
                        .setVisibility(View.VISIBLE);
                ((Button) convertView.findViewById(R.id.btn)).setTag(Integer
                        .valueOf(position));
                ((ToggleButton) convertView.findViewById(R.id.tg))
                        .setTag(Integer.valueOf(position));
            } else {
                ((LinearLayout) convertView.findViewById(R.id.tableRow4))
                        .setVisibility(View.GONE);
            }

            return convertView;

        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T09:23:30.220

此[“SwipeToDismissUndoList”代码](https://github.com/timroes/SwipeToDismissUndoList)可能会对您有所帮助。

# python - Python 2.7.3 :AttributeError: 'NoneType' 对象没有属性 'canvas'

> ID：15612511
> 
> 赞同：0
> 
> 时间：2013-03-25T10:19:07.367
> 
> 标签：python, python-2.7, swampy

我只是python的初学者，已经开始使用python 2.7.3版本。我一直在跟进Think Python电子书。我被困在第4章案例研究：界面设计中有一个程序可以画线。我得到当我运行给定的代码时出现以下错误。

**> 执行：**

```
C:\Users\dell\Desktop>python first.py
<swampy.TurtleWorld.Turtle object at 0x017A1650> 
Traceback (most recent call last):
  File "first.py", line 7, in <module>
    fd(bob,100)
  File "C:\Python27\lib\site-packages\swampy\TurtleWorld.py", line 186, in fd
    self.world.canvas.line([p1, p2], fill=self.pen_color)
AttributeError: 'NoneType' object has no attribute 'canvas'` 
```

**> 脚本**

```
from swampy.TurtleWorld import *
world=TurtleWorld
bob=Turtle()
print bob
fd(bob,100)
lt(bob)
fd(bob,100)
wait_for_user() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T10:21:23.823

你忘了实例化你的 TurtleWorld：

```
world = TurtleWorld()
                   ↑ these were missing 
```

# c++ - [=] 是否暗示将复制所有局部变量？

> ID：15612513
> 
> 赞同：61
> 
> 时间：2013-03-25T10:19:14.497
> 
> 标签：c++, c++11, lambda, capture

当我用 编写 lambda 时`[=]`，这是否意味着我的所有局部变量都将被复制到创建的结构的成员中，还是我可以假设只有那些在 lambda 中实际使用的变量？例如：

```
void f()
{
    vector<int> v(10000);
    const int n = 5;
    const int DivByNCnt = count_if(istream_iterator<int>(cin), istream_iterator<int>(), 
          [=](int i)
          {
             return i % n == 0;
          });
} 
```

以下哪项（如果有）是正确的？

*   n 和 v 都将被复制
*   n 将被复制，v 不会
*   n 将被复制，v 可能会或可能不会被复制，具体取决于实施/优化设置。

为了参数的缘故，假设 vector 的复制构造函数有副作用。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-25T10:22:40.767

不，这只是意味着环境范围内的所有局部变量都可用于在 lambda 的主体内查找。仅*当*您引用环境局部变量的名称时，该变量才会被捕获，并且将按值捕获。

“捕获任何东西”的简写`=`，`&`本质上只是语法糖，告诉编译器“弄清楚我的意思”。

* * *

来自 5.1.2/11-12 的正式参考：

> 如果 lambda 表达式具有关联的*捕获默认值*，并且其*复合语句*odr-uses [...] 具有自动存储持续时间的变量，并且未显式捕获使用 odr 的实体，则称使用 odr 的实体被*隐含地捕获*[...]
> 
> 如果实体被显式或隐式*捕获，则该实体被捕获。*

请注意，“ *capture-default* ”指的是`[=]`和`[&]`。重复一遍，指定捕获默认值不会捕获任何内容；只有使用变量的 odr 才可以。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-25T10:26:15.777

不！（谢天谢地）

你可以检测你的代码来检查你的编译器是否真的做到了（或没有）。例如[gcc 4.8.0](http://liveworkspace.org/code/3HTwkb$3)似乎是合规的。

* * *

至于标准的实际要求（向后工作）：

> §5.1.2/14 如果实体被*隐*式捕获并且默认捕获是，`=`或者如果使用不包含`&`. 对于复制捕获的每个实体，在闭包类型中声明了一个未命名的非静态数据成员。
> 
> $5.1.2/11 如果 lambda 表达式具有关联的捕获默认值及其复合语句 odr-uses (3.2)`this`或具有自动存储持续时间的变量，并且未显式捕获 odr-used 实体，*则 odr-used实体被认为是隐式捕获的*；此类实体应在 lambda 表达式的到达范围内声明。
> 
> §5.1.2/9 最小封闭范围是块范围 (3.3.3) 的 lambda 表达式是本地 lambda 表达式；任何其他 lambda-expression 在其 lambda-introducer 中都不应有捕获列表。本地 lambda 表达式的**到达范围**是一组封闭范围，直到并包括最内层的封闭函数及其参数。[注意：这个到达范围包括任何介入的 lambda 表达式。——尾注]

# mysql - 如何实现mySQL的自关系？

> ID：15612516
> 
> 赞同：1
> 
> 时间：2013-03-25T10:19:22.597
> 
> 标签：mysql, sql, self, database-relations

如何`Message`在 mySQL 中创建这样的表来存储消息及其响应？

![在此处输入图像描述](../Images/a65a54d7d351505c142b82ce9acc7495.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T10:23:07.143

你可以试试这个：

```
create table messages (
    message_id int primary key,
    response_to int null references messages(message_id), -- self relationship
    user_from int not null references users(user_id),
    user_to int not null references users(user_id),
    content varchar(200) not null
); 
```

第一条消息将有一个`null`值 un`response_to`字段。

附带说明一下，如果您打算存储“对话”而不是“消息”，请考虑使用带有 CLOB（字符大对象）的普通表来存储对话的 JSON 或 XML 表示。它将加快您的查询速度（如果您总是计划一次阅读整个对话而不是单个消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:23:35.680

您可以创建一个引用原始 messageId 的 foreign_key，但不要忘记允许 null 值，因为原始消息不会设置此键。

但是拥有一个线程表不是更好的方法，然后在消息表中保存 threadId 以便您可以匹配哪些消息属于哪个线程，发布时间可能是识别响应消息的一个很好的指标。

# html - 打开页面时安装字体

> ID：15612517
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:19:25.347
> 
> 标签：html, fonts

我的系统中已经安装了一种字体，在 Firefox 中我设置了一个`div`with`font-family:'fontname'`并且该字体未应用于`div`，但在 Chrome 或 IE 中它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:22:09.590

你应该使用[@font-face](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)来加载新字体，你可以使用[font squirrel](http://www.fontsquirrel.com/tools/webfont-generator)来转换电脑字体！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:25:36.960

如果你想使用字体，你必须将它上传到 web 目录，对于没有这个字体的其他用户，或者使用 web 字体并只更改 CSS 文件。

在这里取字体：[http ://www.google.com/webfonts/](http://www.google.com/webfonts/)

然后将其包含在 CSS 文件中

```
@import url(http://fonts.googleapis.com/css?family=Merriweather+Sans); 
```

并与 Div 一起使用：

```
div { font-family: 'Merriweather Sans', sans-serif; } 
```

# java - HazelcastClient 具有相同 HazelcastIstance 的故障转移集群

> ID：15612518
> 
> 赞同：1
> 
> 时间：2013-03-25T10:19:25.733
> 
> 标签：java, network-programming, cluster-computing, distributed-caching, hazelcast

是否可以为同一个 HazelcastInstance 配置具有 2 个不同 TCP/IP 集群的 HazelcastClient？（我有脑裂综合症，我希望第二个集群成为备用集群）。

我在问同一个 ClientConfig 是否可以指定 2 个 TCP/IP 地址（实际上是 2 个不同的硬件虚拟 IP 地址（VIPA）），就好像它们是属于同一个集群组的 2 个简单集群成员一样？我的意思是，指定单个 VIPA 地址而不是指定所有成员 IP 地址有什么问题吗？

我认为用一张图片来解释会更好。

![在此处输入图像描述](../Images/2e8c1d74634cca4394bf288fe3777a67.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:41:29.020

是的，您可以，但如果您还需要同步数据（2 个集群），那么您应该使用 wan-replication。看：

[http://www.hazelcast.com/docs/2.5/manual/single_html/#WanReplication](http://www.hazelcast.com/docs/2.5/manual/single_html/#WanReplication)

# php - 在 post-commit 文件中，如何在 php 中运行函数

> ID：15612525
> 
> 赞同：-2
> 
> 时间：2013-03-25T10:19:46.760
> 
> 标签：php, svn, post-commit

完成提交后，我需要在 php 文件中运行一个函数。如果有人对此有任何想法，请提供简单示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:08:33.607

谢谢你所有的评论......我试着找到代码..

卷曲“网址”

url 表示函数的 url

# ruby-on-rails - Activerecord 中的多个条件：all

> ID：15612531
> 
> 赞同：0
> 
> 时间：2013-03-25T10:20:15.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有这个挑战，希望获得与特定部门 ID 匹配并匹配特定课程年份的所有课程。前者已实现，但在实现后者时遇到问题。

```
#course.rb
has_and_belongs_to_many :departments

#department.rb
has_and_belongs_to_many :courses 
```

[编辑]

```
#student.rb
belongs_to :department
has_many :courses 
```

到目前为止有这个

```
## Fetch Courses that Match that studentdept
@coursedept = Course.all(:include => :departments , :conditions => ["departments.id = ? and Courses.year = ? " , studentdept,courseyear] 
```

以上返回一个空的结果集。没有课程标准，它可以工作。

我如何最适合那里的课程标准。尝试了各种变体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:39:56.960

Rails 内置了这个功能。假设你的 has_and_belongs_to_many 连接表设置正确，你可以获得这样的部门课程：

```
courses = studentdept.courses 
```

和特定年份的课程如下：

```
courses = studentdept.courses.where(:year => courseyear) 
```

# ruby-on-rails - 如何为一个对象进行多次投票

> ID：15612533
> 
> 赞同：0
> 
> 时间：2013-03-25T10:20:18.270
> 
> 标签：ruby-on-rails, ruby, vote

我在我的网络应用程序中使用[thumbs_up](https://github.com/bouchard/thumbs_up) gem 进行投票。但现在我需要，用户应该能够为同一对象的多个选项投票。
例如：
餐厅（型号：地点）有以下选项：
- 服务 - 可投票
- 美食 - 可投票
- 等。

但是 thumbs_up 这是 1 个投票 - 1 个对象。解决这个问题的最佳方法是什么？（改变 thumbs_up 行为或使用另一个 gem 或考虑新的解决方案或其他东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:43:52.467

如果你满意，`thumbs_up`我会坚持下去。只需将其他模型添加到您的应用程序并用于`has_many`将其连接到您的原始`Place`模型。您可以使用`thumbs_up`该新模型并用于`has_many :through`查看`Place`模型中的所有投票。

# jsf - 使用 ui:repeat 显示 p:graphicImage 列表

> ID：15612540
> 
> 赞同：0
> 
> 时间：2013-03-25T10:20:48.463
> 
> 标签：jsf, primefaces

页：

```
<ui:repeat value="#{testController.photos}" var="item">
    <p:graphicImage value="#{item}"/>
</ui:repeat> 
```

豆：

```
private TestEntity current;

public List getPhotos() {
    StreamedContent image;
    Collection rawPhotoCollection = current.getPhotoCollection();

    List<StreamedContent> imageList = new ArrayList<StreamedContent>(rawPhotoCollection);
    List<Photo> photoList = new ArrayList<Photo>(rawPhotoCollection);

    for (int i = 0; i < photoList.size(); i++) {
        byte[] data = photoList.get(i).getImage();
        ByteArrayInputStream is = new ByteArrayInputStream(data);
        image = new DefaultStreamedContent(is, "image/png");
        imageList.set(i, image);
    }

    return imageList;
} 
```

TestEntity 有一组照片实体。我将照片集转换为照片数组列表。Photo 有一列 Image 声明为 BLOB。创建了一个循环来检索每个图像，以便我可以将其转换为 StreamedContent。将每个 StreamedContent 插入 imageList（StreamedContent 列表）返回 imageList 并将其显示为 p:graphicImage。

问题是，页面给了我一个破损图像的图标。它不显示图像。我很确定它有一个图像，因为如果我不使用 ui:repeat 并且只使用 p:graphicImage 显示选定的照片实体，它会显示正确的图像。

就像是：

页：

```
<p:graphicImage value="#{testController.firstImage}"/> 
```

豆：

```
public StreamedContent getFirstImage() {
    Collection rawPhotoCollection = current.getPhotoCollection();
    List<Photo> photoList = new ArrayList<Photo>(rawPhotoCollection);
    byte[] data = photoList.get(0).getImage();
    ByteArrayInputStream is = new ByteArrayInputStream(data);
    StreamedContent image = new DefaultStreamedContent(is, "image/png");
    return image;
} 
```

上面的代码有效。

# sql - 将sql语句翻译成linq

> ID：15612541
> 
> 赞同：-4
> 
> 时间：2013-03-25T10:20:54.070
> 
> 标签：sql, linq

我有一个有效的 sql 语句，并希望它作为 linq 语句或 linq 方法链。

我的声明是：

```
 SELECT T1.*
   FROM (SELECT Col1, MAX(InsertDate) as Data
         FROM Zugbewegungsdaten
         GROUP BY Loknummer) as temp JOIN T1
     ON (T1.Col1= temp.Col1
         AND Zugbewegungsdaten.InsertDate= temp.Date)
   WHERE Col3=1
ORDER BY Loknummer 
```

谁能帮我翻译一下？

**评论后编辑：**

好的，我的内部选择结果：

```
var maxResult = (from data in context.T1
                group data by data.Col1
                 into groups
               select new
                      {
                         Train = groups.Key,
                         InsertDate= groups.Max( arg => arg.InsertDate)
                       }) ; 
```

我尝试了这样的加入：

```
 var joinedResult = from data in context.T1
                    join gdata in maxResult on new
                         {
                           data.Col1,
                           data.InsertDate
                         }
                         equals new
                         {
                           gdata.Col1,
                           gdata.InsertDate
                         }
                    select data; 
```

但是我通过类型参数无效的连接得到一个编译器错误。

在连接有效的情况下，我应该使用 where 来过滤joinedResult。

```
 var result = from data in joinedResult
                        where data.Col3 == true
                        select data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:44:39.093

经过更多的“尝试和错误”之后，我得到了这个版本，它看起来可以工作。

```
var joinedResult = ( ( from data in context.T1
                             group data by data.Col1
                             into g
                             select new
                               {
                                 Key= g.Key,
                                 Date = g.Max( p => p.InsertDate)
                               } ) ).Join( context.T1,
                                           temp => new
                                             {
                                               Key = temp.Key,
                                               InsertDate = temp.Date
                                             },
                                           data => new
                                             {
                                              Key = data.Col1,
                                              InsertDate = data.InsertDate
                                             },
                                           ( temp,
                                             data ) => new
                                               {
                                                 temp,
                                                 data
                                               } )
                                    .Where( arg => arg.data.Col3)
                                    .OrderBy( arg => arg.data.Col1)
                                    .Select( arg => arg.data ); 
```

难道我必须通过连接多列来设置相同的属性名称（键、插入日期）？

# android - 带有 PARTIAL_WAKE_LOCK 的唤醒锁不起作用

> ID：15612544
> 
> 赞同：3
> 
> 时间：2013-03-25T10:21:00.260
> 
> 标签：android, wakelock

我有一个警报应用程序，用户联系了我，该用户报告说他的警报有时会延迟。我尝试了不同的方法和理论，最后建议用户使用默认的 Android 警报作为备份。

通常警报会延迟大约一个小时，但上次我的警报是在 Android 的一个明确建议之后才开始的，该设备处于睡眠状态并被 Android 的警报唤醒，这也让我的“继续启动”。

编辑：由于我已经修改了一些类并且已经收到了来自新版本的日志，我正在更改下面的类和日志信息。

这是我正在使用的 CountedWakeLock 类 - 我创建了自己的 HandlerThread 来处理唤醒锁的延迟释放，以检查这是否会影响启动问题。它没有解决问题，但它在日志中产生了有趣的信息（如下）。

```
public class CountedWakeLock {

private static long TIMEOUT_DEFAULT =  DateUtils.MINUTE_IN_MILLIS * 3;
private static WakeLock sWakeLock = null;
private static int sLockCount;

private static class TimeoutReleaseThread extends HandlerThread {

    static TimeoutReleaseThread mInstance = null;

    Handler mHandler;
    private Runnable mReleaseRunnable;

    public static TimeoutReleaseThread instance() {
        if (mInstance == null) mInstance = new TimeoutReleaseThread();
        return mInstance;
    }

    public TimeoutReleaseThread() {
        super("TimeoutReleaseThread HandlerThread");
        start();
        mHandler = createHandler();
        mReleaseRunnable = new Runnable() {

            @Override
            public void run() {
                Utils.log("TimeoutReleaseThread release lock");
                releaseLock();
            }
        };
    }

    private synchronized Handler createHandler() {
        return new Handler(getLooper());
    }

    public synchronized void postRelease(long timeout) {
        mHandler.removeCallbacks(mReleaseRunnable);
        mHandler.postDelayed(mReleaseRunnable, timeout);
    }
}

public synchronized static void acquireLock(Context context) {
    acquireLock(context, TIMEOUT_DEFAULT);
}

public synchronized static void acquireLock(Context context, long timeout) {
    if (sWakeLock == null) {
        Utils.log("WakeLock creating");
        PowerManager pm = (PowerManager) context.getApplicationContext()
                .getSystemService(Context.POWER_SERVICE);
        sWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                "AlarmReceiver lock");
        sWakeLock.setReferenceCounted(false);
        sLockCount = 0;
    } else if (sWakeLock.isHeld())
        Utils.log("WakeLock held already");
    else
        Utils.log("WakeLock not held");

    Utils.log("WakeLock acquiring for " + timeout);
    sLockCount++;
    sWakeLock.acquire();
    TimeoutReleaseThread.instance().postRelease(timeout);
}

public synchronized static void releaseLock() {
    Utils.log("WakeLock releasing");
    if (sWakeLock == null) {
        Utils.log("WakeLock==null");
    } else if (!sWakeLock.isHeld()) {
        Utils.log("WakeLock not held");
        sWakeLock = null;
        sLockCount = 0;
    } else {
        sLockCount--;
        if (sLockCount <= 0) {
            Utils.log("WakeLock released");
            sWakeLock.release();
            sWakeLock = null;
            if (sLockCount != 0) Utils.log("lockcount=" + sLockCount);

        }
    }
}
} 
```

AlarmReceiver BroadcastReceiver - 它正在从 AlarmManager 接收意图

```
public void onReceive(Context context, Intent intent) {
    Logger.initialize(context, "AlarmReceiver");
    if (CALL_IS_ON) {
        //set another alarm with AlarmManager to start after 5 seconds
        //doesn't happen in this situation
    } else {
        Utils.log("sending START ALARM");
        CountedWakeLock.acquireLock(context);
        Intent i = new Intent();
        i.setAction(StartAlarmReceiver.ACTION_START_ALARM);
        i.putExtras(intent.getExtras());

        context.sendOrderedBroadcast(i, null); //it is ordered, so eventual previous Alarm Activities etc. can be stopped
        Utils.log("START ALARM send");
    }
} 
```

启动警报接收器。它实际上是在启动警报活动

```
public void onReceive(Context context, Intent intent) {
    Logger.initialize(context, "StartAlarmReceiver");
    Intent i = new Intent(context, AlarmOnScreen.class);
    Bundle extras = intent.getExtras();
    i.putExtras(extras);
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
    Utils.log("AlarmActivity started");
} 
```

更新日志：

```
504\. 27/3 5:0:0 - logger initialized again from AlarmReceiver
505\. 27/3 5:0:0 - sending START ALARM
506\. 27/3 5:0:0 - WakeLock creating
507\. 27/3 5:0:0 - WakeLock acquiring for 180000
508\. 27/3 5:0:0 - START ALARM send
509\. 27/3 5:0:0 - logger initialized again from StartAlarmReceiver
510\. 27/3 5:0:0 - AlarmActivity started
511\. 27/3 5:0:0 - Main start
512\. 27/3 5:0:1 - Main resume
513\. 27/3 5:0:1 - Main pause
514\. 27/3 5:0:5 - Main stop
515\. 27/3 5:3:0 - TimeoutReleaseThread release lock
516\. 27/3 5:3:0 - WakeLock releasing
517\. 27/3 5:3:0 - WakeLock released
518\. 27/3 6:46:18 - logger initialized again from AlarmOnScreen create //user said he unlocked phone then to check the time... 
```

从现在的日志来看，我相信 WakeLock 确实在工作 - 如果 TimeoutReleaseThread 能够完成工作，那么所有 CPU 都必须一直在运行。

问题是为什么 AlarmOnScreen Activity 没有启动？为什么主要活动（第 511-514 行）开始了？最近我让 AlarmOnScreen 在清单中设置了 singleTask 模式。这会导致问题吗？但为什么？由于其他几个原因，我需要这个 singleTask...

设备是带有 2.3.6 Android 的 GT-S5830i。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:12:54.710

我仍然不知道是什么导致了这个问题，但是如果有人会遇到类似的问题 - 经过多次测试，这只是一个简单的更改 - 在 StartAlarmReceiver 中将 Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED 添加到 Intent。

所以就像

```
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK
     | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED); 
```

它有效吗？是的，它确实。到目前为止，它并没有在其他手机上造成任何问题。

是否有意义？一点都不。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-24T04:20:43.097

我通过这种方式发送通知解决了我的服务问题：

```
startForeground(ID, notification) 
```

# ember.js - 在 didInsertElement 的视图中从控制器访问数据

> ID：15612552
> 
> 赞同：5
> 
> 时间：2013-03-25T10:21:27.557
> 
> 标签：ember.js

我正在尝试从 DashboardIndexView 中的 DashboardIndexController 访问数据

```
JP.DashboardIndexController =  Ember.Controller.extend({
  users: []
}); 
```

是否可以在 didInsertElement 中访问 JP.DashboardIndexView 中的用户？

```
didInsertElement : function(){
    console.log(this.get("controller.users").objectAt(0));
} 
```

这是我的仪表板索引路由：

```
JP.DashboardIndexRoute = Ember.Route.extend({
  setupController: function(controller, model) {
    controller.set('users',  JP.User.find());
  }
}); 
```

谢谢

**编辑**

```
console.log(this.get("controller.users").objectAt(0)); 
```

仅当我转到`UsersIndex`然后返回时才返回数据`DashboardIndex`......我认为这是初始化的问题，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T12:04:35.237

是的，这是访问用户列表的方法。

发生这种情况是因为在使用来自服务器的数据填充`DashboardIndexView`之前将 插入到 DOM 中。`controller.users`

因此，当视图呈现时，`controller.users`仍然是空的，并且在 ajax 请求完成后将异步填充，问题是，`didInsertElement`已经触发了。

为了解决这个问题，您需要`controller.users`从另一个钩子访问。 `DidInsertElement`是错误的地方，因为无论是否`JP.User.find()`加载完成都会着火。

`JP.User.find()`即使视图已经在 DOM 中，您只需要确保它在加载时重新触发。像这样的东西：

```
JP.DashboardIndexView = Ember.View.extend({
  didInsertElement: function() {
    this.usersChanged();
  },
  usersChanged: function() {
    if (!this.$()) { return; } // View not in DOM
    console.log(this.get('controller.users'));
  }.observes('controller.users.@each')
}); 
```

# objective-c - 如何在 NSMutableArray 上添加观察者？

> ID：15612553
> 
> 赞同：16
> 
> 时间：2013-03-25T10:21:28.707
> 
> 标签：objective-c, iphone, uitableview, nsmutablearray

我搜索了很多，但没有找到有用的代码或教程。

在我的应用程序中，我有一个可变数组，每 60 秒更新一次。

数组中的对象由多个视图控制器中的表视图显示。

我想仅在数组中的值更改或更新时自动重新加载表视图。

为此，我想在可变数组上添加观察者，即当数组中的值发生变化时，它应该调用一个特定的方法，例如

```
-(void)ArrayUpdatedNotification:(NSMutableArray*)array
{
    //Reload table or do something
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-25T11:33:51.293

您可以将数组抽象为具有访问器方法的数据容器类，然后使用键值观察来观察支持容器对象的数组何时更改（不能`NSArray`直接使用 KVO）。

下面是一个用作数组顶部抽象的类的简单示例。您使用它的`insertObject:inDataAtIndex:`and`removeObjectFromDataAtIndex:`方法而不是直接访问 with`addObject:`和`removeObject:`。

```
// DataContainer.h
@interface DataContainer : NSObject

// Convenience accessor
- (NSArray *)currentData;

// For KVC compliance, publicly declared for readability
- (void)insertObject:(id)object inDataAtIndex:(NSUInteger)index;
- (void)removeObjectFromDataAtIndex:(NSUInteger)index;
- (id)objectInDataAtIndex:(NSUInteger)index;
- (NSArray *)dataAtIndexes:(NSIndexSet *)indexes;
- (NSUInteger)countOfData;

@end

// DataContainer.m

@interface DataContainer ()

@property (nonatomic, strong) NSMutableArray *data;

@end

@implementation DataContainer

//  We'll use automatic notifications for this example
+ (BOOL)automaticallyNotifiesObserversForKey:(NSString *)key
{
    if ([key isEqualToString:@"data"]) {
        return YES;
    }
    return [super automaticallyNotifiesObserversForKey:key];
}

- (id)init
{
    self = [super init];
    if (self) {
        // This is the ivar which provides storage
        _data = [NSMutableArray array];
    }
    return self;
}

//  Just a convenience method
- (NSArray *)currentData
{
    return [self dataAtIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, [self countOfData])]];
}

//  These methods enable KVC compliance
- (void)insertObject:(id)object inDataAtIndex:(NSUInteger)index
{
    self.data[index] = object;
}

- (void)removeObjectFromDataAtIndex:(NSUInteger)index
{
    [self.data removeObjectAtIndex:index];
}

- (id)objectInDataAtIndex:(NSUInteger)index
{
    return self.data[index];
}

- (NSArray *)dataAtIndexes:(NSIndexSet *)indexes
{
    return [self.data objectsAtIndexes:indexes];
}

- (NSUInteger)countOfData
{
    return [self.data count];
}

@end 
```

我们这样做的原因是我们现在可以观察对底层数组所做的更改。这是通过[Key Value Observing](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177-BCICJDHA)完成的。显示了一个实例化和观察数据控制器的简单视图控制器：

```
// ViewController.h
@interface ViewController : UIViewController

@end

// ViewController.m

@interface ViewController ()

@property (nonatomic,strong) DataContainer *dataContainer;

@end

@implementation ViewController

static char MyObservationContext;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        //  Instantiate a DataContainer and store it in our property
        _dataContainer = [[DataContainer alloc] init];
        //  Add self as an observer. The context is used to verify that code from this class (and not its superclass) started observing.
        [_dataContainer addObserver:self
                         forKeyPath:@"data"
                            options:(NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew)
                            context:&MyObservationContext];
    }

    return self;
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    //  Check if our class, rather than superclass or someone else, added as observer
    if (context == &MyObservationContext) {
        //  Check that the key path is what we want
        if ([keyPath isEqualToString:@"data"]) {
            //  Verify we're observing the correct object
            if (object == self.dataContainer) {
                NSLog(@"KVO for our container property, change dictionary is %@", change);
            }
        }
    }
    else {
        //  Otherwise, call up to superclass implementation
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    //  Insert and remove some objects. Console messages should be logged.
    [self.dataContainer insertObject:[NSObject new] inDataAtIndex:0];
    [self.dataContainer insertObject:[NSObject new] inDataAtIndex:1];
    [self.dataContainer removeObjectFromDataAtIndex:0];
}

- (void)dealloc
{
    [_dataContainer removeObserver:self forKeyPath:@"data" context:&MyObservationContext];
}

@end 
```

当此代码运行时，视图控制器会观察到对数据的三个更改并将其记录到控制台：

```
KVO for our container property, change dictionary is {
        indexes = "<NSIndexSet: 0x8557d40>[number of indexes: 1 (in 1 ranges), indexes: (0)]";
        kind = 2;
        new =     (
            "<NSObject: 0x8557d10>"
        );
    }
KVO for our container property, change dictionary is {
        indexes = "<NSIndexSet: 0x715d2b0>[number of indexes: 1 (in 1 ranges), indexes: (1)]";
        kind = 2;
        new =     (
            "<NSObject: 0x71900c0>"
        );
    }
KVO for our container property, change dictionary is {
        indexes = "<NSIndexSet: 0x8557d40>[number of indexes: 1 (in 1 ranges), indexes: (0)]";
        kind = 3;
        old =     (
            "<NSObject: 0x8557d10>"
        );
    } 
```

虽然这有点复杂（并且可能涉及更多），但这是自动通知可变数组的内容已更改的唯一方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T10:32:48.637

可以做的是 - 更新您的阵列后发送一个通知（NSNotificationCenter），所有控制器都将收到此通知。收到通知后，控制器应该执行 [tableview reloaddata]。

**代码示例**：

```
// Adding an observer
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateTable:) name:@"arrayUpdated" object:nil];

// Post a notification
[[NSNotificationCenter defaultCenter] postNotificationName:@"arrayUpdated" object:nil]; 

// the void function, specified in the same class where the Notification addObserver method has defined
- (void)updateTable:(NSNotification *)note { 
    [tableView reloadData]; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:48:29.357

如果你想使用闪亮的块，你可以这样做

```
// Create an instance variable for your block holder in your interface extension
@property (strong) id notificationHolder;

// Listen for notification events (In your TableView class.
self.notificationHolder = [[NSNotificationCenter defaultCenter] addObserverForName:@"NotificationName"
                             object:nil
                              queue:[NSOperationQueue mainQueue]
                         usingBlock:^(NSNotification *note) {

        NSLog(@"Received notification");
}]; 
```

然后在 dealloc 中（或者当你不再使用它时）

```
- (void)dealloc {
     [[NSNotificationCenter defaultCenter] removeObserver:self.notificationHolder];
} 
```

然后在其他班级

```
// Send a notification
[[NSNotificationCenter defaultCenter] postNotificationName:@"NotificationName" object:nil]; 
```

问有什么不清楚的！希望能帮助到你！

**因评论而编辑**

“ *YourEvent* ”是通知的名称，这意味着您可以将其命名为您想要的任何名称。（也许“ *UpdateArrayNotification*可能是个好名字？）

需要考虑的事情：请注意，同一通知可以有多个观察者。这意味着一个“帖子”将被所有观察者抢购一空。

# xml - XPath 的 XML 语法

> ID：15612558
> 
> 赞同：1
> 
> 时间：2013-03-25T10:21:41.997
> 
> 标签：xml, xpath

我正在编写一些高阶 XSLT，并且希望使用 XPath 表达式进行操作，就像它们是 XML 一样，而不是使用它们的字符串表示。有没有关于这个主题的研究？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:41:14.883

XPath 是 XQuery 的子语言，并且 XQuery 具有 XQueryX 形式的 XML 表示，因此您可以使用它。

# android - 将下拉菜单添加到我的操作栏标题

> ID：15612559
> 
> 赞同：0
> 
> 时间：2013-03-25T10:21:49.730
> 
> 标签：android

```
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
ArrayAdapter < String > adapter = new ArrayAdapter < String > (this, 
         android.R.layout.simple_spinner_dropdown_item,
                         R.array.arrayItem);

bar.setListNavigationCallbacks(adapter, new OnNavigationListener() {    
    @Override
    public boolean onNavigationItemSelected(int itemPosition, long itemId) {
        // TODO Auto-generated method stub
        return false;
    }
}); 
```

我一直在尝试这个，但这里没有任何下拉菜单或微调器。谁能告诉我这里发生了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:00:21.570

SpinnerAdapter接口在使用下拉视图[时](http://developer.android.com/reference/android/widget/SpinnerAdapter.html)更合适（因为它有`getDropDownView()`方法）。据我了解，`ArrayAdapter`旨在`TextView`为每个数组项提供单个视图（例如 s），而`SpinnerAdapter`将它们包装在下拉（“Spinner”）菜单中。

查看[本指南以及](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)如何在 ActionBar 中使用它的示例。

# ios - 如何使用 NSDictionary 中的数据更改 UITableView 中单元格的文本

> ID：15612560
> 
> 赞同：1
> 
> 时间：2013-03-25T10:21:53.537
> 
> 标签：ios, objective-c, uitableview

当用户单击保存按钮时，我将用户的信息存储在 NSUserDefaults 类型的变量中。我想在启动应用程序时，可以将设置保存在相应的单元格中填充。所以这就是我在viewDidLoad方法中对应文件中所做的。

```
- (void)viewDidLoad
{
    // [super viewDidLoad];
// Do any additional setup after loading the view.

    if (self.navigationPaneBarButtonItem)
            [self.navigationBar.topItem setLeftBarButtonItem:self.navigationPaneBarButtonItem
                                                                                            animated:NO];

    //Initialise IndexPath
    NSIndexPath *indexPathBroker = [NSIndexPath indexPathForRow:0 inSection:0];
    NSIndexPath *indexPathPort = [NSIndexPath indexPathForRow:1 inSection:0];

    NSUserDefaults *defaultConf;
    defaultConf=[NSUserDefaults standardUserDefaults];
    NSString * broker =[defaultConf stringForKey:@"broker"];
    NSString *port= [defaultConf stringForKey:@"port"];
    NSLog(@"Brokerdidload: %@ et Portdidload: %@",broker,port);

    //Create strings and integer to store the text info
    ConfigDetailEditTableCell *editCellBroker = (ConfigDetailEditTableCell *)[_tableView cellForRowAtIndexPath:indexPathBroker];
    ConfigDetailEditTableCell *editCellPort = (ConfigDetailEditTableCell *)[_tableView cellForRowAtIndexPath:indexPathPort];

    //set data
          editCellPort.EditCellValue.text =port;
    editCellBroker.EditCellValue.text=broker;
  //  [editCellBroker.EditCellValue setText:broker];
  //   [[editCellPort textLabel] setText:port];
  //  [[editCellBroker textLabel] setText:broker];
   // [[editCellPort textLabel] setPlaceholder:port];
   // [[editCellBroker textLabel] setPlaceholder:broker];
   // editCellPort.EditCellValue.text =*/

    NSLog(@"editCellPort.EditCellValue: %@ et editCellBroker.EditCellValue: %@",editCellPort.EditCellValue.text,editCellBroker.EditCellValue.text);

} 
```

代理和端口中的变量，我有信息，但是当我尝试更新单元格时它不起作用。我是 Null 的最后一个 NSLog 引用

怎么补救？？？？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:49:12.283

与其尝试从 viewDidLoad 设置单元格的值，不如在 cellForRowAtIndexPath: tableView 的 dataSource 方法中进行

```
- (void)viewDidLoad
{
    // [super viewDidLoad];
// Do any additional setup after loading the view.

    if (self.navigationPaneBarButtonItem)
            [self.navigationBar.topItem setLeftBarButtonItem:self.navigationPaneBarButtonItem

   //Rest are not needed

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
       //Initialize cell

        NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
        NSString * broker =[defaults stringForKey:@"broker"];
        NSString *port= [defaults stringForKey:@"port"];

        cell.EditCellValue.text = indexPath.row==0?broker:port;

        return cell;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:04:26.990

您还可以使用免费的 Sensible TableView 框架自动从 NSUserDefaults 获取数据并将其显示在表格视图中。它还会自动将输入的任何数据保存回 NSUserDefaults。非常方便。

# clojure - 有什么快速的方法可以将 clojure 中的闭包恢复或重置为初始状态？

> ID：15612562
> 
> 赞同：1
> 
> 时间：2013-03-25T10:21:55.360
> 
> 标签：clojure, closures, reset

有什么快速的方法可以将闭包恢复或重置为其初始状态？例如，在下面的函数中，如何将与 myClosureFn 关联的 stat1 和 stat2 的值重置为 1？

这个问题的背景：我在不同的函数中使用下面的结构，一个函数可能会“弄乱”与闭包相关的值。因此，我需要将其重置/恢复为初始状态，以便再次将其传递给另一个函数。

```
(def myClosureFn 
  (let [stat1 (atom 1)
        stat2 (atom 1)
        ;..stat3 stat4 ...
        ]
    (fn [m]
      (swap! stat1 inc)
      (reset!   stat2 (* 2 m))
      [@stat1  @stat2])))

(myClosureFn 1) ;--> [2 2] 
(myClosureFn 2) ;--> [3 4]
(myClosureFn 2) ;--> [4 4]
(myClosureFn 3) ;--> [5 6]
;...
; how to get [ 1 1 ] back to myClosureFn ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:40:21.087

与其明确地重新设置与您的函数关联的状态，不如考虑使用高阶函数：

```
(defn myClosureFn []
  (let [stat1 (atom 1)
        stat2 (atom 1)
        ;..stat3 stat4 ...
        ]
    (fn [m]
      (swap! stat1 inc)
      (reset!   stat2 (* 2 m))
      [@stat1  @stat2]))) 
```

所以，要获得新鲜的状态，你只需调用`myClosureFn`which 返回一个带有干净计数器的函数。例如：

```
> (def f1 (myClosureFn))
> (def f2 (myClosureFn))
> (f1 1) ;--> [2 2]
> (f1 2) ;--> [3 4]
> (f2 1) ;--> [2 2]
> (f1 3) ;--> [4 6] 
```

每个函数都带有自己的状态，而不是全局状态。您甚至可以同时创建和使用两个这样的功能，它们不会相互干扰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:52:13.297

当没有传递参数时，您可以使其`myClosureFn`像重置函数一样

```
(def myClosureFn 
  (let [stat1 (atom 1)
        stat2 (atom 1)
        ;..stat3 stat4 ...
        ]
    (fn [& [m]]
      (if m
        (do
          (swap! stat1 inc)
          (reset!   stat2 (* 2 m))
          [@stat1  @stat2])
        (do
          (reset! stat1 1)
          (reset! stat2 1))))))

(myClosureFn 1) ;--> [2 2] 
(myClosureFn 2) ;--> [3 4]
(myClosureFn) ;reset to 1 1 
```

或者，如果您使用的是 REPL，那么只需`myClosureFn`在 REPL 中重新评估表单。

# eclipse - 带有插件的便携式 Eclipse Juno

> ID：15612573
> 
> 赞同：3
> 
> 时间：2013-03-25T10:22:21.363
> 
> 标签：eclipse, windows, plugins, portability, eclipse-juno

我目前正在尝试使用已安装的插件使 Eclipse 安装可移植，因此您只需将整个“eclipse”文件夹复制到另一个系统并具有与原始系统相同的设置。

我现在的问题是，自从 eclipse 4.2 (?) 使用**帮助 > 安装新软件时...**插件从外部安装到文件夹 中，而不是安装到“eclipse.exe”所在的文件夹中：
`C:/Users/*Username*/.eclipse/org.eclipse.platform_4.2.0_*identifier*`

`C:/Program Files (x86)/eclipse`

现在我的问题是是否可以让 eclipse 将其他插件安装到 eclipse 的主文件夹 ( `C:/Program Files (x86)/eclipse`) 的 plugins/features-folder 中。

不幸的是，无法使用 dropins 文件夹，因为应安装的插件仅作为更新站点存在。

我正在使用
Windows 7 Professional Service Pack 1 64bit
和
Eclipse IDE for C/C++ Developers
版本：Juno Service Release 2
32-bit（提供可移植性）。

问候:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:02:21.313

不要将您的 Eclipse 安装放在“Program Files”文件夹下。默认情况下，Eclipse 会将所有插件安装到它自己的文件夹中，除非该文件夹不可从 Eclipse 中写入。并且“程序文件”文件夹*不应*由您写入（除非您使用管理访问权限）。只有受信任的安装程序服务帐户才能修改该文件夹（遵循 Windows 指南）。

因此，将 Eclipse 解压缩到其他地方，任何人都可以编写，安装插件并再次压缩整个文件夹。

作为该 ZIP 包的替代方案，您可能需要查看 File -> Export -> Install -> Software items to file，您可以在其中导出（和重新导入）已安装插件的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-02T22:33:27.373

mack 试图做的应该是可行的，这本质上是 eclipse 基金会为提供各种发行版所做的。只能作为更新站点使用的插件可以安装到现有的安装中，然后复制到新的发行版。唯一的诀窍是确保您拥有***所有***功能和插件 jar 文件。

# iphone - 如何在 iphone 处于加速模式或空闲模式时启动和停止 CMMotionManager startAccelerating 和 stopAccelerating？

> ID：15612585
> 
> 赞同：3
> 
> 时间：2013-03-25T10:22:45.207
> 
> 标签：iphone, ios, accelerometer, core-motion, cmmotionmanager

我正在开发与加速相关的应用程序。我正在使用`CMMtionManager`对象。但是当我调用`startaccelerating`方法时，它的工作并连续调用该方法，即使 iphone 在空闲模式下也是如此。**如何在 iphone 加速和空闲时停止和开始加速。**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    motionManager=[[CMMotionManager alloc]init];
    motionManager.accelerometerUpdateInterval=2;

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

     [self startMyMotionDetect];     
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    [motionManager stopAccelerometerUpdates];   
 // Request to stop receiving accelerometer events and turn off accelerometer

}

- (CMMotionManager *)motionManager
{
   motionManager = nil;

    id appDelegate = [UIApplication sharedApplication].delegate;

    if ([appDelegate respondsToSelector:@selector(motionManager)]) {
        motionManager = [appDelegate motionManager];
    }

    return motionManager;
}
- (void)startMyMotionDetect
{    NSLog(@"active %d",motionManager.accelerometerActive);

     NSLog(@"availabilty %d",motionManager.accelerometerAvailable);

    [motionManager 
     startAccelerometerUpdatesToQueue:[[NSOperationQueue alloc] init]
     withHandler:^(CMAccelerometerData *data, NSError *error)
     {

         dispatch_async(dispatch_get_main_queue(),
                        ^{
                        NSLog(@"hello");
                            [motionManager stopAccelerometerUpdates];
                        });   

     }];
} 
```

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:25:25.207

你尝试添加这个吗？：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                      selector:@selector(stopAccelerometer)
                                          name:UIApplicationDidEnterBackgroundNotification 
                                        object:nil]; 
```

# sql - 获取 SQL 错误：ORA-00957：列名重复，同时创建视图

> ID：15612589
> 
> 赞同：8
> 
> 时间：2013-03-25T10:23:00.410
> 
> 标签：sql, oracle11g

我正在尝试创建视图，但出现重复的列名错误。如果我单独运行选择查询，则查询返回如下结果：

```
SELECT distinct app.APP_REF_NO, app.APP_STATUS, app.APP_DT, app.ATTEND_STAFF,
                app.ATTEND_BRANCH, app.PRODUCT_TYPE, cust.CUST_ID, 
                cust.APP_JOINT_T, cust.ID1_TYPE, cust.ID1, cust.ID2_TYPE, 
                cust.ID2, cust.FIRST_NAME, cust.LAST_NAME, cust.FULL_NAME, 
                cust.FULL_NAME_CAP, cust.DOB, fac.FACILITY_NO, fac.PRODUCT_TYPE,
                fac.PRODUCT_CODE, fac.MAIN_PROD_IND, fac.AMT_APPLIED
FROM 
    LOSA_APP app 
LEFT JOIN 
    LOSA_CUST cust 
ON
    cust.APP_REF_NO = app.APP_REF_NO
LEFT JOIN 
   LOSA_FACILITIES fac 
ON
    fac.APP_REF_NO = app.APP_REF_NO
LEFT JOIN 
    OS_CURRENTSTEP STEP 
ON
    STEP.REF_ID = app.APP_REF_NO
   WHERE (app.APP_STATUS ='P' OR app.APP_STATUS ='T' OR 
         ((app.APP_STATUS='R' OR app.APP_STATUS='S') AND STEP.STEP_NAME='011')); 
```

此查询工作正常。但是当我尝试以如下视图运行它时：

```
CREATE VIEW basit_test1 AS
SELECT distinct app.APP_REF_NO, app.APP_STATUS, app.APP_DT, app.ATTEND_STAFF,
                app.ATTEND_BRANCH, app.PRODUCT_TYPE, cust.CUST_ID, 
                cust.APP_JOINT_T, cust.ID1_TYPE, cust.ID1, cust.ID2_TYPE, 
                cust.ID2, cust.FIRST_NAME, cust.LAST_NAME, cust.FULL_NAME, 
                cust.FULL_NAME_CAP, cust.DOB, fac.FACILITY_NO, fac.PRODUCT_TYPE,
                fac.PRODUCT_CODE, fac.MAIN_PROD_IND, fac.AMT_APPLIED
FROM 
    LOSA_APP app 
LEFT JOIN 
    LOSA_CUST cust 
ON
    cust.APP_REF_NO = app.APP_REF_NO
LEFT JOIN 
   LOSA_FACILITIES fac 
ON
    fac.APP_REF_NO = app.APP_REF_NO
LEFT JOIN 
    OS_CURRENTSTEP STEP 
ON
    STEP.REF_ID = app.APP_REF_NO
   WHERE (app.APP_STATUS ='P' OR app.APP_STATUS ='T' OR 
         ((app.APP_STATUS='R' OR app.APP_STATUS='S') AND STEP.STEP_NAME='011')); 
```

然后我得到重复的列名错误。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-25T10:24:43.937

你有两`product_type`列：

```
fac.PRODUCT_TYPE 
```

和

```
app.PRODUCT_TYPE 
```

你应该给其中一个起别名，例如

```
app.PRODUCT_TYPE app_prod_type 
```

# ios - 滚动视图不动

> ID：15612591
> 
> 赞同：-2
> 
> 时间：2013-03-25T10:23:02.223
> 
> 标签：ios, objective-c, uiscrollview

很简单的错误。无法解决。

我在我的应用程序中添加了一个滚动视图。接下来，我向这个滚动视图添加了一个超出滚动视图范围的视图。我希望滚动视图可以让我的视图滚动。

但视图不可滚动。即我向它添加了一个按钮，以查看它是水平滚动的。然而它不是。

我正在寻找的那种功能就像带有一长串按钮的无限滚动，类似于[http://www.cocoacontrols.com/controls/infinitescrollview](http://www.cocoacontrols.com/controls/infinitescrollview)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:40:48.693

你可以设置属性

```
[scrollview setContentSize:CGRectMake(x, y, width,height)]; 
```

*宽度*= 320*要在滚动视图中添加的视图数量

*height* = 你可以把它放在高度视图中，*例如*460；

并设置框架

```
scrollview.frame=CGRectMake(x, y, self.view.frame.size.width, height) //self.view.frame.size.width=320 (iphone) 
```

这是实现上述最简单的方法

如果你想点击按钮，然后使用 scrollview 属性

```
[scrollview setContentOffset:(CGPoint) animated:BOOL]
or
[scrollview setContentOffset:(CGPoint)] 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:29:01.090

尝试

```
scr.contentSize = CGSizeMake(scr.frame.size.width, contentHeight); 
```

# php - 为什么这个 JSON 不起作用？

> ID：15612594
> 
> 赞同：0
> 
> 时间：2013-03-25T10:23:09.003
> 
> 标签：php, jquery, json, jquery-select2

我想通过使用 select2 插件来使用 MySQL 远程数据作为标签。但是我对 JSON 的学习曲线非常薄弱。请帮助我更正此 JSON 格式。

```
$("#e7").select2({
    placeholder: "Search for a movie",
    minimumInputLength: 3,
    ajax: {
        url: "search.php",
        dataType: 'jsonp',
        quietMillis: 100,
        data: function (term, page) { // page is the one-based page number tracked by Select2
            return {
                q: term, //search term
                page_limit: 10, // page size
                page: page, // page number
                apikey: "ju6z9mjyajq2djue3gbvv26t" // please do not use so this example keeps working
            };
        },
        results: function (data, page) {
            var more = (page * 10) < data.total; // whether or not there are more results available

            // notice we return the value of more so Select2 knows if more results can be loaded
            return {
                results: data.movies,
                more: more
            };
        }
    },
    formatResult: movieFormatResult, // omitted for brevity, see the source of this page
    formatSelection: movieFormatSelection, // omitted for brevity, see the source of this page
    dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller
    escapeMarkup: function (m) {
        return m;
    } // we do not want to escape markup since we are displaying html in results
}); 
```

这是search.php

```
<?php
    $sql=mysqli_query($db3->connection,"SELECT * FROM tags");

    while($row=mysqli_fetch_array($sql)){
        $tags=$row['tags'];
        $id=$row['id'];

        $response=array();
        $response['tags']=$tags;
        $response['id']=$id;     
    }

    echo json_encode($response);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:31:28.267

您的 while 循环未填充 $response 数组。$响应=数组（）；在循环的每次迭代中重置 $response

```
$sql=mysqli_query($db3->connection,"SELECT * FROM tags");

$response=array();
while($row=mysqli_fetch_array($sql)){
    $tags=$row['tags'];
    $id=$row['id'];

    $response[]=array('tags'=>$tags, 'id'=>$id);

}

echo json_encode($response); 
```

# python - PyGame - 无法使用 blit() 调用在屏幕上提供文本

> ID：15612598
> 
> 赞同：1
> 
> 时间：2013-03-25T10:23:24.143
> 
> 标签：python, pygame

作为一个初学者，我正在实施一个简单版本的 Hangman。

在我的代码中，在 for 循环 ( `for event in pygame.event.get():`) 中创建的所有文本消息都不会显示在屏幕上。但是，人们可以看到，它们眨眼了几分之一秒，应该在哪里，但它们从未完全出现。

```
bif = "bg.jpg"

import pygame, sys, time
from pygame.locals import *

pygame.init()

screen_widht = 600
screen_height = 300
user_guess = ''
word = "fuzzy"
guesses = 3
hidden_word = '-'*(len(word))
list_of_indexes = []
valid_letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',     'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']

screen = pygame.display.set_mode((screen_widht, screen_height), 0, 32)
background = pygame.image.load(bif).convert()
font = pygame.font.Font(None, 20)
text_color = (10, 10, 10)

def find_indexes(s, ch):
    global list_of_indexes
    list_of_indexes = [i for i, ltr in enumerate(s) if ltr == ch]

while True:

    screen.blit(background, (0, 0))

    y = 10
    msg1 = font.render("Welcome to Hangman!", 1, text_color)
    screen.blit(msg1, (10, y))
    y += 20
    msg2 = font.render("The word now looks like this: " + hidden_word, 1, text_color)
    screen.blit(msg2, (10, y))
    y += 20
    msg3 = font.render("You have " + str(guesses) + " guesses left", 1, text_color)
    screen.blit(msg3, (10, y))
    y += 20 
    if guesses > 0 and '-' in hidden_word:
        msg4 = font.render("Input your guess", 1, text_color)
        screen.blit(msg4, (10, y))

    for event in pygame.event.get(): #there is the loop which does not blit messages on the screen
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYUP:
            key = event.key
            user_guess = chr(key)     
            if user_guess not in valid_letters: 
                msg5 = font.render("Input valid guess", 1, text_color)
                screen.blit(msg5, (10, 90))
            else:
                msg7 = font.render("Your guess is " + user_guess, 1, text_color)
                screen.blit(msg7, (10, 90))
        if event.type == KEYUP and user_guess not in word and guesses > 0:
            guesses -= 1
        if user_guess not in word:
            msg8 = font.render("There are no " + user_guess + "`s in this word", 1, text_color)
            screen.blit(msg8, (10, 110))       
        else:
            msg6 = font.render("Your guess is correct", 1, text_color)
            screen.blit(msg6, (10, 110))
            find_indexes(word, user_guess)
            while len(list_of_indexes) > 0:
                for ind in list_of_indexes:
                    hidden_word = hidden_word[:ind] + user_guess + hidden_word[ind+1:]
                    list_of_indexes.remove(ind)

    if guesses == 0 and '-' in hidden_word:
        msg9 = font.render("You are completely hung", 1, text_color)
        screen.blit(msg9, (10, 130))

    if not '-' in hidden_word:
        msg10 = font.render("You guessed the word", 1, text_color)
        screen.blit(msg10, (10, 130))

    pygame.display.update()

time.sleep(0.03) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:13:13.117

`if`块_

```
if user_guess not in word:
    msg8 = font.render("There are no " + user_guess + "`s in this word", 1, text_color)
    screen.blit(msg8, (10, 110))       
else:
    msg6 = font.render("Your guess is correct", 1, text_color)
    screen.blit(msg6, (10, 110))
    find_indexes(word, user_guess)
    while len(list_of_indexes) > 0:
        for ind in list_of_indexes:
            hidden_word = hidden_word[:ind] + user_guess + hidden_word[ind+1:]
            list_of_indexes.remove(ind) 
```

是您的事件处理循环 ( `for event in pygame.event.get():`) 的一部分，这是错误的。

它缩进一个`TAB`到远。*否则，仅*当事件队列中有事件时才绘制文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:33:38.223

您的问题是您在 for 循环中对消息图像进行了 blit 处理。events for 循环是一个循环，它处理 pygame 中的所有事件，例如单击屏幕或移动光标。因此，只有在 pygame 事件发生时，您的消息才会被传送到屏幕上。您可以通过在其中创建带有金条的变量来解决此问题。例如：

```
A=False
if user_guess not in valid_letters: 
     A=True 
```

在代码下方的 for 循环之外，您可以编写：

```
if A == True:
    msg5 = font.render("Input valid guess", 1, text_color)
    screen.blit(msg5, (10, 90)) 
```

这是一种方法。可能有一种更有效的方法可以做到这一点，但如果你想让它留在屏幕上，你就不能在事件循环内对某些东西进行 blit。

# android - 从 SFragment 到 SFragmentActivity 的 ClassCastException

> ID：15612601
> 
> 赞同：0
> 
> 时间：2013-03-25T10:23:42.307
> 
> 标签：android, actionbarsherlock, classcastexception

我仍然没有 100% 理解上下文、活动、片段等的概念/差异，所以请耐心等待。

在 SherlockFragment 中调用 getActivity() 时出现 ClassCastException（注意：我也尝试过 getSherlockActivity() 无济于事）：

```
public abstract class TaskGrabbingFragment extends SherlockFragment {
...
    protected void transferGroupToMe() {
    ...
        Backend.getInstance().modifyTask(new OnModifyTaskResponse() {
            @Override
            public void onModifyTask(Map<String, Object> response) {
                refresh();
            }
        }, (MyActivity) getActivity(),  //ClassCastException
        TaskHelper.TASK_IDS, ids,
        TaskHelper.EMPLOYEE_ID, DomaCareBackend.getInstance().getUserId());
    }
} 
```

我的 logcat 输出：

```
FATAL EXCEPTION: main
java.lang.ClassCastException: com.mycom.task.AllTasksActivity cannot be cast to com.mycom.myapp.MyActivity
at com.mycom.myapp.task.TaskGrabbingFragment.transferGroupToMe(TaskGrabbingFragment.java:69)
at com.mycom.myapp.task.TaskGrabbingFragment.onContextItemSelected(TaskGrabbingFragment.java:47)
at android.support.v4.app.Fragment.performContextItemSelected(Fragment.java:1583)
at android.support.v4.app.FragmentManagerImpl.dispatchContextItemSelected(FragmentManager.java:1992)
at android.support.v4.app.FragmentActivity.onMenuItemSelected(FragmentActivity.java:370)
at com.actionbarsherlock.app.SherlockFragmentActivity.onMenuItemSelected(SherlockFragmentActivity.java:211) 
```

MyActivity扩展了SherlockFragmentActivity，异常发生在TaskGrabbingFragment，但是getActivity()返回AllTask​​sTabFragment，是一个SherlockFragment。那么是否有一些规则反对将 SherlockFragment 转换为 SherlockFragmentActivity？有什么样的解决方案可以将片段转换为片段活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:34:27.863

getActivity() 返回 AllTask​​sActivity，而不是 AllTask​​sTabFragment。getActivity() 返回当前片段关联的 Activity。您应该检查 TaskGrabbingFragment 是否与 AllTask​​sActivity 或 MyActivity 相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:56:49.373

这是我心中的一些基本理论，如果你能纠正它的一些缺点，我将不胜感激：

`Context`是一种本质，用于了解某些逻辑在哪里执行。最常见的`Context`s 是`Application`，这意味着.`Activity``Service``Context`

`Application`类允许您在任何引用它的程序组件中为您的应用程序提供资源，因为它代表全局（应用程序）上下文。

`Service`是一个程序组件，允许您在后台执行一些逻辑。

`Activity`是用户在某一时刻与之交互的主要 UI 单元。它主要用于提供 GUI 组件，例如`View`s.

如今，运行 Android 的设备种类繁多。这就是为什么在开发应在大多数设备上尽可能执行的应用程序时出现*碎片问题的原因。*

作为该问题的解决方案之一，Android`Fragment`在其框架中提供了类，该类充当 UI 的可重用容器，并且`Activity`通过生命周期与类强绑定`Activity`。一个人`Activity`可能持有很多`Fragment`s 并且有一个与之关联的后栈。

**最近，Android 开发人员提供了一个创建嵌套片段**的机会——片段，因此一个片段`Fragment`可以作为其他片段的容器。但与 , s 相比`Activity`，`Fragment`s 没有嵌套片段的回栈。

您的问题似乎不是您认为`Fragment`的`Context`那样。`Fragment`只是一个普通的对象 - 容器 - 它可以提供给`Activity`它所附加的用户。

奇怪的是`getActivity()`方法返回 a`Fragment`因为它是一个最终方法，它应该返回一个`Activity`对象。

问题可能隐藏在您添加`Fragment`到`Activity`.

# regex - 用于电子邮件的 ASP.NET MVC Web API 数据注释正则表达式

> ID：15612603
> 
> 赞同：2
> 
> 时间：2013-03-25T10:23:47.820
> 
> 标签：regex, asp.net-web-api, data-annotations

使用`[RegularExpression(@"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$")]`属性永远不会验证我的模型的电子邮件属性。我是正则表达式的新手，所以我不知道是什么问题。一点帮助？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-28T15:29:29.690

```
[Required]
[Display(Name = "Email Address")]
[EmailAddress]
public string email { get; set; } 
```

这样的事情应该可以解决您的问题。电子邮件验证已在 4.5 中构建，请查看[此 msdn 文档](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.ComponentModel.DataAnnotations.EmailAddressAttribute%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:52:33.500

您是否检查了 ModelState 属性是否存在验证错误？查看本页底部的示例：

[http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx](http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx)

用于在验证失败时向客户端发送回错误消息的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T00:21:24.593

看这篇文章：[如何使用正则表达式验证电子邮件地址](http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/)。这家伙不仅给你提供了正则表达式，还一步步解释了它的含义。它不仅作为一种表达方式很有用，而且你还可以从这篇文章中学到一两件事。

希望这可以帮助。如果没有，请告诉我。

# iphone - 从后台而不是设备中删除应用程序时如何取消所有本地通知

> ID：15612604
> 
> 赞同：2
> 
> 时间：2013-03-25T10:23:47.993
> 
> 标签：iphone, localnotification

当应用程序从后台而不是设备中删除时，我想取消所有本地通知。我知道这是

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

但我的问题是当应用程序从后台终止时我应该在哪里将它传递给触发事件。

我在里面打电话，`applicationWillTerminateFromBackground`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:54:07.180

您可以简单地检查应用程序是否在后台，如果是，则不触发通知。

# java - java中的RandomAccessFile是否读取内存中的整个文件？

> ID：15612610
> 
> 赞同：11
> 
> 时间：2013-03-25T10:24:06.043
> 
> 标签：java, randomaccessfile

我需要从一个大文件（比如 2GB）中读取最后 n 行。该文件采用 UTF-8 编码。

想知道最有效的方法。阅读 java 中的 RandomAccessFile，但使用 seek() 方法，读取内存中的整个文件。它使用本机实现，所以我无法参考源代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T10:30:13.570

1.  RandomAccessFile.seek 只是设置文件指针的当前位置，没有字节被读入内存。

2.  由于您的文件是 UTF-8 编码的，因此它是一个文本文件。对于读取文本文件，我们通常使用 BufferedReader，Java 7 甚至添加了一个方便的方法 File.newBufferedReader 来创建 BufferedReader 的实例来从文件中读取文本。虽然读取最后 n 行可能效率低下，但易于实现。

3.  为了提高效率，我们需要 RandomAccessFile 并从末尾开始向后读取文件。这是一个基本示例

```
public static void main(String[] args) throws Exception {
    int n = 3;
    List<String> lines = new ArrayList<>();
    try (RandomAccessFile f = new RandomAccessFile("test", "r")) {
        ByteArrayOutputStream bout = new ByteArrayOutputStream();
        for (long length = f.length(), p = length - 1; p > 0 && lines.size() < n; p--) {
            f.seek(p);
            int b = f.read();
            if (b == 10) {
                if (p < length - 1) {
                    lines.add(0, getLine(bout));
                    bout.reset();
                }
            } else if (b != 13) {
                bout.write(b);
            }
        }
    }
    System.out.println(lines);
}

static String getLine(ByteArrayOutputStream bout) {
    byte[] a = bout.toByteArray();
    // reverse bytes
    for (int i = 0, j = a.length - 1; j > i; i++, j--) {
        byte tmp = a[j];
        a[j] = a[i];
        a[i] = tmp;
    }
    return new String(a);
} 
```

它从tail到ByteArrayOutputStream逐个字节地读取文件，当达到LF时，它会反转字节并创建一行。

有两点需要改进：

1.  缓冲

2.  EOL 识别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:34:46.967

如果您需要随机访问，则需要 RandomAccessFile。如果您知道自己在做什么，则可以将从此获得的字节转换为 UTF-8。

如果您使用 BuffredReader，您可以按字符数使用 skip(n)，这意味着它必须读取整个文件。

* * *

一种组合方式；就是使用带有skip()的FileInputStream，通过回读N个换行符找到你想要读取的位置，然后将流包装在BufferedReader中以读取UTF-8编码的行。

# android - 将 Android 平板电脑应用程序大小调整为 android 手机

> ID：15612613
> 
> 赞同：0
> 
> 时间：2013-03-25T10:24:09.963
> 
> 标签：android, layout

我正在创建一个应用程序并在 Android 平板电脑上进行测试。这意味着我使用尺寸和定位来适应平板电脑屏幕。但是，由于此应用程序可用于平板电脑和手机，我想知道是否有任何设备的自动缩放方式？

谢谢

![在此处输入图像描述](../Images/a653752c15f3c035554749c58de7fe12.png)

我使用地图片段，列表视图中包含的 rss 提要，并且我有按钮。

我想知道缩小Android手机是否复杂？还是足够简单。我目前在运行 4.0.4 的平板电脑上进行测试，但应用程序与新旧 android 版本兼容。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
     android:orientation="vertical"
    android:background="@color/white">

    <fragment
        android:id="@+id/map"
        android:layout_width="300dp"
        android:layout_height="413dp"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@+id/button5"
        class="com.google.android.gms.maps.MapFragment" />

    <Button
        android:id="@+id/button3"
        android:layout_width="305dp"
        android:layout_height="100dp"
        android:layout_marginLeft="34dp"
        android:layout_marginTop="10dp"
        android:onClick="ClickTourismButton"
        android:layout_below="@+id/map"
        android:text="Touism Guide" />
    <TextView
        android:id="@+id/button5"
        android:layout_width="34dp"
        android:textIsSelectable="true"
        android:layout_height="match_parent"
        android:background="@color/grey"
        />
    <TextView
        android:id="@+id/button6"
        android:layout_width="34dp"
        android:textIsSelectable="true"
        android:layout_alignParentRight="true" 
        android:layout_height="match_parent"
        android:background="@color/grey"
        />
    <Button
        android:id="@+id/button4"
        android:layout_width="305dp"
        android:layout_height="100dp"
       android:layout_marginLeft="34dp"
        android:layout_below="@+id/button3"
        android:text="Whats Nearby" />
    <Button
        android:id="@+id/button2"
        android:layout_width="305dp"
        android:layout_height="100dp"
        android:layout_marginLeft="34dp"
        android:layout_below="@+id/button4"
        android:text="Favouites" />
    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="304dp"
       android:layout_marginLeft="34dp"  
        android:layout_height="100dp"
        android:layout_below="@+id/button2"
        android:text="See Full Map" />   

    <TextView
        android:layout_width="260dp"
        android:layout_height="413dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:textIsSelectable="true"
        android:layout_toRightOf="@+id/map"
        android:layout_toLeftOf="@+id/button6"
        android:id="@+id/feedupdate1" />

    <ListView
        android:id="@android:id/list"
        android:background="@color/red"
        android:layout_toRightOf="@+id/map"
        android:layout_width="260dp"
         android:layout_marginTop="5dp"
        android:layout_marginLeft="10dp"
        android:layout_height="413dp" />

    <TextView
        android:id="@+id/empty"
        android:textIsSelectable="true"
        android:layout_width="260dp"
        android:layout_height="413dp"
        android:layout_marginLeft="10dp"
         android:layout_marginTop="5dp"
        />
    <TextView
        android:id="@+id/feedupdate"
        android:layout_width="260dp"
        android:layout_height="390dp"
        android:layout_marginLeft="6dp"
        android:layout_marginTop="430dp"
        android:textIsSelectable="true"
        android:layout_toRightOf="@+id/button3"
         />
    <ListView

        android:id="@+id/list1"
        android:background="@color/blue"
        android:layout_toRightOf="@+id/button3"
        android:layout_width="260dp"
        android:layout_marginTop="430dp"
        android:layout_marginLeft="6dp"
        android:layout_height="390dp" /> 

</RelativeLayout> 
```

* * *

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:background="@color/white">

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

    <fragment
        android:id="@+id/map"
        android:layout_marginTop="5dp"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        class="com.google.android.gms.maps.MapFragment"
         />

    <Button
        android:id="@+id/button3"
        android:layout_weight=".10"
        android:layout_marginLeft="34dp"
        android:layout_marginTop="10dp"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:onClick="ClickTourismButton"
        android:label="@string/Tourism" />

    <Button
        android:id="@+id/button4"
        android:layout_weight=".10"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginLeft="34dp"
        android:label="@string/Nearby" />
    <Button
        android:id="@+id/button2"
        android:layout_weight=".25"
        android:layout_marginLeft="34dp"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:label="@string/Favourites" />
    <Button
        android:id="@+id/button1"
        android:layout_weight=".25"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginLeft="34dp"  
        android:label="@string/Map" />

    </LinearLayout>   

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >
    <TextView

        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textIsSelectable="true"      
        android:id="@+id/feedupdate1" />

    <ListView
        android:id="@android:id/list"
        android:background="@color/red"
        android:layout_weight="1"       
        android:layout_marginTop="5dp"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="10dp"/>

    <TextView
        android:id="@+id/empty"
        android:textIsSelectable="true"   
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"  
        android:layout_marginLeft="10dp"
         android:layout_marginTop="5dp"/>
    <TextView
        android:id="@+id/feedupdate"        
        android:layout_marginLeft="6dp"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="430dp"
        android:textIsSelectable="true"/>
    <ListView

        android:id="@+id/list1"
        android:background="@color/blue"
        android:layout_weight="1"
        android:layout_width="fill_parent"
            android:layout_height="fill_parent"
        android:layout_marginTop="430dp"
        android:layout_marginLeft="6dp" /> 

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:34:23.140

最好尽可能使用视图`layout weight`的`weightsum`属性。它将确保您的视图仅占用您希望指定的屏幕空间百分比。因此，它将缩放您的视图以在小屏幕或大屏幕上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:37:28.577

只要您尽可能使用 ，我认为您不会有`fill_parent`问题`wrap_content`。仍然在developers.android.com上搜索“Android兼容包”

您将在该链接上获得一些信息。

# windows - 编写在 Windows 和 Mac 上运行的脚本

> ID：15612614
> 
> 赞同：1
> 
> 时间：2013-03-25T10:24:16.340
> 
> 标签：windows, macos, perl

我需要编写一个小脚本来重命名目录中的一些文件。此脚本需要在 Mac 和 Windows 上运行。

什么是最好的脚本语言？我想写一些只需调用它就可以运行的东西，不需要安装其他任何东西。

例如，编写一个 Perl 脚本并编译它以在 Windows 上运行，然后编译它以在 Mac 上运行。我可以这样做吗？

还有其他更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:25:40.503

没有任何东西符合您的标准。`perl`如果您想要在两个系统上运行的东西，您将需要安装一些东西（例如）。

如果你`perl`在两个系统上都有，你确实可以编写一个在这两个系统上运行的程序。您甚至不需要您建议的两个二进制文件，因为 Perl 程序是作为源代码分发的。（`perl`在加载它们时编译它们，即使那样，它们也会在所有系统上编译为相同的形式。）

# java - 如何在java中设置FTP的源类型

> ID：15612618
> 
> 赞同：0
> 
> 时间：2013-03-25T10:24:30.730
> 
> 标签：java, ftp

我们用

```
.........
.....
put "C:\Users\rahulsri\Desktop\backup\Zerty\test.CBL" /QSYS.LIB/XYZ.LIB/QSRC.FILE/test.MBR
quote RCMD CHGPFM FILE(XYZ/QSRC) MBR(test) SRCTYPE(CBL) TEXT('test')
......... 
```

对于文件上传，这里**SRCTYPE(CBL)**用于指定我也想通过使用 FtpClient 类在我的 java 代码中指定的源类型，那么这里设置源类型的方法是什么，或者其他意味着我们如何设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:35:47.930

您可以使用该[`sendCommand`](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#sendCommand%28java.lang.String%29)方法向远程服务器发送任意命令。

```
client.sendCommand("RCMD CHGPFM FILE(XYZ/QSRC) MBR(test) SRCTYPE(CBL) TEXT('test')"); 
```

从文档中：

> 向服务器发送不带参数的 FTP 命令，等待回复并返回数字响应代码。调用后，更详细的信息，可以通过调用`getReplyString`或来访问实际的回复文本`getReplyStrings`。

# coldfusion - 使用列表标题构建动态导航（coldfusion 和 cfscript）

> ID：15612622
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:24:39.963
> 
> 标签：coldfusion, menu, cfml

对于我正在构建导航的项目。桌子是这样的

```
SELECT TOP 1000 
    [id]
    ,[title]
    ,[action]
    ,[listOrder]
    ,[fk_parentId]
FROM [portfolio].[dbo].[menu] 
```

其中 Fk_parentId 指的是一个 id... 以建立一个具有级别的菜单。Listorder 包含一个数字

现在我希望我的导航输出这样

```
<ul class="nav nav-list">
       <li class="nav-header active">List header</li>
       <li class="active"><a href="#">Home</a></li>
       <li><a href="#">Library</a></li>
       <li><a href="#">Applications</a></li>
       <li class="nav-header">Another list header</li>
       <li><a href="#">Profile</a></li>
       <li><a href="#">Settings</a></li>
       <li class="divider"></li>
       <li><a href="#">Help</a></li>
</ul> 
```

因此必须将导航标题检测为导航标题，并将菜单项检测为子项。现在我有这个代码

```
public void function main(struct rc) {

    queryService = new query(); 
    queryService.setDatasource("portfolio"); 
    result = queryService.execute(sql="SELECT * FROM menu ORDER by listOrder"); 

    // result
    GetMenuData = result.getResult(); 

    // Loopen over result
    writeOutput("<ul class='nav nav-list>'");
    for (i = 1; i LTE GetMenuData.RecordCount; i = (i + 1))
    {

        // Output
        WriteOutput(
        "<li><a href='"& GetMenuData[ "action" ][ i ] & "'>" & GetMenuData[ "title" ][ i ] & "</a></li>"
        );

    }
    writeOutput("</ul>'");

} 
```

结果：

```
 <ul class='nav nav-list>'
        <li><a href='alk.profile'>PROFILE</a></li>
        <li><a href=''>List header</a></li>
        <li><a href='main.'>home</a></li>
        <li><a href=''>Another List header</a></li>
        <li><a href='alh.settings'>settings</a></li>
        <li><a href='main.library'>librarY</a></li>
        <li><a href='help.main'>Help</a></li>
        <li><a href='main.applications'>applications</a></li>
    </ul>' 
```

如何将类标题添加到`<li>`像 listheader 这样的“标题”，另一个列表标题？

如何在设置和帮助之间动态添加分隔符？

```
title                   action              listOrder   fk_parentId
Another List header     NULL                20          NULL
PROFILE                 alk.profile         5           539BB1A4-5AB5-4059-93AD-17DD8EABAF60
Help                    help.main           40          NULL
settings                alh.settings        20          539BB1A4-5AB5-4059-93AD-17DD8EABAF60
applications            main.applications   50          C5EFAE69-FD2A-4B35-A613-B8D429091A8F
List header             NULL                10          NULL
home                    main.               20          C5EFAE69-FD2A-4B35-A613-B8D429091A8F
librarY                 main.library        30          C5EFAE69-FD2A-4B35-A613-B8D429091A8F 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:33:40.550

我看不到您如何从发布的内容中指定活动，但以下至少会导致函数返回带有标题类的列表。

```
public string function main(struct rc) {

    // Set up the return string
    var strReturn = '<ul class="nav nav-list">';

    // Set up the query
    var queryService = new Query(
        datasource='portfolio'
    ); 

    // Execute and get result, specifying field names
    var GetMenuData = queryService.execute(sql='
        SELECT 
            id,
            action,
            title,
            fk_parentId
        FROM menu
        ORDER by listOrder ASC
    ').getResult();

    // Loop over result
    for (var i = 1; i <= GetMenuData.RecordCount; i++) {

        // For this result, what classes are needed?
        var strClasses = '';

        // Header class
        if (
            Len(GetMenuData['fk_parentId'][ i ]) == 0 // Null / len 0 parent == header
        ) {
            strClasses = ListAppend(strClasses,'nav-header',' ');
        }

        // Add in some logic here for 'active' later on probably a good idea?
        // strClasses = ListAppend(strClasses,'active',' ') if id == active id? May need adjustment to query for parent

        if (
            Len(strClasses) > 0
        ) {
            strClasses  = ' class="'&strClasses&'"';
        }

        // Output list item
        strReturn &= '<li'&strClasses&'>';

            // Add href if needed
            if (
                Len(GetMenuData['action'][ i ]) > 0
            ) {
                strReturn &= '<a href="'&GetMenuData['action'][ i ]&'">';
            }

            strReturn &= GetMenuData['title'][ i ];

            if (
                Len(GetMenuData['action'][ i ]) > 0
            ) {
                strReturn &= '</a>';
            }

        // Close off the list item
        strReturn &= '</li>';
    }

    // End the return string
    strReturn &= '</ul>';

    // And return it
    return strReturn;
} 
```

关于更改的一些说明

*   将函数更改为返回类型为“string”而不是“void”，并对其进行了修改，使其返回一个字符串而不是直接写入。这通常允许对列表的精确输出位置进行更多控制。
*   为函数内调用的所有变量添加了作用域（使用“var”关键字）。请注意，以下示例仅适用于 CF9/railo。如果使用以前的版本，那么 var 定义需要在函数的顶部，如果不确定就问
*   留一个空格以指示您将在何处添加用于标记“活动”的逻辑
*   用于`i++`代替`i = (i + 1)`（请参阅[++i 和 i++ 之间的区别是什么？](https://stackoverflow.com/questions/24853/what-is-the-difference-between-i-and-i)有关其作用的一些信息）
*   用于`strReturn &= ...`添加到字符串，功能等同于`strReturn = strReturn & ....`

# achartengine - 如何使用 achartengine android 更改折线图中的点颜色、样式或大小

> ID：15612626
> 
> 赞同：1
> 
> 时间：2013-03-25T10:24:50.077
> 
> 标签：achartengine, linechart

我现在正在使用 achartengine 开发一个应用程序来绘制折线图。现在我遇到了一个我希望修复的效果问题。效果是，当用户在折线图上触摸一个点时，点的颜色或样式可以更改为不同的颜色或样式。但其他点应该和以前一样。

我找不到任何函数来在 achartengine API 文档上设置点颜色或样式。

有人可以指出任何可以帮助我解决问题的文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:05:28.610

没有这样的 API 可用。但是，您可以创建一个包含一个点（选定的点）的临时系列，仅在需要时添加它，当不再需要时，只需将其从数据集中删除。

# c# - 使用 HtmlAgilityPack 在 body 标签周围添加表单标签

> ID：15612628
> 
> 赞同：0
> 
> 时间：2013-03-25T10:24:53.447
> 
> 标签：c#, html, html-agility-pack

如何在 HMLDocument 周围添加表单标签？

对于给定的 HTML

```
<html>
 <head>
  <title></title>
 </head>
 <body>
  <p>Full name: <input name="FullName" type="text" value=""></p> 
  <p><input name="btnSubmit" type="submit" value="Submit"></p>
 </body>
</html> 
```

和下面的代码......

```
var doc = new HtmlDocument();
doc.OptionAutoCloseOnEnd = true;
doc.LoadHtml(input);
var body = doc.DocumentNode.SelectSingleNode("//body");

if (doc.DocumentNode.SelectNodes("//form[@action]") == null)
{
    var form = doc.CreateElement("form");
    form.Attributes.Add("action", "/pages/event/10302");
    body.PrependChild(form);
}
return doc.DocumentNode.OuterHtml; 
```

我得到以下内容，请注意我们在结束`</form>`标签上方没有结束`</body>`标签

```
<html>
 <head>
  <title></title>
 </head>
 <body>
  <form action="/pages/event/10302">
  <p>Full name: <input name="FullName" type="text" value=""></p> 
  <p><input name="btnSubmit" type="submit" value="Submit"></p>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:10:08.730

FORM 元素有特殊处理。有关更多信息，请参见此处：[HtmlAgilityPack -- <form> 是否出于某种原因自行关闭？](https://stackoverflow.com/questions/4218847/htmlagilitypack-does-form-close-itself-for-some-reason)

所以，你可以这样做：

```
var doc = new HtmlDocument();
HtmlNode.ElementsFlags.Remove("form"); // remove special handling for FORM
doc.LoadHtml(input);
var body = doc.DocumentNode.SelectSingleNode("//body");

if (doc.DocumentNode.SelectNodes("//form[@action]") == null)
{
    var form = doc.CreateElement("form");
    form.Attributes.Add("action", "/pages/event/10302");
    body.PrependChild(form);
} 
```

但它会给你这个：

```
<html>
 <head>
  <title></title>
 </head>
 <body>
  <form action="/pages/event/10302"></form>
  <p>Full name: <input name="FullName" type="text" value=""></p> 
  <p><input name="btnSubmit" type="submit" value="Submit"></p>
 </body>
</html> 
```

这是合乎逻辑的，您不会以这种新形式包围任何东西。因此，您可以这样做：

```
var doc = new HtmlDocument();
doc.LoadHtml(input);
var body = doc.DocumentNode.SelectSingleNode("//body");

if (doc.DocumentNode.SelectNodes("//form[@action]") == null)
{
    var form = body.CloneNode("form", true);
    form.Attributes.Add("action", "/pages/event/10302");
    body.ChildNodes.Clear();
    body.PrependChild(form);
} 
```

这将为您提供：

```
<html>
 <head>
  <title></title>
 </head>
 <body><form action="/pages/event/10302">
  <p>Full name: <input name="FullName" type="text" value=""></p>
  <p><input name="btnSubmit" type="submit" value="Submit"></p>
 </form></body>
</html> 
```

这不是唯一的方法，但它确实有效，而且您不一定要删除 FORM 特殊处理。

# jquery - 如何使用按键打开菜单？

> ID：15612630
> 
> 赞同：0
> 
> 时间：2013-03-25T10:24:58.290
> 
> 标签：jquery, menu, key-events

我目前正在尝试为我设计我的第一个网站。我有一个菜单，默认情况下是隐藏的。当您按下导航栏中的按钮时，它会正常打开。

但我也想增加通过键执行此操作的可能性。M = 打开菜单；ESC = 关闭菜单；

```
$(document).keydown(function(e) {
   if (e.keyCode == 77) {$('#Menu').collapse('show') ;}  ;
   if (e.keyCode == 27) {$('#Menu').collapse('hide') ;}  ;
}) ; 
```

虽然这很好用，但问题是，如果您连续按 M 键两次或更多次，中间没有按 ESC，菜单将不会再次打开。与 ESC 键相同。
此外，当菜单已经打开时，您按 M 它会重新打开，这很难看。

所以我试图将菜单的状态保存在一个名为 MenuToggled 的变量中。
为什么这不起作用？

```
$(document).ready(function() {
    //different stuff...
    var MenuToggled = 0 ;
} ;

$(document).keydown(function(e) {

     if (e.keyCode == 77) {

        if (MenuToggled == 0) {$('#Menu').collapse('show') ; var MenuToggled = 1 ;} 
     } ;   

     if (e.keyCode == 27) {
        if (MenuToggled == 1) {$('#Menu').collapse('hide') ; var MenuToggled = 0 ;} 
     } ;   

}); 
```

看来，Jquery 甚至没有进入 keycode-if，因为我试图触发 .alert('test') ；事件，它在“第二个”代码中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:57:26.490

```
var menuToggled = false;
$(document).keydown(function(e){
    var action = false;

    switch(e.which){
        case 77:
            if(!menuToggled) action = 'show';
        break;

        case 27:
            if(menuToggled) action = 'hide';
        break;
    };

    if(action !== false){
        $('#Menu').collapse(action);
        menuToggled = !menuToggled;
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:41:58.487

使用这个声明.. `e.preventDefault()`

```
if (e.keyCode == 77) {
        e.preventDefault();
        if (MenuToggled == 0) {$('#Menu').collapse('show') ; var MenuToggled = 1 ;} 
     } ;   

     if (e.keyCode == 27) {
         e.preventDefault();
        if (MenuToggled == 1) {$('#Menu').collapse('hide') ; var MenuToggled = 0 ;} 
     } ; 
```

# xml - XPath 在一个查询中连接父属性值和子属性值

> ID：15612631
> 
> 赞同：0
> 
> 时间：2013-03-25T10:25:04.033
> 
> 标签：xml, xpath, xpathnavigator

鉴于：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<report Id="0" >
<property name="comments">comment</property>
<property name="test">sdcs</property>
<property name="test">csd</property>
<property name="eventHandlerClass">sdcs</property>
</report>
<report  Id="1">
<property name="comments">comment</property>
<property name="test">dcs</property>
<property name="test">gds</property>
<property name="test">jds</property>
<property name="eventHandlerClass">sdcs</property>
</report>
</root> 
```

预期输出：

```
Id=0, test=sdcs
Id=0, test=csd
Id=1, test=dcs
Id=1, test=gds
Id=1, test=jds 
```

只寻找一个普通的 Xpath ***1.0***来实现这一点。尝试了各种函数和谓词，但未能获得如上所示的输出。本质上，阅读后我应该能够分辨出哪个“测试”属于哪个报告 ID。

试过：

`/root/report/@Id | /root/report/property[@name="test"]` -- 但是在单独的行中给出结果

`/root/report/ ( @Id | property[@name="test"])`-- 但是在单独的行中给出结果

`concat( /root/report/@Id, /root/report/property[@name="test"])` -- 给出错误（认为 Concat 适用于单行结果）

`string-join(/root/report/@Id | /root/report/property[@name="test"] , ',')` -- 所有内容都以一行形式出现，甚至是两个报告 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:54:05.367

您可以使用 for 将 id 保存在变量中：

```
for $report in /root/report 
return for $property in $report/property[@name="test"]
return concat("Id=", $report/@Id, ", ", $property/@name, "=", $property) 
```

或更短：

```
for $report in /root/report return
$report/property[@name="test"]/
concat("Id=", $report/@Id, ", ", @name, "=", .) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-07T14:33:12.347

您可以通过使主要的“迭代元素”成为最深的孩子来非常优雅地做到这一点——在这个例子中，XML 根元素是 TABLE。看看我们如何“迭代”更深的称为 COLUMN 的孩子。我们取 COLUMN 的 @name（第二个），并添加 parent's-parent 的 @name 属性

```
/TABLE/COLUMNS/COLUMN/concat(../../@name, ' : ', @name) 
```

这消除了为父级的@name 使用变量的需要

# ios - 将大视频从 PhotoLibrary 上传到服务器

> ID：15612634
> 
> 赞同：0
> 
> 时间：2013-03-25T10:25:11.523
> 
> 标签：ios, video, upload, photolibrary

我从 PhotoLibrary 将大视频资产上传到服务器时遇到问题。

我按照[此处所述](https://stackoverflow.com/questions/4545982/getting-video-from-alasset?answertab=active#tab-top)获取资产数据，将视频导出到本地文档，然后上传。

但是当我上传一个大视频（2分钟，大约300Mb或更大）时，这种方法会导致崩溃，我没有任何理由也没有任何信息。

我`webDAV`用来上传文件是这样的：

```
 // Set up credentials
    NSURLCredential *userCredentials = [NSURLCredential credentialWithUser:username
                                                                  password:password
                                  persistence:NSURLCredentialPersistenceForSession];
    NSURLProtectionSpace *space = [[NSURLProtectionSpace alloc] initWithHost:host
                                                                        port:80
                                                                    protocol:@"http"
                                                                       realm:@" webDAV"
                                                        authenticationMethod:nil];
    [[NSURLCredentialStorage sharedCredentialStorage] setCredential:userCredentials forProtectionSpace:space];
    [space release];

    // Create the request
    NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"PUT"];
    [request setValue:[self mimetypeForFile:self.filepath] forHTTPHeaderField:@"Content-Type"];
    NSNumber *contentLength = (NSNumber *) [[[NSFileManager defaultManager]
                                             attributesOfItemAtPath:self.filepath error:NULL]
                                            objectForKey:NSFileSize];
    [request setValue:[contentLength description] forHTTPHeaderField:@"Content-Length"];

    if (self.useStreaming)
    {
        if (self.currentFileStream!=nil)
        {
            [self.currentFileStream close], self.currentFileStream = nil;
        }
        self.currentFileStream = [NSInputStream inputStreamWithFileAtPath:self.filepath];

        if (currentFileStream!=nil)
        {
            [request setHTTPBodyStream:currentFileStream];
        }
        else
        {
            [request setHTTPBody:[NSData dataWithContentsOfFile:self.filepath]];
        }
    }
    else
    {
        [request setHTTPBody:[NSData dataWithContentsOfFile:self.filepath]];
    }

    NSURLConnection* conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (self.currentConnection!=nil)
    {
        self.currentConnection = nil;
    }
    self.currentConnection = conn;
    [conn release];
    [self.currentConnection start]; 
```

当代码到达这一行时：

`self.currentFileStream = [NSInputStream inputStreamWithFileAtPath:self.filepath]; [request setHTTPBodyStream:currentFileStream];`

或者：

```
[request setHTTPBody:[NSData dataWithContentsOfFile:self.filepath]]; 
```

它崩溃了。

你有什么建议吗？

谢谢。

=========================

**`setHTTPBody:`编辑：它在OR 处崩溃`setHTTPBodyStream:`** 所以我认为这是关于内存泄漏之类的。

=================

**EDIT2：**现在我决定压缩视频，我通过当前方法得到的视频数据太大（超过300mb），但我发现使用`UIImagePickerController`选择相同的视频，它只有30mb；所以压缩是有帮助的；**我会尝试`UIVideoEditorController`，很快就会发布我的结果；**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:23:45.380

**完全的。解决方法是尝试将大视频压缩成小文件；**

1.和之前一样，将视频资源导出到tmp目录；

[2.使用UIVideoEditorController](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIVideoEditorController_ClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40009027)压缩视频文件；

3.只需像我发布的代码一样上传压缩文件。

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:28:42.837

[检查以下帖子，我在服务器上上传图像，而不是图像，您可以在 Objective C 中通过 POST](https://stackoverflow.com/questions/11084403/uploading-image-via-post-in-objective-c/15477035#15477035)发布视频 上传图像

# struts2 - struts2 jqgrid：onEditInlineErrorTopics 未在错误时调用

> ID：15612635
> 
> 赞同：2
> 
> 时间：2013-03-25T10:25:20.977
> 
> 标签：struts2, struts2-jquery, struts2-json-plugin, struts2-jquery-grid

在保存 jqgrid 时，该操作捕获 a`constraint violation exception`并返回“错误”。但是，该`onEditInlineErrorTopics`函数不会在 jsp 上调用。异常需要翻译成用户消息说*“重复记录”* 代码如下：

**JSP 网格代码**

```
<sjg:grid id="gridtable" 
dataType="json"
    href="%{remoteurl}"
    loadonce="true"
    pager="true"
    navigator="true"
    scroll="true"  
    navigatorAdd="false"
    navigatorEdit="false"
    navigatorView="false"
    navigatorDelete="true"
    navigatorDeleteOptions="{height:220,reloadAfterSubmit:true,url:'%{deleteurl}'}"
    gridModel="gridModel"
    rowList="10,15,20"
    rowNum="15"
    navigatorRefresh="false"
    navigatorSearch="false"
    editurl="%{editurl}"
    editinline="true"
    navigatorInlineEditButtons="true"
    gridview="true"
    viewrecords="false"
    shrinkToFit="true" 
   onEditInlineErrorTopics="onediterror"> 
```

也试过这些标签 `errorElementId, errorText`&`onErrorTopics`

**动作标头（注解）**

```
@ParentPackage(value = "basicstruts2")
@Action(value = "/editDetails",
results = {
@Result(name="success",type="json"),
@Result(name="error",type="json"),
@Result(name="none",type="json"),
@Result(name="input",type="json")
}) 
```

**动作捕捉块**

```
catch(Exception e){
addActionError("Duplicate Records. Please enter again.");
return "error";
} 
```

创建的`Json`字符串是： `{"JSON":"error","field1":"1","field2":3,"oper":"edit","field3":5,"field4":"9","field5":null,"field6":null,"field7":"19","field8":156}`

尝试抛出`exception`catch 块，但它在弹出窗口中显示堆栈跟踪。

尝试了*[此处展示](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)*`onEditInlineSuccessTopics`中提到的成功主题，效果很好。

# aptana3 - 在 CSS 验证器中添加 PHP 表达式警告异常

> ID：15612636
> 
> 赞同：1
> 
> 时间：2013-03-25T10:25:26.013
> 
> 标签：aptana3

我正在使用 CSS 文件中的 php 变量。我无法弄清楚如何为 <\?php echo $purple; 的 CSS 验证器添加警告异常；?>

我试过 .*<\?php.*\?> 和 .*\<\?php.*\?>。但是错误一直在 < 作为*语法错误弹出：意外标记“<”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:42:50.717

我相信当您添加 CSS Validator 异常时，您会为错误或警告文本创建一个正则表达式，而不是它的原因。例如，不要为 添加例外`.*<\?php.*\?>`，为. 添加例外`Syntax Error: unexpected token "<"`。有关示例，请参见此页面：http: [//morganizeit.com/2008/04/configure-aptana-to-ignore-css-hacks/](http://morganizeit.com/2008/04/configure-aptana-to-ignore-css-hacks/)

还值得指出的是，如果您的正则表达式似乎对您正在处理的错误/警告没有影响，您可能会将其添加到错误的验证器中，因为在任何给定的编辑器中通常有多个在工作. 例如，当我编辑 CSS 时，有时会收到来自 CSS 语法验证器的警告，有时会收到来自 W3C 样式表验证器的错误。因此，如果您的表达在其中一个中不起作用，请在另一个上尝试。您可以通过暂时禁用验证器并查看警告/错误是否退出来确定错误的来源。

# android - 从待处理的意图传递参数

> ID：15612639
> 
> 赞同：0
> 
> 时间：2013-03-25T10:25:30.980
> 
> 标签：android, notifications, android-pendingintent

当用户点击通知时，我需要发送参数。

我的创建通知代码：

```
 NotificationManager notifManager = (NotificationManager) c.getSystemService(c.NOTIFICATION_SERVICE);
        Notification note = new Notification(R.drawable.ic_launcher, "Smartdrifter", System.currentTimeMillis());  

        Intent WA = new Intent(c, WebActivity.class);

        WA.putExtra("url", urlTarget);
        WA.putExtra("valid", notifId);
        WA.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        PendingIntent intent = PendingIntent.getActivity(c, 0, WA, 0);

        notifManager.cancel(notifId);
        note.setLatestEventInfo(c, titulo, texto, teste());  

        notifManager.notify(notifId, note); 
```

我的请求参数代码：

```
String url = getIntent().getStringExtra("url"); 
```

但响应为 NULL。

还有另一种形式的请求参数吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:44:01.353

使用内置方法：`onNewIntent(Intent intent)`在您的活动`WebActivity`中捕获待处理的意图。

```
@Override
public void onNewIntent(Intent intent) {

    setIntent(intent);
    String url = getIntent().getStringExtra("url");

} 
```

# jquery - 调整大小时弹出警报离开屏幕

> ID：15612647
> 
> 赞同：0
> 
> 时间：2013-03-25T10:25:58.430
> 
> 标签：jquery, asp.net, html, css

我有一个弹出框，当用户在图标上移动鼠标时会显示。悬停的CSS如下：-

```
.profile-bubble {
background-color: #EDEDED;
border: 2px solid #666666;
font-size: 15px;
font-weight: bold;
line-height: 1.3em;
margin: 0.6% 2% 2% 90%;
padding: 10px;
position: absolute;
text-align: center;
width: 150px;
opacity: 0.9;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-moz-box-shadow: 0 0 5px #888888;
-webkit-box-shadow: 0 0 5px #888888; 
```

}

这很好用，但是问题是当我调整屏幕大小时，或者如果用户的分辨率比我小，那么警报框就会消失在屏幕之外。

我如何修改这个 css 以使其与屏幕大小成比例？

感谢您的帮助和时间。

更新 - - - - - - - - - - - - - - - - - - - - - - - - - -----这是标题css：-

```
/* Header*/ 
```

标题{填充底部：5px；}

```
#headerContainer {
height: 33px;
background-position: 10px 2px;
padding-top: 2px; 
```

}

```
.headerProfileNotifications {
float: right;
padding-right: 4px;
margin: 3px;
position: relative; 
```

}

```
.headerProfilePhoto {
float: right;
position: relative;
margin: 3px; 
```

}

```
img {
border: 1px solid #D5D5D5; 
```

}

```
img {
border: 1px solid #D5D5D5; 
```

}

```
img:hover {
border: 2px solid #000000; 
```

}

```
.headerProfileDetails {
float: right;
padding-right: 4px;
font-size: 11px;
text-align: right; 
```

}

```
.headerProfileName {
margin-top: 2px; 
```

}

```
.headerProfileEmail {
clear:both;
float:right;
margin-top: 0px; 
```

}

和html： -

```
<header>
        <div class="content-wrapper">
            <div id="headerContainer">
                <div class="headerProfileNotifications">
                        <img src="Images/" alt="notification" />
                </div>
                <div class="headerProfilePhoto">
                        <img src="Images/" alt="profile_photo" />
                </div>
                <div class="headerProfileDetails">
                    <div class="headerProfileName">
                            John Smith
                    </div>
                    <div class="headerProfileEmail">
                            john.smith@somemail.co.uk
                    </div>

                </div>
            </div>
         </div>
    </header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:30:09.617

也将宽度和高度设为百分比 -

```
width:50%;
height:50%; 
```

并将框尺寸设置为边框框，这样您就不必考虑边距、填充等。这一切都只进入宽度。

然后相应地定位它（你有`position:absolute`） -

```
top:20%;
left:20%; 
```

您的图像和气泡必须在容器内，容器内没有其他元素。[请参阅codepen 上的](http://codepen.io/saivineet89/pen/aoiCw)
此示例。这个容器必须相对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:34:55.843

尝试在 css 中放置`left`和属性：`top`

```
.profile-bubble {
    background-color: #EDEDED;
    border: 2px solid #666666;
    font-size: 15px;
    font-weight: bold;
    line-height: 1.3em;
    margin: 0.6% 2% 2% 90%;
    padding: 10px;
    position: absolute;
    text-align: center;
    width: 150px;
    opacity: 0.9;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    -moz-box-shadow: 0 0 5px #888888;
    -webkit-box-shadow: 0 0 5px #888888;
    left:25%; //<-------------------------------add this
    top:25%;  //<-------------------------------and this
 } 
```

# java - 如何在 javafx 2.1 的后台线程中运行查询

> ID：15612651
> 
> 赞同：1
> 
> 时间：2013-03-25T10:26:09.720
> 
> 标签：java

我的应用程序是一个独立的 Java 应用程序时遇到问题。我正在使用核心 java、JDBC 和 javafx 2.1。我必须向用户显示数据库中表中存在的行数。为此，我`SELECT COUNT(*) FROM SCHEMA.TABLENAME`在我的 java 代码中触发并在`tableView`(javafx 2.1) 中显示结果。由于我的数据库包含大量具有大量行数（表中的行数）的表，因此此过程需要大量时间（30 分钟）。使用这种方法，我`tableview`被卡住了，用户将无法继续进行，直到该过程完成。我`Thread.sleep()`在我的代码中使用正常。

我想在后台运行该进程，以便用户能够执行其他任务。该过程完成后应通知用户。我尝试过使用 javafx 2.1 异步但无法解决问题。

请给我一些代码，它将在 javafx 2.1 的后台与数据库交互。

谢谢和问候萨拉马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:44:09.300

使用[JavaFX 并发教程](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)中的[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)。

这允许您在后台线程上安全地执行代码，而不会阻塞主 UI 线程。

下面是一些使用任务访问数据库的[示例代码](https://gist.github.com/jewelsea/4957967)。

# vba - 如何在导出的word文档中动态插入页脚

> ID：15612653
> 
> 赞同：0
> 
> 时间：2013-03-25T10:26:10.703
> 
> 标签：vba, ms-word, lotus-notes

我有将数据导出到 Microsoft Word（2003 版）文档的 Lotus Notes Web 应用程序。数据将超过 10 页。现在我想插入一个页脚以在每一页上显示一些文本。建议请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:09:46.437

您需要查看 Microsoft Developer Network。 [此页面](http://msdn.microsoft.com/en-us/library/office/ff194465.aspx)处理页眉和页脚。您应该能够从给出的示例中解决它。

此外，[此页面](http://msdn.microsoft.com/en-us/library/office/aa211923%28v=office.11%29.aspx)可用于查找这些常量的枚举值

# java - Java 运行时文本框创建

> ID：15612659
> 
> 赞同：0
> 
> 时间：2013-03-25T10:26:37.657
> 
> 标签：java, swing, jtextfield

您好，我想在运行时在面板上创建文本框，即当我在两个文本框中输入 3 和 4 时，它将在 Swing 中的按钮单击事件中打印 3 行和 4 列的文本框。这是我的代码。

```
JFrame jf=new JFrame();
JPanel jp=new JPanel();
JTextField jt1=new JTextField();
JTextField jt2=new JTextField();
JLabel jl1=new JLabel("Enter Row");
JLabel jl2=new JLabel("Enter Column");
JButton jb1=new JButton("OK");
JButton jb2=new JButton("Cancel");

jf.setContentPane(jp);
jp.setLayout(null);
jp.setBackground(Color.CYAN);
jp.add(jb1);
jp.add(jt1);
jp.add(jt2);
jp.add(jl1);
jp.add(jl2);
jp.add(jb2);

jf.setVisible(true);
jf.setSize(500,500);

jt1.setBounds(200,20,50,30);
jt2.setBounds(200,60,50,30);

jl1.setBounds(90, 20, 80, 30);
jl2.setBounds(90,60,80,30);
jb1.setBounds(150, 100, 80, 80);

jb1.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:29:58.547

`actionPerformed()`您可以根据从文本框中获取的值在方法中使用循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:54:52.600

这是一个粗略的代码，没有任何验证和布局考虑。您可以使用它来进一步满足您的要求。

```
public class ClsCreateTextBoxes extends javax.swing.JFrame{
    private javax.swing.JPanel jpInputPanel = null;
    private javax.swing.JTextField jtfRows = null;
    private javax.swing.JTextField jtfColumns = null;
    private javax.swing.JButton jbCreateMatrix = null;
    private javax.swing.JPanel jpMatrixPanel = null;

    public ClsCreateTextBoxes(){
        setSize(400, 400);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        getContentPane().setLayout(new java.awt.BorderLayout());
        jpInputPanel = new javax.swing.JPanel(new java.awt.FlowLayout());
        jtfRows = new javax.swing.JTextField(10);
        jpInputPanel.add(jtfRows);
        jtfColumns = new javax.swing.JTextField(10);
        jpInputPanel.add(jtfColumns);
        jbCreateMatrix = new javax.swing.JButton("Create");
        jbCreateMatrix.addActionListener(new java.awt.event.ActionListener(){
            public void actionPerformed(java.awt.event.ActionEvent ae){
                //  Assuming proper number is given
                jpMatrixPanel.setLayout(new java.awt.GridLayout(Integer.parseInt(jtfRows.getText()), Integer.parseInt(jtfColumns.getText())));
                for(int rowIndex = 0; rowIndex < Integer.parseInt(jtfRows.getText()); rowIndex ++){
                    for(int columnIndex = 0; columnIndex < Integer.parseInt(jtfColumns.getText()); columnIndex ++){
                        jpMatrixPanel.add(new javax.swing.JTextField(10));
                        pack();
                    }
                }
            }
        });
        jpInputPanel.add(jbCreateMatrix);
        getContentPane().add(jpInputPanel, java.awt.BorderLayout.NORTH);
        jpMatrixPanel = new javax.swing.JPanel();
        getContentPane().add(jpMatrixPanel, java.awt.BorderLayout.SOUTH);
        pack();
    }
    public static void main(String[] args){
        ClsCreateTextBoxes createdTextBoxes = new ClsCreateTextBoxes();
        createdTextBoxes.setVisible(true);
    }
} 
```

# python - 如何在 Python cmd 中正确识别 argv？

> ID：15612664
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:26:47.080
> 
> 标签：python, shell, command-line-arguments

这是代码：

```
import sys
# Gather our code in a main() function

def main():
    for arg in sys.argv:
        print(arg)

# Standard boilerplate to call the main() function to begin
# the program.
if __name__ == '__main__':
    main() 
```

当我在 cmd 中运行它时`a.py a&7`，它只打印`a`（`&7`无法识别）。我怎样才能将字符发送`&`到`sys.argv[]`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:30:01.520

在 Windows 上，使用以下命令转义 & 符号`^`：

```
python a.py a^&7 
```

或者用双引号引用（单引号不起作用）：

```
python a.py "a&7" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:28:20.260

假设这是一个类 Unix 系统，您需要引用参数以防止 shell 解析它并将其`&`视为命令分隔符：

```
a.py 'a&7' 
```

# python - Python unittest：setUpClass 使用非静态方法

> ID：15612665
> 
> 赞同：1
> 
> 时间：2013-03-25T10:26:47.000
> 
> 标签：python, unit-testing

我是 Python 的初学者，开始在 Python 中设计单元测试，我需要在运行测试类之前向服务器发布一些消息（因为它会搜索它们）。因此我需要调用一个非静态方法`postMessages()`。

我得到的错误的堆栈跟踪是这个 -

```
 Error
Traceback (most recent call last):
  File ".../TestMsgs.py", line 23, in setUpClass
    instance = cls()
  File ".../python2.7/unittest/case.py", line 191, in __init__
    (self.__class__, methodName))
ValueError: no such test method in <class 'TestMsgs.TestMsgs'>: runTest 
```

我在代码中有这样的东西：

```
class A(object):

    def postMessages(self):
        print "i post messages in the server!"

class B(A):

    @classmethod
    def setUpClass(cls):
        cls.foo()  # should post messages for the tests in the class to work on 
```

目前没有选择使 foo 成为静态的。如何在 postMessages() 中实例化 B（或 A，就此而言），以便我可以在 setUpClass() 中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:04:54.367

在通读`__init__`TestCase 的方法后，我发现您需要为其提供一个测试方法名称。默认值为“runTest”，这就是弹出该错误的原因。

```
import unittest 

class A(unittest.TestCase):

    def postMessages(self):
        print "i post messages in the server!"

class B(A):

    @classmethod
    def setUpClass(cls):
        cls.foo(cls(methodName='test_method')) # should post messages for the tests in the class to work on

    def foo(self):
        self.postMessages()

    def test_method(self):
        pass

B.setUpClass() 
```

您可以在此处看到它在[交互式 Python 控制台](https://www.pythonanywhere.com/gists/5237014/gistfile1.txt/ipython2/?affiliate_id=000003f6)中运行。它将打印出“我在服务器中发布消息！”

[在unittest 的源代码中](http://pythonhosted.org/gchecky/unittest-pysrc.html)可以清楚地看到您需要在类中传递有效方法名称的原因：

```
class TestCase: 
    """A class whose instances are single test cases.""" 

    def __init__(self, methodName='runTest'): 
        """Create an instance of the class that will use the named test 
           method when executed. Raises a ValueError if the instance does 
           not have a method with the specified name. 
        """ 
        try: 
           self._testMethodName = methodName 
           testMethod = getattr(self, methodName) 
           self._testMethodDoc = testMethod.__doc__ 
           except AttributeError: 
               raise ValueError, "no such test method in %s: %s" % \ 
                   (self.__class__, methodName) 
```

如果您想将参数传递给刚刚传入的方法，那么您需要执行类似的操作

```
class A(unittest.TestCase):

    def foo(self, arg1):
        pass

a = A(methodName='foo')
a.foo('an_argument') 
```

但这整个问题感觉真的不对。您应该重构而不是让静态方法调用实例方法。这很愚蠢。

# android - basicNameValue 对 Android

> ID：15612668
> 
> 赞同：1
> 
> 时间：2013-03-25T10:27:05.043
> 
> 标签：android, http-post

这是我想通过 httpPost 和 BasicNameValuePair 发送的参数结构。有什么办法可以做到这一点。或者如果有其他方法请告诉我。[在安卓应用中]

```
{

page    : 0

 retailer: [

0:{
    id = "72"
    type = [ 1,2 ]
      }

1:{
    id = "76"
    type = [ 2,4 ]
      }

      ]

  message_type    : null

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:53:15.283

这可能会帮助你

this 用于在 namvalues 中传递字符串数组列表

```
public List<NameValuePair> namevalueFunction(ArrayList<String> selectedImages) {
        for(int i=0;i<selectedImages.size();i++)
        {
            nvp.add(new BasicNameValuePair("UMI_NAME"+i,selectedImages.get(i)));
        }
        return nvp;
    } 
```

这用于在 namvalues 中传递字符串

```
public List<NameValuePair> getInviteEmailValuePair(String email) {
        nvp.add(new BasicNameValuePair("invitebyemail",email));

        return nvp;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:30:36.633

使用以下代码在 android 中将数据作为 NameValue 对传递

```
 public void postData() {
        // Create a new HttpClient and Post Header
   HttpClient httpclient = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

  try {
   // Add your data
      //you can add all the parameters your php needs in the BasicNameValuePair. 
       //The first parameter refers to the name in the php field for example
         // $id=$_POST['customerId']; the second parameter is the value.
          List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
     nameValuePairs.add(new BasicNameValuePair("id ", "72"));
        nameValuePairs.add(new BasicNameValuePair("type ", "1.2"));

      httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

          // Execute HTTP Post Request
             HttpResponse response = httpclient.execute(httppost);

              } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
              } catch (IOException e) {
         // TODO Auto-generated catch block
        }} 
```

# javascript - D3.js JSON 儿子有两个父亲

> ID：15612669
> 
> 赞同：0
> 
> 时间：2013-03-25T10:27:11.353
> 
> 标签：javascript, json, d3.js, force-layout

我使用此示例：[http](http://bl.ocks.org/mbostock/1062288) ://bl.ocks.org/mbostock/1062288来生成可折叠的力布局。

我的问题是：我想绘制一个儿子与两个父亲相关的图表。

```
 father  father
     |     |
      \   /     
       son 
```

在我的 JSON 文件中有一种方法可以做到这一点吗？我不能用一个父亲来颠倒我的儿子（和我的两个儿子的父亲）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:36:31.913

我应该使用这种布局：[http](http://bl.ocks.org/mbostock/4062045) ://bl.ocks.org/mbostock/4062045这样做。

# ruby-on-rails-3 - activeadmin habtm 唯一性案例的更好示例

> ID：15612672
> 
> 赞同：0
> 
> 时间：2013-03-25T10:27:26.697
> 
> 标签：ruby-on-rails-3, activeadmin

我能够按照以下方式管理 habtm，我想要一个更好的方法

我在 Rails 3 上的用户和标签之间有 habtm，aa 0.5.1 标签名称是 uniq

```
 f.input :tags, :label => 'Assign existing tag'                             
  # this above allows to select from existing tags, but cannot allow to create one

  f.has_many :tags, :label => 'Add new tags, modify existings' do |ff|
    ff.input :name
    ff.input :_destroy, :as => :boolean
  end
  # this above allows to create new one but not allow to specify existing one
  # if we specify existing one, uniqueness wont let create this one, neither existing get used
  # and throws validation error 
```

任何提示？

添加我的模型

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :tags
  scope :tagged_with, lambda {|tags| joins(:tags).where("tags.name" => tags)}
  accepts_nested_attributes_for :tags, :allow_destroy => true
end

class Tag < ActiveRecord::Base
  has_and_belongs_to_many :users
  validates :name, :uniqueness => { :case_sensitive => false }
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:38:43.140

尝试这个，

```
f.label => 'Assign existing tag'
f.select :tags, Tag.all.map{|t| [t.tag_name, t.id]}, {:prompt => "Select Tag name" } 
```

# 以上允许从现有标签中进行选择，没有创建标签的选项

对于第二件事，在模型中添加这一行，

```
validates :tags, :uniqueness => {:scope => :tag_name} 
```

# 这里 :tag_name 是你的字段名。如果在创建副本时标签名称已经存在，则会引发错误。

根据您的问题，这只是一个想法。这不是您的确切答案，因为您的规范不足以给您确切的答案。

# c++ - Eclipse CDT 显示语义错误，但构建成功

> ID：15612673
> 
> 赞同：0
> 
> 时间：2013-03-25T10:27:28.537
> 
> 标签：c++, g++, eclipse-cdt

在我将 g++ 从 4.6 更新到 4.7 之前，我的 eclipse indigo CDT 运行正常。更新后显示语义错误，但构建并运行成功。我的代码是

```
using my_type = int; 
```

Eclipse 显示警告“语法错误”

我将 g++ 4.7 更新为默认编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:50:53.093

我通过更新到 eclipse juno 来修复它。之前我用的是eclipse helois 只支持C/C++开发工具7.0

# nginx - 将 gevent 加速 pymongo 连接

> ID：15612677
> 
> 赞同：2
> 
> 时间：2013-03-25T10:27:44.600
> 
> 标签：nginx, pymongo, uwsgi, gevent

我正在使用带有`pymongo`. 我的服务器是`nginx`和`uwsgi`。

仅使用下面的代码，gevent 会让我的 pymongo 运行异步（我的意思是多线程）吗？

```
from gevent import monkey; monkey.patch_socket() 
```

我的参考：

[http://api.mongodb.org/python/current/examples/gevent.html](http://api.mongodb.org/python/current/examples/gevent.html)

* * *

更新：

我已经更新了 uwsgi.ini：

```
[uwsgi]
plugins=python
socket=/tmp/uwsgi.myapp.socketpython
path=/var/www/myapp
gevent = 100 
```

我做得对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:41:39.123

您也必须在 uWSGI 中启用 gevent 模式

[http://uwsgi-docs.readthedocs.org/en/latest/Gevent.html](http://uwsgi-docs.readthedocs.org/en/latest/Gevent.html)

然后使用 monkey.patch_all() 而不是 monkey.patch_socket() 因为 uWSGI 是一个原生 gevent 应用程序，默认情况下不使用它的猴子补丁功能。

# amazon-web-services - 在 AWS 上将 impdp/expdp 与 RDS Oracle 一起使用

> ID：15612685
> 
> 赞同：4
> 
> 时间：2013-03-25T10:28:26.937
> 
> 标签：amazon-web-services, oracle11g, sqlplus, rds, impdp

我对亚马逊网络服务非常陌生，尤其是使用他们的 RDS 系统。我已经建立了一个 Oracle 数据库 (11.2)，现在我想导入我们使用 expdp 从我们的服务器本地制作的转储。显然，在 AWS 上使用 expdp/impdp 的能力是相当新的。据我了解，在 RDS 上创建 ORACLE 数据库时，会自动创建一个 DATA_PUMP_DIR。不太明显的是如何访问此目录并使我们的本地转储可用于 RDS。我尝试在他们的网站上阅读以下信息[http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Oracle.Procedural.Importing.html 。](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Oracle.Procedural.Importing.html)但是有很多不明白的地方：

*   当转储文件实际上在我的本地计算机上时，为什么我必须设置一个 EC2 实例（并且我可以使用 sqlplus 或 sql developerper 远程访问 RDS 数据库）
*   他们经常在他们的示例中使用“sys”或“system”用户，但是在阅读 Oracle 的安全设置时，它说这些用户在 RDS 上不可用 => 您无法以 Sysdba 身份连接到数据库。

有人可以指点我一个关于如何在 AWS 上使用 impdp 的简单明了的教程吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T19:23:55.273

现在可以在 RDS 上使用 Data Pump。

杜杜克林的回答在他写的时候是正确的。但是 RDS 文档现在有关于使用 Oracle 数据泵的详细信息。[文档页面 url](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Oracle.Procedural.Importing.html)未修改最初发布在问题中的链接（干得好，亚马逊！），但它现在有关于使用 Data Pump 的新内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T10:19:28.777

目前是不可能的。我刚刚就同一问题联系了亚马逊（通过高级支持），他们只是告诉我这是一个已经传递给 RDS 团队的功能请求，但没有估计何时可用。

导入文件转储的唯一方法是使用“exp”实用程序而不是“expdp”。在这种情况下，您可以使用“imp”实用程序将数据导入 RDS

# ios - ViewController() 比 appDelegate() 先被调用？

> ID：15612689
> 
> 赞同：1
> 
> 时间：2013-03-25T10:28:50.133
> 
> 标签：ios, uiviewcontroller, delegates

在我的应用程序中，在 appDelegate 文件中，我注册了毛皮推送通知，获取令牌并获取设备 UDID。我将这些变量保存为全局变量。

我要做的下一件事是在我的 viewController 中使用这两个变量连接到一个 URL。

但是，当我从我的 viewController 调用变量时，它们是（null）。

所以我想也许我对他们做错了什么。但即使我在 appdelegate() 和 viewcontroller() 上 nslog 某些内容，它也会首先从 viewcontroller nslogs ...

这怎么可能，因为我的新功能是 appdelegate 首先运行，其次我将如何在 viewcontroller 中使用我在 appdelegate 上获得的令牌和 udid 变量？

我的代码如下所示：

在 appdelegate.h 之前`@interface`：

```
extern NSString *newDeviceToken;
extern NSString *udid; 
```

在 appdelegate.m 之前`@implementation`：

```
NSString *newDeviceToken;
NSString *udid; 
```

在我的视图控制器中，我只需导入委托：

```
#import "AppDelegate.h" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:38:45.590

The delegate method:

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken 
```

where you should get your variables, is run asynchronously. And yes, it might get called after your RootViewController has been initialized.

You shouldn't perform the URL connection on your ViewController, as you might not yet have an access token. You should perform this on the delegate method it self.

Now if you want to use a function of your ViewController and don't want to do the server communication in the AppDelegate, get a reference to your ViewController in your AppDelegate, make the URL function on your ViewController public, and call it.

As for getting a reference to your ViewController, this will be hard to answer, without knowing your App's design.

Assuming your App's RootViewController is a NavigationController and let's say the NavigationController RootViewController is named HomeNewViewController, this is how you would get a pointer reference to it from the App Delegate:

```
NavigationController *navigationController = (NavigationController*) [self.window rootViewController];

HomeNewViewController *homeController = (HomeNewViewController*)[navigationController.viewControllers objectAtIndex:0]; 
```

Then let's say in the HomeNewViewController, you have a function called uploadToken.

You could then do: `[homeController uploadToken];`

and upload it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:39:49.027

`application:didRegisterForRemoteNotificationsWithDeviceToken`调用后不会立即调用`[UIApplication registerForRemoteNotificationTypes:]`。

这意味着您可以期望在加载视图时拥有令牌。将您的 UI 与连接代码分开。您的连接必须在`application:didRegisterForRemoteNotificationsWithDeviceToken`被调用时触发，而不是在视图控制器生命周期的某个时间点。请注意，在调用之前可能还会有一个对话框要求用户批准`application:didRegisterForRemoteNotificationsWithDeviceToken`。

# mongodb - mongoDB mapReduce：reduce函数返回普通对象而不是map

> ID：15612691
> 
> 赞同：0
> 
> 时间：2013-03-25T10:28:52.703
> 
> 标签：mongodb, mapreduce

是否有可能有一个reduce函数返回一个平面对象而不是类似地图的东西？

更多细节：

```
db.getCollection('calls').mapReduce(function () {
    emit(this.reportDate + '-' + this.reportTime, {
        from: this.caller,
        to: this.called,
        callEnds: this.callEnds,
        callBegins: this.callBegins,
        location: this.location
    });
}, function (k, v) {
    var result = {};
    v.forEach(function (value) {
        result.from = value.from;
        result.to = value.to;
        result.callBegins = value.callBegins;
        result.callEnds = value.callEnds;
        if (value.location) {
            result.location = value.location;
        }
    });
    return result;
}, {
   out: 'mapReducedCalls'
}) 
```

使用这个，输出集合的文档都是

```
{ "_id" : "k",
  "value" : 
{ "from" : "b5c06aafa4be00db3d6acadb67b6ceef",
    "to" : "0afba72b041e3ccb5a62f0b0b44cceea",
    "callEnds" : "01/03/2013 10:45:44",
    "callBegins" : "01/03/2013 10:45:40",
    "location" : 44763
} 
} 
```

虽然我宁愿把它做​​成一个扁平的物体形式，比如

```
{ "_id" : "k",
  "from" : "b5c06aafa4be00db3d6acadb67b6ceef",
  "to" : "0afba72b041e3ccb5a62f0b0b44cceea",
  "callEnds" : "01/03/2013 10:45:44",
  "callBegins" : "01/03/2013 10:45:40",
  "location" : 44763
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:18:21.943

不，“值”字段当前是必需的（假设这就是您所说的类似地图的东西）。

# email - 在电子邮件地址中使用“@”符号作为显示名称

> ID：15612696
> 
> 赞同：1
> 
> 时间：2013-03-25T10:29:16.423
> 
> 标签：email, rfc

大家早上好，

从技术上讲，我知道我可以在电子邮件的显示名称中使用任何 ASCII 字符。

是否有任何理由避免在显示名称中使用“@”字符？

我正在考虑使用类似：“John Doe @ Company Name”，所以完整的电子邮件地址将是这样的：

```
"John Doe @ Company Name" <john.doe@company.com> 
```

*   对任何主要 ISP 的反垃圾邮件过滤过程是否有任何影响？
*   此电子邮件是否存在被视为网络钓鱼的风险？
*   这是一个好习惯吗？

我知道这个问题可能很奇怪，但感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:38:19.760

I would do a test and try emailing a hotmail or gmail account with that as your display name and seeing if it was delivered with no problems. I don't see why it would be a problem to be honest

# c++ - QWidget::setFixedHeight() 不工作/仍可调整大小

> ID：15612698
> 
> 赞同：0
> 
> 时间：2013-03-25T10:29:22.207
> 
> 标签：c++, qt5, qwidget, qdialog

我最近搬到了 Qt5 并遇到了一个我在 Qt4 中没有遇到的问题。

我有一个模态对话框，需要具有固定高度但可调整大小的宽度。为了演示，这里有一个精简的版本。

```
 QDialog dialog;
    QHBoxLayout hLayout;
    QLineEdit lineEdit;
    QPushButton button("Check Current Height");

    hLayout.addWidget(&lineEdit);
    hLayout.addWidget(&button);
    dialog.setLayout(&hLayout);

    dialog.setFixedHeight(dialog.sizeHint().height());

    qDebug() << dialog.height()
             << dialog.sizeHint().height()
             << dialog.minimumHeight()
             << dialog.maximumHeight();

    dialog.exec(); 
```

即使我使用 setMinimumHeight & setMaximumHeight 而不是 setFixedHeight 它仍然可以调整大小。

在上面的例子中，所有输入 qDebug 的东西都被证明是相等的。如果最小和最大高度相等，则对话框不应调整大小。但在这里，它是。

这里值得一提的是，如果没有 setFixedHeight，对话框是完全可调整大小的，但使用 setFixedHeight，对话框只能调整到某个点。

**更新：**我已经连接`button`到一个输出`dialog`'s `minimumHeight`、和 current的插槽`maximumHeight`，就像上面一样。当我调整对话框大小时，有时它的当前高度超过了它的最大高度。这怎么可能？！`sizeHint.height()``height``qDebug()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:00:45.757

我发现这个[SO post](https://stackoverflow.com/questions/696209/in-qt-how-to-make-the-qdialog-non-resizeable-and-have-a-fixed-size)在这个投票最多的答案中，我可以读到在顶级窗口上设置大小策略不起作用。也许如果您使用`setLayout()`对话框的方法并在对话框`setFixedHeight()`中的主布局上使用，那么它会起作用。

或者，您可以覆盖`resizeEvent()`您的对话框并手动禁用所有高度更改...

# c - gets() 没有被执行

> ID：15612699
> 
> 赞同：0
> 
> 时间：2013-03-25T10:29:32.740
> 
> 标签：c

在我的源代码中，有以下代码段：

```
 while ((cmd=getchar()) != EOF)
    {   
            switch(cmd)
            {   
                    case '1':
                            printf("pls input the data to be sent: \n");
                            char data[100];
                            gets(data);
                            send_data(sd_cli, data, strlen(data), &svr_addr);          
                            pcap_packet = pcap_next(pcap_handler, &pcap_header);
                            if(pcap_packet !=NULL)
                                    printf("capture one packet with length of %d\n", pcap_header.len);
                            analyze_pcap_pkt(pcap_packet, &ipid, &temp_port1, &temp_port2, &seq, &ack_seq);
                            temp_seq = seq;
                            seq = ack_seq;
                            ack_seq = temp_seq;

                            ipid++;
                            break;
                    case '2':
                            printf("old ack is %x\n", ack_seq);
                            printf("pls input the seq plus amount: \n");
                            char amount[6];
                            gets(amount);
                            ack_seq= ack_seq+atoi(amount);
                            printf("new akc is %x\n", ack_seq);
                            send_ack(sd_raw, &svr_addr, lo_ipaddr, svr_ipaddr, htons(src_port), htons(dst_port), htons(ipid), htonl(seq), htonl(ack_seq));
                            ipid++;
                            break;
                    case '4':
                            send_rst(sd_raw, &svr_addr, lo_ipaddr, svr_ipaddr, htons(ipid), htons(src_port), htons(dst_port), htonl(seq), htonl(ack_seq));
                            break;
            }   
    } 
```

当我运行程序时，输出是：

```
old ack_seq is ab2429c6
pls input the seq plus amount: 
new ack_seq is ab2429c6
sendto ack packet 
```

： 无效的论点

顺便说一句：`send_ack`,`send_rst`函数使用原始套接字发送数据包。似乎该`gets()`功能没有被执行，这有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:39:13.627

Try checking the return value..If the end-of-file is encountered while attempting to read a character, the eof indicator is set (feof). If this happens before any characters could be read, the pointer returned is a null pointer

Compatibility The most recent revision of the C standard (2011) has definitively removed this function from its specification. The function is deprecated in C++ (as of 2011 standard, which follows C99+TC3).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:41:59.057

打电话`getchar();`之前先打电话`gets`。就目前而言，您输入两个字符，命令号和换行符。所以`gets`读取一个空行，去掉换行符，然后在你的数组中存储一个空字符串。

正如其他答案中所述，`gets`由于其安全风险而被弃用，但这与您的问题无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:35:27.800

# **从来没有 从来没有 从来没有 从来*没有*使用`gets`**

首先，从 2011 版标准开始，它不再是标准库的一部分（在 1999 版中已弃用）。其次，它将**（**不是可能，**将**）在您的代码中引入故障点/主要安全漏洞。**自1980 年代**后期以来，它一直是一种受欢迎的恶意软件利用。一个库函数造成的混乱比破坏 40 年遗留代码的前景更可怕，这就是为什么 WG14 最终在两年前将其从语言定义中删除。 *这就是*它的邪恶。

改用`fgets`：

```
fgets( data, sizeof data, stdin ); 
```

`fgets`将*最多* `sizeof data - 1`（在本例中为 99 个）字符存储到目标缓冲区，如果有空间，包括尾随换行符。

您的*问题*是`getchar`循环条件中的调用不会消耗您输入后的换行符。当您输入命令时，您键入`1 <Enter>`，因此输入流包含字符`{'1', '\n'}`。留在输入流中的换行符表示下一个`gets`调用的行尾，因此`data`最终基本上是空的。公平地说，这也是一个问题`fgets`；您可能实际上想`scanf`在这种情况下使用：

```
if ( scanf( " %99[^\n]", data ) == 1 )
{
  ...
} 
```

格式字符串中的前导空格告诉`scanf`跳过任何前导空格（例如从前一个`scanf`或`getchar`调用留下的换行符）并从第一个非空格字符开始读取。`%99[^\n]`转换说明符告诉最多`scanf`读取 99 个字符，或者直到它看到换行符（或 EOF）。

同样，您可能希望使用`scanf`来读取命令代码，因此您可以忽略任何杂散的换行符：

```
while ( scanf( " %c", &cmd ) == 1 ) // again, blank before %c causes any leading 
{                                   // whitespace to be skipped
  switch( cmd )
  {
    case '1':
      char data[100];
      if ( scanf( " %99[^\n]", data ) == 1 )
      {
        send_data( ... );
        ...
      }
      else
      {
        // handle input error
      }
      break;
      ...
  }
} 
```

# c++ - STL list::splice - 迭代器有效性

> ID：15612700
> 
> 赞同：4
> 
> 时间：2013-03-25T10:29:33.880
> 
> 标签：c++, list, stl

我正在阅读“ [list::splice](http://www.cplusplus.com/reference/list/list/splice/) ”的工作原理，但我不明白：

```
 mylist1.splice (it, mylist2); // mylist1: 1 10 20 30 2 3 4
                                // mylist2 (empty)
                                // "it" still points to 2 (the 5th element)

  mylist2.splice (mylist2.begin(),mylist1, it);
                                // mylist1: 1 10 20 30 3 4
                                // mylist2: 2
                                // "it" is now invalid.
  it = mylist1.begin();
  std::advance(it,3);           // "it" points now to 30

  mylist1.splice ( mylist1.begin(), mylist1, it, mylist1.end());
                                // mylist1: 30 3 4 1 10 20 
```

在第一个和第三个拼接中，**it**迭代器仍然有效，但为什么它在第二个拼接中不存在？

根据文档：

> 迭代器有效性
> 
> 调用前与容器相关的迭代器、指针和引用没有变化。**引用传输元素的迭代器、指针和引用继续引用那些相同的元素**，但迭代器现在迭代到元素已被传输到的容器中。

因此它应该仍然有效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:52:13.687

这只是一个猜测，但他们可能已经写了这意味着它`it`现在是“无效的”，因为它不再是 的有效迭代器`mylist1`，而是成为 的有效迭代器`mylist2`。

但是，我猜你已经知道了，它是一个有效的迭代器，所以措辞具有误导性。但是，您需要小心，因为这意味着在第二次拼接操作之后，例如，您不能再执行以下操作：

```
std::distance( mylist1.begin(), it ); 
```

但需要使用

```
std::distance( mylist2.begin(), it ); 
```

因为第一个是非法的。

该标准在以下方面明确定义了它：

> ### 23.3.5.5 列表操作 [list.ops]
> 
> `void splice(const_iterator position, list& x, const_iterator i);`
> `void splice(const_iterator position, list&& x, const_iterator i);`
> 
> ⁷ *效果：*在前面插入一个`i`from 列表指向的元素，并从 中删除该元素。如果或，结果不变。指针和引用继续引用同一元素，但作为. 迭代器 to （包括它自己）继续引用同一个元素，但现在表现为迭代器 into ，而不是 into 。`x``position``x``position == i``position == ++i``*i``*this``*i``i``*this``x`

因此，如果您的编译器/STL 使迭代器无效，这显然是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:15:24.927

显然（因为我使用的是 MSVC2012）行为是不同的：

[http://msdn.microsoft.com/en-us/library/72fb8wzd.aspx](http://msdn.microsoft.com/en-us/library/72fb8wzd.aspx)

> 在所有情况下，只有指向拼接元素的迭代器或引用变得无效。

因此，当我对从一个容器移动到另一个容器的元素有迭代器时，这些迭代器变得无效。

不过，我很想知道这种行为是否是标准行为。

# windows - 组合框更改突出显示颜色 winRT（地铁应用程序）

> ID：15612702
> 
> 赞同：5
> 
> 时间：2013-03-25T10:29:55.343
> 
> 标签：windows, colors, combobox, winrt-xaml

我想更改 winRT（Windows 应用商店应用程序）中组合框的颜色。

它看起来像这样。我想用紫色代替。

![奇怪的颜色](../Images/9848ff8b78543e355a40837e29ededf8.png)

我试过了：

```
<ComboBox>
    <ComboBox.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}">Red</SolidColorBrush>
    </ComboBox.Resources>
    <ComboBoxItem>One</ComboBoxItem>
    <ComboBoxItem>Two</ComboBoxItem>
</ComboBox> 
```

这不起作用，因为 Windows 商店应用程序中不再存在 x:Static，如果我使用 StaticResource，则资源“System.HighlightBrushKey”不存在。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T22:43:24.713

似乎内置资源名称已更改，因此现在您需要覆盖这些画笔：

```
<SolidColorBrush x:Key="ComboBoxItemSelectedBackgroundThemeBrush" Color="#FF4617B4" />
<SolidColorBrush x:Key="ComboBoxItemSelectedPointerOverBackgroundThemeBrush" Color="#FF5F37BE" /> 
```

您可以在此处找到完整的`ComboBoxItem`画笔列表：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709911.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709911.aspx)

# winforms - FlowLayoutPanel 导出

> ID：15612706
> 
> 赞同：0
> 
> 时间：2013-03-25T10:30:03.193
> 
> 标签：winforms, c#-4.0, flowlayoutpanel

我想要一种将 FlowLayoutPanel 的图形内容导出到文件的方法（不要介意什么格式，bmp 可能是最简单的）。我还希望它滚动内容，以便导出的文件包含面板的全部内容。

有没有办法做到这一点？我正在使用 C# WinForms 和 Framework 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:57:48.887

尝试查看[xml 序列化](http://support.microsoft.com/kb/815813)

您可以序列化面板并保存 xml。并加载xml并将其反序列化回面板

也检查[一下](https://stackoverflow.com/questions/1669522/save-winform-or-controls-to-file)。

要保存为图像，您只需执行以下操作：

```
Bitmap image = new Bitmap(flowLayoutPanel1.Width, flowLayoutPanel1.Height);
flowLayoutPanel1.DrawToBitmap(image, new Rectangle(0, 0, flowLayoutPanel1.Width, flowLayoutPanel1.Height));
image.Save("SAVE PATH"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T07:56:23.740

诀窍是临时将 flowLayoutPanel 设置为适合其中的所有控件，即使它对于可见屏幕来说太大了，然后使用 flowLayoutPanel.clientRectangle 区域而不是 .Width 和 .Height 执行 DrawToBitmap。

在我的示例中，Outside_Splitter 停靠在表单上，​​有两个面板，fraAction 是一个组框，是面板上的最后一个控件，可以垂直滚动。

```
Public Sub Print_Panel()

    Dim newHeight As Integer
    Dim pos As Point, oheight As Integer, owidth As Integer, xDock As DockStyle
    With Outside_Splitter ' This contains the two panel ...
        pos.X = .Left ' Store original position and size
        pos.Y = .Top
        oheight = .Height
        owidth = .Width
        xDock = .Dock ' get original dock set
        newHeight = FraAction.Top + FraAction.Height + 30 ' calculate new height based on position and size of the last control
        .Dock = DockStyle.None ' undock it
        .Height = newHeight ' set new height 
        .Refresh()
        .SetBounds(pos.X, pos.Y, owidth, newHeight) ' Set position and size, temporarily
        .Refresh()
    End With

    'Create Bitmap based on panel.ClientRectangle   
    Dim myBmp As New Bitmap(Painel_Detalhe_NC.ClientRectangle.Width, Painel_Detalhe_NC.ClientRectangle.Height) 

    'Paint the bitmap
    Painel_Detalhe_NC.DrawToBitmap(myBmp, Painel_Detalhe_NC.ClientRectangle) 

    'Create pdf
    Dim _pdf As New C1.C1Pdf.C1PdfDocument

    _pdf.Clear()
    _pdf.Landscape = False
    _pdf.PaperKind = PaperKind.A4

    Dim rec As New RectangleF ' Set 5% margin around the page 
    rec = _pdf.PageRectangle
    rec.X = 0.05 * rec.Width
    rec.Y = 0.05 * rec.Height
    rec.Width = 0.9 * _pdf.PageRectangle.Width
    rec.Height = 0.9 * _pdf.PageRectangle.Height

    _pdf.DrawImage(myBmp, rec) ' paint/resize bitmap to that size on the pdf

    'Save it and show it 
    _pdf.Save(My.Computer.FileSystem.SpecialDirectories.Temp & "\temp.pdf")
    Process.Start(My.Computer.FileSystem.SpecialDirectories.Temp & "\temp.pdf")

    myBmp.Dispose() ' Clear it

    With Outside_Splitter ' put it back to where it was
        .Left = pos.X
        .Top = pos.Y
        .Dock = xDock ' Back to filling the form
        .Refresh()

    End With
    End  Sub 
```

# python - py2app 到 zlib 的无效链接

> ID：15612708
> 
> 赞同：2
> 
> 时间：2013-03-25T10:30:08.200
> 
> 标签：python, python-2.7, macports, py2app

我正在尝试使用 py2app 0.7.3 将 python 程序打包到应用程序中。我有一台（Mountain Lion）Mac，我在其上安装了 python.org 版本的 Python 2.7.3 和所有必需的模块，方法是使用它们可用的可分发文件。但是，我还需要一个 32 位版本的应用程序，所以在另一台（Mountain Lion）机器上，我使用 macports（i386 用于 build_arch）设置了相同的环境（即 python + 模块）。

从源代码来看，我的程序在两台机器上都运行良好。但是，只有在 64 位机器上生成的应用程序才能工作。尝试运行在 macports 机器上生成的 32 位应用程序时，出现错误：

```
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/py2app/apptemplate/lib/site.py", line 20, in <module>
    import os
zipimport.ZipImportError: can't decompress data; zlib not available 
```

对于这两个应用程序，使用了相同的 setup.py 文件。

似乎在 macports 机器上生成的应用程序仍然尝试使用外部 Python 而不是与其打包的那个（尽管它不应该是半独立的，因为没有使用系统的 Python）。zlib 存在于 .app 文件中（当然也存在于外部）。

我发现的有关此问题的大多数其他帖子，建议更改可在包内找到的 __boot__.py 文件中的 sys.path 变量，但似乎我的应用程序甚至没有到达该模块并事先崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:13:01.637

我找到了一个可能不那么优雅但有效的解决方案：

在 py2app/__init__.py 中，我将变量 'Compression' 设置为*False*。这可以防止将站点包文件夹压缩为 zip 文件。这部分解决了问题，因为之后仍然有一些无效的 mach-o 错误消息，但是通过调用 py2app 之类的

```
python setup-mac.py py2app --arch i386 
```

生成的应用程序运行良好

# mysql - 日期/时间输入参数

> ID：15612711
> 
> 赞同：2
> 
> 时间：2013-03-25T10:30:17.950
> 
> 标签：mysql, jasper-reports

我在报告中使用了两个**日期时间**参数。当我在查询中使用相同的参数时，不会显示任何结果。此外，如果我使用**日期**参数，则会显示结果，但不会显示所有记录。

我也在*MySQL*中执行了相同的查询（带有日期时间）并显示了结果，我认为查询没有错误。

我尝试了很多东西。查询类似于：

```
SELECT * FROM abc WHERE datetime BETWEEN 
  date_format($P{fromdate}, '%d-%c-%y 00:00:00') 
  AND date_format($P{todate}, '%d-%c-%y 23:59:59') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:04:08.713

尝试不使用 data_format 函数来检查查询或参数是否出错。

```
 SELECT * 
 FROM abc WHERE datetime BETWEEN 
        $P{fromdate} AND $P{todate} 
```

# ruby - 如何使用 javascript 作为 json 或 ruby 对象读取文本

> ID：15612712
> 
> 赞同：0
> 
> 时间：2013-03-25T10:30:19.187
> 
> 标签：ruby, json, parsing

我有这样的javascript代码文本：

```
var data = {"name": "lorem ipsum", "brand": "ipsum", "attr": { "sizes": [{"name": "big", "value": "1"}, {"name": "small", "value": "2"}], "height":[{"name": "large", "value": "1"}], "url": "http://...", "desc": "lorem ipsum"} 
```

我怎样才能将它读取为 json 或一些 ruby​​ 对象？我需要将这些数据导入数据库。此文本是 API 的返回，我使用 Ruby(RoR) 代码获得。

# java - 从服务器到客户端的连接，文件传输

> ID：15612713
> 
> 赞同：0
> 
> 时间：2013-03-25T10:30:23.963
> 
> 标签：java, web

通过使用实例`PrintStream`和`println`函数，我可以将原始字符串发送给客户端。但是，我想将整个`.html`文件发送给客户端以便查看网页。出于这个原因，我的方法应该是什么？我试图读取一个文件并给出 println 函数上读取的任何内容。但是，尝试失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:02:01.133

可能这样的事情会有所帮助：

```
// sendfile
File myFile = new File ("source.html");
byte [] mybytearray  = new byte [(int)myFile.length()];
FileInputStream fis = new FileInputStream(myFile);
BufferedInputStream bis = new BufferedInputStream(fis);
bis.read(mybytearray,0,mybytearray.length);
OutputStream os = sock.getOutputStream();
System.out.println("Sending...");
os.write(mybytearray,0,mybytearray.length);
os.flush();
sock.close(); 
```

# php - 计算多维数组中的某些值

> ID：15612719
> 
> 赞同：2
> 
> 时间：2013-03-25T10:30:45.070
> 
> 标签：php, multidimensional-array

假设我有一个像这样的多维数组：

```
array(
array("Thing1","OtherThing1"),
array("Thing1","OtherThing2"),
array("Thing2","OtherThing3")
); 
```

我如何能够计算多维数组中存在多少次“Thing1”值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:35:14.363

您可以使用此[http://www.php.net/manual/en/function.array-search.php](http://www.php.net/manual/en/function.array-search.php)`array_search`获取更多信息

此代码是 php 文档示例中的示例

```
<?php 
function recursiveArraySearchAll($haystack, $needle, $index = null) 
{ 
 $aIt     = new RecursiveArrayIterator($haystack); 
 $it    = new RecursiveIteratorIterator($aIt); 
 $resultkeys; 

 while($it->valid()) {        
 if (((isset($index) AND ($it->key() == $index)) OR (!isset($index))) AND (strpos($it->current(), $needle)!==false)) { //$it->current() == $needle 
 $resultkeys[]=$aIt->key(); //return $aIt->key(); 
 } 

 $it->next(); 
 } 
 return $resultkeys;  // return all finding in an array 

} ; 
?> 
```

如果在 haystack 中多次找到 needle，则返回第一个匹配的键。要返回所有匹配值的键，请改用`array_keys()`可选的 search_value 参数。

[http://www.php.net/manual/en/function.array-keys.php](http://www.php.net/manual/en/function.array-keys.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:53:26.757

```
function showCount($arr, $needle, $count=0)
{
    // Check if $arr is array. Thx to Waygood
    if(!is_array($arr)) return false;

    foreach($arr as $k=>$v)
    {
        // if item is array do recursion
        if(is_array($v))
        {
            $count = showCount($v, $needle, $count);
        }
        elseif($v == $needle){
            $count++;
        }
    }
    return $count;  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T10:36:24.693

尝试这个 ：

```
$arr =array(
array("Thing1","OtherThing1"),
array("Thing1","OtherThing2"),
array("Thing2","OtherThing3")
);

echo "<pre>";
$res  = array_count_values(call_user_func_array('array_merge', $arr));

echo $res['Thing1']; 
```

输出 ：

```
Array
(
    [Thing1] => 2
    [OtherThing1] => 1
    [OtherThing2] => 1
    [Thing2] => 1
    [OtherThing3] => 1
) 
```

它给出了每个值的出现。即：`Thing1`发生`2`次数。

**编辑**：根据 OP 的评论：“你的意思是结果数组是哪个数组？” - 输入数组。因此，例如这将是输入数组： array(array(1,1),array(2,1),array(3,2)) ，我只希望它计算第一个值 (1,2,3)不是第二个值 (1,1,2) – gdscei 7 分钟前

```
$arr =array(
array("Thing1","OtherThing1"),
array("Thing1","OtherThing2"),
array("Thing2","OtherThing3")
);

$res  = array_count_values(array_map(function($a){return $a[0];}, $arr));

echo $res['Thing1']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T11:01:25.053

尝试这个

```
$arr =array(
array("Thing1","OtherThing1"),
 array("Thing1","OtherThing2"),
 array("Thing2","OtherThing3")
 );
   $abc=array_count_values(call_user_func_array('array_merge', $arr));
  echo $abc[Thing1]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T10:34:25.750

使用`in_array`可以帮助：

```
$cont = 0;

//for each array inside the multidimensional one
foreach($multidimensional as $m){
    if(in_array('Thing1', $m)){
        $cont++;
    }
}

echo $cont; 
```

欲了解更多信息： http: [//php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T10:32:49.670

```
$count = 0;

foreach($array as $key => $value)
{
if(in_array("Thing1", $value)) $count++;
} 
```

# r - 返回概率密度混合的函数

> ID：15612721
> 
> 赞同：1
> 
> 时间：2013-03-25T10:30:46.690
> 
> 标签：r, functional-programming

在 R 中，我想创建一个执行以下操作的函数：

```
given vectors of means, variances and weights
create a function which is a mixture of normal distributions
return this function 
```

正常密度的混合是总和

```
f(x) = c_1 * N(mu_1,var_1) + ... + c_n * N(mu_n,var_n). 
```

在 R 中执行此操作的简单方法是什么？

**编辑** 我想出了一个非常简单，也许是天真的方法：

```
gmix <- function(means,vars,weights){
  n <- length(means)

  f<- function(t) { 
    res <- 0;

    for(i in 1:n) {
      res <- res + weights[i]*dnorm(t,mean=means[i],sd=sqrt(vars[i]))
    }
     return(res)
    }
    return(f)
} 
```

我不是程序员，所以这可能不是一个聪明的方法......如果有人知道更好的实现，我会很高兴听到它。

# iphone - 直接访问 iVariable 是目标 C 中的好方法吗？

> ID：15612722
> 
> 赞同：0
> 
> 时间：2013-03-25T10:30:48.023
> 
> 标签：iphone, ios, ios5

1) 直接访问 iVar 是一种好方法吗？

2）以下哪种方法最好？

```
@interface Some
@property (nonatomic, strong) NSString *loginDataManager;
@end

@implementation Some
@synthesize loginDataManager = _loginDataManager;
@end

@interface Some {
    NSString *loginDataManager;
}
@property (nonatomic, strong) NSString *loginDataManager;
@end

@implementation Some
@synthesize loginDataManager;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:45:17.363

在第一种情况下，编译器已经添加了默认值`@synthesize var=_var;`，因此您可以省略它。这是一个[Clang 扩展](http://clang.llvm.org/docs/LanguageExtensions.html)

> Clang 提供对声明属性的自动合成的支持。使用此功能，clang 提供了那些未声明 @dynamic 并且没有用户提供支持 getter 和 setter 方法的属性的默认合成。

在第二种情况下，您使用的是 ivar 和同名的属性。这通常会输出编译器警告：

> 警告：自动合成的属性“loginDataManager”将使用合成的实例变量“_loginDataManager”，而不是现有的实例变量“loginDataManager”。

但是，您添加了`@synthesize loginDataManager`以避免警告。

回答你的问题，

*   除了不能在@property 语句中指定属性（强、弱、...）之外，是否使用@property 没有区别。
*   直接访问 ivar 可以避免通过 getter/setter。如果您正在编写构造函数并希望在对象初始化期间避免副作用，这是一件好事。而且在它们之外通常是一件坏事，因为程序可能依赖访问器来执行 KVO/KVC 或其他操作。但是，如果您自己编写代码并且您知道访问器做什么，那么这是一个选择。

**更新**

如果您使用 ARC（您应该），对象默认在其使用范围内保持强。意思是，ARC 自动处理保留/释放，编写以下任何内容都没有区别：

```
@property(strong) NSObject *o; 
__strong NSObject *o;
NSObject *o; 
```

`self.o`此外，使用、 或`_o`、 或访问也没有区别`o`。完全一样。

但是，如果您正在使用其他人的代码，并且该人在访问器方法中编写了其他内容，则您必须编写`self.o`该代码才能运行。所以一般来说，在构造函数之外访问变量时，self.ivar 是首选：

```
-(NSObject*) o {
    /* ... some other code that needs to run when you access o */
    return o;
} 
```

如果您不使用 ARC，那么您需要编写 self.ivar 以便访问器正确地保留和释放对象。最新 Xcode 创建的现代项目默认使用 ARC。

# android - Android 上的 Facebook 3.0：显示登录对话框两次

> ID：15612723
> 
> 赞同：0
> 
> 时间：2013-03-25T10:30:54.473
> 
> 标签：android, facebook, permissions, dialog

我有一个与 facebook 集成的 android 应用程序。

我调用 openActiveSession 来打开一个会话。会话打开后，我使用 NewRequestPermission 对象请求发布流。

```
Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(activity, Arrays.asList("publish_stream")); 
                    session.requestNewPublishPermissions(newPermissionsRequest);
                    newPermissionsRequest.setCallback(fbPublishRequestStateCallback); 
```

我注意到 openActiveSession 将打开一个登录对话框，但是当它点击代码的 NewPermissionsRequest 部分时，它再次打开了一个登录对话框。

有谁知道为什么在第一次登录对话框后再次显示登录对话框？

# android - Android 是否支持蓝牙 DUN 配置文件？

> ID：15612728
> 
> 赞同：0
> 
> 时间：2013-03-25T10:31:07.910
> 
> 标签：android, bluetooth, connection

Android 是否支持蓝牙 DUN 配置文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:02:39.090

DUN 不是现有 Android 的一部分。但它通过 3rd 方应用程序在 Android 上得到支持，例如[BlueDUN](https://play.google.com/store/apps/details?id=com.blue_dun&hl=en)

# html - 如何在图片上创建菜单？CSS 样式

> ID：15612730
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:31:09.133
> 
> 标签：html, css

![在此处输入图像描述](../Images/7a9790b4e97e594bba9441cf6f55d47c.png)

如何在图片上创建菜单？

现在我有：

```
<div id="nav">
   <nav class="top-nav">
      <div class="shell">
         <a href="#" class="nav-btn">HOMEPAGE<span></span></a>
         <span class="top-nav-shadow"></span>
         <ul>
            <li class="active"><span><a href="#">home</a></span></li>
            <li><span><a href="#">services</a></span></li>
            <li><span><a href="#">projects</a></span></li>
            <li><span><a href="#">solutions</a></span></li>
            <li><span><a href="#">jobs</a></span></li>
            <li><span><a href="#">blog</a></span></li>
            <li><span><a href="#">contacts</a></span></li>
         </ul>
      </div>
   </nav>
</div> 
```

还有我用于 div nav 的 CSS：

```
 #nav{
         background-color: transparent;
         padding: 0em 0em 0em 2em;
         white-space: nowrap;
         list-style: none outside none;
         margin: 0px;
         height: auto;
         line-height: normal;
     } 
```

如何设计这个样式？我是新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:47:19.573

从你的照片中，我认为你正在寻找一种`Tabs`不制作菜单的方法..

我认为你可以使用的最好的东西是[jQuery Tabs](http://jqueryui.com/tabs/)

从该链接中，您可以检查如何使用简单的 html 和 jQueryUI css 来制作它。

如果您只想使用 css 和 html，请检查此

[如何使用 CSS 和 HTML 制作简单的选项卡式菜单](http://mihaifrentiu.com/how-to-make-a-simple-tabbed-menu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:02:45.013

我创建了一个示例。请看一看。

**[工作小提琴](http://jsfiddle.net/3g9BN/4/)**

*   主要概念是将`li`标签定位在`ul`.
*   给标签`bottom: -1px`以`li`让它们出现在`ul`.
*   如果你给`li`边界底部，那么它看起来像`ul`.

我希望你可以通过引用这个来创建自己的样式（但不要复制代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:01:29.847

你需要几个js来做到这一点。

这是一个不需要任何框架的示例，并且适合您的需求（使用 jQuery）：

```
$('#tab-nav > li').click(function(e) {
    // get new active pane id
    var idPane = $(this).find('a:first').attr('href').substring(1);
    // change active nav
    $('#tab-nav > li').removeClass('active');
    $(this).addClass('active');
    // change active pane
    $('.tab-pane').removeClass('active');
    $('#'+idPane).addClass('active');
});
```

```
.clear { display: block; clear: both; height: 0px; }

#container {
    position: relative;
    color: #497188;
}
#tab-nav {
    position: relative;
    z-index: 20;
}
#tab-nav > li { 
    display: block;
    border: 1px solid #497188;
    border-bottom: 1px solid #497188;
    padding: 1px 3px;
    margin: 0 2px -1px;
    float: left;
}
#tab-nav > li a {
    color: #497188;
    text-decoration: none;
}
#tab-nav > li.active,
#tab-content {
    background: #DEE7EC;
    border-bottom: 1px solid #DEE7EC;
}
#tab-content {
    position: relative;
    clear: both;
    border: 1px solid #497188;
    z-index: 10;
}
.tab-pane {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    padding: 3px;
}
.tab-pane.active {
    display: block;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<div id="container">
    <ul id="tab-nav">
        <li class="active"><span><a href="#home">home</a></span></li>
        <li><span><a href="#services">services</a></span></li>
        <li><span><a href="#projects">projects</a></span></li>
        <li><span><a href="#solutions">solutions</a></span></li>
        <li><span><a href="#jobs">jobs</a></span></li>
        <li><span><a href="#blog">blog</a></span></li>
        <li><span><a href="#contacts">contacts</a></span></li>
    </ul>
    <div id="tab-content">
        <div id="home" class="tab-pane active">home</div>
        <div id="services" class="tab-pane">services</div>
        <div id="projects" class="tab-pane">projects</div>
        <div id="solutions" class="tab-pane">solutions</div>
        <div id="jobs" class="tab-pane">jobs</div>
        <div id="blog" class="tab-pane">blog</div>
        <div id="contacts" class="tab-pane">contacts</div>
        <p class="clear">&nbsp;</p>
    </div>
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:16:23.397

这是一个显示您想要的样式的**[jsFiddle 。](http://jsfiddle.net/efKw5/)**

*   `LI`标签向左浮动，并设置`overflow: hidden;`在父`UL`标签上以[包含浮动](http://colinaarts.com/articles/float-containment/)。

*   整个标签在其下方元素的顶部`UL`向下移动。`position: relative; margin-bottom: -1px;`标签下的 1 像素边框`A`给人一种错觉，即标签是下面元素的一部分。`border-bottom-color`活动选项卡上的 设置为与内容区域的背景颜色相匹配。

*   标签被`A`设置为`display: block;`可以给它们一个`min-width`,`text-align: center;`和 vertical`padding`

*   我还在标签`border-radius`上放了一个小`A`标签：-p 如果您不想要，可以将其删除。

我假设该类`.active`将被您服务器上运行的代码更改。如果没有，上面几个答案中列出的 JS 会在单击选项卡时更改类。一些答案只会更改选项卡上的类（这并不是您真正想要的......），因此请查看库（但是，由于大多数 JS 选项卡库需要特定的 HTML 结构，因此需要相应地修改 CSS ）。如果您需要更多详细信息，请在下面发表评论。

# android - WebView 在播放视频并触摸它时执行 Crash

> ID：15612731
> 
> 赞同：0
> 
> 时间：2013-03-25T10:31:09.600
> 
> 标签：android, webview, video-streaming, vimeo

我正在开发一个应用程序，我需要在 webview android 中播放视频。

视频播放完美，直到我触摸 webview。当我触摸它时，应用程序冻结了一段时间，之后每次我玩我的应用程序时只有白屏。我不知道它为什么会导致。这是我的申请代码以供审核，请让我知道我在代码上做错了什么

我用这个代码

我的活动

```
 public class VideoViewActivity extends Activity {
FrameLayout frame;
WebView mVideoView;
String viewSource;

@Override
public void onCreate(Bundle savedInstanceState) {

    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    super.onCreate(savedInstanceState);

    setContentView(R.layout.video);

    frame = (FrameLayout) findViewById(R.id.videoview);
    mVideoView = new WebView(getBaseContext());

    boolean flashInstalled = false;
    try {
        PackageManager pm = getPackageManager();
        ApplicationInfo ai = pm.getApplicationInfo("com.adobe.flashplayer",
                0);
        if (ai != null)
            flashInstalled = true;

    } catch (NameNotFoundException e) {
        flashInstalled = false;

        Toast.makeText(getBaseContext(), "Flash Player Not Installed!!",
                Toast.LENGTH_SHORT).show();
    }

    mVideoView.setWebViewClient(new WebViewClient());
    mVideoView.setWebChromeClient(new WebChromeClient());
    mVideoView.getSettings().setJavaScriptEnabled(true);
    mVideoView.getSettings().setAppCacheEnabled(true);
    mVideoView.getSettings().setDomStorageEnabled(true);
    mVideoView.getTouchables();
    // how plugin is enabled change in API 8
    if (Build.VERSION.SDK_INT < 8) {
        mVideoView.getSettings().setPluginsEnabled(true);
    } else {
        mVideoView.getSettings().setPluginState(PluginState.ON);
    }
    mVideoView
            .loadUrl("http://player.vimeo.com/video/24577973?player_id=player&autoplay=1&title=0&byline=0&portrait=0&api=1&maxheight=480&maxwidth=800");

    frame.addView(mVideoView);

}
} 
```

我的 xml 布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
>

<FrameLayout 
                android:layout_width="fill_parent"
android:layout_alignParentRight="true"
android:layout_alignParentLeft="true" 
android:layout_alignParentTop="true" 
android:layout_alignParentBottom="true" 
android:layout_height="fill_parent"
android:layout_gravity="center"
                android:id="@+id/videoview"
                />

</LinearLayout> 
```

和清单文件

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.com"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" android:hardwareAccelerated="true"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".VideoViewActivity"
        android:label="Demo"              
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.Black.NoTitleBar"
        >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:25:25.650

这条线上的问题

```
mVideoView = new WebView(getBaseContext()); 
```

在 onDestroy 方法中，我必须将 mVideoView 对象设为空。

# c# - 又一个多行组正则表达式查询

> ID：15612732
> 
> 赞同：0
> 
> 时间：2013-03-25T10:31:14.253
> 
> 标签：c#, .net, regex

所以我正在尝试编写一个正则表达式来过滤特定片段的文本文件（寻找速度而不是蛮力）。

我想从每场比赛中得到三件事：

*   识别片段的**关键**
*   用于格式化每个片段的可选**语言**
*   表示开始和结束标记之间的所有行的**值**

这是正则表达式（可以在此处找到失败的测试工具 - [https://gist.github.com/shiftkey/5236161](https://gist.github.com/shiftkey/5236161)）：

`(?s)code start (?<key>[A-Za-z-]*) (?<language>[A-Za-z]*).*[\n](?<value>.*?)[\n].*end code (?<key>[A-Za-z-]*)`

使用这些选项：`RegexOptions.Compiled | RegexOptions.ExplicitCapture | RegexOptions.Multiline`.

所以像这样的文件：

```
// code start foo csharp
var x = 1;
// end code foo 
```

给我预期的值：

*   **关键**：富
*   **语言**：csharp
*   **价值**：`var x = 1;`

但是当我介绍一个带有第二行的片段时，我只得到最后一行：

```
// code start foo csharp
var x = 1;
var y = 2;
// end code foo 
```

*   **关键**：富
*   **语言**：csharp
*   **价值**：`var y = 2;`

代替

*   **值**：（`var x = 1;\r\nvar y = 2;`或类似）

让组覆盖多条线路我错过了什么？

我已经查看了在 SO 上提出的类似场景，但它们对我的使用不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:41:06.157

`.*`这可以通过改变两个s的贪婪来解决：

```
(?s)code start (?<key>[A-Za-z-]*) (?<language>[A-Za-z]*).*?[\n](?<value>.*)[\n].*?end code (?<key>[A-Za-z-]*) 
```

阅读后的`.*`语言必须不那么贪婪，因为我们需要第一个换行符之后的内容作为片段值。但是，`.*`for 解析`value`可能更贪婪，因为它不应该在遇到第一个时停止`\n`，因此上述模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:12:56.290

如果你愿意，你也可以用一些环顾四周的东西来捕捉......

```
(?<=code\sstart\s)(?<key>\b\w+\b)\s(?<language>\b\w+\b).*\r\n(?<content>(?s).*)(?=\r\n.*end\scode\s\1\s-->) 
```

# javascript - 使用jquery ui创建选项卡时加载页面延迟

> ID：15612733
> 
> 赞同：0
> 
> 时间：2013-03-25T10:31:16.963
> 
> 标签：javascript, ajax, jquery-ui, tabs, jquery-tabs

在我的页面中，我有一些选项卡...但是根据要求，这些选项卡显示在靠近中间的某个位置...因此，选项卡上方的部分加载速度很快，加载该部分需要一些时间其中包含选项卡...

加载主页时，选项卡内的所有页面也都加载了...所以需要一些时间...我该如何避免这种情况？...

我的代码：

```
<div class="ui-tabs" id="tabs" style="width: 97%;display:none;">
                    <ul class="ui-tabs-nav">
                        <li id="planDetails-tab"><a id="hrefPlanDetailsid" accesskey="p" href="#divPlanDetailsTab" class="planTabHeader">&nbsp;Plan Details</a></li>
                        <li id="testPlan-tab"><a id="hrefTestPlanid" accesskey="t" href="#divTestPlanTab" class="planTabHeader">&nbsp;&nbsp;Test Plan&nbsp;&nbsp;&nbsp;</a></li>                        
                        <li id="serviceArea-tab"><a href="#divServiceAreaTab" accesskey="s" class="planTabHeader">Service Area</a></li>
                        <li id="rates-tab"><a href="#divRatesTab" accesskey="r" class="planTabHeader">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rates&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                        <li id="benefits-tab"><a href="#divBenefitsTab" accesskey="b" class="planTabHeader">&nbsp;&nbsp;&nbsp;&nbsp;Benefits&nbsp;&nbsp;&nbsp;</a></li>
                        <li id="network-tab"><a href="#divNetworkEcpTab" accesskey="n" class="planTabHeader">Network ECP</a></li>
                        <li id="historical-tab"><a href="#divHistoricalTab" accesskey="h" class="planTabHeader">&nbsp;&nbsp;Historical&nbsp;&nbsp;&nbsp;</a></li>
                        <li id="directory-tab"><a href="#divDirectoryTab" accesskey="d" class="planTabHeader">&nbsp;&nbsp;&nbsp;Directory&nbsp;&nbsp;</a></li>
                    </ul>

                    <div id="divPlanDetailsTab" style="width: 100%;">
                        <fieldset>
                            <s:include value="PlanDetail.jsp" />
                        </fieldset>
                    </div>
                    <div id="divTestPlanTab" style="width: 100%;">
                        <fieldset>
                            <s:include value="TestPlan.jsp" />
                        </fieldset>
                    </div>                  
                    <div id="divServiceAreaTab"
                        class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"  style="width: 100%;">
                        <fieldset>
                        <s:include value="PlanServiceArea.jsp" />
                        </fieldset>
                    </div>                  

                    <div id="divRatesTab"
                    class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"  style="width: 100%;">
                        <fieldset>
                        <s:include value="Rates.jsp" />
                        </fieldset>
                    </div>

                    <div id="divBenefitsTab" class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"  style="width: 100%;">
                        <fieldset>
                        <s:include value="PlanBenefits.jsp" />
                        </fieldset>
                    </div>

                    <div id="divNetworkEcpTab"
                    class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"  style="width: 100%;">
                        <fieldset>
                        <s:include value="NetworkECP.jsp" />
                        </fieldset>
                    </div>

                    <div id="divHistoricalTab" class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"  style="width: 100%;">
                    <fieldset>
                        <s:include value="PlanHistorical.jsp" />
                        </fieldset>
                    </div>
                    <div id="divDirectoryTab"
                    class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"  style="width: 100%;">
                        <fieldset>
                            <s:include value="ProviderDirectory.jsp" />
                        </fieldset>
                    </div>
            </div> 
```

.js 文件：

```
$(function() {
            $tabs = $("#tabs").tabs();
            $tabs.css('display','block');

            //Initially hide Test Plan tab
            $('ul li#testPlan-tab').hide();
            $('#hrefTestPlanid').hide();
            $tabs.tabs({
                active : function(event, ui) {
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:46:11.183

只需使用 AJAX 方法使用内容加载：http: [//jqueryui.com/tabs/#ajax](http://jqueryui.com/tabs/#ajax)

这样，您就不会加载大量可能永远不会显示的文本或元素

创建一个目录“ajax”，将选项卡的代码移动到特定文件中并定义如下选项卡：

```
<ul class="ui-tabs-nav">
    <li id="planDetails-tab"><a href="ajax/divPlanDetailsTab.php" id="hrefPlanDetailsid" accesskey="p" class="planTabHeader">&nbsp;Plan Details</a>
    </li>
    <li id="testPlan-tab"><a href="ajax/divTestPlanTab.php" id="hrefTestPlanid" accesskey="t" class="planTabHeader">&nbsp;&nbsp;Test Plan&nbsp;&nbsp;&nbsp;</a>
    </li>
    ...
</ul>

  <script>
  $(function() {
    $( "#tabs" ).tabs({
      beforeLoad: function( event, ui ) {

          ui.panel.html("Loading in progress...");

          ui.jqXHR.error(function() {
          ui.panel.html(
            "Couldn't load this tab. We'll try to fix this as soon as possible. " +
            "If this wouldn't be a demo." );
        });
      }
    });
  });
  </script> 
```

# javascript - jQuery 将 url 加载到 div 并替换当前内容传递 url 到函数

> ID：15612734
> 
> 赞同：3
> 
> 时间：2013-03-25T10:31:17.487
> 
> 标签：javascript, jquery, ajax

我正在尝试调用一个`loadPage`在单击`a`标签时调用的函数并将其传递给 URL 以替换通过 Ajax`div`调用的当前内容。`main`

但是，据我所知，我的代码并没有替换主 div 中已经存在的内容，甚至没有进行 Ajax 调用，而且我看不出哪里出了问题。

JavaScript：

```
$(document).ready(function () {
    function loadPage(urlToLoad) {
        $.ajax({
            type: "POST",
            alert(urlToLoad);
            url: urlToLoad,
            data: dataString,
            success: function (returnedData) {
                $('#main').html(returnedData);
            }
        });
    }
}); 
```

HTML：

```
<nav>
    <ul>
        <li><a onclick="loadPage('load.php');" href="javascript:void(0)" class="nav"><img src="news.png" alt="Latest news" width="81" height="61" class="navImage" />Latest news</a>
        </li>
    </ul>
</nav>
<div id="main">
    <section id="mainContent">abc</section>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:41:54.817

你可以简单地使用[`load`](http://api.jquery.com/load/)：

```
function loadPage(urlToLoad) {
    $('#main').load(urlToLoad, function () {
        alert('Load was performed.');
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:33:22.463

为什么你在 ajax 选项中有警报..这是抛出错误..删除它应该可以工作..

```
//$(document).ready(function() { <--here
    function loadPage(urlToLoad) {
     alert(urlToLoad); // you can check that here...
      $.ajax({
            type: "POST",
           // alert(urlToLoad); <--here
            url: urlToLoad,
            data: dataString,
            success: function( returnedData ) {
             alert("success") //to check if ajax call is successfull
            $('#main').html( returnedData );
          }
        }); 
```

并且无需在 document.ready() 中创建函数...将其保留在 ready 函数之外

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:38:09.450

You could do it in another way, by adding a custom "data-" attribute to your anchor tags, and using jquery to handle the click event.

```
$(document).ready(function()
{
   $('a.nav').on("click", function(event){
      event.preventDefault();
      $.ajax({
            type: "POST",
            url: $(this).attr('data-page'),
            data: dataString,
            success: function( returnedData ) {
            $('#main').html( returnedData );
          }
      });
   });
});

<nav>
    <ul>         
        <li><a data-page="load.php" class="nav"><img src="news.png" alt="Latest news" width="81" height="61" class="navImage" />Latest news</a></li>
    </ul>
</nav>

 <div id="main">
    <section id="mainContent">
        abc
    </section>
 </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:33:50.437

您的函数`loadPage`的作用域是用于 jQuery 的闭包`document.ready`。稍后调用该函数时`loadPage`，该调用来自全局范围。因此，该功能将无法访问。把你的函数从 $(document).ready(function(){});

另请注意，在尝试使用调试时`alert`（不是真的推荐，至少您应该使用`console.log`），您需要将警报放在它自己的代码行上，而不仅仅是像断点那样放在代码中间。您的警报应该出现在 ajax 调用之前。

```
function loadPage(urlToLoad) {
 alert(urlToLoad);
 $.ajax({/*...*/});
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:42:54.557

从`doc ready`处理程序中移出函数：

```
function loadPage(urlToLoad) {
    $.ajax({
        type: "POST",
        url: urlToLoad,
        data: dataString,
        success: function (returnedData) {
            $('#main').html(returnedData);
        }
    });
}

$(document).ready(function () {
   $('nav a.nav').click(function(e){
      e.preventDefault();
      loadPage(this.href);
   });
}); 
```

试试这个html：

```
 <nav>
   <ul>
     <li>
       <a href="load.php" class="nav">
          <img src="news.png" alt="Latest news" width="81" height="61" class="navImage" />Latest news
       </a>
     </li>
   </ul>
 </nav> 
```

您不应该在 ajax 函数属性中发出警报，因此请从那里删除警报。似乎您希望它在单击某个链接时起作用。所以你可以试试这个。

# java - 如何在java中读取和提取图像像素并进行比较

> ID：15612735
> 
> 赞同：1
> 
> 时间：2013-03-25T10:31:20.500
> 
> 标签：java, image-processing, image-segmentation

我想读取 RGB 图像并想提取图像像素。然后我想比较每个像素以检查图像其他部分中的任何匹配像素。如果该像素与原始像素匹配，则匹配的像素应在 java 中用红色和黄色替换。

我从 javaforums 和图像处理网站上搜索了很多。我仍然没有完美的解决方案。

给出一些像素提取器和像素匹配器示例以进一步进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:44:44.050

以下**getRGBA**方法将在图像 img 的 (x, y) 位置提取 RGBA 数组：

```
private final int ALPHA = 24;
private final int RED = 16;
private final int GREEN = 8;
private final int BLUE = 0;

public int[] getRGBA(BufferedImage img, int x, int y)
{   
    int[] color = new int[4];
    color[0]=getColor(img, x,y,RED);
    color[1]=getColor(img, x,y,GREEN);
    color[2]=getColor(img, x,y,BLUE);
    color[3]=getColor(img, x,y,ALPHA);
    return color;
}

public int getColor(int x, int y, int color)
{       
    int value=img.getRGBA(x, y) >> color & 0xff;
    return value;
} 
```

像素匹配器？也许您只是想运行一个循环..考虑到您将 (0,0) 像素作为原始像素，您可以执行以下操作：

```
 int[] originalPixel =  getRGBA(img,0,0);
    for (int i=0;i<img.getWidth();i++)
    {
        for (int j=0;j<img.getHeight();j++)
        {
           int[] color1 =  getRGBA(img,i,j);
           if (originalPixel[0] == color1[0] && originalPixel[1] == color1[1] && originalPixel[2] == color1[2] && originalPixel[3] == color1[3]) {
               img.setRGB(i, j,Color.red.getRGB());
           } 
           else {
               img.setRGB(i, j,Color.yellow.getRGB());
           }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T13:44:40.793

这个马文[算法](http://marvinproject.sourceforge.net/en/plugins/differenceColor.html)正是你想要的。

# c++ - `public` 访问限定符和`const`ness。`-Wuninitialized`

> ID：15612736
> 
> 赞同：12
> 
> 时间：2013-03-25T10:31:22.210
> 
> 标签：c++, warnings, member, access-specifier

```
class Foo
{
    public:
        const int x;
};

class Bar
{
    private:
        const int x;
}; 
```

输出：

```
test.cpp:10:13: warning: non-static const member ‘const int Bar::x’ in class without a constructor [-Wuninitialized] 
```

为什么会`Bar`产生警告但`Foo`没有（显然是因为访问限定符，但逻辑是什么？）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T10:37:30.577

使用这些定义，由于`Foo::x`是公开的，您可以使用以下内容有效地实例化 a `Foo`：

```
Foo f { 0 }; // C++11 
```

或者

```
Foo f = { 0 }; 
```

你不能这样做`Bar`。

# mysql - 我是否应该将一个复杂的查询拆分为一个来过滤结果和一个来收集数据？

> ID：15612737
> 
> 赞同：0
> 
> 时间：2013-03-25T10:31:23.763
> 
> 标签：mysql, sql, performance

我正在 PHP Web 应用程序中设计一个中央搜索功能。它专注于单个表，每个结果都是该表中的一个唯一 ID。不幸的是，有几十个表与这个中心表相关，其中大多数是 1:n 关系。更不幸的是，我需要加入其中不少。一对夫妇收集必要的数据以显示结果，一对夫妇根据搜索条件进行过滤。

我一直主要依靠一个查询来做到这一点。它有很多连接，因为每个 ID 应该只显示一个结果，它也适用于相当复杂的子查询和按用途分组。它还根据用户设置的排序方法进行排序，并且通过使用 LIMIT 也可以进行分页。

无论如何，这个查询已经变得异常复杂，虽然我很好地用 PHP 构建了它，但它是一个需要更改或调试的 PITA。因此，我一直在考虑另一种方法，在我实际开发它之前，我想知道这对性能有多糟糕（或不是？）。思路如下：

*   运行一个不太复杂的查询，仅根据搜索参数进行过滤。这意味着更少的连接，我可以完全忽略 group by 和类似的结构，我只会在此“SELECT DISTINCT item_id”并获取 ID 列表

*   然后运行另一个查询，这次只加入我需要使用... WHERE item_id IN (....) 显示结果（仅占当前总连接数的 1/4）的表，传递“有效的”列表" 在第一个查询中收集的 ID。

注意：显然 IN() 实际上可以包含完整的第一个查询，而不是依赖 PHP 来构建一个逗号分隔的列表）。

IN 在性能方面会有多糟糕？我根本无法限制第一个查询对我的伤害有多大？我也想知道这是否是一种常见的方法，或者是否有更智能的方法来做到这一点。我会感谢您对此的任何意见:)

注意澄清：我们不是在这里谈论一些简单的连接。那里甚至有（简单的）分层数据，我需要将搜索参数与项目自己的数据以及其父数据进行比较。在我从事过的任何其他项目中，我都没有遇到过接近这种复杂性的查询。甚至在你说之前，是的，数据本身具有这种固有的复杂性，这就是数据模型也很复杂的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:02:19.037

我的经验表明，使用这种`WHERE IN(...)`方法往往会更慢。我会加入连接，但请确保您首先加入最小的数据集。减少简单的主表，然后加入它。确保将最复杂的连接保存到最后，以最大限度地减少搜索所需的行。尽可能尝试加入索引以提高速度，并尽可能在 JOINS 中放弃通配符。

但我同意 Andomar 的观点，如果你有时间同时构建和测量。

# java - java 嵌入式 OS X 应用程序 VS 系统安装 Java

> ID：15612738
> 
> 赞同：0
> 
> 时间：2013-03-25T10:31:25.253
> 
> 标签：java, macos, java-7, java-6

如果 Mac OS X 计算机已安装 Java ( 6 - 7 - Both ??? ) 并且应用程序（来自 AppStore）嵌入了 Java ( 6 - 7 which ??? )，则系统将使用 Systemwide 安装还是嵌入式 Java ?

为什么我要问，说我有 10 个嵌入 Java 的应用程序同时运行并且我系统安装了 Java，Java 会运行一次还是 11 次？

因此，如果您必须使用许多 Java 应用程序，您应该使用嵌入式 Java 构建/安装它们还是应该在您的系统上安装 Java？

如果某些应用程序期望/需要 Java 6 和其他 Java 7，您可以同时安装两者（见下文）吗？

*   Mac OS X 过去安装了多个 Java 版本，全部由 Apple 提供，以及一个用于控制何时或由哪个 App 使用哪个 Java 版本的应用程序。但是，Apple 从 Java 6 中删除了该应用程序，并且 Java 的 6 -7 现在都来自不同的提供商（Apple 和 Oracle），并且彼此之间有足够不同的方法，这让我想知道它们是否仍然可以共存 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:55:47.373

Java 总是每个应用程序运行一次。因此，在您的进程列表中，每个应用程序将至少有一个 Java 进程。

您可以安装 Java 6 和 Java 7（取决于操作系统的早期版本，尽管我不知道它们来自哪里）以及 Java 8 开发版本。看

Java 7 来自[Oracle](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html)，6 来自[Apple](http://support.apple.com/kb/DL1572?viewlocale=en_US&locale=en_US)

应用程序在其 Info.plist 中告诉使用哪个 Java。

# objective-c - Xcode：无法从远程存储库中读取

> ID：15612742
> 
> 赞同：2
> 
> 时间：2013-03-25T10:31:41.207
> 
> 标签：objective-c, xcode, git, bitbucket

我正在尝试将 Xcode 与 Git (Bitbucket) 连接起来。

我读了这个问题/“教程”： [在 XCode 4 中，如何将远程 GitHub 存储库添加到现有的本地项目？](https://stackoverflow.com/questions/5803768/in-xcode-4-how-do-i-add-a-remote-github-repository-to-an-existing-local-project/15610960#15610960)

我遵循所有步骤，但我有一个问题。

在 Xcode 4.6.1 我总是得到这个错误：

“致命的“my_Repo”似乎不是 git 存储库致命的：无法从远程存储库读取。”

我能做些什么？我对 XCode 非常陌生。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:37:25.367

这通常链接到您用于远程存储库的 Bitbucket url。

我更喜欢首先使用 https url（不是 git 或 ssh ），[如此 BitBucket 文档页面](https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git)中所列：

```
https://accountname@bitbucket.org/accountname/reponame.git 
```

确保您的 repo 名称和用户名正确，包括它们的大小写。

> 问题出在 Xcode 上，目前要进行“推送”。Xcode 总是显示：“提交或放弃更改并重试。” 不是真的，没有变化

正如在[这个答案](https://stackoverflow.com/a/11910676/6309)中一样，您需要添加并提交至少一项更改才能推送。

[OP Kaisser](https://stackoverflow.com/users/1298235/kaisser) [提到](https://stackoverflow.com/questions/15612742/xcode-could-not-read-from-remote-repository/15612854?noredirect=1#comment22177588_15612854)了本教程“**[使用 GitHub 和 XCode 4 的 12 个步骤](http://www.mindthe.net/devices/2011/04/28/12-steps-to-using-github-with-xcode-4/)**” 。
他所做的是：

> 创建一个空项目并进行提交和推送，一切正常。
> 然后，我复制了我当前的项目并重命名了它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:47:25.330

从今天开始，我看到了类似的问题。大约 2 个月以来，我没有对我的 BitBucket 存储库进行任何提交或推送，但我之前从未遇到过问题。XCode 现在告诉我存储库“无法访问”和“请验证存储库是否在线且可访问，然后重试”。我可以从命令行提交。我想知道这是否是 XCode 4.6.1 的错误？

PS - 不确定我是否把它放在正确的地方。我从来没有在 SO 上发过帖子。如果我做错了，请纠正我！

# android - 我应该如何让我的 gps 检测开始..？

> ID：15612743
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:31:41.730
> 
> 标签：android, android-layout, salesforce, android-service

我创建了一个切换按钮，用于检查我希望我的 MyServices 类启动其服务...我的主布局文件有 3 个按钮，单击第二个按钮时，我的 UserStatus 活动已启动，并且此活动的切换具有我认为的 startService()启动 MyService，因为显示了我在中间给出的祝酒词。现在我打算在后台进行地理位置检测，但我不知道为什么没有发生地理位置，我使用来自 youtube 的视频做到了

* * *

这是用户状态活动

```
package com.salesforce.samples.templateapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.Switch;
import android.widget.Toast;
import android.widget.ToggleButton;
import android.location.*;
import android.content.Intent;
public class UserStatus extends Activity {

    ToggleButton statusToggle;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_user_status, menu);
        return true;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_status);
        statusToggle=(ToggleButton)findViewById(R.id.toggleButton1);

        statusToggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub
                if (isChecked)
                {
                    statusToggle.setTextOn("On");
                    Toast.makeText(getApplicationContext(), "Toggle is on", Toast.LENGTH_LONG).show();
                    startService(new Intent(getBaseContext(), MyServices.class));
                }
                else
                {
                    statusToggle.setTextOff("Off");
                    Toast.makeText(getApplicationContext(), "Toggle is off", Toast.LENGTH_LONG).show();
                    stopService(new Intent(getBaseContext(), MyServices.class));
                }
            }
        });
    }

    } 
```

* * *

这是 MyServices 类

```
package com.salesforce.samples.templateapp;

import java.util.HashMap;

import org.json.JSONArray;

import com.salesforce.androidsdk.app.ForceApp;
import com.salesforce.androidsdk.rest.RestClient;
import com.salesforce.androidsdk.rest.RestRequest;
import com.salesforce.androidsdk.rest.RestResponse;
import com.salesforce.androidsdk.rest.RestClient.AsyncRequestCallback;

import android.app.AlertDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

public class MyServices extends Service {
    RestClient client;
    double plat;
    double plong;
    int Two_Min=5*60*1000;

    // TextView infoText;

    public int onStartCommand(Intent intent, int flags, int startId) {

        Toast.makeText(this, "Location Updation has started", Toast.LENGTH_LONG)
                .show();
        detectLocation();
        return START_STICKY;

    }

    private void detectLocation() {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Inside detectlocation()", Toast.LENGTH_SHORT)
                .show();
        LocationManager lm1 = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener ll1 = new MyLocationListetner();
        Log.v("X",
                "Response:After creating lm and ll ");

        lm1.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, Two_Min, ll1);
        Log.v("X",
                "Response:After lm1.requestLocationUpdates ");
        ll1.onLocationChanged(null);
    }

    class MyLocationListetner implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            Log.v("X","Response:inside onLocationChanged ");
            Log.v("X","Response:"+location);
            if (location == null) {
                plat = location.getLatitude();
                plong = location.getLongitude();
                Log.v("X",
                        "Response:Location " + Double.toString(plat)+Double.toString(plong));

                String objectType = "akshayg__User__c";
                String objectId = "a02900000089fK3";
                HashMap<String, Object> fields = new HashMap<String, Object>();
                fields.put("Name", "Ashish");
                // fields.put("akshayg__Donor_Location__Latitude__s",
                // Double.toString(plat));
                // fields.put("akshayg__Donor_Location__Longitude__s",
                // Double.toString(plong));
                RestRequest request = null;

                try {
                    request = RestRequest.getRequestForUpdate(
                            getString(R.string.api_version), objectType,
                            objectId, fields);
                    // Toast.makeText(this, "Location Updation has started",
                    // Toast.LENGTH_LONG).show();
                } catch (Exception e) {
                    // printHeader("Could not build update request");
                    printException(e);
                    return;
                }

                client.sendAsync(request, new AsyncRequestCallback() {

                    @Override
                    public void onSuccess(RestRequest request,
                            RestResponse result) {

                        // Toast.makeText(this,
                        // ""+Double.toString(plat)+","+Double.toString(plong),
                        // Toast.LENGTH_LONG).show();

                        try {
                             //Toast.makeText(this, "Location Updated",Toast.LENGTH_LONG).show();

                            Log.v("X",
                                    "Response: " + result.toString());
                            /*JSONArray records = result.asJSONObject()
                                    .getJSONArray("records");
                            for (int i = 0; i < records.length(); i++) {
                                // listAdapter.add(records.getJSONObject(i).getString("Name"));
                                // listAdapter.add(records.getJSONObject(i).getString("akshayg__Phone_Number__c"));
                                // listAdapter.add(records.getJSONObject(i).getString("akshayg__Donor_Location__Latitude__s"));
                                // listAdapter.add(records.getJSONObject(i).getString("akshayg__Donor_Location__Longitude__s"));
                            }*/
                        } catch (Exception e) {
                            onError(e);
                        }
                    }

                    @Override
                    public void onError(Exception exception) {
                        Log.v("X",
                                "Response: " + exception.toString());

                        // Toast.makeText(MainActivity.this,
                        // MainActivity.this.getString(ForceApp.APP.getSalesforceR().stringGenericError(),
                        // exception.toString()),
                        // Toast.LENGTH_LONG).show();
                    }

                });
            }

        }

        private void printException(Exception e) {
            String err = "Error: " + e.getClass().getSimpleName();
            Toast.makeText(getApplicationContext(), err, Toast.LENGTH_LONG)
                    .show();
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Location Updation has stoped", Toast.LENGTH_LONG)
                .show();
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

* * *

这是我的日志猫错误我得到..

```
04-02 23:01:33.375: E/AndroidRuntime(4779): FATAL EXCEPTION: main
04-02 23:01:33.375: E/AndroidRuntime(4779): java.lang.RuntimeException: Unable to start service com.salesforce.samples.templateapp.MyServices@413c8878 with Intent { cmp=com.salesforce.samples.templateapp/.MyServices }: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2403)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.app.ActivityThread.access$1900(ActivityThread.java:127)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1221)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.os.Looper.loop(Looper.java:137)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.app.ActivityThread.main(ActivityThread.java:4448)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at java.lang.reflect.Method.invoke(Method.java:511)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at dalvik.system.NativeStart.main(Native Method)
04-02 23:01:33.375: E/AndroidRuntime(4779): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.app.ContextImpl.startActivity(ContextImpl.java:877)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at com.salesforce.samples.templateapp.MyServices.onStartCommand(MyServices.java:43)
04-02 23:01:33.375: E/AndroidRuntime(4779):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2386) 
```

控件一直运行到 onLocationChanged() 之后，但没有进入 if...else 条件。是 bcoz m 从服务类发送 NULL 到 onLocationChanged()..？但即使我在 if 条件下检查 location!=null，控件仍然没有通过 if 语句..请给出建议更正...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:38:05.760

正如 Abhijit 所说，帮助您解决 LogCat 错误会更容易，因为您给出的错误是 android 始终显示的错误，对于代码中引发的任何异常。

如果我不得不猜测，我会说你的`UserStatus`活动可能没有在你的清单中声明。

编辑：顺便说一句，确保在您测试的设备上启用了 GPS。您可能希望以他们在 Android 开发者网站上的方式以编程方式验证它，如果未启用，则打开位置设置。[在这里](http://developer.android.com/training/basics/location/locationmanager.html#TaskVerifyProvider)查看。

# mysql - 从 TinyMCE 发送的数据未以正确格式保存

> ID：15612746
> 
> 赞同：3
> 
> 时间：2013-03-25T10:31:53.520
> 
> 标签：mysql, tinymce

我正在使用 TinyMCE 来保存我的数据。但是，当我将所选文本的颜色更改为绿色并将其显示为 html 时，输出为：

```
text bla bla bla <span style="color: #99cc00;">Selected word</span> lorem ipsum sads a 
```

保存在 mysql 数据库中后，它的存储方式如下：

```
&lt;span  #99cc00;&quot;&gt;Selected word&lt;/span&gt; 
```

所以，正如你所看到的：`span #99cc00;&quot;`应该是：

```
span=&quot; #99cc00;&quot; 
```

但事实并非如此。

知道为什么第一个双引号被转义并且等号也被转义吗？如何将它们也保存到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:39:51.140

在将数据存储到数据库之前使用 htmlspecialchars 函数。

您可以在[此处查看教程](http://php.net/manual/en/function.htmlspecialchars.php)。

在获取数据后，当你回显它时使用 html_entity_decode 函数。这将全部转换为 HTML 来自数据库。

教程在这里：[教程](http://php.net/manual/en/function.html-entity-decode.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-20T11:27:50.317

您需要做的就是在 CodeIgniter 中禁用 XSS 过滤：

```
$this->input->post('textarea', FALSE); 
```

# html - 在 HTML 段落中显示前 3 行

> ID：15612747
> 
> 赞同：9
> 
> 时间：2013-03-25T10:31:56.293
> 
> 标签：html, css

我只想使用 HTML 格式显示下面段落的前 3 行。我正在 W3Schools 上搜索，但没有显示如何操作。

```
<body>

loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlor
loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore
loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore
loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore
loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore

</body> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-25T10:34:09.410

您可以给容器一个`height`and`line-height`并将其`overflow`属性设置为`hidden`：

**HTML**

```
<p>loremloremlorem...</p> 
```

**CSS**

```
p {
    height:60px;
    line-height:20px; /* Height / no. of lines to display */
    overflow:hidden;
} 
```

[JSFiddle 示例](http://jsfiddle.net/zC3rd/1)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-25T10:34:23.013

将段落的高度设置为三个行高。喜欢 -

```
p{
  line-height:1.2em;
  height:3.6em;
  overflow:hidden;
} 
```

将溢出设置为隐藏以隐藏溢出的文本

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-02-18T07:22:07.947

您可以将[`-webkit-line-clamp`](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp)属性与`div`.

```
div {
  width: 100%;
  line-height: 1.2em;
  height: 3.6em;
  background-color: gainsboro;
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}
```

```
<div>
  loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore
  loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore
  loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore
  loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore
  loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlore
</div>
```

# java - 具有超时功能的 Java 计时器

> ID：15612753
> 
> 赞同：1
> 
> 时间：2013-03-25T10:32:16.390
> 
> 标签：java, timer

我正在实现一个计时器：

```
timer = new Timer();
            timer.schedule(new TimerTask() {
                @Override
                public void run() {
                    //Do something;
                }
            },1000,1000); 
```

但是，我想有一个超时，以便在假设 100 次尝试/10 秒后，计时器会自动停止。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:00:09.583

尝试

```
 final Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        int n = 0;
        @Override
        public void run() {
            System.out.println(n);
            if (++n == 5) {
                timer.cancel();
            }
        }
    },1000,1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:34:57.373

您可以简单地在 run 方法之外有一个变量来保持迭代计数。在方法中创建一条`if`语句`run()`，当计时器达到所需数量时取消计时器。每次`run()`执行该方法时将变量加一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:40:08.273

我认为我们在 Timer 类中没有用于此的 java API。您需要通过根据您的要求实现一些自定义逻辑以编程方式进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:35:18.143

启动另一个定时器，一旦上述定时器启动，10秒后取消上述定时器。检查下面的代码作为快速解决方案。但最好你取消任务（）而不是计时器。

```
timer = new Timer();
            timer.schedule(new TimerTask() {
                @Override
                public void run() {
                    timer2.schedule(new TimerTask() {
                    @Override
                    public void run() {
                        timer1.cancel();
                    }
            },0);
                    //Do something;
                }
            },1000,1000);

timer2 = new Timer(); 
```

# postgresql - postgres 9.2 表大小与 pg_total_relation_size

> ID：15612754
> 
> 赞同：0
> 
> 时间：2013-03-25T10:32:17.773
> 
> 标签：postgresql

我通过以下方式处理具有 ~10^7 行的表：获取最后 N 行，以某种方式更新它们，然后删除，然后是`vacuum`表。最后，我查询`pg_total_relation_size`. 循环重复，直到桌子结束。每次迭代持续几秒钟。除了上面提到的之外，该表没有任何其他查询。问题是我得到了相同的表大小结果。它大约每几个小时改变一次。

所以问题是——postgres 是在某个地方存储表大小还是每次调用函数时都会计算它？即，尽管经过处理，我的表格大小是否真的保持不变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:35:50.003

尽管您正在执行`DELETE`s 和ing，但您的表在磁盘上的大小确实保持不变。`VACUUM`根据[上的文档`VACUUM`](http://www.postgresql.org/docs/current/static/sql-vacuum.html)，普通`VACUUM`只有在可以通过截断文件末尾的可用空间而不重新排列活动行的情况下才能将空间释放回操作系统。

该空间仍然是“空闲的”，因为 PostgreSQL 可以将其重新用于其他新行。重用 PostgreSQL 没有归还给操作系统的空间比扩展与新空间的关系要快得多，因此这通常是可取的。

Pg 不仅仅归还这个空间的另一个原因是，它只能在文件末尾之前没有可见行的连续块时将空间归还给操作系统。这不会发生太多，所以实际上 Pg 需要移动一些行以压缩表并允许它在最后释放空间，有点像文件系统上的碎片整理。这是一个低效且缓慢的过程，可能会违反直觉地使表的访问速度变慢而不是更快，因此这并不总是一个好主意。

如果您有一个大部分但并非完全为空的关系，则值得做一个`VACUUM FULL`（Pg 9.0 及更高版本）或`CLUSTER`（所有版本）来释放空间。如果您希望重新填满桌子，这通常会适得其反；实际上最好保持原样。

（对于我所说的“实时”和“可见”等术语的含义，请参阅[MVCC 上的文档，](http://www.postgresql.org/docs/current/static/mvcc.html)这将帮助您了解 Pg 的表格组织。）

就您而言，我个人会跳过手册`VACUUM`。如果需要，请打开 autovacuum。如果您真的需要，您可以考虑对表进行分区，`TRUNCATE`逐个分区处理它，并在完成处理后对每个分区进行处理。

# javascript - 响应路由的 Chaplin js 永久控制器

> ID：15612755
> 
> 赞同：0
> 
> 时间：2013-03-25T10:32:20.560
> 
> 标签：javascript, chaplinjs

是否有可能拥有一个控制器来保持其状态并响应路由？
例如，我将在应用程序的 initControllers 方法中启动一个 PlayerController，然后我还需要它来响应 /player/trackID 之类的路由，以便我可以更改当前播放的曲目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:33:05.983

是的，您可以创建一个控制器，该控制器将在应用程序的生命周期内处于活动状态。正如您提到的在应用程序的 initControllers 方法中实例化 PlayerController 并在 routes.js 中定义路由 /player/:trackID 以绑定到 PlayerController 的特定方法。

例如 routes.js 中的路由看起来像

```
match('player/:trackID', 'player#playTrack', {name:'playtrack'}); 
```

在上述路由中，playTrack 是 PlayerController 的方法。

# google-apps-script - 未在 Stock 电子表格中调用可安装的 OnEdit

> ID：15612759
> 
> 赞同：1
> 
> 时间：2013-03-25T10:32:39.717
> 
> 标签：google-apps-script, google-sheets

我有一个函数（在 Google Apps 脚本中），不是称为 onEdit()，而是其他函数，它已设置为通过 Google 电子表格上的可安装 onEdit 从任何编辑事件中调用。

电子表格围绕股票并监控投资组合，该功能的目的是在股票达到止损后立即发送电子邮件，即股票价格跌至某个价格。通过电子表格中的一列中的 Google Finance API 检索和更新股票价格。

现在，当从脚本运行该函数或在本地编辑电子表格时，该函数被成功调用。但是，我发现由于股票价格全天在 Google Drive 上自动更新并跌至止损价，因此不会调用 on edit 函数。我在某处读到它没有被“匿名”用户调用？我知道它没有被调用，因为我有一个“电子邮件计数器”列，每次调用该函数时都会减少，一旦为 0，将不再发送邮件以避免垃圾邮件。这不会通过 Google Finance API 自动价格更新而减少。有人可以建议是什么原因造成的，如果有任何解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:30:22.340

[在上一个答案](https://stackoverflow.com/a/15234631/1677912)中提供了一个不触发 onEdit 的事物列表，以及它们的问题跟踪 ID 。

由脚本更改的电子表格内容不会触发 onEdit。

一种解决方法可能是使用基于时间的触发器，并在回调中扫描并响应 ti 更改。（更新程序是否可以在不久的将来设置触发触发？）这方面的挑战将围绕平衡响应能力与触发限制。

# javascript - 骨干 Ajax 验证

> ID：15612760
> 
> 赞同：1
> 
> 时间：2013-03-25T10:32:43.450
> 
> 标签：javascript, jquery, backbone.js

我是 Backbone 的完全菜鸟，我现在才学习了大约 8 个小时，如果这个问题看起来很基础，很抱歉。文档对此不是很清楚。

有问题的模型`Product`需要运行大量的 Ajax 调用。在我的模型逻辑中，我需要根据特定条件在模型验证中运行至少 2 个 Ajax 调用。

不仅如此，当某些字段发生更改时，我还需要运行 Ajax 调用，因为每个字段都会触发其自己的更改字段，该字段从上次更改中冒泡，即：

*   A 价格变动
*   模型通过服务器调用重新计算产品价格
*   同时从价格变化中触发模型的供应商变量的变化
*   供应商变更必须在价格变更后进行 Ajax 调用。

所以我需要知道的是：基本上我应该如何将所有的 Ajax 调用转换为 Backbone？这里最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:29:26.550

我将用我的发现和解决方案来回答这个问题。

因此，我已经完成了与所有 Ajax 调用的主干集成。我解决这个问题的方法是使用 jQuery 的 promise API 从模型函数中返回一个延迟对象，该对象可用于链接。然后我在我的界面中以链式方式使用了这个函数。

为了更好地解释这里是一个例子：-想象我在一个类中有两个函数`Product`；一个叫`populateRecord`另一个`set_price`。每个都进行自己的 Ajax 调用和处理。

在视图中`ProductView`，我将包含一个名为的函数，该函数`edit`将处理如何以及何时调用这两个模型函数的逻辑，如下所示：

```
this.model.populateRecord().then(function(data){ return $this.model.set_price(data) }) 
```

将其“业务”方面放入视图中的方法效果很好并且解决了许多问题。

希望这对其他人有帮助，

# android - 在android中创建xml文件时出错

> ID：15612772
> 
> 赞同：0
> 
> 时间：2013-03-25T10:33:25.040
> 
> 标签：android

创建 Xml 文件时出错。

渲染期间引发的异常：-

```
android.widget.CheckBox cannot be cast to android.view.ViewGroup 
```

xml代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:orientation="horizontal" 
android:gravity="center_vertical">
<CheckBox 
    android:id="@+id/bcheck" 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:focusable="false">   
<TextView 
    android:id="@+id/txtTitle" 
    android:layout_width="wrap_content"
     android:gravity="left|center_vertical" 
     android:layout_height="?android:attr/listPreferredItemHeight" 
     android:text="Test" 
     android:focusable="false">  
</TextView>
<LinearLayout android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:orientation="horizontal" 
    android:gravity="right|center_vertical">
    <ImageButton android:id="@+id/ImageButton01" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:clickable="true" ></ImageButton>
</LinearLayout></CheckBox> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:40:59.657

试试这个它有效：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:orientation="horizontal" 
    android:gravity="center_vertical">
    <CheckBox 
        android:id="@+id/bcheck" 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content" 
        android:focusable="false"> 
    </CheckBox>  
    <TextView 
        android:id="@+id/txtTitle" 
        android:layout_width="wrap_content"
         android:gravity="left|center_vertical" 
         android:layout_height="?android:attr/listPreferredItemHeight" 
         android:text="Test" 
         android:focusable="false">  
    </TextView>
    <LinearLayout android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:orientation="horizontal" 
        android:gravity="right|center_vertical">
        <ImageButton android:id="@+id/ImageButton01" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:clickable="true" ></ImageButton>
    </LinearLayout>
</LinearLayout> 
```

# java - Spring 配置文件：包导入或属性值中的名称

> ID：15612774
> 
> 赞同：0
> 
> 时间：2013-03-25T10:33:31.470
> 
> 标签：java, xml, spring, namespaces

到目前为止我看到的所有关于 Spring 配置的例子都有

```
<bean class = "org.example.complex.package.path.FooClass" > 
```

我想知道这是否可以通过类似于 Java 导入的机制来简化，例如：

```
<beans ...>
  <import name = "org.example.complex.package.path.FooClass" />
  <import name = "org.example.another-package.*" />

  <bean class = "FooClass" >...</bean>
  <bean class = "AnotherClass">...</bean>
</beans> 
```

或者（或另外），XML 是否支持属性值中的名称空间？就像是：

```
<beans xmlns:foo="org.example.complex.package.path." ...>
  <bean class = "foo:FooClass" ...>
  ... 
```

我也需要它用于其他目的（例如，使用 RDF 的 URI）。我的理解是某些软件支持此功能，但不是标准的 XML 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:38:03.093

没门。Spring 使用`import`标签将另一个 beans 定义 xml 文件导入/添加到当前上下文。

# linux - Linux 用户权限 www 并且没有 putty 访问权限

> ID：15612775
> 
> 赞同：0
> 
> 时间：2013-03-25T10:33:34.807
> 
> 标签：linux, web, ssh, var, winscp

我有两个名为 pi 的用户，分别是 root 和 Pizza4yu。我已将 chmod 777 设置为 /var/www 如何设置 pi 具有对该文件夹的完全访问权限而 Pizza4yu 没有访问权限？而且我还设置了 Pizza4yu 可以使用 winscp 但我想拒绝 shell 访问（腻子）怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:50:00.653

确保 Pizza4yu 不是 /var/www 的所有者（通过用户名或组），例如：

```
ls -l /var/www 
```

然后您将需要删除用户的特权（以 root 或 /var/www 所有者身份运行）：

```
chmod -R u-rwx /var/www 
```

编辑：如果 PI 不是 /var/www 的所有者并且您想制作他，请使用

```
chown -R PI /var/www 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:20:09.987

从根目录执行此操作：

```
chmod 700 /var/www 
```

这将提供对 pi 的完全访问权限，而无法访问 Pizza4yu。要拒绝对 Pizza4yu 的 ssh 访问，请从 ~/.ssh/authorized_keys 文件中删除 Pizza4yu 的公钥。还要查看 /etc/ssh/ssh_config 文件。

# android - 如何在android中制作类似walkman的布局

> ID：15612777
> 
> 赞同：0
> 
> 时间：2013-03-25T10:33:41.210
> 
> 标签：android, android-layout, layout

我是 android 布局的新手，我想创建一个像这张图片一样的布局

![在此处输入图像描述](../Images/0c68848cdc67324163c1f732ef273c00.png)

你知道它的索尼随身听用户界面我只想要一个像它这样的背景和一些像那些盒子一样的东西。这是我的布局

```
enter code here<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="#ff000000"
android:orientation="vertical"
android:padding="0dp"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="0dp"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".Hafez" >

<ImageView
    android:id="@+id/bg_top"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:scaleType="fitStart"
    android:src="@drawable/music_library_albums_header" />

<ImageView
    android:id="@+id/bg_gradient"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:scaleType="fitEnd"
    android:src="@drawable/bg_gradient" />

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView2"
    android:layout_marginLeft="52dp" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/tiles_bg"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout>

<LinearLayout
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="147dp"
    android:orientation="horizontal"
    android:paddingLeft="@dimen/activity_vertical_margin" >

    <Button
        android:id="@+id/btn_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:background="@drawable/back_button"
        android:minHeight="10dp"
        android:minWidth="10dp" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="15dp"
            android:text="Liberary"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="14dp"
            android:text="Chose what you want"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="#ffffff" />
    </LinearLayout>
</LinearLayout> 
```

我真的对制作它的背景感到困惑..正如您所见，顶部有一个图像，它直到屏幕中间，然后我们在屏幕底部看到一个渐变..但是我不能设置渐变在顶部图像之后开始并一直持续到屏幕结束..我想要一个类似于部分的屏幕。Tob 和底部，在顶部我设置图像，在底部设置一个渐变，其他框出现在它们前面..有没有办法做到这一点？感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:54:43.007

简单的方法是带有背景图像的板条箱线性布局。以上布局采用一个文本视图和网格视图 3*3 行和列。

使用图像和文本视图实现了 gridview 布局

# r - 创建包

> ID：15612781
> 
> 赞同：1
> 
> 时间：2013-03-25T10:33:53.433
> 
> 标签：r, packaging

我正在用 R 语言创建一个包，一切运行正常，但是当我运行 R CMD check 时，它在运行示例时显示错误消息..即“无法打开文件”。“没有这样的文件或目录”实际上我的函数需要一个包含来自 PubMed 的摘要的 PubMed 文本文件，我已将我的文本文件放在我的包的每个子目录中，但它不起作用。一次又一次地显示相同的错误。所以请向我建议如何将文本文件放入包中的正确方法，示例可以使用该包以正常运行。我会非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:06:59.630

通常您将此类数据放在 /inst 文件夹中。例如：

`<packageRoot>/inst/pubmed/myfile`

构建包后，您可以从包中访问此文件夹的内容，如下所示：

`system.file( "pubmed/myfile", package="<package>" )`

有关更多信息，请参阅[http://cran.r-project.org/doc/manuals/r-release/R-exts.pdf（1.1.5](http://cran.r-project.org/doc/manuals/r-release/R-exts.pdf)包中的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T06:57:54.383

我建议你使用 devtools 和 roxygen2 包。基本上，您只需要准备描述和 .R 文件。

在这个出色的答案中查看更多详细信息：[devtools roxygen package creation and rd documentation](https://stackoverflow.com/questions/13339021/devtools-roxygen-package-creation-and-rd-documentation?newreg=47d25fb0b91740febd8cc5697080b1fa)

# ios - Core Data 中 Fetch Requests（模型模板）和 Fetched Properties 之间的区别

> ID：15612793
> 
> 赞同：0
> 
> 时间：2013-03-25T10:34:17.527
> 
> 标签：ios, core-data

他们之间有什么区别？两者都需要谓词。我都使用过它们，但我无法理解它们的区别。谢谢！（我认为没关系，但我在 iOS 中工作，Xcode 4 最新版本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:38:45.227

获取的属性是一种关系。这不是直接的双向关系，而是单向关系。所以只有一个对象知道这种关系。fetched 属性（通常）由谓词描述，并使用 fetch 请求来检索对象。

提取请求从核心数据中检索对象。实体的实际实例。如果您不需要过滤对象，则不需要谓词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T08:51:47.103

1.  相同：所有缓存的查询方法；
2.  区别：
    *   获取请求-->真正获取请求；只需从单个表中获取某些内容
    *   Fetched Properties --> 根据这个表中的数据从不同的表中获取一些东西；比如使用 :select from table2 where id = thisrow.id

# ajax - Facebook 返回的 X-FB-DEBUG 标头是什么？

> ID：15612794
> 
> 赞同：22
> 
> 时间：2013-03-25T10:34:22.137
> 
> 标签：ajax, facebook, header, facebook-javascript-sdk, jsonp

我想知道上面提到的标题是什么。当我对 Facebook 进行 JSONP 调用时，甚至当我只是访问[http://static.ak.fbcdn.net/时，它都包含在响应中](http://static.ak.fbcdn.net/)

我没有在 facebook 上找到任何文档，例如在[https://developers.facebook.com/docs/reference/ads-api/etags-reference/](https://developers.facebook.com/docs/reference/ads-api/etags-reference/)

所以，希望有人能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-17T17:47:26.283

有点晚了，但只是为了添加更多我认为有用的信息。Facebook 现在在其文档中有一个位置，我们可以在[这里找到它](https://developers.facebook.com/docs/graph-api/using-graph-api/v1.0)

> 如果您需要报告 Graph API 中的错误，我们会提供一些额外的请求标头，您应该将它们与错误报告一起发送，以帮助我们查明和重现您的问题。这些请求标头是 X-FB-Debug 和 x-fb-rev。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T21:32:56.780

对我来说，这似乎是一个请求跟踪 ID，这样 Facebook 可以在您填写错误报告时 [更快] 找到并跟踪特定的请求详细信息。在他们的错误跟踪器上的大量错误报告中看到了他们。

# iphone - 同一应用程序在 ipad 上可见的两个图标。

> ID：15612800
> 
> 赞同：0
> 
> 时间：2013-03-25T10:34:30.627
> 
> 标签：iphone, ipad, icons

请帮我找到解决方案。我在 iPad 上有一个应用程序。当我从 web url 下载相同的应用程序 ipa 文件时。它显示相同应用程序的两个图标。请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:47:49.593

1.  如果您的两个应用程序都使用不同的捆绑标识符，则可能会发生这种情况。
2.  这没有什么不妥。
3.  只需删除两个应用程序并重新下载即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:47:27.450

你改了`Bundle Identifier`吗？如果是这样，请删除过时的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:01:28.210

检查捆绑标识符。并删除与该捆绑标识符关联的所有应用程序。

# jquery - Nod引导验证：按钮单击时无法重新定位

> ID：15612803
> 
> 赞同：0
> 
> 时间：2013-03-25T10:34:51.863
> 
> 标签：jquery, validation

我正在为 twitter bootsrap 使用 Nod 前端验证 - [http://casperin.github.com/nod/](http://casperin.github.com/nod/)

现在验证效果很好，但是当我在我的按钮上放置一个 onclick 函数以重新定位时，它不起作用（不会带我到新的 href :)

```
 <div id="join" class="span12">
            <label for="joinUsername">Username</label>
            <input type="text" id="joinUsername" name="username" />
            <br />
            <label for="joinPassword">Password</label>
            <input type="password" id="joinPassword" name="password" />
            <br />
            <label for="confirmPassword">Confirm Password</label>
            <input type="password" id="confirmPassword" name="confirmPassword" />
            <br />
            <label for="email">Email (optional)</label>
            <input type="text" id="email" name="email" />
            <br /><br />
            <input type="submit" class="btn btn-primary" onclick="location.href='subscribe.aspx';" value="Join now" />
        </div> 
```

这个：

```
onclick="location.href='subscribe.aspx';" 
```

仅在**未**填写表格时有效，但是当我填写表格时，它根本不会重新定位...

JS：

```
 <script type="text/javascript">
        // A list of all the fields we wish to validate
        var a_metrics = [
          ['#joinUsername', 'presence', 'Please enter a username'],
          ['#joinPassword', 'min-length:4', 'At least 4 characters please'],
          ['#confirmPassword', 'same-as:#joinPassword', 'Passwords do not match'],
          ['#email','email','Please enter a valid email address']
        ];
        $('#form1').nod(a_metrics);

    </script> 
```

为什么它没有在按钮单击时重新定位？

# sql - 删除一列重复的行（不是“不同的”）

> ID：15612810
> 
> 赞同：1
> 
> 时间：2013-03-25T10:35:17.177
> 
> 标签：sql, ms-access, group-by, distinct

我正在使用访问权限，并且正在尝试编写一个查询，该查询将删除一列的重复项。到目前为止，这是我的查询：

```
SELECT
  Drawings.DrawingID,
  Players.NumOfGuessedAPainting,
  Players.NumOfGuessedBPainting,
  Players.NumOfGuessedCPainting,
  Words.Word
FROM Words INNER JOIN
    (Players INNER JOIN
    (Drawings INNER JOIN
     PlayersAndWords 
       ON Drawings.DrawingID = PlayersAndWords.DrawingID)
       ON Players.PlayerID = PlayersAndWords.DrawingPlayerID)
       ON Words.WordID = PlayersAndWords.WordID 
WHERE ((Words.Word)='" + w + "')
ORDER BY (Players.NumOfGuessedAPainting
         +Players.NumOfGuessedBPainting * 2
         +Players.NumOfGuessedCPainting *3 ) DESC 
```

该列`Drawings.DrawingID`可能重复，我希望查询只返回每个 Drawings.DrawingID 的一行。“不同”在这里不起作用。我读过这`group by`可能会有所帮助，但我不知道如何......
你能帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:43:09.863

只需将这些内衬放在 ORDER BY 行之前

```
GROUP BY
    Drawings.DrawingID,
    Players.NumOfGuessedAPainting,
    Players.NumOfGuessedBPainting,
    Players.NumOfGuessedCPainting,
    Words.Word 
```

已编辑。

# c# - 如何使用实体框架将当前日期/时间插入到日期时间数据类型字段中？

> ID：15612813
> 
> 赞同：0
> 
> 时间：2013-03-25T10:35:28.270
> 
> 标签：c#, sql-server, entity-framework

我正在使用实体框架将一行数据插入到我的应用程序表中。

这是课程：

```
public partial class Application
{
    public Application()
    {
        this.TestAccounts = new List<TestAccount>();
    }

    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public byte[] RowVersion { get; set; }
    public System.DateTime ModifiedDate { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
} 
```

这是 C# 代码：

```
_Uow.Applications.Add(new Application { Name = name }); 
```

它给了我一个错误说

```
 InnerException: System.Data.UpdateException
        HResult=-2146233087
        Message=An error occurred while updating the entries. See the inner exception for details.
        Source=System.Data.Entity

        InnerException: System.Data.SqlClient.SqlException
             HResult=-2146232060
             Message=The conversion of a datetime2 data type to a datetime data type
             resulted in an out-of-range value. 
```

如何更改我的 C# 代码以在 ModifiedDate 字段中插入当前日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:46:38.577

您好，您`ModifiedDate`使用 minvalue 进行了初始化，因此它给出了异常。更好地使用

```
public System.DateTime? ModifiedDate { get; set; } to make it nullable or 
```

在构造中初始化

```
public Application()
    {
        this.TestAccounts = new List<TestAccount>();
        ModifiedDate = DateTime.Now;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:36:44.873

就是这样：

```
_Uow.Applications.Add(new Application
                       {
                           Name = name,
                           ModifiedDate = DateTime.Now
                       }); 
```

或者您可以在构造函数中执行此操作：

```
public class Application
{
    public Application()
    {
        ModifiedDate = DateTime.Now;
    }
} 
```

顺便说一句：您得到了例外，因为默认情况下 c#`DateTime`比`datetime`SQL 更精确。就像消息说的：`datetime2`在 SQL 中使用。`DateTime`将其最小值作为初始值，这对于 SQL 来说太低了`datetime`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:44:51.660

您可以指定一个新的构造函数

```
public Application(string Name)
{
  if(ModifiedDate == null)
   //ModifiedDate = Convert.ToDateTime(01.01.2000);
     ModifiedDate = DateTime.Now;
} 
```

或者

```
public Application(string Name, System.Nullable<DateTime> modifiedDate)
{
   if(modifiedDate != null)
     //ModifiedDate = Convert.ToDateTime(01.01.2000);
     ModifiedDate = DateTime.Now;
   else
   Do stuff
} 
```

这并不完美，但应该可以解决问题。

# javascript - Tinyslider垂直滑动不起作用

> ID：15612814
> 
> 赞同：0
> 
> 时间：2013-03-25T10:35:29.750
> 
> 标签：javascript, slider

我在一个项目中使用 tinyslider2，需要让滑块垂直滑动，而 tinyslider 应该能够做到。

> 和方向切换（垂直或水平）。

但似乎无法让它工作。

```
var text_slider=new TINY.slider.slide('text_slider',{
            id:'slider',
            auto:4,
            resume:true,
            vertical: true,
            position:0,
            rewind:false,
            elastic:false,
            left:'button_down',
            right:'button_up'
        });

<div class="down" id="button_down" onclick="text_slider.move(-1)"></div>
<div class="up" id="button_up" onclick="text_slider.move(1)"></div> 
```

它不会向上或向下移动，除非我将位置设置为 1> 然后它立即滑到底部......当我试图让它垂直滑动时，我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:44:39.227

啊！！我发现了，为什么它不起作用......忘了把它放在 ul>li 里面（里面有 div。）

# android - 适用于 Android 应用程序的 Continuos 交付管道

> ID：15612816
> 
> 赞同：1
> 
> 时间：2013-03-25T10:35:37.507
> 
> 标签：android, ant, continuous-integration, robotium

我正在研究如何为 Android 应用程序设置 Continuos 交付管道。我知道使用 Jenkins 和 Ant 脚本进行构建的[现有方法。](http://www.multunus.com/2011/09/continuous-delivery-for-android-apps-part-1)我真正想做的是，当我在开发分支上执行 git push 时，我希望 Jenkins 在一堆模拟器（具有不同的分辨率）上进行构建，运行我的 Robotium 脚本并将结果通过电子邮件发送给我。

我正在寻找端到端的设置，最好是服务器可以在 Ubuntu 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T10:19:12.500

Siddharth，您可能需要考虑 CloudMunch 来满足此需求。您需要做的就是启动模拟器作为管道的一部分，以测试各种堆栈并最终通过邮件获得更新。Robotium 脚本可以通过 shell 调用，测试结束时报告将作为邮件发送给您。

# java - 在JVM上启用代理时是否可以获得原始主机和端口？

> ID：15612817
> 
> 赞同：1
> 
> 时间：2013-03-25T10:35:37.677
> 
> 标签：java, sockets, tcp

我有兴趣记录 Java 程序的 TCP 通信以启用以后的回放 - 类似于[Betamax](http://freeside.co/betamax/)等 VCR 框架所做的。挑战在于在不改变原始 Java 程序的情况下创建一个记录 TCP 流量的代理。

我最初的想法：假设我有一个任意的 Java 程序，它打开到不同服务（例如数据库）的 TCP 连接，并且我将`socksProxyHost`JVM 的属性设置为连接到 localhost，我在其中使用以下代码运行程序：

```
ServerSocket serverSocket = new ServerSocket(1080);
Socket socket             = serverSocket.accept(); 
```

有什么方法可以读取 Java 程序试图访问的原始主机和端口设置（在应用`socksProxyHost`and`socksProxyPort`选项之前）？如果是这样，那么我可以使用原始主机和端口打开一个新套接字并转发/记录数据。

或者是否有另一种方法来记录/重放（黑盒）Java 程序（即假设源代码不可用）和程序使用的服务之间的 TCP 通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:50:50.163

> 有什么方法可以读取 Java 程序试图访问的原始主机和端口设置（在应用 socksProxyHost 和 socksProxyPort 选项之前）？

SOCKs 客户端试图到达的主机和端口是客户端->服务器消息的一部分。这一切都在[Wikipedia 页面](http://en.wikipedia.org/wiki/SOCKS)中进行了解释。

事实上，有一些现有的 Java 库支持 SOCKs 协议。

# iphone - 从 php 文件中获取图像到 iOS

> ID：15612820
> 
> 赞同：1
> 
> 时间：2013-03-25T10:35:42.033
> 
> 标签：iphone, ios, ios5, ios6

我想通过用户 ID 从特定用户的 php 文件（例如：[http ://abc.xyz.com/api/showImage.php）中获取图像并在我的 iOS 应用程序的图像视图中设置图像。](http://abc.xyz.com/api/showImage.php)我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:38:41.167

You can get the image from the above URL in the form of NSData :

```
NSData *imageData = [NSData dataWithContentsOfURL:[NSURL urlWithString:@"http://abc.xyz.com/api/showImage.php"]];
UIImageView *imageView = [UIImageView alloc] initWithImage:[UIImage imageWithData:imageData]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:01:04.617

将响应存储到数组中，然后存储到一个对象中，比如配置文件 Object.I am using `SDWebImage`。如果您在 . 处获取图像 url，则`detailsObj.profileImage`使用如下所示设置为`imageview`..

```
 NSLog(@"response is:%@",userDetailsArray);

ProfileObject *detailsObj=[userDetailsArray objectAtIndex:0]; 
```

//代替 detailsObj.profileImage 使用获取图像的 url 服务器链接。

```
if([detailsObj.profileImage isEqualToString:@""] || [detailsObj.profileImage isKindOfClass:[NSNull class]] || detailsObj.profileImage.length==0)

{

    self.profileImageView.image=[UIImage imageNamed:@"NoImage.png"];
}

else

{ 
```

//不使用 SDWebImage

```
[self.profileImageView setImageWithURL:[NSURL URLWithString:detailsObj.profileImage]]; 
```

//如果是从服务器获取的NSData

```
self.profileImageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL urlWithString:detailsObj.profileImage]]]; 
```

//或使用SDWebImage

```
 [self.profileImageView setImageWithURL:[NSURL URLWithString:detailsObj.profileImage] placeholderImage:[UIImage imageNamed:@"NoImage.png"]];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:47:07.247

当显示来自网络的图像时，最好使用 Asyn 下载方法。
您可以在 UIImageView 上创建自己的类别或使用流行的 [SDWebImage 类别](https://github.com/rs/SDWebImage)。

```
[imageView  setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
                   placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

# css - Firefox 中不同单元格的边框宽度显示不同

> ID：15612824
> 
> 赞同：6
> 
> 时间：2013-03-25T10:35:52.477
> 
> 标签：css, firefox, border, html-table

我正在动态生成大约 55 行和 15 列的表。我已经像这样将列的边框宽度设置为 1px

```
#tblId td
{
    border:1px solid #616161;
    background-color:#EEEEEE;
} 
```

但是对于某些单元格，它显示的边框比 1px 厚！这是我的表格的一部分，您可以看到上列和下列的边框差异

![在此处输入图像描述](../Images/47cf7a8493c946bf9cc088fea50d98d9.png)

**编辑**

这是小提琴[http://jsfiddle.net/bz3Da/2/](http://jsfiddle.net/bz3Da/2/)

这真的很奇怪，它在小提琴中看起来不错，但在我的最后却没有，我检查了没有其他课程影响这张桌子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:44:00.550

[http://jsfiddle.net/bz3Da/4/](http://jsfiddle.net/bz3Da/4/)

添加*！重要*：

```
 #tblId td
    {
        border:1px solid #616161 !important;
        background-color:#EEEEEE;
    } 
```

内联样式比 CSS 样式更重要。您**可以**覆盖它们，但您应该**避免**使用*!important* - 只需删除内联样式并仅使用 CSS。

有人已经在这里问了为什么： [我应该避免在 CSS 中使用 !important 吗？](https://stackoverflow.com/questions/3427766/should-i-avoid-using-important-in-css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T12:32:37.200

我重置了 Firefox 缩放。有用！！！完美的。我发现当我放大某些边框时会变粗。打击是我的 cssenter 代码，这里是 firefox 50.1 / windows 7

```
table td, table th {  border: 1px solid #e8e8e8;}
table {
  border-collapse: collapse;
  border-spacing: 0;
} 
```

# ajax - 如何通过 javascript 和 ajax 在 Scala 中调用方法？

> ID：15612825
> 
> 赞同：2
> 
> 时间：2013-03-25T10:35:55.193
> 
> 标签：ajax, scala, playframework-2.0, action, ajax-request

我不知道我的标题是否有点误导。但这是我真正需要帮助的地方。

我正在获取此网址：

```
$.get("/fb/login/"+fbEmail, function(data){
   console.log(data);
}); 
```

这是我的路线：

```
GET /fb/login/:email  presentation.controllers.Auth.authenticateSocialNetwork(email:String) 
```

这是我的行动：

```
def authenticateSocialNetwork(email:String) = Action {
   if(!editorRepo.getEditorByEmail(email).isEmpty){
      Redirect(routes.Profile.editorProfile).withSession(Security.username -> email)
   } else {
      Redirect(routes.Profile.initiatorProfile).withSession(Security.username -> email)
   }
} 
```

我对此的期望是我的动作被**调用**并触发其中的内容。换句话说，**重定向**。

但实际发生的情况并非如此不合逻辑，那就是我的 $.get 调用得到了我重定向的响应。

我如何实际**调用**我的操作方法，而不向 javascript 发送响应？

* * *

这是我在 javascript 中的函数，发布此代码段以便在我们在上面的评论中的讨论中更清楚。

```
function addClickToLoginButtons(){
$("#loginWithFb").click(function(){
    FB.login(function(response){
        if(response.authResponse){
            FB.api('/me', function(response){
                var fbEmail = response.email;
                $.get("/fb/isRegisteredAtNetwork/"+fbEmail+"/facebook", function(data){
                    if(data == "true"){
                        if(confirm("Do you want to log with facebook-account "+fbEmail+"?")){
                                $.get("/fb/login/"+fbEmail, function(data){  *//HERE'S WHERE I WOULD WANT TO CALL MY METHOD IN SCALA*
                                    console.log(data);
                                });
                        } else {
                            console.log("try again with a different facebook-account");
                        } //end confirm else
                    } else {
                        console.log("Logged in not in database");
                    }//end get else
                });
            });
        } else {
            console.log("permission not granted");
        } // end authResponse else
    }, {scope: 'email'});
});
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:19:09.870

在您的操作中，不是返回重定向，而是返回`Ok(urlToBeRedirectedTo).withSession(...)`。一旦在 javascript 代码中收到此响应，请执行您的操作，然后调用`window.location = urlToBeRedirectedTo;`.

这会将电子邮件添加到会话中，并将重定向到所需的 URL。

# mysql - 为什么 MySQL 表 auto_increment 重置为 0？

> ID：15612826
> 
> 赞同：2
> 
> 时间：2013-03-25T10:35:56.340
> 
> 标签：mysql, ruby-on-rails, centos

今天发现`auto_increment`有几个表的值都被重置为0。为什么？

*   导轨 2.3.x
*   MySql 5.0.x

信息：

*   表通常是空的（创建行然后删除）
*   服务器是`init 6`

该应用程序取决于 auto_increment id，所以我想知道防止这种情况再次发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:46:27.923

让我猜猜：您正在使用 InnoDB。

InnoDB 存储引擎[将自动增量计数存储在内存中](http://dev.mysql.com/doc/refman/5.5/en/innodb-auto-increment-handling.html)；它在 MySQL 重新启动时被重置。

一种解决方案是将最高值存储在某处的表中，并在系统启动时恢复它。或者，根据您的用例，您可能会发现保留一个 MyISAM 表只是为了提供`AUTO_INCREMENT`值很有用。

[你可以在这里找到](http://jonisalonen.com/2012/did-you-know-this-about-auto_increment/)[有趣的事实`AUTO_INCREMENT`](http://jonisalonen.com/2012/did-you-know-this-about-auto_increment/)汇编。

# c - 使用二维数组调用函数时出现分段错误

> ID：15612828
> 
> 赞同：0
> 
> 时间：2013-03-25T10:36:05.837
> 
> 标签：c, multidimensional-array, static-allocation

我有以下代码：

```
#define MAXSAMPLES 1024
typedef  int sample_t;
typedef sample_t sub_band_t[MAXSAMPLES][MAXSAMPLES];

void blah(sample_t a[][MAXSAMPLES], int u0, int v0, int u1, int v1) {
. . . . 
} 

int main(int argc, char *argv[]) {
    sub_band_t in_data;
    int k =0;

    if (argc < 2) {
        printf("\nInput filename required\n");
        return 0;
    }

    FILE *input_file = fopen(argv[1], "r");
    char del = '\0';

    int i = 0, j = 0;
    int cols = 0;
    sample_t x;
    while (! feof(input_file)) {
        if (fscanf(input_file, "%d%c", &x, &del) != 2) {
            i--;
            break;
        }
        in_data[i][j] = x;
        if ( del == '\n') {
            i++;
            j =0;
            continue;
        }
        j++;
        cols = j > cols ? j : cols;
        x = 0;
    }
    blah(in_data, 0, 0, i, cols);
} 
```

当我使用具有 10*10 整数的输入文件运行此程序时，我`blah`在 main 中的函数调用中遇到分段错误。我也无法使用 gdb 收集有关分段错误的任何信息，它只是说：

```
0x0000000000400928 in blah (a=Cannot access memory at address 0x7ffffdbfe198) at blah.c 
```

我在这里做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:01:42.807

你 typedef`subband_t`作为一个几 MB 的大型二维数组。这将需要几 MB 的堆栈内存。这是否有效是实施质量的问题。程序段`#define MAXSAMPLES 10`错误吗？那就是你的问题了。

请注意

```
 while (! feof(input_file)) { ... } 
```

从来没有工作过，也永远不会工作，因为只有在输入操作命中 EOF*后才会设置 EOF 标志。*请参阅 comp.lang.c 常见问题解答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:04:42.630

你对 typedef 感到困惑：你做了：

```
typedef sample_t sub_band_t[MAXSAMPLES][MAXSAMPLES]; 
```

*   编辑：

这里有一个类似问题的示例： [创建指向二维数组的指针](https://stackoverflow.com/questions/1052818/create-a-pointer-to-two-dimensional-array)

所以看起来typedef是正确的，它可能是在堆栈上分配了这么多内存，当你将MAXSAMPLES定义为10时它是否仍然存在段错误？也就像他说的那样，存在 feof 问题。正如我评论的那样，您的函数看起来接收 6 个参数，而您只发送 5..

# c - graphics.h C 中 outtextxy 的负 x 值

> ID：15612831
> 
> 赞同：1
> 
> 时间：2013-03-25T10:36:18.570
> 
> 标签：c, graphics, dos, turbo-c

我制作了一个使用 graphics.h 的游戏。我使用 while 循环来创建屏幕输出，因此下面示例中的 x1 值一直减少 5。这意味着我一直在创建游戏的所有屏幕，除了 while 循环继续，玩家只显示他所在的屏幕部分。这显然是非常低效的，所以我想知道是否有人有以更有效的方式执行此操作的提示。我还有一个更具体的问题...... outtextxy 不允许负 x 值，这意味着

```
outtextxy(-10,400,"text that is long enough that should be shown on screen even though it starts before screen beginning"); 
```

没有出现在屏幕上，所以我的代码是：

```
outtextxy(x1+301,400,"Use 'd' to duck"); 
```

它会在游戏中的那个屏幕通过之前停止打印到屏幕上，即 x 值变为负数的那一刻，而不是当结束字母的 x 值通过时，就像我想要的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:02:29.483

您需要[剪辑](http://en.wikipedia.org/wiki/Clipping_%28computer_graphics%29)输出。像这样包装`outtextxy`（您可能需要调整参数和返回值以匹配`outtextxy`）。我假设您使用的是固定宽度的字体。

在 x 坐标中剪切文本将类似于以下内容：

```
int clippedouttext(int x, int y, char *text) {
  const int CHAR_WIDTH = 8;  /* Replace 8 by actual character width */
  if (text == NULL || *text = '\0') { return 0; }  /* No text was submitted */
  while (x < 0) {
    x += CHAR_WIDTH;
    ++text;
    if (*text == `\0`) { return 0; }  /* The text is outside the viewport. */
  }
  return outtextxy(x, y, text);
} 
```

# google-app-engine - DeadlineExceededException 和 DataStore/Task Queue 操作

> ID：15612835
> 
> 赞同：0
> 
> 时间：2013-03-25T10:36:27.510
> 
> 标签：google-app-engine, google-cloud-datastore

我正在做一些应该在 60 秒内完成的操作，但在极少数情况下可能需要更长的时间（但永远不会超过 10 分钟）。它在应用程序引擎文档中说，如果您捕获到 DeadlineExceededException，那么在它永久失败之前您只有不到一秒钟的时间来执行操作。这是否足以将任务添加到队列和/或执行数据存储写入？我认为最安全的方法是在操作开始时添加任务异步/写入数据存储实体（异步），并在操作完成时将其从队列中删除。后一种方法会使用两倍的 api 调用，但值得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:42:35.140

我建议将队列用作所有操作的默认值，这样如果您发现死线超出错误，您就不必实施回退。它更干净，更容易维护，而且用户不必等待操作完成。为了实现这一点，您可以使用 ajax 调用触发队列并在后台获取结果，因此用户不会等待操作完成。是的，这是值得的，因为它可以“保证”您可能需要的时间窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:31:08.853

在引发异常以准备自定义响应后，运行时环境为请求处理程序提供了更多时间（不到一秒）。因此将其添加到任务队列中就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T04:42:42.383

如果您不希望客户端继续轮询任务队列结果，我建议您查看 Channel API。它将使您能够向客户端实施推送通知。

在任务队列结束时，您只需向客户端发送通知，让他现在任务已处理。

# mysql - 错误 1064 加载数据文件

> ID：15612842
> 
> 赞同：1
> 
> 时间：2013-03-25T10:36:49.637
> 
> 标签：mysql

我正在尝试从制表符分隔的文本文件将几千条记录加载到我的 MySQL 数据库中，但我收到了错误消息：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'FIELDS 
TERMINATED BY '\t' ENCLOSED BY '" '
LINES TERMINATED BY '\n'' at line 2 
```

我的命令是：

```
LOAD DATA INFILE 'records.txt' INTO TABLE records (vendor, title, id, part, project,
description, machine, shelf, compartment, checkout)
FIELDS TERMINATED BY '\t' ENCLOSED BY '"'
LINES TERMINATED BY '\n'; 
```

我尝试了不同的选项，例如 OPTIONALLY ENCLOSED BY '"'、LINES TERMINATED BY '\r\n'，并在 ENCLOSED BY '" ' 中的引号后添加一个空格，但我仍然收到上面的错误消息。

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:53:55.737

我不太习惯这个命令，但我会说正确的查询是：

```
LOAD DATA INFILE 'records.txt' INTO TABLE records 
FIELDS TERMINATED BY '\t' ENCLOSED BY '"'
LINES TERMINATED BY '\n' (vendor, title, id, part, project,
description, machine, shelf, compartment, checkout); 
```

# ruby-on-rails - 安装heroku失败：名称或服务未知

> ID：15612844
> 
> 赞同：1
> 
> 时间：2013-03-25T10:37:03.383
> 
> 标签：ruby-on-rails, ruby, heroku, heroku-toolbelt

我尝试在我的 ubuntu 12.04 上安装 heroku 我在终端上运行了这段代码

```
wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh 
```

但它失败了，出现了以下错误。我应该怎么办？ ![在此处输入图像描述](../Images/0fb8a206f18de261082b6261b1a654c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:32:20.900

尝试另一种安装方式。使用以下命令

```
sudo apt-add-repository 'deb http://toolbelt.herokuapp.com/ubuntu ./'
wget -O- https://toolbelt.heroku.com/apt/release.key | apt-key add -
sudo apt-get update
sudo apt-get install heroku-toolbelt 
```

我认为这是可行的

# iphone - 表视图崩溃

> ID：15612845
> 
> 赞同：0
> 
> 时间：2013-03-25T10:37:05.960
> 
> 标签：iphone, xml, uitableview

我是 iPhone 应用程序开发的新手。我目前正在研究 XML 解析。我正在从 xml 文件中提取记录并将其存储在可变数组中。我有一个表格视图，我正在从该可变数组加载表格视图。我在通过调试找到的表视图中得到 18 行。问题是当我向下滚动到 10 行时，它移动得很好，但是当第 10 行出现时，应用程序崩溃了。我得到的错误`EXC_BAD_ACCESS`。这是我加载单元格的代码。谢谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];

        Location *record = [[Location alloc] init];

        record = [[parse locationarr] objectAtIndex:indexPath.row];

        cell.textLabel.text = record.locationname;

        return cell;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:41:57.897

您发布的代码中有一些错误，首先您只返回一个单元格是表格没有返回一个单元格用于出队

因此，更改您的代码同样可以解决该问题：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
    }

   Location *record = [[Location alloc] init];
   record = [[parse locationarr] objectAtIndex:indexPath.row];

   cell.textLabel.text = record.locationname;

   return cell;
} 
```

每次都必须`alloc`和`init`一个`Location`非常昂贵，最好`Location`在每次需要一个单元格时调用的类中有一个。更好的是只获取单元格的数据，而不是在方法中执行任何冗长的`tableVieew:cellForRowAtIndexPath:`方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T11:03:29.327

你的错误是“返回单元格”，它写在 if 条件里面，把它放在外面也行标题标签文本设置边条件。像这样..

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

```
if(cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];

    Location *record = [[Location alloc] init];

}
else
{
  // get  record object here  by tag.  
}
record = [[parse locationarr] objectAtIndex:indexPath.row];

cell.textLabel.text = record.locationname;

 return cell; 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T10:48:07.763

您需要编写此代码段

```
`record = [[parse locationarr] objectAtIndex:indexPath.row];

cell.textLabel.text = record.locationname;` 
```

超出 if 块。

享受编程！！

# php - CakePHP 控制台 - 错误日志

> ID：15612846
> 
> 赞同：0
> 
> 时间：2013-03-25T10:37:06.137
> 
> 标签：php, cakephp, cakephp-2.0

我使用 CakePHP 创建了一个 Shell。我正在使用以下命令将输出写入文件：

`sitename/app/Console/cake customconsole >> errorlog.log`

一切似乎都在这里工作，但我没有收到 PHP 通知或警告。但是，我可以在终端中看到通知和警告。

有什么方法可以将通知和警告也记录到我的日志文件中？

我在 CLI 的 php.ini 中进行了以下更改：

```
display_errors
Default Value: On

error_reporting
Default Value: E_ALL 
```

我还在 CakePHP 中将调试值调整为 1。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T14:30:39.717

一个适当的书面应用程序无论如何都不应该抛出通知和硬错误。除了尝试记录它们之外，我还会在单元测试和避免错误和通知上投入更多时间。特别注意事项不难纠正。

我不确定，现在懒得为你测试这个，你可以自己做，CakePHP 使用控制台流来处理不同的状态，所以我*猜*在发生硬 php 错误的情况下，它会将输出发送到错误流 (2)。

请参阅此页面[http://www.ibm.com/developerworks/linux/library/l-lpic1-v3-103-4/](http://www.ibm.com/developerworks/linux/library/l-lpic1-v3-103-4/)部分“重定向输出”如何重定向一个文件中的所有流。

试试看，也许是解决办法。

# javascript - setTimeout 无法正常工作

> ID：15612852
> 
> 赞同：0
> 
> 时间：2013-03-25T10:37:23.590
> 
> 标签：javascript, settimeout

我有一个脚本，我在单击按钮后将其禁用 5 秒钟，然后再次启用它。

```
$(document).on('click', 'button', function () {
    var htmls = $(this).html();
    $(this).prop("disabled", true);
    setTimeout(function () {
        $(this).prop("disabled", false);
        $(this).html(htmls);
    }, 5000);
    $(this).html('<img src="<?=CDN(' / icons / loading / loading5.gif ')?>" />');
}); 
```

不知何故，`setTimeout`不会结束，所以按钮不会再次启用。我没有收到任何错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:39:03.193

Save `$(this)` into variable before `setTimeout` call, since `this` keyword inside `setTimeout` handler refers to `window` object:

```
$(document).on("click", "button", function() {
    var $this = $(this),
        htmls = $this.html();

    $this.prop("disabled", true)
         .html('<img src="..." />');

    setTimeout(function() {
       $this.prop("disabled", false)
            .html(htmls);
    }, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:40:43.543

这里`没有引用 DOM 元素。尝试放入另一个 temarory 变量。因为它在外面`setTimeOut``

 ````
 var $this = $(this),
        htmls = $this.html();

    $this.prop("disabled", true);
    setTimeout(function() {
       $this.prop("disabled", false).html(htmls);
    }, 5000); 
````

# delphi - 德尔福 2010 中的 SAML

> ID：15612856
> 
> 赞同：4
> 
> 时间：2013-03-25T10:37:28.543
> 
> 标签：delphi, delphi-2010, saml

我需要在基于 Web 的 Delphi 2010 应用程序中实现 SAML。Delphi 2010 中是否有可用的组件来实现？是否有任何可用的delphi 示例代码？我可以看到 .net 的示例代码，但不是 Delphi 请告诉我。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-24T16:21:55.653

我浏览了网络，据我所知，delphi 2010 没有用于实现 SAML 的组件。我能找到的最有用的网站是：[http](http://codeverge.com/embarcadero.delphi.non-tech/saml-in-delphi-2010/1087146) ://codeverge.com/embarcadero.delphi.non-tech/saml-in-delphi-2010/1087146 （链接导致堆栈溢出）但就我可以告诉德尔福没有组件，对不起！

# mysql - 无法使用带有 sinatra 的数据映射器保存表单数据

> ID：15612857
> 
> 赞同：2
> 
> 时间：2013-03-25T10:37:29.147
> 
> 标签：mysql, ruby, database, sinatra, datamapper

我目前正在使用 Sinatra 构建一个小型应用程序，并且遇到了将表单数据保存到 mysql 数据库的问题。首先，当我使用 twitter auth 登录应用程序并将 dat 保存到其表中时，我可以确认与数据库的连接正在工作。

表格很简单

```
route: '/'
<form action="/create" method="post">
    <p>
        <label for="">Weight</label>
        <input type="text" name="weight[amount]">
    </p>
    <p>
        <input type="submit" id="">
    </p>
</form> 
```

模型看起来像这样

```
class Weight
   include DataMapper::Resource
   property :id,         Serial, key: true
   property :amount,     Float 
   property :is_goal,    Boolean, :default  => false
   property :created_at, DateTime, :required => true
   belongs_to :user
end

DataMapper.finalize
DataMapper.auto_upgrade! 
```

西纳特拉路线是这样的：

```
 post '/create' do
    @weight = Weight.create(params[:weight])
 if @weight.save 
    flash[:success] = "Its all saved now"
    redirect '/'
 else
    flash[:failure] = "I Didnt save!"
    redirect '/'
 end
 end 
```

现在由于某种原因，每次我输入表格时都会`I didnt save`闪回。我确定这是一件显而易见的事情，但我看不出我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:03:22.910

```
 post '/create' do
  @weight = Weight.create(params[:weight])

  if @weight.save 
    flash[:success] = "Its all saved now"
    redirect '/'
   else
    flash[:failure] = "I Didnt save!"
    STDERR.puts @weight.errors.inspect # <-- will dump the errors structure to STDERR
    redirect '/'
   end
 end 
```

不过，理想情况下，您应该设置一个记录器并记录您在做什么。这使得事情更容易调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:38:40.367

由于 mcfinnigans 的评论，我通过将错误记录到控制台的帮助解决了这个问题。

数据库期待一个数字，但由于表单使用文本框，它试图保存为字符串。所以我添加`.to_f`到我的金额参数来转换它。

# c++ - How to get several values using optarg?

> ID：15612867
> 
> 赞同：0
> 
> 时间：2013-03-25T10:38:20.500
> 
> 标签：c++, getopt

I'd like to get more optargs after arguments, but I'm not sure how to do it. I want to call my program like

```
./test -a first second -b third 
```

and I can now get only one value after argument -a. When I try to put there two or more, avalue is null.

My code:

```
 char *avalue = NULL;
   char *bvalue = NULL;
   while ((c = getopt (argc, argv, "a:b:")) != -1)
     switch (c)
       {
      case 'a':
         avalue = optarg;
         break;
      case 'b':
         bvalue = optarg;
         break;
       case '?':
         if (optopt == 'c')
           fprintf (stderr, "Option -%c requires an argument.\n", optopt);
         else if (isprint (optopt))
           fprintf (stderr, "Unknown option `-%c'.\n", optopt);
         else
           fprintf (stderr,
                    "Unknown option character `\\x%x'.\n",
                    optopt);
         return 1;
       default:
         abort ();
       }

   printf ("avalue = %s\nbvalue = %s\n",avalue, bvalue); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:48:52.953

这种传统格式最多需要每个标志的单个参数。你不能改变它。

但是，根据您的 shell，您可以使用引号将多个*标记*“分组”为一个参数：

```
./test -a "first second" -b third 
```

这种分组将发生在您的 shell 中，即在参数被发送到您的程序之前。

# html - Clearing Footer not working

> ID：15612868
> 
> 赞同：1
> 
> 时间：2013-03-25T10:38:24.847
> 
> 标签：html, css

I'm trying to clear the footer like so:

```
<div>
    <div class="left">Left</div>
    <div class="right">Right</div>
    <div class="footer clear">Footer</div>
<div> 
```

* * *

```
.left {
    background-color: red;
    float: left;
}

.right {
    background-color: blue;
    float: right;
}

.footer {
      background-color: orange;
}

// clear
.clear {
   clear: both;
} 
```

Fiddle here: [http://jsfiddle.net/RYYFw/8/](http://jsfiddle.net/RYYFw/8/)

But the footer is not clearing. Does anyone know why?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T10:41:44.977

这是您的评论`//`导致错误。在 CSS 中是不允许的。

利用`/* comment */`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:43:04.667

如果您删除无效`//`评论，您将获得您想要的结果..

# asp.net - Open image on next aspx page

> ID：15612874
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:38:41.927
> 
> 标签：asp.net

I show image thumbnails on page, Now I want when i click on image thumbnail the big images related to that thumbnail open in IamgeDispData.aspx page where i created a data entry form in that page to enter data related to that picture. How can I do this? With help of query string or else??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:41:19.320

查询字符串是一个不错的选择。
你可以做什么把你的图像放在一个`asp:hyperlink`
设置 asp:hyper 链接的 URL 中
并在你的详细信息页面中从 url 获取它

请注意，您只能在 url 中传递文件路径
并且您必须从物理位置显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:44:15.987

如果您在向用户显示 Id 时没有问题，这将是最好的解决方案。如果您在显示 Id 时遇到问题，您可以对其进行加密，然后将其用作 Id。您还可以在 ImageDispData.aspx 中再次验证用户是否有权输入图像数据。

我正在让位于使用查询字符串和 javascript。

您可以使用 JavaScript 的 window.open 函数在新窗口或选项卡中打开。当您生成缩略图图像时，使用以下网址创建它们：yourBigimage.aspx?photoId=10，使用 jquery onclick 事件打开此网址并使用 window.open

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:42:53.633

在查询字符串的帮助下？？

**是**的，你可以使用它。只需用`<a>`锚标签包围您的图像或使用`asp:hyperlink`服务器端标签。

它可以是类似的东西

```
Content/Thumbnails/page.aspx?imageName="your image name" 
```

例如

```
<a href="http://www.espn.com" target="_blank">
 <img src="ahman.gif" />
</a> 
```

Ref:
[html - image links](http://www.tizag.com/htmlT/htmlimagelinks.php)
[Hyperlink image](https://stackoverflow.com/questions/9898223/hyperlink-image)
[如何控制超链接的图像大小？](http://forums.asp.net/t/994352.aspx/1)

示例代码片段：

```
<asp:HyperLink runat="server" ID="hlThumbnail" NavigateUrl='<%# Eval("Url") %>'
  Target="_blank" Style="height: 66px;">
  <asp:Image runat="server" ID="imgThumbnail" Height="66px"
    ImageUrl='<%# Eval("Thumbnail") %>' />
</asp:HyperLink> 
```

# boost - 'boost shared_ptr' and 'boost lock' together = messed up

> ID：15612877
> 
> 赞同：0
> 
> 时间：2013-03-25T10:38:50.777
> 
> 标签：boost, locking, shared-ptr, boost-thread

I am new to both concepts shared_ptr and mutex (boost or not boost). I am trying to use it in my classes :

```
typedef boost::shared_mutex Lock;
typedef boost::unique_lock< Lock > WriteLock;
typedef boost::shared_lock< Lock > ReadLock;

class subscriptionInfo 
{
public:
//this is not a copy constructible class. so I have to use shared pointer
boost::shared_ptr<Lock> myLock; 
...
}
...
std::vector<DATA_MSG_PTR>& subscriptionInfo::getIncoming() {
    ReadLock Lock(myLock);
    return incoming;
} 
```

and the error says:

```
error: no matching function for call to ‘boost::shared_lock<boost::shared_mutex>::shared_lock(boost::shared_ptr<boost::shared_mutex>&)’ 
```

I will appreciate if you help me find out what I messed up and how to solve it. thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:07:16.990

该`myLock`成员是一个指针。一个聪明的，但在任何情况下都是一个指针。`shared_lock`构造函数接受对互斥对象的引用，而不是指针。这就是发生错误消息的原因。要解决问题，您必须将指针取消引用为`ReadLock Lock(*myLock);`

# android - Android : Design layout that contain empty field at bottom screen

> ID：15612878
> 
> 赞同：0
> 
> 时间：2013-03-25T10:38:51.770
> 
> 标签：android, layout

I want a layout, that the whole screen is `GridView` but at the "last line" (mean bottom of the screen) will be a textview or button (to display some status). I have design this layout like the code below :

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    android:orientation="vertical"
    tools:context=".DishSelectionFragment" >

   <GridView
        android:id="@+id/gridView2"
        android:numColumns="auto_fit"
        android:gravity="center"
        android:columnWidth="250dp"
        android:stretchMode="columnWidth"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </GridView>

    <TextView
        android:id="@+id/text_price_dish"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:layout_marginTop="2px"
        android:textSize="20px" >
    </TextView>

</LinearLayout> 
```

I have tried add text to textView, but when running in emulator, the text doesn't show. I don't know how to design layout satisfied my purpose. Please help me.

Thanks :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:46:55.303

您看不到 TextView，因为 GridView 占用了整个空间`android:layout_height="fill_parent"` 只需将 GridView 更改如下：

```
<GridView
    [...]  
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
/> 
```

这将使您的 GridView 填充所有剩余空间，而不会将 TextView 推出可见区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:48:42.910

您需要`RelativeLayout`用作父布局并观察添加的属性。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    enter code heretools:context=".DishSelectionFragment">

   <GridView
        android:id="@+id/gridView2"
        android:numColumns="auto_fit"
        android:gravity="center"
        android:columnWidth="250dp"
        android:stretchMode="columnWidth"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        android:layout_above="@+id/text_price_dish" >   <!-- added -->
    </GridView>
    <TextView
        android:id="@+id/text_price_dish"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:layout_marginTop="2px"
        android:textSize="20px"

        android:layout_alignParentBottom="true" >       <!-- added -->
    </TextView>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:47:46.900

`GridView`变化中：

```
android:layout_height="wrap_content" 
```

或者

```
android:layout_above="@+id/text_price_dish" 
```

# android - 滚动 ListView 填充虚拟值

> ID：15612892
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:39:43.727
> 
> 标签：android, listview, scroll

我的列表视图包含一个图像和一些文本视图；有两个包含价格和特价的textiview，如果特价为0，则只设置价格textview和特价让它为空，但特价>0比设置的价格值以及特价，第一次一切顺利但是当我滚动列表视图时，空白文本视图设置为虚拟值`enter code here`

这是我的 getView 方法代码。

```
@Override
public     View     getView(final int position, View convertView, ViewGroup parent){
//public View getView(int position, View convertView, ViewGroup parent) {
    /*View vi = convertView;
    if (convertView == null)
    {
        vi = inflater.inflate(R.layout.list_row, null);
    }
    */
    int pos=position;
    if (convertView == null) {
        convertView = inflater.inflate(R.layout.list_row, null);
        viewHolder=new ViewHolder();
        viewHolder.txt_id = (TextView) convertView.findViewById(R.id.id); // title
        viewHolder.txt_product_name = (TextView) convertView.findViewById(R.id.title); // title
        viewHolder.artist = (TextView) convertView.findViewById(R.id.artist); // artist
                                                                    // name
        viewHolder.txt_mspecialprice_withouttax = (TextView) convertView.findViewById(R.id.duration); // duration
        viewHolder.stock = (TextView) convertView.findViewById(R.id.stck);
        viewHolder.txt_mprice_withouttax = (TextView) convertView.findViewById(R.id.txtmpricewithouttax);

        viewHolder.thumb_image = (ImageView) convertView.findViewById(R.id.list_image); // thumb
                                                                                // image

        convertView.setTag(viewHolder);

    }
    else{
        viewHolder = (ViewHolder) convertView.getTag();
    }

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
    String mspecialprice_str=song.get(CustomizedListView.KEY_PRODUCT_MSPECIAL_WITHOUT_TAX);
    //String substr_mspecialprice_str=mspecialprice_str.substring(1,mspecialprice_str.indexOf("."));
    //String substr_mspecialprice_str_replaced=substr_mspecialprice_str.replace(",", "");

    String msaleprice_str=song.get(CustomizedListView.KEY_PRODUCT_MPRICE_WITHOUT_TAX);
    //String substr_msaleprice_str=msaleprice_str.substring(0,msaleprice_str.indexOf("."));
    //String substr_msaleprice_str_replaced=substr_msaleprice_str.replace(",", "");

    viewHolder.txt_id.setText(song.get(CustomizedListView.KEY_PRODUCT_ID));
    viewHolder.txt_product_name.setText(song.get(CustomizedListView.KEY_PRODUCT_NAME));
    viewHolder.artist.setText(song.get(CustomizedListView.KEY_PRODUCT_DESCRIPTION));
    viewHolder.stock.setText(song.get(CustomizedListView.KEY_STOCK));
    if(mspecialprice_str.equals("0"))
    {
        //txt_mspecialprice_withouttax.setText(song.get(CustomizedListView.KEY_PRODUCT_MSPECIAL_WITHOUT_TAX));
        viewHolder.txt_mprice_withouttax.setText("$"+(song.get(CustomizedListView.KEY_PRODUCT_MPRICE_WITHOUT_TAX)));

        viewHolder.txt_mprice_withouttax.setTextColor(Color.parseColor("#64aef9"));

    }
    //if(!(mspecialprice_str.equals("0")))
    //{
else
{
    viewHolder.txt_mspecialprice_withouttax.setText("$"+(song.get(CustomizedListView.KEY_PRODUCT_MSPECIAL_WITHOUT_TAX)));
    viewHolder.txt_mprice_withouttax.setText("$"+(song.get(CustomizedListView.KEY_PRODUCT_MPRICE_WITHOUT_TAX)));
    viewHolder.txt_mprice_withouttax.setPaintFlags(viewHolder.txt_mprice_withouttax.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
    viewHolder.txt_mprice_withouttax.setTextColor(Color.parseColor("#F01616"));
}

    imageLoader.DisplayImage(
            song.get(CustomizedListView.KEY_PRODUCT_IMAGEURL), viewHolder.thumb_image);

    return convertView;
}
}

class ViewHolder {
TextView txt_id ; // title
TextView txt_product_name; // title
TextView artist ; // artist
                                                            // name
TextView txt_mspecialprice_withouttax; // duration
TextView stock ;
TextView txt_mprice_withouttax;

ImageView thumb_image ; // thumb

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:43:12.777

ListView、GridView 重用用作列表项/网格元素的视图。每次android在滚动视图时尝试绘制下一个元素时都会调用getView()。没有必要阻止它！

**编辑 - [Atrix1987](https://stackoverflow.com/users/1752193/atrix1987)**

来自开发者[文档](http://developer.android.com/reference/android/widget/Adapter.html)

> > Adapter 对象充当 AdapterView 和该视图的基础数据之间的桥梁。适配器提供对数据项的访问。Adapter 还负责为数据集中的每一项创建一个 View。

假设您有 10 个要使用 GridView/ListView 显示的元素，并且最大可见项是 5 个，那么当您滚动时，可以重复使用相同的 5 个视图来显示其余 5 个元素。这是预期的行为，也是做事的正确方法[将视图数量保持在最低限度]。

您无法控制`getView`方法，框架会为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:51:01.573

小`GridView`部件扩展`AdapterView`. 它使用适配器来允许重用视图并提高性能。没有办法避免调用- 这对整个想法`getView()`至关重要。`AdapterView`如果你想要一个静态布局，也许你应该使用别的东西。

# visual-studio-2012 - VS2012 LESS 评论的背景颜色与 Web Essentials

> ID：15612905
> 
> 赞同：0
> 
> 时间：2013-03-25T10:40:26.393
> 
> 标签：visual-studio-2012, comments, less, background-color, web-essentials

VS2012 更新 1，Web Essentials 2.6

使用“工具 > 选项”，CSS 注释的背景颜色设置为某种非白色。如果用“//”编码单行注释，注释的字符颜色正确。但是，评论的空间仍然有白色背景。这使得阅读评论变得困难。

如何正确设置整个评论的背景颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:24:43.683

我们知道 LESS 中的 // 注释存在问题，并且即将修复。导致这种情况的不是 Web Essentials。

# android - org/datanucleus/store/mapped/scostore/JoinSetStore 的类定义在哪里

> ID：15612916
> 
> 赞同：1
> 
> 时间：2013-03-25T10:41:11.893
> 
> 标签：android, google-app-engine, jdo, datanucleus, google-cloud-sql

我正在尝试运行 Data Nucleus+JDO+google cloud sql。但是，我得到了一个找不到 org/datanucleus/store/mapped/scostore/JoinSetStore 的类。什么罐子里有那个？

```
 com.google.api.server.spi.SystemService invokeServiceMethod: null
java.lang.ExceptionInInitializerError
    at com.example.e_math.NoteEndpoint.getPersistenceManager(NoteEndpoint.java:162)
    at com.example.e_math.NoteEndpoint.insertNote(NoteEndpoint.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:43)
    at com.google.api.server.spi.SystemService.invokeServiceMethod(SystemService.java:239)
    at com.google.api.server.spi.SystemServiceServlet.execute(SystemServiceServlet.java:161)
    at com.google.api.server.spi.SystemServiceServlet.doPost(SystemServiceServlet.java:120)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:466)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:473)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:694)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:470)
    at java.lang.Thread.run(Thread.java:679)
Caused by: javax.jdo.JDOFatalInternalException: Unexpected exception caught.
NestedThrowables:
java.lang.reflect.InvocationTargetException
    at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1193)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:1093)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:919)
    at com.example.e_math.PMF.<clinit>(PMF.java:8)
    ... 34 more
Caused by: java.lang.reflect.InvocationTargetException
    at com.google.appengine.runtime.Request.process-a0911210062beea1(Request.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.security.AccessController.doPrivileged(AccessController.java:63)
    at javax.jdo.JDOHelper.invoke(JDOHelper.java:1960)
    at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1166)
    ... 38 more
Caused by: java.lang.NoClassDefFoundError: org/datanucleus/store/mapped/scostore/JoinSetStore
    at com.google.appengine.runtime.Request.process-a0911210062beea1(Request.java)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2406)
    at java.lang.Class.getConstructor0(Class.java:2716)
    at java.lang.Class.getConstructor(Class.java:269)
    at org.datanucleus.plugin.NonManagedPluginRegistry.createExecutableExtension(NonManagedPluginRegistry.java:680)
    at org.datanucleus.plugin.PluginManager.createExecutableExtension(PluginManager.java:301)
    at org.datanucleus.NucleusContext.createStoreManagerForProperties(NucleusContext.java:476)
    at org.datanucleus.NucleusContext.initialise(NucleusContext.java:288)
    at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.freezeConfiguration(JDOPersistenceManagerFactory.java:660)
    at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:326)
    at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:195)
    ... 45 more
Caused by: java.lang.ClassNotFoundException: org.datanucleus.store.mapped.scostore.JoinSetStore
    at com.google.appengine.runtime.Request.process-a0911210062beea1(Request.java)
    ... 53 more 
```

这是我的战争\web-inf\lib ![在此处输入图像描述](../Images/e0a13e7bc5d1b12a92cc40f8b2afd61f.png)

和 jdoconfig

```
<?xml version="1.0" encoding="utf-8"?> 
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/ 
jdoconfig"> 

   <persistence-manager-factory name="transactions-optional"> 
       <property name="javax.jdo.PersistenceManagerFactoryClass" 
           value="org.datanucleus.api.jdo.JDOPersistenceManagerFactory"/> 
       <property name="javax.jdo.option.ConnectionDriverName" 
value="com.google.appengine.api.rdbms.AppEngineDriver"/> 
       <property name="javax.jdo.option.ConnectionURL" 
value="jdbc:google:rdbms://emath-project:myproject/myproject"/> 
<property name="javax.jdo.option.ConnectionUserName"
    value="root"/>

       <property name="javax.jdo.option.NontransactionalRead" 
value="true"/> 
       <property name="javax.jdo.option.NontransactionalWrite" 
value="true"/> 
       <property name="javax.jdo.option.RetainValues" value="true"/> 

       <property name="datanucleus.metadata.validate" value="false"/> 
       <property name="datanucleus.autoCreateSchema" value="true"/> 
       <property name="datanucleus.validateTables" value="true"/> 
       <property name="datanucleus.validateConstraints" value="false"/> 
       <property name="datanucleus.appengine.autoCreateDatastoreTxns" 
value="true"/> 
   </persistence-manager-factory> 
</jdoconfig> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:43:10.710

为什么在 CLASSPATH 中有*datanucleus-rdbms-2.1.0-m3*？

# jpa - 在 JPA 中无状态更新一对多关系的正确方法？

> ID：15612918
> 
> 赞同：2
> 
> 时间：2013-03-25T10:41:21.820
> 
> 标签：jpa, spring-data-jpa

我有一个用于数据模型的 REST 接口，该接口在实体之间具有多个一对多和多对多关系。虽然多对多关系似乎很容易无状态地管理，但我在一对多方面遇到了麻烦。考虑以下一对多关系：

员工：

```
@ManyToOne
@JoinColumn(name = "Company_id")
private Company company; 
```

公司：

```
@OneToMany(mappedBy = "company", cascade = CascadeType.ALL, orphanRemoval=true)
public Set<Employee> employees = new HashSet<Employee>(); 
```

当公司更新时，它的员工集合可能也已更新（删除或添加员工），但由于 REST 接口只允许更新整个公司，我无法明确删除或添加员工。

简单地替换集合是行不通的，但我发现这似乎可行：

```
public void setEmployees(Set<Employee> employee) {
  this.employees.clear(); // magic happens here?
  this.employees.addAll(employees);
  for (Iterator<Employee> iterator = employees.iterator(); iterator.hasNext();) {
    Employee employee = (Employee) iterator.next();
    employee.setCompany(this);
  }
} 
```

这是应该做的方式，还是有更好的方法？

编辑：实际上以上不起作用！一开始它似乎可以工作，但随后会中断：

```
Exception in thread "main" java.lang.IllegalStateException: An entity copy was already assigned to a different entity. 
```

我假设发生这种情况是因为数据库已经包含一组员工，并且如果任何“旧”员工也是替换集的一部分，它们会与数据库中的员工发生冲突。

那么更换套装的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:22:52.610

首先确保正确实施equals。根据休眠规范：[http ://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch04.html#persistent-classes-equalshashcode](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch04.html#persistent-classes-equalshashcode)

我在合并时遇到了类似的问题。本质上，我必须获取与公司相关的现有员工。我必须合并对现有员工的任何更改，然后添加任何新员工。

```
 Query query = em.createQuery("select e from Employee e where e.company = '" + company.getId() + "'");
    Collection<Employee> existingEmployees = new LinkedList<Employee>();
    try{
        Iterables.addAll(existingEmployees, (Collection<Employee>) query.getResultList());
    }
    catch(NoResultException nre){
        //No results
    }

    for(Employee existingEmployee : existingEmployees){
        for(Employee employee : company.getEmployees()){
            if(existingEmployee.name().equals(employee.name())){
                employee.setId(existingEmployee.getId());
            }
            employee.setCompany(company);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:14:04.917

我认为您没有更好的选择来替换现有集合并简单地设置 REST 响应提供的新集合。

# c# - 如何使用 EF 在 MVC Web 应用程序中实现 IoC 容器

> ID：15612927
> 
> 赞同：1
> 
> 时间：2013-03-25T10:41:39.660
> 
> 标签：c#, asp.net-mvc, entity-framework, inversion-of-control

我正试图围绕 IoC 容器。当我深入研究这种设计模式时，我遇到了许多抽象层、接口和具体类，而之前我只是实例化一个数据上下文类，使用它然后处理它。

虽然我很想继续前进，但仍有一些悬而未决的问题我不知道如何解决，希望得到一些澄清和指导。

1.  在具有 2 个项目（包含 ef 的 mvc web 和数据层）的通用 Web 应用程序中，如果我们的依赖解析器需要一个实现特定接口的存储库（允许我们将来随时切换存储库），那么这个接口在哪里定义？我看不到它是如何在 mvc web 项目中定义的，因为这样数据访问层将依赖于它，并且它不能驻留在数据访问层中，因为 mvc 项目依赖于 dal，我错过了整点这个练习的。那么在两个项目中定义它并让每个项目引用自己的副本的答案是什么？..这甚至可能吗？还是我需要创建第三个服务层项目并在其中粘贴一个接口声明并让两个项目都引用它？

2.  我看过很多文章谈论 Unity IoC 的接口，例如 IProductRepository、IClientRepository 和 IProductService、IClientService（这是我在开头段落中提到的）。假设这些实例中的每一个都应该引用我的数据库中的一个表，我是否正确？如果是这样，如果我有 50 张桌子会发生什么？我是否需要创建 50 个存储库接口和 50 个与表相关的接口来解耦所有内容？以及将 EF 与 POCO 类一起使用会如何影响事物？我需要让每个 POCO 实现自己指定的接口吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:58:31.303

理想情况下，您会将解决方案拆分为多个项目。

您将有一个合同项目，其中定义了您的接口，一个实现了这些接口的具体版本的 dal。

然后，您的 mvc 项目将引用contracts 项目来处理对类型的引用。

您将使用 IOC 容器扫描 bin 文件夹中的程序集，并为您的控制器找到依赖项的具体实现。这意味着您会将 dal 构建到 mvc 项目的 bin 文件夹中。这意味着您只需在 bin 文件夹中放置一个新的 dll 即可将 dal 切换为其他实现。

至于存储库和表，我倾向于按业务功能对它们进行分组。因此，管理用户及其相关表的业务功能将在用户存储库等中，但这取决于个人喜好 imo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:24:16.163

当您将项目分成几层时，您不希望您的数据层依赖于堆栈中更靠前的项目是正确的。通常，您希望这些依赖项是单向的。您可以继续您正在做的事情并将接口放在数据层中，或者您可以创建一个新项目来容纳模型代码，包括存储库和服务接口。您的数据层将取决于模型代码，而您的 mvc 层将取决于数据层。

为了解决您的第二个问题，我想说这就是设计艺术的用武之地。您不一定想要实体和数据表之间的一对一映射。如果它有意义并且您认为它是可管理的，尤其是在实体框架的帮助下，那么继续进行一对一映射。但请记住，持久层和领域模型层的职责是不同的。如果持久层开始阻碍您创建领域模型的工作，那么是时候投入一些工作来将两者分开了。

更重要的是要暴露给 mvc 项目的接口“外观”。这些将需要与模型层和持久层进行某种程度的解耦。它们应该被提炼为模型的核心职责。你不想让你的应用层被复杂的领域模型弄得一团糟。

# node.js - 带有代码点火器的节点js

> ID：15612929
> 
> 赞同：4
> 
> 时间：2013-03-25T10:41:43.520
> 
> 标签：node.js, codeigniter-2

我想在我的代码点火器项目中更新网页而不刷新。我将使用节点 js 来完成它。我安装了节点 js。运行节点命令后，我可以通过终端运行js函数。如何使用节点js更新代码点火器网页？

提前致谢。

# java - JSF 1.1：避免转义特殊字母

> ID：15612940
> 
> 赞同：0
> 
> 时间：2013-03-25T10:42:02.860
> 
> 标签：java, jsf, jboss

我正在维护一个使用 JSF 1.1 和 JBoss Portal 创建的遗留应用程序。

我似乎无法弄清楚如何告诉 JSF 不要逃避特殊字母。例如，以下内容：

```
This is a test of Danish letters: æ ø å<br/>
<h:outputText value="Test of Danish letters: æ ø å" escape="false" /><br/>
<f:verbatim>This is a test of Danish letters: æ ø å</f:verbatim> 
```

生产

```
This is a test of Danish letters: &#230; &#248; &#229;<br/>
This is a test of Danish letters: &#230; &#248; &#229;<br/>
This is a test of Danish letters: &#230; &#248; &#229; 
```

（无论转义属性如何，都会发生这种情况）..

现在诚然，页面的编码没有明确说明，但是通过 web.xml 强制所有页面使用 UTF-8 似乎没有任何作用。

当我在我的 javascript 中使用它时，我可以取消转义文本，但是，这需要我事先知道 JSF 将转义哪些字符，因此告诉 JSF 首先逐字输出字符似乎更合适..

有谁知道为什么会发生这种情况以及如何解决？

# spring - Spring Roo 中的电子邮件通知

> ID：15612946
> 
> 赞同：0
> 
> 时间：2013-03-25T10:42:36.227
> 
> 标签：spring, spring-roo, spring-webflow, email

我有一个我正在开发的网络应用程序，它具有管理员和基本用户级别。管理员级别有三个实体，基本用户只允许查看或更改两个级别。当基本用户尝试删除链接到另一个实体的实体条目时，我希望向管理员用户发送一封电子邮件。

任何指导将不胜感激，我也一直在看行动书中的春袋鼠

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:48:26.447

将实体的（静态）删除方法（由 roo 在实体 aj 文件中创建）复制到您的实体中——当然，您必须修复编译器问题。

如果您的实体中有此方法，则 roo 会将其从生成的 aj 文件中删除。

然后您可以在此方法中添加其他功能，例如发送电子邮件。

# node.js - mongodb $where 查询对于 nodejs 始终为真

> ID：15612947
> 
> 赞同：10
> 
> 时间：2013-03-25T10:42:41.293
> 
> 标签：node.js, mongodb

当我使用 nodejs 中“$where”子句中传递的函数查询我的数据库时，它总是返回数据库中的所有文档。

例如，如果我这样做

```
var stream = timetables.find({$where: function() { return false; }}).stream(); 
```

它还给我所有的文件。相反，如果我这样做

```
var stream = timetables.find({$where: 'function() { return false; }'}).stream(); 
```

该函数真的被执行了，并且这段代码不返回任何文档。

问题是，如果我在字符串中转换我的函数，上下文的绑定将被删除，我需要它们来进行更复杂的查询。例如：

```
var n = 1;
var f = function() { return this.number == n; }
var stream = timetables.find({$where: f.toString()}).stream();
// error: n is not defined 
```

这是正常行为吗？我该如何解决我的问题？请原谅我糟糕的英语！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T12:40:24.663

首先，请记住，由于[此处](http://docs.mongodb.org/manual/reference/operator/where/)`$where`解释的原因，几乎不应该使用操作符（感谢 @WiredPrairie）。

回到您的问题，您想要采用的方法即使在 mongodb shell 中也行不通（它明确允许使用`$where`操作员执行裸 js 函数）。提供给`$where`操作员的 javascript 代码在 mongo 服务器上执行，并且无法访问封闭环境（“上下文绑定”）。

```
> db.test.insert({a: 42})
> db.test.find({a: 42})
{ "_id" : ObjectId("5150433c73f604984a7dff91"), "a" : 42 }
> db.test.find({$where: function() { return this.a == 42 }}) // works
{ "_id" : ObjectId("5150433c73f604984a7dff91"), "a" : 42 }
> var local_var = 42
> db.test.find({$where: function() { return this.a == local_var }})
error: {
    "$err" : "error on invocation of $where function:\nJS Error: ReferenceError: local_var is not defined nofile_b:1",
    "code" : 10071
} 
```

此外，node.js 原生 mongo 驱动程序的行为似乎与 shell 不同，因为它不会自动序列化您在查询对象中提供的 js 函数，而是可能完全删除该子句。这将为您留下等效的`timetables.find({})`返回集合中的所有文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-30T11:13:45.950

这对我有用，只需尝试将查询作为字符串存储在一个变量中，然后将您的变量连接到查询字符串中，

> var local_var = 42
> 
> var query = "{$where: function() { return this.a == "+local_var+"}}"
> 
> db.test.find（查询）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-30T11:32:10.197

将您的查询存储到一个变量中，并在您的查找查询中使用该变量。它的工作原理......：D

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-04T13:19:30.963

您可以使用包装器来传递基本的 JSON 对象，即。（请原谅咖啡脚本）：

```
# That's the main wrapper.
wrap = (f, args...) ->
  "function() { return (#{f}).apply(this, #{JSON.stringify(args)}) }"

# Example 1
where1 = (flag) ->
  @myattr == 'foo' or flag

# Example 2 with different arguments
where2 = (foo, options = {}) ->
  if foo == options.bar or @_id % 2 == 0
    true
  else
    false

db.collection('coll1').count $where: wrap(where1, true), (err, count) ->
  console.log err, count

db.collection('coll1').count $where: wrap(where2, true, bar: true), (err, count) ->
  console.log err, count 
```

您的函数将被传递为：

```
function () {
    return (function (flag) {
        return this.myattr === 'foo' || flag;
    }).apply(this, [true])
} 
```

...和示例 2：

```
function () {
    return (
        function (foo, options) {
            if (options == null) {
                options = {};
            }
            if (foo === options.bar || this._id % 2 === 0) {
                return true;
            } else {
                return false;
            }
        }
    ).apply(this, [ true, { "bar": true } ])
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T10:46:17.007

上下文将始终是 mongo 数据库的上下文，因为函数在那里执行。无法在两个实例之间共享上下文。您必须重新考虑查询方式并提出不同的策略。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T11:07:46.417

这就是它应该的样子。驱动程序不会将客户端代码转换为 mongo 函数 javascript 代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T11:19:48.343

我假设您正在使用[Mongoose](http://mongoosejs.com/)来查询您的数据库。

如果您查看实际的 Query 对象实现，您会发现只有*字符串*才是[where 原型](https://github.com/LearnBoost/mongoose/blob/master/lib/query.js#L575)的有效参数。

使用 where 子句时，应与标准运算符（如 gt、lt）一起使用，这些运算符在 where 函数创建的路径中进行操作。

请记住，Mongoose 查询，就像在 Mongo 中一样，是一个示例，您可能希望以更具描述性的方式重新考虑您的查询规范。

# mysql - 将值转换为前 10 位

> ID：15612953
> 
> 赞同：1
> 
> 时间：2013-03-25T10:42:56.383
> 
> 标签：mysql, valueconverter

这是问题所在。我有四列要在选择查询中显示。但是，我希望 RSV 列具有 10-1 的比例，而不是它的 + 和 - 值。最大的数字 +8,6 应该得到 10。底部的几个值可以有 1。我绝对不知道如何解决这个问题......

Nr 是赛马开始编号。一场比赛也可以包含少于十五匹马

```
    Nr RPO RSP RSV

    1 10 9 +5,3
    2 9 10 +8,6
    3 8 7 -2,7
    4 7 8 +3,8
    5 6 4 +4,3
    6 5 6 -1,0
    7 4 5 +3,3
    8 3 1 +6,6
    9 2 1 +2,1
    10 1 1 +3,8
    11 1 3 +2,9
    12 1 2 -2,1
    13 1 1 +1,0
    14 1 1 -1,0
    15 1 1 +2,4

```

最后一列显示输出：

```

Nr RPO RSP RSV RSV 输出
2 9 10 8,6 10
8 3 1 6,6 9
1 10 9 5,3 8
5 6 4 4,3 7
4 7 8 3,8 6
10 1 1 3,8 5
7 4 5 3,3 4
11 1 3 2,9 3
15 1 1 2,4 2
9 2 1 2,1 1
13 1 1 1 1
6 5 6 -1 1
14 1 1 -1 1
12 1 2 -2,1 1
3 8 7 -2,7 1

```

```
SELECT *
FROM rank
ORDER BY Nr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:55:53.297

你可以使用这样的东西：

```
SELECT
  Nr, RPO, RSP, RSV,
  CASE WHEN @row>1 THEN @row:=@row-1 ELSE 1 END RSVOutput
FROM
  yourtable, (SELECT @row:=11) rows
ORDER BY
  RSV DESC 
```

请[在此处](http://sqlfiddle.com/#!2/f688d/3)查看小提琴。

# java - 尽管处理了异常，但 IOException 停止了应用程序

> ID：15612954
> 
> 赞同：0
> 
> 时间：2013-03-25T10:42:56.477
> 
> 标签：java

有时当我打开一个流时：

```
stream = url.openStream();
BufferedReader buffReader = new BufferedReader(new InputStreamReader(stream)); 
```

我得到以下异常：

```
java.io.IOException: 
    Server returned HTTP response code: 500 for URL: https://... 
```

尽管我正在处理异常，但我的应用程序结束了：

```
catch (IOException ioe) {
    ioe.printStackTrace();
} 
```

有人可以向我解释为什么 catch 块没有进入，尽管它是一个 IOEcxeption 吗？

谢谢

编辑（附加代码；-）

```
private String request(URL url) {

    InputStream stream = null;
    String line, response = new String();

    try {
        stream = url.openStream();
        BufferedReader buffReader = 
            new BufferedReader(new InputStreamReader(stream));

        while ((line = buffReader.readLine()) != null)
            response += line;

    } catch (MalformedURLException mue) {
        mue.printStackTrace();
    } catch (HTTPException httpexc) {
        httpexc.printStackTrace();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } finally {
        try {
            stream.close();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }

    return response;
} 
```

我经常在我的应用程序中运行这段代码，只是有时我得到提到的异常。

这是堆栈跟踪的一部分：

```
java.io.IOException: Server returned HTTP response code: 500 for URL: ...
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
at java.net.URL.openStream(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:13:46.933

您的异常处理中有一个错误。如果调用中抛出异常`openStream()`，则`finally`块将尝试调用`close()`引用`null`，您将获得 NPE。

这可以解释您所看到的行为：

1.  `openStream()`失败。
2.  `catch (IOException ioe) {ioe.printStackTrace();}`打印堆栈跟踪。
3.  该`finally`块抛出一个NPE，导致`request()`异常终止。
4.  如果`request()`调用在没有“未捕获的异常处理程序”的某个线程上运行，则该线程可能会由于 NPE 而静默死亡。

# html - Outlook 2007/2010 用表格打破水平列

> ID：15612960
> 
> 赞同：0
> 
> 时间：2013-03-25T10:43:18.747
> 
> 标签：html, css, outlook, html-table, html-email

我已经建立了一封电子邮件，其中包含由“宝丽来”样式边框和标题包围的图像。为此，我用白色背景围绕图像构建了一个表格，除 Outlook 2007 和 2010 外，一切正常。这是它的外观（Outlook 2011 版本）：

![在此处输入图像描述](../Images/87d10781f9b9ebdcd3ca7a30a430f815.png)

这是它在 07/10 中的显示方式，将表格推出页面宽度并大大增加表格的宽度：

![在此处输入图像描述](../Images/4fc58054a4a6eecacb385346fbe6a514.png)

这是我使用的代码 - 表格是唯一导致问题的元素：

```
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnImageBlock" style="border-collapse: collapse;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
    <tbody class="mcnImageBlockOuter">
        <tr>
            <td valign="top" style="padding: 9px;border-collapse: collapse;mso-table-lspace: 0pt;mso-table-rspace: 0pt;" class="mcnImageBlockInner">
                <table align="left" width="100%" border="0" cellpadding="0" cellspacing="0" class="mcnImageContentContainer" style="border-collapse: collapse;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                    <tbody>
                        <tr>
                            <td class="mcnImageContent" valign="top" style="width:164px;background-color:white;padding-right: 9px;padding-left: 9px;padding-top: 9px;padding-bottom:9px;border-collapse: collapse;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                <table>
                                    <tr>
                                        <td style="max-width:160px;border: 1px solid #b3b3b3;">
                                            <img mc:edit="product 1" class="mcnImage" width="100%" style="max-width:160px;">
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td valign="top" mc:edit="Caption 1" class="mcnTextContent" style="padding-top: 9px;padding-right: 18px;padding-bottom: 9px;padding-left: 18px;border-collapse: collapse;mso-table-lspace: 0pt;mso-table-rspace: 0pt;background-color:white;font-family: Helvetica;font-size: 11px;line-height: 150%;text-align: left;">
                                <center>&nbsp;</center>
                            </td>
                        </tr>
                        <tr>
                            <td valign="top" style="padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;border-collapse: collapse;mso-table-lspace: 0pt;mso-table-rspace: 0pt;background-color:white;text-align: left;">
                                <img align="center" height="18" src="http://gallery.mailchimp.com/004beaebbdbc9392458d4bde2/images/shadow.1.gif" style="height: 18px;width:100%;">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T14:27:16.170

尝试使用以下代码（我建议将其用作嵌入式样式），这始终可以解决我的许多 Outlook 2007/2010/2013 间距问题：

表 td {边框折叠：折叠；} 表 { 边框折叠：折叠；mso-table-lspace：0pt；mso-table-rspace：0pt；}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:48:19.187

您的表格的宽度被设置为 [其父容器的] 的 100%。

```
<table ... width="100%" ...></table> 
```

完整的代码没有给出，但我只能假设它的父级的宽度大于上面内容的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:59:12.873

您不能在 HTML 电子邮件中可靠地使用 css 类或 ID。

您应该只使用内联 css 样式，甚至将它们保持在最低限度，以确保最大的电子邮件客户端兼容性。

我也不认为使用 max-width 属性会给你带来任何好处。我建议使用常规宽度和高度 html 标记简单地设置图像的实际高度宽度。

这是 html 电子邮件的一个很好的参考：

[http://kb.mailchimp.com/article/how-to-code-html-emails](http://kb.mailchimp.com/article/how-to-code-html-emails)

# graph - 网络中最近的医院

> ID：15612961
> 
> 赞同：0
> 
> 时间：2013-03-25T10:43:19.677
> 
> 标签：graph, graph-algorithm

我有一个代表一个城市的图表。一些顶点是医院。该图已连接。

我正在寻找一种**算法，它可以为我提供从任何给定节点到最近医院的路径（甚至距离）。**

人们可以考虑计算所有最短路径，但我认为它们可能是一种更聪明的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:49:21.003

我想您需要查看[warshall 的最短路径算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)。
这是算法

```
let dist be a |V| × |V| array of minimum distances initialized to ∞ (infinity)
for each vertex v
   dist[v][v] ← 0
for each edge (u,v)
   dist[u][v] ← w(u,v)  // the weight of the edge (u,v)
for k from 1 to |V|
   for i from 1 to |V|
      for j from 1 to |V|
         if dist[i][k] + dist[k][j] < dist[i][j] then
            dist[i][j] ← dist[i][k] + dist[k][j] 
```

上面的算法在左下图执行

[1]：[http](http://i.stack.imgur.com/3J7Sb.png)
**://i.stack.imgur.com/3J7Sb.png 参考：wikiPedia** *（链接在答案的开头）*
更多详细信息请访问链接

# matlab - 在 MATLAB 中获取向量中的绝对峰值位置

> ID：15612965
> 
> 赞同：1
> 
> 时间：2013-03-25T10:43:31.460
> 
> 标签：matlab, matrix, plot

假设我有这样的 A 矩阵：

```
A =    [0,0,0,0,0,0,106,10,14,20,20,23,27,26,28,28,28,23,28,28,21,18,106,14,12,
17,16,15,22,19,20,18,21,23,23,18,17,15,106,28];

>>  plot(A) 
```

我想要这个数据集中的峰值索引。我在这个例子中寻找的答案是一个矩阵，当您将“数据光标”放在绝对峰值上时，它包含曲线中的那些 x 值。

我想要的答案是：`K = [7 23 39]`这是山峰的位置。

当我`plot`在 MATLAB 中使用该命令时，峰值清晰可见。如何找到绝对峰值的 x 值？可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:10:09.030

这不会给你所有的峰值，但它会给你集合中的最大值：

```
max_locations = find(A==max(A)) 
```

如果要查找峰值，请使用 findpeaks 函数：

```
[peakVal,peakLoc]= findpeaks(A); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T02:56:46.073

如果您想要最多 5 或 10 个峰，请使用以下

```
[peakVal,peakLoc]= findpeaks(A,'sort','descend'); 
```

# android - 相机意图显示后标签没有响应

> ID：15612971
> 
> 赞同：1
> 
> 时间：2013-03-25T10:44:14.857
> 
> 标签：android

我有 SherlockFragmentActivity 和两个 sherlockFragment Tab 管理 TabListener。

在第一个片段选项卡中，我有一个打开 ACTION_IMAGE_CAPTURE Intent 的按钮，以便从相机捕获图像。当 onActivityResult 被调用时，我会正确接收图像，但是如果我点击第二个选项卡，则此选项卡不会选择，只有在我点击第一个选项卡中的任何 editText 时才会被选中，在这种情况下，选项卡被选中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:47:47.897

如果您正在使用 Eclipse IDE，请尝试清理您的项目（Project-> Clean）。当您尝试此选项时，通常会清除上述故障。希望能帮助到你！

# javascript - JQuery - 字符串列表

> ID：15612973
> 
> 赞同：7
> 
> 时间：2013-03-25T10:44:19.513
> 
> 标签：javascript, jquery

在 JQuery 中，为什么我会得到`information Undefined`以下代码？

> JS - 右侧部分未定义

```
var s = $("[name='CountAnswer']").val(); 
```

HTML

```
<input style="width:150px" type="text" id="CountAnswer_1_" name="CountAnswer[1]">
<input style="width:150px" type="text" id="CountAnswer_2_" name="CountAnswer[2]">
<input style="width:150px" type="text" id="CountAnswer_3_" name="CountAnswer[3]"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T10:45:12.740

您正在使用相等比较，但您必须使用通配符，可能 j[查询属性以开头，](http://api.jquery.com/attribute-starts-with-selector/) `^`但上面的语句将给出第一个匹配元素的值。您可以使用 each 来遍历所有元素。

```
var s = $("[name^='CountAnswer']").val(); 
```

[使用each()](http://api.jquery.com/each/)进行迭代。

**[现场演示](http://jsfiddle.net/ajean/)**

```
$("[name^='CountAnswer']").each(function(){
   alert($(this).val());
   //or
   alert(this.value);
}); 
```

**编辑**基于 OP 评论。用于获取所有匹配项的值。

**[现场演示](http://jsfiddle.net/ajean/1/)**

```
strValues = $("[name^='CountAnswer']").map(function(){  
   return this.value;
}).get().join(','); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T10:45:16.947

因为您没有名称为 == 的元素`CountAnswer`。您需要指定一个特定的名称，例如：

```
$("[name='CountAnswer[1]']").val(); 
```

或者，您可以使用“Begins With”通配符 ( `^`) 来匹配名称以 开头的所有元素`CountAnswer`：

```
$("[name^='CountAnswer']").val(); 
```

当然，这只会返回匹配集中第一个元素的值，因为这是`val()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T10:53:58.630

[jsFiddle 演示](http://jsfiddle.net/zHWmG/1)

您应该为您的字符串值设置一个数组，然后在某些事件中使用 jquery 部分匹配选择器["starts with"(^)](http://api.jquery.com/attribute-starts-with-selector/)来迭代由您的姓名表示的输入列表。

演示html：

```
<input value="a" style="width:150px" type="text" id="CountAnswer_1_" name="CountAnswer[1]">
<input value="b" style="width:150px" type="text" id="CountAnswer_2_" name="CountAnswer[2]">
<input value="c" style="width:150px" type="text" id="CountAnswer_3_" name="CountAnswer[3]">
<br><input type="button" id="b" value="show string list" /><div id="console"></div> 
```

演示js：

```
var stringList = [];
$('#b').click(function(){
 stringList = [];
 $("[name^='CountAnswer']").each(function(){
  stringList.push(this.value);
 });
 var c = $("#console");
 for( var i = 0; i < stringList.length; i++ ){
    var d = $("<div>");
    d.html(stringList[i]);
    c.append(d);
 }
 console.log(stringList);
}); 
```

# ios - Phonegap IOS - 即使html文件为空，当我尝试滚动主页时 也会出现滚动条

> ID：15612974
> 
> 赞同：8
> 
> 时间：2013-03-25T10:44:20.320
> 
> 标签：ios, cordova

我只是使用终端创建了一个 IOS Phonegap 应用程序，然后在 config.xml 中更改 UIWebViewBounce t= false，并删除正文中的所有内容，并删除所有 CSS 数据。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello World</title>
   <script type="text/javascript" src="cordova-2.4.0.js"></script>
</head>
<body>

</body>
</html> 
```

这是我的 HTML 页面，我的 index.css 是空的，我的 Phonegap 版本是 2.4。然后我运行应用程序： ![应用程序运行](../Images/57d844b5eb48235a1dc56bb6dd44de60.png)

当我尝试滚动空白页面时，会出现一个滚动条： ![应用程序使用滚动条运行](../Images/234f721d11fd3395a7373760e01fbd9b.png)

为什么？谁能帮帮我吗？

**更新已解决：只需从元标记中删除 height=device-height 或删除状态栏 **

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T06:53:02.820

是的，这是由于设备状态栏的原因，我也遇到了这个问题，它需要将近 20px 的窗口高度。最好确保您已选中 xcode Targets 中的“隐藏状态栏”选项。

![在此处输入图像描述](../Images/82b71303ab9647dacd5a7eb5d434829b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T03:19:17.027

这些解决方案都不适合我。我不得不在 XCode 项目中手动禁用 iOS 的 WebView 的 ScrollView 的 ScrollIndicator。

```
self.webView.scrollView.showsVerticalScrollIndicator = NO; 
```

# c# - 将业务逻辑生成的唯一值插入数据库

> ID：15612982
> 
> 赞同：1
> 
> 时间：2013-03-25T10:44:44.423
> 
> 标签：c#, sql, sql-server

在我的业务逻辑中，有一个函数通过随机函数创建一个唯一值（它是一个会话 id）。

我必须确定，在将会话 ID 存储到数据库之前，它们是唯一的。所以我正在生成新的会话 id，直到我找到一个，它还没有在数据库中。但是在检查数据库中现有的会话 ID 和编写它之间可能存在竞争条件。

数据库中的写入和读取功能使用两个不同的连接。我该如何管理？

我不能使用自动增量，因为下一个会话应该是不可猜测的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:50:03.630

我认为您可以创建此列`UNIQUE`（添加数据库约束），尝试插入新行并检查它是否会返回有关重复值的错误。考虑到重复非常罕见，这可能是最快和最安全的方法。

# asp.net-mvc - 如何通过 MVC / Membershipprovider 使用异步等待功能

> ID：15612985
> 
> 赞同：1
> 
> 时间：2013-03-25T10:44:49.457
> 
> 标签：asp.net-mvc, parsing, asp.net-membership, asp.net-4.5

我想使用[Parse Library](https://www.parse.com/)对用户进行身份验证。

这是我想让它成为异步的方法，因为 api 调用仅支持异步调用。我是 MVC 和 aysc/await 功能的新手。现在的问题是它进入 await 方法并且永远不会返回结果并且无法加载视图。

我花了很多时间理解并尝试使用不同的选项，但还没有成功。

我需要使用 Partialviews 还是可以在 ValidateUser 方法中完成某些事情。任何示例代码都非常感谢。谢谢。

AccountController.cs

```
 public ActionResult Login(LoginModel model, string returnUrl)
    {

             if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
                {
                    var loggedIn = true;
                }
        return  View(model);
    } 
```

ParseMembershipProvider : ExtendedMembershipProvider

```
public override bool ValidateUser(string username, string password)
    {

        var pUserRepo = new PUserRepository();
        bool flag = false;
        var requiredUser = pUserRepo.GetUserObjByUserName(username, password );

        if (requiredUser.Result != null)
            flag = true;

        return flag;

    } 
```

PUserRepository.cs

```
 public async  Task<ParseUser> GetUserObjByUserName(string userName, string passWord)
{
    return await ParseUser.LogInAsync("test1", "test123");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:57:17.107

[由于我在我的博客上解释，](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)`Result`您看到了僵局情况。

不幸的是，会员提供者（还）不知道`async`。所以尝试`ConfigureAwait(false)`在你的方法中到处使用`async`：

```
public async  Task<ParseUser> GetUserObjByUserName(string userName, string passWord)
{
  return await ParseUser.LogInAsync("test1", "test123").ConfigureAwait(false);
} 
```

（与您拥有的任何其他`async`方法相同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T09:35:38.163

解决方案是

```
return Task.Run(() => ParseUser.LogInAsync(userName, passWord)).Result; 
```

所以基本上我有异步方法调用的同步包装器。我从[文章](http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx)中了解到，这还取决于 Parse 库中的函数如何使用 await 或 configureawait(false)。

# jquery - jQuery 事件单击嵌套 div

> ID：15612986
> 
> 赞同：1
> 
> 时间：2013-03-25T10:44:50.147
> 
> 标签：jquery, javascript-events

我有一个页面可以动态加载内容。

这是**page_ONE.php生成的恢复HTML代码**

```
<body>
<script type="text/javascript">
    $(document).ready(function() {
    $(document).on('click', "#contentarea_ONE a", function(ev) { 
            ev.preventDefault();
            ev.stopPropagation();
            ev.stopImmediatePropagation();
            $('#contentarea_ONE').load($(this).attr('href'));
            return false;
    });
    });
</script>
<div id="contentarea_ONE">
</div>
</body> 
```

我有几乎相同的**page_TWO.php**和**page_THREE.php**代码，只需将一个更改为两个或三个对应的位置。

我在每个页面中都有按钮，允许我在 #contentarea_ONE 中加载**page_TWO.php ，在 #contentarea_TWO****中**加载page_THREE.php 。

Firebug 将其显示为导航器内存中的 HTML：

```
<body>
<script type="text/javascript">
    $(document).ready(function() {
    $(document).on('click', "#contentarea_ONE a", function(ev) { 
            ev.preventDefault();
            ev.stopPropagation();
            ev.stopImmediatePropagation();
            $('#contentarea_ONE').load($(this).attr('href'));
            return false;
    });
    });
</script>
<div id="contentarea_ONE">

<div id="contentarea_TWO">

<div id="contentarea_THREE">

</div>
</div>
</div>
</body> 
```

好吧，这就是问题所在：当我以这种嵌套方式加载三个页面时，**当我单击**`<a href="xxx/yyy">` **div #contentarea_THREE 内**的链接时，虽然我希望内容加载在 contentarea_THREE 内，但内容会**加载到 div #contentarea_TWO 内**。

为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:57:16.777

你可以试试这个：

```
$(document).ready(function() {
    $(document).on('click', '[id^="contentarea_"] a', function(ev) { 
        ev.preventDefault();
        ev.stopPropagation();
        $(this).closest('[id^="contentarea_"]').load($(this).attr('href'));
    });
}); 
```

首先看看你所有的 div 都以相同的 id 首字母开头，或者我可能会说它们有`contentarea_`共同点。所以尝试使用 attr 选择器，当您单击此 div 内的链接时，然后尝试找出最近的具有相同 id 首字母的 div`$(this).closest('[id^="contentarea_"]')`并执行加载。

# javascript - 使用prototype.js 停止表单提交

> ID：15612987
> 
> 赞同：0
> 
> 时间：2013-03-25T10:44:50.483
> 
> 标签：javascript, forms, prototypejs

似乎存在问题或我不知道如何停止使用prototypejs提交表单。也许有人可以帮助我解决我面临的问题

考虑这个简单的形式

```
<form id="formContact" method="post">
    <p>Name:
        <br />
        <input type="text" id="name" name="yourName" size="20" />
    </p>
    <p>E-mail:
        <br />
        <input type="e-mail" name="yourEmail" size="20" />
    </p>
    <p>Message:
        <br />
        <textarea cols="20" rows="10" name="yourMessage"></textarea>
    </p>
    <p>
        <input type="submit" value="Submit this form" name="submitButton" />
    </p>
</form> 
```

[以及来自原型手册http://prototypejs.org/doc/latest/dom/Event/stop/](http://prototypejs.org/doc/latest/dom/Event/stop/)的这个小 js 片段

```
Event.observe('formContact', 'submit', function (event) {
    var login = $F('name').strip();
    if ('' == login) {
        Event.stop(event);
        // Display the issue one way or another
    }
});

$('formContact').submit(); 
```

所有这一切都在小提琴中：http: [//jsfiddle.net/C3eFu/2/](http://jsfiddle.net/C3eFu/2/)

现在的问题是，如果单击按钮，它会完全停止表单，但在使用 javascript 提交表单时不会。？这是原型未能阻止事件的 1% 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:11:29.873

简单的方法是更改`type="submit"`​​为`type="button"`然后捕获按钮的单击事件，或者您可以捕获提交事件：

```
function stopDefAction(evt) {
     evt = evt || event;
     if (evt.preventDefault) {
          evt.preventDefault();
     }
     else {
          evt.returnValue = false;
     }
} 
```

请参阅：[IE 9 中的停止事件（无需升级到 Prototype 1.7）](https://stackoverflow.com/questions/8291805/stop-event-in-ie-9-without-upgrading-to-prototype-1-7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:11:14.753

根据很多谷歌搜索，显然在`.submit()`调用方法时不会在表单上触发 onsubmit 事件。这不是缺少 PrototypeJS，而是更多的是 Javascript 中尚未修复的行为。

`onsubmit`您可以通过调用处理程序然后观察事件是否停止然后决定触发提交来使您的代码按照您希望的方式运行`method()`

# python - Python在项目中查找文本

> ID：15612988
> 
> 赞同：0
> 
> 时间：2013-03-25T10:44:51.703
> 
> 标签：python

我想为以下情况找到最佳解决方案：
我有以下项目：哪些
`item1`包含`test1`，`test2`
`item2`哪些包含`test3`，哪些包含`test4`
，哪些包含 ，以及
`item3``test5`
`superItem``item1``item2``item3`

我应该使用哪些方法来获得以下结果；
我有一个变量`check`，其中包含`test1`
我想在`result`变量中接收`item1`...

换句话说：我想接收包含与变量相同的文本的项目名称`check`

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:48:10.303

使用字符串项和列表理解的简单版本：

```
item1 = ["test1", "test2"]
item2 = ["test3", "test4"]
item3 = ["test5"]
superItem = [item1, item2, item3]

check = "test1"
result = [item for item in superItem if check in item]

>>> result
[["test1", "test2"]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:16:26.070

我利用列表理解的实现。列表名称（'itemn'）存储在 superItem 字典中，因此您可以在需要时获取它。

```
item1 = ["test1", "test2"]
item2 = ["test3", "test4"]
item3 = ["test5"]

superItem = {
    'item1': item1,
    'item2': item2,
    'item3': item3
}

check = "test1"

result = [x for x in superItem if check in superItem[x]]

print result 
```

性能测试：

```
$ time python2.7 sometest.py 
['item1']

real    0m0.315s
user    0m0.191s
sys 0m0.077s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:56:03.767

我假设您会将这些变量保存在字典中，如下面的代码所示。

```
container = {
    'item1': {'test1', 'test2'},
    'item2': {'test3', 'test4'},
    'item3': {'test5'}
}
    }
check = 'test1'

for key in container:
    if check in container[key]:
        break

result = container[key]
print result 
```

**编辑**

我为你添加了套装 - 你`{ }`为它们使用。

# r - 读取 CSV 文件时不添加列

> ID：15612991
> 
> 赞同：0
> 
> 时间：2013-03-25T10:44:56.360
> 
> 标签：r

我有这个玩具数据集，在一个`CSV`文件中：

```
NAME, VAL1, VAL2, VAL3
due,2,2,2
tre,3,3,3
qua,3,4,3
cin,4,6,7
ddd,2,5,7
qse,7,6,5 
```

我使用以下命令读取它： data <- read.csv("path\to\file", head=TRUE, sep=",")

然后，如果我尝试打印`data`，我会得到：

```
 NAME VAL1 VAL2 VAL3
1  due    2    2    2
2  tre    3    3    3
3  qua    3    4    3
4  cin    4    6    7
5  ddd    2    5    7
6  qse    7    6    5 
```

我不想要第一列，我想要与`mtcars`数据集格式相同的东西，在第一列中我有标签。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:47:49.167

`row.names=1`内使用`read.csv`：

```
read.csv(header=TRUE, row.names=1, text="NAME, VAL1, VAL2, VAL3
    due,2,2,2
    tre,3,3,3
    qua,3,4,3
    cin,4,6,7
    ddd,2,5,7
    qse,7,6,5")

#     VAL1 VAL2 VAL3
# due    2    2    2
# tre    3    3    3
# qua    3    4    3
# cin    4    6    7
# ddd    2    5    7
# qse    7    6    5 
```

# asp.net - 我里面有网格和超链接列。如果条件为真，如何防止重定向？

> ID：15612999
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:45:30.837
> 
> 标签：asp.net, hyperlink, grid

此超链接列显示了一些计数器。如果计数为 0，我在此列中写“N/A”。我需要将此单元格从超链接转换为常规文本或其他内容。主要思想是，这个字段不应该看起来像超链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:49:32.340

要使超链接不跟随链接，您必须在 javascript 事件上返回 false`onclick`

在 asp.net 上，您可以这样做：

```
<asp:Hyperlink runat="server" OnClientClick="return CanIGo();" /> 
```

并使用 javascript

```
<script>
function CanIGo()
{
   if(contitionToAllowClick)
      return true;
   else
      return false;
}
</script> 
```

用户界面的其余部分留给您。您可以显示一条消息、更改样式并使其看起来像文本，或者您喜欢的任何内容。