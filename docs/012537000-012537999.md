# StackOverflow 问答 12537000-12537999

# javascript - 在屏幕上查找线的位置

> ID：12537001
> 
> 赞同：1
> 
> 时间：2012-09-21T19:28:29.493
> 
> 标签：javascript, html, css, dom, android-webview

因此，我在浏览器中呈现了 HTML 文本（在本例中为 Android WebView）。我想找出任何给定文本行的（x，y）位置（以像素为单位）在 渲染**之后是什么。**我正在使用的行的工作定义不仅仅是标签中包含的所有文本`<p>`或出现在`<br>`标签之前的所有文本。我的意思是用户看到的一条线。

我对任何建议的方法持开放态度。

是否有任何 CSS 属性可以让您找到 div 中的行数及其各自的高度？这将提供一个可行的解决方案。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:41:31.383

您不能单独访问一条线路。但是，使用一些 JavaScript，您可以找到具有已知索引的行的位置；这是一个基本的大纲：

```
var p = document.getElementById("ptag"); //get the text container that contains your line
var nthline = 3; //the line for which you'd like to find the position
var lnheight = parseInt(window.getComputedStyle(p).lineHeight); //get the height of each line
var linepos = [p.offsetLeft, p.offsetTop + lnheight * (nthline - 1)]; //a [left, top] pair that represents the line's position 
```

**注意：**这假设容器除了文本什么都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:50:43.903

没有标准的方法，你必须参考你的想象力并发明一些技巧，现在我可以想到两个想法：

1.  将每个单词括在一个跨度内，例如`<span class="word">word</span>`，这可以很容易地用正则表达式或字符串函数完成，稍后循环每个`<span>`读取它的位置，添加一些计算，你可以找出一行开始的行数（增加它的`top`位置的单词从最后一个）和一行结束时（行的最后一个单词+该单词的宽度）。

2.  使用`:first-line`伪元素将一些样式应用于第一行，例如

    p:first-line{ 背景颜色：白色；/* 相同的现有颜色，所以不影响显示*/ }

    稍后在 DOM 中查找应用了该样式的文本。这个想法不如第一个好，但也许它可以让你想到其他方式。

# oracle - 将存储过程从 oracle 导入 Informatica

> ID：12537002
> 
> 赞同：1
> 
> 时间：2012-09-21T19:28:46.867
> 
> 标签：oracle, stored-procedures, oracle10g, informatica-powercenter, informatica

我必须将存储过程从 Oracle 数据库导入 Informatica。但是当我尝试使用存储过程转换时，我无法查看相应的存储过程。我正在使用正确的 oracle 驱动程序，因为我在导入目标数据库表时没有任何问题。我尝试使用查看 oracle 数据库中的存储过程， `select * from all_objects where object_type='FUNCTION'`但找不到我要查找的函数。请就这些问题给我建议：

*   我们可以查看Oracle中存储过程/函数的列表和代码吗

*   我在 Informatica 存储过程转换中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:37:41.853

1.  将对象导入 Informatica 时，列出的对象始终归“连接”用户所有。如果您的对象由其他用户拥有，您将看不到它。要查看不属于连接用户的对象，您必须在连接时在模式文本框中选择“全部”。

2.  您应该寻找 object_type='PROCEDURE' 而不是“FUNCTION”。因此，您的查询应为`select * from all_objects where object_type='PROCEDURE'`

3.  如果所有这些都完成了，但您仍然看不到该对象，请检查该对象对您的连接用户的权限。为此，最好的课程是a。要求您的 dba 将该对象的执行权限授予您的连接用户。或 b。以该对象的所有者身份连接到数据库并运行以下命令 `grant execute on <object_name> to <connecting_user>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:00:09.683

如果你没有得到任何结果..

```
select * from all_objects where object_type='FUNCTION' 
```

这要么意味着您没有任何功能，要么当前用户没有执行任何功能的权限。找出哪个用户拥有该功能并授予以下权限。

例子 ：

```
grant execute on <owner>.<function_name> to ETL_USER; 
```

为避免混淆，请确保 informatica 连接中的用户名与连接数据库时使用的用户名相同。

# android - 如何将片段添加到 pageViewer？

> ID：12537005
> 
> 赞同：0
> 
> 时间：2012-09-21T19:29:05.453
> 
> 标签：android

我在[这里](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)关注一些示例代码。我试图了解实例化片段然后将其添加到 ViewPager 所涉及的步骤。

我想我理解 Fragments.add() 将片段添加到 ViewPager。我不确定我是否理解 Fragment.instantiate() 的作用。[Android 文档](http://developer.android.com/reference/android/app/Fragment.html#instantiate%28android.content.Context,%20java.lang.String%29)说它需要一个“上下文”来实例化。这意味着什么？

```
private void setupViewPager() {

    List<Fragment> fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, FragmentTab1.class.getName()));
    fragments.add(Fragment.instantiate(this, FragmentTab2.class.getName()));
    fragments.add(Fragment.instantiate(this, FragmentTab3.class.getName()));

    this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);
    //
    this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
    this.mViewPager.setAdapter(this.mPagerAdapter);
    this.mViewPager.setOnPageChangeListener(this);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:37:02.047

上下文用于获取类加载器，即用于从包中检索容器活动的类加载器。

[http://developer.android.com/reference/android/app/Fragment.html#instantiate(android.content.Context](http://developer.android.com/reference/android/app/Fragment.html#instantiate(android.content.Context) , java.lang.String, android.os.Bundle)

# xpath - XPath 中较长的节点

> ID：12537014
> 
> 赞同：2
> 
> 时间：2012-09-21T19:29:57.467
> 
> 标签：xpath

我想使用 XPath 来检索两个节点中较长的一个。

例如，如果我的 XML 是

```
<record>
   <url1>http://www.google.com</url1>
   <url2>http://www.bing.com</url2>
</record> 
```

我做 document.SelectSingleNode( *your XPath here* )

我希望取回 url1 节点。如果 url2 更长，或者没有 url1 节点，我希望取回 url2 节点。

看起来很简单，但我很难弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:02:03.143

这对我有用，但很难看。不能在 XPath 之外进行比较吗？

```
record/*[starts-with(name(),'url')
         and string-length(.) > string-length(preceding-sibling::*[1])
         and string-length(.) > string-length(following-sibling::*[1])]/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:42:48.233

```
<xsl:for-each select="*">
  <xsl:sort select="string-length(.)" data-type="number"/>
  <xsl:if test="position() = last()">
    <xsl:copy-of select="."/>
  </xsl:if>
</xsl:for-each> 
```

甚至可以在 XSLT 1.0 中使用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:43:37.493

**使用这个单一的 XPath 表达式**：

```
 /*/*[not(string-length(preceding-sibling::*|following-sibling::*)
          >
          string-length()
          )
       ] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/*[not(string-length(preceding-sibling::*|following-sibling::*)
              >
              string-length()
              )
         ]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<record>
    <url1>http://www.google.com</url1>
    <url2>http://www.bing.com</url2>
</record> 
```

**对 Xpath 表达式求值，并将该求值的结果（选定元素）复制到输出**：

```
<url1>http://www.google.com</url1> 
```

# ruby - Git 推送到 Heroku，收到“指定的 RUBY_VERSION 无效：”

> ID：12537018
> 
> 赞同：2
> 
> 时间：2012-09-21T19:30:09.693
> 
> 标签：ruby, git, heroku, rubygems

我正在尝试使用“git push heroku master”将应用程序推送到heroku。

在我的 Gemfile 中，我有以下内容：

```
source 'https://rubygems.org'

ruby 'ruby 1.9.3' 
gem 'foreman' 
```

但是当我尝试推送到heroku时，出现以下错误：

```
!     Invalid RUBY_VERSION specified: Gemfile-syntax-error:-<!DOCTYPE-html>-^-/tmp/build_o93twnijmxig/Gemfile:5:-syntax-error,-unexpected-'<'-<html>-^-/tmp/build_o93twnijmxig/Gemfile:7:-syntax-error,-unexpected-'<'-<meta-charset='utf-8'>-^-/tmp/build_o93twnijmxig/Gemfile:8:-syntax-error,-unexpected-'<'-<meta-http-equiv="X-UA-Compatible"-content="IE=edge">-^-/tmp/build_o93twnijmxig/Gemfile:8:-syntax-error,-unexpected-tIDENTIFIER,-expecting-$end-<meta-http-equiv="X-UA-Compatible"-content="IE=edge">-^

!     Valid versions: ruby-1.9.3-p0, ruby-1.9.3-p125, rbx-1.2.4, rbx-2.0.0dev-20120115-1.9, rbx-2.0.0dev-20120115-1.8, rbx-2.0.0dev-20120123-1.9, rbx-2.0.0dev-20120123-1.8, ruby-1.9.2-p290, jruby-1.6.5.1, jruby-1.6.7, ruby-1.9.3, ruby-1.9.2, ruby-1.8.7, ruby-1.9.3-jruby-1.7.0.preview1, ruby-1.8.7-jruby-1.7.0.preview1, ruby-1.9.3-rbx-2.0.0dev, ruby-1.8.7-rbx-2.0.0dev
!
!     Heroku push rejected, failed to compile Ruby app 
```

当我输入：heroku config -s | grep PATH 我得到以下输出：

```
PATH=bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin 
```

并运行： heroku run "ruby -v" ，输出：

```
Running `ruby -v` attached to terminal... up, run.1
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-linux] 
```

但是当我尝试在 app 目录中运行 bundle install 时，我收到了这个奇怪的消息：

```
 Your Ruby version is 1.9.3, but your Gemfile specified ruby 1.9.3 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T19:32:57.307

```
source 'https://rubygems.org'

ruby '1.9.3' 
gem 'foreman' 
```

# jquery - 悬停在 IE9 中无法使用 iFrame

> ID：12537023
> 
> 赞同：2
> 
> 时间：2012-09-21T19:30:27.317
> 
> 标签：jquery, iframe, internet-explorer-9, hover

我正在使用使用 jQuery 的 CSS3 MegaMenu。我的下拉菜单项之一使用 iFrame 来显示托管在其他地方的联系表单。

你可以在这里看到：http: [//www.deepdata.biz](http://www.deepdata.biz)（这是右侧主导航栏上的最后一项：“电子邮件”）

它工作正常，除了在 IE9 中，悬停可以将其放下，但是一旦鼠标进入 iFrame 区域，它就会消失，使用户无法填写表格。

我读过这是出于安全原因而故意这样做的-但必须有解决方法。

当我自己的表单没有 iFrame 并使用 CSShover3.htc 时，我最初遇到了这个问题，它在 IE 中运行良好，所以我相当确定这是一个 iFrame 问题。

在搜索时，我已经阅读了使用 Javascript 的解决方案：http: [//jsfiddle.net/ENXpW/3/](http://jsfiddle.net/ENXpW/3/) - 但我对编写 Java 的缺乏经验阻碍了我对它的充分理解以适应我的需要。

我搜索的另一个解决方案是将“电子邮件”链接的悬停样式更改为 onClick 命令，但是我缺乏 Javascript 经验再次阻碍了我掌握如何做到这一点。

任何帮助将不胜感激。载具

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:43:19.393

您可以使用这个小的 jQuery 片段和一些 CSS 修改：

```
if($.browser.msie){
    $("li.right iframe").hover(function(){ 
        $(this).parents("li.right").trigger("hover");
    });
} 
```

加载元素后，将其放在 JS 文件或页面中的任何位置。

然后，您需要创建每个的副本，`.menu li:hover`以便它也被 .hover 类触发，即

`.menu li:hover .align_right {`

需要变成：

`.menu li:hover .align_right, .menu li.hover .align_right {`

# mysql - MySQL 注入命令

> ID：12537026
> 
> 赞同：0
> 
> 时间：2012-09-21T19:30:38.483
> 
> 标签：mysql

可用于在代码中进行注入的所有 MySQL 命令是什么？

我禁用了 UNION 和 CONCAT。

我有一个非常基本的应用程序，所以不需要任何复杂的查询，那么我还能禁用什么来确保注入不是问题？

是的，据我所知，我已经清理了所有变量。问题是它是一个多方参与的项目，我注意到在一些我被委托使用的库中有些草率的工作。

我正在考虑让所有帖子变量对它们进行消毒并将它们放回原处，但由于某些帖子变量的复杂多维性质，这将是一项相当复杂的任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T19:35:45.663

几乎任何类型的 SQL 语句都可以进行注入。
避免注入的唯一安全方法是使用准备好的语句并将数据绑定到查询参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:40:30.253

您不能简单地禁用关键字，请查看以下示例：

SELECT id FROM user WHERE name='*' AND password = ' **`whatever' OR password <> '`**'

您需要先转义用户输入，然后再将其添加到 SQL 语句（例如`mysqli_real_escape_string()`）。更好的是使用 PDO 准备好的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:34:29.450

> [...] 确保注射不是问题？

那是做不到的。如果 SQL 注入是*可能的*，那么它们就是一个问题。

# ninject - Ninject 不注入依赖

> ID：12537034
> 
> 赞同：0
> 
> 时间：2012-09-21T19:31:29.877
> 
> 标签：ninject

我的 Ninject 构造有问题。可能有人可以告诉我我在哪里做错了..

好的..这是我拥有的模块：

```
public class WebPageModule:NinjectModule
        {
            public override void Load()
            {
                Bind<TranscriptPageMediaWidgetViewModelForWebPage>().ToSelf().InSingletonScope();
                Bind<TranscriptPageTranscriptWidgetViewModelForWebPage>().ToSelf().InSingletonScope();
                Bind<WebPageTranscriptProvider>().ToSelf().InSingletonScope();

                Bind<ITranscriptProvider>().To<WebPageTranscriptProvider>().WhenInjectedInto<TranscriptPageTranscriptWidgetViewModelForWebPage>();

                //Bind<ITranscriptProvider>().To<WebPageTranscriptProvider>();
                Bind<ITranscriptRendererWidget>().To<TranscriptPageTranscriptWidgetViewModelForWebPage>();
                Bind<IMediaRendererWidget>().To<TranscriptPageMediaWidgetViewModelForWebPage>();
            }
        } 
```

然后在 NinjectWebCommons.cs 我有：

```
private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel(new WebPageModule(),new TweeterModule(), new BookmarkModule());
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
            kernel.Settings.AllowNullInjection = true;//http://stackoverflow.com/questions/10517962/using-default-parameter-values-with-ninject-3-0

            RegisterServices(kernel);
            return kernel;
        } 
```

然后我使用属性注入： [https ://github.com/ninject/ninject/wiki/Injection-Patterns](https://github.com/ninject/ninject/wiki/Injection-Patterns)

在我的“公共课 TranscriptPageTranscriptWidgetViewModelForWebPage : ITranscriptRendererWidget”

这里是：

```
 [Inject]
        public ITranscriptProvider TranscriptProvider
        {
            get { return _transcriptProvider; }
            set { _transcriptProvider = value; }
        } 
```

但是，当我进入构造函数并尝试使用 _transcriptProvider 时，它为 NULL：

```
 public TranscriptPageTranscriptWidgetViewModelForWebPage(string dataEndpoint, string focusCue)
        {
            InitParentInterfaceProperties();
            Transcript = _transcriptProvider.GetTranscript(new Uri(dataEndpoint));
            FocusCue = focusCue.Replace("*", "").ToLower();
        } 
```

任何想法我做错了什么？谢谢！铝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:53:26.860

看起来您正在尝试访问构造函数中的属性。

.NET 的对象创建语义使得这根本无法工作（这是努力通过构造函数注入来实现目标的众多充分理由之一，除非您真的在处理可选的依赖项）

# asp.net - 是否可以将 gridview 列绑定到单独的数据源？

> ID：12537039
> 
> 赞同：0
> 
> 时间：2012-09-21T19:31:53.503
> 
> 标签：asp.net

首先，从两个对象开始。

```
Object
{
    int id {get; set;}
    string description {get; set;}
}

ObjectName
{
    int id {get;set;}
    string name {get;set;}
} 
```

假设我有你的平均网格视图：

```
List<Object> = GetListOfObjects();
MyGridview.DataSource = List<Object>; 
```

但我希望其中一列来自名称列表，其中 id 相同。

伪代码：

```
the ID column from MyGridview = List<ObjectNames>.Where(x=> x.id = myGridview.Id); 
```

因此，基本上，将 ID 列替换为具有这些 ID 的名称列。那有可能吗？我将如何处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:04:58.517

您需要使数据成为一个数据源。您可以创建一个匿名类型来保存来自两个集合的数据。

```
var combined = from x in myobjects
               join y in myobjectnames on x.id equals y.id
               select new {
                  Id = x.Id,
                  Name = y.Name,
                  // any other data you need  
               } 
```

# jquery - 动态div依次上下定位

> ID：12537044
> 
> 赞同：0
> 
> 时间：2012-09-21T19:32:02.773
> 
> 标签：jquery, css

![图片，我想要达到的目标](../Images/334645ac5bd94f778a148fd3773a4cfe.png) 图像，我想要实现的目标。

用户可以创建包含内容和项目的卡片。用户还可以评论项目和卡片本身。然后我需要的是显示图片中的评论。我用plumb.js 制作的连接线。我可以用 jQuery 将 Div 放在右边

`$('#c' + comment.id).position({ my: "left top", at: "right top", of: $('#'+comment.parent), collision: "none" });`

在数据库中，我存储评论父元素 ID。例如：“card item 1” ID 是 i95（i = item，95 是从 db 自动递增）。

问题：

*   我无法确定“用户对第 2 项的评论”CSS 位置。
*   如果一个项目有两个或更多评论，那么我如何在评论后发表评论？jQuery position() 属性冲突没有帮助。（评论互相顶）。（这是最大的问题）
*   如果评论被评论，那么我需要在右侧发表评论。

我从服务器女巫那里得到的卡片和评论是三个 JS 对象。（一个是卡片，一个是项目和评论）。首先我抽卡，然后是项目，然后是评论。在评论对象中，我有卡 ID、父 ID。在评论对象中评论没有任何顺序。

一个想法是让列表按照评论顺序排列。我知道卡片中列出的项目的顺序。然后我可以遍历评论对象并检测当前卡片有多少评论，然后查找：

1.  卡片评论
2.  卡片评论评论
3.  项目 no1 评论
4.  项目 no1 评论 评论
5.  项目 no2 评论,,,, 等等

然后将项目添加到 DOM，计算每个评论高度，然后计算所有位置..

但也许有更好的方法来实现这一点......我不在乎 IE 浏览器:)

服务器端是node.js，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:12:27.853

答案就在这里。[http://jsfiddle.net/63es7/](http://jsfiddle.net/63es7/)我无法在 jsfiddle 上添加 jsplumb 连接。我在 div 上添加了碰撞检测。不是一个很好的解决方案，但我正在努力:)

# c# - CurrentThread.CurrentUICulture - 如何通过 excel VBA 设置

> ID：12537054
> 
> 赞同：1
> 
> 时间：2012-09-21T19:32:32.143
> 
> 标签：c#, excel, regional-settings, currentculture, vba

CurrentThread.CurrentUICulture - 通过 C# 我们可以设置这个值，但是否可以通过 VBA 设置它。在 xla 文件中..

# c# - HttpRequestHeader cookie 格式

> ID：12537064
> 
> 赞同：8
> 
> 时间：2012-09-21T19:33:30.777
> 
> 标签：c#, .net, http, web

HttpRequestHeader.Cookies 需要指定哪种格式？Fe，如果我想添加名为 CITY 且值为 NY 的 cookie，我应该如何使用 WebClient.Headers.Add() 方法来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T19:39:27.420

试试这个样本

```
 WebClient wb = new WebClient(); 

    wb.Headers.Add(HttpRequestHeader.Cookie, "CITY=NY"); 
```

对于许多 cookie：

```
wb.Headers.Add(HttpRequestHeader.Cookie, "cookiename1=cookievalue1; cookiename2=cookievalue2"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T19:36:10.477

添加 cookie 是最好和最容易使用的`Response.Cookies.Add();`

```
HttpCookie myCookie = new HttpCookie("lastVisit");
myCookie.Value = DateTime.Now.ToString();
myCookie.Expires = DateTime.Now.AddDays(1);
Response.Cookies.Add(myCookie); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:36:03.897

[标头](http://msdn.microsoft.com/en-us/library/y280s7kx.aspx)。添加：

```
 myWebHeaderCollection.Add("CITY","NY"); 
```

[以下是您的 Cookie 标头在rfc 6265](http://www.rfc-editor.org/rfc/rfc6265.txt)末尾的样子：

```
Cookie: CITY=NY; 
```

# python - 启动和停止服务器脚本

> ID：12537067
> 
> 赞同：1
> 
> 时间：2012-09-21T19:33:43.333
> 
> 标签：python, bash, jmeter

我一直在构建一个性能测试套件来运行服务器。现在我手动运行它，但我想自动化它。在目标服务器上，我运行一个 python 脚本，该脚本记录服务器指标并在我按 Enter 时停止。在测试机器上，我运行了一个 bash 脚本，它遍历 JMeter 测试、设置时间戳和命名日志并执行测试。

我想将它们联系在一起，以便 bash 脚本驱动整个过程，但我不确定如何最好地做到这一点。我可以通过 ssh 启动我的 python 脚本，但是如何在测试完成后停止它？如果我可以在 ssh 中做到这一点，那么我不需要弄乱现有的配置，这是一个很大的胜利。python 脚本非常简单，如果有帮助，我不介意重写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:43:17.420

最简单的解决方案可能是让 Python 脚本响应信号。当然，如果不需要任何清理，您可以只 SIGKILL 脚本，但是让脚本实际处理关闭请求似乎更干净。SIGHUP 可能是一个受欢迎的选择。文档[在这里](http://docs.python.org/library/signal.html)。

您可以使用`kill`命令发送信号，因此只要您知道脚本的 pid，就可以通过 ssh 发送信号。这个问题的通常解决方案是在启动脚本时将 pid 放在 /var/run 中的文件中。（如果你有一个 Debian/Ubuntu 系统，你可能会发现你有这个`start-stop-daemon`实用程序，它可以在这里完成很多繁重的工作。）

另一种代码密集度更高的方法是在某个已知位置创建一个 fifo（命名管道），并基本上像您当前使用标准输入一样使用它：服务器等待来自管道的输入，当它得到它识别为命令的东西，它执行命令（例如“退出”）。就您的目的而言，这可能有点矫枉过正，但它的优势在于它是一个比单一的锤击更清晰的沟通渠道。

# xmlhttprequest - WebRequest 从非预期页面获取响应

> ID：12537076
> 
> 赞同：0
> 
> 时间：2012-09-21T19:34:45.340
> 
> 标签：xmlhttprequest

当我浏览到 [http://www.ivolatility.com/calc/?ticker=MSFT](http://www.ivolatility.com/calc/?ticker=MSFT)

...我打算查看他们的股票代码“基本计算器”屏幕（例如微软：“MSFT”）。

但是，在获得之前，我会看到一个许可协议页面，要求我在继续之前单击“我同意”按钮。

我的目标是编写将下载基本计算器页面的 HTML 源代码的代码。不幸的是，当我执行下面的 VBScript 代码时，我得到了许可协议页面的 HTML。

在这里，我使用了 VBScript，但我会接受几乎任何语言的答案。

这是我的代码。任何人都可以帮忙吗？谢谢！

```
Dim oHttp
Set oHttp = CreateObject("MSXML2.XMLHTTP")
oHttp.open "GET", "http://www.ivolatility.com/calc/calc.j?ticker=MSFT", False
oHttp.send
WScript.Echo(oHttp.responseText) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:04:52.597

问题解决了。

我的代码有两个问题。一：进入CreateObject，我应该已经通过了“MSXML2.ServerXmlHttp”。我最初传递的类型有一个错误，阻止它（至少有时）发送 cookie。第二，我在 setRequestHeader 上的语法不正确。它应该是：oHttp.setRequestHeader "Cookie", "CALCULATOR_DISCLAIMER_BASIC=agree"

# c - 在 ANSI C 中使用 WinAPI 和 DWMApi

> ID：12537082
> 
> 赞同：0
> 
> 时间：2012-09-21T19:35:24.480
> 
> 标签：c, winapi, c89, dwm

我有一个关于为 Windows 编写应用程序的问题。在 ANSI C 中编程时，我可以使用 WinAPI 和 DWMApi（航空玻璃、色带等）吗？我现在正在看 MSDN，他们使用 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:55:34.190

Windows API 是一个 C API，可以与任何支持“标准”调用约定的编译器一起使用。

不过，Microsoft 已做出战略决定，将他们自己的 C 编译器置于生命支持中，而在使用 Visual Studio 时，您会被 C90（带有一些特定扩展名）卡住。您可以使用支持更多现代语言方言的 3rd 方编译器（通过 MinGW、Pelles C 的 GCC 和 Clang）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:41:58.403

尝试一下。

大多数 API 实际上是 C-API；他们只是称它为 C++，因为“没有人”真的不再使用 C。我还注意到偶尔带有附加功能的结构，但绝对不是在 Win32 中，对于 C 语言，它们可能只是#ifdef。

我现在不知道的是，仅与 C 一起使用时标头是否“安全”，以及库是否具有未损坏的符号。我会假设他们是，但永远不知道。但是，制作一个只调用单个 Win32 API 函数的简单 C 程序应该澄清这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:07:16.217

Win32 API 可以从许多不同的工具集中访问。我遇到的所有 Windows 的 C 编译器都可以调用所有 Win32 API。更重要的是，所有这些 C 编译器都可以调用 COM API 甚至 GDI+，这是一个非常以 C++ 为中心的库。但是 MS 提供了一个供 C 客户端使用的桥梁。

因此，总而言之，选择使用 C 不会剥夺您对 Win32 任何部分的访问权限。

# mahout - seq2sparse 似乎忽略了我的“-x”参数的值

> ID：12537089
> 
> 赞同：1
> 
> 时间：2012-09-21T19:35:51.230
> 
> 标签：mahout

我在伪分布式 hadoop 安装上使用 mahout 0.7 进行测试。

我正在做的很多事情都是由 Mahout in Action 指导的，我知道它处理 0.5，但据我所知，seq2sparse 没有任何重大变化。

我对 seq2sparse 生成的 tfidf 向量有疑问。无论我将“-x”（最大文档频率百分比）设置为什么，我最终都会在字典中得到相同数量的术语，以及相同大小的向量。

我发现一篇关于 mahout 0.6 的帖子，其中 -x 被解析为绝对数量的文档，而不是文档的百分比。这应该在 0.7 中得到修复，但我也尝试以这种方式使用它，只是为了看看它是否有帮助。我得到的条款数量没有变化。这是我尝试过的值，以及我最终得到的术语数量。我的数据集是 4850 篇维基百科文章，来自：[http ://dumps.wikimedia.org/enwiki/20110803/](http://dumps.wikimedia.org/enwiki/20110803/)

确切的文件是： pages-articles1.xml.bz2

xml 文件被转换为 seqfile，其中包含：

```
mahout seqwiki -all -i <path to xml file> -o <path to output directory> 
```

我对 seq2sparse 的调用如下所示：

```
mahout seq2sparse -i <seq directory> -o <out dir> -ow -wt tfidf -x 4800 -nv 
```

我的结果：

```
|-x value| #of terms |
|4800    |  256623   |
|4600    |  256623   |
|2500    |  256623   |
|99      |  256623   |
|90      |  256623   |
|25      |  256623   |
|5       |  256623   | 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:02:00.610

我最终在 mahout 用户邮件列表上问了这个问题并得到了答案。我会在这里为任何想知道与我相同的人复制它：

Dave Byrne - “maxDFPercent 实际上不会从字典中删除术语，也不会减小 tfidf 向量的大小。它只是将向量的值设置为该术语的 0。

换句话说，字典大小和向量长度将保持不变，非零项更少。”

# entity-framework - 在 EF5.0 中映射外键

> ID：12537099
> 
> 赞同：0
> 
> 时间：2012-09-21T19:36:21.767
> 
> 标签：entity-framework, c#-4.0, ef-code-first

我有下表作为我的实体

```
public class Customer
{
  public int CustId{get;set;}
  public string Name {get;set;}
}

public class Address
{
  public int Id{get;set;}
  public string Name {get;set;}
   **public virtual Customer Customer {get;set;}**
} 
```

在我使用 Fluent API 的地址模型配置中。我有以下代码

```
HasKey(p => p.Id);
HasRequired(p => p.Customer).WithMany().Map(m => m.MapKey("CustId")); 
```

我真正想要的不是使用 **公共虚拟客户 Customer {get;set;}** 我想要拥有 Public Int CustID; 地址类中的属性...并且仍然将映射
作为外键进行。

有人可以提出一些建议吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:44:32.837

您只需要将属性添加到您的地址类：

```
public class Address
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int CustId { get; set; }

    public virtual Customer Customer { get; set; }
} 
```

然后更新你的流利，而不是使用 .map 函数使用 .HasForeignKey 函数：

```
 modelBuilder.Entity<Address>()
            .HasRequired(p => p.Customer)
            .WithMany()
            .HasForeignKey(p => p.CustId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:02:53.617

或者，您可以使用 DataAnnotations：

```
public class Address
{
    [Required, Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public string Name { get; set; }
    public int CustId { get; set; }
    [ForeignKey("CustId")]
    public Customer Customer { get; set; }
} 
```

# c++ - C++中的二分查找

> ID：12537100
> 
> 赞同：-4
> 
> 时间：2012-09-21T19:36:22.777
> 
> 标签：c++

基本上，我需要找出如何在屏幕上输出值，以实现二进制搜索的成功部分。我试图更改的初始值，`last`但它要么崩溃，要么保持不变。我逐步浏览了代码，一切似乎都正常。

**来自编译器的程序示例**

```
#include<iostream>

using namespace std;

void binarySearch();

int main()
{
    //Called the function in main
    binarySearch();
    system("pause");
    return 0;
};

//void function for binary Search
void binarySearch()
{
      //creating array
      int array[100];
       array[0] = 1;
       int i,target;
      // using Boolean to create pattern for generated numbers in the array
      bool check = false;

      //loop to implement pattern
      for (int x = 1; x < 100; x++)
      {
        if (check == true)
        {
           array[x] = array[x - 1] + 1;
           check = false;
        }
        else
        {   
           array[x] = array[x - 1] + 2; 
           check = true;

        }
       }

     **Code found online and modified to fit**  

  int first,mid,last,completed,successful,tests;
  completed = 0;
  successful = 0;
  tests = 0;
  double percentage;
  percentage = 1;

  for(int x=0;x<100;x++)
  {
    // Initialize first and last variables.
    first = 0;
    last = 2;
    srand( (unsigned)time( NULL ) );      
    int target = (rand() % 150) + 1;

    while(first <= last)
    {
       mid = (first + last)/2;

       if(target > array[mid])
       {
          first = mid + 1;
          tests++;          
       }
       else if(target < array[mid])
       {
          last = mid + 1;
          tests++;
       }
       else
       {
          first = last - 1;
       }
       if(target == array[mid])
       {
          successful++;
       }
    }
    completed++;
  } 

**Area which the error occur No value for successful**
//Output on screen
cout << endl;
cout << "There were "<< completed <<" searches completed."<< endl; 
cout << "There were "<< successful <<" successful searches." << endl; 
cout << percentage <<"%"<<" of the searches were successful." << endl; 
cout << "There was an average of " << completed << " tests per search." << endl;
cout << endl;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:13:16.310

我想我会先将代码分解成更小的部分，我至少希望能够理解每一部分。我不够聪明，无法确定我理解和你一样大的“块” `binarySearch`。

它看起来像这样：

```
 int array[100];
   array[0] = 1;
   int i,target;
  // using Boolean to create pattern for generated numbers in the array
  bool check = false;

  //loop to implement pattern
  for (int x = 1; x < 100; x++)
  {
    if (check == true)
    {
       array[x] = array[x - 1] + 1;
       check = false;
    }
    else
    {   
       array[x] = array[x - 1] + 2; 
       check = true;

    }
   } 
```

应该初始化一个数组，所以我把它放在一个单独的函数中，然后稍微简化一下。首先进入一个函数：

```
int init(int array[100]) {
   array[0] = 1;
   int i,target;
  // using Boolean to create pattern for generated numbers in the array
  bool check = false;

  //loop to implement pattern
  for (int x = 1; x < 100; x++)
  {
    if (check == true)
    {
       array[x] = array[x - 1] + 1;
       check = false;
    }
    else
    {   
       array[x] = array[x - 1] + 2; 
       check = true;

    }
   }
} 
```

然后简化：

```
int init(int *array) { 
    array[0] = 1;

    for (int i=1; i<100; i++)
        array[i] = array[i-1] + 1 + (i&1);
} 
```

然后我会对以下的二进制搜索部分做大致相同的事情`binarySearch`：

```
while(first <= last)
{
   mid = (first + last)/2;

   if(target > array[mid])
   {
      first = mid + 1;
      tests++;          
   }
   else if(target < array[mid])
   {
      last = mid + 1;
      tests++;
   }
   else
   {
      first = last - 1;
   }
   if(target == array[mid])
   {
      successful++;
   } 
```

并简化：

```
int *binary_search(int const *left, int const *right, int *tests, int val) { 
    int const *mid = left + (right - left)/2;

    while (left < right) {
        ++*tests;
        if (val < *mid)
            right = mid;
        else
            left = mid + 1;
    }
    return left;
} 
```

最后，您需要代码生成一个随机数、搜索它、跟踪搜索次数的统计信息以及成功的次数等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:13:22.137

你有几个问题。

首先，正如我评论的那样，您没有`last`正确初始化。

其次，在这种`else if(target < array[mid])`情况下，您没有`last`正确修改。您正在设置`last = mid + 1;`，但您需要改为设置`last = mid - 1;`

接下来，您没有正确退出循环。如果 first > last，则仅退出 while 循环，但应退出一次`target == array[mid]`；也许战略`break;`声明会有所帮助。

当我进行这三项更改时，应用程序每次都会运行直到完成，但是我会收到 0 次或 100 次成功的搜索——两者之间什么都没有。

不过，这应该足以让您走得更远。

# java - Windows 7中的Android模拟器令人难以置信的慢

> ID：12537103
> 
> 赞同：4
> 
> 时间：2012-09-21T19:36:29.483
> 
> 标签：java, android, android-emulator

我有一个不错的 PC 桌面，可以运行我所有的开发应用程序、Visual Studio、SQL Server 实例运行、Eclipse、Spring Eclipse 等......一切都相当快。

但是当我运行一个简单的、小的、空的 android hello world 应用程序时，Android 启动需要 3 分钟或更长时间！！！我不相信我是唯一遇到这种情况的人？我不想每次都在设备中运行......通常它在模拟器中很方便运行，就像我使用 XCode 到 iPhone 模拟器一样......

有什么经验吗？解决技巧？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:37:53.933

您可以使用[android-x86](http://www.android-x86.org/)（[有用的帖子](http://www.mat-d.com/site/developing-android-apps-with-android-x86-and-virtual-box/)）。x86 端口比模拟器运行得更快，但我建议使用真实设备来避免特定于模拟器的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:41:08.207

Android 模拟器，尤其是较旧的模拟器，速度非常慢。这是因为他们不仅必须在操作系统中运行操作系统，而且还必须在 x86 或 x64 处理器上模拟 ARM 处理器架构。这使他们相当缓慢。

但是，您确实获得了适用于 ICS 的英特尔映像，这些映像专为 x86 构建并且运行速度更快。您也可以尝试使用较旧的模拟器。它们逐渐变慢到蜂窝状。您还可以尝试增加模拟器 RAM 并获得较小的速度提升。

除此之外，您可以让模拟器在启动后继续运行，这样测试您的应用程序会更快，因为您不需要每次都启动它。

但是，我个人建议在设备上进行测试，因为在模拟器上进行调试时永远无法获得相同的质量和准确性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:12:43.360

有一个名为 Bluestacks 的 Android 模拟器，您也可以将其用于应用程序。在您的 PC 上玩 Android 游戏的开发较少，但如果您不介意在非标准启动器环境中测试您的应用程序，那么它非常快。

您甚至可以按照以下步骤使用它来调试和从 Eclipse 访问 DDMS：

1.  打开 Bluestacks
2.  在命令提示符的“平台工具”文件夹中，键入“adb connect 127.0.0.1”
3.  尝试从 Eclipse 运行您的应用程序或调试，您应该会看到为 Bluestacks 列出的新设备。

它没有与普通模拟器相同类型的硬件/环境模拟，因此它不适合测试所有应用程序，但我尽可能使用它，因为普通模拟器令人头疼。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T20:26:32.867

到目前为止，还没有解决方案......我必须购买一个连接来运行我的应用程序以使开发可行

# javascript - Simple Dojo 检测操作系统、浏览器和浏览器版本问题

> ID：12537106
> 
> 赞同：1
> 
> 时间：2012-09-21T19:36:36.193
> 
> 标签：javascript, dojo

我在 Dojo 上玩了几天，我在 [https://gist.github.com/3763422有一些代码](https://gist.github.com/3763422)

这可行，但我宁愿只有一个带有 id 的段落标签，该标签根据嗅探检测到的内容获取该数组内部的浏览器名称的值。我尝试了各种方法，但似乎没有任何效果。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:54:34.783

您实际上并不需要 Dojo 来执行此操作。只是探索`navigator`对象。输入JavaScript 控制台`navigator`并回车。

它应该给你这样的东西：

```
Navigator
  appCodeName: "Mozilla"
  appName: "Netscape"
  appVersion: "5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17"
  cookieEnabled: true
  doNotTrack: null
  geolocation: Geolocation
  language: "en-US"
  mimeTypes: MimeTypeArray
  onLine: true
  platform: "MacIntel"
  plugins: PluginArray
  product: "Gecko"
  productSub: "20030107"
  userAgent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17"
  vendor: "Google Inc."
  vendorSub: "" 
```

什么是标准，什么不是您可以在 MDN 上找到 - [https://developer.mozilla.org/en-US/docs/DOM/window.navigator](https://developer.mozilla.org/en-US/docs/DOM/window.navigator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:41:09.547

你的意思是这样的吗？

```
 arrayUtil.forEach(["ie", "mozilla", "ff", "opera", "webkit", "chrome"], function(n){
    var p = document.createElement("p");
    p.innerHTML = makeFancyAnswer(n);
    dom.byId("myParagraph").appendChild(p);
 }); 
```

这将在节点 myParagraph 内创建多个段落

# jquery - 没有数据加载到jqGrid时如何将groupColumnShow设置为false？

> ID：12537111
> 
> 赞同：0
> 
> 时间：2012-09-21T19:37:17.750
> 
> 标签：jquery, jqgrid

我有一个没有数据初始化的网格，但在一些用户交互后会加载数据。我的网格还使用“分组”功能，例如：

```
ordersGrid.jqGrid({
    url: '',
    mtype: '',
    datatype: 'local',
    colNames: ['Order', 'Task #', 'Type', 'Status', 'Assignee', 'Current Location',
        'Dest Location', 'Change No', 'Net Patched', 'SAN Patched', 'Select'],
    colModel: [
        { name: 'Order', index: 'Order ID'},
        { name: 'Task #', index: 'Task #'},
        { name: 'Type', index: 'Type'},
        { name: 'Status', index: 'Status'},
        { name: 'Assignee', index: 'Assignee'},
        { name: 'Current Location', index: 'Current Location'},
        { name: 'Dest Location', index: 'Dest Location'},
        { name: 'Change No', index: 'Change No'},
        { name: 'Net Patched', index: 'Net Patched'},
        { name: 'SAN Patched', index: 'SAN Patched'},
        { name: 'Select', index: 'Select', width:'75px', classes: "SelectColumn",
            editable: true, edittype:'checkbox', editoptions: {value:"True:False"},
            formatter:"checkbox", formatoptions: {disabled: false}}
    ],
    gridview: true,
    height: 'auto',
    pager: ordersGridPager,
    viewrecords: true,
    grouping: false, //Set to true once data is loaded.
    groupingView: {
        groupField: ['Order'],
        groupColumnShow: [false]
    },
    loadError: function(error) {
        console.error(error);
    }
}); 
```

如果我在网格初始化期间将属性“分组”设置为 true，我会在页面上看到以下错误：

```
Uncaught TypeError: Cannot read property 'stype' of undefined 
```

如果在将分组设置为 true 之前网格上有数据，则不存在此错误。如果我将分组设置为假，一切都很好。

问题是即使没有数据，我也不想看到我的“订单”列。我怎样才能做到这一点？

这是一个解决问题的 JS Fiddle：http: [//jsfiddle.net/qrjZD/1/](http://jsfiddle.net/qrjZD/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:54:57.623

产生错误的主要问题是`index`在列中使用属性`Order`值不等于`name`属性值。在本地网格 ( `datatype: 'local'`) 的情况下，您永远不应该这样做。

下一个问题是您使用`name`了包含特殊字符的属性：空格和`#`. 不建议这样做，因为 name 属性将用于构造`id`网格的某些元素的属性。

请参阅此处的固定代码：http: [//jsfiddle.net/qrjZD/3/](http://jsfiddle.net/qrjZD/3/)。

# java - 按类名查询实体

> ID：12537114
> 
> 赞同：1
> 
> 时间：2012-09-21T19:37:26.257
> 
> 标签：java, google-app-engine, objectify

进行全类名查询`Objectify`以获取实体，有可能吗？就像我想查询`class com.mypackage.MyClass`获取实体并对其字段进行进一步查询时一样。

**编辑：**

例如：

```
daot.ofy().query(Class.forName("com.mypackage.MyClass")); 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:46:51.357

你改写的问题的答案是： **是的**

# haskell - 在 Haskell 中使数据类型成为 Show 的实例

> ID：12537120
> 
> 赞同：13
> 
> 时间：2012-09-21T19:38:03.187
> 
> 标签：haskell, types, tree, instance, show

我需要将以下数据类型设为以下数据类型的实例`Show`：

```
data Tree a b = Branch b (Tree a b) (Tree a b) | Leaf a 
```

我对此很陌生，但首先，我将此声明解释为

“我们创建了一个新类型，称为 Tree，它使用类型 a 和 b 进行参数化。一棵树可以是以下两种情况之一：一个持有 b 类型数据的分支，再加上两棵树，或者一个持有a 类型的数据项。”

现在，我需要找到一种方法来很好地“显示”它（嵌套分支等），而不使用`deriving`. 到目前为止，我只在模块 Main 中编写函数并在解释器窗口中加载/播放它们，所以我之前实际上并没有用构造函数等做过事情。尽管如此，我想我可以从在我的文件中声明树数据类型开始，如问题开头所示，然后从那里开始。

当我搞砸“显示”但没有取得多大成功时，我想也许我需要定义树的一个小组件以及如何首先“显示”它，然后再尝试使用整个树：

```
data Leaf a = Leaf a

instance Show (Leaf a) where
show (Leaf a) = ??? 
```

我在???中尝试了很多东西 点，例如“a”，只有 a 本身，putStrLn 等，但是当我说类似的话时，没有一个会打印出 a 的值

```
>show (Leaf 3) 
```

事实上，我在很多情况下都遇到过这种情况，这可能意味着我没有正确定位：

```
Ambiguous occurrence `show'
    It could refer to either `Main.show', defined at a2.hs:125:1
                          or `Prelude.show',
                             imported from `Prelude' at a2.hs:2:8-11
                             (and originally defined in `GHC.Show') 
```

...我通过调用“Main.show”来解决这个问题，这当然不起作用。

我想问题是，我该去哪里处理这一切……或者只是，“我怎样才能修复 Leaf “Show” 实用程序，以便弄清楚如何扩展它？” （假设我必须先定义它......）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-21T19:43:37.520

你必须这样开始：

```
data Tree a b = Branch b (Tree a b) (Tree a b) | Leaf a

instance (Show a, Show b) => Show (Tree a b) where
    show (Leaf x) = show x
    show (Branch p l r) = ??? 
```

为了`show`a `Tree a b`，您必须首先能够`show` `a`s和`b`s。这就是该`(Show a, Show b) =>`部分的作用，它指定了您的实例工作所需的先决条件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T08:44:50.977

这是一个小提示：通过写作

```
 instance Show (Leaf a) where
 show (Leaf a) = ??? 
```

您*实际上*所做的是定义一个*空* `Show`实例，然后是一个顶级`show`函数。这就是为什么你会得到“模棱两可`show`”的错误；您定义了一个新`show`函数，其名称与现有函数冲突。

你想说的*是*

```
 instance Show (Leaf a) where
   show (Leaf a) = ??? 
```

注意第二行现在是如何缩进的。这意味着您正在重新定义现有`show`方法，正如您可能想要的那样。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-21T19:47:10.290

最简单的答案是自动派生一个`Show`实例：

```
data Tree a b = Branch b (Tree a b) (Tree a b) | Leaf a deriving Show 
```

但是假设这并没有给你你想要的形式的输出。如果您想定义自己的`Show`实例，您可以执行以下操作：

```
instance (Show a, Show b) => Show (Tree a b) where
    show (Leaf a) = "Leaf " ++ (show a)
    show (Branch b l r) = "Branch " ++ (show b) ++ " { " ++ l ++ ", " ++ r " }" 
```

您可能会读到第一行的方式是，“给定`a`并且`b`都是`Show`类型类`Tree a b`的实例，也是类型类的实例`Show`......”

顺便说一句，**缩进很重要**。它可能在您粘贴的代码段中被破坏了，但您必须在声明`show`下缩进函数定义。`instance`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T19:42:28.323

您的数据类型是`deriving Show`.

```
data Tree a b = Branch b (Tree a b) (Tree a b) | Leaf a deriving Show 
```

这将自动为您生成 Show 实例。

如果要创建 Show 的手动实例，这是思考过程。

一、基本骨架：

```
instance Show (Tree a b) where
   -- show :: Tree a b -> String
   show (Branch b ltree rtree) = {- some string -}
   show (Leaf a) = {- some string -} 
```

现在我们知道我们需要一些方法来显示类型`a`和`b`字符串的值。当然，这意味着我们需要能够`show`直接调用它们，因此`a`必须`b`有 Show 的实例。这是如何完成的：

```
instance (Show a, Show b) => Show (Tree a b) where
   -- show :: Tree a b -> String
   show (Branch b ltree rtree) = {- some string -}
   show (Leaf a) = {- some string -} 
```

然后它只是用适当的字符串填充空白，例如：

```
instance (Show a, Show b) => Show (Tree a b) where
   -- show :: Tree a b -> String
   show (Branch b ltree rtree) = "(( " ++ show ltree ++ " ) <-- ( " ++ b ++ " ) --> ( " ++ show rtree ++ " ))"
   show (Leaf a) = "L " ++ show a 
```

# php - Eclipse，运行->打开文件，找不到文件`http://localhost......php`

> ID：12537121
> 
> 赞同：1
> 
> 时间：2012-09-21T19:38:07.507
> 
> 标签：php, eclipse

突然 Eclipse 找不到我的任何文件。我已删除（删除）我的项目并重新添加它们，但问题仍然存在。我相信这很简单，我当然会感谢任何反馈。

# visual-studio-2012 - 缺少 Visual Studio 2012 css 颜色选择器

> ID：12537122
> 
> 赞同：6
> 
> 时间：2012-09-21T19:38:16.970
> 
> 标签：visual-studio-2012

我似乎在 css 编辑器中缺少 Visual Studio 2012 的颜色选择器功能。它只显示一个下拉菜单。

我尝试在首选项中更改颜色选择器选项。也试过重置设置。

任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-19T13:39:59.000

在属性后键入 #：

```
color:# 
```

安装 Resharper 后，我需要单击`Ctrl J`.

这为您提供了下拉列表的第一部分（一些样本）。然后单击指向下方的双箭头以获取正确的颜色选择器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T20:07:49.197

你在输入井号“#”吗？这就是触发漂亮颜色选择器的原因。

（例如，“color:#”当你按下“#”时你会得到选择器，否则你只会得到糟糕的下拉菜单）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-22T20:49:07.503

你有安装任何扩展吗？特别是 ReSharper？我遇到了同样的问题，并认为 ReSharper 可能是原因。卸载它，现在我有了广告中的 CSS 颜色选择器。如果您没有安装 ReSharper，则可能是由另一个扩展程序引起的。

# c# - 无法将“System.Data.Objects.ObjectQuery`1 [Manager.Data.Channel]”类型的对象转换为“Manager.Data.Channel”类型

> ID：12537127
> 
> 赞同：4
> 
> 时间：2012-09-21T19:38:52.130
> 
> 标签：c#, linq, exception, ado.net

在 Win7 应用程序中，我尝试使用 EF 中的 EntityClient 访问 SqlServerCe 3.5 (IPManager_DBEntities)，更新名为“Channel”的 ADO.NET 数据库表中的多个字段，EntitySetMapping 名称为“Channels”。

使用 VS 2010 IDE，代码编译良好，Intellisense 没有任何抱怨。通道数据表的格式在底部引用，因为行中的各个字段（由通道“编号”选择）需要使用从代码传递给它的信息进行更新，为简单起见，未显示代码。在过去的几天里，我在谷歌上搜索的任何东西都没有解决我的类型转换困境。使用 LINQ，我得到了这个运行时异常：

> “无法将‘System.Data.Objects.ObjectQuery`1 [Manager.Data.Channel]’类型的对象转换为‘Manager.Data.Channel’类型”。

```
 // Update channel status with information parsed from the data packet.
    using (IPManager_DBEntities context = new IPManager_DBEntities())
    {
        Channel thisChannelRow = (Channel)(from CE
                                             in context.Channels
                                          where CE. Number == int.Parse(IDLine[2])
                                         select CE);

        // Throwing exception after setting up this query:
        //   "Unable to cast object of type 'System.Data.Objects.ObjectQuery`1
        //   [Manager.Data.Channel]' to type 'Manager.Data.Channel'"
        //  During debug sessions, "thisChannelRow" is null as a result.

        MessageBox.Show("thisChannelRow. Channel = " + thisChannelRow.Number );

            ThisChannel.StatusID = int.Parse(IDLine[5]);
            ThisChannel.Cycle = int.Parse(IDLine[4]);
            ThisChannel.Modified = DateTime.Now;
            context.SaveChanges();
     } 
```

我希望有人有一个解决方案来帮助我度过这个困境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:41:04.037

LINQ 查询返回类型为 的后代的对象`IEnumerable<T>`，而不是`Channel`，即使序列中只有一个项目。要获取实际项目，请使用[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)：

```
Channel thisChannelRow = (Channel)(from CE
                                   in context.Channels
                                   where CE. Number == int.Parse(IDLine[2])
                                   select CE).FirstOrDefault(); 
```

或者[`First`](http://msdn.microsoft.com/en-us/library/bb291976.aspx), [`Single`](http://msdn.microsoft.com/en-us/library/bb155325.aspx), 或者[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/bb342451.aspx)如果其中任何一个更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:42:45.877

我很确定您的第一个命令返回的`IEnumerable`类型与其枚举的对象不同。

尝试添加`.First()`到 LINQ ala [LINQ Select First的末尾](https://stackoverflow.com/questions/10149982/linq-select-first)

这是必需的，因为您的原始 LINQ 语句返回的类型`IEnumerable<Channel>`与 a 不同`Channel`，因此您得到类型不匹配。您可以将最初的 LINQ 语句视为返回一个事物列表，但您正试图将该列表放入单个项目中。最后`.First()`的 告诉计算机只从该列表中获取第一个元素并仅返回它。因此，使用更新的 LINQ 语句，您现在将 a 存储`Channel`在 a 中`Channel`，因此不再有类型不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:30:04.753

在我的情况下，我可以使用 AddRange 方法来修复它。

```
 Public Function GetMessages(ByVal Issue As Issue) As List(Of Message)
        Dim Res As New List(Of Message)
        If Issue IsNot Nothing Then
            Dim db As New ProjectManagerEntities
            Res.AddRange(From item As Message In db.Messages
                                       Where item.IssueSet_Id = Issue.Id _
                                       Select item)

        End If

        Return Res
    End Function 
```

# export - 如何在 Blender 的导出菜单中添加鸡肉导出器

> ID：12537128
> 
> 赞同：2
> 
> 时间：2012-09-21T19:39:12.337
> 
> 标签：export, blender, panda3d

（对不起我的英语）嗨！我按照鸡肉拉链中的说明进行操作，但我做不到。我在 C:\Program Files\Blender Foundation\Blender\2.63\scripts 和 C:\Users\Martin\AppData\Roaming\Blender Foundation\Blender\2.63\scripts 中提取了文件，但搅拌机不显示该选项。我也没有在 File\User Preferences\Addons 中找到鸡肉，所以我使用安装插件按钮安装。但什么也没发生。

我做错了什么？

我正在使用 Blender 2.63 和鸡肉 R91。我想将模型导出为 Panda3d 兼容格式。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:26:30.307

鸡肉出口商 ( [chicken_exportR91.zip (179.8 kB)](http://sourceforge.net/projects/chicken-export/files/Chicken/Chicken%20R91/) ) 最后一次更新是在 2010 年，如果没有大的变化，它将无法在 2.63 中工作。

你最好的选择看起来像 Panda3d Egg I/O。从以下位置获取安装 zip：[https](https://code.google.com/p/yabee/) ://code.google.com/p/yabee/类似于[https://yabee.googlecode.com/files/YABEE_r12_b263.zip](https://yabee.googlecode.com/files/YABEE_r12_b263.zip)

它似乎在一个名为 io_scene_egg 的文件夹结构中，将这个文件夹及其包含的所有内容放入`2.63/scripts/addons_contrib`

在首选项 -> 插件 -> 启用“测试”选择器（因为插件仍在开发中 2.6+ ）。插件应以 Import-Export Panda3d EGG 格式出现在 Import-Export 中。

![在此处输入图像描述](../Images/8e65d2fa7f79f4464b36025ff18fe370.png)

# c# - 使用 LINQ 搜索 xml 文档时遇到问题

> ID：12537130
> 
> 赞同：1
> 
> 时间：2012-09-21T19:39:14.563
> 
> 标签：c#, linq

我有一个 xml 文档，其中包含以下格式的 3 个元素：

```
<Codes>
    <Code>
        <CodeScenario>3</CodeScenario>
        <CodeScenario>4</CodeScenario>
        <CodeScenario>6</CodeScenario>
        <CodeScenario>7</CodeScenario>
        <CodeCategory>Category3</CodeCategory>
        <CodeID>043</CodeID>
        <CodeDescription>Description3</CodeDescription>
        <CodeType>PE</CodeType>
        </Code>
    <Code>
        <CodeCategory>Category2</CodeCategory>
        <CodeID>046</CodeID>
        <CodeDescription>Description2</CodeDescription>
        <CodeType>PE</CodeType>
    </Code>
    <Code>
        <CodeScenario>2</CodeScenario>
        <CodeCategory>Category1</CodeCategory>
        <CodeID>100</CodeID>
        <CodeDescription>Description1</CodeDescription>
        <CodeType>PR</CodeType>
    </Code>
</Codes> 
```

我希望能够使用 linq 查询来告诉我代码元素是否具有基于 ID 的代码类型。到目前为止，这是我想出的。它有效，但它很丑陋，如果可能的话，我更喜欢使用点表示法。有人可以帮帮我吗？

```
public bool HasCodeType(string CodeType, string Code)
{
    var QueryResult = (from descendant in XMLdocument.Descendants("Code")
                       from type in descendant.Elements("CodeType")
                       where type != null &&
                             type.Value.Equals(CodeType)
                       select new { CID = descendant.Element("CodeID").Value }).Distinct();

    foreach (var result in QueryResult)
    {
        if (Code == result.CID)
            return true;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:42:50.507

找到第一个可能最简单`CodeType`，然后“上下”：

```
// Note camelCase for variable names, not PascalCase.
var query = document.Descendants("CodeType")
                    .Where(type => type.Value == codeType)
                    .Select(type => (string) type.Parent.Element("CodeID"))
                    .Where(id => id == null)
                    .Distinct(); 
```

第二个`Where`子句是避免获取没有兄弟元素`null`的元素的值。`CodeType``CodeID`

但是，如果您对查询所做的只是检查给定 ID 的存在，则无需费心：

```
return document.Descendants("Code")
               .Any(code => (string) code.Element("CodeType") == codeType &&
                            (string) code.Element("CodeID") == codeId)); 
```

*真的很*简单。

# c# - 我可以编写正则表达式来检查某些条件的密码吗？

> ID：12537132
> 
> 赞同：4
> 
> 时间：2012-09-21T19:39:28.903
> 
> 标签：c#, .net, regex, validation, passwords

我正在处理一个要求，我必须创建一个强密码。必须满足以下条件：
->**它应该是大写字母、小写字母、数字和特殊字符的组合**

我可以为此写一个正则表达式吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T19:48:05.673

例如，要验证至少 8 个字符的密码：

```
if (Regex.IsMatch(subjectString, 
    @"^               # Start of string
    (?=.*\p{Lu})      # Assert at least one uppercase letter
    (?=.*\p{Ll})      # Assert at least one lowercase letter
    (?=.*\d)          # Assert at least one digit
    (?=.*[^\p{L}\d])  # Assert at least one other character
    .{8,}             # Match at least 8 characters
    $                 # End of string",             
    RegexOptions.IgnorePatternWhitespace)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:42:56.363

并不真地。正则表达式旨在搜索/解析字符串，而不是生成字符串。是否有可能以某种方式利用它们，但代码的根不能（或至少不应该）依赖于正则表达式。

正则表达式可用于验证特定密码是否满足某些要求（即询问已生成的密码是否强密码）。因此，一种可能的策略是生成随机密码并继续尝试，直到验证为强密码。那将是一个*非常*糟糕的主意。您最好编写生成算法，以便它始终首先生成强密码。

如果您的问题是是否可以使用正则表达式来验证用户生成的密码，那么请相应地更改问题，因为如果是这样，那么答案是“是”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:43:09.983

如果您使用 FormsAuthentication，请`passwordStrengthRegularExpression`在配置提供程序时尝试使用该属性。

[http://msdn.microsoft.com/en-us/library/ms998347.aspx#paght000022%5Fsqlmembershipproviderconfig](http://msdn.microsoft.com/en-us/library/ms998347.aspx#paght000022%5Fsqlmembershipproviderconfig)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T19:50:38.353

是的。使用`System.Text.RegularExpressions.Regex.IsMatch(string input,string pattern)`方法。

```
if( Regex.IsMatch(pw,"[a-z]") &&
    Regex.IsMatch(pw,"[A-Z]") &&
    Regex.IsMatch(pw,"[0-9]") && 
    Regex.IsMatch(pw,"[!@#\$%\^&\*\(\)]")) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T20:03:05.590

您可以为此编写正则表达式，几乎可以编写任何内容。

我相信这会成功：

```
^.*(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&+=]).*$ 
```

我在我的项目中使用了它，但添加了我强烈建议的长度要求，如下所示：

```
^.*(?=.{10,})(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&+=]).*$ 
```

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

# php - 使用 oop 查询数据库

> ID：12537134
> 
> 赞同：0
> 
> 时间：2012-09-21T19:39:36.447
> 
> 标签：php, database

我第一次使用 oop 连接到数据库并立即提出了一个问题，下面是我正在努力解决的代码：

```
$q = 'SELECT * FROM test';
       $sqli->query($q);

       if($sqli->query($q)){
           echo "worked";               
       }

       if($sqli->error){
           echo $sqli->error;
       } 
```

我在连接到数据库时检查了错误，并且工作正常，但是当我运行此查询时，我没有得到任何输出，为什么？我预计会出现错误或“有效”，但都没有。

发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:46:40.447

我在源代码中添加了一些注释以提供帮助：

```
 $q = 'SELECT * FROM test';
   //$sqli is the result of a 
   //new mysqli("localhost", "user", "password", "database");
   $resource = $sqli->query($q); // this returns a resource or false

   if(!$resource) {
       echo $sqli->error;
       die; // do not process further
   }

   // process the results
   $rows = $resource->fetch_all();
   if ($rows) {  // check if there are rows 
     echo "worked";               
   }
   else {
     echo "query is ok, but there are no rows"; 
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:26:13.143

您还可以使用 $resource->fetch_object() 来返回一个输出对象。因此，如果您想从结果集中打印特定数据，您可以执行类似的操作

```
//table test.Name and test.Country
while ($rowobj = $resource->fetch_object()){
          printf ("%s (%s)\n", $rowobj->Name, $rowobj->Country);
        } 
```

祝你好运，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T04:18:25.440

你可以使用这种方法，我希望它是你正在寻找的。您需要先定义数据库。然后你可以在OOP中连接并测试连接是否为真或exit();

让我知道这是否适合您。您还可以在外部文件中定义数据库，然后执行 include(); 对于需要连接到数据库的任何页面，位于脚本顶部。

```
define("SERVER","IP Address");
define("USER","DB USERNAME");
define("PASSWORD","DB PASSWORD");
define("DATABASE","DB NAME"); 
```

`// This is for connection $mysqli = new mysqli(SERVER, USER, PASSWORD, DATABASE); if ($mysqli->connect_errno) { echo "Connection to MySQL failed: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error; exit(); }`

# c# - C# Windows 窗体应用程序 - 从另一个 ComboBox 中清除 ComboBox 选定的文本

> ID：12537135
> 
> 赞同：0
> 
> 时间：2012-09-21T19:39:44.583
> 
> 标签：c#, vb.net, winforms, visual-studio

Windows 窗体应用程序 (c#)。我有两个组合框。如果我选择一个项目，我希望另一个项目中的文本为空白。

这就是我所拥有的：

```
private void ComboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
ComboBox2.Text = "";
}

private void ComboBox2_SelectedIndexChanged(object sender, EventArgs e)
{
ComboBox1.Text = "";
} 
```

...但是正如您所看到的，当我在一个中进行选择时，两个 ComboBox 中的文本都会被清除。

如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:42:51.967

尝试将[ComboBox.SelectedIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindex.aspx)设置为 -1

> 当前选定项的从零开始的索引。如果未选择任何项目，则返回负一 (-1) 值。

或者更确切地说，根据您的规格尝试一些谎言

```
 private bool changed = false;
    private void ComboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (!changed)
        {
            changed = true;
            ComboBox2.Text = "";
            changed = false;
        }
    }

    private void ComboBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (!changed)
        {
            changed = true; 
            ComboBox1.Text = "";
            changed = false;
        }            
    } 
```

# javascript - 在 Heroku 上的 Javascript 中访问环境变量？

> ID：12537137
> 
> 赞同：3
> 
> 时间：2012-09-21T19:40:06.377
> 
> 标签：javascript, ruby, heroku, environment-variables, rack

我在 Heroku 上有一个 ruby​​/rack 应用程序服务于一个站点。该站点使用 Javascript，我想访问 Javascript 文件中的 Heroku 环境变量（API 密钥）。我试过了：

```
process.env.API_KEY
// As well as:
process.env['API_KEY'] 
```

但似乎两者都不起作用。我得到一个进程未定义错误。我得到的上述代码行来自在 Heroku 上运行的 Node.js 应用程序。我认为这与从普通 js 文件访问密钥的方式相同，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:59:36.917

你很困惑。Javascript 在访问者的网络浏览器中运行，*而不是*在 Heroku 上，因此无法读取服务器的环境变量。这是一个常见的问题。解决方案是让您的 Web 应用程序通过 Ruby 模板提供 Javascript，并插入公共 API 密钥。

我写的简单应用程序有一个例子。[https://github.com/hickford/nanoblogger](https://github.com/hickford/nanoblogger) Javascript文件`nano.js`由Ruby erb模板渲染

```
var pusher = new Pusher( '<%= Pusher.key %>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:48:34.190

这些`process.env`东西[是 Node.js 的一部分](http://nodejs.org/api/process.html#process_process_env)，而不是 JavaScript 的一部分，所以它不会出现在你的应用程序中。

但是，您的机架应用程序应该可以访问环境变量，因此如果您可以将该值传递给您的 JavaScript 可以访问的东西（如果它是敏感信息，则不会将其暴露给用户/DOM），那么它应该可以工作。

[这个其他答案](https://stackoverflow.com/questions/3770446/javascript-environment-variables)可能会为您指明一个有用的方向，或者至少澄清您尝试做的事情是否可以通过 JavaScript 实现。

# mysql - 在存储在两个不同数据库中的两个表之间同步主键

> ID：12537140
> 
> 赞同：2
> 
> 时间：2012-09-21T19:40:13.217
> 
> 标签：mysql

我有两个包含两个表的 MySQL 数据库，我们称它们为 TABLE_A 和 TABLE_B。这两个表都有 as 字段`id`和`title`. 两个数据库都在同一台服务器上，同一用户可以访问两者。

现在，TABLE_A 是 TABLE_B 的一个子集，用于该`title`领域。这意味着`title`TABLE_A 中的 every 也存在于 TABLE_B 中。虽然`id`这两个表的字段没有任何关系。

我需要的是根据标题将`id`TABLE_A 中的字段与TABLE_B 中的字段同步，即相同，相同。如果不清楚，我必须保存 TABLE_B并覆盖 TABLE_A 。而且我不必将 TABLE_B 中的缺失添加到 TABLE_A。`id``title``id``id``title`

有人建议使用临时表复制所有与 TABLE_A 相同的 TABLE_B 字段，然后将其重命名为 TABLE_A。我不能遵循这种方式，因为 TABLE_A 实际上还有其他需要维护的字段。所以，我不能完全放弃旧的 TABLE_A。

此外，`id`是两个表的主键。这意味着我不能简单地从 TABLE_B 复制到 TABLE_A 因为一旦我尝试将一个更改`id`为另一个已经存在于 TABLE_A 但链接到不同的`title`.

我知道如何编写 Perl 或 PHP 脚本来执行此操作，但我想知道是否存在纯 MySQL 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:48:16.123

你可以这样做

```
CREATE TABLE TableA_TMP AS
SELECT * FROM TableA;

ALTER TABLE TableA_TMP ADD id_new int;

UPDATE TableA_TMP A INNER JOIN TableB B ON lower(A.title) = lower(B.title)
SET id_new = B.id;

RENAME TABLE TableA TO TableA_backup;    

CREATE TableA AS
select id_new as id, title,.... from TableA_TMP; 
```

# javascript - 如何在 Three.js 中剪切立方体

> ID：12537141
> 
> 赞同：9
> 
> 时间：2012-09-21T19:40:20.610
> 
> 标签：javascript, three.js, geometry

我想知道以前是否有人遇到过这个特定问题。根据我对如何使用 webgl 和 three.js 绘制 3d 对象的基本了解，我似乎无法找到一种方法来创建一个确实从立方体几何学继承它的几何形状的 paralelipiped（或者我认为这就是它的名称），但没有不是所有的角度都是 90 度。

我的目标是拥有这样的东西：

![例子](../Images/13f76850d72cac6d45717fe3d43abad2.png)

结果应该与什么非常相似

```
-moz-transform: skew(0,-45.1deg); 
```

会做一个 html 元素。有人可以帮我找到解决方案吗？

我感谢您的考虑。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T20:30:36.180

您需要做的是创建一个立方体网格，然后将*剪切矩阵*应用于立方体的几何体。该操作以您描述的方式扭曲几何。

```
var geometry = new THREE.BoxGeometry( 5, 5, 5 );

var matrix = new THREE.Matrix4();

matrix.set(   1,   Syx,  Szx,  0,
            Sxy,     1,  Szy,  0,
            Sxz,   Syz,   1,   0,
              0,     0,   0,   1  );

geometry.applyMatrix( matrix ); 
```

这是一个小提琴：http: [//jsfiddle.net/4kHdQ/54/](http://jsfiddle.net/4kHdQ/54/)

编辑：更新到three.js r.71

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-24T11:50:40.083

Three.js r129 引入了一个更新`Matrix4.makeShear()`——由@WestLangley 撰写

[https://threejs.org/docs/#api/en/math/Matrix4.makeShear](https://threejs.org/docs/#api/en/math/Matrix4.makeShear)

```
const geometry = new THREE.BoxGeometry(5, 5, 5);

const matrix = new THREE.Matrix4();
matrix.makeShear(1, 0, 0, 0, 0, 0);

geometry.applyMatrix4(matrix); 
```

# admin - activeadmin 链接到

> ID：12537142
> 
> 赞同：4
> 
> 时间：2012-09-21T19:40:23.367
> 
> 标签：admin, link-to

您好，我必须在 Active Admin 管理页面中创建一些链接，但是我在理解哈希以搜索特定条目时遇到了一些问题，例如：

```
column 'Campaigns' do |advertiser|
  link_to "#{advertiser.campaigns.count} campaigns", admin_campaigns_path('q[advertiser_id_eq]' => advertiser.id)
end 
```

我不明白以下内容的含义：

```
('q[advertiser_id_eq]') 
```

为什么它在一个“q[]”里面并且有一个“_eq”？

或者：

```
column 'Entrants' do |campaign|
      link_to "#{campaign.entrants.count} entrants", admin_entrants_path('q[by_campaign_id]' => campaign.id)
end 
```

当我单击链接时，他们会搜索模型关系中的链接信息，但是当我将其更改为正常时：

```
('[campaign_id]' => campaign.id) 
```

在最后一种情况下，它只是将我发送到所有“活动”的正常索引。activeadmin 的文档并没有真正说明搜索的工作原理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:03:18.840

活动管理员使用元搜索 gem 来搜索结果。尝试使用 q[by_campaign_id] => "#{campaign.id}"

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-07T02:44:52.967

```
'q[advertiser_id_eq]' => advertiser.id
'q[by_campaign_id]' => campaign.id 
```

这两个在我的代码中不起作用，它只显示所有广告系列。它应该喜欢

```
'q[advertiser_id_eq]' => "#{advertiser.id}" 
```

# artificial-intelligence - 用 A* 算法证明定理

> ID：12537146
> 
> 赞同：4
> 
> 时间：2012-09-21T19:40:46.383
> 
> 标签：artificial-intelligence, theorem-proving

我正在准备硕士学位的期末考试，这是过去考试的问题，我真的很困惑，不知道从哪里开始。

我的想法是可接受的启发式是解析规则，然后证明解析规则是可接受的，对吗？如果是这样，要证明解决规则是可以接受的，我应该从哪里开始？感谢您的帮助。

**考虑一个定理证明器的应用。A* 算法可用于搜索最简单（最短）的证明。假设已知公理和定理在命题逻辑中表示为霍恩子句的知识库，并且证明者使用反向链接。**

**(a) 提出一个可接受的启发式。**

**(b) 证明提议的启发式是可以接受的**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:48:34.437

是的，定理证明意味着它是一种解决方案。
Horn 子句要么是明确的子句，要么是完整性约束。也就是说，Horn 子句以假原子或正常原子作为其头部。
完整性约束是
false←a1∧...∧ak 形式的子句。
完整性约束允许系统证明在知识库的所有模型中某些原子的合取是错误的——也就是说，证明原子否定的析取
Horn 子句知识库可以暗示原子的否定
例如：考虑知识库 KB1：

```
false←a∧b.
a←c.
b←c. 
```

在 KB1 的所有模型中，原子 c 都是错误的。如果 c 在 KB1 的模型 I 中为真，那么 a 和 b 在 I 中都为真（否则我将不是 KB1 的模型）。因为假在 I 中为假，并且 a 和 b 在 I 中为真，所以第一个子句在 I 中为假，与 I 是 KB1 的模型相矛盾。因此，c 在 KB1 的所有模型中都是错误的。这表示为 KB1 ¬c，这意味着 ¬c 在 KB1 的所有模型中为真，因此 c 在 KB1 的所有模型中为假。

# c# - 在基于 SharePoint 2010 声明的网站（外联网区域）上以编程方式添加用户

> ID：12537147
> 
> 赞同：0
> 
> 时间：2012-09-21T19:40:47.870
> 
> 标签：c#, sharepoint, authentication, sharepoint-2010, claims-based-identity

我有一个具有区域级安全性的 SharePoint 2010 网站。该站点在默认区域中具有 Windows 身份验证，而在外联网区域中具有基于声明的身份验证。会员提供者用于基于声明的站点。

我的要求是以编程方式（c#）将该会员提供者的用户添加到这个基于声明的站点。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:46:04.763

要添加声明用户，您需要创建一个模式：

```
i:0#.f|{MembershipProvider}|{UserName} 
```

我希望下面的代码为您提供足够的详细信息来解决您的问题：

```
string userName = "dipesh";
string membershipProvider = "MyCustomMP";
string claimUser = string.Format("i:0#.f|{0}|{1}", membershipProvider, userName);
SPUser user = web.EnsureUser(claimUser); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:17:19.520

如果你说它在控制台应用程序中运行良好，我相信它应该只是权限问题。请注意，使用提升的运行将不起作用，因为您已将其托管为 Windows 服务并且不会有应用程序池。如我错了请纠正我。运行 Windows 服务的用户应该有适当的权限来添加用户。尝试使用运行控制台应用程序的当前登录用户运行 Windows 服务。如果它不起作用，请尝试使用 Farm Admin。即使成功了，也要与其他低权限用户一起测试，这样您就可以准确了解您需要什么权限。我希望你能尽快解决你的问题。

# php - 从 url 获取值而不在 PHP 中显示页面

> ID：12537148
> 
> 赞同：0
> 
> 时间：2012-09-21T19:40:49.580
> 
> 标签：php, url, mod-rewrite

我需要在服务器不显示页面的情况下从 url 获取值。例如，如果有人去：

www.example.com/123456

我想获得“123456”并重定向到 www.example.com。

www.example.com/123456 不存在。

以某种方式使用 mod rewrite 和 PHP 可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:44:28.760

你可以这样做：

```
<?php
$data = $_GET['data'];
//Do something with the data
header('Location: http://www.example.com/');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:02:04.283

例如在您的 .htaccess 文件中（假设 LAMP 带有 mod_rewrite）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

和 index.php：

```
<?php
    $url = $_SERVER['REQUEST_URI'];
    // will output: /123456
    echo $url;
?> 
```

此设置会将所有不指向实际文件或目录的请求重定向到 index.php。

# list - 从理论上讲，这是列表的有效comonad 实例吗？

> ID：12537149
> 
> 赞同：15
> 
> 时间：2012-09-21T19:40:50.757
> 
> 标签：list, haskell, comonad

我正在尝试掌握 monads 的概念，在阅读[了这篇博文之后](http://blog.sigfpe.com/2006/12/evaluating-cellular-automata-is.html)，我想我对它们的作用以及它们与 monads 的关系有了一个深刻的理解。但是，我想我会深入研究一下这个主题，然后想想通用列表类型（你知道，`[a]`）的comonad 实例会是什么样子，我发现了一个我不完全知道的是正确的。

因此，鉴于博客文章使用的实例：

```
class Functor w => Comonad w where
    (=>>)    :: w a -> (w a -> b) -> w b
    coreturn :: w a -> a
    cojoin     :: w a -> w (w a) 
```

我认为 for 的实例声明`[a]`看起来像这样（for 的语法`[a]`可能是不可能的或错误的，但你明白了这里的想法）：

```
instance Comonad [a] where
    coreturn = head
    cojoin = Data.List.subsequences --this is what I'm confused about
    x =>> f = map f (cojoin x) 
```

在这里，我们只是找到所有的`subsequences`列表，但完全可以使用它`powerset`或其他东西。表单列表中有几个函数，`(a -> [a])`对于哪个是正确的有点模棱两可。

这是否意味着`[a]`无法将其正确实例化为comonad，还是仅由用户决定`cojoin`实际做什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T20:21:46.750

如评论中所述，您不能为可能为空的列表创建一个comonad 实例，因为`coreturn`必须返回*something*。

除此之外，您的实例还必须满足comonad 定律。`coreturn`用和表示`cojoin`，它们是：

1.  `coreturn . cojoin = id`
2.  `fmap coreturn . cojoin = id`
3.  `cojoin . cojoin = fmap cojoin . cojoin`

即使我们不允许空列表，您也可以轻松地看到这些不适用于您的实例。但是，假设`coreturn`是`head`，我们可以使用这些定律来获得一些关于`cojoin`必须是什么的线索。

从 (1) 中，我们可以确定返回的列表的第一个元素`cojoin`必须是原始列表，从 (2) 中我们看到，组合每个内部列表的第一个元素也必须产生原始列表。这强烈表明我们需要类似`tails`^*的东西，并且可以确认这也满足（3）。

[^*更具体地说，我们需要一个`tails`不包含末尾空列表的版本。]

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-21T21:56:21.497

为了澄清其他人提到的内容，请考虑以下类型的非空列表：

```
data NonEmptyList a = One a | Many a (NonEmptyList a)

map :: (a -> b) -> NonEmptyList a -> NonEmptyList b
map f (One x) = One (f x)
map f (Many x xs) = Many (f x) (map f xs)

(++) :: NonEmptyList a -> NonEmptyList a -> NonEmptyList a
One x     ++ ys = Many x ys
Many x xs ++ ys = Many x (xs ++ ys)

tails :: NonEmptyList a -> NonEmptyList (NonEmptyList a)
tails l@(One _) = One l
tails l@(Many _ xs) = Many l (tails xs) 
```

您*可以*编写一个有效的comonad实例，如下所示：

```
instance Functor NonEmptyList where
  fmap = map

instance Comonad NonEmptyList where
  coreturn (One x) = x
  coreturn (Many x xs) = x

  cojoin = tails

  -- this should be a default implementation
  x =>> f = fmap f (cojoin x) 
```

让我们证明哈马尔列出的定律。作为给定的第一步，我将冒昧地对每一个进行 eta 扩展。

法 1。

```
(coreturn . cojoin) xs = id xs
-- definition of `.`, `cojoin`, and `id`
(coreturn (tails xs) = xs
-- case on xs
  -- assume xs is (One x)
  (coreturn (tails (One x))) = One x
  -- definition of tails
  (coreturn (One (One x))) = One x
  -- definition of coreturn
  One x = One x

  -- assume xs is (Many y ys)
  (coreturn (tails (Many y ys))) = Many y ys
  -- definition of tails
  (coreturn (Many (Many y ys) (tails ys)) = Many y ys
  -- definition of coreturn
  Many y ys = Many y ys

  -- assume xs is _|_
  (coreturn (tails _|_)) = _|_
  -- tails pattern matches on its argument
  (coreturn _|_) = _|_
  -- coreturn pattern matches on its argument
  _|_ = _|_ 
```

法 2。

```
(fmap coreturn . cojoin) xs = id xs
-- definition of `.`, `cojoin`, `fmap`, and `id`
map coreturn (tails xs) = xs
-- case on xs
  -- assume xs is (One x)
  map coreturn (tails (One x)) = One x
  -- defn of tails
  map coreturn (One (One x)) = One x
  -- defn of map
  One (coreturn (One x)) = One x
  -- defn of coreturn 
  One x = One x

  -- assume xs is (Many y ys)
  map coreturn (tails (Many y ys)) = Many y ys
  -- defn of tails
  map coreturn (Many (Many y ys) (tails ys)) = Many y ys
  -- defn of map
  Many (coreturn (Many y ys)) (map coreturn (tails ys)) = Many y ys
  -- defn of coreturn
  Many y (map coreturn (tail ys)) = Many y ys
  -- eliminate matching portions
  map coreturn (tail ys) = ys
  -- wave hands.
  -- If the list is not self-referential,
  -- then this can be alleviated by an inductive hypothesis.
  -- If not, then you can probably prove it anyways.

  -- assume xs = _|_
  map coreturn (tails _|_) = _|_
  -- tails matches on its argument
  map coreturn _|_ = _|_
  -- map matches on its second argument
  _|_ = _|_ 
```

法 3。

```
(cojoin . cojoin) xs = (fmap cojoin . cojoin) xs
-- defn of `.`, `fmap`, and `cojoin`
tails (tails xs) = map tails (tails xs)
-- case on xs
  -- assume xs = One x
  tails (tails (One x)) = map tails (tails (One x))
  -- defn of tails, both sides
  tails (One (One x)) = map tails (One (One x))
  -- defn of map
  tails (One (One x)) = One (tails (One x))
  -- defn of tails, both sides
  One (One (One x)) = One (One (One x))

  -- assume xs = Many y ys
  (this gets ugly. left as exercise to reader)

  -- assume xs = _|_
  tails (tails _|_) = map tails (tails _|_)
  -- tails matches on its argument
  tails _|_ = map tails _|_
  -- tails matches on its argument, map matches on its second argument
  _|_ = _|_ 
```

# doctrine - Doctrine2：多进程中的实体可见性

> ID：12537165
> 
> 赞同：0
> 
> 时间：2012-09-21T19:41:35.933
> 
> 标签：doctrine, doctrine-orm, doctrine-odm, doctrine-query

这是网上的一个example.php：

```
...
$page = new SomeEntity();
$page->setName("xx");  // name is primary key
$em->persist($page);
.... 
```

问题：当 example2.php 询问时会发生什么：

```
$result = $em->find('SomeEntity', 'xx'); 
```

? null 或对象 $page？

我假设 example.php 仍在运行并且还没有调用 $em->flush() 。

编辑：

也许这也是我如何称呼 $em 的决定性因素：

```
$em = \Zend_Controller_Front::getInstance()->getParam('bootstrap')->getResource('doctrine'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:02:21.583

在没有执行任何刷新操作之前，数据不会被持久化。因此，数据不与其他进程共享。

您的`$result`变量将是`null`.

# java - 使用拦截器的 CXF 的 ws-security

> ID：12537167
> 
> 赞同：6
> 
> 时间：2012-09-21T19:41:36.157
> 
> 标签：java, cxf

我正在尝试学习 CXF 并希望通过一个简单的 hello world 示例来实现 ws 安全性。我按照自下而上的方法创建了一个正在运行的 cxf 服务，并使用soap ui 进行了测试。我写了一个spring客户端，它也运行良好。

然后我尝试添加时间戳。我在服务器和 clent spring bean 配置文件中添加了 WSS4J 和 saaj 拦截器。我关注了这个博客。

[cxf-spring-and-ws-security-putting-it](http://domagojtechtips.blogspot.com/2007/08/cxf-spring-and-ws-security-putting-it.html)

我完全遵循相同的步骤，并添加了时间戳操作。当我运行客户端时，我得到了这个

我得到了这个例外

```
org.apache.ws.security.WSSecurityException: An error was discovered processing the 
<wsse:Security> header 
```

我的 wsdl 没有任何关于我添加的安全性或拦截器的条目。

SOAP 请求与添加拦截器之前的请求相同。我发现请求中缺少标头。在这种情况下，如何在请求中添加标头？

请检查下面的堆栈跟踪。

```
ID: 4
Address: http://localhost:8080/HelloWorldWithSecurity/services/HelloWorldImplPort
Encoding: UTF-8
Http-Method: POST
Content-Type: text/xml;charset=UTF-8
Headers: {accept-encoding=[gzip,deflate], connection=[Keep-Alive], Content-Length=[294], content-type=[text/xml;charset=UTF-8], host=[localhost:8080], SOAPAction=[""], user-agent=[Apache-HttpClient/4.1.1 (java 1.5)]}
Payload: <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://service.spring.demo/">
   <soapenv:Header/>
   <soapenv:Body>
      <ser:sayHi>
         <!--Optional:-->
         <arg0>Yamini</arg0>
      </ser:sayHi>
   </soapenv:Body>
</soapenv:Envelope>
--------------------------------------
Sep 21, 2012 10:53:51 AM org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor checkActions
WARNING: Security processing failed (actions mismatch)
Sep 21, 2012 10:53:51 AM org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor handleMessage
WARNING: 
org.apache.ws.security.WSSecurityException: An error was discovered processing the <wsse:Security> header
    at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.checkActions(WSS4JInInterceptor.java:359)
    at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.handleMessage(WSS4JInInterceptor.java:312)
    at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.handleMessage(WSS4JInInterceptor.java:89)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:207)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:209)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:191)
    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:114)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:164)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Sep 21, 2012 10:53:51 AM org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging
WARNING: Interceptor for {http://service.spring.demo/}HelloWorldImplService has thrown exception, unwinding now
org.apache.cxf.binding.soap.SoapFault: An error was discovered processing the <wsse:Security> header
    at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.createSoapFault(WSS4JInInterceptor.java:733)
    at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.handleMessage(WSS4JInInterceptor.java:333)
    at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.handleMessage(WSS4JInInterceptor.java:89)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:207)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:209)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:191)
    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:114)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:164)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.ws.security.WSSecurityException: An error was discovered processing the <wsse:Security> header
    at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.checkActions(WSS4JInInterceptor.java:359)
    at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.handleMessage(WSS4JInInterceptor.java:312)
    ... 27 more
Sep 21, 2012 10:53:51 AM org.apache.cxf.interceptor.AbstractLoggingInterceptor log
INFO: Outbound Message
---------------------------
ID: 4
Response-Code: 500
Encoding: UTF-8
Content-Type: text/xml
Headers: {}
Payload: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><soap:Fault><faultcode xmlns:ns1="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">ns1:InvalidSecurity</faultcode><faultstring>An error was discovered processing the &lt;wsse:Security> header</faultstring></soap:Fault></soap:Body></soap:Envelope>
--------------------------------------
Sep 21, 2012 11:31:29 AM org.apache.cxf.interceptor.AbstractLoggingInterceptor log
INFO: Inbound Message
----------------------------
ID: 5
Address: http://localhost:8080/HelloWorldWithSecurity/services/HelloWorldImplPort
Encoding: UTF-8
Http-Method: POST
Content-Type: text/xml; charset=UTF-8
Headers: {Accept=[*/*], cache-control=[no-cache], connection=[keep-alive], Content-Length=[610], content-type=[text/xml; charset=UTF-8], host=[localhost:8080], pragma=[no-cache], SOAPAction=[""], user-agent=[Apache CXF 2.4.9]}
Payload: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Header><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" soap:mustUnderstand="1"><wsu:Timestamp wsu:Id="TS-1"><wsu:Created>2012-09-21T16:31:29.958Z</wsu:Created><wsu:Expires>2012-09-21T16:36:29.958Z</wsu:Expires></wsu:Timestamp></wsse:Security></soap:Header><soap:Body><ns2:sayHi xmlns:ns2="http://service.spring.demo/"><arg0>Yamini</arg0></ns2:sayHi></soap:Body></soap:Envelope>
--------------------------------------
sayHi called
Sep 21, 2012 11:31:29 AM org.apache.cxf.interceptor.AbstractLoggingInterceptor log
INFO: Outbound Message
---------------------------
ID: 5
Encoding: UTF-8
Content-Type: text/xml
Headers: {}
Payload: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ns2:sayHiResponse xmlns:ns2="http://service.spring.demo/"><return>Hello   Yamini</return></ns2:sayHiResponse></soap:Body></soap:Envelope>
-------------------------------------- 
```

我在请求中看不到任何安全标头。因此，当为他们处理响应时，我遇到了异常。我想知道的是如何在以 Java 优先方法开发 Web 服务的情况下添加安全标头。

太感谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-22T16:30:49.627

你的标题应该是这样的......

```
<soap:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soap:mustUnderstand="1">
        <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="UsernameToken-2">
            <wsse:Username>admin</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">password</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security>
</soap:Header> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-07T03:59:38.043

您需要在 SOAP 请求中添加 wsse:Security 标头

```
<soapenv:envelope ...
     <soapenv:header>
        <wsse:security soapenv:mustunderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
          <wsse:usernametoken wsu:id="UsernameToken-27777511" xmlns:wsu="http://Pdocs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
          <wsse:username>admin</wsse:username>
          <wsse:password type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">pass</wsse:password>
         </wsse:usernametoken>
        </wsse:security>
       </soapenv:header>

<soapenv:body>
--
   </soapenv:body>
</soapenv:envelope> 
```

# javascript - javascript声明具有指定索引的多维数组

> ID：12537172
> 
> 赞同：0
> 
> 时间：2012-09-21T19:42:16.387
> 
> 标签：javascript, multidimensional-array

我想创建一个最终看起来像这样的多维数组：

```
s
    [4]
        [3]
            [7][235,25903,502935],
            [8][2973,20385,97250],
            [9][293,2752,2935]
        [4]
            [7][28357,2057,923705],
            [8][2398,20597,20579],
            [9][275,23975,203795] 
```

在 PHP 中，这很容易做到，但在 javascript 中，我不断收到一些关于未定义二维的 BS：

```
var s = [];
    s[4][3][7] = [23095,20753,2067];
    s[4][3][8] = [2664,86295,29357]; 
```

（这不是我在 PHP 中这样做的方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:46:11.847

您必须先将每个嵌套数组声明为 an `Array`，然后才能为其赋值：

```
var s = [];
s[4] = [];
s[4][3] = [];
s[4][3][7] = [23095,20753,2067];
s[4][3][8] = [2664,86295,29357]; 
```

# c# - 从另一个线程访问 Control.Focused true 或 false 状态

> ID：12537175
> 
> 赞同：0
> 
> 时间：2012-09-21T19:42:29.790
> 
> 标签：c#, winforms

我有一个表单，其焦点状态在使用以下方法的方法中进行检查：

```
if (!this.Focused)
{ 
   //do something
} 
```

但是，这也需要从另一个工作线程检查，当我`(!this.Focused)`从另一个线程调用 if 时，我遇到了跨线程冲突。如何`this.Focused`从另一个线程访问布尔值的真假状态？我熟悉使用委托从其他线程更新表单控件，但我对此有一个真正的问题。我错过了什么？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:47:18.570

完全一样——你只需要使用 的返回值[`Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)，也就是委托的返回值：

```
Func<bool> func = () => this.Focused;
var focused = (bool) Invoke(func); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:46:19.430

那这个呢？

```
bool focused = false;

this.Invoke((MethodInvoker)delegate
{
    focused = controlname.Focused; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:05:48.930

尝试，

```
if (this.InvokeRequired)
{
    this.Invoke((MethodInvoker)delegate
    {
       focused = controlname.Focused; 
   });
}
else
{
focused = controlname.Focused;
} 
```

检查更多关于 InvokeRequired [http://www.codeproject.com/Articles/37642/Avoiding-InvokeRequired](http://www.codeproject.com/Articles/37642/Avoiding-InvokeRequired)

# mysql - MySQL 分段排序

> ID：12537177
> 
> 赞同：3
> 
> 时间：2012-09-21T19:42:43.373
> 
> 标签：mysql, sql, sql-order-by, mysql4

我有一个这样的数据集：

```
boolean name    value
0       Text10  20
1       Text1   8
0       Text4   46
1       Text9   84
1       Text5   66
0       Text2   35
0       Text9   2
1       Text6   55 
```

按列排序`boolean`会将数据分成两个部分，我想根据不同的参数对`boolean = 1`它们进行排序：带有的部分按值排序，其余部分按 排序`name`，如下所示：

```
boolean name    value
1       Text1   8     # --> 1s are ordered by value
1       Text6   55
1       Text5   66
1       Text9   84
0       Text2   35    # --> 0s are ordered by name
0       Text4   46
0       Text9   2
0       Text10  20 
```

注意：我们需要它在 MySQL 4.1.11 中工作。=D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T19:59:47.997

请注意，可以根据需要将其中的多个部分`order by`“激活”来完成。
你可以检查这个[sqlfiddle](http://sqlfiddle.com/#!2/01fde/1)

```
select * from yourtable
order by 
  boolean desc, 
  case when boolean = 0 then value else null end, -- ´else null´ is redundant
  case when boolean = 1 then name  else null end  -- but is here to clarify 
```

# css - Dreamweaver CSS <--[如果 IE]>

> ID：12537183
> 
> 赞同：-2
> 
> 时间：2012-09-21T19:43:01.873
> 
> 标签：css, if-statement, dreamweaver, flash-cs5

我在一个小型网站上工作，但当然 IE 不像 Chrome 或 Firefox 那样看待它。我已经阅读并发现 using`<--[if IE]>` *应该*只让 IE 使用我需要的样式表。

当我早些时候在另一台 PC 上使用 Microsoft Expression 时，它运行良好。我回到家并开始在 Dreamweaver CS5 中进行编辑，但现在它无法正常工作。

我对其进行了一些研究，我知道 Dreamweaver 将其视为注释而不是`if`函数。

那么我该如何解决/解决这个问题？

提前致谢！

PS我正在使用的整段代码是`<!--[if IE ]> <link href="IEcss.css" rel="stylesheet" type="text/css"> <![endif]-->`

**编辑：**我找到了答案，我必须在引用样式表之前关闭评论标签。[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:49:03.263

后面有一个空格`IE`：

```
<!--[if IE ]> 
```

应该：

```
<!--[if IE]> 
```

除此之外，它看起来是正确的。但是空间很可能会被抛弃，因为条件注释必须与*精确的*语法匹配——否则它们会被解释为常规注释并被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:53:55.983

**设计时**样式表允许您在处理 Dreamweaver 文档时显示或隐藏由 CSS 样式表应用的设计。例如，您可以使用此选项在设计页面时包含或排除仅 Macintosh 或仅 Windows 样式表的效果。

[http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7e17a.html](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7e17a.html)

# android - 无法从资产路径在 phonegap 项目中使用 jquery 加载 xml 文件

> ID：12537186
> 
> 赞同：9
> 
> 时间：2012-09-21T19:43:09.290
> 
> 标签：android, jquery, ios, cordova, jquery-mobile

我在 phonegap 项目中通过手机从路径加载`xml`文件有很大的问题。`assets``jQuery`

我需要加载一个`xml`文件。文件放在我项目的**根目录中。**问题在于 ajax url: **"language.xml"**。这是我的代码：

```
var language = 'english';
var regEx = /(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)/;
$.ajax({
    url: "language.xml",
    success: function(xml) {
        $(xml).find('translation').each(function(){
            var id = $(this).attr('id');
            var text = $(this).find(language).text();
            if(text.match(regEx)){
              $("." + id).replaceWith('<a href="mailto:'+text+'" data-role="button" data-inline="true" data-theme="d" rel="external" data-mini="true">'+text+'</a>');
            }
            else{
              $("." + id).html(text);
            }
        });
    }
}); 
```

当我使用绝对路径时，我可以加载这个文件并添加 url：`file:///android_asset/www/language.xml`

这仅适用于 Android 资产。但我也需要**iOS**的正确路径。

### 是否可以通过 jQuery 绝对/相对链接 URL 路径以便能够在 Android/iOS 设备中加载文件？

**上面的更新** 代码是正确的。失败是在桌面浏览器中进行测试。项目在具有相对路径的 Android 和 iOS 上运行良好。

**无需**`file:///android_asset/www/`为 Android 或`file:///var/mobile/Applications/7D6D107B-D9DC-479B-9E22-4847F0CA0C40/YourApplication.app/www/`iOS添加绝对路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:42:21.943

查询：

```
 $("#inputString").live("keyup", function(e) 
    {
       $.post("FILE.PHP",{ char:$("#inputString").val() },
         function(data){},'json');
    }); 
```

PHP代码：

```
<?php
$sql = "SELECT `name` FROM `list` WHERE `name` LIKE '%{$_POST['queryString']}%'";
        $query=mysql_query($sql);
        if($result) 
        {
        foreach ($result as $value) echo '<li onClick="fill(\''.$value['name'].'\');">'.$value['name'].'</li>';
        } 
}
?> 
```

CSS：

```
#autoSuggestionsList {
    position: absolute;
    margin: 30px 4px;
    width: 175px;
    padding: 0;
    font-size: 11px;
    color: #000;
    border-radius: 5px;
    background: #c3d9ff; /* Old browsers */
    background: -moz-linear-gradient(top, #c3d9ff 0%, #b1c8ef 41%, #98b0d9 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c3d9ff), color-stop(41%,#b1c8ef), color-stop(100%,#98b0d9)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #c3d9ff 0%,#b1c8ef 41%,#98b0d9 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #c3d9ff 0%,#b1c8ef 41%,#98b0d9 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #c3d9ff 0%,#b1c8ef 41%,#98b0d9 100%); /* IE10+ */
    background: linear-gradient(to bottom, #c3d9ff 0%,#b1c8ef 41%,#98b0d9 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c3d9ff', endColorstr='#98b0d9',GradientType=0 ); /* IE6-9 */
}
.suggestionList {
    margin: 0px;
    padding: 0px;
}
.suggestionList li {
    list-style: none;
    direction: rtl;
    text-align: right;
    margin: 0px 0px 0px 0px;
    padding: 3px;
    cursor: pointer;
}
.suggestionList li:hover {
    background-color: #659CD8;
    color: #fff;
}
#autoSuggestionsList li:first-child {
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    border-radius: 5px 5px 0px 0px;
    behavior: url('./css/PIE.htc');
}
#autoSuggestionsList li:last-child {
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    border-radius: 0px 0px 5px 5px;
    behavior: url('./css/PIE.htc');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:05:20.593

尝试将您的 xml 文件放在“www”文件夹中，然后您应该可以仅使用文件名访问该文件。

另外，请参阅自动完成示例： http: [//jqueryui.com/autocomplete/#xml](http://jqueryui.com/autocomplete/#xml) 在演示中，他们直接访问了“london.xml”

```
$.ajax({
  url: "london.xml",
  dataType: "xml",
  success: function( xmlResponse ) {
  var data = $( "geoname", xmlResponse ).map(function() {
  //alert($('name', this).text());
  return {
    value: $( "name", this ).text() + ", " +
            ( $.trim( $( "countryName", this ).text() ) || "(unknown country)" ),
    id: $( "geonameId", this ).text()
  };
 }); 
```

希望它会奏效。

# php - PHP == 将“2.5”转换为 2？

> ID：12537193
> 
> 赞同：0
> 
> 时间：2012-09-21T19:43:42.333
> 
> 标签：php, casting, equals, operator-keyword

我对这个相等的运算符有点困惑。

回声 (2 == "2.5time")

应输出为 1/true。

"2.5time" 字符串应类型转换为整数并输出 2 作为整数。

但它似乎没有输出任何东西。

谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:48:04.517

如果它没有输出任何表示错误的东西，请执行 var_dump(2 == "2.5time") 以查看发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:55:00.740

比较是让 PHP 解析字符串并获得 2.5 的数字，这是一个浮点数。然后将其与您的整数进行比较，该整数被视为浮点数 2.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:59:24.967

如果您希望将字符串开头的数字作为整数处理，则必须将它们类型转换为整数，因此

```
if(2 == (int)"2.5times") // will be true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T19:54:48.347

如果使用 == 运算符，它将比较所有的字符串。

```
(2 == "2") // is true, because is the same value
(2 === "2") // is false, because is the same value, but is different types
(2 == "23") // is false, contains different values 
```

但在您的情况下，最好使用[strpos](http://php.net/manual/en/function.strpos.php)在字符串中查找子字符串。

# ios - 选择器视图值

> ID：12537194
> 
> 赞同：0
> 
> 时间：2012-09-21T19:43:48.277
> 
> 标签：ios, xcode

我的第一个视图控制器中有一个选择器视图。

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent(NSInteger)component{
 switch(row){
  case 1:
   isOne = true;
   break;
  case 2:
   isTwo = true;
   break;
  case 3:
   isThree = true;
   break;
 }
} 
```

我想在我的第二个视图控制器中读取这个布尔值。我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:54:58.110

最后，我找到了答案：

1.  我只需要在我的第一个视图控制器中定义一个变量字符串作为保留

    @property (nonatomic, 保留) NSString *aString;

2.  在实施文件集中：

    @synthesize 字符串；

3.  在选择器视图方法中：

    ```
    -(void)pickerView:(UIPickerView*)pickerView didSelectRow:(NSInteger)row  inComponent:(NSInteger)component { 
           switch (row) {
                   case 0:
                      self.aString = [NSString stringWithString:@"One"];
                      break;
                      .....
    } 
    ```

在第二个视图控制器中执行 1 和 2。如果切换到第二个控制器，则从选择器视图中设置选定的值：

```
SecondViewController * secController = [[SecondViewController alloc] initWithNibName:nil bundle:nil];
secController.modalTransitionStyle = UIModalTransitionStyle;
[secController setAString:self.aString];
[self presentModalViewController:secController animated:YES]; 
```

我不知道这是否是最好的解决方案，但它现在对我有用。

# php - 在应用程序中推送通知

> ID：12537197
> 
> 赞同：2
> 
> 时间：2012-09-21T19:43:58.703
> 
> 标签：php, iphone, ios, push-notification, apple-push-notifications

我已经成功地设置了一个 MySQL+PHP 推送通知服务器，一切都很好，除了一件事。如果用户碰巧在应用程序中，他们不会收到推送通知，这有点烦人。有没有办法可以修改它，以便在通知中心或其他地方显示推送通知？

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:51:02.500

当应用程序在下面运行时调用方法

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

您无法使用 SDK 向通知中心添加任何内容。如果在应用程序未运行 iOS 时收到通知，请将其添加到通知中心。您可以像这样在上述方法中显示警报

```
if ([[UIApplication sharedApplication] applicationState] == UIApplicationStateActive)
{
   //show alert
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:51:12.673

如果您的用户在应用程序中，您的应用程序将收到一条消息给应用程序委托。看

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

在[Apple 文档中](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

当应用程序打开时，您无法在通知中心放置通知。通知中心旨在捕获应用程序未激活时发生的通知。但是，调用应用程序委托很有用，因为您可以以任何您想要的方式向用户显示通知，包括构建您自己的通知中心样式动画（如果您想要的话）。

# javascript - Javascript 对象上的 AMD 点菜扩展方法

> ID：12537200
> 
> 赞同：0
> 
> 时间：2012-09-21T19:44:19.260
> 
> 标签：javascript, js-amd

我正在开发一个 javascript 库，并希望在不同模块中的 Javascript 对象上存储可选方法组。

该库有两个模块，我们称它们为 ModuleA 和 ModuleB。ModuleA 导出一个类对象，我们称之为 ClassA，它只有最小的核心功能。ModuleB 定义了一组可选方法，这些方法要设置在 ClassA 的原型上。

在不在库中的第三个模块 ModuleC 中，我想要以下内容：

*   如果我只导入 ModuleA 并实例化 ClassA，我知道我可以使用“InstanceA.MethodA(...)”访问 InstanceA 上的所有 ModuleA 方法。（其他方法也可以在 InstanceA 上定义）

*   如果我同时导入 ModuleA 和 ModuleB 并实例化 ClassA，我知道我可以使用“InstanceA.MethodA(...)”和“InstanceA.MethodB(...)”访问 InstanceA 上的所有 ModuleA 方法和 ModuleB 方法。

我考虑了一些解决方案，但不确定是否有首选的方法来实现这一点。这是我考虑过的：

**ModuleB 改变 ClassA ModuleB**的工厂导入 ModuleA 并改变 ClassA。这些变化能保证持续下去吗？AMD 是否保证跨环境导入相同的模块总是返回相同的对象？

**ModuleB 返回改变的 ClassA** ModuleB 扩展 ClassA 并返回新的 Object。在这个只有两个模块的例子中，这可能工作得很好，但是如果有多个可选的方法模块呢？

请让我知道您是否遇到过类似的情况以及您的解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:57:40.243

这是我的方法：

```
// Module A - Define ClassA
define(function() {
    function ClassA() {}
    ClassA.prototype.methodA = function() {};
    return ClassA;
});

// Module B - Extend
define(function() {
    return function(ClassToExtend) {
         ClassToExtend.prototype.methodB = function() { };
    };
});

// Module C - Sticking
define(function(require) {

    // Define ClassA
    var ClassA = require("module_a");

    // Extend ClassA with custom methods of ModuleB
    require("module_b")(ClassA);

    // Instanciate extended ClassA
    var InstanceA = new ClassA();
} 
```

# php - 类 const 的全局值

> ID：12537205
> 
> 赞同：0
> 
> 时间：2012-09-21T19:44:28.720
> 
> 标签：php, global-variables, constants

好吧，我已经处理了 global 和 const 值。弄清楚这样的事情：

```
<?

global $foo;

class MyClass{

    const BAR = $foo;
... 
```

看起来这是不允许的，所以我只想知道它是有效代码还是只是某些分配中的错误。

PS：我知道有很多方法可以做我所期望的，只是想放弃这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:47:35.950

`const`期望一个常数。`$foo`是变量，不是常数。

[PHP 类常量文档](http://php.net/manual/en/language.oop5.constants.php)中清楚地解释了这一点：

> 该值必须是常量表达式，而不是（例如）变量、属性、数学运算的结果或函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:47:25.420

使用[定义](http://php.net/manual/en/function.define.php)函数。
全局变量是不好的做法

# ruby-on-rails - rspec 测试模型的最小值和最大值

> ID：12537207
> 
> 赞同：1
> 
> 时间：2012-09-21T19:44:36.690
> 
> 标签：ruby-on-rails, rspec

我在寻找测试模型中属性范围的最优雅方法时遇到了一些麻烦。我的模型看起来像：

```
class Entry < ActiveRecord::Base
  attr_accessible :hours

  validates :hours, presence: true, 
    :numericality => { :greater_than => 0, :less_than => 24 }
end 
```

我的 rspec 测试看起来像：

```
require 'spec_helper'
describe Entry do
  let(:entry) { FactoryGirl.create(:entry) }

  subject { entry }

  it { should respond_to(:hours) }
  it { should validate_presence_of(:hours) }
  it { should validate_numericality_of(:hours) }

  it { should_not allow_value(-0.01).for(:hours) }
  it { should_not allow_value(0).for(:hours) }
  it { should_not allow_value(24).for(:hours) }
    # is there a better way to test this range?

end 
```

这个测试有效，但有没有更好的方法来测试最小值和最大值？我的方式似乎很笨拙。测试一个值的长度似乎很容易，但我没有看到如何测试一个数字的值。我试过这样的事情：

```
it { should ensure_inclusion_of(:hours).in_range(0..24) } 
```

但这预计会出现包含错误，我无法通过测试。也许我没有正确配置它？

* * *

我最终在我的两个边界之上和之下进行了测试，如下所示。因为我不限制我测试到小数点后两位的整数。我认为对于我的应用程序而言，这可能“足够好”。

```
it { should_not allow_value(-0.01).for(:hours) }
it { should_not allow_value(0).for(:hours) }
it { should allow_value(0.01).for(:hours) }
it { should allow_value(23.99).for(:hours) }
it { should_not allow_value(24).for(:hours) }
it { should_not allow_value(24.01).for(:hours) } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-26T21:03:29.963

您正在寻找的应该匹配器是 is_greater_than 和 is_less_than 匹配器。它们可以链接到 validate_numericality_of 匹配器，如下所示

```
it {should validate_numericality_of(:hours).is_greater_than(0).is_less_than(24)} 
```

这将验证您范围内的数字是否生成有效变量，并且该范围外的数字返回的错误是正确的。您是正确的， Ensure_inclusion_of 匹配器不起作用，因为它期待不同类型的错误，但是此验证应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:26:16.137

要测试是否涵盖了所有有效值，您可以编写如下内容：

```
it "should allow valid values" do
  (1..24).to_a.each do |v|
    should allow_value(v).for(:hours)
end 
```

您还可以实施边界测试。对于每个边界，可以在任何边界处、上方和下方进行测试，以确保条件逻辑[按 David Chelimsky-2 发布的](http://ruby.11.n6.nabble.com/Checking-for-Range-td3487220.html)预期工作。

因此，对于 2 个边界，您总共需要进行 6 个测试。

# firefox - 为什么 Firefox 总是加载菜单中的下一页以及我请求的页面？

> ID：12537208
> 
> 赞同：1
> 
> 时间：2012-09-21T19:44:38.827
> 
> 标签：firefox, web-applications

我正在开发一个新网站。在测试一些功能时，我有一些调试语句并正在查看日志。Firefox（至少）似乎加载了菜单中的“下一页”以及我单击的页面。如果我有菜单项 ABCDE 并单击 B，那么我会在日志中看到对 mysite.com/B 的请求，然后是对 mysite.com/C 的请求，依此类推。

这是某种前瞻性的表现吗？有什么办法可以避免它（可能在链接上设置一个属性？）问题是我的菜单中的第二页有点重，因为它从 Web 服务加载了大量数据。如果人们想使用该功能，我很高兴他们这样做，但不希望首页的每个访问者都不必要地加载它。这种行为在浏览器中是否一致？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:51:11.460

是的，Firefox 将预取链接以提高用户的感知性能。您可以在此处阅读有关 Firefox 功能的更多信息[https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ](https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ)

无法在客户端的浏览器中禁用此功能，但请求应包含`X-moz: prefetch`可用于确定它是否实际上是预取请求的标头，并可能为预取请求返回空白页面。然后，您可以使用`Cache-control: must-revalidate`它来确保页面在用户实际请求时正确加载。

如果您碰巧将 Worpdress 用于您的网站，您可以使用以下方法禁用带有预取信息的标签：

WordPress 3.0+

```
//remove auto loading rel=next post link in header
remove_action('wp_head', 'adjacent_posts_rel_link_wp_head'); 
```

旧版本：

```
//remove auto loading rel=next post link in header
remove_action('wp_head', 'adjacent_posts_rel_link'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:50:42.343

是的，它被称为预取。可以在客户端关闭，见FAQ：

```
https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ 
```

我不知道通过服务器将其关闭的方法

# android - 尝试 DATABSE.update 显示错误

> ID：12537210
> 
> 赞同：-2
> 
> 时间：2012-09-21T19:45:14.077
> 
> 标签：android, database

应用简介：添加联系人/编辑联系人

- `Contato.java`//显示联系人的ListView，当itemClicked显示信息（姓名/电话）和3按钮（确定/更改/删除）的对话框时，`Alter`按钮将用户发送到：

-`Adicionarcontato.java`要编辑的信息，但是当我编辑并点击按钮“Salvar”（保存）时出现错误：`The application Mensagem(process com.example.mensagem) has stopped unexpectedly. Please try again.`

下面是 ListView 的 Contato.java 的代码。

```
 private void ListaContatos(){      
    ListView user = (ListView) findViewById(R.id.lvShowContatos);
    //String = simple value ||| String[] = multiple values/columns
    String[] campos = new String[] {"nome", "telefone"};

    list = new ArrayList<String>();
    c = db.query( "contatos", campos, null, null, null, null, null);
    c.moveToFirst();
    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("nome")).toString());
           if(!c.moveToNext()) break;
        }
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, list);

    user.setAdapter(adapter);

    user.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            reg = position;
            c.moveToPosition(reg);
            String nome = c.getString(c.getColumnIndex("nome"));
            String telefone = c.getString(c.getColumnIndex("telefone"));
            ShowMessage(nome, telefone);

        }
    });

} 
```

这是 Adicionarcontato.java 中的代码：

```
 public SQLiteDatabase db;
private String mIndex = "";
private String nomeant,foneant;
static final String userTable = "contatos";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.adicionarcontato);
    if(getIntent().getExtras() != null) {
        if(getIntent().getExtras().containsKey("reg")) mIndex = getIntent().getExtras().getString("reg");
    }
    db = openOrCreateDatabase("banco.db", Context.MODE_WORLD_WRITEABLE, null);
    if(!mIndex.equals("")) {
        Cursor c = db.query(false, "contatos", (new String[] {"nome", "telefone"}), null, null, null, null, null, null);
        c.moveToPosition(Integer.parseInt(mIndex));
        nomeant = c.getString(0);
        foneant = c.getString(1);
        EditText nome1 = (EditText) findViewById(R.id.etNome);
        EditText telefone1 = (EditText) findViewById(R.id.etTelefone);
        nome1.setText(nomeant);
        telefone1.setText(foneant);
    }

    AdicionarContato();
    ResetarInfo();      
} 
```

单击“Salvar”按钮时的代码：

```
 public void AdicionarContato() {
    // TODO Auto-generated method stub

       final EditText nm = (EditText) findViewById(R.id.etNome);
       final EditText tlf = (EditText) findViewById(R.id.etTelefone);

    Button add = (Button) findViewById(R.id.bSalvarContato);
    add.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            final String nome = nm.getText().toString();
            final String telefone = tlf.getText().toString();
            if(nome.length() != 0 && telefone.length() != 0){
                if(mIndex.equals("")) {                 
                    ContentValues valor = new ContentValues();
                    valor.put("nome", nome);
                    valor.put("telefone", telefone);
                    db.insert("contatos", null, valor);
                    ShowMessage("Sucesso","O Contato " + nome + " foi salvo com sucesso");
                }
                else {
                    String[] whereArgs = {"nome", "telefone"};

                    ContentValues dataToInsert = new ContentValues();                          
                    dataToInsert.put("nome", nome);
                    dataToInsert.put("telefone", telefone);

                    db.update("contatos", dataToInsert, "nome='"+nomeant+" and telefone='"+foneant+"'", whereArgs);
                    ShowMessage("Sucesso","O Contato " + nome + " foi salvo com sucesso");
                }
            }
        }
    });
} 
```

LogCat 错误表明： `Failure 1 (table contatos already exists) on 0x2205b0 when preparing 'create table contatos(nome varchar(50),telefone varchar(20))'.`

我的 POV：LogCat 中的结果表明该表已经存在，但是在代码中我看不到我在哪里显示我正在尝试创建它，错误，我尝试连接到它而不是创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:35:26.713

您在这里不需要 whereArgs，因为您在 where 子句本身中附加了参数。只需提供 null 来代替 whereArgs -

```
db.update("contatos", dataToInsert, "nome='"+nomeant+"' and telefone='"+foneant+"'", null); 
```

但使用论点总是更好。它可以防止 sql 注入并且还负责转义特殊字符。在你的情况下 -

```
db.update("contatos", dataToInsert, "nome=? and telefone=?", whereArgs); 
```

另外，您的 whereArgs 是错误的。它应该是 -

```
String[] whereArgs = new String[] {nomeant, foneant}; 
```

来自用户的[字体](https://stackoverflow.com/questions/12606951/database-update-crashing-app)`Mukesh Soni`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:00:14.520

还使用 whereArgs 允许一些 SQLite 优化，代码中的另一个问题是您不检查更新和插入操作的返回值

```
db.update("contatos", dataToInsert, "nome='"+nomeant+"' and telefone='"+foneant+"'", null); 
```

```
db.insert("contatos", null, valor); 
```

如果您的操作成功，您应该检查更新和插入的返回值，以检查操作是否真的成功。

您还应该查看[这个](http://www.vogella.com/articles/AndroidSQLite/article.html)关于 Android 上 SQLite 的好教程作为一个很好的起点。

# ruby-on-rails - 用于在具有相同模型名称的数据库之间复制数据的 Rake 任务

> ID：12537211
> 
> 赞同：2
> 
> 时间：2012-09-21T19:45:17.440
> 
> 标签：ruby-on-rails, postgresql, activerecord, rake

我正在使用 rake 任务在架构略有不同的数据库之间移动数据。

当型号名称不同时，这没有问题。例如，将具有“制造商”模型的单独数据库中的信息复制到当前应用程序的“公司”模型中：

```
task :copy_from_old_to_new => :environment do

  require "active_record"

  class Manufacturer < ActiveRecord::Base
  end

  Manufacturer.establish_connection(
    :adapter =>"postgresql",
    :host => "...", 
    :username => "...", 
    :database => "...")

  Manufacturer.find_each do |m|
    Company.new do |c|
      c.name = m.name
      c.location = m.geography
      c.save
    end
  end

  Manufacturer.connection.close

end 
```

但是，当在具有相同模型名称的两个数据库之间进行复制时，这不起作用，因为为外部数据库定义类会覆盖当前应用程序中的类。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:09:51.887

您可以覆盖任何模型的表名：

```
class SomeModel < ActiveRecord::Base
   self.table_name = 'some_table' 
```

如果您仍然希望您的模型以它们的表命名，您可以将它们限定在某个模块中。

也**不要忘记**多个数据库查询在一个事务中运行得更快。

您也可以将 db-connection 参数放在`database.yml`不同的部分下，并通过将其名称传递给`establish_connection`方法来连接它：

```
class SomeModel < ActiveRecord::Base
   establish_connection :name_of_my_db_in_yml 
```

如果有多个模型，您可以创建一些基类并从中派生模型：

```
class MyBase < ActiveRecord::Base
  self.abstract_class = true # important! We don't make STI, just some abstraction.
  establish_connection :name_of_my_db_in_yml

class SomeModel < MyBase
  # connection will be established to your :name_of_my_db_in_yml db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:53:10.050

您可以使用 ActvieRecord 的[连接](http://apidock.com/rails/ActiveRecord/Base/connection)来运行原始 SQL 来来回移动数据，如果它比试图找出解决名称冲突的方法要少的话。

# android - 如何做一个传递复杂对象的http post？

> ID：12537212
> 
> 赞同：1
> 
> 时间：2012-09-21T19:45:17.263
> 
> 标签：android, http-post, asp.net-web-api

下面粘贴的代码（来自 android 代码片段）是一个典型示例，说明如何通过一些简单的参数进行 http post。客户端是安卓客户端。这是我在互联网上能找到的典型...

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/api/TripLocker");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList&lt;NameValuePair&gt;(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

}

我需要传递更复杂的数据。我想做一个 http 帖子，传递一个 TripLocker_s 对象，其中可能包含 500 个 TriplegModel_s 对象。对象的定义粘贴在下面...

```
public class TripLegModel_s
{ 
    public string ourDirection;  //SE, SW, SSW, etc. 
    public double longitude;
    public double latitude;
    public double altitude;
    public DateTimeOffset TimeStamp;
    public double speed;
}

public class TripLocker_s
{
    public ObservableCollection<TripLegModel_s> BreadCrums = new ObservableCollection<TripLegModel_s>();
} 
```

如何使用 HTTP POST 传递此对象？顺便说一句，该服务是一个 ASP.NET Web api 服务。谢谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:21:53.853

转换为/从 JSON。那是最好的办法。 [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/) 它快如闪电。

# python - 在 Mako 模板中使用 from __future__ 导入

> ID：12537213
> 
> 赞同：5
> 
> 时间：2012-09-21T19:45:22.487
> 
> 标签：python, mako

我有

```
<%!
    from __future__ import division
%> 
```

在我的模板文件的最顶部。我得到错误：

```
SyntaxError: from __future__ imports must occur at the beginning of the file 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:03:28.107

您不能`from __future__ import`在 Mako 模板中使用语句。完全没有。

这是因为 Mako 模板被编译成一个 python 文件，为了让它工作，它在那个 python 文件的顶部设置了一些初始结构：

```
# -*- encoding:ascii -*-
from mako import runtime, filters, cache
UNDEFINED = runtime.UNDEFINED
__M_dict_builtin = dict
__M_locals_builtin = locals
_magic_number = 7
_modified_time = 1348257499.1626351
_template_filename = '/tmp/mako.txt'
_template_uri = '/tmp/mako.txt'
_source_encoding = 'ascii'
_exports = [] 
```

只有*在*此初始设置之后，才会包含模板本身的任何代码。你`from __future__ import division`永远不会被放在第一位。

您仍然可以通过将`/`除法运算符的任一操作数转换为浮点数来使用浮点除法：

```
>>> 1 / 2
0
>>> float(1) / 2
0.5 
```

只要您遵循该解决方法，您就可以在没有`division`未来导入的情况下做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:12:07.080

从导入`__future__`会很整洁，但我想不出如何让它工作~~（也许对 Mako 内部更熟悉的人可以）~~. [Martijn](https://stackoverflow.com/a/12537448/770271)解释了为什么这是不可能的。不过，我可以建议一些解决方法。

如果可能，请在模板之外进行除法并将结果放入上下文中。这符合我个人的偏好，即尽可能多地保留模板之外的逻辑。

如果这不是一个选项，那么可以使用 hacky 解决方案，将您的操作数转换为浮点数。如果您需要在一堆不同的地方进行这种划分，您可以在模块级块中添加一个函数：

```
<%!
    def div(a, b):
        return float(a) / float(b)
%> 
```

绝对没有你想象的那么优雅，但它会起作用。

# cognos - 无法在 COGNOS 自定义身份验证提供程序中获取 HTTP 标头

> ID：12537218
> 
> 赞同：0
> 
> 时间：2012-09-21T19:45:47.900
> 
> 标签：cognos, cognos-8, cognos-bi

我正在使用 SSO（Oracle 访问管理器（OAM））实现 COGNOS 自定义身份验证提供程序（Java）。

OAM 的工作方式是在每个 HTTP/HTTPS 请求中查找有效会话令牌 Cookie，如果找不到，它会重定向到 OAM 登录页面。

如果 cookie 有效/授权，它还会添加一个 HTTP HEADER 并在其中设置用户名并重定向到 Cognos URL。Cognos 现在将此调用发送到自定义身份验证提供程序。

现在我的问题是我无法在自定义身份验证提供程序中读取此标头值。我尝试添加一个 ASP 页面，它可以读取值，这证明值正在被传递，并且它们是我在 CAP Java 代码中执行此操作的方式的一些问题。

我正在尝试使用的代码片段。

注意：我可以很好地获取 cookie，但所有标题始终为 NULL。注意2：我尝试过同时使用 INamespaceAuthenticationProvider/IBiBusHeader 和 INamespaceAuthenticationProvider2/IBiBusHeader2

```
public class CAPClass extends Namespace
    implements INamespaceAuthenticationProvider
{
    private String GetSingleValue(String[] value)
    {
        if(value != null && value.length > 0)
            return value[0];
        else
            return null;
    }

    public void createLogs(String var, IBiBusHeader theAuthRequest)
    {
        CreateLog.LogMsg(var + ": " + GetSingleValue(theAuthRequest.getEnvVarValue(var)));
        CreateLog.LogMsg(var + ": " + GetSingleValue(theAuthRequest.getTrustedEnvVarValue(var)));
        CreateLog.LogMsg(var + ": " + GetSingleValue(theAuthRequest.getCredentialValue(var)));
        //CreateLog.LogMsg(var + ": " + GetSingleValue(theAuthRequest.getTrustedCredentialValue(var))); 
    }

    public IVisa logon(IBiBusHeader theAuthRequest)
            throws UserRecoverableException, SystemRecoverableException,
            UnrecoverableException
    {
        String var = "ObSSOCookie";
        String SessTok = GetSingleValue(theAuthRequest.getCookieValue(var));
        CreateLog.LogMsg(var + ": " + SessTok);

        var = "REMOTE_USER";
        createLogs(var, theAuthRequest);
        var = "HTTP_REMOTE_USER";
        createLogs(var, theAuthRequest);
        var = "HEADER_REMOTE_USER";
        createLogs(var, theAuthRequest);
        var = "HEADER_HTTP_REMOTE_USER";
        createLogs(var, theAuthRequest);
        var = "HTTP_HEADER_REMOTE_USER";
        createLogs(var, theAuthRequest); 
        var = "SSO_LOGIN_ID";
        createLogs(var, theAuthRequest); 
        var = "HTTP_SSO_LOGIN_ID";
        createLogs(var, theAuthRequest); 
        var = "HEADER_SSO_LOGIN_ID";
        createLogs(var, theAuthRequest); 
        var = "HEADER_HTTP_SSO_LOGIN_ID";
        createLogs(var, theAuthRequest); 
        var = "HTTP_HEADER_SSO_LOGIN_ID";
        createLogs(var, theAuthRequest); 
        var = "OAM_REMOTE_USER";
        createLogs(var, theAuthRequest); 
        var = "HTTP_OAM_REMOTE_USER";
        createLogs(var, theAuthRequest);
        var = "HEADER_OAM_REMOTE_USER";
        createLogs(var, theAuthRequest);
        var = "HEADER_HTTP_OAM_REMOTE_USER";
        createLogs(var, theAuthRequest);
        var = "HTTP_HEADER_OAM_REMOTE_USER";
        createLogs(var, theAuthRequest);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:38:01.490

使用 SystemRecoverableException [SDK - 如何使用 SystemRecoverableException 获取可信变量](http://www-01.ibm.com/support/docview.wss?uid=swg21343523)

# django - Django 1.4 无法识别我的应用

> ID：12537219
> 
> 赞同：0
> 
> 时间：2012-09-21T19:45:53.220
> 
> 标签：django, settings

我正在使用 django 1.4，app.module 名称似乎没有按预期工作。我的 settings.py 将应用程序包含为“survey.surveys”。

这是我尝试通过预先存在的文件导入的 django shell 转储。错误显示 No module named ....

```
from survey.surveys.views.db import mobile_survey1 
 Traceback (most recent call last):   File "<console>", line 1, in <module>   File "/home/pjain/dev/survey/survey/surveys/views/db.py", line 6, in <module>
from survey.surveys.models import Survey, Section, Question, Option   
 File "/home/pjain/dev/survey/survey/surveys/views/survey.py", line 7, in <module>
from survey.surveys.models import Survey, Section, Question, Option 
 ImportError: No module named surveys.models 
```

但是，当我复制并粘贴中断的确切导入时，它会在 shell 中正常导入。

> 从survey.surveys.models 导入调查、部分、问题、选项

如何在我的项目中修复此导入？

# c# - 如何引用 AppState 变量中的数据？

> ID：12537228
> 
> 赞同：-2
> 
> 时间：2012-09-21T19:46:26.407
> 
> 标签：c#, if-statement, webmatrix, asp.net-webpages

问题是我找不到在 if 条件内测试存储在 AppState["variableName"]（或 App.variableName 或 HttpContext.Current.Application["variableName"] 等）中的任何内容的方法。（它只将它视为一个对象，即使我可以将它绘制在页面上，并使用 Razor 作为我认为的字符串变量）

因此，我无法将它们与实际的字符串值进行比较。

在无数其他尝试中，我尝试过 ToString()，但均无济于事。

我的问题是：如何使用 C# 的 WebMatrix 网页中的 AppState 变量实现全部功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:01:22.580

这里的问题是需要强制转换，而在强制转换和 AppState 变量之间没有空格。在我发布这个问题时，我对 C# 服务器端编程仍然很陌生（嗯，仍然是真的）。一个有效的例子是：

```
if ((string)AppState["myVariable"] == "someString")
{
    //do some stuff
} 
```

此外，无论许多人是否喜欢“全局变量”这个术语，AppState 变量实际上都被认为是一个全局变量。Mike Brind 的 Mikesdotnetting 文章“在 ASP.NET 网页之间传输数据”在应用程序变量下的第一行中明确说明了这一点：

```
"Application variables are also known as global variables." --(Mikesdotnetting) 
```

另外，如果您（无论您是谁）还没有阅读过这篇文章，或者是 WebMatrix 的新手，或者想了解在 WebMatrix 中的页面之间传输数据的所有选项，请帮自己一个忙，阅读这篇易于阅读的文章, 写得很好, 和高度教育的文章在这里找到:

[http://www.mikesdotnetting.com/Article/192/Transferring-Data-Between-ASP.NET-Web-Pages](http://www.mikesdotnetting.com/Article/192/Transferring-Data-Between-ASP.NET-Web-Pages)

# asp.net-mvc - 最初不应选择 DropDownListFor 控件中的第一项

> ID：12537229
> 
> 赞同：1
> 
> 时间：2012-09-21T19:46:29.810
> 
> 标签：asp.net-mvc, selection, html.dropdownlistfor

我的 OpenTestplanListViewModel 有一个 DisplayList，其中 3 个项目绑定到 DropDownList。

当用户明确选择 DropDownList 中的任何项目时，始终会自动选择第一个项目。

使用 ListBoxFor 而不是 DropDownListFor 我没有这个问题。是否有可能告诉 DropDownListFor “最初不要选择任何项目！” ?

```
@model ITMS.Web.Models.OpenTestplanListViewModel

@{
    Layout = null;   
} 

@using (Html.BeginForm("Open", "Testplan"))
{ 
    @Html.ValidationSummary(false)      
    @Html.DropDownListFor(x => x.TestplanIdAndTemplateId, new SelectList(Model.DisplayList, "TestplanIdAndTemplateId", "Name"), new { @class = "listviewmodel" })  
}

public class OpenTestplanListViewModel
{
    [Required(ErrorMessage = "No item selected.")]
    public string TestplanIdAndTemplateId { get; set; } 
    public IEnumerable<OpenTestplanViewModel> DisplayList { get; set; }

    public int? SelectedTestplanId
    {
        get
        {
            return !String.IsNullOrEmpty(TestplanIdAndTemplateId) ? Convert.ToInt32(TestplanIdAndTemplateId.Split(new[] { '_' }).First()) : (int?)null;
        }
    }
    public int? SelectedTemplateId
    {
        get
        {
            return !String.IsNullOrEmpty(TestplanIdAndTemplateId) ? Convert.ToInt32(TestplanIdAndTemplateId.Split(new[] { '_' }).Last()) : (int?)null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:50:40.050

[调查 DropDownListFor SelectedItem](https://stackoverflow.com/questions/5892416/problem-with-dropdownlistfor-selecteditem)的问题。我想如果我正确理解了您的问题，他们就解决了您遇到的问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:52:15.540

```
@Html.DropDownListFor(x => x.TestplanIdAndTemplateId,
    new SelectList(Model.DisplayList, "TestplanIdAndTemplateId", "Name"),
    "-- Select Item --",
    new { @class = "listviewmodel" }) 
```

@Display Name 发布的问题非常相似，只是看了一下。如果您想了解有关模型或控制器如何工作的更多信息，请在此处查看：[DropDownListFor SelectedItem 的问题](https://stackoverflow.com/questions/5892416/problem-with-dropdownlistfor-selecteditem)

`DropDownListFor`类的方法`SelectExtensions`被重载。使用 8 种不同的方法，请查看[http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions(v=vs.108).aspx)，了解有关每种方法的作用和作用的更多信息。

# mysql - SQL (MySQL) vs NoSQL (MongoDB) vs Other (?) 用于海量表

> ID：12537233
> 
> 赞同：0
> 
> 时间：2012-09-21T19:46:43.300
> 
> 标签：mysql, mongodb, database

我正在计划一个新的副项目，最终将涉及分析我收集的数据。它主要是具有不同数量组件的时间序列数据（想想关系数据库列）。时间序列数据在所涵盖的时间段和测量的频率中会有所不同（因此没有太多的标准化信息可以组合成更少的表格）。时间序列集都不会有太多数据，每个序列最多可能有大约 100,000 个测量值，平均大约有 5000 个测量值（想想行）。我预计至少会有 10,000 组不同的时间序列数据（想想表）。

我预计不必执行许多复杂的查询（即使我这样做了，这个项目也没有时间敏感，因为它实际上只是批处理式分析，所以我可以在从数据库中选择数据后用软件做复杂的事情）所以我也在考虑像MongoDB这样的NoSQL数据库。

谁能告诉我 MySQL 或 MongoDB 是否是更好的选择？如果是 MySQL，是哪个存储引擎？如果两者都没有，你有更好的建议吗？另外，如果桌子的数量从 10,000 增加到 500,000 或更多，这会改变您的答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:50:00.080

我想推荐一个名为[SciDB.org](http://scidb.org)的新 DBMS 。他们声称它不是典型的 DBMS，因为它更侧重于科学分析处理。它专门针对时间序列数据进行了优化，并且可以进一步优化以在云上运行。

它针对时间序列数据进行了优化，因为它将数据存储在列中，而不是行中，从而允许在时间维度中快速访问。

你应该检查一下。

我用它来分析在几个月的时间内以每秒 2000 个样本进行采样的数据。

# javascript - 使用RequireJS优化的奇怪输出

> ID：12537235
> 
> 赞同：1
> 
> 时间：2012-09-21T19:46:50.007
> 
> 标签：javascript, requirejs

我正在尝试从终端优化 javascript 模块。这是我运行它的构建文件（在一个名为 build.js 的文件中）：

```
({
    appDir: '.',
    baseUrl: '.',

    optimize: 'none',
    dir: '.',

    stubModules: ['cs'],

    paths: {
        'cs': 'cs',
        'coffee-script': 'coffee-script'
    },

    modules: [{
        name: 'main',
        exclude: ['coffee-script']
    }]
}) 
```

在终端中，我正在运行

```
r.js -o name=build out=main-built.js 
```

这是 main-build.js 的结果内容：

`({appDir:".",baseUrl:".",optimize:"none",dir:".",stubModules:["cs"],paths:{cs:"cs","coffee-script":"coffee-script"},modules:[{name:"main",exclude:["coffee-script"]}]}),define("build",function(){})`

我不明白这个输出。为什么我的模块根本没有输出？为什么在我专门写优化时运行 uglify.js：'none'？为什么 r.js 在我运行 -o 时没有抛出任何错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:13:28.787

“名称”是您的入门模块的名称。这实际上与您的构建名称相同，所以这可能就是为什么会出现混淆......

```
build.js
({
    name: 'mymodule', // replace this by the name of your first module, the wrapper.
    appDir: '.',
    baseUrl: '.',

    optimize: 'none',
    dir: '.',

    stubModules: ['cs'],

    paths: {
        'cs': 'cs',
        'coffee-script': 'coffee-script'
    },

    modules: [{
        name: 'main',
        exclude: ['coffee-script']
    }]
}) 
```

我与节点一起使用的命令行：`node r.js -o build.js`

我不是requireJS专家或任何东西，我只是发现了这些我认为是错误的东西。您可以看到 r.js 在文件末尾构建了一个名为 build 的模块。

# logging - 包装 NLog 和 StackTrace 信息

> ID：12537238
> 
> 赞同：1
> 
> 时间：2012-09-21T19:47:04.733
> 
> 标签：logging, ninject, wrapper, stack-trace, nlog

如果您将 NLog 包装在另一个类中，您的所有堆栈跟踪信息都指向包装类，而不是您感兴趣的堆栈中的正确位置。您如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:32:33.563

您必须将包装器的类型传递给 Logger.Log() 方法。请看[https://stackoverflow.com/a/7486163/438760](https://stackoverflow.com/a/7486163/438760)

# octave - 在 Octave 中，如果文件名存储在变量中，您如何获取文件？

> ID：12537239
> 
> 赞同：3
> 
> 时间：2012-09-21T19:47:03.723
> 
> 标签：octave

我觉得这一定很容易，但我在任何地方都找不到答案。在 octave 中（可能是 matlab，但我尚未验证），您可以通过执行来获取文件的内容

```
 source /path/to/filename 
```

但是，假设我将文件名存储在一个名为 file 的变量中。如果您这样做`source file`，它将视为`file`路径而不是文件中存储的内容。我尝试`eval`在不同的地方插入，但如果这是答案，我还没有找到正确的调用。我不知道多少八度；肯定有一个我忽略的微不足道的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:09:35.473

不确定八度，但尝试使用函数调用

```
source(fname) 
```

这就是你至少在matlab中所做的。

# javascript - Web应用开发建议

> ID：12537240
> 
> 赞同：-11
> 
> 时间：2012-09-21T19:47:06.863
> 
> 标签：javascript, jquery, html

我正在创建自己的网站。我想知道我们是否可以在其背景中放置实时（移动）图片。

如果是的话，谁能给我一些好的网站，我可以从中了解如何让我的网站比其他网站更好？

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T19:50:25.653

看在上帝的份上，忘记移动背景。当您阅读时，您的报纸背景会移动吗？不？然后不要在互联网上这样做来拯救我们的眼睛。

# sql - 将具有多个多对多关系的模式重构为语义不同但结构相似的实体？

> ID：12537249
> 
> 赞同：2
> 
> 时间：2012-09-21T19:47:29.197
> 
> 标签：sql, sql-server, database-design, schema

我有一个具有许多多对多关系的模式，我看到的是许多相似的数据结构分布在具有不同名称的表中。我的直觉是，有一种更有效/更理想的方法可以实现相同的结果，但我不确定哪些替代方法属于合理的设计/最佳实践。

注意：国家、交通类型和人——它们现在存在——都可以用 Id 和 Name 列表示，但将来可能会有额外的字段。也许我追求的是某种类似于继承的技术？

这是我所拥有的图表：

![在此处输入图像描述](../Images/39c32491201e4707371d3ae19791cdc5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:54:03.157

不要把你认为相似的东西混为一谈；当您需要存储有关每个实体的更多信息时，它们可能会在以后出现分歧。

您的数据库中的表数量有问题吗？

您可能从面向对象的设计位置考虑问题，并认为您可以使用某种“父”表来表示公共部分 - 数据库不是这样工作的。

如果您不小心，您最终会得到一个[MUCK](http://rodgersnotes.wordpress.com/2010/09/21/muck-massively-unified-code-key-generic-three-table-data-model/)或[OTLT](https://stackoverflow.com/questions/9380765/one-true-lookup-table-advantages-vs-disadvantages)表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:55:14.010

马上，我会将单独的实体/对象/（汽车与动物）放在单独的桌子上。

此类实体重叠属性的机会充其量是微乎其微的。

问题是，一旦这些实体开始在您的系统中发展，您会发现单个表将包含数百个列，每个实体都填充单个列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:29:47.120

不用担心。你做对了。

在高度规范化的模式中，您将拥有大量几乎相同的表。

正如其他人所说，您开始考虑的（用于多种事物的通用表）是一个非常糟糕的主意，并且有很多缺点。

最大的缺点是，在维护数据完整性方面，您的关系变得毫无用处。没有什么可以阻止某人将 CountryCode 分配到应有 TrafficTypeId 的位置，等等。

另一个缺点是拥有一个较大的表可能会比许多较小的专用表性能更差。由于额外的，不必要的阻塞。

您可能仍想实现某种类型的继承概念，但最好在访问数据库的任何代码中完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T20:09:02.873

我不明白继承如何适用于您的案件。但是如果你对继承感兴趣，因为它适用于 SQL 表或关系，这里有一些事情要查找：

在 ER 建模级别查找“ER 模型专业化”。这是扩展 ER 模型图“是 A”关系的方式。

在表设计级别，查找“类表继承”和“共享主键”以了解几种技术，它们一起使用，有点模仿 OOP 中继承为您所做的事情。您可能还想查找“单表继承”以获得更简单但可能更浪费的替代方案。

# powershell - 告诉 PowerShell ISE 不要将 stderr 发送到 Write-Error

> ID：12537254
> 
> 赞同：9
> 
> 时间：2012-09-21T19:47:58.213
> 
> 标签：powershell, powershell-ise

当可执行文件写入标准错误流 ( `stderr`) 时，PowerShell 控制台和 PowerShell ISE 的行为不同。控制台 (powershell.exe) 将其显示为标准输出。例如，当我在非存储库上获得 Mercurial 状态时，它会写入标准错误：

```
> hg st -R C:\Windows
abort: repository C:\Windows not found! 
```

但是，在 PowerShell ISE ( `powershell_ise.exe`) 中，该错误会传递给 PowerShell 的`Write-Error`cmdlet：

```
> hg st -R C:\Windows
hg.exe : abort: repository C:\Windows not found!
At line:1 char:3
+ hg <<<<  st -R C:\Windows
    + CategoryInfo          : NotSpecified: (abort: repository C:\Windows not found!:String) [], RemoteExcepti 
   on
    + FullyQualifiedErrorId : NativeCommandError 
```

**有没有办法将 ISE 配置为像控制台一样运行，而不是将 stderr 流发送到`Write-Error`？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T21:46:48.983

将标准错误输出重定向到标准输出“应该”工作，但它在 ISE 中不起作用。在这种情况下，最好的办法是像这样使错误输出静音：

```
& {
    $ErrorActionPreference = 'SilentlyContinue'
    hg st -R C:\Windows 2>&1
} 
```

通过在嵌套范围内执行设置此变量，您可以避免全局设置它。当上述范围退出时，*全局*版本`$ErrorActionPreference`仍设置为之前的任何版本。

不幸的是，ISE 和控制台的行为不同，但我的理解是，使用“控制台”，另一个控制台应用程序只是获取控制台句柄，因此*它*直接输出到控制台（绕过 PowerShell）。ISE 不是基于控制台的，因此它试图使本机 stderr 与 PowerShell 错误流很好地配合使用。在这种情况下，IMO 控制台的行为并不理想。那么让 ISE 与控制台保持一致还是让 ISE 更好地处理 stderr 更好（除了关于不尊重流重定向的一点）？显然 PowerShell 与后者一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-18T11:17:50.460

```
hg st -R C:\Windows 2>&1 | %{ if ($_ -is [System.Management.Automation.ErrorRecord]) { $_.Exception.Message } else { $_ } } 
```

这会保留 stderr 输出并将其作为正常输出发送，而不是丢弃它。

# objective-c - 为什么 NSURLErrorDomain -1000 (bad URL) 只针对特定的 NSURL？

> ID：12537256
> 
> 赞同：0
> 
> 时间：2012-09-21T19:47:58.447
> 
> 标签：objective-c, ios, url, nsurl, instagram

我查看了所有能找到的相关问题（搜索：“NSURLErrorDomain -1000”），但找不到解决方案。也许有老鹰眼的人可以帮助我。

我正在从 iOS 6 调用 Instagram API（但有效的部分已经在 iOS 5.1 中进行了）。我使用 Koolistov 的[NSURL+PathParameters.h](http://koolistov.net/blog/2011/10/02/right-path-to-url-parameters/)作为助手，我的理解是它确实转义了 URL 中必要的所有内容。

一些预备知识：

```
NSDictionary *parameters = nil;
NSURL *URL = [NSURL URLWithString:@"https://api.instagram.com/"];
parameters = [NSDictionary dictionaryWithObjectsAndKeys:
    INSTAGRAM_CLIENT_ID, @"client_id", nil];
URL = [URL URLByReplacingPathWithPath:@"/v1/tags/awesome/media/recent"];
URL = [URL URLByAppendingParameters:parameters]; 
```

（`INSTAGRAM_CLIENT_ID`是一个包含我的应用程序客户端 ID 的宏。）

此 URL 按预期工作。

但是，如下构造的 URL`NSURLErrorDomain`始终为我提供 code = -1000（在设备上以及在 iPhone 5.1 和 6.0 模拟器上）：

```
double latitude = 48.858844;
double longitude = 2.294351;
parameters = [NSDictionary dictionaryWithObjectsAndKeys:
                  [NSNumber numberWithDouble:latitude], @"lat",
                  [NSNumber numberWithDouble:longitude], @"lng",
                  [NSNumber numberWithInt:2000], @"distance",
                  INSTAGRAM_CLIENT_ID, @"client_id",
                  nil];
URL = [URL URLByReplacingPathWithPath:@"/v1/media/search"];
URL = [URL URLByAppendingParameters:parameters]; 
```

然后我创建一个`NSURLRequest`：

```
NSURLRequest *req = [NSURLRequest requestWithURL:URL]; 
```

如果我从 中打印出 URL `NSURLRequest`，看起来还不错：

`https://api.instagram.com/v1/media/search?client_id=REDACTED&distance=2000&lat=48.858844&lng=2.294351`

我正在使用`MyDownloader`Matt Neuburg 的[Programming iOS 5](https://github.com/mattneub/Programming-iOS-Book-Examples)第 37 章。我创建了一个实例`MyDownloader`并将其传递给`NSURLRequest`：

```
MyDownloader *downloader = [[MyDownloader alloc] initWithRequest:req]; 
```

根据[RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)，下划线或点不需要转义，我看不到任何其他要转义的内容，并且 NSURL+PathParameters.h 无论如何都应该处理转义。*那么这里发生了什么？*我错过了什么？

更奇怪的是，这种构建 URL 的更简单的方法也会产生相同的错误：

```
parameters = [NSDictionary dictionaryWithObjectsAndKeys:
    INSTAGRAM_CLIENT_ID, @"client_id", nil];
URL = [URL URLByReplacingPathWithPath:@"/v1/media/popular"]; 
```

它看起来也不错：

`https://api.instagram.com/v1/media/popular?client_id=REDACTED`

所有这些 URL 都可以在[Instagram API 控制台](http://instagram.com/developer/api-console/)中使用，也可以直接在 Safari 中使用。这些 API 调用不需要 OAuth 身份验证，只需要客户端 ID。

如果有人能指出问题所在，我将不胜感激。

**编辑**：编码`lat`和`lng`值：

```
[[[NSNumber numberWithDouble:latitude] stringValue]
    stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] 
```

URL 或行为没有变化。但是当我用文字替换点时`%2E`，路径助手对百分号进行编码，导致`%252E`......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:47:00.220

解决了。上面显示的 URL 没有任何问题。问题在于周围的代码。我正在回答我自己的问题，以便使用 Instagram API 的人可能会从答案中受益。

事实证明，`/v1/tags/tagname/media/recent`API 的端点`pagination`在 JSON 响应中返回了一个对象，但`/v1/media/search`并`/v1/media/popular`没有。从该对象内部，您可以找到下一批照片的 URL，其值名为`next_url`.

因为我没有正确阅读文档（而且有些地方有点混乱），而且不同的 Instagram API 端点的工作方式不同，所以我的代码希望`next_url`在所有这些情况下都能找到价值。因此，我得到的“错误 URL”`NSURLConnection`指的是第二个连接，而不是初始 URL。由于我没有意识到在其他两种情况下没有分页，我认为问题一定出在初始 URL 中。

# c - 链接到多个库，其中一个包含一组系统调用

> ID：12537262
> 
> 赞同：6
> 
> 时间：2012-09-21T19:48:19.903
> 
> 标签：c, linux, linker, posix, ld

所以这是我正在研究的场景：

我有 3 个库 - A、B 和 C。

*   库 A 实现函数`foo()`并将其作为 API 公开。
*   函数`foo()`调用 POSIX`write()`调用来写入一些数据。
*   `write()`库 B使用链接器 -wrap 选项将包装器写入glibc 调用。
*   库 C 链接到 A 和 B。

库 C 进行的任何`write()`调用都将被包装库 B 拦截。但是，我的问题是，如果库 C 调用`foo()`，`write()`foo() 中的调用会被 B 拦截吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:50:23.570

如果`A`与 链接`-wrap=write`，`foo`将调用包装器。如果不是，它不会。

`write`对in 的调用也是如此`C`。就呼叫而言`A`，两者之间没有任何区别。`C``write`

# windows - 循环字符串替换的批处理文件

> ID：12537263
> 
> 赞同：1
> 
> 时间：2012-09-21T19:48:22.910
> 
> 标签：windows, batch-file

我有一个将目录路径作为参数的批处理文件。

在该文件夹中，我需要将任意数量的 .ai.pdf 或 .pdf 文件转换为 jpg 文件。转换不是我的问题（我正在使用 imageMagick），但删除完整的扩展是。

我需要能够从文件名中删除完整的 .ai.pdf（7 个字符）或 .pdf（4 个字符）并将其替换为 .jpg 我不能在 for 循环中仅使用 ~n，因为它不会在有 .ai.pdf 的实例中删除 .ai（导致文件名.ai，我只需要文件名）

StackOverFlow 上有很多关于这个 [StackOverFlow 示例的帖子](https://stackoverflow.com/questions/7005951/batch-file-find-if-substring-is-in-string-not-in-a-file)

但无论我尝试什么，在从文件名中截断适当数量的扩展名时都会出错。

这是我的代码。这是我创建的第一个主要批处理文件，所以我对任何事情都持开放态度，除了安装更多程序来完成这项工作。

杀死我的事情是，我有这个工作，并且在从一台服务器到另一台服务器的洗牌和一周的假期中，工作代码被......放错了位置。

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
set dir1=%1
echo recieved !dir1!
for /R %dir1% %%a in (*.pdf) DO ( 
  echo file found !a!
  set b=th_%%~nxa
  if x%b:ai.pdf=%==x%b% set b=%%~dpa!b:~0,-7!
  if not x%b:ai.pdf=%==x%b% set b=%%~dpa!b:~0,-4!

  REM convert -density 64 "%%a" +matte -resize 15%% "!b!.jpg"
  @echo !b! converted
)

ENDLOCAL 
```

该文件告诉我 **%~dpa!b:~0,-7!** 是无效的替换

有任何想法吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T06:15:30.013

先说几点：

`!a!``%%a`是两个不同的变量 。

`if x%b:ai.pdf=%==x%b%`并不意味着你认为它的作用。仅当`%b%`不包含时才会**如此**`.ai.pdf`。

再次，`if not x%b:ai.pdf=%==x%b%`并不意味着你的想法。当`%b%` **包含**`.ai.pdf`. _

不需要做任何验证和切割，只需搜索和替换。（这就是`%y:x=z%`符号的作用，在本例中，它用 . 替换了每个inside `x`。）让 search 和 replace 进行验证。它只会替换与搜索匹配的内容。这将加快您的批处理文件。`%y%``z`

最后，由于您在`()`代码块中，因此您需要在`setlocal`语句中使用延迟扩展。这是因为代码块中的所有内容都被视为在一行中。这意味着如果您更改代码块内的变量，您将无法使用 % 表示法看到新值。相反，您需要将`%`'s替换为 ' `!`s。例如...

```
setlocal enableDelayedExpansion
set x=Hello
(
  set x=Goodbye
  echo I don't know why you say "!x!", I say "%x%".
) 
```

...会给你旧的披头士歌词...

```
I don't know why you say "Goodbye", I say "Hello". 
```

* * *

无论如何，关于你的答案：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
set dir1=%1
echo recieved !dir1!
for /R %dir1% %%a in (*.pdf) DO ( 
  :: Adding a colon to the end of the filename allows the extension to be ID'd
   : without explicitly looking at it with an IF statement, while simultaneously
  :: avoiding similar looking character groupings inside the filename.
  set b=th_%%~nxa:
  :: No need to check for case, the substitution will do that for you.
  set b=!b:.ai.pdf:=.jpg!
  set b=!b:.pdf:=.jpg!

  REM convert -density 64 "%%a" +matte -resize 15%% "!b!"
  echo %%a converted into !b!
)

ENDLOCAL 
```

缺点是这两个文件...

```
X.ai.pdf
X.pdf 
```

...将被翻译成`th_X.jpg`，从而为两个不同的文件创建重复文件名的可能性。

但这是您将两种类型的文件名视为相同的概念所固有的。如果您没有避免这种重复的方法，那么将 保留`.ai`在文件上可能不是一个坏主意，从而创建两个文件：`th_X.jpg`和`th_X.ai.jpg`，消除重复文件名的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:45:49.370

嗯...这对您有用吗：（
`for /R %F in (*.pdf) do @for %G in ("%~nF") do @echo %~nxF ==^> %~nG.jpg`
直接从 cmd 执行，如果从批处理运行，则替换`%`为`%%`）。
如果存在与文件的基本名称相同的名称（如果您碰巧有一个名为的子目录，`file.pdf`则会变成），这具有将文件的大小写更改为目录的大小写的特殊效果，但就是这样（我认为）。`FILE.jpg``FILE`

这也假设您的基本名称不同（因此没有`file.ai.pdf`并且`file.pdf`在同一目录中）

# iphone - Monotouch 中的 WebClient（仍然）不可靠吗？

> ID：12537269
> 
> 赞同：0
> 
> 时间：2012-09-21T19:48:37.453
> 
> 标签：iphone, xamarin.ios, webclient

我有一些代码使用在 WP Emulator 和 WP 设备中运行的 WebClient 类。我已经使用 Monotouch 在 iPhone 模拟器上成功运行了相同的代码。但在 iPhone 本身上，应用程序崩溃了。

根据此链接，这可能是由于编码[http://support.xamarin.com/customer/portal/articles/533484-webclient-encoding-issue-in-monotouch-when-building-for-release](http://support.xamarin.com/customer/portal/articles/533484-webclient-encoding-issue-in-monotouch-when-building-for-release)

所以我希望这能解决我眼前的问题。

但这引出了我的问题。在我的研究中，我发现这篇文章来自 2010 [http://escoz.com/blog/webclient-reliability-problems-under-monotouch/](http://escoz.com/blog/webclient-reliability-problems-under-monotouch/)据此，Monotouch 上的 WebClient 的可靠性存在一般问题，应该避免。这是真的 ？如果是这样，它已经解决了吗？

# iphone - 当 Tableview 从 RootCtrl 转换到 DetailCtrl iphone sdk 时应用程序崩溃

> ID：12537271
> 
> 赞同：0
> 
> 时间：2012-09-21T19:48:57.557
> 
> 标签：iphone, sdk, crash, tableview

在我的 iphone 应用程序中，我手动创建了我的 tableview，我将其插入到视图中。

我使用此代码进行转换：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath {

DetailViewController *dvController = [DetailViewController alloc];
dvController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:dvController animated:YES];

[dvController release];
dvController = nil;
} 
```

我的错误是：线程 1：程序接收到的信号：'SIGABRT' 错误已在 main.m 上修复：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:53:07.690

试试这个 -

```
DetailViewController *dvController = [[DetailViewController alloc]initWithNibName:@"DetailViewController" bundle:nil]; 
```

# fancybox - 2 包含单独表单值的 Fancybox 不提交（测试页）

> ID：12537274
> 
> 赞同：0
> 
> 时间：2012-09-21T19:49:04.740
> 
> 标签：fancybox, fancybox-2

我之前曾问过这个问题，但过了一段时间后，我觉得我必须更明确地处理所遇到的问题。

**设想：**

*   1 个表格，2 个包含字段的 Fancybox。一个 Fancybox 包含“字段 1”，另一个包含“字段 2”。

**对于期望的结果：**

1.  去[http://testing.myautoiq.com/fancybox](http://testing.myautoiq.com/fancybox)
2.  点击“从主页提交”

您会注意到 field_1 和 field_2 的值都在 _POST 变量中返回。

**产生错误 1：**

1.  单击“打开 FB 1”以查看 field_1
2.  点击“从 FB 1 提交”

正如您将注意到的，仅返回 field_2。

**产生错误 2：**

1.  单击“打开 FB 2”，您会看到 field_2
2.  点击“从 FB 2 提交”

正如您将注意到的，仅返回 field_1。

随意挖掘源头，那里没有什么不寻常的地方。这是FB的问题吗？如果是这样，如何纠正？我要疯了在这里尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:36:50.793

首先你必须了解fancybox是如何处理`inline`内容的：当你打开fancybox时，目标`inline`内容会从它在DOM中的位置“**移动**”到fancybox中（而是留下一个占位符）

...在您的情况下，这些字段被“移出”，`form`因此当您从fancybox 中提交它时，字段`field_1`或`field_2`不存在于其中，`form`因此它们无法返回任何值。

您需要重新编写代码的逻辑。我要做的是将fancybox内`bind`的链接提交给关闭fancybox的*事件*（将字段返回到它们在里面的位置）并在之后*提交*，所以而不是这些：`form`*`form`*`form`**

 **```
<a href="#" onClick="document.testform.submit();">Submit from FB 1</a> 
```

和

```
<a href="#" onClick="document.testform.submit();">Submit from FB 2</a> 
```

会这样做

```
<a class="submit" href="#nogo" >Submit from FB 1</a> 
```

和

```
<a class="submit" href="#nogo" >Submit from FB 2</a> 
```

**请注意**，我添加`class="submit"`了处理来自此类选择器的事件。

然后，在脚本顶部创建一个标志（解释如下）

```
var subMitted = false; 
```

和选择器`bind`的`click`事件`.submit`：

```
$(".submit").bind("click", function(){
  subMitted = true; // set to true when we click on the selector .submit only
  $.fancybox.close();
}); 
```

并将`afterClose`回调添加到您的 fancybox 自定义脚本

```
$(".fancybox").fancybox({
 afterClose: function(){
   // will submit if we clicked the selector .submit
   if(subMitted){
      subMitted = false; // re-initialize the flag
      $("form[name='testform']").submit();
   }
 }
}); 
```

如果`subMitted`是`true`，我们点击`.submit`选择器，所以我们将*提交*关闭后的`form`fancybox（我们不*提交*如果`form`fancybox是使用`close`按钮关闭的）

这样，您的表单将始终返回所有值，无论它是否从 fancybox 内部提交。**

# facebook - Google Chrome 扩展程序 + 使用 Facebook 登录 + Parse

> ID：12537275
> 
> 赞同：10
> 
> 时间：2012-09-21T19:49:17.547
> 
> 标签：facebook, parsing, facebook-graph-api, google-chrome-extension

我正在尝试构建一个 google chrome 扩展，一个用例要求用户可以使用 Facebook 登录并通过帖子分享到他们的 Facebook 墙上。

正确的应用程序流程是这样的：

1.  用户点击 google chrome 扩展 - 召唤扩展页面
2.  用户在扩展页面（或在新选项卡中）单击“使用 facebook 登录”，然后用户会看到来自 Facebook 的“批准应用程序”
3.  用户批准应用
4.  用户被定向到一个新页面，感谢他们安装和处理所有需要的用户信息，或者用户被发送回谷歌浏览器扩展（更好的方式）
5.  如果用户没有被发送回谷歌浏览器扩展，他们应该被告知这样做，但此时如何将数据获取到谷歌浏览器扩展？
6.  用户打开 Google chrome 扩展程序，他们现在应该看到“Hi John”或类似内容，而不是“使用 Facebook 登录”
7.  用户不能在 Facebook 上发帖

我的主要问题是使用 Facebook 登录，并将数据返回到扩展程序。

我创建了一个 Facebook 应用程序，完成了大多数特定于应用程序的编码，我试图让应用程序只保留 javascript（但如果没有其他方法，我可以添加 php），尝试使用标准的 Facebook javascript，并尝试使用 Facebook 的桌面客户端。

之前有没有其他人经历过连接 Google Chrome 扩展和 Facebook 登录的过程？

最后一点，我正在尝试使用 Parse 来完成这个项目，所以如果你有任何额外的 insite 那就太好了！

* * *

我试图完成的一个很好的例子类似于 Any.do [https://chrome.google.com/webstore/search/any.do?utm_source=chrome-ntp-icon](https://chrome.google.com/webstore/search/any.do?utm_source=chrome-ntp-icon)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T22:02:28.907

我最近遇到了这种问题；）。这有点复杂，但我会尝试以最简单的方式解释它。

在您的扩展程序（可能是选项页面）中放置“使用 facebook 登录”链接，该链接重定向到：`https://www.facebook.com/dialog/oauth?client_id=<APP_ID>&response_type=token&scope=<PERMISSIONS>&redirect_uri=http://www.facebook.com/connect/login_success.html`

当有人点击此链接时，将被要求授予权限等（Facebook 页面）。如果有人同意，页面将加载：`http://www.facebook.com/connect/login_success.html`带有参数`access_token`和`expires_in`地址。

现在，背景页面应该有这样的脚本：

```
var successURL = 'www.facebook.com/connect/login_success.html';

function onFacebookLogin(){
  if (!localStorage.getItem('accessToken')) {
    chrome.tabs.query({}, function(tabs) { // get all tabs from every window
      for (var i = 0; i < tabs.length; i++) {
        if (tabs[i].url.indexOf(successURL) !== -1) {
          // below you get string like this: access_token=...&expires_in=...
          var params = tabs[i].url.split('#')[1];

          // in my extension I have used mootools method: parseQueryString. The following code is just an example ;)
          var accessToken = params.split('&')[0];
          accessToken = accessToken.split('=')[1];

          localStorage.setItem('accessToken', accessToken);
          chrome.tabs.remove(tabs[i].id);
        }
      }
    });
  }
}

chrome.tabs.onUpdated.addListener(onFacebookLogin); 
```

这就是您从 facebook 获取访问令牌的方式。[现在您可以向https://graph.facebook.com](https://graph.facebook.com)发送请求。

希望我有所帮助；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-19T17:43:30.617

回答您的问题（没有足够的信用发表评论）。

在您的 Facebook 开发人员设置中，单击顶部的高级选项卡，确保“客户端 OAuth 登录”和“嵌入式浏览器 OAuth 登录”都移至“是”，然后我必须添加“ [http://www.facebook. com/](http://www.facebook.com/) " 到有效的 OAuth 重定向 URI

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-12T10:40:04.313

现在 facebook 已更改“客户端 Oauth 登录”按钮位置。您需要添加产品，添加 facebook 登录后，您会在这里找到

[![在此处输入图像描述](../Images/2da0d8ce506fde3381d1a24df72bb635.png)](https://i.stack.imgur.com/gAuP4.png)

# bug-tracking - 一旦在 MantisBT 中输入错误，有没有办法更改“项目”？

> ID：12537283
> 
> 赞同：1
> 
> 时间：2012-09-21T19:50:10.473
> 
> 标签：bug-tracking, mantis

从标题可以看出，我在 MantisBT 中输入了一个错误，但错误地选择了错误的项目。我可以返回并编辑 bug 的大部分参数，但它不允许我更改项目。我查看了配置，那里似乎也没有选择。有没有办法通过将项目更改为正确的值来修复错误信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T23:10:27.000

如果您的系统配置和访问级别允许，您可以在项目之间移动问题（在“*查看问题详细信息*”页面中查找“*移动*”按钮）

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-07T18:54:23.900

您还可以通过执行以下操作来移动多个问题：

*   转到查看问题页面。
*   过滤您要移动的问题（可选）
*   从列表中勾选要移动的问题或全选。
*   转到列表底部并选择“移动”，然后单击“开始”。
*   选择要移动到的项目。

请注意，由于 MantisBT 在所有项目中都使用通用 ID，因此移动问题不会破坏指向它的链接，因为指向问题的 URL 将保持不变。*

# jakarta-ee - com.sun.jersey.server.impl.application.WebApplicationImpl _handleRequest

> ID：12537285
> 
> 赞同：3
> 
> 时间：2012-09-21T19:50:24.467
> 
> 标签：jakarta-ee, jar, jersey, jax-rs

我正在构建一个 JAX-RS 项目，它使用配置文件重定向到我定义了 HTTP 方法的邮件类。在调试时，控制转到配置文件，如下所示：

```
package com.ODSResrcSysApp;

import java.util.HashSet;
import java.util.Set;
import javax.ws.rs.core.Application;

public class ODSResrcSysConfig extends Application 
{
    public Set<Class<?>> getClasses() {
        Set<Class<?>> classes = new HashSet<Class<?>>();
        classes.add(ODSResrcSysSvcREST.class);
        return classes;
    }
} 
```

从这里开始，控件应该转到 ODSResrcSysSvcREST.class，其中 uri 模式定义如下。

```
package com.ODSResrcSysApp;

import java.io.IOException;
import java.io.InputStream;
import java.sql.Clob;
import java.sql.ResultSet;
import java.util.Properties;

import javax.ws.rs.GET;
import javax.ws.rs.MatrixParam;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

@Path("/*")
public class ODSResrcSysSvcREST 
{
    @GET
    @Path("/Test")
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public String gettstCon() throws WebApplicationException
    {
        System.out.println("Entering gettstCon method.");

        String result = null;
        ODSConnection odsconn = new ODSConnection();

        try
        {
            result = odsconn.connect();
            if(result == "connection successful")
            {
                result = "<ResourceSystem>Connection established successfully</ResourceSystem>";
            }
            else
            {
                result = "<Error>Error occured while establishing connection. If issues persists, contact CTS SOA team.</Error>";
            }
        }
        catch (Exception ex)
        {
            result = ex.getMessage().toString();
        }
        return result;
    }

} 
```

此时出现以下错误：

```
com.sun.jersey.server.impl.application.WebApplicationImpl _handleRequest
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
Throwable occurred: java.lang.StringIndexOutOfBoundsException
    at java.lang.String.substring(String.java:1093)
    at com.sun.jersey.server.impl.application.WebApplicationContext.pushRightHandPathLength(WebApplicationContext.java:282)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:130)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:736)
Sep 21, 2012 2:02:28 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet ODS Resource System JAX-RS REST Service threw exception
Throwable occurred: java.lang.StringIndexOutOfBoundsException
    at java.lang.String.substring(String.java:1093)
    at com.sun.jersey.server.impl.application.WebApplicationContext.pushRightHandPathLength(WebApplicationContext.java:282)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:130)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:736) 
```

这个项目的 web.xml 看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>ODS_ResrcSysApp</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>ODS Resource System JAX-RS REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>javax.ws.rs.Application</param-name>
      <param-value>com.ODSResrcSysApp.ODSResrcSysConfig</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>ODS Resource System JAX-RS REST Service</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

不确定是什么导致了错误。同一工作空间中的另一个 JAX-RS 项目可以正常工作，即使它使用相同的 jar 文件集。通过代码进行调试时，我还看到了以下页面：

```
DeferredResourceConfig.class

The source attachment does not contain the source fir the file DeferredResourceConfig.class ....... 
```

我的项目中包含的 jar 文件列表是：

```
 1\.  asm-3.1.jar 
 2\.  cloveretl.engine.jar 
 3\.  commons-lang.jar 
 4\.  ibm-wink-jaxrs.jar
 5\.  jackson-core-asl-1.8.3.jar 
 6\.  jackson-jaxrs-1.8.3.jar
 7\.  jackson-mapper-asl-1.8.3.jar 
 8\.  jackson-xc-1.8.3.jar
 9\.  jersey-client-1.9.1.jar 
 10\. jersey-core-1.9.1.jar 
 11\. jersey-json-1.9.1.jar
 12\. jersey-server-1.9.1.jar 
 13\. jettison-1.1.jar 
 14\. jsr311-api.jar
 15\. jsr311-api-1.1.1.jar 
 16\. madapi.jar 
 17\. slf4j-api.jar 
 18\. slf4j-jdk14.jar 
```

非常感谢您的回答。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:13:55.917

将您的更改`@Path("/*")`为`@Path("/")`. 你可以给一个无效的[正则表达式](http://docs.oracle.com/javaee/6/api/javax/ws/rs/Path.html)。`*`

# java - 如何获取列表 来自放心的 JsonPath

> ID：12537288
> 
> 赞同：1
> 
> 时间：2012-09-21T19:50:25.317
> 
> 标签：java, generics, rest-assured, rest-assured-jsonpath

我正在使用放心的框架，在其中，它有 JsonPath 类。JsonPath 的方法签名为 getList(String path, Class T);

我试图做这样的事情：

```
List<JsonPath> myList = myJsonPathObject.getList("mypath", JsonPath.class); 
```

我得到一个运行时强制转换异常。那么调用这个的正确格式是什么。我也尝试过：

```
List<JsonPath> myList = myJsonPathObject.getList("mypath", new ArrayList<JsonPath>().getClass()); 
```

这也失败了。实际上编译失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:45:52.667

JsonPath 用于从 JSON 文档中提取值。您无法从 JSON 文档中获取“JsonPath”列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T13:19:17.850

我知道这是一个古老的威胁，但有人评论并提醒我这一点。我实际上找到了这个问题的答案。

我所要做的就是将它转换为 a`Map<String, Object>`并且在遍历对象时，我必须将对象转换为适当的类。

```
Map<String, Object> myMap = (Map<String, Object>) myJsonPathObject.get("mypath");
for (String key : myMap.getKeySet()) {
  Map<String, Object> subMyMap = (Map<String, Object>) myMap.get(key);
} 
```

所以现在我可以继续获得额外的模型，json 中的 json。

# delphi - 在可执行文件中编译的单元路径

> ID：12537289
> 
> 赞同：8
> 
> 时间：2012-09-21T19:50:28.047
> 
> 标签：delphi, delphi-7

我注意到在编译的 exe 中，有到第 3 方组件单元的硬编码路径。例如，如果我在编译的可执行文件中使用 VirtualTrees 组件 TVirtualStringTree，我可以多次找到此路径：

```
C:\Program Files\Borland\Delphi7\Source\Virtual Treeview\Source\VirtualTrees.pas 
```

这适用于我使用的几乎所有 3rd 方组件，exe 中组件单元的路径。我认为这些信息不应该是可执行的，但不知道我必须在 Delphi 7 设置或项目设置中更改什么才能摆脱它。请问有人有解决办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T20:16:33.490

您看到的是保留断言来源的断言消息。如果您转到`Project / Options`或使用`CTRL + SHIFT + F11`打开项目选项对话框的快捷方式，您可以禁用它们。

取消选中选项卡中的`Assertions`复选框`Compiler`，保存项目选项并重建项目。不是重新编译，而是重建！

![在此处输入图像描述](../Images/b10362de07342c9bbba4f8832b9c8af7.png)

[`Assert`](http://docwiki.embarcadero.com/Libraries/en/System.Assert)当您打开该选项时，您将始终看到二进制文件中的路径。

# python - wxpython 从 ID 访问对象

> ID：12537296
> 
> 赞同：1
> 
> 时间：2012-09-21T19:50:52.753
> 
> 标签：python, wxpython, python-2.7

在 wxPython 应用程序中创建的每个对象都会创建一个`id`. 它可以作为参数给出，也可以使用`id=wx.NewId()`自动创建。

据我了解，使用一个对象，`id`您可以从其他地方引用该对象，但我找不到任何关于如何完成的简单解释。

谁能指出我正确的方向或对此有所了解？

（注意：我不希望通过 ID 绑定事件，这是我在各处找到的唯一教程。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-06-25T21:03:56.650

[**免责声明**：我从 OPs 问题中提取了这个答案。[答案不应包含在问题本身](https://meta.stackexchange.com/q/309552/316262)中。]

* * *

### [Jase](https://stackoverflow.com/users/1658512/jase)提供的答案，但基于[Joran Beasley](https://stackoverflow.com/a/12537455/4298200)的答案：

`FindWindowById()`在 class 中找到的函数`wx.Window`，大多数小部件都是其子类。

通过在对象父对象（尚未尝试过祖父对象等）上调用此函数，它会返回相关对象的指针（副本？），这样：（在交互式解释器中）

```
import wx
app = wx.App()
frame = wx.Frame(None)
but = wx.Button(frame, -1, label='TestButton')
frame2 = wx.Frame(None)

butId = but.GetId()
test = wx.Window.FindWindowById(butId)         # Fails with TypeError
  # TypeError: unbound method FindWindowById() must be called with Window instance as
  # first argument (got int instance instead)
test = Frame2.FindWindowById(butId)            # returned either a None object or nothing at all.
test = Frame.FindWindowById(butId)             # returned a pionter (copy?) of the object in such a
  # manner that the following worked:
label = test.GetLabel()
print label                                    # displayed u'TestButton' 
```

因此，通过了解`id`对象的 an，可以获得指向该对象的指针，以便进一步处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:03:49.740

我不认为有这样做的内置方式......但你可以做这样的事情

```
my_ids = {}

def widget_factory(widget_class,parent,id,*args,**kwargs):
     w = widget_class(parent,id,*args,**kwargs)
     my_ids[id] = w

def get_widget_by_id(widget_id):
     return my_ids[widget_id] 
```

显然有一个功能......

[http://wxpython.org/docs/api/wx.Window-class.html#FindWindowById](http://wxpython.org/docs/api/wx.Window-class.html#FindWindowById)

# .net - System.Transactions.Diagnostics.DiagnosticTrace 抛出 TypeInitializationException

> ID：12537303
> 
> 赞同：2
> 
> 时间：2012-09-21T19:51:46.043
> 
> 标签：.net, .net-4.0, c++-cli, windows-8

似乎与[来自 OdbcConnection.Open() 的奇怪异常](https://stackoverflow.com/questions/893643/strange-exception-coming-out-of-odbcconnection-open)有关，但我不确定。

我最近切换到 Win8 并且从那以后没有运行这个应用程序。我用的是VS2012，但是项目没有升级。异常的转储如下所示：

```
Unhandled Exception: System.TypeInitializationException: 
 The type initializer for 'System.Transactions.Diagnostics.DiagnosticTrace' threw an exception. ---> 
 System.Configuration.ConfigurationErrorsException: Configuration system failed to initialize ---> 
 System.TypeInitializationException: The type initializer for 'System.Uri' threw an exception. ---> 
 System.TypeInitializationException: The type initializer for 'System.UriParser' threw an exception. ---> 
 System.TypeInitializationException: The type initializer for 'System.Runtime.Versioning.BinaryCompatibility' threw an exception. ---> 
 System.ArgumentException: String cannot be of zero length.
Parameter name: frameworkName
   at System.Runtime.Versioning.BinaryCompatibility.ParseFrameworkName(String frameworkName, String& identifier, Int32& version, String& profile)
   at System.Runtime.Versioning.BinaryCompatibility.ParseTargetFrameworkMonikerIntoEnum(String targetFrameworkMoniker, TargetFrameworkId& targetFramework, Int32& targetFrameworkVersion)
   at System.Runtime.Versioning.BinaryCompatibility.ReadTargetFrameworkId()
   at System.Runtime.Versioning.BinaryCompatibility.get_AppWasBuiltForFramework()
   at System.Runtime.Versioning.BinaryCompatibility..cctor()
   --- End of inner exception stack trace ---
   at System.Runtime.Versioning.BinaryCompatibility.get_TargetsAtLeast_Desktop_V4_5()
   at System.UriParser..cctor()
   --- End of inner exception stack trace ---
   at System.Uri..cctor()
   --- End of inner exception stack trace ---
   at System.Configuration.ClientConfigurationSystem..ctor()
   at System.Configuration.ConfigurationManager.EnsureConfigurationSystem()
   --- End of inner exception stack trace ---
   at System.Configuration.ConfigurationManager.PrepareConfigSystem()
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at System.Configuration.PrivilegedConfigurationManager.GetSection(String sectionName)
   at System.Diagnostics.DiagnosticsConfiguration.GetConfigSection()
   at System.Diagnostics.DiagnosticsConfiguration.Initialize()
   at System.Diagnostics.DiagnosticsConfiguration.get_Sources()
   at System.Diagnostics.TraceSource.Initialize()
   at System.Diagnostics.TraceSource.get_Switch()
   at System.Transactions.Diagnostics.DiagnosticTrace..cctor()
   --- End of inner exception stack trace ---
   at System.Transactions.Transaction.get_Current()
   at SD.LLBLGen.Pro.ORMSupportClasses.DataAccessAdapterBase.InitClass(IComPlusAdapterContext comPlusContextHost, IPersistenceInfoProvider persistenceInfoProvider)
   at ZAA.FarmInterface.bw_RunWorkerCompleted(Object sender, RunWorkerCompletedEventArgs e) in d:\eddynet\projects\zaa\zaacmdline\farminterface.cpp:line 482
   at System.ComponentModel.BackgroundWorker.OnRunWorkerCompleted(RunWorkerCompletedEventArgs e)
   at System.ComponentModel.BackgroundWorker.AsyncOperationCompleted(Object arg)
   at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() 
```

App.config 看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
  </startup>
  <runtime>

    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">

      <dependentAssembly> <!--For LLBLGen -->
        <assemblyIdentity name="Npgsql" culture="neutral" publicKeyToken="5d8b90d52f46fda7"/>
        <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.11.0"/>

      </dependentAssembly>
    </assemblyBinding>

  </runtime>
</configuration> 
```

我试过重建，无济于事。

尝试向 app.config 添加一个空白部分。

* * *

查看 ILDASM 中 .exe 的清单，我发现了这个，这看起来很奇怪：

```
.assembly zaacmdline
{
  .custom instance void [mscorlib]System.Runtime.Versioning.TargetFrameworkAttribute::.ctor(string) = ( 01 00 00 01 00 54 0E 14 46 72 61 6D 65 77 6F 72   // .....T..Framewor
                                                                                                    6B 44 69 73 70 6C 61 79 4E 61 6D 65 10 2E 4E 45   // kDisplayName..NE
                                                                                                    54 20 46 72 61 6D 65 77 6F 72 6B 20 34 )          // T Framework 4
  .custom instance void [mscorlib]System.Security.SecurityRulesAttribute::.ctor(valuetype [mscorlib]System.Security.SecurityRuleSet) = ( 01 00 01 00 00 ) 
  .permissionset reqmin
         = {[mscorlib]System.Security.Permissions.SecurityPermissionAttribute = {property bool 'SkipVerification' = bool(true)}}
  .hash algorithm 0x00008004
  .ver 0:0:0:0
} 
```

与工作机器相比，TargetFrameworkAttribute 肯定是 fubar。我如何解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T04:30:32.897

关于查看下面链接的评论应该可以解决问题。 [应用程序的 .exe 文件缺少 .NET TargetFramework，但仅限于干净的构建](https://stackoverflow.com/q/13315940/1810905)

基本上：删除`C:\Users\YOURNAME\AppData\Local\Temp\.NETFramework,Version=v4.0.AssemblyAttributes.cpp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:02:46.750

（来自上面的评论）

我的 app.config 文件中有大小写问题。示例：“connectionstrings”应该是“connectionStrings”。这似乎为我解决了问题。

希望这对其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T06:38:23.017

只需清除 App.Config 文件并重建您的项目

App.Config 应该像

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup> 
</configuration> 
```

# android - 在位图上设置矩阵

> ID：12537305
> 
> 赞同：-1
> 
> 时间：2012-09-21T19:51:57.183
> 
> 标签：android, bitmap

嗨，我只想在这段代码中设置矩阵，但如果我使用这个声明，它会重置所有绘图。

位图 a= Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);

只需要新矩阵，但我如何得到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:31:50.160

我只想：

```
public static Bitmap flip(Bitmap src, int type) {

    // create new matrix for transformation

    Matrix matrix = new Matrix();

    // if vertical

    if(type == FLIP_VERTICAL) {

        // y = y * -1

        matrix.preScale(1.0f, -1.0f);

    }

    // if horizonal

    else if(type == FLIP_HORIZONTAL) {

        // x = x * -1

       matrix.preScale(-1.0f, 1.0f);

    // unknown type

    } else {

        return null;

    }

    // return transformed image
   //Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);
  Bitmap pp= Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);

  return pp;

} 
```

如果 oyu 看到这个 Bitmao pp= ... 我只想更改 src ->matrix 就这样

# html - HTML/RoR 布局表格格式

> ID：12537308
> 
> 赞同：0
> 
> 时间：2012-09-21T19:52:17.103
> 
> 标签：html, html-table

我只是在玩弄我正在玩的应用程序的格式。它看起来像这样：

![在此处输入图像描述](../Images/fd9f2c3b470fdd33f37275c22ff2d693.png)

我想使用表格来获取它，以便“sd”下的所有内容都直接位于它旁边。像这样：

![在此处输入图像描述](../Images/b3c3f4b72dfd69bbe085c12a98df8041.png)

我怎么能这样做...使用表格？

这是我当前的代码：

```
<div class ="individ_post">
    <table>
        <tr>
            <td>
                <p>sd</p>
                <p>sd</p>
                <p>sd</p>
                <p>sd</p>
                <p>sd</p>
                <p>sd</p>
                <p>sd</p>

            </td>
        </tr>
<% @posts.each do |post| %>

            <tr>
                <td id="voting_deletion_table">
                    <div id="post_voting_and_deleting">
                        <div class="vote_score"><%= post.reputation_value_for(:votes).to_i %></div>
                        <br />
                        <% if user_is_logged_in? %>
                            <%= button_to "+", vote_group_post_path(@group, post, type: "up"), method: "post" %>
                            <%= button_to "-", vote_group_post_path(@group, post, type: "down"), method: "post" %>
                        <% end %>
                    </div>
                    <% if user_is_logged_in? && current_user.id == post.user_id %>
                        <td><%= button_to 'x', [@group, post], method: :delete, confirm: 'Are you sure?' %></td>
                    <% end %>
                </td>
                <td id="previow_of_post_table">
                    <div class ="preview_of_post">
                    <% if post.image_url %>
                        <%= image_tag post.image_url(:thumb).to_s %>
                    <% elsif post.link %>
                        <%= extract_content_from_url(post.link) %>
                    <% end %>
                    </div>
                </td>
                <td id="comments_table">
                    <div class ="post_author">@<%= post.user.username%>:</div> <div class ="post_title"><%= post.title %></div>

                    <% post.comments.each do |comment| %>
                    <div class ="post_comments">
                        > <span class="comment_username">@<%= comment.user.username %></span>:<%= comment.body %>
                    </div>
                    <% end %>

                    <% if user_is_logged_in? %>
                        <%= form_for([post.group, post, post.comments.build]) do |f| %>
                        <p>
                            <%= f.label :comment %><br />
                            <%= f.text_area :body, :rows => 3, :cols => 55 %>
                        </p>
                        <p>
                            <%= f.submit %>
                        </p>
                        <% end %>
                    <% end %>

                </td>
        </table>
    </div>

    <hr />
    <br />

<% end %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:01:19.727

使用 div 进行 CSS 定位，类似于 position:relative 的内容（[本页](http://www.barelyfitz.com/screencast/html-training/css/positioning/)的第 2 步）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:01:40.397

不要将 TABLES 用于布局。使用浮点数。

表格用于表格数据，人们停留在 1999 年。

结构将是这样的：

```
<div class="wrapper">
     <div class="labels">
       sd ... sd ...
     </div>
     <div class="controls">
         ...buttons...
     </div>
     <div class="formpanel">
         ...your form elements ....
     </div>
</div> 
```

设置元素的宽度，并`float:left`用于内部 DIV 元素。

# jquery - 在 Jquery 中自定义缓动

> ID：12537310
> 
> 赞同：0
> 
> 时间：2012-09-21T19:53:03.380
> 
> 标签：jquery, jquery-ui, jquery-easing

所以我对缓动的文档有疑问。我查看了代码，发现了一些我想定制但目前不知道如何定制的东西。这是我正在调用的函数：

```
$('.caption').show('scale', { percent: 100, easing: 'customEasing' }, 500); 
```

我查看了缓动功能并看到了这个

```
 easeOutBack: function (x, t, b, c, d, s) {
    if (s == undefined) s = 1.70158;
    return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;} 
```

它不仅有一堆变量要传入，而且还检查其中一个变量 s 是否未定义。我想为 s 传递一个不同的值，但我只是不知道怎么做？有没有人对 jquery ui 和缓动有更广泛的了解，并且可以告诉我是否有办法在不创建整个自定义效果的情况下更改该设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:13:57.620

语法很奇怪，这不是 jQuery`easing`和`show`函数的工作方式。

缓动函数接受 5 个参数（不是 6 个）：

1.  动画中经过的时间百分比，从 0 到 1。
2.  自动画开始以来的毫秒数。
3.  第一个参数的起始值（始终为 0）
4.  第一个参数的结束值，始终为 1。
5.  动画将以毫秒为单位运行多长时间。

jQuery 自动传递这些值。动画始终从 0 运行到 1。动画的形状仅取决于公式，而不取决于任何参数。如果你想要一个不同的形状，你必须定义你自己的缓动函数。

这是一个如何定义和使用自定义缓动函数的示例：http: [//jsfiddle.net/4ZzWZ/](http://jsfiddle.net/4ZzWZ/)

# backbone.js - Backbone.js：设置本地存储只需一行？

> ID：12537316
> 
> 赞同：3
> 
> 时间：2012-09-21T19:53:32.733
> 
> 标签：backbone.js, local-storage

演示小提琴（有问题）[http://jsfiddle.net/mjmitche/UJ4HN/19/](http://jsfiddle.net/mjmitche/UJ4HN/19/)

我有一个这样定义的集合

```
var Friends = Backbone.Collection.extend({
    model: Friend,

    localStorage: new Backbone.LocalStorage("friends-list")
}); 
```

据我所知，这就是我需要做的所有事情来让本地存储工作（除了将它包含在backbone.js下面）

我不确定的一件事是，名称“friends-list”是否必须对应于 DOM 元素？我正在尝试保存“朋友列表”，所以我将其称为本地存储，但是，localstorage 似乎不需要传递类或 id。

这是一个小提琴，您可以在其中看到我正在尝试做的事情[http://jsfiddle.net/mjmitche/UJ4HN/19/](http://jsfiddle.net/mjmitche/UJ4HN/19/)

在我的本地站点上，我正在添加几个朋友，刷新页面，但这些朋友没有重新出现。

**更新**

我还在本地站点上的代码中完成了以下操作

```
console.log(Backbone.LocalStorage); 
```

它不会引发错误。

我的调试尝试

我在 window.AppView 中尝试了这段代码（取自另一个 SO 答案），但控制台中没有出现任何内容。

```
this.collection.fetch({}, {
    success: function (model, response) {
        console.log("success");
    },
    error: function (model, response) {
        console.log("error");
    }
}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T03:11:06.330

来自[精美手册](https://github.com/jeromegn/Backbone.localStorage)：

> 很简单的一个用于 Backbone 的 localStorage 适配器。它是 Backbone.Sync() 的替代品，用于处理保存到 localStorage 数据库。

这个 LocalStorage 插件只是 Backbone.Sync 的替代品，所以你仍然需要[`save`](http://backbonejs.org/#Model-save)你的模型和[`fetch`](http://backbonejs.org/#Collection-fetch)你的收藏。

由于您没有保存任何内容，因此您永远不会将任何内容放入 LocalStorage 数据库。您需要保存模型：

```
showPrompt: function() {
    var friend_name = prompt("Who is your friend?");
    var friend_model = new Friend({
        name: friend_name
    });
    //Add a new friend model to our friend collection
    this.collection.add(friend_model);
    friend_model.save(); // <------------- This is sort of important.
}, 
```

您可能也想使用`success`and`error`回调`friend_model.save()`。

由于您什么都没有`fetch`，因此您不会使用 LocalStorage 数据库中的任何内容来初始化您的集合。您需要调用`fetch`您的集合，并且您可能希望绑定`render`到它的`"reset"`事件：

```
initialize: function() {
    _.bindAll(this, 'render', 'showPrompt');
    this.collection = new Friends();
    this.collection.bind('add', this.render);
    this.collection.bind('reset', this.render);
    this.collection.fetch();
}, 
```

您还需要更新您`render`的才能呈现整个集合：

```
render: function() {
    var $list = this.$('#friends-list');
    $list.empty();
    this.collection.each(function(m) {
        var newFriend = new FriendView({ model: m });
        $list.append(newFriend.render().el);
    });
    $list.sortable();
    return this; 
} 
```

您可以通过将“添加一个模型的视图”逻辑移动到单独的方法并将该方法绑定到集合的`"add"`事件来改善这一点。

还有一个精简和修复的小提琴版本：http: [//jsfiddle.net/ambiguous/haE9K/](http://jsfiddle.net/ambiguous/haE9K/)

# ruby - 欧海宝石的使用方法

> ID：12537317
> 
> 赞同：1
> 
> 时间：2012-09-21T19:53:34.167
> 
> 标签：ruby, ohai-gem

在 OpsCode Wiki 中有以下文档：

```
require 'ohai'

# ...
# Profit! ;-) 
```

如何打印由“ohai”命令提供但使用 IRB 的 JSON 数据？我试图查看 application.rb 中的代码，但我得到了空数据。

```
require 'ohai/application'
ohai = Ohai::System.new
ohai.json_pretty_print
 => "{\n\n}" 
```

我**不想**在 Chef （或[Shef](http://wiki.opscode.com/display/chef/Shef)）中执行此操作，我只想在我自己的应用程序中使用 ohai gem 本身。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T22:31:30.623

在课堂上闲逛`Ohai::Application`（你在运行时得到什么`ohai`），[`#run_application`](https://github.com/opscode/ohai/blob/master/lib/ohai/application.rb#L92)实例化`Ohai::System`，除非它是由文件配置的，否则它会调用`all_plugins`以用数据填充它。

据推测，`Ohai::System#all_plugins`将数据收集委托[给`lib/ohai/plugins`目录](https://github.com/opscode/ohai/tree/master/lib/ohai/plugins)。

```
$ irb -rohai
> system = Ohai::System.new
 => #<Ohai::System:0x00000100988950 @data={}, @seen_plugins={}, @providers={}, @plugin_path="", @hints={}> 
> system.all_plugins
 => true 
> puts system.to_json
{"languages":{"ruby":{"platform":"x86_64-darwin10.8.0","version":"1.9.2", ...
> system.to_json.size
 => 42395 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-08T15:53:29.073

我也搜索了一个简单而好的图书馆来做到这一点......

我碰到

> 使用观察

5分钟后我的monitoring.rb完成了..

安装：gem install usagewatch

在 mac 上安装：gem install usagewatch_ext

有关更多信息，请参阅[本文](http://www.philchen.com/2013/07/17/linux-usage-statistics-using-ruby-gem-usagewatch)

# vb.net - 将 DataView 与 DataGridView 一起使用会中断与 BindingNavigator 的连接

> ID：12537322
> 
> 赞同：2
> 
> 时间：2012-09-21T19:53:57.367
> 
> 标签：vb.net, datagridview, dataview

使用 Datagridview 控件和 BindingNavigator 控件的表单出现问题。最初我有以下代码：

```
BS = New BindingSource(DS, dsTable)  ' (earlier code) Dim BS as New BindingSource
BNV1.BindingSource = BS     ' A BindingNavigator
DGV1.DataSource = BS        ' A DataGridView 
```

一切正常，但是当我插入一个新行时，它显示在 DataGridView 列表的末尾，我希望它显示在正确的顺序位置。

我在某个论坛的某个地方找到了一个建议，该建议建议在 Datatable 上使用 DataView 来解决这个问题。我试过了，效果很好——几乎。这是新代码：

```
BS = New BindingSource(DS, dsTable)
DV.Table = DS.Tables(dsTable)       ' (earlier code)  Dim DV as New DataView
DV.Sort = DS.Tables(dsTable).Columns(0).ColumnName
DGV1.DataSource = DV                 < ---- instead of the BindingSource 'BS'
BNV1.BindingSource = BS 
```

新记录显示在正确排序的位置 - 但是 - 当我滚动 DataGridView 时，BindingNavigator 没有改变。它从未反映正确的记录号。
但是当您单击 BindingNavigator 的 moveNext、Previous、Start 和 End 箭头时，它会正确更改计数。DataGridView 中没有发生任何事情，但似乎 BindingNavigator 正在跟踪幕后的其他内容。我想那是原来的桌子。

知道如何将 BindingNavigator 同步到 DataView 吗？那么 DatagridView 和 BindingNavigator 正在查看相同的数据吗？

（我知道我可以通过每次重新填充 DataGridView 来解决这个问题，但这似乎很浪费资源。）

附加信息：实际执行插入/添加的代码

```
Dim NewRow As DataRow = DT.NewRow
modCommonMaint.FillNewRow(NewRow, pnlData, dicFields)
NewRow(CntText + 1) = 0
NewRow(CntText + 2) = NewRow(0).ToString
LastAdd = txtID.Text.ToUpper.Trim
DT.Rows.Add(NewRow)
DGV1.Refresh()
Try
  DA.InsertCommand = cmdA
  DA.UpdateCommand = cmdU
  DA.Update(DS, dsTable)
Catch ex As Exception
  Console.WriteLine("Error" & ex.ToString)
Finally
End Try 
```

这是实际执行插入/添加的代码。在任何一种情况下它都不会改变。为了改变这种行为，我所做的就是交换本笔记前 2 个代码块中的行。

# visual-studio - 是否有任何理由将 NuGet 用于内部 Visual Studio 帮助程序项目？

> ID：12537328
> 
> 赞同：0
> 
> 时间：2012-09-21T19:54:18.973
> 
> 标签：visual-studio, nuget

我是新的包管理系统，所以我试图了解它们在哪里有用，在哪里没有用。

我的办公室有几个我们在各种解决方案中使用的 Visual Studio 助手项目。现在我们只是在产品解决方案中引用帮助项目。使用 NuGet 打包这些帮助程序项目有什么好处吗？在任何时候，我们团队中最多有 5 到 10 名开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:42:28.457

这取决于您的常见项目更改的频率，是否需要为其他项目保留多个版本。对我来说，我发现了以下内容：

## 优点：

*   如果您需要保留多个版本的通用项目，它会让您的生活更加轻松。
*   它在一个包中支持不同框架的相同库。
*   您的产品解决方案的项目更少，因此 VisualStudio 和 Resharper 的工作速度更快。
*   它训练您的团队编写单元测试，因为通过单元测试测试公共项目比在最终产品中的功能要容易得多。

## 缺点：

*   如果您需要经常更新您的常见项目，这可能会很烦人。但是你可以设置 CI 来为你做这件事。

# python - wxpython在函数调用后更改文本

> ID：12537331
> 
> 赞同：0
> 
> 时间：2012-09-21T19:54:25.547
> 
> 标签：python, wxpython

单击我的“浏览”按钮时，我的文本框“tc1”中的文本不会改变。我收到“未定义全局名称'tc1'”的控制台错误。我只想在单击 button1 时更改 tc1 的文本

Python：

```
def InitUI(self):

  panel = wx.Panel(self)

  button1 = wx.Button(panel, label="Browse...")
  button1.Bind(wx.EVT_BUTTON, self.OnBrowse)

  tc1 = wx.TextCtrl(panel, -1, "Text")

def OnBrowse(self, event):
  return tc1.SetValue("New Text") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:57:13.113

~~你必须将它声明为全局~~ 这应该是类的一个属性

```
self.tc1 = None
def InitUI(self):
  button1 = wx.Button(panel, label="Browse...")
  button1.Bind(wx.EVT_BUTTON, self.OnBrowse)
  self.tc1 = wx.TextCtrl(panel, -1, "Text")

def OnBrowse(self, event):
  return self.tc1.SetValue("New Text") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:30:26.027

您正在为 GUI 定义一个类，并且它是该 GUI 的一部分，所以我认为创建一个属性是`TextCtrl`有意义的：`tc1``self`

```
def InitUI(self):
  ...    
  self.tc1 = wx.TextCtrl(panel, -1, "Text")

def OnBrowse(self, event):
  return self.tc1.SetValue("New Text") 
```

# router - 使用 telnet 或 ssh 配置 AP dd-wrt

> ID：12537340
> 
> 赞同：-1
> 
> 时间：2012-09-21T19:55:10.350
> 
> 标签：router, access-point, dd-wrt

我想使用 telnet**配置接入点**，例如更改 SSID
我尝试了以下命令：

```
iwlconfig ath0 ESSID newssid 
```

它工作我可以在搜索网络时看到 newssid，如果我写：

```
iwlconfig 
```

我可以看到接口 ath0 有新的 ssid，但是如果我转到 GUI 我仍然看到旧的 SSID，如果我重新启动 AP，将不会保存任何更改，它将回到旧配置
1-那么如何保存更改？
2-我需要更多命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:02:21.210

试试这个命令：

```
nrvam commit 
```

它应该工作。

# android - 在 Android 手机中接收 DTFM 代码？

> ID：12537347
> 
> 赞同：-1
> 
> 时间：2012-09-21T19:55:36.750
> 
> 标签：android, dtmf

我想在**Android中接收****呼叫者**发送的**DTFM 代码**。是否可以？

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:01:10.053

这是通过电话*无法*实现的，因为您无法访问底层电话硬件。在 Android 中访问电话硬件的唯一方法是通过[无线电接口层 (RIL)](http://en.wikipedia.org/wiki/Radio_Interface_Layer)。经常玩的技巧是强迫用户通过扬声器播放他们的电话，你会看到一些[应用程序](https://play.google.com/store/apps/details?id=com.wolphi.dtmf&hl=en)可以做到这一点。****

# sql-server - 在 SQL Server 中有效地存储各种大小的数值？

> ID：12537351
> 
> 赞同：2
> 
> 时间：2012-09-21T19:56:08.417
> 
> 标签：sql-server

我在存储数值的 SQL 服务器数据库中有一个列。问题是有时这个数字是十亿，有时是 1.355 E -16。我会将数字设置为像 numeric(35,20) 这样的巨大数字，但我认为这会使它们都占用数据库中的那么多空间，这似乎是一种浪费。有没有办法有效地做到这一点，就像我们在有时有短字符串和其他时候有长字符串时如何使用 varchar 一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:02:20.603

什么版本和版本的 SQL Server？SQL Server 2005 SP2 引入了一种`vardecimal`格式，该格式[已被弃用以支持使用行和页压缩](http://msdn.microsoft.com/en-us/library/bb326755%28v=sql.105%29.aspx)。

两者`vardecimal`和压缩都需要企业版引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:00:16.687

好吧，这将取决于您将使用该号码的目的。

您可以使用 FLOAT，它可以存储[浮点数和实数（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms173773.aspx)

```
float
- 1.79E+308 to -2.23E-308, 0 and 2.23E-308 to 1.79E+308
real
- 3.40E + 38 to -1.18E - 38, 0 and 1.18E - 38 to 3.40E + 38 
```

我之所以说这取决于您要实现的目标是

> 用于浮点数值数据的近似数数据类型。浮点数据是近似的；因此，并非数据类型范围内的所有值都可以准确表示。

## [SQL 小提琴示例](http://www.sqlfiddle.com/#!3/d41d8/4602/0)

现在围绕选择哪种数据类型的讨论花费了很多啤酒，但规则将保持不变。这取决于某些位对您的重要性。

# javascript - 事件处理程序中的 JavaScript 同步和临界区

> ID：12537353
> 
> 赞同：6
> 
> 时间：2012-09-21T19:56:20.307
> 
> 标签：javascript, synchronization, dom-events

我有一个函数，它是 的事件处理程序`websocket.onmessage`，现在因为服务器可以发送多条消息（一个接一个）并且每条消息都会触发该事件，并且由于功能块可能需要几秒钟（内部进行大量渲染)，则可以在第一个函数调用仍在运行时再次调用该函数。在某些情况下，我需要此函数中的关键块，以便第二次调用仅在第一次调用结束时启动关键部分，什么被认为是在 JavaScript 中实现锁的“最佳实践”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:05:22.563

由于js是单线程的，所以不能真正做锁。好吧，你*可以*，但你*不应该*。

一个想法可能是保留一个状态变量。

您的函数将在每个 onmessage 上被调用，但您只有在变量设置为 false 时才执行某些操作。如果是这样，则将其设置为 true，完成后将其设置回 false。

```
var handler; //expose outside the closure
(function(){
    var busy = false;

    handler = function(){
        if( !busy ){
            busy = true;

            //do rendering stuff

            busy = false;
        }
    }
})(); 
```

显然，根据您自己的需要调整这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:15:29.330

您可以使用 jQuery Socket [https://github.com/flowersinthesand/jquery-socket](https://github.com/flowersinthesand/jquery-socket)，因为它具有消息事件的回调。

```
message(data, [callback]) 
```

这意味着您可以在第一条消息完成后收到下一条消息。

例子：

```
websocket.onmessage(data, function(){
  //get next message
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:07:40.033

仅当您使用 webworkers 时，JS 才是多线程的。由于缺乏可用的同步，我不知道是否甚至允许在工作线程上使用 websocket，但是如果您从主线程设置所有 websocket，事件将在主线程上按顺序触发，所以您不要必须自己执行任何阻塞或同步（请参阅JS 中的同步[这个线程）](https://stackoverflow.com/questions/8333676/parallel-programming-synchronization-using-javascript-web-workers)

# google-app-engine - 在 GAE 中，什么是高复制数据存储？

> ID：12537354
> 
> 赞同：-2
> 
> 时间：2012-09-21T19:56:23.600
> 
> 标签：google-app-engine

我是 GAE 的新手，我想参与几乎所有事情，所以这是下一步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:57:01.187

你可以看看：http: [//googleappengine.blogspot.com/2011/01/announcing-high-replication-datastore.html](http://googleappengine.blogspot.com/2011/01/announcing-high-replication-datastore.html)

> High Replication Datastore 为您的读取和写入提供最高级别的可用性，但代价是增加写入延迟和更改 API 中的一致性保证。高复制数据存储通过使用 Paxos 算法跨数据中心实时同步数据来增加维护数据副本的数据中心的数量。最显着的好处之一是应用程序的所有功能在计划的维护期间以及大多数计划外的基础架构问题期间都将保持完全可用。

希望这可以帮助。

# c# - 在 Windows 窗体控件中打开 WPF 控件时不使用 DataTemplate

> ID：12537355
> 
> 赞同：0
> 
> 时间：2012-09-21T19:56:25.577
> 
> 标签：c#, wpf, xaml

我创建了一个 DataTemplate 来管理 ListBox 中项目的显示。当我在常规 WPF 应用程序中打开控件时，它可以正常工作。但是，当我在 Windows 窗体应用程序中托管的 Windows 窗体控件中打开它时，不使用数据模板。考虑到在这种情况下“FindResource”可能存在问题，我在代码隐藏中添加了 DataTemplate。在常规 WPF 应用程序中打开时它再次正常工作，但在 Windows 窗体应用程序中打开时失败。

如果我设置 ListBox 本身的背景，我会看到背景以及“应该”显示的所有项目的空白行 - 所以我知道数据正在到达那里，只是模板本身不适用。

加载windows窗体控件的代码：

```
_elementHost = new ElementHost();
_elementHost.Dock = DockStyle.Fill;
this.Controls.Add(_elementHost);
NavigationControl userControl = new NavigationControl(); // the wpf control
_elementHost.Child = userControl; 
```

数据模板 xaml：

```
<DataTemplate x:Key="WorkingAccountResultTemplate" >
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="Test" Width="50" Foreground="Purple" Background="AliceBlue"/>
        <TextBlock Text="{Binding ItemKeyId}" HorizontalAlignment="Stretch" Background="Maroon" />
    </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:02:16.757

您需要在应用程序中启动 WPF 实例。为此，请在您的启动或主 winforms 项目中创建一个 App.xaml 文件。

App.xaml，除了包含和类声明之外，您应该具有以下几行：（您可以有一个仅包含包含的空文件，因此该部分可以为空）

```
<Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PresentationFramework.Aero;component/themes/Aero.NormalColor.xaml"/>
            </ResourceDictionary.MergedDictionaries>
</Application.Resources> 
```

App.xaml，在后面的代码中：

```
public partial class App : Application
{
    public App()
    {
        StyleManager.ApplicationTheme =new Windows7Theme();
        InitializeComponent();
    }

    public static void EnsureApplicationResources()
    {
        if (Application.Current == null)
        {
            // create the Application object
            new App {ShutdownMode = ShutdownMode.OnExplicitShutdown};                                
        }
    }

    protected override void OnExit(ExitEventArgs e)
    {
        if(Current != null)
            Current.Shutdown();

        base.OnExit(e);
    }
} 
```

在 Main.cs 或 Program.cs 的启动方法中：

```
private static void Main()
{
// Your initialization code

//WPF instance start
                App.EnsureApplicationResources();

                Application.Run(MainForm.Instance);
} 
```

# geany - Geany-同时缩进多行

> ID：12537356
> 
> 赞同：2
> 
> 时间：2012-09-21T19:56:31.413
> 
> 标签：geany

在 Geany 中，是否可以使用键盘快捷键同时缩进多行（而不是手动输入每个缩进）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T11:25:28.550

Maybe I did not understand the question correctly, but both the `TAB`key and the `CTRL`+ `i`shortcut do exactly that when multiple lines are selected.

对于取消缩进多行，您可以同时使用`SHIFT`+`TAB`和`CTRL`+`u`快捷方式。

一般来说，（`SHIFT`+）`TAB`似乎在所有现代文本编辑器的 95% 中都有效。`CTRL`+ `i`/`u`更特定于 Geany，但可以在 Geany 设置（设置 -> 键绑定 -> 格式）中轻松找到。

# c# - “where T : class”在编译时或运行时没有以任何方式强制执行吗？

> ID：12537363
> 
> 赞同：6
> 
> 时间：2012-09-21T19:57:25.267
> 
> 标签：c#, class, generics, struct

在下面的代码中，我将一个结构传递给一个需要类的构造函数。为什么编译和运行没有错误（并产生所需的输出）？

```
class Program
{
    static void Main()
    {
        var entity = new Foo { Id = 3 };
        var t = new Test<IEntity>(entity); // why doesn't this fail?
        Console.WriteLine(t.Entity.Id.ToString());
        Console.ReadKey();
    }
}

public class Test<TEntity> where TEntity : class
{
    public TEntity Entity { get; set; }

    public Test(TEntity entity)
    {
        Entity = entity;
    }

    public void ClearEntity()
    {
        Entity = null;
    }
}

public struct Foo : IEntity
{
    public int Id { get; set; }
}

public interface IEntity
{
    int Id { get; set; }
} 
```

如果我更改我的`Main()`方法以使其包含对 的调用`ClearEntity()`，如下所示，它*仍然*不会产生错误。为什么？

```
static void Main()
{
    var entity = new Foo { Id = 3 };
    var t = new Test<IEntity>(entity);
    Console.WriteLine(t.Entity.Id.ToString());
    t.ClearEntity(); // why doesn't this fail?
    Console.ReadKey();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T20:02:48.160

`where TEntity : class`强制`TEntity`为引用类型，但接口如是`IEntity`引用类型。

见这里： http: [//msdn.microsoft.com/en-us/library/d5x73970 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.80).aspx)

> 其中 T ：类 | 类型参数必须是引用类型，包括任何类、接口、委托或数组类型

关于第二个问题，您可能认为`t.ClearEntity()`会失败，因为它将 null 分配给类型为值类型的变量，但事实并非如此。的编译时类型`Entity`是引用类型`IEntity`，运行时类型（赋值后）是空类型。因此，您永远不会有类型变量，`Foo`而是 value `null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:03:09.630

来自 C# 文档：

> 其中 T ：类
> 
> 类型参数必须是引用类型，包括任何类、**接口**、委托或数组类型。（见下面的注释。）

因为您通过接口传递结构，所以它仍然被视为引用类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:59:38.383

在 .net 运行时中，每个不可为空的值类型都有一个关联的引用类型（通常称为“装箱值类型”），它派生自`System.ValueType`. 说`Object Foo = 5;`实际上不会存储`Int32`into `Foo`; 相反，它将创建与关联的引用类型的新实例`Int32`并存储对该实例的引用。对泛型类型的`class`约束指定所讨论的类型必须是某种引用类型，但它本身并不排除该类型可用于将引用传递给装箱值类型实例的可能性。在泛型类型约束之外的大多数上下文中，接口类型被视为类类型。

重要的是要注意，不仅盒装值类型像引用类型一样存储；它们的行为类似于引用类型。例如，`List<string>.Enumerator`是一个实现`IEnumerator<string>`. 如果一个有两个类型为 的变量`List<string>.Enumerator`，将一个复制到另一个将复制枚举的状态，这样就会有两个独立且独立的枚举数指向同一个列表。将这些变量中的一个复制到类型变量`IEnumerator<string>`将创建与关联的装箱值类型的新实例，`List<string.Enumerator`并在后一个变量中存储对该新对象的引用（这将是第三个独立的枚举器）。但是，将该变量复制到另一个 type`IEnumerator<string>`中，只会存储对现有对象的引用（因为`IEnumerator<string>`是引用类型）。

C# 语言试图假装值类型派生自`Object`，但在 .net 运行时的内部，它们实际上并非如此。相反，它们可以*转换*为派生自`System.ValueType`（又派生自`Object`）的类型。后一种类型将满足类型约束，即使前一种不会。顺便说一句，尽管它的名字，`System.ValueType`实际上是一个类类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T23:18:04.980

同样，我假设约束关键字`class`与类型声明关键字表示相同的类`class`，但事实并非如此。

正如其他答案中所解释的，`class`这里的术语超载，在我看来，这对于 C# 语言设计来说是一个可怕的决定。类似的东西`referencetype`会更有帮助。

# wordpress - 使用表示层在两列中显示结果

> ID：12537365
> 
> 赞同：0
> 
> 时间：2012-09-21T19:57:34.237
> 
> 标签：wordpress, split

下面的函数按字母顺序列出自定义字段的值，不重复。例子：

*   阿尔弗雷德·希区柯克
*   弗兰克·卡普拉
*   佩德罗·阿莫多瓦
*   伍迪·艾伦

如何在两列中显示这些项目？例子：

![在此处输入图像描述](../Images/6df4ddafbe771ef44363f40eb438e8e2.png)

有小费吗？感谢任何帮助。

编码：

```
global $wpdb;

$query = "SELECT DISTINCT meta_value FROM $wpdb->postmeta WHERE meta_key = 'director' ORDER BY meta_value";
$directors = $wpdb->get_results( $query );

echo '<ul>';
foreach( $directors as $director ) :

echo '<li>' . $director->meta_value . '</li>';

endforeach;
echo '</ul>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:03:22.953

您正在混合应用程序的两个不同方面。数据就是数据，它的呈现就是一个视图。您不应尝试根据数据的显示方式强制存储或检索数据。因此，像获取一列的数据一样获取数据，并使用表示层将其显示为 N 列。

# jquery - 用 .click 动画覆盖 .hover 动画？

> ID：12537367
> 
> 赞同：1
> 
> 时间：2012-09-21T19:57:47.477
> 
> 标签：jquery

我对 jquery 和任何类型的编程都很陌生。

单击对象时有没有办法覆盖 .hover ？我试图让图像在单击时保持动画宽度，而不是在悬停时恢复到原始大小。

这是我到目前为止所拥有的：

```
$(function() {
    $("#eggroll2, #eggrollL2").hover(function() {
        $(this).stop(true, true).animate({
            width: "300px"
        }, 250, "swing")
    }, function() {
        $(this).stop(false, false).animate({
            width: "150px"
        }, 250, "swing")
    });

    $("#middleRoll").hover(function() {
        $("#eggroll2, #eggrollL2").stop(true, true).animate({
            width: "250px"
        }, 250, "swing")
    }, function() {
        $("#eggroll2, #eggrollL2").stop(false, false).animate({
            width: "150px"
        }, 250, "swing")
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:04:57.650

您可以添加一个类以指示它已被单击，而不是将其缩小：

```
$(function() {
    $("#eggroll2, #eggrollL2").hover(function() {
        $(this).stop(true, true).animate({
            width: "300px"
        }, 250, "swing")
    }, function() {
        if (!$(this).hasClass('clicked')) {
            $(this).stop(false, false).animate({
                width: "150px"
            }, 250, "swing")
        }
    }).click(function() {
        $(this).addClass('clicked');
    });
});​ 
```

如果您希望单击以切换收缩/不收缩状态，请在单击处理程序中使用`toggleClass`而不是。`addClass`

**编辑：（回答OP的评论）**

向要收缩/扩展的元素添加一个类。假设它们是`<img/>`，请执行以下操作：

```
<img class="images" ... > 
```

将上面的代码修改成这样：

```
$(function() {
    $(".images").hover(function() {
        $(this).stop(true, true).animate({
            width: "300px"
        }, 250, "swing")
    }, function() {
        if (!$(this).hasClass('clicked')) {
            $(this).stop(false, false).animate({
                width: "150px"
            }, 250, "swing")
        }
    }).click(function() {
        // remove "clicked" class from all images
        $(".images").removeClass("clicked");

        // add the class to this one only
        $(this).addClass('clicked');

        // mouseout is the 2nd parameter to 'hover' handler
        $(".images").trigger("mouseout");
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:03:22.117

嗯……试试这个？

```
$(function() {
    $("#eggroll2, #eggrollL2").click(function() {
        $(this).stop(true, true).animate({
            width: "300px"
        }, 250, "swing")
    });

    $("#middleRoll").click(function() {
        $("#eggroll2, #eggrollL2").stop(true, true).animate({
            width: "250px"
        }, 250, "swing")
    });
});​ 
```

# android - 为什么活动有自己的Icon？

> ID：12537370
> 
> 赞同：2
> 
> 时间：2012-09-21T19:58:07.543
> 
> 标签：android, android-activity

如果我有 MainActivity，它有自己的图标，但如果我创建 SecondActivity 它有一个单独的图标，是否有特定的原因？如果我从 Play 商店下载一个应用程序，这一切都来自一个图标。我只是傻吗？或者是否有特定的原因。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:08:32.710

任何声明以下意图过滤器的活动都会在系统的应用列表中显示一个图标：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

如果您只想要一个图标，那么只需将此意图过滤器放在您的主要活动中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:59:34.057

每个活动都可以在启动器中独立启动 - 因此可以有自己的图标。另外，我认为在以后的 API 中，图标可以显示在 Activity 本身内。

# c - 运行时检查失败 #2 - 变量“d”周围的堆栈已损坏。（Visual Studio下的C编程）

> ID：12537371
> 
> 赞同：2
> 
> 时间：2012-09-21T19:58:12.257
> 
> 标签：c, visual-studio, visual-c++

你好，我是新来的，用 C 编程。我不想问一些你可能认为简单的问题，但我已经问过我的同学甚至我的编程老师，看看他们是否能找到错误，但直到今天他们都找不到它（他们）。

但首先让我描述一下我所知道的，它说：

> “运行时检查失败 #2 - 堆栈变量“d” **（有时 m 和其他 y）**已损坏“。

我的工作是尝试调试它，但问题总是显示在（主体的）最后一个代码行上，所以我找不到问题的确切位置，在这里我附上代码，如果你找到问题并解释我得到它的原因（以后不要重复同样的错误）=D。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

/* Type Declaration */
#define true 1
#define false 0
typedef char boolean;

/* Functions declaration */

boolean test( short int d, short int m, long int y );
boolean nextday( short int d, short int m , long int y );

int main( void )
{
    /* Variables initialization */
    short int d = 0, m = 0; 
    long int y = 0;

    do {
        /* Data by user*/
        printf( "Ingrese el numero de año: " );
        scanf( "%ld", &y );
    }   while ( y < 0 );

    do {
        printf( "Ingrese el numero de mes: " );
        scanf( "%d", &m );  
    }   while ( m < 1 || m > 12 );

    do {
        printf( "Ingrese el numero de dia: " );
        scanf( "%d", &d );
    }   while ( d < 01 || ( test( d, m, y ) == false ) ); // If the data is wrong then re-type the data

    // If the nextday function return value is true then the next day is 01, if not just sum a day
    if ( nextday ( d, m, y ) == true ) { 
        d = 01;

        // If we start a new year the new month must be 01-01-01.
        if ( m == 12 ) {
            m = 01;
            y++;
        }

        // Just increase the month for any other month
        else {
            m++;
        }
    }

    else {
        d++;
    }

    printf( "Mañana será: %d-%d-%ld\n", d, m, y );

    return 0;
}

boolean test( short int d, short int m, long int y ){
    int max;

    switch(m) {
        case 1:       
        case 3:
        case 5:
        case 7:
        case 8:
        case 10:
        case 12:
            max = 31;
            break;
        case 4:
        case 6:
        case 9:
        case 11:
            max = 30;
            break;
        case 2:
            if ( y % 400 == 0 ){
                max = 29;
            }
            else if ( y % 100 == 0 ){
                max = 28;
            }
            else if ( y % 4 == 0 ){
                max = 29;
            }
            else {
                max = 28;
            }
            break;
    }
    if ( d <= max ){
        return true;
    }
    else {
        return false;
    }
}

boolean nextday( short int d, short int m, long int y ) {

    boolean x;

    // If it's 28-02 in a secular year * 4 then it's a leap-year. (so it has 29 days)
    if  ( m == 2 && d == 28 && y % 400 == 0 ) {
        x = false;
    }

    // If it is an end of century but it isn't 4 multiply then it only has 28 days.
    else if ( m == 2 && d == 28 && y % 100 == 0 ) { 
        x = true;
    }

    // If it just a leap year it has 29 days.
    else if ( m == 2 && d == 28 && y % 4 == 0 ) { 
        x = false;
    }

    //If it's the last day of February and it's a leap year.
    else if ( m == 2 && d == 29 && y % 4 == 0 ){
        x = true;
    }

    // If we are in the end of the month.
    else if ( ( d == 30 && ( m == 4 || m == 6 || m == 9 || m == 11 ) ) || 
                d == 31 ) {  
        x = true;
    }

    // Then if it is another day just sum a day
    else {
        x = false;
    }

    return x;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T19:59:17.700

你需要使用：

```
scanf( "%hd", &m );
scanf( "%hd", &d ); 
```

因为它们是短整数。

使用“%d”你基本上是在存储空间中加载一个`int`大小变量。`small int`

An`int`通常是 4 个字节，而通常`small int`是 2 个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:00:16.733

```
scanf( "%d", &m ); 
```

`%d`意思是“这个论点指向一个`int`。” 您正在提供一个指向`short int`. 使用`%hd`(for `short int`) 或者最好更改`m`为 type `int`（为什么要在`short int`这里打扰？）。

# haskell - 在haskell中，我如何才能将当前语言环境中的unicode字符大写

> ID：12537377
> 
> 赞同：11
> 
> 时间：2012-09-21T19:58:31.893
> 
> 标签：haskell, unicode

事实证明，将字符大写是一项复杂的工作。如果您脱离了基本的 ASCII 字符集，那么大写字符和小写字符的规则实际上取决于应用程序运行的语言环境。

作为一个演示应用程序，我尝试将字母“i”（带点）和字母“i”（不带点）大写。现在，在 en_US 中，'i'（带点）大写为 'I'，而 'i'（不带点）不存在（但仍然大写为 'I'）。

但是，如果我切换到土耳其语（tr_TR.UTF-8），'i'（带点）必须大写为'İ'（也带点），'ı'（不带点）必须大写为'I' （也没有点）。小写应该反转这些操作。

```
iİıI --> İİII  (tr_TR.UTF-8)
iİıI --> IİII  (en_US.UTF-8) 
```

现在，我可以在 C 中完美地做到这一点。我如何在 Haskell 中做到这一点？我所做的所有搜索都直接指向 Data.Char.toUpper，它不支持语言环境。我还没有找到任何以任何方式感知区域设置的函数。

* * *

这是来自 C 的代码示例。我在我的 Linux 机器上运行它。

```
#include <stdio.h>
#include <stdlib.h>
#include <locale.h>
#include <wctype.h>
#include <string.h>
#include <errno.h>

wchar_t latin_small_sharp_s[5] = {0x00df, 0x00df, 0x0053, 0x0053, 0};
wchar_t turkish_is[5] = {0x0069, 0x0130, 0x0131, 0x0049, 0};

char multibyte_turkish_is[7] = {0x69, 0x01, 0x30, 0x01, 0x31, 0x49, 0};

void print_in_locale (const char *locale, const wchar_t *str, const size_t len) {
  wchar_t *dest = calloc(len * 2, sizeof(wchar_t));
  int i;

  if (!setlocale(LC_CTYPE, locale)) {
    fprintf(stderr, "Locale %s failed with error: %s", locale, strerror(errno));
    exit(1);
  }

  for (i = 0; i < len; i++) {
    dest[i] = towupper(str[i]);
  }
  printf("%ls, %ls\n", str, dest);
  free(dest);
}

int main () {
  print_in_locale("de_DE.utf8", latin_small_sharp_s, 5);
  print_in_locale("tr_TR.utf8", turkish_is, 5);
  print_in_locale("de_DE.utf8", turkish_is, 5);
} 
```

如果你将它保存到“locale_test.c”，你可以在命令行上运行它...

```
gcc -o locale_test locale_test.c && ./locale_test 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T20:44:44.900

使用包中的[`Data.Text.ICU.toUpper`](http://hackage.haskell.org/packages/archive/text-icu/0.6.3.5/doc/html/Data-Text-ICU.html#v%3atoUpper)功能`text-icu`。

> `toUpper :: LocaleName -> Text -> Text`
> 
> 大写字符串中的字符。
> 
> 大小写取决于区域设置和上下文相关。结果可能比原始结果更长或更短。

# asp.net - 使用 cookie 会话和 IIS7 从登录页面重定向时表单身份验证和 400 错误请求

> ID：12537379
> 
> 赞同：1
> 
> 时间：2012-09-21T19:58:50.033
> 
> 标签：asp.net, iis-7, forms-authentication

如果用户选择，我有一个配置为持久登录的网络应用程序。我正在使用表单身份验证并将 cookielesss 设置为自动检测。当使用 cookie 时，票证以及有关用户的详细信息都会得到妥善维护。当我禁用 cookie 时，我会在 url 中嵌入会话标识符并定向到登录页面。

但是，我无法使用 IIS 7 重定向到默认页面。我收到 400 Bad Request - URL

当我在 VS Using cassini 中运行应用程序时，无 cookie 票证和会话工作得很好。

我尝试了以下方法：

*   `<httpRuntime maxUrlLength="15000"/>`在网络配置中设置。
*   设置请求过滤以允许非常长的 URL (1000000)

当我在 VS 中进行身份验证和重定向时，重定向工作并且 URL 看起来像：

```
http://localhost:53605/(X(1)S(new25hbmvxqwiupj3uijv2et)F(HHRQfdcbjBvktt0SbfNrna7jUgMQYcA2q6uv8ptwjYoQCEIO3MgYD59wXfTdRPSnzdaoCnkKQF762Tiii98dEQdmUGiAYm5XrpIcwin_TcEWMRsHDIgrqsvULetKy97--XUWx3ESMkMRWNwwYNEoC65nqvG_-ip1g0y_9N52RwspzW__QFNberHNf9asniAQv8dtFkbClW8hKyjPYawaIzmLgFw-OfCVyVyIkrjONs7nu2TZCV7sQvgG-txTtiSJ_vtBYB81vbv3n2ZSrjHsft6zyodZh0yNbRGJUc1Vb0ee4iAJQnOJ-a4Plsgx1r3qwhw_dVhkl20Omr2V81o84sfhAhd_Ye0Y4CFJk8EakQ5yRf8GNQ7gyn5Je3RWqnoAiW_gdB7VMqB7-eX4RjTml4W1RJAN2QWa7S21w-A_KrD7oc1Cp6vAOwPt_kkBxhYTApUkPIsiFQ5kJ0RnPA6NJFal9BGD9JVS9YDHZS2MHQicR-kUang362AghpexjcIDPTE1QPTEslzfpB2RnoosTPunPK5a3L0_hwSwWllagbCHxHXEA_6d73UhFeX23QYzMG_1gYFhANj7vIT5e3nDuRL_6Yep22h8tzRKAly8mk3Ke5U1_lU0sMrgdjXIInnsVzCbLfN42rUVlJaGOM1kbzM68-P9bLvu_qyD1h1iZak_coDPPNpioxg1BTQ5fyon4kSd89qAvSoDslIn3xJxwCABeY63lKoElQjel1mkusI4i1woGww_wDhS6jvFGP3R-d7xJtpTNiXsNvBc-ZIrca_XF1Z-YDnGCTy6v85vCTj-aU4xPcj7eW4CHSFwLslsBjjvNbH6UAHT5YtFW6KTlXY15_KBp79cIqOqKIOD6HRjtHijiJkgEC_BU6KPFPZh5kDH1kPX3c0wg1cFAreFM_BLje2s7MErA4kBvTwRQJMbaShFv8QOcABxLAFscw1iFBSu7QjeT0ugDblc53PCwTrlLAs5X7KTDyHgRvcGvkGKvWmFdlzD3WHLtJRlbrgDfDbYI0rWDKkR6-K2Bg--VAuUs-HBRM0FFUb0znnwaKE52Hjr39xWE1CiWmkQrcEkNhDdo-_LCnnJbXCWYiwV8rtJcFjRvISsz2w7avIJDRiGEOKw3odAL5FXztHMcLMHMuQ-wiE1LXh0FmdbSd7goHNK6Ehmoda8FP2mzN2DZEIEx887F_HO9xjQcVlHRlnECvphvBRax6jkmmJ7VUGrYLM2zH7T9MTGtuTUTASxfpvp7IYq49NhytYEieoTqDuPYVxpT7_ACywrkOZOnHUeuTvKFfDuCofE1IH_QfnB1lBk29u2qvKJMSHP5Xb1aAsZ-9_dMVIN0klVZIqvby6Khw2))/Home/Dashboard.aspx 
```

当它在 IIS 中失败时，url 看起来像：

```
http://localhost/Reports/(X(1)S(4a0qmf3mf5ebpgokpyog0beq)F(xQGpHp6u9P7tD7I5D8uLI7zZRylqaqssOk_930NAk5VlyED4DYAk5eAC-uPOwHl5EKUrILTmQYTTIiiELL1ILCdQ5EG1gRLsIR5wSIS5_EjW0ibRstbvXVPsdSZxQOT4Uwj-JjauRvTAYNWSdff0H3mvANX8mAfUhSuMKjy67HhGJZkQjFPqUYtll0xSdP8RJ-0lMzQ-uCWG9b2OiRPT35HRk6AiuKQPDUWZNjMRzKO9-NSfm_SQXHhq8wr4xbNXuBmyDmME1lpxl3BhB_Y86KZjl_9eklFOJ-oz8_dmyuEbZqvMzXYTSfC6sL95UlRfxgXkBHRdNzLdqvMD3_1Ke78fAKEEuE6JeUbEXpES76Q6M3NJpxwz1YlEMoC_PgV9s5EQtX65QZbxzML2kSyst38Eu_WLyCL-KKE3gAmEHSUhfZ1G5WXXOoSk__vgz1Od9SNUfjxsIyEK4-HstZMLGDNWXZZc7_DTlPGrXS6yr6NfjmJEixxKEpgP-HN3Q18YPyOcS5EUwGa3tISPjGKMGq5qmZcRyihwAImUA0X5lh-rgNvWNM5AkPK8F7fAzygNJ7CZMmKN87wiCsC8kDthKZrOhbzgO4EOTsv0gEnSe7wiSH4vWzrEumUrJDGrFGLmtudyl4hLgAwQcSdMh2OIapGNVAPQTwEqwqc4kEZnWpGxXrfPxejG-IH391TFqHLyYWkN5onVXWhOn3cCeYNqD0yc7jgOZ_AY4gTj4UtiB_PAK4jlRhwyQ4SozJzkSQFimtURC-H6Z7piB6ekXIihtAdTURTpaq6CmKefCh6ydgDJNywS9nFoFBKPUdi3kF9hpuz9yNtfz8zh4LAm6ikP2p0yXBpecQq2W7V6XFJhVXC00Hvx56kvks-r1V4660-WDsvee86-4GID1XBcM7AoOWfkvABWMRDLjixk8ud57QlyJ_kYmHTeIQWDuj3EA1a6383ffycVdx3AFJ8px3eNacHybKX-9kwoYJaoo_T019ZvrcgrNWeK4uEf3VRVYVRydkJoW4Pk6OgDRN1LvSYkwEjGiN_m2g03MLfpboLMtGzorBSjTwvId8u_CqqBB4QAqj7Vt4htU6jfKWlERlqo38dTdub0i69eLAJffVoTEH2wIhqIpRp6WIWk8NNh97AkqYAOR5744cNuqJBJI56ZsY7Ja31wPArJI4nO1ey49CzReI3W5I9MWW2TuWE3x2XjFxXbea_4uTv5CdhGOYqsd5IugFMLz-0Rcva77ZI-ZipISwzv62ZXAGaQKg6PuVWIEGtTs9K_B-h3Dhg3anjxNOS7t03U6v4d9lyNwtmN4nK4-29NUAf2DcPo7V4TQzc-TtTpv-4gcvA_U47HijfasQ2))/Home/Dashboard.aspx 
```

唯一的区别是 webdev 服务器在 web 根目录加载应用程序。我尝试添加一个空白测试页，以确保请求的页面之外没有资源，但它仍然失败。

有什么建议么？

# xmpp - Ejabberd 服务器不断让我注销并重新登录

> ID：12537380
> 
> 赞同：2
> 
> 时间：2012-09-21T19:58:53.520
> 
> 标签：xmpp, ejabberd

我正在构建一个 iOS 应用程序，但问题存在于所有客户端。iChat、Messages、Psi 等。因此，因为它存在于所有客户端上，我将假设它是服务器问题。

有没有人经历过这样的事情？如果是这样，你做了什么来修复它？我确定这是一些愚蠢的配置设置或其他东西，但我根本无法弄清楚。这是唯一看起来可能与 ejabberd.log 相关的内容：

```
=ERROR REPORT==== 2012-09-05 12:07:12 ===
Mnesia(ejabberd@localhost): ** WARNING ** Mnesia is overloaded: {dump_log,
                                                             time_threshold} 
```

提前感谢任何提示/指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:41:10.733

[https://github.com/processone/ejabberd/blob/master/src/ejabberd_c2s.erl#L936](https://github.com/processone/ejabberd/blob/master/src/ejabberd_c2s.erl#L936)似乎已经打了补丁。配置变量称为resource_conflict，您想要的值是setresource。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T03:16:01.060

上述警告（可能）与您面临的问题无关。这些[mnesia](http://www.erlang.org/doc/man/mnesia.html) [事件](http://www.erlang.org/doc/apps/mnesia/Mnesia_chap5.html#id76510)通常发生在需要转储事务日志但之前的事务日志转储尚未完成时。

您面临的问题需要调试，您可以`{log_level, 5}`在里面设置`ejabberd.cfg`。这将为 ejabberd 启用调试日志记录。然后查看日志以找出有关您为什么会发生这种情况的任何猜测。另外，回来在这里粘贴您的日志文件详细信息，也许我们将能够为您提供进一步的帮助。我从来没有遇到过 ejabberd 这样无意义的问题。

**日志文件附件后更新：**

正如乔在下面所写的，这确实是由于资源冲突而发生的。您的两个客户正在尝试使用相同的资源值登录。但在理想世界中，这应该无关紧要。Jabber 服务器应该通过在客户端请求的资源值之上附加或预先添加自定义值来处理此问题。

例如，以下是 gtalk（甚至是 facebook 聊天）服务器将执行的操作：

```
SENT <iq xmlns="jabber:client" type="set" id="1"><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"><resource>jaxl#resource</resource></bind></iq>
RCVD <iq id="1" type="result"><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"><jid>jabberxmpplibrary@gmail.com/jaxl#resou27F46704</jid></bind></iq> 
```

如您所见，我的客户端请求绑定资源值`jaxl#resource`，但 gtalk 服务器实际上将我的会话绑定到资源值`jaxl#resou27F46704`。简而言之，这不是您客户端中的错误，而是 ejabberd 中的错误。

要解决此问题，您可以做两件事：

1.  资源值可能在客户端配置中的某处硬编码。只需删除它。一个好的客户端会通过在它结束时生成一个随机资源值来自动处理这个问题。
2.  修补 ejabberd 以表现 gtalk 服务器的行为（如上所示）。这是[ejabberd_c2s.erl](https://github.com/processone/ejabberd/blob/master/src/ejabberd_c2s.erl#L936) src 中的相关部分，需要进行一些调整。还要在c2s源文件里面搜索`Replaced by new connection`一下，你就会明白是怎么回事了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T17:24:58.790

这听起来像是您客户端中的“资源决斗”错误。您可能有两个客户端副本同时使用相同的资源运行，并且执行错误的自动重新连接逻辑。当第二个客户端登录时，第一个客户端脱机启动并出现冲突错误。第一个客户端重新登录，导致第二个客户端出现冲突错误。环形。

这方面的证据在您的日志文件中，第 3480 行：

```
D(<0.373.0>:ejabberd_c2s:1553) : Send XML on stream = 
  <<"<stream:error><conflict xmlns='urn:ietf:params:xml:ns:xmpp-streams'/>
       <text xml:lang='en' xmlns='urn:ietf:params:xml:ns:xmpp-streams'>
         Replaced by new connection
       </text>
     </stream:error>">> 
```

# c# - 如何从 html 页面接收文本并在 Controller 端对其进行验证以仅允许数字

> ID：12537382
> 
> 赞同：0
> 
> 时间：2012-09-21T19:59:01.763
> 
> 标签：c#, html, asp.net-mvc-3

我有一个带有文本框的小网页，我希望它只输入数字。我怎样才能在 C# 方面做到这一点。请帮我！我在想我需要一个 if 语句说`if(userId = xxx !numbers)`然后留言显示请输入一个数字。我想不通。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace AlexUsers.Controllers
{
    public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            string userId = Request["UserId"];

            return View();
        }

    }
}

<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>
<!DOCTYPE html>

<html>
<head runat="server">
    <title>Search</title>
</head>
    <div align="center">
        <form id="searchUser" method="post" action="">
            <table align="center">
        <tr>
            <td class="label">
                Enter ID:
            </td>
            <td>
                <input type="text" name="UserId" id="UserId" />
            </td>
        </tr>
        <tr>
            <td>
                <button class="searchButton" id="searchButtong">Search</button>
            </td>
        </tr>
      </table>
     </form>
   </div>
   <hr /> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:19:00.467

提交后，您可以使用 Integer.TryParse 检查输入是否为整数。

```
string userId = Request["UserId"];
int userIdINT;
if(Int32.TryParse(userId,userIdINT)){       
    // your code here - userIdINT is an integer converted from userId (string) now

} 
```

# html - 如何在每次画布变换后实现 Lanczos 重采样，而无需制作新画布？

> ID：12537383
> 
> 赞同：2
> 
> 时间：2012-09-21T19:59:03.610
> 
> 标签：html, image-processing, canvas, lanczos

**更新：**一旦我让这个演示工作......神圣的烟雾，它很慢，就像 12-16 秒只进行 2 级渲染（当图像大约为 1000x2000 像素时）。这甚至不值得打扰。

我在这里的最佳答案中发现了这个非常棒且充满希望的代码：[Resizing an image in an HTML5 canvas](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)

```
//returns a function that calculates lanczos weight
function lanczosCreate(lobes){
  return function(x){
    if (x > lobes) 
      return 0;
    x *= Math.PI;
    if (Math.abs(x) < 1e-16) 
      return 1
    var xx = x / lobes;
    return Math.sin(x) * Math.sin(xx) / x / xx;
  }
}

//elem: canvas element, img: image element, sx: scaled width, lobes: kernel radius
function thumbnailer(elem, img, sx, lobes){ 
    this.canvas = elem;
    elem.width = img.width;
    elem.height = img.height;
    elem.style.display = "none";
    this.ctx = elem.getContext("2d");
    this.ctx.drawImage(img, 0, 0);
    this.img = img;
    this.src = this.ctx.getImageData(0, 0, img.width, img.height);
    this.dest = {
        width: sx,
        height: Math.round(img.height * sx / img.width),
    };
    this.dest.data = new Array(this.dest.width * this.dest.height * 3);
    this.lanczos = lanczosCreate(lobes);
    this.ratio = img.width / sx;
    this.rcp_ratio = 2 / this.ratio;
    this.range2 = Math.ceil(this.ratio * lobes / 2);
    this.cacheLanc = {};
    this.center = {};
    this.icenter = {};
    setTimeout(this.process1, 0, this, 0);
}

thumbnailer.prototype.process1 = function(self, u){
    self.center.x = (u + 0.5) * self.ratio;
    self.icenter.x = Math.floor(self.center.x);
    for (var v = 0; v < self.dest.height; v++) {
        self.center.y = (v + 0.5) * self.ratio;
        self.icenter.y = Math.floor(self.center.y);
        var a, r, g, b;
        a = r = g = b = 0;
        for (var i = self.icenter.x - self.range2; i <= self.icenter.x + self.range2; i++) {
            if (i < 0 || i >= self.src.width) 
                continue;
            var f_x = Math.floor(1000 * Math.abs(i - self.center.x));
            if (!self.cacheLanc[f_x]) 
                self.cacheLanc[f_x] = {};
            for (var j = self.icenter.y - self.range2; j <= self.icenter.y + self.range2; j++) {
                if (j < 0 || j >= self.src.height) 
                    continue;
                var f_y = Math.floor(1000 * Math.abs(j - self.center.y));
                if (self.cacheLanc[f_x][f_y] == undefined) 
                    self.cacheLanc[f_x][f_y] = self.lanczos(Math.sqrt(Math.pow(f_x * self.rcp_ratio, 2) + Math.pow(f_y * self.rcp_ratio, 2)) / 1000);
                weight = self.cacheLanc[f_x][f_y];
                if (weight > 0) {
                    var idx = (j * self.src.width + i) * 4;
                    a += weight;
                    r += weight * self.src.data[idx];
                    g += weight * self.src.data[idx + 1];
                    b += weight * self.src.data[idx + 2];
                }
            }
        }
        var idx = (v * self.dest.width + u) * 3;
        self.dest.data[idx] = r / a;
        self.dest.data[idx + 1] = g / a;
        self.dest.data[idx + 2] = b / a;
    }

    if (++u < self.dest.width) 
        setTimeout(self.process1, 0, self, u);
    else 
        setTimeout(self.process2, 0, self);
};
thumbnailer.prototype.process2 = function(self){
    self.canvas.width = self.dest.width;
    self.canvas.height = self.dest.height;
    self.ctx.drawImage(self.img, 0, 0);
    self.src = self.ctx.getImageData(0, 0, self.dest.width, self.dest.height);
    var idx, idx2;
    for (var i = 0; i < self.dest.width; i++) {
        for (var j = 0; j < self.dest.height; j++) {
            idx = (j * self.dest.width + i) * 3;
            idx2 = (j * self.dest.width + i) * 4;
            self.src.data[idx2] = self.dest.data[idx];
            self.src.data[idx2 + 1] = self.dest.data[idx + 1];
            self.src.data[idx2 + 2] = self.dest.data[idx + 2];
        }
    }
    self.ctx.putImageData(self.src, 0, 0);
    self.canvas.style.display = "block";
} 
```

...

```
img.onload = function() {
  var canvas = document.createElement("canvas");
  new thumbnailer(canvas, img, 188, 3); //this produces lanczos3
  //but feel free to raise it up to 8\. Your client will appreciate
  //that the program makes full use of his machine.
  document.body.appendChild(canvas);
} 
```

然而，这个实现加载一个图像并渲染它，故事结束。

我一直在尝试重新实现此代码，以便在每次缩放现有画布时进行过滤（想想，放大和缩小图像或文档），而无需加载新图像或创建新画布。

我怎样才能让它以这种方式工作？或者这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:45:08.443

您想要做的是像[单例](http://en.wikipedia.org/wiki/Singleton_pattern)一样重用您的画布对象。这将让您节省每次创建新画布对象的成本，并且您将重复使用相同的对象

```
function getCanvas(){ 
  var canvas; 
  if (typeof canvas === "undefined"){ canvas = document.createElement("canvas");}
  return canvas;
}
img.onload = function() {
  var canvas = getCanvas("canvas");
  .... THE REST OF YOUR CODE .......
} 
```

.

**然而，这并不是减慢代码的原因，**图像缩放算法是非常重的算法，使用密集的 cpu“通常在非常低的水平上使用 gpu 加速”，并使用诸如[多缓冲区](http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics)r 等先进技术。这是[java.net](http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)中关于图像缩放如何工作的有趣教程，它在 java 中，但您可以插入到任何语言。

**Javascript 还没有为这种技术做好准备**，所以我建议您使用 canvas api 中可用的[转换](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#transformations)，因为在您阅读的教程中，您阅读的有效方法是使用 canvas2Dcontext。

```
var ctx = canvas.getContext("2d"); 
ctx.scale(2,2); 
```

# android - 延迟重复通知声音

> ID：12537391
> 
> 赞同：0
> 
> 时间：2012-09-21T19:59:53.627
> 
> 标签：android

我正在尝试每两秒播放一次通知声音。我的代码如下：

```
final Handler myHandler = new Handler();
mMediaPlayer = new MediaPlayer();

final Runnable mMyRunnable = new Runnable()
{
    @Override
    public void run()
    {
        try 
        {
            mMediaPlayer.setDataSource(getBaseContext(), getAlarmUri(alarm_number));
            final AudioManager audioManager = (AudioManager) getBaseContext().getSystemService(Context.AUDIO_SERVICE);

            if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0)
            {
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
                mMediaPlayer.prepare();
                mMediaPlayer.start();
            }
        } 
        catch (IOException e) 
        {
        }
    }
 };

    mMediaPlayer.setOnCompletionListener(new OnCompletionListener()
    {
        @Override
        public void onCompletion(MediaPlayer mp) 
        {
            myHandler.postDelayed(mMyRunnable, 2000);
        }   
    });

    myHandler.post(mMyRunnable); 
```

`mMediaPlayer.setDataSource(...` 当代码执行时，通知声音会播放一次，然后我在不知道为什么的那一行收到 IllegalStateException 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:30:21.620

不！您应该使用 a`Timer`来执行`TimerTask`您选择的重复率：

```
 Timer timer = new Timer();
    TimerTask task = new TimerTask()
    {
        @Override
        public void run()
        {
            // Do your work here
        }
    };

    timer.schedule(task, 'DELAY_FOR_EXECUTION', 'TIME_TO_WAIT');
example:
   `//timer.schedule(task, 0, 5000);` 
```

这将立即运行，每 5 秒

# c++ - 使用格式化的结果解析搜索/替换头文件

> ID：12537394
> 
> 赞同：0
> 
> 时间：2012-09-21T20:00:04.093
> 
> 标签：c++, c, shell, awk

我有一个头文件，其中包含许多`#define`形式为 的宏`AAA_xxxxx`，其中`AAA`始终是一组三码，并且`xxxxx`始终是一个数值。我需要修改文件，以便将`#define AAA_xxxxx`其作为`#define AAA_xxxxx xxxxx`.

我能想到的最好的例子是 Oracle ORA-xxx（错误代码）。例如，如果我有一条像 ...

```
#define ORA_00001    // "unique constraint violated" 
```

我需要一个脚本来替换该行，使其看起来像...

```
#define ORA_00001  00001  // "unique constraint violated" 
```

...无需修改文件的其余部分或行本身。

我相信这`awk`是我的答案，但我似乎无法正确理解语法......

```
awk '{ if ( $1 == "#define" ) parse_and_print_the_line($0)  ; else print $0 }' 
```

任何想法（awk 与否）将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:07:23.260

这是一个简单的 Perl 脚本：

```
perl -i -pe 's{^(#define(\s+)[A-Z]{3}_(\d+))(?=\s*\/\/|\s*$)}{$1$2$3}' file_to_modify.h 
```

它找到与以下任一模式匹配的任何行：

```
#define  XYZ_1234234456
#define  XYZ_1234234456    // comment 
```

并将其更改为以下模式之一：

```
#define  XYZ_1234234456  1234234456
#define  XYZ_1234234456  1234234456    // comment 
```

# php - 向外部站点提交数据

> ID：12537401
> 
> 赞同：-1
> 
> 时间：2012-09-21T20:00:18.333
> 
> 标签：php, post

我正在编写一个将一些数据拉到外部站点的扩展程序。
我想知道更可靠的方法是什么。

目前我正在使用 cURL，但由于某些主机没有安装该库，所以我使用[这种方法](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)作为后备（`fopen`with `stream_context_create`）。
但是，有时它无论如何都会失败，我无法重现该错误。

你知道其他方法吗？有没有改进的余地？

**编辑**：很遗憾没有，我没有日志，因为我的测试没有问题。*一些*客户报告说没有发送数据，我想知道是否有一组后备动作，从最常见的动作（即 cURL）到“最后的手段”动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:13:15.910

如果你看起来足够努力，可能*有*比你提到的两个更多的选择，但在某些时候，客户需要有一个像样的主机，而不是把责任归咎于你。

**cURL**
大多数主机都提供 cURL。有些人会禁用它，但很容易检查。

**fopen(url)**
这可以通过[allow_url_fopen 运行时选项](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)禁用，这也很容易检查。

例如，您可以发挥创造力并使用外部 Perl 脚本来完成 PHP 无法完成的工作（每个配置），但是如果主机禁用了外部执行功能怎么办？

我认为提供这两个选项就足够了，然后提供适当的错误处理，以便客户知道它不会起作用。您的脚本在每台主机上运行并不是一个公平的期望。只是不要让客户看到某些东西不起作用，而您没有得到足够的信息让他们知道这是他们的主人的错。

# jakarta-ee - Glassfish v3 - 如何在服务器端日志上禁用堆栈跟踪

> ID：12537402
> 
> 赞同：0
> 
> 时间：2012-09-21T20:00:17.717
> 
> 标签：jakarta-ee, glassfish, webserver, java-server, server-administration

我想在 Glassfish v3 中禁用服务器端日志上的堆栈跟踪？有什么选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:26:00.257

为什么不使用`Log Rotate Manager`，它将帮助您管理日志。看看这里：[https](https://blogs.oracle.com/sirajg/entry/managing_rotated_log_files) ://blogs.oracle.com/sirajg/entry/managing_rotated_log_files 。

如果您仍想禁用它们，那么您需要使用日志级别，请查看此处：[http ://docs.oracle.com/cd/E18930_01/html/821-2416/gklmn.html#gklml](http://docs.oracle.com/cd/E18930_01/html/821-2416/gklmn.html#gklml)

# android - Android中的XML标签 - 有没有参考

> ID：12537404
> 
> 赞同：1
> 
> 时间：2012-09-21T20:00:22.627
> 
> 标签：android, xml, android-layout, android-xml

我正在做一个 Android XML GUI 布局：

```
<EditTextPreference
android:key="PREF_LT_500"
android:title="Step 1"
android:summary="aaaaa"
android:inputType="number" 
android:defaultValue="0"
android:dialogTitle="yyy" /> 
```

1）我希望 inputType 是小数。我正在努力寻找可以提供此功能的 XML 值。inputType="number" 只允许数字，而不是“.”。inputType 值必须是什么才能强制输入为十进制数？

2）总的来说，我发现尝试找出 XML 标记和允许的值既浪费时间又困难。我正在浏览 Android 参考资料，有时会列出标签，但通常不会。是否有 XML GUI 模式的参考？

3）我正在使用 Eclipse，如果我使用 XML 编辑器，似乎有些值没有解析。它没有显示“inputType”的可能值。也许我的 Eclipse 缺少一些东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:14:07.340

我找到了问题第 1 部分的答案。

```
inputType="numberDecimal". 
```

# jquery - 如何在鼠标悬停时更改 div 背景图像并添加淡入淡出等效果？

> ID：12537405
> 
> 赞同：0
> 
> 时间：2012-09-21T20:00:23.410
> 
> 标签：jquery, html

我看到了问题前一部分的解决方案，当我使用它时效果很好，我已经将它包含在下面（感谢**rsofter**如果你看到这个！）。我想知道必须添加什么才能将`fadeIn`效果添加`fadeOut`到背景图像？我遇到的解决方案是：

您可以使用 jquery 来执行此操作。

您的标记：

```
<div id="div1"></div>
<div id="div2"></div> 
```

你的脚本：

```
$("#div1").mouseover( function() {
    $("#div2").css("background-image", "url('image.png')");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:03:39.177

您正在寻找的 jQuery 函数是[`animate()`](http://api.jquery.com/animate/)

```
$("#div1").mouseover( function() {
        $("#div2").animate({background-image: "url('image.png')"});
}); 
```

所做的是`animate`平滑过渡到 CSS 属性的映射。

这是最简单的调用，`animate`但有很多选项（请参阅链接）。您甚至可以指定动画的持续时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:14:50.310

您不能为背景图像的不透明度设置动画。这是不可能的。解决方法是将`<img>`一个`parent container``<div id="2">`

情景->

```
<div id="1">
    div 1
</div>
<div id="wrapper">
    <img src="path/to/my/background/image"/>
    <div id="2">

    </div>
</div> 
```

相对的 css ->

```
#wrapper{
    position:relative;
}
#wrapper img{
    position:absolute;
        top:0;
        left:0;
    z-index:-1
}
#wrapper #div2{
    display:block;
    height: // this value should be the same as the background images size.
    width:  // this value should be the same as the background images size.
} 
```

jQuery ->

```
$('#div1').hover(function(){
    $('#wrapper img').fadeOut('slow', function(){
        //this is the callback function of fadeout, now change the background image URL.    
        $(this).css('background-image', 'location/to/my/new/image.ext');
        var checkForDelay = setTimeout(function(){
            //if they haven't moused out after 3 seconds, then show them the new background.
            $('#wrapper img').fadeIn('slow');
        }, 3000);
    });
}, function(){
   clearTimeout(checkForDelay);
   $('#wrapper img').fadeIn('slow');
}); 
```

[jsFiddle 概述了类似的原则](http://jsfiddle.net/Km4LV/)

# html - 标签在 IE 中缺乏实质内容，因此破坏了 CSS 菜单

> ID：12537406
> 
> 赞同：-4
> 
> 时间：2012-09-21T20:00:29.510
> 
> 标签：html, css, internet-explorer, drop-down-menu

 在构建站点时，我遇到了 IE 和我们的 css 菜单系统的一个奇怪问题。菜单顶层的 a 标签似乎缺少 Firefox 和 Chrome 提供的相同可点击区域。因此，因为 a 不与兄弟 ul 相邻，所以悬停会显示 ul，但是一旦您尝试移动到 ul，它就会消失，因为 IE 不认为您仍然悬停在包含 a 的 li 上。 

这是我正在谈论的示例页面： [IE和CSS菜单问题](http://sandbox.highsitetest.com/examples/problem_with_menu_in_ie.html)

我希望它在 IE >= 8 中工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:04:36.843

`:hover`在顶层包含定义`<LI>`而不是`<A>`- 子菜单不包含在锚标记中，因此当您将鼠标移到子菜单上时它会消失。

从改变

```
#menuh ul li a:hover 
```

至

```
#menuh ul li:hover 
```

# c# - 从数据库面向对象？

> ID：12537407
> 
> 赞同：1
> 
> 时间：2012-09-21T20:00:52.673
> 
> 标签：c#, .net, entity-framework, oop, ado.net

我做了很多 ADO.NET EF 编程，但从来没有一个对象/表继承自另一个对象/表。

如果我有一个包含三个表（正方形、三角形、多边形）的现有数据库并添加一个 ADO.NET 模型以使我能够 Linq 访问这些表，我如何确定正方形和三角形对象派生自多边形？

架构中是否存在父表中的列存在于子类的列中的要求？

然后如果我想覆盖像 ComputeArea() 这样的方法怎么办？我会使用扩展方法还是有更好的方法？

我的基本问题是面向对象编程如何/在哪里/是否为 ORM 带来价值，但我意识到在 stackoverflow 上不鼓励价值/主观问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:03:24.187

> 如何确定正方形和三角形对象来自多边形？

你最好看看这个：

[在 SQL Server 中实现表继承](http://www.sqlteam.com/article/implementing-table-inheritance-in-sql-server)

> 然后如果我想覆盖像 ComputeArea() 这样的方法怎么办？我会使用扩展方法还是有更好的方法？

扩展方法应该可以解决问题，最好让您的实体表现得像值对象。

> 我的基本问题是面向对象编程如何/在哪里/是否为 ORM 带来价值，但我意识到在 stackoverflow 上不鼓励价值/主观问题。

这正是它（ORM）存在的原因，也就是他们所谓的**对象**关系映射。所以它确实带来了价值：更简洁的代码、易于编写、易于重构。

现在，话虽如此，恕我直言的一个缺点是，当用户对底层存储技术没有任何经验时，ORM 工具的使用就不能达到应有的性能，不一定是因为技术，而是因为你的方式使用它（至于使用面向对象与关系世界的连接的方式）或诸如您正在尝试做的事情之类的事情，就是这样，继承。这些事情在 OO 世界中非常简单，但在关系数据库中却不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:04:57.010

您可以让它们从基类继承。它将在两个表中创建相同的字段。如果您不想复制列，可以将正方形和三角形的主键设为多边形对象的主键，然后在这些对象上设置正方形/三角形特定字段。

覆盖该方法可以很容易地完成。只要确保将 [NotMapped] 属性放在它上面。

编辑：这适用于使用带数据注释的代码优先。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:05:24.247

方法=行为和行为是对象的一个​​方面，而不是数据。to`ComputeArea()`是通过传统的 OOP 原则（如 interhitance 和 SOLID 设计）维护的。

将数据映射到对象有两种形式：

1.  每班表
2.  每个层次结构的表

用于继承的快速代码片段

```
abstract class polygon
{
    abstract decimal ComputeArea();
}

class Triangle : Polygon
{
     public decimal Base {get;set;}
     public decimal Height {get;set;}

     public override decimal ComputeArea()
     {
          return Base * Height / 2;
     }
}

class class Square : Polygon
{
     public decimal Side {get;set;}

     public override decimal ComputeArea()
     {
          return Side * 4;
     }
}

class class Circle : Polygon
{
     public decimal Radius {get;set;}

     public override decimal ComputeArea()
     {
          return Math.Square(Math.Pi * Radius);
     }
} 
```

# asp.net - 从 ASP.NET webservice 中的 cellid、lac、MCC、MNC 获取经纬度

> ID：12537409
> 
> 赞同：1
> 
> 时间：2012-09-21T20:00:55.347
> 
> 标签：asp.net, location, cellid

我有一个 .asmx 网络服务，它获取 cellid、MCC、MNC 和 LAC，我想使用 opencellid 从这些信息中获取纬度和经度，我没有在互联网上找到资源，所以我不知道在哪里开始。如果你能帮助我找出如何做到这一点，或者给我一个替代解决方案来从这些信息中找到纬度和经度，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T03:26:18.970

我面临同样的情况。读这个..答案就在这里。您可以将此代码合并到您的项目中..

[http://android-coding.blogspot.com/2011/06/convert-celllocation-to-real-location.html](http://android-coding.blogspot.com/2011/06/convert-celllocation-to-real-location.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:22:10.513

如何使用`GoogleMaps Api`.

我在这里写了一篇关于它的博客文章：[博客文章](http://programmertoolbox.wordpress.com/2013/04/18/how-to-get-latitude-and-longitude-from-approximate-position-cellidlacmncmcc/)

将此类添加到您的项目中：

```
public class GoogleMapsApi
{
    static byte[] PostData(int MCC, int MNC, int LAC, int CID)
    {

        /* The shortCID parameter follows heuristic experiences:

         * Sometimes UMTS CIDs are build up from the original GSM CID (lower 4 hex digits)

         * and the RNC-ID left shifted into the upper 4 digits.

         */

        byte[] pd = new byte[] {

    0x00, 0x0e,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00,

    0x00, 0x00,

    0x00, 0x00,

    0x1b,

    0x00, 0x00, 0x00, 0x00, // Offset 0x11

    0x00, 0x00, 0x00, 0x00, // Offset 0x15

    0x00, 0x00, 0x00, 0x00, // Offset 0x19

    0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, // Offset 0x1f

    0x00, 0x00, 0x00, 0x00, // Offset 0x23

    0x00, 0x00, 0x00, 0x00, // Offset 0x27

    0x00, 0x00, 0x00, 0x00, // Offset 0x2b

    0xff, 0xff, 0xff, 0xff,

    0x00, 0x00, 0x00, 0x00

};

        bool isUMTSCell = ((Int64)CID > 65535);

    /*    if (shortCID)

            CID &= 0xFFFF;      /* Attempt to resolve the cell using the

                        GSM CID part */

        if ((Int64)CID > 65536) /* GSM: 4 hex digits, UTMS: 6 hex

                        digits */

            pd[0x1c] = 5;

        else

            pd[0x1c] = 3;

        pd[0x11] = (byte)((MNC >> 24) & 0xFF);

        pd[0x12] = (byte)((MNC >> 16) & 0xFF);

        pd[0x13] = (byte)((MNC >> 8) & 0xFF);

        pd[0x14] = (byte)((MNC >> 0) & 0xFF);

        pd[0x15] = (byte)((MCC >> 24) & 0xFF);

        pd[0x16] = (byte)((MCC >> 16) & 0xFF);

        pd[0x17] = (byte)((MCC >> 8) & 0xFF);

        pd[0x18] = (byte)((MCC >> 0) & 0xFF);

        pd[0x27] = (byte)((MNC >> 24) & 0xFF);

        pd[0x28] = (byte)((MNC >> 16) & 0xFF);

        pd[0x29] = (byte)((MNC >> 8) & 0xFF);

        pd[0x2a] = (byte)((MNC >> 0) & 0xFF);

        pd[0x2b] = (byte)((MCC >> 24) & 0xFF);

        pd[0x2c] = (byte)((MCC >> 16) & 0xFF);

        pd[0x2d] = (byte)((MCC >> 8) & 0xFF);

        pd[0x2e] = (byte)((MCC >> 0) & 0xFF);

        pd[0x1f] = (byte)((CID >> 24) & 0xFF);

        pd[0x20] = (byte)((CID >> 16) & 0xFF);

        pd[0x21] = (byte)((CID >> 8) & 0xFF);

        pd[0x22] = (byte)((CID >> 0) & 0xFF);

        pd[0x23] = (byte)((LAC >> 24) & 0xFF);

        pd[0x24] = (byte)((LAC >> 16) & 0xFF);

        pd[0x25] = (byte)((LAC >> 8) & 0xFF);

        pd[0x26] = (byte)((LAC >> 0) & 0xFF);

        return pd;

    }

    static public string[] GetLatLng(int MCC, int MNC, int LAC, int CID)
    {

        string[] result = new string[2];

        try
        {

            String url = "http://www.google.com/glm/mmap";

            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(

                new Uri(url));

            req.Method = "POST";

            byte[] pd = PostData(MCC, MNC, LAC, CID);

            req.ContentLength = pd.Length;

            req.ContentType = "application/binary";

            Stream outputStream = req.GetRequestStream();

            outputStream.Write(pd, 0, pd.Length);

            outputStream.Close();

            HttpWebResponse res = (HttpWebResponse)req.GetResponse();

            byte[] ps = new byte[res.ContentLength];

            int totalBytesRead = 0;

            while (totalBytesRead < ps.Length)
            {

                totalBytesRead += res.GetResponseStream().Read(

                    ps, totalBytesRead, ps.Length - totalBytesRead);

            }

            if (res.StatusCode == HttpStatusCode.OK)
            {

                short opcode1 = (short)(ps[0] << 8 | ps[1]);

                byte opcode2 = ps[2];

                int ret_code = (int)((ps[3] << 24) | (ps[4] << 16) |

                               (ps[5] << 8) | (ps[6]));

                if (ret_code == 0)
                {

                    double lat = ((double)((ps[7] << 24) | (ps[8] << 16)

                                 | (ps[9] << 8) | (ps[10]))) / 1000000;

                    double lon = ((double)((ps[11] << 24) | (ps[12] <<

                                 16) | (ps[13] << 8) | (ps[14]))) /

                                 1000000;

                    result[0] = lat.ToString();
                    result[1] = lon.ToString();
                    return result;

                }

                else
                {

                    return result;
                }

            }

            else

                return result;

        }

        catch (Exception ex)
        {
            result[0] = ex.Message;
            return result;

        }

    }
} 
```

调用课程以获取您想要的纬度和对数：

```
string[] s = GoogleMapsApi.GetLatLng(MCC, MNC, lac, cellid);
double lat = 0;
Boolean b1 = double.TryParse(s[0], out lat);
double lon = 0;
Boolean b2 = double.TryParse(s[1], out lon); 
```

# profiling - 在 google app engine sdk (djangoappengine) 中配置 python

> ID：12537411
> 
> 赞同：0
> 
> 时间：2012-09-21T20:01:04.603
> 
> 标签：profiling, django-nonrel, djangoappengine

我正在使用 Google App Engine SDK 开发一个 dDango 应用程序 (djangoappengine)。我的应用程序非常缓慢，我想对其进行分析。我已经尝试过 cProfile、profile 和 hotshot

[https://code.djangoproject.com/wiki/ProfilingDjango](https://code.djangoproject.com/wiki/ProfilingDjango)

但是，由于（我认为）Google 提供的预装 python-libs 有限。所有尝试都会导致一些`ImpportError`. 也就是说，cProfile、profile 等已安装在计算机上，但在使用 GAE SDK 运行我的应用程序时不“可用”。

我曾尝试将 cProfile 直接符号链接到我的应用程序中（就像我自己编写的一样），但这只会带来其他问题。

**有没有一种真正的方法可以轻松地分析 djangoappengine 应用程序？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:20:40.707

符号链接路线是要走的路。

您可以使用 AppStats 来分析 App Engine API 调用。

[https://developers.google.com/appengine/docs/python/tools/appstats](https://developers.google.com/appengine/docs/python/tools/appstats)

这通常很有用，因为通常瓶颈将出现在数据存储请求等上。如果您有自己的计算密集型循环来分析，这将无济于事。

# workflow-foundation-4 - 获取子活动子树

> ID：12537412
> 
> 赞同：1
> 
> 时间：2012-09-21T20:01:06.200
> 
> 标签：workflow-foundation-4, get-childitem, custom-activity

我正在将遗留工作流系统转换为 WF4，因此我必须跳过几个环节才能使其与我们应用程序的 api 匹配。所以我会尽量让问题解释尽可能简单。:)

我有一个自定义活动，它接受一个序列作为参数，然后执行它。在执行它之前，自定义活动需要遍历序列（以及它的分支等）以查找特定类型的子活动 - 然后它会对这些特定的子活动进行一些报告。

我知道当约束可以使用 GetChildSubtree 活动时，可以在验证期间遍历活动的子子树，但这并不能让我在运行时访问列表。我也知道也可以使用主机应用程序中的 ActivityValidationServices 执行类似的调用，但这也不适用于我的场景。

那么从自定义活动的执行方法中获取子子树中活动列表的最佳方法是什么？

提前致谢！

马库斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:46:19.387

您可能想看看[WorkflowInspectionServices](http://msdn.microsoft.com/en-us/library/system.activities.workflowinspectionservices.aspx)类，它*提供了使用活动树的运行时元数据的方法*。特别是[GetActivities](http://msdn.microsoft.com/en-us/library/system.activities.workflowinspectionservices.getactivities.aspx)方法。

GetActivities 返回活动的所有直接子项，包括活动、委托处理程序、变量默认值和参数表达式。您现在可以编写一个扩展方法来返回所有活动，包括内部分支：

```
public static IEnumerable<Activity> GetInnerActivities(this Activity activity)
{
    var children = WorkflowInspectionServices.GetActivities(activity);

    foreach (var child in children)
    {
        children = children.Concat(child.GetChildren());
    }

    return children;
} 
```

现在获取指定类型的所有活动的内部活动：

```
activity.GetInnerActivities().OfType<MySpecificType>(); 
```

# python - 将一列附加到二维数组

> ID：12537417
> 
> 赞同：2
> 
> 时间：2012-09-21T20:01:19.977
> 
> 标签：python

我在 Python 中有一个名为“AllLines”的二维数组

```
[['Suppliers', 'Spend', 'Test Field\n'], 
 ['Dell Inc', '9000', '1\n'], 
 ['Dell Computers', '9000', '2\n'], 
 ['HBC Corp', '9000', '3\n'], 
 ['HBC INC', '9000', '4']] 
```

因此，它是数组中的数组。我需要将项目附加到内部数组。给我这个：

```
[['NEW','Suppliers', 'Spend', 'Test Field\n'], 
 ['N-E-W','Dell Inc', '9000', '1\n'], 
 ['N-E-W---','Dell Computers', '9000', '2\n'], 
 ['N-E---W','HBC Corp', '9000', '3\n'], 
 ['N-W-W','HBC INC', '9000', '4']] 
```

如何实现向内部数组添加新项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:05:00.900

您可以像添加任何其他列表一样附加或插入它们，例如：

```
lst = list_of_lists[0]
lst.insert(0,'NEW') 
```

或者，在一行中：

```
list_of_lists[0].insert(0,'NEW') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T20:05:34.043

您可以使用切片分配：

```
>>> a = [['Suppliers', 'Spend', 'Test Field\n'], ['Dell Inc', '9000', '1\n']]
>>> a[0][0:0] = ["NEW"]
>>> a[1][0:0] = ["N-E-W"]
>>> a
[['NEW', 'Suppliers', 'Spend', 'Test Field\n'], ['N-E-W', 'Dell Inc', '9000', '1\n']] 
```

一些时间安排：

```
>>> timeit.timeit(setup="a = [['Suppliers', 'Spend', 'Test Field'], ['Dell Inc', '9000', '1']]", 
    stmt="a[0][0:0] = ['NEW']", number=100000)
3.57850867468278
>>> timeit.timeit(setup="a = [['Suppliers', 'Spend', 'Test Field'], ['Dell Inc', '9000', '1']]", 
    stmt="a[0].insert(0, 'NEW')", number=100000)
4.941971139085055
>>> timeit.timeit(setup="a = [['Suppliers', 'Spend', 'Test Field'], ['Dell Inc', '9000', '1']]", 
    stmt="a[0] = ['NEW'] + a[0]", number=100000)
33.147023662906804 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:05:36.243

```
AllLines = [['Suppliers', 'Spend', 'Test Field\n'], ['Dell Inc', '9000', '1\n'], ['Dell Computers', '9000', '2\n'], ['HBC Corp', '9000', '3\n'], ['HBC INC', '9000', '4'] 
```

要将“NEW”添加到每行的开头：

```
newAllLines = [['NEW']+row for row in AllLines] 
```

如果您有一个称为`firsts`项目的列表，因此必须将第一`i`项`firsts`添加为第`i`th 行的第一列，则：

```
newAllLines = [list(i[0])+i[1] for i in zip(firsts, AllLines)] 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T20:07:27.080

```
>>> lis=[['Suppliers', 'Spend', 'Test Field\n'], ['Dell Inc', '9000', '1\n'], ['Dell Computers', '9000', '2\n'], ['HBC Corp', '9000', '3\n'], ['HBC INC', '9000', '4']]
>>> lis1=['NEW','N-E-W','N-E-W---','N-E---W','N-W-W']
>>> for i,x in enumerate(lis1):
    lis[i].insert(0,x)

>>> lis
[['NEW', 'Suppliers', 'Spend', 'Test Field\n'], ['N-E-W', 'Dell Inc', '9000', '1\n'], ['N-E-W---', 'Dell Computers', '9000', '2\n'], ['N-E---W', 'HBC Corp', '9000', '3\n'], ['N-W-W', 'HBC INC', '9000', '4']] 
```

或如@mgilson 建议的那样：

```
for item,lst in zip(lis1,lis): 
    lst.insert(0,item) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T20:09:45.900

```
>>> d=[['Suppliers', 'Spend', 'Test Field\n'],
...  ['Dell Inc', '9000', '1\n'],
...  ['Dell Computers', '9000', '2\n'],
...  ['HBC Corp', '9000', '3\n'],
...  ['HBC INC', '9000', '4']]
>>> d2 = zip(*d)
>>> d2.append([1,2,3,4,5])
>>> print zip(*d2)
[('Suppliers', 'Spend', 'Test Field\n', 1), ('Dell Inc', '9000', '1\n', 2), ('De
ll Computers', '9000', '2\n', 3), ('HBC Corp', '9000', '3\n', 4), ('HBC INC', '9
000', '4', 5)] 
```

或者你可以缩短它

```
print zip(*(zip(*d)+[[1,2,3,4,5]])) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T20:12:33.417

```
In [33]: lol = [['Suppliers', 'Spend', 'Test Field\n'], 
 ['Dell Inc', '9000', '1\n'], 
 ['Dell Computers', '9000', '2\n'], 
 ['HBC Corp', '9000', '3\n'], 
 ['HBC INC', '9000', '4']]

In [34]: [line.insert(0, "NEW") for line in lol]

In [35]: lol
Out[35]: 
[['NEW', 'Suppliers', 'Spend', 'Test Field\n'],
 ['NEW', 'Dell Inc', '9000', '1\n'],
 ['NEW', 'Dell Computers', '9000', '2\n'],
 ['NEW', 'HBC Corp', '9000', '3\n'],
 ['NEW', 'HBC INC', '9000', '4']] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-29T03:50:38.023

您可以压缩数组。

```
array = [[1, 2, 3, 4],
         [6, 7, 8, 9],
         [11, 12, 13, 14],
         [16, 17, 18, 19]]

array = zip(*array)
array[0:0] = [["0", "5", "10", "15"]]
array = zip(*array) 
```

# parsing - 如何解析 SPARQL 结果？

> ID：12537420
> 
> 赞同：1
> 
> 时间：2012-09-21T20:01:42.877
> 
> 标签：parsing, language-agnostic, rdf, sparql, text-parsing

我正在使用[Twinkle](http://www.ldodds.com/projects/twinkle/)（一个 SPARQL 查询工具）。我在一个 RDF 文件上做了一个 SPARQL，得到了一个如下所示的结果文件。由于它看起来不像 CSV 那样典型的文件格式，你知道解析这种格式的库吗？任何编程语言都可以。

```
---------------------------------------------------------------------
| name                                                              |
=====================================================================
| "Egypt"^^<http://www.w3.org/2001/XMLSchema#string>                |
| "Iraq"^^<http://www.w3.org/2001/XMLSchema#string>                 |
| "Jordan"^^<http://www.w3.org/2001/XMLSchema#string>               |
| "Kuwait"^^<http://www.w3.org/2001/XMLSchema#string>               |
| "Libya"^^<http://www.w3.org/2001/XMLSchema#string>                |
| "Mauritania"^^<http://www.w3.org/2001/XMLSchema#string>           |
| "Somalia"^^<http://www.w3.org/2001/XMLSchema#string>              |
| "Sudan"^^<http://www.w3.org/2001/XMLSchema#string>                |
| "Syrian Arab Republic"^^<http://www.w3.org/2001/XMLSchema#string> |
| "Tunisia"^^<http://www.w3.org/2001/XMLSchema#string>              |
| "United Arab Emirates"^^<http://www.w3.org/2001/XMLSchema#string> |
| "Yemen"^^<http://www.w3.org/2001/XMLSchema#string>                |
--------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T00:36:06.983

这不是任何标准格式，因此您必须手动为此编写解析器；它看起来像是数据库查询命令的默认 CLI 输出（我想知道哪个？）。

来自 CLI 的查询命令可能具有提供标准 SPARQL 结果格式的选项，例如 SPARQL/XML 或 SPARQL/JSON，您可以使用任何标准 RDF 库（例如[Jena](http://jena.apache.org)或[Sesame](http://openrdf.org)，如果您使用 Java）来解析它们该格式的结果。这是完成您正在尝试的事情的最佳方式。

通常，您不应以编程方式与 CLI 输出交互，而应使用数据库提供的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T14:55:58.277

看起来它可能是耶拿的输出。

ResultSetFormatter 类包含将结果格式化为所有标准格式（XML、JSON、TSV、CSV）以及此文本显示格式的方法。

> 结果集格式化程序.outputAsXML
> 
> 结果集格式化程序.outputAsJSON
> 
> 结果集格式化程序.outputAsTSV
> 
> 结果集格式化程序.outputAsCSV

文本格式不用于解析 - 更多用于简单的显示和调试。

命令行具有参数来设置结果格式，例如`--results json`

Fuseki 中的查询表单允许您选择输出格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:39:28.677

您看到的格式是 [Typed RDF literal](http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-literal)。URI [http://www.w3.org/2001/XMLSchema#string](http://www.w3.org/2001/XMLSchema#string)是一个[XSD 类型的“字符串”](http://www.w3.org/TR/xmlschema-2/#string)，表示您的值只是一个“字符串”（它可能是一个“int”等）。如果您只需要该值，您可以省略“^^”之后的 URI 或在 SPARQL 查询中使用[STR函数。](http://www.w3.org/TR/sparql11-query/#func-str)

# servicestack - ServiceStack - CSV 列标题（不是每个 DataContract - DataMember Name= )

> ID：12537421
> 
> 赞同：1
> 
> 时间：2012-09-21T20:01:46.350
> 
> 标签：servicestack

为类中的每个属性创建了一个具有 DataContract 和 DataMember Name 的模型类。XML、JSON、JSV 内容带有在 DataContract 属性中指定的名称。但 CSV 不是，它显示类中属性的实际名称。

XML、JSON、JSV 中的示例标头：

FileNumber、AccountYear、AgreementDate、CollectionDate

CSV 中的示例标题：

FILE_NO,ACCOUNT_YR,AGREEMENT_DATE,COLLECTION_DATE

我没有任何用于 CSV 的自定义格式化程序/处理程序，它们都是 ServiceStack 附带的。

是这样还是需要任何设置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:00:34.877

CSV 序列化程序当前不查看属性的Name**属性**`[DataMember]`。

虽然如果您[在 ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text/issues?direction=desc&sort=created&state=open)项目中添加问题，我们可以考虑在未来添加对此的支持。

# java - Java - 信号/槽机制

> ID：12537422
> 
> 赞同：6
> 
> 时间：2012-09-21T20:01:47.540
> 
> 标签：java, signals-slots

对于 Java 生态系统相对较新的人来说，是否有一种相当轻量级的方式来执行 Qt 和 Django 等框架对其信号/接收器系统所做的事情，其中​​组件可以说“我在做某事”，而其他组件可以处理以相当松散耦合的方式？

如果这个问题未能通过“单一客观答案”测试，我提前道歉。

编辑：要添加更多上下文，这与 Web 服务的数据库驱动应用程序层有关。某些资源在持久化时还需要保存包含额外上下文信息的审计记录。在 Django 中，我会通过信号机制来做到这一点，或者使用几个现有的库之一来做到这一点。对于 Scala 程序，我使用回调函数制作了自己的 hacky 东西，但使用一流的函数更容易。我毫不怀疑 Swing 之类的框架为这种事情提供了便利，但我（也许是不合理的）很想将这种依赖添加到目前相当普通的应用程序中（并不是说 Django 本身不是一个对香草 Python 的大量依赖！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:04:48.583

在 Java 中，至少在 UI 方面，这通常是通过[侦听器方法](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)完成的：您注册一个侦听器方法，该方法在特定事件发生时被调用。不过，它可能比 Qt 信号/槽机制松散耦合少一些……您可能会考虑的另一种方法是 java[消息服务](http://www.oracle.com/technetwork/java/jms/index.html)，它专为基于 Java EE 标准的客户端/服务器系统中的松散耦合通信而设计.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-12T07:23:40.263

如果您正在寻找提供类似于 Qt 的信号/插槽机制的 Java 库，那么您应该看看[sig4j](https://github.com/msteinbeck/sig4j)。它是线程安全的、类型安全的并支持不同类型的连接。

**注意**：我是这个库的作者 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T21:26:45.003

我同意关于事件驱动编程的其他评论/答案。

您可能对[http://eventbus.org](http://eventbus.org)感兴趣。这允许您在全球范围内广播/接收事件，而无需在每个事件生产者上显式注册侦听器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-21T16:09:31.430

在要接收信号的类中，可以定义一个 Broadcastreceiver：

```
private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        updateUI();
    }
};

@Override
public void onPause() {
    super.onPause();
    getActivity().unregisterReceiver(broadcastReceiver);
}

@Override
public void onResume() {
    super.onResume();
    getActivity().registerReceiver(broadcastReceiver, new IntentFilter(Constants.ACTION_UPDATE_PROFILE_UI)); // the constant is to identify the type of signal, it can be any string you want
} 
```

然后在要发送信号的类中，只需执行以下操作：

```
Intent signalIntent = new Intent(Constants.ACTION_UPDATE_PROFILE_UI); 
```

将您想要的数据类型添加到意图，然后像这样广播它：

```
sendBroadcast(signalIntent); 
```

您可以在此处找到示例应用程序：

[https://github.com/nickfox/Update-Android-UI-from-a-Service](https://github.com/nickfox/Update-Android-UI-from-a-Service)

# html - 与标签没有发布在标签内我有一个像这样的html结构当我提交表单时，我看不到该选择的值，但如果我将选择框放在 div 之外，它会正确发布值。有任何想法吗？尝试解析json返回的数据，如下成功： function 问问题 问问题 2012-09-21T20:02:08.423 709 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. htmlsubmit 4 1 回答 1 This answer is useful 1 那是因为您缺少选项标签的 value 属性。它应该是： <select name="variableName"><option value="serverSideValue">DisplayText</option> ....</select> 选项之间的文本仅用于向用户显示。 于 2012-09-21T20:04:22.793 回答 Related 1 c# - Spark 视图引擎/ASP.NET MVC 中的 For 循环 3 php - 如何在使用htaccess重写动态url时制作href 7 java - 为什么此代码有效？声明前赋值？ 5 c# - 如何使用控制台应用程序显示结果 2 c# - 实体框架未按预期运行 1 git - 如何在企业环境下管理 Git 中的软件版本？ 4 ios - how to change the text "no results" when search in tableview? 3 php - PHP + Actionscript AMF（通过 SabreAMF） - 如何返回 PHP 数组并映射到 actionscript 中的数组/对象 2 c++ - 当构造函数具有相同的参数类型（文件路径）时，如何从数组创建（初始化）std::tuple 2 jquery - 使用主 div ID 在 ul 中添加 li Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12537427
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, submit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:04:22.793

那是因为您缺少选项标签的 value 属性。它应该是：

```
<select name="variableName">
<option value="serverSideValue">DisplayText</option>
....
</select> 
```

选项之间的文本仅用于向用户显示。

# emacs - Emacs-helm（任何东西）中的选项卡不会自动完成当前最佳匹配

> ID：12537428
> 
> 赞同：9
> 
> 时间：2012-09-21T20:02:14.700
> 
> 标签：emacs, emacs24

在尝试自动完成一个文件（例如用 . 打开一个文件`C-x C-f`）时，Emacs-helm 会显示一个可能的候选列表。

如果我然后按`Tab`（我希望它会帮助我选择第一个/最接近的匹配项），我会在 minibuffer 中得到以下内容：

   ![在此处输入图像描述](../Images/db9faf4170292b7b7418c52428432b76.png)

看起来迷你缓冲区与转义字符混淆了，它没有选择我真正想要打开的文件（首选）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T23:28:05.680

Helm 需要从默认的 Emacs 完成中进行这种概念性的跳跃，这并不那么明显：

> 您无需按任何键即可完成。每次输入后，完成缓冲区都会刷新新结果。

这称为“增量”完成。

`tab`“增量”完成不需要正常功能。所以选项卡被反弹到`helm-select-action`，它允许您通过选择来选择替代操作。但是 中只有一个动作`read-file-name`。

不过，您看到的错误可能更清楚，我已在 github 上提交了此[问题。](https://github.com/emacs-helm/helm/issues/117)

此外，注意 Helm 将每个空格分隔的术语视为过滤正则表达式。因此，按下`space` `foo`会将当前列表过滤到名称中包含 foo 的列表。

# php - 如何仅存储从其他网站下载的 zip 文件

> ID：12537433
> 
> 赞同：2
> 
> 时间：2012-09-21T20:02:33.173
> 
> 标签：php, html, codeigniter

我正在构建一个基于 codeigniter 的应用程序。在这里，我只需要下载具有 .zip 扩展名的文件并上传到我的本地驱动器中。但要做到这一点，我得到了一个名为 get_zip 的函数，内容如下：

```
<?php
function get_file($file, $localpath, $newfilename)
{
    $err_msg = '';
    $out = fopen($localpath.$newfilename,"wb");
    if ($out == FALSE){
        print "File not opened<br>";
        exit;
    }

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_FILE, $out);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_URL, $file);

    curl_exec($ch);
    if( curl_error($ch) )
    {
        echo "<br>Error is : ".curl_error ( $ch);
    }

    curl_close($ch);
    //fclose($ch);
    return $localpath.$newfilename;

}//end function

function directory_map_echo($source_dir, $directory_depth = 0, $hidden = FALSE)
{
    if ($fp = @opendir($source_dir))
    {
        $filedata   = '';
        $new_depth  = $directory_depth - 1;
        $source_dir = rtrim($source_dir, DIRECTORY_SEPARATOR).DIRECTORY_SEPARATOR;

        while (FALSE !== ($file = readdir($fp)))
        {
            // Remove '.', '..', and hidden files [optional]
            if ( ! trim($file, '.') OR ($hidden == FALSE && $file[0] == '.'))
            {
                continue;
            }

            if (($directory_depth < 1 OR $new_depth > 0) && @is_dir($source_dir.$file))
            {
                $filedata .= 'directory:'.$file.directory_map($source_dir.$file.DIRECTORY_SEPARATOR, $new_depth, $hidden);
            }
            else
            {
                $filedata .= $file;
            }
        }

        closedir($fp);
        return $filedata;
    }

    return FALSE;
} 
```

但问题是我如何限制只有 .zip 文件将被下载并上传到我的本地驱动器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:11:44.523

由于文件名只是一个字符串，您可以使用/修改此[SO 问题](https://stackoverflow.com/questions/321158/checking-for-file-extensions-in-php-with-regular-expressions)的答案：

```
$rex = "/^.*\.(zip)$/i";
preg_match($rex, $file) 
```

编辑：

对于错误代码，请尝试：

```
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
 if($httpCode == 404){ //do some error handling } 
```

# regex - 用于数据验证的其他数据类型的正则表达式等效项

> ID：12537435
> 
> 赞同：1
> 
> 时间：2012-09-21T20:02:42.953
> 
> 标签：regex, validation, data-quality

我正在为数据库创建一个数据质量框架，该框架查看每种数据类型的单个单元格，并查看它们的值是否可以接受。

对于数据类型字符串：我只是使用正则表达式来定义什么是有效的

对于其他数据类型（Integer、Timestamp、Boolean、TimeDelta、Float、...）：我没有任何标准的方法来记录什么是有效的

其他数据类型是否有等效于正则表达式的方法？像 IntegerRegEx 的？例如，假设我有一个字段必须包含 0 到 65535 之间的数字，或者我有一个只能包含奇数的字段......

如果这个 IntegerRegEx 也是一个字符串（就像普通的 RegEx 一样），那就太好了，这样我就可以将 IntRegEx 和 StringRegEx 存储在同一个表中。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:35:13.180

我猜这取决于你用什么语言编程，比如 PHP，你可以存储一个数学表达式（一个字符串），例如`$x >= 0 && $x <= 65535`或`$x % 2 == 1`.

使用正则表达式，你会写这样的东西，对吧？

```
if (!preg_match($regexFromDb, $fieldValueFromDb)) {
    // validation fails
} 
```

所以对于数学表达式，你会做同样的事情，例如

```
$x = $fieldValueFromDb;
if (!eval("return $mathExprFromDb")) {
    // validation fails
} 
```

这只是示例代码。当然，您应该保护您的代码免受运行任意存储的可执行代码的危险，以及防止乱码表达式使您的脚本崩溃。

我认为这是您将要获得的最接近的结果，因为您寻求的“IntegerRegEx”已经有了一个名字......数学。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T07:55:55.923

如果你想要一个字符串和类似正则表达式的东西，你可以使用正则表达式。只需有一种将每种类型转换为字符串的标准方法，然后针对字符串形式编写正则表达式。对某些人来说可能很尴尬，对另一些人来说容易出错，但它很简单，不涉及创建自己的表达式语言或直接从数据库加载代码并对其进行评估。

# sql - 确定单个表中数据之间的连接

> ID：12537436
> 
> 赞同：2
> 
> 时间：2012-09-21T20:02:44.000
> 
> 标签：sql, analysis

我是在遗留系统上进行数据分析的 BA / 程序员类型。我一直在自学 SQL 来提供帮助，但我似乎遇到了一个比我能力更大的问题。

我有两个表（为简单起见进行了概括）：

**表对象**

```
Object_PK 
```

**表组件**

```
Component_PK
Object_FK
Component_Type 
```

Component_Type_Code 中有 100 多个不同的值。鉴于任何对象都可以有 N 个组件，我如何查看哪些 Component_Type(s) 与其他 Component_Type(s) 一起出现？

例如，以下查询告诉我哪些 component_types 与 component_type 'Component_type_1' 一起出现：

```
select component_type_code, count(*)
from components
where object_fk in (
        select object_fk
        from components
        where component_type_code = 'component_type_1'
)
group by component_type_code 
```

我想查询以显示所有连接

我为格式化道歉。任何帮助表示赞赏。我看过多维数据集和汇总，但不知道如何应用于这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:41:21.767

谢谢你的好答案。我还将这个问题通过电子邮件发送给了几个 DBA 朋友，其中一位回复了以下 SQL：

```
 Select a.Component_Type, b.Component_Type, count(1)
 From Components a, Components b
 Where b.Object_FK = a.Object_FK
 And b.Component_Type > a.Component_Type
 Group By a.Component_Type, b.Component_Type 
```

此语句返回关联的链接及其计数。它实际上非常酷的分析，我希望我不必概括表格和结果。感谢大家 - 我希望这个 SQL 对将来的某人有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:20:58.813

因此，如果我理解正确，您希望查看在每个组件中多次出现的每个 Component_Type。所以;

```
SELECT component_type_code, COUNT(*)
FROM components
WHERE object_fk IN(
        SELECT object_fk
        FROM components
        GROUP BY component_type_code
        HAVING COUNT(*) > 1
) 
```

**编辑**

考虑到您的需求的复杂性，很难将所有这些都整合到一个声明中。

因此，您拥有适用于一个 component_type 的代码，因此我会将这些数据插入到一个临时表中，然后为每个其他 component_type 重复。最后;

选择 * 从 #TempComponents

我意识到这并不理想，毫无疑问您可能想要添加新的 component_type，但它会起作用。

# vba - OpenFileDialog VBA (Powerpoint) 初始目录

> ID：12537439
> 
> 赞同：3
> 
> 时间：2012-09-21T20:03:01.520
> 
> 标签：改成 vba, vba, powerpoint

请帮助我`OpenFileDialog`展示我的 PowerPoint 项目目录。

我试过 `.InitialDirectory = "C:\\"` 了，但它不起作用。我可以把它[改成 vba](/questions/tagged/vba "显示标记为“vba”的问题")吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T20:35:55.950

这几乎是从 Powerpoint VBA 帮助中复制的。它使用`FileDialog`而不是`OpenFileDialog`（我很难找到与 PowerPoint 相关的内容）。它将 设置`InitialFileName`为`C:\`以便它会在该位置提示。只需将其放在一个模块中，它应该很容易根据您的特定需求进行修改：

```
Sub fileDialogExample()
    'Declare a variable as a FileDialog object.
    Dim fd As FileDialog
    'Declare a variable for the directory path.
    Dim directory As String
    'Set the directory path
    directory = "C:\"
    'Create a FileDialog object as a File Picker dialog box.
    Set fd = Application.FileDialog(msoFileDialogFilePicker)

    'Declare a variable to contain the path
    'of each selected item. Even though the path is aString,
    'the variable must be a Variant because For Each...Next
    'routines only work with Variants and Objects.
    Dim vrtSelectedItem As Variant

    'Use a With...End With block to reference the FileDialog object.
    With fd
        'Change the initial directory\filename
        .InitialFileName = directory
        'Use the Show method to display the File Picker dialog box and return the user's action.
        'The user pressed the button.
        If .Show = -1 Then

            'Step through each string in the FileDialogSelectedItems collection.
            For Each vrtSelectedItem In .SelectedItems

                'vrtSelectedItem is aString that contains the path of each selected item.
                'You can use any file I/O functions that you want to work with this path.
                'This example displays the path in a message box.
                MsgBox "The path is: " & vrtSelectedItem

            Next vrtSelectedItem
        'The user pressed Cancel.
        Else
        End If
    End With

    'Set the object variable to Nothing.
    Set fd = Nothing

End Sub 
```

# usb - android sdk 没有显示我的手机连接到 USB 端口

> ID：12537440
> 
> 赞同：1
> 
> 时间：2012-09-21T20:03:01.830
> 
> 标签：usb, adb

我是安卓新手。我在 Gingerbread 上使用 Micromax A87（印度），该公司未在 Google 网站上的 Android 制造商中列出。我的手机的 USB 调试模式已打开。我试图用 Eclipse 运行 hello world 程序，但它是在 AVD 中启动的。

我的问题是我的手机没有通过 adb devices 命令显示在列表中。但是设备管理器（win7）显示android复合ADB接口，我也可以用我的手机作为磁盘。

告诉我问题出在哪里？如果我尝试用手机安装提供的驱动程序，那么 PC 会说我已经有更好的驱动程序，同样的情况是用于在线搜索。我尝试重新启动 adb。

请帮我设置android工作空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:30:42.443

我已经为同一部手机解决了这个问题，请执行以下操作...

1.  转到 C:\Users\system name.android
2.  制作 adb_usb.ini 的副本作为备份
3.  打开 adb_usb.ini
4.  将此文件的内容替换为以下内容：

```
0x17EF
0x1EBF
0x05C6
0x19D2
0x9015
0x1C9E
0x0BB4
```

# c# - System.Web.Mvc.ModelState 不包含“IsValid”的定义

> ID：12537443
> 
> 赞同：3
> 
> 时间：2012-09-21T20:03:13.143
> 
> 标签：c#, .net, asp.net-mvc-3

我正在尝试将我的登录方法从控制器操作移动到服务类。在编译时，我被告知`System.Web.Mvc.ModelState does not contain a definition for 'IsValid'` 我是否缺少 using 语句？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T20:44:27.257

`ModelState`既是 Controller 基类上的一个属性的名称，也是一个类的名称。

您移动的代码正在使用该属性，错误来自尝试使用该类。

# asp.net - ApplicationPoolIdentity 权限和 UserPrincipal

> ID：12537453
> 
> 赞同：3
> 
> 时间：2012-09-21T20:03:42.643
> 
> 标签：asp.net, iis-7, application-pool, directoryservices

在 ASP.NET 4.0 中执行 AD 搜索时收到 COM 异常：发生操作错误 (0x80072020)

线程[Active Directory COM 异常 - 发生操作错误 (0x80072020)](https://stackoverflow.com/questions/7285503/active-directory-com-exception-an-operations-error-occured-0x80072020) 为我指明了正确的方向 - 所描述的问题与权限相关。

作为一种解决方法，我将应用程序池标识从 ApplicationPoolIdentity 切换到 NetworkService，并且能够正确执行查询。令人困惑的部分是，在同一域上的另一个 IIS7 网络服务器上，我能够将应用程序池标识保留为 ApplicationPoolIdentity。

使用 ApplicationPoolIdentity 使这个查询工作我缺少什么吗？

FWIW，代码相当简单：

```
PrincipalContext context = new PrincipalContext(ContextType.Domain, theDomain);
UserPrincipal p_up = new UserPrincipal(context);
p_up.GivenName = "John"; //error occurred here
p_up.Surname = "Doe";
PrincipalSearcher ps = new PrincipalSearcher(p_up);
PrincipalSearchResult<Principal> psr = ps.FindAll(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T09:08:26.103

也许它可以取决于计算机的域 LDAP 访问配置。但是 NetworkService 和 ApplicationPoolIdentity 应该在计算机帐户下访问网络......

# android - 频率提问应用程序

> ID：12537454
> 
> 赞同：0
> 
> 时间：2012-09-21T20:03:42.740
> 
> 标签：android

我正在尝试创建一个简单的频率提问应用程序。第一个活动应该显示字符串数组“问题”中所有问题的列表视图。第二个活动应该在单击问题时打开，并显示字符串数组“答案”中问题的答案。（我遵循了关于[在活动之间传递数据的](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)指南。）

该程序编译并且在eclipse中没有显示任何错误，但是当我尝试运行它时，我不断收到“程序意外关闭”错误。不确定是什么问题。

提问活动：

```
public class FreqActivity extends ListActivity {

    String[] ans;
    String[] questions;
    View tempView = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ans = getResources().getStringArray(R.array.answers);
        questions = getResources().getStringArray(R.array.questions);

        setListAdapter(ArrayAdapter.createFromResource(getApplicationContext(),
               R.array.questions, R.layout.main));

    }

    public void onListItemClick(ListView l, View v, int position, long id) {
        //...

 }
} 
```

日志错误：

```
09-21 20:21:31.722: D/dalvikvm(333): GC_EXTERNAL_ALLOC freed 51K, 53% free 2564K/5379K, external 2108K/2137K, paused 66ms
09-21 20:21:31.792: E/ArrayAdapter(333): You must supply a resource ID for a TextView
09-21 20:21:31.792: D/AndroidRuntime(333): Shutting down VM
09-21 20:21:31.792: W/dalvikvm(333): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-21 20:21:31.913: E/AndroidRuntime(333): FATAL EXCEPTION: main
09-21 20:21:31.913: E/AndroidRuntime(333): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.ListView.fillDown(ListView.java:670)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.ListView.fillFromTop(ListView.java:727)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.ListView.layoutChildren(ListView.java:1598)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.view.View.layout(View.java:7175)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.view.View.layout(View.java:7175)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.view.View.layout(View.java:7175)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.view.View.layout(View.java:7175)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-21 20:21:31.913: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
09-21 20:21:31.913: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
09-21 20:21:31.913: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-21 20:21:31.913: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-21 20:21:31.913: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
09-21 20:21:31.913: E/AndroidRuntime(333): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
09-21 20:21:31.913: E/AndroidRuntime(333):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
09-21 20:21:31.913: E/AndroidRuntime(333):  ... 26 more
09-21 20:23:04.262: I/Process(333): Sending signal. PID: 333 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:48:21.593

线

```
setListAdapter(ArrayAdapter.createFromResource(getApplicationContext(),
               R.array.questions, R.layout.main)); 
```

应该

```
setListAdapter(ArrayAdapter.createFromResource(getApplicationContext(),
               R.array.questions, android.R.layout.simple_spinner_item)); 
```

[参考](http://developer.android.com/reference/android/widget/ArrayAdapter.html#createFromResource%28android.content.Context,%20int,%20int%29)

# c++ - 如何将文本附加到文本框？

> ID：12537456
> 
> 赞同：2
> 
> 时间：2012-09-21T20:03:56.527
> 
> 标签：c++, c, winapi, textbox

我认为下面的代码应该是不言自明的。

```
#include <Windows.h>

static HWND textBoxInput;
static HWND button;
static HWND textBoxOutput;

LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);

int CALLBACK WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR cmdLine,int nCmdShow)
{
    HWND hMainWindow;
    WNDCLASS wc = {};
    wc.lpfnWndProc = WindowProc;
    wc.lpszClassName = "Main's window class";
    wc.hInstance = hInstance;
    RegisterClass(&wc);

    hMainWindow = CreateWindow(wc.lpszClassName,"Append text main window",WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,CW_USEDEFAULT,500,400,NULL,NULL,hInstance,NULL);

    error=GetLastError();

    if(hMainWindow == NULL) return 1;

    textBoxInput = CreateWindowEx(WS_EX_CLIENTEDGE, "Edit", NULL,WS_CHILD | WS_VISIBLE | ES_AUTOHSCROLL, 10, 10, 300, 21, hMainWindow, NULL, NULL, NULL);

    button = CreateWindowEx(WS_EX_CLIENTEDGE,"Button","Append",WS_CHILD | WS_VISIBLE | ES_CENTER, 10, 41,75,30,hMainWindow,NULL,NULL,NULL); 

    textBoxOutput = CreateWindowEx(WS_EX_CLIENTEDGE,"Edit",TEXT("->This content is untouchable and unreadable!<-"),WS_CHILD | WS_VISIBLE | WS_VSCROLL | ES_AUTOVSCROLL |  ES_MULTILINE | ES_READONLY ,10,81,500,90,hMainWindow,NULL,NULL,NULL);

    ShowWindow(hMainWindow,SW_SHOW);

    MSG msg = { };

    while (GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return 0;
}

LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch(uMsg)
    {
        case WM_COMMAND:
        if((HWND)lParam == button)
        {               
            TCHAR* buffer = new TCHAR[150];

            GetWindowText(textBoxInput,buffer,150);

            SetWindowText(textBoxOutput,buffer);
            //AppendWindowText(textBoxOutput,buffer,150) - I haven't found such function;           
                    delete [] buffer;       
        }
        break;

        case WM_PAINT:          
            {
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hwnd, &ps);
            HBRUSH pedzel;

            pedzel = CreateSolidBrush(RGB(10,250,10));

            FillRect(hdc, &ps.rcPaint, pedzel);

            EndPaint(hwnd, &ps);
            return 0;
            }
        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;
    }
    return DefWindowProc(hwnd, uMsg, wParam, lParam);
} 
```

简而言之：该程序创建两个文本框和一个按钮，该按钮启动将内容从第一个复制到第二个的过程。该`SetWindowText`功能会导致清洁输出框，这显然是不希望的。

**Jerry Cofinn 回答后更新**

```
SendMessage(textBoxOutput,EM_SETSEL,-1,-1); //no difference between passing 0 or -1
SendMessage(textBoxOutput,EM_REPLACESEL,TRUE,(LPARAM)buffer); 
```

令人惊讶的是，它在文本**前面。**我已经阅读[了有关 EM_SETSEL 的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761661%28v=vs.85%29.aspx)，但我仍然想知道为什么它不将原始输入放在最后。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T20:56:35.773

对于文本框（编辑控件），插入符号基本上是在同一位置开始和结束的“选择”。

使用 SetSel 创建一个在当前控件中的最后一个字符之后开始和结束的选择，然后使用 ReplaceSel 用新文本替换该空选择。

由于您使用的是原始 Win32 API，`SetSel`因此将

```
SendMessage(your_control, EM_SETSEL,-1, -1); 
```

...并且`ReplaceSel`将是：

```
SendMessage(your_control, EM_REPLACESEL, TRUE, string_to_add); 
```

糟糕——正如问题后记中所述，这不能按原样工作。您需要以`WM_GETTEXTLENGTH`( 或`GetWindowTextLength`) 开头来获取文本的长度，然后将所选内容设置为结尾（即开头和结尾都等于您刚刚获得的长度），然后替换所选内容。我很抱歉——在处理类似我有一段时间没有做过的事情时，我可能应该知道最好不要从记忆中走出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T20:13:41.387

1.  用于`GetWindowTextLength`查找其中文本的长度。
2.  创建一个具有该长度的动态字符数组 ( `std::vector<TCHAR>`)，加上附加文本的长度，再加上 null。
3.  用于`GetWindowText`在其中存储当前文本。
4.  添加附加文本（使用类似的内容`_tcscat`）。
5.  用于`SetWindowText`将所有内容放入文本框中。

总之：

```
int len = GetWindowTextLength(textbox);
std::vector<TCHAR> temp(len + lengthOfAppendedText + 1);

GetWindowText(textbox, temp.data(), temp.size());
_tcscat(temp.data(), appendedText);
SetWindowText(textbox, temp.data()); 
```

如果您不使用 C++11，请替换`temp.data()`为`&temp[0]`. 如果它必须与 C 兼容，它会回到`malloc`and`free`而不是`std::vector`，但考虑到没有调整大小，这并没有太多额外的工作。

# pdf - 用户保存时如何获取可填写的 PDF 以提示输入必填字段？

> ID：12537457
> 
> 赞同：3
> 
> 时间：2012-09-21T20:03:56.370
> 
> 标签：pdf, acrobat, required-field

我使用 Acrobat 10 创建了一个可填写的 PDF 表单。我看到您可以在哪里设置需要的表单字段，但所做的只是用红色勾勒出这些字段。

如何在用户点击保存时提示用户在必填字段中输入数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:07:36.837

如果你想实现这一点，你需要使用 Adob​​e-JavaScript。

阅读 Adob​​e 文档中的此页面以获取更多详细信息：

[强制执行必填字段](http://cookbooks.adobe.com/post_Enforcing_Required_Fields-16435.html)

在该页面上，您必须包含在 PDF 文件中的代码如下所示：

```
f = getField(event.target.name)
if (f.value.length == 0)
{    
   f.setFocus()    
   //Optional Message - Comment out the next line to remove
   app.alert("This field is required. Please enter a value.")
} 
```

可以在此处找到有关弹出警报的更多详细信息： [https ://acrobatusers.com/tutorials/popup_windows_part1](https://acrobatusers.com/tutorials/popup_windows_part1)

# jquery - 如何在 jQuery 的 ajaxError 中获取 JSON 对象？

> ID：12537458
> 
> 赞同：0
> 
> 时间：2012-09-21T20:03:57.197
> 
> 标签：jquery, ajax, error-handling

我想使用 jQuery ajaxError() 处理程序创建一个全局 ajax 错误处理程序，例如：

```
$(document).ajaxError(function(e, xhr, settings, exception) {
    alert('error in: ' + settings.url + ' \\n'+'error:\\n' + exception);
}); 
```

来源：[http ://api.jquery.com/ajaxError/](http://api.jquery.com/ajaxError/)

但是我想通过让服务器返回一个 JSON 对象而不仅仅是文本来对此进行扩展，然后我的错误处理程序可以使用该对象的属性来决定要做什么并制作一个漂亮的错误对话框。但是我该怎么做呢？

我现在让服务器返回一个有效的 JSON 格式的字符串，但我习惯了 jQuery 函数有一个自动为我解析的“数据”参数，我如何使用没有这样的“数据”的 ajaxError 函数来做到这一点范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:14:47.267

尝试查看 xhr 对象的 responseText `xhr.responseText`：。您可能需要对此进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T14:18:00.177

您可以在设置 ajax 请求时将自己的自定义属性添加到设置对象。调用 ajaxError 函数时，只需检查传入的设置对象以获取您添加的自定义属性并根据需要使用它们。

# java - SWT ComboBoxCellEditor 可编辑

> ID：12537461
> 
> 赞同：0
> 
> 时间：2012-09-21T20:04:09.070
> 
> 标签：java, swt, jface

我有一个[TableViewer](http://www.vogella.com/articles/EclipseJFaceTable/article.html)，其中一列中的值通常应该来自动态列表。我目前正在使用[org.eclipse.jface.viewers.ComboBoxCellEditor](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/ComboBoxViewerCellEditor.html)，它实际上是一个 Select-List：它存储所选值的索引。如果我更改基础列表（调用`setItems(String[])`，保留先前选择的值很笨拙......（特别是如果它不再包含在列表中！）我希望实际上是一个存储的单元格编辑器，而不是来自列表，但字符串（也许让用户自由编辑，也许不是），列表只是在输入时用作建议 - 就像“[组合框](http://en.wikipedia.org/wiki/Combo_box)”应该在过去的好日子里工作......这是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:15:47.093

我建议您使用 CellEditor 来模仿您正在寻找的行为。扩展`ComboBoxViewerCellEditor`和覆盖`doGetValue()`方法。在 Combo 控件上添加修改侦听器，并将过滤器（根据输入文本过滤列表项）添加到组合查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T23:12:25.293

你应该看看：

*   [org.eclipse.wst.xml.ui.internal.properties.StringComboBoxCellEditor](http://org.eclipse.wst.xml.ui.internal.properties.StringComboBoxCellEditor)这个类来自WTP项目；它是一个扩展的 ComboBoxCellEditor，它选择并返回字符串。
*   [codemirror.eclipse.ui.xquery.viewers.StringComboBoxCellEditor](https://github.com/angelozerr/CodeMirror-Eclipse/blob/master/mode/xquery/codemirror.eclipse.ui.xquery/src/codemirror/eclipse/ui/xquery/viewers/StringComboBoxCellEditor.java)是 WTP StringComboBoxCellEditor 的复制/粘贴；它添加了在未找到该项目时将其添加到组合中的功能。

# jquery - pubnub: DOM 元素的值改变，但视觉没有改变

> ID：12537463
> 
> 赞同：1
> 
> 时间：2012-09-21T20:04:21.730
> 
> 标签：jquery, html, pubnub

我正在 Android 手机上创建一个测试应用程序，它通过 ajax 从 Rails 服务器获取 json 数据。我已经在rails和带有PUBNUB的android手机之间设置了实时推送功能。rails 服务器是发布者，android 手机是订阅者。

问题：手机获取json格式的实时数据。但是，问题是我做不到`multiple DOM manipulation INSIDE THE PUBNUB success callback`。这看起来绝对很奇怪。

**当有实时更新时应该发生什么。**

背景：

1.  我有一个标题图像、一个 ui 栏、内容区域和一个页脚。
2.  在 UI-Bar 中有一个通知图像。如果有任何新的报价，那么它应该亮成绿色，否则它会保持红色。

**应该发生什么**

因此，有任何实时推送的新报价，新报价应预先添加到列表中，并且通知图像应点亮为绿色。

**实际发生了什么**

`Scenario 1`

1.  内容为空时，第一次推送，item正常推送，同时通知图片正常变为绿灯。我使用从订阅收到的json数据，并在html标签中使用，例如$('#some_id').html('some html tags with data received from subscription');

`Scenario 2`

说，您确认了通知，它又变回红色。现在，新场景是：我已经推送了一个项目并且通知图像已经被确认（红灯）。

1.  现在，当第二个项目被推送时，该项目被正常推送，但通知图像没有变成绿灯。如果您按屏幕区域的任何位置，它只会变成绿灯。

`Scenario 3`

使用与 num 2 相同的场景，即列表中的一个报价和通知已被确认。

1.  用户只有在下一次实时推送 4 次后才能看到绿灯，即列表中总共有 5 次。第五个触摸电话中的页脚。之后实时更新功能正常；将项目添加到列表中，并且通知图像在每次推送时变为绿色（如果之前为红色）。

`Scenario 4`

1.  如果您不尝试将任何内容推送到列表中，而仅测试通知图像在每次成功推送时是否正常运行，那么它绝对可以正常工作。

`TEST`

在场景 2 中，我使用 alert 语句来查看 DOM 操作前后的通知图像。警报语句显示值的变化，但`the visual does not change`.

```
 alert($('#home_notification').html());
 $('#home_notification').html('<img alt="Greenlight" height="31px" src="css/images/greenlight.png" class="notification_img" width="35px">'); 
 alert($('#home_notification').html()); 
```

下面是来自 html 页面的我的脚本标签片段。

```
$(document).ready(function(){
   PUBNUB.subscribe({
    channel    : "rails",      // CONNECT TO THIS CHANNEL.
    restore    : false,              // STAY CONNECTED, EVEN WHEN BROWSER IS CLOSED
                                     // OR WHEN PAGE CHANGES.
    callback   : function(message) { // RECEIVED A MESSAGE.
            var month=new Array();
            month[0]="Jan";
            month[1]="Feb";
            month[2]="Mar";
            month[3]="Apr";
            month[4]="May";
            month[5]="Jun";
            month[6]="Jul";
            month[7]="Aug";
            month[8]="Sep";
            month[9]="Oct";
            month[10]="Nov";
            month[11]="Dec";

            //***************This is the offer that will get prepended in the list************************* 
            $('#offers_table').prepend('<tbody><tr class="offer_list_unread"><td class="spacer"><img alt="Spacer" src="css/images/spacer.png"></td><td class="image"><img height="60px" src="css/images/' + message['code'] + 'o.png" width="60px"></td><td class="description"><h3>'+ message['description']+ '</h3><p>Start Date: '+ month[(new Date(message["startdate"])).getMonth()] + ' ' + (new Date(message["startdate"])).getDate() +', '+ (new Date(message["startdate"])).getFullYear()  +'</p><p>End Date: '+ month[(new Date(message["enddate"])).getMonth()] + ' ' + (new Date(message["enddate"])).getDate() +', '+ (new Date(message["enddate"])).getFullYear() +'</p></td><td class="mark_as_read"><img alt="Unread1" class="unread" src="css/images/unread1.png"><p class="read" style="display:none">offers/'+message['id']+'</p></td></tr></tbody>');   

            //**************************This is where I have am having issues****************************
            //**************************THIS IS NOT SHOWN IN THE VISUALS AFTER SECOND REAL TIME PUSH********************************
            $('#home_notification').html('<img alt="Greenlight" height="31px" src="css/images/greenlight.png" class="notification_img" width="35px">');
        }

   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:14:49.250

我认为这不是 PubNub 的问题，而是 Android 的问题。几天来我一直在为同样的问题苦苦挣扎，但还没有找到解决方案。症状是相同的：在回调（任何回调，来自异步 AJAX 请求甚至来自 setTimeout）中，我可以更新 JavaScript 对象（并查看它），但对 DOM 的任何更新都将被忽略。有趣的是，如果我使用同步 AJAX 请求，那么 DOM 更新会在 jQuery AJAX 回调中执行。更有趣的是，如果我在同步 AJAX 回调中使用 setTimeout（仅用于测试），那么 DOM 更新不会在 setTimeout 回调中执行。因此，出于某种原因，普通的 Android 浏览器不喜欢在任何异步回调中更新 DOM。如果执行是顺序的（与同步 AJAX 一样），则 DOM 会更新。我正在使用 Android 4.0 在三星 G2 上进行测试。相同的代码在任何桌面浏览器和iOS（使用PhoneGap）上都可以正常工作，但在Android（使用PhoneGap）上不起作用。

听听其他人对此的看法会很有趣。

# php - 如何在 DIV 中正确放置一些内容？

> ID：12537466
> 
> 赞同：0
> 
> 时间：2012-09-21T20:04:29.130
> 
> 标签：php, html, css

我想显示一个 div 内部的内容，更准确地说是在黑盒子内部，但它们是一个在另一个之上。我正在尝试，但他们一直在彼此之上，正如您在此处看到的那样：[www.rbsilva.com/store](http://www.rbsilva.com/store) 我想像这样工作：[www.rbsilva.com/works](http://www.rbsilva.com/works)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:20:22.433

你说的是哪个黑匣子？

如果您正在谈论在图像上获取文本，则可以应用以下 css：

```
.portfolio-image-holder{
    position:relative;
}
.portfolio-info{
    position:absolute;
    margin-top:-250px;
} 
```

# c# - 订购列表但仍然可以访问索引和字段

> ID：12537470
> 
> 赞同：2
> 
> 时间：2012-09-21T20:04:41.680
> 
> 标签：c#, .net

我正在尝试按某个字段对对象列表进行分组。

稍后，我需要按如下方式使用此列表：

```
for(i=0; i< list.Count; i++)
{
   if(i == 0)
    continue;

   if (list[i].property != list[i-1].property)
   dosomething;
} 
```

我需要做一个 for 循环，这样我就可以说“如果在这个之前的项目的属性不同......

当我尝试订购列表时，问题就来了。如果我使用 list.GroupBy，我将无法访问列表项的成员。如果我使用 list.OrderBy，我必须将其设置为 ienumerable，因此不能使用 for 循环，因为 ienumerables 不适用于列表索引。

有没有办法在 foreach 循环中实现这个功能（不引用索引）？如果没有，是否有另一种方式来订购不需要将其设置为可枚举的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:08:34.010

四个选项：

*   使用`OrderBy`and then`ToList`获取排序列表。然后您可以使用现有代码，尽管我建议从 1 开始循环，而不是从 0 开始并在第一次迭代中立即中断。
*   使用`OrderBy`然后`Zip`：

    ```
    var ordered = input.OrderBy(...);
    var zipped = ordered.Zip(ordered.Skip(1),
                             (Previous, Current) => new { Previous, Current });

    foreach (var pair in zipped)
    {
        if (pair.Previous.Property == pair.Current.Property)
        {
            ... Whatever you want to do
        }
    } 
    ```

    请注意，不幸的是，这将对输入进行两次排序。没有避免这种情况的内置方法（无需调用`ToList`或其他）。诚然，编写“自压缩”扩展方法不会太难。

*   使用`OrderBy`并保留“先前的属性”：

    ```
    var ordered = input.OrderBy(...);
    // This is like using foreach, but with a simple way to get the
    // first item
    using (var iterator = ordered.GetEnumerator())
    {
        if (!iterator.MoveNext())
        {
            return; // Or whatever. No items!
        }
        var previousProperty = iterator.Current.Property;
        while (iterator.MoveNext())
        {
            var currentProperty = iterator.Current.Property;
            if (previousProperty == currentProperty)
            {
                ... Whatever you want to do
            }
            previousProperty = currentProperty;
        }
    } 
    ```

*   使用`List<T>.Sort`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:49:46.410

这只是 Skeet 中一个选项的重复。把支票给他。

ForEach 不需要索引。无法使用 ForEach 从列表中删除项目。

```
class Program
{
    static void Main(string[] args)
    {
        List<SortMe> SortMes = new List<SortMe>();

        SortMes.Add(new SortMe("aaa"));
        SortMes.Add(new SortMe("bbb"));
        SortMes.Add(new SortMe("ccc"));
        SortMes.Add(new SortMe("aaa"));
        SortMes.Add(new SortMe("bbb"));
        SortMes.Add(new SortMe("ccc"));
        SortMes.Add(new SortMe("ccc"));
        SortMes.Add(new SortMe("bbb"));
        SortMes.Add(new SortMe("aaa"));
        SortMes.Add(new SortMe("ccc"));
        SortMes.Add(new SortMe("bbb"));
        SortMes.Add(new SortMe("aaa"));

        SortMe SortMeLast = null;

        foreach (SortMe SortMeCurrent in SortMes.OrderBy(x => x.Name))
        {
            Console.WriteLine("   Current     " + SortMeCurrent.Name);
            if (SortMeLast != null)
            {
                if (SortMeCurrent.Name != SortMeLast.Name)
                {
                    // do something
                    Console.WriteLine("Do Something");
                }
            }
            SortMeLast = SortMeCurrent;
        }
        Console.ReadLine();
    }
}
public class SortMe
{
    public string Name { get; set; }
    public SortMe(string name) { Name = name; } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:08:38.593

`myitem previous`您可以在循环之前定义一个（其中`myitem`列表中的类型相同），然后在每个列表的末尾，设置`previous`为当前项目。如果你这样做，请确保检查`previous`null 因为它第一次没有值。

# javascript - 为什么我的 JSON 循环设置值？

> ID：12537473
> 
> 赞同：0
> 
> 时间：2012-09-21T20:04:49.880
> 
> 标签：javascript, jquery, json

真的很抱歉整天发帖。我是这个编码的新手。基本上，在这里有很多了不起的人的帮助下，我第一次设置了一个 JSON 的东西。我正在尝试根据输入评估列表。这是示例数据：

```
 {
    "

films": [{
        "label": "34",
        "value": "34",
        "currently_streaming": "1",
        "full_streaming_url": "http://www.url.com",
        "url": "http://www.url.com"},
    {
        "label": "A Different Color",
        "value": "A Different Color",
        "currently_streaming": "1",
        "full_streaming_url": "http://www.url.php",
        "url": "http://www.url.com"}]
}​ 
```

这是我的代码。我终于明白了，（谢谢大家！）选择我想要的价值部分。然后我尝试在 if/else 语句中比较它，它正在做奇怪的事情。首先，它似乎提取了比文件中实际存在的值更多的值，但我对此并不完全确定。然而，其次，它似乎不是比较值，而是将我正在迭代的值设置为另一个值！我不明白！

```
 var test = "34x25x36";
 $(document).ready(function () {
     $.ajax({
         dataType: 'json',
         beforeSend: function () {
             console.log('Before Ajax Request Starts !!');
         },
         success: function (data) {
             console.log(data);
             alert("Edddddddd");
             $.each(data.films, function (i, object) {
                 $.each(object, function (property, value) {
                     //alert(property + "=" + value);
                     for (i = 0; i < data.films.length; i++) {
                         var theFilm = (data.films[i].value);
                         if (theFilm == test) {
                             document.write(theFilm);
                             document.write(test + "<br>");
                         } else {}
                     }
                 });
             });
         },
         error: function (jqXHR, textStatus, errorThrown) {
             alert("Error occurred: " + errorThrown);
         },
         beforeSend: function () {
             console.log('Ajax Request Complete  !!');
         },
         url: 'test.php'
     });
 }); 
```

**编辑**

当我在该`else{ }`部分中确实有某些内容时，它似乎多次运行整个内容，正确判断何时不匹配，但随后它似乎再次运行，运行一个匹配的文本，然后运行一堆“不匹配” “ 文本。当该部分中没有任何内容时`else{}`，它似乎设置了 的值`theFilm = test`。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:23:01.767

你的成功功能搞砸了..看起来你对使用许多循环感到困惑..

也不要将其写入文档..使用console.log或alert进行调试..

试试这个方法

```
success: function(data) {
    console.log(data);
    alert("Edddddddd");
    var keys = ["label", "value", "currently_streaming", "full_streaming_url", "url"]
    for (i = 0; i < data.films.length; i++) {
        for (j = 0; j < keys.length; j++) {
            // alert('Key - ' + keys[j] + ' :: Value - ' + data.films[i][keys[j]]);
            var theFilm = data.films[i][keys[j]];
            if (theFilm == test) {
                alert('TheFilm Variable is : ' + theFilm);
                alert('Test Variable is : ' + test );
            }
            else {
               alert('No Match Found !!');
            }
        }
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:31:29.613

您正在循环播放所有电影，然后在其中循环播放每部电影的所有属性。然后在里面你再次循环播放所有电影。这是很多无缘无故的循环。例如，如果您有 100 部电影，每部电影有 5 个属性，您将循环浏览所有电影 500 次，从而写出您找到 500 次的电影。

您只需要一个循环来循环播放电影并找到一个：

```
$.each(data.films, function(i, object) {
  var theFilm = object.value;
  if (theFilm == test) {
    document.write(theFilm);
  }
}); 
```

演示：http: [//jsfiddle.net/baJtf/](http://jsfiddle.net/baJtf/)

您还可以使用该[`grep`方法](http://api.jquery.com/jQuery.grep/)在数组中查找项目：

```
var film = $.grep(data.films, function(f){
  return f.value == test;
});
if (film.length == 1) {
  document.write(film[0].value);
} 
```

演示：http: [//jsfiddle.net/baJtf/1/](http://jsfiddle.net/baJtf/1/)

# less - 使用 LESS mixin 添加供应商前缀

> ID：12537474
> 
> 赞同：3
> 
> 时间：2012-09-21T20:04:50.763
> 
> 标签：less, mixins, less-mixins

我收到此混合的语法错误：

```
.vendors(@statement){
  @statement;
  -moz-@statement;
  -webkit-@statement;
} 
```

有什么方法可以做到这一点，或者 mixin 变量必须在 a 的右侧`:`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-04T15:50:07.990

从 Less v2 开始，您可以使用[autoprefix 插件](https://github.com/less/less-plugin-autoprefix)为您的属性添加前缀，这似乎是一个更好的选择。autoprefix 插件利用[autoprefixer 后处理器](https://github.com/ai/autoprefixer)添加浏览器前缀。对于客户端编译（在浏览器中），您可以使用[-prefixfree](https://github.com/LeaVerou/prefixfree)。

正如@ScottS[在这里](https://stackoverflow.com/questions/14920935/less-css-escape-entire-css-rule-with-different-prefixes/14943680#14943680)已经提到的那样，您可以在选择器中使用自 Less v1.6 以来的变量插值，这使您能够执行以下操作：

```
.prefix(@property, @value)
{
    -webkit-@{property}:@value;
    @{property}:@value;
}
selector {
    .prefix(property,value);
} 
```

输出：

```
selector {
  -webkit-property: value;
  property: value;
} 
```

您还应该阅读：[我是否让供应商前缀的 LESS 过于复杂？](https://stackoverflow.com/questions/22873745/am-i-overcomplicating-my-less-for-vendor-prefixes/26737212)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T07:18:56.980

这是一个蹩脚的答案，但我认为这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T20:34:29.470

没有办法做到这一点，但有解决方法。如果它有效，我认为它会是这样的：

```
.vendors(@prop, @val){
  ~"-webkit-@{prop}:@{val}";
} 
```

注意：这不起作用。

这是关于该主题的很长的讨论：[https ://github.com/cloudhead/less.js/pull/698](https://github.com/cloudhead/less.js/pull/698)

你也许可以使用这个库：[less-properties](https://github.com/borodean/less-properties)

# algorithm - 在没有单独函数的情况下实现递归

> ID：12537480
> 
> 赞同：0
> 
> 时间：2012-09-21T20:05:01.317
> 
> 标签：algorithm, data-structures, recursion

我想知道如何（或者即使可能）在没有调用自身的单独函数的情况下实现递归。到目前为止，我见过的所有实现递归的算法都使用单独的函数。我想了很多，想出了一个想法，即带有一些可变突变的 goto 语句可以完成这项工作，但我真的不确定。我做了一个小型研究，发现了关于这个[结构化编程定理](http://en.wikipedia.org/wiki/Structured_program_theorem)的信息 ，它证明了每个算法都可以只用三个数据结构来实现，所以这样的递归实现必须是可行的，但我仍然不能将所有东西组装成一致的知识和对整体的理解- 接近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:24:41.673

您正在寻找的基本上是将递归函数表达为迭代形式。这可以通过使用堆栈轻松完成。这是一个非常简单的 C# 示例：

```
int NodeCount(Node n)
{
      if (n.Visited) return 0; // This node was visited through another node, discard
      n.Visited = true;
      int res = 1;
      foreach (Node ni in n.Children) // Recurse on each node
      {
            res += NodeCount(ni); // Add the number of sub node for each node
      }
      return res;           
} 
```

这是迭代形式的完全相同的函数：

```
int NodeCount(Node root)
{
    int res = 0;
    Stack<int> stk = new Stack<int>();
    stk.Push(root) // We start with the root node
    while( stk.Count > 0) // While we still have nodes to visit
    {
          Node current = stk.Pop(); // Get the node on top of the stack
          current.Visited = true;  // Mark it as visited
          res ++; // Add one to the count
          foreach (Node ni in n.Children) // Push all non visited children to the stack
          {     
                if (ni.Visited == false) 
                        stk.Push(ni);
          }

    }
    return res;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:24:20.283

> 在没有调用自身的单独函数的情况下实现递归。

是的，可以将递归算法转换为迭代算法。但是为什么要使用`goto`语句呢？当您进行函数调用时，生成的程序集有一个分支指令可以跳转到类似于`goto`.
因此，您将完成的工作与机器代码最终将完成的工作有些相似，这样做的好处是避免了堆栈帧调用，而使用`goto`.
如果要避免递归，请使用迭代。你是怎么想出这个问题的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:21:09.110

您可以使用任何基于堆栈的语言在没有函数的情况下执行某种递归。例如，在 Forth 中，您可以这样编写斐波那契函数：

：斐波那契 0 1 10 0 做 2dup + rot 。循环交换。. ;

该程序递归地生成斐波那契数列的 10 次迭代，每次迭代都使用前一次迭代的输入。没有调用任何函数。

# java - 使用泛型动态实例化类型

> ID：12537482
> 
> 赞同：1
> 
> 时间：2012-09-21T20:05:05.817
> 
> 标签：java, generics, reflection

我猜我绝对不可能做类似的事情：

```
Class c = Class.forName("Processor<Integer, String>"); 
```

在 Java 中？（当然，我之前定义了处理器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:08:28.127

绝对不可能，因为泛型参数只能在编译时存在。`Class`对象在运行时是相同的。它不是 C++ 中的类模板。类型参数只是 java 编译器的信息。

您可以尝试通过创建一个类来完成类似的事情：

```
class IntStringProcessor extends Processor<Integer, String> {} 
```

和`Class c = Class.forName("IntStringProcessor");`

在运行时，您可以通过获取实际`Processor`类型参数，`c.getGenericSuperclass()`但这扩展了我猜想的问题。

**编辑**：另一个想法

您`Processor`可以将类保留为参数，然后：

```
Class c1 = Class.forName("java.lang.Integer");
Class c2 = Class.forName("java.lang.String");
Processor = new Processor(c1,c2); 
```

您的处理器现在不是通用的，而是在内部使用 Class 实例。正如我所说，没有办法在运行时创建泛型实例，因为泛型只存在于编译时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:05:35.850

首先让我理顺一些事情。`Class`Java 中没有用于`Processor<Integer, String>`. 只存在一个 `Class`对象`Processor`，即`Processor.class`所有泛型实例共享同一个`Class`对象：

```
 Processor<Integer, String> x = new Processor<Integer, String>();
    Processor<Character, Byte> y = new Processor<Character, Byte>();
    System.out.println(x.getClass() == y.getClass());        // prints true 
```

话虽如此，如果您只需要让泛型类型的令牌传递，您可以使用第三方实现。在这里，我使用[Java ClassMate](https://github.com/cowtowncoder/java-classmate)：

```
 TypeResolver typeResolver = new TypeResolver();
    // type token for Processor<Integer, String>
    ResolvedType type = typeResolver.resolve(Processor.class, Integer.class, String.class);
    System.out.println("type = " + type); 
```

如果您从文件中将 Java 类型的名称读取为`String`'s，您可能希望使用`Class.forName()`而不是我的`.class`文字。

您必须自己解析`<`,`>`括号，但这应该很容易，因为这些单个字符在 Java 类型名称中总是意味着相同的东西......

您可以像这样形成嵌套参数：

```
 // type token for Processor<Processor<Integer, String>, Character>
    ResolvedType type = typeResolver.resolve(Processor.class,
            typeResolver.resolve(Processor.class, Integer.class, String.class),
            typeResolver.resolve(Character.class)
    );
    System.out.println("type = " + type); 
```

如果你想在编译时为你知道的类型创建类型标记，你可以使用所谓的[super-type-token 模式](http://gafter.blogspot.de/2006/12/super-type-tokens.html)。只需将您需要的任何类型名称放入其中`new GenericType<...>() {}`：

```
 type = typeResolver.resolve(new GenericType<Processor<Processor<Integer, String>, Character>>() {});
    System.out.println("type = " + type); 
```

# jquery - jQuery 表达式在 iPad Safari 中返回“未定义”

> ID：12537483
> 
> 赞同：1
> 
> 时间：2012-09-21T20:05:07.517
> 
> 标签：jquery, ipad, safari, svg

我正在研究 SVG 论文，我需要获取**文本元素的第一个****tspan**元素的值，该元素位于jQuery 的**rect**元素之前。

 ****这段代码：

```
var rects = jQuery("#holder").find("rect");
jQuery.each(rects, function(){
    var temp = jQuery(this).prev().find('tspan:first')[0];
    console.log(jQuery(temp).text());
}) 
```

在 Chrome、FF 和 IE9 中完美运行。但它仅在 iPad 上的 Safari 中返回“未定义”。我不知道这段代码有什么问题以及为什么 Safari 的解释与所有其他浏览器不同。我很乐意收到任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:11:57.210

由于这样的边缘情况，我避免将 jQuery 与 SVG 混合。尝试使用 vanilla js 部分选择元素：

```
var rects = $("#holder").find("rect");
$.each(rects, function(){
    temp = this.previousElementSibling.querySelector("tspan")
    console.log($(temp).text());
})​; 
```

[http://jsfiddle.net/h8Uc7/](http://jsfiddle.net/h8Uc7/)

或者更好的是，只需使用 vanilla js，它同样简单且速度更快：

```
var rects = document.querySelectorAll("#holder rect");
for (i=0; i < rects.length; i++) {
    temp = rects[i].previousElementSibling.querySelector("tspan")
    console.log(temp.textContent);
}​ 
```

[http://jsfiddle.net/aE5mq/](http://jsfiddle.net/aE5mq/)****

# jquery - 选择标签中的 json

> ID：12537491
> 
> 赞同：-2
> 
> 时间：2012-09-21T20:05:52.213
> 
> 标签：jquery

我会直截了当地说我在 html 中有这段代码

```
<select id ="list" name = "items[]"></select>
<select id ="list" name = "items[]"></select>
<select id ="list" name = "items[]"></select> 
```

在 jquery 我有

```
<script>
jQuery(function($){
    $.getJSON('product_json.php', function(data) {
        var select = $('#list');
        $.each(data, function(key, val){
            $('<option/>').attr('value', val.PRODUCTID)
                  .html('ID ' + val.PRODUCTID)
                  .appendTo(select);
            });
        });
    });
 </script> 
```

我正在为第一个选择标签获取 json 数据，但在其他 2 个选择标签中没有，我希望在所有 3 个选择标签中使用相同的 id 相同的 json 数据。在我的例子中 id = "list" 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:07:05.943

## **ID 必须是唯一的！**

考虑改用类：

```
<select class="list" name="items[]"></select>
<select class="list" name="items[]"></select>
<select class="list" name="items[]"></select>

<script>
    var select = $(".list");
    // ...
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:06:55.680

您不能有多个具有相同 ID 的标签。您可以改用类。此外，您不应该在属性名称和值之间使用空格：

```
<select id="list1" name="items[]"></select>
<select id="list2" name="items[]"></select>
<select id="list3" name="items[]"></select> 
```

或者

```
<select class="list" name="items[]"></select>
<select class="list" name="items[]"></select>
<select class="list" name="items[]"></select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:11:59.330

**ID**必须是唯一的，您的代码的更正版本将是：

```
<select class ="list" name = "items[]"></select>
<select class ="list" name = "items[]"></select>
<select class ="list" name = "items[]"></select> 
```

在jQuery中：

```
<script>
jQuery(function($){
    $.getJSON('product_json.php', function(data) {
        $.each(data, function(key, val){
            $('<option/>').attr('value', val.PRODUCTID)
                  .html('ID ' + val.PRODUCTID)
                  .appendTo('.list');
            });
        });
    });
 </script> 
```

# android - 什么时候查询在 Android 上返回 Null？

> ID：12537493
> 
> 赞同：4
> 
> 时间：2012-09-21T20:06:06.523
> 
> 标签：android, sql, android-cursor

我似乎没有找到关于查询、插入或任何其他返回 null 的 SQL 方法的任何信息。但如果发生错误，它会发生。

我只是想知道 cursor 为 null 是否意味着发生了错误，或者是否意味着没有选择任何行（例如）？我不知道我应该如何对待它 - 作为一个错误或可能不时发生的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T20:40:02.767

我不相信你需要检查`if(cursor == null) {}`。

**首先**
，如果您的查询没有返回任何行，您将收到一个*空*游标。光标*不会*`null`。_

有很多方法可以检查 Cursor 是否为空：

*   `if(cursor.getCount == 0) {}`
*   `if(!cursor.moveToFirst()) {}`

事实上，所有 Cursor#moveTo...() 方法都返回`true`or `false`，如果您收到，`false`则您请求的行不存在。

**其次**
，如果发生错误，则需要在 try-catch 块中捕获错误，否则应用程序将因未处理的异常而崩溃。

* * *

`insert()`, `update()`, 和返回一个整数，而`delete()`不是游标。这些方法返回受您的语句影响的行数，如果没有行受到影响，这些方法返回`0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-14T03:29:38.877

如果我们查看来自[https://github.com/android/platform_frameworks_base/blob/master/core/java/android/database/sqlite/SQLiteDirectCursorDriver.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/database/sqlite/SQLiteDirectCursorDriver.java)的 Android 源代码，其中大多数查询结束：

```
public Cursor query(CursorFactory factory, String[] selectionArgs) {
    final SQLiteQuery query = new SQLiteQuery(mDatabase, mSql, mCancellationSignal);
    final Cursor cursor;
    try {
        query.bindAllArgsAsStrings(selectionArgs);

        if (factory == null) {
            cursor = new SQLiteCursor(this, mEditTable, query);
        } else {
            cursor = factory.newCursor(mDatabase, this, mEditTable, query);
        }
    } catch (RuntimeException ex) {
        query.close();
        throw ex;
    }

    mQuery = query;
    return cursor;
} 
```

您可以很容易地看到，在唯一的情况下，`Cursor`未分配的局部变量 a`RuntimeException`将被抛出。这意味着这个函数永远不能返回 null。

如果使用，您可以假设`RuntimeException`从工厂获得一个。查看构造函数，`SQLiteQuery`似乎`SQLiteCursor`没有抛出异常。`IllegalArgumentException`如果您的绑定在期间不正确，您可以获得`query.bindAllArgsAsStrings(selectionArgs);`

请注意，在读取非空值时`SQLiteException`可以稍后抛出。`SQLiteQuery``Cursor`

> 那个特定的Android源代码自2012年以来就没有更新过。它是稳定的

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-21T20:25:04.357

当游标导致未选择任何行时，它返回 (-1)，如果发生错误，则游标可以为空

# selenium - 使用 TestNG 提交 Selenium 测试 - 但不是并行的

> ID：12537495
> 
> 赞同：2
> 
> 时间：2012-09-21T20:06:26.503
> 
> 标签：selenium, testng, selenium-webdriver

这是我在这里的第一个问题，我很乐意得到帮助。

很长一段时间以来，我一直在使用 TestNG 作为我框架的一部分。我今天的问题是关于 testng.xml 配置 - 不要并行运行测试。不，我的测试都不是依赖的，它们都是独立的。但是，这是我的要求。

我的 testng.xml 文件如下所示：

```
<suite name="Smoke Test Suite" verbose="3"  parallel="tests" thread-count="2">      
<test name="Run on Firefox" preserve-order="true">
    <parameter name="browser"  value="firefox"/>
    <classes>
        <class name="com.test1"/>   
        <class name="com.test2"/>
        <class name="com.test3"/>
        <class name="com.test4"/>           
    </classes>
</test> 
<test name="Run on IE9" preserve-order="true">
    <parameter name="browser"  value="iexplore"/>
    <classes>
        <class name="com.test1"/>   
        <class name="com.test2"/>
        <class name="com.test3"/>
        <class name="com.test4"/>           
    </classes>
</test> 
<test name="Run on Google Chrome" preserve-order="true">
    <parameter name="browser"  value="chrome"/>
    <classes>
        <class name="com.test1"/>   
        <class name="com.test2"/>
        <class name="com.test3"/>
        <class name="com.test4"/>           
    </classes>
</test> 
```

我希望测试并行运行，但类一个接一个地运行。我目前看到的是，当测试启动时，我打开了 8 个 FF、IE9 和 Chrome 实例。如何配置它以执行“test1”，关闭浏览器，打开新实例，然后运行“test2”等等？

我必须这样做的原因是，我的应用程序在每次测试期间打开了多个窗口。IE9（它是邪恶的浏览器）不知道如何处理这种情况，在测试中途恐慌并失去对窗口的关注。有人建议过，我也发现了同样的情况——最好让一个 IE9 实例运行而没有其他任何东西会中断它。

建议和解决方案将不胜感激。

注意：所有类都在同一个包中。

谢谢，-阿利斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:05:47.413

您可以在**@Before 方法**中为 DefaultSelenium 创建三个对象。一个用于 IE，一个用于 FF，一个用于 chrome。

如果您使用的是 webdriver，您可以为其创建 3 个单独的驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-22T07:50:21.890

您可以使用三个单独的套件（xml 文件），然后在命令行中一个接一个地添加它们。这具有按顺序运行它们的效果。

# struct - 在 Go 中初始化嵌入式结构

> ID：12537496
> 
> 赞同：35
> 
> 时间：2012-09-21T20:06:40.647
> 
> 标签：struct, go

我有以下内容`struct`，其中包含`net/http.Request`：

```
type MyRequest struct {
    http.Request
    PathParams map[string]string
} 
```

现在我想`http.Request`在以下函数中初始化匿名内部结构：

```
func New(origRequest *http.Request, pathParams map[string]string) *MyRequest {
    req := new(MyRequest)
    req.PathParams = pathParams
    return req
} 
```

如何使用参数初始化内部结构`origRequest`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-21T20:15:13.670

```
req := new(MyRequest)
req.PathParams = pathParams
req.Request = origRequest 
```

或者...

```
req := &MyRequest{
  PathParams: pathParams
  Request: origRequest
} 
```

有关嵌入以及字段如何命名的更多信息，请参阅：[http ://golang.org/ref/spec#Struct_types。](http://golang.org/ref/spec#Struct_types)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-21T20:38:52.093

关于什么：

```
func New(origRequest *http.Request, pathParams map[string]string) *MyRequest {
        return &MyRequest{*origRequest, pathParams}
} 
```

它表明，而不是

```
New(foo, bar) 
```

你可能更喜欢

```
&MyRequest{*foo, bar} 
```

直接地。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-21T21:28:01.747

正如上面 Jeremy 所示，匿名字段的“名称”与字段的类型相同。因此，如果 x 的值是一个包含匿名 int 的结构，那么 x.int 将引用该字段。

# php - 插入/更新发生两次

> ID：12537500
> 
> 赞同：0
> 
> 时间：2012-09-21T20:06:54.653
> 
> 标签：php

我有以下代码：

```
while(1){
    $r = rand(0,9); 
    echo "running...";

    if($current_item  >= $array[$r]['limiter']){
        $foo = $foo;
        $bar = $bar;
        mysql_query("INSERT INTO db (type, hp) VALUES ('$foo', '$bar')");
        echo "done.";
        break 1;
    }
} 
```

当我运行它时，我会得到`"running..."`一次或几次回显（这是预期的）并`"done."`回显一次，正如预期的那样。

然而，两个条目将被插入到数据库中，其中包含暗示整个 if 语句运行了两次的不同信息。

有没有人遇到过这个？有没有我在这里看不到的事情发生？任何想法如何解决这一问题？

我对更新也有类似的问题，它们也更新了两次，并且与循环完全分开。

**编辑：**只是为了澄清，

*   `$current_item`确实发生了变化，但在循环的上下文中它是恒定的。

*   `$array[$r]['limiter']`引用一个多维数组。

*   这些都不应该影响循环本身，它只是一个必须满足的条件才能做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:29:12.780

我修改了一些代码以便能够运行它，我运行的代码是：

```
 for ($r=0;$r<10;++$r) {
        $array[$r]['limiter'] = $r;
    }
    $current_item = 3;
    $foo = 1;
    $bar = 2;

    while(1){
    $r = rand(0,9); 
        echo "running...";

    if($current_item  >= $array[$r]['limiter']){
        $foo = $foo;
        $bar = $bar;
        echo 'do_query: '."INSERT INTO db (type, hp) VALUES ('$foo', '$bar')";
                echo "done.";
        break 1;
    } 
```

和回应：

第一次：运行...do_query：INSERT INTO db (type, hp) VALUES ('1', '2')done。

第二：运行...运行...运行...do_query：INSERT INTO db (type, hp) VALUES ('1', '2')done。

第三：运行...运行...do_query：INSERT INTO db (type, hp) VALUES ('1', '2')done。

所以查询只用这段代码执行一次。问题肯定出在while之前的一段代码中，所以2次进入while。

# c# - NHibernate 对我的 Iesi.Collections.ISet 做了什么？

> ID：12537508
> 
> 赞同：1
> 
> 时间：2012-09-21T20:07:31.667
> 
> 标签：c#, nhibernate, moq, valueinjecter, iesi-collections

我正在尝试测试我的一项名为 GetUsersForRole 的服务。它接受一个简单的字符串并将其传递给我的 RoleRepository 以处理 NHibernate 并获取一个角色集合，其中包含为其 RoleName 传入的字符串。为此，我的 RoleRepository 上有一个 Find 函数，它调用此代码：

```
ICriteria crit = rb.unitOfWork.Session.CreateCriteria(typeof(Entity));
crit.SetCacheable(false);
foreach (object[] criteriaItem in criteria)
{
   crit.Add(Expression.Eq((string)criteriaItem[0], criteriaItem[1]));
}

return crit.List().Cast<Entity>(); 
```

所以上面的代码将返回一个角色列表，其中有一个定义为 Iesi.Collections.ISet 的属性，称为 Users。如果给定的角色绑定了用户（通过多对多），则填充此属性。

从这里开始，我处理这个 Find 函数的结果并获得第一个角色，然后我使用 ValueInjector 将 role.Users 属性映射到一个 IEnumerable 集。这 100% 有效。这是执行此操作的代码：

```
var role = _roleRepo.Find(new List<object[]>()
                               {
                                   new object[] {"Name", roleName}
                               }).FirstOrDefault();

if (role == null)
    return null;

MapperFactory.ClearMappers();
MapperFactory.AddMapper(new ISetToIEnumerable<User, UserDTO>());

var users = Mapper.Map<Iesi.Collections.ISet, IEnumerable<UserDTO>>(role.Users);

return users; 
```

我正在使用 value Injector 的 Automapper Simulation 类来处理集合映射。这可以在[这里](http://valueinjecter.codeplex.com/wikipage?title=Automapper%20Simulation&referringTitle=Home)找到。我必须制作一个特殊的 Mapper 来处理 Iesi.Collections.ISet 到 IEnumerable 的映射：

```
public class ISetToIEnumerable<TSource, TTarget> : TypeMapper<Iesi.Collections.ISet, IEnumerable<TTarget>>
{
    public override IEnumerable<TTarget> Map(Iesi.Collections.ISet source, IEnumerable<TTarget> target)
    {
        base.Map(source, target);

        List<TTarget> entities = new List<TTarget>();
        foreach (var entity in source)
        {
            entities.Add(Mapper.Map<TSource, TTarget>((TSource)entity));
        }
        target = entities.AsEnumerable();
        return target;
    }
} 
```

同样，这 100% 有效。在 ISetToIEnumerable 映射器类中，参数源为 Iesi.Collections.ISet {NHibernate.Collection.PersistantSet}。这就是尝试对此进行单元测试时出现问题的地方。

我正在尝试使用此单元测试来测试成功运行：

```
 [Test]
    public void GetUsersForRole_success()
    {
        // Arrange
        var roles = new List<Role>();
        var role = new Role()
                       {
                           Name = "role1",
                           Users = {new User() {Username = "user1"}, new User() {Username = "user2"}}
                       };
        roles.Add(role);

        _mockRoleRepository.Setup(m => m.Find(It.IsAny<IList<object[]>>())).Returns(roles);

        var service = GetDefaultService();

        // Act
        var users = service.GetUsersForRole("role1");

        Assert.That(users.Count() == 2);
    } 
```

当我调试它并进入 service.GetUsersForRole("role1") 调用时，我会从我的 mockRoleRepository 中取回我的模拟数据。这里的问题是我的 role.Users 属性返回类型为 Iesi.Collections.HashedSet （这是在我的实体构造函数中实例化它以用于 NHibernate 的测试和实际运行的方式）。现在这成为我的 ISetToIEnumerable 类中的一个主要问题。我的来源是输入为 Iesi.Collections.HashedSet。

我知道由于缺少 NHibernate 会话实例，我将无法使用 NHibernate.Collection.PersistantSet 键入我的模拟。有没有人对这里发生的事情以及我如何能够在我的模拟数据安排中复制 NHibernate 对我的 Iesi.Collections.ISet 所做的事情有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:40:23.257

如果我理解你是正确的，你`ISet<T>`的域模型中有一个吗？为什么不在映射器中使用它作为源？为什么是非泛型接口？

另一种选择是，您有一个通用接口和非通用接口（如 IEnumerable）作为映射器中的源。

# php - PHP 插件系统：在哪里可以在我的应用程序中创建插件挂钩？

> ID：12537512
> 
> 赞同：0
> 
> 时间：2012-09-21T20:07:42.377
> 
> 标签：php, plugins

我想在我的 PHP 应用程序中添加一个插件系统。

我想创建一个钩子系统，我的插件将自己注册到这些钩子上。所以太好了。问题是从一开始就知道要创建什么样的钩子。

有没有关于如何做到这一点的指导方针？我是否应该为应用程序中可能要更新数据的每个点设置一个钩子？用于输出数据的钩子？

我是否需要为“before_script_ends”、“before_avatar_output”之类的东西挂上钩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:13:16.983

这似乎很基于意见......

我将从您的开发人员在此插件系统中提出的要求开始。试着开始考虑最小可行产品。什么东西最有益。我会投票选择路由类型功能，因此可能会为此创建挂钩。这实际上可能就是您所需要的。

还要确定插件系统是否是您想要的。您可能更喜欢更多独立的应用程序。在这种情况下，基于休息/oauth 的方法可能更合适。

没有一些特定的用例就很难说。

# java - 从大量点进行有效搜索

> ID：12537513
> 
> 赞同：0
> 
> 时间：2012-09-21T20:07:42.320
> 
> 标签：java, android, graph

我收集了一堆 gps 点，现在我需要将这些点与 18000 点进行匹配。我在两个数组列表中有这些。有没有更好的搜索方式？我正在用 Java 执行此操作。

这是一个巨大的数据样本。它们包含一个额外的参数 ID1，通过它可以对一组点进行分组。

```
ID1     ID2     ID3      longi          lati,
2   1   1   -79.911635  39.609849,
2   1   2   -79.91151   39.60956,
2   1   3   -79.9115    39.609489,
2   1   4   -79.911496  39.609433,
3   1   1   -79.908162  39.609841,
3   1   2   -79.908447  39.610019,
4   1   1   -79.911136  39.608433,
4   1   2   -79.910961  39.608446,
4   1   3   -79.910629  39.608451,
4   1   4   -79.910064  39.608493,
4   1   5   -79.909117  39.608586, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:18:52.987

如果您正在寻找完全匹配，那么您可以将点放在一个集合中（HashSet 和 TreeSet 都可以），并找到交点：`set1.intersect(set2)`。您将不得不相应地实现 compare() 或 hashcode() 以及 equals() 在任何情况下，但这是简单的场景。

如果您正在寻找“比 X 更接近”，您应该使用[四叉树](http://es.wikipedia.org/wiki/Quadtree)。将所有节点放在四叉树的第一个数组列表中，然后使用此数据结构执行快速查找（每次查找可以产生 O(log N) 中的最近点，而不是蛮力方法的每次查找 O(N) ）。[例如，在geotools](http://geotools.org/)中有一个四叉树的开源实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:24:54.547

您还可以使用称为`RTREE`. 它通常比`quadtree`.

例如，本文发现它在 Oracle 数据库中的速度提高了 2 -3 倍：http: [//pdf.aminer.org/000/300/406/incorporating_updates_in_domain_indexes_experiences_with_oracle_spatial_r.pdf](http://pdf.aminer.org/000/300/406/incorporating_updates_in_domain_indexes_experiences_with_oracle_spatial_r.pdf)

Java Topology Suite (JTS) 包含一个很好的实现`rtree`： http: [//www.vividsolutions.com/jts/javadoc/com/vividsolutions/jts/index/strtree/STRtree.html](http://www.vividsolutions.com/jts/javadoc/com/vividsolutions/jts/index/strtree/STRtree.html)

请注意，它`GeoTools`是基于 JTS 的，因此它`rtree`的空间索引功能中可能还隐藏着一个：[http ://docs.geotools.org/latest/userguide/library/main/collection.html](http://docs.geotools.org/latest/userguide/library/main/collection.html)

# bandwidth - 用于 Web 开发的 localhost 的带宽限制器

> ID：12537514
> 
> 赞同：1
> 
> 时间：2012-09-21T20:07:44.637
> 
> 标签：bandwidth, web-deployment, bandwidth-throttling

我在 Windows 7 的 localhost 上运行 XAMPP。我试图找到一种方法来模拟拨号和 3G 连接的带宽。

当前是否有适用于 localhost 和 Windows 7 的解决方案，并且可以根据需要直接启用和禁用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-26T15:45:41.903

使用 Chrome 开发者工具的最简单方法。在网络选项卡上，具有在不同用例中限制带宽的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:12:00.947

[Chales 代理](http://www.charlesproxy.com/)包括[带宽限制](http://www.charlesproxy.com/documentation/proxying/throttling/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-30T16:25:54.060

您可以使用[@sitespeed.io/throttle](https://www.npmjs.com/package/@sitespeed.io/throttle) - 一个 npm 包。

例子：

```
# simulate slow 3g connection on localhost
npx @sitespeed.io/throttle 3gslow --localhost

# throttle localhost with roundtrip time of 200ms
npx @sitespeed.io/throttle --rtt 200 --localhost

# later when you are done,... stop throttling
npx @sitespeed.io/throttle --stop --localhost 
```

注意`throttle`需要sudo，并且会提示用户登录。

或者，`throttle`可以在 NodeJS 中以编程方式使用。示例（从文档复制）：

```
const throttle = require('@sitespeed.io/throttle');
// Returns a promise
const options = {up: 360, down: 780, rtt: 200};
await throttle.start(options);
// Do your thing and then stop
await throttle.stop(); 
```

有关更多选项，请参阅[文档](https://github.com/sitespeedio/throttle)。

# java - 如何使用 Curator 检查 Zookeeper 中是否存在路径？

> ID：12537516
> 
> 赞同：22
> 
> 时间：2012-09-21T20:07:52.773
> 
> 标签：java, apache-zookeeper, apache-curator

我目前处于将 Zookeeper 的东西集成到我的应用程序中的早期开发阶段。我使用 Netflix 的 Curator 作为处理 Zookeeper 的 API。我得到了大部分的要点（比如添加 ZNodes 和诸如此类的东西）。

但是你怎么检查一个 ZNode 是否存在呢？看起来可行的代码是：

```
client.checkExists().forPath(path); 
```

...`client`的实例在哪里`com.netflix.curator.framework.CuratorFramework`

但是，此调用返回一个`org.apache.zookeeper.data.Stat`对象。

使用此对象，我如何判断路径是否存在？

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-22T00:16:28.370

该`org.apache.zookeeper.data.Stat`对象是关于该 ZNode 的元数据。（它在概念上类似于如何[`stat()`](http://linux.die.net/man/2/stat)告诉您有关文件系统上文件的信息，因此得名。）如果它存在或不存在，则`checkExists().forPath()`返回 a 。`Stat``null`

# mysql - 在 Amazon EC2 中为 MYSQL 数据库配置 Play 应用程序

> ID：12537517
> 
> 赞同：0
> 
> 时间：2012-09-21T20:07:57.987
> 
> 标签：mysql, playframework, amazon-ec2, playframework-1.x

我正在尝试在托管在 Amazon EC2 的 play 1.2.4 应用程序中使用 mysql 数据库。为此，我在本地环境中使用以下代码段配置了 application.conf 文件。

```
db=mysql:root:password@databasename 
```

这很好用。

在我的 EC2 实例中配置了相同的 mysql 服务器，并创建了相同的数据库。

在 EC2 中使用该数据库的配置应该是什么。经过几次试验和错误方法后，我无法让我的 Play 应用程序与数据库通信。

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:46:43.780

我将通过以下测试诊断此问题：

*   您可以从运行应用程序的同一台机器访问您的 mysql 服务器吗？
*   尝试此操作时，请确保使用与应用程序中相同的用户名和密码。
*   查看 mysql users 表并检查是否允许用户连接。
*   mysql 守护进程是绑定到`localhost`还是必须使用机器的 IP 或外部 DNS 名称？
*   尝试检查您的防火墙规则，确保 mysql 的端口已从您的应用程序计算机打开
*   还要检查 EC2 安全组是否从您的应用程序机器打开了 mysql 端口。

# javascript - 玩 z-index

> ID：12537518
> 
> 赞同：-3
> 
> 时间：2012-09-21T20:07:59.047
> 
> 标签：javascript, css, drop-down-menu, twitter-bootstrap, z-index

请进入[本网站](http://ecruting.tisoft.me/)。（我无法在 jsFiddle 上重新创建同样的问题。抱歉）问题是，当您按下推荐的下拉按钮时，它会改变父 div 的高度。如何在父 div 边框上设置下拉菜单位置？为什么下拉菜单显示白色字体？

![在此处输入图像描述](../Images/27c9fcb049cb1f4480268807093d1144.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:44:20.887

将课程的 css 更改`dropdown-menu`为`position: relative`

类的颜色`dropdown-menu a`被覆盖`#topContainer a`

您可以使用浏览器的开发人员工具检查元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:15:11.270

您的“推荐”按钮实际上不是一个下拉菜单，它是两个按钮和一个看起来像下拉菜单的无序列表。因此，当您单击它时，它不会像常规下拉菜单那样运行和显示，即覆盖在 UI 顶部。

您必须`position: absolute`在按钮下方的列表中实现此效果。

* * *

更新：

问题是您的按钮所在的容器是相对定位的，这会改变子元素定位的行为。

1.  `position: relative`从`.btn-group`和删除`#main`
2.  删除`left: 0`和`top: 100%`从`.dropdown-menu`

# android - 更改 Android 应用程序背景，包括微调器和对话框

> ID：12537520
> 
> 赞同：0
> 
> 时间：2012-09-21T20:08:07.593
> 
> 标签：android, android-spinner, android-dialog, android-theme

我想将我的 android 应用程序中的默认白色背景更改为另一种颜色。

我`android:background="#HEXCODE"`在我的活动中使用它，它改变了背景，但对话框和微调器仍然有白色背景。

我还尝试创建样式/自定义主题，但它改变了整个主题（按钮和微调器样式看起来像 Androind 2.3 而不是 ICS 外观和感觉）

除了在微调器和对话框中保持一致的背景之外，我不想更改任何内容。

谢谢。

**编辑** 样式代码：

```
<style name="MyTheme" parent="android:Theme.Light">
        <item name="android:background">#FFFFBB</item>
</style> 
```

显现：

```
android:theme="@style/MyTheme" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:48:30.387

尝试设置所有小部件的背景颜色和布局

```
 android:background="@color/black"> 
```

在您的值文件夹中制作这样的 xml

```
 <resources>
      <color name="red">#ff0000</color> 
      <color name="green">#00ff00</color> 
      <color name="blue">#0000ff</color> 
      <color name="black">#000000</color> 
  </resources> 
```

这对我有用。

# asp.net-mvc-3 - 在 Windows 服务或 IIS 中托管应用程序服务器？

> ID：12537521
> 
> 赞同：0
> 
> 时间：2012-09-21T20:08:08.437
> 
> 标签：asp.net-mvc-3, wcf, architecture, windows-services, servicestack

我正在为我的客户开始新项目。它将是一种带有 Web UI（很多很多用户）+ 桌面 UI（很少用户）的大型系统。

我想知道。我应该在 Windows 服务或 IIS 中托管我的所有逻辑吗？

该应用程序可以在后台执行许多操作（导入、导出、为报告准备数据）。Web 客户端（ASP.NET MVC）和桌面客户端（和其他客户端）将通过[ServiceStack](http://www.servicestack.net/) /WCF 与我的服务连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:43:12.910

## 在同一个 ASP.NET 应用程序中运行后台服务

如果您使用[ServiceStack](http://www.servicestack.net) ，您可以在同一个 ASP.NET Web 应用程序中托管您的[Web 服务 API 和后台服务。](https://github.com/ServiceStack/ServiceStack/wiki/Architecture-overview)ServiceStack 对这个故事有一些很好的支持，如果你有一个`IMessageService`注册的，所有 OneWay Async HTTP 调用都会自动延迟并发布到注册的 MQ 服务（例如，对于 Redis MQ，请求 DTO 会在服务 MQ 收件箱中发布）。

## 在不同的 ASP.NET 应用程序中运行后台服务

由于使用 ASP.NET 应用程序部署 ASP.NET 主机比使用 Windows 服务更容易，因此在[StackOverflow Careers](http://careers.stackoverflow.com)中，我们选择将 BackOffice 服务拆分为单独的 ASP.NET Web 应用程序（这不是公开的）。

对于**单向**消息，面向 Internet 的职业网站将 Request DTO 放入 Redis，由[ServiceStack 的 Redis MQ 服务器](https://github.com/ServiceStack/ServiceStack/wiki/Messaging-and-redis)处理。对于正常的回复服务，我们能够重用 Request DTO 并使用[类型化的 C# Service Clients](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)直接调用 ServiceStack Web Services 。

使用 ServiceStack 的好处之一是[内置的消息传递 API](https://github.com/ServiceStack/ServiceStack/wiki/Messaging-and-redis)能够重用您现有的 Web 服务，因此我们能够获得[消息传递的优势，](https://github.com/ServiceStack/ServiceStack/wiki/Advantages-of-message-based-web-services)而无需开发特定的仅 MQ 服务。

### 确保 MQ 服务始终运行

由于在 ASP.NET 主机中运行的后台线程更加不稳定，我们将其添加到 Global.asax 中以`mqHost.Start()`在每个请求结束时调用，如果它因任何原因被终止，它将启动 MQ 服务器主线程：

```
protected void Application_EndRequest(object sender, EventArgs e)
{
    //If the MQ Host goes down for whatever reason, restart it
    if (appHost == null) return;
    var mqHost = appHost.TryResolve<IMessageService>();
    if (mqHost != null)
        mqHost.Start();
} 
```

这通常是 No-Op，但如果主后台线程因任何原因被杀死，它将再次启动它。

### 在 Windows 服务中运行后台服务

以 Windows 服务运行它可能是后台服务的理想环境，因为它不受 AppDomain 重新启动和 ASP.NET 请求限制的影响。部署和调试 Windows 服务更难，而且它们不是跨平台的，所以我通常会避免使用它们，除非需要它们。但如果你想走这条路，你应该查看 ServiceStack 的 Windows 服务演示项目：

*   [Razor Rockstars Windows 服务](https://github.com/ServiceStack/RazorRockstars/tree/master/src/RazorRockstars.WinService)
*   [Windows 服务启动模板](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/StarterTemplates/WinServiceAppHost)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:15:08.500

我愿意：

从 WCF 服务访问的业务逻辑（http、tcp，无论您的要求是什么）

Windows 服务是否用于多线程的繁重后台任务（解析巨大的 xml 文档，从文件中提取大数据，耗时的系统集成等......）

UI 处理通过 http 请求和响应的轻型后台任务（使用 asp.net mvc 消耗 WCF 服务或执行 UI Stuff）

# android - 在 HttpResponse 中执行 android 时主机名可能不为空

> ID：12537522
> 
> 赞同：10
> 
> 时间：2012-09-21T20:08:14.633
> 
> 标签：android, http-post, httpresponse, illegalargumentexception

我收到错误“目标主机不能为空，或在参数中设置”。

*   **我的清单文件中**确实有 Internet 权限****
***   **我在我的网址前加上了“http://”***   **我确实**对 URL 进行了编码**

 **这是我的代码：

```
 String url = "http://maps.google.com/maps/api/directions/json?origin=1600 Pennsylvania Avenue NW, Washington, DC 20500&destination=1029 Vermont Ave NW, Washington, DC 20005&sensor=false";
   HttpClient httpclient = new DefaultHttpClient();
   String goodURL = convertURL(url);//change weird characters for %etc
   HttpPost httppost = new HttpPost(goodURL);
   HttpResponse response = httpclient.execute(httppost); 
```

在第 5 行（上面的最后一行），我的程序抛出异常。这是确切的错误：

```
java.lang.IllegalArgumentException: Host name may not be null 
```

**我确实在方法 convertURL 中对我的字符串进行编码...**

好网址=`http://maps.google.com/maps/api/directions/json?origin=3%20Cedar%20Ave%2c%20Highland%20Park%2c%20NJ%2008904&destination=604%20Bartholomew%20Road%2c%20Piscataway%2c%20New%20Jersey%2008854&sensor=false`

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:48:41.150

我不确定您的 URL 编码方法在做什么，但是如果您使用框架中的方法，例如`URLEncoder`，**您永远不应该传递完整的 URL**，只传递您需要编码以转义特殊字符的参数列表。

编码完整的 URL 将百分比转义每个字符，包括`://`into`%3A%2F%2F`和所有附加的斜杠 into `%2F`。

`goodUrl`编码后查看字符串的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:19:48.870

只需使用：

```
URLEncoder.encode(YOUR_STRING); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:33:16.190

在发布请求之前对 URL 字符串进行编码，但仅对 ? 之后的参数进行编码：

```
String url = "http://maps.google.com/maps/api/directions/json?";
String params = "origin=1600 Pennsylvania Avenue NW, Washington, DC 20500&destination=1029 Vermont Ave NW, Washington, DC 20005&sensor=false";
HttpClient httpclient = new DefaultHttpClient();
String goodParams = convertURL(params);//change weird characters for %etc
HttpPost httppost = new HttpPost(url + goodParams);
HttpResponse response = httpclient.execute(httppost); 
```**

# sql - SQL Server 2008 - 需要帮助合并 2 个表（笛卡尔）

> ID：12537531
> 
> 赞同：1
> 
> 时间：2012-09-21T20:09:02.123
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有 2 个完全不相关的表，我需要将它们放在一起 - 每个表一列。当我尝试笛卡尔连接时，我最终得到了每种组合：

```
SELECT Field1, Field2 FROM Table1, Table2 
```

结果：

```
Table1.Field1 Table2.Field2
---------------------------
1             1
1             2
1             3 
2             1
2             2
2             3
3             1
3             2
3             3 
```

我需要它并排返回：

```
Table1.Field1 Table2.Field2
---------------------------
1             1
2             2
3             3 
```

这可能吗？提前致谢

***编辑***

```
Table1.Table1IDs
----------------
1
2
3
4
5

Table2.Table2IDs
----------------
6
7
8
9
10 
```

所需的输出（进入临时表/选择语句）

```
Table1.Table1IDs    Table2.Table2IDs
------------------------------------
1                   6
2                   7
3                   8
4                   9
5                   10 
```

这样我就可以将我的插入到我需要插入的实际表中：

```
INSERT INTO dbo.MTMObjects
    SELECT Table1IDs, Table2IDs 
    FROM [temp table or solution] 
```

***回答*** Bluefeet 让我想到了使用带有标识列的临时表，然后我可以使用它来加入。他是“更安全”的，因为您不依赖 SQL 的幽默来对两个记录集进行相同的排序，但这可能会帮助下一个人：

```
DECLARE @tmp_Table1 TABLE(ID int IDENTITY(1,1) NOT NULL, TableID1 int NOT NULL)
DECLARE @tmp_Table2 TABLE(ID int IDENTITY(1,1) NOT NULL, TableID2 int NOT NULL)

INSERT INTO @tmp_Table1 
    OUTPUT INSERTED.Field1
SELECT * FROM Table1

INSERT INTO @tmp_Table2 
    OUTPUT INSERTED.Field2
SELECT * FROM Table2

OUTPUT
SELECT tmp1.Field1, tmp2.Field2 
FROM @tmp_Table1 tmp1 INNER JOIN @tmp_Table2 tmp2 ON tmp2.ID = tmp1.ID 
```

干杯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:43:16.633

您可以使用`row_number()`. 这将基于以下内容强制两个表之间的关系`row_number`：

```
select t1.col1, t2.col2
from
(
  select col1, row_number() over(order by col1) rn
  from table1
) t1
inner join
(
  select col2, row_number() over(order by col2) rn
  from table2
) t2
  on t1.rn = t2.rn 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3c727/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:13:29.173

如果我理解...您唯一需要的是在 where 子句中添加一个过滤器

```
SELECT Field1, Field2 FROM Table1, Table2 WHERE Table1.Field1=Table2.Field2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:14:23.293

您可能应该将最终解决方案更改为使用外连接而不是内连接，以防表的行数不完全相同。

# android - 从 android 调用 SOAP-JSON Web 服务的问题

> ID：12537533
> 
> 赞同：2
> 
> 时间：2012-09-21T20:09:09.263
> 
> 标签：android, json, web-services, ksoap2

您好我正在使用 Eclipse 通过 android 进行开发并尝试连接到 .Net Web 服务。webservice 方法有参数“usuario”和“password”，它返回一个布尔值。

我正在使用 ksoap2 库来调用 web 服务，但是我遇到了问题，当我尝试调用 web 服务时我的应用程序崩溃了。

当我看到变量“transporte”的响应标头时，它显示“HTTP/1.1 500 内部服务器错误”，所以我想我可能在参数或其他方面有问题。我已经允许 Android Manifest 的 Internet 连接权限。

我正在模拟器上运行该应用程序。

这是我的代码：

```
public class EntrarActivity extends Activity {

///---Constantes para la invocación del servicio---
private static final String METHOD_NAME = "existeUsuario";
private static final String SOAP_ACTION = WebServiceConstants.NAMESPACE + EntrarActivity.METHOD_NAME;

///---Declaración de variables para consumir el servicio---
private SoapObject request;
private SoapSerializationEnvelope envelope;
private SoapPrimitive resultsRequestSoap;

///---Declaracion de variable para serializar/deserializar
Gson gson;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_entrar);
}

public void clicked_loginButton(View view)
{
    String usuario = ((EditText)findViewById(R.id.editText_mail_entrar)).getText().toString();
    String password = ((EditText)findViewById(R.id.editText_password_entrar)).getText().toString();

    request = new SoapObject(WebServiceConstants.NAMESPACE, EntrarActivity.METHOD_NAME);

    //---le agregamos los parametros---
    request.addProperty("usuario", usuario);
    request.addProperty("password", password);

    envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true; //por que es .NET

    envelope.setOutputSoapObject(request);

    HttpTransportSE transporte = new HttpTransportSE(WebServiceConstants.URL);

    try {

        transporte.call(EntrarActivity.SOAP_ACTION, envelope);
        resultsRequestSoap = (SoapPrimitive)envelope.getResponse();

    } catch (IOException e) {

        e.printStackTrace();

    } catch (XmlPullParserException e) {

        e.printStackTrace();

    }

    String strJson = resultsRequestSoap.toString();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:29:41.637

尝试先下载 SoapUI 并在 SoapUI 中构建请求。它允许您轻松调整输入 - 这将帮助您将其缩小到 SOAP 请求代码中的问题或来自 Web 服务的响应。在 SoapUI 中获得请求后，您可以将 Java SOAP 请求转储为字符串并比较两者。很有可能，您忘记了正在构建的 SOAP 请求中的某些内容。SoapUI 将查询 WSDL 并通过添加服务来构建示例请求：

```
http://<hostname>/webservice?WSDL 
```

将模板生成的输出与您发送到 Web 服务的输出进行比较。

# html - 嵌入式 YouTube 视频 showinfo 与谦虚品牌不兼容？

> ID：12537535
> 
> 赞同：4
> 
> 时间：2012-09-21T20:09:24.210
> 
> 标签：html, youtube, embed, youtube-api

我正在使用参数在我的网站上嵌入 YouTube 视频`modestbranding=1`。不幸的是，我也想使用参数`showinfo=0`。当我尝试这个时，它似乎`modestbranding`不再起作用了。

我进行了研究，发现`modestbranding`只有当它是集合中的第一个参数时才有效，我确保这样做。

我还读到我可以使用未记录的`title`参数来伪造它（请参阅[http://www.reelseo.com/remove-youtube-logo/](http://www.reelseo.com/remove-youtube-logo/)），但它似乎对我不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T00:53:26.700

这两个参数是互斥的——对不起。我们将更新[https://developers.google.com/youtube/player_parameters#modestbranding](https://developers.google.com/youtube/player_parameters#modestbranding)以反映这一点。

# twilio - 是否可以使用 Twilio-csharp / TwilioRestClient 发送带有 SMSMessage 的 cookie？

> ID：12537538
> 
> 赞同：2
> 
> 时间：2012-09-21T20:09:36.230
> 
> 标签：twilio, restsharp

我正在创建出站 SMS 通信，需要设置一个 cookie，以便我可以跟踪对话线程。我正在使用 Twilio-charp 客户端，但没有看到设置 cookie 或 http 标头的方法。这是可能的还是我需要走不同的路线？

**编辑：**

我需要在这里说明一下。在我的场景中，我需要设置一个带有事务 id 的 cookie，该事务 id 需要包含在原始出站消息中。例如，我将创建一条 SMS 消息，请求用户做出响应：“文本 (1) 批准，(2) 拒绝”。

Twilio 示例代码详细说明了一个页面，该页面接收消息、检查 cookie，然后在它不存在时创建一个。在我的场景中，我需要 cookie 在出站消息中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T20:39:37.937

我联系了 Twilio 的支持人员，他们表示无法使用他们的 REST API 发送 cookie。可以从您在设置 http 标头的位置创建的响应端点交换 Cookie。

这意味着您必须等待用户回复您的第一条消息，然后才能将 cookie 插入 http 标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:34:35.700

您绝对可以设置一个 cookie 来跟踪对话线程。可以在 Twilio 的 .NET (C#) 快速入门下找到详细信息和示例代码：http: [//www.twilio.com/docs/quickstart/csharp/sms/tracking-conversations](http://www.twilio.com/docs/quickstart/csharp/sms/tracking-conversations)

# uiviewcontroller - supportedInterfaceOrientations 方法在 iOS 6 UIViewController 上不起作用

> ID：12537541
> 
> 赞同：11
> 
> 时间：2012-09-21T20:10:08.537
> 
> 标签：uiviewcontroller, orientation, ios6

在**iOS 5**中，我的应用程序使用了该方法来改变我的方向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

在**iOS 6**中，我认为我应该这样做，但它什么也没做！我的应用程序旋转不是我想要的方式。

```
- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight;
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-21T20:27:39.790

这就是我添加我的`viewController`.

我替换了这一行代码：

```
[window addSubview:viewController.view]; 
```

通过这一行：

```
[window setRootViewController:viewController]; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-27T14:38:15.133

当设备改变方向时，在 iOS 6 中，系统会询问应用程序它支持哪个方向。应用程序将返回它接受的许多方向。

**应用程序如何确定它的方向？**

1.  首先，应用程序检查它的 info.plist 方向（这对于确定使用哪个方向进行启动非常重要。
2.  其次，它向它的应用程序委托询问它的方向，这可以通过`-(NSUInteger)application:supportedInterfaceOrientationsForWindow:`方法指定。这有效地覆盖了 info.plist 设置，此实现是可选的。默认情况下，iPad 应用程序面向所有方向，而 iPhone 几乎是上下颠倒的。
3.  最后，应用程序委托查询它的最顶层视图控制器，这可以是 a`UINavigationController`或 a `UIViewController`... 等，然后它指定如何呈现以及是否要自动旋转。这些`UIViewControllers`可以使用`shouldAutorotate:`和`supportedInterfaceOrientations`方法来告诉应用程序委托如何呈现它。

您必须确保设置窗口的根视图控制器。

此外，如果您正在全屏显示任何其他视图控制器，例如模态视图控制器，则这是负责确定方向变化与否的控制器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T14:24:21.120

对我来说，解决方案有效，情况有所不同，因为我有一个`UINavigationController`. 我的情况是我需要除一个之外的所有肖像窗口。我必须启用目标中的所有横向和纵向（否则它会在唯一的横向视图上崩溃）。

所以在这种情况下：

1.  `UINavigationController`为,创建一个子类
2.  在那里插入旋转特定的东西
3.  并使用子类而不是`UINavigationController`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-28T19:11:21.003

如果您使用的是 UINavigationController，它会将`supportedInterfaceOrientations:`消息发送到 UINavigationController 本身，而不是最顶层的视图控制器（即您实际希望它执行的操作）。

无需继承 UINavigationController 来修复它，您只需[向 UINavigationController 添加一个类别即可](https://stackoverflow.com/a/12588038/35690)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:44:49.440

我在我的单例中创建了一个新变量：`canRotate`，当我希望视图控制器支持某些方向时，我将其设置为 YES。

在 appDelegate 我添加了这个：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    if([[SharedData sharedInstance] canRotate])
    {
        return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight);
    }
    return UIInterfaceOrientationMaskPortrait;
} 
```

就我而言，它有效。我有一个自定义选项卡栏，UINavigationviewControllers 作为子视图添加到 rootViewController。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T16:43:11.090

我知道这听起来很简单，但是在我的 iPhone 上进行测试时，我绞尽脑汁想弄清楚方向问题——我在纵向模式下设置了物理自动锁定模式——所以我没有以编程方式改变任何事情——认为这应该是故障排除步骤 1 ！

# javascript - Javascript 的原生 `instanceof` 运算符和 MooTools 的 `instanceOf` 函数有什么区别？

> ID：12537542
> 
> 赞同：4
> 
> 时间：2012-09-21T20:10:30.700
> 
> 标签：javascript, inheritance, mootools

MooTools 有自己的`instanceOf(instance, Type)`功能。
我只能假设它与 Javascript 的本机`instanceof`运算符有些不同，但我似乎无法弄清楚是什么。

谁能解释该`instanceOf()`功能的区别或目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:12:41.537

`instanceOf`与之相辅相成的`typeOf`是内部 MooTools 函数，它们在类型遍历方面比它们的原生函数做得更好。

typeOf 在这方面稍微有用：

```
typeof []; // object
typeOf([]); // array
typeof new Date(); // object
typeOf(new Date()); // date 
```

instanceOf 主要用于 Class，尽管它也适用于 Types 构造函数。

例如。

```
var foo = new Class(),
    bar = new Class({
        Extends: foo
    });

var foobar = new bar();

instanceOf(foobar, bar); // true
// but also due to Extends prototype chain and the constructor:
instanceOf(foobar, foo); // true

// as well as standard behaviour like
instanceOf([], Array); // true
instanceOf(4, Number); // true vs 4 instanceof Number == false 
```

查看源代码： [https ://github.com/mootools/mootools-core/blob/master/Source/Core/Core.js#L47-58](https://github.com/mootools/mootools-core/blob/master/Source/Core/Core.js#L47-58)

您可能会注意到 mootools 中的许多类型的构造函数都装饰了对象以简化鸭子类型，因此 typeOf 和 instanceOf 可以处理实际有意义的结果。

另请阅读[mootools 类型功能](https://stackoverflow.com/questions/10987173/mootools-type-function)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:18:09.143

至少：

```
> "" instanceof String
false
> instanceOf("", String)
true 
```

# php - PHP盐和哈希密码不匹配

> ID：12537543
> 
> 赞同：-1
> 
> 时间：2012-09-21T20:10:33.450
> 
> 标签：php, hash, salt

我创建了一个生成 40 个字符的 salt 的页面，然后获取输入的密码并使用此 PHP 代码创建一个哈希，并使用（这只是相关行）将 salt 和哈希密码插入数据库：

```
$hashedpassword = sha1($password . $salt); 
```

然后在登录过程中，我使用输入的密码并从数据库中检索 salt 以使用同一行代码创建 has（同样，这只是相关行）：

```
$hashedpassword = sha1($storedPassword . $storedSalt); 
```

但它与存储的哈希密码不匹配，所以为了查看是否有错误，我“回显”了信息，以便我可以阅读正在发生的事情：

```
$storedSalt = $row_rsSaltLookup['salt'];
$storedPassword = $row_rsSaltLookup['password'];
$storedHashedPassword = $row_rsSaltLookup['hashedpassword'];
    //use the stored salt to hash the user's submitted password
$hashedpassword = sha1($storedPassword . $storedSalt);
echo "Salt: " . $storedSalt . "<br/>";
echo "Stored Password: " . $storedPassword . "<br/>";
echo "Stored Hashed Password: " . $storedHashedPassword . "<br/>";
echo "Pre-hash: " . $storedPassword . $storedSalt . "<br/>";
echo "Hashed Password: " . $hashedpassword . "<br/>";
echo "re-Hashed Password: " . sha1($storedPassword . $storedSalt) . "<br/>";
echo "re-Hashed Password 2: " . sha1($storedPassword . $storedSalt) . "<br/>";
if($storedHashedPassword != $hashedpassword) {
     echo "NO MATCH";
}else{
     echo "MATCH";
}
exit(); 
```

结果我得到了这个：

```
Salt: 4039505cc4efae2
Stored Password: ujwiervdhyf
Stored Hashed Password: aa27c197dfd88cd2f0d46b84d259016a15bd3954
Pre-hash: ujwiervdhyf4039505cc4efae2
Hashed Password: b06193ed26617c449902ac813376cf0c33bec3d1
re-Hashed Password: b06193ed26617c449902ac813376cf0c33bec3d1
re-Hashed Password 2: b06193ed26617c449902ac813376cf0c33bec3d1
NO MATCH 
```

在这个例子中，“salt”是从帐户创建和散列（Stored Hashed Password）开始生成并与密码（Stored Password）放在一起的。当我登录时，我从数据库中获取盐并将其添加到登录密码中，然后对其进行哈希处理并将其与存储的哈希密码进行比较，这应该是相同的吗？所以我想知道我哪里出错了，因为我似乎无法弄清楚为什么哈希不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:51:12.603

如果

```
$hashedpassword = sha1($storedPassword . $storedSalt);
                       ^^^^^^^^^^^^^^^ 
```

是您首次创建帐户时存储的哈希值，那么您做错了。你正在散列一个散列，这是行不通的。它应该是

```
$hash_of_attempted_password = sha1($password_from_login_form . $storedSalt);
if ($hash_of_attemped_password == $hash_of_original_password) {
   ... it's a match ...
} 
```

# python - 如何在 py-musicbrainz2 的发布结果中找出光盘编号？

> ID：12537544
> 
> 赞同：1
> 
> 时间：2012-09-21T20:10:36.460
> 
> 标签：python, musicbrainz

Python musicbrainz2 库的文档告诉我，这就是我按光盘 ID 搜索发行版的方式：

```
>>> import musicbrainz2.webservice as ws
>>> q = ws.Query()
>>> filter = ws.ReleaseFilter(discId='8jJklE258v6GofIqDIrE.c5ejBE-')
>>> results = q.getReleases(filter=filter)
>>> results[0].score
100
>>> results[0].release.title
u'Under the Pink' 
```

但是对于双 CD，当我搜索两张 CD 的光盘 ID 时，我会得到相同的版本（应该是），但曲目不同。这也是应该的，但我看不到从查询结果中获取光盘编号的方法。它在某个地方吗？我认为它作为“媒介”存在于 XML 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:15:51.547

[musicbrainz2](http://pypi.python.org/pypi/python-musicbrainz2/0.7.2)包，尽管它的名字，似乎只支持网络服务模式的弃用版本 1，据我所知，它不提供媒体信息。

解决方案似乎是改用[musicbrainzngs](http://pypi.python.org/pypi/musicbrainzngs/0.2)包，它支持 MusicBrainz NGS Web 服务（版本 2）。然后您只需要执行以下操作（基于包源中提供的示例）：

```
>>> from pprint import pprint
>>> import musicbrainzngs
>>> musicbrainzngs.set_useragent("application", "0.01", "http://example.com")
>>> pprint(musicbrainzngs.get_release_by_id("e94757ff-2655-4690-b369-4012beba6114",["media"]))
{'release': {'barcode': '9421021463277',
             'country': 'NZ',
             'date': '2008-07-04',
             'id': 'e94757ff-2655-4690-b369-4012beba6114',
             'medium-list': [{'format': 'CD',
                              'position': '1',
                              'track-list': []}],
             'quality': 'normal',
             'status': 'Official',
             'text-representation': {'language': 'eng', 'script': 'Latn'},
             'title': 'Affordable Pop Music'}} 
```

瞧：`medium-list`可用的信息！

# css - W3 CSS 验证 | 梯度的值错误

> ID：12537546
> 
> 赞同：1
> 
> 时间：2012-09-21T20:10:43.150
> 
> 标签：css

使用[W3 CSS 验证器](http://jigsaw.w3.org/css-validator/validator)时出现此错误

> 值错误：背景线性渐变（顶部，#fefefe，#dddddd）不是背景颜色值：线性渐变（顶部，#fefefe，#dddddd）

对于这一行：

```
 background:  linear-gradient(top, #fefefe, #dddddd); 
```

也：

```
 background:  -webkit-linear-gradient(top, #fefefe, #dddddd); 
```

和其他线当我尝试使用渐变。

渐变有效，但我是否使用了错误的语法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:24:06.080

CSS3 尚未最终确定，这意味着验证器可能不会针对 CSS3 的最新工作草案进行验证。此外，验证器可能不会验证供应商特定的 css，例如 -moz-* 或 -webkit-*

有关使用线性渐变的规范，请参阅w3 的[最新草案](http://dev.w3.org/csswg/css3-images/#linear-gradients)。

顺便说一句，我相信您的代码中的“顶部”应该是“顶部”作为渐变的方向。草案中的示例 12：

> 以下是指定基本垂直渐变的各种方法：
> 
> ```
> linear-gradient(yellow, blue);
> linear-gradient(to bottom, yellow, blue);
> linear-gradient(180deg, yellow, blue);
> linear-gradient(to top, blue, yellow);
> linear-gradient(to bottom, yellow 0%, blue 100%); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:24:35.017

尝试以下生成器：

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

这将为您提供所有浏览器的正确语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:31:40.423

w3c 的验证器使用 w3c 的建议。`linear-gradient`尚未成为 w3c 的推荐，因此在技术上它不是“有效的”。其他浏览器供应商已经着手实施工作草案中指定的内容（希望从现在到 w3c 最终确定规范时它不会有太大变化）。这就是为什么您需要供应商前缀才能使其工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T20:32:08.470

只要梯度不是最终规范的一部分，w3c 验证器就会为此抛出错误。不要依赖于草稿状态下的“实验”功能的验证器。

所以，你的语法很好，但要注意浏览器中的不同实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T20:13:57.560

你在验证器上选择什么版本的 CSS？是否设置为 CSS3？我知道验证器会抛出奇怪的错误，而实际上我的代码没有任何问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-13T20:31:06.377

值错误：宽度解析错误 - 90px）

宽度：计算（100% - 90px）；宽度：-moz-calc(100% - 90px); 宽度：-webkit-calc(100% - 90px);

# python - django 模板中的简短条件语句

> ID：12537552
> 
> 赞同：2
> 
> 时间：2012-09-21T20:11:26.890
> 
> 标签：python, django, django-templates

我在 python/django 模板中寻找简短的条件语句，所以我可以少写多用。类似 (tkey in disabled_rows) ？“禁用行”：“”。

这就是我正在做的事情：

```
{% if tkey in disabled_rows %}
    <tr class="disabled-row">
{% else %}  
    <tr>    
{% endif %} 
```

我还尝试了一个自定义模板标签，但没有成功：

```
{{ (tkey in disabled_rows)|xif:'true,false' }} 
```

xif 实现：

```
def xif(cond, args):
if cond:
    return args.split(',')[0]
else:
    return args.split(',')[1] 
```

如果你能解释为什么这不是在 python 中本地实现的，那就加分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T20:16:16.427

对于您提供的示例，此解决方案简短而简单：

```
<tr {% if tkey in disabled_rows %} class="disabled-row"{% endif %}> 
```

也许您正在尝试实现的其他目标可以通过不同的示例更好地说明？

# ios - 在 iOS 中围绕一个图钉添加多个圆圈

> ID：12537571
> 
> 赞同：1
> 
> 时间：2012-09-21T20:13:50.227
> 
> 标签：ios, mkmapview, geometry

如何在地图 ( `MKMapView`) 内添加和显示多个不同颜色的圆圈？我想出了如何添加**一个**圆圈，但无法弄清楚如何添加不同大小和颜色的多个圆圈......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:48:42.037

这是我用来在地图上给定位置绘制两个同心圆的一些代码。外层是灰色的，内层是白色的。（在我的示例中，“范围”是圆半径）两者都具有一定的透明度：

```
- (void)drawRangeRings: (CLLocationCoordinate2D) where {
    // first, I clear out any previous overlays:
    [mapView removeOverlays: [mapView overlays]];
    float range = [self.rangeCalc currentRange] / MILES_PER_METER;
    MKCircle* outerCircle = [MKCircle circleWithCenterCoordinate: where radius: range];
    outerCircle.title = @"Stretch Range";
    MKCircle* innerCircle = [MKCircle circleWithCenterCoordinate: where radius: (range / 1.425f)];
    innerCircle.title = @"Safe Range";

    [mapView addOverlay: outerCircle];
    [mapView addOverlay: innerCircle];
} 
```

然后，确保您的类实现该`MKMapViewDelegate`协议，并在以下方法中定义您的叠加层的外观：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    MKCircle* circle = overlay;
    MKCircleView* circleView = [[MKCircleView alloc] initWithCircle: circle];
    if ([circle.title compare: @"Safe Range"] == NSOrderedSame) {
        circleView.fillColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.25];
        circleView.strokeColor = [UIColor whiteColor];
    } else {
        circleView.fillColor = [UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:0.25];
        circleView.strokeColor = [UIColor grayColor];
    }
    circleView.lineWidth = 2.0;

    return circleView;
} 
```

当然，不要忘记在您的`MKMapView`对象上设置委托，否则上述方法将永远不会被调用：

```
mapView.delegate = self; 
```

# file - 使用没有“.html”扩展名的 html 文件有什么问题吗？

> ID：12537577
> 
> 赞同：0
> 
> 时间：2012-09-21T20:14:16.980
> 
> 标签：file, url, web, file-extension

我想知道使用没有扩展名的 html 和 php 文件是否有任何问题。

例如，如果我要上传一个带有扩展名的文件，我会使用这样的 URL：

```
http://yoursite.com/randompage.html 
```

如果我使用没有扩展名的文件，我会使用这样的 URL：

```
http://yoursite.com/randompage 
```

我知道这不是首选方法，因为它使文件无法识别，但是有什么可以阻止站点正常工作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:19:59.493

您要做的是使用[**url-rewriting**](http://www.sitepoint.com/guide-url-rewriting/)完成。

基本上，您将为您的 Web 服务器添加一个重写规则，因此当他收到对 url 的请求时，`yoursite.com/randompage`他会将其更改为`yoursite.com/randompage.html`. 如果您在网上搜索“mod_rewrite 示例”或“url 重写示例”，您会在网上找到很多示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:27:57.417

文档类型是从网络服务器以 http 标头发送的，因此完全可以按照您的要求进行操作。

例如，当使用 Apache 时，告诉它任何没有扩展名的文件都是 html，在“conf”文件中你可以说：

> DefaultType 文本/html

[Apache The Definitive Guide](http://docstore.mik.ua/orelly/weblinux2/apache/ch06_01.htm)中的更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:18:44.773

这指向具体文档（在本例中为 randompage.html）：

```
http://yoursite.com/randompage.html 
```

这指向目录中的默认文档：

```
http://yoursite.com/randompage/ 
```

默认文档在您的网络服务器中设置。例如：index.html、default.html、index.php、default.apsx、...

# c - 在这种情况下处理 pthread 通信/信号的正确方法？

> ID：12537579
> 
> 赞同：0
> 
> 时间：2012-09-21T20:14:31.930
> 
> 标签：c, pthreads, signals, inter-process-communicat

我正在编写一个在对等点之间共享文件的小型客户端/服务器演示。一个对等点从主服务器获取一个 IP 地址列表，主线程为每个相应的文件创建一个线程。该过程如下所示：

*   主线程从服务器获取文件列表
*   为每个文件创建的线程（分离）
*   在每个创建的线程中，连接到指定/与文件关联的对等点
*   线程分块下载文件
*   线程宣布文件完成

尝试“查询”线程时，我的问题就出现了。在每个线程中，我都会跟踪传输的进度。在我的主线程中，我希望用户能够看到所有正在发生的传输的进度。最好的方法是什么？我正在考虑使用 pthread_kill 分别向每个线程发送信号，尽管似乎应该有更好的方法。如果有人有想法，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:18:11.153

当你创建你的线程时，你包括一个`void *`指向你想要的任何东西。在您的示例中，您可以声明一个进度值数组并将其中一个的地址传递给您创建的每个线程，让线程在需要时执行简单的更新，并且您的主线程可以定期检查这些值。

如果您已经将该参数用于某事，则需要创建一个包含该新值和您已经使用的任何内容的结构，并传递它的地址，以便线程获得所需的一切。

# c# - 哈希码相同，但 != 返回 true？

> ID：12537580
> 
> 赞同：1
> 
> 时间：2012-09-21T20:14:37.583
> 
> 标签：c#, c#-4.0

我被一个看似简单的问题难住了。我有两个要与 != 进行比较的对象。

当我运行应用程序时， a != b 为真。当我设置断点并执行 Watch 时，a.GetHashCode() == b.GetHashCode() 为真。

这两个（引用类型）对象是在不同的程序集中定义的，但是我找不到对 != 方法的覆盖（尽管 GetHashCode 已被覆盖）。对此还有其他解释吗？两个对象的 GetHashCode 是否可能相同，但未覆盖的 != 会返回 true？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T20:18:43.320

当两个不同的对象返回相同的代码时，称为“冲突”。只有大约 40 亿个可能的整数值，以及超过 40 亿个 [your class name here] 可能的值，一些冲突是不可避免的。这就是为什么基于散列的结构（即`Dictionary`）不能完全依赖`GetHashCode`，它还需要一个合理的`Equals`实现才能有效。该`Equals`方法用于解决这些冲突。

当然，类的创建者也有可能覆盖`GetHashCode`或`Equals`在某种程度上犯了一个错误，在某种程度上违反了生成哈希码的“合同”。 [以下](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)`GetHashCode`是创建方法时要牢记的准则列表。*请记住，您必须*做的事情相当少，而另一组事情可以做以使其*有效地*工作。

`return 0;`实际上是一个完全可以接受的`GetHashCode`实现。它符合所有规则，它有 100% 的几率引起碰撞，所以它会非常*低效*，你不应该真的这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:02:24.110

两个不相等的对象具有相同的哈希码是完全合法的，但对于两个相等的对象具有不同的哈希码是无效的。

Dictionary 样式集合类使用 hashcode 值（从指定为键的对象返回的 GetHashCode 值）将键/值对放入 hashbin。键的哈希码值相同的所有键/值对进入相同的哈希箱。如果哈希码生成有效，则意味着字典中每个非空哈希箱中的键/值对将非常少（希望只有一个）。

当您通过指定一个对象作为键来访问字典中的内容时，查找要返回的正确值的伪逻辑是：

1.  获取指定为请求中键的对象的哈希码值 (GetHashCode())
2.  如果该哈希码有一个非空的哈希箱，则迭代该哈希箱中所有键/值对的键对象。对于 hashbin 中的每个键/值对，检查键对象是否等于（）作为请求键传入的对象。如果是，则返回该键/值对中的 Value 对象。

与在 List 样式集合中查找对象相比（当哈希码分布良好时），这就是字典查找非常有效的原因。

# file - .url 文件显示文本而不是访问网站

> ID：12537591
> 
> 赞同：0
> 
> 时间：2012-09-21T20:15:20.390
> 
> 标签：file, url

我在服务器上有 .url 文件，当我单击它们时，我会看到文件的内容，而不是让浏览器转到 url。例如，尝试单击此：

```
http://69.160.61.109/document/116_1.url 
```

url 中的代码： [DEFAULT] BASEURL=http://www.agriculturemorethanever.ca/ [DOC_gform_ajax_frame_3] BASEURL=about:blank ORIGURL=about:blank [InternetShortcut] URL=http://www.agriculturemorethanever.ca/ IDList = IconFile=http://www.agriculturemorethanever.ca/wp-content/uploads/2012/02/favicon1.ico IconIndex=1 [{000214A0-0000-0000-C000-000000000046}] Prop3=19,2

我尝试使用 IE9 和 FF 15。如果我在桌面上下载文件，它会正确打开。

谢谢你的帮助。

卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:26:54.447

“.url”文件是 Windows 特定的文件格式，从 Internet 提供时没有任何意义。

如果您想将访问者发送到另一个网站，您有多种选择。

## 网址重写

如果您使用 mod_rewrite 运行 apache，您可以将其添加到您的 .htaccess 文件中：

```
RewriteRule path-to-file http://example.com/ [R=301,L] 
```

其他 Web 服务器也有类似的选项。

## HTTP 标头

您可以发送 HTTP Location 标头和 301 响应代码。下面的示例使用 PHP，但任何服务器编程语言都具有类似的功能。

```
<?php
header("Location: http://example.com/", true, 301);
exit;
?> 
```

## 元刷新（出于可用性原因不推荐）

这会破坏某些浏览器上的后退按钮，因此请谨慎使用。

```
<html>
<head>
<meta http-equiv="refresh" content="0;URL='http://example.com/'">
</head>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:28:38.357

如今，大多数服务器都托管在 linux 中。并且服务器不会获取请求并且它们不会直接/重定向，除非网络浏览器被告知这样做。在您的情况下， .url 文件只不过是一个包含少量文本的文件。这个相同的文件在下载后可以在 Windows 中使用，因为 .url 文件是 Windows 识别的快捷方式或超链接文件。因此，windows 会自动将您带到该网站。[请在链接http://www.fmtz.com/formats/url-file-format/article](http://www.fmtz.com/formats/url-file-format/article)中阅读有关 .url 文件的更多信息

如果您尝试具有类似的行为，例如单击服务器上的 .url 文件会将您带到相应的 web-url，那么您将不得不实现某种 javascript 技巧或使用 php 服务器端脚本，以便单击 url 文件触发请求 browsersr 将浏览器重定向到 .url 文件中包含的链接。

希望这能回答你的问题。

# c# - 自动获取服务器 IP 给客户端

> ID：12537598
> 
> 赞同：4
> 
> 时间：2012-09-21T20:15:56.343
> 
> 标签：c#, networking, tcp, ip

编写一个聊天程序（就像很多人一样），我发现我希望能够让客户端自动连接到服务器。

但是，服务器的 IP 地址不会是永久的，所以我不能将其硬核到程序中

在 TCP 中，我正在寻找某种广播功能，它允许客户端知道服务器在哪里

有任何想法吗？

编辑：应该说，这将只是一个 LAN 程序 - 没有外部连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:50:57.450

如果您正在谈论局域网中的聊天，并且由于某种原因您不能或不想使用 DNS，您可以实现或找到 UPnP 使用的发现协议的实现。[SSDP](http://en.wikipedia.org/wiki/Simple_Service_Discovery_Protocol)基于UDP 广播。这是，afaik，不可能通过 TCP 多播，因为 TCP 需要一个会话。

如果你想通过互联网使用聊天服务器，你别无选择，只能使用 DNS。寻找动态 dns 提供程序（我使用 selfhost.bz）。然后，在 C# 中，您可以将主机名解析为 IP 地址，如其他答案中所述。如果你有一个主机名来连接它可能足以将它传递给套接字，但是：

```
socket.Connect("myhostname.selfhost.bz", ... 
```

**编辑：**既然您说您在局域网中，请提供有关 SSDP 的更多详细信息。该协议的功能比您实际需要的要多。如果您正在考虑自己实现它，请不要完全坚持。只需让您的客户在指定端口上发送广播即可。服务器会在该端口上永久侦听，并在收到消息后使用预定义的消息进行应答。当客户端收到该答案时，它将知道发件人是有效的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:18:09.437

使用 DNS。在您的应用程序中解析主机名并连接到它解析到的 IP。您需要[动态 DNS](http://en.wikipedia.org/wiki/Dynamic_DNS)，因为您说 IP 不是永久的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:31:46.867

使用以下过程查找服务器 IP 地址

```
 public string GetIPAddress() 
  { 
     string strHostName = System.Net.Dns.GetHostName(); 
     IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName()); 
     IPAddress ipAddress = ipHostInfo.AddressList[0]; 

     return ipAddress.ToString(); 
  } 
```

你也可以使用

```
Request.ServerVariables["LOCAL_ADDR"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T21:18:25.907

我有一个想法：只需让服务器将 IP 地址/端口/任何内容写入（公共）网络上某处的文本文件，客户端就可以读取文本文件

显然，如果文本文件不存在或为空，则没有服务器正在运行......

这是个坏主意吗？

# list - SML "('a list * int) -> ('a list, boolean)"

> ID：12537602
> 
> 赞同：0
> 
> 时间：2012-09-21T20:16:28.763
> 
> 标签：list, tuples, sml

所以这是我的问题：我想创建一个接受一个列表和 int 的函数，然后它递归地在列表中移动，如果它在列表中找到一个等于 int 的元素，那么它应该返回整个列表元素被移除，一个布尔值表示是否移除了某些东西。这是我到目前为止得到的：

```
fun foo ([], n) = ([],false)
  | foo ((x::xs), n) = if x = n 
                       then (xs,true)
                       else ([x] @ foo(xs,n),false); 
```

我的想法是使函数 cons 成为元组中所需的元素，如下所示：

```
([x0] @ [x1] @ [x2] @ [xs], true) 
```

那么有什么办法可以实现这个功能吗？请记住，一旦遇到等于 n 的元素，它就必须停止，但仍保留列表的其余部分，并能够返回布尔值。运行时间是关键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:26:42.267

您当前的代码在逻辑上接近正确，但正如您所知，它不会进行类型检查，因为`[x] @ foo (xs, n)`. `foo`返回一个元组，不能直接附加。以下是解决方法：

```
fun foo ([], n) = ([], false)
  | foo (x::xs, n) = if x = n
                     then (xs, true)
                     else let val (xs', tf) = foo (xs, n) in (x::xs', tf) end 
```

需要从元组中`let`提取列表并找出是否`n`在列表的尾部找到。然后我们简单地将元组与`x`consed 一起放回前面。

# php - 需要一些帮助在 PHP 中制作清单模块

> ID：12537603
> 
> 赞同：0
> 
> 时间：2012-09-21T20:16:30.713
> 
> 标签：php, mysql, database, checkbox

所以我需要为一个网络应用程序制作一个清单，管理员可以在其中为用户编辑一个清单。管理员可以在满足特定条件时检查它们，并在必要时对其进行评论。

我设置了3张桌子：

*   一个用户表，其中存储了所有用户信息，如姓名、出生地等。主键是`user_idnr`
*   然后我有一张名为`CHECKLIST_properties`. 它存储复选框的所有不同项目。它具有以下列：

    property_idnr | 类型 | 描述

*   最后，我有一张名为`CHECKLIST_user_property`. 它用于将属性链接到用户，当创建一行时，它会被选中。它具有以下列：

    链接idnr | user_idnr | property_idnr | 注释

我无法计划如何将选中的复选框保存在数据库中。您需要确定何时需要从表中添加或删除行。谁能给我一些关于如何正确设置的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:39:29.220

我看到了几个选项：

1.  删除所有行并重新添加当前选定的行。这可能会产生意想不到的副作用（新的自动递增数字等）。
2.  添加用于跟踪行状态的列。用于`INSERT ... ON DUPLICATE KEY UPDATE`向表中添加行和/或更新现有行。新/更新的行在新列中将具有不同的值（如时间戳）。然后删除所有具有较旧值的行（因为它们没有被添加/更新，所以不需要它们）。

# ios5 - 将 Xcode 升级到 4.5 后，Restkit 10.0 项目无法为 iOS 5.1 设备编译

> ID：12537605
> 
> 赞同：4
> 
> 时间：2012-09-21T20:16:45.700
> 
> 标签：ios5, restkit, xcode4.5

刚刚升级到 Xcode 4.5。在我的 6.0 模拟器中的应用程序出现错误后，我不得不重新下载 5.1 模拟器。万岁，成功了！但....

当我尝试在装有 iOS 5.1.1 的 iPad1 上运行时，我收到一大堆 restkit 编译错误。

获取：“链接器命令失败，退出代码为 1”

我必须升级到 Resktit 10.3 吗？我在 github 历史上没有看到任何关于 Xcode 4.5 修复的内容......

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T20:23:39.443

好的，刚刚注意到以下警告：

```
ignoring file /Users/.../Library/Developer/Xcode/DerivedData/PlascoTrac-ginlxeicfonetcaicpyggfpyuxrj/Build/Products/Debug-iphoneos/libRestKit.a, file was built for archive which is not the architecture being linked (armv7s): /Users/.../Library/Developer/Xcode/DerivedData/PlascoTrac-ginlxeicfonetcaicpyggfpyuxrj/Build/Products/Debug-iphoneos/libRestKit.a 
```

所以我去了 Restkit 目标并将架构更改为

```
Standard (armv7, armv7s) 
```

瞧！

在这里留下这个问题和答案，因为我在这里看不到确切的等价物，它可能对其他人有用，

干杯。

# android - 如何在非活动类中获取 IP 服务器参数

> ID：12537607
> 
> 赞同：0
> 
> 时间：2012-09-21T20:16:45.317
> 
> 标签：android, ksoap2, android-context

首先让我解释一下我在做什么......

我有一个静态类负责向服务器执行我的申请 SOAP。

在那里，我有一个带有 IP 服务器的静态字符串 URL。

一切正常，工作正常，但是现在，我要部署在客户的商店中，并且我在客户的平板电脑中安装APK时需要配置IP Server...

那是我的问题。如何以编程方式设置 IP 服务器？我有一个“登录”界面，然后我可以像管理模式一样进入并导入数据库并设置IP...

在申请类是一个非活动类，没有任何上下文并且是静态的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:23:47.197

您必须在构造函数中使用 Context 调用它，或者您可以在其中使用静态上下文并从活动中设置它，但当然第一个解决方案是理想的。

然后，您可以将 IP 从您的活动中保存到 shared_preferences 中，并从课程中获取它与您的上下文。

# c# - 为什么我的共享事件处理程序认为处理程序的主名“所有者”始终是发送者？

> ID：12537608
> 
> 赞同：0
> 
> 时间：2012-09-21T20:16:50.770
> 
> 标签：c#, winforms, event-handling, radio-button

我有一个由我的所有单选按钮共享的事件处理程序：

```
private void radioButtonPackers_CheckedChanged(object sender, EventArgs e)
{
    var rb = sender as RadioButton;
    if (rb == radioButtonPackers)
    {
        team = NFCNorth.Packers;
    } else if (rb == radioButtonBears)
    {
        team = NFCNorth.Bears;
    } else if . . .
} 
```

rb 始终被视为 radioButtonPackers，即使在我检查了 radioButtonBears、radioButtonVikings 或 radioButtonLions 单选按钮之后也是如此。

我是否必须做类似的事情：

```
if (radioButtonPackers.Checked)
{
    team = NFCNorth.Packers;
}
else if (radioButtonBears.Checked)
{
    team = NFCNorth.Bears;
}
. . . 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:19:31.070

实际上，它不会以这种方式工作。它必须像`sender`单击任何单选按钮一样接收。您的困惑**可能**与您可以收到两次的事实有关`radioButtonPackers_CheckedChanged`，以防单选按钮被分组，因此当单击一个时，当前一个

*   首先变为未选中（因此引发事件）
*   在出现“新”单选按钮事件之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:26:52.437

是的，您需要查看`.Checked`房产。

第一次单击其中一个单选按钮时，`CheckedChanged`会触发一个事件（用于“打开”按钮）。然后，当您单击同一组中的不同单选按钮时`CheckedChanged`，会触发两个事件，一个用于取消选中第一个单选按钮，另一个用于检查第二个单选按钮。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.radiobutton.checkedchanged.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.radiobutton.checkedchanged.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:27:32.047

我的猜测是您的代码工作正常，但是您看到 CheckedChanged 事件被触发为先前选择的 RadioButton 当它从被选中变为未选中时，在刚刚选择的 RadioButton 得到它的检查（并且事件触发它）之前。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T20:28:52.870

您需要注意`rb.Checked`，但根据我的经验，无论如何您都会在获得“已检查”事件之前获得“未检查”事件。这是一个简短但完整的示例，它有效：

```
using System;
using System.Windows.Forms;

class Program
{
    public static void Main()
    {
        var b1 = new RadioButton { Text = "Button 1" };
        var b2 = new RadioButton { Text = "Button 2" };

        EventHandler handler = (sender, args) => {
            RadioButton button = (RadioButton) sender;
            Console.WriteLine("{0} {1}",
                button.Text,
                button.Checked ? "Checked" : "Unchecked");
        };

        b1.CheckedChanged += handler;
        b2.CheckedChanged += handler;

        var form = new Form {
            Controls = {
                new FlowLayoutPanel {
                    FlowDirection = FlowDirection.TopDown,
                    Controls = { b1, b2 }
                }
            }
        };
        Application.Run(form);
    }    
} 
```

如果您单击按钮 1，然后单击按钮 2，您将看到：

```
Button 1 Checked    
Button 1 Unchecked    
Button 2 Checked 
```

# wordpress - 是否可以从一个站点读取 csrf 令牌以允许访问另一个站点上的内容

> ID：12537611
> 
> 赞同：0
> 
> 时间：2012-09-21T20:17:20.093
> 
> 标签：wordpress, cross-domain, session-state, session-cookies, csrf

这是场景...

我有一个网站：

[http://internet.com](http://internet.com)

当用户成功登录时，我从[http://internet.com](http://internet.com)设置了一个令牌（cookie，类似的东西） 。

我也有[http://web.internet.com](http://web.internet.com)。

在[http://web.internet.com](http://web.internet.com)上，我想向拥有该令牌/cookie/etc 的用户显示数据。

这是用例

*   用户登录[http://internet.com](http://internet.com)（托管在不同服务器上的 asp.net 框架 - 这是我们需要订阅/用户名和登录的主要产品）
*   然后，用户可以访问在[http://web.internet.com](http://web.internet.com)上的公共视图中隐藏的部分（在 goDadday 上托管的 wordpress 站点 - 该站点包含一个我们不想公开的知识库，除非他们已经完成 [XXXXX ])
*   两个站点彼此独立托管，并且不共享共同的用户名和密码 ======

另一种情况是设置 wordpress 以允许特定部分作为 jsonp 响应。但前提是用户在[http://internet.com](http://internet.com)登录以允许用户访问位于[http://web.internet.com的 jsonp 响应](http://web.internet.com)

你们这些漂亮的人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:15:12.943

这实际上取决于您需要的安全级别。您可以使用[wp_set_auth_cookie](http://codex.wordpress.org/Function_Reference/wp_set_auth_cookie)将用户登录到 Wordpress 站点而无需密码，但是如果您只是验证用户已登录到 ASP.NET 站点，然后使用 JSONP 加载设置为 auth cookie 的页面，它将工作，但是你肯定有一些安全漏洞。

更好的解决方案是为 .internet.com 设置一个域级别的 cookie，其令牌可以被您域中的任何服务器读取。然后`is_user_logged_in()`， Wordpress 站点可以检查`wp_set_auth_cookie()`. 一个简单的网络服务可能是最好的选择。您仍然需要在 ASP.NET 和 Wordpress 站点上的用户名之间进行某种级别的映射，但是要知道要传递哪个 user_ID。

# c# - Postgresql 对列名和表名使用替代字符而不是引号

> ID：12537612
> 
> 赞同：3
> 
> 时间：2012-09-21T20:17:22.443
> 
> 标签：c#, postgresql

PostgreSQL表和列名是否可以使用不同的字符而不是"？

就像是：

```
select [TableID], [TableColumn] from [TableName] 
```

或者

```
select 'TableID', 'TableColumn' from 'TableName' 
```

代替：

```
select "TableID", "TableColumn" from "TableName" 
```

我使用 C# 并且每次我需要在将SQL 粘贴到 C# 字符串时替换为，而不是`"`在将 C# 字符串复制到 SQL 管理器时替换。`""``""``"`

我想知道有什么可以使用而不是`"`引用 PostgreSQL 中的名称。

PostgreSQL 中的 CamelCase 需要引用名称，在其他情况下，名称将自动小写 - 我试图避免这种情况。

是的，我需要 PostgreSQL 中的驼峰式表和列名来自动将它们映射到 C# 属性名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:00:47.063

不，这是不可能的。

对象名称唯一允许的引号字符是双引号（根据 SQL 标准的要求）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T18:28:23.073

您可以随时尝试使用转义字符。

```
string sql = "select \"TableID\", \"TableColumn\" from \"TableName\""; 
```

这应该使您能够同时保留双引号并将 sql 添加到字符串中。

但老实说，除非它是带有空格的列名。我几乎从不将引号用于任何内容，而我可能遇到的任何空格，我都会使用下划线。所以我的sql通常看起来像；

```
string sql = "SELECT table_id, table_column FROM table_name"; 
```

# ios - iOS:Unix:Mac 从静态库中提取有关受支持架构的信息。如何？

> ID：12537617
> 
> 赞同：1
> 
> 时间：2012-09-21T20:18:07.743
> 
> 标签：ios, linux, macos, unix, static-libraries

我的 Mac 上有一个静态库，很想知道这个库是否是为 armV7s 架构构建的？是否有任何命令/工具可用于显示此库中支持的架构？

谢谢你，卡姆兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:26:09.370

```
your-mac:~ yourlogin$ file /Path/to/somebinary

/Path/to/somebinary: Mach-O universal binary with 3 architectures
/Path/to/somebinary (for architecture x86_64):    Mach-O 64-bit executable x86_64
/Path/to/somebinary (for architecture i386):      Mach-O executable i386
/Path/to/somebinary (for architecture ppc7400):   Mach-O executable ppc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T20:31:49.103

您可以使用 otool 来获取该信息。

来自 otool 的手册页

> -L 显示目标文件使用的共享库的名称和版本号。以及共享库 ID（如果文件是共享库）。

例子

```
> otool -L libRaptureXML_universal.a 

Archive : libRaptureXML_universal.a (architecture armv7)
libRaptureXML_universal.a(RXMLElement.o) (architecture armv7):
Archive : libRaptureXML_universal.a (architecture i386)
libRaptureXML_universal.a(RXMLElement.o) (architecture i386): 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T20:41:27.080

不同意其他答案，但这里还有一个选择：使用`lipo`命令。

[lipo 的 Apple 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/lipo.1.html)

您可以`lipo -info`在可执行文件或库上运行。一些例子：

```
minime:arc username$ lipo -info libarclite_iphonesimulator.a
input file libarclite_iphonesimulator.a is not a fat file
Non-fat file: libarclite_iphonesimulator.a is architecture: i386

minime:iPhone username$ cd HelloWorld.app/
minime:HelloWorld.app username$ lipo -info HelloWorld
Non-fat file: HelloWorld is architecture: armv7 
```

# selenium - 有没有办法在 Selenium IDE 中将字符串拆分为数组

> ID：12537620
> 
> 赞同：1
> 
> 时间：2012-09-21T20:18:12.213
> 
> 标签：selenium, selenium-ide

我正在尝试拆分字符串“1 out of 20”

有没有办法将 1 存储在一个变量中，将 20 存储在另一个变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:01:16.677

|商店 | 1 出 20 | 正文 |

|商店评估 | "${Text}".split(" ")[0] | 第一节 |

|回声 | ${第一节} | |

[信息] 回声：1

|商店评估 | "${Text}".split(" ")[3] | 最后一节 |

|回声 | ${最后一节} | |

[信息] 回声：20

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:24:06.977

我不是这个领域的专家，但可能这可以帮助你

[Selenium 拆分日期字符串工作示例？](https://stackoverflow.com/questions/9981345/selenium-split-date-string-working-example)

看起来可以通过 Selenium 拆分字符串

# sql - 如何使用占位符将列名值作为 SQL 参数传递

> ID：12537629
> 
> 赞同：2
> 
> 时间：2012-09-21T20:19:07.960
> 
> 标签：sql, sql-server, sql-server-2008, placeholder

如何使用参数占位符将列名值作为 SQL 参数传递？

目标是让这个工作：

```
var sql = "SELECT * FROM Condos WHERE @0 LIKE @1";
var sqlData = db.Query(sql,choice,"%"+searchString+"%"); 
```

`choice`是一个变量，将存储`column name`

`@0`是一个`column name`（我没有成功将它作为参数传递）

`@1`是一个`search string`（我没有问题）

阅读并尝试了很多东西：

下面一个不会抛出任何错误但不会带来任何数据

```
var sql = "SELECT * FROM Condos WHERE @0 LIKE @1";
var sqlData = db.Query(sql,choice,"%"+searchString+"%"); 
```

低于一投`Column name not valid = '@0'`

```
var sql = "SELECT * FROM Condos WHERE [@0] LIKE @1"
var sqlData = db.Query(sql,choice,"%"+searchString+"%"); 
```

低于一投`Column name not valid = 'choice'`

```
var sql "SELECT * FROM Condos WHERE choice LIKE @0");
var sqlData = db.Query(sql,"%"+searchString+"%"); 
```

低于一投`Must declare scalar variable "@choice"`

```
var sql "SELECT * FROM Condos WHERE @choice LIKE @0");
var sqlData = db.Query(sql,"%"+searchString+"%"); 
```

下面一个不会抛出任何错误但不会带来任何数据

```
var sql = "SELECT * FROM Condos WHERE '@choice' LIKE @0";
var sqlData = db.Query(sql,"%"+searchString+"%"); 
```

下面一个不会抛出任何错误但不会带来任何数据

```
var sql = "SELECT * FROM Condos WHERE '@choice' LIKE @0";
var sqlData = db.Query(sql,"%"+searchString+"%"); 
```

下面一个不会抛出任何错误但不会带来任何数据

```
var sql = "SELECT * FROM Condos WHERE '"+choice+"' LIKE @0";
var sqlData = db.Query(sql,"%"+searchString+"%"); 
```

下一个：BIG CRASH

```
var sql = "SELECT * FROM Condos WHERE '"+@choice+"' LIKE @0";
var sqlData = db.Query(sql,"%"+searchString+"%"); 
```

低于一投`Column name not valid = 'NameShort'`

**这正是正确的列名**

```
var sql = "SELECT * FROM Condos WHERE ['"+choice+"'] LIKE @0";
var sqlData = db.Query(sql,"%"+searchString+"%"); 
```

下一个：BIG CRASH

```
var sql = "SELECT * FROM Condos WHERE ['"+@choice+"'] LIKE @0";
var sqlData = db.Query(sql,"%"+searchString+"%"); 
```

**帮助 ！！！！！！！！！！！！！！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:35:01.447

简短的回答是你不能；参数只支持**值**，不支持**列名**。

您要么必须像 Richard 所说的那样依赖直接文本插入（无论是在代码中还是通过使用 SQL Server exec() 函数），或者使用某种库（如 LINQ）来构造查询动态，然后将其转换为文本表示。

如果您采用直接文本插入路线，**请确保您不允许插入直接用户输入；自己做一些翻译**来避免 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:46:04.137

我正在查看您尝试过的内容，而您只是忽略了明显的内容：

```
var sql = "SELECT * FROM Condos WHERE " + choice + " LIKE @1";
var sqlData = db.Query(sql,choice,"%"+searchString+"%"); 
```

您需要对列名进行转义的唯一原因是它是保留字，例如`Order`. 在这种情况下，您将需要使用特定于数据库的标识符转义字符。

例如，MySQL：

```
var sql = "SELECT * FROM Condos WHERE `" + choice + "` LIKE @1";
var sqlData = db.Query(sql,choice,"%"+searchString+"%"); 
```

SQL 服务器

```
var sql = "SELECT * FROM Condos WHERE [" + choice + "] LIKE @1";
var sqlData = db.Query(sql,choice,"%"+searchString+"%"); 
```

# java - 是否可以从另一个类中调用 Java 中争论数不正确的方法？

> ID：12537630
> 
> 赞同：0
> 
> 时间：2012-09-21T20:19:12.963
> 
> 标签：java

我有 2 个 java 类作为单独的 java 文件说，`Class A`和`Class B`

A 类有一个`Method A(1,2)`使用 2 个参数调用的方法。

```
Class A(){
    Method A(1,2)
} 
```

`Class B`创建一个对象`Class A`并尝试`Method A`不带参数访问。

```
Class B(){
    A a = new A()
    a.Method A()
} 
```

这种情况可能吗？如果是这样，我怎样才能在 Java 中实现它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:24:41.483

您可以使用“varargs”语法定义一个 java 方法来接受任意数量的参数，例如

```
public void myMethod(String... s) {
    // s is an array String[]
} 
```

如果存在，可变参数参数必须是最后一个参数。

这些都是调用此方法的有效方法：

```
myMethod(); // in this case the parameter is not null - it's an empty array
myMethod("foo");
myMethod("foo", "bar"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:22:04.200

不，您不能使用错误数量的参数调用方法。事实上，它甚至不应该编译。要么提供不带参数的重载，要么提供默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:21:14.610

您的选择是发送空值或字符串文字，或使用 String ... 表示法（如果参数是字符串）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T20:24:46.080

你显然不能`methodA()`在没有参数的情况下调用`classA`引用，因为`classA`根本就没有`methodA()`没有参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T20:25:01.737

```
Class A(){
   Method A(){
       return Method A(1,2);
   }

   Method A(1,2){
      ...
   }

} 
```

添加一个不带参数的方法，它使用默认值调用 2 参数方法。

希望能帮助到你

# android - Android - 广播接收器不起作用

> ID：12537631
> 
> 赞同：1
> 
> 时间：2012-09-21T20:19:14.813
> 
> 标签：android, broadcastreceiver, forceclose

当我`Force Close`应用程序时，是否会`BroadcastReceiver`一直监听意图？

我有这`BroadcastReceiver`堂课：

```
public class Receiver extends BroadcastReceiver implements Variables {

    CheckConexion cc;

    @Override
    public void onReceive(Context contxt, Intent intent) {

        // Cuando hay un evento, lo diferenciamos y hacemos una acción.

        if (intent.getAction().equals(SMS_RECEIVED)) {
            Sms sms = new Sms(null, contxt);
            sms.uploadNewSms(intent);
        } else if (intent.getAction().equals(Intent.ACTION_BATTERY_LOW)) {
            // st.batterylow(contxt);
        } else if (intent.getAction().equals(Intent.ACTION_BATTERY_CHANGED)) {
            /*
             * try { new PhoneState(contxt).battery(intent.getIntExtra("level",
             * 0)); } catch (JSONException e) { e.printStackTrace(); }
             */// Nothing at the moment
        } else if (intent.getAction().equals(Intent.ACTION_POWER_CONNECTED)) {
            Log.i("******", "Battery on");
        } else if (intent.getAction().equals(Intent.ACTION_POWER_DISCONNECTED)) {
            // st.power(0, contxt);
        } else if (intent.getAction().equals(Intent.ACTION_PACKAGE_ADDED)
                || intent.getAction().equals(Intent.ACTION_PACKAGE_CHANGED)
                || intent.getAction().equals(Intent.ACTION_PACKAGE_REMOVED)) {
            Database db = new Database(contxt);
            if (db.open().Preferences(4)) {
                Uri data = intent.getData();
                new ListApps(contxt).import_app(intent, contxt, data,
                        intent.getAction());
            }
            db.close();
        } else if (intent.getAction().equals(
                ConnectivityManager.CONNECTIVITY_ACTION)) {
            cc = new CheckConexion(contxt);
            if (cc.isOnline()) {

                Database db = new Database(contxt);
                db.open();
                if (db.move() == 1) {
                    new UploadOffline(contxt);
                }
                db.close();

            }
        }

    }

    public void register(Context c) {
        IntentFilter i = new IntentFilter();
        i.addAction(SMS_RECEIVED);
        i.addAction(Intent.ACTION_BATTERY_LOW);
        i.addAction(Intent.ACTION_POWER_CONNECTED);
        i.addAction(Intent.ACTION_POWER_DISCONNECTED);
        i.addAction(Intent.ACTION_CALL_BUTTON);
        i.addAction(Intent.ACTION_CAMERA_BUTTON);
        i.addAction(Intent.ACTION_BATTERY_CHANGED);
        i.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
        c.registerReceiver(this, i);
        IntentFilter apps = new IntentFilter();
        apps.addAction(Intent.ACTION_PACKAGE_ADDED);
        apps.addAction(Intent.ACTION_PACKAGE_CHANGED);
        apps.addAction(Intent.ACTION_PACKAGE_REMOVED);
        apps.addDataScheme("package");
        c.registerReceiver(this, apps);
    }

    public void unregister(Context c) {
        c.unregisterReceiver(this);
    }
} 
```

我打电话给注册，然后我`Force Close`。我想继续`BroadcastRecever`工作并倾听传入的意图。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:23:19.217

强制关闭您的应用程序后，广播接收器将无法工作。这是按设计内置在操作系统中的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:38:50.130

[在清单](http://developer.android.com/guide/topics/manifest/receiver-element.html)中注册您的接收器。然后它将被永久激活（如果您喜欢使用包管理器，您可以手动启用/禁用它）。

# android - 如何删除/排除微调器项目框架？

> ID：12537634
> 
> 赞同：0
> 
> 时间：2012-09-21T20:19:27.363
> 
> 标签：android, spinner, frame

我做了自定义寻找微调项目。但在那之后我意识到仍然有白框（周围的按钮）。它在 pic#2 上更明显，其中按钮图像“更短”。你们知道如何排除白框（不显示它们）吗？

使用的主题：

```
 <?xml version="1.0" encoding="utf-8"?>
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/FrameLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"    
        android:background="@drawable/spinner_select" >

    <TextView
        android:id="@+id/spinnertext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />

    </FrameLayout> 
```

[http://imageshack.us/photo/my-images/402/72449930.png/](http://imageshack.us/photo/my-images/402/72449930.png/) ![在此处输入图像描述](../Images/de278b748940faa98855c833c0fbd2dc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:30:44.823

您可以保留所有按钮，例如：`android:layout_width="fill_parent"`with`android:orientation="vertical"`等`RelativeLayout`按钮将始终更大/更大，而不取决于其中的文本。

# c# - 求用户指定大小的数组的平均值 C#

> ID：12537637
> 
> 赞同：3
> 
> 时间：2012-09-21T20:19:40.717
> 
> 标签：c#, arrays

这是我对一些基本 C# 编程的尝试。该程序旨在询问用户数组的大小，然后填充数组，打印出数组，最后找到他们用来填充数组的数字的平均值。该程序当前无法编译。这是我第一次在没有任何参考书的情况下这样做，所以有人可以帮我解释一下我错过了什么吗？谢谢。编辑：所有程序都可以工作，除了关于查找数组中数字的平均值的部分。此外，如果有任何对于生产级编码不谨慎的愚蠢错误，请告诉我。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace _9_21_Test
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("enter the amount of numbers you would like to find the average of: ");
            int arraylength = Int32.Parse(Console.ReadLine());
            int[] AverageArray = new int[arraylength];

            //filling the array with user input
            for (int i = 0; i < AverageArray.Length; i++)
            {
                Console.Write("enter the numbers you wish to find the average for: ");
                AverageArray[i] = Int32.Parse(Console.ReadLine());

            }
            //printing out the array 
            Console.WriteLine("here is your array: ");
            for(int i=0; i < AverageArray.Length; i++)
            {
                Console.WriteLine(AverageArray[i]);
            }
            Console.WriteLine(FindAverage);
        }

    }
    //Method to find the average is another class for learning porpoises
    class Calcs
    {
        public static double FindAverage(int[] averageNumbers);
        int arraySum=0;

        for(int i =0; i < averageNumbers.Length; int i++)
            arraysum+=arraysum;

       return double average = arraysum/averageNumbers.Length;

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:22:15.847

这里有几个错误：

您的 for 循环不应指定“int”两次，而应添加适当的数字：

```
// for(int i =0; i < averageNumbers.Length; int i++)
// Remove the extra "int", and 
for(int i =0; i < averageNumbers.Length; i++)
{
      // Add in averageNumbers[i], not arraysum
      arraysum += averageNumbers[i];
} 
```

您还需要删除 中的分号`Calcs.FindAverage`，并使其成为用大括号括起来的方法：

```
class Calcs
{
    public static double FindAverage(int[] averageNumbers)
    { // Add brace...

        return //...
    } // Close brace
} 
```

您的 return 语句不需要变量声明：

```
// return double average = arraysum/averageNumbers.Length;
// Just return the value
return arraysum/averageNumbers.Length; 
```

此外，当您调用时`FindAverage`，您需要实际调用该方法，即：

```
 Console.WriteLine(Calc.FindAverage(AverageArray)); 
```

请注意，通常，使用 .NET 4，您可以只使用现有功能。您可以编写以下代码，而不是编写自己的方法：

```
 Console.WriteLine(AverageArray.Average()); 
```

这是使用[Enumerable.Average](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.average.aspx)，这是一种适用于任何 numeric 的扩展方法`IEnumerable<T>`，例如`IEnumerable<int>`（您的数组）。

* * *

请注意，当您在 Visual Studio 中编译它时，错误窗口将列出您的代码中的错误以及说明。您可以双击每个错误，它会将您直接带到导致错误的行。这应该使弄清楚如何修复代码变得相当简单，一次一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:24:37.320

如果您使用的是 .NET 3.5+ 框架，那么您应该使用 LINQ 扩展方法[`Enumerable.Average(IEnumerable<Int32>)`](http://msdn.microsoft.com/en-us/library/bb338413.aspx)而不是重新发明功能:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:25:23.410

改变

```
Console.WriteLine(FindAverage); 
```

到

```
Console.WriteLine(Calcs.FindAverage(AverageArray)); 
```

和

```
class Calcs 
{ 
    public static double FindAverage(int[] averageNumbers); 
    int arraySum=0; 

    for(int i =0; i < averageNumbers.Length; int i++) 
        arraysum+=arraysum; 

   return double average = arraysum/averageNumbers.Length; 

} 
```

到

```
class Calcs 
{ 
    public static double FindAverage(int[] averageNumbers)
    {
        int arraySum=0; 

        for(int i =0; i < averageNumbers.Length; i++) 
            arraySum+=averageNumbers[i]; 

        return arraySum/averageNumbers.Length; 
    } 
} 
```

**如果您想讨论这些概念，我们将非常愿意提供帮助。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T20:25:32.157

```
static class Calc {

    public static double FindAverage(int[] numbers) {

        int sum = 0;

        foreach (int number in numbers) {
            sum += number;
        }

        return sum / numbers.Length;
    }
} 
```

您也可以使用 Linq 轻松做到这一点，但如果您正在学习，最好坚持语言基础知识。

# postgresql - PostgreSQL 事务变量

> ID：12537639
> 
> 赞同：2
> 
> 时间：2012-09-21T20:19:56.543
> 
> 标签：postgresql, concurrency, transactions, postgresql-9.1

[这个问题是对这个问题](https://stackoverflow.com/questions/12502669/how-to-tell-if-record-has-changed-in-postgres)的一种跟进，但它与一个话题不同，我觉得它值得自己讨论。对于一些背景，您可以参考它。

作为新文件导入系统的一部分，我正在构建一个基于此 wiki[页面](http://wiki.postgresql.org/wiki/Audit_trigger_91plus)的审核系统。但是，我想在审计跟踪中包含的一件事是数据来自的文件的文件名（这些文件被存档以进行长期存储，所以如果有问题，我可以随时返回）。

我可以采用的一种方法是创建一个 import_batch 记录并在那里记录文件的名称，然后在记录更新时标记记录。这是我要走的路。但是，它在某种程度上感觉有点笨拙。我一直在考虑尝试让审计触发器能够获取 import_batch_id 而不必在 NEW.* 记录中的想法。在我看来，至少有几种方法可以做到这一点。

1.  我可以有一个函数可以创建一个临时表并在其中存储我想要的任何信息（例如批处理＃或文件名或其他）。这看起来很干净，据我所知，它只会在交易期间有效。据我了解，它不必担心命名冲突。每个事务都有一个名为“tmp_import_info”的临时文件。

2.  如果我只关心 import_batch_id （它有一个序列），我可能只需要得到序列器的当前值。我不是 100% 确定这在多用户设置中会如何表现。我认为 trans#1 可以创建 import_batch_id #222，然后 trans#2 开始并获取 #223。然后我的审计跟踪会记录错误的数据。

还有其他我在这里看不到的选项吗？有没有办法添加事务/会话变量？基本上，类似 pg_settings 的东西（但是，它确实允许插入、更新和删除值）。

感觉最好的选择可能是临时表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:54:23.533

**变体 2.**的主要好消息是 - 在此处引用[手册](http://www.postgresql.org/docs/current/interactive/functions-sequence.html)：

> `currval`
> 
> `nextval`返回当前会话中此序列最近获得的值。（如果`nextval`在此会话中从未为此序列调用过，则会报告错误。）因为这将返回一个会话本地值，所以它给出了一个可预测的答案，即`nextval`自当前会话以来其他会话是否已执行。

将您的导入文件名存储在具有**[`serial`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-SERIAL)主键**的表中。您可以使用或引用序列中*的*最后一个值。**并发用户不能干涉。**只要您不自己在自己的交易中挫败这条路径，这是安全的。`currval``lastval`

# matlab - Matlab GUI编辑框输入不起作用

> ID：12537641
> 
> 赞同：1
> 
> 时间：2012-09-21T20:20:15.817
> 
> 标签：matlab

所以基本上我试图通过在 GUI 的编辑框中按 enter 来直接绘制数据，而不是必须按下与绘制数据相关的按钮。但是我遇到了一个问题，它在提交到按钮之前没有正确更新编辑框句柄（例如，我将输入 23 并按 Enter，这应该绘制 23 个数据周期，但当前寄存器为空字符串）。但是如果我按两次回车，那么它确实会正确执行该功能。我为此得到的代码是：

```
function edit1_KeyPressFcn(hObject, eventdata, handles)
currentKey = get(gcf,'CurrentKey');
if currentKey == 'return'
  pushbutton1_Callback(handles.pushbutton1, eventdata, handles)
  guidata(gcf,handles)
end 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:21:02.933

您使用编辑框上的哪个属性来检索输入的数据？

您应该会发现“字符串”属性与用户输入的内容相匹配，但“值”属性包含编辑开始之前编辑框中的数据。

处理此问题的一种方法是调用：

```
 set(handles.edit1,'value',str2double(get(handles.edit1,'string'))) 
```

在调用按钮回调之前。

# html - 使用 .vtt 格式向 html5 视频字幕添加超链接？

> ID：12537649
> 
> 赞同：1
> 
> 时间：2012-09-21T20:20:40.793
> 
> 标签：html, html5-video, closed-captions

尝试使用 .vtt 格式向 html 视频添加可点击的超链接。

这是示例标题.vtt 文件

```
 WEBVTT

    00:05.100 --> 00:06.000
    [www.stackoverflow.com] // trying to convert this into a clickable link

    00:08.000 --> 00:09.225
    [ Splash...splash...splash splash splash ]

    00:10.525 --> 00:11.255
    [ Splash, Sploosh again ] 
```

这是我的 html5 视频代码

```
 <video id="example_video_1" class="" controls preload="none" width="640" height="264"
  poster=""
  data-setup="{}">
    <source src="video/video1.mp4" type='video/mp4' />
    <source src="video/video1.webm" type='video/webm' />
    <source src="video/video1.ogv" type='video/ogg' />
    <track kind="captions" src="captions.vtt" srclang="en" label="English" />
    </video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T16:26:32.713

可以使用[**video-js player**](http://www.videojs.com/)来完成。在 video-js css 文件或视频所在的 html 文件中，添加一些样式，例如...

```
.video-js .vjs-text-track-display p.bigred {color:#f00;font-size: 36px} 
```

将其应用到您的 vtt 中，如下所示：

```
00:05.100 --> 00:06.000
<p class="bigred">Splash...splash...splash splash splash 
```

它奏效了吗？如果是这样，请将其添加到您的 css 中：

```
.video-js .vjs-text-track-display a:link {color: #00f} 
```

像这样将它添加到您的 vtt 中：

```
00:05.100 --> 00:06.000
<a href="http://www.stackoverflow.com">Click here</a> 
```

适用于 Windows Chrome、Firefox、IE10 及更高版本、Ipad（但不适用于 iphone）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-11T03:44:08.053

[根据此评论](https://github.com/w3c/webvtt/issues/412#issuecomment-379513454)，目前这是不可能的

> 关于字幕中文本的链接——这在 WebVTT 的定义中很早就讨论过，但由于电视字幕没有它而被拒绝。不过我个人认为这是个好主意，所以我们应该在下一个版本的 WebVTT 中讨论这个问题。

# iphone - 使用 iOS6 链接到 Facebook 页面

> ID：12537650
> 
> 赞同：10
> 
> 时间：2012-09-21T20:20:58.273
> 
> 标签：iphone, facebook, ios6

所以我试图从我的应用程序使用链接到 iOS6 上的 Facebook 页面

```
NSString* urlString = @"https://www.facebook.com/vioside";
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: urlString]]; 
```

这成功打开了 Facebook 应用程序，但它没有出现在我的页面上。任何人都知道如何在 iOS6 上正确链接？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T17:53:12.080

问题是您可能不使用短名称。它必须是它当前工作的“id”。

[iOS6 和 facbook URL 无法在 Facebook 应用程序中正确打开](http://barelyrelevant.wordpress.com/2012/10/02/ios6-and-facbook-urls-not-opening-correctly-in-facebook-app/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:00:14.903

我自己通过从网址中删除“www”来解决这个问题。这很有趣，但“www”只是打开 Facebook 应用程序，删除它后，Safari 会打开并查看正确的页面。也许这是一个 iOS6 错误，但这对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:32:49.760

将“www.facebook.com”替换为“m.facebook.com”：

```
NSString* urlString = @"https://m.facebook.com/vioside";
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: urlString]]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T10:51:54.340

它工作正常我测试它像这样： -

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString* urlString = @"https://www.facebook.com/vioside";

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString: urlString]];
} 
```

# java - 导入 com.xuggle.mediatool.IMediaReader。未检测到包裹

> ID：12537652
> 
> 赞同：0
> 
> 时间：2012-09-21T20:21:10.310
> 
> 标签：java

所以我尝试编译[http://www.javacodegeeks.com/2011/02/introduction-xuggler-video-manipulation.html](http://www.javacodegeeks.com/2011/02/introduction-xuggler-video-manipulation.html)给出的 Eclipse 项目，但是当我这样做时，我得到以下错误：

```
ERROR com.xuggle.ferry.JNILibraryLoader - Could not load library: xuggle-xuggler-io; version: 3; Visit http://www.xuggle.com/xuggler/faq/ to find common solutions to this problem
Exception in thread "main" java.lang.UnsatisfiedLinkError: no xuggle-xuggler-io in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at com.xuggle.ferry.JNILibraryLoader.loadLibrary0(JNILibraryLoader.java:265)
    at com.xuggle.ferry.JNILibraryLoader.loadLibrary(JNILibraryLoader.java:168)
    at com.xuggle.xuggler.io.FfmpegIO.init(FfmpegIO.java:74)
    at com.xuggle.xuggler.io.FfmpegIO.<clinit>(FfmpegIO.java:60)
    at com.xuggle.xuggler.io.URLProtocolManager.registerFactory(URLProtocolManager.java:117)
    at com.xuggle.xuggler.io.URLProtocolManager.<init>(URLProtocolManager.java:82)
    at com.xuggle.xuggler.io.URLProtocolManager.<clinit>(URLProtocolManager.java:56)
    at com.xuggle.xuggler.Converter.<clinit>(Converter.java:140)
Could not find the main class: com.xuggle.xuggler.UtilsTest$1\. Program will exit. 
```

我已经有一年多没有使用 java 了，我想知道如何才能恢复这些包？

# sql - 语句包含没有 INTO 子句错误的 OUTPUT 子句

> ID：12537653
> 
> 赞同：7
> 
> 时间：2012-09-21T20:21:12.217
> 
> 标签：sql, azure

我有一个触发器，它使用同一插入记录的身份主键 (MessageId) 的值更新插入的字段 (RootId) 之一。仅当插入记录的 RootId 字段为 0 时才应进行更新。触发器如下所示：

```
ALTER TRIGGER [dbo].[Trigger_RootIdUpdate] 
   ON  [dbo].[Messages] 
   AFTER INSERT
AS BEGIN
   SET NOCOUNT ON;

   DECLARE @MessageId Int

    SELECT @MessageId = I.MessageId         
      FROM INSERTED I
    UPDATE Messages
       SET RootId = @MessageId
     WHERE MessageId = @MessageId AND MessageId = 0

END 
```

我在 Azure 中使用它，当我插入一行时，它给了我以下错误：

> 如果该语句包含没有 INTO 子句的 OUTPUT 子句，则 DML 语句的目标表“dbo.Messagess”不能有任何启用的触发器。

相同的触发器适用于我真正的 MS SQL 2012。我认为设置有所不同，但我不明白它试图告诉我什么。

我是不是把事情复杂化了？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-24T01:02:44.317

我认为这可能与安东尼霍恩所写的有关。

这行得通吗？

```
ALTER TRIGGER [dbo].[Trigger_RootIdUpdate] 
  ON  [dbo].[Messages] 
  AFTER INSERT
AS BEGIN
  UPDATE 
    Messages
  SET 
    Messages.RootId = INSERTED.MessageId 
  FROM Messages Msg
  JOIN INSERTED ON 
    Msg.MessageId = INSERTED.MessageId 
  WHERE 
    Msg.MessageId = INSERTED.MessageId 
    AND INSERTED.RootId = 0;
END 
```

# perl - 如何编写一个覆盖perl中导入函数的模块函数

> ID：12537657
> 
> 赞同：1
> 
> 时间：2012-09-21T20:21:36.457
> 
> 标签：perl

我有一个问题：我想为我的模块 M 编写一个名为“copy”的方法。这个函数是导入函数 File::Copy::copy 的包装器。所以我必须使用 File::Copy::copy 并定义我自己的副本。但它会有一个错误，说副本被重新定义。如何实现我的目标？

```
#M.pm
package M;
use File::Copy;

#... constructor and other methods

sub copy {
  my $self = shift;
  my $target = shift;
  File::Copy::copy($self->{'PATH'},$target);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T20:24:53.873

```
use File::Copy qw( );  # Don't import anything. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T20:29:51.770

我能想到三种方法

1.  该`Subroutine ... redefined at ...`消息只是一个警告，而不是错误。如果您“知道他们在做什么”，请`no warnings "redefine"`在重新定义之前致电。

2.  正如 ikegami 建议的那样，不要导入任何东西。或者不要导入所有内容。你可以逃脱

    `use File::Copy qw(move); # still import move, don't import copy`

3.  在重新定义之前明确取消定义函数。您必须在编译时执行此操作，因此这属于一个`BEGIN`块：

    `BEGIN { undef &copy; }`

    `sub copy { ... # redefinition`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T13:14:39.930

通过在标识符前面加上 ! 在导出列表中，您可以取消导出它。

在下面的示例中`move`以及`copy`被调用。`move`产生错误，因为它找不到指定的文件。`copy`被我们的定义所取代`copy`。如果删除该行，您会发现调用`copy`将导致未定义的函数。

```
% perl <<'EOF'
use File::Copy qw(!copy);

sub copy { print "Hello world!\n" };

move("a", "b") or print "$!\n";
copy("a", "b") or print "$!\n";
EOF
No such file or directory
Hello world! 
```

# wpf - 绑定内容模板

> ID：12537658
> 
> 赞同：1
> 
> 时间：2012-09-21T20:21:45.957
> 
> 标签：wpf, data-binding, mvvm

WPF 和 MVVM 相当新，我正在尝试将 ContentTemplate（或 ItemTemplate，两者都没有工作）绑定到 C# WPF 程序中的 DataTemplate 属性。我这样做是因为我有一个配置文件，它为每个“条目”定义了不同的“条目显示类型”，以便不必制作无数的视图/视图模型（现在，只有一个通用条目视图模型可以跟踪标签，数据和显示类型，我更愿意保持这种方式以避免不必要的类结构膨胀）。有什么办法可以使这项工作？

这是我尝试过的其中一件事的示例：

XAML：

```
<ItemsControl IsTabStop="False" ItemsSource="{Binding Path=FNEntries}"Margin="12,46,12,12">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <ContentControl ContentTemplate="{Binding Path=TypeView}" />
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

CS（在具有 (DataTemplate)TypeView 和 (string)PropertyName 的入口视图模型类构造函数内）：

```
NodeTypeView = (DataTemplate)Application.Current.FindResource("TypeTest"); 
```

资源 XAML：

```
<DataTemplate x:Key="TypeTest">
<TextBlock Margin="2,6">
  <TextBlock Text="{Binding Path=PropertyName}" />
</TextBlock> 
```

当我用它运行时，什么都没有出现。但是，如果我将资源数据模板的内容直接放在内容控件的位置上，一切都会显示得很好（除了它不是我想要的数据驱动方式）。任何帮助/建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:08:00.140

我真的会说你大多做错了=）

将模板存储在 ViewModel 中通常是个坏主意，因为您会将图形对象存储在 VM 中。这应该在视图端完成

如果您想要根据项目类型或其他任何类型的变量 DataTemplate，这里有一些替代的“更清洁”的解决方案：

**先决条件：**您的所有模板都在某处定义为资源。

假设您有`ResourceDictionary`以下内容，用于测试目的：

```
<DataTemplate x:Key="Template1" />
<DataTemplate x:Key="Template2" />
<DataTemplate x:Key="Template3" /> 
```

**解决方案1：使用`ItemTemplateSelector`**

（最干净的解决方案恕我直言）对于这个问题，我会把你重定向到[这个优秀的教程，它教我如何使用它](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector) 如果我能理解它，你绝对不能 =D

**解决方案 2：在您的`Binding`**

让我们稍微改变你的`Binding`，通过使用转换器使其绑定到当前对象本身

```
<DataTemplate>
      <ContentControl ContentTemplate="{Binding Converter={StaticResource MyConverter}}" />
    </DataTemplate> 
```

这是您的转换器的样子（注意：`value`这里的对象是绑定对象，在您的情况下，您正在使用它的类型，所以这个例子也是关于类型的）

```
public class MyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value.GetType() == typeof(WhateverYouWant))
        {
        return (DataTemplate)Application.Current.FindResource("OneTemplate");
        } 
        else if (value.getType() == typeof(AnotherTypeHere))
        {
        return (DataTemplate)Application.Current.FindResource("AnotherTemplate");
        }
        // other cases here...
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value; //We don't care about this!
    }
} 
```

这将为您解决问题

我想这两种解决方案都可以工作，并且更清洁，但请注意，这正是`ItemTemplateSelector`. 该`Converter`方法是我在了解这些模板选择器之前使用的方法，我不再使用它

干杯!

# javascript - 如何使用 jquery 操作动态创建的元素？

> ID：12537660
> 
> 赞同：3
> 
> 时间：2012-09-21T20:21:55.800
> 
> 标签：javascript, jquery, events, dom

我是一个 jquery 新手，我正在用 jquery 创建框，然后“删除”它们。但我想使用相同的代码来删除已创建元素范围内的框和已创建元素范围内的框。

html:

```
<button id="create">Cria</button>
    <div id="main">
        <div class="box">
            <a class="del-btn" href="#">Delete</a>
        </div>
</div> 
```

JS：

```
 var box = {

  create: function() {
      var box = $('<div class="box">');
      var delBtn = $('<a class="del-btn" href="#">Delete</a>');
      box.appendTo('#main');
      delBtn.appendTo(box);
  },

  destroy: function(elem) {
    elem.fadeOut();
  } 

}

function deleteBox () {

}

$(function() {

  $('#create').click(function() {
    box.create();
  });

  $('.del-btn').click(function() {
    var elem = $(this).parent();
    box.destroy(elem);  
    return false;
  });

}); 
```

如果我将删除事件放在创建点击事件中，我就可以删除动态创建的元素。如果我把它放在外面，那么我可以删除 HTML 中的元素。我知道这是一个简单的问题，但我不知道如何解决它。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T20:24:00.230

您可以使用[委托事件方法](http://api.jquery.com/on/)：

```
$("#main").on("click", ".del-btn", function() {
    var elem = $(this).parent();
    box.destroy(elem);  
    return false;
}); 
```

# java - 将 int 添加到 short

> ID：12537661
> 
> 赞同：15
> 
> 时间：2012-09-21T20:21:59.367
> 
> 标签：java

我的一个同事问我这个问题，我有点困惑。

```
int i = 123456;
short x = 12; 
```

该声明

```
x += i; 
```

但是编译得很好

```
x = x + i; 
```

没有

Java 在这里做什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T20:27:13.483

```
int i = 123456;
short x = 12;
x += i; 
```

实际上是

```
int i = 123456;
short x = 12;
x = (short)(x + i); 
```

而`x = x + i`简直就是`x = x + i`。它不会自动转换为 a `short`，因此会导致错误（`x + i`is of type `int`）。

* * *

> 形式的复合赋值表达式`E1 op= E2`等价于`E1 = (T)((E1) op (E2))`，其中`T`是 的类型`E1`，除了`E1`只计算一次。
> 
> [- [**JLS §15.26.2**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T20:29:00.117

整数类型（int、short、char 和 byte）的`+`运算符总是返回一个 int 作为结果。

您可以通过以下代码看到：

```
//char x = 0;
//short x = 0;
//byte x = 0;
int x = 0;
x = x + x; 
```

除非`x`是`int`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T20:25:51.353

`int`除非您以其他方式特别转换它们，否则数字将被视为。因此，在第二个语句中，当您使用文字数字而不是变量时，它不会自动将其转换为适当的类型。

```
x = x + (short)1; 
```

...应该管用。

# ruby - git：从 bitbucket 导出并导入 github（带提交）

> ID：12537669
> 
> 赞同：6
> 
> 时间：2012-09-21T20:22:18.970
> 
> 标签：ruby, git, github, bitbucket

我在 bitbucket 和提交的代码上创建了一个私有 git 存储库。现在我想导出所有（提交、代码、历史）并将其导入 github 上的 git repo。

有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T20:48:48.067

1.  在本地检查所有内容到您的计算机并 git pull。

2.  创建一个 github 存储库

3.  将此 repo 添加为您的第二个遥控器（“使用 git remote add github URL”）

4.  推送到第二个遥控器

# c# - MVC Model.IsValid 用于枚举

> ID：12537676
> 
> 赞同：2
> 
> 时间：2012-09-21T20:23:33.740
> 
> 标签：c#, xml, asp.net-mvc

我有一个由枚举填充的下拉列表的网页。

```
public enum RegionType
{
    State,
    [System.Xml.Serialization.XmlEnumAttribute("County/District")]
    County_District,
    [System.Xml.Serialization.XmlEnumAttribute("City/Town")]
    City_Town,
    Municipality,
    Village
} 
```

下拉列表实际上通过以下方法表示枚举：

```
public static List<string> GetRegionTypes()
{
    List<string> theReturn = new List<string>();
    theReturn.Add("");
    foreach (RegionType s in Enum.GetValues(typeof(RegionType))) {
        theReturn.Add(GetXmlEnumValue(s));
    }
    return theReturn;
} 
```

效果很好，下拉菜单显示正确的值和所有内容。问题在于我具有“xmlenum”属性的 2 个值。如果我选择区域类型“国家/地区”或“城市/城镇”，则模型的“区域类型”属性无法将其转换为 MVC 控制器 POST 操作中的相应枚举。我如何让它正确地进行翻译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:19:04.800

您可以定义以下扩展方法，将枚举类型转换为帮助程序可以使用的 SelectList `DropDownListFor`：

```
public static class EnumExtensions
{
    public static SelectList ToSelectList<TEnum>(this TEnum enumObj)
    {
        var enumType = typeof(TEnum);
        if (enumType.IsGenericType && enumType.GetGenericTypeDefinition() == typeof(Nullable<>))
        {
            enumType = enumType.GetGenericArguments()[0];
        }

        var fields = enumType.GetFields(
            BindingFlags.Static | BindingFlags.GetField | BindingFlags.Public
        );
        var values = Enum.GetValues(enumType).OfType<TEnum>();
        var items =
            from value in values
            from field in fields
            let xmlEnumAttribute = field
                .GetCustomAttributes(
                    typeof(XmlEnumAttribute), true
                )
                .OfType<XmlEnumAttribute>()
                .FirstOrDefault()
            let name = (xmlEnumAttribute != null)
                ? xmlEnumAttribute.Name
                : value.ToString()
            where value.ToString() == field.Name
            select new { Id = value, Name = name };
        return new SelectList(items, "Id", "Name", enumObj);
    }
} 
```

然后很容易。你有一个视图模型：

```
public class MyViewModel
{
    [Required]
    public RegionType? Region { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            Region = RegionType.City_Town
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }
        return Content("Thanks for choosing " + model.Region.Value.ToString());
    }
} 
```

和一个观点：

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.DropDownListFor(x => x.Region, Model.Region.ToSelectList(), "-- Region --")
    @Html.ValidationMessageFor(x => x.Region)
    <button type="submit">OK</button>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:25:45.080

如果它仅用于显示目的，我们使用 Description 属性，（使用 System.ComponentModel）：

```
public enum SelectedAddressType
{
    [Description("Primary Site")]
    PrimarySite = 1, 

    [Description("Registered Office")]
    RegisteredOffice = 2, 

    [Description("Alternative Invoice Address")]
    Alternative = 3
} 
```

显示它：

```
@Html.EnumDropDownListFor(model => model.SelectedInvoiceAddress, new { id = "selInvAdd" }, "Select") 
```

有了这个助手：

```
 public static MvcHtmlString EnumDropDownListFor<TModel, TEnum>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TEnum>> expression, object htmlAttributes, string selectItem)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
        Type enumType = GetNonNullableModelType(metadata);
        IEnumerable<TEnum> values = Enum.GetValues(enumType).Cast<TEnum>();

        IEnumerable<SelectListItem> items = from value in values
                                            select new SelectListItem
                                            {
                                                Text = GetEnumDescription(value),
                                                Value = value.ToString(),
                                                Selected = value.Equals(metadata.Model)
                                            };

        // If the enum is nullable, add an 'empty' item to the collection
        if (metadata.IsNullableValueType)
            items = SingleEmptyItem.Concat(items);

        if(!string.IsNullOrEmpty(selectItem))
            return htmlHelper.DropDownListFor(expression, items, selectItem, htmlAttributes);

        return htmlHelper.DropDownListFor(expression, items, htmlAttributes);
    } 
```

# c - 将参数传递给生成的进程在 C 中不起作用

> ID：12537678
> 
> 赞同：1
> 
> 时间：2012-09-21T20:23:41.987
> 
> 标签：c, string, pointers, embedded

我需要将两个地址（32 位）传递给由 C 中的 execl 命令生成的进程，如下所示。在第一个程序中：

```
 char buffer[18];
  sprintf (&buffer[0],"%x\0 %x\0",lock, count);
  arg_list[0]=&(buffer[0]);
  arg_list[1]=&(buffer[10]);
  execl ("/somedirectory/second_process", arg_list[0], arg_list[1], NULL); 
```

然后在我的第二个程序中，我尝试按如下方式解析地址：

```
 if (argc != 2) {
      printf ("PROCESS 2: Invalid number of arguments. Terminating %i\n", argc);
      return -1;
  }

 if ( !(sscanf (argv[1],"%x",&lock)) || !(sscanf (argv[2],"%x",&count)) ) {
      printf ("PROCESS 2: Problem with parameters passed in");
      return -1; 
```

但是我的程序一直报错，说传入的参数无效。当我尝试打印收到的参数时，我的程序挂起。

```
 printf ("The arguments passsed in are %s %s", argv[1], argv[2]); 
```

固定的：

我错误地调用了 execl。它应该是：

```
 execl ("/somedirectory/second_process", "second_process" arg_list[0], arg_list[1], NULL); 
```

同样在过程2中：

```
 if (argc != 3) {
      printf ("PROCESS 2: Invalid number of arguments. Terminating %i\n", argc);
      return -1;
  } 
```

因为传入的第一个参数应该是下面 Chris 建议的进程名称。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:29:20.223

数组在 C 中始终为 0，因此您的两个参数将是`argv[0]`and `argv[1]`，并且`argv[2]`将是空指针，因此 sscanf 将失败、崩溃或挂起。

现在*通常*您应该始终将程序名称作为第一个 ( `argv[0]`) 参数传递。所以你要：

```
execl ("/somedirectory/second_process", "second_process", arg_list[0], arg_list[1], NULL); 
```

也就是说，您实际上应该传递三个参数（所以`argc == 3`在第二个程序中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:25:49.507

在你的情况下`argc`将是三个。执行文件的名称始终是第一个参数。

# javascript - window.popstate 后如何恢复原始内容？

> ID：12537683
> 
> 赞同：1
> 
> 时间：2012-09-21T20:24:04.587
> 
> 标签：javascript, jquery, html, html5-history

以下代码继续将新 URL 推送到状态对象，同时动态更改页面内容。但是，当我开始按下`Back`按钮并返回原始页面时，不会显示原始内容，而是保留下一页的内容。我如何实现它？

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
a = 0;
  $("p").click(function(){
var stateObj = { note : ++a };
history.pushState(stateObj, "page 2", "http://localhost/foo/"+a);
$(this).text(a);    
  });
  window.addEventListener('popstate', function(e){
  if (history.state){
    $("p").text(e.state.note);
if (location.href == 'http://localhost/hist.php') { $('p').text('If you click on me, I will disappear.'); }
   }
 }, false);
$("div").click(function() { alert(e.state.note); });
  });
</script>
</head>
<body>
<p>If you click on me, I will disappear.</p>
<div>Hi</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T18:31:39.647

It is your responsability to update the page content on `popstate`. The browser only handles the state.

I had an application, where I replace the main content of a page while navigation through an menu tree. I also updated the page title according to the new content.

When I just go back an forth in AJAX loaded pages, I can save the url to load in the `StateObj`. But on going back to the initial page, there is no state, and no saved title to restore.

I decided to reload the whole page, when I go back to the initial history state:

```
var doc_state={'title': ''};
var popped = ('state' in window.history && window.history.state !== null), initialURL = location.href;
function loadDocument(path,title){
    $('#document_area').html('<img src="spinner.gif" />');
    $('#document_area').load(path+'?ajax=true');
    document.title = title;
}

$(document).ready(function(){
    $('a.ajax_link').click(function(event){
        var path=$(this).attr('href');
        var title=$(this).text();
        doc_state['title']=title;
        event.preventDefault();
        loadDocument(path,title);
        window.history.pushState(doc_state,document.title,path);
    });
    $(window).bind('popstate', function(event){
        // Ignore inital popstate that some browsers fire on page load
        var initialPop = !popped && location.href == initialURL;
        popped = true;
        if ( initialPop ) return;

        var state = event.state;
        if (!state){
            state=history.state; // FF
        }

        if (state){
            var title= state.title;
            loadDocument(location.pathname, title);
        }
        else window.location.reload();

    });
} 
```

# python - 来自 tornado.httpclient.AsyncHTTPClient 的 PUT 请求

> ID：12537688
> 
> 赞同：2
> 
> 时间：2012-09-21T20:24:29.120
> 
> 标签：python, tornado, urllib

有没有办法在 tornado httpclient 中执行 PUT 请求？

例如，有什么方法可以替换`urllib`为[Requests Library](http://docs.python-requests.org/en/latest/index.html#)？

或者也许子类化自己的客户端并从[这个](https://stackoverflow.com/questions/111945/is-there-any-way-to-do-http-put-in-python)答案中注入构造：

```
import urllib2
opener = urllib2.build_opener(urllib2.HTTPHandler)
request = urllib2.Request('http://example.org', data='your_put_data')
request.add_header('Content-Type', 'your/contenttype')
request.get_method = lambda: 'PUT'
url = opener.open(request) 
```

任何无痛补丁，黑客，建议..

我希望这种结构能够正常工作：

```
 response = yield gen.Task(http_client.fetch, opt.site_url + '/api/user/', method="PUT", body=urlencode(pdata)) 
```

现在它不是发送身体。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T07:25:03.043

不，Tornado 不使用 urllib（可能会阻塞）。将 httpclient 用于比基本 GET 更复杂的事情的技巧是创建一个[HTTPRequest](http://www.tornadoweb.org/documentation/httpclient.html#request-objects)。

未经测试，但应该可以工作：

```
from tornado.httpclient import HTTPRequest
request = HTTPRequest(opt.site_url + '/api/user/', method="PUT", body=urlencode(pdata))
response = yield gen.Task(http_client.fetch, request) 
```

# java - Java MySQL IndexOutOfBounds 错误

> ID：12537693
> 
> 赞同：1
> 
> 时间：2012-09-21T20:24:40.183
> 
> 标签：java, mysql, jsp, servlets

为什么我会收到此错误：

java.lang.IndexOutOfBoundsException：索引：4，大小：4

我没有定义任何东西，并且在另一个运行良好的 servlet 上使用了相同的逻辑。在我的另一个 servlet 中，我选择了所有产品，所以我使用了两个数组列表：一个在另一个里面。我在这里尝试过，但仍然有同样的错误。我清楚地理解了这个错误，但我不知道如何用这种语法解决它。

谢谢你。

```
ConnectionPool pool = ConnectionPool.getInstance();
Connection connection = pool.getConnection();
PreparedStatement ps = null;
ResultSet rs = null;

int product_id =Integer.parseInt(req.substring(req.lastIndexOf("/")+1));  

ArrayList al = null;
String query = "select * from Product where product_id="+product_id;

try {
    ps = connection.prepareStatement(query);
    rs = ps.executeQuery(query);

    while (rs.next()) {
        al = new ArrayList();

        al.add(rs.getString("product_id"));
        al.add(rs.getString("product_name"));
        al.add(rs.getString("product_description"));
        al.add(rs.getDouble("product_price"));
    } 
```

此 servlet 的下一个 JSP 页面是：

```
 <%! 
        String product_id=""; 
        String product_name=""; 
        String product_description=""; 
        double product_price = 0; 
    ArrayList  productList=null; 
    %> 

    <% 
    if(request.getAttribute("productList")!=null && request.getAttribute("productList")!="") { 
        productList = (ArrayList)request.getAttribute("productList"); 
        product_id = productList.get(1).toString(); 
        product_name = productList.get(2).toString(); 
        product_description = productList.get(3).toString(); 
        product_price = (Double) productList.get(4);
    } 
    %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:29:03.283

你可能在这条线上得到了那个例外

```
int product_id =Integer.parseInt(req.substring(req.lastIndexOf("/")+1)); 
```

从您的代码来看，这可能是唯一的情况。当您在 req 上调用 subString() 时，索引超出范围。最好的测试是把一个系统输出到 req 的长度

**发布堆栈跟踪后编辑**

将您的 java 代码更改为此 al = new ArrayList();
while (rs.next()) { al.add(rs.getString("product_id")); // 存储在索引 0 的 al 中 al.add(rs.getString("product_name"));// 存储在索引 1 的 al 中 al.add(rs.getString("product_description"));// 存储在索引 2 处的 al.add(rs.getDouble("product_price"));// 存储在索引 3 处的 al }

这是它抛出异常的地方

```
 line1:  product_id = productList.get(1).toString(); 
 line2:               product_name = productList.get(2).toString(); 
 line3:               product_description = productList.get(3).toString(); 
 line4               product_price = (Double) productList.get(4); /// its going indexoutfbound    here 
```

您的列表只有 4 个元素，您正在尝试使用上述代码获取第 5 个元素。}

将它们更改为

```
 product_id = productList.get(0).toString(); 
                product_name = productList.get(1).toString(); 
                product_description = productList.get(2).toString(); 
                product_price = (Double) productList.get(3);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T20:29:18.433

```
int product_id =Integer.parseInt(req.substring(req.lastIndexOf("/")+1)); 
```

如果你有这样的网址： [http ://www.yahoo.com/](http://www.yahoo.com/)

lastIndexOf 会给你 21 和 +1 给 22 超出范围。

**编辑：** 粘贴 servlet 页面后，我注意到您似乎对访问 arrayList 的索引感到困惑。您从 0 而不是 1 IIRC 开始。所以：

```
if(request.getAttribute("productList")!=null && request.getAttribute("productList")!="") 
    { 
                    productList = (ArrayList)request.getAttribute("productList"); 
                    product_id = productList.get(1).toString(); 
                    product_name = productList.get(2).toString(); 
                    product_description = productList.get(3).toString(); 
                    product_price = (Double) productList.get(4);
    } 
```

是

```
 if(request.getAttribute("productList")!=null && request.getAttribute("productList")!="") 
        { 
                        productList = (ArrayList)request.getAttribute("productList"); 
                        product_id = productList.get(0).toString(); 
                        product_name = productList.get(1).toString(); 
                        product_description = productList.get(2).toString(); 
                        product_price = (Double) productList.get(3);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:05:39.850

错误是这样的：

```
**java.lang.IndexOutOfBoundsException: Index: 4, Size: 4**
 at java.util.ArrayList.RangeCheck(ArrayList.java:547)
 at java.util.ArrayList.get(ArrayList.java:322)
 at org.apache.jsp.admin.editproduct_jsp._jspService(editproduct_jsp.java:82) 
```

并且说当arraylist只有4个元素时它试图获取元素号5（索引= 4）。似乎此堆栈跟踪不是您在帖子中显示的代码的错误。我的猜测是，当循环只有 4 个元素并试图获得第五个元素的“a1”ArrayList 时，稍后会出现错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T20:28:49.877

```
while (rs.next()) {
        al = new ArrayList();

        al.add(rs.getString("product_id"));
        al.add(rs.getString("product_name"));
        al.add(rs.getString("product_description"));
        al.add(rs.getDouble("product_price"));
    } 
```

您正在循环内初始化数组列表。这也可能是一个问题，如果不是，如果这不是您所期望的，可能会产生问题。答案是别人给出的我猜

# javascript - ios6画布高分辨率y值

> ID：12537703
> 
> 赞同：3
> 
> 时间：2012-09-21T20:25:21.877
> 
> 标签：javascript, html, canvas, mobile-safari, ios6

我有一个最近在 iOS6 上被破坏的 html5 webapp。我们采用高分辨率 jpeg 图像并将其渲染到画布元素上。我们首先加载较低分辨率的缩略图作为占位符，而较高分辨率的 jpeg 在后台下载。在 iOS6 中，高分辨率图像一旦加载就会超出 y 维度的纵横比。这是我作为测试创建的示例页面，它只是在缩略图和高分辨率图像之间切换：

[http://www.video-monitoring.com/beachcams/jupiter/canvas.htm](http://www.video-monitoring.com/beachcams/jupiter/canvas.htm)

如果您在 iOS6 上对此进行测试，您会看到高分辨率图像被压扁。

这是javascript代码：

```
 var imgCanvas;
    var imgContext;
    var downloader = new Image();
    var w = 400;
    var h = 300;
    var hq = true;
    var lqUrl = "http://www.video-monitoring.com/beachcams/jupiter/pics/s2/sep0112k/s211403_.jpg";
    var hqUrl = "http://www.video-monitoring.com/beachcams/jupiter/pics/s2/sep0112k/s211403w.jpg";

    window.onload = function () {
        imgCanvas = document.getElementById('canvas');
        imgContext = imgCanvas.getContext('2d');
        downloader.onload = imageOnLoad;
        downloader.src = hqUrl;
    }

    function imageOnLoad() {
        imgContext.clearRect(0, 0, w, h);
        imgContext.drawImage(downloader, 0, 0, w, h)
    }

    function btnClick() {
        hq = !hq;
        if (hq) downloader.src = hqUrl;
        else downloader.src = lqUrl;
    } 
```

这是html：

```
 <input type="button" name='changeres' id='changeres' onclick="btnClick()" value='Change Resolution' />
<canvas width="2000px" height="1000px"  id="canvas">

</canvas> 
```

所以我的问题是 iOS6 发生了什么变化，现在渲染不正确？我正在做的事情不是标准的吗？它可以在所有其他浏览器上正确呈现。它适用于iOS5。这是 webapp 的生产版本：http: [//www.video-monitoring.com/beachcams/jupiter/slideshow.htm](http://www.video-monitoring.com/beachcams/jupiter/slideshow.htm)

# android - 从 onContextItemSelected () 上的列表中获取值？

> ID：12537707
> 
> 赞同：2
> 
> 时间：2012-09-21T20:25:36.070
> 
> 标签：android, android-layout

您好想知道我们能否从 onContextItemSelected() 中的数据库中获取列表中定义的字段的值，例如 id？我创建上下文菜单的代码固定在下面，感谢帮助，谢谢

```
 public boolean onContextItemSelected(MenuItem item) {

    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();
    long clickedPosition = info.id;

    switch (item.getItemId()) {
    case NEW_MENU_ITEM:
        //callActivity(1);
        break;
    case SAVE_MENU_ITEM:
        //callActivity(2);
        break;
    }
    return super.onContextItemSelected(item);
}
@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, view, menuInfo);
    menu.setHeaderTitle("Options");
    menu.add(0, NEW_MENU_ITEM, 0, "Delete");
    menu.add(0, SAVE_MENU_ITEM, 1, "Rename");
} 
```

以下代码不会从数据库中停用我的 ID

```
long clickedPosition = info.id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-11T17:10:29.430

```
 @Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();

    Object obj = getListView().getItemAtPosition(info.position);
    String name = obj.toString();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T19:58:43.670

`int id= info.position` 您可以通过添加in来检索此列表中元素的位置 `onContextItemSelected`；

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:40:05.770

该字段中返回的值完全取决于您的适配器实现。它与`id`传递给 的相同，它是适配器`OnItemClickListener`返回的值。`getItemId()`

如果您正在使用`CursorAdapter`或它的变体向列表提供数据，则该`_id`列是默认返回的值，除非您修改了此方法。对于`ArrayAdapter`，情况并非如此，您必须添加代码以返回所需的 ID。如果您需要传回比单个 更复杂的数据`int`，您可以在列表项视图上设置一个标签，`setTag()`并从中检索它，`ContextMenuInfo`因为`targetView`它是它携带的参数之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-03T06:10:39.310

> 将 database_id 设置为您的 lisviewItem 视图的标记。

```
 view.setTag(database_id ); 
```

并从 onContextItemSelected(MenuItem item) 获取 database_id 作为

```
 @Override
    public boolean onContextItemSelected(android.view.MenuItem item) {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item
                .getMenuInfo();
        int listPosition = info.position;

        switch (item.getItemId()) {

        case call:

            View view = info.targetView;
            String database_id=(String) view.getTag();
            return true;
        case defaullt: 
            return true;

        }
        return super.onContextItemSelected(item);
    } 
```

# c# - C#中的多个条件赋值？

> ID：12537713
> 
> 赞同：1
> 
> 时间：2012-09-21T20:25:54.730
> 
> 标签：c#

好的，如果我有一个字符串，我希望基于多个条件等于某个字符串，那么实现它的最佳方法是什么？

伪代码

```
int temp = (either 1, 2, or 3)
string test = (if temp = 1, then "yes") (if temp = 2, then "no") (if temp = 3, then "maybe") 
```

有没有一些简洁的方法来做到这一点？你会怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T20:27:42.730

使用[开关](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.80%29.aspx)

```
switch(temp)
{
    case 1:
        return "yes";
    case 2:
        return "no";
    case default:
        return "maybe";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T20:31:40.390

您可以使用其他答案中提到的 switch 语句，但也可以使用字典：

```
var dictionary = new Dictionary<int, string>();
dictionary.Add(1, "yes");
dictionary.Add(2, "no");
dictionary.Add(3, "maybe");

var test = dictionairy[value]; 
```

这种方法比 switch 语句更灵活，并且比嵌套的三元运算符语句更具可读性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T20:30:00.970

```
string test = GetValue(temp);

public string GetValue(int temp)
{
  switch(temp)
  {
    case 1:
      return "yes";

    case 2:
      return "no";

    case 3:
      return "maybe";

    default:
      throw new ArgumentException("An unrecognized temp value was encountered", "temp");
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T20:27:34.157

你可以使用一个`switch`语句

```
string temp = string.Empty;
switch(value)
{
    case 1:
        temp = "yes";
        break;
    case 2:
        temp = "no";
        break;
    case 3:
        temp = "maybe";
        break;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T20:31:33.373

基本思想是：

```
String choices[] = {"yes","no","maybe"};
string test = choices[temp-1]; 
```

有许多不同的方法来实际实现它。根据您的条件变量是什么，您可能希望将其实现为某种键值列表。例如，请参阅 Zeebonk 的答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T20:29:13.390

最简洁的答案是嵌套三元运算符

```
string test = (temp == 1 ? "yes" : (temp == 2 ? "no" : (temp == 3 ? "maybe" : ""))); 
```

如果温度值只有 1,2,3 那么

```
string test = (temp == 1 ? "yes" : (temp == 2 ? "no" : "maybe")); 
```

当然，这是所要求的简洁答案，但这并不意味着它是最好的。如果您不能排除这一点，那么将来您将需要更多的值来测试，那么最好使用@zeebonk 答案中解释的字典方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-21T20:42:19.560

此开关更接近您的伪代码，并且是精确的 C# 代码：

```
int temp = /* 1, 2, or 3 */;
string test;
switch(temp)
{
    case 1:
        test = "yes";
        break;
    case 2:
        test = "no";
        break;
    case 3:
        test = "maybe";
        break;
    default:
        test = /* whatever you want as your default, if anything */;
        break;
} 
```

您的伪代码不包含默认情况，但最好包含默认情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-21T20:30:21.340

显而易见的答案是开关盒

但只是另一种味道：

```
int temp = x; //either 1,2 or 3

string test = (temp == 1 ? "yes" : temp == 2 ? "no" : "maybe"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-21T21:31:15.110

你也可以扭转局面：

```
class Program
{
    enum MyEnum
    {
        Yes = 1, 
        No, 
        Maybe
    }

    static void Main(string[] args)
    {
        Console.WriteLine(MyEnum.Maybe.ToString());
        Console.ReadLine();
    }
} 
```

这也更符合 temp 只能是 1、2 或 3。如果它是 int 编译器，如果 temp 的值为 34，编译器不会警告您。

你也可以这样做：

```
string GetText(int temp){ 
    return ((MyEnum)temp).ToString();
} 
```

GetText(2) 将返回“否”

# xcode - 代码签名应用程序选项

> ID：12537714
> 
> 赞同：1
> 
> 时间：2012-09-21T20:26:04.260
> 
> 标签：xcode, code-signing

Xcode 4.5 中应用程序目标的摘要面板中的“签名 - 代码签名应用程序”选项复选框需要什么？
在分发应用程序时，它不是消除所有这些代码设计头痛的神奇选项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:33:26.883

与 iOS 应用不同，桌面应用无需签名即可在机器上运行。打开它意味着您将使用代码签名。

如果您通过 Mac App Store 分发，则需要使用 Apple 证书对您的应用程序进行签名。

如果您自己分发您的应用程序，您可以选择是否使用 Apple 证书对您的应用程序进行签名。尽管 Mountain Lion (OS X 10.8) 上有一些设置可以设置为只允许已签名的应用程序（甚至只允许来自 Mac App Store 的应用程序）。

所以不行。该复选框不会消除代码设计的“头痛”，它只是打开或关闭该选项。

# python - 为什么切片分配比`list.insert`更快？

> ID：12537716
> 
> 赞同：21
> 
> 时间：2012-09-21T20:26:10.207
> 
> 标签：python, performance, optimization, python-internals

受[这个好答案](https://stackoverflow.com/a/12537489/748858)的启发，

这是一个基准：

```
import timeit

def test1():
    a = [1,2,3]
    a.insert(0,1)

def test2():
    a = [1,2,3]
    a[0:0]=[1]

print (timeit.timeit('test1()','from __main__ import test1'))
print (timeit.timeit('test2()','from __main__ import test2')) 
```

对我来说，`test2`速度稍快（~10%）。为什么会这样？我希望它会慢一些，因为：

1.  切片分配必须能够接受任何长度的迭代，因此必须更通用。
2.  在切片分配中，我们需要在右侧创建一个新列表才能使其正常工作。

任何人都可以帮助我理解这一点吗？

*（在 OS-X 10.5.8 上使用 python 2.7）*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T20:42:05.373

您的第一个测试用例必须调用`insert`list 上的方法`a`，而其中的所有操作`test2`都直接在字节码中处理。注意下面`CALL_FUNCTION`的反汇编`test1`。在 Python 中调用函数的成本适中：当然成本足以解释运行时间的几个百分点差异。

```
>>> import dis
>>> dis.dis(test1)
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 LOAD_CONST               3 (3)
              9 BUILD_LIST               3
             12 STORE_FAST               0 (a)

  3          15 LOAD_FAST                0 (a)
             18 LOAD_ATTR                0 (insert)
             21 LOAD_CONST               4 (0)
             24 LOAD_CONST               1 (1)
             27 CALL_FUNCTION            2
             30 POP_TOP             
             31 LOAD_CONST               0 (None)
             34 RETURN_VALUE        
>>> dis.dis(test2)
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 LOAD_CONST               3 (3)
              9 BUILD_LIST               3
             12 STORE_FAST               0 (a)

  3          15 LOAD_CONST               1 (1)
             18 BUILD_LIST               1
             21 LOAD_FAST                0 (a)
             24 LOAD_CONST               4 (0)
             27 LOAD_CONST               4 (0)
             30 STORE_SLICE+3       
             31 LOAD_CONST               0 (None)
             34 RETURN_VALUE 
```

### 不好的解释

我先发布了这个，但经过考虑，我认为它是不正确的。我在这里描述的差异只有在需要移动大量数据时才会产生明显的差异，而这里的测试并非如此。即使有很多数据，差异也只有百分之几：

```
import timeit

def test1():
    a = range(10000000)
    a.insert(1,1)

def test2():
    a = range(10000000)
    a[1:1]=[1]

>>> timeit.timeit(test1, number=10)
6.008707046508789
>>> timeit.timeit(test2, number=10)
5.861173868179321 
```

该方法`list.insert`由 中的函数[`ins1`](http://hg.python.org/cpython/file/3e677956eef4/Objects/listobject.c#l239)实现`listobject.c`。您会看到它一一复制列表尾部的项目引用：

```
for (i = n; --i >= where; )
    items[i+1] = items[i]; 
```

另一方面，切片分配由函数实现，该函数[`list_ass_slice`](http://hg.python.org/cpython/file/3e677956eef4/Objects/listobject.c#l578)调用`memmove`：

```
memmove(&item[ihigh+d], &item[ihigh],
        (k - ihigh)*sizeof(PyObject *)); 
```

所以我认为你的问题的答案是 C 库函数`memmove`比简单循环更优化。请参阅[此处了解 glibc 的实现`memmove`](http://sourceware.org/git/?p=glibc.git;a=blob;f=string/memmove.c;h=ede27ffcf2cf4f70e7dc259a754abf5f37550f08;hb=HEAD)：我相信，当从中调用时`list_ass_slice`，最终会调用[`_wordcopy_bwd_aligned`](http://sourceware.org/git/?p=glibc.git;a=blob;f=string/wordcopy.c;h=b171f27c65388f1f629a42d05a8cd1c80e2cf286;hb=HEAD#l219)，您可以看到它是经过大量手动优化的。

# ssl - 想知道 JDO DataNucleus 是否支持 LDAP 的 SSL？

> ID：12537726
> 
> 赞同：1
> 
> 时间：2012-09-21T20:27:17.230
> 
> 标签：ssl, ldap, jdo, datanucleus

通常，我们在初始化 ldap 上下文以获取 ssl 连接时，通过属性传递我们的自定义套接字工厂。想知道在获得持久性管理器工厂时是否可以通过 JDO 实现相同的功能。

# symfony - 学说2：未定义的索引 - 非默认引用的多对一不会保留实体

> ID：12537745
> 
> 赞同：5
> 
> 时间：2012-09-21T20:29:08.963
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我正在使用 Symfony 2.1.2。

我有两个实体并在它们之间定义 [多对一（双向）] (1) 关联。我不想将主键用作外键（referencedColumnName）。我想使用另一个整数唯一列：customer_no

```
/**
 * @ORM\Entity
 * @ORM\Table(name="t_myuser")
 */
class MyUser extends BaseEntity // provides an id (pk)
{
    /**
     * @ORM\ManyToOne(targetEntity="Customer", inversedBy="user")
     * @ORM\JoinColumn(name="customer_no", referencedColumnName="customer_no", nullable=false)
     */
    public $customer;
}

/**
 * @ORM\Entity
 * @ORM\Table(name="t_customer")
 */
class Customer extends BaseEntity // provides an id (pk)
{
    /**
     * @ORM\Column(type="integer", unique=true, nullable=false)
     */
    public $customer_no;

    /**
     * @ORM\OneToMany(targetEntity="MyUser", mappedBy="customer")
     */
    public $user;
} 
```

当我尝试将 MyUser 实体与 Customer 实体持久化时，我收到此错误：

注意：未定义索引：customer_no in ...\vendor\doctrine\orm\lib\Doctrine\ORM\Persisters\BasicEntityPersister.php 行 608

db 上的架构看起来不错，这些应该是重要的 sql 架构定义：

```
CREATE UNIQUE INDEX UNIQ_B4905AC83CDDA96E ON t_customer (customer_no);
CREATE INDEX IDX_BB041B3B3CDDA96E ON t_myuser (customer_no);
ALTER TABLE t_myuser ADD CONSTRAINT FK_BB041B3B3CDDA96E FOREIGN KEY (customer_no) 
  REFERENCES t_customer (customer_no) NOT DEFERRABLE INITIALLY IMMEDIATE; 
```

所以肯定**有****customer_no**的索引

 ****//更新：** 我修复了 inversedBy 和 mappedBy 的东西，但这不是问题。

(1) : [http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:43:04.770

**@m2mdas：**
是的，您是对的，我认为这是可能的，因为[JPA（对学说有影响）具有此功能](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-manytoone)。该属性`referencedColumnName`仅适用于您的属性与表列不匹配的情况。

不管怎样，我通过修补 BasicEntityPersister.php 找到了解决方案，请参阅 github 上的要点：[https ://gist.github.com/3800132](https://gist.github.com/3800132)

解决方案是为映射列添加属性/字段名称和值。此信息已经存在，但未绑定到正确的位置。它必须以这种方式添加到**$newValId**数组中：

```
$fieldName = $targetClass->getFieldName($targetColumn);
$newValId[$fieldName] = $targetClass->getFieldValue($newVal, $fieldName); 
```

它仅适用于 ManyToOne 参考。**多对多不起作用。**
对于 ManyToOne，我使用已经存在的实体对其进行测试。你也可以测试它：

将教义注释`tests/Doctrine/Tests/Models/Legacy/LegacyArticle.php`
从

```
@JoinColumn(name="iUserId", referencedColumnName="iUserId") 
```

到

```
@JoinColumn(name="username", referencedColumnName="sUsername") 
```**

# javascript - 如何找到两个不同的数字之间的数值差异？

> ID：12537750
> 
> 赞同：-2
> 
> 时间：2012-09-21T20:29:21.003
> 
> 标签：javascript

这是我的页面：[http ://digidreamers.com/marketing/seo/microstrategy/](http://digidreamers.com/marketing/seo/microstrategy/)

我有 18 列（标记为：CHANGE），我需要在其中显示前两列（< td > 的当前位置和上个月）中数值的差异。

目前，我手动输入前两列，然后计算最后一列中两者的差异以找出差异。（我是一名设计师）我想输入一个脚本来计算最后一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:39:14.490

如果你的手机看起来像这样

```
<td id='tdid'>400</td> 
```

您可以使用 javascript 来获取此值：

```
var value1 = document.getElementById ("tdid").innerText; 
```

现在，如果你得到这两个值并将其存储到 value1 和 value2 中，你可以使用 javascript 设置第三个单元格，如下所示：

```
document.getElementById ("tdid").innerText = parseInt(value1) - parseInt(value2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:17:22.783

你知道 jQuery 可以让你的生活更轻松，对吧？:)

这是一个替代解决方案：

**HTML**

```
<table>
    <tr>
        <td id='tdid1' class='aaa'>400</td>
        <td id='tdid2' class='aaa'>300</td>
        <td id='resu'></td>
    </tr>
</table>

<br>

<button id='res'>result</button> 
```

**JS**

```
var value1 = $("#tdid1").text();
var value2 = $("#tdid2").text();

var result = parseInt(value1) - parseInt(value2);

$('#res').click(function() { $('#resu').html(result) }) 
```

在这里测试它：http: [//jsfiddle.net/RASG/pqtmb/](http://jsfiddle.net/RASG/pqtmb/)

*只是提醒一下：通过使用 javascript，您让客户端进行计算，而不是您的服务器。如果由于任何原因 js 失败，用户将无法看到带有结果的列。*

# javascript - 如何在 SlideJS 中创建播放/暂停按钮？

> ID：12537753
> 
> 赞同：1
> 
> 时间：2012-09-21T20:29:48.293
> 
> 标签：javascript, jquery, button

我需要使用[SlideJS 库](http://slidesjs.com/)创建一个简单的播放/暂停按钮。我试图按照文档，使用一个基本的例子，我得到了这样的东西：

HTML 代码：

```
<a id="play">play</a> 

<div id="slides">
    <div class="slides_container">
        <div>
            <h1>Slide 1</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div>
            <h1>Slide 2</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div>
            <h1>Slide 3</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div>
            <h1>Slide 4</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
    </div>
</div> 
```

Javascript代码：

```
 $(function(){
        $("#slides").slides();

        $("#play").click(function () { 
            $("slides").slides({ play: 1000 }); 
        }); 
    }); 
```

尽管如此，这不起作用，我只是不知道如何使它起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:46:56.753

您的目标是一个具有 id 属性的元素......这个选择器是 '#YOUR_ID'

你忘记了“#”

```
$('#slides').slides({ play: 1000 }); 
```

# database - 在亚马逊网络服务上存储移动应用程序的后端 - 如何？

> ID：12537755
> 
> 赞同：1
> 
> 时间：2012-09-21T20:29:50.970
> 
> 标签：database, amazon-web-services, filesystems, amazon, backend

我有一个应用程序，它需要一个由 3 部分组成的后端：

*   数据库
*   前端 PHP 页面处理来自应用程序的请求，访问数据库并返回 JSON
*   图片的文件系统存储

现在我知道现在有很多人使用 Amazon AWS，最近我快速浏览了他们的服务。现在对于数据库，DynamoDB 似乎很适合我！但我的问题是，我应该使用哪种产品（以及如何）来存储静态 php 页面，以及基本文件系统（可能会变得非常大）。对于静态 php 页面，我确实需要像 GoDaddy.com 之类的服务一样简单的东西，但它必须快速并且能够响应许多请求。

对于图像文件系统存储，这可以在与 php 文件相同的位置完成，也可以在其他任何地方完成，只要我可以使用 php.ini 访问它。你有什么建议吗？

我真的很想听听您认为哪些产品适合这个后端，因为这是一个非常受欢迎的设置。如果您想到比亚马逊更好的东西，我愿意接受建议，请记住，首要任务（按顺序）是稳定性、可扩展性和易用性，并且需要非常可扩展。

感谢任何重播！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:06:40.670

您可以使用 S3 进行存储，因为它简单、易于使用且可扩展。但是从 S3 检索文件很慢。要解决此问题，请从 Cloudfront 而不是 S3 检索文件。S3 存储桶可以充当 Cloudfront 分发的源服务器。它有两个优点 -
- 检索速度非常快，特别是更受欢迎的页面/图片
- 无论您的应用程序正在使用地球的哪个部分，Cloudfront 都会选择最近的边缘缓存来提供您的内容。

# android - 如何实现 ViewPager PagerTitleStrip？

> ID：12537758
> 
> 赞同：0
> 
> 时间：2012-09-21T20:30:01.163
> 
> 标签：android, android-layout, view, android-viewpager, viewpagerindicator

我是 android 的菜鸟，我一直在使用教程来构建 viewpager 布局。但是，我还没有找到一个教程，该教程也显示了如何实现 pagertitle 条。我已经能够收集点点滴滴并显示条形图，但我不知道如何正确显示文本。目前它一次显示多个标题并且与页面失去同步。任何帮助是极大的赞赏。

```
public class MyPagerActivity extends Activity {

PagerTitleStrip mTitleStrip;
String myTitle;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mypagermain);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(2);
    mTitleStrip = (PagerTitleStrip) findViewById(R.id.title_strip);

    //some code
}

private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 5;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.news;              
            view = inflater.inflate(resId, null);
            LinearLayout layout0=(LinearLayout)view.findViewById(R.id.LLnews);
            WebView newsfeed = (WebView) view.findViewById(R.id.webViewnews);
            ((ViewPager) collection).addView(view, 0);
            return view;

        case 1:
            resId = R.layout.coinshows;
            view = inflater.inflate(resId, null);
            LinearLayout layout1=(LinearLayout)view.findViewById(R.id.LLcoinshows);
            WebView coinshows = (WebView) view.findViewById(R.id.webViewcoinshows);
            ((ViewPager) collection).addView(view, 0);
            return view;

        }
        return resId;
}

}

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);

    }

    @Override
    public Parcelable saveState() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return myTitle;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T14:18:29.413

我推荐使用[PagerSlidingTabStrip](https://github.com/astuetz/PagerSlidingTabStrip)。它的使用非常简单，它模仿 Play Store 的外观和感觉，非常好。

> **用法**
> 
> 1.有关此项目的工作实施，请参见示例/文件夹。
> 
> 在您的视图中包含 PagerSlidingTabStrip 小部件。这通常应该放置在它所代表的 ViewPager 附近。

```
 <com.astuetz.viewpager.extensions.PagerSlidingTabStrip
     android:id="@+id/tabs"
     android:layout_width="match_parent"
     android:layout_height="48dip" /> 
```

> 2.在您的 onCreate 方法（或片段的 onCreateView）中，将小部件绑定到 ViewPager。

```
 // Set the pager with an adapter  
  ViewPager pager = (ViewPager) findViewById(R.id.pager);  
  pager.setAdapter(new TestAdapter(getSupportFragmentManager()));

  // Bind the widget to the adapter  
  PagerSlidingTabStrip tabs = (PagerSlidingTabStrip) findViewById(R.id.tabs); 
  tabs.setViewPager(pager); 
```

> 3.（可选）如果您在视图寻呼机中使用 OnPageChangeListener，您应该在小部件中设置它，而不是直接在寻呼机上。

```
 // continued from above 
  tabs.setOnPageChangeListener(mPageChangeListener); 
```

# jasper-reports - Jasper报告excel切断单元格

> ID：12537760
> 
> 赞同：2
> 
> 时间：2012-09-21T20:30:07.917
> 
> 标签：jasper-reports, apache-poi, ireport

我想导出到 excel，但我希望数据打印在一个单元格中，而不管它有多少数据。我尝试设置“溢出时拉伸”选项，这似乎可以工作，但它会在实际数据行之间创建空行。我尝试将 IS_REMOVE_EMPTY_SPACE_BETWEEN_ROWS 添加为 true，但它不能解决我的问题。我也在使用 IS_IGNORE_PAGINATION。

理想情况下，我希望 excel 导出将所有数据放在一个单元格中，而与单元格的大小无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:18:42.657

我找到了答案。您需要将`net.sf.jasperreports.print.keep.full.text`报告参数设置为`true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:06:07.930

@DMoses：我在使用“溢出溢出”时遇到了很多空行的问题，它是因为我在显示数据的单元格和报告的边距之间无意识地留下了一个空格而产生的。只需将单元格放在边缘的边缘，然后您就不会遇到这个问题。

# git - 没有环境的 git ssl GIT_SSL_NO_VERIFY=true

> ID：12537763
> 
> 赞同：16
> 
> 时间：2012-09-21T20:30:10.290
> 
> 标签：git, netbeans, ssl

我用 ssl 在远程机器上安装我自己的 git 服务器。

当我使用这个命令时：

env GIT_SSL_NO_VERIFY=true git clone [https://xxx.xxx.xxx.xxx/git/project.git](https://xxx.xxx.xxx.xxx/git/project.git)

一切都很好，并且使用 env GIT_SSL_NO_VERIFY=true 所有 git 命令都可以正常工作。

但我需要用 netbeans ide 拉和推，所以用 netbeans ide 我不会添加这个

> 环境 GIT_SSL_NO_VERIFY=true

所以netbeans说：

> 无法连接到位于 [https://xxx.xxx.xxx.xxx/git/project.git的远程存储库](https://xxx.xxx.xxx.xxx/git/project.git)

我需要做什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-21T23:13:24.777

你可以这样做（从[`git-config`](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)手册页）：

```
git config --global http.sslVerify false 
```

但是，如果证书无法正确验证，那么将它放在 https 服务器上又有什么意义呢？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T23:17:18.653

如果 https 服务器使用自签名证书，请将其保存到本地计算机的硬盘（`.crt`格式），并将其添加到`.git/config`相关工作副本

```
[http]
        sslCAInfo=/path/to/your-server-certificate.crt 
```

这将使它在连接到有问题的 https 服务器时总是期望该证书，而不是其他情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T04:25:20.480

同意其他海报 GIT_SSL_NO_VERIFY 或其他防止证书验证的方法不是正确的解决方案。最佳解决方案只需几秒钟即可实现，可在以下答案中找到： [https](https://stackoverflow.com/a/8467406/994153) ://stackoverflow.com/a/8467406/994153 它涉及下载证书`.pem`文件并将 Git 配置变量设置`http.sslCAinfo`为指向该文件。

# php - 将jpg添加到变量

> ID：12537764
> 
> 赞同：0
> 
> 时间：2012-09-21T20:30:17.963
> 
> 标签：php, xml, variables, xml-parsing

我正在从 XML 文件 ($image) 创建一个变量，我需要创建一个将 $image 与“.jpg”组合在一起的新变量。我试过了：

`$image = $record->getElementsByTagName( "name_id" ); echo $image.".jpg"; $image = $image->item(0)->nodeValue;`

但这不会将 .jpg 添加到脚本中的变量中。我需要这样做的原因是 XML 文件没有 jpg 文件扩展名，只有图像引用作为数字序列。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:35:30.817

如果`$image`是字符串，只需将字符串与`.`. 您可以将其视为示例：

```
<?php
   $img = hello;
   $imgfinal = $img . ".jpg";
   echo $img;
?> 
```

正如预期的那样，输出是`hello.jpg`. 希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:36:16.540

您是否在寻找：

```
$image = $record->getElementsByTagName( "name_id" );
$image = $image->item(0)->nodeValue;
$image = $image . ".jpg"; 
```

现在 $image 应该包含带有文件扩展名的文件名

# javascript - 如何在jQuery组合框自动完成中匹配多个子字符串

> ID：12537767
> 
> 赞同：1
> 
> 时间：2012-09-21T20:30:21.953
> 
> 标签：javascript, jquery, jquery-ui, combobox, jquery-ui-autocomplete

我发现了不止几个这样的例子，它带有一个普通的 jquery 自动完成功能，但不能与[演示](http://jqueryui.com/demos/autocomplete/#combobox)中的组合框代码中包含的自动完成功能一起使用，因为代码结构的结构如此不同。

我想匹配在任何单词中任何位置具有所有搜索标记的每个项目。我不需要匹配任何单词的开头，它的任何部分都可以。我不在乎搜索字符串是否在自动完成列表中突出显示，如果这会使事情变得过于复杂。

所需的搜索/结果组合：（请原谅间距）
“ **fi th** ”“ first second **th** third” “ **rs on** ”“ **firs** t sec **on** d third” “ **ec** **rd** ”“first s sec **ond** third **”**但 不是限于任何最大/最小长度或令牌数量。

 ******## 编辑

我使用我工作过的另一个自动更正的代码结构找出了其中的一部分。

```
source: function( requestObj, responseFunc ) {
    var matchArry = $("select > option").map(function(){return this.innerHTML;}).get();
    var srchTerms   = $.trim(requestObj.term).split(/\s+/);

    // For each search term, remove non-matches
    $.each (srchTerms, function (J, term) {
        var regX = new RegExp (term, "i");
        matchArry = $.map (matchArry, function (item) {
            if( regX.test(item) ){
                return{
                    label: item,
                    value: item,
                    option: HTMLOptionElement
                } ? item :null;
            }
        } );
    });

    // Return the match results
    responseFunc (matchArry);
}, 
```

和

```
select: function( event, ui ) {
    ui.item.option.selected = true;
    self._trigger( "selected", event, {
        item: ui.item.option
    });
    $("destination").val(ui.item.value);    // I added this line
}, 
```

但我不能同时获得多个单词并且能够单击以选择同时工作。

如果我删除`} ? item :null;`地图功能中的返回，我可以单击以选择一个项目。如果我离开它，我可以输入多个单词，但我无法单击任何项​​目......

这是问题还是问题`option: this`？我试过用`HTMLOptionElement`and替换它，`null`但我被卡住了。

我可以`ui.item.value`在选择标签内设置另一个字段的值，但这不会将值放在搜索框中或关闭下拉菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:49:13.523

一时兴起，我添加`ui.item.option = ui.item.value;`了选择标签，一切都按预期工作。选项：来源中的价值现在似乎并不重要。

*我没有声称这是良好的编码习惯

更新小提琴：http: [//jsfiddle.net/eY3hM/](http://jsfiddle.net/eY3hM/)******

# javascript - PDF.js 不适用于 IE9

> ID：12537773
> 
> 赞同：27
> 
> 时间：2012-09-21T20:30:43.793
> 
> 标签：javascript, pdf, internet-explorer-9, pdf.js

有谁知道如何让 PDF.js 在 IE 9 上运行？我已经尝试了一切我能想到的让它工作但不去。我已经下载了 hack.js 文件并尝试在 pdf.js 之前和之后以及 viewer.js 之前和之后添加它。那没有用。

然后我尝试从他们的 Demo 下载 compatability.js、viewer.js 和 pdf.js（我可以确认在 IE9 中 100% 工作）并将它们放入我的 HTML 页面，不行。我正在使用他们的 PDF 文件，有些网站说有些 PDF 可以工作，而有些则不能。所以我想如果它在他们的网站上工作，它必须在我的网站上工作——但不行。

他们的 Demo 工作得很好，但是任何时候我试图让我的 IE9 工作，无论我使用他们的文件还是我的编译版本，它都不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-05T07:32:53.800

尝试在 pdf.js 之前加载 compatibility.js。像这样的东西：

```
 <script type="text/javascript" src="/js/compatibility.js"></script>
  <script type="text/javascript" src="/js/pdf_compr.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T10:56:53.390

浏览器支持在他们的常见问题解答中 - 检查这个问题，因为问题被问到 IE9 可能得到支持：[https ://github.com/mozilla/pdf.js/wiki/Frequently-Asked-Questions#what-browsers-are-supported](https://github.com/mozilla/pdf.js/wiki/Frequently-Asked-Questions#what-browsers-are-supported)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-02-06T01:35:00.980

PDF.JS 和 IE9 不能很好地配合使用，如果你想支持 IE 9，我不会依赖它。PDF.JS 中的某些渲染功能进展得不够好，无法在 IE9 中使用

有办法解决这个问题，您可以使用 FlexPaper，它可以与 PDF.js 和 HTML4 版本结合使用，用于不支持 HTML5 的浏览器

[http://flexpaper.devaldi.com/demo/](http://flexpaper.devaldi.com/demo/)

（注意；我隶属于 FlexPaper 产品）

# salesforce - 每当创建新事件时更新联系人字段？

> ID：12537775
> 
> 赞同：1
> 
> 时间：2012-09-21T20:30:44.667
> 
> 标签：salesforce, apex-code

这是我要解决的问题：

当创建新的**任务/事件**时，如果用户是某个配置文件 - 我们希望将**CONTACT**上的字段更新为创建 T/E 的日期。

我尝试进行工作流规则和字段更新-但无法使其正常工作...我认为由于这是通过查找的标准-标准对象关系，因此在进行字段更新时可能会出现问题。还有其他想法吗？？我更喜欢使用这个平台...

停！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:45:00.397

我们已经通过 Apex 触发器完成了您所说的操作。像这样的东西...

```
//I'm sure this doesn't compile, but it gives you the idea
trigger taskTrigger on Task( after insert, after update ){
   Task t = trigger.new ;
   Contact contact = [Select Id from Contact where Id = :t.whoId] ;
   contact.yourfield = t.AcitivityDate ;
   update contact ;
} 
```

# javascript - JavaScript 将数字视为字符串，而不是整数，ParseInt 没有修复它

> ID：12537778
> 
> 赞同：-2
> 
> 时间：2012-09-21T20:31:05.647
> 
> 标签：javascript, html

我正在尝试在两个输入类型文本字段中插入两个数字。在我这样做之后，我必须确保第一个数字小于第二个数字。为此，我将像这样捕获两个字段：

```
var supt = $('#suptotal').val();
var supc = $('#supcubierta').val(); 
```

当我比较这两个变量时，它们是字符串，因此例如 21 被认为大于 123。

我试过使用这个功能`ParseInt`，就像这样

```
var supt = ParseInt($('#suptotal').val()); 
```

但它没有用。如何将数字作为数字进行比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:32:28.240

`parseInt($('#suptotal').val(), 10)`反对使用`ParseInt($('#suptotal').val(), 10)`

函数名区分大小写

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:33:21.483

```
parseInt( $('#suptotal').val(), 10 ); 
```

还要指定一个基数，以防字符串包含类似的东西`'010'`，它会被解释为八进制并导致 8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:37:10.283

```
ParseInt($('#suptotal').val()); 
```

你写的函数不正确。`parseInt`以 lowerCamelCase 样式定义。

```
parseInt($('#suptotal').val()); 
```

还建议您指定基数为 10 的基数参数 10。

```
parseInt($('#suptotal').val(), 10); 
```

但是，如果您只是想将字符串转换为数字，请使用二元运算符的一元效果，`+`当用于单个操作数时，它将强制将值转换为数字：

```
var supt = +$('#suptotal').val(); 
```

# javascript - 使用 jquery 将 href 查询字符串值传递给数组

> ID：12537786
> 
> 赞同：1
> 
> 时间：2012-09-21T20:31:45.730
> 
> 标签：javascript, jquery

我正在尝试将值从arr 传递`ul#ignorelist.userlist li > a`到一个名为 arr 的数组中。但我不需要整个href，我只需要用户ID。

*像这样的东西：14301、65958*

**HTML：**

```
<ul class="userlist floatcontainer" id="ignorelist">
    <li id="user14301"><input checked="checked" id="usercheck_14301" name=
    "listbits[ignore][14301]" type="checkbox" value="14301"><a href=
    "member.php?u=14301">Frenchy</a><input name=
    "listbits[ignore_original][14301]" type="hidden" value="14301"></li>

    <li id="user65958"><input checked="checked" id="usercheck_65958" name=
    "listbits[ignore][65958]" type="checkbox" value="65958"><a href=
    "member.php?u=65958">GermanMan</a><input name=
    "listbits[ignore_original][65958]" type="hidden" value="65958"></li>
</ul> 
```

**查询：**

```
var arr = $('ul#ignorelist.userlist li > a').map(function() {
return this;
}).toArray(); 
```

**jsfiddle：http:** [//jsfiddle.net/7dWFN/13/](http://jsfiddle.net/7dWFN/13/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:34:09.040

试试这个，注意你不需要`toArray`,`map`方法返回一个数组。

```
var arr = $('#ignorelist.userlist li').map(function() {
      return this.id.match(/\d+/g).join('')
      // or return this.id.replace('user', '')
}).get() 
```

[http://jsfiddle.net/6aP7W/](http://jsfiddle.net/6aP7W/)

```
var names = $('#ignorelist.userlist li a').map(function() {
      return $(this).text()
}).get() 
```

# javascript - 如何在选项卡关闭时启动弹出窗口，或者在输入新地址时？

> ID：12537789
> 
> 赞同：0
> 
> 时间：2012-09-21T20:31:47.990
> 
> 标签：javascript, popup, onbeforeunload

我正在尝试从某些页面启动弹出窗口。我希望用户仅在以下情况下看到弹出窗口：

a) 他们关闭浏览器选项卡 b) 他们点击浏览器的后退按钮 c) 他们转到购买路径中下一步以外的页面 - 基本上，当他们转到任何不包含字符串“/checkout/”的 URL 时”。

我已经查看了加载正文 onUnload 的弹出示例，这有点过于全球化了。我只想要一个弹出窗口——一个真正的实际弹出窗口——如果他们试图离开结帐路径就启动。

我在 StackOverflow 上查看了几个问题，但似乎没有一个能完全回答我的问题。[此答案https://stackoverflow.com/a/3753963/1634459](https://stackoverflow.com/a/3753963/1634459)中提到的 onBeforeUnload可能有效......可能......但我不完全确定如何在上面列出的条件下实现它。

...帮助？

这是我想使用的弹出窗口代码：

```
<script language="javascript" type="text/javascript">
var win=null;
function NewWindow(mypage,myname,w,h,scroll,pos){
if(pos=="center"){LeftPosition=(screen.availWidth)?(screen.availWidth-w)/2:50;TopPosition=(screen.availHeight)?(screen.availHeight-h)/2:50;}
settings='width='+w+',height='+h+',top='+TopPosition+',left='+LeftPosition+',scrollbars='+scroll+',location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=no';
win=window.open(mypage,myname,settings);
if(win.focus){win.focus();}}
function CloseNewWin(){if(win!=null && win.open)win.close()}
window.onfocus=CloseNewWin;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:42:05.650

干得好; 我在之前的工作中为营销团队写了这篇文章。你应该能够很容易地适应它；只需根据需要更新 URL 和参数。

当用户离开页面时，此代码将打开一个弹出窗口，除非他们通过提交结帐表单离开。（如果您在页面上有多个表单，而您不应该在结帐流程中使用，那么您也需要修复它。）

```
var nag = function () {

    return {
        // assume the user is going to leave, get ready to pounce!
        doWant: true,

        // FALCON PUNCH
        deploy: function () {
            if (nag.doWant) {

                var width = 449;
                var height = 298;

                args = "width=" + width + ",";
                args += "height=" + height + ",";
                args += "location=0" + ","
                args += "menubar=0" + ","
                args += "resizable=1" + ","
                args += "scrollbars=0" + ","
                args += "status=0" + ","
                args += "titlebar=0" + ","
                args += "toolbar=0" + ","
                args += "hotkeys=0"

                var demo_window = window.open("YOUR_URL", "main", args);

                try {
                    demo_window.focus();
                } catch (err3) { };
            }
        },

        // oh, off to step 2? that's cool. carry on.
        ignore: function () {
            nag.doWant = false;
        }
    }
} ();

window.onunload = nag.deploy;
document.forms[0].onsubmit = nag.ignore; 
```

If you want to be able to STOP the user from leaving the page, I can help you with that update.

# django - django imagekit 存储缩略图和原始文件

> ID：12537795
> 
> 赞同：3
> 
> 时间：2012-09-21T20:32:13.063
> 
> 标签：django, django-imagekit

在我的模型中，用户可以上传图片。对于那些图像，我也想存储缩略图。对于我正在尝试使用 django-imagekit 的任务，但我似乎没有让它工作

```
class Imagen(models.Model):
    def get_image_path(instance, filename):
        ext = filename.split('.')[-1]
        filename = "%s.%s" % (uuid.uuid4(), ext)
        return os.path.join('uploads/images', str(instance.user.id), filename)

    def get_thumb_image_path(instance, path, specname, extension):
        path_thumb = re.sub("(\.\w+$)", "", path)
        path_thumb = "%s%s%s" % (path_thumb, "_thumb", extension)
        return path_thumb

    user = models.ForeignKey(User)
    imagen = models.ImageField(upload_to=get_image_path, format='JPEG')
    imagen_thumb = ImageSpecField([ResizeToFill(92, 116)], image_field='imagen', cache_to=get_thumb_image_path, format='JPEG', options={'quality': 90})
    insert_date = models.DateTimeField(auto_now_add=True, editable=False) 
```

ImageSpecField 应该保留原始文件并将新文件存储在 cache_to （[API](http://django-imagekit.readthedocs.org/en/latest/apireference.html#module-imagekit.models.fields)）中，但它不起作用，

get_thumb_image_path 响应与 get_image_path 相同的路径，但将“_thumb”添加到图像中，例如：

```
uploads/images/1/8836e0d5-8cce-4e3d-b3dc-35ec8ff451ce.jpg
uploads/images/1/8836e0d5-8cce-4e3d-b3dc-35ec8ff451ce_tumb.jpg 
```

# tags - tortoiseCVS 如何从分支中区分标签

> ID：12537796
> 
> 赞同：0
> 
> 时间：2012-09-21T20:32:13.080
> 
> 标签：tags, branch, tortoisecvs

我有一个愚蠢的问题。我在 cvs 中有这么多标签现在我不确定哪些是真正的分支，哪些是简单的标签。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:06:03.513

在 CVS 中选择任意一个文件，右键单击 History，然后 tortoiseCVS 会给出一个包含所有标签和分支的历史列表。
标签为黄色背景，分支为绿色背景。

此外，标签的图标与历史窗口上的分支不同。

标签图标是正方形内的曲线箭头，而分支图标是两个重叠的折角页面。

# javascript - 文本区域中的 html -> 从 db -> java -> 浏览器，编辑并返回

> ID：12537797
> 
> 赞同：0
> 
> 时间：2012-09-21T20:32:16.243
> 
> 标签：javascript, jsp, jakarta-ee, urlencode

我的数据库中有 html，希望它可以在 CSR/管理页面的文本区域中进行编辑。

使用java/jsp 想知道以下是不是好方法/有没有更好的方法： 1\. [apache commons StringEscapeUtils](https://stackoverflow.com/questions/9462623/use-jsoup-to-encode-html-characters)对发送到浏览器的数据进行编码。计划将字符串写为 java 脚本变量，然后对其进行解码并将其设置为 textarea 的值。想要这样做，如果用户输入作为值的一部分，它不会在下次编辑时关闭文本区域。

2.  我用什么来取消 StringEscapeUtils 中的数据？（在 javascript 中，因此用户可以看到 html 并可以在 textarea 中进行编辑）

3.  我是否最好使用 String 编写一个简单的 replaceall 来替换字符 < > ？然后 javascript 到字符串函数再次取消转义它们？如果是这样，我是否需要取消转义任何其他字符？

任何其他指针都会很棒。

将 java 6 与 jboss 4.2 一起使用将处理 db 中的排序规则/格式，其他线程对此有所了解。

**更新：** 最终使用了这个 - 可以改进

```
public static String screenHtmlShow(String s){
    s= s.replace("<","< ");
    s= s.replace("/>","/ >");
    s= s.replace("\n"," ");
    s= s.replace("\r"," ");
    s= s.replace("\"","'");
    return s;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:45:46.863

您可以`<c:out value="${value}"/>`在 JSP 页面上使用。`escapeXml=true/false`它也有一个有用的属性。

# java - Java中的Linux文件锁定

> ID：12537803
> 
> 赞同：1
> 
> 时间：2012-09-21T20:32:43.577
> 
> 标签：java, linux, file, locking

我知道我们可以使用flock() 在linux 中锁定一个文件。但是，NFS 驱动器可能不支持文件锁定。

我正在考虑在我的 java 代码中实现一些自定义文件锁定逻辑，以支持任何驱动器上的文件锁定。任何人都可以提出一个好的做法吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:45:44.430

文件锁定必须由操作系统内核/文件系统驱动程序完成，除非您正在考虑更窄的范围，例如仅在单个进程的线程之间锁定。系统上的所有其他进程都无法知道与您的应用程序对话以锁定/解锁，而无需对其进行重写。当考虑像 NFS 所做的那样考虑分布式锁定时，这一点更加重要（尽管您注意到，有许多损坏的 NFS 实现做得不好）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:44:49.123

您可以自己创建一个新文件，用作锁定文件（以下是 Java 中的示例，因为您声明要在 Java 中实现一些自定义文件锁定逻辑）：

```
File lockFile = new File(".filelock");
if(!lockFile.exists()){
   //create lock file
   boolean success = lockFile.createNewFile();       

   //execute some logic...

   //delete lock file
   lockFile.delete();                                
}else{
   //lock file exists, cannot execute the logic that we wanted
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T14:42:01.367

Java 标准库不公开`flock()`或`fnctl()`直接公开。它似乎`lockf()`在[FileChannel/FileLock](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html#lock(long,%20long,%20boolean))`lockf()`中使用——但如果你需要确定的话，我不会指望它使用。从库的角度来看，这是一个可以更改的实现细节。

如果你真的想使用特定的 posix 功能，看看[jnr-posix](https://github.com/jnr/jnr-posix)和相关项目。这是一个如何使用它的示例。请注意，这基本上是用 Java 编写低级 C，但这毕竟是目标，对吧？:)

```
// couldn't find these in jnr-posix...
// from http://linux.die.net/include/sys/file.h
/* Operations for the `flock' call.  */
public static final int LOCK_EX = 2;    /* Exclusive lock.  */
public static final int LOCK_UN = 8;    /* Unlock.  */
/* Can be OR'd in to one of the above.  */
public static final int LOCK_NB = 4;    /* Don't block when locking.  */

private static void throwErrno(String fn, Path path) throws IOException {
    int err = posix.errno();
    throw new IOException(fn + "() returned errno " + err + " '" + Errno.valueOf(err) + "' for " + path );
}

public int flock(Path path, int mode, boolean blocking) {
    int fd = posix.open(path.toString(),
        OpenFlags.O_WRONLY.intValue() | OpenFlags.O_CREAT.intValue(),
        mode);
    if (fd < 0) {
        throwErrno("open", path);
    }
    int operation = LOCK_EX;
    if (!blocking) {
        operation |= LOCK_NB;
    }
    int ret = posix.flock(fd, operation);
    if (ret != 0) {
        throwErrno("flock", path);
    }
    return fd;
} 
```

这只是最小的演示代码。我建议返回一个`AutoClosable`在关闭时释放日志的。

# jquery - 等到所有图像在更改它们的 src 后加载

> ID：12537804
> 
> 赞同：2
> 
> 时间：2012-09-21T20:32:45.280
> 
> 标签：jquery, html, css

我有一个项目，在文档完全加载后，我必须更改图像 src 属性（稍微修复它们）。

我想要的是检查 src 属性更改后的所有图像是否已完全加载的选项，以便我可以计算它们的高度并基于此继续我的代码。

这可能吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:34:34.990

你可以用 jQuery 做：

```
$('img#newsrc').load(function(){  // this triggers after image is loaded

    // do your checking

} 
```

或特定图像：

```
var file = 'beautiful.jpg';
$('img').attr('src', file).load(function() {  
    alert(file + 'is loaded');  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:49:25.813

如果您想在页面上的所有图像都加载后做某事，请尝试以下操作：

```
$(document).ready(function () {
  var nImages = $('img').length;
  $('img').load(function () {
    nImages--;
    if (nImages == 0) {
      ... do whatever ...
    }
  }
}); 
```

如果您不想包含所有图像，只需将选择器“img”更改为更具体的内容。

# python - Python can't get requests installed on Ubuntu for Python 2.7

> ID：12537805
> 
> 赞同：3
> 
> 时间：2012-09-21T20:32:49.483
> 
> 标签：python, python-2.7, pip, python-requests

All I want to do is run a Python script that requires Python 2.7 & Requests on my Ubuntu 10.04 EC2 box. I installed Python 2.7, no problem. "python" by itself still points to python 2.6, which is very annoying, b/c I'm not sure how ubuntu will freak if I change the symlink /usr/bin/python to point to 2.7.

I followed the (carefully buried) install instructions for pip (at [http://www.pip-installer.org/en/latest/index.html](http://www.pip-installer.org/en/latest/index.html), and which are WAY too hard to find if they aren't the ABSOLUTE FIRST command on the "install pip" page)

So, the real problem here is that pip install requests completes successfully, but only installs for python 2.6, not 2.7\. The pip usage instructions say nothing about how to install a package for a specific version of python.

How do I do this?

I just want to run my python script that requires 2.7 + requests.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:13:35.190

First install pip for your 2.7 distribution using easy_install (easy_install should definitely be included with your 2.7 distribution):

```
easy_install-2.7 -U pip 
```

Then install what you need:

```
pip-2.7 install requests 
```

Then you can run code with `python2.7` instead of `python`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:40:42.797

Yeah it would be a bad idea to change the link pointing to which python version. Instead, can you change the shebang to say `#!/usr/bin/env python2.7` instead of `#!/usr/bin/env python` ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:23:35.667

Though `python2.7 /path/to/pip install requests` might work; you should install pip for python2.7 separately instead.

If you don't use virtualenv then invoke pip as `pip-2.7` (the command is available if you install pip for python2.7).

Follow [installation instructions](http://www.pip-installer.org/en/latest/installing.html) which is *the first* item in [the table of contents](http://www.pip-installer.org/en/latest/index.html). Substitute `python` with `python2.7` in the instructions.

# c# - 由 SSRS 2012 中的 C# 代码创建的报告返回客户端找到的响应内容类型为“”，但预期为“文本/xml”

> ID：12537810
> 
> 赞同：2
> 
> 时间：2012-09-21T20:33:20.947
> 
> 标签：c#, reporting-services, upgrade, ssrs-2012, reporting-services-2012

我迁移了在 Windows Server 2003 Std 上运行的 Reporting Services 2005 安装。32 位到运行带有 SQL Server 和 Reporting Services 2012 的 Windows Server 2008 Enterprise 32 位（不是 2008 R2）的新服务器。

一切正常，直到我们尝试从我们的应用程序运行报告，该应用程序有一个运行报告的自定义类。它们在 2005 年运行良好，但在 2012 年将无法运行。

具体错误是：

> 客户端发现响应内容类型为“”，但预期为“文本/xml”。

方法中抛出错误：

```
 [System.Web.Services.Protocols.SoapHeaderAttribute("SessionHeaderValue", Direction=System.Web.Services.Protocols.SoapHeaderDirection.InOut)]
        [System.Web.Services.Protocols.SoapHeaderAttribute("ServerInfoHeaderValue", Direction=System.Web.Services.Protocols.SoapHeaderDirection.Out)]
        [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://schemas.microsoft.com/sqlserver/2003/12/reporting/reportingservices/Render" +
"", RequestNamespace="http://schemas.microsoft.com/sqlserver/2003/12/reporting/reportingservices", ResponseNamespace="http://schemas.microsoft.com/sqlserver/2003/12/reporting/reportingservices", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
        [return: System.Xml.Serialization.XmlElementAttribute("Result", DataType="base64Binary")]
        public System.Byte[] Render(string Report, string Format, string HistoryID, string DeviceInfo, ParameterValue[] Parameters, DataSourceCredentials[] Credentials, string ShowHideToggle, out string Encoding, out string MimeType, out ParameterValue[] ParametersUsed, out Warning[] Warnings, out string[] StreamIds) {
            object[] results = this.Invoke("Render", new object[] {
                        Report,
                        Format,
                        HistoryID,
                        DeviceInfo,
                        Parameters,
                        Credentials,
                        ShowHideToggle});
            Encoding = ((string)(results[1]));
            MimeType = ((string)(results[2]));
            ParametersUsed = ((ParameterValue[])(results[3]));
            Warnings = ((Warning[])(results[4]));
            StreamIds = ((string[])(results[5]));
            return ((System.Byte[])(results[0]));
        } 
```

同样，这在 2005 SSRS 上运行良好，但在 2012 SSRS 上运行良好。

任何想法可能是什么问题？任何帮助，将不胜感激。

谢谢。何塞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:40:28.573

1.  确保您的应用程序/Web 服务器在新服务器的报表服务器角色中有一个条目。如果是这样，您可能希望将其删除并重新添加。例如，在我们的 SSRS 服务器的报告管理器中，在“主”文件夹的安全性上（位于[https://your.reporting.services.server/Reports/Pages/Folder.aspx?ItemPath=%2f&SelectedTabId=PropertiesTab](https://your.reporting.services.server/Reports/Pages/Folder.aspx?ItemPath=%2f&SelectedTabId=PropertiesTab)），我们的网络服务器有一个条目：

    ```
    OURDOMAIN\WEBSERVERNAME$   Public 
    ```

2.  查看您如何从应用程序/Web 服务器向 SSRS 服务器提供凭据。我们使用自定义类：

公共类 ReportViewerServerConnection 实现 IReportServerConnection2

```
 Public ReadOnly Property ReportServerUrl() As System.Uri Implements Microsoft.Reporting.WebForms.IReportServerConnection.ReportServerUrl
    Get
      Return New Uri(System.Configuration.ConfigurationManager.AppSettings.Get("ReportServerUrl"))
    End Get
  End Property

  Public ReadOnly Property Timeout() As Integer Implements Microsoft.Reporting.WebForms.IReportServerConnection.Timeout
    Get
      Return CInt(System.Configuration.ConfigurationManager.AppSettings.Get("ReportServerTimeout"))
    End Get
  End Property

  Public ReadOnly Property Cookies() As System.Collections.Generic.IEnumerable(Of System.Net.Cookie) Implements Microsoft.Reporting.WebForms.IReportServerConnection2.Cookies
    Get
      Return Nothing
    End Get
  End Property

  Public ReadOnly Property Headers() As System.Collections.Generic.IEnumerable(Of String) Implements Microsoft.Reporting.WebForms.IReportServerConnection2.Headers
    Get
      Return Nothing
    End Get
  End Property

  Public Function GetFormsCredentials(ByRef authCookie As System.Net.Cookie, ByRef userName As String, ByRef password As String, ByRef authority As String) As Boolean Implements Microsoft.Reporting.WebForms.IReportServerCredentials.GetFormsCredentials
    'Not using form credentials
    authCookie = Nothing
    userName = Nothing
    password = Nothing
    authority = Nothing

    Return False
  End Function

  Public ReadOnly Property ImpersonationUser() As System.Security.Principal.WindowsIdentity Implements Microsoft.Reporting.WebForms.IReportServerCredentials.ImpersonationUser
    Get
      'Use the default windows user.  Credentials will be
      'provided by the NetworkCredentials property.
      Return Nothing
    End Get
  End Property

  Public ReadOnly Property NetworkCredentials() As System.Net.ICredentials Implements Microsoft.Reporting.WebForms.IReportServerCredentials.NetworkCredentials
    Get
      Return Net.CredentialCache.DefaultCredentials
    End Get
  End Property
End Class 
```

...以及 web.config 中的一个条目：

```
<configuration>
  <appSettings>

    <!-- magic value: http://msdn.microsoft.com/en-us/library/ms251661%28VS.90%29.aspx -->
    <add key="ReportViewerServerConnection" value="Our.WebApplication.ReportViewerServerConnection, Our.WebApplication.Assembly" />
  </appSettings>
</configuration> 
```

1.  在 SSRS 服务器上尝试 SQL Server Profiler 以查看 ReportServer 数据库和数据源数据库中发生了什么（如果有的话）。如果数据库中没有发生任何事情，那么一定存在网络、权限或 SSL 问题。

2.  检查 SSL 问题。（提琴手？）

3.  在您的应用程序中，删除对 SSRS Web 服务的引用，然后将其再次添加到新服务器。

4.  检查 Reporting Services 日志文件；例如“C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\LogFiles”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:41:31.127

检查客户端应用程序中使用的 ReportServerURL 设置是否指向正确的报表服务器 URL。我希望它指向如下 URL：

```
http://<reportserver>/reportserver/ 
```

或者直接访问网络服务：

```
http://<reportserver>/reportserver/ReportService2005.asmx? 
```

您可能还需要升级您在客户端应用程序中使用的 ReportViewer 控件，因为它不是为处理较新的报表功能而设计的。

# php - 我的数组返回 1

> ID：12537813
> 
> 赞同：0
> 
> 时间：2012-09-21T20:33:29.913
> 
> 标签：php, arrays

我有一个函数，我正在使用array_walk函数使用Title函数扫描Array [link]中的值并将其放入相应数组的[title]中

例如 Qlick => [链接] => "http://www.theqlick.com" [title] => Qlick

```
 $links = Array();

$URL = 'http://www.theqlick.com'; // change it for urls to grab  

// grabs the urls from URL 
$file  = file_get_html($URL);
foreach ($file->find('a') as $theelement) 
{
    $abs_url = url_to_absolute($URL, $theelement->href);
    if (!empty($abs_url))
        $links[] = $abs_url;
}

  function Titles() {
  global $links;
  $str = implode('',array_map('file_get_contents',$links));
  error_reporting(E_ERROR | E_PARSE);

  $titles = Array();
    if( strlen( $str )>0 ) {
  $titles[] = preg_match_all( "/\<title\>(.*)\<\/title\>/", $str, $titles );
  return $title;   
  return $links;
  } }

  $newArray = array();

  $title = array_walk($links, 'Titles');
  foreach($links as $key => $val ){
$newArray[$key] = array( 'link' => $val, 'title' => $title);
 }
 print_r($newArray);

My result when var_dump is used:
  array(2) {

 [0]=>
  array(6) {
[0]=>
string(26) "<title> The Qlick </title>"
[1]=>
string(26) "<title> The Qlick </title>"
[2]=>
string(68) "<title> Welcome to Festival Freaks | Home to Leeds Festival </title>"
[3]=>
string(24) "<title> Welcome </title>"
[4]=>
string(27) "<title> Qlick Kids </title>"
[5]=>
string(26) "<title> The Qlick </title>"
      }

  [1]=>
  array(6) {
[0]=>
string(11) " The Qlick "
[1]=>
string(11) " The Qlick "
[2]=>
string(53) " Welcome to Festival Freaks | Home to Leeds Festival "
[3]=>
string(9) " Welcome "
[4]=>
string(12) " Qlick Kids "
[5]=>
string(11) " The Qlick "
    }

    }
   array(2) {
   [0]=>
     array(6) {
[0]=>
string(26) "<title> The Qlick </title>"
[1]=>
string(26) "<title> The Qlick </title>"
[2]=>
string(68) "<title> Welcome to Festival Freaks | Home to Leeds Festival </title>"
[3]=>
string(24) "<title> Welcome </title>"
[4]=>
string(27) "<title> Qlick Kids </title>"
[5]=>
string(26) "<title> The Qlick </title>"
       }

  [1]=>
 array(6) {
[0]=>
string(11) " The Qlick "
[1]=>
string(11) " The Qlick "
[2]=>
string(53) " Welcome to Festival Freaks | Home to Leeds Festival "
[3]=>
string(9) " Welcome "
[4]=>
string(12) " Qlick Kids "
[5]=>
string(11) " The Qlick "
    }
    }

  array(2) {
 [0]=>
 array(6) {
[0]=>
string(26) "<title> The Qlick </title>"
[1]=>
string(26) "<title> The Qlick </title>"
[2]=>
string(68) "<title> Welcome to Festival Freaks | Home to Leeds Festival </title>"
[3]=>
string(24) "<title> Welcome </title>"
[4]=>
string(27) "<title> Qlick Kids </title>"
[5]=>
string(26) "<title> The Qlick </title>"
     }
  [1]=>
  array(6) {
   [0]=>
string(11) " The Qlick "
[1]=>
string(11) " The Qlick "
[2]=>
string(53) " Welcome to Festival Freaks | Home to Leeds Festival "
[3]=>
string(9) " Welcome "
[4]=>
string(12) " Qlick Kids "
[5]=>
string(11) " The Qlick "
     }
     }

    array(2) {
   [0]=>
   array(6) {
[0]=>
string(26) "<title> The Qlick </title>"
[1]=>
string(26) "<title> The Qlick </title>"
[2]=>
string(68) "<title> Welcome to Festival Freaks | Home to Leeds Festival </title>"
[3]=>
string(24) "<title> Welcome </title>"
[4]=>
string(27) "<title> Qlick Kids </title>"
[5]=>
string(26) "<title> The Qlick </title>"
      }
  [1]=>
   array(6) {
[0]=>
string(11) " The Qlick "
[1]=>
string(11) " The Qlick "
[2]=>
string(53) " Welcome to Festival Freaks | Home to Leeds Festival "
[3]=>
string(9) " Welcome "
[4]=>
string(12) " Qlick Kids "
[5]=>
string(11) " The Qlick "
     }
     }
    array(2) {
   [0]=>
   array(6) {
[0]=>
string(26) "<title> The Qlick </title>"
[1]=>
string(26) "<title> The Qlick </title>"
[2]=>
string(68) "<title> Welcome to Festival Freaks | Home to Leeds Festival </title>"
[3]=>
string(24) "<title> Welcome </title>"
[4]=>
string(27) "<title> Qlick Kids </title>"
[5]=>
string(26) "<title> The Qlick </title>"
     }
   [1]=>
   array(6) {
  [0]=>
string(11) " The Qlick "
[1]=>
string(11) " The Qlick "
[2]=>
string(53) " Welcome to Festival Freaks | Home to Leeds Festival "
[3]=>
string(9) " Welcome "
[4]=>
string(12) " Qlick Kids "
[5]=>
string(11) " The Qlick "
    }
    }
  array(2) {
 [0]=>
 array(6) {
[0]=>
string(26) "<title> The Qlick </title>"
[1]=>
string(26) "<title> The Qlick </title>"
[2]=>
string(68) "<title> Welcome to Festival Freaks | Home to Leeds Festival </title>"
[3]=>
string(24) "<title> Welcome </title>"
[4]=>
string(27) "<title> Qlick Kids </title>"
[5]=>
string(26) "<title> The Qlick </title>"
    }

  [1]=>
  array(6) {
   [0]=>
   string(11) " The Qlick "
   [1]=>

 string(11) " The Qlick "
[2]=>
string(53) " Welcome to Festival Freaks | Home to Leeds Festival "
[3]=>
string(9) " Welcome "
[4]=>
string(12) " Qlick Kids "
[5]=>
string(11) " The Qlick "
    }
    }

   Array
   ( 
[0] => Array
    (
        [link] => http://www.theqlick.com/index.php
        [title] => 1
    )

[1] => Array
    (
        [link] => http://www.theqlick.com/qlickdates.php
        [title] => 1
    )

[2] => Array
    (
        [link] => http://www.theqlick.com/festivalfreaks.html
        [title] => 1
    )

[3] => Array
    (
        [link] => http://www.theqlick.com/2kcm.php
        [title] => 1
    )

[4] => Array
    (
        [link] => http://www.theqlick.com/index3.php
        [title] => 1
    )

[5] => Array
    (
        [link] => http://www.theqlick.com/index2.php
        [title] => 1
    )

       ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:09:22.617

将函数的结尾更改为：

```
if( strlen( $str )>0 ) {
    $titles = Array();
    preg_match_all( "/\<title\>(.*)\<\/title\>/", $str, $titles );
    if (count($titles) > 1) {
        return $titles[1];   
    }
}

return ''; 
```

`preg_match_all`返回匹配的数量。这将返回您找到的第一个匹配项，如果没有要搜索的标题或文本，则返回一个空字符串。

我没有测试过这个，所以它可能需要调试。

编辑添加：

```
$links = Array();  
$URL = 'http://www.theqlick.com'; // change it for urls to grab    
// grabs the urls from URL  

function Titles($link) {
    $str = file_get_contents($link);    
    if( strlen( $str )>0 ) {    
        preg_match_all( "/\<title\>(.*)\<\/title\>/", $str, $titles );
        if (count($titles) > 1) {
            return $titles[1];   
        }
    }

    return '';
}

$file  = file_get_html($URL); 
foreach ($file->find('a') as $theelement)  {     
    $abs_url = url_to_absolute($URL, $theelement->href);     
    if (!empty($abs_url)) {
         $links[] = $abs_url; 
    } 
}

$output = Array();

foreach ($links as $thisLink) {
    $output[] = array("link" => $thisLink, "title" => Titles($thisLink));
} 
```

（再次，这是非常未经测试的）

您生成链接列表；然后，逐步浏览该列表，并为每个列表获取页面标题。你一次只做一个，所以更容易跟踪什么在哪里。

# php - MySQL 查询的 PHP If 语句

> ID：12537814
> 
> 赞同：0
> 
> 时间：2012-09-21T20:33:32.653
> 
> 标签：php, if-statement

对于我的生活，我无法弄清楚这一点，仍然是新的，所以我可能会忽略。

基于 POST 值，我想执行 3 个 MySQL 查询中的 1 个。我已经验证了每个查询都是独立工作的，当我添加 if 语句时，没有任何更新。也没有收到任何 MySQL 错误。

如果 POST 值为“on”或“off”，则运行相应的查询以更新所有列。如果 POST 值是其他值（可能是列号），请切换该列。

```
<!-- language: lang-php -->
mysql_select_db("lightup") or die(mysql_error());

if ($light=="on")
    {
        $query = mysql_query("UPDATE Homes SET     L1Status='0',L2Status='0',L3Status='0',L4Status='0',L5Status='0',L6Status='0',L7Status='0',L8Status='0',L9Status='0',L10Status='0' WHERE HomeID=$id") or die(mysql_error());
    }

elseif ($light=="off")
    {
    $query = mysql_query("UPDATE Homes SET L1Status='0',L2Status='0',L3Status='0',L4Status='0',L5Status='0',L6Status='0',L7Status='0',L8Status='0',L9Status='0',L10Status='0' WHERE HomeID=$id") or die(mysql_error());
    }

else()
    {
    $query = mysql_query("UPDATE Homes SET $lightcolumn = !$lightcolumn WHERE HomeID=$id") or die(mysql_error());   
    }

mysql_close($link); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:36:09.027

您的 last 语法有错误，请`else`删除括号，所以不要这样：

```
else() 
```

应该是这个

```
else 
```

# wcf - 南希路线导致 404

> ID：12537816
> 
> 赞同：2
> 
> 时间：2012-09-21T20:33:53.247
> 
> 标签：wcf, http-status-code-404, nancy

我继承了一个 WCF 项目，其中包含一些我需要迁移到一个新的 NancyFx 项目中的糟糕构造的路由（这些路由有效）。我需要能够在我的 Nancy 应用程序中定义响应相同 GET 请求的路由。我暂时无法更改路线。

在 WCF 项目中，一个 GET 请求...

```
http://localhost:12345/webapi/GetUsers?UserId=567&Language=en 
```

匹配这个 UriTemplate：

```
UriTemplate = "GetUsers?UserId={userId}&Language={language} 
```

我希望这将是南希的等价物

```
Get["/GetUsers?UserId={userId}&Language={language}"] = p => { ... } 
```

但相同的 GET 请求会导致 404。

有没有办法构建我的 Nancy 路由来响应这个 GET 请求？如果没有，有什么解决方法吗？

我知道这很可怕，但它是暂时的，直到我可以安排时间与我们的 UI 团队一起重写前端以调用正确的完整 URL。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T21:13:23.630

约翰，

您的路线将是`/GetUsers`（顺便说一句，您如何处理该`/webapi`部分？这是您的应用程序的基本 url 还是您正在设置模块路径？）并且您将使用该`Request.Query`成员读取查询字符串。

Query 属性返回 a `DynamicDictionary`，它使您能够以属性`Request.Query.UserId`或字典的形式访问值`Request.Query["UserId"]`

您不能将查询字符串作为模式的一部分，需要匹配才能调用路由。如果你真的想要，你可以做的是使用路由条件，它是路由声明的第二个参数。这使您可以控制一个谓词，该谓词确定该路由是否可以使用。所以你可以做这样的事情

```
Get["/GetUsers", ctx => ctx.Request.Query.UserId.HasValue && ctx.Request.Query.Language.HasValue] = p {... } 
```

然后，您可以将其全部重构为 NancyContext 上的扩展方法，使其更整洁

```
Get["/GetUsers", ctx => ctx.HasQueryValues("UserId", "Language")] = p {... } 
```

并使扩展名类似于

```
public static bool HasQueryValues(this NancyContext context, params string[] values)
{
   return values.All(x => context.Request.Query[x].HasValue);
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T17:03:33.750

继@TheCodeJunkie 的回答之后，我对他扩展`NancyContext`以提供预先检查`Query`值以确保请求有效的路由条件的想法有些过度兴奋。我进一步扩展了我，为值、集合甚至集合`NancyContext`提供相同的预检查，如下所示：`Form``Header``Files`

```
public static bool HasQuery(this NancyContext context, params string[] values)
{
    var query = context.Request.Query;
    return values.All(value => query[value].HasValue);
}

public static bool HasForm(this NancyContext context, params string[] values)
{
    var form = context.Request.Form;
    return values.All(value => form[value].HasValue);
}

public static bool HasHeader(this NancyContext context, params string[] values)
{
    var headers = context.Request.Headers;
    return values.All(value => !headers[value].FirstOrDefault().IsEmpty());
}

public static bool HasFile(this NancyContext context, params string[] values)
{
    var files = context.Request.Files;
    return values.All(value => files.Any(file => file.Key == value));
} 
```

这使我能够删除验证 Query 和 Form 值的仪式代码（当我记得这样做时，并不是每次都这样做）。所以你会得到更简洁的代码，更容易阅读，更容易记住首先进行检查，例如：

**前**

```
Post["/"]=_=>
{
    var form = Request.Form;
    if (
        !form.username.HasValue ||
        !form.password.HasValue ||
        !form.email.HasValue ||
        !form.claim.HasValue)
    {
        return HttpStatusCode.UnprocessableEntity;
    }
    //process form values with confidence
} 
```

**后**

```
Post["/", ctx => ctx.HasForm("username", "password", "email", "claim")]=_=>
{
    //process form values with confidence   
}; 
```

# sql - 实时 Oracle SQL 分析工具

> ID：12537817
> 
> 赞同：0
> 
> 时间：2012-09-21T20:33:59.893
> 
> 标签：sql, oracle

我正在寻找一种可以在运行时分析 SQL 查询的工具。我想捕获在运行时调用 Web 应用程序中的函数期间执行的所有查询。如果您能帮我解决这个问题，那就太好了。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:58:14.630

> “我想捕获在调用函数期间执行的所有查询......”

这是简单的一点：10046 事件会将会话执行的所有 SQL 写入跟踪文件，可以使用标准 tkprof 实用程序或跟踪分析器等其他工具（如果您有 Oracle 支持合同）来挖掘该文件以获取信息. 蒂姆霍尔写了一个很好的介绍：[在这里阅读](http://www.oracle-base.com/articles/10g/sql-trace-10046-trcsess-and-tkprof-10g.php)。

> “...在运行时的 Web 应用程序中。”

这更难。“Web 应用程序”通常意味着连接池，这使得很难确定哪个数据库会话链接到哪个前端活动。但是，更高版本的 Oracle 可以通过 DBMS_MONITOR 等工具提供帮助。 [了解更多](http://www.dbspecialists.com/files/presentations/tracing_ind_sessions.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:54:33.040

不确定任何工具，但`select * from v$sql;`可以提供大量信息。

它将向您显示正在运行的 SQL 查询、正在运行查询的应用程序类型，否。处理的行数、优化器成本、用户 i/o 等待时间、应用程序等待时间、缓冲获取、并发等待时间、直接写入、磁盘读取等（以及一大堆其他信息）

# android - 如何使 EditText 框高度扩大

> ID：12537819
> 
> 赞同：78
> 
> 时间：2012-09-21T20:34:17.443
> 
> 标签：android, android-edittext

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/etTweetReview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:ems="10"
        android:hint="Discuss up to 140 characters"
        android:imeOptions="actionDone"
        android:inputType="textCapSentences"
        android:lines="2"
        android:maxLength="140"
        android:paddingBottom="10dp"
        android:singleLine="false" />

    <Button
        android:id="@+id/theReviewBarButton"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginBottom="5dp"
        android:text="Submit Review"
        android:textSize="22sp" />

    <Spinner
        android:id="@+id/spinnerSort"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp" />

    <ListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="5dp"
        android:scrollbars="none"
        android:layout_marginRight="5dp"
        android:layout_marginTop="8dp" >
    </ListView>

</LinearLayout> 
```

当那个 EditText 框结束时，我希望它换行到下一行。现在，它只是继续向右移动所有离开屏幕的东西。

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-09-21T20:36:59.320

类似于另一个问题：

[Android Word-Wrap EditText 文本](https://stackoverflow.com/questions/3276380/android-word-wrap-edittext-text)

下面是一些示例 XML 代码：

```
<EditText
    android:id="@+id/edtInput"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:hint="@string/compose_hint"
    android:inputType="textCapSentences|textMultiLine"
    android:maxLength="2000"
    android:maxLines="4" /> 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-05-21T05:04:40.523

假设您一开始只想拥有一行，然后将其扩展为 5 行，并且您希望最多拥有 10 行。

```
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/etMessageBox"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:autoLink="all"
    android:hint="@string/message_edit_text_hint"
    android:lines="5"
    android:minLines="1"
    android:gravity="top|left"
    android:maxLines="10"
    android:scrollbars="none"
    android:inputType="textMultiLine|textCapSentences"/> 
```

通过增加`android:lines`，您可以定义扩展它的行数。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-06-13T05:55:30.797

只需将 android:lines="6" 添加到您的编辑文本中

```
 <Edittext
      android:id="@+id/edt_address"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:inputType="textMultiLine"
      android:maxLines="6"             
      android:lines="6"
      android:layout_marginTop="@dimen/activity_vertical_margin"
      android:gravity="left"/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-25T06:07:40.550

试试这个代码

```
<EditText
    android:id="@+id/"edittext01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:inputType="textCapSentences|textMultiLine"
    android:maxLength="100"
    android:maxLines="10"/> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-15T06:49:04.427

您需要将`EditText`身高设置为`android:layout_height="wrap_content"`

&

```
android:lines="5" 
```

这对我来说是个窍门`ConstraintLayout`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-24T07:04:03.803

从您的 EditText 中删除此行

```
android:inputType="textCapSentences" 
```

并将此行添加到您需要的行数

```
android:lines="2" 
```

希望这可以帮助你

# xaml - GridView 分组显示不正确

> ID：12537820
> 
> 赞同：0
> 
> 时间：2012-09-21T20:34:31.380
> 
> 标签：xaml, windows-8, winrt-xaml

我有一个 GroupView。它保存联系人信息，除以每个联系人姓氏的第一个字母。

我从数据中创建了一个 CollectionViewSource (contactCVS)（这是正确创建的）。

然而数据出现了一个问题：第二组数据被截断了。

此 GridView 的 XAML 代码附在下面

```
 <GridView x:Name="contactsGroupGridView"
                      ItemsSource="{Binding Source={StaticResource contactCVS}}"
                      ItemTemplate="{StaticResource ContactListTemplate}"
                      SelectionMode="None"
                      IsItemClickEnabled="True"
                      Width="Auto"
                      Background="#FFF3EFE7"
                      Margin="0,0,50,0">

                <GridView.Header>
                    <StackPanel>
                        <Border Margin="0,5,0,0"
                                Width="220"
                                Height="120"
                                BorderThickness="2"
                                CornerRadius="2"
                                BorderBrush="Blue"
                                Tapped="BorderContactsTitle_Tapped"
                                Background="LightGray">
                            <Grid HorizontalAlignment="Center"
                                  VerticalAlignment="Center"
                                  Margin="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <TextBlock TextWrapping="Wrap"
                                           Text="Contacts"
                                           FontSize="32"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="Teal"
                                           FontWeight="Bold"
                                           Margin="0" />
                                <TextBlock TextWrapping="Wrap"
                                           Text=" View All"
                                           FontSize="16"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Bottom"
                                           Foreground="Teal"
                                           FontWeight="Bold"
                                           Margin="0"
                                           Grid.Row="1" />
                            </Grid>
                        </Border>
                        <Image Height="200"
                               Width="200"
                               Source="ms-appx:///Resources/Images/Contacts.jpg"
                               HorizontalAlignment="Center"
                               Margin="0,50,0,0"
                               Stretch="UniformToFill" />
                        <TextBlock x:Name="ContactsGroupFullName"
                                   TextWrapping="Wrap"
                                   Text="{Binding FullName}"
                                   FontSize="24"
                                   FontWeight="Bold"
                                   FontFamily="Segoe UI"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Margin="0,30,0,0"
                                   Foreground="Brown" />
                        <StackPanel Margin="100,30,100,0"
                                    Orientation="Horizontal"
                                    Width="100"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Center">
                            <Button x:Name="AddContactBtn"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource AddContactAppBarButtonStyle}"
                                    Click="AddContactBtn_Click" />
                        </StackPanel>
                    </StackPanel>
                </GridView.Header>

                <GridView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}"
                                      Margin="0">
                                    <TextBlock Text="{Binding Name}"
                                               Foreground="Teal"
                                               FontSize="40"
                                               Margin="0,20" />
                                </Grid>
                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>

                        <GroupStyle.Panel>
                            <ItemsPanelTemplate>
                                <VariableSizedWrapGrid Margin="0,0,40,0"
                                                       MaximumRowsOrColumns="9" />
                            </ItemsPanelTemplate>
                        </GroupStyle.Panel>
                    </GroupStyle>
                </GridView.GroupStyle>

            </GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:44:30.820

问题在于缺少 ItemsPanel 的定义......

问题解决了。

艾坦B

# jquery - JavaScript 或 jQuery 滑动控件

> ID：12537831
> 
> 赞同：0
> 
> 时间：2012-09-21T20:36:12.983
> 
> 标签：jquery, jquery-ui, jquery-plugins

这不是关于滑动面板的问题。这是关于控制值的滑动控件的问题。

```
 Could anyone provide me with a couple of links
       to web pages where nice-looking sliding controls
       are used? 
```

比如说在订单页面（您滑动项目数量，总计会立即更新）或在配置页面（CPU、RAM、存储等）？

对于我的一生，我找不到几个月前看过的例子。

是的，我知道，jQuery UI Slider 可以设置样式，我一直在看一堆这样的例子，我什至用谷歌搜索了半个上午，搜索了各种各样的东西......但没有运气。

我只想看到其他人提出的一些优雅的解决方案，看看有什么可能。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:38:52.037

自从提出问题以来已经有一段时间了，但无论如何，这里是链接[http://egorkhmelev.github.com/jslider/](http://egorkhmelev.github.com/jslider/) - jQuery Slider 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:57:53.570

您还可以使用[http://jqueryui.com/](http://jqueryui.com/)并为滑块创建自定义主题或自定义 CSS 以添加图像或其他效果。

# windows - 远程服务器的 Web 应用模拟：LogonUser 还是 LsaLogonUser？

> ID：12537834
> 
> 赞同：3
> 
> 时间：2012-09-21T20:36:26.220
> 
> 标签：windows, authentication, web-applications

我有一个 C# Web 应用程序，它（在某些配置中）允许用户输入 Windows 凭据，然后使用它来对远程服务进行身份验证。为此，我们当前调用[LogonUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)并使用生成的令牌创建一个 WindowsIdentity，然后我们将模拟它。它工作正常，没有真正的问题。

最近，我正在阅读有关 Web 身份验证的内容，并阅读了 IIS 使用[LsaLogonUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378292%28v=vs.85%29.aspx)来创建模拟上下文的基本身份验证。我有点理解两者之间的区别，听起来我们应该使用 LsaLogonUser，但我讨厌为了不清楚的好处做出我不理解的更改。另一方面，从事 IIS 工作的人比我更了解 Windows API。

那么：哪个功能更适合 Web 应用程序？你会说使用 LogonUser 是错误的吗？为什么？是否存在一种情况（网络配置、用户权限等）可以工作而另一种不能工作的情况？使用 LogonUser 是否存在任何安全风险？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T16:48:25.637

你的问题有很多问题，这里是所有问题的快速答案，然后是一些细节。

1.  .Net 中的 Web 应用程序应使用`LogonUser`. 这是[带有示例代码的 Microsoft 知识库文章](http://support.microsoft.com/kb/306158)。
2.  用起来`LogonUser`没问题，没毛病。这是您大部分时间应该使用的功能。
3.  `LogonUser`不支持 Kerberos 服务 4 用户 (S4U)，但支持`LsaLogonUser`。从历史上看，[`LogonUser`过去需要 TCB 权限](http://www.microsoft.com/msj/0899/security/security0899.aspx)，但现在不再需要（Passport 登录除外）。[无论如何，](http://msdn.microsoft.com/en-us/magazine/cc301890.aspx)有一个聪明的方法（在该页面中查找“SSPI 的另一种用途”）。
4.  同样的风险适用于这两个功能：您不能在错误消息或日志等中泄漏密码。但是 LsaLogonUser 可以在没有密码的情况下获取令牌，这使得它在特定情况下更安全。

现在关于答案 2、3 和 4 的一些细节

**可以使用 LogonUser**

如果它支持您的用例，您应该使用 LogonUser 而不是 LsaLogonUser。大多数情况下，它确实如此，因此您使用 LogonUser。LsaLogonUser 可以工作，但它有很多参数，有些是指向必须采用特定格式的内存的指针。换句话说，LsaLogonUser 是由 C 开发人员在打包结构和自相关指针时制作的......我不知道。凉爽的 ？

**LsaLogonUser 可以给你一个没有密码的令牌 (S4U)**

在 Windows Server 2003 中引入了 Kerberos 用户服务 (S4U)。S4U 允许您调用 KDC 并为用户获取令牌，而无需提供密码。该令牌是一个识别令牌，它*不能*用于模拟用户。LogonUser 无法为您提供该令牌，但 LsaLogonUser 可以。

Keith Brown 解释了[什么是 S4U 以及如何](http://msdn.microsoft.com/en-us/magazine/cc163500.aspx)更好地使用它。

**综上所述**

只有一个用例是 LsaLogonUser 优于 LogonUser。但是由于[WindowsIdentity 为 (S4U) 提供了一个构造函数](http://msdn.microsoft.com/en-us/library/td3046fc.aspx)，我不明白为什么有人会在 .Net 应用程序中使用 LsaLogonUser 。

你的代码很好;)

# group-by - sql server 选择属性但不按该属性分组

> ID：12537837
> 
> 赞同：0
> 
> 时间：2012-09-21T20:36:44.023
> 
> 标签：group-by, sql-server-2008-r2, aggregate-functions

我正在处理一个查询来计算给定月份和年份的结果数量。但是，我还需要使用完整日期来创建月份年份字符串。我知道 select 子句中的任何内容也必须在 group by 子句中。但是，我只想按月和年分组以获得正确的计数结果。我该如何解决这个问题？

```
SELECT category, Count(ID), MONTH(aDate) AS month , YEAR(aDate) AS year, aDate,
CONVERT(CHAR(4),aDate) , 100) + CONVERT(CHAR(4),aDate) , 120) as monthYear
FROM table
GROUP BY month, year, category 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:11:46.530

您不需要使用整个日期，只需将 convert 语句用作 group by 子句的一部分

```
 SELECT category, 
        Count(ID), 
        MONTH(aDate) AS [month] , 
        YEAR(aDate) AS [year], 
        CONVERT(CHAR(4),aDate) , 100) + CONVERT(CHAR(4),aDate) , 120) as monthYear 
FROM table 
GROUP BY MONTH(aDate), 
        YEAR(aDate), 
        category,
        CONVERT(CHAR(4),aDate) , 100) + CONVERT(CHAR(4),aDate) , 120) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T04:04:52.507

```
SELECT MAX(category), Count(ID), MONTH(aDate) AS month , YEAR(aDate) AS year, MAX(aDate),
CONVERT(CHAR(4),MAX(aDate)) , 100) + CONVERT(CHAR(4),MAX(aDate)) , 120) as monthYear
FROM table
GROUP BY MONTH(aDate), YEAR(aDate) 
```

# java - 我坚持使用 alpha-beta 修剪算法实现

> ID：12537838
> 
> 赞同：2
> 
> 时间：2012-09-21T20:36:44.700
> 
> 标签：java, algorithm, alpha-beta-pruning

我正在尝试为**9Men 的 Morris 游戏实现****Game AI 。**

 **到目前为止，我的**董事会**代表如下：

```
 public class board 
    {
          public      node []gNode      = null;
          ... // so the table has 24 nodes, for 9 men morris game:
          gNode = new node[24];
          ...
          int evaluateBoard(); // evaluates the current board (tokens)
    } 
```

好的，现在每个**节点**都表示如下：

```
 public class node 
    {
     node() // constructor
     {     ...       }

     // setting current node's neighbours (maximum 4 neighbours)
     void setNeighbours(int left, int right, int top, int bottom)
     {      ...      }

     short      gOccupiedByTeam = renderer.TEAM_NOTEAM; // info if this node is occupied by a token (and a wich team this token belongs to) 
     short    []gNeighbourId    = null; // info about this node neighbours (can be max. 4 in a 9Men's morris game)
     short      gInternalID     = -1;   // board's IDs (from 0..23)
     short      gTokenID        = -1;   // this node can be occupied by a token.  (from 0 .. 8) -see below the token class.
     short      gNodeScore      = -1;   // a dummy node score.
     vector3    gLocation       = null; // 3d coordinates for this node.

    } 
```

一个**令牌**看起来像这样：

```
public class token 
{
   token(vector3 startpos, short nodeId) // Constructor.
   {     ...     }

   public   physx       gPhysX      = null;  // 3d coordinates , velocity , accel. for this Token.
   public boolean       bIsAlive    = false; // is this token alive ? (or eliminated?)
   public boolean       bFormsMill  = false; // does it form a Mill?

   public short         gNodeID     = -1; // "link" this token with a gNodeID (when placing a token on current board). See above the node class. This represents a link ID to that node.
   public short         gTokenMill1 = -1; // used when this token forms a mill (with gTokenMill1  token!)
   public short         gTokenMill2 = -1; // same.

} 
```

这是我**陷入困境**的Alpha-Beta修剪算法实现：

```
public int getBestMove(board board, int depth, int alpha, int beta, boolean bIsPlayer)
{
    // if depth reached, return current's board's Evaluation (a score).
    if (depth == 0) return board.evaluateBoard(bIsPlayer);

    // is it Player's turn ? (max?)
    if (bIsPlayer)
    {
        // QUESTIONS: 
        // retrevie all possible "boards" below ! (all new possible token moves)
        // 1\. here i should generate a new board with 1st possible move (for player token1) ?? ... then a second new board with 2nd possible move still for token1 ? .. and so on until no possible moves for token1?  
        //   (remembering that a token can move in 4 available spots - wich are a neighbour?) 
        // 
        // 2\. the problem is that if i generate 4 new boards as per token 1 above let's say, then it will "eat" lot of memory for all 18 tokens and a function recursion depth of 5 for example, right ? 
        // 3\. how do i fix point 2? 

        ArrayList<board> possible_boards = board.getAllPossibleBoards();

        // 4\. ok, some possible boards were generated, loop thru them starting with the first one and calling recursively this function, is it right ?
        for(board iterator: possible_boards)
        {
            alpha = Math.max(alpha, getBestMove(iterator, depth - 1, alpha, beta, !bIsPlayer));

            if (beta < alpha)
            {

                break;
            }
        }

        // 5\. how do i return best move to main calling function ? (wich token is it best move from all of these board's moves ?
        return alpha;
    }
    else
    {
        ArrayList<board> possible_boards = board.getAllPossibleBoards();

        for(board iterator: possible_boards)
        {

            beta = Math.min(beta, getBestMove(iterator, depth - 1, alpha, beta, !bIsPlayer));

            if (beta < alpha)
            {
                break;
            }

        }

        return beta;
    }

} 
```

好的，这是我目前的功能。我不知道即使**我在正确的轨道上**？？？

我的功能有什么问题？
请回答我上面的问题（getBestMove() 函数中的 1 到 5）。

提前谢谢你，请排除我的语言错误（我的英语不太好）

* * *

**非常**感谢您的回复！

我以为没有人会回答我:)。我真的帮助我理解我想发生的事情。

因此， **CheckWinner( *bool* )将检查当前玩家到目前为止在此***深度*是否具有非常好的优势（如**获胜**或阻止对手等**非常好的动作**等），如果是，则返回当前玩家的**BIG**分数。所有这一切都是因为玩家或对手都不会每回合都试图赢得（**大比分），对吧？**

 *****否则，如果*depth* =0 则返回当前选定板的评估（分数）（**int evaluateBoard()**），好吧。

在此之后，我必须生成一个单板（带有单个标记可能的移动）：

```
 while( board.generateNextPossibleBoard(nextBoard) ) // board generated and stored in "nextBoard". Also check if it is a valid board or no more boards to generate further. 
```

好的，现在有了一个新生成的板，递归，如果找到更好的板（具有更好**SCORE**的板），则将当前板保存到 selectedBoard。如果不是，则切断并返回（不要进一步检查树）。

再次非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:55:04.780

一般来说，您的代码是可以的，但是您应该记住一些要点。

首先，您应该检查节点（这里是棋盘）是否是最终节点（有人赢得了比赛），然后检查深度是否等于零。如果有人在该状态下获胜，您可能希望返回一个大值（用于赢得最大玩家）和一个小值（用于赢得最小玩家），例如分别为 MAXINT 和 MININT。

为避免高内存消耗，请不要生成所有可能的板。生成一个板并对其进行递归调用，然后生成另一个板并搜索它，依此类推。这样，您只需将内存用于每个堆栈帧中的一个状态。这对于具有高分支因子的搜索至关重要！

最后，您应该记录最大玩家的棋盘更新分数（更新 alpha 的地方）。

请参阅我的伪代码以获得更多说明：

```
if ( board.checkWinner(bIsPlayer) ) return board.evaluateBoard(bIsPlayer);

// if depth reached, return current's board's Evaluation (a score).
if (depth == 0) return board.evaluateBoard(bIsPlayer);

board chosenBoard;    
if (bIsPlayer)
{
    // You should implement this method, or write your board generation code here
    // returns false if no more boards could be generated
    board nextBoard;
    while( board.generateNextPossibleBoard(nextBoard) )
    {
        int v = getBestMove(iterator, depth - 1, alpha, beta, !bIsPlayer));

        if ( v > alpha )
        {
            alpha = v;
            chosenBoard = nextBoard;  // return this chosenBoard by reference ;)
        }

        if (beta < alpha)
        {
            break;
        }
    }

    return alpha;
}
else
{
    // The same for beta except you don't need to update chosenBoard :)
} 
```*******

# php - ModRewrite 忽略我的第一条规则

> ID：12537849
> 
> 赞同：0
> 
> 时间：2012-09-21T20:37:10.270
> 
> 标签：php, .htaccess, mod-rewrite

我的 htaccess 中有以下内容，位于我网站的 public_html/ 中：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^(mailinglist)/.*$ - [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

我不确定这是否有效。当我去[http://www.mysite.com/mailinglist](http://www.mysite.com/mailinglist)时很好，它不会尝试执行上面的最后一条规则。当我访问[http://www.mysite.com/mailinglist/login](http://www.mysite.com/mailinglist/login)时也可以。[http://www.mysite.com/mailinglist/campaigns](http://www.mysite.com/mailinglist/campaigns)也可以。当它不起作用时，当我访问[http://www.mysite.com/mailinglist/w/1](http://www.mysite.com/mailinglist/w/1)时，它使用最后一个 RewriteRule，即：

```
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

如何让这个 htaccess 完全忽略我的 /mailinglist 目录以及其中的任何内容？在那个目录中，我有一个不同的 htaccess，我希望该目录使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:55:06.813

尝试将您的邮件列表规则更改为：

```
RewriteRule ^/?mailinglist - [L,NC] 
```

或者您可以将其添加为 index.php 规则的例外：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/mailinglist
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

# java - 以静态方法访问spring bean

> ID：12537851
> 
> 赞同：57
> 
> 时间：2012-09-21T20:37:23.770
> 
> 标签：java, spring

我有一个带有静态方法的 Util 类。在我的 Util 类中，我想使用 spring beans，所以我将它们包含在我的 util 类中。据我所知，将 spring bean 用作静态字段并不是一个好习惯。但是有没有办法以静态方法访问 spring bean？

我的例子：

```
public class TestUtils {

   private static TestBean testBean;

   public void setTestBean(TestBean testBean) {
     TestUtils.testBean = testBean;
   }

  public static String getBeanDetails() {
    return beanName = testBean.getDetails();
  }
} 
```

我在许多论坛上看到这不是最佳实践。有人可以告诉我如何处理这种情况吗？

我的配置文件：

```
<bean id="testUtils" class="com.test.TestUtils">
 <property name="testBean" ref="testBean" />
</bean> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-16T06:03:35.867

我的方法是针对希望访问的 bean 实现`InitializingBean`或使用`@PostConstruct`，并包含对其自身的静态引用。

例如：

```
@Service
public class MyBean implements InitializingBean {
    private static MyBean instance;

    @Override
    public void afterPropertiesSet() throws Exception {
        instance = this;
    }

    public static MyBean get() {
        return instance;
    }
} 
```

因此，您的静态类中的用法只是：

```
MyBean myBean = MyBean.get(); 
```

这样，不需要 XML 配置，不需要将 bean 作为构造函数参数传入，调用者不需要知道或关心 bean 是使用 Spring 连接起来的（即，不需要凌乱`ApplicationContext`变量）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-22T15:08:18.273

静态方法的结果应该只取决于传递给方法的参数，因此不需要调用任何 bean。

如果您需要调用另一个 bean，那么您的方法应该是独立 bean 的成员方法。

其他答案为您提供了可行的解决方案，但可以完成的事实并不意味着应该完成。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-09-22T15:24:20.560

您还可以实现[ApplicationContextAware](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContextAware.html)接口，如下所示：

```
@Component
public class TestUtils implements ApplicationContextAware {

  private static ApplicationContext ac;

  public static String getBeanDetails() {
    return beanName = ((TestBean) ac.getBean("testBean")).getDetails();
  }

  @Override
  public void setApplicationContext(ApplicationContext ac) {
    TestUtils.ac = ac;
  }

} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-03-14T21:13:28.213

这对我有用。

使用 xml 配置（**老派**）定义您的 bean：

```
<bean id="someBean1" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName"><value>${db.driver}</value></property>     
    <property name="url"><value>${db.url}</value></property>
    <property name="username"><value>${db.username_seg}</value></property>
    <property name="password"><value>${db.password_seg}</value></property>
</bean> 
```

或者用java而不是xml定义它（**新学校**）

```
@Bean(name = "someBean2")
public MySpringComponent loadSomeSpringComponent() {

  MySpringComponent bean = new MySpringComponent();
  bean.setSomeProperty("1.0.2");
  return bean;
} 
```

# 以静态方法访问spring bean

```
import org.springframework.web.context.ContextLoader;
import org.springframework.web.context.WebApplicationContext;

public class TestUtils {

  public static void getBeansFromSpringContext() {
    WebApplicationContext context = ContextLoader.getCurrentWebApplicationContext();
    //for spring boot apps
    //ApplicationContext context = SpringApplication.run(Application.class, args)
    DataSource datasource  = (DataSource)context.getBean("someBean1");
    MySpringComponent springBean  = (MySpringComponent)context.getBean("someBean2");
  }
} 
```

高温高压

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-04-20T11:57:30.253

# 注意：这不是 Spring 的预期使用方式，并且会产生严重的副作用（难以解决的错误等）。请尝试重构您的代码以使其不再需要它！

# 通用解决方案

**您可以创建一个允许从静态上下文访问任何 Bean 的类。这里的大多数其他答案仅显示如何静态访问单个类。**

添加了下面代码中的代理，以防有人在自动装配 ApplicationContext 之前调用 getBean() 方法（因为这会导致空指针）。**此处发布的其他解决方案均未处理该空指针。**

我的博客上的详细信息：[https ://tomcools.be/post/apr-2020-static-spring-bean/](https://tomcools.be/post/apr-2020-static-spring-bean/)

# 用法

```
UserRepository userRepo = StaticContextAccessor.getBean(UserRespository.class) 
```

# StaticContextAccessor 的完整代码：

```
@Component
public class StaticContextAccessor {

    private static final Map<Class, DynamicInvocationhandler> classHandlers = new HashMap<>();
    private static ApplicationContext context;

    @Autowired
    public StaticContextAccessor(ApplicationContext applicationContext) {
        context = applicationContext;
    }

    public static <T> T getBean(Class<T> clazz) {
        if (context == null) {
            return getProxy(clazz);
        }
        return context.getBean(clazz);
    }

    private static <T> T getProxy(Class<T> clazz) {
        DynamicInvocationhandler<T> invocationhandler = new DynamicInvocationhandler<>();
        classHandlers.put(clazz, invocationhandler);
        return (T) Proxy.newProxyInstance(
                clazz.getClassLoader(),
                new Class[]{clazz},
                invocationhandler
        );
    }

    //Use the context to get the actual beans and feed them to the invocationhandlers
    @PostConstruct
    private void init() {
        classHandlers.forEach((clazz, invocationHandler) -> {
            Object bean = context.getBean(clazz);
            invocationHandler.setActualBean(bean);
        });
    }

    static class DynamicInvocationhandler<T> implements InvocationHandler {

        private T actualBean;

        public void setActualBean(T actualBean) {
            this.actualBean = actualBean;
        }

        @Override
        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
            if (actualBean == null) {
                throw new RuntimeException("Not initialized yet! :(");
            }
            return method.invoke(actualBean, args);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-11-01T19:15:20.197

与@nullPainter 的响应类似，但我们做了以下操作。不需要构建后逻辑。它只是在注入期间直接设置静态成员（在 @Autowired 方法中）。

```
@Service
public class MyUtil {

    private static MyManager myManager;

    @Autowired(required = true)
    public void setMyManager(MyManager manager) {
        myManager = manager;
    }

    public static MyManager getMyManager() {
        return myManager;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-22T13:44:05.830

这就是我从弹簧注入静态场的方式。

```
<bean id="..." class="...">
 <property name="fieldToBeInjected">
            <util:constant static-field="CONSTANT_FIELD" />
        </property>
</bean> 
```

也许这也会对您有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-21T23:32:25.110

您概述的方法是我所看到的用于将 Spring bean 注入实用程序类的方法。

```
<bean id="testUtils" class="com.test.TestUtils">
 <property name="testBean" ref="testBean" />
</bean> 
```

另一种选择是：

```
<bean name="methodInvokingFactoryBean" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
        <property name="staticMethod" value="TestUtils.setInstance"/>
        <property name="arguments">
            <list>
                <ref bean="testBean"/>
            </list>
       </property>
</bean> 
```

和：

```
public class TestUtils {

   private static testBean;

   public static void setInstance(TestBean anInstance) {
     testBean = anInstance;
   }

  public static String getBeanDetails() {
    return testBean.getDetails();
  }
} 
```

更多细节在[这里](http://www.connorgarvey.com/blog/?p=105)和[这里](http://planproof-fool.blogspot.com/2010/03/spring-setting-static-fields.html)

# java - 在 BeagleBoard 上运行带/不带操作系统的 Java 应用程序

> ID：12537852
> 
> 赞同：1
> 
> 时间：2012-09-21T20:37:44.177
> 
> 标签：java, eclipse, embedded, beagleboard

我正在使用 BeagleBoard XM 进行一个项目。我没有嵌入式系统的经验。就此而言，我对操作系统没有任何经验。我确实有使用 Java 和 Eclipse 的经验，这就是为什么我想知道有没有办法在我的桌面上的 Eclipse 中编写 Java 应用程序并在没有操作系统（例如 Angstrom）的 BeagleBoard 上运行它。是否可以让 BeagleBoard 在没有用户输入的情况下运行该程序？也许我可以编译它然后将它加载到 BeagleBoard？

谢谢。

# php - 使用 PHP 和 HTML 将字节数组转换为图像

> ID：12537856
> 
> 赞同：3
> 
> 时间：2012-09-21T20:38:26.400
> 
> 标签：php, html

我正在使用 PHP 从 SOAP 服务中检索数据，其中一部分是以 base64 编码的图像的字节数组，我想在浏览器中显示该图像。数据检索步骤工作正常，但我找不到在浏览器中显示此图像的单一方法。
假设字节数组在 PHP 中存储为 $byteArray：

```
$img = "<img src= 'data:image/jpeg;base64, $byteArray' />";
print($img); 
```

我希望该代码在浏览器中显示图像，但浏览器的解析器一直失败。知道我做错了什么吗？

我在这里使用的一个示例 byteArray 是：“[B@14a3da8”

在此先感谢，布赖恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T20:51:58.157

如果您运行此代码：

```
$imgData = "/9j/4AAQSkZJRgABAQEBLAEsAAD/7gAOQWRvYmUAZAAAAAAA/+0TrFBob3Rvc2hvcCAzLjAAOEJJ
TQQEAAAAAAAHHAIAAAIAAAA4QklNBCUAAAAAABDo8VzzL8EYoaJ7Z63FZNW6OEJJTQQvAAAAAABK
uB8BAEgAAABIAAAAAAAAAAAAAAAAAwAATAIAAPT////0////DAMAAFgCAAAAAQAFAAD8AwAAAQAP
JwEAcABzAGQAAAAuAHAAcwA4QklNA+0AAAAAABABLAAAAAEAAQEsAAAAAQABOEJJTQQmAAAAAAAO
AAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAAeOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAA
CQAAAAAAAAAAAQA4QklNBAoAAAAAAAEAADhCSU0nEAAAAAAACgABAAAAAAAAAAI4QklNA/UAAAAA
AEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEAMgAAAAEAWgAAAAYAAAAAAAEA
NQAAAAEALQAAAAYAAAAAAAE4QklNA/gAAAAAAHAAAP////////////////////////////8D6AAA
AAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAA
AP////////////////////////////8D6AAAOEJJTQQAAAAAAAACAAA4QklNBAIAAAAAAAoAAAAA
AAAAAQABOEJJTQQwAAAAAAAFAQEBAQEAOEJJTQQtAAAAAAAGAAEAAAADOEJJTQQIAAAAAAAQAAAA
AQAAAkAAAAJAAAAAADhCSU0EHgAAAAAABAAAAAA4QklNBBoAAAAAA08AAAAGAAAAAAAAAAAAAAFJ
AAAF8gAAAA0AbABvAGcAbwBfAGkAZABfADIAOAAxADYAMgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA
AQAAAAAAAAAAAAAF8gAAAUkAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAQAAAA
AQAAAAAAAG51bGwAAAACAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxv
bmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAAUkAAAAAUmdodGxvbmcAAAXyAAAA
BnNsaWNlc1ZsTHMAAAABT2JqYwAAAAEAAAAAAAVzbGljZQAAABIAAAAHc2xpY2VJRGxvbmcAAAAA
AAAAB2dyb3VwSURsb25nAAAAAAAAAAZvcmlnaW5lbnVtAAAADEVTbGljZU9yaWdpbgAAAA1hdXRv
R2VuZXJhdGVkAAAAAFR5cGVlbnVtAAAACkVTbGljZVR5cGUAAAAASW1nIAAAAAZib3VuZHNPYmpj
AAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRv
bWxvbmcAAAFJAAAAAFJnaHRsb25nAAAF8gAAAAN1cmxURVhUAAAAAQAAAAAAAG51bGxURVhUAAAA
AQAAAAAAAE1zZ2VURVhUAAAAAQAAAAAABmFsdFRhZ1RFWFQAAAABAAAAAAAOY2VsbFRleHRJc0hU
TUxib29sAQAAAAhjZWxsVGV4dFRFWFQAAAABAAAAAAAJaG9yekFsaWduZW51bQAAAA9FU2xpY2VI
b3J6QWxpZ24AAAAHZGVmYXVsdAAAAAl2ZXJ0QWxpZ25lbnVtAAAAD0VTbGljZVZlcnRBbGlnbgAA
AAdkZWZhdWx0AAAAC2JnQ29sb3JUeXBlZW51bQAAABFFU2xpY2VCR0NvbG9yVHlwZQAAAABOb25l
AAAACXRvcE91dHNldGxvbmcAAAAAAAAACmxlZnRPdXRzZXRsb25nAAAAAAAAAAxib3R0b21PdXRz
ZXRsb25nAAAAAAAAAAtyaWdodE91dHNldGxvbmcAAAAAADhCSU0EKAAAAAAADAAAAAE/8AAAAAAA
ADhCSU0EEQAAAAAAAQEAOEJJTQQUAAAAAAAEAAAAEjhCSU0EDAAAAAAL3gAAAAEAAACgAAAAIwAA
AeAAAEGgAAALwgAYAAH/2P/gABBKRklGAAECAABIAEgAAP/tAAxBZG9iZV9DTQAC/+4ADkFkb2Jl
AGSAAAAAAf/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwM
DAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEM
DAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAIwCgAwEiAAIRAQMRAf/dAAQACv/EAT8A
AAEFAQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoL
EAABBAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT
8OHxY3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2
xtbm9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFC
I8FS0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE
1OT0pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A8tqqtutZTSx1ltjg
yutgLnOc47WMYxvuc9zl0vSug9OpyL8HOqd1LqrKLbPsWO87KXVMNgpttoD35WZY8em6jHd6eN/h
Lbb/ANDj1vqtdfiu6lkYrG2ZTMLbQHMD/ddk4eG9rWu/OtpyLaPb/pV1mNawY2djjCxMTCootb67
m249WYPTbXk3s+z2125VDMwb2fo7vSw7/wBB9mtZ+llEdWHJM6gOAzpX1dddXTm4l+HkWuDGYuNm
V5GQ57jsZWMX7I5lL/Udt2ZmZjWIeX0L6uMza8TEt6hkfadcOymmq8XDc6p3p1+tiWey+q6n/rfq
fzat9OyPq19trqwsJ7s57bGUW491lVHqvY6uhmP9uGVk+vY52zGyrfR9HK9D9ApvfXTiP6F0ltmO
crFrzKrHvFlzzfVXk5fSmWsro9Ki7Hbt2VV+pmZOL6V39I9Kt3CjiN7kef8AKTh9Z6HT0vKqppyR
mV3Utvba0NAEusqfV+ityKnuqspex76rrK1RFLeOT4BbHUa2nD6O46j7BA+WVmqoyqR4DwGikELV
xaalqihx4bHmU/oOHh8ldFIRBUP9QnDEgzc/0fHT5Lo8/wCoHUOn1XWZPUMBrqK3Wmn1HCxwYHH9
FW+tu9z9myv+Ws30d0fEflXZ/XjqOAcqzH+wYudZdjODM4kOsqLnWtaKiwP/AJn+eZ70faO1brJZ
TYrxt8+OJaJljhAkgsdoP3nfutTHEvifSeGjUucxwEeK9Z6nbS79qZYy6bGZXSfSrYLQXu2jLfu2
z9B/2hja/wCWqnUrs3H+qluLXm19QssxnfabL7mMLa/TG+nFxaPp2bP0dTHfn/zvqIcCBnvo+XjG
sc4Na3e52jWtBJJ/ktbu3JHFt3OYaXh7Ppt2klv9dsbmrv8A6u4NHRepZuKcvHPUMnBDsDJY4BjX
O9UGn1X/AEbt7aLHs/0a2MfMw/29jtyMimzOq6U6rqF4sbtc82Yx9F9stY57ntybNn+jsQMEnNR0
FvkxxXQT6boa1rnHa7Rrv5t7tPa2yf0f76g/Fcw7XsLHdw4Fp+5y9K6J1yzP6Nm2uzMXA6vfk1uu
3wxppb9mprrZS4Pdc12NVbi1sayz9J/xq5//ABgtL/rZkkEyaqJnt+jCaYro5CZGNVTyJoUDSQrz
q3Dgz8R/chua4ctn4IGLKJNIsITQrLtnfQ+YhDc0dtUwxC4Sf//Q4XoGRdjUdVysd/p3Y+JVZU8d
ntzcB7Ha/wApq1+m1WHrOZ1LHpfm4+T06/JZW8vtOywfZ78O6z33fobPXw/Vf7/5u9ZP1XbgXO6j
iZ+S3EqysQMa9xALnMyMXK9Ct1hZU2y5tDmMfa/06/prexab8lg6b6mNg9Notbk49WH1DHdY4t9u
TXfYy9tuTnZtH81lXs9KnIpqpp+yYltnpzXqwy0vp/3rkZXQsjEtJtt+y4DiHYuZkBzTZW4C2iyq
iplmTZb6b2er6dXp0X/o7ba1vZduF+0sHrDx9qjGoycvJsPpis49bLWNbh0FrWZWf+h+zWXZF9H2
jJ/mf0D0G2r61VZF2Ze/q19t7zY7H6Wbhjjcd3p/tFvrVbafobMWjIr/AO7KsdU6p1yqvByOo5l/
TOnnHrc+hs/ab7vd61FX2r1Mi9zYZvys2x+Ph/8AG+lRc7ipYbJG3Xq4fUrfVwekXv2t9TFucQ0A
NB+2ZjiGNH0WN3e1Gb0Hrc0gYjychzWUwWGXPYb6mna/9H6tLfVr9XZvWd1jrV/V8gXWBtLK2ejj
0s4ZXJd73w119z3vdbfe/wDnbf3FvD68Y7H4dtWE91mLbjWv3vra0jHoOE9rPRqbbY+9j97H5dl/
2b/Ap4mRsuEdNWjT0nqlzK314r3subU6twLfc297sfFdq7/DXsfWxEw+ldUzHXNxMV9xx3+nc1pb
LX+79HDnDe/9G/8Am1Yp+uGFjmuujDuGPjNwq8ffax1m3DvszrDe5tbGb7/W9Nnpt/Rp8X609Cxr
rX14OUWW5VGeGOyK59eh11v0/Q/o7/Wb+j2+p7P5xOGWQ6IOMFrYvT8/LYx+Njuta+00NILR+kax
176n73N9PbSx9n6RFr6P1V1ePYzDfszHNbjn2jeXgup/O9nrNb+i9XZ6v5iqYv1jtpp6uwgl/VmO
EsgNrse5/qWe7/gLr8f2/wCkWlX9dKqX1ZNWG77W5+E7M3Wj0nNwWmutuKxtfqUuvn3+o6z0lJ94
mNqWHDE7tejo/UsgNNOKXh7PVaZYAWF5oD/e9v8AhmekoUdI6llXXUY2G+y7GdtvYAAWOkt9N28t
/Suc12yr+cerLfrbi449LEw3GiqirHobkuruPsyT1C5+Q3021P3bvSo2s/Q/zyFh/WjDoysp9+Ld
fj259fU8drbgLW20ue+urIttZb61LvU/SO/nUjzEzeg8FDBEbIP2T1E1lzcR+zbS86N4yXeliOIn
/D2/o/8Az4mv6H1Omr1LsNzagyy3cdhbspIbkP8Aa7/Bb2q/ifXquk4bsjENhpNrswNeGtuPqOyc
AM3D2NwbbPz1XH1vx/2Nb023HfZY/EGNXdvbDbHer9pv2bf5u/1KfZ/wSjOWR6BcMbZ6Vf8AWHpe
GbsXplGRQwNzWXZFTbHVi4elVkU2C2u2pln2f/oKrn9D+tWbdf1HNwrbLHuJut9gaPTP2fY1rX+1
lLmeiiYn1zx8enGpdhvfXVRj4+Q02NHqMpZmVWhvt9nq/ba3s/c9BUb/AKyUW/aZof8ArPVmdVHu
GjWep+rcfzn6b+c+gmGZ7BcIAG2J+rXWze7HGETcxoc9gfUS0F3ot9T9L7Her+j2P96rW9A60ykX
PwLK6ibhufA1xxY/LaWF25rqGUXbv+LWxd9dsIZmZmY+Ed+YGbmXtx3sBZkDNduZVj0/aNzP0bLc
r18pln6b11B/14xDjZWN9kudXfTlMpL7Q57Lcl+Y8ZD3ua51uzH6j6Fn59vpppkey4Bzf+Z/1ifZ
6QwHvt27zU11e4N9vvfW2zez+cr+mszPwcnp2VZhZlJx8mqPUqdEjcBY2dpd+Y5dFlfXPp1vXOnd
Yrw7WuwrRbbWTR7w1jK2tF9WNVkv/m/+1V2Ts/wXprkXOkkjQEkgJvEuAL//0fKkkkkVJcb+eb9P
/rX0v7Ks9R/nmf0n+bH9K+ny76H/AAP/AH9UUk8IKUT5qYnz/BV0k8LS2hP8r8FIz5/OFTSRQ29f
9YT6/wCsKmkihua/6wm18vwVRJJTb1/1hMJg8/KFVSQS2TP8r8EMz5oSSCQzPzUUySafquCkkkkw
pf/ZOEJJTQQhAAAAAABVAAAAAQEAAAAPAEEAZABvAGIAZQAgAFAAaABvAHQAbwBzAGgAbwBwAAAA
EwBBAGQAbwBiAGUAIABQAGgAbwB0AG8AcwBoAG8AcAAgAEMAUwAzAAAAAQA4QklND6AAAAAAARxt
YW5pSVJGUgAAARA4QklNQW5EcwAAAPAAAAAQAAAAAQAAAAAAAG51bGwAAAADAAAAAEFGU3Rsb25n
AAAAAAAAAABGckluVmxMcwAAAAFPYmpjAAAAAQAAAAAAAG51bGwAAAADAAAAAEZySURsb25nJym+
kgAAAABGckRsbG9uZwAAA+gAAAAARnJHQWRvdWJAPgAAAAAAAAAAAABGU3RzVmxMcwAAAAFPYmpj
AAAAAQAAAAAAAG51bGwAAAAEAAAAAEZzSURsb25nAAAAAAAAAABBRnJtbG9uZwAAAAAAAAAARnNG
clZsTHMAAAABbG9uZycpvpIAAAAATENudGxvbmcAAAABAAA4QklNUm9sbAAAAAgAAAAAAAAAADhC
SU0PoQAAAAAAHG1mcmkAAAACAAAAEAAAAAEAAAAAAAAAAQAAAAA4QklNBAYAAAAAAAcABgAAAAEB
AP/hDPhFeGlmAABNTQAqAAAACAAHARIAAwAAAAEAAQAAARoABQAAAAEAAABiARsABQAAAAEAAABq
ASgAAwAAAAEAAgAAATEAAgAAABwAAAByATIAAgAAABQAAACOh2kABAAAAAEAAACkAAAA0AAAASwA
AAABAAABLAAAAAFBZG9iZSBQaG90b3Nob3AgQ1MzIFdpbmRvd3MAMjAxMjowMjowNSAxNToxMTo0
NgAAAAADoAEAAwAAAAH//wAAoAIABAAAAAEAAAXyoAMABAAAAAEAAAFJAAAAAAAAAAYBAwADAAAA
AQAGAAABGgAFAAAAAQAAAR4BGwAFAAAAAQAAASYBKAADAAAAAQACAAACAQAEAAAAAQAAAS4CAgAE
AAAAAQAAC8IAAAAAAAABLAAAAAEAAAEsAAAAAf/Y/+AAEEpGSUYAAQIAAEgASAAA/+0ADEFkb2Jl
X0NNAAL/7gAOQWRvYmUAZIAAAAAB/9sAhAAMCAgICQgMCQkMEQsKCxEVDwwMDxUYExMVExMYEQwM
DAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQ0LCw0ODRAODhAUDg4OFBQODg4OFBEM
DAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAjAKADASIAAhEB
AxEB/90ABAAK/8QBPwAAAQUBAQEBAQEAAAAAAAAAAwABAgQFBgcICQoLAQABBQEBAQEBAQAAAAAA
AAABAAIDBAUGBwgJCgsQAAEEAQMCBAIFBwYIBQMMMwEAAhEDBCESMQVBUWETInGBMgYUkaGxQiMk
FVLBYjM0coLRQwclklPw4fFjczUWorKDJkSTVGRFwqN0NhfSVeJl8rOEw9N14/NGJ5SkhbSVxNTk
9KW1xdXl9VZmdoaWprbG1ub2N0dXZ3eHl6e3x9fn9xEAAgIBAgQEAwQFBgcHBgU1AQACEQMhMRIE
QVFhcSITBTKBkRShsUIjwVLR8DMkYuFygpJDUxVjczTxJQYWorKDByY1wtJEk1SjF2RFVTZ0ZeLy
s4TD03Xj80aUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9ic3R1dnd4eXp7fH/9oADAMBAAIRAxEA
PwDy2qq261lNLHWW2ODK62Auc5zjtYxjG+5z3OXS9K6D06nIvwc6p3Uuqsots+xY7zspdUw2Cm22
gPflZljx6bqMd3p43+Ettv8A0OPW+q11+K7qWRisbZlMwttAcwP912Th4b2ta7862nIto9v+lXWY
1rBjZ2OMLExMKii1vrubbj1Zg9NteTez7PbXblUMzBvZ+ju9LDv/AEH2a1n6WUR1YckzqA4DOlfV
111dObiX4eRa4MZi42ZXkZDnuOxlYxfsjmUv9R23ZmZmNYh5fQvq4zNrxMS3qGR9p1w7KaarxcNz
qnenX62JZ7L6rqf+t+p/Nq307I+rX22urCwnuzntsZRbj3WVUeq9jq6GY/24ZWT69jnbMbKt9H0c
r0P0Cm99dOI/oXSW2Y5ysWvMqse8WXPN9VeTl9KZayuj0qLsdu3ZVX6mZk4vpXf0j0q3cKOI3uR5
/wApOH1nodPS8qqmnJGZXdS29trQ0AS6yp9X6K3Iqe6qyl7HvqusrVEUt45PgFsdRracPo7jqPsE
D5ZWaqjKpHgPAaKQQtXFpqWqKHHhseZT+g4eHyV0UhEFQ/1CcMSDNz/R8dPkujz/AKgdQ6fVdZk9
QwGuordaafUcLHBgcf0Vb6273P2bK/5azfR3R8R+Vdn9eOo4ByrMf7Bi51l2M4MziQ6youda1oqL
A/8Amf55nvR9o7VusllNivG3z44lomWOECSCx2g/ed+61McS+J9J4aNS5zHAR4r1nqdtLv2pljLp
sZldJ9KtgtBe7aMt+7bP0H/aGNr/AJaqdSuzcf6qW4tebX1CyzGd9psvuYwtr9Mb6cXFo+nZs/R1
Md+f/O+ohwIGe+j5eMaxzg1rd7naNa0Ekn+S1u7ckcW3c5hpeHs+m3aSW/12xuau/wDq7g0dF6lm
4py8c9QycEOwMljgGNc71QafVf8ARu3tosez/RrYx8zD/b2O3IyKbM6rpTquoXixu1zzZjH0X2y1
jnue3Js2f6OxAwSc1HQW+THFdBPpuhrWucdrtGu/m3u09rbJ/R/vqD8VzDtewsd3DgWn7nL0ronX
LM/o2ba7MxcDq9+TW67fDGmlv2amutlLg91zXY1VuLWxrLP0n/Grn/8AGC0v+tmSQTJqome36MJp
iujkJkY1VPImhQNJCvOrcODPxH9yG5rhy2fggYsok0iwhNCsu2d9D5iENzR21TDELhJ//9DhegZF
2NR1XKx3+ndj4lVlTx2e3NwHsdr/ACmrX6bVYes5nUsel+bj5PTr8llby+07LB9nvw7rPfd+hs9f
D9V/v/m71k/VduBc7qOJn5LcSrKxAxr3EAuczIxcr0K3WFlTbLm0OYx9r/Tr+mt7FpvyWDpvqY2D
02i1uTj1YfUMd1ji325Nd9jL225Odm0fzWVez0qcimqmn7JiW2enNerDLS+n/euRldCyMS0m237L
gOIdi5mQHNNlbgLaLKqKmWZNlvpvZ6vp1enRf+jttrW9l24X7SwesPH2qMajJy8mw+mKzj1stY1u
HQWtZlZ/6H7NZdkX0faMn+Z/QPQbavrVVkXZl7+rX23vNjsfpZuGONx3en+0W+tVtp+hsxaMiv8A
7sqx1TqnXKq8HI6jmX9M6ecetz6Gz9pvu93rUVfavUyL3Nhm/KzbH4+H/wAb6VFzuKlhskbderh9
St9XB6Re/a31MW5xDQA0H7ZmOIY0fRY3d7UZvQetzSBiPJyHNZTBYZc9hvqadr/0fq0t9Wv1dm9Z
3WOtX9XyBdYG0srZ6OPSzhlcl3vfDXX3Pe91t97/AOdt/cW8Prxjsfh21YT3WYtuNa/e+trSMeg4
T2s9Gpttj72P3sfl2X/Zv8CniZGy4R01aNPSeqXMrfXivey5tTq3At9zb3ux8V2rv8Nex9bETD6V
1TMdc3ExX3HHf6dzWlstf7v0cOcN7/0b/wCbVin64YWOa66MO4Y+M3Crx99rHWbcO+zOsN7m1sZv
v9b02em39GnxfrT0LGutfXg5RZblUZ4Y7Irn16HXW/T9D+jv9Zv6Pb6ns/nE4ZZDog4wWti9Pz8t
jH42O61r7TQ0gtH6RrHXvqfvc309tLH2fpEWvo/VXV49jMN+zMc1uOfaN5eC6n872es1v6L1dnq/
mKpi/WO2mnq7CCX9WY4SyA2ux7n+pZ7v+Auvx/b/AKRaVf10qpfVk1Ybvtbn4TszdaPSc3Baa624
rG1+pS6+ff6jrPSUn3iY2pYcMTu16Oj9SyA004peHs9VplgBYXmgP972/wCGZ6ShR0jqWVddRjYb
7LsZ229gABY6S303by39K5zXbKv5x6st+tuLjj0sTDcaKqKsehuS6u4+zJPULn5DfTbU/du9Kjaz
9D/PIWH9aMOjKyn34t1+Pbn19Tx2tuAtbbS5766si21lvrUu9T9I7+dSPMTN6DwUMERsg/ZPUTWX
NxH7NtLzo3jJd6WI4if8Pb+j/wDPia/ofU6avUuw3NqDLLdx2FuykhuQ/wBrv8Fvar+J9eq6Thuy
MQ2Gk2uzA14a24+o7JwAzcPY3Bts/PVcfW/H/Y1vTbcd9lj8QY1d29sNsd6v2m/Zt/m7/Up9n/BK
M5ZHoFwxtnpV/wBYel4ZuxemUZFDA3NZdkVNsdWLh6VWRTYLa7amWfZ/+gquf0P61Zt1/Uc3Ctss
e4m632Bo9M/Z9jWtf7WUuZ6KJifXPHx6cal2G99dVGPj5DTY0eoylmZVaG+32er9trez9z0FRv8A
rJRb9pmh/wCs9WZ1Ue4aNZ6n6tx/Ofpv5z6CYZnsFwgAbYn6tdbN7scYRNzGhz2B9RLQXei31P0v
sd6v6PY/3qtb0DrTKRc/AsrqJuG58DXHFj8tpYXbmuoZRdu/4tbF312whmZmZj4R35gZuZe3HewF
mQM125lWPT9o3M/RstyvXymWfpvXUH/XjEONlY32S51d9OUykvtDnstyX5jxkPe5rnW7MfqPoWfn
2+mmmR7LgHN/5n/WJ9npDAe+3bvNTXV7g32+99bbN7P5yv6azM/ByenZVmFmUnHyao9Sp0SNwFjZ
2l35jl0WV9c+nW9c6d1ivDta7CtFttZNHvDWMra0X1Y1WS/+b/7VXZOz/BemuRc6SSNASSAm8S4A
v//R8qSSSRUlxv55v0/+tfS/sqz1H+eZ/Sf5sf0r6fLvof8AA/8Af1RSTwgpRPmpifP8FXSTwtLa
E/yvwUjPn84VNJFDb1/1hPr/AKwqaSKG5r/rCbXy/BVEklNvX/WEwmDz8oVVJBLZM/yvwQzPmhJI
JDM/NRTJJp+q4KSSSTCl/9n/4Q+oaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA/eHBhY2tl
dCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEg
eG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDQuMS1jMDM2
IDQ2LjI3NjcyMCwgTW9uIEZlYiAxOSAyMDA3IDIyOjQwOjA4ICAgICAgICAiPiA8cmRmOlJERiB4
bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8
cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4YXA9Imh0dHA6Ly9ucy5hZG9iZS5j
b20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIg
eG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxu
czp4YXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0
dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9
Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRv
YmUuY29tL2V4aWYvMS4wLyIgeGFwOkNyZWF0ZURhdGU9IjIwMTItMDItMDVUMTU6MTE6NDYrMDE6
MDAiIHhhcDpNb2RpZnlEYXRlPSIyMDEyLTAyLTA1VDE1OjExOjQ2KzAxOjAwIiB4YXA6TWV0YWRh
dGFEYXRlPSIyMDEyLTAyLTA1VDE1OjExOjQ2KzAxOjAwIiB4YXA6Q3JlYXRvclRvb2w9IkFkb2Jl
IFBob3Rvc2hvcCBDUzMgV2luZG93cyIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiBwaG90b3Nob3A6
Q29sb3JNb2RlPSI0IiBwaG90b3Nob3A6SGlzdG9yeT0iIiB4YXBNTTpJbnN0YW5jZUlEPSJ1dWlk
OjA4RThFNzdBMDI1MEUxMTE4NEQyRDNBNzU0Qzg1N0Y0IiB4YXBNTTpEb2N1bWVudElEPSJ1dWlk
OjA3RThFNzdBMDI1MEUxMTE4NEQyRDNBNzU0Qzg1N0Y0IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0
aWZmOlhSZXNvbHV0aW9uPSIzMDAwMDAwLzEwMDAwIiB0aWZmOllSZXNvbHV0aW9uPSIzMDAwMDAw
LzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiB0aWZmOk5hdGl2ZURpZ2VzdD0iMjU2LDI1
NywyNTgsMjU5LDI2MiwyNzQsMjc3LDI4NCw1MzAsNTMxLDI4MiwyODMsMjk2LDMwMSwzMTgsMzE5
LDUyOSw1MzIsMzA2LDI3MCwyNzEsMjcyLDMwNSwzMTUsMzM0MzI7NjRDQUVBMkYwQUM2QTMxREYz
Nzc2NkI2MUI3Q0FFQTkiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIxNTIyIiBleGlmOlBpeGVsWURp
bWVuc2lvbj0iMzI5IiBleGlmOkNvbG9yU3BhY2U9Ii0xIiBleGlmOk5hdGl2ZURpZ2VzdD0iMzY4
NjQsNDA5NjAsNDA5NjEsMzcxMjEsMzcxMjIsNDA5NjIsNDA5NjMsMzc1MTAsNDA5NjQsMzY4Njcs
MzY4NjgsMzM0MzQsMzM0MzcsMzQ4NTAsMzQ4NTIsMzQ4NTUsMzQ4NTYsMzczNzcsMzczNzgsMzcz
NzksMzczODAsMzczODEsMzczODIsMzczODMsMzczODQsMzczODUsMzczODYsMzczOTYsNDE0ODMs
NDE0ODQsNDE0ODYsNDE0ODcsNDE0ODgsNDE0OTIsNDE0OTMsNDE0OTUsNDE3MjgsNDE3MjksNDE3
MzAsNDE5ODUsNDE5ODYsNDE5ODcsNDE5ODgsNDE5ODksNDE5OTAsNDE5OTEsNDE5OTIsNDE5OTMs
NDE5OTQsNDE5OTUsNDE5OTYsNDIwMTYsMCwyLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1
LDE2LDE3LDE4LDIwLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDMwO0FGRTQ2REM2MzBDQjM2M0NCRjI0
OTkzMjJEMzkwQzE5Ij4gPHhhcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InV1aWQ6
MDRFOEU3N0EwMjUwRTExMTg0RDJEM0E3NTRDODU3RjQiIHN0UmVmOmRvY3VtZW50SUQ9InV1aWQ6
NzQ1NEUxNEIwMEM3REQxMUI0NUVCMzIxRjEwNjMyQkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwv
cmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/bAEMAAgEBAgEBAgICAgICAgID
BQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/AABQIAAkA
KARDEQBNEQBZEQBLEQD/xAAbAAADAAIDAAAAAAAAAAAAAAAGBwgBBAAFCf/EADgQAAEDAwMBBAYJ
BAMAAAAAAAIBAwQFBhEABxIIISI0chMxMjdhcRQXM0J0grGysxZBUXW0wdH/2gAOBEMATQBZAEsA
AD8A8ydrbYZDa224cSiUiCzIp7rj8mY5j6U6URp5HFAkVCRSEkTvCuFFUwi6mrpy26p8XYexqZTb
Ttmkw5lIkOzJ9RfUSnvHT48kX1aNCFxDMTRFU21UVBRRBXGinpG2ms6FtHaMCHbFuU6nyae46/Lk
milNcOIy8jytkiiXIkLC8hXHFUwi40VdI201nQdo7RgQ7Yt2nQJNPcdflyTRSmuHEZeR5WzRRLkS
FheQrjiqYRcaVgdFt27pyplwUB+zDpFTqUgYgnctNhucUlGzlWFdRWw5Cq+rigJyTuYXSMPoZrO6
1xVW4aA5Yr1EqtZmDDT+pqZDLikxxnP0f0qejBCFVTCcEBOQ5DC6am1PSLtjes2RU3Tt0oU6a/6E
RqMRniiPEHY0hJxTKKqYTjx7U7uF0wNuOnHaW4qzMmyioxRZM19W0bkx2xREdJO62KoiJlFxx7uP
V2YXTW222EiBtRQwrm2W2NxFDiA03Umtx4FPlSnXpDi83wFzkaojzIoK9oCwa57V40Js9svt7G2P
tuJdWyO093vUqALDdYj7mwqZNqD78p4lckg25lxUR+MAiXa2MY+9hVQaLofTL02lt7ACXS7UqLkV
rgL309hpx8jNVy4QuIpKnIU73qQPnqiKNs10vjYcGPNpFDqD0NpQR5HAaN8iMly4QGil7QomfUg/
PXaO9I9B+r+pUqRt9YFNq7dukMStJulAmGU30jTQyHBSQLYplSMgESzyTAoKLjlc6VNq/qarlAPZ
zbyj3OzaBs025freh1B06r6RlkJjwJIBkBypmQA2eeaYBBRcK/dvpb2JGy6pAg21Z7FSWlEESorc
7JkEjkAC+Y+l4JhVVVFBLOU7MIulbuvsr09nZNTgU+17eZqRUsmolQWtoZjJyIi+YK4gIidqqiCu
cp2Y0h9yOhS89rbJmXBVp9iJT4YKapEu2nzHzVMdwWmnSNS7fVj/ADqOt6egK7tpLFnXJV5m3aUq
EBGaRLyp02SePuAwy4ThH8MJnXn71X9E9Nsi2p9ZkOWKlJiCRmoXBEdklj7oNNmpEXwVE1APU/0q
0K2qLNqZlaKU2OhEapV45vl8BbAlJS+ComtTaj3a1P8ACyP4T1jpt9xFd/10z/iu6RPRv7nZ/wCC
k/wOaT3Rz7nqh+Ck/wADmlEvr1OU/wC2LyB+0dENpeETyD+1NE9leAHyD+1NZc9rW/J8YflX9NGj
XhfyaNWPA/l1xPaT5a0F9sfN/wBLoIub7F7zL+i6Cbq8O/8AP/3WB/v8tdTH8cvlXU17s+Nc8q6m
neDxTvyXX//Z";
echo "<img src='data:image/jpeg;base64, $imgData' />"; 
```

（抱歉，这是一个 40x30 像素的图像，但仍然很大）。

将出现一个图像。

所有这一切都说明您的语法没问题：

```
echo "<img src='data:image/jpeg;base64, $imgData' />"; 
```

如果您的 $imgData 包含真实图像，则输出图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:40:46.803

您需要对数据进行 base64 编码。这是必需的，并确保字符集转换不会触及数据。

正确的代码应该是

```
$imgData = base64_encode($byteArray);
$img = "<img src= 'data:image/jpeg;base64, $imgData' />";
print($img); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T14:01:43.383

这是一个浏览图像文件`.jpg`并将其转换为 base64 字节格式并将其发送到服务器的完整示例。
服务器脚本`php`将解码图像并将其保存到服务器。

**HTML**

```
<html>
<head>
<script src="jquery.js"></script>
<script>
function getBase64Image()
{
    var files = document.getElementById('file1').files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++)
    {
      // Only process image files.
      if (!f.type.match('image.*'))
      {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {

        var str = e.target.result;
        var res = str.replace("data:image/jpeg;base64,","");
        var res = str.replace("data:base64,","");
         $("#tbx_base64").val(res);
         console.log(e.target)
        };
      })(f);

      // Read in the image file as a data URL.
     reader.readAsDataURL(f);
    }
}

function submitForm(){    

    //SENDING IMAGE FILE WITH JSON OBJECT. YOU CAN ALSO SEND WITHOUT JSON OBJECT.
    var o = {};
    o.name = "Test";
    o.arr = ["lucky_no":323];
    o.upload_image = $("#tbx_base64").val();    
    $.post("http://localhost/jquery_multiple_file_upload/upload.php/", {o:o}, function(data){   
        alert(data) 
    });
}
</script>
</head>
<body>
<form enctype="multipart/form-data"  method="post" id="form_test">
    <input id="file1" type="file" onChange="getBase64Image()"  />
    <textarea id="tbx_base64" style="display:none"></textarea> <!-- TEXTAREA IS HIDE. AS IT IS ONLY USED TO HOLD BYTE DATA -->
    <input type="button" value="Upload File" id="upload" onClick="submitForm();" />
</form>
</body>
</html> 
```

**PHP**

```
<?php
    $image_byte_code = $_REQUEST['o'];
    $content = base64_decode($image_byte_code['upload_image']);
    $im = imagecreatefromstring($content);

    if ($im !== false) {
        header('Content-Type: image/jpeg');
        imagejpeg($im, "uploads/1.jpg");
        imagedestroy($im);
    }
    else
    {
        echo 'An error occurred.';
    }
?> 
```

# apache - .htaccess 文件不工作

> ID：12537858
> 
> 赞同：0
> 
> 时间：2012-09-21T20:38:45.593
> 
> 标签：apache, ubuntu

我实际上已经尝试了几天让我的 .htaccess 文件工作

.htaccess 文件非常简单，它包含以下内容

```
Options -Indexes

ErrorDocument 404 http://mydomain.com/search 
```

但是，无论我将什么命令粘贴到文件中，我都无法发生任何事情。

该文件位于`/var/www/`我的 Ubuntu 服务器上，我尝试将其放入 root`/`中，但没有任何效果

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:03:46.723

确保您拥有`AllowOverride All`或至少拥有`AllowOverride FileInfo`. 如果您没有 Htaccess 文件的内容，则它们将被忽略。

# java - 较新版本的 android api 阻止获取和流式传输数据？

> ID：12537859
> 
> 赞同：2
> 
> 时间：2012-09-21T20:38:49.317
> 
> 标签：java, android, android-version

我一直在尝试使用 SAX XML 解析器来访问服务器上的一些数据，但无论我应用了多少不同的教程和方法测试了多少，数据变量每次都会出现空。
我尝试使用本地文件，但也成功了。最后在一些教程评论中，我从 3,0+ api Android 更改了获取和流式传输文件的方法。我发现我需要创建一个不同的线程来传输数据。你能帮我吗？我只需要让这些线路正常工作：

```
SAXParserFactory saxPF = SAXParserFactory.newInstance();
SAXParser saxP = saxPF.newSAXParser();
XMLReader xmlR = saxP.getXMLReader();
URL url = new URL("http://www.xmlfiles.com/examples/cd_catalog.xml"); // URL of the XML
/**
* Create the Handler to handle each of the XML tags.
**/
XMLHandler myXMLHandler = new XMLHandler();
xmlR.setContentHandler(myXMLHandler);
xmlR.parse(new InputSource(url.openStream())); 
```

# git - 查找除版本控制系统（git 或 SVN）下的文件之外的所有文件

> ID：12537864
> 
> 赞同：2
> 
> 时间：2012-09-21T20:39:07.720
> 
> 标签：git, bash, svn, shell, unix

我必须在我的计算机上找到所有文件，除了那些在版本控制系统（git 或 SVN）下的文件。我不仅不必查找 VCS 的元文件，还不必查找工作副本中的所有文件，因此我无法使用类似

`find . -type f \! -path \*/\.svn/\*;`

请帮帮我，因为我对此一无所知。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:05:44.090

如果当前工作目录（CWD）不是存储库，我猜`git status`并`svn status`返回非零退出代码。因为我不认为 find 可以抑制`-exec`我将创建的调用的输出

~/gitstatus.sh：

```
git status > /dev/null 2>&1
exit $? 
```

~/svnstatus.sh：

```
svn status > /dev/null 2>&1
exit $? 
```

然后通过发出以下命令来搜索文件：

```
find . -type f '!' '(' -execdir bash ~/gitstatus.sh ';' -or -execdir bash ~/gitstatus.sh ';' ')' 
```

# javascript - FullCalendar 月视图显示周末的事件

> ID：12537870
> 
> 赞同：1
> 
> 时间：2012-09-21T20:39:35.343
> 
> 标签：javascript, fullcalendar

我有一个包括部分或全部周末的活动。我在月视图中显示日历。但是，我可以在一周中的多天跨越一个事件就好了。

我正在使用以下脚本：

*   jquery-1.8.0.min.js：
*   jquery-ui-1.8.23.min.js：
*   fullcalendar.min.js

我的日历设置为：

```
$('#calendar').fullCalendar({
    theme: true,
    defaultView: "month",
    firstDay: 7,
    weekends: true,
    events: Controller/GetEvents
}); 
```

错误（周末）的事件数据设置为：

```
id: 1
title: "Kat's Test Event"
allDay: true
start: 1348902000
end: 1348988400
url: myUrl
editable: false 
```

这会`"Invalid argument"`在该行的 fullcalendar.min.js 中引发错误：

```
n[0].style.top = C[B.row] + (B.top || 0) + "px" 
```

据我所知，B.top = -Infinity。

有效的事件数据（周）设置为：

```
id: 1
title: "Kat's Test Event"
allDay: true
start: 1348556400
end: 1348729200
url: myUrl
editable: false 
```

谁能告诉我如何解决这个问题？

# css - 容器边框只包裹标题和导航，而不是整个容器

> ID：12537871
> 
> 赞同：2
> 
> 时间：2012-09-21T20:39:55.777
> 
> 标签：css

jsfiddle：http: [//jsfiddle.net/Joshi3s/2gMWf/1/](http://jsfiddle.net/Joshi3s/2gMWf/1/)

我正在尝试将整个容器包裹在 1px 实心边框中......但它只包裹标题和导航。

我觉得浮动是一个问题，但我不确定。

谁能帮助我了解我需要做些什么不同的事情？也欢迎任何其他批评。

PS 我正在学习并尝试将 .PSD 转换为 HTML，并附有我在互联网上找到的教程。这是我找到的一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:41:48.667

添加`overflow: hidden`到您的#container 定义中：

```
#container {
    width: 1000px;
    margin: 0 auto;
    border: 1px solid black;
    overflow: hidden;
} 
```

浮动元素从页面上块级元素的正常流动中移除，因此添加溢出属性会使父级的高度包括子级，就好像它们没有浮动一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:47:49.920

你只是忘了清理你的漂浮物。在容器 div 的末尾放置一个`<div style="clear: both;"></div>` div。

在它工作之后，您可以创建一个名为 clear 的类并使用它来清除您的浮动

```
.clear {clear: both;} 
```

在教程中学习浮点数，你会经常使用它。

# spring - jsf - spring - 休眠事务管理

> ID：12537875
> 
> 赞同：1
> 
> 时间：2012-09-21T20:40:19.977
> 
> 标签：spring, jsf, jsf-2

我无法确定在 jsf - spring - hibernate 情况下管理事务的最佳方法。让我想到的是我收到以下错误消息：

```
failed to lazily initialize a collection of role: [class name], no session or session was closed 
```

我的托管 bean 称为 spring bean，它调用了使用休眠的 dao 并检索了具有一对多关系的集合。当我试图检查集合时，我得到了错误（我知道如果我遍历 dao 中的集合，这将保留数据，但我想超越这一点）。

这是托管 bean 代码：

```
@Transactional
private void loadAppointments() {

  employees = userService.getEmployees();

} 
```

（注意：当我尝试遍历员工时，我得到了错误。）

这是spring bean调用：

```
public Set<Employee> getEmployees() {
    return getUserDAO().getEmployees();
} 
```

这是 dao 代码：

```
List<Employee> employees = getSessionFactory().getCurrentSession().createQuery(" from Employee ").list();
return new HashSet<Employee>(employees); 
```

这是我的与交易有关的 applicationContext.xml 的一部分：

```
<!-- Enable the configuration of transactional behavior based on annotations -->
<tx:annotation-driven transaction-manager="txManager"/>

<!-- Transaction Manager is defined -->
<bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
   <property name="sessionFactory" ref="SessionFactory"/>
</bean> 
```

我不确定为什么 @Transactional 注释在 Spring bean 中失败，有人可以向我解释一下吗？

一个人推荐使用 JPATransactionManager，但我没有这方面的经验，我想知道是否有其他人有任何建议。从我的 Spring bean 控制事务的最佳/最简单的方法是什么？是否有文章或其他内容列出了这些选项？这似乎是一个相当密集的主题，因此所有帮助表示赞赏。

编辑：com.dave.model.User com.dave.model.Client com.dave.model.Appointment com.dave.model.Employee com.dave.model.Certificate org.hibernate.dialect.MySQLDialect true

# wordpress - 使用 wp_query 的不同永久链接提示

> ID：12537879
> 
> 赞同：0
> 
> 时间：2012-09-21T20:40:40.117
> 
> 标签：wordpress, wordpress-theming

我使用 wp_query 在单个帖子的侧边栏中显示我最近帖子的标题。但我遇到了一个奇怪的问题，当永久链接就像`http://my-site/?p=12`它正常工作但当永久链接就像`http://my-site/2012/09/22/sample-post/`它不能正常工作并且只显示在当前帖子之后发布的帖子的标题时。

有什么问题？

# c# - 在 UniformGrid C# 中获取 Button 的属性

> ID：12537885
> 
> 赞同：0
> 
> 时间：2012-09-21T20:41:12.843
> 
> 标签：c#

我想知道是否可以使用 UniformGrid 单击事件而不是 Button 单击事件来获取作为 UniformGrid 子级的 Button 的属性。UniformGrid 使用 XAML 创建，而 Button 使用 C# 创建。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:55:00.867

当然有可能。

一种干净的方法是将要访问的按钮属性绑定到 ViewModel，然后从 UniformGrid 中单击事件引发的命令中，访问这些属性。

由于[DataBinding](http://msdn.microsoft.com/en-us/library/ms750612.aspx)适用于 XAML 和 CodeBehind，因此它独立于您创建对象的位置。

# java - 如果没有在业务接口中声明，如何调用无状态bean方法

> ID：12537889
> 
> 赞同：1
> 
> 时间：2012-09-21T20:41:37.570
> 
> 标签：java, casting, ejb

我遇到了一个问题，一旦没有在业务接口中声明，我就无法调用 bean 实例的方法。

基本上，在我开始使用由另一个团队开发的 EJB 2.1 项目之后，我就遇到了这个问题。应用服务器是**Websphere v8**

问题如下：我们有一个抽象类**FooAbstract**，其中声明了基本业务功能（如读取、删除、更新等）

当然，每个 bean 都必须扩展该类并实现抽象方法。Bean 也可以有自己的公共方法（实际上有）。

由于某些原因，这些方法没有在业务接口中声明，但是所有 bean 的方法都是通过反射而不是直接调用来调用的（我不知道为什么）。

在我看来，反射使系统比它可能的慢得多，但我无法处理架构，因为几乎所有需要的方法对于直接调用都是不可见的。

这是一个例子：

```
public abstract class FooAbstract {
    public abstract Object create();
    public abstract void delete(Object x);
} 
```

执行业务逻辑的**FooBean**类（jndi 名称“Foo”）：

```
public class FooBean extends FooAbstract implements SessionBean {
    /** inherited method */
    public Object create() {
        Object x = new SomeDBMappedObject();
        ...  // creating an object in DB and return wrapper class
        return x;
    }

    /** inherited method */
    public void delete(Object x) {
        ... // deleting object from DB
    }

    /** The method that performs some extra logic */
    aMethod() {
      ... //do extra logic
    }
} 
```

本地业务接口：

```
public interface FooLocal extends EJBLocalObject {
    public abstract Object create();
    public abstract void delete(Object x);
} 
```

最后是本地主页界面：

```
public interface FooLocalHome extends EJBLocalHome {
   public FooLocal create() throws CreateException;
} 
```

根据架构规范，如果我需要调用另一个 EJB 的方法，我应该使用一些使用反射来调度我的调用的实用程序类**UtilityBean 。**

就像是：

```
...
   public static Object dispath(String jndi, String methodname, Object parameters) {
      ...
   }
... 
```

## 最后，我的问题：

我想直接在我的 EJB 中调用**FooBean**的额外方法，但是如果我这样做：

```
public void doSomething {
    InitialContext ctx = new InitialContext ();
    FooHome home = (FooHome) ctx.lookup("local:ejb/Foo");
    Object bean = home.create();
    ...
} 
```

在**“bean”**变量中，我得到了对**FooBean**实例的引用，但我无法调用方法**aMethod() ，因为它在****FooLocal**接口中不存在。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:28:47.663

通常，您可以使用反射来访问对象的私有方法。但是，变量 bean 的实际底层对象并不是 FooBean，而是同样实现了 FooLocal 的代理对象。如果不将其添加到接口，就无法访​​问该私有方法。

# haskell - Markup monad 是如何与 Html monad 关联的？

> ID：12537890
> 
> 赞同：3
> 
> 时间：2012-09-21T20:41:41.127
> 
> 标签：haskell, web-frameworks, happstack

我正在使用 blaze-html。我终于能够大致了解如何使用它了，但是一些单子和转换真的让我一直很困惑。但这里有一个特别的绊脚石（在很多中，但我会再离开一天，从这里转到 Happstack 的 Response 和 ServerPart monads）。

如果我想将字符串文本附加到段落，我必须使用这个函数（来自 Text.Blaze.Html5）：

```
p . toHtml :: ToMessage a => a -> Html 
```

一切都很好，除了...

```
toHtml :: ToMarkup a => a -> Markup
p :: Html -> Html 
```

我已经尽我所能搜索了文档，但我看不到 Markup monad 和 Html monad 是如何相互关联的。我如何处理所有类型和类型类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T20:45:38.000

它们是同义词（即它们是同一类型），如[文档](http://hackage.haskell.org/packages/archive/blaze-html/0.5.1.0/doc/html/Text-Blaze-Html.html#t%3aHtml)中所示。

此外，将这些类型称为 monad 是不正确的。它们只是类型。然而，它们是由 monad ( `MarkupM`) 构造的。

作为快速检查，如果某个类型是由另一种类型参数化的类型（具有 kind `* -> *`），则可以将其称为 monad。这是一个必要（但不是充分）条件。

# css - 截至 2012 年底实施 @font-face

> ID：12537892
> 
> 赞同：8
> 
> 时间：2012-09-21T20:41:48.670
> 
> 标签：css, fonts, font-face, webfonts

我花了几个晚上来研究用当今现代浏览器实现@font-face 的最佳方法。我是一名全职网络/系统开发人员，具有平面设计师背景，我发现网页设计的机会和可能性变得越来越有趣。所以，我做了一些测试，想听听是否有人对此有建议、更好的想法或意见。我的测试场景是这样的。

我测试了很多不同的在线工具和应用程序，但最后我把它归结为一个在线服务和一个应用程序。

*   FontSquirrel，在线工具 - 免费。[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)
*   FontXChange，适用于 mac/win 的应用程序 - 99 美元。[http://fontgear.net/fontxchange.html](http://fontgear.net/fontxchange.html)

我使用了 Mac 随附的字体 Tamil Sangam MN 和 Tamil Sangam MN Bold，它们都是开放式字体 .otf。

*   TamilSangamMN.otf - 290 KB
*   TamilSangamMNBold.otf - 271 KB

# 调查转化规模

## 字体松鼠

这是一个很好的在线工具，非常好。有几种不同的模式，我使用了 Basic 和 Optimal。我的 .otf 文件的输出是 svg、ttf、eot 和 woff。

### 基本的

**常规的**

*   TamilSangamMN.svg **233 KB**
*   TamilSangamMN.ttf **71 KB**
*   TamilSangamMN.eot **25 KB**
*   TamilSangamMN.woff **30 KB**
*   **总计：359 KB**

**大胆的**

*   TamilSangamMNbold.svg **225 KB**
*   TamilSangamMNbold.ttf **69 KB**
*   TamilSangamMNbold.eot **25 KB**
*   TamilSangamMNbold.woff **30 KB**
*   **总计：349 KB**

### 最佳

我注意到最佳字体的第一件事是它们比基本变体小得多~260 KB！

**常规的**

*   TamilSangamMN.svg **33 KB**
*   TamilSangamMN.ttf **25 KB**
*   TamilSangamMN.eot **15 KB**
*   TamilSangamMN.woff **17 KB**
*   **总计：90 KB**

**大胆的**

*   TamilSangamMNbold.svg **33 KB**
*   TamilSangamMNbold.ttf **25 KB**
*   TamilSangamMNbold.eot **15 KB**
*   TamilSangamMNbold.woff **17 KB**
*   **总计：90 KB**

## 字体转换

这个工具可以做的不仅仅是为网络处理字体。它可以相互转换多种格式；比如opentype、true type、web fonts、post script等等。结果是总体质量非常高，文件非常大，几乎是 FontSquirrels Basic 版本的两倍，是 FontSquirrels Optimal 版本的 7 倍以上。

**常规的**

*   TamilSangamMN.svg **480 KB**
*   TamilSangamMN.ttf **72 KB**
*   TamilSangamMN.eot **72 KB**
*   TamilSangamMN.woff **80 KB**
*   **总计：704 KB**

**大胆的**

*   TamilSangamMNbold.svg **463 KB**
*   TamilSangamMNbold.ttf **69 KB**
*   TamilSangamMNbold.eot **70 KB**
*   TamilSangamMNbold.woff **80 KB**
*   **总计：682 KB**

# 设置 CSS

一开始我有点困惑，字体列表中的实际顺序很重要。然后我发现有些人采用了它认为兼容的第一种格式，而不是坚持最佳的格式——这很糟糕。经过一些实验，我发现这是格式化 css 的最佳方式（注意文件类型的顺序 | ***重要！***）。

```
@font-face {
    font-family: 'TamilSangam';
    src: url('.eot');
    src: url('.svg') format('svg'),          
         url('.eot?#iefix') format('embedded-opentype'),
         url('.woff') format('woff'),
         url('.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

# 我的测试结果

## 常规字体

我确实用 * 标记了最佳版本

**火狐 MAC (15.0.1)**

*   FontSquirrel Optimal：渲染得有点胖
*   FontSquirrel Basic：渲染有点胖
*   **FontXChange 4.0：渲染有点胖，但字距调整优于 FontSquirrel 版本 ***

**火狐 Windows (15.0.1)**

*   FontSquirrel Optimal：渲染得非常好
*   FontSquirrel Basic：字体变得锯齿状/不连贯
*   **FontXChange 4.0：渲染非常好 ***

**Safari Mac (6.0)**

*   FontSquirrel Optimal：完美渲染
*   FontSquirrel Basic：完美渲染
*   **FontXChange 4.0：完美渲染 ***

**铬 Mac (21.0)**

*   FontSquirrel Optimal：有点胖
*   FontSquirrel Basic：有点胖
*   **FontXChange 4.0：完美渲染 ***

**铬窗口 (21.0)**

*   FontSquirrel Optimal：完美渲染
*   FontSquirrel Basic：完美渲染
*   **FontXChange 4.0：完美渲染 ***

**互联网浏览器 (9.0)**

*   **FontSquirrel Optimal：完美渲染 ***
*   FontSquirrel Basic：完美渲染
*   FontXChange 4.0：字体变得锯齿状/不连贯

## 粗体字

**火狐 MAC (15.0.1)**

*   **FontSquirrel Optimal：渲染得非常肥大 ***
*   FontSquirrel Basic：渲染得非常胖
*   FontXChange 4.0：渲染非常胖，但字距调整更好*（我想为 mac 选择这个，但由于 windows 版本的 firefox 在这里不兼容，所以必须去）*

**火狐 Windows (15.0.1)**

*   **FontSquirrel Optimal：渲染正常，抗锯齿效果不是很好***
*   FontSquirrel Basic：字体变得锯齿状/不连贯
*   FontXChange 4.0：字体有点扭曲/锯齿状

**Safari Mac (6.0)**

*   **FontSquirrel Optimal：完美渲染 ***
*   FontSquirrel Basic：完美渲染
*   FontXChange 4.0：渲染脂肪

**铬 Mac (21.0)**

*   **FontSquirrel Optimal：完美渲染 ***
*   FontSquirrel Basic：良好的渲染，几个百分比的脂肪
*   FontXChange 4.0：渲染脂肪

**铬窗口 (21.0)**

*   **FontSquirrel Optimal：完美渲染 ***
*   FontSquirrel Basic：完美渲染
*   FontXChange 4.0：渲染得很胖

**互联网浏览器 (9.0)**

*   **FontSquirrel Optimal：完美渲染 ***
*   FontSquirrel Basic：完美渲染
*   FontXChange 4.0：字体变得锯齿状/不连贯

# 最终实现

我通常按​​以下模式组织我的网络字体，<webfonts> / <conversion source> / <conversion method> / <fonts>

```
/* Regular */
@font-face {
    font-family: 'TamilSangam';
    src: url('webfonts/fontsquirrel/optimal/tamil_sangam_mn.eot');
    src: url('webfonts/fontxchange/TamilSangamMN.svg#TamilSangamMN') format('svg'),
         url('webfonts/fontsquirrel/optimal/tamil_sangam_mn.eot?#iefix') format('embedded-opentype'),
         url('webfonts/fontxchange/TamilSangamMN.woff') format('woff'),
         url('webfonts/fontxchange/TamilSangamMN.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

/* Bold */
@font-face {
    font-family: 'TamilSangam';
    src: url('webfonts/fontsquirrel/optimal/tamil_sangam_mn_bold.eot');
    src: url('webfonts/fontsquirrel/optimal/tamil_sangam_mn_bold.svg#tamil_sangam_mnbold') format('svg'),
         url('webfonts/fontsquirrel/optimal/tamil_sangam_mn_bold.eot?#iefix') format('embedded-opentype'),
         url('webfonts/fontsquirrel/optimal/tamil_sangam_mn_bold.woff') format('woff'),
         url('webfonts/fontsquirrel/optimal/tamil_sangam_mn_bold.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
} 
```

结果的图形概述（全尺寸在[http://i.stack.imgur.com/atb98.png](https://i.stack.imgur.com/atb98.png)）

![在此处输入图像描述](../Images/20441e64f5d05a86290d0307307ecfd2.png)

# 结论和任务

没有一种工具可以提供在所有浏览器中的 Mac 和 Windows 上呈现良好的字体。您必须对每种字体进行试验和测试。上面发布的方法只是一个简单的方法和建议如何测试和试验@font-face's。

您认为我的方法或实现有什么可以改变的吗？有没有我错过的应用程序或服务？

万事如意/T

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T12:41:12.057

## **@font-face 代码**

您可以添加`src: local('ò?'),`查找具有此名称的本地字体，如果它们碰巧与您的自定义字体具有相同的名称，则强制浏览器忽略本地字体。您也可以反过来使用它来限制自定义字体的下载。*查看移动支持*

我通常`?#iefix`在标准`.eot`src 之后看到第二行，虽然我不能说我曾经需要它，也不知道是否需要特定的定位（除了`.eot`首先列出）。

## **对字体的额外控制**

如果您在字体无法加载的情况下寻找对字体的更多控制，或者在 IE 中处理 FOUC，我有一个 jQuery 插件，它可以让您在加载时隐藏字体，并允许您更改字体大小失败，因此您的后备字体不会破坏您的布局。[如何知道字体（@font-face）是否已经加载？](https://stackoverflow.com/questions/12312323/how-to-know-if-a-font-font-face-has-already-been-loaded/12316349#12316349)

## **IE6-8 错误**

此外，IE6-8 的某些字体的 .eot 文件可能存在问题。这可以通过以下任一方式解决（[此处的完整指南](https://stackoverflow.com/a/12459447/1455709)）：

1.  在线转换新的 .eot 文件。如果这不起作用，那么问题在于文件属性本身。
2.  使用 FontForge 编辑字体文件的名称属性，然后重新保存并重新转换。

## **CORS**

似乎只与IE和FF有关。所有其他浏览器（仅测试最新版本）没有问题。

CORS 是字体的常见问题，当您从另一个域或主机名加载字体时会发生这种问题。这包括使用`www`或不指定您的站点。`@font-face`代码需要相对引用，CSS文件也是如此。`<base>`如果在 html 中定义标签，您也会遇到问题。如果这是不可能的，或者如果您不想担心 CORS，那么您需要将以下代码放在`.htaccess`字体目录中的文件中：

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

## **MIME 类型**

字体服务的 404 问题可能是由不正确的 MIME 定义引起的，请在此处查看更多信息：[WOFF 字体的 Mime 类型？](https://stackoverflow.com/questions/3594823/mime-type-for-woff-fonts)

## **移动支持**

移动支持非常糟糕。Android 直到 4.0 才正确支持它，而据我所知，Windows Mobile 根本不支持它。我正在调查任何解决方法或解决方案。到目前为止，我最好的方法是使用[如何知道字体（@font-face）是否已经加载？](https://stackoverflow.com/questions/12312323/how-to-know-if-a-font-font-face-has-already-been-loaded/12316349#12316349)在字体加载失败时显示文本图片。这真的只适用于网站标题和图标，否则这是一个非常糟糕的工作，不利于 SEO 和糟糕的用户体验。

[见`@font-face`支持。](http://caniuse.com/fontface)

另外，Android 2.2 - xxx 版本如果你`@font-face`使用会失败`local()`，这也被用作 IE 的修复。如果你想覆盖所有的基础，可能需要多个样式表。在此处查看更多信息：[https ://stackoverflow.com/a/4520467/1455709](https://stackoverflow.com/a/4520467/1455709)

## **SVG 和 Chrome**

如果您`#fontName`在 url 中包含 ，Chrome 将不会使用 SVG 字体。它还将在 SVG 之前使用 WOFF - 并且不能很好地渲染它。这可能是每个人都在关注 Chrome 中糟糕的字体渲染的原因......要克服这个问题，需要额外的 @font-face 声明：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    @font-face {
        font-family: 'myFont';
        src: url('fonts/myFont.svg') format('svg');
    }
} 
```

# vb.net - 通过 VB.NET 中的 lambda 表达式接受不同数量的参数

> ID：12537893
> 
> 赞同：0
> 
> 时间：2012-09-21T20:41:52.593
> 
> 标签：vb.net, delegates, lambda

我让自己有点纠结。看看以下内容：

```
Friend Sub RunEvent(ByVal ObjectUID As Long, ByVal EventUID As Long, ByVal Arguments As GenericEventArgument)
    RunSafeCheck(ObjectUID, EventUID)
    For Each E As CustomEvent In MonitoredEvents(ObjectUID)(EventUID)
            E.EventDelegate.DynamicInvoke(Arguments.ArgList)
    Next
End Sub 
```

这个特定的代码位将运行传递给它的任意数量的委托。传递的一个这样的委托是 lambda 表达式：

```
 Public Function ConnectEvent(ByVal E As Long, ByVal lua_delegate As LuaFunction) As CustomEvent
        Return GlobalShare.Game.EventManager.RegisterEvent(UID, E, Sub(args() As Object)
                                                                       lua_delegate.Call(args)
                                                                   End Sub)
    End Function 
```

我真的需要`args`成为一个参数数组，但是，这在 lambda 表达式中是不允许的。问题是我的第一个代码位根据所涉及的某些情况发送不同的参数。只要参数等于 1（当前），它就会正确发送参数，这是一个问题。在许多情况下，它需要发送更多的参数（或者在某些情况下根本没有）。

有没有办法让这个 lambda 表达式除了任意数量的参数而不使其成为特殊情况？

**只是为了澄清......** `RunEvent`通过一个列表并调用其中的每个委托。 `ConnectEvent`将我的 lambda 函数添​​加到该列表中。

# django - Heroku 和 Django 连接池

> ID：12537896
> 
> 赞同：1
> 
> 时间：2012-09-21T20:42:06.283
> 
> 标签：django, postgresql, heroku

Django 没有任何连接池。相反，他们建议使用外部池，例如 pgBouncer。这在过去对我很有用，但我想知道如何在 Heroku（Heroku App <-> Heroku 托管的 postgres DB）中获得 pgbouncer（或类似的东西）。这是至关重要的，因为每个请求 150 毫秒的连接时间是不可接受的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:08:47.673

尝试使用[django-db-pool](https://github.com/gmcguire/django-db-pool)它是 django 的连接池数据库驱动程序，效果很好。我们有很多用户在 Heroku 上使用它，他们对此非常满意。

# proof - 证明大欧米茄

> ID：12537897
> 
> 赞同：1
> 
> 时间：2012-09-21T20:42:10.180
> 
> 标签：proof, big-o

问题：

(5n^2)(ln(n)) 是 n(ln(n)^2) 的大欧米茄

我试过的：

存在 c > 0, n0 > 0

(5n^2)(ln(n)) >= cn(ln(n)^2) 对于所有 n >= n0

(5n^2)(ln(n)) >= n(ln(n)) (对于 n >= 1) >= n(ln(n)^2) (对于 n <= 1)

因此得出结论，当 n = 1 = n0 时，(5n^2)(ln(n)) 是 n(ln(n)^2) 的大欧米伽；但这不符合（对于所有 n >= n0）的要求。

我被困在这里，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:05:13.730

我的第一个想法：

如果

```
 (5n^2)(ln(n)) is big omega of n(ln(n)^2) 
```

然后

```
 (5n) is big omega of ln(n) 
```

这是根本。看;

```
exists
    c = 1 and n0 = 1,
such that
    5n >= ln(n); for all n >= n0 
```

扩展前几个元素的系列给出：

```
 -------------------------
|   n   |   5n   | ln(n)  |
|-------|--------|--------|
|    1  |     5  |  0.00  |
|    2  |    10  |  0.69  |
|    3  |    15  |  1.10  |
|    4  |    20  |  1.39  |
|    5  |    25  |  1.61  |
|   10  |    50  |  2.30  |
|  100  |   500  |  4.61  |
| 1000  |  5000  |  6.91  |
 ------------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:11:47.567

如果我正确理解您的符号：对于所有 n>e，n.ln(n)>0，允许您将问题更改为证明 5.n 是 ln(n) 的一个大欧米茄。显然，您不仅有 ln(n) = O(n)，而且还有 ln(n) = o(n)，因为 lim(ln(n)/n)=0 表示 n-> 无穷大。让我想知道问题中是否确实缺少某些东西，因为当它也很小的时候问它是否是大 O 很奇怪......

# python - Python 脚本看不到我的模块

> ID：12537898
> 
> 赞同：1
> 
> 时间：2012-09-21T20:42:09.863
> 
> 标签：python

我有一个这样的项目：

```
panel/
   configure.py
   run.py
   panel/
      __init__.py
      mailer.py
      helpers/
         __init__.py
         gearman.py 
```

`mailer.py`包括导入`from helpers.gearman import ExceptionalGearmanWorker`。`mailer.py`还包括`if __name__ == '__main__'`从命令行调用时运行程序的检查。

`panel/`从我要运行的顶级目录中`python panel/mailer.py`。当我尝试运行它时，`mailer.py`无法从`gearman.py`. 具体错误是

```
Traceback (most recent call last):
  File "panel/mailer.py", line 14, in <module>
    from panel.cgearman import ExceptionalGearmanWorker
ImportError: No module named panel.cgearman 
```

看起来像直接运行脚本，从内部`panel/`不添加`panel/`到导入路径？这个对吗？我能以某种方式完成这项工作吗？

# python - “私有”名称修改和实例与类属性

> ID：12537904
> 
> 赞同：6
> 
> 时间：2012-09-21T20:42:43.683
> 
> 标签：python, attributes, private-members, name-mangling

我正在编写一个需要访问私有变量的装饰器并发现了这种差异。谁能解释一下？

（Python 2.5）

对于类中定义的属性，命名修饰按预期工作：

```
>>> class Tester(object):
...    __foo = "hi"

>>> t = Tester()
>>> t._Tester__foo
'hi' 
```

实例属性不起作用（这是我们应该做的正确的方式？）

```
>>> class Tester(object):
...     def __init__(self):
...         self.__foo = "hi"

>>> t = Tester()
>>> t._Tester__foo
AttributeError: 'Tester' object has no attribute '_Tester__foo' 
```

PS“类属性”是正确的词吗？它们不是静态的，但是如果您将其中之一设为列表或其他一些可变类型，则它是共享的...

**更新**

实际上，第二个示例也可以正常工作。这是一个硬件问题（重启有帮助）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T20:44:12.300

这实际上是*不*正确的。

名称修改发生在类创建时；任何引用重整名称的函数也会被调整。

我无法重现您的示例，至少不能在 Mac 上的 Python 版本 2.4、2.5、2.6、3.1 和 3.2 中重现：

```
>>> class Tester(object):
...     def __init__(self):
...         self.__foo = "hi"
... 
>>> Tester()._Tester__foo
'hi'
>>> Tester().__foo
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Tester' object has no attribute '__foo' 
```

如果你反汇编函数字节码，你可以看到名称也被破坏了：

```
>>> import dis
>>> dis.dis(Tester.__init__)
  3           0 LOAD_CONST               1 ('hi')
              3 LOAD_FAST                0 (self)
              6 STORE_ATTR               1 (_Tester__foo)
              9 LOAD_CONST               0 (None)
             12 RETURN_VALUE 
```

我检查了[编译器源代码](http://hg.python.org/cpython/file/tip/Python/compile.c)，*所有*名称都通过 mangler 运行，至少自 2002 年以来一直保持相同的代码路径。

是的，类属性和实例属性是正确的术语。类属性始终是共享的，但分配*给*实例上的属性会分配给实例。改变列表或其他可变对象与属性分配不同。

# visual-studio-2010 - 如何检测是否是 Guid？在列表中

> ID：12537914
> 
> 赞同：2
> 
> 时间：2012-09-21T20:43:33.903
> 
> 标签：visual-studio-2010, c#-4.0, lambda, guid, nullable

使用以下代码：

```
Guid? x = null;
List<Guid?> y = new List<Guid?>();
y.Add(x); 
```

我希望以下代码返回 true `y.Contains(x);`，但它返回 false。

所以这是一个两部分的问题。

1.  为什么当列表中有 x 时它返回 false？
2.  我将如何遍历 Guid？列表以检查列表中是否存在空值`Guid?`或`Guid?`带值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:52:04.067

让我们检查您的代码。没有语法糖，它真正说的是：

```
Nullable<Guid> x = new Nullable<Guid>(new Guid());
List<Nullable<Guid>> y = new List<Nullable<Guid>>();
y.Add(x); 
```

### 解释

`Nullable<>`实际上是 a `struct`，所以它从来都不是`null`；只有它的`Value`属性有可能存在`null`，但由于它的基础类型 ( `Guid`)*也是*a `struct`，所以列表中的任何**内容都不是***真的* `null`。

那我为什么要解释呢？好吧，`List<>.Contains()`到了施展魔法的时候，这两种方法的结合条件`struct`决定`Equals()`了你的 empty `Guid`s 不相等。

> 采用两个可空 guid 的可空相等运算符适用于这种情况，将被调用，并且始终返回 false。

*[来源](https://stackoverflow.com/a/2177971/74757)*

### 我们如何解决它？

由于`Nullable`在您的解决方案中非常无用，我会重构您的代码以摆脱它。相反，我们可以使用`Guid`一个方便的属性：`Empty`

```
Guid x = Guid.Empty;
List<Guid> y = new List<Guid>();
y.Add(x);

Console.WriteLine(y.Contains(x)); // True
Console.WriteLine(y.Contains(Guid.Empty)); // True 
```

请参阅上面的实际操作：**[Ideone](http://ideone.com/lEMYM)**

再次，查看Eric Lippert 的[这篇文章](https://stackoverflow.com/questions/2177850/guid-null-should-not-be-allowed-by-the-compiler)以获取更多信息。

### 更新：

如果您正在寻找列表中的所有`null`（或空）项目，也许检查列表中的项目更有意义`x`where `x.HasValue`is `false`：

```
var myList = new List<Guid>();
... /* add to myList */
var theEmpties = myList.Where(x => x == Guid.Empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:56:40.417

好像你忘了 () 附近`new List<Guid?>`。所以你的代码工作正常并`y.Contains(x)`返回true。我的检查 Guid 代码`List<Guid?>`：

```
Guid guid = Guid.NewGuid();
foreach (var elem in y)
{
    if (elem != null && guid == elem.Value)
    {
        //CODE
    }
} 
```

# jquery - jQuery/CSS 转换内容

> ID：12537921
> 
> 赞同：0
> 
> 时间：2012-09-21T20:44:27.663
> 
> 标签：jquery, html, css, jquery-plugins

假设我有两种形式。当用户完成第一个表单时，他们可以单击继续并移至第二个表单。目前我只是使用淡入淡出和淡出来在一页上显示这两种形式。但我想把它改成变换效果。所以假设第二种形式的盒子比第一种形式的盒子大。然后在完成第一个表单并单击提交后，我希望它增长到第二个框的大小，然后显示下一个内容。

我不知道那叫什么，我已经漫无目的地搜索了一段时间，但一切都指向淡入淡出效果，不相关的插件，如旋转等。关于如何为容器实现这种转换效果的任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:06:20.763

这是我放在一起的一个简单示例[http://jsfiddle.net/ums8a/](http://jsfiddle.net/ums8a/)

```
var form1height = $('#form1').height();
var form2height = $('#form2').height();
$('#form2').hide();

$("a").click(function(event) {
    event.preventDefault();
    $('#wrapper').animate({ height: form2height }, 750);
    $('#form1').fadeOut('slow', function() {
        $('#form2').fadeIn('slow');
    });
});​ 
```

和html

```
<div id="wrapper">
    <div id="form1">
        <form name="form1" action="" method="post">
            <p><input name="i1" /></p>
            <p><input name="i2" /></p>
            <p><input name="i3" /></p>
            <p><input name="i4" /></p>
        </form>
    </div>
    <div id="form2">
        <form name="form2" action="" method="post">
            <p><input name="i5" /></p>
            <p><input name="i6" /></p>
            <p><input name="i7" /></p>
            <p><input name="i8" /></p>
            <p><input name="i5" /></p>
            <p><input name="i6" /></p>
            <p><input name="i7" /></p>
            <p><input name="i8" /></p>
        </form>
    </div>
</div>
<a href="#">Click Here</a>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:48:03.367

jQuery 函数怎么样`slideUp()`，`slideDown()`但为了获得最大的灵活性，请使用`animate()`并选择要动画的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:04:19.107

你已经尝试过动画吗？也许这篇[文章](http://jsfiddle.net/Yjm89/)可以帮助你。

# c# - 从 C# 中的多个 Web 文件中读取第一行的有效方法

> ID：12537935
> 
> 赞同：0
> 
> 时间：2012-09-21T20:46:25.913
> 
> 标签：c#, web

有一个 Web 服务器包含几个长文件 (>500Kb)，其中包含不同类别的新闻。我只需要获取每个类别的最新消息，文件的第一行（通常< 1Kb，但可以更多）并快速下载，因为连接速度很慢，我的想法是逐行阅读，所以下载最少的数据量。目前我执行以下代码，但下载完整文件所需的时间似乎并没有太大改善。

```
foreach(var newsType in newsTypes)
{
    var request = WebRequest.Create("http://www.xxxx.com/" + newsType) as HttpWebRequest;
    request.Timeout = 5000;
    using (var response = request.GetResponse() as HttpWebResponse)
    {
        using (var reader = new StreamReader(response.GetResponseStream()))
        {
            while (!reader.EndOfStream)
            {
                var fileRowCSV = reader.ReadLine();
                ...
                if (old-news) break;
                ...
        }
    }
} 
```

是否有我需要修改的设置，以便不是所有文件都被传输？我可以以某种方式重用一个连接来读取其他文件吗？关于如何改进流程的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:06:35.293

我认为 .NET Framework 中没有内置的方法可以做到这一点。但是，如果您想简单地加快整个过程，您可以（我认为相对容易）并行化外`foreach`循环。

或者，[这里](http://code.msdn.microsoft.com/CSWebDownloader-5fdcfb74)是一个 MSDN 示例，显示从 Web 下载文件的进度。您应该能够使用该示例中的代码来完成您想要的操作：每 X 个字节后，检查您是否已到达`old-news`，如果是，请取消下载。公平的警告，这不仅仅是几行代码。

# javascript - 使用 jquery 的延迟与 settimeout

> ID：12537939
> 
> 赞同：0
> 
> 时间：2012-09-21T20:46:39.690
> 
> 标签：javascript, jquery, jquery-deferred, deferred

我有一个具有内部循环的模块（使用'settimeout'）。我想在每次计时器发生时触发一个回调。我尝试使用 jQuery 的延迟对象，但没有成功。像：

```
 $(function(){
    var module = new MyModule();
    $.when(module.init()).then("DO Something");
 });

 function MyModule(){

    this.d = $.Deferred();

}

test.prototype.init = function(){
    clearTimeout(this.next);

    var self = this;

    /*  Do Something */

    self.d.resolve();

    this.next = setTimeout(function(){
        self.init(); /* The problem is here - internal call to self */
    }, 4000);
    return self.d.promise();
}; 
```

问题是计时器在内部调用该方法，所以我不会调用“.then(Do Something);” 的主程序。我可以使用老式函数回调（将回调函数传递给模块），但我真的很想尝试这些很棒的功能。

谢谢，

亚尼夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:54:55.150

延迟确实不是您要寻找的，因为这是一次性交易 - 您可能想要的是回调列表。

jQuery 将其作为 $.Callbacks() 提供，这可能是您正在寻找的。

```
function MyModule(){

    this._initCallbacks = $.Callbacks();

}

MyModule.prototype.onInit = function( cb ) {
    if ( typeof cb === "function" ) {
        this._initCallbacks.add( cb );
    }
};

MyModule.prototype.init = function(){
    clearTimeout( this.next );

    var self = this;

    this._callbacks.fire();

    this.next = setTimeout(function(){
        self.init();
    }, 4000);

    return this;
};

$(function(){
    var module = new MyModule();

    module.onInit(function() {
        console.log( "Do something" );
    });

    module.init();
}); 
```

JSFiddle：http: [//jsfiddle.net/SUsyj/](http://jsfiddle.net/SUsyj/)

# mysql - MySQL 选择最近的记录 ID

> ID：12537941
> 
> 赞同：0
> 
> 时间：2012-09-21T20:46:50.420
> 
> 标签：mysql, sql, database

我有一个包含以下两列的消息表：

```
ID
SENT_DATE 
```

假设我有以下按 SENT_DATE 排序的记录：

```
ID              SENT_DATE

54              2012-09-21 13:25:20
53              2012-09-21 13:25:17
32              2012-09-21 13:25:15
52              2012-09-21 13:25:14
51              2012-09-21 13:25:12
46              2012-09-21 13:25:12
50              2012-09-21 13:25:11 
```

如何获取 ID=46（不包括）之后发送的所有新消息 ID？查询应返回以下列表：

```
ID

54
53
32
52
51 
```

请注意，消息 ID 不会随着时间的推移而单调增加，因为它们是由不同的消息队列生成的。但是ID是唯一的。此外，可以同时发送两条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:50:13.333

您可以使用子查询来获取所需`sent_date`的 ID 并返回具有更大值的所有行：

```
SELECT `id`
FROM `messages` 
WHERE `sent_date` >= (SELECT `sent_date` FROM `messages` WHERE `id` = 46)
AND `id` <> 46 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:50:22.727

您可以对 id 46 的 sent_date 使用子选择，如下所示：

```
select * from message_table where sent_date > (select sent_date from message_table where id = 46) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:50:25.720

使用子查询将解决此问题。

综合处理：

```
SELECT `ID` FROM `messages` WHERE `SENT_DATE` >=
    (SELECT `SENT_DATE` FROM `messages` WHERE `ID` = 46) 
```

独家处理：

```
SELECT `ID` FROM `messages` WHERE `SENT_DATE` >
    (SELECT `SENT_DATE` FROM `messages` WHERE `ID` = 46) 
```

# prolog - 扁平化嵌套表达式

> ID：12537943
> 
> 赞同：1
> 
> 时间：2012-09-21T20:46:55.300
> 
> 标签：prolog

我想翻译像`X = a(b(c(d)))`in这样的表达式`[a, b, c, d]`。

我想我必须迭代/递归运算符`=..`，但我不知道如何。我试过

```
flatten([], []).
flatten(Exp, X) :- Exp=..[H,T], flatten(T, Y), X is append([H], Y). 
```

但它似乎不起作用。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:27:56.190

[flatten](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.12%27,swi%28%27/doc/Manual/lists.html%27%29%29) /2 通常是内置的，而[is](http://www.swi-prolog.org/pldoc/doc_for?object=%28is%29/2) /2 引入了算术评估。因此，您的 Prolog 应该警告您代码中的这些问题。

如果您将表达式限制为一元项，则应简化代码（注意我重命名了过程）：

```
flatterm(Exp, [H|R]) :-
    Exp =.. [H, T],
    !, flatterm(T, R).
flatterm(T, [T]). 
```

测试：

```
?- flatterm(a(b(c(d))),X).
X = [a, b, c, d]. 
```

您应该尝试理解为什么我交换了基本/递归案例，以及`!`（也称为[cut](http://www.swi-prolog.org/pldoc/doc_for?object=!/0)）的角色。

# php - 从 timthumb 中提取新的图像尺寸

> ID：12537945
> 
> 赞同：0
> 
> 时间：2012-09-21T20:47:02.640
> 
> 标签：php, image, resize, dimensions, timthumb

我正在使用 timthumb 来调整我的图像大小，因为如果我只输入其中一个尺寸，它会很好地缩放它们。但是我想知道是否可以提取新调整大小的图像的尺寸，以便我可以将其动态添加到 img 标签属性中。

我试过这个没有运气：

```
$fullpath = '/lib/timthumb.php?src='.$image.'&w=100';
$my_image = array_values(getimagesize($fullpath));
list($width, $height, $type, $attr) = $my_image; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:00:25.630

虽然我不确定如何直接读取 timthumb 在缓存中生成的拇指，但这应该可以：

```
$fullpath = '/lib/timthumb.php?src='.$image.'&w=' . $newWidth;

#array with 0 being the width, and 1 being the height, and some other values as well
$oldDims = getimagesize($image);

#timthumb uses floor(), so mimicing here
$newHeight = floor($newWidth / $oldDims[0] * $oldDims[1]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T21:08:19.190

我的想法是在将图像上传到服务器之前对其进行缩放。如果您有很多图像，以这种方式调整它们的大小是一项昂贵的操作。此外，您不需要 timthumb php 可以自己完成此操作。因此，如果您真的*需要*调整服务器上的图像大小，请尝试类似...

```
$size = gewtimagesize($image);
$dimensions = $size['3'];//returns height="xxx" width="xxx"
$img = <<<IMG
    <img src="path/to/img" $dimensions >
IMG;
echo $img; 
```

我不知道它是否有效，但它看起来对我来说是正确的

--编辑--没关系，这对你不起作用

# html - wordpress - 将相同的博客数据拉入多个站点

> ID：12537947
> 
> 赞同：1
> 
> 时间：2012-09-21T20:47:15.883
> 
> 标签：html, css, wordpress, mobile

我目前在 blog.mydomain.com 上安装了一个 wordpress 博客。我正在 m.mydomain.com 上创建我的网站的移动版本，其中将包含一个博客部分。显然，我想使用相同的数据库，只需拉入所有博客文章并使用为移动网站定制的 CSS 显示它们。我怎样才能做到这一点？

编辑：这是我试图将博客文章插入的代码：

```
<div class="blog">
    <div class="section-header">
        <img class="section-logo" src="images/logo-small.png" alt="img">
        <a href="#" class="section-navigation-deploy"><img class="navigation-deploy-icon" src="images/nav-icon.png" alt="img"></a>
        <div class="clear"></div>
   </div>
   <div class="deco-open"></div>

   <?php
require('http://blog.mydomain.com/wp-blog-header.php');
$posts = get_posts('numberposts=-1&order=DSC&orderby=date');
?>

   <?php foreach ($posts as $post) : start_wp(); ?>
<h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
<section><?php the_excerpt(); ?></section>
<?php endforeach; ?>

    <div class="deco-close"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:01:45.290

```
<?php
  require('./blog/wp-blog-header.php');
  $posts = get_posts('numberposts=-1&order=DSC&orderby=date');
?> 
```

要求应该指向`wp-blog-header.php`您博客目录根目录中的文件。

*这是我目前正在使用的代码`wwwroot/index.php`，我的博客在`wwwroot/blog`一旦我得到`$posts`，我将显示内容：*

```
<?php foreach ($posts as $post) : start_wp(); ?>
  <article>
    <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
    <section><?php the_excerpt(); ?></section>
  </article>
<?php endforeach; ?> 
```

# javascript - 选项卡突出显示的元素的选择器

> ID：12537948
> 
> 赞同：0
> 
> 时间：2012-09-21T20:47:16.177
> 
> 标签：javascript, jquery, html, css, dom

通过 tab 键获得焦点的元素是否有 CSS 或 jQuery 选择器，就像您通常对锚标签和表单元素所做的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:49:39.733

这应该适合你。

```
if ($(".selector").is( ":focus" ))
{
    // Do something
} 
```

如果要突出显示焦点上的元素，请使用：

```
$(".selector").focus(function()
{
    $(".selector").css("background-color","#FF99CC");
}); 
```

编辑：@Musa 提出了一个很好的观点。如果它必须由选项卡触发，请查看这篇文章：[jQuery: How to capture the TAB keypress within a Textbox](https://stackoverflow.com/questions/1314450/jquery-how-to-capture-the-tab-keypress-within-a-textbox)我知道它是用于文本框的，但应该不难做到。

# vb.net - ReportViewer - 如何以编程方式填充某些列

> ID：12537950
> 
> 赞同：1
> 
> 时间：2012-09-21T20:47:24.743
> 
> 标签：vb.net, reportviewer, rdlc

我正在尝试使用reportviewer 生成报告。我在 Winforms 本地模式下使用 vb.net，Visual Studio 2010。

除了小柱子外，我已经让它工作了。我将我的业务对象用于数据集。我的问题是我不想在报告中的每一天都在我的业务对象中放置一个单独的属性。（编号的列）我知道在我的业务对象中每天都有一个单独的属性是可行的，但这似乎是一种黑客行为。我希望能够在我自己的表单加载代码中填写列表中的列。我想做这样的事情（伪代码）

```
for each row
 for each daycolumn
      daycolumn_x.text = value from my list of calculation
  end for 
```

结束

我一辈子都找不到如何引用或访问这些列（可能是因为这样做的方法不对！？）有什么建议可以访问报告中的表格条目，或者更好的方法来完成这个？感谢您阅读这么远...（PS 我知道关于列表有一些类似的问题，但我认为这不是一回事。我认为子报告不会为此工作）

这就是我希望它看起来的样子：

哎呀——它说我还不允许发布图像，所以这是我试图展示我想要的东西：（这些是列标题）

员工姓名 ID 比率 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 总计

这是包含reportviewer的表单的代码

```
Public Class frmReport

Private Sub frmReport_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.ReportViewer2.RefreshReport()
End Sub

Private Sub ReportViewer2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ReportViewer2.Load

    Dim c As Employee   ' this is my business object, for the name, rate, id
    Dim eList As List(Of Employee)

    eList = getAllEmployees()  ' get a list of employees 

    Me.EmployeeBindingSource.DataSource = eList

    ' Here is where I want to fill in the dates columns on my own 
```

结束子

# c - 我们可以从控制流图中得到什么信息？

> ID：12537953
> 
> 赞同：0
> 
> 时间：2012-09-21T20:47:32.640
> 
> 标签：c, control-flow, machine-code

我有一个 C 程序跟踪的控制流程图（在 VM 中执行），它非常复杂。我想知道如果我有一个程序跟踪的 CFG 除了控制依赖项之外，我还能提取什么信息！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:56:02.353

这里需要做一个区分：

*   *控制流图*是程序控制的**近似值**。[控制流图](http://en.wikipedia.org/wiki/Control_flow_graph)可以告诉您，对于程序的任何运行，可能*控制*流的位置。程序可能永远不会执行图的某个边缘是完全可行的：

    ```
    i := 23;
    x := some_complicated_function_returning_zero();
    if (x < i) {
       print "Hello, world!";
    }  else {
       print "Bad!";
    } 
    ```

在该程序中，`else`永远不会执行分支，但是程序分析工具通常会报告分支两侧都有控制流边缘。这是因为程序分析是近似的。

*   程序的*跟踪*是程序控制流图中边的遍历。一组好的测试通常会覆盖许多可能的控制流路径（或者至少是那些可行的，直到控制流图的构造不精确），但除此之外，测试用例涵盖了广泛的变量之类的东西在这些执行路径中的取值范围。

*跟踪*将让您看到程序在一次运行中是如何执行的，而控制流图将让您说出“我的程序可以执行的可能方式是什么”。

实际程序很大，因此整个程序的控制流图将非常大，但是，由于您没有指数分支效应，因此跟踪会小得多...

# ios - UIButton自定义按钮不会在选择时更改字体颜色

> ID：12537955
> 
> 赞同：0
> 
> 时间：2012-09-21T20:47:38.717
> 
> 标签：ios, xcode, cocoa-touch, uibutton

我正在使用此代码创建一个 UIButton，但是当按下按钮时，字体不会改变颜色。

```
_gameSlider = [UIButton buttonWithType:UIButtonTypeCustom];
    [_gameSlider setBackgroundImage:[[UIImage imageNamed:@"sliderBackgroundSticker"] resizableImageWithCapInsets:UIEdgeInsetsMake(22, 16, 22, 16)] forState:UIControlStateNormal];
    _gameSlider.frame = CGRectMake(0, 0, self.view.frame.size.width - 20, 70);
    newCnt = self.view.center;
    newCnt.y = newCnt.y + 120;
    _gameSlider.center = newCnt;
    [_gameSlider setTitle:@"PLAY" forState:UIControlStateNormal];
    [_gameSlider.titleLabel setFont:[UIFont fontWithName:@"Chalkduster" size:22]];
    [_gameSlider setTitleColor:[UIColor lightGrayColor] forState:UIControlStateNormal];
    [_gameSlider setTitleColor:[UIColor yellowColor] forState:UIControlStateSelected | UIControlStateHighlighted];
    [_gameSlider addTarget:self action:@selector(playButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:_gameSlider]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:56:49.757

将您想要的背景颜色放在 forState:Highlighted 下。

当它被按下时，它不在`UIControlStateNormal`它的`UIControlStateHighlighted`.

# c++ - 这种字符串格式在 C++ 中意味着什么？

> ID：12537956
> 
> 赞同：0
> 
> 时间：2012-09-21T20:47:41.140
> 
> 标签：c++, dll, formatting, reuters

好的，这可能是我一段时间以来提出的最不聪明的问题之一。可悲的是，谷歌没有让我回答（也没有堆栈）。

在 C++ dll 文件中，我有这一行：

`pSDB->setString("Logger\\AppLogger\\fileLoggerFilename", "rfa.{P}.log")`

我终其一生都无法找出 {P} 准确地代表什么。在该目录中，我将获得如下所示的日志：“rfa.6702.log”、“rfa.6829.log”或“rfa.7024.log”。

我注意到他们一直在增加。这是否合法地意味着 C++ 中的任何内容，或者只是代码中的一个参数集？

编辑：

此代码处理路透社连接。是`pSDB`：

“rfa::config::StagingConfigDatabase *ConnectionManager”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T20:54:43.690

从[这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01615.0510/doc/html/cgo1316096420433.html)：

> Reuters 库在创建日志文件时将默认文件名中的 {p} 字符串替换为 UNIX 进程 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:53:06.553

这与 C++ 无关。C++ 永远不会查看您的字符串。printf 中的“%d”也是如此。这完全取决于 printf() 在做什么。

要回答您的问题，您需要参考解析字符串的实际对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T20:53:39.510

这不是标准的 C++。它在看起来可能是一个记录器库中定义。您应该查看这个特殊库的文档以找出`{P}`方法。特别是，查看`setString()`您用来声明的任何类中的方法的文档`pSDB`。

# ruby-on-rails - 在远程服务器上使用 db 安装 Rails PG gem

> ID：12537958
> 
> 赞同：0
> 
> 时间：2012-09-21T20:47:43.497
> 
> 标签：ruby-on-rails, postgresql, bundler, pg

> **可能重复：**
> [当数据库在不同的服务器上时安装 postgres gem](https://stackoverflow.com/questions/12522878/installing-postgres-gem-when-database-is-on-a-different-server)

我正在部署一个 Rails 应用程序，并且我第一次在与应用程序不同的机器上运行 PostgreSQL。

尝试在我的应用服务器上安装 pg gem 时，Bundler 失败：

```
An error occured while installing pg (0.14.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.1'` succeeds before bundling.
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. 
```

我认为这是因为 pg gem 找不到 PostgreSQL 的开发头文件或 conf 文件，实际上它不会因为 PostgreSQL 没有安装在应用服务器上，它在单独的机器上运行。

那么这里最好的解决方案是什么？我是否应该在应用服务器上安装 PostgreSQL，以便 Bundler 可以构建 pg gem？我可以在不安装 PostgreSQL 的情况下以某种方式安装 pg gem 吗？或者我可以以某种方式将 Bundler 指向另一台机器上的 PostgreSQL 实例以获得构建 gem 所需的东西吗？

# python - 对于循环问题

> ID：12537964
> 
> 赞同：1
> 
> 时间：2012-09-21T20:48:20.640
> 
> 标签：python

我正在使用 Python 3.2 版。有以下代码：

```
for row2 in reader2:
    for row1 in reader1:
        if row1['identification_column'] == row2['identification_column']:
            row2['updated_col'] = row1['updated_col']
    writer.writerow(row2) 
```

reader1 是一个 csv.DictReader 对象，如下所示：

```
 identification_column,type

    1, bike                       
    2, guitar
    3, drums
    4, airplane
    5, computer 
```

reader2 与 reader1 类似，但文件更长、更全面。

问题是这样的：

**我遍历了所有的内循环，如果程序没有找到匹配项，它就不会写行，然后像我想的那样递增外循环。它只是停止。最初它给了我一个错误，直到我[在这里阅读了一篇帖子，](https://stackoverflow.com/questions/3208874/using-dictwriter-in-python-to-write-a-subset-of-a-dictionarys-keys)其中有人建议在作者声明语句中添加“extrasaction = 'ignore'”。但这并没有解决我的问题。**

对于修复此逻辑的任何反馈，我将不胜感激。在我看来，以下是将会发生的事情：

*A）在内循环没有从外循环中找到有问题的值的情况下，程序输出外循环中的行而不做任何更改*

*B）如果内部循环具有外部循环正在迭代的确切值，请更改该行中的一列中的值，然后输出该行*

我可以看到，程序只是在内循环的第一次迭代后停止，但我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:54:16.137

`reader1`并且`reader2`是文件对象（包装在`csv`DictReader 中）。这些是只能读取一次的迭代器（直到您位于文件末尾），因此下一个`for`循环无需执行任何操作。

**解决方案：**

将文件读入列表并使用它来刷新`DictReader`：

```
read_1 = myfile1.readlines()
for row2 in reader2:
    reader1 = csv.DictReader(read_1)
    for row1 in reader1:
        # etc. 
```

更好的是，将该 csv 文件读入字典列表一次 - 这应该更快：

```
reader1 = list(csv.DictReader(myfile))
for row2 in reader2:
    for row1 in reader1:
        # etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:54:08.363

我没有经验`csv`，但我猜`reader`一旦你迭代到最后一行，它就已经用尽了，然后你需要重新启动它才能再次迭代。`reader1`所以，也许你应该在内部循环中使用它之前尝试重新分配：

```
for row2 in reader2:
    reader1 = csv.DictReader(open('my.csv'), ...)
    for row1 in reader1: 
```

# xml - 匹配文本节点中的数字字符并将其更改为属性

> ID：12537966
> 
> 赞同：0
> 
> 时间：2012-09-21T20:48:22.480
> 
> 标签：xml, xslt, xpath

我的 XHTML 中的这个 XSL 转换有问题。

我的源文档的插图：

```
<blockquote>
    <center>
       <h1>CHAPTER 100\. RANDOM TEXT HERE </h1>
    </center>
    <center>
       <h1>CHAPTER 200\. RANDOM TEXT HERE </h1>
    </center>
</blockquote> 
```

我想要的输出：

```
<title chapter="100"> CHAPTER 100\. RULES OF SOMETHING TEXT HERE </title>
<title chapter="200"> CHAPTER 200\. RULES OF SOMETHING TEXT HERE </title> 
```

关于如何将它添加到我的 XSLT 样式表的任何想法？我会在这里使用正则表达式来帮助我匹配 # 章吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:39:59.623

嗯，它会涉及到类似的东西

```
<xsl:template match="h1">
  <title chapter="{replace(., 'CHAPTER\s+(\d+)', '$1')}">
    <xsl:apply-templates/>
  </title>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:44:32.197

给定所示表单的输入，在 XSLT 1.0 中，您可以执行以下操作（未经测试）：

```
<xsl:template match="h1">
  <title chapter="{
      substring-before(
        substring-after(.,'CHAPTER '),
        '. '
      )}">
    <xsl:apply-templates/>
  </title>
</xsl:template> 
```

这可能会在不规则输入上产生次优结果。

在 XSLT 2.0 中，您拥有（正如 Michael Kay 刚刚观察到的）一组更丰富的正则表达式函数，可以让您更方便地处理输入中的一些不规则性；,`matches()`和函数值得一读`tokenize()`。`replace()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:58:28.087

假设源是 HTML，您希望将其转换为纯 XML。

我会将整个源文档加载到 DOM 树中，然后从那里创建目标 XML。几乎所有语言都可以将源代码从字符串或文件读取到 DOM 树中。SAX 解析器也可用于此目的，只需为解析器编写代码以将输入转换为所需的输出。

我猜它也可以使用正则表达式来完成，但是没有办法检查输出的有效性，使用真正的树/解析器具有所有这些功能（天气 DOM/SAX 等）。

# sql - 仅按字符串的数字部分排序

> ID：12537968
> 
> 赞同：6
> 
> 时间：2012-09-21T20:48:25.257
> 
> 标签：sql, sql-server-2008

我有一个名为`Number`填充此数据的列（列是 nchar）：

```
1
2
1091
3
20
2B 
```

我想要一个给出这个顺序的选择语句：

```
1
2
2B
3
20
1091 
```

我怎么能做到这一点？谢谢大家的帮助

（已编辑）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T21:08:26.303

在发现第一个非数字的位置后，您可以通过转换为数字来执行一些技巧。即使原始字符串不包含字母，在末尾附加一个随机字符也可以将所有字符串视为相同。

```
SELECT [Number] FROM dbo.TableName 
ORDER BY CONVERT(INT, LEFT(Number, PATINDEX('%[^0-9]%', Number + 'z')-1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:02:50.870

您要查找的内容称为**NATURAL SORT**，它与大多数系统提供的常规排序不同。我在 Stack Overflow 上找到了一些帖子，其中涵盖了各种流行 SQL 引擎中的自然排序，包括一个关于`SQL Server`.

这里的想法可能会让你开始寻找解决方案。

[Oracle：如何在 SQL 查询中实现“自然”排序？](https://stackoverflow.com/questions/219982/oracle-how-can-i-implement-a-natural-order-by-in-a-sql-query)

不过，您可能必须更改 SQL 引擎的语法。

找到另一个 MYSQL 版本：

[MySQL中的自然排序](https://stackoverflow.com/questions/153633/natural-sort-in-mysql)

尚未找到任何适用于 SQL Server 的内容。

**编辑3**

啊，这个也涵盖了一些 SQL Server 的想法：

[MySQL中的自然排序](https://stackoverflow.com/questions/153633/natural-sort-in-mysql)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:15:42.460

使用 PATINDEX，检查这个[SQL Fiddle](http://sqlfiddle.com/#!3/443ad/7)代码。@AaronBertrand 在我测试时刚刚回答。

只是为了添加更多价值和信息，请检查[此 SQLServerCentral 链接](http://www.sqlservercentral.com/Forums/Topic693752-149-1.aspx)，因为您可以在那里找到更多答案。

并检查[Microsoft SQL 2005 中的这个 Natural (human alpha-numeric) sort](https://stackoverflow.com/questions/34509/natural-human-alpha-numeric-sort-in-microsoft-sql-2005)，有很多有用的答案和变体。

# c++ - 未初始化的值是由堆分配 OpenCV Kmeans 创建的

> ID：12537974
> 
> 赞同：1
> 
> 时间：2012-09-21T20:48:59.637
> 
> 标签：c++, memory, opencv, initialization

我在 openCV 代码中做一个简单的 kmean 聚类。它运行成功，但是当我使用 valgrind 检查它有内​​存问题时：

> ==6982== 条件跳转或移动取决于未初始化的值
> ==6982== 未初始化的值是由堆分配创建的

这是简单的代码，其中输入图像'obs'被堆叠到大矩阵'samples'中，然后我调用kmean内置函数

```
/*GETINITKMEANS: calculate initial kmeans segmentation (lev,img) 
obs:    input image
    levels: array holding intensity levels
    hh:     height
    ww:     width of image
    nlevels:number of levels

    lev:    holds segmentation labels
    img:    holds segmentation reconstruction
 */

void getinitkmeans(Mat &obs,Mat &lev,Mat &img,vector<UINT8>& levels,int hh,int ww,int nlevels)
{
    int dim=hh*ww;

    // data for kmeans
    Mat samples(dim,3,CV_32F,Scalar(0));
    Mat labels(dim,1,CV_8U,Scalar(0));
    Mat centers(nlevels,3,CV_32F,Scalar(0));

    // extract bgr pixel values into samples matrix
    for (int i=0;i<hh;i++)
    {
        for (int j=0;j<ww;j++)
        {
            samples.at<float>(i*ww+j,0) = (float)obs.at<Vec3b>(i,j)[0];
            samples.at<float>(i*ww+j,1) = (float)obs.at<Vec3b>(i,j)[1];
            samples.at<float>(i*ww+j,2) = (float)obs.at<Vec3b>(i,j)[2];
        }
    }

    // run kmeans algorithm
    kmeans(samples,nlevels,labels,cv::TermCriteria(CV_TERMCRIT_ITER,30,0),1,KMEANS_RANDOM_CENTERS,centers);

    // construct lev, img
    for (int i=0;i<hh;i++)
    {
        for (int j=0;j<ww;j++)
        {
            lev.at<UINT8>(i,j) = labels.at<int>(i*ww+j,0);
            img.at<UINT8>(i,j) = levels[labels.at<int>(i*ww+j,0)];
        }
    }
} 
```

# php - falang 和菜单别名翻译

> ID：12537982
> 
> 赞同：0
> 
> 时间：2012-09-21T20:49:43.883
> 
> 标签：php, joomla

我为一个英语-西班牙语站点安装了 falang。一切正常，直到我开始翻译菜单项。问题是 falang 不翻译菜单别名。在网上我找到了一个解决方案，我只是将路由字段添加到菜单内容元素，但这让我遇到了另一个问题，当我切换语言时，语言切换器将我重定向到主页，因为它必须重定向到的 URL将菜单路径翻译成当前语言。例如，如果我在文章页面上，英文 URL 将是 mysite/articles/articlename-id，如果我切换语言，则 URL 必须是 mysite/articulos/nombredelarticulo-id 但语言切换器会重定向到 mysite/articles /nombredelarticulo-id。有没有解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:17:36.797

JoomSEF 可能不是您的最佳解决方案，具体取决于您网站的组织方式。JoomSEF 根据类别/内容而不是菜单树编写 url。您的网址将如下所示：“home/category/subcategory/article-title”，而不是：“home/menu-item/submenu-item”。因此，您在 falang 翻译中输入的任何菜单别名都不会被 JoomSEF 使用。我和falang也有同样的问题，我觉得暂时没有办法解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:37:05.047

我认为最好的办法是使用专用的 SEF 组件，例如[JoomSEF](http://extensions.joomla.org/extensions/site-management/sef/1063)（请注意其他可能更好的组件 - 特别是如果您愿意付费！）。我推荐这个，因为它声明它“支持使用 JoomFish/Falang 在多语言网站上进行 URL 翻译”。所以应该无缝工作。

# objective-c - 应用日历功能不再在 ios 6 中工作

> ID：12537984
> 
> 赞同：17
> 
> 时间：2012-09-21T20:50:02.630
> 
> 标签：objective-c, ios, icalendar, eventkit

在我目前正在开发的应用程序中，用户和用户日历之间存在交互，就像许多应用程序中发生的那样，非常标准的东西。在我升级到 ios 6 之前它工作正常。当我尝试执行相同的日历功能但我的应用程序确实可以时，我现在面临“此应用程序无权访问您的日历。您可以在隐私设置中启用访问权限”对话框不会出现在设备日历隐私设置中。我需要使用一些新的 api 来要求用户授予访问权限吗？

非常感谢能帮助我解决这个问题的人。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-24T10:54:32.537

我相信我有完全相同的问题。我正在使用 iOS 6 将我正在开发的应用程序的普通开发人员构建部署到我的 iPhone 4 上。

编辑：我终于像这样解决了，我没有在网上找到信息，而是在 API 中找到了它。

运行以下命令以请求权限。这显然是一个异步调用，在用户授权应用程序之前不会授予访问权限。

```
EKEventStore *es = [[EKEventStore alloc] init];
[es requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    /* This code will run when uses has made his/her choice */
}]; 
```

此外，您可以指定应用程序尝试使用 Info.plist 中的信息做什么。有一个名为 Privacy - Calendars Usage Description (NSCalendarsUsageDescription) 的键可以包含将在提示中显示给用户的字符串描述。

**以下是我遇到的问题的完整详细信息（由上述修复）：**

当我尝试将事件添加到日历时，我看到以下屏幕： ![添加事件错误信息](../Images/185ec79b791c4c0df91535e33398f6e0.png)

当我打开日历隐私设置的设置时，没有可见的应用程序： ![设置、隐私、日历](../Images/41e092a9bbb3a9b950cc5e68d00f921f.png)

~~这一切都让我认为我必须在 Info.plist 中进行一些设置以启用日历访问并在启动时询问用户权限。我在网上搜索过，但没有找到任何东西。~~

@jloewy，我想这与您遇到的问题相同吗？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-09T17:27:45.537

如果您计划支持 iOS 6 之前的设备，我会添加以下内容，否则您会收到错误消息。

```
EKEventStore *store = [[EKEventStore alloc] init];    
if([store respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
    [store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
        /* This code will run when uses has made his/her choice */
    }];
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-17T15:22:47.800

如果您想等待用户响应请求，可以在接受的答案中添加一些代码行：

```
__block BOOL accessGranted = NO;

if([store respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
    dispatch_semaphore_t sema = dispatch_semaphore_create(0);
    [store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
        accessGranted = granted;
        dispatch_semaphore_signal(sema);
    }];
    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
} else { // we're on iOS 5 or older
    accessGranted = YES;
}

if (accessGranted) {
    // go on
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T20:14:11.800

它只会请求一次许可，下次它会记住选择。如果您不允许访问日历，则下次它不会询问，也不允许将事件添加到日历。

如果您想重置这些设置，您必须删除“隐私设置”，然后只有在您的应用尝试使用 RequestAccessToEntityType API 访问日历时，它才会请求权限。

[http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T21:13:10.627

在允许应用程序访问日历信息之前，将有一个弹出窗口询问用户的权限。如果您不允许应用程序访问日历，则需要通过在设置中将应用程序列入白名单来明确允许应用程序访问日历。

# python - python AVL树插入

> ID：12537986
> 
> 赞同：4
> 
> 时间：2012-09-21T20:50:17.887
> 
> 标签：python, avl-tree

我写了一个python代码来实现。在编写代码时，我完全参考了我拥有的伪代码。为了测试我创建的类，我编写了一个小测试代码“app.py”。它从用户那里获取节点数并随机生成 AVL 树，如下所示：-

```
from avl import *
import random

n = input("Enter number of nodes: ")
l = random.sample(range(-10000,10001),n)
root = node(l[0])
for x in l:
    root = root.insert(x)
print root.key
print "Your tree is\n"
root.inorder()
k = input("Enter integer to insert: ")
root.insert(k)
root.inorder()
k = input("Enter integer to delete: ")
root.delete(k)
root.inorder() 
```

以下是保存在avl.py中的AVL树实现

```
class node:
    def __init__(self,data):
        self.left = None
        self.right = None
        self.key = data
        self.height = 1
    def calheight(self):
        if not self.left:
            if not self.right:
                return 1
            else:
                return 1 + self.right.height
        else:
            if not self.right:
                return 1 + self.left.height
            else:
                return max(self.left.height,self.right.height)+1
    def rrotate(self):
        p=self.left
        self.left=p.right
        p.right=self
        self=p
        self.right.calheight()
        self.calheight()
        return self
    def lrotate(self):
        p=self.right
        self.right=p.left
        p.left=self
        self=p
        self.left.calheight()
        self.calheight()
        return self
    def dlrotate(self):
        self.right = self.right.rrotate()
        self = self.lrotate()
        return self
    def drrotate(self):
        self.left = self.left.lrotate()
        self = self.rrotate()
        return self
    def bal(self):
        if not self.left:
            if not self.right:
                return 0
            else:
                return -(self.right.height)
        else:
            if not self.right:
                return self.left.height
            else:
                return (self.left.height-self.right.height)
    def insert(self,data):
        if (data < self.key):
            if not self.left:
                self.left = node(data)
            else:
                self.left = self.left.insert(data)
                if(self.bal() == 2):
                    print self.height,"\t",self.left.bal(),"\t",self.bal(),"\t",self.key
                    if(self.left.bal() == 1):
                        self = self.rrotate()
                    else:
                        self = self.drrotate()
        elif (data > self.key):
            if not self.right:
                self.right = node(data)
            else:
                self.right = self.right.insert(data)
                if(self.bal() == -2):
                    print self.height,"\t",self.right.bal(),"\t",self.bal(),"\t",self.key
                    if(self.right.bal() == -1):
                        self = self.lrotate()
                    else:
                        self = self.dlrotate()
        else:
            print "Key Already Exists"
        self.height=self.calheight()
        return self
    def delete(self,data):
        if (data < self.key):
            self.left = self.left.delete(data)
        elif (data > self.key):
            self.right = self.right.delete(data)
        else:
            if not self.left:
                if not self.right:
                    temp = self
                    self = None
                else:
                    temp = self.right
                    self = temp
                del temp
            elif not self.right:
                if not self.left:
                    temp = self
                    self = None
                else:
                    temp = self.left
                    self = temp
                del temp
            else:
                temp = self.right
                while temp.left:
                    temp = temp.left
                self.key = temp.key
                self.right = self.right.delete(temp.key)
            if self:
                self.height=self.calheight()
                if(self.bal() > 1):
                    if(self.left.bal() > 0):
                        self = self.rrotate()
                    else:
                        self = self.drrotate()
                elif(self.bal() < -1):
                    if(self.right.bal() < 0):
                        self = self.lrotate()
                    else:
                        self = self.dlrotate()
        return self
    def inorder(self):
        if self.left:   
            self.left.inorder()
        print self.height,"\t",self.bal(),"\t",self.key
        if self.right:
            self.right.inorder() 
```

app.py 的输出一开始看起来还不错。但是对于重复运行具有更高 n 值（超过 50）的 app.py，我开始注意到通常某些节点的平衡因子的绝对值严格大于 1 甚至 2。在一次运行期间它甚至给出了错误，因为它尝试了左旋转没有右孩子的节点。

问题很可能在于插入功能。我反复检查了我的平衡条件和旋转算法。从理论上讲，它们似乎都很好。如果有人能找到错误，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-20T03:10:13.343

`self`在 Python 中是不可变的，当您从方法返回时，局部变量会被释放，并且不会`self`像 c 中的指针那样真正改变。你必须想出另一种方法来处理旋转。例如，[https://github.com/pgrafov/python-avl-tree/blob/master/pyavltree.py](https://github.com/pgrafov/python-avl-tree/blob/master/pyavltree.py)通过推断父节点来处理旋转。

另请参阅：[在方法中用另一个相同类型的对象替换 self 对象是否安全？](https://stackoverflow.com/questions/1216356/is-it-safe-to-replace-a-self-object-by-another-object-of-the-same-type-in-a-meth)

# java - 将所有文件下载为 zip

> ID：12537996
> 
> 赞同：1
> 
> 时间：2012-09-21T20:50:59.077
> 
> 标签：java, javascript, google-app-engine, web-applications

我正在使用 java 在 google app engine 上开发一个 web 应用程序。我有许多文件的链接，我必须提供一个链接以将所有这些文件下载为 zip。

我能想到的一种方法是在 gae 服务器上下载所有这些文件，使用一些 java 代码压缩它们，将 zip 上传回 gae 服务器并提示用户下载此 zip 文件，并在用户下载后从服务器中删除 zip下载它。

有没有更好的解决方案。我希望有一个不使用外部服务的解决方案。

我可以一个一个地下载文件并使用javascript在客户端压缩它们吗？

寻找类似 gmail 的东西 下载所有附件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:08:24.477

由于安全原因，Javascript 无法执行您希望执行的操作。前一种方法可以解决您的问题。

我建议您简单地使用系统调用，而不是使用 Java 代码为您压缩它：

```
Runtime.getRunTime().exec("zip -r tmp.zip .") 
```

这会将运行时当前目录中的所有文件压缩到一个名为`tmp.zip`.

# facebook - Facebook 评论小部件和打开图形对象

> ID：12537998
> 
> 赞同：-1
> 
> 时间：2012-09-21T20:51:07.070
> 
> 标签：facebook, comments, facebook-opengraph

请帮忙！我在任何地方都找不到如何做到这一点......这可能吗？

1.  我有一个使用 OG 对象（例如，称为`MyObject`）创建的 facebook 应用程序，此外，在我的应用程序中，我想使用评论小部件。

2.  我为我的`MyObject"`对象创建了动态 URL，例如

> [http://example.com/myobject.php?=4](http://example.com/myobject.php?=4)

并且这些页面具有正确的 OG 标签来识别 OG 对象...

3.  我将评论小部件添加到这些页面`data-href="http://example.com/myobject.php?=4"`

4.  我希望 facebook 将评论发布到时间线，例如：

> “用户评论了一个 MyObject”

以及下面的相应数据，而不是

> “用户评论了一个链接”

因为它一直在做。

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:27:33.470

> 我希望 facebook 将评论发布到时间线，例如：“用户评论了 MyObject”和下面的相应数据，而不是“用户评论了链接”，因为它一直在做......

评论插件不知道你在你的应用程序中定义了任何对象——它`http://mysite.com/myobject.php?=4`只是一个普通的 URL，因此它以“用户对链接发表评论”的形式发布到时间线。

如果您想以另一种方式使用它，您还必须在您的应用程序中设置“评论”*操作*（可能不命名为“评论”，因为 Facebook 可能不会批准带有该措辞的操作） - 并且必须发布您自己执行该操作，并带有来自用户的消息（在这种情况下，这将是他对对象的评论）。

但是我认为，您还必须自己实现评论过程——评论插件本身不提供该功能。

# php - 在自己的登录类中密码验证失败

> ID：12537999
> 
> 赞同：0
> 
> 时间：2012-09-21T20:51:12.013
> 
> 标签：php, login

我目前正在开发我自己的具有登录和注册功能的用户类。我这样做主要是为了学习体验。现在我遇到了一个我无法解决的问题。我的注册函数如下所示：

```
public function createUser($username, $email, $password)
{   
    $password = trim($password);
//Generate users salt
$user_salt = $this->getRandomHash();

//Salt and Hash the password
$password = $user_salt . $password;
$password = $this->hashData($password);

//Create verification code
$code = $this->randomString();

//Commit values to database here.
$created = "INSERT INTO users (username, email, password, user_salt, is_verified, is_active, verification_code) VALUES ('".$username."','".$email."', '".$password."', '".$user_salt."', 0, 1, '".$code."')";
    $created = $this->_database->Set($created);

if($created != false){
    return true;
}

return false;
} 
```

而 hashData 看起来像这样：

```
protected function hashData($data)
{
return hash_hmac('sha512', $data, $this->_siteKey);
} 
```

这是我的登录功能：

```
$password = trim($password);
//Select users row from database base on $email
$selection = "SELECT * FROM users WHERE username='".$username."' LIMIT 1";
    $selection = $this->_database->Get($selection);

    $row = mysqli_fetch_assoc($selection);
    //Salt and hash password for checking
    $password = $row['user_salt'] . $password;
    $password = $this->hashData($password);

    $match = false;
    //Check email and password hash match database row
    if($username == $row['username'] && $password == $row['password']){
       $match = true;
    } 
```

现在的问题是密码不匹配，即使我百分百确定我输入正确。我不太确定它为什么会失败，因为我使用相同的盐来散列输入的密码。也许我在这里做错了什么......如果您需要更多代码，请告诉我。否则感谢任何愿意提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:14:30.453

我的愚蠢错误！

数据库中的盐列只接受长度为 50 的盐。我生成的盐更长..