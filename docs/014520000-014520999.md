# StackOverflow 问答 14520000-14520999

# sencha-touch - 如何访问在同一视图 senchatouch 中定义的函数中的视图初始化中声明的变量

> ID：14520007
> 
> 赞同：0
> 
> 时间：2013-01-25T10:34:34.743
> 
> 标签：sencha-touch, sencha-touch-2

我在视图的初始化部分声明了一个变量。当我尝试在面板中声明的函数中访问此变量时，我收到一个错误，指出该变量未定义。我尝试通过 1>this.variablename 访问它2>viewid.variablename....我做错了什么？

```
Ext.define('app.view.location', {
            extend : 'Ext.Panel',
            xtype : 'location_d',
            id : 'locdetail',
            initialize : function() {
                loc = 'abc';
            },
            config : {
                layout : {
                    type : 'card'
                },
                scrollable : true,
                fullscreen : true,
                items : [{
                            xtype : 'panel',
                            html : 'Get Dir',
                            id : 'Dir',
                            cls : 'loc',
                            listeners : {
                                tap : {
                                    element : 'element',
                                    fn : function(m) {
                                        alert(this.loc); //gives me undefined variable error
                                    }
                                }
                            }
                        }]
            }
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T12:20:53.747

您的代码中有一些错误。

首先，您需要在配置中添加*local* als 变量。

```
config : {
    layout : {
        type : 'card'
    },
    loc: null,
    scrollable : true,
    ...} 
```

然后你应该用他的二传手设置 loc 。

```
initialize : function() {
    this.setLoc("abc");
}, 
```

在您的点击侦听器中，您不能使用**this**，因为它引用内部面板而不是外部面板，因此请使用 ComponenetManager 获取外部面板。

```
listeners : {
    tap : {
        element : 'element',
        fn : function(m) {
            alert(Ext.ComponentManager.get("locdetail").getLoc());
        }
    }
} 
```

我试过了，它没有问题！

完整代码：

```
Ext.define('app.view.location', {
    extend : 'Ext.Panel',
    xtype : 'location_d',
    id : 'locdetail',
    initialize : function() {
        this.setLoc("abc");
    },
    config : {
        layout : {
            type : 'card'
        },
        loc: null,
        scrollable : true,
        fullscreen : true,
        items : [{
            xtype : 'panel',
            html : 'Get Dir',
            id : 'Dir',
            cls : 'loc',
            listeners : {
                tap : {
                    element : 'element',
                    fn : function(m) {
                        alert(Ext.ComponentManager.get("locdetail").getLoc());
                    }
                }
            }
        }]
    }
}); 
```

Sencha Touch Class 系统指南：[http ://docs.sencha.com/touch/2-1/#!/guide/class_system](http://docs.sencha.com/touch/2-1/#!/guide/class_system)

# android - 我如何用标题调用计数值？

> ID：14520009
> 
> 赞同：0
> 
> 时间：2013-01-25T10:34:37.540
> 
> 标签：android

```
// Getting contacts Count
public int getAllReleasesCount() {
    SQLiteDatabase mDb = mDbHelper.getWritableDatabase();
    String count = "SELECT COUNT"+(KEY_ROWID_REL)+ " FROM "+  DATABASE_TABLE_REL;
    Cursor mcursor = mDb.rawQuery(count, null);
    mcursor.moveToFirst();
    int icount = mcursor.getInt(0);
    System.out.println("NUMBER IN DB: " + icount);
    // return count
    return icount();
}

public long fetchAllReleasesCount(){
    return DatabaseUtils.queryNumEntries(mDb, DATABASE_TABLE_REL );
} 
```

--- 项目dbadapter.java

```
 private void fillData() {
    mDbHelper.open();   
    Cursor projectsCursor = mDbHelper.fetchAllProjects();
    startManagingCursor(projectsCursor);

    // Create an array to specify the fields we want to display in the list (only TITLE)
    String[] from = new String[]{ProjectsDbAdapter.KEY_TITLE};

    // and an array of the fields we want to bind those fields to (in this case just text1)
    int[] to = new int[]{R.id.text1};

    // Now create a simple cursor adapter and set it to display
    SimpleCursorAdapter projects = 
            new SimpleCursorAdapter(this, R.layout.activity_row, projectsCursor, from, to);
    setListAdapter(projects);

}---- project list activity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:46:16.993

尝试将您的 sql 编辑为此：

```
String count = "SELECT COUNT("+KEY_ROWID_REL+ ") AS MYCOUNT FROM "+  DATABASE_TABLE_REL; 
```

# ios - 在iOS中按住一个按钮应该显示按钮的标题

> ID：14520012
> 
> 赞同：0
> 
> 时间：2013-01-25T10:34:57.643
> 
> 标签：ios, objective-c

正如问题的标题所述，当我按住 iOS 中的按钮时，我希望显示按钮的标题。我该怎么做？需要一些建议。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:45:43.300

试试这个，也许它会帮助你...

```
[btnName setTitle:@"Your Title" forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:44:24.160

用这个：

```
-(IBAction)BtnTouchdown:(id)sender
{
    mytimer = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(showBtnTitle) userInfo:nil repeats:NO];                
}

-(void)showBtnTitle
{
   //use label to show title
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:57:16.397

只需为 UIControlStateHighlighted 设置标题...而对于其他状态应该没有标题...

```
[btnName setTitle:@"Title" forState:UIControlStateHighlighted];

[btnName setTitle:@"" forState:UIControlStateNormal];

[btnName setTitle:@"" forState:UIControlStateSelected]; 
```

# eclipse - 删除 SVN 元数据后，eclipse SVN 项目重新连接

> ID：14520016
> 
> 赞同：0
> 
> 时间：2013-01-25T10:35:23.897
> 
> 标签：eclipse, svn

我错误地断开了我的 eclipse SVN 项目，还删除了 SVN 子目录元数据。有什么方法可以重新连接到同一个 SVN 项目。我尝试使用“共享项目”选项，似乎只有项目的根文件夹具有 SVN 元数据并在 Eclipse 中显示为已连接。但是所有子文件夹和文件似乎都与 SVN 断开了连接。请让我知道，在这种情况下有什么方法可以重新连接到 SVN。

谢谢，哈里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:57:00.587

我相信：

```
svn checkout <url> <your_project_dir> 
```

在命令行中应该为您完成工作

因为它将再次从 svn repo 中检查出来。

此外，之后关闭+打开（+重新加载）eclipse项目应该完成eclipse的工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T12:12:19.433

我会在 Eclipse File > import > Project from SVN 中尝试，当它发现本地机器中已经存在该项目时，系统会提示您是否覆盖。

# matlab - 将附加参数传递给 fmincon

> ID：14520021
> 
> 赞同：1
> 
> 时间：2013-01-25T10:35:35.390
> 
> 标签：matlab, constraints, curve-fitting, data-fitting

我想在方程上拟合两个参数`fmincon`。我这样做了，`lsqnonlin`但我想利用`fmincon`.

问题是我不能将测量数据的两个向量传递给`y(x)`函数，例如，以我在`lsqnonlin`.

我该怎么做？

```
estim = lsqnonlin(@fit_simp,X0,lb,ub,options,X,Y) %X,Y are the measured data in vectors, y(x)

estim = fmincon(@fit_simp,X0,[],[],[],[],[],[],nonlcon,options); 
```

我将如何通过测量的向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:52:15.693

使用这样的匿名函数：

```
estim = fmincon(@(y)fit_simp(y),X0,[],[],[],[],[],[],nonlcon,options); 
```

显然你必须调整你的目标函数来接受参数，即`fit_simp`变成`fit_simp(y)`

这是直接来自文档，在此页面中搜索anonymous：

[http://www.mathworks.com/help/optim/ug/fmincon.html](http://www.mathworks.com/help/optim/ug/fmincon.html)和[http://www.mathworks.com/help/optim/pass-extra-parameters.html](http://www.mathworks.com/help/optim/pass-extra-parameters.html)

我刚刚在您的代码中看到您想要传递两个额外的参数 X 和 Y。您可能必须将这些参数封装在匿名函数的单个变量中（但也许您可以发送两个我不确定）

尝试

```
options.Y = Y;
options.X = X; 
```

然后使用`@(options)fit_simp(options)`

# android - 从字符串路径创建位图时android中的OutofMemoryError？

> ID：14520022
> 
> 赞同：0
> 
> 时间：2013-01-25T10:35:41.503
> 
> 标签：android, bitmapfactory

我有一项服务，我正在使用它来更改 android 壁纸。我将图像路径传递给服务，然后使用以下代码将图像设置为墙纸：

```
@Override
public void run() {
    try {
        final String imagePath[] = mSelectedImgPath.split(",");
        while (true) {
            for (int i = 0; i < imagePath.length; i++) {
                bitmap = BitmapFactory.decodeFile(imagePath[i]);
                this.setWallpaper(bitmap);
                Thread.sleep(1000 * time);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

我收到以下错误：

```
01-25 15:59:12.410: E/AndroidRuntime(1702): FATAL EXCEPTION: Thread-149
    01-25 15:59:12.410: E/AndroidRuntime(1702): java.lang.OutOfMemoryError
    01-25 15:59:12.410: E/AndroidRuntime(1702):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
    01-25 15:59:12.410: E/AndroidRuntime(1702):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
    01-25 15:59:12.410: E/AndroidRuntime(1702):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:299)
    01-25 15:59:12.410: E/AndroidRuntime(1702):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:324)
    01-25 15:59:12.410: E/AndroidRuntime(1702):     at com.wallpaper.demo.WallpaperChangeService.run(WallpaperChangeService.java:55)
    01-25 15:59:12.410: E/AndroidRuntime(1702):     at java.lang.Thread.run(Thread.java:856) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:50:13.393

如果您在模拟器中运行程序，请增加您的**“VM 堆” 。**转到 avd 管理器并单击您的 android 模拟器并增加 VM 堆的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:59:00.683

这是因为您的图像可能很大，请尝试缩放图像。

[将图像加载到位图对象时，](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)请参阅此奇怪的内存不足问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:02:04.063

利用

```
bitmap.recycle(); 
```

刚进入循环后

```
 for (int i = 0; i < imagePath.length; i++) {
            bitmap.recycle();
            bitmap = BitmapFactory.decodeFile(imagePath[i]);
            this.setWallpaper(bitmap);
            Thread.sleep(1000 * time);
        } 
```

# python - 如何在 python 3.2 中解压 c 结构？

> ID：14520023
> 
> 赞同：0
> 
> 时间：2013-01-25T10:35:48.000
> 
> 标签：python, c, sockets, struct, python-3.x

我正在开发一个服务器（用 Python 实现）客户端（用 C 实现）应用程序。我想使用服务器端的 struct 模块（Python）解压缩从 C 客户端接收到的原始字节。

我的 C 结构（来自 C 客户端）：

```
typedef struct lokesh{
    int command;

     union 
     {
        struct{
            int data[100];
            int ttl[100];
        };

        struct{
            char config[256];

        };   
     };
} mystructdata; 
```

在服务器端解包（Python）：-

```
import struct

data,address=socket.recvfrom(1024)
result=struct.unpack('<i 2048s',data)
print(result[0]) 
```

但我收到一个错误：-

```
struct.error: unpack require object of size 2052 
```

我认为问题出在我的 unpack 方法的格式字符串`'<i 2048s'`参数中。

编辑 ：-

> 现在，我已经用格式字符串替换`'<i 2048s'`了格式字符串 `'<i 256s'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:44:58.837

有两个问题：

*   [`.recvfrom()`](http://docs.python.org/3/library/socket.html#socket.socket.recvfrom)返回 的元组`(data, address)`，您只需将数据传递给`struct.unpack()`。

*   您最多只能从套接字读取 1024 个字节，但解包格式需要 2052 个字节。从套接字读取，直到您首先收到足够的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:14:37.567

Lokesh，我不是 python 专家，但在我看来，你是在告诉 python 的**struct**你有：

*   一个小端整数，后跟
*   2048 个字符[]

（基于[http://docs.python.org/2/library/struct.html#format-characters](http://docs.python.org/2/library/struct.html#format-characters)）

查看您的 C 结构定义，这根本不是您所拥有的。你有：

*   一个整数，后跟以下之一：
    *   两个整数数组，每个数组有 100 个元素
    *   一个 256 个元素的 char 数组

现在，如果不查看将结构推送到线路上的 C 代码，就很难知道整数的字节序（网络字节顺序是大字节序）。但除此之外，您对**struct**的数据规范看起来是错误的。

I'm guessing that the interpretation of the union in the C struct will depend on the contents of **command**. As such, it seems like you'll need to examine **command** first off, then come up with an appropriate format string for **struct** based on that. Note that in the data/ttl case you may trip over struct padding issues since it's possible that the compiler on the client side may decide to insert some padding between the **data** and **ttl** arrays in order to satisfy alignment requirements, etc.

# applescript - 如何使用 AppleScript 打开联系人首选项

> ID：14520027
> 
> 赞同：-1
> 
> 时间：2013-01-25T10:35:53.587
> 
> 标签：applescript, abaddressbook

我想使用 AppleScript 在联系人（地址簿）中添加 CardDav 帐户。也无法编写可以打开“联系人首选项”的脚本。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:30:08.133

AppleScript GUI Scripting 可以打开联系人的首选项：

```
tell application "System Events" to perform action "AXPress" of process "Contacts"'s menu bar 1's menu bar item "Contacts"'s menu 1's menu item "Preferences…" 
```

不过，我不知道以编程方式添加 CardDAV 帐户。我没有在联系人的“字典”中看到添加命令的命令，而且我不知道需要创建哪些文件和 plist 才能在幕后添加 CardDAV 帐户。

为了得到一个想法，我创建了一个测试 CardDAV 帐户，然后查看了 Finder 最近修改的文件。这是我发现的，可能还有更多：

*   ~/Library/Application Support/AddressBook/Sources/ 中的一个新文件夹，其中包含 4 个文件和一个 Metadata 文件夹
*   ~/Library/LaunchAgents/ 中的新 plist 文件
*   ~/Library/Containers/com.apple.mail/Data/Library/LaunchAgents/ 中的新 plist 文件

# php - 如何检测用户在移动设备上并提供应用程序

> ID：14520036
> 
> 赞同：0
> 
> 时间：2013-01-25T10:36:24.667
> 
> 标签：php, android, ios, mobile

我在 MotoGP.com 上看到，当我从移动设备或平板电脑查看该网站时，我收到一条消息说“你想看看我们的移动应用程序吗”消息，如果我选择“否”，下次我从同一设备，该消息不再出现。我真的很想在我的网站上引入这样的功能，但我不确定这样做的好方法，我想是这样的：

*   用户访问网站时使用 PHP 查找设备（例如尝试检测 OS、iOS 或 Android）
*   查找用户的 MAC 地址
*   从包含 MAC 地址和布尔标志的 DB 表中，检查用户是否曾经访问过并表示不想再次看到对话框。
*   如果 MAC 地址不在 DB 中，则显示消息
*   如果 MAC 地址在设置了标志的数据库中，则不显示消息。

关于这是否是一个好方法的任何评论？这只是我从头开始想出的，搜索似乎一无所获。

感谢您的任何评论。

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:54:28.963

**免责声明：**这并不能解决记住用户选择的问题，但这将帮助您更好地通知用户（比侵入性弹出窗口更好）。如果您设法将它与@WDUK 答案的第二点结合起来（我认为这比这个更适合成为“公认的答案”），您可能会得到一些不错的东西。

* * *

看看[智能横幅](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)。

它并不能完全解决您的问题，但可以解决一些问题。

如果用户没有在他的设备上安装该应用程序，则横幅将出现，并带有指向您在 AppStore 上的应用程序的链接。如果安装了应用程序，单击横幅将打开您的应用程序（如果用户来自智能横幅，您可以让您的应用程序做一些特别的事情）。

如果用户拒绝安装应用程序，它并不能解决您的横幅“记住”的问题，但他们确实很“聪明”并且有一些优势。

来自[Apple的文档](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)：

> **用户会相信点击横幅会将他们带到 App Store 而不是第三方广告**。他们会欣赏横幅**在网页顶部不显眼地呈现，而不是作为中断 Web 内容的全屏广告**。并且有一个大而显眼的关闭按钮，横幅很容易让用户关闭。
> 
> **如果应用程序已经安装在用户的设备上，横幅会智能地改变它的动作，点击横幅会简单地打开应用程序**。如果用户在他的设备上没有您的应用程序，**点击横幅会将他带到应用程序在 App Store 中的条目**。当他返回您的网站时，横幅中会出现一个进度条，指示完成下载需要多长时间。当应用程序完成下载后，查看按钮变为打开按钮，点击横幅将打开应用程序，同时保留您网站中的用户上下文。
> 
> **智能应用横幅会自动确定用户设备是否支持该应用。如果加载横幅的设备不支持您的应用，或者您的应用在用户所在位置不可用，则横幅将不会显示。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:46:28.377

简单的方法如下：

1.  通过他们的用户代理检测他们的设备。请参阅[如何检查用户代理是 ipad 还是 iphone？](https://stackoverflow.com/questions/5155479/how-do-i-check-if-the-useragent-is-an-ipad-or-iphone)如何做到这一点（欺骗性的问题名称，此方法适用于任何设备/浏览器）。还可以使用[PHP 中的便利类](http://code.google.com/p/php-mobile-detect/)。

2.  如果用户拒绝，请设置一个 cookie，以便您将来检查是否应该再次显示您的提示。请参阅[什么是使用 JavaScript 获取和设置单个 cookie 值的“最佳”方式，了解](https://stackoverflow.com/questions/260749/what-is-the-best-way-to-get-and-set-a-single-cookie-value-using-javascript?lq=1)如何在 Javascript 中执行此操作。

将这一点和[rdurand 的想法结合起来](https://stackoverflow.com/a/14520327/662581)，将为您创建适用于所有移动设备的最佳解决方案。智能横幅适用于运行 iOS6 及更高版本的设备，并提供一种简洁的方式来通知您的用户有适用于他们的平台的移动应用程序。如果设备运行 iOS 5 或更低版本，或者根本不是 iOS，那么我描述的上述方法也应该涵盖它们的基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:56:34.427

我认为您可以使用移动检测类。这可能有用 - [http://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

# c# - 如何从开始日期和结束日期查找日期列表

> ID：14520037
> 
> 赞同：-1
> 
> 时间：2013-01-25T10:36:32.993
> 
> 标签：c#, .net, datetime

> **可能重复：**
> [查找给定范围的缺失日期](https://stackoverflow.com/questions/3388344/find-missing-dates-for-a-given-range)
> [创建两个日期之间所有日期的数组或列表](https://stackoverflow.com/questions/3738748/create-an-array-or-list-of-all-dates-between-two-dates)

`DateTime`从表示 a`date of start`和 a的数据类型的两个日期`date of end`。

我需要返回一个数组或列表，其中包含 DateTime 格式的所有日期。

出于性能原因考虑更快的代码。任何人都可以用示例源代码指出我正确的方向吗？

例子

输入

```
startDate =  25/01/2013
endDate = 31/01/2013 
```

结果

```
25/01/2013
26/01/2013
27/01/2013
28/01/2013
29/01/2013
30/01/2013
31/01/2013 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:41:32.393

您可以使用`Enumerable.Range`：

```
var startDate = new DateTime(2013, 1, 25);
var endDate = new DateTime(2013, 1, 31);
int days = (endDate - startDate).Days + 1; // incl. endDate 

List<DateTime> range = Enumerable.Range(0, days)
    .Select(i => startDate.AddDays(i))
    .ToList(); 
```

[**演示**](http://ideone.com/W4gdLa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:40:45.533

您可以创建扩展方法：

```
public static IEnumerable<DateTime> GetDatesTo(this DateTime start, DateTime end)
{
    DateTime date = start;

    while(date <= end)
    {
        yield return date;
        date = date.AddDays(1);
    }
} 
```

用法：

```
DateTime startDate = new DateTime(2013, 1, 25);
DateTime endDate = new DateTime(2013, 1, 31);

foreach(var date in startDate.GetDatesTo(endDate))
    Console.WriteLine(date); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:41:55.697

```
using System;
using System.Collections.Generic;

namespace Demo
{
    public static class Program
    {
        public static void Main()
        {
            foreach (var date in DateRange(new DateTime(2013, 01, 25), new DateTime(2013, 01, 31)))
            {
                Console.WriteLine(date.ToShortDateString());
            }
        }

        public static IEnumerable<DateTime> DateRange(DateTime start, DateTime end)
        {
            for (DateTime date = start; date <= end; date = date.AddDays(1))
            {
                yield return date;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:41:35.490

linq 版本

```
 DateTime[] dates = { /*...25/01/2013, 26/01/2013*/ };
        DateTime start = DateTime.Parse("25/01/2013");
        DateTime end = DateTime.Parse("31/01/2013");
        var q = (from a in dates
                 where a.Date >= start.Date && a.Date <= end.Date
                 select a).ToList(); 
```

# android - 如何从表 SQLite Android Dev 计算数据

> ID：14520038
> 
> 赞同：-5
> 
> 时间：2013-01-25T10:36:33.503
> 
> 标签：android, sqlite

如何从 Android Dev 中的表 SQLite 计算数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:28:32.133

“计算数据”是什么意思

你的意思是像 +,-,*,/ 这样的普通运算符吗

如果是，您必须先从 SQLite 中选择数据。

如果不是，请澄清您的问题。

# javascript - 在使用历史 API 时更改页面标题？

> ID：14520039
> 
> 赞同：1
> 
> 时间：2013-01-25T10:36:35.223
> 
> 标签：javascript, html, browser-history, html5-history

我正在尝试使用 HTML5 历史 API，并且我一直在阅读，即使您*应该*能够使用它来更改文档的标题，但还没有主流浏览器实现这一点。

有问题的 pushState 函数采用以下参数：

```
history.pushState(state object, title, url); 
```

我不太确定为什么已经实现上述内容的浏览器没有实现标题方面，但事情就是这样。

我的问题是，如果我想根据历史 API 更改标题属性，最好的方法是什么？Firefox 至少表示它*可能会*在未来的某个时候实现上述方法：

> Firefox 当前忽略此参数，**尽管它可能在未来使用它。**

( [https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history) )

这让我觉得我放在那里的任何东西都可能与将来决定实现它的浏览器发生冲突。

是否有任何确定的未来证明，“SEO 安全”的方式来做到这一点？还是我应该保留`pushState`代码原样，希望浏览器在将来的某个时候实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:53:29.460

您可以使用以下方式设置文档标题[`document.title`](https://developer.mozilla.org/en-US/docs/DOM/document.title)：

```
document.title = 'Rob says hello'; 
```

只要您使用历史 API 设置的 URL 可以通过直接请求访问，并且这些 URL 可以被搜索引擎蜘蛛发现（[为它们添加站点地图](https://weluse.de/blog/angularjs-seo-finally-a-piece-of-cake.html)），那么它就不应该对 SEO 产生任何影响。

# java - 将毫秒转换为日期时间会给出不正确的时间

> ID：14520044
> 
> 赞同：0
> 
> 时间：2013-01-25T10:36:59.597
> 
> 标签：java, android, date, time

我想将一个长值转换为格式化时间。我使用的代码：

```
long startTimeInSeconds = 60*60*1000*sH + 60*1000*sM + sS*1000 + sL;
SimpleDateFormat dateFormat = new SimpleDateFormat("hh:mm:ss,SSS");
Date start= new Date(SU.startTime);
StartTime = dateFormat.format(start); 
```

这里`sH` `sM`.. 是小时分钟 .. 来自一个字符串，格式是这样的：`"hh:mm:ss,SSS"`.
`SU.startTime`是`startTimeInSeconds`。
`StartTime`是一个字符串。

当我显示它时，`StartTime`它没有给我正确的时间。
例如，当`startTimeInSeconds`是时`2510823`，它必须是，`0:41:50,823`但我明白了`1:41:50,823`。
我不知道我做错了什么，如果我显示小时分钟......像这样：

```
int hours = (int) (SU.startTime / (60 * 60 * 1000)); 
```

然后我得到正确的值。

有谁知道这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T10:41:28.360

我的猜测是您在英国或法国，1970 年 1 月 1 日的时区是 GMT+1。如果您将时区设置为“GMT”，则不会出现此问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T10:45:13.533

正如其他人所建议的那样，直接的问题将通过指定时区来解决。但是，一个更微妙的问题是您使用了不合适的类型。你*只有*一个持续时间，听它的声音——或者*可能*是一天中的某个时间；目前还不清楚。如果您可以使用正确的类型，则时区不应该在这里涉及 - 毕竟，“以秒为单位的开始时间”在逻辑上没有与之相关的时区。

不幸的是，Java 并没有真正的类型来涵盖这一点。你有`Date`和`Calendar`，这两个都不合适。我建议您改用[Joda Time](http://joda-time.sf.net)，您可以根据自己的要求使用[`Duration`](http://joda-time.sourceforge.net/api-release/org/joda/time/Duration.html)or[`LocalTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalTime.html)类型 - 然后为该类型使用适当的格式化程序，您就不会遇到这个问题。

一般来说，Joda Time 是一个更好的日期/时间处理 API - 我强烈建议尽可能使用它而不是 Java API。

编辑：正如评论中所述，您还想要`HH`而不是`hh`格式字符串，因为您想要 24 小时制以便将午夜显示为 00 而不是 12。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:40:50.687

您使用的 TimeZone 可能就是这种情况。如果您未指定默认值，则会将默认值提供给 DateFormat。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:16:41.493

你最好开始使用日历而不是日期。您需要对此进行一些研究。

# mysql - mysql查询将行输出到列

> ID：14520046
> 
> 赞同：1
> 
> 时间：2013-01-25T10:37:06.743
> 
> 标签：mysql

我有以下 100% 有效的查询。

```
SELECT
transporttype,
concat(MONTHNAME(STR_TO_DATE(month, '%m')), ' ', year) AS `month`,
round(sum(cost),0) AS cost
FROM v2ReportingTable
WHERE (transporttype not in ('Extrusions-LongDistance','Extrusions-Shuttle') and urgent='no')
GROUP BY (concat(MONTHNAME(STR_TO_DATE(month, '%m')),' ',year)),transporttype
ORDER BY (concat(MONTHNAME(STR_TO_DATE(month, '%m')),' ',year)), transporttype 
```

这会在 1 列中输出结果，如下所示：

![在此处输入图像描述](../Images/1dd126be1d6ee4b9161eeaf1c8e92663.png)

如何操作查询以使输出按列显示，以便绘制图表。所需的输出如下：

![在此处输入图像描述](../Images/a5ded9be4933ad47b2d1024b7c91a011.png)

一如既往的帮助，

**更新以匹配 Oscar Pérez 的可能答案**

![在此处输入图像描述](../Images/6b6702b45536045040b0588c9a1ecf3a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:50:01.570

您可以使用`LEFT JOIN`运算符。例如：

```
SELECT s0.month, 
       s1.cost as Inbound, 
       s2.cost as LocalPMB,
       s3.cost as Shuttle,    
       s4.cost as LongDistance
  FROM (
         SELECT 1 as month
          UNION
         SELECT 2 as month
          UNION
         SELECT 3 as month
          UNION
         SELECT 4 as month
          UNION
         SELECT 5 as month
          UNION
         SELECT 6 as month
          UNION
         SELECT 7 as month
          UNION
         SELECT 8 as month
          UNION
         SELECT 9 as month
          UNION
         SELECT 10 as month
          UNION
         SELECT 11 as month
          UNION
         SELECT 12 as month
       ) as s0
LEFT JOIN
       (
         SELECT month,
                round(sum(cost),0) AS cost
           FROM v2ReportingTable
          WHERE urgent='no'
            AND transporttype='Inbound'
       GROUP BY month
       ) as s1 on s0.month=s1.month
LEFT JOIN
       (
         SELECT month,
                round(sum(cost),0) AS cost
           FROM v2ReportingTable
          WHERE urgent='no'
            AND transporttype='LocalPMB'
       GROUP BY month
       ) as s2 on s0.month=s2.month
LEFT JOIN
       (
         SELECT month,
                round(sum(cost),0) AS cost
           FROM v2ReportingTable
          WHERE urgent='no'
            AND transporttype='Shuttle'
       GROUP BY month
       ) as s3 on s0.month=s3.month
LEFT JOIN
       (
         SELECT month,
                round(sum(cost),0) AS cost
           FROM v2ReportingTable
          WHERE urgent='no'
            AND transporttype='Long Distance'
       GROUP BY month
       ) as s4 on s0.month=s4.month
ORDER BY month 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:11:49.833

根据@JW，感谢您的帮助。

```
SELECT  `month`,
        MAX(CASE WHEN transporttype = 'Inbound' THEN loads ELSE NULL END) `Inbound`,
        MAX(CASE WHEN transporttype = 'LocalGauteng' THEN loads ELSE NULL END) `LocalGauteng`,
        MAX(CASE WHEN transporttype = 'LongDistance' THEN loads ELSE NULL END) `LongDistance`,
        MAX(CASE WHEN transporttype = 'Shuttle-company1' THEN loads ELSE NULL END) `Shuttle-company1`,
        MAX(CASE WHEN transporttype = 'Shuttle-company2' THEN loads ELSE NULL END) `Shuttle-company2`,
        MAX(CASE WHEN transporttype = 'stores' THEN loads ELSE NULL END) `stores`,
        MAX(CASE WHEN transporttype = 'returns' THEN loads ELSE NULL END) `returns`,
        MAX(CASE WHEN transporttype = 'localkzn' THEN loads ELSE NULL END) `localkzn`
FROM
    (
        SELECT  transporttype,
                CONCAT(MONTHNAME(STR_TO_DATE(month, '%m')), ' ', year) AS `month`,
                COUNT(loadnumber) AS loads
        FROM    v2ReportingTable
        WHERE   transporttype not in ('Extrusions-LongDistance','Extrusions-Shuttle') AND
                urgent='no'
        GROUP BY (concat(MONTHNAME(STR_TO_DATE(month, '%m')),' ',year)), transporttype
    ) aa
GROUP BY `month` 
```

# joomla - youtube视频上传后Joomla网站崩溃

> ID：14520047
> 
> 赞同：0
> 
> 时间：2013-01-25T10:37:07.020
> 
> 标签：joomla, youtube, crash

昨天，我使用编辑器 TinyMCE 在我的 joomla 网站的一篇文章中从 youtube 上传了一个视频，我使用了视频图标并插入了 youtube URL。然后我保存了这篇文章，从那时起该网站就无法访问了。每页在白色背景上打印相同的错误：

```
username: 
pw:
host: gdata.youtube.com
port: 
path: /feeds/users/Fondazione Gaber/uploads
query: orderby=rating&max-results=50&format=5
fragment: 
```

一切都消失了。

我插入的 youtube 视频是错误的，因为它不是视频 url 而是编译 url。 [http://www.youtube.com/watch?v=qWHSDOwBFD0&list=UUeERCnBcsmhHvunRHnR0Rmw&index=1](http://www.youtube.com/watch?v=qWHSDOwBFD0&list=UUeERCnBcsmhHvunRHnR0Rmw&index=1)

joomla 似乎试图对视频列表进行查询，但它太大（> 200 个视频），并且限制为 50。

一切都很奇怪，因为视频不在主页中，而是在一个小节中。我试图删除文章并清空垃圾箱，但没有结果。

我尝试使用调试和 php 页面 index.php 在函数时给出消息

```
// Render the application.
$app->render(); 
```

被调用。

后台正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T21:43:08.117

删除文章。

如果您无法访问后端，请尝试使用 PHPMyAdmin 工具或类似工具从数据库中删除该文章。表：#__ 内容

但要先备份。

我建议使用 Youtube Gallery 扩展，它可以显示一个视频或阅读整个频道以获取所有视频。

您将 youtube 链接放入“视频列表”框中，它会自动识别它的类型。

# php - 在数组初始化时设置数组键（pdo fetch_class）

> ID：14520050
> 
> 赞同：0
> 
> 时间：2013-01-25T10:37:25.680
> 
> 标签：php, sql, pdo, resultset

我正在做一个项目，该项目的一部分要求我将一些 sql 结果转换为一个类对象数组。

为了方便起见，我更喜欢将我的数组键设置为 sql 行的主键，这样我就可以快速访问它们。

我现在这样做的方式是将每个对象重新映射到一个新数组，然后手动将键设置为 $object->id。有什么方法可以让 pdo 在获取初始数组时执行此操作，所以我不需要做我正在做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:57:05.920

好吧，你可以这样做：

```
array_map(
    'reset', 
    $stmt->fetchAll(
        PDO::FETCH_GROUP|PDO::FETCH_CLASS, 
        'className'
    )
); 
```

但这可能并不比你现在所做的更漂亮。另请参阅[此处](http://php.net/manual/en/pdostatement.fetchall.php#88699)和[此处](https://stackoverflow.com/questions/14494085/php-pdostatementfetchall-and-grouping-by-key)。

或者可能涉及的东西`PDO::FETCH_KEY_PAIR`？

# jquery - 我想使用 jquery 从 iframe（使用 EOD 创建）中访问不在 iframe 中的内容。请帮忙。:)

> ID：14520056
> 
> 赞同：1
> 
> 时间：2013-01-25T10:37:34.043
> 
> 标签：jquery, iframe

我希望从 iframe 中获取使用 jquery 加载当前 iframe 的 div 的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:44:01.850

杰伊，

您可以将 id 提供给您的 iframe，然后使用

```
parent.$('#id_of_your_iframe').parent(); 
```

或者

您可以将 id 提供给 iframe 的父 div，然后使用

```
parent.$('#id_of_parent_div_of_your_iframe'); 
```

# iphone - 使用 Cocos2d 对精灵进行着色序列

> ID：14520063
> 
> 赞同：1
> 
> 时间：2013-01-25T10:37:50.610
> 
> 标签：iphone, cocos2d-iphone

我正在尝试找出为精灵序列着色的最佳方法。`setColor`使用或为一个精灵着色很简单`CCTintTo`。

我有 spritesheet，其中包含 5 个动画的 20 帧。每次我的角色改变颜色时，这意味着我想看到所有下一帧都涂上新颜色。

我应该为整个精灵表设置颜色吗？但是在这种情况下需要将角色精灵存储在单独的精灵表中就会出现。

__

这是我的解决方案，但似乎我做错了:)

[https://gist.github.com/4634157](https://gist.github.com/4634157)

（缩放动画只是基于精灵的动画的例子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:49:53.107

来到索引纹理和调色板交换类似技术（使用片段着色器）。简单且可扩展的解决方案。

# android - HTML 链接从 Intent 生成的电子邮件中消失（Android 4.1+）

> ID：14520066
> 
> 赞同：4
> 
> 时间：2013-01-25T10:37:55.220
> 
> 标签：android, android-intent, html-email

我在 Android 4.1+ 设备上遇到了问题。我想发送一封`Intent`包含 html 链接的电子邮件（通过）。我知道这适用于 android 2.x 设备，因为我这样做了几个月。

这是java代码：

```
startActivity(Intent.createChooser(
new Intent(Intent.ACTION_SEND)            
.putExtra(Intent.EXTRA_SUBJECT, "A subject")  
.setType("text/html")
.putExtra(Intent.EXTRA_TEXT, Html.fromHtml("Some text ... <a href="http://www.weburl.com">Some text</a>)), "Email")); 
```

在 Android 4.1 上：当我使用此代码时，Gmail 会按预期显示文本，并且我看到蓝色的链接带有下划线。但我收到这封没有链接的邮件。

在 Android 2.x 上：一切都很完美。我收到带有链接的电子邮件

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:22:20.447

我认为电子邮件应用程序没有完整的 html 支持。我有以下代码：

```
Intent emailIntent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts("mailto","", null))            
                .putExtra(Intent.EXTRA_SUBJECT, "LIJSTJE fb")  
                .putExtra(Intent.EXTRA_TEXT, Html.fromHtml(new StringBuilder()
                 .append("<p style='font-weight:bold;'>Some Content</p>")
                 .append("<a>http://www.google.com</a><br/>")
                 .append("<a href='http://www.facebook.com'>facebook</a>")
                 .append("<small><p>More content</p></small>")
                 .toString()));

                startActivity(Intent.createChooser(emailIntent, "Send email...")); 
```

段落和新行按预期添加。然而，样式不是。此外，当您打印完整的 url 时，您会获得一个链接，但是当您像 facebook 链接一样进行操作时，您不会。

我怀疑手机上的电子邮件客户端删除了样式并确保链接链接到可见文本。所以用户知道链接的去向。此外，如果您考虑一下，本机 gmail 应用程序没有样式选项。所以这可能会导致删除样式行为。

至少这是我的理论。:)

（注意：我只在本机 gmail 应用程序上进行了测试！）

此外，我将 Intent 类型从 SEND 更改为 SENDTO，这样它只使用电子邮件客户端而不使用其他应用程序。我删除了 setType() 方法，因为当你使用它时，你会得到一个“找不到应用程序”的错误。

# javascript - 更新选择列表的 knockout.js 不会在第一次更改时触发

> ID：14520067
> 
> 赞同：3
> 
> 时间：2013-01-25T10:37:59.587
> 
> 标签：javascript, knockout.js, knockout-2.0

我有 2 个选择列表，我想同步索引，所以当第一个的索引为 1 时，第二个的索引为 1，依此类推。

这是我的html。

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.0/knockout-min.js"></script>

<div>
<select id="selLight" data-bind="options: $root.ddlLight, value: ddlLightSelected"></select>
<select id="selAction" data-bind="options: $root.ddlAction, value: ddlActionSelected"></select>
</div> 
```

和JavaScript ...

```
var ViewModel = function() {
    var self = this;

    self.ddlLight  = ko.observableArray(["RED", "AMBER", "GREEN"]);
    self.ddlAction = ko.observableArray(["STOP", "READY", "GO"]);
    self.ddlLightSelected  = ko.observable();
    self.ddlActionSelected = ko.observable();

    self.ddlLightSelected.subscribe(function (event) {
        document.getElementById("selAction").selectedIndex =
            self.ddlLight.indexOf(self.ddlLightSelected());
     });

    self.ddlActionSelected.subscribe(function (event) {
        document.getElementById("selLight").selectedIndex =
            self.ddlAction.indexOf(self.ddlActionSelected());
     });    
};

ko.applyBindings(new ViewModel()); 
```

我有一个确切的问题...

[http://jsfiddle.net/phykell/2vUTw/](http://jsfiddle.net/phykell/2vUTw/)

编辑：我在使用 jsfiddle 时遇到了一些问题，所以这里有一个 jsbin ... [http://jsbin.com/ilomer/4/](http://jsbin.com/ilomer/4/)

...这是重新创建问题的方法：

1.  运行 jsFiddle
2.  从 LIGHTS 中选择 GREEN（ACTIONS 将变为 GO） 3\. 从 ACTIONS 中选择 STOP（LIGHTS 应变为 RED 但它们不会）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:21:55.753

问题是这行代码：

```
document.getElementById("selAction").selectedIndex = self.ddlLight.indexOf(self.ddlLightSelected()); 
```

您直接更改 DOM，不允许 Knockout 启动可观察模式。

如果您想更改某些内容，请始终更改`ko.observable`，而不是 JavaScript 变量或 DOM。Knockout 将识别更改，因此更改 DOM 本身。解决方案是：

```
self.ddlLightSelected.subscribe(function (event) {
      var index = self.ddlLight.indexOf(self.ddlLightSelected());
      self.ddlActionSelected(self.ddlAction()[index]); // Update the Observable, not the DOM
});

self.ddlActionSelected.subscribe(function (event) {
    var index = self.ddlAction.indexOf(self.ddlActionSelected());
    self.ddlLightSelected(self.ddlLight()[index]); // Update the Observable, not the DOM
}); 
```

[**更新了 JS Bin**](http://jsbin.com/ilomer/5/edit)。

# php - 通过代码点火器中的ajax将数据传递给控制器

> ID：14520068
> 
> 赞同：1
> 
> 时间：2013-01-25T10:38:15.090
> 
> 标签：php, javascript, codeigniter, jquery, tooltip

我是代码点火器和 jquery 的初学者。我有一个文本框，如果用户在其中输入一些东西，它会在工具提示中显示来自数据库的数据。在我的情况下，我想要的是......我有一个名为“bill no”的文本框。我想要的是如果用户在文本框中输入帐单编号，它会根据帐单编号显示数据。我不知道如何将数据从控制器传递到 ajax 中查看，然后通过如何在工具提示中显示这是我的代码

```
Bill No:<?php echo form_input($bill_no); ?>
<input type="hidden" class="hiddenUrl"><span class="checkbillno" data-trigger="manual"

     data-title="bill no" data-content="here i want to display results"></span> 
```

我的 javascript

```
<script type="text/javascript">

    $(document).ready(function(){

        $('#bill_no').blur(function(){

            if( $('#bill_no').val().length >= 3 )
                {
                  var bill_no = $('#bill_no').val();
                  getResult(bill_no); 
                }
            return false;
        })
        function getResult(billno){
            var baseurl = $('.hiddenUrl').val();
            $('.checkbillno').addClass('preloader');
            $.ajax({
                url : baseurl + 'Controller/checkBillNo/' + billno,
                cache : false,
                success : function(response){
                    $('.checkbillno').removeClass('preloader');
                    if(response == 'userOk')
                        $('.checkbillno').removeClass('preloader');
                    if(response == 'userOk') $('.checkUser').removeClass('userNo').addClass('userOk');
                    else $('.checkUser').removeClass('userOk').addClass('userNo');

                }
            })
        }
    }) 
```

我在这里做的是它只是检查数据库中的账单号，如果它在数据库中可用，那么它添加类“userok”否则“userfalse”..这里我想要的是显示数据以及针对账单号..我知道如何在模型中执行此操作，但不知道如何从控制器传递到 ajax，然后在工具提示中显示结果

我的控制器

```
function checkBillNo($billno){
    $this->load->model('returnModel');
    $query = $this->returnModel->checkBillNo($billno);

    if($query == 1 ) 
        $data['result'] = $query; //how can i pass this result into view in tooltip... (span class)

    else 
        echo 'userNo';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:41:50.227

操作数据的一种有用方法是在数据类型中使用 json：

```
function getResult(billno){
     var baseurl = $('.hiddenUrl').val();
     $('.checkbillno').addClass('preloader');
     $.ajax({
          url : baseurl + 'Controller/checkBillNo/' + billno,
          cache : false,
          dataType: 'json',
          success : function(response){
               $('.checkbillno').attr('data-content', response.toolTip);
          }
     })
} 
```

现在您的 js 函数需要一个 json 编码的数组作为响应，因此在您的控制器中，您可以执行以下操作：

```
$forToolTip = '';
foreach($query->result() as $row){
    $forToolTip .= $row->key;
}

$result['toolTip'] = $forToolTip;
echo json_encode($result); 
```

更改变量以匹配您的概念

# html - Internet Explorer 9 不对齐 div 中的文本

> ID：14520069
> 
> 赞同：0
> 
> 时间：2013-01-25T10:38:19.297
> 
> 标签：html, css, internet-explorer-9

我有一个关于 IE9 和 CSS 的问题。

我有一个 HTML5 表单，我想在其中对齐页面右侧的按钮。但仅在 IE9 中，它与似乎没有任何联系的 div 右对齐。

在 Chrome 和 Firefox 中，它看起来像这样： ![在此处输入图像描述](../Images/3864b43679148cda0193942036f96707.png)

那是期望的结果。

但在 IE9 中，它看起来像这样： ![在此处输入图像描述](../Images/80d4b8eaf3710d049ff7f3d959f6d7fe.png)

当我使用 F12 Developer 工具设置时，它在我选择“文档模式：IE7 标准”和任何浏览器模式时都可以使用。

HTML 看起来像这样，并且在[http://html5.validator.nu/](http://html5.validator.nu/)上经过 HTML5 验证： ![在此处输入图像描述](../Images/1e10734758b3b8284fccff168b916d81.png) 如您所见，此 div 与其他 div 无关。

样式窗口如下所示（所有 css 文件都是 css3 有效的）： ![在此处输入图像描述](../Images/9dbe59213018881cfb9b3ab5441a36d3.png)

我已经尝试过像这里建议的那样放置一个跨度： [Align Text in List in Div with CSS in Internet Explorer 9](https://stackoverflow.com/questions/10575065/align-text-in-list-in-div-with-css-in-internet-explorer-9)

欢迎任何其他建议，或者可以完成这项工作的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:28:01.903

我终于想通了。在每个 dubhead div 之前添加以下行就可以了：

```
<div style="clear:both;"></div> 
```

参考： - [style="clear:both" 有什么用？](https://stackoverflow.com/questions/1012131/what-is-the-use-of-style-clearboth)

# php - 这样的逻辑在php中是否可行

> ID：14520072
> 
> 赞同：-2
> 
> 时间：2013-01-25T10:38:28.713
> 
> 标签：php, html

> **可能重复：**
> [如何描述三个项目之间的石头剪刀布关系？](https://stackoverflow.com/questions/12717149/how-can-one-describe-a-rock-paper-scissors-relationship-between-3-items)

大家好，我正在为石头剪刀布游戏做一个 php 任务，我正在尝试执行规则检查部分并希望使用下面这个 ruby​​ 函数之类的逻辑，我试图尽可能避免使用条件。

有人有想法么 ？

```
def who_wins(p1, p2)
  win_moves = {"rock" => "paper", "paper" => "scissors", "scissors" => "rock"}
  ([p1, p2] & win_moves.values_at(p1, p2)).first
end

who_wins("rock", "paper") # "paper"
who_wins("scissors", "rock") # "rock"
who_wins("scissors", "scissors") # nil 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:49:24.427

我制作的快速功能：

```
function who_wins($p1, $p2){
    $win_moves = array("rock" => "paper", "paper" => "scissors", "scissors" => "rock");
    if($p1 === $p2){
        return null;
    }
    return ($win_moves[$p1] === $p2) ? $p2 : $p1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:53:53.997

尝试这样的事情。唯一的条件是 $p1 和 $p2 相同。逻辑由数组函数处理。

```
function who_wins($p1, $p2) {
    if ($p1 === $p2) {
        return "nil";
    }
    $actions = array("rock", "scissors", "paper");

    $selected_actions = array_merge(array_keys($actions, $p1), array_keys($actions, $p2));
    sort($selected_actions);

   return $actions[$selected_actions[0]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:01:59.913

不确定您的原始功能到底是做什么的，但这是一个非常紧凑的解决方案，我敢肯定，如果有更多的爱，您可以摆脱 if 语句。

```
<?php
echo who_wins("rock", "paper")."\n";
echo who_wins("scissors", "rock")."\n";
echo who_wins("scissors", "scissors")."\n";

function who_wins($p1,$p2) {
    $comb = array (
    "rock"  => 0,
    "paper" => 1,
    "scissors"  => 2,
    );

    $result = (3+$comb[$p1]-$comb[$p2]) % 3;

    if ($result==1){ return $p1; } elseif($result==2) { return $p2; } 

}
?> 
```

# elisp - 为emacs模式添加动态扩展的词

> ID：14520073
> 
> 赞同：2
> 
> 时间：2013-01-25T10:38:29.763
> 
> 标签：elisp

我想在emacs模式下添加一些动态扩展的话，但我真的不知道从哪里开始。

具体来说，我想在 emacs 中以 scad 模式添加 openSCAD 的内置函数和模块的名称，这样当我输入“mi”并点击 M-/“minkowski”时，扩展名中就会出现“dx”和M-/ 扩展为“dxf_linear_extrude”等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:14:29.600

最简单的方法是创建一个虚拟隐藏缓冲区，用这些词填充它（并且您将其置于相同的主要模式中）。例如

```
(unless (get-buffer " *scad words*")
  (with-current-buffer (get-buffer-create " *scad words*")
    (scad-mode)
    (insert "minkowski otherword andyetanother"))) 
```

# c# - 使用 COALESCE 连接值

> ID：14520078
> 
> 赞同：0
> 
> 时间：2013-01-25T10:38:53.823
> 
> 标签：c#, sql-server-2008

我有一个包含这些值的表：

```
Empcode - Name - Skill - Primary
--------------------------------    
  1         X     .net    Yes
  1         X     c#  
  1         X     java   
  1         X     jsp
  2         Y     php     yes 
```

我必须编写一个 SQL 查询，它将数据显示为

```
EmpCode  Name   PrimarySkill SecondarySkill
---------------------------------------------
   1     X      .net         c#,Java,jsp
   2     Y      Php 
```

请帮助生成此查询。我试过合并但没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:17:28.757

尝试这个，
`SELECT distinct e.empcode, e.name ,`
`STUFF(( select ',' + t1.Skill from Employee t1
where t1.empcode = e.empcode and t1.name = e.name
for xml path('') ), 1, 1, '')' from Employee e`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:01:25.070

使用 FOR XML 路径。在你的情况下，它会是这样的

```
SELECT  Empcode, Name, Skills
FROM   yourTable a
CROSS APPLY --or OUTER APPLY
(
    SELECT SUBSTRING(
        (SELECT ','+b.Skill FROM yourTable b
         WHERE   a.Empcode = b.Empcode FOR XML PATH(''))
    ,2 ,4000) Skills
) x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:05:13.123

递归 CTE 将帮助您做到这一点

```
-- First order all the secondary skills with a row number
with rows as (
    select 
        empcode, skill, row_number() over (partition by empcode order by skill) as row
    from dbo.table_1
    where [primary] is null and skill is not null
),
-- Second use recursive CTE to create concat the values
cte(empcode,skill,row) as (

    select empcode, cast(skill as varchar(MAX)), row
    from rows where row=1
    union all
    select r.empcode, cast(concat(c.skill, ',', r.skill) as varchar(MAX)), r.row
    from
    cte c inner join rows r on r.row = c.row + 1
),
-- Third sort the resulting CTE so that can filter to only the end of 
--the recursive chain
ordered(empcode,skill,row) as (
    select empcode,skill, row_number() over (Partition by empcode order by row desc)
    from cte
)

-- Now fetch the results
select
    t.empcode,t.name, t.skill as [primary skill], o.skill as [secondary skill]
from
table_1 t
left outer join ordered o on t.empcode=o.empcode and o.row=1
where t.[Primary] = 'Yes' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:43:31.793

```
SELECT 
    Empcode, Name, 
    GROUP_CONCAT(Skill) 
FROM <table_name> 
GROUP BY Empcode 
ORDER BY Primary DESC 
```

# django - Redis 和 django-socketio

> ID：14520079
> 
> 赞同：0
> 
> 时间：2013-01-25T10:38:57.670
> 
> 标签：django, redis, socket.io, gevent, gevent-socketio

我与 django-socketio 建立了一个聊天室，我正在尝试使用 redis。

我有一个非常简单的 event.py：

```
 @events.on_message(channel='^channel-')
      def messages(request, socket, context, message):
            socket.send_and_broadcast_channel(message) 
```

聊天完美无缺。

现在我正在尝试实现redis：

```
 @events.on_message(channel='^channel-')
        def messages(request, socket, context, message):
        r = redis.StrictRedis()
        r = r.pubsub()
        r.subscribe('chat')
        s = redis.Redis()
        s.publish('chat', message)
        for m in r.listen():
           data = m['data']
           print data 
```

消息在 redis 频道上发布，但是一旦我调用 .listen()，就没有任何效果了。看起来 .listen() 正在“阻止”一切。我什至无法使用 ctr+C 逃离服务器

关于如何解决这个问题的任何想法？谢谢！

编辑：

这是我现在拥有的：

```
 def listener(self):
         r = redis.StrictRedis()
         r = r.pubsub()

         r.subscribe('chat')

         for m in r.listen():
             message = m['data']
             socket.send_and_broadcast_channel(message)

      @events.on_message()
      def messages(request, socket, context, message):
          r = redis.Redis()
          r.publish('chat', message) 
```

还是不行。

为了 redis 使用 gevent（由 django-socketio 使用），我们必须在用户订阅时启动一个 Greenlet。所以我们需要添加类似的东西：

```
 def on_subscribe(self, *args, **kwargs):
           self.spawn(self.listener) 
```

但是我不知道如何使用 django-socketio 来做到这一点，因为我们必须使用一个事件

```
 @event.on_connect()
       def connect(request, socket, context) 
```

但我不能传递一个论点“自我”。所以我不能使用'self.spawn(self.listener)'，而且我不知道我该怎么做

# backbone.js - 用html替换骨干网不起作用

> ID：14520082
> 
> 赞同：0
> 
> 时间：2013-01-25T10:38:59.287
> 
> 标签：backbone.js, backbone-views

在我的主干函数中，我没有过滤器方法，所以我决定改用 'this.$el.append()', 'this.$el.html()' - 但替换 html() 不起作用. 我想我可以用新系列来代替孔视图。

它也试图制作 this.$el.empty()，但不起作用......所以我怎样才能从父级清除现有元素，并附加新一代元素..？

我的代码：

```
 renderBoard:function(item){
          var singleView = new taskListPhraseI.oneView({model:item}),
// after this, i need to make parent of the element should be empty...
          board = this.$el.append(singleView.render()),

          newBoard = board.find('.indBoard:last');
          this.positionBoards(newBoard);
        }, 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:37:38.577

因此，如果您的视图设置如下

```
views = window.views || {};

views.ExampleView = Backbone.View.extend({

    initiliaze: function(){
        // do some stuff
    },

    render: function(){

        $(this.el).html("<YOUR HTML GOES HERE></YOUR HTML GOES HERE>");

        // return yourself as simple to chain access to your "el"
        return this;
    }

}); 
```

然后当你渲染你的视图并想事先删除所有其他视图时，它会像

```
renderView: function(item)
{
    var test=new views.ExampleView({
       model:item
    });

    // this should replace the elements contents with the views html above
    $(this.el).html(test.render().el);
} 
```

如果您仍然遇到问题，也许“this”已经失去了上下文，并且不再指代您的类，我会在您渲染时调试它的值。

希望有帮助

# c - 如何在 C 程序（Visual Studio 2008）中使用静态 pthread 库？

> ID：14520090
> 
> 赞同：2
> 
> 时间：2013-01-25T10:39:35.753
> 
> 标签：c, visual-studio-2008, pthreads, static-libraries, static-linking

我得到了以下测试程序：

```
#include <stdio.h>
#include "pthread.h"

void* test_thread(void *ptr)
{
    printf("In teh thread");
    return NULL;
}

int main(void)
{
    int foo = 1;
    pthread_t t;

    if (0 != pthread_create(&t, NULL, test_thread, (void *)foo)) {
        printf("This was never going to work.");
    }

    while(1)
        ;

    return 0;
} 
```

构建时，我收到以下错误：

> 1>main.obj：错误 LNK2019：未解析的外部符号_imp *_pthread_create*在函数 _main 中引用 1>C:\Users\rtt.PROLAN\Downloads\pthread-win32-master\Debug\Majs.exe：致命错误 LNK1120：1 未解决外在

[我从这个源](https://github.com/GerHobbelt/pthread-win32)构建了静态库。然后我将“pthread_lib.lib”添加到链接器 - >项目属性中的输入。并确保该文件位于 lib 路径中。

知道是什么导致了链接器错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T13:00:50.313

当您静态链接时，您必须将以下行添加到您的应用程序中。

```
#define PTW32_STATIC_LIB 
```

# spring - 不应该建议自我调用，但确实如此

> ID：14520091
> 
> 赞同：2
> 
> 时间：2013-01-25T10:39:36.490
> 
> 标签：spring, aspectj, spring-aop, aop

我得到了 Spring AOP AspectJ 的一个奇怪行为：不应该建议自我调用，但在我的应用程序中它确实如此。来自[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies)：

> 但是，一旦调用最终到达目标对象，在这种情况下是 SimplePojo 引用，它可能对自身进行的任何方法调用，例如 this.bar() 或 this.foo()，都将针对这个参考，而不是代理。这具有重要意义。**这意味着自调用不会导致与方法调用相关的建议有机会执行。**

但在我的简单应用程序中，由：

一个测试方面

```
@Aspect
@Component
public class TestAspect {

    private static final Logger logger = LoggerFactory.getLogger(TestAspect.class);

    @Pointcut("execution(* org.mypackage.TestService.method(..))")
    public void participateAroundPointcut(){}

    @Around("participateAroundPointcut()")
    public void testAround(ProceedingJoinPoint joinPoint) throws Throwable{
        logger.debug("Pre-execution;");

        joinPoint.proceed();

        logger.debug("Post-execution");
    }

} 
```

测试服务：

```
@Service
public class TestService {

    private static final Logger logger = LoggerFactory.getLogger(TestService.class);

    public void method(){
        logger.debug("Executing method();");
    }

    public void service(){
        logger.debug("Executing service();");
        this.method();
    }
} 
```

和一个配置文件：

```
<context:component-scan base-package="org.mypackage" />
<aop:aspectj-autoproxy  proxy-target-class="true" />
<bean id="testAspect" class="org.mypackage.aop.aspects.TestAspect" factory-method="aspectOf"/> 
```

我得到了自我调用的建议：

```
DEBUG: org.mypackage.TestService - Executing service();
DEBUG: org.mypackage.aop.aspects.TestAspect - Pre-execution;
DEBUG: org.mypackage.TestService - Executing method();
DEBUG: org.mypackage.aop.aspects.TestAspect - Post-execution 
```

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:36:29.477

问题很可能是 IDE - 如果您使用 Eclipse 并为您的项目启用了 AspectJ，AspectJ 插件将编织您的目标类。尝试在 IDE 之外运行您的测试（如果它是 maven 项目，您可以运行`mvn clean test`），然后您应该会看到预期的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T19:00:53.957

您的配置使用`AspectJ`实现。

它配置有： `<aop:aspectj-autoproxy />`。[（官方文档）](http://docs.spring.io/spring/docs/3.2.5.BUILD-SNAPSHOT/spring-framework-reference/html/aop.html#aop-aspectj-support)

`proxy-target-class="true"`只是说将使用 CGLIB 代理而不是 Java 动态代理。

我猜你想用 CGLIB 代理配置 Spring AOP。在这种情况下，配置字符串如下所示：

```
<aop:config proxy-target-class="true">
...
</aop:config> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:15:24.650

> 但是，一旦调用最终到达目标对象，在这种情况下是 SimplePojo 引用，它可能对自身进行的任何方法调用，例如 this.bar() 或 this.foo()，都将针对这个参考，而不是代理。这具有重要意义。这意味着自调用不会导致与方法调用相关的建议有机会执行。

仅当您的 AOP 配置为在代理模式下工作（这是默认模式）时才适用，但您配置了**aspectj**，它处理来自类外部的调用和自调用。

# sql - 在 VB 2008 中进行本地数据库预订时出现问题

> ID：14520097
> 
> 赞同：0
> 
> 时间：2013-01-25T10:39:41.903
> 
> 标签：sql, vb.net

嗨，我目前正在尝试在本地 .mdf 数据库中查找有关课程的详细信息，但似乎无法这样做，我已经有这个问题几个星期了，真的需要解决它，所以任何帮助都是非常感激。我将在下面的表格中包含我的代码。在此先感谢您的帮助！！

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Dim Session As String
    Session = txtSession.text

    Dim con As New SqlConnection
    Dim inscmd As New SqlCommand
    con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("RoomBookingSystem.My.MySettings.Database1ConnectionString1").ConnectionString
    Try
        Using cn As New SqlConnection(con.ConnectionString)
            con.Open()

            Dim ParamInitial As New SqlParameter
            ParamInitial.ParameterName = ("@StaffInitials")
            ParamInitial.Value = lblStaffInitials.Text.Trim()
            inscmd.Parameters.Add(ParamInitial)

            Dim ParamWeek As New SqlParameter
            ParamWeek.ParameterName = ("@Week")
            ParamWeek.Value = lblWeek.Text.Trim
            inscmd.Parameters.Add(ParamWeek)

            Dim ParamPeriod As New SqlParameter
            ParamPeriod.ParameterName = ("@Period")
            ParamPeriod.Value = lblPeriod.Text.Trim
            inscmd.Parameters.Add(ParamPeriod)

            Dim ParamDay As New SqlParameter
            ParamDay.ParameterName = ("@Day")
            ParamDay.Value = lblDay.Text.Trim
            inscmd.Parameters.Add(ParamDay)

            Dim ParamSubject As New SqlParameter
            ParamSubject.ParameterName = ("@Subject")
            ParamSubject.Value = lblSubject.Text.Trim
            inscmd.Parameters.Add(ParamSubject)

            Dim ParamYearGroup As New SqlParameter
            ParamYearGroup.ParameterName = ("@YearGroup")
            ParamYearGroup.Value = lblYear.Text.Trim
            inscmd.Parameters.Add(ParamYearGroup)

            Dim ParamNumberPupils As New SqlParameter
            ParamNumberPupils.ParameterName = ("@NumberOfPupils")
            ParamNumberPupils.Value = lblNoOfPupils.Text.Trim
            inscmd.Parameters.Add(ParamNumberPupils)

            Dim ParamControlledAssesment As New SqlParameter
            ParamControlledAssesment.ParameterName = ("@ControlledAssesment")
            ParamControlledAssesment.Value = lblControlledAssesment.Text.Trim
            inscmd.Parameters.Add(ParamControlledAssesment)

            Dim ParamRoom As New SqlParameter
            ParamRoom.ParameterName = ("@Room")
            ParamRoom.Value = lblRoom.Text.Trim
            inscmd.Parameters.Add(ParamRoom)

            Dim ParamSession As New SqlParameter
            ParamSession.ParameterName = ("@Session")
            ParamSession.Value = txtSession.Text.Trim
            inscmd.Parameters.Add(ParamSession)

            inscmd.CommandText = "INSERT INTO Booking (Week, Day, Period, Subject, YearGroup, StaffInitials, NumberOfPupils, Session, Room, ControlledAssesment)VALUES (@Week,@Day,@Period,@Subject,@YearGroup,@StaffInitials,@NumberOfPupils,@Session,@Room,@ControlledAssesment)"
            'inscmd.CommandText = "INSERT INTO Booking (Week, Day, Period, Subject, YearGroup, StaffInitials, NumberOfPupils, Session, Room, ControlledAssesment)VALUES ('B','Monday',5,'Politics','U6','JAGG',5,'5','LIT','False')"
            Print(inscmd.CommandText)
            inscmd.Connection = con
            inscmd.ExecuteNonQuery()
            con.Close()
            inscmd.Parameters.Clear()
        End Using
        ' Catch ex As Exception
        '   MsgBox("" & ex.Message)
        'if there is an error it will go here (can use Msgbox or label)
    Finally
        con.Close()
    End Try
    MsgBox("Your Booking Has Been Made Successfully")
    Clicky = False
    MainViewForm.btnBackToBooking.Visible = False
    FormView.Show()
    Me.Hide()
    con.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:58:54.583

我在上面的示例中看到了两个插入命令。注释掉的命令显示了两个被视为数字而不是字符串的值。
您使用使用参数的命令文本，但所有准备好的参数都设置为字符串数据类型（好吧，您没有设置任何数据类型，这会将 DbType 属性默认为 NVarChar） 可能这是您在执行时收到的确切错误消息插入命令

您可以尝试以下方法：

```
 Using cn As New SqlConnection(con.ConnectionString)
        con.Open()
        inscmd.Parameters.AddWitValue("@StaffInitials", lblStaffInitials.Text.Trim())
        inscmd.Parameters.AddWithValue("@Week", lblWeek.Text.Trim)
        inscmd.Parameters.AddWithValue("@Period", Convert.ToInt32(lblPeriod.Text.Trim))
        inscmd.Parameters.AddWithValue("@Day",lblDay.Text.Trim)
        inscmd.Parameters.AddWithValue("@Subject", lblSubject.Text.Trim)
        inscmd.Parameters.AddWithValue("@YearGroup", lblYear.Text.Trim)
        inscmd.Parameters.AddWithValue("@NumberOfPupils", Convert.ToInt32(lblNoOfPupils.Text.Trim))
        inscmd.Parameters.AddWithValue("@ControlledAssesment", lblControlledAssesment.Text.Trim)
        inscmd.Parameters.AddWithValue("@Room",lblRoom.Text.Trim)
        inscmd.Parameters.AddWithValue("@Session", txtSession.Text.Trim)

        inscmd.CommandText = "INSERT INTO Booking ([Week], [Day], [Period], [Subject], " +
                             "[YearGroup], [StaffInitials],[NumberOfPupils],[Session], " + 
                             "[Room],[ControlledAssesment]) "+
                             "VALUES " + 
                             "(@Week,@Day,@Period,@Subject,@YearGroup,@StaffInitials," +
                             "@NumberOfPupils,@Session,@Room,@ControlledAssesment)"
        inscmd.Connection = con
        inscmd.ExecuteNonQuery()
        inscmd.Parameters.Clear()
    End Using 
```

我使用[AddWithValue](http://msdn.microsoft.com/en-us/library/vstudio/system.data.sqlclient.sqlparametercollection.addwithvalue%28v=vs.90%29.aspx)方法隐式地创建了一个参数，该参数具有`DbType`从添加的值派生的属性。因此，如果我添加一个字符串作为值，则参数将具有`DbType.NVarchar`，但如果我设置一个整数，则 DbType 将是`DbType.Int`。当然，这假设您上面的所有字段都是 NVarChar 类型，除了`Period`and `NumberOfPupils`。如果不是这样，您应该向参数添加适当的转换

编辑：不确定，但我也怀疑 DAY 是保留关键字。最好用方括号封装列名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:26:26.180

据我所知，问题出在数据库位置。

当程序被调试时**，您的数据库副本**被放置在 bin/debug 文件夹中，如果您查看此处，您将看到该副本并且您的代码将直接访问该数据库而**不是原始数据库** *（如果您单击显示所有文件然后转到 bin/debug 文件，然后使用数据库资源管理器打开，您可以看到上次调试/运行时估算的数据）*

要解决此问题，您需要执行以下操作：

你的连接字符串

```
 con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("RoomBookingSystem.My.MySettings.Database1ConnectionString1").ConnectionString 
```

将连接到前面提到的 bin 文件夹中的数据库。

您需要进入您的**app.config**文件找到数据库的特定位置并将其用于连接字符串，这将允许您从数据库的非副本中插入/更新数据。

# android - OutOfMemory 异常：压缩图像会减小堆大小吗？

> ID：14520100
> 
> 赞同：5
> 
> 时间：2013-01-25T10:39:52.417
> 
> 标签：android, out-of-memory, image-compression

我一直想问这个已经有一段时间了。我正在创建这个游戏，我在其中绘制了一个非常大的背景。但问题是（当然），当我在游戏中添加更多元素时，我得到了 OutOfMemory 异常。

我一直想问的是，压缩图像会减少堆大小分配吗？例如，我的 PNG 背景（3000 x 2000 像素）约为 1.5 MB。经过一系列的 PNG 压缩（通过 TinyPNG 和 PNGGauntlet 等软件），背景大小大幅减少到 712 KB。这里的压缩图像仍然与原始大小相同（3000 x 2000）。

原始背景大小 (1.5 MB) 的堆大小分配是否与压缩后的 (712 KB) 相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:22:09.007

答案是肯定的，压缩和未压缩的图像占用相同数量的内存——它们最终只是作为 R,G,B(,A) 值的网格结束。
唯一可以节省一些内存的情况是使用 GPU 直接支持的压缩形式（例如，用于 OpenGL 纹理的 S3TC 压缩）。

压缩减少了两件事：磁盘上的文件大小，以及加载文件所需的 IO 时间量（尽管这种节省可能会被解压缩过程抵消）。

但是，您可以考虑将图像加载到 ARGB_8888 以外的位图类型（例如 RGB_565）——这将减少存储位图所需的内存量（但图像质量会降低）。

# jenkins - 什么会导致 jenkins 或 msbuild 不生成文件，我该如何修复它

> ID：14520109
> 
> 赞同：0
> 
> 时间：2013-01-25T10:40:52.067
> 
> 标签：jenkins

我用 ms build 和 svn 设置了 Jenkins。我将 Jenkins 设置为归档 artifacts `bin/Debug/*.*`。当我查看存档工件时，我找不到我生成的 dll。

我查看了工作空间文件夹，但找不到任何生成的内容。我查看了文件系统，但找不到任何东西。该文件将存储在哪里或将删除该文件以及如何停止它？

这是我的控制台日志

```
Building in workspace C:\Jenkins\jobs\XXXXX
Updating http://XXXXX at revision '2013-01-25T13:21:41.424 +0200'
U         Models\MultiViewContentInfo.cs
U         Models\ContentInfo.cs
At revision 1345
Archiving artifacts
Triggering a new build of XXXXXXX #24
Finished: SUCCESS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:12:09.047

解决方案很简单。我没有添加负责选择项目文件的构建步骤。ie Add Build step -> Build A visual studio project or solution using ms build 输入msbuild版本和msbuild文件。

# ajax - 如何在ajax发布后显示ckeditor消息

> ID：14520112
> 
> 赞同：0
> 
> 时间：2013-01-25T10:41:02.737
> 
> 标签：ajax, dialog, ckeditor

我有一个通过 ajax 保存数据的自定义 ckeditor 4.0 插件，我想在保存数据后显示一个带有服务器响应的 ckeditor 对话框。我的插件代码是：CKEDITOR.plugins.add('ajaxsave', { init: function(editor) {

```
 var pluginName = 'ajaxsave';

    editor.addCommand(pluginName, {
        exec: function(editor) {
            $.post("page_edit_ajax.asp", {
                data: editor.getSnapshot(),
                menusn: editor.name
            },
            function(data) {

                alert(data);
            })
        },
        canUndo: true
    });

    editor.ui.addButton('Ajaxsave', {
        label: 'Save Ajax',
        command: pluginName,
        icon: this.path + "images/ajaxsave.png",
        className: 'cke_button_save'
    });

} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T17:09:32.763

这就是我的保存所做的。我很想弄清楚如何做一个褪色的消息而不是一个警报。（以前从未发布过代码，所以我希望它有效）

```
 (function() {
var saveCmd = { modes:{wysiwyg:1,source:1 },

    exec: function( editor ) {
        var $form = editor.element.$.form;

          if ( $form ) {
            try {
                $.ajax({
                    type: "POST",
                    url: (window.location.href),
                    data: {editpage:'savechanges',
                            pagecontent:editor.getData()},
                    cache: false,
                    success: function(){
                        editor.resetDirty();
                        alert("Edits saved.");          
        }
        });

            } catch ( e ) {
                // If there's a button named "submit" then the form.submit
                // function is masked and can't be called in IE/FF, so we
                // call the click() method of that button.
            //  if ( $form.submit.click ) $form.submit.click();
            }
        }
    }
};

var pluginName = 'save';

// Register a plugin named "save".
CKEDITOR.plugins.add( pluginName, {
    lang: 'af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh', // %REMOVE_LINE_CORE%
    icons: 'save', // %REMOVE_LINE_CORE%
    init: function( editor ) {

        // Save plugin is for replace mode only.
        if ( editor.elementMode != CKEDITOR.ELEMENT_MODE_REPLACE )
            return;

        var command = editor.addCommand( pluginName, saveCmd );
        command.modes = { wysiwyg: !!( editor.element.$.form ), source: 1 };

        editor.ui.addButton && editor.ui.addButton( 'Save', {
            label: editor.lang.save.toolbar,
            command: pluginName,
            toolbar: 'main,10'
        });
    }
});
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T08:51:00.027

`success`关键是在 jQuery.ajax处理程序或`done`返回的延迟对象的方法中显示一个隐藏的元素（可能是 div） 。

假设我们有一个带有以下标记`position:absolute`的 div（注意它允许 div 位于所有其他元素之上）：

```
<div id="message-sent" class="panel" style="display:none;width: 300px; height: 100px;z-index:9999;position:absolute;top:300px;left:500px;"><section><h5>Page Updated!</h5></section></div> 
```

接着

```
$.ajax({
    type: "POST",
    url: myURL,
    data: myDataObj,
    success: function(data, textStatus,jqXHR){
        var msg =  $('#message-sent');
        msg.show();
        setTimeout(function () {
             msg.fadeOut(2000).remove();
        }, 1000);
    }); 
```

同样使用 deferred.done 方法

```
 $.ajax({
        type: "POST",
        url: myURL,
        data: myDataObj
    })
    .done(function (data, textStatus,jqXHR) {
            var msg =  $('#message-sent');
            msg.show();
            setTimeout(function () {
                 msg.fadeOut(2000).remove();
            }, 1000);
    }); 
```

实际上，每次发布更新时，我通常最终都会创建和重新创建“已发送消息”的 div。重新计算 div 的位置以将其放置在页面的中心并将响应文本插入其中。像这样的东西：

```
 var w = $('body').width();
    var h = $('body').height();
    var left = parseInt(Math.round((w - 300) / 2), 10);
    var top = parseInt(Math.round((h - 100) / 2), 10);
    var html = '<div id="message-sent" class="panel" style="display:none;width: 300px; height: 100px;z-index:9999;position:absolute;top:'+top+'px;left:'+left+'px;">' +
               '<section><h5>'+jqXHR.responseText+' updated</h5></section></div>';
    $('body').append(html);
    var msg =  $('#message-sent');
    msg.show();
    setTimeout(function () {
        msg.fadeOut(2000).remove();
    }, 1000); 
```

# c# - 如何用鼠标移动图片？C# 表单

> ID：14520115
> 
> 赞同：0
> 
> 时间：2013-01-25T10:41:24.557
> 
> 标签：c#, forms, events, mouse

我想用鼠标移动一个图片框，所以我到了这里：

```
 private void pictureB_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawImage(image, recLoc);
    }
    private void pictureB_MouseDown(object sender, MouseEventArgs e)
    {
        WorkAble = true;
        choosingPoint.X = e.X;
        choosingPoint.Y = e.Y; 
        lastPoint.X = e.X;
        lastPoint.Y = e.Y;
    }

    private void pictureB_MouseMove(object sender, MouseEventArgs e)
    {
        if (WorkAble)
        {
            recLoc.X = e.X - choosingPoint.X;// + lastPoint.X;
            recLoc.Y = e.Y - choosingPoint.Y;// + lastPoint.Y;
            pictureB.Refresh();
        }
    }

    private void pictureB_MouseUp(object sender, MouseEventArgs e)
    {
        WorkAble = false;
        lastPoint.X = e.X;
        lastPoint.Y = e.Y;
    }
    // recLoc = pictureBox Location. 
```

好吧，效果很好..但并不完美..我的意思是一旦执行了 KeyUp 事件，然后再次单击图像将返回到图片框的 0、0 点。为了克服这个问题，我添加了 lastPoint 点，并在鼠标移动中添加了它的值。因此，一方面它确实在最后一个放置点绘制图像，但是鼠标将位于图像的 0、0 点上，而不是在我单击的位置 - 在图像上。就像我单击图像的中心一样，鼠标将位于 0、0 点上。

任何建议如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:02:54.677

对“recLoc”进行增量更改以避免丢失原始位置：

```
private void pictureB_MouseMove(object sender, MouseEventArgs e)
{
    if (WorkAble)
    {
        recLoc.X = recLoc.X + e.X - choosingPoint.X;
        recLoc.Y = recLoc.Y + e.Y - choosingPoint.Y;
        choosingPoint = e.Location;
        pictureB.Invalidate();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-07T22:32:11.447

```
private void pictureB_MouseDown(object sender, MouseEventArgs e)
    {
        WorkAble = true;
        lastPoint.X = e.X;
        lastPoint.Y = e.Y;
    }

        private void pictureBox_MouseUp(object sender, MouseEventArgs e)
        {
            mouseMove = false;
            lastPointX = e.X;
            lastPointY = e.Y;
        }

private void pictureB_MouseMove(object sender, MouseEventArgs e)
{
    if (WorkAble)
    {
        recLoc.X -= (lastPoint.X - e.X);
        recLoc.Y -= (lastPoint.X - e.X);
        pictureB.Refresh();
        choosingPoint = e.Location;
    }
} 
```

# at-command - AT+CCED=0,1 错误 Minicom [GPRS ]

> ID：14520122
> 
> 赞同：0
> 
> 时间：2013-01-25T10:41:38.187
> 
> 标签：at-command, gprs, sim-card

来自： http: [//www.communica.se/multitech/gprs_at.pdf](http://www.communica.se/multitech/gprs_at.pdf)

> 值：
> [mode]
> 0：请求一次拍摄
> 1：请求自动拍摄
> 2：停止自动拍摄
> 
> [请求转储]
> 1：主小区：
> • 如果小区标识可用 MCC、MNC、LAC、CI、BSIC、BCCH Freq（绝对）、RxLev、RxLev Full、RxLev Sub、RxQual、RxQual Full、RxQual Sub、Idle TS
> • 如果小区标识不可用 MCC、MNC、LAC、BSIC、BCCH Freq（绝对）、RxLev、RxLev Full、RxLev Sub、RxQual、RxQual Full、RxQual Sub、Idle TS

这给了我错误：

```
AT+CCED=0,1 ERROR 
```

应该从文本和错误中解释什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:19:02.960

CCED 不是来自[3GPP](http://www.3gpp.org) TS 27.007 的标准 AT 命令（标准 GSM/UMTS/LTE AT 命令）。它也不在几个知名移动平台的专有 AT 命令手册中。

要得出的第一个也是最明显的结论是，您的设备不支持此 AT 命令。

您参考的手册来自 MultiTech - 我不确定 +CCED 是否是他们的专有 AT 命令，或者它是否来自其他地方。但无论如何，它似乎不是标准的。

查看文档后，文本比您在上面粘贴的要多得多，而且非常复杂，因为有很多不同的可能组合和响应。我认为你是正确的，第一个尝试的命令是 AT+CCED=0,1，你会期望一个单一的答案，包含你的设备当前注册的单元格的指定数据集。

您真的需要使用此命令，还是有替代方法？您需要进行哪些测量？使用 3GPP 标准 AT 命令，您可以获得以下信息：

AT+CREG? 给出 CellId 和 LAC

+CSQ 以 dBm 和 RXQUAL 为单位给出 RSSI

您可以使用 AT+COPS=? 获取有关相邻网络的信息 但它不提供信号质量测量。

这些 AT 命令记录在[3GPP TS 27.007](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)中。

# session - 在 Spring 中，命令对象是存储在会话中还是请求中

> ID：14520125
> 
> 赞同：0
> 
> 时间：2013-01-25T10:41:52.880
> 
> 标签：session, spring-mvc, command-objects

命令对象存储在会话中还是随页面请求一起提供？

如果存储在会话中，则在多个选项卡中的同一页面上工作时可能会导致问题，不是吗？

还是我们可以控制它？

谢谢森希尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:51:09.507

它存储在请求中 - 作为请求属性。

# git - 查找已用于合并提交的合并策略？

> ID：14520130
> 
> 赞同：5
> 
> 时间：2013-01-25T10:42:08.137
> 
> 标签：git, git-merge

举个简单的例子，我使用合并策略“ours”将一个主题分支合并到主分支。这个合并创建了 H 提交，在我做了一些其他的提交之后。

```
 A---B---C topic
     /         \
D---E---F---G---H---I---J---K master 
```

我想知道，之后是否可以确定在提交 H 上使用了哪种合并策略？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T13:28:48.903

不，这是不可能的——git 不存储这样的元数据。您可以将此类信息存储在提交消息中，但这完全取决于用户。

您可以通过查看冲突的解决方式来很好地猜测合并策略：

```
git log -p -c -1 YOURMERGE 
```

# smalltalk - 以编程方式获取方法内对象的执行顺序？

> ID：14520133
> 
> 赞同：4
> 
> 时间：2013-01-25T10:42:13.830
> 
> 标签：smalltalk, pharo, squeak

我有这段代码（取自 ProfStef，但可以是任何类的任何方法）。我如何以**编程**方式获取 Squeak/Pharo 执行对象的顺序。

我从 smalltalk 文档中*知道*执行顺序，但是如果我在正在构建的应用程序中需要这些信息怎么办。本质上是使用它来构建执行图，以显示代码外观和执行方式之间的差异。

PS。我需要大规模地完成这个......我不能手工完成。

```
tutorial: aTutorialClass lesson: aSelector 
    | tutorial | 
    tutorial := aTutorialClass new. 
    self player tutorial: tutorial. 
    self tutorial: aTutorialClass lessonAt: (tutorial indexOfLesson: aSelector). 
```

输出将是一棵类似于此的树

做这件事

anotherobject [某事做这件事]

finalobject [ anotherobject [something do this] ]。// 这就是原始代码的样子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:49:56.890

查看我们的[AST 解释器](http://smalltalkhub.com/#!/~dh83/ast-interpreter)，它可以让您对 Smalltalk 代码的执行进行细粒度控制。

使用底层 AST 作为执行格式，很容易将当前执行的代码映射回源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:55:02.857

Pharo 和其他几种方言中有一个字节码解释器。在 Pharo 中，查看 ContextPart 类>>trace:on:。这是一个运行示例：

```
ContextPart trace: [3 factorial] 
```

# wcf - 将 WCF (Azure) 云服务公开为 SOAP 和 REST

> ID：14520136
> 
> 赞同：0
> 
> 时间：2013-01-25T10:42:28.970
> 
> 标签：wcf, web-services, rest, soap, azure

我已经知道这个链接：[REST / SOAP endpoints for a WCF service](https://stackoverflow.com/questions/186631/rest-soap-endpoints-for-a-wcf-service)

我确实在某些方面理解，我需要将这些行为和绑定添加到新的端点，以使服务成为 RESTful。

虽然在哪里添加这些端点我有点困惑。

解释：我目前有一个基于 WCF SOAP 的服务，并已发布到 Azure 云服务

我有一个引用已发布服务的 URL 的网站和客户端。

现在，为了使其成为 RESTful，我是否需要编辑服务中的 web.config 文件，然后将服务重新发布到云端？（网站参考，客户端保持原样）或者我还需要编辑网站和客户端的app.config文件吗？（休息的端点，总共有两个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:13:13.333

是的。我相信你会的。

服务配置通常是通过代码或 web.config 进行的控制器，因此要添加端点，您需要更改服务和/或配置并重新发布。

根据您配置附加端点的方式，您的角色配置也可能需要更改，即是否需要打开另一个 TCP 端口。

# r - 我们可以将 cor 的一些参数与其他统计数据（如 RMSE）一起使用吗？

> ID：14520140
> 
> 赞同：1
> 
> 时间：2013-01-25T10:42:39.243
> 
> 标签：r, correlation

在`cor`函数中，有一个很棒的参数“使用”（例如：use="na.or.complete"）

我尝试使用相同的论点来计算 RMSE 或偏差。似乎它不起作用。我想知道我们可以用什么代替。

```
RMSE <- function(x, y){
sqrt(mean((x-y)^2))}
RMSE(x,y, use = "na.or.complete")
Error in RMSE(x,y, use = "na.or.complete") : 
unused argument(s) (use = "na.or.complete") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:54:10.307

简而言之，没有。您必须引用`use=`参数的原因`cor`是它指定了一个字符参数，用于在内部决定算法之间的决定。它不传递函数。如果您`cor`在命令提示符下键入，您将看到一行：

```
na.method <- pmatch(use, c("all.obs", "complete.obs", "pairwise.complete.obs", 
        "everything", "na.or.complete")) 
```

然后是一堆`if`声明`na.method`。

`,use=`不过，您可以通过在函数签名中添加参数来编写自己的等价物：

```
RMSE <- function(x, y, use="all") {
   if(use=="all") # Do stuff
   if(use=="na.or.complete") # Do other stuff
   sqrt(mean((x-y)^2))
} 
```

您甚至可以将代码基于`cor`代码——这是开源软件的乐趣之一！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:08:46.760

计算 THE RMSE 的均值函数有一个`na.rm`参数，您可以像这样使用它：

```
RMSE <- function (pred,obs,na.rm=FALSE){
   sqrt(mean((pred - obs)^2, na.rm = na.rm))
} 
```

na.rm 参数可用于模拟 na.or.complete 行为，因为在几乎情况下，使用 na.or.complete 选项等效于从原始对中删除 NA 值。例如 ：

```
swM <- swiss[,1:2]
swM[1,2] <-  NA 
swM[1,1] <-  NA 
identical(cor(swM, use = "na.or.complete"),
          cor(na.exclude(swM), use = "all"))
TRUE 
```

使用 RMSE

```
swM[1,2] <-  NA 
swM[1,1] <-  NA 
identical(RMSE(swM[,1],swM[,2],na.rm=T),
          RMSE(swM[,1],swM[,2],na.rm=F))
 FALSE 
```

**编辑**将非常小的值设置为 NA

我不知道您如何存储数据。但我假设你有一个带有变量 x 的 data.table。你可以这样做：

```
 dat$x[dat$x <= -3.4e+38] <- NA 
```

# google-apps-script - 谷歌应用脚 本服务调用次数过多

> ID：14520143
> 
> 赞同：0
> 
> 时间：2013-01-25T10:42:43.433
> 
> 标签：google-apps-script

我有 5 个活动脚本，每个脚本每分钟运行一次。

现在 Google 拒绝运行脚本并返回以下消息（德语）： Folgender Dienst an einem Tag zu häufig aufgerufen: gmail read (line 114)

下面是对应的代码：

*   第 114 行 `var label = GmailApp.getUserLabelByName('cas');`
*   第 115 行 `var threads = label.getThreads();`

我想我被允许获取邮件的频率是有限制的。有谁知道这个限制是什么，或者任何仍然允许我每分钟检查邮件的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T03:28:26.987

有关配额，请参阅[https://docs.google.com/macros/dashboard，gmail](https://docs.google.com/macros/dashboard)每天 10000 次调用

# actionscript-3 - 补间到 AS3 中的其他移动对象

> ID：14520148
> 
> 赞同：0
> 
> 时间：2013-01-25T10:42:57.250
> 
> 标签：actionscript-3, gsap

是否可以将一个物体移向另一个可能正在移动的物体？

据我所知，我只能将 x,y 坐标作为移动参数（？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:48:36.703

如果不使用 greensock，您可以作为基本示例执行以下操作：

```
addEventListener(Event.ENTER_FRAME, loop);

function loop(e:Event):void{
    if(object1.x<object2.x){
        object2.x-=5;
    }else{
        object2.x+=5;
    }

    if(object1.y<object2.y){
        object2.y-=5;
    }else{
        object2.y+=5;
    }
} 
```

Greensock 动画需要一个持续时间，这意味着补间将在某个时间点结束。有一个动态道具插件，但最终也会结束，所以这必须手动完成很长一段时间。

实现基本的摩擦力和/或重力将增加真实感（例如，将“5”数字乘以摩擦量）。

# c++ - Eclipse：缺少 C++ 运行配置？

> ID：14520152
> 
> 赞同：5
> 
> 时间：2013-01-25T10:43:12.350
> 
> 标签：c++, c, eclipse

再会，

我用 MinGW 设置了 Eclipse，我的项目编译得很好：

![在此处输入图像描述](../Images/686bc165fdd7fdd8c7662f7e32b78548.png)

但是，当我尝试通过创建*运行配置*来运行它时，我遇到的问题是没有像这里这样的*C/C++ 本地应用程序：*

![在此处输入图像描述](../Images/b48bd1e65d340d113eb40c49b9c71bd8.png)

我的看起来像这样：

![在此处输入图像描述](../Images/be29a7f644dd54b9bcc224eafe3c11f3.png)

错过了什么？我需要做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-01T14:42:34.580

1.  选择帮助 → 安装新软件
2.  输入这个网址：http: [//download.eclipse.org/tools/cdt/releases/indigo](http://download.eclipse.org/tools/cdt/releases/indigo)
3.  勾选 CDT Main Features 女巫包括 c++ sdk
4.  重启eclipse完成！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:00:41.737

最新版本中的本地 C/C++ 应用程序似乎已重命名为 C/C++ 应用程序：

只需单击运行方式-> 本地应用程序 ![](../Images/0703d26a366fef8eb584efc6b9691856.png)

现在应该在 C/C++ 应用程序下出现运行配置 ![](../Images/513c72ae328f53b3efbb2caa973e8708.png)

* * *

再次阅读您的问题后，我意识到我误解了它。无论如何，看起来好像您使用的是 Eclipse 而不是[Eclipse CDT](http://www.eclipse.org/cdt/downloads.php)。您可能想下载 Eclipse 的 CDT 版本并再试一次。

# python - 导入 Swampy（Python 学习模块）

> ID：14520154
> 
> 赞同：0
> 
> 时间：2013-01-25T10:43:19.243
> 
> 标签：python, python-3.x, swampy

我正在研究“ThinkPython”，在第 4 章中，我们被要求下载 swampy（一个学习模块）。好吧，我按照[此处的说明](http://www.thinkpython.com/swampy)进行了安装，但是当我尝试使用 IDLE(Python GUI) 导入时`import swampy.TurtleWorld`，我得到以下信息：

```
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import swampy.TurtleWorld
ImportError: No module named 'swampy' 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:00:00.900

这意味着该模块没有正确安装 - Python 在其模块路径中没有看到它。您的 $PYTHONPATH 是什么，您的操作系统是什么，您是否检查过该模块是否在您的 $PYTHONPATH 中？

# c#-4.0 - 在 Windows 8 中使用 StorageFile.GetFileFromPathAsync(pth) 的正确方法是什么

> ID：14520155
> 
> 赞同：1
> 
> 时间：2013-01-25T10:43:23.910
> 
> 标签：c#-4.0, windows-8, windows-runtime, storagefile

我有一个方法可以返回文件的正确路径

```
 StorageFile newFile = null;
        try
        {
            string pth = Path.Combine(ApplicationData.Current.LocalFolder.Path, dbPath);
            newFile = StorageFile.GetFileFromPathAsync(pth).GetResults(); ;
        }
        catch (FileNotFoundException) { newFile = null; }
        if (newFile == null)
        {
            string pth = Package.Current.InstalledLocation.Path + @"\Scriptures\" + dbPath;
            StorageFile oldFile = StorageFile.GetFileFromPathAsync(pth).GetResults();
            newFile = oldFile.CopyAsync(ApplicationData.Current.LocalFolder, dbPath, NameCollisionOption.FailIfExists).GetResults();
        }
        if (newFile == null) { throw new FileNotFoundException("Database File not Found"); }
        return newFile.Path; 
```

但是，有时我会遇到错误

```
 StorageFile.GetFileFromPathAsync(pth).GetResults() 
```

抛出的错误是：

```
 StorageFile newFile = null;
        try
        {
            string pth = Path.Combine(ApplicationData.Current.LocalFolder.Path, dbPath);
            newFile = StorageFile.GetFileFromPathAsync(pth).GetResults(); ;
        }
        catch (FileNotFoundException) { newFile = null; }
        if (newFile == null)
        {
            string pth = Package.Current.InstalledLocation.Path + @"\Scriptures\" + dbPath;
            StorageFile oldFile = StorageFile.GetFileFromPathAsync(pth).GetResults();
            newFile = oldFile.CopyAsync(ApplicationData.Current.LocalFolder, dbPath, NameCollisionOption.FailIfExists).GetResults();
        }
        if (newFile == null) { throw new FileNotFoundException("Database File not Found"); }
        return newFile.Path; 
```

我究竟做错了什么？我是 c# 和线程的新手，这个错误让我很生气，因为有时它有效，有时却无效。请帮忙！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2017-03-24T02:42:12.120

运行时应用程序中没有权限！您无法使用此方法访问文件。检查此[页面](https://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)

# javascript - 隔离最左边的 1 位

> ID：14520156
> 
> 赞同：7
> 
> 时间：2013-01-25T10:43:27.080
> 
> 标签：javascript, binary

我正在搜索有关隔离二进制文件中最右边的内容：

我得到了这个解决方案：

```
y = x & (-x) 
```

所以 ：

```
 10111100  (x)
&   01000100  (-x)
    --------
    00000100 
```

但是现在，我想通过找到最**左边**的数字来找到一个数字的大小（虽然不是符号......）

我如何详细说明我的解决方案以找到最左边的位？

例子 ：

10 `1`11100

0 `1`000100

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:26:05.540

没有类似的 O(1) 位技巧来找到数字的大小。许多微处理器指令集包括一个“计算前导零”的特殊指令。C 语言家族中没有这样的运算符为 JavaScript 提供按位功能。

唯一的 O(1) 替代方法是使用`Math.floor( Math.log( n ) / Math.LN2 )`A quick trial of

```
for ( var i = 0; i == Math.floor( Math.log( 1<<i ) / Math.LN2 ); ++ i ) ; 
```

`i == 31`由于`<<`运算符使用 32 位二进制补码有符号算术，因此给出了结果。

如果你想成为一个纯粹主义者，你可以重复右移一个，即 O(log `n`)，或者你可以重复右移一个`16 >> i`，`i`从 0 到 4，当结果为零时拒绝移位，否则累加`16 >> i`。即 O(log log N) 其中 N 是 的最大可能值`n`，这意味着恒定时间，但很可能比 慢`Math.log`。

O(log log N) 算法的代码：

```
var mag = function( n ) {
     var acc = 0;
     for ( var i = 16; i; i >>= 1 ) {
         if ( n >> i ) {
             n >>= i;
             acc += i;
         }
     }
     return acc;
}; 
```

当然，对于其中任何一个，您必须将结果左移一位以获得“最左边的 1 位”而不是索引。

**编辑：**注意，`log`基于的实现返回`-Infinity`为零，而`mag`函数返回`0`，这与它的结果相同`1`。如果您想考虑不存在最左边 1 位的可能性，最好将其设为特殊情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-01T08:05:05.890

我认为这`Math.floor( Math.log( n ) / Math.LN2 )`不是 O(1)，因为`Math.log`它不是基本操作。

因此，遵循定理说你不能得到最左边的 1 位：“一个将单词映射到单词的函数可以用单词并行的加、减、和、或和非指令实现当且仅当结果仅取决于每个输入操作数及其右侧的位。”

这个定理在“Hacker's 的喜悦”（Henry S. Warren, Jr.）一书的第 13 页上。

# java - 如何在 SWT 中设置 MenuItem 的字体大小？

> ID：14520157
> 
> 赞同：3
> 
> 时间：2013-01-25T10:43:28.040
> 
> 标签：java, fonts, swt

我想更改`MenuItem`SWT 中的字体大小，似乎没有明显的方法可以做到这一点。有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:57:29.540

`MenuItem`s 不支持字体，正如您在[此](https://bugs.eclipse.org/bugs/show_bug.cgi?id=29899)错误报告中看到的那样，显然他们不想在将来实现它：

> 抱歉，我们没有这样做的计划。

# java - Xstream：具有 XStreamImplicit 的 itemFieldName 但仍包装在元素中的列表

> ID：14520158
> 
> 赞同：1
> 
> 时间：2013-01-25T10:43:29.837
> 
> 标签：java, jaxb, xstream

我有这门课

```
@XStreamAlias("myConfig")
public class MyConfig {
    ... // other properties

    // What do I put here? 
    private List<String> includes;
} 
```

我想要这个输出：

```
<myConfig>
    ...
    <includes>
        <includes>foo</include>
        <includes>bar</include>
    </includes>
</myConfig> 
```

这不起作用，因为元素丢失了：

```
 @XStreamImplicit(itemFieldName = "include") // Loses <includes> element
    private List<String> includes; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:27:10.743

由于您的问题带有[jaxb](/questions/tagged/jaxb "显示标记为“jaxb”的问题")标记并基于您的评论。

> @BlaiseDoughan 是的，也是 jaxb：从长远来看，我可能会考虑从 xstream 切换到 jaxb，因为 JAXB 可以生成 XSD。

[**以下是使用JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现时的样子：

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class MyConfig {

    private List<String> includes;

    @XmlElementWrapper
    @XmlElement(name = "include")
    public List<String> getIncludes() {
        return includes;
    }

    public void setIncludes(List<String> includes) {
        this.includes = includes;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)
*   [http://blog.bdoughan.com/2010/10/how-does-jaxb-compare-to-xstream.html](http://blog.bdoughan.com/2010/10/how-does-jaxb-compare-to-xstream.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:59:40.883

要获得您正在寻找的确切 xml 结构，需要对您的代码进行微调。基本上，您需要一个包含值列表的包含包装器对象。

这是我生成xml的代码

```
public class XSTreamAnnotTest {

    static class Includes {

        @XStreamImplicit(itemFieldName = "include")
        private List<String> include;

        Includes(List<String> include) {
            this.include = include;
        }
    }

    @XStreamAlias("myConfig")
    static class MyConfig {

        private Includes includes;

        public MyConfig(Includes includes) {
            this.includes = includes;
        }

    }

    public static void main(String args[]) throws Exception {
        XStream stream = new XStream();
        stream.processAnnotations(MyConfig.class);
        ArrayList<String> list = new ArrayList<String>();
        list.add("foo");
        list.add("bar");
        Includes cu = new Includes(list);

        MyConfig msg = new MyConfig(cu);
        System.out.println(stream.toXML(msg));
    }
} 
```

# blackberry - 以编程方式将 IT 策略从 BES 重新发送到 BlackBerry

> ID：14520162
> 
> 赞同：0
> 
> 时间：2013-01-25T10:43:41.340
> 
> 标签：blackberry

是否可以以编程方式（以及如何）将 IT 策略从关联的 BES 重新发送到黑莓？

我尝试实现的功能与 BES 管理服务 Web 应用程序中的“向设备重新发送 IT 策略”实现的功能相同。我尝试使用 BES 用户管理客户端（从我的应用程序调用）来实现此功能，但 BES 5.x 不支持它，我想知道是否可以通过 BlackBerry Administration API 实现此功能？澄清一下，我想从我在 BES 上运行的应用程序开始重新发送策略，而不是从 blackbery 上的应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:22:12.617

我通过 BlackBerry Webservices for Enterprise Administration API 找到了一种方法（详细信息在我的论坛帖子中），可以通过此 API 调用将策略重新发送到[设备](http://supportforums.blackberry.com/t5/BlackBerry-Enterprise-Server/Resend-IT-policies-from-BES-programmatically-via-API-or-similar/m-p/2122513#M1314)

```
public void sample() {
   SetUsersResendITPolicyRequest request = new SetUsersResendITPolicyRequest();
   request.setMetadata(metadata);
   //"user" was returned from getUsers() API
   request.getUsers().add(user);

   SetUsersResendITPolicyResponse response = bws.setUsersResendITPolicy(request);

   if (response.getReturnStatus().getCode().compareTo("SUCCESS") != 0) {    
       System.out.println("Error occurred: " + response.getReturnStatus().getMessage());
   }
} 
```

[如此处](http://www.blackberry.com/developers/docs/bws/enterprise/admin/5.0.4.35/com/rim/ws/enterprise/admin/BWS.html#setUsersResendITPolicy%28com.rim.ws.enterprise.admin.SetUsersResendITPolicyRequest%29)详述。这适用于 Java 或 .net，因为两者都支持 API。

# c# - 如何使用证书 (.cer) 文件在 C# 中编码签名？

> ID：14520163
> 
> 赞同：2
> 
> 时间：2013-01-25T10:43:46.580
> 
> 标签：c#, certificate, code-signing

我有一个 .cer 文件（来自 Verisign）和一个 C# 应用程序（VS 2010）。我没有这个 .cer 文件的私钥。我想使用这个 .cer 文件对应用程序进行代码签名。谁能指出我正确的方向来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:00:55.953

正如@ZippyV 已经提到的，您将**需要**私钥来签署程序集。一旦你得到它：

使用[SignTool.exe](http://msdn.microsoft.com/de-de/library/8s9b9yaz%28v=vs.80%29.aspx)。它包含在 Windows SDK 中。可从 Microsoft 免费获得。

根据 SDK 版本，您可能会获得不支持 /signwizard 参数的新 SignTool.exe。

然后你需要调用它：

`signtool sign /a /t "http://timestamp.verisign.com/scripts/timstamp.dll" "%cd%\File.dll"`

（我建议使用 bat 来更轻松地签署多个文件。）

如果您的 SignTool 支持 signwizard 参数，请使用

`signtool /signwizard`

获得一个易于使用的向导。

# php - 动态内容

> ID：14520167
> 
> 赞同：-1
> 
> 时间：2013-01-25T10:43:55.867
> 
> 标签：php, cakephp

我的索引页面有两列布局。左边有几个图标（链接），右边有动态内容。每次单击左侧的一个图标时，我都希望在右侧显示相关信息。

我不知道我是否应该使用 Ajax 或与 CakePHP 相关的东西（我读过`requestAction`但我认为这不是正确的方法）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:09:06.540

你必须知道`jQuery`和`$.ajax in jQuery`。

所以你可以这样做。

```
<script type="text/javascript">

    (function($){

        $('LINKS_LEFT').click(function(e){

            e.preventDefault();

            var href = $(this).attr('href');

            $.ajax(
            {
                url         : href,
                dataType    : 'html',
                beforeSend  : function()
                {
                    // show loading or else
                },
                success     : function(response)
                {
                    if(response)
                    {
                        // display it in right side div.
                    }
                }
            });

        })

    });

</script>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:58:58.047

您可以使用它[`$this->Js->link()`](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#JsHelper%3a%3alink)来生成 ajax 调用。

但我建议您开始阅读整个[JsHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html)文档。

# c# - DataSet hasChanges() 总是返回 false

> ID：14520169
> 
> 赞同：1
> 
> 时间：2013-01-25T10:44:03.940
> 
> 标签：c#, dataset

```
DataSet exportData = new DataSet();
SqlDataAdapter da = new SqlDataAdapter(getOutput);
da.Fill(exportData);
exportData.HasChanges() 
```

`ExportData.hasChanges()` 总是返回假。为什么？它应该返回 true，因为它插入了很多新记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:45:43.220

因为最后`DataAdapter.Fill`要做的就是调用`AcceptChanges`。[`AcceptChangesDuringFill`](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.acceptchangesduringfill.aspx)您可以使用属性（默认）更改此行为`true`。

通常，`RowState`用于确定如何处理此记录。如果您将新记录添加到 DataTable，它将[`RowState`](http://msdn.microsoft.com/en-us/library/system.data.datarow.rowstate.aspx)更改为`Added`. 现在，DataAdapter 将知道何时应该更新此表。

但是因为实际上您还没有添加新记录，所以如果默认值不是`AcceptChangesDuringFill`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:48:50.980

试试这个`AcceptChangesDuringFill`

```
 DataSet exportData = new DataSet();
 SqlDataAdapter da = new SqlDataAdapter(getOutput);
 da.AcceptChangesDuringFill = false;
 da.Fill(exportData);
 exportData.HasChanges(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:49:40.213

你误解了 的意思`HasChanges`。当你要求时`HasChanges`，你

> 获取一个值，该值指示 DataSet 是否有 [您的] 更改，包括新的、删除的或修改的行。

当您从数据库中读取数据时，从数据库的角度来看，您的数据集没有改变：它完全具有数据库中的内容，即它是“干净的”。当您在数据集中添加、更改或删除数据时，数据集会变得“脏”，因此`HasChanges`开始返回`true`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:06:56.970

如果您对数据集进行了更改并且没有调用 ，则此值变为真`"DataSet.AcceptChanges"`。在此期间你可以调用`RejectChanges`回滚到最后一次`AcceptChanges`被调用。

# spring-security - Spring-Security 重定向错误

> ID：14520172
> 
> 赞同：0
> 
> 时间：2013-01-25T10:44:18.650
> 
> 标签：spring-security, vaadin, saml, saml-2.0, spring-saml

我正在研究 Vaadin spring-security SAML 身份验证系统。问题是 - 当用户转到 vaadin 应用程序地址（如果它没有经过身份验证）时，它必须被重定向到 IDP 登录页面。但是代替此重定向（地址栏中的地址更改）我收到一个错误：无法加载小部件集：

/my_vaadin_app/VAADIN/widgetsets/com.vaadin.terminal.gwt.DefaultWidgetSet/com.vaadin.terminal.gwt.DefaultWidgetSet.nocache.js?1359109584453

**我的 securityContext.xml 文件**

```
<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
              http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">
<!-- Enable auto-wiring -->
<context:annotation-config/>
<context:component-scan base-package="org.springframework.security.saml"/>

<!-- Unsecured pages -->
<security:http security="none" pattern="/saml/web/**"/>
<security:http security="none" pattern="/logout.jsp"/>
<security:http security="none" pattern="/favicon.ico"/>

<!-- Secured pages -->
<security:http entry-point-ref="samlEntryPoint" auto-config="true" >
    <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_FULLY"/>
    <security:custom-filter before="FIRST" ref="metadataGeneratorFilter"/>
    <security:custom-filter after="BASIC_AUTH_FILTER" ref="samlFilter"/>
</security:http>

<bean id="samlFilter" class="org.springframework.security.web.FilterChainProxy">
    <security:filter-chain-map request-matcher="ant">
        <security:filter-chain pattern="/saml/login/**" filters="samlEntryPoint"/>
        <security:filter-chain pattern="/saml/logout/**" filters="samlLogoutFilter"/>
        <security:filter-chain pattern="/saml/metadata/**" filters="metadataDisplayFilter"/>
        <security:filter-chain pattern="/saml/SSO/**" filters="samlWebSSOProcessingFilter"/>
        <security:filter-chain pattern="/saml/SSOHoK/**" filters="samlWebSSOHoKProcessingFilter"/>
        <security:filter-chain pattern="/saml/SingleLogout/**" filters="samlLogoutProcessingFilter"/>
        <security:filter-chain pattern="/saml/discovery/**" filters="samlIDPDiscovery"/>
        <security:filter-chain pattern="/**" filters="securityContextPersistenceFilter"/>
    </security:filter-chain-map>
</bean>

<bean id="securityContextPersistenceFilter" class="org.springframework.security.web.context.SecurityContextPersistenceFilter"/>

<!-- Handler deciding where to redirect user after successful login -->
<bean id="successRedirectHandler"
      class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
    <property name="defaultTargetUrl" value="/"/>
</bean>
<!--
Use the following for interpreting RelayState coming from unsolicited response as redirect URL:
<bean id="successRedirectHandler" class="org.springframework.security.saml.SAMLRelayStateSuccessHandler">
   <property name="defaultTargetUrl" value="/" />
</bean>
-->

<!-- Handler for successful logout -->
<bean id="successLogoutHandler" class="org.springframework.security.web.authentication.logout.SimpleUrlLogoutSuccessHandler">
    <property name="defaultTargetUrl" value="/logout.jsp"/>
</bean>

<!-- Register authentication manager with SAML provider -->
<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="samlAuthenticationProvider"/>
</security:authentication-manager>

<!-- Logger for SAML messages and events -->
<bean id="samlLogger" class="org.springframework.security.saml.log.SAMLDefaultLogger"/>

<!-- Central storage of cryptographic keys -->
<bean id="keyManager" class="org.springframework.security.saml.key.JKSKeyManager">
    <constructor-arg value="classpath:security/samlKeystore.jks"/>
    <constructor-arg type="java.lang.String" value="pass"/>
    <constructor-arg>
        <map>
            <entry key="keyname" value="pass"/>
        </map>
    </constructor-arg>
    <constructor-arg type="java.lang.String" value="apollo"/>
</bean>

<!-- Entry point to initialize authentication, default values taken from properties file -->
<bean id="samlEntryPoint" class="org.springframework.security.saml.SAMLEntryPoint">
    <property name="defaultProfileOptions">
        <bean class="org.springframework.security.saml.websso.WebSSOProfileOptions">
            <property name="includeScoping" value="false"/>
        </bean>
    </property>
</bean>

<!-- IDP Discovery Service -->
<bean id="samlIDPDiscovery" class="org.springframework.security.saml.SAMLDiscovery">
    <property name="idpSelectionPath" value="/WEB-INF/security/idpSelection.jsp"/>
</bean>

<!-- Filter automatically generates default SP metadata -->
<bean id="metadataGeneratorFilter" class="org.springframework.security.saml.metadata.MetadataGeneratorFilter">
    <constructor-arg>
        <bean class="org.springframework.security.saml.metadata.MetadataGenerator">
            <property name="entityId" value="springSAML"/>
            <property name="signMetadata" value="false"/>
        </bean>
    </constructor-arg>
</bean>

<!-- The filter is waiting for connections on URL suffixed with filterSuffix and presents SP metadata there -->
<bean id="metadataDisplayFilter" class="org.springframework.security.saml.metadata.MetadataDisplayFilter"/>

<!-- IDP Metadata configuration - paths to metadata of IDPs in circle of trust is here -->
<!-- Do no forget to call iniitalize method on providers -->
<bean id="metadata" class="org.springframework.security.saml.metadata.CachingMetadataManager">
    <constructor-arg>
        <list>
            <bean class="org.opensaml.saml2.metadata.provider.HTTPMetadataProvider">
                <!-- URL containing the metadata -->
                <constructor-arg>
                    <value type="java.lang.String">http://localhost/simplesaml/saml2/idp/metadata.php</value>
                </constructor-arg>
                <!-- Timeout for metadata loading in ms -->
                <constructor-arg>
                    <value type="int">5000</value>
                </constructor-arg>
                <property name="parserPool" ref="parserPool"/>
            </bean>
        </list>
    </constructor-arg>
</bean>

<!-- SAML Authentication Provider responsible for validating of received SAML messages -->
<bean id="samlAuthenticationProvider" class="org.springframework.security.saml.SAMLAuthenticationProvider">
    <!-- OPTIONAL property: can be used to store/load user data after login -->
    <!--
    <property name="userDetails" ref="bean" />
    -->
</bean>

<!-- Provider of default SAML Context -->
<bean id="contextProvider" class="org.springframework.security.saml.context.SAMLContextProviderImpl"/>

<!-- Processing filter for WebSSO profile messages -->
<bean id="samlWebSSOProcessingFilter" class="org.springframework.security.saml.SAMLProcessingFilter">
    <property name="authenticationManager" ref="authenticationManager"/>
    <property name="authenticationSuccessHandler" ref="successRedirectHandler"/>
</bean>

<!-- Processing filter for WebSSO Holder-of-Key profile -->
<bean id="samlWebSSOHoKProcessingFilter" class="org.springframework.security.saml.SAMLWebSSOHoKProcessingFilter">
    <property name="authenticationManager" ref="authenticationManager"/>
    <property name="authenticationSuccessHandler" ref="successRedirectHandler"/>
</bean>

<!-- Logout handler terminating local session -->
<bean id="logoutHandler"
      class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler">
    <property name="invalidateHttpSession" value="false"/>
</bean>

<!-- Override default logout processing filter with the one processing SAML messages -->
<bean id="samlLogoutFilter" class="org.springframework.security.saml.SAMLLogoutFilter">
    <constructor-arg ref="successLogoutHandler"/>
    <constructor-arg ref="logoutHandler"/>
    <constructor-arg ref="logoutHandler"/>
</bean>

<!-- Filter processing incoming logout messages -->
<!-- First argument determines URL user will be redirected to after successful global logout -->
<bean id="samlLogoutProcessingFilter" class="org.springframework.security.saml.SAMLLogoutProcessingFilter">
    <constructor-arg ref="successLogoutHandler"/>
    <constructor-arg ref="logoutHandler"/>
</bean>

<!-- Class loading incoming SAML messages from httpRequest stream -->
<bean id="processor" class="org.springframework.security.saml.processor.SAMLProcessorImpl">
    <constructor-arg>
        <list>
            <ref bean="redirectBinding"/>
            <ref bean="postBinding"/>
            <ref bean="artifactBinding"/>
            <ref bean="soapBinding"/>
            <ref bean="paosBinding"/>
        </list>
    </constructor-arg>
</bean>

<!-- SAML 2.0 WebSSO Assertion Consumer -->
<bean id="webSSOprofileConsumer" class="org.springframework.security.saml.websso.WebSSOProfileConsumerImpl"/>

<!-- SAML 2.0 Holder-of-Key WebSSO Assertion Consumer -->
<bean id="hokWebSSOprofileConsumer" class="org.springframework.security.saml.websso.WebSSOProfileConsumerHoKImpl"/>

<!-- SAML 2.0 Web SSO profile -->
<bean id="webSSOprofile" class="org.springframework.security.saml.websso.WebSSOProfileImpl"/>

<!-- SAML 2.0 Holder-of-Key Web SSO profile -->
<bean id="hokWebSSOProfile" class="org.springframework.security.saml.websso.WebSSOProfileConsumerHoKImpl"/>

<!-- SAML 2.0 ECP profile -->
<bean id="ecpprofile" class="org.springframework.security.saml.websso.WebSSOProfileECPImpl"/>

<!-- SAML 2.0 Logout Profile -->
<bean id="logoutprofile" class="org.springframework.security.saml.websso.SingleLogoutProfileImpl"/>

<!-- Bindings, encoders and decoders used for creating and parsing messages -->
<bean id="postBinding" class="org.springframework.security.saml.processor.HTTPPostBinding">
    <constructor-arg ref="parserPool"/>
    <constructor-arg ref="velocityEngine"/>
</bean>

<bean id="redirectBinding" class="org.springframework.security.saml.processor.HTTPRedirectDeflateBinding">
    <constructor-arg ref="parserPool"/>
</bean>

<bean id="artifactBinding" class="org.springframework.security.saml.processor.HTTPArtifactBinding">
    <constructor-arg ref="parserPool"/>
    <constructor-arg ref="velocityEngine"/>
    <constructor-arg>
        <bean class="org.springframework.security.saml.websso.ArtifactResolutionProfileImpl">
            <constructor-arg>
                <bean class="org.apache.commons.httpclient.HttpClient"/>
            </constructor-arg>
            <property name="processor">
                <bean id="soapProcessor" class="org.springframework.security.saml.processor.SAMLProcessorImpl">
                    <constructor-arg ref="soapBinding"/>
                </bean>
            </property>
        </bean>
    </constructor-arg>
</bean>

<bean id="soapBinding" class="org.springframework.security.saml.processor.HTTPSOAP11Binding">
    <constructor-arg ref="parserPool"/>
</bean>

<bean id="paosBinding" class="org.springframework.security.saml.processor.HTTPPAOS11Binding">
    <constructor-arg ref="parserPool"/>
</bean>

<!-- Initialization of OpenSAML library-->
<bean class="org.springframework.security.saml.SAMLBootstrap"/>

<!-- Initialization of the velocity engine -->
<bean id="velocityEngine" class="org.springframework.security.saml.util.VelocityFactory"
      factory-method="getEngine"/>

<!-- XML parser pool needed for OpenSAML parsing -->
<bean id="parserPool" class="org.opensaml.xml.parse.BasicParserPool" scope="singleton"/> 
```

**还有我的 web.xml 文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>ELI dainavos poliklinika</display-name>
    <context-param>
        <param-name>productionMode</param-name>
        <param-value>false</param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:security/securityContext*.xml</param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
            <filter-class>
                org.springframework.web.filter.DelegatingFilterProxy
            </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>Eli</servlet-name>
        <servlet-class>com.vaadin.terminal.gwt.server.ApplicationServlet</servlet-class>
        <init-param>
            <param-name>application</param-name>
            <param-value>com.acme.mainview.Main</param-value>
        </init-param>
    </servlet>

    <persistence-context-ref>
        <description>Persistence context for JndiProviders. Unit name should be same as in your persistence.xml</description>
        <persistence-context-ref-name>persistence/em</persistence-context-ref-name>
        <persistence-unit-name>ELI</persistence-unit-name>
    </persistence-context-ref>

    <servlet-mapping>
        <servlet-name>Eli</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

</web-app> 
```

有没有人建议为什么会发生这种情况。我读到 vaadin 只做某种内部重定向并且不理解外部重定向。

# android - 主题不适用于以编程方式添加的视图？

> ID：14520177
> 
> 赞同：5
> 
> 时间：2013-01-25T10:44:30.147
> 
> 标签：android, android-layout, android-theme

我在我的应用程序主题中设置了一些属性，它看起来像：

```
<style name="my_theme" parent="AppBaseTheme">
    <item name="android:textColor">#FF0000</item>
    <item name="android:textStyle">bold</item>
</style> 
```

主题正确地应用于 .`layout`文件中定义的所有视图`activity`。但是如果我`view`在方法中以编程方式添加一个`onCreate()`，这些`styles`将被忽略。

那么，我不能使用主题来设置这些样式`views`？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T20:41:13.980

我认为如果您以编程方式创建视图，则此视图不会附加到任何创建活动，这就是未应用主题的原因。

但是您可以尝试从活动中获取并使用 LayoutInflater 而不是通过构造函数创建您的视图。我认为通过这种方式，活动主题将应用于新视图。

请，如果你会尝试，让我知道任何结果。

# ruby-on-rails - 有一个关联 - 控制器创建方法

> ID：14520180
> 
> 赞同：0
> 
> 时间：2013-01-25T10:44:36.857
> 
> 标签：ruby-on-rails, controller, associations

我有许多具有一种状态的用户。由于某种原因，我无法使用状态控制器中的创建操作来保存状态。我认为问题在于有一个关联，因为我是新手，但我可能很容易出错。

这现在是工作代码。

用户模型：

```
 has_one :status, dependent: :destroy 
```

状态模型：

```
attr_accessible :content
belongs_to :user
validates :user_id, presence: true
validates :content, presence: true, length: { maximum: 250 } 
```

状态控制器：

```
def create
@new_status = current_user.build_status(param[:status])
  if @new_status.save
    flash[:success] = "Status posted!"
    redirect_to :back
  else
    flash[:error] = "Status couldn't save"
    redirect_to :back
  end
end 
```

用户控制器：

```
def show
  @user = User.find(params[:id])
  @status = @user.status
  @new_status = current_user.build_status
end 
```

用户/节目：

```
<%= render 'shared/status_form' if @user == current_user %> 
```

共享/状态表格：

```
<%= form_for[@new_status], :url => user_status_path(current_user) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, id:"status_box", placeholder: "Status?" %>
  </div>
  <%= f.submit "Update", id:"status_btn", class: "btn btn-small btn-primary" %>
<% end %> 
```

路线：

```
resources :users do
  resource :status, only: [:create, :destroy]
end 
```

我知道这有很多东西要看，但我真的很感谢你的帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:10:36.333

我可以看到您的代码存在一些问题。

1.  你正在交换`@user`和`current_user`。这有什么原因吗？您正在为通过 params[:id] 检索的用户生成状态表单，但在您的 create 方法中，您`StatusController`总是试图创建当前用户的状态。这两个用户不一样。
2.  在该`create`方法中，您尝试保存一个新建的状态实例，除了用户关联之外，它是空的。这应该会导致针对`content`.

尝试这样的事情（尚未测试，但应该给你一个良好的开端）：

路线.rb：

```
resources :users do
  resource :status, only: [:create, :destroy]
end 
```

状态/_form.html.erb：

```
<%= form_for [@user, @status] do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, id:"status_box", placeholder: "Status?" %>
  </div>
  <%= f.submit "Update", id:"status_btn", class: "btn btn-small btn-primary" %>
<% end %> 
```

状态控制器：

```
def create
  @status = Status.new(params[:status])
  if @status.save
    flash[:success] = "Status updated!"
    redirect_to :back
  else
    flash[:error] = "Status didn't save"
    redirect_to :back
  end
end 
```

如果您有任何问题，请告诉我，以便我们制定解决方案。另一件事是您可能会考虑与 User 实例一起创建状态关联（即，如果用户始终应该具有状态）。这样，您始终可以参考`@user.status`而不是在控制器方法中构建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:03:07.477

您不应该调用 status 而不是 build_status 吗？

@status = current_user.status

因为这种关系命名了字段

has_one :状态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:55:36.850

缺少要设置的参数

@new_status = current_user.build_status(params[:status])

# php - 如何正确让php从SQL数据库中拉取数据并循环遍历

> ID：14520182
> 
> 赞同：0
> 
> 时间：2013-01-25T10:44:48.717
> 
> 标签：php, sql, pdo

我在循环从我的数据库（MySQL）中提取的信息时遇到问题

我想从论坛表中提取所有 ID，如下所示：

```
SELECT ID FROM Forums 
```

然后遍历所有ID并运行

```
SELECT ID FROM Catagory WHERE Forum_ID = ? 
```

这在正确的 php 中是相同的：

```
$profile=$db->prepare('SELECT ID FROM Forums ');
$profile->execute();
$forums = $profile->fetch();

foreach ($forums as &$forum_ID) {

    // some code

    $profile=$db->prepare('SELECT ID FROM Catagories WHERE Forum_ID = ?');
    $profile->bindValue(1, $forum_ID);
    $profile->execute();
    $catagories = $profile->fetch();

    foreach ($categories as &$category_ID ) {

        //some more of my code
    }
} 
```

使用此代码，我得到一个错误：

```
Undefined variable: categories 
```

请不要介意他们在我的数据库中以这种方式拼写的拼写错误，我不知道

提前致谢

编辑：对于这个测试，我确保 SQL 服务器返回一些东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:48:23.537

我们不介意拼写错误。但是 PHP 头脑中，

变成. `$catagories`_`$categories`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:49:32.610

做出改变：

```
$catagories = $profile->fetch(); 
```

到

```
$categories = $profile->fetch(); 
```

有一个拼写错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:50:05.737

您的拼写错误在这里给您带来了一些问题。:)

你有：

```
$catagories = $profile->fetch();

foreach ($categories as &$category_ID ) {

    //some more of my code
} 
```

因此，您将值从`fetch()`to分配到`$catagories`但在您使用的下方一行`$categories`。

所以改成：

```
$categories = $profile->fetch();

foreach ($categories as &$category_ID ) {

    //some more of my code
} 
```

# scala - 让 IntelliJ IDEA 12 监控文件变化

> ID：14520184
> 
> 赞同：0
> 
> 时间：2013-01-25T10:45:03.243
> 
> 标签：scala, intellij-idea, sbt

我正在使用 Scala 测试 IntelliJ IDEA 12 社区版。我希望 IntelliJ 监听 sbt 外部编译的文件的更改（模板、路由 ...）。在 Eclipse 中有一个名为“使用本机挂钩或轮询刷新”的设置来执行此操作。IntelliJ IDEA 中是否存在类似的东西？

**附录**

IntelliJ 没有选择模板更改来检查其余代码中的模板使用情况，这似乎是一个普遍的限制。即使我强制 IntelliJ 同步文件，也不会检测到这些错误。IntelliJ Ultimate 也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:13:08.363

通常，您无事可做。与 Eclipse 不同 - 除非您确实检查了*使用本机挂钩或轮询刷新*的选项- IntelliJ 与您的文件系统永久同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:27:52.827

IDEA 有两个与此相关的选项：

1.  离开 IDEA 时自动保存（“帧停用”）
2.  切换回 IDEA 时自动重新加载（“框架激活”）

您可以单独配置这些选项：选项 -> 常规：“[√] 在框架激活时同步文件”和“[] 在框架停用时保存文件”。（这就是我配置它的方式。）

# ios - 如何删除 UITableView 中的空单元格？

> ID：14520185
> 
> 赞同：371
> 
> 时间：2013-01-25T10:45:10.827
> 
> 标签：ios, objective-c, uitableview

我试图`UITableView`用一些数据显示一个简单的。我希望设置它的静态高度，`UITableView`以便它不会在表格末尾显示空单元格。我怎么做？

代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { 
    NSLog(@"%d", [arr count]);
    return [arr count];
} 
```

* * *

## 回答 #1

> 赞同：923
> 
> 时间：2013-01-25T11:11:06.677

设置一个零高度的表格页脚视图（可能在您的`viewDidLoad`方法中），如下所示：

**迅速：**

```
tableView.tableFooterView = UIView() 
```

**目标-C：**

```
tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

因为表格认为有一个页脚要显示，所以它不会显示超出您明确要求的任何单元格。

**界面构建器专业提示：**

如果您使用的是**xib/Storyboard**，您只需将 UIView（高度为 0pt）拖到 UITableView 的底部。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2015-01-30T20:50:35.593

**斯威夫特 3 语法：**

```
tableView.tableFooterView = UIView(frame: .zero) 
```

**斯威夫特语法：< 2.0**

```
tableView.tableFooterView = UIView(frame: CGRect.zeroRect) 
```

**斯威夫特 2.0 语法：**

```
tableView.tableFooterView = UIView(frame: CGRect.zero) 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2014-04-18T10:17:39.893

在 Storyboard 中，选择`UITableView`，并将属性 Style 从 修改`Plain`为`Grouped`。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-10-21T20:00:26.617

在 Xcode 6.1 上用 swift 实现

```
self.tableView.tableFooterView = UIView(frame: CGRectZero)
self.tableView.tableFooterView?.hidden = true 
```

第二行代码对展示没有任何影响，可以用来检查是否隐藏。

来自此链接的答案 [Fail to hide empty cells in UITableView Swift](https://stackoverflow.com/questions/24470656/fail-to-hide-empty-cells-in-uitableview-swift)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-12-31T12:24:32.690

*我现在无法添加评论，所以添加这个作为答案。*

@Andy 的回答很好，使用以下代码行可以实现相同的结果：

```
tableView.tableFooterView = [UIView new]; 
```

'new' 方法属于`NSObject`类，`alloc`并`init`为`UIView`.

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-10-30T14:29:00.043

我试过代码：

```
tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

在**viewDidLoad**部分和 xcode6 显示警告。我放了一个“自我”。在它前面，现在它工作正常。所以我使用的工作代码是：

```
self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-29T10:05:56.877

或者您可以调用 tableView 方法将页脚高度设置为 1 点，它会添加最后一行，但您也可以通过设置页脚背景颜色来隐藏它。

代码：

```
func tableView(tableView: UITableView,heightForFooterInSection section: Int) -> CGFloat {
     return 1
} 
```

[看起来像最后一行](http://i.stack.imgur.com/1LRQ6.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-30T05:41:29.737

```
override func viewWillAppear(animated: Bool) {
    self.tableView.tableFooterView = UIView(frame: CGRect.zeroRect)

/// OR 

    self.tableView.tableFooterView = UIView()
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-08T12:59:58.873

**使用`UITableViewController`**

接受的解决方案将改变`TableViewCell`. 要解决此问题，请执行以下步骤：

1.  `ViewDidLoad`在方法中编写下面给出的代码片段。

    `tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero];`

2.  `TableViewClass.m`在文件中添加以下方法。

    ```
    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
    {
        return (cell height set on storyboard); 
    } 
    ```

而已。您可以构建和运行您的项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-08T06:59:34.677

在以下方法中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (([array count]*65) > [UIScreen mainScreen].bounds.size.height - 66)
    {
        Table.frame = CGRectMake(0, 66, self.view.frame.size.width, [array count]*65)); 
    }
    else
    {
        Table.frame = CGRectMake(0, 66, self.view.frame.size.width, [UIScreen mainScreen].bounds.size.height - 66);
    }
    return [array count];
} 
```

这里 65 是单元格的高度，66 是 UIViewController 中导航栏的高度。

# javascript - 在 Javascript 中的每个定义变量之前放置“var”关键字是一个好习惯吗？

> ID：14520188
> 
> 赞同：0
> 
> 时间：2013-01-25T10:45:27.830
> 
> 标签：javascript, variables, syntax

我总是将 var 关键字放在每个变量之前。我想知道它的正确性。代码正在运行，但这是一种好的做法吗？

```
$(document).ready(function() {
    var something = 34;
    var v = $(body).find('p.lol');
    $.ajax({
        success: function(a) {
           var k = a.sdf;
           something = k+0.7;
           ...etc... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:50:41.290

实际上，这与编码练习无关。如果您使用 var 关键字在函数中定义变量。它在本地定义，否则，变量将在全局定义，您可以在函数外部访问。

```
function test(){
 var message = “hi”; //local variable
 variable = "bye";
}
 test();
 alert(message); //undefined
 alert(variable);//bye 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:48:11.067

用于`var`定义局部变量。如果省略，该变量将是全局的，否则您可能会不小心覆盖另一个变量的值。

这是一个[类似的问题](https://stackoverflow.com/questions/5398766/when-to-use-var-in-javascript)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:49:23.943

总是声明你的变量是一个好习惯（以避免意外污染全局对象），但是 JavaScript 有一个叫做[提升](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-javascript-hoisting-explained/)的东西。

基本上，这意味着变量总是限定在函数的范围内（即不像其他语言那样在循环或其他语句块内），因此在每个函数的开头进行所有声明是一个好习惯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T13:41:23.287

是的。如果在严格模式下使用它，会抛出错误。尝试一下：

```
(function(){
    "use strict";
    try{
        myNum = 0;
    }
    catch(e) {
        alert("Error: " + e);
    }
})(); 
```

此代码将返回如下内容：

*错误：ReferenceError：分配给未声明的变量 myNum*

更多信息：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)

[http://msdn.microsoft.com/en-us/library/ie/br230269%28v=vs.94%29.aspx](http://msdn.microsoft.com/en-us/library/ie/br230269%28v=vs.94%29.aspx)

[http://www.nczonline.net/blog/2012/03/13/its-time-to-start-using-javascript-strict-mode/](http://www.nczonline.net/blog/2012/03/13/its-time-to-start-using-javascript-strict-mode/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T10:48:56.417

明确定义范围是一种很好的做法。当您不使用 var 关键字时，您实际上是在创建一个全局变量。想象一下在该实例中自动声明在文件顶部之间的变量。

这将创建局部变量：

```
var someVarA = 23;
var someVarB = 25; 
```

这会自动创建全局变量（如果未在其他地方声明）：

```
someVarA = 23;
someVarB = 25; 
```

但是，这与在每个变量前面放置一个 var 相同（注意逗号）：

```
var someVarA = 23,
    someVarB = 25; 
```

# android - 在 RelativeLayout 图像质量上旋转动画

> ID：14520189
> 
> 赞同：2
> 
> 时间：2013-01-25T10:45:31.280
> 
> 标签：android, android-animation, android-imageview

我对旧设备上的**RotateAnimation有疑问。**我的图像变得非常像素化，就像在[这个问题](https://stackoverflow.com/questions/8432169/android-rotate-animation-quality)中一样，但对于整个图像（及其背景），不仅仅是边距。

我不旋转`ImageView`本身，而是在一个`RelativeLayout`包含两个图像和一个`ProgressBar`. 此外`ImageView`还有一个 9-patch 作为背景。

当我动态加载图像时，我想我无法在`XML`. 所以我试着这样做：

```
((BitmapDrawable) myImageView.getDrawable()).setAntiAlias(true); 
```

这似乎没有任何效果。在像图像这样的较新设备上`Galaxy Nexus`根本不会像素化，所以我的猜测是它可能与硬件加速有关。

关于如何在没有这种像素化的情况下获得平滑旋转的任何想法？

# email - 我们可以相信“回复”会受到尊重吗

> ID：14520196
> 
> 赞同：4
> 
> 时间：2013-01-25T10:45:45.313
> 
> 标签：email, sendmail, email-headers

我们的 webapp 代表其用户发送邮件。头字段设置如下：

```
HEADERFIELD  MAILADDRESS           NAME
------------------------------------------------
from:        [our mail address]    [users name]
reply-to:    [users mail address]  [users name]
sender:      [our mail address]    [name of app] 
```

这运作良好，但在某些情况下，当收件人回复邮件时，回复会返回给我们（我们的邮件地址）。

这引出了我的问题：是否存在不尊重该`reply-to`领域的邮件客户，或者我们是否必须在其他地方寻找解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:10:26.773

令人沮丧但不足为奇的是，Microsoft Outlook 似乎完全忽略了`Reply-To:`

所以不，你不能信任客户（或者，你不能信任微软；我们生活的故事）。

一种常见的安排是使用单独的信封发件人（它将显示在客户端，`Return-Path:`但这不是一个可以从发件人端有意义地设置的标头，因为客户端的 MTA 将覆盖它）并简单地用于`From:`设置您的地址想要回复。您也可以使用`Sender:`“这是此邮件的真正来源”，尽管 Outlook 和我相信 Gmail 会将其显示为有点烦人的内容，例如“来自代表用户名的应用程序名称”。

# android - Phonegap-安卓登录认证应用

> ID：14520200
> 
> 赞同：0
> 
> 时间：2013-01-25T10:46:07.820
> 
> 标签：android, http, cordova, https

如果我的问题很傻，请不要误会我。因为我已经做了很多工作，但做不到。

我正在尝试开发可以在跨平台上运行的应用程序。我已经开始使用 phonegap 为 android 开发。我有以下困惑。我使用 ECLIPSE 作为 IDE

1.  cordova-2.2.0.js 和 phonegap-1.2.js 有什么区别。自从当我使用本教程[示例](http://docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)时。它指示，我们需要加载cordova.js，但在某些站点中，他们给出了phonegap.js 的示例

2.  而且我还需要与我的服务器进行 http 通信。我是否可以使用上述这些 java 脚本文件来实现。或者我需要使用其他一些插件。

3.  我真的想在我的代码cordova或phonegap中加载哪一个。

请指导我走得更远

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:52:06.017

1.  Apache 产品：`Cordova`(2.0) 只是`phonegap`(1.2) 的更新。您可以使用其中任何一个。最好使用最新的。
2.  您可以`HTTP connection`使用 Ajax 调用方法与服务器一起制作。

[在此处](http://docs.phonegap.com/en/2.0.0/index.html)查看 Cordova 的文档

# mysql - 如何检查 MyISAM 数据文件中间是否有空闲块？

> ID：14520206
> 
> 赞同：1
> 
> 时间：2013-01-25T10:46:22.110
> 
> 标签：mysql, insert, myisam

我正在尝试验证我需要`INSERT DELAYED`在 MySQL 中使用。文档指出：

> 对于 MyISAM 表，如果数据文件中间没有空闲块，则支持并发 SELECT 和 INSERT 语句。在这些情况下，您很少需要将 INSERT DELAYED 与 MyISAM 一起使用。

我或多或少确定我的应用程序就是这种情况，但我想知道是否有办法检查数据文件中间是否有空闲块？

我不确定基准测试是否会削减它，因为似乎可以选择不反映所有情况的基准测试查询。

# android - 如何从在我的应用程序中打开活动的 Web url 检索变量“？var = value”？

> ID：14520210
> 
> 赞同：4
> 
> 时间：2013-01-25T10:46:48.480
> 
> 标签：android, url, android-intent, android-manifest

我按照我在[此处](https://stackoverflow.com/questions/1609573/intercepting-links-from-the-browser-to-open-my-android-app)找到的示例获取了一个 Web 链接来打开我的应用程序的一个活动。我让它工作，但现在我需要让它检索 url 具有的变量值对。

当我点击这个网址[http://www.tapabook.com/tapa/?tapa=578](http://www.tapabook.com/tapa/?tapa=578)时，它会打开正确的活动，但 getPathSegments() 只检索 1 个段，即“tapa”（而不是“tapa=578” ）。有没有办法找回整对？

这是我的清单，以防它阻止我想要的东西

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.alberovalley.tappabook"
android:versionCode="1"
android:versionName="1.0" android:installLocation="auto">

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light.DarkActionBar" 
    android:name="com.alberovalley.tappabook.Tappabook">

    <activity
        android:name="com.alberovalley.tappabook.actividad.LoginA"
        android:configChanges="orientation"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name="com.alberovalley.tappabook.actividad.MenuFA" 
        android:label="@string/app_name">
    </activity>
    <activity
        android:name="com.alberovalley.tappabook.actividad.ListaTapasFA"            
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.alberovalley.tappabook.actividad.DetalleTapaFA"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
           <data
               android:host="tapabook.com"
               android:pathPrefix="/tapa/"
               android:scheme="http" />
           <data
               android:host="www.tapabook.com"
               android:pathPrefix="/tapa/"
               android:scheme="http" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

这是我活动中的代码，我在其中检查是否从 Intent.ACTION_VIEW 调用它，在这种情况下，检索数据。

```
 Intent i = getIntent();
    final String action = i.getAction();
    Log.d(CData.LOGTAG, "acción del intent " + action);
    if (Intent.ACTION_VIEW.equals(action)) {
        final List<String> segments = i.getData().getPathSegments();
        Log.d(CData.LOGTAG, "Contenido nº segmentos URL interceptada " + segments.size());
        if (segments.size() > 0) {
            Log.d(CData.LOGTAG, "Contenido de la URL interceptada [" + segments.get(0) + "]");
            idTapa = Long.parseLong( segments.get(0) );
        }
    }else{
        idTapa = i.getExtras().getLong(TapaDao.ID, -1);
        Log.d(CData.LOGTAG, "DetalleTapaFA.onCreate idTapa = " + idTapa);
    } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:10:36.037

[getEncodedQuery()](http://developer.android.com/reference/android/net/Uri.html#getEncodedQuery%28%29)将为您提供 Uri 的整个查询部分。从文档：

> 从此 URI 获取编码的查询组件。查询位于查询分隔符 ('?') 之后和片段分隔符 ('#') 之前。此方法将为“ [http://www.google.com/search?q=android](http://www.google.com/search?q=android) ”返回“q=android ”。

用那个代替`getPathSegments()`

# forms - 字段集中的 ZF2 渲染子表单

> ID：14520213
> 
> 赞同：0
> 
> 时间：2013-01-25T10:47:08.640
> 
> 标签：forms, zend-framework2, fieldset, zend-form-sub-form

在 Zend Framework 1 中，我执行以下操作以在字段集中呈现子表单：

```
$row = new Application_Form_Row();
$row->addDecorator('Fieldset');
$this->addSubForm($row, 'row['. $i . ']'); 
```

各个“行”子表单随后在字段集中呈现，并且由于子表单名称（行 [1]、行 [2] 等）的伪数组表示法，发布的表单数据被巧妙地作为数组获得。

在 ZF2 中，我只能在我的视图脚本中使用（自定义）视图助手和可能的部分视图脚本在最后进行渲染。

据我所知，渲染我的（未知数量的）子表单的唯一方法是在我的视图脚本中循环它们。

如何将视图脚本中的子表单作为数组（或对象）进行循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:47:01.320

这是一篇关于在 ZF2 表单中嵌套字段集和数组表示法的非常好的文章：http: [//www.michaelgallego.fr/blog/2012/07/04/new-zendform-features-explained/](http://www.michaelgallego.fr/blog/2012/07/04/new-zendform-features-explained/)

然而，在“动态添加新元素”部分有一些值得阅读的限制。

# php - 我可以将php插入参数吗？

> ID：14520216
> 
> 赞同：0
> 
> 时间：2013-01-25T10:47:25.287
> 
> 标签：php, wordpress

对不起，如果我的问题措辞错误。在下面的代码中，有没有办法在日期所在的地方插入 php？

所以这：

`<?php echo do_shortcode('[fergcorp_cdt_single date="08 December 2013"]') ?>`

会变成这样：

`<?php echo do_shortcode('[fergcorp_cdt_single date="<?=$date?>"]') ?>`

以上是正确的吗？如果没有，我该怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:48:45.850

```
<?php echo do_shortcode('[fergcorp_cdt_single date="' . $date . '"]'); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:49:26.373

你也可以使用双引号：

```
<?php echo do_shortcode("[fergcorp_cdt_single date=\"$date\"]") ?> 
```

# jquery - jqgrid excelExport如何使用exportOptions？

> ID：14520217
> 
> 赞同：0
> 
> 时间：2013-01-25T10:47:29.653
> 
> 标签：jquery, excel, jqgrid, export, options

文档说：

```
jQuery("#grid").jqGrid('excelExport', { url: 'ExportExcel.php' }); 
```

我在哪里可以找到`exportOptions`描述和用法，例如

```
jQuery("#grid").jqGrid('excelExport', { url: 'ExportExcel.php' ; 
    exportOptions: { array...} }); 
```

或查看此用法的示例`exportOptions`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:33:43.547

在源 jqgrid 中：

```
excelExport : function(o) {
        o = $.extend({
            exptype : "remote",
            url : null,
            oper: "oper",
            tag: "excel",
            exportOptions : {}
        }, o || {});
        return this.each(function(){
            if(!this.grid) { return;}
            var url;
            if(o.exptype == "remote") {
                var pdata = $.extend({},this.p.postData);
                pdata[o.oper] = o.tag;
                var params = jQuery.param(pdata);
                if(o.url.indexOf("?") != -1) { url = o.url+"&"+params; }
                else { url = o.url+"?"+params; }
                window.location = url;
            }
        }); 
```

但不在结果 url 中应用“exportOptions”。恕我直言，必须是：

```
excelExport : function(o) {
        o = $.extend({
            exptype : "remote",
            url : null,
            oper: "oper",
            tag: "excel",
            exportOptions : {}
        }, o || {});
        return this.each(function(){
            if(!this.grid) { return;}
            var url;
            if(o.exptype == "remote") {
                var pdata = $.extend({},this.p.postData);
                pdata[o.oper] = o.tag;

                pdata['exportOptions'] = o.exportOptions;

                var params = jQuery.param(pdata);
                if(o.url.indexOf("?") != -1) { url = o.url+"&"+params; }
                else { url = o.url+"?"+params; }
                window.location = url;
            }
        }); 
```

或“exportOption”的另一种用法？

# spring - JBoss AS 7 升级到 Java 7、JBoss VFS

> ID：14520218
> 
> 赞同：2
> 
> 时间：2013-01-25T10:47:31.873
> 
> 标签：spring, jboss, jboss7.x, java-7, vfs

我们有一个 spring 应用程序，它基于 lib 文件夹动态加载组件。

这个应用需要部署在不同的AS上，比如Jetty,Tomcat,JBoss..

现在，JBoss 有了这个 VFS 功能，它看起来并没有真正解压缩你的战争，而是`vfs://`用于战争/jar 中的文件。

目前我们正在升级（从Java6）到Java7，我们遇到了以下问题。

首先，snowdrop 1.0.0GA 在 Java7 下不再工作，因为 InputStream 发生了某种变化。升级到 snowdrop 2.0.4.Final 解决了这个问题。

接下来是堆栈跟踪的这个宝石：

```
 11:37:44,563 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/runtime]] (MSC service thread 1-1) Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from "/C:/Tools/jboss-as-7.1.1.Final/bin/content/Aquima-Server-9-SNAPSHOT.war/WEB-INF/classes/aquima-config.xml"; nested exception is java.lang.RuntimeException: java.lang.IllegalArgumentException: Null path
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]

.....................

Caused by: java.lang.RuntimeException: java.lang.IllegalArgumentException: Null path
    at org.jboss.spring.vfs.VFSServletContextResourcePatternResolver.convertClassLoaderURL(VFSServletContextResourcePatternResolver.java:62) [snowdrop-vfs-2.0.4.Final.jar:2.0.4.Final]
    at org.springframework.core.io.support.PathMatchingResourcePatternResolver.findAllClassPathResources(PathMatchingResourcePatternResolver.java:305) [spring-core-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.core.io.support.PathMatchingResourcePatternResolver.getResources(PathMatchingResourcePatternResolver.java:270) [spring-core-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.getResources(AbstractApplicationContext.java:1245) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]

.........................

Caused by: java.lang.IllegalArgumentException: Null path
    at org.jboss.vfs.VFS.getChild(VFS.java:187) [jboss-vfs-3.1.0.Final.jar:3.1.0.Final]
    at org.jboss.vfs.VFS.getChild(VFS.java:173) [jboss-vfs-3.1.0.Final.jar:3.1.0.Final]
    at org.jboss.vfs.VFS.getChild(VFS.java:154) [jboss-vfs-3.1.0.Final.jar:3.1.0.Final]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_11]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_11]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_11]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_11]
    at org.jboss.spring.vfs.VFSUtil.invokeMethodWithExpectedExceptionType(VFSUtil.java:157) [snowdrop-vfs-2.0.4.Final.jar:2.0.4.Final]
    at org.jboss.spring.vfs.VFSUtil.invokeVfsMethod(VFSUtil.java:170) [snowdrop-vfs-2.0.4.Final.jar:2.0.4.Final]
    at org.jboss.spring.vfs.VFSServletContextResourcePatternResolver.convertClassLoaderURL(VFSServletContextResourcePatternResolver.java:59) [snowdrop-vfs-2.0.4.Final.jar:2.0.4.Final]
    ... 34 more 
```

有谁知道如何解决这个问题？

# c# - 是否可以让对象公开类型参数的接口？

> ID：14520219
> 
> 赞同：8
> 
> 时间：2013-01-25T10:47:35.023
> 
> 标签：c#, oop, design-patterns, generics

在 C# 中，是否可以编写如下内容：

```
public class MyClass<T> : T 
    where T : class, new() 
{
} 
```

我知道上面的实现无法编译，但我实际上想要实现的是对未知类型实现某种通用包装器，以便客户端可以像调用类型一样调用包装器，由参数提供`T`，而不是使用类似的东西来调用它`wrapper.Instance.SomeMember()`。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T11:11:15.023

这是不可能的。

在我看来，我认为不应该使用继承来实现包装器。

例如，假设我们有一个`Engine`类，您需要实现一个`FerrariEngine`. 你有一`Car`堂课。

你是说`Car`应该继承`FerrariEngine`。这对我来说看起来很糟糕！

归根结底，*您希望使用继承执行依赖注入*之类的操作，而且这又不是正确的方法。

我的建议是*不要试图让你的生活更轻松*：根据理性点决定架构。

## 更新

OP在一些评论中说：

> 我想让这个类来管理类型为 T 的对象的实例，这样客户端就不需要关心何时需要创建实例。

你不需要做奇怪的事情来得到你想要的：

```
public interface IEngine 
{
     void Start();
}

public sealed class FerrariEngine : IEngine
{
     public FerrariEngine()
     {
          Start();
     }

     public void Start()
     {
     }
}

public abstract class Car<TEngine> where TEngine: IEngine, new()
{
    public Car()
    {
        _engine = new Lazy<TEngine>(() => new TEngine());
    }

    private readonly Lazy<TEngine> _engine;

    public TEngine Engine
    {
        get { return _engine.Value; }
    }
}

public class FerrariCar : Car<FerrariEngine>
{
} 
```

最后，如果我们创建一个实例`FerrariCar`：

```
Car<FerrariEngine> myFerrari = new FerrariCar(); 
```

引擎将被实例化并启动，无需开发人员干预！

检查`Lazy<T>`基本的通用约束是如何完成这项工作的；）

总之：

*   只有当某些人访问该属性`Lazy<T>`时，才会实例化使用引擎。`Engine`
*   一旦延迟加载引擎被实例化，由于`FerrariEngine`实现了一个调用`Start()`自身的无参数构造函数，它将启动引擎。

我相信这个示例向您展示了如何获得所需的内容并“按原样”使用 C#！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:55:18.300

您可以查看[DynamicObject](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)并执行以下操作：

```
class Foo<T> : DynamicObject
{
    private T _instance;
    public Foo(T instance)
    {
        _instance = instance;
    }
    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        var member = typeof(T).GetProperty(binder.Name);
        if (_instance != null &&
            member.CanWrite &&
            value.GetType() == member.PropertyType)
        {
            member.SetValue(_instance, value, null);
            return true;
        }
        return false;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        var member = typeof(T).GetProperty(binder.Name);
        if (_instance != null &&
            member.CanRead)
        {
            result = member.GetValue(_instance, null);
            return true;
        }
        result = null;
        return false;
    }
}

class Bar
{
    public int SomeProperty { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var bar = new Bar();
        dynamic thing = new Foo<Bar>(bar);
        thing.SomeProperty = 42;
        Console.WriteLine(thing.SomeProperty);
        Console.ReadLine();
    }
} 
```

# ruby - driver.navigate.refresh 与 selenium-webdriver 无法正常工作

> ID：14520228
> 
> 赞同：0
> 
> 时间：2013-01-25T10:48:03.867
> 
> 标签：ruby, selenium-webdriver

请按照以下代码：

```
driver.get "https://example.com/"
driver.find_element(:class, "button").submit
driver.navigate.refresh
wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds
element = wait.until { driver.find_element(:name => "username") } 
```

我写的代码牢记在心，直到包含的页面`element : username`出现，继续上一页刷新。但似乎我的代码不符合该要求。因此脚本抛出错误如下“

***错误***

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.27.2/lib/selenium/webdr
iver/common/wait.rb:57:in `until': timed out after 10 seconds (Unable to locate
element: {"method":"name","selector":"username"})} (Selenium::WebDriver::Error::
TimeOutError) 
```

有什么好主意可以满足我的要求吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:06:42.713

我还没有在 selenium-webdriver 中找到内置的方法来执行此操作，所以我会执行以下操作：

```
#Submit your first page
driver.get "https://example.com/"
driver.find_element(:class, "button").submit

#Refresh page until your element appears
end_time = Time.now + 10 #seconds
begin
    element = driver.find_element(:name => "username")
rescue Selenium::WebDriver::Error::NoSuchElementError
    if Time.now < end_time
        driver.navigate.refresh
        retry
    end
end 
```

基本上这是试图找到元素。如果未找到，则捕获异常，刷新页面并重试。重复此操作直到达到时间限制hsa。

# iphone - 单行显示为垂直居中对齐

> ID：14520229
> 
> 赞同：0
> 
> 时间：2013-01-25T10:48:04.337
> 
> 标签：iphone, uilabel, xcode4.5

我有一个很长的文本字符串，我将其输入到一个`UILabel`显示中。`UILabel`动态设置为文本提供足够的空间

```
 specialities1 =[[UILabel alloc]init];
        [specialities1 setFrame:CGRectMake(124,218,size8.width, size8.height)];
        specialities1.backgroundColor=[UIColor clearColor];**strong text**
        specialities1.lineBreakMode=UILineBreakModeClip;
        specialities1.font=[UIFont fontWithName:@"Helvetica-Bold" size:14];
        specialities1.text=[NSString stringWithFormat:@"%@ ",temp ];
        specialities1.textAlignment=UITextAlignmentRight;
        [specialities1 setNumberOfLines:0];
        [specialities1 sizeToFit];
        [testscroll addSubview:specialities1]; 
```

我的问题是，如果文本只包含单行，那么它会显示为垂直居中对齐。该对齐方式与我前面的相应标签不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:52:24.143

使用以下代码：

```
specialities1.lineBreakMode = UILineBreakModeWordWrap;
specialities1.textAlignment = UITextAlignmentLeft; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:52:18.570

```
specialities1.textAlignment = UITextAlignmentLeft; // UITextAlignmentCenter 
```

根据你遇到的情况选择你需要的。

# mysql - Mysql对列和速度的限制

> ID：14520230
> 
> 赞同：0
> 
> 时间：2013-01-25T10:48:05.727
> 
> 标签：mysql

我有一个 mysql 数据库服务器正在运行，并且想要创建具有“无限”列的表（mutch morge 然后 1000）。有没有可以提供这个的存储引擎？

如果这不会发生，我正在考虑将表拆分为 1000 列的块。但是有没有办法通过选择多列（并且它们不在同一个块中）生成快速查询？

喜欢风景？或有人这样认为？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:54:57.867

*   每个表有 4096 列的硬性限制。在这里继续阅读：http: [//dev.mysql.com/doc/refman/4.1/en/column-count-limit.html](http://dev.mysql.com/doc/refman/4.1/en/column-count-limit.html)

*   使用 MyISAM 引擎。它适合快速阅读。

*   就像你说的，你可以使用多个表连接来创建一个视图。但是在 Innodb 引擎中 JOIN 更快。

# twitter-bootstrap - bootstrap 3列布局，两个侧边栏前的主要内容

> ID：14520232
> 
> 赞同：2
> 
> 时间：2013-01-25T10:48:10.217
> 
> 标签：twitter-bootstrap, twitter-bootstrap-3

使用Bootstrap，左右侧边栏3栏布局，不知道怎么编辑css把主要内容放在两边侧边栏上面，请指教怎么做，谢谢。

我们尝试了以下代码，但无法正常工作：

```
<div class="row">
  <div class="span6">
    main content
  </div>
  <div class="span3 pull-left">
    left bar
  </div>
  <div class="span3 pull-right">
    right bar
  </div>
</div> 
```

请指教怎么做，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:31:05.677

**编辑**下面的解决方案是指使用 Bootstrap 2 的原始问题

部分解决方案是在主要内容上使用 pull-right，尽管这样做会使主要内容浮动到窗口的最右侧。

完整的解决方案是对主要内容和左栏也使用嵌套网格，以便包含右拉。

现场观看：http: [//jsfiddle.net/panchroma/mU2zu/](http://jsfiddle.net/panchroma/mU2zu/)

**HTML**

```
<div class="container">

<div class="row">

       <div class="span9">
           <div class="row">
         <div class="span6 pull-right">main content</div>

          <div class="span3">left bar</div>
           </div><!-- end nested row -->
    </div><!-- end span9 -->

        <div class="span3">right bar</div>

    </div><!-- end parent row-->

 </div><!-- end container --> 
```

祝你好运！

# php - 在 PHP 中声明一个不必要的变量会消耗内存吗？

> ID：14520237
> 
> 赞同：7
> 
> 时间：2013-01-25T10:48:26.403
> 
> 标签：php, performance, variables

我通常在 PHP 中这样做以获得更好的可读性，但我不知道它是否会消耗内存或有任何其他问题？假设我有这个代码：

```
$user = getUser(); // getUser() will return an array 
```

我可以：

```
$email = $user["email"];
sendEmail($email); 
```

在不声明变量 $email 的情况下，我可以这样做：

```
sendEmail($user["email"]); 
```

哪一个更好？考虑这只是一个非常简单的例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:55:38.123

不要为了节省几个字节而降低代码的可读性。这不会为您节省更多，即使`$email`是一个 100 MB 的字符串，因为 PHP 在内部使用**写入时复制**机制：除非您更改变量的*内容，否则不会复制它。*

例子：

```
$a = str_repeat('x', 100000000); // Memory used ~ 100 MB
$b = $a;                         // Memory used ~ 100 MB
$b = $b . 'x';                   // Memory used ~ 200 MB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:57:55.953

是啊，就是！变量创建存储区域，以便您可以使用和操作它们。如果在这种情况下未使用它，则会发生存储消耗。`sendEmail($user["email"]);`会是更好的方法。但它不是编写没有变量的代码的好方法。通过变量，您可以追踪实际错误（如果有），它还有助于提高可扩展性和可读性。

# spring - 无法提交 Hibernate 事务；嵌套异常是 org.hibernate.Transaction 异常：JDBC 提交失败

> ID：14520243
> 
> 赞同：7
> 
> 时间：2013-01-25T10:48:42.540
> 
> 标签：spring, hibernate, azure-storage

当我连接到应用程序时，我在我的应用程序中使用 Windows Azure SQL Server，它显示以下错误。

```
org.springframework.transaction.TransactionSystemException: Could not commit Hibernate transaction; nested exception is org.hibernate.Transaction
Exception: JDBC commit failed
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:660)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393
)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.interceptor.CustomizableTraceInterceptor.invokeUnderTrace(CustomizableTraceInterceptor.java:256)
        at org.springframework.aop.interceptor.AbstractTraceInterceptor.invoke(AbstractTraceInterceptor.java:110)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
        at com.asman.vote.mypaint.service.UserWorksService$$EnhancerByCGLIB$$803137ef.yesterdayWinner(<generated>)
        at com.asman.vote.mypaint.controller.MainController.yesterdayWinner(MainController.java:102)
        at com.asman.vote.mypaint.controller.MainController$$FastClassByCGLIB$$ff981c3a.invoke(<generated>)
        at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
        at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.aop.interceptor.CustomizableTraceInterceptor.invokeUnderTrace(CustomizableTraceInterceptor.java:256)
        at org.springframework.aop.interceptor.AbstractTraceInterceptor.invoke(AbstractTraceInterceptor.java:110)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
        at com.asman.vote.mypaint.controller.MainController$$EnhancerByCGLIB$$c20ad12a.yesterdayWinner(<generated>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:
426)
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.TransactionException: JDBC commit failed
        at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:161)
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
        ... 53 more
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed.
        at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.checkClosed(SQLServerConnection.java:388)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.commit(SQLServerConnection.java:1936)
        at org.hibernate.transaction.JDBCTransaction.commitAndResetAutoCommit(JDBCTransaction.java:170)
        at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:146)
        ... 54 more 
```

休眠.cfg.xml：

.....................

```
<!DOCTYPE hibernate-configuration PUBLIC"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
        <property name="hibernate.connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
        <property name="hibernate.connection.password">Asman.1234</property>`

        <property name="hibernate.connection.url">jdbc:sqlserver://mzfoe7t5fn.database.windows.net:1433;databaseName=VOTEMYPAINT;encrypt=false;packetSize=10240;loginTimeout=300</property>
        <property name="hibernate.connection.username">SQLAdmin@mzfoe7t5fn</property>
        <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
        <property name="hibernate.search.autoregister_listeners">false</property>
        <property name="hibernate.c3p0.min_size">5</property>

        <mapping class="com.asman.vote.mypaint.to.UserProfile" />
        <mapping class="com.asman.vote.mypaint.to.Purchasedetails" />
        <mapping class="com.asman.vote.mypaint.to.Topics" />
        <mapping class="com.asman.vote.mypaint.to.AgeGroups" />
        <mapping class="com.asman.vote.mypaint.to.Admin" />
        <mapping class="com.asman.vote.mypaint.to.TodaysTopic" />
        <mapping class="com.asman.vote.mypaint.to.UserWorks" />
        <mapping class="com.asman.vote.mypaint.to.Htmlpages" />
    </session-factory>
</hibernate-configuration> 
```

## 休眠上下文.html：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" 
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd">`
<context:property-placeholder location="/WEB-INF/spring.properties" />

    <!-- Enable annotation style of managing transactions -->
    <tx:annotation-driven transaction-manager="transactionManager" />   

    <!-- Declare the Hibernate SessionFactory for retrieving Hibernate sessions -->
    <!-- See http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.html -->                           
    <!-- See http://docs.jboss.org/hibernate/stable/core/api/index.html?org/hibernate/SessionFactory.html -->
    <!-- See http://docs.jboss.org/hibernate/stable/core/api/index.html?org/hibernate/Session.html -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"

                 p:configLocation="${hibernate.config}"
                 p:packagesToScan="com.asman.vote.mypaint"/>
    <!-- p:dataSource-ref="dataSource" -->
    <!-- Declare a datasource that has pooling capabilities--> <!-- <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
                destroy-method="close"
                p:driverClass="${app.jdbc.driverClassName}"
                p:jdbcUrl="${app.jdbc.url}"
                p:user="${app.jdbc.username}"
                p:password="${app.jdbc.password}"
                p:acquireIncrement="10"
                p:idleConnectionTestPeriod="60"
                p:maxPoolSize="100000"
                p:maxStatements="100"
                p:minPoolSize="100000" /> --><bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" 
                p:sessionFactory-ref="sessionFactory" /></beans> 
```

## 应用程序上下文.xml：

http://www.springframework.org/schema/beans/spring-beans-3.1.xsd [http://www.springframework.org/schema/context](http://www.springframework.org/schema/context) [http://www.springframework.org/schema/context/spring-上下文 3.1.xsd](http://www.springframework.org/schema/context/spring-context-3.1.xsd) [http://www.springframework.org/schema/mvc](http://www.springframework.org/schema/mvc) [http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd](http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd) ">`

```
<!-- <context:property-placeholder properties-ref="deployProperties" /> -->

<!-- Activates various annotations to be detected in bean classes -->
<context:annotation-config />

<!-- Scans the classpath for annotated components that will be auto-registered as Spring beans.
 For example @Controller and @Service. Make sure to set the correct base-package -->
<context:component-scan base-package="com.asman.vote.mypaint" />

<!-- Configures the annotation-driven Spring MVC Controller programming model.
Note that, with Spring 3.0, this tag works in Servlet MVC only!  -->
<mvc:annotation-driven /> 

<!-- Configure the multipart resolver -->
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"
    p:maxUploadSize="100000000"/>

<mvc:resources mapping="/resources/**" location="/resources/" /> 
<mvc:interceptors>
<bean class="org.springframework.orm.hibernate3.support.OpenSessionInViewInterceptor">
    <property name="sessionFactory">
        <ref local="sessionFactory" />
    </property>
</bean></mvc:interceptors><!-- Imports logging configuration -->
<import resource="trace-context.xml"/>
<import resource="hibernate-context.xml" /> 
<bean id="deployProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"
    p:location="/WEB-INF/spring.properties" /></beans> 
```

## 弹簧servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <!-- Declare a view resolver -->
    <bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
            p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" p:order="1"/>

</beans> 
```

## 跟踪上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" 
        xmlns:aop="http://www.springframework.org/schema/aop"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/aop 
            http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">`

    <!-- For parsing classes with @Aspect annotation -->
    <aop:aspectj-autoproxy/>

    <bean id="customizableTraceInterceptor" class="com.asman.vote.mypaint.aop.TraceInterceptor"
        p:enterMessage="Entering $[targetClassShortName].$[methodName]($[arguments])"
        p:exitMessage="Leaving $[targetClassShortName].$[methodName](): $[returnValue]"/>

    <aop:config>
      <aop:advisor advice-ref="customizableTraceInterceptor" pointcut="execution(public * com.asman.vote.mypaint.service..*(..))"/>
      <aop:advisor advice-ref="customizableTraceInterceptor" pointcut="execution(public * com.asman.vote.mypaint.controller..*(..))"/>
    </aop:config>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-29T20:51:56.967

我有一个类似的错误，最简单的解决方案是添加 @Transaction 和 @Transactional(propagation = Propagation.REQUIRES_NEW)

之后您将不会收到此错误，并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T18:16:26.370

这样做的原因是您已经打开了一个休眠会话并且您正在尝试执行两个查询，但请记住第一个事务的提交不会在其他事务开始之前出现。这可能会有所帮助。当一个事务提交或使用条件时尝试运行其他查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T05:57:56.107

在 serviceimpl 方法上方使用 @Transactional

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-07T14:01:35.727

您正在使用**@Transactional**让 Spring 为您启动、提交和回滚事务，并以声明方式处理您的事务。这样做的全部意义在于不必在代码中启动、提交和回滚事务。所以方法实现应该简单地是

```
return (List<Login>) sessionFactory.getCurrentSession().createQuery("from Login").list(); 
```

# perl - 使用 Perl 脚本中的信息调用自定义 vim 完成菜单

> ID：14520245
> 
> 赞同：1
> 
> 时间：2013-01-25T10:48:49.170
> 
> 标签：perl, vim

我写了一个分析 perl 文件的脚本（完全没有 PPI，因为它将在管理员不希望安装 PPI 的服务器上使用等等，但我们不要谈论这个）。

现在，假设我有这段代码：

```
my $object = MySQL->new();
my $ob2 = $object;
$ob2-> 
```

（MySQL 是我们的模块之一）。我的脚本正确地识别出 $ob2 是一个 MySQL-Object 并查看它的来源，然后返回该模块中找到的子列表。

我的想法是，因为我使用 vim 进行编辑，这对于“CTRL-n”-Completetion 来说可能是一种非常酷的方式。

那么，当...

```
$ob2->[CTRL-n] 
```

它显示了 CTRL-n-Box，它打开了我的 Perl-Script 并为其提供了一些参数（我需要：我实际所在的行、光标位置和 vim 中的整个文件）。

我已经找到了 vim-perl 之类的东西，它允许我编写类似的东西

```
if has('perl')
    function DefPerl()
perl << EOF
    use MyModule;
    return call_to_my_function(); # returns all the methods from the object for example
EOF
    endfunction
    call DefPerl()
endif 
```

但不知何故，这并没有得到执行（我只是为了测试而尝试使用系统调用将某些内容写入文件）......

所以，简而言之：

这里有人知道如何实现吗？通过使用完整的文件代码按 CTRL-n 从 vim 调用 perl 函数，并且 vim 行实际上在和位置，然后打开一个带有从 perl 脚本获得的结果的完成菜单？

我希望有人知道我在这里的意思。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:14:34.690

从 Vim 调用嵌入式 Perl 代码的详细信息和技巧可以在这篇[Vim Tips Wiki 文章](http://vim.wikia.com/wiki/Using_embedded_Perl_interpreter)中找到。您的尝试已经非常接近了，但是要从 Perl 返回内容，您需要使用 Vim 的 Perl API：

```
VIM::DoCommand "let retVal=". aMeaningfullThingToReturn 
```

对于完成菜单，您的 Perl 代码需要返回一个 Vim 对象列表，这些对象符合`:help complete-items`. 并`:help complete-functions`展示了如何触发完成。基本上，您定义一个插入模式映射，该映射设置`'completefunc'`然后通过`<C-x><C-u>`. 这是一个可以帮助您入门的框架：

```
function! ExampleComplete( findstart, base )
    if a:findstart
        " Locate the start of the keyword.
        let l:startCol = searchpos('\k*\%#', 'bn', line('.'))[1]
        if l:startCol == 0
            let l:startCol = col('.')
        endif
        return l:startCol - 1 " Return byte index, not column.
    else
        " Find matches starting with a:base.
        let l:matches = [{'word': 'example1'}, {'word': 'example2'}]
        " TODO: Invoke your Perl function here, input: a:base, output: l:matches
        return l:matches
    endif
endfunction

function! ExampleCompleteExpr()
    set completefunc=ExampleComplete
    return "\<C-x>\<C-u>"
endfunction
inoremap <script> <expr> <Plug>(ExampleComplete) ExampleCompleteExpr()
if ! hasmapto('<Plug>(ExampleComplete)', 'i')
    imap <C-x><C-z> <Plug>(ExampleComplete)
endif 
```

# xml - 使用 libxml2 读取属性值时如何保留空格

> ID：14520263
> 
> 赞同：0
> 
> 时间：2013-01-25T10:49:44.953
> 
> 标签：xml, schema, whitespace, dtd, libxml2

我使用**libxml2**来解析我的 XML 配置文件。最新的功能请求涉及“正确处理**有意义的空格**”，例如应该保留换行符。

[目前我使用xmlGetProp](http://xmlsoft.org/html/libxml-tree.html#xmlGetProp)获取属性值。

我知道通常空格由 XML 解析器*规范化*——正如标准所要求的那样（用空格字符替换所有空格，融合多个空格字符，剥离前导和尾随空格字符）。

我想知道是否有一种方法可以确保保留属性中嵌入的换行符。

*   我可以使用不同的*libxml2*功能来解析保留空格的 XML 属性吗？
*   是否有任何*DTD*或*模式*方法可以让*libxml2*做到这一点？目前我不使用这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:44:39.207

正如您所注意到的，这是 XML 规范所要求的，因此 DTD 或 Schema 中无法停止规范化。

不过，您可能可以使用 libxml 的 html 解析器，将其命令行 xmllint 实用程序与输入文件一起使用

```
<a>
<b x="1
2
3"/>
</a> 
```

我明白了

```
$ xmllint abc.xml
<?xml version="1.0"?>
<a>
<b x="1 2 3"/>
</a> 
```

所以换行符已经消失了，但是：

```
$ xmllint --html abc.xml
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><a>
<b x="1
2
3"></b>
</a></body></html> 
```

保留换行符（添加了虚假推断的 html 和正文，但您可能会在应用程序的解析后丢失它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:14:03.607

您是否尝试了该`xml:space`属性或[xmlNodeGetSpacePreserve()](http://xmlsoft.org/html/libxml-tree.html#xmlNodeGetSpacePreserve)：

> `<para xml:space="preserve">`

看 ：

1.  [xmlNodeGetSpacePreserve() @LibXML 文档](http://xmlsoft.org/html/libxml-tree.html#xmlNodeGetSpacePreserve)；
2.  [XML 保留空白](https://stackoverflow.com/q/6250790/802365)；
3.  [空白@ MSDN](http://msdn.microsoft.com/en-us/library/ms256097.aspx)。

# javascript - jQuery - 用 $ 包装 HTML 时是否执行 javascript？

> ID：14520264
> 
> 赞同：-3
> 
> 时间：2013-01-25T10:49:48.890
> 
> 标签：javascript, jquery, html, dom

我认为绑定到`orerror`, `onclick`, ... 的内联 JavaScript 运行。

但是`<script type="text/javascript">...</script>`用 $(...) 包装的元素也会运行 javascript 吗？

* * *

如果它确实运行，它是沙盒的吗？

* * *

**很抱歉对于这个误会：**

想要确保在 $ 方法中加载的 JavaScript 不会运行。我知道有关如何在页面中加载 JavaScript 脚本的其他方法，我通常使用 require。

只是想弄清楚在 $ 中包装 HTML（包含脚本标签）的安全风险有多大。

如果有人能给我一些关于如何在 jQuery 方法中解释 JavaScript 的见解/指导，那将给我答案，谢谢。

* * *

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:57:26.670

你总是需要写

```
<script type="text/javascript"></script> 
or 
if you use the html5 Doctype
<script></script> 
```

当你想执行 Javascript 时。在您的 html 文件中。

如果您想在不编写这些标签的情况下执行 javascript，那么您需要添加一个 extern .js 文件并链接到该文件，如下所示：

```
<script src="pathtofile/javascript.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:59:12.247

如果我对问题的理解有误，请朋友原谅。

如果您在其中包含一些代码，`$()`则会将其视为 javascript 或 jquery 代码。但是我们知道脚本是一个标签而不是一个javascript代码，所以最后它会抛出一个错误。

为了执行脚本标签中的任何代码，请将代码放在一个文件中，并使用`getScript()`jquery 的功能，用`$()`. 最后可能会满足您的要求:)。

```
$(function() {
    $.getScript(pathoffile);
}); 
```

# php - 如何序列化有关身份验证的用户？

> ID：14520265
> 
> 赞同：0
> 
> 时间：2013-01-25T10:49:56.250
> 
> 标签：php, symfony

我的应用程序上有一个经过身份验证的部分，但身份验证是通过 oauth 到 3rd 方服务完成的。我从服务中收到 200 回调，现在我创建/找到我的用户并将他设置为已登录。

所以我的提供者是：

```
providers:
    users:
        entity: { class: MainBundle:User, property: id } 
```

我的用户实现了安全的 UserInterface，尽管我的用户实体上没有用户名、密码等属性。我假设 id 是我可以使用的唯一标识符。

我的令牌设置如下：

```
$token = new UsernamePasswordToken($user, null, 'secured_area', $user->getRoles());
$this->securityContext->setToken($token); 
```

我现在希望在不使用 JMS 捆绑的情况下执行此操作；我的序列化如下所示：

```
/**
 * Serialize
 * @return string|void
 */
public function serialize()
{
    return serialize(array(
        'id' => $this->getId(),
        'display_name' => $this->getDisplayName(),
        'email' => $this->getEmail(),
    ));
}

/**
 * Unserialize
 * @return mixed|void
 */
public function unserialize($data)
{
    $data = unserialize($data);
    $this->setId($data['id']);
    $this->setDisplayName($data['display_name']);
    $this->setEmail($data['email']);
    return $this;
} 
```

使用上面我得到一个无限循环重定向。

起初我只序列化了 id，但随后用户的所有其他属性都不可用。

然后我尝试序列化整个对象（$this），但这给了我 1000 的 xdebug 嵌套级别错误。

我有点迷失如何使这种身份验证与序列化一起工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:03:02.743

安全.yml

```
providers:
    users:
        entity: { class: MainBundle:User, property: id } 
```

登录逻辑

```
$token = new UsernamePasswordToken($user, null, 'secured_area', $user->getRoles());
$this->securityContext->setToken($token); 
```

我从用户实体中取出序列化，也没有实现等价接口。也仍然没有接口属性，尽管这是必需的：

```
public function getUsername()
{
    return $this->getId();
} 
```

# c# - 用新字符串更新数据表

> ID：14520268
> 
> 赞同：0
> 
> 时间：2013-01-25T10:50:04.343
> 
> 标签：c#, asp.net, web-services, onchange

我有以下`TextChanged`事件 -

```
 protected void DataList1_SelectedTextChanged(object sender, EventArgs e)
    {
        TextBox chk = (TextBox)sender;
        DataListItem item = (DataListItem)chk.NamingContainer;

        TextBox txt = (TextBox)DataList1.Items[item.ItemIndex].FindControl("aTextBox");
        string text = txt.Text;

        WebService1 ws = new WebService1();
        ws.updateA(text, newText)

    } 
```

`ws.updateA`Web 方法需要哪些`text`是文本框中的原始文本，`newText`哪些是触发更改事件后的文本。

我的问题是如何区分原始文本和要在 web 方法中使用的 newText，因为该方法是使用新文本更新数据表使用原始文本进行更新？

SQL是 -

```
UPDATE table SET term='" + newText + "' WHERE termText= '" + text + "' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:05:04.220

您应该真正使用主键来识别要更新的行。通过 where 子句中的文本字符串进行更新不是一个好习惯。

到`SelectedTextChanged`触发事件时，控件的旧值在页面生命周期中被长期覆盖。

如果知道旧值很重要，您应该使用`ViewState`.

参考：[如何：在视图状态中保存值](http://msdn.microsoft.com/en-us/library/ms227551%28v=vs.85%29.aspx)

# wordpress - Wordpress，为帖子构建模板

> ID：14520274
> 
> 赞同：0
> 
> 时间：2013-01-25T10:50:21.243
> 
> 标签：wordpress, post, wordpress-theming

我想知道如何在创建帖子时定义帖子模板并自动添加 html 布局？

我必须使用自定义字段吗？

例如：

发布内容：

```
 Title
    Description 1
    Description 2
    With links and social media 
```

Html 布局结果：

```
 <h1 class="work-title">Title</h1>
       <div class="description">Description 1</div>
       <div class="description">Description 2</div>
       <div class="details">With links and social media</div>
    </div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:47:02.060

`the_content()`您可以通过使用 (in )来更改函数的输出，`functions.php`例如：

```
function alter_content($content) {
    // Alter the $content variable here
    return $content;
}

add_filter( 'the_content', 'alter_content', 6); 
```

这将在添加段落之前更改内容。如果您根本不想要段落，请使用：

```
remove_filter('the_content', 'wpautop'); 
```

查看[apply_filters() 上的 codex 页面以](http://codex.wordpress.org/Function_Reference/apply_filters)获取有关该函数的更多信息。

# mysql - 如何索引具有多个 ORDER BY 子句的表？

> ID：14520276
> 
> 赞同：0
> 
> 时间：2013-01-25T10:50:23.110
> 
> 标签：mysql, indexing, sql-order-by

我有一张 IntradayPrices1Minute 表，我在其中存储 1 分钟时间范围内的股票开盘价、最高价、最低价和收盘价：

```
CREATE TABLE `IntradayPrices1Minute` (
  `ticker` varchar(10) NOT NULL DEFAULT '',
  `datetime` datetime NOT NULL,
  `volume` mediumint(11) unsigned NOT NULL,
  `open` decimal(8,4) unsigned NOT NULL,
  `high` decimal(8,4) unsigned NOT NULL,
  `low` decimal(8,4) unsigned NOT NULL,
  `close` decimal(8,4) unsigned NOT NULL,
  PRIMARY KEY (`ticker`,`datetime`),
  UNIQUE KEY `indxTickerDatetime` (`ticker`,`datetime`)
) 
```

我建立了一个查询，可以计算这些股票的**每日**开盘价、最高价、最低价和收盘价。这是查询：

```
select 
    `IntradayPrices1Minute`.`ticker` AS `ticker`,
    cast(`IntradayPrices1Minute`.`datetime` as date) AS `Date`,
    substring_index(group_concat(cast(`IntradayPrices1Minute`.`open` as char charset utf8) order by `IntradayPrices1Minute`.`datetime` ASC separator ','),',',1) AS `Daily Open`,
    max(greatest(`IntradayPrices1Minute`.`open`,`IntradayPrices1Minute`.`high`,`IntradayPrices1Minute`.`low`,`IntradayPrices1Minute`.`close`)) AS `Daily High`,
    min(least(`IntradayPrices1Minute`.`open`,`IntradayPrices1Minute`.`high`,`IntradayPrices1Minute`.`low`,`IntradayPrices1Minute`.`close`)) AS `Daily Low`,
    substring_index(group_concat(cast(`IntradayPrices1Minute`.`close` as char charset utf8) 

order by 
   `IntradayPrices1Minute`.`datetime` DESC separator ','),',',1) AS `Daily Close` 
from    
   `IntradayPrices1Minute` 

group by 
   `IntradayPrices1Minute`.`ticker`,
   cast(`IntradayPrices1Minute`.`datetime` as date) 
```

这是我只有 4-5 天的数据时得到的结果的一部分（截至今天，我还有更多天的数据）：

```
ticker  Date        Open    High    Low     Close
----    ----------  ------  ------  ------  ------ 
AAAE    2012-11-26  0.0100  0.0100  0.0100  0.0100
AAAE    2012-11-27  0.0130  0.0140  0.0083  0.0140
AAAE    2012-11-28  0.0140  0.0175  0.0140  0.0165
AAAE    2012-11-29  0.0175  0.0175  0.0137  0.0137
AAMRQ   2012-11-26  0.4411  0.5300  0.4411  0.5290
AAMRQ   2012-11-27  0.5100  0.5110  0.4610  0.4950
AAMRQ   2012-11-28  0.4820  0.4900  0.4300  0.4640
AAMRQ   2012-11-29  0.4505  0.4590  0.4411  0.4590
AAMRQ   2012-11-30  0.4500  0.4570  0.4455  0.4568 
```

因此，截至今天，该`IntradayPrices1Minute`表已经有**9625952**条记录，并且增长了大约。每天 350000 条记录

使用 LIMIT 1000 执行之前的 SELECT 已经花费了 8 秒以上，所以我发现需要一些索引，但是我对索引以及如何决定它们的知识非常有限。

我认为一些信息可能对那些在这方面有更多专业知识的人有用：

```
show indexes from IntradayPrices1Minute 
```

返回：

```
IntradayPrices1Minute   0   PRIMARY 1   ticker  A   32368               BTREE       
IntradayPrices1Minute   0   PRIMARY 2   datetime    A   9872508             BTREE       
IntradayPrices1Minute   0   indxTickerDatetime  1   ticker  A   21793               BTREE       
IntradayPrices1Minute   0   indxTickerDatetime  2   datetime    A   9872508             BTREE 
```

并且 show profiling 命令显示：

```
Status                 Duration
------                 --------
starting               0.000055
checking permission    0.000003
Opening tables         0.000018
System lock            0.000005
init                   0.000022
optimizing             0.000004
statistics             0.000011
preparing              0.000006
executing              0.000027
Sorting result         8.533655
Sending data           0.233446
end                    0.000010
removing tmp table     0.000006
end                    0.000007
removing tmp table     0.000002
end                    0.000005
query end              0.000003
closing tables         0.000004
freeing items          0.000041
logging slow query     0.000002
cleaning up            0.000003 
```

不幸的是，由于我的知识有限，这些信息对我没有多大用处。我怀疑所有这些 ORDER BY 可能是如此密集的，因为显示分析指出使用了 8,53 秒“排序结果”，但我不知道如何处理这个以提高查询效率。

非常感谢您的任何建议，特别是如果它可以帮助我更好地理解未来查询的索引，我可能还需要排除故障。

干杯，博加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:59:50.210

尝试改变

```
GROUP BY ticker, date(datetime) 
```

进入

```
GROUP BY ticker, datetime 
```

第一个是不使用您的索引，因此需要（非常慢的）文件排序。第二个是使用索引并且速度更快。

您可以使用以下方法找到此类问题：

```
EXPLAIN SELECT * FROM table 
```

# google-drive-api - Google 云端硬盘：GoogleJsonResponseException：内部错误 500 OK

> ID：14520278
> 
> 赞同：0
> 
> 时间：2013-01-25T10:50:28.263
> 
> 标签：google-drive-api

嗨，我遇到了同样的错误。

我正在尝试从云端硬盘调用特定文件夹。

```
//retrieving files from Drive rootFolder<br>
Children.List request = service.children().list(root_ID);

//setquery to get file with title:Books <br>
request.setQ("title = 'Books'");

//executed the request to retrieve the file list<br>
ChildList children = request.execute();//occured error executing this line

ERROR:com.google.api.client.googleapis.json.GoogleJsonResponseException: 500 OK 
```

编码语言：JAVA
操作系统：Windows 7
服务器：Apache Tomcat 7.0

我要求您提供有关如何解决此问题的信息。

# android - Android 联系人导入

> ID：14520283
> 
> 赞同：1
> 
> 时间：2013-01-25T10:50:46.297
> 
> 标签：android

我正在使用模拟器 API 8 并尝试导入联系人（超过 300 个），毕竟我无法获得即时通讯信息。联系人 vcard 与以下类似：

```
BEGIN:VCARD
VERSION:2.1
N:Lastname;Firstname
FN:Firstname Lastname
X-ANDROID-CUSTOM:vnd.android.cursor.item/nickname;Nickname;2;;;;;;;;;;;;;
TEL;HOME:000-000-000
TEL;WORK:000-00-00
EMAIL;HOME:test@testmailservertest.test
NOTE: notes
X-AIM:any messenger
END:VCARD
BEGIN:VCARD
VERSION:2.1 
```

我正在使用系统的“联系人”应用程序进行导入。请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:19:44.280

您可以使用像[ez-vcard](http://code.google.com/p/ez-vcard/)这样的 vCard 解析库：

```
String vcardStr = ...
VCard vcard = Ezvcard.parse(vcardStr).first();
List<RawType> aimProperties = vcard.getExtendedType("X-AIM");
String aim = aimProperties.get(0).getValue(); 
```

# actionscript-3 - 修改已加载 SWF 的域内存以控制行为

> ID：14520288
> 
> 赞同：0
> 
> 时间：2013-01-25T10:51:08.227
> 
> 标签：actionscript-3, bytearray, swfloader, applicationdomain

我有几个不能从游戏中暂停的 Flash 游戏。我想写一个允许我暂停它们的包装器 swf。重新编译游戏是不可行的，因此无法向其中添加任何功能。

我可能需要做的是控制加载的 swf 何时获取 ENTER_FRAME 事件并将对 flash.utils.getTimer 的调用重定向到包装器中定义的函数。这可以通过修改加载的 ApplicationDomain 对象的 domainMemory ByteArray 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:09:42.920

`domainMemory`肯定对你没有帮助，[它只是](https://stackoverflow.com/questions/3664643/what-is-applicationdomain-domainmemory-for)访问快速内存的API。

您可以尝试做的是反编译游戏 swf 并找到主 EnterFrame 事件的调度程序（并且在加载游戏 swf 后，您必须通过显示列表找到此调度程序，例如，如果它不是舞台或root), 用作游戏滴答调度器，然后您将能够拦截此调度器的默认 EnterFrame 事件。对于拦截，只需添加您自己的具有更高优先级的侦听器：

```
//pause the game
dispatcher.addEventListener(Event.ENTER_FRAME, onGameEnterFrame, false, 1);
//resume the game
dispatcher.removeEventListener(Event.ENTER_FRAME, onGameEnterFrame);

protected function onGameEnterFrame(event:Event):void
{
    event.stopImmediatePropagation();
} 
```

# c# - 如何使用 Xpath c# 检索特定节点

> ID：14520289
> 
> 赞同：0
> 
> 时间：2013-01-25T10:51:13.257
> 
> 标签：c#, xml, xpath

我有一个xml文件

```
<BookLib>
  <Book Id="1">
    <Title>Title1</Title>
    <Author>Author1</Author>
    <Publisher>Publisher1</Publisher>
    <Subject />
  </Book>
  <Book Id="2">
    <Title>Title2</Title>
    <Author>Author2</Author>
    <Publisher>Publisher2</Publisher>
    <Subject />
  </Book>
  <Book Id="3">
    <Title>Title3</Title>
    <Author>Author3</Author>
    <Publisher>Author3</Publisher>
    <Subject />
  </Book>
</BookLib> 
```

我想选择书号。我试过用这个

```
@"/BookLib/Book/Title[contains(translate(text(),'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz'),'" + searchText + "')]/@Id"; 
```

在`XPathExpression`

如何在 c# 中使用 xpath 检索“id”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:56:11.750

因为`@Id`是 below `Book`, not `Id`，所以你必须向上移动才能得到它：

```
@"/BookLib/Book/Title[contains(translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'),'" 
      + searchText.ToLower() + "')]/../@Id"; 
```

或者进行比较而不首先移动到`Title`：

```
@"/BookLib/Book[contains(translate(Title,'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'),'" 
      + searchText.ToLower() + "')]/@Id"; 
```

我个人更喜欢后者，因为它看起来更干净一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:37:27.880

首先，您可以使用**[fn:lower-case()](http://www.xsltfunctions.com/xsl/fn_lower-case.html)，它**比[fn:translate](http://www.xsltfunctions.com/xsl/fn_translate.html)更好，因为它使用 Unicode 映射来更改大小写。所以它可以与 É->é、À->à 等重音一起使用。

然后，您可以**使用[XPath 轴](http://www.xmlplease.com/axis)**进行简化。

因此，要获取 @Id，您可以使用以下 XPath（适应`C#`）：

```
@"//Book/Title[contains(lower-case(./text()),'" + searchText.ToLower() + "' )]/@Id"; 
```

# c# - Moq - 验证对方法的最后调用

> ID：14520294
> 
> 赞同：2
> 
> 时间：2013-01-25T10:51:43.297
> 
> 标签：c#, unit-testing, moq

```
public interface IMouseTraits
{
    void ForceCursor(Cursor cursor);
    void SetCursor(Cursor cursor);
} 
```

1）我如何验证对 SetCursor 的最后一次调用是`Cursors.Arrow`（多次调用 SetCursor 和 ForceCursor 并允许使用不同的参数）。

2）我如何验证两者的最后一次调用`SetCursor`是`ForceCursor`（`SetCursor`多次调用 SetCursor 和 ForceCursor 并允许使用不同的参数）。

```
[Test]
public void AfterOperationCursorIsArrow()
{
    var mock = new Mock<IMouseTraits>();

    varw = new WindowOperation(mock.Object);
    w.Execute();

    mock.Verify(traits => traits.SetCursor(Cursors.Arrow));  // ?
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:58:50.283

您可以使用回调来捕获调用：

```
[Test]
public void AfterOperationCursorIsArrow()
{
    string lastMethod = null;
    Cursor lastCursor = null;

    var mock = new Mock<IMouseTraits>();

    mock.Setup(m => m.ForceCursor(It.IsAny<Cursor>()))
        .Callback((Cursor c) => lastMethod = "ForceCursor");

    mock.Setup(m => m.SetCursor(It.IsAny<Cursor>()))
        .Callback((Cursor c) => { 
            lastMethod = "SetCursor";
            lastCursor = c; 
        });

    var w = new WindowOperation(mock.Object);
    w.Execute();

     Assert.That(lastMethod, Is.EqualTo("SetCursor"));
     Assert.That(lastCursor, Is.EqualTo(Cursors.Arrow));
} 
```

# php - 会话用我的变量使两个文件一个空一个

> ID：14520304
> 
> 赞同：0
> 
> 时间：2013-01-25T10:52:26.137
> 
> 标签：php

您好，我从 $_POST 中获取变量并将它们存储在 Sessions 中，但我无法弄清楚为什么我的程序会为每个 $_POST och 空创建两个文件，一个包含我的变量。

```
session_start();
session_regenerate_id();

$_SESSION['S_LocalIP'] = $_POST['LocalIP'];
$_SESSION['S_Computername'] = $_POST['Computername'];
$_SESSION['S_GUID'] = $_POST['GUID'];
$_SESSION['S_BaseAddress'] = $_POST['BaseAddress'];

var_dump($_POST);
session_write_close(); 
```

除了我得到一个空的会话文件之外，一切都像我想要的那样工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T10:56:30.853

问题是您使用`session_regenerate_id()`,`session_regenerate_id(true)`代替删除旧 id。

此函数的第一个参数是`$delete_old_session`默认设置为`false`。

# google-analytics - 谷歌分析不适用于 Vaadin 7 RC2

> ID：14520306
> 
> 赞同：0
> 
> 时间：2013-01-25T10:52:49.693
> 
> 标签：google-analytics, vaadin

这个问题快把我逼疯了。我只是试图让谷歌分析跟踪 Vaadin 7 RC2 应用程序，似乎我已经死在水中了。

我检查它肯定运行以下脚本：

```
 public void init(VaadinRequest request) {
        WebApplication.getInstance().logout();
        flowControllerContextLoader.load(ApplicationContextLocator.getApplicationContext());

        eventProcessor.init(ApplicationContextLocator.getWebFlowConfiguration());
        eventProcessor.run(flowController);

        applicationLayout.setCaption(Translations.APPLICATION_NAME);
        setContent(applicationLayout.getView());
        getPage().setTitle(messageSource.getMessage(Translations.APPLICATION_NAME));

        JavaScript.getCurrent().execute(
        "var _gaq = _gaq || [];\n" +
                "  _gaq.push(['_setDomainName', 'platform.lexaden.com']);\n" +
                "  _gaq.push(['_setAccount', 'ACCOUNT_INFO']);\n" +
                "  _gaq.push(['_trackPageview']);\n" +

                "\n" +
                "  (function() {\n" +
                "    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n" +
                "    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n" +
                "    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n" +
                "  })();\n");

    } 
```

但是谷歌分析什么也没显示。有人可以帮我吗？

现在希望它开始工作了。我用 Vaadin 7 RC2 清理了缓存，再次重新编译了应用程序和所有小部件并重新启动了服务器。仍然不确定出了什么问题 - Vaadin 6 和 Vaadin 7 应用程序之间的缓存中可能存在一些冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:48:39.853

在我看来，谷歌分析有时无法识别域。据我了解，您正在跟踪**platform.website.com**和**somethingelse.website.com**，它适用于其中一个，不适用于第二个，反之亦然。

**在这种情况下，在 google 分析中为platform.website.com**创建一个单独的“跟踪” 。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:34:41.943

您是否尝试过为 Vaadin 使用 GoogleAnalyticsTracker 插件？[https://vaadin.com/directory#addon/googleanalytictracker](https://vaadin.com/directory#addon/googleanalyticstracker)

尽管附加组件的页面上说它仅适用于 6.x 版，但我想知道它是否真的可以与 Vaadin 7 一起使用。

# c++ - std::to_string(double) 的精度

> ID：14520309
> 
> 赞同：60
> 
> 时间：2013-01-25T10:53:11.940
> 
> 标签：c++, c++11

**使用`std::to_string()`**将双精度转换为字符串时，有什么方法可以设置结果的精度？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-25T10:58:10.543

不。

> 返回：每个函数都返回一个字符串对象，该对象保存其参数值的字符表示形式，该参数值将通过分别`sprintf(buf, fmt, val)`使用格式说明符 `"%d"`、`"%u"`、`"%ld"`、`"%lu"`、`"%lld"`、`"%llu"`、`"%f"`、`"%f"`或进行调用而生成`"%Lf"`，其中 buf 指定一个足够的内部字符缓冲区尺寸。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-20T03:24:23.640

我只是在寻找解决方案，因为我正在重载`std::cout <<`操作员，因此要解决这个问题会很棘手`std::stringstream`。我解决了我的问题，方法是使用该`std::substr()`函数来定位小数点并取一个选定的位数过去。

```
std::string trimmedString = std::to_string(doubleVal).substr(0, std::to_string(doubleVal).find(".") + precisionVal + 1); 
```

这将在您的号码后为您提供“precisionVal”0。

前任：

```
double doubleVal = 3;
int preisionVal = 2 
```

`3.000000`变成`3.00`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-04T20:32:19.807

我相信使用`std::stringstream`with`setprecision`将是最灵活/便携的选择，但如果您知道您的数据，作为一种解决方法，您可以尝试对结果进行子串化`to_string`。例如：

```
std::string seriesSum(int n)
{
    double sum = 0, div = 1;
    for(int i = 0; i < n; i++) {
      sum += 1.0 / div;
      div += 3;
    }

    return std::to_string(round(sum * 100)/100).substr(0,4);
} 
```

在上面的代码中，我通过获取字符串的前 4 位数字来打印两位小数`0.00`，但它只起作用，因为我知道整数部分永远不会超过一位数。您还可以使用`string.find()`搜索小数分隔符并使用它的位置来计算子字符串的大小，使其更具动态性。

# javascript - js控制台中的ReferenceError -SCRIPT5009：'channel_click'未定义

> ID：14520310
> 
> 赞同：0
> 
> 时间：2013-01-25T10:53:14.327
> 
> 标签：javascript, jquery, html

我在 js 控制台中的 IE9 中收到“SCRIPT5009：'channel_click'未定义”错误。该代码在 chrome 和 firefox 中工作，但在单击链接以在 IE9 中启动 js 序列时突然停止。

我一直试图解决这个问题，但没有成功，但我所做的是定时发生一系列事件：

```
1) onclick - toggle div to hide
2) wait 1500 
3) open print command
- User closes the window to return to page
4) wait 3500 toggle div to show again 
```

我这样做的原因是我不希望打印预览在用户决定打印页面时拾取这些系列的 div。

Java脚本：

```
<script>
//WAITS UNTIL EXCESS IS HIDDEN THEN FIRES PRINT COMMAND 
function channel_click(){

// anon wrapper function, 2 second delay
setTimeout( function () {
window.print();return false;
} , 1500 );

}
</script>

<script>
//HIDES EXCESS IN PREP FOR FIRING PRINT COMMAND PREVIOUS FUNCTION EXECUTES IN BETWEEN FOLLOWING FUNCTIONS
$(".hideshow").click(function () {
$("#header,#footer").toggle("slow");

setTimeout( function () {
$("#header,#footer").toggle("slow");
} , 3500 );
$('.modal-backdrop').hide();
});
</script> 
```

HTML：

```
<a href="#" role="button" class="hideshow" onclick="channel_click()">Print Preview</a>

<div id="header">
    <div class="pull-left">
    <h1>Edt Mode</h1>
    <h6 style="padding-bottom: 30px;">Some informational text here</h6>
</div>

<div>
    <div class="pull-left">
    <h1>PRINT ME!</h1>
    <h6 style="padding-bottom: 30px;">PRINT ME -  PRINT ME - PRINT ME</h6>
</div>

<div id="footer">
    <div class="pull-left">
    <h1>Edt Mode</h1>
    <h6 style="padding-bottom: 30px;">Some informational text here</h6>
</div>

<div class="model-backdrop">wow this is some more text</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:43:09.940

由于您的 html 格式不正确，我看不出有什么问题。也许您可以为我们提供完整的标记？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:06:43.987

在这里它按你预期的那样工作

[http://jsbin.com/imimom/2](http://jsbin.com/imimom/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:02:15.140

在尝试在 html 中使用它之前，您是否加载了 javascript 文件？如果您这样做，那不是问题，但如果您不尝试链接到 html 文件末尾的 .js 文件。

如果您不希望这是必要的，则必须将您的 channel_click 包装在 window.onload 中，或者如果您使用 jQuery

```
$(document).ready(function() {
    function channel_click() {
        ....
    }
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:02:29.283

尝试从您的锚标记中删除 onclick：

```
<a href="#" role="button" class="hideshow">Print Preview</a> 
```

JS：

```
<script type="text/javascript">
function channel_click(){    
    // anon wrapper function, 2 second delay
    setTimeout( function () {
         window.print();return false;
     } , 1500 );    
 }

    $(document).ready(function() {  //add this
        $(".hideshow").click(function (e) {
            e.preventDefault();
            $("#header,#footer").toggle("slow");
            channel_click(); //call print

           setTimeout( function () {
              $("#header,#footer").toggle("slow");
           } , 3500 );
           $('.modal-backdrop').hide();
         });
    }); 
```

# android - Android inapp：从服务器检索信息时出错。[RPC:S-5:AEC-0]

> ID：14520312
> 
> 赞同：1
> 
> 时间：2013-01-25T10:53:19.557
> 
> 标签：android, google-play, in-app-billing

我正在尝试在 android 应用程序中添加应用内购买。

它正在使用测试项目。

现在我正在尝试使用真实物品。草稿已上传到 PlayStore，项目已创建并激活，gmail 测试帐户已添加到测试人员的电子邮件中，但每次我想在手机上购买项目（带有签名的 apk）时，我都会收到此错误：“**从服务器检索信息时出错。 [RPC:S-5:AEC-0]** "

并在日志中：

> [E/Volley(14681)：[967] BasicNetwork.performRequest： https](https://android.clients.google.com/fdfe/details?doc=inapp:com.flirtymob.androidv2:test_product) ://android.clients.google.com/fdfe/details?doc=inapp:com.flirtymob.androidv2:test_product 的意外响应代码 500

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:08:45.937

通常需要大约 2-3 小时，因此请稍等片刻，
请参阅此 [用户不符合此购买条件 - 在应用程序计费](https://stackoverflow.com/questions/13747736/user-is-not-eligible-for-this-purchase-in-app-billing)
中，他们提到所有必需步骤的答案之一，请确保您遵循所有步骤。

# java - OpenGL ES 中质量不佳的纹理

> ID：14520314
> 
> 赞同：1
> 
> 时间：2013-01-25T10:53:41.587
> 
> 标签：java, android, opengl-es, textures

我设法在屏幕上显示图像。但是当我将多张图像叠放在一起时，半透明的边缘是黑色的，它并没有真正达到我希望的结果。我正在使用 Galaxy Note 2。

这是它的外观： ![在此处输入图像描述](../Images/0e89fd57afb6c44fb68689ffb291f213.png)

我希望瓷砖彼此靠近，没有任何黑边。我还没有为瓷砖编程任何正确的坐标，所以请不要介意。问题是应该是半透明的黑边。

这是绘图方法中的代码：

```
public void draw(GL10 gl) {
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    gl.glFrontFace(GL10.GL_CW);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    gl.glDrawElements(GL10.GL_TRIANGLE_STRIP, pIndex.length, GL10.GL_UNSIGNED_SHORT, pBuff);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
} 
```

并加载纹理：

```
public void loadGLTexture(GL10 gl, Context context) {
    Bitmap bitmap = null;

    if (Math.random() > .3) {
        bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.tile_grass);
    } else {
        bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.tile_sand);
    }

    gl.glGenTextures(1, textures, 0);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

    bitmap.recycle();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:13:53.043

解决了，我不得不添加这个：

```
gl.glEnable(GL10.GL_BLEND);
gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA); 
```

# pubnub - pubnub 有 api 吗？

> ID：14520315
> 
> 赞同：3
> 
> 时间：2013-01-25T10:53:43.653
> 
> 标签：pubnub

我想从事使用即时消息的个人项目。我想知道是否有像 pubnub 这样向公众开放的 API。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T18:51:37.223

[您可以在http://www.pubnub.com/developers](http://www.pubnub.com/developers)找到所有开源 API 和教程

您还可以在[http://www.pubnub.com/blog/ditch-your-backend-with-pubnub-messenger/找到有关构建类似即时消息的应用程序的教程](http://www.pubnub.com/blog/ditch-your-backend-with-pubnub-messenger/)

*完全披露我是 PubNub 员工*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T14:38:51.863

所有 PubNub SDK 和 API 都是开源和公开的。您可以通过查看[开发人员资源和文档](https://www.pubnub.com/developers/)来选择您最喜欢的语言并开始编码。有几个[构建基本聊天应用程序的示例 | PubNub](http://www.pubnub.com/solutions/chat/)本身。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-25T10:57:53.260

我认为您的问题的解决方案是[openpush](http://openpush.im/)。

# javascript - Meteor 应用程序通过可爬取呈现不稳定

> ID：14520317
> 
> 赞同：3
> 
> 时间：2013-01-25T10:53:49.970
> 
> 标签：javascript, meteor, phantomjs

## 情况：

我想在我的 vps ubuntu 服务器上运行一些应用程序以进行爬网测试。我的应用程序使用包管理器`meteor-router`的“气氛” 。`mrt`在我安装了 phantomjs 的本地 mac os x 10.8 上`brew`，一切正常。通过添加，我得到了我页面的漂亮快照

> `http://sample.com/?_escaped_fragment_=`

到网址。

## 问题：

让我们在我的 ubuntu vps 服务器上尝试同样的方法。2种方式：

1）将未捆绑的应用程序复制到服务器并使用`mrt run`命令运行它：它工作不稳定。有时它呈现正常。但有时我的动态内容是空白的。就像我的数据库是空的。

2) 将未捆绑的应用程序复制到服务器和`mrt bundle fname.tgz`它，然后解压缩 .tgz 并`main.js`使用节点运行它。这种方式可蜘蛛工作绝对错误。每次尝试时，我都会得到空白而不是动态数据。

## 我的想法：

我的 ubuntu 机器的内存和处理器资源比我的本地机器少得多。这就是为什么生成动态内容需要更多时间，但 phantom 认为页面已经结束并在流星渲染之前制作快照。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T00:29:51.250

我想我解决了这个问题。这确实是 spiderable.js 文件中的一个问题。这个模块在 REPL 状态下运行 phantomjs 并通过标准输入给他这样的代码：

```
var url = '" + url + "';
var page = require('webpage').create();
page.open(url);

setInterval(function() {
  var ready = page.evaluate(function () {
    if (typeof Meteor !== 'undefined'
        && typeof(Meteor.status) !== 'undefined'
        && Meteor.status().connected) {
      Meteor.flush();
      return Meteor._LivedataConnection._allSubscriptionsReady();
    }
    return false;
  });

  if (ready) {
    var out = page.content;
    out = out.replace(/<script[^>]+>(.|\\n|\\r)*?<\\/script\\s*>/ig, '');
    out = out.replace('<meta name=\"fragment\" content=\"!\">', '');

    console.log(out);
    phantom.exit();
  }
}, 100); 
```

问题是当所有 Meteor 条件都通过时，它认为 page.content 已 100% 更新。但事实并非如此。我找到并测试的解决方案是将`if`块包裹起来`setTimeout`（500ms 对我来说很好）：

```
 if (ready) {
    setTimeout(function () {
      var out = page.content;
      out = out.replace(/<script[^>]+>(.|\\n|\\r)*?<\\/script\\s*>/ig, '');
      out = out.replace('<meta name=\"fragment\" content=\"!\">', '');

      console.log(out);
      phantom.exit();
    }, 500);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T16:22:42.980

我相信这样做的正确方法是将回调传递给`page.open`，就像这样（[参见文档](http://phantomjs.org/api/webpage/method/open.html)）：

```
page.open(url, function (status) {
    ...
}; 
```

此外，如果您想依靠超时进行快照，我会减少超时并将其包装在一个循环中以加快速度并使其更可靠：

```
page.open(url, function (status) {
    if(status !== 'success') {
        phantom.exit();
        return;
    }

    function isReady() {
        return page.evaluate(function () {
            if('undefined' === typeof Meteor
            || 'undefined' === typeof(Meteor.status)
            || !Meteor.status().connected)
                return false;
            Meteor.flush();
            return Meteor._LivedataConnection._allSubscriptionsReady();
        }
    }

    function trySnapshot() {
        if(!isReady()) {
            setTimeout(trySnapshot, 100);
            return;
        }
        console.log(page.content
            .replace(/<script[^>]+>(.|\\n|\\r)*?<\\/script\\s*>/ig, '')
            .replace('<meta name=\"fragment\" content=\"!\">', '')
        );
        phantom.exit();
    }
    trySnapshot();
}; 
```

我还认为我的最后一个片段将经常执行而根本没有超时，因为`page.open`回调是在适当的时间调用的

# xcode - xcode 4.5.2 中的“不完整实现”

> ID：14520320
> 
> 赞同：1
> 
> 时间：2013-01-25T10:53:54.817
> 
> 标签：xcode, implementation

我的 ViewController.m 文件出现“不完整的实现”警告。不知道为什么。我有下面的代码。我错过了什么？

#import "iaieDataViewController.h"

```
@interface iaieDataViewController ()

@end

@implementation iaieDataViewController ###ERROR HERE###

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.dataLabel.text = [self.dataObject description];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:57:50.040

我们很难说你缺少什么，但你可以很容易地找到自己：转到你的头文件`iaieDataViewController`，并检查类声明的方法。对于您在标头中声明的每个方法，都必须在 .m 文件中实现一个方法。否则，您会收到“不完整的实现”警告。

请注意，您采用的*协议*方法也很重要：如果声明具有协议名称列表（在标头中类名称之后的`<`...`>`括号内），则这些协议中的所有必需方法都必须实现为为了避免警告。

# android - 安卓sqlite错误

> ID：14520321
> 
> 赞同：0
> 
> 时间：2013-01-25T10:54:01.007
> 
> 标签：android, sqlite, simplecursoradapter

我正在尝试放入 sqldatabase 2 列。当我插入评论时一切都很好，但是当我尝试阅读 listView 时出现错误。`column '_id' does not exist` 有logcat：

```
 01-25 12:30:55.787: E/AndroidRuntime(4256): FATAL EXCEPTION: main
01-25 12:30:55.787: E/AndroidRuntime(4256): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.spacebrowser/com.example.spacebrowser.books}: java.lang.IllegalArgumentException: column '_id' does not exist 
```

有Sqliteadapter

```
 public class SQLiteAbdapter {
public static final String MYDATABASE_NAME = "MY_DATABASES";
public static final String MYDATABASE_TABLE = "MY_TABLE";
public static final int MYDATABASE_VERSION = 1;
public static final String KEY_ID = "_id";
public static final String KEY_CONTENT1 = "Content1";
public static final String KEY_CONTENT2 = "Content2";

private static final String SCRIPT_CREATE_DATABASE =
 "create table " + MYDATABASE_TABLE + " ("
 + KEY_ID + " integer primary key autoincrement, "
 + KEY_CONTENT1 + " text not null, "
 + KEY_CONTENT2 + " text not null);"; 

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;
private Context context;
public SQLiteAbdapter(Context c){

 context = c;

} 

public SQLiteAbdapter openToRead() throws android.database.SQLException {
 sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
 sqLiteDatabase = sqLiteHelper.getReadableDatabase();
 return this; 

} 

public SQLiteAbdapter openToWrite() throws android.database.SQLException {
 sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
 sqLiteDatabase = sqLiteHelper.getWritableDatabase();
 return this; 

}

public void close(){
sqLiteHelper.close();
} 

public long insert(String content1, String content2){

 ContentValues contentValues = new ContentValues();
 contentValues.put(KEY_CONTENT1, content1);
 contentValues.put(KEY_CONTENT2, content2);  

 return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
} 

public int deleteAll(){
 return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
}
public Cursor queueAll(){
 String[] columns = new String[]{KEY_ID, KEY_CONTENT1, KEY_CONTENT2};
 Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
 null, null, null, null, null, null);
   return cursor;

} 

 public class SQLiteHelper extends SQLiteOpenHelper {
public SQLiteHelper(Context context, String name,
CursorFactory factory, int version) {
super(context, name, factory, version);

}

@Override
public void onCreate(SQLiteDatabase db) {
// TODO Auto-generated method stub
db.execSQL(SCRIPT_CREATE_DATABASE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
 // TODO Auto-generated method stub   
    if (oldVersion >= newVersion)
        return;
    db.execSQL("DROP TABLE IF EXISTS " + MYDATABASE_TABLE);
    onCreate(db);
}
    }

  } 
```

还有books.java simplecursoradapter：

```
ListView listContent;   
  private SQLiteAbdapter mySQLiteAdapter;
  SimpleCursorAdapter cursorAdapter;
  Cursor cursor;
@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.books);

    listContent = (ListView)findViewById(R.id.list);
    mySQLiteAdapter = new SQLiteAbdapter(this);
    mySQLiteAdapter.openToRead();        

    cursor = mySQLiteAdapter.queueAll();
    String[] from = new String[]{SQLiteAdapter.KEY_ID, SQLiteAbdapter.KEY_CONTENT1, SQLiteAbdapter.KEY_CONTENT2};
    int[] to = new int[]{R.id.id, R.id.title, R.id.urlss};
    cursorAdapter =
     new SimpleCursorAdapter(this, R.layout.bookmark, cursor, from, to);
    listContent.setAdapter(cursorAdapter); 
```

我做的这么糟糕，以至于我有这个错误？

```
column '_id' does not exist 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:33:10.987

您错过了在插入方法中插入 id。所以你会添加

```
public long insert(String id,String content1, String content2){

  ContentValues contentValues = new ContentValues();
  contentValues.put(KEY_ID, id);
  contentValues.put(KEY_CONTENT1, content1);
   contentValues.put(KEY_CONTENT2, content2);  

 return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:02:52.260

我认为您不需要更新数据库版本或更新数据库版本，希望您的问题能够得到解决。

# sql - 如何在一组行中选择数量不相互抵消的行？

> ID：14520326
> 
> 赞同：1
> 
> 时间：2013-01-25T10:54:26.497
> 
> 标签：sql, sql-server-2008

给定一些类似于以下临时表中的行：

```
TransactionId | AccountsDocumentLineId | Amount
-------------   ----------------------   ------
52345           12345                    -15.79
52346           12345                    15.79
52347           12345                    -15.79
52348           22222                    -6.34
52349           22222                    6.34
52350           22222                    6.34
52351           22222                    -6.34
52352           22222                    -8.76
52353           22222                    10.49 
```

如何确保删除任何相互抵消（总和为零）的*行* `AccountsDocumentLineId`，并且只留下那些没有更多匹配行可以配对的行？

因此，在上面的示例中，带有`TransactionId`= `52345`(*或* `52347`) 的行将被保留（因为`-15.79`and`15.79`会相互抵消）。

类似地，带有`TransactionId`=`52352`和的`52353`行将保留（因为两对`-6.34`和`6.34`将相互抵消）。

因此，我们将得到以下最终结果：

```
TransactionId | AccountsDocumentLineId | Amount
-------------   ----------------------   ------
52347           12345                    -15.79
52352           22222                    -8.76
52353           22222                    10.49 
```

注意：我已经删除了所有不必要的细节（更多的列和更多的行）来简单地展示手头的问题。

我玩过的一些选项是： -

*   总结`Amount`一组 s 中的所有`AccountDocumentLineId`s 并查看哪一行与余额匹配，但这只会处理第一个示例（只剩下一行），而*不是*需要保留两行的第二个示例（所以不容易拆分一个值来给出两行）

*   遍历一组`AccountDocumentLineId`s 中的每个条目，如果找到匹配项，则删除*两个*对应项；**我认为这个会起作用**，尽管不确定如何在 SQL 中进行操作？

[SQLFiddle 演示](http://sqlfiddle.com/#!2/899e4/1)

更新：根据[Bulat 的回答添加](https://stackoverflow.com/a/14525084/1578713)[了完整](https://stackoverflow.com/a/14581570/1578713)的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:30:51.320

第一步很简单

```
DELETE FROM MYTABLE WHERE AccountsDocumentLineId IN
  (SELECT AccountsDocumentLineId from MYTABLE 
   GROUP BY AccountsDocumentLineId 
   HAVING SUM(Amount) <> 0) 
```

但是你可能会发现你需要做一些调整来应对精度错误。

那应该只剩下不平衡的帐户。从那里你将不得不（我认为）创建一个存储过程来将借方“分配”到贷方。从您的数据样本看来，事务 id 的排序很可能是有序的，所以这应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:42:20.360

您可以多次运行此代码（例如，当它影响超过 0 条记录时）：

```
WITH Matches AS
(
SELECT t1 = t1\. TransactionId, t2 = t2.TransactionId, 
  a1 = t1.Amount, a2 = t2.Amount, t1.AccountsDocumentLineId
FROM  Transactions t1 
    INNER JOIN Transactions t2 
        ON t1.AccountsDocumentLineId = t2.AccountsDocumentLineId
           AND t1.Amount = -t2.Amount 
           AND t1.TransactionId < t2.TransactionId 
)
DELETE FROM Transactions
WHERE EXISTS (
SELECT * FROM Matches m1
WHERE Transactions.TransactionId IN(m1.t1,m1.t2)
  AND NOT EXISTS
 (SELECT * FROM Matches m2
  WHERE  abs(m1.a1) = abs(m2.a1) 
     AND m1.AccountsDocumentLineId = m2.AccountsDocumentLineId
     AND (
         (m2.t1 > m1.t1 AND m2.t2 <= m1.t2)  
      OR (m2.t2 < m1.t2 AND (m2.t1 >= m1.t1))
      OR m2.t1 = m1.t2
     ) 
 )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:12:31.193

为了响应 Bulat 对我的打包代码的请求，我在此处提交它（为了他人的利益）：

```
DECLARE 
      @SequenceStart INT = 0,
      @SequenceEnd INT = 10 -- Just to be on the safe side, though unlikely for there to be 10 matching pairs for the same AccountsDocumentLineId

STARTLOOP:
    SET
        @SequenceStart = @SequenceStart+1   
    ;
    WITH Matches AS
    (
        SELECT
            L1 = L1.TransactionId, L2 = L2.TransactionId,
            A1 = L1.Amount, A2 = L2.Amount, L1.AccountsDocumentLineId
        FROM
            #RemainingLedgerEntries L1
            INNER JOIN #RemainingLedgerEntries L2
                ON L1.AccountsDocumentLineId = L2.AccountsDocumentLineId
                AND L1.Amount*-1 = L2.Amount
                AND L1.TransactionId < L2.TransactionId
    )
    DELETE FROM
        #RemainingLedgerEntries
    WHERE
        EXISTS
        (
            SELECT
                *
            FROM
                Matches M1
            WHERE
                #RemainingLedgerEntries.TransactionId IN (M1.L1, M1.L2)
            AND NOT EXISTS
            (
                SELECT
                    *
                FROM
                    Matches M2
                WHERE
                    ABS(M1.A1) = ABS(M2.A1) 
                AND M1.AccountsDocumentLineId = M2.AccountsDocumentLineId
                AND
                (
                    (M2.L1 > M1.L1 AND M2.L2 <= M1.L2)  
                    OR (M2.L2 < M1.L2 AND (M2.L1 >= M1.L1))
                    OR M2.L1 = M1.L2
                ) 
            )
        )

    IF @SequenceStart >= @SequenceEnd
        GOTO ENDTASK

    GOTO STARTLOOP

ENDTASK: 
```

# iphone - 倒计时 UILabel 不会减少

> ID：14520330
> 
> 赞同：1
> 
> 时间：2013-01-25T10:54:40.980
> 
> 标签：iphone, ios, objective-c, nstimer

我正在尝试制作倒计时标签，但它并没有减少..任何人都可以发现代码中的错误

```
- (IBAction)start:(id)sender
{
     timer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self   selector:@selector(updateCountdown) userInfo:nil repeats: YES];
}

-(void) updateCountdown
{
     int hours, minutes, seconds;
     int secondsLeft = 30;
     hours = secondsLeft / 3600;
     minutes = (secondsLeft % 3600) / 60;
     seconds = (secondsLeft %3600) % 60;
     countDownlabel.text = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:04:22.583

因为每次计时器触发时，您都会使用相同的秒数 `int secondsLeft=30;`

您必须在启动 Timer 时设置 secondsLeft 的值，并在 timer 上递减它

```
- (IBAction)start:(id)sender{

  timer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self   selector:@selector(updateCountdown) userInfo:nil repeats: YES];

  secondsLeft=30;
 }

 -(void) updateCountdown {
    int hours, minutes, seconds;

    secondsLeft--;
    hours = secondsLeft / 3600;
    minutes = (secondsLeft % 3600) / 60;
    seconds = (secondsLeft %3600) % 60;
    countDownlabel.text = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T11:14:25.340

您可以声明`secondsLeft`并`timer`作为 ivars，`secondsLeft`每次调用递减并在没有剩余秒数时使递减`updateCountdown`无效。`timer`

```
- (IBAction)start:(id)sender
{
    secondsLeft = 30;
    timer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self   selector:@selector(updateCountdown) userInfo:nil repeats: YES];
}

- (void) updateCountdown
{
    int hours, minutes, seconds;

    hours = secondsLeft / 3600;
    minutes = (secondsLeft % 3600) / 60;
    seconds = (secondsLeft %3600) % 60;
    countDownlabel.text = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];
    secondsLeft--;

    if (seconds==0)
    {
        [timer invalidate];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:01:18.043

`int secondsLeft=30;`你已经在你的方法中分配了`updateCountdown`这是正常的。

您应该在其他地方设置 secondLeft 的初始值，然后在您的方法中`updateCountdown`您需要减少它的值

```
 -(void) updateCountdown {
    int hours, minutes, seconds;

    hours = secondsLeft / 3600;
    minutes = (secondsLeft % 3600) / 60;
    seconds = (secondsLeft %3600) % 60;
    countDownlabel.text = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];
    if (secondsLeft > 0) secondsLeft--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:45:41.797

我发现了问题...

```
-(IBAction)start:(id)sender{

countDownView.hidden=NO;

timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateElapsedTime) userInfo:nil repeats:YES];
secondsLeft=30;

}

 -(void) updateCountdown {
int hours, minutes, seconds;

hours = secondsLeft / 3600;
minutes = (secondsLeft % 3600) / 60;
seconds = (secondsLeft %3600) % 60;
countDownlabel.text = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];

} 
```

# android - 具有不同布局的第一个可见项目的 ListView

> ID：14520331
> 
> 赞同：10
> 
> 时间：2013-01-25T10:54:50.847
> 
> 标签：android, android-listview

我怎样才能使第一个可见元素与其他元素`ListView`不同`layout`。

![第一个单元格有描述](../Images/1822be61fc4aa55950329de61597a20a.png)

![当列表滚动并且第二个单元格位于第一个位置时，显示第二个单元格的描述](../Images/c4e36ca7c77d92d42cacbc02f33eb77b.png)

我创建了一个具有 2 种不同布局的自定义适配器。现在，当项目第一次出现时，我该如何进行`layout`更改`position`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:54:29.933

要获得具有不同布局的列表视图的第一项，可以使用以下代码。但是当列表中的项目少于可见项目的数量时，列表视图不会移动。

```
list.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub

            if(firstItem != firstVisibleItem)
            {
                firstItem = firstVisibleItem;
                adapter.notifyDataSetChanged();
            }
        }
    }); 
```

并在适配器类中检查是否与`postion`相等，`firstItem`然后显示细节布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:55:08.607

尝试这个

int visibleposition = ListView.getFirstVisiblePosition();

现在对于这个特定位置，像这样更改列表项的背景

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:16:42.370

您可以尝试一些方法，例如

> getFirstVisiblePosition

或者[这](https://stackoverflow.com/questions/3110927/how-to-get-the-first-visible-view-from-an-android-listview)可能会回答你的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:05:48.703

在 getView() 中，您可能会为不同的位置膨胀不同的布局。做类似的事情

```
 if(position==0){
           inflate(first_layout);
   else{
           inflate(other_layout); 
```

# linux - 如何解决“致命：无法写入锁定文件“postmaster.pid”：设备上没有剩余空间”错误？

> ID：14520332
> 
> 赞同：4
> 
> 时间：2013-01-25T10:54:54.460
> 
> 标签：linux, postgresql, unix, diskspace, fedora16

我在我的 fedora core 14 中安装了 postgres 8.4.9 数据库并部署了一个应用程序。在我尝试重新启动系统之前，它工作正常，直到今天。现在我无法启动 pgsql。当我尝试开始时，我收到以下错误

> 致命：无法写入锁定文件“postmaster.pid”：设备上没有剩余空间

我用谷歌搜索但无法找到此问题的解决方案。

有人可以帮忙解决这个问题吗？

这是 df -kh 命令的输出：

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/vda              9.9G  9.5G     0 100% /
tmpfs                 2.0G   88K  2.0G   1% /dev/shm 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T13:29:42.573

这不是一个真正的编程问题，所以它应该是超级用户。

简短的回答 -

重新启动系统。

如果系统恢复正常，请尝试：

```
find / -mtime -3 -size +100000 -exec ls -ls {} \; | sort -n 
```

最大的最新文件将位于列表的底部。如果您可以看到该文件不是应用程序的一部分（例如数据文件），请将其删除。/ 上至少需要 5% 的可用空间。

从长远来看，您必须添加更多磁盘空间，例如您拥有的两倍或三倍。

# facebook-graph-api - Facebook Graph Api：获取我是管理员的页面

> ID：14520335
> 
> 赞同：0
> 
> 时间：2013-01-25T10:55:01.497
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

我已经搜索了很多关于这个主题的内容，但我没有找到任何适合我需要的解决方案。

我想要的是，当我调用 时`me/accounts`，它会为我提供与我相关联的所有页面和应用程序。但问题是，我只想获取那些我`Admin`不是我作为开发人员或 QA 链接的页面。一旦我得到页面ID，我就有一个使用方法的解决`isAdmin`方法，但是检查每个页面需要很多时间。

我可以得到一些可以帮助我在一个电话中获得我管理的所有页面的东西吗？它真的很关键。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:20:39.417

您可以使用 FQL 轻松完成此操作。

```
SELECT page_id, role, type FROM page_admin WHERE uid=me() and type != 'APPLICATION' 
```

# jquery - MVC 4客户端验证不起作用

> ID：14520336
> 
> 赞同：65
> 
> 时间：2013-01-25T10:55:08.913
> 
> 标签：jquery, asp.net-mvc-4, jquery-validate, unobtrusive-validation

谁能告诉我为什么客户端验证在我的 MVC 4 应用程序中不起作用。

### _layout.schtml

```
@Scripts.Render("~/bundles/jquery")
@RenderSection("scripts", required: false) 
```

在我的 web.config 中，我有：

```
<appSettings>
   <add key="ClientValidationEnabled" value="true" />
   <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

在我的 login.cshtml 页面中，我有：

```
@using (Html.BeginForm())
{
    <div class="formscontent">

        <ol>
            <li>
                @Html.LabelFor(x => x.AgreementNumber)
                <br />
                @Html.TextBoxFor(x => x.AgreementNumber, new { size = "30" })
                <br />
                @Html.ValidationMessageFor(m => m.AgreementNumber)
                <br />
                <br />
            </li>
            <li>
                @Html.LabelFor(x => x.UserName)
                <br />
                @Html.TextBoxFor(x => x.UserName, new { size = "30" })
                <br />
                @Html.ValidationMessageFor(m => m.UserName)
                <br />
                <br />
            </li>
            <li>
                @Html.LabelFor(x => x.Password)
                <br />
                @Html.PasswordFor(x => x.Password, new { size = "30" })
                <br />
                @Html.ValidationMessageFor(m => m.Password)
                <br />
                <br />
            </li>
        </ol>

    </div>

    <ol>
        <li>
            @Html.CheckBoxFor(m => m.RememberMe)
            @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
        </li>
    </ol>

    <br />

    <input class="mainbutton" type="submit" value="@Model.Localisation.TranslateHtmlString("LogonBtn")" /><br />
    <div style="text-align: left; padding: 0 5px 5px 10px;">
        Forgot login-info? clik <a class="link" href="@Url.Action("Index", "Credentials")">here.</a>
    </div>

} 
```

在登录页面底部：

```
@section Scripts {
  @Scripts.Render("~/bundles/jqueryval")
} 
```

我的浏览器中启用了 JavaScript。在 Visual Studio 客户端验证的 MVC 4 模板项目中工作正常。

运行应用程序，在查看页面源时在登录页面上，我看到这个呈现：

```
<label for="AgreementNumber">number</label>
<br />
<input id="AgreementNumber" name="AgreementNumber" size="30" type="text" value="387893" />
<br />
<span class="field-validation-valid" data-valmsg-for="AgreementNumber" data-valmsg-  replace="true"></span> 
```

在底部：

```
<script src="/BMWebsite/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/BMWebsite/Scripts/jquery.validate.inline.js"></script>
<script src="/BMWebsite/Scripts/jquery.validate.js"></script>
<script src="/BMWebsite/Scripts/jquery.validate.unobtrusive.js"></script> 
```

我的模型属性已注释：

```
public class LogonModel : ModelBase
{
    [MyRequired("AgreementNumberRequiredProperty")]
    [MyDisplay("AgreementNumberLabel")]
    public string AgreementNumber { get; set; }

    [MyRequired("UserNameRequiredProperty")]
    [MyDisplay("UserNameLabel")]
    public string UserName { get; set; }

    [MyRequired("PasswordRequiredProperty")]
    [DataType(DataType.Password)]
    [MyDisplay("PasswordLabel")]
    public string Password { get; set; }

    [MyDisplay("RememberMeCheckBox")]
    public bool RememberMe { get; set; }
} 
```

`MyRequired`是从常规RequiredAttribute 派生的类。原因是我的错误消息是通过覆盖类的`FormatErrorMessage(string name)`方法来本地化的`RequiredAttribute`。它工作正常 - 我的标签和错误消息已本地化。

### MyRequired.cs

```
public class MyRequiredAttribute : RequiredAttribute
{
    private readonly string _errorMessagekey;

    public MyRequiredAttribute(string errorMessage)
    {
        _errorMessagekey = errorMessage;
    }

    public override string FormatErrorMessage(string name)
    {
        var translation = HttpContext.Current.Session["translation"] as LocalisationHelper;

        return translation != null ? translation.Translate(_errorMessagekey) : ErrorMessage;
    }
} 
```

我在我的登录操作方法的 POST 版本中放置了一个断点，它正在被命中。表单被发布到服务器端验证发生的服务器。客户端验证不会发生。

我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-07-01T07:18:27.737

我有同样的问题。似乎没有加载不显眼的验证脚本（见最后的截图）。我通过在 _Layout.cshtml 的末尾添加来修复它

```
 @Scripts.Render("~/bundles/jqueryval") 
```

最终结果：

```
 @Scripts.Render("~/bundles/jquery")
   @Scripts.Render("~/bundles/jqueryval")
   @RenderSection("scripts", required: false) 
```

除了我相当标准的 CRUD 视图之外，一切都是 Visual Studio 项目模板的默认值。

修复问题后加载的脚本： ![在此处输入图像描述](../Images/0ad8a5dfb1aa96fe295ba12058c88249.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-01-28T09:39:23.247

请务必在您希望验证处于活动状态的每个视图的末尾添加此命令。

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-27T17:06:14.013

我终于通过在我的 .cshtml 文件中直接包含必要的脚本来解决这个问题，顺序如下：

```
<script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script> 
```

这有点跑题了，但我一直对这种事情在 Web 编程中发生的频率感到惊讶，即一切似乎都已到位，但事实证明需要进行一些模糊的调整才能使事情顺利进行。脆弱，脆弱，脆弱。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-11-24T18:28:01.897

在 Global.asax.cs 中，Application_Start() 方法添加：

```
DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(MyRequiredAttribute), typeof(RequiredAttributeAdapter)); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-07-13T07:24:24.790

您可能已经解决了这个问题，但是我通过使用 App_Start 更改 BundleConfig 中 jqueryval 项的顺序来获得一些运气。即使在全新的开箱即用 MVC 4 Internet 解决方案上，客户端验证也无法正常工作。所以我改变了默认值：

```
 bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*")); 
```

至

```
 bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.validate*",
                    "~/Scripts/jquery.unobtrusive*")); 
```

现在我的客户端验证正在工作。你只是想确保不显眼的文件在最后（所以它不是侵入性的，哈哈:)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-01-25T10:56:55.063

您的输入没有数据验证属性。确保您已使用服务器端帮助程序（例如 Html.TextBoxFor）生成它，并且它位于表单内：

```
@using (Html.BeginForm())
{
    ...
    @Html.TextBoxFor(x => x.AgreementNumber)
} 
```

我也不知道`jquery.validate.inline.js`脚本是什么，但如果它以某种方式依赖于`jquery.validate.js`插件，请确保在它之后引用它。

在所有情况下，请查看浏览器中的 javascript 控制台是否存在潜在错误或缺少脚本。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-09-20T07:26:46.093

如果您在客户端使用`jquery.validate.js`and `jquery.validate.unobtrusive.js`进行验证，您应该记住，您必须在请求中注册任何 DOM 元素的任何验证属性。因此，您可以使用以下代码：

```
$.validator.unobtrusive.parse('your main element on layout'); 
```

注册所有验证属性。您可以在（例如）上调用此方法： `$(document).ajaxSuccess() or $(document).ready()`注册所有这些并且可以成功进行验证，而不是在cshtml文件上注册所有js文件。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-05-24T10:09:15.613

我遇到了验证问题，表单发布然后验证，

**这不适用于 jquery cdn**

```
 <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
```

**这工作没有 jquery cdn**

```
<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
```

希望能帮助某人。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-11-01T11:06:43.213

对我来说，这是很多搜索。最终我决定使用 NuGet 而不是自己下载文件。我删除了所有涉及的脚本和脚本包并获得了以下软件包（截至目前的最新版本）

*   jQuery (3.1.1)
*   jQuery 验证 (1.15.1)
*   Microsoft jQuery Ubobtrusive Ajax (3.2.3)
*   Microsoft jQuery 非侵入式验证 (3.2.3)

然后我将这些包添加到 BundleConfig 文件中：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                "~/Scripts/jquery-{version}.js"));

bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                "~/Scripts/jquery.validate.js",
                "~/Scripts/jquery.validate.unobtrusive.js",
                "~/Scripts/jquery.unobtrusive-ajax.js")); 
```

我将此引用添加到 _Layout.cshtml：

```
@Scripts.Render("~/bundles/jquery") 
```

我将此引用添加到我需要验证的任何视图：

```
@Scripts.Render("~/bundles/jqueryval") 
```

现在一切正常。

不要忘记这些事情（很多人忘记了）：

*   表单标签（@using (Html.BeginForm())）
*   验证摘要 (@Html.ValidationSummary())
*   您输入的验证消息（例如：@Html.ValidationMessageFor(model => model.StartDate)）
*   配置 （）
*   添加到包中的文件的顺序（如上所述）

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-01-25T11:05:02.470

验证 data-* 属性未在您的输入呈现的 html 中显示的原因可能是没有表单上下文。FormContext 是在您使用创建表单时自动创建的`@using(Html.BeginForm(...)) { ... }`。

如果您对表单使用常规的 html 标记，您将无法获得客户端验证。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-02-01T12:31:04.390

我的问题出在 web.config 中：UnobtrusiveJavaScriptEnabled 已关闭

`<appSettings>`

`<add key="ClientValidationEnabled" value="true" />`

`<add key="UnobtrusiveJavaScriptEnabled" value="false" />`

`</appSettings>`

我改为现在工作：

```
`<add key="UnobtrusiveJavaScriptEnabled" value="true" />` 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-09-06T11:17:58.030

```
<script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script> 
```

这段代码对我有用。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-09-13T14:58:49.823

这对我有用 转到您的模型类并在任何道具上方设置错误消息

```
[Required(ErrorMessage ="This is Required Field")]
    public string name { get; set; } 
```

按 Ctrl+ 导入所需的命名空间。最后在视图中添加这个

```
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-01-06T09:24:52.820

在我的情况下，验证本身正在工作（我可以验证一个元素并检索一个正确的布尔值），但是没有视觉输出。

我的错是我忘记了这一行 @Html.ValidationMessageFor(m => ...)

TS 在他的代码中有这个，让我走上了正确的轨道，但我把它放在这里作为其他人的参考。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-01-25T11:01:33.173

下面的行显示您没有在 AgreementNumber 上设置所需的 DataAttribute

```
<input id="AgreementNumber" name="AgreementNumber" size="30" type="text" value="387893" /> 
```

你需要

```
[Required]
public String AgreementNumber{get;set;} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-11T10:51:59.833

确保您使用的是`Attributes`（例如`RequiredAttribute`），它属于`System.ComponentModel.DataAnnotations`命名空间

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-11-08T16:27:17.550

利用：

> @Html.EditorFor

代替：

> @Html.TextBoxFor

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-03-15T22:29:49.777

在我的情况下，我添加了 id 等于在 html 上为 VS 自动生成的名称，并且在代码中我在该情况下添加了一行。

```
$(function () {
            $.validator.addMethod('latinos', function (value, element) {
                return this.optional(element) || /^[a-záéóóúàèìòùäëïöüñ\s]+$/i.test(value);
            });

            $("#btn").on("click", function () {
                //alert("aa");
                $("#formulario").validate({                    
                    rules:
                    {
                        email: { required: true, email: true, minlength: 8, maxlength: 80 },
                        digitos: { required: true, digits: true, minlength: 2, maxlength: 100 },
                        nombres: { required: true, latinos: true, minlength: 3, maxlength: 50 },
                        NombresUsuario: { required: true, latinos: true, minlength: 3, maxlength: 50 }
                    },
                    messages:
                    {
                        email: {
                            required: 'El campo es requerido', email: 'El formato de email es incorrecto',
                            minlength: 'El mínimo permitido es 8 caracteres', maxlength: 'El máximo permitido son 80 caracteres'
                        },
                        digitos: {
                            required: 'El campo es requerido', digits: 'Sólo se aceptan dígitos',
                            minlength: 'El mínimo permitido es 2 caracteres', maxlength: 'El máximo permitido son 10 caracteres'
                        },
                        nombres: {
                            required: 'El campo es requerido', latinos: 'Sólo se aceptan letras',
                            minlength: 'El mínimo permitido es 3 caracteres', maxlength: 'El máximo permitido son 50 caracteres'
                        },
                        NombresUsuario: {
                            required: 'El campo es requerido', latinos: 'Sólo se aceptan letras',
                            minlength: 'El mínimo permitido es 3 caracteres', maxlength: 'El máximo permitido son 50 caracteres'
                        }
                    }
                });
            });

<tr>@*<div class="form-group">     htmlAttributes: new { @class = "control-label col-md-2" }      , @class = "form-control" }*@
                <td>@Html.LabelFor(model => model.NombresUsuario )</td>

                        @*<div class="col-md-10">*@
                <td>
                    @Html.EditorFor(model => model.NombresUsuario, new { htmlAttributes = new { id = "NombresUsuario" } })
                    @Html.ValidationMessageFor(model => model.NombresUsuario, "", new { @class = "text-danger" })
                </td> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-03-30T12:17:38.510

`<form action="/StudentInfo/Edit/2" method="post" novalidate="novalidate">`我创建了这个 html`novalidate="novalidate"`阻止客户端 jQuery 执行，当我删除时`novalidate="novalidate"`，客户端 jQuery 被启用并开始工作。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-04-20T15:03:13.533

我想在这篇文章中补充一点，我遇到了同样的问题，但在 PartialView 中。

我需要添加

```
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
```

到局部视图，即使 _Layout 视图中已经存在。

参考：

*   [数据注释/验证不适用于部分视图](https://stackoverflow.com/questions/25258719/data-annotations-validation-not-working-for-partial-views)

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2015-02-26T09:11:05.403

```
 @section Scripts
 {
<script src="../Scripts/jquery.validate-vsdoc.js"></script>
<script src="../Scripts/jquery.validate.js"></script>
<script src="../Scripts/jquery.validate.min.js"></script>
<script src="../Scripts/jquery.validate.unobtrusive.js"></script>
<script src="../Scripts/jquery.validate.unobtrusive.min.js"></script>
} 
```

# javascript - 如何在动态内容旁边加载 Doubleclick 广告

> ID：14520337
> 
> 赞同：8
> 
> 时间：2013-01-25T10:55:18.173
> 
> 标签：javascript, jquery, ads, dynamic-content, google-dfp

我一直在尝试让 Doubleclick 广告代码与我的动态内容一起加载。我有一个网站，可以在您向下滚动时加载更多内容，而不必转到下一页、返回一页等。但是，我未能成功加载我在每 2 到 3 页上的广告。

有谁知道如何做到这一点？

谢谢。

*编辑*

标题中的代码：

```
<script type='text/javascript'>
    googletag.cmd.push(function() {
    googletag.defineSlot('/XXX/XXX', [300, 250], 'div-gpt-ad-XXX-0').addService(googletag.pubads());

    googletag.pubads().enableSingleRequest();
    googletag.enableServices();
    });
</script> 
```

我也尝试过删除“enableSingleRequest”，但这似乎没有帮助。

正文中的广告代码：

```
<div id='div-gpt-ad-XXX-0' style='width:300px; height:250px;'>
    <script type='text/javascript'>
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-XXX-0'); });
    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:57:06.920

我解决了这个问题。

jQuery.load 在加载后从我的 html 中剥离脚本标签，而 DFP 不喜欢这样。我最终使用了[https://github.com/coop182/jquery.dfp.js](https://github.com/coop182/jquery.dfp.js)，它解决了所有问题。

# ruby-on-rails - 应该重定向到 Rails 中自定义路由/未找到页面错误的常见显示/页面

> ID：14520338
> 
> 赞同：0
> 
> 时间：2013-01-25T10:55:29.050
> 
> 标签：ruby-on-rails, routing, custom-routes

我正在开发一个 Rails 应用程序。**在我的应用程序中，如果我在地址栏 / 中手动输入自定义路由作为config/routes.rb**中不存在的 URL ，它将显示以下给定的错误消息。

> 路由错误
> 
> 没有路线匹配“/clientImage/blablahblah”

我希望将其重定向到用户有意/无意给出的所有错误路线的正确显示。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:52:46.167

当有人输入不受支持的 url 时，Rails 将引发 ActionController::RoutingError。您可以挽救此错误并呈现 404 Not Found html。

为此，Rails 提供了一些特殊的函数，称为[rescue_from 。](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html)

```
class ApplicationController < ActionController::Base
   rescue_from ActionController::RoutingError, :with => :render_not_found
   rescue_from StandardError, :with => :render_server_error

   protected
     def render_not_found
        render "shared/404", :status => 404
     end

     def render_server_error
        render "shared/500", :status => 500
     end
end 
```

把你的 404.html、500.html 放到 app/views/shared

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:03:27.430

```
Yourapp::Application.routes.draw do
  #Last route in routes.rb
  match '*a', :to => 'errors#routing'
end 
```

“a”实际上是 Rails 3 Route Globbing 技术中的一个参数。例如，如果您的 url 是 /this-url-does-not-exist，则 params[:a] 等于“/this-url-does-not-exist”。因此，在处理这条流氓路线时，请尽可能发挥创造力。

在 app/controllers/errors_controller.rb

```
 class ErrorsController < ApplicationController
      def routing
       render :file => "#{Rails.root}/public/404.html", :status => 404, :layout => false
      end
    end 
```

# java - 使用 Eclipse/MyEclipse 刷新 Swing 应用程序

> ID：14520339
> 
> 赞同：1
> 
> 时间：2013-01-25T10:55:30.790
> 
> 标签：java, eclipse, swing, myeclipse

假设我们正在编写一个 Java Swing 应用程序，并且我们使用 Eclipse 或 MyEclipse 来开发它。在 Web 应用程序中，您进行代码更改、保存，并且您的 ant 部署文件负责部署更改的文件。然后您只需刷新或硬刷新网页，更改就会出现在那里。我们是否可以对 Swing 应用程序做同样的事情，这样我们就不必在每次进行更改时都从头开始关闭和打开程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:09:05.440

在 MyEclipse 中，您可以在调试模式而不是运行模式下启动应用程序，您所做的更改将被推送到目标 VM；如果您所做的更改无法被替换，您将看到一个对话框，通知您替换失败，您将需要重新启动您的应用程序。您不需要在应用程序中放置任何断点，只需在调试模式下启动就足够了。

正如 Guillaume 上面所说，对类结构的更改通常不会热同步，但现有方法中的更改应该没问题。

显然，热同步更改对您正在运行的应用程序的成功程度取决于您的应用程序设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:04:23.380

我不这么认为，因为您需要热代码替换！Maybee 使用另一个框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:25:39.003

您不能简单地这样做，因为一旦 JVM 启动，它会加载一次类文件，并且在下一次加载请求之前不会重新加载它。但是您可以使用`ClassLoader`动态加载修改后的类文件。

以下两篇文章可能会有所帮助：

*   [IBM 关于“热类交换”的文章](http://www.ibm.com/developerworks/cn/java/j-lo-hotswapcls/)

*   [“谁说 Java 中的运行时类重载很难？”](http://java.dzone.com/runtime-java-reloading-javeleon)

第一个是中文的，但是你可以看看代码和结果。我认为第二篇文章对 GUI 应用程序更有帮助。

# python - SQLAlchemy 和显式锁定

> ID：14520340
> 
> 赞同：16
> 
> 时间：2013-01-25T10:55:32.617
> 
> 标签：python, orm, sqlalchemy

我有多个进程可能会在数据库中插入重复的行。这些插入不会经常发生（每小时几次），因此它不是性能关键。

我在插入之前尝试了存在检查，如下所示：

```
#Assume we're inserting a camera object, that's a valid SQLAlchemy ORM object that inherits from declarative_base...
try:
  stmt = exists().where(Camera.id == camera_id)
  exists_result = session.query(Camera).with_lockmode("update").filter(stmt).first()

  if exists_result is None:
    session.add(Camera(...)) #Lots of parameters, just assume it works
    session.commit()
except IntegrityError as e:
  session.rollback() 
```

我遇到的问题是`exist()`检查没有锁定表，因此多个进程可能会尝试同时插入同一个对象。在这种情况下，一个进程插入成功，其他进程失败并出现 IntegrityError 异常。虽然这有效，但对我来说并不“干净”。

我真的很想在`exists()`检查之前锁定相机表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T13:08:22.317

也许您可能对此感兴趣：

[https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/8WLhbsp2nls](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/8WLhbsp2nls)

> 您可以通过直接执行 SQL 来锁定表。我不确定在 Elixir 中是什么样子，但在普通 SA 中它会是这样的：
> 
> ```
> conn = engine.connect()
>  conn.execute("LOCK TABLES 指针写入")
>  #用 conn 做事
>  conn.execute("解锁表")
> 
> ```

# java - 使用 BTrace 查找第一次创建类的时间

> ID：14520344
> 
> 赞同：3
> 
> 时间：2013-01-25T10:55:45.647
> 
> 标签：java, javolution, btrace

我正在尝试使用 BTrace 来查找何时在我的程序中首次实例化某种类型（Eclipse 调试器无法找到它），因为我看到了一些奇怪的行为（Javolution XMLStreamWriterImpl 之前以某种方式向我的 XML 添加元素它甚至应该已经创建）。

无论如何，我有以下通过 JVisualVM 使用的方法，但运行时没有显示任何内容。

```
import com.sun.btrace.annotations.*;
import static com.sun.btrace.BTraceUtils.*;
import java.lang.String;

@BTrace
public class ClassLoad {
    @OnMethod(clazz = "javolution.xml.stream.XMLStreamWriterImpl", method = "<init>", location = @Location(value=Kind.NEW))
    public static void site(@ProbeMethodName(fqn=true) String caller) {
        println(strcat("Called from @", caller));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:59:48.087

您需要不同的**@OnMethod**定义。

```
@OnMethod(clazz="/.*/", method="/.*/", location=@Location(value=Kind.NEW, clazz="javolution.xml.stream.XMLStreamWriterImpl")) 
```

基本上，您指定要检查所有类的所有方法是否出现*新的 javolution.xml.stream.XMLStreamWriterImpl*指令。

其余代码可以保持不变。

# c# - 将自定义属性添加到按钮控件 c#

> ID：14520346
> 
> 赞同：2
> 
> 时间：2013-01-25T10:55:50.633
> 
> 标签：c#, oop, button, properties, controls

我现在正在构建一个可能已经完成 75% 的国际象棋游戏，这是一个零计划的冲动事物，因此它非常混乱。

我有三个多维数组，一个包含一个 enum `Colour`，另一个包含一个 enum ，`ChessPiece`最后一个包含坐标。

我想清理它，我能想到两件事。

1）面向对象编程。我可以用属性 Colour、Coordinates 和 Piece 构建一个类，然后在游戏开始时实例化每个片段，并引用每个实例。

2) 如果我可以将属性添加到按钮控件，则更简单的方法是，类似于类的属性。即 `button1.Piece = Pawn`其中 button1 指的是实际的按钮。

有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:41:30.590

它可能很简单：

```
public class ChessButton : Button
{
    public ChessPiece { get; set; }
} 
```

显然你需要扩展`ChessButton`（可怕的名字）来做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:57:23.177

好吧，如果您采用第一种方法（在 oo 范式内做事），我可以想象您可以想出一个非常简洁的模型。我可以设想一个基类 Piece，它可以由类 Prawn、Rook、Bishop 等继承，这可能会实现移动棋子的“规则”。同样，我可以想象一个类 Tile 和另一个名为 Board 的类（包含一个二维数组）。等等等等

所以你最终可以把它想象成非常整洁/漂亮。你必须考虑所有这些类，弄清楚它们做什么以及它们如何与其他类交互。所以它有一个设计元素，这是一个潜在的缺点 - 必须在没有任何实际收益的情况下进行前期思考 - 你几乎为你的应用程序构建了一个基础设施。但如果你将代码提供给他们希望能够很容易地弄清楚发生了什么事情的人。所以它是可维护的。oo 方法有一个很大的好处。

您的第二种方法（扩展 ui 类）。好吧，正如你所说，这似乎容易得多。也许如果应用程序足够简单，那就是要走的路。

但是您还说，到目前为止，您已经在临时基础上做了一些事情，而且一切都非常混乱。你遇到的是典型的 ui 开发——当你用非结构化的方法构建东西时，事情变得一团糟。多年来，人们投入了大量时间和金钱来尝试将结构添加到前端以尝试提高可维护性。您标记了这个问题 c#，所以您可能听说过诸如 MVC、MVVM 或 MVP 之类的 Microsofty 东西。您不一定需要详细查看这些方法，您只需要了解它们存在的原因 - 尝试划分 UI 代码以使其更易于管理。

由于您还说您的动机之一是清理代码，因此我敦促您对结构化方法进行一些思考，而不是默认采用“更容易”的路径。

如果您考虑一下并决定只扩展一个 Button，那很好。您选择它而不是结构化方法的原因是结构化方法需要更多的努力。但至少你想过。将来您会遇到更复杂的 ui 需求，而这种预先考虑会带来好处。

# vb.net - 如何将自定义边框添加到 FormBorderStyle=None - 表单？

> ID：14520347
> 
> 赞同：3
> 
> 时间：2013-01-25T10:55:56.157
> 
> 标签：vb.net, border, formborderstyle

我有一个表单，其属性 FormBorderStyle 设置为“无”，顶部有一个自定义栏，用于拖动和按钮。

现在我想给表单一个边框，因为它是一个子表单，并且父表单与子表单具有相同的背景颜色，因此很难看到子表单。不，我不能/不会改变背景颜色。

帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:51:28.023

有一种方法不需要设置背景图像和/或固定大小的表单。所以这是我猜的最合适和最简单的方法。假设您有一个名为 的表单`Form1`，您需要做的就是：

```
Private Sub Form1_Paint(sender As Object, e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint
    ControlPaint.DrawBorder(e.Graphics, e.ClipRectangle, Color.Black, ButtonBorderStyle.Solid)
End Sub 
```

另一种方法是，如果您想使用 Windows 版本提供的默认边框：

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Me.FormBorderStyle = Windows.Forms.FormBorderStyle.Sizable
    Me.Text = ""
    Me.ControlBox = False
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-11T04:53:41.277

您可以使用可以[在此处](http://www.microsoft.com/en-ph/download/details.aspx?id=25169)下载的**Visual Basic .NET Power Packs**。它有这个控件，你可以把它放在你的无边框表单的边缘，就像我目前正在开发的这个程序一样。`LineShape`[![请注意，窗体的边框只是 LineShape。](../Images/d25fa0d8cb4bb95643604da4f1e6972c.png)](https://i.stack.imgur.com/MdEdX.jpg)

北边界只是 a`LineShape`设置`BorderWidth`为`60`，其他边界`BorderWidth`设置为`10`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:59:11.667

`BackgroundImage`也许您可以在边框中使用透明的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T13:22:59.193

您可以在表单绘制事件中使用它：

```
ControlPaint.DrawBorder(e.Graphics, Me.ClientRectangle, Color.Black, ButtonBorderStyle.Solid) 
```

这将仅绘制客户端边框，如果您正在调整表单大小，或`Me.Refresh()`在表单调整大小事件中最大化表单使用，以便表单重绘其边框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-19T15:17:24.427

在看到GD的答案后，我对表格上的TableLayouPanel做了同样的事情：

```
Private Sub TableLayoutPanel1_Paint(sender As Object, e As PaintEventArgs) Handles TableLayoutPanel1.Paint
    ControlPaint.DrawBorder(e.Graphics, e.ClipRectangle, Color.DarkOrange, ButtonBorderStyle.Solid)
End Sub 
```

# java - imagebutton 设置图像大小

> ID：14520352
> 
> 赞同：5
> 
> 时间：2013-01-25T10:56:10.220
> 
> 标签：java, android, layout, button

所以想象你的布局上有几个按钮。该项目几乎完成了，并且有很多动态的东西（以编程方式设置图像、侦听器、statedrawables 等）。

现在，你被告知点击按钮有点棘手，所以你的第一个想法（至少是我的）是“好的，我会让边界框变大”。要做到这一点，我只需要给这些按钮更多的宽度和高度，这样它们就更容易点击了。

当我看到那些按钮使用背景来存储图像时，我的问题就出现了，所以每当我把它们变大时，里面的图像也会变大。

我的问题是，我是否坚持必须在其之上创建一个布局，将侦听器分配给这个新的、更大的布局，然后将按钮保留为图像，还是有更简单的方法？

```
 /¯¯¯¯¯¯¯¯¯¯¯¯\ <- outter layout
                   /¯¯¯¯¯¯¯¯\                | /¯¯¯¯¯¯¯¯\ |
                   |        |                | |        | |
                   | BUTTON |      --->      | | BUTTON | |
                   |        |                | |        | |
                   \________/                | \________/ |
                                             \____________/ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:44:50.000

在您的 xml 布局中使用它

```
android:background="@null" 
```

这将帮助您仅将按钮显示为图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:28:52.450

没关系，找到答案了，我就把它留在这里，以防其他人遇到这个问题。

在我们的例子中，我们无法编辑图像，我所做的就是将 Button 节点更改为 ImageButton。现在，我们不使用背景，而是使用 src，一旦 ImageButton 被放大，就会添加一个简单的内部填充，这样即使按钮本身实际上更大，图像也会保持原始大小，因此更容易点击。

附带说明一下，如果你以前的背景有 alpha，你现在可能想要这样做：

```
android:background="@null" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:46:08.003

Edit all your buttons and set the `layout_margin` or the `padding` to the space you need.

Example:

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="20dp"
    android:padding="20dp"
    android:text="Button" /> 
```

# java - 从 ImageJ 插件动态加载类

> ID：14520354
> 
> 赞同：1
> 
> 时间：2013-01-25T10:56:15.213
> 
> 标签：java, class, dynamic, imagej, reloading

我在从动态加载的类中动态加载 java 类时遇到问题。

我的类是一个`ImageJ`插件，它通过`classloader`. 我在加载引用与插件`NoClassDefFoundError`在同一个包中的东西的模块时。`ImageJ`

我具体做的是：

1.  ImageJ 加载插件 (A)
2.  (A) 获取系统类加载器
3.  (A) 将 jar url 添加到类加载器
4.  (A) 尝试使用在 jar 中加载所需的类 (B)`Class.forName`

我无法加载 B 类，因为我得到了`NoClassDefFoundError`由 B 指向 A 中的类而在当前类加载器中找不到的结果。

我认为我需要首先使用`ImageJ`用于加载插件的相同类加载器才能加载我的模块并仍然找到对以前加载的 jar 的引用`ImageJ`。我想这样做而不必重新编译`ImageJ`。

有什么方法可以解决这个问题而不必`ImageJ`修改代码或修改它？

伪类示例

```
package a;
class A extends PlugInFrame {}

package a;
class C extends MyOwnPlugIn {} 
```

* * *

```
package b;
import a;
class B extends C {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:56:41.427

最简单的方法是避免动态加载类，而是直接使用它。

如果没有这种方法，最好的方法是确保 .jar 文件都在 ImageJ 的 plugins/ 文件夹中（或者如果您使用 Fiji，非插件 .jar 文件位于 jars/ 中）并使用 ImageJ 的插件类加载器：IJ.getClassLoader ().loadClass("blub");

请注意，您的第 3 步是一个很大的禁忌：您永远不应该将元素添加到系统类加载器的类路径中。

另请注意，可以通过 imagej@list.nih.gov 联系到所有 ImageJ 专家，而不是通过在 StackOverflow 上发帖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:00:24.130

我不确定您是否需要动态加载这些类，但要获取 A 的类加载器

```
ClassLoader classLoader = A.getClass().getClassLoader() 
```

然后使用它来实例化 B 记住 B 需要有一个[无参数构造函数](https://stackoverflow.com/questions/5571466/dynamically-loading-a-class-in-java)。

你为什么不构建你构建包含 B 的插件 jar 文件？我创建了一堆插件，通常我添加依赖项，然后构建包含它需要的所有依赖项的插件 jar 文件。

# android - android：locationManager onLocationChanged 不更新Activity

> ID：14520355
> 
> 赞同：0
> 
> 时间：2013-01-25T10:56:21.027
> 
> 标签：android, locationmanager

我需要你的帮助。我有一项活动，每 5 分钟获取一次当前的 lat lon `gps = new GpsData(StartActivity.this);`。这很好用！但是当我离开一个县城时，活动又刷新了。然后我没有得到当前的 lon lat。我不知道为什么。

这是代码：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        btnShowLocation = (Button) findViewById(R.id.report_btn);
        btnShowLocation.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent intent = new Intent(StartActivity.this, ReportActivity.class);
                startActivity(intent);
                finish();

            }
        });

    }

     @Override
     public void onResume() {
      super.onResume();
      autoUpdate = new Timer();
      autoUpdate.schedule(new TimerTask() {
       @Override
       public void run() {
        runOnUiThread(new Runnable() {
         public void run() {
             //start GPS
             gps = new GpsData(StartActivity.this);
             //start json download
             new task().execute();
         }
        });
       }
      }, 0, 300000); // updates each 5 min
     }

class task extends AsyncTask<String, String, Void>
{
private ProgressDialog progressDialog = new ProgressDialog(StartActivity.this);
    InputStream is = null ;
    String result = "";
    protected void onPreExecute() {
       progressDialog.setMessage("Status Update...");
       progressDialog.show();
       progressDialog.setOnCancelListener(new OnCancelListener() {
    @Override
        public void onCancel(DialogInterface arg0) {
        task.this.cancel(true);
       }
    });
     }
       @Override
    protected Void doInBackground(String... params) {
            //get Location Data
               double latitude = gps.latitude;
               double longitude = gps.longitude;
               String mlat = String.valueOf(latitude);
               String mlon = String.valueOf(longitude);

               //if (gps.latitude != 0.0) {

           JSONObject json = jsonFunctions.getJSONfromURL("http://myurl); 
```

这是我的 GpsData

```
public class GpsData extends Service implements LocationListener {    
public GpsData(Context context) {
            this.mContext = context;
            getLocation();
        }

        public Location getLocation() {

        // Get the location manager
        locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        return null;

      }

      /* Request updates at startup */
      protected void onStart() {

      }

      /* Remove the locationlistener updates when Activity is paused */
      protected void onPause() {
        locationManager.removeUpdates(this);
      }

      @Override
      public void onLocationChanged(Location location) {
          latitude = location.getLatitude();
          longitude = location.getLongitude();
          time = location.getTime();
          speed = location.getSpeed();
      } 
```

这很简单：我希望每 5 分钟获取一次当前纬度，并使用当前县的当前数据刷新列表视图……我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:58:16.667

改变这个

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this); 
```

至

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 300000, 0, this); 
```

# groovy - Groovy 中的类型提升是如何工作的？

> ID：14520368
> 
> 赞同：1
> 
> 时间：2013-01-25T10:57:09.237
> 
> 标签：groovy

考虑以下代码片段 -

```
def factorial(number) {
    if(number == 1)
        return number;
    else 
        return number * factorial(number - 1);
}

println factorial(50)
println factorial(50).getClass()

println()

println 45**20
println ((45**20).getClass()) 
```

输出是 -

```
0
class java.lang.Integer

1159445329576199417209625244140625
class java.math.BigInteger 
```

问题 -

1.  为什么 groovy在第一种情况下不会自动将结果提升`number * factorial(number-1)`为 a ？`BigInt`
2.  为什么输出为0？为什么不是整数溢出后我们应该得到的随机数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T06:57:41.320

老问题，但我会尝试回答问题的两个部分：

[关于算术运算的 Groovy 文档](http://groovy.codehaus.org/Groovy+Math)指出

> > 涉及子类的二元运算`java.lang.Number`根据以下矩阵自动转换其参数（除法除外，下文将讨论）

我不会粘贴矩阵，但它指定不强制转换为`BigInteger`或`BigDecimal`除非运算符之一属于这些类型之一。

在分割的情况下：

> > 如果任一操作数是 Float 或 Double，则除法运算符“/”和“/=”产生 Double 结果，否则产生 BigDecimal 结果

我认为该表没有考虑幂运算符 ( `**`)，因为它在 Java 中不存在，并且如 @tim_yates 评论中所述，默认情况下`power`使用实现`BigInteger`。

中的[代码`DefaultGroovyMethods.java`](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L10934)清楚地表明 's 的幂`int`是使用 's 计算`BigInteger`的，如果结果很小，则再次转换为 int （这就是为什么`(2**4).class`is `java.lang.Integer`）：

```
public static Number power(Integer self, Integer exponent) {
    if (exponent >= 0) {
        BigInteger answer = BigInteger.valueOf(self).pow(exponent);
        if (answer.compareTo(BI_INT_MIN) >= 0 && answer.compareTo(BI_INT_MAX) <= 0) {
            return answer.intValue();
        } else {
            return answer;
        }
    } else {
        return power(self, (double) exponent);
    }
} 
```

要确认其他操作的行为，您可以转到[org.codehaus.groovy.runtime.typehandling 包](https://github.com/groovy/groovy-core/tree/master/src/main/org/codehaus/groovy/runtime/typehandling)[`IntegerMath`](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/typehandling/IntegerMath.java)中[`LongMath`](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/typehandling/LongMath.java)的其他类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:36:07.527

使用 Groovy，`Integer.multiply( Integer )`总是返回一个整数。

阶乘方法在第 16 步左右开始溢出。

在第 34 步，您最终`-2147483648 * -2147483648`会返回 0，因此结果将始终为 0

一种解决方法是将您的方法声明更改为：

```
def factorial( BigInteger number ) { 
```

# c# - 循环内的多线程c#

> ID：14520377
> 
> 赞同：2
> 
> 时间：2013-01-25T10:57:36.053
> 
> 标签：c#, multithreading, directory

我正在使用 c# 制作一个工具，它遍历一个大文件目录并提取某些信息。该目录是按语言（LCID）组织的，所以我想使用多线程来浏览目录——每个语言文件夹一个线程。

我的代码目前在没有多线程的情况下扫描少量文件并提取所需的数据，但在大规模上它会花费太长时间。

我在循环中设置了一个线程来获取 LCID 文件夹，但出现以下错误：“'HBscan' 没有重载与委托 System.threading.threadstart 匹配”。根据我在网上阅读的内容，然后我将我的方法放在一个类中，这样我就可以有参数了，现在没有错误，但是代码没有正确地遍历文件。它正在将文件排除在扫描之外。

我想知道是否有人可以看到我的代码哪里出了问题，导致它无法正常执行？谢谢。

```
public static void Main(string[] args)
    {
        //change rootDirectory variable to point to directory which you wish to scan through
        string rootDirectory = @"C:\sample";
        DirectoryInfo dir = new DirectoryInfo(rootDirectory);

        //get the LCIDs from the folders
        string[] filePaths = Directory.GetDirectories(rootDirectory);
        for (int i = 0; i < filePaths.Length; i++)
        {
            string LCID = filePaths[i].Split('\\').Last();
            Console.WriteLine(LCID);

            HBScanner scanner = new HBScanner(new DirectoryInfo(filePaths[i]));
            Thread t1 = new Thread(new ThreadStart(scanner.HBscan));              
            t1.Start();             
        } 

        Console.WriteLine("Scanning through files...");

    }
    public class HBScanner
    {
        private DirectoryInfo DirectoryToScan { get; set; }

        public HBScanner(DirectoryInfo startDir)
        {
            DirectoryToScan = startDir;
        }

        public void HBscan()
        {
            HBscan(DirectoryToScan);
        } 

        public static void HBscan(DirectoryInfo directoryToScan)
        {
            //create an array of files using FileInfo object
            FileInfo[] files;
            //get all files for the current directory
            files = directoryToScan.GetFiles("*.*");
            string asset = "";
            string lcid = "";

            //iterate through the directory and get file details
            foreach (FileInfo file in files)
            {
                String name = file.Name;
                DateTime lastModified = file.LastWriteTime;
                String path = file.FullName;

                //first check the file name for asset id using regular expression
                Regex regEx = new Regex(@"([A-Z][A-Z][0-9]{8,10})\.");
                asset = regEx.Match(file.Name).Groups[1].Value.ToString();

                //get LCID from the file path using regular expression
                Regex LCIDregEx = new Regex(@"sample\\(\d{4,5})");
                lcid = LCIDregEx.Match(file.FullName).Groups[1].Value.ToString();

                //if it can't find it from filename, it looks into xml
                if (file.Extension == ".xml" && asset == "")
                {
                    System.Diagnostics.Debug.WriteLine("File is an .XML");
                    System.Diagnostics.Debug.WriteLine("file.FullName is: " + file.FullName);
                    XmlDocument xmlDoc = new XmlDocument();
                    xmlDoc.Load(path);
                    //load XML file in 

                    //check for <assetid> element
                    XmlNode assetIDNode = xmlDoc.GetElementsByTagName("assetid")[0];
                    //check for <Asset> element
                    XmlNode AssetIdNodeWithAttribute = xmlDoc.GetElementsByTagName("Asset")[0];

                    //if there is an <assetid> element
                    if (assetIDNode != null)
                    {
                        asset = assetIDNode.InnerText;
                    }
                    else if (AssetIdNodeWithAttribute != null) //if there is an <asset> element, see if it has an AssetID attribute
                    {
                        //get the attribute 
                        asset = AssetIdNodeWithAttribute.Attributes["AssetId"].Value;

                        if (AssetIdNodeWithAttribute.Attributes != null)
                        {
                            var attributeTest = AssetIdNodeWithAttribute.Attributes["AssetId"];
                            if (attributeTest != null)
                            {
                                asset = attributeTest.Value;
                            }
                        }
                    }
                }

                Item newFile = new Item
                {
                    AssetID = asset,
                    LCID = lcid,
                    LastModifiedDate = lastModified,
                    Path = path,
                    FileName = name
                };

                Console.WriteLine(newFile);

            }

            //get sub-folders for the current directory
            DirectoryInfo[] dirs = directoryToScan.GetDirectories("*.*");
            foreach (DirectoryInfo dir in dirs)
            {
                HBscan(dir);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:06:41.127

我还没有检查，但我认为这可以工作。

该代码将为每个线程创建一个扫描仪并执行 HBscan 方法。

```
public static void Main(string[] args)
        {
            //change rootDirectory variable to point to directory which you wish to scan through
            string rootDirectory = @"C:\sample";
            DirectoryInfo dir = new DirectoryInfo(rootDirectory);

            //get the LCIDs from the folders
            string[] filePaths = Directory.GetDirectories(rootDirectory);
            for (int i = 0; i < filePaths.Length; i++)
            {
                string LCID = filePaths[i].Split('\\').Last();
                Console.WriteLine(LCID);

                Thread t1 = new Thread(() => new HBScanner(new DirectoryInfo(filePaths[i])).HBscan());
                t1.Start();
            }

            Console.WriteLine("Scanning through files...");

        }
        public class HBScanner
        {
            private DirectoryInfo DirectoryToScan { get; set; }

            public HBScanner(DirectoryInfo startDir)
            {
                DirectoryToScan = startDir;
            }

            public void HBscan()
            {
                HBscan(DirectoryToScan);
            }

            public static void HBscan(DirectoryInfo directoryToScan)
            {
                //create an array of files using FileInfo object
                FileInfo[] files;
                //get all files for the current directory
                files = directoryToScan.GetFiles("*.*");
                string asset = "";
                string lcid = "";

                //iterate through the directory and get file details
                foreach (FileInfo file in files)
                {
                    String name = file.Name;
                    DateTime lastModified = file.LastWriteTime;
                    String path = file.FullName;

                    //first check the file name for asset id using regular expression
                    Regex regEx = new Regex(@"([A-Z][A-Z][0-9]{8,10})\.");
                    asset = regEx.Match(file.Name).Groups[1].Value.ToString();

                    //get LCID from the file path using regular expression
                    Regex LCIDregEx = new Regex(@"sample\\(\d{4,5})");
                    lcid = LCIDregEx.Match(file.FullName).Groups[1].Value.ToString();

                    //if it can't find it from filename, it looks into xml
                    if (file.Extension == ".xml" && asset == "")
                    {
                        System.Diagnostics.Debug.WriteLine("File is an .XML");
                        System.Diagnostics.Debug.WriteLine("file.FullName is: " + file.FullName);
                        XmlDocument xmlDoc = new XmlDocument();
                        xmlDoc.Load(path);
                        //load XML file in 

                        //check for <assetid> element
                        XmlNode assetIDNode = xmlDoc.GetElementsByTagName("assetid")[0];
                        //check for <Asset> element
                        XmlNode AssetIdNodeWithAttribute = xmlDoc.GetElementsByTagName("Asset")[0];

                        //if there is an <assetid> element
                        if (assetIDNode != null)
                        {
                            asset = assetIDNode.InnerText;
                        }
                        else if (AssetIdNodeWithAttribute != null) //if there is an <asset> element, see if it has an AssetID attribute
                        {
                            //get the attribute 
                            asset = AssetIdNodeWithAttribute.Attributes["AssetId"].Value;

                            if (AssetIdNodeWithAttribute.Attributes != null)
                            {
                                var attributeTest = AssetIdNodeWithAttribute.Attributes["AssetId"];
                                if (attributeTest != null)
                                {
                                    asset = attributeTest.Value;
                                }
                            }
                        }
                    }

                    Item newFile = new Item
                    {
                        AssetID = asset,
                        LCID = lcid,
                        LastModifiedDate = lastModified,
                        Path = path,
                        FileName = name
                    };

                    Console.WriteLine(newFile);

                }

                //get sub-folders for the current directory
                DirectoryInfo[] dirs = directoryToScan.GetDirectories("*.*");
                foreach (DirectoryInfo dir in dirs)
                {
                    HBscan(dir);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:11:17.227

如果您使用的是 .NET 4.0，则可以使用 TPL 并使用[Parallel.For/Parallel.ForEach](http://msdn.microsoft.com/de-de/library/system.threading.tasks.parallel.aspx)同时处理多个项目相当容易。

几天前我才接触到它，这很有趣。它通过在不同内核上使用多个线程来加速您的工作，从而为您提供出色的性能。当然，由于过多的 IO 访问，这可能会在您的情况下受到限制。

但这可能值得一试！（并且更改您当前的来源非常容易，只需检查一下即可）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T11:30:14.423

有点像这样的东西呢，

```
public static void Main(string[] args)
{
    const string rootDirectory = @"C:\sample";

    Directory.EnumerateDirectories(rootDirectory)
        .AsParallel()
        .ForAll(f => HBScannner.HBScan(new DirectoryInfo(f)));
} 
```

毕竟，您只能在循环体中获取 LCID 才能将其写入控制台。如果你想保持对控制台的写入，你可以这样做，

```
public static void Main(string[] args)
{
    const string rootDirectory = @"C:\sample";

    Console.WriteLine("Scanning through files...");

    Directory.EnumerateDirectories(rootDirectory)
        .AsParallel()
        .ForAll(f => 
            {
                var lcid = f.Split('\\').Last();
                Console.WriteLine(lcid);

                HBScannner.HBScan(new DirectoryInfo(f));
            });
} 
```

* * *

请注意，`EnumerateDirectories`应该优先使用 of，`GetDirectories`因为它是惰性评估的，因此您的处理可以在找到第一个目录后立即开始。您不必等待所有目录都加载到列表中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T11:24:06.527

[使用 BlockingCollection http://msdn.microsoft.com/en-us/library/dd267312.aspx](http://msdn.microsoft.com/en-us/library/dd267312.aspx)可以大大改善您的任务。

总体结构是这样的：您创建一个线程（或在主线程中执行此操作），它将枚举文件并将它们添加到 BlockingCollection。简单地枚举文件应该相当快，并且这个线程应该比工作线程更快地完成。

然后，您创建许多任务（与 Environment.ProcessorCount 相同的数量会很好）。这些任务应该像 docs (collection.Take()) 中的第一个示例一样。任务应该对一个单独的文件进行检查。

因此，一个线程正在寻找文件名并将它们放入 BlockingCollection，而其他并行的线程将检查文件内容。这样您将获得更好的并行性，因为如果您为文件夹创建线程，这可能会导致工作分配不均（您不知道每个文件夹中都有很多文件，对吧？）

# android - Android：向 /dev/null 发送 onClick bash 命令

> ID：14520378
> 
> 赞同：0
> 
> 时间：2013-01-25T10:57:42.473
> 
> 标签：android, string, bash, onclick, dev-null

我在我的应用程序中制作了一些执行 bash cmd 的按钮。

这是我的字符串：

```
 final String[] test = {"su","-c","echo test > /system/test.txt"}; 
```

这个 cmd 有效，事实上，我可以在 /system/ 上看到 test.txt 文件，里面有 test 行。

我的问题是：当我按下 exec 的 cmd 按钮时，设备会创建一个带有字符串“echo test /system/text.txt”的吐司。我猜这是由于“-c”，无论如何：

```
 final String[] test = {"su","echo test > /system/test.txt"}; 
```

将不起作用，并且：

```
 final String[] test = {"su","-c","echo test > /system/test.txt >> /dev/null"}; 
```

将无法正常工作并创建一个显示“echo test /system/test.txt /dev/null”的吐司

有什么办法可以避免这个“问题”？

另外，当我单击执行它的按钮时，任何人都可以向我展示一个用旋转轮创建吐司的小功能吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T11:20:38.410

这份手册摘录`su`应该可以解决您关于`-c`选项的问题：

`-c, --command=COMMAND pass a single COMMAND to the shell with -c`

和

```
final String[] test = {"su","-c","echo test > /system/test.txt >> /dev/null"}; 
```

将无法工作，因为 Android 没有`/dev/null`设备。为了让它工作，你需要有一个`-c`选择之后`su`摆脱`/dev/null`. 您可以改用 android API 来删除此文件。

# c# - 调用的函数在 winforms 中不起作用

> ID：14520380
> 
> 赞同：-5
> 
> 时间：2013-01-25T10:57:48.213
> 
> 标签：c#, winforms

我正在从另一个表单调用一个表单的函数。它执行但并没有真正出现。所以有什么建议吗？？

我的代码就像

以表格形式

```
private void Print()
{
 FrmMenu ObjMain = new FrmMenu();
 ObjMain.Show();            
 }

public void CreateButtons(string Action)
{
  btn.Text=Action;
 } 
```

当 Form FrmMenu 打开时，在 FrmMenu 的构造函数中执行另一个函数

```
 Public FrmMenu()
 {
   FrmA f2 = new FrmA();
   f2.CreateButtons("NEW");
  } 
```

但是什么也没发生……！！！函数 CreateButtons 执行但不显示任何更改按钮的文本保持不变。所以请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:28:00.233

**已编辑**

您必须将 的实例传递给`FrmA`的构造函数`FrmMenu`。

在`FrmA`：

```
private void Print()
{
    FrmMenu ObjMain = new FrmMenu(this);
    ObjMain.Show();
} 
```

在`FrmMenu`：

```
public FrmMenu(FrmA f2)
{
    f2.CreateButtons("NEW");
} 
```

# ios - “尝试运行脚本时出错。” 在 UI 自动化工具中？

> ID：14520382
> 
> 赞同：2
> 
> 时间：2013-01-25T10:57:50.140
> 
> 标签：ios, ios-ui-automation

当我尝试运行`UI Automation`脚本时`iOS 6`，`iphone simulator 6.0`出现以下错误：

`"An error occurred while trying to run the script."`

请帮忙！虽然与`iphone simulator 5.1`with 一起工作正常`ios5`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T22:51:49.127

这是 Xcode 中的一个错误。一些人提出以下建议（对我不起作用，没有旧的 iOS 文件夹）。假设您拥有最新的 iOS，现在这将是 iOS7，最新版本为 7.0.3。

```
cd ~/Library/Application\ Support/iPhone\ Simulator/
mv 7.0 old7.0
ln -s 7.0.3 7.0 
```

有人声称此错误已在不同版本的 Xcode 中修复（看起来它又回到了带有 Instruments 5.0.1 的 Xcode 5.0.2 中），因此您可以尝试最新的 Xcode beta 或您认为可以在您的计算机上运行的任何版本（例如Xcode 5.0.1 显然）

然而，对我有用的是**插入一个设备并****在 iPod/iPhone**而不是模拟器上运行我的项目，它运行良好。

# c - eclipse 调试 (CDT) 控制台写行

> ID：14520385
> 
> 赞同：0
> 
> 时间：2013-01-25T10:58:00.680
> 
> 标签：c, eclipse, debugging, console.writeline, openocd

我正在尝试使用 eclipse(CDT)、gdb 和 openocd 调试我的 stm32f0。有什么方法（就像你在例如 Visual Studio 中所做的那样）有一个 var 打印到控制台。像 console.writeline 或 debug.writeline 这样的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T13:19:27.310

将 USB2TTL 转换器连接到 PA9 和 PA10 引脚，并使用串行端口打印任何调试信息。

在 Linux 上，您可以使用`screen`查看任何串行端口。例如：

```
screen /dev/ttyUSB0 115200 
```

尝试运行我的模板项目：

[https://github.com/dobromyslov/stm32f0-chibios-template](https://github.com/dobromyslov/stm32f0-chibios-template)

# c# - 如何将存储在字符串中的函数添加到 jquery .click 事件

> ID：14520386
> 
> 赞同：2
> 
> 时间：2013-01-25T10:58:01.297
> 
> 标签：c#, javascript, jquery

我正在尝试编写一个通用表生成器，我可以在其中告诉它在每个单元格的 onclick 事件中调用的函数。然后在页面的其他地方定义该函数。

问题是我无法让页面在正确的时刻评估功能。我希望它在构建 DOM 时而不是在触发 click 事件时将我的字符串转换为函数。也许这在 Javascript/JQuery 中是不可能的？

我最初用 C# 编写的服务器端代码的简化版本是：

```
string functionCall = "DoSomething(4);";
TableCell detailCell = new TableCell();
detailCell.Attributes.Add("onClick", functionCall);
functionCall = "DoSomething(5);";
detailCell = new TableCell();
detailCell.Attributes.Add("onClick", functionCall); 
```

当它在浏览器中呈现为 html 时，这将起作用。它变成了：

```
 function DoSomething(p)
 {
      alert(p);
 }

<td onclick="DoSomething(4)"></td>
<td onclick="DoSomething(5)"></td> 
```

我想在 Javascript 中复制这个功能。

如果我做：

```
var functionCall = 'DoSomething(4);';
$('#detailCell').attr('onclick', functionCall); 
```

由于某种原因，它不会在 IE7 中触发该事件，而是在 Chrome 中触发它。

如果我做：

```
var functionCall = 'DoSomething(4);';
$('#detailCell1').click(function () { eval(functionCall); });
functionCall = 'DoSomething(5);';
$('#detailCell2').click(function () { eval(functionCall); }); 
```

那么在添加点击事件时它不会将 functionCall 更改为一段文本。相反，它在单击单元格时评估 functionCall。这意味着 functionCall 的值现在是错误的。

例如，即使我单击 detailCell1，它也总是执行 DoSomething(5)，因为那是 functionCall 的最后一个值。

如果我做：

```
var functionCall = 'DoSomething(4);';
$('#detailCell1').click(eval(functionCall)); 
```

它在添加点击事件时立即运行 functionCall 中的函数，而不是在被点击时。

我希望这是有道理的，因为它很难解释。

基本上我只想能够做到

```
<td onclick="any javascript I feel like storing in a string"></td> 
```

使用 jQuery。

这甚至可能吗？

这是我在stackoverflow上的第一篇文章，所以请温柔...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:10:41.563

试试这个...

```
var functionCall = 'DoSomething(4);';

$('#detailCell1').click((function (code) {
  return function () { 
     eval(code); 
  };
}(functionCall))); 
```

这里发生的情况是，您在创建处理程序时通过将字符串分配给参数“code”来捕获字符串。

在您当前的场景中，单击处理程序在单击而不是在创建处理程序时使用字符串的值。

这叫做闭包！

```
(function (code) {
  return function () { 
     eval(code); 
  };
}(functionCall)); 
```

functionCall 值分配给 code 参数。现在，当您更改 functionCall 时，代码参数仍然引用旧值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:19:05.520

不清楚为什么函数调用应该在字符串中。正如我所看到的，您有许多单元格应该为每个单元格触发一个具有不同参数的函数。

在这种情况下，我接下来会做：

```
TableCell detailCell = new TableCell();
detailCell.Attributes.Add("class", "detailCell");
detailCell.Attributes.Add("data-num", "4");

detailCell = new TableCell();
detailCell.Attributes.Add("class", "detailCell");
detailCell.Attributes.Add("data-num", "5"); 
```

而且，在 js 中的某个地方：

```
$(function() {
    $(".detailCell").click(function(){
        DoSomething($(this).data("num"));
    });
}) 
```

`class`为了轻松地将点击处理程序分配给所有详细信息单元格，需要在表格单元格上，因此您不需要编写类似的内容：

```
$('#detailCell1').click(function () { DoSomething(4); });
$('#detailCell2').click(function () { DoSomething(5); }); 
```

这`detailCell.Attributes.Add("data-num", "5");`允许放置应该用作参数的数字`DoSomething`。您可以在这一行中看到它： `DoSomething($(this).data("num"));` `jQuery.data`正在使用函数。并将`this`指向一个被点击的元素。 `$(function() {})`- 这是`jQuery.ready`函数的简写。使用它，您可以保证该函数内的代码将在页面准备好使用时执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:24:57.053

而不是首先将其创建为字符串然后尝试评估该字符串，您可以简单地创建一个函数值（函数在 JS 中也是对象）

所以而不是

```
var functionCall = 'DoSomething(4);';
$('#detailCell1').click(eval(functionCall)); 
```

做

```
$('#detailCell1').click(function(e){DoSomething(4);}); 
```

这会为每次点击创建一个新函数。（在您的情况下，您可以省略 e 参数，它只是为了进行任何需要它更容易的更改

如果你有一组要传递的参数，你可以创建一个工厂方法

```
var doSomethingFactory = function(num){
    return function(e) { DoSomething(num);};
}
$('#detailCell1').click(doSomethingFactory(4)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:32:53.407

根据我的理解，您必须使用不同的参数调用不同的函数。为此，您正在生成字符串并尝试使用 eval() 函数调用这些函数。让我们按如下方式进行。

1.只需将这些函数调用字符串作为数组传递，这样在加载您的 javascript 代码时如下所示，

```
var functioncalls = ['DoSomething(1)','DoSomethingMore(1,2)','DoDifferent("hello world")']; 
```

2.然后在javascript中循环你的函数调用数组并将它们分配给不同的点击事件，为了避免复杂性，我假设你的选择器是#detailCell0、#detailCell1、#detailCell2等等。然后你的代码如下所示，

```
$(function(){
      functioncalls.forEach(function(functioncall,index){
          $("detailCell"+index).click(function(){ 
                eval(functioncall);
           })
      });
    }) 
```

注意：有很多方法可以做到这一点。

# django - AWS 芹菜和数据库

> ID：14520390
> 
> 赞同：0
> 
> 时间：2013-01-25T10:58:13.690
> 
> 标签：django, amazon-web-services, amazon-simpledb, django-celery

我正在编写一个在 AWS 上运行的 webapp。我的应用程序要求用户上传他们的 pdf 文件。我将使用 linux 中的“转换”实用程序将它们转换为图像。这是我在 Ubuntu 12.04 上的设置：

*   姜戈
*   芹菜
*   姜芹菜
*   博托

我使用 apache 作为我的网络服务器。

工作流程如下：三个是三个异步任务和两个用于处理所有处理的队列，以及用于存储输入和输出文件的 S3。用户上传pdf然后：

1.  调用accept_file_task：此任务获取用户上传的pdf并将其存储在我的S3存储中，然后将消息插入到input_queue（SQS）

2.  check_queue_and_launch_instance_task：一个周期性任务，持续监控 input_queue 中的消息数量，并在队列中的消息多于 Ec2 实例数时启动实例

3.  这些实例有一个引导脚本，它是一个 while True: 循环。任何实例都可以从 input_queue 中选择消息并执行 Subprocess.Popen("convert "+input+ouput) 并将处理后的声明写入 output_queue 并将生成的图像上传到 S3 输出存储桶中并使其可作为下载关联

4.  output_process_task：另一个周期性任务，它不断轮询 output_queue，只要有消息可用，它就会更新下表中的状态。

我正在使用一个名为 Document 的模型来存储所有状态信息。我也有用户注册，因此有一个表来存储所有用户信息。Celery 还创建了很多表来存储它的所有任务信息。现在我在该实例上使用单个实例和 sqlite3 数据库（python 附带）。

我不确定以下事情

1.  如何扩展数据库？我应该选择 RDS 还是 simpleDB 或 AmazonDB。如果不是 celery，我可以很容易地使用 simpleDB。我真的坚持这个

2.  如何摆脱两个周期性任务 check_queue_and_launch_instance_task 和 output_process_task。我的想法是必须以某种方式使用 Autoscaling，以便在以后需要时可以使用 Elastic Load Balancer。

如果你们中的任何人设计了类似的东西，请帮助我如何去做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:13:17.207

> 如何扩展数据库？我应该选择 RDS 还是 simpleDB 或 AmazonDB。如果不是 celery，我可以很容易地使用 simpleDB。我真的坚持这个

请记住，过早的优化是万恶之源。RDS（实际上只是 MySQL、Oracle 或 MS SQL）与 SimpleDB 的问题更多的是应用程序设计决策，而不是基于可扩展性的决策。SimpleDB 只是一个简单的键值存储。另一方面，RDS 将为您提供完整的[ACID](http://en.wikipedia.org/wiki/ACID)功能。如果您的数据是[关系型](http://en.wikipedia.org/wiki/Relational_model)的，那么您应该使用关系型数据库。如果你只需要一个地方来存储简单的字符串或整数，那么像 SimpleDB 这样的东西会更有意义。

> 现在我在该实例上使用单个实例和 sqlite3 数据库（python 附带）。

确保您了解 a) 在设计中创建单点故障和 b) SQLite 与在此应用程序中使用独立 RDBMS 相比的局限性。（您可以使用它，但它[实际上是](http://www.sqlite.org/whentouse.html)为单用户应用程序设计的）。

> 如何摆脱两个周期性任务 check_queue_and_launch_instance_task 和 output_process_task。我的想法是必须以某种方式使用 Autoscaling，以便在以后需要时可以使用 Elastic Load Balancer。

如果您愿意将 Celery 替换为 SQS，您可以将[SQS + SNS + Cloudwatch](http://aws.typepad.com/aws/2011/07/additional-cloudwatch-metrics-for-amazon-sqs-and-amazon-sns.html)结合在一起，以简化应用程序的这一部分。尽管您正在做的事情听起来不错，尤其是在它已经运行良好的情况下。你的时间可能最好花在解决你面前的问题上，而不是那些可能在路上发生的问题。

# c# - 如何使用 powerpoint 插件隐藏缩略图窗格

> ID：14520391
> 
> 赞同：0
> 
> 时间：2013-01-25T10:58:17.987
> 
> 标签：c#, add-in, powerpoint

我想问一个简单的问题：如何在左侧隐藏缩略图窗格？

见图片：http: [//goo.gl/YjXk5](http://goo.gl/YjXk5)

我读过这个：http: [//msdn.microsoft.com/en-us/library/vstudio/bf08984t.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bf08984t.aspx)

这似乎是不可能的，但我想知道是否有其他方法......

我也在开发 PowerPoint 2013 而不是 2010 或 2007，我注意到在缩略图窗格中的 PPT 2013 中，它不像以前的版本那样有“X”关闭按钮......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:25:58.663

```
ActiveWindow.ViewType = ppViewSlide 
```

如果您从另一个应用程序自动化，ppViewSlide 是一个 PPT 应用程序常量，VBA Long = 1

# c++ - 指向向量的指针：大小在函数中是正确的，但在调用者中为 0

> ID：14520394
> 
> 赞同：2
> 
> 时间：2013-01-25T10:58:37.023
> 
> 标签：c++, visual-c++, pointers, vector

我有一个简单的函数，我简化为只返回一个虚拟列表（以确保它不是一些逻辑错误）

```
vector<AttrValue>* QueryEvaluator::getCandidateList(...) {
    ...
    values.clear();
    values.push_back(2);
    values.push_back(3);
    cout << "values is of size " << values.size() << endl;
    return &values;
} 
```

然后在 cppunit 测试中：

```
vector<AttrValue>* candidateList0 = evaluator->getCandidateList(cl, 0);
cout << candidateList0->size() << endl; 
```

但问题是`size()`，在测试中，即使`cout`消息打印正确的大小 2，它也始终为 0。可能有什么问题？

我尝试了一个简单的程序，它似乎很好......

```
#include <iostream>
#include <vector>
using namespace std;

vector<int>* test() {
    vector<int> vec { 2, 3, 6, 1, 2, 3 };
    return &vec;
}

int main() {
    cout << test()->size() << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:00:25.297

您正在从函数返回一个临时地址`getCandidateList`，该对象在函数返回时释放。访问它是未定义的行为。您可以只返回向量，[RVO](http://en.wikipedia.org/wiki/Return_value_optimization)应该来应用并删除副本：

尝试：

```
std::vector<AttrValue> QueryEvaluator::getCandidateList(...) 
{
  //blah
  return values; 
} 
```

> 我尝试了一个简单的程序，它似乎很好......

getCandidateList 函数返回时释放临时向量。该程序具有未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:00:05.400

您的向量似乎是在堆栈上声明的，因此当它超出范围时（函数退出时）将被销毁。如果要返回指向向量的指针，请将其分配在堆上

```
vector<AttrValue>* QueryEvaluator::getCandidateList(...) {
    vector<AttrValue>* values = new vector<AttrValue>();
    ...
    values->clear();
    values->push_back(2);
    values->push_back(3);
    cout << "values is of size " << values->size() << endl;
    return values;
} 
```

相反，在调用者中声明它并将引用传递给`getCandidateList`

```
void QueryEvaluator::getCandidateList(vector<AttrValue>& values) 
```

...或按值返回

```
vector<AttrValue> QueryEvaluator::getCandidateList(...) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:21:23.773

这么多有趣的事情要考虑：

```
vector<AttrValue>* QueryEvaluator::getCandidateList(...) {
    ...
    values.clear();
    values.push_back(2);
    values.push_back(3);
    cout << "values is of size " << values.size() << endl;
    return &values;
} 
```

所以看起来你遗漏了代码中最有趣的部分**......**上面。故事的道德尝试并提供显示错误的可编译工作代码。将您的问题简化为一个小例子通常会导致您自己找到问题。至少您应该提供所有使用的对象的准确定义（类型是 C++ 中最重要的东西）

它是否将向量声明为本地对象？

```
 std::vector<int>  values; 
```

在这种情况下，向量的生命周期与函数绑定，并在函数结束时被销毁。这意味着在函数返回后使用它是未定义的行为（任何事情都可能发生）。

但看起来您正在使用对象作为单元测试框架的一部分。所以一个潜在的解决方案是使矢量成为对象的一部分。然后向量将与对象（不仅仅是函数调用）一样长，因此返回指向它的指针将按预期工作。

```
 class  QueryEvaluator
 {
     std::vector<int>   values;
     public:
         vector<AttrValue>* QueryEvaluator::getCandidateList(...);
 }; 
```

另一种方法是按值而不是指针返回向量。这意味着对象将被正确地复制出函数，并且您的调用代码可以操作和测试所需的所有向量。

```
vector<AttrValue> QueryEvaluator::getCandidateList(...)
{
    ...
    return &values;
} 
```

### 边注：

Also you need to try not to use pointers in your code. Pointers doe not convey any ownership.This means we do not know who is responsible for deleting the object. In this case a reference would probably have been better (you never return NULL) as this gives the caller access to the object will retaining ownership (assuming you decided not to return by value).

# php - 基于 ssl 的用户登录系统 cookie

> ID：14520399
> 
> 赞同：0
> 
> 时间：2013-01-25T10:59:04.930
> 
> 标签：php, cookies, login, remember-me

我创建了用户登录系统并使用此功能启动会话

```
function sessionStart() {
    $session_name = 'sec_session_id'; // Set a custom session name
    $secure = false; // Set to true if using https.
    $httponly = true; // This stops javascript being able to access the session id. 

    ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies. 
    $cookieParams = session_get_cookie_params(); // Gets current cookies params.
    session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $cookieParams["domain"], $secure, $httponly); 
    session_name($session_name); // Sets the session name to the one set above.
    session_start(); // Start the php session
    session_regenerate_id(true); // regenerated the session, delete the old one. 
} 
```

我使用会话 cookie，正如您在上面提到的功能中看到的那样，我将此会话存储在 memcached 中以增强我的操作。现在我需要创建一个 cookie，将用户数据存储在其中。例如，我需要用户 ID，然后我存储像这样的cookie中的用户ID

```
setcookie('userid','1234',time()+240000) 
```

之后我需要用户密码和用户名以防用户保持登录状态。但我知道我不应该将密码保存在 cookie 中。如果在我们的服务器因使用 memcache 而崩溃时不将密码保存在 cookie 中，我们将丢失所有用户 session.am我对吗？那么我应该如何让用户保持登录状态。请解释一下。无需费心编写代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T20:13:48.850

我建议您将客户端登录数据保存在 SQL 数据库中，并为 SQL 行提供一个随机盐 + 散列，然后将该散列分配给 cookie。然后你每次都从数据库中获取信息。

# c# - 获得 div 的“内部 html”的更好选择？

> ID：14520405
> 
> 赞同：0
> 
> 时间：2013-01-25T10:59:34.937
> 
> 标签：c#, html, regex, string, innerhtml

我有一个字符串：

```
<div class="className1234"><p>Some html</p></div> 
```

从这个字符串中，我想得到，`<p>Some html</p>`即我想删除周围的 div 标签，因为它的类包含'className'。

**我试过的**

我尝试过的工作，但它很笨拙 - 我知道会有更好的选择，比如正则表达式或其他东西。我目前所做的是链接一系列`substring()`,`indexof()`并`replace()`调用以去除 div。

编辑：我使用了“innerhtml”这个短语，因为我想在某个地方有一个库可以让我根据其中的标签来操作字符串。

**请注意：这里不涉及 JQuery。这都是服务器端 C#。** （见标签）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:04:45.850

我建议[Html Agility Pack](http://htmlagilitypack.codeplex.com/)，它旨在允许对 html 文档进行操作，有点像框架中对 XML 的内置支持。

这可能有点矫枉过正，但它可以轻松完成工作，而且您不必关心糟糕的 html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:02:33.203

怎么样：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(divStr);
// classAtr will be null if the root is not a div with a class with the value className1234
XmlNode classAtr = doc.SelectSingleNode("/div/@class[contains(., 'className1234')]");
string result = classAtr != null ? doc.DocumentElement.InnerXml : divStr; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T11:04:56.807

每当您需要操作 HTML 时，都应该使用专用的 HTML 解析器/DOM 库。我在 StackOverflow 上为 .Net 推荐的一个库是[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:11:33.417

正如其他人所说，HtmlAgilityPack 是 html 解析的最佳选择，还请务必从 HtmlAgilityPack 站点下载 HAP Explorer，用它来测试您的选择，无论如何这个 SelectNode 命令将得到：

```
 HtmlDocument doc = new HtmlDocument();
  doc.Load(htmlFile);
  var myNodes = doc.DocumentNode.SelectNodes("/div/@class[. = 'className1234']");
  foreach (HtmlNode node in myNodes)
  {
    // you code

  } 
```

# java - 如何将指针 ref 传递给 JNI 中的本机方法

> ID：14520406
> 
> 赞同：0
> 
> 时间：2013-01-25T10:59:43.007
> 
> 标签：java, dll, java-native-interface, jna

> **可能重复：**
> [无法通过从 ITLSSPProc.dll 调用本机方法来打开端口](https://stackoverflow.com/questions/14521284/unable-to-open-the-port-by-calling-native-method-from-itlsspproc-dll)

我正在`ITLSSPProc.dll`使用具有功能的 JNI 调用函数`OpenSSPComPort(Pointer param);`

该指针 ref 指向内存中的*波特率*和 *端口*号，这是我尝试过但无法打开端口的代码。

```
public class Main {
    public interface ITLSSPProc extends Library {
        ITLSSPProc INSTANCE = (ITLSSPProc) 
            Native.loadLibrary((Platform.isWindows() 
                                    ? "ITLSSPProc" 
                                    : "simpleDLLWindowsPort"), 
                                ITLSSPProc.class);

        int OpenSSPComPort(Pointer param); 
        int CloseSSPComPort(Pointer param);                            
    }

    public static void main(String[] args)throws IOException {
        ITLSSPProc sdll = ITLSSPProc.INSTANCE;
        Memory intMem = new Memory(10);  // allocating space
        intMem.setLong(0,9600);
        intMem.setString(1,"com7");

        Pointer intPointer = intMem.getPointer(0);

        if(sdll.OpenSSPComPort(intMem)==1)
        {
            System.out.println("connected");
        }
        else
        {

        }
    }
} 
```

# android - 将 createDocument( ...) 与 Alfresco Mobile SDK for Android 一起使用，如何从文件中获取 ContentFile？

> ID：14520407
> 
> 赞同：2
> 
> 时间：2013-01-25T10:59:44.643
> 
> 标签：android, upload, alfresco

我正在尝试在**Alfresco的***存储库*中上传文件。

 **我正在使用适用于**Android**的 Alfresco Mobile SDK，该 SDK 有据可查且易于使用。

问题是我没有找到如何`ContentFile`从文件（我要上传的文件）创建对象，以便使用该方法：

```
public Document createDocument(Folder folder, String nameFile,
Map<String,Serializable> properties, ContentFile contentFile) 
```

（这种方法效果很好，我可以创建一个没有内容的文件）。

我很确定这没什么大不了的，但我环顾四周，并没有设法找到我需要的东西。在此先感谢您的帮助。

```
ServiceRegistry serviceRegistry = Login.session.getServiceRegistry();
DocumentFolderService documentFolderService = 
    serviceRegistry.getDocumentFolderService();
Folder folder = (Folder) 
    documentFolderService.getNodeByIdentifier(repository.getIdentifier());

Map<String,Serializable> properties = new HashMap<String,Serializable>();

// here I would like to take the content from the fileFrom:
ContentFile contentFile = null; 

// fileFrom is a File object:
String nameFile = fileFrom.getName(); 

documentFolderService.createDocument(folder, nameFile, properties, contentFile); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T11:03:30.880

你应该使用这个[`ContentFileImpl`](http://dev.alfresco.com/resource/mobileSDK/Android/org/alfresco/mobile/android/api/model/impl/ContentFileImpl.html)类：

```
//...
String location = "..."; // wherever you have to point to
ContentFile contentFile = new ContentFileImpl(new File(location));
//... 
```**

# xampp - 将 xampp 使用的端口分配给 wamp

> ID：14520410
> 
> 赞同：0
> 
> 时间：2013-01-25T10:59:56.223
> 
> 标签：xampp, localhost, port, wamp

我在我的 PC 上安装了 WAMP 软件用于 Web 开发。当我尝试访问时，`localhost`我收到一条消息，告诉我 XAMPP 正在使用它。我知道我可以通过将 WAMP 使用的端口更改为其他端口号`httpd.config`。

但是有什么方法可以阻止 XAMPP 使用端口 80，并让 WAMP 使用它？

请记住，当前未安装 XAMP，有人以前安装过它，然后将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:07:19.903

检查[使用端口 80 停止系统进程](http://teocomi.com/stop-system-process-using-port-80-how-to/)以解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:19:34.887

尝试更改[xampp 服务器端口](http://veerasundar.com/blog/2009/07/how-to-change-xampp-server-port/)。

# android - 动态生成图片的Android布局

> ID：14520417
> 
> 赞同：0
> 
> 时间：2013-01-25T11:00:29.507
> 
> 标签：android, layout, dynamic, graphic

我知道可以有一个混合了非图形元素（如按钮）和图形元素（图像）的布局，但是有没有一种方法可以将非图形元素与动态创建/更改的图形元素结合起来？

例如：我想要一个带有一些按钮和一张图片（Image）的布局，但是图片是一个动态生成的图形，所以我需要能够在图片上绘画。那可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:16:16.017

您可以创建自定义视图并添加到您的布局中，请参阅此[http://developer.android.com/training/custom-views/index.html](http://developer.android.com/training/custom-views/index.html)

# java - JComboBox 显示值

> ID：14520425
> 
> 赞同：0
> 
> 时间：2013-01-25T11:00:44.860
> 
> 标签：java, swing, jcombobox

在组件方面需要帮助`JComboBox`。我已经从 MySQL 数据库加载数据并将这些数据写入组合。我使用四个组合框和`ItemListener`. 当一个组合框更改所有子组合框时，会从数据库重新加载数据。第一个和第二个工作正常，但第三个和第四个不显示价值正常，但有很好的价值。只是我不表现出来。当我在组合框中选择空字段之后，我看到了很好的结果。

源代码：

```
public class Vyhladat extends Okno {
    private static final long serialVersionUID = 1L;
    JComboBox nominalBOX,statBOX,podpisBOX,tlacDoskaBOX;
    Font sherif = new Font("Sherif",Font.BOLD,20);
    Font normal = new Font("Sherif",Font.PLAIN,20);
    JFrame uh = new JFrame();
            private String adresa="jdbc:mysql://localhost:3306/jarodb";
    private String meno="JKARAK";
    private String heslo="bankovka";
    String nominal,stat,podpis,tlacDoska,statH;
    private String nominalSQL = "SELECT DISTINCT(nominal) FROM prehlad";
    private String statSQL = "SELECT DISTINCT(concat(stat,'/',seria)) FROM prehlad WHERE nominal=? ORDER BY stat";
    private String podpisSQL = "SELECT DISTINCT(podpis) FROM prehlad WHERE nominal=? AND stat=? ";
    private String tlacDoskaSQL = "SELECT DISTINCT(doska) FROM prehlad WHERE nominal=? AND stat=? AND podpis=? ";

    Vector nominalV=new Vector();
    Vector statV=new Vector();
    Vector podpisV=new Vector();
    Vector tlacDoskaV=new Vector();

    Vyhladat()
    {

        vlozPopis(nominalLAB,"NOMIN\u00C1L EUROBANKOVKY:   ",0,0,sherif);
        vlozPopis(statLAB,"\u0160T\u00C1T/S\u00C9RIA:",0,1,sherif);
        vlozPopis(podpisLAB,"PODPIS:",0,2,sherif);
        vlozPopis(tlacDoskaLAB,"TLA\u010COV\u00C1 DOSKA:",0,3,sherif);

        gbc.gridx=1;
        gbc.gridy=0;
        nacitajVyber(nominalSQL,nominalBOX,nominalV,false,false,false);
        nominalBOX = new JComboBox(nominalV);

        nominalBOX.addItemListener(new ItemListener()
        {
            public void itemStateChanged(ItemEvent e) 
            {
                nominal = (String)nominalBOX.getSelectedItem();

                if(nominal!=" ")
                {
                    nacitajVyber(statSQL,statBOX,statV,true,false,false);
                }
                else{
                    statBOX.removeAllItems();
                    podpisBOX.removeAllItems();
                    tlacDoskaBOX.removeAllItems();
                    }
            }   
        });
        nominalBOX.setPrototypeDisplayValue("500");
        nominalBOX.setFont(normal);
        nominalBOX.setSelectedIndex(0);
        nominalBOX.setToolTipText("Vyber z mo\u017Enost\u00ED nomin\u00E1lu bankoviek 5,10,20,50.");
        add(nominalBOX,gbc);

        gbc.gridx=1;
        gbc.gridy=1;
        statV.add(" ");
        statBOX= new JComboBox(statV);
        statBOX.addItemListener(new ItemListener()
        {
            public void itemStateChanged(ItemEvent e) 
            {
                stat = (String)statBOX.getSelectedItem();

                if(stat!=null)
                {
                    String [] statM= stat.split("/");
                    statH = statM[0];
                }

                if(stat!=" " & stat!=null)
                {
                    nacitajVyber(podpisSQL,podpisBOX,podpisV,false,true,false);
                }
                else{
                  podpisBOX.removeAllItems();
                  tlacDoskaBOX.removeAllItems();
                    }
            }   
        });
        statBOX.setPrototypeDisplayValue("Portugalsko/E");
        statBOX.setFont(normal);
        statBOX.setSelectedIndex(0);
        statBOX.setToolTipText("Vyber z mo\u017Enost\u00ED \u0161t\u00E1t/s\u00E9riu.");
        add(statBOX,gbc);

        gbc.gridx=1;
        gbc.gridy=2;
        podpisV.add(" ");
        podpisBOX = new JComboBox(podpisV);
        podpisBOX.addItemListener(new ItemListener()
        {
            public void itemStateChanged(ItemEvent e) 
            {
                podpis = (String)podpisBOX.getSelectedItem();

                if(podpis!=" " & podpis!=null)
                {
                    nacitajVyber(tlacDoskaSQL,tlacDoskaBOX,tlacDoskaV,false,false,true);
                }
                else{
                  tlacDoskaBOX.removeAllItems();
                    }
            }   
        });
        podpisBOX.setPrototypeDisplayValue("Jean-Claude Trichet ");
        podpisBOX.setFont(normal);
        podpisBOX.setSelectedIndex(0);
        podpisBOX.setToolTipText("Vyber z mo\u017Enost\u00ED troch podpisov.");
        add(podpisBOX,gbc);

        gbc.gridx=1;
        gbc.gridy=3;
        tlacDoskaV.add(" ");
        tlacDoskaBOX = new JComboBox(tlacDoskaV);

        tlacDoskaBOX.addItemListener(new ItemListener()
        {
            public void itemStateChanged(ItemEvent e) 
            {
                tlacDoska = (String)tlacDoskaBOX.getSelectedItem();

                if((nominal!=" " & nominal!=null) & (statH!=" " & statH!=null) & (podpis!=" " & podpis!=null) & (tlacDoska!=" " & tlacDoska!=null))
                {
                    zobraz.setEnabled(true);
                }

            }   
        });
        tlacDoskaBOX.setPrototypeDisplayValue("E010");
        tlacDoskaBOX.setFont(normal);
        tlacDoskaBOX.setSelectedIndex(0);
        tlacDoskaBOX.setToolTipText("Vyber z mo\u017Enost\u00ED tla\u010Dov\u00FDch dosiek.");
        add(tlacDoskaBOX,gbc);
}
private void nacitajVyber(String sqlDotaz, JComboBox chr,Vector v,
        boolean jedna,boolean dva, boolean tri)
{
    try
    {
        Class.forName("com.mysql.jdbc.Driver");
        Connection conn = DriverManager.getConnection(adresa,meno,heslo);
        PreparedStatement stmt = conn.prepareStatement(sqlDotaz);
        if(jedna==true)
            {
            chr.removeAllItems();
        stmt.setString(1, nominal);
        }
        if(dva==true)
        {
                    chr.removeAllItems();
            stmt.setString(1, nominal);
            stmt.setString(2, statH);
        }
        if(tri==true)
        {
                    chr.removeAllItems();
            stmt.setString(1, nominal);
            stmt.setString(2, statH);
            stmt.setString(3, podpis);
        }

        ResultSet rs = stmt.executeQuery();
           v.addElement(" ");
            while (rs.next())
                {v.addElement(rs.getString(1).trim());
            System.out.println(rs.getString(1));}

        validate();
        rs.close();
        stmt.close();
        conn.close();
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(uh,e.toString(),
                "Chyba pripojenia",
                JOptionPane.ERROR_MESSAGE);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:28:52.257

*   JComboBox 不知道以某种方式更改了底层 Vector，必须即时为 JComboBox 重新初始化此数组，但这是错误的方式，

*   对于运行时的任何更改，以使用[XxxComboBoxModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/ComboBoxModel.html)存储[JComboBox 的项目](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

*   对于 JDBC 或 FileIO 可能存在并发问题，所有更新所需的 Swing JComponents（在本例中为 JComboBox 及其 XxxComboBoxModel）[必须在 EDT 上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

*   `Database`从`Runnable#Thread`or调用事件`SwingWorker`，将这个（可能）困难且长时间运行的任务重定向到`Workers Thread`，否则 Swing GUI 将冻结或无响应（对于鼠标和按键事件）直到 JDBC 结束

*   [`SwingWorker`s 方法 publish()、process() 和 done()](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)很好地保证了所有输出都将在 EDT 上完成

例如

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class ComboBoxTwo extends JFrame implements ActionListener, ItemListener {

    private static final long serialVersionUID = 1L;
    private JComboBox mainComboBox;
    private JComboBox subComboBox;
    private Hashtable<Object, Object> subItems = new Hashtable<Object, Object>();

    public ComboBoxTwo() {
        String[] items = {"Select Item", "Color", "Shape", "Fruit"};
        mainComboBox = new JComboBox(items);
        mainComboBox.addActionListener(this);
        mainComboBox.addItemListener(this);
        //prevent action events from being fired when the up/down arrow keys are used
        //mainComboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
        getContentPane().add(mainComboBox, BorderLayout.WEST);
        subComboBox = new JComboBox();//  Create sub combo box with multiple models
        subComboBox.setPrototypeDisplayValue("XXXXXXXXXX"); // JDK1.4
        subComboBox.addItemListener(this);
        getContentPane().add(subComboBox, BorderLayout.EAST);
        String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
        subItems.put(items[1], subItems1);
        String[] subItems2 = {"Select Shape", "Circle", "Square", "Triangle"};
        subItems.put(items[2], subItems2);
        String[] subItems3 = {"Select Fruit", "Apple", "Orange", "Banana"};
        subItems.put(items[3], subItems3);
//      mainComboBox.setSelectedIndex(1);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String item = (String) mainComboBox.getSelectedItem();
        Object o = subItems.get(item);
        if (o == null) {
            subComboBox.setModel(new DefaultComboBoxModel());
        } else {
            subComboBox.setModel(new DefaultComboBoxModel((String[]) o));
        }
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            if (e.getSource() == mainComboBox) {
                if (mainComboBox.getSelectedIndex() != 0) {
                    FirstDialog firstDialog = new FirstDialog(ComboBoxTwo.this,
                            mainComboBox.getSelectedItem().toString(), "Please wait,  Searching for ..... ");
                }
            } 
        }
    }

    private class FirstDialog extends JDialog { //sipmle simulation of JDBC events, by using Swing Timer

        private static final long serialVersionUID = 1L;

        FirstDialog(final Frame parent, String winTitle, String msgString) {
            super(parent, winTitle);
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            JLabel myLabel = new JLabel(msgString);
            JButton bNext = new JButton("Stop Processes");
            add(myLabel, BorderLayout.CENTER);
            add(bNext, BorderLayout.SOUTH);
            bNext.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    setVisible(false);
                }
            });
            javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    setVisible(false);
                }
            });
            t.setRepeats(false);
            t.start();
            setLocationRelativeTo(parent);
            setSize(new Dimension(400, 100));
            setVisible(true);
        }
    }

    public static void main(String[] args) {
        JFrame frame = new ComboBoxTwo();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:24:11.283

GUI 可能无法正确重绘。您正在 Event Dispatch Thread 上进行所有艰苦的工作。该线程调用您的 itemStateChanged。但是这个线程也负责重绘 GUI。您正在阻止它这样做，因为您正在让它在数据库中完成您的辛勤工作。

相反，您可以使用不同的线程来完成您的艰苦工作。

```
    公共无效 itemStateChanged(ItemEvent e)
    {
        新线程（新可运行（）{
            公共无效运行（）{
                ....你的代码...
            }
        }）。开始（）;
    }

```

或者看看 SwingWorker，它以更好的方式做到了这一点。

此外，每次选择都可以调用 itemStateChanged 两次 - 这可能会给您带来问题。使用“e.getStateChange()”检查您刚刚收到的事件类型。您应该收到一个选中的和未选中的（来自旧项目）。

# tomcat7 - SOLR 4.1 内存不足错误提交数千个 Solr 文档后

> ID：14520428
> 
> 赞同：1
> 
> 时间：2013-01-25T11:00:49.510
> 
> 标签：tomcat7, java-7, solr4

我们正在使用以下选项测试在 tomcat 7 和 java 7 中运行的 solr 4.1

JAVA_OPTS="-Xms256m -Xmx2048m -XX:MaxPermSize=1024m -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode -XX:+ParallelRefProcEnabled -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/ubuntu/OOM_HeapDump"

我们的源代码如下所示：

```
/**** START *****/
int noOfSolrDocumentsInBatch = 0;
for(int i=0 ; i<5000 ; i++) {
    SolrInputDocument solrInputDocument = getNextSolrInputDocument();
    server.add(solrInputDocument);
    noOfSolrDocumentsInBatch += 1;
    if(noOfSolrDocumentsInBatch == 10) {
        server.commit();
        noOfSolrDocumentsInBatch = 0;
    }
}
/**** END *****/ 
```

“getNextSolrInputDocument()”方法生成一个包含 100 个字段（平均）的 solr 文档。大约 50 个字段属于“text_general”类型。一些“test_general”字段由大约 1000 个单词组成，其余由几个单词组成。在总字段中，大约有 35-40 个多值字段（不是“text_general”类型）。

我们正在索引所有字段，但仅存储 8 个字段。在这 8 个字段中，两个是字符串类型，五个是长字段，一个是布尔值。所以我们的索引大小只有 394 MB。但是 OOM 时占用的 RAM 大约是 2.5 GB。为什么即使索引大小很小，内存也如此之高？内存中存储的是什么？我们的理解是，每次提交后，文档都会刷新到磁盘。因此，提交后不应在 RAM 中保留任何内容。

我们正在使用以下设置：

```
server.commit() set waitForSearcher=true and waitForFlush=true
solrConfig.xml has following properties set:
directoryFactory = solr.MMapDirectoryFactory
maxWarmingSearchers = 1
text_general data type is being used as supplied in the schema.xml with the solr setup.
maxIndexingThreads = 8(default)
<autoCommit>
    <maxTime>15000</maxTime>
    <openSearcher>false</openSearcher>
</autoCommit> 
```

在提交大约 3990 个 solr 文档后，我们得到 Java heap Out Of Memory Error。一些来自分析器的内存转储快照已上传到以下链接。
[http://s9.postimage.org/w7589t9e7/memorydump1.png](http://s9.postimage.org/w7589t9e7/memorydump1.png)
[http://s7.postimage.org/p3abs6nuj/memorydump2.png](http://s7.postimage.org/p3abs6nuj/memorydump2.png)

有人可以建议我们应该做些什么来最小化/优化我们案例中的内存消耗，原因是什么？还建议遵循 solrConfig.xml 参数的最佳值和原因

# mysql - 选择日期范围之外的一行（与 BETWEEN 语句相反）

> ID：14520429
> 
> 赞同：0
> 
> 时间：2013-01-25T11:00:54.137
> 
> 标签：mysql

我想，我需要 mysql 的 BETWEEN 函数的反面。我有一个给定的日期（例如'2013-09-14'）和一个充满日期范围的mysql表，例如：

```
date_from  | date_to    | someotherdata  
2013-08-07 | 2013-08-29 | ...  
2013-09-13 | 2013-09-16 | ...  
2013-09-21 | 2013-09-27 | ... 
```

（这是给定的，我不能改变结构）

我想选择所有条目，我给定的日期在 date_from 和 date_to 之间，但这不适用于 BETWEEN :(

有什么好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:02:15.873

你可以`between`这样使用：

```
select * from your_table
where '2013-01-25' between date_from and date_to 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/11bbc/2)

之前不需要列名`between`。它也可以是静态日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:02:24.673

怎么样：

```
select * 
  from your_table
 where not '2013-09-14' between date_from and date_to; 
```

# javascript - 每次通过增加 DOM 计数

> ID：14520431
> 
> 赞同：1
> 
> 时间：2013-01-25T11:01:02.620
> 
> 标签：javascript, jquery, count

我希望实现的是增加计数，然后在每次通过使用 each() 时将其附加到 DOM。我现在拥有的是最后添加的最终计数。例如。

假设我有 100 个 div，每次通过它时都应该添加新的计数，例如 1,2,3,4,5,6,7... 等等。但目前它计算所有对象并在最后附加 100。请有人能指出我出错的方向吗？

我已经添加了一个非常基本的版本，我希望在下面实现......这里也是一个[JSbin](http://jsbin.com/eronel/1/edit)（我尝试了 jsfiddle，但它似乎对我来说已经失败了）。

```
$(".toCount").each(function(i){
    $("#count").text(i + 1);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:04:29.890

使用[追加（）](http://api.jquery.com/append/)；

> 将参数指定的内容插入到匹配元素集中每个元素的末尾。

在你的情况下`text()`是替换你的 div 的文本，所以你最后得到 100 ..

```
 $("#count").append(i + 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:05:51.550

使用附加

```
$("#count").append(i + 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:09:14.700

```
$('input').on('click',function () {
  var len = $(".toCount").length;
  var arr = [];
  for (var i = 0; i < len; i++ ) {
     arr.push(i+1);
  }
  $('#count').text(arr.join());
}); 
```

我不知道您所说的 1、2、3 ... 是什么意思，如果您想逐步计算元素，您可以使用`setInterval`函数：

```
$('input').on('click',function () {
  var l = $(".toCount").length,
      $c = $('#count'),
      i = 0;
  var t = setInterval(function() {
       i++;
       $c.text(i);
       if (i === l) clearInterval(t);
  }, 10);  
}); 
```

[http://jsbin.com/eronel/17/edit](http://jsbin.com/eronel/17/edit)

# wpf - WPF 的 PivotViewer 替代品

> ID：14520441
> 
> 赞同：2
> 
> 时间：2013-01-25T11:01:46.787
> 
> 标签：wpf, pivotviewer

是否有任何 WPF 控件可以像[Silverlight 的 PivotViewer](http://www.microsoft.com/silverlight/pivotviewer/)一样工作，是免费的还是商业的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:20:07.827

不幸的是没有。但是，可以在 CodePlex 上找到 HTML5 版本：http: [//lobsterpothtml5pv.codeplex.com/](http://lobsterpothtml5pv.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-08T08:26:57.330

这里提到了 WPF PivotViewer 应用程序：[https](https://twitter.com/RickRat/status/21812745309528064) ://twitter.com/RickRat/status/21812745309528064 ，您可以从那里发布的链接下载一些基于 .net 的演示应用程序（.zip 中没有源代码，没有运行从程序集（DLL）判断似乎使用 MVVMLight 的应用程序）

您可以使用 WebBrowser 控件并在其中托管带有 PivotViewer 的 Silverlight。然后通过 Silverlight 的 HTML 桥与它对话

替代方法是在 WPF 应用程序中使用 HTML5 PivotViewer（再次通过 WebBrowser 控件）

确实有一个便携式版本的 PivotViewer 真是太好了，非常强大的工具（我在[http://gallery.clipflair.net](http://gallery.clipflair.net)使用它）

除了 LobsterPot 的 HTML5 PivotViewer 及其较旧的免费版本（请参阅[https://www.dropbox.com/sh/hrhtraih5gzqj9w/AAB2n18GAPWJW_hZVdz-tmW0a?dl=0](https://www.dropbox.com/sh/hrhtraih5gzqj9w/AAB2n18GAPWJW_hZVdz-tmW0a?dl=0)上的相关链接），对于另一个 HTML5 PivotViewer，您可以托管来自前 SeaDragon微软的团队成员，似乎工作得很好看”

[http://seajax.github.io/](http://seajax.github.io/)

[https://github.com/seajax/seajax/tree/master/v2/app/pivot](https://github.com/seajax/seajax/tree/master/v2/app/pivot)

[https://github.com/seajax/seajax/blob/master/v2/app/pivot/quickstart.html](https://github.com/seajax/seajax/blob/master/v2/app/pivot/quickstart.html)

[https://github.com/seajax/seajax](https://github.com/seajax/seajax)

请注意，WebBrowser 控件默认使用 IE7 或 HTML 引擎，您需要在 HTML 顶部添加一些元标记来告诉它使用 Edge 模式 - 已安装的最新 IE 引擎）

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# html - 检测来自目标 c 的复选框答案

> ID：14520447
> 
> 赞同：0
> 
> 时间：2013-01-25T11:02:08.833
> 
> 标签：html, checkbox, uiwebview, radio-button

我有一个包含单选按钮组合框、复选框和输入框的 html。我在 uiwebview 上运行这个 html。我需要一种能够知道用户选择了哪个答案的方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:40:35.887

如果有人遇到同样的问题，我找到了解决方法，事实上，您需要在定义复选框的标签中添加运行以下内容的 html：

```
 onclick ="checkboxClicked()" 
```

例如：

```
 <input type="checkbox" id="checkboxid" onclick ="checkboxClicked()"/> 
```

一旦选中复选框，它将调用函数 checkboxClicked()。

您将在 JavaScript 文件中实现此功能，一旦您在 webview 上运行它，您将与您的 html 一起编译该文件。

# vbscript - 如何在使用 vbscript 启动机器时在远程机器上单击确定

> ID：14520453
> 
> 赞同：1
> 
> 时间：2013-01-25T11:02:23.993
> 
> 标签：vbscript, remote-debugging, remote-access, remote-desktop, qtp

我正在使用下面的 VBScript 成功连接到远程机器，但问题是它在 OK 按钮处停止。如果一旦我手动单击“确定”，则机器正在打开。

```
Set WshShell = WScript.CreateObject("WScript.Shell")

Set cloner = CreateObject("WScript.Shell")

cloner.run"mstsc"

'run remote desktop connection

WScript.Sleep 1000

cloner.SendKeys"DV01234"

cloner.SendKeys("{Enter}")

WScript.Sleep 1000

cloner.SendKeys"password"

cloner.SendKeys("{Enter}")

WScript.Sleep 1000

'cloner.run"cmd" 
```

任何人都可以帮助我如何通过使用 VB 脚本单击确定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:06:41.047

如果您使用的是 UFT 11.50（UFT 是 QTP 的新名称），您可以使用[Insight](http://h30499.www3.hp.com/t5/The-Future-of-Testing-Blog/A-guide-to-Image-Based-Testing-with-HP-UFT-s-Insight/ba-p/6355855)以使用基于图像的识别来识别**OK**按钮并单击它。

# django - djando 管理员不会登录，没有错误

> ID：14520457
> 
> 赞同：2
> 
> 时间：2013-01-25T11:02:37.100
> 
> 标签：django, django-admin

我正在制作一个非常简单的 Django 应用程序，但我无法让管理站点正常运行......

**症状**

*   url`.../admin/`显示了预期的登录表单
*   如果我错误地填写表格，我会收到相关的错误消息
*   如果我用超级用户的详细信息（通过 manage.py createsuperuser 创建）正确填写表格，则页面不会重定向或出现错误
*   使用外壳，我可以成功验证我尝试登录的用户
*   检查 auth_user 数据库表，is_staff、is_avctive 和 is_superuser 都设置为 1
*   如果我进入管理员登录并尝试登录，那么服务器控制台输出看起来很好：

    ```
    [25/Jan/2013 06:27:28] "GET /admin/ HTTP/1.1" 200 2028
    [25/Jan/2013 06:27:34] "POST /admin/ HTTP/1.1" 302 0
    [25/Jan/2013 06:27:34] "GET /admin/ HTTP/1.1" 200 2028 
    ```

**配置：**

在我的设置文件中，我有：

```
INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.admin', ...

MIDDLEWARE_CLASSES = (
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
) 
```

我没有改变默认的身份验证后端

在我的 url 配置中，我有：

```
from django.contrib import admin
admin.autodiscover()
.......
url(r'^admin/', include(admin.site.urls)), 
```

我正在运行 django 1.3.1 和 Python 2.7

**问题：**

我怎样才能解决这个问题？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:33:16.563

我的问题是 SESSION_COOKIE_SECURE 设置为 True。

谢谢大家的意见

# ember.js - 从 {{action}} 访问附加选项的问题

> ID：14520459
> 
> 赞同：0
> 
> 时间：2013-01-25T11:02:41.613
> 
> 标签：ember.js

在*pre4*中，我应该能够访问`{{action}}`. 例如本例中**field**的值：

```
{{action doSomething field="value" on="someEvent"}} 
```

如果我尝试检索`hash.field`，则不会返回任何内容。*没有应该*包含信息的变量（选项、上下文、哈希、视图）。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:50:17.937

> 在 pre4 中，我应该能够访问 {{action}} 中提供的其他参数

在 pre4 中是真的，您可以为`{{action}}`帮助程序指定附加参数。动作助手不希望这些参数出现在它的选项散列中。`field="value`像和的键值对`on="someEvent"`被解释为操作助手本身的选项，而不是传递给目标。

> 如果我尝试检索 hash.field，则不会返回任何内容。没有应该包含信息的变量，做（选项，上下文，哈希，视图）

在上面的示例中，您正在调用带有事件`doSomething`且没有参数的操作助手，因此没有设置任何内容是有道理的。尝试这样的事情：

{{action doSomething value on="someEvent"}}

# java - 如何在 Tomcat 中更新 java 类文件并节省正常运行时间

> ID：14520460
> 
> 赞同：0
> 
> 时间：2013-01-25T11:02:47.940
> 
> 标签：java, tomcat, jrebel

有没有办法在`Tomcat`不使用`Tomcat Manager`和`reloadable`节省正常运行时间的情况下更新 java 类文件？重新加载应用程序`Tomcat Manager`大约需要 15-30 秒，它会调用锁定的服务器。如何在 Tomcat 上快速更新大型应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:00:54.727

一些可能性

*   设置一个集群，在后台为多个服务器设置一个负载均衡器。对于更新，您从集群中删除一台服务器，升级，再次添加到集群。然后继续，直到完成所有服务器
*   使用[JRebel](http://zeroturnaround.com/software/jrebel/)（开发）或[LiveRebel](http://zeroturnaround.com/software/liverebel/)（生产系统）之类的产品。这使您能够为许多需要插件的用例在运行实例中热替换代码。这是一个商业选项（好吧，运行多台机器的集群也需要一些代价）

当然，您可以将这两种选择结合起来（我现在可能还没有想到更多）

这完全是关于您对正常运行时间、恢复时间等的要求的问题。当您这样做时：想想您的数据库和其他基础设施以及停机的可能原因。

# mysql - MySQL字符串搜索和where子句条件顺序

> ID：14520466
> 
> 赞同：0
> 
> 时间：2013-01-25T11:03:17.803
> 
> 标签：mysql, sql, string, fuzzy-search

我正在处理 db 中的大量行（MySQL，innoDb 引擎，大约 2000 万行），我需要执行很多模糊搜索。出于某些原因，我决定使用 jaro_winkler 算法，并且出于性能问题，我将其实现为 SQL 中的函数。应用程序是用 Python 编写的，我今天遇到了一个奇怪的情况：

比较这两个查询（从 mysql shell 调用，而不是通过 Orm 等）：

```
SELECT * FROM products WHERE jaro_winkler(code, '78-1747') > 0.7 AND code LIKE '%78%'; 
```

和

```
SELECT * FROM products WHERE code LIKE '%78%' AND jaro_winkler(code, '78-1747') > 0.7; 
```

我注意到第一个比第二个慢至少 10 倍。一开始这似乎是合乎逻辑的，但是当我检查 WHERE 中的条件顺序时，这并不重要。

所以我的问题 - 这是正常的行为吗？

是否有人（根据实际经验）可以推荐最佳算法或函数来执行模糊搜索？我知道 damerau-levenshtein 指标，但它比我目前的解决方案要慢。

编辑：使用说明后：

我非常快速地创建了示例数据库并使用了两个查询：

对于第一个查询：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1       SIMPLE      products        ALL     NULL    NULL    NULL    NULL    4166    Using where 
```

查询时间：~ 2 秒

解释第二个查询：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1       SIMPLE      products        ALL     NULL    NULL    NULL    NULL    4332    Using where 
```

查询时间：~ 0.1 秒

# c# - dirinfor.EnumerateFiles -> 错误

> ID：14520469
> 
> 赞同：1
> 
> 时间：2013-01-25T11:03:20.667
> 
> 标签：c#, linq

以下语句有错误，请帮助修复它。

```
 long siz = dirinfo.EnumerateFiles().Sum(file => file.length); 
```

> “System.IO.DirectoryInfo”不包含“EnumerateFiles”的定义，并且找不到接受“System.IO.DirectoryInfo”类型的第一个参数的扩展方法“EnumerateFiles”（您是否缺少 using 指令或程序集引用?)

是否需要任何名称空间？我已经把命名空间`System.IO`。

正如你们所有人所说，我更改了代码并

static long dirsize(DirectoryInfo dirinfo,bool includesubdir) { siz += dirinfo.GetFiles("*", SearchOption.AllDirectories).Sum(dire => dirsize(dire, true));

}

当我使用它时，它会给出一个错误，因为无法从 fileinfo 转换为 directoryinfo 。

我的问题是我会通过将 directoryinfo 更改为 fileinfo ...来获得一个特定的目录大小吗？可能吗...？请帮我解决它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:09:13.273

在 4.0 之前的 .Net Framework 中，您可以使用

```
long siz = dirinfo.GetFiles().Sum(file => file.Length); 
```

实际上在你的情况下没有区别。因为无论如何您都应该枚举所有文件以计算大小（EnumerateFiles 一个接一个地返回文件，GetFiles 返回所有文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:06:33.623

我假设您使用的框架版本低于 .NET 4。

[`DirectoryInfo.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd413232%28v=vs.100%29.aspx)与 .NET 4 一起添加。然后你可以使用[`DirectoryInfo.GetFiles`](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getfiles%28v=vs.71%29.aspx)它首先将所有内容加载到内存中，并且从 1.1 开始可用。

这里的另一种（未经测试的）方法：

[http://www.codeproject.com/Articles/12782/File-System-Enumerator-using-lazy-matching](http://www.codeproject.com/Articles/12782/File-System-Enumerator-using-lazy-matching)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:08:41.550

[`DirectoryInfo.EnumerateFiles()`](http://msdn.microsoft.com/en-us/library/dd413232%28v=vs.100%29.aspx)方法随 .NET 4.0 一起提供。

你应该下载[`.NET Framework 4.0`](http://www.microsoft.com/en-us/download/details.aspx?id=17851)版本。

尝试使用[`DirectoryInfo.GetFiles()`](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getfiles%28v=vs.71%29.aspx)方法代替，它自 .NET Framework 1.1 以来就存在。

> 从当前目录返回一个文件列表。

# iis - 具有相互 SSL 的 IIS 不起作用

> ID：14520475
> 
> 赞同：0
> 
> 时间：2013-01-25T11:03:34.267
> 
> 标签：iis, ssl-certificate, client-certificates

我是相互 SSL 的新手。因此，我对客户证书的理解可能是错误的。

**在 IIS 中使用客户端证书时，它们是否需要从与 IIS HTTPS 绑定配置的相同证书（或 CA）颁发？**

*   我的开发 IIS 有一个自签名证书。
*   对于客户端证书，我根据[此处](http://www.yangsoft.com/blog/?p=105)的帖子创建了一个 CA 和一个客户端证书。
*   CA 位于本地计算机的“受信任的根证书颁发机构”中。
*   客户端证书在我的个人证书文件夹中。
*   在 IIS 上，我将客户端证书设置为**接受**.

第一个奇怪的事情是，当我浏览到我的页面时，IE 总是显示 403.7。即使我禁用了 IE 设置“不提示客户端证书选择...”，证书选择也没有打开窗口。

此外，当访问带有附加客户端证书的 HttpWebRequest 的页面时，响应始终为 403。不幸的是，我没有弄清楚如何获取子状态。

当客户端证书的 RootCA 在受信任的根存储中时，为什么 IIS 不接受我的客户端证书？有没有办法在问题可能出现的地方获得更多细节？

谢谢
托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:18:54.963

终于可以解决问题了：

我根据[此处](http://www.yangsoft.com/blog/?p=105)的教程生成的 CA 和客户端证书没有在证书存储中**分配私钥。**我必须从证书存储中删除证书并导入包含私钥的 PFX 文件。

其次，客户端证书需要在**当前用户/个人**存储中，这样 IE 才会选择它。我最初在**Current Computer/Personal**商店中生成了它。

可能有一种直接的方法来创建两个证书，包括使用 makecert 的私钥。但是 PFX 导入对我来说是最简单的方法。

# java - 如何从表中获取 jdbc 空对象

> ID：14520476
> 
> 赞同：0
> 
> 时间：2013-01-25T11:03:39.207
> 
> 标签：java, sql, jdbc

我有一个数字类型的 sql 列 PROTOCOL。它可以为空，并且对表 PROTOCOL IN(1,2,3) 有一个约束。我可以设置为空。如果值为空，如何获取值？我可以做 rs.getInt() 但我不认为它返回 null？

```
if(protocol==0)
            {

               stmt.setNull(15, java.sql.Types.INTEGER);                

           }
            else{
            stmt.setInt(15, protocol);
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:08:58.107

使用`wasNull()`方法。

```
 Integer myValue = rs.getInt(15);
 if (rs.wasNull()) {
   myValue = null;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T11:07:42.330

> 我可以做 rs.getInt() 但我不认为它返回 null？

使用[ResultSet.wasNull()](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#wasNull%28%29) after`getInt()`检查最后读取的列是否为 NULL。

或者，使用[ResultSet.getObject()](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getObject%28int%29)而不是，如果列是`getInt()`，则返回。`null``NULL`

# c - Varnish Daemon 未启动：资源暂时不可用

> ID：14520479
> 
> 赞同：3
> 
> 时间：2013-01-25T11:03:50.967
> 
> 标签：c, compiler-construction, cygwin, vcl, varnish

我尝试在我的本地开发系统上设置清漆，但它在开始后几秒钟内终止并显示以下消息：

```
varnishd -s malloc,1G -T 127.0.0.1:2000 -a 0.0.0.0:81 -F -f /etc/default.vcl

0 [main] collect2 9660 fork: child -1 - died waiting for longjmp before initialization, retry 10, exit code 0xC0000135, errno 11
1044289 [main] collect2 9660 fork: child -1 - died waiting for longjmp before initialization, retry 10, exit code 0xC0000135, errno 11
3081454 [main] collect2 9660 fork: child -1 - died waiting for longjmp before initialization, retry 10, exit code 0xC0000135, errno 11
7205979 [main] collect2 9660 fork: child -1 - died waiting for longjmp before initialization, retry 10, exit code 0xC0000135, errno 11
Message from C-compiler:
collect2: fork: Resource temporarily unavailable
0 [main] collect2 9660 fork: child -1 - died waiting for longjmp before initialization, retry 10, exit code 0xC0000135, errno 11
1044289 [main] collect2 9660 fork: child -1 - died waiting for longjmp before initialization, retry 10, exit code 0xC0000135, errno 11
3081454 [main] collect2 9660 fork: child -1 - died waiting for longjmp before initialization, retry 10, exit code 0xC0000135, errno 11
7205979 [main] collect2 9660 fork: child -1 - died waiting for longjmp before initialization, retry 10, exit code 0xC0000135, errno 11
Running C-compiler failed, exit 1

VCL compilation failed 
```

谷歌没有太多帮助，有没有人知道出了什么问题以及我该如何解决这个问题？

好的，现在开始赏金了。更多信息：开发系统使用 Windows，但运行 cygwin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:19:56.390

cygwin 中的许多分叉问题可以通过重新构建 cygwin DLL 来解决。

首先，确保`dash`和`rebase`软件包是通过 cygwin setup 安装的。关闭所有 cygwin 窗口和进程（包括 X11 等）然后，从命令提示符（开始菜单 -> 运行 -> cmd），执行`c:\pathtocygwin\dash.exe -c '/usr/bin/rebaseall'`

在此处的 wiki 中查看更多信息：http: [//cygwin.wikia.com/wiki/Rebaseall](http://cygwin.wikia.com/wiki/Rebaseall)

# jquery - 单击 jquery 选项卡时，有序列表的数字变为 0

> ID：14520480
> 
> 赞同：8
> 
> 时间：2013-01-25T11:03:58.037
> 
> 标签：jquery, internet-explorer, internet-explorer-9, html-lists, jquery-ui-tabs

我有一个带有 jQ​​uery 选项卡的页面。在这些选项卡中是一个有序列表。

这是我的html代码：

```
<div id="tabs">

  <ul>
      <li><a href="#tabs-1">Nunc tincidunt</a></li>
      <li><a href="#tabs-2">Proin dolor</a></li>
      <li><a href="#tabs-3">Aenean lacinia</a></li>
  </ul>

  <div id="tabs-1">
      <ol start="50">
          <li>Bibendum Elit</li>
          <li>Vehicula</li>
          <li>Amet Bibendum Ultricies</li>        
      </ol>
  </div>

  <div id="tabs-2">
      <ol>
          <li>Sollicitudin Cras Vehicula</li>
          <li>Vulputate Euismod</li>
          <li>Ridiculus Vehicula Pharetra Nullam</li>        
      </ol> 
  </div>

  <div id="tabs-3">
      <ol>
          <li>Ullamcorper Parturient</li>
          <li>Tristique Mollis Venenatis Vehicula</li>
          <li>Vulputate Bibendum</li>        
      </ol>  
  </div>
</div> 
```

这是我的javascript：

`$(function() { $( "#tabs" ).tabs(); });`

见：http: [//jsfiddle.net/2ewzz/1/](http://jsfiddle.net/2ewzz/1/)

当我在 IE9 中查看此内容时，我从第一个选项卡单击到第二个选项卡，然后再次返回到第一个选项卡，数字全部更改为“0”

有谁知道我做错了什么，或者如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:28:42.303

这似乎是 IE 本身查看这个相关问题的一个[问题](https://stackoverflow.com/questions/5584500/ordered-list-showing-all-zeros-in-ie9)。

再次选择选项卡时，我可以通过在列表项上重新创建计数器来解决此问题。

```
$(function() {
    $( "#tabs" ).tabs({
        select: function(event, ui){
            var ol = $($(ui.panel).children()[0]);
            setTimeout(function(){
            ol.children().css("counter-reset", "item")
            }, 1);
        }
    });
}); 
```

查看此[jsFiddle](http://jsfiddle.net/r7XSE/)以获取工作示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:15:38.693

[http://www.w3schools.com/tags/att_ol_start.asp](http://www.w3schools.com/tags/att_ol_start.asp) 它适用于 IE9 兼容模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T18:51:00.450

根据@sriniris 的回答，如果您有多个列表：

```
<script type="text/javascript">
    $(function () {
        $("#tabs").tabs({
            activate: function (event, ui) {
                $(".olReset").each(function () {
                    var ol = $(this);
                    setTimeout(function () {
                        ol.children().css("counter-reset", "item")
                    }, 1);
                });
            }
        });
    });
</script> 
```

只需将`.olReset`课程应用于您的列表。

而且，`select`已经贬值了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T17:26:29.267

我也遇到了这个问题，但巧合的是，我的 IT 部门部署了这个补丁[http://support.microsoft.com/kb/2909921](http://support.microsoft.com/kb/2909921)（更新 IE9 以更新版本 9.0.24）并且问题消失了

# ruby - 如何转换时间戳？

> ID：14520482
> 
> 赞同：0
> 
> 时间：2013-01-25T11:04:04.870
> 
> 标签：ruby, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序。

我从 Rails 3.2.8 API 获取数据，我想将我得到的时间戳 ( `2013-01-24T23:42:59Z`) 转换为`2013-01-24 23:42:59`. 我怎么能用 Ruby 做到这一点？

这种格式称为 ( `2013-01-24T23:42:59Z`) 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:11:25.010

也许它被称为 ISO 8601。您可以接受这种形式并通过执行以下操作将其转换为时间对象：

```
require "time"
Time.iso8601("2013-01-24T23:42:59Z")
# => 2013-01-24 23:42:59 UTC 
```

# json - 从需要用户名和密码的远程 URL 解析 JSON

> ID：14520488
> 
> 赞同：7
> 
> 时间：2013-01-25T11:04:35.770
> 
> 标签：json, rest, authentication, basic-authentication

我有一个指向 JSON 输出的 url，但是这个 URL 需要通过标准的 apache 弹出身份验证框输入用户名和密码。我试图从我的 rails 控制器访问这个 URL，如下所示：

```
result = JSON.parse(open("http://user:pass@myurl.com/json").read) 
```

但是它不起作用。我的控制器顶部有以下内容：

```
require 'open-uri'
require 'json' 
```

我只是收到一个错误，上面写着`ArgumentError, userinfo not supported. [RFC3986]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T11:12:20.547

尝试将密码和用户作为附加选项

```
 open("http://...", :http_basic_authentication=>[user, password]) 
```

# iphone - ASIHttpRequest - 移动到实时 PHP 服务器后不创建临时文件

> ID：14520489
> 
> 赞同：0
> 
> 时间：2013-01-25T11:04:41.713
> 
> 标签：iphone, ios, ios4, asihttprequest

我正面临这个奇怪的问题。在点击一个按钮时，我正在从我的 PHP 服务器下载媒体文件，例如图像、视频和音频。对于我使用的下载部分`ASIHTTPRequest`。

我使用此代码恢复下载：

```
NSString *audio_url_f = [myDetailPeom poem_audio_url];

NSURL *url = [NSURL URLWithString:audio_url_f];

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setDelegate:self];

[request setShouldContinueWhenAppEntersBackground:YES];
[request setNumberOfTimesToRetryOnTimeout:3];
[request setDelegate:self];
        //
NSString *path = [NSString stringWithFormat:@"%@/Documents/%@",NSHomeDirectory(),fileName];
path = [path stringByAppendingString:@".download"];   

// This file has part of the download in it already
[request setTemporaryFileDownloadPath:path];
[request setAllowResumeForFileDownloads:YES];
[request setDownloadDestinationPath:filePath];

//
[request setUserInfo:[NSDictionary dictionaryWithObject:@"audio" forKey:@"type"]];
[request setDidFinishSelector:@selector(requestFinished:)];
[request setDidFailSelector:@selector(requestFailed:)];
[request startAsynchronous]; 
```

如果网络出现故障，下载将停止并正常恢复。部分下载的文件在正确的位置创建，并`.download`附加在其文件名中。网络可用后，它将正确恢复下载。

现在我将我的 Web 应用程序移动到实时 PHP 服务器（两者都在同一台服务器上）。但是根本没有创建部分文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:04:28.273

除非您在 URL 中犯了错误，否则极不可能。大多数时候犯的一个常见错误是在移动到实时服务器时，如果它的 HTTPS 应该在 ASI 中正确处理。如果是这样，请尝试将 setValidatesSecureCertificate 设置为 NO。

由于不推荐使用 ASIHttpRequest，您应该根据需要考虑迁移到 AFNetworking 或 RestKit 或其他一些框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:05:34.157

试试这个代码来获取文档目录？

```
NSString *documentDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];

NSString *path= [documentDirectory stringByAppendingPathComponent:@"test.download"]; 
```

使用缓存目录而不是文档目录总是更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:54:02.023

这会发生在你的场景中吗？

[ASIHTTPRequest setTemporaryFileDownloadPath：不适用于某些 URL](https://stackoverflow.com/questions/8673547/asihttprequest-settemporaryfiledownloadpath-not-working-with-some-urls)

检查它是否重定向。

# mysql - mysql 索引似乎在大表中失败

> ID：14520491
> 
> 赞同：1
> 
> 时间：2013-01-25T11:04:52.607
> 
> 标签：mysql, indexing, timestamp

我使用具有以下创建的大型（> 1 亿行）表：

```
 data_values | CREATE TABLE `data_values` (
  `T` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `ID` varchar(32) NOT NULL,
  `VAL` float DEFAULT NULL,
  PRIMARY KEY (`T`,`ID`),
  KEY `IX_d` (`ID`),
  KEY `IX_T` (`T`)
) ENGINE=InnoDB DEFAULT CHARSET=greek PACK_KEYS=1 ROW_FORMAT=DYNAMIC | 
```

我的查询具有以下形式：

```
select t,id,val from data_values where t between "2013-01-11 02:47:02" and "2013-01-12 04:59:02" and id="815"; 
```

我的问题是有时使用索引（答案很快），有时不使用（答案在 1-2 分钟内出现），我找不到任何背后的逻辑。例如下面的查询很快：

```
select t,id,val from data_values where t between "2013-01-11 02:47:02" and "2013-01-13 04:59:02" and id="815"; 
```

而以下查询（要求较少的数据，一天而不是两天）很慢：

```
select t,id,val from data_values where t between "2013-01-11 02:47:02" and "2013-01-12 04:59:02" and id="815"; 
```

解释查询：

```
explain select t,id,value from data_values where t between "2013-01-11 02:47:02" and "2013-01-13 04:59:02" and id="815";
| id | select_type | table                | type        | possible_keys
| key             | key_len | ref  | rows | Extra
          |
+----+-------------+----------------------+-------------+-----------------------
+-----------------+---------+------+------+-------------------------------------
----------+
|  1 | SIMPLE      | data_values           | index_merge | PRIMARY,IX_D,IX_T
| IX_D,PRIMARY     | 34,38  | NULL | 1033 | Using intersect(IX_D,PRIMARY); Us
ing where |
+----+-------------+----------------------+-------------+-----------------------
+-----------------+---------+------+------+-------------------------------------

explain select t,id,val from data_values where t between "2013-01-11 02:47:02" and "2013-01-12 04:59:02" and id="815";
+----+-------------+----------------------+------+-----------------------+------
---+---------+-------+--------+-------------+
| id | select_type | table                | type | possible_keys         | key
   | key_len | ref   | rows   | Extra       |
+----+-------------+----------------------+------+-----------------------+------
---+---------+-------+--------+-------------+
|  1 | SIMPLE      | data_values          | ref  | PRIMARY,IX_D,IX_T     | IX_D            | 34      | const | 143900 | Using where |
+----+-------------+----------------------+------+-----------------------+------
---+---------+-------+--------+-------------+ 
```

我不明白第一个查询“更广泛”（要求更多数据）如何使用索引，而第二个查询则不使用。搜索 stackoverflow 我找到了一些关于多列索引的答案。但是我已经使用了一个（我的主键），并且以正确的顺序（在查询中，在 id 之前提到了 t 变量）。我发现的另一个答案涉及使用 OR 的查询（执行单独的查询并形成一个 UNION），但我的查询使用 AND。

我需要有关如何加快查询速度的建议，

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:09:00.850

你有一个关于 的索引`(t, id)`。

`(id, t)`对于这种查询，您需要一个索引，或者更好的是，一个“覆盖”索引`(id, t, val)`：

```
ALTER TABLE data_values
    DROP INDEX IX_T           -- the Primary Key is (t, id) so this index 
                              -- is rather redundant.
  , DROP INDEX IX_d           -- this was not redundant but it is now
                              -- (because of) 
  , ADD INDEX IX_ID_T_VAL     -- the new index
        (id, t, value) ; 
```

# sql - 在新计算机中动态设置应用程序数据库

> ID：14520493
> 
> 赞同：0
> 
> 时间：2013-01-25T11:04:56.800
> 
> 标签：sql, entity-framework, window

我刚刚完成了一个窗口应用程序的构建。
在我的程序中，我使用`entityframwork`and `sql 2008 express`。
实体框架绑定到我的本地数据库。
我的问题是如何使连接动态化，

意思是，我如何在另一台计算机上运行我的程序，并且程序将自动使用机器数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:08:44.487

只需将您的数据库放在`App_Data`文件夹和服务器中，就像仅`Data Source="."`在您的连接字符串中一样。但是仍然需要`SQL Server Express`安装另一台计算机。

# ios - UITableView 从 NIB 文件加载自定义单元会引发 NSInternalInconsistencyException

> ID：14520495
> 
> 赞同：3
> 
> 时间：2013-01-25T11:05:02.453
> 
> 标签：ios, objective-c, uitableview, nib

在 ios 应用程序中，我有一个 UITableView。在该`cellForRowAtIndexPath`方法中，我需要使用其 NIB 名称返回一个自定义单元格。为此，我使用`loadNibNamed`. （我将在'willDisplayCellforRowAtIndexPath'中加载后填充单元格中的数据）

MyItemCell 是一个包含 2 个 UIImageView 和一个 UIButton 的 XIB 文件 (MyItemCell.xib)（每个项目都有一个标签）

这是我的代码：

在我的视图控制器中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return [ViewHelper loadCustomCellWithNibName:@"MyItemCell" owner:self];
} 
```

以及从 NIB 加载自定义单元格的方法

```
+ (UITableViewCell *) loadCustomCellFromNib:(NSString *)nibName owner:(id)owner
{
    UITableViewCell *cell = nil;
    NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:nibName owner:owner options:nil];
    if([nibObjects count] > 0 )
    {
        cell = [nibObjects objectAtIndex:0];
    }
    else
    {
        NSLog(@"Failed to load %@ XIB file!", nibName);
    }
    return cell;
} 
```

在所有测试中一切正常。但是，我收到了一些无法重现的用户崩溃。

这是崩溃：

```
NSInternalInconsistencyException

Could not load NIB in bundle: 'NSBundle </var/mobile/Applications/7A24cE79-131F-523F-4C00-23B523ARG123/MyApp.app> (loaded)' with name 'MyItemCell' 
```

堆栈跟踪：

```
0 CoreFoundation                        0x39b432a3 __exceptionPreprocess + 163 + 162

1 libobjc.A.dylib                       0x33a3297f objc_exception_throw + 31 + 30

2 CoreFoundation                        0x39b431c5 -[NSException initWithCoder:] + 1

3 UIKit                                 0x32e12491 -[UINib instantiateWithOwner:options:] + 1637 + 1636

4 UIKit                                 0x32e1a1d7 -[NSBundle(UINSBundleAdditions) loadNibNamed:owner:options:] + 139 + 138

5 MyApp                                 0x00047ded +[ViewHelper loadCustomCellFromNib:owner:] (ViewHelper.m:349)

6 MyApp                                 0x00034003 -[BuildViewController tableView:cellForRowAtIndexPath:] (BuildViewController.m:2432)

7 UIKit                                 0x32cc0545 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 413 + 412

8 UIKit                                 0x32ca530b -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1311 + 1310

9 UIKit                                 0x32cbc7c7 -[UITableView layoutSubviews] + 207 + 206

10 UIKit                                0x32c78803 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 259 + 258 
```

问题是我无法重现此崩溃。

关于可能导致崩溃的任何想法？或者有什么解决方案可以避免这种错误？

非常感谢您的帮助

**编辑：**

只是为了澄清更多，这在我正在做的任何测试中都可以正常工作。此崩溃仅针对 1 个用户出现 1 次，因此问题不在于代码。我只是在寻找在特定情况下可能导致此崩溃的原因。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T11:32:04.090

要从 NIB 文件创建自定义单元格，请尝试此操作

```
- (void)viewDidLoad
{
    [tableView registerNib:[UINib nibWithNibName:CellIdentifier bundle:nil] forCellReuseIdentifier:CellIdentifier];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    MyCell *cell = (MyCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    ......
    return cell;
} 
```

CellIdentifier 是 NIB 文件的名称，也用作单元标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:19:08.787

请试试这个...它不会给任何问题...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"albumListCell";
   albumListCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil)
   {
         cell = (albumListCell *) [[[NSBundle mainBundle] loadNibNamed:@"albumListCell" owner:self options:nil] lastObject];
   }
   return cell;
} 
```

使用 nib 文件创建 tableViewCell 是不可能的。所以创建一个简单的 View 控制器，然后将 UIViewController 更改为 UITableViewCell ...

# android - Android 平板电脑上的 CSS 预处理器

> ID：14520502
> 
> 赞同：3
> 
> 时间：2013-01-25T11:05:32.423
> 
> 标签：android, css, compilation, sass

当我外出时，我并不总是随身携带笔记本电脑，但我总是有我的 Nexus 7。我喜欢在没有其他事情发生时做一些工作，无论是编码还是记录，或其他任何东西。

我希望能够在平板电脑上处理我的 SASS 样式表。显然我可以很容易地对它们进行编码，但我还没有找到一种方法来现场处理它们。

在平板电脑上执行此操作将是理想的，但在 Android 上运行 Ruby 的方式似乎并不多。

在线版本总比没有好，但鉴于我只有 wi-fi，我并不总是有互联网连接。

所以问题是：**有没有办法在 Android 上编译 SASS，无论是在平板电脑上还是在线上？**

如果没有，我可以用 LESS 代替吗？我假设是因为它是基于 js 的，但我更喜欢 SASS，所以这对我来说是*最后的选择*。

非常感谢，
Jorj。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:29:53.947

这些可能有帮助吗？我想当你真的非常想在外出时完成一些工作时，他们会这样做：

*   [CSS 转换](http://cssconvert.mgwebsolutions.net/)
*   [css2sass](http://css2sass.heroku.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T05:16:22.383

我正在使用终端应用程序 termux，下载 ruby​​ 并使用 gem 安装 sass。您可以按照 termux 帮助部分中的说明访问共享存储。所以它只有在你有你的 www 文件夹时才有效。我正在使用这个服务器应用程序，它可以工作。 [https://play.google.com/store/apps/details?id=com.esminis.server.php](https://play.google.com/store/apps/details?id=com.esminis.server.php)

# dos - 如何使用 dos 命令删除特定时间段（比如超过一个月）的目录？

> ID：14520503
> 
> 赞同：0
> 
> 时间：2013-01-25T11:05:47.253
> 
> 标签：dos, dir

我正在尝试从批处理文件中删除超过一个月的目录。我可以使用以下方法列出目录名称：

目录 D:* /A:DH

但不确定如何在特定时间删除它们。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T09:40:01.167

SET FOLDERPATH="F:\TestEnvir\bin\backup\MarketData\D" rem FORFILES /p %FOLDERPATH% /S /D 30 /C "cmd /c IF @isdir == TRUE rd /S /Q @path"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:14:17.307

使用`forfiles`命令。

句法：

`FORFILES [/p Path] [/m Mask] [/s] [/c Command] [/d [+ | -] {dd/MM/yyyy | dd}]`

以下命令 `forfiles /p "C:\source_folder" /s /m *.* /c "cmd /c Del @path" /d -30`将删除`c:\source_folder`超过 30 天的文件。

[在此处](http://ss64.com/nt/forfiles.html)查看更多示例和说明

# delphi - Delphi 7 中嵌入的新 RDP 8 (mstscax.dll v6.2) 会导致访问冲突

> ID：14520507
> 
> 赞同：6
> 
> 时间：2013-01-25T11:06:04.013
> 
> 标签：delphi, activex, typelib, mstsc

我的带有嵌入式 RDP 客户端的旧 Delphi 7 程序已经运行了多年，但它会在 Windows 8 上出现访问冲突，如果您在 Windows 7 上安装 RDP 8，则 mstscax.dll 文件（带有 ActiveX 组件）更新到版本 6.2 .

直到最近，我的项目才从 mstscax.dll v6.0 导入类型库，如果 GUID 在注册表中，我使用 TMsRdpClient5，否则使用 TMsRdpClient2 以向后兼容 XP。为了调查这个新问题，我在我的 Delphi 7 所在的 Windows 7 32 位上安装了 RDP 8，导入了一个新的类型库 MSTSCLib_TLB，这是我的发现：

在所有组件中，我可以直接在组件上设置属性，例如 Domain 和 ColorDepth ，没有错误。但是，如果我想设置 AdvancedSettings2.RDPPort、AdvancedSettings2.ClearTextPassword 或 SecuredSettings2.StartProgram 等属性，则会导致“模块 mstscax.dll 中的访问冲突。读取地址...”

所有这些属性都驻留在“子接口”中，问题是导入库代码中的这些函数（返回“子接口”）会导致访问冲突：

```
function Get_AdvancedSettings2: IMsRdpClientAdvancedSettings;
function Get_SecuredSettings2: IMsRdpClientSecuredSettings; 
```

Microsoft 在 mstscax.dll 中对导入的类型库无法与之交互的哪些更改进行了更改？是否可以在最新的 Delphi XE3 中导入类型库并在 Delphi 7 中使用它并希望这能正确实现一些新技术？

我的 Delphi 7 已安装所有更新。任何帮助将不胜感激。

# jsf - primeFaces LazyLoading datatable 在另一个 dataTable 和 rowExpansion 中

> ID：14520510
> 
> 赞同：1
> 
> 时间：2013-01-25T11:06:06.123
> 
> 标签：jsf, primefaces, datatable, lazy-loading

我正在使用 primeFaces 3.4.2 并实现了带有排序、过滤的延迟加载数据表。我正在尝试在上述数据表中嵌入另一个数据表。

为了上述目的，我使用了行扩展和行切换器。

我的场景是这样的

```
public class Customer {
    @Id
    private Long id;
    private String name;
    private String email;

    @JoinColumn(unique = true, name = "Cust_Details_Id" )
    @OneToOne(cascade = CascadeType.ALL)
    private CustomerDetails customerDetails;
}

public class CustomerDetails {
    @Id
    private Long cdId;

    @OneToOne(mappedBy = "customerDetails", cascade = CascadeType.ALL)
    private Customer customer;

    @OneToMany(mappedBy = "customerDetails", cascade = CascadeType.ALL)
    private List<TypeA> listOfTypeA = new ArrayList<TypeA>(); 

    @OneToMany(mappedBy = "customerDetails", cascade = CascadeType.ALL)
    private List<TypeB> listOfTypeB = new ArrayList<TypeB>();;
}

public classTypeA {
    @Id
    private Long typeAId;

    @ManyToOne(cascade = CascadeType.ALL)
    private MeasurementDetails measurementDetails;    

    // Around 10-12 fields to store its details
}

public classTypeB {
    @Id
    private Long typeBId;

    @ManyToOne(cascade = CascadeType.ALL)
    private MeasurementDetails measurementDetails;    

    // Around 12-15 fields to store its details
} 
```

//我正在使用 LazyLoading 如下代码

```
<p:dataTable id="dataTable" 
var="customer" 
value="#{customerController.lazyModel}" 
styleClass="userDataTableStyle"
paginator="true" 
rows="10" 
selection="#{customerController.selctedCustomers}"
paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
lazy="true" 
rowsPerPageTemplate="10,15,50" >

<f:facet name="header">Customer List</f:facet>  

<p:column> <p:rowToggler id="rowToggler" /> </p:column>            
<p:column selectionMode="multiple" style="width:18px" />  

<p:column headerText="First Name" sortBy="#{customer.firstName}" filterBy="#{customer.firstName}">
    <f:facet name="header"> <p:outputLabel  value="First Name" /> </f:facet>

    <p:commandLink value="#{customer.firstName}" update=":customerDetailForm:display" oncomplete="custDialog.show()"  title="View">
        <f:setPropertyActionListener value="#{customer}" target="#{customerController.selectedCustomer}" />    
    </p:commandLink>
</p:column>

<!-- Other Columns -->
<!-- I want to embed another data here but based on the previous selected customers row Toggle -->

<p:rowExpansion  id="expand" rendered="true"  >  

    <p:dataTable id="dataTableInner" 
        var="cust" 
        value="#{customerController.selctedCustomers}" 
        styleClass="userDataTableStyle"
        lazy="true" rowsPerPageTemplate="10,15,50">

    <f:facet name="header"> Customer Details </f:facet>

    <p:column headerText="Customer Details " sortBy="#{customer.customerDetails}" >
        <f:facet name="header">
            <p:outputLabel  value="Customer Details" />
        </f:facet>
        <p:outputLabel  value="#{customer.customerDetails.customerId}" />
    </p:column>

    <p:column headerText="Mas ccc" >
        <f:facet name="header">
            <p:outputLabel  value="Date" />
        </f:facet>
        <p:outputLabel  value="#{customer.customerDetails.TypeA[0]}" /> <!-- Example -->
    </p:column>

    </p:dataTable> <!-- Inner datatable -->
</p:rowExpansion> 
</p:dataTable> <!-- Outer datatable --> 
```

问题
1\. 我如何知道哪个客户已被“行切换”而不是通过我用于删除的复选框
2\. 我想显示 TypeA 和 TypeB 的数据表（如果列表中存在数据），它会被触发行切换
器 3\. 我正在维护 customerDetails 类来跟踪 TypeA 和 TypeB 的列表，我应该删除这个类并将列表简单地粘贴到 Customer 类本身吗？

// 它可以有零个或一个 TypeA 列表，对于 TypeB 也类似，在客户详细信息类中，
如果我的设计不正确，请帮助我并提供一些指针，以便我可以让它工作

# php - 强制包含在 php.ini 中？

> ID：14520513
> 
> 赞同：5
> 
> 时间：2013-01-25T11:06:14.253
> 
> 标签：php, include, require

在运行任何其他文件之前，我可以在**php.ini中更改包含 php 文件的任何内容吗？**相当于添加*“require('somefile.php');”* 在每个文件之前？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:08:34.937

您可以使用该[`auto_prepend_file`指令。](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:09:10.020

`auto_prepend_file = [path/to/file]`在 php.ini 中搜索。替换`[path/to/file]`为您的文件

# networking - 根据IP和掩码计算我属于哪个VLAN

> ID：14520515
> 
> 赞同：0
> 
> 时间：2013-01-25T11:06:30.427
> 
> 标签：networking, ip

给定一个 IP 地址：175.28.234.18 和掩码 255.255.248.0 我属于哪个 VLAN？

```
 1)  232
   2)  267
   3)  222 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:13:01.910

我怀疑这里的“VLAN”是一个错字，而您的意思是“LAN”。在这种情况下，正确答案是 1。

解释：网络掩码告诉地址中的哪些位“属于”网络地址。因为`255.255.248.0`二进制是`11111111 11111111 11111000 00000000`，所以网络地址是`175.28.234.18 & 255.255.248.0 = 175.28.232.0`( `234 & 248 = 232`)。

# scala - for 构造中的 Scala 模式匹配

> ID：14520518
> 
> 赞同：2
> 
> 时间：2013-01-25T11:06:40.910
> 
> 标签：scala, pattern-matching

我有以下数据模型，稍后我将对其进行模式匹配：

```
abstract class A
case class C(s:String) extends A

abstract class B extends A
case class D(i:Int) extends B
case class E(s:Int, e:Int) extends B 
```

A 是层次结构的抽象超类型。C 是 A 的具体子类。A 的其他具体子类是 B 的子类，而 B 又是 A 的子类。

现在，如果我写这样的东西，它的工作原理：

```
def match(a:A) a match {
   a:C => println("C")
   a:B => println("B")
} 
```

但是，在 for 循环中，我无法匹配 B。我假设我需要一个构造函数模式，但由于 B 是抽象的，因此 B 没有构造函数模式。

```
val list:List[A] = List(C("a"), D(1), E(2,5), ...)

for (b:B <- list) println(b)  // Compile error
for (b@B <- list) println(b)  // Compile error 
```

在这里，我只想打印 B 个实例。这种情况有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:15:10.453

您可以使用`collect`：

```
list.collect { case b: B => println(b) } 
```

如果您想更好地理解这一点，我建议您阅读部分函数。[以这里](http://danielwestheide.com/blog/2012/12/12/the-neophytes-guide-to-scala-part-4-pattern-matching-anonymous-functions.html)为例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:35:49.620

谢尔盖是对的；`for`如果您只想模式匹配和过滤`B`实例，您将不得不放弃。如果您出于某种原因*仍*想使用`for`理解，我认为一种方法是使用警卫：

```
for (b <- list if b.isInstanceOf[B]) println(b) 
```

但总是最好选择模式匹配而不是`isInstanceOf`. 所以我会接受这个`collect`建议（如果它在我的其余代码的上下文中有意义的话）。

另一个建议是定义一个具有相同名称的**伴随对象**，并定义方法：`B``unapply`

```
abstract class A
case class C(s:String) extends A

abstract class B extends A
object B { def unapply(b: B) = Option(b)  } // Added a companion to B
case class D(i:Int) extends B
case class E(s:Int, e:Int) extends B 
```

然后你可以这样做：

```
for (B(b) <- list) println(b) 
```

所以这不是 B 的“构造函数”，而是同伴的`unapply`方法。它有效，这就是朋友的目的，对吧？

（见[http://www.scala-lang.org/node/112](http://www.scala-lang.org/node/112)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T13:08:02.633

如果你问我，你不能在这里使用模式匹配的事实是不幸的 scala 不一致。确实，scala**确实**让您可以对推导进行模式匹配，如本例所示：

```
val list:List[A] = List(C("a"), D(1), E(2,5)
for ((b:B,_) <- list.map(_ -> null)) println(b) 
```

在这里，我暂时将元素包装成对（带有一个虚拟且未使用的第二个值），然后对第一个元素为 B 类型的一对进行模式匹配。如输出所示，您将获得预期的行为：

```
 D(1)
 E(2,5) 
```

所以你去了，scala**确实**支持基于模式匹配的过滤（即使按类型匹配），似乎语法不处理按类型匹配单个元素的模式。

显然我不建议使用这个技巧，这只是为了说明。使用`collect`肯定更好。

再说一次，如果由于某种原因你真的更喜欢理解，还有另一个更通用的解决方案：

```
object Value {
  def unapply[T]( value: T ) = Some( value )
}
for ( Value(b:B) <- list ) println(b) 
```

我们只是在对象中引入了一个虚拟提取器，`Value`它什么都不做，所以它`Value(b:B)`与 just 具有相同的含义，只是`b:B`前者确实编译。与我之前的对子技巧不同，它相对易读，`Value`只需要编写一次，你可以随意使用它（特别是，不需要为你想要模式匹配的每种类型编写一个新的提取器，因为在@Faiz 的回答中。我会让你找到一个更好的名字`Value`。

最后，还有另一种开箱即用的解决方法（感谢 Daniel Sobral），但可读性稍差，需要一个虚拟标识符（此处`foo`）：

```
for ( b @(foo:B) <- list ) println(b)
// or similarly:
for ( foo @(b:B) <- list ) println(b) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:39:59.920

我的 2 美分：您可以在 for comprehension 检查类型中添加一个条件，但这**不会**像使用`collect`只接受 B 类实例那样优雅。

# ruby - "=~" 运算符如何在 Ruby 的 "IF" 块中工作？

> ID：14520520
> 
> 赞同：0
> 
> 时间：2013-01-25T11:06:43.203
> 
> 标签：ruby

嗨找到以下两个块：

***第一块***

```
irb(main):001:0> s="acbbdd"
=> "acbbdd"
irb(main):002:0> /e/=~s
=> nil
irb(main):003:0> if /e/=~s then
irb(main):004:1* print "h"
irb(main):005:1> end
=> nil 
```

***第二座***

```
irb(main):001:0> s="acbbdd"
=> "acbbdd"
irb(main):006:0> if /c/=~s then
irb(main):007:1* print "h"
irb(main):008:1> end
h=> nil
irb(main):009:0> 
```

你能帮我理解如何`=~`工作`I`和`II`阻止吗？在第一个块中它不匹配并返回`nil`，但在第二个块中如何`nil`来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:08:53.803

在第一个块中，字符串不匹配`/e/`- 没有`e`in `"acbbdd"`。

在第二个块中，字符串匹配`/c/`- 有一个`c`in `"acbbdd"`。

出现的原因`nil`是因为它是 的返回值`print`，因此也是整个`if`块的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:13:24.833

在`II`, /c/ 匹配 s，所以`print "h"`get 被执行。你得到一个输出（字符串“h”）和来自 print 语句的返回值（nil）

然后 if 块返回块中最后一条语句的返回值，在本例中为 nil。

运行`print "h"`会给你同样的结果。

# java - Java 操作数和运算符之谜

> ID：14520522
> 
> 赞同：-1
> 
> 时间：2013-01-25T11:06:49.880
> 
> 标签：java, operators

哪些运算符将始终评估所有操作数？

选出两个正确答案。

```
a. ||
b. +
c. &&
d. ? :
e. % 
```

运算符 + 适用于所有但无法找到第二个。这里有选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:11:59.683

`+`并且`%`，当然。

*   `&&`如果第一个操作数是 将短路`false`，因此可能不会评估第二个操作数。
*   `||`如果第一个操作数是 将短路`true`，因此可能不会评估第二个操作数。
*   `? :`仅计算与之前表达式的值相对应的备选方案`?`；另一个不评估。

另一方面，两者`+`和都必须具有两个操作数才能计算它们的结果——即总和或除法余数。`%`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:15:22.937

运算符：“+”和“%”。还有一个'|' 称为布尔或，在此运算符中，在测试之前对左和右都进行了评估。

# ios - RestKit 外键连接到多对一

> ID：14520531
> 
> 赞同：0
> 
> 时间：2013-01-25T11:07:20.830
> 
> 标签：ios, restkit, foreign-key-relationship

我的目标是用 RestKit 实现一对多和多对一的关系连接。我使用的是 0.20pre6 版本。此页面[http://restkit.org/api/0.20.0/Classes/RKConnectionDescription.html#overview](http://restkit.org/api/0.20.0/Classes/RKConnectionDescription.html#overview)报告了一半示例。第一个例子是多对一。json:

```
{ "project": 
    { "id": 12345, 
      "name": "My Project",
      "userID": 1
    }
} 
```

代码：

```
NSEntityDescription *projectEntity = [NSEntityDescription entityForName:@"Project" inManagedObjectContext:managedObjectContext];
NSRelationshipDescription *userRelationship = [projectEntity relationshipsByName][@"user"];
RKConnectionDescription *connection = [[RKConnectionDescription alloc] initWithRelationship:userRelationship attributes:@{ @"userID": @"userID" }]; 
```

我第一次尝试时错过的事情是 userID 也需要在实体中。否则它将无法正常工作。我真的不明白为什么......无论如何它有效。

我的问题与第二个例子有关，它是一对多的。json示例：

```
 { "project":
    {   "id": 12345,
        "name": "My Project",
        "userID": 1,
        "teamMemberIDs": [1, 2, 3, 4]
    }
 } 
```

代码：

```
 NSEntityDescription *projectEntity = [NSEntityDescription entityForName:@"Project" inManagedObjectContext:managedObjectContext];
 NSRelationshipDescription *teamMembers = [projectEntity relationshipsByName][@"teamMembers"]; // To many relationship for the `User` entity
 RKConnectionDescription *connection = [[RKConnectionDescription alloc] initWithRelationship:teamMembers attributes:@{ @"teamMemberIDs": @"userID" }]; 
```

现在... teamMemberIDs 需要像前面示例中的 userID 一样位于实体定义中。以下是我的问题：

1.  我如何定义 teamMemberIDs，因为它是一个值数组？
2.  有关于这件事的工作示例吗？RestKit 库中的示例目录仅显示嵌套关系。
3.  我做得对吗？我错过了什么大事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:15:53.897

我一直在努力解决这个完全相同的问题，但最终能够找到解决方案。希望这会帮助你。

使用示例：

1.  您必须具有 Project 的 NSArray 属性，即您的 NSManagedObject，您可以将 teamMemberID 映射到其中。为此，您需要创建一个可变形的属性。
2.  将 teamMemberIDs 映射到该属性，就像您将原语一样。
3.  就像在示例中所做的那样创建一个 connectionDescription。

# spring - 春季集合合并

> ID：14520536
> 
> 赞同：3
> 
> 时间：2013-01-25T11:07:46.773
> 
> 标签：spring, collections, merge

我有两个使用 FactoryBean 生成的列表，我想用这两个列表的合并版本初始化一个 bean。有没有办法做到这一点？

```
<bean id="listA" class="XFactoryBean" >
  ...
</bean>
<bean id="listB" class="YFactoryBean">
  ...
</bean>
<bean >
  <property name="AwithB" ...>
</bean> 
```

有一个适用于静态列表的解决方案（[http://vikdor.blogspot.hu/2012/10/using-collection-merging-in-spring-to.html](http://vikdor.blogspot.hu/2012/10/using-collection-merging-in-spring-to.html)），但不适用于那些生成的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:48:02.380

Java `@Configuration`FTW：

```
@Configuration
public class Config {

    @Resource
    private List listA;

    @Resource
    private List listB;

    @Bean
    public List AwithB() {
        List mergedList = new ArrayList(listA);
        listB.addAll(listB);
        return mergedList;
    }

} 
```

少得多的样板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:09:33.500

检查 SpEL 相关解决方案（[如何在 spring config 中扩展列表](https://stackoverflow.com/questions/6464506/how-to-extend-a-list-in-spring-config)）并扩展 ListFactoryBean（[http://ericlefevre.net/wordpress/2008/04/02/merging-lists-in-a-spring-configuration- file/](http://ericlefevre.net/wordpress/2008/04/02/merging-lists-in-a-spring-configuration-file/) ) 我想出了以下解决方案：

配置：

```
<bean id="AwithB" class="com.util.ListMergerFactoryBean">
    <property name="listOfLists">
        <list>
            <ref bean="listA" />
            <ref bean="listB" />
        </list>
    </property>
</bean> 
```

爪哇：

```
public class ListMergerFactoryBean implements FactoryBean<List> {

private List<List> listOfLists;

@Override
public List getObject() throws Exception {
    List mergedList = new ArrayList();
    for (List list : listOfLists) {
            mergedList.addAll(list);
    }
    return mergedList;
}

@Override
public Class<?> getObjectType() {
    return (new ArrayList()).getClass();
}

@Override
public boolean isSingleton() {
    return false;
}

public void setListOfLists(List<List> listOfLists) {
    this.listOfLists = listOfLists;
} 
```

}

更新：我使用 Aron Bartle 的解决方案消除了一个错误。谢谢！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-25T16:43:03.710

上面的 ListMergerFactoryBean 解决方案存在一个微妙的错误。

配置：

```
<util:list id="listA" value-type="java.lang.String">
  <value>fooA</value>
  <value>barA</value>
</util:list>
<util:list id="listB" value-type="java.lang.String">
  <value>fooB</value>
  <value>barB</value>
</util:list>
<util:list id="listC" value-type="java.lang.String">
  <value>fooC</value>
  <value>barC</value>
</util:list>
<bean id="AwithB" class="com.util.ListMergerFactoryBean">
  <property name="listOfLists">
    <list>
        <ref bean="listA" />
        <ref bean="listB" />
    </list>
  </property>
</bean>
<bean id="AwithC" class="com.util.ListMergerFactoryBean">
  <property name="listOfLists">
    <list>
        <ref bean="listA" />
        <ref bean="listC" />
    </list>
  </property>
</bean> 
```

使用此配置，当 bean AwithB 具有 AwithC 的预期内容时，您可能会感到惊讶。ListA 是一个单例，getObject 方法会更改它，因此会为 ListMergerFactoryBean 的所有用户更改它，即使 bean 工厂不是单例。解决方法是不重复使用 listOfLists 中的第一个列表：

```
@Override
public List getObject() throws Exception {
  List mergedList = new ArrayList();
  for (List list : listOfLists) {
    mergedList.addAll(list);
  }
  return mergedList;
} 
```

# django - django 与 django sweetpie 的视图

> ID：14520538
> 
> 赞同：1
> 
> 时间：2013-01-25T11:07:50.393
> 
> 标签：django, restful-architecture, tastypie

我正在建立一个商店售货亭`django`，我有一个视图可以在这样的时间范围内显示一些已售出的产品；

```
def product_sold_report（请求）：
    响应 = {}
    id_list = []
    尝试：
        _start = _get_parameter（请求，“_start”）
    除了例外，e：
        _start = 无

    尝试：
        _end = _get_parameter（请求，“_end”）
    除了例外，e：
        _end = 无

    如果 _start 和 _end：
        订单 = Order.objects.filter(created__range=[datetime.datetime.fromtimestamp(float(_start)),datetime.datetime.fromtimestamp(float(_end))]).filter(status = 4).order_by("-created" )
    别的：
        订单 = Order.objects.all().filter(status=4).order_by("-created")

    对于订单中的订单：
        id_list.append(order.id)

    对于 OrderItem.objects.filter(order__in = id_list) 中的项目：
        i = Order.objects.get(id = item.order_id)
        尝试：
            产品 = Product.objects.get(id = item.product_reference)
            条形码 = 产品.条形码
        除了例外，e：
            条形码 = 无

        如果 item.product_name 响应：
            响应[item.product_name]["product_quantity"] += item.quantity
        别的：
            响应[item.product_name] = {
                “product_quantity”：item.quantity，
                “产品条形码”：条形码

            }

    返回 HttpResponse(simplejson.dumps(response), mimetype="text/json")

```

但是，我想使用一个 rest 框架，以便我可以在另一个服务器上使用不同的 web 应用程序查询这个应用程序并获得相同的产品销售结果，我已经考虑过`django tastypie`，但它似乎在模型资源上占了很大的比重。是否可以使用`django tastypie`or完成此操作`django rest framework`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:17:41.553

您不需要完整的宁静服务来获得相同的结果。只要您的视图返回格式良好的 JSON 数据 - 只需在映射到视图函数的 url.py 中使用良好的 URL 模式即可。

您可以制作 URL 模式，就像 tastepie /api/v1/products_sold/ 只需使用一些正则表达式 - 并确保 URL 有意义

# php - 会话数组的更新节点 + zf2

> ID：14520539
> 
> 赞同：0
> 
> 时间：2013-01-25T11:07:56.840
> 
> 标签：php, session, zend-framework2

首先我添加了一个会话然后我打印我的会话它看起来完全没问题

```
Array
(
[14] => Array//(main key is my restaurant Id)
    (
        [retaurantDetail] => Array
            (
                [restId] => 14
                [restaurantName] => Barca
                [published] => 1
                [timings] => 10 to 10
                [normalCost] => 150
                [logo] => 44f7afcffb0aeea5c69ccee9041cab84.jpg
                [email] => barca@barca.com
                [phone] => 741258
            )

        [menuArray] => Array
            (
                [70] => Array // (menu ID is the Key)
                    (
                        [menuId] => 70
                        [productId] => 35
                        [productName] => Coca Cola
                        [categoryTitle] => Beverages
                        [categoryId] => 52
                        [price] => 100
                        [attributeName] => 1.5L
                        [isDefault] => 1
                        [qty] => 1
                    )

            )

    )
) 
```

现在我添加一些逻辑，如果有人再次将该菜单添加到购物车中，简而言之，他/她在该菜单中添加了 1 个数量，这是我的代码，（代码尚未完成，但现在我专注于更新数量)

```
 foreach($session->cartSession as $sessionKey=>$sessionVal)
            {

                        foreach($sessionVal['menuArray'] as $sessionMenuKey=>$sessionMenuVal)
                        {

                            if($sessionMenuKey == $post_data['menuId'])
                            {
                                echo"<pre>"; print_r($sessionMenuVal['qty']); echo "</pre>";
                                //$qty = $session->cartSession[$restaurantDetail['restId']]['menuArray'][$sessionMenuKey];
                                $sessionMenuVal['qty'] =  $sessionMenuVal['qty']+1;

                                echo"<pre>"; print_r($sessionMenuVal['qty']); echo "</pre>"; 

                            }

                         }
            } 
```

我缺少什么我想更新会话数量。

每次我按添加它显示 1 数量然后我添加加 1 数量然后它显示 2 然后它再次显示 1 数量:(。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:47:34.463

你永远不会写回会话......

如果我正确理解您的代码，则以下内容应该有效。检查我的代码的正确数组嵌套，以防它不能开箱即用。

```
// Somewhere on top, use this for your loops
$cartSession = $session->offsetGet('cartSession'); 

// Inside your matched loop
$currentQty = $sessionMenuVal['qty'];
$cartSession[$sessionKey][$sessionMenuKey]['qty'] = ++$currentQty;

// After your loops at the end
$session->offsetSet('cartSession', $cartSession); 
```

# android - android有没有办法在手机上测试xml文件

> ID：14520542
> 
> 赞同：1
> 
> 时间：2013-01-25T11:08:03.530
> 
> 标签：android, android-xml

我需要知道是否有任何方法可以在不运行整个应用程序的情况下在手机上测试我的 xml 外观，我的意思是只对 xml 文件没有任何操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:19:29.203

不，没有在设备上重新编译和运行的情况下没有直接的方法来检查 xml。

但是您可以使用图形布局编辑器检查近似屏幕上的布局，或者可以创建与您的屏幕相似的屏幕，具有相同的 DPI 和大小。

并在图形布局编辑器上检查它。

注意：设备上的 XML 只是 XML。当您编译 XML 时，它会被读取并转换为基于视图的代码，这实际上是您的 UI。

# asp.net - 设置会话超时

> ID：14520543
> 
> 赞同：0
> 
> 时间：2013-01-25T11:08:17.150
> 
> 标签：asp.net, visual-studio-2010, session, timeout

我已经从这里和外面阅读了一些其他线程，但没有任何效果......我有一些`Sessions`喜欢（登录名，列的值......）。我想设置一个`Sessions`过期时间......我试过了：

```
Session.TimeOut = "60"; 
```

并且还使用`web.cfg`

```
<configuration>
  <system.web>
     <sessionState timeout="60"></sessionState>
  </system.web>
</configuration> 
```

我`Session`在每个 page_load 上进行测试，例如：

```
if(Session["login"] == null)
{
   Response.Redirect("/Login.aspx");
} 
```

但似乎`Session`在导航中间迷路了，因为一段时间后 (1min, 5min, 2min ....) 它返回到`login page`. 这里有什么问题？我还阅读了一些关于`Membership Authentication`但我无法理解的文章 =\
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:18:04.710

您应该检查您是否不重定向到不同的（子）域。在每个域上，用户将获得一个单独的会话。例如：

```
http://ww.mydomain.com
http://wwww.mydomain.com 
```

有单独的会议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:25:19.753

一旦应用程序池回收，您也将丢失会话。如果您发现任何有用的信息，请查看此链接[http://blogs.msdn.com/b/johan/archive/2007/05/16/common-reasons-why-your-application-pool-may-unexpectedly-recycle.aspx](http://blogs.msdn.com/b/johan/archive/2007/05/16/common-reasons-why-your-application-pool-may-unexpectedly-recycle.aspx)这可能会帮助您解决问题。

我曾经遇到过类似的问题，在 web.config 中将会话超时设置为 60 分钟，但在 20 分钟后会话仍然丢失。原来是 IIS 设置中的错误设置导致应用程序池回收，因此会话消失了。

# jsp - Spring jsp模板继承设计

> ID：14520546
> 
> 赞同：0
> 
> 时间：2013-01-25T11:08:24.997
> 
> 标签：jsp, spring-mvc

我正在寻找一种简单的方法来从 spring 的一个模板中继承设计（导航、全局导入等）。

这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:16:09.067

看起来，这里不会再添加答案了，似乎在 Spring 中没有内置模板引擎。这是模板引擎的不完整列表： [模板列表](http://en.wikipedia.org/wiki/Template_engine_%28web%29#Comparison)

# python - 避免打印中的虚假空间

> ID：14520555
> 
> 赞同：0
> 
> 时间：2013-01-25T11:08:51.197
> 
> 标签：python, printing

我没想到会这样，但是：

```
print "AAAA",
print "BBBB" 
```

将输出：

```
AAAA BBBB 
```

中间有一个额外的空间。这实际上是[记录在案](http://docs.python.org/2/reference/simple_stmts.html#print)的。

我怎样才能避免那个多余的空间？文档说：

```
In some cases it may be functional to write an empty string to standard output for this reason. 
```

但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:14:36.990

三个选项：

*   不要使用两个打印语句，而是连接值：

    ```
    print "AAAA" + "BBBB" 
    ```

*   使用`sys.stdout.write()`直接写你的语句，而不是使用`print`语句

    ```
    import sys

    sys.stdout.write("AAAA")
    sys.stdout.write("BBBB\n") 
    ```

*   使用[向前兼容的新`print()`功能](http://docs.python.org/2/library/functions.html#print)：

    ```
    from __future__ import print_function

    print("AAAA", end='')
    print("BBBB") 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:12:19.690

习惯使用`print()`函数而不是语句。它更灵活。

```
from __future__ import print_function

print('foo', end='')
print('bar') 
```

# ios - 从IOS中的故事板访问视图时帧值错误

> ID：14520561
> 
> 赞同：12
> 
> 时间：2013-01-25T11:09:03.847
> 
> 标签：ios, ios6, uistoryboard

我正在从情节提要访问框架的大小。下面是我从情节提要访问框架属性的代码。

```
SmallView *smallView = [self.storyboard instantiateViewControllerWithIdentifier:@"SmallView"];
CGRect frame = smallView.view.frame;
self.containerView.frame = frame; 
```

在故事板中，视图的帧大小为 (200,400)。但是当我从代码中访问帧大小时，它总是给出 (320,460)。为什么？在上面的代码中，我从情节提要中获得了小视图对象，因此情节提要中应该显示但未显示的视图框架的值是多少。始终显示（320,460）。

为了快速调试，您可以查看以下源代码。

> [https://dl.dropbox.com/u/90940570/FrameTest.zip](https://dl.dropbox.com/u/90940570/FrameTest.zip)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-25T17:20:45.483

取消选中检查器中的“Resize View From Nib”框。这应该为您提供自由形式视图控制器的正确尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:27:29.647

获取可能甚至不显示的 viewController 视图的框架不是一个好习惯。您可以假设一切就绪的一点是 viewControllers 的 ViewDidLoad 方法。

# c++ - 为什么 Qt 设计器生成的对象总是在堆中分配？

> ID：14520581
> 
> 赞同：2
> 
> 时间：2013-01-25T11:10:23.793
> 
> 标签：c++, qt, qt-designer

我使用 Qt 设计器来设计 UI。在将设计实现到代码中时，我使用[多重继承方法](http://qt-project.org/doc/qt-5.0/qtdesigner/designer-using-a-ui-file.html#the-multiple-inheritance-approach)。我没有真正的理由使用这种方法，我只是发现它更容易。

无论如何，当我查看生成的头文件时，我在 setupUi() 函数中注意到所有内容都分配在堆中。我真的不需要对象比它的父对象寿命更长，根据[这个](https://stackoverflow.com/questions/11477523/when-and-why-to-declare-member-variables-on-the-heap-c)，在我的情况下，它不应该在堆中分配。

在父对象只是分配在堆栈中的一个小模态对话框的情况下，它的 UI 对象分配在堆中不是浪费吗？

有解决办法吗？我应该停止担心吗？我还没有发现这已成为问题的情况，但我仍然对此感到好奇。事实上，这根本不是问题。我只是想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:19:02.620

别担心……虽然 QT 的设计并不排除在堆栈上组装一组小部件。父小部件和子小部件之间存在所有权层次结构。父小部件拥有它的所有子小部件。如果分配没有以正确的顺序完成（首先是孩子），堆栈分配可能会破坏导致双重删除，请参阅有关此主题的[QT 文档](http://doc.qt.digia.com/qt/objecttrees.html)（@Subaru 挖掘此问题），对我个人而言，这样的警告通常意味着它不是真的一个好主意。由于这个原因，无法复制 Iirc 'QObject' 和 'QWidget' 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:35:16.780

一般的 Qt 实践是对任何 QObject 使用堆分配，除非它的生命周期仅限于当前范围。这可能看起来很浪费，但在构建 UI 的上下文中，任何性能影响都可以忽略不计。

另请注意，由于 Qt 广泛使用 pimpl 习惯用法，每个创建的 QObject 都有一个内部 QObjectPrivate，它始终是堆分配的，因此根本不可能将所有内容都保留在堆栈上。

所以我建议你不要再担心了。:)

# android - 检查2G网络

> ID：14520584
> 
> 赞同：1
> 
> 时间：2013-01-25T11:10:31.793
> 
> 标签：android, android-networking

我正在编写一个监听连接变化的广播接收器。

我的目标是检查 2g 网络是否可用（是否有 wifi）。

我一直在阅读几篇文章并重写我的课程，但无法得到正确的结果......

任何帮助都会很棒...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:36:08.763

如果您真的只关心使用 2G，这将起作用。

```
private boolean is2gNetwork() {
    ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo network = conMgr.getActiveNetworkInfo();

    // Check we're connected with a mobile network
    if (null != network && network.isConnectedOrConnecting()
            && network.getType() == ConnectivityManager.TYPE_MOBILE) {

        // Check we're on GPRS or EDGE
        final int subType = network.getSubtype();
        return subType == TelephonyManager.NETWORK_TYPE_EDGE
                || subType == TelephonyManager.NETWORK_TYPE_GPRS;
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:22:34.370

尝试使用[ConnectivityManager](http://developer.android.com/reference/android/net/ConnectivityManager.html)类`getActiveNetworkInfo()`的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:26:31.807

试试这个。

```
 ConnectivityManager con = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
if (con != null) {
    NetworkInfo info = con.getActiveNetworkInfo();
    if (info != null && (info.isAvailable() || !info .isConnected())) {
    // do your code part
    }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:35:41.630

试试这个

```
 public void CheckStatus() {               

    ConnectivityManager connectionstate = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo network = connectionstate.getActiveNetworkInfo(); 

    if (network != null && network.isConnected() == true) {
        Toast.makeText(this, "Network Available", Toast.LENGTH_SHORT).show();           
    } else {            
        Toast.makeText(this, "Network Not Available", Toast.LENGTH_SHORT).show();    

        .show();         
    }
} 
```

# web - 使用 DNS 区域编辑器将非 www 重定向到 www？

> ID：14520591
> 
> 赞同：9
> 
> 时间：2013-01-25T11:10:42.180
> 
> 标签：web, dns, http-status-code-404, cname

我刚刚购买了一项新的流量跟踪服务，该服务要求我的域（在 GoDaddy 注册）具有指向其服务器的 CNAME 记录。

我做得很好，现在可以正常工作了。

但是，在**没有**“www”的情况下输入它时，我得到一个 404 错误页面。

我的问题是，我将在 DNS 区域编辑器中键入什么内容以将我的“非 www”域重定向到“www”域？

例如，我需要我的 URL 来执行此操作……</p>

[http://mydomain.com/1234](http://mydomain.com/1234) --> [http://www.mydomain.com/1234](http://www.mydomain.com/1234)

会用“姓名记录”之类的吗？还是另一种方式？

我到处搜索，找不到有效的解决方案，所以希望你能提供帮助。

谢谢，詹姆斯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T05:00:47.363

假设您只想将所有流量`mydomain.com`（称为“裸”域）发送到`www.mydomain.com`您应该能够使用域转发。在 GoDaddy 中，这将位于底部“域信息”下的域管理器中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-24T19:02:36.340

对于那些在 Godaddy 注册了 AWS 和域的服务器：

我用 2 个条目（主机：@ 和 www）设置了我的 A 记录，如下所示，以通过公共 IP 重定向到我在 AWS 中的服务器。这会捕获带有/不带有 www 前缀的 URL

[![在此处输入图像描述](../Images/6c586fc92b5813dc9409aeca07bc877f.png)](https://i.stack.imgur.com/OqZNo.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T07:42:52.813

使用 DNS 管理器，我们无法重定向我们的（裸）域

> (example.com)

到 www 版本

> (www.example.com)

为此，我们需要网络托管。因为我尝试过，但结果为零。在我看来，使用域托管是不可能的。通过使用转发域，我如何转发是在这里。简而言之。有一个选项**转发到** 我的域在

> (www.example.com) 版本。如果我使用此选项，它将根据这些设置重定向到（example.com）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-04T08:02:44.250

注意我的：

```
1] Domain name : GoDaddy
2] Hosted (code) : Heroku (minimum $25/month dyno, dyno is virtual machine, dyno is equivalent to EC2 of AWS)
3] SSL certificate : Bought on GoDaddy  ; and endpoint on Heroku (heroku minimum SSL endpoint on $20/month) 
```

这些工作：

```
https://www.example.com/  
http://www.example.com/  
www.example.com 
```

这些不起作用：

```
example.com 
http://example.com/
https://example.com/ 
```

我的heroku ssl插件有：

```
www.example.com
example.com 
```

解决方法：第一步：在cmd/shell中

[![在此处输入图像描述](../Images/ff6f9c041c4cef082190e21cacb5660e.png)](https://i.stack.imgur.com/fFz0i.png)

[![在此处输入图像描述](../Images/5dfe9e2e38e902d046ef7804392dd9b9.png)](https://i.stack.imgur.com/fnHMc.png) [![在此处输入图像描述](../Images/25aeecc83b083d49709ac7015fb4676b.png)](https://i.stack.imgur.com/4NEoq.png)

复制上面的 IP 地址并在步骤 2 中使用

第 2 步：在 GoDaddy 帐户中

[![在此处输入图像描述](../Images/35650c7ab43c6905610e78170fbe54fe.png)](https://i.stack.imgur.com/t2u4p.png)

完毕！！！

注意：1）如果您必须使用此解决方案，请删除转发 2）CNAME - www - sslendpoint

# grails - 如何获取所有在grails中具有特定角色的用户

> ID：14520592
> 
> 赞同：2
> 
> 时间：2013-01-25T11:10:44.180
> 
> 标签：grails, find

我想检索所有具有特定角色的用户，例如“ROLE_USER”。

下面是用户、角色和用户角色的域类。

**用户.groovy**

```
class User {

    transient springSecurityService

    String username
    String password
        String email
    boolean enabled
    boolean accountExpired
    boolean accountLocked
    boolean passwordExpired

    static constraints = {
        username blank: false, unique: true
        password blank: false
    }

    static mapping = {
        password column: '`password`'
    }

    Set<Role> getAuthorities() {
        UserRole.findAllByUser(this).collect { it.role } as Set
    }

    def beforeInsert() {
        encodePassword()
    }

    def beforeUpdate() {
        if (isDirty('password')) {
            encodePassword()
        }
    }

    protected void encodePassword() {
        password = springSecurityService.encodePassword(password)
    }
} 
```

**角色.groovy**

```
class Role {

    String authority

    static mapping = {
        cache true
    }

    static constraints = {
        authority blank: false, unique: true
    }
} 
```

**用户角色.groovy**

```
class UserRole implements Serializable {

    User user
    Role role

    boolean equals(other) {
        if (!(other instanceof UserRole)) {
            return false
        }

        other.user?.id == user?.id &&
            other.role?.id == role?.id
    }

    int hashCode() {
        def builder = new HashCodeBuilder()
        if (user) builder.append(user.id)
        if (role) builder.append(role.id)
        builder.toHashCode()
    }

    static UserRole get(long userId, long roleId) {
        find 'from UserRole where user.id=:userId and role.id=:roleId',
            [userId: userId, roleId: roleId]
    }

    static UserRole create(User user, Role role, boolean flush = false) {
        new UserRole(user: user, role: role).save(flush: flush, insert: true)
    }

    static boolean remove(User user, Role role, boolean flush = false) {
        UserRole instance = UserRole.findByUserAndRole(user, role)
        if (!instance) {
            return false
        }

        instance.delete(flush: flush)
        true
    }

    static void removeAll(User user) {
        executeUpdate 'DELETE FROM UserRole WHERE user=:user', [user: user]
    }

    static void removeAll(Role role) {
        executeUpdate 'DELETE FROM UserRole WHERE role=:role', [role: role]
    }

    static mapping = {
        id composite: ['role', 'user']
        version false
    }
} 
```

这些域类是由**Spring Security**插件生成的。
我只为用户类添加了电子邮件字段。

这是我的**UserController.groovy**

```
class UserController {

    def index = {
       }

    def list = {

        def role = Role.findByAuthority("ROLE_USER")
        println "role id "+role.id

        def users = User.findAll()         //Its giving me all Users regardless of Role
        println "total users "+users.size()
        for(user in users)
        {
            println "User "+user.username+" "+user.email
        }
        render (view: "listUsers", model:[users:users])

    }
} 
```

在我使用的列表操作中，`User.findAll()`但它给了我所有角色的所有用户。
我只想要某个角色的用户列表..

**编辑**

将角色分配给新创建的用户的代码

```
def username = params.username
def emailID = params.emailID
def password = params.password

def testUser = new User(username: username, enabled: true, password: password,email:emailID)
testUser.save(flush: true)
def userRole = new Role(authority: 'ROLE_USER').save(flush: true)
UserRole.create testUser, userRole, true 
```

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:19:30.813

代替

```
def users = User.findAll() 
```

和

```
def users = UserRole.findAllByRole(role).user 
```

并且您应该获得具有所需角色的所有用户。

**编辑**

在您的代码示例中，您尝试为用户创建一个新角色。由于具有 ROLE_USER 权限的角色已经存在并且权限必须是唯一的（请参阅角色类中的“约束”部分），因此无法将这个新角色保存到数据库中。因为您分配的角色`UserRole.create`在数据库中不存在，所以也没有保存 UserRole。您必须将现有角色分配给新用户（例如，使用“Role.findByAuthority”）。

根据 Spring Source，在 Bootstrap.groovy 中创建角色是一个好主意，因为角色“通常在应用程序生命周期的早期定义并对应于不变的参考数据。这使得 BootStrap 成为创建它们的理想场所。” ( [Spring源码博客](http://blog.springsource.org/2010/08/11/simplified-spring-security-with-grails/))

# jquery - jQuery显示表单警告框

> ID：14520594
> 
> 赞同：-1
> 
> 时间：2013-01-25T11:11:12.090
> 
> 标签：jquery, jquery-validate, alert

嗨，我正在尝试显示一个警报或可样式化的弹出框，当按下提交按钮时显示空字段。我添加后，下面的代码停止工作`alert("Empty Fields!!");`

```
var validator = $("#reg_form").validate({
    errorLabelContainer: $("#reg_form div.error"),
    meta: "validate",
    alert("Empty Fields!!");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:06:25.760

在另一个答案被接受后，我发布这个是为了未来的读者，因为其他答案似乎都包含一些技术错误并且缺乏解释。

* * *

`.validate()`当 JavaScript 只接受`key:value`成对形式的预定义选项时，您不能简单地将其插入。请参阅所有可用选项的文档：http: [//docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)。

如您所见，您需要分配给`alert("Empty Fields!!");`一个`function`可用的`callback`处理程序。由于消息是`Empty Fields!!`，我将选择`invalidHandler`回调选项。 [根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，`invalidHandler`是： “提交***无效****表单**时回调自定义代码。”*

 **相反，`submitHandler:`是： “表单***有效****时处理实际提交的回调。”* **~ 由于消息包含`Empty Fields!!`，因此您不希望在有效表单上显示它。**

 **`.validate()`将您的函数包含在一个函数中也是一个好主意，`document.ready`以确保在初始化插件时完全构建 HTML 表单。

**工作演示：http: [//jsfiddle.net/QYCwH/](http://jsfiddle.net/QYCwH/)**

```
$(document).ready(function() {
    var validator = $("#reg_form").validate({
        errorLabelContainer: $("#reg_form div.error"),
        meta: "validate",
        invalidHandler: function(form, validator) {
            alert("Empty Fields!!");
        }
    });
}); 
```

* * *

**请注意：** 在这种情况下，分配`.validate()`给名为`validator`. 由于`.validate()`只应在准备*初始化插件的 DOM 上调用**一次*，因此您无需再次引用它，因此将其分配给变量确实没有任何好处。

 *如果您需要触发表单的验证测试或需要表单当前状态的布尔值，只需[使用`.valid()`方法](http://docs.jquery.com/Plugins/Validation/valid).

```
$("#reg_form").valid();  // triggers a validation check without having to submit 
```

或者

```
if ($("#reg_form").valid()) { ...  // tests to see if the form is valid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:15:50.600

我假设[http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)是您的代码引用的 jQuery 插件。

您不能在类声明中使用警报。您将不得不像这样重写它：

```
var validator = $("#reg_form").validate({
    errorLabelContainer: $("#reg_form div.error"),
    meta: "validate",
    submitHandler: function( form ) {
        alert("Empty Fields!!");
    }
}); 
```

或使用 invalidHandler: function(form, validator) 而不是 submitHandler

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:17:51.507

供您将来参考的朋友

validate 接受格式为 {'key1':'value1','key1':'value1'} 的 json 字符串，因此键值和键值对之间必须有分号，并且键值对用逗号分隔，所以请将其用作键值对，即 {'error':function(){alert('hello');}}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:13:47.410

```
var validator = $("#reg_form").validate({
    errorLabelContainer: $("#reg_form div.error"),
    meta: "validate",
    error: function(){alert("Empty Fields!!")};
}); 
```

只需`error`用适当的属性替换该属性...

更新 ：：

刚刚检查了 jQ 文档...

将`error`处理程序替换为`submitHandler`

```
var validator = $("#reg_form").validate({
    errorLabelContainer: $("#reg_form div.error"),
    meta: "validate",
    submitHandler: function(myForm){alert("Empty Fields!!")};
}); 
```*****

# android - IllegalStateException("你不能设置 Dialog 的 OnCancelListener 或 OnDismissListener")

> ID：14520597
> 
> 赞同：35
> 
> 时间：2013-01-25T11:11:18.013
> 
> 标签：android, android-dialogfragment

此 DialogFragment 实现会导致

> IllegalStateException("你不能设置 Dialog 的 OnCancelListener 或 OnDismissListener")

. 为什么？解决方案？

```
public class OkCThreadDialog1 extends DialogFragment{

DialogInterface.OnCancelListener onCancelListener;

public OkCThreadDialog1(){
}

public static OkCThreadDialog1 newInstance(String title, String message) {
    OkCThreadDialog1 frag = new OkCThreadDialog1();
    Bundle args = new Bundle();
    args.putString("title", title);
    args.putString("message", message);
    frag.setArguments(args);
    return frag;
}

public Dialog onCreateDialog(Bundle savedInstanceState){

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    builder .setTitle(getArguments().getString("title"))
            .setMessage(getArguments().getString("message"))
            .setOnCancelListener(onCancelListener)
            .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                }})
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    getDialog().cancel();
                }});

    return builder.create();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    // Verify that the host activity implements the callback interface
    try {
        onCancelListener = (DialogInterface.OnCancelListener) activity;
    } catch (ClassCastException e) {
        // The activity doesn't implement the interface, throw exception
        throw new ClassCastException(activity.toString()
                + " must implement OkCancelDialogListener");
    }
}
} 
```

我的活动实现`DialogInterface.OnCancelListener`如下：

```
public class MainActivity extends Activity implements OkCancelDialogListener{

static final String TAG ="MainActivity";

@Override
public void onCancel(DialogInterface dialog) {

}
} 
```

从 抛出异常`builder.create();`。怎么了？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-02-14T13:46:57.383

来自[Android 文档](https://developer.android.com/reference/android/app/DialogFragment#onCreateDialog(android.os.Bundle))：

> public Dialog onCreateDialog (Bundle savedInstanceState)
> 
> 覆盖以构建您自己的自定义对话框容器。这通常用于显示 AlertDialog 而不是通用 Dialog；这样做时，不需要实现 onCreateView(LayoutInflater, ViewGroup, Bundle)，因为 AlertDialog 会处理自己的内容。
> 
> 此方法将在 onCreate(Bundle) 之后和 onCreateView(LayoutInflater, ViewGroup, Bundle) 之前调用。默认实现只是实例化并返回一个 Dialog 类。
> 
> **注意：DialogFragment 拥有 Dialog.setOnCancelListener 和 Dialog.setOnDismissListener 回调。你不能自己设置它们。**
> 
> **要了解这些事件，请覆盖 onCancel(DialogInterface) 和 onDismiss(DialogInterface)。**

所以基本上，你必须覆盖 onDismiss 或 OnCancel 而不是 '.setOnCancelListener(onCancelListener)'。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-20T14:07:36.620

你可以试试这个：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle("Title");
    builder.setMessage("Message");
    builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // do something positive
        }
    });
    return builder.create();
}

@Override
public void onCancel(DialogInterface dialog) {
    // do something
} 
```

希望它可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:16:02.093

您为对话框设置 OnCancelListener，而不是为其构建器设置。

```
public Dialog onCreateDialog(Bundle savedInstanceState){

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder .setTitle(getArguments().getString("title"))
        .setMessage(getArguments().getString("message"))
        .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
            }})
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                getDialog().cancel();
            }});

    Dialog dialog = builder.create();
    dialog.setOnCancelListener(onCancelListener);
    return dialog;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-25T13:25:35.607

试试这个代码，我希望这会起作用..

```
AlertDialog.Builder builder = new AlertDialog.Builder(
            class_name.this);
    builder.setTitle("Title");      
    AlertDialog dialog = builder.create();
    dialog.setButton("ok", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {            

    });

    dialog.setButton2("Cancel", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

            dialog.cancel();

        }
    });
    dialog.show(); 
```

# java - DefaultClientConnection 自动关闭

> ID：14520598
> 
> 赞同：0
> 
> 时间：2013-01-25T11:11:24.570
> 
> 标签：java, multithreading, apache-httpclient-4.x

我是 HttpClient 的新手。我正在使用`DefaultHttpClient`（据说是线程安全的）。在我的应用程序中，我创建了两个线程，它们计划每 10 分钟同时执行一次。**有时我发现`DefaultClientConnection`自动关机。**

1.  可能的原因是什么？
2.  虽然`DefaultHttpClient`是线程安全的，但我需要`PoolingClientConnectionManager`在这种情况下使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:32:05.560

您应该使用 PoolingClientConnectionManager。此外，您必须使用 IdleConnectionMonitorThread 来监控空闲连接。

我的一些代码：

```
private final PoolingClientConnectionManager connectionManager;
private final IdleConnectionMonitorThread connectionMonitorThread = null;
private final DefaultHttpClient httpclient; 
```

初始化：

```
 final HttpParams params = new BasicHttpParams();
    final HttpProtocolParamBean paramsBean = new HttpProtocolParamBean(params);
    paramsBean.setVersion(HttpVersion.HTTP_1_1);
    paramsBean.setContentCharset("UTF-8");
    paramsBean.setUseExpectContinue(false);
    params.setBooleanParameter(HttpConnectionParams.STALE_CONNECTION_CHECK, false);
    params.setIntParameter("http.socket.timeout", 20000);
    params.setIntParameter("http.connection.timeout", 30000);
    params.setBooleanParameter("http.protocol.handle-redirects", true);
    params.setBooleanParameter(HttpConnectionParams.TCP_NODELAY, true);

    params.setIntParameter(HttpConnectionParams.SOCKET_BUFFER_SIZE, 32 * 1024);

    params.setParameter("http.protocol.cookie-policy", CookiePolicy.BROWSER_COMPATIBILITY);
    // params.setParameter("http.useragent", "Crawler Airupt(http://www.airupt.com/)");
    params.setParameter("http.useragent",
            "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1");
    params.setParameter("http.language.Accept-Language", "en-us");
    params.setParameter("http.protocol.content-charset", "UTF-8");
    params.setParameter("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    params.setParameter("Cache-Control", "max-age=0");

    final SSLSocketFactory socketFactory = SSLSocketFactory.getSocketFactory();
    final SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(new Scheme("http", 80, PlainSocketFactory.getSocketFactory()));
    schemeRegistry.register(new Scheme("https", 443, socketFactory/* SSLSocketFactory.getSocketFactory() */));

    connectionManager = new PoolingClientConnectionManager(schemeRegistry);
    connectionManager.setDefaultMaxPerRoute(500000);
    connectionManager.setMaxTotal(2000000);

    httpclient = new DefaultHttpClient(connectionManager, params);
    httpclient.setKeepAliveStrategy(new ConnectionKeepAliveStrategy() {
        @Override
        public long getKeepAliveDuration(final HttpResponse response, final HttpContext context) {
            final HeaderElementIterator it = new BasicHeaderElementIterator(response
                    .headerIterator(HTTP.CONN_KEEP_ALIVE));
            while (it.hasNext()) {
                final HeaderElement he = it.nextElement();
                final String param = he.getName();
                final String value = he.getValue();
                if (value != null && param.equalsIgnoreCase("timeout")) {
                    try {
                        return Long.parseLong(value) * 1000;
                    } catch (final NumberFormatException ignore) {
                    }
                }
            }
            return 30 * 1000;
        }
    });

    httpclient.setRedirectStrategy(new DefaultRedirectStrategy());

    httpclient.addRequestInterceptor(new HttpRequestInterceptor() {

        @Override
        public void process(final HttpRequest request, final HttpContext context) throws HttpException, IOException {
            if (!request.containsHeader("Accept-Encoding")) {
                request.addHeader("Accept-Encoding", "gzip");
            }
        }

    });

    httpclient.addResponseInterceptor(new HttpResponseInterceptor() {

        @Override
        public void process(final HttpResponse response, final HttpContext context) throws HttpException, IOException {
            response.setEntity(new BufferedHttpEntity(response.getEntity()));
            final HttpEntity entity = response.getEntity();
            final Header ceheader = entity.getContentEncoding();
            if (ceheader != null) {
                final HeaderElement[] codecs = ceheader.getElements();
                for (int i = 0; i < codecs.length; i++) {
                    if (codecs[i].getName().equalsIgnoreCase("gzip")) {
                        response.setEntity(new GzipDecompressingEntity(response.getEntity()));
                        return;
                    }
                }
            }
        }

    });

    startConnectionMonitorThread(); 
```

几种添加方法：

```
 private synchronized void startConnectionMonitorThread() {
    if (connectionMonitorThread == null) {
        connectionMonitorThread = new IdleConnectionMonitorThread(connectionManager);
    }
    connectionMonitorThread.start();
}

private synchronized void stopConnectionMonitorThread() {
    if (connectionMonitorThread != null) {
        connectionMonitorThread.shutdown();
        connectionManager.shutdown();
    }
}
    public void shutdown() {
    stopConnectionMonitorThread();
    final ClientConnectionManager cm = httpclient.getConnectionManager();
    if (cm != null) {
        httpclient.getConnectionManager().shutdown();
    }
} 
```

使用：

```
final HttpGet httpGet = new HttpGet(url);
final HttpResponse response = httpclient.execute(httpGet);
final StatusLine statusLine = response.getStatusLine();
final int responseCode = statusLine.getStatusCode();
if (responseCode >= 300) {
    logger.error(" {}. Received statusCode {}", url, responseCode);
    httpGet.abort();
    //throw some exception;
}
final HttpEntity entity = response.getEntity();
if (entity == null) {
    //throw some exception or ignore;
}
                responseBody = EntityUtils.toString(entity); 
```

此代码/参数针对 Crawler 进行了优化。快速接收大量页面。使用 gzip（如果可能）和 https（如果需要）而不使用 cookie。要添加 cookie，您需要添加 cookieStore，例如 httpclient.setCookieStore();

# jquery - Sharepoint 站点中来自 IE9 的弹出警告，当被忽略时站点变慢

> ID：14520600
> 
> 赞同：0
> 
> 时间：2013-01-25T11:11:25.847
> 
> 标签：jquery, performance, sharepoint, internet-explorer-9

我们有一个带有模板表单 bind.pt 的 Sharepoint 站点。现在，每当我访问该站点时，我都会收到来自 IE9 的弹出警告，提示该站点的某些内容将被阻止。

如果我忽略警告，那么我可以非常快速地浏览该站点。但是当我接受警告并显示所有内容时，网站变得非常慢。我从 IE 启动调试器，很快我发现[https://code.jquery.com/jquery.min.js](https://code.jquery.com/jquery.min.js)最多需要 9 秒才能完成加载。

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:35:35.957

> http 而不是 https 通常加载速度更快

同意。

另外，考虑在内部而不是通过 jquery.com 托管该 .js

# javascript - undefined 和 null 的大小

> ID：14520610
> 
> 赞同：2
> 
> 时间：2013-01-25T11:12:12.833
> 
> 标签：javascript, variables

我可以问一个变量的 undefined 或 null 的大小，这在 javascript 中更大吗？

```
a = undefined

b = null

a > b ? undefined is bigger : null is bigger 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:42:26.787

类型是[无与伦比](http://en.wikipedia.org/wiki/Comparability)的。因此，a 和 b 都不是最大的：

```
> var a = undefined
undefined
> a
undefined
> var b = null
undefined
> b
null
> a > b
false
> b > a
false 
```

（来源：开发者工具的控制台）

编辑：如果您询问内存占用，这取决于您使用的 Javascript 引擎的实现。

# java - 使用 Java 加载 .so 文件

> ID：14520611
> 
> 赞同：0
> 
> 时间：2013-01-25T11:12:17.990
> 
> 标签：java, java-native-interface

我正在使用 JNI 在我的 Java 类中加载 *.so 文件。我通过将一些参数从 Java 传递给 .so 文件来进行 Web 服务调用。我已按以下方式加载了库。

```
System.load("/home/myserver/libfsdk.so"); 
```

我把它做成了一个 jar 并将参数传递给 main 方法。它工作正常。但是当我对一个方法进行 Web 服务调用然后使用上面的代码加载 .so 时，库没有被加载。如果我指定的路径是错误的，那么我可能遇到了 UnsatisfiedLinkError 异常。执行在上面的行停止而没有抛出任何异常。我已经用谷歌搜索了它并花了很多时间。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:29:22.287

尝试不使用“.so”

```
System.loadLibrary("/home/myserver/fsdk"); 
```

并且在方法 loadLibrary 中没有前缀 lib

# c++ - 将“operator<<”声明为非函数

> ID：14520614
> 
> 赞同：-3
> 
> 时间：2013-01-25T11:12:20.313
> 
> 标签：c++, operator-overloading, friend-function

我已经尝试了一切，我不明白为什么它不起作用。

> g++ 抛出：
> 
> Queue.H:53：错误：将“operator<<”声明为非函数
> 
> Queue.H:53：错误：预期 â;â 在â<â 标记之前
> 
> Queue.H:59：错误：预期 â;â 在“private” 之前

代码是：

```
#ifndef _Queue_H_
#define _Queue_H_
#include <iostream>
#include <string>
using namespace std;

template <class T, int size>

class Queue
{
public:
    Queue():_Num(0){
        T Arr=new T[size];
        for(int i=0;i<size;i++)
            Arr[i]=0;}
    ~Queue(){
        for (int i=0;i<_Num;i++)
            delete Arr_[i];
        delete [] Arr_;
    }
    bool IsEmpty() const{return !_Num ;}
    bool IsFull() const{return (_Num==size);}
    void count() const{return _Num;}
    T& Top() const {
        if(!IsEmpty())
            return Arr_[0];
        else
            throw("empty");
    }
    void operator << (const T & item ) {
        if(!IsFull()){
            Arr_[_Num+1]=item;
            _Num++;}
        else
            throw("full");}

    T  operator >> (T & item) {
        if(IsEmpty())
            throw("empty");

        item=Arr_[0];
        delete Arr_[0];
        for(int i=1;i<_Num;i++)
            Arr_[i-1]=Arr_[i];
        _Num--;
        return item;}

    T operator [] (const T &number){
        return (number<size) ?Arr_[number]:throw("overload");}

    friend ostream & operator << <T,size>(ostream & or ,const Queue<T,size> &a){
        for(int i=0;i<a._Num;i++)
            or<<a.Arr_[i];
        return or;
    }

private:
    T Arr_[size];
    int _Num;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:15:11.843

应在外部定义友元函数，您可能会遇到诸如[访问类中定义的友元函数之类](https://stackoverflow.com/questions/7785886/access-friend-function-defined-in-class)的问题。您应该只在类中留下一个朋友声明并在类外定义函数。

但是您的错误来自您命名模板变量的方式。

代替

```
friend ostream & operator << <T,size>(ostream & or ,const Queue<T,size> &a){ 
```

试试看

```
friend ostream & operator << (ostream & or ,const Queue<T,size> &a){ 
```

ps `_Num`-[坏主意](https://stackoverflow.com/a/228797/1520364)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:10:48.123

如果您像我一样担心紧耦合，那么您会特别担心`friend`（因为这是 C++ 必须提供的最紧耦合）。也就是说，有一种观点`operator<<`认为它可以在类内部轻松实现，而无需任何朋友声明：

简单来说，`operator<<`对于 ostream 来说，仅仅是对简单打印方式的一种美化。只是因为这种美化（链接`os << a << b << c...`调用），操作符不能成为它应该属于的类的方法。很多人求助于该运算符的朋友声明，imo 是一种打破丑陋解决方法的封装。所以，你可以做什么？

```
template <class T, int size>
class Queue
{
public:
    /**
     * Here comes the method. Inside the class, were it should be, 
     * having all the access it needs. 
     * No template-specialization-friend-declaration needed.
     */
    ostream & printToStream(ostream & or) const 
    { 
        for(int i=0;i<a._Num;i++)
            or<<Arr_[i];
        return or;
    }

private:
    T Arr_[size];
    int _Num;
};

/**
 * Here comes operator<<. It is what it really is:
 * Just a beautification, nothing more, no additional functionality.
 */
template <class T, int size> 
ostream& operator<<(ostream& os, Queue<T,size> const& q)
{ return q.printToStream(os); } 
```

看？没什么大不了的。如果您经常这样做，并且您的方法每次都调用 printToStream，您可以将其设为模板：

```
template <class Printable>
ostream& operator<<(ostream& os, Printable const& p)
{ return p.printToStream(os); } 
```

如果你想变得花哨，你可以 enable_if 那个操作符[只有当它有那个成员函数时](http://www.gockelhut.com/c++/articles/has_member)。没有更多的“朋友运算符<<我该怎么做？”，只需实现printToStream，美化运算符<<已经存在。

# c# - 制作和绘制图像 C#？

> ID：14520616
> 
> 赞同：-5
> 
> 时间：2013-01-25T11:12:35.413
> 
> 标签：c#, .net, winforms, image

在 C# 中有什么方法可以拍摄空图像并在其上画线吗？如果可能的话，你能告诉我一个如何做到这一点的例子吗？我以前见过这样的东西，但我不太了解如何做到这一点，而且我在网上发现的所有地方都是从预先存在的图像中做的，然后在它上面绘制。我不想加载任何东西，只是我正在处理的界面的一个不错的小东西。我知道这听起来像是我在要求代码，但我所要求的只是如何在不加载任何内容的情况下绘制图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:21:43.627

您需要在表单上创建一个面板。缓冲区是一个`Bitmap`.

然后使用`panel1_MouseDown`-Event 绘制一些东西：

```
 using (Graphics bufferGrph = Graphics.FromImage(buffer))
        {
            bufferGrph.DrawRectangle(new Pen(Color.Blue, 1), 1, 1, 100, 100); //Example
        }   
        panel1.Invalidate(); 
```

然后使用`panel1_Paint`- 事件在面板上绘制图像：

```
e.Graphics.DrawImageUnscaled(buffer, Point.Empty); 
```

要保存面板的内容，请使用控件：

```
Bitmap bmp = new Bitmap(panel1.Width,panel1.Height);
panel1.DrawToBitmap(bmp, panel1.Bounds);
bmp.Save(@"MYPATH HERE"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:17:23.807

您可以使用 GDI+（更具体地说是[`Graphics`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)类）：

```
// Load an existing image into a Graphics object
using (var image = Image.FromFile(@"c:\work\input.png"))
using (var gfx = Graphics.FromImage(image))
{
    // Draw a line on this image from (0x0) to (50x50)
    gfx.DrawLine(new Pen(Color.Red), 0, 0, 50, 50);

    // save the resulting Graphics object to a new file
    using (var output = File.OpenWrite(@"c:\work\output.png"))
    {
        image.Save(output, ImageFormat.Png);
    }
} 
```

* * *

更新：

如果你想创建一个新图像：

```
// Create a new image 50x50 in size
using (var image = new Bitmap(50, 50))
using (var gfx = Graphics.FromImage(image))
{
    // Draw a line on this image from (0x0) to (50x50)
    gfx.DrawLine(new Pen(Color.Red), 0, 0, 50, 50);

    // save the resulting Graphics object to a new file
    using (var output = File.OpenWrite(@"c:\work\output.png"))
    {
        image.Save(output, ImageFormat.Png);
    }
} 
```

# android - Android中String和字符串的区别

> ID：14520619
> 
> 赞同：-9
> 
> 时间：2013-01-25T11:12:51.950
> 
> 标签：android, string

`String`谁能告诉我Android和Android有什么区别`string`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:22:49.497

String 是库 java.lang.String 中的一个类，而 string 是一个 xml 文件

存在于 android 中的值中，您将在其中使用您将检索的值引用 id

在编码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:18:13.733

string 是指项目中 R 类中的字符串（子类）。

String 指 java.lang.String 包

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T11:24:11.627

我相信你在问[java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)和[android.R.string](http://developer.android.com/reference/android/R.string.html)。

`String`类在包中定义，该包`java.lang` 会自动导入您的 android 项目（实际上是所有 java 项目）。

string is `android.R.string`，它是 xml 中给出的静态字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T11:24:17.797

查看这些链接

[字符串文档](http://developer.android.com/reference/java/lang/String.html)

[字符串文档](http://developer.android.com/reference/android/R.string.html)

例如看下面的代码

```
String name = "";
  switch (row.getNameKey()) {
  case keyName1:
    name = getString(R.string.keyName1);
    break;
  case keyName2:
    name = ...
    ...
} 
```

R.string 用于从 Resources (Strings.xml) 中获取字符串...

# cordova - phonegap navigator.notification.alert

> ID：14520620
> 
> 赞同：0
> 
> 时间：2013-01-25T11:12:52.717
> 
> 标签：cordova, notifications, xcode4.5

我正在使用 xcode 4.5 和 cordova 2.1.0 并且有几个警报显示使用：

```
function showAlert(message)    {
navigator.notification.alert(
                             message,               // message
                             alertDismissed,
                             'My App',   // title
                             'close'                // buttonName
                             ); 
```

}

一切运行良好，但是，当我的应用程序发布到 Facebook 和 Twitter 时，成功回调会触发上面的 showAlert，这会导致警报同时触发并且看起来不太流畅。有没有办法将它们排队，所以只有一个触发，当用户关闭第一个窗口时，下一个触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:41:19.473

您可以在 jQuery 中使用 $.when 函数或使用具有淡入淡出效果的计时器。这应该看起来不错且流畅;-)

when() 的示例：

```
$.when($.ajax("/page1.php"), $.ajax("/page2.php")).then(myFunc, myFailure); 
```

效果计时器示例：

```
$('#foo').slideUp(300).delay(800).fadeIn(400); 
```

# css - 结合类ie8不起作用？

> ID：14520622
> 
> 赞同：0
> 
> 时间：2013-01-25T11:13:06.677
> 
> 标签：css, internet-explorer-8

我有以下CSS：

```
.class1,
.class2:hover,
.class3:disabled { color:red; } 
```

这适用于 Chrome、Firefox、Safari、IE9 和 IE7。唯一不支持此功能的浏览器是 IE8。

有没有办法让它工作？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:16:34.980

IE 8 完全不支持伪类[`:disabled`](http://reference.sitepoint.com/css/pseudoclass-disabled)（IE7 也不支持）。支持多个类`:hover`。

与 IE7 不同，IE8 根据[§4.1.7](http://www.w3.org/TR/CSS21/syndata.html#rule-sets)正确运行并忽略整个规则，因为它无法解释其中一个选择器。

# mysql - 数据阅读器有多个字段。多个字段对 EDM 基本类型无效

> ID：14520627
> 
> 赞同：6
> 
> 时间：2013-01-25T11:13:25.260
> 
> 标签：mysql, linq, executestorequery

我正在尝试使用`ExecuteStoreQuery`这样的 linq 方法从表中删除多行

```
 string query = "delete from IMPORTStatistics where districtid='" + districtId + "'";
 db.ExecuteStoreQuery<int>(query); 
```

但它抛出了这个异常

```
"The data reader has more than one field. Multiple fields are not valid for EDM primitive types." 
```

我究竟做错了什么？

仅供参考，我正在使用 MySql。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T11:16:24.293

鉴于您正在执行删除命令（而不是查询），我认为您应该使用[`ExecuteStoreCommand`](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.executestorecommand.aspx)而不是`ExecuteStoreQuery`.

此外，您*绝对*应该使用参数而不是将 ID 直接放入命令中。

```
string command = "delete from IMPORTStatistics where districtid={0}";
int rowsDeleted = db.ExecuteStoreCommand(command, districtId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T14:10:30.960

This is really helpful link after goggling I found this

[http://welcometoaspdotnet.blogspot.com/2012/08/execute-stored-procedure-with-entity.html](http://welcometoaspdotnet.blogspot.com/2012/08/execute-stored-procedure-with-entity.html)

thx

# ios - 从 -drawRewct 调用回调方法：使用 CoreGraphics

> ID：14520632
> 
> 赞同：0
> 
> 时间：2013-01-25T11:13:49.220
> 
> 标签：ios, objective-c, callback, core-graphics, objective-c++

我已经获得了一种用于样式的方法，称为 [in / from] 我的 UIView 子类的*-drawRect:*方法。不熟悉较低级别的 CG 语法我不知道如何调用以以下开头的方法：

```
void DrawInsetBeveledRoundedRect( CGContextRef context, CGRect rect, CGFloat radius, UIColor *fillColor) {} 
```

从*-drawRect:*。

任何人都可以请建议和或为我提供指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:20:45.253

```
- (void)drawRect:(CGRect)rect {
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    DrawInsetBeveledRoundedRect(ctx, rect, 1234, [UIColor greenColor]);
} 
```

# c# - 保存前的文档更改

> ID：14520635
> 
> 赞同：1
> 
> 时间：2013-01-25T11:13:52.913
> 
> 标签：c#, diff, document, envdte

我正在使用[EnvDTE](http://msdn.microsoft.com/en-us/library/envdte.document_properties.aspx)，并且通过该界面，我知道文档是否已保存（是否有任何更改）。

我现在想知道的是有什么方法可以获取以下信息：添加了多少行以及删除或修改了多少行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:47:35.627

查看 CodeModel。

[代码模型接口](http://msdn.microsoft.com/en-us/library/envdte.codemodel.aspx)

# javascript - 从表中检索数据到 jquery 模态框

> ID：14520637
> 
> 赞同：0
> 
> 时间：2013-01-25T11:14:05.317
> 
> 标签：javascript, jsp

我正在使用 JSP 做一个销售点项目，它有一个产品页面，其中使用模式形式添加项目，然后将其添加到 mysql 并显示在数据表中。我使用[Reveal modal](http://www.zurb.com/playground/reveal-modal-plugin)来设计我的表单。这是我做的[界面](http://s8.postimage.org/8zwsqrf6d/Capture.jpg)。

添加功能工作得很好，当我单击编辑（铅笔图标）时，我在编辑中遇到问题，模式框刚刚加载，我如何使用 jsp 或javascript。

我用来显示表格的代码如下

```
<tbody>

                            <%Product dbObj = new Product();
                                ResultSet rs = dbObj.captureItem();
                                while (rs.next()) {

                            %>
                            <tr id="">
                                <td><a href="" data-reveal-id="editModal"><i class="icon-pencil" name="btnEdit" style="color:black;"</a></i> | <a href=""><i class="icon-remove" style="color:black;"></i></a></td>
                                <td><% out.print(rs.getString("itemCode"));%></td>
                                <td><% out.print(rs.getString("packNo"));%></td>
                                <td><% out.print(rs.getString("itemName"));%></td>
                                <td><% out.print(rs.getString("material"));%></td>
                                <td><% out.print(rs.getString("category"));%></td>
                                <td><% out.print(rs.getString("size"));%></td>
                                <td><% out.print(rs.getString("supplierId"));%></td>
                                <td><% out.print(rs.getString("supplierName"));%></td>
                                <td><% out.print(rs.getDate("purchaseDate"));%></td>
                                <td><% out.print(rs.getInt("quantity"));%></td>
                                <td><% out.print(rs.getDouble("unitPrice"));%></td>
                                <td><% out.print(rs.getDouble("totalPrice"));%></td>
                                <td><% out.print(rs.getDouble("localRate"));%></td>
                                <td><% out.print(rs.getDouble("foreignRate"));%></td>
                                <td><% out.print(rs.getInt("reOrderLevel"));%></td>
                                <td><% out.print(rs.getString("location"));%></td>
                                <td><% out.print(rs.getString("description"));%></td>
                            </tr>
                            <%
                                }
                            %>
                        </tbody> 
```

> 请帮助我将项目代码获取到编辑模式框。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:24:41.443

我希望您在数组中维护了列名。使用以下代码根据编辑点击访问项目代码

```
 columns =["itemCode","packNo","itemName","material","category","size"];
 a={};
 $("td a").click(function(e){
      e.preventDefault(); 
      $(this).parent().nextAll().each(function(index,val){
      a[columns[index]]= $(val).text();
   });
  alert(a.itemCode);
 }); 
```

[演示](http://jsbin.com/ulenib/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:50:06.343

您只能在页面加载时分配 jsp 值..

在加载时为 javascript 变量赋值，稍后在编辑时使用它们

例如：在加载页面时声明 js 全局变量并分配值。

```
var itemcode=<%= rs.getString("itemCode")%>;
var packNo= '<%= rs.getString("packNo") %>';
var material=<%= rs.getString("material") %>;  etc.. 
```

然后在编辑按钮单击时使用这些值。

# python - 如何从提示密码 python 子进程

> ID：14520642
> 
> 赞同：0
> 
> 时间：2013-01-25T11:14:19.440
> 
> 标签：python, passwords, subprocess

我正在使用 python 中的 subprocess.Popen 模块运行 linux 命令。

```
proc = subprocess.Popen(["sudo","/usr/local/adduser"],shell=False,stdin=subprocess.PIPE,stdout=subprocess.PIPE).communicate() 
```

但这是提示输入密码。

是否可以使用 python 文件输入密码？（我的意思是自动）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:18:17.580

有明显的理由不这样做，但如果你真的想要，你可以使用[pyexpect模块来驱动与](http://pexpect.sourceforge.net/pexpect.html)*终端*交互的应用程序（例如询问密码的程序）。

`sudo`可以配置为不询问密码，对于您的特定示例，这可能是比将任何密码存储在文件中更好的解决方案。

# javascript - 如何选择新加载的 html 元素？

> ID：14520643
> 
> 赞同：0
> 
> 时间：2013-01-25T11:14:21.493
> 
> 标签：javascript, jquery, html, javascript-events

我在pageA.html上有div调用pageBplaceHolder，当用户点击一些功能时，pageBplaceHolder会加载pageB.html。

```
 var menu_request = $.ajax({
                url: pageB.html,
                type: 'GET',
                dataType: 'html'
            }); 
```

在 pageB.html 中，我有一个名为`inputField`.

所以，我想控制`inputField`javascript `pageA.html`。例如，我想关注它，但我不能通过使用来做到这一点：

`$('#inputField').focus();`

我怎样才能实现它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:18:08.493

您可以完全按照您描述的方式进行操作。您需要注意的是，该`<input>`节点确实具有的*ID*，并且您在将其插入 DOM*后*`inputField`执行该行。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:23:56.777

```
var menu_request = $.ajax({
    url : pageB.html,
    type : 'GET',
    dataType : 'html',
    success : function() {
        $('#inputField').focus();
    }
}); 
```*

# wolfram-mathematica - NMinimize 非常慢

> ID：14520644
> 
> 赞同：1
> 
> 时间：2013-01-25T11:14:24.367
> 
> 标签：wolfram-mathematica, minimization

你是我最后的希望。在我的大学里，没有人能回答我的问题。我有一个非常复杂的函数，取决于 6 个参数 a0、a1、a2、b0、b1、b2，它们最小化了由一个相当新的状态方程计算的压力、体积液体和体积蒸汽的增量。NMinimize 非常慢，我无法对这个等式做任何考虑，因为时间非常高。在代码中有一些关于我的代码的解释和一些问题。我跪下祈求你帮助我。很抱歉，在构建这些方程式 4 个月后，我无法对其进行测试。而且挫败感一天比一天高！

```
Clear["Global`*"];

 data = {{100., 34.376, 0.036554, 23.782}, {105., 56.377, 0.037143, 
 15.116}, {110., 88.13, 0.037768, 10.038}, {115., 132.21, 0.038431,
 6.9171}, {120., 191.43, 0.039138, 4.9183}, {125., 268.76, 
  0.039896, 3.5915}, {130., 367.32, 0.040714, 2.6825}, {135., 
 490.35, 0.0416, 2.0424}, {140., 641.18, 0.042569, 1.5803}, {145., 
823.22, 0.043636, 1.2393}, {150., 1040., 0.044825, 
0.98256}, {155., 1295., 0.046165, 0.78568}, {160., 1592.1, 
0.047702, 0.63206}, {165., 1935.1, 0.0495, 0.51014}, {170., 
2328.3, 0.051667, 0.41163}, {175., 2776.5, 0.054394, 
0.33038}, {180., 3285.2, 0.058078, 0.26139}, {185., 3861.7, 
0.063825, 0.19945}, {190., 4518.6, 0.079902, 0.12816}};
tvector = data[[All, 1]];(*K*)
pvector = 
data[[All, 2]];(*KPa*)
vlvector = data[[All, 3]];(*L/mol*)
vvvector = 
data[[All, 4]];
(*L/mol.*)
r = 8.314472;
tc = 190.56;
avvicinamento = Length[tvector] - 3;
trexp = Take[tvector, avvicinamento]/tc;
vlexp = Take[vlvector, avvicinamento];
vvexp = Take[vvvector, avvicinamento];
zeri = Table[i*0., {i, avvicinamento}];
pexp = Take[pvector, avvicinamento];
(*Function for calculation of Fugacity of CSD Equation*)
(*Function for calculation of Fugacity of CSD Equation*)
fug[v_, p_, t_, a_, b_] := 
Module[{y, z, vbv, vb, f1, f2, f3, f4, f}, y = b/(4 v);
z = (p v)/(r t);
vbv = Log[(v + b)/v];
vb = v + b;
f1 = (4*y - 3*y^2)/(1 - y)^2;
f2 = (4*y - 2*y^2)/(1 - y)^3;
f3 = (2*vbv)/(r t*b)*a;
f4 = (vbv/b - 1/vb)/(r t)*a;
f = f1 + f2 - f3 + f4 - Log[z];
Exp[f]]

(*g Minimize the equality of fugacity*)
g[p_?NumericQ, t_?NumericQ, a0_?NumericQ, a1_?NumericQ, a2_?NumericQ, 
b0_?NumericQ, b1_?NumericQ, b2_?NumericQ] := Module[{},
a = a0*Exp[a1*t + a2*t^2];
b = b0 + b1*t + b2*t^2;
csd = a/(r*t*(b + v)) - (-(b^3/(64*v^3)) + b^2/(16*v^2) + 
    b/(4*v) + 1)/(1 - b/(4*v))^3 + (p*v)/(r*t);
vol = NSolve[csd == 0 && v > 0, v, Reals];
sol = v /. vol;
(*If[Length[sol]==1,Interrupt[];Print["Sol==1"]];*)
vliquid = Min[sol];
vvapor = Max[sol];
fl = fug[vliquid, p, t, a, b];
fv = fug[vvapor, p, t, a, b];
(*Print[{t,p,vol,Abs[fl-fv]}];*)
Abs[fl - fv]];
(*This function minimize the pcalc-pexp and vcalc-vexp *)
hope[a0_?NumericQ, a1_?NumericQ, a2_?NumericQ, b0_?NumericQ, 
b1_?NumericQ, b2_?NumericQ] := 
Module[{}, 
pp[a0, a1, a2, b0, b1, b2] := 
Table[FindRoot[{g[p, tvector[[i]], a0, a1, a2, b0, b1, b2]}, 
{p,pvector[[i]]}],{i,avvicinamento}];
pressioni1 = pp[a0, a1, a2, b0, b1, b2];
pcalc = p /. pressioni1;
differenza = ((pcalc - pexp)/pexp)^2;
If[MemberQ[differenza, 0.], 
differenza = zeri + RandomReal[{100000, 500000}];(*
First problem:
As I've FindRoot that finds the solutions equal to the starting \
point, I don't want these kind of solutions and with this method - \
+RandomReal[{100000,500000}] - 
a keep away this solutions.Is it right? *)
deltap = Total[differenza],
differenzanonzero = Select[differenza, # > 0 &];
csd1[a_, b_, p_, t_] := 
 a/(r*t*(b + v)) - (-(b^3/(64*v^3)) + b^2/(16*v^2) + b/(4*v) + 
     1)/(1 - b/(4*v))^3 + (p*v)/(r*t);(*Funzione CSD*)
volumi = 
 Table[NSolve[csd1[a, b, pcalc[[i]], tvector[[i]]], v, Reals], {i,
    avvicinamento}];
soluzioni = v /. volumi;
vvcalc = Table[Max[soluzioni[[i]]], {i, avvicinamento}];
vlcalc = Table[Min[soluzioni[[i]]], {i, avvicinamento}];
deltavl = Total[((vlexp - vlcalc)/vlcalc)^2];
deltavv = Total[((vvexp - vvcalc)/vvcalc)^2];
deltap = Total[differenza];
Print[a0, "  ", b0, "   ", delta];
delta = 0.1*deltavl + 0.1*deltavv + deltap]];
NMinimize[{hope[a0, a1, a2, b0, b1, b2], 
500 < a0 < 700 && -0.01 < a1 < -1.0*10^-5 && -10^-5 < a2 < -10^-7 &&
0.0010 < b0 < 0.1 && -0.0010 < b1 < -1.0*10^-5 && 
10^-9 < b2 < 10^-7}, {a0, a1, a2, b0, b1, b2}] 
```

提前致谢！Mariano Pierantozzi 化学工程博士生

# javascript - jqplot设置默认值

> ID：14520646
> 
> 赞同：0
> 
> 时间：2013-01-25T11:14:25.537
> 
> 标签：javascript, jquery, jqplot

在我的代码中，当我没有将值放入 var line1 时，我想设置 y 轴“0”。现在我没有提供有关 ['2013-01-25 11:23am'] 的信息。

在这种情况下，我想将 y-asix 值设置为 0。不，它不是那样工作的。

我能怎么做？

```
function Drawchart() {

    this.showChart = function() {
        $(document).ready(
                function() {

                    var line1 = [ [ '2013-01-25 11:20am', 20 ],
                            [ '2013-01-25 11:35AM', 30 ],
                            [ '2013-01-25 11:36AM', 7 ],
                            [ '2013-01-25 11:37AM', 3 ],
                            [ '2013-01-25 11:38AM', 1 ],
                            [ '2013-01-25 11:39AM', 2 ] ];
                    var plot2 = $.jqplot('chart', [ line1 ], {
                        title : 'Customized Date Axis',
                        gridPadding : {
                            right : 35
                        },
                        axes : {
                            xaxis : {
                                renderer : $.jqplot.DateAxisRenderer,
                                pad : 0,
                                tickOptions : {
                                    angle : -90,
                                    fontSize : "5pt",
                                    formatString : '%I:%M%p '
                                },
                                min : '11:00 AM',
                                tickInterval : '1 minute'
                            },
                            yaxis : {

                                min : 0
                            }

                        },
                        series : [ {
                            lineWidth : 4,
                            color : '#000000',
                            markerOptions : {
                                style : 'square'
                            }
                        } ]
                    });
                });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:25:52.060

您不能，因为 JQPlot 需要知道必须在系列中绘制哪些点。

您需要`0`像这样手动设置点：`['2013-01-25 11:23am',0]`并将它们包含到数组中。

```
 var line1=[['2013-01-25 11:20am',20],['2013-01-25 11:23am',0],['2013-01-25 11:35AM',30],['2013-01-25 11:36AM',7],['2013-01-25 11:37AM',3],['2013-01-25 11:38AM',1],['2013-01-25 11:39AM',2]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:58:55.973

那些 0 是实际的数据点吗？如果是这样，那么您应该使用该数据构建您`line1`的数据或在 jqplot 之外对其进行扩充。

也许对您有帮助的还有[画布覆盖](http://www.jqplot.com/deploy/dist/examples/canvas-overlay.html)

```
$.jqplot('chart', [ line1 ], { 
    ...
    canvasOverlay: {
        show: true,
        objects: [
            {horizontalLine: {
                name: '',
                y: 0,
                lineWidth: 3,
                xOffset: 0,
                color: 'rgb(89, 198, 154)',
                shadow: false
            }}
        ]
    }  // end canvasOverlay
}); // end jqplot 
```

# android - 我如何拆分文本视图？

> ID：14520650
> 
> 赞同：0
> 
> 时间：2013-01-25T11:14:35.720
> 
> 标签：android, split, textview

我认为我的问题是基本的。但是，我找不到有关该信息以及如何执行此操作的信息。

可以拆分文本视图吗？在textview中间放一行？

```
 **TextView**
    ________________   
   |                |
   |________________|               
   |                |
   |________________| 
```

其他事情......想象一下textview的高度= 100dip。有可能只为 textview 的前 10% 着色吗？仅对前 10dp 着色？？

任何人都可以帮忙吗？谢谢四位您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:29:17.760

您可以`View`通过覆盖`onDraw`that 的方法在 Android 中自定义 a `View`。

您可能会考虑的是：

```
@Override
protected void onDraw(Canvas canvas) {
    // paint a line through the centre
    Paint paint = new Paint();
    canvas.drawLine(0, canvas.getWidth(), canvas.getHeight()/2, 
                    canvas.getHeight()/2, paint);
    super.onDraw(canvas);
} 
```

这将通过`View`（在您的情况下为 a `TextView`）的中心画一条线。您可以对 10%/90% 的着色使用相同的方法。

例如。

```
@Override
protected void onDraw(Canvas canvas) {
    // paint a region blue
    Paint paint = new Paint();
    paint.setColor(Color.BLUE);//or whatever colour you want
    canvas.drawRect(0, canvas.getHeight()/10, canvas.getWidth(),
                    canvas.getHeight(), paint)
    super.onDraw(canvas);
} 
```

Draw rect 接受参数：

```
canvas.drawRect(left, top, right, bottom, paint) 
```

还有其他选择，您可以传入实际的绘图 Rectangle 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:17:31.997

首先，您不能拆分 TextView。但是您可以通过将正确的图像设置为`android:setDrawableBottom="yourImage"`

# wordpress - 将标签列表添加到 wordpress rss

> ID：14520656
> 
> 赞同：0
> 
> 时间：2013-01-25T11:15:01.150
> 
> 标签：wordpress, rss, tags

如何将帖子的标签列表添加到 wordpress RSS 提要？我已经修改了我的 feed-rss.php 以导出作者和发布日期，但我找不到可以在 rss 中插入的函数，甚至是每个导出帖子的标签列表。

```
<?php
/**
 * RSS 0.92 Feed Template for displaying RSS 0.92 Posts feed.
 *
 * @package WordPress
 */

header('Content-Type: ' . feed_content_type('rss-http') . '; charset=' .     get_option('blog_charset'), true);
$more = 1;

echo '<?xml version="1.0" encoding="'.get_option('blog_charset').'"?'.'>'; ?>
<rss version="0.92">
<channel>
    <title><?php bloginfo_rss('name'); wp_title_rss(); ?></title>
    <link><?php bloginfo_rss('url') ?></link>
    <description><?php bloginfo_rss('description') ?></description>
    <lastBuildDate><?php echo mysql2date('D, d M Y H:i:s +0000',     get_lastpostmodified('GMT'), false); ?></lastBuildDate>
    <docs>http://backend.userland.com/rss092</docs>
    <language><?php echo get_option('rss_language'); ?></language>
    <?php do_action('rss_head'); ?>

<?php while (have_posts()) : the_post(); ?>
<item>
    <dc:creator><?php the_author() ?></dc:creator>
    <title><?php the_title_rss() ?></title>
    <description><![CDATA[<?php the_excerpt_rss() ?>]]></description>
    <link><?php the_permalink_rss() ?></link>
    <?php do_action('rss_item'); ?>
    <pubDate><?php echo mysql2date('D, d M Y H:i:s +0000', get_post_time('Y-m-d H:i:s', true), false); ?></pubDate>
    <tags><?php echo the_tags(); ?></tags>
</item>
<?php endwhile; ?>
</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:36:15.003

我认为 RSS 中没有单独获取标签的功能，因为所有标签都显示为类别。

尝试使用 wp_get_post_tags 方法加载标签并将它们添加到标签内。

# windows-8 - 如何触发 WinJS ListView 的加载动画

> ID：14520658
> 
> 赞同：2
> 
> 时间：2013-01-25T11:15:07.223
> 
> 标签：windows-8, winjs, winrt-async

有没有办法手动触发 ListView 的加载动画？

我在从 Web 服务启动时加载了一些数据，并希望显示一个繁忙的指示器。

```
 function searchData(url) {

        var promise = DataService.getData(query);

        promise.done(function (result) {
            console.dir(result);
            var bindingList = new WinJS.Binding.List(result);

            sectionListView.winControl.itemDataSource = bindingList.dataSource;

        });
    } 
```

这就是我在 app.onactivated 中所做的

```
promise = WinJS.UI.processAll();
        promise.done(function () {
            searchData(query);
        });
        args.setPromise(promise); 
```

我读到 ListView 应该在等待承诺时显示繁忙的动画......这是真的吗？或者这是我必须手动执行的操作...在需要时显示和隐藏 div？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:41:14.780

您需要创建自己的[自定义列表数据源](http://msdn.microsoft.com/en-us/library/windows/apps/hh770849.aspx)。WinJS 提供了很容易做到这一点的实用程序。这是针对 Bing Web 服务的[一个很好的示例。](http://code.msdn.microsoft.com/ListView-custom-data-4dcfb128)如果您需要更多关于如何编写自己的数据源/数据适配器的示例，请告诉我，我已经写了一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:11:59.467

[根据这个线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/1983e2cc-7ee5-440a-95f0-ee3e2e240bd9)，只有当 ListView 连接到异步数据源时才会出现进度环，而`WinJS.Binding.List`是同步的。我认为默认情况下没有任何可用的异步数据源，因此您必须设置自定义数据源才能获得该默认进度环。我建议只设置一个进度环以在您的应用程序启动时运行，并在`done`您的数据承诺块中将其删除。

# jquery - 仅在字符串的极端用单引号替换双引号

> ID：14520671
> 
> 赞同：-1
> 
> 时间：2013-01-25T11:15:25.440
> 
> 标签：jquery

我有一个字符串

```
var myString = "[{"portal.home":"Home"},{"displaytag.tracking.id":"Item ID"}]"; 
```

我希望输出为

```
myString  = '[{"portal.home":"Home"},{"displaytag.tracking.id":"Item ID"}]'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:23:57.753

如果创建带有双引号的字符串，则其中不能包含未转义的双引号。

你不能写

```
var myString = "A "B" C"; 
```

那将是一个语法错误。然而，

```
var myString = "A \"B\" C"; 
```

与以下内容完全相同：

```
var myString = 'A "B" C'; 
```

的结果值`myString`将*完全相同*。这不像第一个示例将在最终字符串中包含任何转义标记。转义只是为了帮助创建字符串，`A "B" C`在这两种情况下都将是 ; 记录时通常用双引号括起来，表示类型是字符串。

所以如果你运行`console.log(myString);`它会说`"A "B" C"`，但*值*是`myString`简单的`A "B" C`。这只是开发人员工具如何表示字符串的结果。字符串本身并没有说明它是用双引号创建的。开发人员工具同样可以用特殊颜色记录值，但是用双引号括起来恰好是表示字符串的传统方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:19:01.063

你可以这样做`.slice()`：

```
var newString =  "'" + myString.slice(1, -1) + "'"; 
```

或使用正则表达式：

```
var newString = myString.replace(/^"|"$/g, "'"); 
```

# mongodb - Web API 返回 XML 和 Json，只需要 Json

> ID：14520674
> 
> 赞同：0
> 
> 时间：2013-01-25T11:15:59.223
> 
> 标签：mongodb, asp.net-mvc-4, mongodb-.net-driver

嗨，我正在尝试创建 Web api，我可以调用它来查看 MongoDB 中的所有文档，现在文档非常大并且嵌套严重，我已设法返回文档，但在 Json 中，标题为 XML。

我需要在 Json 中返回这整件事！

此代码采用 BsonDocument 产品并将其作为 Json 返回，因为没有它我会收到错误：

```
[JsonIgnore]
        public BsonDocument Product { get; set; }

[DataMember]
        public string Product
        {
            get { return Product .ToJson(); }
            set { Product = BsonDocument.Parse(value); }
        } 
```

这是文档的示例（这是一个基本示例，实际文档要大得多，层次更深：

```
{
    "product": {
        "Type": "Phone",
            "Size": {
            "Height": 10,
                "Lenght": 5,
                "Weight": 30
        }
        "Make": "Apple"
        "Model": {
            "Name": "IPhone",
                "Range": "4s"
        }

    }
} 
```

它返回为

```
<Product>
{"product": {"Type": "Phone","Size": {"Height": 10,"Lenght": 5,"Weight": 30}"Make": "Apple", "Model": {"Name": "IPhone","Range": "4s"}}}
</Product> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:36:21.710

> 我该如何解决？

像这样：

```
public HttpResponseMessage Get()
{
    MyViewModel model = ...
    // This will contain the JSON you want to return to the client
    string product = model.Product;

    var response = new HttpResponseMessage();
    response.Content = new StringContent(product, Encoding.UTF8, "application/json");
    return response;
} 
```

# jquery - bind("dragenter dragover drop") 在 jQuery 1.7.1 中不起作用？

> ID：14520676
> 
> 赞同：1
> 
> 时间：2013-01-25T11:16:12.740
> 
> 标签：jquery, events, bind, drag

我有这个功能。它适用于 jQuery 1.3.2。当我更改为 jQuery 1.6.4 时，它仍然有效。

但是**从 jQuery 1.7.1 开始**，它就不再起作用了。

我不明白为什么。请帮忙。

```
$("#upload").bind('dragenter dragover drop mousemove', function (e) {

        e.originalEvent.stopPropagation();
        e.originalEvent.preventDefault();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:23:06.627

从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

# html - 使用 iframe 时复制假图像

> ID：14520681
> 
> 赞同：0
> 
> 时间：2013-01-25T11:16:18.547
> 
> 标签：html, css

我创建了一个网站，但有一个问题。我的标头和页脚位置：固定，并且我有一个视频页面。我的视频页面包含使用 iframe 的 Youtube 视频。

每当我向下和向上滚动时，有时会出现此问题：

![使用 iframe 时复制假图像](../Images/c015ef1ee69efe0a049b01199846fabf.png) *忽略你看不懂的符号，这是我的语言：P*

嗯，这是我描述这个问题的最佳方式。

知道如何解决吗？我已经尝试使用“对象”嵌入代码而不是 iframe，但是仍然没有用，问题仍然存在。

提前致谢！

# php - 用于提取链接的 Xpath

> ID：14520686
> 
> 赞同：0
> 
> 时间：2013-01-25T11:16:37.373
> 
> 标签：php, xpath, web-scraping

我为汽车网站创建了一个刮板，首先我想获取所有制造商，然后是每个制造商的所有模型链接，但使用下面的代码，我只获得列表中的第一个模型。为什么？

```
<?php

$dom = new DOMDocument();
@$dom->loadHTMLFile('http://www.auto-types.com');
$xpath = new DOMXPath($dom);
$entries = $xpath->query("//li[@class='clearfix_center']/a/@href");
$output = array();
foreach($entries as $e) {  
  $dom2 = new DOMDocument();
  @$dom2->loadHTMLFile('http://www.auto-types.com' . $e->textContent);
  $xpath2 = new DOMXPath($dom2);
  $data = array();
  $data['newLinks'] = trim($xpath2->query("//div[@class='modelImage']/a/@href")->item(0)->textContent);

  $output[] = $data;
}

echo '<pre>' . print_r($output, true) . '</pre>';

?> 
```

所以我需要得到： mercedes/100, mercedes/200, mercedes/300 但现在我的脚本只得到第一个链接，所以 mercedes/100...

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:22:02.790

您需要遍历结果，而不是只取第一项：

```
$items = $xpath2->query("//div[@class='modelImage']/a/@href");
$links = array();
foreach($items as $item) {
    $links[] = $item->textContent;
}
$data['newLinks'] = implode(', ', $links); 
```

# asp.net - 从 json 数据中删除 xml 标签

> ID：14520690
> 
> 赞同：0
> 
> 时间：2013-01-25T11:16:48.923
> 
> 标签：asp.net, xml, json, web-services

我对 json 数据有疑问。我可以在 asp.net Web 服务中将数据从数据库转换为 json 数据，但它们带有 xml 标签。我需要从这些数据中删除字符串标签和 xml 信息。数据的外观是：

```
?xml version="1.0" encoding="utf-8" ?

string xmlns="http://tempuri.org/"

[{"ID":10,"Duration":24235},{"ID":21,"Duration":9034},{"ID":12,"Duration":13681},{"ID":1,"Duration":23053},{"ID":13,"Duration":22863},{"ID":22,"Duration":57163}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-09T19:30:12.257

导入 System.Data

导入 System.Data.SqlClient

导入 System.Collections.Generic

导入 System.Web.Script.Serialization

公共类产品

```
 Public ProductID As Integer
    Public ProductName As String
    Public VendorID As Integer
    Public GroupID As Integer 
```

结束类

公共函数 GetProductJSON() 作为字符串

```
 Dim ls As New List(Of Product)
    Dim Temp As String = ""
    Dim js As New JavaScriptSerializer
    Dim json As String
    Try
        Using cn As New SqlConnection(Helper.ConnectionString)
            Using cm As SqlCommand = cn.CreateCommand()
                cm.CommandType = CommandType.StoredProcedure
                cm.CommandText = "GetProdct"
                cm.Connection.Open()
                Dim da As SqlDataAdapter = New SqlDataAdapter(cm)
                Dim dt As DataTable = New DataTable
                Dim ds As DataSet = New DataSet
                da.Fill(ds, "Product")
                Dim clsProduct As New Product
                dt = ds.Tables(0)
                For i = 0 To dt.Rows.Count - 1
                    clsProduct.ProductID = dt.Rows(i)("ProductID")
                    clsProduct.ProductName = dt.Rows(i)("ProductName")
                    clsProduct.VendorID = dt.Rows(i)("VendorID")
                    clsProduct.GropID = dt.Rows(i)("GropID")

                    ls.Add(clsProduct)
                Next
            End Using
        End Using
        json = js.Serialize(ls)
        Return json
    Catch ex As Exception

    End Try 
```

结束功能

```
<WebMethod()> _

<ScriptMethod(ResponseFormat:=ResponseFormat.Json, XmlSerializeString:=False)> _ 
```

公共子 GetProduct()

```
 Dim str As String = GetProductJSon()
    Context.Response.Clear()
    Context.Response.ContentType = "text/json"
    Context.Response.Charset = "utf-8"
    Context.Response.Write(str) 
```

结束子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:42:06.483

您需要查看如何请求数据并强制 ASP.NET 返回 JSON（这可能很繁琐）。

使用以下方法装饰您的 Web 服务方法：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public List<string> GetData() { 
```

然后确保设置内容类型并通过 POST 请求数据：

```
$.ajax({
    type: "POST",
    url: "/YourService.asmx/GetData",
    data: markers,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data){
        // your actual data will be in data.d
    },
    failure: function(errMsg) {
        // show error
    }
}); 
```

# c# - 代码出现错误时，Visual Studio 2012 Ultimate IntelliSense 无法正常工作

> ID：14520694
> 
> 赞同：1
> 
> 时间：2013-01-25T11:17:19.467
> 
> 标签：c#, visual-studio, visual-studio-2012, intellisense

我使用 Visual Studio 2012 更新 1。当我编译我的代码时出现错误，并且在此错误中 IntelliSense 无法正常工作。我使用**`CTRL`了 +`SPACE`**但没有显示。我想我应该从菜单中使用它，但要么什么都没有再显示。

有什么问题？是关于视觉工作室的吗？我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T11:27:37.303

`Tools -> Options-> Text Editor-> C# or All Languages -> General`然后检查/启用`Auto List Members and Parameter Information`

![在此处输入图像描述](../Images/1e2bc36112955016b86c65907f336030.png)

如果这不起作用删除此文件夹下的文件：

```
%AppData%\Roaming\Microsoft\VisualStudio\11.0\ReflectedSchemas 
```

如果这也不起作用，我认为你没有选择权。开始考虑首先重置您的设置`TOOLS -> Settings -> Import and Export Settings`以保存旧设置。

也检查一下；

*   [Intellisense 和代码建议在 Visual Studio 2012 Ultimate RC 中不起作用](https://stackoverflow.com/questions/10992983/intellisense-and-code-suggestion-not-working-in-vs2012-ultimate-rc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T06:35:49.380

这就是为我解决的问题：

```
Tools->Import and Export settings->Reset all settings. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:22:02.277

您可以尝试[重置](http://msdn.microsoft.com/en-us/library/ms241273%28v=vs.80%29.aspx)您的 IDE 设置。

我可以确认它似乎不是 Visual Studio 2012 中的错误。我的按预期工作。

# c# - 我可以在 C# 的复制 ctor 中访问私有成员

> ID：14520698
> 
> 赞同：0
> 
> 时间：2013-01-25T11:17:39.180
> 
> 标签：c#

> **可能重复：**
> [当 C# 在同一个包含类中时，为什么以及如何允许访问类本身之外的私有变量？](https://stackoverflow.com/questions/5737602/why-and-how-does-c-sharp-allow-accessing-private-variables-outside-the-class-its)

这已经完全让我失望了，显然下面的代码是合法的，更令人惊讶的是从框架 2 开始是合法的......

```
public class Magic
{
    private readonly int _anInt;
    private readonly string _aString;

    public Magic(int anInt, string aString)
    {
        _anInt = anInt;
        _aString = aString;
    }

    public Magic(Magic toCopy)
    {
        _anInt = toCopy._anInt; // Legal!
        _aString = toCopy._aString; // Legal!
    }

    public void DoesntWorkMagic(Magic toCopy)
    {
        _anInt = toCopy._anInt; // edit: Will work if not readonly. 
        _aString = toCopy._aString;
    }

    public int AnInt { get { return _anInt; } }

    public string AString { get { return _aString; } }
} 
```

这是怎么回事？这些年来，我看到这么多复制构造函数做多余的工作，在我遇到它之前我不会相信这项工作。它的使用是否有任何警告（除了明显的线程问题）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:21:33.190

private 不是对象级别的，而是类级别的，所以同一个类的对象知道它们的私有方面，所以允许在同一个类的其他对象上更改私有的东西。

private 防止其他类型在他们不应该去的地方闲逛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:21:01.760

C# 中没有“复制构造函数”。只有构造函数。

在您的代码中，您有参数 toCopy，它是当前类 Magic 的一个实例。因此，由于它是同一个类，因此您可以访问私有字段`toCopy._anInt`和 `toCopy._aString`（它是一个修饰符，使该字段在同一类的所有实例中可见）。

当您在构造函数中时，您可以设置新实例的`_anInt`fields `_aString`。

关键字只是说：“这个`readonly`字段只能在实例的构造函数中设置。

# ios - 为什么 Google 在实现 (.m) 文件中进行 @class 前向声明？

> ID：14520707
> 
> 赞同：3
> 
> 时间：2013-01-25T11:18:32.497
> 
> 标签：ios, objective-c

我一直在使用Google 在 Objective-C 中提供的[GDataXMLNode.m](http://code.google.com/p/gdata-objectivec-client/source/browse/trunk/Source/XMLSupport/GDataXMLNode.m)，我注意到他们`@class`在他们的实现 (.m) 文件中做了一个前向声明。他们这样做：

```
@class NSArray, NSDictionary, NSError, NSString, NSURL; 
```

为什么是这样？这样做有没有真正的优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:30:00.800

我认为它们在编译中没有任何作用，因为它们也存在于`.h`文件中，所以它们只是一个副本。此外，`.h`文件已经 import `Foundation.h`，因此那些前向声明只是多余的。

也许它们被用作`GDataXMLNode`与其他类具有依赖关系的一种文档形式。

# backbone.js - Backbone.js reset() 它会破坏模型吗？

> ID：14520709
> 
> 赞同：2
> 
> 时间：2013-01-25T11:18:38.273
> 
> 标签：backbone.js, collections, garbage-collection

如果我调用 Backbone.Collection.reset() 它会破坏（）集合中的每个模型还是它们仍然保存在内存中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:29:31.290

它不会调用`.destroy()`每个模型，这会很奇怪。该`destroy()`方法通常调用`DELETE`ajax 请求，并且`.reset()`不会将数据同步到服务器，它会清除集合，所以如果集合是唯一存储模型的地方，我们可以说他们还没有留在记忆中

# mysql - 计算平均评分以在按下下一个上一个按钮时显示

> ID：14520711
> 
> 赞同：-2
> 
> 时间：2013-01-25T11:18:51.083
> 
> 标签：mysql, sql, left-join

如果有这两个表：

**漫画**：

```
Field          Type                   Comment
comic_id       bigint(10)             unsigned NOT NULL
comic_title    varchar(500)           NULL 
```

**评分**

```
Field               Type               Comment
rating_id           bigint(10)         unsigned NOT NULL
comic_id            varchar(250)       NULL
rating              varchar(250)       NULL 
```

现在我想创建一个 API 来代表评分返回按`Next`&按钮时评分最高的漫画。`Previous`

1.  默认情况下，API 返回评分最高的漫画。然后按下下一个按钮我应该如何计算最低平均评级漫画

2.  同样在这里我将如何计算按下后退按钮时漫画的最高平均评分。

简而言之，我想创建一个`Next previous Button that will show avg rating from rating table on behalf of comic id`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:51:19.513

这是您开始的事情，尽管您的问题很可能会被关闭....该示例基于通常的场景，因为我们无法获取太多信息来帮助您解决问题...

这是有关[如何在 SO 上发布问题](http://msmvps.com/blogs/jon_skeet/archive/2010/08/29/writing-the-perfect-question.aspx)的提示。

*** [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/cfe8c/7)**

样品尝试：

```
select c.comic_id, c.comic_title, 
COUNT(r.comic_id), avg(r.ratings)
from comics c
left join rating r
on r.comic_id = c.comic_id
group by c.comic_id
;

| COMIC_ID | COMIC_TITLE | COUNT(R.COMIC_ID) | AVG(R.RATINGS) |
---------------------------------------------------------------
|      100 |           a |                 3 |              5 |
|      200 |           b |                 4 |            6.5 |
|      300 |           c |                 3 |         5.6667 |
|      400 |           d |                 2 |              8 | 
```

最低平均：

```
select x.comic_id, x.comic_title,
min(average) from (
select c.comic_id, c.comic_title, 
COUNT(r.comic_id), avg(r.ratings) average
from comics c
left join rating r
on r.comic_id = c.comic_id
group by c.comic_id) x
;

| COMIC_ID | COMIC_TITLE | MIN(AVERAGE) |
-----------------------------------------
|      100 |           a |            5 | 
```

根据 OP 的评论进行编辑：

OP想要排名最低，第二低等等..最高等级，第二高..等等

此查询将使用 a`variable`进行排名。

*** [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/cfe8c/11)**

询问：

```
select x.comic_id, x.comic_title,
x.average from (
select (@rank:=@rank+1) as rank, c.comic_id, c.comic_title, 
COUNT(r.comic_id), avg(r.ratings) average
from (select @rank:=0) rk, comics c
left join 
rating r
on r.comic_id = c.comic_id
group by c.comic_id
order by average asc) x
where x.rank = 1
;

| COMIC_ID | COMIC_TITLE | AVERAGE |
------------------------------------
|      100 |           a |       5 | 
```

> 为了熟悉JOIN，你可以看看这篇文章：[SQL JOIN 的视觉表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

![在此处输入图像描述](../Images/d481e3a2d70b95b47e9e39af21fefbe9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:10:56.053

创建一个视图以使其更容易：（更新以包括没有评级的漫画）

```
CREATE VIEW avg_comic_rating AS 
SELECT 
    comics.comic_id, comics.comic_title, COALESCE(AVG(comic_rating), 0.0)AS avg_rating
 FROM
    comics LEFT JOIN comic_rating
ON   (comics.comic_id = comic_rating.comic_id)
GROUP BY comics.comic_id; 
```

然后使用限制偏移量进行分页：

```
select * from avg_comic_rating order by avg_rating desc, comic_title asc limit 0,2;
+----------+-------------+------------+
| comic_id | comic_title | avg_rating |
+----------+-------------+------------+
|        6 | zorro       |     7.5000 |
|        5 | super man   |     7.0000 |
+----------+-------------+------------+
2 rows in set (0.05 sec)

select * from avg_comic_rating order by avg_rating desc, comic_title asc limit 2,2;
+----------+-------------+------------+
| comic_id | comic_title | avg_rating |
+----------+-------------+------------+
|        4 | cat woman   |     4.5000 |
|        2 | he man      |     4.5000 |
+----------+-------------+------------+
2 rows in set (0.00 sec) 
```

供参考的表格内容：

```
select * from comics;
+----------+-------------+
| comic_id | comic_title |
+----------+-------------+
|        1 | batman      |
|        2 | he man      |
|        3 | she man     |
|        4 | cat woman   |
|        5 | super man   |
|        6 | zorro       |
+----------+-------------+
6 rows in set (0.00 sec)

select * from comic_rating;
+-----------+----------+--------------+
| rating_id | comic_id | comic_rating |
+-----------+----------+--------------+
|         1 |        1 |            2 |
|         2 |        2 |            3 |
|         3 |        3 |            1 |
|         4 |        4 |            4 |
|         5 |        5 |            6 |
|         6 |        6 |            5 |
|         7 |        1 |            5 |
|         8 |        2 |            6 |
|         9 |        3 |            7 |
|        10 |        4 |            5 |
|        11 |        5 |            8 |
|        12 |        6 |           10 |
+-----------+----------+--------------+
12 rows in set (0.00 sec)

select * from avg_comic_rating;
+----------+-------------+------------+
| comic_id | comic_title | avg_rating |
+----------+-------------+------------+
|        1 | batman      |     3.5000 |
|        2 | he man      |     4.5000 |
|        3 | she man     |     4.0000 |
|        4 | cat woman   |     4.5000 |
|        5 | super man   |     7.0000 |
|        6 | zorro       |     7.5000 |
+----------+-------------+------------+
6 rows in set (0.00 sec) 
```

# asp.net-mvc-3 - 与 mvc3 aspx 中的用户控件相同的模型在页面中调用多个

> ID：14520712
> 
> 赞同：0
> 
> 时间：2013-01-25T11:18:55.880
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

我已经成功创建了地址的用户控件，以便我们可以植入学生添加视图页面，员工添加视图页面。

并且我们可以成功获取页面的Actionresult

```
 [HttpPost]
    public ActionResult Add(StudentModel StudentModel , AddressModel AddressModel)
    { 
```

//执行代码 }

但是我遇到了这样的情况，对于学生，我们必须输入通讯地址、家长办公室地址等...... 为此，我们必须在学生的添加视图页面中多次调用地址模型

```
 <%

           Html.RenderPartial("Addaddress", Model.CommunicationAddress);%>
         <%

      Html.RenderPartial("Addaddress", Model.ParentAddress);%> 
```

在这里，我们如何填写国家/地区的下拉列表，然后基于国家 - 州，然后基于州 - 城市。

当我尝试时，在这两种情况下都只填写国家的下拉列表，而通信地址的状态是根据国家填写的。但它不会发生在父地址。

1.怎么做？2\. 之后，在 httppost 中，我们如何检索两个地址？

提前致谢 。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:54:24.383

在 MVC 中，在同一页面中多次调用的用户控件具有相同的控件 ID。这是 MVC 中的默认错误 [请参阅此链接](http://old.nabble.com/ASP.NET-MVC-RenderPartial-and-Multiple-controls-with-the-same-ID-%27__Page%27-tt19305728.html#a19305728)

为了克服这个问题，您必须添加带有 Id 的 div 并在模型中添加一个`divid`并为每个新实例分配新值`divid`，然后在填充 Json 时，如果您使用它，您必须调用该字段，例如：`$('#<%=Model.divid %> #CountryId').change`，以获取相应的值.

为了获取模型值，我发现的唯一方法是使用 Json 从每个 div 收集值，因为`actionresult`最后你只会得到一个模型。

我希望你得到你需要的东西。

# delphi - 如何暂时阻止控件被绘制？

> ID：14520716
> 
> 赞同：8
> 
> 时间：2013-01-25T11:19:06.587
> 
> 标签：delphi, delphi-xe

我们有一个获胜控制对象，它将其客户移动到其他一些坐标。问题是，当孩子太多时——例如 500 个控件——代码真的很慢。这一定是因为每次我设置 Left 和 Top 属性时都会重新绘制每个控件。所以，我想告诉 WinControl 对象停止被重新绘制，并且在将所有对象移动到它们的新位置之后，它可能会被再次绘制（类似于`BeginUpdate`备忘录和列表对象）。我怎样才能做到这一点？这是移动对象的代码；这很简单：

```
for I := 0 to Length(Objects) - 1 do begin
  with Objects[I].Client do begin
    Left := Left + DX;
    Top := Top + DY;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T12:46:49.580

正如[Cosmin Prund](https://stackoverflow.com/a/14521089/757830)解释的那样，持续时间长的原因不是重新绘制的效果，而是 VCL 在控制移动时的重新调整要求。（如果它真的需要花这么长的时间，那么您甚至可能*需要*请求立即重绘）。

要暂时防止重新对齐以及所有检查和锚点工作，对齐设置和 Z 顺序，请使用[`DisableAlign`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TWinControl.DisableAlign)和[`EnableAlign`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TWinControl.EnableAlign)。`SetBounds`并通过直接调用将调用次数减半：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  I: Integer;
  Control: TControl;
begin
  for I := 0 to 499 do
  begin
    Control := TButton.Create(Self);
    Control.SetBounds((I mod 10) * 40, (I div 10) * 20, 40, 20);
    Control.Parent := Panel1;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  C: TControl;
begin
  // Disable Panel1 paint
  SendMessage(Panel1.Handle, WM_SETREDRAW, Integer(False), 0);  
  Panel1.DisableAlign;
  try
    for I := 0 to Panel1.ControlCount - 1 do
    begin
      C := Panel1.Controls[I];
      C.SetBounds(C.Left + 10, C.Top + 5, C.Width, C.Height);
    end;
  finally
    Panel1.EnableAlign;
    // Enable Panel1 paint  
    SendMessage(Panel1.Handle, WM_SETREDRAW, Integer(True), 0);
    // Update client area   
    RedrawWindow(Panel1.Handle, nil, 0, RDW_INVALIDATE or RDW_UPDATENOW or RDW_ALLCHILDREN); 
  end;
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T11:40:58.723

您认为缓慢来自重新绘制控件的假设可能是正确的，但不是全部。处理移动控件的默认 Delphi 代码将延迟绘制，直到`WM_PAINT`收到下一条消息，并且在您完成移动所有控件之后，当消息队列被抽出时，就会发生这种情况。不幸的是，这涉及到很多事情，默认行为可以在很多地方改变，包括 Delphi 和 Windows 本身。我使用以下代码来测试在运行时移动控件时会发生什么：

```
var i: Integer;
begin
  for i:=1 to 100 do
  begin
    Panel1.Left := Panel1.Left + 1;
    Sleep(10); // Simulate slow code.
  end;
end; 
```

行为取决于控制！A `TControl`(example: `TLabel`) 将按照 Delphi 的规则运行，但 a`TWinControl`取决于太多因素。A simple`TPanel`直到循环之后才重新绘制，`TButton` *在我的机器上，*只有背景被重新绘制，而 a`TCheckBox`被完全重新绘制。在大卫的机器`TButton`上也完全重新粉刷，证明这取决于许多因素。最`TButton`可能的因素是 Windows 版本：我在 Windows 8 上进行了测试，David 在 Windows 7 上进行了测试。

# AlignControl 雪崩

无论如何，还有一个非常重要的因素需要考虑。在运行时移动控件时，需要考虑所有控件的对齐和锚定规则。`AlignControls`这可能会导致/ `AlignControl`/`UpdateAnchorRules`呼叫雪崩。由于所有这些调用最终都需要对相同的递归调用，因此调用的数量将是指数级的（因此您观察到在 a 上移动大量对象`TWinControl`很慢）。

正如大卫建议的那样，最简单的解决方案是将所有内容放在面板上并将面板作为一个整体移动。如果这是不可能的，并且您的所有控件实际上都是`TWinControl`（即：它们有一个窗口句柄），您可以使用：

[BeginDeferWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632672%28v=vs.85%29.aspx) , [DeferWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632681%28v=vs.85%29.aspx) , [EndDeferWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633440%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-25T11:21:24.323

我会将所有控件放在一个面板中，然后移动面板而不是控件。这样，您就可以在一次操作中执行移位。

如果您希望在其容器中移动控件，则可以使用`TWinControl.ScrollBy`.

对于它的价值，使用它`SetBounds`比修改`Left`和`Top`单独的代码行更有效。

```
SetBounds(Left+DX, Top+DY, Width, Height); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T14:11:24.727

为了加快速度，您应该在孩子移动期间将您的属性设置为以`Visible`避免重新绘制。`WinControl``False`

与`SetBounds`您一起从移动子控件中获得最佳效果。

```
procedure TForm1.MoveControls( AWinControl : TWinControl; ADX, ADY : Integer );
var
  LIdx : Integer;
begin
  AWinControl.Visible := False;
  try
    for LIdx := 0 to Pred( AWinControl.ControlCount ) do
      with AWinControl.Controls[LIdx] do
        begin
          SetBounds( Left + ADX, Top + ADY, Width, Height );
        end;
  finally
    AWinControl.Visible := True;
  end;
end; 
```

**顺便说一句**，正如大卫所建议的，移动父母比每个孩子都要快得多。

# javascript - 即使在 javascript 出现错误的情况下也继续

> ID：14520718
> 
> 赞同：1
> 
> 时间：2013-01-25T11:19:09.030
> 
> 标签：javascript

页面上有 2 个脚本。如果第一个导致错误，那么第二个因此拒绝工作。

如何让第二个脚本对第一个错误视而不见并且仍然可以工作？请记住，我**不允许**更改第一个脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:27:01.103

也许这可能会有所帮助

```
<script type="text/javascript">
    function stoperror()
    {
        return true;
    }
    window.onerror=stoperror();
</script> 
```

MOZILLA 开发者网络[window.onerror](https://developer.mozilla.org/en/docs/DOM/window.onerror)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:21:22.527

发生错误时，Javascript 执行停止...

你不能改变这种行为......

要绕过，将导致错误的代码放在`try`块内

```
try{
    //code that might produce some error
} catch(e){
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T11:20:10.647

我会使用 try 和 catch 块，而忽略任何错误。

那应该工作..

例子

```
try
{
    //Run some code here
}
catch(err)
{
    //Handle errors here
} 
```

# wpf - 渐变背景图像

> ID：14520729
> 
> 赞同：3
> 
> 时间：2013-01-25T11:19:56.393
> 
> 标签：wpf, xaml

我有一个透明背景的图像，我想将它作为所有控件后面的图像覆盖在我的窗口上。

我的窗口背景已经有一个渐变画笔，但我可以通过谷歌搜索和实验得知，你不能有两个背景画笔。

这是不起作用的 XAML。你有什么建议？也许还有另一种设置图像的方法。

```
<Window.Background>
    <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
        <GradientStop Color="#FFF7F7F7"/>
        <GradientStop Color="White" Offset="1"/>
    </LinearGradientBrush>
    <ImageBrush ImageSource="/Images/Arrow.png">
    </ImageBrush>
</Window.Background> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:29:24.873

您可以将[Image](http://msdn.microsoft.com/en-us/library/ms610982.aspx)控件放入顶级 Grid 中，在所有其他控件下方：

```
<Grid>
    <Grid.Background>
        <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
            <GradientStop Color="#FFF7F7F7"/>
            <GradientStop Color="White" Offset="1"/>
       </LinearGradientBrush>
    </Grid.Background>
    <Image Source="/Images/Arrow.png">
    <Grid>
        ... all other controls go here
    </Grid>
</Grid> 
```

# regex - 正则表达式非捕获组字符长度

> ID：14520730
> 
> 赞同：3
> 
> 时间：2013-01-25T11:19:59.860
> 
> 标签：regex, comma, counting, floating, regex-group

我正在尝试使用下一个模式生成正则表达式。一个数字，最多 16 位数字，里面可以有也可以没有逗号，从不在开头，从不在结尾。我试过这个：

```
^(?:\d+(?:,{1}\d+){1})$ 
```

问题是我无法计算组 {0,16} 的结果。这是应该适合表达式的数字列表：

> 123,34
> 1,33333333
> 1222222233

不适合的示例数字：

> 1111,1111,1111,11111
> 11111,11111111111111111111111111111,111111111111111
> （
> 超过16个字符）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:34:19.660

您可以在此之前检查长度或使用`^(?=[\d,]{1,16}$)(?:\d+(?:,\d+)?)$`

这是在进行真正匹配之前检查长度的前瞻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:33:23.080

如果你的正则表达式支持前瞻断言，你可以使用这个：

```
^(?!(?:\d{17,}$|[,\d]{18,}$))(?:\d+(?:,\d+)?)$ 
```

[在 Regexr 上](http://regexr.com?33hlv)查看

我删除了多余`{1}`的部分，并使带有分数的组成为可选的。

否定的前瞻断言`(?!(?:\d{17,}$|[,\d]{18,}$))`正在检查您的长度要求。如果它找到 17 位或更多位直到结尾或 18 位或更多位和逗号直到结尾，它会失败。我在这里允许字符类中的多个逗号不是问题，以下模式确保只有一个逗号。

# css - 淘汰赛css动态绑定

> ID：14520731
> 
> 赞同：0
> 
> 时间：2013-01-25T11:20:04.487
> 
> 标签：css, binding, knockout.js

我正在做一个带有淘汰赛的小项目，我必须模拟一些问题的答案。我动态构建了 3 个按钮，当我单击一个按钮时，我将其上的文本与正确答案进行比较，如果正确，则应变为绿色..，如果不正确，则应变为红色，正确的应变为绿色..我是试图使用绑定到 css 属性的敲除，但似乎该属性没有正确刷新，即使与 css 关联的计算发生更改 html：

```
<ul data-bind="foreach: chosenQuestionAnswers">
  <li>
    <button data-bind="text: answerText, css: $root.answerStatus(), click: $root.selectButton"></button>
  </li>
</ul> 
```

ko部分：

```
 selectedAnswer: ko.observable(),
 isAnswerCorrect: ko.observable(),

selectButton: function (value) {    my.AppViewModel.isAnswerCorrect(my.AppViewModel.checkIfCorrectAnswer(value.answerText));
 },

checkIfCorrectAnswer: function (value) {
return (value == my.AppViewModel.chosenQuestionCorrectAnswer());
  },

my.AppViewModel.answerStatus = ko.computed(function () {
var exit = this.isAnswerCorrect() == true ? "highlightRight" : "highlightWrong";
console.log(this.isAnswerCorrect());
console.log(exit);
return exit;
 }, my.AppViewModel); 
```

console.log 显示了 var exit 的正确值……但按钮的 css 没有改变……

知道为什么吗？...

谢谢……我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:08:24.520

您引用的是旧版本的 KO (2.1)，截至今天的最新版本是 2.2.1。您的小提琴在引用新版本 @ [http://knockoutjs.com/downloads/knockout-2.2.1.js](http://knockoutjs.com/downloads/knockout-2.2.1.js)时有效。这是一个叉子：http: [//jsfiddle.net/drdamour/xe2M5/](http://jsfiddle.net/drdamour/xe2M5/)

动态 css 绑定（您如何使用它）仅在 2.2 中添加，请参阅[http://blog.stevensanderson.com/2012/10/29/knockout-2-2-0-released/](http://blog.stevensanderson.com/2012/10/29/knockout-2-2-0-released/)

堆栈不会让我在没有一些代码的情况下提交，所以......这里有一些毫无价值的代码：

```
var x = {a:1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:31:12.620

css 类是视图的一部分，尽量让它们远离 ViewModel，它应该专注于业务逻辑。

我会做类似的事情

[http://jsfiddle.net/hLXbq/](http://jsfiddle.net/hLXbq/)

HTML

```
<button data-bind="css: { valid: valid, invalid: invalid }, click: toggle">Toggle</button> 
```

JS

```
ViewModel = function () {
    this.valid = ko.observable(false);
    this.invalid = ko.computed(function () {
        return !this.valid();
    }, this);
}; 
```

# asp.net - Asp.Net 将所有值列表框转移到另一个页面？（响应。重定向）

> ID：14520736
> 
> 赞同：0
> 
> 时间：2013-01-25T11:20:24.523
> 
> 标签：asp.net, listbox

我将 Listbox 中的所有数据从 Page1 传输到 Page2 时遇到问题。请问，有人可以帮我吗？

第1页

```
protected void Button1_Click(object sender, ImageClickEventArgs e)
{
    int _count = Listbox1.Items.Count;
    if (_count != 0)
    {
        for (int i = 0; i < _count; i++)
        {
            ListItem item = new ListItem();
            item.Text = Listbox1.Items[i].Text;
            item.Value = Listbox1.Items[i].Value;

            Response.Redirect("Page2.aspx?Listitems="+ item.Value); 
```

第2页

```
 protected void Page_Load(object sender, EventArgs e)
{
    i

    if (Request.QueryString["Listitems"] != null)
        ListItem1.Items.Add["Listitems"]; 
```

很抱歉这个简单的问题，但我在 ASP.NET 中只有 Rookie :( 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:53:42.957

使用[会话变量](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)[，](http://www.codeproject.com/Questions/242826/how-to-pass-default1-aspx-listboxitems-to-default2)在“解决方案 2”中有一个如何使用会话变量传递列表的示例。

# java - Selenium Firefox 网络驱动程序

> ID：14520739
> 
> 赞同：0
> 
> 时间：2013-01-25T11:20:32.027
> 
> 标签：java, selenium, selenium-webdriver

我在 ubuntu 上的程序中使用以下内容：

```
this.mDriver = new FirefoxDriver(); 
```

然后

```
driver.get("http://test.com"); 
```

我收到一条错误消息，意思是说使用的 Firefox 版本是最新的，我需要使用旧版本。

我下载了 Firefox 并解压了它。将其添加到路径中。

我修改了代码如下：

```
WebDriver driver = new FirefoxDriver(new FirefoxBinary(new File("/opt/firefox16/firefox")), profile); 
```

当我从终端执行 /opt/firefox16/firefox 时，它会启动浏览器。

但是当我执行上面的 WebDriver 代码行时，它仍然没有调用 Firefox 浏览器。我没有收到任何错误消息。

请，有人可以指导我在创建和执行 WebDriver 时如何启动 Firefox 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-05T15:52:51.023

您遇到的问题是一个常见问题。新版本的 Firefox 经常无法与最新版本的 Selenium Firefox WebDriver 一起使用。

解决方案是**使用兼容版本**的 Firefox 和 Selenium Firefox WebDriver。

我推荐以下内容：

*   Selenium Firefox WebDriver **2.33.0**版
*   Firefox版本**18.0.2**

这种组合对我来说一直很有效。

**[您还可以在发行说明](http://selenium.googlecode.com/git/java/CHANGELOG)**中查看哪个版本的 Selenium Firefox WebDriver（理论上）与哪个版本的 Firefox 兼容**。**

# dynamics-crm-2011 - Dynamics CRM Online 和模拟

> ID：14520740
> 
> 赞同：1
> 
> 时间：2013-01-25T11:20:37.500
> 
> 标签：dynamics-crm-2011, impersonation

我正在使用来自 CRM2011KIT 的代码“**来自 PHP 的 CRM Online** ”。而且我可以毫无问题地创建或更新实体。

但是现在我们需要使用**模拟**，我找不到任何示例或文档如何使用**LiveID 授权、CRM Online 和简单的 XML 请求**来做到这一点（当然我不能使用 PHP 的 SDK）。

我很高兴听到有人像我一样解决了这个问题或有一些想法。但我什至无法想象在当前的肥皂 XML 请求中放置“ **CallerID ”的位置**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:24:09.813

你看过这个吗？ [CRM Online 2011 Web 服务 - 仅 SOAP 客户端](http://code.msdn.microsoft.com/windowsdesktop/CRM-Online-2011-WebServices-14913a16)

他们只做 SOAP 请求，并且支持 LiveID 和 Office365 登录

# java - 将 MongoDB 查询转换为 Java

> ID：14520742
> 
> 赞同：2
> 
> 时间：2013-01-25T11:20:40.590
> 
> 标签：java, mongodb

我需要将以下 mongo 查询转换为 java。

```
db.sample.find( { name:"abc" }, { _id: 0, cities: { $elemMatch: { cityName: "A" }}}); 
```

我尝试了很多方法，但我无法找出正确的方法。

```
 BasicDBObject eleMatch = new BasicDBObject();
    eleMatch.put("cityName","A");
    BasicDBObject up = new BasicDBObject();
    up.put("$elemMatch",eleMatch);
    BasicDBObject query = new BasicDBObject();
    query.put("name","abc");
    query.put("cities",up);
    DBCollection dbcoll = mongoTemplate.getCollection("sample");
    DBObject object = dbcoll.findOne(query); 
```

但是这个对象的结果包含 id 。所以我只需要摆脱它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:13:47.713

您需要将检索到的字段作为 findOne 方法的第二个参数

```
BasicDBObject retrievedField = new BasicDBObject();
retrievedField.put("_id",0);

dbcoll.findOne(query, retrievedField); 
```

此外，如果您想检索您显示的确切查询，我认为您需要将 elemMatch 对象附加到检索字段，而不是将其添加到 queryObject。

```
BasicDBObject eleMatch = new BasicDBObject();
eleMatch.put("cityName","A");
BasicDBObject up = new BasicDBObject();
up.put("$elemMatch",eleMatch);
retrievedField.append(up);

BasicDBObject query = new BasicDBObject();
query.put("name","abc");

DBCollection dbcoll = mongoTemplate.getCollection("sample");
DBObject object = dbcoll.findOne(query, retrievedField); 
```

# eclipse - 在 SVN Eclipse 中，“Update”和“Update to head”有什么区别？

> ID：14520746
> 
> 赞同：1
> 
> 时间：2013-01-25T11:20:52.747
> 
> 标签：eclipse, svn, tortoisesvn

我正在使用带有 TortoiseSVN 的 Eclipse。和有什么区别

1.  我同步项目并在每个文件上“*更新”*
2.  点击项目并使用 Team > “ *Update to head* ”

如果我创建标签或其他工作，这与更新活动不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:23:24.053

基本上，您的第一个示例仅更新您在项目或“视图”中触及的文件。在第二个示例中，您的 Team Update to Head 修订版将自上而下更新整个项目、所有文件和文件夹，并提供统一修订版号。

这篇文章将更好地解释它。[SVN 上的马克·菲帕德](https://stackoverflow.com/questions/2209017/svn-synchronize-vs-update-to-head-subclipse)

# sql - 每当我在 SQL 查询中使用主键时，都会收到 SqlException。我究竟做错了什么？

> ID：14520747
> 
> 赞同：0
> 
> 时间：2013-01-25T11:20:53.073
> 
> 标签：sql, exception, primary-key, visual-c#-express-2010

我通常太急于寻找问题的解决方案，也等待论坛帖子的答案；我更喜欢找到其他人提出的类似问题的答案。但是经过彻底的谷歌搜索，我仍然没有找到这个问题的答案。所以在这里，我在这个很好的论坛上发布了我的第一个问题：

我试图让 SQL 查询给我一组记录中最小的主键。这是我使用的命令文本：

```
SELECT MIN(LineNo) FROM Code 
```

“LineNo”，一个 int，是我的表“代码”中的主键

然后我收到错误消息：

> “SqlException 未处理 关键字 'LineNo' 附近的语法不正确。”

然后我尝试了其他一些查询，发现只要我不在查询中使用主键，任何东西都可以工作。如果我尝试选择它，它会失败。如果我尝试选择其他东西，其中主键是某个值，它会失败。

我正在使用 Visual C# 2010 Express。至于数据库，我只知道它是 Visual C# 中所谓的“基于服务的数据库”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:24:42.110

`LineNo`是保留字。使用标识符来解决这个问题：

```
SELECT MIN([LineNo]) FROM Code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:24:28.710

LineNo 似乎是一个关键字。尝试用方括号括起来

```
SELECT MIN([LineNo]) FROM table 
```

# c++ - 如何检查 Boost Test 框架中双精度值的前 15 个相关数字是否相同？

> ID：14520752
> 
> 赞同：1
> 
> 时间：2013-01-25T11:21:06.983
> 
> 标签：c++, unit-testing, boost, boost-test

我尝试使用似乎是为这项工作设计的：`BOOST_CHECK_CLOSE`，所以我有以下测试：

```
BOOST_AUTO_TEST_CASE( MultivariateNormalDensityTest )
{
  double TOLLERANCE=1e-14;  

  Eigen::Vector3d mu(0.0, 1.0, 2.0);
  Eigen::Matrix3d sigma;
  sigma << 2.0, 1.0, 0.5,
           1.0, 2.3, 0.7,
       0.5, 0.7, 1.7;

  MultivariateNormalDensity<3> mnd(mu, sigma);

  BOOST_CHECK_CLOSE(0.027671392189542814988, mnd(Eigen::Vector3d(0.0, 1.0, 2.0)), TOLLERANCE);
  BOOST_CHECK_CLOSE(0.0027063822550173750707, mnd(Eigen::Vector3d(2.0, 1.0, 0.5)), TOLLERANCE);
  BOOST_CHECK_CLOSE(0.024708597088231143424, mnd(Eigen::Vector3d(0.5, 1.5, 2.5)), TOLLERANCE);
  BOOST_CHECK_CLOSE(0.026554587643995836849, mnd(Eigen::Vector3d(-0.3, 0.6, 1.8)), TOLLERANCE);
  //examples calculated using R
} 
```

但是，第一次检查失败并出现以下错误：

```
/home/ga1009/PhD/cpp/grzesLib/test/multivariatenormaltests.cpp(36): error in "MultivariateNormalDensityTest": difference{3.76141e-14%} between 0.027671392189542814988{0.027671392189542815} and mnd(Eigen::Vector3d(0.0, 1.0, 2.0)){0.027671392189542805} exceeds 1e-14% 
```

当我做数学时，我得到：

```
(0.027671392189542815-0.027671392189542805)/0.027671392189542805=0.00000000000000036138406 
```

小于 1e-14。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:50:24.340

公差被指定为*百分比*，你偏离了 100。修复：

```
double TOLERANCE=1e-12;   // Percent 
```

# forms - 将业务逻辑放在电子邮件表单的 magento 模块中的什么位置？

> ID：14520757
> 
> 赞同：0
> 
> 时间：2013-01-25T11:21:26.723
> 
> 标签：forms, magento, module, block, business-logic

我是 magento 的新手，我正在尝试为电子邮件表单创建一个模块。

在经典 MVC 中，我会将请求发送到控制器，但在 Magento 中，控制器只负责一个 URL。因此，当我想将我的电子邮件表单放在产品页面上时，我无法使用控制器，对吗？

我通过产品页面中的布局 xml 包含我的块元素。所以我必须验证我的表单并在我的块元素类中发送电子邮件？还是我必须为此编写一个或多个助手？

什么是magento方式？

非常感谢。对不起，如果我的问题很蹩脚，但我是一个初学者，我想学习正确的方法，我已经看到了很多错误的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:43:45.180

就在提交表单时，向控制器提供操作，例如：

```
<?php echo Mage::getUrl()?>bpartner/index/mailbpartner 
```

bpartner 您的模块名称 在 INDEX NAMED CONTROLLER FILE 中
索引您的控制器名称mailbpartner 您的功能。

通过 POST 获取所有详细信息并发送如下邮件 + 成功重定向

```
$to = "abc@abc.com";
                $dt = date('d-m-Y');
                $subject = "Become A Partner Details on date $dt";
                $mail = new Zend_Mail('utf-8');
                $mail->setBodyHtml($message)
                    ->setFrom($data['email'], $data['firstname'])
                    ->addTo($to, 'Site Admin')
                    ->setSubject($subject);
                try {
                    $mail->send();
                    Mage::getSingleton('core/session')->addSuccess('Mail sent successfully. We will contact you shortly');
                }
                catch(Exception $e) {
                    Mage::getSingleton('core/session')->addError('Unable to send email.');
                }
        $this->_redirect('bpartner'); 
```

上面的一些数据是 POST DATA，这是可以自我理解的

# asp.net - “System.Net.Http.HttpContent”不包含“ReadAsAsync”的定义，也没有扩展方法

> ID：14520762
> 
> 赞同：121
> 
> 时间：2013-01-25T11:21:51.410
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-web-api

我制作了一个控制台应用程序来使用我刚刚制作的 Web API。控制台应用程序代码无法编译。它给了我编译错误：

```
'System.Net.Http.HttpContent' does not contain a definition for 
'ReadAsAsync' and no extension method 'ReadAsAsync' accepting a 
first argument of type 'System.Net.Http.HttpContent' could be 
found (are you missing a using directive or an assembly reference?) 
```

这是发生此错误的测试方法。

```
static IEnumerable<Foo> GetAllFoos()
{
  using (HttpClient client = new HttpClient())
  {
    client.DefaultRequestHeaders.Add("appkey", "myapp_key");

    var response = client.GetAsync("http://localhost:57163/api/foo").Result;

    if (response.IsSuccessStatusCode)
      return response.Content.ReadAsAsync<IEnumerable<Foo>>().Result.ToList();
  }

  return null;
} 
```

我已使用此方法并从 MVC 客户端使用它。

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-01-25T12:53:09.553

经过长时间的斗争，我找到了解决办法。

**解决方案：**添加对`System.Net.Http.Formatting.dll`. 此程序集也可在**C:\Program Files\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies**文件夹中找到。

该方法`ReadAsAsync`是在类中声明的扩展方法，位于库`HttpContentExtensions`的命名空间中。`System.Net.Http``System.Net.Http.Formatting`

反光板来救场了！

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-01-25T11:26:30.450

确保您已[`correct NuGet package`](http://nuget.org/packages/Microsoft.AspNet.WebApi.Client/4.0.20710.0)在控制台应用程序中安装：

```
<package id="Microsoft.AspNet.WebApi.Client" version="4.0.20710.0" /> 
```

并且您的目标至少是 .NET 4.0。

话虽这么说，您的`GetAllFoos`函数被定义为返回一个`IEnumerable<Prospect>`而在您`ReadAsAsync`传递的方法`IEnumerable<Foo>`中显然不是兼容的类型。

`Install-Package Microsoft.AspNet.WebApi.Client`

[![在项目管理器控制台中选择项目](../Images/05588743948b5d277cfdf0554d9f53fe.png)](https://i.stack.imgur.com/4gXJT.png)

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-10-07T14:21:34.403

*   如果您无法从何时找到程序集参考（右键单击参考->添加所需的程序集）

试试这个 **包管理器控制台**
**Install-Package System.Net.Http.Formatting.Extension** -Version 5.2.3 然后使用 add reference 添加。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-02-05T13:59:39.457

添加对 System.Net.Http.Formatting.dll 的引用可能会导致 DLL 不匹配问题。目前，System.Net.Http.Formatting.dll 似乎引用了 Newtonsoft.Json.DLL 的 4.5.0.0 版本，而最新版本是 6.0.0.0。这意味着如果您引用最新的 Newtonsoft NuGet 包或 DLL，您还需要添加绑定重定向以避免 .NET 程序集异常：

```
<dependentAssembly>
   <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
 </dependentAssembly> 
```

因此，添加对 System.Net.Http.Formatting.dll 的引用的另一种解决方案是将响应读取为字符串，然后使用 JsonConvert.DeserializeObject(responseAsString) 对自己进行反序列化。完整的方法是：

```
public async Task<T> GetHttpResponseContentAsType(string baseUrl, string subUrl)
{
     using (var client = new HttpClient())
     {
         client.BaseAddress = new Uri(baseUrl);
         client.DefaultRequestHeaders.Accept.Clear();
         client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

         HttpResponseMessage response = await client.GetAsync(subUrl);
         response.EnsureSuccessStatusCode();
         var responseAsString = await response.Content.ReadAsStringAsync();
         var responseAsConcreteType = JsonConvert.DeserializeObject<T>(responseAsString);
         return responseAsConcreteType;
      }
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-10-24T13:31:11.780

或者如果您有 VS 2012，您可以转到包管理器控制台并输入 Install-Package Microsoft.AspNet.WebApi.Client

这将下载最新版本的软件包

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-11-24T04:34:57.583

从nuget安装下面的包 [![在此处输入图像描述](../Images/4caa69dba08c8bfe49d4cd2c27bdf409.png)](https://i.stack.imgur.com/SBews.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-06-15T11:37:09.047

有同样的问题，但提出的答案没有帮助，安装 System.Net.Http.Json 包删除了错误。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-07-09T05:47:22.747

**在您的项目中使用此程序集参考**

```
Add a reference to System.Net.Http.Formatting.dll 
```

# perl - 解析詹金斯休息 API

> ID：14520773
> 
> 赞同：1
> 
> 时间：2013-01-25T11:22:20.480
> 
> 标签：perl, xml-parsing, jenkins

我正在使用带有树的 Jenkins xml api。这是我用于本地托管 Jenkins 服务器的 url。

```
http://localhost:8080/api/xml?
   tree=jobs[name,description,color,healthReport[score,description]] 
```

上面的 url 将 xml 输出显示为：

```
<hudson>
    <job>
        <description/>
        <name>build1</name>
        <color>disabled</color>
        <healthReport>
            <description>Build stability: 2 out of the last 5 builds failed.</description>
            <score>60</score>
        </healthReport>
    </job>
    <job>
        <description>test job description check.</description>
        <name>Build2</name>
        <color>blue</color>
        <healthReport>
            <description>Build stability: No recent builds failed.</description>
            <score>100</score>
        </healthReport>
    </job>
    <job>
        <description/>
        <name>Build3</name>
        <color>blue</color>
        <healthReport>
            <description>Build stability: 3 out of the last 4 builds failed.</description>
            <score>25</score>
        </healthReport>
    </job>
 </hudson> 
```

现在我想以一种可以进一步处理标签值的方式解析 xml 输出。

前任：

```
foreach job
if color=blue
print jobname : color 
if score = 100
etc 
```

我怎么能在 perl 中做到这一点，我应该使用哪个 perl 模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:40:53.747

从...开始：

```
use XML::LibXML qw( );
my $parser = XML::LibXML->new();
my $doc = $parser->parse_string($xml);
my $root = $doc->documentElement(); 
```

*   foreach 工作

    ```
    for my $job ($root->findnodes('job')) 
    ```

*   如果颜色=蓝色

    ```
    my $color = $job->findvalue('color/text()'); 
    ```

*   打印作业名称：颜色

    ```
    my $job_name = $job->findvalue('name/text()'); 
    ```

*   如果分数 = 100

    ```
    my $score = $job->findvalue('healthReport/score/text()'); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:23:29.623

这是我在通过 LWP::UserAgent 获取 Web 文档后得到的结果。

```
XML::LibXML->load: specify location, string, or IO at 12.pl line 23 
```

尽管我传递了要解析的 url 内容，但我收到了上述错误。

这是我的 Perl 代码：

```
#!/usr/bin/perl

use strict;
use warnings;

use LWP::UserAgent;
use XML::LibXML;
my $url = 'http://localhost:8080/api/xml?tree=jobs[name,description,color,healthReport[score,description]]';
my $ua = LWP::UserAgent->new;
$ua->timeout(10);
$ua->env_proxy;
my $response = $ua->get($url);

if ($response->is_success) {
        my $content = $response->decoded_content;
        #print $response->decoded_content;
        my $parser = XML::LibXML->new();
        my $xmldoc = $parser->load_xml($response->decoded_content);
        for my $job ($xmldoc->findnodes('/hudson/job')) {
                my $color = $job->findvalue('color/text()');
                print $color;
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T19:56:09.230

[XML::Hash](http://search.cpan.org/perldoc?XML%3A%3AHash "XML::哈希")是将 XML 字符串转换为 perl 哈希的另一个很好的选择。

```
# Conversion from a XML String to a Hash
my $xml_converter = XML::Hash->new();
my $xml_hash = $xml_converter->fromXMLStringtoHash($xml); 
```

# javascript - AngularJS ng-click 事件在嵌套的 ng-repeat 内未触发

> ID：14520774
> 
> 赞同：7
> 
> 时间：2013-01-25T11:22:23.897
> 
> 标签：javascript, onclick, angularjs, angularjs-ng-repeat

我对 ng-click 有问题（我使用的是 angular 1.0.4）。第一次 ng-click 有效，但第二次无效。

```
 <div class="menu-group" ng-repeat="module in modules">
         <div ng-click="toggle($event, $parent)" class="group-head">{{module.group.name}} <span class="{{module.group.icon}}"></span></div>
         <ul class="menu collapsed" ng-init="items = module.group.items">
              <li ng-repeat="item in items" ng-click="openCategory($event, '{{item.name}}')">{{item.display}}</li>
         </ul>
    </div> 
```

生成的代码看起来不错：

```
 <li ng-repeat="item in items" ng-click="openCategory($event, 'simpleName')" class="ng-scope ng-binding">Simple name</li> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-25T12:08:32.050

而不是`'{{item.name}}'`仅仅使用`item.name`

演示：[http ://plnkr.co/edit/QNKZDT9N5k2tQaRrFlwY?p=preview](http://plnkr.co/edit/QNKZDT9N5k2tQaRrFlwY?p=preview)

# whatsapp - 使用 WhatsAPI 是否合法？

> ID：14520776
> 
> 赞同：30
> 
> 时间：2013-01-25T11:22:29.327
> 
> 标签：whatsapp

[使用https://github.com/venomous0x/WhatsAPI](https://github.com/venomous0x/WhatsAPI)通过 Whats App 发送消息是否合法？

我想使用应用程序发送提醒和通知。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-28T00:40:03.387

回答您的具体问题：是的，使用 WhatsAPI 是合法的。

现在来看这个故事，看起来 WhatsApp 最初威胁起诉 WhatsAPI 是由于人们使用该服务来发送垃圾邮件，因此 WhatsAPI 收到了 WhatsApp 律师的停止信。

根据我在[他们的 Github](https://github.com/venomous0x/WhatsAPI/issues/83)上收集到的信息，他们与 WhatsApp 达成协议，因此如果他们尊重他们的网络，他们不会起诉 WhatsApi。于是在 9 月 29 日，将源代码放回网上：

```
Development to be resumed, let's pretend that nothing was happened. 
```

有关究竟发生了什么的更详细的历史，我建议您看[这里](http://www.wnstnsmth.net/blog/2012/09/whats-up-with-whatsapp-a-summary-of-the-recent-security-flaws-for-the-ignorant-user)。

这最终意味着你要成为一个好公民而不是滥用服务，否则你最终可能会被封锁或更糟。但如果你不玩垃圾邮件游戏，从我看来你应该没问题。

请注意，据我所见，Whats App 最近似乎对其密码系统进行了更改，并且我在 Github 问题中看到了一些消息说他们无法连接，所以你应该看看[这个](https://github.com/venomous0x/WhatsAPI/issues/238)来自其中一位开发人员的[帖子。](https://github.com/venomous0x/WhatsAPI/issues/238)

记住，不要滥用系统，你会没事的！

# python - 使用 Appengine 使用 python 解码 JSON

> ID：14520782
> 
> 赞同：2
> 
> 时间：2013-01-25T11:22:42.670
> 
> 标签：python, json, google-app-engine, webapp2

我有以下代码从一个简单的 3 输入表单中检索值：

```
//retrieves data from a form
var $form = $( this ),
    prgname= $form.find('input[name="prg"]').val(),
    startDate = $("#startdate").datepicker({ dateFormat: 'yy-mm-dd' }).val(),
    endDate = $("#enddate").datepicker({ dateFormat: 'yy-mm-dd' }).val(); 
```

以下代码将请求发送到服务器：

```
var request = $.ajax({
      url: "/prg/",
      type: "post",
  data: JSON.stringify({prg:  prgname, start:startDate, end:endDate}),
  contentType: 'application/json',
  dataType: 'json',
      success: function() {},
      error: function (jqXHR, textStatus, errorThrown){}; 
```

在服务器端使用 python 和 webapp2 我正在执行以下操作，（这是我不确定的地方）

```
import json

class PrgHandler(webapp2.RequestHandler):
    def post(self):
        prg= cgi.escape(self.request.POST['prg'])
        start_date = cgi.escape(self.request.POST['start'])
        end_date = cgi.escape(self.request.POST['end'])

        #some code to write to db here
        ....
        #if successful return a success message
        if success:
            success_msg = [{'class': 'success', 'msg': 'Successfully saved to the database'}]
        else:
            success_msg = [{'class': 'error', 'msg': 'Could not saved to the database'}]

        data_string = json.dumps(success_msg)
        self.response.headers.add_header('content-type', 'application/json', charset='utf-8')   
        self.response.write(data_string) 
```

当我得到响应时，它会跳过成功功能并直接进入错误。

记录错误值我没有得到任何有意义的东西：

```
the error is:
The text status is:error
The jqXHR is:[object Object] 
```

Chrome 的控制台给了我错误：

```
Resource interpreted as Document but transferred with MIME type application/json: 
```

我查了一下，SO上的解决方案不起作用，我认为这是服务器端代码的错误：

```
self.response.headers.add_header('content-type', 'application/json', charset='utf-8') 
```

如果我注释掉上面的行，我在 chrome 中没有错误，我只是在空白页上返回响应，其中包含以下格式的正确值：

```
[{"msg": "Successfully saved to the database", "class": "success"}] 
```

在上述情况下，它确实保存到数据库中，所以除了标题之外我似乎找不到任何错误并且根本不知道如何继续！

**编辑** 似乎来自服务器端的错误我删除了以下行： event.preventDefault();

从我的脚本中，它现在引起了所有问题，至少我清楚地表明了问题出在哪里。这是由于错误地获取发布的数据，我将如何以正确的方式做到这一点？我尝试了以下方法：

```
json_data = self.request.GET.items()
decoded = json.loads(json_data) 
```

但我得到一个 TypeError: expected string or buffer on the following line: json_data = self.request.GET.items()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:57:43.810

看看你的调试器。您在帖子中收到一个 JSON 字符串（webapp2 multidict）。您必须使用 json.loads 解码此字符串，从而生成一个 python 对象。

这是我发送和接收 json 的 jquery 代码：

```
function gaeQuery(request) {
    var url = "/query";
    var payload = {'jsondata' : JSON.stringify(request)};
    $.post(
    url, 
    payload, 
    function(response) {
        procesResponse(response);
    },  // succes response callback 
    'json',  // response contains JSON content, and will be decoded in a js object
    {
        contentType: "application/json;charset=utf-8", // send JSON content
        timeout: 20000,
        tryCount: 0,
        retryLimit: 3, // max 3 retries             
        error: function(xhr, textStatus, errorThrown) { // error handling callback
            if (textStatus === 'timeout') {
                this.tryCount++;
                if (this.tryCount <= this.retryLimit) { //try again until retryLimit
                    $.ajax(this);
                    return;
                }
                alert('We have tried ' + this.retryLimit + ' times and it is still not working. We give in. Sorry.');
                return;
            }
            if (xhr.status === 500) { // internal server error
                alert('Oops! There seems to be a server problem, please try again later.');
            } 
            else {
                alert('Oops! There was a problem, sorry.'); // something went wrong
            }
        }
    }
    );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T14:56:45.560

好的，所以我设法弄清楚了这一点，并认为我会发布对我有用的答案，以帮助任何寻找此信息的人，因为 webapp2 文档在“获取”已发布的 json 数据时没有那么有用。

在客户端，我做了以下事情：

```
var request = $.ajax({
    url: "/some/url/",
    type: "POST",
    data: JSON.stringify([{someval: val1, someval2:val2, someval3:val3}]),
    contentType: "application/json",
    dataType: 'json',
    beforeSend: function() {
        $('#loading-div').show();
    },
    complete: function(){
        $('#loading-div').hide();
    },
    success: function(response, textStatus, jqXHR){}
}); 
```

我无法立即找出问题的原因是因为我删除了以下行以及一些注释掉的行，这阻止了页面在发布后重定向。这是所有奇怪、不相关和无用的错误消息的来源：

```
event.preventDefault(); 
```

在服务器端获取要发布到 appengine 的 json 数据，请执行以下操作：

```
jdata = json.loads(cgi.escape(self.request.body))
    for vals in jdata:
        val1 = vals['someval']
        val2 = vals['someval2']
        val3 = vals['someval3'] 
```

以上是我做错了问题的根源，如果没有客户端的前一行，就无法解决。

无论如何，一旦你有了数据，就可以做任何你需要做的处理，一旦你完成并需要发回一个 json 响应，添加以下几行：

```
//the data would look something like this 
data = {'return_value': val1, 'return_value2': val2,
        'return_value3': val3, 'return_value4': val4}

        return_data = json.dumps(data)
        self.response.headers.add_header('content-type', 'application/json', charset='utf-8')
        self.response.write(return_data) 
```

几乎再次忘记在客户端使用jquery访问从服务器发回的变量，它非常直接......执行以下操作：

```
 success: function(response, textStatus, jqXHR){
        console.log(response.return_value);
        console.log(response.return_value2);
        console.log(response.return_value3);
 } 
```

希望这对寻求此信息的人有所帮助。

# java - 如何将浮点数组转换为字节 [2] 数组并返回 java

> ID：14520783
> 
> 赞同：0
> 
> 时间：2013-01-25T11:22:46.980
> 
> 标签：java

我将 DSP 效果应用于字节 [2] 数组格式的原始音频输入。要应用 DSP，我需要将字节数组转换为浮点数组并返回。要将字节数组转换为浮点数组，我使用以下代码：

```
private byte[] buffer;
/*
 * 
 * Converts a byte[2] to a float, in LITTLE_ENDIAN format
 */
private float getFloat(byte argB1, byte argB2) {
    return (float) (argB1 | (argB2 << 8));
}
for (int i = 0; i < N / 2; i++) { 
    curSample[i] = getFloat(buffer[i * 2],
    buffer[i * 2 + 1]);} 
```

我需要将 curSample（它是一个浮点数组）转换回 byte[2] 数组。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:32:19.253

要将字节数组转换为浮点数组，您所做的不考虑字节序。

```
int myInt = (byte[0] << 24) |
((byte[1] & 0xff) << 16) |
((byte[2] & 0xff) << 8) |
(byte[3] & 0xff); 
```

或（对于小端）：

```
int myInt = (byte[3] << 24) |
((byte[2] & 0xff) << 16) |
((byte[1] & 0xff) << 8) |
(byte[0] & 0xff); 
```

然后您可以使用以下方法转换为浮点数：

```
float asFloat = Float.intBitsToFloat(asInt); 
```

将其转换回字节数组

```
 int j=0;
  byte[] byteArray=new byte[4];
  int data=Float.floatToIntBits(asFloat);
  byteArray[j++]=(byte)(data>>>24);
  byteArray[j++]=(byte)(data>>>16);
  byteArray[j++]=(byte)(data>>>8);
  byteArray[j++]=(byte)(data>>>0); 
```

[我也在这里](https://stackoverflow.com/questions/4635769/how-do-i-convert-an-array-of-floats-to-a-byte-and-back)找到了一些类似的信息

# visual-c++ - 在 Visual C++ 中定义多个调试环境变量

> ID：14520786
> 
> 赞同：6
> 
> 时间：2013-01-25T11:22:58.477
> 
> 标签：visual-c++, environment-variables

我想在 Visual C++ 中调试一个依赖于两个环境变量的程序。

我知道如何定义一个变量（*Properties* → *Configuration Properties* → *Debug* → *Environment*），但是我在定义两个变量时遇到了问题。我试图用`\`and将它们分开`|`，但它没有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T11:30:24.387

在我的 VS Express 2012 中，有一个向下箭头，当您单击它时会显示替代`<Edit...>`. 如果选择它，您将看到一个带有文本输入框的对话框。此文本条目允许多行。只需每行定义一个变量。

请注意，它在项目属性对话框的单行文本框中看起来会很奇怪。

# c# - 通知 ViewModel 模型集合已更改

> ID：14520788
> 
> 赞同：1
> 
> 时间：2013-01-25T11:23:08.420
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个模型集合，它从我的大部分代码中引用。

```
public class TraceEntryQueue
    {
        private readonly Queue<TraceEntry> _logEntries; 

        public TraceEntryQueue()
        {
            _logEntries = new Queue<TraceEntry>();
        }

        public void AddEntry(TraceEntry newEntry)
        {
            _logEntries.Enqueue(newEntry);

        }

        public List<TraceEntry> GetAsList()
        {
            return _logEntries.ToList();
        }
    } 
```

这个集合是在我的一个观点中呈现的。

```
public class LoggingViewModel : ViewModelBase
    {
        private ICollectionView _customers;
        public ICollectionView Customers
        {
            get
            {
                return _customers;
            }
            private set
            {
                _customers = value;

            }
        }

        public LoggingViewModel(TraceEntryQueue traceQueue)
        {

            Customers = CollectionViewSource.GetDefaultView(traceQueue.GetAsList());
            Customers.SortDescriptions.Add(new SortDescription("Index", ListSortDirection.Descending));
            Customers.Refresh();
        }
    } 
```

问题是当我通过添加新条目时如何通知我的视图重新加载集合

```
 public void AddEntry(TraceEntry newEntry)
            {
                _logEntries.Enqueue(newEntry);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:20:11.240

使用可观察的集合而不是队列。这将在集合更新时自动通知您的视图（添加/删除等）

```
public class TraceEntryQueue
{
    private readonly ObservableCollection<TraceEntry> _logEntries; 

    public TraceEntryQueue()
    {
        _logEntries = new ObservableCollection<TraceEntry>();
    }

    public void AddEntry(TraceEntry newEntry)
    {
        _logEntries.Add(newEntry);
    }

    public ObservableCollection<TraceEntry> GetLogEntries()
    {
        return _logEntries;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:12:30.940

正如@RobJohnson 提到的，您可以使用 ObservableCollection。但是，如果您需要创建自己的集合类，则应实现[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)接口：

```
public class TraceEntryQueue : INotifyCollectionChanged
{
    private readonly Queue<TraceEntry> _logEntries;

    public TraceEntryQueue()
    {
        _logEntries = new Queue<TraceEntry>();
    }

    public void AddEntry(TraceEntry newEntry)
    {
        _logEntries.Enqueue(newEntry);
        OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, newEntry));
    }

    public List<TraceEntry> GetAsList()
    {
        return _logEntries.ToList();
    }

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    protected virtual void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        if (CollectionChanged != null)
        {
            CollectionChanged(this, e);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:02:29.273

```
public class TraceEntryQueue
{
    private readonly Queue<TraceEntry> _logEntries; 
    private readonly ICollectionView _logEntriesView; 

    public TraceEntryQueue()
    {
        _logEntries = new Queue<TraceEntry>();
        _logEntriesView = CollectionViewSource.GetDefaultView(logEntries.ToList());
    }

    //....

    public void AddEntry(TraceEntry newEntry)
    {
        _logEntries.Enqueue(newEntry);
        _logEntriesView.SourceCollection = logEntries.ToList();
        _logEntriesView.Refresh();
    }

    public ICollectionView GetAsView()
    {
        return _logEntriesView;
    }
} 
```

使用`GetAsView`并直接绑定到您的数据网格/列表框/列表视图。

# javascript - jQuery 数据渲染问题

> ID：14520790
> 
> 赞同：0
> 
> 时间：2013-01-25T11:23:19.093
> 
> 标签：javascript, jquery, html

我正在尝试根据 div 中定义的模板使用 JQuery 呈现包含复选框的菜单。我有一个搜索框，可以缩小菜单范围。

发生了一些奇怪的事情。当我有大量菜单项（大约 5000 个项）时，它最初呈现良好。然后，如果我输入一些内容并缩小结果范围，它就可以正常工作。但是，当我按下退格键并返回到完整的项目列表时，div 会移动一秒钟并重新出现在正确的位置。

我不知道发生了什么。任何关于在哪里进行调试的指针都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:26:51.553

看看[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/)。那里有很多你可能永远不会使用的东西，但对于这个任务，我会看看元素选项卡和脚本选项卡，以暂停 JavaScript 事件并检查 DOM 元素的样式。

这是一个通用问题的通用答案。如果您使用的是 Firefox，请查看[Firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)，但我更喜欢 Chrome 的工具，并且发现它们更好地集成和用户友好，主要是因为使用它们的次数更多。

# java - 玻璃鱼。请求的资源 () 不可用

> ID：14520792
> 
> 赞同：0
> 
> 时间：2013-01-25T11:23:27.963
> 
> 标签：java, maven, glassfish

我已经安装了 glassfish v3。

我正在使用 Maven 来部署我的应用程序。

但是当我尝试启动应用程序时，浏览器会返回：

*请求的资源 () 不可用。*

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T13:02:21.523

```
When you launch an application from the admin console, you will access
it at its document root. In your example, the launch link would look
as follows:

localhost:8080/HelloWorldServlet/

When you access an application at its document root, the container
will check the application's document root folder for any welcome pages.

You can define your own welcome page(s) in your application, but
unless you do so, your application will inherit a predefined list of welcome
pages from your domain's default-web.xml descriptor, which looks like this:

index.html
index.htm
index.jsp

    Try placing a file with one of the above names in your application's document root, and      you'll notice that when you click on the launch link for your
app, the contents of its welcome page will be served.

    If your app does not contain any welcome pages, the container would
    normally generate a directory listing of its docroot folder. By
    default, this functionality is disabled for security reasons, but can
    be enabled by setting the init parameter with name "listings" of the
    "default" Servlet, which is declared in default-web.xml, to "true".
    This will enable directory listings globally (for all apps).
    Alternatively, you
    may enable directory listings for your app only, by setting "listings" to
    "true" in your app's sun-web.xml descriptor. 
```

参考：[https ://www.java.net//node/700171](https://www.java.net//node/700171)

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：名称错误

> ID：14520793
> 
> 赞同：21
> 
> 时间：2013-01-25T11:23:28.360
> 
> 标签：java, noclassdeffounderror

我的文件目录：

```
project/src/m2mcom/entities/AutomatedTelnetClient.java
           /web/Simple.java           
           /org/apache/commons/net/telnet/TelnetClient.java 
```

Simple.java的源代码：

```
package m2mcom.web;
import m2mcom.entities.AutomatedTelnetClient;
import java.util.*;
import java.io.*;

public class Simple {
    public static void main(String [] args) {
        try {
            AutomatedTelnetClient telnet = new AutomatedTelnetClient();
            String answer = telnet.request();
            System.out.println(answer);
        } catch (Exception e) {
            System.err.println("Error");
        }
    }
} 
```

当我执行 Simple.class 时，没有任何编译错误，我收到以下错误消息：

```
C:\Users\Victor\Desktop\project2\src\m2mcom\web>java Simple
Exception in thread "main" java.lang.NoClassDefFoundError: Simple (wrong name: m
2mcom/web/Simple) 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-25T11:26:51.167

您在错误的文件夹中使用错误的类名执行命令。运行 Java 类时需要使用完全限定名称 (FQN)。当然，您必须位于正确的目录中。在您的示例中，您的类的 FQN 是 m2mcom.web.Simple （**包** `m2mcom.web`和**简单**名称的组合`Simple`）。

就推断正确的目录而言，您的类存储在分层文件夹结构中，该结构基本上以`C:\Users\Victor\Desktop\project2\src`.

所以要正确执行你的程序，从`C:\Users\Victor\Desktop\project2\src`，做；

```
java m2mcom.web.Simple 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-27T06:10:09.373

```
package m2mcom.web; 
```

删除上面的行并重新编译它。当您在 netbeans 中运行代码时，它包括在 m2mcom.web 包中。这不在您的类文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T14:43:57.597

因此，当您执行 java 命令时，您必须位于包名正上方的目录中，该命令的格式应为 packagename.classname，不带 .class 后缀。

# java - 下载 Mp3 文件 (Android)

> ID：14520794
> 
> 赞同：0
> 
> 时间：2013-01-25T11:23:29.947
> 
> 标签：java, php, android, html, browser

我有应用程序播放来自互联网的一些 mp3 文件，我想添加“下载按钮”来从互联网下载任何我想从浏览器下载的 mp3 文件，，，而不是从应用程序，，，但是如果我想调用浏览器如：

* * *

startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("xxxx.xxxx.xxxx.mp3")));

* * *

浏览器将播放此 mp3 文件 :(

我想我可以在链接后添加东西直接下载,,,,任何人都可以帮助我吗？

注意：如果您有要从应用程序下载的代码，请告诉我 :) 我是 android 世界的新手 :P，我想要一个简单的代码来理解它，谢谢大家 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T11:30:43.097

最好使用[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)。[您可以在此处](http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/)查看 Lars Vogel 的示例代码

相关位：

```
DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
        Request request = new Request(
                Uri.parse("http://www.vogella.de/img/lars/LarsVogelArticle7.png"));
        enqueue = dm.enqueue(request); 
```

请注意，DownloadManager 适用于 API 版本 9（Android 2.3，Gingerbread）及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:30:21.007

你可以把它放在你的 download.php 文件中

```
 <?php
     $file = $_GET['file'];
     header ("Content-type: octet/stream");
     header ("Content-disposition: attachment; filename=".$file.";");
     header("Content-Length: ".filesize($file));
     readfile($file);
     exit;
   ?> 
```

进而：

```
 Uri.parse("direct_download.php?file=filename.mp3"); 
```

# jquery - 带有选项选择的 jQuery 选择器 + slideUp + slideDown 无法正常工作

> ID：14520798
> 
> 赞同：0
> 
> 时间：2013-01-25T11:23:43.750
> 
> 标签：jquery, jquery-selectors

请看看这个小提琴链接：http: [//jsfiddle.net/NQqbE/1/](http://jsfiddle.net/NQqbE/1/)

这是我的 jQuery：

```
$(document).ready(function(){
    $('#B h4').mouseover(function(){
        $('#C').slideDown();
    });

    $('#C').mouseleave(function(){
        $('#C').slideUp();
    }); 
}); 
```

我已经设法通过单击“div#B h4”来滑动“div#C”，但问题是当我将鼠标悬停在 div#C 值编号 2-5 内的选择选项元素上时，div#C 再次滑动，可能是因为我的鼠标离开了 div。

所以我的问题是：无论如何选择那些在 div#C 之外的选项 select 并且 jquery 仍然在 div#C 中读取它，所以 mouseleave 函数不会运行

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:38:03.147

如果你把 C 和 B 分开，它可以工作

```
<div id="A">
    <div id="B">
        <h4>Show Menu</h4>
    </div>
    <div id="C">
        <p>This is a paragraph</p>
        <select>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
    </div>        
</div>

$(document).ready(function(){
    $('#B').mouseenter(function(){
        $('#C').slideDown();
    });

    $('#C').mouseleave(function(){
        $('#C').slideUp();
    });

}); 
```

小提琴：http: [//jsfiddle.net/NQqbE/2/](http://jsfiddle.net/NQqbE/2/)

# jquery - 使用 jQuery 一般更改字体大小？

> ID：14520800
> 
> 赞同：0
> 
> 时间：2013-01-25T11:23:46.470
> 
> 标签：jquery, css

考虑将字体大小设置为像素、% 和关键字（x-small 等）的组合的文档。是否可以同时增加所有这些元素的字体大小？

像`$("*").each(function(){$(this).increase_fontsize();}`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:27:46.627

使用**em**和**%**是可能的..

例如，从 css 将父 div 字体大小设置为 100%，并从 javascript 更新字体大小。

前任：

```
#sample
{
font-size: 100%;
}

#sample > .child{
font-size: 1em;
} 
```

从javascript增加/减少字体大小

JSFiddle：http: [//jsfiddle.net/Scrtr/2/](http://jsfiddle.net/Scrtr/2/)

# android - 如何从android中的对象列表中添加和删除项目？

> ID：14520801
> 
> 赞同：0
> 
> 时间：2013-01-25T11:23:47.733
> 
> 标签：android

我的应用程序中有一个服务端点列表，将使用微调器显示。现在我想让用户可以添加和删除一些条目。有没有一种简单的方法来添加这样的功能？我在视图中添加了一个加号和减号按钮，现在正在寻找解决此问题的方法。是否已经有可以解决这个问题的观点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:31:36.437

通常，您通过适配器提供列表/微调器项目。因此，当用户从列表中删除某些内容时，适配器应注意此条目消失（在提供视图时不要提供它，调整条目总数）并向列表/微调器发出数据已更改的信号（通过调用超类方法*notifyDatasetChanged()*）

# perl - 为什么 Perl 说它找不到我的模块？

> ID：14520802
> 
> 赞同：1
> 
> 时间：2013-01-25T11:23:54.947
> 
> 标签：perl

我想玩`XML::Rabbit`，但是即使使用最简单的代码我也遇到了问题。我设法将它剥离成一行。

在一个简单的文件中，我使用

```
use Class::Load; 
```

进而：

```
perl test_optlist.pl

Can't locate Data/OptList.pm in @INC (you may need to install the Data::OptList module) (@INC contains: [CUT]) at /home/szymon/perl5/lib/perl5/Class/Load.pm line 8.
BEGIN failed--compilation aborted at /home/szymon/perl5/lib/perl5/Class/Load.pm line 8.
Compilation failed in require at test_optlist.pl line 2.
BEGIN failed--compilation aborted at test_optlist.pl line 2. 
```

所以让我们安装它：

```
$ cpanm Data::OptList
Data::OptList is up to date. (0.107) 
```

Perl 版本：

```
This is perl 5, version 17, subversion 8 (v5.17.8) built for x86_64-linux 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:12:13.577

您肯定在使用另一个`perl`. `cpanm`做

```
perlbrew install-cpanm 
```

要安装`cpanm`under `perlbrew`'s control 的版本，请确保这个新版本`cpanm`是在路径中首先找到的版本（尽管我怀疑它会是），然后再试一次

# android - onPreviewframe 只调用一次

> ID：14520803
> 
> 赞同：5
> 
> 时间：2013-01-25T11:23:55.160
> 
> 标签：android, camera, frame, preview

我正在开发一个相机应用程序，你需要提取每帧预览的一些数据，所以你尝试使用 onPreviewFrame 来做，问题是我的代码 onPreviewFrame 只调用一次，在调试时我没有得到错误所以我不知道该怎么办

这是我的代码

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private static final String TAG = "CameraPreview";
    private SurfaceHolder mHolder;
    private Camera mCamera;
    public byte[] buffer;//for previewcallback

    public CameraPreview(Context context, Camera camera) {
        super(context);
        Log.d("Function", "CameraPreview constructor iniciado");
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the preview.
        Log.d("Function", "SurfaceCreated iniciado");
        try {
            mCamera.setPreviewDisplay(holder);

            buffer = previewBuffer();
            mCamera.addCallbackBuffer(buffer);
            mCamera.setPreviewCallbackWithBuffer(previewCallback);

            mCamera.startPreview();

        } catch (IOException e) {
            Log.d(TAG, "Error setting camera preview: " + e.getMessage());
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        Log.d("Function", "SurfaceDestroyed iniciado");

    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.
        Log.d("Function", "surfaceChanged iniciado");
        if (mHolder.getSurface() == null) {
            // preview surface does not exist
            return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e) {
            // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);

            buffer = previewBuffer();
            mCamera.addCallbackBuffer(buffer);
            mCamera.setPreviewCallbackWithBuffer(previewCallback);

            mCamera.startPreview();

        } catch (Exception e) {
            Log.d(TAG, "Error starting camera preview: " + e.getMessage());
        }
    }

    //Create the callback to access preview frames
    PreviewCallback previewCallback = new PreviewCallback() {

        public void onPreviewFrame(byte[] data, Camera camera) {
            // TODO Auto-generated method stub
            Log.d("Function", "onPreviewFrame iniciado");
            //Convert to jpg
            Size previewSize = camera.getParameters().getPreviewSize();
            Log.d("Function", "onPreviewFrame: preview size=" + previewSize.height + " " + previewSize.width);
            YuvImage yuvImage = new YuvImage(data, ImageFormat.NV21, previewSize.width, previewSize.height, null);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            yuvImage.compressToJpeg(new Rect(0, 0, previewSize.width, previewSize.height), 80, baos);
            byte jpgData[] = baos.toByteArray();
        }
    };

    //To create a buffer of the preview bytes size
    private byte[] previewBuffer() {
        Log.d("Function", "previewBuffer iniciado");
        int bufferSize;
        byte buffer[];
        int bitsPerPixel;

        Camera.Parameters mParams = mCamera.getParameters();
        Camera.Size mSize = mParams.getPreviewSize();
        Log.d("Function", "previewBuffer: preview size=" + mSize.height + " " + mSize.width);
        int mImageFormat = mParams.getPreviewFormat();

        if (mImageFormat == ImageFormat.YV12) {
            int yStride = (int) Math.ceil(mSize.width / 16.0) * 16;
            int uvStride = (int) Math.ceil((yStride / 2) / 16.0) * 16;
            int ySize = yStride * mSize.height;
            int uvSize = uvStride * mSize.height / 2;
            bufferSize = ySize + uvSize * 2;
            buffer = new byte[bufferSize];
            Log.d("Function", "previewBuffer: buffer size=" + Integer.toString(bufferSize));
            return buffer;
        }

        bitsPerPixel = ImageFormat.getBitsPerPixel(mImageFormat);
        bufferSize = (int) (mSize.height * mSize.width * ((bitsPerPixel / (float) 8)));
        buffer = new byte[bufferSize];
        Log.d("Function", "previewBuffer: buffer size=" + Integer.toString(bufferSize));
        return buffer;
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T19:26:48.523

一旦您收到使用[addCallbackBuffer](http://developer.android.com/reference/android/hardware/Camera.html#addCallbackBuffer%28byte%5B%5D%29)添加的预览缓冲区，您需要在完成后将其返回给相机（否则，相机可能会在您完成使用之前覆盖您的数据）。因此，一旦您在 onPreviewFrame 调用中使用完数据字节数组，请再次使用 addCallbackBuffer 将其返回给相机。

在设置相机时，您可能还需要考虑添加两个或更多回调缓冲区。如果相机没有可用的缓冲区可用，它只会丢帧，因此如果处理过程中偶尔出现故障或其他延迟，则可以使用一些可用的缓冲区来平滑帧速率。

# java - 使 android-textview 的某个部分向右对齐

> ID：14520808
> 
> 赞同：19
> 
> 时间：2013-01-25T11:24:02.670
> 
> 标签：java, android, android-widget

我有这个`TextView`。它的某些部分应该与左侧对齐，而某些部分应与右侧对齐。我将如何在 Java 中做到这一点？

基本上我希望第一行向左对齐，下一行向右对齐，依此类推。

有人有线索吗？

编辑

我曾尝试使用 HTML，然后当它不起作用时，我尝试了跨度。

html尝试

```
textView.setText(Html.fromHtml("<p align=\"right\">THIS IS TO THE RIGHT</p>")); 
```

这是跨度尝试

```
 String LeftText = "LEFT";
    String RightText = "RIGHT";

    final String resultText = LeftText + "  " + RightText;
    final SpannableString styledResultText = new SpannableString(resultText);
    styledResultText.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_OPPOSITE), LeftText.length() + 1, LeftText.length() + 2 +RightText.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    textView.setText(styledResultText); 
```

但它们似乎都不起作用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-25T11:35:38.417

```
TextView resultTextView = new TextView(this);
final String resultText = LeftText + "  " + RightText;
final SpannableString styledResultText = new SpannableString(resultText);
styledResultText.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_OPPOSITE)
    , LeftText.length() + 2
    , LeftText.length() + 2 + RightText.length()
    , Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
resultTextView.setText(styledResultText); 
```

`Alignment.ALIGN_OPPOSITE is the equivalent for right side.`

`Alignment.ALIGN_NORMAL is the equivalent for left side.`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-07T22:42:02.527

这是一个适用于 Spannable 的解决方案，如果左右太宽，它们将在同一条线上重叠。由于使用 spannable 执行 Left/Right 技巧需要在 Left 和 Right 之间换行，我的解决方法是添加一个 spannable，将一个换行的行高减少为零（即重叠行），然后在之后恢复正常行高那。

```
 String fullText = leftText + "\n " + rightText;     // only works if  linefeed between them! "\n ";

    int fullTextLength = fullText.length();
    int leftEnd = leftText.length();
    int rightTextLength = rightText.length();

    final SpannableString s = new SpannableString(fullText);
    AlignmentSpan alignmentSpan = new AlignmentSpan.Standard(Layout.Alignment.ALIGN_OPPOSITE);
    s.setSpan(alignmentSpan, leftEnd, fullTextLength, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    s.setSpan(new SetLineOverlap(true), 1, fullTextLength-2, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    s.setSpan(new SetLineOverlap(false), fullTextLength-1, fullTextLength, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

我们有处理重叠线的小程序：

```
 private static class SetLineOverlap implements LineHeightSpan {
    private int originalBottom = 15;        // init value ignored
    private int originalDescent = 13;       // init value ignored
    private Boolean overlap;                // saved state
    private Boolean overlapSaved = false;   // ensure saved values only happen once

    SetLineOverlap(Boolean overlap) {
        this.overlap = overlap;
    }

    @Override
    public void chooseHeight(CharSequence text, int start, int end, int spanstartv, int v,
                             Paint.FontMetricsInt fm) {
        if (overlap) {
            if (!overlapSaved) {
                originalBottom = fm.bottom;
                originalDescent = fm.descent;
                overlapSaved = true;
            }
            fm.bottom += fm.top;
            fm.descent += fm.top;
        } else {
            // restore saved values
            fm.bottom = originalBottom;
            fm.descent = originalDescent;
            overlapSaved = false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-11T03:12:06.517

感谢@Frank 的提示，但这已经足够了：

```
public class LineOverlapSpan implements LineHeightSpan {
    @Override
    public void chooseHeight(final CharSequence text, final int start, final int end, final int spanstartv, final int v, final Paint.FontMetricsInt fm) {
        fm.bottom += fm.top;
        fm.descent += fm.top;
    }
} 
```

像这样使用：

```
CharSequence text = return new Truss()
        .append("LEFT")
        .pushSpan(LineOverlapSpan())
        .append("\n")
        .popSpan()
        .pushSpan(AlignmentSpan.Standard(Layout.Alignment.ALIGN_OPPOSITE))
        .append("RIGHT")
        .build() 
```

`Truss`在哪里

> 一个`SpannableStringBuilder`包装器，它的 API 不会让我想要刺痛我的眼睛。
> 
> *   杰克沃顿，[https://gist.github.com/JakeWharton/11274467](https://gist.github.com/JakeWharton/11274467)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T11:28:05.487

两种解决方案：

1）每行有不同的文本视图并设置其重力。

> 2）在加载数据时使用 Html 为其设置 html 中的对齐方式 [REF:how-to-display-html-in-textview](https://stackoverflow.com/questions/2116162/how-to-display-html-in-textview) **这将不起作用** [align is not a supported tags 已](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html) 编辑：

还

3：将使用跨度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T11:34:50.860

简单。在 textview 中调整 xml 部分。使用布局。如果您希望文本视图位于左侧

android:alignParentLeft="true" 更多对齐细节看这里。

[http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

这也是不同布局的示例。

[http://www.androidhive.info/2011/07/android-layouts-linear-layout-relative-layout-and-table-layout/](http://www.androidhive.info/2011/07/android-layouts-linear-layout-relative-layout-and-table-layout/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-15T06:41:00.867

启发了其他解决方案，但**解决了多行文本问题和文本重叠问题**。

```
class LineOverlapSpan() : LineHeightSpan {
    var originalBottom: Int = 0
    var originalDescent: Int = 0
    var overlapSaved = false

    override fun chooseHeight(
        text: CharSequence?,
        start: Int,
        end: Int,
        spanstartv: Int,
        v: Int,
        fm: Paint.FontMetricsInt?
    ) {
        if (fm == null) {
            return
        }

        if (!overlapSaved) {
            originalBottom = fm.bottom
            originalDescent = fm.descent
            overlapSaved = true
        }

        if (text?.subSequence(start, end)?.endsWith("\n") == true) {
            fm.bottom += fm.top
            fm.descent += fm.top
        } else {
            fm.bottom = originalBottom
            fm.descent = originalDescent
        }
    }

} 
```

用法：

```
fun keyValueSpan(key: CharSequence, value: CharSequence) = span {
    span {
        alignment = "normal"
        +key
        span {
            textColor = Color.TRANSPARENT
            +value
        }
        span {
            +"\n"
            addSpan(LineOverlapSpan())
        }
    }
    span {
        alignment = "opposite"
        +value
    }
} 
```

Kotlin 解决方案是使用 Kpan 库[https://github.com/2dxgujun/Kpan](https://github.com/2dxgujun/Kpan)

# asp.net-mvc - 版本控制 WebAPI - 模型更改

> ID：14520810
> 
> 赞同：0
> 
> 时间：2013-01-25T11:24:09.330
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在使用 ASP.NET WebAPI 构建一个 RESTful API，我需要支持不同的 API 版本。我知道基于 URL（api/v1/ 样式）或基于自定义 HTTP 标头实现控制器选择的方法。这样，对于不同的 API 版本，我将在不同的命名空间中拥有不同的控制器。不过，我还有另一个问题要考虑。如果我的模型在 v1 和 v2 之间发生变化怎么办？如何防止我的 v1 API 更改其序列化输出？我使用的是实体框架代码优先方法，因此模型更改很容易实现，但这可能会破坏我的 v1 API。确保每个 API 版本保持一致的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:42:00.013

我看不出实体框架与它有什么关系。我希望你不是直接序列化你的 EF 模型，是吗？如果你这样做，那么你确实有问题。

您应该改用视图模型。然后，这些视图模型可以像您对控制器进行版本控制一样进行版本控制。对于不同版本的控制器，您将拥有不同的视图模型。

这样，您就可以完全控制通过网络进行序列化的内容。现在，您可以根据需要在内部更改您的 EF 模型。有一天，您甚至可能决定放弃 EF（因为它很糟糕，并且可能会有一个新的孩子）并用完全不同的东西替换它，这种变化根本不会反映在您的 Web API 和暴露于外部只是因为您正在公开视图模型。

# java - 为什么接口中不包含同步方法

> ID：14520814
> 
> 赞同：43
> 
> 时间：2013-01-25T11:24:19.113
> 
> 标签：java, multithreading, oop

当我`synchronized`在接口中的方法上使用时，编译器会发出错误。你能告诉我为什么会这样吗？

（逻辑上）`synchronized`不能应用于方法的原因是`interface`什么？

我试图[在此链接中](https://stackoverflow.com/questions/14482268/doubts-in-the-code-of-thread-pool-implementation)通过 Threadpool 创建一个接口。帮助我在上面的代码中制作接口。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-25T11:27:17.007

因为`synchronized`是一个实现细节。该方法的一种实现可能需要使该方法同步，而另一种可能不需要它。调用者不关心方法是否同步。它不是合同的一部分，它说明*了*该方法的作用。使用哪种同步技术（如果有的话）来履行合同是无关紧要的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T11:38:01.493

synchronized 是一个实现细节，不属于接口。

您可以拥有各种可能是线程安全的实现，但不涉及使用关键字同步。

您可能会考虑使用一些注释来表明实现应该是线程安全的意图。例如[http://jetbrains.dzone.com/tips/concurrency-hot-try-jcip](http://jetbrains.dzone.com/tips/concurrency-hot-try-jcip)解释了如何使用 JCIP 并发注释。

顺便提一句。您可能希望熟悉 java 并发框架，而不是使用同步。如今，直接使用像同步这样的低级结构被认为是一种反模式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-25T17:54:38.520

简单的答案是同步是在谈论方法实现，但是在接口中所有方法都是抽象的，这意味着没有实现。

# c# - 每 5 分钟调用一次大型 SQL 脚本会导致 IIS 池崩溃？

> ID：14520817
> 
> 赞同：0
> 
> 时间：2013-01-25T11:24:39.553
> 
> 标签：c#, .net, sql, performance, iis

# 语境：

我有十几台服务器。

每台服务器都有一个带有站点的 IIS，该站点**每 5 分钟**执行一次以下大型 SQL 脚本。

在某些服务器上，托管站点的池崩溃。该池仅包含此站点。

每次崩溃后我都需要回收游泳池……目前是我的双手。

因此，该站点存在问题，我认为大型 SQL 脚本存在问题。

# 调用 SQL 脚本的 C# 代码：

```
string root = AppDomain.CurrentDomain.BaseDirectory;
string script = File.ReadAllText(root + @"..\SGBD\select_user_from_all_bases.sql").Replace("$date", dtLastModif);
string connectionString = @"Data Source=(local);Integrated Security=SSPI";

using (var connection = new SqlConnection(connectionString))
{
    connection.Open();

    var command = new SqlCommand(script, connection);
    var reader = command.ExecuteReader();

    var users = new List<UserModel>();

    while (reader.Read())
    {
        users.Add(new UserModel()
        {
            dbName = String.Format("{0}", reader[0]),
            idExternal = int.Parse(String.Format("{0}", reader[1])),
            firstname = String.Format("{0}", reader[2]),
            lastname = String.Format("{0}", reader[3]),
            login = String.Format("{0}", reader[4]),
            password = String.Format("{0}", reader[5]),
            dtContractStart = reader[6] != DBNull.Value ? (DateTime?)reader[6] : null,
            dtContractEnd = reader[7] != DBNull.Value ? (DateTime?)reader[7] : null,
            emailPro = String.Format("{0}", reader[8]),
            emailPerso = String.Format("{0}", reader[9])
        });
    }

    return users;
} 
```

# 和 SQL 脚本：

```
USE master

DECLARE db_names CURSOR FOR
    SELECT name FROM sysdatabases WHERE [name] LIKE 'FOO_%' AND [name] NOT LIKE 'FOO_TRAINING_%'

DECLARE @db_name NVARCHAR(100)
DECLARE @query NVARCHAR(MAX)
DECLARE @queryFinal NVARCHAR(MAX)
SET @query = ''
OPEN db_names 

FETCH NEXT FROM db_names INTO @db_name

WHILE @@FETCH_STATUS = 0
BEGIN

    SET @query = @query + 'SELECT ''' + @db_name + ''', id_salarie, nom, prenom, login COLLATE SQL_Latin1_General_CP1_CI_AS, password COLLATE SQL_Latin1_General_CP1_CI_AS, date_arrivee, date_depart, email COLLATE SQL_Latin1_General_CP1_CI_AS, persoMail COLLATE SQL_Latin1_General_CP1_CI_AS FROM [' + @db_name + '].dbo.utilisateurs WHERE dt_last_modif >= ''$date'' UNION '

    FETCH NEXT FROM db_names INTO @db_name

END

DEALLOCATE db_names 
SET @queryFinal = left(@query, len(@query)-6)
    EXEC sp_executesql @queryFinal 
```

# 有关服务器的更多信息：

*   Server0 : 8 个数据库，1050 个用户，没有崩溃
*   Server1：88个数据库，18954个用户，经常崩溃
*   Server2：109个数据库，21897个用户，经常崩溃
*   Server3：26个数据库，1612个用户，没有crash
*   ETC

# 问题 ：

*   脚本有什么问题？知道如何阻止崩溃吗？
*   如果没有解决方案，如何自动回收池？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:18:53.470

您是否尝试过确保阅读器在使用后也关闭？

```
using(var reader = command.ExecuteReader()) { ... 
```

我不确定是否关闭了连接

`using (var connection = new SqlConnection(connectionString))`

负责命令和阅读器资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:43:58.983

我会在这里做一些事情......如果你的问题持续存在。首先，我不会生成一个完整的 sql 查询来尝试一次从所有这些表中获取数据。接下来，查询正在查询，并且暗示可能会尝试锁定与查询关联的记录以进行 POSSIBLE 更新......即使您可能不会这样做。

我会`WITH (NOLOCK)`在表中添加一个。

```
select columns from yourTable WITH(NOLOCK) where... 
```

这可以防止锁定与查询关联的所有页面的任何开销。

现在，如何更好地处理您的循环。在你的 fetch 循环之前，我会创建一个预期输出结果的临时表......类似于

（不确定您的结构的列名长度...

```
create #C_TempResults
  ( fromDBName char(20), 
    id_salarie int,
    nom char(10),
    prenom char(10),
    login char(10),
    password char(10),
    date_arivee datetime,
    date_depart datetime,
    email char(60),
    persoMail char(60) ); 
```

然后，在您已经循环遍历所有正在查询的表的循环中，而不是构建一个连接的 SQL 语句以在最后执行，只需一次运行一个，然后像...一样插入到临时表中。

```
(same beginning to prepare your fetch cursor...)
BEGIN
       SET @query = 'INSERT INTO #C_TempResults '
                 + ' SELECT ''' + @db_name + ''' as fromDBName, id_salarie, nom, prenom, '
                       + 'login COLLATE SQL_Latin1_General_CP1_CI_AS, '
                       + 'password COLLATE SQL_Latin1_General_CP1_CI_AS, '
                       + 'date_arrivee, date_depart, '
                       + 'email COLLATE SQL_Latin1_General_CP1_CI_AS, '
                       + 'persoMail COLLATE SQL_Latin1_General_CP1_CI_AS '
                 +  'FROM [' + @db_name + '].dbo.utilisateurs WITH (NOLOCK) '
                 +  'WHERE dt_last_modif >= ''$date'' ';

        -- Run this single query now, get the data and release any "lock" resources
        EXEC sp_executesql @queryFinal

        -- now, get the next database to query from and continue
        FETCH NEXT FROM db_names INTO @db_name
END

DEALLOCATE db_names 

-- FINALLY, just run your select from the temp table that has everything all together...
select * from #C_TempResults;

-- and get rid of your "temp" table
drop table #C_TempResults; 
```

# ruby-on-rails - 在 Rails 中访问属性的奇怪问题

> ID：14520818
> 
> 赞同：0
> 
> 时间：2013-01-25T11:24:39.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我可能很愚蠢，但是：

```
@activation_token = ActivationToken.where(:token => params[:id])
render(:text => @activation_token.inspect) 
```

工作，并给出：

```
[#<ActivationToken id: 7, user_id: 21, token: "f4c3cb7c7629344e8261bf16e4a99900", used: false, created_at: "2013-01-25 10:48:57", updated_at: "2013-01-25 10:48:57">] 
```

但

```
@activation_token.user_id 
```

抛出：

```
undefined method `user_id' for #<ActiveRecord::Relation:0x007fbfe414ff18> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:26:19.683

尝试：

```
@activation_token.first.user_id 
```

它提供对象集合，如果您想访问@activation_token.user_id，请使用：

```
@activation_token = ActivationToken.where(:token => params[:id]).first
# or
@activation_token = ActivationToken.find_by_token(params[:id]) 
```

# javascript - 如何在 mvc4 应用程序中通过 jquery 中的任何表达式管理元素类名？

> ID：14520819
> 
> 赞同：1
> 
> 时间：2013-01-25T11:24:40.580
> 
> 标签：javascript, jquery, asp.net-mvc, html-lists

其中之一具有某些`<li>`元素`class="current"`。我想决定哪个`<li>`是最新的。这是视图：

```
@{
     int k = 10;  //this will change in every request
}

<ul class="car">
     @foreach (var item in modelCount)
     {
       <li 
           @{if (item.Id == k) { <text>class="current"</text>} }>
           <a href="#">@item.Name </a>
       </li>
     }
</ul> 
```

这可行，但`<li>`默认情况下第一个始终是最新的。当我的表达式中第一个元素是 current 时，一切正常，否则，`<ul>`有 2 个 current `<li>`。如何用 jquery 函数解决这个问题？

**编辑：**

**我需要：**

**如果`<li>`元素有 2 个当前类，则删除其中的第一个。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:36:14.553

```
function removeDuplicateCurrentClass(){

    var currentListElements = [];

    $('ul.car li').each(function(){

         if($(this).hasClass('current'))
             currentListElements.push(this);
    });

    if(currentListElements.length > 1)
         $(currentListElements[0]).removeClass('current');
    //if more than one current class exist: remove the first one        

}

$(function(){

    removeDuplicateCurrentClass();

    //or simply

    if($('ul.car li.current').length > 1)
        $('ul.car li.current:first').removeClass('current');

}); 
```

# java - 如何在java中打开另一个目录中的文件？

> ID：14520822
> 
> 赞同：6
> 
> 时间：2013-01-25T11:24:41.517
> 
> 标签：java, file, directory

如何打开当前目录中不存在但在另一个目录中的文件。例如，我有一个文件夹 F:/test，我的文件在 F:/test/test2/doit.txt 和 D:/test3/doit2 中。文本文件

制作 File 对象时在参数中输入的内容如下：

```
File f = new File("/test2/doit.txt"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T12:03:44.300

无论使用哪种操作系统，例如 demo.txt 文件都可以像这样访问

```
File file = new File("/d:/user/demo.txt"); 
```

在文件所在的 Windows`D:\user\`和

```
File file = new File("/usr/demo.txt"); 
```

`*nix`文件所在`*nux`的位置`/usr/`

此外，如果想要相对访问一个文件，可以按以下方式完成（考虑 Windows 示例）：

假设我在 D: 中的歌曲目录中，例如：

```
D:/
|
|---songs/
|   |
|   |---Main.java
|
|---user/
    |
    |---demo.txt 
```

并且代码在 Main.java 中，那么下面的代码就可以工作了。

```
File file = new File("../user/demo.txt"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T11:59:44.597

假设你从 F:/test 运行你的程序，你应该使用类似的东西：

```
File f = new File("./test2/doit.txt"); 
```

使用硬编码的绝对路径不是一个好主意 - 当用户具有不同的目录结构时，您的程序可能无法运行。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-25T11:27:59.223

请在 Windows 操作系统上尝试以下代码：

```
reader = new FileReader ("C:/Users/user/Desktop/java/test.txt"); 
```

# javascript - 填充查找的代码第一次无法完全正常工作

> ID：14520828
> 
> 赞同：0
> 
> 时间：2013-01-25T11:25:07.980
> 
> 标签：javascript, dynamics-crm-2011

我的表单上有一些 javascript 代码，当第一次创建记录时，它会自动用当前用户填充 2 个查找字段。这在大多数情况下都可以正常工作，但我注意到在我第一次使用它时（每天/会话？）我要填写的第一个字段确实被填充了，但是该字段看起来仍然是空的，好像代码没有工作。

我已经确认该字段正在被填写，只有该字段的显示不起作用，但我不知道为什么，尤其是为什么它只是发生这种情况的一个字段。

我将在下面发布我使用的代码，当调用它时，我传入一个我想要设置的字段名称的数组。谁能帮我找出为什么这不起作用？

谢谢

```
function RetrieveUserInfo(fieldsToSet) {

//Retrieve user information
var context;
var serverUrl;
var UserID;
var ODataPath;

context = Xrm.Page.context;
serverUrl = context.getServerUrl();
UserID = context.getUserId();
ODataPath = serverUrl + "/XRMServices/2011/OrganizationData.svc";

var retrieveUserReq = new XMLHttpRequest();
retrieveUserReq.open("GET", ODataPath + "/SystemUserSet(guid'" + UserID + "')", true);
retrieveUserReq.setRequestHeader("Accept", "application/json");
retrieveUserReq.setRequestHeader("Content-Type", "application/json; charset=utf-8");

retrieveUserReq.onreadystatechange = function () {
    SetUserValues(this, fieldsToSet);
};

retrieveUserReq.send(); 
```

}

```
function SetUserValues(retrieveUserReq, fieldsToSet) {

if (retrieveUserReq.readyState == 4
/* complete */
) {
    if (retrieveUserReq.status == 200) {
        var retrievedUser = this.parent.JSON.parse(retrieveUserReq.responseText).d;
        if (retrievedUser.FullName != null)

        //Get details of current user
        var setUservalue = new Array();
        setUservalue[0] = new Object();
        setUservalue[0].id = Xrm.Page.context.getUserId();
        setUservalue[0].entityType = 'systemuser';
        setUservalue[0].name = retrievedUser.FullName;

        //get form type
        var formType = Xrm.Page.ui.getFormType();

        if (formType != undefined) { //Create
            if (formType == 1) {

                //for each field specified, set it to the current user
                for (var i = 0; i < fieldsToSet.length; i++) {
                    Xrm.Page.getAttribute(fieldsToSet[i]).setValue(setUservalue);
                }
            }
        }
    }
    else {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:04:39.093

这是一个远射，但不起作用的领域 - 它不是碰巧是残疾人领域吗？如果它是*只读*字段，您可能需要添加

```
Xrm.Page.getAttribute(“fieldname”).setSubmitMode(“always”); 
```

`onsave`事件上。

# java - x > -1 vs x >= 0，是否存在性能差异

> ID：14520830
> 
> 赞同：39
> 
> 时间：2013-01-25T11:25:11.713
> 
> 标签：java, c++, operators, micro-optimization, premature-optimization

我曾经听过一位老师放弃了这个，从那以后它就一直困扰着我。假设我们要检查整数`x`是否大于或等于 0。有两种方法可以检查：

```
if (x > -1){
    //do stuff
} 
```

和

```
if (x >= 0){
    //do stuff
} 
```

按照这位老师的说法`>`会稍微快一点`>=`。在这种情况下是 Java，但据他说，这也适用于 C、c++ 和其他语言。这个说法有道理吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-25T11:27:43.910

它在很大程度上取决于底层架构，但任何差异都是微不足道的。

如果有的话，我希望`(x >= 0)`会稍微快一点，因为`0`在某些指令集（例如 ARM）上是免费的。

当然，任何明智的编译器都会选择最佳实现，而不管您的源代码中有哪个变体。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-25T21:03:28.737

在任何现实世界的意义上都没有区别。

让我们看一下各种编译器为各种目标生成的一些代码。

*   我假设一个签名的 int 操作（这似乎是 OP 的意图）
*   我已经通过调查限制了 C 和我手头的编译器（诚然是一个非常小的样本 - GCC、MSVC 和 IAR）
*   启用基本优化（`-O2`对于 GCC，`/Ox`对于 MSVC，`-Oh`对于 IAR）
*   使用以下模块：

    ```
    void my_puts(char const* s);

    void cmp_gt(int x) 
    {
        if (x > -1) {
            my_puts("non-negative");
        }
        else {
            my_puts("negative");
        }
    }

    void cmp_gte(int x) 
    {
        if (x >= 0) {
            my_puts("non-negative");
        }
        else {
            my_puts("negative");
        }
    } 
    ```

以下是他们每个人为比较操作产生的结果：

针对 ARM 的 MSVC 11：

```
// if (x > -1) {...
00000        |cmp_gt| PROC
  00000 f1b0 3fff    cmp         r0,#0xFFFFFFFF
  00004 dd05         ble         |$LN2@cmp_gt|

// if (x >= 0) {...
  00024      |cmp_gte| PROC
  00024 2800         cmp         r0,#0
  00026 db05         blt         |$LN2@cmp_gte| 
```

针对 x64 的 MSVC 11：

```
// if (x > -1) {...
cmp_gt  PROC
  00000 83 f9 ff     cmp     ecx, -1
  00003 48 8d 0d 00 00                  // speculative load of argument to my_puts()
    00 00        lea     rcx, OFFSET FLAT:$SG1359
  0000a 7f 07        jg  SHORT $LN5@cmp_gt

// if (x >= 0) {...
cmp_gte PROC
  00000 85 c9        test    ecx, ecx
  00002 48 8d 0d 00 00                  // speculative load of argument to my_puts()
    00 00        lea     rcx, OFFSET FLAT:$SG1367
  00009 79 07        jns     SHORT $LN5@cmp_gte 
```

针对 x86 的 MSVC 11：

```
// if (x > -1) {...
_cmp_gt PROC
  00000 83 7c 24 04 ff   cmp     DWORD PTR _x$[esp-4], -1
  00005 7e 0d        jle     SHORT $LN2@cmp_gt

// if (x >= 0) {...
_cmp_gte PROC
  00000 83 7c 24 04 00   cmp     DWORD PTR _x$[esp-4], 0
  00005 7c 0d        jl  SHORT $LN2@cmp_gte 
```

针对 x64 的 GCC 4.6.1

```
// if (x > -1) {...
cmp_gt:
    .seh_endprologue
    test    ecx, ecx
    js  .L2

// if (x >= 0) {...
cmp_gte:
    .seh_endprologue
    test    ecx, ecx
    js  .L5 
```

针对 x86 的 GCC 4.6.1：

```
// if (x > -1) {...
_cmp_gt:
    mov eax, DWORD PTR [esp+4]
    test    eax, eax
    js  L2

// if (x >= 0) {...
_cmp_gte:
    mov edx, DWORD PTR [esp+4]
    test    edx, edx
    js  L5 
```

针对 ARM 的 GCC 4.4.1：

```
// if (x > -1) {...
cmp_gt:
    .fnstart
.LFB0:
    cmp r0, #0
    blt .L8

// if (x >= 0) {...
cmp_gte:
    .fnstart
.LFB1:
    cmp r0, #0
    blt .L2 
```

针对 ARM Cortex-M3 的 IAR 5.20：

```
// if (x > -1) {...
cmp_gt:
80B5 PUSH     {R7,LR}
.... LDR.N    R1,??DataTable1  ;; `?<Constant "non-negative">`
0028 CMP      R0,#+0
01D4 BMI.N    ??cmp_gt_0

// if (x >= 0) {...
cmp_gte:
 80B5 PUSH     {R7,LR}
 .... LDR.N    R1,??DataTable1  ;; `?<Constant "non-negative">`
 0028 CMP      R0,#+0
 01D4 BMI.N    ??cmp_gte_0 
```

如果您仍然和我在一起，以下是评估`(x > -1)`和`(x >= 0)`显示之间的任何注释的区别：

*   针对 ARM 的 MSVC 使用`cmp r0,#0xFFFFFFFF`for`(x > -1)`与`cmp r0,#0`for `(x >= 0)`。第一条指令的操作码长了两个字节。我想这可能会引入一些额外的时间，所以我们称之为优势`(x >= 0)`
*   针对 x86 的 MSVC 使用`cmp ecx, -1`for`(x > -1)`与`test ecx, ecx`for `(x >= 0)`。第一条指令的操作码长一个字节。我想这可能会引入一些额外的时间，所以我们称之为优势`(x >= 0)`

请注意，GCC 和 IAR 为两种比较生成了相同的机器代码（可能使用了哪个寄存器除外）。因此，根据这项调查，似乎`(x >= 0)`“更快”的可能性微乎其微。但是，无论最小化更短的操作码字节编码可能具有（我强调*可能具有*）的任何优势，肯定会被其他因素完全掩盖。

如果您发现 Java 或 C# 的 jitted 输出有什么不同，我会感到惊讶。即使对于像 8 位 AVR 这样的非常小的目标，我怀疑你会发现任何不同之处。

总之，不用担心这个微优化。我认为我在这里写的时间已经超过了这些表达式在我有生之年执行它们的所有 CPU 上累积的性能差异所花费的时间。如果您有能力测量性能差异，请将您的精力投入到更重要的事情上，例如研究亚原子粒子的行为或其他事情。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-25T11:29:41.490

你的老师一直在读一些非常古老的书。过去，某些架构缺乏`greater than or equal`评估`>`所需机器周期数少于的指令`>=`，但如今这些平台很少见。我建议追求可读性，并使用`>= 0`.

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-01-25T11:36:41.283

这里更大的问题是[过早的优化](http://en.wikipedia.org/wiki/Program_optimization)。许多人认为编写**可读**代码比编写**高效**代码更重要[ [1](https://softwareengineering.stackexchange.com/questions/43151/should-you-sacrifice-code-readability-with-how-efficient-code-is) , [2](http://www.techrepublic.com/blog/programming-and-development/why-clean-code-is-more-important-than-efficient-code/4284) ]。一旦设计被证明有效，我会将这些优化作为低级库的最后阶段应用。

您不应该经常考虑以牺牲可读性为代价对代码进行微小的优化，因为这会使代码的阅读和维护变得更加困难。如果需要进行这些优化，请将它们抽象为较低级别的函数，这样您仍然可以获得更易于人类阅读的代码。

作为一个疯狂的例子，考虑一个以汇编形式编写程序的人，而另一个人愿意放弃额外的效率并使用 Java 来获得设计、易用性和可维护性方面的好处。

附带说明一下，如果您使用的是 C，也许编写一个使用效率稍高的代码的宏是一个更可行的解决方案，因为它比分散的操作更能实现效率、可读性和可维护性。

当然，效率和可读性的权衡取决于您的应用程序。如果该循环每秒运行 10000 次，那么它可能是一个瓶颈，您可能需要花费时间来优化它，但如果它是一个偶尔调用的语句，那么它可能不值得一分钟的收益。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-01-25T11:35:06.143

是的，有区别，你应该看到字节码。

为了

```
if (x >= 0) {} 
```

字节码是

```
ILOAD 1
IFLT L1 
```

为了

```
if (x > -1) {} 
```

字节码是

```
ILOAD 1
ICONST_M1
IF_ICMPLE L3 
```

版本 1 更快，因为它使用特殊的零操作数运算

```
iflt : jump if less than zero 
```

但是可以看到仅在解释模式下运行 JVM 的差异`java -Xint ...`，例如这个测试

```
int n = 0;       
for (;;) {
    long t0 = System.currentTimeMillis();
    int j = 0;
    for (int i = 100000000; i >= n; i--) {
        j++;
    }
    System.out.println(System.currentTimeMillis() - t0);
} 
```

显示 n = 0 为 690 毫秒，n = 1 为 760 毫秒。（我使用 1 而不是 -1，因为它更容易演示，想法保持不变）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-25T11:27:26.127

事实上，我相信第二个版本应该稍微快一些，因为它需要一个位检查（假设你在上面显示的比较为零）。然而，此类优化从未真正显示出来，因为大多数编译器都会优化此类调用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-25T11:35:15.703

">=" 是单个操作，就像">"。不是使用 OR 的 2 个单独的操作。

但是 >=0 可能更快，因为计算机只需要检查一位（负号）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-25T12:12:33.337

> 根据这位老师的说法 > 会比 >= 稍微快一点。在这种情况下是 Java，但据他说，这也适用于 C、c++ 和其他语言。这个说法有道理吗？

你的老师根本就错了。不仅为什么机会比与 0 进行比较可以更快，而且因为这种本地优化由您的编译器/解释器很好地完成，并且您可以将所有试图提供帮助的人都搞砸。绝对不是什么好教的东西。

你可以阅读： [这个](https://stackoverflow.com/q/14384367/1458030)或[这个](https://stackoverflow.com/q/14384367/1458030)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-25T19:49:47.193

很抱歉插话这个关于性能的谈话。

在我离题之前，让我们注意 JVM 有特殊的[指令](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings)，不仅可以处理零，还可以处理常量 1 到 3。话虽如此，架构处理零的能力很可能已经远远落后于编译器优化，还有字节码到机器码的翻译等。

我记得在我的 x86 汇编语言时代，集合中有大于 ( `ja`) 和大于或等于 ( `jae`) 的指令。您将执行以下操作之一：

```
; x >= 0
mov ax, [x]
mov bx, 0
cmp ax, bx
jae above

; x > -1
mov ax, [x]
mov bx, -1
cmp ax, bx
ja  above 
```

这些替代方案花费相同的时间，因为指令相同或相似，并且它们消耗可预测数量的时钟周期。例如，参见[this](http://www.agner.org/optimize/instruction_tables.pdf)。`ja`并且`jae`可能确实检查不同数量的算术寄存器，但该检查主要是指令需要花费可预测的时间。这反过来又需要保持 CPU 架构的可管理性。

但我确实是来这里跑题的。

摆在我面前的答案往往是中肯的，并且也表明无论您选择哪种方法，就性能而言，您都将处于同一水平。

这使您可以根据其他标准进行选择。这就是我想要做笔记的地方。在测试索引时，首选紧密绑定样式检查，主要`x >= lowerBound`是`x > lowerBound - 1`. 这个论点肯定是人为的，但它归结为可读性，因为这里所有其他东西都是平等的。

由于从概念上讲，您正在针对下限进行测试，`x >= lowerBound`因此规范测试可以引起代码读者最适应的认知。`x + 10 > lowerBound + 9`, `x - lowerBound >= 0`, 和`x > -1`都是针对下限进行测试的迂回方法。

再一次，很抱歉闯入，但我觉得这在学术之外很重要。我总是以这些术语思考，让编译器担心它认为可以摆脱对常量和运算符的严格性摆弄的微小优化。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-25T23:13:55.033

首先，它高度依赖于硬件平台。对于现代 PC 和 ARM SoC，差异主要取决于编译器优化。但对于没有 FPU 的 CPU，签名数学将是一场灾难。

例如简单的 8 位 CPU，如 Intel 8008、8048、8051、Zilog Z80、摩托罗拉 6800 甚至现代 RISC PIC 或 Atmel 微控制器通过具有 8 位寄存器的 ALU 进行所有数学运算，并且基本上只有进位标志位和 z（零值指示符）标志位。所有严肃的数学都是通过库和表达式完成的

```
 BYTE x;
  if (x >= 0) 
```

肯定会赢，使用 JZ 或 JNZ asm 指令而无需非常昂贵的库调用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-23T00:01:27.543

这取决于底层架构。带有 Jazzelle 的旧 ARMv6 能够直接执行 Java 字节码。否则，字节码被翻译成机器码。有时，目标平台需要消耗额外的机器周期来创建操作数`-1`or `0`，但另一个可能会在比较指令被解码时加载它们。其他的，例如 OpenRISC 定义了一个持续保持 0 的寄存器，可以对其进行比较。~~大多数~~情况下，某些平台需要从较慢的内存中加载操作数。综上所述，Java 编程语言并没有规定算子的速度，概括一个特定的情况违背了使用跨平台编程语言的目的。

# c# - 使用 json 和 ASP.net 的 JQuery 实时搜索

> ID：14520832
> 
> 赞同：0
> 
> 时间：2013-01-25T11:25:28.717
> 
> 标签：c#, jquery, asp.net, json

我有一个 asp.net 应用程序。要求是提供实时搜索功能来搜索特定的产品列表。

我搜索了各种实时搜索 jquery 插件并使用了这个 [http://nakajima.github.com/jquery-livesearch/](http://nakajima.github.com/jquery-livesearch/)

在上面提到的链接中，数据是 ul li 格式，然后在该列表上实现实时搜索，所以我所做的是在后端，从服务器端，使用中继器控件，如下所示

```
 <ul id="names">
<asp:Repeater ID="SomeRepeater" runat="server" OnItemCommand="SomeRepeater_ItemCommand"      Visible="false">
    <ItemTemplate>

        <li>
            <asp:LinkButton ID="SomeLink" runat="server" CommandName="Load" CommandArgument='<%# Eval("SomeId")%>' Text='<%# Eval("SomeNameName") + " " + "("+ Eval("SomeCount") + ")" %>'></asp:LinkButton>
        </li>

    </ItemTemplate>
</asp:Repeater> 
```

在后面的代码中，将转发器控件与数据的 List 对象绑定。毕竟，实时搜索功能完全可以使用转发器控件中的值作为 ul li。

现在，要求已更改，我需要隐藏绑定到中继器控件的 ul li 值，但希望实时搜索相同的列表对象。

为此，我在互联网上搜索并得到了一个想法，而不是使用中继器控件，让我使用 JSon ，我成功地从下面的代码中获取值作为字符串

```
 JavaScriptSerializer jss = new JavaScriptSerializer();
        string output = jss.Serialize(newListObject); 
```

但问题是，我不能使用上面提到的 jquery 插件，我不确定如何使用上面的 json 字符串执行相同的搜索功能。

请让我知道我的方法是否也正确，如何实现相同的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:45:15.277

听起来[jQuery Autocomplete](http://jqueryui.com/autocomplete/)将完全满足您的需求。与 .NET 集成也相当容易，您只需返回一个字符串列表。

或者，您可以声明可自动完成的项目的静态列表。您还可以[在单​​击项目时触发更改/重定向](https://stackoverflow.com/questions/9674024/how-to-redirect-to-another-page-with-jquery-autocomplete-item-click)。

# c# - 内部文本中具有特殊字符的 XmlElement

> ID：14520836
> 
> 赞同：2
> 
> 时间：2013-01-25T11:25:40.050
> 
> 标签：c#, xml, xml-parsing

在我的 c# 应用程序中，我正在创建一个基于数据库值的 xml。在字符串不是特殊字符之前，它可以正常工作。下面是我的代码。

```
 XmlDocument doc = new XmlDocument();
 XmlElement element = doc.CreateElement("NewDataSet");
  ------
 string itemname =System.Web.HttpUtility.HtmlEncode(ds.Tables[0].Rows[j]["itemname"].ToString());
 fieldElement = doc.CreateElement(itemname);
 fieldElement.InnerText = ds.Tables[0].Rows[j]["count"].ToString();
 fieldElement1.AppendChild(fieldElement); 
```

我在 `fieldElement = doc.CreateElement(itemname); 中遇到错误 as ' ' 字符，十六进制值 0x20，不能包含在名称中。抛出异常的字符串是“Adam & Eva frisør”。

谁能告诉我如何克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:27:59.957

> 我在 fieldElement.InnerText = ...

我强烈怀疑这*不是*你得到错误的地方。鉴于“不能包含在名称中”的部分，我怀疑*这*是问题所在：

```
fieldElement = doc.CreateElement(itemname); 
```

可以将任意文本*作为 text*，但不能作为元素名称。想要从数据中创建元素名称也很不寻常。你确定你不想要这样的东西：

```
fieldElement = doc.CreateElement("itemname"); 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:34:18.570

这里有两个可能的问题。首先，您正在对元素名称进行 html 编码。这将正常工作，直到元素名称包含特殊字符。

> 元素标签区分大小写；开始和结束标签必须完全匹配。标签名称不能包含任何字符 !"#$%&'()*+,/;<=>?@[]^`{|}~，也不能包含空格字符，并且不能以 -、. 或一个数字。

所以，这是一个等待发生的错误。确保名称有效且不包含任何特殊字符。

其次，您没有转义元素的内容。您引用的文本包含未转义的`&`. 这导致您遇到的实际错误。使用与元素文本的元素名称相同的转义方法。

```
fieldElement.InnerText = System.Web.HttpUtility.HtmlEncode(ds.Tables[0].Rows[j]["count"].ToString());
fieldElement1.AppendChild(fieldElement); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:28:53.927

`&`需要转义，`&amp;`否则它是无效的 XML。

在将数据库文本放入元素之前，您应该对数据库文本进行 XML 编码。请参阅[此问题](https://stackoverflow.com/questions/157646/best-way-to-encode-text-data-for-xml)以了解如何执行此操作。

# c++ - cURL 超时问题

> ID：14520837
> 
> 赞同：1
> 
> 时间：2013-01-25T11:25:48.123
> 
> 标签：c++, curl, libcurl

我正在使用 libcurl 将一些文件从客户端下载到服务器。我在 curl 连接中设置了以下选项，

```
curl_easy_setopt(curlPtr, CURLOPT_LOW_SPEED_LIMIT, 1);
curl_easy_setopt(curlPtr, CURLOPT_LOW_SPEED_TIME, 360);
curl_easy_setopt(curlPtr, CURLOPT_IGNORE_CONTENT_LENGTH, 1);
curl_easy_setopt(curlPtr, CURLOPT_TCP_NODELAY, 1); 
```

即使我已设置超时，如果 6 分钟（360 秒）内没有收到任何字节，即使我收到响应，操作也会超时，

这是我从这里收到的 cURL 调试响应，

*   操作在 360000 毫秒后超时，收到 205512 个字节
*   关闭连接 #0
*   已达到超时

我已将响应重定向到文件，并且可以确认响应字节。但是在恰好达到 6 分钟后，操作仍然会超时。

任何人都可以帮助我上面有什么我错了吗？

注意我使用的是 libcurl 7.19.3。我不能立即升级，但我们计划升级到最新的稳定版本。

谢谢， 普拉布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T10:22:09.820

*您发布的仅有*4 行中没有出现任何错误。

默认情况下，CURLOPT_TIMEOUT 和 CURLOPT_TIMEOUT_MS 的值为 0。但如果您使用特定的 curl 实现，请尝试在代码中将这些选项传递给 0。

如果它没有改变任何东西，那是因为它在 Web 服务器上超时。所以如果你没有这个服务器的控制权，你什么也做不了。您必须制作一个带有循环的程序才能重新启动连接。

# javascript - 验证客户端

> ID：14520841
> 
> 赞同：0
> 
> 时间：2013-01-25T11:25:53.717
> 
> 标签：javascript, authentication, oauth

我正在使用 Google Calander Api Javascript 库。对于身份验证，我使用的是 OAuth 2.0。

我的问题是：如何验证特定客户端？

例如，我想验证以下客户端：yossi@gmail.com：

```
function load() {
    gapi.client.load('calendar', 'v3', auth);
}

function auth() {
    gapi.auth.authorize({
        'client_id': clientId,
        'scope': scopes,
        'immediate': false
    });
} 
function makeRpcRequest() {
    var request = gapi.client.calendar.events.insert({
        'calendarId': 'primary',
        'resource': resource
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:46:56.917

Try[This](https://developers.google.com/accounts/docs/OAuth2#basicsteps) to use google calander API.

# android - 如何将样式应用于 Android 应用程序的所有微调器

> ID：14520844
> 
> 赞同：2
> 
> 时间：2013-01-25T11:26:07.997
> 
> 标签：android, styles, spinner

将按钮样式应用于整个应用程序：

```
<style name="ApplicationStyle" parent="android:Theme">
  <item name="android:buttonStyle">@style/MyButton</item>
</style> 
```

但是你怎么做一个微调器？我想像我的例子那样做......并替换微调器..即：“android：spinnerStyle”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:31:21.497

显现：

```
<application 
        android:icon="@drawable/icon_new"
        android:label="@string/app_name"
        android:theme="@style/ApplicationStyle" 
```

样式.xml：

```
<style name="holoSpinner" parent="@android:style/Theme">
      <item name="android:background">@drawable/spinner_holo_sel</item>
      <item name="android:clickable">true</item>
      <item name="android:textSize">16sp</item>
      <item name="android:textColor">#959494</item>
      <item name="android:textStyle">normal</item>
      <item name="android:paddingTop">8dip</item>
      <item name="android:paddingBottom">8dip</item>
      <item name="android:paddingRight">12dip</item>
      <item name="android:paddingLeft">12dip</item>
    </style>

<style name="ApplicationStyle" parent="android:Theme">
           <item name="android:spinnerStyle">@style/holoSpinner</item>
           <item name="android:windowNoTitle">true</item>
           <item name="android:editTextStyle">@style/holoEditText</item>
        </style> 
```

# jquery - 标签 + ajax 的 JQ 链接

> ID：14520847
> 
> 赞同：0
> 
> 时间：2013-01-25T11:26:24.700
> 
> 标签：jquery, ajax

所以这就是我所拥有的：

```
<label for="prod1">
  <p>aaa</p>
</label>

<label for="prod2">
  <p>bbb</p>
</label>

<label for="prod3">
  <p>ccc</p>
</label>

<label for="prod4">
  <p>ddd</p>
</label> 
```

我正在向所有标签添加使用 JQ 的 href。我可以点击两个标签。如何获取被点击的标签链接并将其传递给 ajax ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:06:16.170

**Jquery**获取您单击标记的值

```
$(function () {
    $("#some").click(function () {
        var x = document.getElementById('some').innerText;
        var y = document.getElementById('some').value;
        alert(x);
        alert(y);
    });
}); 
```

**页**

```
<label id="some" for="prod1">
      <p>aaa</p>
</label> 
```

# java - 在编译期间访问 VM 参数

> ID：14520851
> 
> 赞同：1
> 
> 时间：2013-01-25T11:26:35.223
> 
> 标签：java, jvm-arguments, annotation-processing

我在我的程序中访问 VM 参数时遇到问题。我正在编写一个注释处理器，我想在其中访问一些 VM 参数。我正在使用 NETBeans IDE。我创建了注释处理器的 jar 文件，然后在另一个具有带有注释的 java 文件的项目中使用它。

现在在我的注释处理器项目中，在 IDE 中我将 VM 参数设置如下

```
-Dname="hello from VM" 
```

并且在我尝试访问注释处理器的 process() 函数中

```
String property = System.getProperty("name");

System.out.println(property); 
```

它打印空。我们可以在编译期间访问这些 VM 参数吗？因为注释处理器和带注释的类都在同一个 VM 中运行？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:58:33.253

我不知道从注释处理器访问系统属性的方法，但我认为注释处理器选项将支持您的用例。本质上，您希望[`getSupportedOptions`](http://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/Processor.html#getSupportedOptions%28%29)在您的处理器中实现，通过 访问选项[`processingEnv.getOptions`](http://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/ProcessingEnvironment.html#getOptions%28%29)，并在命令行上使用 传递选项`-Aname=value`。也可以通过[`@SupportedOptions`](http://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/SupportedOptions.html)注释指定支持的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T15:11:32.440

这适用于我在 Windows 8.1 x64 和 Java 1.8.0_05 下的 Netbeans 8.0。我只能假设它最近已修复。

```
 Messager cm = processingEnv.getMessager();
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try {
        System.getProperties().storeToXML(baos, "System Properties");
    }
    catch (IOException ex) {
        cm.printMessage(Kind.ERROR, "Exception while getting System properties as XML: " + ex.getMessage());
    }
    cm.printMessage(Kind.NOTE, "\System.properties XML:\n" + baos.toString()); 
```

这会给我

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>System Properties</comment>
<entry key="java.runtime.name">Java(TM) SE Runtime Environment</entry>
<entry key="java.vm.vendor">Sun Microsystems Inc.</entry>
...
</properties> 
```

jbunting 的**anwser**（即使用 processingEnv.getOptions()）对于将键值对干净地传递给注释处理器肯定更正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:08:13.253

您可以将选项传递给`javac`使用运行的 JVM `-J`，因此

```
-J-Dname="hello from VM" 
```

可能会做你需要的。

# javascript - 标签中的 JavaScript 代码 onclick

> ID：14520854
> 
> 赞同：0
> 
> 时间：2013-01-25T11:26:50.027
> 
> 标签：javascript

我需要做一些丑陋的事情。但我不能以其他方式做到这一点。我需要的是

```
<a href='some/url/?with&params' onclick="(if confirm('Do you wanna submit?')
    {some code to submit form in href property})"> 
```

但我不知道如何使内联脚本工作......我对使用 window.location 或 document.location 提交它的方式犹豫不决。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:33:01.567

尝试这个：

**在 html 上：**

```
<a href='some/url/?with&params' onclick="if (confirm('Do you wanna submit?')) return MyValidation.actionSubmit();">Submit</a>

<script type="text/javascript" src="myValidation.js" /> 
```

**myValidation.js**

我在这个答案上使用了[json](/questions/tagged/json "显示标记为“json”的问题")和[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题") [闭包。](/questions/tagged/closures "显示标记为“关闭”的问题")

```
; //starts with this to close other js not yet closed
var MyValidation = {

    actionSubmit : function() {

            //your code go here

            //example of calling another function
            MyValidation.anotherFunction();

            //example of accessing a global variable (for your validation)
            MyValidation.variable;

            //example of declaring local variable
            var word = "hello";

            //example of calling another function with parameters
            MyValidation.anotherFunctionWithParameters(word, MyValidation.variable);

            //the returning
            return MyValidation.someValidation(word);
    }

    //Yes, this is a comma. 
    //I'm putting in the beginning so we see this and didn't forget :)
    ,anotherFunction : function() {

            //some code
            //maybe a return
    }

    ,variable : {}

    ,anotherFunctionWithParameters : function(param1, param2) {

            //more code, maybe a return
    }

    ,someValidation : function(parameter) {
        //some validation
        return true|false;
    }

}; 
```

看看这个：

1.  [JavaScript 闭包是如何工作的？](https://stackoverflow.com/q/111102/1413158)
2.  [json](/questions/tagged/json "显示标记为“json”的问题")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:40:29.300

你听说过 AJAX 吗？如果你不这样做，请谷歌它。onClick 参数接受带或不带参数的函数名称，而不是“内联脚本”。

```
<script type=text/javascript>
  function doStuff(){
      if(confirm("Submit?"){
       //do your stuff with AJAX to some/url/?with&params

     }
  }
</script>
<a href='javascript:doStuff'>link</a> 
```

# javascript - 访问 $.post jQuery 中的变量

> ID：14520870
> 
> 赞同：0
> 
> 时间：2013-01-25T11:27:37.257
> 
> 标签：javascript, jquery, .post, jquery-post

我有一个调用 jQuery`$.post`函数的事件。我想访问`$.post`函数内部定义的变量，但我遇到了麻烦。

在这种情况下，我想访问该`currentId`变量。

```
$('.notMatching').click(function(){     
    var currentId = this.id;
    $.post("http://"+ document.domain + baseUrl +"/tables/demo.json",  { id: this.id }, 
            function(dat){

                alert(currentId); //undefined

                if(dat['result']==1){
                    $(this).parent().html('<input type="checkbox" class="first" value="'+this.id+'">');
                }
            }
    );
}); 
```

有没有办法做到这一点？

顺便说一句，这个事件`$(document).ready(function(){`与许多其他事件一起发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:32:32.847

您无需通过使任何全局化来完成任何任务...

```
 $('.notMatching').click(function(){     

    var that = this
    $.post("http://"+ document.domain + baseUrl +"/tables/demo.json",  { id: this.id }, 
            function(dat){

                alert(that.id);

                if(dat['result']==1){
                    $(this).parent().html('<input type="checkbox" class="first" value="'+that.id+'">');
                }
            }
    );
}); 
```

将您的`this`变量分配给您的变量，您的变量`that`将在成功回调中访问`$.post`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:30:01.127

请全局声明变量！

```
var currentId = null;
$('.notMatching').click(function() {
currentId = this.id;
$.post("http://" + document.domain + baseUrl + "/tables/demo.json", {
    id : this.id
}, function(dat) {

    alert(currentId);
    //undefined

    if (dat['result'] == 1) {
        $(this).parent().html('<input type="checkbox" class="first" value="' + this.id + '">');
    }
}); 
```

});

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:30:21.130

回调内的范围已更改，您需要保留它

```
$('.notMatching').click(function(){     
    var currentId = this.id;
    var that = this;
    if (currentId)
        $.post("http://"+ document.domain + baseUrl +"/tables/demo.json",  { id: currentId }, function(dat){
            if(dat['result']==1)
                $(that).parent().html('<input type="checkbox" class="first" value="'+currentId+'">');
        });
    else 
        alert('No Id');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T11:43:13.850

```
var currentId = null;
var that = this;
$('.notMatching').click(function() {
currentId = this.id;
$.ajax({
  'type' : 'POST',
  'dataType' : 'JSON',
  'data': {'id':currentId},
  'url': "http://" + document.domain + baseUrl + "/tables/demo.json",
  'success': function(response){
    if ((JSON.parse(response)).result === 1) {
      $(this).parent().html('<input type="checkbox" class="first" value="' + that.id + '">');
    }
  }
}); 
```

# windows - 无法在 Cygwin 中将 shell 脚本作为 KornShell 脚本执行

> ID：14520875
> 
> 赞同：2
> 
> 时间：2013-01-25T11:27:47.053 元素
> 
> 标签：windows, shell, scripting, cygwin, ksh

我很少接触shell脚本，我们有另一个部门编写它们，所以我对编写它们有所了解但没有经验。然而，对于我的问题，它们似乎都毫无用处。

我正在尝试使用 Cygwin 在基于 Windows 的机器上执行一些 KornShell (ksh) 脚本——我们使用这些脚本来启动我们的 Oracle WebLogic 服务器，现在它根本不会执行。我曾经能够在我的旧机器上很好地执行这些完全相同的脚本。

现在，我已将其范围缩小到“幻数”或脚本开头指定脚本解释器路径的任何内容：

IE：

`#!/bin/ksh`

如果我将其更改为作为简单的 bash 执行，则它可以工作，即：

`#!/bin/sh`

我检查了为 cygwin 安装的软件包 - 现在我安装的 shell 是：

*   mksh MirdBSD KornShell
*   再次 bash the bourne shell
*   zsh z 外壳

我应该期望在我的 cygwin/bin 目录中看到一个 ksh.exe 吗？有一个系统文件“ksh”，我假设它以某种方式与其他 shell exe 之一相关联，例如 mksh.exe

我明白我的解释很可能是错误的。但话虽如此，任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:46:26.507

I believe the MirBSD korn shell is called `mksh`. You can verify this and look for the correct path by typing

```
% which mksh
% which ksh 
```

or if you have no `which`,

```
% type -p mksh
% type -p ksh 
```

or if that fails too, check `/etc/shells` which should list all valid shells on a system:

```
% grep ksh /etc/shells 
```

You need to put the full path after the `#!` line. It will probably be `/bin/mksh`, so your line needs to look like:

```
#!/bin/mksh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-21T14:43:08.540

您现在可能已经修复了它，但答案是否定的，您的 Cygwin（还）不知道 ksh。

我通过在命令行模式下使用 -P ksh 属性启动 cygwin 设置解决了这个问题（如[http://www.ehow.com/how_8611406_install-ksh-cygwin.html](http://www.ehow.com/how_8611406_install-ksh-cygwin.html)中所述）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T16:13:06.263

您可以使用 bat 文件运行 ksh

C:\cygwin\bin\dos2unix kshfilename.ksh

C:\cygwin\bin\bash kshfilename.ksh

[在 Windows 上通过 Cygwin 运行 shell 脚本](https://stackoverflow.com/questions/15736898/running-shell-script-through-cygwin-on-windows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T16:31:44.630

通过以下过程将 KornShell (ksh) 安装到 Cygwin 中：

1.  下载：[*ksh.2012-08-06.cygwin.i386.gz*](http://www2.research.att.com/~astopen/cgi-bin/download.cgi?action=list&name=ksh)
2.  通过 Cygwin 安装程序安装 ksh。
    1.  执行[Cygwin setup.exe](http://cygwin.com/install.html)
    2.  选择：*从本地目录安装*
    3.  选择*ksh.2012-08-06.cygwin.i386.gz*作为*Local Package Directory*。 ![在此处输入图像描述](../Images/3e311cd81f2dbcfae8f9b9963fddb453.png)
    4.  完成 Cygwin 设置。
3.  重新启动 Cygwin。

# android - android.net.rtp 包有什么替代品吗

> ID：14520876
> 
> 赞同：3
> 
> 时间：2013-01-25T11:27:49.000
> 
> 标签：android

android.net.rtp 为 RTP（实时传输协议）提供 API，允许应用程序管理按需或交互式数据流，对吗？但我正在研究 api 11。这个包在 api 12 中可用，所以这个包有什么替代品吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T10:51:51.017

我不确定，但[http://sourceforge.net/projects/jlibrtp/](http://sourceforge.net/projects/jlibrtp/)可能会有所帮助。

# java - mongodb的查询问题

> ID：14520884
> 
> 赞同：0
> 
> 时间：2013-01-25T11:28:20.260
> 
> 标签：java, mongodb, morphia

我在 mongodb 数据库中有 2 个集合。例子：

```
employee(collection)
    _id
    name
    gender
    homelocation (double[] indexed as geodata)
    companies_worked_in (reference, list of companies)

companies(collection)
    _id
    name
    ... 
```

现在我需要查询所有名称以“wha”开头并且拥有/拥有住在附近（13.444519, 52.512878）的员工的公司，即**。**

我怎样才能做到这一点而不需要太长时间？使用 SQL，这将是一个简单的连接（当然没有地理空间搜索...... :(）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:44:00.557

您可以发出 2 个查询。（我写的查询是用 JavaScript 编写的）

第一个查询提取名称以 开头的所有公司`wha`。

```
db.companies.find({name: {$regex: "^wha"}}, {_id: 1}) 
```

第二个查询可以像

```
db.employees.find({homelocation: {$near: [x,y]}, companies_worked_in: {$in: [result_from_above_query]} }, {companies_worked_in: 1}) 
```

现在只需过滤 company_worked_in 并仅包含名称以 . 开头的公司`wha`。我知道在这种情况下，第一个查询似乎没用。但是很多记录会被 $in 查询过滤掉。

您可能必须在这两个查询之间编写一些中间代码。我知道这不是一个单一的查询解决方案。但这是一种可能的方法，性能也很好，具体取决于您索引的字段。在这种情况下，考虑在`name`（公司集合）和`homelocation`（地理索引）+ `companies_worked_in`（员工集合）上创建索引将帮助您获得性能。

**PS** 我怀疑您是否可以在`homelocation`and上创建复合索引`companies_worked_in`，因为两者都是数组。您必须仅对这些字段之一进行索引。您可能无法拥有复合索引。

**建议** 将公司名称存储在员工集合中。这样您就可以避免第一次查询。

# html - css 最后 ul 样式

> ID：14520885
> 
> 赞同：2
> 
> 时间：2013-01-25T11:28:24.943
> 
> 标签：html, css

我想用类名为我的最后一个 ul 元素添加不同的样式`footer_list`，但以下所有操作都不起作用

```
ul.footer_list:last-child {
    border-right: none;
}

#menu-bottom.pads ul.footer_list:last-child {
    border-right: none;
} 
```

结构如下

```
<div class="pads clearfix" id="menu-bottom">
    <ul class="footer_list">
        <li><a title="" href=""></a></li>
    </ul>

    <ul class="footer_list">
        <li><a title="Zu den Dell Gutschein Codes" href="/dell-gutschein-codes/"></a></li>
    </ul>
    <ul class="footer_list">
        <div class="menu-footer-container">
            <ul class="menu" id="menu-footer">
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-25" id="menu-item-25"><a href=""></a></li>
            </ul>
        </div>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:46:05.443

你也可以使用 last-of-type 伪选择器。

```
.footer_list:last-of-type {
    border-right: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:36:07.513

您使用了错误的选择器。而不是：

```
ul.footer_list:last-child {
    border-right: none;
} 
```

它应该是：

```
.footer_list:last-child {
    border-right: none;
} 
```

有关查看选择器正常工作的示例：http: [//jsfiddle.net/kDhS8/](http://jsfiddle.net/kDhS8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:37:51.803

这行得通！( [http://jsfiddle.net/NJcVE/1/](http://jsfiddle.net/NJcVE/1/) )

> .footer_list:last-child {border-right: none; }

对于 IE7/8，您可以添加一个类到您想要的最后一个 ul。示例：CSS：

```
.lt-ie9 .last-child {border-right: none;} 
```

查询：

```
/* LAST CHILD HACK FOR IE7/8 */
$(function(){
    if( $.browser.msie ){
     if( $.browser.version == 7.0 || $.browser.version == 8.0 ){
        $('.footer_list').each(function(){
            if( $(this).is(':last-child') ){
                $(this).addClass('last-child');
            }       
        });
     } 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:45:03.063

当你使用`last-child`时，这意味着你`ul`所有的`li`s 都是孩子，所以你必须统一你`ul`的，最后一个`li`是你的`last-child`，像这样：

**CSS：**

```
.footer_list li{
    border: 1px solid #000;
}
.footer_list li:last-child {
    border: none;
} 
```

**HTML：**

```
<ul class="footer_list">
    <li>Menu 1</li>
    <li>Menu 2</li>
    <li>Menu 3</li>
</ul> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-25T11:33:34.320

你可以使用这个

```
#menu-bottom ul:last-child  {
    //css for Last ul tag
} 
```

# python - clr.AddReference('example_file') - 无法找到程序集

> ID：14520888
> 
> 赞同：4
> 
> 时间：2013-01-25T11:28:25.093
> 
> 标签：python, .net, python-2.7, ironpython

我正在尝试使用 clr 模块中的 AddReference('example_file') 方法添加对“example_file.dll”的引用：

```
>>>import clr
>>>clr.AddReference('example_file') 
```

结果我得到：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
System.IO.FileNotFoundException: Unable to find assembly 'example_file'.

at Python.Runtime.CLRModule.AddReference(String name) 
```

所有文件都位于当前工作目录中，sys.path 如下所示：

```
>>> sys.path
['', 'C:\\Python27\\lib\\site-packages\\pip-1.2.1-py2.7.egg', 'C:\\Python27', 'C
:\\Windows\\system32\\python27.zip', 'C:\\Python27\\DLLs', 'C:\\Python27\\lib',
'C:\\Python27\\lib\\plat-win', 'C:\\Python27\\lib\\lib-tk', 'C:\\Python27\\lib\\
site-packages', 'C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\'] 
```

此外，由于：

```
>>>clr.FindAssembly('example_file') 
```

我明白了

```
u'example_file.dll 
```

问题一天天出现。我很困惑，因为它以前工作得很好——我不知道会对此产生什么影响。我正在使用 Windows 7 x64、python 2.73 和 .Net 框架 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-02T18:37:30.243

这里没有足够的信息，但有（至少）两件事需要考虑：

1.  您没有已设置的其他 Python 相关环境变量。例如使用虚拟环境或让 Python 指向其他地方。[请检查](https://github.com/pythonnet/pythonnet/wiki/Using-Python.NET-with-Virtual-Environments)是否`PYTHONHOME`已`PYTHONPATH`设置。
2.  您尝试加载的 DLL 与 Python 解释器具有相同的位大小。IE 。如果您有 64 位 Python，您可能需要（但不总是）加载 64 位 DLL。
3.  在您的字符集中正确读取路径规范。
    `sys.path.append(r"C:\Program Files\SomeApi")`

# c# - 以横向模式显示消息

> ID：14520894
> 
> 赞同：1
> 
> 时间：2013-01-25T11:28:50.803
> 
> 标签：c#, windows-phone-7, landscape, messagebox

如何`MessageBox.Show()`在 Windows Phone 7 应用程序中将方法显示为横向模式？

这是我的代码：

```
MessageBox.Show("Game Over Earned money:" + Prise[CorrectAnswers]); 
```

我应该将消息显示为横向模式。那可能吗？

# ios - 在 iOS 中以 XML 格式操作文件

> ID：14520898
> 
> 赞同：0
> 
> 时间：2013-01-25T11:28:56.200
> 
> 标签：ios, xml, xcode, xml-parsing, xsd

我想知道是否可以在 iOS 中以这种方式操作 XML。

1.  从无到有创建 XML。
2.  按顺序插入自定义标签和信息。

例子：

*   在内存中创建 xml，如数组或字典
*   插入标签`<test></test>`
*   `<field1>some</field1>`在里面插入标签`<test />`
*   `<field2>some</field2>`在之后插入标签`<field1 />`
*   `<field12>some</field>`在里面插入标签`<field2 />`
*   关闭 xml 并保存到 NSDocuments

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:46:17.090

You can use plist files which are essentially xmls. You can directly write/read plist files to/from NSArray or NSDictionary.

Check the [Plist Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html)

# android-dialogfragment - 如何使用来自 xml-resourcefile 的视图在 DialogFragment 中检索 editText1

> ID：14520899
> 
> 赞同：3
> 
> 时间：2013-01-25T11:28:58.857
> 
> 标签：android-dialogfragment

如何在此 DialogFragment 中检索 editText1？它存在于 vraag_banen.xml 但 getView() 为空。

该对话框显示正常，也没有编译错误，但是我无法弄清楚如何使用 xml 资源文件中的自定义视图为 PositiveButton 编写事件处理程序。

```
package mypackage;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.EditText;

public class VraagBanenDialogFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout
        builder.setView(inflater.inflate(R.layout.vraag_banen, null))
        // Add action buttons
               .setPositiveButton(R.string.dialog_ok, new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {

                       Activity pa = getActivity().getParent(); //-> TabsMenu
                       Context bc = getActivity().getBaseContext(); //-> ContextImpl
                       View vi = getView(); //-> null
                       Class<? extends OnClickListener> cl = this.getClass(); //-> Class (nl.computerhuys.tabnavui.VraagBanenDialogFragment$1)
                       String acn = getActivity().getClass().getName(); //-> nl.computerhuys.tabnavui.Spel
                       String cn = getClass().getName(); //-> nl.computerhuys.tabnavui.VraagBanenDialogFragment$1
                       OnClickListener t = this; //-> VraagBanenDialogFragment$1

                       EditText editText1 = (EditText) getView().findViewById(R.id.editText1); 
                       EditText editText2 = (EditText) getView().findViewById(R.id.editText2);
                       int baan1 = Integer.valueOf(editText1.getText().toString());
                       int baan2 = Integer.valueOf(editText2.getText().toString());
                       InitSpel.addBaanNummer(baan1);
                       InitSpel.addBaanNummer(baan2);

                   }
               })
               .setNegativeButton(R.string.dialog_cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       VraagBanenDialogFragment.this.getDialog().cancel();
                   }
               });      
        return builder.create();
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T13:54:12.157

找到了一种方法：命名匿名视图：

```
View v = inflater.inflate(R.layout.vraag_banen, null) 
```

然后使用 v 来引用视图，而不是 getView()：

```
EditText editText1 = (EditText) v.findViewById(R.id.editText1). 
```

等等。这行得通。

# c# - Visual Studio 2008（移动版）中的表单布局

> ID：14520900
> 
> 赞同：0
> 
> 时间：2013-01-25T11:29:01.460
> 
> 标签：c#, winforms, visual-studio-2008, windows-mobile-6.5

我刚刚开始开发一个用于 Windows Mobile 6.5 设备的快速概念验证应用程序。我正在使用 Visual Studio 2008 (9.0.21022.8) 表单设计器按照下面的屏幕截图创建一个简单的 GUI。

第一个问题是我无法让 GO 按钮与左侧的文本框高度相同。无论是启用还是禁用对齐网格，当我调整按钮高度时，它都会对齐到大于或小于文本框的高度。

第二个问题是我无法消除列表框上方和下方的垂直间距。我在各种 MSDN 文章中看到提到“填充”设置，但这似乎不是表单或任何组件的属性。[另一个 SO 答案](https://stackoverflow.com/questions/1376622/change-spacing-of-snaplines-in-visual-studio-2008)建议在 Options->Windows Forms Designer 下设置此值，但似乎没有这样的选项。我是否遗漏了一些明显的东西，或者这比我想象的更复杂？

![在此处输入图像描述](../Images/3e59c5dceac31a4b645091a13d6b8a12.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:33:29.957

欢迎来到紧凑框架。有些事情在这里的工作方式不同。在“大”框架中，您可以更改`IntegralHeight`列表框的属性，这在 Compact Framework 中不可用，因此`ListBox`将对齐到默认项目高度。这可能会导致垂直间距低于`ListBox`. 上面的间距`ListBox`可以通过手动设置文本框的属性中的`Top`坐标来消除。`ListBox``Top + Height`

至于按钮的高度：尝试在属性中手动设置。如果这不起作用，我建议您尝试将按钮的高度更改为表单`Load`事件中的文本框高度。

一般来说，我建议您更改设计器设置（Visual Studio 设置），以便设计器不显示网格，而是使用对齐线（Extras > Options > Windows Forms Designer > Layout Mode = SnapLines）。

# jms - 基于 JMS 消息选择器的 MessageConsumer.recieve 使对象等待

> ID：14520910
> 
> 赞同：1
> 
> 时间：2013-01-25T11:29:32.490
> 
> 标签：jms, ibm-mq

我正在尝试创建一个通信类，它将向 MQ 发送请求并从他们那里获得响应。

以下是我编写的代码。

```
TextMessage inputMsg = session.createTextMessage(message);
        inputMsg.setJMSReplyTo(responseQueue);
        try {

            connection.start();
            sender.send(inputMsg);
            messageId = inputMsg.getJMSMessageID();
            reciever = session.createConsumer(responseQueue,"JMSMessageID = '"+messageId+"'");
            Message mess=reciever.receive(10000);
            TextMessage outputMsg  = (TextMessage) mess;

            if(outputMsg == null)
                logger.error(" Error while recieving the message");
            else
                replyMsg= outputMsg.getText(); 
```

每当执行代码时，此代码都会给我以下对象等待。

```
java.lang.Object.wait(Native Method)
at java.lang.Object.wait(Object.java:167)
at com.ibm.mq.jmqi.remote.internal.system.RemoteProxyQueue.proxyMQGET(RemoteProxyQueue.java:2667)
at com.ibm.mq.jmqi.remote.internal.RemoteFAP.jmqiGetMessageWithRecon(RemoteFAP.java:6219)
at com.ibm.mq.jmqi.remote.internal.RemoteFAP.jmqiGetMessage(RemoteFAP.java:6112)
at com.ibm.mq.jmqi.internal.JmqiTools.getMessage(JmqiTools.java:1090)
at com.ibm.mq.jmqi.remote.internal.RemoteFAP.jmqiGet(RemoteFAP.java:6080)
at com.ibm.msg.client.wmq.internal.WMQConsumerShadow.getMsg(WMQConsumerShadow.java:1305)
at com.ibm.msg.client.wmq.internal.WMQSyncConsumerShadow.receiveInternal(WMQSyncConsumerShadow.java:239)
at com.ibm.msg.client.wmq.internal.WMQConsumerShadow.receive(WMQConsumerShadow.java:1058)
at com.ibm.msg.client.wmq.internal.WMQMessageConsumer.receive(WMQMessageConsumer.java:469)
at com.ibm.msg.client.jms.internal.JmsMessageConsumerImpl.receiveInboundMessage(JmsMessageConsumerImpl.java:879)
at com.ibm.msg.client.jms.internal.JmsMessageConsumerImpl.receive(JmsMessageConsumerImpl.java:431)
at com.ibm.mq.jms.MQMessageConsumer.receive(MQMessageConsumer.java:228) 
```

但是，如果我将 createConsumer 行更改为，

```
reciever = session.createConsumer(responseQueue,"JMSMessageID = '"+messageId+"'"); 
```

上述行的问题是我的响应消息在更多并发请求期间变得混乱，从而导致会话混淆。

有人可以指导我如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:09:07.987

你的代码有一个小问题。在您的`createConsumer`通话`JMSMessageID`中被用作选择器。这`JMSMessageID`实际上是您想要接收的消息 ID。这不是您的代码中之前发送的请求消息的消息 ID。

您应该在通话中使用`JMSCorrelId`而不是。`JMSMessageID``createConsumer`

```
reciever = session.createConsumer(responseQueue,"JMSCorrelId = '"+messageId+"'"); 
```

然后处理请求消息的服务器应用程序必须`JMSMessageID`从请求消息中获取并放入`JMSCorrelId`字段并发送响应。这种方式使用`JMSCorrelId`请求和响应消息是相关的。

# java - Spring bean初始化和销毁 的一些疑惑

> ID：14520912
> 
> 赞同：0
> 
> 时间：2013-01-25T11:29:37.623
> 
> 标签：java, spring, spring-mvc

在这期间我正在学习 Spring Framework。

现在我正在研究spring Bean生命周期，特别是关于bean的初始化和销毁​​，阅读本教程：

[http://www.tutorialspoint.com/spring/spring_bean_life_cycle.htm](http://www.tutorialspoint.com/spring/spring_bean_life_cycle.htm)

我已经实现了上一篇文章中提出的示例，但我对这个论点有疑问。

在示例中，我只有两个类：**HelloWorld.java**和**MainApp.java**

在**HelloWorld.java**类中，我有两个用于 bean 初始化的方法：**init()**（在创建 bean 后由框架调用）和用于 bean 清理：* *destroy()*（在 bean 销毁之前由框架调用在我的申请结束时）

好的，这很清楚，这两个方法在 bean 生命周期的两个特定时刻由框架自动调用，因为我已经通过**init-method**和**destroy-method**属性在应用程序上下文 xml 文件中为这个 bean 删除了它：

```
<bean id="helloWorld" 
    class="org.andrea.myexample.myInitDestroyExample.HelloWorld"
    init-method="init" destroy-method="destroy">
    <property name="message" value="Hello World!"/>
</bean> 
```

这对我来说很清楚。

我有一些问题要理解与上一篇文章的开头有关，实际上它表明要具有初始化方法，我的bean必须实现**InitializingBean**接口及其方法的代码：**afterPropertiesSet()**

为了执行 bean 清理（在此之前这是删除），我的 bean 必须实现**DisposableBean**接口及其方法的代码：**destroy()**

好的...所以...为什么在文章中首先显示我的 bean 必须实现这些接口，然后在示例中，不做这件事，而只是在 XML 配置中声明存在 init 和 destroy 方法，然后在我的类中实现它不实现任何接口？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T11:33:11.363

`In the case of XML-based configuration metadata, you can use the init-method attribute to specify the name of the method that has a void no-argument signature`

XML 定义是实现此类接口的**替代方法。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T11:53:00.070

有几种方法可以使用 Spring 的 bean init/destroy

1）您可以定义 default-init-method / default-destroy-method `beans`（根元素 xml 配置）然后 Spring 将在它实例化的任何 bean 中查找这些方法

2）您可以为 bean 定义单独的 init-method / destroy-method

3）您可以实现 InitializingBean / DisposableBean 接口，即使xml配置中未定义init-method / destroy-method，Spring也会调用它们

4）您可以使用 @PostConstruct / @PreDestroy 注释来注释 bean 中的方法并`<context:annotation-config />`在 xml 配置中打开

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-26T13:59:16.853

虽然今天这​​一代人行动迅速，但你们中的许多人没有强大的心态，阻碍了你实现梦想

# c# - winRT从gridview中删除一个项目

> ID：14520914
> 
> 赞同：0
> 
> 时间：2013-01-25T11:29:39.137
> 
> 标签：c#, .net, gridview, windows-8, winrt-xaml

我正在开发一个 Windows 8 商店应用程序，但在将我的项目绑定到 gridview 时遇到问题。

```
ObservableCollection<<Customer>Customer> items = 
    new ObservableCollection<<Customer>Customer>();       

this.DefaultViewModel["Items"] = items; 
```

问题是：如何从 gridview 中删除一个或多个项目，并从可观察项目中删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:53:54.840

如果您的项目类在您从集合中删除项目时实现**ObservableCollection**，则它也会从 GridView 中删除。

只需使用[Remove](http://msdn.microsoft.com/en-us/library/ms132413.aspx)或[RemoveAt](http://msdn.microsoft.com/en-us/library/ms132414.aspx)

# android - 为聊天应用实现自定义 ListView

> ID：14520916
> 
> 赞同：0
> 
> 时间：2013-01-25T11:29:40.010
> 
> 标签：android, android-listview

我正在开发一个聊天应用程序，并想使用一个`ListView`来显示消息。目前我正在尝试获取用户的输入并将其显示为“传出消息”。我的`row`布局如下：（`TextView`时间戳），`TextView`（消息），`ImageView`（消息状态指示器）。我的问题：文本和时间戳没有设置，只是一个“虚拟”布局被夸大了。我想我必须以某种方式在适配器内设置文本。有人可以告诉我我做错了什么吗？代码如下。

我的适配器：

```
public class ChatAdapter extends BaseAdapter {
private Context context;

private List<String> chat;

public ChatAdapter(Context context, List<String> listchat) {
    this.context = context;
    this.chat = listchat;
}

public int getCount() {
    return chat.size();
}

public Object getItem(int position) {
    return chat.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup viewGroup) {

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.row, null);
    }
    TextView tvTS = (TextView) convertView.findViewById(R.id.tvTS);
    // TODO set timestamp

    TextView tvMessage = (TextView) convertView
            .findViewById(R.id.tvMessage);
    // TODO set the text to the actual message text from etInput

    ImageView indicator = (ImageView) convertView.findViewById(R.id.imgInd);

    // TODO set the image Resource according to message state
    return convertView;
} 
```

我的活动：

```
 public class ChatActivity extends ListActivity {

private EditText input;
private String tmpMessage;
ListView lv;
ChatAdapter adapter;
List<String> messages;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lis);
    Button send = (Button) findViewById(R.id.btnSend);
    input = (EditText) findViewById(R.id.etInput);
    lv = getListView();

    messages = new ArrayList<String>();
    adapter = new ChatAdapter(this, messages);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO
        }
    });

    lv.setAdapter(adapter);

    send.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            sendMessage();
        }
    });
}

public void sendMessage() {

    tmpMessage = input.getText().toString();
    input.setText("");
    messages.add(tmpMessage);
    adapter.notifyDataSetChanged();

}

@SuppressLint("SimpleDateFormat")
public String generateTimestamp() {
    SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
    String ts = sdf.format(new Date());

    return ts;
} 
```

**更新**

我添加了一个持有人并使用以下代码设置文本：

```
 String message = (String) getItem(position);
        holder.message.setText(message); 
```

它可以工作，但是膨胀的布局现在是随机定位的，请参见下面的屏幕截图。它应该看起来像

测试

测试1

测试2

……

![在此处输入图像描述](../Images/3ece9aa4c6a77fa6592bfdd766708a3a.png)

是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:35:42.170

您必须`setText`在`getView`for text 方法中调用方法并为您需要的每个视图设置文本。并设置你的形象。`getView`负责为列表创建单个 View，因此您必须以每次返回就绪 View 的方式来实现它。

您现在所做的只是通过它们的 id 查找元素，而对它们什么都不做。您只需返回默认的膨胀行。

PS 另请阅读 ViewHolder 模式以解决性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:39:04.617

在您的 getView 中尝试以下更改

```
public View getView(int position, View convertView, ViewGroup viewGroup) {

if (convertView == null) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.row, null);

 TextView tvTS = (TextView) convertView.findViewById(R.id.tvTS);    

 TextView tvMessage = (TextView) convertView.findViewById(R.id.tvMessage);

 ImageView indicator = (ImageView) convertView.findViewById(R.id.imgInd);

}   
tvMessage.setText("......");

return convertView; 
```

}

[请看这个链接](https://stackoverflow.com/questions/8166092/how-to-insert-the-data-from-the-adapter-to-the-listview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:39:32.490

您可以使用 ViewHolder 模式在您的列表中获得更好的性能

ViewHolder 类：

```
public class ViewHolder{
public TextView message;
public TextView timestamp;
public ImageView indicator
} 
```

然后在您的 Adapter getView 方法中按以下方式使用它：

```
public View getView(int position, View convertView, ViewGroup viewGroup) {

    ViewHolder holder = null;

            if(convertView == null ){
                convertView = inflater.inflate(R.layout.<your_layout>, null);           

                holder = new ViewHolder();
                holder.message = (TextView) convertView.findViewById(R.id.message);
holder.timestamp = (TextView) convertView.findViewById(R.id.timestamp);
holder.indicator = (ImageView) convertView.findViewById(R.id.indicator);

                convertView.setTag(holder);
            } else{
                holder = (ViewHolder) convertView.getTag();

            }

            holder.message.setText(chat.get(position).<whatever>);
            holder.timestamp.setText(chat.get(position).<whatever>);
holder.indicator.<method>
            return convertView;
} 
```

希望有帮助。

BR，迈贝克

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T11:43:40.800

您似乎没有将数据设置为 TextViews/ImageView。您需要在 ChatAdapter 的 getView() 方法中执行此操作，如下所示：

```
public View getView(int position, View convertView, ViewGroup viewGroup) {

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.row, null);
    }
    String chatMessage = getItem(position);
    TextView tvTS = (TextView) convertView.findViewById(R.id.tvTS);
    // TODO set timestamp

    TextView tvMessage = (TextView) convertView
            .findViewById(R.id.tvMessage);
    //Set the message to the TextView
    tvMessage.setText(chatMessage);

    ImageView indicator = (ImageView) convertView.findViewById(R.id.imgInd);

    // TODO set the image Resource according to message state
    return convertView;
} 
```

考虑使用自定义对象（而不是字符串列表）来保存消息、时间戳和要显示的消息状态指示器的类型。在这种情况下，你可以这样做

```
ChatMessage msgObj = getItem(position);
...
tvMessage.setText(msgObj.getMessage());
tvTS.setText(msgObj.getTimestamp());
if ( msgObj.getStatus() == ChatMessage.DELIVERED )
{
  indicator.setBackgroundResource(R.drawable.delivered);
}
else if (....) 
```

# python - 使用python将两个单词和类别列表与自己的语料库链接起来

> ID：14520922
> 
> 赞同：0
> 
> 时间：2013-01-25T11:30:07.183
> 
> 标签：python, list, dictionary

好的，我一遍又一遍地考虑它，但我只是python的初学者，我没有找到任何解决方案。这就是我需要做的：我有一个来自 LIWC 的文本文件，后面有各种荷兰语单词和数字：

```
aaien 12 13 32
aan 10
aanbad 12 13 14 57 58 38
... 
```

然后我从 LIWC 得到一个文本文件，后面有一个数字和一个类别：

```
01:Pronoun
02:I
03:We
04:Self
05:You
06:Other
... 
```

现在我应该将我自己的语料库与荷兰语单词与这些类别联系起来。所以首先我必须将我的荷兰语单词与 LIWC 单词列表中荷兰语单词后面的数字联系起来，然后我必须将这些数字与这些类别联系起来......我认为制作字典会很有用来自 LIWC 的两个列表。这是我到目前为止所得到的：

```
with open('LIWC_words.txt', 'rU') as document:
    answer = {}
    for line in document:
        line = line.split()
        if not line:  #empty line
            continue
        answer[line[0]] = line[1:]

with open ('LIWC_categories.txt','rU') as document1:
    categoriesLIWC = {}
    for line in document1:
        line = line.strip()
        if not line:
            continue
        key, value = line.split(':')
        if key.isdigit():
            categoriesLIWC[int(key)] = value
        else:
            categoriesLIWC[key] = value 
```

所以我现在有两本字典......但现在我被困住了。有谁知道我接下来应该做什么？（我使用 python 2.6.5，因为我主要使用 NLTK）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:06:58.123

我不确定您要创建的最终格式到底是什么。例如，您可以制作一个字典，其中包含其中包含`dict['pronoun']`的所有行。`document``'01'`

```
#for example from this format
dic = {'word1': [1,2,3], 'word2':[3,2]}
ref = {1: 'pronoun', 2: 'I' , 3: 'you'}

out = {}

for word in dic:
  for entry in dic[word]:
    if entry in out:
      out[entry].append(word)
    else:
      out[entry] = []
      out[entry].append(word)

print out
>>>{1: ['word1'], 2: ['word1', 'word2'], 3: ['word1', 'word2']} 
```

或者，您可以将 中的数字替换为 中`document`的条目`document1`。

```
#for example from this format
dic = {'word1': [1,2,3], 'word2':[3,2]}
ref = {1: 'pronoun', 2: 'I' , 3: 'you'}

for word in dic:
  for indx in range(len(dic[word])): 
    dic[word][indx] = ref[dic[word][indx]]

print dic
>>>{'word1': ['pronoun', 'I', 'you'], 'word2': ['you', 'I']} 
```

否则你有没有想过一个数据库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:24:49.353

这是将数据转换为该格式的一种方法。

```
dic = {}
ref = {}
tempdic = open('dic.txt','r').read().split('\n')
tempref = open('ref.txt','r').read().split('\n')

for line in tempdic:
  if line:
    line = line.split()
    dic[line[0]] = line[1:]
for line in tempref:
  if line:
    line = line.split(':')
    ref[line[0]] = line[1]
#dic = {'word1':[1,2,3], word2:[2,3]...}
#ref = {1:'ref1',2:'ref2',...}
for word in dic:
  for indx in range(len(dic[word])):#for each number after word
    dic[word][indx] = ref[dic[word][indx]] 
```

假设我们从`{'apple':[1,2,3]}`. `dic['apple'][0]`会解决`1`，右边会是`ref[1]`哪个可以`'pronoun'`。这将使我们`{'apple' : ['pronoun', 2, 3]`剩下的数字在下一次迭代中被替换。

# eclipse - Obfuscate4e：如何在 obfuscate4e 中使用 retrace.jar 进行回溯

> ID：14520924
> 
> 赞同：1
> 
> 时间：2013-01-25T11:30:11.027
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, obfuscation, proguard

我正在 Windows7 上使用 Eclipse Indigo 开发 RCP 应用程序。我在我的 Eclipse Indigo IDE 中添加了 Obfuscate4e 插件。（查看：- [http://code.google.com/p/obfuscate4e/](http://code.google.com/p/obfuscate4e/)）我还使用 proguard 对我的 RCP 应用程序进行了混淆，如下所示：- [http://code.google.com/p/obfuscate4e/wiki/ GettingStarted](http://code.google.com/p/obfuscate4e/wiki/GettingStarted) 现在我想在 Eclipse 中使用 retrace.jar 来追溯堆栈跟踪。如何在 Eclipse IDE 中使用带有 Obfuscate4e 的 retrace.jar？

我可以在命令提示符下重新跟踪堆栈跟踪，但想知道这是否可以在 IDE 内完成（以便自动化重新跟踪过程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:28:27.490

似乎不可能在 Eclipse 内部进行回溯。如图所示，一个 gui 可用于使用 proguardgui.jar 进行 retace， ![保护图形界面](../Images/c89b5ff9acf46a2c0ed553402dec237c.png)但由于它对我不起作用，所以我通过命令提示符进行操作。

# jquery - 滑块在 IE8 中不起作用

> ID：14520925
> 
> 赞同：0
> 
> 时间：2013-01-25T11:30:13.257
> 
> 标签：jquery, html, css, anythingslider

我为我的滑块使用了 AnythingSlider - 但是，在 IE8 中，它不会在我拥有的 3 张幻灯片之间滑动，不知道为什么？[网站在这里](http://cinemaxx.dk/aarhus/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:08:06.260

看起来您缺少使用淡入淡出模式选项 ( [ref](https://github.com/CSS-Tricks/AnythingSlider/blob/master/css/anythingslider.css#L256-L267) )添加的 css 文件的最新更改

```
/* fade mode */
.anythingSlider .fade .panel {
    float: none;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
}
/* fade mode active page - visible & on top */
.anythingSlider .fade .activePage {
    z-index: 1;
} 
```

# rtc - 为什么创建快照也会创建新基线？

> ID：14520942
> 
> 赞同：1
> 
> 时间：2013-01-25T11:31:18.243
> 
> 标签：rtc

我创建了一个流的新快照。因此，流的其中一个组件现在有了新的基线。此新基线与新创建的快照具有相同的名称。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:47:42.507

快照将拍摄... 流上交付的最新更改集的快照。

如“[快照与基线的区别](https://jazz.net/forum/questions/58744/difference-between-snapshot-and-baseline)”中所述：

> 您可以根据自己的喜好对工作区或流的状态进行快照。
> **这将在需要时自动创建基线，即，当该工作区/流中组件的当前配置当前未在基线中捕获时**。
> 
> 当您在工作区组件上创建基线时，它会将工作区当前从该组件中选择的源版本作为基线。
> 
> 一旦创建，您可以在任何您想要的地方使用快照或基线（即它不以任何方式“绑定”到创建它的工作区或流）。
> 
> 确实，从工作空间到流的“交付”操作也会导致该工作空间中的基线显示在流的基线历史记录中。
> 
> 一些人认为“交付”操作应该只交付变更集，而不是基线，因为当工作空间和流中的基线历史发生分歧时可能会发生混乱。
> （特别是，我希望您在需要时在流中显式创建基线）。
> 这种方法的一个优点是快照和基线将具有一致的语义（目前，基线受交付操作的影响，但快照不受）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:34:07.113

我想我知道这个问题的答案。更改集已交付给创建新基线的流中的组件。因此，当我创建一个新快照时，它为此组件创建了一个新基线，因为它包含一个新的更改集，因此它与原始基线不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T12:36:40.850

在我们的例子中，每个基线都只创建和使用一次。几年后，许多开发人员使用 Jenkins 构建 dev/int/prod 变体并对其进行单元测试，我们有几十万个基线，这些基线除了生成一个快照之外从未用于任何其他用途。再也没有看过，也没有提供任何进一步的价值，只会消耗 TB 的磁盘空间。

正确的答案是使用不同的 SCM 工具，但管理不是技术性的，Rational 的销售人员销售了一个不能完全满足我们开发需求的优秀产品。每次都从没有新基线的流中创建快照将使这更适合我们的需求。

# java - Selenium (2.29.1) 悬停在 Firefox (18.01) 下

> ID：14520945
> 
> 赞同：1
> 
> 时间：2013-01-25T11:31:32.350
> 
> 标签：java, selenium, hover, selenium-webdriver

我有一个页面，里面有一张图片。如果我将鼠标悬停在左上角，则会出现一个按钮。我想将该按钮用于几件事（检查、点击等）。

我正在使用这种方法将鼠标悬停在：

> ```
>  Locatable hoverItem = (Locatable) element;
>     Mouse mouse = ((HasInputDevices) driver).getMouse();
>     mouse.mouseMove(hoverItem.getCoordinates()); 
> ```

这种方法在 IE (9) 和 Chrome (latest) 下完美运行，但在 FireFox (18.01) 下不行。脚本看不到按钮出现，因此无法检查或按下它：

> Assert.assertTrue("保存按钮不见了！", Browser.findElement(By.id("xxx")).isDisplayed());

我正在使用 2.29.1 Selenium。您知道 FireFox 有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:44:53.757

我在任何地方都没有看到 java 2.29.1 版本..您使用的是 java 还是 .Net 绑定？2.29 的更改日志说支持 firefox 18，但没有提到原生支持。这可能是一个原因。考虑将 firefox 降级到 17，因为 selenium 2.27 java 版本更改日志显示已为 17 添加了对本机事件的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:31:26.417

Selenium 2.29 在 Firefox 18 上不支持，因为最新版本没有在 FF18 上测试。如果您将 Firefox 降级到版本，它将起作用。甚至我在 FF18 上也遇到了问题，但在 FF17 上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:03:09.427

请确保使用的`Firefox`版本是稳定版或 Beta 版。如果 Beta 版本更改为稳定版本。最稳定的版本于 2013 年 1 月 18 日发布。

我也用过鼠标悬停。但是，我使用了不同的代码。

**我的代码**

```
 //Assume you instantiate the driver instance properly anywhere else
  WebElement elem = driver.findElement(By.id(`IdName`));
  Actions builder = new Actions(driver);
  builder.moveToElement(elem).build().perform(); 
```

试试这个代码。

# twitter-bootstrap - Twitter Bootstrap 中的 Mashable Like 菜单

> ID：14520948
> 
> 赞同：0
> 
> 时间：2013-01-25T11:31:39.383
> 
> 标签：twitter-bootstrap

我正在 twitter bootstrap 中开发一个网站，并且想要与 mashable 网站一样的菜单。任何人都可以帮我解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:53:09.117

[这是](http://jsfiddle.net/GrahamWalters/xGf93/)一个带有导航菜单清理副本的jsfiddle。您可能需要打开全屏版本才能真正看到菜单，这里是[链接](http://jsfiddle.net/GrahamWalters/xGf93/embedded/result/)。最难的部分是通过`5490`CSS 来找到导航栏真正需要的东西。您最好的选择是从头开始，并记住并非每个网站都应该看起来相同！祝你的设计好运。

# php - 三元运算符。有可能采取单方面的行动吗？

> ID：14520949
> 
> 赞同：18
> 
> 时间：2013-01-25T11:31:42.267
> 
> 标签：php, ternary-operator

我使用三元运算符有一段时间了，想知道是否有一种方法可以让我们在没有`else`子句的情况下调用函数。例子：

```
if (isset($foo)) {
    callFunction();
} else {

} 
```

现在显然我们可以省略`else`to make：

```
if (isset($foo)) {
    callFunction();
} 
```

现在是三元组，如果条件返回 false，您如何“绕过”else 子句？

```
isset($foo) ? callFunction() : 'do nothing!!'; 
```

是神秘还是不可能？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-25T11:35:40.867

短路

```
isset($foo) and callFunction(); 
```

反转条件并省略第二个参数

```
!isset($foo) ?: callFunction(); 
```

或只返回“某物”

```
isset($foo) ? callFunction() : null; 
```

但是，三元运算符旨在有条件地从两个可能的值中提取一个值。您正在调用一个函数，因此您似乎真的在寻找`if`并滥用`?:`来保存字符？

```
if (isset($foo)) callFunction(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:33:44.443

在这种情况下，为什么要使用三元运算符？三元运算符意味着在有两种可能的情况时使用，并且在您只关心情况的情况下没有多大意义`if`。但是，如果您**必须**这样做，只需将案例留空：`(cond)?do_something():;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:38:07.027

在冒号后面加上零。此外，假设您使用 Perl，您可能会使用更好的 'condition and action()'、'action() if condition' 习语。

# jersey - 泽西岛的 MediaType.TEXT_CSV

> ID：14520950
> 
> 赞同：13
> 
> 时间：2013-01-25T11:31:52.360
> 
> 标签：jersey

是否可以接受 csv 类型？service.path(appPath).accept(mediaType).get(String.class)

javax.ws.rs.core.MediaType 中没有定义 MediaType.TEXT_CSV。我错过了什么吗？

我目前在泽西岛 1.1.6 上。

非常感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T16:32:29.107

您可以定义自己的媒体类型：

```
public final static String TEXT_CSV = "text/csv";
public final static MediaType TEXT_CSV_TYPE = new MediaType("text", "csv"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T12:28:29.950

csv 只不过是逗号分隔的**文本**文件

您始终可以将`text\plain`其用作媒体类型来处理 CSV 文件 - 并使用[Open CSV 等框架处理 CSV](http://opencsv.sourceforge.net/)。

或者（在文件上传的情况下）

```
@Consumes(MediaType.MULTIPART_FORM_DATA)
public String process(@FormDataParam("file") InputStream csv) throws IOException {
//Process CSV file
} 
```

# java - 将文件从客户端发送到服务器 - 未保存在服务器中

> ID：14520952
> 
> 赞同：0
> 
> 时间：2013-01-25T11:32:01.320
> 
> 标签：java, sockets

这是我将文件上传到服务器的客户端代码

```
try {
    OutputStream output = socket.getOutputStream();     

        FileInputStream fileInputStream = new FileInputStream(file);
        byte[] buffer = new byte[1024*1024];
        int bytesRead = 0;

        while((bytesRead = fileInputStream.read(buffer))>0)
        {
            output.write(buffer,0,bytesRead);
        }
catch (Exception e) {

            } finally {

                //fileInputStream.close();
            } 
```

服务器代码

```
 File file=null;

    InputStream input = sk.getInputStream();

    file = new File("C://some/somefile.txt" );
    FileOutputStream out = new FileOutputStream(file);

    byte[] buffer = new byte[1024*1024];

    int bytesReceived = 0;

    while((bytesReceived = input.read(buffer))>0) {
        out.write(buffer,0,bytesReceived);
        System.out.println(bytesReceived);
        break;
    } 
```

我上传的文件没有保存在服务器上。我怎样才能更正我的代码？请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:36:16.850

为了正确保存文件，您需要输入：

```
out.flush();
out.close(); 
```

在你写完之后

# css - 选择一个类中的所有 h 标签

> ID：14520954
> 
> 赞同：7
> 
> 时间：2013-01-25T11:32:09.417
> 
> 标签：css, html-heading

而不是像这样编写 CSS 代码，

```
.dark h1, 
.dark h2, 
.dark h3, 
.dark h4, 
.dark h5, 
.dark h6 {

} 
```

有没有像 [class*="blah"] 这样的捷径？

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T11:36:56.543

不，因为属性选择器仅适用于属性。您不能对元素名称使用正则表达式或类似的东西。某些系统（如 LESS 或 SASS）使您能够用更少的代码编写这样的表达式，但是在原生 CSS 中没有这样的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T11:36:34.017

不，没有别的办法。逗号分隔的列表是您完全可以做的，但是，为所有 H 标签提供父元素 ID 和相同的类，然后您可以使用该类来修改所有标签。

# laravel - Laravel 4 的 Cron 作业

> ID：14520955
> 
> 赞同：16
> 
> 时间：2013-01-25T11:32:12.863
> 
> 标签：laravel, laravel-4, cron, command

我正在尝试找出**如何在 Laravel 4 中设置 cron 作业**，以及我需要在 artisan 中运行的命令。

在 Laravel 3 中，有`Tasks`但这些似乎不再存在，并且没有关于如何做到这一点的文档......

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-07-22T10:09:03.690

下面我详细介绍一个使用cron`commands`的教程。`Laravel 4`为了更容易理解，我分为四个步骤。

* * *

## 第 1 步：在 Laravel 4 中创建一个命令：

```
php artisan command:make RefreshStats 
```

`RefreshStats.php`使用上面的命令，Laravel 将在目录中 创建一个名为的文件`app/commands/`

**RefreshStats.php**是这样的文件：

```
use Illuminate\Console\Command;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Input\InputArgument;

class RefreshStats extends Command {

        protected $name = 'command:name';
        protected $description = 'Command description.';

        public function __construct() {
                parent::__construct();
        }

        public function fire(){

        }

        protected function getArguments() {
            return array(
                array('example', InputArgument::REQUIRED, 'An example argument.'),
            );
        }

        protected function getOptions() {
            return array(
                array('example', null, InputOption::VALUE_OPTIONAL, 'An example option.', null),
            );
        }

} 
```

* * *

## 第 2步：RefreshStats 文件的简单“*配置”：*

你应该改变这一行：

```
protected $name = 'command:name'; 
```

像这样：

```
protected $name = 'refresh:stats'; 
```

如果您不需要参数（*与 options 相同*），请更改此行：

```
protected function getArguments() {
      return array(
          array('example', InputArgument::REQUIRED, 'An example argument.'),
      );
} 
```

至：

```
protected function getArguments() {
      return array();
} 
```

现在**注意**功能`fire`。该命令将执行在该函数中编写的源代码。例子：

```
public function fire(){
    echo "Hello world";    
} 
```

* * *

## 第 3 步：注册命令：

您需要注册该命令。所以打开`app/start/artisan.php`文件，添加一行如下：

```
Artisan::add(new RefreshStats); 
```

* * *

## 第 4 步：创建*CRON*计划任务：

最后，您可以添加计划任务，如下所示：

```
crontab -e 
```

并添加一行（*每 30 分钟运行一次命令*），如下所示：

```
*/30 * * * * php path_laravel_project/artisan refresh:stats 
```

* * *

## 一切都会**自动运行**！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-25T11:40:50.157

任务已被替换为[命令](http://laravel.com/docs/4.2/commands#building-a-command)，这在 Laravel 4 中是一样的，但集成了 Symfony 的控制台组件，甚至比以前更强大。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-25T19:05:12.790

或者，如果你不喜欢命令，有一个非官方的 Laravel 4 cron 包：[https ://github.com/liebig/cron](https://github.com/liebig/cron)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-14T21:22:27.103

好的，所以我发现[这](https://gist.github.com/sisou/889971461616661d2ed6)对于在 laravel 4.2 中设置 crons 很有用。

# c# - 从 XML 加载 WeifenLuo DockPanel Suite 布局

> ID：14520959
> 
> 赞同：1
> 
> 时间：2013-01-25T11:32:22.160
> 
> 标签：c#, xml, dockpanel-suite

我目前正在开发一个实现 DockPanel 套件的项目，现在我正在尝试从 XML 文件加载用户的布局。DockPanel 对象具有方法`LoadFromXml`和`SaveToXml`. 保存到 XML 相对简单。

我不确定如何重新加载布局，是否需要再次初始化所有组件以及是否需要将它们添加回表单。任何帮助将不胜感激，因为在线帮助很少。我也不能从样本中得到很多东西。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T02:53:03.027

是的，您必须提供组件。

`LoadFromXml`将恢复每个内容的停靠面板状态（如位置、大小等），但您需要在加载这些 DockContent 派生项时实际提供它们的实例。这是通过向调用提供类型的处理程序委托`DeserializeDockContent`来完成的`LoadFromXml`，它告诉您它正在寻找的类型（默认情况下），并且您提供适当的`DockContent`. `MainForm.GetContentFromPersistString()`DockSample 中就是一个例子。

# c# - 通过给出路径搜索公共文件夹中的文件夹

> ID：14520960
> 
> 赞同：2
> 
> 时间：2013-01-25T11:32:22.283
> 
> 标签：c#, api, exchange-server, managed, exchange-server-2010

是否可以通过提供文件夹的路径来搜索公用文件夹中的所有文件夹和子文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:21:49.080

尝试：

```
Get-PublicFolder -Identity <ParentFolderPath> -Recurse 
```

例如：

```
Get-PublicFolder -Identity "\NON_IPM_SUBTREE\schema-root" -Recurse 
```

应该产生默认文件夹：

```
Name                                                        Parent Path
----                                                        -----------
schema-root                                                 \NON_IPM_SUBTREE
Default                                                     \NON_IPM_SUBTREE\schema-root
microsoft                                                   \NON_IPM_SUBTREE\schema-root
exchangeV1                                                  \NON_IPM_SUBTREE\schema->root\microsoft 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T11:37:08.383

使用：

```
Directory.GetDirectories(path, "*", SearchOption.AllDirectories); 
```

是一个静态类，避免创建实例。

有关更多信息，请参阅[Directory 与 DirectoryInfo](https://stackoverflow.com/questions/3146586/directory-vs-directoryinfo)

# php - jQuery：使用动态添加的按钮删除最接近的按钮

> ID：14520961
> 
> 赞同：5
> 
> 时间：2013-01-25T11:32:24.057
> 
> 标签：php, jquery, html, button, onclick

我无法使用动态生成的按钮删除表中的一行。主要问题是“alert()”不起作用。我如何捕捉“点击”事件？

jQuery：

```
$("#officers-table").on('click', '.remove-officer-button', function(e) {
    var whichtr = $(this).closest("tr");

    alert('worked'); // Alert does not work
    whichtr.remove();      
}); 
```

* * *

HTML/PHP（更新了代码）

```
<table id="officers-table" class="ui-widget ui-widget-content">
<?php if($num_officers > 0): ?>
    <thead>
      <tr class="ui-widget-header ">
        <th>Name</th>
        <th>Director</th>
        <th>Shareholder</th>
        <th>Secretary</th>
        <th colspan="2">Options</th>
      </tr>
    </thead>
<?php endif; ?>
<tbody>
<?php foreach ($officers as $item): ?>
  <tr>
    <td><?=$item->name?> <?=$item->lastname?></td>
    <td><?=$item->is_director?></td>
    <td><?=$item->is_shareholder?></td>
    <td><?=$item->is_secretary?></td>
    <td>Edit</td>
    <td><button type="button" value="<?=$item->id?>" class="remove-officer-button">Remove</button></td>
  </tr>     
<?php endforeach; ?>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:38:32.303

试试这个（[在 JSFiddle 中工作](http://jsfiddle.net/mkqU2/)）：

```
$(".remove-officer-button").on('click', function(e) {
    var whichtr = $(this).closest("tr");
    alert('worked'); // Alert does not work
    whichtr.remove();      
}); 
```

**编辑**
正如大家所说，您的代码似乎可以正常工作。检查这个 JSFiddle：
**原始代码：http:** [//jsfiddle.net/mkqU2/1/](http://jsfiddle.net/mkqU2/1/)

您可以使用上面的代码作为替代方案，但听起来您还有其他一些导致脚本中断的 javascript 错误。

另外.. 确保您的代码在 DOM Ready 事件中。如果不是，单击按钮时不会发生任何事情。
下面的 jsfiddle 复制了您的错误，如果未包含在`DOM Ready event`, 或`window load event`.
**不在 DOM 内部准备好**：http : [//jsfiddle.net/mkqU2/2/](http://jsfiddle.net/mkqU2/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:45:21.377

**There is no need to alter your code, which works fine:**

[http://jsfiddle.net/yAMjj/](http://jsfiddle.net/yAMjj/)

The problem seems to be that your table doesn't have the right ID. Make sure it's

```
<table id="officers-table"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:47:19.683

Try

`$(this).parent('tr').remove();`

or

`$(this).parent().remove();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-06T03:25:41.297

这个答案有点超出了问题的范围，但这里的答案为我指明了正确的方向，所以我想回馈一些东西。

这是我在成功的 ajax 结果后删除它的简单版本，我在 ajax 结果部分发现 $(this) 没有删除该行，我认为此时可能是“this”是ajax 对象或成功属性，而不是按钮。

```
// My button markup ends up like this with php echoing out the id numbers.
// one button in each row.
<button type="button" id="delete234" value="234">Delete</button>

$('button[id^=\'delete\']').on('click', function() {
 if (confirm('Are you sure?')) {
   var node = this;

   $.ajax({
     url: 'http://example.com/somewhere.php?somethingtodelete=' + $(node).val(),
     dataType: 'json',
     success: function (json) {
       if (json['success']) {
         $(node).closest('tr').remove();
       }
     }
   });
  }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-25T11:35:59.583

$(whichtr).remove() ？这行得通吗？

# ubuntu - 在 Ubuntu 12.04.1 [LTS] 上从 Redmine 1.3.2 升级到 Redmine 2.2.2

> ID：14520966
> 
> 赞同：6
> 
> 时间：2013-01-25T11:32:49.603
> 
> 标签：ubuntu, upgrade, redmine

我已经从 Ubuntu 12.04.1 (LTS) 上的官方存储库安装了 Redmine 1.3.2。Redmine 1.3.2 通过 nginx 和 Thin 工作。

然后我决定将它升级到 Redmine 2.2.2（目前最新）。

我运行以下命令：

```
add-apt-repository ppa:ondrej/redmine 
apt-get update 
apt-get install redmine redmine-mysql 
```

没有错误，一切都被删除和安装。

然后我做了

```
rake db:migrate RAILS_ENV=production
rake generate_secret_token 
```

`/usr/share/redmine`在我的情况下，来自 redmine 根文件夹

而我只有一个小问题：Redmine 的 JS 和 CSS 文件的 url 错误，所有其他内容都是可见的。

现在网址看起来像：

```
https://domain/themes/highrise_tabs/stylesheets/application.css?1326492267 
```

而nginx自然返回404，因为真实地址必须是

```
https://domain/redmine/themes/highrise_tabs/stylesheets/application.css?1326492267 
```

我在官方网站上找到了解决方案

```
Redmine::Utils::relative_url_root = "/redmine" 
```

最后我得到了我想要的，只有一件事让我失望，性能变得更糟。每个人都告诉新的 redmine 更快......但我无法确认。从我的角度来看，它更慢:(

也许有人知道我应该怎么做才能让它更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T19:04:10.700

使用[Phusion Passenger 5](https://www.phusionpassenger.com/)对我来说是一个巨大的提升。还要检查[gzip 和模拟的 .js 和 .css 文件](https://stackoverflow.com/a/30490597/542730)以加快资源加载时间。

这需要一次安装 Nginx + Passenger + PageSpeed。你可以阅读[我的帖子](http://scyu.logdown.com/posts/93686-install-nginx-with-passenger-ngx-pagespeed-and-spdy)了解安装细节。

# ruby - 进程自动终止

> ID：14520967
> 
> 赞同：1
> 
> 时间：2013-01-25T11:32:53.143
> 
> 标签：ruby, linux, ubuntu, rake

我有一个执行大量 ram 密集型计算的 ruby​​ 脚本。我把它放在一个 rake 任务中并作为后台进程运行。我对红宝石过程做了一个grep。

几分钟后，我得到了这个

```
[1]+  Killed                  ( rake sample ) 
```

为什么这个过程被杀死的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:43:47.577

正如您所说，您的程序正在消耗大量内存，也许没有剩余。当没有更多内存时，内核开始杀死进程。

尝试使用 或 监视进程运行时的内存使用`top`情况`ps`。

```
ps v PID_OF_YOUR_PROCESS 
```

这将为您提供 RSS 列，即“进程的实际内存（驻留集）大小（以千字节为单位）”。按照[这个链接](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.prftungd/doc/prftungd/mem_usage_determine_ps.htm)。

# jquery - 显示/隐藏 div 导致内容跳转

> ID：14520969
> 
> 赞同：0
> 
> 时间：2013-01-25T11:32:57.620
> 
> 标签：jquery, css, show-hide

我有一些 jquery 在页面滚动的某个点隐藏和显示导航。唯一的问题是，当导航位置从相对更改为固定时，它会将页面上的所有内容向上移动以填充导航所在的空间。我似乎找不到有效的解决方案。这是脚本：

```
if ($(this).scrollTop() > 800) {
    $('nav a').css({
        "color": "#555"
    });
    $('header').css({
        "position": "fixed",
        "top": "0px",
        "background": "white"
    });
} else {
    if ($(this).scrollTop() <= 800) {
        $('nav a').css({
            "color": "white"
        });
        $('header').css({
            "position": "relative",
            "top": "0px",
            "background": "none"
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:38:49.257

执行此操作时，您应该始终在滚动一定量之后`position: absolute;`设置导航的样式。`fixed`您需要设置其余内容的样式，以便为导航部分留出空间（因此它需要保持固定高度），但您不会有任何“跳跃”效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:40:41.717

放：

```
position: absolute;
top:0; left:0; 
```

绝对位置将使其高于所有元素，然后顶部和左侧可以保留其位置而不会干扰页面上的其他内容...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:47:36.497

This is just an idea :

Try to specify `visibility` to `hidden` and make a clone of the header.

```
if ($(this).scrollTop() > 800) {
$('nav a').css({
    "color": "#555"
});
var $clone = $('header').clone();
$clone.css({
    "position": "fixed",
    "top": "0px",
    "background": "white"
 });
 $('header').css({"visibility": "hidden"});

} else {
 if ($(this).scrollTop() <= 800) {
    $('nav a').css({
        "color": "white"
    });
    $clone.hide();
    $('header').css({
        "position": "relative",
        "top": "0px",
        "background": "none",
        "visibility": "visible"
    });
 }
} 
```

# html - 5 列 - 3 个固定宽度的列和 2 个流体

> ID：14520983
> 
> 赞同：0
> 
> 时间：2013-01-25T11:33:32.753
> 
> 标签：html, css

我正在寻找创建一个流体布局，具有 3 个固定宽度的列和 2 个流体。一共5列。

我玩过“display: table-cell;”，它在 Chrome 中工作，但在 FF 中坏了。

![在此处输入图像描述](../Images/836ff9fa57e8cd9acb94c36ac48e9dd6.png)

```
section.how-to .steps { max-width:1400px; width:100%; padding:10px 3%; box-sizing: border-box; height:350px}
section.how-to .steps > div {  display: table-cell;}
section.how-to .steps .step {  min-width:262px} 
section.how-to .steps .filler {  height:200px; width:50%}

  <section class='how-to'> 
       <div class="steps">
           <div class="step one"></div>
           <div class="svg  filler"></div>
           <div class="step two"></div>
           <div class="svg  filler"></div>
           <div class="step three"></div>
       </div> 
 </section> 
```

任何人都可以建议一种跨浏览器的方法。(Webkit, FF, IE8+)

谢谢凸轮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:58:40.923

嗨，我想出了一个似乎适用于所有主要浏览器的解决方案：

[jsFiddle](http://jsfiddle.net/U6cmR/2/)

**html**

```
<div class="container">
    <div id="LeftColumn" class="fixedWidth">
        col 1
    </div>
    <div id="CenterColumn">
        <div id="CenterLeft" class="centerColumn">
            <div class="padded">
                <div class="content">
                    col 2
                </div>
                <div class="fixedWidth">
                    col 3
                </div>
                 <div class="clearSpacer">&nbsp;</div>
            </div>
        </div>
        <div id="CenterRight" class="centerColumn">
            <div class="padded">
                <div class="content">col 4</div>
            </div>
        </div>
        <div class="clearSpacer">&nbsp;</div>
    </div>
    <div id="RightColumn" class="fixedWidth">
        col 5
    </div>
    <div class="clearSpacer">&nbsp;</div>
</div> 
```

**CSS**

```
.container {padding:0 62px;} /*I have used 62px - just change to 262px (all 62s below too);*/
.fixedWidth {width:62px; height:200px; background-color:red;} /*height and bg-color just to show what's happening*/

#LeftColumn {float:left; margin-left:-62px;}
#RightColumn {float:right; margin-right:-62px;}
#CenterColumn {float:left; width:100%;}

.centerColumn {width:50%; float:left; background-color:blue; position:relative;} 
#CenterLeft {z-index:2;}
#CenterRight {z-index:1;}
#CenterLeft .padded {padding-right:31px;} /*padding should be half width of fixed column*/
#CenterLeft .content {float:left;}
#CenterLeft .fixedWidth {float:right; margin-right:-62px;}
#CenterRight .padded {padding-left:31px;} /*padding should be half width of fixed column*/
.content {width:100%;}

.clearSpacer {clear:both; height:0; overflow:hidden;} 
```

# php - 嵌入 PHP 代码的 Javascript 语法错误

> ID：14520986
> 
> 赞同：1
> 
> 时间：2013-01-25T11:33:36.433
> 
> 标签：php, javascript

我犯了一些愚蠢的错误，但无法弄清楚我做了什么。

我正在尝试测试从 PHP 到 Javascript 的传递变量，如果它是一个数组，`json_encode`它

我的文件是一个 PHP 文件，即 .php

似乎导致我添加到原始 PHP 中的错误的 php 代码行，它工作正常

```
<?php

$php_var = 'lol';
$php_array = array ();
$php_array["lady"] = "mary";
$php_array["gent"] = "joseph";
echo is_array($php_array) ? json_encode($php_array) : $php_array;  // same as faulty line in javascript
?>

<html>
<body>

<script type="text/javascript" charset="utf-8">

var php_var = "<?php if (is_array($php_var)) {echo json_encode($php_var); } else { echo $php_var;}; ?>";
document.write(php_var + ' ifElse<br>');

// THE FOLLOWING LINE GIVES  Uncaught SyntaxError: Unexpected identifier 
var php_var2 = "<?php echo is_array($php_array) ? json_encode($php_array) : $php_array; ?>";

document.write (php_var2 + ' EitherOR<br>');

alert(php_var + php_array);

</script>
<h1> Testing Jscript variables</h1>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:47:50.570

正如您所指定的，错误位于：

`var php_var2 = "<?php echo is_array($php_array) ? json_encode($php_array) : $php_array; ?>";`

该错误可能是由于您在 Javascript 中使用双引号`("")`使用单引号。`('')`

这可能会解决您的错误： `var php_var2 = '<?php echo is_array($php_array) ? json_encode($php_array) : $php_array; ?>';`

`Object`或者，您可以使用 JSON 字符串直接创建 Javascript `eval()`。

[http://jsfiddle.net/jduGp/](http://jsfiddle.net/jduGp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:36:54.453

试试这个代码。如下所示替换两行。

```
var php_var = <?php if (is_array($php_var)) {echo json_encode($php_var); } else { echo $php_var;}; ?>;

var php_var2 = <?php echo is_array($php_array) ? json_encode($php_array) : $php_array; ?>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:43:11.757

我是这样做的

```
<?php

$php_var = 'lol';
$php_array = array ();
$php_array["lady"] = "mary";
$php_array["gent"] = "joseph";
?>

<html>
<body>

<script type="text/javascript" charset="utf-8">

var php_var = <?php if (is_array($php_var)) {echo json_encode($php_var); } else { echo '"' . $php_var . '"';} ?>;
document.write(php_var + ' ifElse<br>');

// THE FOLLOWING LINE GIVES  Uncaught SyntaxError: Unexpected identifier
var php_var2 = <?php echo is_array($php_array) ? json_encode($php_array) : $php_array; ?>;

document.write (php_var2 + ' EitherOR<br>');

alert(php_var);

</script>
<h1> Testing Jscript variables</h1>
</body>
</html> 
```

当Javascript不知道该变量时，不确定为什么要尝试警告php_array。除非您输出字符串，否则您也不需要引号。如果你在一个对象周围加上引号，Javascript 会认为它是一个字符串。