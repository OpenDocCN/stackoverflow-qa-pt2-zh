# StackOverflow 问答 12539000-12539999

# php - echo json_encode() 返回 NULL

> ID：12539000
> 
> 赞同：0
> 
> 时间：2012-09-21T22:33:13.067
> 
> 标签：php

我正在尝试通过 ajax 将数据传递到 php 页面，数据被插入到数据库中，然后我需要拿起最后一个插入并传递回来以更新选择菜单并选择最后一个插入。数据库得到正确更新，但我得到一个 NULL 回声 json_echo($data); 返回

整天被困在这个问题上，非常感谢您的帮助！！！

```
if (empty($_POST) === false && empty($errors) === true) {

      $company_id   = $_POST['company_id'];
      $patient_id   = $_POST['addpatient_id'];
      $first_name   = $_POST['addpatient_firstname'];
      $last_name    = $_POST['addpatient_lastname'];
      $dob          = $_POST['addpatient_dob'];
      $updated      = $_POST['patient_added'];

      $update = array();
      array_walk($update_data, 'array_sanitize');

      foreach($update_data as $field=>$data) {
          $update[] = '`' . $field . '` = \'' . $data . '\'';
      }

      mysql_query("INSERT INTO `lab`.`patients` (`company_id`, `patient_firstname`, `patient_lastname`, `patient_dob`, `patient_added`) VALUES ('$company_id', '$first_name', '$last_name', '$dob', '$updated')");
      $last_patient_id = mysql_insert_id();

      $result = mysql_query("SELECT `patient_id`, `patient_firstname`, `patient_lastname`, `patient_dob` FROM `patients` WHERE `patient_id` = $last_patient_id");
      $data[] = mysql_fetch_assoc($result);
}
      echo json_encode( $data ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:47:57.783

如果发生错误，json_encode 返回 false（[php 手册](http://php.net/manual/en/function.json-encode.php "文档")）。我会从那里开始。

```
$json_string = json_encode( $data );
if( $json_string ){
   echo $json_string;
}else{
   echo "Error";
   echo "<pre>";
   print_r($data);
   echo "</pre>";
} 
```

这至少应该引导您进行调试。

编辑：也尝试将其添加到函数的开头 all

```
error_reporting(E_ALL); 
ini_set('display_errors', '1'); 
```

这将有助于显示 mysql 抛出的错误。

编辑：我只想修复拼写，但由于我至少需要 6 个字符，所以我会提到[http://jsonlint.com/](http://jsonlint.com/)来验证您在 json_encode 中输入的内容

# delphi - 优势表文件正在使用错误。我该如何解决？

> ID：12539001
> 
> 赞同：2
> 
> 时间：2012-09-21T22:33:13.053
> 
> 标签：delphi, delphi-xe, advantage-database-server

我无法在我的程序的多个实例中打开某个表。发生的事情是我试图允许用户打开并用旧表（不包含在数据字典中）替换当前表（数据字典的一部分 - FileForm.ImagesTable）。它适用于程序的一个实例，但是当我们尝试在另一个实例上同时打开同一个文件时。我收到以下错误。

**FileName.ADT 此文件正在使用中。输入新名称或关闭在另一个程序中打开的文件。**

下面是我将表名和数据路径重新分配给所选表的代码。

```
OpenDialog1.FileName := '*.adt';
OpenDialog1.Filter := 'Software 6.0 Files (*.adt)|*.adt|Software 5.x Files (*.dbf)|*.dbf';
OpenDialog1.InitialDir := DataPath;
if OpenDialog1.Execute then
begin
    Str1 := Trim(OpenDialog1.FileName);
    if Length(Str1) = 0 then
        Exit;
    DSImage.Enabled := False;

    with FileForm.ImagesTable do
    begin
        Active := False;
        AfterOpen := FileForm.TableOther.AfterOpen;
        DataBaseName := ExtractFilePath(Str1);   
        TableName :=  ExtractFileName(Str1);
        Active := True;
    end;
 end; 
```

* * *

**编辑*** 使用 Advtantage 8.1，似乎是一个窗口错误，因为错误发生在对话窗口中。是的 Exclusive 设置为 false。

![错误](../Images/d0307f50db13502e46ad5ff963d87921.png)

* * *

任何关于为什么会发生这种情况以及如何解决这个问题的想法都值得赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T00:46:15.107

您不清楚具体错误 - 是 Windows 错误还是 Advantage 错误？

如果是 Windows 错误，可能是因为您指定了对表的独占访问权限 ( `ImageTable.Exclusive = True`)。这意味着应用程序的第一个实例可以打开它，但随后的尝试会因`File is in use`错误而失败。

如果是 Advantage 错误，Advantage 帮助文件（在[v11 的文档](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/devguide_understanding_and_using_data_dictionaries.htm)中，因为您没有指定 ADS 的版本 - 请注意它在框架中，因此您可能需要使用[此链接](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/index.html)，导航到`Advantage Developers Guide`，展开`Part 1->Chapter 4 - Dictionaries->Understanding Dictionaries`主题）说：

> 数据字典是一个特殊文件，用作数据库表的唯一访问点

注意**唯一的接入点**。一旦表在数据字典中，它就属于数据字典。您试图用字典范围之外的内容替换该引用，这是不允许的。我很确定问题与此有关 - ADS 对字典中包含的表设置了专有锁，并通过字典通过服务器控制对这些文件的访问。

您需要从字典中删除表并将其用作空闲表，或者提出不同的策略来删除当前数据并将其替换为其他数据以保持字典的完整性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T18:47:06.873

看起来您只是使用“打开对话框”来获取表的名称。
在“打开”对话框中尝试设置[ShareAware选项](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/Dialogs_TOpenOption.html)

> OpenDialog1.Options := OpenDialog1.Options + [ ofShareAware ];

使用 Advantage 打开表后，模式为拒绝写入、拒绝读取，因此如果任何非 Advantage 尝试打开表，则将返回共享错误。

# mobile - 移动浏览器的工具提示

> ID：12539006
> 
> 赞同：74
> 
> 时间：2012-09-21T19:52:02.833
> 
> 标签：mobile, mobile-website, tooltip, html

`title`如果我想提供更多信息，我目前设置了一些 HTML 的属性：

```
<p>An <span class="more_info" title="also called an underscore">underline</span> character is used here</p> 
```

然后在 CSS 中：

```
.more_info {
  border-bottom: 1px dotted;
} 
```

效果非常好，视觉指示器可以将鼠标移到上方，然后弹出一个带有更多信息的小窗口。但是在移动浏览器上，我没有得到那个工具提示。 `title`属性似乎没有影响。在移动浏览器中提供有关一段文本的更多信息的正确方法是什么？与上面相同，但使用 Javascript 来监听点击，然后显示一个类似于工具提示的对话框？有没有原生机制？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-21T21:39:42.093

您可以使用 Javascript 伪造标题工具提示行为。当您在具有`title`属性的元素上单击/制表时，将附加带有标题文本的子元素。再次单击它会被删除。

Javascript（用 jQuery 完成）：

```
$("span[title]").click(function () {
  var $title = $(this).find(".title");
  if (!$title.length) {
    $(this).append('<span class="title">' + $(this).attr("title") + '</span>');
  } else {
    $title.remove();
  }
});​ 
```

CSS：

```
.more_info {
  border-bottom: 1px dotted;
  position: relative;
}

.more_info .title {
  position: absolute;
  top: 20px;
  background: silver;
  padding: 4px;
  left: 0;
  white-space: nowrap;
} 
```

演示：http: [//jsfiddle.net/xaAN3/](http://jsfiddle.net/xaAN3/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2020-03-12T18:49:15.740

这是`CSS`唯一的解决方案。（类似于@Jamie Pate 的回答，但没有 JavaScript。）

我们可以使用伪类`:hover`，但我不确定所有移动浏览器在点击元素时都会应用这些样式。我正在使用伪类`:focus`，因为我猜它更安全。但是，当使用伪类时，`:focus`我们需要添加`tabindex="0"`本质上没有焦点状态的元素。

我正在使用 2 个`@media`查询来确保所有移动设备都是目标。该`(pointer: coarse)`查询将针对主要输入法是“粗略”的任何设备，例如手指。并且`(hover: none)`查询将针对主要指向系统无法悬停的任何设备。

这个片段就是所需要的：

```
@media (pointer: coarse), (hover: none) {
      [title] {
        position: relative;
        display: inline-flex;
        justify-content: center;
      }
      [title]:focus::after {
        content: attr(title);
        position: absolute;
        top: 90%;
        color: #000;
        background-color: #fff;
        border: 1px solid;
        width: fit-content;
        padding: 3px;
      }
    } 
```

```
/*Semantic Styling*/
body {
  display: grid;
  place-items: center;
  text-align: center;
  height: 100vh;
}

a {
  height: 40px;
  width: 200px;
  background: #fa4766;
  color: #fff;
  text-decoration: none;
  padding: 10px;
  box-sizing: border-box;
  border-radius: 10px;
}

/*Functional Styling*/
@media (pointer: coarse), (hover: none) {
  [title] {
    position: relative;
    display: flex;
    justify-content: center;
  }
  [title]:focus::after {
    content: attr(title);
    position: absolute;
    top: 90%;
    color: #000;
    background-color: #fff;
    border: 1px solid;
    width: fit-content;
    padding: 3px;
  }

}
```

```
<a title="this is the Title text" tabindex="0">Tag with Title</a>
```

显然，您需要在移动设备上打开它来测试它。 [这是具有相同代码的笔](https://codepen.io/pen/wvamaGw)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-20T11:28:52.157

flavaflo 答案的稍微详细一点的版本：

*   使用预定义的 div 作为可以保存 HTML 的弹出窗口，而不是从标题属性中读取
*   如果使用鼠标，则在翻转时打开/关闭
*   单击时打开（触摸屏）并在单击打开的弹出窗口或文档上的任何其他位置时关闭。

HTML：

```
 <span class="more_info">Main Text<div class="popup">Pop-up text can use <b>HTML</b><div></span> 
```

CSS：

```
.more_info {
    border-bottom: 1px dotted #000;
  position: relative;
    cursor: pointer;
}

.more_info .popup {
    position: absolute;
    top: 15px; /*must overlap parent element otherwise pop-up doesn't stay open when rolloing over '*/
    background: #fff;
    border: 1px solid #ccc;
    padding: 8px;
    left: 0;
    max-width: 240px;
    min-width: 180px;
    z-index: 100;
    display: none;
} 
```

JavaScript / jQuery：

```
$(document).ready(function () {

    //init pop-ups
    $(".popup").attr("data-close", false);

    //click on pop-up opener
    //pop-up is expected to be a child of opener
    $(".more_info").click(function () {
        var $title = $(this).find(".popup");
        //open if not marked for closing
        if ($title.attr("data-close") === "false") {
            $title.show();
        }
        //reset popup         
        $title.attr("data-close", false);
    });

    //mark pop-up for closing if clicked on
    //close is initiated by document.mouseup, 
    //marker will stop opener from re-opening it
    $(".popup").click(function () {
        $(this).attr("data-close",true);
    });

    //hide all pop-ups
    $(document).mouseup(function () {
        $(".popup").hide();

    });

    //show on rollover if mouse is used
    $(".more_info").mouseenter(function () {
        var $title = $(this).find(".popup");
        $title.show();
    });

    //hide on roll-out
    $(".more_info").mouseleave(function () {
        var $title = $(this).find(".popup");
        $title.hide();
    });  

}); 
```

在这里演示[https://jsfiddle.net/bgxC/yvs1awzk/](https://jsfiddle.net/bgxC/yvs1awzk/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-15T01:38:37.983

鉴于现在（2015 年）有很多人使用移动浏览器，但仍未在移动浏览器中找到某种形式的曝光，也许是时候放弃对有意义信息`title`的依赖了。`title`

它永远不应该用于关键信息，但它现在对于有用的信息变得可疑，因为如果该信息是有用的并且不能向一半用户显示，那么需要找到另一种向几乎所有用户显示它的方式。

对于静态页面，可能是相关控件附近的一些可见文本，甚至是精美的印刷品。对于服务器生成的页面，浏览器嗅探只能为移动浏览器提供。在客户端，javascript 可用于捕获焦点事件，通过冒泡，在当前焦点元素旁边显示额外的文本。这将最小化占用的屏幕空间，但不一定有用，因为在很多情况下，将焦点放在控件上只能以立即激活其操作的方式完成，绕过查找的能力使用前先了解一下！

总而言之，在移动设备上显示属性的困难似乎`title`可能导致它的消亡，主要是因为需要一个更通用的替代方案。很遗憾，因为手机可以使用一种方式按需显示这些额外的信息，而不会占用有限的屏幕空间。

w3c 和移动浏览器制造商很久以前对这个问题没有做任何事情，这似乎很奇怪。至少他们可以在长按控件时出现的菜单顶部显示标题文本。

就个人而言，我希望它被放置在右键单击/长按菜单的顶部，因为它不会超时，并且可以在所有浏览器上使用。

另一种选择是构建脚注，因此在需要更多信息的元素/文本旁边放置一个 [n] 类型的上标，链接到页面底部列表中的说明性文本。其中每一个都可以有一个类似的 [n] 类型链接返回到原始文本/元素。这样，它可以保持显示整洁，但以简单的方式提供简单的双向交换。有时，带有一点超链接帮助的旧印刷媒体方式是最好的。

该`title`属性已被某些浏览器劫持以提供模式属性的帮助文本，因为如果模式与输入元素中的文本不匹配，则会弹出其文本。通常，它是提供正确格式的示例。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-21T22:24:32.723

根据您想向用户提供多少信息，**模态对话框**可能是一个优雅的解决方案。

具体来说，你可以试试[qTip](http://craigsworks.com/projects/qtip/) jQuery 插件，它有一个[模式](http://craigsworks.com/projects/qtip/demos/effects/modal#)模式`$.click()`：

![qTip 模态工具提示](../Images/2b66a2e60233b7f53abfc17d124a414d.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-11-06T21:38:02.067

正如@cimmanon 提到的：`span[title]:hover:after { content: attr(title) }`在触摸屏设备上为您提供基本的工具提示。不幸的是，这有问题，触摸屏设备上的默认 ui 行为是在按下任何非链接/uicontrol 时选择文本。

要解决选择问题，您可以添加`span[title] > * { user-select: none} span[title]:hover > * { user-select: auto }`

完整的解决方案可能会使用其他一些技术：

*   添加`position: absolute` `background`,`border`等`box-shadow`使其看起来像一个工具提示。
*   当用户使用任何触摸事件时，将类添加`touched`到正文（通过 js）。然后你可以在`body.touched [title]:hover ...`不影响桌面用户的情况下做

```
document.body.addEventListener('touchstart', function() {
  document.body.classList.add('touched');
});
```

```
[title] {
	border-bottom: 1px dashed rgba(0, 0, 0, 0.2);
	border-radius:2px;
	position: relative;
}
body.touched [title] > * {
	user-select: none;
}
body.touched [title]:hover > * {
	user-select: auto
}
body.touched [title]:hover:after {
	position: absolute;
	top: 100%;
	right: -10%;
	content: attr(title);
	border: 1px solid rgba(0, 0, 0, 0.2);
	background-color: white;
	box-shadow: 1px 1px 3px;
	padding: 0.3em;
	z-index: 1;
}
```

```
<div>Some text where a portion has a <span title="here's your tooltip">tooltip</span></div>
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-21T20:09:50.993

任何移动浏览器都不支持 title 属性 **它会以与桌面鼠标用户相同的方式显示工具提示** *（标记中当然支持该属性本身）*。
它基本上只适用于使用鼠标的桌面用户，只有键盘的用户也不能使用它，或者屏幕阅读器。

正如您所说，您可以使用 javascript 实现几乎相似的效果。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-18T11:58:05.750

感谢@flavaflo 的回答。这在大多数情况下都有效，但如果在同一段落中有多个标题要查找，并且一个通过指向另一个的链接打开，则未打开的链接会通过第一个显示。这可以通过动态更改“弹出”标题的 z-index 来解决：

```
$("span[title]").click(function () {
  var $title = $(this).find(".title");
  if (!$title.length) {
    $(this).append('<span class="title">' + $(this).attr("title") + '</span>');
    $(this).css('z-index', 2);
  } else {
    $title.remove();
    $(this).css('z-index', 0);
  }
});​ 
```

此外，您可以通过将 (linefeed) 添加到 title='' 属性来使悬停显示和单击显示多行`&#10;`，然后将其转换`<br />`为 html 单击显示：

```
$(this).append('<span class="title">' + $(this).attr("title").replace(/\\n/g, '<br />') + '</span>'); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-02-04T00:47:40.753

我正在寻找一个简单的纯 CSS 解决方案，这确实是我找到的最简单的解决方案：

```
<link rel="stylesheet" href="https://unpkg.com/balloon-css/balloon.min.css">

<span aria-label="Whats up!" data-balloon-pos="up">Hover me!</span> 
```

工作示例：[https ://jsfiddle.net/5pcjbnwg/](https://jsfiddle.net/5pcjbnwg/)

如果您想自定义工具提示，您可以在此处找到更多信息： [https ://kazzkiq.github.io/balloon.css/](https://kazzkiq.github.io/balloon.css/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-02T09:28:46.037

派对迟到了，但对于未来的访客来说，这是对[@Flavaflo 的答案](https://stackoverflow.com/a/12538532/11666513)的调整，可以淡入淡出“工具提示”

查询：

```
 $(".more_info").click(function () {
    var $title = $(this).find(".title");
    if (!$title.length) {
        $(this).append('<span class="title">' + $(this).attr("title") + '</span>');
    } else {
      $($title).fadeOut(250, function() {
          $title.remove();
      });
    }
}); 
```

CSS：

```
.more_info {
  border-bottom: 1px dotted;
  position: relative;
}

.more_info .title {
    position: absolute;
    top: 20px;
    background: green;
    padding: 4px;
    left: 0;
    color: white;
    white-space: nowrap;
    border-radius:3px;
    animation: fadeIn linear 0.15s;
}
@keyframes fadeIn {
  0% {opacity:0;}
  100% {opacity:1;}
} 
```

在这里小提琴：http: [//jsfiddle.net/L3paxb5g/](http://jsfiddle.net/L3paxb5g/)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-05-25T22:35:56.430

我知道这是一个老问题，但我找到了一个也适用于移动设备的 CSS 解决方案，它根本不使用标题，而且很容易实现，解释如下：

[https://www.w3schools.com/css/css_tooltip.asp](https://www.w3schools.com/css/css_tooltip.asp) 说明：

在移动设备上，使用触摸屏时，第一个输入充当 css 悬停，因此当您按下它时，它就像一个切换工具提示。

代码示例：

```
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 2px dotted #666;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 15em;
  background-color: #555;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  position: absolute;
  z-index: 1;
  bottom: 125%;
  left: 50%;
  margin-left: -8em;
  opacity: 0;
  transition: opacity 0.3s;
  padding: 0.5em;
}

.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #555 transparent transparent transparent;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}

<div class="tooltip">Hover over me
  <span class="tooltiptext">Tooltip text</span>
</div> 
```

# url-scheme - 当前位置不适用于 Apple Maps IOS 6

> ID：12539009
> 
> 赞同：13
> 
> 时间：2012-09-21T22:33:56.043
> 
> 标签：url-scheme, ios6-maps

在 IOS 6 之前，我使用此 URL 方案打开本地地图应用程序并查找从用户当前位置到我创建的地址的路线。

> [http://maps.google.com/maps?daddr=](http://maps.google.com/maps?daddr=) " + 地址 + "&saddr=当前+位置

这很好用，但是现在他们用 IOS 6 摆脱了谷歌地图，我们必须检查他们使用的是哪个 IOS 版本，然后如果他们使用的是 IOS 6.0 或更高版本，则将它们引用到新的苹果地图 url 方案。我们正在使用的新 url 方案是这样的......

> [http://maps.apple.com/maps?daddr=](http://maps.apple.com/maps?daddr=) " + 地址 + "&saddr=当前+位置

这是基于地图 url 方案的新文档，可在此处找到。

无论如何，我已经对其进行了很多测试，归结为新的苹果地图确实可以识别当前位置，就像谷歌地图一样。

有谁知道我如何解决这个问题？

请记住，我正在构建一个带有电话间隙的 html 应用程序，因此使用本机代码将起始地址设置为当前位置对我没有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T23:31:16.340

我有同样的问题。我还没有找到解决方案，但如果你离开了saddr

```
http://maps.apple.com/maps?daddr=" + address 
```

它只会询问他们从哪里开始，第一个选项是“当前位置”，因此当他们单击“当前位置”时，它将正确显示地图。

如果有人找到更好的解决方案，请发布它，因为我仍在寻找更好的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T20:20:49.620

你可以使用我的方法：

```
 <script type="text/javascript">

        var link = "maps:saddr=YPlat,YPlong&daddr=42.118599,-72.625122";
        navigator.geolocation.getCurrentPosition(showPosition);

        function showPosition(position)
        {

            link = link.replace("YPlat",position.coords.latitude);
            link = link.replace("YPlong",position.coords.longitude);

            window.location = link;
        } 
    </script> 
```

通过 iOS 5.1 和 iOS 6 确认

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-21T01:00:06.403

只需通过“当前位置”作为源地址：

```
http://maps.apple.com/maps?saddr=Current%20Location&daddr=Your_Address 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T05:30:24.847

[您可以使用由Keith Pitt](http://keithpitt.com/)创建的CLLocationManager 或其包装器[DKLocationManager](https://github.com/keithpitt/DKLocationManager)（在 github 上）获取当前位置的坐标。

获得坐标后，您可以使用以下代码示例。

```
+ (void) openDirectionFrom:CLLocation* currentLocation To:(NSString*) daddr {
    NSString* urlStr;
    NSString* saddr = @"Current+Location";

    if ([[UIDevice currentDevice] systemVersion] floatValue] >=6) {
        //iOS 6+, Should use map.apple.com. Current Location doesn't work in iOS 6 . Must provide the coordinate.
        if ((currentLocation.coordinate.latitude != kCLLocationCoordinate2DInvalid.latitude) && (currentLocation.coordinate.longitude != kCLLocationCoordinate2DInvalid.longitude)) {
            //Valid location.
            saddr = [NSString stringWithFormat:@"%f,%f", currentLocation.coordinate.latitude,currentLocation.coordinate.longitude];
            urlStr = [NSString stringWithFormat:@"http://maps.apple.com/maps?saddr=%@&daddr=%@", saddr, daddr];
        } else {
            //Invalid location. Location Service disabled.  
            urlStr = [NSString stringWithFormat:@"http://maps.apple.com/maps?daddr=%@", daddr];
        }
    } else {
        // < iOS 6\. Use maps.google.com
        urlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%@&daddr=%@", saddr, daddr];
    }

    [(UIApplicationWithEvents*)[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlStr]];

} 
```

# php - 新标签中的标题位置

> ID：12539011
> 
> 赞同：7
> 
> 时间：2012-09-21T22:34:16.950
> 
> 标签：php

> **可能重复：**
> [在新窗口中重定向](https://stackoverflow.com/questions/950518/redirect-in-a-new-window)

请不要介意这是一个愚蠢的问题，

是否可以在 php 中使用在新选项卡中打开一个窗口

```
 header(Location: 'blahblah'); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T22:36:16.513

不，这是不可能的。标头只会在当前窗口/选项卡中重定向当前页面。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-21T22:40:56.060

不，不可能使用 php，因为 php 是一种服务器端语言，而您想要的是客户端功能。所以你必须用一些javascript来做。

你绝对可以通过javascript尝试这样的事情

```
<script type="text/javascript" language="Javascript">window.open('http://www.example.com');</script> 
```

# coffeescript - 如何在 CollectionView 中显示 ArrayController 的内容

> ID：12539012
> 
> 赞同：0
> 
> 时间：2012-09-21T22:34:25.663
> 
> 标签：coffeescript, ember.js

我试图了解[Ember.CollectionView 的](http://emberjs.com/api/classes/Ember.CollectionView.html)工作原理，并且在 DOM 中显示[ArrayController](http://emberjs.com/api/classes/Ember.ArrayController.html)的内容时遇到了一个基本问题。这是[我的小 jsfiddle 实验](http://jsfiddle.net/arasbm/nevW2/53/)，你可以自己看看。这是咖啡脚本：

```
window.App = Ember.Application.create()
window.App.initialize()

App.Item = Em.View.create
  tagName:'li'

  willInsertElement: () ->
  console.log "I **WILL** indert the element", this.$()

  didInsertElement: () ->
    console.log "I **DID** insert the element", this.$()

  template: Ember.Handlebars.compile("~~ {{view.content.title}} ~~")

App.items = Em.ArrayController.create()

App.items.set('content',[
    Em.Object.create({title:"AN"}),
    Em.Object.create({title:"Epic"}),
    Em.Object.create({title:"View"})
  ])

App.epicView = Ember.CollectionView.create
  classNames: ['epic-view']
  contentBinding: 'App.items'
  itemViewClass: 'App.Item'

App.epicView.appendTo('body') 
```

正如您在该小提琴的输出中看到的那样，我无法弄清楚如何访问和显示列表中对象的标题。当我使用对它的调用将视图附加到正文时，`App.epicView.appendTo('body')`它似乎迭代了三个对象，但不打印任何内容。

任何想法我在这里想念什么？

ps：我使用的是**Ember 1.0pre**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:08:50.783

我会简单地做这样的事情：http: [//jsfiddle.net/Sly7/nevW2/67/](http://jsfiddle.net/Sly7/nevW2/67/)

声明您的视图（使用扩展）而不是实例化它们（使用创建）

# ios - ios 应用程序图标未显示并且名称丢失为什么？

> ID：12539015
> 
> 赞同：1
> 
> 时间：2012-09-21T22:34:39.230
> 
> 标签：ios

我的应用程序的图标和名称有一些问题，虽然我完成了我的应用程序，因为这些我无法发布它。它不是与代码相关的问题，因此我在不同的论坛上问过它，但没有人给我正确的答案，例如最后的希望我决定在这里问它。

1）我设法为我的应用程序放置了 57x57 像素的 png 图标，当我将它放在手机上时它还可以，但在 iTunes 中我的应用程序显示没有图标。我认为放置 114x144 像素的图标应该可以解决这个问题，但我做不到它。当我右键单击并在 57x57 中选择“选择文件”时，我可以将任何 png 放在那里，但是当我右键单击时，它在 114x114 上不可用，没有“选择文件”选项和其他选项。同样的问题也发生在启动图像中。

是因为我的 iTunes 中没有图标显示问题，还是我的应用程序没有它就可以工作？

在某些页面中，我看到人们谈论将所有 png 文件与信息文件一起放入根目录并自动制作，但我找不到任何关于它的教程。

2）我的第二个问题是关于名称。我的项目名称是 kdd2，但它当然不是我的应用程序名称 kdd2 是我一个月前给它的一个简单名称。当我打扰我的应用程序时，我更改名称并将其保存到我的桌面.在桌面上它显示的名称是我写的，但是当我把它放在 ıtunes 或 iPhone 中时，它的名称再次更改为 kdd2 我该如何解决？

请帮我解决这些问题，我只是找不到任何答案谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:50:26.013

**要更改应用名称：**

- 在 Xcode 的导航器中单击您的项目。

- 转到“构建设置”选项卡。

- 更改“包装”下的“产品名称”。

**设置图标：**

你必须右舔**边界**然后“选择文件”。不要右键单击“未指定图像”。

# c# - 如何将服务器端验证添加到第三方提供的 html 表单（发布方法）

> ID：12539018
> 
> 赞同：0
> 
> 时间：2012-09-21T22:35:28.617
> 
> 标签：c#, asp.net, forms

我有一个由第三方提供的表格，可以放在注册页面上。它工作正常，但看起来很容易受到机器人发送垃圾邮件的影响。我正在尝试添加验证码，但表单在我的验证触发之前发布。这是在 asp.net 网络表单 C# 4.0 上。

表格看起来像这样

```
<form method="post" name="upsideContactUsForm-1343676638998" action="https://3rdPartySite" id="form173" runat="server">
<input id="field0" value="" type="text" name="email" />
<!--  ..Other fields like first name, last name, etc -->

<input type="submit", value="submit"></input>

<script src="https://3rdPartySiteValidation.js" type="text/javascript"></script>
<script type="text/javascript">
    var field0 = new LiveValidation("field0", { validMessage: "", onlyOnBlur: true });
    field0.add(Validate.Presence, { failureMessage: "This field is required" });
    field0.add(Validate.Email, { failureMessage: "Please enter a valid email address" }); 
    //..Validation rules for the fields
</script>
</form> 
```

我用 asp:button 替换了提交按钮，并添加了带有警告标签的验证码。我正在检查这样的服务器端，看看我是否可以阻止页面触发但没有运气。

```
protected void Submit_Click(object sender, EventArgs e) {
if (Page.IsValid)
{
    CaptchaMsg.Text = "Your response is correct!";
}
else
{
    CaptchaMsg.Text = "Your response is incorrect!";

} 
```

}

单击验证码中没有任何内容的提交按钮使表单发布，我被重定向到表单操作中设置的页面。这是我在发布表格时预期会发生的事情，但我不确定要采取什么方向来解决这个问题。我可以添加一个它们最初被重定向到的传递页面，但这似乎很草率。我还研究了用 ajax 回答我的验证码，但如果禁用了 javascript，这将不起作用。

有什么建议么？

# javascript - JRenderer 和 JQuery 移动列表视图丢失样式

> ID：12539020
> 
> 赞同：1
> 
> 时间：2012-09-21T22:35:32.760
> 
> 标签：javascript, jquery, css, jquery-mobile

我正在做一个非常典型的 JSON 请求并填充一个 JRendere 模板。它很好用，但是当我将 li 包装在 href 中时，它会丢失所有格式。

HTML 代码：

```
<script id="recipeTemplate" type="text/x-jquery-tmpl"> 

                {{for Content}}
                <a href='searchResults.html' data-transition='slide'>
                <li class="ui-li ui-li-static ui-body-c" style='height: 150px; border: 0px; margin-left: 20px; margin-right: 20px;'>
                        <img src="{{:ImageURL}}" style='max-height: 125px; max-width: 125px;  position: absolute;'/>
                         <div style='margin-left: 50px;'>
                             <h3  style="white-space : normal;">{{:Title}}</h3>
                             <h3  style="white-space : normal;">Ratings:</h3>
                             <p style="white-space : normal;">{{:Description}}</p>
                        </div>

                </li>
                </a>
                {{/for}}
        </script> 
```

JS如下：

```
$("#search").focusout(function()
{
    var searchTerm = $("#search").val();
    $.getJSON("http://website?searchterm=" + searchTerm + "&callback=?",
    function (data)
    {
        var htmlString = $("#recipeTemplate").render( data );
        $('#results').html(htmlString).listview('refresh');
    });
}); 
```

![错误](../Images/e2c46b5ecb1ac0cca955205a020c2051.png)

它看起来如上。为什么它会丢失 CSS？

谢谢，格雷姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:50:45.537

> 它很好用，但是当我将 li 包装在 href 中时，它会丢失所有格式。

首先，在标签`<li>`内包含一个`<a>`无效的 HTML。

您的 CSS 很可能依赖于特定的顺序，以一个元素为目标，然后可能是另一个元素，该元素必须在该元素内具有特定的类，依此类推。

通过`<a>`在元素周围添加，`<li>`您现在已经更改了预期的顺序，并且您的 CSS 不再能够匹配选择器。

将您的`<a>`标签放在in 中`<li>`可以保持 CSS 完整，同时是有效的 HTML，好吧，假设您在最终 HTML 中具有`ul`或`ol`围绕 's 集。`li`

检查你的 CSS 并确保你没有弄乱嵌套元素或类的预期顺序。然后要么屁股，`<a>`所以它不会破坏 CSS 或更新 CSS 以匹配你的新层次结构。

# html - 由段落旁边的图像组成的居中块

> ID：12539028
> 
> 赞同：3
> 
> 时间：2012-09-21T22:36:58.870
> 
> 标签：html, css, image, text, centering

这是我在这里的第一个问题，虽然我在阅读其他解决方案的任何领域都解决了许多问题，但这次我没有运气，我一直在尝试和谷歌搜索。

我正在使用一些我不是很熟练的东西，CSS。我想将**一个由图像组成的框居中，旁边有一段文本（两行文本 - 不再有）**，文本与图像的左侧对齐。

|------------------------------------ 现在 ------------ ----------------------|

```
|img|BIG TITLE
|img|smaller subtext 
```

|----------------------------- <-- 居中----> ------------ ------------------|

```
 |img|BIG TITLE
                   |img|smaller subtext 
```

我试图将所有内容都放在一个 div 中，但由于 DIV 的宽度取决于文本的长度，而且它会根据页面的标题而变化，因此我无法设置固定宽度。

这是我的 HTML：

```
<div class="container">

<div class="row">
    <div class="header">
        <p class="small">
<img class="ok" src="ok.png">
<span class="bigtitle">TITLE</span>
<br><span style="text-align:left">subtext</span></p>
</div>
</div> 
```

这是我的CSS：

```
.row .header {
width: 100%;
}

img.ok {
top: 15px;
}

p.small {
color: #000000;
font: bold 12px arial,helvetica,sanserif;
display: block;
}

span.bigtitle {
color: #679819;
text-transform:uppercase;
font: bold 42px arial,helvetica,sanserif;
}

    text-align: center; 
```

然后我尝试了：

*   将所有内容放在一个段落中并 text-align: center;
*   将 Margin 0px auto 设置为段落；
*   将所有内容放在一个 div 中并尝试居中，但我不知道它的宽度
*   谷歌搜索并在这里搜索解决方案......

没有任何效果，我无法将块居中，请帮助:-)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:08:16.103

您可以像这样浮动和相对定位容器：

```
.container {
    overflow: hidden;
}

.row { 
    position: relative;
    left: 50%;
    float: left;    
}

.header {
    position: relative;
    left: -50%;
    float: left;    
} 
```

如果容器 div 中的内容不仅仅是这个居中位，则可以将居中位包装在另一个 div 中，并将溢出：隐藏规则移出 .container 并移至该 div。

# c++ - 在 C++ 中读取索引调色板图像

> ID：12539032
> 
> 赞同：0
> 
> 时间：2012-09-21T22:37:52.230
> 
> 标签：c++, image, opencv

我的平台是Windows。我没想到在 C++ 中读取索引调色板图像会如此困难。如果您不熟悉它，它是单通道图像，但用称为调色板的 256 种索引颜色表示其像素颜色。

我使用的是 OpenCV，但它的 imread 只是将文件转换为 3 通道图像，因此我无法将其保存回索引调色板图像或将其与另一个索引调色板图像进行比较。

我尝试使用位图，但由于某种原因，它没有读取正确的像素值。

所以现在，我正在寻找一个灯光库或代码来从索引调色板文件中读取像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:18:48.273

使用OpenCV从真实相机读取或写入图像会丢失和改变图像信息，所以我更喜欢使用gdi+，它在处理图像格式问题方面更强大，可以解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:58:36.657

正如对问题的评论所示，我决定采用两种方法，用于非索引调色板图像的 OpenCV 和用于索引调色板图像的位图 (GDI+)。现在一切都很完美。

# archive - 在 xcode 4.5 中归档 iOS 项目时遇到问题。收到有关缺少 libZXingWidget.a 文件的错误

> ID：12539035
> 
> 赞同：0
> 
> 时间：2012-09-21T22:38:14.270
> 
> 标签：archive, zxing, ios6, xcode4.5

我已经在这里待了几个小时，这让我发疯了。

所以我的项目使用ZXing进行二维码扫描。但我最近将我的 xcode 更新为 4.5。当我这样做时得到了这个错误：

```
Incompatible pointer types sending 'Class' (aka 'Class *') to parameter of type 'id<NSCopying>' 
```

我在谷歌上搜索，结果发现它是[固定](http://code.google.com/p/zxing/issues/detail?id=1290&can=1&q=ios%206&colspec=ID%20Type%20Status%20Priority%20Owner%20Summary)的，我所要做的就是检查修订版，我很好。

所以我这样做了，检查了修订版 2315 并从我的项目中删除了旧的 ZXing 项目，并再次通过自述文件中的步骤将新版本的 ZXing 再次添加到我的项目中。

我遵循了所有步骤，一切顺利，我的项目在我的 ipad 和 iphone 模拟器上构建和运行。

但是当我尝试归档我的项目时问题就来了。

我不断得到

```
clang: error: no such file or directory: '/Users/username/Library/Developer/Xcode/DerivedData/project-name-gbqfhrszrkbmlkesfuzmwreignnu/Build/Products/Release-iphoneos/libZXingWidget.a' 
```

然后我阅读了一些类似问题的stackoverflow答案，有人说DerivedData目录中可能有缓存版本..所以我删除了那里的所有内容，我在xcode中清理了我的项目，并清除了/var/folders/中的文件.

完成所有这些后，我仍然收到错误=（我尝试检查最新的 ZXing 代码和同样的问题..

任何指针将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:03:04.417

我想我已经找到了问题所在。

稍微挖掘了一下，我发现 libZXingWidget.a 文件是在 Debug-iphonesos/ 目录中创建的，而不是在 Release-iphoneos/ 目录中创建的。

所以我去了xcode并决定“仅构建活动架构>发布为YES。之后我做了一个存档并且它工作了！但三思而后行，这可能不是一个好主意，其他架构不会被构建。所以我把它重新打开。当然，我无法再次存档。

所以我找到的解决方案是使我的项目中“构建设置”选项卡下的“架构”和“有效架构”与 ZXingWidget 项目中的“架构”和“有效架构”相匹配。

之后，一切似乎又恢复了。我可以在我的 ipad、各种模拟器和存档上构建和运行！

希望这对某人有帮助！

# java - Eclipse切换工作区导致创建Java虚拟机失败

> ID：12539037
> 
> 赞同：1
> 
> 时间：2012-09-21T22:38:43.353
> 
> 标签：java, eclipse, macos

我正在使用 Eclipse juno 和 osx 10.8 。通过在这里做技巧，我有 java 7 和 eclipse 设置： [Eclipse 4.2、Mac OS X 10.8 (ML) 和 Java 6](https://stackoverflow.com/questions/11919004/eclipse-4-2-mac-os-x-10-8-ml-and-java-6)

```
sudo mkdir /System/Library/Java/JavaVirtualMachines
sudo su ln -s /Library/Java/JavaVirtualMachines/1.7.0.jdk /System/Library/Java/JavaVirtualMachines/1.6.0.jdk 
```

当我去切换工作区时，我得到“无法创建 Java 虚拟机”。警报。然后我可以在我选择的不同工作区中以正常方式启动 Eclipse。在命令行上我看到：

```
./eclipse -clean
 No binding table for org.eclipse.ui.contexts.dialog
 requested Java version ((null)) not available. Using Java at "" instead.
 JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
 JavaVM FATAL: Failed to load the jvm library. 
```

知道如何使切换工作区不会引发错误并正常执行但仍使用 java 7？

我尝试添加到 info.plist：

```
<string>-vm</string>    
<string>/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java</string> 
```

[如这里的堆栈溢出所示](https://stackoverflow.com/questions/6650547/macosx-snow-leopard-and-eclipse-error-starting-eclipse-no-java-virtual-machine)

但我仍然得到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:50:52.740

它现在似乎起作用了。我不确定我做了什么让它工作。也许重新启动计算机，但我认为一旦我将项目放入工作区，它就会消失。

# algorithm - 递归算法检查字符串是否具有平衡括号

> ID：12539039
> 
> 赞同：3
> 
> 时间：2012-09-21T22:38:50.840
> 
> 标签：algorithm, data-structures, recursion, solution

> **可能重复：**
> [基本递归，检查平衡括号](https://stackoverflow.com/questions/2711032/basic-recursion-check-balanced-parenthesis)

我最近在算法设计手册中遇到了这个问题，即使基于堆栈的算法非常简单，我想为这个问题编写一个递归算法，但是作为递归中的菜鸟，我无法想出太多，所以可以有人帮我解决这个问题吗？

PS我只看到了关于这个问题的其他帖子，但它们效率不高，而且那些不是很解释。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T06:30:24.957

**背景：**查找括号是否平衡的问题实际上是一个决策问题，描述它的语言^(1是一种)[上下文无关的语言](http://en.wikipedia.org/wiki/Context-free_language)。
上下文无关语法可以使用带有堆栈^(2的自动机进行解析)

因此，可以对这个问题实现以下**迭代解决方案：**

```
iterative(str):
  stack <- empty stack
  for each char in str:
     if char is open paranthesis: //push the paranhtesis to stack
         stack.push(char)
     else if char is close parantesis: //if close paranthesis - check if it is closing an open parenthesis
         if stack.head() == matchingParanthesis(char):
            stack.pop()
         else: //if the closing parenthesis do not close anything previously opened, return false
             return false 
   //end of loop - check if all opened parenthesis were closed:
   return stack.isEmpty() 
```

这个想法是表示打开范围的括号位于堆栈的头部，并且每个右括号 - 您可以通过查看堆栈的头部来验证它是否正在关闭适当的打开括号。

注意：很容易看出，对于单个类型的括号，我们可以使用整数来模拟堆栈（因为我们实际上只需要计算数字，而不关心括号的类型）。

此外，由于循环+堆栈算法实际上与递归非常相似，我们可以推导出以下**递归算法**：

```
checkValidty(str,currentParenthesis,currentIndex): 
//currentIndex is a common variable, changed by reference to affect all levels of recursion!
   while (currentIndex < str.size()):
      char <- str[currentIndex]
      currentIndex <- currentIndex + 1
      if char is open paranthesis: 
        //if the recursive call is unseccesfull - end the check, the answer is no
         if !checkValidity(str,char,currentIndex): 
            return false
      else if char is close parantesis: 
         if currentParenthesis == matchingParanthesis(char):
            return true
         else: //if the closing parenthesis do not close anything previously opened, return false
             return false 
   //end of loop - check if all opened parenthesis were closed:
   return currentParenthesis == nil 
```

调用`checkValidty(str,nil,0)`-`str`验证字符串在哪里。

不难看出迭代和递归算法其实是一样的，第二个我们用调用栈和变量`lastParenthesis`作为栈头。

* * *

(1) 语言是问题所接受的所有词。例如`(w)`是在语言中，而`)w(`不是。
(2) 确切地说：有些语法需要一个非确定性自动机和一个堆栈，但这有点理论上的东西，不是这里的问题。

# php - 简单的 PHP 数学 = 高度

> ID：12539040
> 
> 赞同：0
> 
> 时间：2012-09-21T22:38:52.900
> 
> 标签：php, math

我有点坚持这个，它应该很简单，但我的大脑无法解决它（这是星期五......哈哈）

我有一个温度计，最高代表 1,000,000 美元。它高 375 像素。

我正在运行一个数据库查询来获取用户提交的金额（1 美元到 200 美元之间）。

在这个数学上，每像素上移 1 个像素需要 2,666.66 美元 ---

`retrieve_amount();`是我的数据库函数，它可以获取所有金额 - 这很简单。

```
$fill_query = retrieve_amount();
$fill = 0;
$total = 0;

while($fill_query->is_valid() ) : $fill_query->amount();
    $amount = get_valid_amount($input, 'amount');
    $total = $total + $amount;
endwhile;

$finaltotal = $total; // THIS is the line that grabs the final total from above. Should work?
$fillheight = $SOMETHING +/-* $SOMETHING; // this is the line that i'm less sure of how to get my result 
```

可能是我数学不太好，但我的问题是

```
$finaltotal = $total 
```

应该可以接收从数据库查询中检索到的总金额，对吗？

更重要的是，我如何将其转换为我需要的像素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T22:40:58.043

```
$maxPixels = 375;
$maxAmount = 1000000;
$currentAmount = 1234567;

$currentPixels = round(($currentAmount / $maxAmount) * $maxPixels); 
```

这基本上就像计算百分比一样。除了 100% 之外，您的最大值现在是 375 像素。

# web-services - JWSC 蚂蚁任务与 元素的 explode 属性设置为 true

> ID：12539042
> 
> 赞同：1
> 
> 时间：2012-09-21T22:39:27.280
> 
> 标签：web-services, ant, weblogic, jax-rpc

我正在使用 WebLogic JWSC ant 任务从现有的 wsdl 生成 WebLogic Web 服务工件。JWSC 生成所有需要的文件并将它们归档在一个 ear 文件中。

由于我不希望 JWSC 任务创建新的 application.xml，因此我通过指向现有 application.xml 的位置来使用 JWSC 任务的 applicationXml 属性。然后 JWSC 任务通过成功添加新`<module>`标签来更新 application.xml。在模块标签内有`<web-uri>`标签。`web-uri`定义 WAR 文件的位置。到目前为止，一切都很好。

如果我将explode 属性设置为true，则该任务不会创建ear 文件，而是将所有必需的文件放在一个目录中。JWSC 任务也更新了指定的 application.xml，但是这一次它将扩展目录的名称放在没有 .war 扩展名的 web-uri 标记中，尽管在这里放一个非 war 文件名是错误的。

正确的格式应该是这样的

```
<module>
  <web>
    <web-uri>petStore.war</web-uri>
    <context-root>store</context-root>
  </web>
</module> 
```

如果您没有意识到这种情况，WebLogic 将找不到指定的 war 文件（没有 .war 扩展名）

有谁知道为什么 JWSC 使用错误的 web-uri 更新 application.xml ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T15:07:06.307

我们可以将 application.xml 放在某个地方，当我们创建 app.xml 时，我们将在`property appxml = "${path-original-application.xml}"`下面给出片段

```
<target name="dist-ear" depends="clean-build-webservices">
    <delete file="${build.dir}/META-INF/application.xml"/>
    <copy todir="${build.dir}/META-INF"  overwrite="true">
        <fileset dir="${webservices.resource.dir}">
            <include name="weblogic-application.xml"/>
        </fileset>
    </copy>
    <ear destfile="${dist.dir}/${webservice.name}.ear" appxml="${viwebservices.appxml.location}">
        <fileset dir="${build.dir}" includes="*.war"/>
        <zipfileset dir="${webservices.src.dir}/jdbc" prefix="jdbc"/>
        <metainf dir="${build.dir}/META-INF"/>
    </ear>
</target> 
```

# jquery - 导航到 jQuery 中的 DOM 元素并分配给变量

> ID：12539043
> 
> 赞同：0
> 
> 时间：2012-09-21T22:39:27.507
> 
> 标签：jquery, dom, navigation

我正在开发一个 WordPress 主题并将[Fancybox 灯箱插件](http://www.fancyapps.com/fancybox/#news)构建到我的代码中。这工作正常，除了一个小问题。

但我会先给你看代码，这样更容易解释。

```
<dl class='gallery-item'>
    <dt class='gallery-icon'>
        <a href='image.jpg' title='something'><img width="150" height="150" src="image.jpg" class="attachment-thumbnail" title="something" /></a>
    </dt>
    <dd class='wp-caption-text gallery-caption'>
        Description, that should be displayed as title...
    </dd>
</dl> 
```

这是 WordPress 标准画廊的一个画廊项目的输出。我想要做的是将 dd-tags 中的描述附加到灯箱图像标题（此时正在显示 a-tag 的标题，这是一个字母数字字符串 - 不是很用户友好）。

为了给灯箱标题分配一些东西，必须在灯箱的初始化函数中调用以下 javascript。（此代码实际上将第一个*.wp-caption-text*元素的内容分配给每个图像标题。）

```
$(document).ready(function(){
    $("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').fancybox({

    beforeLoad: function(){
        var caption = $('.wp-caption-text').html();
        this.title = caption;
        }
    });
}); 
```

上面的代码按预期工作，但这意味着只有*wp-caption-text*类的第一个元素将分配给灯箱和每个图像。但我只想获取已在灯箱中打开的图像的相应*wp-caption-text 。*所以我将不得不使用类似*$(this)*的东西，然后导航到相应的*wp-caption-text*并将文本分配给*标题*变量。

我正在努力解决最后一点，希望你能帮助我。这应该不会太难，但我目前没有任何线索。

谢谢
卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:45:25.437

尝试这个

```
var caption =  $(this).parent().parent().find('.wp-caption-text').html(); 
```

这是如果**这** 对应于当前锚点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:59:02.367

如果标记发生变化，这将是稳定的。如果这不起作用，则意味着这`this`不是我们期望的那样，我们需要弄清楚它是什么。另请注意，我使用 `.text()`的是`.html()`. 如果您决定在其中添加一些标记`.wp-capition-text` （例如，图标或其他东西），这仍然只是抓取文本。

```
var caption = $(this.element).closest('.gallery-item').find('.wp-caption-text').text(); 
```

# macos - 正确使用 SMJobBless 进行单次操作？

> ID：12539044
> 
> 赞同：0
> 
> 时间：2012-09-21T22:39:38.433
> 
> 标签：macos, cocoa, security, service-management

我正在运行一个小工具来运行一个有开始和结束的动作（它是一个安装程序）。在安装程序运行后，我不想在文件系统（或启动配置）周围留下任何东西。如果它再次运行，它可以重新祝福等。

对于只运行一次的作业，这是正确的方法吗？

（如果你知识渊博，看看[11557026](https://stackoverflow.com/questions/11557026/smjobremove-succeeds-but-plist-and-helper-tool-not-deleted)，它需要一个答案！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:08:54.047

答案是否定的，SMJobSubmit 是正确的使用方法，根据这个问题：[可以使用 SMJobSubmit() 来执行由 SMJobBless 安装的特权助手吗？](https://stackoverflow.com/questions/11699992/can-smjobsubmit-be-used-to-execute-a-privileged-helper-installed-by-smjobbless/11822408#comment16953899_11822408)

# youtube - iOS6 使用 webView 播放视频（适用于 iOS5）

> ID：12539046
> 
> 赞同：3
> 
> 时间：2012-09-21T22:40:05.503
> 
> 标签：youtube, ios6

我曾经使用带有以下代码的 uiwebviews 在我的 iOS 应用程序中播放视频：

```
NSString *embedHTML = @"\
<html><head>\
<style type=\"text/css\">\
body {\
background-color: transparent;\
color: white;\
}\
</style>\
</head><body style=\"margin:0\">\
<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
width=\"%0.0f\" height=\"%0.0f\"></embed>\
</body></html>";

NSString *html = [NSString stringWithFormat:embedHTML, urlToOpen, frame.size.width, frame.size.height];
self.videoView = [[UIWebView alloc] initWithFrame:frame];
[videoView loadHTMLString:html baseURL:nil];
[self.videoView setDelegate:self];
[self.view addSubview:videoView];
[videoView release]; 
```

在 iOS6 上它不起作用。

有没有人找到任何解决方案来播放用 iOS6 编译的 youtube 视频？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:34:04.083

好的，这就是答案。

使用[http://www.youtube.com/v/XXXXXXX](http://www.youtube.com/v/XXXXXXX)

而不是[http://www.youtube.com/watch?v=XXXXXXX](http://www.youtube.com/watch?v=XXXXXXX)。

在这里找到它：

[iOS - UIWebView 由于解析错误而无法工作](https://stackoverflow.com/questions/12399241/ios-uiwebview-not-working-due-to-parsing-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:48:57.707

iOS6 中带有 Webviews 的 Youtube 需要在 WebView 中启用 cookie。为此，您需要在 AppDelegate 中添加以下指令：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
      [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways];
      ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T12:16:42.073

我在模拟器中试过这个

[_webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@" [https://www.youtube.com/embed/b22cH2sfVcc](https://www.youtube.com/embed/b22cH2sfVcc) "]]];

它有效

直接将 youtube 视频的嵌入 src 提供到 web 视图，它就可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T17:46:17.153

我刚刚使用 iOS6 Simulator 和 iOS5 设备进行了测试，如果您使用新的嵌入代码 (iframe)，那么它可以工作。

```
<iframe class="youtube-player" type="text/html" width="320" height="200" src="http://www.youtube.com/embed/VIDEOID" frameborder="0"></iframe> 
```

唯一的缺点是 iframe 包含大量下载的 dom 元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:05:58.660

用以下代码替换您的代码

```
 NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <iframe title=\"YouTube Video\" class=\"youtube-player\" type=\"text/html\"\
    width=\"%0.0f\" height=\"%0.0f\" src=\"%@\"\
    frameborder=\"0\" allowFullScreen ></iframe>";
    NSString *urlToOpen = @"http://www.youtube.com/embed/u1zgFlCw8Aw?autoplay=1";
    NSString *html = [NSString stringWithFormat:embedHTML, urlToOpen, frame.size.width,     frame.size.height];
    self.videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:html baseURL:nil];
    [self.videoView setDelegate:self];
    [self.view addSubview:videoView];
    [videoView release]; 
```

由于 Youtube 已经放弃了 webview 视频并引入了 iframe，所以你必须在 ios 6 上使用这个 html，而在 ios 5 上使用旧的。请记住，您的 youtube 视频 url 链接应该类似于 [http://www.youtube.com/embed/video_Id?autoplay=1](http://www.youtube.com/embed/video_Id?autoplay=1) ，您可以在其中将 video_Id 替换为您自己的视频 ID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T16:27:32.817

如果您在 Phonegap 中使用嵌入，您已在 Phonegap 设置中将 OpenAllWhitelistURLsInWebView 设置为 YES

# google-app-engine - AppEngine 重定向

> ID：12539049
> 
> 赞同：0
> 
> 时间：2012-09-21T22:40:22.113
> 
> 标签：google-app-engine

我正在从本地 appengine 实例运行一些 javascript 代码并尝试使用 php 代理来执行一些 ajax 调用。js 调用如下所示：

```
url = "proxy.php?url=http://www.example.com?format=json";
xmlhttp.open("GET",url,true);
xmlhttp.send(); 
```

在 appengine 配置中，我无法让它遵循 php 代理的路径。我有这个代码：

```
class Proxy(Page):
def get(self):
self.redirect('/proxy.php', {}) 
```

问题是查询参数没有通过重定向传递。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:10:04.997

抱歉，我不清楚您要做什么。您是否尝试将字符串传递给请求处理程序以重定向到另一个域上的 PHP 脚本？

```
class MyRequestHandler(webapp.RequestHandler):
    def get(self, url):
      self.redirect('http://somedomain.com/proxy.php?url=%s' % url)

application = webapp.WSGIApplication([('/redirect_to/(.*)', MyRequestHandler)]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T01:23:17.483

关闭，因为我意识到 appengine 无法运行 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T17:47:43.233

App Engine 可以运行 PHP ；它只是最近的，所以只有少数模块可以运行。（对不起，迟到的答案：（） [https://cloud.google.com/appengine/docs/php/](https://cloud.google.com/appengine/docs/php/)

# mime-types - 是否有“默认”MIME 类型？

> ID：12539058
> 
> 赞同：130
> 
> 时间：2012-09-21T22:41:09.200
> 
> 标签：mime-types, mime

有什么可以被认为是“默认”的 mimetype 吗？

我见过“未知/未知”和“应用程序/二进制”。但是，当没有找到其他 MIME 类型时，是否有默认恢复？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-09-24T07:59:40.180

最不具体的官方 MIME 类型是`application/octet-stream`. 没有任何其他信息，它说“这是一堆字节，希望你端有一个应用程序知道如何处理它们”。有时有一个文件名可以帮助向接收者传达如何处理数据。

“未知”并没有真正添加任何内容，除了混淆不支持随机非官方 MIME 类型的客户。同上`application/binary`；这只是重述“八位字节流”的非标准方式。

这是“*如果我找不到能够充分描述我的数据的现有内容类型，我可以**在标题中放入什么？”的答案。`Content-Type:`*这就是我对这个问题的解释。建议重复的[未知文件类型 MIME？](https://stackoverflow.com/questions/1176022/unknown-file-type-mime)有一个冗长的答案，讨论*“如果我没有输入有效的`Content-Type:`标题，我的数据将如何解释？”* 特别是在 HTTP 上下文中；`Content-Type:`答案是特定于协议的（例如，在电子邮件中，不包含此标头的 MIME 正文部分的默认值是`text/plain; charset="us-ascii"`）。

# ant - sshexec 命令设置

> ID：12539062
> 
> 赞同：0
> 
> 时间：2012-09-21T22:41:43.533
> 
> 标签：ant, ssh

我需要从本地机器运行 ant 脚本，该脚本将在远程机器上调用 ant 执行。

所以在我的本地 ant 文件中：

```
<target name="test">
     <sshexec host="${host}" username="${user}"
              password="${pwd}"  trust="yes"
              commandResource="(cd F:\execution; ant -f build.xml run)"/>
</target> 
```

在远程机器上，我有 build.xml`，其中包含

```
<target name="run">
    <mkdir dir ="F:\Testfolder"/>
</target> 
```

当我执行 loca ant 脚本时，出现以下错误：

```
java.io.FileNotFoundException: (cd F:\execution; ant -f build.xml run) 
(The filename, directory name, or volume label syntax is incorrect) 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T03:11:07.123

我们将名为“remote-build.xml”的构建文件部署到`/root/project/remote-build.xml`远程机器上的路径，然后我们使用

```
<sshexec host="${host}"
    username="${user}"
    password="${pwd}"
    trust="yes"
    command="ant -f /root/project/remote-build.xml the-targets-to-execute" /> 
```

执行目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T06:07:40.657

您可以在远程机器上创建一个文件（ F:\execution\runmanycommands.sh 并执行该文件。从站点

> 使用不带密码的密钥身份验证从远程计算机上的命令资源（文件）运行一组命令

`commandResource` [期望](http://ant.apache.org/manual/Tasks/sshexec.html)单个资源文件执行。'(cd F:\execution; ant -f build.xml run)' 不是资源。

（我不确定你的总体目标。看看数字问题，我猜你需要持续集成解决方案——应该检查[jenkins](http://jenkins-ci.org/)的许多插件）

（顺便说一句，你可以直接用 ant -f 全部蚂蚁，避免需要 cd）

# linux - 通过域名访问站点（linux）

> ID：12539066
> 
> 赞同：0
> 
> 时间：2012-09-21T22:42:30.337
> 
> 标签：linux

我在 Hostgator 上有一个 VPS 服务器，它是一个半托管服务器，这意味着：不包括虚拟主机控制面板（cPanel 或 Plesk）的虚拟专用服务器，所以我在 Putty 工作。

我可以通过在浏览器窗口中输入 IP 地址来访问我在服务器上的网站，但不能通过域名。有谁知道我需要编辑哪个文件以便可以通过名称解析该站点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:48:16.260

如果您喜欢为您设置此“可见性”，请编辑 \windows\system32\drivers\etc\hosts 文件。否则，您必须联系您的 ISP 为该 IP 设置 DNS 记录。

PS这个问题在stackoverflow上是题外话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:51:57.737

该文件是

```
 /etc/apache2/sites-available/default 
```

> 要创建新站点：
> 
> 复制默认网站作为起点。sudo cp /etc/apache2/sites-available/default /etc/apache2/sites-available/mysite
> 
> 在命令行的文本编辑器“sudo nano”或“gksudo gedit”中编辑新的配置文件，例如：gksudo gedit /etc/apache2/sites-available/mysite
> 
> 更改 DocumentRoot 以指向新位置。例如，/home/user/public_html/
> 
> 更改目录指令，替换为
> 
> 您还可以为每个站点设置单独的日志。为此，请更改 ErrorLog 和 CustomLog 指令。这是可选的，但如果您有许多站点，则很方便 保存文件

查看有关[配置 LAMP 服务器的网站](https://help.ubuntu.com/community/ApacheMySQLPHP)

# php - php数组关键字计数器

> ID：12539068
> 
> 赞同：0
> 
> 时间：2012-09-21T22:42:35.577
> 
> 标签：php, arrays, counter

我正在将图像文件信息推送到数组中。它非常简单，除了关键字有时也是一个数组。这对我现在正在做的事情很有用。这是我的数组的示例

```
$list[]=array(filename=>$file,width=>$w,height=>$h,caption=>$iptc["2#120"],keywords=>$iptc["2#025"]); 
```

我可以使用这个数组来输出 javascript 幻灯片放映所需的 html。

```
if($handle = opendir($dirname)) { 
  while(false !== ($file = readdir($handle))){ 
    if(eregi($pattern, $file)){ 
      //if this file is a valid image 
      $path = $dirname . "" . $file ; 
      $path2 = $dirname ."JPEG/" . $file ; 
      $size = getimagesize($path, $info); 
      $w = $size[0]; $h = $size[1]; 
      $iptc = iptcparse($info['APP13']); 

      if(in_array($key,$iptc["2#025"])){
        $list[]=array(
          filename=>$file,
          width=>$w,
          height=>$h,
          caption=>$iptc["2#120"],
          keyw‌​ords=>$iptc["2#025"]
        ); 
      } 
    } 
  } 
  closedir($handle); } 
```

我希望能够在数组中有另一个变量，当添加每个唯一关键字时，它会计数一个数字。这将允许我直接进入幻灯片的中间，因为我使用的 js 幻灯片的 js 插件只有在被数字引用时才具有直接链接

我想我需要创建一个包含所有关键字的唯一数组，然后使用某种复杂的 if 语句来计算每个唯一变量......

但是我不知道该怎么做

请帮忙

谢谢

杰里米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:57:20.707

我不确定我是否了解您要查找的内容，但听起来像：

```
while(loop_conditions){
    $list[]=array(filename=>$file,width=>$w,height=>$h,caption=>$iptc["2#120"],keywords=>$iptc["2#025"]);
    foreach($iptc["2#025"] as $keyword){
        $list_map[$keyword]++;
    }
} 
```

# jquery-ui - jquery.ui.touch.punch.js 脚本阻止了触摸设备上的输入功能

> ID：12539072
> 
> 赞同：18
> 
> 时间：2012-09-21T22:43:20.227
> 
> 标签：jquery-ui, input, touch

我花了一点时间，但我发现我无法点击我的输入，因为我使用 touch.punch 脚本在触摸设备上启用 jquery UI 拖动功能。熟悉此脚本的任何人都知道为什么会这样吗？表单实际上位于父对象的树的下方。有谁知道我可以覆盖或强制选择的方法？我现在将尝试绑定将焦点集中在输入上的事件，但也许这里有人有一些见识？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-12T23:05:33.110

JEdi​​table + jQuery UI 可排序 + jquery.ui.touch-punch

我花了一整天的时间解决这个问题，我终于找到了解决方案。该解决方案与kidwon的答案非常相似。但是，我使用的是 jeditable，它可以动态创建没有类名的输入字段。所以我使用了这个条件语句而不是检查类名：

```
//Check if element is an input or a textarea
if ($(touch.target).is("input") || $(touch.target).is("textarea")) {
  event.stopPropagation();
} else {
  event.preventDefault();
} 
```

我认为这是一个更好的解决方案，因为它总是对任何输入或文本区域字段使用本机功能。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-21T22:53:03.197

对于使用非常方便的 touch.punch hack 可能会遇到类似情况的任何人，只需将焦点强制放在单击事件上就可以了！

```
$('.input').bind('click', function(){
    $(this).focus();
}); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-06T00:09:58.660

伙计们，这里的其他两个答案对我不起作用，但 Danwilliger 的解决方案有效；但是，从他的回答中不清楚如何在 Touch Punch JS 文件中进行设置。对于未来的答案寻求者，这里是做什么。同样，这是 Danwilliger 的解决方案——我只是澄清一下。

在 jquery.ui.touch-punch.js 中更改此部分（大约在第 30 行）：

```
function simulateMouseEvent (event, simulatedType) {

// Ignore multi-touch events
if (event.originalEvent.touches.length > 1) {
  return;
}

event.preventDefault();

var touch = event.originalEvent.changedTouches[0],
    simulatedEvent = document.createEvent('MouseEvents'); 
```

对此：

```
function simulateMouseEvent (event, simulatedType) {

// Ignore multi-touch events
if (event.originalEvent.touches.length > 1) {
  return;
}
var touch = event.originalEvent.changedTouches[0],
    simulatedEvent = document.createEvent('MouseEvents');

//Check if element is an input or a textarea
if ($(touch.target).is("input") || $(touch.target).is("textarea")) {
    event.stopPropagation();
} else {
    event.preventDefault();
} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-14T11:46:52.730

好的，如果您的`textfield`任何 HTML 元素没有聚焦、滚动、选择单词、在文本周围移动文本光标以及可能出现的任何不同情况，那么这是另一个解决方案，那么您可以覆盖**jquery.ui.touch.punch.js**脚本。我假设您的元素不是可拖动的元素，但可能是它的子元素，就像我的情况一样。

在您的 html 元素上放置一个类，例如`class="useDefault"`. 然后转到脚本文件并找到该部分：

```
...
function simulateMouseEvent (event, simulatedType) {

    // Ignore multi-touch events
    if (event.originalEvent.touches.length > 1) {
      return;
    }

    event.preventDefault();

    var touch = event.originalEvent.changedTouches[0],
        simulatedEvent = document.createEvent('MouseEvents');
.... 
```

正如您可能看到的`event.preventDefault();`，确保**jquery.ui.touch.punch.js** 覆盖浏览器的默认行为。为了防止我们的特定类节点出现这种情况，请进行以下修改：

```
if (event.originalEvent.touches.length > 1) {
  return;
}
var touch = event.originalEvent.changedTouches[0],
  simulatedEvent = document.createEvent('MouseEvents');
//As you can see here is your class element check
if (touch.target.className === "useDefault") {
  event.stopPropagation();
} else {
  event.preventDefault();
} 
```

此解决方案仅使用**webkit**浏览器和**jQuery UI Touch Punch 0.2.2**版本进行测试。

希望快速解决方案有所帮助，BR

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-07T21:32:51.220

感谢@Danwilliger 和@jeremytripp 的解决方案。由于这个问题已经知道多年，但仍未在 touch-punch 作者的 Git 存储库中处理，因此我使用此处添加的解决方案对其进行了分叉：

[https://github.com/copernicus365/jquery-ui-touch-punch/blob/master/jquery.ui.touch-punch.js](https://github.com/copernicus365/jquery-ui-touch-punch/blob/master/jquery.ui.touch-punch.js)

我会很高兴作者将这几行更改合并到原始库中并使其不再需要，但是如果这种情况永远不会发生，那么有一个单独的源文件可以参考是很好的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-18T17:04:18.080

Jacob 的回答稍作修改，我发现使用该`click`事件会导致 iPad、ios9 Safari 上的行为不一致。有时我会在一个场地上按一次，它会聚焦，有时我必须按三下。更改`click`为`touchstart`我解决了这个问题（我也使用了事件委托，因为我的表单是动态添加的）：

```
$('form').on('touchstart', 'input,textarea',function(){
    $(this).focus();
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-11T15:00:47.603

一种解决方案是使用手柄。在里面添加一个图标并使用它来拖动。然后输入工作正常。

```
<li><span class="move">Move</span><input...../></li>

    $("#sortableList").sortable({

    handle: ".move"

    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-02T02:53:25.683

Throttlehead 的解决方案对我有用。使用 JQuery 选择器覆盖所有输入和文本区域可能更简单：

```
 $('input,textarea').bind('click', function(){
    $(this).focus();
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-11T02:12:09.490

实际上，我尝试添加 Danwilliger 提到的行，但这对我没有用。

对我有用的是

```
//Check if element is an input or a textarea
if ($(touch.target).is("input") || $(touch.target).is("textarea")) {
  event.stopPropagation();
  $(touch.target).focus();
} else {
  event.preventDefault();
} 
```

我不确定为什么发布的其他答案不起作用，但是对于其他任何人，如果他们有同样的问题，请尝试我的解决方案:)。

# vba - 加载项文件幻灯片的内容 - VBA Powerpoint 2010

> ID：12539075
> 
> 赞同：1
> 
> 时间：2012-09-21T22:43:32.753
> 
> 标签：vba, add-in, powerpoint

我想创建一个包含许多预先准备好的幻灯片的 PowerPoint 2010 加载项。它将具有一组宏（+ UI 修改），当按下按钮时，它们会将幻灯片的内容从加载项复制到活动演示文稿中。

有人知道如何从宏中访问加载项幻灯片的内容吗？

微软说`Presentations( "my_addin.ppam" )`应该做这项工作，请参阅 [http://msdn.microsoft.com/en-us/library/office/ff743968%28v=office.15%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff743968%28v=office.15%29.aspx) 对我来说，这似乎是最简单和首选的方式。但是，我收到错误消息“在 Presentation 集合中找不到项目 my_addin”。

路线`Addins( "my_addin" )`似乎也无济于事。其他方式可能是在加载加载项时设置正确的变量......？

任何帮助/指向正确方向的高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:29:39.670

1)加载项文件*中*没有幻灯片。您无法访问不存在的内容。该插件可以插入来自另一个 PPT/PPTX 文件的幻灯片。

2）您引用的MSDN文章似乎是错误的。另一方面，您可以遍历 Addins 集合，而不是 Presentations 集合。

```
Sub ListAddins()
    Dim x As Long
    For x = 1 To AddIns.Count
        Debug.Print AddIns(x).FullName
    Next
End Sub

Sub TestGetAddin()
    Debug.Print GetAddin("showtimer").FullName
End Sub

Function GetAddin(sName As String) As AddIn
    Dim oAddin As AddIn
    For Each oAddin In AddIns
        If UCase(oAddin.Name) = UCase(sName) Then
            Set GetAddin = oAddin
            Exit Function
        End If
    Next
End Function 
```

另一方面，这并不重要，因为插件 PPA/PPAM 中不会有任何幻灯片。

但最后，知道加载项在哪里（完整路径或路径属性会告诉您）将帮助您找到包含幻灯片的常规 PPT/PPTX 文件。

# mono - 如何使用 MonoTouch 更改 UIPickerView 中组件（列）的数量？

> ID：12539082
> 
> 赞同：0
> 
> 时间：2012-09-21T22:44:31.343
> 
> 标签：mono, xamarin.ios, uipickerview

使用 objC，似乎有一个名为 numberOfComponentsInPickerView 的方法，您可以使用它来更改 UIPickerView 中的组件数量。一旦这用于更改组件的数量，您将重新加载组件以“刷新”选取器。即[picker reloadAllComponents];

我的问题是如何使用 MonoTouch 做到这一点？我是 Mono 的新手，在搜索了我的选择器对象上的所有方法和属性之后，我似乎找不到这个方法。

这是我创建 UIPickerView 的方式：

```
public class PeopleModel : UIPickerViewModel {
        static string [] names = new string [] {
            "item1",
            "item2",
            "item3",
            "item4",
            "item5",
            "Custom"
        };

        ActionSheetPickerExampleViewController pvc;
        public PeopleModel (ActionSheetPickerExampleViewController pvc) {
            this.pvc = pvc;
        }

        public override int GetComponentCount (UIPickerView v)
        {
            return 2;
        }

        public override int GetRowsInComponent (UIPickerView pickerView, int component)
        {
            if (component == 0) {
                return names.Length;
            } else {
                return 50;
            }
        }

        public override string GetTitle (UIPickerView picker, int row, int component)
        {
            if (component == 0)
                return names [row];
            else
                return row.ToString ();
        }

        public override void Selected (UIPickerView picker, int row, int component)
        {
            pvc.diskLabel.Text = String.Format ("{0} - {1}",
                                            names [picker.SelectedRowInComponent (0)],
                                            picker.SelectedRowInComponent (1));
            Console.WriteLine (names[picker.SelectedRowInComponent(0)]);
            if (names [picker.SelectedRowInComponent(0)] == "Custom") {
                Console.WriteLine ("Custom selected!");
                picker.ReloadComponent(1);
                using(var alert = new UIAlertView("Select value", "Select custom disk speed",null,"OK","Button2"))
                {
                    alert.Show ();
                }

            }
        }

        public override float GetComponentWidth (UIPickerView picker, int component)
        {
            if (component == 0)
                return 240f;
            else
                return 40f;
        }

        public override float GetRowHeight (UIPickerView picker, int component)
        {
            return 40f;
        }
    } 
```

所以上面是类，然后我在这样的操作表上创建选择器：

```
actionSheetPicker = new ActionSheetPicker (this.View);
        actionSheetPicker.Title = "Choose disk speed:";
        actionSheetPicker.Picker.Model = new PeopleModel (this);
        actionSheetPicker.Picker.Hidden = false; 
```

本质上，我正在考虑向此 Picker 添加另一个组件，仅当在第一个组件列中选择“自定义”的值时，然后只要在“自定义”中选择了“自定义”，就允许用户从该组件中选择一个值第一个组件。这可能吗？我知道如何在创建选择器之前通过使用“GetComponentCount”返回一个不同的数字来更改组件的数量，它只是在选择器已经创建后即时更改，我不确定。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:27:51.550

我对您的 PeopleModel 进行了一些更改，以跟踪是否选择了自定义，以及是否显示第三个组件：

```
public class PeopleModel : UIPickerViewModel
    {
        bool _custom;
        static string[] names = new string [] {
            "item1",
            "item2",
            "item3",
            "item4",
            "item5",
            "Custom"
        };

        ActionSheetPickerExampleViewController pvc;
        public PeopleModel (ActionSheetPickerExampleViewController pvc) {
            this.pvc = pvc;
        }

        public override int GetComponentCount (UIPickerView v) {
            if (_custom)
                return 3;
            return 2;
        }

        public override int GetRowsInComponent (UIPickerView pickerView, int component) {
            if (component == 0) {
                return names.Length;
            } else if (component == 1) {
                return 50;
            } else
                return 3;
        }

        public override string GetTitle (UIPickerView picker, int row, int component) {
            if (component == 0)
                return names [row];
            else if (component == 1)
                return row.ToString ();
            else
                return row.ToString ();
        }

        public override void Selected (UIPickerView picker, int row, int component) {
            pvc.diskLabel.Text = String.Format ("{0} - {1}",
                                                names [picker.SelectedRowInComponent (0)],
                                                picker.SelectedRowInComponent (1));
            Console.WriteLine (names [picker.SelectedRowInComponent (0)]);
            _custom = names [picker.SelectedRowInComponent (0)] == "Custom";
            picker.ReloadAllComponents ();

        }

        public override float GetComponentWidth (UIPickerView picker, int component) {
            if (component == 0)
                return 240f;
            else
                return 40f;
        }

        public override float GetRowHeight (UIPickerView picker, int component) {
            return 40f;
        }
    } 
```

我认为这就是你想要完成的。方法 ReloadAllComponents() 是 UIPickerView 的成员。

# c# - 在文本框中插入标签

> ID：12539083
> 
> 赞同：6
> 
> 时间：2012-09-21T22:44:33.797
> 
> 标签：c#, winforms, textbox

我敢肯定，这很简单，但我在 Google 上找不到任何关于此的内容。我有一个带有文本框的 Winforms 应用程序。当我按 TAB 键时，光标正在跳转到下一个控件。我想要的是在我的文本框中插入一个实际的选项卡（或 4 个空格）。我缺少什么财产？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T22:47:24.820

您应该将[`AcceptsTab`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.acceptstab.aspx)属性设置为`true`您的`TextBox`. 这将插入一个实际的 TAB 字符。

从 MSDN 页面：

该[`Multiline`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.multiline.aspx)属性还必须为真才能在控件中获取 TAB 字符。

如果该[`AcceptsTab`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.acceptstab.aspx)属性设置为 true，则用户必须按 CTRL+TAB 才能将焦点移动到 Tab 键顺序中的下一个控件。

# android - Android listView performItemClick 调用单击侦听器但在方向更改后不更改突出显示的行

> ID：12539085
> 
> 赞同：-1
> 
> 时间：2012-09-21T22:45:01.287
> 
> 标签：android, listview

```
listView.performItemClick(listView, 0, listView.getItemIdAtPosition(0)); 
```

我试过这个，它在大多数情况下都有效。有一种奇怪的情况：当您旋转设备时，我调用 a`performClick`到例如位置零，`onClickListener`调用 并且调用`DetailView`位置零的 。但如果最后激活的项目是位置 3，则位置 3 仍会继续突出显示。这在我开始活动并将第一行设置为激活时有效，但在方向更改后无效。

情况：我在平板电脑模式下的活动 A，右侧站点详细信息视图，左侧站点列表视图。

第 1 步：我触摸 3\. 列表项 -> 突出显示该行并显示“详细信息”视图。

第 2 步：我旋转平板电脑，我没有保存任何内容，我没有捕捉到方向变化，nada-> 3\. 项目继续突出显示。

下一步：我尝试`listView.performItemClick`在方法中调用位置cero `onActivityCreated`- >效果：当活动第一次启动时，第一行被突出显示并显示详细视图，当方向改变时，再次调用onActivityCreated（），performItemClick，调用 onClickListener 并更新详细视图，但列表项 3 仍继续突出显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:52:51.057

发生这种情况只是因为每当*`Orientation`*更改时视图都会刷新。如果您单击特定方向上的 listItem，则它会根据需要突出显示。*`But after change the orientation the view is refreshed`* 如果您想保存状态，请查看此处：

[https://stackoverflow.com/a/151940/1395259](https://stackoverflow.com/a/151940/1395259)

# jquery - 隐藏元素会导致其父元素不接收点击

> ID：12539087
> 
> 赞同：0
> 
> 时间：2012-09-21T22:45:12.917
> 
> 标签：jquery, html, css, html5-video

我正在尝试使用 jQuery show() 和 hide() 分别显示和隐藏包含 HTML5 视频播放器播放指示器的 div。我可以使用父 div (#video) 来播放和暂停视频，但是一旦我隐藏了包含播放图标 (#play) 图像的 div，点击功能不再响应，使我无法暂停视频。

有任何想法吗？

我有以下javascript：

```
$(document).ready(function(){

var currentVideo = $('video').get(0);
var playIndicator = $('#play');

$('#video').click(function() {
    if(currentVideo.paused)
    {
        playIndicator.hide();
        currentVideo.play();
        return false;
    } else {
        currentVideo.pause();
        playIndicator.show();
        return false;
    }
})

}); 
```

和 HTML：

```
<!DOCTYPE html>
<html>

<head>
    <title>Video Test</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
</head>

<body>

<div id="container">

<div id="video">
<div id="play"></div>
<video id="remoteVideo" poster="redacted" src="redacted" />
</div><!-- #video -->

</div><!-- #container -->

</body>

</html> 
```

该文件旨在包含在 iPad 出版物中，因此是奇怪的视口，我已经编辑了海报和视频文件链接，但两者都按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:44:30.267

为什么不把点击事件放在`#play`as上`$('#play').click(function() {`？

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-21T22:51:40.320

我投票改为尝试 jquery .on

```
$('#video').on('click', function(){

//logic goes here

}); 
```

# java - 在java小程序中绘制图像时的问题

> ID：12539089
> 
> 赞同：1
> 
> 时间：2012-09-21T22:45:23.347
> 
> 标签：java, applet

我是 Java 新手，我正在创建一个小程序。我遇到了一些问题，我无法使用任何绘图函数绘制任何东西。我知道我的代码并不完美，但我将不胜感激。

这是我的代码：

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Color;

public class CardsJavaProgram extends Applet {

    public void init(){
    this.setBackground( Color.blue );

    }
    public void paint( Graphics screen ){
    int x = 10;
    int y = 10;
    int x2 = 10;
    int y2 = 110;
        Image c1 = getImage ( getDocumentBase (), "cards/c1.gif" );
        Image c2 = getImage ( getDocumentBase (), "cards/c2.gif" );
        Image c3 = getImage ( getDocumentBase (), "cards/c3.gif" );
        Image c4 = getImage ( getDocumentBase (), "cards/c4.gif" );
        Image c5 = getImage ( getDocumentBase (), "cards/c5.gif" );
        Image c6 = getImage ( getDocumentBase (), "cards/c6.gif" );
        Image c7 = getImage ( getDocumentBase (), "cards/c7.gif" );
        Image c8 = getImage ( getDocumentBase (), "cards/c8.gif" );
        Image c9 = getImage ( getDocumentBase (), "cards/c9.gif" );
        Image c10 = getImage ( getDocumentBase (), "cards/c10.gif" );
        Image cj = getImage ( getDocumentBase (), "cards/cj.gif" );
        Image cq = getImage ( getDocumentBase (), "cards/cq.gif" );
        Image ck = getImage ( getDocumentBase (), "cards/ck.gif" );
        Image h1 = getImage ( getDocumentBase (), "cards/h1.gif" );
        Image h2 = getImage ( getDocumentBase (), "cards/h2.gif" );
        Image h3 = getImage ( getDocumentBase (), "cards/h3.gif" );
        Image h4 = getImage ( getDocumentBase (), "cards/h4.gif" );
        Image h5 = getImage ( getDocumentBase (), "cards/h5.gif" );
        Image h6 = getImage ( getDocumentBase (), "cards/h6.gif" );
        Image h7 = getImage ( getDocumentBase (), "cards/h7.gif" );
        Image h8 = getImage ( getDocumentBase (), "cards/h8.gif" );
        Image h9 = getImage ( getDocumentBase (), "cards/h9.gif" );
        Image h10 = getImage ( getDocumentBase (), "cards/h10.gif" );
        Image hj = getImage ( getDocumentBase (), "cards/hj.gif" );
        Image hq = getImage ( getDocumentBase (), "cards/hq.gif" );
        Image hk = getImage ( getDocumentBase (), "cards/hk.gif" );
        Image d1 = getImage ( getDocumentBase (), "cards/d1.gif" );
        Image d2 = getImage ( getDocumentBase (), "cards/d2.gif" );
        Image d3 = getImage ( getDocumentBase (), "cards/d3.gif" );
        Image d4 = getImage ( getDocumentBase (), "cards/d4.gif" );
        Image d5 = getImage ( getDocumentBase (), "cards/d5.gif" );
        Image d6 = getImage ( getDocumentBase (), "cards/d6.gif" );
        Image d7 = getImage ( getDocumentBase (), "cards/d7.gif" );
        Image d8 = getImage ( getDocumentBase (), "cards/d8.gif" );
        Image d9 = getImage ( getDocumentBase (), "cards/d9.gif" );
        Image d10 = getImage ( getDocumentBase (), "cards/d10.gif" );
        Image dj = getImage ( getDocumentBase (), "cards/dj.gif" );
        Image dq = getImage ( getDocumentBase (), "cards/dq.gif" );
        Image dk = getImage ( getDocumentBase (), "cards/dk.gif" );
        Image s1 = getImage ( getDocumentBase (), "cards/s1.gif" );
        Image s2 = getImage ( getDocumentBase (), "cards/s2.gif" );
        Image s3 = getImage ( getDocumentBase (), "cards/s3.gif" );
        Image s4 = getImage ( getDocumentBase (), "cards/s4.gif" );
        Image s5 = getImage ( getDocumentBase (), "cards/s5.gif" );
        Image s6 = getImage ( getDocumentBase (), "cards/s6.gif" );
        Image s7 = getImage ( getDocumentBase (), "cards/s7.gif" );
        Image s8 = getImage ( getDocumentBase (), "cards/s8.gif" );
        Image s9 = getImage ( getDocumentBase (), "cards/s9.gif" );
        Image s10 = getImage ( getDocumentBase (), "cards/s10.gif" );
        Image sj = getImage ( getDocumentBase (), "cards/sj.gif" );
        Image sq = getImage ( getDocumentBase (), "cards/sq.gif" );
        Image sk = getImage ( getDocumentBase (), "cards/sk.gif" );

        Image [] cards = new Image [ 52 ];
        cards [ 0 ] = c1;
        cards [ 1 ] = c2;
        cards [ 2 ] = c3;
        cards [ 3 ] = c4;
        cards [ 4 ] = c5;
        cards [ 5 ] = c6;
        cards [ 6 ] = c7;
        cards [ 7 ] = c8;
        cards [ 8 ] = c9;
        cards [ 9 ] = c10;
        cards [ 10 ] = cj;
        cards [ 11 ] = cq;
        cards [ 12 ] = ck;
        cards [ 13 ] = h1;
        cards [ 14 ] = h2;
        cards [ 15 ] = h3;
        cards [ 16 ] = h4;
        cards [ 17 ] = h5;
        cards [ 18 ] = h6;
        cards [ 19 ] = h7;
        cards [ 20 ] = h8;
        cards [ 21 ] = h9;
        cards [ 22 ] = h10;
        cards [ 23 ] = hj;
        cards [ 24 ] = hq;
        cards [ 25 ] = hk;
        cards [ 26 ] = d1;
        cards [ 27 ] = d2;
        cards [ 28 ] = d3;
        cards [ 29 ] = d4;
        cards [ 30 ] = d5;
        cards [ 31 ] = d6;
        cards [ 32 ] = d7;
        cards [ 33 ] = d8;
        cards [ 34 ] = d9;
        cards [ 35 ] = d10;
        cards [ 36 ] = dj;
        cards [ 37 ] = dq;
        cards [ 38 ] = dk;
        cards [ 39 ] = s1;
        cards [ 40 ] = s2;
        cards [ 41 ] = s3;
        cards [ 42 ] = s4;
        cards [ 43 ] = s5;
        cards [ 44 ] = s6;
        cards [ 45 ] = s7;
        cards [ 46 ] = s8;
        cards [ 47 ] = s9;
        cards [ 48 ] = s10;
        cards [ 49 ] = sj;
        cards [ 50 ] = sq;
        cards [ 51 ] = sk;
    screen.drawImage( getImage ( getDocumentBase (), "cards/c1.gif" ), 100, 100, this );
    screen.drawImage( getImage ( getDocumentBase (), "cards/c1.gif" ), 10, 10, this );
    screen.drawImage( getImage ( getDocumentBase (), "cards/c1.gif" ), 50, 50, this );
    screen.drawString( " test ", 10, 10, this );
    /*for (int i = 0; i < 4; i++){
        screen.drawImage (cards[( int ) ( float ) Math.random () * 52 - 1], x, y, this);
        x = x + 5;
    }
    for (int i = 0; i < 4; i++){
        screen.drawImage (cards [( int ) ( float ) ( Math.random () ) * 52 - ( int ) ( 1 )], x2, y2, this);
        x = x + 10;
    }*/
    }

} 
```

我创建了一个索引，所有文件都在正确的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:49:58.423

```
Image c1 = getImage ( getDocumentBase (), "cards/c1.gif" ); 
```

这些行在`paint(Graphics)`方法中。永远不要尝试在绘画中执行 I/O 或其他耗时的任务（例如加载“装满”图像的“甲板”）！

图像应声明为类属性（在任何方法之外声明），如下所示：

```
Image c1; 
```

然后加载进去`init()`。

```
c1 = getImage ( getDocumentBase (), "cards/c1.gif" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:55:24.913

我建议您修复代码以避免硬编码值。

您正在扩展 Applet 类，该类本身定义了一个绘制方法，因此您必须首先调用基本绘制方法，使用`super.paint(screen)`，我还建议您检查您是否真的在加载要到达的图像。

此外，applet 的一个非常常见的错误是未加载类，因此请查看 Java 控制台以查看是否有任何加载程序错误，作为建议，您可以将其设为 Frame 应用程序并稍后将其转换为小程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T06:45:10.063

```
Here is the complete code to display the image

Kindly refer through it
/*Arpana*/

import java.awt.*;
import java.applet.*;

/*
<applet code="Img" width=500 height=500>
</applet>
*/

public class Img extends Applet
{
    Image image;
    public void init()
    {
        image=getImage(getCodeBase(),"Appu.jpg");
    }
    public void paint(Graphics g)   
    {
        g.drawImage(image,0,0,this);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-20T14:53:07.673

```
Image picture;  
picture = getImage(getDocumentBase(),"sonoo.jpg");  
g.drawImage(picture, 30,30, this); 
```

# unit-testing - 重复将表传递给函数会分配更多内存吗？

> ID：12539100
> 
> 赞同：0
> 
> 时间：2012-09-21T22:48:01.530
> 
> 标签：unit-testing, garbage-collection, lua, pass-by-reference

我在 Lua 中有一个对表进行操作的函数，向表中重复添加条目：

```
function DoStuff()
    local table = {};

    for i = 1, 1000 do
        local name, value = GetSomething(i);

        if (CheckSomething(name, value))
           table[name] = value
        end;
    end;
end; 
```

我知道这很快；Lua 有一个很好的哈希表算法。但现在我需要拆分我的部分功能，所以我可以对其进行单元测试：

```
function DoStuff()
    local table = {};

    for i = 1, 1000 do
        local name, value = GetSomething(i);

        --split out checking so it's testable
        table = ParseTheThing(table, name, value); 
    end;
end; 
```

我知道[Lua 不支持通过**引用**](http://lua-users.org/lists/lua-l/2004-06/msg00257.html)传递参数，相反，如果我需要向 my 添加一个项目**`table`**，Lua 将制作一个副本，我必须返回该副本：

```
--Core checking function
function ParseTheThing(table, name, value)
   if (CheckSomething(name, value))
      table[name] = value
   end;

   return table;
end; 
```

所以在我看来，每次我调用**`CheckSomething`**Lua 都会创建*另一个*表，需要进行垃圾收集。

或者可能不是。也许 Lua**确实**支持通过引用传递参数，我可以简单地调用：

```
ParseTheThing(table, name, value); 

--Core checking function
function ParseTheThing(table, name, value)
   if (CheckSomething(name, value))
      table[name] = value
   end;
end; 
```

* * *

如果我像我所做的那样重构我的代码，Lua 的垃圾收集器会被迫做更多的工作吗？

* * *

**备注**：

*   不要将问题中使用的简化示例与我要问的问题混淆。
*   我没有任何方法可以测量内存使用情况或集合数量，所以我无法*尝试*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T23:05:24.320

> 我知道 Lua 不支持通过引用传递参数

“通过引用”一词被重载，引起了很多混乱（尤其是在[Java 世界](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)中，我看到人们拒绝承认其中一个含义甚至存在）。

通过引用传递可能意味着：

1.  传递对象在内存中的*位置*，而不是对象本身。这就是[C 中“通过引用传递”的](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr233.htm)意思。从这个意义上说，Java*确实*通过引用传递，Lua 对于它的许多类型（用户数据、表等）也是如此。

2.  变量的别名，这样对别名的任何修改都会反映在原始变量中。这不仅仅是简单地不传递价值。如果变量包含对象的位置，您可以通过别名分配不同的位置。您不能对 #1 执行此操作，其中您传递对*object*的引用，而不是变量。这些类型的引用在 C#、C++ 等中受支持，但 C 或 Lua 不支持。

更简单地说：

1.  传值：调用函数中的对象是被调用函数接收到的对象的副本。
2.  通过引用传递^1：调用函数中的对象可以被被调用函数修改。
3.  通过引用传递^2：调用函数中的变量可以被被调用函数修改。

> 相反，如果我需要在我的表中添加一个项目

只需传递表格——传递的是引用，而不是副本。

# java - 来自代码的触发选择事件

> ID：12539106
> 
> 赞同：4
> 
> 时间：2012-09-21T22:49:18.717
> 
> 标签：java, eclipse, events, selection, rcp

我正在 Eclipse 中编写一个包含组合框的 RCP 应用程序，并且在选择它的任何项目时，将触发一个选择事件并且一些随机代码开始起作用。侦听器看起来像这样：

```
randomComboBox.addSelectionListener(new SelectionListener(){

    @Override
    public void widgetSelected(SelectionEvent e) {
        // random code
    }

    @Override
    public void widgetDefaultSelected(SelectionEvent e) {
        // TODO Auto-generated method stub
    }

}); 
```

我的问题是：是否可以从代码中触发事件？例如，如果我添加：

```
randomComboBox.select(0); 
```

没有事件被触发。在这种情况下，我是否必须编写自己的监听器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T00:24:31.623

`select`组合框的方法`SWT.Modify`在更改选择时发送类型的事件，因此您可以使用 a`ModifyListener`而不是 a `SelectionListener`。

实际上，`ModifyListener`监听组合框文本字段的变化，这意味着它对由选择引起的文本变化做出反应。这也意味着如果该文本被其他路径更改（例如组合文本字段中的用户条目），它将被触发。

牢记这种行为，a`ModifyListener`可能是一种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-23T15:08:38.707

如果您的 ComboBox 是**“只读”** ，请不要使用**ModifyListener**

 **```
Combo comboBoxColor = new Combo(composite, SWT.BORDER | SWT.READ_ONLY); 
```

您可以显式（以编程方式）触发任何事件，例如

```
control.notifyListeners(eventType , event); 
```

在你的情况下：

```
comboBoxColor.notifyListeners(SWT.Selection, new Event()) 
```

1.  SWT.Selection -> 事件类型，您可以从 SWT 类中获取所有事件常量。

2.  新事件（）-> 事件对象**

# javascript - IE Chrome框架全屏

> ID：12539107
> 
> 赞同：1
> 
> 时间：2012-09-21T22:50:15.550
> 
> 标签：javascript, coffeescript, fullscreen, google-chrome-frame

我有一个适用于 Safari、Firefox 和 Google Chrome 的全屏工作实现。从我读过的内容来看，它应该适用于谷歌浏览器框架，但是当我点击全屏按钮时，我什么也没发生。有任何想法吗？还不支持吗？

```
$('#enable_fullscreen').click ->
  calculate_presentation_font_size(height)
  if docElm.requestFullscreen
    docElm.requestFullscreen()
  else if docElm.mozRequestFullScreen
    docElm.mozRequestFullScreen()
  else if docElm.webkitRequestFullScreen
    docElm.webkitRequestFullScreen() 
```

在“webkitRequestFullScreen”if 语句中发出警报表明它确实在 chrome 框架中达到了这种情况，但 docElem.webkitrequestFullScreen() 未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:06:38.303

我已经构建了它并从这个例子中使它工作。 [https://developer.mozilla.org/en-US/docs/DOM/Using_full-screen_mode](https://developer.mozilla.org/en-US/docs/DOM/Using_full-screen_mode)

我可以从您的 webkit 条件代码中看到的唯一内容是 webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT) 的参数“Element.ALLOW_KEYBOARD_INPUT”

不幸的是，chrome 框架的主要问题是与 IE 窗口的通信，这实际上表现得像个难相处的孩子 ;-)

对于 IE，您可以通过直接调用 document.location.href 来打开全屏模式的弹出窗口作为源，它将打开您所在的当前页面

```
window.open(document.location.href, 'myAppfullscreen', 'fullscreen=1'); 
```

# ipad - iPad "3" HTML5 Canvas 绘图分辨率

> ID：12539111
> 
> 赞同：2
> 
> 时间：2012-09-21T22:50:39.083
> 
> 标签：ipad, html, canvas

我一直在玩 iPad 和 HTML5，但由于显示器是视网膜，我屏幕上的文本似乎分辨率很低。使用 lineTo/moveTo/stroke 绘制的线条也是如此。注意文本是用 context.fillText() 绘制的

我怀疑这只是因为我没有正确设置画布来处理视网膜像素比，所以希望这里有人能弄清楚我到底做错了什么。

我已按如下方式设置画布：

```
<div id="container">
    <canvas id="canvas"></canvas>
</div> 
```

使用 CSS 属性：

```
#canvas {
    width: 1024px; 
    height: 768px; 
}
#container {
    width: 1024px; 
    height: 768px; 
} 
```

在 JavaScript 中（正如我在互联网上看到的那样）我已经指定：

```
canvas.width = 2048;
canvas.height = 1536; 
```

不幸的是，这并没有像其他一些用户那样停止像素化。

我是否遗漏了某些内容或指定了错误的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T15:13:20.237

尝试将此行添加到您的页面标题：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

此标记确保页面以其原始大小显示，并保持该大小。

# c++ - 为多重比较创建对象的副本是一种好习惯吗？

> ID：12539115
> 
> 赞同：0
> 
> 时间：2012-09-21T22:50:55.637
> 
> 标签：c++

假设一次需要多个比较：

```
enum usermode
{
    active,
    standingby,
    inactive,
    dead,
    // many other modes....
};
class A
{
public:
    usermode mode;
}; 
```

函数继承指向类 A 的指针（ptr 指向 A）

方法一：

```
if( ptr->mode == active || ptr->mode == standingby || ptr->mode == inactive || ptr->mode == dead ...//etc )
{
    //do something
} 
```

方法B：

```
usermode cmpmode = ptr->mode;
if( cmpmode == active || cmpmode == standingby || cmpmode == inactive || cmpmode == dead ...//etc )
{
    //do something
} 
```

这样做是个好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:55:37.193

在这种情况下，它只是减少了`if`语句表达式中的字符数量，因此无论什么都有效且可读性最强。

但是，在检查函数的返回值的情况下，我会将其填充到变量中并检查，即

```
auto ret = SomePossiblyExpensiveOperation();
if(ret != whatever && ret < something) {
    //...
} 
```

从表面上看你的`if`陈述，我会这样做：

```
switch(ptr->mode) {
    case active:
    case standingby:
    case inactive:
    case dead:
        ptr->whatever();
        break;
    // other cases
    default:
        // something else
        break:
} 
```

如果这是一个常见的检查，你可能想为它做一个特殊的情况，即

```
usermode any_mode = active | standingby | inactive | dead;

//...

if(ptr->mode & any_mode) {
    // whatever...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:56:48.063

由于`mode`它只是类的一个成员变量，任何体面的编译器都会为两种实现生成相同的代码。但是，通常，如果您使用方法而不是字段（尤其是具有副作用的方法），这两种方法是不等价的。

这在[函数调用与局部变量中有更多详细信息](https://stackoverflow.com/questions/12494401/function-calls-vs-local-variables)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:56:06.180

如果您的班级有直接处理此问题的方法可能会更好

```
bool A::IsSomeState() const
{
  return mode == active || mode == standingby; // Etc
} 
```

# tomcat - Tomcat 和 Railo 迁移时需要区分大小写

> ID：12539116
> 
> 赞同：1
> 
> 时间：2012-09-21T22:50:58.147
> 
> 标签：tomcat, tomcat7, case-sensitive, railo

我正在将几个大型站点从 ColdFusion、MS SQL 和 IIS 迁移到 Railo、MySQL 和 Tomcat 7。设置还不错，但是我将重写很多旧代码，而案例并不总是被考虑在内考虑。

虽然我不确定为什么区分大小写是一种安全威胁（来自 MS 世界，这从来都不是问题），但我需要找到一种方法让 Tomcat 7 和 Railo在文件夹中找到`img/employee/greg.jpg`它。`img/Employee/greg.jpg`内部`E`员工导致一半的呼叫失败。

两个问题：
我怎样才能让它不区分大小写以及为什么区分大小写会带来安全风险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T15:41:58.197

好的，首先第二个问题：

## 为什么区分大小写会带来安全风险？

区分大小写本身并不是安全风险。根据另一个答案中的评论，问题似乎是它可能绕过具有特定名称/大小写的目录的安全约束，特别是`WEB-INF`（可能包含敏感代码或配置文件）。

如果您尝试访问 domain.com/WEB-INF Tomcat 会阻止它，而它会将 domain.com/Web-Inf 视为不同，并且可能不会阻止它（我还没有实际测试过是否是这种情况） .

然而，这并不是一个真正的问题，因为 Railo 不要求您在 webroot 中拥有 WEB-INF 目录 - 您可以[将 Railo 配置为指向不同的位置](http://www.getrailo.org/index.cfm/documentation/configuration/tips-and-tricks/)，如果该位置在 webroot 之外，那么问题就被消除了。

[*（免责声明：这是基于可用信息；可能不止于此，但您有责任对任何可公开访问的网站执行安全扫描/渗透测试。）*]

## 如何解决区分大小写的问题？

这里有很多选择...

### 考虑另一个 servlet 引擎而不是 Tomcat，例如 Jetty。

虽然同样适用于 Jetty 和 Tomcat，但 Jetty 的`aliases`选项 (in `{jetty}/etc/webdefault.xml`) 并未被弃用（就像 Tomcat 的区分大小写的开关一样），并且在简短的测试中，它似乎阻止了对所有大小写变体的访问`web-inf`。

很可能还有其他 servlet 引擎具有可以接受的类似选项（例如 Resin

### 将 Railo 与 Tomcat 一起使用时，无需删除 Web 服务器。

虽然您*可以*使用 Tomcat 的 Coyote Web 服务器，但您不需要这样做，并且将（例如）Apache httpd、Nginx 或 IIS7 放在前面可以为您提供更大的灵活性 - 特别是它允许您使静态资源不区分大小写。

我这样说是因为你给出的例子是一个图像文件，所以它不需要去 servlet 引擎或 Railo - 如果它只是静态文件是问题（如果所有请求都通过 index.cfm 则完全有可能）然后简单地将 Web 服务器配置为不区分大小写是解决此问题的简单方法，而无需 Tomcat/Railo。

### 修复文件使用一致的大小写，使用 URL 重写来重定向请求。

例如，在记录 404 错误时爬取您的站点 - 这将为您提供大小写不匹配的列表。

一旦你有了这个，创建一个简单的脚本将所有这些文件重命名为小写，并生成一系列重写规则，以便将请求的文件重定向到小写变体。

例如使用 mod_rewrite 语法：

```
# If file exists, don't rewrite it (and stop processing further rules)
RewriteCond ${REQUEST_URI}  !f
RewriteRule .* - [L]

# Requested file doesn't exist, so redirect to lowercase version
RewriteRule (?i)img/employee/greg.jpg img/employee/greg.jpg [L,R=301]
RewriteRule (?i)img/employee/bert.jpg img/employee/bert.jpg [L,R=301]
RewriteRule (?i)whatever.else whatever.else [L,R=301] 
```

第一条规则确保不需要检查存在的文件（L 标志表示停止寻找进一步的重定向），而 (?i) 将执行不区分大小写的匹配并执行 301 重定向到正确的文件。

这解决了眼前的问题，随着时间的推移，您可以逐渐更新代码以使用一致的情况，直到不再需要重定向。

重写语法取决于您用于 Web 服务器的内容 - 所有这些都有选项，但有些比其他更成熟/集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:28:51.863

在您的 railo\etc\webdefault.xml 文件中将别名更改为 true。这使您的应用程序不区分大小写

```
<init-param>
  <param-name>aliases</param-name>
  <param-value>true</param-value>
</init-param> 
```

至于为什么不区分大小写是一种安全风险 - 我会说在这种情况下它不是。如果您存储了密码并且它们不区分大小写，那将是一个问题（除了它们没有被散列），但我不明白为什么这会带来安全风险。

# scala - Buildr：如何定义一个依赖于同一个 Buildfile 中另一个项目的项目？

> ID：12539122
> 
> 赞同：0
> 
> 时间：2012-09-21T22:51:26.867
> 
> 标签：scala, buildr

这在 Buildr 中似乎是一项简单的任务，所以我一定遗漏了一些明显的东西，因为我无法让它工作。假设我有一个包含两个文件的目录，如下所示：

```
test/lib/src/main/scala/MyLib.scala
test/app/src/main/scala/MyApp.scala 
```

`MyLib.scala`是：

```
class MyLib {
  def hello() { println("Hello!") }
} 
```

并且`MyApp.scala`是：

```
object MyApp extends App {
  val ml = new MyLib
  ml.hello()
} 
```

构建这些`scalac`很简单：

```
$ cd test
$ scalac lib/src/main/scala/MyLib.scala -d target/main/classes
$ scalac app/src/main/scala/MyApp.scala -cp target/main/classes -d target/main/classes
$ cd target/main/classes/
$ scala MyApp
Hello! 
```

然而，我天真地试图把它变成一个`Buildfile`（在`test`文件夹中）：

```
require 'buildr/scala'

lib_layout = Layout.new
lib_layout[:source, :main, :scala] = 'lib/src/main/scala'
app_layout = Layout.new
app_layout[:source, :main, :scala] = 'app/src/main/scala'

define 'mylib', :layout => lib_layout do
end

define 'myapp', :layout => app_layout do
  compile.with project('mylib')
end 
```

失败：

```
(in /test, development)
Building mylib
Compiling myapp into /test/target/main/classes
/test/app/src/main/scala/MyApp.scala:2: error: not found: type MyLib
  val ml = new MyLib
               ^
one error found
Buildr aborted!
RuntimeError : Failed to compile, see errors above 
```

如果我运行`buildr --trace`，很明显`scalac`失败的原因是因为类路径不包含`target/main/classes`.

我该如何做到这一点？我知道将这两个项目分开可能看起来有些做作，但我有一些更复杂的想法，这个例子将问题归结为它的基本组成部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:55:32.640

The idiomatic way to describe your project with Buildr would be to use sub-projects,

Note: `buildfile` below goes into the `test/` directory.

```
require 'buildr/scala'

define "my-project" do
  define "lib" do
  end

  define "app" do
    compile.with project("lib").compile.target
  end
end 
```

The two sub-projects `lib` and `app` are automatically mapped to the `lib/` and `app/` sub-directories and Buildr will automatically look for sources under `src/main/scala` for each.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:24:27.290

Buildr common convention for project layout looks for compiled classes in `target/classes` and `target/test/classes`. I see your build is placing classes into `target/main/classes`:

So you'll want to change your scala params to the expected location, or change the layout to include:

```
lib_layout[:target, :main, :scala] = 'target/main/classes' 
```

If you also need to change the layout for test classes (I'm guessing you don't), use:

```
lib_layout[:target, :test, :scala] = ... 
```

# java - OOP：如何编写类族一起工作？

> ID：12539123
> 
> 赞同：0
> 
> 时间：2012-09-21T22:51:29.453
> 
> 标签：java, oop, generics

昨天我问[了这个](https://stackoverflow.com/questions/12513329/inheritance-and-multiple-collaborators)问题，@JB Nizet 发布的解决方案效果很好。然而，这个答案以及其他一些答案/评论让我完全想到了一个不同的方向。

本质上，我有以下课程：

*   `Load`
*   `HttpLoad extends Load`
*   `Target`
*   `HttpTarget extends Target`
*   `Controller`

的`Controller`工作是`Target::fire()`a `Load`，并不关心哪个`Target`在触发哪个`Load`：

```
// Inside Controller.java
Target target = getTarget();
Load load = getLoad();

target.fire(load); 
```

但是，有一天我可能会写 a `FtpLoad extends Load`，但我不希望能够在 a`FtpLoad`上触发 a `HttpTarget`。所以上面提到的问题的本质是**我该怎么做**，答案是*泛型*。

但是，正如回答者指出的那样，这种解决方案违反了 Liksov 替换原则。其他回答者/评论者似乎表示我所做的不一定是好的 OOP 实践。

所以现在我要问：我**如何公开一个 API，以便`Controller`可以`Load`- 并且 -`Target`不可知，但仍然强制在正确的类型`Load`上触发正确的子类`Target`，所有这些都不会违反 Liskov Substitution？**

而且，如果这是不可能的（不违反 Liskov），那么解决此类问题的正常方法是什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:05:27.777

如果`HttpTarget.fire`允许任何`Load`作为参数，它的工作就是检查它是否可以`fire`this `Load`。因此，要么盲目地`Controller`调用，并检查给定的目标是否可以触发那种(with )，要么在每个实现此检查并由.`fire``fire``Load``instanceof``canFire``target``Controller`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:35:04.470

这里的打字问题是 that**`HttpTarget`不是 Liskov 的子类型`Target`**，因为在*语义上*它试图加强`Target#fire(Load)`要求`Load`be的先决条件`HttpLoad`。

这可以通过声明`Target#fire(Load) throws IncompatibleLoadException`并拥有一个总是抛出的默认实现来轻松修复，强制处理可以传入`Controller`不匹配的事实。`Load`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:19:35.530

最好是实现抽象类或接口并使用前面提到的instanceof。

使用抽象类：

```
public abstract class TargetLoad {
    public abstract void fire(TargetLoad i);
}

public class Load extends TargetLoad {
    @Override
    public void fire(TargetLoad i) {
        if (i instanceof Target) return;
        // do fire stuff
    }
}

public class Target extends TargetLoad {
    @Override
    public void fire(TargetLoad i) {
        if (i instanceof Load) return;
        // do fire stuff
    }
} 
```

带接口：

```
public interface TargetLoad {
    public void fire(TargetLoad i);
}

public class Load implements TargetLoad {
    @Override
    public void fire(TargetLoad i) {
        if (i instanceof Target) return;
        // do fire stuff
    }
}

public class Target implements TargetLoad {
    @Override
    public void fire(TargetLoad i) {
        if (i instanceof Load) return;
        // do fire stuff
    }
} 
```

在您的控制器中，您将对象称为 TargetLoad

```
TargetLoad target = getTarget();
TargetLoad load = getLoad();

target.fire(load);
load.fire(target);
load.fire(load);     //this will do nothing
target.fire(target); //this will do nothing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T23:03:36.497

简单的方法是检查您的代码以确保类匹配。您可以使用`instanceof`关键字来检查它是否是正确的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T23:42:32.587

我强烈不同意建议使用的大量答案`instanceof`。编写良好的 OOP 代码很少需要使用`instanceof`，而使用`instanceof`通常会使您的代码笨拙且难以维护。作为一般规则，`instanceof`尽可能避免。

您提到的上一个问题提供了使用泛型的解决方案。我不确定您是否将泛型代码排除在您的问题之外；回到你的通用代码。现在，将以下方法添加到您的驱动程序中。

```
private <L extends Load> void runSuite(TestSuite<L> suite) {
  Target<L> target = testSuite.getTarget();
  L load = testSuite.getLoad();
  target.fire(load);
} 
```

# android - 如何在我的 Eclipse 项目中包含 jar 文件

> ID：12539126
> 
> 赞同：4
> 
> 时间：2012-09-21T22:51:46.360
> 
> 标签：android, jar

我是android和java的新手。我下载了 GSON 库以在 Eclipse 中存在的我的 android 项目中使用。我查找有关如何在我的项目中使用 jar 文件的说明，它说... 引用... 您可以通过将第三方 JAR 添加到您的 Eclipse 项目中来在您的应用程序中使用它，如下所示：

```
In the Package Explorer panel, right-click on your project and select Properties.
Select Java Build Path, then the tab Libraries.
Press the Add External JARs... button and select the JAR file. 
```

或者，如果您想在您的包中包含第三方 JAR，请在您的项目中为它们创建一个新目录，然后选择 Add Library...。

无需将外部 JAR 放在 assets 文件夹中 ...UnQuote

恐怕我不知道“在我的项目中使用第三方 jar”和“在我的包中包含第三方 jar”之间的区别。我希望能够在我的 Android 手机应用程序中使用 GSON 方法，当然，我希望在我的 .apk 中部署该功能。

那么，我想做什么？谢谢，加里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T22:56:25.643

1.  将 jar 添加到项目中的 libs 文件夹中。

2.  打开 Eclipse 转到包资源管理器

3.  右键单击您的项目并选择项目属性

4.  单击弹出窗口左侧栏中的 java Build path

5.  选择库选项卡

6.  选择“添加外部 Jar 文件”并导航到您的 JAR 文件

祝你好运=）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T23:03:29.917

![包浏览器](../Images/7937ecb5fd9409aefea2e543339c01ef.png)

单击属性

![特性](../Images/7505373c4287e24505bac9da18ba1f68.png)

左选择构建路径

比添加 jar，不要使用外部库，除非确实需要。

您必须将 jar 复制到您的项目中才能使用“添加 jar”找到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T05:40:28.433

1.  在 Project Explorer 中右键单击您的主项目

2.  打开属性选项，位于上下文菜单的底部

3.  将打开一个对话框，您可以从中选择 Android 选项

4.  删除旧`.jar`文件，单击添加以添加新`.jar`文件并选择您要添加的文件

5.  你完成了！

# xamarin.ios - Monotouch 6.0 >> Monodevelop 3.0.4.7 在构建期间挂起

> ID：12539130
> 
> 赞同：1
> 
> 时间：2012-09-21T22:52:08.193
> 
> 标签：xamarin.ios, monodevelop

在 6.0 上更新 Monotouch 后，在 3.0.4.7 上更新 MonoDevelop 所有项目在构建期间挂起（在第一个项目上）

我为 iPhone 创建了新的空 Monotouch 项目，结果是一样的 - MonoDevelop 在开始构建时挂起

在以前的 Monotouch 5.4.0 和 Monodevelop 3.0.3 上都可以工作

操作系统：Mac OS X 10.6.8

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:05:01.747

如[发行说明](http://docs.xamarin.com/ios/releases/MonoTouch_6/MonoTouch_6.0)中所述， MonoTouch 6.0 不支持 Snow Leopard (OSX 10.6)。

您需要更新到 OSX Lion (10.7) 或 Mountain Lion (10.8) 或使用较早版本的 MonoTouch（5.4 仍支持 Snow Leopard）。

请注意，iOS6 支持需要 Apple Xcode 4.5，它也不适用于 Snow Leopard。

# node.js - 在mongodb中存储图像

> ID：12539131
> 
> 赞同：-1
> 
> 时间：2012-09-21T22:52:16.567
> 
> 标签：node.js, mongodb, stream, buffer

[在请求](https://github.com/mikeal/request)下载图像后，我正在尝试将图像存储在 mongo 中

这是我的代码，它导致损坏的图像存储在数据库中。

```
request('http://test.jpg', function (error, response, image) {

    db.images.insert(

        {
            file_name: 'test.jpg',
            image: new Buffer(image)
        },

        function(err){

           //mongojs callback

        }
    );
}); 
```

请注意，我正在使用[mongojs](https://github.com/gett/mongojs)模块并将图像作为 BinData 类型存储在常规文档中。

此外，如果我将图像写入文件，读取它然后将图像保存到数据库中，那么就没有损坏。但我不想这样做，因为我打算完全避免使用文件系统。

我很高兴这与编码或缓冲区有关，但我对这些了解不够，无法解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:07:55.883

如果您不想使用像 gridfs 这样的正确图像存储解决方案，您可以对图像进行 base64 编码。

[如何在 JavaScript 中将字符串编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)

这为您提供了一个可以存储在 mongo 中的字符串。

# scope - 在当前环境中找不到引用

> ID：12539132
> 
> 赞同：2
> 
> 时间：2012-09-21T22:52:16.737
> 
> 标签：scope, declaration, coq

免责声明：这是一个家庭作业

我是一个 coq 菜鸟，所以我希望这不是一个重复的问题。我/已经/看过[这个问题](https://stackoverflow.com/questions/11286291/coq-error-the-reference-was-not-found-in-the-current-environment)，但我的问题似乎仍然没有答案。

我有以下前提：

```
P \/ Q
~Q 
```

我需要证明：

```
P 
```

到目前为止我的coq代码：

```
Section Q5.

Variables Q : Prop.
Goal P.
Hypothesis premise1 : P \/ Q.
Hypothesis premise2 : ~Q. 
```

当我尝试执行该行时出现以下错误`Goal P.`：

> 错误：在当前环境中找不到引用 P。

这些是我能够提出的解决方案：

1.  替换`Variables Q : Prop.`为`Variables P Q : Prop.`。问题在于，这`P`将被假定为前提，但事实并非如此
2.  `Variables P.`在目标声明之前添加。这会导致语法错误。

我错过了什么吗？我似乎无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T03:26:12.550

正确的解决方案是 1，而您期望的问题是错误的。

当你写：

```
Variable P: Prop. 
```

您不是假设 P 有人居住（或者，“P 成立”），而只是假设存在一个名为 P 的命题，这是一个此处不考虑其有效性的“陈述”。

这与写作有很大不同：

```
Variable p: P. 
```

它假设存在类型“P”存在的证明“p”（如果 P 具有类型 Prop，则 p 是命题 P 的证明），因此假设 P 为真。

* * *

另外，原因如下：

```
Variables P. 
```

导致语法错误的是您需要为每个引入的变量提供一个类型（当没有引导类型推理引擎的信息时，Coq 无法神奇地计算出来）。

* * *

因此，将脚本开头为：

```
Section Q5.
Variables P Q : Prop.
Hypothesis premise1 : P \/ Q.
Hypothesis premise2 : ~Q.
Goal P. 
```

# ruby-on-rails - 如何使用 rspec 在 gem 中测试助手？

> ID：12539133
> 
> 赞同：2
> 
> 时间：2012-09-21T22:52:16.617
> 
> 标签：ruby-on-rails, rspec, gem

我已经发布了我的第一个 rails gem，但还没有包含任何测试。这个 gem 只是一个简单的助手，我想用 rspec 进行测试。但我不知道如何使用 rspec 在 gem 中测试助手。

我试图创建一个文件spec/helper/development_ribbon_helper_spec.rb：

```
require 'spec_helper'
describe DevelopmentRibbonHelper do
end 
```

但是当我执行 rspec 我得到这个错误：

```
development_ribbon_helper_spec.rb:3:in `<top (required)>': uninitialized constant DevelopmentRibbonHelper (NameError) 
```

[你可以在github](https://github.com/ding280/development_ribbon)上找到整个源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:40:26.303

看起来您可能正在尝试编写 Rails 引擎 gem，对吗？由于您的帮助文件位于 lib/ 之外，因此您的 spec_helper 将需要知道如何加载您的 rails 引擎。

一种方法是在您的 spec/ 目录中创建一个虚拟 Rails 应用程序。这个设置在这篇文章中有很好的描述：[http](http://reinteractive.net/posts/2-start-your-engines) ://reinteractive.net/posts/2-start-your-engines 。

或者，您可以将帮助文件移动到 lib/development_ribbon 并在您的 development_ribbon.rb 文件中使用它：

```
require "development_ribbon/development_ribbon_helper" 
```

然后，在使用 gem 的 rails 应用程序中，您可以在 application_helper.rb 中包含帮助程序

```
module ApplicationHelper
  include DevelopmentRibbon::DevelopmentRibbonHelper
end 
```

# objective-c - 为什么这段代码没有更新我的 UITextField？

> ID：12539136
> 
> 赞同：0
> 
> 时间：2012-09-21T22:52:41.330
> 
> 标签：objective-c, ios

```
 if (![value integerValue]) {
        textField.text = [[NSString alloc] initWithFormat:@"%d", *x];
        [slider setValue:(float)*x];
    }
    if ([value integerValue]>100) {
        textField.text = [[NSString alloc] initWithFormat:@"255"];
        [slider setValue:100.0];
    }
    if ([value integerValue]<0) {
        textField.text = [[NSString alloc] initWithFormat:@"0"];
        [slider setValue:0.0];
    }

    [textField setText:value]; 
```

文本字段的值仍然是输入的值，当我将其设置为新值时忽略。

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:07:19.973

您将`textField.text`在方法结束时覆盖该属性，无论它是否在您的案例决定之一下“更正”。

检查原始代码中的最后一行，并注意`textField.text = xyz`在语义上等于`[textField setText:xyz]`.

要解决您的问题，请使用您的代码的更正版本：

```
if (![value integerValue]) {
    textField.text = [[NSString alloc] initWithFormat:@"%d", *x];
    [slider setValue:(float)*x];
}
else if ([value integerValue]>100) {
    textField.text = [[NSString alloc] initWithFormat:@"255"];
    [slider setValue:100.0];
}
else if ([value integerValue]<0) {
    textField.text = [[NSString alloc] initWithFormat:@"0"];
    [slider setValue:0.0];
}
else {
    textField.text = value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:04:38.140

```
[textField setText:value]; 
```

将 UITextField 值设置回值。

# objective-c - 重新创建 Cocoa 应用程序菜单栏

> ID：12539137
> 
> 赞同：3
> 
> 时间：2012-09-21T22:52:49.997
> 
> 标签：objective-c, xcode, cocoa, interface-builder, menubar

我正在制作一个状态栏应用程序，并在单击状态栏菜单项时加载一个包含应用程序主窗口的新 xib。但是，在此过程中，我删除了应用程序菜单栏。我看不到连接我在界面生成器中创建的 NSMenu 对象的方法。

窗口加载得很好，状态栏图标仍然存在，但是当我将主窗口设置为关键窗口时，应用程序菜单栏没有改变，它只显示上一个处于活动状态的应用程序。

我已按照[此处](https://stackoverflow.com/questions/6300256/cocoa-application-menu-how-to-recreate)和[此处](https://stackoverflow.com/questions/8734213/how-do-i-add-main-menu-to-xib)的说明/建议进行操作，但它们都不起作用。我还错过了其他步骤吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:57:15.880

您描述的行为对于后台应用程序是正常的。如果您在 Dock 中没有图标，即使您在前台有一个窗口，您也不会获得自己的菜单栏。

# iphone - 如何从 iPhone 的 X、Y、Z 加速度计读数计算行进方向的加速度/减速度

> ID：12539141
> 
> 赞同：2
> 
> 时间：2012-09-21T22:53:57.813
> 
> 标签：iphone, ios, xcode, algorithm, accelerometer

我正在编写一个 iPhone/iPad 应用程序。我需要计算车辆行驶方向的加速度和减速度，该车辆接近直线水平线，加速度和减速度不稳定。我有来自 X、Y、Z 正交加速度计的 3 个读数序列。但 iphone/ipad 的方向是任意的，加速度计读数包括车辆运动和重力影响。结果应该是一系列单个加速度值，这些值是正值还是负值，具体取决于车辆是减速还是加速。只要加速度与减速度的符号相反，正负方向是任意的。重力应该被排除在结果之外。结果的一些变量平滑将是有用的。

解决方案应尽可能简单，并且必须具有计算效率。答案应该是某种伪代码算法、C 代码或可以轻松转换为 C 代码的方程式序列。Objective C 中的 iPhone 特定解决方案也可以。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T00:16:02.433

将重力和运动分开是非常困难的。如果您可以将数据与陀螺仪和罗盘信号一起分析，则会更容易。

陀螺仪测量角旋转的速率。它的积分理论上是角度方向（加上一个未知常数），但积分会漂移，所以它本身是无用的。加速度计测量角方向加重力加线性加速度。通过一些中等复杂的数学运算，您可以将所有 3 个量与 2 个传感器的值隔离开来。添加指南针将 XY 平面（其中 Z 是重力）固定到绝对坐标系。

看到[这个](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)很棒的演示文稿。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T01:15:13.443

为此，您将需要一些三角函数，例如获得所需的幅度

```
magn = sqrt(x*x+y*y+z*z); 
```

要获得你需要 atan 的角度，那么 c 函数 atan2 会更好

```
xyangel = atan2(y,x);
xymagn = sqrt(x*x+y*y);
vertangle = atan2(z,xymagn) 
```

没有你如何得到负数和正数是任意的，例如，你可以将 π/2 < xyangle < 3π/2 解释为负数。这将用 x 的符号作为 magn 的符号，但从 y 中取符号同样有效

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T09:12:16.297

使用[userAcceleration](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMDeviceMotion_Class/Reference/Reference.html#//apple_ref/occ/instp/CMDeviceMotion/userAcceleration)。

您不必弄清楚如何从加速度计读数中消除重力以及如何考虑方向：**它已经**在 Core Motion Framework 中实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T23:31:50.947

跟踪加速度的平均值。这将为您提供“向下”的参考。然后从单个读数中减去平均值。

您需要考虑平均计算的敏感性，因为，例如，在高速公路上慢速转弯会导致平均缓慢向外漂移。

如果您想对此进行补偿，您可以使用 GPS 跟踪来计算粗粒度的全局加速度来校准加速度计。实际上，您可能会发现区分 GPS 速度读数本身就可以提供足够好的绝对加速度（我没有尝试过，所以我不能说）。

# ms-access - 在备忘录访问中插入查询

> ID：12539146
> 
> 赞同：0
> 
> 时间：2012-09-21T22:55:21.937
> 
> 标签：ms-access, report, memo

是否可以在访问备忘录中插入查询或标签？我想创建一个欢迎数据包，其中将包含一封欢迎信以及从 Access 表中提取的其他数据。我可以在表格中创建一个新字段来存储我需要的文本，但我想包括从报告中提取的其他几条信息。我想插入数据元素，就好像我将标签插入到 html 页面中一样。欢迎信应将用户的姓名和信件地址、他们的姓名和其他详细信息单独发送给房主。报告的其他页面包括从多个位置更新的有关用户的详细信息。这甚至可以访问吗？如果不是，我会告诉用户他们必须在其他地方创建欢迎信并将其手动附加到数据包中，但这样可以节省大量时间来打印带有数据包的信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:59:25.780

我能够通过将段落文本存储在新列中并在报告中将备注字段设置为“可以增长”来解决问题。然后我用插入的数据分隔段落。我还将研究 Remou 提供的选项，因为 MS Word 自动化和代码中的 HTML 听起来像是更好的选择。

谢谢雷穆

# mysql - 使用 MySQL 检查条件（日期、时间）

> ID：12539152
> 
> 赞同：0
> 
> 时间：2012-09-21T22:55:52.700
> 
> 标签：mysql, sql, date, time, conditional-statements

我需要检查当前时间是否在数据库中的某个字段范围内。

例如在数据库中，我会存储一个`start time`, `end time`,`start date`和`end date`.

然后我需要检查当前日期是否在查询返回的值范围内。

我尝试过：

```
WHERE start_date <= $currdate 
  AND end_date >= $currdate
  AND start_time <= $currtime
  AND end_time >= $currtime 
```

效果很好，直到我们遇到日期重叠两天的情况，在这种情况下，查询返回显然比当前时间少`NULL`。`end_time`

我想我需要一种将`start_date`and`start_time`与`end_date`and结合起来的方法`end_time`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:18:20.537

您是否尝试过时间戳（）？

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestamp)

也许可以做类似的事情

```
WHERE timestamp(start_date, start_time) <= timestamp(currdate, currtime)
  AND timestamp(end_date, end_time) >= timestamp(currdate, currtime) 
```

当然，这是假设您的开始/结束日期和时间是相关的。不完全确定分离这两个字段背后的业务逻辑是什么......

# php - php curl远程上传到rapidshare

> ID：12539156
> 
> 赞同：1
> 
> 时间：2012-09-21T22:56:31.653
> 
> 标签：php, curl, upload, rapidshare

这是一个通过 php 远程上传文件到 rapidshare 的简单功能，需要用户名和密码并在您的服务器中激活 curl。

where 是全局的，你可以在函数外的任何地方设置用户名和密码

```
 function upload_Rapidshare_remote($fileurl)
  {
        global $username, $password;

        //Define the variables for post
        $url        = 'http://rapidshare.com/cgi-bin/rsapi.cgi';
        $fields     = array('sub'        => "remotegets",
                             'cmd'       => "addjob",
                             'login'     => $username,
                             'password'  => $password,
                             'urls'      => urlencode($fileurl)
                          );

        //Create url for post data
        foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
        rtrim($fields_string, '&');

        //Open the Connection
        $ch = curl_init($url);

        //Send Post Data
        curl_setopt ($ch, CURLOPT_POST, 1);
        curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

        //Execute
        $result = curl_exec($ch);

        //Close the connection
        curl_close($ch);

        //return....
        return;
  } 
```

使用方法

```
upload_Rapidshare_remote('http://www.mysite.com/file.zip'); 
```

# facebook - FQL：朋友的特定 uid 不显示在用户表上

> ID：12539157
> 
> 赞同：1
> 
> 时间：2012-09-21T22:56:34.977
> 
> 标签：facebook, facebook-fql, uid

1.  我得到了我所有朋友的 uid（对于所有授予许可的朋友）：

    ```
    >>> my_function_fql('SELECT uid2 FROM friend WHERE uid1=me()') 
    ```

2.  在所有这些 uid 中，有一个似乎在 User 表中不存在：

    ```
    >>> my_function_fql('SELECT name FROM user WHERE uid=%s' % ghost_uid)
    []
    >>> my_function_fql('SELECT uid2 FROM friend WHERE uid1=me() AND uid2=%s' % ghost_uid)
    1234567890 
    ```

事实上，我已经找到了它的联系方式。她的帐户没有什么不寻常的地方。=/

为什么会这样？

# android - 从另一个 android 库项目中引用 Android 库项目

> ID：12539158
> 
> 赞同：2
> 
> 时间：2012-09-21T22:56:37.300
> 
> 标签：android, android-layout, android-library

我在eclipse中有一个android库项目（比如A），它试图引用另一个库项目（比如B）。这两个项目都有 res 文件夹，我看到的是 A 无法引用 B 的 res 文件夹中的任何内容，基本上 R.java 无法解析（没有字符串，没有布局等）。

我错过了一些重要的东西吗？这甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:13:22.593

您可以将您的库项目之一导出为 jar 文件。

然后创建一个新文件夹名称“libs”（名称很重要），然后将该 jar 文件导入到项目中。只要您在创建 jar 文件时包含了正确的文件，您就应该能够从第二个项目中引用这些文件。

现在，当涉及到处理 res 文件夹中的文件时，这可能会变得更加棘手。如果您尝试在资源位于库项目中的情况下执行任何 UI 工作，那么我不确定这是否可行。

希望这会有所帮助！

干杯!

- - - - - - - - - - - - 更新 - - - - - - - - - - - - - ----

我不确定你哪里出错了。如果您按照我的建议进行操作，请确保在创建 jar 文件时添加“gen”文件夹。然后确保添加正确的导入，瞧，您可以引用该文件。

例如：假设你的库文件有包 com.test.Test1

然后在你的 gen 文件夹中，你应该有包 com.test.Test1 和你的 R.java 文件。

导出此项目，确保包含该 gen 文件夹。

然后在您的其他项目中确保包含“import com.test.Test1”

现在在代码中，您只需键入 R.Whatever。如果您包含 R.java 的另一个导入，可能会有些混乱。

现在，如果您想访问“res”文件夹，我想您可以将 res 文件夹更改为源文件夹（构建路径->用作源文件夹），然后导出 jar 确保添加 res 文件夹。

希望这对你有用。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T21:44:23.400

您应该在 R 类之前使用完整的命名空间。例如，如果项目 B 上的名称空间是，`com.projectB.*`那么您可以通过将 R 引用为

```
com.projectB.R.xxxx 
```

# ios - iOS CorePlot 散点图在我多次加载时崩溃

> ID：12539161
> 
> 赞同：0
> 
> 时间：2012-09-21T22:56:53.543
> 
> 标签：ios, memory, core-plot, scatter-plot

我正在编写一个我试图使用散点图的应用程序。

散点图本身是正确制作的，我修改了值、属性等。问题是，如果我加载包含图表的托管视图，iPad 2 会出现超过 15-16 次分配内存和应用程序崩溃的问题。

首先，我仔细检查了代码搜索错误，但问题仍然存在。稍后，我尝试释放 hostingView istance 并加载另一个，以尝试“清理”缓存，但没有任何改变。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:19:16.107

如果您需要做的只是刷新绘图数据，则没有理由发布托管视图和图形并构建新的。只需调用`-reloadData`图形（或需要更新的单个绘图）即可清除缓存并加载新的绘图数据。

使用静态分析器和仪器检查代码中的任何内存泄漏。听起来图表没有与托管视图一起发布。

# python - 将字符串附加到 unicode 字符串列表

> ID：12539164
> 
> 赞同：1
> 
> 时间：2012-09-21T22:57:10.777
> 
> 标签：python, string, list, unicode, concatenation

我试过的：

```
>> abcd = [u'abcd']
>> abcd_ef = abcd + 'ef'
>> abcd_ef

[u'abcd', 'e', 'f'] 
```

我想要什么：

```
>> abcd = [u'abcd']
>> abcd_ef = **MAGIC ???**
>> abcd_ef

[u'abcd', 'ef'] 
```

希望我说得足够清楚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:58:05.613

让它成为一个列表：

```
>>> abcd = [u'abcd']
>>> abcd_ef = abcd + ['ef']
>>> abcd_ef
[u'abcd', 'ef'] 
```

否则列表分别添加字符串的每个元素（例如每个字符）。

或者，您可以调用`.append()`并`abcd`就地修改该列表：

```
>>> abcd = [u'abcd']
>>> abcd.append('ef')
>>> abcd
[u'abcd', 'ef'] 
```

这都是标准的 python 列表操作，与内容无关；该列表中是否有 unicode 对象或自定义对象都没有关系。

# c++ - 将结构放入匿名命名空间有什么作用？

> ID：12539165
> 
> 赞同：4
> 
> 时间：2012-09-21T22:57:10.593
> 
> 标签：c++, oop, object, data-structures, namespaces

> **可能重复：**
> [为什么要使用未命名的命名空间，它们有什么好处？](https://stackoverflow.com/questions/357404/why-are-unnamed-namespaces-used-and-what-are-their-benefits)

查看某人的代码，这就是他们声明的内容：

```
namespace {

  struct myStruct {
     int x;
     int y;
  } obj1;

} 
```

..在一个函数中，我看到它是这样使用的：

```
myStruct& var = obj1; 
```

（通知`namespace`是匿名的。）

从我对它的使用方式来看，我无法弄清楚为什么它会这样声明和使用。

**像这样声明它有什么不同？**

另外，为什么指针是这样创建的，而不是[这里显示](http://www.cplusplus.com/doc/tutorial/structures/)的传统样式。即 myStruct *ptr;

谢谢你！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T23:02:56.920

在匿名命名空间中声明的所有内容都有一个唯一的、不可知的名称，因此不能从任何其他翻译单元中引用。因此，匿名命名空间被保证仅对当前翻译单元是本地的，并且永远不会与其他翻译单元发生冲突。

例如，如果您说`namespace { int i; }`，则保证只有当前翻译单元才能看到全局`i`。即使此声明位于包含在多个不同 TU 中的标头中，每个 TU 也会收到其*自己*的全局变量副本（每个都具有不同的、不可知的完全限定名称）。

效果类似于`static`在 C++03 中声明一个全局对象（提供全局对象内部链接），其中匿名命名空间中的对象可能仍具有外部链接。在 C++11 中，未命名命名空间中的名称根据 3.5/4 具有内部链接，因此变量和函数的效果与声明它们的效果完全相同`static`——但内部链接不仅仅适用于变量和函数（例如枚举、类、模板），因此从 C++11 开始，您应该始终更喜欢未命名的命名空间！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T23:04:08.110

在 C++ 中，您只能在给定的命名范围内拥有一个定义。如果有多个翻译单元，您仍然只能有一个定义，但编译器不能保证所有定义确实是相同的。也就是说，如果您需要本地类型，例如 a`struct`或 a `class`，您需要确保定义不会**与**任何其他翻译单元中的任何其他**类型**冲突。在大型项目中这样做几乎是不可能的，除非您有办法以某种方式在本地保护您的类型。这就是未命名命名空间所提供的：在未命名命名空间中定义的任何名称在整个可执行文件中都是唯一的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T23:05:11.567

它与关键字的作用基本相同，`static`但实际上并不强制内部链接。该变量仍然是外部链接的，您无法在任何其他翻译单元中解析其名称。这是必要的，因为模板参数必须具有外部链接，或者至少曾经需要这样。

`var`也不是指针，它是一个引用。它不像其他指针那样被创建，因为它不是一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T01:47:31.113

> 另外，为什么指针是这样创建的，而不是这里显示的传统样式。即 myStruct *ptr;

它是一个引用，而不是一个指针，它是用同样的原理创建`myStruct& var = obj1;`的，但是同样的原理也适用于指针。许多 C++程序员更`myStruct* ptr`喜欢`myStruct *ptr`. 编译器不在乎你使用哪个。这种风格偏好适用于代码的读者。`myStruct& ref``myStruct &ref`

将星号或 & 号与类型而不是变量放在一起的原因是因为星号或 & 号在逻辑上是类型的一部分。的类型`ptr`是指向 的指针`myStruct`。该方案存在一个潜在问题：`Type* ptr1, ptr2;`由于从 C 继承的规则，`ptr2`它不是指针。这只是一个`int`.

这个问题有一个简单的解决方案。不要那样做！一般来说，最好在每次声明时声明一个变量，但像`int i,j,k;`不要混合指针和非指针这样简单的事情除外。

# objective-c - 异步数据加载和重新加载 UITableView 之间的时间间隔

> ID：12539170
> 
> 赞同：1
> 
> 时间：2012-09-21T22:57:20.543
> 
> 标签：objective-c, reloaddata, dispatch-async

我在数据的 getter 方法中将数据异步加载到数组中。

首先它会产生一个空数组，所以我的表自然会加载 0 行。

数据加载完成后，我调用`reloadData`更新我的表，但是，正在下载的数据和显示数据之间似乎存在约 6 秒的差距`UITableView`。

有谁知道这可能发生的任何原因？

我使用`dispatch_async`优先级高的方法。

我什至记录了加载数据和插入数据过程中的每个点，它显示了这一点。

此外，如果我在加载数据时不断上下滚动表格，表格会尽快显示其数据，而不是在插入之间存在这种间隙。

**代码：**

```
- (NSMutableDictionary *)tableDictionary {
    if (!_tableDictionary) {
        _tableDictionary = [NSMutableDictionary dictionary];

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
            NSString *URLString = @"http://www.urlToData.com/path/to/file.php?foo=bar";

            NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:URLString]];
            NSError *error = nil;

            NSDictionary *objectIDs = [NSJSONSerialization JSONObjectWithData:data options:NSJSONWritingPrettyPrinted error:&error];

            NSMutableDictionary *objects = [NSMutableDictionary dictionary];

            for (NSInteger i = 0; i < objectIDs.allValues.count; i++) {
                NSArray *eventIDs = (objectIDs.allValues)[i];
                NSString *eventType = (objectIDs.allKeys)[i];

                [objects setValue:[myObject initWithIDs:objectIDs] forKey:@"key"];
            }

            self.tableDictionary = objects;
            self.titlesForSectionHeader = objects.allKeys;

            NSLog(@"Done");
            [self.tableView reloadData];
        });
    }
    return _tableDictionary;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:05:07.833

尝试在主线程上重新加载 tableview 的数据，如下所示：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        //background processing goes here
        //This is where you download your data
        dispatch_async(dispatch_get_main_queue(), ^{
            //update UI here
            [self.tableView reloadData];
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:21:56.507

作为@danielbeard 对代码的轻微修改。我建议所有影响当前对象的代码都在主队列上完成。如果 KVO 或 set 属性更新 UI，这可以避免令人讨厌的意外。

最后，我不会使用 DISPATCH_QUEUE_PRIORITY_HIGH。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // Stuff 'n stuff

    dispatch_async(dispatch_get_main_queue(), ^{
        self.tableDictionary = objects;
        self.titlesForSectionHeader = objects.allKeys;

        NSLog(@"Done");
        [self.tableView reloadData];
    });
}); 
```

# php - 通过正则表达式分解字符串

> ID：12539173
> 
> 赞同：1
> 
> 时间：2012-09-21T22:57:34.310
> 
> 标签：php, regex

我试图爆炸这样的字符串：

```
([a:b:c:d:...]) 
```

我有一个部分有效的代码

```
([^\(\[\]\):])+ 
```

但这并不理想，因为我需要确保找到的字符串在 ([ ]) 标记内。但是每当我将它们添加到正则表达式时，它就会停止工作（找不到任何匹配项）。

```
\(\[([^\(\[\]\):])+\]\) 
```

我究竟做错了什么？我正在使用这个网站来测试它们的正则表达式

[http://myregextester.com/index.php](http://myregextester.com/index.php)

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:03:35.513

我会分两部分做，首先匹配括号之间的东西

```
\(\[([^)\]]*)\]\) 
```

这会将内部内容放入`matches[1]`，然后简单地分解/拆分`:`

# android - 将相同的android项目复制到另一个文件夹然后提示错误，为什么？

> ID：12539179
> 
> 赞同：0
> 
> 时间：2012-09-21T22:58:51.820
> 
> 标签：android, inflate

我有一个在 vm 上运行良好的 android 项目，但是当我创建一个新项目和该项目中完全相同的文件然后将原始代码分别复制到文件时，该项目只是保持提示“不幸的是，***已停止”。为什么？错误信息如下：

```
09-21 22:57:09.166: E/AndroidRuntime(674): FATAL EXCEPTION: main
09-21 22:57:09.166: E/AndroidRuntime(674): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testfra/com.example.testfra.FragTestActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class Fragment
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.os.Looper.loop(Looper.java:137)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-21 22:57:09.166: E/AndroidRuntime(674):  at java.lang.reflect.Method.invokeNative(Native Method)
09-21 22:57:09.166: E/AndroidRuntime(674):  at java.lang.reflect.Method.invoke(Method.java:511)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-21 22:57:09.166: E/AndroidRuntime(674):  at dalvik.system.NativeStart.main(Native Method)
09-21 22:57:09.166: E/AndroidRuntime(674): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class Fragment
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.Activity.setContentView(Activity.java:1835)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.example.testfra.FragTestActivity.onCreate(FragTestActivity.java:12)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.Activity.performCreate(Activity.java:4465)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-21 22:57:09.166: E/AndroidRuntime(674):  ... 11 more
09-21 22:57:09.166: E/AndroidRuntime(674): Caused by: java.lang.ClassNotFoundException: android.view.Fragment
09-21 22:57:09.166: E/AndroidRuntime(674):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
09-21 22:57:09.166: E/AndroidRuntime(674):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
09-21 22:57:09.166: E/AndroidRuntime(674):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
09-21 22:57:09.166: E/AndroidRuntime(674):  ... 21 mor 
```

e

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:06:45.747

我将假设您正在为您的项目使用 Eclipse。

你可以尝试几件事。我发现将代码片段复制和粘贴到 eclipse 中有时会导致某些导入被自动插入。检查以确保您的导入正确并指向正确的文件。

除此之外，请尝试清理项目。单击项目-> 清理

最后，如果这两个都不起作用，您可以尝试右键单击您的文件。选择“Android 工具”，然后选择“修复项目属性”。

如果所有这些都不起作用，请确保您已包含您可能正在使用的任何其他依赖项。（jar文件等..）

希望这会有所帮助！

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:06:42.680

这可能有几个原因。

首先，在执行此类操作之前，您必须“清理”构建缓存和预构建的二进制文件。

其次，您需要仔细检查您在传输中更改的任何内容（项目名称、项目目录等）是否没有绝对引用。

这是您最可能遇到的两个问题。

# objective-c - Objective-c 从另一个类中获取变量

> ID：12539183
> 
> 赞同：0
> 
> 时间：2012-09-21T22:59:24.540
> 
> 标签：objective-c, class, variables

> **可能重复：**
> [无法访问其他类的对象](https://stackoverflow.com/questions/6646432/unable-to-access-object-of-other-class)

我一直在做一个小项目，只是为了增加对objective-c语法和功能的理解，但我被困在自己的项目中，找不到答案。

首先，我有两个类，在我的主要类中，我声明了另一个类的对象，这样我就可以使用另一个类的函数。我就是这样做的（我只是写了我认为必要的东西：

```
.h of my main class
import myOtherClass

@interface PkmViewController : UIViewController

    @property Pokemon * nomDePokemon;

.m of my main class
import myOtherClass

@synthesize nomDePokemon;

int nbDef = [nomDePokemon calculerUnNombrePourLaDefense];

.h of my other class

@interface Pokemon : NSObject

  @property int defencePoints;

-(int)calculerUnNombrePourLaDefense;

.m of my other class

@synthesize defencePoints;

-(int)calculerUnNombrePourLaDefense
{
    int nombrerandom = arc4random() % 45;
    return nombrerandom;
} 
```

当我在我的主类中放置一个断点以查看从函数中获取的数字时，它总是给我 0。当我将此部分放在我的另一个类中它可以工作但我想将它保留在另一个类中以提高我的技能. 有人可以解释一下我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:03:46.347

听起来您实际上还没有将 Pokemon 的实例分配给您的`nomDePokemon`变量。这意味着变量 contains 代替 Pokemon 对象，`nil`它返回`nil`或`0`响应您发送的任何消息。为了解决这个问题，创建一个口袋妖怪。

# sql-server - 避免交叉连接

> ID：12539188
> 
> 赞同：1
> 
> 时间：2012-09-21T23:01:08.607
> 
> 标签：sql-server, join, cross-join

我有三个表：学生，问题和答案。答案对学生和问题都有 FK。我对学生和问题使用了交叉连接：

```
Create PROCEDURE [dbo].[Fetch_AnswersForStudents]
    @studentIds [Int_udtt] READONLY
    , @questionIds [Int_udtt] READONLY

AS
BEGIN

    SELECT
        [tQID].[Id]
        , ISNULL([tA].[StudentId], 0) AS StudentId
        , [tA].[Answer] AS Answer
    FROM
        @questionIds AS tQID        
        CROSS JOIN @studentIds AS tSID        
        LEFT OUTER JOIN Answer AS tA 
            ON tA.QuestionId = tQID.Id            
            AND tA.StudentId = tSID.Id 

END 
```

此过程的目的是确定给出的学生/问题是否有相应的答案。我的问题是，有没有办法不使用交叉连接来实现相同的目标？此外，最好返回一个包含答案条目的集合。

# c# - Ninject Rebind 在运行时，可以用作功能切换吗？

> ID：12539189
> 
> 赞同：6
> 
> 时间：2012-09-21T23:01:09.287
> 
> 标签：c#, asp.net, ninject

首先，我的问题仅适用于 Web 应用程序，我倾向于使用 InRequestScope 分辨率设置我的大部分 Ninject 绑定。

我正在考虑进行功能切换的方法，我的一个想法是致电：

```
kernel.Rebind<IInterface>().To<RealImplementation>().InRequestScope(); 
```

当网站仍在运行时，开关已被轻弹。如果我决定关闭该功能，我可以打电话

```
kernel.Rebind<IInterface>().To<EmptyImplementation>().InRequestScope(); 
```

我的想法是 InRequestScope 将保护任何“正在进行的”代码请求，但将允许新请求获得新切换的功能。

有没有人从经验（或对 Ninject 的更深入了解）中知道这是否可行，或者是否会给我带来更多麻烦。我表面上看过 ​​MEF，所以如果 Ninject 在这种情况下不是完成这项工作的最佳工具，那将是我的下一个停靠点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T06:54:34.000

一个潜在的问题来源是，虽然内核是线程安全的，但您需要轻弹一个开关，否则您将竞相将所有内容作为飞行中请求的原子操作进行切换。（这是原则上，我没有考虑到这个问题来审查代码）。

话虽如此，没有什么可以直接导致问题。

但是，虽然如果您能够满足自己和/或根据与此类使用相关的竞争条件评估代码的人获得足够强的保证，这可能是有意义的，但这并不是我听说的普遍做法。事实上，AutoFac 的设计就是让您从配置输入构建一个不可变的工厂——特别是排除这种类型的事情。出于这个原因，我的直觉是放弃这种方法。

你考虑过使用`.ToMethod(ctx=> return /* Toggle-based creation*/)`吗？（显然它没有像 a 那样直接说明事情`Rebind`）。根据您的实际 impl（以及绑定的复杂性和切换系统的性质），这可能是有道理的。

# forms - 如何从动态创建的表单字段中获取值并为其他表单函数引用它们？

> ID：12539190
> 
> 赞同：1
> 
> 时间：2012-09-21T23:01:28.877
> 
> 标签：forms, jquery, dynamic-values

这是我到目前为止...

```
<html>
<head>
<title>addForm</title>
<link href="css/addForm.css" rel="stylesheet" type="text/css">
<link href="favicon.ico" rel="icon" type="image/x-icon" />
<script type="text/javascript" src="../lib/jquery/jquery-1.8.1.min.js"></script>
<script type="text/javascript" src="../lib/jquery/jquery.autocomplete.min.js"></script>
</head>

<body>
<div>
<form id="addForm" name="addForm" method="post" action="">
...
<div id="container">
<p id="add_field">
<label><a href="#">Add A Class Code</a></label>It may take a moment for your Class Code to appear in the dropdown box.
</p>
</div>
<label>Class Screens E: </label>
<select name="ClassScreenE" id="ClassScreenE" size="5"></select>
<br>
...
</form>
</div>

<script language="javascript" type="text/javascript">
$(function(){
var count = 0;

$('p#add_field').on('click', function(){
        count += 1;

$('#container').append(
'<label>ClassCode: </label>' + '<input type="text" class="autocomplete" name="ClassCode[]" id="ClassCode_' + count + '" size="34" maxlength="3">' + ' Payroll: ' + '<input type="text" name="Payroll[]" id="Payroll_' + count + '" size="10" onKeyPress="return numbersonly(this, event)">' + '<br>')
$(".autocomplete").autocomplete("scripts/findClassCode.php")
});
})

**//Edited in the following bit from Femi
//This seems to work when running 'jQuery("#ClassCode_" + i).val();' in Chrome's Inspector
//Now I need to get a solid value assigned when looping through so I can dynamically call each value to affect the a select box.
var val, i = 1, inp = jQuery("#ClassCode_" + i);
    while(inp.length > 0){
// get the value
val = inp.val();
    ++i;
inp = jQuery("#ClassCode_" + i);
}**

</script>

</body>
</html> 
```

所有这一切都完美无缺。当我单击链接时，它会生成下一组字段，同时保持其属性，以便自动完成部分起作用。我现在需要使用表单中每个“ClassCode_' + count + '”的结果来确定在另一个从 MySQL 中提取数据的选择框中将动态显示什么。我的问题是将动态值转换为无需提交表单即可使用的变量。我花了一天时间在互联网上搜索以使这个工作无济于事。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:06:26.873

有点迂腐，但是：

```
var val, i = 0, inp = jQuery("#container").find("input").find("#ClassCode_" + i);
while(inp.length > 0){
   // get the value
   val = inp.val();
   ++i;
   inp = jQuery("#container").find("input").find("#ClassCode_" + i);
} 
```

试试看？

# python - 为序列中某些出现之间的值创建一个列表。. . Python

> ID：12539191
> 
> 赞同：1
> 
> 时间：2012-09-21T23:01:43.720
> 
> 标签：python, list, append, frame

我正在发布一个关于我之前关于阅读框架的问题的后续问题。

```
sequence = 'AAATGAAATAAGGATGGGGTAGTATGATGTGTTT' 
```

我最终正在寻找一个特定的模式'ATG'，我想扫描输入序列直到找到它。一旦找到它，我希望它继续使用 3 的阅读框，直到它找到另一个序列“TAA”或“TAG”或“TGT”，然后继续扫描，直到找到下一个带有下游“TAA”的“ATG” '或'标签'或'TGT'

```
codon_list = ['ATG','AAA','TAA'],['ATG','GGG','TAG'],['ATG','ATG','TGT'] 
```

我正在尝试这个

```
start_frame = sequence.find('ATG') 
```

但它只会让我第一次出现“ATG”。（即“2”）

只是为了我写的第一个密码子列表

```
for codon in range(len(sequence)):
    next_codon = fdna[start_frame:start_frame + 3]
    codon_list.append(next_codon)
    start_frame = start_frame + 3
    if next_codon == 'TAA': 
        break
    if next_codon == 'TAG':
        break
    elif next_codon=='TGT':
        break
print codon_list
>>> ['ATG','AAA','TAA'] 
```

它仅适用于“ATG”的第一次出现。

下一部分是我想为每个密码子 (0,1,2,3,...) 创建一个名称的地方，我想我想出了那部分：

```
indx = range(0,len(codon_list))

indx_codon = dict(zip(indx,codon_list)

indx_codon = {0:['ATG','AAA','TAA'],1:['ATG','GGG','TAG'],2:['ATG','ATG','TGT']}

codon_start = ['2','13','23']
codon_end = ['8','21','31']
codon_positions = []

for p,q in zip(codon_start,codon_end):
    codon_positions.append(str(p)+':'+str(q))

print codon_positions
>>> ['2:8', '13:21', '23:31'] 
```

所以我最大的问题是该`.find()`函数只适用于第一次出现，如果在“ATG”之前有一个“TAA”或“TAG”或“TGT”（“ATG”是应该开始阅读框架的那个 3)

**如何创建遵循这些标准的多个序列的列表（即将序列转换为 codon_list）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:10:12.610

这是一个使用正则表达式的相当简洁的解决方案：

```
import re
sequence = 'AAATGAAATAAGGATGGGGTAGTATGATGTGTTT'
codons = re.findall(r'ATG(?:...)*?(?:TAA|TAG|TGT)', sequence)
codon_list = [[s[i:i+3] for i in range(0, len(s), 3)] for s in codons] 
```

结果：

```
>>> codon_list
[['ATG', 'AAA', 'TAA'], ['ATG', 'GGG', 'TAG'], ['ATG', 'ATG', 'TGT']] 
```

# iphone - 为变量使用标签的文本以供以后在 iOS5 中使用

> ID：12539192
> 
> 赞同：1
> 
> 时间：2012-09-21T23:01:50.057
> 
> 标签：iphone, ios, ios5, label, uilabel

我开始编写 iOS 应用程序，我想知道它是否可以将标签的内容保存在变量中。我得到了这个代码：

```
if (event.subtype == UIEventSubtypeMotionShake) {
int randomNumber = arc4random() %2;
    switch (randomNumber) {
        case 0:
            label.text = [NSString stringWithFormat:@"Out of luck"];
            break;
        case 1:
            label.text = [NSString stringWithFormat:@"Yes, you can"];
            break;
        default:
            break;
     }
} 
```

然后我想使用在摇动事件中获得的标签来推特这样的结果：

```
[twitter setInitialText:[NSString stringWithFormat:@"I asked the app and says:", label]]; 
```

但正如我之前所说，我是新手，我被困在这里。有任何想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:21:00.473

你试过这个吗？

```
 [twitter setInitialText:[NSString stringWithFormat:@"I asked the app and says: %@", label.text]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:22:04.860

是的，可以将标签的内容保存在变量中。

其实，当你写

```
[NSString stringWithFormat:@"Out of luck"]; 
```

您正在创建一个 NSString ，稍后可以在您的应用程序中使用。

只需这样更改：

```
NSString *aString = [NSString stringWithFormat:@"Out of luck"]; 
```

这样做你把“运气不好”放在一个字符串中。

下一步是取回你的字符串：

```
NSString *aString = [NSString stringWithFormat:@"Out of luck"];
label.text = aString; 
```

在这里，您创建字符串 aString，然后将其内容“Out of lucky”放入标签中。

你可以通过许多不同的方式来实现你的目标，例如你可以这样写：

```
NSString *aString = @"Out of luck"; 
```

你必须练习变量和声明......我建议你看看：

[NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

[Objective-C 编程语言](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html#//apple_ref/doc/uid/TP30001163)

您还可以查看许多有用的帖子，如下所示：

[基本目标 C 变量声明](https://stackoverflow.com/questions/7251366/basic-objective-c-variable-declaration)

编辑：我刚刚注意到你的问题更多的是关于标签而不是字符串，所以......如果你想获得你的标签内容，只需写：

```
[NSString stringWithFormat:@"I asked the app and says: %@", label.text] 
```

正如彼得周建议的那样。

label.text 是可写的，就像在您的代码中一样：

```
label.text = [NSString stringWithFormat:@"Out of luck"]; 
```

并且可读：

```
NSString *theContentOfALabel = label.text; 
```

# linux - 如何禁用到 /etc/passwd 的硬链接

> ID：12539193
> 
> 赞同：-4
> 
> 时间：2012-09-21T23:02:10.127
> 
> 标签：linux, security, etcpasswd

我最近正在学习安全性，并注意到在我的实验系统上，我可以在我的主目录中创建指向 /etc/passwd 的硬链接，而在我的工作系统上，我不能：

$ ln /etc/passwd ln: 创建硬链接失败`./passwd' =>`/etc/passwd': 不允许操作

做了什么来禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:10:25.307

这是因为您试图`/etc/passwd`在不同的卷上创建硬链接。很可能在您的家庭系统中，您将所有内容设置到单个卷上。

# php - 使用 PHP/SQL 插入多行的问题

> ID：12539194
> 
> 赞同：1
> 
> 时间：2012-09-21T23:02:11.873
> 
> 标签：php, mysql

这是我用来尝试创建多行以插入数据库的形式。

```
 <input name="input[]" type="checkbox" value="0" id="input_0" /> Directional<br /> <br/>
  <input name="input[]" type="checkbox" value="1" id="input_1" /> Technical <br />
  <br />
  <input name="input[]" type="checkbox" value="2" id="input_2" /> Reference <br />
  <br />
  <input name="input[]" type="checkbox" value="3" id="input_3" /> Research <br />
  <br />
  <input name="input[]" type="checkbox" value="4" id="input_4" /> Phone <br /></h3>

  <input type="submit" name="button" id="button" value="Submit Tally" style="height: 25px; width: 100px">
  </Form> 
```

当前使用 implode 从复选框表单将多行插入 mysql 数据库的问题。循环可以解决这个问题吗？选中复选框时，我可以看到数组 (#,#,#,#)

```
 $type = $_POST['input'];
 // $sid = $_SERVER['REMOTE_ADDR'];
  $user = $_POST['user'];

  if(count($type) > 0)
  {
  $type_string = implode(',', $type);

  }
  $sql = "INSERT INTO tally (tid, sid, uid, date, time, catid) 
      VALUE (NULL, 1, '$user', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, '$type_string')";

        mysql_query($sql) or die(mysql_error());
     echo "Success";

     print_r($type_string); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:10:40.297

计算如下的值`$type`：

```
 $i=0;
  foreach ($_POST as $v) {
   if(isset($v['input'.$i])) {
    $type = $v; 
    $i++;
   }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:16:38.983

在您从作为输入接收的 $type 变量创建一些数组并将其输入到您的查询中之后，循环肯定会起作用。

但我希望您不要像这样在某些网站上使用此代码。正如 maiotano84 已经评论的那样，创建查询的方式有点危险。很容易对您的数据做一些不需要的事情。至少你应该把你的变量通过一个函数，比如

```
string mysql_real_escape_string ( string $unescaped_string [, resource $link_identifier = NULL ] ) 
```

[这是php.net](http://php.net/manual/en/function.mysql-real-escape-string.php)站点上有关此功能的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-30T11:27:38.197

```
 <Form action="" method="POST">

  <input name="input[]" type="checkbox" value="0" id="input_0" /> Directional<br /> <br/>
  <input name="input[]" type="checkbox" value="1" id="input_1" /> Technical <br />
  <br />
  <input name="input[]" type="checkbox" value="2" id="input_2" /> Reference <br />
  <br />
  <input name="input[]" type="checkbox" value="3" id="input_3" /> Research <br />
  <br />
  <input name="input[]" type="checkbox" value="4" id="input_4" /> Phone <br /></h3>

  <input type="submit" name="button" id="button" value="Submit Tally" style="height: 25px; width: 100px">

  </Form>

  <?php
  $type = $_POST['input'];
 // $sid = $_SERVER['REMOTE_ADDR'];
  $user = $_POST['user'];

  for($i=0;$i<count($type);$i++){
    $sql = "INSERT INTO tally (tid, sid, uid, date, time, catid) 
      VALUE (NULL, 1, '$user', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ".$type[$i].")";  
  }
  ?> 
```

# windows - 由于 Netdrive 导致 R SQLite 访问失败 - 解决方案/解决方法？

> ID：12539196
> 
> 赞同：0
> 
> 时间：2012-09-21T23:02:34.120
> 
> 标签：windows, r, sqlite, networking

我正在使用将文件保存为 SQLite 数据库的 RQDA 包。只要我不将它们放在我需要做的网络驱动器上，就可以使用包访问这些文件，因为人们应该能够在不同的计算机上工作。

有没有人（遇到过这样的问题）知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:42:04.627

到目前为止，我发现了 2 个解决方案：

1）在Windows中更具说服力：右键单击->属性->安全->扩展->更改权限->编辑...然后编辑它

2）制作本地副本并在编辑后将它们放回去。

这些解决方案远非完美，但我目前不认识其他解决方案。也许还有一种方法可以改变 DBI 或 RSQlite 包函数的行为？

# dynamic - 在单元格值更改时运行 maco

> ID：12539198
> 
> 赞同：0
> 
> 时间：2012-09-21T23:02:51.163
> 
> 标签：dynamic, excel, vba

所以

```
 Private Sub Worksheet_Change(ByVal Target As Range)
   Dim KeyCells As Range          
   Set KeyCells = Range("d4")
        If Not Application.Intersect(KeyCells, Range(Target.Address)) _
           Is Nothing Then Call fftest                   
   End Sub 
```

该代码可以正常工作，如果我更改“D4”中的值，`fftest`则调用子“。

但要让它生效，我必须点击单元格的外侧。

有没有办法让它注意到我输入的每一个击键？因此，例如，如果我要在单元格 D4 中输入“123”，则将在 1、2 和 3 之后调用 sub，因此分别运行 3 次。

我希望在人们输入单元格时动态更新列表，以便他们可以在每次按键后看到结果。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:42:47.203

请参阅评论中的 Siddharth Rout 答案。如果可能的话，我很乐意接受评论作为答案

# php - php apc.php - 密码保护

> ID：12539202
> 
> 赞同：0
> 
> 时间：2012-09-21T23:03:00.027
> 
> 标签：php, apache, apc

我已将 APC 安装到 apache 上，并将 apc.php 文件移动到文档根目录中，以便我可以看到它。

我正在阅读有关在文件上设置用户/密码的信息

```
defaults('ADMIN_USERNAME','apc'); // Admin Username
defaults('ADMIN_PASSWORD','password'); // Admin Password - CHANGE THIS TO ENABLE!!! 
```

这个用户/通行证实际上做了什么？

我仍然可以像以前一样查看该页面 - 只是对其用途感兴趣。

让外人查看这个文件也很重要（我假设是这样）以及如何最好地做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:24:35.657

登录 APC 页面可以清除缓存。除此之外，查看缓存的统计信息，apc.php 没有太多内容。限制对它的访问的最佳方法是使用 .htaccess 规则，要么只允许您的 IP 地址访问它，要么使用 .htaccess 密码保护它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T15:34:01.517

要密码保护文件，请查看[http://webdesign.about.com/od/htaccess/ht/password_1_file.htm](http://webdesign.about.com/od/htaccess/ht/password_1_file.htm)

# mysql - 我的 SQL 查询查找具有匹配主键的最大 <= 日期

> ID：12539209
> 
> 赞同：1
> 
> 时间：2012-09-21T23:03:58.187
> 
> 标签：mysql

我有两个表示历史数据的表，它们都有一个“src”列，表示该数据的主表中的主键。

例如

主表将是

```
tbl_user        tbl_email
________        _________
user_pk         email_pk
username        email
email_pk        tstamp
tstamp 
```

历史表基本上与原始表匹配，并带有一个“src”列，该列指示来自主表的源主键记录。

```
tbl_user_hist                 tbl_email_hist
______________                ______________
user_pk                       email_pk
src_user_pk                   src_email_pk
username                      email
email_pk                      tstamp
tstamp 
```

因此，如果您有主键 1 的电子邮件记录，并且您将电子邮件从 bob@gmail.com 更改为 bob@hotmail.com，然后再更改为 bob@yahoo.com

你的 tbl_email_hist 看起来像这样

```
email_pk     src_email_pk     email                tstamp
1                   1         bob@gmail.com        2012-01-01 04:06:28
2                   1         bob@hotmail.com      2012-03-01 04:06:28
3                   1         bob@yahoo.com        2012-07-01 04:06:28 
```

假设 bobs 的原始用户名是 rsmith，然后更改为 bsmith，然后又改回 rsmith2。但这些用户名更改不一定与电子邮件更改的时间戳一致。

所以类似地，用户历史表看起来像

```
tbl_user_hist
User_pk     src_user_pk     username    email_pk      tstamp
1           1               rsmith      1             2012-01-01 04:08:28
2           1               bsmith      1             2012-02-01 04:01:28
3           1               rsmith2     1             2012-05-01 04:05:28 
```

所以我想要创建一个查询，该查询将能够根据时间戳和相关的 email_pk 记录找到正确的电子邮件历史记录……这意味着在用户记录更改时该字段的值是什么。因此，在某种程度上，我需要在电子邮件历史表中找到 src_email_pk 与用户历史表中的 email_pk 匹配的记录，但该电子邮件历史记录的 tstamp 是最高日期，而仍然 <= 用户表中的时间戳。

最后我的数据看起来像这样

```
Username     email              username_timestamp
Rsmith       bob@gmail.com      2012-01-01 04:08:28
Bsmith       bob@hotmail.com    2012-02-01 04:01:28
Rsmith2      bob@hotmail.com    2012-05-01 04:05:28 
```

换句话说，反映了用户名记录被修改/创建时电子邮件列的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:37:04.067

你可以尝试这样的事情：

```
SELECT username, email, tbl_user_hist.tstamp
FROM tbl_user_hist 
INNER JOIN tbl_email_hist AS tbl_email_hist1 ON tbl_user_hist.email_pk = tbl_email_hist1.src_email_pk 
WHERE src_user_pk = 1
AND tbl_email_hist1.email_pk IN (
    SELECT tbl_email_hist2.email_pk FROM tbl_email_hist2
    WHERE tbl_user_hist.email_pk = tbl_email_hist2.src_email_pk
    AND tbl_email_hist2.tstamp <= tbl_user_hist.tstamp
    ORDER BY tbl_email_hist2.tstamp DESC
    LIMIT 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T19:27:41.027

刚刚意识到我从来没有回答过这个问题..上面建议的答案不起作用尽管我认为它是导致问题的 IN，但您会收到关于在子条款中有 Limit 语句的错误。

下面这个sql语句解决了MySQL中的问题

```
 Select u.username,
        (Select email
        FROM
        (SELECT tbl_user_hist.src_user_pk, tbl_user_hist.username, tbl_email_hist.email,
        tbl_email_hist.src_email_pk, tbl_email_hist.tstamp, tbl_user_hist.user_pk
        FROM  tbl_email_hist 
        INNER JOIN
        tbl_user_hist ON tbl_email_hist.src_email_pk = tbl_user_hist.email_pk AND
        tbl_email_hist.src_email_pk = tbl_user_hist.email_pk AND 
                              tbl_email_hist.tstamp <= tbl_user_hist.tstamp) as e
        where e.user_pk = u.user_pk ORDER BY e.tstamp desc Limit 1) as email,
        u.tstamp as username_tstamp 

        from tbl_user_hist as u 
```

# c++ - OpenCV 中的 findContour 可以像 Matlab 中的 bwlabel 一样工作吗？

> ID：12539213
> 
> 赞同：1
> 
> 时间：2012-09-21T23:04:25.797
> 
> 标签：c++, image, matlab, opencv

这个问答网站的一些人建议我使用 findContour 来模仿 Matlab 中的 bwlabel。但我不确定，因为我认为轮廓是检测到的边缘的闭合形状，而 bwlabel 中的元素是连接形状。我猜他们可能在逻辑上是一样的。他们在实践中呢？他们真的一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:50:32.480

`bwlabel`将为您提供图像连接组件，即背景中不同连接对象的不同标签。

可能您的意思是[im2bw](http://www.mathworks.com/help/images/ref/im2bw.html)和[imcontours](http://www.mathworks.com/help/images/ref/imcontour.html)提供的组合，即二值化图像和在输出上轻松找到每个保留对象的单个轮廓（边界）的组合。

考虑以下示例：

```
I = imread('coins.png'); % grayscale
level = graythresh(I); % find thershold
BW = im2bw(I, level); % threshold image
imcontour(BW, 1); % plot single contour 
```

![在此处输入图像描述](../Images/ccf25c3d4b5f9e6810de324911a11a11.png)

对于灰度图像，您可以增加请求轮廓的数量，尽管[findContours](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours) 对二进制图像进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:13:53.527

使用这两个库中的任何一个.... [cvBlobslib](http://opencv.willowgarage.com/wiki/cvBlobsLib) 或[cvblob](http://code.google.com/p/cvblob/) ...您将获得有关连接组件的许多功能，例如大小和轮廓以及椭圆度和边界框...您可以过滤 blob 并添加 2 个或更多 blob。 ..尝试一下..在 bwlabel 的底层算法是一个两次扫描连接的组件，其中 cvblob 或 cvBlobslib 是一个一次扫描算法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:56:40.960

我找到[了一篇关于这个的确切文章。](http://lamuerte.soup.io/post/193984474/Speed-comparison-cvBlob-vs-OpenCV-s-cv)快速回答是“是的，它们的最终输出将是相同的。” 所以我可能会选择 findContour，毕竟 cvBlob 仍然使用旧的 C 风格的 API 并且有自己的寻找轮廓的实现。

# google-apps-script - Google 脚本错误 - 找不到方法添加

> ID：12539214
> 
> 赞同：0
> 
> 时间：2012-09-21T23:04:36.260
> 
> 标签：google-apps-script

我一直对这个错误感到困惑。我一直无法弄清楚我错过了什么。如果没有对 headPanel 的调用，UI 可以正常工作，但不会插入标题或文本标签，因此我添加了水平面板以希望添加文本，但遗憾的是错误。请帮我解决这个问题，我需要知道我在搞砸什么。

```
function doGet(e){
  var app = UiApp.createApplication();
  var headPanel = app.createHorizontalPanel().setId('headPanel');
  var header = app.setTitle('Detention Attendance');
  var label = app.createLabel("Please enter attendance for Detention by clicking the       checkbox next to the student's name if they were present. Then click Sumbit.");
  headPanel.add(header);  //* ERROR OCCURS HERE
  headPanel.add(label);
  app.add(pane);

  var panel = app.createVerticalPanel();
  var flexTable = app.createFlexTable().setStyleAttribute('border', '2px solid black')
      .setStyleAttribute('borderCollapse','collapse')
      .setBorderWidth(2); 
  //Get Data from spreadsheet
  var spreadsheetId = 'xxxxxxxxxxxxxxxxxxxxxxxx';//Change it to your Spreadsheet ID
  var dataArray = getData(spreadsheetId);
 //Load data into table cells
  Logger.log(dataArray);
  for (var row = 0; row<dataArray.length; row++){
  if (row > 0) {
    var ticketDate = dataArray[row] [0];
    var dateStamp = Utilities.formatDate(ticketDate, "America/Chicago", "MM/dd/yyyy");
    Logger.log("dateStamp = " +dateStamp);
    dataArray[row] [0] = dateStamp;
    var ticketDate2 = dataArray[row] [16];
    var dateStamp2 = Utilities.formatDate(ticketDate2, "America/Chicago", "MM/dd/yyyy");
    dataArray[row] [16] = dateStamp2;
    Logger.log("DateStamp = " +dateStamp2);
    }

  flexTable.setStyleAttribute("color", "purple").setText(row, 2, dataArray[row][2].toString()).setWidth('300px');
  flexTable.setText(row, 0, dataArray[row][0].toString()).setWidth('600px');
  flexTable.setText(row, 4, dataArray[row][16].toString()).setWidth('300px');    
}  

panel.add(flexTable);
app.add(panel);
return app;
}

function getData(spreadsheetId){
   var ss = SpreadsheetApp.openById(spreadsheetId);
   var sheet = ss.getSheets()[0].getDataRange();
   Logger.log(sheet);

   return sheet.getValues();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T02:08:42.547

您的`header`var 是一个[UiInstance](https://developers.google.com/apps-script/reference/ui/ui-instance#) - 实际上它与 的实例相同`app`，返回是为了方便通过对`.setTitle()`.

该`.add()`方法正在寻找一个 Widget 作为参数，但没有找到它。

你不需要保留那个`header`var - 它只会给你带来麻烦。实际上，您可以在创建 UiApp 实例时设置 Title：

```
var app = UiApp.createApplication().setTitle('Detention Attendance'); 
```

# javascript - 调整窗口大小时可以使用 JavaScript 重新定位元素吗？

> ID：12539219
> 
> 赞同：1
> 
> 时间：2012-09-21T23:05:19.867
> 
> 标签：javascript, css, html, positioning

我正在尝试完成一个单独使用 CSS 很难的定位方案。我可以使用 JavaScript 轻松地做到这一点，使用类似的东西：

```
function onWindowResize(new_width,new_height){
    $('#element')
       .css({  left: some_function(new_width),
               top: another_function(new_height) });
}; 
```

使用这种方法可以吗？可能的缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T23:07:33.780

当然，如果您愿意，可以使用 javascript 来完成。一些调整大小操作需要比纯 CSS 更复杂的逻辑。

在许多情况下，也可以使用纯 CSS 来完成。如果您向我们展示您真正想要完成的工作，您可能会得到一些纯 CSS 的建议。

潜在的缺点：

1.  您的页面需要 javascript 才能正常运行（我认为这几天不是什么大问题）。
2.  与仅使用 CSS 的解决方案相比，在调整窗口大小期间，布局可能不会那么平滑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:07:18.337

两个缺点：

*   如果用户禁用了 JS，将无法工作
*   将您的布​​局与您的 JS 联系起来，最好将其保留在 CSS 中

# javascript - JavaScript：更新连接客户端变量的稳定方法

> ID：12539222
> 
> 赞同：1
> 
> 时间：2012-09-21T23:05:34.790
> 
> 标签：javascript, ajax

我刚刚进入 Web 开发的世界，我正在开发一个小型浏览器游戏，它允许连接的用户控制一个对象（目前是一个三角形！），并简单地在屏幕区域中移动。

目前，我将客户端坐标位置存储在 MySQL 数据库中，并使用 AJAX 更新该位置，大约每秒 30 次。

其他客户的位置也大约每秒轮询 30 次。

然而，我的问题是，这似乎会导致客户端 IP 锁定一个小时，我认为这会在我的主机端自动发生。这可能是正常的默认预防措施吗？我的印象是在一秒钟内进行 30 次 AJAX 民意调查并不是一个特别紧张的数量，但是正如我所提到的，这对我来说是一个新领域。我担心我制造了一些微不足道的 DOS 攻击！

如果是这样，如果有这方面经验的人能指出一种更有效的方法来处理我所描述的那种交互性，我将不胜感激。这一切都导致了一个为期六个月的项目，我将独自完成我最后一年的大学项目，所以我非常乐意花额外的时间来学习更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:29:58.113

你应该做的就是所谓的“混合轮询”。基本上你有一个长时间运行的方法服务器端，它运行一个“无限”循环，每 33 毫秒运行一次（每秒 30 次）。如果数据已更改，此循环会将数据发送到前端的一部分。当缓冲区中的数据变得太大而方法无法处理时，方法将退出。您的客户端一直在轮询以查看是否写入了新数据。如果方法退出，客户端必须重新启动该方法。这是一种混合方法，客户端轮询仅检查客户端数据，除非方法退出，在这种情况下，客户端必须再次轮询以重新启动服务器方法，然后每 33ms 运行一次并将数据推送到客户端.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:10:01.363

查找 Comet（与旧版浏览器兼容但效率不高）、BOSH 或 Web Sockets（理想但与旧版浏览器不兼容）以获取其他方法。

# c - 从 cmd 行读取命令，并在 C 中执行它们

> ID：12539223
> 
> 赞同：0
> 
> 时间：2012-09-21T23:06:06.310
> 
> 标签：c, unix, command-line, execv

我正在编写一个程序来从命令行（linux/unix 命令）获取用户输入，并在我的程序中执行它们。

到目前为止我的步骤：

1.  询问用户输入的命令数
2.  fork() 创建子进程
3.  输出子 PID 和父 PID
4.  允许用户输入每个命令，将每个输入读入 argv 的索引
5.  使用 execv 在 argv 中运行每个命令

主要问题是当它执行时，它只是执行 execv 命令中的“bin/ls/”。

这是运行我的程序的示例输出：

输入命令数：2
孩子的 PID 是 3487。父母的 PID 是 3485
输入 UNIX 命令：ls
输入 UNIX 命令：-al

*文件列表，就像在 CMD 上键入“LS”一样LINE*

处理完成。

这是我的源代码：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>

void main(int argc, char *argv[20])
{
        int pid;
        int num = 0;

        printf("Enter number of commands: ");
        scanf("%d", &argc);

        pid = fork();

        if(pid == 0)
        {
                printf("Child's PID is %d. Parent's PID is %d\n", (int)getpid(), (int)getppid());

                for(num=0; num < argc; num++)
                {
                        printf("Enter a UNIX command: ");
                        scanf("%s", argv[num]);
                }

                argv[num+1] = 0;

                execv("bin/ls/", argv);
        }
        else
        {
                wait(pid);
                printf("Process Complete.\n");
                exit(0);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:33:15.427

`char* argv[20]`首先，您要定义`main`哪个不是一个好主意。如果您传入超过 20 个参数，您将超出数组的范围。

其次，您试图将一个字符串读`scanf("%s", argv[num])`入一个据我所知尚未初始化的地址空间。

“字符串”的 argv[] 数组在调用您的程序时由操作系统初始化，如果您不向程序传递任何参数，您将没有任何“字符串”，这意味着您将写入随机存储器你可能不拥有。

如果您真的想以现在的方式加载命令，请尝试以下操作：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>

void main(int argc, char *argv[])
{
    int pid;
    int num = 0;
    int argc2 = 0;
    char* argv2[20]; // argv2 will point inside of buffer for convenience.
    char* buffer[2000]; // note each array has a limit of 100 characters.

    printf("Enter number of commands: ");
    scanf("%d", &argc2);

    pid = fork();

    if(pid == 0)
    {
            printf("Child's PID is %d. Parent's PID is %d\n", (int)getpid(), (int)getppid());

            for(num=0; num < argc2 && num < 20; num++) // your array is 20 long
            {
                    argv2[num] = &buffer[num * 100];
                    printf("Enter a UNIX command: ");
                    scanf("%s", argv2[num]);
            }

            argv[num] = 0; // no need to add + 1 because the for loop did already anyway.

            execv("Assignments/ls", argv2);
    }
    else
    {
            wait(pid);
            printf("Process Complete.\n");
            exit(0);
    }
} 
```

或者，您可以将参数传递给主程序，主程序只需将它们传递给被调用的程序，如下所示：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>

void main(int argc, char *argv[])
{
    int pid;
    int num = 0;

    printf("You entered %d commands: \n", argc);

    for (num = 0; num < argc; ++num)
    {
        printf("\t%s\n", argv[num]);
    }

    pid = fork();

    if(pid == 0)
    {
            printf("Child's PID is %d. Parent's PID is %d\n", (int)getpid(), (int)getppid());

            execv("Assignments/ls", &argv[1]);
    }
    else
    {
            wait(pid);
            printf("Process Complete.\n");
            exit(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:21:58.090

您的代码存在的一个具体问题是您必须将 argv[idx] 作为参数传递给 exec。通过传递 argv，您正在传递一个 char 指针数组。

还请注意 argc 包含参数的完整计数，并且完整计数包括程序本身。argv[0] 包含您要向其传递参数的程序名称。我没有看到这反映在你的 for 循环中。那就是您正在处理自己的程序并运行它。

我写这些的方法是在一段时间内（或者，如果你愿意的话）遍历 argv，使用一个 int 变量——例如`int idx=0;`——直到我找到一个为空的 argv[idx] 指针。

例如，如果您有三个参数，则 argc 将为 4，而 argv[3] 将是您要处理的最后一个参数。argv[4] 将为空。

根据您收到的一些答案，这里是关于 execv 和 fork 的[讨论](http://www.thegeekstuff.com/2012/03/c-process-control-functions/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:25:37.727

1.  你有错误的逻辑。在 execv 之前使用 fork
2.  将 execv（与 fork 一起）移出循环；
3.  execv 的第一个参数 - 是要执行的二进制文件的路径；2nd - 要传递给二进制文件的参数数组。您在当前目录中拥有名为“Assignments”的子目录并且该目录包含名为“ls”的可执行文件，这是否正确？并且，请仔细阅读“man execv”

**更新：**

忽略上述第 1 点和第 2 点。

人执行：

> ```
>  The execv(), execvp(), and execvpe()  functions  provide  an  array  of
>    pointers  to  null-terminated  strings that represent the argument list
>    available to the new  program.   The  first  argument,  by  convention,
>    should  point  to the filename associated with the file being executed.
>    The array of pointers must be terminated by a NULL pointer. 
> ```

# php - MySQL - 计算用户 WHERE（过去 30 天，过去一年，所有时间）

> ID：12539229
> 
> 赞同：0
> 
> 时间：2012-09-21T23:06:49.800
> 
> 标签：php, mysql

我正在尝试进行查询以检查 clients 表并返回**过去 30 天、365 天和 All Time**具有特定值的用户计数。

所有时间计数很容易：

```
$stmt = $conn->prepare("SELECT count(id) AS count FROM clients WHERE referred =  :refid");
$stmt->bindParam(':refid', $refid);
$stmt->execute();
$totalreferrals = $stmt->fetchAll(); 
```

桌子：

```
id |   signup   | reffered |
----------------------------
2  | 2012-08-24 |   14     |
----------------------------
3  | 2011-10-13 |   14     | 
```

我不确定是否可以使用 UNION 组合查询，或者是否应该只进行三个不同的查询。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T23:26:16.097

我认为您希望在列中而不是在行中，如果是这样的话

```
SELECT  COUNT(CASE WHEN DATEDIFF(CURDATE(),signup) <= 30 THEN id
                   ELSE NULL
              END) AS Last30days ,
        COUNT(CASE WHEN DATEDIFF(CURDATE(), signup) <= 365 THEN id
                   ELSE NULL
              END) AS Last365Days ,
        COUNT(*) AS Alltime
FROM    Table1
WHERE   reffered = 14 
```

SQLFiddle [http://sqlfiddle.com/#!2/6e6ce/2](http://sqlfiddle.com/#!2/6e6ce/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:21:50.613

也许这可以解决问题：

```
SELECT count(id) AS count FROM clients WHERE referred = :refid AND BETWEEN ADDDATE(NOW(), INTERVAL -1 MONTH) AND NOW();

SELECT count(id) AS count FROM clients WHERE referred = :refid AND BETWEEN ADDDATE(NOW(), INTERVAL -1 YEAR) AND NOW(); 
```

# java - 强制关闭！！在 RGB 值 0-255 中分配随机颜色的按钮

> ID：12539230
> 
> 赞同：0
> 
> 时间：2012-09-21T23:06:59.737
> 
> 标签：java, android, button, random, integer

我的应用程序中的其他所有内容都有效，但是当我添加

```
public void onClickRandomColor(View v) {
        Random rRed = null;
        Random rGreen = null;
        Random rBlue = null;
        int min = 0, max = 255;
        int randomRed = rRed.nextInt(max - min + 1) + min;
        int randomGreen = rGreen.nextInt(max - min + 1) + min;
        int randomBlue = rBlue.nextInt(max - min + 1) + min;
        Rset = randomRed;
        Gset = randomGreen;
        Bset = randomBlue;
    } 
```

到 MainActivity.java 和到 activity_main.xml 的 ONCLICK 行

```
<Button
        android:id="@+id/btnRandom"
        android:layout_below="@+id/btnChoose"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:onClick="onClickRandomColor"
        android:text="@string/random"/> 
```

她用力逼近我。还有很多其他控件，滑块使用 Rset、Gset 和 Bset 就好了。它必须与我获得随机整数的方法有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:14:14.807

1.  您需要创建 Random 对象`new Random()`而不是分配 null。你不能在 null 上调用任何东西，你必须创建对象。
2.  拥有三个不同的 Random 对象是没有意义的，您可以从单个对象中获得无限数量的随机数

您更正的代码如下所示：

```
public void onClickRandomColor(View v) {
    Random rnd = new Random();
    int min = 0, max = 255;
    int randomRed = rnd.nextInt(max - min + 1) + min;
    int randomGreen = rnd.nextInt(max - min + 1) + min;
    int randomBlue = rnd.nextInt(max - min + 1) + min;
    Rset = randomRed;
    Gset = randomGreen;
    Bset = randomBlue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:16:28.083

您正在创建初始化为空值的 Random 。

将它们更改为`Random rRed = new Random();`

你基本上是在尝试做 null.nextInt() 这显然是行不通的。

希望这会有所帮助！

干杯!

# javascript - Javascript提示/文本框仅数字

> ID：12539237
> 
> 赞同：0
> 
> 时间：2012-09-21T23:07:33.360
> 
> 标签：javascript, html, css

嘿伙计们，我只是在学习 javascript，不过我有一些 html 和 css 背景。

我不知道如何只允许在提示中输入数字值，或者检查它是否是数字而不是如果不是则重新提示。文本框也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:10:28.210

这是我在一些代码中使用的一个很好的数字测试功能（来自[Validate decimal numbers in JavaScript - IsNumeric()](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric)）。如果是数字则返回 true，否则返回 false。这是浮点验证，而不是整数

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:58:49.880

你已经有了一个很好的答案。这个答案是对您可以做的事情的另一种看法。

假设您的号码字段如下所示

`<input type="text" name="num_fld" id="num_fld" onchange="return chkNum();" />`

你已经定义了一个像这样的javascript函数

```
function chkNum()
{
   var rc = false;

   if(!isNaN(parseFloat(n)) && isFinite(n))
   {
     rc = true;
   }
   else
   {
      document.getElementById("num_fld").value = 0;
   }
   return rc;
} 
```

这个函数检查数字是否真的是一个数字，但也会对输入进行猴子，所以错误的值不会留在原地。顺便说一句，我不太确定返回 false 是否会阻止输入数字（有点像在验证函数中。）我相信从我的测试中返回 false 确实会影响该字段中的内容，但我不是 100% 确定这一点.

您还可以在失败时更改输入字段的背景和/或文本颜色（测试的 else 部分，因此用户会注意到有问题。`alert();`这对测试很有用，但有点搞砸了您网站在生产中的外观.

# php - 使用 AJAX 图像上传预览图像

> ID：12539241
> 
> 赞同：0
> 
> 时间：2012-09-21T23:08:30.820
> 
> 标签：php, jquery, html, ajax, file-upload

我创建了一个 ajax 图片上传系统。当用户选择他要上传的图像时，出于安全原因检查图像，然后上传到文件夹。然后在 ajax 回调中通过该文件夹的路径显示图像。问题是我希望在用户单击按钮后将图像上传到文件中。这将迫使我依赖图像的临时路径文件`$_FILES['file']['tmp_name']`作为要显示的图像的来源。但是，这是行不通的。

我的问题是这个。如果我不能使用临时文件路径作为上传图像的图像源，我的其他选择是什么？我想我可以在单击提交按钮时再次移动文件并删除旧图像，但用户可能会上传文件，退出浏览器，并将图像永远留在文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:11:43.390

您可以创建一个临时目录并将上传的文件移动到那里，然后如果用户在看到预览后不想上传它，您可以删除图像。您不能使用 php 的临时文件，因为它会持续到脚本完成执行。

# mysql - 设计两张不同的桌子

> ID：12539242
> 
> 赞同：0
> 
> 时间：2012-09-21T23:08:35.697
> 
> 标签：mysql, sql, sqlite

我设计了以下内容，但我正在寻找一种更简单的设计方法（目前，当我要检索用户感兴趣的子类别列表时，我应该对每种类型的运动有不同的查询）：

用户表有用户信息每个用户对运动类别的数量感兴趣，每个类别都有不同的子类别，用户可以对类别（所有子类别）或特定类别的多个子类别感兴趣。

```
User      UserID                                         12

Sport     CategoryID Category                            1 Aquatic,    2 Running 

Aquatic   SubCategoryID SubCategory,CategoryID           1 Swimming 1, 2 Surfing 2 

Running   SubCateogryID SubCategory,CategoryID           1 200m 2,     2 300m 2 

LikeSport UserID CateogryID SubCategoryID                12 1 1,       12 2 nill 
```

它显示 ID 为 12 的用户喜欢水上运动，但只喜欢游泳，并且喜欢所有类型的跑步运动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:16:09.673

用户表：userId,userName

类别表：categoryId、categoryName

subCategory 表：subCategoryId,subCategoryName,categoryId (FK)

像表：userId(FK),categoryId(FK),subCategoryId(FK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:22:27.950

```
Users:                         UserID
Categories:                    CategoryID, CategoryName
Subcategories:                 SubcategoryID, SubcategoryName
CategoriesSubcategories:       CategorySubcategoryID, CategoryID, SubcategoryID
LikeSports:                    UserID, CategorySubcategoryID 
```

# iphone - openURL 本地文件或强制 UIDocumentInteractionController 使用特定的应用程序

> ID：12539243
> 
> 赞同：6
> 
> 时间：2012-09-21T23:08:45.813
> 
> 标签：iphone, ios, ipad, openurl

我希望用另一个应用程序打开一个文件（本地存储在我的应用程序中）。

目前，我正在使用 openURL（有一个专用的 url 方案），如果我使用托管在互联网上的文件，它可以正常工作，但我想使用本地文件：a）它可以离线工作 b）很多我的用户不在小区覆盖范围内或在国际漫游的时间

到目前为止我所尝试的：我没有任何运气告诉 openURL 使用本地文件，我尝试了一些方法，但它们都是这样的

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"ext"];
      NSURL *fileURL = [NSURL fileURLWithPath:filePath];
      [[UIApplication sharedApplication] openURL:fileURL]; 
```

还

```
 NSURL *fileURL = [[NSBundle mainBundle] URLForResource: @"test" withExtension:@"ext"];
      [[UIApplication sharedApplication] openURL:fileURL]; 
```

还手动使用具有 localhost/ 和 file:// 和 var/mobile 等路径的不同变体的字符串

没有任何效果（无论如何对我来说）

所以，我环顾四周，遇到了[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)

我可以使用 UIDocumentInteractionController 让用户使用其他应用程序打开我的本地文件 - 但是它总是提供其他应用程序的多个选项以供使用，例如，其他应用程序之一可以是“Dropbox”。

我不想让用户下载（或从技术上上传）我的文件的副本以供他们以其他方式使用。它包含我不希望如此容易获得的数据。

当我的预期应用程序（不是我制作的）打开文件时，它不允许任何形式的保存或访问原始数据。

我意识到，通过将文件包含在我的应用程序中，任何认真想要获得它的人都可以，我只是不想闪现一个大菜单，说“如果你想要自己的副本从中制作衍生作品，就在这里”

理想情况下，我可以使用 openURL 但我认为这是因为其他应用程序没有响应的“沙箱” - 在 Android 中，我使用 mode_world_readable 将文件声明为其他应用程序可读（因此将其放在沙箱之外，它不允许其他应用程序对其进行写入，只需读取）-iOS 是否也可以这样做？

否则，如果我可以强制 UIDocumentInteractionController 使用特定的应用程序而不显示菜单 - 那也很好。

[前段时间问了类似的问题](https://stackoverflow.com/questions/6807764/uidocumentinteractioncontroller-opening-file-in-a-specific-app-without-options)

抱歉，阅读时间长，任何帮助表示赞赏。

编辑：我刚刚收到 Apple 技术支持的答复，他们告诉我这目前是不可能的（就在 iOS 6 发布之后）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T06:15:59.047

是的，由于 iOS 上严格的沙盒，您受到了限制。这里有一些想法。

您可以通过继承 QLPreviewController 来覆盖 UIDocumentInteractionController 的功能。然后，您可以替换显示“打开方式”菜单的标准栏按钮项。看看这篇文章，了解一种将 QLPreviewController 子类化的解决方案：[QLPreviewController remove or add UIBarButtonItems](https://stackoverflow.com/questions/6957091/qlpreviewcontroller-remove-or-add-uibarbuttonitems)

当然，我相信应用程序间共享的工作方式很大程度上不在你的掌控之中。如果应用程序已注册为能够处理某种类型的文件，无论您是否愿意，它都会显示为“打开方式”列表中的选项之一。我不相信您可以过滤该列表中显示的应用程序。

以下是我想过但从未尝试过的两个实验性想法：

*   您可以对您尝试传递的文件中的数据进行 base64 编码——它只是将二进制转换为文本——并将其作为用于启动其他应用程序的自定义 URL 的一部分传递。然后另一个应用程序可以 base64 将相同的数据解码回二进制文件。不利的一面是 URL 的长度有限制，这意味着您发送的“文件”必须非常小。

*   接下来，我什至不知道这是否可能，但我想知道您是否可以使用一些[隐写](http://en.wikipedia.org/wiki/Steganography)算法将文档数据嵌入图像中，然后将其交给相机胶卷。然后，另一个应用程序可以打开相机胶卷并将图像再次解码回数据。... 是的。我知道...晦涩难懂，但尝试实施可能会很有趣。;-)

不确定是否有任何帮助，但您确实说过“感谢任何帮助”。;-)

此致。

# python - 下划线在 Python 中代表什么？

> ID：12539245
> 
> 赞同：6
> 
> 时间：2012-09-21T23:09:06.867
> 
> 标签：python

我对 Python 有点陌生，所以我试图阅读现有代码。不过，我对此的语法有点困惑。

例如：

```
rlist, _, _ = select.select(sockets, [], []) 
```

我知道这`select.select()`需要 3 个列表（我假设`[]`只是指空列表），但是`_`用于表示某种占位符吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T23:13:45.573

这只是一个变量的名称！通常人们使用`_`临时或无关紧要的变量。

正如其他人所说，`_`是翻译库 gettext 的常见别名。如果您看到它被称为函数，您可以识别它何时被用作 gettext，例如。`_('Hello, world!')`.

**Protip：**在 python 控制台中，它可用于检索最后一条语句的结果。

```
>>> 3 + 4
7
>>> a = _
>>> print a
7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T23:12:23.920

它只是一个匿名变量，对python没有特殊意义。将其与`i`用作循环计数器进行比较。

您通常使用它来记录周围的代码将忽略该变量的值。

在 python 交互式控制台中，最后一个表达式的结果被分配给`_`，但这不会在 python 程序中执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T23:14:46.633

尽管其他答案说了什么，但在 Python`_` *中确实*具有特殊含义。这是在交互式提示下打印的最后一个结果。

```
>>> 2+2
4
>>> _+2
6 
```

（当然，如果没有交互式提示，例如，因为您从 shell 运行 Python 脚本，那么它没有特殊含义。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T23:10:38.900

它代表一个*匿名变量*。使用它是因为变量是必需的，但可以忽略该值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T23:13:25.713

通常，当您不再需要引用该变量时，您会使用一个下划线来命名一个变量。例如，像这样：

```
for _ in range(10):
    print "hello" 
```

这只会打印 10 次“hello”，我们永远不需要引用循环控制变量（`_`在这种情况下）。

在您的示例中，`select.select(sockets, [], [])`返回一个元组（或列表或集合），您似乎只需要其中的第一项，因此您使用下划线。

# javascript - CSS 3D 变换

> ID：12539246
> 
> 赞同：2
> 
> 时间：2012-09-21T23:09:08.737
> 
> 标签：javascript, css, css-transforms, css-animations

我正在尝试创建一个 3D 变换效果，其中一个`<div>`折叠成飞机并飞离屏幕。

为了实现这一点，我现在创建了多个`<div>`元素 - 每个折叠一个 - 然后对每个元素应用 CSS 3D 转换以转换成纸飞机，然后对整个事物进行关键帧处理以飞出屏幕。

问题是我想在一个带有用户输入文本的 div 上做同样的事情——本质上我希望 div 中的文本也可以折叠。似乎没有办法使用我的方法来做到这一点，因为我将页面拆分为每个折叠的 div...

任何人都知道任何其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:12:19.083

您可以克隆节点，将其剪切，然后将其克隆成两半，然后继续您已经在做的动画。

这是一个例子：http: [//jsfiddle.net/rCAA4/](http://jsfiddle.net/rCAA4/)

示例 HTML：

```
<div class="box">
    <p class="text">
       ...your text goes here...
    </p>
</div> 
```

..和javascript（jQuery）：

```
var $box = $('.box'),
    $text = $('.text'),
    width_of_$box = $box.css('width'),
    half_width_of_$box = parseInt(width_of_$box)/2 + "px";

$text.css('width', width_of_$box);

$box.css({
    'width': half_width_of_$box,
    'overflow': 'hidden'
});

$box
    .clone()
    .find('.text')
        .css('margin-left', "-" + half_width_of_$box)
    .end().appendTo('body'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:18:14.670

您可能可以将输入文本字段转换为输入后存储图像的画布。然后，使用 javascript 对画布进行编程。

我还没有尝试过。但是，我认为它可能会起作用。

[使用 javascript 或 jquery 即时将文本转换为图像](https://stackoverflow.com/questions/8292474/text-to-image-on-fly-with-javascript-or-jquery)

# ios - BlocksKit 和 Xcode 4.5

> ID：12539247
> 
> 赞同：0
> 
> 时间：2012-09-21T23:09:12.547
> 
> 标签：ios, xcode

我刚刚更新到 Xcode 4.5 并收到此错误

ld：文件是通用的（3 个切片）但不包含 a(n) armv7s 切片：

我尝试编译 BlocksKit，但收到此错误 /Users/toddbates/Desktop/ios demos/BlocksKit/A2DynamicDelegate/libffi/ios/src/x86/darwin.S:34:10: 'fficonfig.h' file not found

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:15:58.180

要摆脱链接器错误，`armv7s`请从`valid architectures`构建设置中的条目中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:52:47.057

我使用 Cocoapods 添加了 BlocksKit，一切正常。使用它有一个小的学习曲线，但在那之后我可以看到它的优势。似乎[https://github.com/rakumx/BlocksKitFramework.framework](https://github.com/rakumx/BlocksKitFramework.framework)上的预编译框架可能已经过时了。仍然不确定为什么 BlocksKit 项目本身无法编译。

# r - 计算数据框中连续行对之间的差异 - R

> ID：12539248
> 
> 赞同：5
> 
> 时间：2012-09-21T23:09:17.537
> 
> 标签：r

我有一个 data.frame，其中重复每个基因名称并包含 2 个条件的值：

```
df <- data.frame(gene=c("A","A","B","B","C","C"),
condition=c("control","treatment","control","treatment","control","treatment"),
count=c(10, 2, 5, 8, 5, 1), 
sd=c(1, 0.2, 0.1, 2, 0.8, 0.1))

  gene condition count  sd
1    A   control    10 1.0
2    A treatment     2 0.2
3    B   control     5 0.1
4    B treatment     8 2.0
5    C   control     5 0.8
6    C treatment     1 0.1 
```

我想计算治疗后“计数”是否增加或减少，并将它们标记为此类和/或子集。即（伪代码）：

```
for each unique(gene) do 
   if df[geneRow1,3]-df[geneRow2,3] > 0 then gene is "up"
       else gene is "down" 
```

这最终应该是什么样子（最后一列是可选的）：

```
up-regulated
 gene condition count  sd  regulation
 B    control     5    0.1    up
 B    treatment   8    2.0    up

down-regulated
 gene condition count  sd  regulation
 A    control     10   1.0    down
 A    treatment   2    0.2    down
 C    control     5    0.8    down
 C    treatment   1    0.1    down 
```

我一直在为此绞尽脑汁，包括玩 ddply，但我没有找到解决方案 - 请倒霉的生物学家。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T23:18:00.360

`plyr`解决方案看起来像：

```
library(plyr)
reg.fun <- function(x) {
  reg.diff <- x$count[x$condition=='control'] - x$count[x$condition=='treatment']
  x$regulation <- ifelse(reg.diff > 0, 'up', 'down')

  x
}

ddply(df, .(gene), reg.fun)

  gene condition count  sd regulation
1    A   control    10 1.0         up
2    A treatment     2 0.2         up
3    B   control     5 0.1       down
4    B treatment     8 2.0       down
5    C   control     5 0.8         up
6    C treatment     1 0.1         up
> 
```

您还可以考虑使用不同的包和/或不同形状的数据来执行此操作：

```
df.w <- reshape(df, direction='wide', idvar='gene', timevar='condition')

library(data.table)
DT <- data.table(df.w, key='gene')

DT[, regulation:=ifelse(count.control-count.treatment > 0, 'up', 'down'), by=gene]

   gene count.control sd.control count.treatment sd.treatment regulation
1:    A            10        1.0               2          0.2         up
2:    B             5        0.1               8          2.0       down
3:    C             5        0.8               1          0.1         up
> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T23:37:03.803

像这样的东西：

```
df$up.down <- with( df, ave(count, gene,
                FUN=function(diffs) c("up", "down")[1+(diff(diffs) < 0) ]) )
spltdf <- split(df, df$up.down)

> df
  gene condition count  sd up.down
1    A   control    10 1.0    down
2    A treatment     2 0.2    down
3    B   control     5 0.1      up
4    B treatment     8 2.0      up
5    C   control     5 0.8    down
6    C treatment     1 0.1    down
> spltdf
$down
  gene condition count  sd up.down
1    A   control    10 1.0    down
2    A treatment     2 0.2    down
5    C   control     5 0.8    down
6    C treatment     1 0.1    down

$up
  gene condition count  sd up.down
3    B   control     5 0.1      up
4    B treatment     8 2.0      up 
```

# vim - PyCharm Vim 插件换行

> ID：12539249
> 
> 赞同：0
> 
> 时间：2012-09-21T23:09:22.687
> 
> 标签：vim, pycharm, ideavim

在带有 Vim 插件的 PyCharm 中，如何使光标换行（从一行的开头到前一行的结尾，反之亦然）？

.vimrc 是：

```
set whichwrap=<,>,h,l,[,] 
```

但是没有办法在 PyCharm 中配置 .vimrc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:53:02.323

IdeaVim 插件[已经读取](http://youtrack.jetbrains.com/issue/VIM-134) `.vimrc`，但它不支持所有选项，因为它只模拟 vim 功能的一部分。如果某些选项不受支持，请向[IdeaVim 问题跟踪器](http://youtrack.jetbrains.net/issues/VIM)提交功能请求。

请注意，它是一个开源插件，如果您确实需要此功能，请尝试自己添加它并向供应商发送拉取请求或补丁。

# wcf-client - 在 Visual Studio 外部运行时，来自 WCF 客户端的传出消息不完整

> ID：12539256
> 
> 赞同：2
> 
> 时间：2012-09-21T23:10:20.803
> 
> 标签：wcf-client

我有一个用 VB.NET 2008 编写的 WCF 客户端应用程序作为 Windows 窗体应用程序。此客户端应用程序成功地与另一家公司维护的远程非 WCF 服务通信。问题是 - 只有当客户端应用程序从 Visual Studio (VS2008) 中运行时，通信才会成功，而不是作为构建的可执行文件运行时。当客户端应用程序作为可执行文件运行时，远程服务会返回此消息：

*“HTTP 请求未经授权，客户端身份验证方案‘匿名’。从服务器接收到的身份验证标头为‘’。远程服务器返回错误：(401) 未经授权。”*

再深入一点，我注意到了这个错误的原因。当客户端应用程序在 VS 外部运行时发送到远程服务的消息缺少在 VS 内部运行时包含的部分。当应用程序在 VS（即正常运行的那个）中运行时发送的消息如下所示，其中敏感信息替换为“x”：

```
<HttpRequest     xmlns="http://schemas.microsoft.com/2004/06/ServiceModel/Management/MessageTrace">
  <Method>POST</Method>
  <QueryString></QueryString>
  <WebHeaders>
    <VsDebuggerCausalityData>uIDPo6ppHQnHmDRGnZfDLPni6RYAAAAAaEkfl5VJXUauv5II8hPneT1AMwBfkoZNgfxEAZ2x4zQACQAA</VsDebuggerCausalityData>
    <AUTHORIZATION>xxxxxxxxxxxxxxxxxxxxxxxxxxxx</AUTHORIZATION>
  </WebHeaders>
</HttpRequest>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none"></Action>
  </s:Header>
  <s:Body s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <q1:getNewEvents_PPHS xmlns:q1="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxins">
      <loginObject href="#id1" xmlns=""></loginObject>
    </q1:getNewEvents_PPHS>
    <q2:LoginObject id="id1" xsi:type="q2:LoginObject" xmlns:q2="java:zoasis.ws.datamodel.general">
      <clinicId xsi:type="xsd:int" xmlns="">xxxxx</clinicId>
      <corporateId xsi:type="xsd:int" xmlns="">x</corporateId>
      <password xsi:type="xsd:string" xmlns="">xxxxx</password>
      <userName xsi:type="xsd:string" xmlns="">xxxx</userName>
    </q2:LoginObject>
  </s:Body>
</s:Envelope> 
```

当作为一个独立的可执行文件运行时，客户端应用程序发出与上面*相同的内容，只是缺少整个 HttpRequest 部分*- 从 <HttpRequest> 到 </HttpRequest> 的所有内容

谁能告诉我为什么在 Visual Studio 之外运行客户端应用程序会导致消息的 HttpRequest 部分丢失？app.config 文件在这两种情况下都是相同的。

谢谢。

* * *

根据迈克的要求，这里有更多信息。客户端代理是使用 Visual Studio 2008 中的“添加服务引用”创建的。

创建发送到服务的消息的代码如下所示，分为三个部分。

第一部分是一个名为 AntechServiceReference 的类。它有两种相关的方法。它的构造函数构建将用于与 Web 服务交互的代理。另一个称为 GetPendingDownloads 的方法调用 Web 服务方法。

```
Imports WebServiceInterface.AntechServiceReference
Imports System.Configuration.ConfigurationManager
Imports System.ServiceModel
Imports System.ServiceModel.Security
Imports System.Text
Imports System.IO
Imports System.Xml

Public Class AntechLabDataAccess
    ' This class controls all data interaction with the remote Antech web service.

    Private ClassName As String = "AntechLabDataAccess"
    Private mErrText As String
    Private mAntServProxy As ZoasisGroupServicesPortClient
    Private mLoginObject As WebServiceInterface.AntechServiceReference.LoginObject
    Private mLabEventIDs As WebServiceInterface.AntechServiceReference.LabAccessionIdObject()

    Public Sub New()
        Dim Action As String = ""
        Dim CustomBehavior As MessageEndPointBehavior

        Try
            mErrText = ""
            Action = "Creating proxy for web service. "

            ' Create a proxy to the remote web service for use in this object. Supply client credentials
            ' from app.config

            mAntServProxy = New ZoasisGroupServicesPortClient("ZoasisGroupServicesPort")

            ' Retrieve access credentials for this web service from app.config.
            Action = "Setting up login object. "
            mLoginObject = New WebServiceInterface.AntechServiceReference.LoginObject
            If Not AppSettings("ClinicID") Is Nothing Then
                mLoginObject.clinicId = Integer.Parse(AppSettings("ClinicID"))
            End If
            If Not AppSettings("CorporateID") Is Nothing Then
                mLoginObject.corporateId = Integer.Parse(AppSettings("CorporateID"))
            End If
            If Not AppSettings("Password") Is Nothing Then
            mLoginObject.password = AppSettings("Password")
            End If
            If Not AppSettings("UserName") Is Nothing Then
                mLoginObject.userName = AppSettings("UserName")
            End If

            ' Add our custom behavior to the proxy. This handles creation of the message credentials
            ' necessary for web service authorization.
            Action = "Adding custom behavior to the proxy. "
            CustomBehavior = New MessageEndPointBehavior
            mAntServProxy.Endpoint.Behaviors.Add(CustomBehavior)

        Catch ex As Exception
            mErrText = "Error caught in class [" & ClassName & "], method [New]. Action = " & Action & " Message = " & ex.Message & ". "
            If Not ex.InnerException Is Nothing Then
                mErrText &= "Additional Info: " & ex.InnerException.ToString & ". "
            End If
            Throw New Exception(mErrText)
        End Try

    End Sub

    Public Sub GetPendingDownloads()
        Dim Action As String = ""

        Try
            mErrText = ""
            Action = "Calling getNewEvents_PPHS. "
            mLabEventIDs = mAntServProxy.getNewEvents_PPHS(mLoginObject)

        [catches are here]

        End Try

    End Sub

End Class 
```

除了创建代理之外，上面的构造函数还为其添加了端点行为。该行为在接下来显示的类中定义。此行为的目的是添加自定义消息检查器，以便在发送消息之前将授权信息注入 HTTP 标头：

```
Imports System.ServiceModel.Description

Public Class MessageEndPointBehavior
    Implements IEndpointBehavior
    ' This class is used to make our custom message inspector available to the system.

    Public Sub AddBindingParameters(ByVal endpoint As System.ServiceModel.Description.ServiceEndpoint, ByVal bindingParameters As System.ServiceModel.Channels.BindingParameterCollection) Implements System.ServiceModel.Description.IEndpointBehavior.AddBindingParameters
        ' Not Implemented
    End Sub

    Public Sub ApplyClientBehavior(ByVal endpoint As System.ServiceModel.Description.ServiceEndpoint, ByVal clientRuntime As System.ServiceModel.Dispatcher.ClientRuntime) Implements System.ServiceModel.Description.IEndpointBehavior.ApplyClientBehavior
        ' Add our custom message inspector to the client runtime list of message inspectors.
        clientRuntime.MessageInspectors.Add(New MessageInspector())
    End Sub

    Public Sub ApplyDispatchBehavior(ByVal endpoint As System.ServiceModel.Description.ServiceEndpoint, ByVal endpointDispatcher As System.ServiceModel.Dispatcher.EndpointDispatcher) Implements System.ServiceModel.Description.IEndpointBehavior.ApplyDispatchBehavior
        ' Not Implemented
    End Sub

    Public Sub Validate(ByVal endpoint As System.ServiceModel.Description.ServiceEndpoint) Implements System.ServiceModel.Description.IEndpointBehavior.Validate
        ' Not Implemented
    End Sub
End Class 
```

最后一段代码是自定义消息检查器本身：

```
Imports System.ServiceModel.Dispatcher
Imports System.ServiceModel.Channels
Imports System.Configuration.ConfigurationManager
Imports System.Text

Public Class MessageInspector
    Implements IClientMessageInspector
    ' This class gives access to the outgoing SOAP message before it is sent so it can
    ' be customized.

    Private mUserName As String
    Private mPassword As String
    Private mErrText As String

    Public Sub New()
        Dim CredentialsProvided As Boolean

        CredentialsProvided = False
        mUserName = AppSettings("CliCredUserName")
        If Not mUserName Is Nothing Then
            If mUserName.Trim <> "" Then
                CredentialsProvided = True
            End If
        End If

        If CredentialsProvided Then
            CredentialsProvided = False
            mPassword = AppSettings("CliCredPassword")
            If Not mPassword Is Nothing Then
                If mPassword.Trim <> "" Then
                    CredentialsProvided = True
                End If
            End If
        End If

        If CredentialsProvided Then
            mUserName = mUserName.Trim
            mPassword = mPassword.Trim
        Else
            Throw New Exception("This class (MessageInspector) requires information from the app.config file - specifically " _
            & "AppSettings values for CliCredUserName and CliCredPassword. One or both of these is missing. ")
        End If

    End Sub

    Public Sub AfterReceiveReply(ByRef reply As System.ServiceModel.Channels.Message, ByVal correlationState As Object) Implements System.ServiceModel.Dispatcher.IClientMessageInspector.AfterReceiveReply
        ' Not Implemented
    End Sub

    Public Function BeforeSendRequest(ByRef request As System.ServiceModel.Channels.Message, ByVal channel As System.ServiceModel.IClientChannel) As Object Implements System.ServiceModel.Dispatcher.IClientMessageInspector.BeforeSendRequest

        Dim HTTPMsgHdr As HttpRequestMessageProperty
        Dim objHTTPRequestMsg As Object = Nothing
        Dim Auth As String = ""
        Dim Action As String = ""
        Dim BinaryData As Byte()

        Try
            Action = "Checking HTTP headers. "
            If request.Properties.TryGetValue(HttpRequestMessageProperty.Name, objHTTPRequestMsg) Then
                Action = "Changing existing HTTP header. "
                HTTPMsgHdr = CType(objHTTPRequestMsg, HttpRequestMessageProperty)
                If Not HTTPMsgHdr Is Nothing Then
                    If String.IsNullOrEmpty(HTTPMsgHdr.Headers("AUTHORIZATION")) Then
                        Auth = mUserName & ":" & mPassword
                        ReDim BinaryData(Auth.Length)
                        BinaryData = Encoding.UTF8.GetBytes(Auth)
                        Auth = Convert.ToBase64String(BinaryData)
                        Auth = "Basic " & Auth
                        HTTPMsgHdr.Headers("AUTHORIZATION") = Auth
                    End If
                Else
                    Throw New Exception("Received unexpected empty object HTTPMsgHdr from request properties. " _
                    & "This error occurred in class ""MessageInspector"" and function ""BeforeSendRequest."" ")
                End If
            End If

        Catch ex As Exception
            mErrText = "Error caught in BeforeSendRequest function of MessageInspector class: Action = " _
            & Action & "; Message = " & ex.Message & " "
            If Not ex.InnerException Is Nothing Then
                mErrText &= "Additional Information: " & ex.InnerException.ToString & " "
            End If
            Throw New Exception(mErrText)
        End Try

        Return Convert.DBNull

    End Function
End Class 
```

最后，这是配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
   <configSections>
   </configSections>
   <appSettings>
      <!-- Client Credentials -->
      <add key="CliCredUserName" value="xxxxxxx"/>
      <add key="CliCredPassword" value="xxxxxxx"/>

      <!-- Login Object Fields -->
      <add key="ClinicID" value="xxxxx"/>
      <add key="CorporateID" value="x"/>
      <add key="Password" value="xxxxx"/>
      <add key="UserName" value="xxxx"/>

    </appSettings>

   <system.serviceModel>
      <diagnostics>
         <messageLogging logEntireMessage="false" logMalformedMessages="false"
            logMessagesAtServiceLevel="false" logMessagesAtTransportLevel="false" />
      </diagnostics>
      <bindings>
         <basicHttpBinding>
            <binding name="ZoasisGroupServicesPort" closeTimeout="00:01:00"
               openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
               allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
               maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
               messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
               useDefaultWebProxy="true">
               <readerQuotas maxDepth="32" maxStringContentLength="118192" maxArrayLength="16384"
                  maxBytesPerRead="4096" maxNameTableCharCount="16384" />
               <security mode="Transport">
                  <transport clientCredentialType="None" proxyCredentialType="None"
                     realm="" />
                  <message clientCredentialType="UserName" algorithmSuite="Default" />
               </security>
            </binding>
         </basicHttpBinding>
      </bindings>
      <client>
         <endpoint address="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
            binding="basicHttpBinding" bindingConfiguration="ZoasisGroupServicesPort"
            contract="AntechServiceReference.ZoasisGroupServicesPort" name="ZoasisGroupServicesPort" />
      </client>
   </system.serviceModel>
    <system.net>
        <!-- Important: The following setting strips off the "HTTP/1.1 100 Continue" banner from incoming 
             messages. Unless this is done, incoming XML messages are not recognized as XML. -->
        <settings>
            <servicePointManager expect100Continue="false"/>
        </settings>
    </system.net>
</configuration> 
```

正如我之前提到的，这是一个正常工作的 WCF 客户端，它成功调用服务并下载数据 - 但仅在 Visual Studio 中运行时，这是我不理解的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:36:06.733

这是我必须做的来解决这个问题。在 MessageInspector 类的 BeforeSendRequest 函数中，我不得不添加如下所示的代码（即感叹号行之间的线条 - !!!!!!）

```
Action = "Checking HTTP headers. "
If request.Properties.TryGetValue(HttpRequestMessageProperty.Name, objHTTPRequestMsg) Then
   Action = "Changing existing HTTP header. "
   HTTPMsgHdr = CType(objHTTPRequestMsg, HttpRequestMessageProperty)
   If Not HTTPMsgHdr Is Nothing Then
      If String.IsNullOrEmpty(HTTPMsgHdr.Headers("AUTHORIZATION")) Then
         Auth = mUserName & ":" & mPassword
         ReDim BinaryData(Auth.Length)
         BinaryData = Encoding.UTF8.GetBytes(Auth)
         Auth = Convert.ToBase64String(BinaryData)
         Auth = "Basic " & Auth
         HTTPMsgHdr.Headers("AUTHORIZATION") = Auth
      End If
   Else
      Throw New Exception("Received unexpected empty object HTTPMsgHdr from request properties. " _
         & "This error occurred in class ""MessageInspector"" and function ""BeforeSendRequest."" ")
   End If
' !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
' Added this section
Else
   Action = "Creating new HTTP header. "
   HTTPMsgHdr = New HttpRequestMessageProperty
   If String.IsNullOrEmpty(HTTPMsgHdr.Headers("AUTHORIZATION")) Then
      Auth = mUserName & ":" & mPassword
      ReDim BinaryData(Auth.Length)
      BinaryData = Encoding.UTF8.GetBytes(Auth)
      Auth = Convert.ToBase64String(BinaryData)
      Auth = "Basic " & Auth
      HTTPMsgHdr.Headers("AUTHORIZATION") = Auth
   End If
   request.Properties.Add(HttpRequestMessageProperty.Name, HTTPMsgHdr) 
' End of Added section
' !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
End If 
```

出于某种原因，我仍然不清楚，当我将应用程序作为可执行文件运行时，传递给“BeforeSendRequest”函数的 request.properties 中不存在“HttpRequestMessageProperty.Name”属性。我必须显式创建它 - 与我在 Visual Studio 中以调试模式运行应用程序时不同。（感谢 Mike Parkhill，他提出“If”条件可能没有像我预期的那样执行。结果我需要一个额外的 ELSE 子句，如上所示。）

# vb.net - 单击导航器保存更改时，Datagridview 未将更改保存到数据库

> ID：12539260
> 
> 赞同：0
> 
> 时间：2012-09-21T23:10:49.257
> 
> 标签：vb.net, winforms, datagridview

这是一个使用 EF 的 VB.NET、Winforms 应用程序。在我的表单上，我有一个 datagridview、一个数据绑定源和一个 bindingNavigator... 我可以编辑 datagridview 的单元格，但是当我单击保存更改时，该值只会保存到我重新加载表单。？。？直接查看数据库表，我可以看到该值实际上从未改变.. 下面是处理点击的子..

```
Private Sub UnitBindingNavigatorSaveItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles UnitBindingNavigatorSaveItem.Click
    UnitDataGridView.CommitEdit(DataGridViewDataErrorContexts.CurrentCellChange)
    db.SaveChanges()
End Sub 
```

从我读过的内容来看，这似乎是我所需要的，但显然它以某种方式错了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:48:39.500

I made a work around for it for the time being... I simply use the CellEndEdit event and get the row info from that. Next I get the value of the column that holds the id and update the database from there. Seems like a long way around but is the only way I can get it to write any data at the moment...

# java - Java数组排序日期修改

> ID：12539262
> 
> 赞同：-1
> 
> 时间：2012-09-21T23:10:54.110
> 
> 标签：java, arrays, sorting

我有一个包含多个文件的目录。我想按修改日期的差异对文件进行排序。

例如

```
file1.csv  (created 14:00:55)
file2.csv  (created 14:02:55)
file3.csv  (created 15:22:55)
file4.csv  (created 15:25:55)
file5.csv  (created 16:28:55) 
```

与设定时间比较`file1`，例如 13:59（文件 1 = 1分钟时差） `file1`， （文件`file2`2 = 2 分钟时差），`file2`（`file3`文件 3 = 1 小时和 20 分钟时差），`file3`（`file4`文件 4 = 3 分钟时差），`file4`和`file5`（文件 5 = 1 小时差异）。并按照差异列出。该列表现在应该是：

```
file3.csv  (created 15:22:55)
file5.csv  (created 14:28:55)
file4.csv  (created 15:25:55)
file1.csv  (created 14:00:55)
file2.csv  (created 15:02:55) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:21:22.183

这样做的技巧是将文件（名称和实际修改时间）与用于对列表进行排序的值一起封装在一个对象中。即，你这样做：

1.  按照要计算差异的顺序（文件名或修改时间）读取文件条目
2.  将它们加载到集合中的对象中并计算要对它们进行排序的值；将排序值设置到对象中。
3.  根据计算的值对集合进行排序

使用您的数据，假设原始订单是按文件名排列的，开始时间是 13:59:00

```
Original                        Calculated
Data                            Sort Key
-----------------------------   ----------
file1.csv  (created 14:00:55)      1:55
file2.csv  (created 14:02:55)      1:00
file3.csv  (created 15:22:55)     20:00
file4.csv  (created 15:25:55)      5:00
file5.csv  (created 16:28:55)      3:00 
```

按“计算的排序键”列（降序）排序会给你你想要的。

这是 Java 中的示例（未经测试）：

```
class FileWithTimeOffset implements Comparable<FileWithTimeOffset>
{
    String fileName;
    Date   creationDate;
    int    timeOffset;
    public int compareTo(FileWithTimeOffset other)
    {
        // return negative of comparison to achieve descending sort
        return -Integer.compare(this.timeOffset,other.timeOffset);
    }
} 
```

# c# - 如何获取动态添加到 ListBox 的项目的索引

> ID：12539264
> 
> 赞同：2
> 
> 时间：2012-09-21T23:11:13.443
> 
> 标签：c#, windows-phone-7, xaml, listbox

我想获取动态添加的列表框中项目的当前索引。本质上，我的项目是一个 HubTile，并且 Hubtiles 一次添加一个点击事件。Hubtile 项目的集合保存在 ObservableCollection 中。此 observablecolelction 绑定到显示项目的列表框。为了说明，我所拥有的如下：

标签页.xaml

```
<ListBox x:Name="tileList" Grid.Row="0" Margin="12,0,12,0" toolkit:TiltEffect.IsTiltEnabled="True">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <toolkit:WrapPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <toolkit:HubTile Title="{Binding TileName}" Margin="6"
                                         Notification="{Binding Notification}"
                                         DisplayNotification="{Binding DisplayNotification}"
                                         Message="{Binding Message}"
                                         GroupTag="{Binding GroupTag}"
                                         Source="{Binding ImageUri}"
                                         Tap="hubTile_Tap">
                        <toolkit:ContextMenuService.ContextMenu>
                            <toolkit:ContextMenu x:Name="menu">
                                <toolkit:MenuItem Header="pin to start" Tap="MenuItem_Tap"/>
                                <toolkit:MenuItem Header="delete" Tap="deleteMenuItem_Tap"/>
                            </toolkit:ContextMenu>
                        </toolkit:ContextMenuService.ContextMenu>
                    </toolkit:HubTile>

                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

TabsPage.xaml.cs

```
ObservableCollection<TileItem> tileItems;

public TabsPage()
    {
        InitializeComponent();

        CreateTileList(); //starts the list of HubTiles with a single main tile
    }

private void CreateTileList()
    {
        tileItems = new ObservableCollection<TileItem>()             
        {            
            //TileItem is     
            new TileItem() { ImageUri = mainImage, Title = "main", /*Notification = "",*/ Message = "main", GroupTag = "MainGroup", TileName = "main" },

        };

        //Set the first tile item
        this.tileList.ItemsSource = tileItems;  //sets the tileList Listbox ItemsSource to the tileItems ObservableCollection            

    }

void addNew_Click(object sender, EventArgs e)
    {
        BitmapImage newTileImage = new BitmapImage();

        var newItem = new TileItem() { ImageUri = newTileImage, Title = "new", /*Notification = "",*/ Message = "new HubTile", GroupTag = "TileGroup", TileName = "new" };
        tileItems.Add(newItem); //update UI immediately and add to collection
    }

private void hubTile_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        //how to get the current index of the tapped HubTile//
        //var tap = (((sender as HubTile).Parent as ListBox).SelectedIndex); //NullReferenceException thrown
    } 
```

因此，HubTile 项目已正确添加到 UI，但在点击事件上我不知道如何获取当前点击的 HubTile 项目的选定索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:16:47.213

使 tileItems 成为公共属性并在 XAML 中将其绑定到它作为源。

添加一个公共 int 并将路径绑定到它作为 SelectedIndex

```
<ListBox ItemsSource="{Binding Path=Rules}" SelectedIndex="{Binding Path=SelectedIndex, Mode=TwoWay}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:21:52.580

您可以像这样使用单击的项目的 DataContext

```
private void hubTile_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    FrameworkElement element = (FrameworkElement)sender;
    TileItem item = (TileItem)element.DataContext;
    int index = tileItems.IndexOf(item);
    // Use the index
} 
```

您也可以订阅 ListBox 的 SelectionChanged 事件，而不是 Hubtile 的 Tap 事件。然后在 Selectionchanged 事件中，您可以获得索引。

```
private void OnSelectionChanged(object sender, SelectionChangedEventArgs selectionChangedEventArgs)
    {
        int index = tileList.SelectedIndex;
    } 
```

# iphone - iCloud NSUbiquitousKeyValueStore 初始同步/访问延迟 - 如何处理？

> ID：12539266
> 
> 赞同：18
> 
> 时间：2012-09-21T23:11:45.320
> 
> 标签：iphone, ios, icloud-api, nsubiquitouskeyvaluestore

我正在使用 NSUbiquitousKeyValueStore 来存储一些应用程序设置。我的逻辑是：当我在本地保存数据时，我将它保存到 NSUbiquitousKeyValueStore 也作为备份。当我需要设置时，我会在本地读取，并且如果在本地找不到数据（例如，在重新安装应用程序之后），我只会使用 iCloud 键值存储。如果用户有多台设备共享一个 icloud id，他可以在一台设备上写入设置并将它们下载到另一台设备（我警告他要重写）。

我有一个奇怪的问题。脚步：

1.  安装了一个应用程序并将其数据保存到 NSUbiquitousKeyValueStore。确保数据在那里。
2.  删除了应用程序（假设数据仍保留在 iCloud 中）。
3.  等了几分钟以防万一，然后从 Xcode 内部安装并启动了该应用程序。
4.  尝试使用 [[NSUbiquitousKeyValueStore defaultStore] dataForKey: @"mykeyname"] 读取设置键 - 有时可以，但有时找不到键！
5.  等了15秒，再试一次。成功。使困惑。

因此，似乎 ios 需要一些时间来使我的应用程序的远程键值存储在本地可用于 dataForKey: 调用。如果我写了这样一个系统（实际上我写了 - 前一段时间，在另一种生活中），那么在询问和接收键值数据之前显然必须有一个延迟。所以我想要一些通知说：“我们在第一次启动时完成了下载/同步键值存储”或类似的东西。

据我了解，我可以在主线程中同步使用 NSUbiquitousKeyValueStore（这对我来说很方便）。但是 [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil] 返回一个有效的 url，然后我得到“找不到密钥”。所以我不能依赖它。有没有办法确保 NSUbiquitousKeyValueStore 工作并被下载？这很重要，尤其是在互联网速度较慢的情况下。

## 更新

将 [[NSUbiquitousKeyValueStore defaultStore] synchronize] （如苹果文档中所写）添加到 init 和 load 有点帮助。iCloud仍有许多问题。

昨天我已经成功将数据保存到手机1的键值存储并在手机2上恢复。今天我已经删除了手机2上的应用程序并尝试恢复数据。但即使 [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil] 返回了有效的 URL，我调用了 [[NSUbiquitousKeyValueStore defaultStore] synchronize] 当调用 dataForKey: MY_DATA_KEY 时我得到了 nil。

当我尝试从手机 1 上的 icloud 恢复数据（应用程序仍在安装）时，它成功了，但是当我在这部手机上重新安装时，应用程序恢复不再成功。

临时解决方案是：“关闭 iCloud->Documents&Data - 关闭并打开网络 - 打开 Documents&Data”，但你应该等待几分钟，然后它应该可以工作。

所以，问题：

1.  你对iCloud有这样的问题吗？
2.  有什么办法可以查出数据是不可用还是只是还没有下载？
3.  iCloud 是否有任何已知的“延迟”？我听说过大约 7 秒，但这显然不是真的。
4.  似乎当应用程序未安装时，iCloud 数据的更新非常快（几秒钟），但是当您重新安装应用程序时，icloud 需要几分钟来实现键值存储。有没有办法强制这个过程？

* * *

**PS** 下面是我的 CloudHelper 供您参考 - 非常简单的 c++ 类，用于向/从 iCloud 键值存储写入/读取二进制数据。它不可编译，我已经对其进行了一些调整以使其更加清晰 - 删除了与引擎相关的代码。尽管如此，如果您删除 MySystem::... 调用，它仍然可以很好地工作。除了我之前提到的。

```
class CloudHelper
{
public:
    static bool init();
    static void deInit();
    //save our data to iCloud with
    static int saveData(unsigned char* data, int from, int count);
    //get our data from iCloud
    static unsigned char * loadData(int *retsize, int * retint);
    //does iCloud work for us
    static bool isEnabled();
    //do we have our key in iCloud
    static int isAvailable();

    static const int RESULT_OK = 0;
    static const int RESULT_NO_CONNECTION = 1;
    static const int RESULT_NOT_FOUND = 2;
    static const int RESULT_SYNC_ERROR = 3;
private:
    static bool enabled;
    static NSURL *ubiq;
};

bool CloudHelper::enabled = false;

NSURL *CloudHelper::ubiq = NULL;

#define MY_DATA_KEY @"my_data_key"

int CloudHelper::saveData(unsigned char* data, int from, int count)
{
    if ([NSUbiquitousKeyValueStore defaultStore])
    {
        NSData *d = [[[NSData alloc] initWithBytes:(data + from) length:count] autorelease];
        [[NSUbiquitousKeyValueStore defaultStore] setData:d forKey: MY_DATA_KEY)];
        if ([[NSUbiquitousKeyValueStore defaultStore] synchronize] != TRUE)
            return RESULT_SYNC_ERROR;
        return RESULT_OK;
    }
    return RESULT_NO_CONNECTION;
}

unsigned char * CloudHelper::loadData(int *retsize, int * retint)
{
    if ([NSUbiquitousKeyValueStore defaultStore])
    {
        [[NSUbiquitousKeyValueStore defaultStore] synchronize];
        NSData *d = [[NSUbiquitousKeyValueStore defaultStore] dataForKey: MY_DATA_KEY];
        if (d != NULL)
        {
            if (retsize != NULL)
                *retsize = d.length;
            if (retint != NULL)
                *retint = RESULT_OK;
            return d.bytes;
        }
        else
        {
            if (retsize != NULL)
                *retsize = -1;
            if (retint != NULL)
                *retint = RESULT_NOT_FOUND;
        }
    }
    else
    {
        if (retsize != NULL)
            *retsize = -1;
        if (retint != NULL)
            *retint = RESULT_NO_CONNECTION;
    }
    return NULL;
}

int CloudHelper::isAvailable()
{
    int result = RESULT_NO_CONNECTION;

    if ([NSUbiquitousKeyValueStore defaultStore])
    {
        [[NSUbiquitousKeyValueStore defaultStore] synchronize];
        NSData *d = [[NSUbiquitousKeyValueStore defaultStore] dataForKey: MY_DATA_KEY];
        if (d != NULL)
            result = RESULT_OK;
        else
            result = RESULT_NOT_FOUND;
    }
    else
        result = RESULT_NO_CONNECTION;

    return result;
}

void CloudHelper::deInit()
{
    enabled = false;
    [ubiq release];
}

bool CloudHelper::init()
{
    enabled = false;
    NSURL *ubiq_ = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
    [[NSUbiquitousKeyValueStore defaultStore] synchronize];
    if (ubiq)
    {
        enabled = true;
        ubiq = [ubiq_ retain]; //save for further use
    }
    else
    {
        //is implemented elsewhere: this writes a local file with a counter, and if it is < REMINDER_COUNT allows us to show a warning to users
        bool allow = MySystem::isAllowToShowDialog();
        if (allow)
        {
            //determines network state with Apple's Reachability
            if (!MySystem::isNetworkAvailable())
                MySystem::showMessageBox(@"Network error"); //No network
            else
                MySystem::showMessageBox(@"You should log into your iCloud account to be able to backup your settings."); //No login
        }
    }
    return enabled;
} 
```

* * *

**更新 2**

现在是 2016 年，Android 成为 ios 的邪恶双胞胎，人类发现了引力波，希格斯获得了诺贝尔奖，微软收购并杀死了诺基亚。但 iCloud 仍然像以前一样愚蠢。

最后，我在几个 VPS 上制作了自己的网络服务堆栈。我拒绝使用第三方服务，因为它们大多是不稳定和不可预测的。然而我需要 iCloud。因为苹果的另一个死去的孩子不起作用。密钥链。当我的游戏开始时，它的服务就死了。所以我决定在云中存储随机 UUID 以区分用户（不再有设备 ID），即使在重新安装后也是如此。但是会出什么问题呢？一切！我花了两天时间让这个愚蠢的狗屎部署没有错误，现在它时不时丢失我的数据！

*谢谢苹果，谢谢，谢谢，谢谢！啦啦啦！太好啦！（马戏团的音乐声，逐渐变成哭泣声）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T00:05:44.760

**结论**

临时解决方案是： - 在从键值存储获取数据之前调用同步 - 确保它可以“关闭 iCloud-> 文档和数据 - 关闭并再次在网络上 - 打开文档和数据”，但您也应该等待几分钟iCloud 下载所有需要的数据

注意：当应用程序已安装并且已经使用（保存/加载）了 iCloud 数据的键值存储更新时非常快（7-15 秒），但是当您重新安装应用程序时，icloud 似乎需要几分钟来实现 key-价值存储。

我很高兴听到您的想法，因为 icloud 看起来几乎无法使用。但我不想设置自己的服务器来仅仅获得相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:09:10.247

我正在为 NSUbiquitousKeyValueStore 设置一个虚拟键并在应用启动时调用同步。结果不是 100% 的解决方案，而是稍微好一些。你可以试试这个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T22:36:55.227

因为显然您的应用程序不应该在等待慢速网络时挂起。这一切都在[iCloud 设计指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForKey-ValueDataIniCloud.html#//apple_ref/doc/uid/TP40012094-CH7)中。

注册`NSUbiquitousKeyValueStoreDidChangeExternallyNotification`，调用-同步，并希望通知最终会到达。

如果数据已经是最新的，我认为您不会收到通知，而且我认为没有一种方法可以知道数据的历史。

# ios - 本地化 XCode 4.5 + 在主 UIWebView / IOS 中加载的特定于语言的 PDF

> ID：12539267
> 
> 赞同：3
> 
> 时间：2012-09-21T23:11:48.257
> 
> 标签：ios, xcode, localization, xcode4.5

我正在开发一个双语简单的 IOS 应用程序：使用此处描述的方法将 PDF 文件加载到 UIWebView 中：

[将本地 PDF 文件加载到 WebView](https://stackoverflow.com/questions/7502189/loading-local-pdf-file-into-webview)

在 XCode 中，使用“本地化”功能，我添加了第二种语言（法语）。MainStoryboard 包含 2 个“子”故事板，一个用于英语，一个用于法语。

在 MainStoryboard（英文）中，我插入了一个 UIWebview --> 将该视图连接到 MainViewController.h --> 在 MainViewController.m 中添加用于插入英文 PDF 文件的代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"EnglishBook" ofType:@"pdf" inDirectory:@"PDFBooks"];
NSURL *url = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[_UIWebViewBook loadRequest:request];
[_UIWebViewBook setScalesPageToFit:YES]; 
```

英文版运行良好。

但是... 将法语 PDF 文件放在哪里？

有没有办法针对特定语言的 PDF 文件？

“pathForResource:@”可以是“语言”敏感的吗？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:37:46.537

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Book" ofType:@"pdf" inDirectory:@"PDFBooks"];
NSURL *url = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[_UIWebViewBook loadRequest:request];
[_UIWebViewBook setScalesPageToFit:YES]; 
```

请求单本书，然后在您的项目文件夹中创建一个子文件夹 en.lproj 和 fr.lproj 分别添加英文版法文版并将两者拖到您的 Xcode 项目中。

它们都将出现在 en.lproj 和 fr.lproj 下，然后根据设备本地化，应该加载正确的。

澄清。在 Finder 中设置这个目录结构： ![在此处输入图像描述](../Images/5d55626f984d2a5675eb877d3ca7813f.png) ![在此处输入图像描述](../Images/2c3250f952e438c6a983437518f863c5.png)

然后，当您将 MyBook.txt（在您的情况下为 pdf）拖到 Xcode 时，它​​将如下所示： ![在此处输入图像描述](../Images/2b07ec6ee0ba215f41c025fd54a3c080.png)

然后，当您调用 MyBook.txt 时，设备将根据设备的国际语言设置（设置-通用-国际-语言）自动选择要抓取的版本。

您可能还想查看[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)的文档。

# language-agnostic - 为什么有些语言的索引是从 0 而不是 1？效率？

> ID：12539268
> 
> 赞同：1
> 
> 时间：2012-09-21T23:11:52.470
> 
> 标签：language-agnostic, indexing, history

因此，在我公寓的电梯中，按钮没有（在英国）标记为：G、1、2、3 等。也不是美国时尚的：1、2、3、4 等。

**它们被标记为：0, 1, 2, 3 即*它们是从 0 开始的索引***

我对自己说：'*显然，如果你要编写一个类似于 goToFloor 的函数来表示楼层之间的移动，你可以通过元素的索引来实现。简单的！*'

然后我意识到并非所有语言的数组都是从 0 开始的，有些是从 1 开始的。

这个决定是如何做出的？它是效率之一（我对此表示怀疑！）？对新程序员感到轻松（可以说，任何犯过错误的人都不会再犯）？

我看不出编程语言有任何偏离标准的原因，无论是 0、1 还是任何其他数字。考虑到这一点，也许了解第一种能够索引的语言以及第一种打破既定约定的语言会有所帮助吗？

我希望这对 SO 来说不是一个太“希望”的问题，我非常渴望听到索引背后的历史。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:40:34.383

当设计第一个编程语言时，它通常从 0 开始，因为数组映射到内存位置。映射到内存位置的数组和数字用作检索相邻值的偏移量。据此，数字应视为**距开始**的距离，而不是数组中的顺序。

从数学的角度来看，这是有道理的，因为它有助于更​​自然地实现算法。

然而 0 对人类没有吸引力，因为我们从 1 开始计数。这与直觉相反，这就是为什么某些语言决定“伪造”起始数组为 1 的原因。（请注意，其中一些像 VB 允许您在 0 和基于 1 的数组。）

关于这个主题的有趣信息可以在这篇著名的 Dijkstra 文章中找到：

*   [为什么编号应该从零开始](http://www.cs.utexas.edu/users/EWD/transcriptions/EWD08xx/EWD831.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T23:25:01.353

第一种“语言”是汇编程序。数组就是第一个元素的内存地址。要访问数组中的一个元素，需要添加一个偏移量。因此，如果数组在 position `t0`，那么`t0+0`是第一个元素，`t0+1`是第二个元素等。这导致索引从 0 开始。后来，更高级别的语言添加了更好的语法，但索引保持不变。

然而，有时也有例外。例如，在 Pascal 中，String 是一个字节数组。然而，数组/字符串的第一个字节存储字符串的长度，因此第一个字母存储在索引 1 处。但是索引 0 仍然存在并且可用于获取所述长度。

# android - 在 Android 中编辑 HTML？

> ID：12539269
> 
> 赞同：0
> 
> 时间：2012-09-21T23:11:59.240
> 
> 标签：android, html, webview

我的文件夹中有一个本地存储的 HTML 文件，我`assets`通过以下方式访问：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    Global.setUpButton(this);
    WebView webView = new WebView(this);
    setContentView(webView);

    //Sets up the settings for the webView
    webView.loadUrl("file:///android_asset/map.html");
    webView.getSettings().setLoadsImagesAutomatically(true);
    webView.getSettings().setBuiltInZoomControls(true);
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.setInitialScale(0);
} 
```

我想知道是否有任何方法可以查看和/或编辑加载的 HTML 文件的源代码，因为我可能需要操作某些元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:00:34.270

我找到了一个解决方法。

创建了一个 JavascriptInterface，它允许我附加任何我需要的 HTML 标签。这更容易，因为我不必重新加载页面，从而减少了加载时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:50:49.767

当然。您使用 EditText 框创建布局，加载文件并将其显示在框中，然后在编辑后将新字符串存储在文件中。

添加：

您可以使用 AssetManager 从 URL 中以字符串形式读取数据。然后将字符串放在 EditText 中。然后用户对其进行编辑。然后，您从 editText 中获取已编辑的 html，并首先使用它做您想做的事情。如果我正确理解你的问题。

# json - 下载 jackson.codehaus.org jar

> ID：12539270
> 
> 赞同：58
> 
> 时间：2012-09-21T23:12:18.783
> 
> 标签：json, jar, jackson

我需要下载一个 json 解析器，所以我去[jackson.codehaus.org](http://jackson.codehaus.org)网站。而不是一个方便的链接来点击和下载罐子/罐子，他们让我绕圈子。有谁知道罐子在哪里——确切地说？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-02-13T14:09:02.387

您可以改用此链接：

**[下载v2.9.7](http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.9.7/jackson-core-2.9.7.jar)**

**[更多通用链接](http://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-core)**

或者转到[http://mvnrepository.com/](http://mvnrepository.com/) 并搜索['jackson-core'](http://mvnrepository.com/search?q=jackson-core)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-22T07:18:24.023

如果单击屏幕右边缘的“下载”，向下滚动到“下载，2.x”并单击“核心”，您将获得直接下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-09T17:16:25.277

[在这里](https://hub.jazz.net/project/morenoli/hangmangame/overview?utm_source=developerWorks&utm_medium=article&utm_content=j-hangman-app&utm_campaign=dW%20CloudOE%20content#https://hub.jazz.net/gerrit/plugins/gerritfs/list/morenoli%252Fhangmangame/refs%252Fheads%252Fmaster/WebContent/WEB-INF/lib)您可以找到 jackson 库（版本 2.4.0）。我从一个教程中获得了这些项目，您可以在其中看到如何实现 jackson，并且代码和库也可以下载： [http://www.ibm.com/developerworks/java/library/j-hangman-app/index。 html](http://www.ibm.com/developerworks/java/library/j-hangman-app/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-05T11:19:35.817

下一个替代链接：[http ://www.java2s.com/Code/Jar/j/Downloadjacksonall199jar.htm](http://www.java2s.com/Code/Jar/j/Downloadjacksonall199jar.htm)

您可以在此处找到包含文件完整列表的“AllIn”jar。但这里的最新版本是 1.9.9。所以...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-24T08:44:25.463

请尝试 [/repositories/snapshots/com/fasterxml/jackson/core](https://oss.sonatype.org/content/repositories/snapshots/com/fasterxml/jackson/core/)

转到相关目录

*   杰克逊注释/
*   杰克逊核心/
*   杰克逊数据绑定/

然后打开 maven-metadata.xml 文件。您可以在那里找到最新版本的目录。请注意，所有 jar 都使用发布日期重命名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-12T17:20:13.403

我知道这个问题已经有 4 年历史了，但是杰克逊图书馆仍然很难找到，即使 Sujith PS 在这里的回答导致了核心 jar，但这对我来说还不够。

对于任何正在寻找**Core**、**Databind**和**Annotations**的 jar 文件的人，我在这里找到了它们：

**[http://mvnrepository.com/artifact/com.fasterxml.jackson.core](http://mvnrepository.com/artifact/com.fasterxml.jackson.core)**

专门针对 2.7.4 版：

[杰克逊核心2.7.4.jar](http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.7.4/jackson-core-2.7.4.jar)

[jackson-databind-2.7.4.jar](http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.7.4/jackson-databind-2.7.4.jar)

[jackson-annotations-2.7.4.jar](http://central.maven.org/maven2/com/fasterxml/jackson/core/jackson-annotations/2.7.4/jackson-annotations-2.7.4.jar)

# linux - grep /etc/passwd 和 /etc/group 列出所有用户和用户所属的每个组

> ID：12539272
> 
> 赞同：1
> 
> 时间：2012-09-21T23:12:20.873
> 
> 标签：linux, bash, shell, scripting

我正在尝试列出所有用户`grep` `/etc/passwd`和`/etc/group`用户所属的每个组。

IE：

```
Jon Doe, root:randomgroup:randomgroup2:randomgroup3
Billy Bob, admin:apache:backups
Timmy Tim, root:www 
```

无论如何，这是我到目前为止所拥有的，但我不完全确定如何将它放入 grep 组并匹配用户字段。

```
cat /etc/passwd | cut -d: -f1,5 
```

这只显示带有“：”和全名的用户

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T23:37:54.053

如果使用 grep 的要求`/etc/passwd`并不`/etc/group`难，请考虑以下解决方案：

```
for user in $(getent passwd | cut -d: -f1); do
    printf "%s: %s\n" $user "$(id -nG $user)"
done 
```

请注意@JonathanLeffler 的建议，因为这个问题并不像看起来那么简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T23:22:59.130

即使忽略文件的网络数据库的可能性，您也确实不能`grep`用于这项工作，至少，如果您要真正彻底地做到这一点，则不能。您可能应该使用 Perl 或 Python 或您选择的其他类似脚本语言。

请注意，文件中有一个由数字指​​定的用户组`/etc/passwd`。`/etc/group`对于同一用户，可以列出任意数量的其他组。假设用户 'primary GID' 是 23 in `/etc/passwd`。不能保证组 23 的条目`/etc/group`会列出该用户。

请注意，您可以在组文件中出现各种奇怪的东西。

*   同一个 GID 的多个名称。
*   具有不同 GID 值的相同组名的多行。
*   中列出的 GID 值`/etc/passwd`未在 中列出`/etc/group`。
*   文件中具有相同 UID 的多个名称`/etc/passwd`（通常允许不同的人使用自己的凭据（名称和密码）登录，但都以 UID 0 运行，即 aka `root`）。

处理所有这些是一场噩梦——是的，几乎所有这些都发生在我工作但不管理的系统上。

在某个地方，我有代码可以帮助进行这种分析；它是 Perl，使用`getpwent()`和`getgrent()`检索信息（来自管理员配置的文件或网络）。它不漂亮。

* * *

对于课堂练习分析，您可能需要：

来自`/etc/passwd`：

*   用户名
*   用户 ID (UID)
*   主要组 ID (GID)

来自`/etc/group`：

*   主 GID 的名称。
*   列出用户名的所有其他组条目。

如果您只是简单地躲避并使用`id`命令为您完成大部分工作，那就简单多了。通过`/etc/passwd`with`grep`获取用户名，然后用于`id`指定用户所属的组。请参阅[gvalkov的](https://stackoverflow.com/users/1404992/gvalkov)[答案](https://stackoverflow.com/questions/12539272/grep-etc-passwd-and-etc-group-to-list-all-users-and-each-group-the-user-belong/12539437#12539437)，以获得可能足以满足健全系统的答案。

```
grep -o '^[^:]*' /etc/passwd |
xargs -L1 id 
```

这给了你名字和数字；调整选项以`id`满足您的要求。这是使用 GNU `grep`；该`-o`选项很方便，但不便携。幸运的是，Unix 用户名不包含换行符（或冒号）；这简化了`xargs`.

* * *

### 用户组图

243 行或 Perl，其中一些注释。观看shebang线；`#!/usr/bin/env perl`该代码已有三年之久，自从编写以来我就开始使用；然后我`use warnings;`在代码主体的顶部。

```
#!/bin/perl -w
#
# @(#)$Id: usergroupmap.pl,v 1.6 2009/06/08 02:30:19 jleffler Exp $
#
# Create a map of groups associated with users

use strict;
use constant debug => 0;

$| = 1;

my $group_entries = 0;  # Number of rows returned by getgrent()
my %usr_hash = ();      # List of lists of GID values keyed by user name
my %gid_hash = ();      # List of GID values count definitions
my %grp_hash = ();      # List of group name values and corresponding GID value
my %grp_count = ();     # List of count of entries with given group name
my %gid_name  = ();     # List of first occurring name for group, indexed by GID

{
    while (my ($name, $password, $gid, $userlist) = getgrent())
    {
        print "# $gid ($name) $userlist\n" if debug > 1;
        $group_entries++                                            ;# if debug > 0;
        $grp_hash{$name}  = $gid  unless defined $grp_hash{$name}   ;# if debug > 0;
        $grp_count{$name} = 0     unless defined $grp_count{$name}  ;# if debug > 0;
        $grp_count{$name}++                                         ;# if debug > 0;
        $gid_hash{$gid}   = 0     unless defined $grp_hash{$gid}    ;# if debug > 0;
        $gid_hash{$gid}++                                           ;# if debug > 0;
        $gid_name{$gid}   = $name unless defined $gid_name{$gid};

        foreach my $user (split /[, ]/, $userlist)
        {
            print ". $user\n" if debug > 1;
            $usr_hash{$user} = { } unless defined $usr_hash{$user};
            $usr_hash{$user}->{$gid} = 1;
        }
        printf "-- Group %-8s reappears with GID %5d (previously %5d)\n",
               $name, $gid, $grp_hash{$name} if $grp_hash{$name} != $gid;
        printf "-- GID   %-8d reappears with name %-8s (previously %-8s)\n",
               $gid, $name, $gid_name{$gid} if $name ne $gid_name{$gid};
    }
}

printf "Number of group entries: %5d\n", $group_entries         ;# if debug > 0;
printf "Number of group   names: %5d\n", scalar(keys %grp_hash) ;# if debug > 0;
printf "Number of group numbers: %5d\n", scalar(keys %gid_hash) ;# if debug > 0;
printf "Number of user    names: %5d\n", scalar(keys %usr_hash) ;# if debug > 0;

{
    foreach my $gid (sort keys %gid_hash)
    {
        printf "    Group ID %5d (%-8s) appears %2d times\n",
               $gid, $gid_name{$gid}, $gid_hash{$gid} if $gid_hash{$gid} > 1;
    }
}

# Nominally, this should print nothing.
# However, when the local /etc/group file and the NIS+ group file disagree, it does.
foreach my $name (sort keys %grp_count)
{
    printf "    Group name %-8s (%-5d) appears %2d times\n",
        $name, $grp_hash{$name}, $grp_count{$name} if $grp_count{$name} > 1;
}

# Determining canonical name for a group turns out to be tricky!
# On Solaris, it appears that:
# --- When groups are listed in /etc/group, the first name for a given GID is used
# -1-   Add to /etc/group:
#       a123::54876:username
#       a12::54876:username
#       a1::54876:username
#       a::54876:username
# ---   With these entries present, first one listed in /etc/group is 'name of group'
# ---   Demonstrated with multiple permutations of 4 entries.
#
# --- When groups are listed via NIS+, the shortest name for a given GID is used
# -1-   In NIS+ data,
#       -- GID   1360     reappears with name rand8    (previously rand4   )
#       -- GID   1360     reappears with name rand3    (previously rand4   )
#       -- GID   1360     reappears with name rand     (previously rand4   )
#       -- GID   1360     reappears with name rand9    (previously rand4   )
#       -- GID   1360     reappears with name rand1    (previously rand4   )
#       -- GID   1360     reappears with name rand2    (previously rand4   )
#       -- GID   1360     reappears with name rand10   (previously rand4   )
#       -- GID   1360     reappears with name rand5    (previously rand4   )
#       -- GID   1360     reappears with name rand7    (previously rand4   )
#       -- GID   1360     reappears with name rand11   (previously rand4   )
#       -- GID   1360     reappears with name rand12   (previously rand4   )
#       -- GID   1360     reappears with name rand6    (previously rand4   )
# ---   With these entries present, shortest name (rand) is listed by 'ls'.
# -2-   In NIS+ data,
#       -- GID   1240     reappears with name pd       (previously rd      )
# ---   With these entries present, first name with shortest length (rd) is listed by 'ls'.
# -3-   In NIS+ data,
#       -- GID   8714     reappears with name vcs-vsnet (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs  (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-tech (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-tech1 (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-sys2 (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-mgr1 (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-other (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-sys1 (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-mgr (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-mgr3 (previously vcs-mgr2)
#       -- GID   8714     reappears with name vcs-sys (previously vcs-mgr2)
# ---   With these entries present, shortest name (vcs) is listed by 'ls'.
# ---   Could be first name without punctuation?
# -4-   In NIS+ data + /etc/group data (other::1:root in /etc/group)
#       -- Group other    reappears with GID    20 (previously     1)
# ---   With these entries present, 'chgrp  1 x; ls -l x' lists group as other.
# ---   With these entries present, 'chgrp 20 x; ls -l x' lists group as other.
# ---   Hence, 'ls' must use getgrgid() to determine group name.
# -5-   In NIS+ data
#       -- GID   7777     reappears with name xgrp      (previously pdxgrp  )
# ---   With these entries present, 'chgrp pdxgrp x; ls -l x' lists xgrp as group.
# ---   Hence, as expected, chgrp uses getgrnam() to determine GID, and ls uses getgrgid().
# -6-   Add entry 'ccc::8714:' to /etc/group.
#       With this entry present, 'chgrp 8714 x; ls -l x' lists ccc as group.
# NB: /etc/nsswitch.conf lists 'group: files nis' (and 'passwd: files').
#
# ---   NB: No definitive test with same group name listed in both /etc/group and NIS+.
# ---   NB: No definitive info on why rand.
# ---   NB: No definitive info on why vcs.
# Hence: most reliable way to determine canonical name for a given GID is via getgrgid().
# Determining it from the results of getgrent() is unreliable.

my $max_groups = 0;
my $max_user = "";
my $tot_usrgrp = 0;
my %grp_lists = ();
foreach my $user (sort keys %usr_hash)
{
    my $groups = $usr_hash{$user};
    my $numgrps = scalar(keys %{$groups});
    $tot_usrgrp += $numgrps;
    if ($numgrps > $max_groups)
    {
        $max_groups = $numgrps;
        $max_user = $user;
    }
    my $grplst = "";
    foreach my $group (sort keys %{$groups})
    {
        $grplst .= " $group";
    }
    $grp_lists{$grplst} = 1;
    print "$user: $grplst\n" if debug;
}
printf "Maximum number of groups for one user (%s): %5d\n", $max_user, $max_groups;
printf "Total number of groups listed for all users: %5d\n", $tot_usrgrp;
printf "Total number of distinct group lists: %5d\n", scalar(keys %grp_lists);

my %name_hash = (); # List of distinct names - group names and user names
foreach my $user (keys %usr_hash)
{
    $name_hash{$user} = 1;
}
foreach my $group (keys %grp_hash)
{
    $name_hash{$group} = 1;
}

my $name_offset = 0;
foreach my $name (keys %name_hash)
{
    $name_hash{$name} = $name_offset;
    $name_offset += length($name) + 1;
}
printf "Total space needed for names = %5d\n", $name_offset;

# Add gid to group list if not already present
# If input is sorted, add condition: last if $grpnum > $gid;
sub add_gid
{
    my($gid, @groups) = @_;
    foreach my $grpnum (@groups)
    {
        return(@groups) if ($grpnum == $gid);
    }
    return sort { $a <=> $b } $gid, @groups;
}

# Get group set for given user name
sub getgrsetnam
{
    my($user) = @_;
    my(@groups) = ();
    my($usrref) = $usr_hash{$user};
    print "getgrsetnam(): name = $user\n" if debug > 0;
    push(@groups, sort { $a <=> $b } keys %$usrref) if defined $usrref;
    print "getgrsetnam(): groups = @groups\n" if debug > 0;
    my($name, $pass, $pw_uid, $gid) = getpwnam($user);
    # Not all users listed in groups appear in password
    if (defined $name)
    {
        print "getgrsetnam(): user = $name, $pw_uid, $gid\n" if debug > 0;
        @groups = add_gid($gid, @groups);
    }
    return(@groups);
}

# Get set of group IDs for given user number
sub getgrsetuid
{
    my($uid) = @_;
    print "getgrsetuid(): $uid\n" if debug > 0;
    my($name, $pass, $pw_uid, $gid) = getpwuid($uid);
    print "getgrsetuid(): $name, $pw_uid, $gid\n" if debug > 0;
    my(@groups) = ();
    # Not all UID values have a user name
    if (defined $name)
    {
        print "getgrsetuid(): name = $name\n" if debug > 0;
        @groups = getgrsetnam($name);
        @groups = add_gid($gid, @groups);
    }
    return(@groups);
}

{
    foreach my $user (sort keys %usr_hash)
    {
        print "user = $user\n" if debug > 0;
        my(@groups) = getgrsetnam($user);
        printf "%-9s @groups\n", "$user:";
    }
}

{
    foreach my $uid (0..65535)
    {
        my($name, $pass, $pw_uid, $gid) = getpwuid($uid);
        if (defined $name)
        {
            print "uid = $uid\n" if debug > 0;
            my(@groups) = getgrsetuid($uid);
            printf "%-9s (uid = %6d) @groups\n", "$name:", $uid;
        }
    }
}

__END__ 
```

一些总结输出：

```
...
-- Group nobody   reappears with GID 60001 (previously    99)
...
Number of group entries:   225
Number of group   names:   221
Number of group numbers:   148
Number of user    names:  1072
    Group name xxxxxxx1 (297  ) appears  2 times
    Group name xxxxxxx2 (296  ) appears  2 times
    Group name xxxxxxx3 (102  ) appears  2 times
    Group name nobody   (99   ) appears  2 times
Maximum number of groups for one user (xxxxxxxx):    32
Total number of groups listed for all users:  2275
Total number of distinct group lists:   108
Total space needed for names =  9562 
```

x 的字符串是我掩盖的不同名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-04T14:48:13.390

我今天自己需要它，并在大约 2 分钟的手册页摆弄中想出了以下内容：

```
for i in $(cat /etc/passwd | awk --field-separator=":" '{print $1}'); do id $i; done 
```

也可以稍微缩短：

```
for i in $(cat /etc/passwd | cut -d: -f1); do id $i; done 
```

输出看起来像连续的几个**id**命令：

```
uid=34(backup) gid=34(backup) groups=34(backup)
uid=1000(bobby) gid=1000(bobby) groups=1000(bobby),27(sudo)
... 
```

结果不是最易读的，但它非常简单易记。@gvalkov 的答案在这方面要清楚得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-24T12:40:18.953

我使用 awk 命令通过了同样的问题，我在上面看到了一些看起来几乎相同的回复 `awk -F ":" '{print $value_of_field_to_print}' /path_of_file_containing_fields`

例如，如果我想要多个字段，我只需添加另一个打印`$value_of_field_to_print`并在它们之间添加一个分隔符

这看起来像

```
awk -F ":" '{print $value_of_field_to_print print "separator" print 
$value_of_field_to_print2}' /path_of_file_containing_fields` 
```

awk 是处理文件的命令的名称，该`-F fs`选项将输入字段分隔符“：”或“分隔符”定义为正则表达式`fs`。这可以避免使用该`cat`功能并最终节省时间。

# wpf - InternetCheckConnection 在一次成功测试后返回 true

> ID：12539281
> 
> 赞同：2
> 
> 时间：2012-09-21T23:14:02.667
> 
> 标签：wpf, connection, return, network-monitoring

平台：***WPF (.NET 4.5)***。

为了尽可能快地检查 Internet 连接，我使用了这个功能：

```
 [DllImport("wininet.dll")]
    public extern static bool InternetCheckConnection(string lpszUrl, int dwFlags, int dwReserved); 
```

问题是，如果我连接到 Internet 并且我的程序正在执行`InternetCheckConnection`，它会返回**true**（如预期的那样）*但是*如果我让程序休眠一会儿并且在此期间我断开计算机与 Internet 的连接，然后我再次检查连接，比我**还真**返回！

为什么？！

我准备了出现问题的代码：

```
using System;
using System.Runtime.InteropServices;
using System.Threading;

namespace InternetCheckConnectionTest
{
    class Program
    {
        [DllImport("wininet.dll")]
        public extern static bool InternetCheckConnection(string lpszUrl, int dwFlags, int dwReserved);

        static void Main(string[] args)
        {
            string www = "http://www.google.com/";

            Console.WriteLine("Checking connection...");
            bool connected = InternetCheckConnection(www, 1, 0);

            Console.WriteLine("Connection check returned " + connected.ToString());

            TimeSpan ts = new TimeSpan(0, 0, 20);
            Console.WriteLine("\nYou have " + ts.TotalSeconds.ToString() + " seconds to (dis)connect from/to the Internet.\n");
            Thread.Sleep(ts);

            Console.WriteLine("Checking connection once again...");
            connected = InternetCheckConnection(www, 1, 0);
            Console.WriteLine("Connection (2nd) check returned " + connected.ToString());
        }
    }
} 
```

在启动此程序之前，请确保您已连接到 Internet。
在此消息之后：

> 您有 20 秒的时间（断开）与 Internet 的连接。

断开与 Internet 的连接。即使您与 Internet 断开连接，您也会看到`InternetCheckConnection(www, 1, 0)`返回**True 。**问题是*为什么*？

# ios - 故事板中的 UITableView 不更新旋转时的内容大小

> ID：12539283
> 
> 赞同：9
> 
> 时间：2012-09-21T23:14:22.760
> 
> 标签：ios, uitableview, storyboard, autolayout, contentsize

我正在开发针对 iOS 6 的项目，该项目利用了故事板和自动布局。在故事板中有很多地方将 UITableView 作为子视图添加到视图控制器视图中。此表视图使用情节提要中的原型单元格。

我们遇到的问题是，如果视图控制器最初以横向加载，然后设备旋转为纵向，则表格视图开始垂直和水平滚动。表格视图单元格以正确的尺寸绘制，但右侧有额外的空白。

看起来，虽然表格视图的框架和边界在旋转时被更新为正确的大小，但表格视图的内容大小却没有。无论更新旋转如何更改，内容大小都保持相同的尺寸。

如果使用程序化表格视图单元格，则不会出现此问题。我发现了一些花哨的解决方法，1.) 调用 reloadData 或 reloadRowsAtIndexPaths:withRowAnimation: 2.) 手动设置属性 contentSize。

这两个似乎都不理想。

我已将此链接添加 到一个演示此问题[的简单示例项目中。](http://bit.ly/ScDIaU)所做的唯一更改是故事板和主视图控制器的实现。

旋转前 旋转 ![旋转前](../Images/9c46443f9e33a0c6a2197f799eaa1101.png) 后 ![旋转后](../Images/843906f461c9c45db7e030be5a1304ad.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:41:11.970

我遇到了同样的问题 - 似乎找不到任何与此相关的书面答案。我最终像您在中提到的那样手动修改了 UITableView contentSize：

```
- (void) viewWillLayoutSubviews
{
    self.tableView.contentSize = CGSizeMake(self.tableView.frame.size.height, self.tableView.contentSize.height);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:04:13.087

我今天遇到了这个问题，并向 Apple 提交了错误报告。

看来，如果您使用带有 UI 元素和 autoLayout 的自定义单元格，则 UIScrollView 内容大小会出现问题。

如果您删除所有 UI 元素，或者关闭自动布局，或者使用工厂单元（基本等），一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T04:55:28.093

我已经在我的项目中纠正了同样的问题。我想这是故事板中的一个错误。

然后我通过设置在 willAutorotate 方法中手动编码解决了它

```
tableview.contentsize = CGSizeMake(tableview.width, tableview.contentsize.height); 
```

希望这也对你有用。

如果您发现任何有关相同的苹果文档，请也更新我。在此之前，您可以使用相同的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T05:37:26.287

> 看来，如果您使用带有 UI 元素和 autoLayout 的自定义单元格，则 UIScrollView 内容大小会出现问题。

我必须为我的自定义 UITableViewCells 关闭 AutoLayout 才能在更新数据时滚动到底部，然后 [self.tableView reloadData]。

打开 AutoLayout 后，tableView.contentSize 正在更新，但除非我旋转设备，否则我仍然无法滚动到底部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-28T08:32:07.653

我发现以下内容对我有用：

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];
    dispatch_async(dispatch_get_main_queue(), ^{
        self.tableView.contentSize = CGSizeMake(self.tableView.frame.size.width, self.tableView.contentSize.height);
    });
} 
```

注意异步调度：如果该行将同步执行，那么 contentSize 更改将在当前布局完成之前触发另一个布局传递。这会触发一个异常：

> 将 -viewDidLayoutSubviews 发送到视图控制器后仍然需要自动布局。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-09T14:31:08.920

我有同样的问题。

我找到[了这个](http://www.coursehero.com/courses/122/concept/3973/Handling-Rotation-in-Interface-Builder/)链接。当我尝试实现这一点时，我没有找到视图的自动调整大小属性然后我单击`Master View Controller`然后单击`File Inspector`并取消选中`Use Autolayout`然后转到`Attributes inspector`自动调整大小应该在那里然后你可以更改你想要的属性它。

我相信你一定已经设法弄清楚了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-09T17:14:00.013

**约束**的使用帮助了我。由于您使用的是 Storyboard，因此为所有边缘设置约束值非常容易，因此 UITableView 将始终填充整个 ViewController（当然，如果 UITableView 填充整个 ViewController），无论设备方向如何。

# image - 3D 图像压缩

> ID：12539287
> 
> 赞同：1
> 
> 时间：2012-09-21T23:15:39.093
> 
> 标签：image, matlab, image-processing, signal-processing

我有一个 3D 图像，需要一种能够压缩它的方法。可用的二维压缩方法的质量非常好。但是，我找不到任何适合 3D 的方法。任何人都可以帮助我吗？我正在使用 MATLAB 进行工作。提前感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T23:30:00.103

如果您的数据是基于网格的，例如 2d 图像，您会发现将 png 格式调整为三维非常容易。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T02:44:54.130

您可以认为您的 3D 图像是视频（第三维是时间）。然后，您可以使用标准视频压缩算法。

在matlab中，可以使用`videoWriter`该类制作压缩视频文件：

[https://www.mathworks.com/help/matlab/ref/videowriterclass.html](https://www.mathworks.com/help/matlab/ref/videowriterclass.html)

# ruby - Rspec it{} 评估使用最后一个变量值

> ID：12539299
> 
> 赞同：1
> 
> 时间：2012-09-21T23:16:46.643
> 
> 标签：ruby, testing, rspec

我正在使用 Rspec 为我的程序进行一些测试。在规范中，我将类实例化一次，然后使用*describe*和*contexts*对其进行测试。我遇到了一些有趣的事情，如果*它*似乎在上下文结束时被评估。例如，给定以下类及其相关规范：

```
class Tmp
  def initialize
    @values = {}
  end

  def modify(new_value1, new_value2)
    @values = {:a => new_value1, :b => new_value2}
  end

  def get_values
    return @values
  end
end 
```

* * *

```
describe Tmp do
  tmp = Tmp.new()

  describe "testing something" do
    context "change value" do

      # First evaluation
      tmp.modify("hi", "bye")
      it {tmp.get_values.should == {:a => "hi", :b => "bye"}}

      # Second evaluation
      tmp.modify("bye", "hi")
      it {tmp.get_values.should == {:a => "bye", :b => "hi"}}
    end
  end
end 
```

* * *

使用提供的类和规范，结果如下：

```
F.

Failures:

  1) Tmp testing something change value 
     Failure/Error: it {tmp.get_values.should == {:a => "hi", :b => "bye"}}
       expected: {:a=>"hi", :b=>"bye"}
            got: {:a=>"bye", :b=>"hi"} (using ==)
       Diff:
       @@ -1,3 +1,3 @@
       -:a => "hi",
       -:b => "bye"
       +:a => "bye",
       +:b => "hi"
     # ./spec/tmp_spec.rb:11:in `block (4 levels) in <top (required)>'

Finished in 0.00211 seconds
2 examples, 1 failure 
```

这很有趣，因为 Rspec 似乎使用*tmp*中的值评估第一个*它*，因为它位于上下文的末尾。即使在上下文中*tmp*正在更改其值并且**应该**通过，Rspec 仍会根据变量在结尾处具有的最后一个值来评估*其（我什至在**上下文中*使用本地原始变量尝试过此操作并且有类似的经验）。

 *****有没有办法解决这个问题并按顺序*对其*进行评估？或者至少要通过以下测试？我知道我可以使用不同的变量并且它会起作用，但必须有办法解决这个问题。我还想知道这是否是 Rspec 的预期效果。

**关于菲利普的回答的更新**

通过在单个中进行更改，*它会*阻止规范通过：

```
describe Tmp do
  describe "do something" do
    let(:instance) {Tmp.new}

    it 'should be modifiable' do
      instance.modify('hi', 'bye')
      instance.values.should == {a: 'hi', b: 'bye'}
      instance.modify('bye', 'hi')
      instance.values.should == {a: 'bye', b: 'hi'}
    end
  end
end 
```

但是，如果我使用该*主题*，它似乎会恢复并在第一次失败时*失败*

```
describe Tmp do
  describe "do something" do
    let(:instance) {Tmp.new}
    subject{instance.values}

    it 'should be modifiable' do
      instance.modify('hi', 'bye')
      should == {a: 'hi', b: 'bye'}
      instance.modify('bye', 'hi')
      should == {a: 'bye', b: 'hi'}
    end
  end
end 
```

不知道为什么会这样。至少我看到更改应该在*it*块内，以更好地反映我们正在测试的更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T23:39:19.550

您不应该在`it`、`specify`、`before`、`let`和`subject`块之外创建实例和操作它们。否则，受试者和其他变量在测试后不会重置。

下面我用几种不同的风格重写了你的规范。有关解释，请参阅内联注释。

```
class Tmp
  # Exposes the @values ivar through #values
  attr_reader :values

  def initialize
    @values = {}
  end

  def modify(new_value1, new_value2)
    @values = {a: new_value1, b: new_value2}
  end
end

describe Tmp do
  #`let` makes the return value of the block available as a variable named `instance` (technically it is a method named instance, but let's call it a variable).
  let(:instance) { described_class.new }

  # Inside an it block you can access the variables defined through let.
  it 'should be modifiable' do
    instance.modify('hi', 'bye')
    instance.values.should == {a: 'hi', b: 'bye'}
  end

  # or

  # `specify` is like `it` but it takes no argument:
  specify do
    instance.modify('hi', 'bye')
    instance.values.should == {a: 'hi', b: 'bye'}
  end

  # or

  # This is another common way of defining specs, one describe per method.
  describe '#modify' do
    let(:instance) { described_class.new }
    # Here we define the subject which is used implicitly when calling `#should` directly.
    subject { instance.values }
    before { instance.modify('hi', 'bye') }
    it { should == {a: 'hi', b: 'bye' } # Equivalent to calling `subject.should == ...`
  end

  # or

  # When we don't specify a subject, it will be an instance of the top level described object (Tmp).
  describe '#modify' do
    before { subject.modify('hi', 'bye') }
    its(:values) { should == {a: 'hi', b: 'bye' }
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T06:45:41.630

`rspec`执行命令时，RSpec 使用两遍过程：

1.  首先，它会加载所有规范文件并评估每个示例组。请注意，此时*不对*`it`块进行评估；它们被存储以供以后评估。
**   一旦加载了所有规范文件，并应用了所有元数据过滤等，RSpec 就会运行每个示例。*

 *起初这可能看起来令人困惑，但实际上，它与您编写的几乎所有 ruby​​ 代码非常相似：您的类是在程序中的某个时间点定义的（通常是在早期，当需要您的代码文件时），以及这些类中的方法稍后被调用。

这是一个纯 ruby​​ 代码片段，它演示了您的示例发生了什么：

```
# First you define your examples...
class MyExampleGroup
  tmp = {}

  define_method :example_1 do
    puts "example_1 failed (#{tmp.inspect})" unless tmp == {}
  end

  tmp[:a] = 1
  define_method :example_2 do
    puts "example_2 failed (#{tmp.inspect})" unless tmp == { :a => 1 }
  end

  tmp[:b] = 2
end

# Once all examples have been defined, RSpec runs them...
group = MyExampleGroup.new
group.example_1
group.example_2 
```

输出：

```
example_1 failed ({:a=>1, :b=>2})
example_2 failed ({:a=>1, :b=>2}) 
```

每个示例都可以以任何顺序独立运行，这对您的测试套件的稳健性很重要。为此，每个示例最好在自己的“沙箱”中使用自己的被测对象实例执行其操作。 `let`专为帮助解决此问题而设计；有关更多详细信息，请参阅[我的回答。`let`](https://stackoverflow.com/questions/5359558/when-to-use-rspec-let/5359979#5359979)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T23:42:30.713

来自 rspec-core 文档：

> 在后台，示例组是一个类，其中评估传递给描述或上下文的块。传递给它的块在该类的实例的上下文中进行评估。

[https://www.relishapp.com/rspec/rspec-core/docs/example-groups/basic-structure-describe-it](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/basic-structure-describe-it)

这向我表明，ExampleGroup（描述块）中的代码在组被实例化时执行，除了示例本身（it 块）。然后 it 块在 describe 块的上下文中执行。这就是为什么它只看到 的最后一个值`tmp`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T08:23:03.303

由于您的实现与&`modify`的行为之间的相互作用，您基于主题的示例失败了`let``subject`

这两个方法缓存了它们调用的结果——你显然不希望每次`instance`被引用时都创建你的类的新实例。这意味着您应该使用 subject 的值，因为它是第一次访问它（由您或由 rspec 显式访问）。

您的主题是`instance.values`，但调用您的 modify 方法将导致`instance.values`成为一个新对象（您正在为 @values 分配一个新的哈希，而不是在适当的位置对其进行变异）。您的断言使用的是第一个使用的主题值，因此它们根本没有比较当前值，`instance.values`因此您的规范失败。

就我个人而言，我认为主题`instance.values`有点奇怪：你正在与之互动的东西`instance`是我选择的主题。******

# cuda - 计算实现的带宽和 flops/Gflops，并评估 CUDA 内核性能

> ID：12539300
> 
> 赞同：1
> 
> 时间：2012-09-21T23:16:48.493
> 
> 标签：cuda, gpu, gpgpu

大多数论文都展示了 flops/Gflops 并为他们的 CUDA 内核实现了带宽。我还阅读了有关 stackoverflow 的以下问题的答案：

[如何评估 CUDA 性能？](https://stackoverflow.com/questions/11912703/how-to-evaluate-cuda-performance)

[您如何分析和优化 CUDA 内核？](https://stackoverflow.com/questions/2204527/how-do-you-profile-optimize-cuda-kernels)

[如何计算内核的 Gflops](https://stackoverflow.com/questions/7875607/how-to-calculate-gflops-of-a-kernel)

[在程序中计算 FLOPS/GFLOPS - CUDA](https://stackoverflow.com/questions/2795336/counting-flops-gflops-in-program-cuda)

[如何计算 CUDA 内核的实现带宽](https://stackoverflow.com/questions/7876006/how-to-calculate-the-achieved-bandwidth-of-a-cuda-kernel)

大多数事情看起来都不错，但仍然让我在计算这些事情时感到不舒服。任何人都可以编写一个简单的 CUDA 内核吗？然后给出 deviceQuery 的输出。然后逐步计算 flops/Gflops 并为该内核实现带宽。然后显示此内核的 Visual Profiler 结果。即详细显示结果，其中包含为这个简单的 CUDA 内核逐步获得的所有信息。这对我们大多数人来说真的很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:51:08.450

**Nsight Visual Studio 2.1 及以上版本**

如果您收集了已**实现的 FLOPS**实验和**内存统计信息 - 缓冲区**实验，则您请求的信息可用。

**Visual Profiler 4.2 及更高版本**

实现的带宽：当鼠标悬停在时间轴中的内核上时，此信息在属性窗格中的**Memory\DRAM Utilization**下可用。

分析器还不能收集 FLOPS 计数。这可以通过运行 cuobjdump -sass 查看汇编代码来完成。单步执行内核并计算将 FMA 和 DFMA 运算乘以 2 的单精度和双精度浮点指令。每条指令还应乘以断言的真线程。您还必须考虑控制流。这并不好玩，需要对指令集有深入了解的人。这可以通过在调试器中单步执行程序集来更好地完成。内核的持续时间在 Visual Profiler 属性窗格和详细信息窗格中作为**Duration**可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:08:37.397

您可以按照 Mark Harris[在 CUDA 中的 Optimizing Parallel Reductions 中](http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf)的计算。在那里，他使用输入数据作为基础，并将其划分为内核执行的时间。在示例中，他使用了 2^22 个整数，因此他有 0,016777216 GB 的输入数据。第一个内核花费了 8,054 毫秒，达到了 2,083 GB/s 的带宽。

经过几次优化后，他接近了 62,671 GB/s，并将其与所用 GPU 的峰值性能（86,4 GB/s）进行了比较。

尽管他使用整数，但您可以轻松地将其适应于 flops/Gflops。

# sql - 从 Access 中的表中实际删除记录的删除按钮

> ID：12539303
> 
> 赞同：2
> 
> 时间：2012-09-21T23:17:36.120
> 
> 标签：sql, ms-access, button

我对 Access 很陌生，所以有很多我不知道的。我目前有一个表单，上面有一个组合框、一些文本框和一个删除按钮。我已经设法让文本框根据用户从组合框中选择的内容自动填充，但我坚持如何删除该记录。

目前，我的删除按钮是通过按钮向导设置的，当按下时，只会从表单上的文本框中删除记录（清除表单）。我想要它做的实际上是从表单所基于的表中删除整个记录。我只是不知道我应该放在按钮后面的代码是什么。

对不起，如果这没有意义。基本上，我想要的只是一个按钮，当按下该按钮时，它会从记录来自的表中删除用户从组合框中选择的记录。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:51:19.573

按钮向导将为您提供一个有效的删除按钮，但是这会删除当前记录，因此您应该确保您的组合框更改当前记录。

请注意，如果您正在编写自己的删除按钮，您应该使用`DoCmd.RunCommand acCmdDeleteRecord`而不是`DoCmd.DoMenuItem`向导生成的调用。

# php - 如何通过 PHP 交付以前 GZip 缓存的 HTML 文件？

> ID：12539304
> 
> 赞同：4
> 
> 时间：2012-09-21T23:17:52.493
> 
> 标签：php, gzip

**情况**

我有一个为我的网站开发的缓存，我目前检查每个页面请求以查看是否有页面的静态缓存版本，然后，如果浏览器支持，我将页面压缩并返回给浏览器。

**当前代码**

```
$hash = md5('http://mydomain.com'.$url);
$fl = substr($url, 1, 1);
if(file_exists('/home/myaccount/public_html/cache/'.$fl.'/'.$hash.'.html') && $_GET['cache'] != 'off' && $fl!=''):
    ob_start("ob_gzhandler");
    header('Content-type: text/html; charset=utf-8');
    include 'cache/'.$fl.'/'.$hash.'.html';
elseif(file_exists('/home/myaccount/public_html/cache/'.$hash.'.html') && $_GET['cache'] != 'off'):
    ob_start("ob_gzhandler");
    header('Content-type: text/html; charset=utf-8');
    include 'cache/'.$hash.'.html';
else:
    $_SERVER['REQUEST_URI'] = str_replace('?cache=off','',$_SERVER['REQUEST_URI']);
    include 'interface/index.php'; 
endif; 
```

**期望的改变**

我想更改它，以便服务器上的文件已经被 gzip 压缩。我已经知道如何压缩文件并将它们设置在服务器上。但是，我想知道如何修改这部分脚本，以便它检查浏览器是否支持 gzip，然后简单地将文件的 gzip 版本交给他们。如果不支持，它会将其解压缩并将其交还给服务器。

**目的**

这将完成几件事。首先，它将在服务器上使用更少的空间来存储文件。其次，由于大多数浏览器都会接受 gzip 压缩格式，因此不必在每个页面请求上压缩它们，从而减少几毫秒的时间。相反，它只需要为极少数不受支持的浏览器解压缩文件。第三，这是一个了解更多关于 php 处理 gzip 文件的方式的机会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:43:04.000

我能够找到答案。这里适合任何有兴趣的人：

```
$hash = md5('http://mydomain.com'.$url);
$fl = substr($url, 1, 1);
if(file_exists('/home/myaccount/public_html/cache/'.$fl.'/'.$hash.'.html.gz') && $_GET['cache'] != 'off' && $fl!=''):
    if (strstr($HTTP_SERVER_VARS['HTTP_ACCEPT_ENCODING'], "gzip")):
        header("X-Compression: gzip");
        header("Content-Encoding: gzip");
        readfile('cache/'.$fl.'/'.$hash.'.html.gz');
    else:
        $gz = gzopen ('cache/'.$fl.'/'.$hash.'.html.gz', "r");
        $contents = gzread ($gz, 1000000);
        echo $contents;
    endif;
elseif(file_exists('/home/myaccount/public_html/cache/'.$hash.'.html.gz') && $_GET['cache'] != 'off'):
    if (strstr($HTTP_SERVER_VARS['HTTP_ACCEPT_ENCODING'], "gzip")):
        header("X-Compression: gzip");
        header("Content-Encoding: gzip");
        readfile('cache/'.$hash.'.html.gz');
    else:
        $gz = gzopen ('cache/'.$hash.'.html.gz', "r");
        $contents = gzread ($gz, 1000000);
        echo $contents;
    endif;
else:
    $_SERVER['REQUEST_URI'] = str_replace('?cache=off','',$_SERVER['REQUEST_URI']);
    include 'interface/index.php'; 
endif; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T01:03:23.603

我只看到第三个原因足以在 php 中实现这个东西，但是你应该自己发现解决方案。

至于前两个原因，Apache 有两种选择：

*   [mod_negotiation](http://httpd.apache.org/docs/2.4/mod/mod_negotiation.html)可用于将预 gzip 文件而不是其未压缩版本发送到支持客户端
*   [mod_deflate](http://httpd.apache.org/docs/2.4/mod/mod_deflate.html)可用于为不支持压缩传输编码的客户端解压缩（膨胀）输出流

# java - 是否有任何框架可以执行从 javascript 到 Java bean（spring bean）的 RPC？

> ID：12539310
> 
> 赞同：0
> 
> 时间：2012-09-21T23:18:28.453
> 
> 标签：java, javascript, spring, web-applications, json-rpc

这是我的情况的简短描述...

*   我有实现 BookingService 的 spring bean BookingServiceImpl
*   BookingService 有方法：RoomDescription getRoomDescriptionById(String roomId);
*   我也有带有 javascript 的 JSP 页面
*   我想在javascript中做这样的事情

    var roomDescription = bookingService.getRoomDescriptionById(222);

    /// ... 使用房间描述

问题是：是否有任何现有的框架可以做这样的事情（假设所有参数和方法结果都是 JSON 友好的，神奇地允许从 javascript 中校准 spring bean 而无需额外的样板代码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:47:29.153

[Spring 提供了通过Web MVC 框架](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)公开 RESTful 端点的机制

文档非常好。您的特定示例的控制器定义可能如下所示：

```
@Controller
@RequestMapping(value = "/rooms/{roomId}", method = RequestMethod.GET, produces="application/json")
@ResponseBody
public Room getRoom(@PathVariable String roomId, ModelMap modelMap) {    
    return bookingService.getRoomById(roomId);
} 
```

在 javascript 方面，您可以使用 jQuery 进行 ajax 调用来检索数据。这是一个可能看起来像的示例：

```
$.getJSON('http://yourserver.com/rooms/222',
    function(room) {
       // Do something with room.description
    }); 
```

这是一个基本示例（没有适当的错误处理、安全性等）。这是我所知道的从 javascript 调用 Spring RESTful 的现有框架最接近的东西。如果您需要在客户端 javascript 上访问 Room 数据，那么您需要通过一些 Spring 构造（例如控制器）公开它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:42:00.700

看看 DWR。这与创建 js 客户端一样接近。 [http://directwebremoting.org/dwr/documentation/server/integration/spring.html](http://directwebremoting.org/dwr/documentation/server/integration/spring.html)

# ruby-on-rails - 为什么路由方法在我的布局中不起作用？

> ID：12539314
> 
> 赞同：0
> 
> 时间：2012-09-21T23:19:03.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, views

耙路线列表：

```
program_reports GET    /programs/:program_id/reports(.:format)               reports#index 
```

然而把它放在一个布局文件中（programs.html.erb）

```
<li><%= link_to "Reports", program_reports(@program_id) %></li> 
```

给我一个错误：

```
undefined method `program_reports' for #<#<Class:0x007fe98d44baf0>:0x007fe98d465ce8> 
```

我不知道这是否重要，但请注意布局是嵌套布局结构的一部分，因此视图呈现如下：

```
respond_with @partocipants do |format|
  format.html {
    render layout: 'layouts/progtabs'
  }
end 
```

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:24:57.823

'program_reports' 路由为您的视图提供了 'program_reports_path' 和 'program_reports_url'。尝试：

```
<li><%= link_to "Reports", program_reports_path(@program_id) %></li> 
```

# android - Smali 指令具有误导性

> ID：12539315
> 
> 赞同：0
> 
> 时间：2012-09-21T23:19:06.043
> 
> 标签：android, smali

我有一个APK。
我使用 apktool.jar 来获取 smali 资源。
但是生成的 smali 文件很奇怪，因为它包含所有针对 v0 的指令。

示例说明：

```
mul-int v0, p0, p0  
rsub-int v0, v0, 0x201  
move/from16 v0, v1 
```

每个方法最后都有 .array-data 。
对理解这一点有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:49:57.147

具体到 .array-data 事物，这是一组数据，用于使用 fill-array-data 指令初始化数组。

有关更多信息，请查看[http://s.android.com/tech/dalvik/dalvik-bytecode.html上的 fill-array-data-payload 结构和 fill-array-data 指令](http://s.android.com/tech/dalvik/dalvik-bytecode.html)

# delphi - 如何获取实例已泄漏内存的自定义结构的名称？

> ID：12539319
> 
> 赞同：20
> 
> 时间：2012-09-21T23:19:40.910
> 
> 标签：delphi, debugging, memory-leaks, fastmm

我正在使用一个解析器，它将通过 FASTMM4 内存泄漏报告并将所有相关数据存储在定制的结构/类中。我使用[VirtualTreeView](http://www.lischke-online.de/index.php/controls/virtual-treeview)将每个已泄漏实例的类显示为树中的一个节点。[树](http://i.imgur.com/wGVn2.png)- 请注意第一个节点表示未知。这是因为 FASTMM 调用方法*AClass*来确定天气它是否是一个类。当它找到自定义结构时，会将它们标记为未知，这不会使我的报告分析器非常有效，因为大多数内存泄漏来自这些自定义结构和记录。

问题：有没有办法使用 DebugInfo 或[JVCL](http://jvcl.delphi-jedi.org/)等其他工具来收集这些调试符号并将它们的内存地址与内存泄漏报告文件中的内存地址进行比较？我希望我的树停止显示 UNKNOWN 并显示这些自定义结构的名称。我是 Delphi 编程的新手，甚至是处理内存泄漏的新手，所以任何帮助都意义重大！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:13:48.597

也许扩展的 RTTI（Delphi 2010 更新）可以用来创建一个类型字典，它只保存 typeinfo 指针和所有“非类”类型的名称。

可以使用条件定义启用此功能，以避免其在正常操作中的开销。

# google-maps - 褪色静态谷歌地图 API v3

> ID：12539320
> 
> 赞同：0
> 
> 时间：2012-09-21T23:19:42.797
> 
> 标签：google-maps, fade

有没有办法在谷歌静态地图 API V3 生成的图像中将地图边缘淡化为白色？

# css - 我应该在 Twitter Bootstrap 中的 css 上使用多少次或在哪里使用“容器”类？

> ID：12539324
> 
> 赞同：0
> 
> 时间：2012-09-21T23:20:20.100
> 
> 标签：css, twitter-bootstrap

但我不确定这个想法是`<div class="container">`在整个页面周围放置一个，还是应该嵌套它们。我想我在各种例子中都看到了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T00:52:44.947

任何你想要一个以 940px 宽度为中心的 div 的地方。它还用于导航栏中以定位元素。没有硬性规定。

如果它只打算在他们给它一个 id 而不是一个类的时候使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T23:48:40.237

我一直在试图弄清楚同样的事情——我*认为*这个想法是`.container`为了成为一个固定宽度的 div——默认 css 中为 940px——而`.container-fluid`它是流动的。至少这是我通过查看 css 和 (sparse)[文档](http://twitter.github.com/bootstrap/scaffolding.html#layouts)所得出的结论。

# php - HtmlEntities 和 Zend TextArea

> ID：12539327
> 
> 赞同：1
> 
> 时间：2012-09-21T23:20:44.690
> 
> 标签：php, zend-framework, zend-form

我对采埃孚还很陌生。

我一直在 Zend Framework 上建立一个网站。一切看起来都很好。

但是我不知道如何解决1个问题，这在开发文章管理模块时实际上是必不可少的。

我的表单具有如下所示的 ZEND_TextArea：

```
 $full_text = new Zend_Form_Element_TextArea('full_text');
    $full_text->setLabel('Description:')
            ->setOptions(array('rows' => '28','cols' => '40'))
            ->setRequired(true)
            ->addValidator('NotEmpty', true)
            ->addFilter('HTMLEntities')            
            ->addFilter('StringTrim'); 
```

它工作得很好，它具有过滤 HTMLEntities，这对于过滤 TextArea 非常重要。

在我正在使用的网站上显示保存的数据时 `html_entity_decode($item['full_text'])`，这很好。

但是，一旦我尝试对其进行编辑，它就会将编码的文本加载到我的文本区域中，在编辑后它会对我已经编码的文本进行编码 - 在首页上，我得到了一些可怕的东西，例如：

```
 p;quot;color: #ff0000;&amp;amp;amp;quot;&amp;amp;amp;gt;asdasda&amp;amp;amp;lt;/
span&amp;amp;amp;gt;sdas &amp;amp;amp;lt;strong&amp;amp;amp;gt;sdfsdf&amp;amp;amp;
lt;/strong&amp;amp;amp;gt;&amp; 
```

也许有人可以帮我弄清楚如何处理这个问题，特别是将解码的数据加载到 TextArea 的编辑形式中，这样我的字符串就不会被编码两次，并且在编辑时它是以人类的方式显示而不是编码的。

如果你能提供代码示例 - 真的很棒！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T09:29:16.173

不要在编辑表单中使用 HtmlEntities 过滤器，如果您在创建表单中使用它。

创建表格：

```
$elements[] = $this->createElement('text','name',array(
    'label'      => 'test',
    'filters'    => array('HtmlEntities'),
)); 
```

编辑表格：

```
$elements[] = $this->createElement('text','name',array(
    'label'      => 'test',
    'value'      => html_entity_decode($value)
)); 
```

您正在执行 html_entity_decode() 来设置值，向用户显示正确的“名称”。

在模型中更新数据时，您再次使用 htmlEntities 过滤器：

```
$data['name'] = $HtmlEntities->filter($data['name']); 
```

# javascript - 如何使用javascript实现cookies？

> ID：12539328
> 
> 赞同：-3
> 
> 时间：2012-09-21T23:20:45.810
> 
> 标签：javascript, cookies

我正在制作一个 javascript 游戏，为了节省进度，我正在实施 cookie。我看过很多教程，但我似乎找不到一个只保存一个变量，然后只有在用户系统上有一个 cookie 时才从 cookie 中获取变量的教程。有谁知道如何实现这个？谢谢！要求： 创建一个包含多个变量的 cookie 稍后访问 cookie 就是这样！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:21:59.717

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

用法：

创建会话 cookie：

```
$.cookie('the_cookie', 'the_value'); 
```

创建过期 cookie，从那时起 7 天：

```
$.cookie('the_cookie', 'the_value', { expires: 7 }); 
```

创建过期 cookie，在整个站点中有效：

```
$.cookie('the_cookie', 'the_value', { expires: 7, path: '/' }); 
```

读取 cookie：

```
$.cookie('the_cookie'); // => "the_value"
$.cookie('the_cookie', { raw: true }); // => "the_value" not URL decoded
$.cookie('not_existing'); // => null 
```

删除 cookie：

```
// returns false => No cookie found
// returns true  => A cookie was found
$.removeCookie('the_cookie'[, options]); 
```

注意：删除 cookie 时，您必须传递与设置 cookie 完全相同的路径、域和安全选项，除非您依赖默认选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:27:53.803

看看这个。

[http://robert.accettura.com/blog/2012/01/17/localstorage-with-cookie-fallback/](http://robert.accettura.com/blog/2012/01/17/localstorage-with-cookie-fallback/)

如果你要构建一个游戏，你应该在可用的地方使用本地存储，最好是 cookie。如果本地存储不可用，它会自动回退 cookie。

# wsdl - 在 CXF 上使用 @XmlMimeType() 在 WSDL 中生成的重复属性，为什么？

> ID：12539330
> 
> 赞同：1
> 
> 时间：2012-09-21T23:21:05.173
> 
> 标签：wsdl, cxf, mtom

我开发了一个启用了 MTOM 的 CXF Web 服务。我在我的 DTO 中添加了一个注释来告诉 JAXB MTOM 优化的候选字段：

```
@XmlType
public class FileDTO {

    private String Name;
    private String FileType;

    @XmlMimeType("application/octet-stream")
    private DataHandler Dfile;
    ... 
```

部署 Web 服务时，WSDL 中的 DTO 定义如下所示：

```
<xs:complexType name="fileDTO"> 
  <xs:sequence> 
    <xs:element name="Dfile" type="xs:base64Binary" minOccurs="0" xmime:expectedContentTypes="application/octet-stream"/> 
    <xs:element name="dfile" type="xs:base64Binary" minOccurs="0"/> 
    <xs:element name="fileType" type="xs:string" minOccurs="0"/> 
    <xs:element name="name" type="xs:string" minOccurs="0"/> 
  </xs:sequence> 
</xs:complexType> 
```

不知何故，私人成员 DFile 似乎是重复的！

为什么会这样？

当我尝试生成一个java客户端时

```
wsdl2java -client d:\service.wsdl 
```

我收到以下错误：

```
WSDLToJava Error: d:\service.wsdl [26,1]: Two declarations cause a collision in the ObjectFactory class. 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:31:42.787

默认情况下，JAXB 将所有公共属性视为已映射。由于您被注释了一个字段并且它的名称与您获得第二个映射的属性不匹配。

**解决方案**

1.  将注释从字段移动到属性（getter）。
2.  在类上指定`@XmlAceesorType(XmlAccessType.FIELD)`，以便 JAXB 将映射基于字段。

# c++ - 使用 boost :: bind 将 map 作为参数传递

> ID：12539338
> 
> 赞同：-1
> 
> 时间：2012-09-21T23:22:00.803
> 
> 标签：c++, string, class, map, compiler-errors

我需要将 a 的索引传入`map`a `std::wstring`，它的值也是 a ，传递给以 3作为参数`std::wstring`的成员函数。`std::wstrings`我正在尝试使用`boost::bind`in`write`方法，`class Result`如下面的示例代码所示。

我正在以更清晰的方式重新发布代码，并且出现编译错误。

```
 typedef std::map<std::wstring,std::wstring> map_type;

    class Print
    {
    public:
       Print(){};
       virtual ~Print(){};
       void setValue(const std::wstring & str1, const std::wstring & str2,
                const std::wstring & str3 = L"")
       {
          wprintf(L"String1[%ls] String2[%ls] String3[%ls]\n",str1.c_str(), str2.c_str(), str3.c_str());
       }
    };

    class Result : public Print
    {
       public:
       Result(){};
       virtual ~Result(){};
       void write(const std::wstring val1, const std::wstring val2, const std::wstring val3)
       {      
          std::map<std::wstring,std::wstring> my_map_test;
          my_map_test[L"Idx1"]=L"Value1";
          my_map_test[L"Idx2"]=L"Value2";         

          for_each(my_map_test.begin(), my_map_test.end(),
          boost::bind(&Result::setValue,
             boost::bind(&map_type::value_type::first,_1),
             boost::bind(&map_type::value_type::second,_1), L"TEST"));
       }
    };

int _tmain(int argc, _TCHAR* argv[])
{
   Result result;
   result.write();
   return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:50:10.180

再次测试后，它现在可以工作了，使用 boost::bind 时唯一缺少的参数是“this”指针，如下所示

for_all(my_map_test, boost::bind(&Result::setValue, **this** , boost::bind(&map_type::value_type::first,_1), boost::bind(&map_type::value_type::second,_1), L"测试”））;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:32:20.540

看来你`typedef`的不太对。除此之外，您似乎在每个嵌套`bind()`表达式之后都缺少括号。看起来，`Data::setValue`是一个成员函数，也就是说，它还需要被赋予要应用的对象。也就是说，我认为您想像这样使用它：

```
std::for_each(mem_ptr->properties.m_properties_map.begin(),
              mem_ptr->properties.m_properties_map.end(), 
              boost::bind(&Data::setValue,
                          boost::ref(object), 
                          boost::bind(&map_type::value_type::first, _1),
                          boost::bind(&map_type::value_type::second, _1),
                          L"Str")); 
```

˙ 遗憾的是，我无法测试这是否确实有效，因为您只提供了部分代码。否则，使用组合扩展对是一个有趣的想法。请注意，`first`and`second`也是成员 (of `std::pair<K, V>`)，但这些成员可以仅使用一个参数来“调用”，即调用它们的对象。对于数据成员`bind()`，假装可以调用它们来访问相应的值

# xcode - Xcode 4.4.1 验证 Mac 应用程序时出错：两个包的 CFBundleExecutable 可能不指向同一个文件

> ID：12539339
> 
> 赞同：6
> 
> 时间：2012-09-21T23:22:03.417
> 
> 标签：xcode, macos, validation

升级到 Xcode 4.4.1 + 10.8.2 后我遇到了这个错误。（两者同时完成）。这是在验证来自 Mac 应用商店的 Xcode 项目的存档时。

完整的错误是：

> 两个包的 CFBundleexecutable 可能不指向同一个文件。已找到以下共享包路径：MyAppName.app/Contents。

我不太确定这意味着什么，在 10.7.x Xcode 4.3.x 上编译的相同源代码没有错误。但是我需要在 10.8.x 和 XCode 4.4.x+ 上编译。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-22T19:43:14.997

在尝试了几件事后，我能够修复它。这里的问题是 Info.plist 文件包含在“复制捆绑资源”构建阶段。由于这个文件已经被 XCode 复制到别处，它导致了冲突。我从“复制捆绑资源”构建阶段删除了 Info.plist，这解决了这个问题。

由于 XCode 给出的信息不明确，希望这至少可以在未来更快地帮助其他人。

# php - PHP 语法 - 将关联值分配给数组

> ID：12539343
> 
> 赞同：0
> 
> 时间：2012-09-21T23:22:27.660
> 
> 标签：php

显然这段代码不起作用。问题描述为：

> 解析错误：语法错误，意外的 T_DOUBLE_ARROW

我的代码：

```
if(isset($_POST['my_custom_contact'])) {
    $registration_data[] = 'custom_contact' => $_POST['my_custom_contact'];
} 
```

我应该如何重写那个关联位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:23:34.850

取决于你想要做什么（我不明白），它可以是这样的：

```
$registration_data[] = array('custom_contact' => $_POST['my_custom_contact']); 
```

或者

```
$registration_data['custom_contact'] = $_POST['my_custom_contact']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T23:23:43.517

你像往常一样分配它。仅`=>`在初始化关联数组时使用该符号。

```
$registration_data['custom_contact'] = $_POST['my_custom_contact']; 
```

和...

```
$registration_data = array ('custom_contact' => $_POST['my_custom_contact']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:24:06.363

我认为你需要这样写：

```
$registration_data[] = array('custom_contact' => $_POST['my_custom_contact']); 
```

# python - 根据随机数打开唯一的文本文件

> ID：12539344
> 
> 赞同：2
> 
> 时间：2012-09-21T23:22:33.767
> 
> 标签：python, file, text, random

基于随机数在 Python 中打开一个唯一的文本文件。

我正在使用随机数生成器来随机打开一个文本文件，但是我的代码将包含很多 if 语句，因为我很新，而且它是我知道的唯一方法。但是有更好的方法，因为每种编程语言都有更好的方法，我只需要知道它是什么。这是我的代码：

```
n = random.randint(1, 3)
    print n
    if (n == 1):
         f = open('E:/1.txt', 'r') 
```

我显然必须对生成的每个随机数都这样做，所以我怎么能......

```
f = open('E:/' & n & '.txt., 'r') 
```

这显然是行不通的，但希望你能理解并帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:25:22.797

只需使用字符串格式：

```
n = random.randint(1, 3)
f = open('E:/%d.txt' % n, 'r') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:27:15.520

在 python 中，您使用`str`函数将整数转换为字符串，并使用`+`运算符将​​字符串连接在一起。

```
n = random.randint(1, 3)
f = open('E:/' + str(n) + '.txt', 'r') 
```

[使用字符串格式化](http://docs.python.org/library/stdtypes.html#string-formatting)可能会更好地获得您正在寻找的内容。

```
n = random.randint(1, 3)
f = open('E:/%s.txt' % n, 'r') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:25:48.463

```
for i in range(3):
    n = random.randint(1,3)
    with open("E:\{0}.txt".format(n),"r") as f:
        #do something 
```

# html - 使用 CSS 的并排块

> ID：12539346
> 
> 赞同：7
> 
> 时间：2012-09-21T23:23:08.053
> 
> 标签：html, css, alignment, css-position

我想并排放置块元素。我不想使用`left, right, top`，或类似的东西。

### HTML

```
<div class="iLB">LOLOLOL</div>
<div class="iLB">
    This is content.<br/>
    This is content.<br/>
    This is content.
</div>
<div class="iLB">This, too?</div> 
```

### CSS

```
.iLB {
    display: inline-block;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/97wDh/)**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T23:25:18.810

采用`vertical-align:top;`

```
.iLB {
    display: inline-block;
    vertical-align: top;
}​ 
```

**JSFiddle**：http: [//jsfiddle.net/97wDh/1/](http://jsfiddle.net/97wDh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:26:19.467

当您使用`display: inline-block`它时，它实际上是内联元素。它们就像字符框一样工作，因此它们并排放置在文本行上，这就是它们与底部边缘在相同高度对齐的原因。

您可以`float: left`改为使用它们来制作块元素并将它们并排放置：

[http://jsfiddle.net/97wDh/2/](http://jsfiddle.net/97wDh/2/)

# r - ggplot 单独的图例和绘图

> ID：12539348
> 
> 赞同：15
> 
> 时间：2012-09-21T23:23:22.127
> 
> 标签：r, ggplot2, legend

我正在使用**grid** lpackage 来放置我用**ggplot2**制作的图表：

```
library(ggplot2)
library(grid)

Layout <- grid.layout(nrow = 4, ncol = 4,
          widths = unit(1, "null"), 
          heights = unit(c(0.4, 0.8, 1.2, 1.2), c("null", "null", "null")))
grid.show.layout(Layout)

plot1 = ggplot(diamonds, aes(clarity, fill = color)) + 
            geom_bar() + 
            facet_wrap(~cut, nrow = 1)
print(plot1 + theme(legend.position = "none"), 
vp = viewport(layout.pos.row = 3, layout.pos.col = 1:4)) 
```

问题是我想把图放在第三行 (3,1) - (3,4) 并将图例放在 (4,4) 位置。不幸的是，我真的找不到创建图例变量的方法。我在网上搜索，我得到的最接近的是使用旧的 `+ opts(keep = "legend_box")`，但已被弃用。

[较旧的解决方案](http://learnr.wordpress.com/2009/05/26/ggplot2-two-or-more-plots-sharing-the-same-legend/)。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-22T00:56:29.770

您可以从`grob`ggplot 的对象中获取图例。然后您可以使用该`grid.arrange`功能来定位所有内容。

```
library(gridExtra)
g_legend<-function(a.gplot){
    tmp <- ggplot_gtable(ggplot_build(a.gplot))
    leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box")
    legend <- tmp$grobs[[leg]]
    legend
}

legend <- g_legend(plot1)

grid.arrange(legend, plot1+ theme(legend.position = 'none'), 
    ncol=2, nrow=1, widths=c(1/6,5/6)) 
```

网上有很多使用这个`g_legend`功能的例子。

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-28T11:17:11.193

ggplot2的开发者自己建议了一个功能**grid_arrange_shared_legend ：** [https](https://github.com/hadley/ggplot2/wiki/Share-a-legend-between-two-ggplot2-graphs) ://github.com/hadley/ggplot2/wiki/Share-a-legend-between-two-ggplot2-graphs ，效果很好。

# three.js - 提高 Three.js 中的 ParticleSystem 性能

> ID：12539351
> 
> 赞同：2
> 
> 时间：2012-09-21T23:23:42.580
> 
> 标签：three.js

我正在模拟围绕太阳系运行的小行星。[您可以在此处](http://asterank.com/3d/)查看初始实现。

我将整个轨道对象集转换为单个 ParticleSystem，我可以在我的家用机器上以 60fps 的速度运行 10,000 个轨道（在我的笔记本电脑上大约为 30fps）。15-20k 让我的机器降到 30fps。

我正在运行一个网络工作者来计算一个新的位置列表，然后我更新主线程中每个对象的位置，如下所示：

```
 for (var j=0; j < positions.length; j++) {
      myobjects[j].MoveParticleToPosition(positions[j]);
    }
    particle_geometry.__dirtyVertices = true; 
```

移动粒子到位置：

```
 var vertex_particle = this.particle_geometry.vertices[this.vertex_pos];
  vertex_particle.x = pos[0];
  vertex_particle.y = pos[1];
  vertex_particle.z = pos[2]; 
```

我的问题是：如何从这里提高性能？

例如，有没有更快的方法来更新几何顶点？是否有可以应用于 ParticleSystem 的优化？是否可以从网络工作者中更新顶点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:27:54.907

除了切换到 ParticleSystem 之外，我还使用了另外两种技术来提高性能。它们都不是 Three.js 特有的。他们涉及使用 Web Worker 并将循环分成块，`setTimeout`以便为 Three.js 提供更新渲染的机会。

[我在这里](http://ianww.com/blog/programming/optimizing-three-js-performance-simulating-tens-of-thousands-of-independent-moving-objects/)写了一篇包含更多技术细节的博文。

# mysql - 如何将 mysql 空间 POINT 转换为 yii 模型中的可读格式？

> ID：12539355
> 
> 赞同：3
> 
> 时间：2012-09-21T23:24:25.653
> 
> 标签：mysql, yii, geospatial, spatial

我有一个基于带有空间`POINT`字段的 mysql 表的 yii 模型。查看此模型的记录时，我想以“55.0000，-89.5000”的格式显示坐标。在默认生成的 CRUD 视图中，目前该字段不显示任何内容。

我想我必须以`AsText`某种方式使用 mysql 函数，也许在`beforeFind()`？

我怎样才能做到这一点？

**更新**

我发现我可以使用以下命令将值打印为“POINT（55.0000，-89.5000）”：

```
public function beforeFind()
{
    parent::beforeFind();

    $criteria = new CDbCriteria();
    $criteria->select = "AsText(coordinates) AS coordinates";
    $this->dbCriteria->mergeWith($criteria);
} 
```

但是，这具有导致所有其他字段“未设置”的不幸副作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:22:56.220

`$criteria->select`我猜默认值为`"*"`. 通过设置`$criteria->select = "AsText(coordinates) AS coordinates"`，我写完了*，因此只返回单列。所以我所做的是更改行以手动指定除坐标列之外的其他列：

```
$criteria->select = "id,name,street,city,AsText(coordinates) AS coordinates"; 
```

不确定这是否是理想的方式，但它对我有用。我相信这与您在选择中使用其他数据库函数所必须做的事情相同。

# javascript - 如何反转无序列表中列表项的顺序

> ID：12539361
> 
> 赞同：5
> 
> 时间：2012-09-21T23:25:18.617
> 
> 标签：javascript

假设我有一个无序列表，如下所示：

```
<ul id="birds">
  <li>Bald Eagle</li>
  <li>Falcon</li>
  <li>Condor</li>
  <li>Albatross</li>
  <li>Parrot</li>
</ul> 
```

使用纯 JavaScript（不包括 jQuery），我希望能够反转此列表的顺序 - 以便它匹配以下预期的“输出”：

```
<ul id="birds">
  <li>Parrot</li>
  <li>Albatross</li>
  <li>Condor</li>
  <li>Falcon</li>
  <li>Bald Eagle</li>
</ul> 
```

这是我尝试编写的 JavaScript，以尝试实现此目标：

```
var birdList = document.getElementById("birds").getElementsByTagName("li");
var birdListReverse = birdList.reverse();

for(var i = 0; i < birdList.length; i++)
{
  birdList[i] = birdListReverse[i];
} 
```

我认为以某种方式用“反转”列表中的项目覆盖当前列表项目就足够了，但不是。我是否必须以某种方式操纵`nodeValue`列表中的每一个？

我想在单击按钮时执行此操作 - 这是最简单的部分，它只是获得了反转列表的技术，这有点妨碍了我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T23:30:40.970

HTMLCollection 只是节点的只读视图。为了操作节点，您必须使用各种 DOM 操作方法之一。就您而言，恰好有一条捷径；您需要做的就是以相反的顺序附加子节点。

```
var birds = document.getElementById("birds");
var i = birds.childNodes.length;
while (i--)
  birds.appendChild(birds.childNodes[i]); 
```

**编辑**：发生的事情是`appendChild`在添加之前从文档中删除节点。这有两个效果：a）它使您不必制作节点列表的副本并在以相反顺序附加它们之前将它们删除，b）它会颠倒节点的顺序，因为它附加了最后一个孩子第一个和第一个子列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:30:40.687

你可以这样做（在普通的 javascript 中）。您可以`li`以相反的顺序循环浏览标签并将它们附加到父级。这将产生颠倒它们的顺序的自然效果。你得到最后一个，将它附加到列表的末尾，得到第二个到最后一个，将它附加到列表中。获取第三个到最后一个，将其附加到列表的末尾，依此类推，所有项目最终都颠倒了。请注意，您可以在 DOM 中已经存在的东西上使用 appendChild，它将自动从当前位置移动（例如，在附加之前删除）。

```
var birds = document.getElementById("birds");
var birdList = birds.getElementsByTagName("li");
for (var i = birdList.length - 1; i >= 0; i--) {
    birds.appendChild(birdList[i]);
}​ 
```

工作示例：http: [//jsfiddle.net/jfriend00/GLvxV/](http://jsfiddle.net/jfriend00/GLvxV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T23:33:28.060

```
var birds = document.getElementById('birds');

for(var i = 0, bll = birds.childNodes.length; i < bll; i++) {
  birds.insertBefore(birds.childNodes[i], birds.firstChild);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-27T16:54:27.480

```
const list = document.querySelector("ul");
Array.from(list.children).reverse().forEach(element =>list.appendChild(element));
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T23:32:12.963

操作`birdList`不会重新排序元素，因为`birdList`它只是一个集合 - a [`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)- 它独立于 DOM 本身。

您实际上需要获取对`<ul id="birds">`元素的引用，然后使用[`removeChild(...)`](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)and [`appendChild(...)`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)- Maybe的组合[`insertBefore()`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T23:32:41.237

未经测试，但尝试：

```
var parent = document.getElementById("birds");
var birdList = parent.getElementsByTagName("li");

for(var i = birdList.length-1; i > 0; --i) {
    parent.appendChild(birdList[i];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-22T09:59:45.203

实际上不需要 JavaScript。如果您在`<ol>`这里使用语义正确的（有序列表）元素（因为排序显然对您很重要），那么您可以使用该`reversed`属性来执行完全相同的操作，而无需任何脚本依赖！为了在视觉上颠倒项目的顺序，我们会在两行 CSS 中添加`flex-direction`：

```
ol[reversed] {
  display: flex;
  flex-direction: column-reverse;
}
```

```
<ol reversed>
  <li>Bald Eagle</li>
  <li>Falcon</li>
  <li>Condor</li>
  <li>Albatross</li>
  <li>Parrot</li>
</ol>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-03T21:09:24.110

你也可以这样做。它的工作原理如下：

*   获取所有鸟类列表项（`<li>`元素）并将它们作为 NodeList 返回
*   将 NodeList 转换为数组并反转数组（因为数组中的项目可以反转，但 NodeLists 中的项目不能反转）
*   将数组中的每个鸟列表项附加到原始列表容器（`<ul>`元素）中

代码：

```
const birdsContainer = document.getElementById("birds");
const birdList = birds.getElementsByTagName("li");

[].slice.call(birdList)
  .reverse()
  .forEach(bird => birdsContainer.appendChild(bird)); 
```

# android - 导致 android.view.ViewInflate$InflateException: Binary xml 文件的可能原因是什么？

> ID：12539362
> 
> 赞同：-2
> 
> 时间：2012-09-21T23:25:21.330
> 
> 标签：android, exception, inflate

导致“android.view.ViewInflate$InflateException: Binary xml file”的可能原因是什么？以下是所有错误。我不知道为什么，每次我创建一些关于 Fragments 的项目时，它都会提示这些错误。

```
09-21 22:57:09.166: E/AndroidRuntime(674): FATAL EXCEPTION: main
09-21 22:57:09.166: E/AndroidRuntime(674): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testfra/com.example.testfra.FragTestActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class Fragment
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.os.Looper.loop(Looper.java:137)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-21 22:57:09.166: E/AndroidRuntime(674):  at java.lang.reflect.Method.invokeNative(Native Method)
09-21 22:57:09.166: E/AndroidRuntime(674):  at java.lang.reflect.Method.invoke(Method.java:511)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-21 22:57:09.166: E/AndroidRuntime(674):  at dalvik.system.NativeStart.main(Native Method)
09-21 22:57:09.166: E/AndroidRuntime(674): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class Fragment
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.Activity.setContentView(Activity.java:1835)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.example.testfra.FragTestActivity.onCreate(FragTestActivity.java:12)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.Activity.performCreate(Activity.java:4465)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-21 22:57:09.166: E/AndroidRuntime(674):  ... 11 more
09-21 22:57:09.166: E/AndroidRuntime(674): Caused by: java.lang.ClassNotFoundException: android.view.Fragment
09-21 22:57:09.166: E/AndroidRuntime(674):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
09-21 22:57:09.166: E/AndroidRuntime(674):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
09-21 22:57:09.166: E/AndroidRuntime(674):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
09-21 22:57:09.166: E/AndroidRuntime(674):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
09-21 22:57:09.166: E/AndroidRuntime(674):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
09-21 22:57:09.166: E/AndroidRuntime(674):  ... 21 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:48:22.683

这是由布局文件或布局文件中使用的片段或组件中的错误引起的。由于在编辑时检测到 xml 中的错误，您很可能会在您创建的用于布局的片段或视图中遇到错误（如 NullPointerException）。但是你不能指望人们正确回答你的问题，如果你给我们的只是你的 logcat 中的一行。发布整个堆栈跟踪，然后有人可能会向您指出您的代码中有什么问题。如果可能，请发布相关的代码，例如项目中生成堆栈跟踪的类。

# java - 何时使用 Mockito.verify()？

> ID：12539365
> 
> 赞同：206
> 
> 时间：2012-09-21T23:25:43.040
> 
> 标签：java, unit-testing, junit, mockito

我为 3 个目的编写 jUnit 测试用例：

1.  为了确保我的代码在所有（或大部分）输入组合/值下满足所有必需的功能。
2.  确保我可以更改实现，并依靠 JUnit 测试用例告诉我我的所有功能仍然满意。
3.  作为所有用例的文档，我的代码处理，并充当重构规范 - 如果代码需要重写。（重构代码，如果我的 jUnit 测试失败 - 你可能错过了一些用例）。

我不明白为什么或何时`Mockito.verify()`应该使用。当我看到`verify()`被调用时，它告诉我我的 jUnit 正在意识到该实现。（因此更改我的实现会破坏我的 jUnit，即使我的功能不受影响）。

我在找：

1.  正确使用的指南应该是什么`Mockito.verify()`？

2.  jUnits 了解或紧密耦合到被测类的实现是否从根本上正确？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-09-22T00:51:32.333

如果类 A 的契约包括它调用类型 C 对象的方法 B 的事实，那么您应该通过制作类型 C 的模拟来测试这一点，并验证方法 B 是否已被调用。

这意味着 A 类的契约有足够的细节来讨论类型 C（可能是接口或类）。所以是的，我们正在谈论的规范级别超出了“系统要求”，并且以某种方式描述了实现。

这对于单元测试是正常的。当您进行单元测试时，您希望确保每个单元都在做“正确的事情”，这通常包括它与其他单元的交互。这里的“单元”可能意味着类或应用程序的更大子集。

**更新：**

我觉得这不仅适用于验证，也适用于存根。一旦您存根协作者类的方法，您的单元测试就在某种意义上变得依赖于实现。这有点像单元测试的性质。由于 Mockito 与验证一样重要，因此您使用 Mockito 的事实意味着您将遇到这种依赖关系。

以我的经验，如果我改变一个类的实现，我经常不得不改变它的单元测试的实现来匹配。不过，通常情况下，我不必更改班级单元测试**的清单。**当然，除非更改的原因是存在我之前未能测试的条件。

这就是单元测试的意义所在。不受这种对协作者类使用方式的依赖影响的测试实际上是子系统测试或集成测试。当然，这些也经常使用 JUnit 编写，并且经常涉及到 mocking 的使用。在我看来，“JUnit”是一个糟糕的名字，因为它是一个让我们产生所有不同类型测试的产品。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-09-23T11:16:38.317

大卫的回答当然是正确的，但并不能完全解释你为什么想要这个。

基本上，在进行单元测试时，您是在孤立地测试一个功能单元。您测试输入是否产生预期的输出。有时，您还必须测试副作用。简而言之，验证允许您这样做。

例如，您有一些应该使用 DAO 存储东西的业务逻辑。您可以使用一个集成测试来实例化 DAO，将其连接到业务逻辑，然后在数据库中查看是否存储了预期的内容。这不再是单元测试。

或者，您可以模拟 DAO 并验证它是否以您期望的方式被调用。使用 mockito，您可以验证某个东西是否被调用、调用频率，甚至可以在参数上使用匹配器以确保它以特定方式被调用。

像这样的单元测试的另一面确实是您将测试与实现联系起来，这使得重构变得更加困难。另一方面，良好的设计气味是正确执行它所需的代码量。如果您的测试需要很长，则可能是设计有问题。因此，需要测试的具有很多副作用/复杂交互的代码可能不是一件好事。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-09-24T09:40:50.510

这是个好问题！我认为它的根本原因如下，我们不仅使用 JUnit 进行单元测试。所以这个问题应该分开：

*   我应该在*集成*（或任何其他高于单元测试）测试中使用 Mockito.verify() 吗？
*   我应该在**黑盒**单元测试中使用 Mockito.verify() 吗？
*   我应该在**白盒**单元测试中使用 Mockito.verify() 吗？

所以如果我们忽略高于单元测试，这个问题可以改写为“*使用带有 Mockito.verify() 的**白盒单元测试在单元测试和我的可能实现之间创建了很好的一对，我可以做一些****“灰盒“**单元测试以及我应该使用什么经验法则*”。

现在，让我们一步一步地完成所有这些。

*- 我应该在我的*集成*（或任何其他高于单元测试）测试中使用 Mockito.verify() 吗？* 我认为答案显然是否定的，而且你不应该为此使用模拟。您的测试应尽可能接近实际应用。您正在测试完整的用例，而不是应用程序的孤立部分。

****黑盒****与**白盒**单元测试** 如果您使用**黑盒**方法，您真正在做什么，您提供（所有等价类）输入、*状态*和测试，您将收到预期的输出。在这种方法中，使用模拟通常是合理的（您只是模仿他们正在做正确的事情；您不想测试它们），但是调用 Mockito.verify() 是多余的。

如果您使用的是**白盒**方法，那么您正在测试您的单元的*行为*。在这种方法中调用 Mockito.verify() 是必不可少的，您应该验证您的单元的行为是否符合您的预期。

**灰盒测试的经验法则 白盒测试** 的问题在于它会产生高耦合。一种可能的解决方案是进行灰盒测试，而不是白盒测试。这是一种黑白盒测试的组合。你真的在测试你的单元的*行为*，就像在白盒测试中一样，但一般来说，你*尽可能*让它与实现无关。如果可能，您只需像在黑盒情况下一样进行检查，只需断言输出是您所期望的。所以，你的问题的本质是什么时候可能。

这真的很难。我没有很好的例子，但我可以给你举个例子。在上面提到的 equals() 与 equalsIgnoreCase() 的情况下，您不应该调用 Mockito.verify()，只需断言输出即可。如果你做不到，把你的代码分解成更小的单元，直到你能做到为止。另一方面，假设您有一些@Service，并且您正在编写@Web-Service，它本质上是@Service 的包装器——它将所有调用委托给@Service（并进行一些额外的错误处理）。在这种情况下，调用 Mockito.verify() 是必不可少的，你不应该重复你对@Serive 所做的所有检查，验证你使用正确的参数列表调用@Service 就足够了。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-30T15:16:23.243

我必须说，从经典方法的角度来看，您是绝对正确的：

*   如果您首先创建（或更改）应用程序的*业务逻辑，然后**用（采用）测试*（*Test-Last 方法*）覆盖它，那么让测试了解您的软件如何工作的任何事情都是非常痛苦和危险的，除了检查输入和输出。
*   如果您正在实践[*测试驱动的方法*](http://en.wikipedia.org/wiki/Test-driven_development)，那么您的测试[首先要编写、更改并反映](http://www.jamesshore.com/Blog/Red-Green-Refactor.html)软件功能的用例。**实施取决于测试。**这有时意味着，您希望您的软件以某种特定的方式实现，例如依赖其他组件的方法，甚至调用它特定的次数。这就是[Mockito.verify()](http://www.baeldung.com/mockito-verify)派上用场的地方！

重要的是要记住，没有通用工具。软件的类型、它的大小、公司目标和市场情况、团队技能和许多其他因素都会影响在您的特定情况下使用哪种方法的决定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-20T02:55:51.180

正如一些人所说

1.  有时您没有可以断言的直接输出
2.  有时您只需要确认您的测试方法正在向其合作者发送正确的间接输出（您正在模拟）。

关于您在重构时对破坏测试的担忧，这在使用模拟/存根/间谍时有些意料之中。我的意思是根据定义，而不是针对特定的实现，例如 Mockito。但是你可以这样想——如果你需要做一个重构来改变你的方法的工作方式，那么在 TDD 方法上做是个好主意，这意味着你可以**先**改变你的测试来定义新的行为（这将使测试失败），**然后**进行更改并再次通过测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-29T14:15:54.987

在大多数情况下，当人们不喜欢使用 Mockito.verify 时，这是因为它用于验证被测单元正在执行的所有操作，这意味着如果其中有任何更改，您将需要调整您的测试。但是，我认为这不是问题。如果您希望能够更改方法的功能而无需更改其测试，这基本上意味着您要编写不测试您的方法所做的所有事情的测试，因为您不希望它测试您的更改. 这是错误的思维方式。

真正的问题是，如果您可以修改您的方法的功能，并且应该完全涵盖该功能的单元测试不会失败。这意味着无论您的更改意图是什么，您的更改结果都不会被测试覆盖。

正因为如此，我更喜欢尽可能地模拟：也模拟你的数据对象。这样做时，您不仅可以使用 verify 来检查是否调用了其他类的正确方法，而且还可以使用这些数据对象的正确方法收集传递的数据。为了使其完整，您应该测试调用发生的顺序。示例：如果您修改 db 实体对象，然后使用存储库将其保存，则仅验证对象的 setter 是否使用正确的数据调用以及是否调用了存储库的 save 方法是不够的。如果它们以错误的顺序被调用，你的方法仍然没有做它应该做的事情。所以，我不使用 Mockito.verify 但我创建了一个包含所有模拟的 inOrder 对象并使用 inOrder.verify 代替。如果你想让它完整，你还应该调用 Mockito。最后的 verifyNoMoreInteractions 并将所有模拟传递给它。否则，有人可以在不测试的情况下添加新功能/行为，这意味着在您的覆盖率统计可以达到 100% 之后，您仍然在堆积未断言或验证的代码。

# c - 关于“for(a, b&&c, d) {...}”和“for(a, b, d) if(c) {...}”的区别

> ID：12539367
> 
> 赞同：0
> 
> 时间：2012-09-21T23:26:07.650
> 
> 标签：c, for-loop

作为一名资深的程序员，意识到即使是不起眼的`for`循环也没有完全理解，这令人清醒。为什么下面的程序`1`会在控制台打印一个单曲？我完全希望第一个循环也产生一个`1`！`-ansi`用开关编译。

```
/* gcc installed version: 4:4.4.4-1ubuntu2 */

#include <stdio.h>

#define SIZE 2

int main()
{
  int i;  
  int a[SIZE];

  a[0]=0; 
  a[1]=1;

  for(i=0; (i<SIZE) && (a[i]!=0); i++)        
    printf("%i\n",a[i]); 

  for(i=0; i<SIZE; i++)   
    if (a[i]!=0)  
      printf("%i\n",a[i]);      

  return 0;      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:29:43.327

第一个循环相当于：

```
for(i=0; ; i++) {
    if( !((i<SIZE) && (a[i]!=0)))
        break;      
    printf("%i\n",a[i]); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:31:17.930

这之间的区别是：

```
for(i=0; i<SIZE; i++)   
  if (a[i]!=0)  
    printf("%i\n",a[i]);
  else
    continue; // implicit in your version with the if statement 
```

还有这个：

```
for(i=0; i<SIZE; i++)   
  if (a[i]!=0)  
    printf("%i\n",a[i]);
  else
    break; // equivalent of what the non if statement version does. 
```

（归功于@ta.speot.is 实际发现了问题，这只是一个解释）

# php - 设置 haProxy 以在 Appfog 上切换多个应用程序

> ID：12539370
> 
> 赞同：2
> 
> 时间：2012-09-21T23:26:45.293
> 
> 标签：php, node.js, haproxy, appfog

我目前在 AppFog 有两个应用程序，它们是。

[http://sru-forums-prod.aws.af.cm/](http://sru-forums-prod.aws.af.cm/)和[http://sru-home-prod.aws.af.cm/](http://sru-home-prod.aws.af.cm/)

我在我的计算机上本地运行 haProxy，这是我当前的配置文件。

全局调试

```
defaults
  mode http
  timeout connect 500ms
  timeout client 50000ms
  timeout server 50000ms

backend legacy
  server forums sru-forums-prod.aws.af.cm:80

frontend app *:8232
  default_backend legacy 
```

最终目标是 localhost:8232 将流量转发到 sru-home-prod，而 localhost:8232/forums/* 将流量转发到 sru-forums-prod。但是，我什至无法启动并运行一个简单的代理。

当我从这个配置文件运行 HAProxy 时，我在 localhost:8232 收到 AppFog 404 Not Found。

我错过了什么，这甚至可能吗？

编辑：

新配置有效，但现在我有一个端口 60032 在响应中返回。

```
global
  debug

defaults
  mode http
  timeout connect 500ms
  timeout client 50000ms
  timeout server 50000ms

backend legacy
  option forwardfor
  option httpclose
  reqirep ^Host: Host:\ sru-forums-prod.aws.af.cm
  server forums sru-forums-prod.aws.af.cm:80

frontend app *:8000
  default_backend legacy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:39:46.687

您收到 AppFog 404 Not Found 的原因是因为 AppFog 上托管的应用程序是按域名路由的。为了让 AppFog 知道要为您服务的应用程序，域名必须在 HTTP 请求中。当您转到 localhost:8232/forums/ 时，它将 localhost 作为 AppFog 没有作为注册应用程序名称的域名发送。

有一个很好的方法来解决这个问题

1) 将您的应用程序映射到第二个域名，例如：

```
af map <appname> sru-forums-prod-proxy.aws.af.cm 
```

2) 编辑您的 /etc/hosts 文件并添加以下行：

```
127.0.0.1   sru-forums-prod-proxy.aws.af.cm 
```

3) 转到[http://sru-forums-prod-proxy.aws.af.cm:8232/forums/](http://sru-forums-prod-proxy.aws.af.cm:8232/forums/)它将映射到本地计算机，但会成功通过您的 haproxy，最终将正确的主机名映射到您的AppFog 托管的应用程序。

这是一个有效的 haproxy.conf 文件，它演示了到目前为止它是如何使用类似方法为我们工作的。

```
defaults
  mode http
  timeout connect 500ms
  timeout client 50000ms
  timeout server 50000ms

backend appfog
  option httpchk GET /readme.html HTTP/1.1\r\nHost:\ aroundtheworld.appfog.com
  option forwardfor
  option httpclose
  reqirep ^Host: Host:\ aroundtheworld.appfog.com
  server pingdom-aws afpingdom.aws.af.cm:80 check
  server pingdom-rs afpingdom-rs.rs.af.cm:80 check
  server pingdom-hp afpingdom-hp.hp.af.cm:80 check
  server pingdom-eu afpingdom-eu.eu01.aws.af.cm:80 check
  server pingdom-ap afpingdom-ap.ap01.aws.af.cm:80 check

frontend app *:8000
  default_backend appfog

listen stats 0.0.0.0:8080
    mode http
    stats enable
    stats uri /haproxy 
```

# c - 用位运算符替换“！=”

> ID：12539371
> 
> 赞同：1
> 
> 时间：2012-09-21T23:27:10.270
> 
> 标签：c, binary, bit-manipulation

仅使用按位运算符`(|, &, ~, ^, >>, <<)`，是否可以替换`!=`以下内容？

```
// ...
if(a != b){
    // Some code
}
/// ... 
```

这主要是出于自身利益，因为我看到了如何使用`==`but not `!=`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T23:35:53.470

```
if(a ^ b) {
    //some code
} 
```

应该管用。

您还可以使用您喜欢的方法`==`并在其后面添加`^ 0xFFFFFFFF`（使用适量的 F 以匹配数据类型的长度）。这会否定该值（与`!`前面相同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T23:35:03.040

`a != b``a`表示和的位表示中至少有一个不同的位`b`。如果两个输入位操作数不同，则 XOR 位运算符返回 1，否则返回 0。

因此，您可以对 and 应用 XOR 运算`a`并`b`检查结果是否不等于 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:31:19.990

是的，使用这个：

```
if (a ^ b) { } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T10:54:40.257

'!=' 测试的按位版本可能类似于：

```
if((a - b) | (b - a)) {
    /* code... */
} 
```

对这两个减法进行 OR 运算。如果两个数字相同，则结果将为 0。但是，如果它们不同（也就是 '!=' 运算符），则结果将为 1。

**注意：**上面的代码片段只适用于整数（这些整数可能应该是无符号的）。

但是，如果您想模拟“==”运算符，请查看 Fabian Giesen 在[用位运算符替换“==”中的回答](https://stackoverflow.com/questions/4161656/replacing-with-bitwise-operators)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-27T01:06:01.440

`x ^ y`并不总是足够的。使用`!!(x ^ y)`. 期望一位返回值的值将不起作用，`x ^ y`因为它留下的余数可能大于 1。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-21T23:39:15.253

"~" 等于 NOT 所以应该可以工作。例如“a & ~b”。

# wordpress - 如何 URL 重写从 wordpress 移动的网站？

> ID：12539374
> 
> 赞同：0
> 
> 时间：2012-09-21T23:27:27.833
> 
> 标签：wordpress, mod-rewrite, rewrite

我将我的网站从 wordpress 转移到另一个平台。我试图重写旧的网址但没有成功。

以前我的 url 结构类似于下面的示例......

*   domain.com/category/post-name.html
*   domain.com/category/page-name

*   domain.com/category/post-2010-name.html

*   domain.com/2011/02/16/post-name.html

*   domain.com/2011/02/16/page-name

正如您在上面看到的，有时邮递名有一个数字。此外，页面和帖子都列出了日期。

新的 url 结构是...

*   domain.com/brand-new-section/blog/

**这么旧的网址...**
domain.com/mobile-phones/new-iphone-5-maps-issue.html

**应该映射到...**
domain.com/brand-new-section/blog/mobile-phones/new-iphone-5-maps-issue

所以，我为日期做了 url 重写......

> RewriteRule ^/[0-9]+/[0-9]+/[0-9]+/(.*)?$ domain.com/brand-new-section/blog/$1 [R=301,NC,大号]

有什么建议么？

如何将上述 url 重写与其他重写规则相结合，例如...
domain.com/category/post-name.html
domain.com/category/post-2010-name.html

试过...

> RewriteRule ^/[0-9]+/[0-9]+/[0-9]+/(.*)?$ [http://www.domain.com/brand-new-section/blog/](http://www.domain.com/brand-new-section/blog/) $1[ [R]
> 
> RewriteCond %{REQUEST_URI} ^/[a-zA-z]+/[a-zA-z]+/(.*)?\.html$
> 
> RewriteRule ^/[a-zA-z]+/[a-zA-z]+/(.*)?\.html$ [http://www.domain.com/brand-new-section/blog/](http://www.domain.com/brand-new-section/blog/) $1 [ R=301,NC,L]

没有成功。

谢谢你。

# php - SaaS 应用程序 - 运行缓慢的查询

> ID：12539379
> 
> 赞同：0
> 
> 时间：2012-09-21T23:28:06.837
> 
> 标签：php, mysql, linux, performance, apache

我有一个在 LAMP 堆栈上运行的 SaaS 应用程序。总的来说，一切都运行得很好。

大多数表都有一个 entity_id 字段，用于唯一标识我们的每个客户。我们发现，随着表为该实体获取越来越多的记录，事情开始变慢。例如，如果实体的记录少于 100 条，“notes”表返回记录的速度非常快，但一旦达到几千条，事情就会开始变得明显变慢。

一般来说，事情在架构上非常合理，查询已经过分析，等等。

我们应该考虑做哪些事情来提高性能？我们在软件架构层有什么可以做的吗，或者我们应该在这个问题上投入更多的硬件吗？

# c# - 如何记住登录表单的用户名或密码

> ID：12539382
> 
> 赞同：6
> 
> 时间：2012-09-21T23:29:08.780
> 
> 标签：c#, .net, authentication, remember-me

我在 C# Windows Form Application 中创建了一个示例登录表单，我想要将记住用户名或密码功能添加到我的登录表单中。

我只需要提供我的用户名，因为它会记住我的密码并自动填写密码字段（例如，在 gmail auth 中）。

我怎么能做到这一点？

这是我的登录表单应用程序：- [http://i50.tinypic.com/2pzxjb7.jpg](http://i50.tinypic.com/2pzxjb7.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-07-27T14:59:48.603

我用那个解决了。

在您的 winforms 项目中，右键单击并转到属性，选择设置并添加名称以存储数据（例如 userName 和 passUser）

所以在你的登录表单中添加一个复选框记住我。

在你的按钮登录检查复选框是否为真，保存用户并通过

```
 if (checkRemember.Checked)
        {
            Properties.Settings.Default.userName = textBoxUserName.Text;
            Properties.Settings.Default.passUser = textBoxUserPass.Text;
            Properties.Settings.Default.Save();
        } 
```

在您加载登录表单中添加此

```
 if (Properties.Settings.Default.userName != string.Empty)
        {
            textBoxUserName.Text = Properties.Settings.Default.userName;
            textBoxUserPass.Text = Properties.Settings.Default.passUser;
        } 
```

问候。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T23:36:16.717

我会使用[.Net 的内置设置 API](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)。

您可以定义多个具有可自定义范围的强类型设置；用户或应用程序。在 Visual Studio 中有一个接口。如果打开项目属性，则可以选择设置选项卡。如果您的项目中没有设置文件，您可以单击此处的链接让 Visual Studio 创建一个。拥有一个后，您可以输入应用程序设置的名称、类型、范围和默认值。

设置完所有这些后，您将`Settings`在命名空间下调用一个类`<ProjectName>.Properties`。然后，您可以使用`Settings.Default`静态属性访问默认设置、更改它们的值并调用`Save`方法来持久化它们。

当您启动应用程序时，会加载持久设置，您可以以编程方式将它们输入到您的用户界面中。

如果所有这些对于您的场景来说都是多余的，您可以手动读取/写入相对于用户配置文件文件夹的已定义位置中的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-02T07:13:24.907

您可以尝试使用cookie base记住密码

检查以下参考：

[https://www.aspforums.net/Threads/130530/Save-Username-and-Password-in-Cookies-using-C-in-ASPNet/](https://www.aspforums.net/Threads/130530/Save-Username-and-Password-in-Cookies-using-C-in-ASPNet/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T23:39:24.810

您可以将其存储在注册表、数据库或应用程序设置中。但我不确定你想要多安全。

[http://msdn.microsoft.com/en-us/library/ms973902.aspx](http://msdn.microsoft.com/en-us/library/ms973902.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-10-03T11:31:17.950

```
if (checkRemember.Checked)
{
    Properties.Settings.Default.userName = textBoxUserName.Text;
    Properties.Settings.Default.passUser = textBoxUserPass.Text;
    Properties.Settings.Default.Save();
}

if (Properties.Settings.Default.userName != string.Empty)
{
   textBoxUserName.Text = Properties.Settings.Default.userName;
   textBoxUserPass.Text = Properties.Settings.Default.passUser;
} 
```

# c - 从字符串中删除字符 - C

> ID：12539384
> 
> 赞同：-2
> 
> 时间：2012-09-21T23:29:40.777
> 
> 标签：c

假设我有一个`char* word = "abaradasaddragfavvdavgasbga00rarcrawabr0ac0ra0ra0vra0"` 并且我想`'0' chars`从`word`, 中删除所有的，而不使用额外的内存或`memmove`. 我怎么能做到？所以输出将是：`"abaradasaddragfavvdavgasbgararcrawabracraravra"` **我尝试过的**：

```
void removeZeros( char* word) {

   int size = strlen( word );
   int i;
   for( i = 0; i < size; i++ ){
         if( word[i] == '0' ){
             word[ i ]  = word[ i + 1 ];
             i++;
         }
   }
} 
```

***规则 **:

*   应该就地完成
*   不应调用任何内置函数，如`memmove`or`remove`
*   不应该使用额外的内存
*   不应将其分配给另一个变量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T23:35:46.153

```
#include <algorithm>
#include <iostream>
using namespace std;

int main()
{
    char word[] = "abaradasaddragfavvdavgasbga00rarcrawabr0ac0ra0ra0vra0";

    int size = strlen( word ) + 1;

    std::remove(word, (sizeof(char) * size) + word, '0');
    std::cout << word;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T23:33:10.830

从头到尾遍历字符串。例如，对于您找到的每个 0，增加一个称为偏移量的整数。对于每个非 0 字符，将其向下移动当前的 offset 值。确保在末尾放置一个空字节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T23:47:30.097

```
// this assumes your variable word is really a cstr and is NULL terminated
// also, it assumes that it's not in read only memory space like your small
// example shows but is actually in-place writeable
char* write_position = word;
char* scan_position = word;
for( ; *scan_position != '\0'; scan_position++ ) {
  if( *scan_position == '0' ) continue;
  *(write_position++) = *scan_position;
}
*write_position = '\0'; 
```

# ios - iOS 版 PhoneGap 应用程序中 EXC_BAD_ACCESS 异常的潜在原因？

> ID：12539389
> 
> 赞同：1
> 
> 时间：2012-09-21T23:30:34.490
> 
> 标签：ios, xcode, cordova, xcode4

我们使用 PG 2.0 来包装一个使用 jQuery 1.8.2 构建的移动应用程序。我们使用的是 Xcode 4.4 和 iOS 5.1.1。

我们经常会遇到如下异常：**Thread 1: EXC_BAD_ACCESS (code=1, address=0x130)**。堆栈跟踪如下。这是 Zombies 的输出：***** -[UIWebOverflowScrollView _viewDelegate]: message sent to deallocated instance 0xf4e0330**

我们不知道是什么原因造成的，因为我们完全用 HTML 和 JavaScript 编写代码，依靠 PG 与硬件交互。

有什么线索吗？这是否发生在其他 PG 用户身上？

谢谢！

==============

```
libobjc.A.dylib`objc_msgSend:

0x353a3f68:  teq.w  r0, #0

0x353a3f6c:  beq    0x353a3faa                ; objc_msgSend + 66

0x353a3f6e:  push.w {r3, r4}

0x353a3f72:  ldr    r4, [r0]

0x353a3f74:  lsr.w  r9, r1, #2

0x353a3f78:  ldr    r3, [r4, #8]

0x353a3f7a:  add.w  r3, r3, #8

0x353a3f7e:  ldr    r12, [r3, #-8]

0x353a3f82:  and.w  r9, r9, r12

0x353a3f86:  ldr.w  r4, [r3, r9, lsl #2]

0x353a3f8a:  teq.w  r4, #0

0x353a3f8e:  add.w  r9, r9, #1

0x353a3f92:  beq    0x353a3fa6                ; objc_msgSend + 62

0x353a3f94:  ldr.w  r12, [r4]

0x353a3f98:  teq.w  r1, r12

0x353a3f9c:  bne    0x353a3f7e                ; objc_msgSend + 22

0x353a3f9e:  ldr.w  r12, [r4, #8]

0x353a3fa2:  pop    {r3, r4}

0x353a3fa4:  bx     r12

0x353a3fa6:  pop    {r3, r4}

0x353a3fa8:  b      0x353a3fb0                ; objc_msgSend_uncached

0x353a3faa:  mov.w  r1, #0

0x353a3fae:  bx     lr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:21:41.633

我们删除了 CSS 中对 -webkit-overflow-scrolling 的引用，这个 bug 就消失了。啊，苹果！

# sql - SQL - 实时更改时为分页数据维护排序顺序

> ID：12539396
> 
> 赞同：1
> 
> 时间：2012-09-21T23:31:14.920
> 
> 标签：sql, pagination, real-time

我正在实现一个以分页格式显示数据的 php 页面。我的问题是这些数据是实时变化的，所以当用户请求下一页时，我提交最后一个 id 并执行查询，以便通过一个值实时变化的列从最后一个 id 顺序检索更多 10 行。例如我有 20 行：

```
Id 1    col_real_time 5
Id 2    col_real_time 3 
Id 3    col_real_time 11 
```

ETC

我得到按`col_real_time`升序排序的数据，所以结果是

```
id 2, id 1, id 3 
```

`col_real_time`现在，在用户发送下一页请求之前，实时 id 2 更改为29，用户现在发送下一个结果的请求，因为 id 2 现在是 29，所以他已经看到了。

我能怎么做？

现在实时 id 2 更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:53:24.633

如果您只有几页，您可以：

1.  将其保存到会话并对其进行分页，而不是返回到数据库服务器。

2.  将其保存到 JSON 对象列表并使用 Jquery 读取并翻页。

3.  将其保存到指示生成时间戳、user_id 和 session_id 的临时表中，并对其进行分页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T23:44:38.677

如果您不希望数据对用户显示更改，则基本上必须对数据进行快照。这不是您可以在 SQL 中非常有效地完成的事情，因此我建议将整个结果集下载到可以跨页面持久保存的 PHP 会话变量中。这样，您就可以按需获取行。有 Javascript 小部件可以有效地做同样的事情，但会将整个结果集发送到客户端，如果您有大量数据，这是一个坏主意。

这不像纯 SQL 分页那样容易，因为当不再需要存储的 var 时，您必须负责清理它。否则，你会很快耗尽内存。

# facebook - FB.API“未定义”：news.reads 活动

> ID：12539404
> 
> 赞同：1
> 
> 时间：2012-09-21T23:32:04.643
> 
> 标签：facebook, facebook-opengraph

我正在尝试实现 Facebook news.reads 应用程序 - 我只是错过了最后一步 - 执行 POST 到 FB。当我查看 Firebug 控制台时，似乎 POST 实际上正在工作……或者至少没有错误。查看下面的输出：

邮政：

* * *

```
__a 1
__user  myID
app APPID
fb_dtsg AQBi1J4k
href    http://www.around-around.com/today-show/
phstamp 1658166105497452107119
ref 
Source
fb_dtsg=AQBi1J4k&href=http%3A%2F%2Fwww.around-around.com%2Ftoday-show%2F&app=183125741799131&ref=&__user=63802158&__a=1&phstamp=1658166105497452107119 
```

（我已经验证了来自 URL 的元数据是正确的）。

* * *

但我从 FB 得到的回应很奇怪：

* * *

对于 (;;);{"__ar":1,"payload":null}

* * *

不知道该怎么办。推荐人似乎也是推荐栏（我正在使用）：

[https://www.facebook.com/plugins/recommendations_bar.php?action=like&api_key=APPID&channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D11%23cb%3Df274495fd8bd4fc% 26origin%3Dhttp%253A%252F%252Fwww.around-around.com%252Ff2b573e1404fec4%26domain%3Dwww.around-around.com%26relation%3Dparent.parent&href=http%3A%2F%2Fwww.around-around.com%2Ftoday- show%2F&locale=en_US&num_recommendations=2&read_time=30&sdk=joey&side=right&site=around-around.com&trigger=onvisible](https://www.facebook.com/plugins/recommendations_bar.php?action=like&api_key=APPID&channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D11%23cb%3Df274495fd8bd4fc%26origin%3Dhttp%253A%252F%252Fwww.around-around.com%252Ff2b573e1404fec4%26domain%3Dwww.around-around.com%26relation%3Dparent.parent&href=http%3A%2F%2Fwww.around-around.com%2Ftoday-show%2F&locale=en_US&num_recommendations=2&read_time=30&sdk=joey&side=right&site=around-around.com&trigger=onvisible)

因此，我还使用此代码尝试自动强制执行 POST news.reads 操作。

```
<script type="text/javascript">
  function readArticle()
  {
      FB.api(
        '/me/news.reads',
        'post',
        { article: '<?php the_permalink(); ?>' },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Article read was successful! Action ID: ' + response.id);
           }
        });
  }
  </script> 
```

（您不会在网站上看到此代码，因为它现在只针对管理员触发）

我没有收到任何警报，所以有些东西导致它失火......但使用推荐栏对我们来说更可取。

无论如何，任何帮助将不胜感激。

卢克

# php - 为长期任务生成一个单独的 PHP 进程

> ID：12539415
> 
> 赞同：0
> 
> 时间：2012-09-21T23:33:52.303
> 
> 标签：php

我有一个 AJAX 脚本，它需要大约 10 分钟才能完成。我希望能够告诉用户“嘿，听着，任务正在完成，我们会让你知道结果如何”，但它不会让用户在服务器上运行任何其他脚本，直到那个完成（我相信这是 PHP 是单线程的结果，但我不确定）。有没有办法将该 AJAX 脚本分配给单独的 PHP 或 Apache 进程，以便用户可以继续在应用程序中单击，而无需等待任务完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:39:46.867

您可以使用数据库或文件插入一些锁定机制，以防止任务同时运行多次。然后你只需要使用命令生成 PHP 进程`nohup`（不要挂断），有关更多详细信息，请查看这篇文章：[https ://nsaunders.wordpress.com/2007/01/12/running-a-background-process-in- php/](https://nsaunders.wordpress.com/2007/01/12/running-a-background-process-in-php/)或这个问题：[nohup: run PHP process in background](https://stackoverflow.com/questions/5288584/nohup-run-php-process-in-background)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T15:22:48.250

我至少花了几个小时，使用**Cron Jobs**解决方案对我来说非常容易。在**cPanel**中，您可以转到 Advanced -> Cron Jobs，然后在命令行中使用 PHP 脚本安排任务。

执行脚本 php 的命令示例：

```
/usr/bin/wget http://www.example.com/miscript.php 
```

或更好：

```
php /home/USER/public_html/miscript.php 
```

# java - 创建一个输出目录的 Java 程序

> ID：12539416
> 
> 赞同：1
> 
> 时间：2012-09-21T23:34:04.403
> 
> 标签：java, loops

> **可能重复：**
> [需要帮助创建一个从书中打印目录的 java 程序](https://stackoverflow.com/questions/12455148/need-help-creating-a-java-program-that-prints-a-table-of-contents-from-a-book)

我应该创建一个输出目录的程序。让我给你们介绍一下我的任务背景。用户应该循环输入章节标题和起始页码，直到用户为章节标题输入 4 个星号。用户输入 4 个星号后，我应该打印输出，例如

亚瑟王宫......................................3

圆桌骑士团............ 8

幽默家迪纳丹爵士..................................12

我认为我的大部分编码都是正确的。在我的测试程序中，我创建了一个 while 循环，允许用户输入章节标题和起始页码。当用户为章节标题输入 4 个星号时，此循环将终止。但是，我被卡住的地方是在我的 while 循环之后，在用户输入星号后生成输出。我没有显示目录，而是得到一个输出。我尝试了一个 for 循环来打印出标题、点和页码，但它只显示星号。我认为循环是错误的。

到目前为止，这是我的代码：

```
// My Table of Contents class
public class TocEntry
{

public TocEntry(String title, int page) // 2 Argument Constructor
{
           chapterTitle = title;
           startPage = page;
}

public String toString() // toString method to print out chapter title,
                         // given dots, and start page
{
    String temp = "" + startPage;
    int numDots = 60 - (temp.length()+ chapterTitle.length());

    String toc_out = chapterTitle;
    for(int i = 0; i < numDots; i++)
       toc_out=toc_out +".";
       toc_out= toc_out + startPage;
    return toc_out;
}

private String chapterTitle; 
private int startPage;

    }// End of class TocEntry

// My Test program
import java.util.Scanner;
public class useToEntry {

public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);

    final int TOCSIZE = 100;// Max size of TOC
    TocEntry toc[] = new TocEntry[TOCSIZE];
    int toc_curlen = 0;// The toc_curlen is intended to keep track of the number 
                       // of chapters entered by the user

    System.out.print("Enter chapter title: ");
    String chapterTitle = input.next();

    while(!"****".equals(chapterTitle))
    {
       System.out.print("Enter starting page number: ");
       int page = input.nextInt();

       System.out.print("Enter chapter title: ");
       chapterTitle= input.next();

       toc [toc_curlen] = new TocEntry(chapterTitle,page);
       toc_curlen = toc_curlen++;

    }// End of while loop

       for (int line = 0; line < toc_curlen; line++)
       {
         System.out.println(chapterTitle.toString());
       }// End of for loop
  }// End of main method

}// End of class useToEntry 
```

谁能帮我纠正我的循环以生成我的输出。我愿意接受建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:03:58.553

一些建议：

线

```
toc_curlen = toc_curlen++; 
```

将导致`toc_curlen`永远不会增加。您可以单独使用增量运算符：

```
toc_curlen++; 
```

第一次使用

```
String chapterTitle = input.next(); 
```

你永远不会将它分配给你的`TocEntry`数组`toc`，所以这一章永远不会显示。

您`chapterTitle`在显示循环中重复打印变量 - 您应该在`TocEntry`此处打印：

```
for (int line = 0; line < toc_curlen; line++) {
   System.out.println(toc[line].toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T00:03:29.940

我稍微修改了你的代码。首先，当您想将大量字符串放在一起时，请考虑使用 StringBuilder 而不是 + 运算符。字符串是不可变的，因此每次使用 + 运算符时，都会创建一个新的字符串，并且连接的两个字符串会进入垃圾箱：

```
public String toString()
{
    String temp = Integer.toString(startPage);
    int numDots = 60 - (temp.length() + chapterTitle.length());

    StringBuilder sb = new StringBuilder();
    sb.append(chapterTitle);
    for (int i = 0; i < numDots; i++)
        sb.append('.');

    sb.append(startPage);
    return sb.toString();
} 
```

但问题是，您没有遍历数组，只打印了当前章节标题：

```
for (int line = 0; line < toc_curlen; line++)
{
    System.out.println(chapterTitle.toString());
} 
```

这是 main() 函数的“更好”版本：

```
public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);
    //its much easier to work with lists
    List<TocEntry> list = new ArrayList<TocEntry>();
    String chapterTitle = "";

    //sorry for the while(true), but it looks easier doing everything 
    //inside the loop instead ofdoing half the job outside, half inside of it.
    while (true)
    {
        System.out.print("Enter chapter title: ");
        chapterTitle = input.next();
        if("****".equals(chapterTitle)) break;

        System.out.print("Enter starting page number: ");
        int page = input.nextInt();

        list.add(new TocEntry(chapterTitle, page));
    }

    for (TocEntry entry : list)
        System.out.println(entry);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T00:03:18.823

这看起来很像家庭作业......嗯，首先`toc_curlen = toc_curlen++;`应该将这行缩短为`toc_curlen++;`（想想为什么）。

您真正的问题在于您用于打印的 for 循环。看看你在打印什么，你会发现它。

# ios - 在iOS6中切换tabBarItems数组时，为什么会出现黑屏？

> ID：12539418
> 
> 赞同：2
> 
> 时间：2012-09-21T23:34:42.267
> 
> 标签：ios, uitabbarcontroller, ios6, uiwindow

我的应用在 4.3 和 5.1 中运行良好。我所做的是将登录视图作为 UITabBarController 中的单个视图，当用户登录时，我的应用程序将 tabBarItems 更改为一组不同的 viewControllers（许多选项卡）。它在 iOS5 中运行得非常完美，但现在，它在 iOS6 中完全崩溃了——我该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:34:42.267

我花了几个小时和几个小时，终于找到了问题。似乎只是切换 tabBar 数组不会导致 viewController 经历与它们通常所做的相同的初始化。解决方案是首先将 rootViewController 设为 nil，然后再次设置它。一旦我这样做了，一切都完美无缺：

```
tabBarController.viewControllers = vcs; // my array, either a login view or the real array
tabBarController.customizableViewControllers = nil;
tabBarController.selectedIndex = 0;
window.rootViewController = nil; // THIS WAS THE MAGIC LINE - nil then set again
window.rootViewController = tabBarController;
[window makeKeyAndVisible]; 
```

我真的希望这可以节省其他人我刚刚经历的拉头发的时间！

# matlab - 在 matlab 网格图中，某些面没有被照亮

> ID：12539423
> 
> 赞同：0
> 
> 时间：2012-09-21T23:35:04.937
> 
> 标签：matlab, lighting

我使用此命令绘制网格

```
trimesh(F, X, Y, Z,...
'EdgeColor','k','FaceColor','flat','FaceVertexCData',c, ...
'CDataMapping','scaled','FaceLighting','flat','BackFaceLighting','lit');
camlight; 
```

当我这样做时，大多数面孔都按预期点亮，但有些似乎没有点亮；即，当我将视图旋转到其他角度并更改灯光位置（因为它取决于相机）时，我仍然看不到它们被点亮。

在我看来，这似乎是法线的一个经典问题（即我的法线方向相反），尽管我认为在调用`trimesh`参数`'BackFaceLighting','lit'`时要注意这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:43:39.013

尝试`opengl`使用以下命令将渲染器设置为：

```
set(gcf,'Renderer','opengl'); 
```

它通常比标准渲染器更好地处理 3D。

# python - sorl.thumbnail 不起作用？

> ID：12539427
> 
> 赞同：0
> 
> 时间：2012-09-21T23:36:07.753
> 
> 标签：python, django, sorl-thumbnail

我通过 pip 并通过 GitHub 手动安装了 sorl.thumbnail 但它不起作用，我已添加`'sorl.thumbnail',`到 INSTALLED_APPS （我还尝试在它前面添加项目名称，它会产生一个名为 no module named 的错误）。

我已经卸载并重新安装了无数次，当我这样做时它会显示在 virtualenv 中，`lssitepackages`但它不会导入到 Django shell 中，也不会导入到代码中。我不知道该怎么做或如何解决这个问题。

```
Request Method: GET
Request URL:    http://127.0.0.1:8000/upload/
Django Version: 1.4.1
Exception Type: ImportError
Exception Value:    
No module named sorl.thumbnails 
```

我也在使用 Django Multiuploader (https://github.com/garmoncheg/django_multiuploader) 如果这有所作为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:44:00.310

似乎您正在导入`sorl.thumbnails`而不是`sorl.thumbnail`，这会给您带来错误。使用`sorl.thumbnail`应该可能会解决您的问题。

# python - 如何在python中使用输入字符串作为变量调用？

> ID：12539431
> 
> 赞同：0
> 
> 时间：2012-09-21T23:36:31.957
> 
> 标签：python, variables, python-3.x

我是初学者python学习者。我想知道是否可以在不使用任何模块的情况下创建一个基本的按摩加密系统。我希望我的程序检查和使用字符串中的变量名。

比方说，

```
a = 'l'
b = '5'
c = 'o'

x = input("Enter your massage: ")

print(x, 'THE_USER INPUT matching the variable name and values') 
```

我知道我可以用 while 或 if 来做到这一点，但这需要很长时间。另外，在匹配变量之前如何分隔每个字符串字母。

我正在使用 python 3。谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:44:18.380

我不知道这是否是你想要做的，但这里是：

```
a = 'l'
b = '5'
c = 'o'

x = input("Enter your message: ")
values = [globals().get(var, '') for var in list(x)]

print "".join(values) 
```

**例子**

```
Enter your message: abc
l5o 
```

更合适的方法可能是：

```
replacements = { 'a': 'l', 'b': '5', 'c': 'o' }

x = input("Enter your message: ")
print "".join([replacements.get(val, "") for val in x]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:50:11.663

使用 string.translate 这是一种更正确的方法来做你想做的事

```
from string import maketrans

in_tab  = "abcdefghijklmnopqrstuvwxyz "
out_tab = "5QR&*(=-;Wwz%$^#@!yY~:123xq"

t = maketrans(in_tab,out_tab)
print ("Hello World".translate(t)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T00:09:07.473

如果您的意思是用另一个字符替换给定字符的每次出现，请查看该[`str.translate`](http://docs.python.org/py3k/library/stdtypes.html?highlight=translate#str.translate)函数。

您可以按如下方式扩展示例代码：

```
import string

in = input("Enter your message: ")
mapping = string.maketrans('abc', '15o')
out = in.translate(mapping)
print(out) 
```

Every `a` is substituted by a `1`, every `b` by `5`, every `c` by `o`.

# dynamics-crm-4 - 您如何在 CRMService 中引用一对多关系？

> ID：12539439
> 
> 赞同：1
> 
> 时间：2012-09-21T23:38:34.900
> 
> 标签：dynamics-crm-4

我有一个在 Dynamics 中定义的具有一对多关系（参考，非父母）的自定义实体。我正在使用 CRM 服务。我已经发布了我的更改并更新了我的项目中的 web 服务参考。

如何在我的代码中访问这种关系？您如何使用 CRMService 代码来引用关系？

我找到了一些多对多的代码并且理解这很困难，但是一对多呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:03:55.267

每个一对多关系都有两个重要的位：

1.  名称 - 这不经常使用，但例如联系人与代表该帐户的主要联系人的帐户有关系，其名称是“account_primary_contact”。
2.  许多实体（外键）上的一个字段，在主要联系人的情况下，这是“primarycontactid”。

使用一对多关系可以做三件主要的事情（注意，我在这里的示例中使用了后期绑定的实体，我将在我的片段中使用主要的联系关系）。

**1.创建两条记录之间的链接**

基本上，您只需使用要链接到的事物的 ID 填充外键。

```
//Create a contact
Guid contactId = service.Create(new DynamicEntity("contact"));

//Create a lookup which we will use to link the contact and account
Lookup lookup = new Lookup();
lookup.Value = contactId;
lookup.type = "contact";

//Create an account which is linked to the contact record
DynamicEntity account = new DynamicEntity("account");
account["name"] = "Test Account";
account["primarycontactid"] = lookup;
Guid accountId = service.Create(account); 
```

**2.找出这些关系链接了哪些记录**

所以这是创建一个使用 LinkEntities 的 QueryExpression 的例子：

```
LinkEntity link = new LinkEntity();
link.LinkFromEntityName = "contact";
link.LinkFromAttributeName = "contactid";
link.LinkToEntityName = "account";
link.LinkToAttributeName = "primarycontactid"; 
```

或者一个 ConditionExpression，它将相关记录过滤到与您的主记录链接的记录。

```
ConditionExpression condition = new ConditionExpression();
condition.AttributeName = "primarycontactid";
condition.Operator = ConditionOperator.Equal;
condition.Values = new string [] { contactId.ToString() }; 
```

[MSDN](http://msdn.microsoft.com/en-us/library/bb928438.aspx)上的完整示例。

**3\. 断开两条记录之间的联系**

所以这是通过将外键设置为空来实现的。

```
DynamicEntity account = new DynamicEntity("account");
account["primarycontactid"] = null;
service.Update(account); 
```

# servicestack - 与 ServiceStack.OrmLite 的多对多关系

> ID：12539440
> 
> 赞同：7
> 
> 时间：2012-09-21T23:38:36.700
> 
> 标签：servicestack, ormlite-servicestack

我一直在检查 ServiceStack 的文档，但我还没有找到一种方法来与 ServiceStack.OrmLite 建立多对多关系，它是否支持？是否有解决方法（不编写原始 sql）？

我想要这样的东西：

文章 <- ArticleToTag -> 标签

谢谢！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T00:00:05.023

如果这就是您的意思，它不会在幕后自动为您自动处理？但由于 OrmLite 只是 ADO.NET 接口的一个薄包装器，因此一切皆有可能。

在[OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)中，默认情况下，每个 POCO 都以**1:1**的比例映射到一张表。因此，如果您想要表格布局，您可以按照它在数据库中的外观创建它，例如

```
var article = new Article { ... };
var tag = new Tag { ... };
var articleTag = new ArticleTag { ArticleId = article.Id, TagId = tag.Id };

db.Insert(article, tag, articleTag); 
```

尽管您可能希望利用 OrmLite 中的内置 blob，其中任何复杂类型都只会被序列化并存储在单个文本字段中。因此，您可以执行以下操作：

```
var article = { new Article { Tags = { "A","B","C" } }; 
```

**Tags**只是一个， OrmLite`List<string>`会为您在数据库字段中透明地序列化它。

# facebook - 从另一个网站通过 http 帖子发送的 url 将照片上传到 facebook 相册

> ID：12539441
> 
> 赞同：-1
> 
> 时间：2012-09-21T23:39:02.497
> 
> 标签：facebook, facebook-graph-api

我在一个允许用户查看照片的网站上工作..我希望他们能够按下照片并将照片直接发送到他们的 facebook 帐户...到目前为止，我找到了允许用户从本地上传照片的文档mashine[操作方法：使用 Graph API 将照片上传到用户的个人资料](http://developers.facebook.com/blog/post/498/)。有没有办法修改此代码，以便从另一个网站的 http 帖子中接收 url？

```
 `$app_id = "YOUR_APP_ID";
   $app_secret = "YOUR_APP_SECRET";
   $post_login_url = "YOUR_POST-LOGIN_URL";
   $album_name = 'YOUR_ALBUM_NAME';
   $album_description = 'YOUR_ALBUM_DESCRIPTION';

   $code = $_REQUEST["code"];

   //Obtain the access_token with publish_stream permission 
   if(empty($code))
     {
       $dialog_url= "http://www.facebook.com/dialog/oauth?"
       . "client_id=" . $app_id 
       . "&redirect_uri=" . urlencode($post_login_url)
       . "&scope=publish_stream";
       echo("<script>top.location.href='" . $dialog_url . 
       "'</script>");
   } 
   else {
     $token_url= "https://graph.facebook.com/oauth/"
     . "access_token?"
     . "client_id=" .  $app_id 
     . "&redirect_uri=" . urlencode( $post_login_url)
     . "&client_secret=" . $app_secret
     . "&code=" . $code;
     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);
     $access_token = $params['access_token'];

     // Create a new album
     $graph_url = "https://graph.facebook.com/me/albums?"
     . "access_token=". $access_token;

     $postdata = http_build_query(
     array(
      'name' => $album_name,
      'message' => $album_description
        )
      );
     $opts = array('http' =>
     array(
      'method'=> 'POST',
      'header'=>
        'Content-type: application/x-www-form-urlencoded',
      'content' => $postdata
      )
     );
     $context  = stream_context_create($opts);
     $result = json_decode(file_get_contents($graph_url, false, 
       $context));

     // Get the new album ID
     $album_id = $result->id;

     //Show photo upload form and post to the Graph URL
     $graph_url = "https://graph.facebook.com/". $album_id
       . "/photos?access_token=" . $access_token;
     echo '<html><body>';
     echo '<form enctype="multipart/form-data" action="'
     .$graph_url. ' "method="POST">';
     echo 'Adding photo to album: ' . $album_name .'<br/><br/>';
     echo 'Please choose a photo: ';
     echo '<input name="source" type="file"><br/><br/>';
     echo 'Say something about this photo: ';
     echo '<input name="message" type="text"
        value=""><br/><br/>';
     echo '<input type="submit" value="Upload" /><br/>';
     echo '</form>';
     echo '</body></html>';
  }` 
```

**?>**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:12:33.723

[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)：

> 您还可以通过提供`url`带有照片 URL 的参数来发布照片。

That’s all you have to do – [post to `/PROFILE_ID/photos`](https://developers.facebook.com/docs/reference/api/user/#photos), and replace the `source` parameter with one called `url`, containing the address of the photo where it is publicly reachable via HTTP.

# android - 适用于 Android 的 Mono - OpenFileOutput - IllegalArgumentException

> ID：12539442
> 
> 赞同：2
> 
> 时间：2012-09-21T23:39:09.767
> 
> 标签：android, xamarin.android, streamwriter

我正在尝试调用**OpenFileOutput()**函数，但我从*StreamWriter*构造函数中获得了***IllegalArgumentException 。***该函数在常规类（不是*Activity*或*Service ）的方法**LogFile()*中调用，之后应由*Activity*使用。

 ***为了编译代码，我向该方法传递了一个额外的 Context 作为参数：

```
public void LogFile(string msg, Context _context)
{
   using (var f = new StreamWriter(
                  _context.OpenFileOutput(filename, FileCreationMode.Append | FileCreationMode.WorldReadable)
                ))
            {
               f.Write(msg);
            }
}// end LogFile(). 
```

这个上下文参数之前是从*Activity*传递给使用方法类的构造函数的方法：

```
LogClass flog = new LogClass(this.ApplicationContext); 
```

关于可能缺少什么的任何建议？***

# django - Django - UnreadablePostError 时不时？

> ID：12539447
> 
> 赞同：6
> 
> 时间：2012-09-21T23:39:30.760
> 
> 标签：django

我们有一个基于 Django 的 Web 应用程序，用于从 iOS 设备接收 POST 数据（推送通知令牌）。

总而言之，该应用程序似乎运行良好，我们每小时都会收到 1000-2000 个带有有效数据的 POST。但是，我偶尔会收到来自 Django 的错误日志，其中包含以下数据：

```
Traceback (most recent call last):

File "/opt/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
response = callback(request, *callback_args, **callback_kwargs)

File "/opt/local/lib/python2.7/site-packages/django/views/decorators/vary.py", line 19, in inner_func
response = func(*args, **kwargs)

File "/opt/local/lib/python2.7/site-packages/django_piston-0.2.3-py2.7.egg/piston/resource.py", line 160, in __call__
request.data = request.POST

File "/opt/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 180, in _get_post
self._load_post_and_files()

File "/opt/local/lib/python2.7/site-packages/django/http/__init__.py", line 372, in _load_post_and_files
self._post, self._files = QueryDict(self.body, encoding=self._encoding), MultiValueDict()

File "/opt/local/lib/python2.7/site-packages/django/http/__init__.py", line 328, in body
self._body = self.read()

File "/opt/local/lib/python2.7/site-packages/django/http/__init__.py", line 384, in read
return self._stream.read(*args, **kwargs)

File "/opt/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 98, in read
result = self.buffer + self._read_limited()

File "/opt/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 92, in _read_limited
result = self.stream.read(size)

UnreadablePostError: request data read error 
```

WSGIRequest 转储说`POST: <could not parse>`

我一直在尝试查找有关此错误的更多信息，并且我所看到的很多内容都表明此错误是由用户在帖子完成之前取消 POST 请求引起的。这是我应该关注的错误，还是应该只设置服务器以过滤掉这些错误消息？我会说我每天可能会收到 8 到 10 封关于此的自动电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-15T07:59:08.040

我不确定您是否还在等待答案，但基本上评论包含大部分信息。所以，只是为了结束这个问题......

这些错误意味着一个格式错误的请求到达了服务器。有人可能已经取消了他们的请求，或者它在途中被破坏了（例如互联网连接不良）等。

您无法直接解决这些错误。但是，您可以查看页面（如果它始终相同）并检查例如加载是否不会花费太长时间。您也可以尝试手动导致错误，以查看它何时发生以及原因。除非你找到相关的东西，否则我认为你不需要太担心。

# jquery-mobile - jquery mobile datepicker中消失的日期（很奇怪）

> ID：12539449
> 
> 赞同：1
> 
> 时间：2012-09-21T23:39:40.407
> 
> 标签：jquery-mobile, jquery-ui-datepicker

我不确定这是一个错误还是什么，但我在使用 jQuery mobile 的 datepicker 时遇到了一个非常奇怪的行为。

单击禁用日期时，启用日期会消失！怎么回事？

请查看我的 jsFiddle 以获得一个非常简单的示例：http: [//jsfiddle.net/X5qp8/](http://jsfiddle.net/X5qp8/)

我在 jquery 对移动黑客的建议之后对此进行建模：http: [//jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/](http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/)

我也将它渲染到一个 div 因为我需要一个持久的日历。也许这些事情只是不适合......

我还发现该错误位于他们的移动扩展程序的第 33 行，但尚不清楚他们试图在那里做什么：

```
$( ".ui-datepicker-calendar .ui-btn", dp ).each(function(){
            var el = $(this);
            // remove extra button markup - necessary for date value to be interpreted correctly
            el.html( el.find( ".ui-btn-text" ).text() ); 
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:12:53.693

第 33 行正在剥离额外的标记，以便 datepicker 插件可以解析插件各种事件的日期。我最近找到了一个对我有用的解决方案，但我无法在你的 jsFiddle 上运行。我已经注释掉了一些为移动样式所做的额外标记。看看我的 updateDatepicker 函数版本，希望它会有所帮助。

```
function updateDatepicker(){

     // $( ".ui-datepicker-header", dp ).addClass("ui-body-c ui-corner-top").removeClass("ui-corner-all");
     $( ".ui-datepicker-prev, .ui-datepicker-next", dp ).attr("href", "#");
     $( ".ui-datepicker-prev", dp ).buttonMarkup({iconpos: "notext", icon: "arrow-l", shadow: true, corners: true});
     $( ".ui-datepicker-next", dp ).buttonMarkup({iconpos: "notext", icon: "arrow-r", shadow: true, corners: true});
     // $( ".ui-datepicker-calendar th", dp ).addClass("ui-bar-c");
     // $( ".ui-datepicker-calendar td", dp ).addClass("ui-body-c");
     // $( ".ui-datepicker-calendar a", dp ).buttonMarkup({corners: false, shadow: false}); 
     $( ".ui-datepicker-calendar a.ui-state-active", dp ).addClass("ui-btn-active"); // selected date
     $( ".ui-datepicker-calendar a.ui-state-highlight", dp ).addClass("ui-btn-up-e"); // today"s date
     $( ".ui-datepicker-calendar .ui-btn", dp ).each(function(){
          var el = $(this);
          // remove extra button markup - necessary for date value to be interpreted correctly
         el.html( el.find( ".ui-btn-text" ).text() );
     });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:44:01.947

删除`<div id="datepicker"></div>`并替换 `$("#datepicker").datepicker({minDate : '9/20/2012'});`
为
`$("#date").datepicker({minDate : '9/20/2012'});`

它会起作用

# php - 更简单的基于角色的访问控制 (RBAC) 方法？

> ID：12539451
> 
> 赞同：1
> 
> 时间：2012-09-21T23:39:56.853
> 
> 标签：php, rbac

我很难掌握基于角色的访问控制 (RBAC) 背后的代码。我正在尝试在 Laravel 框架中使用“捆绑包”，但它似乎只会让事情变得更加复杂。

我的特定应用程序需要三个角色。第一个也是最基本的角色只是让用户能够登录我的应用程序，管理他们的帐户，并保存“收藏夹”和“交易”。我需要的第二个角色是允许店主能够登录并创建帐户和交易。第三个角色基本上是管理员角色，因此我可以在需要时进入并删除不需要的内容。

只是简单地将一个 int 字段添加到名为“角色”之类的用户表中会不会有任何预期的问题？如果用户的角色为 0，则他们具有基本权限，无法访问站点的管理员和所有者区域；1 表示用户具有所有者角色等。每次发出请求时，我都会简单地检查用户的角色。

这会是一个合理、安全的解决方案，还是我可能会在使用这种方法时遇到问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T07:48:48.677

在管理对应用程序功能的访问时，使用 RBAC 将为您提供更大的灵活性。可以为每个用户分配多个角色、任务和操作；每个角色可以包含多个任务，每个任务可以包含多个操作。

如果您的应用程序只需要 3 个角色，基本、所有者和管理员，我认为只需在您的用户表中添加一个指示符就可以了。但是，如果您需要授予某些用户对某些操作的访问权限，则您需要为每个要区分访问控制的操作设置一个新编号。因此，使用这种方法将难以根据功能分离权限。

另一种解决方案是使用 ACL，我相信它更容易实现，但可能更难管理。[您可以在此处](https://security.stackexchange.com/questions/346/what-is-the-difference-between-rbac-and-dac-acl)了解 ACL 和 RBAC 之间的区别。

# css - Foundation zurb nav 未显示在 Rails 中

> ID：12539455
> 
> 赞同：2
> 
> 时间：2012-09-21T23:40:27.790
> 
> 标签：css, ruby-on-rails, sass, zurb-foundation

这是我第一次在我的 Rails 项目中使用基础。过去我只使用 Bootstrap。

我按照这里描述的步骤[http://foundation.zurb.com/docs/gem-install.php#simple2](http://foundation.zurb.com/docs/gem-install.php#simple2)我无法创建一个简单的导航（[http://foundation.zurb.com/docs/navigation .php](http://foundation.zurb.com/docs/navigation.php)）。

它应用了一些样式，但不完全（例如，它不是黑色）。

我也遵循了自动和手动安装。有趣的是，有些风格是有效的。例如，将样式“按钮”应用于链接即可。

我尝试了很多东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:06:01.683

您提供的链接似乎已过时（http://foundation.zurb.com/docs/gem-install.php#simple2）

以下是更新后的说明：

[http://foundation.zurb.com/docs/rails.php](http://foundation.zurb.com/docs/rails.php)

# html - 使用 CSS 指定图像作为项目符号点

> ID：12539458
> 
> 赞同：-2
> 
> 时间：2012-09-21T23:40:46.503
> 
> 标签：html, css, styling

我在下面显示了我的代码。由于某种原因，它不起作用。

```
<div class="blocker">
    <h3>Favorite Websites</h3>
        <ul>
        <li>Nettuts.com</li>
        <li>Webdesignerdepot</li>
        <li>SixRevisions</li>
        <li>Smashing Magazine</li>
        <li>WebdesignerWall</li>
      </ul>

      </div>

  ul{
    list-style-image: url("img/icon.png"); }
  li{
    margin: 10px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:01:22.003

我修好了它。我变了

```
list-style-image: url("img/icon.png"); } 
```

至

```
list-style-image: url("/img/icon.png"); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:42:02.720

`li`试着把它放在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:46:32.500

你应该做的是去一个[在线精灵生成器](http://spritegen.website-performance.org/)他们会生成一个包含所有图像的图像，并且精灵所需的 CSS 也可以工作。然后，您可以在每个列表项上添加一个类，而不必加载多个图像。

# dart - 在 Dart 中，setter 方法的生成名称是什么？

> ID：12539459
> 
> 赞同：0
> 
> 时间：2012-09-21T23:40:46.833
> 
> 标签：dart, setter, dart-mirrors

如果我有一个定义了 setter 的类，我如何引用然后生成的方法作为来自该类实例的函数。规范表明它将是变量 + '=" 的 id （似乎很愚蠢），但这不会解析。

例如：

```
class Bar {

  set foo(int value) {
  //whatever
  }
}

typedef F(int value);

void main() {
  F f = new Bar().foo=; //Fails, but what should this be??
  f(5);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:25:33.630

设置器已命名`foo=`，但这不是您可以以您想要的方式引用的东西。即使查看 dart:mirrors MethodMirror（对象方法的镜像，包括 setter）也无法调用它。您可以轻松地将其重写为：

```
class Bar {

  set foo(int value) {
  //whatever
  }
}

typedef F(int value);

void main() {
  Bar b = new Bar();
  F f = (int value) => b.foo = value;
  f(5);
} 
```

# php - bitvalue 为 false 时的 PostgreSQL 错误

> ID：12539460
> 
> 赞同：1
> 
> 时间：2012-09-21T23:40:54.247
> 
> 标签：php, postgresql, pdo

我在使用 PDO 将位值保存到我的 PostgreSQL-DB 时遇到了一些麻烦。每当位（布尔）为假时，我都会收到此错误

```
Warning: PDOStatement::execute(): SQLSTATE[22026]: String data, length mismatch: 7 
ERROR: bit string length 0 does not match type bit(1) in /var/www/html/application/models/Database.php on line 75 
```

代码显示起来有点复杂，但这是 DB 类的内容。

```
UPDATE users SET name=:name,email=:email,address=:address,zip=:zip,joindate=:joindate,phone=:phone,password=:password,activationcode=:activationcode,birthdate=:birthdate,lastdigits=:lastdigits,driverlicense=:driverlicense,e_presentation=:e_presentation,e_showphone=:e_showphone,e_showaddress=:e_showaddress,e_radius=:e_radius,e_showinsearch=:e_showinsearch,w_presentation=:w_presentation,w_showphone=:w_showphone,w_showaddress=:w_showaddress,w_radius=:w_radius,w_showinsearch=:w_showinsearch WHERE id=:id 
```

以及绑定到参数的数据

```
Array ( [:name] => My Name [:email] => myemail@gmail.com [:address] => My Address [:zip] => 79133 [:joindate] => 2012-09-18 12:39:56.769584 [:phone] => 073 917 13 97 [:password] => c6d18ac44b378ff3cecf09d9ebec31ad301c4394d7e1sdfjksc81cd3fbf47777f8df0ac9f33d14da18d71b76fc9c3e1210cb2efcabf6ed66f779d [:activationcode] => [:birthdate] => 1993-08-05 [:lastdigits] => 5079 [:driverlicense] => 0 [:e_presentation] => Test [:e_showphone] => 1 [:e_showaddress] => 1 [:e_radius] => 10 [:e_showinsearch] => 1 [:w_presentation] => Test [:w_showphone] => 1 [:w_showaddress] => 1 [:w_radius] => 10 [:w_showinsearch] => 1 [:id] => 28 ) 1 
```

快速的谷歌搜索显示其他人也有同样的问题，但没有解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:50:05.823

也许你最好用[`boolean`](http://www.postgresql.org/docs/current/interactive/datatype-boolean.html)type 而不是`bit(1)`?

如果您确实需要将`boolean`值转换为`bit(1)`，则直接强制转换不起作用：

```
~~select FALSE::bit(1), TRUE::bit(1)~~
```

但这有效：

```
select FALSE::int::bit(1), TRUE::int::bit(1) 
```

先施法`integer`，再施法`bit`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:38:17.680

如果我们认为位是 1 或 0 的数字，那么`false`在 php 中就不是数字。
`<? echo false; ?>`打印一个空字符串，而不是数字`0`。
在 php 中的很多其他情况下，`0`和`false`会等价，但它们仍然不是一回事，而且从 PostgreSQL 的角度来看，一个空字符串作为一个位的值是不可接受的。

将位值传递给或类似时，php 代码应转换`false`为。使用`0``execute()`

```
$sth->bindParam(':param', $value, PDO::PARAM_INT); 
```

`$value`当is时也可以工作`false`，因为这会强制转换为`0`.

# android - ICS 更新后无法从 Eclipse 运行应用程序

> ID：12539461
> 
> 赞同：1
> 
> 时间：2012-09-21T23:40:54.670
> 
> 标签：android, eclipse

自从我的手机大约一个月前更新到 ICS（HTC Design on Sprint）以来，每当我尝试从 Eclipse 运行我的应用程序时，大约 80% 的时间都失败了。没有错误，只是没有运行。我在控制台中得到了这个：

```
[2012-09-21 17:29:59 - GetAClue] ------------------------------
[2012-09-21 17:29:59 - GetAClue] Android Launch!
[2012-09-21 17:29:59 - GetAClue] adb is running normally.
[2012-09-21 17:29:59 - GetAClue] Performing com.badbob.app.getaclue.MainActivity activity launch
[2012-09-21 17:30:01 - GetAClue] Uploading GetAClue.apk onto device 'HT1CHMB00902'
[2012-09-21 17:30:01 - GetAClue] Installing GetAClue.apk...
[2012-09-21 17:30:15 - GetAClue] Success!
[2012-09-21 17:30:15 - GetAClue] Starting activity com.badbob.app.getaclue.MainActivity on device HT1CHMB00902 
```

但它停在那里，并没有像它应该的那样给我其中之一：

```
[2012-09-21 17:26:28 - GetAClue] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.badbob.app.getaclue/.MainActivity } 
```

如果我继续尝试最终它将运行。我还注意到，当它发生故障时，我手机上的处理器会抖动一两分钟。无法判断是什么进程在颠簸它。

我有 2 个较旧的 Droid X，但我没有这个问题。我也有两台开发计算机，并且在 HTC 上都发生了这种情况，所以这似乎与我的手机或 ICS 有关。

还有其他人遇到这种情况吗？

# jquery - jquery背景div幻灯片？

> ID：12539462
> 
> 赞同：4
> 
> 时间：2012-09-21T23:41:07.363
> 
> 标签：jquery, css, slideshow

一段时间以来，我一直在四处寻找不同的帖子，但除了我即将从 jAndy 向您展示的这篇文章之外，没有什么真正有帮助的。

我基本上希望能够将幻灯片放在 div 的背景中。

到目前为止，我有以下代码，但是，正如你所看到的......它淡入，显示图片，淡出到白色，切换图片，然后淡入以显示新图片......我只是希望淡入淡出混合在一起，而不是一个淡出，另一个淡入。我知道这是相当开放的，但有人能指出我正确的方向吗？

```
 var images = [
       '/slideshow1.jpg',
       '/slideshow2.jpg',
       '/slideshow3.jpg'

   ];
   loop = 0;
   $home = $('#slideme');

   (function fader(){

            $home.fadeOut(1300, function(){
            $home.css('background', 'url(' + images[loop] + ') top center no-repeat');
            $home.fadeIn(1300, function(){
                 setTimeout(fader, 9000);
            });
        });

        if(loop < images.length -1) 
           loop++;
        else loop = 0;                
    })(); 
```

我真诚地感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:28:22.577

## *[jsBin 演示](http://jsbin.com/eposar/4/edit)*

您不能同时对 2 个背景图像进行 X 淡化处理，因为一个元素仅支持一个 BG 图像。至少不重叠背景图像。（如果我错了，请纠正我）
**相反**，您可以阅读您的 URL，创建真实图像，并将它们附加到所需的元素：

```
var images = [
   '/slideshow1.jpg',
   '/slideshow2.jpg',
   '/slideshow3.jpg'
]; 

var imagesN = images.length;
var $slideme = $('#slideme');

for(i=0;i<imagesN;i++){
  $('<img>',{ src : images[i] }).appendTo( $slideme );
} 
```

// 现在你的图像被附加了，不要忘记对它们进行 CSS 处理：`position:absolute;`以获得一个比另一个。

你可以使用我的 jQuery 插件来淡化循环你的图像。该插件允许您**在悬停时暂停**，也可以**单击图像前进**！

```
/* FadeMe 'FPS'
// jQuery plugin
// Author: Roko C. Buljan (2012)
// www.roxon.in */
(function($){
    $.fn.fademe = function(F,P,S){
        F=F||700;  //  Fade time (default)
        P=P||3000; //  Pause time (default)
        S=S-1||0;  //  Start from 1st image (default)
        var e=this.children(),T;
        function a(){ e.eq(S=++S%e.length).fadeTo(F,1).siblings(e).stop(1).fadeTo(F,0); }
        e.on('mouseenter mouseleave click',function(e){
            var m=e.type==='mouseenter'?clearTimeout(T):(e.type==='click'?a():aa());    
        }).eq(S).show().siblings(e).hide();
        function aa(){T=setTimeout(function(){a();aa();},F+P);}aa();
    };
})(jQuery);

$slideme.fademe(); // initiate plugin on your element 
```

通过记住“FPS”，例如：*“Frame-Per-Second”* :)，您可以轻松修改/覆盖插件默认值：

```
$slideme.fademe(1300, 9000, 1); 
```

这将导致 1300 毫秒的淡入淡出；9000 暂停；从“第一张”图像开始（默认）。要跳过一些默认值以访问属性，您可以执行以下操作：

```
$slideme.fademe(0, 0, 2); 
```

这将被翻译成：默认淡入淡出（700）；默认暂停 (3000) ; 但从第二张图片开始。

* * *

**如果您想使用背景图像，请**编辑：****

 **### *[jsBin 演示 2](http://jsbin.com/eposar/8/edit)***

# javascript - 使用 vBulletin 进行多个 slideUp 和 slideDown

> ID：12539463
> 
> 赞同：0
> 
> 时间：2012-09-21T23:41:24.897
> 
> 标签：javascript, jquery, slidedown, vbulletin, slideup

我试图让它与 vBulletin 一起使用：http: [//jsfiddle.net/amosrivera/AYWku/](http://jsfiddle.net/amosrivera/AYWku/)

它仅适用于线程的第一张海报以及回复该线程的其他所有人，它不适用于。如果他们去做一个线程并且是第一个海报，它就会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:53:17.240

您需要更新 html 以使用类而不是 id。我更新了你的例子。 [http://jsfiddle.net/AYWku/480/](http://jsfiddle.net/AYWku/480/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:05:02.143

这不是来自那个英国论坛的 tempus 制作的模组！

这是 vb.org 上的一个 mod，搜索 vb.org，你会找到答案！

# signals - 语音识别 - 一种 HMM 方法

> ID：12539469
> 
> 赞同：1
> 
> 时间：2012-09-21T23:42:09.270
> 
> 标签：signals, signal-processing, speech-recognition, hidden-markov-models

理论真的。

我将要开发一种语音算法，并且必须以某种方式构建一个 HMM（隐马尔可夫模型），现在我有了一个基本概念。它用于概率，这可以用于语音识别。好的，所以我从一个网站上找到了这句话：

“为词汇表中的每个单词构建一个 HMM，然后将音素字符串与每个 HMM 进行比较，以确定哪个模型最有可能匹配。”

现在我有点明白了，但是，我不明白的是..要实现 HMM，我是否需要获取词汇表中的每个单词（即在英语词典中）和它的频率，然后取电话？HMM 会为电话找到最准确的词吗？

我希望有人可以回答这个问题，

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T09:26:25.233

忽略 Daphne Koller 在 coursera 上的 PGM 课程，它并不能真正解决您的问题。有一篇很好的论文对 HMM 进行了全面介绍，并解释了如何处理语音识别问题。这篇论文被Lawrence R. Rabiner称为“ [A Tutorial on Hidden Markov Models and Selected Applications in Speech Recognition ”。](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.131.2084)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:50:47.783

我建议您在 Coursera.org @ [https://www.coursera.org/course/pgm上查看 Daphne Koller 博士的概率图形模型课程](https://www.coursera.org/course/pgm)

本课程涵盖隐马尔可夫模型和机器学习应用。

# php - 循环通过 $_POST

> ID：12539470
> 
> 赞同：2
> 
> 时间：2012-09-21T23:42:16.503
> 
> 标签：php, mysql, arrays, forms, loops

我有一个带有“章节”表的 MySQL 数据库。表“章节”具有三列：(1) id、(2) 名称、(3) 密码。

我正在使用 PHP 将“章节”中的数据动态输出到文本框中。结果如下所示：

```
<form name="current_chapters" method="post" action="UpdateChapters.php">    
<input type = 'text' name='id' value='{$row['id']}'>
<input type = 'text' name='name' value='{$row['name']}'>
<input type = 'password' name='password' value='New Password'>
<input type = 'submit'>
</form> 
```

请注意，此页面用于重置（不显示）密码，因此是“新密码”默认值。

我正在寻找循环遍历所有 $_POST 数据的最佳方法，然后更新该数据最初来自的原始“章节”表。

我尝试通过 foreach 循环 $_POST 并将输入名称更改为“id[]”、“name[]”和“password[]”，但这似乎不是最优雅的方法，尤其是使用 id 部分......你最终会得到像 id[0] = 133 这样的东西，这看起来很乱。

有关如何执行此操作的任何建议？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T00:07:37.020

您可以使用`$_POST`. 这简化了处理相同类型的多个字段：

```
<input name="book[12][name]" value="name of book 12">
<input name="book[12][password]" value="password for book12">
<input name="book[99][name]" value="name of book 99">
<input name="book[99][password]" value="password for book99"> 
```

这将创建`$_POST`如下数据结构：

```
[book] => Array
    (
        [12] => Array
            (
                [name] => name of book 12
                [password] => password for book 12
            )

        [99] => Array
            (
                [name] => name of book 99
                [password] => password for book 99
            )

    ) 
```

然后您可以按如下方式进行迭代：

```
foreach ($_POST['book'] as $book_id => $book) {
  // Watch out for SQL injection
  $sql = "UPDATE book SET name = '{$book['name']}', password = '{$book['password']}' WHERE id = $book_id";
} 
```

# python - 接受 numpy ndarray 或序列作为参数的 Python 函数

> ID：12539476
> 
> 赞同：2
> 
> 时间：2012-09-21T23:43:27.207
> 
> 标签：python, function, numpy, arguments

我已经看到一些 python 函数通常可以接收 (n,2) 形状的 numpy ndarray 作为参数，但也可以“自动”接收 (2,n) 甚至 len(2) 序列（元组或列表）。

它是如何以python方式实现的？是否有统一的良好实践来检查和处理这些情况（例如，numpy 和 scipy 模块中的函数），或者每个开发人员实现他认为最好的？

我只是想避免 ifs/elifs 的链（可能是嵌套的）链，以防万一有一种众所周知的更好的方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T23:47:42.043

您可以使用[numpy.asarray](http://docs.scipy.org/doc/numpy/reference/generated/numpy.asarray.html)函数将任何类似序列的输入转换为数组：

```
>>> import numpy
>>> numpy.asarray([1,2,3])
array([1, 2, 3])
>>> numpy.asarray(numpy.array([2,3]))
array([2, 3])
>>> numpy.asarray(1)
array(1)
>>> numpy.asarray((2,3))
array([2, 3])
>>> numpy.asarray({1:3,2:4})
array({1: 3, 2: 4}, dtype=object) 
```

重要的是要注意，正如文档所说*，如果输入已经是 ndarray ，则不会执行复制*。这真的很好，因为你可以传入一个现有的数组，它只返回相同的数组。

将其转换为 numpy 数组后，如果需要，只需检查长度即可。就像是：

```
>>> def f(x):
...    x = numpy.asarray(x)
...    if len(x) != 2:
...       raise Exception("invalid argument")
... 
>>> f([1,2])
>>> f([1,2,3])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in f
Exception: invalid argument 
```

**更新：** 既然你问了，这里有一个“魔法”函数，除了 *args 作为数组之外：

```
>>> def f(*args):
...    args = numpy.asarray(args[0]) if len(args) == 1 else numpy.asarray(args)
...    return args
... 
>>> f(7,3,5)
array([7, 3, 5])
>>> f([1,2,3])
array([1, 2, 3])
>>> f((2,3,4))
array([2, 3, 4])
>>> f(numpy.array([1,2,3]))
array([1, 2, 3]) 
```

# jquery - 如何阻止 jQuery 选项卡 CSS 被覆盖

> ID：12539484
> 
> 赞同：0
> 
> 时间：2012-09-21T23:44:21.173
> 
> 标签：jquery, css, tabs

我有一个 WordPress 插件，它是一个 jQuery 选项卡式界面，位于 WordPress 主题侧边栏中。在 90% 的网站上，插件按预期显示，但在 10% 的网站上，jQuery 选项卡导航选项卡 CSS 样式被其他插件或主题 CSS 文件弄乱并覆盖。

这是选项卡如何显示的片段：

```
<div id="aaw_tabs" style="width:250px !important">

    <ul class="aaw_tabnav">
        <li><a href="#aaw-tabs-popular">Popular</a></li>
        <li><a href="#aaw-tabs-recent">Recent</a></li>
        <li><a href="#aaw-tabs-comments">Comments</a></li>
        <li><a href="#aaw-tabs-tags">Tags</a></li>
    </ul>

    <div class="aaw_tabs_body">

        <div class="inside">

            <div id="aaw-tabs-popular">
                example tab content
                <div class="clear"></div>
            </div>

            <div id="aaw-tabs-recent">
                example tab content
                <div class="clear"></div>
            </div>

            <div id="aaw-tabs-comments">
                example tab content
                <div class="clear"></div>
            </div> 

            <div id="aaw-tabs-tags">
                example tab content
                <div class="clear"></div>
            </div>

        </div>
    </div>
</div> 
```

我用这个 jQuery 代码初始化 jQuery 选项卡：

```
(function($) {
    $(document).ready( function() {

        // Advanced Activity Widget Tabs
        $( "#aaw_tabs" ).tabs({ fx: { opacity: 'toggle', duration: 200 } });
    });
})(jQuery); 
```

这里是样式标签的CSS：

```
#aaw_tabs { padding:0 !important; margin:0 auto !important; border:none !important; background:none !important}

ul.aaw_tabnav { position:relative; margin:0 !important; padding:0 !important; list-style-type:none !important; width:100%; }
ul.aaw_tabnav li { display:inline; padding:0 !important; margin:0 !important; border:none !important; background:none !important;  }

ul.aaw_tabnav li a { text-decoration:none; text-transform:uppercase; color:#444; padding:5px; outline:none; font-size:0.8em; font-weight:bold; background:#DDD; border-bottom:none; border-top:1px solid #DDD; text-shadow:0 1px 0 #FFF; -moz-border-radius:5px 5px 0 0; -webkit-border-radius:5px 5px 0 0; border-radius:5px 5px 0 0; background:-moz-linear-gradient(top, #DDDDDD, #CCCCCC); background:-webkit-gradient(linear, left top, left bottom, color-stop(0, #DDDDDD), color-stop(1, #CCCCCC)); -ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorStr='#DDDDDD', EndColorStr='#CCCCCC')"; /* IE8 only */ filter:progid:DXImageTransform.Microsoft.gradient(startColorStr='#DDDDDD', EndColorStr='#CCCCCC'); /* IE6,IE7 only */}
ul.aaw_tabnav li a:hover { color:#FFF; background:#666; text-decoration:none; text-shadow:0 1px 0 #ccc; }
ul.aaw_tabnav li a:active, ul.aaw_tabnav li.ui-tabs-selected a { text-decoration:none; padding:5px; color:#666; text-shadow:0 1px 0 #FFF; border:1px solid #CCC; border-top-color:#DDD; border-bottom:none; top:1px; background:#EAEAEA; background:-moz-linear-gradient(top, #FFFFFF, #EAEAEA); background:-webkit-gradient(linear, left top, left bottom, color-stop(0, #FFFFFF), color-stop(1, #EAEAEA)); -ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorStr='#FFFFFF', EndColorStr='#EAEAEA')"; /* IE8 only */ filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#FFFFFF', EndColorStr='#EAEAEA'); /* IE6,IE7 only */}

.aaw_tabs_body { width:98% !important; padding:1%; background:#EAEAEA; border:1px solid #CCC; -moz-border-radius:0 5px 5px 5px; -webkit-border-radius:0 5px 5px 5px; border-radius:0 5px 5px 5px; }
.aaw_tab_single_box { float:left; width:96%; padding:2%; background:#FEFEFE url(../images/bg-box.png) repeat-x; border:1px solid #CCC; display:none; }

.aww_tabs_body .inside { margin:0 !important; padding:0 !important }
.aaw_tabs_body .inside ul { margin:0 !important; padding:0 !important}
.aaw_tabs_body .inside ul li { border-top:1px solid #e5e5e5 !important; float:left; display:inline; font-size:11px !important; color:#595959 !important; margin:0px 1px 0px 0px !important; padding:10px 0px 5px 5px !important; cursor:pointer; border-bottom:none; vertical-align:top !important; width:260px; }
.aaw_tabs_body .inside ul li a { display:block; float:left; padding:0px 7px 10px; color:#595959 !important; font:inherit 11px Arial, Helvetica, sans-serif !important; text-decoration:none !important }
.aaw_tabs_body .inside ul li a:hover { text-decoration:none !important; color:#0088CC !important }

.clear { clear:left;}
.ui-tabs-hide { display:none; } 
```

现在是什么问题。导航有四个选项卡。他们应该是这样的：

![工作标签导航](../Images/632d22173a5e6b82c0000747dea3eb42.png)

然而，在某些网站上，标签导航被搞砸了，标签导航被扭曲了，看起来像这样：

![扭曲的标签](../Images/90f188770929dc6dcec8a1716cf66257.png)

该站点来自欧洲站点，因此文本显示在右侧，这很好，但选项卡导航似乎跨越了整个宽度。

我确信这与选项卡的 CSS 样式有关，但我无法解决。

导航样式是 CSS 类 .aaw_tabs 。它们当前的样式为 display:inline。我试过浮动，显示：内联块。

任何帮助将不胜感激，因为我几个月来一直试图解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:08:17.940

您可以复制您认为会被覆盖的 css 选择器，然后更改选择器名称。然后在插件中添加一些 js 来检查加载的 css 文件中是否已经存在选择器 --> 然后您在第一步中复制的辅助选择器可以将 css 值添加到插件中。

或者更简单的解决方案，用非常奇怪的（只是不常见的名称）名称重命名选择器，这样它们就不会被重复，然后注释每个选择器在 css 文件中的作用。

# c - 在 MinGW 32 位上确定 C 中的 64 位文件大小

> ID：12539488
> 
> 赞同：3
> 
> 时间：2012-09-21T23:44:45.113
> 
> 标签：c, mingw, filesize

我要疯了，试图让它在 MinGW 32 位中工作。它适用于我尝试过的所有其他平台。

我要做的就是将 > 4GB 文件的大小转换为 64 位整数。

这在其他平台上运行良好：

```
#define _FILE_OFFSET_BITS   64
#include <sys/stat.h>

int64_t fsize(const char *filename) {
    struct stat st; 

    if (stat(filename, &st) == 0)
        return st.st_size;

    return -1; 
} 
```

根据我在网上找到的各种建议，我尝试在上述代码之前添加以下定义：

```
#define _LARGEFILE_SOURCE   1
#define _LARGEFILE64_SOURCE 1
#define __USE_LARGEFILE64   1 
```

也试过：

```
#ifdef __MINGW32__
#define off_t off64_t
#endif 
```

最后尝试将 -D_FILE_OFFSET_BITS=64 添加到 gcc 标志（应该与上面的定义相同......）

没运气。返回的 int64_t 仍被截断为 32 位值。

在 MinGW 32 位中确定 64 位文件大小的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:35:16.330

谢谢大家，很好的建议，但我想通了...... MinGW 需要这个定义来启用结构 __stat64 和函数 _stat64：

```
#if __MINGW32__
#define __MSVCRT_VERSION__ 0x0601
#endif 
```

然后这个工作：

```
int64_t fsize(const char *filename) {

#if __MINGW32__
    struct __stat64 st; 
    if (_stat64(filename, &st) == 0)
#else
    struct stat st; 
    if (stat(filename, &st) == 0)
#endif

        return st.st_size;

    return -1; 
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T00:04:53.730

我现在没有方便的 MinGW，但如果我没记错的话，有一个`_stat64`函数使用`struct __stat64`. 您可能想用一些狡猾的宏来隐藏这种丑陋！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:56:05.213

您可以尝试`lseek64`是否存在于 MinGW 包中

```
 #define _LARGEFILE64_SOURCE     /* See feature_test_macros(7) */
   #include <sys/types.h>
   #include <unistd.h>

   off64_t lseek64(int fd, off64_t offset, int whence); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-17T04:12:04.080

您可以调用 Windows API[`GetFileSizeEx`](https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-getfilesizeex)来获取打开句柄的文件大小，或[`GetFileAttributesEx`](https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-getfileattributesexw)获取文件名的 A/W。

有关工作示例，请参见[https://stackoverflow.com/a/8991228/1505939](https://stackoverflow.com/a/8991228/1505939)。

# java - 从 org.json JSONObject 到 org.codehaus.jackson

> ID：12539489
> 
> 赞同：11
> 
> 时间：2012-09-21T23:45:17.453
> 
> 标签：java, json, jackson

我想从`org.json`搬到`org.codehaus.jackson`。如何转换以下 Java 代码？

```
private JSONObject myJsonMessage(String message){
    JSONObject obj = new JSONObject();
    obj.put("message",message);
    return obj;
} 
```

为简单起见，我省略了该`try-catch`块。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T23:59:56.277

而不是`JSONObject`使用杰克逊的`ObjectMapper`and `ObjectNode`：

```
ObjectMapper mapper = new ObjectMapper();
ObjectNode node = mapper.createObjectNode();
node.put("message", "text"); 
```

这将是杰克逊的相当于您当前的`org.json`代码。

然而，Jackson 真正擅长的地方在于它能够在 Java 类 (POJO) 和它们的 JSON 表示之间进行复杂的映射，以及它的流 API，它允许你进行非常快速的序列化，至少与`org.json`'s 的对应物相比。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T00:13:05.877

Jackson api中没有`JSONObject`。除了返回 a 之外`JSONObject`，您还可以返回 Map 或带有 message 属性的 Java Bean，该属性具有 getter 和 setter。

```
public class MyMessage {
    private String message;

    public void setMessage(final String message) {
        this.message = message;
    }

    public String getMessage() {
        return this.message;
    }
} 
```

因此，您的方法将简化为：

```
private MyMessage(String message) {
    MyMessage myMessage = new MyMessage();
    myMessage.setMessage(message);
    return myMessage;
} 
```

此更改的另一个方面是更改序列化代码，将 MyMessage 转换回 json 字符串。Jackson 做 Java Beans，默认情况下映射，你不需要创建一个`JSONObject`eg，

```
private String serializeMessage(MyMessage message){

    //Note: you probably want to put it in a global converter and share the object mapper
    ObjectMapper mapper = new ObjectMapper();
    return mapper.writeValueAsString(message);
} 
```

以上将返回`{message: "some message"}`

为简洁起见，我跳过了例外情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T17:31:42.523

如果你想逐个升级`org.json`库`Jackson`，并且最初保留相同的 API，你可能需要阅读“[从 org.json 升级到 Jackson](http://www.cowtowncoder.com/blog/archives/2011/03/entry_447.html) ”。对于基本的 JSON 读写而言，这至少会使您的代码快 3 倍；另外，如果您愿意的话，您还可以开始转换处理，因为 Jackson 可以轻松地在 Trees 和 POJO（`ObjectMapper.treeToValue(...)`、`valueToTree`、`convertValue`POJO 之间等）之间进行转换。

请记住，您熟悉的工具可能会使您的思维偏向于某些模式，保持开放的心态可以帮助您找到更好的工具。对于 Jackson（或 GSON 或其他成熟的 Java JSON 工具），您确实应该考虑适当的数据绑定可以帮助的地方，而不是使用以 JSON 为中心的树模型（org.json 提供）。树模型让你的思维基于 JSON 结构，这有时很有用；但也可能会阻止您看到更自然的模式，这些模式来自定义 POJO 结构以反映预期的 JSON，并直接在 Java 对象上操作。

# php - 在 preg_replace 中自定义时间

> ID：12539490
> 
> 赞同：1
> 
> 时间：2012-09-21T23:45:38.957
> 
> 标签：php, time, preg-replace

我有一个表格，用户可以使用 bbcode 引用其他人。当有人按下报价按钮时，textarea 值为：

```
[quote user=User date=1348246887 post=301]
User post text
[/quote] 
```

现在，我转换为块的代码是：

```
$post = preg_replace("/\[quote user=(.*) date=(.*) post=(.*)](.*)\[\/quote\]/Uis", "<div class=\"quote\"><p>Quote by \\1 at time : \\2<a href=\"index.php?subject=".$_GET['subiect']."&post=\\3\">&nbsp;</a></p><span>\\4</span></div>", $post); 
```

如何将日期转换为 preg_replace ？在 preg_replace 我不能这样做，因为 \2 的值没有设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:10:39.123

尝试这样的事情（我在链接中添加了“测试”，所以你可以看到链接 - 不确定你想要什么，但不间断的空格不会使链接可见。）我用于`htmlentities`安全以防万一“subiect” $_GET 变量（也许你的意思是“主题”？）包含标记或引号。当然，您可以根据需要自定义 date() 字符串的第一个参数。最后，我添加`\s+`了允许更灵活的空白。我还将分隔符“/”更改为“@”，因此您无需在正则表达式中转义“/”。

更新了旧的 PHP 兼容性：

```
<?php

$post = <<<HERE
[quote user=User date=1348246887 post=301]
User post text
[/quote]
HERE;
// ]  (just adding this comment to fix SO syntax colorer)

function replacer ($matches) {
    return '<div class="quote"><p>Quote by '.$matches[1].' at time : '.
        date('Y m d', $matches[2]).'<a href="index.php?subject='.
        htmlentities($_GET['subiect'], ENT_COMPAT, 'UTF-8').
        '&post='.$matches[3].'">test&nbsp;</a></p><span>'.
        $matches[4].'</span></div>';
}

$post = preg_replace_callback(
    '@\[quote\s+user=(.*)\s+date=(.*)\s+post=(.*)](.*)\[/quote\]@Uis',
    'replacer',
    $post
);

var_dump($post);

?> 
```

# jquery - 通过 json 调用重定向到另一个页面

> ID：12539492
> 
> 赞同：0
> 
> 时间：2012-09-21T23:45:50.263
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, json

我在我的应用程序中使用[jquery 文件上传](https://github.com/blueimp/jQuery-File-Upload/wiki)实用程序。如果我通常在rails中有一些类似以下的代码......

```
if @course_module.save
  flash[:success] = "Class created!"
  redirect_to course_course_modules_path(@course)
else
  render 'new'
end 
```

如果我的表单中有错误，它将显示错误消息，如果保存成功，它将重定向到另一个页面。但是当页面是通过jquery插件提交的时候就不是这样了。原因是它需要返回一个 json 对象....类似于

```
 format.json {  
          render ':json => [@course_module.to_jq_upload].to_json ' 
        } 
```

我将如何代替返回 json，而是执行第一个代码片段？如果保存成功则通过重定向，或者如果不成功则显示错误消息？我试过类似下面的东西......

```
render 'new' 
```

但这没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:16:09.563

The normal ajax call has a success and error methods, just add to the json response a redirect_url key having the path you want to go to as the value and inside the success method redirect to this url.

```
$.ajax({
 type: "GET",
 url: '/path to your controller',
 datatype: 'json',
 success: function(data) {
   window.location.href = data.redirect_url
 };

}); 
```

and your json response should look like this inside the controller

```
render :json => {course_module: @course_module.to_jq_upload, redirect_url: course_course_modules_path(@course) }.to_json 
```

I hope that's what you are looking for

# c++ - gluPerspective 与 SFML：相同的编译，不同的结果。图形不显示

> ID：12539494
> 
> 赞同：0
> 
> 时间：2012-09-21T23:45:57.367
> 
> 标签：c++, opengl, sfml

我正在使用 SFML 库 (C++) 并复制粘贴了 Laurent Gomila 的示例 ( [http://www.sfml-dev.org/tutorials/1.6/window-opengl.php](http://www.sfml-dev.org/tutorials/1.6/window-opengl.php) ) 来测试 OpenGL。

它运作良好。但在某些时候，我会开始使用一些 gl 函数......当我改变这个的第一个参数时......：

```
gluPerspective(100.f, 1.f, 0.1f, 500.f); 
```

执行程序时我会注意到一些差异，但是第三次​​或第四次更改ThatParameter+compiled时，它停止显示图形。我回溯让它们再次显示，但......你猜怎么着？他们没有！与以前相同的代码，但仍然不是图形！

可能会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:06:27.257

最终，我的菜鸟让我的 RAM 陷入了麻烦，因为我正在堆叠内存分配而没有释放它们。

在正确删除内存分配后，它可以正常工作。

# excel - Excel VBA - 使用东部时区创建 Outlook 约会

> ID：12539495
> 
> 赞同：1
> 
> 时间：2012-09-21T23:46:00.707
> 
> 标签：excel, vba

我有一个创建 Outlook 约会的 Excel 宏。除了需要将时区设置为“东部”之外，我可以让一切正常工作。我的一些同事住在其他时区，我想确保为他们设置了正确的时间。这是我目前拥有的代码。如何将时区设置为东部（美国和加拿大）？

```
Set objOL = CreateObject("Outlook.Application")
        Set objItem = objOL.CreateItem(1)
        With objItem
            .StartTimeZone = "Eastern"
            .Start = Range("B4").Text & " " & Range("C4").Text
            .End = Range("B4").Text & " " & Range("D4").Text
            .Body = "Centra Link: " & Range("K4") & vbCrLf & vbCrLf & " Phone: " & Range("I4") & vbCrLf & vbCrLf & "Lead facilitator:  " & Range("E4") & vbCrLf & "Co-facilitator:  " & Range("F4") & vbCrLf & vbCrLf & Range("MISC_HEADER") & ":  " & Range("H4")

            .Location = Range("I4") & ", Leader Code: " & Range("J4")
            .alldayevent = False
            .Subject = Range("A4")
            .ReminderMinutesBeforeStart = 30
            .ReminderSet = True
            .Save
        End With
Set objItem = Nothing
Set objOL = Nothing
MsgBox "An appointment has been created for " & Range("A4") & " on " & Range("B4"), vbOKOnly, "Calendar Appointment" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:03:51.683

这并不容易，就像说

```
.StartTimeTone = "Eastern" 
```

看这里：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._appointmentitem.starttimezone.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._appointmentitem.starttimezone.aspx)

你看，你必须创建一个 TimeZone 对象，就像这里

[如何在 Outlook 2010 VBA 中修改定期约会的属性（时区）](https://stackoverflow.com/q/11785074/1370465)

看看悉达多溃败的回答。

# html - 用于 Twitter 小部件宽度的 HTML/CSS

> ID：12539496
> 
> 赞同：7
> 
> 时间：2012-09-21T23:46:12.530
> 
> 标签：html, css, widget, twitter

Twitter 提供给您粘贴到 html 中的代码如下所示：

```
<a class="twitter-timeline" href="https://twitter.com/username" data-widget-id="248169276782018560">Tweets by @username</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

它们允许您设置一个高度，我将其设置为 600。当放置在我的网站上时，我得到了这个（查看源代码时）：

```
<iframe id="twitter-widget-6" classname="twitter-timeline twitter-timeline-rendered" scrolling="no" frameborder="0" style="border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; " width="220" height="600"></iframe> 
```

220 的宽度让我很生气。我希望宽度是容器的全宽，即 100%（对于移动网站）。目前 220 宽度在页面的一半多一点，并显示一个丑陋的滚动条。

那么，为什么将宽度设置为 220，我怎样才能让它扩展到它的父宽度？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-04T07:44:23.107

我使用响应式主题，这个 css 代码工作正常。谢谢胡斯特。

```
#twitter-widget-0 { 
      width: 100% !important; 
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-26T19:16:22.810

Twitter 允许您通过 HTML 宽度和高度属性调整时间线小部件的宽度和高度，但它们接受的最小宽度是`220 pixels`示例：`width="220"`，`height="350"`

FROM [Twitters 开发者页面](https://dev.twitter.com/docs/embedded-timelines#dimensions)：*时间线的最小宽度为 220 像素，最大为 520 像素。最小高度为 350px*。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-07T08:46:07.733

您可以通过在“twitter-timeline”类定义中设置其值来更改小部件的宽度，如下所述：

[https://dev.twitter.com/docs/embedded-timelines](https://dev.twitter.com/docs/embedded-timelines)

例如，宽度为 280、高度为 300 的 twitter 时间线小部件类似于：

```
<a class="twitter-timeline" width="280" height="300" href="https://twitter.com/YOURTWITTERUSERNAMEHERE" data-widget-id="YOURWIDGETIDHERE">Tweets by @YOURTWITTERUSERNAMEHERE</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T10:01:51.790

```
#twitter-widget-6 {
  width:600px;
} 
```

以上工作，我认为这些数字与您创建的小部件的数量相对应。宽度是我们唯一可以改变的吗，字体呢，我似乎不能改变这个？Twitter 小部件太丑了，很难让它在任何布局中都很好地放置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-14T18:09:06.233

如果你只是使用

```
#twitter-widget-0 { 
    width: 100% !important; 
} 
```

它会工作，但它会在 iOS 设备上被切断（尚未在 android 上测试）。要解决此问题，您需要向 twitter-timeline 标签添加宽度和高度，如下所示：

```
<a class="twitter-timeline" width="280" height="300" href="https://twitter.com/YOURTWITTERUSERNAMEHERE" data-widget-id="YOURWIDGETIDHERE">Tweets by @YOURTWITTERUSERNAMEHERE</a> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-12T06:33:48.247

如果我们放在CSS下面，那么我们可以根据需要设置widget的宽度。

```
<style type="text/css"> iframe[id^='twitter-widget-']{ width:100%;} </style> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-04T14:29:36.567

I needed to use the class twitter-timeline-rendered instead of the id #twitter-widget-0\. That way, the widget is resized after rendering.

```
.twitter-timeline-rendered { 
      width: 100% !important; 
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-25T19:11:06.110

包括

```
数据宽度=“100%”
```

在锚标签中。这对我有用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-26T18:35:17.517

我已经尝试了以上所有答案，但没有运气，

所以我自己在下面的代码中实现并为我工作

```
<script type="text/javascript">

 $(window).on('load', function () {

 $('iframe[id^=twitter-widget-]').each(function () {

 var head = $(this).contents().find('head');

 if (head.length) {

 head.append('<style>.timeline { max-width: 100% !important; width: 100% !important; } .timeline .stream { max-width: none !important; width: 100% !important; }</style>');

 }

 $('#twitter-widget-0').append($('<div class=timeline>'));

 })

 });

</script> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-02T16:12:42.130

这对我有用...

```
 #twitter-widget-6{
      width:600px;
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-21T23:54:18.113

尝试更改`width="220"`为`width="100%"`.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-19T16:21:42.333

这就是我的做法，使用与[Chandrakant](https://stackoverflow.com/users/1343297/chandrakant)在 iframe 中插入样式几乎相同的逻辑。

首先：以正确的方式添加 twitter 小部件

```
<script type="text/javascript">
// https://dev.twitter.com/web/javascript/loading
window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
        t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    js.async = true;
    fjs.parentNode.insertBefore(js, fjs);
    t._e = [];
    t.ready = function(f) {
        t._e.push(f);
    };
    return t;
}(document, "script", "twitter-wjs"));
</script> 
```

现在你有一个不错的 window.twttr._e 数组，它可能包含加载 twitter widget.js 后将运行的所有内容。

*请注意，我添加了 js.async = true;*

现在您可以在同一个脚本中或之后执行以下操作：

```
<script type=text/javascript">
// https://dev.twitter.com/web/javascript/events
window.twttr.events.bind('loaded', function (e) {
  e.widgets.forEach(function (widget) {
    // js to support twitter 100% if present
    $(widget).contents().find('head').append('<style>.timeline { max-width: 100% !important; width: 100% !important; }</style>');
  });
});
</script> 
```

*请注意，我使用 jquery 的方式将样式附加到 iframe 头部内容的末尾。你可以用经典的方式来做，但它会更长。*

```
<script type="text/javascript">
// ...
widget.contentDocument.getElementsByTagName('head')[0]...
// ...
</script> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-07T02:09:39.080

随着最近的更新（或搞砸），无论在 twitter 设置中设置了哪些选项，twitter 都强制所有提要小部件在加载时自动显示图像。

现在我在基于 html 的站点中使用他们自己的小部件提要，并希望禁用图像加载。我不介意必须重新开始，但是谁能告诉我在哪里可以找到不包含图像的可定制的基于 html 和 js 的 twitter 提要。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-13T02:51:06.733

这对我有用：

```
.twitter-timeline {
    height: 180px !important; 
    width: 100% !important; 
} 
```

# c# - 面向对象的控制台应用程序中的输入验证，它属于哪里？

> ID：12539497
> 
> 赞同：0
> 
> 时间：2012-09-21T23:46:15.510
> 
> 标签：c#, oop, validation, encapsulation

设计问题...

我的任务是在 C# 中创建一个小型控制台应用程序，并希望遵循最佳封装实践。

我有一个 UI 层、一个控制器/命令处理器层、一个业务规则层和一个数据访问层。

该应用程序允许用户创建记录，填写一些字段，然后将其与其余记录一起插入内存。

假设其中一些字段的有效选项数量有限，那么验证用户输入是否与这些选项之一匹配的最合乎逻辑的地方在哪里？

拥有一种存在于 UI 中的临时记录，在我使用用户数据时填写它并检查记录类中的 setter 方法的返回值，这是一种好的设计吗？我的记录类是否应该不实现验证，而是验证用户输入是否与业务规则层中的选项匹配？

如果这会影响答案，则应用程序是用 C# 编写的。我目前的想法是在记录类中使用属​​性并在 UI 中有临时记录，然后如果用户输入与选项匹配，则仅在记录类中设置底层成员。然后，UI 将使用 get 方法将用户输入与记录中的值进行比较，如果值不匹配（设置不成功），则提示用户重新输入数据。

有没有更好的方法遵循更好的设计原则？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T13:50:59.453

我主张加强你的应用程序的打字。您的业​​务规则应该只使用强类型、经过验证的数据。他们不需要摆弄你的用户界面的怪癖。

让我们看一个假设情况的事实：用户必须输入汽车序列号​​。序列号的限制是它有 15 个字符，前两个是“VF”。

您的 UI 正在接受来自用户的一系列字符，无论是来自文本框还是控制台输入。在这个级别上，将这个字符序列存储到一个对象中是有意义的`string`，因为它就是这样：一个字符序列。

相反，在业务规则方面，它应该已经过验证。实际上，只有有效`string`s 的一个子集是 BR 感兴趣的。因此，您的 BR 应该操纵另一种不是`string`. 在 C# 中，用户定义的类型是 a`class`或 a `struct`。

所以让我们写这个类型。我选择创建一个`class`，因为语法警告较少。

```
class CarSerialNumber {
} 
```

汽车序列号​​在语义上是一个值，而不是一个对象。它具有价值语义。它的值可以存储到a`string`中，我们要重新定义Equals(object)、GetHashCode()，并且它本身是equatable的，所以它可以实现IEquatable。

```
class CarSerialNumber : IEquatable<CarSerialNumber> {
    string _value;

    public override bool Equals(object right) {
        if(this == right) {
            return true;
        }
        if(right == null) {
            return false;
        }

        if(!right is CarSerialNumber) {
            return false;
        }

        return Equals((CarSerialNumber)right);
    }

    public override int GetHashCode() {
        return _value.GetHashCode();
    }

    public bool Equals(CarSerialNumber right) {
        return _value == right._value;
    }
} 
```

它应该用一个`string`值构造，并且是不可变的。

```
class CarSerialNumber : IEquatable<CarSerialNumber> {
    public CarSerialNumber(string value) {
        _value = value;
    }

    readonly string _value;

    // ... rest ....
} 
```

在那里，我们刚刚找到了铰链。`string`这个构造函数是从到的转折点`CarSerialNumber`。此外，`CarSerialNumber`不应使用无效字符串构造 a。由于类型系统此时无法保证参数`string`是有效的汽车序列号​​，因此构造函数必须以异常方式退出。

因此，验证属于 RIGHT HERE。

```
class CarSerialNumber : IEquatable<CarSerialNumber> {
    public CarSerialNumber(string value) {
        Validate(value);
        _value = value;
    }

    private Validate(string value) {
        if(value == null) { // Never forget this one ;)
            throw new ArgumentNullException();
        }

        // Rest of validation, throwing exceptions on failure.
    }

    // ... rest ....
} 
```

您可能强烈希望考虑制作这种类型`sealed`。此类类型的继承可能包括其他陷阱。（就像不相容子类型的神奇平等性）

在“更简单的类型可以做到”的地方创建此类类型的其他优点是：

*   当用作参数类型时，它记录了函数的期望，比参数名称更好。（或者至少，它是一个补充文档）
*   以这种方式创建的类型彼此不兼容。如果您尝试将 CarModel 传递给需要 CarSerialNumber 的函数，编译器会警告您。

`enum`当您在编译时知道所有可能的值时，其他更强类型的解决方案包括使用s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:01:56.430

如果我正确理解布局，我会推荐这样的东西：

控制器/命令处理器将验证命令，确保它们遵循适当的语法。

业务规则层将确保输入的所有数据都是有效数据。在将数据输入记录之前，将对其进行验证。

如果您有数据连接命令，数据访问层将确保输入的连接信息有效。

# javascript - 当我进行自定义缩放时恢复比例

> ID：12539498
> 
> 赞同：2
> 
> 时间：2012-09-21T23:46:23.303
> 
> 标签：javascript, charts, d3.js

我有一个问题，当使用在图表上绘制的矩形进行缩放时，它应该对所选区域进行缩放。当我尝试让我缩小时发生错误，这应该可以工作，但由于某种原因它被锁定并且我无法返回到起始位置。

这是使用矩形执行缩放的代码，首先按 shift 键并单击以绘制需要执行放大的区域。

[http://jsfiddle.net/cristian540/VFqeV/8/](http://jsfiddle.net/cristian540/VFqeV/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:38:54.440

发生这种情况是因为您设置`.scaleExtent([1, Infinity])`了 ，并且当您使用矩形选择进行缩放时，您并没有重置比例。

也许你最好关闭`.scaleExtent`，因为只有一个比例值，`d3.behavior.zoom`而缩放矩形实际上有两个（一个用于 x-，一个用于 y-）。

# php - 使用 PHP 和 AJAX 将数据写入文件不起作用

> ID：12539509
> 
> 赞同：2
> 
> 时间：2012-09-21T23:48:36.770
> 
> 标签：php, jquery, ajax

我正在尝试使用 AJAX 和 PHP 将 json 数据保存到文件中，但生成的文件为空。为什么它不起作用？

这是HTML：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<script>

var dataset = {"value1": 2, "value2": 1000};

$.ajax({
   url: 'save.php',
   type: 'POST',
   data: dataset,
   success: function() {
      alert('Success');
   }
});

</script>
</body>
</html> 
```

保存.php：

```
<?php 
$map=json_decode($_POST['json_string']);
$file = "test.json"; 
$fh = fopen($file, 'w') or die("can't open file");
fwrite($fh, $map);
fclose($fh);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:54:17.947

您使用了错误的 POST 变量名。首先，发送您的 AJAX 请求：

```
data: { 
    json: dataset
    }, 
```

然后使用：

```
$map = $_POST['json']; 
```

不要解码它，因为您要保存 JSON 字符串，而不是数组。如果你想要 PHP 表示，最好使用`var_export()`：

```
$map = var_export(json_decode($_POST['json'], true), true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:59:20.583

将此行更改`$map=json_decode($_POST['json_string']);`为`$map=json_decode($_POST['dataset']);`

# apache - 是否可以只允许 Apache HTTPd 静态资源访问在 Tomcat 中经过身份验证的客户端？

> ID：12539512
> 
> 赞同：1
> 
> 时间：2012-09-21T23:49:26.447
> 
> 标签：apache, tomcat, grails, spring-security, apache2

我有一个 Grails 应用程序，使用 spring-security 插件，部署在 Tomcat 上，前面有 Apache Httpd 服务器。我想在 httpd 服务器上部署一些执行一些文件操作的 php 脚本。这似乎很容易，但是我想知道是否可以限制对这些脚本的访问，以便只有在我的 Grails 应用程序中经过身份验证的客户端才能执行它们？

我只想限制对脚本的访问，但另一方面，由于性能原因，我不想将它们移动到 Groovy/Java [我不想为这些任务浪费 Tomcat 时间]。

编辑：php 脚本生成一个文件 [最多 1MB]，然后将其传输到客户端。我已经阅读[了这篇](https://stackoverflow.com/questions/7691332/secure-content-on-httpserver-using-a-tomcat-application-any-ideas)文章并考虑了从 tomcat 到 httpd 的反向代理，但是我担心它会对 Tomcat 产生影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:51:56.587

你可以用一点 mod_perl 来做到这一点。下面是一个示例解决方案，需要稍微调整一下，以便它只捕获您想要保护的 URL 而忽略其他所有内容。

下面的代码假定 Grails 服务器上的某个 URL 由 Spring Security 保护，并且该页面上唯一的内容是“允许”的工作。我使用了 URL [http://mywebapp.com/some-secured-page.jsp](http://mywebapp.com/some-secured-page.jsp)。

mod_perl 代码，在一个名为 MyModPerlFilter.pm 的文件中是这样的：

```
package MyModPerlFilter;

use strict;
use Apache2::RequestRec;
use Apache2::Connection;
use APR::Table;
use LWP::Simple;

use base qw(Apache2::Filter);

use Apache2::Const -compile => qw(REDIRECT DECLINED M_GET);

use constant BUFF_LEN => 1024;

sub handler : FilterRequestHandler {
    my $r = shift;

    # check only GET requests for /*.php, ignore everything else
    if ($r->uri() =~ m|/.*\.php$| && $r->method_number == Apache2::Const::M_GET) {

        # grab Tomcat session ID from request
        my $jsessionid = $r->headers_in->{Cookie} =~ /JESSIONID=([^;\s]+)/ && $1;

        # fetch secure page with the Tomcat session ID
        my $res = get("http://mywebapp.com/some-secured-page.jsp;jsessionid=$jsessionid");

        # any response other than the word "ALLOWED" redirect to login form
        if ($res ne 'ALLOWED') {
            $r->headers_out->set("Location", "http://mywebapp.com/login.jsp");
            return Apache2::Const::REDIRECT;
        }
    }

    return Apache2::Const::DECLINED;
}

1; 
```

如果请求是对匹配“/*.php”的 URL 的 GET，它将直接调用 Grails 服务器上的安全页面并验证它是否返回文本“ALLOWED”。如果对 Grails 页面的调用没有，则意味着用户未通过身份验证并将他们重定向到 Spring Security 登录页面。

唯一棘手的部分是从请求中获取会话 ID，并在您调用安全检查 URL 时将其包括在内。它假定会话 ID 存储在 cookie JSESSIONID 中，并且您的 Tomcat 设置为允许在 URL 中传递会话 ID。

Apache 设置需要安装 mod_perl，并且配置与此类似。

```
# location of the mod_perl handler (or use the default locations)
PerlSwitches -I/usr/local/somewhere

<VirtualHost *:80>
    ...

    SetHandler modperl
    PerlMapToStorageHandler MyModPerlFilter

    ...

    # any proxy related stuff here
    ProxyPass / http://127.0.0.1:8080/
    ProxyPassReverse / http://127.0.0.1:8080/
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:55:21.417

他们将不得不共享一个会话。这需要相当多的工作，因为它们没有共同点。您必须编写 Java 代码才能与 Apache HTTPD 在其会话中使用的兼容。

# asp.net-membership - 使用表单身份验证，是否可以仅针对当前请求在代码中切换登录用户？

> ID：12539514
> 
> 赞同：0
> 
> 时间：2012-09-21T23:49:51.993
> 
> 标签：asp.net-membership, forms-authentication, membership

在某种情况下，我希望请求以不同于实际登录的用户身份执行。因此，当用户 A 请求特定页面时，我想从代码中切换它在用户 B 的用户帐户下执行——*仅对于这个单一的请求*（甚至对于一个单一的代码块......）

我用过这个：

```
FormsAuthentication.SetAuthCookie("UserB") 
```

这有效，但它是持久的。当我请求一个新页面时，我现在以用户 B 的身份登录，这不是我想要的。

这可能吗？我已经为此上下了RTFM。

**编辑：**我可能已经找到了答案，我在下面发布了该答案。寻找对此解决方案的确认或反驳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:37:55.313

我想我可能已经找到了。我不是 100% 确定，但这有效。我只是不知道这是否完全正确，或者是否有我没有考虑的事情。

```
HttpContext.Current.User = PrincipalInfo.CreatePrincipal("UserB"); 
```

同样，这似乎做了我最初想要的。如果您有经验可以证明我是对还是错，请发表评论。

# ruby - Prolog 中的一个简单的同义词匹配器（好吧，rubylog）

> ID：12539523
> 
> 赞同：3
> 
> 时间：2012-09-21T23:50:41.750
> 
> 标签：ruby, prolog

我正在试验 ruby​​log，它是 Ruby 的 Prolog。我的目标是在单词之间创建逻辑链接，以挖掘我可能不会注意到的文档之间的联系。我今天才开始，我正在玩同义词检测器。奇怪的是，似乎我已经使同义词规则几乎但不是完全对称和传递。

在这个例子中，我试图教 Prolog 'math'、'maths' 和 'mathematics' 都是同义词：

```
require 'rubylog'
include Rubylog::DSL::Constants

Symbol.rubylog_functor :synonym
Symbol.rubylog_functor :synonym_of
X.synonym(Y).if X.synonym_of(Y)
X.synonym(Y).if Y.synonym_of(X)
X.synonym(Z).if X.synonym_of(Y).and Y.synonym_of(Z)   ###########

:math.synonym_of! :mathematics
:mathematics.synonym_of! :maths
puts "Synonyms for math: #{:math.synonym(X).to_a}"
puts "Synonyms for maths: #{:maths.synonym(X).to_a}"
puts "Synonyms for mathematics: #{:mathematics.synonym(X).to_a}" 
```

令我惊讶的是，结果是

```
Synonyms for math: [:mathematics, :maths]
Synonyms for maths: [:mathematics]
Synonyms for mathematics: [:maths, :math] 
```

我认为问题可能是标记的行`###########`使用`synonym_of`而不是`synonym`，因此可能没有递归地描述规则。但是改变那条线`X.synonym(Z).if X.synonym_of(Y).and Y.synonym(Z)`给出了非常奇怪的输出

```
Synonyms for math: [:mathematics, :maths, :math, :mathematics]
Synonyms for maths: [:mathematics]
Synonyms for mathematics: [:maths, :math, :mathematics] 
```

非常好奇！你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:25:59.820

您正在对有向图上的传递闭包进行建模，然后您应该对传递属性使用递归规则，但要防止循环。

我可以建议的实用方法是*明确地*为同义词编写规则（对不起，我没有 ruby​​log，我正在 SWI-Prolog 中测试）：

```
synonym(X, Z) :- synonyms(X, L), member(Z, L).

synonym_of(math, mathematics).
synonym_of(mathematics, maths).

synonyms(X, Ss) :- synonyms(X, [], Ss).

synonyms(X, Found, R) :-
    ( synonym_of(X, S) ; synonym_of(S, X) ),
    \+ member(S, Found),
    !, synonyms(S, [S|Found], R).
synonyms(_, Found, Found). 
```

# php - 进行多层排序的最佳/最简单方法是什么？

> ID：12539528
> 
> 赞同：2
> 
> 时间：2012-09-21T23:51:01.520
> 
> 标签：php, sorting

我正在开发一个功能来为客户进行多级排序（在一个排序中排序，因为没有更好的术语）。假设我们有一个具有不同属性的对象列表，例如：

*   name - 对象的名称
*   类型 - 对象类型
*   date - 一些日期属性

假设我想先按时间顺序对列表进行排序，然后按对象类型，然后按字母顺序。我该怎么做呢？

目前我正在使用 usort() 传入我自己的比较函数，它将上述属性转换为不同权重的整数；例如。如果主要排序是按日期，我​​将其转换为某个整数，将其乘以 1000，将下一层排序转换为整数（在本例中为类型），将其乘以 100，依此类推，然后将其全部相加一起来确定一个对象是 < 还是 > 另一个。

有更简单/优雅的解决方案吗？谢谢

编辑：澄清一下，有没有更好的方法来进行多级排序而不将所有内容都转换为“权重”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T03:54:53.313

基本上，您要做的是使用一系列“短路”比较。考虑到上述标准，一个天真的例子可能看起来像这样（未经测试）：

```
function mySort($a, $b) {
    if ($a->name < $b->name) {
        return -1;
    }

    if ($a->name > $b->name) {
        return 1;
    }

    // If we get this far, then name is equal, so
    // move on to checking type:
    if ($a->type < $b->type) {
        return -1;
    }

    if ($a->type > $b->type) {
        return 1;
    }

    // If we get this far, then both name and type are equal,
    // so move on to checking date:
    if ($a->date < $b->date) {
        return -1;
    }

    if ($a->date > $b->date) {
        return 1;
    }

    // If we get this far, then all three criteria are equal,
    // so for sorting purposes, these objects are considered equal.
    return 0;
} 
```

不过，正如我所说，这是一个幼稚的解决方案，而且非常不可扩展。我建议使用更强大的解决方案，其中您的排序不会硬编码到排序方法中。以这种方法为例（未经测试）：

```
// These are the properties to sort by, and the sort directions.
// They use PHP's native SORT_ASC and SORT_DESC constants.
$this->_sorts = [
    'name' => SORT_ASC,
    'type' => SORT_ASC,
    'date' => SORT_ASC
];

// Implemented as a class method this time.
protected function _mySort($a, $b) {
    foreach ($this->_sorts as $property => $direction) {
        if ($a->{$property} < $b->{$property}) {
            return $direction === SORT_ASC ? -1 : 1;
        }

        if ($a->{$property} > $b->{$property}) {
            return $direction === SORT_ASC ? 1 : -1;
        }
    }

    return 0;
} 
```

现在，添加或删除不同的排序字段或排序方向就像添加或修改数组元素一样简单。无需修改代码。

# rest - 为网页设计 RESTful URL

> ID：12539540
> 
> 赞同：5
> 
> 时间：2012-09-21T23:54:03.060
> 
> 标签：rest, web-applications, django-urls

大多数 REST 教程将资源安排如下：

```
GET  /car/      -> list of cars
GET  /car/<id>/ -> info about specific car
POST /car/      -> create a new car 
```

但是在构建用于浏览器的 Web 应用程序时，缺少一个很少讨论的链接，在您可以 POST 到 /car/ 之前，您需要获取一个用于创建新资源（汽车）的表单。此表单的 URL 应该是什么？

我通常使用：

```
 GET  /car/new/ -> form for creating a new car
 POST /car/new/ -> redirect to /car/<id>/ if item is created else show form with invalid fields highlighted 
```

但根据[http://www.slideshare.net/Wombert/phpjp-urls-rest](http://www.slideshare.net/Wombert/phpjp-urls-rest)这不是一个好的 REST URL。我可以看到为什么它不是一个好的 REST，因为“new”实际上是用作动词而不是资源，但是表格应该在哪里，因为`GET /car/`已经用于列出汽车，所以你不能`GET /car/`用于表格对于新车。

简而言之，我的问题是：“‘创建资源表单’的 RESTful URL 是什么？”

稍微相关一点，即使在 Web 服务中，有时依赖客户端提前知道模式并不总是明智的，因此即使在 Web 服务中，也可能需要一种方法让客户端请求资源的当前架构。AFAICS，这与需要获取创建表单的类似情况（即，表单有点像描述如何构造 POST 查询以创建资源的模式）。我的思路在这里正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:05:50.653

我一直认为“表单”本身不是资源，所以`/<name>/new`没关系——表单不是 API 的常见元素。幻灯片的作者把它放在了一个“坏”的名单上，但没有提供一个正确的名单——我认为他太 RESTful 以至于他忘记了考虑这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T06:51:27.390

REST 不太关心您的 URI 的外观，只要它标识一个唯一资源并且是自描述的。满足这些标准，除此之外，这是个人喜好。如果使用一个动词是有意义的，没有什么禁止在 URI 中使用动词。

关于您稍微相关的注释，您暗示的形式是模式是**media type**。RESTful 架构涉及客户端和服务器都了解用于表示应用程序状态的媒体类型。

> REST API 应该花费几乎所有的描述性工作来定义用于表示资源和驱动应用程序状态的媒体类型，或定义扩展关系名称和/或现有标准媒体类型的超文本启用标记。描述在感兴趣的 URI 上使用什么方法所花费的任何努力都应该完全在媒体类型的处理规则范围内定义（并且在大多数情况下，已经由现有媒体类型定义）。

在这里阅读更多：[http ://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)

那是来自定义 REST 的人 Roy Fielding。一般来说，您的媒体类型应该是可扩展的——也就是说，除非必要，否则任何更改都应该添加而不破坏旧客户端。

# c# - 使用值编码 C# 的遗传算法初始种子多样性

> ID：12539548
> 
> 赞同：4
> 
> 时间：2012-09-21T23:54:53.807
> 
> 标签：c#, algorithm, grid, initialization, genetic

我想知道以下内容：如何使用值编码有效地生成具有高多样性的染色体？一种方法是网格初始化，但它太慢了。

到目前为止，我一直在使用 .NET 中的 Random 类在值编码中选择随机值，但是，尽管值是均匀分布的，但从这些染色体计算出的适应度函数值却不是。这是染色体初始化的代码：

```
 public Chromosome(Random rand) 
        {
            Alele = new List<double>();
            for (int i = 0; i < ChromosomeLength; i++)
            {
                Alele.Add(rand.NextDouble() * 2000 - 1000);
            }
        } 
```

因此，我开发了一个从新的、随机生成的染色体（上码）计算适应度的函数，如果适应度与染色体列表中已经存在的任何其他染色体相似，则随机生成一个新染色体并计算其适应度并重复此过程直到他的健康状况与列表中的其他人没有足够的差异。

这是这部分的代码：

```
private bool CheckSimilarFitnes(List<Chromosome> chromosome, Chromosome newCandidate) 
    {
     Boolean flag=false;
     double fitFromList, fitFromCandidate;
     double fitBigger,fitSmaller;

     foreach (var listElement in chromosome)
      {  
      fitFromList = listElement.CalculateChromosomeFitness(listElement.Alele);
      fitFromCandidate = newCandidate.CalculateChromosomeFitness(newCandidate.Alele);
      fitBigger = fitFromList >= fitFromCandidate ? fitFromList : fitFromCandidate;
      fitSmaller =  fitFromList < fitFromCandidate ? fitFromList : fitFromCandidate;

            if ((fitFromList / fitFromCandidate) < 1.5) 
                return false
      }

     else return true;

    } 
```

但是，我在列表中拥有的染色体越多，添加一个新的染色体就越需要更长的时间，其适应度与已经存在的其他染色体有足够的不同。

那么，有没有办法让这个网格初始化更快，像这样制作 80 条染色体需要几天时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:02:36.470

这里的基本问题是大多数随机生成的染色体具有相似的适应度，对吧？没关系; 这个想法并不是让您的初始染色体具有截然不同的适应度；这是因为染色体本身不同，而且可能它们是不同的。事实上，您应该期望大多数第一代的初始适应度接近于零，因为您还没有运行算法。

这就是您的代码如此缓慢的原因。假设第一个候选人很糟糕，基本上是零适应度。如果第二个必须有 1.5 倍的不同，那真的只是意味着它必须要好 1.5 倍，因为它不会变得更糟。然后下一个必须比那个好 1.5 倍，以此类推到 80 倍。所以你真正要做的是通过生成完全随机的染色体并将它们与你拥有的染色体进行比较来寻找**越来越好的染色体。**我敢打赌，如果您记录进度，您会发现找到后续候选者需要越来越多的时间，因为很难找到真正好的染色体。但是**寻找更好的染色体是遗传算法的目的！**基本上你所做的是之前手动优化了一些染色体，嗯，实际上优化了它们。

如果你想确保你的染色体是多样化的，那就比较它们的内容，不要比较它们的适合度。比较适应度是算法的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T14:16:44.537

这里有一些可能有帮助的代码（我刚刚写的）：[GA for ordering 10 values spaced by 1.0](http://pastebin.com/R4Cazwbz)。它从 100 个完全随机的等位基因群开始，这正是您的代码开始的方式。

我给 GA 解决的目标是以 1.0 的间隔按递增顺序排列值。它`Eval_OrderedDistance`通过从 1.0 计算每对样本的标准差来在适应度函数中做到这一点。随着适应度趋于 0.0，等位基因应该开始按顺序出现。

第 0 代最适合的染色体是完全随机的，其他染色体也是如此。可以看到适应度值非常高（即不好）：

```
GEN: fitness   (allele, ...)
  0: 375.47460 (583.640, -4.215, -78.418, 164.228, -243.982, -250.237, 354.559, 374.306, 709.859, 115.323) 
```

随着世代的继续，适应度（与 1.0 的标准差）会下降，直到在第 100,000 代时接近完美：

```
 100: 68.11683 (-154.818, -173.378, -170.846, -193.750, -198.722, -396.502, -464.710, -450.014, -422.194, -407.162)
  ...
10000:  6.01724 (-269.681, -267.947, -273.282, -281.582, -287.407, -293.622, -302.050, -307.582, -308.198, -308.648)
  ...
99999:  0.67262 (-294.746, -293.906, -293.114, -292.632, -292.596, -292.911, -292.808, -292.039, -291.112, -290.928) 
```

代码中有趣的部分是适应度函数：

```
// try to pack the aleles together spaced apart by 1.0
// returns the standard deviation of the samples from 1.0
static float Eval_OrderedDistance(Chromosome c) {
    float sum = 0;
    int n = c.alele.Length;
    for(int i=1; i<n; i++) {
        float diff = (c.alele[i] - c.alele[i-1]) - 1.0f; 
        sum += diff*diff; // variance from 1.0
    }

    return (float)Math.Sqrt(sum/n);
} 
```

还有突变。我使用了一个简单的交叉和“完全突变一个等位基因”：

```
Chromosome ChangeOne(Chromosome c) {
    Chromosome d = c.Clone();
    int i = rand.Next() % d.alele.Length;
    d.alele[i] = (float)(rand.NextDouble()*2000-1000);
    return d;
} 
```

我使用精英主义来始终保留一份最好的染色体的精确副本。然后使用突变和交叉生成 100 条新染色体。

听起来您确实在计算适应度的方差，这当然会告诉您总体中的适应度几乎相同。我发现如何定义健身功能*非常重要。*适应度函数越精细，您就越能区分染色体。显然，您的适应度函数为**完全不同的染色体**返回相似的值，因为您的第 0 代返回的适应度方差为 68e-19。

你能分享你的健身计算吗？或者您要求 GA 解决什么问题？我认为这可能会帮助我们帮助你。

**[编辑：添加明确的健身分享/利基]**

我重新考虑了一下并[更新了我的代码](http://pastebin.com/R4Cazwbz)。如果你想保持独特的染色体，你必须比较它们的内容（正如其他人提到的那样）。一种方法是计算它们之间的标准偏差。如果它小于某个阈值，则可以将它们视为相同。从染色体类：

```
// compute the population standard deviation
public float StdDev(Chromosome other) {
    float sum = 0.0f;
    for(int i=0; i<alele.Length; i++) {
        float diff = other.alele[i] - alele[i];
        sum += diff*diff;
    }
    return (float)Math.Sqrt(sum);
} 
```

我认为Niching会给你你想要的。它比较群体中的所有染色体以确定它们的相似性，并为每个染色体分配一个“利基”值。然后使用一种称为“显式健身共享”的技术对染色体进行“惩罚”，因为它们属于某个生态位。适应度值除以每个生态位中的染色体数量。因此，如果您在利基组 A (A,A,A) 中有三个而不是该利基被选择的可能性是其 3 倍，则它被视为单个实体。

我将我的样本与 Explicit Fitness Sharing 开启和关闭进行了比较。最大 STDDEV 为 500 且 Niching 关闭时，大约有 18-20 个壁龛（所以基本上 100 人口中每个项目有 5 个重复）。启用 Niching 后，大约有 85 个壁龛。那是人口中 85% 的独特染色体。在我的测试输出中，您可以看到[17000 代后的多样性](http://pastebin.com/ed2Pq2aR)。

这是利基代码：

```
// returns: total number of niches in this population
// max_stddev -- any two chromosomes with population stddev less than this max
//               will be grouped together
int ComputeNiches(float max_stddev) {
    List<int> niches = new List<int>();

    // clear niches
    foreach(var c in population) {
        c.niche = -1;
    }

    // calculate niches
    for(int i=0; i<population.Count; i++) {
        var c = population[i];
        if( c.niche != -1) continue; // niche already set

        // compute the niche by finding the stddev between the two chromosomes 
        c.niche = niches.Count;
        int count_in_niche = 1; // includes the curent Chromosome
        for(int j=i+1; j<population.Count; j++) {
            var d = population[j];
            float stddev = c.StdDev(d);
            if(stddev < max_stddev) {
                d.niche = c.niche; // same niche
                ++count_in_niche;
            }
        }
        niches.Add(count_in_niche);
    }

    // penalize Chromosomes by their niche size
    foreach(var c in population) {
        c.niche_scaled_fitness = c.scaled_fitness / niches[c.niche];
    }

    return niches.Count;
} 
```

**[编辑：安东代码的后期分析和更新]**

我知道这可能不是解决家庭作业问题的正确论坛，但由于我在知道这一点之前就做了努力，而且我从中获得了很多乐趣，我认为它只会对 Anton 有所帮助。

[Genotip.cs](http://pastebin.com/ZPJJ7sGv) , [Kromosom.cs](http://pastebin.com/Vyc9UJLu) , [KromoMain.cs](http://pastebin.com/n0haNACS)

这段代码保持了良好的多样性，我能够在一次运行中将“原始适应度”降低到 47，在你的情况下，这是平均平方误差。那是相当接近！

正如我在评论中指出的那样，我想尝试帮助您进行编程，而不仅仅是帮助您完成作业。请阅读这些对您工作的分析。

1.  正如我们所料，没有必要从一开始就制造“更加多样化”的人口。只需生成一些完全随机的 Kromosomes。

2.  你的突变和交叉具有很强的破坏性，而你只有其中的几个。我添加了几个似乎更适合解决此问题的新运算符。

3.  你扔掉了最好的解决方案。当我让您的代码仅使用 Tournament Selection 运行时，将会有一个 Kromo 比其他所有的要好 99%。通过锦标赛选择，这个最佳价值很可能被遗忘。我添加了一些“精英主义”，为下一代保留了该价值的副本。

4.  考虑面向对象的技术。将我发送给您的重写代码与我的原始代码进行比较。

5.  不要重复代码。您有两个不同类别的采样参数。

6.  保持代码干净。有几个未使用的代码部分。特别是在向 SO 提交问题时，尝试缩小范围，删除未使用的代码，并进行一些清理。

7.  评论你的代码！我对重做的工作发表了重要的评论。我知道这是塞尔维亚语，但即使是一些评论也会帮助其他人了解你在做什么以及你打算做什么。

8.  总的来说，很好地实现了一些更复杂的东西，比如锦标赛选择

9.  更喜欢 double[] 数组而不是 List。开销更少。此外，甚至不需要您的几个 List 临时变量。你的结构

    列表临时 = 新列表（）；for(...) { temp.add(value); } for(temp 中的每个值) { sum += value } average = sum / temp.Count

可以很容易地写成：

```
sum = 0
for(...) {
    sum += value;
}
average = sum / count; 
```

1.  在几个地方，您忘记初始化循环变量，这很容易添加到您的问题中。这样的事情会导致严重的问题，而且它在你的**健身**代码中以及其他一两个地方

    双重拟合 = 0; *for(每个染色体) { // 你应该在循环内*初始化 fit 这里for(each allele) { fit += ...; } 适合 /= 计数；}

祝编程好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T02:21:43.113

我要快速解决这个问题，但 Isaac 是非常正确的。你需要*让 GA 完成它的工作*。你有一代人（染色体，等等），而且他们在健康方面都在规模上（或者也许他们都是相同的）。

你选择一些好的来变异（自己）和交叉（彼此）。您可能会使用前 10% 来生成另一个完整的人口，并丢弃底部的 90%。也许你总是把头号人物留在身边（精英主义）。

您在此迭代一段时间，直到您的 GA 停止改进，因为每个人都非常相似。你最终的人口多样性很少。

可能对您有所帮助的是 1) 使您的突变更有效，2) 找到更好的方法来选择个体进行突变。在我的评论中，我向[游戏程序员推荐了 AI 技术](http://books.google.com/books/about/AI_Techniques_for_Game_Programming.html?id=6F9nKQdj8hwC)。这是一本很棒的书。非常容易阅读。

要列出书中的一些标题，您要查找的内容是：

**[轮盘选择（在 stackoveflow 上）](https://stackoverflow.com/questions/298301/roulette-wheel-selection-algorithm)（在[wikipedia](http://en.wikipedia.org/wiki/Fitness_proportionate_selection)上）和[Stochastic Universal Sampling等](http://en.wikipedia.org/wiki/Stochastic_universal_sampling)**选择**技术，它们控制*您*选择个人的方式。我一直很喜欢轮盘赌选择。您设置个人被选中的概率。这不仅仅是简单的白噪声随机抽样。**

 **我在 GA 之外使用它从罗马字母中随机选择 4 个字母。我为每个字母分配了一个从 0.0 到 1.0 的值。每次用户（孩子）正确选择字母时，我都会将该值降低，例如 0.1。这将增加选择其他字母的可能性。如果 10 次后，用户选择了正确的字母，则该值为 0.0，并且（几乎）没有机会再次显示该字母。

**Fitness Scaling**技术，如 Rank Scaling、Sigma Scaling 和[Boltzmann Scaling（ftp 上的 pdf 文件！！！）](ftp://publications.ai.mit.edu/ai-publications/pdf/AIM-1345.pdf)可让您修改原始健身值以得出调整后的健身值。其中一些是动态的，例如玻尔兹曼缩放，它允许您设置随时间变化的“压力”或“温度”。增加的“压力”意味着选择了更健康的个体。压力降低意味着可以选择人群中的任何个体。

我是这样想的：您正在多维空间中寻找解决方案。你达到了一个“高峰”并努力进入它。适合的压力非常大。你紧贴当地的最大值。现在你的体能不能改变。你的突变不会让你走出高峰。所以你开始减少压力，哦，随机选择项目。你的健康水平开始下降，这在一段时间内是可以的。然后你又开始增加压力，惊喜！您已经跳过了局部最大值，并找到了一个可爱的新局部最大值。再次加大压力！

**Niching**（我从未使用过，但似乎是将相似的人组合在一起的一种方式）。假设你有两个非常好的人，但他们完全不同。他们不断被选中。他们不断地发生轻微的变异，并没有变得更好。现在你有一半的人口是 A 的次要变体，一半的人口是 B 的次要变体。这似乎是一种说法，嘿，整个 A 组的平均适应度是多少？B呢？以及您拥有的所有其他利基市场。然后根据每个利基的平均适应度进行选择。选择您的利基市场，然后从该利基市场中随机选择一个人。也许我会开始使用它。我喜欢！

希望您能从中找到一些帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T00:31:55.113

如果您的应用程序需要*真正的*随机数，我建议您查看[Random.org](http://www.random.org/)。他们有一个免费的 HTTP API，以及[几乎所有语言的客户端](http://www.random.org/clients/http/archive/)。

> 随机性来自大气噪声，在许多方面它优于计算机程序中通常使用的伪随机数算法。

（我与 Random.org 无关，尽管我确实贡献了 PHP 客户端）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T01:09:40.307

我认为您的问题在于您的适应度函数如何以及如何选择候选人，而不是随机值的多少。您的过滤感觉过于严格，甚至可能不允许接受足够的元素。

样本

*   值：随机浮点 0-10000。
*   适应度函数平方根(n)
*   所需的适应度分布 - 与距离至少为 1 呈线性关系。

使用此适应度功能，您将快速获得大部分 1 宽“点”（因为您最多有 100 个位置），因此每个下一个将花费更长的时间。在某些时候，会留下几个很小的范围，并且大多数结果都会被拒绝，更糟糕的是，在您获得大约 50 个数字位置之后，下一个数字很可能根本无法拟合。**

# iphone - 在 ios 6 中检索 Facebook 帐户信息

> ID：12539549
> 
> 赞同：2
> 
> 时间：2012-09-21T23:55:08.340
> 
> 标签：iphone, facebook, ios6, account

我想在 ios 6 集成的 Facebook 上检索 facebook 帐户的信息，现在我这样做了，我只能检索用户名：

```
ACAccountType *accountTypeF = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if(granted) {
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountTypeF];

            ACAccount *facebookAccount = [accountsArray objectAtIndex:0];
            if (facebookAccount.username) {
}
}
}]; 
```

我想知道如何检索帐户的姓名和姓氏以及用户的图片...有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T10:08:43.963

杰弗里是对的。转到这篇文章：[Facebook iOS 6 - 获取用户信息](https://stackoverflow.com/questions/12904079/facebook-ios-6-get-user-info)并实现 Daniel 给出的 2 个方法。

然后确保在您的应用程序设置上进行一些更改`facebook developer account`。

*   在主设置页面禁用`sandbox mode`
*   把你的应用程序`bundle id`
*   `Enable`Facebook登入

然后进入`Advance`左边的设置

*   选择`Native/Desktop`为`App Type`
*   确保`App secret in client`是`NO`

保存所有设置，在服务器上填充更改确实需要几分钟。最后**`Must reset you simulator`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:25:22.637

`ACAccount`是 Apple 提供的通用“社交”类；它只有有限的账户信息，对 Facebook 数据一无所知。获取账号后，可以实例化一个`SLRequest`查询Facebook Graph API，使用账号进行身份验证...

```
NSURL* URL = [NSURL URLWithString:@"https://graph.facebook.com/me"];

SLRequest* request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                    requestMethod:SLRequestMethodGET
                                              URL:URL
                                       parameters:nil];

[request setAccount:account]; // Authentication - Requires user context

[request performRequestWithHandler:^(NSData* responseData, NSHTTPURLResponse* urlResponse, NSError* error) {
  // parse the response or handle the error
}]; 
```

# html - 在 CSS 中定义多个过渡属性

> ID：12539555
> 
> 赞同：10
> 
> 时间：2012-09-21T23:56:37.187
> 
> 标签：html, css, css-transitions

设置`transition-property`为`all`时，在浏览器窗口内缩放时看起来很糟糕，因为`width`和`height`属性也在转换。当我只想要`background`and`color`时，我需要多行定义它，但是：

```
transition-property: color, background;
transition-duration: 250ms; 
```

这很糟糕，因为我也必须为`-webkit-`,`-moz`和`-o-`. 相反，我正在寻找这样的东西：

```
transition: [color and background] 250ms; 
```

有什么语法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T23:59:17.907

当使用`transition`多个转换的简写时，您需要为每个属性重复转换持续时间，并用逗号分隔每组值：

```
transition: color 250ms, background 250ms; 
```

使用前缀，它看起来像这样：

```
-moz-transition: color 250ms, background 250ms;
-o-transition: color 250ms, background 250ms;
-webkit-transition: color 250ms, background 250ms;
transition: color 250ms, background 250ms; 
```

仍然有点重复，但至少它胜过重复`transition-property`和`transition-duration`所有前缀。

简写语法在[规范](http://www.w3.org/TR/css3-transitions/#transition-shorthand-property)中描述。

# objective-c - 不能给协议对象强或保留属性

> ID：12539556
> 
> 赞同：1
> 
> 时间：2012-09-21T23:56:38.197
> 
> 标签：objective-c, ios5

我有以下代码行

```
@property (nonatomic, retain) id<MessageItemProtocol> *message; 
```

在这里，我收到一个错误：“具有‘保留’（或强）属性的属性必须是对象类型”

我知道我收到了一个错误，因为它是一个协议。那么，那么它的属性类型应该是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T23:58:22.717

尝试

```
@property (nonatomic, retain) id<MessageItemProtocol> message; 
```

或者

```
@property (nonatomic, retain) NSObject<MessageItemProtocol> *message; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T23:59:14.650

`id`已经是一个指针，所以你不需要`*`.

```
@property (nonatomic, retain) id<MessageItemProtocol> message; 
```

# android - Maven、IntelliJ Idea 和 Android 资源

> ID：12539557
> 
> 赞同：4
> 
> 时间：2012-09-21T23:56:39.997
> 
> 标签：android, maven, intellij-idea, javadoc

我正在使用 Maven 和 IntelliJ Idea 的组合。

尽管在 Idea 中使用 Android 模块显示了 javadoc 和源代码，但我看不到它们中的任何一个使用 Android maven。

任何帮助，如何在 Idea 中使用 Maven 显示源代码？我应该将其设置`pom.xml`在 Idea 偏好设置中还是某处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:59:25.953

请[检查相关问题](http://youtrack.jetbrains.com/issue/IDEA-89743)的解决方法：

> 手动将源附加到“Maven：com.google.android ...”项目库

有关如何执行此操作的详细信息，请参阅[模块依赖项。](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:35:15.740

首先确保您从 Android SDK 为您在项目中使用的目标下载了源代码。

现在在 IntelliJ 中，在 Project Structure (CMD+;) => Modules => Dependencies 下，您应该会看到“Maven: com.google.android:android:4.1.1.4”以及“Android XX Platform (java version...)” . 选择“Android XX”并按底部的向上箭头将其向上移动，使其位于顶部。

现在您应该使用包含源代码的 SDK 模块运行

# javascript - 在加载时执行 javascript

> ID：12539558
> 
> 赞同：0
> 
> 时间：2012-09-21T23:57:23.210
> 
> 标签：javascript, event-handling

我想在加载时执行这个 java 脚本，但在浏览器加载后它似乎没有显示结果。

```
<script>
    function displayNumber()
{

var card = document.getElementById('credit').value;

var str = "";
for(var i=1; i <= card.length-4; i++) {
   str += "*";
}

    ecard = str + card.substr(card.length-4);
    document.getElementById('output').innerHTML = ecard;

}
</script>

  <form id="myform">
   <input type="text" id="credit"  onLoad="displayNumber()" value="123456789012">
</form> 

<label id="output"> </label> 
```

输出应该是

```
********9012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:59:48.867

您不能`onload`与`input`. 相反，放入`window.onload = displayNumber;`你的 JavaScript。另一种选择是添加一个body标签并使用`onload="displayNumber()"`

# html - HTML 垂直居中按钮对齐

> ID：12539559
> 
> 赞同：-1
> 
> 时间：2012-09-21T23:57:26.150
> 
> 标签：html, button, alignment

如何在 2 个文本框的右侧对齐按钮，但在中间垂直对齐？（我要体验 Windows 8 Metro 的感觉。）

是）我有的：

![在此处输入图像描述](../Images/24605632caf9d89fa53d030fe83afc26.png)

我想要的（样机）：

![在此处输入图像描述](../Images/2dbfe9cf03e23c6fdb8556a1667fc636.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:51:24.527

您可以按如下方式使用 Table 标签

```
 <table>
     <tr>
      <td>
      <input type="text" name="textbox1">
      <br>
      <input type="text" name="textbox2">
      </td>
      <td>
      <button name="abc" value="Submit"   type="button">Submit</button>
      </td>
     <tr>
    </table> 
```

希望能帮助到你

# php - 包含运行函数的 PHP 脚本？

> ID：12539561
> 
> 赞同：0
> 
> 时间：2012-09-21T23:57:59.170
> 
> 标签：php

我正在寻找一个像程序一样的插件管理器，它启动一个循环，在“插件”文件夹中搜索 .php 文件。我需要它以某种方式运行`main()`在每个文件中调用的函数，然后该函数将运行其他函数。我怎么能在没有其他`main()`功能冲突的情况下做到这一点，还有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:16:36.900

如果你想使用函数，那么你可以命名它们。但是对于像这样的 id 使用类。例如，每个插件可能有一个`PluginConfiguration`类，它可以是命名空间的，也可以是`PluginName\PluginConfiguration`伪造的`PluginName_PluginConfiguration`。

然后，您可以直接实例化这些类并调用任何内容，例如：

```
class MyCool_Plugin implements PluginInterface {

  // note the interface wouldnt be absolutely necessary, 
  // but making an interface or abstract class for this would be a good idea
  // that way you can enforce a contractual API on the configuration classes

  public function __construct() {
     // do whatever here
  }

  public function main() {
     // do whatever here
  }
} 
```

**更新：**

> 顺便说一句，“PluginInterface”包括什么？

一个接口定义了一个类**必须**实现的所有方法（函数）。您可以使用它在该接口的任何类上强制执行最低 API `implements`。根据您的描述，这将是一种方法，`main`尽管在开发过程中您可能会发现您需要/想要添加更多。

```
Interface PluginInterface {

   public function main();

} 
```

您还可以使用类型提示来强制执行特定的方法签名。例如，假设您总是想将`Application`加载插件的实例注入插件本身，以便它可以注册内容或设置其他内容。在这种情况下，您可能会这样做：

```
Interface PluginInterface {

   public function main(Application $app);

} 
```

# javascript - 在 Rally SDK 中，如何创建一个过滤器来测试配置类型的子项的子项？

> ID：12539562
> 
> 赞同：1
> 
> 时间：2012-09-21T23:58:10.547
> 
> 标签：javascript, extjs, rally

我的具体目标是为迭代创建所有测试用例的列表。我最初的方法是创建一个类型为 Test Case 的纸板并使用具有 WorkProduct.Iteration 属性的过滤器。这似乎不起作用，WorkProduct.Iteration.Name 也不起作用。（使用与 WorkProduct.Description 之类的过滤器相同的代码正在工作，所以问题似乎是我为过滤器属性指定的问题。）

所以问题 #1 是：我如何获得给定迭代的所有测试用例（当每个测试用例分配给一个用户故事，并且每个用户故事都分配给迭代时）？我应该在配置中使用上下文语句而不是过滤器吗？我应该使用其他容器吗？

问题 #2 是：一般来说，是否可以使用 WorkProduct.Iteration.Name 之类的东西作为过滤器属性来访问您要显示的类型的子元素的子元素的值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:30:15.323

In this case you'll get back this error from web services:

```
"Could not parse: Could not traverse to \"Iteration\" on type Artifact in the query segment \"WorkProduct.Iteration\"" 
```

This is due to the fact that in Rally's data model the WorkProduct associated with a testcase may be any artifact (not necessarily a schedulable one).

The general way to get this data would be to first query for all the stories in a given iteration and include the TestCases and any fields on TestCase in the fetch.

Unfortunately in the current preview edition of the SDK 2.0 the CardBoard component doesn't yet support supplying custom pre-queried data. This feature should be included in the GA though.

# crash - iOS6模拟器上的UITableViewController崩溃

> ID：12539565
> 
> 赞同：6
> 
> 时间：2012-09-21T23:58:52.447
> 
> 标签：crash, uitableview, ios6, xcode4.5

我正在开发一个项目，刚刚更新到 Xcode 4.5，我正在使用 iOS 6 模拟器。现在我收到以下错误：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UITableViewController loadView] 加载了“FeedController”笔尖但没有获得 UITableView。

这很奇怪，因为我没有这个控制器的任何 NIB 文件，因为它只是一个表：

```
@interface FeedController : UITableViewController <EGORefreshTableHeaderDelegate>

- (void)reloadTableViewDataSource;
- (void)doneLoadingTableViewData;

@end 
```

此控制器是从选项卡控制器加载的，它毫无问题地分配 FeedController，但是当您按下选项卡按钮以显示提要时，它会因该错误而崩溃。它在 ios4 和 ios5 模拟器和设备上运行良好。

Clean & Build 项目没有帮助。

有同样问题的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:59:16.957

此处列出的答案有帮助吗？[笔尖但没有得到 UITableView](https://stackoverflow.com/questions/11221802/nib-but-didnt-get-a-uitableview)

如果不是，您`UITabBarController`是从以某种方式为选项卡指定非`UITableView`视图的 NIB 创建的吗？`FeedController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T07:50:04.373

您必须添加以下内容：

```
 - (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

# ruby - Ruby 中的排序

> ID：12539566
> 
> 赞同：0
> 
> 时间：2012-09-21T23:59:03.833
> 
> 标签：ruby, arrays, sorting

我的编程书中有一个练习，要求我在不使用任何内置排序的情况下对 Ruby 中的字符串数组进行排序。我正确地对前 5 名进行了排序，但随后就停止了，我无法弄清楚原因。这是我到目前为止所拥有的：

```
numbers = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten']

def sortArray myArray
    recursiveSort myArray, []
end

def recursiveSort myArray, sortedArray
    trashArray = myArray
    myArray.each do |num|
        largest = num
        trashArray.each do |comp|
            if comp > largest
                largest = comp
            end
        end
        sortedArray.push(largest)
        trashArray.delete_at(trashArray.index(largest))
    end
    puts sortedArray
end

sortArray numbers 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T00:06:03.747

这是正在发生的事情的一个例子。从我的终端：

```
$ irb
ruby-1.9.3-p125 :001 > a = [1,2]
 => [1, 2] 
ruby-1.9.3-p125 :002 > b = a
 => [1, 2] 
ruby-1.9.3-p125 :003 > b.delete_at(b.index(1))
 => 1 
ruby-1.9.3-p125 :004 > b
 => [2] 
ruby-1.9.3-p125 :005 > a
 => [2] 
```

您的变量`trashArray`和`myArray`是对内存中同一对象的引用，因此您正在从 myArray 中删除项目：`trashArray.delete_at(trashArray.index(largest))`。

# javascript - 将对象的所有键转换为小写的最佳方法（最有效）是什么？

> ID：12539574
> 
> 赞同：84
> 
> 时间：2012-09-22T00:00:16.337
> 
> 标签：javascript, performance, node.js, object, garbage-collection

我想出了

```
function keysToLowerCase (obj) {
  var keys = Object.keys(obj);
  var n = keys.length;
  while (n--) {
    var key = keys[n]; // "cache" it, for less lookups to the array
    if (key !== key.toLowerCase()) { // might already be in its lower case version
        obj[key.toLowerCase()] = obj[key] // swap the value to a new lower case key
        delete obj[key] // delete the old key
    }
  }
  return (obj);
} 
```

但是我不确定 v8 会如何处理它，例如，它真的会删除其他键还是只会删除引用并且垃圾收集器稍后会咬我？

另外，我创建了[这些测试](http://jsperf.com/object-keys-to-lower-case)，我希望你可以在那里添加你的答案，这样我们就可以看到它们是如何匹配的。

**编辑 1：** 显然，根据测试，如果我们不检查密钥是否已经是小写字母，但速度更快，它会通过忽略这一点并创建新的小写密钥而造成更多混乱吗？垃圾收集器会对此感到满意吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-22T04:07:38.000

我想出的[最快的方法是创建一个新对象：](http://jsperf.com/object-keys-to-lower-case/10)

```
var key, keys = Object.keys(obj);
var n = keys.length;
var newobj={}
while (n--) {
  key = keys[n];
  newobj[key.toLowerCase()] = obj[key];
} 
```

我对 v8 的当前内部工作不够熟悉，无法给你一个明确的答案。几年前，我看到一个开发人员谈论对象的视频，而 IIRC 它只会删除引用并让垃圾收集器处理它。不过那是几年前的事了，就算当时是这样，现在也不需要这样了。

以后会咬你吗？这取决于你在做什么，但可能不是。创建短期对象是很常见的，因此代码经过优化以处理它。但是每个环境都有其局限性，也许它会咬你。您必须使用实际数据进行测试。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-08-13T15:23:37.203

我会像这样使用[Lo-Dash.transform](http://lodash.com/docs#transform)：

```
var lowerObj = _.transform(obj, function (result, val, key) {
    result[key.toLowerCase()] = val;
}); 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-12-10T05:45:24.533

就个人而言，我会使用：

```
let objectKeysToLowerCase = function (origObj) {
    return Object.keys(origObj).reduce(function (newObj, key) {
        let val = origObj[key];
        let newVal = (typeof val === 'object') ? objectKeysToLowerCase(val) : val;
        newObj[key.toLowerCase()] = newVal;
        return newObj;
    }, {});
} 
```

它简洁，重复处理嵌套对象并返回一个新对象而不是修改原始对象。

在我有限的本地测试中，这个函数比当前列出的其他递归解决方案更快（一旦修复）。我很想将它与其他人进行基准测试，但 jsperf 目前处于下降状态（？？？）。

它也是用 ES5.1 编写的，所以根据 MDN 上的文档，它应该可以在 FF 4+、Chrome 5+、IE 9.0+、Opera 12+、Safari 5+（所以，几乎所有东西）中工作。

*   [对象.keys()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)
*   [大批。原型.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)

Vanilla JS 获胜。

我不会太担心这一切的垃圾收集方面。一旦对旧对象的所有引用都被销毁，它将成为 GC，但*新*对象仍将基本上引用它的所有属性，因此它们不会。

任何函数、数组或正则表达式都将通过引用被“复制”。在内存方面，即使是字符串也不会被这个过程复制，因为大多数（所有？）现代 JS 引擎都使用[string interning](https://en.wikipedia.org/wiki/String_interning)。我认为只剩下构成原始结构的数字、布尔值和对象留给 GC 处理。

请注意，如果原始具有多个具有相同小写表示的属性，则此过程的（所有实现）将丢失值。IE：

```
let myObj = { xx: 'There', xX: 'can be', Xx: 'only', XX: 'one!' };
console.log(myObj);
// { xx: 'There', xX: 'can be', Xx: 'only', XX: 'one!' }

let newObj = objectKeysToLowerCase(myObj);
console.log(newObj);
// { xx: 'one!' } 
```

当然，有时这正是您想要的。

**2018-07-17 更新**

一些人注意到原始函数不适用于数组。这是一个扩展的、更有弹性的版本。如果初始值是数组或简单值，它会通过数组正确递归并工作：

```
let objectKeysToLowerCase = function (input) {
    if (typeof input !== 'object') return input;
    if (Array.isArray(input)) return input.map(objectKeysToLowerCase);
    return Object.keys(input).reduce(function (newObj, key) {
        let val = input[key];
        let newVal = (typeof val === 'object') && val !== null ? objectKeysToLowerCase(val) : val;
        newObj[key.toLowerCase()] = newVal;
        return newObj;
    }, {});
}; 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2019-03-04T14:39:19.390

# 使用`Object.fromEntries`（ES10）

使用新[`Object.fromEntries`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries)方法的本机和不可变解决方案：

```
 const newObj = Object.fromEntries(
  Object.entries(obj).map(([k, v]) => [k.toLowerCase(), v])
); 
```

在该函数[被广泛使用](https://caniuse.com/#feat=mdn-javascript_builtins_object_fromentries)之前，您可以使用以下[polyfill](https://github.com/feross/fromentries)自己定义它：

```
Object.fromEntries = arr => Object.assign({}, ...Array.from(arr, ([k, v]) => ({[k]: v}) )); 
```

一件好事是这个方法做的相反[`Object.entries`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)，所以现在你可以在对象和数组表示之间来回切换。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-07-29T05:26:27.000

ES6 版本：

```
Object.keys(source)
  .reduce((destination, key) => {
    destination[key.toLowerCase()] = source[key];
    return destination;
  }, {}); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-04-07T16:31:50.280

loDash/fp 方式，非常好，因为它本质上是一个内衬

```
import {
mapKeys
} from 'lodash/fp'

export function lowerCaseObjectKeys (value) {
return mapKeys(k => k.toLowerCase(), value)
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-09-22T01:13:08.880

在我的测试中使用 forEach 似乎要快一些 - 并且原始参考已消失，因此删除新参考将使 gc 可以访问

```
function keysToLowerCase(obj){
    Object.keys(obj).forEach(function (key) {
        var k = key.toLowerCase();

        if (k !== key) {
            obj[k] = obj[key];
            delete obj[key];
        }
    });
    return (obj);
} 
```

**var O={一：1，二：2，三：3，四：4，五：5，六：{a：1，b：2，c：3，D：4，E：5}}；keysToLowerCase(O);**

/* 返回值：（对象）*/

```
{
    five:5,
    four:4,
    one:1,
    six:{
        a:1,
        b:2,
        c:3,
        D:4,
        E:5
    },
    three:3,
    two:2
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-03-26T08:59:48.087

这是将所有 json 键转换为小写的最简单解决方案。

```
let o = {"Account_Number   ":"0102301", "customer_NaME":"name"}

o = Object.keys(o).reduce((c, k) => (c[k.toLowerCase().trim()] = o[k], c), {})

console.log(o) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-10-21T08:24:46.967

我使用了 ES6 和 TypeScript。 `toLowerCaseObject`函数将数组作为参数并递归地查看对象树并使每个节点小写：

```
function toLowerCaseObject(items: any[]) {
        return items.map(x => {
            let lowerCasedObject = {}
                for (let i in x) {
                    if (x.hasOwnProperty(i)) {
                        lowerCased[i.toLowerCase()] = x[i] instanceof Array ? toLowerCaseObject(x[i]) : x[i];
                    }
            }
            return lowerCasedObject;
        });
    } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-11-02T00:21:09.937

### 简化答案

对于简单的情况，您可以使用以下示例将所有键转换为小写：

```
Object.keys(example).forEach(key => {
  const value = example[key];
  delete example[key];
  example[key.toLowerCase()] = value;
}); 
```

[`toUpperCase()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase)您可以使用代替将所有键转换为大写[`toLowerCase()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toLowerCase)：

```
Object.keys(example).forEach(key => {
  const value = example[key];
  delete example[key];
  example[key.toUpperCase()] = value;
}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-12-01T21:49:30.767

单线（仅适用于顶级键）：

```
Object.assign(...Object.keys(obj).map(key => ({[key.toLowerCase()]: obj[key]}))) 
```

转换：

```
{ a: 1, B: 2, C: { Z: 4 } } 
```

到：

```
{ a: 1, b: 2, c: { Z: 4 } } 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-10-27T15:53:09.707

使用打字稿

```
/**
 * Lowercase the keys of an object
 * @example
  lowercaseKeys({FOO: true, bAr: false}); // {foo: true, bar: false}
 */
export function lowercaseKeys<T>(object: { [key: string]: T }): { [key: string]: T } {
  const result: { [key: string]: T } = {};

  for (const [key, value] of Object.entries(object)) {
    result[key.toLowerCase()] = value;
  }

  return result;
} 
```

用法

```
lowercaseKeys({FOO: true, bAr: false}); // {foo: true, bar: false} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-08-14T16:21:02.820

这不是最干净的方法，但它对我的团队有用，所以值得分享。

我创建了这个方法，因为我们的后端正在运行一种不区分大小写的语言，并且数据库和后端会产生不同的关键情况。对我们来说，它完美无缺。请注意，我们将日期作为字符串发送，我们不发送函数。

我们已将其简化为这一行。

```
const toLowerCase = (data) => JSON.parse(JSON.stringify(data).replace(/"([^"]+)":/g, ($0, key) => '"' + key.toString().toLowerCase() + '":')) 
```

我们使用该`JSON.parse(JSON.stringify(obj))`方法克隆对象。这将生成 JSON 格式的对象的字符串版本。虽然对象是字符串形式，但您可以使用正则表达式，因为 JSON 是一种可预测的格式来转换所有键。

拆开是这样的。

```
const toLowerCase = function (data) {
  return JSON.parse(JSON.stringify(data)
   .replace(/"([^"]+)":/g, ($0, key) => {
     return '"' + key.toString().toLowerCase() + '":'
   }))
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-08-17T12:52:30.770

```
const keysToLowerCase = object => {
  return Object.keys(object).reduce((acc, key) => {
    let val = object[key];
    if (typeof val === 'object') {
      val = keysToLowerCase(val);
    }
    acc[key.toLowerCase()] = val;
    return acc;
  }, {});
}; 
```

适用于嵌套对象。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-09-22T00:30:29.177

考虑只小写一次，将其存储在`lowKey`var 中：

```
function keysToLowerCase (obj) {
  var keys = Object.keys(obj);
  var n = keys.length;
  var lowKey;
  while (n--) {
    var key = keys[n];
    if (key === (lowKey = key.toLowerCase()))
    continue

    obj[lowKey] = obj[key]
    delete obj[key]

  }
  return (obj);
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-07-12T17:12:15.460

这是我基于上述示例之一的递归版本。

```
//updated function
var lowerObjKeys = function(obj) {
  Object.keys(obj).forEach(function(key) {
    var k = key.toLowerCase();
    if (k != key) {
      var v = obj[key]
      obj[k] = v;
      delete obj[key];

      if (typeof v == 'object') {
        lowerObjKeys(v);
      }
    }
  });

  return obj;
}

//plumbing
console = {
  _createConsole: function() {
    var pre = document.createElement('pre');
    pre.setAttribute('id', 'console');
    document.body.insertBefore(pre, document.body.firstChild);
    return pre;
  },
  info: function(message) {
    var pre = document.getElementById("console") || console._createConsole();
    pre.textContent += ['>', message, '\n'].join(' ');
  }
};

//test case
console.info(JSON.stringify(lowerObjKeys({
  "StackOverflow": "blah",
  "Test": {
    "LULZ": "MEH"
  }
}), true));
```

请注意，它不跟踪循环引用，因此您最终可能会出现无限循环，从而导致堆栈溢出。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-09-01T13:37:41.967

对于所有值：

```
to_lower_case = function(obj) {
    for (var k in obj){
        if (typeof obj[k] == "object" && obj[k] !== null)
            to_lower_case(obj[k]);
        else if(typeof obj[k] == "string") {
            obj[k] = obj[k].toLowerCase();
        }
    }
    return obj;
} 
```

同样可以用于稍作调整的键。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-06-18T08:03:56.727

我就是这样做的。我的输入可以是任何东西，它通过嵌套对象和对象数组回避。

```
const fixKeys = input => Array.isArray(input)
  ? input.map(fixKeys)
  : typeof input === 'object'
  ? Object.keys(input).reduce((acc, elem) => {
      acc[elem.toLowerCase()] = fixKeys(input[elem])
      return acc
    }, {})
  : input 
```

使用 mocha 测试

```
const { expect } = require('chai')

const fixKeys = require('../../../src/utils/fixKeys')

describe('utils/fixKeys', () => {
  const original = {
    Some: 'data',
    With: {
      Nested: 'data'
    },
    And: [
      'an',
      'array',
      'of',
      'strings'
    ],
    AsWellAs: [
      { An: 'array of objects' }
    ]
  }

  const expected = {
    some: 'data',
    with: {
      nested: 'data'
    },
    and: [
      'an',
      'array',
      'of',
      'strings'
    ],
    aswellas: [{ an: 'array of objects' }]
  }

  let result

  before(() => {
    result = fixKeys(original)
  })

  it('left the original untouched', () => {
    expect(original).not.to.deep.equal(expected)
  })

  it('fixed the keys', () => {
    expect(result).to.deep.equal(expected)
  })
}) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-07-28T03:16:01.597

```
var aa = {ID:1,NAME:'Guvaliour'};
var bb= {};
var cc = Object.keys(aa);
cc.forEach(element=>{
 bb[element.toLowerCase()]=aa[element];
});
cosole.log(bb) 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-07-01T06:00:19.777

下面的代码将所有键转换为小写

```
array.forEach(item=>{

          let data = Object.keys(item).reduce((result, p) => (result[p.toLowerCase().trim()] = item[p], result), {})

          if(data.hasOwnProperty(fieldname)){
              if(data[fieldname]){
                if(!response['data'].includes(data[fieldname].toLowerCase()))
                    response['data'].push(data[fieldname]) 

             }
           }

        }) 
```

# ruby - 如何摆脱 ruby 的警告：已经初始化的常量

> ID：12539575
> 
> 赞同：4
> 
> 时间：2012-09-22T00:00:28.390
> 
> 标签：ruby, xml-rpc

我正在尝试动态地重新定义 gem 的常量，所以我不需要修改 gem 本身。

```
require 'xmlrpc/client'

XMLRPC::Config.const_set("ENABLE_NIL_PARSER", true)

warning: already initialized constant ENABLE_NIL_PARSER 
```

是否有可能摆脱警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T07:38:29.643

简单的方法：

```
v, $VERBOSE = $VERBOSE, nil
# code goes here
$VERBOSE = v 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T22:40:28.637

你甚至可以将它包裹在一个块中，像这样

```
def ignoring_warnings(&block)
  begin
    v, $VERBOSE = $VERBOSE, nil
    block.call if block
  ensure
    $VERBOSE = v
  end
end 
```

# asp.net - Ajax TabContainer“无可用源”错误消息

> ID：12539578
> 
> 赞同：0
> 
> 时间：2012-09-22T00:01:04.473
> 
> 标签：asp.net, ajax, vb.net

我正在使用 Ajax TabContainer 处理网页，并尝试显示 DB2 数据库查询的结果。我收到以下错误消息，但不确定这意味着什么或如何解决它。我在 Visual Studio 中成功安装了 Ajax，我从中进行调试。页面已加载到可以输入数据的程度，因此我还可以看到选项卡容器正常工作。任何帮助，将不胜感激。

```
No Source Available
The source code cannot be displayed. 
```

调用堆栈位置：

```
AjaxControlToolkit.DLL!AjaxToolkit.ScriptControlBase.OnPreRender(System.EventArgs e) Line 271

Locating source for 'c:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ScriptControlBase.cs'. Checksum: MD5 {96 b3 2 f1 ca 17 5a 39 6e 7 1f c6 68 2f e2 bf}
The file 'c:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ScriptControlBase.cs' does not exist.
Looking in script documents for 'c:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ScriptControlBase.cs'...
Looking in the projects for 'c:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ScriptControlBase.cs'.
The file was not found in a project.
Looking in directory 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\crt\src\'...
Looking in directory 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\mfc\'...
Looking in directory 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\atl\'...
Looking in directory 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\'...
The debug source files settings for the active solution indicate that the debugger will not ask the user to find the file: c:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ScriptControlBase.cs.
The debugger could not locate the source file 'c:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ScriptControlBase.cs'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:44:15.257

我不知道是什么导致了这种情况发生，但我不得不重新安装 Ajax Control ToolKit。这解决了问题。

# c++ - 从 C++11 智能指针继承并覆盖相对运算符是否可以？

> ID：12539581
> 
> 赞同：20
> 
> 时间：2012-09-22T00:01:38.660
> 
> 标签：c++, inheritance, c++11, operator-overloading, smart-pointers

根据[cppreference.com](http://en.cppreference.com/w/cpp/memory/shared_ptr)，`std::shared_ptr`提供了一整套相对运算符（==、!=、<、...），但没有指定比较的语义。我假设他们将底层原始指针与引用的对象进行比较，并且 std::weak_ptr 和 std::unique_ptr 也这样做。

出于某些目的，我更喜欢使用相对运算符来根据比较引用的对象（而不是指向它们的指针）对智能指针进行排序。这已经是我经常做的事情，但是使用我自己的“哑指针”，除了相对运算符之外，它们的行为大多类似于原始指针。我也想用标准的 C++11 智能指针做同样的事情。所以...

1.  从 C++11 智能指针（shared_ptr、weak_ptr 和 unique_ptr）继承并覆盖相对运算符是否可以？

2.  有什么我需要注意的偷偷摸摸的问题吗？例如，我需要实施或使用任何其他方法`using`来确保一切正常吗？

3.  对于最终的懒惰，是否有可用的库模板可以自动为我执行此操作？

我希望这是一个“你当然可以做到，白痴！” 有点像，但我有点不确定，因为标准库中有一些类（`std::map`至少像容器）是你不应该继承的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T02:39:30.883

正如其他人已经指出的那样，第一件事是继承不是要走的路。但不是接受的答案建议的复杂包装，我会做一些更简单的事情：为自己的类型实现自己的比较器：

```
namespace myns {
struct mytype {
   int value;
};
bool operator<( mytype const& lhs, mytype const& rhs ) {
   return lhs.value < rhs.value;
}
bool operator<( std::shared_ptr<mytype> const & lhs, std::shared_ptr<mytype> const & rhs )
{
   // Handle the possibility that the pointers might be NULL!!!
   // ... then ...
   return *lhs < *rhs;
}
} 
```

魔术，这根本不是魔术，是 Argument Dependent Lookup（又名 Koening Lookup 或 ADL）*。*当编译器遇到函数调用时，它将添加参数的名称空间以进行查找。如果对象是模板的实例化，那么编译器还将添加用于实例化模板的类型的命名空间。所以在：

```
int main() {
   std::shared_ptr<myns::mytype> a, b;
   if ( a < b ) {                       // [1]
      std::cout << "less\n";
   } else {
      std::cout << "more\n";
   }
} 
```

在 [1] 中，因为`a`和`b`是*用户定义类型* ^((*))的对象， ADL 将启动并将两者都添加`std`到 `myns`查找集中。然后它将找到`operator<`for的标准定义`std::shared_ptr`是：

```
template<class T, class U>
bool std::operator<(shared_ptr<T> const& a, shared_ptr<U> const& b) noexcept; 
```

它还将添加`myns`并添加：

```
bool myns::operator<( mytype const& lhs, mytype const& rhs ); 
```

然后，在查找完成后，重载解析开始，它将确定`myns::operator<`比`std::operator<`调用更好的匹配，因为它是完美匹配，在这种情况下，非模板优先。然后它将调用您自己的`operator<`而不是标准的。

如果您的类型实际上是模板，这会变得更加复杂，如果是，请发表评论，我将扩展答案。

* * *

^((*))这是一个轻微的简化。因为`operator<`既可以作为成员函数也可以作为自由函数实现，编译器将在内部检查`std::shared_ptr<>`成员`operator<`（标准中不存在）和朋友。它还将在内部`mytype`寻找`friend`功能......等等。但最终它会找到正确的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-22T00:14:18.020

一般来说，从析构函数不是动态的东西继承是不安全的。它可以并且经常进行，您只需要非常小心。我不会从指针继承，而是使用组合，特别是因为成员的数量相对较少。您也许可以为此创建一个模板类

```
template<class pointer_type>
class relative_ptr {
public:
    typedef typename std::pointer_traits<pointer_type>::pointer pointer;
    typedef typename std::pointer_traits<pointer_type>::element_type element_type;
    relative_ptr():ptr() {}
    template<class U>
    relative_ptr(U&& u):ptr(std::forward<U>(u)) {}
    relative_ptr(relative_ptr<pointer>&& rhs):ptr(std::move(rhs.ptr)) {}
    relative_ptr(const relative_ptr<pointer>& rhs):ptr(std::move(rhs.ptr)) {}

    void swap (relative_ptr<pointer>& rhs) {ptr.swap(rhs.ptr);}
    pointer release() {return ptr.release();}
    void reset(pointer p = pointer()) {ptr.reset(p);}
    pointer get() const {return ptr.get();}
    element_type& operator*() const {return *ptr;}
    const pointer_type& operator->() const {return ptr;}

    friend bool operator< (const relative_ptr& khs, const relative_ptr& rhs) const 
    {return std::less<element>(*lhs,*rhs);}
    friend bool operator<=(const relative_ptr& khs, const relative_ptr& rhs) const 
    {return std::less_equal<element>(*lhs,*rhs);}
    friend bool operator> (const relative_ptr& khs, const relative_ptr& rhs) const 
    {return std::greater<element>(*lhs,*rhs);}
    friend bool operator>=(const relative_ptr& khs, const relative_ptr& rhs) const 
    {return std::greater_equal<element>(*lhs,*rhs);}
    friend bool operator==(const relative_ptr& khs, const relative_ptr& rhs) const 
    {return *lhs==*rhs;}
    friend bool operator!=(const relative_ptr& khs, const relative_ptr& rhs) const 
    {return *lhs!=*rhs;}
protected:
    pointer_type ptr;
}; 
```

显然，包装器的简单性将您降低到智能指针的最低公分母，但无论如何。它们并不复杂，您可以为每个智能指针类制作一个。

我将提供一个我不喜欢这种`==`工作方式的警告，因为它可能会为两个指向不同对象的指针返回 true。但是无所谓。我也没有测试过代码，它可能会在某些任务中失败，比如当它包含一个 unique_ptr 时尝试复制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-22T01:35:42.140

从任何支持赋值和复制构造的类继承都是危险的，因为由于意外地将派生类实例分配给基类变量而将其切成两半的风险。这会影响大多数类，并且几乎不可能防止，因此需要类的用户在复制实例时保持警惕。

因此，旨在用作基础的类通常不应该支持复制。当需要复制时，他们应该提供类似的东西`Derived* clone() const override`。

您尝试解决的问题可能最好通过保持原样并在使用此类指针时提供自定义比较器来解决。

```
std::vector<std::shared_ptr<int>> ii = …;
std::sort(begin(ii), end(ii),
          [](const std::shared_ptr<int>& a, const std::shared_ptr<int>& b) {
              return *a < *b;
          }); 
```

# jquery - 第一次尝试在 jQuery Autocomplete 中更改响应项的 renderItem 出现问题

> ID：12539583
> 
> 赞同：0
> 
> 时间：2012-09-22T00:02:01.797
> 
> 标签：jquery, autocomplete

我已经阅读了一堆关于使用 _renderItem 修改自动完成下拉响应的 SO 答案，并从中复制了一些代码。但它不起作用，我不知道为什么。

下面的代码是一个简化的概念测试。当输入某些大城市时，我想更改城市响应（来自 geonames.org）并提供该城市的行政区/区域的响应。概念测试只是将“New York”更改为“Bronx, New York, Bronx County, New York”，并带有用于 Bronx 和现有数据元素的文本字符串。这最终会变得更加复杂，但我只想先了解基础知识。

Geonames.org 在输入前几个字母时会提供“纽约”，但不会发生覆盖更改，并且不会触发警报。我也收到 Firebug 错误 - ReferenceError: item is not defined }).data("item.autocomplete", item)._renderItem= 虽然我在很多示例中看​​到 .data("item.autocomplete", item)，但这个产生一个错误，当我修改更改时，错误只会改变。这里有些东西我不明白。至少出现 2 个症状 - Firebug 未定义错误，以及 if 语句未执行的事实。

代码如下。应该改变什么？

```
$("#city3").autocomplete({
    source: function (request, response){
        //some lines omitted
        $.ajax(
            success: function (data){
                response( $.map(data.geonames, function (item){
                    return {
                        label: item.name + (item.adminName2 ? ", " + item.adminName2 : "") + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                        value: item.name + (item.adminName2 ? ", " + item.adminName2 : "") + (item.adminName1 ? ", " + item.adminName1 : ""),
                        county: item.adminName2
                        }
                    }));
            }
        //some lines omitted
}).data("item.autocomplete", item)._renderItem=
    function(ul,item){
    //simple test
        if(item.label=="New York"){
            alert("NYC triggered");
            var replaceItem = $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a>"+"Bronx"+item.label+"Bronx County"+item.adminName1+"</a>");
                return replaceItem.appendTo(ul);
        }else{
        return item.label;
        }
    }; 
```

# c++ - 如何将二进制数据写入压缩文件

> ID：12539585
> 
> 赞同：1
> 
> 时间：2012-09-22T00:02:36.563
> 
> 标签：c++, zlib, data-compression, bzip2, boost-iostreams

我有一些用 C++ 处理的财务数据。我以简单的二进制格式存储它，因为它需要更少的资源并且速度很快，但是我想对文件添加压缩。我猜我将受到 IO 限制，因此压缩在处理速度方面不会花费我太多。

我不知道如何进行压缩，因为我是一名学者而不是真正的程序员。我真的可以用一些手握住这个。

```
I have my data in a structure like this:

  struct TradesBin {
    int ttim;
    int prc;
    int siz;
    short int g127;
    short int corr;
    char cond[2];
    char ex[1];
}__attribute__((packed)); 
```

我可以将其写入二进制文件，如下所示：

```
ofstream fout(outfile.c_str(), ios::out | ios::binary);
fout.write((char *) &tbin, sizeof(TradesBin)); 
```

其中 tbin 填充了 TradesBin 数据。

我现在如何向这些文件添加压缩？我只模糊地听说过 ZLO、Bzip2、zlib 和 Boost.IOStreams。非常感谢您的指导和建议！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:08:57.617

Zlib 允许你这样做，但它只提供一个普通的 C 接口。简而言之，你做到了

```
gzFile fp = gzopen(fname.c_str(),"wb");
gzwrite(fp, (void*) (&vec[0]), sizeof(TradesBin)*nelem);
gzclose(fp); 
```

`vec`例如`std::vector<TradesBin>`，您的`TradesBin`结构在哪里。

# ios - ShareKit 插件不工作 - Cordova 1.9 & ShareKit 2.0 & ShareKit js 插件 & Xcode 4.4

> ID：12539590
> 
> 赞同：2
> 
> 时间：2012-09-22T00:03:39.083
> 
> 标签：ios, cordova, phonegap-plugins, sharekit

我已将 Xcode 4.4、Phonegap 升级到 Cordova 1.9 并安装了 Sharekit 2.0，但我无法让 ShareKit 工作。在升级之前，ShareKit v.021 工作正常 - 除了旧版本的已知问题

我按照[WIKI](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)安装了 ShareKit 2.0 。然后我按照这些说明更新了 ShareKit[**插件**](https://github.com/photokandyStudios/phonegap-plugins/blob/9ba2cbea3dd7a514bf571e2d9d4f15783780d3f3/iOS/ShareKitPlugin/README.md)

我的 ios 应用程序完全是 html、css 和 js。我使用以下命令通过 javascript 调用 ShareKit：

> shareToFacebook(msg, url) 和 shareToTwitter(msg, url)

在模拟器中，我收到以下错误，我不知道如何修复它。我继承了这个项目，我是新手，所以我有点盲目。

**2012-09-21 16:38:29.744 mcs[3976:17603]****+[SHK sharersDictionary] 中的断言失败，/Users/Main/Documents/ShareKit/ShareKit/Classes/ShareKit/Core/SHK.m:528* **

 ** ***2012-09-21 16:38:29.745 mcs[3976:17603]****WebKit 在 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate:ShareKit:You do not have proper set sharersPlistName 中丢弃了一个未捕获的异常*****

 *我的项目中有默认的 SHKSharers.plist，但仍然启用了 9 项服务。我只有 twitter 和 facebook，我得到了同样的错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-24T06:53:49.883

在您的自定义 SHKConfigurator 文件中添加以下内容：

```
- (NSString*)sharersPlistName {
    return @"SHKSharers.plist";
} 
```

SHKSharers.plist 是 ShareKit 自带的默认值。你可以拥有一个自己的。但请确保您在**sharersPlistName**函数中返回您的 plist 名称。**

# android - 自定义 XML 布局编辑器 Android Eclipse

> ID：12539591
> 
> 赞同：1
> 
> 时间：2012-09-22T00:03:57.070
> 
> 标签：android, xml, eclipse

我想知道是否有一种方法可以自定义 Android XML 编辑器，例如使用拖放编辑器；有没有办法在 textviews 中选择预设的文本大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:07:18.267

我不知道在 XML 编辑器中创建预设的方法，但如果您使用[样式和主题](http://developer.android.com/guide/topics/ui/themes.html)，您可以更改 TextView 的默认`textSize`属性和几乎任何其他特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:04:00.730

不，那是不可能的。你想把它们设置成什么？

（请注意，您可以多选所有文本视图，然后转到属性表并在那里设置大小，它将适用于所有。）

# cuda - cudaFree() 是异步的吗？

> ID：12539593
> 
> 赞同：11
> 
> 时间：2012-09-22T00:04:12.117
> 
> 标签：cuda, gpu

我的问题就像标题一样。实际上，我正在寻找一种异步释放设备内存的方法。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T15:26:20.017

`cudaFree()`是同步的。如果你真的希望它是异步的，你可以创建你自己的 CPU 线程，给它一个工作队列，然后注册`cudaFree`来自你的主线程的请求。

也就是说，异步释放似乎是一个奇怪的请求。也许您可以解释为什么您希望它是异步的。您是否希望在触发 CUDA 事件后立即免费发生？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-22T15:09:25.300

cudaFree() 不是异步的。当从主机调用 cudaFree() 时，会在内部调用同步调用。

我不明白您实际上需要异步释放内存。

# r - 为什么在指定自定义线型时有时会在 R 中出现段错误？

> ID：12539594
> 
> 赞同：4
> 
> 时间：2012-09-22T00:04:48.700
> 
> 标签：r, graphics

为什么在 R 中指定自定义线型时会出现 R 崩溃段错误？下面的四种线型实际上是相同的，因为它们以相同的顺序循环通过相同大小的破折号和空格（它们只是从循环中的不同点开始）。

```
plot.new()
abline(0.1,0,lty='28282383') # works
abline(0.2,0,lty='83282823') # works
abline(0.3,0,lty='28238328') # segfault
abline(0.4,0,lty='23832828') # segfault 
```

这是上面两条致命线中第一条的完整错误消息：

```
 *** caught segfault ***
address 0xbf981000, cause 'memory not mapped'
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:38:37.877

看起来像 Cairo 图形设备中的一个错误 - 我在使用默认`X11()`图形设备时崩溃了，但在使用`X11(type="Xlib")`or时却没有`pdf()`。RStudio 可能有效，因为它可能使用自己的方法来捕获图形。

我在 2.15.1-patched 的描述中没有看到任何关于此的内容：

[http://cran.r-project.org/bin/windows/base/NEWS.R-2.15.1patched.html](http://cran.r-project.org/bin/windows/base/NEWS.R-2.15.1patched.html)

所以我尝试了，现在已将其报告为错误：

[https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=15055](https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=15055)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:18:44.443

似乎可以通过 Mac 上的 RStudio 为我工作。什么操作系统？什么版本的R？

```
> plot.new()
> abline(0.1,0,lty='28282383') # works
> abline(0.2,0,lty='83282823') # works
> abline(0.3,0,lty='28238328') # segfault
> abline(0.4,0,lty='23832828') # segfault
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C/en_US.UTF-8/C/C/C/C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] reshape2_1.2.1

loaded via a namespace (and not attached):
[1] plyr_1.7.1    stringr_0.6.1 tools_2.15.0 
```

![在此处输入图像描述](../Images/d7f350a187bb0c3e2a8ca6cff8c1f809.png)

# node.js - Node.js 命令行控制台日志级别

> ID：12539599
> 
> 赞同：13
> 
> 时间：2012-09-22T00:05:50.173
> 
> 标签：node.js, command-line-arguments

从命令行启动节点时如何设置节点的日志级别？我承认，我是 node.js 新手，但正在寻找类似的东西`node myapp.js --loglevel warn`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-29T13:10:33.327

不太可能完全符合您的要求，但您可以通过首先设置 NODE_DEBUG 环境变量在节点内启用调试。

例如`export NODE_DEBUG="net" && node myapp.js`，将为网络相关节点操作提供调试。

[https://github.com/joyent/node/blob/master/lib/net.js#L66](https://github.com/joyent/node/blob/master/lib/net.js#L66)

# python - FacePy Facebook 帖子错误

> ID：12539603
> 
> 赞同：1
> 
> 时间：2012-09-22T00:06:09.517
> 
> 标签：python, django, facebook-graph-api, post

我正在尝试将 Facebook 与 FacePy 集成并得到错误`FacebookError at / No exception supplied`。该请求通过 curl 在命令行上运行，并且实际上在 Facebook 上发布，所以我知道权限和访问令牌是正确的。如果我删除 graph.post 行，则不会引发错误，因此我认为它必须由实际的发布尝试触发。顺便说一句，我正在本地开发。我已经让 django-facebook 在本地工作，所以这应该不是问题。我究竟做错了什么？谢谢

```
from facepy import GraphAPI

@login_required
def index(request):
    proposed_event_list = Event.objects.all().filter(date__gt=datetime.now()).annotate(c=Count('userprofile')).filter(c__lt=4).order_by('date')
    confirmed_event_list = Event.objects.all().filter(date__gt=datetime.now()).annotate(c=Count('userprofile')).filter(c__gt=3).order_by('date')
    past_event_list = Event.objects.all().filter(date__lt=datetime.now()).order_by('date')

    graph = GraphAPI("AAAD392hkaGX0BAP0U1IZClcPh6qZCpIZBqiP5ze3ELZB14ZChropfyWT6OeELgfgYiY929Adi90kgLGXdLQ3qOQM0KsjvQ6S9Q4VbuHXwhAZD")
    graph.post(path="https://graph.facebook.com/426364711649/feed", retry=1, message="Hello")

    context = RequestContext(request)
    context['proposed_event_list'] = proposed_event_list
    context['confirmed_event_list'] = confirmed_event_list
    context['past_event_list'] = past_event_list
    return render_to_response('crewcal.html', context) 
```

错误：

```
FacebookError at /
No exception supplied
Request Method: GET
Request URL:    http://localhost:8000/
Django Version: 1.4.1
Exception Type: FacebookError
Exception Location: /usr/local/lib/python2.7/dist-packages/facepy/graph_api.py in post, line 69
Python Executable:  /usr/bin/python
Python Version: 2.7.3
Python Path:    
['/usr/local/lib/python2.7/dist-packages/requests/packages',
...
 '/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode']
Server time:    Fri, 21 Sep 2012 18:49:11 -0500 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:14:17.700

原来是Facebook权限错误。发现获得正确的权限很棘手。我发现这有助于获得具有最广泛权限的访问令牌：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:09:32.573

请求方法应该是 request.POST 而不是 GET，因为您要发布到 Facebook Graph。

# ios - Xcode 名称问题

> ID：12539609
> 
> 赞同：0
> 
> 时间：2012-09-22T00:08:20.800
> 
> 标签：ios, xcode

我刚刚意识到我已经使用小写名称创建了我的应用程序 ID 包标识符，并且我已经使用相同的名称设置了我的 xcode 项目，但前 2 个字母为大写，例如我的包标识符是这样的

```
com.mysite.my-game 
```

但是我的 xcode 项目名称是...

```
My-Game 
```

所以我认为 xcode 已经使用它来创建我的包标识符，并且包标识符是......

```
com.mysite.My-Game 
```

所以第一个问题是，**这有什么不同吗？**

第二个问题是，如果是，**我如何将 xcode 中的项目名称/捆绑标识符更改为...**

```
my-game 
```

我和app ID版本一样吗？

第三，**游戏在应用商店上线时将显示什么名称**，因为我实际上更喜欢......

```
My-Game 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:15:57.800

> 所以第一个问题是，这有什么不同吗？

是的，它确实。

> 第二个问题是，如果是，我如何将 xcode 中的项目名称/捆绑标识符更改为...

只需编辑您的 info.plist 文件，`Bundle identifier`通过删除默认包含来编辑条目`${PRODUCT_NAME:rfc1034identifier}`并输入您需要的正确条目。

如果您希望让 Xcode 继续生成您的包标识符，请`Product name`在`Packaging`您的`Build Settings`.

> 第三，游戏在应用商店上线时会显示什么名字，因为我实际上更喜欢......

这将在您提交应用程序后确定。您可以在 iTunes Connect 中自由选择任何名称 - 无需将其与 Bundle 名称或 Bundle 标识符相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-16T16:29:44.627

要消除此警告，请编辑 Info.plist 文件，并确保密钥*Bundle creator OS Type 代码*不为空。如果它是空的，你可以使用 ????

# php - 对数据库内容进行编码不起作用

> ID：12539619
> 
> 赞同：3
> 
> 时间：2012-09-22T00:12:18.773
> 
> 标签：php, mysql, html, character-encoding, pdo

我目前遇到一些字符集问题，我自己无法解决。我的问题是，当我使用一些特殊字符时，我只会得到一个“�”

它仅适用于数据库内容 - 因此直接写入我的视图文件中的内容可以正确显示，但是当它来自数据库时，就会出现上述问题。

有谁知道我可能应该寻找什么？目前我自己还没有更多的想法。

## 解决方案

将我的连接线更改为 PDO：

```
self::$_db = new PDO(self::$DB_type .':host='. self::$DB_hostname .';dbname='. self::$DB_database, self::$DB_username, self::$DB_pass ); 
```

只需添加字符集 - 所以连接线如下：

```
$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8');
self::$_db = new PDO(self::$DB_type .':host='. self::$DB_hostname .';dbname='. self::$DB_database, self::$DB_username, self::$DB_pass, $options ); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:19:18.020

尝试将您的数据库编码设置为 UTF-8，对您的 html 代码执行相同操作并将您的 php 文件保存为 UTF-8。

在您的 html 中，在 head 标签内添加以下行：

```
 <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
```

您的数据库应该是 utf8_general_ci，对于 php 文件，请下载一个像 notepad++ 这样的编辑器，然后从菜单编码中选择 UTF_8 without BOOM。

# asp.net - ASP.Net用户控件如何读取子节点

> ID：12539621
> 
> 赞同：0
> 
> 时间：2012-09-22T00:12:39.803
> 
> 标签：asp.net, user-controls

我有一个这样定义的用户控件

```
<%@ Control .....

<Test:MyCustomControl id="xxx" runat="server>
</Test:MyCustomControl> 
```

我想在像这样的页面上使用这个控件

```
<Tag:MyControl runat="server">
  <div>
    my html
  </div>
</Tag... 
```

在我的自定义控件代码隐藏中，我想阅读内部 html 并将其设置为 Test:MyCustomcontrol 的属性

目前我收到一条错误消息，说“...没有属性 div”

我怎样才能做到这一点？

注意：为了澄清，内部 html 可以是任意 html，所以我需要一种方法来读取用户在页面中键入的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:22:15.523

您可以将 div（在服务器上运行）作为 UserControl 的属性公开

在用户控件 html 上：

```
<div id="dvSomething" runat="server"></div> 
```

在您的用户控制代码隐藏“.cs 文件”上：

```
public System.Web.UI.HtmlControls.HtmlGenericControl TheDiv 
{
    get
    {
        return dvSomething;
    }
    set {
        dvSomething = value;
    }
} 
```

在包含用户控件的页面上：

```
WebUserControl11.TheDiv.InnerHtml = "addin something to div from page"; 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T01:54:44.513

如果有人需要不同的解决方案，我将保留另一个问题：

我不确定您的要求，但这里有两个解决方案，我希望这是您想要的：

一个添加控件（您可以顺便添加任何控件，不仅是文本框）和其他纯 html 根据您的描述

```
TextBox txtAdd = new TextBox();
txtAdd.Style.Add("width", "200px");
WebUserControl11.Controls.Add(txtAdd);

TextBox txtRead = (TextBox)WebUserControl11.Controls[1];

((System.Web.UI.HtmlControls.HtmlGenericControl)WebUserControl11.Controls[0]).InnerHtml = "<b>something</b>";
string currentHtml = ((System.Web.UI.HtmlControls.HtmlGenericControl)WebUserControl11.Controls[0]).InnerHtml; 
```

当然，索引会根据用户控件上有多少元素而改变

# javascript - Javascript .on 事件处理程序

> ID：12539623
> 
> 赞同：1
> 
> 时间：2012-09-22T00:13:10.067
> 
> 标签：javascript, jquery

我有以下情况；在我的 js 中，我有一个动态超链接，我需要捕获点击的链接 ID。

```
for (var i = 0; i < neighbor.data[3].length; i++){
    <a class="Chris" name="a" id="+i+" href="Chris">Hi</a>
} 
```

现在我可以得到这个；

```
 parseInt($(this).attr("ID")); 
```

我正在使用它来捕获它；

```
$(document).on("click", "a.a", function(event) {
    event.stopPropagation();
    alert(clickedID);
    clickedID = parseInt($(this).attr("ID"));
}); 
```

现在，我的问题是，每次我点击超链接而不是只有一个 clickedID 时，我每点击一个超链接就有一个。有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:19:43.123

我相信您正在获取每个锚标记，因为您在文档上设置事件，而不是锚标记。试试这个：

```
$('a').on('click',function(event) {
  event.stopPropagation();
  clickedID = parseInt($(this).attr('id'));
  alert(clickedID);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T00:21:50.113

您的 for 循环中有错误。您`id="+i+"`只需将所有锚标签的 ID 设置为，`+i+`因为您没有转义加号和变量 i

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T00:30:56.923

你可以试试这个，`"a.a"`应该是`"a.Chris"`因为`Chris`你没有使用过的类名`a`，`id`应该以非数字字符开头。

```
for (var i = 0; i < neighbor.data[3].length; i++){
    var a='<a class="Chris" name="a" id="id_'+i+'" href="Chris">Hi</a>';
    $('#links').append(a);
}

$("#links").on("click", "a.Chris", function(event) { // You can use $(document).on(...) instead of $("#links").on(...)
    event.preventDefault();
    event.stopPropagation();
    clickedID = parseInt($(this).attr("id").split('_')[1]);
    alert(clickedID);
}); 
```

[**演示**](http://jsfiddle.net/gDGfK/2/)。

# java - 在 Eclipse Android 项目中引用外部项目时出现 Java 运行时错误“NoClassDefFoundError”

> ID：12539624
> 
> 赞同：0
> 
> 时间：2012-09-22T00:13:12.077
> 
> 标签：java, android, jar

我在这个问题上苦苦挣扎了一段时间，我认为是时候呼吁 SO 社区了。

在 Eclipse 中创建一个新的 Android 项目时，我试图引用一个外部项目 [暂时，它是一个带有返回字符串的函数的简单类]。我尝试添加对项目本身的引用，我尝试导出 .JAR 文件 [将其添加到 libs 文件夹中]，但这些解决方案都不起作用，尽管在编译时看到类，在运行时我得到了可怕的NoClassDefFoundError。

因为 JAR 文件同时存在于文件系统和 .classpath 文件中，所以我相信我导出 JAR 的方式可能存在问题。

我不确定为什么它不起作用或将此类 [非 Android] 模块添加到项目中的正确工作流程是什么。任何帮助将不胜感激！

*我在很多 SO 问题中都遇到过这个问题，但我找不到任何可行的解决方案*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:24:32.183

我之前确实遇到过同样的问题。您可以尝试几件事。

确保在您的外部项目的项目属性中，您已在 Android 选项卡中选中“Is Library”。

然后将项目导出为 jar 文件。（确保你不包括实际的java类文件以外的文件。没有AndroidManifest.xml等......）

像以前一样，将 jar 文件包含到“libs”文件夹中的其他项目中。

现在您应该可以从 jar 中引用该类了。

如果这仍然不起作用，您可能有一个排序问题，所以右键单击 jar 文件，然后选择“构建路径”->“添加到构建路径”，然后转到非库项目的项目属性和选择 Java Build Path -> Order and Export 并将 jar 文件移动到列表顶部。

希望这会有所帮助！

干杯

# c# - 如何让怪物左右连续移动C# XNA

> ID：12539626
> 
> 赞同：0
> 
> 时间：2012-09-22T00:13:22.627
> 
> 标签：c#, xna

我正在为我的班级制作我在 XNA 上的第一场比赛。我试图让怪物自动左右移动。我现在总共有4个怪物。我试图让他们在屏幕内向左然后向右移动。

```
 //Monster movements
        for (int i = 0; i < numOfMonster; i++)
        {

            if (destinationMonster[i].X >= screenWidth - 60)
            {
                while(destinationMonster[i].X != -10)
                    moveLeft = true;
            }
            else
            {
                moveRight = true;
            }

            if (moveLeft)
            {
                int temp = destinationMonster[i].X;
                temp = destinationMonster[i].X - monsterSpeed;

                //This prevents the object passing the screen boundary
                if (!(temp < -10))
                {
                    destinationMonster[i].X = temp;
                }

                moveLeft = false;
            }

            if (moveRight)
            {
                int temp = destinationMonster[i].X;
                temp = destinationMonster[i].X + monsterSpeed;

                //This prevents the object passing the screen boundary
                if (!(temp > screenWidth - 50))
                {
                    destinationMonster[i].X = temp;
                }
                moveRight = false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:55:54.047

你的第一个问题是你的`while`陈述，一旦你输入它，你就不会退出，因为你没有改变你的 X 值。如果是我，我会有一个`bool`对应于你的每个怪物的数组变量。一旦怪物达到任一端的范围，我还将更改您的条件以触发布尔值的更改。像这样的东西。

```
if (destinationMonster[i].X >= screenWidth - 60)
{
    moveRight[i] = false ;
}
else if (destinationMonster[i].X <= -10)
{
    moveRight[i] = true ;
} 
```

# python - 在 Pandas 中分配一行

> ID：12539627
> 
> 赞同：3
> 
> 时间：2012-09-22T00:13:26.967
> 
> 标签：python, pandas

我需要`pandas.DataFrame`通过将每个值除以`row.max()`

推荐的方法是什么？

我试过

```
df.xs('rowlabel') /= df.xs('rowlabel').max() 
```

就像我在`numpy`数组上做的那样，但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:40:16.330

单行的语法是：

```
df.ix['rowlabel'] /= df.ix['rowlabel'].max() 
```

如果您希望对数据框中的每一行都执行此操作，则可以使用 apply（使用 axis=1 选择行而不是列）：

```
df.apply(lambda x: x / x.max(), axis=1) 
```

# java - 在eclipse中使用akka jar文件

> ID：12539629
> 
> 赞同：3
> 
> 时间：2012-09-22T00:13:39.193
> 
> 标签：java, eclipse, akka

我想知道是否可以创建 akka 演员

在eclipse java项目中通过导入

akka jar 文件。

谁能告诉它怎么做。

例如首先在 eclipse 中创建一个新项目，然后

在项目中创建一个 akka 演员对象或类

不可能有其他选择

用于在 eclipse java 项目中创建 akka actor

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:52:04.037

试试这个简单的例子。 [http://doc.akka.io/docs/akka/2.0.2/intro/getting-started-first-java.html](http://doc.akka.io/docs/akka/2.0.2/intro/getting-started-first-java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:16:18.747

请参阅此[Akka 文档](http://doc.akka.io/docs/akka/2.0.3/)

# java - Java中的ArrayList，将代码添加到方法中

> ID：12539630
> 
> 赞同：-3
> 
> 时间：2012-09-22T00:13:39.797
> 
> 标签：java, arrays, arraylist

为什么在我的类 ArrayListTest 中的代码末尾出现两个方法标头的编译时错误？

ArrayListTest： http: [//pastebin.com/dUHn9vPr](http://pastebin.com/dUHn9vPr)

学生： http: [//pastebin.com/3Vz1Aytr](http://pastebin.com/3Vz1Aytr)

我在这两行有一个编译器错误：

```
delete(CS242, s3)

replace(CS242, s, s4); 
```

当我尝试运行代码时，它指出：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    The method replace(ArrayList<Student>, Student, Student)in the type ArrayListTest is not applicable for the arguments (List<Student>, Student, Student)
    The method delete(ArrayList<Student>, Student) in the type ArrayListTest is not applicable for the arguments (List<Student>, Student)
        at ArrayListTest.main(ArrayListTest.java:54) 
```

我修复了编译时错误，因为我使用 Eclipse 并且 Eclipse 提供了可用于修复编译时错误的代码选项。我选择“将方法更改为 'replace(ArrayList, Student, Student)' 为 'replace(List, Student, Student)'

虽然它修复了编译时错误，但我不明白为什么我一开始就收到编译时错误以及为什么有效地修复了错误

我真的不知道我需要编写哪些缺失代码来纠正以下这两种方法：

```
public static void replace(List<Student> cS242, Student oldItem,
                Student newItem) {

public static void delete(List<Student> cS242, Student target){ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:24:42.433

那是因为您将您的声明`ArrayList<Student>`为：

```
List<Student> CS242 = new ArrayList<Student>(25); 
```

你的`replace`方法是：

```
public static void replace(ArrayList<Student> aList, Student oldItem, Student newItem) {
} 
```

对于 Java，您将 a 传递`List`给仅适用于`ArrayList`s 的方法。*如果*它允许您这样做，例如，您可以将实现更改为 a `LinkedList<Student>`，但仍将其传递给`replace`不正确的。

要么使用`replace(List<Student>)`，要么声明`CS242`为`ArrayList<Student> CS242`，尽管前者被认为是最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:23:59.830

在粘贴的代码中，这两个方法`replace`并`delete`没有更改为`List<Student>`. 这就是导致编译错误的原因。

它们首先存在，因为在第 9 行中，您正在创建一个 ArrayList 并将其保存在 List 变量中。这很好用，因为 ArrayList 实现了 List，所以每个 ArrayList 也是一个 List。稍后，您尝试使用所述列表调用需要 ArrayList 作为参数的函数。虽然这个特定的 List 也是一个 ArrayList（因为您使用了 ArrayList 构造函数），但并非所有 List 都如此。因此，您必须首先明确地强制转换或将其保存为 ArrayList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T00:24:27.927

该方法`public static void replace(ArrayList<Student> aList, Student oldItem, Student newItem)` 不允许`List<Student>`传入列表类型。

换句话说，第一个参数必须是一个`ArrayList`（或子类）。当您将签名更改为 时`public static void replace(List<Student> aList, Student oldItem, Student newItem)`，类型的参数与预期的参数`CS242`类型匹配。`List<Student>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T01:29:24.063

对于您缺少的两种方法，方法[`List.indexOf()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)和方法[`List.remove()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28java.lang.Object%29)在这里将是无价的。

# c++ - 意外分配

> ID：12539631
> 
> 赞同：2
> 
> 时间：2012-09-22T00:14:17.887
> 
> 标签：c++

我听说一些程序员使用`if(1 == var)`而不是`if(var == 1)`避免意外分配。为什么或在什么情况下会导致意外分配？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T00:19:09.173

问题是如果您输入错误的语句：

```
if (var = 1) 
```

对比

```
if (1 = var) 
```

在第一种情况下，`if`无条件执行之后的代码（不超过编译器的警告，编译器没有义务为您产生警告 - 但好的代码会这样做；如果您没有使用好的编译器， 得到一个！）。在第二种情况下，您在编译时遇到语法错误，因此必须在代码编译之前修复问题。

问题并不总是那么明显：

```
if (var = 0) 
```

当然，从不执行 之后的代码`if`。但通常，您将拥有：

```
if (var = function(arg1, arg2)) 
```

并且不清楚您是打算分配还是比较。您可以通过编写以下代码向编译器和代码阅读器（人类）清楚说明：

```
if ((var = function(arg1, arg2)) != 0) 
```

或者

```
if (var == function(arg1, arg2)) 
```

我不使用“从后到前”比较技术。我不喜欢倒置的条件，因为它们几乎总是对我读“错误”。我没有将 1 与我的变量进行比较；我将我的变量与 1 进行比较。因此，即使在逻辑上`==`运算符是可交换的，我也不认为可交换，而是更喜欢那种“风险更大”的方式。我还没有发现自己经常犯分配与相等错误，以至于问题成为问题。如果我确实犯了错误，编译器会警告我（我会注意警告并修复代码，以免出现问题）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T00:18:56.107

如果您将其输入错误

```
if (var = 1) 
```

这会导致意外的（？）分配。体面的编译器会警告这一点，除非您包含一组额外的括号

```
if ((var = 1)) 
```

让编译器清楚你的意图。

# history - 为什么 Forth 使用 IF 语句 THEN ... 而不是 ENDIF？

> ID：12539634
> 
> 赞同：8
> 
> 时间：2012-09-22T00:14:19.880
> 
> 标签：history, language-design, forth

为什么 Forth 使用 IF 语句 THEN ... 而不是 ENDIF？

我正在实现一个（不符合标准的）Forth 编译器。基本上，对于 IF 语句，Forth 的语法对我来说似乎非常违反直觉。

```
IF ."Statement is true"
ELSE ."Statement is not true"
THEN ."Printed no matter what; 
```

为什么结尾语句是 a `THEN`？这让我的语言读起来非常奇怪。对于我的编译器，我正在考虑将其更改为`ENDIF`读起来更自然的东西。但是，首先使用反向 IF-THEN 语句的理由是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T22:32:24.000

把它想象成，“`IF`就是这样，做这个，`ELSE`做那个......然后`THEN`继续......”

或者更好的是，使用引号（如[Factor](http://factorcode.org/)，[RetroForth](http://retroforth.org/)，...）在这种情况下，它完全是后缀，没有特殊的编译时单词；只是从堆栈中获取地址的常规单词：`[ do this ] [ do that ] if`or `[ do this ] when`or `[ do that ] unless`. 我个人更喜欢这个。

*除了 RE：报价*

以下是[在 RetroForth 中如何编译引文](http://rx-core.org/dev/corpse/article/188)。在我自己的 Forth（编译到我自己的 VM）中，我简单地添加了一条`QUOTE`指令，将下一个地址推入堆栈并跳过 n 字节。n 字节应由`RETURN`指令终止，并且`if`, `when`,`unless`字使用谓词以及前面引号留下的地址；酌情调用。[确实非常简单，并且引用通常为各种美丽的抽象](http://elasticdog.com/2008/12/beginning-factor-shufflers-and-combinators/)打开了大门，而无需考虑堆栈。

# iphone - 如何更改当前的视图控制器？

> ID：12539635
> 
> 赞同：1
> 
> 时间：2012-09-22T00:14:34.820
> 
> 标签：iphone, ios, navigation, storyboard, presentmodalviewcontroller

我有一个登录视图控制器，它向服务器发出请求以进行身份​​验证。一旦成功，我希望当前视图控制器成为我的应用程序的主页选项卡视图控制器。我确实尝试使用 pushViewController:viewController 或 presentModalViewController 或dismissModalViewControllerAnimated。没有任何效果。您可以查看提供的屏幕截图以了解我的应用程序流程。

这是一些示例代码：

```
- (IBAction)facebookLoginButtonClick:(id)sender {

// get the app delegate so that we can access the session property
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

// this button's job is to flip-flop the session from open to closed
if (appDelegate.session.isOpen) {
    // if a user logs out explicitly, we delete any cached token information, and next
    // time they run the applicaiton they will be presented with log in UX again; most
    // users will simply close the app or switch away, without logging out; this will
    // cause the implicit cached-token login to occur on next launch of the application
    [appDelegate.session closeAndClearTokenInformation];

} else {
    if (appDelegate.session.state != FBSessionStateCreated) {
        // Create a new, logged out session.
        appDelegate.session = [[FBSession alloc] init];
    }

    // if the session isn't open, let's open it now and present the login UX to the user
    [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                     FBSessionState status,
                                                     NSError *error) {
        // and here we make sure to update our UX according to the new session state
        [self dismissModalViewControllerAnimated:YES];
        UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle: nil];
        MainViewTabBarController *viewController = (MainViewTabBarController*)[mainStoryboard instantiateViewControllerWithIdentifier: @"mainPageTabBarId"];
        [[self navigationController] presentModalViewController:viewController animated:YES];
    }];
} 
```

}

![在此处输入图像描述](../Images/a224fe8dc09f704e273cc807d31f6737.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:40:01.933

找出解决方案。我应该更改应用程序委托中的 rootViewController，而不是推送模型视图控制器。它运作良好。感谢大家的帮助。

# php - Jquery Ajax url 变量未正确检索

> ID：12539637
> 
> 赞同：-3
> 
> 时间：2012-09-22T00:14:50.070
> 
> 标签：php, javascript, mysql, ajax

```
 $.ajax({
dataType : "html" ,
url: "jquery-loadMoreComments.php?lastComment="+ $(".postedComment:last").attr('id')&"section="+'.$sid.',   
success: function(html) { 
```

我有这个从一个文件到另一个文件的 ajax 请求，我正在像这样在其他文件中检索 url 变量

```
$filtered = filter_input(INPUT_GET, "lastComment", FILTER_SANITIZE_URL);
$filtered1 = filter_input(INPUT_GET, "section", FILTER_SANITIZE_URL); 
```

第一个变量被正确检索，但第二个变量没有进入另一个文件。并由第一个文件从 url 检索，`$sid`然后通过 ajax 发送到第二个文件以继续请求。

我把网址改成了这个

```
 url: "jquery-loadMoreComments.php?lastComment="+ $(".postedComment:last").attr('id'),section: '<?= $sid ; ?>', 
```

然后在第二个 php 文件中检索`$sid`我写的这个

```
$filtered = filter_input(INPUT_GET, "section", FILTER_SANITIZE_URL); 
```

但它仍然没有执行。我认为`$sid`变量没有正确传递。在第一个 php 文件中，我没有编写任何代码来传递变量`$sid`，我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:44:17.130

我怀疑问题`'.$sid'`出在 URL 的末尾。您可能希望将其替换为 PHP 变量，但这看起来不像发生替换的上下文。

要进行替换，您需要回到 PHP 处理模式，例如

```
"&section=<?= $sid ?>", 
```

此外，不要通过连接字符串来构造 URL 参数，而是使用`data:`参数来`$.ajax`提供对象。jQuery 将自动为您构造参数字符串，并使用正确的 URL 编码。所以应该是：

```
$.ajax({
    dataType : "html" ,
    url: "jquery-loadMoreComments.php",
    data: {
        lastComment: $(".postedComment:last").attr("id"),
        section: '<?= $sid ?>'
    },
    success: function(html) { 
```

# php - 单引号拆分我的网址

> ID：12539643
> 
> 赞同：0
> 
> 时间：2012-09-22T00:16:12.470
> 
> 标签：php, quotes, double-quotes

例如，当我点击下面的 url

```
http://mysite.com/?s=Dominos' books 
```

下面的代码有效

```
$param= $_GET['s'];  
$completeurl = 'http://somesite.com/?param1='.trim($param).'&key=987539873'; 
```

所以单引号 (')`$param`拆分了`$completeurl`，我想保持 ' 完整。

尽管我将 $completeurl 中的单引号 (') 替换为双引号 (") 它不起作用。如何防止这种不需要的拆分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:18:47.217

您需要进行 URL 编码。 `"`变成`%22`

```
$completeurl = 'http://somesite.com/?param1=' . urlencode(trim($param)) . '...'; 
```

也可以看看：

*   [http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)
*   [http://www.blooberry.com/indexdot/html/topics/urlencoding.htm#whatwhy](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm#whatwhy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:19:32.010

试试这一行：

```
 $completeurl = 'http://somesite.com/?param1='.str_replace(array("'",' '), '', $param).'&key=987539873'; 
```

或者如果你想保持`'`原样

```
$completeurl = 'http://somesite.com/?param1='.urlencode(trim($param)).'&key=987539873'; 
```

# php - 如何在php中对不同数组中的相同元素求和？

> ID：12539644
> 
> 赞同：1
> 
> 时间：2012-09-22T00:16:12.277
> 
> 标签：php, arrays

我有这样的数组：`array('id'=>value,'id'=>value)`

```
$arrays=array(
    [0] => Array ( [3] => 1, [102] => -1, [15] => 1,)            
    [1] => Array ( [5] => 1, [80] => -1 )                 
    [2] => Array ( [99] => -1, [3] => -1,[5] => 1 ) 
) 
```

我需要得到给定键的总结果。在上面的例子中，如果要求 id 为 3，则 sum 为 0，如果要求 id 为 5，则 sum 为 2。我只能想到这样的事情：

```
 foreach($arrays as $array){
    foreach( $array as $id=>$v){
     if( $id == $asked )
        $total = $total + $v;
    }
  } 
```

不知何故，我想必须有一种有效的方法来完成这项工作。我乐意去学。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:42:17.493

使用[`array_reduce`](http://php.net/manual/en/function.array-reduce.php)：

```
$key = 3;

$sum = array_reduce($arrays, function(&$memo, $item) use($key){

    array_key_exists($key, $item) && $memo += $item[$key];

    return $memo;

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:43:13.030

```
foreach($arrays as $array) {
    $total += $array[$id];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T01:05:03.610

```
 $prec_array=end($arrays);
 foreach($arrays as $array){
    foreach($array as $id=>$v){
     if(array_key_exists($id, $prec_array) )
            $total[$id] += $v + $prec_array[$id] ;
    $prec_array = $array;
    } 
 } 
```

# android - JSOUP解析HTML获取类内的类

> ID：12539647
> 
> 赞同：0
> 
> 时间：2012-09-22T00:17:23.517
> 
> 标签：android, parsing, html-parsing, jsoup

我正在使用 JSOUP 开发 android 应用程序来解析 HTML。

我有 HTML 语法

```
 <div class='wrapper'>   
<div style='margin:7px;'>
    <div class='box' style='height:595px'>
        <div class='boxtitlebox'>
            <div class='boxtitle'><h4>13 RECENT CHORDS</h4></div><div class='clear'></div>
        </div>

        <div class='listitem'><a href='http://www.chordfrenzy.com/chord/9742/ungu-apa-sih-maumu-kord-lirik-lagu'>           
            <div class='subtitle'>Chord Ungu</div>
            <div class='title'>Apa Sih Maumu</div>
        </a></div>
        <div class='listitem'><a href='http://www.chordfrenzy.com/chord/6826/slank-boneka-tersayang-kord-lirik-lagu'>           
            <div class='subtitle'>Chord Slank</div>
            <div class='title'>Boneka Tersayang</div>
        </a></div>
        <div class='listitem'><a href='http://www.chordfrenzy.com/chord/6751/ari-lasso-rayuan-gombal-kord-lirik-lagu'>          
            <div class='subtitle'>Chord Ari Lasso</div>
            <div class='title'>Rayuan Gombal</div>
        </a></div>
        </div>
</div>
 </div> 
```

现在，我很困惑如何获得上面的每个**ahref**、**subtitle**和**title**？

我需要它来像这样填充我的数组

```
String[] link=["http://www.chordfrenzy.com/chord/9742/ungu-apa-sih-maumu-kord-lirik-lagu","http://www.chordfrenzy.com/chord/6826/slank-boneka-tersayang-kord-lirik-lagu","http://www.chordfrenzy.com/chord/6751/ari-lasso-rayuan-gombal-kord-lirik-lagu"];
String[] subtitile=["Chord Ungu","Chord Slank","Chord Ari Lasso"];
String[] title=["Apa Sih Maumu","Boneka Tersayang","Rayuan Gombal"]; 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T16:44:42.637

一般来说，您应该更喜欢[Selector API](http://jsoup.org/cookbook/extracting-data/selector-syntax)而不是 DOM ( `getElementsByX`)

这是一个例子：

```
Document doc = Jsoup.parse(html);

// Links
List<String> links = new ArrayList<>();

for( Element element : doc.select("a[href]") )
{
    links.add(element.attr("href"));
}

// Subtitles
List<String> subtitles = new ArrayList<>();

for( Element element : doc.select("div[class=subtitle]") )
{
    subtitles.add(element.text());
}

// Titles
List<String> titles = new ArrayList<>();

for( Element element : doc.select("div[class=title]") )
{
    titles.add(element.text());
} 
```

元素由标签和属性选择，如果标签不同或不相关，您可以删除它们（例如，`[class=title]`代替`div[class=title]`）。查看 Selector API（上面的链接）以获取更多提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:15:42.380

```
 Document document = Jsoup.parse(html);

         Elements hrefElements = document.select("div.listitem");

         String[] links = new String[hrefElements.size()];
         String[] title = new String[hrefElements.size()];
         String[] subtitle = new String[hrefElements.size()];

         for(int i=0;i<hrefElements.size();i++)
         {
             links[i] = hrefElements.get(i).getElementsByTag("a").attr("href");
             title[i] = hrefElements.get(i).getElementsByClass("title").text();
             subtitle[i] = hrefElements.get(i).getElementsByClass("subtitle").text();
         }

         for(int j=0;j<hrefElements.size();j++)
         {
             System.out.println("Links: "+links[j]);
             System.out.println("Title: "+title[j]);
             System.out.println("SubTitle: "+subtitle[j]);
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:57:52.083

我认为`ArrayList`结构比字符串数组更好

```
Elements links = doc.getElementsByClass("listitem");
Elements subtitles = doc.getElementsByClass("subtitle");
Elements titles = doc.getElementsByClass("title");
List<String> link = new ArrayList<String>();
List<String> subtitile = new ArrayList<String>();
List<String> title = new ArrayList<String>();
for (Element e : links) {
    String href = e.getElementsByAttribute("href").first().attr("href");
    link.add(href);
}
for (Element e : subtitles) {
    String s = e.text();
    subtitile.add(s);
}
for (Element e : titles) {
    String s = e.text();
    title.add(s);
} 
```

# java - 不同步时如何调试Java代码？

> ID：12539649
> 
> 赞同：11
> 
> 时间：2012-09-22T00:18:01.240
> 
> 标签：java, eclipse

我遇到的问题之一是我的 jar 文件和我的源文件不匹配。

我想：

1.  当源代码和二进制文件不匹配时收到通知（我认为 Visual Studio 可以做这样的事情......）
2.  不是按行设置断点，而是按功能设置断点。例如，在函数 foo() 的入口处设置断点。

我主要使用eclipse；所以eclipse的解决方案将非常受欢迎，但任何IDE（或命令行调试器）都可以。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T00:29:19.727

**开发时只需使用并链接到`.class`IDE 保存的文件。**

如果您的项目开始增长到链接到一个非常有用的地步，那么`.jar`您最好将 jar 视为单独的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T05:19:32.797

使用[方法断点](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-set_method_breakpoints.htm)而不是行断点。可以将它们设置为在进入/退出方法时停止。您可以通过双击包含方法声明的行中的左侧编辑器来获取它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-05T06:28:08.903

转到 Eclipse 中的项目选项卡，然后

*   点击清理：项目->清理...</li>
*   点击自动构建：项目->自动构建

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T01:34:28.443

调试信息仅限于源文件中的行号...我同意警告行错误会很好，但这需要 jar 中的元数据比我认为可用的更多...

您可能需要考虑通过更改构建过程来应对挑战。这并不能完全回答您的问题，但希望它能为您提供解决潜在问题的策略。

当您生成用于部署的 jar 时，还要使用二进制 AND 源生成一个 jar。要调查实时服务器上堆栈跟踪的源代码，请在 eclipse 中设置一个单独的项目，并将二进制 + 源 jar 放在类路径中。您可能必须将源代码位置显式设置回同一个 jar（尽管我认为 Eclipse 会自动执行此操作）。

然后，您只需在进行部署时将二进制 + 源 jar 的副本添加到工作区中的适当位置（最好使用部署脚本）。

如果它是您的服务器，您甚至可能需要考虑将二进制 + 源 jar 部署到实时服务器 - 这样您将始终能够获取源。

# java - 如何使用代码设置 Activity 的背景？

> ID：12539651
> 
> 赞同：1
> 
> 时间：2012-09-22T00:18:13.487
> 
> 标签：java, android, eclipse, android-activity

我目前正在使用 XML 布局来设置我的活动背景。我怎样才能在 Java 代码中做到这一点？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="@drawable/bg" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:21:04.773

在调用之前[`Activity.setContentView(View)`](http://developer.android.com/reference/android/app/Activity.html#setContentView%28android.view.View%29)使用[`setBackground...()`](http://developer.android.com/reference/android/view/View.html#setBackground%28android.graphics.drawable.Drawable%29)main 上的一种方法`View`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T00:25:01.543

为您的父 RelativeLayout 设置一个 id 属性。比在活动代码中通过 id 找到它并使用 setBackgroundResource 方法。

# asp.net-mvc - MVC 4 通过两个键显式加载多对多 EF 查找和过滤

> ID：12539654
> 
> 赞同：0
> 
> 时间：2012-09-22T00:18:42.363
> 
> 标签：asp.net-mvc, entity-framework, lambda, fluent

我在 MVC4 应用程序中有以下内容。我想通过两个键过滤负载，可能有很多对很多，但是两个键一起代表一个唯一的行。目标是仅在需要时显式加载这些集合并由关系的双方进行过滤。

我有以下 Entity.DBContext，它适用但仅适用于 UserId 键。

```
context.UserProfiles.Include(o => o.CoachOfOrginizations).Where(p => p.UserId == UserId).Single() 
```

这也会加载所有这些，但当然根本不会过滤，只是向您展示，以便您知道我正确设置了流利的代码。

```
 context.Entry(this).Collection(t => t.AdministratorOfOrginizations).Load();

modelBuilder.Entity<UserProfile>()
                .HasMany(p => p.CoachOfOrginizations)
                .WithMany(t => t.Coaches)
                .Map(mc =>
                {
                    mc.ToTable("OrganizationCoaches");
                    mc.MapLeftKey("UserProfileID");
                    mc.MapRightKey("OrganizationID");
                }); 
```

CoachOfOrginizations 是 UserProfile 上的以下属性。

```
public ICollection<Organization> CoachOfOrginizations { get; set; } 
```

我想要的是根据Organization.ID（另一个键）和当前使用的键p.UserId过滤我原来的.Include。我尝试了以下方法，但它不起作用，有什么建议吗？“this”是 UserProfile 对象。

```
context.Entry(this)
                .Collection(b => b.CoachOfOrginizations)
                .Query()
                .Where(p => p.ID == orgID)
                .Load(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:36:03.413

您可以在单个查询中进行这两种过滤。请参阅[条件包含](http://blogs.msdn.com/b/alexj/archive/2009/10/13/tip-37-how-to-do-a-conditional-include.aspx)。

```
var query = context.UserProfiles
             .Where(p => p.UserId == UserId)
             .Select(p => new { p, Orgs = p.CoachOfOrginizations.Where(o => o.ID == orgID) });

var profiles = query.AsEnumerable().Select(a => a.p); 
```

# heroku - 提交在 Heroku 上运行的 clojure 应用程序时是否有任何停机时间？

> ID：12539657
> 
> 赞同：1
> 
> 时间：2012-09-22T00:18:44.560
> 
> 标签：heroku, clojure

当我提交在 Heroku 上运行的 clojure/Java 应用程序时，是否有任何潜在的停机时间？

我猜不是——但不能确定。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:26:38.237

当你推送到 Heroku 时，你调用了[slug 编译器](https://devcenter.heroku.com/articles/slug-compiler)，它完成了将你的应用程序变成一个独立的存档所需的所有繁重工作。这可能需要一点时间，正如您在运行时看到的那样`git push`。但是，在此期间，您的应用程序运行正常。

当您的 slug 完成编译后，Heroku 会将其推送到测功机网格。这会导致现有的 web dynos 停止并导致新的 web dynos 启动。在旧 dyno 停止和新 dyno 开始服务请求之间，您的应用程序将无响应 - 可能只有几秒钟。在此期间，Heroku 的路由层将对传入的请求进行排队。

TL;DR：当您的应用程序更新时，用户可能会注意到暂停（但不是错误！）。您可以随时通过运行来模拟这一点`heroku restart`。

# mongodb - 仅对 MongoDB 中的部分字段进行索引

> ID：12539664
> 
> 赞同：2
> 
> 时间：2012-09-22T00:19:10.480
> 
> 标签：mongodb, indexing

有没有办法只在 MongoDB 中的部分字段上创建索引，例如前 10 个字符？我找不到它的记录（或在这里询问）。

MySQL 的等价物是`CREATE INDEX part_of_name ON customer (name(10));`.

原因：我有一个包含单个字段的集合，长度从几个字符到 1000 多个字符不等，平均 50 个字符。由于有大约一亿个文档，因此很难将完整的索引放在内存中（根据统计数据，用 8% 的数据进行测试，索引已经是 400MB）。仅对字段的第一部分进行索引将使索引大小减少约 75%。在大多数情况下，搜索词很短，它不是全文搜索。

一种解决方法是为每个项目添加 10 个（小写）字符的第二个字段，对其进行索引，然后如果搜索词超过 10 个字符，则添加逻辑以过滤结果（并且[可能无论如何都需要](https://stackoverflow.com/questions/1863399/mongodb-is-it-possible-to-make-a-case-insensitive-query)额外的字段以用于案例- 不敏感的搜索，除非有人有更好的方法）。不过，这似乎是一种丑陋的方式。

[稍后添加]

我尝试添加第二个字段，其中包含主字段的前 12 个字符，小写。这不是一个很大的成功。

以前，平均对象大小为 50 字节，但我忘了包括 _id 和其他开销，所以我的主要字段长度（只有一个）平均接近 30 字节而不是 50。然后，第二个字段索引包含 _id 和其他开销。

最终结果（对于我的 8% 样本）是主字段上的索引是 415MB，而 12 字节字段上的索引是 330MB - 只节省了 20% 的空间，不值得。我可以复制整个字段（以解决不区分大小写的搜索问题），但实际上我应该重新考虑 MongoDB 是否是适合这项工作的工具（或者只是购买更多内存并使用两倍的磁盘空间）。

[更晚添加]

这是一个典型的文档，包含源字段和简短的小写字段：

```
{ "_id" : ObjectId("505d0e89f56588f20f000041"), "q" : "Continental Airlines", "f" : "continental " } 
```

索引：

```
db.test.ensureIndex({q:1});

db.test.ensureIndex({f:1}); 
```

在较短的字段上工作的“f”索引是“q”索引大小的 80%。我并不是要暗示我在索引中包含了 _id，只是它需要在某个地方使用它来显示索引将指向的位置，因此这是一种开销，可能有助于解释为什么较短的键几乎没有什么区别。

对索引的访问基本上是随机的，没有任何部分比其他任何部分更可能被访问。完整文件的总索引大小可能为 5GB，因此对于该索引来说并不是极端的。为其他搜索案例添加一些其他字段，以及它们的相关索引，以及小写的数据副本，确实开始加起来，并使分页和交换更有可能（它是一个 8GB 服务器），这就是我开始研究更多简洁的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:03:36.543

MongoDB 无法在字段值的一部分上创建索引。正如您所建议的，您最好的方法是创建第二个字段。

由于无论如何您都需要第二个字段来进行有效的不区分大小写的搜索，因此没有理由不创建它。

索引不存储文档的“_id”字段，它们存储一个 DiscLoc 结构，这是一个低级得多的结构：有关详细信息，请参阅此处

*   [http://www.10gen.com/presentations/MongoNYC-2012/storage-engine-internals](http://www.10gen.com/presentations/MongoNYC-2012/storage-engine-internals)

另外，请注意，“丑”实际上是“关系思维”的产物。（作为一个长期使用 SQL 的我自己，我经常发现学习 MongoDB 最难的部分是**不**学习我的关系思维。）在面向文档的数据库中，非规范化和复制数据实际上是最佳实践。

# rest - Shopify REST 集合的排序顺序

> ID：12539676
> 
> 赞同：2
> 
> 时间：2012-09-22T00:22:20.543
> 
> 标签：rest, shopify

试图确定 Shopify 的 REST 集合的排序顺序。具体来说，我目前正在与订单和客户合作。

我发现这个[封闭的线程](http://ecommerce.shopify.com/c/ecommerce-design/t/collections-sort-order-3670)讨论了对集合进行排序的能力，而 API 文档根本没有针对[订单](http://api.shopify.com/order.html)或[客户](http://api.shopify.com/customer.html)提及它。

但是，客户有一个记录在案的搜索 API，它确实有一个订单参数作为选项。我不确定是否可以将其用作常规列表 API 调用的替代品。例如，这似乎无法正常工作 - 它返回多个结果。

```
/admin/customers/search.json?query=&limit=1 
```

订单没有记录在案的搜索端点，但我在点击时确实得到了响应

```
/admin/orders/search.json?query=&limit=1 
```

尽管它与客户搜索端点存在相同的问题。我发现[这个帖子](https://stackoverflow.com/questions/12318899/shopify-api-get-orders-in-shopify-by-date)说订单总是按日期返回最新到最新的 - 并且检查我现在得到的响应*似乎*是真的，尽管我可以发誓我已经看到他们以不同的订单回来了，几乎似乎不确定。

想知道是否确实如此，对于客户也是如此。我似乎让他们退回，`created_at`以便为客户*升序*。总是这样吗？

此外，客户和订单的 ID 似乎不按`created_at`顺序排列，这很奇怪，因为他们的`since_id`几乎所有集合中都有参数（我发现并迅速建立了我的增量拉动策略）。我想我将不得不使用`created_at`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:24:33.850

您链接到的线程（除了非常旧）是指 Collections（带有大写 C），这是 Shopify 中定义产品组的方式（例如鞋子、外套、帽子等）。

如果未提供参数，则您所指的“集合”（客户、产品、订单等）按日期降序（即最新的在前）返回，如果`since_id`提供参数，则按升序返回。请注意，这*应该*与降序的 id 排序相对应，这无论如何都是这个想法，因为它允许您`since_id`正确地使用分页（就像您正在做的那样）。

仔细检查您的订单 ID 是否有问题，如果是，请发布您看到的商店域名以及订单 ID 样本，以便我们进行调查。

# c# - C# 表达式使用什么类型的算法？

> ID：12539679
> 
> 赞同：3
> 
> 时间：2012-09-22T00:23:17.397
> 
> 标签：c#, compiler-construction, expression, postfix-notation

[分流码算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)用于将表达式从中缀转换为后缀表示法（反向波兰表示法），以便编译器更容易评估它们。例如，`2 + 3 * 2`将转换为`2 3 2 * +`. 在[Wikipedia](http://en.wikipedia.org/wiki/Reverse_Polish_notation#Current_implementations)中，提到该算法被许多应用程序使用，包括

> 任何面向堆栈的编程语言，例如：Forth、Factor、PostScript 页面描述语言、Befunge、Joy

我看不到 C# 甚至任何流行的高级语言。那么，C# 是否将这种算法用于表达式？如果不是，C# 编译器如何编译和评估表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T00:53:04.967

是的，C# 被转换为面向堆栈的编程语言[——IL](http://www.c-sharpcorner.com/UploadFile/nrsurapaneni/ILtheLangOfCLRbyNRS12222005040956AM/ILtheLangOfCLRbyNRS.aspx)。当编译器将表达式转换为内部语言时，它会生成一个遵循 RPN 的操作列表。

比如这个方法

```
int x(int a, int b, int c, int d) {
    return a+b*(c+d);
} 
```

被转换为这种内部语言（请参阅评论以了解正在发生的事情）：

```
IL_0001:  ldarg.0 // Push a on the stack
IL_0002:  ldarg.1 // Push b on the stack
IL_0003:  ldarg.2 // Push c on the stack
IL_0004:  ldarg.3 // Push d on the stack
IL_0005:  add     // Add d+c, push the result
IL_0006:  mul     // Multiply (d+c) by b
IL_0007:  add     // Add b*(d+c)+a 
```

正如你所看到的，操作数被压入堆栈的顺序使得通过从表达式的后面到前面的工作可以方便地执行操作 - 正是文章解释它的方式。

转换的确切算法取决于编译器（严格来说，最终结果也取决于编译器，因为有多种方法可以将表达式转换为有效的 RPN 序列），但 RPN 的基本思想就在那里。

# sql-server - 使用用户定义的名称重命名所有约束名称

> ID：12539681
> 
> 赞同：0
> 
> 时间：2012-09-22T00:24:04.347
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

如何在数据库中查询所有类型的约束，例如主键、外键、唯一键和默认约束，并将其系统生成名称重命名为以下格式的名称：

*   PK_ColumnName1_ColumnName2
*   FK_ColumnName1
*   UK_ColumnName1_ColumnName2
*   DF_ColumnName1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:45:12.770

```
SELECT tbl.name TableName, col.name ColName, ck.name ConstraintName, ck.definition ConstraintDefinition  ,' exec sp_rename [' +ck.name + '] , [DF_' + col.name + ']' SqlQuery 
FROM sys.default_constraints ck 
INNER JOIN sys.tables tbl 
on ck.parent_object_id = tbl.object_id
INNER JOIN sys.columns col 
on tbl.object_id = col.object_id 
and ck.parent_column_id = col.column_id 
```

这是默认约束

使用 sys.key_constraints 和 sys.foreign_keys

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:58:34.323

The following code is a little more detailed and it too is specific to default constraints.

```
select      quotename(s.name) + '.' + quotename(o.name) as table_name,
        dc.name as default_name,
        'DF_' + o.name + '_' + c.name as new_default_name,
        'execute sp_rename ''' + quotename(s.name) + '.' + dc.name + ''', ''' + 'DF_' + o.name + '_' + c.name + ''' , ''OBJECT'' -- ' + s.name + '.' + o.name + '' as rename_script
from        sys.default_constraints as dc
join        sys.objects as o
    join        sys.schemas as s
    on          o.schema_id = s.schema_id
on          o.object_id = dc.parent_object_id
join        sys.columns as c
on          o.object_id = c.object_id
and         c.column_id = dc.parent_column_id
where       dc.name like 'DF[_][_]%[_][_]%[_][_]%' -- DF__AlertType__Creat__10F7245D
and         o.type = 'u'
and         o.is_ms_shipped = 0
order by    s.name,
            o.name 
```

# interrupt - VxWorks 如何对中断下半部分进行优先级排序？

> ID：12539687
> 
> 赞同：1
> 
> 时间：2012-09-22T00:24:42.883
> 
> 标签：interrupt, vxworks, rtos, preempt-rt

假设我有两个任务，“A”和“B”，在 SMP 支持的 VxWorks 上执行不同的优先级。“A”和“B”都向 I/O 设备（例如磁盘或 NIC）发出命令，并且都阻塞等待结果。也就是说，“A”和“B”同时被阻塞。一段时间后，I/O 设备引发中断并调用 ISR。然后 ISR 将延迟的工作（也称为“下半部分”）分派给工作任务。问题：worker-task 的优先级是多少？

VxWorks Device Driver Developer's Guide 有点含糊。似乎工作任务的优先级是先验设置的。没有自动继承机制可以根据阻塞等待结果的任务（“A”和“B”）的优先级来增加工作任务的优先级。这类似于 PREEMPT_RT Linux 中线程中断优先级的工作方式。但是，QNX Neutrino 和 LynxOS 都会以被阻塞任务的最高优先级调度工作任务——例如。优先级（工人）= max_priority（A，B）。

谁能澄清一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:38:49.967

这完全取决于“ISR 调度的延迟工作”使用哪种机制。

如果使用信号量/消息队列/事件，则接收任务（A 或 B）将以创建任务时指定的优先级运行。在这种情况下，中断基本完成，任务（A 和/或 B）准备好运行。

无论哪个任务具有最高优先级，都将运行并执行它的工作。请注意，该任务无权访问中断上下文中的任何信息。如果您使用全局结构 (yuk) 或通过消息队列传递数据，则任务可以访问这些元素。

网络堆栈任务 (tNetTask) 使用这种方法，当接收到数据包时，信号量会向 tNetTask 发出信号。当 tNetTask 处理完数据包（数据包重组等）后，它会被转发到在相应套接字上等待的任何任务。

可以将 ISR 的工作推迟到 tExcTask（通过调用 excJobAdd）。请注意，使用这种方法，excJobAdd 获取指向函数的指针并在 tExcTask 的上下文中执行该函数（在系统中处于最高优先级）。它不是一个独立的任务。

请注意，诸如文件系统、SCSI 驱动程序、USB 等之类的东西不仅仅是一个带有中断的简单驱动程序。它们包括许多不同的组件，不幸的是，这些组件也增加了复杂性。

# ruby - 在不删除分隔符的情况下拆分字符串

> ID：12539689
> 
> 赞同：11
> 
> 时间：2012-09-22T00:25:12.180
> 
> 标签：ruby, ruby-on-rails-3

我需要解析一个文件以获取单个 SQL 语句并从 rails 控制器运行它们。

我有以下代码：

```
@sql_file = "#{RAILS_ROOT}/lib/evidence_interface_import.sql"   
@sql_stmts_array = File.read(@sql_file).split(";")  

@sql_stmts_array.each_with_index do |sql_stmt,s_index|
   ActiveRecord::Base.connection.execute(sql_stmt)
end 
```

拆分删除了“;” 从 SQL 的末尾开始。有没有办法不删除“;” 并且仍然使用“;”分割。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-22T01:03:00.157

是的，[`scan`](http://ruby-doc.org/core-1.9.3/String.html#method-i-scan)它：

```
'a; b; c;'.scan(/[^;]*;/)
#=> ["a;", " b;", " c;"] 
```

您可以通过在之后添加来消除多余的空白`map(&:strip)`，但这里可能不需要它。

请注意，这是非常基本的，并且类似于 SQL 中带有分号的字符串文字会破坏它。（例如`select * from stuff where name = ";";`。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-24T08:51:33.537

使用时，`ActiveRecord::Base.connection.execute`您不需要首先包含分号。

此外，另一种在不删除分隔符的情况下进行拆分的方法是使用组，如下例所示：

```
"a;b;c".split(/;/)   # => ["a", "b", "c"]

"a;b;c".split(/(;)/) # => ["a", ";", "b", ";", "c"] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-22T02:53:50.310

使用带有后视功能的正则表达式

```
split(/(?<=;)/) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-11T20:04:36.457

这有效：

```
@sql_stmts_array = File.read(@sql_file).lines(separator=';') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T00:46:20.250

您可以尝试使用`scan`适当的正则表达式，它应该会给您类似的结果`split`，但如果您想坚持不使用正则表达式的方式，您可以在数组中的每个单元格中附加一个分号：

```
@sql_stmts_array = File.read(@sql_file).split(";").each do |s|
  s << ";"
end 
```

# macos - 使用山狮听写

> ID：12539693
> 
> 赞同：4
> 
> 时间：2012-09-22T00:26:19.390
> 
> 标签：macos, cocoa, osx-mountain-lion

如何在我的应用程序中使用 OS X Mountain Lion 听写功能？还是我只能使用`NSSpeechRecognizer`？

# xpages - 为什么从嵌入式视图启动的 Xpage 与从常规视图启动的 Xpage 的行为不同？

> ID：12539695
> 
> 赞同：1
> 
> 时间：2012-09-22T00:26:39.603
> 
> 标签：xpages

我有一个带有嵌入式视图的联系人 xpage，让用户可以添加多个地址。嵌入视图包含在具有两个按钮的自定义控件中：一个用于添加新地址，另一个用于删除选定地址。当我运行它时，它会在嵌入视图中显示与该联系人关联的地址，但是当我尝试打开其中一个地址时，它会显示新地址的地址 xpage，而不是选择的地址。如果我打开一个只包含该嵌入式视图的自定义控件的 xpage 并选择一个地址，它会打开带有所选地址数据的地址 xpage。

“添加新地址”按钮是一个简单的操作，它只是打开文档，但是当在嵌入视图中单击它时，它的作用就像是新文档是选项，而它从常规视图中正确打开。

我想也许程序对数据源感到困惑，但它使用了正确的数据源，只是使用不正确。

有任何想法吗？

乔丹

# iphone - iPhone 5 CSS 媒体查询

> ID：12539697
> 
> 赞同：132
> 
> 时间：2012-09-22T00:27:20.103
> 
> 标签：iphone, css, responsive-design, media-queries, iphone-5

iPhone 5 的屏幕较长，无法捕捉我网站的移动视图。iPhone 5 有哪些新的响应式设计查询，我可以与现有的 iPhone 查询结合使用吗？

我目前的媒体查询是这样的：

```
@media only screen and (max-device-width: 480px) {} 
```

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2012-10-11T20:44:40.153

另一个有用的媒体功能是`device-aspect-ratio`.

请注意，**iPhone 5 没有 16:9 的纵横比**。实际上是 40:71。

iPhone < 5:
`@media screen and (device-aspect-ratio: 2/3) {}`

iphone 5：
`@media screen and (device-aspect-ratio: 40/71) {}`

iPhone 6：
`@media screen and (device-aspect-ratio: 375/667) {}`

iPhone 6 加号：
`@media screen and (device-aspect-ratio: 16/9) {}`

平板电脑：
`@media screen and (device-aspect-ratio: 3/4) {}`

参考：
[媒体查询@W3C](http://www.w3.org/TR/2002/CR-css3-mediaqueries-20020708/)
[iPhone机型比较](https://www.apple.com/iphone/compare/)
[纵横比计算器](http://andrew.hedges.name/experiments/aspect_ratio/)

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-09-22T02:15:41.133

有这个，我归功于[这个博客](http://halgatewood.com/iphone-5-media-query/)：

```
@media only screen and (min-device-width: 560px) and (max-device-width: 1136px) and (-webkit-min-device-pixel-ratio: 2) {
    /* iPhone 5 only */
} 
```

请记住，它会对 iPhone 5 做出反应，而不是对安装在所述设备上的特定 iOS 版本做出反应。

要与现有版本合并，您应该能够用逗号分隔它们：

```
@media only screen and (max-device-width: 480px), only screen and (min-device-width: 560px) and (max-device-width: 1136px) and (-webkit-min-device-pixel-ratio: 2) {
    /* iPhone only */
} 
```

*注意：我没有测试过上面的代码，但我之前测试过逗号分隔的`@media`查询，它们工作得很好。*

**请注意，上述情况可能会影响其他一些具有相似比率的设备，例如 Galaxy Nexus。**这是另一种方法，它只针对一个尺寸为 640 像素（560 像素，由于一些奇怪的显示像素异常）和介于 960 像素（iPhone <5）和 1136 像素（iPhone 5）之间的设备。

```
@media
    only screen and (max-device-width: 1136px) and (min-device-width: 960px) and (max-device-height: 640px) and (min-device-height: 560px),
    only screen and (max-device-height: 1136px) and (min-device-height: 960px) and (max-device-width: 640px) and (min-device-width: 560px) {
    /* iPhone only */
} 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-01-16T17:35:00.687

上面列出的所有这些使用`max-device-width`或`max-device-height`用于媒体查询的答案都存在非常严重的错误：它们还针对**许多其他流行的移动设备**（可能不需要并且从未经过测试，或者将来会投放市场）。

此查询适用于**任何屏幕较小的设备**，并且您的设计可能会被破坏。

结合类似的特定于设备的媒体查询（针对 HTC、三星、iPod、Nexus...），这种做法将发射定时炸弹。对于 debigging，这个想法可以使您的 CSS 成为不受控制的意大利面条。您永远无法测试所有可能的设备。

请注意，唯一**始终以 iPhone5**为目标的媒体查询是：

```
/* iPhone 5 Retina regardless of IOS version */
@media (device-height : 568px) 
   and (device-width : 320px) 
   and (-webkit-min-device-pixel-ratio: 2)
/* and (orientation : todo: you can add orientation or delete this comment)*/ {
                 /*IPhone 5 only CSS here*/
} 
```

请注意，此处检查的是**确切的**宽度和高度，而不是最大宽度。

* * *

现在，解决方案是什么？如果您想编写一个在所有可能的设备上看起来都不错的网页，最好的做法是使用降级

/* 我们只检查屏幕宽度的退化模式，这将改变是从纵向变成横向*/

```
/*css for desktops here*/

@media (max-device-width: 1024px) {
  /*IPad portrait AND netbooks, AND anything with smaller screen*/
  /*make the design flexible if possible */
  /*Structure your code thinking about all devices that go below*/
}
@media (max-device-width: 640px) {
 /*Iphone portrait and smaller*/
}
@media (max-device-width: 540px) {
 /*Smaller and smaller...*/
}
@media (max-device-width: 320px) {
 /*IPhone portrait and smaller. You can probably stop on 320px*/
} 
```

如果您的网站访问者中有超过 30% 来自移动设备，请将此方案颠倒过来，提供移动优先的方法。在这种情况下使用`min-device-width`。这将加快移动浏览器的网页渲染速度。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-10T13:43:34.457

对我来说，完成这项工作的查询是：

```
only screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-23T12:23:15.233

iPhone 5 纵向和横向

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 568px) {

/* styles*/
} 
```

iPhone 5 横屏

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 568px) 
and (orientation : landscape) { 
/* styles*/

} 
```

iPhone 5 纵向

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 568px) 
and (orientation : portrait) { 
 /* styles*/

} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-12-07T10:21:26.633

针对 phonegapp 应用程序的响应均不适用于我。

作为以下[链接](http://zsprawl.com/iOS/2012/09/css-media-queries-for-the-iphone-5/)点，以下解决方案有效。

```
@media screen and (device-height: 568px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 2) {
    // css here
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-12-02T11:48:08.700

只是一个非常快速的补充，因为我一直在测试一些选项，并在此过程中错过了这一点。确保您的页面具有：

```
<meta name="viewport" content="initial-scale=1.0"> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-23T13:55:10.633

您可以在移动设备的媒体功能数据库中轻松获得 iPhone5 以及其他智能手机的答案：

[http://pieroxy.net/blog/2012/10/18/media_features_of_the_most_common_devices.html](http://pieroxy.net/blog/2012/10/18/media_features_of_the_most_common_devices.html)

您甚至可以在同一网站的测试页面上获取自己的设备值。

（免责声明：这是我的网站）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-14T11:16:11.080

afaik 没有 iPhone 使用 1.5 的像素比

iPhone 3G / 3GS: (-webkit-device-pixel-ratio: 1) iPhone 4G / 4GS / 5G: (-webkit-device-pixel-ratio: 2)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-02T15:01:46.733

```
/* iPad */
@media screen and (min-device-width: 768px) {
    /* ipad-portrait */
    @media screen and (max-width: 896px) { 
        .logo{
            display: none !important;
        }
    }
    /* ipad-landscape */
    @media screen and (min-width: 897px) { 

    }
}
/* iPhone */
@media screen and (max-device-width: 480px) {
    /* iphone-portrait */
    @media screen and (max-width: 400px) { 

    }
    /* iphone-landscape */
    @media screen and (min-width: 401px) { 

    }
} 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-09-30T00:54:39.710

您可能应该将“-webkit-min-device-pixel-ratio”降低到 1.5 以捕获所有 iPhone？

```
@media only screen and (max-device-width: 480px), only screen and (min-device-width: 640px) and (max-device-width: 1136px) and (-webkit-min-device-pixel-ratio: 1.5) {
/* iPhone only */
} 
```

# ember.js - 你如何传递 {{#each}} 的迭代索引？

> ID：12539698
> 
> 赞同：1
> 
> 时间：2012-09-22T00:27:29.763
> 
> 标签：ember.js

我有一个要显示的对象网格。网格的每一行显示 4 个对象。根据对象在网格中的位置，我希望某些类位于对象的元素上。例如，网格中的最后一个对象应该具有类“last_in_grid”。此计算取决于数组中对象的索引。

我的模板看起来像：

```
{{#each row in objects}}
    {{#each object in row}}
        {{view MyApp.MyView objectBinding="object"}}
    {{/each}}
{{/each}} 
```

`MyApp.MyView`需要知道`each`助手的迭代索引。

理想情况下，我想要类似的东西：

```
{{#each row in objects}}
    {{#each object in row}}
        {{view MyApp.MyView objectBinding="object" indexBinding="index_of_each_loop"}}
    {{/each}}
{{/each}} 
```

Django 的模板语言可以做到这一点：

```
{% for item in items %}
    {% if forloop.counter0 == 0 %}
        blah blah blah
    {% endif %}
{% endfor %} 
```

[https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for)

这可以使用 Ember 和 Handlebars 吗？

我是否必须编写自定义版本`each`才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:34:10.950

如果您使用 CollectionView，则该集合的项目/视图可以查询它并查看它们是否是最后一个项目。

小提琴：http: [//jsfiddle.net/qKXJt/138/](http://jsfiddle.net/qKXJt/138/)

ArrayController 只是其内容的代理，即 Ember 数组。这意味着您可以获得 Enumerable、Array、MutableArray 等附带的所有好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T02:27:59.077

而不是`{{each}}`助手，您可以使用`{{collection}}`助手来获取当前的迭代索引，如这个小提琴：

[http://jsfiddle.net/secretlm/67GQb/73/](http://jsfiddle.net/secretlm/67GQb/73/)

HTML：

```
{{#collection contentBinding="App.peopleController"}}    
    {{#view App.PersonView personBinding="content" indexParentBinding="contentIndex" }}
        <td>{{indexParent}}</td> 
        <td>{{person.fullName}}</td>            
    {{/view}}
{{/collection}} 
```

Javascript：

```
App = Ember.Application.create();

App.Person = Ember.Object.extend({
    fullName: function() {
        return this.get('firstName') + ' ' + this.get('lastName');
    }.property('firstName', 'lastName') 
});

App.peopleController = Ember.ArrayController.create({
    content: [App.Person.create({ firstName: "Yehuda", lastName: "Katz" }),
    App.Person.create({ firstName: "Tom", lastName: "Dale" })]
});

App.PersonView = Ember.View.extend({
    tagName: 'tr',
    indexParent: null    
});​ 
```

# python - 如何在查询中进行字符串替换？

> ID：12539699
> 
> 赞同：0
> 
> 时间：2012-09-22T00:28:04.617
> 
> 标签：python, sqlalchemy, pyramid

我正在尝试在 Pyramid 中动态生成一些 sqlalchemy 查询。

```
queries=[]
if var1=='1':
  queries.append("Table.name.in_(['Dave'])")
if var2=='2':
  queries.append("Table.last_name.in_(['Thomas'])") 

qq = (','.join(queries))

if len(queries) > 1:
  query = DBSession.query(Table).filter(and_('%s')) % qq
else:
  query = DBSession.query(Table).filter('%s') % qq 
```

我收到一个错误：`"TypeError: unsupported operand type(s) for %: 'Query' and 'str'"` 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:53:11.083

在上述情况下，您传入的字符串似乎不在正确的位置，而是试图将字符串传递给来自`DBSession.query()`. 尝试这个：

```
if len(queries) > 1:
  query = DBSession.query(Table).filter(and_('%s' % qq))
else:
  query = DBSession.query(Table).filter('%s' % qq) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:53:37.470

这一行：

```
DBSession.query(Table).filter(and_('%s')) % qq 
```

将 应用于`% qq`整个结果`filter`- 您只想将其应用于作为参数传入的字符串：

```
DBSession.query(Table).filter(and_('%s' % qq)) 
```

但是这里没有理由使用格式 - 只需直接传递字符串：

```
DBSession.query(Table).filter(and_(qq)) 
```

请注意，如果包含从用户输入生成的任何内容，使用 Python 的字符串格式并*不能*避免潜在的 sql 注入攻击。`qq`

# html - 允许在左下角调整 textarea 的大小

> ID：12539700
> 
> 赞同：6
> 
> 时间：2012-09-22T00:28:21.027
> 
> 标签：html, css

我可以让出现在文本区域（在现代浏览器上）右下角的小尺寸调整小部件出现在左下角吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T05:54:11.243

您可以通过将书写方向设置为从右到左来做到这一点。这意味着默认情况下文本向右对齐，但这很容易被覆盖：

```
textarea { resize: both; direction: rtl; text-align: left; } 
```

还有其他一些您无法覆盖的副作用。垂直滚动条将出现在左侧。光标有时会出现在左侧（在输入方向性中性字符后），当仅键入与中性字符混合的从左到右字符时，即使字符也会出现在右侧 - 尽管方向性中性字符首先出现在左侧（输入“abc (1) x”进行测试，看看我的意思）。

因此，在输入从左到右的文本时，它具有一些奇怪的功能，最好寻找一种不同的方法来解决原始问题（无论是什么让你想将调整大小手柄放在左下角）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T01:39:58.707

CSS3 添加了一个“resize”属性，允许您控制 textarea 是否可调整大小。但据我所知，没有属性可以指定句柄的位置。如果您想要这种级别的控制，您必须自己使用 Javascript 实现小部件（类似于 jQuery 对话框小部件向它创建的 DIV 添加调整大小句柄的方式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:59:13.240

这并不意味着要这样做，因为这样 textareas 的标准将非常不一致，而这正是 W3C 试图避免的。互联网在某些方面应该是一致的，并且 html textarea 元素的大小调整小部件很可能总是在右侧。您可以做的一件事是使用 jQuery 或其他 JavaScript 技术在左下角添加一个调整大小的小部件并覆盖右下角的小部件。

# objective-c - 为什么我的应用检查@property 声明而不是@synthesize？

> ID：12539704
> 
> 赞同：0
> 
> 时间：2012-09-22T00:28:55.217
> 
> 标签：objective-c, xcode4.4

我正在调试我的代码，因为它崩溃了，并且有一种罕见的行为，或者我猜是这样。当必须检查一个变量声明时，调试程序会检查它的@property 声明，而不是@synthesize。这可能是什么原因？这可能是我的应用程序崩溃的原因吗？
更新：
这是我的项目的链接，因为它有点大，只放一点代码是不够的，我认为
[http://dl.dropbox.com/u/63305852/GRP_5。 1.zip](http://dl.dropbox.com/u/63305852/GRP_5.1.zip)

# ruby-on-rails - Rails ActiveRecord Query - 如何为查询中 created_at 字段中的每条记录添加一定的小时偏移量

> ID：12539707
> 
> 赞同：1
> 
> 时间：2012-09-22T00:29:52.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, active-record-query

我需要在 Ruby on Rails 中运行 group_by 查询，但我首先想在运行查询之前将 created_at 列中的所有记录调整一定的小时数。因此，例如，为 created_at 字段中的每条记录添加 9 小时，然后按日期分组。

类似于以下内容（这是不正确的）：

```
 @foo = Bar.group("date(created_at + 9.hours)").count 
```

我怎样才能在 Rails 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T00:37:39.520

PostgreSQL 对操作日期和时间有很好的支持（参见[日期/时间函数和运算符](http://www.postgresql.org/docs/9.2/static/functions-datetime.html)）。您可以将 '9 hours' 表示为 a `interval`，将其添加到 a `timestamp`，然后转换为 a `date`：

```
=> select (now()::timestamp + '9 hours'::interval)::date;
    date    
------------
 2012-09-22
(1 row) 
```

这最终与您的原始伪代码惊人地相似：

```
@foo = Bar.group("date(created_at + '9 hours'::interval)").count 
```

# xml - 替换 .plist 文件中的行以进行修改 - 可能吗？

> ID：12539710
> 
> 赞同：5
> 
> 时间：2012-09-22T00:30:03.643
> 
> 标签：xml, macos, unix, plist

基本上我想知道是否可以创建一个脚本来编辑 .plist 文件中的条目。但是我不想替换特定的字符串，而是整个行，因此可以添加新字符串，因为属性会不断变化。一个例子：

```
<string>Something</string>
<key>SomethingElse</key>
<string>Numbers</string>
<key>Entry</key> 
```

并且将第三行更改为以下内容，无论该行当前说什么。

```
<string>randomstuffhere</string> 
```

我一直在寻找几个小时，我认为使用 sed 可能是可能的，但是在查看示例之后，我似乎无法破译它来自己构建它。任何和所有的帮助表示赞赏。哦，如果可能的话，我想避免使用 perl。

编辑：使用以下内容时，在终端窗口中进行了更改，但似乎没有将其保存到文件中。使用 -i 显然是解决这个问题的方法，但它会给我一个错误，所以我不确定我做错了什么。

```
sed -n '/SomethingElse/{p;n;s/>.*</>randomstuffhere</;};p' my.plist 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T00:49:25.190

使用它可能最容易`defaults`编辑它：

```
defaults write /abs/path/to/plist SomethingElse "randomstuffhere" 
```

请注意，您*必须*提供 plist 文件的绝对路径，并在其文件名中保留“.plist”。

此外（正如评论中所指出的）这倾向于将 plist 文件转换为二进制 plist 格式变体；使用适当的 .plist 阅读框架的程序可以很好地阅读，但它不再是人类可读的。如果您希望它采用 XML 格式变体，您可以使用`plutil -convert xml1 /path/to/plist.plist`.

或者，您可以使用`PlistBuddy`代替`defaults`：

```
/usr/libexec/PlistBuddy -c "Set :SomethingElse 'randomstuffhere'" /path/to/plist.plist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:36:45.143

所以这是你要改变的第三行？

```
 sed -i"" '3{;s\:.*:<string>randomstuffhere</string>:;}' .plist 
```

我认为 osx`sed`支持该`-i`选项，但你必须告诉它不要使用备份扩展来覆盖它。一些 sed 要求 s/// 的初始字符（如果不是“/”）应该被转义，即`\:`. 你可能只需要`:`.

我会像`sed '3{....}' file > newFile`以前一样测试这个文件的内容。并进行测试`-i""`，制作副本。

如果您希望始终更改其中包含数字的行，请使用

```
sed -i"" '\:<string>Numbers.*$:/<string>randomstuffhere</string>:` .plist 
```

IHTH。

# .htaccess - htaccess 脚本，用于现有站点中的干净 url

> ID：12539713
> 
> 赞同：0
> 
> 时间：2012-09-22T00:30:35.517
> 
> 标签：.htaccess, redirect

我需要编写一个 htaccess 脚本来将请求重定向到我网站的各个页面。下面是几个例子——

```
http://mysite.com/index.php to http://mysite.com/index 
```

和

```
http://mysite.com/somefile.php?id=1&value=something to http://mysite.com/somefile/1/something 
```

我可以更改现有链接以进行重定向，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:56:43.277

就像是

```
RewriteEngine On
RewriteBase /
RewriteRule ^([a-z]+)\.php$ $1 [R=301]
RewriteRule ^([a-z]+)\.php\?id=([0-9]+)&[a-z]+=(.*)$ $1/$2/$3 [R=301] 
```

# ruby-on-rails - 使用混合搭配的 Rails 引擎部署 Rails 应用程序

> ID：12539714
> 
> 赞同：1
> 
> 时间：2012-09-22T00:30:52.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-engines

我们正在尝试构建一个由多个 Rails 引擎组成的 Rails 应用程序。每个引擎都提供给定的功能。主要的两个要求是：

1.  我们需要能够自定义部署（混合和匹配 Rails 引擎）这个 Rails 应用到给定的客户端
2.  我们需要能够支持不同版本的 rails 引擎。基本上支持跨不同版本的混搭。

我正在寻求有关真正尝试过的方法的任何建议和建议。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:43:46.107

为此，您至少必须编写自动化脚本（或具有相同效果的东西）以在部署期间动态更改以下位置的代码，

*   宝石文件
*   路线.rb
*   配置/初始化程序
*   任何 Rails 引擎特定逻辑（如果想要设计身份验证，需要添加控制器预过滤器）

我认为拥有一个原型存储库并为每个实例手动调整会更易于维护。如果您没有大量特定于实例的应用程序，这将是有意义的。对于半低的实例量，我认为自动化的弊大于利。

或者，另一种选择可能是包括所有功能以及每个实例的“静音”或“停用”不需要的功能。

# ruby-on-rails - 如何从轮胎 gem 的搜索结果中删除 _source 以进行弹性搜索

> ID：12539721
> 
> 赞同：0
> 
> 时间：2012-09-22T00:33:06.003
> 
> 标签：ruby-on-rails, elasticsearch, tire

我在 Elasticsearch 中索引附件（通过**Tire** gem），它们非常大。无论出于何种原因，我没想到会这样，搜索速度很慢。这似乎是因为**轮胎**(ES) 将整个`_source`文档包含在其搜索结果中。这是不必要的，但我不知道如何关闭它。

直接与 ES 通信可以包含一个`partial_fields`限制它的元素：

```
"partial_fields" : {
  "no_PDFs" : {
    "exclude" : ["attachment", "reports.attachment"]
  }
} 
```

有人知道如何从轮胎搜索中排除元素吗？

```
class Report < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks
  ...
  tire.mapping do
    indexes :id, :type =>'integer'
    indexes :title
    indexes :attachment, :type => 'attachment', 
          :fields => {
          :author     => { :store => 'yes' },
          :attachment => { :term_vector => 'with_positions_offsets', :store => 'yes' },
          :date       => { :store => 'yes' }
    }
  end

  def self.search(params)
    tire.search do 
      query { string params[:query] } if params[:query].present? 
      highlight :attachment 
    end
  end
  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:34:14.383

目前还没有对[`partial_fields`](http://www.elasticsearch.org/guide/reference/api/search/fields.html)Tyre 的直接支持。

`fields`使用搜索方法的选项限制响应：

```
require 'tire'

Tire.index 'bigfields-test' do
  delete and create

  store title: 'Test 1', content: 'x'*100_000
  store title: 'Test 2', content: 'x'*100_000

  refresh
end

s = Tire.search 'bigfields-test', fields: 'title' do
  query { string 'test' }
end

p s.results 
```

# php - 显示模具（）；与表单在同一页面上的消息

> ID：12539723
> 
> 赞同：0
> 
> 时间：2012-09-22T00:33:55.787
> 
> 标签：php, die

请不要说我对 php 不是很好，所以所有的帮助都将不胜感激。

无论如何，我有这个表格：

```
<form method="post" action="mail.php" id="contactform">
    <div class="stage cf">
        <input type="text" name="contactname" id="contactname" placeholder="Name" class="required" role="input" aria-required="true" />
    </div>
    <div class="stage cf">
        <input type="text" name="email" id="useremail" placeholder="Email" class="required email" role="input" aria-required="true" />
    </div>
    <div class="stage cf">
        <input type="text" name="subject" id="subject" placeholder="Subject" class="required" role="input" aria-required="true" />
    </div>
    <div class="stage cf">
        <textarea rows="5" name="message" id="message" placeholder="Message" class="required" role="textbox" aria-required="true"></textarea>
    </div>                                      
        <input type="submit" value="Send Message" name="submit" id="submitButton" title="SendMessage" />
    <div id="response"></div>
</form> 
```

发送表单时，我想在同一页面上显示一条死亡消息。此时的消息显示在另一页上。

我的这个`mail.php`文件块发送邮件：

```
//If there is no error, send the email
if(!isset($hasError)) {
    $emailTo = 'test@randommail.com'; //Put your own email address here
    $body = "Name: $name \n\nEmail: $email \n\nSubject: $subject \n\nComments:\n $comments";
    $headers = "From: $email";

    mail($emailTo, $subject, $body, $headers);
    $emailSent = true;

}
die("<span class='success'>Success! Your message has been sent.</span>"); 
```

这个 Ajax 应该可以解决问题：

```
submitHandler: function(form) {
    $("#send").attr("value", "Sending...");
    $(form).ajaxSubmit({
        success: function(responseText, statusText, xhr, $form) {
            $(form).slideUp("fast");
            $("#response").html(responseText).hide().slideDown("fast");
        }
    });
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:47:33.913

die('string') 意味着，停止运行并转储 'string' 它应该可以工作！

# multithreading - GPU 上的线程和线程组

> ID：12539724
> 
> 赞同：12
> 
> 时间：2012-09-22T00:33:58.960
> 
> 标签：multithreading, gpu, dispatch, directcompute, threadgroup

我想知道我可以在 GPU 上调度的线程/线程组的“网格”。我正在使用 Direct Compute，所以我将给出一个使用该 API 的具体示例。例如，如果我调用 Dispatch(2,2,2)，我理解它总共分派了 2x2x2 = 8 个线程组。但是，如果我调用 Dispatch(8,1,1)，它也调度 8x1x1 = 8 个线程组，有什么区别？有性能差异吗？

PS与GPU上的线程相同的问题。在计算 (.hlsl) 文件中声明的 numthreads(2,2,2) 和 numthreads(8,1,1) 有什么区别？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T00:40:27.693

从纯粹的性能角度来看，实际上并没有区别，因为定义线程组或块的网格维度的能力更多是为了正确地将工作负载应用于问题本身的抽象，而不是为了性能. 换句话说，如果您的问题很好地抽象为 3D 体积网格，那么虽然可以使用将 3D 问题转换为 1D 线性表示的映射来创建相同数量的线程组/块，但该映射的抽象处理起来可能有点麻烦。此外，如果映射过于复杂，可能会对性能造成很小的影响。

您创建的线程组/块的数量以及这些块中的线程数很重要。在 Nvidia GPU 的情况下，每个线程组都分配给 GPU 上的 SMX 处理器，并且需要将多个线程块及其关联线程映射到 SMX，以隐藏由于内存访问等导致的延迟。此外，您希望在线程组/块中有足够的线程，以便您利用 GPU 的 SIMT（相同指令/多线程）功能。这意味着对于 Nvidia GPU 的 SMX 内的每个时钟周期（或一组时钟周期），它可以在锁步中同时执行 X 个线程。这个数字称为“线经”尺寸。你希望块中有足够的线程来填充这个扭曲计数，否则 GPU 的资源' 当块在 GPU 的各个 SMX 处理器上运行时，核心流处理器不会被用完。这个数字是 Nvidia Fermi GPU 上的 32 个线程。在 CUDA 中，您可以根据您正在使用的 GPU 查询此信息，尽管我假设使用 DirectCompute 这将被抽象掉。ATI 卡的流处理器也有一个“线程宽度”，即每个“波前”有 64 个线程。

理想情况下，最后你希望你的块中有足够的线程来填充 GPU 的波前或扭曲大小中的线程数，然后有很多块可以映射到 GPU 上的每个流处理器，这样它们每当遇到高延迟操作时，都可以在流处理器上保持运行并换出。这最大限度地提高了 GPU 的计算带宽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:34:01.610

块可以以 3 维方式排列线程。

让我们举个例子。假设您要调度 32 个线程。这 32 条线可以以 3 维方式排列。想象一下具有 X、Y 和 Z 轴的轴系统。您可以仅将所有 32 个线程与 X 轴一起排列。即 (32,1,1)。或者您可以将它与 X 和 Y 轴一起排列（如 2D 矩阵）（8,4,1），即 8 列，4 行。或者您也可以以 3 维方式排列，(8,2,2) 即 8 列，2 行，宽度为 2（想象一个高度为 8，宽度为 2，长度为 2 的立方体）.. 尝试想象并构建图片你的想法。

# javascript - 禁用/修改 Chrome 开发者工具

> ID：12539726
> 
> 赞同：0
> 
> 时间：2012-09-22T00:35:00.370
> 
> 标签：javascript, html, google-chrome

因此，我参与了为我大学的语言课程开发在线测试工具的项目。我们试图让系统完全基于 HTML/JS/CSS，这样我们就不必处​​理插件和兼容性等问题。目前，我们有考试听力部分的声音文件，我们希望只播放指定的次数。我们有 JS 来阻止明显的愚蠢行为，例如更改`timesPlayed`或直接使用 cURL 或单独的选项卡获取 mp3 文件。然而，Chrome 的开发者工具，虽然对我们开发者来说是无价之宝，但也提供了一种非常简单的方法来获取声音数据：按 f12 并在资源选项卡中找到它，加载并准备好播放。有没有解决的办法？我知道开发者工具是不可能删除的，但是有没有办法（比如）在播放结束后从该选项卡中删除我们的数据，或类似的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:09:52.830

所有主流浏览器（Chrome、Firefox、Opera、Safari 甚至 IE）都有某种开发工具。据我所知，您无法禁用它。

但这是一场你赢不了的战斗。即使您成功地阻止他们在计算机上多次播放文件，您也无法阻止他们从外部重新编码音频（通过将重新编码设备连接到计算机或使用重新编码设备记录出来的内容）从扬声器/耳机）。

我认为尝试混淆它不值得花太多时间。它只会让开发人员和维护人员更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T00:37:48.407

这不仅仅是 Chrome 的问题，Firebug 也会获得该信息。每当用户在线获取资源时，它都会有一个参考链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T00:38:40.813

通常封闭的环境有一个自定义的计算机设置，它会禁用计算机的大部分功能。特别是它还有一个简约的浏览器。

如果您要允许人们使用成熟的浏览器进行访问，您还必须考虑：是否值得花时间通过开发人员工具来访问资源？

# actionscript-3 - 用于手机的 as3 air 应用程序 - 按下按钮后轻微延迟补间

> ID：12539731
> 
> 赞同：0
> 
> 时间：2012-09-22T00:36:43.203
> 
> 标签：actionscript-3, flash

当我按下按钮时，我注意到我的动画略有延迟。音频将尽快响应等。但动画有一两秒的延迟。我在 iPhone 上注意到它更多。

如果我想第一次显示 MovieClip，也会发生这种情况。

如果我这样做 /// 按代码 `addChild(myMC);`，这也会有延迟。

我注意到它通常是鼠标单击事件。 `intro.about.addEventListener(MouseEvent.CLICK, example);`/// 和例子。

这可能是编码问题吗？有没有办法用更紧凑的代码确保更快的动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:55:33.267

一般来说（**这可能不是你的问题**，但很可能是），当使用触摸设备时，容器（在这种情况下是 iOS）会在调度 click/mouseup 事件之前等待一小段时间。它/他们这样做是因为他们需要决定您是否在做手势/滑动。

您可以通过使用`MOUSE_DOWN`事件而不是 来解决此问题`CLICK`，或者更好的是，使用 TOUCH 事件 - 如下所示：

在您的文档类（或任何地方）中，您需要初始化触摸模式。

```
Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT 
```

然后相当于鼠标按下，是touch begin：

```
TouchEvent.TOUCH_BEGIN 
```

鼠标向上的等价物是触摸结束：

```
TouchEvent.TOUCH_END 
```

它们位于以下软件包中：

```
import flash.events.TouchEvent;
import flash.ui.Multitouch;
import flash.ui.MultitouchInputMode; 
```

即使您的问题最终成为其他问题，请不要投反对票，因为它可能对其他搜索类似问题的人有用

# sql - 如何使用 NOT IN 子句添加超过 1000 个值

> ID：12539734
> 
> 赞同：3
> 
> 时间：2012-09-22T00:37:12.710
> 
> 标签：sql, oracle, oracle11g

我想在 NOT IN 子句中使用逗号分隔的 id。我使用的是 oracle 11g。

```
select * from table where ID NOT IN (1,2,3,4,...,1001,1002,...) 
```

结果是

```
ORA-01795: maximum number of expressions in a list is 1000 
```

我不想使用临时表。我正在考虑这样做

```
select * from table1 where ID NOT IN (1,2,3,4,…,1000) AND 
ID NOT IN (1001,1002,…,2000) 
```

这个问题还有其他更好的解决方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T00:47:44.490

你说你不想，但是：使用临时表。这是正确的解决方案。

在 Oracle 中，查询解析是昂贵的，当您将数千个标识符放入一个巨大的 SQL 块中时，您会得到这样的结果。此外，您要达到的查询长度存在[不明确的限制。](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:41742083561301)另一方面，对表执行反联接... Oracle 擅长于此。将数据批量加载到表中，Oracle 也很擅长。使用临时表。

限制`IN`为一千个条目是一个健全性检查。你击中它的事实意味着你正在尝试做一些疯狂的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T10:31:07.500

这太疯狂了。

但是您可能可以尝试从 select 中进行选择：

```
SELECT * FROM
  (SELECT * FROM table WHERE ID NOT IN (1,2,3,4,...,1000))
WHERE ID NOT IN (1001,1002,…,2000) 
```

根据需要制作尽可能多的关卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-01T03:43:59.987

跳出问题了，能不能用这条SQL结合SQL得到1000多个ID。这是简化 SQL 的更好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-28T14:39:21.073

使用`MINUS`，与`UNION相反

```
SELECT * FROM TABLE
MINUS 
SELECT T.* FROM TABLE T,TABLE2 T2 WHERE T.ID = T2.ID 
```

`T`这表示表上没有 id 的寄存器`table2 t2`

# java - 细长的进度条

> ID：12539735
> 
> 赞同：0
> 
> 时间：2012-09-22T00:37:18.903
> 
> 标签：java, android, line, progress

基本上我想要的是一个带有自定义布局的简单进度条，它只是一条 2dp - 3dp 细线，用于显示一些进度（已使用 RAM），如下所示：

[http://www.uiparade.com/portfolio/dark-progress-loader/#](http://www.uiparade.com/portfolio/dark-progress-loader/#)

有人可以推荐我最好的方法吗？

提前致谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:23:55.130

您可以设置自定义可绘制对象和`ProgressBar`. 这是一篇谈论它的帖子，可以展示它是如何完成的，

[ProgressBar/ProgressDialog 的自定义 Drawable](https://stackoverflow.com/questions/2819778/custom-drawable-for-progressbar-progressdialog)

当然，困难的部分是正确设计可绘制对象以获得您想要的外观。留给读者作为练习。

# javascript - 我想知道 js fiddle 如何处理他们关于调整大小和布局的文本区域

> ID：12539741
> 
> 赞同：6
> 
> 时间：2012-09-22T00:37:53.057
> 
> 标签：javascript, html, css, resize, textarea

我想知道网站 jsfiddle.net 是如何处理他们的文本区域的。当您调整一个大小时，其他的会缩小/增大大小。我一直在尝试使用 css 定期执行此操作，但是当我调整一个大小时，另一个 textarea 会在第一个 textarea 下弹出。像这样的东西。

```
|[   ][   ]|
resize work....
|[     ]   |
[] 
```

所以其他文本区域下降。该| ment 是主页的两侧，而 [] 是 textareas。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T03:47:20.677

正如我在 Chrome 检查器中看到的那样，它们首先分为两列，位置：绝对。左边的一个带有“left”css 属性集，右边一个带有“right”css 属性集。

然后每列有两行，它们使用相同的方法，反之亦然（设置了顶部和底部 css 属性）。

然后javascript进来。当拖动手柄时，每列或行对的高度或宽度都会改变以给出相同的总和。

**编辑：**在这里你可以看到一些来自 jsfiddle 的 javascript。

onDrag_horizo​​ntal 调整列的两行大小。它获取手柄 h ( `var top = (h.getPosition(this.content).y + h.getHeight() / 2) / this.content.getHeight() * 100;`) 的位置，然后相应地设置两行的高度

```
var onDrag_horizontal = function(h) {
    var windows = h.getParent().getElements('.window');
    var top = (h.getPosition(this.content).y + h.getHeight() / 2) / this.content.getHeight() * 100;
    windows[0].setStyle('height', top + '%');
    windows[1].setStyle('height', 100 - top + '%');
}.bind(this); 
```

onDrag_vertical 做同样的事情，但使用垂直手柄，它调整两列的大小

```
var onDrag_vertical = function(h) {
    var left = (h.getPosition(this.content).x + h.getWidth() / 2) / this.content.getWidth() * 100;
    this.columns[0].setStyle('width', left + '%');
    this.columns[1].setStyle('width', 100 - left + '%');
}.bind(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:01:08.077

我想我现在可以在你的帮助下解决它，我使用的是相对位置，我应该使用绝对位置，所以 textarea 不会跳下来。我正在使用 jQuery 的可调整大小的 ui，因为基本 javascript 中的 onresize 似乎不适用于其他元素，仅适用于窗口。

基本上使左侧文本区域可调整大小并添加到事件“调整大小”中，只要它可调整大小，其他文本区域的尺寸就会发生变化，例如，

```
$('#rightBox').css('width', totalsize + (ui.originalSize.width - ui.size.width));
$('#rightBox').css('height', totalsize + (ui.originalSize.height- ui.size.height)); 
```

# visual-studio-2012 - Entity Framework 5 安装不正确？

> ID：12539742
> 
> 赞同：0
> 
> 时间：2012-09-22T00:38:05.890
> 
> 标签：visual-studio-2012, entity-framework-5

我刚刚安装了 VS 2012。我创建了一个新项目来执行 Code First。然后我使用 Nuget 将 EF5 添加到项目中，按照这些说明：http: [//msdn.microsoft.com/en-us/data/ee712906](http://msdn.microsoft.com/en-us/data/ee712906)

然后我验证了它的安装：http: [//i1048.photobucket.com/albums/s361/usernames_r_stupid/Nuget_zpse7808c9b.png](http://i1048.photobucket.com/albums/s361/usernames_r_stupid/Nuget_zpse7808c9b.png)

这表明我安装了 EF 5。事实上，我的 App.config 显示：

```
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

但是，如果我通过我的项目查看 System.Data.Entity 程序集引用的属性，它会显示版本 4.0.0.0！ [http://i1048.photobucket.com/albums/s361/usernames_r_stupid/SystemDataProps_zps4a71be1b.png](http://i1048.photobucket.com/albums/s361/usernames_r_stupid/SystemDataProps_zps4a71be1b.png)

我在这里做错了什么？这让我发疯了。

~S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:40:00.383

你应该期待`EntityFramework.dll`. `System.Data`不是 EntityFrakework 程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:09:07.807

Nuget 使用上面提到的 EntityFramework.dll 创建一个包文件夹。我手动引用了它，但它最终告诉我它已经被引用了。一旦我第一次运行我的项目，它就会出现在我的参考文献中。诡异的。System.Data.Entity 不是 EF 4 所在的吗？

# android - Android相机API，HDR照片设置？（三星Galaxy）

> ID：12539743
> 
> 赞同：3
> 
> 时间：2012-09-22T00:38:10.947
> 
> 标签：android, android-camera, galaxy

有谁知道 HDR 逻辑是在相机应用程序中还是在 Android 手机的相机驱动程序中？例如，在三星 Galaxy 上，您可以在默认相机应用程序上启用 HDR 模式，以在照片上捕捉到更大的动态范围。这是由相机应用程序完成的，还是由相机驱动程序/API 完成的？

例如，我可以编写一个可以在 HDR 模式下拍摄的相机应用程序吗？我注意到在相机设置中（如果您将设置展平）有一个名为“hdr-mode”的隐藏设置。我试图设置它，但是当我拍照时它报告了一个错误。

或者，有没有一种方法可以非常快速地捕捉一组具有不同曝光值的照片，以便对 HDR 进行后期处理？我还看到了一个隐藏的设置，比如每快门图片，它似乎允许连拍。但它似乎没有办法进行曝光包围，这是处理 HDR 所必需的。

如果这取决于特定的手机，让我们假设这个例子——我们正在使用 Galaxy S3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:01:53.963

带有 Android 4.2 的公共 API。

在 4.2 中您可以设置[SCENE_MODE_HDR](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#SCENE_MODE_HDR)

```
Camera.Parameters cameraParameters = camera.getParameters();
cameraParameters.setSceneMode(Camera.Parameters.SCENE_MODE_HDR);
camera.setParameters(cameraParameters); 
```

只是猜测，您可以尝试将其设置为字符串。

```
 String android.hardware.Camera.Parameters.SCENE_MODE_HDR = "hdr" 
```

所以在 4.2 之前你可以试试

```
cameraParameters.setSceneMode("hdr"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:30:42.343

它仅在您的设备支持硬件 HDR 时可用。据我所知，硬件 HDR 是由相机供应商实现的，应用程序不需要关心它。

而这个 SCENC_MODE_HDR 是从 android 4.2 引入的。所以在 4.2 之前将场景模式设置为 SCENE_MODE_HDR 没有任何效果。

# model - 将 cakephp 模型加载到相关控制器中

> ID：12539746
> 
> 赞同：0
> 
> 时间：2012-09-22T00:39:11.600
> 
> 标签：model, controller, cakephp-2.0

我有一个 cakephp2 项目，其中我有一个用户和不同的可能角色（管理员、作家、版主）。每个角色都有自己的模型。当用户登录时，我检查用户是否在某个角色中并重定向到该角色的控制器。但我似乎无法加载与用户关联的模型。

```
$user = $this->Auth->user();
if($user['role'] == 'writer'){
  $writer = $this->Writer->findByUser_id($user['id']);
  $writerID = $writer['id'];
  # redirect and such here
} 
```

Cake 在第三行给出了一个错误，说

```
Error: Call to a member function findByUser_id() on a non-object 
```

我在用户模型中有以下内容

```
public $hasOne = 'Writer'; 
```

这在 Writer 模型中

```
public $belongsTo = 'User'; 
```

我知道这一定非常简单，但我似乎无法弄清楚如何将 Writer 模型放入我的控制器中。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:08:09.210

如果您在控制器中使用该查找，那么您将不得不使用链接

```
$this->User->Writer->findByUserId($id); 
```

如果它在模型中，那么您可以使用链接。您可能已经注意到的另一件事是“ **UserId**，它适用于表中的**user_id**。

此外，您可以使用递归或可包含从 Writer 和 Moderator 获取相关结果

如果在用户的控制器中

```
$this->User->Behaviors->attach('Containable');

$this->User->contain(array('Writer'));
//do ur find 
```

作为最佳实践，请尝试将这些发现保留在模型层中。在模型层中，您将从链中跳过模型的名称。

# smlnj - sml 函数中的运行时错误

> ID：12539752
> 
> 赞同：0
> 
> 时间：2012-09-22T00:40:51.703
> 
> 标签：smlnj

我正在用 sml 编写这个函数

```
fun removeNodeswithNoIncoming((x:int,y)::xs,element:int) =
if x=element then 
removeNodeswithNoIncoming (xs , element)
else
(x,y) :: removeNodeswithNoIncoming (xs , element)
| removeNodeswithNoIncoming(nil,element) = nil; 
```

该函数采用元组列表 [(0,0),(0,1)(1,2)] 和另一个元素 0 如果元组的第一个元素与第二个参数相同，则将其从列表中删除对于上面的列表应该是 [(1,2)]

不幸的是，该代码不适用于上述输入。尽管还有其他输入可以使用

```
- removeNodeswithNoIncomingEdge([(0,1),(0,2),(1,2)],0);
stdIn:30.1-30.30 Error: unbound variable or constructor: removeNodeswithNoIncomi
ngEdge
- removeNodeswithNoIncomingEdge([(0,1),(0,2),(1,2),(1,4)],0);
stdIn:1.2-1.31 Error: unbound variable or constructor: removeNodeswithNoIncoming
Edge 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:36:54.840

您的错误消息指的是`removeNodeswithNoIncomingEdge`，但您的函数定义是`removeNodeswithNoIncoming`。

# vim - 将 NERDComenter 切换到基于文件类型的替代值

> ID：12539756
> 
> 赞同：2
> 
> 时间：2012-09-22T00:43:13.010
> 
> 标签：vim, autocmd

我想在 vim 中配置 NERDCommenter 以对某些文件类型使用替代注释样式。这样做的正确方法是什么。我不知道如何从`autocmd`. 我想做的是这样的：

```
autocmd FileType dosbatch :call NERDCommenterAltDelims 
```

以上无法正常工作，但我发现我可以使用以下命令获取函数名称：

```
map <Plug>NERDCommenterAltDelims 
```

返回：

```
:call <SNR>17_SwitchToAlternativeDelimiters(1)<CR> 
```

有没有办法使用map命令来执行map的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:12:59.113

由于只有脚本本地功能，您必须`<Plug>`通过以下方式调用提供的映射`:normal`：

```
:autocmd FileType dosbatch execute "normal \<Plug>NERDCommenterAltDelims" 
```

要禁止显示`Now using ... to delimit comments`消息，请`silent execute`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:24:26.887

或者，您为什么不直接切换文件类型的默认和 alt 定义`dosbatch`，因为 NERDCommenter 提供了这个扩展点。将以下内容放入您的`~/.vimrc`; 它必须在*之前* `plugin/NERDCommenter.vim`执行。

```
let g:NERDCustomDelimiters = {'dosbatch': { 'left': '::', 'leftAlt': 'REM ' }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:11:05.443

基于@ingo-karkat 答案：

```
autocmd FileType dosbatch autocmd VimEnter * execute "normal \<Plug>NERDCommenterAltDelims" 
```

我的 vimscript 技能不存在，所以可能有一种更清洁的方法来做到这一点。随意改进它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T08:29:45.193

似乎现在有一种新的更好的方法可以在我们自己的映射中使用 NERDCommenter 的功能：

```
call NERDComment('n', 'altDelims') 
```

看：

```
:h NERDComNERDComment 
```

# php - MYSQL重复键不起作用

> ID：12539757
> 
> 赞同：0
> 
> 时间：2012-09-22T00:43:40.110
> 
> 标签：php, mysql, duplicates

为什么我的`ON DUPLICATE KEY UPDATE`陈述不起作用，我正在寻求一种在我的表中没有重复项的方法。使用下面的代码，我得到重复

```
CMS::insertQuery("INSERT INTO {table} SET canid=?, categoryid=? ON DUPLICATE KEY UPDATE canid=?, categoryid=?", array($emailCheck['id'], $id, $emailCheck['id'], $id)); 
```

**D B：**

```
CREATE TABLE `table` (  `canid` int(10) NOT NULL,  `categoryid` int(10) NOT NULL,  UNIQUE KEY `canid` (`canid`,`categoryid`)) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

**我正在尝试运行的当前行：**

```
CMS::insertQuery("INSERT INTO {table} SET canid=?, categoryid=? ON DUPLICATE KEY UPDATE canid=?, categoryid=? WHERE canid=?, categoryid=?", array($emailCheck['id'], $id, $emailCheck['id'], $id,$emailCheck['id'],$id)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T00:46:35.160

这只是一个猜测，因为您没有提供您的架构，但是您的唯一键中的列之一是否可以为空？

**编辑：**

正如@G-Nugget 在评论中所说，您需要在相关列上使用唯一键：

> 如果您指定 ON DUPLICATE KEY UPDATE，并且插入的行会导致 UNIQUE 索引或 PRIMARY KEY 中的重复值，MySQL 将对旧行执行 UPDATE。

[http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html)

您需要在应该唯一的列组合上具有唯一键。

例如：

```
ALTER TABLE yourTable ADD UNIQUE KEY (`canid`, `categoryid`); 
```

此外，在询问数据库问题时，请包括有`SHOW CREATE TABLE`问题的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T04:06:04.117

首先要注意，您要检查重复的字段应该是主要的或唯一的。我遇到了同样的问题，现在解决了。

[http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)

# jquery - 如何在 JQuery 中添加 Ruby 代码？

> ID：12539761
> 
> 赞同：0
> 
> 时间：2012-09-22T00:44:29.517
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3

我是新手，在 Ruby 方面的 jQuery 代码经验有限。

如何在 jQuery 中添加 Ruby 代码？

我尝试使用 from _multicourse_meal.html.erb 在 jQuery 中插入部分，如下图粗体所示，这不起作用，除了不能从 meal_(meal) 调用删除方法。如何用 jQuery 做到这一点？

```
$('#new-<%= @multicourse_meal.id %>').before("
<tr id=<%= @meal.id %>>
<td>**<%= link_to '<i class="icon-remove"></i>'.html_safe, meal_path(meal), method: :delete, remote: true %>**(<--ERROR code)<%= meal.title %>
</i> <%= @meal.title %></td>
<td><%= @meal.portion_amt_g %></td>
<td><%= @meal.calories %></td>
<td><%= @meal.carbs_amt_g.round(1) %></td>
<td><%= @meal.protein_amt_g.round(1) %></td>
<td><%= @meal.fat_amt_g.round(1) %></td></tr>") 
```

.

```
application.html.erb in views/layouts

<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= stylesheet_link_tag    "application", media: "all" %>
    <%= javascript_include_tag :defaults, "application" %>
    <%= stylesheet_link_tag "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css" %>
    <%= csrf_meta_tags %>
    <%= render 'layouts/shim' %>    
  </head>
  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <% flash.each do |key, value| %>
        <div class="alert alert-<%= key %>"><%= value %></div>
      <% end %>
      <%= yield %>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html> 
```

.

```
_multicourse_meals.html.erb in views/multicourse_meals

<% @multicourse_meals_for_the_day.each do |multicourse_meal| %>
    <table class="table table-condensed table-striped table-bordered">
        <thead>     
            <tr>
                <th>Meal: <%= multicourse_meal.meal_no %></th>
                <th>Portion Size (ml/g.)</th>
                <th>Calories</th>
                <th>Carbs: (g.)</th>
          <th>Pro: (g.)</th>
          <th>Fat: (g.)</th>
            </tr>
        </thead>
        <tbody>
            <% multicourse_meal.meals.each do |meal| %>
                <tr id="<%= meal.id %>">
                    <td>
                        <%= link_to '<i class="icon-remove"></i>'.html_safe, meal_path(meal), method: :delete, remote: true %>
                        <%= meal.title %>
                    </td>
                    <td><%= meal.portion_amt_g %></td>
                    <td><%= meal.calories %></td>
                    <td><%= meal.carbs_amt_g.round(1) %></td>
                    <td><%= meal.protein_amt_g.round(1) %></td>
                    <td><%= meal.fat_amt_g.round(1) %></td>
                </tr>
            <% end %>
            <tr id="new-<%= multicourse_meal.id %>">
                <td>
                    <%= form_for( @meal, remote: true) do |f| %>
                        <%= f.select :nutrient_id, options_for_select(Nutrient.all.collect { |p| [p.title, p.id]}) %>
                        <%= f.text_field :portion_amt_g, class: "input-mini" %>
                        <%= f.hidden_field :multicourse_meal_id, :value => multicourse_meal.id %>
                        <%= f.submit "Add" %>
                    <% end %>
                </td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <th></th>
            </tr>
            <tr>
                <td></td>
                <th>Target Amount</th>
                <td><%= multicourse_meal.tgt_calories %></td>
                <td><%= multicourse_meal.tgt_carbs_amt_g.round(1) %></td>
                <td><%= multicourse_meal.tgt_protein_amt_g.round(1) %></td>
                <td><%= multicourse_meal.tgt_fat_amt_g.round(1) %></td>
            </tr>
            <tr>
                <td></td>
                <th>Total</th>
                <td id="<%= multicourse_meal.id %>-tot_calories"><%= multicourse_meal.total_calories %></td>
                <td id="<%= multicourse_meal.id %>-tot_carbs"><%= multicourse_meal.total_carbs_amt_g.round(1) %></td>
                <td id="<%= multicourse_meal.id %>-tot_protein"><%= multicourse_meal.total_protein_amt_g.round(1) %></td>
                <td id="<%= multicourse_meal.id %>-tot_fat"><%= multicourse_meal.total_fat_amt_g.round(1) %></td>
            </tr>
        </tbody>
    </table>
<% end %> 
```

.

```
create.js.erb in views/meals

$('#new-<%= @multicourse_meal.id %>').before("<tr id=<%= @meal.id %>><td><i class='icon-remove'></i> <%= @meal.title %></td><td><%= @meal.portion_amt_g %></td><td><%= @meal.calories %></td><td><%= @meal.carbs_amt_g.round(1) %></td><td><%= @meal.protein_amt_g.round(1) %></td><td><%= @meal.fat_amt_g.round(1) %></td></tr>")

    // update multicourse meal view
    $('#<%= @multicourse_meal.id %>-tot_calories').html("<%= @multicourse_meal.total_calories %>")
    $('#<%= @multicourse_meal.id %>-tot_carbs').html("<%= @multicourse_meal.total_carbs_amt_g.round(1) %>")
    $('#<%= @multicourse_meal.id %>-tot_protein').html("<%= @multicourse_meal.total_protein_amt_g.round(1) %>")
    $('#<%= @multicourse_meal.id %>-tot_fat').html("<%= @multicourse_meal.total_fat_amt_g.round(1) %>")

    // update calories Journal view
    $('#meals_mn_ratio').html("<%= @calories_journal.meals_mn_ratio %>");
    $('#cj_total_calories').html("<%= @calories_journal.total_calories %>");
    $('#cj_total_carbs').html("<%= @calories_journal.total_carbs_amt_g.round(1) %>");
    $('#cj_total_pro').html("<%= @calories_journal.total_protein_amt_g.round(1) %>");
    $('#cj_total_fat').html("<%= @calories_journal.total_fat_amt_g.round(1) %>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:22:28.733

我使用 firebug 解决了它，以使 HTML 代码中的服务页面达到峰值，如下所示：

然后将带有少量红宝石的 HTML 代码添加`<%= @meal.id %>`到 jQuery

```
$('#new-<%= @multicourse_meal.id %>').before("
<tr id=<%= @meal.id %>>
**<td><a rel='nofollow' data-remote='true' data-method='delete' href='/meals/<%= @meal.id %>'><i class='icon-remove'></i></a>**
<%= @meal.title %></td>
<td><%= @meal.portion_amt_g %></td>
<td><%= @meal.calories %></td>
<td><%= @meal.carbs_amt_g.round(1) %></td>
<td><%= @meal.protein_amt_g.round(1) %></td>
<td><%= @meal.fat_amt_g.round(1) %></td></tr>") 
```

# cuda - 高分支效率和低控制流效率表明什么？

> ID：12539762
> 
> 赞同：1
> 
> 时间：2012-09-22T00:44:58.750
> 
> 标签：cuda

我使用 Parallel Nsight 2.2 来分析我用 CUDA 4.2 编写的代码。结果是：**分支效率=0.9**，而**控制流执行效率=0.26**。

从用户指南，

```
Branch Efficiency=({Branches} - {Diverged Branches}) / {Branches}
Control Flow Efficiency={Thread Instructions Executed} / {Instructions Executed} / {Warps Size} 
```

我很困惑：更高的分支效率不是意味着有更多的活动线程在一个扭曲中执行相同的指令，因此更高的控制流效率吗？高分支效率和低控制流效率意味着什么？非常感谢您的任何评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T01:00:30.717

**分支效率**是衡量有多少分支分支的指标。100% 表示没有分支分叉。当分支发散时，经线线程活动掩码减少到小于 32，因此执行效率不高。此外，根据分支分支的方式数量，可能必须多次执行分支。

**执行的线程指令**计数以线程为前提。编译器可以使用谓词标志来避免控制流分歧。对于具有执行代码的小条件块的代码，可以看到此计数器为 100%。

**控制流效率**是衡量每条指令有多少线程处于活动状态。除非您启动 32 个线程的非倍数，否则这将是 32 个线程或 100%。如果代码出现分歧，这个数字将小于 100%。

**示例 1**：您每个块启动 32 个线程并且没有分歧分支。

分支效率 = 100% 控制流效率 = 100%

**示例 2**：您每个块启动 1 个线程并且没有分歧分支。

分支效率 = 100% 控制流效率 = 3% (1/32)

**示例 3**：您在每个块中启动 32 个线程，并在第一条指令上以 2 种方式发散（偶数线程去一个方向，奇数线程去另一个方向）并执行发散块直到退出。假设这是唯一的分支。

分支效率 = 0%（在某些设备上可能更高，因为出口被视为分支）控制流效率 = 50%（大部分时间只执行 16 个线程/warp）

# c - 我怎么知道我的映射分配的界限？

> ID：12539763
> 
> 赞同：1
> 
> 时间：2012-09-22T00:45:16.003
> 
> 标签：c, memory, memory-management, malloc, mmap

我正在使用 mmap 创建一个 12 字节的匿名映射（我知道的很小）

```
p = mmap(NULL,
        12,
        PROT_READ| PROT_WRITE,
        MAP_ANONYMOUS | MAP_PRIVATE,
        -1,
        0); 
```

然后我想验证我是否可以写超过这 12 个字节

```
p=p+13;
strcpy(p,str);
printf("String at p is %s\n", ((char *)p)); 
```

果然我可以读写这个区域。我尝试通过将指针增加 20,000 来移动约 5 页。我系统上的页面大小是 4096。我使用 sysconf(_SC_PAGESIZE) 发现了这一点。我仍然可以读写指针

这是怎么回事？我做错了什么还是我还没有达到一些 glibc 限制？

编辑：为了验证，我希望我的代码失败，超出一些限制，我无法意识到那个限制在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:54:36.643

对于小的增量，您只是看到虚拟内存按页面组织这一事实的产物。页大小是可以分配给进程的最小内存增量。

对于较大的增量，您可能只是遇到了为其他目的而分配的页面，例如堆、堆栈或其他文件的映射。

# objective-c-blocks - iOS5 稳定应用程序在 iOS 6 中因 dealloc:objc_storeStrong:objc_release:_dispatch_xref_dispose 崩溃

> ID：12539766
> 
> 赞同：2
> 
> 时间：2012-09-22T00:45:59.393
> 
> 标签：objective-c-blocks, grand-central-dispatch, ios6

[注意：此问答主要针对一小部分使用块和队列的开发人员，他们会遇到无法解释的崩溃。]

我的应用程序使用了一个 dispatchQueue，当它被释放时，我得到了这个奇怪的崩溃：

```
[MyClass dealloc]
objc_storeStrong
objc_release
_dispatch_xref_dispose 
```

我的应用程序在 iOS4.3 和 iOS5.1 中运行良好，f 发生了什么？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T00:45:59.393

事实证明，队列被挂起，其中有一个排队的块。我在挂起队列时设置了一个标志，dispatchQueueResumed，有一个 __block BOOL 变量，表示该块是否应该认为自己被取消，所以我更改了我的 dealloc，如下所示：

```
- (void)dealloc (
    if(!dispatchQueueResumed) {
        dispatchQueueCancel = YES;
        dispatch_resume(dispatchQueue);
        dispatch_group_wait(dispatchQueueGroup, DISPATCH_TIME_FOREVER);
    }
} 
```

# ruby-on-rails - 为什么我的父母回调没有触发？

> ID：12539768
> 
> 赞同：1
> 
> 时间：2012-09-22T00:46:03.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, single-table-inheritance

我在 Rails 应用程序中有以下一对模型。它们是使用[单表继承](http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html)实现的。

```
class Parent < ActiveRecord::Base
  before_save :callback

  private 
  def callback
    puts "executing parent callback"
  end
end

class Child < Parent
  before_save :callback

  private 
  def callback
    puts "executing child callback"
  end
end 
```

每当我保存记录时，我都希望父母`callback`和孩子`callback`都会触发，但我无法让这种行为起作用。目前，当我保存一个孩子时，只有该类中定义的回调运行。

[Rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)说父回调应该在子类被操作时自动触发（参见“可继承回调队列”部分）。这在我的代码中没有发生。

有谁知道为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:03:50.803

你试过这样做吗？方法名称正在相互覆盖。

```
class Parent < ActiveRecord::Base
  before_save :parent_callback

  private 
  def parent_callback
    puts "executing parent callback"
  end
end

class Child < Parent
  before_save :child_callback

  private 
  def child_callback
    puts "executing child callback"
  end
end 
```

# ruby-on-rails - 在布尔字段上添加索引

> ID：12539772
> 
> 赞同：29
> 
> 时间：2012-09-22T00:47:03.740
> 
> 标签：ruby-on-rails, postgresql

我有一个带有我搜索的布尔字段的 Rails 模型（我使用一个范围来查找该字段设置为 true 的所有实例）。我正在使用 Postgres。

我的直觉是在布尔字段上添加一个索引。这是一种好的做法，还是 Postgres 中有一些东西使布尔字段上的索引变得不必要？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-22T00:53:21.130

不，如果您将按布尔字段进行过滤，则可以索引它。这是一件完全合理的事情，尽管与所有索引一样，如果 PostgreSQL 不能排除足够多的表，它可能会选择忽略它——索引扫描加上大量的行提取可能比顺序扫描更昂贵—— - 这可能会或可能不会影响您，具体取决于该列中的值。

您还应该知道 PostgreSQL 允许您对索引设置条件，我经常发现这对布尔字段很有用。（有关详细信息，请参阅[部分索引](http://www.postgresql.org/docs/9.2/static/indexes-partial.html)。）如果您通常在该范围内进行过滤或排序，则最好使用`CREATE INDEX ... ON table (some_field) WHERE boolean_field`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-05-10T22:20:42.527

要在 Rails 迁移中创建部分索引，您可以这样做。在此示例中，模型为`Product`，列为`featured`。

```
class AddFeaturedOnProducts < ActiveRecord::Migration
  def change
    add_index(:products, :featured, where: "featured")
  end
end 
```

# r - 如何处理在R中返回整数（0）的grep失败？

> ID：12539776
> 
> 赞同：12
> 
> 时间：2012-09-22T00:48:43.633
> 
> 标签：r, return-value

在 grep 表达式中，当 grep 的值为 时`integer(0)`，打印“ok”，我该怎么办？

```
> data="haha"
> grep("w",data)
integer(0)
> if (grep("w",data)==0) print ("ok")
Error in if (grep("w", data) == 0) print("ok") : 
  argument is of length zero 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-22T00:53:38.870

您可以使用`length`或`identical`

```
R> if (length(grep("w", data)) == 0) print ("ok")
[1] "ok"

R> if (identical(grep("w", data), integer(0))) print ("ok")
[1] "ok" 
```

您也可以使用`grepl`而不是`grep`

```
R> if (!any(grepl("w", data))) print('ok')
[1] "ok" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T00:54:38.123

而不是`grep`，您可以使用 `grepl`which 返回一个逻辑：

```
> if (grepl("w",data)== FALSE) print ("ok") else print("donkeykong")
[1] "ok"

> if (grepl("h",data)== FALSE) print ("ok") else print("donkeykong")
[1] "donkeykong" 
```

# scala - Scala：类型不匹配；找到：所需单位：布尔

> ID：12539777
> 
> 赞同：16
> 
> 时间：2012-09-22T00:48:46.330
> 
> 标签：scala, syntax

嗨，我只是在尝试我的第一个 scala 并遇到了这个我不明白的错误。我一直在努力解决它，并用尽了我的想法。帮助？

```
scala> def calculate(count: Int) : Boolean =    
     |           if (count<0) false
<console>:8: error: type mismatch;
 found   : Unit
 required: Boolean
                 if (count<0) false
                 ^ 
```

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-22T00:50:23.727

你必须有一个`else`子句，否则类型检查器不知道返回类型是什么，而*不是*`count<0`.

```
def calculate(count: Int): Boolean =    
  if (count<0) false
  else true 
```

或者，更好的是，您根本不需要 if 语句：

```
def calculate(count: Int) = count >= 0 
```

# modal-dialog - JavaFX 2.2 模态窗口对话框 *with* FXML

> ID：12539778
> 
> 赞同：4
> 
> 时间：2012-09-22T00:48:49.437
> 
> 标签：modal-dialog, javafx-2, fxml

我试图[在这个要点](https://gist.github.com/1887631)上使用@jewelsea 提供的示例，但我被卡住了，因为我使用的是 FXML。

我已经看过这两个帖子：[How to create a modal window in JavaFX 2.1](https://stackoverflow.com/questions/10486731/how-to-create-a-modal-window-in-javafx-2-1)和[这个对 JavaFX 2 modal window 的回答](https://stackoverflow.com/a/10494886/492404)。

我被卡住的地方是jewelsea的代码，它说：

```
final WebView webView = new WebView(); 
webView.getEngine().load("http://docs.oracle.com/javafx/");
primaryStage.setScene(new Scene(webView)); 
```

然而，由于我使用的是 FXML，所以我这样做：

```
FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("MyFXML.fxml"));
Scene scene = (Scene)fxmlLoader.load();
myController = fxmlLoader.getController();
primaryStage.setScene(scene); 
```

你能告诉我如何修改我的代码（上面的 4 行），所以它适用于 Jewelsea 的例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T02:05:58.670

您使用的替换代码通过`FXMLLoader`而不是`WebView`创建的场景示例代码很好，您不需要修改它。

您的代码将基于 fxml 文档显示您的主要阶段的主场景（对于我的示例，我使用 WebView 作为我的主场景，您不需要，因此您不需要任何与 WebView 相关的代码要旨）。

您需要的是在您想要显示对话框时控制器中的一些触发器。作为一个简单的示例，您可以为您的主场景设置一个仅包含一个按钮的 fxml，然后为您的控制器中的按钮提供一个 ActionHandler（就像在[FXML 简介](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#controller_method_event_handlers)文档中一样）。

现在，不再像 FXML 简介那样在按下按钮时执行 println，而是`dialog.show()`像加载 WebView 文档时的要点一样调用方法。应该发生的是，对话框现在将显示在您的 fxml 生成的场景之上。

您会注意到对话框本身包含一个场景。如果您愿意（这是可选的），您可以使用 fxml 定义场景内容。为此，在对话构建时，您为对话内容设置了一个新的 fxml 和新的控制器，并将为对话创建的 fxml 场景加载到对话的阶段。执行此操作的代码与您用于将主场景的 fxml 加载到 primaryStage 的代码几乎相同。

试试上面的方法，看看它是否适合你。如果您仍然被卡住，我可能可以按照这个答案的思路创建一个 fxml 特定的要点示例。

另请注意，引用的要点是不久前编写的，JavaFX 中现在有一个[showAndWait](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#showAndWait%28%29)方法，该方法有助于在进行对话框调用时阻止代码执行，然后允许在不使用某些事件处理程序的情况下处理对话框的结果gist 示例中的机制。有和没有 showAndWait 的策略都是完全可以接受的解决方案。

# php - 如何使用 Zend Route Regex 将 url 路由到另一个？

> ID：12539779
> 
> 赞同：0
> 
> 时间：2012-09-22T00:48:53.743
> 
> 标签：php, regex, zend-framework, zend-route

我有一个这样的网址：`view_test.php?user=56`

我想在这里得到它：

```
 $router->addRoute(
        'test',
        new Zend_Controller_Router_Route(
            'test/view/:id',
            array(
                'module' => 'test',
                'controller' => 'index',
                'action' => 'view'
            )
        )
    ); 
```

基本上从`view_test.php?user=56`到`/test/view/56`

我不知道如何处理`?`。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:48:58.713

AFAIK，在路由中，您不能引用 url 的查询字符串内容，只能引用它的请求路径。但您可以执行以下操作：

添加将旧 url 映射到重定向操作的路由：

```
$router->addRoute('view-test-redirect', new Zend_Controller_Router_Route_Static(
    'view_test.php',
    array(
        'module' => 'test',
        'controller' => 'index',
        'action' => 'view-test-redirect',
    )
); 
```

此外，添加代表您的“真实”操作的路线：

```
$router->addRoute('view-test', new Zend_Controller_Router_Route(
    'view/test/:user',
    array(
        'module' => 'test',
        'controller' => 'index',
        'action' => 'view-test',
    )
); 
```

动作名称`view-test-redirect`对应于以下动作：

```
public function viewTestRedirectAction()
{
    $user = (int) $this->_getParam('user', null);
    if (!$user){
        throw new \Exception('Missing user');
    }
    $this->_helper->redirector->goToRouteAndExit(array('user' => $user), 'view-test');
} 
```

然后你的`view-test`动作可以按预期的方式做事：

```
public function viewTestController()
{
    $user = (int) $this->_getParam('user', null);
    if (!$user){
        throw new \Exception('Missing user');
    }
    // Read db, assign results to view, praise unicorns, etc.
} 
```

没有经过测试，只是为了证明这个想法而脑残。

# c# - 检测并发编辑

> ID：12539783
> 
> 赞同：1
> 
> 时间：2012-09-22T00:49:25.697
> 
> 标签：c#, sql-server, linq-to-sql, concurrency

我有 N (>1) 个由负载平衡器管理的 Web 服务器和 1 个 SQL DB 实例作为后端的数据存储。从 DB 中读取数据，用户对其进行编辑，然后将更新的数据发送回 DB。我正在使用 Linq-to-Sql。如果是单台web服务器，LinqToSql提供的并发控制是不错的，但是有了这个设置，检测数据并发编辑的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:18:42.620

[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)应该可以解决问题。对于悲观并发（锁定）和乐观并发。

请参阅[此处](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)以获取明确的示例，并牢记[清楚地确定](https://stackoverflow.com/a/129397/744484)哪种策略更适合您。

# php - 在 While 中使用循环计数器

> ID：12539786
> 
> 赞同：0
> 
> 时间：2012-09-22T00:50:32.633
> 
> 标签：php, mysql, html, css

我有一个从我的表中选择所有用户的查询。然后我的while循环遍历它。如果当前用户是查询行中的用户的好友，则跳过该行数据，如果不是，则显示该行。在显示 3 个成功的行后，如何使这个 while 循环停止？需要明确的是，不能只查询 3 行。

这是我的代码：

```
 $query_know="SELECT * FROM users ORDER BY RAND()";
                $result_know= mysqli_query($connect, $query_know);
                $i= 0;
                    while ($row_know= mysqli_fetch_array($result_know)) {
                        $query_friend_test= "SELECT * FROM relations WHERE user1= '".$user_id."' AND user2= '".$row_know['user_id']."'";
                        $result_friend_test= mysqli_query($connect, $query_friend_test);
                            if (mysqli_num_rows($result_friend_test) > 0) {
                                continue;
                            }
                            else {
            ?>

            <div class="user-mini">
                <div class="user-mini-left">
                </div>
                <div class="user-mini-right">
                        <div class="story-user-mini">
                            <p><a href="<?php echo "profile.php?id=" . $row_know['user_id']; ?>"> <?php echo $row_know['fname'] . " " . $row_know['lname']; ?> </a></p>
                        </div>
                        <div class="story-content-mini">
                            <p> Ohio University </p>
                        </div>
                </div>
            </div>

            <?php
            }
            }

            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:56:12.883

对于`$n`您要显示的任何行数：

```
for($i = 0; $i < $n; $i++) {
    $row_know = mysqli_fetch_array($result_know);

    ... rest of code ...

} 
```

当把它放在一个`for`循环中时，这意味着你只是在做 from `$i = 0`to `$i < $n`，而当你使用`while`循环时，你会一直这样做，直到你在`break`某个地方发出一个语句。如果行数是确定的，您可以使用`for`.

**编辑**：我的意思是说`for`，不是`foreach`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:54:14.480

您可以使用`break`退出 while 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T00:58:20.960

`else`在零件中执行此条件检查并`$i++`在 else {} 内增加

```
 else if($i <=2) {

        ?>

        <div class="user-mini">
            <div class="user-mini-left">
            </div>
            <div class="user-mini-right">
                    <div class="story-user-mini">
                        <p><a href="<?php echo "profile.php?id=" . $row_know['user_id']; ?>"> <?php echo $row_know['fname'] . " " . $row_know['lname']; ?> </a></p>
                    </div>
                    <div class="story-content-mini">
                        <p> Ohio University </p>
                    </div>
            </div>
        </div>
       <?php  $i++;
        }
        } 
```

# sql - Oracle SQL——当一个案例查询变得比运行两个单独的查询更有用时

> ID：12539788
> 
> 赞同：0
> 
> 时间：2012-09-22T00:51:18.417
> 
> 标签：sql, oracle

我有以下查询：

```
--Total DLs--
select sum(DLs) as DLs_Total
From
 (
Select
Count(T.Create_Dtime) As Dls
From Player_Tapjoy T 
Inner Join Player P On T.Player_Id=P.Player_Id
Where P.ReferredBy IS NULL
Union All
Select
Count(Pt.Create_Dtime) As DLs
From Player_Aux_Pt Pt
Inner Join Player P On Pt.Player_Id=P.Player_Id
Where
Pt.Site = 'AppCircle'
And P.ReferredBy IS NULL
) 
```

我将运行此报告两次，一次用于“And P.ReferredBy is Null”，一次用于“And P.ReferredBy is NOT Null”。

我觉得这可能是切换到案例查询的好时机......所以如果在 null 或非 null 的情况下，一个查询会产生两个单独的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:36:10.273

是的，您可以在此处使用案例。我没有测试以下查询，但请检查它是否有效：

```
--Total DLs--
select sum(DLs_ReferredBy_Null) as DLs_ReferredBy_Null_Total, sum(DLs_ReferredBy_NotNull) as DLs_DLs_ReferredBy_NotNull_Total
From
 (
Select
Count(CASE WHEN P.ReferredBy IS NULL THEN T.Create_Dtime END) As DLs_ReferredBy_Null,
Count(CASE WHEN P.ReferredBy IS NOT NULL THEN T.Create_Dtime END) As DLs_ReferredBy_NotNull
From Player_Tapjoy T 
Inner Join Player P On T.Player_Id=P.Player_Id
Union All
Select
Count(CASE WHEN P.ReferredBy IS NULL THEN Pt.Create_Dtime END) As DLs_ReferredBy_Null,
Count(CASE WHEN P.ReferredBy IS NOT NULL THEN Pt.Create_Dtime END) As DLs_ReferredBy_NotNull
From Player_Aux_Pt Pt
Inner Join Player P On Pt.Player_Id=P.Player_Id
Where
Pt.Site = 'AppCircle'
) 
```

# hash - 如何通过 onclick 在 Google Analytics 上获得完美的统计数据？

> ID：12539791
> 
> 赞同：0
> 
> 时间：2012-09-22T00:51:40.077
> 
> 标签：hash, onclick, google-analytics, statistics, href

当我使用图库中的“上一张/下一张”箭头导航时，Google Analytics 会计算上一张图片（包含哈希）。

在这里要清楚一个例子：

> **www.example.com/gallery.html#title_1**
> 
> *下一个*
> 
> **www.example.com/gallery.html#title_2**
> 
> *下一个*
> 
> **www.example.com/gallery.html#title_3**
> 
> 在此示例中，Google Analytics（分析）计数：title_1 的 1 个视图 ... title_2 的 1 个视图，而我在 title_3

这是我放在箭头上的谷歌分析跟踪代码：

```
<a href="#" onclick="_gaq.push(['_trackPageview', location.pathname + location.search + location.hash]);" class="rg-image-nav-prev">Previous Image</a>
<a href="#" onclick="_gaq.push(['_trackPageview', location.pathname + location.search + location.hash]);" class="rg-image-nav-next">Next Image</a> 
```

任何想法 ？希望你能帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:59:14.433

我认为问题很清楚。您在 url 更改之前触发综合浏览量，而您希望在 url 上的哈希更改后触发它。这里有 2 个选项。

您可以引入一个计时器，以便在点击后几毫秒触发综合浏览量。这应该允许哈希在综合浏览之前更改。它有点脏，但应该可以完成这项工作。像这样的东西。

```
setTimeout(function(){
  _gaq.push(['_trackPageview', location.pathname + location.search + location.hash]);
}, 200); 
```

另一种选择是使用 window.onpopstate 并忘记点击箭头 Next/Prev。

```
window.onpopstate = function(){
  _gaq.push(['_trackPageview', location.pathname + location.search + location.hash]);
} 
```

阅读有关 popstate 的更多信息，以查看具有相同功能但可能提供更好的跨浏览器支持的其他选项。

例如：

[我可以在 IE 中使用 onpopstate 吗？](https://stackoverflow.com/questions/11232745/can-i-use-onpopstate-with-ie)

# jquery - 带有引导程序的浏览器窗口顶部的模态位置

> ID：12539792
> 
> 赞同：0
> 
> 时间：2012-09-22T00:51:58.100
> 
> 标签：jquery, twitter-bootstrap

我的模态窗口与浏览器窗口的顶部对齐时出现问题。我正在考虑移动两个 jQuery UI 模态（即不是很多），但这非常令人沮丧。

![在此处输入图像描述](../Images/daaa41d36ac3a986f2cea0766c013519.png)

有什么想法吗？另外，为什么模式会在页面加载时显示？我需要手动执行 $('.modal').hide() 吗？

谢谢

**编辑 1** 这里是一个小提琴：http: [//jsfiddle.net/UFuX8/](http://jsfiddle.net/UFuX8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:26:28.207

来吧，[这行得通](http://jsfiddle.net/UFuX8/1/)。只需要在模态 div 中添加“隐藏淡入淡出”。

# java - 安卓应用与网站数据库的连接

> ID：12539795
> 
> 赞同：2
> 
> 时间：2012-09-22T00:52:24.990
> 
> 标签：java, php, android

我是 android 的新手，我正在开发一个通过 PHP 将数据从 android 传递到 MySQL 的应用程序。我现在正在注册用户部分。我从搜索中获得了一些代码，但是在实现它时，我遇到了运行时错误。这是我的代码。`logcat`也是在底部。

```
public class RegisterActivity extends Activity {

    // Progress Dialog
    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();
    EditText registerName;
    EditText registerRollno;
    EditText inputDesc;

    // url to create new product
    private static String url_create_voter = "http://10.0.2.2/evoting/create_voter.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register1);

        // Edit Text
        EditText registerName = (EditText) findViewById(R.id.registerName);
        EditText registerRollno = (EditText) findViewById(R.id.registerRollno);
       // inputDesc = (EditText) findViewById(R.id.inputDesc);

        // Create button
        Button btnSubmit = (Button) findViewById(R.id.btnSubmit);

        // button click event
        btnSubmit.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // creating new product in background thread
                new CreateNewVoter().execute();
            }
        });
    }

    /**
     * Background Async Task to Create new product
     * */
    class CreateNewVoter extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(RegisterActivity.this);
            pDialog.setMessage("Creating Voter..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String name = registerName.getText().toString();
            String rollno = registerRollno.getText().toString();
            //String description = inputDesc.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name", name));
            params.add(new BasicNameValuePair("rollno", rollno));
           // params.add(new BasicNameValuePair("description", description));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_voter,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag

            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product
                    Intent i = new Intent(getApplicationContext(), CreateVoterSuccess.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    Intent i = new Intent(getApplicationContext(), CreateVoterFail.class);
                    startActivity(i);
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    }
} 
```

这是`logcat`：

```
09-22 05:47:52.343: W/KeyCharacterMap(279): No keyboard for id 0
09-22 05:47:52.343: W/KeyCharacterMap(279): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-22 05:47:54.403: W/dalvikvm(279): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
09-22 05:47:54.414: E/AndroidRuntime(279): FATAL EXCEPTION: AsyncTask #1
09-22 05:47:54.414: E/AndroidRuntime(279): java.lang.RuntimeException: An error occured while executing doInBackground()
09-22 05:47:54.414: E/AndroidRuntime(279):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
09-22 05:47:54.414: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-22 05:47:54.414: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-22 05:47:54.414: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-22 05:47:54.414: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-22 05:47:54.414: E/AndroidRuntime(279):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
09-22 05:47:54.414: E/AndroidRuntime(279):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
09-22 05:47:54.414: E/AndroidRuntime(279):  at java.lang.Thread.run(Thread.java:1096)
09-22 05:47:54.414: E/AndroidRuntime(279): Caused by: java.lang.NullPointerException
09-22 05:47:54.414: E/AndroidRuntime(279):  at com.example.evoting.RegisterActivity$CreateNewVoter.doInBackground(RegisterActivity.java:83)
09-22 05:47:54.414: E/AndroidRuntime(279):  at com.example.evoting.RegisterActivity$CreateNewVoter.doInBackground(RegisterActivity.java:1)
09-22 05:47:54.414: E/AndroidRuntime(279):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-22 05:47:54.414: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-22 05:47:54.414: E/AndroidRuntime(279):  ... 4 more
09-22 05:47:55.313: E/WindowManager(279): Activity com.example.evoting.RegisterActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f28db0 that was originally added here
09-22 05:47:55.313: E/WindowManager(279): android.view.WindowLeaked: Activity com.example.evoting.RegisterActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f28db0 that was originally added here
09-22 05:47:55.313: E/WindowManager(279):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
09-22 05:47:55.313: E/WindowManager(279):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-22 05:47:55.313: E/WindowManager(279):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-22 05:47:55.313: E/WindowManager(279):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
09-22 05:47:55.313: E/WindowManager(279):   at android.app.Dialog.show(Dialog.java:241)
09-22 05:47:55.313: E/WindowManager(279):   at com.example.evoting.RegisterActivity$CreateNewVoter.onPreExecute(RegisterActivity.java:76)
09-22 05:47:55.313: E/WindowManager(279):   at android.os.AsyncTask.execute(AsyncTask.java:391)
09-22 05:47:55.313: E/WindowManager(279):   at com.example.evoting.RegisterActivity$1.onClick(RegisterActivity.java:56)
09-22 05:47:55.313: E/WindowManager(279):   at android.view.View.performClick(View.java:2408)
09-22 05:47:55.313: E/WindowManager(279):   at android.view.View$PerformClick.run(View.java:8816)
09-22 05:47:55.313: E/WindowManager(279):   at android.os.Handler.handleCallback(Handler.java:587)
09-22 05:47:55.313: E/WindowManager(279):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-22 05:47:55.313: E/WindowManager(279):   at android.os.Looper.loop(Looper.java:123)
09-22 05:47:55.313: E/WindowManager(279):   at android.app.ActivityThread.main(ActivityThread.java:4627)
09-22 05:47:55.313: E/WindowManager(279):   at java.lang.reflect.Method.invokeNative(Native Method)
09-22 05:47:55.313: E/WindowManager(279):   at java.lang.reflect.Method.invoke(Method.java:521)
09-22 05:47:55.313: E/WindowManager(279):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-22 05:47:55.313: E/WindowManager(279):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-22 05:47:55.313: E/WindowManager(279):   at dalvik.system.NativeStart.main(Native Method)
09-22 05:47:57.133: I/Process(279): Sending signal. PID: 279 SIG: 9
09-22 05:56:34.157: W/KeyCharacterMap(291): No keyboard for id 0
09-22 05:56:34.157: W/KeyCharacterMap(291): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-22 05:56:36.553: W/dalvikvm(291): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
09-22 05:56:36.563: E/AndroidRuntime(291): FATAL EXCEPTION: AsyncTask #1
09-22 05:56:36.563: E/AndroidRuntime(291): java.lang.RuntimeException: An error occured while executing doInBackground()
09-22 05:56:36.563: E/AndroidRuntime(291):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
09-22 05:56:36.563: E/AndroidRuntime(291):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-22 05:56:36.563: E/AndroidRuntime(291):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-22 05:56:36.563: E/AndroidRuntime(291):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-22 05:56:36.563: E/AndroidRuntime(291):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-22 05:56:36.563: E/AndroidRuntime(291):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
09-22 05:56:36.563: E/AndroidRuntime(291):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
09-22 05:56:36.563: E/AndroidRuntime(291):  at java.lang.Thread.run(Thread.java:1096)
09-22 05:56:36.563: E/AndroidRuntime(291): Caused by: java.lang.NullPointerException
09-22 05:56:36.563: E/AndroidRuntime(291):  at com.example.evoting.RegisterActivity$CreateNewVoter.doInBackground(RegisterActivity.java:83)
09-22 05:56:36.563: E/AndroidRuntime(291):  at com.example.evoting.RegisterActivity$CreateNewVoter.doInBackground(RegisterActivity.java:1)
09-22 05:56:36.563: E/AndroidRuntime(291):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-22 05:56:36.563: E/AndroidRuntime(291):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-22 05:56:36.563: E/AndroidRuntime(291):  ... 4 more
09-22 05:56:37.203: E/WindowManager(291): Activity com.example.evoting.RegisterActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f21560 that was originally added here
09-22 05:56:37.203: E/WindowManager(291): android.view.WindowLeaked: Activity com.example.evoting.RegisterActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f21560 that was originally added here
09-22 05:56:37.203: E/WindowManager(291):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
09-22 05:56:37.203: E/WindowManager(291):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-22 05:56:37.203: E/WindowManager(291):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-22 05:56:37.203: E/WindowManager(291):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
09-22 05:56:37.203: E/WindowManager(291):   at android.app.Dialog.show(Dialog.java:241)
09-22 05:56:37.203: E/WindowManager(291):   at com.example.evoting.RegisterActivity$CreateNewVoter.onPreExecute(RegisterActivity.java:76)
09-22 05:56:37.203: E/WindowManager(291):   at android.os.AsyncTask.execute(AsyncTask.java:391)
09-22 05:56:37.203: E/WindowManager(291):   at com.example.evoting.RegisterActivity$1.onClick(RegisterActivity.java:56)
09-22 05:56:37.203: E/WindowManager(291):   at android.view.View.performClick(View.java:2408)
09-22 05:56:37.203: E/WindowManager(291):   at android.view.View$PerformClick.run(View.java:8816)
09-22 05:56:37.203: E/WindowManager(291):   at android.os.Handler.handleCallback(Handler.java:587)
09-22 05:56:37.203: E/WindowManager(291):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-22 05:56:37.203: E/WindowManager(291):   at android.os.Looper.loop(Looper.java:123)
09-22 05:56:37.203: E/WindowManager(291):   at android.app.ActivityThread.main(ActivityThread.java:4627)
09-22 05:56:37.203: E/WindowManager(291):   at java.lang.reflect.Method.invokeNative(Native Method)
09-22 05:56:37.203: E/WindowManager(291):   at java.lang.reflect.Method.invoke(Method.java:521)
09-22 05:56:37.203: E/WindowManager(291):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-22 05:56:37.203: E/WindowManager(291):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-22 05:56:37.203: E/WindowManager(291):   at dalvik.system.NativeStart.main(Native Method)
09-22 05:56:41.412: I/Process(291): Sending signal. PID: 291 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:34:16.107

局部变量阴影对象变量：

```
 EditText registerName;
    EditText registerRollno;

// [...]
 public void onCreate(Bundle savedInstanceState) {

 [...]
        EditText registerName = (EditText) findViewById(R.id.registerName);
        EditText registerRollno = (EditText) findViewById(R.id.registerRollno); 
```

创建与对象变量同名的局部变量默认情况下不会出错，但在这里看起来像是一个错误。

这样，对象变量仍然是`null`，因此是 NPE。

# java - 在 Google Appengine 上配置 https://yourdomain.com

> ID：12539796
> 
> 赞同：1
> 
> 时间：2012-09-22T00:52:39.560
> 
> 标签：java, google-app-engine, ssl, dns, subdomain

我最近开始在我的 appengine 应用程序上使用 SSL（即上传我的证书）。我有

[https://www.mydomain.com](https://www.mydomain.com)可以工作，但 [https://mydomain.com](https://mydomain.com)不起作用（无法在浏览器中解析）。

我已经有[http://mydomain.com](http://mydomain.com)重定向到[http://www.mydomain.com](http://www.mydomain.com)但理想情况下重定向到 https。（我希望所有内容都重定向到 https 和 www）。

有人知道如何设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T06:13:13.613

您似乎在这里概述了两个（可能）单独的问题，*但如果我不完全理解您的问题，请纠正我*：

1.  带有`https://`（而不是`http://`）的 URL 不起作用
2.  具体来说，您希望`http://streak.com`重定向到`https://www.streak.com`，并且通常，您希望**所有** `http://`链接都重定向到`https://`具有 www 子域的安全 ( ) 对应项；例如`http://streak.com/user/login`应该重定向到`https://www.streak.com/user/login`

### https:// 不工作

您可能已经访问[了自定义域的 SSL - Google App Engine - Google Developers](https://developers.google.com/appengine/docs/ssl)，但您可能忽略了一些会导致 SSL URL 无法按预期运行的点：

在**激活**标题下：

> 您的 App Engine 应用程序必须已启用结算功能，且至少已清偿一笔帐单费用；启用 SSL 时使用此应用程序

此外，在**上传和配置证书**标题和上传**证书** *后*配置证书子标题下：

> 与您的 DNS 提供商合作更新 CNAME 记录。对于分配的 URL 中的每个域，将 CNAME 记录更改为“CNAME to”字段中给定的 CNAME。

最后，确保您的应用程序的 web.xml 文件配置为正确处理安全 URL：[部署描述符：web.xml - Google App Engine - Google Developers](https://developers.google.com/appengine/docs/java/config/webxml#Secure_URLs)

### 始终重定向到`https://www.`

这应该很容易在您的应用程序中实现。请参阅[Java Servlet 环境 - Google App Engine - Google Developers](https://developers.google.com/appengine/docs/java/runtime#Requests_and_Domains)或您正在使用的框架的文档。

祝你好运！

# .net - WCF 与 NTLM over HTTPS 和消息证书？

> ID：12539806
> 
> 赞同：1
> 
> 时间：2012-09-22T00:54:00.183
> 
> 标签：.net, wcf, x509certificate, ntlm

我想设置一个 WCF 服务，通过 HTTPS 使用 NTLM 身份验证并为消息使用证书安全性（我知道，通常 HTTPS 不需要消息加密）

我有证书在消息安全上工作，但是当我尝试使用 TransportWithMessageCredential 时，客户端抛出异常：

> 未处理的异常：System.ServiceModel.Security.MessageSecurityException：HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器收到的身份验证标头是“协商，NTLM”

IIS 配置为仅支持 Windows Auth、需要 SSL 和接受客户端证书，机器位于同一个 Active Directory 域中（事实上，我现在正在本地运行）

任何想法我做错了什么？

我的服务 web.config 如下所示：

```
<services>
    <service name="ServiceHost.MyTestService" behaviorConfiguration="CertificateServiceBehavior">
        <endpoint address="" binding="ws2007HttpBinding" contract="SharedLibrary.ITestService" bindingConfiguration="CertificateBindingConfig">
        </endpoint>
    </service>
</services>

<bindings>
    <ws2007HttpBinding>
        <binding name="CertificateBindingConfig">
            <security mode="TransportWithMessageCredential">
                <transport clientCredentialType="Windows" />
                <message clientCredentialType="Certificate" negotiateServiceCredential="true" />
            </security>
        </binding>
    </ws2007HttpBinding>
</bindings>

<behaviors>
    <serviceBehaviors>
        <behavior name="CertificateServiceBehavior">
            <serviceCredentials>
                <windowsAuthentication allowAnonymousLogons="false" />
                <clientCertificate>
                    <authentication certificateValidationMode="PeerTrust" trustedStoreLocation="LocalMachine" />
                </clientCertificate>
                <serviceCertificate storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" findValue="server" />
            </serviceCredentials>
        </behavior>
    </serviceBehaviors>
</behaviors> 
```

我的客户 app.config 是这样的：

```
<client>
    <endpoint address="https://server:9999/ServiceHost/TestService.svc" binding="ws2007HttpBinding"
                contract="SharedLibrary.ITestService" bindingConfiguration="CertificateBindingConfig" 
                behaviorConfiguration="CertificateEndpointBehavior"
                name="serviceEndpoint">

    </endpoint>
</client>
<bindings>
    <ws2007HttpBinding>
        <binding name="CertificateBindingConfig">
            <security mode="TransportWithMessageCredential">
                <transport clientCredentialType="Windows" />
                <message clientCredentialType="Certificate" negotiateServiceCredential="true"/>
            </security>
        </binding>
    </ws2007HttpBinding>
</bindings>
<behaviors>
    <endpointBehaviors>
        <behavior name="CertificateEndpointBehavior">
            <clientCredentials>
                <windows allowNtlm="true" allowedImpersonationLevel="Impersonation"/>
                <clientCertificate storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" findValue="client"/>
                <serviceCertificate>
                    <authentication certificateValidationMode="PeerTrust"/>
                </serviceCertificate>
            </clientCredentials>
        </behavior>
    </endpointBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:29:03.680

预定义模式不允许您实现这种安全性。`TransportWithMessageCredentials`方法：

*   HTTPS
*   没有传输身份验证
*   用于客户端身份验证的消息中的安全令牌
*   没有消息加密

试试这个（未经测试）以获得具有 NTLM + 相互消息安全性的 HTTPS：

```
<bindings>
  <customBinding>
    <binding name="MegaSecurity">
      <security authenticationMode="MutualCertificate"
                messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
                includeTimestamp="true" />
      <textMessageEncoding messageVersion="Soap12WSAddressing10" />
      <httpsTransport authenticationScheme="Ntlm" />
    </binding>
  </customBinding>
</bindings> 
```

您还可以尝试`MutualSslNegotiated`身份验证模式以进行服务凭据协商，并`Negotiate`更好`authenticationScheme`地匹配`Windows`预定义绑定中的选项。

# android - Android问题显示特殊字符

> ID：12539807
> 
> 赞同：0
> 
> 时间：2012-09-22T00:54:12.460
> 
> 标签：android, glyph

![问题](../Images/de3c09c0ebc98f957519a4f22a5113f4.png)

我在显示特殊字符时遇到问题。有人告诉我编码有错误。我在我拥有的测试设备上运行该应用程序，但我没有收到此错误。收到此错误的人正在同一设备型号上测试应用程序，但固件版本较新。

有人告诉我“字形是替换字符。你在某个地方搞砸了文件编码。一切都应该是 UTF-8 以保持理智。” 然而，它在我的设备上运行良好。

是否有针对此类问题的已知解决方案。谢谢！

编辑-下面是我在尝试复制中国工程师编写的代码时遇到的错误图像。以前从未像这样合作过我不确定这是否是一个常见问题，最终会反映在应用程序[utf- 8 错误](https://i.stack.imgur.com/x9amf.png)![在此处输入图像描述](../Images/c9a633e334d163070f35c71fa9c7d364.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:09:38.537

好吧...为什么要在 .java 文件中定义字符串？它们最终需要存在`strings.xml`才能本地化，无论如何，这就是 Android 方式。

如果您查看文件的顶部，`strings.xml`您会看到这样的一行，

```
<?xml version="1.0" encoding="utf-8"?> 
```

这告诉任何使用这个文件的字符被编码为 UTF-8（显然）。您将在 .java 文件中找不到这样的行。它将被编码为 eclipse 默认值，这取决于您的主机操作系统，并且几乎可以肯定不是 UTF-8。保存 .java 文件时，您的特殊字符会在编码过程中丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T07:27:16.220

简单的解决方案：**始终**使用`strings.xml`.

当您从 java 代码中加载一个字符串时，它可能会被破坏，这取决于 IDE（Eclipse？）认为您的 .java 文件的编码应该是什么以及 java 编译器的想法。

默认情况下，我的 Eclipse 工作区对 .java 文件使用 Windows 编码 (CP1252)。您可以在文件属性中看到编码。它为 strings.xml 文件正确显示 UTF-8。

# java - 在针对旧 JDK 版本时如何避免 NoClassDefFoundErrors 和 NoSuchMethodErrors？

> ID：12539811
> 
> 赞同：4
> 
> 时间：2012-09-22T00:54:22.697
> 
> 标签：java, compilation, backwards-compatibility

假设我想编写一个针对某个 JRE 版本（例如 1.6）的应用程序，但在我用来开发它的机器上，安装了更新版本的 JRE（例如 1.7）。

天真的方法是将编译器级别设置为 1.6（我使用 Eclipse，但这可能不是很重要，因为问题很普遍）。然而，这还不够。设置编译器的源代码级别可确保源文件仅使用该 Java 版本可用的语言功能，因此生成的类文件具有正确的次要版本，因此目标 JVM 将能够加载和运行它们。

但是还有另一个更微妙的问题：如果我在我的代码中使用 1.7 中添加的类或方法，并尝试在安装了 1.6 运行时的机器上运行应用程序，它会以 a`NoClassDefFoundError`或`NoSuchMethodError`.

问题是同一个程序在开发机器上运行良好，因为它安装的 1.7 JDK 确实包含这些类。编译器或 IDE 也不抱怨。我引用的类和方法不可用的唯一指标是`Since 1.7`JavaDoc 中的注释。

那么如何确保我永远不会使用旧版 JRE 中不可用的类或方法呢？是始终在构建路径上具有准确目标 JRE 版本的唯一可靠解决方案吗？这意味着我需要在我的开发机器上为每个这样的情况（1.7、1.6、可能是 1.5，甚至可能是 1.4）安装一个额外的 JDK。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T01:31:31.223

在编译期间使用`bootcpasspath`指向 1.6 JRE（特别是 ）的选项。`rt.jar`这样做将强制检查所有引用的类、方法和属性是否实际存在于提供的`rt.jar`.

有关更多详细信息，请参阅[javac - 交叉编译选项](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)。

# ios - 擦除 ios 设备后，我无法注册到 CISCO SCEP 服务器

> ID：12539812
> 
> 赞同：2
> 
> 时间：2012-09-22T00:54:28.353
> 
> 标签：ios, mdm

我的 iOS 4/5 设备一直在注册 CISCO SCEP 服务器。

但是，在我 OTA 擦除设备后，它不再注册。

也许有人可以在这里帮助我-不知何故，我怀疑这是证书的问题，擦拭后，设备上发生了一些变化。

需要有关如何调试此问题的建议。

我很想入狱破坏设备以查看擦除后的证书更改（如果有）。

我已经使用了 wireshark、tcpdump 等来捕获有效负载。

有没有人遇到过这个问题？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:13:24.433

问题是 Cisco 路由器无法解析 iPhone 在配置文件交换期间发送的 HTTPS POST。

较新的 iPhone 出厂内置证书（用于所有 HTTPS 请求）编码的 SubjectName 为 IA5String，而 Cisco 路由器符合 RFC 2945 并且只能解析以 PrintableString 编码的 Subject 名称。

对于 Cisco 路由器，您无能为力，因为仅将 Cisco 路由器用于 SCEP/设备注册 OTA 并不适合。

当然，Apple 不会改变证书的形成方式。

解决此问题的最佳选择是

1.  编写自己的代理来处理 HTTPS POST，以及
2.  寻找 SCEP 替代品

SCEP 部分独立于 MDM 配置文件配置强加的 HTTPS POST。您可以让 iPhone 直接与您的 SCEP 服务器对话。

本质上，思科路由器将配置文件设置与 SCEP 混为一谈。

我终于开始工作了。希望这个经验对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:08:57.763

我首先会考虑登录 SCEP 服务器。也许它认为这些设备已经分配了证书并且正在阻止注册。SCEP 最初设计用于颁发“硬件”证书。因此，也许它认为您的设备应该已经拥有这些证书。也许考虑撤销以前的证书，或者至少查看已发布/撤销的证书，看看那里是否有答案。

您能否从 IPCU 收集控制台日志供我们查看。

还要检查托管 SCEP 服务的证书是否仍然有效。我相信握手也可能在这里失败。

# asp.net-mvc-3 - ELMAH applicationName：显示由另一个站点记录的异常

> ID：12539815
> 
> 赞同：8
> 
> 时间：2012-09-22T00:54:37.493
> 
> 标签：asp.net-mvc-3, iis-7, elmah

我有一个使用 Elmah.SqlErrorLog 的站点记录错误。我的目标是让另一个站点包含处理通常在 localhost/elmah.axd 上看到的页面的处理程序。原因是记录错误的站点使用表单身份验证，而我想限制谁可以通过 Windows 身份验证查看日志。

进行日志记录的站点在端口 80 上运行，显示日志的站点在端口 8008 上。起初，我无法从日志记录站点看到异常。然后我找到了这个答案，它解释了你可以为你的错误日志设置应用程序名称：[ELMAH 日志的单独查看器应用程序](https://stackoverflow.com/questions/589996/separate-viewer-application-for-elmahs-log)

我查看了 ELMAH 记录到的表，发现在我尝试将记录/查看分成两个不同的站点之前，它一直在应用程序列中记录“/LM/W3SVC/3/ROOT”。

指定 applicationName="/LM/W3SVC/3/ROOT" 后，它起作用了！不幸的是，这个值因机器而异，当下一个人的开发箱碰巧有一个“/LM/W3SVC/10/ROOT”的应用程序名称时，它不会很好地工作。据此，该字符串与本地计算机名称空间有关：http: [//www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/44a57859-8fbb-4238-a7b5-f10c34cf8fe8.mspx? mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/44a57859-8fbb-4238-a7b5-f10c34cf8fe8.mspx?mfr=true)

如何获取端口 8008 上的站点，该站点用于查看日志以显示从端口 80 上的站点记录的异常？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-23T01:41:18.637

一旦明确设置了 applicationName，这就是它在将异常记录到数据库时应该使用的名称。

如果您在两个站点的配置中设置 applicationName="Foo"，则在端口 80 上记录的站点上的任何新异常都应该对端口 8008 上的站点可见

如果您需要使在此更改之前记录的旧错误可见，您也可以将 ELMAH_Error 表中的 Application 字段更新为“Foo”

**编辑**

applicationName 值设置为 web.config 中 errorLog 元素的属性

```
 <elmah>
        <security allowRemoteAccess="false" />
        <errorLog type="Elmah.SqlErrorLog, Elmah" connectionStringName="elmah-sqlserver" applicationName="Foo" />
    </elmah> 
```

# macos - macOS 的 opencv 教程

> ID：12539817
> 
> 赞同：0
> 
> 时间：2012-09-22T00:55:18.427
> 
> 标签：macos, opencv

我正在尝试按照本教程安装 opencv，但我找不到 ~/.profile 目录。它说我没有权限，当我 sudo 进入它时它说它找不到它但是当我看到它时。我不知道如何找到它。[http://thepetitegeek.blogspot.com/2009/09/installing-opencv-on-mac-os-x-with.html](http://thepetitegeek.blogspot.com/2009/09/installing-opencv-on-mac-os-x-with.html)

当我尝试执行 houghline

```
 File "houghlines.py", line 10, in <module>
    from ctypes_opencv.cv import *
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ctypes_opencv/__init__.py", line 18, in <module>
    from ctypes_opencv.cxcore import *
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ctypes_opencv/cxcore.py", line 80, in <module>
    _cxDLL, _cvDLL, _hgDLL = detect_opencv()    
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ctypes_opencv/cxcore.py", line 58, in detect_opencv
    cxDLL = cdll.LoadLibrary(find_lib('cxcore'))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ctypes_opencv/cxcore.py", line 54, in find_lib
    raise ImportError("OpenCV's shared library '%s' is not found. Make sure you have its path included in your PATH variable." % name)
ImportError: OpenCV's shared library 'cxcore' is not found. Make sure you have its path included in your PATH variable. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:24:55.703

~/.profile“目录”可能不存在。它是一个文件，您需要在您的用户目录中创建它。

# android - 自定义布局需要膨胀 xml 小部件

> ID：12539823
> 
> 赞同：0
> 
> 时间：2012-09-22T00:56:55.457
> 
> 标签：android, android-layout, android-widget, android-inflate

我有一个习惯`LinearLayout`。在该布局内，我想放置几个小部件。我可以在运行时创建小部件，但宁愿从 XML 加载它们。

我在下面的作品，但我相信它正在创造两个`LinearLayouts`，一个在另一个里面。在这个例子中，我想简单地创建`Butto`n 并`EditText`在`CustomLayout`. 使用 XML，我该怎么做？

这里有更多细节（编辑：在这个例子下面，我已经包含了一个更正的版本）：

```
<com.example.test.MyActivity
  ... />
  <LinearLayout
    ... />
    <com.example.test.CustomLayout  ***** this is the custom linear layout
      android:id="@+id/custom"
      android:orientation="horizontal"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content" />
    <View
      ... other stuff ... />
</com.example.test.MyActivity> 
```

这是 CustomLayout 内容的 XML：

```
<LinearLayout
  ... />
  <Button
    ... />
  <EditText
    ... />
</LinearLayout> 
```

最后，LinearLayout 的代码：

```
public class CustomLayout extends LinearLayout
{
  public CustomLayout (Context context, AttributeSet attrs)
  {
    super(context, attrs);
    Activity act = (Activity)context;
    LayoutInflater inflater = act.getLayoutInflater();
    View view = inflater.inflate (R.layout.custom_layout, this, false);
    addView (view);
  }
  ...
} 
```

**修正版**

```
<com.example.test.MyActivity
  ... />
  <LinearLayout
   android:id="@+id/outer_layout
   ... />

    ... other stuff ... 
  </LinearLayout>
</com.example.test.MyActivity> 
```

这是 CustomLayout 内容的 XML：

```
<merge
  ... />
  <Button
    ... />
  <EditText
    ... />
</merge> 
```

实例化 CustomLayout 的代码

```
public void addCustomLayout()
{
  LinearLayout outerLayout = (LinearLayout) findViewById (R.id.outer_layout);
  CustomLayout customLayout = new CustomLayout (getContext(), null);
  outerLayout.addView (customLayout, 0);
} 
```

最后，CustomLayout 的代码：

```
public class CustomLayout extends LinearLayout
{
  public CustomLayout (Context context, AttributeSet attrs)
  {
    super(context, attrs);
    Activity act = (Activity)context;
    LayoutInflater inflater = act.getLayoutInflater();
    View view = inflater.inflate (R.layout.custom_layout, this, true);
  }
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:14:11.770

> 我在下面的工作，但我相信它正在创建两个 LinearLayouts，一个在另一个里面。

实际上，`LinearLayout`您`Button`将`EditText`在`CustomLayout`. 为避免这种情况，您可以使用`merge`标签。你会像这样使用它：

```
<merge
  ... />
  <Button
    ... />
  <EditText
    ... />
</merge> 
```

然后在你的`CustomLayout`构造函数中：

```
super(context, attrs);
Activity act = (Activity)context;
LayoutInflater inflater = act.getLayoutInflater();
View view = inflater.inflate (R.layout.custom_layout, this, true); // addView is not needed anymore 
```

# android - libgdx 为什么舞台相机不动？

> ID：12539824
> 
> 赞同：2
> 
> 时间：2012-09-22T00:57:27.347
> 
> 标签：android, camera, libgdx

所以我在我的游戏中使用了libgdx的舞台类，到目前为止，我在舞台上添加了一个演员，它只是为屏幕绘制背景，我遇到的问题是当我移动舞台的相机来模拟屏幕滚动时（背景图像大于屏幕）相机不会移动。现在让我发疯的是，当我在桌面启动器上运行时它确实可以工作，但是每当我在手机上运行它时它就不会滚动。我真的不知道可能是什么问题。我随后调用了移动相机的方法，因为每当它被调用并且它确实被调用时，我都会将该方法的名称记录到日志猫中。此外，我什至记录了相机的位置，它会发生变化，但前提是我在桌面上运行，如果我在手机上运行，​​它会记录相同的位置。我不 不知道这是否是一个错误，因为我认为它仅适用于桌面启动器很奇怪，并且是的，android 启动器和桌面启动器都使用相同的 ApplicationListener 实例进行了初始化。有什么建议么？提前致谢。

这是简化的代码：

```
public void Create()
{
GameStage = new Stage(2000, 2000, true);

GameCamera = new OrthographicCamera(2000, 2000);
GameCamera.setToOrtho(true, 2000, 2000);

GameStage.setCamera(GameCamera);
GameStage.setViewport(2000, 2000, true);
}

public void MoveCamera()//it gets called when user drags across the screen
{
GameStage.getCamera().translate(x, y, 0);
GameStage.getCamera().update();
}

public void render()
   {
      //the background actor has been added at this point

      Gdx.gl.glClearColor(0, 0, 0, 1);
      Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

      GameStage.act(Gdx.graphics.getDeltaTime());
        GameStage.draw();

   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T01:10:50.273

我刚刚意识到这确实是我的其他功能中的一个问题，它没有更新相机位置，所以它与 libgdx 无关抱歉，我希望我可以删除这个问题，但它在桌面上工作很奇怪。

# c - 警告：传递 'gets' 的参数 1 使指针从整数而不进行强制转换 [默认启用]

> ID：12539827
> 
> 赞同：0
> 
> 时间：2012-09-22T00:58:34.370
> 
> 标签：c

我已经阅读了其他帖子，这些帖子得到了“从整数不进行强制转换”错误，但我对它的确切含义感到困惑。如果我不强制转换（强制转换的意思是说）），是不是说函数默认`gets`使 int 变量成为指针？`input``gets ((int) input`

```
int directions() 
{   
    int input;

    printf("Type '1', '2', etc to see a problem or type '(add an 'all' option to see a     list of all the problems)\n");
    gets( input);

    switch ( input) {
        case 1: euler1();
        case 2: euler2();
    }

    return input;
}

int main()
{   
    printf("Welcome to Project Euler's Problems in C!\n");
    directions();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:00:31.393

第一个参数`gets()`是 a `char*`，一个指向缓冲区的指针。它不返回`int`. 如果您查看有关 的一些[文档`gets`](http://www.cplusplus.com/reference/clibrary/cstdio/gets/)，您将了解它是如何正确使用的。

读入字符串后，您需要使用[`atoi`](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)它从 ASCII 转换为整数。

请注意，您最好使用类似的方法来扫描输入流以获取所需的输入。[`fscanf`](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)`(stdin, "%d", &input);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T15:41:48.703

to的第一个参数`gets()`是`char*`always（指向缓冲区的指针）。它不返回 int 或其他数据类型。

使用类似的东西`fscanf(stdin, "%d", &input);`来扫描输入流以获取所需的输入。

`gets()`尽量少用，用`fgets`。

很高兴编码:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T01:08:41.040

`gets()`没有得到 int。使用`atoi()`进行转换。

```
char *s;
s = gets(buff)
input = atoi(s); 
```

# objective-c - 滚动上的类似 Siri 的阴影

> ID：12539829
> 
> 赞同：1
> 
> 时间：2012-09-22T00:58:58.500
> 
> 标签：siri, objective-c, uiview, shadow, siri

在 Apple 的iOS 版[siri](/questions/tagged/siri "显示标记为“siri”的问题")中，当 Siri 回答一个问题并且它不适合整个屏幕时，用户可以滚动浏览信息。Siri 中滚动/表格视图的有趣之处在于，当信息超出滚动/表格视图的边界时，视图底部会出现细微的渐变：

![有阴影和没有阴影的 Siri](../Images/b1a2f81cb81cd6d6fafc58e1261f6aab.png)

Siri 如何检测到滚动/表格视图中的信息超出其界限？我知道用阴影淡入图像是多么容易，但我不明白内容检测是如何工作的？

Apple 提供的任何类型的文档或类可以让我检测到这一点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:10:19.730

可能只是根据加载的内容设置内容大小，然后测试滚动视图高度是否小于内容视图高度。

# map - 如何在 Go 中遍历地图的所有元素？

> ID：12539830
> 
> 赞同：-1
> 
> 时间：2012-09-22T00:59:34.890
> 
> 标签：map, go

> **可能重复：**
> [遍历 golang 映射的所有键](https://stackoverflow.com/questions/1841443/iterating-over-all-the-keys-of-a-golang-map)

有人可以告诉我如何查看地图数据结构的所有元素，或者无法遍历吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:23:53.097

```
for key, value := range m { /* do stuff here */ } 
```

正如尼莫所说，这是重复的。

# javascript - 通过 AJAX 加载 jsrender 模板时出错

> ID：12539832
> 
> 赞同：2
> 
> 时间：2012-09-22T01:00:15.517
> 
> 标签：javascript, ajax, jsrender

我正在尝试编写一个函数来加载外部文件中的模板并将它们与`jsrender`. 但是，我收到此错误：

```
TypeError: elem.getAttribute is not a function
[Break On This Error]   

value = $templates[elem.getAttribute(tmplAttr)]; 
```

我有一些`console.logs`显示模板是用 ajax 检索的。

导致错误的基本代码如下：

```
var path    = 'templates/myTemplate.tmpl.html';
var data    = searchResultTeasers;
var target  = $('#results');

$.ajax({
    url     : path,
    aysnc   : false,
    success : function(template) {

        console.log("Path", path);
        console.log("Template", template);
        console.log("Data", data);

        //=============================================
        // Save Template with url as name for future
        //=============================================
        $.templates(path, template);

        //=============================================
        // Get Template String
        //=============================================
        var templateString  = $.templates(path);

        //=============================================
        // Render Template
        //=============================================
        renderedTemplate    = templateString.render(data);

        target.html(renderedTemplate);
    }
}); 
```

错误在 jsrender.js （第 829 行）中，我认为它与 $.templates(path); 但我不明白可能出了什么问题。

这是项目压缩包的链接：http: [//sdrv.ms/QsZpQT](http://sdrv.ms/QsZpQT)

我的功能基于这篇文章：http: [//msdn.microsoft.com/en-us/magazine/hh975379.aspx](http://msdn.microsoft.com/en-us/magazine/hh975379.aspx)

我不确定这是否与 jsRender 相关，但它仍然阻止我继续，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:56:49.453

所以我自己也遇到了同样的错误（当尝试将外部模板与 jsrender 一起使用时，还需要加载本地文件（也就是说，我没有使用任何服务器端代码））。

不幸的是，您链接到的 MSDN 文章（在偶然发现之前，我最初访问过）和将[jsRender 模板存储在单独的 js 文件中](https://stackoverflow.com/questions/10413894/store-a-jsrender-template-in-a-separate-js-file)的已接受答案，都建议使用 a `$.get()`，但您必须将`$.ajax()`两者都用于异步参数和 dataType 参数，如下所述。

这是我如何让它工作的：

1.  使用`$.ajax()`and `async: false`（你在上面的例子中做了，除了你把 'async' 拼错为 'aysnc'）。
2.  将`dataType: 'text'`参数设置为 ajax 调用。这部分很关键——当我遗漏了 dataType 参数时，模板内容返回为`[object XMLDocument]`，这`$.templates`令人窒息。

因此，最终运行的最终代码片段如下所示：

```
var file = 'views/my_template_file.html';
$.ajax({
    url: file,
    async: false,
    dataType: 'text',
    success: function(contents) {
        $.templates({my_template: contents});
        $('#myDiv').html(
            $.render.my_template()
        );
    }
}); 
```

希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:06:38.697

自从参考的 msdn 文章编写后，$.templates() 方法可能已更改。您是否已经看过[将 jsRender 模板存储在单独的 js 文件中](https://stackoverflow.com/questions/10413894/store-a-jsrender-template-in-a-separate-js-file)

# rest - 如何使用 RESTAdapter 处理单一资源

> ID：12539836
> 
> 赞同：14
> 
> 时间：2012-09-22T01:00:29.750
> 
> 标签：rest, ember.js, ember-data

ember-data 中的单一资源是如何处理的？假设我有以下 RESTful 路线：

```
GET /cart
POST /cart
UPDATE /cart
DELETE /cart 
```

ember-data 期望`find()`返回一个数组，并且它会自动尝试将我传递给我的模型的任何 url 复数。处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T01:19:42.433

您可以在这里做很多事情。

调用复数，它要么在`RESTAdapter`名称的末尾添加一个“s”，要么在复数哈希中查找名称（如果存在）。假设您的 DS.Model 是`App.Cart`.

[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js#L209](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js#L209)

```
DS.RESTAdapter.create({
  plurals: {
    cart: 'cart'
  }
}); 
```

如果您的 URL 方案非常不同并且需要一些进一步的逻辑，您实际上可以覆盖 buildURL 函数。

[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js#L288](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js#L288)

```
DS.RestAdapter.create({
  buildURL: function() {
    return "/always_this"
  })
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T18:51:42.253

所以，我在 github 上找到[了这个 pull request 。](https://github.com/emberjs/data/pull/58)它已经 8 个月大了，因此从那时起由于增加了复杂性而无法工作，但我已经实施了建议的解决方法，如下所示：

```
App.store = DS.Store.create({
  revision: 4,
  adapter: DS.RESTAdapter.create({
    plurals: {
      'cart': 'cart'
    }
  })
});

App.Cart.reopenClass({
  find: function () {
    this._super("singleton");
  }
}); 
```

在我的服务器上（我正在使用 rails），我必须将以下内容添加到我的路线中：

```
get "cart/:ignored" => "carts#show" 
```

然后我必须添加以下内容`CartSerializer`（使用[active_model_serializers](https://github.com/josevalim/active_model_serializers) gem）：

```
attributes :id
def id
  "singleton"
end 
```

这是必要的，因为显然，如果 json 响应中的 id 与 find() 请求的 id 不匹配（`singleton`在这种情况下），则 ember 不会将数据加载到模型中。

现在，这显然不是理想的解决方案，但在 ember-data 添加对它的支持之前，这似乎是最不痛苦的方法。

顺便说一句，我提出[了一个问题](https://github.com/emberjs/data/issues/393)以增加支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-21T14:15:57.997

以下是我在 Ember 1.9 中的工作方式。首先，我阅读了指南的[这一部分](http://emberjs.com/guides/routing/setting-up-a-controller/)。在最底部，它解释了如何为一个模型覆盖适配器。

```
App.CartAdapter = App.ApplicationAdapter.extend {
  pathForType: ->
    'cart'
} 
```

pathForType 函数是复数发生的地方（至少在我使用的 RESTAdapter 中），因此适配器的其他功能都不会受到影响（如主机或命名空间）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-13T04:33:36.797

只是为了分享一个对我有用的更完整的解决方案 - 扩展您的应用程序的 ApplicationRouter（它本身扩展了 DS.RESTAdapter）。

```
App.CartAdapter = App.ApplicationAdapter.extend({
    pathForType: function(type) {
        return 'cart';
    }
}); 
```

接下来，在 App.Router.map 中定义您的资源：

```
this.resource('cart'); 
```

最后，在路由中传递一个空字符串作为 id。这就是允许在没有 id 的情况下生成 URL 的原因。

```
App.CartRoute = Ember.Route.extend({
    model : function(params) {
        return this.store.find('cart', '');
    }
}); 
```

# processing - 在处理中更改鼠标光标

> ID：12539840
> 
> 赞同：0
> 
> 时间：2012-09-22T01:01:31.497
> 
> 标签：processing

如何将处理中的鼠标光标更改为具有透明度的 png？

仅在应用程序窗口中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T01:03:47.190

试试这个：

```
PImage mouseCursor;

void setup() {
  size(640,480);

  mouseCursor = loadImage("MouseCursor.png");
}

void draw() 
{
  if(mouseX < 100) {
    cursor(mouseCursor, 0, 0);
  } else {
    cursor(HAND);
  }
} 
```

# c# - Observable.Zip 当要压缩的序列数在运行时未知时

> ID：12539842
> 
> 赞同：4
> 
> 时间：2012-09-22T01:01:48.403
> 
> 标签：c#, system.reactive, observable

我需要为审批流程建模。之前很简单。两个角色必须批准某件事，然后我们可以继续下一步：

```
public class Approved
{
    public string ApproverRole;
}

var approvals = Subscribe<Approved>();

var vpOfFinance = approvals.Where(e => e.ApproverRole == "Finance VP");
var vpOfSales = approvals.Where(e => e.ApproverRole == "Sales VP");

var approvedByAll = vpOfFinance.Zip(vpOfSales, Tuple.Create);

approvedByAll.Subscribe(_ => SomeInterestingBusinessProcess()); 
```

但现在有一个新要求：批准某事所需的角色数量可能会有所不同：

```
public class ApprovalRequested
{
    public string[] Roles;
}
var approvalRequest = Subscribe<ApprovalRequested>().Take(1);
var approvals = Subscribe<Approved>();

var approvedByAll = ???;

approvedByAll.Subscribe(_ => SomeInterestingBusinessProcess()); 
```

我觉得我在这里遗漏了一些非常明显的东西......谁能指出我正确的方向？

**编辑**

澄清一下：批准过程是基于每个项目的。批准到达的顺序是未定义的。我们不在乎一个角色是否多次批准一个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:32:37.787

在当前版本的 Rx（我从 NuGet 获得）中，有一个版本`Zip()`接受一个可观察对象的集合并返回一个可观察的集合。有了它，你可以做这样的事情：

```
string[] requiredApprovals = …;

var approvedByAll = requiredApprovals
    .Select(required => approvals.Where(a => a.ApproverRole == required))
    .Zip();

approvedByAll.Subscribe(_ => SomeInterestingBusinessProcess()); 
```

但正如@Enigmativity 指出的那样，这只有在您可以确定每个人都以相同的顺序批准并且所有项目最终将被所有必需角色批准的情况下才有效。如果没有，您将需要一些比`Zip()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T18:16:37.457

问题本质上可以简化为`Set`从值流中创建一个值，其中值可能是无序的或本质上很多。

如果 N 是集合的基数，我们可以简单地假设该过程将在至少 N 类型的值（在这种情况下为角色）被推送之前不会继续。

这是 Zip 运算符的示例解决方案；也许这可以让你开始：

```
 public static IObservable<IList<T>> Zip<T>(this IList<IObservable<T>> observables)
    {
        return Observable.Create<IList<T>>(observer =>
        {
            List<List<T>> store = new List<List<T>>(Enumerable.Range(1, observables.Count).Select(_ => new List<T>()));

            return new CompositeDisposable(observables.Select((o, i) => 
                o.Subscribe(value =>
                {
                    lock (store)
                    {
                        store[i].Add(value);

                        if (store.All(list => list.Count > 0))
                        {
                            observer.OnNext(store.Select(list => list[0]).ToList());
                            store.ForEach(list => list.RemoveAt(0));
                        }
                    }
                }))
            );
        });
    } 
```

测试：

```
 Observable.Interval(TimeSpan.FromSeconds(0.5))
                  .GroupBy(i => i % 3)
                  .Select(gr => gr.AsObservable())
                  .Buffer(3)                      
                  .SelectMany(set => set.Zip())
                  .Subscribe(v => Console.WriteLine(String.Join(",", v))); 
```

这里的一个问题是，在形成组时您可能会丢失初始值，因此您可能希望通过将方法重写为`IObservable<IList<T>> Zip<TKey, T>(this IGroupedObservable<TKey, T> observables)`.

# jquery - AJAX 只调用一次

> ID：12539846
> 
> 赞同：0
> 
> 时间：2012-09-22T01:03:01.850
> 
> 标签：jquery, ajax, xmlhttprequest

我创建了一个 ajax 函数，用于预览上传的图像并将其保存到文件夹中。问题是ajax 只被调用一次。如果我选择的文件不是图像，则会返回一个字符串，并插入一个新的输入文件 html 来替换旧的文件输入字段。我对XHR不熟悉，只是对它有一个基本的了解。我的问题是，是否可以调用此 ajax 两次，如果可以，如何调用。目前 Firebug 只接收一个 aja 调用。之后，无论我选择什么文件，都没有任何反应。

```
var handleUpload = function (event) {   
var fileInput = document.getElementById('url2');
var session_user_id = <?php echo $session_user_id; ?>;
var profile_user_id = <?php echo $user_id; ?>   
var data = new FormData();
data.append('ajax', true);
data.append('file', fileInput.files[0]);
data.append('session_user_id', session_user_id);    
data.append('profile_user_id', profile_user_id);
var request = new XMLHttpRequest();

    request.upload.addEventListener('load',function(event) {
        $('#upload_progress').css('display', 'none');   
        });

    request.upload.addEventListener('error', function(event) {
        $('#uploaded').html('Upload Failed!');
        });

    //code below is part of callback of ajax
    request.addEventListener('readystatechange', function(event){

        if (this.readyState == 4){

        if (this.status == 200) {
            var links = document.getElementById('uploaded');
            var uploaded = eval(this.response);
            $('#uploaded').empty();
            if (uploaded[0] == 1 || uploaded[0] == 2 || uploaded[0] == 3) {
            $('#uploaded').html('Some error occured!');
            $('#container_for_url2').html('<input type="file" name="file" id="url2" />');                   
                } else {

            $('.preview_image_box2').html('<img width="' + uploaded[1] + '" height="' + uploaded[2] +'" style="position:relative;top:'+ uploaded[3]+'"  src="' + uploaded[0] + '"/>');  
            }
            }   
            } else {console.log('server replied with' + this.status)}               

        });

request.open('POST', 'ajax_upload_image_for_post.php');
request.setRequestHeader('Cache-Control', 'no-cache');
$('#upload_progress').css('display','block');
request.send(data);             
}; 
```

`url2`在这里，当输入文件字段中插入了文件时，我正在设置 ajax 调用。我怀疑这是问题所在。

```
$('#url2').change(function () {
handleUpload(); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:31:45.670

由于您要替换输入 #url2，因此 $('#url2').change() 将不起作用。尝试委派它

```
$('#container_for_url2').delegate('#url2', 'change', function() {
  handleUpload();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T01:43:04.333

线

```
$('#container_for_url2').html('<input type="file" name="file" id="url2" />'); 
```

implies that the element to which the `change` handler is attached, is overwritten by its own action.

You can overcome this by delegating to the element's container as follows :

```
$('#container_for_url2').on('change', '#url2', handleUpload); 
```

Note: We use `.on()` since jQuery 1.7 . `.bind()`, `.live()` and `.delegate()` are now deprecated.

## EDIT

... as I now realise you already know because I just read your comment under @suke's answer :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T01:54:19.460

Just in case it helps here is the format to using jquery for this. I usually like to keep things simple, but ajax is one of the things I do like jQuery for.

**THIS IS THE CODE WITH JQUERY with no plugins needed**

```
//Prepare params
var POSTParamsObject = {
    file : fileInput.files[0],
    session_user_id : session_user_id,
    profile_user_id : profile_user_id
}

//Function for handle upload
function handleUpload() {
    return $.ajax({
        url : 'ajax_upload_image_for_post.php',
        type : 'POST',
        data : POSTParamsObject,
        //dataType : 'json', //Uncomment if you don't use json as your response from server
        beforeSend: function ( xhr ) {
           $('#upload_progress').css('display','block');
        }/*,
        success : function(){//success code},
        error : function(){//error}
        */
   });
}    
//Run ajax call and respond to server response. First argument is the status 200 response, and second argument is to respond to errors 

$('#container_for_url2').on('change', '#url2', function(){

  $.when(handleUpload()).then(function(uploaded){//If request was successful...status 200   
    var links = document.getElementById('uploaded');
    $('#uploaded').empty();
    if (uploaded[0] == 1 || uploaded[0] == 2 || uploaded[0] == 3) {
       $('#uploaded').html('Some error occured!');
       $('#container_for_url2').html('<input type="file" name="file" id="url2" />');                   
    } else {
       $('.preview_image_box2').html('<img width="' + uploaded[1] + '" height="' + uploaded[2] +'" style="position:relative;top:'+ uploaded[3]+'"  src="' + uploaded[0] + '"/>');  
    }
  },
  function(response){//This is if there is a server error, or the wrong data type is returned
    console.log(response);
  });

}); 
```

# android - 如何使用 Eclipse 同时调试 Android App 和 Google-App-Engine 项目

> ID：12539847
> 
> 赞同：1
> 
> 时间：2012-09-22T01:03:17.097
> 
> 标签：android, eclipse, debugging, google-app-engine

Android 应用程序正在设备中运行。在开发机器上本地运行的 Google-app-engine 项目。正常的 Eclipse 调试适用于任何一个项目，只要为该项目运行一个 Eclipse 实例。但是，如果我有 2 个 Eclipse 实例正在运行（每个项目一个），那么 Android 应用程序在尝试通过 Eclipse 调试器启动时永远不会完成加载。想知道如果我可以同时调试两个项目是否在同一个工作区中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:22:32.170

是的，Android App 项目和 Appengine 项目需要在同一个工作区，然后你可以同时调试，没问题。

想必你的 Andriod 应用项目是 appengine 项目的一个客户端，你想在两者之间进行通信。如果在您的开发机器上的 Android 虚拟设备 (AVD) 中调试 Android 应用程序，那么您应该使用 localhost:8888 从 android 应用程序连接到 appengine servlet。（我实际上并没有对此进行测试，但似乎很清楚它应该以这种方式工作）。

但是，如果通过在与开发机器位于同一子网的物理设备上运行来调试 Android 应用程序，则在运行配置对话框（Eclipse 运行/运行配置菜单）中，将“--address=192.168.1.103”添加到程序参数下(x)- 参数选项卡。（但将 192.168.1.103 更改为您的开发机器的 IP 地址在本地网络上）。我很高兴地报告说这是可行的，并且是一起调试 android 和 appengine 应用程序的巧妙设置。

# android - 多个 ListView 可以共享同一个 FooterView 吗？

> ID：12539850
> 
> 赞同：0
> 
> 时间：2012-09-22T01:03:34.157
> 
> 标签：android

我在 ViewPager 中有两个同时可见的列表视图。我需要为每个创建单独的页脚视图吗？或者我可以与两者的页脚共享相同的视图吗？我需要根据状态添加删除视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:07:38.747

您不能安全地在多个点附加相同的视图。为每个列表创建一个单独的页脚视图。

# scala - 如何使用特征来描述算子？

> ID：12539855
> 
> 赞同：2
> 
> 时间：2012-09-22T01:04:51.723
> 
> 标签：scala, types, traits

我正在尝试定义一个特征来描述基于其他运算符的运算符。像这样的东西：

```
trait LessThanComparable[T] {
    def < (that: T) : Boolean

    def > (that: T) = that < this
} 
```

然后我使用它：

```
class Example(val x : Int) extends LessThanComparable[Example] {
    def < (that: Example) = x < that.x
} 
```

但我明白了：**值 < 不是类型参数 T 的成员**

我怎么能说那和这属于同一类型？还是我在尝试一些不可能的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:15:51.603

我认为这就是你想要的：

```
trait LessThanComparable[T <: LessThanComparable[T]] { this: T =>
  def <(that: T): Boolean

  def >(that: T) = that < this
}

class Example(val x: Int) extends LessThanComparable[Example] {
  def <(that: Example) = x < that.x
} 
```

为了能够说`that < this`，有两件事必须成立。

1.  `that`必须有一个`<`接受 a 的方法`T`，或者换句话说，`that`必须是 a `LessThanComparable[T]`。我们可以通过说 that`T`必须是 LessThanComparable[T] 或 的子类来确保这一点`T <: LessThanComparable[T]`。

2.  `this`必须是一个`T`。我们可以通过使用 self 类型来确保这一点`this: T =>`。

那么，

```
val a = new Example(5)
val b = new Example(4)

println(a < b)  // false
println(a > b)  // true
println(b < a)  // true
println(b > a)  // false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:03:35.457

更好的方法是遵循标准库中的`Ordered`和`Ordering`特征。前者类似于您上面的示例。但事实证明，后者使用“类型类”更容易、更灵活。

首先，定义一个类型类和一个 mixin 特征：

```
class Ord[T](val lessThan: (T, T) => Boolean)

trait CompareOps[T] { this: T =>
  def < (that: T)(implicit ord: Ord[T]) = ord.lessThan(this, that)
  def > (that: T)(implicit ord: Ord[T]) = ord.lessThan(that, this)
} 
```

现在，对于您的示例，您所要做的就是将类型类的实例放入隐式范围：

```
case class Example(x: Int) extends CompareOps[Example]

implicit val exampleOrd = new Ord[Example](_.x < _.x)

scala> Example(3) > Example(4)
res0: Boolean = false

scala> Example(3) < Example(4)
res1: Boolean = true 
```

通常，当您编写一个类时，您会放入`Ord[Example]`into`Example`的伴随对象。`Example`然后，当实例需要它时，它将自动处于隐式范围内。

`CompareOps`另外：如果你定义为一个类并使用隐式转换，你实际上不必扩展`CompareOps`，但这有点超出了这个答案的范围，所以我在 [这里](https://gist.github.com/3765066)写了。

# python - 蟒蛇挑战

> ID：12539856
> 
> 赞同：0
> 
> 时间：2012-09-22T01:05:00.040
> 
> 标签：python, recursion

我正在做硬币找零的问题。我已经完成了这个问题，它会打印出我需要多少硬币才能尽可能减少零钱，但是我如何更改我的程序以便它也打印这些硬币？

这是一个示例 I/O：

```
input: coin_change(48, [1, 5, 10, 25, 50])

output: [6, [25, 10, 10, 1, 1, 1]]

input: coin_change(48, [1, 7, 24, 42])

output: [2, [24, 24]] 
```

目前我的代码只返回 6。

顺便说一句，这只能通过递归来完成。不允许循环。

代码：

```
def change(C, V):
    def min_coins(i, aC):
        if aC == 0:
            return 0
        elif i == -1 or aC < 0:
            return float('inf')
        else:
            return min(min_coins(i-1, aC), 1 + min_coins(i, aC-V[i]))
    return min_coins(len(V)-1, C) 
```

下面的代码是我尝试过的，但它不适用于第二个输入

```
def giveChange(C, V, res = None):
    res=[] if res is None else res
    if len(V)==0:
        return len(res),res
    maxx=max(V)
    print maxx
    V.remove(maxx)
    ans=C//maxx
    if ans==0 and maxx<C :
        print maxx
        res +=[maxx]*ans
        return  len(res),res
    else:
        res += [maxx]*ans
        return  giveChange(C % maxx,V,res) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:43:16.640

可能不使用 maxx=max(V)

最优解可以包括小硬币，例如48=24+24，它有两个硬币，小于48=25+10+10+1+1+1。在这种情况下，虽然 25>24，但您必须使用更多的小硬币来制作 48。

因此，如果您的输入是 (48, [1, 7, 24, 42])，您将陷入第二种情况并得到 48 = 42+1+1+1+1+1+1。您可以将第二个发布的代码与您的第一个代码结合起来，添加一个列表作为参数来存储更改并使用相同的递归设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:13:28.350

您的第一个代码将进行一些更改。一个函数不仅可以返回 count，还可以返回一个列表甚至 (count, [coins]) 元组。您可能还想对 V 进行排序。

# javascript - 使用 Rally SDK，我如何为标签过滤纸板？

> ID：12539859
> 
> 赞同：1
> 
> 时间：2012-09-22T01:05:24.223
> 
> 标签：javascript, rally

我想创建一个纸板，显示具有特定标签的给定类型（用户故事、测试用例等）的所有工作产品。我尝试将以下过滤器语句添加到 storeConfig，但没有出现：过滤器：[{属性：'Tag'，//也尝试过属性：'Tags'operatore：'='，值：'MyTag'}]

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:05:24.223

工作产品的标签是一个集合，因此要过滤它们，您需要使用 Tags.Name 作为属性。一旦你这样做了，你的过滤器就会做你想做的事。

# ios - ios 6.0 中不推荐使用组表视图背景颜色

> ID：12539861
> 
> 赞同：16
> 
> 时间：2012-09-22T01:05:58.047
> 
> 标签：ios, xcode, interface-builder, ios6

> **可能重复：**
> [在 iOS 6 上不推荐使用 groupTableViewBackgroundColor 吗？](https://stackoverflow.com/questions/12452810/is-grouptableviewbackgroundcolor-deprecated-on-ios-6)

我在 iOS 6 的情节提要上收到此警告。我会悬停以查看替换方法，但由于我正在查看情节提要，它什么也没显示。如何轻松设置背景颜色？似乎我应该能够从 Interface Builder 中做到这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-23T19:44:52.090

打开你的故事板，检查属性检查器中的所有视图，并将所有具有分组表视图背景颜色的视图更改为任何其他颜色，我将我的更改为白色，所有警告都消失了。

![属性检查器](../Images/9e53e0b3d09cb8eea5629c7f89efab95.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-22T17:36:32.963

在代码中，您可以使用以下内容进行设置：

```
tableView.backgroundColor = [UIColor blueColor];
tableView.backgroundView = nil; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T16:43:01.843

我注意到，在 iOS 模拟器中，groupTableViewBackgroundColor 没有在 iOS 6 中显示，而是在 iOS 5 中显示。在装有 iOS 6 的设备上，它仍然看起来像在 iOS 5 中。有趣的一点是，模拟器仍然显示 groupTableViewBackgroundColor 分组表，所以我认为除了 iOS 6 中的分组表视图之外，不允许将此颜色用于其他视图。

# ajax - IOS6 和 Safari 照片上传 - File API + Canvas + jQuery Ajax 异步上传和调整文件大小

> ID：12539862
> 
> 赞同：13
> 
> 时间：2012-09-22T01:06:05.607
> 
> 标签：ajax, jquery, ios6, fileapi

IOS6已经发布，我一直在测试照片上传。

它运行良好，但对于 3G 以上的较大图像，它如预期的那样慢。

感谢 File API 和 Canvas，可以使用 JavaScript 调整图像大小。我希望如果我在尝试上传图像之前调整图像大小，它们会上传得更快 - 有助于快速的用户体验。随着智能手机处理器的改进速度比网络速度快得多，我相信这个解决方案是赢家。

Nicolas 为图像大小调整提供了出色的解决方案：

[上传前调整图像大小](https://stackoverflow.com/questions/961913/image-resize-before-upload)

但是，我很难用 jQuery 的 Ajax 来实现它。感谢任何建议或帮助，因为此代码可能对 IOS6 后的移动 Web 应用程序开发非常有用。

```
var fileType = file.type,
    reader = new FileReader();

reader.onloadend = function () {
    var image = new Image();
    image.src = reader.result;

    image.onload = function () {

        //Detect image size
        var maxWidth = 960,
            maxHeight = 960,
            imageWidth = image.width,
            imageHeight = image.height;
        if (imageWidth > imageHeight) {
            if (imageWidth > maxWidth) {
                imageHeight *= maxWidth / imageWidth;
                imageWidth = maxWidth;
            }
        } else {
            if (imageHeight > maxHeight) {
                imageWidth *= maxHeight / imageHeight;
                imageHeight = maxHeight;
            }
        }

        //Create canvas with new image
        var canvas = document.createElement('canvas');
        canvas.width = imageWidth;
        canvas.height = imageHeight;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(this, 0, 0, imageWidth, imageHeight);

        // The resized file ready for upload
        var finalFile = canvas.toDataURL(fileType);

        if (formdata) {

            formdata.append("images[]", finalFile);

            $.ajax({
                url: "upload.php",
                type: "POST",
                data: formdata,
                dataType: 'json',
                processData: false,
                contentType: false,
                success: function (res) {
                    //successful image upload
                }
            });

        }
    }
}
reader.readAsDataURL(file); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-22T19:14:13.480

我刚刚开发了一个用于客户端**画布**图像大小调整的 jQuery 插件。它还处理**方向**和**iOS6 压缩图像**问题。

你可以试试： http: [//gokercebeci.com/dev/canvasresize](http://gokercebeci.com/dev/canvasresize)

用法：

```
$.canvasResize(file, {
               width   : 300,
               height  : 0,
               crop    : false,
               quality : 80,
               callback: function(dataURL, width, height){

                         // your code

               }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-22T18:34:16.793

自从第二个 iOS6 测试版发布以来，我一直在使用上传功能。以下代码适用于我：

把它放在你的 HTML 页面的头部 -

```
<script>window.onload = function() {
var canvas = document.createElement('canvas');
var ctx = canvas.getContext("2d");

var fileSelect = document.getElementById("fileSelect"),
    input = document.getElementById("input");

    input.addEventListener("change", handleFiles);

    //hides ugly default file input button  
    fileSelect.addEventListener("click", function (e) {
        if (input) {
            input.click();
        }
        e.preventDefault();
    }, false);

function handleFiles(e) {
    var reader = new FileReader;
    reader.onload = function (event) {
        var img = new Image();
        img.src = reader.result;
        img.onload = function () {
            var maxWidth = 320,
                maxHeight = 350,
                imageWidth = img.width,
                imageHeight = img.height;

            if (imageWidth > imageHeight) {
                if (imageWidth > maxWidth) {
                    imageHeight *= maxWidth / imageWidth;
                    imageWidth = maxWidth;
                }
            } else {
                if (imageHeight > maxHeight) {
                    imageWidth *= maxHeight / imageHeight;
                    imageHeight = maxHeight;
                }
            }
            canvas.width = imageWidth;
            canvas.height = imageHeight;

            ctx.drawImage(this, 0, 0, imageWidth, imageHeight);

            // The resized file ready for upload
            var finalFile = canvas.toDataURL("image/png");

            var postData = 'canvasData=' + finalFile;
            var ajax = new XMLHttpRequest();
            ajax.open('POST', 'save.php', true);
            ajax.setRequestHeader('Content-Type', 'canvas/upload');

            ajax.onreadystatechange = function () {
                if (ajax.readyState == 4) {
                    //just to visually confirm it worked...
                    window.open(canvas.toDataURL("image/png"), "mywindow");
                }
            }
            ajax.send(postData);
        }
    }
    reader.readAsDataURL(e.target.files[0]);
}
}
</script> 
```

这是 HTML -

```
 <div style="width:320px;position:absolute;z-index:9;top:387px;">
<button style="width:60px;" id="fileSelect">upload</button>
<input type="file" id="input" name="input" accept="image/*" style="display:none;"></div> 
```

这是 PHP -

```
<?php
if (isset($GLOBALS["HTTP_RAW_POST_DATA"]))
{
    // Get the data
   $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];

   // Remove the headers (data:,) part.  
   // A real application should use them according to needs such as to check image type
   $filteredData=substr($imageData, strpos($imageData, ",")+1);

   // Need to decode before saving since the data we received is already base64 encoded
   $unencodedData=base64_decode($filteredData);

   // Save file.  This example uses a hard coded filename for testing, 
   // but a real application can specify filename in POST variable
   $fp = fopen( 'users/user_photo.png', 'wb' );
   fwrite( $fp, $unencodedData);
   fclose( $fp );
 }
 ?> 
```

我遇到的唯一问题是在不旋转 90 度的情况下从相机加载图像。

希望这会有所帮助，如果您对代码有任何问题，请告诉我（这是我的第一篇文章）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T19:27:54.437

鉴于我们正在处理移动浏览器上的大图像和内存问题，我想看看是否可以找到一个轻量级的解决方案，避免创建重复的画布并执行其他图像操作，只是为了检测和调整大小。

看来，如果 Mobile Safari 确实垂直挤压了太大的图像，那么它的比例保持不变。

所以现在在我什至在画布上渲染图像之前，我使用了一个非常快速的经验法则，我只需检查浏览器是否是移动 iDevice `navigator.userAgent.match(/(iPod|iPhone|iPad)/)` ...并且图像高度或宽度大于 2000 pix，在这种情况下我知道它会被压扁。在这种情况下，`canvasContext.drawImage()`我将图像高度指定为比给定图像大小调整目标通常应该高 4 倍。根据我所见，Mobile Safari 将图像压缩了 4 倍。

然后我渲染图像，它第一次渲染不失真，将预拉伸的图像压缩回正常的 X:Y 比例。没有上述 100% 解决方案使用的任何其他画布元素或上下文或测试渲染或像素迭代。

我确信可能存在一些边缘情况，并且图像大小限制可能不准确，但对于我的应用程序，我想要一个快速的解决方案。

# ruby-on-rails-3 - 使用 Compass 将 Susy 导入 Rails 项目时出现问题

> ID：12539863
> 
> 赞同：2
> 
> 时间：2012-09-22T01:06:11.457
> 
> 标签：ruby-on-rails-3, sass, susy-compass

我已经使用以下内容开始了一个新的 Rails 项目`gemfile`：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

group :development do
  gem 'sqlite3'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'compass-rails'
  gem 'susy'
  gem 'sassy-buttons'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'devise' 
```

然后我尝试`@import "susy";`进入我的`application.css.scss`文件，但失败并出现以下错误：

```
Sass::SyntaxError in Devise/sessions#new

Showing /Users/ashleyconnor/Development/rails/myapp/app/views/layouts/application.html.erb where line #5 raised:

File to import not found or unreadable: susy.
Load paths:
  Sass::Rails::Importer(/Users/ashleyconnor/Development/rails/myapp/app/assets/stylesheets/application.css.scss)
  /Users/ashleyconnor/Development/rails/myapp/app/assets/stylesheets
  /Users/ashleyconnor/.rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.12.2/frameworks/blueprint/stylesheets
  /Users/ashleyconnor/.rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.12.2/frameworks/compass/stylesheets
  /Users/ashleyconnor/.rvm/gems/ruby-1.9.3-p194@myapp/gems/compass_twitter_bootstrap-2.0.3/stylesheets
  /Users/ashleyconnor/.rvm/gems/ruby-1.9.3-p194@myapp/gems/sassy-buttons-0.1.4/stylesheets
  Compass::SpriteImporter
  (in /Users/ashleyconnor/Development/rails/myapp/app/assets/stylesheets/application.css.scss) 
```

导入`sassy-buttons`有效，但`susy`由于某种原因无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:30:36.910

如果您遇到此问题，那么您可能正在使用 POW。

事实证明，POW 没有看到所需的插件，因此 SASS 无法编译。

一个 hacky 解决方法是`rails s`每次将新的 Compass 插件导入 SASS 文件时运行。更好的是转储 POW 直到它被修复。

# ios - 如何在 OpenGL Es 2.0 中正确更新顶点数组？

> ID：12539864
> 
> 赞同：10
> 
> 时间：2012-09-22T01:06:20.653
> 
> 标签：ios, opengl-es-2.0, vertex-buffer

当我在 OpenGL 2.0 中更新 iOS 上的顶点数组时，原始顶点数据保留在屏幕上——即第一次刷新是持久的（我发送到 GPU 的初始点集每帧都被渲染），但第二次刷新，第 3 次，第 4 次，.. 第 n 次刷新似乎都覆盖了相同的内存。

所以我在做：

```
vector<VertexType> rawDynamicData ;

glGenVertexArraysOES( 1, &va ) ;        CHECK_GL ;
glBindVertexArrayOES( va ) ;            CHECK_GL ;
glGenBuffers( 1, &vb ) ;                CHECK_GL ;
glBindBuffer( GL_ARRAY_BUFFER, vb ) ;   CHECK_GL ;

glBufferData( glBufferData(
  GL_ARRAY_BUFFER, //Specifies the target buffer object.
  rawDynamicData.size() * sizeof( VertexType ),
  &rawDynamicData[0],
  GL_DYNAMIC_DRAW  // I plan to update the data every frame
) ;  CHECK_GL ; 
```

在随后的帧中，我只是再次调用：

```
// update the data
glBufferData( glBufferData(
  GL_ARRAY_BUFFER, //Specifies the target buffer object.
  rawDynamicData.size() * sizeof( VertexType ),
  &rawDynamicData[0],
  GL_DYNAMIC_DRAW  // I plan to update the data every frame
) ;  CHECK_GL ; 
```

我也试过

```
//update the data
GLvoid* vbo_buffer = glMapBufferOES(GL_ARRAY_BUFFER, GL_WRITE_ONLY_OES); 
memcpy(vbo_buffer, &rawDynamicData[0], rawDynamicData.size()*sizeof(VertexType) );
glUnmapBufferOES(GL_ARRAY_BUFFER); 
```

但是通过这两种方式，我得到了这个：

![在此处输入图像描述](../Images/046cf98eb5c12d01fdc98f618c6b4b8a.png)

白点是初始数据，红点是后续调用的结果`glBufferData`

所以这个问题有几个部分关于 OpenGL ES 2.0 中的动态 vbo：

1.  创建动态顶点缓冲区的正确命令顺序是什么，其元素将*在每一帧上**完全*更新？

**   **顶点缓冲区可以在帧之间增长吗？** 还是我必须冲洗完全相同的尺寸？

    *   我知道使用“客户端内存”指针，您可以在 OpenGL ES 2.0 中执行此操作（以避免 memcpy）还是不推荐使用，应该专门使用顶点缓冲区？* 

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T10:56:23.363

## 失火#1

我在[这里找到了一个答案，](http://www.gamedev.net/topic/418056-memory-array-vs-dynamic-vbo-which-is-better/#)它指出我`glSubBufferData`在数组中使用停放数据，并且`glBufferData`仅用于初始分配。最终这不起作用（如果 vb 太大，只会更新前 3 个元素），

所以，

```
glBufferData( glBufferData(
  GL_ARRAY_BUFFER, //Specifies the target buffer object.
  rawDynamicData.size() * sizeof( VertexType ),
  0, // NO INITIAL DATA
  GL_DYNAMIC_DRAW  // I plan to update the data every frame
) ;  CHECK_GL ; 
```

然后对于第一次*和*后续更新：

```
// Update the whole buffer
glBufferSubData(GL_ARRAY_BUFFER, 0,
  rawDynamicData.size()*sizeof(VertexType), &rawDynamicData[0]) ; 
```

这似乎奏效了。

## 似乎。但它没有。

我唯一能做的就是退出使用**顶点缓冲区**并使用客户端内存**顶点数组**。

这看起来如下：

```
// do all your vertex attrib/glVertexAttrib enable commands:
glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(VertexPC), &debugPoints->data[0].pos.x) ;
CHECK_GL ;
glEnableVertexAttribArray(0);  CHECK_GL ;

// ..do glVertexAttrib* for all attributes you have..

// then just flush your draw command
glDrawArrays(GL_POINTS, 0, debugPoints->data.size()); 
```

简而言之，我发现将顶点缓冲区用于动态数据*要么*具有挑战性*，要么*不受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T03:28:05.523

对于那里的 Android 用户，我刚刚确认可以在 Android 上的 OpenGL ES 2.0 中使用顶点属性数组来获得可变形几何体，在一个小测试中。烦人的事情是您不能将指针传递给您自己的数组，而是必须使用 FloatBuffer（或类似类型）。示例代码：

初始化：

```
 // initialize vertex byte buffer for shape coordinates
    ByteBuffer bb = ByteBuffer.allocateDirect(
            // (number of coordinate values * 4 bytes per float)
            coords.length * 4);
    // use the device hardware's native byte order
    bb.order(ByteOrder.nativeOrder());

    // create a floating point buffer from the ByteBuffer
    vertexBuffer = bb.asFloatBuffer();
    // add the coordinates to the FloatBuffer
    vertexBuffer.put(coords);
    // set the buffer to read the first coordinate
    vertexBuffer.position(0); 
```

绘图代码：

```
 // get handle to vertex shader's vPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
    checkGlError("glGetAttribLocation");

    // Enable a handle to the triangle vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);
    checkGlError("glEnableVertexAttribArray");

    float newValue = (float) Math.sin((float) (frame++) / 1000) + 1;
    System.out.println(newValue);

    vertexBuffer.put(0, newValue);

    // Prepare the triangle coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false, VERTEX_STRIDE, vertexBuffer); 
```*

# r - 内联和 Rcpp 包的错误

> ID：12539867
> 
> 赞同：2
> 
> 时间：2012-09-22T01:06:30.493
> 
> 标签：r, rcpp

我在 Windows 7 上使用 R 2.15.1，运行以下 R 代码时收到错误消息。有人帮助我吗？

```
> library(inline)
> 
> if( require( Rcpp ) ){
+   fx <- cxxfunction( signature(x = "integer", y = "numeric" ) , '
+   return wrap( as<int>(x) * as<double>(y) ) ;
+   ', plugin = "Rcpp" )
+ }
Loading required package: Rcpp
cygwin warning:
  MS-DOS style path detected: C:/R/R-215~1.1/etc/i386/Makeconf
  Preferred POSIX equivalent is: /cygdrive/c/R/R-215~1.1/etc/i386/Makeconf
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
  Syntax error: "(" unexpected (expecting "fi")
  make: *** [file11a82c84184d.dll] Error 2

ERROR(s) during compilation: source code errors or compiler configuration errors!

Program source:
  1: 
  2: // includes from the plugin
  3: 
  4: #include <Rcpp.h>
  5: 
  6: 
  7: #ifndef BEGIN_RCPP
  8: #define BEGIN_RCPP
  9: #endif
 10: 
 11: #ifndef END_RCPP
 12: #define END_RCPP
 13: #endif
 14: 
 15: using namespace Rcpp;
 16: 
 17: 
 18: // user includes
 19: 
 20: 
 21: // declarations
 22: extern "C" {
 23: SEXP file11a82c84184d( SEXP x, SEXP y) ;
 24: }
 25: 
 26: // definition
 27: 
 28: SEXP file11a82c84184d( SEXP x, SEXP y ){
 29: BEGIN_RCPP
 30: 
 31:   return wrap( as<int>(x) * as<double>(y) ) ;
 32:   
 33: END_RCPP
 34: }
 35: 
 36: 
Error in compileCode(f, code, language = language, verbose = verbose) : 
  Compilation ERROR, function(s)/method(s) not created! cygwin warning:
  MS-DOS style path detected: C:/R/R-215~1.1/etc/i386/Makeconf
  Preferred POSIX equivalent is: /cygdrive/c/R/R-215~1.1/etc/i386/Makeconf
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
Syntax error: "(" unexpected (expecting "fi")
make: *** [file11a82c84184d.dll] Error 2
In addition: Warning message:
running command 'C:/R/R-2.15.1/bin/i386/R CMD SHLIB file11a82c84184d.cpp 2> file11a82c84184d.cpp.err.txt' had status 1 
> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:11:42.377

在 Linux 下工作（尽管我做了一些小改动/简化）：

```
R> library(inline)
R> fx <- cxxfunction(signature(x = "integer", y = "numeric" ),
+                   body = 'return wrap( as<int>(x) * as<double>(y) );',
+                   plugin = "Rcpp" )
R> print(fx(2, 2.5))
R> [1] 5
R> 
```

如果您将环境变量设置为`CYGWIN`，`nodosfilewarning`您将在 Windows 上获得更少的线路噪音。

# opengl - 如何彻底摆脱阴影粉刺和错误的自我阴影？

> ID：12539869
> 
> 赞同：2
> 
> 时间：2012-09-22T01:07:11.457
> 
> 标签：opengl, graphics, 3d, glsl, shadow

我正在做简单的阴影映射，在处理阴影痤疮和错误的自我阴影方面遇到了问题，只是无法摆脱它。我已经尝试向深度值添加偏差并将背面渲染到深度缓冲区，但它并没有消除所有伪影。我也有选择导致彼得潘宁的正确偏见的问题。

[这里我有一些截图。](https://picasaweb.google.com/107094611410670291743/ShadowMapping?authkey=Gv1sRgCJK0j92UxtufhwE#)

所以我的问题是：

1.  是否有一种强大（且简单）的方法可以完全消除阴影粉刺和错误的自我阴影？

2.  如何选择完美的偏差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:41:59.550

有一种称为[方差阴影贴图](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch08.html)的技术会受到其自身特殊伪影的影响，但它非常擅长消除阴影粉刺和错误的自阴影。它被设计为阴影贴图的非线性过滤器，以避免由于低分辨率导致的锯齿。

简而言之，它估计深度图的方差，并使用它来找到阴影与深度的平滑、保守估计。您需要注意缓冲区精度，因为大多数实现似乎以滥用其动态范围的方式评估差异。

# c - 仅使用按位运算将两个整数相除

> ID：12539877
> 
> 赞同：0
> 
> 时间：2012-09-22T01:09:57.587
> 
> 标签：c, int, bit-manipulation, division

> **可能重复：**
> [用位运算符实现除法](https://stackoverflow.com/questions/5284898/implement-division-with-bit-wise-operator)

我最近更深入地了解了按位函数，并开始使用按位运算符实现基本的算术函数。到目前为止，我已经得到了`(+, -, *)`. 但是，我不确定如何处理除法。我知道我可以以某种方式使用乘法，但也不确定如何使用该方法来解决这个问题。

那么我将如何仅使用按位运算符来实现除法：`(|, &, ~, ^, >>, <<)`在 C 中？对于任何询问的人，这不是功课，只是个人知识。

如果你喜欢，你可以在代码中调用下面的函数来使它更容易（这些是预先写好的）

```
int badd(int n1, int n2);
int bsub(int n1, int n2);
int bmult(int n1, int n2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:24:02.427

好吧，假设您有可用的标准库，您可以在 C 中完全不使用任何运算符来划分两个整数：

```
int result = div(a, b).quot; 
```

[**注意**：这个答案纯粹是修辞，但是当标准库（和语言本身）支持它时，它被放在那里是为了表明试图用 C 编写整个除法函数是愚蠢的。当答案已经触手可及时，为什么还要重新编写轮子（即使只是为了学习）？]

# xamarin.ios - 是否有 Monotouch 颜色选择器控件？

> ID：12539880
> 
> 赞同：2
> 
> 时间：2012-09-22T01:10:31.663
> 
> 标签：xamarin.ios, monotouch.dialog, color-picker

我看到一大堆 iOS 开源通用控件来选择颜色，但我没有找到任何可以用于 C# 中的 Monotouch 的东西。我看过 Monotouch.Dialog 但看不到它。

这是我发现的一些iOS：

[http://maniacdev.com/2011/11/open-source-ios-color-picker-components-roundup/](http://maniacdev.com/2011/11/open-source-ios-color-picker-components-roundup/)

有没有人遇到过这样的情况，或者可以提供一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:12:46.413

我知道你发布请求已经有一段时间了，但我还需要一个用于单点触控的颜色选择器，所以我开发了一个，我想与任何感兴趣的人分享代码。

你可以在 github 上找到它：http: [//yiannisbourkelis.github.com/AdvancedColorPicker/](http://yiannisbourkelis.github.com/AdvancedColorPicker/)

这是一个非常简单易用的组件，您可以在任何免费或商业应用程序中使用它。

# css - 缩小时如何将背景图像显示到底部？

> ID：12539881
> 
> 赞同：0
> 
> 时间：2012-09-22T01:10:37.343
> 
> 标签：css

这个网站[http://www.ideaseat.com/TRANSFER/MosaicFIsite/](http://www.ideaseat.com/TRANSFER/MosaicFIsite/)有一个巨大的背景图片。当我缩小而不是水平时，它会垂直显示所有内容。我需要背景图像一直到底部而不设置高度。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:34:51.467

`body`在你的 CSS 中，为你的元素指定这个：

```
body {
    background-image: url("assets/main_bg.jpg");
    background-repeat: repeat-y;
} 
```

# c - fork()：子进程检查父进程是否死亡的方法？

> ID：12539884
> 
> 赞同：7
> 
> 时间：2012-09-22T01:11:29.183
> 
> 标签：c, linux

**背景**

我正在用 C 编写一个共享库，与 动态链接`LD_PRELOAD`，这意味着拦截和覆盖来自预加载它的应用程序的网络调用，例如`socket()`, `connect()`, `recv()`,`send()`等。

在库的初始化中，我使用`pthread_create()`. 该线程轮询一些映射到用户空间的内核内存。

该库具有足够的通用性，可以处理（但不限于）网络基准应用程序，例如*netperf*、*iperf*、*sockperf*。

**我的问题**

一切正常，在大多数情况下，生活都是甜蜜的，除了一个。去魔化的应用程序。例如，如果我启动*netserver*（*netperf*基准测试应用程序的服务器端）作为守护程序，即没有`-D`参数，应用程序首先要做的事情之一就是调用`fork()`. 在 fork 上，父级使用关闭`exit(EXIT_SUCCESS)`，子级监听连接。父母退出的事实杀死了我的轮询线程。

所以我想要实现的是让孩子在父母离开时产生一个新的轮询线程。我可以拦截和覆盖`fork()`电话，但从根本上说，我怎样才能让孩子知道父母是否已经走了？我不能做任何假设，因为库必须是通用的。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T01:18:05.727

您可以定期轮询 getppid() 函数。一旦它开始返回 '1' （初始化进程的 id） - 你的父母已经死了。

**更新**

摘自“man pthread_create”：

> 新线程以下列方式之一终止： ...
> 
> *   进程中的任何线程调用exit(3)，或者主线程执行main() 的返回。这会导致进程中的所有线程终止。

因此，如果您的线程是由调用 exit 的 netserver 进程创建的 - 是的，该线程将被终止

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T01:30:52.720

您可以使用[`ptread_atfork(3)`](http://linux.die.net/man/3/pthread_atfork)在孩子中启动您的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T18:18:31.800

大约一年后，我有了自己问题的答案，即“子进程如何知道其父进程已死？”

好吧，孩子可以使用`getppid()`. 如果父 PID 为 1，则表示子进程已重新成为该进程的父`init`进程。于是，父母走了。

例如：

```
void child_fork(void)
{
    int parent_pid;
    usleep(1);
    parent_pid = (int)getppid();

    if (parent_pid == 1)
        run_my_polling_thread();
} 
```

注意：当一个进程分叉时，父进程会进入睡眠状态。子进程先运行，再唤醒父进程（对于Copy-on-Write优化，这里不再赘述）。这里的`usleep(1)`调用是为了让孩子立即入睡，以便父母有时间醒来并终止。在孩子醒来之前，它将重新成为`init`.

现在，在 lib 初始化时，我只需要调用：

```
__register_atfork(NULL, NULL, child_fork, NULL) 
```

但是，此解决方案并未涵盖所有情况。例如，如果父母有多个孩子怎么办？我真的希望他们都启动一个投票线程吗？

现在这对我来说是一个可以接受的解决方案，尽管它并不理想。

# encryption - 文件加密策略（共享与唯一密钥）

> ID：12539889
> 
> 赞同：1
> 
> 时间：2012-09-22T01:14:20.370
> 
> 标签：encryption, amazon-s3, amazon-simpledb

我正在开发一个项目来分别管理 S3 和 SimpleDB 中的构建工件和相应的元数据。

我想要关于加密上传到 S3 存储桶的构建工件的不同策略的反馈。

在存储之前对文件进行对称加密。

*   从文件中读取秘密。
*   直接 AES256 加密要存储在 S3 中的文件，并以此秘密为密钥。
*   将加密文件上传到 S3。
*   解密将通过从 S3 下载文件并使用相同的密钥解密来完成。

用随机字符串加密文件。用文件对称加密和存储字符串。

*   从文件中读取秘密。
*   生成随机字符串。用随机字符串加密文件。
*   加密随机字符串。
*   在 SimpleDB 中存储加密的随机字符串。将通过从 S3 下载对象以及从 SimpleDB 下载字符串来执行解密。用秘密解密加密的字符串，并使用未加密的字符串解密文件。

我倾向于后者，因为它提供了通过使用新秘密重新加密存储在 SimpleDB 中的字符串来旋转加密密钥的能力。

有谁解决了这个问题，可以评论每种策略的优缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:39:47.637

从密码学的角度来看，这两种方案都提供了相似的安全性。主要区别在于组织特征。第二种方案使您能够通过简单地删除 SimpleDB 使所有加密文件不可读。此外，正如您所说，您可以更改密码以解密文件密钥。这几乎就是解密密钥存储在 LUKS 分区上的方式。所以我也倾向于第二个版本。

如果您希望不同的人可以访问这些文件，我会考虑使用混合方案，即存储使用公钥系统加密的文件密钥。

顺便提一句。您为加密选择了哪种模式？

# java - 在 Eclipse 中使用自定义库会引 发 ClassNotFoundException

> ID：12539890
> 
> 赞同：1
> 
> 时间：2012-09-22T01:14:21.430
> 
> 标签：java, eclipse, classnotfoundexception, buildpath

我正在使用 JSP 开始 Web 开发，并且我一直在开发我的应用程序或一段时间。我有一个自定义日志记录类，在我的个人库中。我不想`jar`每次进行更改时都将库导出到文件中，因此我通过右键单击我的 Web 应用程序将我的 Eclipse 库添加到构建路径中，转到`Build Path --> Projects --> Add --> (library name)`.

当我将 Eclipse 导入到我的 Java 类中时，它不会出现错误。虽然，我从我的应用程序的一个类（已导入我的自定义日志记录类）中调用了一个方法，但它会抛出一个`ClassNotFoundException`.

我在网上看过，并且（如果我错了，请纠正我）看起来解决这个问题的方法是将我的库导出到一个`jar`文件并将其放在`/(project)/WebContent/WEB-INF/lib`文件夹下，然后将其放入构建路径中。

我不想这样做，因为我经常对我的库进行很多更改。那么如何让 Tomcat 识别我的库在构建路径中而不导出它呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:31:20.213

我通常尽量不回答一个建议你做完全不同的事情的问题，但在这种情况下，我认为这是有道理的。

所以，首先..记录是一个“已解决的问题”。这正是大多数人不应该重新发明的那种轮子。在 LogBack 和 SLF4J 上记录日志。如果你有一些非常特殊的情况，你应该做的最多的就是实现一个新的 Appender。

现在，对于更一般的问题。我经常向苦苦挣扎的开发人员提出的建议是消除他们的项目对任何特定 IDE 的依赖。如果您的项目被配置为可以从命令行构建、调试和打包，那么您将拥有更轻松的时间。然后你可以继续使用你的 IDE——只是不要让你的项目依赖它。

有很多方法可以做到这一点，但一种流行的方法相当好，并且与 Eclipse 和许多其他 IDE 集成，是 Maven。

如果您的实用程序库和依赖它的项目都是使用 Maven 构建的，那么您可以简单地声明（在您项目的 Maven 配置中）它依赖于您的实用程序库。

然后，您可以在实用程序库的项目中简单地执行“mvn install”，您的依赖项目将获取更改。

一旦你完成了所有这些工作，你就可以将 Maven 项目导入 Eclipse，它也将在那里工作。

# python - 需要 py.test 在来自 python 日志模块的日志文件中记录断言错误

> ID：12539897
> 
> 赞同：4
> 
> 时间：2012-09-22T01:16:19.083
> 
> 标签：python, assert, pytest

需要 py.test 在来自 python 日志记录模块的日志文件中记录断言错误。该测试设置了 python 日志记录模块，并且所有日志都按预期进行。我在整个测试中都使用了断言语句。但是当遇到断言错误时，这些消息不会记录在 python 日志输出中，而是记录在命令控制台中。

有没有办法让 py.test 在测试的日志输出中记录断言错误？

现在错误在命令控制台中，但是如果这些断言错误也被记录为python日志输出的一部分，那么所有的日志消息都被捕获在一个地方，那就太好了。此外，对于长时间运行的测试，在整个测试完成之前我看不到错误，这可能需要很长时间才能等待。如果我能立即看到断言错误，那就太好了，这样我就可以决定采取行动了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T21:22:11.870

您可以通过在 conftest.py 文件中使用 pytest_runtest_call 挂钩来实现此目的：

```
import logging

def pytest_runtest_call(__multicall__):
    try:
        __multicall__.execute()
    except KeyboardInterrupt:
        raise
    except:
        logging.exception('pytest_runtest_call caught exception:')
        raise 
```

pytest_runtest_call 钩子负责实际运行测试函数，但不负责捕获异常并报告它们。这意味着它是捕获异常并将其交给日志记录的理想场所。

而不是实际改变调用测试函数的方式，而是`__multicall__`简单地调用如果没有这个钩子的话会被调用的钩子。

请注意，钩子记录的异常将比 py.test 正常报告的异常长得多。这是因为日志记录不会将堆栈截断为只是测试函数，如果需要，您可以自己添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-24T11:33:54.560

如果您想在日志记录中出现 pytest 样式断言错误，可以使用`pytest_exception_interact`conftest.py 文件中的钩子：

```
import logging

def pytest_exception_interact(report):
    logging.error(f'Test exception:\n{report.longreprtext}') 
```

# linux - “转码”复制视频/音频编解码器

> ID：12539898
> 
> 赞同：1
> 
> 时间：2012-09-22T01:16:38.700
> 
> 标签：linux, ffmpeg, h.264, transcode, image-stabilization

我拍了一些非常不稳定的视频，然后上网尝试寻找如何稳定它。我遇到了这个使用[转码的](https://bitbucket.org/france/transcode-tcforge/downloads)[不错的博客](http://blog.hamoid.com/stabilize-video-in-ubuntu-linux)。按照博客的说明，它工作得非常好，但最终结果有很多压缩伪影。我想这主要是由于使用 xvid 作为新的编解码器。

我的意图是重用相机最初使用的编解码器，即 H.264/AVC，但我还没有找到这样做的方法（使用编码器 -y mov... 或 -y ffpmeg 遇到各种死胡同。

特别是在使用 -y ffmpeg -F "-vcodec copy -acodec copy" 时，它会打印出：

```
[export_ffmpeg.so] warning: Video template standard must be one of pal/ntsc 
```

但运行

```
ffmpeg -i input.mov -vcodec copy -acodec copy output.mov 
```

没有问题。

关于如何做到这一点的任何想法？还是在 linux 上稳定视频的替代方法？

# .net - 如何使用 U2 Toolkit .net 1.1.1 U2NETDK 创建 EDMX

> ID：12539899
> 
> 赞同：0
> 
> 时间：2012-09-22T01:16:43.147
> 
> 标签：.net, entity-framework-4.1, universe, u2netdk

我正在尝试使用新的 U2 Toolkit .net U2.Data.Client 创建实体数据模型。

我已经浏览了 EntityFrameWork 示例，该示例已经创建了一个可以正常工作的 Customer.edmx 文件。

我现在想创建自己的实体数据模型，但不确定从哪里开始。

我尝试创建一个空模型并手动添加我的实体，但不确定如何将它们链接到表。

我也尝试连接到 Univese 数据库，但不确定如何连接到数据库。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:43:20.420

我们正在为 U2 数据库开发 Visual Studio 插件。它将允许服务器资源管理器集成，因此您可以使用 DataSet Designer 或 EDM Designer。在服务器资源管理器中，您将看到表、视图和子例程。我们很快就会去 EAP。

现在，您可以执行以下操作：

*   创建空模型。
*   从 EDM Designer 中，删除一个实体，给一些名称
*   创建两个属性，ID (int) 和 FirstName (string)
*   例如，学生、学生、ID、名字
*   现在，在 XML 编辑器中打开 student.edmx 文件。例如，右键单击 student.edmx 文件并选择打开方式-> XML 文本编辑器
*   您将看到 SSDL、CSDL 和 MSL
*   CSDL 将具有实体和两个属性
*   SSDL 和 MSL 应该是 Empty 现在替换这一行：

架构 xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl" 命名空间="Model1.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2005"

和

架构 xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl" 命名空间="Student.Store" Alias="Self" Provider="U2.Data.Client" ProviderManifestToken="UNIDATA, 07.02.0000"

*   在 SSDL 中，添加以下内容

    ```
     <EntityContainer Name="StudentTargetContainer" >
               <EntitySet Name="STUDENT" EntityType="Student.Store.STUDENT_NF_SUB"  />
           </EntityContainer>
      <EntityType Name="STUDENT">
          <Key>
              <PropertyRef Name="ID" />

          </Key>
          <Property Name="ID" Type="int" Nullable="false"  />
          <Property Name="FNAME" Type="varchar" MaxLength="25" />

      </EntityType> 
    ```

*   保存文件。

*   现在双击 student.edmx 文件在设计器中打开。
*   有时，您会在 XML 编辑器或 EDM Designer 中打开 student.edmx。一内容二视图
*   打开映射详细信息窗口。右键单击实体-> 表映射
*   地图 ID -> ID 和 FirstName-FNAME
*   打开 App.config 文件并添加以下内容

```
<add name="StudentContainer" connectionString="metadata=res://*/Student.csdl|res://*/Student.ssdl|res://*/Student.msl;provider=U2.Data.Client;provider connection string=&quot;Database=demo;User ID=user;Password=pass;Server=localhost;Persist Security Info=True;Pooling=False;ServerType=unidata&quot;" providerName="System.Data.EntityClient"/> 
```

*   打开 Program.cs 文件并添加此 LINQ 查询

StudentContainer ctx = new StudentContainer(); var q =ctx.Students.ToList();

# css - CSS垂直对齐不适用于以百分比表示的尺寸

> ID：12539901
> 
> 赞同：-1
> 
> 时间：2012-09-22T01:17:20.260
> 
> 标签：css, vertical-alignment, css-tables

我有两个嵌套容器，.button-1x1 和内部 .button-content。我想将 .button-content 尺寸表示为百分比，如果我这样做，则垂直对齐属性未运行。如果我将宽度和高度设置为 px 值，它运行良好。为什么？

外部容器的尺寸表示为 px 值，所以我认为我可以将嵌套尺寸表示为百分比，这将使我的 css 更易于维护。但这不起作用。

在这里小提琴：http: [//jsfiddle.net/pjZ8g/5/](http://jsfiddle.net/pjZ8g/5/)

代码：

```
<style type='text/css'>
.absolute {position:absolute}
.bg-teal {
  background-color:#abc;
}
.button-content {
  width:100%; /** Change this to px, and it will work */
  height:100%; /** Change this to px, and it will work */
  display: table-cell;
  vertical-align: middle;
  text-align:center;
  text-transform:uppercase;
}

.button-1x1 {
  width:230px;
  height:230px;
}
</style>
<div class='button-1x1 relative'>
    <div class='button button-1x1 bg-teal absolute'>
      <div class='button-content'>
        <span>test1</span>
      </div>
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:24:12.133

检查这个更新的小提琴：http: [//jsfiddle.net/25JXw/1/](http://jsfiddle.net/25JXw/1/)

`line-height`您可以通过为要在其中中间对齐内容的 DIV指定 a 来实现此目的。要做到这一点，同时保持内部 DIV 的 CSS 通用性，您可以继承`line-height`父级的表单，如演示中所见。

**CSS**

```
.button-content {
  width:100%;
  height:100%;
  display: block; /* change to block OR remove */
  vertical-align: middle;
  text-align:center;
  text-transform:uppercase;
  line-height: inherit; /* new */
}

.button-1x1 {
  width:230px;
  height:230px;
  line-height: 230px; /* new */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T01:27:32.197

这是 techfoobar 的另一种方法。

更改`<div class='button button-1x1 bg-teal absolute'>`样式以包含`display:table`.

见[http://jsfiddle.net/pjZ8g/9/](http://jsfiddle.net/pjZ8g/9/)

# jquery - 带有验证的jQuery验证远程ajax规则错误

> ID：12539905
> 
> 赞同：2
> 
> 时间：2012-09-22T01:18:34.650
> 
> 标签：jquery, jquery-validate

我在尝试使用带有 jQ​​uery Validation 的远程规则来验证我的字段时遇到了困难。它使 ajax 调用正常并传递正确的数据。Web 服务运行良好，并根据需要返回真或假。

我的问题在于该规则始终为负数。我不确定我是否以不正确的格式返回真/假。想法/想法？

这是我的规则：

```
$("[id$=txtOther]").rules("add", {
    remote: function () {
        return {
            type: "POST",
            url: $("[id$=hBaseURL]").val() + "Webservice/Validation.asmx/ValidateUser",
            data: JSON.stringify({ FullName: $("[id$=txtOther]").val(), UserID: $("[id$=txtOtherID]").val() }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
        };
        },

    messages: {
        remote: ""
    }
}); 
```

这就是我的网络服务的响应方式：

```
d       [Object {__type="Validation+Results", Status="true"}]
0       Object {__type="Validation+Results", Status="true"}
Status  "true"
__type  "Validation+Results" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:11:37.080

好吧，这就是我最终不得不做的事情来解决这个问题。首先，我接受了 Andrew 所说的话，并在那里发现了更多支持他所说的话。最有帮助的是这篇文章：

[jQuery 验证插件的问题（远程验证）](https://stackoverflow.com/questions/6998990/problem-with-jquery-validate-plugin-remote-validation)

这篇文章基本上将这些行添加到我现有的代码中：

```
dataFilter: function (data) {
    var x = (JSON.parse(data)).d;
    return JSON.stringify(x); 
} 
```

问题仍然存在。我开始思考可能出了什么问题，并开始怀疑我的 Web 服务以及除了 .d 响应之外它是如何返回的。一段时间以来，我一直在使用此 Web 服务的不同修改，但由于某种原因，这个无法正常工作。在看了更多之后，我想到了它正在返回一个值列表，因为这是我在其他任何地方都需要的。我只返回了那个列表中的一个项目，但我想知道如果我只返回那个项目而不是列表会发生什么。我的网络服务现在返回了这个：

```
{"d":"true"} 
```

这仍然不适用于我的原始代码，但现在我相当确定这是因为它以 d 的形式返回。我在另一个站点找到的 dataFilter 仍然不允许它工作，所以我稍微修改了 dataFilter 以仅返回纯文本，如下所示：

```
dataFilter: function (data) {
    var x = (JSON.parse(data)).d;
    return x;
} 
```

最后我有一个可行的解决方案。在此过程中，我遇到了在验证失败后再次触发验证的问题，或者即使它出错也应该返回 true。那里有更多关于此的信息，由于这不是最初的问题，我不会深入讨论所有这些。一篇有用的帖子是： [jquery 验证 - 远程方法在有效后不会触发](https://stackoverflow.com/questions/11479383/jquery-validation-remote-method-wont-trigger-after-valid)但是，仅仅因为它们是如此相关，我使用此代码重置验证，即使最近真正有效的调用也允许再次触发验证。

```
$("[id$=txtOther]").removeData("previousValue"); 
```

我仍在使用此代码以及以下代码来按需触发验证：

```
var resetValid = $("[id$=txtOther]").valid(); 
```

这是我用于远程验证的最终代码：

```
 $("[id$=txtOther]").rules("add", {
    remote: function () {
        return {
            type: "POST",
            url: $("[id$=hBaseURL]").val() + "Webservice/Validation.asmx/ValidateUser",
            data: JSON.stringify({ FullName: $("[id$=txtOther]").val(), UserID: $("[id$=txtOtherID]").val() }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            dataFilter: function (data) {
                var x = (JSON.parse(data)).d;
                return x;
            }
        };
    },
    messages: {
        remote: "Additional reviewers must be selected from available options"
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T01:57:35.550

看起来您的网络服务正在返回 XML，而 javascript 正在期待 JSON。

您可以尝试更改服务的返回类型吗？

在第 975 行的验证器插件更改中

```
response = response 
```

至

```
response = response.d 
```

# batch-file - 运行查找函数的更有效方式

> ID：12539907
> 
> 赞同：0
> 
> 时间：2012-09-22T01:18:50.247
> 
> 标签：batch-file

目前这个脚本相当不错，但它的速度很慢，通过几千个文件需要将近 3 个小时。有人有任何提示可以使脚本更高效或更好地工作吗？

该脚本非常严格，找到补丁、kb 编号、架构等，然后将它们放入正确的文件中。任何找不到匹配项的内容都会移动到“未分类”文件中，我可以在其中调整脚本以包含该文件。

```
@ECHO OFF
SETLOCAL enableDelayedExpansion
SET "Titlebar=Text File Generator"
TITLE %Titlebar%
SET "SystemType=Standard"
FOR /F %%A IN ('DIR /B /A:-D ^|findstr "csv"') DO DEL /F %%A
ECHO/ Generating Text Files. This may take up to 10 minutes...
ECHO Architecture,KB Number, File Path, Switch, ,Windows 2000,Windows XP,Server 2003,Windows Vista,Server 2008,Windows 7,Office 2000,Office 2003,Office 2007,Office 2010, ,KB Info URL>>Masterlist.csv
FOR /F "Tokens=*" %%I IN ('DIR /S /B /A:-D') DO SET /A MaxCnt+=1
FOR /F "Tokens=*" %%I IN ('DIR /S /B /A:-D') DO CALL:Generate "%%I" 2>Nul>Nul
EXIT /B

:Progress
SET /A Percent=100*%1/%2
SET Percent=!Percent!%%
TITLE %titlebar% %CurentCnt% Of %MaxCnt% (%ProgressFormat:!Percent!% Complete)
EXIT /B

:Generate
SET /A CurentCnt+=1
SETLOCAL
CALL:Progress %CurentCnt% %MaxCnt%
IF /I "%~x1" NEQ ".exe" (
    IF /I "%~x1" NEQ ".msu" (
        IF /I "%~x1" NEQ ".msi" (
            IF /I "%~x1" NEQ ".msp" (
                ECHO "%~1">>SkippedFiles.csv
                EXIT /B
            )
        )
    )
)
CALL:FindKB "%~n1"
FINDSTR /I "%KB%" "%~dp0\Script Dependencies\Superseded-patches.txt" >Nul && EXIT /B
CALL:PathFix "%~1"
CALL:FindArchitecture "%~n1"
CALL:FindMS
CALL:FindOS "%~n1"
CALL:CustomRules "%~x1"
CALL:SwitchFix "%~n1"
CALL:FinalCheck
CALL:Export
ENDLOCAL
GOTO:EOF

:Export
IF NOT DEFINED KB       ECHO %Architecture%,%KB%,%FilePath%,%Switch%, ,%Windows2000%,%WindowsXP%,%Server2003%,%Vista%,%Server2008%,%Windows7%,%Office2000%,%Office2003%,%Office2007%,%Office2010%>>MasterList.csv
IF DEFINED KB           ECHO %Architecture%,%KB%,%FilePath%,%Switch%, ,%Windows2000%,%WindowsXP%,%Server2003%,%Vista%,%Server2008%,%Windows7%,%Office2000%,%Office2003%,%Office2007%,%Office2010%, ,http://support.microsoft.com/kb/%KB:~2%>>MasterList.csv
IF DEFINED Windows2000  SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Windows2000.csv
IF DEFINED WindowsXP    SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-WindowsXP.csv
IF DEFINED Server2003   SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Server2003.csv
IF DEFINED Vista        SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Vista.csv
IF DEFINED Windows7     SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Windows7.csv
IF DEFINED Server2008   SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Server2008.csv
IF DEFINED Office2000   SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Office2000.csv
IF DEFINED Office2003   SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Office2003.csv
IF DEFINED Office2007   SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Office2007.csv
IF DEFINED Office2010   SET "Exported=1"    & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Office2010.csv

IF DEFINED WinOS SET "Exported=1"
IF DEFINED WinOS ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Windows2000.csv
IF DEFINED WinOS ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-WindowsXP.csv
IF DEFINED WinOS ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Server2003.csv
IF DEFINED WinOS ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Vista.csv
IF DEFINED WinOS ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Windows7.csv
IF DEFINED WinOS ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-Server2008.csv
IF NOT DEFINED Exported ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>Uncategorized.csv
EXIT /B

:FindArchitecture
ECHO "%~1" | FINDSTR /I "x64"                   &&  ( SET "Architecture=x64"                    & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "x86"                   &&  ( SET "Architecture=x86"                    & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "IA64"                  &&  ( SET "Architecture=ia64"                   & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "AMD64"                 &&  ( SET "Architecture=amd64"                  & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "x86x64"                &&  ( SET "Architecture=x86x64"                 & SET /A "Count-=1" )
IF "%Count%" GTR "1" ( SET "Architecture=Error" )
SET Count=0
EXIT /B

:FindOS
ECHO "%~1" | FINDSTR /I "Windows2000"           &&  ( SET "Windows2000=1"                   & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "WindowsXP"             &&  ( SET "WindowsXP=1"                     & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "WindowsServer2003"     &&  ( SET "Server2003=1"                    & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "Windows5.1"            &&  ( SET "WindowsXP=1"                     & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "Windows5.2"            &&  ( SET "Server2003=1"                    & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "Windows6.0"            &&  ( SET "Vista=1"                         & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "Windows6.1"            &&  ( SET "Windows7=1" & SET "Server2008=1" & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "Windows7"              &&  ( SET "Windows7=1"                      & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "Vista"                 &&  ( SET "Vista=1"                         & SET /A "Count+=1" )
ECHO "%~1" | FINDSTR /I "Server2008"            &&  ( SET "Server2008=1"                    & SET /A "Count+=1" )
IF "%Count%" GTR "1" ( SET "OS=Error" )
SET Count=0
EXIT /B

:FindKB
set val="%~1"
ECHO !val!|findstr /irc:"KB[0-9][0-9][0-9][0-9][0-9][0-9][0-9]" >nul && (
    set "val=!val:*KB=!"
    Set "KB=KB!val:~0,7!"
    EXIT /B
)

ECHO !val!|findstr /irc:"KB[0-9][0-9][0-9][0-9][0-9][0-9]" >nul && (
    set "val=!val:*KB=!"
    Set "KB=KB!val:~0,6!"
    EXIT /B
)

ECHO !val!|findstr /irc:"KB[0-9][0-9][0-9][0-9][0-9]" >nul && (
    set "val=!val:*KB=!"
    Set "KB=KB!val:~0,5!"
    EXIT /B
)
EXIT /B

:FindMS
FOR /F "Tokens=2 Delims=/" %%A IN ("%Path%") DO SET "MS=%%A"
EXIT /B

:PathFix
SET "Path_to_convert=%~1"
SET "Reference_path=%~dp0"
SET "FilePath=!Path_to_convert:*%Reference_path%=!"
GOTO:EOF

:SwitchFix
SET "Switch=/quite /norestart"
IF "%Office2003%"=="1" SET "Switch=/Q"
IF "%~1"==".msu" SET "Switch=/quiet /norestart"
EXIT /B

:CustomRules
ECHO "%~1" | FINDSTR /I "972581"            &&  ( SET "KB=KB972581" )
ECHO "%~1" | FINDSTR /I "MS09-035"          &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "msxml4"            &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "NDP40"             &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB890830"          &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "NetFramework"      &&  ( SET "WinOS=ALL" & EXIT /B )
ECHO "%~1" | FINDSTR /I "msxml6"            &&  ( SET "Server2003=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "NDP20"             &&  ( SET "WindowsXP=1" & SET "Server2003=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB969878"          &&  ( SET "WindowsXP=1" & SET "Server2003=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "WYukon2005Setup"   &&  ( SET "Server2003=1" & SET "Server2008=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB952068"          &&  ( SET "Server2008=1" & SET "Server2003=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB954600"          &&  ( SET "Server2008=1" & SET "Server2003=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB924430"          &&  ( SET "Server2000=1" & SET "Server2003=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "messenger"         &&  ( SET "Server2000=1" & SET "Server2003=1" & SET "WindowsXP=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "msxml4"            &&  ( SET "WinOS=All" & SET "Architecture=x86x64" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB974882"          &&  ( SET "WinOS=All" & SET "Architecture=x86x64" & EXIT /B )
ECHO "%~1" | FINDSTR /I "vcredist"          &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "WindowsServer2003" &&  ( SET "Server2003=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB974945"          &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "WindowsMedia"      &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "Windows-2000-XP"   &&  ( SET "WindowsXP=1" & SET "Server2000=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB960089"          &&  ( SET "Server2008=1" & SET "Server2003=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB960083"          &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB2657424"         &&  ( SET "Server2008=1" & SET "Vista=1" & SET "Server2003=1" & SET "WindowsXP=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB2656370"         &&  ( SET "WindowsXP=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "KB2541015"         &&  ( SET "Office2003=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "NDP"               &&  ( SET "WinOS=All" & EXIT /B )
ECHO "%~1" | FINDSTR /I "vcredist"          &&  ( SET "WinOS=All" & SET "Switch=/q" & EXIT /B )

::------------------------------------------------------------------
::-- Office --------------------------------------------------------
::------------------------------------------------------------------
ECHO "%~1" | FINDSTR /I "Officexp"          &&  ( SET "WindowsXP=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "office2000"        &&  ( SET "Office2000=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "Office2003"        &&  ( SET "Office2003=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "outlook2003"       &&  ( SET "Office2003=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "Project2003"       &&  ( SET "Office2003=1" & SET "Architecture=x86" & EXIT /B )

::------------------------------------------------------------------
::-- Office 2007 ---------------------------------------------------
::------------------------------------------------------------------
ECHO "%~1" | FINDSTR /I "Office2007"        &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "publisher2007"     &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "access2007"        &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "outlook2007"       &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "excelviewer2007"   &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "excel2007"         &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "word2007"          &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "infopath2007"      &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "powerpoint2007"    &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "vbe62007"          &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "graph2007"         &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "pptconv2007"       &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "xlview2007"        &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "xlconv2007"        &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "wordconv2007"      &&  ( SET "Office2007=1" & EXIT /B )

::------------------------------------------------------------------
::-- Office 2010 ---------------------------------------------------
::------------------------------------------------------------------
ECHO "%~1" | FINDSTR /I "Office2010"        &&  ( SET "Office2010=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "Excel2010"         &&  ( SET "Office2010=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "infopath2010"      &&  ( SET "Office2010=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "vbe72010"          &&  ( SET "Office2010=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "ace2010"           &&  ( SET "Office2010=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "graph2010"         &&  ( SET "Office2010=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "powerpoint2010"    &&  ( SET "Office2010=1" & EXIT /B )

::------------------------------------------------------------------
::-- Windows Media Player ------------------------------------------
::------------------------------------------------------------------
ECHO "%~1" | FINDSTR /I "visio2001"         &&  ( SET "Office2001=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "Visio2002"         &&  ( SET "Office2002=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "visio2003"         &&  ( SET "Office2003=1" & SET "Architecture=x86" & EXIT /B )
ECHO "%~1" | FINDSTR /I "visio2007"         &&  ( SET "Office2007=1" & EXIT /B )
ECHO "%~1" | FINDSTR /I "vviewer2010"       &&  ( SET "Office2010=1" & EXIT /B )
EXIT /B

:FinalCheck
IF NOT DEFINED Architecture SET "Architecture=x86x64"
EXIT /B 
```

下面是我正在处理的脚本

```
@ECHO OFF
SETLOCAL enableDelayedExpansion
SET "Titlebar=Text File Generator"
TITLE %Titlebar%
SET "SystemType=Standard"
del /f *.CSV

ECHO/ Generating Text Files. This may take up to 10 minutes...
ECHO Architecture,KB Number, File Path, Switch, ,Windows 2000,Windows XP,Server 2003,Windows Vista,Server 2008,Windows 7,Office 2000,Office 2003,Office 2007,Office 2010, ,KB Info URL>>Masterlist.csv
FOR /F %%I IN ('DIR /S /B /A:-D ^| find /c /v ""') DO SET MaxCnt=%%I
FOR /F "Tokens=*" %%I IN ('DIR /S /B /A:-D') DO CALL:Generate "%%I"
EXIT /B

:Generate
SET /A CurentCnt+=1
SETLOCAL

SET /A Percent=100*%CurentCnt%/%MaxCnt%
SET Percent=!Percent!%%
TITLE %titlebar% %CurentCnt% Of %MaxCnt% (%ProgressFormat:!Percent!% Complete)

IF /I "%~x1" NEQ ".exe" (
    IF /I "%~x1" NEQ ".msu" (
        IF /I "%~x1" NEQ ".msi" (
            IF /I "%~x1" NEQ ".msp" (
                ECHO "%~1">>SkippedFiles.csv
                EXIT /B
            )
        )
    )
)
SET "Switch=/quiet /norestart"
SET "FileName=%~n1"

:: Find KB Number
set "val=!FileName:*KB=!"
ECHO !val!|findstr /brc:"[0-9][0-9][0-9][0-9][0-9][0-9][0-9]" >nul && (
    Set "KB=KB!val:~0,7!"
) || ECHO !val!|findstr /brc:"[0-9][0-9][0-9][0-9][0-9][0-9]" >nul && (
    Set "KB=KB!val:~0,6!"
) || ECHO !val!|findstr /brc:"[0-9][0-9][0-9][0-9][0-9]" >nul && (
    Set "KB=KB!val:~0,5!"
)

::Check list of superseded patches, if superseded skip this function
FINDSTR /I "%KB%" "%~dp0\Script Dependencies\Superseded-patches.txt" 2>Nul>Nul && EXIT /B

::Echo Architecture
for %%A in ( x64 x86 ia64 amd64 x86x64 ) do (
  if "!FileName:%%A=!" neq "!FileName!" (
    if not defined Architecture (set "Architecture=%%A") else set "Architecture=Error"
  )
)

::Final Check
IF "%Office2003%"=="1" SET "Switch=/Q"
IF NOT DEFINED Architecture SET "Architecture=x86x64"

::Export
IF defined KB set "KB_EXTENSION=, ,http://support.microsoft.com/kb/%KB:~2%"
IF DEFINED WinOS ( set "Exported=1" & FOR %%A in (Windows2000 WindowsXP Server2003 Vista Windows7 Server2008 Office2000 Office2003 Office2007 Office2010) DO SET "%%A=1" )
FOR %%A in (Windows2000,WindowsXP,Server2003,Vista,Windows7,Server2008,Office2000,Office2003,Office2007,Office2010) do if defined %%A ( set "Exported=1" & ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-%%A.csv )
ECHO %Architecture%,%KB%,%FilePath%,%Switch%, ,%Windows2000%,%WindowsXP%,%Server2003%,%Vista%,%Server2008%,%Windows7%,%Office2000%,%Office2003%,%Office2007%,%Office2010%%KB_EXTENSION%>>MasterList.csv
IF NOT DEFINED Exported ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>Uncategorized.csv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T06:20:24.157

*   你有太多不必要的呼叫。CALL 是一个相对昂贵的命令，您的代码每个文件最多有 11 个 CALL！我已将每个文件减少到 1 个 CALL，它可能会减少到无。

*   您正在为每个文件执行大量 FINDSTR 命令（好吧，可能有点夸张）。搜索非常简单。使用字符串搜索和替换来查找字符串而不是 FINDSTR 应该更快。

*   我大大简化并优化了代码来计算文件和删除 CSV 文件。

*   :FindKB 代码似乎比它应该的要慢，但我没有理会它。

*   我完全重组了大部分代码，使其更易于维护。

有些事情对我来说看起来不正确，但我独自离开了：

*   我看不到`%ProgressFormat:!Percent!%`您的 TITLE 部分的工作原理

*   您定义 MS 但不使用它。

*   您有条件地定义操作系统，但我看不到您在哪里使用它。

*   您假设许多变量开始时未定义。它们可能应该显式初始化为未定义。

*   您的 :SwitchFix 代码似乎有缺陷

    *   您似乎正在检查扩展名，但您传递了名称
    *   它看起来像拼写错误*/quite* -> */quiet*？

这是一些经过大量修改的代码。如果没有几个错误，我会感到震惊 - 它完全未经测试。但是如果你能让它发挥作用，那里有一些好主意。

```
@ECHO OFF
SETLOCAL enableDelayedExpansion
SET "Titlebar=Text File Generator"
TITLE %Titlebar%
SET "SystemType=Standard"

::FindMS - This is constant, only needs to be done once
::Actually I can't see where MS is used at all, so I don't think it is needed.
FOR /F "Tokens=2 Delims=/" %%A IN ("%Path%") DO SET "MS=%%A"

::FOR /F %%A IN ('DIR /B /A:-D ^|findstr "csv"') DO DEL /F %%A
::I would think DEL /F *.CSV would be better, but *CSV* matches original logic
del /f *CSV*

ECHO/ Generating Text Files. This may take up to 10 minutes...
ECHO Architecture,KB Number, File Path, Switch, ,Windows 2000,Windows XP,Server 2003,Windows Vista,Server 2008,Windows 7,Office 2000,Office 2003,Office 2007,Office 2010, ,KB Info URL>>Masterlist.csv

FOR /F %%I IN ('DIR /S /B /A:-D | find /c /v ""') DO SET /A MaxCnt=%%I
FOR /F "eol=: delims=" %%I IN ('DIR /S /B /A:-D') DO CALL :Generate "%%I" 2>Nul >Nul
EXIT /B

:Generate
SET /A CurentCnt+=1
SETLOCAL

::CALL:Progress %CurentCnt% %MaxCnt%
SET /A Percent=100*CurrentCnt/MaxCnt
SET Percent=!Percent!%%
TITLE %titlebar% %CurentCnt% Of %MaxCnt% (%ProgressFormat:!Percent!% Complete)

IF /I "%~x1" NEQ ".exe" (
    IF /I "%~x1" NEQ ".msu" (
        IF /I "%~x1" NEQ ".msi" (
            IF /I "%~x1" NEQ ".msp" (
                ECHO %1>>SkippedFiles.csv
                EXIT /B
            )
        )
    )
)

::CALL:FindKB "%~n1"
::FindKB
set "val=%~n1"
set "val=!val:*KB=!"
ECHO !val!|findstr /brc:"[0-9][0-9][0-9][0-9][0-9][0-9][0-9]" >nul && (
    Set "KB=KB!val:~0,7!"
) || ECHO !val!|findstr /brc:"[0-9][0-9][0-9][0-9][0-9][0-9]" >nul && (
    Set "KB=KB!val:~0,6!"
) || ECHO !val!|findstr /brc:"[0-9][0-9][0-9][0-9][0-9]" >nul && (
    Set "KB=KB!val:~0,5!"
)

FINDSTR /I "%KB%" "%~dp0\Script Dependencies\Superseded-patches.txt" >Nul && EXIT /B

::CALL:PathFix "%~1"
::PathFix
SET "FilePath=%~1"
SET "FilePath=!FilePath:*%~dp0=!"

::CALL:FindArchitecture "%~n1"
::FindArchitecture
set "Architecture="
set "val=%~n1"
for %%A in ( x64 x86 ia64 amd64 x86x64 ) do (
  if "!val:%%A=!" neq "!val!" (
    if not defined Architecture (set "Architecture=%%A") else set "Architecture=Error"
  )
)

::CALL:FindMS - This is a constant value so moved to front and done only once. I don't think it is needed at all

::CALL:FindOS "%~n1"
::FindOS
set "val=%~n1"
set "cmd="
for %%A in (
  "Windows2000=SET Windows2000=1"
  "WindowsXP=SET WindowsXP=1"
  "WindowsServer2003=SET Server2003=1"
  "Windows5.1=SET WindowsXP=1"
  "Windows5.2=SET Server2003=1"
  "Windows6.0=SET Vista=1"
  "Windows6.1=SET Windows7=1&SET Server2008=1"
  "Windows7=SET Windows7=1"
  "Vista=SET Vista=1"
  "Server2008=SET Server2008=1"
) do for /f "tokens=1* delims==" %%B in (%%A) do if "!val:%%B=!" neq "!val!" ( 
  if not defined cmd (set "cmd=%%C") else (
    set "cmd=!cmd!&%%C"
    set "OS=Error"
  )
)
(%cmd%)

::CALL:CustomRules "%~x1"
set "val=%~x1"
if "!val:972581=!" neq "!val!" SET "KB=KB972581"
set "cmd="
for %%A in (
  "MS09-035=set WinOS=All"
  "msxml4=set WinOS=All"
  "NDP40=set WinOS=All"
  "KB890830=set WinOS=All"
  "NetFramework=set WinOS=ALL"
  "msxml6=set Server2003=1"
  "NDP20=set WindowsXP=1&set Server2003=1"
  "KB969878=set WindowsXP=1&set Server2003=1"
  "WYukon2005Setup=set Server2003=1&set Server2008=1"
  "KB952068=set Server2008=1&set Server2003=1"
  "KB954600=set Server2008=1&set Server2003=1"
  "KB924430=set Server2000=1&set Server2003=1&set Architecture=x86"
  "messenger=set Server2000=1&set Server2003=1&set WindowsXP=1&set Architecture=x86"
  "msxml4=set WinOS=All&set Architecture=x86x64"
  "KB974882=set WinOS=All&set Architecture=x86x64"
  "vcredist=set WinOS=All"
  "WindowsServer2003=set Server2003=1"
  "KB974945=set WinOS=All"
  "WindowsMedia=set WinOS=All"
  "Windows-2000-XP=set WindowsXP=1&set Server2000=1"
  "KB960089=set Server2008=1&set Server2003=1"
  "KB960083=set WinOS=All"
  "KB2657424=set Server2008=1&set Vista=1&set Server2003=1&set WindowsXP=1"
  "KB2656370=set WindowsXP=1"
  "KB2541015=set Office2003=1&set Architecture=x86"
  "NDP=set WinOS=All"
  "vcredist=set WinOS=All&set Switch=/q"
  ";----------------------------------------------------------------"
  ";--Office--------------------------------------------------------"
  ";----------------------------------------------------------------"
  "Officexp=set WindowsXP=1&set Architecture=x86"
  "office2000=set Office2000=1&set Architecture=x86"
  "Office2003=set Office2003=1&set Architecture=x86"
  "outlook2003=set Office2003=1&set Architecture=x86"
  "Project2003=set Office2003=1&set Architecture=x86"
  ";----------------------------------------------------------------"
  ";--Office2007----------------------------------------------------"
  ";----------------------------------------------------------------"
  "Office2007=set Office2007=1"
  "publisher2007=set Office2007=1"
  "access2007=set Office2007=1"
  "outlook2007=set Office2007=1"
  "excelviewer2007=set Office2007=1"
  "excel2007=set Office2007=1"
  "word2007=set Office2007=1"
  "infopath2007=set Office2007=1"
  "powerpoint2007=set Office2007=1"
  "vbe62007=set Office2007=1"
  "graph2007=set Office2007=1"
  "pptconv2007=set Office2007=1"
  "xlview2007=set Office2007=1"
  "xlconv2007=set Office2007=1"
  "wordconv2007=set Office2007=1"
  ";----------------------------------------------------------------"
  ";--Office2010----------------------------------------------------"
  ";----------------------------------------------------------------"
  "Office2010=set Office2010=1"
  "Excel2010=set Office2010=1"
  "infopath2010=set Office2010=1"
  "vbe72010=set Office2010=1"
  "ace2010=set Office2010=1"
  "graph2010=set Office2010=1"
  "powerpoint2010=set Office2010=1"
  ";----------------------------------------------------------------"
  ";--WindowsMediaPlayer--------------------------------------------"
  ";----------------------------------------------------------------"
  "visio2001=set Office2001=1&set Architecture=x86"
  "Visio2002=set Office2002=1&set Architecture=x86"
  "visio2003=set Office2003=1&set Architecture=x86"
  "visio2007=set Office2007=1"
  "vviewer2010=set Office2010=1"
) do for /f "tokens=1* delims==" %%B in (%%A) do if "!val:%%B=!" neq "!val! (
  set "cmd=%%C"
  goto :CustomBreak
)
:CustomBreak
(%cmd%)

::CALL:SwitchFix "%~n1"
::SwitchFix
SET "Switch=/quite /norestart"
IF "%Office2003%"=="1" SET "Switch=/Q"
IF "%~n1"==".msu" SET "Switch=/quiet /norestart"

::CALL:FinalCheck
IF NOT DEFINED Architecture SET "Architecture=x86x64"

::CALL:Export
::Export
set "KB_EXTENSION="
if defined KB set "KB_EXTENSION=, ,http://support.microsoft.com/kb/%KB:~2%"
ECHO %Architecture%,%KB%,%FilePath%,%Switch%, ,%Windows2000%,%WindowsXP%,%Server2003%,%Vista%,%Server2008%,%Windows7%,%Office2000%,%Office2003%,%Office2007%,%Office2010%%KB_EXTENSION%>>MasterList.csv
for %%A in (
  Windows2000
  WindowsXP
  Server2003
  Vista
  Windows7
  Server2008
  Office2000
  Office2003
  Office2007
  Office2010
) do if defined %%A (
  set "Exported=1"
  ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-%%A.csv
)
if defined WinOS (
  set "Exported=1"
  for %%A in (
    Windows2000
    WindowsXP
    Server2003
    Vista
    Windows7
    Server2008
  ) do ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>%SystemType%-%%A.csv
)
IF NOT DEFINED Exported ECHO %Architecture%,%KB%,%FilePath%,%Switch%>>Uncategorized.csv
EXIT /B 
```

# linux - Djava.library.path= 在 Eclipse.ini 上

> ID：12539909
> 
> 赞同：0
> 
> 时间：2012-09-22T01:19:39.583
> 
> 标签：linux, eclipse, slackware

我刚刚将我的发行版从 ubuntu 更改为 slackware，但我的 eclipse 文件夹（位于 /home 分区）仍然相同，我没有格式化它。

它在 eclipse.ini 上有一个 -Djava.library.path=/usr/lib/x86_64-linux-gnu/jni/ 但是这个目录不存在。

我怎样才能将它更新到我的松弛？路径在寻找什么？杰瑞？我需要更改 eclipse.ini 上的其他内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:54:55.790

此路径用于查找本机方法所需的本机库。

# javascript - 关闭窗口并打开一个新窗口

> ID：12539911
> 
> 赞同：-2
> 
> 时间：2012-09-22T01:19:54.687
> 
> 标签：javascript, html, window

我想要做的是当页面加载时它会自动关闭窗口然后打开一个新窗口

这是我正在使用的代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
<meta http-equiv="prahma" content="no-cache">
<title>Auto Close and Open New window</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<script language="javascript">
var url = "step5.php"
window.open(url,"","");
window.open('', '_self', ''); 
window.close();
</script>

</head>
<body onload="closeIt();">
</body>
</html> 
```

窗口关闭但不打开新窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:42:32.253

You must Open new window first then close the older one.

# asp.net-mvc - MVC3 AsyncController - 执行同步 I/O 任务

> ID：12539912
> 
> 赞同：2
> 
> 时间：2012-09-22T01:20:12.337
> 
> 标签：asp.net-mvc, asp.net-mvc-3, azure, parallel-processing, azure-web-roles

我们计划使用 AsyncController，因为我们的大多数请求将是长时间运行的 I/O 绑定请求。计划是将此处理卸载到 CLR 线程，以保持最大数量的 IIS 线程空闲来为新的传入请求提供服务。

到目前为止，我们看到的每个使用 AsyncController 的示例都是从 AsyncController 的异步操作方法内部异步执行长时间运行的、I/O 绑定的进程。我们可以看到这样做的价值，如果您有 2 个或更多可以在 Controller 的 Async 操作方法中并行运行的操作。

示例： [在 ASP.NET MVC 中使用异步控制器](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.100%29.aspx)

在那里，他们异步执行新闻服务。这真的需要吗？如果它是您需要在该操作方法中执行的唯一事情，那么异步执行新闻服务似乎是多余的。在我们的例子中，我们有一个很长的 I/O 进程要运行。我们不能从我们的操作方法的异步版本中同步运行它吗？一旦我们在 AsyncController 中的异步操作方法中，工作不会已经传递给 CLR 线程吗？

同样，如果我们有更多可以并行运行的工作，我们可以看到我们希望如何异步执行进一步的操作。但是，我们只有一个长阻塞操作，并且希望保持代码简单。

我们还看到了另一种策略，使用 Task.Factory.StartNew()，如下所示： [在 ASP.NET MVC 2 中使用 AsyncController](http://bartwullems.blogspot.com/2010/01/using-asynccontroller-in-aspnet-mvc-2.html)

我们也非常希望不这样做，因为这似乎是不必要的多余。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:41:39.910

Yes, I believe you are correct. The [documentation](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.100%29.aspx) states the following steps for initializing an *async* action.

> 1.  The Web server gets a thread from the thread pool (the worker thread) and schedules it to handle an incoming request. This worker thread initiates an asynchronous operation.
>     
>     
> 2.  The worker thread is returned to the thread pool to service another Web request.

*The worker thread initiates an asynchronous operation* (ie, you're not required to do it in the code). The use of "extra" asynchronous code in the examples you cite is likely meant to illustrate the use of `AsyncManager.OutstandingOperations.Increment` and `Decrement` (which inform the worker process that an operation is still running, even though the Async action may have returned).

# google-apps-script - 将 Google 文档合并到一个文件夹中

> ID：12539914
> 
> 赞同：0
> 
> 时间：2012-09-22T01:20:23.290
> 
> 标签：google-apps-script, document

我正在尝试编写一个脚本来将多个文档连接成一个大文档。本质上，输入是指定文件夹中的所有文档，输出是单个组合文档。

我不确定如何去做。由于[getContentAsString()](https://developers.google.com/apps-script/class_file#getContentAsString)返回纯文本，我是否应该考虑将其作为[Blob](https://developers.google.com/apps-script/class_blob)返回并使用它？是否已经有提供此功能的脚本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:10:12.233

[您可以在这篇文章](https://stackoverflow.com/questions/10692669/how-can-i-generate-a-multipage-text-document-from-a-single-page-template-in-goog%20://)中查看 Henrique 的回答。 它需要进行一些小的修改才能完成您想要的操作。

# javascript - 将变量传递给函数时，实际上传递了什么？

> ID：12539915
> 
> 赞同：1
> 
> 时间：2012-09-22T01:20:31.150
> 
> 标签：javascript, function, arguments

我在另一个线程上被告知，在函数退出后，从函数内部对其操作数所做的任何修改都将持续存在。我一直认为它对传递给它的所有值做了一个临时副本，然后唯一保留的东西是返回值和被修改的隐式更广泛范围的变量。

我想回想一下我在其源代码中达到顶峰的所有 jquery 插件，它们都使用以下构造：

```
(function($){
  $.fn.foo = function(){ console.log('foo'); };
})(jQuery); 
```

这意味着`jQuery`即使通过内部范围`$`标识符对对象的修改在函数退出后仍然存在，否则 jQuery 插件将无法工作。所以，这就像上面的代码片段一样工作：

```
var x = {n:0};

(function addOneTo(p) {
  p.n = p.n + 1;
})(x);

console.log(x); 
```

但是这个：

```
var x = 0;

(function addOneTo(p) {
  p = p + 1;
})(x);

console.log(x); 
```

没有，保持不变，`x`值为`0`.

有人能解释一下参数传递是如何工作的吗？我以为我知道它是怎么做到的，但我想我不知道。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:29:54.407

它实际上非常简单：Javascript 中的每个名称都指向内存中的一个对象（即使您不以面向对象的方式考虑它）——它是内存中该“元素”的数据结构所在的位置。

因此，如果传递的值是一个像数组这样的对象，或者其他具有属性和名称的元素，那么您在函数中得到的是同一个对象。如果您更改它的属性（如`p.n = p.n + 1`上面的示例），因为“p”对象在函数内部和外部是相同的。

现在，当您执行: 时`p = p + 1`，由名称引用的原始对象`p`被替换为另一个对象 - 在表达式中创建的对象，其值为 `p + 1`. 函数内部的名称`p`指向另一个对象，完全位于另一个内存位置，而原始对象则传递给函数，并且名称`x`中的引用保持不变。

例如，这种机制与 Python 语言中的机制完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T01:23:25.287

当你有：

```
p.n = p.n + 1; 
```

您正在做的是**修改在****引用**`n`的对象中调用的属性。换句话说，可以看成是一个指向对象的指针，也就是说，它持有对你已经传递给函数的引用值的原始对象的引用**。**另一方面，当你有：**`p``p`**

 ****```
p = p + 1; 
```

您只是用计算表达式的结果**替换**持有的对象引用值。您**没有**修改对象的任何属性。`p``p + 1`**`p`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T01:35:33.417

实际上在你的第一个例子中

```
var x = {n:0};
(function addOneTo(p) {
    p.n = p.n + 1;
})(x);
console.log(x); 
```

这`x`是一个对象，当您使用`p.n = p.n + 1;`它时修改了原始对象的属性，因为它作为引用传递（p 是与 x 相同的对象）但在您的第二个示例中

```
var x = 0;
(function addOneTo(p) {
    p = p + 1;
})(x);
console.log(x); 
```

`x`通过一个值传递给函数，`p = p + 1;`这`p`是该函数内部的一个新私有变量，它只有函数范围。******

# php - PHP：返回字符串中所有指定标签的所有字符串值

> ID：12539917
> 
> 赞同：0
> 
> 时间：2012-09-22T01:21:35.060
> 
> 标签：php, regex

```
function getValues($string, $tagname) {

    $pattern = "/<$tagname ?.*>([^<>]*)<\/$tagname>/";
    preg_match_all($pattern, $string, $matches, PREG_PATTERN_ORDER);
    var_dump($matches);
    return $matches;
}

getValues("<a>1</a><a>2</a><a>3</a>", "a"); 
```

我希望得到一个数组值 1,2,3 等....

它返回：

```
array(2) {
  [0]=>
  array(1) {
    [0]=>
    array(2) {
      [0]=>
      string(24) "<a>1</a><a>2</a><a>3</a>"
      [1]=>
      int(0)
    }
  }
  [1]=>
  array(1) {
    [0]=>
    array(2) {
      [0]=>
      string(1) "3"
      [1]=>
      int(19)
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:31:12.053

我不会为此使用正则表达式 - 使用像这样的 dom 解析器：

```
<?php
function getValues($string, $tagname) {
    $return = [];
    $document = new DomDocument();
    $document->loadHtml($string);
    $elements = $document->getElementsByTagName($tagname);
    foreach($elements as $element) {
        $return[] = $element->nodeValue;
    }
    return $return;
}

var_dump(getValues("<a>1</a><a>2</a><a>3</a>", 'a')); 
```

带有 dom 解析器的演示：http: [//viper-7.com/NBtiNC](http://viper-7.com/NBtiNC)

编辑：虽然，将您的正则表达式更改为`/<$tagname ?.*?>([^<>]*)<\/$tagname>/`似乎有效。不同的是`?.*>`->`?.*?>`

带有新正则表达式的演示：http: [//viper-7.com/4UxX0h](http://viper-7.com/4UxX0h)

# node.js - 在 node.js 中获取图像的宽度和高度

> ID：12539918
> 
> 赞同：67
> 
> 时间：2012-09-22T01:21:36.830
> 
> 标签：node.js

是否可以在 node.js 中获取图像的宽度和高度（在服务器端，而不是客户端）？我需要在我正在编写的 node.js 库中找到图像的宽度和高度。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-11-21T02:22:52.883

安装`GraphicsMagick`或`ImageMagick`根本不需要，确定图像的尺寸就像查看标题一样容易。`image-size`是所述功能的纯 javascript 实现，非常易于使用。

[https://github.com/netroy/image-size](https://github.com/netroy/image-size)

```
var sizeOf = require('image-size');
sizeOf('images/funny-cats.png', function (err, dimensions) {
  console.log(dimensions.width, dimensions.height);
}); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-09-22T02:16:28.840

是的，这是可能的，但您需要安装[GraphicsMagick](http://www.graphicsmagick.org/)或[ImageMagick](http://www.imagemagick.org/)。

我都使用过，我可以推荐 GraphicsMagick，它的速度要快得多。

一旦你安装了程序和它的[模块](https://github.com/aheckmann/gm)，你会做这样的事情来获得宽度和高度。

```
gm = require('gm');

// obtain the size of an image
gm('test.jpg')
.size(function (err, size) {
  if (!err) {
    console.log('width = ' + size.width);
    console.log('height = ' + size.height);
  }
}); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-04-21T01:28:39.560

[https://github.com/nodeca/probe-image-size](https://github.com/nodeca/probe-image-size)

更有趣的问题是“如何在没有从远程服务器下载完整文件的情况下检测图像大小”。`probe-image-size`会有所帮助。当然，它也支持本地流。

它是用纯 JS 编写的，不需要任何严重的依赖项（ImageMagick 等）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-04T00:08:31.397

Calipers 是另一个可以确定图像尺寸的纯 Javascript 库。

[https://github.com/calipersjs/calipers](https://github.com/calipersjs/calipers)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-30T05:57:00.073

```
var sizeOf = require('image-size');
    sizeOf(my_file_item.completeFilename, function (err, dimensions) {
        try{
          if(!err){
            let image_dimensions = dimensions || "";
            let width = 200; // we want 200 
            let height = parseInt(width/(image_dimensions.width/image_dimensions.height));

          }else{

          }
          // console.log(ex);
        }catch(ex){

        }
      }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-29T07:37:35.510

我使用了 Jimp：[https](https://www.npmjs.com/package/jimp) ://www.npmjs.com/package/jimp npm install --save jimp

```
const jimage1 = await Jimp.read(imgBuffer);
const jimage2 = await Jimp.read(imgUrl);
const width = jimage1.bitmap.width; 
```

它实际上是像素匹配的包装器

# windows - Windows 上等效的动态共享对象

> ID：12539919
> 
> 赞同：0
> 
> 时间：2012-09-22T01:22:12.493
> 
> 标签：windows, object, dynamic, dll, shared

Linux 上的动态共享对象库大约等于 Windows 中的 dll。这是我在网上找到的。但是有一些区别，这里解释一下：在[架构上，共享对象 (SO) 和动态链接库 (DLL) 有什么区别？](https://stackoverflow.com/questions/6251171/architecturally-what-is-the-difference-between-a-shared-object-so-and-a-dynami)

然后我很困惑：

1.  在 linux 中，可以使用 -shared 创建一个 DSO 库，然后与 -lmylib 链接。但在 Windows 中，情况有所不同。必须将 dllexport 添加到代码中。只有“导出”的部分可以链接（如果我是正确的）。是否可以在不添加 dllexport 的情况下使 windows dll 可链接？（我试图制作一个只有函数而没有 dllexport 的 dll，但到目前为止我能说的是没有 dllexport 的 dll 是没用的，对吧？）

2.  MinGW 是做什么的？我认为它在我使用它的时候会创建 dll。但现在我认为由 Mi​​nGW-gcc -shared 创建的库是另一回事。是windows版本的lib.so吗？MSVS/intel 编译器可以做类似的事情吗？

我问这些是因为跨平台问题。例如，可以在 windows 机器上编译一个 linux 代码而无需任何更改。但是如果想用相当于.so的代码（用MSVS编译）来创建一个dll而不修改代码（添加dllexport），那是不可能的。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:41:51.983

> 是否可以在不添加 dllexport 的情况下使 windows dll 可链接？

不，你需要`dllexport`。

我不知道你说的第二个问题是什么意思，对不起。

> 我对吗？

Correct me if I'm wrong but you're restating your first question. So yes you're right, you can't do that. you need `dllexport`.

# android - Android：如何将数据输出到控制台脚本

> ID：12539925
> 
> 赞同：0
> 
> 时间：2012-09-22T01:22:38.967
> 
> 标签：android

我正在尝试编写一个由系统脚本启动的 Android 应用程序。应用程序应该提示输入文本并将其输出到标准输出，以便脚本可以使用它。**编辑：** *在这里澄清一些事情：脚本由[encfs](http://linux.die.net/man/1/encfs) --extpass 选项启动。*

我知道android应用程序如何写入控制台：`System.console().printf("text");`

我知道如何从脚本启动活动：`am start -n com.pkg.App/.MyActivity`

我不知道如何实际使应用程序以这种方式启动以实际将任何内容输出到启动它的控制台。应用程序似乎在做它的事情，并且没有任何东西返回到控制台。

也许我错误地处理了整个问题，并且有一种更简单的方法来提示脚本中的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:00:45.537

为什么不编写一个托管整个序列的 android 应用程序呢？android 可以使用[Runtime](http://developer.android.com/reference/java/lang/Runtime.html)类来启动脚本或本机命令行应用程序。它可以向它们传递参数并捕获输出并将其传递给其他脚本等。

1.  启动您的应用程序，并收集用户输入
2.  启动系统脚本，并将步骤 1 中收集的参数传递给它

如果这不起作用，例如，因为您无法控制何时需要调用 encfs，另一个想法是按照您的建议从系统脚本启动 android 应用程序，并将输出写入完成后归档。系统脚本需要监视文件是否存在，否则它不会知道输入何时准备好。离开`System.console()`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T07:05:22.987

您可以通过API 级别 >= 9 访问[控制台](http://developer.android.com/reference/java/lang/System.html#console%28%29)`System.console()`。NDK 还应该允许写入控制台。

# python - 如何找到输入数字的平均值，0 打破循环？

> ID：12539934
> 
> 赞同：-1
> 
> 时间：2012-09-22T01:23:58.903
> 
> 标签：python

我只需要弄清楚如何在使用 0 作为循环退出的同时找到用户所有这些输入数字的平均值。

我需要弄清楚如何消除使用 0 作为平均值的一部分。示例：5, 0, 5 ,5... 消除 0 后的平均值为 5。

```
nA = 1
nSum = 0
print ('enter numbers to find the average')
print ('enter 0 to quit.')
while nA !=0:
    nA = input ('gemmi a number:')
    nSum+=nA
   dAvg = nSum

print 'the total amount of numbers is' , nSum ,
print 'your average is' , dAvg , 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:27:30.827

在我看来，您需要保留一个计数器，告诉您用户输入了多少数字，以便您可以除以它以获得平均值（注意不要计算最后的 0）。顺便说一句，用户永远不能在`5,0,5,5`这里输入，因为在第一个 0 处，循环将中断，其他 2 个 5 将没有机会输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T01:30:37.510

进行平均的方法是跟踪所有数字的“总和”和“# 个项目”，并在完成后将两者相除。

所以是这样的：

```
nCount = 0
nSum = 0
nA = 1
print ('enter numbers to find the average')
print ('enter 0 to quit.')
while nA != 0:
    nA = input ('gemmi a number:')
    if nA != 0:
      nCount = nCount + 1
      nSum = nSum + nA

dAvg = nSum / nCount
print 'the total amount of numbers is' , nCount
print 'your average is' , dAvg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T01:35:27.147

目前还不清楚你想要做什么：你想使用 0 作为退出循环的条件，还是只想跳过所有的零？

对于第一种情况（我从你的问题的标题中了解到），可以这样做：

```
total = 0
nums = 0
readnum = None
print("Enter numbers to find the average. Input 0 to exit.")

while readnum != 0:
    readnum = int(raw_input('>'))
    total = total + readnum
    if readnum != 0:
      nums = nums + 1

print 'total amount of numbers is %d' % (nums)
print 'avg is %f' % (float(total)/nums) 
```

需要除法，`float`否则仅使用整数部分进行除法（例如，1、3 和 4 的平均值将给出 2，而不是 2.66667）。

它应该足够简单以适应第二种情况。

# c++ - 椭圆的内部是什么颜色？

> ID：12539936
> 
> 赞同：0
> 
> 时间：2012-09-22T01:24:04.683
> 
> 标签：c++, mfc, cdc

在 MFC 中：如果我使用 CBrush `"CBrush brush; CDC* pDC = GetDC();pDC->Ellipse(start.x,start.y,end.x,end.y);",` ，椭圆的内部会是什么颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T02:13:59.120

您没有使用画笔或分配任何东西；它只是一个变量声明。它完全没有任何作用，所以你会看到为画笔设置的任何颜色`pDC`。

如果您没有做任何更改，省略号的内部将是设备上下文的默认背景颜色`pDC`。

# javascript - 骨干引导集合未正确初始化

> ID：12539940
> 
> 赞同：6
> 
> 时间：2012-09-22T01:25:09.560
> 
> 标签：javascript, backbone.js

我有一个问题，真的很难注意到，因为在大多数情况下一切正常。只有当我试图在我的集合初始化函数中操作我的数据时，我才发现了一个问题。

[http://backbonejs.org/#Collection-constructor](http://backbonejs.org/#Collection-constructor)上的主干文档

“如果你定义了一个初始化函数，它将在集合创建时被调用。”

所以我将其解释为，我的初始化函数要等到模型设置好后才会运行。“这听起来很理想，”我说，但后来我遇到了这个问题。

我的引导代码如下：

```
new MyCollection(<?php if ($data) {echo json_encode($data);} ?>); 
```

我的收藏：

```
var MyCollection = Backbone.Collection.extend({
    model: MyModel,

    initialize: function() { 
        console.log(this); 
        console.log(this.length);
        this.each(function(model) {
            console.log(model);
        });
    } 
}); 
```

我得到了奇怪的结果。

第一个`console.log(this);`是预期的集合对象：

```
{ 
    .... 
    models: [3], 
    length: 3 
    .... 
} 
```

第二个`console(this.length);`打印出数字`0`

里面的控制台`this.each()`没有出现。

发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T02:38:05.953

Collection 构造函数[如下所示](https://github.com/documentcloud/backbone/blob/master/backbone.js#L597)：

```
var Collection = Backbone.Collection = function(models, options) {
  //...
  this._reset();
  this.initialize.apply(this, arguments);
  //...
  this.reset(models, {silent: true, parse: options.parse});
  //...
}; 
```

一步步：

1.  该[`this._reset()`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L896)调用执行`this.length = 0`.
2.  这`this.initialize.apply(...)`是对您的`initialize`方法的调用。
3.  将[`this.reset(...)`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L741)调用[`add`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L633)添加模型。该`add`调用将更新集合的`models`和`length`属性。

所以，当`initialize`被调用时，你将拥有`this.length == 0`并且`this.models`将是一个空数组，因为只有`_reset`在这里被调用。现在我们可以很容易地看到为什么`this.each`不做任何事情和为什么`console.log(this.length)`说`0`。

但是为什么`console.log(this)`告诉我们我们有一个填充的集合？好吧，`console.log`它不会立即发生，它只是获取对其参数的引用并稍后将某些内容记录到控制台；等到可以在控制台中放一些东西的时候`console.log`，你已经通过了上面的**(3)**`this.models`，这意味着你将拥有`this.length`你期望看到的东西。如果你说

```
console.log(this.toJSON()); 
```

或者：

```
console.log(_(this.models).clone()) 
```

您将看到`console.log`被调用时的状态，而不是`console.log`写入控制台时的状态。

该文档并未完全明确说明在调用时应该准备什么`initialize`，因此您无法通过源进行跟踪。这并不理想，但至少 Backbone 源是干净且直截了当的。

你会注意到它`initialize`是这样调用的：

```
this.initialize.apply(this, arguments); 
```

那里的[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)意思是`initialize`它将接收与构造函数相同的参数，因此您可以根据需要查看那里：

```
initialize: function(models, options) {
    // The raw model data will be in `models` so do what
    // needs to be done.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:07:49.880

您的引导不正确。您将需要使用 Collection reset() 方法，并像这样在您的收藏中侦听重置事件

引导代码：

```
var collection = new MyCollection;
collection.reset(<?php if ($data) { echo json_encode($data); } ?>); 
```

您的收藏代码：

```
var MyCollection = Backbone.Collection.extend({
    model: MyModel,

    initialize: function() {
        this.on("reset", this.foobar);
    },

    foobar: function(collection) {
       console.log(this); // will be the same
       console.log(this.length); //  will equal 3
       this.each(function(model) {
           console.log(model); // will output a console for each model.
       });
    }

}); 
```

# ruby-on-rails - Rails 表单提交，用户不能为空

> ID：12539941
> 
> 赞同：0
> 
> 时间：2012-09-22T01:25:20.977
> 
> 标签：ruby-on-rails, form-submit

我正在尝试通过事件表单创建一个事件，但我不断收到一个表单错误，上面写着“用户不能为空”。该事件需要一个 user_id 来发布一个 feed_item，显示谁创建了该事件。为什么无法创建此事件？

创建事件后，在 localhost:3000/events 下会弹出错误

事件.rb

```
class Event < ActiveRecord::Base
  attr_accessible :description, :location, :title, :category_id, :start_date,
  :start_time, :end_date, :end_time, :image

  belongs_to :user
  belongs_to :category

  has_many :rsvps
  has_many :users, through: :rsvps, dependent: :destroy

  mount_uploader :image, ImageUploader

  validates :title, presence: true, length: { maximum: 60 }
  validates :user_id, presence: true 
```

create_events.rb（数据库）

```
class CreateEvents < ActiveRecord::Migration
  def change
    create_table :events do |t|
      t.string :title
      t.date :start_date
      t.time :start_time
      t.date :end_date
      t.time :end_time
      t.string :location
      t.string :description
      t.integer :category_id
      t.integer :user_id

      t.timestamps
    end
    add_index :events, [:user_id, :created_at]
  end
end 
```

events_controller.rb

```
def index
  @events = Event.paginate(page: params[:page])

  # For calendar
  @events = Event.all
  @events_by_date = @events.group_by(&:start_date)
  @date = params[:date] ? Date.parse(params[:date]) : Date.today
  # For calendar

end

def new
    @event = Event.new
    @user = current_user
end

def create
    @event = current_user.events.build(params[:event])
    if @event.save
        flash[:success] = "Sesh created!"
        redirect_to root_url
    else
        @feed_items = []
        render 'static_pages/home'
    end
end 
```

路线.rb

```
SampleApp::Application.routes.draw do

  resources :users do
    member do
      get :following, :followers, :events
    end
  end

  resources :events do
    member do
      get :members
    end
  end

  root to: 'static_pages#home' 
```

事件/new.html.erb

```
<%= form_for @event, :html => {:multipart => true} do |f| %>
  <%= render 'shared/error_messages', object: @event %> 
```

我想我可能已经在我的 shared/_header.html.erb 中编辑了链接的路径...

```
<% if signed_in? %>
<%= link_to "Create Sesh", new_event_path, class: "btn btn-small btn-primary" %>
<% end %> 

<li><%= link_to "Events", events_user_path(current_user) %></li> 
```

users_controller.rb

```
 def events
    # For calendar
    @events = Event.all
    @events_by_date = @events.group_by(&:start_date)
    @date = params[:date] ? Date.parse(params[:date]) : Date.today
    # For calendar

    @title = "Events"
    @event = Event.find(params[:id])
    @event = @event.rsvps.paginate(page: params[:page])
    render 'events/index'
  end 
```

调试器

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
!binary "dXRmOA==": ✓
!binary "YXV0aGVudGljaXR5X3Rva2Vu": 6Nm9KxVpcGCvL7l94ypuPCCs/WL4F9W6zAMKqlSf2jQ=
!binary "ZXZlbnQ=": !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  !binary "dGl0bGU=": Trying to Create Event
  !binary "Y2F0ZWdvcnlfaWQ=": '15'
  !binary "c3RhcnRfZGF0ZQ==": '2012-09-22'
  !binary "ZW5kX2RhdGU=": '2012-09-23'
  !binary "bG9jYXRpb24=": Home
  !binary "ZGVzY3JpcHRpb24=": CREATE DAMMIT!
!binary "Y29tbWl0": Create Sesh!
action: create
controller: events 
```

我的 quick_event_form 的调试器弹出错误“-用户不能为空”

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
authenticity_token: 6Nm9KxVpcGCvL7l94ypuPCCs/WL4F9W6zAMKqlSf2jQ=
event: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  title: Make SESHI
  category_id: '16'
  start_date: '2012-09-22'
  location: home
commit: Make a quick Sesh!
action: create
controller: events 
```

找到了罪魁祸首！....我希望用户有一个事件，如果他们回复它。因此，如果我“通过 rsvps”取出事件，则会创建事件......但这对我的 rsvp 系统没有帮助:(

用户.rb

```
 has_many :rsvps
  has_many :events, through: :rsvps, dependent: :destroy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:48:05.480

这就是“events_controller.rb”中“新建”和“创建”操作的方式。删除此行`@user = current_user`

```
def new
    @event = Event.new
end

def create
    @event = current_user.events.build(params[:event])
    if @event.save
       flash[:success] = "Sesh created!"
       redirect_to root_url
    else
       @feed_items = []
       render 'static_pages/home'
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T06:55:15.017

为什么不最初在新操作中使用用户关联来构建事件？

```
def new
    @event = current_user.events.build
    @user = current_user
end

def create
    @event = Event.build(params[:event])
    if @event.save
        flash[:success] = "Sesh created!"
        redirect_to root_url
    else
        @feed_items = []
        render 'static_pages/home'
    end
end 
```

# android - 使用 IntentService 进行 Android 旋转

> ID：12539944
> 
> 赞同：1
> 
> 时间：2012-09-22T01:25:45.787
> 
> 标签：android, rotation, intentservice

我有一个使用 IntentService 运行后台任务的应用程序，我从网站中提取数据，解析数据，并根据结果创建日历事件。一切似乎都在创造，除了我遇到了旋转问题。使用下面的代码，当我旋转屏幕时，ProgressDialog 框保持可见，但在更新过程时永远不会用新文本更新，并且一旦调用完成就永远不会消失。我使用 IntentService 而不是 ASyncTask，因为用户还可以安排 IntentService 在其他时间运行，而无需与应用程序交互。任何帮助表示赞赏，谢谢！

```
public void onCreate(Bundle savedInstanceState) {
    Object retained = getLastNonConfigurationInstance();
    if (retained instanceof CalendarHandler) {
        // CH is a class level variable defined at the top which references my IntentService, aptly named CalendarHandler
        ch = (CalendarHandler) retained;
        ch.setActivity(this);
    } else {
        ch = null;
    }
    activity = this;

    btnLogin.setOnClickListener(OnClickListener(View view) {
            ch = new CalendarHandler();
            ch.setActivity(MyTlc.this);
            // Do other stuff, like run the intent service
    }
}

public Handler handler = new Handler() {
    public void handleMessage(Message message) {
        // We read the information from the message and do something with it
        // based on what the result code is
        String result = message.getData().getString("status");
        if (result.equals("ERROR")) {
            activity.removeDialog(PROGRESS_DIALOG);
            results.setText(message.getData().getString("error"));
        } else if (result.equals("DONE")) {
            activity.removeDialog(PROGRESS_DIALOG);
            int count = message.getData().getInt("count", 0);
            activity.results.setText("Added " + count + " shifts to the calendar");
        } else {
            activity.pDialog.setMessage(result);
        }
        super.handleMessage(message);
    }
}; 
```

据我了解，这应该可以工作，就像我说的 ProgressDialog 框确实保持正确，我似乎无法在旋转后将信息传递给对话框。

# javascript - 为一个简单的想法提出一个好的算法

> ID：12539946
> 
> 赞同：1
> 
> 时间：2012-09-22T01:27:02.757
> 
> 标签：javascript, algorithm, underscore.js

我需要想出一个算法来执行以下操作：

假设您有一个正数数组（例如`[1,3,7,0,0,9]`），并且您事先知道它们的总和是 20。

你想从每个数字中提取一些平均数量，这样新的总和就会少 7。

为此，您必须遵循以下**规则**：

*   你只能减去整数
*   结果数组不能有任何负值
*   您不能对存储桶的索引进行任何更改。

减法在数组上分布得越均匀越好。

这是我对 JavaScript + 下划线算法的尝试（可能会使其成为 n^2）：

```
function distributeSubtraction(array, goal){
    var sum = _.reduce(arr, function(x, y) { return x + y; }, 0);
    if(goal < sum){
      while(goal < sum && goal > 0){
         var less = ~~(goal / _.filter(arr, _.identity).length); //length of array without 0s
         arr = _.map(arr, function(val){ 
            if(less > 0){
                return (less < val) ? val - less : val; //not ideal, im skipping some! 
            } else {
                if(goal > 0){ //again not ideal. giving preference to start of array
                    if(val > 0) {
                        goal--;
                        return val - 1;
                    }
                } else {
                    return val;
                }
            }
         });
         if(goal > 0){
             var newSum = _.reduce(arr, function(x, y) { return x + y; }, 0);
             goal -= sum - newSum;
             sum = newSum;
         } else {
            return arr;
         }
      }
    } else if(goal == sum) {
      return _.map(arr, function(){ return 0; });
    } else {
      return arr;
    }
}
var goal = 7;
var arr = [1,3,7,0,0,9];
var newArray = distributeSubtraction(arr, goal);
//returned: [0, 1, 5, 0, 0, 7]; 
```

好吧，这行得通，但必须有更好的方法！我想这个东西的运行时间会随着更大的数组和更大的数字而变得很糟糕。

**编辑**：我想澄清这个问题纯粹是学术性的。把它想象成一个面试问题，你在白板上写一些东西，面试官会问你你的算法在不同类型的数据集上会如何表现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:41:36.203

听起来您想从每个数字中减去加权数量。IE 你想`X/sum * amount_to_subtract`从每个项目中减去。您当然需要将减去的金额四舍五入。然后问题是确保您减去了正确的总金额。此外，这取决于您的输入：您是否保证*可以*减去您要减去的金额？这是一个粗略的python实现，（我认为）：

```
def uniform_array_reduction(inp, amount):
  total = sum(inp)
  if amount > total:
    raise RuntimeError('Can\'t remove more than there is')

  if amount == total: #special case
    return [0] * len(inp)

  removed = 0
  output = []
  for i in inp:
    if removed < amount:
      to_remove = int(round(float(i)/float(total)*float(amount)))
      output.append(i - to_remove)
      removed += to_remove
    else:
      output.append(i)
  # if we didn't remove enough, just remove 1 from
  # each element until we've hit our mark.
  # shouldn't require more than one pass
  while removed < amount:
    for i in range(len(output)):
      if output[i] > 0:
        output[i] -= 1
        removed += 1
        if removed == amount:
          break
  return output 
```

编辑：我已经修复了代码中的一些错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T06:36:03.387

```
s = Sum(x) - required_sum
do:
    a = ceil( s/number_of_non_zeros(x) )
    For i=1 to length(x):
        v = min(a, x[i], s)
        x[i]-=v
        s-=v
while s>0 
```

这个版本不需要排序。

# php - 如何更改 Wordpress 中的操作优先级？

> ID：12539947
> 
> 赞同：17
> 
> 时间：2012-09-22T01:27:13.660
> 
> 标签：php, wordpress

我正在为子主题使用主题框架。它有许多钩子，但我特别关注 thematic_header() 。thematic_header() 钩子添加了以下操作（通过 add_action）：

```
<?php
  add_action('thematic_header', 'thematic_brandingopen', 1);
  add_action('thematic_header', 'thematic_blogtitle', 3);
  add_action('thematic_header', 'thematic_blogdescription', 5);
  add_action('thematic_header', 'thematic_brandingclose', 7);
  add_action('thematic_header', 'thematic_access', 9);
?> 
```

动作的内容无关紧要。

我的问题是：我怎样才能改变所讨论的五项行动的优先级。例如，我希望thematic_access() 在thematic_brandingopen() 之前加载。我能够弄清楚的唯一方法是删除并重新添加操作，ala：

```
<?php
  function remove_thematic_actions() {
    remove_action('thematic_header', 'thematic_access');
    add_action('thematic_header', 'thematic_access', 0); //puts it above thematic_brandingopen
  } 
  add_action ('init', 'remove_thematic_actions'); 
```

这似乎是完成非常简单的事情的愚蠢方式。有没有办法访问和排序/重新排序在 WP 中存储操作的任何数据结构？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T02:25:33.043

来自[WordPress](http://codex.wordpress.org/Plugin_API#Removing_Actions_and_Filters)

> 如果使用默认值 10 以外的优先级注册挂钩，则还必须在调用 remove_action() 时指定优先级。

所以我认为你可以先使用以下方法删除

```
remove_action('thematic_header', 'thematic_brandingopen', 1);
remove_action('thematic_header', 'thematic_access', 9); 
```

并再次使用不同的添加`priority`

```
add_action('thematic_header', 'thematic_access', 1);
add_action('thematic_header', 'thematic_brandingopen', 2); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T15:57:43.750

[不是自我推销，但我在这方面做了一些工作，通过一个名为Prioritize Hooks](http://wordpress.org/extend/plugins/prioritize-hooks/)的 WordPress 插件提供非编码解决方案。我的插件允许您通过 UI 设置各种注册钩子的优先级，并在运行时进行覆盖，因此代码不会被修改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-20T13:53:07.873

以防万一这有助于某人，变量操作存储在

```
global $wp_filter;
var_dump( $wp_filter[$hook_name] ); 
```

这是一个数组数组，其中键是添加​​操作时的优先级。

# wordpress - 两个循环，从第二个循环的第一个循环中排除帖子

> ID：12539952
> 
> 赞同：2
> 
> 时间：2012-09-22T01:27:48.077
> 
> 标签：wordpress

我有一个 wordpress 页面，它有两个这样的循环......

```
<?php 
global $post;
$args = array(
    'showposts'        => 1,
    'category_name'    => 'videos',
    'meta_key'         => 'feature-image',
);

$myposts = get_posts($args);  
foreach( $myposts as $post ) :  setup_postdata($post);
$exclude_featured = $post->ID;
?>
<span class="featured">
<?php the_title(); ?>
</span>
<?php endforeach; ?>

<?php while ( have_posts() ) : the_post(); ?>
<?php the_title(); ?>
<?php endwhile; ?> 
```

现在我需要在我的第二个循环中使用 $exclude_featured 一些如何从该循环中排除该帖子。我已经尝试了一些实现，但都没有奏效。我已尝试在第二个循环的 while 语句上方添加以下内容...

```
global $query_string;
query_posts( $query_string . '&exclude='.$exclude_featured ); 
```

还有这个...

```
global $wp_query;
$args = array_merge( $wp_query->query_vars, array( 'exclude' => $exclude_featured ) );
query_posts( $args ); 
```

..并没有运气。我注意到，通过使用这两个片段中的任何一个，它们还会渲染我的 pre_get_posts 函数，该函数将帖子的数量设置为无用。

任何帮助，将不胜感激

编辑：

我尝试`while`在第二个循环的语句之前添加以下行。

```
global $wp_query;
$args = array_merge( $wp_query->query_vars, array( 'post__not_in' => $exclude_featured ) );
query_posts( $args ); 
```

但是我仍然没有任何成功，它带来了以下错误：

> 警告：array_map() [function.array-map]：参数 #2 应该是第 2162 行 /home/myuser/public_html/mysitedirectory/wp-includes/query.php 中的一个数组
> 
> 警告：implode() [function.implode]：在第 2162 行的 /home/myuser/public_html/mysitedirectory/wp-includes/query.php 中传递的参数无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:48:36.213

你可以用这些替换你的最后三行：

```
<?php
while ( have_posts() ) : the_post();
if ( $exclude_featured == get_the_ID() )
    continue;

the_title();
endwhile;
?> 
```

[continue](http://php.net/manual/en/control-structures.continue.php)用于循环结构中以跳过当前循环迭代的其余部分并在条件评估处继续执行，然后开始下一次迭代。

但是，这将导致您显示的帖子减少。如果您想保持帖子数量完全相同，则需要在查询中排除帖子。问题中的查询非常接近正确，但 post__not_in 必须是数组，而不是整数。您需要做的就是将您的数组包装`$exclude_featured`在一个数组中，您的查询应该可以工作。

您的查询应如下所示：

```
global $wp_query;
$args = array_merge(
    $wp_query->query_vars,
    array(
        'post__not_in' => array(
            $exclude_featured
        )
    )
);
query_posts( $args ); 
```

# r - R 代码使用 .cpp 文件中的函数，基于 Rcpp 包

> ID：12539954
> 
> 赞同：0
> 
> 时间：2012-09-22T01:28:40.243
> 
> 标签：r, rcpp

我对如何使用 Rcpp 包感到困惑。在保存以下 .cpp 代码后，使用 newRcppVectorExample 的 R 函数的 R 代码是什么，例如 example.cpp？代码来自[http://dirk.eddelbuettel.com/code/rcpp.examples.html](http://dirk.eddelbuettel.com/code/rcpp.examples.html)。

我必须创建一个包吗？我可以直接使用example.cpp吗？例如 R CMD SHLIB example.cpp，然后使用 dyn.load 函数。

```
#include <RcppClassic.h>
#include <cmath>

RcppExport SEXP newRcppVectorExample(SEXP vector) {
BEGIN_RCPP

Rcpp::NumericVector orig(vector);                          
Rcpp::NumericVector vec(orig.size());                

std::transform(orig.begin(), orig.end(), vec.begin(), ::sqrt);

return Rcpp::List::create(Rcpp::Named( "result" ) = vec,
                          Rcpp::Named( "original" ) = orig) ;

END_RCPP
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:34:56.723

您可能想花一些时间阅读文档，包括 R 本身（即[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html)）和 Rcpp，您可以从 Rcpp-introduction vignette（这也是我们[的统计软件期刊论文](http://www.jstatsoft.org/v40/i08)）开始。

简而言之，一个扩展 R 通过`.Call()`可以访问通过包加载的编译代码的函数，或通过`dyn.load()`. 但是我在这里复制这些材料没有什么意义。

*编辑：*鉴于您找到了在[RcppExamples](http://cran.r-project.org/package=RcppExamples)包中显示的示例，以下是它在同一个包中的调用方式：

```
RcppVectorExample <- function(vec=seq(1,9)^2, api=c("classic", "new")) {

    api <- match.arg(api)               # match to classic or new
    fun <- paste(api, "RcppVectorExample", sep="")

    ## Make the call...
    val <- .Call(fun,                   # either new or classic
                 vec,
                 PACKAGE="RcppExamples")

    val
} 
```

这比通常情况稍微复杂一些，因为我们可以从旧的和已弃用的 API（仍然由[RcppClassic](http://cran.r-project.org/package=RcppClassic)包提供）或新的 API（您为其选择代码）调用示例。

关键是它`.Call()`与命名的 C++ 函数的第一个参数一起使用，然后是一组参数和一个指向共享库所在包的最后一个参数。

# java - 不确定将课堂作业所需的 Java 库放在哪里

> ID：12539955
> 
> 赞同：1
> 
> 时间：2012-09-22T01:28:53.387
> 
> 标签：java, vim, import, shared-libraries

下周我将在 UCSD 开始 Java 编程课程，我正在努力准备周末。有一个名为 objectdraw.jar 的库，随我们将用于课堂项目的书一起提供。我目前在我的 Java 项目中使用 Vim，因为大多数作业都很简单，而且我仍在努力学习和掌握 Vim。

现在的问题：

在 C++ 中，我可以使用带有尖括号 <> 的#include 将头文件包含在默认文件夹中，并使用带有引号“”的#include 来包含本地头文件。从我在一些 Internet 搜索中发现的内容看来，Java 无法做到这一点。

我尝试将 objectdraw.jar 文件放在与我的 .java 文件相同的文件夹中以进行第一次分配，但它没有使用以下代码找到库：

```
import java.awt.*;
import objectdraw.*; 
```

当我在网上搜索时，Gentoo HOWTO 提到设置一个 CLASSPATH 但随后提到这些指令应该被视为已弃用，但没有提供进一步的说明。

我下载库[http://eventfuljava.cs.williams.edu/library.html](http://eventfuljava.cs.williams.edu/library.html)的网站没有为 Vim 提供说明，但为 Eclipse 和 Netbeans 等其他 IDE 提供说明。

谁能告诉我我会将 .jar 文件放在哪里，我的所有项目都可以找到它，或者任何人都可以指出我可能找到答案的资源。在网上搜索时，我似乎问错了问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:37:05.060

[在这里](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)查看如何使用命令行选项设置类路径到任何 java sdk 工具 - java、javac。该页面显示了如何设置环境变量 CLASSPATH 以及如何使用开关 -classpath。

在您的情况下，如果您将 objectdraw.jar 与源文件放在同一目录中，那么您将需要这样的命令来编译 -

```
javac -classpath . MyClass.java 
```

这要运行

```
java -classpath . MyClass 
```

您还可以在类路径中提供 jar 文件的完整路径并添加多个目录和 jar。例如`-classpath .:/path/to/my.jar:/some/other/directory`*nix 环境的注释路径和分隔符。在 Windows 上会是；和 \

编辑：请注意下面的注释，以引用其中包含空格的路径。

# android - 当位置 ==2 时调用destroyItem 为什么？安卓寻呼机适配器

> ID：12539961
> 
> 赞同：2
> 
> 时间：2012-09-22T01:31:09.380
> 
> 标签：android

我有一个非常简单的 PagerAdapter，由于某种原因，当它滚动到位置 2 时，它会删除位置 0 和 1 的视图。

具体来说，当我第一次运行应用程序时，有 3 个视图。我滚动到位置 2，位置 1 的视图将消失。视图 0 仍然存在。如果我滚动到视图 0 并返回到视图 2 并再次返回到视图 0，视图 0 会突然消失。我再次这样做，我实际上可以看到视图 0 被实例化并立即被销毁。

这里发生了什么？

主要活动

```
public class MainActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final MyPagerAdapter adapter = new MyPagerAdapter(this);
        final ViewPager myPager = (ViewPager) findViewById(R.id.mypanelpager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(1);
}

public class MyPagerAdapter extends PagerAdapter {

private Context ctx;
Calendar c = Calendar.getInstance();
int month = c.get(Calendar.MONTH);
int year = c.get(Calendar.YEAR);
ViewGroup collection;

public MyPagerAdapter (Context ctx){
    this.ctx = ctx ;
}

@Override
public int getCount() {
    return 3;
}

public Object instantiateItem(ViewGroup container, int position ){
    this.collection = (ViewPager)container;
    NewMonth monthObject = new NewMonth(ctx, month+position-1,2012);
    View monthLayout = monthObject.newParentLayout;
    collection.addView(monthLayout);
    return monthLayout;
    return addViewAt(position);
    }

@Override
    public void destroyItem(ViewGroup container, int position, Object object) {
    collection.removeViewAt(position);
}

 @Override
     public Parcelable saveState() {
     return null;
     }

@Override
public boolean isViewFromObject(View view, Object arg1) {
    return view==arg1;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T17:09:54.400

您必须维护内存中的所有选项卡，将 OffscreenPageLimit 指定为 N-1，在您的情况下，将其放在 onCreate 方法中：

```
myPager.setOffscreenPageLimit(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:28:31.780

来自源的结帐`populate()`功能`ViewPager`- 它有明确的检查然后删除 currentIndex+1 和 currentIndex-1 项目。删除是根据视图大小完成的，它似乎完全是内部 ViewPager 逻辑。ViewPager 源位于

```
<android sdk folder>\extras\android\support\v4\src\java\android\support\v4\view\ViewPager.jav‌​a 
```

.

您可能会调试`ViewPager`以知道这确实发生了，但在您遇到 ViewPager 的一些严重问题之前，我不会建议您这样做。原因是什么：如果您深入研究 ViewPager 代码，它可能会导致您基于其内部结构而不是其公共接口和文档在其上编写一些骇人听闻的代码（甚至不是故意的）。因此，数据封装的主要思想将被破坏，这绝对是不好的（遗憾的是，有时我们需要在 Android 中这样做，因为缺乏文档/不明确的命名/android 内部问题等，请查看[Steve McConnell 的 Code Complete](http://books.google.co.kr/books?id=3JfE7TGUwvgC&pg=PT141&lpg=PT141&dq=code%20complete%20encapsulation&source=bl&ots=RQu-1M3PeI&sig=MLBRNrKQ9LQSeLjlMK0fXNs_c1Y&hl=en&sa=X&ei=jiJdUNavPKWPiAethoH4Aw&redir_esc=y#v=onepage&q=code%20complete%20encapsulation&f=false)了解更多信息有关良好封装等的详细信息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T15:09:38.233

这里的关键是位置与索引不同。如果他们给您一个职位，则不能保证您的收藏没有删除其他职位。

示例：假设您在位置 2。destroyItem 可能已被调用为位置 0，这意味着在您的集合中，现在位置 2 实际上位于索引 1。因此您的索引将很快与您的位置不同步。listview 子级也会发生同样的事情。我建议改用 sparseArray。

```
private final SparseArray<View> views = new SparseArray<>();

public View instantiateItem(ViewGroup container, final int position) {
    ...
    views.put(position, view);
    ...
}

public void destroyItem(ViewGroup container, int position, Object object) {
     View view = views.get(position);
     if (view != null) {
         container.removeView(view);
         views.remove(position);
     }
} 
```

# c# - 将 JSON 发布到 MVC 控制器 - 字符串参数为空

> ID：12539966
> 
> 赞同：1
> 
> 时间：2012-09-22T01:31:36.123
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-ajax

我故意尝试不在控制器参数中使用绑定，所以我有一个看起来像这样的控制器：

```
 [HttpPost]
        public ActionResult UntypedForm(String serializedformdata)
        {
        //// ...
        } 
```

当我使用以下代码将序列化的 JSON 表单元素发布到控制器时：

```
var formelements = $('#form').serializeArray();
$.post(url, formelements, function (data) {

    }, "json").error(function () {
        alert("Error posting to " + url); 
    }); 
```

我在控制器上获得了 String serializedformdata 的 NULL 值。但是，当我用强类型对象替换 String serializedformdata 时，绑定按预期正常工作。

我的控制器的重点是通用 JSON 帖子，我将在其中创建一个 BSON 文档以放入 Mongo 数据库。所以....我故意不想要模型绑定，我想要序列化的字符串作为参数。为什么我发布时我的 serializedformdata 字符串为空？

注意 - 我也尝试绑定到 Dictionary with

```
public ActionResult UntypedForm(Dictionary<string,string> serializedformdata)
            {
            //// ...
            } 
```

但 serializedformdata 仍然为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:03:01.820

该函数`serializeArray`使用表单的键/值对创建一个 Javascript 对象。你不想要那个，你想要一个带有`serializedformdata`=（JSON 字符串）的键/值。即，像这样；

```
var formelements = { serializedformdata: JSON.stringify($('#form').serializeArray()) }; 
```

这会将原始 JSON 字符串传递给控制器​​的参数。您可以使用`JavaScriptSerializer`来获取服务器上的对象：

```
var obj = (List<Dictionary<string,string>>)new JavaScriptSerializer().Deserialize(serializedformdata, typeof(List<Dictionary<string,string>>));
Dictionary<string,string> dict = obj.First();
string someval = dict["somekey"]; 
```

# bash - 是否可以将 bash shell 命令的输出作为 node.js 中的字符串获取？

> ID：12539969
> 
> 赞同：1
> 
> 时间：2012-09-22T01:31:46.123
> 
> 标签：bash, node.js

> **可能重复：**
> [Node.js Shell 脚本和参数](https://stackoverflow.com/questions/7464036/node-js-shell-script-and-arguments)

我想在 node.js 中将 shell 命令的输出作为字符串获取，但我不确定从哪里开始。此类命令的一个示例是 bash 命令“ls”，它列出当前文件夹的内容，并在终端窗口中打印结果。是否可以将此输出转换为 Javascript 字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:24:04.967

请参阅 nodejs.org API 文档中的“[子进程](http://nodejs.org/api/child_process.html)”文档，该文档提供了处理您提到的确切任务的示例代码，即运行“ls”命令并捕获其输出。

```
var spawn=require('child_process').spawn,
    ls=spawn('ls', ['-lh', '/usr']); // runs the 'ls -lh /usr' shell cmd

ls.stdout.on('data', function(data) { // handler for output on STDOUT
  console.log('stdout: '+data);
});

ls.stderr.on('data', function(data) { // handler for output on STDERR
  console.log('stderr: '+data);
});

ls.on('exit', function(code) { // handler invoked when cmd completes
  console.log('child process exited with code '+code);
}); 
```

# c# - C# MVC 4 ControllerName 属性

> ID：12539970
> 
> 赞同：8
> 
> 时间：2012-09-22T01:31:55.817
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, maproute

我正在为我的 MVC 4 控制器提供友好的名称，我想做一些类似`[ActionName="My-Friendly-Name"]`风格的事情，但是对于整个控制器。

我找不到有关此类属性的任何信息，那么我该怎么做呢？另外，我需要添加一个新的 MapRoute 来处理它吗？

编辑：

例如，我想路由以下网址：

```
 http://mysite.com/my-reports/Details/5 
```

被路由到以下控制器：

```
[ControllerClass="my-reports"]  // This attribute is made up.  I'd like to know how to make this functionality
public class ReportsController : Controller
{
    //
    // GET: /Reports/

    public ActionResult Index()
    {
        return View();
    }

    public ViewResult Details(int id)
    {
        Report report = db.Reports.Single(g => g.Id == id);
        return View(report);
    }

    public ActionResult Create()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Create(Report item)
    {
        try
        {
            if (ModelState.IsValid)
            {
                item.Id = Guid.NewGuid();
                _context.Reports.AddObject(item);
                _context.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(item);
        }
        catch (Exception)
        {
            return View(item);
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T03:51:22.103

添加与您的特定名称匹配的自定义路由：

```
routes.MapRoute(
    "MyCustomRoute",
    "My-Friendly-Name/{action}/{id}",
    new { controller = "ReportsController", action = "Index", id = "" }
); 
```

现在每个包含控制器“My-Friendly-Name”的 url 都将使用你的新路由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T02:01:14.120

结帐[这篇文章](http://maxtoroq.github.io/2012/09/5-reasons-why-you-should-use-mvccoderouting.html)，特别是它谈论*路线格式*的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-21T06:53:05.497

使用 Microsoft.AspNetCore.Mvc；

[ControllerName("SomeOtherName")] // 这个属性不是编的。
公共类 ReportsController : 控制器 { ...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-22T02:35:57.450

我不知道你的问题是否有答案，但即使有，你到底为什么要做这样的事情？为什么不做标准的方式：调用控制器类你喜欢的任何东西（只要它有意义）并让框架为你调用它？为什么要创建两个人为的命名约定并在它们之间进行映射？我看到的不是单一的收益，而是多重的弊端。例如 - 它更难阅读，更难维护，更难理解，它也微不足道，但仍然对性能造成压力......

**更新**

请查看此帖子，我认为他们确实解决了您所说的问题。

*   [如何在 ASP.NET MVC 中实现动态控制器和动作方法？](https://stackoverflow.com/questions/3303801/how-to-achieve-a-dynamic-controller-and-action-method-in-asp-net-mvc)

请让我知道它是否对您有任何帮助。

# php - 如何根据与现有记录匹配的单个字段值覆盖表中的单个 MySQL 记录？

> ID：12539971
> 
> 赞同：2
> 
> 时间：2012-09-22T01:32:39.547
> 
> 标签：php, mysql, database, forms, pdo

我有一个写入 MySQL 数据库的表单。

例如：

员工编号：

姓名：

年龄：

高度：

重量：

第一个字段，员工编号是一个用户的唯一 ID。

我希望这样的情况是，如果有人用不同的唯一员工编号填写表格，它会创建一个新记录，但是如果填写的是相同的数字，那么它只会写入旧记录 - 这样他们就可以回来稍后调整提交。

我当前用于编写表单的数据库表单的代码如下所示：

```
try {
  $pdo = new PDO('mysql:host=localhost; dbname=db1', $username, $password);
  $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

  $stmt = $pdo->prepare('INSERT INTO table
  (
Time,
Unique_ID,
q1,
q2,
q3
) 

VALUES
  (
now(),
:Unique_ID,
:q1,
:q2,
:q3
)');

$stmt->execute(array(
':Unique_ID => $UID,
':q1' => $q1,
':q2' => $q2,
':q3' => $q3
  ));

# Affected Rows?
  echo $stmt->rowCount(); // 1
} catch(PDOException $e) {
  echo 'Error: ' . $e->getMessage();
} 
```

非常感谢任何和所有帮助，谢谢。

编辑：根据@Adrian Cornish 在下面的建议，我将查询调整为 REPLACE 语句：

现在是这样写的：

```
try {
  $pdo = new PDO('mysql:host=localhost; dbname=db1', $username, $password);
  $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

  $stmt = $pdo->prepare('REPLACE INTO table
  (
Time,
Unique_ID,
q1,
q2,
q3
) 

VALUES
  (
now(),
:Unique_ID,
:q1,
:q2,
:q3
)');

$stmt->execute(array(
':Unique_ID => $UID,
':q1' => $q1,
':q2' => $q2,
':q3' => $q3
  ));

# Affected Rows?
  echo $stmt->rowCount(); // 1
} catch(PDOException $e) {
  echo 'Error: ' . $e->getMessage();
} 
```

此外，我在 MySQL 数据库中编辑了表结构，使得“Unique_ID”字段现在具有“非空”和“唯一索引”属性，如以下文档所示： http: [//dev.mysql.com/doc/refman /5.6/en/replace.html](http://dev.mysql.com/doc/refman/5.6/en/replace.html)

状态：REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。

但是，在尝试为相同的 Unique_ID 输入数据两次时，我收到了错误：

```
Error: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '90210'     for key 'Unique_ID_UNIQUE' 
```

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:35:57.460

您可以`SELECT`在您的员工编号上，如果返回一行，则发出后续查询`UPDATE`，否则`INSERT`查询。那是手动的方式。

[您可以使用INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html)获得相同的结果，但这不会那么灵活。

# c++ - 动态规划选择不大于 k 和总和 S 的 nos 元组（大小 T）

> ID：12539973
> 
> 赞同：1
> 
> 时间：2012-09-22T01:33:26.677
> 
> 标签：c++, algorithm, dynamic-programming

伙计们这是问题

在一场锦标赛中，N 名玩家互相对战一次。每场比赛都会导致任一玩家获胜。没有关系。您已经给出了一张记分卡，其中包含每个玩家在比赛结束时的得分。玩家的得分是玩家在锦标赛中赢得的总局数。然而，一些球员的分数可能已经从记分卡中删除了。有多少可能的记分卡与输入记分卡一致？

输入：第一行包含案例 T 的数量。接下来是 T 案例。每个案例在第一行包含数字 N，然后在第二行包含 N 个数字。第 i 个数字表示 s_i，即第 i 个玩家的得分。如果第 i 个玩家的分数已被擦除，则以 -1 表示。

输出：输出 T 行，包含每个案例的答案。输出每个结果模 1000000007。

**我已将其简化为上述问题形式，但在大量输入时失败**。这开始让我头疼。任何帮助将不胜感激。我有以下代码..我是否遗漏了一些极端情况。

```
 #include<stdio.h>
    long long  solutionMatrix[781][41];
      long long
    noOfWays (int gamesUndecided, int inHowMany, int noOfPlayers)
    {
      if (inHowMany > 0 && gamesUndecided >= 0)
      {
        int i;
        long long result;
        for (i = noOfPlayers - 1, result = 0; i >= 0; i--)
        {
          if((gamesUndecided-i)>=0)
          {
            if (solutionMatrix[gamesUndecided - i][inHowMany - 1] == -1)
              solutionMatrix[gamesUndecided - i][inHowMany - 1] = noOfWays (gamesUndecided - i, inHowMany - 1, noOfPlayers);
            result += solutionMatrix[gamesUndecided - i][inHowMany - 1];
            result %=1000000007L;
          }
        }
        return result%1000000007L;
      }
      else
        return (inHowMany == 0 && gamesUndecided == 0) ? 1 : 0;
    }

      long long
    possibleCards (int score[], int noOfPlayers)
    {
      int i;
      int maxGames = (noOfPlayers * (noOfPlayers - 1)) / 2;
      int sumOfGames = 0, unDecided = 0;
      for (i = 0; i < noOfPlayers; i++)
      {
        if (score[i] != -1)
        {
          if (score[i] >= 0 && score[i] <= noOfPlayers - 1)
          {
            sumOfGames += score[i];
          }
          else
            return 0;
        }
        else
          unDecided++;
      }
      if (sumOfGames > maxGames || (unDecided==0 && sumOfGames < maxGames))
        return 0;
      if (sumOfGames==maxGames && unDecided==0)
        return 1;
      else
      {
        int j;
        for (i = 0; i < 781; i++)
          for (j = 0; j < 41; j++)
            solutionMatrix[i][j] = -1;
        return noOfWays (maxGames - sumOfGames, unDecided, noOfPlayers)%1000000007L;
      }
    }

      int
    main ()
    {
      int noOfTestCases;
      int score[41];
      printf("%u\n",0xffffffff);
      scanf ("%d", &noOfTestCases);
      for (; noOfTestCases > 0; noOfTestCases--)
      {
        int noOfPlayers;
        scanf ("%d", &noOfPlayers);
        int i;
        for (i = 0; i < noOfPlayers; i++)
        {
          scanf ("%d", score + i);
        }
        printf ("%lld\n", possibleCards (score, noOfPlayers));
      }
      return 0;
    } 
```

# jquery - 为什么我必须刷新页面才能使 javascript 函数正常工作？

> ID：12539974
> 
> 赞同：0
> 
> 时间：2012-09-22T01:33:50.410
> 
> 标签：jquery

我正在开发一个移动网站并使用 jQuery。

当我加载某个页面并单击所需的按钮时，代码在我刷新页面之前不会执行。为什么是这样 ？

这就是我的方式

```
script.js

$(document).ready(function() 
{ 
  $("#user-save").click(
      function(e)
       {
         alert(/clickity-click/);
       });
});

page.php

<html>
   <head>
       <!-- Other jQuery files here -->
      <script src="script.js"></script>
   </head>
<body>
   <div id="user-save" data-role="button">Click me like a boss</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T02:18:42.233

JQuery Mobile 加载页面的方式与“普通”javascript 应用程序不同。您通常需要绑定到 pageinit 事件而不是 document.ready。

请参阅有关此主题的[先前 SO 讨论](https://stackoverflow.com/questions/5622581/jquery-mobile-document-ready-equivalent)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-22T01:44:32.803

我花了几个小时在出现此问题的页面上重写代码，才意识到问题与链接/上一个页面有关。

链接/上一页上的锚标记和链接，即指向您希望确保`$(document).ready(init)`运行的页面的链接，必须包含`data-ajax="false"`如下属性：

```
<a href="yourpage.html" data-ajax="false"> 
```

这将确保 JQuery Mobile 不会期望您使用 AJAX 动态加载内容，并且您实际上是在导航到不同的/新页面。换句话说，JQuery Mobile 只有在`$(document).ready()`加载不同/新页面时才会运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T01:37:38.307

改变这些行：

1.  `<script type='text/javascript' src="script.js"></script>`
2.  `alert('clickity-click');`

# python - 从 JSON 加载类变量？

> ID：12539976
> 
> 赞同：2
> 
> 时间：2012-09-22T01:34:00.540
> 
> 标签：python, json, python-2.7

我有一个类，我将从 JSON 行中实例化很多。就像是：

```
class Something:
    def __init__(self, json):
        #load all self variables from simplejson.loads(json) here
        print self.some_variable_loaded_from_json 
```

我希望这尽可能高效，因为这个类每秒加载数百次。我知道我可以使用从 simplejson 生成的字典中的键/值对执行 for 循环，但是如果有一种方法可以让 simplejson 直接加载到类变量而无需 O(n) 开销，那就太棒了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T02:25:53.233

如果您只是将 JSON 数据加载到 Python 对象中，只需将相关字典传递给该方法 - 在那里您可以简单地使用传入的字典`__init__`覆盖您的实例：`__dict__`

```
>>> import json
>>> json_data =  '{"a": "my data"}'
>>> data = json.loads(json_data)
>>> class AutoVar(object):
...   def __init__(self, data):
...       self.__dict__ = data
... 
>>> test = AutoVar(data)
>>> test.a
u'my data' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T01:39:01.650

您将不得不加载数据一次并保持缓存，或者在`Something`. 不幸的是，SimpleJson 没有维护“对象缓存”或类似的东西（Python 中的任何其他 JSON 库也没有）。要再次从 JSON blob 获取数据，您必须重新解析 blob 本身（或文件，无论它是什么）。

我可能会建议您将这些变量从 JSON 添加到*类*而不是每个实例中，并且仅在必要时添加。例如：

```
class Something(object):
    @classmethod
    def _load_from_json(cls, blob):
        for k, v in blob.iteritems():
            setattr(cls, k, v) 
```

调用`_load_from_json`将相对昂贵，但您只需要在 JSON 本身发生更改时执行此操作，然后所有实例都`Something`将对数据进行类似属性的访问。

类似地，如果您正在查看此处的文件，我最近发布了一个要点，它允许对 YAML 文件进行实时类似对象的访问（尽管您实际上可以在代码中换掉`yaml`）`json`。它可能会做你正在寻找的东西。

# java - 将长应用程序划分为线程

> ID：12539978
> 
> 赞同：0
> 
> 时间：2012-09-22T01:34:18.907
> 
> 标签：java, multithreading

我每天晚上都有一个流程运行，并为一组公司进行大量数据分析。我只是在贯穿 company list 的 for 循环中执行此操作。有时完成此过程大约需要 1 小时。有时会导致一些错误，它会在导致 . 我必须手动重新启动它，它会处理所有剩余的公司分析。

由于每个 for 循环运行都是一个单独的公司的数据分析，所以 for 循环内的多线程应该是一个好的解决方案吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T01:39:15.910

[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)是你的朋友！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T03:11:20.653

> 由于每个 for 循环运行都是一个单独的公司的数据分析，所以 forloop 内的多线程应该是一个好的解决方案吗？

可能是，可能不是。

让我们看看事实：

> 有时完成此过程大约需要 1 小时

就其本身而言，这应该不是问题。一小时不是很长的时间，特别是因为你可能有大约 12 小时的时间来做这件事。

并且多线程*不一定*会显着减少经过的时间。这取决于任务的性质、处理算法以及硬件和系统配置的性质。

> 有时会导致一些错误，它在导致（什么？）之间崩溃。

多线程不会解决这个问题。如果您让每个公司都在单独的线程中运行，那么同样的错误仍然会导致该线程崩溃。并且根据错误的*原因*和错误的*后果*，一家公司的崩溃也可能导致其他公司崩溃……或导致它们以其他方式无法正常工作。

> 我必须手动重新启动它，它会处理所有剩余的公司分析。

线程也不能完全解决这个问题。

您仍然需要修复导致原始崩溃的问题，然后手动重新启动。而且您仍然存在区分和记录需要重新运行的公司的问题，这样您就不会不必要地重复另一个。

总之，多线程可以使应用程序运行得更快（它可能会 IMO），但我真的不认为它会解决你的根本问题......这似乎是错误的数据或导致处理失败的错误.

* * *

最后，在技术层面上，简单地为每个公司启动一个线程可能是一个坏主意。如果您尝试并行完成工作，线程将竞争本地资源和后端数据库上的资源。最好使用具有有限池大小的 ThreadPoolExecutor 之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T01:51:28.220

为什么不为错误处理添加一个包装器......记录它并在出现错误时继续......这样你就不必重新启动以防出现错误。

```
for( your company list){
try{
    your tasks
}catch(Exception){
//log error and proceed 
```

}

您的任务是否独立于您的公司列表？如果是这样，您可以创建新线程来处理每个任务。如果不是，您可以按所需顺序依次处理它们

# javascript - Google Maps API - 在地图外显示标记信息

> ID：12539982
> 
> 赞同：0
> 
> 时间：2012-09-22T01:34:46.943
> 
> 标签：javascript, google-maps-api-3

这是我要完成的工作：

当您单击标记时，通常会显示在气泡中的信息会显示在地图外部的 DIV 中，在右侧的部分中，并具有自己的格式。

我不确定该怎么做。[我在这里](https://stackoverflow.com/questions/9713860/google-maps-api-marker-info-in-sidebar)尝试了这些建议，但那是从 2007 年开始的，我认为 GDownload() 函数现在已被弃用。或者至少，我在 Google Developer 网站上的文档和 API 列表中找不到任何参考。

我所知道的是，我需要以某种方式将以下内容转换为 DIV。

```
downloadUrl("genxml.php", function(data) {
  var xml = data.responseXML;
  var locations = xml.documentElement.getElementsByTagName("marker");
  for (var i = 0; i < locations.length; i++) {
    var name = locations[i].getAttribute("name");
    var address = locations[i].getAttribute("address");
    var type = locations[i].getAttribute("type");
    var point = new google.maps.LatLng(
        parseFloat(locations[i].getAttribute("lat")),
        parseFloat(locations[i].getAttribute("lng")));
    var html = "<div id=loc> <div class=loc-name>" + name + "</div> <br/>" + address + "<br/>" + "<div class=loc-type>" + type + "</div></div>";
    var icon = customIcons[type] || {};
    var marker = new google.maps.Marker({
      map: map,
      position: point,
      icon: icon.icon,
      shadow: icon.shadow
    });
    bindInfoWindow(marker, map, infoWindow, html);
  }
});
}
 document.getElementById("loc-info").innerHTML = html;

 function bindInfoWindow(marker, map, infoWindow, html) {
   google.maps.event.addListener(marker, 'click', function() {
     infoWindow.setContent(html);
     infoWindow.open(map, marker);
   });
 } 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:02:18.283

只需更改创建信息窗口的代码即可设置 div 的内容：

```
 function bindInfoWindow(marker, map, infoWindow, html) {
   google.maps.event.addListener(marker, 'click', function() {
     document.getElementById('loc-info').innerHTML = html;
   });
 } 
```

**编辑：**您还想删除该行（您之前的那一行`function bindInfoWindow`），它什么都不做，因为`html`此时不存在：

```
document.getElementById("loc-info").innerHTML = html; 
```

# ruby-on-rails - Roadie gem 导致 malloc 错误：被释放的指针未在 Ruby 中分配

> ID：12539989
> 
> 赞同：0
> 
> 时间：2012-09-22T01:35:45.087
> 
> 标签：ruby-on-rails, ruby, nokogiri

> **可能重复：**
> [Nokogiri 是针对 LibXML 版本 2.7.7 构建的，但已动态加载 2.7.3](https://stackoverflow.com/questions/4831714/nokogiri-was-built-against-libxml-version-2-7-7-but-has-dynamically-loaded-2-7)

收到以下错误：

```
ruby(16475,0x12faf6000) malloc: *** error for object 0x7f97d2c7002a: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
Abort trap: 6 
```

我一整天都在尝试很多事情来解决这个问题......但它仍然会出现并使我的开发环境崩溃。

我发现 Roadie 依赖于 Nokogiri，而 Nokogiri 又依赖于另外几个库，其中一个可能包含错误。

我重新安装了 libxml2、libxslt、libiconv，这反过来又导致我重新安装 postgresql 并重新编译 ruby​​。我卸载并重新安装了 nokogiri，链接到他们安装指南中提到的库。

尽管在 Roadie 开始处理电子邮件时仍然出现 malloc 错误。

此外，得到这个 nokogiri 负载警告：

```
WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.7.3 
```

我卸载/重新安装了指向正确库的 nokogiri，但可能是另一个程序在 nokogiri 到达它之前加载了 libXML，并且这个另一个程序是针对旧版本构建的？不太确定...

对此有什么建议吗？

# lex - Lex 保留字规则与查找表

> ID：12539990
> 
> 赞同：2
> 
> 时间：2012-09-22T01:36:02.773
> 
> 标签：lex, flex-lexer

[该](http://epaperpress.com/lexandyacc/sym.html)网页建议如果您的 lex 程序“有大量保留字，让 lex 简单地匹配一个字符串并在您自己的代码中确定它是变量还是保留字会更有效”。

我的问题是：在哪里更高效，为什么？如果这意味着编译词法分析器更快，我并不真正关心这一点，因为它是从使用词法分析器解析输入的程序中删除的一步。

似乎 lex 只是使用您的描述来构建一个一次处理一个字符的状态机。增加状态机的大小必然会导致它变得比使用一个标识符规则然后进行多个字符串比较慢，这似乎是不合逻辑的。

此外，如果事实证明这有某种逻辑上的理由作为一种优化是有意义的，那么什么会被认为是大量的保留字呢？我有大约 20 条，而其他各种规则大约有 30 条。那会被认为是大量的保留字吗？我应该尝试对其他一些符号使用相同的策略吗？

我试图用谷歌搜索结果，但我发现的唯一相关文章指出了这个策略，好像它是众所周知的，没有给出任何理由。

如果相关，我使用的是 flex 2.5.35。

编辑：[这](http://www.mkssoftware.com/docs/wp/wp_lyuse.asp#RecWords)是另一个参考，它声称 lex 在被要求匹配几个长文字字符串时会产生效率低下的扫描器。它也没有给出理由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:13:10.847

根据[flex 手册](http://westes.github.io/flex/manual/Performance.html)，“扫描仪的速度与规则的数量无关，或者......规则对于 '*' 和 '|' 等运算符的复杂程度。”

主要的性能损失是由于回溯。这可以通过（除其他外）使用包罗万象的规则来避免，该规则将匹配“以”有问题的令牌“开始”的令牌。例如，如果您有一个由 [a-zA-Z_] 组成的保留字列表，然后是一个匹配 [a-zA-Z_][a-zA-Z_0-9]* 形式的标识符的规则，则匹配标识符的规则将捕获以保留字名称开头的任何标识符，而无需备份并再次尝试匹配。

根据[faq](http://westes.github.io/flex/manual/Flex-is-not-matching-my-patterns-in-the-same-order-that-I-defined-them_002e.html)， flex 生成一个确定性有限自动机，它“同时并行地进行所有匹配”。如上所述，其结果是扫描仪的速度与规则的数量无关。另一方面，字符串比较在规则数量上是线性的。

因此，保留字规则实际上应该比查找表快得多。

# javascript - 从回调访问时出现 Javascript 范围错误

> ID：12539993
> 
> 赞同：0
> 
> 时间：2012-09-22T01:36:28.463
> 
> 标签：javascript, angularjs

下面是来自 angularjs 服务的部分代码。不过，它可能不是一个特定的问题。

`$http.get('/api/test/1').then ( ...`返回承诺，我喜欢处理回调返回的数据。访问过滤器方法时出现错误。

```
Test.filter(data.Root);

TypeError: Object #<Object> has no method 'filter' 
```

但是，我可以访问`data`同一范围内的变量（上一行）。

```
var testApp = angular.module('testApp.services', []);
testApp.factory('Test', function ($http, $rootScope) {
    var Test = {};
    var data = [];

    Test.filter = function (d) {
        ret = data.filter(function (el) {
            return el.Pid == d.Id;
        });
        return ret;
    };
    Test.data = function () {
        return data[1];
    };

    Test.start = function () {
        Test.asyncData = $http.get('/api/test/1')
            .then(function (response) {
                data = response;
                return Test.filter(data.Root);
            }, function (response) {
                Test.error = 'Can\'t get data';
                data = 'Error: ' + response.data;
                return data;
            });
    };

    return Test;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:54:10.403

我认为您的错误来自：

```
ret = data.filter(... 
```

您设置为响应的`data`变量没有过滤方法。

它可能不是您认为的那种类型，或者您打算在其他东西上调用过滤器方法。

# php - Ember.js 与 mustache 库的兼容性

> ID：12539997
> 
> 赞同：4
> 
> 时间：2012-09-22T01:37:13.013
> 
> 标签：php, ember.js, handlebars.js, mustache

我目前正在开发一个 PHP 站点，我计划将它与[Mustache PHP](https://github.com/bobthecow/mustache.php)一起使用，这样我就可以在我的 PHP 渲染以及我的 javascript（ajax 驱动）页面更新中使用相同的 mustache 模板文件。在[四处搜索](https://stackoverflow.com/questions/11282417/handlebarsjs-php-rendering)之后，我无法找到与 PHP 等效的 handlebars.js 库，尽管我更愿意在任何事情上都使用把手。

我正在决定是使用 Ember.js 还是 Backbone.js。我知道 Ember 使用车把，并且车把使用 mustache.js 中不存在的语法和功能，它是基于它的。我也知道 handlebars.js 可以很好地与 mustache 模板一起使用。

我倾向于 Ember 并愿意在必要时分叉和更新 Mustache PHP 以与 Handlebars.js 一起使用。

但首先，Ember.js 能很好地与直胡须模板配合使用吗？或者正确利用 Ember 是否也意味着使用只有车把支持的模板功能？

如果我必须分叉 PHP 库，我会渴望首先添加哪些主要的车把功能？

在此先感谢，这将真正帮助我决定是否值得我使用 Ember.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:51:00.837

Handlebar.js 在 Mustache(.php/.js) 语法上添加了一些“帮助程序”......但是这些完全没用，因为 Mustache 已经很好地做到了：

```
{{#each xyz}}...{{/each}} is the same as {{#xyz}}...{{/xyz}} in Mustache.
{{#if xyz}}...{{/if}}     is the same as {{#xyz}}...{{/xyz}} in Mustache.
{{#with xyz}}...{{/with}} is the same as {{#xyz}}...{{/xyz}} in Mustache. 
```

相比之下：

```
{{#unless xyz}}...{{/unless}} is the same as {{^xyz}}...{{/xyz}} in Mustache. 
```

Ember.js 看起来很像 handlebar.js，而 Backbone.js 似乎为与逻辑无关的 Mustache-Kind-of-rendering 一些输出添加了很多逻辑。

我在一些小型和大型网站上使用 Mustache(php)。Ajax 调用导致 Mustache 填写了一段 html，而 jQuery 用结果替换了一些 dom 元素。它就像一个魅力。

对我来说：不要向 Mustache 添加逻辑，只需从 Handlebar.js 中删除逻辑（我想它也可以在没有那些“帮助者”的情况下工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T03:22:09.967

我不需要使用 Ember，但确实注意到，在我发布这个问题后不久，其他人开始了[在 PHP 中解析 Handlebars](https://github.com/XaminProject/handlebars.php)的项目，而[这个库是另一种方法](https://github.com/zordius/lightncandy)。这些库是我一直在寻找的解决方案，因为仅使用 mustache 渲染器处理车把模板有很多潜在的复杂性。