# StackOverflow 问答 12795000-12795999

# delphi - 确定 TIBTransaction 是否有挂起的更改

> ID：12795003
> 
> 赞同：1
> 
> 时间：2012-10-09T07:34:55.097
> 
> 标签：delphi, transactions, delphi-xe2, firebird

我正在使用 Embarcadero Delphi XE2 和 Firebird DB，使用`TIBDatabase`和`TIBTransaction`组件`TIBTable`。在表单中，用户可以编辑数据库表的数据并在需要时提交/回滚更改。**当他关闭表单时，我想问他是否要提交/回滚待处理的更改。**

**但前提是有待处理的更改**。否则我不想打扰/混淆用户。**我怎样才能确定它？**我尝试了`Active`交易`InTransaction`的属性，但它们总是正确的。如果它有用，请注意我`AllowAutoStart`在事务中设置为 true。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:36:28.267

您可以自己跟踪未决更新：在您的表[`AfterDelete`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.AfterDelete)和[`AfterPost`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.AfterPost)事件中打开标志；将其关闭[`AfterTransactionEnd`](http://docwiki.embarcadero.com/Libraries/XE3/de/IBCustomDataSet.TIBCustomDataSet.AfterTransactionEnd)：

```
// IBTable1.AfterDelete
procedure TForm1.IBTable1AfterDelete(DataSet: TDataSet);
begin
  FPendingUpdates := True;
end;

// IBTable1.AfterPost
procedure TForm1.IBTable1AfterPost(DataSet: TDataSet);
begin
  FPendingUpdates := True;
end;

// IBTable1.AfterTransactionEnd
procedure TForm1.IBTable1AfterTransactionEnd(Sender: TObject);
begin
  FPendingUpdates := False;
end;

// Form1.OnCloseQuery
procedure TForm1.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
var
  DlgResult: TModalResult;
begin
  CanClose := False;

  if FPendingUpdates then
    DlgResult := MessageDlg('Commit pending updates before closing?', mtConfirmation,
      [mbYes, mbNo, mbCancel], 0, mbCancel)
  else
    DlgResult := mrNo;

  case DlgResult of
    mrYes:
      IBTransaction1.Commit;
    mrNo:
      IBTransaction1.Rollback;
    mrCancel:
      Exit;
  end;

  CanClose := True;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:39:14.807

[http://docwiki.embarcadero.com/Libraries/XE3/en/IBDatabase.TIBTransaction.SQLObjects](http://docwiki.embarcadero.com/Libraries/XE3/en/IBDatabase.TIBTransaction.SQLObjects)

枚举该事务的所有表并询问这些表是否有挂起的更改。如果没有 - 然后默默地提交并退出。如果有 - 提示用户。

# ios - TableView的ImageView

> ID：12795010
> 
> 赞同：-2
> 
> 时间：2012-10-09T07:35:19.697
> 
> 标签：ios, image, uitableview

直到 2 天，我试图从 plist 文件中加载一些图像到我的表格视图行中。当我在返回之前将此行添加到“cellForRowAtIndexPath”方法时，我创建了 NSMutableArray `cell.imageView.image = [UIImage imageNamed:[images objectAtIndex:row]];`，xcode 给了我这个错误：使用未声明的标识符 'cell' 和不兼容的指向整数转换的指针将双精度发送到 NSUInteger 类型的参数。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:22:52.123

关于第二部分“**不兼容的指向整数转换的指针将双精度发送到 NSUInteger 类型的参数**”。检查数据类型`row`。如果不是`NSUInteger`，则不能将其用作`[images objectAtIndex:row]`. 尝试`[images objectAtIndex:indexPath.row]`而不是那样。关于第一个问题，我同意上面`cell`没有声明和初始化的评论。您需要声明它并分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:15:03.907

添加这些，

```
static NSString *CellIdentifier =@"Cell";

   UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

# python - Python SSL wrap_socket 因 SSLError 失败，Errno 336265218

> ID：12795012
> 
> 赞同：3
> 
> 时间：2012-10-09T07:35:23.387
> 
> 标签：python, ssl

我有简单的客户端/服务器 SSL 代码，在 Python 3.2 上运行良好。但是，我决定切换到 2.7（由于大量第三方模块），现在代码失败了。代码如下：

客户：

```
def connect(self):
    self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.sock.connect(('localhost', 4430))
    self.ssl_sock = ssl.wrap_socket(self.sock, cert_reqs = ssl.CERT_NONE, ssl_version = ssl.PROTOCOL_TLSv1) 
```

服务器：

```
self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    self.sock.bind((self.hostname, 4430))
    self.sock.listen(5)
    while True:
        self.newsocket, self.fromaddr = self.sock.accept()
        self.ssl_sock = ssl.wrap_socket(
                            self.newsocket, 
                            server_side = True,
                            certfile = "cert.pem",
                            ssl_version=ssl.PROTOCOL_TLSv1
        ) 

        self._handle_client(self.ssl_sock) 
```

cert.pem（与服务器 .py 文件位于同一目录中）：

```
-----BEGIN RSA PRIVATE KEY-----
(812 "random" characters here)
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
(1260 "random" characters here)
-----END CERTIFICATE----- 
```

失败如下：
1\. server 在 self.sock.accept() 上等待
2\. client 用 self.sock.connect() 连接
3\. server 继续 wrap_socket，失败并出现以下错误：

```
Traceback (most recent call last):
  File "C:\Program Files\Python27\lib\multiprocessing\process.py", line 258, in _bootstrap
    self.run()
  File "C:\workspace\projectc\server\server\clientlistener.py", line 49, in run
    ssl_version=ssl.PROTOCOL_TLSv1
  File "C:\Program Files\Python27\lib\ssl.py", line 381, in wrap_socket
    ciphers=ciphers)
  File "C:\Program Files\Python27\lib\ssl.py", line 141, in __init__
    ciphers)
SSLError: [Errno 336265218] _ssl.c:351: error:140B0002:SSL routines:SSL_CTX_use_PrivateKey_file:system lib 
```

PS
1）我怀疑 wrap_socket 调用，因为即使我使用不存在的文件作为 certfile，也会产生相同的错误。
2）我在ssl上的python文档上尝试了替代包装（即使用ssl.SSLContext），奇怪的是'module'对象没有属性'SSLContext'，当它是ssl模块的一部分时。当我使用 Python 3.2 进行尝试时，这不是问题。

**更新：** 我发现问题只发生在我从 Eclipse 中“运行”时，而不是当我从单独的命令提示符运行这两个文件时。还在调查这个问题...

**更新 2：** 我尝试了一个非常简单的客户端/服务器脚本，代码相同，它可以工作。现在，由于服务器代码位于多处理子进程中（由主服务器进程启动），它似乎无法正常工作。有关的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:21:42.573

问题解决了。我相信 Eclipse 持有一些残余信息，尽管我从未弄清楚它持有什么信息。它可能与从 python 3.2 到 2.7 的迁移有关，尽管我之前已经在运行配置中更改了它。重置 Eclipse 环境有效（仅仅重启计算机是不够的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-02T01:07:26.670

我的解决方案是，在创建我的 .pem 文件时，我设置了一个空白密码并假设它没有密码。所以服务器仍然希望使用密码。我不得不手动删除密码。

如果对任何人有帮助，这里有一些指导方法（另外，请注意我正在为 iOS 应用程序的服务器端编写 Python 代码）

注意：需要先按照苹果开发者网站的指示创建证书，然后导出 .p12 文件，通过导出创建的嵌入式私钥（在“钥匙串访问”中），而不是实际的证书 ———————— —————————————————————————————————————————————————————— ——————————————— FOR DEVELOPMENT CERT：得到p12文件后，需要在终端执行以下命令，将其转换为PEM格式： $ openssl pkcs12 -clcerts -nokeys -out apns-dev-cert.pem -in apns_dev.p12 $ openssl pkcs12 -nocerts -out apns-dev-key.pem -in apns_dev.p12

如果您希望删除密码，请执行以下操作：（注意：在导出/转换时使用“空白”密码，实际上仍然是在设置密码，因此如果您打算没有密码，您仍应执行以下操作）$ openssl rsa -in apns-dev-key.pem -out apns-dev-key-noenc.pem

最后，您需要将密钥和证书文件组合成一个 apns-dev.pem 文件，我们将在连接到 APNS 时使用：

$ cat apns-dev-cert.pem apns-dev-key-noenc.pem > apns-dev.pem

———————————————————————————————————— FOR PRODUCTION CERT：得到p12文件后，需要通过从终端执行以下命令转换为 PEM 格式： $ openssl pkcs12 -clcerts -nokeys -out apns-prod-cert.pem -in apns_prod.p12 $ openssl pkcs12 -nocerts -out apns-prod-key.pem -in apns_prod.p12

如果您希望删除密码，请执行以下操作：（注意：在导出/转换时使用“空白”密码，实际上仍然是在设置密码，因此如果您打算没有密码，您仍应执行以下操作）$ openssl rsa -in apns-prod-key.pem -out apns-prod-key-noenc.pem

最后，您需要将密钥和证书文件组合成一个 apns-dev.pem 文件，我们将在连接到 APNS 时使用：

$ cat apns-prod-cert.pem apns-prod-key-noenc.pem > apns-prod.pem

# c# - 加密现有的 zip 文件

> ID：12795017
> 
> 赞同：3
> 
> 时间：2012-10-09T07:35:33.423
> 
> 标签：c#, encryption, zip

我有一个现有的 zip 文件，我想使用 AESManaged 类对其进行加密，但我找不到在哪里可以设置该类中 zip 文件的密码。经过研究，我发现一些诸如“DotNetZip”之类的库可以完成任务。但是我的文件已经是一个.zip，我不需要再次压缩，我只想加密它。任何人都可以帮助我使用 AESManaged 类来实现目的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:17:58.237

如果您想在解压缩时在原始 zip 文件中使用密码，则需要重新压缩文件并在执行此操作时添加密码。

[dotnetzip 库文档中的此链接](http://dotnetzip.herobo.com/DNZHelp/Code%20Examples/CSharp.htm)显示了一种使用该库使用密码加密进行压缩的简单方法。

* * *

关于安全性的附加说明：
如果您完全关心加密安全性，请不要使用 zip 2.0 加密方法，因为它存在很大缺陷。而是使用 AES 256 位加密。

这是一些示例代码（直接从上面的链接中提取）显示了使用 dotnetzip 库和默认级别压缩的 AES 256 位加密的实现：

```
using (ZipFile zip = new ZipFile())
{
    zip.AddFile("ReadMe.txt"); // no password for this one
    zip.Password= "Cool.Hand.Luke!";
    zip.Encryption= EncryptionAlgorithm.WinZipAes256;
    zip.AddFile("Rawdata-2008-12-18.csv");
    zip.Save("Backup-AES-Encrypted.zip");
} 
```

* * *

编辑：添加了关于原始 zip 文件的说明
编辑 2：添加了代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T09:37:22.503

我不知道这是否是您正在寻找的，但我创建了一个加密任何文件的代码。

这是加密器的代码：

```
private void EncryptFile(string inputFile, string outputFile)
        {
            string password = @"yourPWhere";
            UnicodeEncoding UE = new UnicodeEncoding();
            byte[] key = CreateKey(password);

            string cryptFile = outputFile;
            FileStream fsCrypt = new FileStream(cryptFile, FileMode.Create);

            RijndaelManaged RMCrypto = new RijndaelManaged();
            IV = CreateIV(password_mTxtBx.Text);

            CryptoStream cs = new CryptoStream(fsCrypt,
                RMCrypto.CreateEncryptor(key,IV),
                CryptoStreamMode.Write);

            FileStream fsIn = new FileStream(inputFile, FileMode.Open);

            int data;
            while ((data = fsIn.ReadByte()) != -1)
                cs.WriteByte((byte)data);

            fsIn.Close();
            cs.Close();
            fsCrypt.Close();
        } 
```

这是解密器的代码：

```
 private void DecryptFile(string inputFile, string outputFile)
    {
            string password = @"yourPWhere";

            UnicodeEncoding UE = new UnicodeEncoding();
            byte[] key = CreateKey(password);
            FileStream fsCrypt = new FileStream(inputFile, FileMode.Open);
            RijndaelManaged RMCrypto = new RijndaelManaged();
            IV = CreateIV(password_mTxtBx.Text);

            CryptoStream cs = new CryptoStream(fsCrypt,
                RMCrypto.CreateDecryptor(key, IV),
                CryptoStreamMode.Read);

            FileStream fsOut = new FileStream(outputFile.Remove(outputFile.Length - 4), FileMode.Create);

            int data;
            while ((data = cs.ReadByte()) != -1)
                fsOut.WriteByte((byte)data);

            fsOut.Close();
            cs.Close();
            fsCrypt.Close();

        } 
```

几个月前，我在 codeproject 上看到了类似的代码。所以这不是我的直接工作。学分归作者所有。

更新了基于密码的密钥派生 (PBKDF2)：

```
private static int saltLengthLimit = 32;
private static byte[] GetSalt(int maximumSaltLength)
{
    var salt = new byte[maximumSaltLength];
    using (var random = new RNGCryptoServiceProvider())
    {
        random.GetNonZeroBytes(salt);
    }

    return salt;
}
public static byte[] CreateKey(string password)
{
    var salt = GetSalt(10);

    int iterationCount = 20000; // Nowadays you should use at least 10.000 iterations
    using (var rfc2898DeriveBytes = new Rfc2898DeriveBytes(password, salt, iterationCount))
        return rfc2898DeriveBytes.GetBytes(16);
} 
```

IV 的创建者（从密码创建）：

```
public byte[] CreateIV(string password)
{
    var salt = GetSalt(9);

    const int Iterations = 325;
    using (var rfc2898DeriveBytes = new Rfc2898DeriveBytes(password, salt, Iterations))
        return rfc2898DeriveBytes.GetBytes(16);
} 
```

在我的情况下，密钥的字节长度为 128 位（！）= 16 字节（128/8），但您可以使用 Rijndael 支持的任何其他长度（密钥：128、192、256 位 = 16、24、32 字节） . IV 总是 16 个字节！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:17:19.803

您可以使用您提到的[DotNetZip (Ionic zip)](http://dotnetzip.codeplex.com)，它支持设置密码，提供零级压缩：

```
using (ZipFile zip = new ZipFile())
  {
    zip.CompressionLevel = Ionic.Zlib.CompressionLevel.None;
    zip.AddFile(@"MyMusic\Messiah-01.mp3");
    zip.Save(ZipFileToCreate);
  } 
```

因此，您只需设置密码就没有开销（压缩已经压缩的文件）。

# mysql - MySQL 小写自动转换

> ID：12795021
> 
> 赞同：4
> 
> 时间：2012-10-09T07:35:38.123
> 
> 标签：mysql

我有多个在数据库表中写入数据的 Web 服务。对于特定字段，我想自动将大写字符串转换为小写字符串。是否有执行此任务的任何 mysql 函数？

假设这是表：

```
id | name | language 
```

有时，在语言字段中，Web 服务会写入大写字符串 (IT)。我想直接在 MySQL 中将其转换为小写字符串（“it”）。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-09T08:45:28.150

在表上定义[触发器](http://dev.mysql.com/doc/en/triggers.html)：

```
CREATE TRIGGER lcase_insert BEFORE INSERT ON my_table FOR EACH ROW
SET NEW.language = LOWER(NEW.language);

CREATE TRIGGER lcase_update BEFORE UPDATE ON my_table FOR EACH ROW
SET NEW.language = LOWER(NEW.language); 
```

然后更新现有数据：

```
UPDATE my_table SET language = LOWER(language); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T07:37:29.403

你可以使用：

```
LOWER("some_string"); 
```

请参阅：[降低](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_lower)

你的意思是这样的吗。。

补充：在表格中插入数据时，您可以转换为小写，例如：

```
INSERT INTO your_table (name, language)
    VALUES ( "Some Name", LOWER( "SOME VALUE" ) ); 
```

或者更好的解决方案是将要插入到语言字段的值从服务器端脚本转换为**小写，然后再插入到 db。**

您可以使用[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)进行自动转换，但我建议在从表中获取数据时使用 LOWER() 函数，例如：

```
SELECT LOWER(language) AS language FROM your_table_name 
```

# iphone - MPMovieNaturalSizeAvailableNotification 不起作用？

> ID：12795030
> 
> 赞同：4
> 
> 时间：2012-10-09T07:36:01.087
> 
> 标签：iphone, objective-c, ios6, mpmovieplayercontroller

我添加了一个带有以下代码的通知，

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(videoLoadingComplete)
                                           name:MPMovieNaturalSizeAvailableNotification
                                          object:self.streamPlayer]; 
```

`videoLoadingComplete`但即使在视频明星播放后，它也没有进入该功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:56:37.933

您可以使用以下代码

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviestart:)   name:MPMoviePlayerLoadStateDidChangeNotification object:nil];
 -(void)moviestart
{
//your code here
} 
```

# android - 微调器原文

> ID：12795040
> 
> 赞同：0
> 
> 时间：2012-10-09T07:36:36.207
> 
> 标签：android, android-spinner

我正在尝试在微调器本身被用户单击之前显示“选择城市”。

我怎样才能做到这一点？

我当前的 XML 代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.olacabs.customer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/page_background"
    android:orientation="vertical" >

 <TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/darker_gray"
    android:gravity="center"
    android:paddingBottom="4dp"
    android:paddingTop="4dp"
    android:text="@string/rate_card"
    android:textColor="@color/white"
    android:textSize="20dp"
    custom:customFont="litera_bold.ttf" />

 <Spinner
    android:id="@+id/select_city"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="40dp"
    android:prompt="@string/selectCity" />

</LinearLayout> 
```

另外，究竟`android:spinnerMode`是做什么的。我尝试将其值更改为，`dropdown`但没有任何反应，应用程序仍然显示弹出对话框。

我实现这个 XML 文件的活动是：

```
public class RateCardActivity extends OlaActivity {

    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.rate_card);

        Spinner spinner = (Spinner) findViewById(R.id.select_city);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.select_city, android.R.layout.simple_spinner_item); 
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:41:15.563

你可以这样做..创建一个自定义适配器插入..

试试下面的代码

在您的资源中

```
<string-array name="listarray">
<item>Select One</item>
<item>Item One</item>
<item>Item Two</item>
<item>Item Three</item>
</string-array> 
```

在您的 onItemSelected 侦听器中：

```
TextView selection;
spinnername.setOnItemSelectedListener(new OnItemSelectedListener() {
@Override
public void onNothingSelected(AdapterView<?> parent) {
selection.setText("");
}
@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    if (pos == 0) {
    }else {
        // Your code to process the selection
    }
}
}); 
```

欲了解更多信息，请通过此[链接](http://www.java-samples.com/showtutorial.php?tutorialid=1517)和[链接](http://www.mkyong.com/android/android-spinner-drop-down-list-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:27:05.027

改变： `extends OlaActivity` 到`extends Activity`

# android - 沿主屏幕过渡更改图像

> ID：12795041
> 
> 赞同：0
> 
> 时间：2012-10-09T07:36:37.513
> 
> 标签：android, live-wallpaper

我正在尝试创建一个简单的动态壁纸，它可以在主屏幕幻灯片上滑动图像。
所以我写了这段代码。它在某些设备上有效，但在几个设备中出现内存不足错误。
我知道保存几张大图像需要很多内存。

有人有解决这个内存不足问题的想法吗？

```
void drawFrame() {
    SurfaceHolder holder = getSurfaceHolder();
    Canvas c;
    if(mScreenNo < 1 || isPreview() || offsetOK == false){
        Log.d("drawFrame","mScreenNo < 1 || isPreview()");
        c = holder.lockCanvas();
        c.drawBitmap(bg_I, 0, bgY, p);
    }else{
    float bg_w = bg_I.getWidth();
    Float[] bg_x = new Float[mScreenNo +1];

    for(int i=0; i < bg_x.length; i++){
        bg_x[i] = bgX + bg_w * i;
    }

        c = holder.lockCanvas();

    Log.d("draw"," bgX="+bgX);

    for(int i=0; i < bg_x.length; i++){
        switch(i%3){
        case 0:
        c.drawBitmap(bg_I, bg_x[i], bgY, p);
        break;
        case 1:
        c.drawBitmap(bg_II, bg_x[i], bgY, p);
        break;
            case 2:
        c.drawBitmap(bg_III, bg_x[i], bgY, p);
        break;
            }
    }
    }

    holder.unlockCanvasAndPost(c);
    handler.removeCallbacks(drawThread);
    if (visible)
    handler.postDelayed(drawThread, 25);
    }
    } 
```

在 onOffsetChanged，我确实喜欢这样。

```
 @Override
        public void onOffsetsChanged(float xOffset, float yOffset, float xStep,
                float yStep, int xPixels, int yPixels) {
            mXoffset = xOffset;
            mXStep = xStep;
            mXPixels = xPixels;
            mScreenNo = (int)(1/mXStep);//Number of screens(-1)
            mPageNo = (int)(mXoffset / mXStep);//current screen page(the first page is 0)
            mWallStep = getWallpaperDesiredMinimumWidth()/2 /mScreenNo;
            float mwall_screen = rescale.getScreenWidth() / mWallStep;
            bgX = mXPixels * mwall_screen;
            offsetOK = true;
} 
```

我需要你的帮助！
等待你的好主意。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:07:34.833

我只是自己解决了这个问题。也许这是一种愚蠢的解决方法，但现在效果很好。

我如何解决这个问题只是修改for循环如下：

```
 for(int i=0; i < bg_x.length; i++){
    if(-bg_w < bg_x[i]&& bg_x[i] <= bg_w){
        Log.d("drawFrame","draw this time");
        switch(i%3){
        case 0:
            c.drawBitmap(bg_I, bg_x[i], bgY, p);
            break;
        case 1:
            c.drawBitmap(bg_II, bg_x[i], bgY, p);
            break;
        case 2:
            c.drawBitmap(bg_III, bg_x[i], bgY, p);
            break;
        }
    }else{
        Log.d("drawFrame","no draw this time");
    }
} 
```

希望这会对某人有所帮助。

# .net - COM Callable Wrapper 与哪个 Apartment 相关联？

> ID：12795053
> 
> 赞同：4
> 
> 时间：2012-10-09T07:37:12.913
> 
> 标签：.net, com, com-interop

我已经阅读了很多关于 COM 公寓和 .NET 互操作的内容，但我还没有找到这个问题的答案。这让我相信我可能问错了问题。

我知道 .NET 线程（如本机线程）既可以是 MTA 也可以是 STA，我找到了关于此的文档，但我很少看到关于对象及其 CCW 如何与这些公寓关联的信息。

我的猜测是 CCW 的线程模型是“Both”并且 CCW 与创建线程所属的任何一个单元相关联。

哪个公寓与 CCW 相关联，我能否控制这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:04:05.763

.NET 实现的 COM 对象通常可以存在于任何类型的 COM 单元中。默认情况下，将 .NET 程序集注册为 COM 服务器的 .NET 方法/工具将使用 threading model = 注册 coclass `Both`。

如果您想将 .NET 类公开为具有不同线程模型的 COM coclass（例如强制进入 STA），那么您需要提供[自定义注册功能](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comregisterfunctionattribute%28v=vs.110%29.aspx)。

# sql - 如何计算特定数字在select语句中的出现？

> ID：12795057
> 
> 赞同：1
> 
> 时间：2012-10-09T07:37:31.850
> 
> 标签：sql, oracle, plsql

我想计算 select 语句中特定数字的总出现次数。例如。

如果这些 GL-Cods [1010100,2020200,3030300] 出现，它会显示“DISBURSMENT”和这些 GL 代码的总数。
如果这些 GL 代码 [5050500,6060600,7070700] 出现，它会显示“手头现金”和这些 GL 代码的计数总数。

```
GL        Tag                 
---       -----               
1010100   Disbursment
2020200   Disbursment
3030300   Disbursment
5050500   Cash in Hand
6060600   Cash in Hand
7070700   Cash in Hand
------- --------------
total:
Disbursment:  3
Cash in Hand: 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:39:55.383

`COUNT`像`GROUP BY`这样使用：

```
SELECT Tag, COUNT(*) Total
FROM Tags
GROUP BY Tag 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/dbefa/1)

# php - 连接输入值 html/php

> ID：12795060
> 
> 赞同：0
> 
> 时间：2012-10-09T07:37:38.903
> 
> 标签：php, html

我已经为 phpbb 论坛制作了一个自定义登录页面。当前用户输入“用户名”和“密码”。由于我的大多数用户都是傻子，所以我将“用户名”输入框更改为“名字”和“姓氏”两个输入框。到目前为止我所拥有的[这是一个 .php 文件]：

```
<form action="./ucp.php?mode=login" method="post">
    <fieldset>
        <!-- my new input boxes -->
        <label for="username">First name:</label>&nbsp;
        <input type="text" name="firstname" id="firstname" size="10" title="Firstname" ><br><br>
        <label for="username">Last name:</label>&nbsp;
        <input type="text" name="lastname" id="lastname" size="10" title="Lastname" ><br><br>

        <!-- original input box; now hidden -->
        <label for="username">Username:</label>&nbsp;
        <input type="hidden" name="username" id="username" size="10" title="Username" />

        <label for="password">Password:</label>&nbsp;
        <input type="password" name="password" id="password" size="10" title="Password" />

        <br><label for="autologin">Log me on automatically each visit
        <input type="checkbox" name="autologin" id="autologin" /></label>

        <br><input type="submit" name="login" value="Login" />
    </fieldset>
</form> 
```

我想知道如何连接“名字”和“姓氏”字段以创建一个“用户名”变量。我更喜欢不使用 javascript 的解决方案，但如果没有简单的替代方案，我想我会选择一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:40:07.780

`.`像这样在php中用于连接

```
$user = $_POST['firstname'].$_POST['lastname']; 
```

`+`在javascript中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T10:14:15.937

您可以使用以下行：

```
$lastname= $_POST['lastname']
$firstname= $_POST['firstname']
$username = lastname.' '.$lastname; 
```

当然，您应该在操作页面中使用它，而不是上面的那个，即“./ucp.php”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:40:17.487

您需要在 onsubmit 处理程序中使用 javascript 或破解 ucp.php 以接受名字和姓氏。Javascript 的优点是您可以升级 phpBB 而不会破坏您的更改。下面的代码未经测试。

```
onsubmit="this.username.value=this.firstname.value+this.lastname.value; return true;"; 
```

# java - 开源 Web 应用程序测试自动化工具

> ID：12795061
> 
> 赞同：0
> 
> 时间：2012-10-09T07:37:41.400
> 
> 标签：java, jakarta-ee, web-applications

我们从一个 Web 应用程序开始，并考虑 TDD 开发。谁能给我一个开源工具列表来自动化我们的测试。

在此先感谢考希克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:40:19.273

首先也是最重要的：[Jenkins](http://jenkins-ci.org/)持续集成服务器（或来自其他供应商的 CI 服务器）。

您还可以查看[CI 服务器列表进行比较](http://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software)。

还有许多其他工具可以简化使用 TDD 的开发过程，例如：

*   显然是单元测试框架（JUnit、TestNG）
*   模拟框架（EasyMock、Mockito、PowerMock）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:25:10.680

看看[Cucumber](http://cukes.info/) for BDD，它与[Jenkins](http://www.cheezyworld.com/2011/08/09/running-your-cukes-in-jenkins/)集成，可能会帮助您进行验收测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:03:40.283

此外，不要忘记用于构建的[Maven](http://maven.apache.org/) 、用于自动化 Web 应用程序测试的[Selenium](http://seleniumhq.org/)和用于负载测试的[JMeter 。](http://jmeter.apache.org/)

干杯，

# jquery - 无法让灯箱在选项卡式内容中工作

> ID：12795063
> 
> 赞同：-1
> 
> 时间：2012-10-09T07:37:51.437
> 
> 标签：jquery, tabs, lightbox

我正在尝试从选项卡式内容中使用灯箱插件。它在第一个标签上运行良好，但在其他标签上却不行。想不通。任何帮助表示赞赏。

这是html css和jquery：

```
<div class="tabbedPanels" id="tabbed1">

<ul class="tabs">

  <li><a href="#panel1" tabindex="1">Hand Tools</a></li>
  <li><a href="#panel2" tabindex="2">Power Tools</a></li>
  <li><a href="#panel3" tabindex="3">Accessories</a></li>
  <li><a href="#panel4" tabindex="4">Decorating</a></li>
  <li><a href="#panel5" tabindex="5">Safety</a></li>

</ul>

<div class="panelContainer">

<div id="panel1" class="panel">

<h2>Panel 1 content</h2>

<p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. </p>
<p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga.</p>
<p>&nbsp;</p>

<div id="images" class="images">

  <a href="#" title="Click for larger image"><img src="#" alt="some img"></a>
  <a href="#" title="Click for larger image"><img src="#" alt="some img"></a>

</div><!--End of .images-->

</div><!--End of panel 1-->​

<div id="panel2" class="panel">

<h2>Panel 1 content</h2>

<p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. </p>
<p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga.</p>
<p>&nbsp;</p>

<div id="images" class="images">

  <a href="#" title="Click for larger image"><img src="#" alt="some img"></a>
  <a href="#" title="Click for larger image"><img src="#" alt="some img"></a>

</div><!--End of .images-->

</div><!--End of panel 2-->​

</div><!--End of panel container-->

<style type="text/css">

/* Begin tabbed content styles */

.tabbedPanels {

    width: 98%;
    margin-right: auto;
    margin-left: auto;
    display: block;

}

.tabs {

    margin: 0!important;
    padding: 0; 
    zoom : 1;
}

.tabs li {

    float: left;
    list-style: none;
    padding: 0;
    margin: 0 !important;
    font-weight: bold;
}

.tabs a {
    display: block;
    text-decoration: none;
    padding: 3px 5px;
    background-color: #EEE;
    margin-right: 3px;
    border: 1px solid #ccc;
    margin-bottom: -1px;
    color: #999999 !important;
}

.tabs .active {
    border-bottom: 1px solid white;
    background-color: white;
    color: #06F !important;
    position: relative;
    text-decoration: none;
}

.tabs li a:hover, .tabs li a:active {

    text-decoration: none !important;
    background-color: white;
    color: #06F !important;

}

.panelContainer {

    clear: both;
    margin-bottom: 25px;    
    border: 1px solid #CCC; 
    background-color: white;
    padding: 10px;
}

.panel h2 {

    color
}

.panel p {

    color: black;   
}

</style>

<script type="text/javascript">

// Tabbed content script

$(document).ready(function() {
    $('.tabs a').bind('click focus',function() {
        var $this = $(this);

        // hide panels
        $this.parents('.tabbedPanels')
            .find('.panel').hide().end()
            .find('.active').removeClass('active');

        // add active state to new tab
        $this.addClass('active').blur();    

        // retrieve href from link (is id of panel to display)
        var panel = $this.attr('href');
        // show panel
        $(panel).show();
        // don't follow link
        return false;
    }); // end click

    $('.tabs').find('li:first a').click();
}); // end ready

// Lightbox Gallery Script

  $(function() {
        $('#images a').lightBox();

    });

</script> 
```

我在这里使用这个灯箱插件：[Jquery lightbox](http://leandrovieira.com/projects/jquery/lightbox/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:40:33.923

您有 2 个具有相同 ID (#Images) 的元素。ID 应该只出现一次并且是唯一的。

快速解决

```
 $(function() {
        $('.images a').lightBox();

    }); 
```

# css - 如何通过css将两个图像定位为div上的背景图像

> ID：12795068
> 
> 赞同：0
> 
> 时间：2012-10-09T07:38:32.210
> 
> 标签：css

这是我的css，我通过它将一张图像放在中心。

```
 .BusyStyles
 {
      background-image: url('../images/busy.gif');
      background-repeat: no-repeat;
      background-position: center center;
      height: 350px;
      width: 300px;
 } 
```

我可以增强上面的css，结果我可以在busy.gif下方的div中心放置另一个图像......这可能吗？如果是，那么请给我css，我可以通过它将两个图像作为div的背景一个接一个地放置在中心。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:47:54.423

您只能在 CSS 3 中执行此操作（http://stackoverflow.com/questions/423172/can-i-have-multiple-background-images-using-css）

```
body {
    background-image: url(images/bgtop.png), url(images/bg.png);
    background-repeat: repeat-x, repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:57:13.613

如果您只能支持与 CSS 3 兼容的浏览器，我同意 LiamB 的解决方案。

但是，如果您需要支持更多的浏览器，我建议您通过 2 个 div 来解决这个问题。两个 div 将位于彼此之上。位于下方的 div 仅包含背景图像。位于顶部的 div 包含另一个背景图像（位置看起来好像它位于另一个 div 的背景图像下方）和您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:44:43.153

检查单个 div 标签中的两个背景图像的[示例。](http://tinkerbin.com/Ogo7q7MI)

**CSS：**

```
.container{
  width:300px;
  height:150px;
  background:url(http://img.b8cdn.com/images/icons/loading_large_icon.gif) no-repeat 50% 28%, url(http://twitter-badges.s3.amazonaws.com/t_logo-a.png) no-repeat 50% 60%;
  border:1px solid #CCCCCC;
} 
```

# c# - 从 C# 中的调试文件夹运行时，指定的强制转换无效

> ID：12795070
> 
> 赞同：-2
> 
> 时间：2012-10-09T07:38:35.623
> 
> 标签：c#, visual-studio-2010, runtime-error, visual-studio-debugging

我有一个应用程序`Specified cast is not valid` 在尝试从 bin/Debug 文件夹运行 .exe 时出现错误提示。我不知道为什么会这样，因为我从 运行应用程序`visual studio 2010`，它运行顺利。有什么线索吗？

![在此处输入图像描述](../Images/210852edd3864030f0d384a30685ad65.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:16:44.763

找到了解决方案。根据 Damien_The_Unbeliever 的评论，问题在于`AutoCompleteCustomSource`为文本框设置。当我删除自动完成代码时，该应用程序开始顺利运行。

# .htaccess - 如何使用 htaccess 重定向 example.com

> ID：12795072
> 
> 赞同：0
> 
> 时间：2012-10-09T07:38:38.010
> 
> 标签：.htaccess, redirect, http-redirect

如何使用 .htaccess 文件将 example.com 重定向到 example.com/market

前任。

```
http://example.com/details.php?id=3667 and
http://www.example.com/details.php?id=3667 
```

应该重定向到

```
http://example.com/market/details.php?id=3667 
```

我还想将任何 example.com 重定向到 example.com/market

使用 htaccess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:25:54.240

根据[这里](http://dense13.com/blog/2008/02/27/redirecting-non-www-to-www-with-htaccess/)：

**将 www 重定向到非 www**

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^example\.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```

**将根目录重定向到子文件夹**

```
Redirect / http://example.com/market 
```

# html - 在 CSS 中将图像向右移动

> ID：12795077
> 
> 赞同：4
> 
> 时间：2012-10-09T07:38:50.853
> 
> 标签：html, css

我对网络开发很陌生，我有这样的代码：

```
<style type="text/css">
    span {
        background:red;
        background: transparent url(../images/skin/exception.png) 0.4em 100% no-repeat;
    }
</style>
 <span>
    Contents. 
 </span> 
```

我得到了输出，但图像被放置在`Contents`文本上。我试过：

```
 background-position: 25px; 
```

但这正在使图像消失！但我一直在寻找的是：

`Contents . . . . . . . . . . . . . my_image`

（注意`.`上面是空格）

我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:45:35.940

请记住，这`<span>`是一个内联元素，它不是用于您希望以块方式显示的项目的正确标记。为此，您应该使用`<div>`. 话虽如此，您可以使用`text-indent: 25px;`将文本向右移动。或者，您可以`<div>`使用 将新的移动到右侧`left: 25px;`。请记住，这`left`将告诉它您希望将其放置在离左边框多远的位​​置。然后，您可以将文本放在另一个`<div>`：

```
<style type="text/css">
div {
    display:inline-block;
}
div.image {
    background:red;
    background:transparent url(../images/skin/exception.png) 0.4em 100% no-repeat;
    left:25px;
}
</style>
<div class="box">
  Contents.
  <div class="image"></div> 
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:09:13.887

如果你不需要你的图像是一个`background-image`你可以应用这个：

**CSS：**

```
<style>

div#box{
    width: 100%;
}

img#image {
    float: right;
}

</style> 
```

**HTML：**

```
<div id="box">
    <span id="content">
        Contents.
    </span>
    <img src="bkg.jpg" alt="Image not available">
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:38:42.247

我也同意@L0j1k 的 span 是一个内联级元素。为什么要将一些内容放在跨度内，然后在该跨度中应用背景图像。无论如何，请检查 jsfiddle 链接

**演示**

[http://jsfiddle.net/saorabhkr/BvMyg/](http://jsfiddle.net/saorabhkr/BvMyg/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:38:34.250

排队：-

```
<span>
//content
<img src="images/skin/exception.png" style="float:right">
</span> 
```

# php - 如何解码 ionCube 加密文件？

> ID：12795078
> 
> 赞同：6
> 
> 时间：2012-10-09T07:38:50.780
> 
> 标签：php, encryption, ioncube

我正在自定义测地线分类，我的客户没有让我访问许可证文件（而是我没有问他这个问题）。

我可以从管理面板自定义它，但我想在我的本地系统上自定义它。

但是当我尝试这样做时，它会被重定向到页面外的站点。

我认为这是因为`product.php`文件代码（我的代码与此相同）：

[这个PHP是做什么的？它是编码器/解码器吗？](https://stackoverflow.com/q/3884916)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T08:57:14.873

ionCube（至少当它是 PHP Accelerator 时）在编码之前将 PHP 编译为字节码。

这完全消除了源代码，即使您能够反转编码过程，您仍然会留下已编译的操作码，而不是源代码。

ionCube loader解码字节码，无需解析，直接由PHP虚拟机执行。

如果我没记错的话，编码器还会对字节码执行优化和混淆，这有助于防止反编译。

# android - 处理输入时发现无效数据

> ID：12795079
> 
> 赞同：1
> 
> 时间：2012-10-09T07:39:02.623
> 
> 标签：android, input, ffmpeg

我想在我的库中使用 ffmpeg lib。为此，我已成功编译它。输入视频运行正常，但是当我尝试执行任何命令时，我收到此消息：

```
Invalid data found when processing input. 
```

我不知道它背后的原因是什么。这是代码：

```
 public class Videokit extends Activity {
        String FilePath;
        String OutPut;
        Context mycontext;
        Videokit vk ;
        static 
        {
            System.loadLibrary("videokit");
        }

        public native void run(String[] args);

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            FilePath =Environment.getExternalStorageDirectory().toString()+"/output.3gp";
            try {
                ffmpegrun();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        public String ffmpegrun() throws IOException
        {
            boolean success=false;
            File folder = new File(Environment.getExternalStorageDirectory().toString() + "/image-%3d.jpeg");
            File file = new File(FilePath);
            System.out.println("filepath exists at:"+file.getAbsolutePath());
            if (!folder.exists()) {
                success = folder.mkdirs();
    //              Toast.makeText(mycontext,"outfile.mp4 exists at"+folder.getAbsolutePath(),Toast.LENGTH_LONG).show();
                 OutPut = folder.getAbsolutePath();
            }
            System.out.println("outfile.flv exists at:"+folder.getAbsolutePath());
            run(new String[]{
                    "ffmpeg",
                    "-i",
                    FilePath,
                    "-r 1", 
                     "-f",
                     "image2",
                     "image-%3d.jpeg"
            }); 
            return OutPut;
        }
    } 
```

这是日志：

```
10-07 17:00:03.707: D/dalvikvm(8760): Trying to load lib /data/data/uk.co.halfninja.videokit/lib/libvideokit.so 0x44e8c958
10-07 17:00:03.837: D/dalvikvm(8760): Added shared lib /data/data/uk.co.halfninja.videokit/lib/libvideokit.so 0x44e8c958
10-07 17:00:03.837: I/Videokit(8760): Loading native library compiled at 13:52:27 Oct  7 2012
10-07 17:00:03.917: I/System.out(8760): filepath exists at:/sdcard/output.3gp
10-07 17:00:03.917: I/System.out(8760): outfile.flv exists at:/sdcard/image-%3d.jpeg
10-07 17:00:03.917: D/dalvikvm(8760): +++ not scanning '/system/lib/libwebcore.so' for 'run' (wrong CL)
10-07 17:00:03.917: D/dalvikvm(8760): +++ not scanning '/system/lib/libmedia_jni.so' for 'run' (wrong CL)
10-07 17:00:03.928: D/dalvikvm(8760): +++ not scanning '/system/lib/libexif.so' for 'run' (wrong CL)
10-07 17:00:03.928: D/Videokit(8760): run() called
10-07 17:00:03.928: D/Videokit(8760): run passing off to main()
10-07 17:00:03.928: D/Videokit(8760): main(): registering all modules
10-07 17:00:03.938: D/Videokit(8760): main(): registered everything
10-07 17:00:03.938: D/Videokit(8760): main(): initting opts
10-07 17:00:03.968: D/Videokit(8760): main(): initted opts.
10-07 17:00:03.968: E/Videokit(8760): ffmpeg version N-30996-gf925b24, Copyright (c) 2000-2011 the FFmpeg developers
10-07 17:00:03.979: E/Videokit(8760):   built on Oct  7 2012 13:52:32 with gcc 4.4.3
10-07 17:00:03.979: E/Videokit(8760):   configuration: --enable-cross-compile --arch=arm5te --enable-armv5te --target-os=linux --disable-stripping --prefix=../output --disable-neon --enable-version3 --disable-shared --enable-static --enable-gpl --enable-memalign-hack --cc=arm-linux-androideabi-gcc --ld=arm-linux-androideabi-ld --extra-cflags='-fPIC -DANDROID -D__thumb__ -mthumb -Wfatal-errors -Wno-deprecated' --disable-everything --enable-decoder=mjpeg --enable-demuxer=mjpeg --enable-parser=mjpeg --enable-demuxer=image2 --enable-muxer=mp4 --enable-encoder=libx264 --enable-libx264 --enable-decoder=rawvideo --enable-protocol=file --enable-hwaccels --disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --disable-network --enable-filter=buffer --enable-filter=buffersink --disable-demuxer=v4l --disable-demuxer=v4l2 --disable-indev=v4l --disable-indev=v4l2 --extra-cflags='-I../x264 -Ivideokit' --extra-ldflags=-L../x264
10-07 17:00:03.987: D/Videokit(8760): main(): parsing options
10-07 17:00:03.987: D/Videokit(8760): parse_options has 7 options to parse
10-07 17:00:04.050: E/Videokit(8760): /sdcard/output.3gp: Invalid data found when processing input
10-07 17:00:04.050: E/Videokit(8760): ffmpeg_exit(1) called! 
```

请帮助我。我对这个问题一无所知。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:30:42.713

您是否编译了 FFmpeg 以便能够处理 flv 或 3gp... 文件？我看到 mp4 在编译中，但 flv 和 3gp 不在...

# php - 更改/重命名 Drupal 7 覆盖选项卡

> ID：12795083
> 
> 赞同：1
> 
> 时间：2012-10-09T07:39:31.803
> 
> 标签：php, drupal, drupal-7, drupal-theming, overlays

我有一项任务，我应该更改覆盖选项卡的显示方式/重命名出现在节点编辑上的选项卡（请查看此屏幕截图[http://bit.ly/VIMMXK](http://bit.ly/VIMMXK)）

1.  我不应该在叠加层上有“编辑”
2.  “视图”应重命名为“视图（内容类型）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:31:40.767

[Tab Tamer](http://drupal.org/project/tabtamer)模块允许您更改 drupal 站点上不同选项卡的名称。它还允许禁用或隐藏选项卡。

# php - 剩余天数 - 订阅到期？

> ID：12795088
> 
> 赞同：-2
> 
> 时间：2012-10-09T07:39:47.810
> 
> 标签：php

订阅到期后，我怎样才能找回天数？

我的数据库中有“vipudlob”。它是时间戳。提前2个月。？

```
<?php
$expire = strtotime("+2 months", time());
$daysback = $expire-time();
echo $daysback%3600;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:05:34.340

你可以试试

```
$datetime1 = new DateTime();
$datetime2 = new DateTime("+2 months");
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); 
```

输出

```
+61 days 
```

# jquery - 使用jquery获取keyup位置

> ID：12795089
> 
> 赞同：5
> 
> 时间：2012-10-09T07:39:47.990
> 
> 标签：jquery, html

> **可能重复：**
> [如何在 textarea 中获取插入符号位置？](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea)

如果我在 html textarea 控件的任何位置键入 *，我需要获取 keyup 事件的当前位置，例如`"Welcome* to jQuery"`. 所以我在欢迎之后有 * 意味着在第 8 位。让我知道是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T07:43:56.690

这将起作用。（注意：带引号的是 8 点，否则是 7 点）

```
$("#tf").on('keyup', function(){
    console.log($(this).val().indexOf('*'));
});​ 
```

[http://jsfiddle.net/Vandeplas/hc6ZH/](http://jsfiddle.net/Vandeplas/hc6ZH/)

**更新：**具有多个 * 的解决方案

```
$("#tf").on('keyup', function(){
    var pos = [],
        lastOc = 0,
        p = $(this).val().indexOf('*',lastOc);

    while( p !== -1){
        pos.push(p);
        lastOc = p +1;
        p = $(this).val().indexOf('*',lastOc);
    }
    console.log(pos);
});​ 
```

[http://jsfiddle.net/Vandeplas/hc6ZH/1/](http://jsfiddle.net/Vandeplas/hc6ZH/1/)

***更新：***只给出你刚刚输入的 * char 的位置

```
(function ($, undefined) {
    $.fn.getCursorPosition = function() {
        var el = $(this).get(0);
        var pos = 0;
        if('selectionStart' in el) {
            pos = el.selectionStart;
        } else if('selection' in document) {
            el.focus();
            var Sel = document.selection.createRange();
            var SelLength = document.selection.createRange().text.length;
            Sel.moveStart('character', -el.value.length);
            pos = Sel.text.length - SelLength;
        }
        return pos;
    }
})(jQuery);

$("#tf").on('keypress', function(e){
    var key = String.fromCharCode(e.which);
    if(key === '*') {
        var position = $(this).getCursorPosition();
        console.log(position);
    } else {
        return false;
    }
});​ 
```

[http://jsfiddle.net/Vandeplas/esDTj/1/](http://jsfiddle.net/Vandeplas/esDTj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:59:01.243

下面的链接帮助我使用 jQuery 本身解决了这个问题。

[文本区域中的光标位置（字符索引，不是 x/y 坐标）](https://stackoverflow.com/questions/1891444/how-can-i-get-cursor-position-in-a-textarea)

谢谢你们的努力。

# linux - Linux shell脚本日期算术

> ID：12795094
> 
> 赞同：3
> 
> 时间：2012-10-09T07:40:07.213
> 
> 标签：linux, shell, date

我有一个 shell 脚本

```
 #!/bin/bash
START=$(date +%s)
echo "  Start| $START "
# do something
# start your script work here
#  
# your logic ends here
END=$(date +%s)
echo "  End|  $END "
DIFF=$(( $END-$START ))
echo "  Diff in seconds|"  $DIFF 
```

仍然收到此错误开始| 1349769151 完| 1349769151 ")49769151rror: 算术运算符无效（错误标记为 "

我知道这是基本的，所以我已经搜索和调试了两天。但仍然没有任何工作。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:44:13.803

START 和 END 不是不能相减的日期格式。如果您只想测量执行时间，则仅使用 %s ，这将以秒为单位。

```
START=$(date +%s)
echo "  Start| $START "
# do something
# start your script work here
#  
# your logic ends here
END=$(date +%s)
echo "  End|  $END "
DIFF=$(( $END-$START ))
echo "Diff in seconds:" $DIFF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T07:44:47.797

您正在尝试使用字符串执行算术运算：它不起作用。

我建议您将日期打印为时间戳，`date "+%s"`并将这些数字用于您的数学运算。

# sql - 选择 1 行有多行？

> ID：12795095
> 
> 赞同：2
> 
> 时间：2012-10-09T07:40:11.140
> 
> 标签：sql, date, max, rows

我有一个无法更改的查询。例如：

```
SELECT studentid FROM school s LEFT OUTER JOIN mall m ON s.studentid=m.studentid 
```

一个学生在表 Mall 中有两行。上面的查询输出重复，因为学生在表 mall 上有两行 id 相同的行。表 mall 上有一个日期列，我只想选择日期最新的学生。我该怎么做？（只需在 where 子句中添加条件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:46:55.520

```
SELECT studentid 
FROM school s 
LEFT OUTER JOIN mall m 
ON s.studentid=m.studentid
ORDER BY date DESC
GROUP BY studentid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:43:07.847

```
where m.date=(select max(date) from mall where studentid=m.studentid) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T07:43:45.507

尝试这个：

```
select s.studentid 
from school s 
INNER JOIN malls m1 ON m1.studentid = s.studentid
INNER JOIN
(
   SELECT studentid, Max(DateField) MaxDate 
   FROM mall
   GROUP BY studentid
) m2 on m1.studentid = m2.studentid AND m1.DateField = m2.MaxDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T07:43:26.130

您可以使用 order by 和 limit ，如下所示：

```
select studentid 
from school s 
left outer join mall m on s.studentid=m.studentid 
order by date desc 
limit 1 
```

它比在 where 子句上使用多个选择查询更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T07:44:37.643

如果您正在使用`SQL Server`

```
WITH LatestRecord
AS
(
    SELECT  studentID, date,
            ROW_NUMBER() OVER(Partition BY StudentID Order By DATE DESC) AS RN
    FROM    mall
)
SELECT  a.*, b.studentID, b.date
FROM    School a
        INNER JOIN LatestRecord b
            on a.StudentID = b.Student_ID
WHERE   RN = 1 
```

# c - 监控执行文件

> ID：12795098
> 
> 赞同：0
> 
> 时间：2012-10-09T07:40:18.293
> 
> 标签：c, monitoring, performance

我正在做一些研究，以确定是否有可能监视正在执行的应用程序以便能够列出该应用程序进行的函数调用？

该应用程序是开源的，我已经确定了一些我想要监控的功能。我需要在不修改源的情况下执行此操作（以便能够在生产系统上使用监视器）。

这可能吗？

我想这是特定于操作系统的 - 我想在 Windows 和 Linux 上进行。

# spring - @RequestMapping 和 struts 的映射可以同时使用吗？

> ID：12795100
> 
> 赞同：1
> 
> 时间：2012-10-09T07:40:23.723
> 
> 标签：spring, annotations, struts

我可以同时使用动作映射`struts.xml`和 Spring 的`RequestMapping`注释吗？（我的环境是 Struts 2.3.1 和 Spring 3.1.1）

在我`struts.xml`这样的事情中：

```
<package name="proj" namespace="/proj" extends="proj-default">
    <action name="home" class="proj">
        <result name="success" type="tiles">proj.home</result>
    </action>
</package> 
```

我的一堂课是这样注释的：

```
@Controller
@RequestMapping("/dialog")
public class MyDialogController {
    ...
    @RequestMapping(value="/info", method=RequestMethod.GET)
    public String info(NativeWebRequest request) {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:13:52.043

我发现答案是肯定的。
我只需要另外配置弹簧配置。

首先，我添加 Spring`DispatcherServlet`的`web.xml`

```
<servlet>
    <servlet-name>profile</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>profile</servlet-name>
    <url-pattern>/testProj/*</url-pattern>
</servlet-mapping> 
```

然后额外添加以下代码`applicationContext.xml`

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/> 
```

最后，我创建了一个`profile-servlet.xml`包含请求映射设置

```
<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <value>
            /profile/*=profileController
        </value>
    </property>
    <property name="alwaysUseFullPath" value="true" />
</bean>

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

现在它工作正常。

# android - 用字符串中的图像替换字符，然后设置为 Textview

> ID：12795101
> 
> 赞同：11
> 
> 时间：2012-10-09T07:40:26.343
> 
> 标签：android, image, spannablestring

```
This is :) and want to :) replace with :D new image. 
```

我有这种类型的字符串，这是我从 EditTextbox 获得的。现在我想用 image1 替换所有“:)”，用 image2 替换“:D”。我想做类似 string.replaceall(":)",image1)和 string.replaceall(":D",image2)。所以任何人都可以建议我如何用小代码和更好的性能来做到这一点。我已经编写了代码，它工作得也很好，但需要很多时间。

```
textview.setText(getSmiledText(ctx, stringvalue));
private static final HashMap<String, Integer> emoticons = new HashMap<String, Integer>();
    static {
        emoticons.put(":)", R.drawable.j1);
        emoticons.put(":D", R.drawable.j2);}

public static Spannable getSmiledText(Context context, String s) {
        int index;
        SpannableStringBuilder builder = new SpannableStringBuilder();
        builder.append(s);

        for (index = 0; index < builder.length(); index++) {
            for (Entry<String, Integer> entry : emoticons.entrySet()) {
                int length = entry.getKey().length();
                if (index + length > builder.length())
                    continue;
                if (builder.subSequence(index, index + length).toString()
                        .equals(entry.getKey())) {
                    builder.setSpan(new ImageSpan(context, entry.getValue()),
                            index, index + length,
                            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    index += length - 1;
                    break;
                }
            }
        }
        return builder;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-04T10:31:33.060

检查这个：

```
public static Spannable getSmiledText(Context context, String s) 
    {
    int index;
    SpannableStringBuilder builder = new SpannableStringBuilder();
    builder.append(s);

    for (Entry<String, Integer> entry : EmoticonsCode.emoticons_code.entrySet())
    {
        try {
           int length = entry.getKey().length();
           for ( index = s.indexOf(entry.getKey()); index >= 0; index = s.indexOf(entry.getKey(), index + 1))
           {
                System.out.println(index);
                builder.setSpan(new ImageSpan(context, entry.getValue()), index, index + length, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
           }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
   }
   return builder;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:58:14.063

您需要做的只是在运行时提前加载图像，加载图像并保存在变量中，然后在运行时分配图像。仅供参考，字符不是问题，我之前遇到过同样的问题，我将其理解为接触点问题，但问题是加载图像。

# winforms - Winforms ComboBox - 直接设置值

> ID：12795107
> 
> 赞同：0
> 
> 时间：2012-10-09T07:40:39.567
> 
> 标签：winforms, combobox

我想出了如何在数据网格视图中将事件添加到我的组合框中：

```
 private void dataGridViewCaseObjects_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        var combo = e.Control as ComboBox;
        if (combo != null)
        {
            combo.SelectedIndexChanged -= ComboBox_SelectedIndexChanged;
            combo.SelectedIndexChanged += ComboBox_SelectedIndexChanged;
        }
    }

    private void ComboBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        // Actually commit the selected string to combobox 
    } 
```

我如何从这一点强制提交到组合框？

# android - 不在 R.java 文件中添加 id 组件

> ID：12795108
> 
> 赞同：0
> 
> 时间：2012-10-09T07:40:41.810
> 
> 标签：android, xml, layout, r.java-file

我遇到了同样的问题——当我想在 XML 文件中添加 id LinearLayout 时，Eclipse 说文件构建正确——但组件 ID 不可用——它没有添加到文件 R.java 中。也许这是因为对于给定的组件指定了警告“此 LinearLayout 布局或其 TableRow 父级可能无用”这一事实？我怎么解决这个问题？我希望能得到你的帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:background="#E8E8E8" >

<TableLayout xmlns:android = "http://schemas.android.com/apk/res/android"
android:orientation = "vertical"
android:layout_width = "wrap_content"
android:layout_height = "wrap_content">

    <TableRow 
        android:id="@+id/base_table_row1"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:paddingTop = "15dp"
        android:paddingBottom = "15dp"
        android:gravity = "center"> 

        <TextView
        android:id="@+id/name_placeView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="name of the place"
        android:gravity="center"
        android:textStyle="bold"            
        android:textColor="#000000"
        android:textSize="30sp"/>
        </TableRow>

    <TableRow 
        android:id = "@+id/base_table_row3"
        android:layout_width = "fill_parent"
        android:layout_height = "wrap_content"          
        android:gravity = "center"> 

        <TextView
            android:id="@+id/info_placeView"
            android:textColor="#808080"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:text="adress"/>
    </TableRow>

     <TableRow 
        android:id = "@+id/base_table_row2"
        android:layout_width = "fill_parent"
        android:layout_height = "wrap_content"
        android:paddingBottom = "15dp"
        android:gravity = "center"> 

        <TextView
            android:id="@+id/info_placeView"
            android:layout_width="wrap_content"
            android:textColor="#808080"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:layout_height="wrap_content"
            android:text="There will be placed an short information about place"/>

     </TableRow> 

     <TableRow 
        android:id = "@+id/base_table_row3"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:paddingTop = "15dp"
        android:gravity = "center"> 

        <TextView
            android:id="@+id/comfortView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:textColor="#DAA520"
            android:text="Atmosphear"/>
    </TableRow>

    <TableRow 
        android:id = "@+id/base_table_row4"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:gravity = "center"> 

        <LinearLayout xmlns:android = "http://schemas.android.com/apk/res/android"
             android:orientation = "vertical"
             android:layout_width = "wrap_content"
             android:layout_height = "wrap_content"
             android:gravity="center">  

            <RatingBar
                android:id="@+id/ratingBar1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:numStars="5"
                android:stepSize="1.0" />

        </LinearLayout>

   </TableRow>

   <TableRow 
        android:id = "@+id/base_table_row5"
        android:layout_width = "fill_parent"
        android:layout_height = "wrap_content"
        android:paddingTop = "15dp"
        android:gravity = "center">

        <TextView
            android:id="@+id/priceView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:textColor="#DAA520"
            android:text="Peoplemeter" />

   </TableRow>

    <TableRow 
        android:id = "@+id/base_table_row6"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:gravity = "center"> 

        <LinearLayout
             xmlns:android = "http://schemas.android.com/apk/res/android"
             android:id="@+id/layout_rate_bar2"
             android:orientation = "vertical"
             android:layout_width = "wrap_content"
             android:layout_height = "wrap_content"
             android:gravity="center"> 

            <RatingBar             
                 android:numStars="5"
                 android:id="@+id/ratingBar2"
                 android:stepSize="1.0"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"/>

        </LinearLayout>

    </TableRow>             

    <TableRow 
        android:id = "@+id/base_table_row7"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:paddingTop = "20dp"         
        android:gravity = "center"
        > 

         <LinearLayout
            android:id = "@+id/final_rate_layout"
            android:orientation = "vertical"
            android:layout_width = "wrap_content"
            android:layout_height = "wrap_content"
            android:gravity="center"
            > 

            <Button
                    android:layout_height="wrap_content"
                    android:layout_width="wrap_content" 
                    android:background="@drawable/button_custom_rate"
                    android:textStyle="bold"
                    android:textSize="20sp"                             
                    android:text="RATE IT"
                    android:id="@+id/final_rate"
                    android:clickable="true"
                    />

        </LinearLayout>         

    </TableRow>

</TableLayout> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:51:41.493

首先，您不需要`xmlns:android="http://schemas.android.com/apk/res/android"`对每个布局都使用，只需要对根布局使用。其次，尝试只清理项目，这会强制重建并重新生成`R.java`. 在您更改布局文件后，它可能只是没有重新创建自己。在正常情况下它应该可以正常工作。希望这可以帮助。

# android - 无法启动活动 ComponentInfo：java 空指针异常

> ID：12795111
> 
> 赞同：0
> 
> 时间：2012-10-09T07:40:48.827
> 
> 标签：android, android-intent

我得到了 Unable to start activity ComponentInfo:java.nullpointer 异常的异常，我到处检查了我的整个代码，但我无法解决该错误

这是我的代码

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.store_denomination);
    actionbar=getSupportActionBar();
    actionbar.setDisplayShowHomeEnabled(false);
     actionbar.setDisplayShowTitleEnabled(false);
     actionbar.setDisplayShowCustomEnabled(true);
     actionbar1 = LayoutInflater.from(this).inflate(R.layout.action_custom, null);

    spin1 = (Spinner)findViewById(R.id.spin);   
    ProgressDialog progress = new ProgressDialog(this);
    progress.setMessage("Loading......");
    new MyClass(progress).execute();

    String urlvalue = ((MyApplication) getApplicationContext()).url;
    new DownloadImageTask().execute(urlvalue);

    youpaytxt = (TextView)findViewById(R.id.youpaytextview);  
    //name = (TextView)findViewById(R.id.nametextview);
    description = (TextView)findViewById(R.id.descriptiontextview);
    btncheckout = (Button)findViewById(R.id.checkoutbutton);
    edt = (EditText)findViewById(R.id.editText1);
    thumb_image = (ImageView)findViewById(R.id.imageView1);
    contshopping = (Button)findViewById(R.id.continueshoppingbutton);
    pg = (ProgressBar)findViewById(R.id.progressBar1);
    nametextview = (TextView)findViewById(R.id.nametextview);
    description = (TextView)findViewById(R.id.descriptiontextview);
    btnterms = (Button)findViewById(R.id.termsbutton);
    //termstxt=(TextView)findViewById(R.id.trmstxtview);
    //termstxt.setVisibility(termstxt.GONE);
    //termstxt.setTypeface(arial_font);

    description.setTypeface(arial_font);
    name = ((MyApplication) getApplicationContext()).nameofbrand;
    nametextview.setText(name);
    Typeface.createFromAsset(getAssets(), "fonts/arial.ttf");
    quant = String.valueOf(1);
    btn=(ImageButton)findViewById(R.id.cartbutton);
    if(!(((MyApplication)getApplicationContext()).cartproductsname).isEmpty())
    {
    btn.setOnClickListener(new OnClickListener() {          //error is coming here from logcat

        public void onClick(View v) {
            // TODO Auto-generated method stub
        Intent first=new     Intent(Detailsofproduct.this,CommentListActivity.class);   
        startActivity(first);
        }
    });
    } 
```

这是我的日志猫

```
10-09 13:01:01.951: E/AndroidRuntime(2135): FATAL EXCEPTION: main
10-09 13:01:01.951: E/AndroidRuntime(2135): java.lang.RuntimeException: Unable to start   activity ComponentInfo{com.androidhive.xmlparsing/com.androidhive.xmlparsing.Detailsofproduct}: java.lang.NullPointerException
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.os.Looper.loop(Looper.java:123)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at java.lang.reflect.Method.invokeNative(Native Method)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at java.lang.reflect.Method.invoke(Method.java:507)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at dalvik.system.NativeStart.main(Native Method)
10-09 13:01:01.951: E/AndroidRuntime(2135): Caused by: java.lang.NullPointerException
10-09 13:01:01.951: E/AndroidRuntime(2135):     at com.androidhive.xmlparsing.Detailsofproduct.onCreate(Detailsofproduct.java:209)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-09 13:01:01.951: E/AndroidRuntime(2135):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-09 13:01:01.951: E/AndroidRuntime(2135):     ... 11 more 
```

为什么我会收到错误消息。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:47:50.497

改变这个，

```
 btn=(ImageButton)findViewById(R.id.cartbutton); 
```

到

```
 btn=(ImageButton)actionbar1.findViewById(R.id.cartbutton); 
```

也许引用它起源的视图应该可以解决问题。

因为通常当您调用时`findViewbyId()`，android 仅从中使用的 xml 中搜索元素`setContentView`，因为您使用的是操作栏视图，这应该会有所帮助。

# java - 使用内部类来反映真实事物的关系

> ID：12795112
> 
> 赞同：6
> 
> 时间：2012-10-09T07:40:49.323
> 
> 标签：java, inner-classes

这更像是一个概念问题。我知道如何去做我想做的事。我想知道这是否是正确的做法。

我试图代表一些在现实生活中涉及到一些嵌套的东西。它是一个文档，它指定要使用一组项目执行的活动。一个文档可能涵盖多个项目，每个项目可能有多个活动。

所以层次结构将是 Document -> Item -> Activity。

我目前的想法是用一个顶级类 Document 来表示它，它包含一个内部类 ItemProgram，它本身包含一个内部类 Activity。是的，这是两层嵌套。

```
public class Document {

   // Properties of the document itself

   private Map<Item, ItemProgram> itemPrograms; // Map of item programs

   public class ItemProgram {

      // Properties of the item program itself

      private List<Activity> activities; // List of activities

      public class Activity {
         // Properties of the activity
      }
   }
} 
```

内部类必须是公共的，但我将构造函数设为私有，以便它们仅由外部类中的 add 方法创建。如您所见，我使用 Collection 类型存储实例。

这是解决这个问题的正确方法吗？双重嵌套？

在外部类中使用集合来存储对内部类所有实例的引用是否合适？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:58:54.693

我明白你为什么想使用这个结构，但这不是我会选择的（当然没有绝对正确/错误的答案）。这里有几点需要考虑：

内部类实例将可以访问其封闭对象的内部状态，这对于您的示例可能不是必需的，并且会使类非常紧密地耦合。

这种方式的双重嵌套是“不寻常的”，可能会使阅读您的代码的其他人感到困惑。

将来，如果您的系统设计发生变化，并且可以独立于 Item 创建 Activity（例如），那么您将不得不在代码中执行一些大手术。

内部类的实例将使用对其父对象的隐式引用创建，您是否真的需要这个额外的引用（父母已经通过私有集合知道他们的孩子，它是否必须是双向关系，增加了一个一定程度的复杂性）？

你有没有想过这种设计会如何影响你代码的可测试性？如果您想对 Activity 类进行单元测试怎么办？您能否以这样的方式执行此操作，即测试失败肯定会表明 Activity 中存在问题，而不是其中一个父类中的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:57:21.740

这种特殊的方法很好，虽然每种都有一种类型，但请记住（并在注释中记录），如果您开始需要多种类型或派生类`Document`，`Activity`或者`ItemProgram`您很可能需要将此类拆分以使其更具可扩展性图案。

如果`Document`包含自己的逻辑，加上创建`Activity`实例的逻辑和创建实例的逻辑，`ItemProgram`则违反了SRP（单一责任原则）的指导。此原则可帮助您防止横向扩展问题并防止类爆炸，在这种情况下，您开始获取表示组合的类，而不是使用组合模式。

如果这些类的客户端只是父（封闭）类，我还会说嵌套类是可以的，如果您在其他地方使用它们，我会将它们分开。

**编辑**说了这么多，嵌套类比将它们作为单独的类没有任何好处，至少没有任何好处会对您正在开发的系统产生积极影响：

*   隐藏的复杂性，其他开发人员会知道该文件包含三个类，而不是他们期望的一个。
*   访问私有，父母可以访问嵌套的类变量以及相反的方式，无论哪种方式都不是预期的并且难以维护。

# google-bigquery - Google BigQuery 中的一般连接错误

> ID：12795113
> 
> 赞同：0
> 
> 时间：2012-10-09T07:40:51.217
> 
> 标签：google-bigquery

我在连接到 BigQuery 中的表时收到错误消息（通过浏览器控制台）。

错误是查询失败错误：连接错误。请再试一次。

有什么办法可以让我看到是什么原因造成的？项目 ID 为 153625559528，表为 resultsFullHistory。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:59:01.293

您遇到了 BigQuery 中的错误。我们已经修复了，但要到下周才能使用。我正在寻找一个可以解决该问题的临时修复程序，并希望在今天结束之前为您提供一些东西。

# prestashop - 客户在 prestashop 中打开网站时必须注册

> ID：12795116
> 
> 赞同：0
> 
> 时间：2012-10-09T07:40:58.420
> 
> 标签：prestashop, user-registration

当任何客户打开我的网站时，我的注册区域出现问题，他必须在我的网站上注册，而不是在他可以访问该网站之后。

prestashop 中是否有任何选项..？

谢谢，

巴维克 M.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:47:56.827

您的意思是您希望人们无需注册即可购买？

`Enable guest checkout`under`Back Office -> Preferences`允许人们无需注册即可购买。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:50:04.657

正如@didster 告诉您的，PrestaShop 具有“访客结帐”功能，允许您的客户购买产品，而无需在您的商店创建帐户。

# java - javafx.scene.web.WebEngine 如何使用 post 方法登录网站

> ID：12795119
> 
> 赞同：2
> 
> 时间：2012-10-09T07:41:06.303
> 
> 标签：java, web, javafx

我想用户 JavaFX 访问网站并自动登录。但有些网站不支持`GET`登录方式。如何设置`POST`参数？

# ios - 用户可以在 iOS 应用中修改 NSUserDefaults 键值吗？

> ID：12795120
> 
> 赞同：12
> 
> 时间：2012-10-09T07:41:07.437
> 
> 标签：ios, in-app-purchase, nsuserdefaults, jailbreak

我有一个关于安全的问题。

我正在按照[本教程](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)制作一个带有应用内购买的 iOS 应用，并将购买的产品存储在 NSUserDefaults 中。这就是为什么我想知道：

具有越狱设备的用户可以修改应用程序的 NSUserDefaults 键和值吗？

如果您知道的话，非常感谢。

杰尔

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-09T09:02:32.467

是的他们可以。用户默认值相对于您的应用程序目录存储在此处：

```
./MyAppName.app
./Library/Preferences/com.mycompany.MyAppName.plist 
```

plist 文件未加密或签名，因此可以轻松修改：

```
plutil -convert xml1 com.mycompany.MyAppName.plist
vim com.mycompany.MyAppName.plist 
```

正如@rckoenes 所说，您可以查看 iOS 钥匙串，也可以查看[类似这个开源安全默认替换](https://github.com/matthiasplappert/Secure-NSUserDefaults)的东西，它提供了一个类似于`NSUserDefaults`.

* * *

## 更新：

从 iOS 8 开始，数据目录（以及首选项 plist 文件）现在位于：

```
/var/mobile/Containers/Data/Application/<GUID>/Library/Preferences/ 
```

[苹果参考文档](https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T08:19:24.453

即使没有越狱设备的用户也可以修改 plist...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T08:09:08.260

是的，拥有越狱设备的用户可以轻松修改，`NSUserDefault`因为它只是应用程序沙箱库目录中的 plist 文件。

您可能希望将安全的东西存储在钥匙串中，这比`NSUserDefault`.

# java - Java中Generic类的两种不同特化的比较

> ID：12795123
> 
> 赞同：0
> 
> 时间：2012-10-09T07:41:30.510
> 
> 标签：java, generics

我正在实现自定义对象的优先级队列。自定义对象类如下所示，是否建议将其实现为通用类，其中 T 只是与 messageId 关联的有效负载？

```
public class PriQMsgPayload <T> implements Comparable<PriQMsgPayload<T>>{

    private Integer mMsgNum;
    private T ExtraDataForMsg = null;

    public PriQMsgPayload(T extra, PluginConfig.PriQMessage msg)
    {
        mMsgNum= msg;
        ExtraDataForMsg = extra;
    }

    @Override
    public int compareTo(PriQMsgPayload<T> another) {
        return mMsgNum.compareTo(another.mMsgNum);
    }
} 
```

我的疑问：在下面提到的情况下，我首先插入专用于 Integer 的 P1，当我插入另一个专用于 MyClass 的对象 P2 时，比较器不会混淆吗？

```
PriQMsgPayload<Integer> P1 = new PriQMsgPayload<Integer>(2, 1);
PriQMsgPayload<MyClass> P2 = new PriQMsgPayload<MyClass>(new MyClass(), 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:03:07.327

我认为没有任何意义。当您尝试将对象放入队列时，问题就出现了 - 队列没有完全成熟的类型，它允许它包含这两个！

考虑：

```
PriorityQueue queue; // works, but is raw
PriorityQueue<PriQMsgPayload> queue; // works, but is partially raw
PriorityQueue<PriQMsgPayload<Object>> queue; // won't accept either object 
```

您可以将它们放入这种类型的队列中*（我最初说您不能，但@newacct 好心纠正了我）*：

```
PriorityQueue<PriQMsgPayload<?>> queue; // won't accept either object 
```

但这涉及丢弃有关您拥有什么样的额外数据的类型信息。

允许您添加两个对象的队列类型都不会保留额外数据的类型；这意味着当您再次取出对象时，您将丢失所有类型信息。没有办法编写安全地将对象提取为 a`PriQMsgPayload<Integer>`而不是 a 的代码`PriQMsgPayload<MyClass>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T09:53:32.713

好吧，理想情况下，您不应该将 a`PriQMsgPayload<Integer>`与 a进行比较`PriQMsgPayload<String>`——因为 a`PriQMsgPayload<Integer>`实现了`Comparable<PriQMsgPayload<Integer>>`，因此它的`compareTo`方法需要 a `PriQMsgPayload<Integer>`，所以它不期望 a `PriQMsgPayload<String>`。

在编译时和运行时尝试执行此操作时会发生什么，取决于您的优先级队列类是如何声明的，以及它是如何工作的。您没有告诉我们您正在使用哪种优先级队列实现。

假设您有一个通用的优先级队列类，声明如下：

```
class MyPriorityQueue<E extends Comparable<? super E>> { ... } 
```

即它要求其类型参数与自身相当。那么就不可能声明一个可以同时插入`PriQMsgPayload<Integer>`和插入的优先级队列`PriQMsgPayload<String>`；因为 eg`MyPriorityQueue<PriQMsgPayload<?>>`不会被允许，因为`PriQMsgPayload<?>`不满足界限。

如果您使用`java.util.PriorityQueue`，则问题是`PriorityQueue`该类（以及`TreeSet`and`TreeMap`等）不是类型安全的。您可以创建一个`new PriorityQueue<Object>()`，然后将任何类型的对象插入其中（完全不可比较的对象），并且它不会在编译时捕获任何内容，仅在运行时失败（或者它可能碰巧工作，具体取决于对象的类型）。

在这种情况下，运行时会发生什么？好吧，在类型擦除之后，在运行时，该类等价于：

```
public class PriQMsgPayload implements Comparable {
    // ....
    public int compareTo(Object another) {
        return compareTo((PriQMsgPayload)another);
    }
    public int compareTo(PriQMsgPayload another) {
        return mMsgNum.compareTo(another.mMsgNum);
    }
} 
```

它只是比较整数，因此在这种情况下，在运行时，它会正常工作。

为什么`PriorityQueue`类型不安全？好吧，如果您查看该类，它被设计为以两种方式之一使用：您可以提供一个 custom `Comparator`，或者它将使用对象的“自然排序”。如果是后者，您*应该*提供与它们自己相当的东西，但这在编译时不会以任何方式强制执行。因为您可以将它与适用于任何类型的自定义比较器（方式＃1）一起使用，所以它们不能像我们在`MyPriorityQueue`上面所做的那样对类的类型参数设置任何界限。

实际上，有一种方法可以使`PriorityQueue`类型安全，并且仍然能够支持自定义比较器和自然排序模式。只需删除使用自然排序的构造函数（留下使用比较器的构造函数，因为它们是类型安全的），而是用工厂方法替换它们。例如，构造函数

```
PriorityQueue(int initialCapacity) 
```

可以用工厂方法代替

```
public static <T extends Comparable<? super T>> PriorityQueue<T> construstUsingNaturalOrdering(int initialCapacity) {
    return new PriorityQueue<T>(initialCapacity, new NaturalOrderingComparator<T>());
} 
```

这样，绑定在工厂方法上的泛型可确保只能为与其自身可比的类型构建自然排序优先级队列。我不知道为什么 Java 库设计者不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:54:42.037

你到底什么意思？

您不能要求作为参数传递`compareTo()`（反之亦然）；这会给你一个编译错误，因为需要 a ，所以你不能通过 a 。`P1``P2``P1.compareTo()``PriQMsgPayload<Integer>``PriQMsgPayload<MyClass>`

# php - PHP/MySQL 大学坐标列表

> ID：12795125
> 
> 赞同：8
> 
> 时间：2012-10-09T07:41:40.420
> 
> 标签：php, mysql, coordinates

我正在尝试获取用户的坐标并获取该地区最近的大学的简短列表。

所以我最初的想法是用大量的大学和坐标来填充我自己的 MySQL，这样我就可以使用搜索算法将最近的少数大学与我数据库中的数据进行匹配。

实现起来现实吗？为了找到所有大学的列表，我查看了：[this question](https://stackoverflow.com/questions/1970789/college-university-list-for-populating-an-auto-complete-field)，当我访问[该站点](http://nces.ed.gov/ipeds/datacenter/InstitutionList.aspx)时，文件似乎被导出为 .uid？我不确定如何处理这个问题。另外，如果我有大学列表，如何获得它们的坐标？地理编码器会工作吗？如果可能的话，我还想要一份高中名单，但现在先忽略它。

你怎么看？我错过了什么吗？有没有更有效的方法来获取离用户最近的大学列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:21:25.440

如果您有所有大学的列表及其地址，您可以使用 Google 地理编码 API [https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)来检索坐标。您可以编写一个脚本，用信息填充数据库表。

编辑：

我找到了这个网站：[http](http://www.a2zcolleges.com/address_phone/addressindex.htm) ://www.a2zcolleges.com/address_phone/addressindex.htm ，也许它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:21:58.893

您是否尝试过查看[Google Maps API](https://developers.google.com/maps/)？也许您可以搜索大学，然后解析结果。

看起来你可以做一个[地方搜索](https://developers.google.com/places/documentation/search)，然后使用*大学*的[地方类型](https://developers.google.com/places/documentation/supported_types)。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:26:43.283

您能否仅了解大学所在城市的纬度/经度，或者这是用于本地搜索，其中 +/- 1 英里或 2 英里很重要？Maxmind 提供了一个免费的城市坐标数据库，您可以根据城市的大学列表进行交叉引用

[Maxmind世界城市](http://www.maxmind.com/en/worldcities)

**编辑**

这是美国邮政编码长/纬度坐标列表，您可以使用我在上面的评论中发布的大学地址 csv 数据库链接进行交叉引用。如果您需要国际邮政编码，他们在 maxmind 邮政编码部分有几个很好的链接

[美国邮政编码](http://pablotron.org/files/zipcodes-csv-10-Aug-2004.zip)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T07:54:11.123

我相信 Google Geocoding API 有使用限制。我已经通过两种方式批量检索了大学的地理坐标。第一个很复杂，只为后人提及。

(1) 这种方式使用了一个非常迂回的过程，涉及到 OpenRefine ( [http://openrefine.org/)——](http://openrefine.org/)以前的 Google Refine。它需要在您的计算机（Windows、Mac、Linux）上运行 Java。但是因为这很复杂，所以我要说的是你需要：

*   (a) 在 OpenRefine 中添加 dbpedia.org 协调服务；
*   (b) 使用模式 dbo:university 对您的大学列表进行核对；
*   (c) 从协调后的列中检索 dbpedia url；
*   (d) 将 url 转换为 .json 版本；
*   (e) 使用 .json URL 运行“获取 url”；
*   (f) 使用内置的 GREL 函数（或 Jython）解析坐标的结果。

你可以看到它是多么的迂回，但它适合我，因为我每天都使用 OpenRefine。

(2) 不太迂回的路线是使用您的大学列表直接在 dbpedia.org 上运行 SPARQL 查询。然而，SPARQL 是一种后天习得的品味，可能会让人混淆语法。在做对之前，我必须做大量的阅读和偶然测试。

现在，为了把这完全联系起来，dbpedia.org 是 wikipedia.org 的结构化等价物。你可能会对此嗤之以鼻，但对于大学/大学入学申请，一些基本信息通常非常准确——包括地理坐标、确定日期、位置、网站等。*

# cassandra - cassandra中的建模订单管理

> ID：12795127
> 
> 赞同：0
> 
> 时间：2012-10-09T07:41:54.160
> 
> 标签：cassandra, parent-child

我是 cassandra 和 nosql 建模的新手，我有一个用例，我希望在其中建模一个订单管理解决方案，这是 RDBM 到 Cassandra 的一个非常常见的用例。在我们的用例中，我们的应用程序在不同的时间范围内接收多个订单项目。每个都需要存储用于审计目的，并且需要分组以详细列出订单摘要和其他业务细节。此外，我们希望保持订单商品属性可搜索，以便可以查找。

我想到了两种方法：

1）**基于复合键模式**：这里我将保存订单项，所有订单项属性为列，一个列族“订单项”，键为（orderid + timestamp）。

*   oid1:01012012 -> oid:oid1, event:new, type:request, ...
*   oid1:01012012 -> oid:oid1, event:ok, type:response, ...
*   oid1:02012012 -> oid:oid1, event:modified, type:request, ...

2）**胖行设计**：这里将orderid作为行键，所有订单项都保存为json字符串。这将用于审计目的。另一个列族将用于保持结构为 (Rowkey -> colA1:a1, colB1:b1, colA2:a2, colB2:b2, ...) 具有 1,2.. 索引，我们将能够跟踪所有订购物品。

我的一个朋友建议#1 的性能不会很好。由于具有相同 orderid 的不同行可以驻留在 cassandra 环的不同节点上。虽然我发现 #2 是一个笨拙的设计，但我需要保留相同数据的多个副本。也想不出如何在#2 设计之上实现搜索。

关于如何设计得更好的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:24:21.840

您需要一个宽行（分区），其中包含项目的复合列。但是 CQL3 为您提供了一种比手动编译更简单的方法：[http ://www.datastax.com/dev/blog/schema-in-cassandra-1-1](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)

# c# - 如何从 aspx 引用 cs 中的常量？

> ID：12795128
> 
> 赞同：4
> 
> 时间：2012-10-09T07:41:53.923
> 
> 标签：c#, asp.net, .net

如何从 page.aspx 中的 constants.cs 引用常量，我正在尝试以下操作但没有成功

```
<%@ Import  Namespace="MyConstants" %>
<uc:MyControl ID="id1" runat="server" ConstantValue=" <%= Constants.TheValue %>" />
<uc:MyControl ID="id2" runat="server" ConstantValue=" <%# Constants.TheValue %>" />
<uc:MyControl ID="id3" runat="server" ConstantValue=" <%= MyConstants.Constants.TheValue %>" />
<uc:MyControl ID="id4" runat="server" ConstantValue=" <%# MyConstants.Constants.TheValue %>" /> 
```

而在`Constants.cs`

```
namespace MyConstants
public class Constants
public const string TheValue = "Hello, World"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T07:44:49.823

您需要导入您的命名空间。根据您的视图引擎，您会以不同的方式执行此操作。

如果您使用的是 WebForms：

```
<%@ Import Namespace="Your.Namespace" %> 
```

如果您将 Razor 与 C# 一起使用

```
@using Your.Namespace 
```

如果您在 VB.NET 中使用 Razor

```
@Imports Your.Namespace 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T07:44:59.447

您是否尝试过使用完全限定的类名？

```
<%= MyNamespace.MySubNamespace.Constants.TheValue %> 
```

如果可行，您可以将此命名空间添加到 web.config 中的命名空间列表中。

```
<pages>
  <namespaces>
    <add namespace="MyNamespace.MySubNamespace" />
  </namespaces>
</pages> 
```

然后您就不必在任何页面中完全限定类名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T07:43:58.653

您可以将页面中类的命名空间指定为：

```
<%@ Import Namespace="Your.Name.Space" %> 
```

where`Your.Name.Space`包含类`Constants`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T07:47:40.917

为什么不为您的 UserControl 使用该属性？：

用户控件属性：

```
public string ConstantValue { get; set; } 
```

那么你可以使用它：

```
<uc:MyControl ID="id" runat="server" ConstantValue="any string" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T07:46:06.830

您必须使用`#`服务器控件。因此，您必须像这样更改您的代码。

```
<!-- I have no references in page, is that missing? --> 
<uc:MyControl ID="id runat="server" ConstantValue=" <%# Constants.TheValue %>" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T10:48:59.157

我建议您在声明中添加静态属性，并且您不需要创建 Constant 类的实例。

这样你就可以直接使用 Constant.TheValue

快乐编码！！！

# sharepoint - 无法从 URL 读取 WSDL：... 错误：401 未经授权。

> ID：12795129
> 
> 赞同：0
> 
> 时间：2012-10-09T07:41:54.797
> 
> 标签：sharepoint, coldfusion

我尝试使用 Coldfusion 9 中的标签在我的共享点中上传一些文件，但是该简单代码存在问题：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
<html> 
<head> 
<title>cfsharepoint Views Example</title> 
</head> 

<body> 

<cfoutput> 
Getting the list collection<br /> 

<cfsharepoint action="getlistcollection" domain="sharepoint/it" username="username" password="pwd" name="result"/> 

result.ResultFlag: #result.ResultFlag#<br><br> 

</cfoutput> 

</body> 
</html> 
```

当我开始我的页面时，它说：

> 无法从 URL 读取 WSDL：sharepoint/it/_vti_bin/Lists.asmx?wsdl。错误：401 未经授权。

我该如何解决？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:33:05.333

该`cfsharepoint`标记仅适用于基本身份验证，因此不能使用 NTLM (HTTPS)。

这是标签的一个主要缺点，并且在大多数大型组织中完全违背了他们的安全策略。

如果您只有基本身份验证，您还可以尝试在您的用户名前面加上域，例如`username="sharepoint\username"`，我必须在我从事的一个项目中这样做。

# java - 如何在不丢失像素的情况下将图像调整为高分辨率图像？

> ID：12795132
> 
> 赞同：3
> 
> 时间：2012-10-09T07:42:02.553
> 
> 标签：java, android, image-processing, opencv

我正在处理一些图像处理任务。

`getDrawingCache()`我使用和制作了低分辨率位图`createScalledBitmap()`

但是当我将此图像调整为高分辨率时，例如 612 X 612，我的图像变得模糊。而且看起来很糟糕。

有什么方法可以在不丢失像素的情况下将图像调整为高分辨率？openCV有这种类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T08:37:14.447

你不能。如果您的图像是 200x200，那么这就是它包含的信息像素数。如果你扩大它，它仍然是相同数量的信息，只是你必须将它传播到更广泛的区域。

可以这样想 - 假设您有一个只有一个像素的图像，而该像素是蓝色的。现在您想将该图像缩放到两个像素。第二个像素应该是什么颜色？答：可以是任何东西。第一个像素中没有可以权威地决定第二个像素应该是什么样子的信息，没有可用的信息。

因此，这不是您所说的“丢失像素”的问题，而是添加新像素而没有关于它们应该是什么样子的信息的问题。所以调整大小使用它拥有的信息，它基本上说“使插入/新像素与最接近的相邻预先存在的像素颜色相同”。

有一些算法和技术用于插值（猜测）插入的像素应该是什么样子以避免锯齿状边缘等。维基百科有一些关于各种[基于插值的缩放技术](http://en.wikipedia.org/wiki/Image_scaling)和[超级采样](http://en.wikipedia.org/wiki/Supersampling)作为起点的好信息。请注意，尽管这些技术都不会**创建**新信息，但它们只会平滑边缘并使缩放后的图像看起来不那么锯齿状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:52:02.300

您应该做的是创建一个大小为 612 X 612 的原始图像，然后缩小大小并将其另存为其他内容，这样您就有一个原始的大图像和一个小图像。从大到小比从小到大更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T07:27:53.663

我已经使用资产解决了这个问题..

（1）把我所有的图片放在资产文件夹中

(2) 使用输入流读取图像

现在我不需要调整它的大小，它可以正常工作。像这样：

```
private void setThemeBackgroundImage(String imageName, Button themeButton) {

        try {
            InputStream backgroundBitmap = getAssets().open(imageName);
            Bitmap immutableBitmap = BitmapFactory
                    .decodeStream(backgroundBitmap);

            themeButton.setBackgroundDrawable(new BitmapDrawable(
                    getResources(), immutableBitmap));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

# c - 在 C 中使用转置进行矩阵乘法

> ID：12795143
> 
> 赞同：2
> 
> 时间：2012-10-09T07:43:00.323
> 
> 标签：c, matrix

我是 C 的初学者。我试图编写一些代码来使用转置执行矩阵乘法。有什么办法可以在执行时间方面改进代码？

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <assert.h>
#include <time.h>

int main()
{   

  int a[3][3] = {{1,0, 1}, {2, 2, 4},{1, 2, 3}};

        int b[3][3] ={ { 2, 3, 1}, { 6, 6, 2 }, { 9, 9, 0 } };
        int result[3][3];
        double tmp;
        int i,j,k;
        for (i=0; i<3; i++) //i = col
          {
            for (k=0; k<3; k++)
            {
              tmp = a[i][k];
              for (j=0; j<3; j++) //j = row
              {
                result[i][j] += tmp * b[k][j];
                printf("%d\t",result[i][j]);
              }
            }
          }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:48:56.097

如果你的矩阵是`int`，你真的不应该使用 a`double`作为临时的。毫无目的地将整数转换为浮点数然后再转换回来是非常浪费的，它可能会花费很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:34:01.000

由于多种原因，您的矩阵乘法实现是错误的。矩阵乘法是通过计算第一个矩阵的每一行与第二个矩阵的每一列的内积来执行的，这在您的实现中基本上被遗漏了。您正在使用指向*a[i][k] 的**temp*变量，该变量在最内层循环中保持不变。第一个矩阵的行索引和第二个矩阵的列索引（反之亦然）必须在实际乘法步骤中更新。此外，结果会逐渐添加到第三个矩阵中，每个元素都必须在 C 等语言中用 0 初始化，以避免垃圾值的问题。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T07:58:08.963

要尝试的一件非常不直观的事情是对源代码进行反优化并消除显式`tmp`：

```
for (i=0; i<3; i++)
    for (k=0; k<3; k++)
        for (j=0; j<3; j++) //j = row
        {
            result[i][j] += a[i][k] * b[k][j];
        } 
```

这在某种程度上解开了编译器的束缚，并允许它自己找到常见的不变子表达式。它将它们移到循环之外，也许还使用更快的范例（寄存器而不是堆栈位置）来保存它。

根据目标 CPU，启用速度优化的精明编译器可能能够通过分配独立寄存器和展开内部循环来并行 CPU 的流水线。当然，这一切都取决于您指示编译器进行优化（使用适当的编译器选项）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-20T20:52:31.013

您是否尝试过使用结构？

这是一个 4 x 4 矩阵乘法，例如。将其打开 3 x 3 很容易。

typedef struct s_matrix

{

```
double    a;
double    b;
double    c;
double    d;

double    e;
double    f;
double    g;
double    h;

double    i;
double    j;
double    k;
double    l;

double    m;
double    n;
double    o;
double    p; 
```

} t_matrix;

t_matrix *m4_mul_m4(t_matrix *b, t_matrix *a)

{ t_matrix *m;

```
m = malloc(sizeof(t_matrix));
m->a = a->a * b->a + a->b * b->e + a->c * b->i + a->d * b->m;
m->b = a->a * b->b + a->b * b->f + a->c * b->j + a->d * b->n;
m->c = a->a * b->c + a->b * b->g + a->c * b->k + a->d * b->o;
m->d = a->a * b->d + a->b * b->h + a->c * b->l + a->d * b->p;
m->e = a->e * b->a + a->f * b->e + a->g * b->i + a->h * b->m;
m->f = a->e * b->b + a->f * b->f + a->g * b->j + a->h * b->n;
m->g = a->e * b->c + a->f * b->g + a->g * b->k + a->h * b->o;
m->h = a->e * b->d + a->f * b->h + a->g * b->l + a->h * b->p;
m->i = a->i * b->a + a->j * b->e + a->k * b->i + a->l * b->m;
m->j = a->i * b->b + a->j * b->f + a->k * b->j + a->l * b->n;
m->k = a->i * b->c + a->j * b->g + a->k * b->k + a->l * b->o;
m->l = a->i * b->d + a->j * b->h + a->k * b->l + a->l * b->p;
m->m = a->m * b->a + a->n * b->e + a->o * b->i + a->p * b->m;
m->n = a->m * b->b + a->n * b->f + a->o * b->j + a->p * b->n;
m->o = a->m * b->c + a->n * b->g + a->o * b->k + a->p * b->o;
m->p = a->m * b->d + a->n * b->h + a->o * b->l + a->p * b->p;
return (m); 
```

}*

# android - 最新sdk（3.0或更高版本）的Android ant脚本

> ID：12795146
> 
> 赞同：0
> 
> 时间：2012-10-09T07:43:07.450
> 
> 标签：android, eclipse, ant

我用 Android 2.2 和 2.1 操作系统编写了 ant 脚本，它运行良好。

我已将 SDK 更新到 3.2，当我尝试运行它时，会出现错误，因为找不到“pre_setup.xml”。我已经在该路径中进行了搜索，但该文件不可用。

任何人都可以知道在 3.0 或更高版本的操作系统中使用 ant 脚本吗？

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:26:36.847

您可以尝试使用 android sdk -> tools 目录中的 android.bat 重新生成 build.xml 的新副本。确保首先创建旧文件的备份副本。

在 \android-sdk\tools\

```
android.bat update project -p "path to project file" 
```

然后将旧 build.xml 中的任何更改移植到新的 build.xml 中。（如果您没有对旧版本进行任何更改，您可能会发现不需要移植任何东西）

# javascript - 从函数外部获取 `this`

> ID：12795147
> 
> 赞同：0
> 
> 时间：2012-10-09T07:43:13.160
> 
> 标签：javascript, jquery

如何，甚至有可能`this`从函数中获取值？我制作了这个保存`defaultValue`函数的片段，但我想从函数外部直接在`dom`元素上读取它。那可能吗？？

**我在 jQuery 中做了这个：**

```
$("input").val(function() {
    var $label = $("label[for='" + $(this).attr("id") + "']");
    this.defaultValue = $label.text();
    $label.hide()
    return this.defaultValue
}).click(function() {
    if ($(this).val() == this.defaultValue) {
        $(this).val("");
    }
}).bind("blur", function() {
    if ($(this).val() == "") {
        $(this).val(this.defaultValue);
    }
}); 
```

在此处查看实际操作：http: [//jsfiddle.net/ZUZ3L/g6dMA/](http://jsfiddle.net/ZUZ3L/g6dMA/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:52:10.773

您可以使用 jQuery 的 .data() 函数将其保存到 DOM 中表示的元素：

在 pageLoad 上执行此操作：

```
$(this).data('defaultValue', $(this).val()); 
```

您可以稍后使用以下方法检索它：

```
alert($('#myElement').data('defaultValue'); 
```

...这将返回在页面加载时设置的值，而不是输入的当前值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:46:08.720

在您的 function`$("input").val(function() {`中，`this`指的是`$("input")`查询中的一个元素。
请注意`$("input")`，即使只有一个元素存在，它也会返回一个元素列表。用于`.get()`选择元素。
您可以`defaultValue`从`$("input").get(0).defaultValue`. （假设你只想要一个元素）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:47:42.820

试试这个：

```
<input onfocus="if (this.value==this.defaultValue) this.value = '';" onblur="if (this.value=='') this.value = this.defaultValue;" name="search" value="Search"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T07:49:28.730

这些函数是回调函数。这意味着它们在事件触发时运行（来自 jQuery）。所以，`this`在这种情况下，实际上是由 jQuery 来决定的。在哪种情况下是事件绑定到的元素。

附带说明一下，您似乎正在寻找占位符属性（仅在 HTML5 中可用，但您可以找到旧浏览器的插件）

# ruby-on-rails - Gemspec：如何指定不必自动需要的依赖项？

> ID：12795150
> 
> 赞同：20
> 
> 时间：2012-10-09T07:43:20.133
> 
> 标签：ruby-on-rails, gem, gemspecs

我编写了一个具有一定依赖关系数组的 gem，其中一些我不希望在捆绑到另一个项目时隐式需要它们。一个例子是 uuidtools gem，我只想在使用它的文件中使用它。

```
gem.add_dependency("uuidtools",["=2.1.3"], :require => false) 
```

这种语法是错误的，因为 :require => false 在那里是出乎意料的，但这或多或少总结了我想用它做什么。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T07:32:22.803

默认情况下，引擎 gemspec 文件中指定的 Gem 确实需要明确要求。来自[官方文档](https://guides.rubyonrails.org/engines.html#other-gem-dependencies)- `Note that if you want to immediately require dependencies when the engine is required, you should require them before the engine's initialization`. 在您的情况下，您应该能够`gem.add_dependency 'uuidtools', '2.1.3'`在 gemspec 文件中使用类似的东西，并且在相关位置需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:19:08.160

我认为完成你所要求的方法是不要把它放在你的 gemspec 中，而是为捆绑器添加一个 Gemfile。然后您可以将其添加为捆绑器安装的 gem。

为此，在 Gemfile 顶部或源声明之后添加简单的单词“gemspec”。这将获取 gemspec 特定的宝石。不过，这基本上不是好的设计。它看起来更像是熵，你应该尽可能避免在 gems 和源代码中使用它。话虽如此，我认为安装 gem 并需要它没有任何危害。它应该被正确命名，并且不会干扰其他任何事情。

鉴于您引用的宝石。你甚至可能不再需要那个宝石了。你在 Ruby 1.9 上吗？如果是这样，那么现在Ruby 中内置了[SecureRandom模块。](http://ruby-doc.org/stdlib-1.9.2/libdoc/securerandom/rdoc/SecureRandom.html#method-c-uuid)

```
require 'secure_random'

my_uuid = SecureRandom.uuid 
```

你也可以用它生成一个真正的 UUID！所以你的 DBA 会很高兴并且可以在 Postgres 中使用 UUID 数据类型。（你正在使用 postgres，对吧！哈哈）。同样 IIRC，UUIDTools 不会根据标准生成正确的 UUID。我相信第三个序列是错误的。

# c# - 在 C# 中为 SQL Server 2008 r2 设置 TCP/IP 协议启用

> ID：12795172
> 
> 赞同：1
> 
> 时间：2012-10-09T07:44:38.483
> 
> 标签：c#, .net, sql-server-2008, sql-server-2008-r2

> **可能重复：**
> [以编程方式更改 SQL Server 设置](https://stackoverflow.com/questions/2266697/changing-sql-server-settings-programmatically)

要在客户端 C# 应用程序和 SQL Server 2008 R2 之间建立网络连接，我知道应该手动做什么，我的问题是如何在 C# 代码中执行以下步骤！

1.  为服务器实例设置启用 TCP/IP 协议，例如`MSSQLSERVERR2`.
2.  重新启动我的 SQL Server 引擎。

    我可以通过 SQL 查询执行其他步骤：

3.  添加用户并授予管理员权限。

    ```
    CREATE LOGIN momtahen 
    WITH PASSWORD = '123'

    EXEC master..sp_addsrvrolemember @loginame = N'momtahen', 
                                     @rolename = N'sysadmin' 
    ```

4.  为我的 SQL Server 设置混合身份验证模式。

    ```
    EXEC xp_instance_regwrite N'HKEY_LOCAL_MACHINE', 
    N'Software\Microsoft\MSSQLServer\MSSQLServer', N'LoginMode', REG_DWORD, 2 
    ```

我需要可以使用 C# 执行的 C# 代码或 SQL 查询。

另外我不得不提一下，我已经看到了以下问题，但还没有帮助！

*   [使用代码或脚本（查询）启用到 sql server express 已安装数据库的 tcp\ip 远程连接](https://stackoverflow.com/questions/9138172/enable-tcp-ip-remote-connections-to-sql-server-express-already-installed-databas)
*   [使用脚本启用到 sql express 的远程连接](https://stackoverflow.com/questions/9137836/enable-remote-connections-to-sql-express-with-a-script/9154540#9154540)
*   [在 SQL Server 2005 和 2008 上启用 TCP 的注册表设置是什么？](https://stackoverflow.com/questions/2499957/what-are-registry-settings-to-enable-tcp-on-sql-server-2005-and-2008)

顺便感谢他们。那么有什么想法吗？

# asp.net-mvc - 如何使用 MVC 3 将文本数据导出到 csv？

> ID：12795174
> 
> 赞同：4
> 
> 时间：2012-10-09T07:44:47.877
> 
> 标签：asp.net-mvc, asp.net-mvc-3, export-to-csv

我需要将文本数据导出到 MVC3 中的 csv。我执行以下操作：

看法：

```
$(".export").click(function() {
    $.get("@Url.Action("Export","Log")");
}); 
```

控制器：

```
 public ActionResult Export()
    {
        var sb = new StringBuilder();

        var list = this.systemLogRepository.GetFilterList(
            null, this.ControllerContext.RequestContext.HttpContext.Request.QueryString, null);

        foreach (var item in list)
        {
            sb.AppendFormat(
                "{0},{1},{2},{3},{4}", item.Machine.Name, item.PackageID, item.ErrorDescription, item.OccurenceTime, Environment.NewLine);
        }

        return this.File(new UTF8Encoding().GetBytes(sb.ToString()), "text/csv", string.Format("Log-{0}.csv", DateTime.Now.ToString("g").Replace("/","-").Replace(":","_").Replace(" ", "-")));
    } 
```

这将返回内容，但不会弹出带有“另存为”和“打开”选项的窗口？？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T07:47:14.347

不要使用 AJAX 下载文件。使用普通链接或按钮：

```
@Html.ActionLink("export to CSV", "Export", "Log") 
```

现在你可以摆脱 javascript 位了。您不能使用 AJAX 下载文件的原因是内容确实会传输到客户端，但您无法从 javascript 打开另存为对话框。

# java - 如何从MongoDB中的查询结果访问数组字段

> ID：12795176
> 
> 赞同：0
> 
> 时间：2012-10-09T07:44:48.577
> 
> 标签：java, json, mongodb

我在 Cursor 中得到了一个 JSON 对象，如下所示

```
{
        "field1": "val1",
        "field2": [
            {
                "field3": "val3"
            },
            {
                "field4": "val4"
            }
        ]
} 
```

我能够访问 feild1 及其值。如何访问 field3 及其值？
我尝试了以下代码但无法正常工作

```
System.out.println(cursor.next().get("field2.field3")); 
```

获取 null 作为输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:09:06.467

试试[这个](http://www.jondev.net/articles/Android_JSON_Parser_Example)。希望这会有所帮助。

# redmine - 删除 Bitnami Access 页面并直接访问应用程序

> ID：12795180
> 
> 赞同：3
> 
> 时间：2012-10-09T07:45:09.107
> 
> 标签：redmine, bitnami

我已经在端口 3000 上使用 Bitnami 堆栈安装了 Redmine。如何删除通过键入 url 访问的第一页（访问 BitNami Redmine Stack）并直接在此地址上配置 Redmine？

目前我需要在 url 后面添加 /redmine 才能访问 redmine。请给个建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T01:44:03.087

如果您只想`http://127.0.0.1:3000/`工作，那么您可以将其添加到您的 htdocs 索引文件中（可能是 C:\Program Files\BitNami Redmine Stack\apache2\htdocs\index.html）。

```
<script type="text/javascript">
    <!--
        window.location = "redmine/"
    //-->
</script> 
```

这将立即重定向您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:35:34.293

我认为您应该`/opt/bitnami/apps/redmine/conf/redmine.conf`像这样编辑路径中的乘客配置文件：

```
#RailsBaseURI /redmine
DocumentRoot /opt/bitnami/apps/redmine/htdocs/public
乘客最小实例数 1
乘客预启动 http://127.0.0.1
乘客友好错误页面关闭
乘客默认用户守护进程
乘客默认组守护进程

<目录“/opt/bitnami/apps/redmine/htdocs/public”>
  命令允许，拒绝
  允许所有人
  允许覆盖所有
  选项 - 多视图
<目录>

```

# android - Android Service中可运行的Webservice方法抛出异常

> ID：12795181
> 
> 赞同：2
> 
> 时间：2012-10-09T07:45:14.210
> 
> 标签：android, web-services

我正在尝试定期将电池信息发送到我的服务器。我已经测试了 web 服务代码，它在不使用 Android 服务的情况下工作正常，但是当我尝试在服务中的可运行内调用 web 服务方法时抛出异常。

**虽然当我尝试在我的 Android 服务中运行可运行的 Toast 时它工作正常。**

```
 package com.services;

    import org.ksoap2.SoapEnvelope;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapPrimitive;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.HttpTransportSE;

    import android.app.Service;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.content.IntentFilter;
    import android.os.Handler;
    import android.os.IBinder;
    import android.widget.Toast;

    public class BackService extends Service {
        private int m_interval = 20000; // 5 seconds by default, can be changed later
        private Handler m_handler;
        int  Level;

         private static final String SOAP_ACTION = "http://xy.xy/insertfeedback";
            private static final String METHOD_NAME = "insertfeedback";
            private static final String NAMESPACE = "http://xy.xy/";
            private static final String URL = "http://192.168.9.2:8080/WebApplication2/NewWebServiceService?WSDL";
            SoapObject request;
            SoapSerializationEnvelope envelope;
            HttpTransportSE ht;

       @Override
       public IBinder onBind(Intent intent) {
          return null;
       }

       @Override
       public void onCreate() {

             Toast.makeText(getApplicationContext(), "Service Created", Toast.LENGTH_SHORT).show();
             request= new SoapObject(NAMESPACE, METHOD_NAME);       
             envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
             ht = new HttpTransportSE(URL);
       }

       @Override
       public void onDestroy() {
          //code to execute when the service is shutting down
       }

       @Override
       public void onStart(Intent intent, int startid) {
             registerReceiver(this.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));

         Toast.makeText(getApplicationContext(), "Service Stared", Toast.LENGTH_SHORT).show();
         m_handler = new Handler();
         m_statusChecker.run();
       }

       Runnable m_statusChecker = new Runnable()
       {
            @Override
            public void run() {
                Toast.makeText(getApplicationContext(), ""+ Level, Toast.LENGTH_SHORT).show();
                BatteryService();
                 //updateStatus(); //this function can change value of m_interval.
                 m_handler.postDelayed(m_statusChecker, m_interval);
            }
       };

       private final BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){
           @Override
           public void onReceive(Context arg0, Intent intent) {
            Level = intent.getIntExtra("level", 0);
             //Toast.makeText(getApplicationContext(), ""+Level+"%", Toast.LENGTH_SHORT).show();

           }
           };

          public void BatteryService()
          {

              request.addPropertyIfValue("value",50);
              envelope.setOutputSoapObject(request);

              try
              {
                  ht.call(SOAP_ACTION, envelope);
                  final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                  final String str = response.toString();
                  Toast.makeText(getApplicationContext(), str, Toast.LENGTH_LONG).show();
              }
               catch (Exception e) {
                   Toast.makeText(getApplicationContext(),"Exception", Toast.LENGTH_LONG).show();

              }
          }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:51:02.630

你遇到什么样的异常？您也应该发布日志。这将有助于找出你的问题

# android - 如何在 Android 中使用 AudioRecorder

> ID：12795182
> 
> 赞同：-1
> 
> 时间：2012-10-09T07:45:19.997
> 
> 标签：android, audio-recording

我正在创建一个应用程序，我想在其中集成音频录制功能，并且输出文件必须为**.mp3**格式。请提供一些好的教程，我可以从中学习。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:52:06.950

也尝试以下方法：

```
import java.io.File;
import java.io.IOException;

import android.media.MediaRecorder;
import android.os.Environment;

public class AudioRecorder {

    final MediaRecorder recorder = new MediaRecorder();
    final String path;

    public AudioRecorder(String path) {
        this.path = sanitizePath(path);
    }

    private String sanitizePath(String path) {
        if (!path.startsWith("/")) {
            path = "/" + path;
        }
        if (!path.contains(".")) {
            path += ".3gp";
        }
        return Environment.getExternalStorageDirectory().getAbsolutePath() + path;
    }

    public void start() throws IOException {
        String state = android.os.Environment.getExternalStorageState();
        if (!state.equals(android.os.Environment.MEDIA_MOUNTED)) {
            throw new IOException("SD Card is not mounted.  It is " + state + ".");
        }

        File directory = new File(path).getParentFile();
        if (!directory.exists() && !directory.mkdirs()) {
            throw new IOException("Path to file could not be created.");
        }

        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(path);
        recorder.prepare();
        recorder.start();
    }

    public void stop() throws IOException {
        recorder.stop();
        recorder.release();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:51:35.330

试试这个[Android Audio Record](http://developer.android.com/reference/android/media/MediaRecorder.html) & [Audio Record using MediaRecord Android API Tutorial](http://www.benmccann.com/blog/android-audio-recording-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:52:25.750

这是执行此操作的简单代码。

```
 MediaRecorder mediarecorder = new MediaRecorder();
    mediarecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mediarecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    mediarecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    mediarecorder.setOutputFile("/sdcard/myv.mp3");
    try {
        mediarecorder.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mediarecorder.start(); 
```

# c# - Entity Framework and transaction isolation level

> ID：12795184
> 
> 赞同：30
> 
> 时间：2012-10-09T07:45:25.267
> 
> 标签：c#, .net, entity-framework, transactions

I'm using Entity Framework 4.0\. Now I need to restrict access to a table while I'm reading from it or writing to it. Probably that's about transaction isolation level.

How do I do that?

**Update**

here is what I have

```
using (var db = new MyDb())
{
    using (TransactionScope scope = new TransactionScope())
    {
        var item = db.MyItems.Single(x => x.Id == 5);
        item.Price = 12;
        db.SaveChanges();
        scope.Complete(); 
    }
} 
```

However, when I put a breakpoint at any line inside `using (TransactionScope scope` and when I'm stopping there and then I go to Sql Server Management Studio and doing a select query (or even update!) from a table that is using inside a transaction, I'm not getting an error for some reason. But why? It must not allow me to read a data while a transaction is executing.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-09T07:51:11.037

By default, a Transaction has an [IsolationLevel](http://msdn.microsoft.com/en-us/library/system.transactions.isolationlevel.aspx) of Serializable. Serializable is the highest level. It requires that the transaction completes before any other transaction is allowed to operate on the data.

It has the following restrictions:

*   Statements cannot read data that has been modified but not yet committed by other transactions.
*   No other transactions can modify data that has been read by the current transaction until the current transaction completes.
*   Other transactions cannot insert new rows with key values that would fall in the range of keys read by any statements in the current transaction until the current transaction completes.

This is a great blog post that explains how to use Transactions with the Entity Framework: [Entity Framework transaction scope examples](http://www.programminginterviews.info/2012/06/entity-framework-transaction-scope.html)

## UPDATE

In Entity Framework 6 the default IsolationLevel is changed to READ_COMMITTED_SNAPSHOT for databases created using Code First, potentially allowing for more scalability and fewer deadlocks. See the [future spec of EF 6](https://github.com/aspnet/EntityFramework6)

# xamarin.android - MVVMCross SplashScreen 循环

> ID：12795190
> 
> 赞同：2
> 
> 时间：2012-10-09T07:45:58.903
> 
> 标签：xamarin.android, mvvmcross

我正在尝试使用 Visual Studio 2012 和 MonoDroid 创建我的第一个 MVVMCross 应用程序。该应用程序的目标是 API 级别 8 和 Android 版本 2.2。我能够将 Tutorial.UI.Droid 部署到模拟器上（将其更改为与上述相同的 API 级别和版本）并且它似乎可以工作。它越过了初始屏幕，但是当我复制相同的结构和布局时，我的应用程序只是卡在了引导循环中，并且正在重复加载屏幕。我将不胜感激任何帮助和指示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:35:41.377

我犯了一个错误，为我正在使用的一个 ViewModel 留下了一个视图，但它找不到它。包括在项目中解决了加载循环，但它**似乎仍然没有加载**视图，我需要强制关闭。我正在使用的模拟器是 2.2 版的银河选项卡

我从 stackoverflow 上的一篇文章中发现，Android 设备日志有很大帮助（丢失了该文章的链接）

[http://docs.xamarin.com/android/advanced_topics/android_debug_log](http://docs.xamarin.com/android/advanced_topics/android_debug_log)

10-17 04:10:22.574 D/AndroidRuntime(511): 10-17 04:10:22.574 D/AndroidRuntime(511): >>>>>>>>>>>>>> AndroidRuntime 开始 <<<< <<<<<<<<<< 10-17 04:10:22.574 D/AndroidRuntime(511): CheckJNI 开启 10-17 04:10:22.714 D/AndroidRuntime(511): --- 注册本机函数 - -- 10-17 04:10:23.254 D/AndroidRuntime（511）：关闭 VM 10-17 04:10:23.265 D/jdwp（511）：adbd 断开连接 10-17 04:10:23.275 I/AndroidRuntime（511 ）：注意：线程'Binder Thread＃3'的附加失败10-17 04：10：23.685 D / AndroidRuntime（519）：10-17 04：10：23.685 D / AndroidRuntime（519）：>>>>>> >>>>>>>> AndroidRuntime 开始 <<<<<<<<<<<<< 10-17 04:10:23.685 D/AndroidRuntime(519):CheckJNI 开启 10-17 04:10:23.815 D/AndroidRuntime（519）：--- 注册本机功能 --- 10-17 04:10:24.445 D/AndroidRuntime（519）：关闭 VM 10-17 04： 10:24.445 D/jdwp（519）：adbd 断开连接 10-17 04:10:24.885 D/AndroidRuntime（527）：10-17 04:10:24.885 D/AndroidRuntime（527）：>>>>>>>> >>>>>> AndroidRuntime 开始 <<<<<<<<<<<<< 10-17 04:10:24.885 D/AndroidRuntime(527): CheckJNI 开启 10-17 04:10:25.016 D/ AndroidRuntime（527）：---注册本机功能---10-17 04：10：25.545 I/PackageManager（60）：删除非系统包：Test.Droid 10-17 04：10：25.545 D/PackageManager（ 60）：删除包 Test.Droid 10-17 04:10:25.545 D/PackageManager（60）：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。10：23.815 D/AndroidRuntime（519）：---注册本机功能---10-17 04：10：24.445 D/AndroidRuntime（519）：关闭VM 10-17 04：10：24.445 D/jdwp（519 ): adbd 断开连接 10-17 04:10:24.885 D/AndroidRuntime(527): 10-17 04:10:24.885 D/AndroidRuntime(527): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<< 10-17 04:10:24.885 D/AndroidRuntime（527）：CheckJNI 开启 10-17 04:10:25.016 D/AndroidRuntime（527）：---注册本机功能 --- 10-17 04:10:25.545 I/PackageManager(60)：删除非系统包：Test.Droid 10-17 04:10:25.545 D/PackageManager(60)：删除包 Test.Droid 10-17 04:10:25.545 D/PackageManager（60）：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。10：23.815 D/AndroidRuntime（519）：---注册本机功能---10-17 04：10：24.445 D/AndroidRuntime（519）：关闭VM 10-17 04：10：24.445 D/jdwp（519 ): adbd 断开连接 10-17 04:10:24.885 D/AndroidRuntime(527): 10-17 04:10:24.885 D/AndroidRuntime(527): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<< 10-17 04:10:24.885 D/AndroidRuntime（527）：CheckJNI 开启 10-17 04:10:25.016 D/AndroidRuntime（527）：---注册本机功能 --- 10-17 04:10:25.545 I/PackageManager(60)：删除非系统包：Test.Droid 10-17 04:10:25.545 D/PackageManager(60)：删除包 Test.Droid 10-17 04:10:25.545 D/PackageManager（60）：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。--- 注册本机功能 --- 10-17 04:10:24.445 D/AndroidRuntime（519）：关闭 VM 10-17 04:10:24.445 D/jdwp（519）：adbd 断开连接 10-17 04:10 :24.885 D/AndroidRuntime(527):10-17 04:10:24.885 D/AndroidRuntime(527):>>>>>>>>>>>>>> AndroidRuntime 开始 <<<<<<<<<< <<<< 10-17 04:10:24.885 D/AndroidRuntime（527）：CheckJNI 开启 10-17 04:10:25.016 D/AndroidRuntime（527）：--- 注册本机函数 --- 10-17 04 :10:25.545 I/PackageManager(60): 删除非系统包:Test.Droid 10-17 04:10:25.545 D/PackageManager(60): 删除包 Test.Droid 10-17 04:10:25.545 D/ PackageManager(60)：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。--- 注册本机功能 --- 10-17 04:10:24.445 D/AndroidRuntime（519）：关闭 VM 10-17 04:10:24.445 D/jdwp（519）：adbd 断开连接 10-17 04:10 :24.885 D/AndroidRuntime(527):10-17 04:10:24.885 D/AndroidRuntime(527):>>>>>>>>>>>>>> AndroidRuntime 开始 <<<<<<<<<< <<<< 10-17 04:10:24.885 D/AndroidRuntime（527）：CheckJNI 开启 10-17 04:10:25.016 D/AndroidRuntime（527）：--- 注册本机函数 --- 10-17 04 :10:25.545 I/PackageManager(60): 删除非系统包:Test.Droid 10-17 04:10:25.545 D/PackageManager(60): 删除包 Test.Droid 10-17 04:10:25.545 D/ PackageManager(60)：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。关闭 VM 10-17 04:10:24.445 D/jdwp（519）：adbd 已断开连接 10-17 04:10:24.885 D/AndroidRuntime（527）：10-17 04:10:24.885 D/AndroidRuntime（527）： >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<< 10-17 04:10:24.885 D/AndroidRuntime(527): CheckJNI 开启 10- 17 04：10：25.016 D/AndroidRuntime（527）：---注册本机功能--- 10-17 04：10：25.545 I/PackageManager（60）：删除非系统包：Test.Droid 10-17 04 ：10：25.545 D / PackageManager（60）：删除包Test.Droid 10-17 04：10：25.545 D / PackageManager（60）：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。关闭 VM 10-17 04:10:24.445 D/jdwp（519）：adbd 已断开连接 10-17 04:10:24.885 D/AndroidRuntime（527）：10-17 04:10:24.885 D/AndroidRuntime（527）： >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<< 10-17 04:10:24.885 D/AndroidRuntime(527): CheckJNI 开启 10- 17 04：10：25.016 D/AndroidRuntime（527）：---注册本机功能--- 10-17 04：10：25.545 I/PackageManager（60）：删除非系统包：Test.Droid 10-17 04 ：10：25.545 D / PackageManager（60）：删除包Test.Droid 10-17 04：10：25.545 D / PackageManager（60）：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。885 D/AndroidRuntime（527）：>>>>>>>>>>>>>> AndroidRuntime 开始 <<<<<<<<<<<<<< 10-17 04:10:24.885 D/AndroidRuntime（ 527): CheckJNI 开启 10-17 04:10:25.016 D/AndroidRuntime(527): --- 注册本机函数 --- 10-17 04:10:25.545 I/PackageManager(60): 移除非系统包：Test.Droid 10-17 04:10:25.545 D/PackageManager（60）：删除包 Test.Droid 10-17 04:10:25.545 D/PackageManager（60）：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider .885 D/AndroidRuntime（527）：>>>>>>>>>>>>>> AndroidRuntime 开始 <<<<<<<<<<<<<< 10-17 04:10:24.885 D/AndroidRuntime（ 527): CheckJNI 开启 10-17 04:10:25.016 D/AndroidRuntime(527): --- 注册本机函数 --- 10-17 04:10:25.545 I/PackageManager(60): 移除非系统包：Test.Droid 10-17 04:10:25.545 D/PackageManager（60）：删除包 Test.Droid 10-17 04:10:25.545 D/PackageManager（60）：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider .10：25.545 I/PackageManager（60）：删除非系统包：Test.Droid 10-17 04：10：25.545 D/PackageManager（60）：删除包 Test.Droid 10-17 04：10：25.545 D/PackageManager (60)：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。10：25.545 I/PackageManager（60）：删除非系统包：Test.Droid 10-17 04：10：25.545 D/PackageManager（60）：删除包 Test.Droid 10-17 04：10：25.545 D/PackageManager (60)：未注册的内容提供者：Test.Droid.mono.MonoRuntimeProvider。**mono_init**GC_EXPLICIT 在 150 毫秒内释放了 589 个对象/30328 个字节 10-17 04:10:31.894 D/dalvikvm（265）：GC_EXPLICIT 在 64 毫秒内释放了 445 个对象/20992 个字节 10-17 04:10:32.264 D/PackageParser（60）：扫描包: /data/app/vmdl20752.tmp 10-17 04:10:32.524 D/PackageManager(60): 扫描包 Test.Droid 10-17 04:10:32.534 I/PackageManager(60): /data/app/Test .Droid-1.apk 更改；解包 10-17 04:10:32.556 D/PackageManager（60）：缓存共享库 lib/armeabi/libmonodroid.so 10-17 04:10:32.654 D/installd（35）：DexInv：--- BEGIN '/data /app/Test.Droid-1.apk' --- 10-17 04:10:33.294 D/dalvikvm（544）：DexOpt：加载 177ms，验证 178ms，选择 8ms 10-17 04:10:33.364 D/installd ( 35): DexInv: --- END '/data/app/Test.Droid-1.apk' (success) --- 10-17 04:10:33.364 D/PackageManager( 60): 注册内容提供者: 测试.Droid.mono。**mono_init**，className = mono.MonoRuntimeProvider，isSyncable = false 10-17 04:10:33.364 D/PackageManager（60）：提供者：mono.MonoRuntimeProvider 10-17 04:10:33.364 D/PackageManager（60）：接收者：mono.android .Seppuku 10-17 04:10:33.364 D/PackageManager（60）：活动：Test.droid.views.OfficeView 10-17 04:10:33.384 I/ActivityManager（60）：强制停止包 Test.Droid uid=10045 10-17 04:10:33.564 I/installd（35）：移动 /data/dalvik-cache/data@app@Test.Droid-1.apk@classes.dex -> /data/dalvik-cache/data@app @Test.Droid-1.apk@classes.dex 10-17 04:10:33.564 D/PackageManager(60): 新包安装在 /data/app/Test.Droid-1.apk 10-17 04:10: 34.016 D/dalvikvm（60）：GC_EXPLICIT 在 201 毫秒内释放 6242 个对象/413272 个字节 10-17 04:10:34.016 D/AndroidRuntime（537）：关闭 VM 10-17 04:10:34.016 D/jdwp（537）：adbd 断开连接 10-17 04:10:34.094 I/dalvikvm（537）：JNI：AttachCurrentThread（来自???.???） 10-17 04:10:34.094 I/AndroidRuntime（537）：注意：附加线程'Binder Thread #3' 失败 10-17 04:10:34.108 D/VoiceDialerReceiver（265）：onReceive Intent { act=android.intent.action.PACKAGE_ADDED dat=package:Test.Droid flg=0x10000000 cmp=com.android。 voicedialer/.VoiceDialerReceiver（有附加功能）} 10-17 04:10:34.114 V/RecognizerEngine（265）：deleteCachedGrammarFiles /data/data/com.android.voicedialer/files/openentries.txt 10-17 04:10:34.224 W /RecognitionManagerService(60): 找不到可用的语音识别服务 10-17 04:10:34.894 D/AndroidRuntime(553): 10-17 04:10:34.894 D/AndroidRuntime(553): >>>>>>>> >>>>>> AndroidRuntime 启动 <<<<<<<<<<<<<10-17 04:10:34.894 D/AndroidRuntime（553）：CheckJNI 已打开 10-17 04:10:35.034 D/AndroidRuntime（553）：--- 注册本机函数 --- 10-17 04:10:35.564 I/ActivityManager（60）：开始活动：Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=Test.Droid/Test.droid.views.OfficeView } 10-17 04:10:35.784 D/AndroidRuntime（ 553): 关闭 VM 10-17 04:10:35.804 D/jdwp (553): adbd 断开连接 10-17 04:10:35.894 I/ActivityManager(60): 为活动 Test.Droid/Test 启动 proc Test.Droid .droid.views.OfficeView: pid=560 uid=10045 gids={3003, 1015} 10-17 04:10:36.204 I/WindowManager(60): 将旋转设置为 1, animFlags=1 10-17 04:10: 36.204 I/ActivityManager（60）：配置更改：{ scale=1.0 imsi=310/260 loc=en_US touch=3 keys=1/1/2 nav=3/1 orien=2 layout=35 uiMode=17 seq=14 } 10-17 04:10:36.474 I/ActivityThread（560）：发布提供者 Test.Droid.mono.MonoRuntimeProvider。**mono_init**：mono.MonoRuntimeProvider 10-17 04:10:36.504 D/dalvikvm（560）：尝试加载 lib /data/data/Test.Droid/lib/libmonodroid.so 0x44f51df8 10-17 04:10:36.504 D/dalvikvm（ 560）：添加共享库 /data/data/Test.Droid/lib/libmonodroid.so 0x44f51df8 10-17 04:10:36.664 W/MonoDroid-Debugger（560）：尝试使用选项初始化调试器：--debugger- agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8877,server=y,embedding=1 10-17 04:10:36.684 W/MonoDroid-Debugger(560)：接受的标准输出连接：29 10-17 04：10：3​​7.484 E/mono（560）：警告：此应用程序支持的运行时版本不可用。10-17 04:10:37.484 E/mono（560）：使用默认运行时：v2.0.50727 10-17 04:10:40.404 W/monodroid-gc（560）：GREF GC 阈值：1800 10-17 04:10 ：41.204 W/WindowManager（60）：应用程序冻结超时已过期。10-17 04:10:41。204 W/WindowManager（60）：强制清除冻结：AppWindowToken{451330b0 token=HistoryRecord{450c63d0 Test.Droid/Test.droid.views.OfficeView}} 10-17 04:10:43.434 D/dalvikvm（60）：GC_EXPLICIT 已释放4514 个对象/255248 字节在 127 毫秒内 10-17 04:10:45.594 W/ActivityManager(60)：启动超时已过期，放弃唤醒锁！10-17 04:10:46.374 W/ActivityManager（60）：HistoryRecord{450c63d0 Test.Droid/Test.droid.views.OfficeView} 的活动空闲超时 10-17 04:10:49.215 I/mvx（560）：1.57设置：约定从 10-17 04:11:29.324 W/ActivityManager（60）开始：强制完成活动 Test.Droid/Test.droid.views.M10-17 04:10:49.765 I/mono-stdout（560）：mvx ：诊断：1.57 设置：约定从 10-17 04:11:29.324 W/ActivityManager（60）开始：强制完成活动 Test.Droid/Test.droid.views.OfficeView 10-17 04:12:33。**mono_init**40.164 D/dalvikvm（265）：GC_EXPLICIT 在 58 毫秒内释放 238 个对象/13512 个字节 10-17 04:12:40.254 D/PackageParser（60）：扫描包：/data/app/vmdl20754.tmp 10-17 04:12： 40.504 D/PackageManager(60): 扫描包 Test.Droid 10-17 04:12:40.524 I/PackageManager(60): /data/app/Test.Droid-1.apk 改变；解包 10-17 04:12:40.534 D/PackageManager(60): 缓存共享库 lib/armeabi/libmonodroid.so 10-17 04:12:40.644 D/installd(35): DexInv: --- BEGIN '/data /app/Test.Droid-1.apk' --- 10-17 04:12:41.244 D/dalvikvm（615）：DexOpt：加载 174ms，验证 178ms，选择 6ms 10-17 04:12:41.304 D/installd ( 35): DexInv: --- END '/data/app/Test.Droid-1.apk' (success) --- 10-17 04:12:41.304 D/PackageManager( 60): 注册内容提供者: 测试.Droid.mono.MonoRuntimeProvider。GC_EXPLICIT 在 58 毫秒内释放 238 个对象/13512 个字节 10-17 04:12:40.254 D/PackageParser(60)：扫描包：/data/app/vmdl20754.tmp 10-17 04:12:40.504 D/PackageManager(60)：扫描包 Test.Droid 10-17 04:12:40.524 I/PackageManager(60): /data/app/Test.Droid-1.apk 已更改；解包 10-17 04:12:40.534 D/PackageManager(60): 缓存共享库 lib/armeabi/libmonodroid.so 10-17 04:12:40.644 D/installd(35): DexInv: --- BEGIN '/data /app/Test.Droid-1.apk' --- 10-17 04:12:41.244 D/dalvikvm（615）：DexOpt：加载 174ms，验证 178ms，选择 6ms 10-17 04:12:41.304 D/installd ( 35): DexInv: --- END '/data/app/Test.Droid-1.apk' (success) --- 10-17 04:12:41.304 D/PackageManager( 60): 注册内容提供者: 测试.Droid.mono.MonoRuntimeProvider。GC_EXPLICIT 在 58 毫秒内释放 238 个对象/13512 个字节 10-17 04:12:40.254 D/PackageParser(60)：扫描包：/data/app/vmdl20754.tmp 10-17 04:12:40.504 D/PackageManager(60)：扫描包 Test.Droid 10-17 04:12:40.524 I/PackageManager(60): /data/app/Test.Droid-1.apk 已更改；解包 10-17 04:12:40.534 D/PackageManager(60): 缓存共享库 lib/armeabi/libmonodroid.so 10-17 04:12:40.644 D/installd(35): DexInv: --- BEGIN '/data /app/Test.Droid-1.apk' --- 10-17 04:12:41.244 D/dalvikvm（615）：DexOpt：加载 174ms，验证 178ms，选择 6ms 10-17 04:12:41.304 D/installd ( 35): DexInv: --- END '/data/app/Test.Droid-1.apk' (success) --- 10-17 04:12:41.304 D/PackageManager( 60): 注册内容提供者: 测试.Droid.mono.MonoRuntimeProvider。扫描包：/data/app/vmdl20754.tmp 10-17 04:12:40.504 D/PackageManager(60): 扫描包 Test.Droid 10-17 04:12:40.524 I/PackageManager(60):/data/app /Test.Droid-1.apk 已更改；解包 10-17 04:12:40.534 D/PackageManager(60): 缓存共享库 lib/armeabi/libmonodroid.so 10-17 04:12:40.644 D/installd(35): DexInv: --- BEGIN '/data /app/Test.Droid-1.apk' --- 10-17 04:12:41.244 D/dalvikvm（615）：DexOpt：加载 174ms，验证 178ms，选择 6ms 10-17 04:12:41.304 D/installd ( 35): DexInv: --- END '/data/app/Test.Droid-1.apk' (success) --- 10-17 04:12:41.304 D/PackageManager( 60): 注册内容提供者: 测试.Droid.mono.MonoRuntimeProvider。扫描包：/data/app/vmdl20754.tmp 10-17 04:12:40.504 D/PackageManager(60): 扫描包 Test.Droid 10-17 04:12:40.524 I/PackageManager(60):/data/app /Test.Droid-1.apk 已更改；解包 10-17 04:12:40.534 D/PackageManager(60): 缓存共享库 lib/armeabi/libmonodroid.so 10-17 04:12:40.644 D/installd(35): DexInv: --- BEGIN '/data /app/Test.Droid-1.apk' --- 10-17 04:12:41.244 D/dalvikvm（615）：DexOpt：加载 174ms，验证 178ms，选择 6ms 10-17 04:12:41.304 D/installd ( 35): DexInv: --- END '/data/app/Test.Droid-1.apk' (success) --- 10-17 04:12:41.304 D/PackageManager( 60): 注册内容提供者: 测试.Droid.mono.MonoRuntimeProvider。apk 已更改；解包 10-17 04:12:40.534 D/PackageManager(60): 缓存共享库 lib/armeabi/libmonodroid.so 10-17 04:12:40.644 D/installd(35): DexInv: --- BEGIN '/data /app/Test.Droid-1.apk' --- 10-17 04:12:41.244 D/dalvikvm（615）：DexOpt：加载 174ms，验证 178ms，选择 6ms 10-17 04:12:41.304 D/installd ( 35): DexInv: --- END '/data/app/Test.Droid-1.apk' (success) --- 10-17 04:12:41.304 D/PackageManager( 60): 注册内容提供者: 测试.Droid.mono.MonoRuntimeProvider。apk 已更改；解包 10-17 04:12:40.534 D/PackageManager(60): 缓存共享库 lib/armeabi/libmonodroid.so 10-17 04:12:40.644 D/installd(35): DexInv: --- BEGIN '/data /app/Test.Droid-1.apk' --- 10-17 04:12:41.244 D/dalvikvm（615）：DexOpt：加载 174ms，验证 178ms，选择 6ms 10-17 04:12:41.304 D/installd ( 35): DexInv: --- END '/data/app/Test.Droid-1.apk' (success) --- 10-17 04:12:41.304 D/PackageManager( 60): 注册内容提供者: 测试.Droid.mono.MonoRuntimeProvider。**mono_init**，className = mono.MonoRuntimeProvider，isSyncable = false 10-17 04:12:41.304 D/PackageManager（60）：提供者：mono.MonoRuntimeProvider 10-17 04:12:41.304 D/PackageManager（60）：接收者：mono.android .Seppuku 10-17 04:12:41.304 D/PackageManager（60）：活动：Test.droid.SplashScreenActivity Test.droid.views.EmployeeView Test.droid.views.OfficeView 10-17 04:12:41.324 I/ActivityManager（ 60): 强制停止包 Test.Droid uid=10045 10-17 04:12:41.496 I/installd(35): move /data/dalvik-cache/data@app@Test.Droid-1.apk@classes.dex -> /data/dalvik-cache/data@app@Test.Droid-1.apk@classes.dex 10-17 04:12:41.496 D/PackageManager(60): 新包安装在 /data/app/Test. Droid-1.apk 10-17 04:12:41.926 D/dalvikvm（60）：GC_EXPLICIT 在 202 毫秒内释放了 6613 个对象/458712 个字节 10-17 04:12:41.926 D/AndroidRuntime（608）：关闭 VM 10-17 04:12:41.964 D/jdwp（608）：adbd 断开连接 10-17 04:12:41.994 D/VoiceDialerReceiver（265）：onReceive Intent { act=android.intent.action.PACKAGE_ADDED dat=package ：Test.Droid flg=0x10000000 cmp=com.android.voicedialer/.VoiceDialerReceiver（有附加功能）} 10-17 04:12:41.994 V/RecognizerEngine（265）：deleteCachedGrammarFiles /data/data/com.android.voicedialer/files /openentries.txt 10-17 04:12:42.016 I/dalvikvm（608）：JNI：AttachCurrentThread（来自???.???）10-17 04:12:42.016 I/AndroidRuntime（608）：注意：附加线程 'Binder Thread #3' 失败 10-17 04:12:42.074 W/RecognitionManagerService（60）：找不到可用的语音识别服务 10-17 04:12:42.934 D/AndroidRuntime（626）：10-17 04： 12:42.934 D/AndroidRuntime（626）：>>>>>>>>>>>>>>AndroidRuntime 开始 <<<<<<<<<<<<< 10-17 04:12:42.934 D/AndroidRuntime（626）：CheckJNI 开启 10-17 04:12:43.064 D/AndroidRuntime（626）：- -- 注册本机函数 --- 10-17 04:12:43.614 I/ActivityManager(60)：开始活动：Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=Test.Droid/Test.droid。 SplashScreenActivity } 10-17 04:12:43.824 D/AndroidRuntime（626）：关闭 VM 10-17 04:12:43.854 D/jdwp（626）：adbd 已断开连接 10-17 04:12:43.864 I/ActivityManager（60 ): 为活动 Test.Droid/Test.droid.SplashScreenActivity 启动 proc Test.Droid: pid=632 uid=10045 gids={3003, 1015} 10-17 04:12:44.224 I/WindowManager(60): 将旋转设置为1、animFlags=1 10-17 04:12:44.224 I/ActivityManager(60): 配置改变：{ scale=1.0 imsi=310/260 loc=en_US touch=3 keys=1/1/2 nav=3/1 orien=2 layout=35 uiMode=17 seq=16} 10-17 04:12:44.564 I/ActivityThread(632 ): 发布提供者 Test.Droid.mono.MonoRuntimeProvider。**mono_init**：mono.MonoRuntimeProvider 10-17 04:12:44.584 D/dalvikvm（632）：尝试加载 lib /data/data/Test.Droid/lib/libmonodroid.so 0x44f51e18 10-17 04:12:44.584 D/dalvikvm（ 632）：添加共享库 /data/data/Test.Droid/lib/libmonodroid.so 0x44f51e18 10-17 04:12:44.834 W/MonoDroid-Debugger（632）：尝试使用选项初始化调试器：--debugger- agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8909,server=y,embedding=1 10-17 04:12:44.884 W/MonoDroid-Debugger(632)：接受的标准输出连接：29 10-17 04：12：45.724 E/mono（632）：警告：此应用程序支持的运行时版本不可用。10-17 04:12:45.724 E/mono（632）：使用默认运行时：v2.0.50727 10-17 04:12:48.644 W/monodroid-gc（632）：GREF GC 阈值：1800 10-17 04:12 ：49.300 W/WindowManager（60）：应用程序冻结超时已过期。10-17 04:12:49。300 W/WindowManager（60）：强制清除冻结：AppWindowToken{4514e258 token=HistoryRecord{450ac4f8 Test.Droid/Test.droid.SplashScreenActivity}} 10-17 04:12:51.495 D/dalvikvm（60）：GC_EXPLICIT 释放了 4408 个对象/ 254344 bytes in 129ms 10-17 04:12:53.635 W/ActivityManager(60): 启动超时已过期，放弃唤醒锁！10-17 04:12:54.454 W/ActivityManager（60）：HistoryRecord{450ac4f8 Test.Droid/Test.droid.SplashScreenActivity} 的活动空闲超时 10-17 04:12:55.875 I/ActivityManager（60）：显示的活动测试.Droid/Test.droid.SplashScreenActivity：12050 毫秒（总共 448199 毫秒）10-17 04:12:57.884 I/mvx（632）：3.23 设置：约定开始 10-17 04:12:58.404 I/mono-stdout( 632）：mvx：诊断：3.23 设置：约定开始 10-17 04:12:58.504 I/mvx（632）：4.08 设置：应用程序开始 10-17 04:12:58。二级端 10-17 04:12:58.954 I/Navigation（632）：4.53 使用 args 导航到 OfficeViewModel 10-17 04:12:58.954 I/mono-stdout（632）：导航：诊断：4.53 使用 args 导航到 OfficeViewModel 10-17 04:13:01.354 I/ActivityManager（60）：开始活动：Intent { flg=0x10000000 cmp=Test.Droid/Test.droid.views.OfficeView（有附加功能）} 10-17 04:13:11.365 W /ActivityManager(60): 启动超时，放弃唤醒锁！10-17 04:13:11.454 W/ActivityManager（60）：HistoryRecord{450c5c18 Test.Droid/Test.droid.views.OfficeView} 的活动空闲超时 10-17 04:13:16.695 D/dalvikvm（314）：GC_EXPLICIT在 170 毫秒内释放 152 个对象/7136 个字节 10-17 04:13:21.494 W/ActivityManager（60）：HistoryRecord{450ac4f8 Test.Droid/Test.droid.SplashScreenActivity} 的活动销毁超时 10-17 04:13:21.754 D/达尔维克（333）：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T10:55:46.227

我也有同样的问题。[我在https://github.com/slodge/NPlus1DaysOfMvvmCross](https://github.com/slodge/NPlus1DaysOfMvvmCross)中测试了任何 github 样本，回复同样的错误。

另一方面，我测试了一个 monodroid 应用程序，没有使用这个框架并且没有这个循环错误。

我也使用2.2 android。我在 android 4.0 中尝试相同的项目并且循环持续存在。

# java - 我正在尝试从文本中提取语义信息

> ID：12795191
> 
> 赞同：0
> 
> 时间：2012-10-09T07:46:00.883
> 
> 标签：java, nlp, semantics, jaws-wordnet

我正在使用java。

到目前为止，我已经实现了句子检测器、标记器，并且我正在使用 WORDNET LIBRARY（通过 JAWS api）来查找单词的各种含义。

基本上我想提取句子的语义/上下文，以便它可以用于更好的搜索引擎结果。

请分享您认为对我有帮助的任何信息、任何工具、api 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:59:10.787

虽然我看到通过您对 WORDNET 的使用，您正在采用本体论方法进行语义分析，但我只想说，通过简单地查看相对共现，已经取得了良好的结果（不仅是我自己，而且是谷歌和维基百科）单词的数量，即它们彼此接近使用的频率，并由此暗示它们在含义上有所关联。

例如使用[潜在语义分析](http://en.wikipedia.org/wiki/Latent_semantic_analysis)

我不是想把你推向任何方向，几年前我刚刚发现自己处于类似的位置，并且通过上述方法取得了成功。

祝你好运

# java - 正则表达式匹配如何工作？

> ID：12795195
> 
> 赞同：2
> 
> 时间：2012-10-09T07:46:18.327
> 
> 标签：java, regex

这个问题是从这个论坛的另一个问题衍生而来的，我认为这个问题很简单，但最后发现了一个困难的问题。

OP 要求用 some替换`xyz`所有子字符串中的任何文本。我做了以下事情：`<tagname>xyz</tagname>``NEW TEXT`

```
String str="<tagname>bgerh</tagname>sdfghuhjg<tagname>bgew</tagname>rwesdgrhtf<tagname>bfgh</tagname>";

System.out.println(str.replaceAll("(?<=(<tagname>)).*(?=(</tagname>))","NEW TEXT")); 
```

我得到的输出：

```
<tagname>NEW TEXT</tagname> 
```

这显然不是想要的。

所以，我想知道正则表达式检查是否发生在字符串的两端，我会对这个例子的解决方案感到高兴。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T07:50:00.633

`.*`是一个贪婪的量词，这意味着它将匹配它所能匹配的一切。因为您的示例字符串以 开头`<tagname>`和结尾`</tagname>`，所以介于两者之间的所有内容都将由 匹配`.*`。

要解决此问题，您可以改用不情愿的量词，它只会尽可能少地抓取。不情愿的限定符看起来像这样：`.*?`，因此整个表达式看起来像这样：

```
"(?<=<tagname>).*?(?=</tagname>)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:54:51.973

我通常会通过`<`从正则表达式的内部排除来做到这一点。像：

```
(?<=<tagname>)[^<]*(?=</tagname>) 
```

# c++ - 清除指针向量

> ID：12795196
> 
> 赞同：51
> 
> 时间：2012-10-09T07:46:26.130
> 
> 标签：c++, pointers, memory-leaks, vector

假设我已经定义了一个这样的类：

```
 class foo {
 private: 
    std::vector< int* > v;
 public:
    ...
    void bar1()
    {
       for (int i = 0; i < 10; i++) {
         int *a = new int;
         v.push_back( a );
       }
    };

    void bar2()
    {
       std::vector< int >::iterator it = v.begin();
       for ( ; it != v.end(); it++ )  
         std::cout << (*it);
       v.clear();
    }
 }; 
```

简而言之，我推回向量中的一些指针，然后清除向量。问题是，这段代码有内存泄漏吗？我的意思是通过清除向量，是否正确删除了指针？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-09T07:48:05.410

是的，除非您删除指针，否则代码存在内存泄漏。如果`foo`类拥有指针，则删除它们是它的责任。您应该在清除向量之前执行此操作，否则您会丢失需要取消分配的内存的句柄。

```
 for (auto p : v)
   {
     delete p;
   } 
   v.clear(); 
```

`std::vector`您可以通过使用合适的[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)来完全避免内存管理问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-10-01T16:06:04.717

我认为最短和最清晰的解决方案是：

```
std::vector<Object*> container = ... ;
for (Object* obj : container)
    delete obj;
container.clear(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-09T07:48:36.033

不，您只清除矢量存储。带有“新”的分配内存仍然存在。

```
for (int i =0; i< v.size();i++)
   {
     delete (v[i]);
   } 
   v.clear(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-09T07:52:54.377

您可以使用`for_each`：

```
std::vector<int*> v;

template<typename T>
struct deleter : std::unary_function<const T*, void>
{
  void operator() (const T *ptr) const
  {
    delete ptr;
  }
};

// call deleter for each element , freeing them
std::for_each (v.begin (), v.end (), deleter<int> ());
v.clear (); 
```

# javascript - 允许与数据库交互的 DataGrid

> ID：12795197
> 
> 赞同：0
> 
> 时间：2012-10-09T07:46:28.887
> 
> 标签：javascript, jquery, ajax, jsp

我正在寻找从数据库中检索信息以及以下功能的 Datagrid。

1.  应该与 JSP 一起使用
2.  提供添加、编辑和删除选项
3.  保存到数据库
4.  从excel文件中读取。

如果你们中的任何人使用任何基于 Ajax、Javascript 的数据网格成功地实现了具有上述功能的 Datagrid，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:50:48.870

那里有很多东西。我将开始使用 DataTables - [http://www.datatables.net](http://www.datatables.net)

我已经使用了很多并且喜欢它，有一个处理 CRUD 的付费选项 - [http://editor.datatables.net/](http://editor.datatables.net/)如果您不想自己滚动

它不会直接从 Excel 工作表中读取，您需要从其中传递格式正确的数据

# html - 如何制作一个带有纹理的球体？

> ID：12795203
> 
> 赞同：1
> 
> 时间：2012-10-09T07:46:51.417
> 
> 标签：html, three.js

> **可能重复：**
> [如何使材质显示在球体上](https://stackoverflow.com/questions/12781476/how-do-i-make-a-material-show-up-on-a-sphere)

```
// set the scene size
var WIDTH = 1650,
    HEIGHT = 700;

// set some camera attributes
var VIEW_ANGLE = 100,
    ASPECT = WIDTH / HEIGHT,
    NEAR = 0.1,
    FAR = 10000;

// get the DOM element to attach to
// - assume we've got jQuery to hand
var $container = $('#container');

// create a WebGL renderer, camera
// and a scene
var renderer = new THREE.WebGLRenderer();
var camera = new THREE.PerspectiveCamera(  VIEW_ANGLE,
                                ASPECT,
                                NEAR,
                                FAR  );

//camera.lookAt(new THREE.Vector3( 0, 0, 0 ));

var scene = new THREE.Scene();

// the camera starts at 0,0,0 so pull it back
camera.position.x = 200;
camera.position.y = 200;
camera.position.z = 300;

// start the renderer
renderer.setSize(WIDTH, HEIGHT);

// attach the render-supplied DOM element
$container.append(renderer.domElement);

// create the sphere's material
var sphereMaterial = new THREE.MeshLambertMaterial(
{
    color: 0xCC0000
}); 
```

我认为这是问题所在... Frome here...

```
 var sphereGeo, sphereTex, sphereMat, sphereMesh;
var radius = 60, segments = 20, rings = 20;

sphereGeo = new THREE.SphereGeometry(radius, segments, rings);
sphereTex = THREE.ImageUtils.loadTexture('cube.png', null, function () {
    sphereMat = new THREE.MeshBasicMaterial({map: sphereTex});
    sphereMesh = new THREE.Mesh(sphereGeo, sphereMat);
    scene.add(sphereMesh);
}); 
```

到这里……对吧？

```
// and the camera
scene.add(camera);

// create a point light
var pointLight = new THREE.PointLight( 0xFFFFFF );

// set its position
pointLight.position.x = 50;
pointLight.position.y = 100;
pointLight.position.z = 180;

// add to the scene
scene.add(pointLight);

// add a base plane
var planeGeo = new THREE.PlaneGeometry(500, 500,8, 8);
var planeMat = new THREE.MeshLambertMaterial({color: 0x666699});
var plane = new THREE.Mesh(planeGeo, planeMat);

plane.position.x = 160;
plane.position.y = 0;
plane.position.z = 20;

//rotate it to correct position
plane.rotation.x = -Math.PI/2;
scene.add(plane);

// add 3D img

var img = new THREE.MeshBasicMaterial({
    map:THREE.ImageUtils.loadTexture('cube.png')
});
img.map.needsUpdate = true;

// draw!
renderer.render(scene, camera); 
```

我想在我的球体上添加我的 img 纹理......现在它只是一个黑色的平面，球确实出现了，但它没有纹理，所以你看不到它......我如何在球体上获得纹理？

# email - 有没有办法在不发送测试邮件的情况下测试电子邮件地址是否存在？

> ID：12795209
> 
> 赞同：6
> 
> 时间：2012-10-09T07:47:24.380
> 
> 标签：email, smtp

> **可能重复：**
> [如何在不发送电子邮件的情况下检查电子邮件地址是否存在？](https://stackoverflow.com/questions/565504/how-to-check-if-an-email-address-exists-without-sending-an-email)

我试图找到某种方法来测试电子邮件地址是否确实存在而不发送测试邮件。

可以验证电子邮件地址，但不能保证该地址是否真的存在。像

```
abc@example.com 
```

有没有办法避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T07:50:06.327

简短的回答是否定的 - 验证它是否存在的唯一方法是连接到邮件服务器并向其发送电子邮件。

更多信息：[我可以使用 .net 检查电子邮件地址是否存在？](https://stackoverflow.com/questions/3883518/can-i-check-if-an-email-address-exists-using-net)

“SMTP 为此定义了一个命令，但由于垃圾邮件发送者的滥用完全超过了合法使用的数量，因此世界上几乎每个电子邮件服务器都被配置为撒谎。”

另一个类似的问题：[如何在不发送电子邮件的情况下检查电子邮件地址是否存在？](https://stackoverflow.com/questions/565504/how-to-check-if-an-email-address-exists-without-sending-an-email/566121#566121)

# streaming - 在 flowplayer 中播放 MP4 视频之前有很长的延迟

> ID：12795210
> 
> 赞同：4
> 
> 时间：2012-10-09T07:47:27.000
> 
> 标签：streaming, delay, flowplayer

我网站上的 Flowplayer 在 (.flv) 格式下运行良好，但对于 (.mp4) 格式，它首先下载整个文件，然后开始流式传输。有什么解决办法吗？我是否必须对 flowplayer 的设置进行一些更改，或者甚至存在针对此问题的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:21:42.413

我遇到了和你一样的问题，幸运的是找到了原因和解决方法：

> 随着支持 H.264 的 Flash Player 9 更新的发布，我们现在可以播放 H.264 电影文件的子集。问题是大多数 H.264 文件在文件末尾都有索引，对于渐进式下载意味着您​​必须先下载整个文件才能开始观看任何视频。

还有一个[Air 应用程序 -](http://renaun.com/blog/code/qtindexswapper/)由 Renaun Erickson 编写的 QTIndexSwapper 解决了这个问题。这样可行！

# jquery - 如何在导出功能中将自定义图例添加到 Highstock 中的图形 SVG？

> ID：12795211
> 
> 赞同：0
> 
> 时间：2012-10-09T07:47:30.697
> 
> 标签：jquery, highcharts, highstock

我有一个带有自定义图例框和复选框的 Highstock 图表。每件事都很好。但是当我尝试以任何格式（即“ **png、jpeg、pdf** ”）导出图表时，图例框没有显示。这是我的 HTML 代码：

```
 <!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highstock Example</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
$(function() {
     $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=range.json&callback=?', function(data) {
        // Create the chart     
        var options = {
            chart : {
                renderTo : 'container',
                plotBorderWidth: 1,
                marginRight: 130
            },

            rangeSelector : {
                selected : 1,
                inputEnabled: false
            },
            yAxis: {
                offset: 2,
                labels: {
                    align: 'right',
                    x: -8,
                    y: 6
                },
                showLastLabel: true,
                allowDecimals: false
            },

            title : {
                text : 'AAPL Stock Price'
            },
            legend: {
                enabled : false,
                align: 'right',
                verticalAlign: 'top',
                layout: 'vertical',
                borderWidth: 0,
                backgroundColor: '#e6e6e6',
                itemMarginTop: 5,
                itemMarginBottom: 5,
                lineHeight: 20,
                borderRadius: 0,
                symbolWidth: -1,
                symbolPadding: 20,
                itemWidth: 100,
                y: -10              
            },
            credits: {
                enabled: false
            },

            series : [{
                name : 'AAPL',
                data : data,
                tooltip: {
                    valueDecimals: 2
                }
            }]
    };

    var chart1 = new Highcharts.StockChart(options);
    var legendOptions = chart1.options.legend;
    function clickItem(series, $line) {
        series.setVisible();
        $line.css({
            borderTop: '0px solid '+ (series.visible ? series.color :
                legendOptions.itemHiddenStyle.color)
        });
    }
    // Create the legend box
    var $legend = $('<div>')
    .css({
        width: 100,
        maxHeight: 100,
        padding: '10px 6px',
        position: 'absolute',
        overflow: 'auto',
        right: 5,
        top: 65,
        background: '#e6e6e6',
        'z-index': '1'
    })
    .insertBefore(chart1.container);

    jQuery.each(chart1.series, function(i, series) {
        // crete the legend item
        var pageName = series.name.split(/[\s]+/);
        var $legendItem = $('<div>')
        .css({
            position: 'relative',
            marginLeft: 20,
            marginBottom: 10,
            color: series.color
        })
        .html(pageName[0])
        .appendTo($legend);

        // create the line with each series color
        var $line = $('<div>')
        .html('<input type="checkbox" checked="checked"/>')
        .css({
            width: 16,
            position: 'absolute',
            left: -24,
            top: -6
        })
        .appendTo($legendItem);

        // click handler
        $legendItem.click(function() {
            clickItem(series, $line);
        });

    });
});
});

    </script>
</head>
<body>
    <script src="../../js/highstock.js"></script>
    <script src="../../js/modules/exporting.js"></script>

    <div id="container" style="height: 500px; min-width: 500px"></div>
</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:04:53.520

我在您的代码中看到了两件事：

1) 您已经使用 Highstock.js 的相同代码在外部创建了图例

2) 您还添加了预览系列作为图例项目。

Highstock`exporting.js`用于导出图表。

它有一个方法`exportChart`并使用它调用的方法`chart.getSVG`。我对此表示怀疑，因为您的传说不是其中的一部分，因此只有图表会被导出。

它适用于Highstock 库中给出的[示例。](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/legend/align/)

我建议使用`showCheckbox : true`系列选项启用图例中的复选框。

然后，对于图例中的预览系列，您可以在代码中添加您的 hack。

# ruby - 断言布尔方法有什么意义？

> ID：12795222
> 
> 赞同：1
> 
> 时间：2012-10-09T07:48:06.780
> 
> 标签：ruby, rspec

昨天我和我的一个朋友讨论这个问题，我们没有得出结论。在测试时，在我们使用 RSpec 的情况下，布尔方法，我想知道使用的意义是什么：

```
it 'should process the payment' do
    payment.processed?.should eq(true)
end 
```

该步骤必须检查付款是否已处理，所以我只是去了：

```
it 'should process the payment' do
    payment.processed?
end 
```

现在，我可能错了，但是，步骤在某种程度上就像你希望它们返回 true 的布尔方法，所以我想知道检查“true 为 true”有什么意义，我的意思是你已经在那里得到了 true，对吗？

所以你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:00:10.287

[指定布尔方法（任意谓词](http://rspec.rubyforge.org/rspec/1.1.9/classes/Spec/Matchers.html)）的惯用方式是：

```
it 'should process the payment' do
  payment.should be_processed
end 
```

请注意，您的第二个片段不会调用 rspec 期望，因此它不会测试任何东西（除了代码已成功执行）。我认为您假设一个`it`块检查其返回值，但事实并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:07:57.280

```
 it "should process the payment" do
  payment.should be_processed
end 
```

当你有一个匹配器时`be_xxx`（除非有更具体的设置）rspec 将检查它`subject.xxx?`是否真实。

如果您的规范中没有调用 should 那么您没有测试任何内容：如果已处理？返回 false 规范将通过

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T08:10:20.127

步骤不是期望返回 true 的布尔方法。所有动作都发生在`should`方法内——它执行测试并确定成功或失败。

这就是为什么你可以`should`在一个块中有多个 s `it`（尽管如果可以避免的话，通常最好不要这样做）。

例如：

```
it "doesn't use return values" do
  false.should be_true  # the test fails immediately here
  true.should be_true   # this never gets called
end 
```

我还建议重写以使用`be_processed`tokland 建议的方法。

# c++ - 如何在 C++ 中确定数字的十位数字

> ID：12795225
> 
> 赞同：3
> 
> 时间：2012-10-09T07:48:19.867
> 
> 标签：c++

> **可能重复：**
> [如何在不将其转换为字符串/字符数组的情况下获取数字的数字？](https://stackoverflow.com/questions/1397737/how-to-get-the-digits-of-a-number-without-converting-it-to-a-string-char-array)

我被困在 C++ 中做这个任务；我想要做的是找出用户给出的任何数字的个位和十位。

例如，如果数字是 9775，则获得的个位为`9775 % 10`，但我无法找到十位数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T07:50:45.297

对于非负整数 x，十位数是`(x / 10) % 10`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T08:02:59.567

```
#include <math.h>

int getdigit(int number, int digit)
{
   return (number / ((int) pow(10, digit)) % 10);
} 
```

第一个数字是 0。不过，我真的不喜欢浮点数参与（通过 pow）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T08:40:04.113

尝试使用很少使用的函数：

[http://www.cplusplus.com/reference/clibrary/cstdlib/div/](http://www.cplusplus.com/reference/clibrary/cstdlib/div/)

```
 div_t div (           int numer,           int denom );
 ldiv_t div (      long int numer,      long int denom );  // C++ only
lldiv_t div ( long long int numer, long long int denom );  // C++11 only 
```

例如，一个简单的循环：

```
std::vector<int> getDigits(unsigned int numer)
{
  std::deque<int> rv;
  do {
     div_t res = div(numer, 10);
     rv.push_front(res.rem);
     numer = res.quot;
  } while (numer > 0);
  return std::vector<int>(rv.begin(), rv.end());  
} 
```

# php - Jquery单选按钮不显示选定的div

> ID：12795226
> 
> 赞同：0
> 
> 时间：2012-10-09T07:48:32.070
> 
> 标签：php, jquery, html

我正在使用 jquery 在选择时显示 div 存储到数据库

```
<script type="text/javascript"> 
    jQuery(document).ready(function(){

        jQuery("input[name$='advert_specifications[link_type]']").click(function(){

            var radio_value = jQuery(this).val();

            if(radio_value=='advert_page') {
                jQuery("#urlbox").hide('fast');
            }
            else if(radio_value=='external_link') {
                jQuery("#urlbox").show('fast');
            }
        });

        jQuery("#urlbox").hide();

    }); 
</script>

<div class="my_meta_control">

    <!--[advert link type group]-->
    <div class="left side clearfix">
        <label class="left sub_label"><input type="radio" value="advert_page" name="advert_specifications[link_type]"> Page Link</label>        
        <label class="left sub_label"><input type="radio" checked="checked" value="external_link" name="advert_specifications[link_type]"> External Link</label>
    </div>
    <!--[end of advert link type group]-->

    <div id="urlbox" style="display: none;">            
        <p class="sidebox clearform">
            <label>Advert External Link</label>     
            <input type="text" class="mydatepicker" value="" name="advert_specifications[advert_url]" id="advertdate">
        </p>
    </div>

</div> 
```

它在点击功能上工作正常，但是一旦我选择外部链接单选并保存到数据库而不是重新打开帖子，如果选择了外部链接单选按钮，#urlbox 总是隐藏在它应该可见的位置。

编辑：

我尝试了这段代码，它`# + test`在加载时隐藏了 div

```
jQuery(document).ready(function() {
    jQuery("div.links").hide();
    jQuery("input[name$='advert_specifications[link_type]']").click(function() {
        var test = jQuery(this).val();
        jQuery("div.links").hide();
        jQuery("#" + test).show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:25:36.400

根据我在您的主脚本中的理解，您隐藏了主块。虽然它不需要，因为您已经在说在您的标记中显示 none。

请检查 jsfiddle 链接

**演示**

[http://jsfiddle.net/saorabhkr/DFPAX/](http://jsfiddle.net/saorabhkr/DFPAX/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T07:53:07.883

它将始终隐藏，因为您已经编写了代码来隐藏脚本标记的倒数第二行中的框（#urlbox）。页面加载时将始终执行。

# wicket - Wicket 是否具有内置的本地存储支持

> ID：12795227
> 
> 赞同：1
> 
> 时间：2012-10-09T07:48:33.940
> 
> 标签：wicket, local-storage

我们可以使用 javascript 的本地存储

但是 wicket 是否提供任何有助于本地存储的类？

在 GWT 中我们可以直接写

```
Storage.getLocalStorageIfSupported().setItem("user", result.getUserName()); 
```

那么wicket提供这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:55:45.723

Wicket 并不是开箱即用的。从事物的服务器端添加这样的支持将是一些工作：Wicket 主要是一个服务器端框架。可能您可以`AjaxRequestTarget`使用该`appendJavaScript`方法附加本地存储事件。

[也许https://github.com/wicketstuff/core](https://github.com/wicketstuff/core)的 1000 个项目之一提供了一种实现。

# sql - 在sql中使用like，通配符获取模式

> ID：12795229
> 
> 赞同：0
> 
> 时间：2012-10-09T07:48:41.040
> 
> 标签：sql, pattern-matching, wildcard, sql-like

我有两列访问和访问序列，

```
Example table

Visit         Visit_sequence
1             43:65:34:21:343
2             22:78:113:37
3             43:465:72:21:1187:542

The semi colon is present in the field. 
```

现在如果我想检查一个访问是否有包含数字 43、65 和 21 的访问序列。我应该使用什么条件（最短条件）？

如果我写

```
 case when visit_sequence like '%:43:%:65:%:21:%' 
```

或者

```
 case when visit_sequence like '%43%:%65%:%21%' 
```

这些肯定行不通。我不需要整个代码，只需要`like`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:52:14.593

```
select *
  from visits
 where ':'+visit_sequence+':' like '%:43:%'
   and ':'+visit_sequence+':' like '%:65:%'
   and ':'+visit_sequence+':' like '%:21:%' 
```

我希望你有一个小表，因为你的非规范化存储格式不会因为这个问题而抛出任何类型的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T01:54:41.630

如果您使用 ORACLE， 请尝试[REGEXP_LIKE](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)

```
 select *
  from visits
  where REGEXP_LIKE (visit_sequence, '43:.*65:.*21') 
```

# haskell - 使用 ReaderT 和 StateT Monads 将函数拼接在一起

> ID：12795230
> 
> 赞同：1
> 
> 时间：2012-10-09T07:48:41.337
> 
> 标签：haskell, monad-transformers, state-monad

我从 Haskell 开始，我需要帮助使用`ReaderT`和`StateT`Monads 将函数拼接在一起。

理想情况下，如果可能的话，所有函数都将具有相同的签名（我理解那些 Monad 应该提供帮助），并且能够读取环境并更改状态。

下面的代码应该`openClientSocket`使用初始环境简单地打开一个 Socket ，在链中`initialNetwork`注入`socket`and ，然后调用作为参数传递的“下一个”函数（在这种情况下是函数）。`address``func``sendMsg`

但是我面临多个问题：

*   a）我应该如何调用传入`func`的`openClientConnection`？

*   b) `HNT`Monad 与其他 Monad 组成（？）。我如何阅读和操作内部 Monads ？

那么有人可以帮我修复这段代码，如果可能的话，派生/解释“理想”模式以实现主题中描述的目标。

非常感谢

湾。

```
import Control.Monad.Reader
import Control.Monad.State

import Network.Socket
import Network.Multicast

_MULTICAST_IP_ADDR_ :: HostName
_MULTICAST_IP_ADDR_ = "224.0.0.99"

_MULTICAST_PORT_ :: PortNumber
_MULTICAST_PORT_ = 9999

data NetworkEnv = NetworkEnv {
    getMulticastIP :: HostName,
    getMulticastPort :: PortNumber
} deriving (Show)
type NetworkEnvT = ReaderT NetworkEnv

data ClientSocket = ClientSocket { 
    getClientSocket :: Socket, 
    getAddress:: SockAddr 
} deriving (Show)
type ClientSocketT = StateT ClientSocket

type HNT m = ClientSocketT (NetworkEnvT m)

initialNetwork :: NetworkEnv
initialNetwork = NetworkEnv { getMulticastIP = _MULTICAST_IP_ADDR_, getMulticastPort = _MULTICAST_PORT_ } 

openClientConnection :: HNT m a -> m a 
openClientConnection func = do
    env <- ask
    (sock, addr) <- liftIO $ multicastSender (getMulticastIP env) (getMulticastPort env)
    put $ ClientSocket sock addr
    func   -- <== How do I call func (sendMsg) here ??

sendMsg :: String -> HNT IO ()
sendMsg msg = do
    NetworkEnv ip port <- ask
    ClientSocket sock addr <- get
    _ <- liftIO $ sendTo sock msg addr
    liftIO $ print "done"

doRun = runReaderT ( openClientConnection . (sendMsg "Hello") ) initialNetwork 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:36:33.100

我管理了下面的解决方案；我确信它可以改进并且错误处理没有完全到位，但它确实遵守合同。

从我所有的阅读中，真正帮助我的是Martin Grabmüller 的[这篇论文](https://web.archive.org/web/20140821053740/https://www.grabmueller.de/martin/www/pub/Transformers.en.html)，并意识到程序**在**Monad 中运行：它不是函数调用的参数（多年的 OO 编程和注入调用）

```
import Control.Monad.Reader
import Control.Monad.State
import Control.Monad.Writer
import Control.Monad.Error

import Network.Socket
import Network.Multicast

_MULTICAST_IP_ADDR_ :: HostName
_MULTICAST_IP_ADDR_ = "224.0.0.99"

_MULTICAST_PORT_ :: PortNumber
_MULTICAST_PORT_ = 9999

data NetworkEnv = NetworkEnv {
    getMulticastIP :: HostName,
    getMulticastPort :: PortNumber
} deriving (Show)

data ClientSocket = ClientSocket { 
    getClientSocket :: Socket, 
    getAddress:: SockAddr 
} deriving (Show)

type HNError = String
type LogMessages = [String]

type HNT a = ReaderT NetworkEnv (ErrorT HNError (WriterT LogMessages (StateT ClientSocket IO))) a

runHNT :: ClientSocket -> NetworkEnv -> HNT a -> IO( (Either HNError a, LogMessages), ClientSocket) 
runHNT st env app = runStateT (runWriterT ( runErrorT (runReaderT app env) )) st

initialNetwork :: NetworkEnv
initialNetwork = NetworkEnv { getMulticastIP = _MULTICAST_IP_ADDR_, getMulticastPort = _MULTICAST_PORT_ }

initialState :: ClientSocket
initialState = ClientSocket undefined undefined

openClientConnection :: HNT ()
openClientConnection = do
    env <- ask
    (sock, addr) <- liftIO $ multicastSender (getMulticastIP env) (getMulticastPort env)
    put $ ClientSocket sock addr

sendMsg :: String -> HNT ()
sendMsg msg = do
    ClientSocket sock addr <- get
    _ <- liftIO $ sendTo sock msg addr
    tell ["Sent " ++ msg ++ " to socket" ]

myApp :: HNT ()
myApp = do
    env <- ask
    liftIO $ print (show env)

doRun :: IO ((Either HNError (), LogMessages), ClientSocket)
doRun = runHNT initialState initialNetwork ( openClientConnection >> sendMsg "Hello" >> myApp ) 
```

# mysql - 使用表格中的数据作为列标题

> ID：12795231
> 
> 赞同：1
> 
> 时间：2012-10-09T07:48:53.287
> 
> 标签：mysql, sql

我有一个包含两个表 component_psar 和 tbl_info 的数据库。component_psar 表具有字段“tbl_id”，该字段引用 tbl_info 中相应的“id”字段。

我需要编写一个查询，其中的数据取自 tbl_info，并用作 component_psar 中该列的标题。

因此，如果 component_psar 表包含数据：

```
tbl_id | col_1
1 | 你好
1 | 你好
1 | 这是怎么回事？
```

然后是 tbl_info 表：

```
编号 | 标题
1 | 问候
```

我希望它显示为：

```
问候
你好
你好
这是怎么回事？
```

我编写了以下 SQL 查询来尝试完成此操作：

`SELECT component_psar.col_1 as (SELECT tbl_info.heading FROM tbl_info, component_psar WHERE tbl_info.id = '1') FROM tbl_info, component_psar WHERE (component_psar.tbl_id = '1')`

但这只会引发语法错误：

`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(SELECT tbl_info.heading FROM tbl_info, component_psar WHERE tbl_info.id = compo' at line 1`

任何人都可以就我如何做到这一点提供任何建议吗？查看其他问题使我阅读了数据透视表，但我还没有看到任何可能适用于我的目的的方式。也许我误解了它。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:24:30.303

我会尝试分离从数据库中检索数据并将其格式化以供显示的过程。

一个简单的内部连接应该适用于您的查询

```
select tbl_info.heading as Heading,component_psar.col_1 as Value 
from tbl_info 
inner join component_psar on component_psar.tbl_id = tbl_info.id
order by tbl_info.heading 
```

这将为您提供以下查询结果

```
Heading   | Value 
----------+--------------
Greetings |  Hello
Greetings |  Hi
Greetings |  What's up? 
```

您如何处理此显示取决于您的编程环境。

如果您只是打印到屏幕上，则以下伪代码将显示如何仅在标题更改时打印标题

```
current_heading = ""
for each row in results
    if row.heading not equal to current_heading   
        current_heading  = row.heading
        print blank line 
        print current_heading 
    end if
    print row.value
loop 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T08:09:52.573

在 MS SQL 中，可以实现如下：

```
 declare @sql nvarchar(max)
declare @col_name varchar(100)
select @col_name = heading from tbl_info where heading = 'greetings'
set @sql = 'select col_1 as ' + quotename(@col_name) + ' from component_psar'
exec(@sql) 
```

然而，这个解决方案是一个代码片段，而不是一个单一的查询。

# java - 在 Java 中实现多消费者多生产者的问题

> ID：12795234
> 
> 赞同：3
> 
> 时间：2012-10-09T07:48:57.810
> 
> 标签：java, multithreading, producer-consumer, blockingqueue

我写了一个简单的消费者-生产者问题，它有一个阻塞队列，有多个生产者，多个消费者获取和放入队列中的整数。但是，当我尝试对其进行测试时，结果并不理想，例如队列的大小不正确。我不认为消费者和生产者的规模是同步的。此外，我对生产者和消费者都设置了 2 秒的睡眠时间，但在测试时，它每两秒打印出 2 个生产者和 2 个消费者的结果。有谁知道我做错了什么？也许我启动线程错误？我评论了另一种方法，但结果仍然是错误的。

结果：

```
run:
Producing 425     Thread-0 size left 0
Consuming 890     Thread-3 size left 0
Consuming 425     Thread-2 size left 0
Producing 890     Thread-1 size left 0
Consuming 192     Thread-2 size left 0
Consuming 155     Thread-3 size left 0
Producing 155     Thread-1 size left 0
Producing 192     Thread-0 size left 0
Consuming 141     Thread-2 size left 1
Producing 141     Thread-0 size left 0
Producing 919     Thread-1 size left 0
Consuming 919     Thread-3 size left 0
Producing 361     Thread-1 size left 0
Producing 518     Thread-0 size left 0
Consuming 518     Thread-3 size left 0
Consuming 361     Thread-2 size left 0
Producing 350     Thread-0 size left 1
Consuming 350     Thread-3 size left 0
Consuming 767     Thread-2 size left 0
Producing 767     Thread-1 size left 0 
```

制片人

```
import java.util.Random;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Producer implements Runnable {

    BlockingQueue<Integer> items = new LinkedBlockingQueue<>();

    public Producer(BlockingQueue<Integer> q) {
        this.items = q;
    }

    private int generateRandomNumber(int start, int end) {
        Random rand = new Random();
        int number = start + rand.nextInt(end - start + 1);
        return number;
    }

    public void run() {
        for (int i = 0; i < 5; i++) {
            int rand = generateRandomNumber(100, 1000);
            try {
                items.put(rand);
                System.out.println("Producing " + rand + "     " + Thread.currentThread().getName() + " size left " + items.size());
                Thread.sleep(3000);
            } catch (InterruptedException ex) {
                Logger.getLogger(ProducerConsumer.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

消费者

```
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Consumer implements Runnable {

    BlockingQueue<Integer> items = new LinkedBlockingQueue<>();

    public Consumer(BlockingQueue<Integer> q) {
        this.items = q;
    }

    public void run() {
        while (true) {
            try {
                System.out.println("Consuming " + items.take() + "     " + Thread.currentThread().getName() + " size left " + items.size());
                Thread.sleep(3000);
            } catch (InterruptedException ex) {
                Logger.getLogger(ProducerConsumer.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

测试

```
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

public class ProducerConsumer {
    public static void main(String args[]) {
        BlockingQueue<Integer> items = new LinkedBlockingQueue<>();

        Producer producer = new Producer(items);
        Consumer consumer = new Consumer(items);
        Thread t1 = new Thread(producer);
        Thread t2 = new Thread(producer);
        Thread t3 = new Thread(consumer);
        Thread t4 = new Thread(consumer);
        /*
        Thread t1 = new Thread(new Producer());
        Thread t2 = new Thread(new Producer());
        Thread t3 = new Thread(new Consumer());
        Thread t4 = new Thread(new Consumer());
        */
        t1.start();
        t2.start();
        t3.start();
        t4.start();
    }
} 
```

**UPDATE: I tried to implement the reentrant lock but my program stops at the lock line. Any help?** Consumer

```
import java.util.concurrent.locks.ReentrantReadWriteLock;

public class Consumer implements Runnable { 

    //private BlockingQueue<Integer> items = new LinkedBlockingQueue<>(); 
    private MyBlockingQ items;

    public Consumer(MyBlockingQ q) { 
        this.items = q; 
    } 

    public void run() { 
        while (true) { 
            items.remove();
            //Thread.sleep(1000);
        }
    }
} 
```

Producer

```
import java.util.Random;

public class Producer implements Runnable {
    private MyBlockingQ items;
    public Producer(MyBlockingQ q) {
        this.items = q;
    }

    private int generateRandomNumber(int start, int end) {
        Random rand = new Random();
        int number = start + rand.nextInt(end - start + 1);
        return number;
    }

    public void run() {
        for (int i = 0; i < 5; i++) {
            int rand = generateRandomNumber(100, 1000);
            items.add(rand);
        }
    }
} 
```

MyBlockingQ (shared resouce)

```
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.locks.ReentrantReadWriteLock;
import java.util.logging.Level;
import java.util.logging.Logger;

public class MyBlockingQ {

    private BlockingQueue<Integer> items = new LinkedBlockingQueue<>();
    private final ReentrantReadWriteLock lock = new ReentrantReadWriteLock();

    public MyBlockingQ() {
    }

    public void add(Integer i) {
        lock.writeLock().lock();
        try {
            items.put(i);
            System.out.println("Producing " + i + "     " + Thread.currentThread().getName() + " size left " + items.size());
        } catch (InterruptedException ex) {
            Logger.getLogger(ProducerConsumer.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            lock.writeLock().unlock();
        }
    }

    public void remove() {
        lock.writeLock().lock();
        try {
            int taken = items.take();
            System.out.println("Consuming " + taken + "     " + Thread.currentThread().getName() + " size left " + items.size());
        } catch (InterruptedException ex) {
            Logger.getLogger(ProducerConsumer.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            lock.writeLock().unlock();
        }
    }
} 
```

Test

```
import java.util.concurrent.BlockingQueue; 
import java.util.concurrent.LinkedBlockingQueue; 

public class ProducerConsumer { 
    public static void main(String args[]) { 
        MyBlockingQ items = new MyBlockingQ(); 

        System.out.println("starting");
        Thread t1 = new Thread(new Producer(items)); 
        Thread t2 = new Thread(new Producer(items)); 
        Thread t3 = new Thread(new Consumer(items)); 
        Thread t4 = new Thread(new Consumer(items)); 
        t1.start(); 
        t2.start(); 
        t3.start(); 
        t4.start(); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T07:57:04.283

These two lines

```
items.put(rand);
System.out.println("Producing " + rand + "     " + Thread.currentThread().getName() + " size left " + items.size()); 
```

are not synchronized. The producer might put numbers in the queue, but when the size of the queue is displayed from the thread which put in it, the consumer might have already consumed a number.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T08:04:02.107

You are probably confused by this parts of output:

```
Producing 425     Thread-0 size left 0
Consuming 890     Thread-3 size left 0
Consuming 425     Thread-2 size left 0
Producing 890     Thread-1 size left 0 
```

*Question:* How come Thread-3 is consuming 890 items, before Thread-1 produces them?

*Answer:* Thread-3 is not consuming items, before they were produced, by Thread-1.

*Why:* When Thread-1 is putting the items to the Queue, Thread-3 is probably already waiting for items to take from the Queue. So Thread-1 puts the items:

```
items.put(rand); 
```

And BEFORE Thread-1 hops into the next line and prints the info about the items it produced Thread-3 executes following line:

```
System.out.println("Consuming " + items.take() + "     " + Thread.currentThread().getName() + " size left " + items.size()); 
```

Only then Thread-1 executes its println:

```
System.out.println("Producing " + rand + "     " + Thread.currentThread().getName() + " size left " + items.size()); 
```

Because of this you can see these funny results in the console.

You might want to read about [synchronizing](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html). There are 2 ways to solve your problem:

*   synchronized methods
*   synchronized statements (approach used by brimborium)

Synchronization locks the access to the object(s) that are inside the synchronized block. That means that every other method, has to wait for its turn, before it can access the object(s).

So if you use synchronization on items in both Producer and Consumer then:

*   Consumer cannot take items when Producer is putting them.
*   Producer cannot put items when Consumer is taking them.

I case when items is empty and Consumer's method *locks* the items, the program will fall into so called **deadlock**. Producer has to wait for the Consumer to *unlock*, but it will never happen, since Consumer is waiting to take items (which have to be placed there by Producer).

> Moreover, I put a 2 second sleep on both producer and consumer but when testing, every two seconds it prints out the results of 2 producers and 2 consumers.

This is exacly what you should expect. In the Test class you are making 2 producers and 2 consumers.

```
Thread t1 = new Thread(producer);
Thread t2 = new Thread(producer);
Thread t3 = new Thread(consumer);
Thread t4 = new Thread(consumer);

t1.start();
t2.start();
t3.start();
t4.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:07:22.390

You need to synchronize the `items` access. I just slightly changed your example and the result looks good. Because of synchronization, you will also have to take care of dead locks. In this case it should be fine as long as you don't synchronize over the `items.take()` in the `Consumer` though.

Your new Test:

```
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

public class ProducerConsumer {
    public static void main(String args[]) {
        BlockingQueue<Integer> items = new LinkedBlockingQueue<>();

        Thread t1 = new Thread(new Producer(items));
        Thread t2 = new Thread(new Producer(items));
        Thread t3 = new Thread(new Consumer(items));
        Thread t4 = new Thread(new Consumer(items));
        t1.start();
        t2.start();
        t3.start();
        t4.start();
    }
} 
```

The consumer

```
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Consumer implements Runnable {

    BlockingQueue<Integer> items = new LinkedBlockingQueue<>();

    public Consumer(BlockingQueue<Integer> q) {
        this.items = q;
    }

    public void run() {
        while (true) {
            try {
                System.out.println("Consuming " + items.take() + "     " + Thread.currentThread().getName() + " size left " + items.size());
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(ProducerConsumer.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

And the producer

```
import java.util.Random;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Producer implements Runnable {

    BlockingQueue<Integer> items = new LinkedBlockingQueue<>();

    public Producer(BlockingQueue<Integer> q) {
        this.items = q;
    }

    private int generateRandomNumber(int start, int end) {
        Random rand = new Random();
        int number = start + rand.nextInt(end - start + 1);
        return number;
    }

    public void run() {
        for (int i = 0; i < 5; i++) {
            int rand = generateRandomNumber(100, 1000);
            try {
                synchronized (items) {
                    items.put(rand);
                    System.out.println("Producing " + rand + "     " + Thread.currentThread().getName() + " size left " + items.size());
                }
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(ProducerConsumer.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

# asp.net - 从页面中查找数据库调用

> ID：12795236
> 
> 赞同：3
> 
> 时间：2012-10-09T07:49:14.050
> 
> 标签：asp.net, sql-server, database, performance, sql-server-2008

我正在使用`sql server 2008`，网站在`asp.net 1.1`.

有没有办法找出来**`how many times database has been called from a page`**？

```
What are the stored procedure called from the page?

What are the tables involved in a page load? 
```

请建议我如何跟踪这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T07:50:04.503

最好的办法是使用[SQL 分析器](http://msdn.microsoft.com/en-us/library/ms181091%28v=sql.100%29.aspx)，它将跟踪对数据库的每次调用。

您可能会看到这篇文章：[SQL SERVER – SQL Server 2008 Profiler 简介](http://blog.sqlauthority.com/2009/08/03/sql-server-introduction-to-sql-server-2008-profiler-2/)

# php - Symfony 1.4 电子邮件视图

> ID：12795242
> 
> 赞同：0
> 
> 时间：2012-10-09T07:49:28.200
> 
> 标签：php, email, symfony-1.4, swiftmailer

我正在使用 symfony 1.4。对于电子邮件，我使用的是 SwiftMail。以下代码对我来说非常好。

```
class ForgetPasswordMessage extends Swift_Message
{
    const SUBJECT = 'Reset Password verification mail from Awssum.com.';
    const MESSAGE = 'Test Message';
    public function __construct($to)
    {
        parent::__construct(self::SUBJECT, self::MESSAGE);

        $this->setFrom(array(Member::getAdminMember()->getEmail() => Troupa));
        $this->setTo($to);
        $this->setContentType('text/html');
    }
}//ForgetPasswordMessage 
```

但是我需要发送一个 HTML 邮件。我可以更新`MESSAGE`以编写 html 标签，但我想这不是正确的方法。HTML 必须放在模板中。我尝试[解决其他 SO 问题](https://stackoverflow.com/questions/2255109/email-body-in-symfony-1-4-mailer)，但它对我不起作用（在 sfView 中失败）。再次，不使用邮件类的问题回答条件。

如何为电子邮件类编写和使用视图？

**在评论 1 后编辑**

控制器中的代码

```
public function executeForgetMail(sfWebRequest $request)
{
    try
    {
        $to = $request->getParameter('email');
        $criteria = new Criteria();
        $criteria->add(AppUsersPeer::EMAIL, $to);
        $user = AppUsersPeer::doSelectOne($criteria);
        if($user)
        {
            $mailer=$this->getMailer();
            $mailer->send(new ForgetPasswordMessage($to));
        }
        else
        {
            throw new Exception("The email does not exist. Please try again.");
        }
    }
    catch(Exception $e)
    {
        $this->getUser()->setFlash('error', sprintf($e->getMessage()));
        $this->redirect('signup/forgot');
    }
    $this->getUser()->setFlash('error', "An email with password reset link has been send to your email.");
    $this->redirect('signup/forgot');
} 
```

**回答评论后编辑**

中的新代码`ForgetPasswordMail.class.php`

```
<?php
class ForgetPasswordMail extends TroupaBaseMessage
{
    public function __construct($user) {
        $subject = 'Reset Password verification mail from Awssum.com.';

        sfLoader::loadHelpers(array('Partial'));

        $mailContext = array('user' => $user);
        $mailBody = get_partial('global/emails/forget_password', $mailContext);

        parent::__construct($user->getEmail(), $mailBody);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:07:19.830

您应该更新参数 from`ForgetPasswordMessage`以接受 html 内容：

```
class ForgetPasswordMessage extends Swift_Message
{
    const SUBJECT = 'Reset Password verification mail from Awssum.com.';
    const MESSAGE = 'Test Message';

    public function __construct($to, $htmlBody = null)
    {
        $message = self::MESSAGE;
        if (null !== $htmlBody)
        {
          $message = $htmlBody;
        }

        parent::__construct(self::SUBJECT, $message);

        $this->setFrom(array(Member::getAdminMember()->getEmail() => Troupa));
        $this->setTo($to);
        $this->setContentType('text/html');
    }
} 
```

然后调用一个部分来获得 html 内容：

```
 $to = $request->getParameter('email');
    $criteria = new Criteria();
    $criteria->add(AppUsersPeer::EMAIL, $to);
    $user = AppUsersPeer::doSelectOne($criteria);
    if($user)
    {
        $mailBody = $this->getPartial('module/partial_name', array('user' => $user));
        $mailer=$this->getMailer();
        $mailer->send(new ForgetPasswordMessage($to, $mailBody));
    }
    else
    {
        throw new Exception("The email does not exist. Please try again.");
    } 
```

检查[这本食谱](http://www.symfony-project.org/cookbook/1_2/en/email#chapter_ea251c4e9e2f8c2a0fda95adab0cc06d_render_an_e_mail)（适用于 sf 1.2，但适用于 1.4）

**编辑**

否则，您可以直接从您的课程中调用部分：

```
class ForgetPasswordMessage extends Swift_Message
{
    const SUBJECT = 'Reset Password verification mail from Awssum.com.';
    const MESSAGE = 'Test Message';

    public function __construct($to)
    {
        // needed to be able to user `get_partial`
        sfApplicationConfiguration::getActive()->loadHelpers(array('Partial'));

        $mailContext = array('test' => 'wahou');
        $mailBody = get_partial('module/partial_name', $mailContext);

        parent::__construct(self::SUBJECT, $mailBody);

        $this->setFrom(array(Member::getAdminMember()->getEmail() => Troupa));
        $this->setTo($to);
        $this->setContentType('text/html');
    }
} 
```

# spring-security - Spring 安全入口点和 AbstractAuthenticationProcessingFilter

> ID：12795250
> 
> 赞同：2
> 
> 时间：2012-10-09T07:50:04.127
> 
> 标签：spring-security

我正在尝试使用替代登录站点来验证对我其他正在运行的 spring-security 的访问，从而创建单点登录。

但是，在连接到我的应用程序时，我最初无法重定向到此替代站点。

我的 applicationContext.xml 指定如下：

```
<http entry-point-ref="testProcessingFilterEntryPoint">
    <intercept-url pattern="/css/**" filters="none" />
    <intercept-url pattern="/login" filters="none" />
    <intercept-url pattern="/images/**" filters="none" />
    <intercept-url pattern="/favicon.ico" filters="none" />
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login login-page="/login"
                authentication-failure-url="/login?login_error=1"
                default-target-url="/home"
                always-use-default-target="true" />
    <logout/>
</http>

<beans:bean id="testProcessingFilterEntryPoint" class="com.test.TESTAuthFilterEntryPoint">
    <beans:property name="loginUrl" value="https://example/login.cgi"/>
    <beans:property name="startUrl" value="/login.jsp"/>
    <beans:property name="otherParams" ref="otherParams"/>
</beans:bean>

<beans:bean id="otherParams" class="com.test.OtherParams">
    <beans:property name="pemFile" value="/data/test.pem"/>
    <beans:property name="cookieName" value="testCookie"/>
</beans:bean>

<beans:bean id="authenticationProcessingFilter" class="com.test.TESTAuthenticationProcessingFilter">
    <beans:constructor-arg index="0" type="java.lang.String" value="" /> 
    <beans:property name="authenticationManager" ref="authenticationManager"/>
    <beans:property name="authenticationFailureUrl" value="/login.jsp?login_error=1"/>
    <beans:property name="defaultTargetUrl" value="/"/>
    <beans:property name="filterProcessesUrl" value="/j_spring_security_check"/>
    <beans:property name="otherParams" ref="otherParams"/>
</beans:bean>

<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="userDetailsService"/>
</authentication-manager> 
```

基本上我的 authenticationProcessingFilter 使用定义为的类：

```
public class TESTAuthenticationProcessingFilter extends AbstractAuthenticationProcessingFilter  { 
```

我的 testProcessingFilterEntryPoint 使用定义为的类：

```
public class TESTAuthFilterEntryPoint implements AuthenticationEntryPoint, InitializingBean { 
```

假设发生的是我应该被重定向到外部站点，通过查看生成的 cookie 进行身份验证并处理从此登录生成的信息。最后，只需验证此信息的一部分是否与数据库中保存的其他一些信息相关。

但是，当我开始这个时，我没有收到任何错误，什么都没有。它刚刚开始并将我留在标准登录屏幕上以获取 spring-security。我无法启动初始重定向。它甚至没有输入 TESTAuthFilterEntryPoint 中的方法

```
@Override
commence(HttpServletRequest servletRequest, HttpServletResponse....) 
```

就像一个侧面评论一样，当它像一个简约的案例一样进行时，它甚至不会触发任何差异，例如：

```
<http>
    <http-basic/>
    <intercept-url pattern="/**" access="ROLE_ADMIN" />
</http>
<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="admin" password="kass" authorities="ROLE_ADMIN" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

仍然进入标准核心登录屏幕。

# iphone - scheduleLocalNotification 的性能问题（大量本地通知）

> ID：12795252
> 
> 赞同：4
> 
> 时间：2012-10-09T07:50:05.360
> 
> 标签：iphone, ios, performance, uilocalnotification, localnotification

我面临 scheduleLocalNotification 的性能问题。我正在尝试注册大量本地通知。这就像朋友的生日闹钟。为了测试，我尝试注册大约 300 条通知，但我的 iPhone4 花了 2 多分钟。（iPad2 4 秒，iPhone4S 8 秒）

这是一个代码。

```
-(void)setAllBirthdaysSchedule
{
    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls == nil) {
        return ;
    }

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    if (prototypeNotification == nil) {
        prototypeNotification = [[UILocalNotification alloc] init];
        prototypeNotification.repeatCalendar = [NSCalendar currentCalendar];
        prototypeNotification.repeatInterval = NSYearCalendarUnit;

        prototypeNotification.timeZone = [NSTimeZone defaultTimeZone];
        prototypeNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:0];
        prototypeNotification.applicationIconBadgeNumber = 0;
        prototypeNotification.alertBody = NSLocalizedString(@"Body", nil);
        prototypeNotification.alertAction = NSLocalizedString(@"Action", nil);
    }

    NSArray* arr = [self getAllBirthday];

    for (User* user in arr) {                
        UILocalNotification *notif = [prototypeNotification copy];
        notif.fireDate = user.birthday;
        [[UIApplication sharedApplication] scheduleLocalNotification:notif];
        [notif release];

    }

    [pool release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:24:11.703

是的，在旧设备上注册本地通知需要一些时间。尝试将注册放入后台线程。

请注意，iOS 中最多有 64 个通知，其余的将被丢弃。查看 UILocalNotification 类参考以获取更多信息。

# c++ - 雪豹下g++不会编译std=c++0x

> ID：12795255
> 
> 赞同：6
> 
> 时间：2012-10-09T07:50:14.707
> 
> 标签：c++, gcc, c++11, g++, osx-snow-leopard

拥有一台带有 Snow Leopard 的旧 Intel Core Duo MacBook，当我尝试使用 g++ 和输入参数 std=c++0x 进行编译时，我得到：

```
cc1plus: error: unrecognized command line option "-std=c++0x" 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T08:48:45.367

c++0x / c++11 支持仅从 gcc v4.3 开始添加，请参阅[此页面](http://gcc.gnu.org/projects/cxx0x.html)以检查在哪个 gcc 版本中添加了哪些 c++ 功能。

或者，您可以使用 clang++ 编译器，它也是 XCode 的标准配置。有关版本信息，请参阅[此页面](http://clang.llvm.org/cxx_status.html)。

[或者从macports](http://www.macports.org/)安装 gcc47

顺便说一句，更好地使用， clang 不支持`-std=c++11`该选项。`c++0x`

# android - Android：单击后退按钮时如何隐藏滑动菜单

> ID：12795260
> 
> 赞同：2
> 
> 时间：2012-10-09T07:50:35.937
> 
> 标签：android, android-actionbar, android-sliding

我在用 ：

[https://github.com/iPaulPro/SlidingMenu](https://github.com/iPaulPro/SlidingMenu)

实现 Facebook 类似滑动菜单的库，以及 ActionBarSherlock 库。

在我的情况下，BehindContentView 是一个 ListFragment。

**1\. 点击一个Image来获取backgroundView（调用toggle();）。**

**2\. onListItemClicked 进入一个 Activity_2 显示被点击项目的文本。**

**3\. 在这个 Activity_2 中，当我单击设备后退按钮时，我得到了主 Activity_1，但后面的视图是打开的。通常在 Facebook 或 Google+ 中的行为是，当您从任何其他 Activity 返回到 Activity_1 时，隐藏了 behindView。**

**4\. 此外，即使在有这些行之后，在 Activity_2 上，主页似乎也无法正常工作（当我单击主页按钮时没有任何反应）。**

```
 ActionBar bar = this.getSupportActionBar();
    bar.setDisplayHomeAsUpEnabled(true);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
    bar.setHomeButtonEnabled(true); 
```

如何解决步骤3和4？

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T00:38:14.000

```
SlidingMenu menu;

    @Override
public void onBackPressed() {
    if (menu.isMenuShowing()) {
        menu.showContent(true);
        return;
    }

    super.onBackPressed();
} 
```

繁荣。如果菜单退出，则在活动中的后按，它就会消失

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T08:01:06.253

隐藏滑动菜单

onListItemClicked 调用 hide() 或 toggle()

对于 Home 按钮 ActionBar 它必须工作，就像这样处理它

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // you code
        return true;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T07:09:41.140

要隐藏滑动菜单并打开需要的意图，您需要在单击时提供要打开的意图。这是一个小例子

```
private SlideMenu slidemenu
// this is from code. no XML declaration necessary, but you won't get state restored after rotation.
slidemenu = new SlideMenu(this, R.menu.slide, this, 333);
// this inflates the menu from XML. open/closed state will be restored after rotation, but you'll have to call init.
slidemenu = (SlideMenu) findViewById(R.id.slideMenu);
slidemenu.init(this, R.menu.IntentName, this, 333); 
```

我使用了`coboltforge.slidemenu`图书馆。

我认为它在 `iPaulPro`/ `SlidingMenu`library 中会很相似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T12:36:23.187

```
@Override 
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        getSlidingMenu().toggle(true);
        return false;
    } else {
        return super.onKeyUp(keyCode, event);
    }
} 
```

只需将其放在您的活动中。

# php - 一步一步的形式

> ID：12795262
> 
> 赞同：0
> 
> 时间：2012-10-09T07:50:37.920
> 
> 标签：php, forms, session, cookies

我想做一个在线申请，它基本上是一个表格，在我决定进入下一步之前可能需要几天的时间才能填写。现在我的问题是，我如何才能知道用户已经完成了第一步，因此当他/她登录时，他/她将被带到第二步，如果没有，则进入第一步。

我正在考虑一个更类似于会话的功能。我可以用饼干吗？任何踢开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:56:27.417

基本上，你必须知道用户状态的两种方法是使用cookies，当然，或者数据库持久化。

由于您的用户必须登录才能继续，我建议第二个。也就是说，对于用户采取的表格的每一步，将该信息保存在您的数据库中。您可以保留用户已填写的所有信息，因此对于每次登录，您将知道要显示哪些字段（或哪个步骤）

这对 cookie 的好处是用户可以删除 cookie，因此您将丢失此信息。如果 cookie 过期，也会发生这种情况。

使用数据库持久性，您可以在您认为正确的任何时候维护此信息以等待用户完成表单。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T07:57:00.193

取决于用户是否必须登录才能填写表格，如果用户必须使用用户名登录才能填写表格（类似于工作申请），那么您应该将用户的进度存储在表格中，以便他可以从哪里开始他已经离开了。

如果用户不需要登录，您可能希望设置没有过期时间的会话。但我不建议这样做，因为用户可以随时删除 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:57:26.793

如果用户在您的网站上有一个帐户，您可以使用数据库中的列跟踪他们的表单进度，并检查他们返回时的位置。

如果他们没有您的帐户，我认为您最好的选择是设置一个 cookie 来告诉您的表单用户回来时执行的步骤。

这些只是我脑海中的想法，希望对您有所帮助！最好的祝福

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T07:58:27.103

把新的 sql 数据库表像，step-1 value-> done step-2 value-> notdone

当用户按下数据库表中的下一个按钮时填写此值

* * *

cookie 和 session 可能会被用户或更清洁的软件刷新，这就是您应该使用数据库表的原因

# sql - SQL Server 2008 中的字母数字和特殊字符排序

> ID：12795264
> 
> 赞同：0
> 
> 时间：2012-10-09T07:50:45.843
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
Select number 
from tableName 
order by Number 
```

它显示如下

```
1
10
11
14
14A
14AA
19
2
20
21 
```

相反，它应该显示如下

```
1 
2
10
11
14
14A
14AA
19
20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:58:44.413

对于 PostgreSQL 和 SQL Server，我假设您的列仅包含字母数字。

**MySQL 和 SQLite**

```
ORDER BY StrangeCol*1, StrangeCol 
```

**PostgreSQL**

```
order by cast(trim(both 'abcdefghijklmnopqrstuvwxyz'
                   from lower(StrangeCol)) as int), StrangeCol 
```

**SQL 服务器**

```
order by 0+stuff(StrangeCol+'a',patindex('%[a-Z]%',StrangeCol+'a'),999,''), StrangeCol 
```

**甲骨文**

```
order by 0+regexp_replace(StrangeCol, '[^[:digit:]]') ,StrangeCol 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T07:54:13.427

你可以试试这个可怕的东西。这证明将这些值存储在两个字段中会更好......

```
ORDER BY
CAST(SUBSTRING(Number, 0, 
  case when patindex('%[a-zA-Z]%', Number) = 0 
  then len(Number)+1
  else patindex('%[a-zA-Z]%', Number)
  end) 
as INT),
Number 
```

[SqlFiddle](http://sqlfiddle.com/#!3/ead5a/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T08:32:41.640

尝试这个：

```
create table tblNum(id varchar(10))

insert into tblNum 
values('1'),('10'),('11'),('14'),('14A'),('14AA'),('19'),('2'),('20'),('21')

select id from tblNum order by 
CASE WHEN PATINDEX('%[a-zA-Z]%',id) > 0 then cast(left(id,(PATINDEX('%[a-zA-Z]%',id)-1)) as int) else cast(id as int) end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:01:55.127

您应该澄清您的订购类型。例如，在 14AA 中，您说第一部分解释为数字，第二部分解释为字母！

如果你想混合它们，我建议使用 HEX 基础。

# javascript - Javascript 可枚举查询

> ID：12795273
> 
> 赞同：0
> 
> 时间：2012-10-09T07:51:08.947
> 
> 标签：javascript, knockout.js

我正在浏览这个关于淘汰赛[级联下拉列表的小提琴链接](http://jsfiddle.net/Yrkbd/8/)

如果我参考这段代码：

```
viewModel.years = ko.dependentObservable(function() {
    return Enumerable.From(makeModelList).Select(function(it) {
      return it.year;
    }).OrderBy(function(it) {
      return it.year;  
    }).Distinct().ToArray();
}, viewModel); 
```

在 Enumerable.From().Select... 行

它非常像来自 C# 的 Linq 表达式调用，是 Javascript 还是 Jquery ？

谢谢，如果你有任何关于它的链接。

祝大家欢呼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:56:07.800

请参阅[linq.js](http://linqjs.codeplex.com/)（用于 javascript 的 LINQ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:56:17.417

这是单独的库 linq.js。它允许您在 javascript 中使用一些 .net LINQ 功能

阅读更多： http: [//linqjs.codeplex.com/](http://linqjs.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:05:19.083

我建议你看看[`underscorejs`](http://underscorejs.org/)或者它是 fork [lodash](http://lodash.com/)。我自己来自 .NET 背景，我知道这`LINQ`很棒而且我真的很喜欢它。但是，我提到的那些库几乎做同样的事情，但是：

*   在 JavaScript 世界中得到更广泛的采用
*   接收更频繁的更新
*   并且在社区中更加知名

我犯了错误并使用了其中一个`LINQ`库，我真的希望我没有因为我概述的事情。

# php - 将公司字段添加到后台的客户选项卡

> ID：12795292
> 
> 赞同：0
> 
> 时间：2012-10-09T07:52:18.947
> 
> 标签：php, mysql, prestashop

我正在运行 prestashop 1.4.8.3 并且我在 AdminCustomers.php 上尝试了以下修改

```
 $this->_select = '(YEAR(CURRENT_DATE)-YEAR(`birthday`)) - (RIGHT(CURRENT_DATE, 5)<RIGHT(`birthday`, 5)) as age, (
            SELECT c.date_add FROM ' . _DB_PREFIX_ . 'guest g
            LEFT JOIN ' . _DB_PREFIX_ . 'connections c ON c.id_guest = g.id_guest
            WHERE g.id_customer = a.id_customer
            ORDER BY c.date_add DESC
            LIMIT 1
        ) as connect';

// This is new code
$this->_select = '(SELECT d.company FROM ' . _DB_PREFIX_ . 'address d WHERE d.id_customer = a.id_customer LIMIT 1) as company';

// LH company name
$genders = array(
    1 => $this->l('M'),
    2 => $this->l('F'),
    9 => $this->l('?'));
$this->fieldsDisplay = array(
    'id_customer' => array(
        'title' => $this->l('ID'),
        'align' => 'center',
        'width' => 25),
    'id_gender' => array(
        'title' => $this->l('Gender'),
        'width' => 25,
        'align' => 'center',
        'icon' => array(
            1 => 'male.gif',
            2 => 'female.gif',
            'default' => 'unknown.gif'),
        'orderby' => false,
        'type' => 'select',
        'select' => $genders,
        'filter_key' => 'a!id_gender'),
    'lastname' => array('title' => $this->l('Last Name'), 'width' => 80),
    'firstname' => array('title' => $this->l('First name'), 'width' => 60),
    'email' => array(
        'title' => $this->l('E-mail address'),
        'width' => 120,
        'maxlength' => 19),
    'company' => array('title' => $this->l('Company'), 'width' => 60),
    'age' => array(
        'title' => $this->l('Age'),
        'width' => 30,
        'search' => false),
    'active' => array(
        'title' => $this->l('Enabled'),
        'width' => 25,
        'align' => 'center',
        'active' => 'status',
        'type' => 'bool',
        'orderby' => false),
    'newsletter' => array(
        'title' => $this->l('News.'),
        'width' => 25,
        'align' => 'center',
        'type' => 'bool',
        'callback' => 'printNewsIcon',
        'orderby' => false),
    'optin' => array(
        'title' => $this->l('Opt.'),
        'width' => 25,
        'align' => 'center',
        'type' => 'bool',
        'callback' => 'printOptinIcon',
        'orderby' => false),
    'date_add' => array(
        'title' => $this->l('Registration'),
        'width' => 30,
        'type' => 'date',
        'align' => 'right'),
    'connect' => array(
        'title' => $this->l('Connection'),
        'width' => 60,
        'type' => 'datetime',
        'search' => false)); 
```

奇怪的是，它似乎可以工作，但只有一两次浏览器刷新，然后它无法显示 SQL 失败消息。

任何能让我走上正轨的想法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:46:33.907

尝试 show sql debug on open file `config`>`config.inc.php`并设置 true `define('_PS_DEBUG_SQL_', false)`。您会注意到错误语法 sql。不要忘记尝试修改您的代码

> $temp = '(SELECT d.company FROM ' . _DB_PREFIX_ . 'address d WHERE d.id_customer = a.id_customer LIMIT 1) as company';
> 
> var_dump(Db::getInstance()->ExecuteS($sql));

最后，运行你的代码，你会发现错误是什么:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:08:41.157

你可以试试：

```
// This is new code
$this->_select .= ', (SELECT d.company FROM ' . _DB_PREFIX_ . 'address d WHERE d.id_customer = a.id_customer LIMIT 1) as company'; 
```

您也可以在这里看到您的 sql 查询： `AdminTab::getList()`在线`$this->_list = Db::getInstance()->ExecuteS($sql);`

# java - 不同操作系统中的 ActiveMQ 性能

> ID：12795293
> 
> 赞同：1
> 
> 时间：2012-10-09T07:52:22.160
> 
> 标签：java, jms, activemq, message-queue

我已经在一些操作系统中测试了activeMQ JMSProducer。结果如下：

```
AIX     - Persistent - around  50 messages per second
Solaris - Persistent - around  60 messages per second
Linux   - Persistent - around 500 messages per second 
```

1.  这是正常的行为吗，因为在 Linux 中，它要快得多？ `ActiveMQ Performance`文档仅基于Linux。

2.  而且，是否会`Slow KahaDB access`降低 activeMQ 的性能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:56:28.417

使用持久连接，您高度依赖硬件的性能以及操作系统将如何提交写入磁盘。例如，如果您在磁盘上启用写缓存，这可能足以解释差异。如果您使用 SSD，我希望性能至少提高 10 倍，无论操作系统如何。

# java - 听多个 InputStreams？

> ID：12795295
> 
> 赞同：0
> 
> 时间：2012-10-09T07:52:29.197
> 
> 标签：java, io, inputstream

我正在使用像 MSN 这样的 IM 程序在 Java 中制作一个聊天程序。现在，我的程序不会像 MSN 那样功能齐全，我也不会深入研究广泛的 GUI 设计。

我遇到的问题是，我可能会采用错误的设计来做到这一点。

我目前正在设计一个会话对象。基本上，用户与服务器联系并处于“边缘”状态，直到他们决定邀请某人聊天。然后是服务器的工作（还没有到那部分）在所涉及的用户之间建立一个会话。

我的问题是，我必须监听多个 InputStreams 的变化并相应地更新每个人的显示。当其中一个“发送消息”到会话时，我将如何设法监听所有 InputStream 并更新？

到目前为止，这是我的代码。它不是很长。

包服务器；

```
import java.io.*;
import java.util.Scanner;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
/**
 *
 * @author Vipar
 */
public class Session implements Runnable {
    private static User[] users;
    private static PrintWriter[] outputs;
    private int sessionId;

    public Session(User[] users) {
        this.users = users;
        outputs = new PrintWriter[users.length];
        sessionId = this.hashCode();

        try {
            for(int i = 0; i < users.length; i++) {
            outputs[i] = new PrintWriter(users[i].getSocket().getOutputStream(), true);
            }
        } catch (IOException ioe) {
            ChatServer.print("An error occured in session " + sessionId);
            ChatServer.print(ioe.getMessage());
        }
    }

    @Override
    public void run() {
        ChatServer.print("SessionId: " + sessionId + " have initiated.");
        ExecutorService service = Executors.newFixedThreadPool(users.length);
        for(int i = 0; i < users.length; i++) {
            service.submit(new InputStreamListener(users[i]));
        }
        do {
            if(users.length < 2) {
                ChatServer.print("SessionId: " + sessionId + " have ended.");
                break;
            }
        } while(true);
    }

    public static void update(User u, String message) {
        for(int i = 0; i < users.length; i++) {
            outputs[i].println("new");
            outputs[i].println(u.getUserName());
            outputs[i].println(message);
        }
    }
} 
```

我刚刚制作的 InputStreamListener：

```
package server;

import java.util.Scanner;
import java.io.*;
import java.util.NoSuchElementException;

/**
 *
 * @author Vipar
 */
public class InputStreamListener implements Runnable {
    private Scanner scanner;
    private User user;
    public InputStreamListener(User user) {
        this.user = user;
        try {
            scanner = new Scanner(user.getSocket().getInputStream());
        } catch (IOException ioe) {
            ChatServer.print("An Error occured for the InputStream: "
                    + user.getUserName());
            ChatServer.print(ioe.getMessage());
        }

    }

    @Override
    public void run() {
        String s = "";
        do {
            try {
                s = scanner.nextLine();
                Session.update(user, s);
            } catch(NoSuchElementException e) {
                continue;
            }
        } while(!s.equals("/DISCONNECT"));
        try {
            user.getSocket().close();
        } catch(IOException ioe) {
            ChatServer.print("Problem closing users InputStream: "
                    + user.getUserName());
            ChatServer.print(ioe.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:24:53.330

最简单的方法是为每个客户端使用一个线程。每个线程都从自己的 InputStream 中读取数据并通知会话有关新消息的信息。这样的线程也可以知道如何将消息发送回客户端。如果你期望有很多客户端，你可以尝试一些比线程更轻量的东西，比如演员（例如[Akka](http://akka.io/)）。或者尝试将异步 IO 与 NIO 一起使用。

# java - 设置框架图标

> ID：12795296
> 
> 赞同：0
> 
> 时间：2012-10-09T07:52:33.397
> 
> 标签：java, icons

好的，所以在一切之后，我终于有了我的游戏基础并开始运行！唯一的问题是默认窗口图标是 lwjgl 徽标：L 有人可以告诉我如何将其更改为我的自定义图标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:55:41.880

对于一个`JFrame`，使用`setIconImage(Image image)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:55:56.950

```
 /* Display the Application Icon */
        BufferedImage images = null;
        try {
            images = ImageIO.read(mainFrame.getClass().getResource("/sample/resources/icon.gif"));
        } catch (IOException es) {
            es.printStackTrace();
        }
        mainFrame.setIconImage(images); 
```

# asp.net - ASP.NET 登录控件的优点

> ID：12795298
> 
> 赞同：1
> 
> 时间：2012-10-09T07:52:46.237
> 
> 标签：asp.net

我想知道 asp.net 登录控件如何比经典登录表单更好。经典，我的意思是有一个带有用户 id 文本框和密码文本框的表单，一个验证 id 和密码的提交按钮。

[http://msdn.microsoft.com/en-us/library/ms178329(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178329(v=vs.100).aspx)

ASP.NET 登录控件是否具有更高的安全性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:57:40.990

带登录控制

1 您可以与由`Aspnet_regsql.exe tool security`.

链接： http: [//msdn.microsoft.com/en-us/library/ms229862 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms229862(v=vs.80).aspx)

2 您避免开发表单 => 减少开发时间。

3 您使用添加到登录控件的所有功能验证。

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.login_methods (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.login_methods(v=vs.80).aspx)

Aspnet_regsql 参考：

链接`Aspnet_regsql`： http: [//msdn.microsoft.com/fr-fr/library/ms229862 (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/ms229862(v=vs.80).aspx)

关于主题的其他链接：

[链接角色管理器：http: //msdn.microsoft.com/en-us/library/5k850zwb](http://msdn.microsoft.com/en-us/library/5k850zwb(v=vs.100).aspx) (v=vs.100) .aspx

链接 MemberShipUser： http: [//msdn.microsoft.com/fr-fr/library/system.web.security.membershipuser (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.security.membershipuser(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:54:24.203

主要好处是它是为您打造的，您可以“将其放入”

如果您编写了不安全的“经典”登录表单，可能会更***安全***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:55:25.503

简单：您不必重新发明轮子。您将获得经过精心设计和测试的代码，而不是编写自己的代码并引入错误。它们也非常易于使用，并且使用提供程序与平台的其余部分很好地集成。

# php - Codeigniter：无法使用提供的设置连接到您的数据库服务器

> ID：12795300
> 
> 赞同：4
> 
> 时间：2012-10-09T07:52:53.737
> 
> 标签：php, database, codeigniter

我使用 codeigniter 作为 cms 框架，如果数据库主机名是 localhost，它可以正常工作。

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = 'test';
$db['default']['database'] = 'jinma';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE; 
```

使用上述配置可以正常工作，但如果主机名更改为：

```
$db['default']['hostname'] = '192.168.1.222'; 
```

发生数据库错误：

```
Unable to connect to your database server using the provided settings.
Filename: third_party/fuel/Loader.php
Line Number: 134 
```

我可以ssh 192.168.1.222，同时在192.168.1.222，主机名是localhost也可以。

我在谷歌搜索并得到了一个解决方案来添加：

```
$db['default']['port'] = '3306'; 
```

但这对我不起作用，知道吗？

谢谢，这是我的第一个问题，对不起，我很笨。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T08:00:06.740

默认情况下，MySQL 服务器配置为只允许来自 localhost 的绑定。

转到您的**my.cnf**并评论该行

```
bind 127.0.0.1 
```

然后你应该看看你的 MySQL 用户有足够的权限从其他 ip 访问。

[MySQL 远程访问](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

# php - PHP 检查重复数据，如果没有则执行

> ID：12795302
> 
> 赞同：0
> 
> 时间：2012-10-09T07:52:57.170
> 
> 标签：php

我的 PHP Msyql Check 数据有问题。来源将如下所示：

```
$cek_saldo=mysql_num_rows(mysql_query
("SELECT badge_id, bulan, jns_saldo FROM t_saldo WHERE badge_id='$badge_id' AND bulan='Januari' AND jns_saldo='Tabungan Wajib'"));

if ($cek_saldo > 0)
{
    include ("manage_saldo.php");
    echo "<div class='emp'>Saldo already added.</div>";
}
else
{
Save query data.
} 
```

我的例子：
jns_saldo 是“Tabungan Wajib”
徽章 ID 是 165520
Bulan 是 Januari

因此，如果示例数据与表中相同，则给出消息“Saldo 已添加。”。如果没有，PHP 执行 else 语句，即保存数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:59:28.183

尝试回显执行的查询。在 phpmyadmin 中手动检查此查询。所以你可以找到问题。

```
$query="SELECT badge_id, bulan, jns_saldo FROM t_saldo WHERE badge_id='$badge_id' AND bulan='Januari' AND jns_saldo='Tabungan Wajib'";
    echo $query;
    $result=mysql_query($query);
    $cek_saldo=mysql_num_rows($result);
    if ($cek_saldo > 0)
    {
        include ("manage_saldo.php");
        echo "<div class='emp'>Saldo already added.</div>";
    }
    else
    {
    Save query data.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:04:29.147

```
$list = mysql_query("SELECT badge_id, bulan, jns_saldo FROM t_saldo WHERE badge_id='$badge_id' AND bulan='Januari' AND jns_saldo='Tabungan Wajib'");

if(mysql_num_rows($list) > 0){
    include ("manage_saldo.php");
    echo "<div class='emp'>Saldo already added.</div>";       
}else{
    Save query data.
} 
```

或者

```
$list = mysql_query("SELECT COUNT(badge_id) FROM t_saldo WHERE badge_id='$badge_id' AND bulan='Januari' AND jns_saldo='Tabungan Wajib'");

$row = mysql_fetch_array($list)
$cek_saldo = $row[0];

if($cek_saldo  > 0){
        include ("manage_saldo.php");
        echo "<div class='emp'>Saldo already added.</div>";       
    }else{
        Save query data.
    } 
```

# regex - 带有正则表达式的 CASE：“在不能接受集合的上下文中调用的集合值函数”

> ID：12795306
> 
> 赞同：3
> 
> 时间：2012-10-09T07:53:19.710
> 
> 标签：regex, postgresql, postgresql-9.0, set-returning-functions

我正在尝试在 PostgreSQL 9.0.1 中进行稍微复杂的字符串转换。中的值`my_col`是长字符串，格式如下：

```
'12345_sometext_X12B_1'
'12345_sometext_optionaltext_Y09B_1'
'12345_sometext_optionaltext_X12A_1' 
```

我需要将“X12”部分转换为已知数值，有几个不同的已知值（最多 5 个）。

我希望能够在一个查询中确定这一点，而无需子查询。但是，以下内容对我不起作用。最后一列是引发异常的列。由于某种原因，我似乎无法`CASE`使用这些函数的输出组合来执行该语句。我仅出于演示目的而包含了前面的列。

```
select
          regexp_matches(my_col, E'^.*_([^_]*)[A-Z]{1}_\\d*$'), -- returns {'X12'}
         (regexp_matches(my_col, E'^.*_([^_]*)[A-Z]{1}_\\d*$'))[1], -- returns 'X12'
    case (regexp_matches(my_col, E'^.*_([^_]*)[A-Z]{1}_\\d*$'))[1]
        when 'X12' then '1200'
        when 'Y09' then '950'
        else '?' end -- should return '1200' but throws error
from my_table; 
```

相反，我得到了错误：

```
ERROR: set-valued function called in context that cannot accept a set
SQL state: 0A000 
```

有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T09:07:27.110

给定数据：

```
create table my_table(my_col text);
insert into my_table(my_col) values
('12345_sometext_X12B_1'),
('12345_sometext_optionaltext_Y09B_1'),
('12345_sometext_optionaltext_X12A_1'),
('nomatch'); 
```

上面的查询确实会产生您报告的错误。很奇怪，因为：

```
SELECT pg_typeof((regexp_matches(my_col, E'^.*_([^_]*)[A-Z]{1}_\\d*$'))[1]); 
```

返回“文本”。但它确实应该说`setof text`，这就是陷阱：`regex_matches`是一个集合返回函数。当在 PostgreSQL 中的 FROM 子句之外调用时，它们具有......有趣的......行为。

从[模式匹配](http://www.postgresql.org/docs/current/static/functions-matching.html)：

> regexp_matches 函数返回由匹配 POSIX 正则表达式模式产生的所有捕获子字符串的文本数组。它的语法为 regexp_matches(string, pattern [, flags ])。该函数可以不返回任何行、一行或多行

尝试重新编写查询以使用子查询来调用 SRF。如果匹配器返回多于一行，这将失败，但是：

```
SELECT 
  CASE (SELECT x[1] FROM regexp_matches(my_col, E'^.*_([^_]*)[A-Z]{1}_\\d*$') x)
    WHEN 'X12' THEN '1200'
    WHEN 'Y09' THEN '950'
    ELSE '?'
  END
FROM my_table; 
```

* * *

想看看 SELECT 中的 SRF 在 Pg 中有多么奇怪吗？比较这些查询的结果：

```
SELECT generate_series(1,10), generate_series(1,15); 
```

和：

```
SELECT generate_series(1,10), generate_series(1,20); 
```

第一个产生 30 行。第二个产生 20 个。玩得开心解释为什么。Pg 中的 SELECT 列表中的多个 SRF 会产生疯狂的结果，如果偶尔有用的话。

PostgreSQL 9.3 支持 SQL 标准`LATERAL`子句，这要归功于 Tom Lane，它为当前行为提供了一个健全且定义明确的替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T01:47:07.507

[**`regexp_matches()`**](https://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)返回`SETOF text[]`（一***组文本数组***），这对于同一字符串中的一个模式的多个匹配很有用。但它只是完成这项任务的**错误工具**。

改用[**`substring()`**](https://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-SQL)正则表达式。它返回`text`。在@Craig 的回答中重用[演示表](https://stackoverflow.com/a/12796491/939860)：

```
SELECT CASE substring(my_col, '^.*_([^_]*)[A-Z]_\d*$')
         WHEN 'X12' THEN '1200'
         WHEN 'Y09' THEN '950'
         ELSE            '?'
       END As result
FROM   my_table; 
```

回报：

```
 result
--------
 1200
 950
 1200
 ? 
```

还稍微简化了正则表达式。`{1}`只是噪音。

如果您需要优化**性能**，请尝试不使用正则表达式，因为正则表达式功能强大但相对昂贵。就像是：

```
reverse(right(split_part(reverse(my_col), '_', 2), -1)) 
```

看起来更复杂，但在我的测试中仍然更快。

# jquery - Jquery UI Slider在输入字段中更改时更改滑块的值

> ID：12795307
> 
> 赞同：17
> 
> 时间：2012-10-09T07:53:19.977
> 
> 标签：jquery, jquery-ui, uislider, jquery-ui-slider

```
$("#storlekslider").slider({
  range: "max",
  min: 0,
  max: 1500,
  value: 0,
  slide: function(event, ui) {
    $("#storlek_testet").val(ui.value);
    $(ui.value).val($('#storlek_testet').val());
  }
});
// $( "#storlek_testet" ).val( $( "#storlekslider" ).slider( "value" ) );

$("#storlek_testet").change(function() {
  $("#storlekslider").slider("value", $(this).val());
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css">
<div id="storlekslider"></div>
<input type="text" name="storlek" id="storlek_testet" value="500" />
```

这是一个[js小提琴](http://jsfiddle.net/p4gqJ/)

当我更改输入字段中的值时，我试图让滑块跳到正确的位置。我正在使用[Jquery UI 滑块](http://jqueryui.com/slider/)。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-09T08:07:03.387

您像这样附加到`change`您的输入事件：

```
$("#storlek_testet").change(function() {
    $("#storlekslider").slider("value", $(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-03T13:22:08.973

从多个输入更改值：

```
$("#input-1").change(function() {
    $("#slider").slider('values',0,$(this).val());
});
$("#input-2").change(function() {
    $("#slider").slider('values',1,$(this).val());
}); 
```

[https://jsfiddle.net/brhuman/uvx6pdc1/](https://jsfiddle.net/brhuman/uvx6pdc1/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-09T08:14:54.563

```
$("#storlek_testet").keyup(function() {
    $("#storlekslider").slider("value" , $(this).val())
}); 
```

[http://jsfiddle.net/C8X4D/](http://jsfiddle.net/C8X4D/)

# php - facebook 身份验证 getuser() 返回 0 的问题

> ID：12795308
> 
> 赞同：0
> 
> 时间：2012-10-09T07:53:29.117
> 
> 标签：php, facebook, authentication

我对 Facebook 网站身份验证有疑问 - 特别是 getuser() 返回 0...

以下代码使用 Facebook API 向 Facebook 注册用户。我知道使用 FB 的身份验证是有效的，因为当我以用户身份登录 FB 时，它表明用户已授予网站应用程序访问 FB 帐户的权限。

以下代码是用户在 FB 注册网站后用于访问 FB 帐户的代码。

```
session_start();

$config = array(
    'appId' => 'xxxx...',
    'secret' => 'xxxx...',//);
    'cookie' => true,);

$fb = new Facebook($config);
$user = $fb->getUser(); 
```

基本上发生的事情是，一旦用户在 facebook 上注册了应用程序，$fb 对象就不会返回值......

从其他用户的类似问题来看，很多其他人都有类似的问题。在过去的几天里，我一直在研究其他用户提供的推荐解决方案，但没有运气......

任何想法我做错了什么？

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:59:18.173

我猜你的注册用户没有注册。

尝试使用`try/catch`块来查看发生了什么：

```
$fb = new Facebook($config);
$user = $fb->getUser();
try {
    $user_profile = $fb->api('/me');
} catch (FacebookApiException $e) {
    var_dump($e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:08:27.963

我不确定您的页面是如何构建的。您是否在页面上提供了登录按钮？如果不是，我认为您会将您的情况与离线访问帐户混淆，这是完全不同的情况。

如果您为用户提供了登录页面的选项，您将如何构建登录按钮（或其他元素）？

您需要使用 facebook 对象生成登录 url。例如，对于一个简单的按钮，登录 url 应该像这样生成（假设这发生在 <?php ?> 块内的 PHP 文件中）：

```
session_start();
$config = array(
    'appId' => 'xxxx...',
    'secret' => 'xxxx...',//);
    'cookie' => true /* not sure if the cookie parameter is necessary */ );

$fb = new Facebook($config);

echo '<a href="' . $fb->getLoginUrl() . '"><button>Login</button></a>'; 
```

这将为 facebook 身份验证服务器的身份验证和重定向生成必要的参数，这样您就不必担心它是如何处理的。

不确定这是否是您的问题，但如果很高兴为您服务。

# backbone.js - 单击并更改事件不适用于 jquery-select2 选项

> ID：12795313
> 
> 赞同：1
> 
> 时间：2012-10-09T07:54:03.503
> 
> 标签：backbone.js, coffeescript, onchange, jquery-select2

我正在使用 jquery-select2 库来实现我的下拉菜单。

就我而言，我希望能够在用户单击下拉列表中的选项后触发操作。但是，单击或更改事件似乎不起作用

**哈姆文件：**

```
%select.medium.name_selector.pull_left
  %option.placeholder{value:"placeholder", disabled: "disabled", selected: "selected"} Start or find a conversation with a muser
  %option{value: "nick"} nick
  %option{value: "sam"} sam
  %option{value: "john} john 
```

**咖啡脚本文件：**

```
events:
  "click option" : "displayChatScreen"

displayChatScreen: (e) ->
  e.preventDefault()
  nickname = @$("select.name_selector option:selected").val()
  if nickname != "placeholder"
    Backbone.history.navigate "messages/#{nickname}",
      trigger: true
  else
    alert "You need to select a friend to chat" 
```

一旦我更改了我的 select2 下拉框的选项，是否会触发该操作？

注意：我已经尝试过单击和更改事件，但它们都不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:31:45.267

使用 select2 您不能像使用`change`普通小部件那样使用普通事件`<select>`，但您实际上需要将您的`displayChatScreen`方法附加到[`change`select2 提供的处理程序](http://ivaynberg.github.com/select2/#events)。

例如

```
$('select.medium.name_selector').on('change', this.displayChatScreen); 
```

假设这是您的 select2 小部件的选择器，并且您在适当的上下文中运行它。

当您使用`events`Backbone 提供的默认哈希时，您实际上是在这样做：

```
$el.on('change', 'option', this.displayChatScreen); 
```

由于 select2 实际上替换了`<select>`（因此`<option>`用一对标记`<ul>` `<li>`），您将永远不会真正收到浏览器事件。

此外，`change`事件在父元素`<select>`而不是`<option>`元素上触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T16:40:39.373

您可以通过不呈现选项并在初始化时将其作为选项传递给 select2 来避免所有问题。

您可以像这样制作输入标签：

```
<input name="someName" value="selectedValues"> 
```

然后使用如下选项初始化 select2： $('input[name="SomeName"]').select2(options);

这样做可以让您安全地收听输入的更改，就像您经常使用事件哈希一样。

# java - 未序列化的 Arraylist 始终为空

> ID：12795321
> 
> 赞同：7
> 
> 时间：2012-10-09T07:54:33.130
> 
> 标签：java, serialization, arraylist

我在 Java 中有很多类，但这是我第一次尝试序列化任何东西。我制作了自己的类，其中包括一个数组列表。主要对象是这些类的数组列表。我相信我所做的一切都是正确的，但是当我重新读取它时，arraylist 总是空的。

主要（主要是测试）类：

```
import java.io.*;
import java.util.ArrayList;

public class IOTest {
public static void main(String[] args) {
    ArrayList<Info> master = new ArrayList <Info>();
    Info a = new Info("a");
    Info b = new Info("a");
    Info c = new Info("a");
    master.add(a);
    master.add(b);
    master.add(c);
    print(master);
    save(master);
    ArrayList<Info> loaded = new ArrayList <Info>();
    load(loaded);
    System.out.println("Loaded List:");
    System.out.println("Loaded Size:" + loaded.size());
    print(loaded);
}

public static void save(ArrayList a){
    File f = new File("savefile.dat");
    try {
        FileOutputStream fos = new FileOutputStream(f);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(a);
        fos.flush();
        fos.close();
     } catch (IOException ioe) {
         System.out.println("Failed to save");
     };
}

public static void load(ArrayList a){
    File f = new File("savefile.dat");
    try {
        FileInputStream fis = new FileInputStream(f);
        ObjectInputStream ois = new ObjectInputStream(fis);
        try {
          a = (ArrayList<Info>) ois.readObject();
        } catch (ClassNotFoundException cnfe) { 
            System.out.println("Failed to load");
        }
        fis.close();
     } catch (IOException ioe) {
         System.out.println("Failed to load");
     }
}

public static void print(ArrayList a){
    System.out.println(a);
}
} 
```

自定义数据结构：

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.util.ArrayList;

public class Info implements Serializable {
private static final long serialVersionUID = -5781559849007353596L;

ArrayList<String> list;
public Info( String e) {
    list = new ArrayList<String>();
    list.add(e);
}
@Override
public String toString() {
    return list.toString();
}

private void readObject(ObjectInputStream aInputStream) throws ClassNotFoundException, IOException {
    aInputStream.defaultReadObject();
}

private void writeObject(ObjectOutputStream aOutputStream) throws IOException {
    aOutputStream.defaultWriteObject();
}
} 
```

如果有人能指出我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T08:02:29.187

这个问题与序列化无关。

您正在更改方法`reference of passed parameter`内的列表，`load()`这将不起作用，因为更改的引用在该方法之前只有范围。将负载更改为以下

```
public static ArrayList<Info> load() {//Change return type
    File f = new File("savefile.dat");
    try {
        FileInputStream fis = new FileInputStream(f);
        ObjectInputStream ois = new ObjectInputStream(fis);
        try {
            ArrayList<Info> a = (ArrayList<Info>) ois.readObject();//get the object that is read
            return a;
        } catch (ClassNotFoundException cnfe) {
            System.out.println("Failed to load");
        }
        fis.close();
    } catch (IOException ioe) {
        System.out.println("Failed to load");
    }
    return null;
  } 
```

并使用返回的对象。

```
 ArrayList<Info> loaded = load(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:02:57.663

您的代码没有任何问题。

这里有一个逻辑问题：

```
ArrayList<Info> loaded = new ArrayList <Info>();
load(loaded); 
```

您正在尝试加载一个空的 ArrayList （这就是它什么都不打印的原因）。我猜你要加载的是主文件

```
load(master); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:08:09.970

试试这个代码......

结果 ：

[[a], [a], [a]] 加载列表：加载大小：3 [[a], [a], [a]]

```
package com.palit.java.serialize;

import java.io.*;
import java.util.ArrayList;
import java.util.List;

public class Init {
public static void main(String[] args) {
    ArrayList<Info> master = new ArrayList<Info>();
    Info a = new Info("a");
    Info b = new Info("a");
    Info c = new Info("a");
    master.add(a);
    master.add(b);
    master.add(c);
    print(master);
    save(master);
    List<Info> loaded = new ArrayList<Info>();
    loaded = load();
    System.out.println("Loaded List:");
    System.out.println("Loaded Size:" + loaded.size());
    print(loaded);
}

public static void save(ArrayList a) {
    File f = new File("savefile.dat");
    try {
        FileOutputStream fos = new FileOutputStream(f);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(a);
        fos.flush();
        fos.close();
    } catch (IOException ioe) {
        System.out.println("Failed to save");
    }
    ;
}

public static List load() {
    List list = new ArrayList();
    File f = new File("savefile.dat");
    try {
        FileInputStream fis = new FileInputStream(f);
        ObjectInputStream ois = new ObjectInputStream(fis);
        try {
            list = (ArrayList<Info>) ois.readObject();
        } catch (ClassNotFoundException cnfe) {
            System.out.println("Failed to load");
        }
        fis.close();
    } catch (IOException ioe) {
        System.out.println("Failed to load");
    }

    return list;
}

public static void print(List a) {
    System.out.println(a);
}
} 
```

# ios - 当文件不再存在时，为什么 NSFileHandle 不抛出异常

> ID：12795325
> 
> 赞同：2
> 
> 时间：2012-10-09T07:54:46.640
> 
> 标签：ios, exception, nsfilehandle

我正在使用 NSFileHandle 的 fileHandleForWritingAtPath 打开文件句柄并写入文件（附加到文件末尾）。因为我总是需要写入它，所以我从不关闭手柄或在写入时检查它是否存在。

我需要支持一个案例，由于某种原因第三方来删除了文件，也就是说，我有一个有效的句柄正在进入一个不再存在的文件（内核应该知道句柄是坏的）。预料到这一点，我包装了对 writeData 的调用：使用 try catch，我希望该方法抛出异常（为什么它返回 void 而未写入字节超出了我的理解）。

它不是。为什么？

# json - 如何在浏览器中调用 JSON Web 服务

> ID：12795327
> 
> 赞同：-1
> 
> 时间：2012-10-09T07:54:51.157
> 
> 标签：json, web-services, browser

我有一个返回 JSON 字符串的 Web 服务，我想直接在浏览器中调用这个 Web 服务而不使用“Invoke”，这是我用来调用的格式，，

```
http://localhost/WebserviceAliasonIIS/serviceName.asmx/FunctionName 
```

我在做什么错因为它一直在浏览器上返回错误

这是错误信息

无法识别以“/FunctionName”结尾的 URL 的请求格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:03:57.637

没关系，我的坏，我发现我忘了，但这是 web.Config 文件

```
<configuration>
<system.web>
<webServices>
    <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
    </protocols>
</webServices>
</system.web> 
```

# sql-server - SQL Server 查询优化 - WHERE 子句与 SELECT 子查询

> ID：12795331
> 
> 赞同：1
> 
> 时间：2012-10-09T07:55:04.263
> 
> 标签：sql-server, query-optimization

创建连接 2 个表的查询时。我想到了 2 种可能的方法来编写查询。下面是一个简化的例子。你能告诉我哪个会更快吗？

```
SELECT t1.a,
       t2.a
FROM   table1 t1
       JOIN table2 t2
         ON t1.b = t2.b
WHERE  t2.c = 'test' 
```

或者

```
SELECT t1.a,
       t2.a
FROM   table1 t1
       JOIN (SELECT a, b
             FROM   table2
             WHERE  c = 'test') t2
         ON t1.b = t2.b 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T07:58:28.910

他们应该给出完全相同的计划。

SQL Server 可以轻松地将一个转换为另一个。但是，检查执行计划是确定的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:56:51.973

这取决于您的数据和数据结构。

您可以使用 SSMS 中查询菜单上的“包括实际执行计划”选项自行查找。

我会说第一个选项更清楚。

*此外，所写的第二个查询实际上不会起作用。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:14:26.817

如果您在 table1.id 和 table2.id 列上有适当的索引，那么我认为第一个查询会执行得更好。

# java - ui:repeat 在 JSF 2.0 中不起作用？

> ID：12795334
> 
> 赞同：2
> 
> 时间：2012-10-09T07:55:12.827
> 
> 标签：java, jsf-2, seam, facelets

在我的页面中，`<ui:repeat>`不起作用。`<c:forEach>`是工作。我不知道我错过了什么？`<ui:repeat>`否则， JSF 2.0不工作？

mypage.xhtml（它不起作用）

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html" 
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="/common/commonLayout.xhtml">
    <ui:define name="content">
        <h:form id="toDeleteForm">
                <table>
                    <tr>
                        <td>
                            <ui:repeat value="#{DatePick.timeSlot}" var="timeSlot">
                                <h:outputText value="#{timeSlot}" style="font-size:12px;"/><br/>
                            </ui:repeat>
                        </td>
                    </tr>
                </table>
        </h:form>
    </ui:define>
</ui:composition> 
```

mypage.xhtml（没关系）

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html" 
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="/common/commonLayout.xhtml">
    <ui:define name="content">
        <h:form id="toDeleteForm">
                <table>
                    <tr>
                        <td>
                            <c:forEach items="#{DatePick.timeSlot}" var="timeSlot">
                                <h:outputText value="#{timeSlot}" style="font-size:12px;"/>
                            </c:forEach>
                        </td>
                    </tr>
                </table>
        </h:form>
    </ui:define>
</ui:composition> 
```

日期选择.java

```
@Name("DatePick")
@Scope(ScopeType.CONVERSATION)
public class DatePick {

    public List<String> getTimeSlot() {
        // list form database
        return timeSlot;
    }
} 
```

输出将在我的页面中如下所示。

```
 01/01/2012
02/01/2012
03/01/2012
04/01/2012
05/01/2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:30:45.617

我使用了 Java EE 6 注释，它在 GlassFish 3.1.2.2 和 Mojarra 2.1.6 上运行良好。我确实修改了您的代码，但在这里。

```
@Named
@ConversationScoped
public class DatePick implements Serializable {

    private static final long serialVersionUID = -5061581851476260511L;

    public DatePick() {
    }

    public List<String> getTimeSlot() {
        List<String> dates = new ArrayList<String>() {
            private static final long serialVersionUID = 3109256773218160485L;

            {
                add("01/1/2012");
                add("02/1/2012");
                add("03/1/2012");
                add("04/1/2012");
                add("05/1/2012");
                add("06/1/2012");
                add("07/1/2012");
                add("08/1/2012");
                add("09/1/2012");
                add("10/1/2012");
                add("11/1/2012");
                add("12/1/2012");
            }
        };
        return dates;
    }
} 
```

这是页面...

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./WEB-INF/templates/main.xhtml"
                xmlns:h="http://java.sun.com/jsf/html">
    <ui:define name="content">
        <table>
            <tr>
                <td>
                    <ui:repeat value="#{datePick.timeSlot}" var="timeSlot">
                        <h:outputText value="#{timeSlot}"/><br/>
                    </ui:repeat>
                </td>
            </tr>
        </table>
    </ui:define>
</ui:composition> 
```

结果是预期的输出。**注意：**我没有开始或结束对话。

有一些问题在 2.1 中在几个不同的版本中得到了修复。您需要查看特定版本的发行说明和已解决的问题。

**更新**

我在这里发布了完整的解决方案：[stackoverflow-ui-repeat-example](http://code.bluelotussoftware.com/stackoverflow-uirepeat-example)

# mysql - 在表中添加新的行 ID

> ID：12795338
> 
> 赞同：1
> 
> 时间：2012-10-09T07:55:27.200
> 
> 标签：mysql

我有 3 个选项可以将新的 UNIQUE id (primary_key) 添加到我的一个特定表中。

1.  创建 AUTO_INCREMENT 字段。
2.  SELECT id FROM table ORDER BY id DESC LIMIT 1
3.  从表中选择 MAX(id)

我目前正在使用选项**2**，因为人们可能会从他们访问的表中删除行，因此 id 被释放，否则我将使用选项**1**

你推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:03:46.690

您应该*始终*使用选项 1（为了避免两个同时插入的客户端在完成插入之前 读取当前最大值的[竞争风险）。](http://en.wikipedia.org/wiki/Race_condition)通过使用使读写操作原子化的锁来防止这种危险的发生。`id``AUTO_INCREMENT`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:58:17.723

选项1

自动递增

这是实现和维护的最简单方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:09:02.020

创建一个数据库序列并改用它，即使在多线程访问场景和分布式环境以及集群环境中，它也会给您更多的说服力。

# http-headers - 通过 Zend 下载一个 excel 文件

> ID：12795339
> 
> 赞同：3
> 
> 时间：2012-10-09T07:55:27.217
> 
> 标签：http-headers, zend-framework2

我需要下载存储在服务器上的 excel 文件。但我无法在 ZF2 中找到下载示例。我正在尝试以下代码

```
$response = new Response();
$response->getHeaders()->addHeaders(array(
    'Content-Type' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'Content-Disposition' => 'attachment;filename="forecast_template.xlsx"',
    'Cache-Control' => 'max-age=0',
));
$response->setContent(file_get_contents($xlsx_file_name)); 
```

但它没有用。我尝试了 setRawBody ，但这给未定义的方法带来了错误。我也尝试了“echo $response”，但这只是转储标题+二进制数据的字符串输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:37:14.363

使用 MVC，您可以通过 开始文件下载`short-circuiting`（`MvcEvent`为此，只需返回`Response`实例而不是`ViewModel`）。

以下示例片段适用于我：

```
use Zend\Http\Headers;

(...)

$response = $this->getEvent()->getResponse();
$response->setHeaders(Headers::fromString("Content-Type: application/octet-stream\r\nContent-Length: 9\r\nContent-Disposition: attachment; filename=\"blamoo.txt\""));

$response->setContent('blablabla');

return $response; 
```

# sql - 删除 stibo STEP CMS 中的 blob 后数据库大小如何增加？

> ID：12795340
> 
> 赞同：1
> 
> 时间：2012-10-09T07:55:27.713
> 
> 标签：sql, oracle, oracle10g

我们使用一个 CMS 系统（我猜它在后台使用一个 oracle 数据库）。CMS（因此数据库将数千张图像保存为 blob）问题是当我们使用自定义删除工具在 CMS 中进行批量删除时（预计数据库大小会变小）但 Zabbix 监控我们看到数据库大小神秘地开始增加！

问题可能出在哪里的任何“想法”？也许数据库需要更新或清除命令？或者它是一个试图备份所有已删除内容的 CMS 错误？但这也没有意义。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:15:22.537

乍一看，这似乎令人惊讶，但是一旦您考虑到数据库的设计目的，就不是这样了。数据库是一种在磁盘上存储数据的高级方法，专门针对以下任务进行了优化：

1.  快速访问数据。
2.  快速添加/删除数据。

这两个要求的一个必然结果是，当您删除某些内容时，不会立即释放数据。在（1）的情况下，那是因为数据以表格的形式存储在磁盘上，以便快速访问；为了让 Oracle 在您删除一些记录时释放磁盘空间，所有内容都必须移动并重新组织。在 (2) 的情况下，当您删除事物时，Oracle 预计您将来可能会添加新记录。因此，它节省了空间，以便在您添加新内容时可以快速再次使用它。

所有这一切意味着您不应该仅仅因为您删除了一些记录而期望磁盘存储空间减少。（正如 Albin Sunnanbo 所指出的，如果有轻微的增加，很可能是由于事务日志）。

如果您需要减少数据库正在使用的磁盘空间，有多种策略可以直接告诉数据库这样做。我不是 Oracle 用户，但[这个讨论](http://openacs.org/forums/message-view?message_id=29613)似乎很有帮助。

# seo - 如何在自然搜索结果中对网站的特征进行分类？

> ID：12795348
> 
> 赞同：0
> 
> 时间：2012-10-09T07:55:51.693
> 
> 标签：seo

我们如何对 SO 所具有的任何特定网站的功能进行分类。

职业，问题，登录同样如此。

谢谢。

![对网站功能进行分类](../Images/f01ea400f97cbb4445fa4fdc95f572f5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:10:44.350

这取决于谷歌，但如果你有一个好的网站结构，也许它会增加你的机会 - [来源](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334)

编辑：现在有一种方法可以对特定网站的功能进行分类等等 - 这是一个很好的解释： [http ://dashburst.com/google-search-what-are-rich-snippets/](http://dashburst.com/google-search-what-are-rich-snippets/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T11:20:42.123

“通常”这样做：

1）您需要不经常更改的首屏导航链接，即它们会保持很长时间。

2）您的网站需要在您的主要品牌名称中排名第一。示例：对 stackoverflow 或 bing 的搜索会返回所有 google 变体（本地/国家 tld）上的相应网站。这意味着谷歌 100% 承认“您的品牌名称”关键字无疑应该与您的网站相关联。

3）您的网站需要是一个权威网站，在社交圈中拥有丰富的内容或/和声誉。（这实际上是最模糊的一点！）

前 2 点你很容易达到，第 3 点很棘手！

# android - 安卓聊天应用

> ID：12795351
> 
> 赞同：-3
> 
> 时间：2012-10-09T07:56:03.627
> 
> 标签：android, livechat

我正在android中制作一个聊天应用程序。我能够进行实时聊天。但是当用户在线或离线时我无法获得。我怎样才能达到同样的效果

谢谢

这是代码

```
private void getListener() {
        Roster roster = connection.getRoster();
        Collection<RosterEntry> entries = roster.getEntries();
        for (RosterEntry rosterEntry : entries) {
            String user = rosterEntry.getUser();
            Presence presence = roster.getPresence(user);
            System.out.println("User : " + user);
            System.out.println("Presence : " + presence); // 1
            System.out.println("Presence type: " + presence.getType()); // 2
            System.out.println("Presence mode: " + presence.getMode());
        }
    } 
```

但我总是得到不可用的状态，当这个人有空时也是如此。请告诉我任何解决方案该怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:06:04.077

将**Online**字段添加到您的用户数据库中，登录后将其更改为**true**，注销后将其更改为**false**。在您的聊天应用程序中，定期（每 180 秒）向您的服务器请求用户的在线字段，并将其显示给用户。

# android - Android 动态壁纸 - 为什么这么慢 - 如何提高速度？

> ID：12795362
> 
> 赞同：1
> 
> 时间：2012-10-09T07:56:26.823
> 
> 标签：android, live-wallpaper, slowdown

我正在尝试创建我的第一个动态壁纸。它可以工作，除了速度问题，一切都会好起来的。它会减慢桌面速度 - 小部件和图标的滚动速度明显低于使用专业动态壁纸时的速度（我正在三星笔记上对其进行测试，因此不应该存在速度问题）。我开始认为我做错了 - 所以请看一下我的代码：

```
public class DemoWallpaperService extends WallpaperService {

@Override
public Engine onCreateEngine() {
    return new DemoWallpaperEngine();

}

private class DemoWallpaperEngine extends Engine {
    private boolean mVisible = false;
    private final Handler mHandler = new Handler();

     int x=0,y=0,a=255,i=-1, a1=255, i1=-1;
     float r=0,rs=1;
     float rx1=10, rxs=-1;

     private Matrix mMatrix = new Matrix();
     private Matrix mMatrix1 = new Matrix();
     private Matrix mMatrixRotate1 = new Matrix();
     private Matrix mMatrixRotate2 = new Matrix();

     public Bitmap spaceShip = BitmapFactory.decodeResource(getResources(), R.drawable.spaceship);
     public Bitmap background= BitmapFactory.decodeResource(getResources(), R.drawable.back2short2j);
     public Bitmap wyspa= BitmapFactory.decodeResource(getResources(), R.drawable.wyspa22g);
     public Bitmap ksiezyc = BitmapFactory.decodeResource(getResources(), R.drawable.ksiezyc);
     public Bitmap reflektorfront= BitmapFactory.decodeResource(getResources(), R.drawable.reflektorwyspa);

     private float mPixels;
     private float mPixels1;

    private final Runnable mUpdateDisplay = new Runnable() {
    @Override
    public void run() {
        draw();
    }};

    private void draw() {
       SurfaceHolder holder = getSurfaceHolder();
       Canvas c = null;

       Display d = ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
       int wx= d.getWidth();
       int wy= d.getHeight();

       try {
           Runtime.getRuntime().gc();
          c = holder.lockCanvas();
          c.save();

          if (c != null) {

              Paint paintMoon = new Paint();

              if(a1<=15){
                  i1=1;
              }
              else if(a1>=255){
                  i1=-1;
              }
              a1+=5*i1;
              paintMoon.setAlpha(a1);

              c.translate((float)mPixels, 0f);
              c.drawBitmap(background, mMatrix, null);
              c.drawBitmap(ksiezyc, 1027*wx/480,15*wy/800, paintMoon);

              if(rx1<=-15){
                  rxs=1;
              }
              else if(rx1>=15){
                  rxs=-1;
              }
              rx1+=rxs*0.7;

              c.translate((float)mPixels1, 0f);
              //reflektor wyspa back
              mMatrixRotate2.setTranslate(340*wx/480,300*wy/800);
              mMatrixRotate2.preRotate(rx1,reflektorfront.getWidth()/2,20);
              c.drawBitmap(reflektorfront, mMatrixRotate2, null);

              c.drawBitmap(wyspa, mMatrix1, null);

              if(r<=-15){
                  rs=1;
              }
              else if(r>=15){
                  rs=-1;
              }
              r+=rs*0.5;

              mMatrixRotate1.setTranslate(160*wx/480,380*wy/800);

              mMatrixRotate1.preRotate(r,reflektorfront.getWidth()/2,20);

              c.drawBitmap(reflektorfront, mMatrixRotate1, null);

              if(x<c.getWidth()){
              x+=3;}
              else{x=0;}
              if(y<c.getHeight()){
              y+=3;}
              else{y=0;}
              Paint paint = new Paint();

              if(a<=5){
                  i=1;
              }
              else if(a>=255){
                  i=-1;
              }
              a+=10*i;
              paint.setAlpha(a);

              c.drawBitmap(spaceShip,x,y,paint);

                 c.restore();

          }
       } finally {
          if (c != null)
             holder.unlockCanvasAndPost(c);
       }
       mHandler.removeCallbacks(mUpdateDisplay);
       if (mVisible) {
           mHandler.postDelayed(mUpdateDisplay, 10);
       }
    }
    @Override
    public void onOffsetsChanged(float xOffset, float yOffset,
             float xStep, float yStep, int xPixels, int yPixels){

        super.onOffsetsChanged(xOffset, yOffset, xStep, yStep, xPixels, yPixels);                   
         mPixels = xPixels*7/4;

         mPixels1 = 500+xPixels;

            draw();
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        mVisible = visible;
        if (visible) {
            draw();
        } else {
            mHandler.removeCallbacks(mUpdateDisplay);
        }
    }

     @Override
      public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height) {

         super.onSurfaceChanged(holder, format, width, height);

         float w = background.getWidth();
         float h = background.getHeight();
         float s = height / (float)h;
         float z = height / (float)h;
         mMatrix.reset();
         mMatrix1.reset();
         mMatrixRotate1.reset();
         mMatrixRotate2.reset();

         mMatrix.setScale(s, s);
         mMatrix1.setScale(z, z);
         mMatrixRotate1.setScale(s, s);

         draw();
      }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        mVisible = false;
        mHandler.removeCallbacks(mUpdateDisplay);
    }

    @Override
     public void onCreate(SurfaceHolder surfaceHolder) {
         super.onCreate(surfaceHolder);

         setTouchEventsEnabled(false);
     }

    @Override
    public void onDestroy() {
         super.onDestroy();
         mVisible = false;
         mHandler.removeCallbacks(mUpdateDisplay);
    }
} 
```

基本上它的背景位图（850x480jpg 70kb），滚动速度较慢，前面的位图（350x400透明gif 100 kb）滚动速度更快（以实现视差效果）和一些较小的png位图（3x 10-20 kb 50x50）正在旋转并在前景移动（灯光和太空船）。

我的问题是 - 我错过了重点 - 我通过刷新 draw() 函数来设置动画，延迟设置为 10。（这是我知道的唯一方法 - 我应该以其他方式为它设置动画吗？位图太大了吗？或者为什么这么慢？我应该使用精灵来为前面的小效果制作动画以使其更快吗？还有其他动画生活壁纸的方法吗？我经历了很多教程，我已经走了这么远，但现在我不得不寻求帮助.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:19:37.613

我不确定这是否是完整的答案......但值得尝试一下。而不是使用 Bitmap.decodeResources() 方法引用位图，试试这个：

```
pic1 = Bitmap.createScaledBitmap(background, (int)background.getWidth(), (int)background.getHeight(), true); 
```

我一直在构建视差壁纸一段时间，并发现缓慢通常是由于在屏幕上绘制了多少位图。

# c# - Request.UrlReferrer.AbsoluteUri 在 IE 中不起作用

> ID：12795367
> 
> 赞同：-3
> 
> 时间：2012-10-09T07:56:33.263
> 
> 标签：c#, asp.net, referrer

`Request.UrlReferrer.AbsoluteUri`不在 IE 中工作，但在 Firefox 和 Chrome 中工作。

将表单数据从一个网站发布到另一个网站时，我正在发送带有 url 的查询字符串。

在页面加载中，我使用了以下代码：

```
Request.UrlReferrer.AbsoluteUri.tostring(); 
```

它在 Firefox 和 Chrome 中给出了正确的值。在 Internet Explorer 中，返回一个 NULL 值。如何获得推荐人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:20:33.420

`Request.UrlReferrer.AbsoluteUri` 基于浏览器应发送的 HTTP_REFERER 标头。但是，与留给客户的所有事情一样，它是可变的。

我 IE 有时会因为 Sicurity 问题而去除该标题，因为它相信它有助于跟踪用户行为。另外，我确信有一些 Firefox 扩展可以做同样的事情。

只需将 url 附加到 GET 字符串并以此为基础进行重定向

# html - Facebook 点赞和评论代码脚本

> ID：12795375
> 
> 赞同：4
> 
> 时间：2012-10-09T07:57:00.577
> 
> 标签：html, facebook, facebook-like, facebook-javascript-sdk, facebook-comments

我需要为每个页面获取一个唯一的 url，并修改了我通过此处其他成员的帮助找到的脚本。

一个用于点赞按钮，另一个用于评论框。没有这么多代码，有没有更优雅的方法来做到这一点？

```
<br>

<!-- start facebook like code-->
<div id="thelike"></div>
<script>
var thisurl = document.URL;
function changeCommentsUrl(newUrl){
// should refresh fb like plugin for the "newUrl" variable
document.getElementById('thelike').innerHTML='';
parser=document.getElementById('thelike');
parser.innerHTML='<div class="fb-like" data-href="'+newUrl+'" data-send="true" data-layout="button_count" data-width="400" data-show-faces="false"></div>';
FB.XFBML.parse(parser);
}
changeCommentsUrl(thisurl);
</script>
<!-- end facebook like code-->

<br>

<!-- start facebook comment code-->
<div id="thecomments"></div>
<script>
var thisurl = document.URL;
function changeCommentsUrl(newUrl){
// should refresh fb comments plugin for the "newUrl" variable
document.getElementById('thecomments').innerHTML='';
parser=document.getElementById('thecomments');
parser.innerHTML='<div class="fb-comments" data-href="'+newUrl+'" data-num-posts="10" data-width="400"></div>';
FB.XFBML.parse(parser);
}
changeCommentsUrl(thisurl);
</script>
<!-- end facebook coment code-->

<br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:05:04.717

如果您在生成代码时没有输入 URL，那么如果这是您想要实现的目标，它将默认为当前页面。

# delphi - ExitWindowsEx - 外部异常 80000003

> ID：12795376
> 
> 赞同：0
> 
> 时间：2012-10-09T07:57:03.433
> 
> 标签：delphi, exception, delphi-7

> **可能重复：**
> [如何摆脱异常 80000003？](https://stackoverflow.com/questions/11927877/how-to-get-rid-of-exception-80000003)

要通过代码强制关闭 PC，我们使用`ExitWindowsEx`Delphi 7 中的函数它运行良好，但在我们的一个用户的 PC 上， `ExitWindowsEx`触发异常：“**外部异常 80000003** ”

电脑是：Windows 7 x64 Service Pack 1 build 7601

为什么 ？

# asp.net-web-api - NewtonJson.NET 4.0.8.0 版的 RavenDb 客户端问题

> ID：12795378
> 
> 赞同：2
> 
> 时间：2012-10-09T07:57:04.127
> 
> 标签：asp.net-web-api, ravendb, json.net

我在集成测试项目中遇到了 RavenDb 客户端和 NewtonJson.NET 的问题。我收到以下异常：

> 程序集 'System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 使用 'Newtonsoft.Json, Version=4.5.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed' 版本高于引用程序集“Newtonsoft.Json，版本=4.0.8.0，Culture=neutral，PublicKeyToken=30ad4fe6b2a6aeed”...\packages\Microsoft.AspNet.WebApi.Client.4.0.20710.0\lib\net40\System.Net.Http.Formatting .dll

我需要使用使用 NewtonSoft.Json 4.5.0.0 的 System.Net.Http.Formatting 和使用 4.0.8.0 的 RavenDb 客户端。 **我不想使用 RavenDb 的不稳定版本，**因为此代码需要快速投入生产。你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:19:01.870

使用 RavenDB 1.0.972（稳定版），它依赖于 NewtonSoft.Json 4.5.7。你可以在 NuGet 上找到它。

[https://nuget.org/packages/RavenDB.Client/1.0.972](https://nuget.org/packages/RavenDB.Client/1.0.972)

# licensing - 去语言许可证

> ID：12795381
> 
> 赞同：13
> 
> 时间：2012-10-09T07:57:14.657
> 
> 标签：licensing, go

我之前也问过类似的[问题](https://stackoverflow.com/questions/12673778/proper-licensing-for-a-website-built-using-twitter-bootstrap)，但这次我想专注于`go`语言。我一直在阅读[go 语言的 wiki 页面，](http://en.wikipedia.org/wiki/Go_%28programming_language%29)并意识到摘要中有一个许可证段，上面写着`BSD style + Patent grant`. 我知道还有一个`gcc`前端`go`，我猜它有类似`GPL`许可证的东西，尽管在 wiki 页面中没有提到它，这让我想知道：

**上述`BSD`许可证是否用于：**

*   编译器
*   和/或语言
*   和/或标准库

**如果有这样的区别吗？**

欢迎提供实用的答案（即我如何许可源代码或二进制文件？）以及与旧语言（`C`, `C++`, `Java`）的对比（如果有的话）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T08:40:07.873

Go 的大部分内容都根据[三条款 BSD 风格的许可](http://code.google.com/p/go/source/browse/LICENSE)和[专利授权](http://code.google.com/p/go/source/browse/PATENTS)进行许可。这包括 gc 编译器、标准库和其他相关工具。我知道有两个值得注意的例外：

[语言规范](http://golang.org/ref/spec)和其他网站文档根据知识共享署名 3.0 许可获得许可。滚动到 golang.org 上任何页面的最底部即可查看。（我想这意味着一些源代码注释的许可方式相同，这似乎有点奇怪。）

gccgo 的前端使用与 Go 的其余部分相同的 BSD 样式许可证，但是因为它必须与 gcc 的其余部分链接，所以它实际上是 GPLv3。（请注意，与 janneb 的说法相反，gccgo 不与其他编译器共享任何代码。它确实共享一些运行时代码。）

一直在努力将 gccgo 前端中依赖于 gcc 的部分分离出来，以便它可以用作其他 Go 编译器的前端，例如基于 LLVM 的编译器。这样的编译器可以完全在 BSD 风格许可下发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:14:28.307

BSD 许可证适用于编译器和标准库。我不知道“语言本身”的许可证是什么；这甚至意味着什么，语言规范的文本，或者？

GCC 中的 go 前端也是 BSD 许可的（AFAIK 它与其他 go 编译器共享代码），尽管 GCC 编译器的其余部分仍然在 GPLv3 下。

# php - 在php中显示文件夹中的图像

> ID：12795385
> 
> 赞同：0
> 
> 时间：2012-10-09T07:57:31.093
> 
> 标签：php, image

您好，我有这段代码可以在 php 中显示文件夹中的图像：

```
$handle = opendir(dirname(realpath(__FILE__)).'/galerija/accomodation/');
while($file = readdir($handle)) {
    if($file !== '.' && $file !== '..') {
        echo '<img src="galerija/accomodation/'.$file.'" rel="colorbox" />';
    }
} 
```

一切正常，但我如何设置按名称或其他内容显示文件夹排序器，因为我真的需要对图像进行排序，而这个脚本显示的只是随机图像。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:00:07.633

使用[glob](http://nl3.php.net/glob)和[排序](http://nl.php.net/sort)：

```
$files = glob("*.jpg");
sort($files);
foreach ($files as $file) {
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:00:07.590

您应该首先将图像 ( `$files`) 存储到数组中，例如`$aImages[] = $file`。您可以使用 PHP 中的几个排序函数对数组进行排序。`asort(), usort(), sort()...`. 见[http://php.net/manual/en/ref.array.php](http://php.net/manual/en/ref.array.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:40:43.037

你应该在这里找到你的答案： [Sorting files by creation/modification date in PHP](https://stackoverflow.com/questions/2325650/sorting-files-by-creation-modification-date-in-php)

还有其他类似的帖子，您可以在其中获得另一个有用的排序功能。

这样您的代码应如下所示：

```
if($h = opendir(dirname(realpath(__FILE__)).'/galerija/accomodation/')) {
  $files = array();
  while(($file = readdir($h) !== FALSE){
    if($file !== '.' && $file !== '..'){
       $files[] = stat($file);
    }
  }

  // do the sort
  usort($files, 'sortByName');

  // do something with the files
  foreach($files as $file) {
            echo '<img src="galerija/accomodation/'.$file.'" rel="colorbox" />';
  }
}

//some functions you can use to sort the files
//sort by change time
//you can change filectime with filemtime and have a similar effect
function sortByChangeTime($file1, $file2){
    return (filectime($file1) < filectime($file2)); 
}

function sortByName{
    return (strcmp($file1,$file2)); 
} 
```

# c# - 动态菜单系统的最佳方法

> ID：12795386
> 
> 赞同：2
> 
> 时间：2012-10-09T07:57:32.487
> 
> 标签：c#, winforms, menu

早晨！

我目前正在编写一个有很多菜单项的新软件。目前，我在嵌入式 XML 中定义了菜单结构，以及每个项目的权限，并且菜单可以正确绘制。

我正在就将每个菜单项链接到在选择它时将运行的方法的最佳方法提出一些建议。刚才，每个菜单项都有一个唯一的 ID，所以我想我会让所有菜单项调用一个方法，然后为该菜单项调用一个特定的方法，但我想知道是否有更好的方法这。

此外，使用存储在字符串中的方法名称调用方法的最佳方法是什么。我有名为“MenuOption_xxx”的方法，其中 xxx 是 ID - 但我需要在选择菜单项时调用该方法。

感谢任何指针或更好的建议，干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:03:04.943

尝试使用`Reflection`，例如按名称调用对象方法：

```
Type yourType= yourObject.GetType();
MethodInfo theMethod = thisType.GetMethod("MenuOption_xxx"); 
theMethod.Invoke(this, null); 
```

您可以将 menus`Tag`属性设置为标识符：

```
menuItem1.Tag = "X"; // name or id of this menuitem
menuItem2.Tag = "XX";
menuItem3.Tag = "XXX"; 
```

然后设置`Click`事件：

```
menuItem1.Click += MenuItem_Click;
menuItem2.Click += MenuItem_Click;
menuItem3.Click += MenuItem_Click; 
```

关于`Click`事件：

```
private void MenuItem_Click(object sender, EventArgs e)
{
    var id = (String) ((MenuItem))sender.Tag;

    // use reflection:
    Type yourType= yourObject.GetType();
    MethodInfo theMethod = thisType.GetMethod(String.Format("MenuOption_{0}", id)); 
    theMethod.Invoke(this, null);
}

public void MenuOption_X
{
 ...
}
public void MenuOption_XX
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:13:33.187

我想代表的解决方案如下所示：

```
public class MenuItem
{
    public delegate ActionResult MenuAction(ActionParams params);
} 
```

您应该声明 ActionResult 和 ActionParams 类并在其中包含您需要的所有成员。您甚至可以将它们抽象化并针对每个单独的案例从它们继承。

然后，从代码中调用 MenuAction 将如下所示：

```
var closeWindow = new MenuItem{.......}; //initialize your variable or call a constructor

var result = closeWindow.MenuAction(params); //pass some params 
```

# excel - 什么是 COLUMN() 的 VBA 等效项，即在没有提供参考的情况下找到公式所在的单元格的列？

> ID：12795390
> 
> 赞同：2
> 
> 时间：2012-10-09T07:57:54.637
> 
> 标签：excel, vba

它看起来像这样

```
Function COL()

   COL = WorksheetFunction.Column()

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:06:44.547

[Application.Caller](http://msdn.microsoft.com/en-us/library/office/ff193687.aspx)将为您提供对单元格的引用，您可以从中获取列。例如

```
Public Function COL()
    Select Case TypeName(Application.Caller)
    Case "Range"
       COL = Application.Caller.Column
    Case Else
       COL = "unknown"
    End Select
End Function 
```

# c - printf 在它应该已经被打印之后改变它的值

> ID：12795391
> 
> 赞同：3
> 
> 时间：2012-10-09T07:57:57.370
> 
> 标签：c, printf

所以我在这里有这个代码，它（现在）只是把一个base1数字变成一个base 10数字

```
/**
 * This function is supposed to convert 'number' from base1 to a number in base2.
 * It isn't fully implemented yet, and I've only converted base1 to a base 10 number.
 */
void base1_base2(int base1, int base2, int number) {

    int num, place = 0;
    int rem = number;
    int i;
    for (i = 0; i < num_digits(number); i++) {

        int mod = rem % 10;
        rem = floor(rem / 10);

        int powerResult = pow(base1, place++);
        num = num + mod * powerResult;  
    }

    int base10_num = num;

    printf("The number %i(base%i) in base 10 is: %i\n", number, base1, base10_num);
} 
```

这会计算出正确的 base10 数，即函数调用 base1_convert(2, 5, 100) 将返回 4，正如预期的那样：

`The number 100(base2) in base 10 is: 4`

当我将此代码直接添加到该函数的最后一个 printf 下方时，就会出现问题：

```
int base2_num = 0;
printf("The number %i(base%i) is: %d\n", number, base1, base2_num); 
```

如果添加上面的代码，它会完全改变第一个 printf 的结果，使其返回：

```
The number 100(base2) in base 10 is: 4196784.
The number 100(base2) is: 0 
```

我无法为我的生活弄清楚为什么会这样。我猜它与一些指针有关，但我并没有真正使用过任何指针，而且我不知道为什么添加一个看似独立的变量`int base2_num = 0;`会改变这一切。

这是添加上述行后的完整修改代码。

```
void base1_base2(int base1, int base2, int number) {

    int num, place = 0;
    int rem = number;
    int i;
    for (i = 0; i < num_digits(number); i++) {

        int mod = rem % 10;
        rem = floor(rem / 10);

        int powerResult = pow(base1, place++);
        num = num + mod * powerResult;  
    }

    int base10_num = num;

    printf("The number %i(base%i) in base 10 is: %i\n", number, base1, base10_num);

    int base2_num = 0;
    printf("The number %i(base%i) is: %d\n", number, base1, base2_num);

    return;
} 
```

编辑：这是我使用的唯一其他函数，num_digits。它返回整数中的位数。

```
int num_digits(int integer) {

    char int_string[100];
    int str_length;
    sprintf(int_string, "%i", integer);
    str_length = strlen(int_string);

    return str_length;
} 
```

这里是我调用函数的地方：

```
int main() {
    printf("Hello World\n");
    base1_base2(2, 5, 100);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T08:21:04.613

只要注意写：

```
int num = 0, place = 0; 
```

你一定会完成的。

这就是为什么我建议逐行声明一个变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:17:50.667

作为你，我不明白这里发生了什么。

如果这是 1990 年，我会说您使用 32 位整数值并`printf()`期望 16 位整数，但在这种情况下这是不正确的：如果存在宽度不匹配，那么所有其他数字也将是错误的。所以它会打印

```
The number 0(base100) 
```

或者

```
The number 100(base0) 
```

取决于您平台的字节序。

由于问题不在您的代码中，因此它必须在其他地方。建议：

1.  尝试摆脱`num_digits()`. 请参阅下面的评论。

2.  添加更多`printf()`s 以查看所有值如何变化

3.  在调试器中运行代码

4.  关闭编译器的所有优化标志。也许其中一个触发器是一个错误。

5.  启用编译器支持的所有警告标志。

一些评论：

1.  `num_digits(number)`是一个相当昂贵的功能；不要循环调用它（即N次）。而是将结果缓存在局部变量中。或者只是在为 0 时停止`rem`（即用 替换`for`循环`while(0 != rem)`）。

2.  名字`base1`不好。改为使用`inputBase`，因为这传达了意图。

3.  没有必要使用`floor()`; 整数除法总是向下取整。

# facebook-fql - 计算 Facebook 中线程的消息长度

> ID：12795397
> 
> 赞同：0
> 
> 时间：2012-10-09T07:58:22.677
> 
> 标签：facebook-fql

我正在使用以下查询读取 Facebook 的“线程”表中的 message_count 参数：SELECT message_count, thread_id FROM thread WHERE folder_id = 0 AND viewer_id=me()

我得到的结果很多次都是错误的，例如我得到一个有 24 条评论的线程的计数约为 800。知道为什么吗？这是一个错误吗？有没有其他方法可以在不计算线程本身的评论数量的情况下获得对话的长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T17:57:13.793

消息计数字段是正确的，我已经在几个线程上对其进行了测试，API 可能不会在

`SELECT message_id, body FROM message WHERE thread_id = THREAD_ID`称呼

您可以使用 LIMIT 和 OFFSET 参数来解决这个问题。

# wordpress - 如何在 Nginx 上限制 WordPress 管理员 wp-login.php

> ID：12795398
> 
> 赞同：1
> 
> 时间：2012-10-09T07:58:24.423
> 
> 标签：wordpress, nginx

如何使用 Nginx Config 限制 WordPress wp-login.php 被公众访问。

我知道如何使用 htaccess 限制访问，但我如何在 Nginx 上做到这一点？

这是我尝试过的配置。

```
location /wp-login.php {
       auth_basic            "Restricted";
       auth_basic_user_file  /var/www/example.com/.htpasswd;
} 
```

当我访问 wp-admin 时，可以下载整个 wp-login.php 文件。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-05T14:00:22.297

*这*对我有用——注意`location ~*` **没有**

```
location ^~ /wp-login.php {
    auth_basic            "Restricted Area: WordPress";
    auth_basic_user_file  /home/path/to/passwords/.htpasswd;
} 
```

当然，这是对 a 的补充`location /wp-admin`。

我相信这是因为`~*`（4th）在[Nginx 搜索顺序](http://wiki.whyaskwhy.org/Nginx/Location)中低于`^~`（2nd）。

我确实想知道另一个包含文件中是否存在一个`location ~ \.php$`块导致 wp-login 块被忽略（总是值得检查您的主配置文件），但它似乎没有，并且重新排序文件对任何一种模式都没有影响.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:07:37.707

您需要 auth 基本模块：

而且我认为您只能将其应用于目录：

```
location /wp-admin {
       auth_basic            "Restricted";
       auth_basic_user_file  /var/www/example.com/.htpasswd;
} 
```

这仅在您安装了 apache 工具时才有效，如果没有，请参阅：[http ://wiki.nginx.org/Faq#How_do_I_generate_an_htpasswd_file_without_have_Apache_tools_installed.3F](http://wiki.nginx.org/Faq#How_do_I_generate_an_htpasswd_file_without_having_Apache_tools_installed.3F)

第二点；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T17:15:44.863

我在尝试阻止我的域上的 wp-login.php 时遇到了类似的问题。

我发现如果我不完全匹配文件名，它将正常工作。

最终为我工作的是：

```
location ~* (wp-login)\.php$ {
    auth_basic            "Restricted Area: WordPress";
    auth_basic_user_file  /home/path/to/passwords/.htpasswd;
} 
```

此设置阻止我的浏览器下载登录文件并将其实际解析为 PHP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-10T05:44:12.463

我测试了不同的片段，但没有一个可以保护 wp-admin 和 wp-login.php。问题不仅仅在于保护。而是访问 wp-login.php。根据 .htpasswd 输入正确的凭据后，wp-login.php 页面作为附件下载。我无法登录。这个剪断为我完成了这项工作并保护了 wp-admin 和 wp-login.php：

```
## Protect my wordpress login page and directory with a password 
    location = /wp-login.php {
    auth_basic  "Login";
    include snippets/fastcgi-php.conf;
    auth_basic_user_file /etc/nginx/.htpasswd;
    fastcgi_pass unix:/run/php/php8.0-fpm.sock;
    } 
```

我已经写了一个完整的答案。您可以[在此页面上](https://stackoverflow.com/questions/66444298/secure-wp-login-php-in-wordpress-using-the-nginx-configuration-file/66558913#66558913)找到它。

# ruby - 什么情况下方法调用成功？

> ID：12795402
> 
> 赞同：1
> 
> 时间：2012-10-09T07:58:33.407
> 
> 标签：ruby

`a.foo`在调用`foo`receiver方法的Ruby表达式中，`a`以下哪个条件会影响调用是否成功？

1.  `a`响应 foo 方法。
2.  `a`的类，或其超类或包含的模块之一，以处理 foo 方法的方式实现 method_missing。
3.  `a`是类的实例，而不是类本身。
4.  `a`有正确的类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:43:17.380

从给定的选项中，如果调用成功，以下条件会影响

```
 - a responds to the foo method.    

 - a's class, or one of its superclasses or included modules, implements
       method_missing in a way that handles the foo method. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:13:45.810

首先，每个对象都是某个类的实例。类本身是类的实例`Class`，而`Class`本身是类的子`Module`类。

任何对象都会响应其类或其单例类（在您动态添加方法时自动创建）以及所有祖先类/模块定义的实例方法。和所有的祖先（包括模块）。

如果对象没有响应发送给它的方法，那么**如果** `method_missing`已经为它定义了方法，则执行它。

这里没有任何东西可以确保调用成功。任何方法或库都可能在执行原始方法或`method_missing`.

另外，请注意公共、受保护和私有方法之间的区别（私有和受保护方法对允许调用它们的人有限制）。

# hibernate - JPA如何选择没有多个属性的对象

> ID：12795407
> 
> 赞同：0
> 
> 时间：2012-10-09T07:58:47.200
> 
> 标签：hibernate, jpa

我使用休眠 3.5.4-final。我有两个 JPA 课程。

```
 @Entity
    @Table(name = "SPI_V_OP_OBJ_SUBJECT_VR")
    public class OpSubject_vr extends PersistenceEntity implements Serializable {

        private static final long serialVersionUID = 1858749317461707015L;
        /** id */
        @Id
        @GeneratedValue(strategy = GenerationType.AUTO)
        @Column(name = "ID",
                nullable = false)
        private Long id;

        /** name */
        @Column(name = "F_NAME")
        private String f_name;

        /** type */
        @Column(name = "SUBJECT_TYPE")
        private String subject_type;

        /** okved */
        @ManyToMany
        @JoinTable(name = "SPI_V_OP_OBJ_SUBJECT_VR_OKVED",
                   joinColumns = {@JoinColumn(name = "OBJECT_ID",
                                              referencedColumnName = "ID",
                                              nullable = false)},
                   inverseJoinColumns = {@JoinColumn(name = "SPR_ID",
                                                     referencedColumnName = "ID",
                                                     nullable = false)})
        private List<OpSprOkved> okved_id_mult = new ArrayList<>();
} 
```

和

```
@Entity
@Table(name = "SPI_V_OP_SPR_OKVED")
public class OpSprOkved extends PersistenceEntity implements Serializable {

    /** id */
    @Id
    @Column(name = "ID", nullable = false)
    private Long id;

    /** code*/
    @Column(name = "CODE")
    private String code;

    /** name*/
    @Column(name = "name")
    private String name;
} 
```

属性 okved_id_mult 是多个。我想选择具有空属性 okved_id_mult 的对象 OpSubject_vr。

我试过

`select ent from OpSubject_vr ent where okved_id_mult is empty; (hibernate error)`

`select ent from OpSubject_vr ent where okved_id_mult is null; (hibernate error)`

`select distinct ent from OpSubject_vr ent join ent.okved_id_mult i1 where i1.code is null;(return 0 objects)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:01:57.537

1.  查询很好，但您需要将 okved_id_mult 限定为 ent.okved_id_mult。
2.  限制集合属性是非法的。
3.  您需要修改查询以使用左连接。那么它在逻辑上等价于第一个查询。

[请参阅https://github.com/BatooOrg/BatooJPA/tree/master/community/src/test/java/org/batoo/jpa/community/test/t2](https://github.com/BatooOrg/BatooJPA/tree/master/community/src/test/java/org/batoo/jpa/community/test/t2)上的测试用例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-01T20:04:56.487

使用“not in”运算符。此查询将检查您的“okved_id_mult.id”是否未出现在所有现有的 OpSprOkved.id 中：

```
 select ent from OpSubject_vr ent where okved_id_mult.id not in
   ( select O.id from OpSprOkved O) 
```

# operating-system - 在 OS X 上使用注入的 dylib 覆盖 libc 函数

> ID：12795410
> 
> 赞同：0
> 
> 时间：2012-10-09T07:58:59.140
> 
> 标签：operating-system, dylib, libc, mach-o

我正在尝试`puts()`用我自己的实现覆盖一些 libc 函数（例如：）。

我在 dylib 文件中定义了自己的实现，如下所示。

```
int puts ( const char * str ); 
```

当我将我的二进制文件与 Xcode 中的 dylib 文件链接并构建时，我的覆盖版本被调用。

但是，当我将 dylib 注入到我的二进制文件中时，我看到没有调用覆盖的版本。我已经通过在 dylib 的入口点记录一些内容来验证 dylib 正在加载。

这里有人可以指出我需要做什么才能调用我的覆盖版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T13:13:32.490

这是预期的行为，因为当您链接时，您的库优先于 libSystem.B.dylib，这是导出 puts 的位置（作为 libsystem_c 和朋友的重新导出）。

要在运行时获得此功能，您需要显式使用函数插入。这是DYLD的一大特色。在您的库中，创建一个小部分：

```
static const interpose_t interposing_functions[] \
    __attribute__ ((section("__DATA, __interpose"))) = {
        { (void *)my_puts,  (void *) puts  } 
    }; 
```

# post - cxf POST 在 ubuntu 上失败

> ID：12795412
> 
> 赞同：1
> 
> 时间：2012-10-09T07:59:02.127
> 
> 标签：post, ubuntu, cxf

我们有 apache CXF 应用程序可以在 Windows 上运行，但不能在 Ubuntu 上运行。GET 请求有效，但 POST 请求不接收消息正文。接收消息的上传类：

```
@Path("/api/user/{userId}")
public class Upload {
  @POST
  @Path("upload")
  @Produces(MediaType.APPLICATION_JSON)
  @Consumes(MediaType.MULTIPART_FORM_DATA)
  public FileRecord upload(@PathParam("userId") String userId, 
                           @QueryParam("key") String accessKey,
                           @Multipart(value="FileRecord", type=MediaType.APPLICATION_JSON) FileRecord fileRecord,
                           @Multipart(value="BodyRecord", type=MediaType.APPLICATION_OCTET_STREAM) InputStream body) { 
```

fileRecord 在 ubuntu 上为空，但在 Windows 上没问题。

我们发送的消息：（标题）

```
POST http://192.168.1.71:9000/api/user/tdq/upload HTTP/1.1
Accept-Encoding: gzip,deflate
Accept: application/json
MIME-Version: 1.0
content-type: multipart/form-data;boundary="123"
Content-Length: 443
Host: 192.168.1.71:9000
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5) 
```

（身体）

```
--123
Content-Disposition: form-data; name="FileRecord"
Content-Type: application/json
Content-ID: FileRecord

{"FileRecord":{"name":"UploadTest"}}
--123
Content-Disposition: form-data; name="BodyRecord"
Content-Type: application/octet-stream
Content-ID: BodyRecord

This is a body
--123 
```

# matlab - Matlab imshow，蒙太奇在 x64 上不起作用，但在 x86 上起作用

> ID：12795414
> 
> 赞同：1
> 
> 时间：2012-10-09T07:59:08.230
> 
> 标签：matlab, image-processing

我有 2 台机器，一台运行 x86 Ubuntu Precise，另一台是 x64。我为他们两个都安装了 MATLAB。相同的版本，相同的许可文件，只是 MATLAB 的架构不同。图像处理工具箱已安装到两者，相同的版本。在 x86 机器上一切正常，但在 x64 机器上，图像处理工具箱的某些功能根本不起作用，例如 montage、imshow 等。这是 ver 命令的输出：

```
MATLAB Version 7.13.0.564 (R2011b)
MATLAB License Number: 659101
Operating System: Linux 3.2.0-30-generic #48-Ubuntu SMP Fri Aug 24 16:52:48 UTC 2012  x86_64
Java VM Version: Java 1.6.0_17-b04 with Sun Microsystems Inc. Java HotSpot(TM) 64-Bit Server VM mixed mode
-------------------------------------------------------------------------------------
MATLAB                                                Version 7.13       (R2011b)  
Simulink                                              Version 7.8        (R2011b)
Communications System Toolbox                         Version 5.1        (R2011b)
Control System Toolbox                                Version 9.2        (R2011b)
Curve Fitting Toolbox                                 Version 3.2        (R2011b)
DSP System Toolbox                                    Version 8.1        (R2011b)
Fixed-Point Toolbox                                   Version 3.4        (R2011b)
Image Processing Toolbox                              Version 7.3        (R2011b)
Neural Network Toolbox                                Version 7.0.2      (R2011b)
Signal Processing Toolbox                             Version 6.16       (R2011b)
SimPowerSystems                                       Version 5.5        (R2011b)
Simscape                                              Version 3.6        (R2011b)
Statistics Toolbox                                    Version 7.6        (R2011b)
Symbolic Math Toolbox                                 Version 5.7        (R2011b)
System Identification Toolbox                         Version 7.4.3      (R2011b)
Wavelet Toolbox                                       Version 4.8        (R2011b) 
```

如果我尝试运行 imshow，我会得到：

```
>> imshow x
Undefined function or variable 'imshow'. 
```

然而，当我写 imsh... 并按 tab 时，Matlab 似乎知道这个功能。我很困惑。

我已经尝试解决这个问题将近两天了，现在我很绝望。我需要这些功能正常工作，否则我无法做作业。欢迎任何提示。

# ios - iOS 5.x / iOS 6 中的蓝牙默认连接间隔

> ID：12795415
> 
> 赞同：0
> 
> 时间：2012-10-09T07:59:09.600
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy

我实现了 BLE 芯片和 iOS 设备之间的数据交换。为了暂时加快数据传输，芯片侧的连接间隔被动态修改为：

```
- min interval : 20 ms
- max interval: 40 ms
- slave latency : 0
- timeout : 300 * 10ms 
```

**首次使用 iOS 5.1 设备进行测试**

在 iOS 5.1 上更改此参数需要 6 秒。结果间隔连接超过 40 毫秒（44 毫秒）。在连接间隔更改之前，“默认”间隔连接似乎约为 100 毫秒。

**使用 iOS 6 设备进行相同测试**

在 iOS 6.0 上，这个参数的改变只需要 1 秒。结果间隔连接超过 40 毫秒（48 毫秒）。在连接间隔更改之前，“默认”间隔连接似乎约为 28 毫秒。

**以下是我的问题：**

1.  有人可以根据 iOS 版本确认连接间隔的这些“默认”值吗？
2.  有没有办法在不到 6 秒的时间内处理 iOS 5.1 上连接间隔值的变化？如果是，如何？
3.  为什么连接间隔的询问值似乎没有正确更改（iOS 5.1 上为 44 > 40，iOS 6 上为 48 > 40）？

# python - PEP-333 和 PEP-3333 之间的差异

> ID：12795418
> 
> 赞同：0
> 
> 时间：2012-10-09T07:59:16.807
> 
> 标签：python, python-3.x, wsgi

我已经阅读了很多关于[PEP-333](http://www.python.org/dev/peps/pep-0333/)和[PEP-3333 的](http://www.python.org/dev/peps/pep-3333/)信息。但我似乎仍然不明白 3333 提供解决方案的 333 中的主要问题。

我还看到[了 Armin Ronacher 在 DjangoCon 2010 上的演讲](http://blip.tv/djangocon-europe-2010/armin-ronacher-the-future-of-wsgi-and-python-3-3696398)，他在那里谈到了 WSGI 和 Python 3 的问题——但我仍然无法理解他在说什么。

我也明白 Python 3 中的主要问题是`str`和`bytes`类型之间的严格分离，但我不明白它如何影响 WSGI，以及 Python 3 究竟如何使它难以处理 WSGI。

我也不明白 PEP-333 和 PEP-3333 之间的区别，以及 3333 如何（[至少目前](http://blog.dscpl.com.au/2010/10/is-pep-3333-final-solution-for-wsgi-on.html)）解决了 Python 3 的问题。

请详细解释所有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:38:15.410

有关问题的一些背景，请阅读：

[http://blog.dscpl.com.au/2009/09/roadmap-for-python-wsgi-specification.html](http://blog.dscpl.com.au/2009/09/roadmap-for-python-wsgi-specification.html)

PEP 的最后一组更改不一定与该文档中的任何特定提案集完全匹配，但可能会带来一些见解。

# php - 使用 PHP 返回子目录名称

> ID：12795423
> 
> 赞同：0
> 
> 时间：2012-10-09T07:59:29.937
> 
> 标签：php, javascript, jquery, html

> **可能重复：**
> [PHP获取给定目录的所有子目录](https://stackoverflow.com/questions/2524151/php-get-all-subdirectories-of-a-given-directory)

是否可以使用 PHP 和/或 Jquery/Javascript 来做到这一点：

1）从一个列表菜单中打开一个文件夹，然后

2）选择里面的子文件夹。

我不需要内容，只需要子文件夹名称。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:20:56.673

这可能会有所帮助

```
if ($handle = opendir('/path/to/files')) {
    echo "Directory handle: $handle\n";
    echo "Entries:\n";

    /*  to loop over the directory. */
    while (false !== ($entry = readdir($handle))) {
        echo "$entry\n";
    }
} 
```

还

```
$dir    = '/tmp';
$files1 = scandir($dir);
list all files and folders in side tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:03:42.550

对的，这是可能的。不，不是通过javascript（至少当您想从与客户端不同的机器上获取文件夹列表时）。这可以通过 PHP 来实现。请参阅[http://www.php.net/manual/en/function.opendir.php](http://www.php.net/manual/en/function.opendir.php)。通过使用`is_dir()`，您可以检查目录中的文件是否为目录。

请注意，如果您想从某个文件夹中获取所有子文件夹，您应该创建一个函数来从文件夹中获取文件夹（如上所述）。然后每次在您正在搜索的文件夹中找到一个文件夹时递归地使用此函数。参见例如[PHP 中的递归函数是什么？](https://stackoverflow.com/questions/2648968/what-is-a-recursive-function-in-php)

# css - 这个奇怪的边距是从哪里来的？

> ID：12795426
> 
> 赞同：3
> 
> 时间：2012-10-09T07:59:47.957
> 
> 标签：css, firebug, margin

主页在 div#site_wrap 上方没有任何空间，所有内容都在其中，但投资组合页面的上边距很大，不会出现在 firebug 的任何地方。

参考：[http ://www.brainbuzzmedia.com/themes/simplybusiness/?page_id=91](http://www.brainbuzzmedia.com/themes/simplybusiness/?page_id=91)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:12:36.250

我知道问题出在哪里...

是这条线

```
<div class="clear"></div> 
```

在这个部分

```
<div class="announcement_wrapper">
    <div class="announcement">
        <div class="announcement_message"><p>This is an announcement box! Click close to remove it after you've read it.</p></div>
        <div class="close_announcement"><p>close x</p></div>
        <div class="clear"></div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:14:24.720

找到解决方案：添加`margin-top: -40px;`到`.block_wrapper {}`

# objective-c - 从 IBAction 推送视图控制器

> ID：12795428
> 
> 赞同：0
> 
> 时间：2012-10-09T07:59:53.037
> 
> 标签：objective-c, uinavigationitem, pushviewcontroller

在 NavigationController 中，我有一个 TabBarController。我有一个 TabBarController 的 NavigationItem 的自定义类，它是 UINavigationItem 的子类。我的 NavigationItem 有一个 TabBarButtonItem，其中包含一个 UIButton。我已经为这个按钮定义了一个动作。我的问题是我如何以编程方式从这个动作中推动另一个观点？我怎样才能在这个类中获得导航控制器？或者为此存在另一种方式？

在.h中：

```
@interface CustomNavigationItem : UINavigationItem
{
    IBOutlet UIBarButtonItem *barbtnApply;
    IBOutlet UIButton *btnApply;
}
@property(nonatomic,retain) UIBarButtonItem *barbtnApply;
@property(nonatomic,retain) UIButton *btnApply;
-(IBAction)actionApply:(id)sender;

@end 
```

以 .m 为单位：

```
@implementation CustomNavigationItem

@synthesize btnApply = _btnApply;
@synthesize barbtnApply = _barbtnApply;

-(IBAction)actionApply:(id)sender
{
    btnApply = sender;
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"test" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    //push to other view
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:21:32.450

也许您应该声明一个委托并在按钮方法上调用它。

在您的 CustomNavigationItem.h

```
@protocol CustomNavigationItemDelegate <NSObject>

-(void)shouldPushViewController;

@end

@interface CustomNavigationItem : UINavigationItem{
      id<CustomNavigationItemDelegate> delegate;
}

@property (nonatomic, assign) id<CustomNavigationItemDelegate> delegate; 
```

在您的 CustomNavigationItem.m

```
@implementation CustomNavigationItem

@synthesize btnApply = _btnApply;
@synthesize barbtnApply = _barbtnApply;
@synthesize delegate;

 -(IBAction)actionApply:(id)sender
 {
     btnApply = sender;
     [self.delegate shouldPushViewController];
}
@end 
```

在你的 viewcontroller.m

设置委托

在.h

```
@interface MyViewController:UIViewController <CustomNavigationItemDelegate> 
```

米

```
 mynavigationItem.delegate = self; 
```

并实现方法

```
-(void)shouldPushViewController{
    [self.navigationController pushViewController:viewControllerToPass animated:YES];
} 
```

# javascript - 10 个字符后自动提交表单

> ID：12795429
> 
> 赞同：-1
> 
> 时间：2012-10-09T08:00:05.160
> 
> 标签：javascript, jquery

我希望当用户在输入字段中输入第十个字符时自动提交我的表单。

这是我的代码：

```
<form id="Form" action="action.php" method="post">
<input name="htno" type="text" value="" />&nbsp;
<input type="submit" value="Submit" />
</form> 
```

我不知道如何使用 jQuery 或 ajax。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:06:55.353

试试这个，使用 if 语句来检查输入的长度

```
$('#here').keyup(function () {
    if (this.value.length == 10) {
        $('#subHere').click();
    }
}); 
```

[**演示**](http://jsfiddle.net/6E5FX/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T08:09:31.443

在这里，您有一个可能的解决方案：

```
$(function () {
    $('#theText').bind('change keyup', function () {
        if ($(this).val().length >= 10) {
            $('#Form').submit();             
        }
    })

});​ 
```

（您需要将文本输入标识为“theText”）

小提琴：http: [//jsfiddle.net/2R6vd/](http://jsfiddle.net/2R6vd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:16:21.513

这是[**演示**](http://jsfiddle.net/sureshpattu/8LzRN/1/)

脚本是

```
$('#htno').keydown(function(){
    var vallenth=$(this).val().length;
    if(vallenth==10){
        alert('l');
        $('#Form').submit();
    }
    });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:00:06.560

试试这个代码：

```
$(document).ready(function(){
     $("#htno").keydown(function(){
          if($("#htno").val().length == 10){
                  $('#Form').submit();
                } 
          });
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-09T08:09:48.300

尝试 -

```
$(#id of the text field).keydown(function(e){
  if($(this).val().length == 10)
    $('#Form').submit()
}); 
```

见[http://api.jquery.com/keydown/](http://api.jquery.com/keydown/)

阿贾克斯是不同的。提交表单时，它要么作为 HTML 请求，要么作为 JS (ajax)。HTML 将刷新页面。JS不会。

# c# - 如何在 c# win form 2.0 中找到比特定控件具有更高选项卡索引的控件？

> ID：12795434
> 
> 赞同：0
> 
> 时间：2012-10-09T08:00:07.287
> 
> 标签：c#, winforms

我不确定这个问题是否早先被问过。**如问题所述，我可以以获胜形式（通过Controls.Find()**方法）获取所有控件的集合。现在，假设我有一个带有**tab index=5的****TextBox**控件，我需要**找到**那些**tab index > 5**的控件。我不知道如何或从哪里开始。这就是为什么我不能粘贴任何代码段的原因。希望没关系。

 ******提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:02:18.107

您可以使用 LINQ

```
var controls = this.Controls
                    .Cast<Control>()
                    .Where(r => r.TabIndex > 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:05:10.643

检查`TabIndex`控件的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:07:03.173

试试这段代码，其中 TextBox1 是 TextBox 的名称

```
for (int i = 5; i < tabControl1.TabCount; i++)
{
    if (tabControl1.TabPages[i] != null)
    {
        var textBox = tabControl1.TabPages[i].Controls.Find("TextBox1", false);
        //...
    }       
} 
```******

# object - Ext.XTemplate 循环遍历对象

> ID：12795436
> 
> 赞同：0
> 
> 时间：2012-10-09T08:00:16.170
> 
> 标签：object, loops, extjs, extjs4.1

我的控制器返回如下数据：

```
{
   "success":true,
   "data":{
      "35":{
         "msg":{
            "32":{
               "module_id":"35",
               "alert_id":"32",
               "alert_datetime":"2012-11-28 16:19:19",
               "param1_type":"imo",
               "param1_value":"453465",
               "param2_type":"",
               "param2_value":"0",
               "param3_type":"",
               "param3_value":"0",
               "msg":"triiiis dve",
               "count":1
            },
            "33":{
               "module_id":"35",
               "alert_id":"33",
               "alert_datetime":"2012-10-28 00:00:00",
               "param1_type":"imo",
               "param1_value":"54984",
               "param2_type":"",
               "param2_value":"0",
               "param3_type":"",
               "param3_value":"0",
               "msg":"triis tri",
               "count":1
            }
         }
      },
      "42":{
         "msg":{
            "1":{
               "module_id":"42",
               "alert_id":"1",
               "alert_datetime":"2012-10-28 16:19:19",
               "param1_type":"imo",
               "param1_value":"9281906",
               "param2_type":"",
               "param2_value":"0",
               "param3_type":"",
               "param3_value":"0",
               "msg":"",
               "count":1
            }
         }
      },
      "39":{
         "msg":{
            "2":{
               "module_id":"39",
               "alert_id":"2",
               "alert_datetime":"2012-10-28 12:36:31",
               "param1_type":"imo",
               "param1_value":"65464546",
               "param2_type":"",
               "param2_value":"0",
               "param3_type":"",
               "param3_value":"0",
               "msg":"",
               "count":1
            }
         }
      }
   }
} 
```

之后我这样做

```
that.tpl.overwrite(that.el, Ext.decode(response).data); 
```

问题是我无法遍历结果对象键...我知道如何遍历具有预定义键名的对象，但我的是动态生成的...
将不胜感激一些帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:46:10.490

我假设您对嵌套的深度有所了解（在这种情况下，“数据”元素下方有 4 个级别）：

您可以使用[Ext.Object.each](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Object-method-each)遍历数据（也许也有一些查询方法，不确定），也可以遍历每个元素的子元素。如果您使用 Ext.data.Model 实例，您可以使用 Ext.data.association 链接来循环数据。

在这种情况下，您可以为每个级别制作不同的模板，并将每个模板的结果插入到上面级别的模板中。

这听起来比我想象的要难。

模板中的 foreach 目前确实仅适用于支持订阅者。

# multithreading - SmartThreadPool 阻塞 UI 线程

> ID：12795439
> 
> 赞同：0
> 
> 时间：2012-10-09T08:00:21.180
> 
> 标签：multithreading

单击按钮时，我正在运行以下代码：

```
 foreach (string item in urlQueue)
                {

                    log("creating job " + iia.ToString());
                    _smartThreadPool.QueueWorkItem(
                        new Amib.Threading.Func<string, int, int, string, int>(checkURLSmart),
                        item, iia, 5000, kryptonTextBox1.Text);

                    iia++;
                }

                Application.DoEvents();

                _smartThreadPool.Start();

                _smartThreadPool.WaitForIdle();
                _smartThreadPool.Shutdown(); 
```

出于某种原因，这阻塞了 UI 线程，有什么想法可以解决这个问题吗？我希望 UI 在队列工作时能够响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:04:18.567

您不应该在 GUI 线程中调用 WaitForIdle()。在 .NET 中使用[http://msdn.microsoft.com/en-us/library/a06c0dc2.aspx或](http://msdn.microsoft.com/en-us/library/a06c0dc2.aspx)[http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html) invokeLater () 在 Java 中代替。

这种机制将您的代码放入队列中以便在 GUI 线程中执行。因此，您可以使用回调参数中的已处理数据更新 GUI 视图。

另请参阅有关 Invoke 和 BeginInvoke 之间差异的说明：[Invoke() 和 BeginInvoke() 之间的区别](https://stackoverflow.com/questions/229554/whats-the-difference-between-invoke-and-begininvoke)

# vba - 使用存储在 CustomXMLPart 中的 base64 数据作为 Office 中的图像

> ID：12795440
> 
> 赞同：3
> 
> 时间：2012-10-09T08:00:25.263
> 
> 标签：vba, excel, ms-office, base64, ms-word

作为有关使用存储在功能区按钮上的 Excel 文件中的图像的[问题的后续行动：](https://stackoverflow.com/q/12686125/1490783)

是否可以使用以 base64 编码字符串存储在 CustomXMLPart/CustomXMLNode 中的图像作为 Office 文档中的图像，而无需先将其保存到磁盘并重新加载？

我想使用图像的地方将一个`IPictureDisp`对象作为参数（就像`LoadPicture`函数返回一样，但这只会从磁盘加载文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:07:58.137

首先，您需要将 base_64 数据转换为字节数组：

```
Private Function decodeBase64(ByVal strData As String) As Byte()
    Dim objXML As MSXML2.DOMDocument
    Dim objNode As MSXML2.IXMLDOMElement

    Set objXML = New MSXML2.DOMDocument
    Set objNode = objXML.createElement("b64")
    objNode.DataType = "bin.base64"
    objNode.Text = strData
    decodeBase64 = objNode.nodeTypedValue

    Set objNode = Nothing
    Set objXML = Nothing
End Function 
```

来自：[http ://thydzik.com/vb6vba-functions-to-convert-binary-string-to-base64-string/](http://thydzik.com/vb6vba-functions-to-convert-binary-string-to-base64-string/)

然后您可以将其加载到内存中并使用有关此主题的信息创建您的 IPictureDisp：[http ://www.xtremevbtalk.com/showthread.php?t=137857](http://www.xtremevbtalk.com/showthread.php?t=137857)

```
Type GUID
  Data1 As Long
  Data2 As Integer
  Data3 As Integer
  Data4(7) As Byte
End Type

Private Declare Function CreateStreamOnHGlobal Lib "ole32.dll" (ByRef hGlobal As Any,     ByVal fDeleteOnResume As Long, ByRef ppstr As Any) As Long
Private Declare Function OleLoadPicture Lib "olepro32.dll" (ByVal lpStream As IUnknown, ByVal lSize As Long, ByVal fRunMode As Long, ByRef riid As GUID, ByRef lplpObj As Any) As Long
Private Declare Function CLSIDFromString Lib "ole32.dll" (ByVal lpsz As Long, ByRef pclsid As GUID) As Long

Private Const SIPICTURE As String = "{7BF80980-BF32-101A-8BBB-00AA00300CAB}"

Public Function PictureFromArray(ByRef b() As Byte) As IPicture
  On Error GoTo errorhandler

  Dim istrm As IUnknown
  Dim tGuid As GUID

  If Not CreateStreamOnHGlobal(b(LBound(b)), False, istrm) Then
    CLSIDFromString StrPtr(SIPICTURE), tGuid
    OleLoadPicture istrm, UBound(b) - LBound(b) + 1, False, tGuid, PictureFromArray
  End If

  Set istrm = Nothing
  Exit Function
errorhandler:
  Debug.Print "Could not convert to IPicture!"
End Function 
```

# php - 尝试使用 memcached 运行应用程序时发生符号查找错误

> ID：12795441
> 
> 赞同：0
> 
> 时间：2012-10-09T08:00:25.250
> 
> 标签：php, memcached

我有一个包含一些 memcached 操作的应用程序。我已经安装了 php memcached 扩展版本 2.0.1。从配置到安装一切都很顺利，没有错误。

现在在我的应用程序中，我实例化了一个 memcached 实例，当我运行 addServer 或 get 或 set 等方法时，一切运行正常。但是当我开火`getStats`或`getVersion`收到此错误时

`/usr/local/bin/php: symbol lookup error: /usr/local/lib/php/extensions/no-debug-non-zts-20060613/memcached.so: undefined symbol: zend_parse_parameters_none`

谁能帮我这个？从昨天开始就一直坚持这个。

另一个奇怪的现象是 NetBeans。我使用版本 7.0.1。当我创建一个 memcache 对象时，我会在输入时获得自动完成，`$memcObj->`但当对象是 memcached 时，情况并非如此。没有自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:51:53.570

我相信`zend_parse_parameters_none`是在 2008 年为 Zend API 引入的。

```
sh ~> git blame Zend/zend_API.h
...
11e5d2f2 (Zeev Suraski        2001-07-30 02:07:52 +0000 247)    _zend_get_parameters_array_ex(param_count, argument_array TSRMLS_CC)
cc2b17d5 (Felipe Pena         2008-03-10 22:02:41 +0000 248) #define zend_parse_parameters_none()                                                                               \
cc2b17d5 (Felipe Pena         2008-03-10 22:02:41 +0000 249)    zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "")
58f88057 (Andrei Zmievski     2001-07-09 18:51:29 +0000 250) 
```

[我想您的 PHP 版本与 PECL 的Memcached](http://pecl.php.net/package/memcached)扩展不兼容，因为您的扩展目录在[2006-11-02](http://en.wikipedia.org/wiki/PHP#Release_history) ( `no-debug-non-zts-20060613`) 之前有一个时间戳。

理想情况下，您应该考虑升级 PHP。否则，试试 PECL 的[Memcache](http://pecl.php.net/package/memcache)扩展；其中，确实提供了一个稳定的版本来匹配您的 PHP 构建。

# java - 单击JButton时如何删除JTable中的当前行？

> ID：12795442
> 
> 赞同：-1
> 
> 时间：2012-10-09T08:00:27.450
> 
> 标签：java, swing, jdbc, jtable

我有很多行`JTable`，每行都有删除按钮。当我单击该行的删除按钮时，我想删除当前行。我怎样才能做到这一点？

```
private JButton button;
public MyTableButtonEditor1() {
    button = new JButton("REMOVE");
    button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            DbUtility ViewEmployee =new DbUtility();
            ViewEmployee.loadDriver();
            ViewEmployee.connect();
            ResultSet rs= ViewEmployee.executeDeleteQuery(Employeeid);
            JOptionPane.showMessageDialog(null, "Employee Removed");
        }
    });
} 
```

数据库连接

```
public ResultSet  executeDeleteQuery(String Employeeid ) {

    PreparedStatement pstmt ;
    try {

        pstmt = conn.prepareStatement("DELETE FROM employee  WHERE EmployeeId ="+Employeeid  );

        pstmt.execute();
    }
    catch (SQLException ex){
        // handle any errors
        System.out.println("SQLException: " + ex.getMessage());
        System.out.println("SQLState: " + ex.getSQLState());
        System.out.println("VendorError: " + ex.getErrorCode());
    }
    return rs;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T08:31:39.973

**来自 Kleoptra 的反馈更新**

触发按钮后，您需要更新编辑器的状态并停止单元格编辑过程。

```
public void actionPerformed(ActionEvent e) {

    deleteFlag = true;

    // This needs to be called that the model and table have a chance to
    // reset themselves...
    stopCellEditing();

} 
```

`deleteFlag`您需要从编辑器返回值`getCellEditorValue`

```
public Object getCellEditorValue() {
    return deleteFlag;
} 
```

不要忘记在编辑器初始化时重置你的标志。

```
public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
    deleteFlag = false;
    // Set up and return your button...
} 
```

现在在您的模型中，您需要通过覆盖`setValueAt`表模型的方法来捕获事件......

```
public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    switch (columnIndex) {
            case indexOfButtonColumn:
                if (aValue instanceof Boolean && ((Boolean) aValue).booleanValue()) {
                    // Delete row from database...
                    // Update you internal model.  DefaultTableModel has a removeRow
                    // method, if you're using it.

                    // Other wise you will need to update your internal model
                    // and fire the rows delete event in order to update the table...
                    fireTableRowsDeleted(rowIndex, rowIndex);
                }
                break;
    }
} 
```

现在就个人而言，我总是在后台线程或工作线程中执行任何耗时的任务。这将防止 UI “挂起”。

您可能想阅读[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T08:05:04.560

您必须在表格模型中执行此操作。例如，如果你使用`javax.swing.table.DefaultTableModel`你可以调用它的`removeRow()`方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T08:03:45.577

您发布的代码中有几个错误 - `actionPerformed`jButton1 没有，而`ListSelectionModel`.

看起来您正在使用 NetBeans？您可以在设计时将列表选择模型设置为表格的属性。由于 IDE 还应该创建`actionPerformed`事件（作为受保护的代码），我不确定它去了哪里。

```
model.removeRow(rowid); // this line is all you need 
//table.remove(rowid); <- this line is probably the error 
```

从模型中移除就足够了——您不需要从表格组件中移除。我认为这个删除是继承自 `java.awt.Component`并试图从表中删除一个组件。

# python - 监控 Python 函数

> ID：12795451
> 
> 赞同：0
> 
> 时间：2012-10-09T08:00:59.843
> 
> 标签：python

我想在 Python 中执行某些函数后做一些事情，但我无法更改或调用该函数。有什么想法吗？

例如：

```
class Target(object):
  def __init__(self):
    self.__id = 123

  def fun(self):
    print "called by target %d" % self.__id 
```

我想在“有趣”运行后打印一些东西，但我不能更改或调用类 Target

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:13:06.527

也许您只需用包装方法替换原始方法就可以了：

```
t = Target()

old_fun = t.fun
def new_fun():
    old_fun()
    print "even more fun"

t.fun = new_fun
t.fun() 
```

印刷：

> 目标 123 调用
> 更有趣

请注意，这不会更改类，而只会更改实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:09:40.367

```
class MyTarget(Target):
    def fun(self):
        super(MyTarget, self).fun()
        # your custom post processing 
```

**编辑：**由于控制对象创建不是一种选择，您可以考虑使用 Steak 先生答案的变体。如果您希望后处理影响 的所有实例`Target`，您可以使用如下内容：

```
Target.old_fun = Target.fun
def new_fun(self):
    self.old_fun()
    # custom post-processing
Target.fun = new_fun 
```

# ios - 如何以编程方式向以编程方式创建的 UIView 添加约束？

> ID：12795457
> 
> 赞同：16
> 
> 时间：2012-10-09T08:01:21.897
> 
> 标签：ios, xcode, constraints

我在 viewDidLoad 中使用以下代码创建了一个 UIView（其中“secondview”显然是 UIView 的名称）：

```
secondview = [[UIView alloc] initWithFrame:self.view.frame];
    [secondview setBackgroundColor: [UIColor yellowColor]];
    secondview.translatesAutoresizingMaskIntoConstraints = NO;
    [self.view addSubview:secondview]; 
```

然后在 viewDidAppear 我向这个视图添加了约束：

```
NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:secondview attribute:NSLayoutAttributeRight
    relatedBy:NSLayoutRelationEqual
    toItem:self.view
    attribute:NSLayoutAttributeRight
    multiplier:1.0f constant:-20.0f];
[self.view addConstraint:constraint]; 
```

但是，约束并未应用于视图（至少不是我能看到的）。相反，视图似乎只是从屏幕上消失了。但是，如果约束代码被注释掉，视图将再次加载适当的框架（显然没有应用约束）。将相同的约束应用于 Button 或 ImageView 时，约束会完美应用。这使我认为问题出在创建视图时的“initWithFrame”，因为按钮和 ImageView 实际上都不需要指定它的大小。

你怎么认为？我应该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T10:55:16.863

对于遇到此问题的任何人...我需要添加多个约束。那成功了。

# java - 如何通过 Google GData API 请求 OAuth 2.0 访问令牌？

> ID：12795459
> 
> 赞同：2
> 
> 时间：2012-10-09T08:01:32.693
> 
> 标签：java, oauth-2.0, google-data-api

如何通过 Google GData API 请求 OAuth 2.0 访问令牌？此 API 是否支持 OAuth 2.0？似乎 OAuth 1.x API 仅在[规范](https://developers.google.com/gdata/javadoc/com/google/gdata/client/authn/oauth/package-summary)中。

我已经获得了访问令牌。现在，我想通过 GData API 发送 OAuth2 请求。错误消息是：验证 OAuth2 请求时出错。

以下参数是否是正确的 Oauth2 请求标头：Header("Authorization", "Bearer" + accessToken) ??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:11:14.893

您首先使用您喜欢的任何方法（例如使用[google-api-java-client](https://code.google.com/p/google-api-java-client/wiki/OAuth2)或直接使用[REST](https://developers.google.com/accounts/docs/OAuth2)）来获取 OAuth 2 访问令牌，然后使用此访问令牌[设置您的 GData 客户端库服务](https://stackoverflow.com/questions/8228212/gdata-java-client-oauth2-access-token-secret)并使用它来调用一些API。

# x86 - 如何从 16 x 8 位 __m128i 值中提取 32 x 4 位整数

> ID：12795462
> 
> 赞同：5
> 
> 时间：2012-10-09T08:01:41.807
> 
> 标签：x86, bit-manipulation, sse, simd

假设我有这行代码，它使用 SSE2 加载 16 x 8 位无符号整数

```
// ptr is a pointer to uint8_t array
__m128i b = _mm_load_si128((const __m128i*) ptr); 
```

我想将每个 8 位无符号整数`b`（总共 16 个）拆分为 4 位高和 4 位低部分。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:58:06.920

您需要遮盖下部并将上部移动到正确的位置。因为没有字节移位 SSE 指令，所以移位后的上半部分也需要屏蔽。

```
__m128i b =  _mm_load_si128((const __m128i*) ptr);
__m128i mask = _mm_set1_epi8(0xf);
__m128i lower = _mm_and_si128(b, mask);
__m128i upper = _mm_and_si128(_mm_srli_epi16(b, 4), mask); 
```

# facet - 如何在 Google Refine 中将方面的值更改为相同？

> ID：12795466
> 
> 赞同：0
> 
> 时间：2012-10-09T08:01:58.397
> 
> 标签：facet, google-refine

我正在尝试清理这些数据：[https ://dl.dropbox.com/u/820037/local_council_election_data_w_occupation.gz](https://dl.dropbox.com/u/820037/local_council_election_data_w_occupation.gz)

这是芬兰地方议会选举的所有候选人。在“Ammatti”栏中，有候选人报告的职业。

我想找到所有的学生，但问题是，他们可以是“opiskelija”（学生）或“yliopisto-opiskelija”（大学生）之类的。

我单击列标题“Ammatti”并使用“opiskelija”对其进行过滤，然后从列标题的菜单中创建了一个“文本构面”。

这给了我以下方面：

*   农业。奥皮斯凯利亚 AMK 1
*   农学 9
*   农艺学 1

...等等。

在这些场合的每个人中，我都想将“Ammatti”（职业）的值更改为“opiskelija”（学生）。

为了让事情更复杂一点，这个方面还有一些职业（成熟的学生和行政人员）我不想改成“opiskelija”：

*   aikuisopiskelija 10
*   opiskelijakunnan hallituksen varapuheenjohtaja 1
*   opiskelijapalvelun päällikkö 1
*   opiskelijapalvelupäällikkö 1

我通过手动单击方面的整个列表并一一更改职业来做到这一点。

我想有更好的方法可以做到这一点，但有人可以告诉我我应该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:11:21.647

使用构面中的“包含”选项，从“Ammatti”列中选择要转换的所有行。然后在此列中调用 Transform 函数并将“value”替换为“opiskelija”

这将替换您通过“opiskelija”选择的所有值。

希望这会有所帮助（而且不会太晚）。

# http - TCP 与 HTTP 的持久连接？

> ID：12795470
> 
> 赞同：0
> 
> 时间：2012-10-09T08:02:18.860
> 
> 标签：http, tcp

所以我认为使用 HTTP 1.1，只要您与该服务器通信，您的 TCP 连接就会持续存在？它实际上是如何工作的，TCP 连接如何知道您何时完成写入套接字？任何形式都会很棒，我已经做过研究，但我找不到我要阅读的 RFC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:19:30.757

典型的实现是 HTTP 服务器将有一个超时（通常称为[KeepAliveTimeout](https://httpd.apache.org/docs/2.2/mod/core.html#keepalivetimeout)等） [，](http://wiki.nginx.org/HttpCoreModule#keepalive_timeout)之后它将关闭一个空闲连接。

为每个连接保留一个线程或整个进程的服务器（例如具有通常的 mpm_prefork 或 mpm_worker 的 apache），keepalives 通常被完全禁用或保持很短（几秒钟）。对于每个连接使用更少内存的基于事件的服务器，例如 nginx，keepalive 超时可以保留在更高的值（通常是一分钟左右）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:15:24.427

请参阅[RFC 2616 的第 8.1 节](https://www.rfc-editor.org/rfc/rfc2616#section-8.1)。基本上，HTTP 1.1 将所有连接视为持久连接，但 RFC 的语言并没有强制要求这种行为，因为它使用了“应该”这个词。如果是强制的，它将使用“MUST”。

但是，RFC 没有详细说明实现如何做到这一点。[从Wikipedia 上的 HTTP Persistent Connection 页面](http://en.wikipedia.org/wiki/HTTP_persistent_connection)可以看出，Apache 的默认超时时间（超过此时间，它会返回持久连接以供其他用途）可能低至 5 秒。（尽管考虑到 Apache 提供的所有其他旋钮和刻度盘，这几乎可以肯定是可配置的）。

换句话说，它意味着在短时间内向同一地址发送大量请求，以免浪费时间打开和关闭大量会话。增加此超时不是“搭便车”，因为在连接保持打开状态时资源被占用。在您期望有大量传入客户端的环境中，占用这些资源可能会对性能造成致命影响。

# php - php图片加载耗时

> ID：12795471
> 
> 赞同：3
> 
> 时间：2012-10-09T08:02:22.800
> 
> 标签：php

我有一个产品网站，里面有大约 100 张高质量的图片。每个图像的大小约为 6-7MB。

在我的数据库中，我存储了所有图像的路径及其名称。图像保存在文件夹 /images/product_name/ 中，但是当我在网页中显示这些图像时，页面需要永远加载。我所做的就是将 id 发送到表格，获取图像路径并将其显示在产品页面中。

如果我能就如何优化流程获得任何建议，那将非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T08:05:50.680

您发送给客户的图像很可能太大了。7MB 的大小对于产品图片来说听起来非常大，因此如果显示所有产品图片，则传输 100*7MB = 700MB 的数据。

如果您只需要小图像，请将它们缩小到一些 KB（缩略图）并使用它们显示在您的表格中。

注意：您可以在原始文件名前加上“tmb_”或“tmb_200x200_”之类的前缀，而不必触摸数据库中的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:16:54.927

通过阅读您的评论，我认为您正在寻找一些自动化过程来优化文件并以更体面的文件大小提供它们。

您应该查看[imageMagick](http://www.imagemagick.org/script/index.php)或[GD 库](http://php.net/manual/en/book.image.php)，它允许您调整图像大小（以及许多其他内容 - [http://php.net/manual/en/book.imagick.php](http://php.net/manual/en/book.imagick.php)）并优化它们。这可以与[YUI 图像裁剪](http://developer.yahoo.com/yui/examples/imagecropper/adv_crop.html)器之类的东西结合使用，以允许您选择图像的某些部分以显示在缩略图中。

这最好在上传时完成，这样服务器就不会在每次请求图像时不必要地重新生成图像，并存储在数据库中的缩略图列下。

如果您必须显示更大的图像，我建议您使用[灯箱](http://en.wikipedia.org/wiki/Lightbox_%28JavaScript%29)（请参阅此处的示例 - [http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)）或仅在客户端请求时加载更大图像的类似技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:05:06.060

您是否优化了图像（就文件大小而言）？例如在 Smush.it 上[http://www.smushit.com/ysmush.it/](http://www.smushit.com/ysmush.it/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:14:07.913

你真的应该优化你的图像。您可以使用 Photoshop 之类的商业产品或使用 GIMP 之类的免费产品来优化文件。
加载大约 700 MB 的图像对我来说只需要 1 天！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T08:16:07.403

将图像的大小缩小为缩略图，当用户单击缩略图时，然后加载原始文件。这可以提高性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T08:42:59.580

使用[http://luci.criosweb.ro/riot/](http://luci.criosweb.ro/riot/)压缩图像。是谷歌推荐的简单免费的图片压缩工具之一。

此外，正如之前提到的，确保您发送到列表页面的拇指大小约为 100 像素，并且只有当用户单击放大时，才会一一显示大拇指，即使在缩放选项中，您也应该只显示 1000 像素最大尺寸图像，根据格式和质量，不应超过 200-500k。

# mysql - 从mysql中的选定行数中查找行的行索引

> ID：12795473
> 
> 赞同：1
> 
> 时间：2012-10-09T08:02:24.170
> 
> 标签：mysql, sql, database, select

这是我的mysql查询

```
SELECT network_mst.NetworkId,network_mst.NetworkName,network_mst.InternationalDBStatus,network_mst.Of fshoreDBStatus,network_mst.InterDBStatus,network_mst.IntraDBStatus 
FROM network_mst INNER JOIN carrier_network ON network_mst.NetworkId=carrier_network.NetworkId
INNER JOIN user_network ON network_mst.NetworkId=user_network.NetworkId WHERE UserId=1
AND carrier_network.CarrierId IN (1) GROUP BY network_mst.NetworkId ORDER BY  network_mst.NetworkName; 
```

结果数据是 ![在此处输入图像描述](../Images/e89271015a7c49f67e022cc6c8d62a9e.png)

对不起，小图像。它有一个名为 NetworkId 的字段。所以我的问题是如何找到具有 NetworkId 2 的行的行索引。这里的答案是具有 NetworkId 2 的行的行索引是 3。但是如何使用查询找到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:07:15.150

试试这个：

```
SET @rownum = 0; 
Select *
FROM
(
   Select *,  (@rownum := @rownum+1) as rank
   FROM
   (
      -- Your current query here
   ) t
) sub WHERE rank = 3 
```

此查询应返回带有 的行，`netword_id = 2`因为它是第三行。但是您必须注意`ORDER BY`最内层查询中的子句，因为它控制着排名的顺序。

# java - 在服务器启动时获取应用程序服务器端口和地址

> ID：12795487
> 
> 赞同：1
> 
> 时间：2012-10-09T08:03:25.090
> 
> 标签：java, appserver

我希望在服务器启动时获取服务器名称和当前应用程序的端口。我设法通过以下方式获取主机名和地址：

```
hostName = InetAddress.getLocalHost().getHostName();
hostAddress = InetAddress.getLocalHost().getHostAddress(); 
```

但我无法获得端口。

我知道`ServletRequest getPort()`方法，但我的应用程序并不总是通过请求运行，有时操作是通过 MQ 执行的。因此，我不能依赖请求。

如果重要的话，我正在使用弹簧。

谁能帮我找到港口？

谢谢，

伊多布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:28:01.240

据我了解您的问题，您有一个在某个端口上运行的 CXF servlet，并且您希望以编程方式获取此端口 - 然后您有一些通过 MQ 发出的请求，由于您提到了应用程序服务器，我将假设这些请求转到消息驱动豆？

在您的 CXF servlet 中，您将可以访问 Request 对象并通过推断它运行的 HTTP 端口号。

如果您的问题是将数据从 MDB 获取到 CXF servlet，反之亦然，我建议您研究 JNDI 机制，而不是依赖于在运行时确定侦听端口。

干杯，

# javascript - 如何在html页面中显示警报

> ID：12795488
> 
> 赞同：-6
> 
> 时间：2012-10-09T08:03:25.360
> 
> 标签：javascript, html

如何在使用分页的单个 index.html 中使用四个页面时在 html 文件中显示警报。

我希望当单击 page_two 时，它会在加载该页面时显示警报

```
<div class="menu">
<ul>
    <li><a href="#index"><img src="images/mockup4_22.png" /></a></li>
    <li><a href="#page_one"><img src="images/mockup4_24.png"/></a></li>
    <li><a href="#page_two"><img src="images/mockup4_26.png" id="check"/></a></li> 
    <li><a href="#page_three" ><img src="images/mockup4_28.png" id="btn" /></a></li>

    <li><a href="#page_four"><img src="images/mockup4_30.png"/></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:08:06.717

在#page_two`onload`刚刚放`alert("your message");`

```
<html>
  <body onload="alert(....);">
  .....
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:14:46.333

```
onclick="javascript:alert('your msg')"; 
```

我是这样想的。

# javascript - Backbone - 从服务器获取原始响应

> ID：12795489
> 
> 赞同：0
> 
> 时间：2012-10-09T08:03:28.460
> 
> 标签：javascript, backbone.js

在 Backbone 中使用 POST/DELETE 方法时，如何获取服务器返回的原始响应（因此您无法在`fetch`/中获取原始响应，`parse`例如 GET）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:40:43.550

`responseText`ajax 调用完成后，您可以从服务器访问。

Backbone 中的`save`,​​ , etc 方法提供了调用.`fetch``$.ajax`

当这个promise 被解决（例如交易完成），你就可以访问`responseText`promise 的属性。

```
var promise = a_model.save();
$.when(promise).then(function(){
    console.log(promise.responseText); // if you're getting XML back it's `responseXML`
}); 
```

这是[jqXHR 对象上的 jQuery 文档，](http://api.jquery.com/jQuery.ajax/#jqXHR)这是您获得的承诺对象。

此外`$.when`并`.then`在[延迟对象文档中进行了描述](http://api.jquery.com/category/deferred-object/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-09T09:27:39.237

为什么不直接使用 Chrome 开发者工具中的网络标签？这是查看原始请求和响应的最简单方法。此外，它以易于查看的格式布局，显示 cookie、计时值等......

# javascript - 将javascript添加到超链接

> ID：12795490
> 
> 赞同：3
> 
> 时间：2012-10-09T08:03:34.943
> 
> 标签：javascript

如何向超链接添加 Javascript 警报？我想在有人点击链接时弹出警报。这是现在的脚本 -

```
<a href="<?php echo ($link1);?>" onclick="popitup();" data-role="button" data-theme="b" data-inline="true" > Send </a> 
```

我想将此添加到链接中

```
<script type="text/javascript">alert('Text.');</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:05:43.363

您应该定义您在属性`popitup()`中调用的函数：`onclick`

```
<script type="text/javascript">
    function popitup() {
        alert('Text.');
    }
</script> 
```

此外，如果您想阻止链接在某些情况下重定向，您可以从此处理程序返回 false：

```
<a href="<?php echo ($link1);?>" onclick="return popitup();" data-role="button" data-theme="b" data-inline="true"> Send </a> 
```

接着：

```
<script type="text/javascript">
    function popitup() {
        if (confirm('Are you sure you want to do that?')) {
            return true;
        }
        return false;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:08:46.300

如果警报应该执行某种逻辑，您可以像这样使用返回函数

```
<a href="newlink.html" onClick="return confirm('do you really wanna go to this link?')" >the link</a> 
```

或者只是以这种方式添加不带任何逻辑的警报

```
<a href="newlink.html" onClick="alert('you are going to the link! beware!')" >the link</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:04:36.997

尝试这个

`<a href="new.html" onclick="alert('This is going to link')"> link </a>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:07:36.857

您可以通过将 javascript: 放在语句之前将 javascript 语句添加到 href 属性，因此它类似于：

```
<a href="javascript: alert('Text.');" ></a> 
```

# salesforce - Salesforce：如何通知用户

> ID：12795496
> 
> 赞同：0
> 
> 时间：2012-10-09T08:03:46.420
> 
> 标签：salesforce

我需要在 Scheduled Apex 上通知用户。如何向用户或其他表单或通知发送电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:37:43.000

[您可以在此处](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_email_outbound.htm)使用可用于 apex 的电子邮件类。

```
Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage();
String[] toAddresses = new String[] {'user@acme.com'}; 
String[] ccAddresses = new String[] {'smith@gmail.com'};
mail.setToAddresses(toAddresses);
mail.setCcAddresses(ccAddresses);
mail.setReplyTo('support@acme.com');
mail.setSenderDisplayName('Salesforce Support');
mail.setSubject('New Case Created : ' + case.Id);
mail.setBccSender(false);    
mail.setUseSignature(false);    
mail.setPlainTextBody('Your Case: ' + case.Id +' has been created.');
mail.setHtmlBody('Your case:<b> ' + case.Id +' </b>has been created.<p>'+
     'To view your case <a href=https://na1.salesforce.com/'+case.Id+'>click here.</a>');
Messaging.sendEmail(new Messaging.SingleEmailMessage[] { mail }); 
```

# heroku - 找不到 Heroku 命令

> ID：12795498
> 
> 赞同：36
> 
> 时间：2012-10-09T08:03:49.647
> 
> 标签：heroku

安装 Heroku Toolbelt 后，在 Mac 上的终端中尝试运行以下命令：

```
heroku 
```

我得到错误：

```
bash: heroku: command not found 
```

当我做：

```
gem environment 
```

我得到：

```
- RUBYGEMS VERSION: 1.3.6
- RUBY VERSION: 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin11.0]
- INSTALLATION DIRECTORY: /Library/Ruby/Gems/1.8
- RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
- EXECUTABLE DIRECTORY: /usr/bin
- RUBYGEMS PLATFORMS:
 - ruby
 - universal-darwin-11
- GEM PATHS:
 - /Library/Ruby/Gems/1.8
 - /Users/Bart/.gem/ruby/1.8
 - /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8
- GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => true
 - :benchmark => false
 - :backtrace => false
 - :bulk_threshold => 1000
- REMOTE SOURCES:
 - http://rubygems.org/ 
```

我尝试向 $PATH 添加多个路径，但没有任何效果......

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-11T18:09:18.443

安装 Toolbelt 后手动添加符号链接为我修复了它。

`sudo ln -s /usr/local/heroku/bin/heroku /usr/bin/heroku`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2018-07-31T12:18:43.710

（这个答案适用于典型的其他人，可能会在这里登陆，并且可能会发现它很有用）

如果您`snap`通过命令行使用命令来安装 heroku snap，如下
`sudo snap install heroku --classic` 所示（您将在 heroku 文档中找到该内容）。
而且安装后 heroku 命令不可用。那么这里的解决方案和原因：

首先要知道，当您安装新快照时，它会被添加到`/snap`文件夹中。将创建一个具有快照名称的新文件夹 ( `/snap/heroku`)，并将该命令的可执行文件添加到`/snap/bin` ( `/snap/bin/heroku`)。

尝试

```
/snap/bin/heroku help 
```

你会发现它工作得很好。

**解决方案：**所以您只需将**/snap/bin 添加到您的 PATH 环境变量**中。

Heroku 认为它已经完成了。我不知道，这是否应该在安装**snapd**包时自动完成。但无论如何，就是这样。

有关如何向 PATH 环境变量添加新路径，请查看下面的链接，以获得一个好主意（如果您还不知道）：

*   [https://stackoverflow.com/a/26962251/7668448](https://stackoverflow.com/a/26962251/7668448)
*   [https://askubuntu.com/questions/866161/setting-path-variable-in-etc-environment-vs-profile](https://askubuntu.com/questions/866161/setting-path-variable-in-etc-environment-vs-profile)
*   [https://www.computerhope.com/issues/ch001647.htm](https://www.computerhope.com/issues/ch001647.htm)
*   [https://hackprogramming.com/2-ways-to-permanently-set-path-variable-in-ubuntu/](https://hackprogramming.com/2-ways-to-permanently-set-path-variable-in-ubuntu/)
*   [http://www.troubleshooters.com/linux/prepostpath.htm](http://www.troubleshooters.com/linux/prepostpath.htm)
*   [https://serverfault.com/questions/166383/how-set-path-for-all-users-in-debian](https://serverfault.com/questions/166383/how-set-path-for-all-users-in-debian)

此处链接有关您需要注销并重新登录或重新启动的原因

*   [在不重新启动 Ubuntu 的情况下全局设置环境变量](https://stackoverflow.com/questions/8677504/setting-environment-variable-globally-without-restarting-ubuntu)
*   [https://superuser.com/questions/339617/how-to-reload-etc-environment-without-rebooting](https://superuser.com/questions/339617/how-to-reload-etc-environment-without-rebooting)

这里有一个例子：

```
sudo nano /etc/environment 
```

我选择通过 /etc/environment 添加路径（记住你不能使用 shell 命令）。

```
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/node-v9.6.1-linux-x64/bin:/snap/bin 
```

你可以看到我在最后添加了它（很简单）。
重新启动计算机或注销并重新登录（PAM 脚本在会话创建时从 /etc/environment 处理 PATH 的构建）

如果您想立即生效，请执行：

```
source /etc/environment && export PATH 
```

（它只影响当前打开的 shell 和子进程）

这是在 /etc/profile 中执行此操作的另一个示例：

```
if [ "`id -u`" -eq 0 ]; then
  PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
else
  PATH="/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games"
fi
PATH="$PATH:/snap/bin"
export PATH 
```

我只添加了一行（最后一行之前的一行，并注意整个文件（/etc/profile）的一部分）。
重新启动或注销并重新登录。

执行 ：

```
source /etc/profile 
```

立即运行（影响当前 shell 和子进程）。

有不同的方法可以添加到 PATH 中，如果我们发挥想象力，甚至可以有无数种方法。这些方式之间的区别在于它何时设置和执行，以及它的范围。以及组织方面（例如，我可以拥有自己的文本列表（每行一条路径），并以正确的方式和位置对其进行编译和执行）。更好地查看上面的链接，我在那里做了一个很好的选择，以便更好地了解事情是如何工作的，以及选择什么方法。但通常以上两个对于系统范围的配置，主要是你需要的。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-10-14T21:24:37.127

请记住实际获取安装文件。

```
wget -0- wget https://toolbelt.heroku.com/install-ubuntu.sh | sh 
```

对我不起作用。而作为一个 linux noob 我使用了：

```
wget 0- wget https://toolbelt.heroku.com/install-ubuntu.sh | sh 
```

请注意 '-' 选项中缺少`wget`。这将安装源下载到我的当前目录。

然后我做了：

```
bash install-ubuntu.sh 
```

这为我完成了安装。

然后：

```
heroku login 
```

作品！！

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-10-31T05:21:25.890

赶紧跑

```
$ gem install heroku 
```

形成你的应用程序就是这样。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-08-18T07:18:24.177

`snap`我正在使用它的路径中没有的 zsh 。所以只需将其添加到`~/.zshrc`.

`export PATH=$PATH:/snap/bin`

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-03-10T23:59:10.553

先跑`gem install heroku`，它给了我以下信息：

heroku 必须从[cli.heroku.com](http://cli.heroku.com)安装。该宝石不再可用。（运行时错误）

Heroku 的步骤：

1.  `brew tap heroku/brew && brew install heroku`

或 Ubuntu

`sudo snap install --classic heroku`

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-11-16T13:28:58.857

尝试 `npm install -g heroku`任何平台。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-02-09T15:50:57.353

当您按照文档在 linux 中安装 heroku 时，使用

```
sudo snap install heroku --classic 
```

它会在里面安装heroku，`/snap/bin/heroku` 但是当你在终端中输入命令时，它会查看/usr/bin/目录，一个简单的解决方案是创建一个符号链接

```
sudo ln -s  /snap/bin/heroku /usr/bin/heroku 
```

之后，您可以`heroku`在终端中运行该命令。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-11-20T22:20:11.350

首先安装heroku：

```
wget -qO- https://toolbelt.heroku.com/install.sh | bash 
```

之后像@Garrett 那样为二进制文件添加一个符号链接：

```
sudo ln -s /usr/local/heroku/bin/heroku /usr/bin/heroku 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-12-10T15:02:06.173

[使用我从Heroku 页面上的 Heroku 的 Rails 4.x 入门](https://devcenter.heroku.com/articles/getting-started-with-rails4#local-workstation-setup)下载的 .pkg 文件安装 Heroku Toolbelt 后，我​​得到了.pkg 文件`heroku command not found message`。我的`/usr/local/heroku/bin`文件夹确实存在。

我可以通过访问[https://toolbelt.heroku.com](https://toolbelt.heroku.com)并从该站点下载相同的 .pkg 文件并重新安装它来解决此问题。注意，我没有**先**卸载之前的包。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-09-02T18:02:21.170

导出快照目录

```
export PATH=$PATH:/snap/bin 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-18T05:26:16.200

# Brew 安装在 macOS 中不起作用？

对我来说`brew tap heroku/brew && brew install heroku`没有在 macOS 中工作。
所以我尝试了独立下载。
**这是对我有用的命令**

```
curl https://cli-assets.heroku.com/install.sh | sh 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-27T12:13:35.253

运行后，`wget -0- wget https://toolbelt.heroku.com/install-ubuntu.sh | sh`您可能会收到以下警告：

```
WARNING: The following packages cannot be authenticated! 
```

heroku heroku-toolbelt

如果发生这种情况，运行这个`apt-get install -y --force-yes heroku-toolbelt`

我已经用 sudo 运行了所有命令，但我不知道它是否有所作为。感谢[这个答案](https://stackoverflow.com/questions/18413361/unable-to-install-heroku-toolbelt-on-samsung-arm-chromebook)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-08T11:50:57.440

**纱线用**

如果要部署`backend`or `server`，转到`backend`or`server`文件夹，请使用 -

`yarn global add heroku`

要部署`frontend`or `client`，请转到`frontend`or`client`文件夹并使用相同的 cmd。

**对于 npm**

转到`folder`您要部署和使用的相应`npm i -g heroku`

# mysql - 查找mysql数据库中存在的记录数

> ID：12795499
> 
> 赞同：0
> 
> 时间：2012-10-09T08:03:51.407
> 
> 标签：mysql, records

如何查找特定数据库中存在的记录数？例如，我有 3 个数据库，即**a、b、c ，现在我想计算数据库中存在****的**记录总数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:08:47.270

您可以从 information_schema 中提取它：

```
SELECT SUM(TABLE_ROWS) from information_schema.TABLES where TABLE_SCHEMA ='a'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:17:25.770

MyISAM 具有准确的行数，因为它总是在写操作完成时锁定表——这意味着它可以准确跟踪行数（每个 MyISAM 表都有一个行计数器）。

InnoDB 不能像 MyISAM 那样做，因为它允许行级锁定，这意味着可能会删除一些行并且不保留中央准确计数器。`information_schema`计数器是对表中行数的估计。

准确计算表中 InnoDB 行数的唯一方法是`COUNT(*)`在需要进行全表扫描的表上使用。

你可以做：

```
SELECT SUM(
    SELECT COUNT(*) FROM my_innodb_table
        UNION
    SELECT COUNT(*) FROM my_other_innodb_table
        UNION
    SELECT COUNT(*) FROM my_yet_another_innodb_table
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:15:37.563

存储在 information_schema 数据库中的所有数据库信息。所以你可以探索这个数据库。

```
use information_schema;
select sum(table_rows) from tables where table_schema = 'db_name'; 
```

# iphone - 如何在当前表视图中选择行时将特定行数据发送到上一个视图？

> ID：12795503
> 
> 赞同：0
> 
> 时间：2012-10-09T08:04:09.217
> 
> 标签：iphone, uitableview, object

我在第一个视图中有一个 UIButton。当我点击一个按钮时，我推了一个带有数据的表视图的第二个视图。我希望​​用户在第二个视图中选择的特定行的数据发送到第一个视图。简而言之，选择一行时第一个视图上的第二个视图行数据在弹出到第一个视图？请帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:32:06.337

您可以使用委托将数据从第二个视图中的选定行发送到第一个视图。我在这里写了一篇关于如何使用委托的教程：http: [//krodev.wordpress.com/2012/10/08/objective-c-delegates/](http://krodev.wordpress.com/2012/10/08/objective-c-delegates/)。

设置委托时，使用第二个视图方法将选定行的数据发送回第一个视图：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // row index
    int rowIndex = indexPath.row.
    // when you have row index you can get row data from your table view datasource 

    // if your data is NSString (method name depends on your implementation of delegate)
    [self.firstViewDelegate selectedRowsData:(NSString *)data];
    // return to the 1st view
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:18:43.963

转到您的第二个视图，按照您的方法`UITableView`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

添加条件`if(indexPath.row == 0)`，您将使用文件中已声明的**全局字符串**将数据传递到使用该方法`AppDelegate.m`的先前视图。`popViewController`

该字符串将等于您的`cell.textLabel.text`.

例子

```
if(indexPath.row == 0)
{
textString = cell.textLabel.text;
} 
```

等等你的各种行。同样，您可以将 textString 添加到第一个视图中第一个表的单元格中。有疑问请告知。谢谢 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:52:05.373

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   Your First View Controller.index = index path.row
} 
```

# google-apps-script - 附件中的网站搜索如何工作

> ID：12795512
> 
> 赞同：1
> 
> 时间：2012-10-09T08:04:49.003
> 
> 标签：google-apps-script

当我申请`site.search('string')`时，它不会从附件返回结果。此方法是否仅适用于页面内容而不适用于附件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:48:35.077

据我所知，这仅返回那些具有匹配字符串文本的页面。这不会在托管附件中搜索。要搜索具有附件名称的匹配项，您可以遍历每个页面中的附件名称并返回具有匹配附件名称的页面。

# python - python应用程序的自动部署工具

> ID：12795522
> 
> 赞同：2
> 
> 时间：2012-10-09T08:05:21.633
> 
> 标签：python, django, deployment

我有一个用 Django 实现的项目，我希望使用一个工具来帮助我将项目自动部署到服务器上。我知道面料库可以做到，但我想知道是否有其他工具具有类似的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:06:57.477

您可以在此处查看整个列表。

[http://www.djangopackages.com/grids/g/deployment/](http://www.djangopackages.com/grids/g/deployment/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:35:26.137

面料太容易了。 [http://fabfile.org](http://fabfile.org)

# objective-c - PDF：字符代码 -> 字形名称 -> NSString

> ID：12795525
> 
> 赞同：4
> 
> 时间：2012-10-09T08:05:42.033
> 
> 标签：objective-c, pdf, character

在跟进我之前的问题时，尝试使用 CGPDF* 函数从 PDF 文件中提取文本，具有：

```
CGPDFStringRef pdfString 
```

我发现它可以转换为这样的字符代码数组：

```
const unsigned char *characterCodes = CGPDFStringGetBytePtr(pdfString); 
```

现在，我试图提取的文本是用 14 种类型 1 基本字体之一编写的，它在 PDF 本身中没有编码。因此，我已经解析了该字体的相关 AFM 文件，为我提供了从字符代码到字形名称的映射，其尺寸如下：

```
C 61 ; WX 600 ; N equal ; B 80 138 520 376 ;
C 63 ; WX 600 ; N question ; B 129 -15 492 572 ;
C 64 ; WX 600 ; N at ; B 77 -15 533 622 ;
C 65 ; WX 600 ; N A ; B 3 0 597 562 ;
C 66 ; WX 600 ; N B ; B 43 0 559 562 ; 
```

我的问题是，知道字符代码，说：*“61”*我如何从它的字形名称：*“等于”*到*NSString @“=”*。尤其是当该字符代码被重新映射到其他字形名称时，例如： PDF 字体编码选项的*“问题”*。

上一个问题： [iOS PDF 解析 Type 1 Fonts metrics](https://stackoverflow.com/questions/12491155/ios-pdf-parsing-type-1-fonts-metrics)和 [iOS PDF to plain text parser](https://stackoverflow.com/questions/12465034/ios-pdf-to-plain-text-parser)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:07:33.527

我没有对此进行测试，但在我看来，您需要为此使用[Adob​​e Glyph 命名约定](http://www.adobe.com/devnet/opentype/archives/glyph.html)：

> Adobe 字形命名约定的目的是支持从字形序列计算 Unicode 字符串。这是通过指定从字形名称到字符串的映射来实现的。

该页面上链接的[glyphlist.txt](http://www.adobe.com/devnet-archive/opentype/archives/glyphlist.txt)似乎与您的问题相关。
示例片段：

> ...
> epsilon;03B5
> epsilontonos;03AD
> **equal;003D**
> equalmonospace;FF1D
> equalsmall;FE66
> equalsuperior;207C
> ...

然后您需要做的就是[将这些 un​​icode 值放入您的 NSString 实例](https://stackoverflow.com/questions/6839287/nsstring-unicode-display)中。

**编辑：确认上面提供的信息，我在**[Adob​​e 的 PDF 参考文档中](http://www.adobe.com/devnet/pdf/pdf_reference_archive.html)
找到了以下解释，*第 5.9 节 - 文本内容的提取*：

 *> 如果字体是使用预定义编码 MacRomanEncoding、MacExpertEncoding 或 WinAnsiEncoding 之一的简单字体，或者其差异数组仅包含取自 Adob​​e 标准拉丁字符集的字符名称和符号中的命名字符集的编码字体（见附录 D）：
> 
> 1.  根据第 996 页上的表 D.1 和字体的差异数组，将字符代码映射到字符名称。
> 2.  在 Adob​​e Glyph List（参见参考书目）中查找字符名称以获得相应的 Unicode 值。*

# c# - 即使项目以 3.5 客户端配置文件为目标，安装程序也在安装 .NET 框架 4 客户端配置文件

> ID：12795527
> 
> 赞同：0
> 
> 时间：2012-10-09T08:05:44.247
> 
> 标签：c#, .net, frameworks

我有一个在 VS 2010 中创建的项目。它最初针对 4.0 Client Profile 框架，但我已经更改了它，所以它现在针对 3.5 Client Profile 框架。主要是因为我的大多数用户都会安装它。

但是，当我发布它并在另一台机器上运行安装程序时，它坚持下载 4.0 框架客户端配置文件。

有什么建议么？

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:12:22.380

转到项目属性：发布->先决条件并检查您要安装的框架的版本。

![在此处输入图像描述](../Images/14f442564757bc204b2bc1b70203c403.png)

# c# - 确认gridview事件中的单选按钮不会触发

> ID：12795532
> 
> 赞同：0
> 
> 时间：2012-10-09T08:05:52.567
> 
> 标签：c#, asp.net, radio-button

在我的 Asp 项目中，我的 gridview 中有一个单选按钮。单选按钮只允许用户每次选择一次。

但是，当用户单击单选按钮时，将出现确认消息，并且仅当用户单击“确定”时才会保存记录。

一切正常，但现在我面临一个问题。当用户单击“确定”时，单选按钮`oncheckedchanged`似乎没有触发。用户单击“确定”后，如何触发单选按钮事件？

这是我的代码：Javascript

```
function RadioCheck(rb) {
    var gv = document.getElementById('Content_PageContent_ucSubMenuItem_module_sales_customer_submenuitem_contactpersonlist_ascx_gvContactPersonList');var rbs = gv.getElementsByTagName("input");
    for (var i = 0; i < rbs.length; i++) {
        if (rbs[i].type == "radio") {
            //if radio button is check but not the selected value then false
            if (rbs[i].checked && rbs[i] != rb) {
                rbs[i].checked = false;
                break;
            }
        }
    }
    return confirm('Confirm Save?');

} 
```

客户端

```
<asp:TemplateField HeaderText="Default" ItemStyle-HorizontalAlign="Center">
    <ItemTemplate>
        <asp:RadioButton ID="rdbtnDefault" runat="server" onclick="RadioCheck(this);" oncheckedchanged="rdbtnDefault_CheckedChanged" Visible='<%#((string)Eval("DEFAULT")) == "Y" ? false : true %>'/>
        <asp:Image ID="imgDefault" runat="server" Height="13px" ImageUrl="~/Styles/images/tick-48x48.png"  Width="13px" Visible='<% ((string)Eval("DEFAULT")) == "Y" ? true : false %>'  />
    </ItemTemplate> 
```

服务器端

```
//--Register for in post back--
if (Page.ClientScript.IsClientScriptBlockRegistered(DataUCContactListing) == false) {
    ScriptManager.RegisterClientScriptBlock(this, typeof(Page), "gvRdBtnSelectOnce", blcGenerateScript.gvRdBtnSelectOnce(gvContactPersonList.ClientID,true), true);
    ScriptManager.RegisterClientScriptBlock(this, typeof(Page), "gvSelectAllChkBox", blcGenerateScript.gvSelectAllChkBox(gvContactPersonList.ClientID), true);
}

//**Register for script**
protected void rdbtnDefault_CheckedChanged(object sender, EventArgs e) {
    try {
        RadioButton lnBTNDone = (RadioButton)sender;
        GridViewRow row = (GridViewRow)lnBTNDone.NamingContainer;
        string accountID = gvContactPersonList.DataKeys[row.RowIndex].Values[0].ToString();
        int contactID = int.Parse(gvContactPersonList.DataKeys[row.RowIndex].Values[1].ToString());
        using (TransactionScope scope = new TransactionScope()) {
            dlcCustomerDB.updateAccountOtherDefaultN(accountID);
            dlcCustomerDB.updateAccountDefaultY(accountID, contactID);
            scope.Complete();
        }
        createGridView();
        this.Session[gbcMessageSessionID.message1] = gbcMessageAlert.saveSuccessfully;
        Response.Redirect(Request.Url.ToString());
    } catch (Exception ex) {
        logger.Error(ex.Message);
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:44:50.787

查看以下网址

[http://www.asp.net/web-forms/tutorials/data-access/enhancing-the-gridview/adding-a-gridview-column-of-radio-buttons-vb](http://www.asp.net/web-forms/tutorials/data-access/enhancing-the-gridview/adding-a-gridview-column-of-radio-buttons-vb)
[单选按钮检查更改事件未在gridview中触发](https://stackoverflow.com/questions/4971468/radiobutton-checked-change-event-not-firing-in-gridview)
请查看此代码

```
<asp:RadioButton ID="rdbtnDefault" runat="server" onclick="return RadioCheck(this);" oncheckedchanged="rdbtnDefault_CheckedChanged" Visible='<%#((string)Eval("DEFAULT")) == "Y" ? false : true %>' AutoPostBack="True" /> 
```

我为 RadioButton 的 onclick 事件添加了“return”关键字。

# vsto - VSTO 缓存数据集变为 NULL

> ID：12795533
> 
> 赞同：2
> 
> 时间：2012-10-09T08:05:55.220
> 
> 标签：vsto

我们有一个 VSTO Excel 加载项，它能够通过调用 Web 服务来加载数据。通过 Web 服务响应获取数据后，我们将其保存到数据集并在列表对象的帮助下将其加载到 Excel 工作表中。现在数据集总是被缓存，这样当用户下次打开工作簿时，我们不需要再次调用 Web 服务来加载数据。它必须与缓存的数据集一起加载。

问题是，对于某些工作簿（不是全部），数据集在第一次保存工作簿后正确保存和加载。但是，相同的数据集在第二次保存后变为空。该数据集有 4200 多条记录和 150 多列。我想提一下，在第二次保存之后，所有其他缓存的变量都有值。只有缓存的数据集为空。以下几点可以更好地理解问题。

*   打开 Excel 模板，通过 Web 服务调用加载数据。（现在加载数据集）
*   保存并关闭工作簿。
*   重新打开同一个工作簿。数据集仍然完好无损。正确加载工作簿。
*   保存并关闭工作簿。
*   重新打开同一个工作簿。数据集为空。因此无法将数据加载到 Excel。现有的 excel 行将被删除，因为列表对象的行为就像是第一次打开一样。

有谁知道可能出了什么问题？我们正在使用 .NET framework 3.5/4.0 和 Excel 2007。Excel 2010 不会产生任何问题。

# hibernate - Spring3 MVC +休眠错误

> ID：12795540
> 
> 赞同：2
> 
> 时间：2012-10-09T08:06:17.227
> 
> 标签：hibernate, spring-mvc

我正在尝试使用 Spring3 MVC 和 Hibernate 制作应用程序，但是我做错了，因为每次我尝试进行数据库查询时都会出现此错误：

```
org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    org.springframework.orm.hibernate3.SpringSessionContext.currentSession(SpringSessionContext.java:63)
    org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:687)
    com.ibex.pBaseSpring.repository.hibernate.HibernateUsuarioDAO.login(HibernateUsuarioDAO.java:25)
    com.ibex.pBaseSpring.service.impl.UsuarioManagerImpl.login(UsuarioManagerImpl.java:23)
    com.ibex.pBaseSpring.web.LoginController.login(LoginController.java:32)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:427)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:415)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:788)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:717)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我尝试了所有找到的解决方案，但仍然出现相同的错误，这是我的代码：

**应用程序配置.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd  
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <context:component-scan base-package="com.ibex.pBaseSpring.repository" />
    <context:component-scan base-package="com.ibex.pBaseSpring.service" />
    <context:component-scan base-package="com.ibex.pBaseSpring.web" />
    <context:annotation-config />
    <mvc:annotation-driven />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="/WEB-INF/views/"></property>
        <property name="suffix" value=".jsp"></property>
    </bean>

    <context:property-placeholder location="/WEB-INF/spring/hibernate.properties" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName">
            <value>${hibernate.connection.driver_class}</value>
        </property>
        <property name="url">
            <value>${hibernate.connection.url}</value>
        </property>
        <property name="username">
            <value>${hibernate.connection.username}</value>
        </property>
        <property name="password">
            <value>${hibernate.connection.password}</value>
        </property>
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.ibex.pBaseSpring.domain" />
        <property name="hibernateProperties">
            <props>
                <prop key="dialect">org.hibernate.dialect.MySQLDialect</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory">
            <ref local="sessionFactory" />
        </property>
    </bean>

    <mvc:resources location="/resources/" mapping="/resources/**" />
</beans> 
```

**web.xml**

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
  <display-name>pBaseSpring</display-name>
  <servlet>
    <servlet-name>pBaseSpring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
       <param-name>contextConfigLocation</param-name>
       <param-value>/WEB-INF/spring/app-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>pBaseSpring</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

**登录控制器**

```
package com.ibex.pBaseSpring.web;

import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

import com.ibex.pBaseSpring.domain.Usuario;
import com.ibex.pBaseSpring.service.UsuarioManager;

@Controller
public class LoginController {

    private UsuarioManager usuarioManager;

    @Inject
    public LoginController(UsuarioManager usuarioManager){
        this.usuarioManager = usuarioManager;
    }

    @RequestMapping(value="/inicio")
    public String inicio(){
        //comprobar que el usuario no esta registrado ya...
        return "login";
    }

    @RequestMapping(value="/login")
    public String login(@RequestParam("login") String login, @RequestParam("pass") String pass){
        System.out.println(login + " - " + pass);
        Usuario usuario = usuarioManager.login(login, pass);
        return "main";
    }

    @RequestMapping(value="/logout")
    public String logout(){
        return "inicio";
    }
} 
```

**UsuarioManager**

```
package com.ibex.pBaseSpring.service.impl;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import com.ibex.pBaseSpring.domain.Usuario;
import com.ibex.pBaseSpring.repository.UsuarioDAO;
import com.ibex.pBaseSpring.service.UsuarioManager;
@Service
public class UsuarioManagerImpl implements UsuarioManager{

    @Autowired
    private UsuarioDAO usuarioDAO;
    public void setUsuarioDAO(UsuarioDAO usuarioDAO) {
        this.usuarioDAO = usuarioDAO;
    }
    public Usuario login(String login, String pass) {
        return usuarioDAO.login(login, pass);
    }
} 
```

**HibernateUsuarioDAO**

```
package com.ibex.pBaseSpring.repository.hibernate;

import org.hibernate.Criteria;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import com.ibex.pBaseSpring.domain.Usuario;
import com.ibex.pBaseSpring.repository.UsuarioDAO;

@Repository
public class HibernateUsuarioDAO implements UsuarioDAO{

    private SessionFactory sessionFactory;

    @Autowired
    public HibernateUsuarioDAO(SessionFactory sessionFactory){
        this.sessionFactory = sessionFactory;
    }

    @Transactional(readOnly = true)
    public Usuario login(String login, String pass) {
        Criteria c = sessionFactory.getCurrentSession().createCriteria(Usuario.class);
        c.add(Restrictions.eq("login", login));
        c.add(Restrictions.eq("pass", pass));
        return (Usuario) c.uniqueResult();
    }

} 
```

我有点绝望，谢谢你的帮助。再见！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:37:51.517

你没有`tx`在你的bean中添加。参考这个bean标签

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/util
http://www.springframework.org/schema/util/spring-util-3.0.xsd
"> 
```

然后在您的 app-config.xml 中添加这一行：

```
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:29:58.010

你错过了`<tx:annotation-driven />`，`@Transactional`没有它就无法工作。

# c++ - 多个连接字符串的同步模式匹配算法

> ID：12795542
> 
> 赞同：3
> 
> 时间：2012-10-09T08:06:29.723
> 
> 标签：c++, string, algorithm

对于一个类主题，我必须实现一个类，该类在该类按时间顺序接收的一组字符中查找模式。该类接收的每个字符都有一个特定的来源（一个行星，由一个 int ID 标识）。

我们必须自己实现数据结构，所以我实现了一个字符串列表，在其中按时间顺序存储所有这些字符。

问题是模式必须与来自同一行星（源）的字符匹配，因此必须在每个源上进行模式匹配。

我尝试使用像 Rabin Karp 这样著名的模式匹配算法，通过浏览整个列表并只考虑当前浏览的源，然后对所有源都这样做，但是性能真的很差劲，甚至比天真（但同步） 解决方案。

您对在这种情况下哪种算法更有效有任何想法吗？（让我使用我正在浏览的每个字符，即使这意味着在某处存储该源的实际“搜索状态”，就像我们为天真的实现所做的那样）

PS：ID 是有限的（从 1 到 128），但字符数最多可以达到 10⁷</p>

**编辑：**这里有一些细节有望澄清事情。

`IntlFinder`，我的班级，可以通过方法接收字符（或字符数组）`Add(char* pszData, int nSource)`；因此，每个字符都与一个源 ID 相结合。对 (character, source) 存储在 StringList`ComList`中（按添加的时间顺序）。

要使该模式出现在我的课堂上，它必须出现在 THE SAME SOURCE 中。

例子：

如果我正在寻找模式 SAYKOUK

( **S** , 1); (**一**, 1); ( **Y** , 1); ( **K** , 1); (Z, 2); (S, 3); ( **O** , 1); ( **U** , 1); ( **K** , 1) 没问题！

( **S** , 1); (**一**, 1); ( **Y** , 1); (K, 2); (O, 3); (U, 1); (K, 4) 不行。

这是有问题的，因为如果我只考虑一个来源（范围从 1 到 128）并每次浏览整个列表，我的模式搜索方法*真的*很慢。而且我无法使用这些算法中的任何一个来考虑不同来源的特征，并且知道何时我遇到了我的模式！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:06:56.787

解决方案是为每个源存储一个单独的字符列表，然后分别在这些列表中查找模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:44:04.317

我最终使用了带有经典“下一个”和“上一个”指针的链表，以及指向同一源字符的“下一个源”和“上一个源”。这样，我就能够使用经典的模式匹配算法。

# ruby-on-rails-3 - Rails 应用程序设计、用户相关的路由和内容

> ID：12795544
> 
> 赞同：0
> 
> 时间：2012-10-09T08:06:42.927
> 
> 标签：ruby-on-rails-3, devise

我目前正在构建一个包含 3 种用户类型的 rails 应用程序。这是我第一次体验 Web 开发，我想避免犯下关键的设计错误，这些错误会让我日后付出代价。希望更有经验的 Rails 用户和 Web 开发人员能够指导我朝着正确的方向前进。

我想使用 Devise 作为我的主要身份验证系统，我目前正在计划这样的事情，以便在 Devise 框架内支持 3 种用户类型：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me

  belongs_to :rolable, :polymorphic => true
end 
```

对于三种用户类型中的每一种：

```
# usertype1.rb
class UserType1 < ActiveRecord::Base
  has_one :user, :as => :rolable
end

# usertype2.rb
class UserType2 < ActiveRecord::Base
  has_one :user, :as => :rolable
end 
```

本质上，用户类和几种不同的用户类型之间存在多态关联。我希望这种方法最终允许我在用户类型模型（例如 has-many）中添加不同的关联关键字，从而方便地查询数据库。

我还关心如何实现用户相关的路由。这个想法是，每个用户类型在登录时都会看到一个单独的“中心”，具有不同的仪表板、不同的操作等。我想我会通过覆盖 Devise SessionsController 来解决这个问题。像这样的东西：

```
class SessionsController < ApplicationController
    def new
    end

    def create
      user = User.find_by_email(params[:email])
      if user && user.authenticate(params[:password])
        session[:user_id] = user.id
        if user.type == 1
            redirect_to hub_typeone
        else if user.type == 2
            redirect_to hub_typetwo
        else
            redirect_to hub_typethree
      else
        flash.now.alert = "Email or password is invalid"
        render "new"
      end
    end

    def destroy
      session[:user_id] = nil
      redirect_to root_url, notice: "Logged out!"
    end
end 
```

这个想法是，在成功进行身份验证后，用户将根据用户类型被路由到不同的页面。我计划使用设计 current_user 框架然后查询数据库以使用特定于用户的数据填充集线器。

你们对我有什么指点吗？你在我的计划/推理/方法中看到任何巨大的缺陷吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:03:50.533

我觉得你过度设计了这个，并构建了一些[你不需要它的东西](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)

最好清楚这三种不同的用户类型是什么。大多数应用程序需要以下三种用户类型：

1.  来宾用户，未登录，可以访问应用程序的某些部分
2.  普通用户
3.  管理普通用户权限的管理员用户。

如果他们不在此列表中，我很想知道您还需要哪些其他用户类型。

Devise wikipages 提供了有关如何[创建来宾用户](https://github.com/plataformatec/devise/wiki/How-To%3a-Create-a-guest-user)以及[如何添加管理员角色的](https://github.com/plataformatec/devise/wiki/How-To%3a-Add-an-Admin-Role)建议。最好从实现应用程序普通用户的功能开始，然后使用上述资源添加其他用户类型。

# android - android 音频 - soundpool 替代品

> ID：12795547
> 
> 赞同：1
> 
> 时间：2012-10-09T08:06:46.827
> 
> 标签：android, audio, android-mediaplayer

我喜欢 Android Soundpool 类的简单性，它与我在应用程序中使用的标准音频文件配合得很好。现在我想让用户可以通过指定 sd 卡上的音频文件来指定某些声音。不幸的是，我遇到了 Soundpool 的限制，当声音文件太大时，我得到一个

AudioFlinger 无法创建轨道。状态：-12

回复。看来我必须切换到 MediaPlayer 但在再次进入 MediaPlayer 的复杂性之前我想问是否有可用于 android 的音频库

*   具有 Soundpool 的简单性，可播放各种声音
*   没有 Soundpool 关于文件大小的限制。

非常感谢。

马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:39:26.953

现在我想出了一个非常简单的 AudioPool 类，它可以播放随后使用 MediaPlayer 类添加到其中的音频。这个实现肯定还不成熟，但我只是想分享它，因为它至少给出了一些如何轻松实现它的想法。如果您发现本课程有任何问题，请告诉我们。

用法：

```
 AudioPool ap = new AudioPool();

 File root = Environment.getExternalStorageDirectory() ;

 int id1 = ap.addAudio(root + "/gong1.mp3");
 int id2 = ap.addAudio(root + "/gong2.mp3");
 int id3 = ap.addAudio(root + "/gong3.mp3"); 

 ap.playAudio(id1);
 ap.playAudio(id3);
 ap.playAudio(id3);
 ap.playAudio(id2); 
```

随后将播放 gong1 -> gong3 -> gong3 -> gong1。因为这基本上是我需要的，所以我把它留在这里......

```
import java.util.HashMap;
import java.util.LinkedList;
import java.util.Map;

import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.util.Log;

public class AudioPool {

static String TAG = "AudioPool";

MediaPlayer mPlayer;

int mAudioCounter;

int mCurrentId;

HashMap<Integer, String> mAudioMap;

LinkedList<Integer> mAudioQueue;

public AudioPool() {

    mAudioMap = new HashMap<Integer, String>();
    mAudioQueue = new LinkedList<Integer>();
    mAudioCounter = 0;

}

public int addAudio(String path) {
    Log.d(TAG, "adding audio " + path + " to the pool");

    if (mAudioMap.containsValue(path)) {
        return getAudioKey(path);
    }
    mAudioCounter++;
    mAudioMap.put(mAudioCounter, path);
    return mAudioCounter;
}

public boolean playAudio(int id) {

    if (mAudioMap.containsKey(id) == false) {
        return false;
    }

    if (mPlayer == null) {
        setupPlayer();
    }

    if (mPlayer.isPlaying() == false) {
        return prepareAndPlayAudioNow(id);
    } else {
        Log.d(TAG, "adding audio " + id + " to the audio queue");

        mAudioQueue.add(id);
    }
    return true;
}

public Integer[] getAudioIds() {
    return (Integer[]) mAudioMap.keySet().toArray(
            new Integer[mAudioMap.keySet().size()]);
}

public void releaseAudioPlayer() {
    if (mPlayer != null) {
        mPlayer.release();
        mPlayer = null;
    }
}

private boolean prepareAndPlayAudioNow(int id) {
    mCurrentId = id;
    try {
        Log.d(TAG, "playing audio " + id + " now");
        mPlayer.reset();
        mPlayer.setDataSource(mAudioMap.get(id));
        mPlayer.prepare();
        mPlayer.start();
        return true;
    } catch (Exception e) {
        Log.d(TAG, "problems playing audio " + e.getMessage());
        return false;
    }
}

private boolean playAudioAgainNow() {
    try {
        mPlayer.seekTo(0);
        mPlayer.start();
        return true;
    } catch (Exception e) {
        Log.d(TAG, "problems playing audio");
        return false;
    }
}

private void setupPlayer() {
    mPlayer = new MediaPlayer();
    mPlayer.setOnCompletionListener(new OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            audioDone();
        }
    });
}

private void audioDone() {

    if (mAudioQueue.size() > 0) {
        Log.d(TAG, mAudioQueue.size() + " audios in queue");
        int nextId = mAudioQueue.removeFirst();

        if (mCurrentId == nextId) {
            playAudioAgainNow();
        } else {
            prepareAndPlayAudioNow(nextId);
        }

    } else {
        releaseAudioPlayer();
    }
}

private int getAudioKey(String path) {
    for (Map.Entry<Integer, String> map : mAudioMap.entrySet()) {
        if (map.getValue().compareTo(path) == 0) {
            return map.getKey();
        }
    }
    return -1;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-12T07:50:58.280

感谢 dorjeduck 的解决方案，但他的课程基于`MediaPlayer`，有很大的延迟。这是什么意思？这意味着当您调用这些时：

```
mPlayer.prepare();
mPlayer.start(); 
```

并且实际上听到声音的延迟非常明显。例如，当您需要播放一首曲目并立即播放另一首曲目时，即使在高端硬件上也会听到延迟。

在播放之前将所有字节加载到内存中并用于`AudioTrack`播放该声音字节的解决方案。

我已经写`SoundPoolCompat`了哪些`AudioTrack`在引擎盖下使用。您可以传递 custom `bufferSize`，该缓冲区中的所有数据都将被加载到内存中并像 SoundPool 那样以小延迟播放。所有超过该值的数据`bufferSize`都将按需加载（这会增加延迟，类似于`MediaPlayer`）。Api 与 非常相似`SoundPool`，还添加了从 Uri 加载声音的功能（例如 gdrive）。并且有一种`playOnce`方法，文件播放后将卸载所有资源。

```
implementation 'com.olekdia:sound-pool:3.0.2' 
```

[https://gitlab.com/olekdia/common/libraries/sound-pool](https://gitlab.com/olekdia/common/libraries/sound-pool)

# c - 如何在 Windows 上同时使用 MPI 和 OpenMP 编译和执行 C 程序

> ID：12795548
> 
> 赞同：0
> 
> 时间：2012-10-09T08:06:48.177
> 
> 标签：c, compilation, mpi, openmp, execution

我有一个使用 MPI 和 OpenMP 的 C 程序。为了在 Windows 系统上编译这样的程序，我下载并安装了 MinGW 提供的 gcc 编译器。`-fopenmp`使用这个编译器，我可以使用gcc的密钥通过 OpenMP 编译和执行 C 程序。这样的程序运行没有问题。为了使用 MPI 编译和执行 C 程序，我下载并安装了 MPICH2。现在我可以毫无问题地编译和运行这样的程序，为 gcc 指定额外的参数，由 MinGW 提供。但是当我想编译和运行一个同时使用 OpenMP 和 MPI 的程序时，我遇到了问题。我`-fopenmp`为 gcc 编译器指定了 MPI 程序的键和键。编译器没有给我任何错误。我试图通过`mpiexec`，由 MPICH2 提供。我的程序不想工作（它是一个 HelloWorld 程序，它没有打印任何输出）。请帮助我正确编译和启动此类程序。

这是我的 HelloWorld 程序，它不会产生任何输出。

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char ** argv)
{
    int thnum, thtotal;
    int pid, np;

    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD,&pid);
    MPI_Comm_size(MPI_COMM_WORLD,&np);

    printf("Sequental %d out of %d!\n",pid,np);
    MPI_Barrier(MPI_COMM_WORLD);

    #pragma omp parallel private(thnum,thtotal)
    {
        thnum = omp_get_thread_num();
        thtotal = omp_get_num_threads();
        printf("parallel: %d out of %d from proc %d out of %d\n",thnum,thtotal,pid,np);

    }
    MPI_Barrier(MPI_COMM_WORLD);
    MPI_Finalize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:42:31.640

您可以使用带有 -选项的`mpicc`编译器。`openmp`例如，

```
mpicc -openmp hello.c -o hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:51:56.587

您的`OpenMP`程序部分可能需要`#include <omp.h>`：

```
parallel: 0 out of 2 from proc 0 out of 0
parallel: 1 out of 2 from proc 0 out of 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:50:54.247

这可能不是问题的根本原因，但 MPI 标准要求线程程序使用`MPI_Init_thread()`而不是`MPI_Init()`. 在您的情况下，并行区域内没有 MPI 调用，因此线程级别`MPI_THREAD_FUNNELED`应该足够了。您应该将调用替换为`MPI_Init()`：

```
int provided;

MPI_Init_thread(&argc, &argv, MPI_THREAD_FUNNELED, &provided);
if (provided < MPI_THREAD_FUNNELED)
{
    MPI_Abort(MPI_COMM_WORLD, 1);
    return 1; // Usually not reached
} 
```

尽管某些 MPI 库可能不会宣传线程支持（`provided`如返回的那样），但如果*不*从并行区域内进行 MPI 调用，`MPI_THREAD_SINGLE`它们仍然可以与混合 OpenMP/MPI 代码一起正常工作。

# java - PrintWriter#println 方法未按预期工作

> ID：12795556
> 
> 赞同：4
> 
> 时间：2012-10-09T08:07:08.370
> 
> 标签：java, printwriter

这段代码：

```
PrintWriter output = new PrintWriter(new FileWriter(outputFile, false));
output.println("something\n");
output.println("something else\n"); 
```

输出：

```
something
something else 
```

代替：

```
something

something else 
```

我尝试使用“\r\n”而不是“\n”，但它不像我想要的那样工作。我该如何解决？

PS我用的是windows 7

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T08:16:42.040

您可以连接系统的换行符来分隔您的行：

```
 String newLine = System.getProperty("line.separator");
    output.println("something" + newLine);
    output.println("something else" + newLine); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:17:24.587

您的代码就像一个魅力，只需使用适当的程序员编辑器检查文件。（或者正如我之前建议的，看看文件的十六进制转储）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T08:17:39.390

这个

```
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class Main {
    public static void main(String[] args) {
        PrintWriter output;
        try {
            output = new PrintWriter(new FileWriter("asdf.txt", false));
            output.println("something\n");
            output.println("something else\n");
            output.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

对我来说效果很好，我得到了这样的*asdf.txt*

> 某物
> 
> 别的东西

我用的是jre1.7，你用的是什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T08:28:40.393

这工作得很好。您必须使用记事本进行输出。尝试使用其他文本编辑器，例如 notepad++。你会得到你想要的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T08:29:42.980

尝试这个：

```
package com.stackoverflow.works;

import java.io.FileWriter;
import java.io.PrintWriter;

/*
 * @author: sarath_sivan
 */
public class PrintWriterExample {

    private static final String NEW_LINE = System.getProperty("line.separator");

    public static void main(String[] args) {
        String outputFile = "C:/Users/sarath_sivan/Desktop/out.txt";
        PrintWriter output = null;
        try {
            output = new PrintWriter(new FileWriter(outputFile, false));
            output.println("something" + NEW_LINE);
            output.println("something else" + NEW_LINE);
            output.flush();
        } catch(Exception exception) {
            exception.printStackTrace();
        } finally {
            if (output != null) {
                output.close();
            }
        }
    }
} 
```

**输出：**

![输出](../Images/91ce0799c0e5645fac8842022ffd9ca0.png)

# ruby-on-rails - ruby 中查找一个数组的所有元素是否也存在于另一个数组中的最佳方法是什么

> ID：12795557
> 
> 赞同：0
> 
> 时间：2012-10-09T08:07:08.950
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3

我有以下两个数组

```
a= [1,2,3,4]
b= [1,2]
c= [1,2,3,4,5] 
```

我想要一个返回布尔值的方法，如下所示

```
a.<some_method>(b) #should return true 
b.<some_method>(c) #should return false 
```

假设我使用`include?`它不起作用，因为它期望 b 作为另一个数组中的元素

目前我正在做类似以下的事情

```
b.all?{|x| a.include?(x) } 
```

我想知道有没有更好/更快的方法，因为我的两个数组都有很大的长度

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T08:10:58.440

只需检查从第一个数组中减去第二个数组的结果。

在你的情况下 B - A 将是空的，但 C - A 将是非空的......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T08:17:58.243

在最简单的情况下，数组操作是好的。

但是对于广泛的情况，我认为您需要设置操作。您可以查看**[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html)**。

就像你的情况一样，它应该是

```
a= [1,2,3,4].to_set
b= [1,2].to_set
c= [1,2,3,4,5].to_set

a.superset?(b)   # -> true
b.superset?(c)   # -> false 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-15T04:40:17.343

array & other_array 返回数组和其他数组之间的匹配元素并删除任何重复项。您可以创建一个布尔测试，通过将一个数组的唯一元素与两个组合数组的相交元素进行比较，来查看一个数组的所有元素是否都在另一个数组中。

```
a = [1,2,3,4,5]
b = [2,3,4,5]
c = [4,5,6,7]

# check if all items in one array are in another array

def all_items_in_array?(original_array, test_array)
    test_array.uniq == original_array & test_array
end 
```

此方法将返回一个布尔值

```
all_items_in_array?(a,b) # true
all_items_in_array?(a,c) # false
all_items_in_array?(b,c) # false 
```

并进行重复的布尔检查

```
def all_items_including_duplicates_in_array?(original_array, test_array)
    original_grouped = original_array.group_by{|item| item}.values
    test_grouped = test_array.group_by{|item| item}.values
    test_grouped == original_grouped & test_grouped
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T09:03:08.903

数组差异和 Set#subset？答案很好，但 OP 专门询问了速度。回答性能问题的最佳方法是实际计算不同方法的时间。救援[基准：](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html)

```
require 'benchmark'
require 'set'

BIG = 10_000
N = 1_000_000
SLOW_N = 500

a = [1,2,3,4]
b = [1,2]
c = [1,2,3,4,5]

bigA = (1..BIG).to_a
bigB = bigA.dup
bigB.pop
bigC = bigA.dup << (BIG+1)

setA = a.to_set
setB = b.to_set
setC = c.to_set
bigsetA = bigA.to_set
bigsetB = bigB.to_set
bigsetC = bigC.to_set

puts RUBY_DESCRIPTION
Benchmark.bm(21) do |x|
  x.report('Array#-')     { N.times{ (b-a).empty?; (c-a).empty? } }
  x.report('Set#subset?') { N.times{ setB.subset?(setA); setC.subset?(setA) } }
  x.report('big Array#-')     { SLOW_N.times{ (bigB-bigA).empty?; (bigC-bigA).empty? } }
  x.report('big Set#subset?') { SLOW_N.times{ bigsetB.subset?(bigsetA); bigsetC.subset?(bigsetA) } }
  x.report('big all? Set#include?')  { SLOW_N.times{ bigB.all?{|x| bigsetA.include?(x)}; bigC.all?{|x| bigsetA.include?(x)} } }
end 
```

结果表明，对于小型集，没有显着差异。对于大型的`Set#subset?`，大约快 20%：

```
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-linux]
                            user     system      total        real
Array#-                 1.520000   0.000000   1.520000 (  1.518501)
Set#subset?             1.520000   0.000000   1.520000 (  1.533306)
big Array#-             2.180000   0.000000   2.180000 (  2.180390)
big Set#subset?         1.720000   0.000000   1.720000 (  1.724991)
big all? Set#include?   2.130000   0.000000   2.130000 (  2.142015) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-10T11:40:31.550

```
arr = [a, b, c]
arr.reduce(:&) 
```

将为您提供一致的元素

我也追求不一致的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-09T08:20:35.580

你也可以这样做：

```
a = [1,2,3]
b = [2,4,6]
c = [2,3,4]

(a & b).any? or (a & b & c).any? 
```

# vb.net - vb.net 多列组合框

> ID：12795563
> 
> 赞同：0
> 
> 时间：2012-10-09T08:07:23.927
> 
> 标签：vb.net, combobox, multiple-columns

有人可以告诉我如何用两列或更多列填充组合框吗？我一直在努力实现这一目标，但没有任何结果。我将不胜感激任何帮助。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:47:56.987

我自己研究过这个，不幸的是没有多列组合框这样的东西。我通过创建自己的控件来解决它，但它的工作量很大，我建议找到一个第三方工具来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:48:23.623

您可以使用 Dev Express 控件，有一个名为 Lookupedit 的控件，它将显示多个列

# javascript - 如何停止链接按钮刷新页面

> ID：12795566
> 
> 赞同：0
> 
> 时间：2012-10-09T08:07:33.300
> 
> 标签：javascript, jquery

在我的代码中，我使用了一个名为`updateLogButton`显示/隐藏 div 的链接按钮。因为每次点击的焦点移动到页面的开头时，我都会使用链接按钮。如何停止这种默认行为？

jQuery片段：

```
$('#updateLogText').hide();

$('#updateLogButton').click(function() {

    if ($('#updateLogText').is(':visible')){

        //hide div if content is visible
        $('#updateLogText').fadeOut();

    }else{

        $('#updateLogText').fadeIn();       
    }

}); 
```

HTML 代码：

```
<tr>
    <td><a href="#"  id="updateLogButton">Update Log</a></td>
</tr>
<tr>
    <td colspan="3" >
        <div id="updateLogText" style="width:100%;">
            <?php echo $data['updates']; ?>
        </div>

    </td>
</tr> 
```

**编辑：** 我的意思的例子：http: [//jsfiddle.net/cF4Bb/7/](http://jsfiddle.net/cF4Bb/7/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T08:10:26.217

要防止单击链接时的默认操作，您可以从单击处理程序返回 false 或调用`event.preventDefault`其中 event 是传递给单击处理程序的事件对象。

```
$('#updateLogText').hide();

$('#updateLogButton').click(function(event) {

    if ($('#updateLogText').is(':visible')){

        //hide div if content is visible
        $('#updateLogText').fadeOut();

    }else{

        $('#updateLogText').fadeIn();       
    }
    event.preventDefault();
    //or return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:09:29.473

添加返回 false

```
$('#updateLogButton').click(function() {

    if ($('#updateLogText').is(':visible')){

        //hide div if content is visible
        $('#updateLogText').fadeOut();

    }else{

        $('#updateLogText').fadeIn();       
    }

     return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:20:37.590

您也可以尝试将您的更改`href`为：

```
<a href="javascript:void(0);" id="updateLogButton">Update Log</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:10:12.560

从一键事件中返回 false

```
$('#updateLogText').hide();

$('#updateLogButton').click(function() {

    if ($('#updateLogText').is(':visible')){

       //hide div if content is visible
        $('#updateLogText').fadeOut();

    }else{

        $('#updateLogText').fadeIn();       
    }
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T08:17:16.953

删除 href="#" 从

```
<td><a **href="#"** id="updateLogButton">Update Log</a></td> 
```

到

```
<td><a id="updateLogButton">Update Log</a></td> 
```

请注意，这可能会删除类似文本的“超链接”；您可以使用 css 重新申请。

[编辑：添加] 或者，您可以使用 LinkBut​​ton 代替，如下所示：

```
<asp:LinkButton id="btnLink" Text="Update Log" **onclick**="javascript:ShowHide(); return false;"/> 
```

您将不得不编写自己的 javascript 函数。**注意：我不记得是 onclick 还是 onclientclick，但你明白了。

# arrays - VB.NET：将字符串数组添加到数组中

> ID：12795572
> 
> 赞同：0
> 
> 时间：2012-10-09T08:07:57.183
> 
> 标签：arrays, vb.net

```
Module globalVariable

    Public tblScItem As New DataTable
    Public tempArray()
    Public index As Integer
    Public stringArr() As String

End Module

Private Sub txtQty_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtQty.TextChanged

    stringArr = New String() {"", txtItem.Text, Form2.cbGondola.SelectedItem, txtQty.Text, DateTime.Now, Form1.txtLoginId.Text}

    If txtItem.Text <> Nothing And txtQty.Text <> Nothing Then

        index = 0

        tempArray(index) = stringArr

        tblScItem.Rows.Add(tempArray)

        index += 1

    End If

End Sub 
```

我的程序是一个盘点程序，它的工作方式是，当输入项目的数量时，它将显示在数据网格中，同时存储在数组中。整个事务完成后，整个数组被导出到一个txt文件。

我已经声明了一个数组`stringArr`来存储项目的所有详细信息。然后，我使用 tempArray 来存储每个项目（其中`stringArr`包含`tempArray`.

```
Example: 
tempArray(0) = 'details of item 1 obtained from stringArr
tempArray(1) = 'details of item 2 obtained from stringArr
and so on 
```

但是，在输入数量后，我不断收到“对象未设置为对象的实例”。

有谁知道为什么？我需要帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:22:41.640

您收到错误消息是因为您尚未初始化`tempArray`变量。它只是对数组的引用，但它没有要引用的数组。

但是，您试图将数组放入数组中，但该[`DataRowCollection.Add`方法](http://msdn.microsoft.com/en-us/library/07wwak56.aspx)需要一个数组，而不是数组数组。

只需使用`stringArr`变量：

```
Private Sub txtQty_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtQty.TextChanged

  stringArr = New String() {"", txtItem.Text, Form2.cbGondola.SelectedItem, txtQty.Text, DateTime.Now, Form1.txtLoginId.Text}

  If txtItem.Text <> "" And txtQty.Text <> "" Then

    tblScItem.Rows.Add(stringArr)

  End If

End Sub 
```

请注意，`Text`控件的属性是 never `Empty`，您应该检查它是否为空字符串。

如果要将行添加到 以外的集合中`DataTable`，则不会使用数组，因为它不可调整大小。你会使用一个`List(Of String())`：

```
Public tempList As new List(Of String())

Private Sub txtQty_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtQty.TextChanged

  stringArr = New String() {"", txtItem.Text, Form2.cbGondola.SelectedItem, txtQty.Text, DateTime.Now, Form1.txtLoginId.Text}

  If txtItem.Text <> "" And txtQty.Text <> "" Then

    tempList.Add(stringArr)

    tblScItem.Rows.Add(stringArr)

  End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:19:42.943

为什么要使用 DataGrid 和数组？只需使用数据网格并调用数据`Rows(0).ItemArray`表。

# web-services - 不支持项目类型 - VS 2005 Web 服务

> ID：12795585
> 
> 赞同：1
> 
> 时间：2012-10-09T08:08:50.257
> 
> 标签：web-services, visual-studio-2005

我试图在一台新的笔记本电脑上打开 VS 2005 Web 服务项目——window 7 32 位专业版。它显示以下消息 -

![项目打开失败](../Images/0cedf125203e52519f270373ebffbd76.png)

我已经在这台笔记本电脑上安装了 VS 2005 Professional。

我应该安装更多什么样的组件？谢谢你。

# git - Git 和远程删除。如何摆脱删除消息

> ID：12795590
> 
> 赞同：0
> 
> 时间：2012-10-09T08:09:08.987
> 
> 标签：git, github

我做了一个 git rm 文件。

现在..每次我提交...我都会收到这些消息列表。

```
#   deleted:    requester2/temp/snippets-2012-09-30-203341.870515.html
#   deleted:    requester2/temp/snippets-2012-09-30-204815.768443.html
#   deleted:    requester2/temp/snippets-2012-10-01-164818.022385.html
#   deleted:    requester2/temp/snippets-2012-10-01-165008.142723.html
#   deleted:    requester2/temp/snippets-2012-10-01-170336.512638.html
#   deleted:    requester2/temp/snippets-2012-10-01-170805.974529.html
#   deleted:    requester2/temp/snippets-2012-10-01-172309.579716.html
#   deleted:    requester2/temp/snippets-2012-10-01-180812.236897.html
#   deleted:    requester2/temp/snippets-2012-10-01-180949.890997.html
#   deleted:    requester2/temp/snippets-2012-10-01-181836.475853.html
#   deleted:    requester2/temp/snippets-2012-10-01-182011.676711.html
#   deleted:    requester2/temp/snippets-2012-10-01-193522.135573.html
#   deleted:    requester2/temp/snippets-2012-10-01-194152.563202.html 
```

没有添加到提交的更改（使用“git add”和/或“git commit -a”）

所以......一切正常，但很烦人。我还需要做什么？我答应了。这已经持续了好几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:14:16.130

做：

```
git rm `git ls-files --deleted` && git commit 
```

然后

`git push`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:23:57.900

看起来您删除了本地文件，但此删除并未在 git 中提交（也许您在此过程中做了一个`git reset`操作，或者其他一些操作）。

尝试重新运行

```
git rm <files>
git commit 
```

如果您想将这些修改发送到远程服务器：

```
git push origin 
```

# css - 如何在引导表单上正确对齐没有标签的字段

> ID：12795592
> 
> 赞同：3
> 
> 时间：2012-10-09T08:09:21.770
> 
> 标签：css, twitter-bootstrap

我有

```
<form action="#" method="post" class="well">
    <fieldset>
        <div class="control-group">
            <label class="control-label" for="FirstName">Name</label>
            <div class="controls row-fluid">
                <div class="span2 row">
                    <input class="span12" id="FirstName" name="FirstName" placeholder="Firstname" type="text" value=""/>
                </div>
                <div class="span2 row">
                    <input class="span12" id="MiddleName" name="MiddleName" placeholder="Middlename" type="text" value=""/>
                </div>
                <div class="span2 row">
                    <input class="span12" id="LastName" name="LastName" placeholder="Lastname" type="text" value=""/>
                </div>
            </div>
        </div>
    </fieldset>
</form> 
```

jsfiddle：http: [//jsfiddle.net/bWGfb/](http://jsfiddle.net/bWGfb/)

我想为姓氏添加标签，所以我只想为名字和姓氏添加标签。引导程序怎么可能？

**更新：** 我可以做这样的事情：

```
<div class="row-fluid">
    <div class="span12">
        <div class="span4">
            <label>First Name</label>
            <input type="text" class="span12" placeholder="First Name">
        </div>
        <div class="span4" style="margin-top: 25px;">
            // field without label
            <input type="text" class="span12" placeholder="Last Name">
        </div>
        <div class="span4 ">
            <label>First Name</label>
            <input type="text" class="span12" placeholder="Last Name">
        </div>
    </div>
</div>
​ 
```

[http://jsfiddle.net/bWGfb/1/](http://jsfiddle.net/bWGfb/1/)

但它增加了额外的边距样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:19:05.380

像这样的东西：

```
<form action="#" method="post" class="well">
    <fieldset>
        <div class="control-group">
            <div class="row-fluid">
                <div class="span3">
                    <label for="FirstName">First name</label>
                    <input class="span12" id="FirstName" name="FirstName" placeholder="Firstname" type="text" value=""/>
                </div>
                <div class="span3">
                    <label for="MiddleName">&nbsp;</label>
                    <input class="span12" id="MiddleName" name="MiddleName" placeholder="Middlename" type="text" value=""/>
                </div>
                <div class="span3">
                    <label for="LastName">Last name</label>
                    <input class="span12" id="LastName" name="LastName" placeholder="Lastname" type="text" value=""/>
                </div>
            </div>
        </div>
    </fieldset>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:25:48.503

只需在您自己的 CSS 中覆盖（第 946 行）中的`label`样式`bootstrap.css`

它有`5px`底部边距，只需将其设置为您需要的值，但有一点间距是好的；）

# android - 如何取消定时器并更新同一个定时器？

> ID：12795593
> 
> 赞同：1
> 
> 时间：2012-10-09T08:09:21.333
> 
> 标签：android, timer, timertask, vibration, beep

我正在创建一个每 30 秒振动和哔声的应用程序，当我注销时，振动和哔声必须取消，当我登录时，振动和哔声应该恢复。

注意：它必须每 30 秒振动一次并发出哔声，直到我退出

在我的应用程序中，我`TimerTask`用于此实现

这是使用振动和哔声的代码`TimerTask`

```
static TimerTask Task;
final static Handler handler = new Handler();
static Timer t = new Timer();

public static void vib() {

    Task = new TimerTask() {
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    Vibrator vibrator = (Vibrator) ApplicationUtils.getContext().getSystemService(Context.VIBRATOR_SERVICE);
                    vibrator.vibrate(3000);
                    playSound();
                    Log.d("TIMER", "Timer set on");
                }
            });
        }
    };
    t.schedule(Task, 0, 30000); 
} 
```

这是我在注销部分使用的代码

```
public void stopvib() {
    if (Task != null) {
    //  Log.d("TIMER", "timer canceled");
        t.cancel();
        Task.cancel();
    }
} 
```

注意：我也删除了`Task.cancel();`但我仍然收到同样的错误

在注销并再次登录之前我的振动工作正常我收到错误

```
java.lang.IllegalStateException: Timer was cancelled
    at java.util.Timer.scheduleImpl(Timer.java:562)
    at java.util.Timer.schedule(Timer.java:481)
    at com.vib(AlertListActivity.java:724) 
```

任何人都可以帮助我进行此编码。我哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:29:52.333

我最近运行了这段代码并且工作正常。这可以使用广播接收器来实现。您必须实现扩展 TimerTask 的单独 CustomTimer 任务：

```
Activity mActivity=null;
public MyCustomTimer(Activity mActivity) {
    this.mActivity=mActivity;
}
    @Override
    public void run() {
        this.mActivity.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                Toast.makeText(mActivity, "Write you code here",Toast.LENGTH_LONG).show();
                Log.d("MyCustomTimer","Call");
            }
        });

    } 
```

在此之后，您必须在要实现“vib()”方法的那个类中实现广播接收。假设，在我的情况下（仅举例）是 MainActivity：

```
public class MainActivity extends Activity {
    private MyCustomTimer myCustomTimer = null;
    BroadcastReceiver mBr_Start = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals("START_VIBRATION")) {
                System.out.println("onreceive :START_VIBRATION");
                vib();
            }
        }
    };
    BroadcastReceiver mBr_Stop = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals("STOP_VIBRATION")) {
                stopVibration();
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        IntentFilter mIntentFilter = new IntentFilter();
        mIntentFilter.addAction("START_VIBRATION");
        registerReceiver(mBr_Start, mIntentFilter);
        IntentFilter mIntentFilter2 = new IntentFilter();
        mIntentFilter2.addAction("STOP_VIBRATION");
        registerReceiver(mBr_Stop, mIntentFilter2);

        Button b1 = (Button) findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i = new Intent(MainActivity.this, MySecondActivity.class)
                        .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(i);

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void vib() {
        myCustomTimer = new MyCustomTimer(MainActivity.this);
        Timer timer = new Timer();
        timer.scheduleAtFixedRate(myCustomTimer, 0, 30000);
    }

    private void stopVibration() {
        Log.d("MainActivity", "Before Cancel");
        if (null != myCustomTimer)
            myCustomTimer.cancel();
        Log.d("MainActivity", "After Cancel");
    }

} 
```

现在，您可以通过执行以下几行来启动或停止振动： 要启动振动：

```
Intent i=new Intent("START_VIBRATION");
                mActivity.sendBroadcast(i); 
```

停止：

```
Intent i=new Intent("STOP_VIBRATION");
                mActivity.sendBroadcast(i); 
```

注意： MainActivity 的 onDestroy() （在您的情况下，在您实现广播接收器的地方，取消注册广播接收器。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:14:01.130

注销时将计时器实例设置为 null，然后在每次用户登录应用程序时对其进行初始化。这将解决“计时器已取消”相关问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:39:28.290

为什么你需要一个静态的 TimerTask。你可以像这样给我，这对我来说很好。

```
timer.schedule(new TimerTask() {
        @Override
        public void run() {
        //your code
        }
        }, 0, 30000); 
```

注销使用时，`timer.cancel().` 这里可以简单的取消定时器，不需要取消TimerTask。

# wpf - wpf 控件在网格/堆栈面板周围移动而不是原地不动

> ID：12795594
> 
> 赞同：0
> 
> 时间：2012-10-09T08:09:27.060
> 
> 标签：wpf, grid, controls, stackpanel

我正在 WPF 中构建一个用户控件，并将几个按钮放在位于网格内的堆栈面板中。问题是，当我构建应用程序并运行它时，按钮“四处游荡”并且不会停留在我将它们放在设计器窗口中的位置。我是否缺少任何属性（或某种容器？）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:04:59.977

尝试设置网格的对齐属性：

```
<Grid HorizontalAlignment="Left" VerticalAlignment="Top">
...
</Grid> 
```

# javascript - 即时下载画布图像

> ID：12795595
> 
> 赞同：2
> 
> 时间：2012-10-09T08:09:27.777
> 
> 标签：javascript, jquery, canvas, download, qr-code

我有`<div id="qrcode"></div>`

然后 `jquery.qrcode.js plugin creates over a`` 带有 QR 码的元素。

所以，我想`<button>`在页面中放置一个元素来下载动态创建的“图像”（它是一个画布元素）。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:11:45.117

[jquery画布图片下载](https://stackoverflow.com/questions/8885761/jquery-canvas-image-download)

> 可以使用 HTML5 blob 保存图像。
> 
> [http://www.html5rocks.com/en/tutorials/file/filesystem/#toc-file-writing](http://www.html5rocks.com/en/tutorials/file/filesystem/#toc-file-writing)
> 
> 您可以在此代码中完成类似操作的 Blob：
> 
> [https://github.com/miohtama/Krusovice/blob/master/src/tools/resizer.js](https://github.com/miohtama/Krusovice/blob/master/src/tools/resizer.js)

# asp.net - 支持不同浏览器中的视频

> ID：12795597
> 
> 赞同：0
> 
> 时间：2012-10-09T08:09:30.753
> 
> 标签：asp.net, visual-studio-2010, html, video

我的任务是上传视频并在不同的浏览器中播放。我尝试在不同的浏览器上播放 .Mp4 视频我尝试实现 iframe 之类的

```
 <iframe id="frame1" runat="server" visible="false" style="height: 222px; width: 482px;">
                </iframe> 
```

并尝试在运行时将其 src 实现为：

```
 frame1.Visible = true;
 frame1.Attributes.Add("src", objLessionsInfo.VideoPath.ToString()); 
```

它在`chrome`. 但不是在`firefox`，`IE` 我也尝试将 HTML5 的视频标签实现为

```
<video controls="controls" tabindex="5" class="Video">
     <source src="Videos/2.webm" type="video/webm" >
      <source src="Videos/2.ogv" type="video/ogv">
      <source src="Videos/2.mp4" type="video/mp4">
      Your browser does not support the <code>video</code> element.
     </video> 
```

同样适用于`Chrome`但不适用，`Firefox`并且`IE`适用`.mp4`于`chrome`但`firefox`不支持。我已经尝试过`.webm`它在 Firefox 播放的格式。

我对如何为不同的浏览器提供视频支持或如何构建此任务的概念感到困惑。我是否应该检查浏览器并为该特定浏览器播放视频（在这种情况下，我必须在不同的浏览器中上传视频）或者是否有任何通用插件可以在所有浏览器中播放视频
需要帮助。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:24:38.880

试试 HTML5 视频插件，比如

```
Mediaelementjs.com
videojs.com 
```

这些插件会自动处理您的浏览器兼容性。“.mp4”就足够了。如果您没有其他视频扩展名（.ogg 或 .webm），插件会自动将其转换为 FLASH 对象。

# android - 如何在 libpng 1.5.x 中为 ARM 使用 NEON 优化，我收到链接错误

> ID：12795600
> 
> 赞同：2
> 
> 时间：2012-10-09T08:09:41.380
> 
> 标签：android, android-ndk, arm, neon, libpng

我在 pngrutil.c 中找到了 NEON 的优化。但是当我定义一个宏“PNG_ARM_NEON”并尝试在android NDK中编译源代码时，我得到了这些链接错误：

```
/libpng/pngrutil.c:3730: undefined reference to `png_read_filter_row_up_neon'
/libpng/pngrutil.c:3730: undefined reference to `png_read_filter_row_sub4_neon'
/libpng/pngrutil.c:3730: undefined reference to `png_read_filter_row_avg4_neon'
/libpng/pngrutil.c:3730: undefined reference to `png_read_filter_row_paeth4_neon'
/libpng/pngrutil.c:3730: undefined reference to `png_read_filter_row_sub3_neon'
/libpng/pngrutil.c:3730: undefined reference to `png_read_filter_row_avg3_neon'
/libpng/pngrutil.c:3730: undefined reference to `png_read_filter_row_paeth3_neon' 
```

我发现这些函数是在“pngpriv.h”中声明的，但在任何源文件中都找不到实现。

“NEON 优化”是否已经可用于当前版本的 libpng 或只是“TODO”？

# c# - 在“MouseClick”事件的 DataGridView 中添加新行时出现问题

> ID：12795608
> 
> 赞同：0
> 
> 时间：2012-10-09T08:10:13.620
> 
> 标签：c#, events, datagridview

我需要在“MouseClick”事件上向 DataGridView 添加一个新行。我这样做了，但是当我单击现有单元格时，也会添加该行。我在“CellClick/CellEndEdit”事件上有另一个处理程序，并且“MouseClick”也与它们共同引发。如何避免这种情况？请帮助解决这个问题。

谢谢。

CellEndEdit 事件：

```
private void dataGridViewWorks_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        FormSelectItem frm = new FormSelectItem(formMain);
        switch (dataGridViewWorks.Columns[e.ColumnIndex].Name)
        {
            case "WorksWORKNAME":
                //some functions
                break;

            case "WorksCATNR":
                //some functions
                break;

            case "WorksQuantity":

                //some functions
                break;
            default:
                break;
        }
    } 
```

鼠标点击事件：

```
private void dataGridViewWorks_MouseClick(object sender, MouseEventArgs e)
    {
        if (dataGridViewWorks.Rows.Count == 0)
        {
            dataGridViewWorks.Rows.Add();
            return;
        }
        dataGridViewWorks.Rows.Insert(dataGridViewWorks.Rows.Count);
        dataGridViewWorks.CurrentCell = dataGridViewWorks.Rows[dataGridViewWorks.Rows.Count - 1].Cells[1];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:44:44.170

您可以使用 dataGridViewWorks_MouseDoubleClick 而不是 dataGridViewWorks_MouseClick 来添加行，这是一个好主意:)

# git - Git：如何添加远程，合并到主存储库的子文件夹中？

> ID：12795611
> 
> 赞同：1
> 
> 时间：2012-10-09T08:10:19.907
> 
> 标签：git, codeigniter, github

我已经克隆了 codeigniter 存储库[https://github.com/EllisLab/CodeIgniter](https://github.com/EllisLab/CodeIgniter)，它特别创建了应用程序和系统文件夹。

应用程序文件夹有子文件夹、库和第三方，这些都是现在感兴趣的。

我想克隆这个存储库：[https](https://github.com/iamfiscus/Codeigniter-DOMPDF) ://github.com/iamfiscus/Codeigniter-DOMPDF ，它在自己的根目录中包含库和第三方文件夹。

有没有办法在我的 codeigniter 存储库中向 Codeigniter-DOMPDF 添加一个新的遥控器，它将文件和文件夹复制到正确的位置？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:40:33.957

```
git remote add dompdf git://github.com/iamfiscus/Codeigniter-DOMPDF.git
git pull dompdf master 
```

您使用第一条语句（将其命名为“dompdf”）创建了一个附加遥控器。然后，你将你想要的分支（master？）从 dompdf repo 拉到你的分支中。

# c# - 将 INotifyPropertyChanged 类绑定为另一个类中的属性

> ID：12795613
> 
> 赞同：0
> 
> 时间：2012-10-09T08:10:30.303
> 
> 标签：c#, .net, wpf

我有一个类有一个相当长的运行过程，我希望 GUI 能够取得进展。

该类有一个名为 Progress 的属性，它是一个实现 INotifyPropertyChanged 的​​类。我正在使用 BusyWorker 并将类的 Progress 属性绑定到它的数据上下文，但是每当进度更改时 BusyWorker 不会显示任何内容。我不知道我在这里是否有意义，所以这里有一些代码：

有问题的班级：

```
public class MyClass
{
  public Progress MyProgress { get; set; }

  public void Run()
  {
    MyProgress = new Progress();
    MyProgress.Status = "Initialising";
    // Do stuff, update progress, etc.
  }
}

public class Progress : INotifyPropertyChanged
{
  private string status;

  public string Status
  {
    get { return status; }
    set
    {
      status = value;
      OnPropertyChanged("Status");
    }
  }

  public event PropertyChangedEventHandler PropertyChanged;

  private void OnPropertyChanged(string info)
  {
    if (PropertyChanged != null)
      PropertyChanged(this, new PropertyChangedEventArgs(info));
  }
} 
```

XAML：

```
// ...
<xctk:BusyIndicator HorizontalAlignment="Stretch" Margin="0,0,0,0" Name="busyIndicator" VerticalAlignment="Stretch" BusyContent="{Binding}">
    <xctk:BusyIndicator.BusyContentTemplate>
        <DataTemplate>
            <StackPanel Margin="4">
                <TextBlock Text="{Binding Status}" FontWeight="Bold" HorizontalAlignment="Left"/>
            </StackPanel>
        </DataTemplate>
    </xctk:BusyIndicator.BusyContentTemplate>
</xctk:BusyIndicator>
// ... 
```

XAML.CS：

```
MyClass test = new MyClass();
BusyIndicator.DataContext = test.MyProgress;
BusyIndicator.IsBusy = true;
test.Run(); 
```

如果我这样运行它并在`OnPropertyChanged`通话中停止，`PropertChanged`则始终为空。如果我在我的 xaml.cs 中创建一个单独的 Progress 对象，它工作得很好，但我希望我的“运行”方法来处理这个。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:16:51.840

问题是您在调用 run 方法之前分配数据上下文，这意味着当您分配数据上下文“MyProgress”时，对象为“Null”..所以在调用“Run”方法之前数据上下文为 null..您正在调用为“MyProgress”创建实例的 Run 方法，但由于您的“MyClass”不是“INotifyPropertyChanged”，它无法通知数据上下文更改......

解决方案是：尝试在 MyClass 的构造函数中创建 MyProgress 实例。所以在分配数据上下文时不会为空，并且在 run 方法中不要创建任何实例，只需更新 status 属性。

像这样的东西

```
public class MyClass
{
  public Progress MyProgress { get; set; }

  public MyClass()
  {
    MyProgress = new Progress();
  }

  public void Run()
  {    
    MyProgress.Status = "Initialising";
    // Do stuff, update progress, etc.
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:34:24.760

```
<xctk:BusyIndicator HorizontalAlignment="Stretch" Margin="0,0,0,0" Name="busyIndicator" VerticalAlignment="Stretch" BusyContent="{Binding}">
<xctk:BusyIndicator.BusyContentTemplate>
    <DataTemplate>
        <StackPanel Margin="4">
            <TextBlock Text="{Binding Path=Status}" FontWeight="Bold" HorizontalAlignment="Left" DataContext="{Binding DataContext, RelativeSource={RelativeSource FindAncestor, AncestorType=BusyIndicator}}"/>
        </StackPanel>
    </DataTemplate>
</xctk:BusyIndicator.BusyContentTemplate> 
```

// ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:48:30.763

这对我有用：

*.xaml

```
<xctk:BusyIndicator HorizontalAlignment="Stretch" Margin="0,0,0,0" Name="busyIndicator" VerticalAlignment="Stretch" IsBusy="True">
                <xctk:BusyIndicator.BusyContentTemplate>
                    <DataTemplate>
                        <StackPanel Margin="4">
                            <TextBlock Text="{Binding Path=Test.MyProgress.Status, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" FontWeight="Bold" HorizontalAlignment="Left"/>
                        </StackPanel>
                    </DataTemplate>
                </xctk:BusyIndicator.BusyContentTemplate>
            </xctk:BusyIndicator> 
```

*.xaml.cs：

```
public partial class MainWindow : Window
{
    public MyClass Test { get; set; }

    public MainWindow()
    {
        Test = new MyClass();
        InitializeComponent();
        Test.Run();
    }
}

public class MyClass
{
    public Progress MyProgress { get; set; }

    public void Run()
    {
        MyProgress = new Progress();
        MyProgress.Status = "Initialising";
        // Do stuff, update progress, etc.
    }
}

public class Progress : INotifyPropertyChanged
{
    private string status;

    public string Status
    {
        get { return status; }
        set
        {
            status = value;
            OnPropertyChanged("Status");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string info)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(info));
    }
} 
```

# java - 导入 javax.mail 无法解析

> ID：12795614
> 
> 赞同：12
> 
> 时间：2012-10-09T08:10:30.793
> 
> 标签：java, android

```
import javax.mail.BodyPart;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.SendFailedException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;    

private void sendMail() throws MessagingException{

    String host = "smtp.gmail.com";
    String password = "abcde12345";
    String from = "testing@gmail.com";
    String toAddress = email;
    String filename = Environment.getExternalStorageDirectory() + "/jam.jpg";

    Properties properties = System.getProperties();
    properties.put("mail.smtp.host", host);
    properties.put("mail.smtps.auth", true);
    properties.put("mail.smtp.starttls.enable", true);
    Session session = Session.getInstance(properties, null);

    MimeMessage message = new MimeMessage(session);
    message.setFrom(new InternetAddress(from));
    message.setRecipients(Message.RecipientType.TO, toAddress);
    message.setSubject("Anti-Theft Attachment");

    BodyPart messageBodyPart = new MimeBodyPart();
    messageBodyPart.setText(smsMessageString);

    Multipart multipart = new MimeMultipart();
    multipart.addBodyPart(messageBodyPart);
    message.setContent(multipart);

    try{
        Transport transport = session.getTransport("smtps");
        transport.connect(host, from, password);
        transport.sendMessage(message, message.getAllRecipients());
        System.out.println("Mail Sent Successfully");
        transport.close();
    } catch (SendFailedException sfe){
        System.out.println(sfe);
    }
}; 
```

我正在开发一个应用程序，一旦手机被盗或丢失，该应用程序将自动向用户发送一封电子邮件，通知用户当前的手机状态。但是我在导入 javax.mail 时遇到了问题“导入 javax.mail 无法解决”。我应该怎么办？谢谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-20T07:26:02.630

尝试添加这个[javax.mail.jar 。你可以](http://www.oracle.com/technetwork/java/javamail/javamail-138606.html)[在这里](https://java.net/projects/javamail/pages/Home) 下载它 ，希望这会有所帮助。[这里](https://stackoverflow.com/questions/6743031/how-to-resolve-javax-mail-messagingexception)有一个类似的问题。

# php - 如何使表格使用 FPDF

> ID：12795615
> 
> 赞同：2
> 
> 时间：2012-10-09T08:10:31.557
> 
> 标签：php, html, fpdf

我正在尝试使用[fpdf](http://www.fpdf.org/)将表格插入 PDF 文档，我想要实现的输出是：-

![在此处输入图像描述](../Images/f829469bd8567f01af56c8c110fde232.png)

这是我到目前为止的代码：-

```
$pdf->Cell(10,5,'No',1,0,'C',0);
$pdf->Cell(50,5,'Name',1,0,'C',0);
$pdf->Cell(90,5,'Hobby',1,1,'C',0);
$pdf->Cell(10,5,'',1,0,'C',0);
$pdf->Cell(50,5,'',1,0,'C',0);
$pdf->Cell(30,5,'Hobby A',1,0,'C',0);
$pdf->Cell(30,5,'Hobby B',1,0,'C',0);
$pdf->Cell(30,5,'Hobby B',1,1,'C',0); 
```

但它给出了以下输出： -

![在此处输入图像描述](../Images/5625546b81fddba7eeae057a20ff2c4d.png)

如何获得所需的输出？

# azure - 文件系统限制存储网站 azure

> ID：12795622
> 
> 赞同：3
> 
> 时间：2012-10-09T08:11:10.233
> 
> 标签：azure, azure-storage

我有一个在 Windows azure 上运行的网站。文件系统存储限制为 10GB，我的应用程序将超出限制。如何增加文件系统存储的容量？我正在使用一个带有 MySQL 数据库和保留网站模式的网站。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:01:17.040

我不认为你可以增加这个配额。您可以研究的一件事是将一些内容存储在 Blob 存储中，而不是将它们存储在文件系统中。这样您就不会受到 Windows Azure 网站的 10 GB 存储限制的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T13:56:32.480

存储容量取决于您使用的计划。应用服务（以前称为 Azure 网站）目前有免费、共享、基本、标准和高级计划，分别具有 1 GB、1 GB、10 GB、50 GB 和 500 GB 的存储空间。请注意，此容量由托管在同一 VM 上的所有网站共享。有关详细信息，请参阅[https://azure.microsoft.com/en-us/pricing/details/app-service/](https://azure.microsoft.com/en-us/pricing/details/app-service/)。

如果应用程序需要的超出您的分配范围，则使用其他一些存储（例如 Blob 存储）是一个不错的选择，并且可能比升级计划更便宜。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:06:56.123

这里只是一个注意点——如果你决定从你的网站添加一个 blob 存储帐户和参考文件（如大视频、图像、文档等）......容器将需要设置为“**公共**”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T02:04:00.740

如果 MySQL 在 Windows 上运行（您没有指定操作系统），这里有一些想法......

*   致电 Microsoft Azure 支持团队（免费电话）并要求升级存储

*   创建第二个 Azure 存储帐户，并使用 Windows DiskManager 将驱动器合并在一起。

# android - Google Cloud Message with PhoneGap（在 Activity 和 GCMIntentService 之间共享值）

> ID：12795626
> 
> 赞同：1
> 
> 时间：2012-10-09T08:11:40.957
> 
> 标签：android, cordova, google-cloud-messaging

我正在尝试制作一个使用 PhoneGap 库获取推送通知的应用程序。

运行示例客户端代码（MainActivity 和 GCMIntentService）和服务器端代码（PHP 版本）。

问题是 ：

因为我正在使用 PhoneGap 制作应用程序，所以当我收到推送消息时，我想在 Webview（for PhoneGap）上做一些事情。但是，接收消息的是 GCM Intent Service 中的回调（onMessage）。

我怎样才能让 MainActivity 知道 GCM Intent Service 从服务器获取了推送消息？

我考虑过......我在 iOS 中所做的事情，比如 Key-Value-Observing、singleton 等......但它是不同的。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:33:34.780

我的项目中有同样的问题。

我所做的是有一个`public static Activity`in `GCMIntentService`。在每个活动中，我将此值设置为`this`in`onResume()`并设置为`null`in`onPause()`现在我认为 GCMIntentService 在另一个线程上运行，因此您需要使这个线程安全。如果 Activity 的值为 null，我会显示一个通知。如果不是，我让 Activity 处理它。

# c# - 将导航箭头添加到菜单

> ID：12795630
> 
> 赞同：0
> 
> 时间：2012-10-09T08:11:49.850
> 
> 标签：c#, wpf, xaml, user-interface, navigation

我希望在我的系统中实现以下箭头设计，其中箭头位于所选项目上。 ![在此处输入图像描述](../Images/7747812896c35e05bd7ade70df573fa4.png)

目前我已经将菜单实现为 ​​ListBox 并且行为正确，减去箭头。实现这种行为的最佳方法是什么？

目前，我已经编辑了 ItemsControl 并添加了一个箭头，但它在边框内，而不是在边框外，如下所示：

![在此处输入图像描述](../Images/6371a1b1ba628062f0af75aec9123b2f.png)

```
<ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Grid>
                        <Border Name="Border">
                            <ContentPresenter Content="{TemplateBinding Content}" />
                        </Border>
                        <Path Name="SelectedArrow" Data="{StaticResource RightArrow}" Width="10" Height="20" Stretch="Fill" Fill="White" HorizontalAlignment="Right" Visibility="Collapsed" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter TargetName="SelectedArrow" Property="Visibility" Value="Visible" />
                        </Trigger>
                    </ControlTemplate.Triggers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:14:28.603

覆盖它的 ItemTemplate 以包含一个箭头并将其可见性设置在可以检查 IsSelected 条件的触发器上。

# https - g-wan web服务器可以用https配置吗

> ID：12795633
> 
> 赞同：1
> 
> 时间：2012-10-09T08:12:08.820
> 
> 标签：https, g-wan

谁能建议如何使用安全 http (https) 配置 g-wan？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:45:41.567

在 G-WAN 发布 SSL/TLS 支持之前，您可以使用[Stunnel](http://www.stunnel.org/)，它将 SSL/TLS 连接中继到 G-WAN。

还有另一种方式来支持`SSL/TLS`G-WAN v3.10+ 将提供：`protocol handlers`.

这些处理程序专用于支持新协议的任务，例如`POP3, SMTP, LDAP, XMPP.`

我们发现，与其对 G-WAN 用户请求的所有协议进行硬编码，不如让人们实现他们真正需要的东西要好得多。我们可以帮助他们做到这一点，但这样做的方式不再是阻止任何人——在任何一方。

因此，要回答您的问题，您将能够使用`OpenSSL`或`GNU-TLS`添加`SSL/TLS`对 G-WAN 的支持。

当然，G-WAN 不对处理程序或 SSL 库中的错误负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:30:21.100

我已经关注 G-WAN 项目一年多了。

G-WAN 的作者已经构建了 https 功能，但还没有发布。（出于安全原因，因为没有完全测试 https 的好工具。）

下一个版本将于本月发布。这是一个受欢迎的要求，所以我们希望新版本有 https。

# jsp - 如何在Struts2中设置页面自动重定向错误的url

> ID：12795634
> 
> 赞同：0
> 
> 时间：2012-10-09T08:12:09.453
> 
> 标签：jsp, struts2

我需要将不正确的 URL 重定向到我的服务器到特定页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:00:40.767

您可以在 struts.xml 中使用默认操作。请参阅[http://struts.apache.org/2.x/docs/action-configuration.html#ActionConfiguration-ActionDefault](http://struts.apache.org/2.x/docs/action-configuration.html#ActionConfiguration-ActionDefault)。

或者，如果您需要更复杂的解决方案`Unknown Handlers`，Struts2 [http://struts.apache.org/2.x/docs/unknown-handlers.html中也有。](http://struts.apache.org/2.x/docs/unknown-handlers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T15:56:25.387

用这个

```
<META HTTP-EQUIV="Refresh" CONTENT="0;URL=jsp/login.jsp"> 
```

它会自动重定向到 url 中指定的位置。

# python - 面料不断要求输入密码

> ID：12795636
> 
> 赞同：3
> 
> 时间：2012-10-09T08:12:25.483
> 
> 标签：python, ssh, fabric

我有 fab 文件，其中包含

```
env['hosts'] = ['localhost']
env['user'] = 'code'
env['password'] = 'searce'

def mk_dirtree():
    sudo("mkdir %s" % PROJECT_DIR)
    sudo("chown -R code:code %s" % PROJECT_DIR)
    run("mkdir -p %s" % (PROJECT_DIR + '/www/static'))
    sudo("chown -R www-data:www-data %s" % (PROJECT_DIR + '/www')) 
```

现在，当我这样做时，我会`fab mk_dirtree`不断提示`[localhost] Login password for 'code':`

我在一个 ec2 实例上运行它，我使用密钥通过 ssh 连接到该实例，并且禁用了 ssh 的密码登录

**编辑：** 我认为fabric是首先做的`ssh code@localhost`，但由于密码sshing被禁用，所以这不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-17T11:50:04.170

如果你真的想要并且需要使用`run()`而不是`local()`你可以将你的 SSH 公钥添加到`~/.ssh/authorized_keys`你的用户帐户的文件中。

这看起来像这样：

```
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys 
```

该解决方案将绕过本地机器的登录密码提示。当然，您必须为运行 fabfile 的每台本地计算机执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:38:51.620

`run()`和`sudo()`操作是通过 ssh 进行的。如果你想在 localhost 上运行命令，你应该考虑使用`local()`：

[http://docs.fabfile.org/en/1.4.3/api/core/operations.html?highlight=sudo#fabric.operations.local](http://docs.fabfile.org/en/1.4.3/api/core/operations.html?highlight=sudo#fabric.operations.local)

在同一页面上是文档`run()`，`sudo()`它们都提到了它们在“远程主机”上运行的事实，这表明它们将通过 ssh 运行。

# java - Hibernate查询一对一关系

> ID：12795641
> 
> 赞同：0
> 
> 时间：2012-10-09T08:12:41.080
> 
> 标签：java, hibernate, foreign-keys

我是休眠的新手，我创建了表和映射，并使用以下代码列出了表中的所有行。

```
List places = session.createQuery("FROM Place").list();
for (Iterator iterator = places.iterator(); iterator.hasNext();) {
   Place place = (Place) iterator.next();
   System.out.println("-" + place.getName());
} 
```

此代码工作正常，但是 PLACE 表与 ADDRESS 表具有一对一的关系，并且此代码为 ADDRESS 表中的所有行返回空值并打印出：

```
-null
-null
-null
-343
-223
-122 
```

我只想要 PLACES 表中的行。我该如何管理？

重要提示：在 Pierre-Henri Toussaint 的回答之后，我注意到生成的 sql。Hibernate 首先从地址生成一个选择查询，然后从一个地方选择查询。（当我将约束值更改为 false 时，它​​会为地址表的每一行生成一个查询）

地址.hbm.xml：

```
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.places.general.Address" table="ADDRESS" schema="dbo">
        <id name="placeId" type="java.lang.Integer">
            <column name="PLACE_ID" />
            <generator class="foreign">
                <param name="property">place</param>
            </generator>
        </id>
        <one-to-one name="place" class="com.places.general.Place"
                    constrained="true">
        </one-to-one>
        <property column="PLACE_ADDRESS" length="250" name="placeAddress" type="java.lang.String"/>
        <property column="PHONE" length="50" name="phone" type="java.lang.String"/>
    </class>
</hibernate-mapping> 
```

Place.hbm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.places.general.Place" table="PLACES" schema="dbo">
        <id column="ID" name="id" type="java.lang.Integer">
            <generator class="identity"/>
        </id>        
        <property column="NAME" length="100" name="name" not-null="true" type="java.lang.String"/>
        <property column="DETAILS" length="200" name="details" type="java.lang.String"/>
    </class>
</hibernate-mapping> 
```

地方.java：

```
import java.io.Serializable;

public class Place implements Serializable{
    private Integer id;
    private String name;
    private String details;

    public Place() {
    }

    public Place(String name, String details) {
        this.name = name;
        this. details = details;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDetails() {
        return details;
    }

    public void setDetails(String details) {
        this. details = details;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:30:16.693

使约束=假。

这意味着什么： Constrained=true 意味着没有地址就不能存在地方。如果您想通过提供 place_id 来获取位置，则应存在第一个 Address 对象。这样做的方法是，

```
 Address address = (Address) session.load(Address.class, address_id);
    Place place = address.getPlace(); 
```

如果你让 constrained=false，你可以，

```
 Place place = (Place) session.load(Place.class, place_id); 
```

同样适用于 createQuery。

请注意，如果您使用的是 hibernate3，则 constrained=true 应该也可以正常工作.. 它在 hibernate4 上不起作用..

-麦迪

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:01:43.123

看起来您的映射需要一些更改

在地址.hbm.xml

```
<one-to-one name="place" class="com.places.general.Place" lazy="false" cascade="all"/> 
```

在你的地方.hbm.xml

```
<one-to-one name="address" class="com.places.general.Address" constrained="false"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:54:39.673

不知道`constrained`关键字，但似乎执行了右外连接查询。

我建议通过启用 sql 输出来调查查询：

```
<property name="show_sql">true</property> 
```

从这里你可以解决具体的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:49:59.773

您的 Place 实体没有 Address 实体。如果您想正确建立一对一的关系，请检查一下。

[Hibernate – 一对一示例（XML 映射）](http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example/)

# c# - 视图模型错误

> ID：12795644
> 
> 赞同：0
> 
> 时间：2012-10-09T08:12:57.773
> 
> 标签：c#, entity-framework, ef-code-first

我最近在这里得到了一些帮助，并设置了一个名为 RegisterViewModel 的视图模型，其中包含来自（当前）两个不同模型的字段。这很有效，我可以用它来注册一个新用户以及相关的用户信息。我的问题是从同一个视图模型中查看详细信息。在我的“详细信息”方法的 Usee 控制器中，我有相同的代码 -

```
public ViewResult Details(RegisterViewModel viewModel)
        {
            TRSContext context = new TRSContext();
            User currentuser = context.Users
                .Include(i => i.UserDetails)
                .Where(i => i.UserName == viewModel.UserName)
                .Single();

            currentuser.UserDetails = new UserDetails();

            return View(userRepository.Find(viewModel.UserName));
        } 
```

但我得到了错误 -

**无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型**

对于线路 -

**(i => i.UserDetails)**

任何想法这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:14:41.163

应该是`.Include("UserDetails")`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:16:29.057

的 lambda 版本`Include`是在[EF CTP4](http://romiller.com/2010/07/14/ef-ctp4-tips-tricks-include-with-lambda/)中引入的，除非您需要使用字符串，即

```
.Include("UserDetails") 
```

# javascript - 从javascript调用目标C函数的正确方法是什么？

> ID：12795647
> 
> 赞同：1
> 
> 时间：2012-10-09T08:13:12.530
> 
> 标签：javascript, iphone, objective-c, uiwebview, ios6

我想知道是否有任何适当的/记录在案的方法可以从 JavaScript 调用目标 C 函数..？

我已经设法使用 WebView 委托方法让它工作：

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

但是我仍然不相信这种方式，你们中是否有人知道其他一些适当的/记录在案的解决方法..？

谢谢你的时间。

# multithreading - Actionscript 工作人员限制

> ID：12795649
> 
> 赞同：0
> 
> 时间：2012-10-09T08:13:21.753
> 
> 标签：multithreading, actionscript-3, flash, background

我有几个关于工人的问题。我如何向工作人员发送我自己的数据类型的复杂对象...序列化不起作用，这很可悲:(当 Adob​​e 计划发布能够交换任何数据类型的工作人员时，从原始数据类型开始非常复杂的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:41:34.750

[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html#includeExamplesSummary)另有说明-您确定您知道自定义类的序列化是如何工作的吗？

编辑：我知道它很旧，但如果有人需要在 flash 中找到 ISerializable 将失败:) 因为它是[flash.utils.IExternalizable](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/IExternalizable.html)

# javascript - 通过 jquery.load() 防止在加载时重定向脚本

> ID：12795661
> 
> 赞同：1
> 
> 时间：2012-10-09T08:14:33.013
> 
> 标签：javascript, jquery, jquery-load

我有一个页面，我正在加载另一个 url（在同一个域中）的内容，比如

```
$("#preloaded_main_page").load('main/'); 
```

现在由于页面中的一些脚本，当前页面被重定向到我想要阻止的 domain.com/main。我想做的只是加载内容和图像。请注意，我正在加载的 div 是隐藏的。我只想缓存一些元素。

我试过了：

```
$("#preloaded_main_page").unbind().load('main/', function() {
  $("#preloaded_main_page *").unbind('click');
  $(window).unbind('hashchange');
}); 
```

但没有效果。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:29:21.280

我看不到加载将如何执行位置更改。我有几个步骤可以用来调试正在发生的事情。希望能帮助到你。

1.  注释掉您的代码并确保网站的其他部分没有进行重定向。
2.  确保您尝试加载的主页上没有运行任何脚本标记。为什么？因为 text/html MIME 类型上的脚本标签被评估和执行。

3.  尝试在 .load 方法上使用标准的 $.ajax：

    $(document).ready(function () { $.ajax({ type: 'GET', dataType: 'text/html', 缓存: false, url: '/main', 成功: function (data) { if( data != '') $('#preloaded_main_page').html(data); } }); });

代码标签似乎不起作用。所以你需要换行，这样你自己:)

-

如果页面上有任何其他重定向脚本，您需要指定一个全局变量，确保它只会在内容加载后重定向，而不是在加载时重定向。如果是这样的话。

# javascript - 用于 TypeScript 的 IOC

> ID：12795666
> 
> 赞同：10
> 
> 时间：2012-10-09T08:15:07.840
> 
> 标签：javascript, dependency-injection, inversion-of-control, typescript

现在有了 TypeScript，我们在 JavaScript 中有了静态分析和许多 OOP 特性。所以现在是时候在客户端逻辑中进行更好的单元测试了，而且我们需要 IOC 容器来进行依赖注入，以使代码更具可测试性......

那么，是否有人已经体验过这个主题，或者可能知道可以移植到 TypeScript 的 typescript 或 JavaScript 框架的库？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-05-07T22:33:29.727

我开发了一个名为 InversifyJS 的 IoC 容器，它具有诸如上下文绑定之类的高级依赖注入功能。

您需要遵循**3 个基本步骤**才能使用它：

### 1.添加注释

注释 API 基于 Angular 2.0：

```
import { injectable, inject } from "inversify";

@injectable()
class Katana implements IKatana {
    public hit() {
        return "cut!";
    }
}

@injectable()
class Shuriken implements IShuriken {
    public throw() {
        return "hit!";
    }
}

@injectable()
class Ninja implements INinja {

    private _katana: IKatana;
    private _shuriken: IShuriken;

    public constructor(
        @inject("IKatana") katana: IKatana,
        @inject("IShuriken") shuriken: IShuriken
    ) {
        this._katana = katana;
        this._shuriken = shuriken;
    }

    public fight() { return this._katana.hit(); };
    public sneak() { return this._shuriken.throw(); };

} 
```

### 2\. 声明绑定

绑定 API 基于 Ninject：

```
import { Kernel } from "inversify";

import { Ninja } from "./entities/ninja";
import { Katana } from "./entities/katana";
import { Shuriken} from "./entities/shuriken";

var kernel = new Kernel();
kernel.bind<INinja>("INinja").to(Ninja);
kernel.bind<IKatana>("IKatana").to(Katana);
kernel.bind<IShuriken>("IShuriken").to(Shuriken);

export default kernel; 
```

### 3.解决依赖关系

解析 API 基于 Ninject：

```
import kernel = from "./inversify.config";

var ninja = kernel.get<INinja>("INinja");

expect(ninja.fight()).eql("cut!"); // true
expect(ninja.sneak()).eql("hit!"); // true 
```

最新版本 (2.0.0) 支持许多用例：

*   内核模块
*   内核中间件
*   使用类、字符串文字或符号作为依赖标识符
*   注入常​​量值
*   注入类构造函数
*   工厂注入
*   汽车厂
*   注入提供者（异步工厂）
*   激活处理程序（用于注入代理）
*   多次注射
*   标记绑定
*   自定义标签装饰器
*   命名绑定
*   上下文绑定
*   友好的异常（例如循环依赖）

您可以在[https://github.com/inversify/InversifyJS了解更多信息](https://github.com/inversify/InversifyJS)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-31T00:13:46.740

我为打字稿创建了 DI 库 - huject

[https://github.com/asvetliakov/huject](https://github.com/asvetliakov/huject)

例子：

```
import {Container, FactoryMethod, ConstructorInject, Inject} from 'huject';
class FirstService {
   public constructor(param: number) {}
}
class SecondService {
}

@ConstructorInject
class MyController {
    @Inject
    public service: FirstService;

    public second: SecondService;
    public constructor(service: SecondService) {
        this.second = service;
    }
    ...
}
container.setAllowUnregisteredResolving(true);
container.register(FirstService, [10]); // Register constructor arguments

// FirstService and SecondService will be resolved for container instance
let controller = container.resolve(MyController); 
```

虽然 TypeScript 接口存在问题，但我有 2 个解决方法（使用抽象类或简单类作为接口）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-15T08:35:09.030

或者，您可以不使用框架并将类用作容器，并将对象工厂用作属性。然后，您可以在测试中继承此类并更改工厂。这种方法是类型安全的，不需要任何装饰器，只需注册类。

```
class B {
    echo() {
        alert('test');
    }   
}

class A {
    constructor(private b: B) {
        b.echo();
    }
}

class Container {
    A = () => new A(this.B());
    B = singleton(() => new B()); 
}

var c = new Container();
var a = c.A();

// singleton helper:

function memoize<T>(factory: () => T): () => T  {
    var memo: T = null;
    return function () {
        if(!memo) {
            memo = factory();
        }
        return memo;
    };
}

var singleton = memoize; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T10:28:09.543

现在，您可以在没有 IOC 部分的 JavaScript 中使用依赖注入。是否编写“手动”解析器、工厂或任何您喜欢的 DI 模式取决于您。

当采用 ECMAScript 6 标准时，它可能使 IOC 的概念在 JavaScript 中成为可能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-12T06:41:21.487

我们一直在使用一个简单的依赖注入容器，它使用 AMD 定义/要求 - 类似语法。最初的实现是在 TypeScript 中，尽管下面的博客文章是用普通的旧 JavaScript 呈现的。

[http://blog.coolmuse.com/2012/11/11/a-simple-javascript-dependency-injection-container/](http://blog.coolmuse.com/2012/11/11/a-simple-javascript-dependency-injection-container/)

定义依赖关系非常简单，不需要大量配置，并且支持类似于 requirejs 的循环依赖解析。

这是一个简单的例子：

```
// create the kernel
var kernel = new ServiceKernel();

// define service1
kernel.define("service1", function() {

    // service1 has a function named foo
    return {
        foo: function () { return "foo"; }
    }

});

// define service2, which depends on service1
kernel.define("service2", ["service1"], function(service1) {

    // service2 has a function named foobar
    return {
        foobar : function() { return service1.foo() + "bar"; }
    }

});

// get service2 instance 
var service2 = kernel.require("service2");
service2.foobar();  // returns "foobar"

// get both service1 and service2 instances
kernel.require(["service1", "service2"], function(service1, service2) {

    alert(service1.foo() + service2.foobar()); // displays foofoobar

}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-22T17:50:54.457

我曾经将[TSyringe](https://github.com/microsoft/tsyringe)用于中小型项目。它工作得很好，但我的结论是我不需要在 JavaScript / TypeScript 中进行依赖注入。

由于 JavaScript 是一种动态语言，所有实现都可以在运行时更改。如果您只想注入存根对象进行单元测试，请使用[SinonJS](https://sinonjs.org/)或类似工具。

为什么：

*   它给您的代码带来了不必要的复杂性和冗长的样板文件。
*   一切都应该写成 Class，因此 TypeScript 无法为某些方法推断出正确的类型，这意味着您应该手动为它们键入参数。
*   大多数依赖注入框架依赖于 TypeScript 装饰器，编译速度很慢。并且该功能仍处于试验阶段（这可能会随着时间的推移而改变）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-03T12:15:23.550

结帐[https://github.com/typestack/typedi](https://github.com/typestack/typedi)

这样的事情是可能的：

```
import "reflect-metadata";
import {Service, Container} from "typedi";

@Service()
class SomeClass {

    someMethod() {
    }

}

let someClass = Container.get(SomeClass);
someClass.someMethod(); 
```

# c# - 如何在单元测试中将 Thread.CurrentPrincipal 重置为未经身份验证

> ID：12795667
> 
> 赞同：8
> 
> 时间：2012-10-09T08:15:19.150
> 
> 标签：c#, .net, mstest

我有可以从多种客户端类型（例如 WinForms、Console、ASP.NET 等）调用的库代码，并且需要确定当前的主体。为此，我对 Thread.CurrentPrincipal 和 Environment.UserName 执行两步检查，如下所示：

```
var currentUser = !System.Threading.Thread.CurrentPrincipal.Identity.IsAuthenticated ? null : System.Threading.Thread.CurrentPrincipal.Identity.Name;
if (string.IsNullOrWhiteSpace(currentUser))
{
    currentUser = Environment.UserName;
} 
```

在控制台应用程序 Thread.CurrentPrincipal.Identity.IsAuthenticated 中始终为 false 但是在 MSTest 中它始终具有有效的经过身份验证的用户。

无论如何将单元测试中 Thread.CurrentPrincipal 的值重置为未经身份验证以模仿控制台应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T09:08:44.417

您需要做的就是：

```
Thread.CurrentPrincipal = new GenericPrincipal(new GenericIdentity(""), new string[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T07:37:20.897

我宁愿创建一个类，该类`CurrentPrincipal`通过其适当的接口实现所有管理，并将该接口注入您需要的地方。

然后你可以在单元测试中模拟它，使它们更简单。

# c# - 双击列表框中的项目后，C#文本不会显示在另一个表单上

> ID：12795668
> 
> 赞同：1
> 
> 时间：2012-10-09T08:15:21.653
> 
> 标签：c#

我正在做一个包含一个列表框（listbox10）的winform，上面有一些项目。当我双击一个项目时，它将显示另一个表单 (Form3)，其中包含一个文本框 (textbox1)，文本框的文本是我选择的项目。下面是我的编码。

```
Form3 msgForm3;
private void listBox10_DoubleClick(object sender, EventArgs e)
{

    msgForm3 = new Form3();
    textBox1.Text = listBox10.SelectedItem.ToString();
    msgForm3.Show();
} 
```

但不知何故，我不知道为什么，文本框总是空的。我的编码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:24:54.483

您正在访问的`textBox1`不在`msgForm3`。访问正在`msgForm3`使用的（正如其他答案所提到的）

```
msgForm3.textBox1.Text = listBox10.SelectedItem.ToString(); 
```

但由于`private`默认情况下所有表单控件都是您可以将其内部保护级别更改`Form3.Designer.cs`为`public`(或`internal`) ：

```
public System.Windows.Forms.TextBox textBox1; 
```

或在 Form3 构造函数中添加应`textbox1`作为参数输入的文本：

```
public Form3(string text)
{
    InitializeComponent();
    this.textBox1.Text = text;
} 
```

当您创建 Form3 的实例时，请使用

```
msgForm3 = new Form3(listBox10.SelectedItem.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:18:07.797

假设 textbox1 是 msgForm3 中的一个控件，那么正确的语法应该是

```
msgForm3.textBox1.Text = listBox10.SelectedItem.ToString(); 
```

这需要使用 Form Designer 属性窗口将 textBox1 的属性 Modifiers 从 Private 更改为 Public。
我不推荐这种改变。最好像这样在 msgForm3 的构造函数中传递新值

```
msgForm3 = new Form3(listBox10.SelectedItem.ToString());  
msgForm3.Show(); 
```

然后在 msgForm3 的构造函数中添加

```
public Form3(string initialValue)  
{  
    InitializeComponent();  
    this.textBox1.Text = initialValue;  
} 
```

或者您可以像这样向您的 Form3 类添加一个公共方法

public void InitText(string initialValue) { this.textBox1.Text = initialValue;
}

并以这种方式调用

```
msgForm3 = new Form3();  
msgForm3.InitText(listBox10.SelectedItem.ToString());
msgForm3.Show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:19:54.397

这是您可以访问其他表单的成员的方式。

```
msgForm3 = new Form3();
msgForm3.textBox1.Text = listBox10.SelectedItem.ToString();
msgForm3.Show(); 
```

**编辑：**

从`Form3.Designer.cs`文件中只需将保护级别从更改`private`为`public`.

代替

```
private System.Windows.Forms.TextBox textBox1; 
```

到

```
public System.Windows.Forms.TextBox textBox1; 
```

# core-data - NSPersistentDocument 文档中的外部记录发生了什么？

> ID：12795672
> 
> 赞同：4
> 
> 时间：2012-10-09T08:15:28.673
> 
> 标签：core-data, nspersistentdocument

我只是想使用 NSPersistentDocument 并且在我的数据模型中我喜欢存储一些二进制数据。

好吧，自 10.7 Core Data 开始提供[外部存储功能](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html)。当您将它与 NSPersistentDocument 结合使用时，是否有人知道甚至有测试（可能是一些示例）会发生什么？

我想我读过，如果您在其中放入至少 1MB 的二进制数据，核心数据将创建一个单独的文件并仅在数据库中存储一个 ref。但是如果将它与 NSPersistentDocument 一起使用会发生什么？如果它创建一个bundel并管理文件夹中的外部文件，我会很好。

有人试过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-10T08:17:50.943

我试过了。它不会创建捆绑包。外部数据最终位于与您的文档位于同一目录中的不可见文件夹中。它不会与文档一起被复制、移动或删除，因此如果您复制或移动文档，您将面临数据丢失的风险。

[我在这里](https://stackoverflow.com/questions/45356025/using-nspersistentdocument-to-create-documents/46130680#46130680)写了一个详细的答案。

# c# - 将 UTC 字符串转换为 DateTime 时出现异常

> ID：12795674
> 
> 赞同：-2
> 
> 时间：2012-10-09T08:15:36.450
> 
> 标签：c#, .net

我从 Web 服务接收到下面的日期时间字符串，并尝试将其转换为 UTC 日期时间对象，但抛出异常。

```
try
{
    string ReceivedDateTimeString = "2012-10-09T07:42:13.409191Z";
    DateTime TransformedReceivedDateTimeString = DateTime.ParseExact(ReceivedDateTimeString, "o", CultureInfo.InvariantCulture, DateTimeStyles.None);
}
catch (Exception e)
} 
```

为什么会抛出异常？字符串的格式或我的转换有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:27:06.713

试试这个：

```
string ReceivedDateTimeString = "2012-10-09T07:42:13.409191Z";
DateTime TransformedReceivedDateTimeString = 
    DateTime.ParseExact(ReceivedDateTimeString, 
                       "yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'FFFFFFFK", 
                       CultureInfo.InvariantCulture, 
                       DateTimeStyles.RoundTripKind); 
```

[“o”格式说明符](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Roundtrip)的文档指出：

> "O" 或 "o" 标准格式说明符对应于 DateTime 值的 "yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffffffK" 自定义格式字符串和"yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffffffzzz" DateTimeOffset 值的自定义格式字符串。

即 7 位小数，而不是字符串中的 6 位。

> 如果样式参数设置为 DateTimeStyles.RoundtripKind，则可以使用 DateTimeParse(String, IFormatProvider, DateTimeStyles) 或 DateTimeParseExact 方法解析格式化的字符串。

即您需要指定DateTimeStyles.RoundtripKind。

在上面，我使用了“FFF...”而不是“fff...”，因为这将接受可变数量的小数（缺少的尾随小数被视为零）。这是为了符合“容进严出”的原则。

我还指定 DateTimeStyles.RoundtripKind 在解析时保留 Kind 属性（在这种情况下为 Utc）。如果不这样做，结果将转换为本地时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:18:12.010

那这个呢：

```
DateTime TransformedReceivedDateTimeString = DateTime.Parse(ReceivedDateTimeString).ToUniversalTime(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:24:12.733

好吧，Jon Skeet 最后一次给了你正确的答案：[UTC string to DateTime exception](https://stackoverflow.com/questions/12705874/utc-string-to-datetime-exception)

> 请注意，那里有 7 个 fs，但您只有 6 个小数位。

现在也是同样的错误。您有三种可能的解决方案：

1.  正如您在上一个问题（[评论](https://stackoverflow.com/questions/12705874/utc-string-to-datetime-exception#comment17154938_12705940)）中所述，您可以让您的数据提供者以标准格式向您发送数据。
2.  如果您无权访问数据，则可以将样式参数更改为自定义格式： `"yyyy-MM-ddTHH:mm:ss.ffffffK"`
3.  或者，您可以在末尾添加另一个小数以遵循标准格式： `"2012-10-09T07:42:13.4091910Z";`

更改标准格式

# php - Aster db 返回错误的行号

> ID：12795678
> 
> 赞同：0
> 
> 时间：2012-10-09T08:15:41.100
> 
> 标签：php, odbc, teradata-aster

我使用 PHP VIA ODBC 连接到 Aster DB。我正在运行一个需要很长时间才能运行的查询。我已添加限制以仅获取 1000 条记录。在显示这些记录时，它会打印准确的 1000 条记录，但是当我打印总行数时，它会显示一个非常大的数字（140393890971647）。

为什么它只打印 1000 时返回错误的行数。我需要知道确切的行数，因为我必须将数据分成块插入到 PostgreSQL 中。

这是我对 aster 的查询：

```
select new_ean as ean, com_email as email, ranking from (select new_ean, com_email, rank() over (partition by com_email order by new_ean) as ranking from (select distinct p1.ean as new_ean , c.com_email from bn.table1 p1 join bn.table2 pcm1 on p1.ean = pcm1.ean join bn.table2 pcm2 on pcm1.contributor_id = pcm2.contributor_id join bn.table1 p2 on pcm2.ean = p2.ean join bn.table3 coi on coi.ean = pcm2.ean and demand_dt > current_date-730 join bn.table4 c on coi.customer_sk = c.customer_sk where p1.ean in (long list of coma separated ean here) and p2.inc_category_code = p1.inc_category_code) sq1) sq2 where ranking <= 4 order by new_ean asc 
limit 1000 OFFSET 1 
```

这是我的php代码：

```
$rs = odbc_exec($aster, $sql);
 echo "Tot Rows :".odbc_num_rows($rs). " <br> ";

while ($row = odbc_fetch_row($rs))
    {

         echo "<br>" . odbc_result($rs,1) . "===" . odbc_result($rs,2) . "===" .odbc_result($rs,3);

    } 
```

# git - 无法访问存储库“...”。使用 Xcode 4.5.1

> ID：12795684
> 
> 赞同：0
> 
> 时间：2012-10-09T08:16:09.003
> 
> 标签：git, xcode4.5

我想你们中的大多数人都会升级 Xcode。将Xcode升级到4.5.1后，提交项目时遇到错误，

错误对话框说，无法执行操作，因为无法访问存储库。请验证一个或多个存储库是否在线且可访问，然后重试。

但是存储库位于本地磁盘上，因此它是在线且可访问的。

我可以通过其他 git 客户端（GITX [http://gitx.laullon.com](http://gitx.laullon.com)）管理这个 git 存储库，所以 git 存储库不应该被破坏。新创建的项目也有同样的问题。

此外，在存储库管理器窗口中，所有 git 项目的标题都变成了红色。发生了什么！

我把 Xcode.app 扔到垃圾箱，然后重新安装它。但是没有效果。

git 已更新。

```
$ which git
/usr/bin/git
$ ls -l /usr/bin/git
-rwxr-xr-x  2 root  wheel  2707120 10  7 20:07 /usr/bin/git
$ ls -l /Applications/Xcode.app/Contents/Developer/usr/bin/git 
-rwxr-xr-x  2 root  wheel  2707120 10  9 09:38  /Applications/Xcode.app/Contents/Developer/usr/bin/git 
```

如果您有同样的问题或任何解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-17T23:03:49.057

我重新安装 OSX (Mountain Lion)，然后 Xcode 工作正常。

# wordpress - 在 wordpress 管理区域，如何取消注册默认样式？

> ID：12795689
> 
> 赞同：1
> 
> 时间：2012-10-09T08:16:39.010
> 
> 标签：wordpress, wordpress-theming, stylesheet

管理区域中默认样式表的句柄是什么，以便我可以取消注册我想要的样式表？当然，我会将样式复制到我自己的样式表中，这对于结构和基本样式至关重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:40:18.933

没有多少人需要这个，但我正在大量设计管理区域的样式并试图覆盖所有默认样式正在我的样式表中造成严重破坏。

*（PS 注销管理脚本是类似的，但你必须确保它们在打印时不会合并。我将在稍后的另一个问答中发布。）*

所以经过一番挖掘，我找到了全局$wp_styles。

倾倒它后，我发现了大量的信息，并且在深处，每种风格的句柄。从那里，我可以取消注册必要的。下面是我用来查找句柄的调试代码，然后是取消注册样式的几个示例。

```
global $wp_styles;
echo var_dump($wp_styles); 
```

然后只打印手柄。取消注释以整齐地打印它们，或者像这里一样，它会将它们放在一个列表中，您可以将其复制并粘贴到取消注册功能中。

```
 global $wp_styles;

    foreach($wp_styles as $main_obj => $vals){
    if(is_array($vals)){
        // echo var_dump($vals);
        foreach($vals as $name => $obj){
            if(!empty($obj->handle)){
                // echo $obj->handle, '<br />';
                echo '"'.$obj->handle. '", ';
            }    
        }
    }
} 
```

我知道这里的插件可能有一些样式，但是这里是管理区域中排队的所有脚本，只需从数组/函数中删除适当的脚本，将其添加到挂钩中，所有样式都会消失（不建议，但从那里挑选）。

```
add_action( 'admin_init', 'remove_admin_styles' );
function remove_admin_styles(){
    wp_deregister_style(
    'wp-admin',
    'ie',
    'colors',
    'colors-fresh',
    'colors-classic',
    'media',
    'install',
    'thickbox',
    'farbtastic',
    'jcrop',
    'imgareaselect',
    'admin-bar',
    'wp-jquery-ui-dialog',
    'editor-buttons',
    'wp-pointer',
    'jquery-listfilterizer',
    'jquery-ui-smoothness',
    'tooltips',
    );
    } 
```

# windows - 如何模拟“插入的网络电缆”（TCP/IP）？

> ID：12795700
> 
> 赞同：2
> 
> 时间：2012-10-09T08:17:46.560
> 
> 标签：windows, testing, tcp

我想测试一些网络错误情况，但我没有网线。TCP 客户端和服务器应用程序都在同一系统上运行。

使用 TCPView 之类的工具来关闭连接，而不是拔掉网线，会不会是一个真实的模拟？

* * *

更新：

*   使用 TCPView 断开连接会导致 10054 错误，可以在应用程序代码中处理。10054 是 WSAECONNRESET - 连接已被对等方重置。这通常是连接另一端的问题。

我还从[这个答案](https://stackoverflow.com/a/8500760/80901)中了解到：“您可以拔下网络然后重新插入，否则您的 Wi-Fi 笔记本电脑可能会失去接收一秒钟然后再将其恢复。如果处理这种可恢复的案例，那将是令人沮丧的作为我们使用的所有程序的错误。” （请参阅：[服务器套接字如何知道使用 c++ 在 Windows 中拔出的网络电缆](https://stackoverflow.com/questions/8500664/how-server-socket-know-network-cable-in-unplugged-in-windows-using-c)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:10:50.943

如果您尝试与您的外部 IP 开始连接，然后关闭 WLAN，该怎么办？这对您来说可能是可以接受的。

如果您只想关闭客户端或服务器的连接，您可以限制与防火墙的连接。

或者为什么不一个接一个地关闭 SERVER 应用程序和 CLIENT 应用程序？关闭客户端应用程序，您将看到服务器应用程序在失去连接后发生了什么，反之亦然。如果关闭事件有什么东西，只需通过任务管理器结束任务。

* * *

*所有这些：*

> *如果您在同一系统上同时运行 TCP 客户端和服务器应用程序*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:22:34.273

在 windows wlan 卡上模拟“电缆断开”的最佳方法是通过右键单击接口的图标来禁用接口...

![在此处输入图像描述](../Images/a34c84487c68b83c21a2be9ca943ed60.png)

我对上面的“本地连接2”做了同样的事情......接口是有线还是无线都没有关系......机制是一样的

# c++ - 使用临时对象是否有性能优势？

> ID：12795701
> 
> 赞同：1
> 
> 时间：2012-10-09T08:17:49.473
> 
> 标签：c++, boost, c++11, boost-asio

我正在查看Boost 网站上的[HTTP Server 3示例。](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server_3)[连接](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/http/server3/connection.cpp)类中有以下代码：

```
boost::tribool result;
boost::tie(result, boost::tuples::ignore) = request_parser_.parse(request_, buffer_.data(), buffer_.data() + bytes_transferred); 
```

声明`parse`为

```
template <typename InputIterator>
boost::tuple<boost::tribool, InputIterator> parse(request& req, InputIterator begin, InputIterator end) 
```

我相信目标是将返回的值复制`tribool`到局部变量。`boost::tie`但是，如果可以写类似的东西，那么通过临时对象 () 来做这件事有什么意义

```
boost::tuple<boost::tribool, char*> result = request_parser_.parse(request_, buffer_.data(), buffer_.data() + bytes_transferred);
// Our tribool is available via result.get<0>(); 
```

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T08:48:49.177

好处不是性能，而是实用性和可读性：由于您对返回的第二个对象不感兴趣`parse`，因此无需保留它。最好完全忽略它，只得到你真正感兴趣的结果，即`tribool`. 以下使用 的代码`result`会更清晰。

事实上，当一个函数返回多个数据时，将其“拆分”以分别获取单个元素通常很有用（在可读性方面）。例如，考虑[`std::set<T>::insert`](http://en.cppreference.com/w/cpp/container/set/insert)，它返回元素的迭代器以及指示它是否是新插入的布尔值。您觉得以下哪个代码更清晰：

```
std::set<int> s;
std::pair<std::set<int>::iterator, bool> res = s.insert(42);

if (res.second)
{
    doSomething(res.first);
} 
```

对比

```
std::set<int> s;
std::set<int>::iterator itInsertedElement;
bool isNewlyInserted;

tie(itInsertedElement, isNewlyInserted) = s.insert(42);

if (isNewlyInserted)
{
    doSomething(itInsertedElement);
} 
```

在我看来，后者更容易阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T08:50:35.053

我认为这只是语义上的考虑。

1.  结果的第二个元素被明确忽略，更明显的是尾随`.get<0>()`
2.  `result`变量只绑定*有用*的部分，不需要其他变量。

此处的性能不应受到影响，因为编译器会将其视为：

```
 boost::tuple<boost::tribool, char*> __tmp = request_parser_.parse(/**/);

 boost::trilbool result;
 boost::tie(result, boost::tuples::ignore) = __tmp; 
```

然后优化器将负责消除杂物并尽可能减少它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T08:52:22.327

我认为他们使用`tie`主要是为了方便。如果您不需要`InputIterator`，只需要`tribool`值，为什么要创建命名变量？

这：

```
boost::tribool result;
boost::tie(result, boost::tuples::ignore) = request_parser_.parse(request_, buffer_.data(), buffer_.data() + bytes_transferred); 
```

变成这样：

```
boost::tuple<boost::tribool, char*> results = request_parser_.parse(request_, buffer_.data(), buffer_.data() + bytes_transferred);
boost::tribool result = boost::get<0>(results); // or you can use boost::get<0>(results) everywhere you use it. 
```

而你在堆栈上完全没用`results`。

从返回的临时值`boost:tie`可能会由编译器优化，因此不应该有任何内存开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:47:11.987

我怀疑是否存在任何可测量的性能差异（当然不是与 IO 成本相比），但简单地引用`result`而不是使用`get<0>()`将其从元组中取出更方便。

# jquery - 会话时间延迟后的fancybox显示

> ID：12795709
> 
> 赞同：0
> 
> 时间：2012-10-09T08:18:07.330
> 
> 标签：jquery, cookies, fancybox

我正在尝试显示一个fancybox 弹出窗口，它应该只在用户在网站上停留1 分30 秒后才会弹出，所以我需要记录会话时间（不是在每次页面加载时都显示）。
然后我需要在弹出窗口中添加一个复选框，以便人们选择不再显示弹出窗口，因此添加一个 cookie。

这是我到目前为止所拥有的：

```
<script type="text/javascript">
$(document).ready(function(){
  $("#target").hide().delay(9000).show();
  })
</script>

    <p>This is a demo. </p>

    <ul>
        <li><a id="fancybox" href="#target">popup</a></li>
    </ul>

    <div id="target" style="width:620px;display: none; height:500px;overflow-x: hidden; overflow-y:scroll ">
        <p>Popup test</p>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:33:47.023

可以在 JavaScript 中使用[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)函数（在指定的时间后执行一些代码）或[`setInterval()`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)函数（以指定的时间间隔重复执行一些代码）来创建简单的计时器

# excel - GemBox 电子表格：一个单元格中的多种字体颜色

> ID：12795713
> 
> 赞同：1
> 
> 时间：2012-10-09T08:18:15.737
> 
> 标签：excel, fonts, spreadsheet, gembox-spreadsheet

我正在使用 GemBox 电子表格导出数据，我需要将单元格中的文本格式化为具有多种颜色。

这在 Excel 中是可能的（在 StackOverflow 上找到）：

```
Dim fixedLength As Long
fixedLength = Len("Employee")
ActiveCell.FormulaR1C1 = "Employee Some Employee"
With ActiveCell.Characters(Start:=fixedLength + 2, Length:=Len(ActiveCell) - FixedLength - 1).Font
    .Color = vbRed
End With 
```

但是，我可以在 GemBox 类中找到的只是设置 Style.Font.Color 属性，这会影响整个单元格。
例子：

```
for (int i = 0; i < tempArray.GetUpperBound(0); i++)
{
    Color backColour = ColorTranslator.FromHtml(tempArray[i+1]);
    ws.Cells[row, col].Value += tempArray[i] + Environment.NewLine;
    ws.Cells[row, col].Style.Font.Color = backColour;
    i++;
} 
```

GemBox 可以吗？

GemBox 电子表格专业版 3.5 for .NET 4.0
v4.0.30319
v35.3.40.1000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T04:25:20.370

我知道这个问题很老，但几年前我通过电子邮件询问了开发人员。他们说这是不可用的。

如果您直接向他们发送电子邮件，他们通常会在一个工作日内回复。我认为他们在捷克共和国。

您可以[在此处向他们开具支持票](https://support.gemboxsoftware.com/new-ticket)。

在同一页面上还有一个反馈选项卡，您可以在其中建议他们将其添加为功能，其他开发人员可以对要添加的功能进行投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T08:30:44.147

当前版本的 GemBox.Spreadsheet（3.9 版）对此有 API 支持，请参阅[Excel 内联文本格式示例](https://www.gemboxsoftware.com/spreadsheet/examples/excel-cell-inline-formatting/203)。

简而言之，您需要的是使用[`GetCharacters`](https://www.gemboxsoftware.com/spreadsheet/help/html/Overload_GemBox_Spreadsheet_AbstractRange_GetCharacters.htm)方法，例如：

```
int row = 0;
int col = 0;
var tempArray = new string[] {
    "First Value",
    "Red",
    "Second Value",
    "Green",
    "Third Value",
    "Blue"
};

ws.Cells[row, col].Value = string.Concat(
    tempArray.Select((tempItem, i) => i % 2 == 0 ? tempItem : Environment.NewLine));

int charStartIndex = 0;
for (int i = 0; i < tempArray.Length; i+=2)
{
    string value = tempArray[i];
    SpreadsheetColor color = ColorTranslator.FromHtml(tempArray[i + 1]);

    ws.Cells[row, col].GetCharacters(charStartIndex, value.Length).Font.Color = color;
    charStartIndex += value.Length + Environment.NewLine.Length;
} 
```

这是结果：

[![具有多种颜色的 Excel 单元格值](../Images/b1f09c21e65d6749f6420a33a0a93644.png)](https://i.stack.imgur.com/dR78I.png)

# postgresql - 关于 FLEX 的 postgresql 安装警告

> ID：12795716
> 
> 赞同：4
> 
> 时间：2012-10-09T08:18:34.727
> 
> 标签：postgresql

配置要安装的 postgresql 9.1.6，我收到如下消息...

```
checking for flex... configure: WARNING:
*** The installed version of Flex, /usr/bin/flex, is too old to use with PostgreSQL.
*** Flex version 2.5.31 or later is required, but this is /usr/bin/flex version 2.5.4.
configure: WARNING:
*** The installed version of Flex, /usr/bin/lex, is too old to use with PostgreSQL.
*** Flex version 2.5.31 or later is required, but this is /usr/bin/lex version 2.5.4.
configure: WARNING:
*** The installed version of Flex, /usr/bin/flex, is too old to use with PostgreSQL.
*** Flex version 2.5.31 or later is required, but this is /usr/bin/flex version 2.5.4.
configure: WARNING:
*** The installed version of Flex, /usr/bin/lex, is too old to use with PostgreSQL.
*** Flex version 2.5.31 or later is required, but this is /usr/bin/lex version 2.5.4.
configure: WARNING:
*** The installed version of Flex, /usr/bin/flex, is too old to use with PostgreSQL.
*** Flex version 2.5.31 or later is required, but this is /usr/bin/flex version 2.5.4.
configure: WARNING:
*** The installed version of Flex, /usr/bin/lex, is too old to use with PostgreSQL.
*** Flex version 2.5.31 or later is required, but this is /usr/bin/lex version 2.5.4.
no
configure: WARNING:
*** Without Flex you will not be able to build PostgreSQL from Git nor
*** change any of the scanner definition files.  You can obtain Flex from
*** a GNU mirror site.  (If you are using the official distribution of
*** PostgreSQL then you do not need to worry about this because the Flex
*** output is pre-generated.) 
```

上面写着“如果你使用的是PostgreSQL官方发行版~~~”下载的文件是从postgresql官网下载的，可以忽略吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:14:50.060

出现此警告是因为您没有安装 flex，它部分用于生成 SQL 语言解析器。发布 tarball 已经生成了 SQL 语言解析器，因此如果您使用发布 tarball，则可以。如果您想从 git 构建，或者您想更改 SQL 的解析方式（或 SQL 语法），那么您需要获取 flex。

在大多数情况下，如果您不知道其他情况，则可以忽略此警告（我假设您是否尝试以您知道的其他方式修改 PostgreSQL 源代码）。如果您无法构建，请使用发布 tarball。

# ios - iOS6：更改了使用 tel://-url 拨打电话号码时的行为

> ID：12795719
> 
> 赞同：2
> 
> 时间：2012-10-09T08:18:43.007
> 
> 标签：ios, nsurl, openurl

在使用 tel:-URL-Scheme 拨打电话号码时，我看到了未记录的行为变化。

例子

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://232322"]]; 
```

在 iOS4 和 iOS5 中，通话结束后，用户被留在手机应用程序中。在 iOS 6 中，发出呼叫的应用程序现在重新启动。有趣的是，使用 facetime:// URL 进行 facetime-Call 不会重新启动应用程序。不是很一致:) 有谁知道如何控制这种行为，所以它的行为就像在 iOS4/iOS5 下一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:27:56.730

你不能，实现完全取决于响应 URL 方案的应用程序。在该`tel:`方案的情况下，它是拨号器。

由于 Apple 没有发布任何方案参数，`tel:`因此无法控制拨号器的行为。

# ruby-on-rails - 为什么 Thin 现在是我的默认 Rails 服务器？以前我什至不知道

> ID：12795720
> 
> 赞同：1
> 
> 时间：2012-10-09T08:18:48.767
> 
> 标签：ruby-on-rails, thin, webrick

不久之后，当使用 启动 Rails 服务器时`rails s`，Webrick 不再启动，但 Thin 启动了。奇怪的是，我以前什至没有听说过 Thin，所以我想知道它是从哪里来的？

我似乎`thin`在我的机器上安装了 gem，也许它是一个依赖项？在我的`Gemfile`中，没有 Thin 列出。

知道 Thin 是如何潜入我的应用程序的吗？我正在使用 Rails 3.2。谢谢你。

# ios - 在 UIView 中调用 -drawRect: 之后会发生什么？

> ID：12795726
> 
> 赞同：1
> 
> 时间：2012-10-09T08:19:14.010
> 
> 标签：ios, drawrect

`-drawRect:`在我的应用程序中的一个 UIView 中，在其内容显示在屏幕上之前似乎有一个延迟。

`-drawRect:`在完成绘制和显示更新的视图之间是否发生了一些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:37:08.517

该`drawRect:`方法由 UIView 的`drawLayer:inContext:`方法自动调用。一旦发生这种情况，其中执行的绘图操作`drawRect:`将呈现到图像上下文。然后，视图层将其内容设置为来自上下文的渲染图像。

你怎么知道延迟是*在* `drawRect:`完成之后？我建议对其进行分析以确保这是您滞后的根源。未优化的绘图肯定会导致延迟，但不要过早优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:43:36.990

在操作周期结束时收集并完成所有图纸更新。因此，如果您注意到延迟，那么在渲染绘图更改之前还有其他过程需要完成。此外，绘图是一个昂贵的过程。

# c# - 除了 .NET 框架之外，还需要什么来在服务器上运行本机 powershell 脚本吗？

> ID：12795727
> 
> 赞同：1
> 
> 时间：2012-10-09T08:19:18.173
> 
> 标签：c#, .net, powershell, windows-server-2008, windows-server-2003

我编写了一个 PS 脚本，我想在一组服务器（Windows 服务器 2008/2003）上运行 PS 脚本。但是，有人告诉我，除了 .Net 框架之外，服务器还需要一些特定于 PowerShell 的文件和配置才能运行脚本。

**请考虑以下事项**：

- 脚本中仅使用原生 api，没有模块或外部库引用：Get-Date、Get-ChildItem、Get-Service、Get-Content、[Environment]::ExpandEnvironmentVariables($XYZ) .. 等

-我是否需要在每台服务器上安装[Windows Management Framework才能运行 PowerShell？](http://support.microsoft.com/kb/968930)

- 如果从 C# 控制台应用程序调用 PS 脚本会怎样？除了 .Net 框架之外还需要什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:43:11.517

Powershell 在 Windows server 2008 R2 上默认启用，在 2008 上 PowerShell v1 是要启用的功能，而 v2 是下载。在 2003 年，v1 和 v2 都是单独下载的。

不管调用什么脚本，它仍将由 PowerShell 执行。

# rsyslog - 当我们使用 log4clu 作为客户端和使用 rsyslog 作为服务器时，我们是否可以实现不丢失消息和不崩溃的功能？

> ID：12795731
> 
> 赞同：1
> 
> 时间：2012-10-09T08:19:35.460
> 
> 标签：rsyslog, log4cplus

我们计划使用 log4cplus 作为具有 syslog appender 功能的客户端，并使用 rsyslog 作为服务器（都是本地系统）。我不清楚 log4cplus 功能的 syslog appender。我想知道堆栈溢出、崩溃是否可以避免，或者我仍然会面临 vanilla syslog 的所有固有问题，因为客户端 API（log4cplus）仍在使用 glibc 的 syslog 功能？

1.  我可以在客户端放置一些过滤器来丢弃非关键（信息、调试）消息，而不是将其发送到 rsyslog 并在那里丢弃吗？

2.  log4cplus 客户端采取了哪些所有措施以避免在死锁等情况下崩溃？

期待解决我上述所有疑问或任何可以消除我所有疑问的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:16:07.777

Log4cplus 只是普通的 C++ 库。在堆栈溢出或任何其他类型的致命情况下防止消息丢失并没有什么神奇的作用。

广告 1，要过滤掉不太重要的消息，您可以`Threshold`在配置文件中使用 appender 上的属性。

广告2，什么死锁和什么等等？

# javascript - styledSelect 和 jQuery 验证

> ID：12795734
> 
> 赞同：0
> 
> 时间：2012-10-09T08:19:45.663
> 
> 标签：javascript, jquery, validation, jquery-validate

我正在为我的下拉菜单使用 styledselect... [http://code.google.com/p/lnet/wiki/jQueryStyledSelectOverview](http://code.google.com/p/lnet/wiki/jQueryStyledSelectOverview)

我也在使用 jQuery 验证插件 [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

**如何让验证在“styledSelect”下拉列表中起作用？**

我的下拉列表 HTML 是

```
<select name="gender" class="required">
   <option value="" selected="selected">Select Gender</option>
   <option value="Male">Male</option>
   <option value="Female">Female</option>
</select> 
```

styledSelect 插件完成后生成的 HTML 是

```
<select name="gender" class="required" style="display: none;">
       <option value="" selected="selected">Select Gender</option>
       <option value="Male">Male</option>
       <option value="Female">Female</option>
    </select>    

<div class="styledSelect">
       <ul>
          <li rel class="option selected first">Select Gender</li>
          <li rel="Male" class="option">Male</li>
          <li rel="Female" class="option last">Female</li>
       </ul>
    </div> 
```

从列表中选择的元素 (li) 获得“选定”类。

我当前用于验证插件的 js 是最简单的设置。

```
$('.signupform').validate(); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:29:16.123

例如：

```
<script type="text/javascript">
/*validate form*/
$(document).ready(function() {
    var validator = $("#form1").validate({
        rules:{
            gender: {required: true}

        },
    errorClass: "invalid",
        errorElement: "div"
    });
}); 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:20:53.560

[我制作的这个](http://jsfiddle.net/5RrGa/456/)jsfiddle应该解释一下。您可以使用该`errorPlacement`选项将错误消息放置在您喜欢的任何位置。

# wsdl - 我应该怎么做来处理WebServiceException：

> ID：12795736
> 
> 赞同：1
> 
> 时间：2012-10-09T08:20:00.840
> 
> 标签：wsdl, websphere, axis, webservice-client, wsimport

我在 localhost 上部署了一个 Web 服务。我在部署服务器上使用 wsimport 命令生成了存根。然后，我使用以下代码在客户端中使用了生成的存根：

```
 TestService serviceObject=null;
    String url = "http://localhost:9080/ProjWebService/services/Test?wsdl";
    QName qname = new QName("http://testservice.test.sw.com", "TestService ");
    Service service = Service.create(url, qname);
    pullService = service.getPort(TestService .class);
    queryResultSet = serviceObject.webMethod("Hello"); 
```

但是，我收到以下错误：

```
[10/4/12 15:14:23:145 ] 00000033 SystemErr     R **javax.xml.ws.WebServiceException: An attempt was made to construct the ServiceDelegate object with an service name that is not valid: {http://testservice.test.sw.com}TestService**.
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at org.apache.axis2.jaxws.ExceptionFactory.createWebServiceException(ExceptionFactory.java:173)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:70)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:118)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at org.apache.axis2.jaxws.spi.ServiceDelegate.<init>(ServiceDelegate.java:218)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at org.apache.axis2.jaxws.spi.Provider.createServiceDelegate(Provider.java:71)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at javax.xml.ws.Service.<init>(Service.java:68)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at javax.xml.ws.Service.create(Service.java:692)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at org.test.poctestservice.ui.bean.testserviceBean.search(testserviceBean.java:425)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at java.lang.reflect.Method.invoke(Method.java:600)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at org.apache.el.parser.AstValue.invoke(AstValue.java:159)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at com.sun.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:68)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:94)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at javax.faces.component.UICommand.broadcast(UICommand.java:387)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:458)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:763)
[10/4/12 15:14:23:146 ] 00000033 SystemErr     R     at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.core.JsfLifecycleExecutor.apply(JsfLifecycleExecutor.java:18)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.core.ReceiveSendUpdates.renderCycle(ReceiveSendUpdates.java:132)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.core.ReceiveSendUpdates.service(ReceiveSendUpdates.java:74)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.core.RequestVerifier.service(RequestVerifier.java:31)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.common.standard.PathDispatcherServer.service(PathDispatcherServer.java:24)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.servlet.BasicAdaptingServlet.service(BasicAdaptingServlet.java:16)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.servlet.SessionDispatcher.service(SessionDispatcher.java:53)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.servlet.SessionVerifier.service(SessionVerifier.java:26)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.http.servlet.MainServlet.service(MainServlet.java:131)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.icesoft.faces.webapp.xmlhttp.BlockingServlet.service(BlockingServlet.java:56)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
[10/4/12 15:14:23:147 ] 00000033 SystemErr     R     at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:445)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:504)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:301)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
[10/4/12 15:14:23:148 ] 00000033 SystemErr     R     at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1563) 
```

我已经按照这些步骤从`WEB-INF/lib folder`. 但是，我仍然遇到同样的异常。相同的代码在 Eclipse 中集成的 IBM Websphere WAS 7 上运行良好。但是当我在另一个应用程序服务器上部署战争时，它会抛出上述异常。

我还咨询了这个线程：[由 wsdl 生成的 Web Service client not working with Deployed web sevrice](https://stackoverflow.com/questions/11102509/web-service-client-generated-by-wsdl-not-working-with-deployed-web-sevrice)。我使用 wsimport 实用程序 at`/opt/IBM/WebSphere/AppServer/profiles/AppSrv01/bin`和 at生成了存根`/opt/IBM/WebSphere/AppServer/java/bin`。但是，当在代码中调用时，两个存根都会产生相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T01:22:56.040

查看[http://www-01.ibm.com/support/docview.wss?uid=swg1PM31409](http://www-01.ibm.com/support/docview.wss?uid=swg1PM31409) 尝试添加 JVM 属性：jaxws.ignore.extraWSDLOps=true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T21:22:22.703

我有一个类似的问题，使用 spring JaxWsPortProxyFactoryBean

```
<bean id="test1WSClient" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
    <property name="serviceInterface" value="com.yourpackage.app.web.ws.Test1"/>
    <property name="wsdlDocumentUrl" value="http://localhost:9080/proj7/ws/Test1Service/Test1WebService.wsdl"/>
    <property name="namespaceUri" value="http://ws.web.app.yourpackage.com/"/>
    <property name="serviceName" value="Test1WebService"/>
    <property name="portName" value="Test1Port"/>
</bean> 
```

确保将“/”放在 namespaceUri 的末尾。希望这对某人有帮助！

# gcc - 为什么 cc 找不到 lgomp 而 gcc 可以

> ID：12795742
> 
> 赞同：0
> 
> 时间：2012-10-09T08:20:33.423
> 
> 标签：gcc, imagemagick, cc

在 Mac OS X 10.7 上

我在这个文件上运行这个命令[http://www.imagemagick.org/source/wand.c](http://www.imagemagick.org/source/wand.c)他们在这里说 [http://www.imagemagick.org/script/magick-wand.php](http://www.imagemagick.org/script/magick-wand.php)

```
cc -o wand `pkg-config --cflags --libs MagickWand` wand.c 
```

发生错误：

```
ld: library not found for -lgomp
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

但 gcc 工作正常：

```
gcc -o wand `pkg-config --cflags --libs MagickWand` wand.c 
```

那是为什么？我想知道 gcc 和 cc 在这方面有什么不同。

仅供参考：我按照[http://www.imagemagick.org/script/install-source.php](http://www.imagemagick.org/script/install-source.php)安装了 ImageMagick 。我没有遵循的唯一命令是`sudo ldconfig /usr/local/lib`因为我的 Mac 这里没有`ldconfig`。

# url - 从 HTML URL 打开特定文件夹（Windows 资源管理器）

> ID：12795746
> 
> 赞同：2
> 
> 时间：2012-10-09T08:20:47.783
> 
> 标签：url, asp-classic, directory, explorer

我正在为处理抵押贷款申请的网站构建内部站点 (ASP)。

对于每个应用程序，服务器上都有一个文件夹，其中包含链接到该应用程序的唯一附件。附件格式的广泛传播导致我的老板要求我简单地创建一个链接，以打开每个应用程序的所述附件文件夹。

使用 file://servername/foldername/ 有效，但在实际文件夹打开之前单击它需要 AGES 时间。有什么更有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T22:11:29.443

@Rico 已经击中了许多基地。如果您只需要阅读文件，目录浏览是一个很好的解决方案。

如果您还想允许文件编辑，WebDav 也是一种可能的解决方案，但我可能会推荐一些更简单的方法：

请参阅我对类似问题的回复[“启动可下载链接” 。](https://stackoverflow.com/a/14249649/1195927)尽管用户询问的是文件而不是完整的目录，但此解决方案也可以使用。

前提是一个可下载的 *.url 文件。如果用户使用禁止文件系统链接的浏览器，或者如果用户在更宽松的“本地 Intranet”区域之外的 VPN 上操作，这将防止出现问题。

所有这些都在链接的文章中讨论。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:09:59.883

如果您服务器上的这些文件夹位于您的 Web 应用程序的根目录中，您可以在这些文件夹上启用目录浏览。如果您导航到该文件夹​​，这将使 IIS 向您显示其中的所有文件。
[http://technet.microsoft.com/nl-nl/library/cc731109(v=ws.10).aspx](http://technet.microsoft.com/nl-nl/library/cc731109(v=ws.10).aspx)

如果它们在您的 Web 根目录之外，您仍然可以这样做 - 您可以将这些文件夹作为虚拟文件夹添加到 IIS。但在这种情况下，您必须授予匿名 Internet 用户对这些文件夹的读取权限。 [http://technet.microsoft.com/nl-nl/library/cc771004(v=ws.10).aspx](http://technet.microsoft.com/nl-nl/library/cc771004(v=ws.10).aspx)

如果您需要读取和写入这些文件夹，您可以查看可以安装在 IIS 上的 WebDAV 协议。这允许您将某些文件夹用作一种特殊的网络驱动器。它允许通过 http(s) 协议进行读写。 [http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-webdav-on-iis](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-webdav-on-iis)

HTH，埃里克

# variables - report builder 3.0 sum group variables out site groupe

> ID：12795752
> 
> 赞同：1
> 
> 时间：2012-10-09T08:21:18.627
> 
> 标签：variables, sum, reportbuilder

我已经创建了一个行组变量，并且我想对该变量的 groupe 进行求和，而不是针对多个值。

我想求和的表达式是： =Iif(First(Fields!Starttidspunkt.Value , "ArbDato")=Fields!Starttidspunkt.Value ,Variables!Normtid.Value , 0) （有多行的值在，并且我只想要第一个）

变量是这样的： =Iif(Iif(Weekday(Fields!Starttidspunkt.Value) = 1 , 7 , Weekday(Fields!Starttidspunkt.Value) - 1)> Iif(Fields!LigeUligeUge.Value = "Ulige" , Lookup( Fields!Medarbejder.Value , Fields!Fulde_navn.Value , Fields!ArbejdsdageUligeuge.Value , "Medarbejder") , 查找(Fields!Medarbejder.Value , Fields!Fulde_navn.Value , Fields!ArbejdsdageLigeuge.Value , "Medarbejder")) , 0 ,Parameters!NormTidUge.Value/Iif(Fields!LigeUligeUge.Value = "Ulige" , Lookup(Fields!Medarbejder.Value , Fields!Fulde_navn.Value , Fields!ArbejdsdageUligeuge.Value , "Medarbejder") , Lookup(Fields!Medarbejder.值，字段！Fulde_navn.Value，字段！ArbejdsdageLigeuge.Value，“Medarbejder”）））

任何人都可以帮忙吗？

# php - 创建大量目录，每个目录只有几个文件，还是创建更少目录，文件量大？

> ID：12795753
> 
> 赞同：1
> 
> 时间：2012-10-09T08:21:21.613
> 
> 标签：php, filesystems, centos, storage, directory

我必须存储和管理大量与设计主题相关的信息。它可以通过两种可能的方式在逻辑上组织起来：

1.  每个网站用户都有一个目录，与主题相关的文件存储在此目录中。（每个目录的文件不多）。

2.  每个主题的目录，其中包含所有相关用户的文件。（许多主题和许多用户）。

每次用户登录时，都必须获取相关文件。我的网站是用 PHP 开发并托管在 CentOS 上的。这个问题是一个重要的设计问题吗？任何一种选择都会对存储和性能产生影响吗？就个人而言，我觉得第一选择会更容易遵循。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:26:45.157

大目录一旦包含太多文件就会有很大的开销（并且“太多”的定义取决于操作系统和文件系统；所以通常你最好使用更多的目录（甚至嵌套子目录）和更少的文件在每个...我通常尝试使用 100 个文件/目录作为上限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:37:15.277

经典的答案总是：大目录会降低您的性能。

但是，我们有**2012**。80 年代或 90 年代的答案不一定是好的答案。

[这](http://leveldb.googlecode.com/svn/trunk/doc/impl.html)是一个很好的微基准测试，在 LevelDB 系统的上下文中完成。在那个使用 ext3 的基准测试中，打开一个包含 1000 个文件的目录中的文件需要 9 毫秒，10,000 个文件需要 10 毫秒，100,000 个文件需要 16 毫秒。但请记住，读取和打开额外目录也需要一些时间。

通常，当目录中的文件数量增加时，您应该期望对数增长。除非您使用极其脑残的文件系统，例如 FAT32 或配置混乱。但是，当使用大量目录或目录层次结构时，您也可以预期渐近相同的增长。

作为比较，这里是一般过程：

**在包含大量文件的目录中打开文件：**

*   遍历文件系统以查找目录 inode。即使这样也可能使用多个 IO，但缓存有帮助
*   读取目录inode
*   查找文件的目录条目。每个现代文件系统都以某种形式的树结构组织目录的目录条目，例如，即使 ext3 在 6 年左右的时间里默认使用 H-Tree。在较大的目录中，这需要对数步数，具有较大的分支因子。
*   读取文件 inode
*   读取文件数据

**在文件数量较少但有另一层目录的目录中打开文件：**

*   遍历文件系统以查找父目录 inode。即使这样也可能使用多个 IO，但缓存有帮助
*   读取父目录inode
*   查找子目录的目录条目。同样，对数，但可能比替代方案少 IO。
*   读取目录inode
*   查找文件本身的目录条目。同样，对数，但可能比替代方案少 IO。
*   读取文件 inode
*   读取文件数据

Asymptotically, it is not buying you anything for reading/writing data to split it up into a large number of directories.

[Edit:] W.r.t the proposal to build a directory hierarchy per letter of the word. This means you have a branching factor of at most 52, and probably a large skew in the file distribution. Some letters are more common and the directories contain much more files. The branching factor when using the implicit tree structure the file system, e.g. will be higher and the distribution will not be skewed. This significantly reduces the IOs. This is simply a bad idea when aiming for performance. If somebody really wants to do use a directory please, please consider hashing the data to directories to at least ensure a good data distribution.

# arrays - 为非标量结构的每个元素的相同字段赋值

> ID：12795761
> 
> 赞同：7
> 
> 时间：2012-10-09T08:21:46.547
> 
> 标签：arrays, matlab, struct, field, assign

`foo`在 Matlab 中，可以将单元格数组分配给 struct arrays 字段

```
my_array(1000).foo = [];
[my_array.foo] = some_cell{:}; 
```

现在我想做的是为数组中的所有字段分配一个值。但无论我尝试什么，Matlab 都会返回错误消息，而不是默默地假设如果我想分配一个 size 的元素`[1x1]`，它应该分配给*所有*字段。如果我可以简单地说例如：

```
my_array.foo = pi;
??? Incorrect number of right hand side elements in dot name assignment.
Missing [] around left hand side is a likely cause. 
```

那么，如何将单个值分配给整个结构数组中的字段？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T08:33:10.033

你可以使用[`deal`](http://www.mathworks.de/de/help/matlab/ref/deal.html)来解决这个问题：

```
my_array(1000).foo = [];
[my_array.foo] =deal(pi); 
```

但是，请注意，第二行中的方括号对于临时将逗号分隔的列表`my_array.foo`转换为向量是必需的。

# c# - WP7 中的 IsolatedStorageSettings 中的参数异常

> ID：12795762
> 
> 赞同：2
> 
> 时间：2012-10-09T08:21:47.767
> 
> 标签：c#, silverlight, windows-phone-7, exception-handling

在下面的代码中，我得到`ArgumentException`. 此代码检查 a`key`是否设置在`IsolatedStorageSetting`. 如果它不存在，则创建它。此时异常正在发生 message- `value does not fall within the expected range`。我在做什么错？

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

         var settings = IsolatedStorageSettings.ApplicationSettings;

        if (settings.Contains("bm"))
        {
            string k = (string) settings["bm"];
            if (k == "1")
            {
                cb1.IsChecked = true;
            }
            else
            {
                cb1.IsChecked = false;
            }
        }
        else
        {
            cb1.IsChecked=true;
            settings.Add("bm","1"); //exception occurs here
            settings.Save();
         }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:47:44.827

正如我们[在 MSDN 中看到的](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.add%28v=vs.95%29.aspx)

`ArgumentException`发生时

> 键已存在于字典中。

所以，我可以看到两个问题：

*   在并行线程中的某个地方，键“bm”被保存到设置中。
*   键不一样。“ь”和“b”是不同的字母，但看起来很相似。

尝试定义一个常量字符串：

```
private const string BM_KEY = "bm"; 
```

并在每次访问设置时使用它。

```
 if (settings.Contains(BM_KEY))
        {
            string k = (string) settings[BM_KEY];
            if (k == "1")
            {
                cb1.IsChecked = true;
            }
            else
            {
                cb1.IsChecked = false;
            }
        }
        else
        {
            cb1.IsChecked=true;
            settings.Add(BM_KEY,"1"); //exception occurs here
            settings.Save();
        } 
```

可以肯定的是，您每次都使用相同的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T13:19:46.580

或者尝试删除已经存在的密钥（例如“lastBranoCalled”）；）

```
if (IsolatedStorageSettings.ApplicationSettings.Remove("lastBranoCalled"))
                    IsolatedStorageSettings.ApplicationSettings.Add("lastBranoCalled", this.Panorama.SelectedIndex.ToString());
                else MessageBox.Show("Error");
            else IsolatedStorageSettings.ApplicationSettings.Add("lastBranoCalled", this.Panorama.SelectedIndex.ToString()); 
```

# android - ListView notifiDataSetChanged() 和 notifiDataSetInvalidated() 的主要区别

> ID：12795763
> 
> 赞同：0
> 
> 时间：2012-10-09T08:21:49.057
> 
> 标签：android, android-listview

我知道`ListAdapter.notifiDataSetChanged()`电话`DataSetObserver.onChanged()`和`ListAdapter.notifiDataSetInvalidated()`电话`DataSetObserver.onInvalidated()`。但我真的不知道它们如何影响 ListViews。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:40:48.417

DateSetInvalidated 使您的滚动位置和选择无效。你基本上说适配器旧状态不再有效。

# jquery - 使用ajaxform通过jquery提交表单后如何获取最近的表

> ID：12795765
> 
> 赞同：0
> 
> 时间：2012-10-09T08:21:54.990
> 
> 标签：jquery, ajax, forms

我有这个结构

```
<table> <tr><td><form>   .........<input type="submit"/> </form> </td></tr></table> 
```

我正在使用这样的 jquery 通过 AJAX 表单提交表单

```
var options = {
            target:        '.ajaxMessage',   // target element(s) to be updated with server response 
           // beforeSubmit:  showRequest,
            dataType: 'json',  // pre-submit callback 
            success:     function(data){ myResponse(data)},

            cache: false,
            delegation: true,
            type: 'POST'   }; 

            $(".r_form").ajaxForm(options); 
```

一切正常，但成功后我想将该行附加到提交表单的最近表中。

我不确定`this`成功后在 myresponse() 函数中使用时的含义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:30:34.963

一些应该让你走上正轨的伪代码：

```
$('input:submit').click(function(e){

    var $target = $(e.target);

    var $closestTable = $target.closest('table');

    $closestTable.append('<tr><td>blah</td></tr>'); //this line could be added to the success handler
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:30:52.037

“所有回调中的 this 引用是在设置中传递给 $.ajax 的上下文选项中的对象；如果未指定上下文，则这是对 Ajax 设置本身的引用。”

来自：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

似乎您可以通过触发ajax调用的对象`context`，然后使用它`.closest('table')`来获取您想要的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:33:53.580

假设您有以下标记：

```
<table>
    <tr>
        <td>
            <form class="r_form" method="post" action="...">
                <input type="submit"/>
            </form>
            <div class="ajaxMessage"></div>
        </td>
        <td>
            <form class="r_form" method="post" action="...">
                <input type="submit"/>
            </form>
            <div class="ajaxMessage"></div>
        </td>
        ...
    </tr>
</table> 
```

您可以在您的 document.ready 处理程序中执行此操作来 AJAXify 这些表单：

```
var options = {
    success: function(data, statusText, xhr, form) {
        var ajaxMessage = $(form).closest('td').find('.ajaxMessage');
        ajaxMessage.html(data);
    }
}; 
$('.r_form').ajaxForm(options); 
```

如[文档](http://www.malsup.com/jquery/form/#options-object)中所述，回调的第四个参数`success`将表示相应的表单 DOM 元素，它可用于查找包含`<td>`（或`<tr>`取决于 ajaxMessage 元素所在的位置）并从那里找到`.ajaxMessage`要更新的 div。

# javascript - 试图以毫秒为单位将 3 天添加到当前日期

> ID：12795767
> 
> 赞同：47
> 
> 时间：2012-10-09T08:22:02.800
> 
> 标签：javascript, date

```
var dateObj = new Date();
var val = dateObj.getTime();
//86400 * 1000 * 3  Each day is 86400 seconds
var  days = 259200000;

val = val + days;
dateObj.setMilliseconds(val);
val = dateObj.getMonth() + 1 + "/" + dateObj.getDate() + "/" + dateObj.getFullYear();
alert(val); 
```

我正在尝试获取当前日期，添加三天毫秒，并在当前日期后 3 天显示日期戳。例如 - 如果今天是 10/09/2012，那么我想说 10/12/2012。

这种方法行不通，我要数月数天了。有什么建议么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-09T08:24:44.410

要添加时间，请获取当前日期，然后以毫秒为单位添加特定的时间量，然后使用以下值创建一个新日期：

```
// get the current date & time (as milliseconds since Epoch)
const currentTimeAsMs = Date.now();

// Add 3 days to the current date & time
//   I'd suggest using the calculated static value instead of doing inline math
//   I did it this way to simply show where the number came from
const adjustedTimeAsMs = currentTimeAsMs + (1000 * 60 * 60 * 24 * 3);

// create a new Date object, using the adjusted time
const adjustedDateObj = new Date(adjustedTimeAsMs); 
```

进一步解释这一点；原因`dataObj.setMilliseconds()`不起作用是因为它将 dateobj 的毫秒属性设置为指定值（0 到 999 之间的值）。它不会将对象的日期设置为毫秒。

```
// assume this returns a date where milliseconds is 0
dateObj = new Date();

dateObj.setMilliseconds(5);
console.log(dateObj.getMilliseconds()); // 5

// due to the set value being over 999, the engine assumes 0
dateObj.setMilliseconds(5000);
console.log(dateObj.getMilliseconds()); // 0 
```

参考：
[`Date.now()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now)
[`new Date()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/Date)
[`Date.setMilliseconds()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setMilliseconds)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-09T08:25:28.450

尝试这个：

```
var dateObj = new Date(Date.now() + 86400000 * 3); 
```

JavaScript 中的日期精确到毫秒，`1000`1 秒也是如此。
一分钟有60秒，一小时有60分钟，一天有24小时。

因此，一天是：`1000 * 60 * 60 * 24`，即`86400000`毫秒。

`Date.now()`返回当前时间戳，精确到毫秒。
我们将该时间戳以及添加的 3 天毫秒数传递给`new Date()`，当使用数字调用时，它会`Date`根据提供的时间戳创建一个对象。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-09T08:24:17.917

如果您需要在 javascript 中进行日期计算，请使用[moment.js](http://momentjs.com/)：

```
moment().add(3, 'days').calendar(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-09T08:26:27.257

使用此代码

```
var dateObj = new Date(); 
var val = dateObj.getTime(); 
//86400 * 1000 * 3  Each day is 86400 seconds 
var  days = 259200000; 

val = val + days; 
dateObj = new Date(val); // ********important*********//
val = dateObj.getMonth() + 1 + "/" + dateObj.getDate() + "/" + dateObj.getFullYear(); 
alert(val); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-20T19:30:00.957

如果您想对更任意的`Date`对象（除了`.now()`）执行此操作，您可以使用以下内容：

```
const initialDate = new Date("March 20, 2021 19:00");

const millisecondsToAdd = 30 * 24 * 60 * 60 * 1000; //30 days in milliseconds

const expiryDate = new Date(initialDate.valueOf() + millisecondsToAdd); 
```

# iphone - 使用 NSPredicates 和 NSFetchrequests

> ID：12795772
> 
> 赞同：0
> 
> 时间：2012-10-09T08:22:45.237
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchrequest

我正在尝试获取相册第一张图片的网址。我正在从 json 网络服务获取我的数据。这个网络服务看起来像这样。

```
 "albums": [

        {
            "name": "Club Brugge - KRC Genk",
            "date": "08.10.2012",
            "pic_album_id"  : 1
            "pictures": [
                {
                    "url": "http://www.krcgenk.be/images/gallery/album_199/800X600/1a06dc0e405fd0219e3d327f1eec7fbf.jpg",
"picture_id" : 1
                },
                {
                    "url": "http://www.krcgenk.be/images/gallery/album_199/800X600/e8e10c0664eb0533a0534ed69891b165.jpg"
"picture_id" : 2
                },
                {
                    "url": "http://www.krcgenk.be/images/gallery/album_199/800X600/750b55a87b8eae33b8f3278add9bec44.jpg"
"picture_id" : 3
                },
                {
                    "url": "http://www.krcgenk.be/images/gallery/album_199/800X600/5867e1dedd00d08d830fd7f098a0b747.jpg"
"picture_id" : 4
                } 
```

我试图只获取第一个 URL。我正在尝试使用以下功能来实现这一点。

```
- (NSString *)getFirstPictureOfAlbumId: (int)AlbumId
{

    NSString *picture_Url = [[NSString alloc]init];
      NSLog(@"here1");
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
      NSLog(@"here2");
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(picture_id == 1) AND (pic_album_id == %@)",AlbumId];
      NSLog(@"here3");
    [request setEntity:[NSEntityDescription entityForName:@"Picture" inManagedObjectContext:self.genkDatabase.managedObjectContext]];
      NSLog(@"here4");
    [request setPredicate:predicate];
      NSLog(@"here5");
    NSError *error = nil;
    NSArray *results = [self.genkDatabase.managedObjectContext executeFetchRequest:request error:&error];
    if (error != nil)
    {
        //handle errors
    }
    NSLog(@"picture url is: %@",[results valueForKey:@"url"]);
    picture_Url = [results valueForKey@"url"];
    return picture_Url;
} 
```

我的日志只到达“here2”所以我认为我的谓词有问题。我遇到的另一个问题是存储第一张图片的网址。

有谁能够帮我？

提前致谢

**编辑**

这就是我在我的表格视图中所做的

```
 NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[self getFirstPictureOfAlbumId:indexPath.row+1]]];
    NSLog(@"indexpatch is: %d",indexPath.row+1);
    NSLog(@"first picture is: %@",[self getFirstPictureOfAlbumId:indexPath.row+1]); 
```

然后它像这样记录它。

```
012-10-09 13:17:58.140 RacingGenk[6069:c07] album id is: 1
2012-10-09 13:17:58.311 RacingGenk[6069:c07] indexpatch is: 1
2012-10-09 13:17:58.311 RacingGenk[6069:c07] album id is: 1
2012-10-09 13:17:58.313 RacingGenk[6069:c07] first picture is: http://www.krcgenk.be/images/gallery/album_199/800X600/1a06dc0e405fd0219e3d327f1eec7fbf.jpg
2012-10-09 13:17:58.314 RacingGenk[6069:c07] album id is: 2
2012-10-09 13:17:58.445 RacingGenk[6069:c07] indexpatch is: 2
2012-10-09 13:17:58.445 RacingGenk[6069:c07] album id is: 2
2012-10-09 13:17:58.446 RacingGenk[6069:c07] first picture is: http://www.krcgenk.be/images/gallery/album_199/800X600/1a06dc0e405fd0219e3d327f1eec7fbf.jpg
2012-10-09 13:17:58.447 RacingGenk[6069:c07] album id is: 3
2012-10-09 13:17:58.577 RacingGenk[6069:c07] indexpatch is: 3
2012-10-09 13:17:58.577 RacingGenk[6069:c07] album id is: 3
2012-10-09 13:17:58.578 RacingGenk[6069:c07] first picture is: http://www.krcgenk.be/images/gallery/album_199/800X600/1a06dc0e405fd0219e3d327f1eec7fbf.jpg 
```

**编辑2**

日志

```
RacingGenk[6605:c07] picture_id=1, album_id=1, url=http://www.krcgenk.be/images/gallery/album_199/800X600/1a06dc0e405fd0219e3d327f1eec7fbf.jpg
2012-10-09 13:57:40.361 RacingGenk[6605:c07] picture_id=1, album_id=2, url=http://www.krcgenk.be/images/gallery/album_199/800X600/1a06dc0e405fd0219e3d327f1eec7fbf.jpg
2012-10-09 13:57:40.525 RacingGenk[6605:c07] picture_id=1, album_id=3, url=http://www.krcgenk.be/images/gallery/album_199/800X600/1a06dc0e405fd0219e3d327f1eec7fbf.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:20:26.167

在你的谓词中

```
[NSPredicate predicateWithFormat:@"(picture_id == 1) AND (pic_album_id == %@)", AlbumId]; 
```

您使用 "%@" 作为格式说明符（用于*对象*），但使用*int*参数`AlbumId`。

如果“pic_album_id”属性存储`NSNumber`在您的核心数据模型中，那么谓词必须是

```
[NSPredicate predicateWithFormat:@"(picture_id == 1) AND (pic_album_id == %@)",
   [NSNumber numberWithInt:AlbumId]]; 
```

（*注意：*在 Objective C 中，让变量名以小写字母开头是很常见的，即`albumId`代替 `AlbumId`. 使用该约定可以使您的代码更容易被论坛中的其他人阅读。）

**编辑：**要获得相册中的第一张图片 given `albumId`，以下谓词应该有效：

```
[NSPredicate predicateWithFormat:@"(picture_id == 1) AND (album.pic_album_id == %@)",
   [NSNumber numberWithInt:albumId]]; 
```

此代码假定您具有从*Picture*实体到*Album*实体的反向关系*专辑（与**图片*的反向关系）。

 ***即使只有一个结果，它也存储在一个数组中：

```
NSArray *results = [self.genkDatabase.managedObjectContext executeFetchRequest:request error:&error];
if (results == nil) {
    // handle errors
} else if (results.count == 0) {
    // nothing found
} else {
    Picture *picture = [results objectAtIndex:0];
    NSLog(@"picture_id=%@, album_id=%@, url=%@", picture.picture_id, picture.album.pic_album_id, picture.url);
    pictureUrl = [picture url];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:27:28.677

我之前使用过 NSPredicate，也许你可以使用它

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id == 1"]; 
```

使用 NSPredicate 的 EXACT 变量名称作为从您的 Web 服务返回的内容。***

# java - java.net.ConnectException：通过代理连接时连接超时

> ID：12795774
> 
> 赞同：6
> 
> 时间：2012-10-09T08:22:58.737
> 
> 标签：java, url, proxy, download, urlconnection

我正在尝试从 URL 下载 zip 文件并使用 java 代码将其存储在本地系统中。我也在使用系统代理。它无法连接到网址。任何想法？

```
public static void main()
{
   try
   {
      long startTime = System.currentTimeMillis();

      System.out.println("Connecting to the url...\n");
      System.setProperty("http.proxyHost", " http://abc.com");
      System.setProperty("http.proxyPort","1111");

      URL url = new URL("http://sourceforge.net/projects/sevenzip/files/7-Zip/9.20/7z920.exe/download?use_mirror=nchc");
      url.openConnection();
      InputStream reader = url.openStream();
      FileOutputStream writer = new FileOutputStream("/home/user/result/apps.zip);
      byte[] buffer = new byte[153600];
      int totalBytesRead = 0;
      int bytesRead = 0;

      System.out.println("Reading ZIP file 150KB blocks at a time.\n");

      while ((bytesRead = reader.read(buffer)) > 0)
      {  
         writer.write(buffer, 0, bytesRead);
         buffer = new byte[153600];
         totalBytesRead += bytesRead;
      }

      long endTime = System.currentTimeMillis();

      System.out.println("Done downloading. " + (new Integer(totalBytesRead).toString()) + " bytes read (" + (new Long(endTime - startTime).toString()) + " millseconds).\n");
      writer.close();
      reader.close();
   }
   catch (MalformedURLException e)
   {
      e.printStackTrace();
   }
   catch (IOException e)
   {
      e.printStackTrace();
   }
   unZip(INPUT_ZIP_FILE);

} 
```

我收到以下错误：

```
java.net.ConnectException: Connection timed out
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:394)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:529)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:233)
    at sun.net.www.http.HttpClient.New(HttpClient.java:306)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:977)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:925)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:836)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1172)
    at java.net.URL.openStream(URL.java:1010)
    at test.main(test.java:33) 
```

当我尝试 ping 网址时，它显示未知主机，但我可以 ping 像 www.google.com 这样的网址

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T08:41:05.623

试试这个关于如何使用代理的[页面- 看起来很全面。](http://www.rgagnon.com/javadetails/java-0085.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T08:47:49.180

我认为你在一些防火墙后面，因为你的代码在我的本地机器上运行良好。我没有对您的代码进行任何更改。zip 文件下载到我的本地计算机中。控制台显示此消息：

> 正在连接到网址...
> 
> 一次读取 ZIP 文件 150KB 块。
> 
> 完成下载。读取 1110476 字节（13816 毫秒）。

# javascript - 围绕自己的 y 轴旋转 Collada 模型

> ID：12795775
> 
> 赞同：2
> 
> 时间：2012-10-09T08:23:01.337
> 
> 标签：javascript, three.js

我有一个简单的three.js 场景，其中包含一个3D Homer Simpson，在飞机上。我希望能够使用鼠标在他自己的 y 轴上旋转他。

下面的代码*几乎*就在那里。这是我从这里和那里以及我自己的部分拼凑而成的。问题是我无法让他绕着他的 y 轴旋转，那个轴会直接穿过他的核心，就在中间。

在包含的代码中，如果我使用框架作为参考，他会转圈。它的周长（在这个例子中只是偶然）大约是他所站立的飞机的大小。

如果我移除框架并使用*模型*旋转，那么他*几乎*在他的 y 轴上旋转——除了 I 轴就在他的身边。

我正在使用以下[模型](http://sketchup.google.com/3dwarehouse/details?mid=37114f8a36351d50e4a4d9ecf0f14439&prevstart=12)。事实上，我希望他旋转的方式是他在 3D Warehouse 示例中所做的方式。如果您单击*3D View*并旋转他，您将看到我想要实现的目标。

```
// nasty globals, but this is just a sandbox.
var camera;
var frame;
var loader = new THREE.ColladaLoader();
var model;
var plane;
var renderer;
var scene;

var mouseX = 0;
var mouseXOnMouseDown = 0;
var targetRotation = 0;
var targetRotationOnMouseDown = 0;
var windowHalfX = 800 / 2;

loader.load('Homer/models/body.dae', function(collada) {
    model = collada.scene;

    model.position.x = 0;
    model.position.y = 0;
    model.position.z = 100;

    model.rotation.x = - Math.PI / 2;       // stand Homer upright and facing the camera.

    init();
    animate();
});

function init()
{
    renderer = new THREE.WebGLRenderer();
    renderer.setSize(800, 800);

    document.body.appendChild(renderer.domElement);

    camera = new THREE.PerspectiveCamera(45, 1, 100, 10000);

    camera.position.x = 50;
    camera.position.y = 120;
    camera.position.z = 600;

    scene = new THREE.Scene();
    scene.add(model);

    // Do I need a frame of reference to get Homer to spin on his own Y-axis instead of the scene's?
    frame = new THREE.Object3D();
    frame.add(model);
    scene.add(frame);

    plane = new THREE.Mesh( new THREE.PlaneGeometry( 400, 400 ), new THREE.MeshBasicMaterial( { color: 0xe0e0e0 } ) );
    plane.geometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );
    scene.add( plane );

    var light = new THREE.SpotLight();
    light.position.set(200, 500, 4000);
    scene.add(light);

    renderer.render(scene, camera);

    // Spin Homer around when moving the mouse around
    document.addEventListener( 'mousedown', onDocumentMouseDown, false );
    document.addEventListener( 'touchstart', onDocumentTouchStart, false );
    document.addEventListener( 'touchmove', onDocumentTouchMove, false );
}

function onDocumentMouseDown( event ) {
    event.preventDefault();
    document.addEventListener( 'mousemove', onDocumentMouseMove, false );
    document.addEventListener( 'mouseup', onDocumentMouseUp, false );
    document.addEventListener( 'mouseout', onDocumentMouseOut, false );

    mouseXOnMouseDown = event.clientX - windowHalfX;
    targetRotationOnMouseDown = targetRotation;
}

function onDocumentMouseMove() {
    mouseX = event.clientX - windowHalfX;
    targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;
}

function onDocumentMouseUp() {
    document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
    document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
    document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
}

function onDocumentMouseOut() {
    document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
    document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
    document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
}

function onDocumentTouchStart( event ) {
    if ( event.touches.length === 1 ) {
        event.preventDefault();
        mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
        targetRotationOnMouseDown = targetRotation;
    }
}

function onDocumentTouchMove( event ) {
    if ( event.touches.length === 1 ) {
        event.preventDefault();
        mouseX = event.touches[ 0 ].pageX - windowHalfX;
        targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
    }
}

// Spin Homer around the Y-Axis
function animate() {
    requestAnimationFrame( animate );

    // When we add the frame, he spins in a circle, about the size of the plane (that's spin size if coincidence)
    frame.rotation.y += ( targetRotation - frame.rotation.y ) * 0.03;

    // If we remove the frame from the scene, and use this line instead, Homer spins around the y-axis.
    // But, the y-axis is along the outside of his leg and arm, not through his vertical center, which is what I want.
    // model.rotation.z += ( targetRotation - model.rotation.z ) * 0.03;
    renderer.render( scene, camera );
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T13:12:45.663

这很棘手。问题是荷马的几何让他站在他的局部坐标系中，右脚靠近原点。

在这种情况下你通常会做的就是打电话

```
geometry.applyMatrix( new THREE.Matrix4().makeTranslation( -distance, 0, 0 ) ); 
```

并沿局部 x 轴平移几何图形。这将使荷马居中，你就完成了。

如果你能弄清楚 Collada 数据结构，你就可以做到。

另一个解决方案是这个技巧：（1）使您的模型成为父对象的子对象，（2）使父对象成为另一个对象的子对象，（3）然后将父对象偏移一段距离：

在您的`init()`功能中，执行此操作

```
scene = new THREE.Scene();

renderer = new THREE.WebGLRenderer();
renderer.setSize(800, 800);
document.body.appendChild( renderer.domElement );

camera = new THREE.PerspectiveCamera( 45, 1, 100, 10000 );
camera.position.x = 50;
camera.position.y = 120;
camera.position.z = 600;
scene.add( camera ); // don't forget this

scene.add( new THREE.AxisHelper() ); // frame of reference

// //////////////////////////////////////////////////
// trick to accommodate geometry offset
object = new THREE.Object3D();
scene.add( object );

parent = new THREE.Object3D();
parent.position.x = -39;
object.add( parent );

parent.add( model );
// ////////////////////////////////////////////////// 
```

然后在你的`animate()`函数中：

```
object.rotation.y += ( targetRotation - object.rotation.y ) * 0.03; 
```

# box-api - 私人文件夹或多个帐户

> ID：12795776
> 
> 赞同：1
> 
> 时间：2012-10-09T08:23:04.683
> 
> 标签：box-api

我正在开发一项服务，用户可以使用 API 将文档上传到 Box。我希望每个用户都有自己的私人空间，并且不能看到或上传文件到其他空间。这怎么可能？通过 Enterprise 的多个帐户？我不希望用户激活/创建帐户，所以我的想法是只使用文件夹并为每个用户设置一个文件夹（和子文件夹）。什么是最好的解决方案？

我根本不会使用 Box 界面，只使用 API 和我自己的网站来查看/上传/下载文件。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:59:48.750

查看 v2 API 中的[令牌](http://developers.box.com/docs/#tokens)端点。它基于每个用户创建并提供对单个文件夹的访问，即使该用户还没有 Box 帐户。警告：您需要知道用户的电子邮件地址，而且我不知道这些私人文件夹的寿命有多长。

# javascript - 导入的 Jquery 不起作用

> ID：12795778
> 
> 赞同：0
> 
> 时间：2012-10-09T08:23:08.240
> 
> 标签：javascript, jquery, html

我最近在学习 javascript + jquery，尝试将 jquery 导入 html 时遇到问题。

我从互联网上得到了下面的代码，而我尝试从

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'></script> 
```

至

```
<script type='text/javascript' src='jquery.js'></script> 
```

它不起作用，脚本不执行。

我确定文件“jquery.js”与 html 文件是同一个文件夹，并且 jquery.js 是从[http://jquery.com/download/](http://jquery.com/download/)下载的（我确实将文件名更改为“jquery.js”而不是它原来的长名）

我可能会犯什么错误？

html代码：

```
<!DOCTYPE html>
<html>
<head>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'></script>
<script> 
$(document).ready(function(){
  $("button").click(function(){
    $("div").animate({left:'250px'});
  });
});
</script> 
</head>

<body>
<button>Start Animation</button>
<p>By default, all HTML elements have a static position, and cannot be moved. To manipulate the position, remember to first set the CSS position property of the element to relative, fixed, or absolute!</p>
<div style="background:#98bf21;height:100px;width:100px;position:absolute;">
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:13:23.310

这对我来说在 chrome 中效果很好：

```
<!DOCTYPE html>
<html>
<head>
<script src='jquery.js'></script>
<script> 
$(document).ready(function(){
  $("button").click(function(){
    $("div").animate({left:'250px'});
  });
});
</script> 
</head>

<body>
<button>Start Animation</button>
<p>By default, all HTML elements have a static position, and cannot be moved. To manipulate the position, remember to first set the CSS position property of the element to relative, fixed, or absolute!</p>
<div style="background:#98bf21;height:100px;width:100px;position:absolute;">
</div>

</body>
</html> 
```

使用此版本的 Jquery [http://code.jquery.com/jquery-1.8.2.min.js的本地副本](http://code.jquery.com/jquery-1.8.2.min.js)

# television - 通过 HDMI 关闭电视？

> ID：12795781
> 
> 赞同：1
> 
> 时间：2012-10-09T08:23:25.267
> 
> 标签：television, hdmi

我正在开发机顶盒，想知道 HDMI 标准是否包括通过连接的设备关闭电视屏幕的可能性？不仅停止 HDMI 输出，而且完全关闭屏幕。

我查看了 HDMI-CEC 命令列表，但不确定此功能是否符合“Deck Control”的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:44:13.097

它位于 HDMI CEC [https://github.com/Pulse-Eight/libcec/blob/master/src/libcec/implementations/CECCommandHandler.cpp#L763](https://github.com/Pulse-Eight/libcec/blob/master/src/libcec/implementations/CECCommandHandler.cpp#L763)

```
// CEC_USER_CONTROL_CODE_POWER and CEC_USER_CONTROL_CODE_POWER_TOGGLE_FUNCTION operate as a toggle
// assume CEC_USER_CONTROL_CODE_POWER_ON_FUNCTION does not 
```

> 免责声明：Github [libcec 存储库](https://github.com/Pulse-Eight/libcec)布局如有更改，请查找`CECCommandHandler.cpp`文件

# iphone - 您能说出 Phonegap iOS 应用程序中的调试过程吗？

> ID：12795783
> 
> 赞同：0
> 
> 时间：2012-10-09T08:23:27.763
> 
> 标签：iphone, ios, ipad, cordova

我正在开发 iOS 手机间隙应用程序。我想知道 iOS 手机间隙应用程序的任何好的调试过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:58:39.867

随着 iOS 6 的发布，Apple 为他们的 Mobile Safari 和 Mac Safari 6 一起发布了远程 Web Inspector，这是巨大的。基本上，您拥有常规 Safari 中 Web Inspector 的所有功能和强大功能，适用于您的移动应用程序，包括 Phonegap 应用程序。以下是它的工作原理，需要运行 iOS 6+ 模拟器（或 iOS 6+ 设备）的 xCode 4.5+ 和 Safari 6+。

脚步：

1.  在您的 ios6 模拟器或 ios6 设备中，打开 settings --> Safari --> Advanced --> Web Inspector --> (turn On) 。
2.  运行您的 phoneGap/Cordova 应用程序。
3.  在 Safari 6+（来自 Mac）中，从“开发”菜单访问 ios Simulator 或 ios 设备。您可以在 Safari 的高级首选项中启用开发菜单。
4.  现在您可以使用 Web Inspector 调试应用程序。

[有关更多信息，请在http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)中查找“远程调试” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:27:33.313

`http://www.iwebinspector.com/`将帮助您调试 Javascript。说Phonegap客户端代码。

phone gap 还[提供](http://debug.phonegap.com/)基于[weinre的客户端调试服务](https://github.com/apache/incubator-cordova-weinre)

对于服务器端，如果您使用 Xcode，您可以检查控制台本身。

# xslt - 在 xsl 中用 & 子串一个元素值

> ID：12795786
> 
> 赞同：0
> 
> 时间：2012-10-09T08:23:34.307
> 
> 标签：xslt, substring, saxon

我正在尝试使用 xslt 来排除字符串值。

```
<element><value>Value of element</value></element>

<element><xsl:value-of select="substring(element/value,1,40)"/></element> 
```

当值中没有 & 时，这很有效。在我的情况下，价值是

```
<element><value>Company ABC GmbH &amp; Co.</value></element> 
```

并且子字符串不起作用并且值超过 40。

我正在使用 xslt 2.0 和 Saxon。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:56:35.313

如果值以 XML 形式写入

```
<value>Company ABC GmbH &amp; Co.</value> 
```

那么您在 XPath/XSLT 中处理的字符串是

```
Company ABC GmbH & Co. 
```

这意味着，例如， substring(value, 18, 4) 将为您提供字符串“& Co”，该字符串将被序列化为`"&amp; Co"`

# c++ - C ++中的二进制封装？

> ID：12795789
> 
> 赞同：0
> 
> 时间：2012-10-09T08:24:02.023
> 
> 标签：c++, encapsulation

1）什么是c++中的二进制封装，c++是否支持二进制封装？

我进行了一些搜索，但我发现的只是封装，这大致就是将数据和方法包装在一个类中。

2）那么封装和二进制封装有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:34:26.573

[这段文字](http://ptgmedia.pearsoncmg.com/images/0201634465/samplechapter/chap01.pdf)的引用应该可以澄清事情：

> 尽管 C++ 确实通过其私有和受保护的关键字支持语法封装，但 C++ 草案标准没有二进制封装的概念。这是因为 C++ 的编译模型要求客户端的编译器能够访问有关对象布局的所有信息，以便实例化类的实例或进行非虚拟方法调用。这包括有关对象的私有和受保护数据成员的大小和顺序的信息。

澄清一下：语法封装是当您使用语言语法进行封装时。在 C++ 中，这将是私有/受保护的关键字。

[我通过这个线程](http://bytes.com/topic/c/answers/569204-syntactic-encapsulation)找到了文本，它也对这个概念进行了简短的解释。

**编辑：**

正如下面所指出的，C++ 中可以存在二进制封装。有关更多信息，请参阅此关于不透明指针的[wiki 页面。](http://en.wikipedia.org/wiki/Opaque_pointer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-04T07:47:37.503

1.  封装有两种类型：语法封装和二进制封装。
2.  C++ 不支持二进制封装。它只支持语法封装。
3.  COM 支持二进制封装。
4.  二进制封装的最佳示例是 COM 的 QueryInterface(void **) 方法。
5.  由于此方法采用一个输出参数作为 void **。所以它是双重重定向，因为指针是 void **。
6.  要了解有关此内容的更多详细信息，请阅读 Don Bix 的 Inside COM。

# git - 如何为 git-status 输出着色？

> ID：12795790
> 
> 赞同：104
> 
> 时间：2012-10-09T08:24:03.917
> 
> 标签：git, git-config, git-status

我想为 git-status 输出着色，以便：

```
untracked files = magenta
new files = green
modified files = blue
deleted files = red 
```

相反，我看到的是绿色的暂存文件和蓝色的未暂存文件： ![git状态截图](../Images/1ac8f9dd9bd4ac4cda2b598168aa5641.png)

我的 .gitconfig 根据一些搜索设置了以下内容：

```
[color]
status = auto

[color "status"]
added = green
changed = blue
untracked = magenta
deleted = red 
```

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-10-09T10:37:00.320

从[git config 文档](https://git-scm.com/docs/git-config#Documentation/git-config.txt-color)：

```
color.status.<slot> 
```

> 使用自定义颜色进行状态着色。`<slot>`是其中之一：
> 
> *   `header`（状态消息的标题文本），
> *   `added`或`updated`（已添加但未提交的文件），
> *   `changed`（已更改但未添加到索引中的文件），
> *   `untracked`（不被 git 跟踪的文件），
> *   `branch`（当前分支），
> *   `nobranch`（无分支警告显示的颜色，默认为红色），
> *   `localBranch`或`remoteBranch`（本地和远程分支名称，当分支和跟踪信息以状态短格式显示时），
> *   `unmerged`（具有未合并更改的文件）。
> 
> 这些变量的值可以在 中指定`color.branch.<slot>`。

所以这将起作用：

```
git config color.status.changed blue
git config color.status.untracked magenta 
```

然而：

```
new files = green
deleted files = red 
```

不可能：您需要选择一种颜色：

*   如果将它们**添加**到索引中，它们将使用`color.status.added`.
*   如果它们**没有被添加**到索引中，它们将使用 `color.status.changed`.

笔记：

颜色也可以用 0 到 255 之间的数字给出；这些使用 ANSI 256 色模式（但并非所有终端都支持此模式）。[如Joshua Goldberg](https://stackoverflow.com/users/411282/joshua-goldberg)[的评论](https://stackoverflow.com/questions/12795790/how-to-colorize-git-status-output/12798205#comment119918281_12798205)中所述，
请参阅“ [xterm 256 colors](https://robotmoon.com/256-colors/#table-of-color-codes) ”以获取这些数字。

* * *

当然，正如[elboletaire](https://stackoverflow.com/users/407456/elboletaire)[评论](https://stackoverflow.com/questions/12795790/how-to-colorize-git-status-output/12798205#comment30639337_12798205)的那样：

> 如果之前未启用，请记住启用着色输出：
> 
> ```
> git config --global color.ui true 
> ```

* * *

[肖恩·卢廷](https://stackoverflow.com/users/1108891/shaun-luttin)补充道：

该命令还可以在引号中使用多个参数。这包括此列表中的两种颜色（前景背景）：

> 正常、黑色、红色、绿色、黄色、蓝色、品红色、青色和白色；

它还包括此列表中的一个属性（样式）：

> 粗体、暗淡、ul、眨眼和反转。

所以这将起作用：

```
git config color.status.changed "blue normal bold"
git config color.status.header "white normal dim" 
```

* * *

注意：使用 git 2.9.1（2016 年 7 月），输出着色方案学习了**两个新属性，*斜体*和~~罢工~~**，除了现有的粗体、反转等。

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 9dc3515](https://github.com/git/git/commit/9dc3515cf005639317fb95492b3157aadf056923)、[提交 54590a0](https://github.com/git/git/commit/54590a0eda10ecfdc39398d662ab3f663491067e)、[提交 5621068](https://github.com/git/git/commit/5621068f3d3c537b79b76201928c0b06025479ee)、[提交 df8e472](https://github.com/git/git/commit/df8e472cc1bbd14a60d22b0b124f07046c6e1fa2)、[提交 ae989a6](https://github.com/git/git/commit/ae989a61dad98debe9899823ca987305f8e8020d)、[提交 adb3356](https://github.com/git/git/commit/adb3356664fbf15646fd90eb1d5ddd9e66ce913f)、[提交 0111681](https://github.com/git/git/commit/0111681ecfe4d04a354536e62af1cde7c49e1c40)（2016 年 6 月 23 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 3c5de5c](https://github.com/git/git/commit/3c5de5c77b0718b47010b146160ecff6309f86b5))^(中，2016 年 7 月 11 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

它还允许 " `no-`" 用于否定属性

> 使用 " `no-bold`" 而不是 " `nobold`" 更容易阅读和输入更自然（对我来说，无论如何，即使我是`nobold`首先介绍 " " 的人）。两者都允许很容易。

# c# - 使用 TagLib 读取 MP3 等级

> ID：12795793
> 
> 赞同：1
> 
> 时间：2012-10-09T08:24:22.117
> 
> 标签：c#, mp3, taglib, id3

我有一个音乐应用程序，它使用`TagLib`库读取 ID3 标签。它适用于艺术家、标题、专辑、年份......

但我看不懂收视率。我试过这个：

```
TagLib.File track = TagLib.File.Create(name);
TagLib.Tag tag123 = track.GetTag(TagLib.TagTypes.Id3v2);
var usr = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
TagLib.Id3v2.PopularimeterFrame frame = TagLib.Id3v2.PopularimeterFrame.Get(
                                         (TagLib.Id3v2.Tag)tag123, usr, true); 
```

但总是`frame.PlayCount`_`frame.Rating``0`

有谁知道为什么我的代码不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:32:37.807

usr = "Windows 媒体播放器 9 系列"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-30T18:26:23.640

我自己偶然发现了这个问题，标记的答案并没有为我解决。坦率地说，这甚至不是一个答案/解决方案——只是一个幸运的猜测，似乎已经为 OP 解决了。

根据 ID3v2(3) 规范，Popularimeter/POPM 字段的用途如下...

> 此帧的目的是指定音频文件的质量。在这个框架中可以找到许多有趣的应用程序，例如播放列表，它比其他人更频繁地提供更好的音频文件，或者它可以用来描述一个人的品味并通过比较人们的个人资料来找到其他“好”文件。框架非常简单。它包含给用户的电子邮件地址、一个评级字节和一个四字节的播放计数器，每次播放文件时都会增加一个。电子邮件是终止的字符串。评级为 1-255，其中 1 是最差的，255 是最好的。0 未知。如果不需要个人计数器，则可以省略。当计数器达到全 1 时，在计数器前面插入一个字节，从而使计数器在与播放计数器 (“PCNT”) 相同的距离内大 8 位。

[资源](http://id3.org/id3v2.3.0#Popularimeter)

注意最后一句话；可能有多个 POPM 字段 - 但每个电子邮件地址只有一个。据我了解，如果您不提供实际存在的电子邮件（用户）值，TagLib 将返回空评级。在这种情况下，似乎*usr = "Windows Media Player 9 Series"*的幸运猜测似乎成功了，因为 Windows Media Player 可能是 OP 评级的作者。

使用 MediaMonkey 的我的解决方案是找出该应用程序使用的电子邮件地址值 - 即“no@email”。一旦我提供了该值作为参数，我就可以检索我的所有评分。

# postgresql - PostgreSQL plsh 安装

> ID：12795796
> 
> 赞同：2
> 
> 时间：2012-10-09T08:24:29.550
> 
> 标签：postgresql

我在 Fedora 机器上运行了 Postgresql8.4，我必须使用这个功能：

```
CREATE FUNCTION callSQLScript(scriptPath text) 
RETURNS void AS $$
    #!/bin/sh
    plsql -f scriptPath
$$ LANGUAGE plsh; 
```

为此，我必须安装 plsh，但是在安装 plsh 时，在 psql -d DBNAME -f PREFIX/share/pgplsh/createlang_pgplsh.sql 之后执行 make 时出错

```
/bin/sh: line 0: .: pgplsh.la: file not found 
```

[从plsh 获取](http://plsh.projects.postgresql.org/)安装参考

请帮助我摆脱它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:51:52.517

看起来像这个问题：

[https://github.com/petere/plsh/issues/1](https://github.com/petere/plsh/issues/1)

所以你可能想要获取最新的 pl/sh。当然，最新版本可能无法使用像 8.4 一样旧的服务器构建。

# c# - Linq 中的空引用异常

> ID：12795803
> 
> 赞同：1
> 
> 时间：2012-10-09T08:24:48.630
> 
> 标签：c#, xml, linq, c#-4.0

我是.net 初学者。在问这里之前，我已经浏览了很多网站。我收到错误 - “对象引用未设置为对象的实例。” .这个错误通常发生在任何控件中有空值但在我的情况下每个控件都有一些文本，那么为什么会出现这个错误？这是我的[xml 文件](http://ideone.com/OnpgJ)

```
cmbProduct        --> combobox 
txtNewBrand       --> textBox
txtUpdateQuantity --> textBox
txtUpdatePrice    --> textBox 
```

我尝试了以下代码：

**按钮点击**

```
XElement doc = XElement.Load(@"..\..\stock.xml");
var newElement = new XElement("items",
                               new XElement("productname", cmbProduct.Text),
                               new XElement("brandname", txtNewBrand.Text),
                               new XElement("quantity", txtUpdateQuantity.Text),
                               new XElement("price", txtUpdatePrice.Text));
 /*ERROR*/      doc.Element("stock").Add(newElement);
                doc.Save(xpath);
                MessageBox.Show("updated successfully"); 
```

编辑 ：

*而不是使用*

```
XElement doc = XElement.Load(@"..\..\stock.xml"); 
```

我用了

```
var doc = XDocument.Load(@"..\..\stock.xml"); 
```

问题解决了。为什么这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:30:03.643

找不到eather doc.Element("stock") 并且为NULL 或doc 为NULL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:45:06.590

鉴于代码有限，要查看您添加和/或断言存在的内容并不容易。尝试在错误上方添加这两行，错误消息将指示故障。

```
Debug.Assert(doc != null, "Can not operate without a valid instance of 'doc'");
Debug.Assert(doc.Element("stock") != null, "Need the stock element to add to!"); 
```

您可能需要包括“使用 System.Diagnostics;” 在文件的顶部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:58:41.410

我猜你没有`doc`用现有的 XML 预加载，如果是这样，就不会有任何`stock`元素开始。

尝试添加这个

```
if (doc.Element("stock") == null)
{
    doc.Add(new XElement("stock"));
} 
```

前

```
doc.Element("stock").Add(newElement); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T09:22:13.217

您收到异常是因为：

```
doc.Element("stock").Add(newElement); 
```

`stock`是根节点，`doc.Element("stock")`返回null。你实际上想要做的是在你的 xml 中添加一个项目。尝试以下操作：

```
doc.Add(newElement); 
```

这将为您提供所需的结果。

# maps - Google Maps API -- 适用于 IE9、FF、Chrome，但不适用于 IE7 和 IE8

> ID：12795811
> 
> 赞同：1
> 
> 时间：2012-10-09T08:25:23.267
> 
> 标签：maps

我已经完成了尽职调查，检查了额外的逗号，试图查看我是否不正确地调用了脚本，但我似乎无法找到我的谷歌地图在 IE 7 和 IE 8 中失败的原因。

IE 控制台抛出的错误是..

> SCRIPT5007：无法获取属性“elementType”的值：对象为 null 或未定义 %7Bcommon、map、util、marker、infowindow%7D.js，第 2 行字符 1

当我更具体地查看错误时，它会调用一行谷歌的代码并说它不起作用。

有没有人遇到过这个问题？以及如何解决它的任何建议？

网址-discoverplanon.com

# c# - 单击 setup.exe 无法获取应用程序启动路径

> ID：12795813
> 
> 赞同：1
> 
> 时间：2012-10-09T08:25:31.600
> 
> 标签：c#, .net, winforms

我正在发布一个 Windows 项目，然后单击表单我正在安装另一个要安装的设置。

我没有在按钮上的 clickevent 上获得当前的应用程序启动路径。

在调试和发布时，它显示了正确的路径，但发布后它给出了

> C:\Users\username\AppData\Local\Apps\2.0 路径

我已经用过：

```
Application.StartupPath
Application.Executablepath
Path.Combine(Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location))
System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase))
Path.Combine(Directory.GetCurrentDirectory()) 
```

但没用它总是显示

> C:\Users\username\AppData\Local\Apps\2.0 路径

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:33:34.313

您正在获得该路径，因为它是 ClickOnce 使用的路径。ClickOnce 应用程序安装在安装它们的用户的配置文件下。

**编辑 ：**

**方法一：**

这是一种获取应用程序安装路径的方法（仅当您的应用程序已安装时才有效）（其中部分由[@codeConcussion](https://stackoverflow.com/a/8810355/162671)编写）：

```
// productName is name you assigned to your app in the 
// Project properties -> Publish -> Publish Settings
public static string GetInstalledFromDir(string productName)
{
    using (var key = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\Uninstall"))
    {
        if (key != null)
        {
            var appKey = key.GetSubKeyNames().FirstOrDefault(x => GetValue(key, x, "DisplayName") == productName);
            return appKey == null ? null : GetValue(key, appKey, "UrlUpdateInfo");
        }
    }

    return null;
}

private static string GetValue(RegistryKey key, string app, string value)
{
    using (var subKey = key.OpenSubKey(app))
    {
        if (subKey == null || !subKey.GetValueNames().Contains(value)) 
        { 
            return null; 
        }

        return subKey.GetValue(value).ToString();
    }
} 
```

以下是如何使用它：

```
Uri uri = new Uri(GetInstalledFromDir("ProductName"));
MessageBox.Show(Path.GetDirectoryName(HttpUtility.UrlDecode(uri.AbsolutePath))); 
```

**方法二：**

你也可以试试

```
System.Deployment.Application.ApplicationDeployment.CurrentDeployment.ActivationUri 
```

但我认为这个只有当你的应用程序是从互联网上安装时才有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:30:25.773

尝试这个：

```
Process.GetCurrentProcess().MainModule.FileName 
```

顺便说一句，它是 ClickOnce 部署吗？如果是这样，那么您得到的目录看起来是正确的。

# xml - WIX 本地 AppData 设置

> ID：12795814
> 
> 赞同：0
> 
> 时间：2012-10-09T08:25:34.660
> 
> 标签：xml, installation, wix, windows-installer, settings

我正在使用 Windows Installer XML 制作 .msi。安装程序结果很好。问题是我们公司的名称包含2个单词和一个空格。WIX 正在添加“_”而不是空格。所以旧设置保留在旧文件夹中。那么如何在 WIX 中定义设置文件夹名称？

```
<Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFiles64Folder">
          <Directory Id="DIRECTORY" Name="COMPANY NAME">
            <Directory Id="APP_APPLICATIONROOTDIRECTORY" Name="APP NAME" />
          </Directory>
            <!-- c:\program files\COMPANY NAME\APP NAME -->
        </Directory>
    </Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:25:19.213

有一个 wix 包含文件并在那里设置名称，如下所示：

```
<?define Manufacturer = "Whatever your company is"?> 
```

像这样使用它：

```
<Directory Id="DIRECTORY" Name="$(var.Manufacturer )"> 
```

# php - 多表单验证codeigniter冲突

> ID：12795818
> 
> 赞同：7
> 
> 时间：2012-10-09T08:25:39.217
> 
> 标签：php, codeigniter

> **可能重复：**
> [Codeigniter 2 表单在一页上，validation_errors 问题](https://stackoverflow.com/questions/5802729/codeigniter-2-forms-on-one-page-validation-errors-problem)

我的页面中有 2 个表单。我需要一次验证它们 1，但我认为存在冲突。这里看看：

![在此处输入图像描述](../Images/e22857fc09ea2779b02361a94b2cbfa9.png)

当我提交任一表单时，它们都显示相同的错误消息

我`validation_errors()`用来显示消息。如何一次验证表格 1？

这是代码

```
public function update_user_info(){ 
    $this->form_validation->set_rules("firstname","First Name","required");     
    $this->form_validation->set_rules("lastname","Last Name","required"); 
    $this->form_validation->set_rules("middlename","Middle Name","required"); 
    if($this->form_validation->run()===false){ 
        //wrong 
    } 
    else { //correct } 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T10:50:00.483

我刚遇到这个问题。我的解决方案是：

1.首先设置第一个提交按钮名称='update_info'

2.第二次设置第二次提交按钮名称='change_password'

3.最后更改您的 update_user_info()。

```
public function update_user_info(){ 
    if (isset ($_POST['update_info'])) {
        $this->form_validation->set_rules("firstname","First Name","required");     
        $this->form_validation->set_rules("lastname","Last Name","required"); 
        $this->form_validation->set_rules("middlename","Middle Name","required"); 
        if($this->form_validation->run()===false){ 
            //wrong 
        } 
        else { //correct }             
    }
    else if (isset ($_POST['change_password'])){
        form_validation of your change password
    } 
```

我认为这是解决您的问题的最简单方法。

祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T08:52:11.747

您可以为每个表单获取一个隐藏输入

```
First Form:
<input type="hidden" name="form" value="form1" />

Second Form:
<input type="hidden" name="form" value="form2" /> 
```

在您的控制器中，您可以为每个表单设置规则数组

```
$config['form1'] = array(
               array(
                     'field'   => 'username', 
                     'label'   => 'Username', 
                     'rules'   => 'required'
                  ),
               array(
                     'field'   => 'password', 
                     'label'   => 'Password', 
                     'rules'   => 'required'
                  ),
            );

$config['form2'] = array(
               array(
                     'field'   => 'email', 
                     'label'   => 'Email', 
                     'rules'   => 'required'
                  ),
            );

Now check which hidden field posted

$form = $this->input->post('form')

Now you can set rules as below

$this->form_validation->set_rules($config[$form]);

if ($this->form_validation->run()):

    // process form

else:
        $data[$form.'_errors'] = validation_errors();
endif; 
```

现在在您的视图文件中

```
if (isset($form1_errors)) echo $form1_errors;
if (isset($form2_errors)) echo $form2_errors; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T08:41:01.953

如果每个表单都有不同的验证错误，您可以检查`validation_errors`.

据我所见，`validation_errors`仅允许您更改错误的分隔符，仅此而已。但是，您可以尝试显示单个表单错误，如下所示：`<?php echo form_error('username'); ?>`

# javascript - Javascript toJSON自定义方法上的Stackoverflow错误

> ID：12795821
> 
> 赞同：7
> 
> 时间：2012-10-09T08:25:50.197
> 
> 标签：javascript, json, oop, design-patterns

**设想**

阅读[此答案](https://stackoverflow.com/a/12690175/1083946)后，我意识到我可以从 JSON 文字开始创建对象。

所以我猜想我可以使用这个有用的 JSON 方法做相反的事情： `JSON.stringify(myObject)`.

所以我做了如下：

```
function MyObject(id, value, desc)
{
  this.id = id;
  this.value = value;
  this.desc = desc;
  this.toJSON = function()
  {
    return JSON.stringify(this);
  }

} 
```

但是当我运行这个东西（[演示](http://jsfiddle.net/bkPmT/)）`Maximum call stack size exceeded`时，会发生错误。

谷歌搜索了一下后，我发现了两个解释这种行为的参考资料：

*   MDN上的[JSON.stringify()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON_behavior)方法。
*   JSON.org上的[JSON in Javascript文章](http://www.json.org/js.html)

如果我做对`.toJSON`了，覆盖`.stringify`. 因此，如果第一个调用第二个，则会生成一个循环。

**问题**

1.  （一般）为什么选择这种设计？`toJSON`是一种特殊关键字的保留？
2.  `.toJSON`（具体）我解决了将名称更改为`.display`. 没有那么优雅。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T08:55:40.500

认为这是因为`toJSON`是半保留的：`stringify`将检查对象并查看它是否有调用的方法`toJSON`，然后尝试调用它以将结果字符串化。

* * *

解决方法可以是：（不确定此代码的可靠性）

```
var obj = {
    value: 1,
    name: "John",
    toJSON: function() {
        var ret,
            fn = this.toJSON;

        delete this.toJSON;

        ret = JSON.stringify(this);

        this.toJSON = fn;

        return ret;
    }
} 
```

用法：

```
obj.toJSON(); // "{\"value\":1,\"name\":\"John\"}"
obj.lastName = "Smith";
obj.toJSON(); // "{\"value\":1,\"name\":\"John\",\"lastName\":\"Smith\"}" 
```

* * *

也许使用 clousure 更漂亮一点：（然后我想我可以说它是安全的）

```
var obj = {
    value: 1,
    name: "John",
    toJSON: (function() {
        function fn() {
            var ret;
            delete this.toJSON;

            ret = JSON.stringify(this);

            this.toJSON = fn;

            return ret;
        }
        return fn;
    })()
} 
```

* * *

因此，在阅读了@filmor 的评论后，我想到了另一种处理方式。不是那么漂亮，但它的工作原理。

使用[Function.caller](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/caller)我可以检测是否`fn`使用`JSON.stringify`

```
var obj = {
    value: 1,
    name: "John",
    toJSON: (function() {
        return function fn() {
            var ret;

            delete this.toJSON;

            ret = JSON.stringify(this);

            if ( fn.caller === JSON.stringify ) {
                ret = JSON.parse( ret );
            }

            this.toJSON = fn;

            return ret;
        }
    })()
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T01:53:48.430

**问题1，是否`toJSON`保留？**

我不确定它是否保留，但例如本机 Date 对象使用 toJSON 创建字符串化日期表示：

```
(new Date()).toJSON();           // -> "2012-10-20T01:58:21.427Z"
JSON.stringify({d: new Date()}); // -> {"d":"2012-10-20T01:58:21.427Z"}" 
```

**问题2，一个简单的解决方案：**

创建忽略 toJSON 方法的自定义 stringify 函数（您可以将其添加到已经存在的 global `JSON`）：

```
JSON.customStringify = function (obj) {

    var fn = obj.toJSON;
    obj.toJSON = undefined;
    var json = JSON.stringify(obj);
    obj.toJSON = fn;
    return json;
} 
```

现在它很容易在您的所有对象中使用：

```
function MyObject(id, value, desc)
{
  this.id = id;
  this.value = value;
  this.desc = desc;
  this.toJSON = function()
  {
    return JSON.customStringify(this);
  }
} 
```

为了使它更容易另外添加：

```
JSON.customStringifyMethod = function () {

    return JSON.customStringify(this);
} 
```

现在您的对象可能如下所示：

```
function MyObject(id, value, desc)
{
  this.id = id;
  this.value = value;
  this.desc = desc;
  this.toJSON = JSON.customStringifyMethod;
} 
```

# jquery - jQuery show() 面板不工作

> ID：12795823
> 
> 赞同：3
> 
> 时间：2012-10-09T08:25:51.647
> 
> 标签：jquery, html, css

我正在尝试创建一个页面，左侧是欧洲地图，右侧是我单击所需国家时出现的面板。

我目前的问题是面板，因为我在创建它时遇到了麻烦。

这是没有面板的页面代码：

```
<script type="text/javascript">
$(function(){
$('#navigation li a').append('')
$('#navigation li a').append('')
$('#navigation .hover').css("filter","alpha(opacity=00)");
$('#navigation li a').hover(function() {

// Stuff that happens when you hover on + the stop()
$('.hover', this).stop().animate({
    'opacity': 1
}, 700,'easeOutSine')

},function() {

// Stuff that happens when you unhover + the stop()
$('.hover', this).stop().animate({
    'opacity': 0
}, 700, 'easeOutQuad')

})
});

$(function($){
    $('#map').cssMap({'size' : 670});
});
</script>

<body>

<div id="wrap">
    <div id="page">
        <div id="map-content">          
            <div id="map">
            <ul class="europe">
                <li class="es"><a href="#espana" id=show>Espana</a></li>
                <li class="uk"><a href="#unitedkingdom">United Kingdom</a></li>
                <li class="fr"><a href="#france">France</a></li>
            </ul>
        </div>
    </div>

    <button id=hide>hide()</button>
    <button id=reset>Reset</button>

    <p>Hello, this show() and hide() example</p>

    <script type="text/javascript">

    $("ul.europe li a show").click(function () {
       $("p").show('fast');
    });

    $("#hide").click(function () {
       $("p").hide(1000);
    });

    $("#reset").click(function(){
        location.reload();
    });
    </script>

   </div>   
</div> 
```

在这部分代码中，第一个函数用于菜单，第二个函数为地图调用 JS。

我想使用 .show()，但我真的不知道如何管理它们。如果我点击西班牙没有任何反应。我认为问题出在'$（“ul.europe li a show”）'。或者也使用这样的东西：http: [//jsfiddle.net/rionmonster/J8U25/](http://jsfiddle.net/rionmonster/J8U25/)

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:26:21.603

你在上面做的事情看起来有点复杂。我写了一个基本的 JS fiddle，用于显示和隐藏基于 rels 从 a 标签找到具有特定 ID 的 div 的 div。

[http://jsfiddle.net/2Be9a/17/](http://jsfiddle.net/2Be9a/17/) - 更新了最新的小提琴

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T08:28:58.867

`show`是一个 id，所以只需简单地使用`$("#show")`，因为 id 应该始终对文档是唯一的。

* * *

**更新**

我已经在[这个 JSFiddle](http://jsfiddle.net/2TNTN/)中重新创建了您的代码，并发现了我认为的问题。jQuery中没有`.cssMap`，它只是`.css`.

所以换...

```
$('#map').cssMap({'size' : 670}); 
```

到...

```
$('#map').css({'size' : 670}); 
```

（你仍然需要`$("#show")`在适当的地方使用我在这个答案的第一部分中提到的）

如果您还没有，我强烈建议您使用[Firebug for Firefox](http://getfirebug.com)或 IE8+ 和 Chrome 中的开发人员工具，因为这样很容易发现。

# android - 安卓 | 通过 ListView 获取错误的位置

> ID：12795827
> 
> 赞同：1
> 
> 时间：2012-10-09T08:26:00.650
> 
> 标签：android

我在 onclick Listener 中遇到 getiing 标签问题

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        Log.v("Tag", "Testing inflating getView");
        TextView tv = null;

        if (items != null) {
            StoreVirtualItem vi = (StoreVirtualItem) items.get(position);
            Log.i("testing", vi.getName()+",position ="+ position);
            if (vi != null) {
                if (convertView == null) 
                {
                    convertView = (RelativeLayout) View.inflate(context, context.getResources().getIdentifier("virtualitemrow", "layout", context.getPackageName()), null);
                    holder = new ViewHolder();
                    holder.textView = (TextView) convertView.findViewById(R.id.virtualItemDescription);
                    holder.layout = (RelativeLayout) convertView.findViewById(R.id.LinearLayout01);
                    holder.virtualItemIconLayout = (RelativeLayout) convertView.findViewById(R.id.LinearLayout02);
                    holder.newImage = (ImageView) convertView.findViewById(R.id.newimage);
                    holder.iconImage=null;
                    ((ImageView)holder.virtualItemIconLayout.findViewById(R.id.iconImage)).setImageBitmap(null);
                    ((ImageView)holder.virtualItemIconLayout.findViewById(R.id.backGroundThumbImage)).setImageBitmap(null);
                    if(!vi.getStoreName().equalsIgnoreCase( FishGameConstants.BACKGROUNDS_STORE_NAME)){
                        holder.iconImage = (ImageView)holder.virtualItemIconLayout.findViewById(R.id.iconImage);
                    }else{
                        holder.iconImage = (ImageView)holder.virtualItemIconLayout.findViewById(R.id.backGroundThumbImage);
                    }
                    holder.saleImage = (ImageView) convertView.findViewById(R.id.saleimage);
                    int progressBarId = 2;
                    holder.iconSpinner = (ProgressBar) holder.virtualItemIconLayout.findViewById(progressBarId);
                    holder.buyBtn = (Button) convertView.findViewById(R.id.Button01);
                    holder.soldOutImage = (ImageView) convertView.findViewById(R.id.ImageView01);
                    holder.lockView = (ImageView) convertView.findViewById(R.id.ImageView03);
                    holder.levelRequiredText = (TextView) convertView.findViewById(R.id.LevelRequiredText);
                    holder.offerLetTime = (TextView) convertView.findViewById(R.id.TextView07);
                    holder.currencyImage = (ImageView) convertView.findViewById(R.id.ImageView02);
                    holder.vgName = (TextView) convertView.findViewById(R.id.TextView01);
                    holder.line = (TextView)  convertView.findViewById(R.id.line);
                    holder.coinsText = (TextView)  convertView.findViewById(R.id.text);
                    holder.saleBuyPriceText = (TextView) convertView.findViewById(R.id.TextView06);
                    holder.previewBtn = (Button) convertView.findViewById(R.id.PreviewBtn);
                    holder.sellText = (TextView) convertView.findViewById(R.id.TextView03);
                    holder.adultText = (TextView) convertView.findViewById(R.id.TextView04);
                    holder.breedableText = (TextView) convertView.findViewById(R.id.TextView05);
                    holder. infoBtutton = (ImageView) convertView.findViewById(R.id.infoButton);
                    holder. reStockText = (TextView) convertView.findViewById(R.id.restockText);
                    holder.reStockText1 =(TextView)  convertView.findViewById(R.id.LinearLayout01).findViewById(1234567890);
                    ViewFactory.getInstance().scaleView(convertView);
                    convertView.setTag(holder);
                    holder.buyBtn.setTag("buy,"+position);
                    Log.i("testing", "if buy position1 ="+ position);
                }else {

                    holder = (ViewHolder) convertView.getTag();
                    holder.buyBtn.setTag("buy,"+position);
                    Log.i("testing", "else buy position1 ="+ position);
                } 
```

上面提到的代码在 if 和 else 中都将位置设置为 BuyBtn 上的标记，但是在将其放在其单击侦听器上时，它会返回当前填充的列表视图的最后一行位置，即，我单击了列表视图的第 0 个位置，它返回了我的第 2 个位置。更令人担忧的是，滚动后它会好起来。

下面是我获得位置的 onclick 列表。

```
@Override
            public void onClick(View v) {
                Log.i("clicked", ""+v.getTag());
                TransparentDialog.getInstance(context).show();
            if(category.getStoreName().equalsIgnoreCase(TapFishConstant.FISHEGGS_STORE_NAME)){
                TapFishConfig.getInstance(null).setCategoryModel(category);
            }
            v.setClickable(false);
            if(virtualItemListview != null){                    
                virtualItemListview.setClickable(false);
                virtualItemListview.setEnabled(false);
            }
            int position = -1;
            if (VgItemHashMap.containsKey(v)) {
                position = (Integer) VgItemHashMap.get(v);
                TapFishConfig.getInstance(null).lastSelectedListViewItem=position;
                if (storeListener != null) {
                    String action = v.getTag().toString().split(",")[0];
                    int itemPosition = Integer.parseInt(v.getTag().toString().split(",")[1]);
                    StoreVirtualItem vi = (StoreVirtualItem) items.get(itemPosition); 
```

上面提到的两个代码都写在同一个适配器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:05:26.203

**getView() 方法的Position 参数给出了新创建的View（即列表项）的位置，它不会给出点击项的位置。**

`listView.onClickListener`在 Activity 中使用而不是 Adater。

# r - 在绘图中添加矩阵？

> ID：12795828
> 
> 赞同：7
> 
> 时间：2012-10-09T08:26:21.267
> 
> 标签：r, plot

无论如何要在绘图中添加表格。假设我有下面的情节：

```
curve(dnorm, -3, +4) 
```

现在我想在图下方添加一个矩阵：

```
testMat <- matrix(1:20, ncol = 5) 
```

我的目标？我正在编写一个绘图函数，它不仅创建了一个绘图，而且还显示了一个矩阵，其中包括我在绘图下方感兴趣的信息。

请参阅附图以了解我的意思。我真的很感谢你的帮助。

![在此处输入图像描述](../Images/448f01cee75494e25d6bf847fe3a5126.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T09:05:39.937

可能有更好的方法来做到这一点，但一种选择可能是使用“绘制”矩阵和数据框的包之一，如[“gplots”包](http://cran.r-project.org/web/packages/gplots/index.html)。

这是一个非常简单的示例（您可能可以自定义它以更好地控制最终布局）。

```
# Some sample data
testMat <- matrix(1:20, ncol = 5)
testMatDF <- as.data.frame(testMat)
names(testMatDF) <- c("Hey there", "Column 2", 
                      "Some * Symbols", "And ^ More", 
                      "Final Column")
rownames(testMatDF) <- paste("Group", 1:4)

# Load the package
library(gplots)
# Set par for plotting a three-row plot
par(mfrow = c(3, 1))
curve(dnorm, -3, +4)
textplot(testMat)
textplot(testMatDF) 
```

结果：

![在此处输入图像描述](../Images/16a96ff4638040ae11d588e6aa9193ef.png)

如果您想在绘图的位置上获得更多创意，您也可以使用`layout()`而不是。`par(mfrow...)`例如：

```
layout(matrix(c(1, 1, 2, 3, 3, 3), 
              2, 3, byrow = TRUE))
curve(dnorm, -3, +4)
textplot(testMat)
textplot(testMatDF) 
```

![在此处输入图像描述](../Images/3f7135b1d829e41a534b1abf79ec8416.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T09:55:06.407

包`plotrix`提供功能`addtable2plot`。

帮助文件中的示例：

```
library(plotrix)
testdf<-data.frame(Before=c(10,7,5),During=c(8,6,2),After=c(5,3,4))
rownames(testdf)<-c("Red","Green","Blue")
barp(testdf,main="Test addtable2plot",ylab="Value",
     names.arg=colnames(testdf),col=2:4)
# show most of the options
addtable2plot(2,8,testdf,bty="o",display.rownames=TRUE,hlines=TRUE,
              title="The table") 
```

**编辑：** 将表格放在一个新的情节中，将其放在情节下方。

```
library(plotrix)

layout(matrix(c(1,2), 2, 1, byrow = TRUE),
       widths=c(1,1), heights=c(2,1))

testdf<-data.frame(Before=c(10,7,5),During=c(8,6,2),After=c(5,3,4))
rownames(testdf)<-c("Red","Green","Blue")
barp(testdf,main="Test addtable2plot",ylab="Value",
     names.arg=colnames(testdf),col=2:4)

plot.new()
addtable2plot(0,0,testdf,bty="o",display.rownames=TRUE,hlines=TRUE,
              title="The table") 
```

# jquery - 在提交 Ajax 表单以显示更新后的表后更新表数据的最佳方法是什么

> ID：12795830
> 
> 赞同：0
> 
> 时间：2012-10-09T08:26:30.460
> 
> 标签：jquery, ajax

我有带有行的表格，当我单击添加按钮时，灯箱会显示添加行的表单。

现在我想将新添加的行显示到表中，我有两个选项

1.  刷新整个表格，以便所有像“编辑/删除”这样的小按钮也被添加到行中

2.  只添加新行。这很好，但是我必须在模板中添加编辑/删除逻辑并将事件附加到它。

我应该走哪条路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:35:33.903

您应该使用`.delegate`或`.on`不将事件附加到表中的所有小按钮。然后您不需要在每次添加行时附加事件。就像是

```
$("#table_id").on("click","button.edit",function(){
    //edit the row
}).on("click","button.delete",function(){
    //delete the row
}); 
```

看看[jquery .on()](http://api.jquery.com/on/)

# javascript - 尽管复制了示例代码，但没有定义 PageMethods

> ID：12795831
> 
> 赞同：-1
> 
> 时间：2012-10-09T08:26:33.580
> 
> 标签：javascript, asp.net

在另一个论坛上，有人抱怨 PageMethods 没有定义。有人提供了一个答案说......'看，这就是你让他们工作的方式'。所以我复制了他们的代码并尝试了它。我仍然看到 PageMethods 未定义。

页面如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="PageMethods.aspx.cs" Inherits="PageMethods" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Untitled Page</title>
</head>
<body onload="GetFromServer();">
<form id="form1" runat="server">
<asp:ScriptManager runat="server" ID="ScriptManager1" EnablePageMethods="true"></asp:ScriptManager>
<div>

</div>
</form>
<script type="text/javascript">
function GetFromServer()
{
PageMethods.GetHello(OnGetHelloComplete);
}
function OnGetHelloComplete(result, userContext, methodName)
{
alert("Result: " + result + "\n" +
"Context: " + userContext + "\n" +
"Method name: " + methodName);
}
</script>
</body>
</html> 
```

这就是背后的代码。

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Web.Services;
using System.Web.Script.Services;
public partial class PageMethods : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}

[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public static string GetHello()
{
    return "Hello From Server!";
}
} 
```

当您运行页面时，会发生 javascript 错误 - 未定义“PageMethods”。

这是一个 .net 2.0 网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:20:11.817

我认为这个需要.NET 3.5。我刚刚在快速演示中使用了您的确切代码，并且能够`GetHello`毫无问题地调用该方法。

# url - 更改有关环境的静态 URL

> ID：12795837
> 
> 赞同：0
> 
> 时间：2012-10-09T08:27:03.893
> 
> 标签：url, static, playframework-2.0

使用 Play Framework 2.0.4，我想根据环境以不同的方式定义我的静态内容 URL。

在 DEV 模式下，它会是 /public/{here}，所以使用默认配置

```
GET     /public/*file               controllers.Assets.at(path="/public", file) 
```

很好，但在 PROD 中，我想使用[http://static.mydomain.com/](http://static.mydomain.com/)基本 URL。

起初，我想像这样更改资产：

```
 GET     /public/*file               controllers.Assets.at(path="http://static.mydomain.com/", file) 
```

但是，当然，它不起作用。

因此，我正在考虑使用静态方法，该方法将在`application.conf`文件中查找`application.staticBaseUrl`参数，并返回`/public/{here}`or`http://static.mydomain.com/{here}`或 application.conf 参数中定义的任何内容。

但我不确定这是否是最好的方法，也不确定是否还没有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:36:58.440

您可以在`Application`控制器中添加静态包装器：

```
public static String wrapLink(play.mvc.Call uri) {
    return wrapLink(uri.toString());
}

public static String wrapLink(String uri) {
    return (Play.application().isDev()) ? "/public" + uri : "http://domain.tld" + uri;
} 
```

所以你可以在你的视图中使用它：

```
link from String:
    @Application.wrapLink("/bootstrap/css/bootstrap.min.css")

or from Call
    @Application.wrapLink(routes.Application.index) 
```

### 扩展版

在使用多个 CDN 时，我也在使用它的扩展版本（或使用虚拟子域 CDN 来更快地下载资源）：

`Application.conf`

```
cdn.cdn1="http://cdn1.domain.tld"
cdn.cdn2="http://cdn2.domain.tld" 
```

控制器：

```
public static String wrapLink(String cdnId, String uri) {
    return (Play.application().isDev()) 
        ? "/public" + uri 
        : Play.application().configuration().getString("cdn."+cdnId)+ uri;
} 
```

看法：

```
@Application.wrapLink("cdn1", "/bootstrap/css/bootstrap.min.css")
@Application.wrapLink("cdn2", "/images/abc.jpg") 
```

# javascript - 函数在 jQuery 中运行多次

> ID：12795838
> 
> 赞同：1
> 
> 时间：2012-10-09T08:27:04.283
> 
> 标签：javascript, jquery, ajax

我创建了一个函数，它向 PHP 文件发出 ajax 请求，然后将产品添加到购物篮中。此功能在第一次单击时正常工作，但在每次后续单击时，它会再次运行该功能。因此，例如，在第 2 次单击它会运行该功能两次，在第 3 次单击它会运行它 3 次，依此类推......刷新页面时会重置问题......

这是点击代码：

```
 $("#add_123456").click(function () {  
      $("#add_123456").addClass('added');          
      var quantity = $("#qty_123456").val();
      $('#basket_1').submit(function (event) {
        event.preventDefault();
        basket_add("feqf73nbdw7","123456","XYZ123","1","0.1","19.23");            
      });      
    }); 
```

这是功能：

```
 function basket_add(cartID, productID, code, quantity, weight, price) {  
      var item_add = {"Cart_ID": cartID, 
                      "Product_ID" : productID,
                      "Code" : code,
                      "Qty" : quantity,
                      "Weight" : weight,
                      "Price" : price
                      };            
      $("#basketpop").animate({top: "40px"}, 200);    
      $.ajax({
        url:  '/templates/new/includes/ajax/add_to_basket.php',
        type: 'POST',
        data: item_add,
        dataType: "html",
        success: function(html){
          $('.basket_content').empty().append(html);
          $('.basket_content').css("height", "auto");
          var item_add = null;
        }
      });
      return false;          
    }; 
```

不要认为问题出在被调用的 PHP 文件上。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:31:58.993

假设`#add_123456`按钮是一个`submit`按钮，问题是因为您`submit()`在每次单击按钮时向表单添加一个新的处理程序。相反，您只需要添加一次提交处理程序并在单击按钮时在表单上引发事件。尝试这个：

```
$('#basket_1').submit(function (event) {
    event.preventDefault();
    basket_add("feqf73nbdw7","123456","XYZ123","1","0.1","19.23");            
});  

$("#add_123456").click(function () {  
    $("#add_123456").addClass('added');          
    var quantity = $("#qty_123456").val();
    $('#basket_1').submit();
}); 
```

但是，如果您只是通过 AJAX 提交，则可以完全消除提交表单的需要，如下所示：

```
$("#add_123456").click(function () {  
    $("#add_123456").addClass('added');          
    var quantity = $("#qty_123456").val();
    basket_add("feqf73nbdw7","123456","XYZ123","1","0.1","19.23");            
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:33:29.817

因为每次点击都会运行`#add_123456`代码，里面会添加一个回调函数，你可能要先绑定回调，然后触发when 。`$('#basket_1').submit(function (event) {...})``$('#basket_1').submit``submit``click`

就像是：

```
 $('#basket_1').submit(function (event) {
      event.preventDefault();
      basket_add("feqf73nbdw7","123456","XYZ123","1","0.1","19.23");            
   });  

   $("#add_123456").click(function () {  
      $("#add_123456").addClass('added');          
      var quantity = $("#qty_123456").val(); 
      $('#basket_1').trigger('submit');   
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:33:16.730

该问题可能由提交侦听器创建。每次点击都会添加一个新的。也许你应该让你的提交列表器分开做类似的事情：

```
 $("#add_123456").click(function () {  
  $("#add_123456").addClass('added');          
  var quantity = $("#qty_123456").val();

});

 $('#basket_1').submit(function (event) {
    event.preventDefault();
    basket_add("feqf73nbdw7","123456","XYZ123","1","0.1","19.23");            
  }); 
```

另一种解决方案是在绑定之前取消绑定监听器：

```
$("#add_123456").click(function () {  
  $("#add_123456").addClass('added');          
  var quantity = $("#qty_123456").val();
  $('#basket_1').unbind( 'submit' ).bind( 'submit', function (event) {
    event.preventDefault();
    basket_add("feqf73nbdw7","123456","XYZ123","1","0.1","19.23");            
  });      
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:36:54.013

每次单击按钮时，您都会附加另一个事件处理程序。在 onclick 处理程序之外附加 onsubmit 处理程序，或使用

```
 $('#basket_1').off('submit').on('submit',(function (event) {
    event.preventDefault();
    basket_add("feqf73nbdw7","123456","XYZ123","1","0.1","19.23");            
  }); 
```

# perl - 从文件中删除双引号

> ID：12795840
> 
> 赞同：0
> 
> 时间：2012-10-09T08:27:07.417
> 
> 标签：perl

我有一个制表符分隔的文件，看起来像这样。

```
"""chr1"    "38045559"  "38046059"  "C1orf122"""
""""    ""  ""  "C1orf122"""
""""    ""  ""  "YRDC"""
"""chr1"    "205291045" "205291545" "YOD1"""
"""chr1"    "1499717"   "1500625"   "SSU72""" 
```

从此命令将 .csv 转换为制表符分隔文件后，我得到了此文件

```
perl -lpe 's/"/""/g; s/^|$/"/g; s/","/\t/g' <test.csv>test_tab 
```

现在，我希望我的文件保持制表符分隔，但应从文件中删除所有额外的引号。但同时当我打印第 4 列时，我应该得到所有名称和第 1,2 列和第 3 列的坐标（我仍然得到它，但带有引号）。

我应该在上面的命令中做什么操作，请指导。

所需的输出是（因为我被要求清楚）

```
chr1    38045559    38046059    C1orf122
                                C1orf122
                                YRDC
chr1    205291045   205291545   YOD1
chr1    1499717     1500625     SSU72 
```

这样当我提取第 4 列时，我应该得到

```
 C1orf122
    C1orf122
    YRDC 
    YOD1
    SSU72 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:59:59.537

您的命令似乎正在插入大多数引号以引入文件。而是正常打开文件：

```
use strict;
use warnings;

open CSV, 'test.csv' or die "can't open input file.";
open TAB, '>test.tab' or die "can't open output file.";

my @row_array;

while (<CSV>)
{
    #Remove any quotes that exist on the line (it is in default variable $_).
    s/"//g;

    #Split the current row into an array.
    my @fields = split /,/; 

    #write the output, tab-delimited file.
    print TAB join ("\t", @fields) . "\n";

    #Put the row into a multidimensional array.
    push @row_array, \@fields;
}

print "Column 4:\n";
print $_->[3] . "\n" foreach (@row_array);

print "\nColumns 1-3:\n";
print "@{$_}[0..2]\n" foreach (@row_array); 
```

任何仍然存在的引号都将`s/"//g;`在上面的代码中删除。这将删除*所有*引号；它不检查它们是否在字段的开头和结尾。如果您可能在需要保留的数据中有一些引号，则需要更复杂的匹配模式。

**更新：**我添加了代码来创建一个制表符分隔的输出文件，因为你似乎想要那个。我不完全了解您对获取“所有名称......和坐标”的要求是什么。但是，您应该可以使用上面的代码。只需在“做事”的地方添加你需要的东西。例如，您可以使用`$fields[0]`.

**更新 2：**添加代码以提取第 4 列，然后是第 1-3 列。使用多维数组的语法很棘手。有关详细信息，请参阅[perldsc](http://perldoc.perl.org/perldsc.html#ARRAYS-OF-ARRAYS)和[perlref](http://perldoc.perl.org/perlref.html)。

**更新 3：**添加了代码以删除文件中仍然存在的引号。

# java - 在什么情况下 c 的 write() 函数写入的数据可能少于请求的数据？

> ID：12795842
> 
> 赞同：1
> 
> 时间：2012-10-09T08:27:21.350
> 
> 标签：java, c, linux

我正在以大约 10b 到 16 000b 的块写入文件，突然每个块在大约 4050 字节处被截断（特别是 4050、4051 和 4074 字节，按此顺序）。这意味着后续的写入将覆盖本应写入的数据，从而弄乱我的数据。任何低于 4050b 的块都可以正常写出。

不幸的是，我无法重现它。我所拥有的只是混乱的文件，所以我正在调试寻找会导致这种情况的东西。

调试它，我意识到 c 的 write() 函数在后台被调用（这是 Java 代码 FileChannel.write()，但标准库调用 c 的 write 并且只检查写入的字节 > 0），并且它的文档不保证它会写出所有要求的数据，只会告诉你写了多少。

我不检查在 Java 领域写回的字节（但我确实明白了，函数签名几乎完全相同），所以修复非常简单。但是，由于我无法重现这一点，我不知道我已经解决了实际问题。因此，因此我希望某些 c 大师可以告诉我，我正在吸烟，或者在某些合法情况下 write() 一次无法写入超过 4050 个字节。

这是在 64 位 Linux 内核版本 3.0.0-26 上运行的。

编辑：根据以下评论进行扩展：

我正在写入一个普通的文件系统文件。我不确定在这种情况下非阻塞意味着什么，我没有使用回调或任何东西，但是对于每个块都没有明确告诉操作系统刷新到磁盘。该文件使用 Java 的 RandomAccessFile 'rw' 模式打开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T08:34:29.147

来自`man 2 write`：

```
 The number of bytes written may be less than  count  if,  for  example,
   there  is  insufficient space on the underlying physical medium, or the
   RLIMIT_FSIZE resource limit is encountered (see setrlimit(2)),  or  the
   call was interrupted by a signal handler after having written less than
   count bytes.  (See also pipe(7).) 
```

来自`man 2 setrlimit`：

```
 RLIMIT_FSIZE
          The maximum size of files that the process may create.  Attempts
          to extend a file beyond this  limit  result  in  delivery  of  a
          SIGXFSZ  signal.   By default, this signal terminates a process,
          but a process can catch this signal instead, in which  case  the
          relevant  system  call  (e.g., write(2), truncate(2)) fails with
          the error EFBIG. 
```

可以使用以下命令查看这些限制：

```
ulimit -Sf
ulimit -Hf 
```

或者通过使用这个 C 程序：

```
#include <stdio.h>
#include <errno.h>
#include <sys/resource.h>

int main()
{
    struct rlimit rl;
    if (getrlimit(RLIMIT_FSIZE, &rl) == 0) {
        printf("%d %d\n", rl.rlim_cur, rl.rlim_max);
    } else {
        fprintf(stderr, "error: %d\n", errno);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T08:36:56.067

来自 Linux Programmer's Manual，在 write(1) 上：“write() **最多**写入 count 个字节到文件...”

写入多少取决于您要写入的内容以及您是否使用同步写入。

例如，如果它是一个管道或一个套接字，则您不能写入超过一个管道/套接字缓冲区已满（在同步模式下：超过缓冲区中可用的内容）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T08:31:41.563

重现问题的最简单方法是让消费者缓慢。当您调用 write() 时，这将导致发送缓冲区几乎已满，这意味着并非您提供的所有数据都可以写入。您可以减少发送和接收缓冲区的大小以使此问题更加明显。

# web-services - Groovy 中带有 complexTypes 的 Axis2

> ID：12795847
> 
> 赞同：0
> 
> 时间：2012-10-09T08:27:35.857
> 
> 标签：web-services, ant, groovy, axis2, groovyws

所以我有几个使用 Groovy 的 ANT 脚本来处理普通 ANT 无法执行的复杂计算（至少 afaik）。我正在尝试通过 Groovy 使用 SOAP 信封访问 Axis2 Web 服务。请求和响应非常简单，除了两个`complexType`属性（一个在请求中，一个在响应中）。

我偶然发现的第一件事是**Groovy Soap**。它非常易于使用，您只需实例化一个 SoapClient 并调用 Web 服务方法。不幸的是，它无法处理`complexType`我需要的请求中的属性：

> 当前限制：
> 
> ……
> 
> 4：使用当前 groovy-1.0 版本的 Groovy SOAP 模块时，无法在客户端处理自定义数据类型。

然后我读了很多关于**GroovyWS**的文章。我在我的 .javac 和 $GROOVY_HOME 中创建了我的 Grape 配置文件（基本上按照[项目快速指南页面](http://groovy.codehaus.org/GroovyWS)`user.home`上的描述做了所有事情）。当我第一次启动脚本时，Grape 以某种方式检索了 Ivy（我没有使用 Grape 的经验，但我怀疑它与 Maven 非常相似）。

然后开始我的简单脚本：

```
@Grab(group='org.codehaus.groovy.modules', module='groovyws',version='0.5.2')
import groovyx.net.ws.WSClient
proxy = new WSClient("http://127.0.0.1/axis2/services/ReleaseService?wsdl", this.class.classLoader)
proxy.initialize() 
```

不幸的是，我什至无法初始化 Web 客户端（类路径中没有 Groovy Soap 库）：

```
SEVERE: Could not compile java files for http://127.0.0.1/axis2/services/ReleaseService?wsdl.
Caught: java.lang.IllegalStateException: Unable to create JAXBContext for generated packages: Provider com.sun.xml.bind.v2.ContextFactory could not be instantiated: javax.xml.bind.JAXBException: "com.intershop.qa.tae.ws.xsd" doesnt contain ObjectFactory.class or jaxb.index java.lang.IllegalStateException: Unable to create JAXBContext for generated packages: Provider com.sun.xml.bind.v2.ContextFactory could not be instantiated [...] 
```

使用类路径中的 Groovy Soap 库（它似乎重载了 GroovyWS 的一些功能），我得到了：

```
Caught: java.lang.NoSuchMethodError: javax.wsdl.xml.WSDLReader.readWSDL(Ljavax/wsdl/xml/WSDLLocator;Lorg/w3c/dom/Element;)Ljavax/wsdl/Definition; java.lang.NoSuchMethodError: 
```

这看起来与我最初使用 Groovy Soap 时遇到的错误非常相似。

***所以我的问题是：***如何`complexType`通过 ANT 使用参数与 Axis2 Web 服务进行通信。我不仅限于 Groovy，但出于部署原因（约 50 个 VM 快照），我想要一些简单的东西。一个 Java 客户端可以工作，但是由于部署需要付出很大的努力（特别是如果我想在未来改变一些东西），我需要一些更接近 ANT 并且更易于部署的东西。

提前感谢其他技术的建议或修复我的 GroovyWS 实现的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:20:56.127

我终于想出了一个解决方案：**[groovy-wslight](https://github.com/jwagenleitner/groovy-wslite)**实际上解决了我的问题，并且最终能够轻松部署并访问 Web 服务而没有问题/异常。

剧本：

```
@Grab(group='com.github.groovy-wslite', module='groovy-wslite', version='0.7.1')
import wslite.soap.*
def client = new SOAPClient("http://127.0.0.1/axis2/services/ReleaseService")
def response = client.send  {
  body {
    myFunction(xmlns:"http://my.namespace.com") {
       stringParameter("6.3.0.0")
       status() { value("default") }
       mode() { value("full") }
    }
  }
} 
```

Where`status`和`mode`are`complexTypes`由一个“值”属性组成（例如）。

```
println(response.myFunctionResponse.return) 
```

给我 Web 服务返回的对象。当然，令牌的名称取决于 WSDL。在我的情况下，请求的响应被称为`myFunctionResponse`，它有一个字段`name="return"`并给了我一个`complexType`对象。可以根据 WSDL 中给出的名称来检索对象的字段：

```
println(response.myFunctionResponse.return.location) // gives me the field value of the field "location" for my complexType 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:42:33.430

我在使用 JDK 1.7 时遇到了类似的问题。切换到 JDK 1.6 为我解决了这个问题。

# android - 我想隐藏 EditText

> ID：12795848
> 
> 赞同：0
> 
> 时间：2012-10-09T08:27:43.830
> 
> 标签：android, android-edittext

我有三个`EditText`，在某些情况下，我需要隐藏第二个`EditText`。

但是在我隐藏第二个之后，在第一个和第三个之间有一个空的地方。

如何将空缺职位清空

让它不为空。

我将高度设置`EditText`为0，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:31:25.293

您应该`editText.setVisibility(View.GONE)`只使用 View.INVISIBLE 隐藏元素但为他保留位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:28:45.057

使用此代码

```
editText.setVisibility(View.GONE); 
```

这将删除空白空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:28:53.247

使用`View.setVisibility(View.GONE);`它应该可以完成工作

# c - 字符串文字：指针与字符数组

> ID：12795850
> 
> 赞同：16
> 
> 时间：2012-10-09T08:27:47.977
> 
> 标签：c, segmentation-fault, string-literals

在本声明中：

```
char *a = "string1" 
```

字符串文字到底是什么？是`string1`吗？因为这个线程[C 和 C++ 中字符串文字的类型是什么？](https://stackoverflow.com/questions/2245664/string-literals-in-c)说一些不同的东西。

据我所知

```
int main()
{
    char *a = "string1"; //is a string- literals allocated memory in read-only section.
    char b[] = "string2"; //is a array char where memory will be allocated in stack.

    a[0] = 'X'; //Not allowed. It is an undefined Behaviour. For me, it Seg Faults. 
    b[0] = 'Y'; //Valid. 

    return 0;
} 
```

**请添加除上述要点以外的一些细节。谢谢。**

**调试输出显示错误** `a[0] = 'Y';`

```
Reading symbols from /home/jay/Desktop/MI/chararr/a.out...done.
(gdb) b main
Breakpoint 1 at 0x40056c: file ddd.c, line 4.
(gdb) r
Starting program: /home/jay/Desktop/MI/chararr/a.out 

Breakpoint 1, main () at ddd.c:4
4   {
(gdb) n
6   char *a = "string1";
(gdb) n
7   char b[] = "string2";
(gdb) 
9   a[0] = 'Y';
(gdb) 

Program received signal SIGSEGV, Segmentation fault.
0x0000000000400595 in main () at ddd.c:9 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-09T08:33:39.867

您可以将字符串文字视为*“用双引号括起来的一系列字符”*。此字符串应被视为**只读，**并且尝试修改此内存会导致**未定义的行为**。它不一定存储在只读内存中，类型 is`char[]`和 not `const char[]`，但它仍然是未定义的行为。类型不是的原因`const`是向后兼容。C一开始没有`const`限定符。在 C++ 中，字符串文字的类型为`const char[]`.

***那么你怎么会得到分段错误呢？***

*   要点是`char *ptr = "string literal"`指向`ptr`存储字符串文字的只读内存。因此，当您尝试访问此内存时：（`ptr[0] = 'X'`顺便说一句，相当于`*(ptr + 0) = 'X'`），这是一个**内存访问冲突**。

另一方面：`char b[] = "string2";`分配内存并将字符串复制`"string2"`到其中，因此修改它是有效的。`b`超出范围时会释放此内存。

查看[字符数组的文字字符串初始化程序](https://stackoverflow.com/q/2036096/1168156)

# java - 打印不同的数组元素

> ID：12795855
> 
> 赞同：1
> 
> 时间：2012-10-09T08:28:03.347
> 
> 标签：java, arrays

我想显示不同的字符串数组元素，如下所示：

*   俱乐部 1
*   红心王牌
*   钻石 9

CardGame.java：

```
public class CardGame {
    public static void main(String[] args){
        String[] suit = { "Clubs", "Hearts", "Diamonds", "Spades" };
        String[] deck = { "2", "3", "4", "5", "6", "7", "8", "9", "10",
                        "Jack", "Queen", "King", "Aces" };

        int i = (int) ( Math.random() * deck.length );
        int j = (int) ( Math.random() * suit.length );

        for( int a = 0; a < 7; a++ ) {
            System.out.println( "Deck " + deck[i] + " Suit " + suit[j] );
        }

        System.out.println();
    }
} 
```

我将如何做？指出我显示这些不同元素的正确逻辑。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:30:38.713

放

```
int i = (int) ( Math.random() * deck.length );
int j = (int) ( Math.random() * suit.length ); 
```

进入`for`循环，这样在每次迭代中都会生成一张新的随机卡片

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:34:55.757

```
 int times = 10; // Say you want it 10 times, in your code it's 7.

    for (int i = 0; i < times; i++) {
        System.out.println(deck[(int) (Math.random() * deck.length)]
                 + " : " + suit[(int) (Math.random() * suit.length)]);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:32:55.810

```
public class CardGame {
    public static void main(String[] args) {

         String[] deck = { "Clubs", "Hearts", "Diamonds", "Spades" };
         String[] suit = { "2", "3", "4", "5", "6", "7", "8", "9", "10",
                            "Jack", "Queen", "King", "Aces" };

         for( int a = 0; a < 7; a++ ) {
             int i = (int) ( Math.random() * deck.length );
             int j = (int) ( Math.random() * suit.length );

             System.out.println( "Deck " + deck[i] + " Suit " + suit[j] );
         }
         System.out.println();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:34:12.593

```
import java.util.HashSet;
import java.util.Set;

public class CardGame { 

    public static void main(String[] args){ 

        String[] deck = { "Clubs", "Hearts", "Diamonds", "Spades" }; 
        String[] suit = { "2", "3", "4", "5", "6", "7", "8", "9", "10", 
                                    "Jack", "Queen", "King", "Aces" }; 

        Set<String> s = new HashSet<String>();
        int totalCards=0;

        while(s.size() < (deck.length * suit.length)){ 
            int i = (int) ( Math.random() * deck.length ); 
            int j = (int) ( Math.random() * suit.length ); 

            if(!s.contains("Deck " + deck[i] + " Suit " + suit[j])){
                s.add("Deck " + deck[i] + " Suit " + suit[j]);
                totalCards++;
            }

        }

        System.out.println("Cards at Random: ");
        for(String str: s)
        System.out.println(str); 

        System.out.println("Total Cards: "+ totalCards);
    } 
} 
```

这将随机返回所有 52 张牌（所有组合）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T08:34:39.600

我不太明白你的问题——如果你想要很多随机卡片，或者全部。

他们都是：

```
for (String cardSuit: suit) {
    for (String cardDeck: deck) {
        System.out.println(cardDeck + " " + cardSuit);
    }
} 
```

随机（给定数字）：

```
Random rnd = new java.util.Random();
for (int i = 0; i < number; i++) {
    String cardSuit = suit[rnd.nextInt(suit.length)],
           cardDeck = deck[rnd.nextInt(deck.length)];
    System.out.println(cardDeck + " " + cardSuit);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T08:37:25.637

```
int i = (int) ( Math.random() * deck.length );
int j = (int) ( Math.random() * suit.length ); 
```

放入 for 循环，因为您的新生成 ij 值得到

# android - Android 谷歌地图显示最接近当前位置的地理点

> ID：12795857
> 
> 赞同：1
> 
> 时间：2012-10-09T08:28:05.810
> 
> 标签：android, google-maps, geopoints

有什么办法吗？如果我在我的 MapActivity 中添加了 100 个地理点，我只想显示距离我当前位置 1000 米的这些点。其他的不应该在地图上可见。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:33:48.400

好的，这是示例。您可以继承 Overlay 类并覆盖 draw 方法。每当覆盖失效时，您应该检查您的点是否在您所在位置的 1000m 范围内。当然，您应该知道您在覆盖类中的位置。流动就是例子：

```
public class MyMapOverlay extends Overlay {

Bitmap bmp;
Context context;
public MyMapOverlay()
{
    bmp = BitmapFactory.decodeResource(MyApplication.getContext().getResources(), R.drawable.myplace);
}

@Override   
public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) 
{
    super.draw(canvas, mapView, shadow);                   
    Point screenPts = new Point();
    for(int i = 0;i<points.size(); i++)
    {
        GeoPoint point = points.get(i);

        Location locationA = new Location("point " + String.valueOf(i));  

        locationA.setLatitude(point.getLatitudeE6());  
        locationA.setLongitude(point.getLongitudeE6());    

        float distance = myLocation.distanceTo(locationA);
        if(distance < 1000.0)
        {
            mapView.getProjection().toPixels(p, screenPts);
            canvas.drawBitmap(bmp, screenPts.x-bmp.getWidth()/2, screenPts.y-bmp.getHeight(), null);
        }
    }        
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:31:17.747

在第一个答案的帮助下，我找到了这个解决方案：

```
 if(location != null){
                Location locA = new Location("gps");

                GeoPoint myLoc = new GeoPoint((int)(location.getLatitude() * 1E6), (int)(location.getLongitude() * 1E6));
                mapController.animateTo(myLoc);

                String sqlbars = "SELECT DISTINCT id, latitude, longitude, address, " +
                        " (SELECT category FROM bars_categories WHERE bar_id=bars.id) AS category " +
                        " FROM bars WHERE is_active=1";
                Cursor curBars = dbHelper.executeSQLQuery(sqlbars);
                if(curBars != null){

                    if(curBars.getCount() > 0){

                        for(curBars.move(0);curBars.moveToNext();curBars.isAfterLast()){

                            double latitude = curBars.getDouble(curBars.getColumnIndex("latitude"));            
                            double longitude = curBars.getDouble(curBars.getColumnIndex("longitude"));
                            final List<Overlay> mapOverlays = mapView.getOverlays();
                            Drawable drawable = SofiaLiveNearbyActivity.this.getResources().getDrawable(R.drawable.pin_map_icon);
                            int markerWidth = drawable.getIntrinsicWidth();
                            int markerHeight = drawable.getIntrinsicHeight();
                            drawable.setBounds(0, markerHeight, markerWidth, 0);
                            final HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, SofiaLiveNearbyActivity.this);

                            GeoPoint point = new GeoPoint((int)(latitude * 1E6),(int)(longitude *1E6));
                            OverlayItem overlayitem =  new OverlayItem(point, "Type: "+category+"\n----------------\nAddress: "+address, id);

                            locA.setLatitude(latitude);
                            locA.setLongitude(longitude);

                            float distance = location.distanceTo(locA);

                            if(distance < 1000.0){
                                itemizedoverlay.addOverlay(overlayitem);
                                mapOverlays.add(itemizedoverlay);
                            }
                        }   
                    }
                    curBars.close();
                } 
```

它奏效了。

# python - 重新实现 __eq__ 以在 python 中将集合与 symmetric_difference 进行比较

> ID：12795860
> 
> 赞同：1
> 
> 时间：2012-10-09T08:28:31.143
> 
> 标签：python, set

我有一组来自两个不同目录的文件名。

```
currList=set(['pathA/file1', 'pathA/file2', 'pathB/file3', etc.]) 
```

我的代码正在处理文件，并且需要通过将其与前一次迭代中的内容进行比较来更改 currList，例如 processLst。为此，我计算了一个对称差异：

```
toProcess=set(currList).symmetric_difference(set(processList)) 
```

实际上，我需要 symmetric_difference 对基本名称（file1...）而不是对完整文件名（pathA/file1）进行操作。

我想我需要重新实现`__eq__`运算符，但我不知道如何在 python 中做到这一点。

1.  重新`__eq__`实施正确的方法吗？或者
2.  还有另一种更好/等效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:24:48.943

这是一个令牌（并且可能构造不佳）`itertools`版本，如果速度成为一个问题，它应该运行得更快一些（尽管同意@Zarkonnen 的单线非常甜蜜，所以+1 :)）。

```
from itertools import ifilter

currList = set(['pathA/file1', 'pathA/file2', 'pathB/file3'])
processList=set(['pathA/file1', 'pathA/file9', 'pathA/file3'])

# This can also be a lambda inside the map functions - the speed stays the same
def FileName(f):
  return f.split('/')[-1]

# diff will be a set of filenames with no path that will be checked during
# the ifilter process
curr = map(FileName, list(currList))
process = map(FileName, list(processList))
diff = set(curr).symmetric_difference(set(process))

# This filters out any elements from the symmetric difference of the two sets
# where the filename is not in the diff set
results = set(ifilter(lambda x: x.split('/')[-1] in diff,
              currList.symmetric_difference(processList))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:53:57.793

您可以使用生成器表达式的魔力来做到这一点。

```
def basename(x):
    return x.split("/")[-1]

result = set(x for x in set(currList).union(set(processList)) if (basename(x) in [basename(y) for y in currList]) != (basename(x) in [basename(y) for y in processList])) 
```

应该做的伎俩。它为您提供了出现在一个列表或另一个列表中的所有元素 X，并且它们在两个列表中的基本名称存在不相同。

*编辑：* 运行这个：

```
currList=set(['pathA/file1', 'pathA/file2', 'pathB/file3'])
processList=set(['pathA/file1', 'pathA/file9', 'pathA/file3']) 
```

返回：

```
set(['pathA/file2', 'pathA/file9']) 
```

这似乎是正确的。

# android - 如何使用预定义的数组在 android 中启动 ListView？

> ID：12795861
> 
> 赞同：0
> 
> 时间：2012-10-09T08:28:32.613
> 
> 标签：android, eclipse

我已经通过了本教程：

[Android：在 XML 中创建和填充 ListView 项](http://theopentutorials.com/tutorials/android/listview/android-creating-and-populating-listview-items-in-xml/)

我想在 xml 中初始化 ListView 而不是代码。

我的 array.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="anyArray">
        <item>one</item>
        <item>two</item>
        <item>three</item>
    </string-array>

</resources> 
```

我的 activity_main.xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:entries="@array/anyArray" >
    </ListView>

</RelativeLayout> 
```

当我切换到布局时，我收到此警告

```
Couldn't resolve resource @array/anyArray 
```

并且不显示任何项目。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:34:26.613

您的资源名称应仅包含 [a-z0-9._]。将您的重命名`Array`为所有小写字符。

# azure - 在处理传入的 TCP 网络流时面临的问题

> ID：12795876
> 
> 赞同：1
> 
> 时间：2012-10-09T08:29:29.240
> 
> 标签：azure, stream, blob, memorystream

我正在尝试通过读取传入的 TCP 网络流通过 FTP 服务将文件（blob）上传到 Azure 存储。每当我尝试在 Uploadblob 方法中执行诸如 stream.length、stream.seek 之类的操作时，我都会收到以下未处理的异常：

```
 Unhandled Exception!
 Error ID: 0
 Error Code: Unknown
 Is Warning: False
Type: System.NotSupportedException
 Stack:    at     System.ServiceModel.Dispatcher.StreamFormatter.MessageBodyStream.get_Length() 
```

解决方法是从流中读取直到耗尽，然后将数据复制到 MemoryStream 中。想知道是否有人有更好的解决方案（解决方法），而不是将传入流复制到内存流并进行处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:35:25.800

TCP 是一种流协议，字节流以任意速率传输。此外，网络流保持打开状态，直到它被流的一端关闭，这可能无法让您在通话期间的某个点获得确切的长度。大多数情况下，由于这个原因，您会遇到这些异常。

正如您所提到的，一旦您拥有自己的内存流，您可以在其中转储 tcp 流内容，但仍然可以对流进行更多控制。一旦你有一个由你管理的内存流，你可以直接从 MemoryStream 上传 blob，

# c# - 如何为单用户制作桌面应用程序？

> ID：12795877
> 
> 赞同：0
> 
> 时间：2012-10-09T08:29:29.960
> 
> 标签：c#, .net, winforms

我为一个组织创建了一款软件。但也存在软件盗版的威胁。我只想在一台计算机上保留（安装）它。根据我的看法，我将创建 Web 服务，该服务将在安装时调用，并将收集系统信息并限制进一步处理，如果它已经存在于数据库中. 这是我的假设和想法，我会经历，是否有任何其他方法可以实现这一点，或者是否有内置功能来克服这一点。

任何回应都是可观的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:36:44.010

使用网络服务是一个不错的选择。但要使其正常工作，您必须确保软件在被调用时始终连接到互联网。

还有其他离线选项可用。这是其中几个的链接

[http://www.smart-lock.com/](http://www.smart-lock.com/)

[http://www.keylok.com/](http://www.keylok.com/)

它们是保护执行的密钥，除非将密钥插入机器中。

还有更多可用的选项，例如检测硬盘的序列号或从 mac 地址识别机器，但它们并不完全安全。还有进一步的问题，例如硬件的变化会导致软件停止工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:37:45.383

我能看到实现这一目标的最佳方法是在当前用户的注册表中创建一个键。

执行此操作的示例代码是：

```
Microsoft.Win32.RegistryKey key;
key = Microsoft.Win32.Registry.CurrentUser.CreateSubKey("Names");
key.SetValue("Name", "Isabella");
key.Close(); 
```

PS您应该加密您的密钥值，否则它很容易被黑客入侵。

# performance - 如何以指定的时间间隔捕获进程的内存和当前 CPU 使用率

> ID：12795880
> 
> 赞同：0
> 
> 时间：2012-10-09T08:29:43.747
> 
> 标签：performance, memory, cpu, capture

要求是每 5 分钟在一个日志文件中为 4 个进程（7005.exe、7006.exe、7007.exe、7008.exe）捕获以下信息。

文件名、已用内存 (kb)、Cpu%、时间戳 7005.exe、10240、75、10:30 AM 7006.exe、10240、75、10:30 AM 7005.exe、10242、75、10:35 AM 7006。 exe, 10000, 75, 10:35 AM

我尝试使用任务列表，但我不擅长命令文件脚本。

请指教，

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:33:23.903

你想要类似[sysinternals psList 的](http://technet.microsoft.com/en-us/sysinternals/bb896682.aspx)东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:35:08.517

查看[Windows Management Instrumentation](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)，尤其是[任务/进程 API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394599%28v=vs.85%29.aspx)。该页面上有一个示例，用于通过[Process](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)对象收集进程 CPU 信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:00:13.893

我在批处理文件中使用了这些命令，唯一的问题是捕获应用程序名称和内存使用情况的时间。关于如何在同一行中捕获日期和时间的任何建议？

```
echo %Date% %TIME% >> c:\ym\tasklist.log

tasklist /fi "memusage gt 100000" >> c:\tasklist.log 
```

输出：

```
Image Name                     PID Session Name        Session#    Mem Usage
========================= ======== ================ =========== ============
explorer.exe                   476 Console                    2    189,384 K
Maxthon.exe                   8104 Console                    2    275,540 K
OUTLOOK.EXE                   5320 Console                    2    189,992 K
Tue 10/09/2012 15:17:00.20 

Image Name                     PID Session Name        Session#    Mem Usage
========================= ======== ================ =========== ============
explorer.exe                   476 Console                    2    187,936 K
Maxthon.exe                   8104 Console                    2    275,520 K
OUTLOOK.EXE                   5320 Console                    2    190,076 K
Tue 10/09/2012 15:19:00.35 

Image Name                     PID Session Name        Session#    Mem Usage
========================= ======== ================ =========== ============
explorer.exe                   476 Console                    2    188,044 K
Maxthon.exe                   8104 Console                    2    300,520 K
OUTLOOK.EXE                   5320 Console                    2    190,080 K 
```

我面临的挑战是在每个流程旁边加上时间戳。请有人建议。

# c# - 比较两个通用列表差异的最快方法

> ID：12795882
> 
> 赞同：278
> 
> 时间：2012-10-09T08:29:50.473
> 
> 标签：c#, linq, list

比较两个大型（> 50.000 个项目）的最快（和最少的资源密集型）是什么，因此有两个列表，如下所示：

1.  出现在第一个列表中但不在第二个列表中的项目
2.  显示在第二个列表中但不在第一个列表中的项目

目前我正在使用 List 或 IReadOnlyCollection 并在 linq 查询中解决此问题：

```
var list1 = list.Where(i => !list2.Contains(i)).ToList();
var list2 = list2.Where(i => !list.Contains(i)).ToList(); 
```

但这并没有我想要的那么好。由于我需要处理大量列表，因此有什么想法可以使这更快，更省资源吗？

* * *

## 回答 #1

> 赞同：549
> 
> 时间：2012-10-09T08:31:12.910

使用[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

```
var firstNotSecond = list1.Except(list2).ToList();
var secondNotFirst = list2.Except(list1).ToList(); 
```

我怀疑有些方法实际上会比这快一点，但即使这样也会*比*你的 O(N * M) 方法快得多。

如果你想结合这些，你可以用上面的方法创建一个方法，然后是一个 return 语句：

```
return !firstNotSecond.Any() && !secondNotFirst.Any(); 
```

需要注意的一点是，问题中的原始代码与此处的解决方案之间的结果*存在*差异：仅在一个列表中的任何重复元素将仅在我的代码中报告一次，而它们将被报告为多次它们出现在原始代码中的时间。

例如，对于 和 的列表，`[1, 2, 2, 2, 3]`原始`[1]`代码中的“list1 中的元素但不是 list2 中的元素”结果将是`[2, 2, 2, 3]`. 用我的代码就可以了`[2, 3]`。在许多情况下，这不是问题，但值得注意。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2019-05-10T14:51:28.200

> ***Enumerable.SequenceEqual 方法***
> 
> 根据相等比较器确定两个序列是否相等。 [MS.Docs](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.sequenceequal?view=netframework-4.8)

```
Enumerable.SequenceEqual(list1, list2); 
```

这适用于所有原始数据类型。如果您需要在需要实现的自定义对象上使用它`IEqualityComparer`

定义支持比较对象是否相等的方法。

> ***IEqualityComparer 接口***
> 
> 定义支持比较对象是否相等的方法。 [IEqualityComparer 的 MS.Docs](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.iequalitycomparer-1?view=netframework-4.8)

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-10-09T08:31:44.763

更有效的是使用[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

```
var inListButNotInList2 = list.Except(list2);
var inList2ButNotInList = list2.Except(list); 
```

该方法是通过使用延迟执行来实现的。这意味着您可以编写例如：

```
var first10 = inListButNotInList2.Take(10); 
```

它也很有效，因为它在内部使用 a`Set<T>`来比较对象。它的工作原理是首先从第二个序列中收集所有不同的值，然后流式传输第一个序列的结果，检查它们以前没有见过。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-01-20T16:32:47.327

如果您希望结果**不区分大小写**，则可以使用以下方法：

```
List<string> list1 = new List<string> { "a.dll", "b1.dll" };
List<string> list2 = new List<string> { "A.dll", "b2.dll" };

var firstNotSecond = list1.Except(list2, StringComparer.OrdinalIgnoreCase).ToList();
var secondNotFirst = list2.Except(list1, StringComparer.OrdinalIgnoreCase).ToList(); 
```

`firstNotSecond`将包含**b1.dll**

`secondNotFirst`将包含**b2.dll**

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-12-15T11:31:30.897

```
using System.Collections.Generic;
using System.Linq;

namespace YourProject.Extensions
{
    public static class ListExtensions
    {
        public static bool SetwiseEquivalentTo<T>(this List<T> list, List<T> other)
            where T: IEquatable<T>
        {
            if (list.Except(other).Any())
                return false;
            if (other.Except(list).Any())
                return false;
            return true;
        }
    }
} 
```

有时您只需要知道*两个*列表是否不同，而不需要知道这些差异是什么。在这种情况下，请考虑将此扩展方法添加到您的项目中。请注意，您列出的对象应实现 IEquatable！

用法：

```
public sealed class Car : IEquatable<Car>
{
    public Price Price { get; }
    public List<Component> Components { get; }

    ...
    public override bool Equals(object obj)
        => obj is Car other && Equals(other);

    public bool Equals(Car other)
        => Price == other.Price
            && Components.SetwiseEquivalentTo(other.Components);

    public override int GetHashCode()
        => Components.Aggregate(
            Price.GetHashCode(),
            (code, next) => code ^ next.GetHashCode()); // Bitwise XOR
} 
```

无论`Component`类是什么，这里显示的方法`Car`都应该几乎相同地实现。

注意我们是如何编写 GetHashCode 的，这一点非常重要。为了正确实现`IEquatable`，*必须*以逻辑兼容的方式对实例的属性进行操作`Equals`。`GetHashCode`

 *两个具有相同内容的列表仍然是不同的对象，并且会产生不同的哈希码。由于我们希望这两个列表被视为相等，因此我们必须`GetHashCode`为它们中的每一个生成相同的值。我们可以通过将哈希码委托给列表中的每个元素，并使用标准的按位异或来组合它们来实现这一点。XOR 与顺序无关，因此列表的排序方式是否不同并不重要。重要的是它们只包含等效的成员。

*注意：这个奇怪的名字是暗示该方法不考虑列表中元素的顺序。如果您确实关心列表中元素的顺序，那么此方法不适合您！*

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-20T14:26:52.527

不是为了这个问题，但这里有一些代码来比较列表是否相等！相同的对象：

```
public class EquatableList<T> : List<T>, IEquatable<EquatableList<T>> where    T : IEquatable<T>

/// <summary>
/// True, if this contains element with equal property-values
/// </summary>
/// <param name="element">element of Type T</param>
/// <returns>True, if this contains element</returns>
public new Boolean Contains(T element)
{
    return this.Any(t => t.Equals(element));
}

/// <summary>
/// True, if list is equal to this
/// </summary>
/// <param name="list">list</param>
/// <returns>True, if instance equals list</returns>
public Boolean Equals(EquatableList<T> list)
{
    if (list == null) return false;
    return this.All(list.Contains) && list.All(this.Contains);
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-09T08:32:30.580

试试这种方式：

```
var difList = list1.Where(a => !list2.Any(a1 => a1.id == a.id))
            .Union(list2.Where(a => !list1.Any(a1 => a1.id == a.id))); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-09-12T10:07:56.540

如果只需要组合结果，这也可以：

```
var set1 = new HashSet<T>(list1);
var set2 = new HashSet<T>(list2);
var areEqual = set1.SetEquals(set2); 
```

其中 T 是列表元素的类型。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-08-09T07:35:35.163

我已经使用此代码比较了两个具有数百万条记录的列表。

这种方法不会花太多时间

```
 //Method to compare two list of string
    private List<string> Contains(List<string> list1, List<string> list2)
    {
        List<string> result = new List<string>();

        result.AddRange(list1.Except(list2, StringComparer.OrdinalIgnoreCase));
        result.AddRange(list2.Except(list1, StringComparer.OrdinalIgnoreCase));

        return result;
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-03-20T16:52:17.250

虽然 Jon Skeet 的回答对于日常使用少量到中等数量的元素（最多几百万）的练习来说是一个很好的建议，但它并不是最快的方法，也不是非常有效的资源。一个明显的缺点是，要获得完整的差异，需要对数据进行两次传递（如果相同的元素也很感兴趣，即使是 3 次）。显然，可以通过自定义重新实现该`Except`方法来避免这种情况，但仍然存在哈希集的创建需要大量内存并且哈希的计算需要时间。

对于非常大的数据集（数十亿个元素），考虑特定情况通常是值得的。以下是一些可能会提供一些启发的想法： 如果可以比较元素（在实践中几乎总是如此），那么对列表进行排序并应用以下 zip 方法是值得考虑的：

```
/// <returns>The elements of the specified (ascendingly) sorted enumerations that are
/// contained only in one of them, together with an indicator,
/// whether the element is contained in the reference enumeration (-1)
/// or in the difference enumeration (+1).</returns>
public static IEnumerable<Tuple<T, int>> FindDifferences<T>(IEnumerable<T> sortedReferenceObjects,
    IEnumerable<T> sortedDifferenceObjects, IComparer<T> comparer)
{
    var refs  = sortedReferenceObjects.GetEnumerator();
    var diffs = sortedDifferenceObjects.GetEnumerator();
    bool hasNext = refs.MoveNext() && diffs.MoveNext();
    while (hasNext)
    {
        int comparison = comparer.Compare(refs.Current, diffs.Current);
        if (comparison == 0)
        {
            // insert code that emits the current element if equal elements should be kept
            hasNext = refs.MoveNext() && diffs.MoveNext();

        }
        else if (comparison < 0)
        {
            yield return Tuple.Create(refs.Current, -1);
            hasNext = refs.MoveNext();
        }
        else
        {
            yield return Tuple.Create(diffs.Current, 1);
            hasNext = diffs.MoveNext();
        }
    }
} 
```

例如，这可以通过以下方式使用：

```
const int N = <Large number>;
const int omit1 = 231567;
const int omit2 = 589932;
IEnumerable<int> numberSequence1 = Enumerable.Range(0, N).Select(i => i < omit1 ? i : i + 1);
IEnumerable<int> numberSequence2 = Enumerable.Range(0, N).Select(i => i < omit2 ? i : i + 1);
var numberDiffs = FindDifferences(numberSequence1, numberSequence2, Comparer<int>.Default); 
```

在我的计算机上进行基准测试给出了 N = 1M 的以下结果：

| 方法 | 意思是 | 错误 | 标准差 | 比率 | 0代 | 第一代 | 第 2 代 | 已分配 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| DiffLinq | 115.19 毫秒 | 0.656 毫秒 | 0.582 毫秒 | 1.00 | 2800.0000 | 2800.0000 | 2800.0000 | 67110744乙 |
| 区分邮编 | 23.48 毫秒 | 0.018 毫秒 | 0.015 毫秒 | 0.20 | - | - | - | 720乙 |

对于 N = 100M：

| 方法 | 意思是 | 错误 | 标准差 | 比率 | 0代 | 第一代 | 第 2 代 | 已分配 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| DiffLinq | 12.146 秒 | 0.0427 秒 | 0.0379 秒 | 1.00 | 13000.0000 | 13000.0000 | 13000.0000 | 8589937032 乙 |
| 区分邮编 | 2.324 秒 | 0.0019 秒 | 0.0018 秒 | 0.19 | - | - | - | 720乙 |

请注意，此示例当然受益于列表已经排序并且可以非常有效地比较整数这一事实。但这正是重点：如果您确实有有利的环境，请确保利用它们。

一些进一步的评论：比较功能的速度显然与整体性能相关，因此对其进行优化可能是有益的。这样做的灵活性是压缩方法的一个好处。此外，并行化对我来说似乎更可行，尽管绝不容易，而且可能不值得付出努力和开销。然而，将过程加速大约 2 倍的简单方法是将列表分别分成两半（如果可以有效地完成）并并行比较各个部分，一个从前到后处理，另一个处理以相反的顺序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-14T19:14:53.167

我比较了 3 种不同的方法来比较不同的数据集。下面的测试创建了一个包含从`0`to的所有数字的字符串集合`length - 1`，然后是另一个具有相同范围但具有偶数的集合。然后我从第一个集合中挑选出奇数。

# 使用 Linq 除外

```
public void TestExcept()
{
    WriteLine($"Except {DateTime.Now}");
    int length = 20000000;
    var dateTime = DateTime.Now;
    var array = new string[length];
    for (int i = 0; i < length; i++)
    {
        array[i] = i.ToString();
    }
    Write("Populate set processing time: ");
    WriteLine(DateTime.Now - dateTime);
    var newArray = new string[length/2];
    int j = 0;
    for (int i = 0; i < length; i+=2)
    {
        newArray[j++] = i.ToString();
    }
    dateTime = DateTime.Now;
    Write("Count of items: ");
    WriteLine(array.Except(newArray).Count());
    Write("Count processing time: ");
    WriteLine(DateTime.Now - dateTime);
} 
```

**输出**

```
Except 2021-08-14 11:43:03 AM
Populate set processing time: 00:00:03.7230479
2021-08-14 11:43:09 AM
Count of items: 10000000
Count processing time: 00:00:02.9720879 
```

# 使用 HashSet.Add

```
public void TestHashSet()
{
    WriteLine($"HashSet {DateTime.Now}");
    int length = 20000000;
    var dateTime = DateTime.Now;
    var hashSet = new HashSet<string>();
    for (int i = 0; i < length; i++)
    {
        hashSet.Add(i.ToString());
    }
    Write("Populate set processing time: ");
    WriteLine(DateTime.Now - dateTime);
    var newHashSet = new HashSet<string>();
    for (int i = 0; i < length; i+=2)
    {
        newHashSet.Add(i.ToString());
    }
    dateTime = DateTime.Now;
    Write("Count of items: ");
    // HashSet Add returns true if item is added successfully (not previously existing)
    WriteLine(hashSet.Where(s => newHashSet.Add(s)).Count());
    Write("Count processing time: ");
    WriteLine(DateTime.Now - dateTime);
} 
```

**输出**

```
HashSet 2021-08-14 11:42:43 AM
Populate set processing time: 00:00:05.6000625
Count of items: 10000000
Count processing time: 00:00:01.7703057 
```

**特殊 HashSet 测试**：

```
public void TestLoadingHashSet()
{
    int length = 20000000;
    var array = new string[length];
    for (int i = 0; i < length; i++)
    {
       array[i] = i.ToString();
    }
    var dateTime = DateTime.Now;
    var hashSet = new HashSet<string>(array);
    Write("Time to load hashset: ");
    WriteLine(DateTime.Now - dateTime);
}
> TestLoadingHashSet()
Time to load hashset: 00:00:01.1918160 
```

# 使用 .Contains

```
public void TestContains()
{
    WriteLine($"Contains {DateTime.Now}");
    int length = 20000000;
    var dateTime = DateTime.Now;
    var array = new string[length];
    for (int i = 0; i < length; i++)
    {
        array[i] = i.ToString();
    }
    Write("Populate set processing time: ");
    WriteLine(DateTime.Now - dateTime);
    var newArray = new string[length/2];
    int j = 0;
    for (int i = 0; i < length; i+=2)
    {
        newArray[j++] = i.ToString();
    }
    dateTime = DateTime.Now;
    WriteLine(dateTime);
    Write("Count of items: ");
    WriteLine(array.Where(a => !newArray.Contains(a)).Count());
    Write("Count processing time: ");
    WriteLine(DateTime.Now - dateTime);
} 
```

**输出**

```
Contains 2021-08-14 11:19:44 AM
Populate set processing time: 00:00:03.1046998
2021-08-14 11:19:49 AM
Count of items: Hosting process exited with exit code 1.
(Didnt complete. Killed it after 14 minutes) 
```

结论：

*   Linq`Except`在我的设备上运行比使用`HashSets`(n=20,000,000) 慢了大约 1 秒。
*   使用`Where`并`Contains`运行了很长时间

HashSet 的结束语：

*   唯一数据
*   确保覆盖`GetHashCode`（正确）类类型
*   如果您制作数据集的副本，可能需要多达 2 倍的内存，具体取决于实现
*   `HashSet`已[针对](https://referencesource.microsoft.com/#system.core/system/Collections/Generic/HashSet.cs,119)使用`IEnumerable`构造函数克隆其他 HashSet 进行了优化，但将其他集合转换为 HashSet 会更慢（参见上面的特殊测试）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-26T06:58:39.647

第一种方法：

```
if (list1 != null && list2 != null && list1.Select(x => list2.SingleOrDefault(y => y.propertyToCompare == x.propertyToCompare && y.anotherPropertyToCompare == x.anotherPropertyToCompare) != null).All(x => true))
   return true; 
```

如果您可以使用重复值，则第二种方法：

```
if (list1 != null && list2 != null && list1.Select(x => list2.Any(y => y.propertyToCompare == x.propertyToCompare && y.anotherPropertyToCompare == x.anotherPropertyToCompare)).All(x => true))
   return true; 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-09-15T10:22:26.613

一条线：

```
var list1 = new List<int> { 1, 2, 3 };
var list2 = new List<int> { 1, 2, 3, 4 };
if (list1.Except(list2).Count() + list2.Except(list1).Count() == 0)
    Console.WriteLine("same sets"); 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-04-07T14:06:36.543

也许这很有趣，但这对我有用：

```
string.Join("",List1) != string.Join("", List2) 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2019-01-15T07:47:56.180

我认为这是一种逐个元素比较两个列表的简单方法

```
x=[1,2,3,5,4,8,7,11,12,45,96,25]
y=[2,4,5,6,8,7,88,9,6,55,44,23]

tmp = []

for i in range(len(x)) and range(len(y)):
    if x[i]>y[i]:
        tmp.append(1)
    else:
        tmp.append(0)
print(tmp) 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2018-09-03T16:31:30.387

这是您会找到的最佳解决方案

```
var list3 = list1.Where(l => list2.ToList().Contains(l)); 
```*

# javascript - 从数据库创建链接时查找 ifream 源

> ID：12795886
> 
> 赞同：0
> 
> 时间：2012-10-09T08:30:11.020
> 
> 标签：javascript

我编写此代码以从数据库中获取链接，单击 url 后可以显示到 iframe，但我无法获取 iframe 真正的 src：

```
if ( mysql_num_rows($query) > 0) 
{
   echo"<li><a href='#' class='alink'>".$key.'</a>';
   echo'<ul>';
   while($qsql=mysql_fetch_array($query)) 
        echo "<li ><a href='{$qsql['ModuleAddress']}  target='links' class='alink'>".$qsql['ModuleTitle'].'</a></li>';
   echo'</ul>';
   echo'</li>';
} 
```

我的html链接：

```
<a href="#" onclick="GetIFrameUrl();"> 
```

我的 iframe 是：

```
<iframe width="100%" id="links" name='links' frameborder="0" src='arm.html' style="border: none;padding: 0;margin: 0;"> </iframe> 
```

我的js是：

```
function GetIFrameUrl()
                {
                    var control = document.getElementById("links");
                    alert("iframe source = " + control.src);
                } 
```

# java - 是否可以使用带有可以填写打印的文本字段的 jasper-reports 生成 PDF？

> ID：12795890
> 
> 赞同：1
> 
> 时间：2012-10-09T08:30:29.813
> 
> 标签：java, jasper-reports, ireport

> **可能重复：**
> [如何在 Jasper 报告中制作可编辑的 PDF 字段](https://stackoverflow.com/questions/5870145/how-to-make-editable-pdf-fields-in-a-jasper-report)

我使用 iReport 创建报告并使用 jasper-reports 生成它。

我想制作一个用户可以填写的带有文本字段的 PDF 报告，并打印编辑后的文档。

可以做到吗，怎么做？

# c# - 将样式表应用于 gridview 模板字段

> ID：12795895
> 
> 赞同：0
> 
> 时间：2012-10-09T08:30:50.477
> 
> 标签：c#, asp.net, css, gridview, stylesheet

我有这个gridview，我想将一些样式表设置应用于gridview 中的验证器。这是我的 GV 的设置方式：

```
<table class="table">                                              
<tr>
    <td align="center" colspan="4">
        <cc1:GroupedGridView ID="grpgrdHeatPumpSPF" runat="server" BackColor="White" BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" CellPadding="3" CellSpacing="2" 
            Width="650" GroupingDepth="3" AutoGenerateColumns="false" PageSize="20" AllowPaging="true"  
            DataKeyNames="HeatPumpID" OnPageIndexChanging="grpgrdHeatPumpSPF_PageIndexChanging" 
            OnRowCancelingEdit="grpgrdHeatPumpSPF_RowCancelingEdit" OnRowEditing="grpgrdHeatPumpSPF_RowEditing" OnRowUpdating="grpgrdHeatPumpSPF_RowUpdating" >
        <HeaderStyle BackColor="#86C708" Font-Bold="True" ForeColor="White" HorizontalAlign="Left"></HeaderStyle>
        <FooterStyle BackColor="White" ForeColor="#000066"></FooterStyle>
        <RowStyle BackColor="White" ForeColor="#333333" HorizontalAlign="Left"></RowStyle>
        <EditRowStyle BackColor="#cde686" />
        <SelectedRowStyle BackColor="#FCADAD" ForeColor="Black" Font-Bold="true"  />                               
        <AlternatingRowStyle ForeColor="#284775" />
        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Left"></PagerStyle>
        <PagerSettings Mode="NumericFirstLast" />
        <EmptyDataRowStyle CssClass="Label_Small_Bold" ForeColor="#C00000" HorizontalAlign="Center" />                                
        <Columns>
            <asp:ButtonField CommandName="Select" Visible="false" />
            <asp:BoundField DataField="HeatPumpID" HeaderText="HeatPumpID" Visible="False" ReadOnly="True" >
                <HeaderStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:BoundField DataField="ModelNumber" HeaderText="Model Number" Visible="True" ReadOnly="True" >
                <HeaderStyle HorizontalAlign="Left" />
            </asp:BoundField>
            <asp:TemplateField HeaderText="FlowTemp">
                <ItemTemplate>
                    <asp:Label ID="lblFlowTemp" runat="server" Text='<%# Bind("FlowTemp") %>'></asp:Label>
                </ItemTemplate>
                <ControlStyle CssClass="Input_Text_Int" />
                <HeaderStyle HorizontalAlign="Left" />
                <ItemStyle VerticalAlign="Top" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Heating">
                <EditItemTemplate>
                    <asp:TextBox ID="txtSPFHeating" runat="server" Text='<%# Bind("SPFHeating") %>' CssClass="Input_Text_Int"></asp:TextBox>
                    <asp:RequiredFieldValidator Display="Dynamic" CssClass="validateGridView" ID="validateBTSPFHeating" runat="server" 
                        ErrorMessage="Please enter SPFHeating (e.g. 3.3)" ControlToValidate="txtSPFHeating"></asp:RequiredFieldValidator>                        
                    <asp:RegularExpressionValidator ID="regExpSPFHeating" runat="server" ControlToValidate="txtSPFHeating" CssClass="validateGridView" 
                        ErrorMessage="Invalid SPFHeating (e.g. 3.3)" ValidationExpression="\d+(\.\d)"  Display="Dynamic" SetFocusOnError="True"></asp:RegularExpressionValidator>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="lblSPFHeating" runat="server" Text='<%# Bind("SPFHeating") %>'></asp:Label>
                </ItemTemplate>
                <ControlStyle CssClass="Input_Text_Int" />
                <HeaderStyle HorizontalAlign="Left" />
                <ItemStyle VerticalAlign="Top" />
            </asp:TemplateField>
            <asp:CommandField ButtonType="Button" ShowEditButton="True" ValidationGroup="vgEdit">
                        <ControlStyle CssClass="Button_XSmall" />
                    </asp:CommandField> 
            <asp:TemplateField ShowHeader="False">
                <ItemTemplate>
                    <asp:Button ID="btnDeleteHeatPumpSPF" CommandArgument='<%# Eval("HeatPumpID","") + ";" + Eval("FlowTemp","") %>' runat="server" OnClientClick="return ConfirmDeletion();" CausesValidation="false" 
                    CommandName="DeletePart" Text="Delete" OnClick="btnDeleteHeatPumpSPF_Click" />
                </ItemTemplate>
                <ControlStyle CssClass="Label_Small" />
            </asp:TemplateField>                                    
        </Columns>
    </cc1:GroupedGridView>
    </td>
</tr> 
```

我的CSS如下：

```
table td
{
padding: 2px;
}
table.center {
    width:90%; 
    margin-left:5%; 
    margin-right:5%;
  }
.hideGridColumn
{
    display:none;
}
.table td label{
    float: left;
    width:146px;
    margin-bottom:5px;
    margin-top:5px;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color: Black;
    line-height: 17px;
    text-align: right;
}
.table td labelmid{
    float: left;
    width:205px;
    margin-bottom:5px;
    margin-top:5px;
    text-align: right;
}
.table td labelwide{
    float: left;
    width:230px;
    margin-bottom:5px;
    margin-top:5px;
    text-align: right;
}
.table td.control{
    width:310px;
    margin-bottom:5px;
    vertical-align:middle;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color: Black;
    line-height: 17px;
}
.table td.controlmed{
    width:200px;
    margin-bottom:5px;
    vertical-align:middle;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color: Black;
    line-height: 17px;
}
.table td input[type=text],input[type=password]{
    float: left;
    border:#92d307 solid 1px;
    line-height:20px;
    font-family:Arial, Helvetica, sans-serif;
    padding:5px;
    color:#000000;
}
.table td select{
    float: left;
    border:#92d307 solid 1px;
    height:32px;
    line-height:20px;
    font-family:Arial, Helvetica, sans-serif;
    padding:5px;
    color:#000000;
    width:270px;
}
.Input_Text_Int{
    width:40px;
    margin-bottom:10px;
    vertical-align:middle;
    padding-right:10px;
}
.Input_Text_Short
{
    width:100px;
    margin-bottom:10px;
    vertical-align:middle;
    padding-right:10px;
}
.Input_Text_Med
{
    width:175px;
    margin-bottom:10px;
    vertical-align:middle;
    padding-right:10px;
}
.Input_Text_Long
{
    width:250px;
    margin-bottom:10px;
    vertical-align:middle;
    padding-right:10px;
}
validateGridView
{
    background: url(../images/wrongIconGV.png) left 5px no-repeat;
    float: left;
    font-family: Arial, Helvetica, sans-serif;
    color: #FF5B5B;
    font-size:8px;
} 
```

模板字段正在应用 Input_Text_Int 设置，而不是 validateGridView 设置。谁能帮我解决这个问题，以便验证按照 CSS 中指定的格式进行格式化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:36:06.660

```
CssClass="validateGridView" 
```

这是一门课，所以我认为你必须像这样在你的 CSS 中添加一个点

```
.validateGridView
{
    background: url(../images/wrongIconGV.png) left 5px no-repeat;
    float: left;
    font-family: Arial, Helvetica, sans-serif;
    color: #FF5B5B;
    font-size:8px;
} 
```

# asp.net - 在 Sitecore 页面编辑器模式下禁用占位符边框

> ID：12795899
> 
> 赞同：1
> 
> 时间：2012-10-09T08:31:03.950
> 
> 标签：asp.net, sitecore, page-editor

我正在使用 Sitecore CMS 占位符将控件插入到我们的布局中。

```
<sc:Placeholder ID="plhContentPage" Key="content-page" runat="server"  /> 
```

但是当页面处于编辑模式时，它会导致此占位符之外的边框（参见屏幕截图）。

![在此处输入图像描述](../Images/d1def0e8c095b8f43a51642a0dba8df2.png)

这会导致与我们的页面相关的各种工件。

有没有办法在页面编辑器模式下禁用此边框，因为它们对我们的用户没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:41:48.273

您需要在页面编辑器的“查看”选项卡中取消勾选“控件”复选框。

![示例截图](../Images/65c7d4dbad2e929b78728e5c2864273e.png)

如果您需要编辑页面编辑器使用的 CSS 样式，则可以查看`webedit.css`应该位于网站根目录中的样式。

# microsoft-metro - 在 Metro Style App 的快照视图中打开文件选择器

> ID：12795909
> 
> 赞同：1
> 
> 时间：2012-10-09T08:31:43.280
> 
> 标签：microsoft-metro, filepicker

当我尝试在 Metro Style App 的快照视图中打开文件选择器时，出现异常并显示异常对话框。如何解决这个问题？有什么好主意吗？我希望我的应用程序即使在快照视图中也能正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:53:58.670

在打开文件选择器之前，您必须尝试离开捕捉模式。

这是我使用的代码：

```
var ready = true;
if (ApplicationView.Value == ApplicationViewState.Snapped)
    ready = ApplicationView.TryUnsnap();
if (!ready)
    return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:05:08.053

msdn 上可用的 SDK 示例使用以下代码段

```
// FilePicker APIs will not work if the application is in a snapped state.
// If an app wants to show a FilePicker while snapped, it must attempt to unsnap first
bool unsnapped = ((ApplicationView::Value != ApplicationViewState::Snapped) || ApplicationView::TryUnsnap());
if (!unsnapped)
{
    // Unsnapping failed
} 
```

# php - 如果我有一个 不是 ，我需要使用 mysql_real_escape_string 吗？

> ID：12795913
> 
> 赞同：2
> 
> 时间：2012-10-09T08:32:00.720
> 
> 标签：php, mysql

如果我有一个搜索输入而不是帐户/密码输入，我需要使用 mysql_real_escape_string 吗？
可能是sql注入？？$sql 只选择限制行的位置

```
<input type="text" name="search">

include"set.php";
$search=$_POST["search"];
if(strlen($search)) >= $min_length){
    $sql="select * from $tbl where subject or content like '%search%';";
    ..  
} 
```

（mysql：主题和内容都是'文本'类型）

如果我需要使用，我试试这个但不起作用。

```
include"set.php";
$search=mysql_real_escape_string($_POST["search"]);
if(strlen($search)) >= $min_length){
    $sql="select * from $tbl where subject or content like '%search%';";
    ..
    if(mysql_num_rows($query)>0){
        while ($list= mysql_fetch_array($query)){
            $subject=$list[subject];
            $content=$list[content];
            $...=$list[...];
            print "subject: $subject, ....";
        }
    }
    else{
         print "no results";
    }
}
else{
print "minimum length is". $min_length;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:32:53.390

您需要使用准备好的语句而不是转义（始终是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:33:41.513

`$_POST`A. 变量名在 PHP 中不应该`$_post`区分大小写

B.[弃用](http://www.php.net/manual/en/mysqli.real-escape-string.php)`mysql_**`mysqli_real_escape_string代替

来自 PHP 文档

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

C. 最好设计一个搜索表单，`$_GET`以便可以轻松保存 URL

例子

```
$search = filter_var($_GET["search"], FILTER_SANITIZE_STRING , FILTER_FLAG_STRIP_LOW | FILTER_FLAG_STRIP_HIGH);
if($search && strlen($search) > 3)
{
    $search = mysqli_real_escape_string($link, $search);
    $sql = sprintf("SSELECT * FROM %s where subject or content like '%s';",$tbl,"%s" . $search ."%s");
} 
```

D. 你永远不会相信用户输入，并且总是验证和过滤

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:33:46.367

你需要`$_POST`和`$search`：

```
$search=mysql_real_escape_string($_POST["search"]); 
```

和

```
$sql="select * from $tbl where subject or content like '%".$search."%';"; 
```

是的，每次你应该逃避用户的任何输入，无论如何。

# google-app-engine - JDO：尝试分离对象时出现异常

> ID：12795918
> 
> 赞同：1
> 
> 时间：2012-10-09T08:32:11.583
> 
> 标签：google-app-engine, jdo, datanucleus

我试图在谷歌应用引擎中使用数据存储。我能够使对象持久化并可以通过 id 检索它。但我无法查询。

这是我的实体：

```
package my.company.domain;

import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

@PersistenceCapable(detachable="true")
public class User {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    long key;   

    @Persistent
    private String name;

    @Persistent
    private String password;

    @Persistent
    private boolean adminPrivileges;

//getters & setters
} 
```

我的单元测试：

```
public void persistAndFindUserTest(){

        User user = new User();
        user.setName(johnDoe");
        user.setPassword("password");

        UserService userService = new DefaultUserService();
        user = userService.createUserInDatabase(user);

        User userFromPersistence = userService.getUserById(user.getKey());
        Assert.assertEquals(user.getName(), userFromPersistence.getName());

        Assert.assertNotNull(userService.findUserByName("johnDoe"));
} 
```

findUserByName 的定义如下：

```
public List<User> findUserByEmail(String email){
        PersistenceManager persistenceManager = PMF.get()
                .getPersistenceManager();

        Query q = persistenceManager.newQuery(User.class);
        q.setFilter("email == emailParam");
        q.declareParameters("String emailParam");
    q.setUnique(false);

        List<User> results = null;
        try {
            results = (List<User>) q.execute(email);
        } finally {
            results = (List<User>)persistenceManager.detachCopyAll(results);
            q.closeAll();
        }
        return results;
    } 
```

发生以下异常（第 116 行是我尝试分离结果列表的位置）：

```
java.lang.NullPointerException
    at com.google.appengine.datanucleus.query.QueryEntityPKFetchFieldManager.fetchLongField(QueryEntityPKFetchFieldManager.java:74)
    at org.datanucleus.identity.IdentityUtils.getApplicationIdentityForResultSetRow(IdentityUtils.java:101)    
    at com.google.appengine.datanucleus.EntityUtils.entityToPojo(EntityUtils.java:1009)
    at com.google.appengine.datanucleus.query.DatastoreQuery$2.apply(DatastoreQuery.java:227)
    at com.google.appengine.datanucleus.query.DatastoreQuery$2.apply(DatastoreQuery.java:224)
    at com.google.appengine.datanucleus.query.LazyResult.resolveNext(LazyResult.java:96)
    at com.google.appengine.datanucleus.query.LazyResult$LazyAbstractListIterator.computeNext(LazyResult.java:229)
    at com.google.appengine.datanucleus.query.AbstractIterator.tryToComputeNext(AbstractIterator.java:131)
    at com.google.appengine.datanucleus.query.AbstractIterator.hasNext(AbstractIterator.java:126)
    at com.google.appengine.datanucleus.query.LazyResult$AbstractListIterator.hasNext(LazyResult.java:183)
    at org.datanucleus.api.jdo.JDOPersistenceManager.detachCopyAll(JDOPersistenceManager.java:1213)
    at ch.mttb.clientmanagement.service.impl.DefaultUserService.findUserByEmail(DefaultUserService.java:116)
    at ch.mttb.clientmanagement.service.test.UserServiceTest.persistUserTest(UserServiceTest.java:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我使用来自 GAE SDK 1.7.2 的 jar，datanucleus jar 如下：

datanucleus-api-jdo-3.1.0-m3.jar datanucleus-api-jpa-3.1.0-m3.jar datanucleus-appengine-2.1.0-final.jar datanucleus-core3.1.0-m5.jar

我的 enhancer.log 文件仍然是空的。我将 Logging 配置如下：将 log4j.properites 和 WEB-INF 将 log4j-1.2.17.jar 放入构建路径

log4j.properties：

```
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d{HH:mm:ss,SSS} %-5p [%c] - %m%n

log4j.category.DataNucleus.JDO=WARN, A1
log4j.category.DataNucleus.Persistence=WARN, A1
log4j.category.DataNucleus.Cache=WARN, A1
log4j.category.DataNucleus.MetaData=WARN, A1
log4j.category.DataNucleus.General=WARN, A1
log4j.category.DataNucleus.Utility=WARN, A1
log4j.category.DataNucleus.Transaction=WARN, A1
log4j.category.DataNucleus.Datastore=WARN, A1
log4j.category.DataNucleus.ClassLoading=WARN, A1
log4j.category.DataNucleus.Plugin=WARN, A1
log4j.category.DataNucleus.ValueGeneration=WARN, A1
log4j.category.DataNucleus.Enhancer=WARN, A1
log4j.category.DataNucleus.SchemaTool=WARN, A1 
```

我正在使用日食朱诺。

运行 junit 测试时的日志输出：

```
18:3811,450 DEBUG [DataNucleus.Plugin] - Plugin Registry "org.datanucleus.plugin.EclipsePluginRegistry" not found. Falling back to DataNucleus registry. Reason : Class "org.eclipse.core.runtime.RegistryFactory" was not found in the CLASSPATH. Please check your specification and your CLASSPATH..
18:3811,452 DEBUG [DataNucleus.Plugin] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
18:3811,464 DEBUG [DataNucleus.Plugin] - Registering bundle org.datanucleus.api.jpa version 3.1.0.m3 at URL file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jpa-3.1.0-m3.jar.
18:3811,471 DEBUG [DataNucleus.Plugin] - Loading extension points from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jpa-3.1.0-m3.jar!/plugin.xml.
18:3811,472 DEBUG [DataNucleus.Plugin] - Loading extensions from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jpa-3.1.0-m3.jar!/plugin.xml.
18:3811,476 DEBUG [DataNucleus.Plugin] - Registering bundle org.datanucleus version 3.1.0.m5 at URL file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-core-3.1.0-m5.jar.
18:3811,506 DEBUG [DataNucleus.Plugin] - Loading extension points from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-core-3.1.0-m5.jar!/plugin.xml.
18:3811,535 DEBUG [DataNucleus.Plugin] - Loading extensions from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-core-3.1.0-m5.jar!/plugin.xml.
18:3811,540 DEBUG [DataNucleus.Plugin] - Registering bundle com.google.appengine.datanucleus version 2.1.0 at URL file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-appengine-2.1.0-final.jar.
18:3811,549 DEBUG [DataNucleus.Plugin] - Loading extension points from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-appengine-2.1.0-final.jar!/plugin.xml.
18:3811,554 DEBUG [DataNucleus.Plugin] - Loading extensions from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-appengine-2.1.0-final.jar!/plugin.xml.
18:3811,558 DEBUG [DataNucleus.Plugin] - Registering bundle org.datanucleus.api.jdo version 3.1.0.m3 at URL file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jdo-3.1.0-m3.jar.
18:3811,564 DEBUG [DataNucleus.Plugin] - Loading extension points from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jdo-3.1.0-m3.jar!/plugin.xml.
18:3811,567 DEBUG [DataNucleus.Plugin] - Loading extensions from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jdo-3.1.0-m3.jar!/plugin.xml.
18:3811,587 INFO  [DataNucleus.Persistence] - Property datanucleus.appengine.singletonPMFForName unknown - will be ignored
18:3811,587 INFO  [DataNucleus.Persistence] - Property datanucleus.appengine.autoCreateDatastoreTxns unknown - will be ignored
18:3811,602 DEBUG [DataNucleus.Persistence] - Java types support initialising ...
18:3811,603 DEBUG [DataNucleus.Persistence] - Java type [B (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [C (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [D (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [F (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [I (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [J (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [S (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [Z (persistent=true, DFG=true, embedded=true)
18:3811,605 DEBUG [DataNucleus.Persistence] - Java type [Ljava.lang.Boolean; (persistent=true, DFG=true, embedded=true)

same for many types

18:3811,651 DEBUG [DataNucleus.Persistence] - Java type [Lcom.google.appengine.api.users.User; (persistent=true, DFG=true, embedded=true)

same for typed Collections, Lists and Sets

18:3811,659 DEBUG [DataNucleus.Persistence] - Java types support loaded
18:3811,659 DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
18:3811,660 DEBUG [DataNucleus.Persistence] - Added converter for java.math.BigDecimal<->java.lang.String using org.datanucleus.store.types.converters.BigDecimalStringConverter

lot more converters added...

18:3811,667 DEBUG [DataNucleus.Persistence] - Added converter for java.util.UUID<->java.lang.String using org.datanucleus.store.types.converters.UUIDStringConverter
18:3811,667 DEBUG [DataNucleus.Persistence] - TypeConverter for javax.time.calendar.LocalDate<->java.lang.String ignored since java type not present in CLASSPATH
18:3811,668 DEBUG [DataNucleus.Persistence] - TypeConverter for javax.time.calendar.LocalTime<->java.lang.String ignored since java type not present in CLASSPATH
18:3811,669 DEBUG [DataNucleus.Persistence] - TypeConverter for javax.time.calendar.LocalTime<->java.lang.Long ignored since java type not present in CLASSPATH
18:3811,669 DEBUG [DataNucleus.Persistence] - TypeConverter for javax.time.calendar.LocalDateTime<->java.lang.String ignored since java type not present in CLASSPATH
18:3811,669 DEBUG [DataNucleus.Persistence] - Type converter support loaded
18:3811,670 DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=true
18:3811,670 DEBUG [DataNucleus.MetaData] - Registering listener for metadata initialisation
18:3811,674 DEBUG [DataNucleus.MetaData] - Listener found initialisation for persistable class my.company.domain.User
18:3811,676 DEBUG [DataNucleus.MetaData] - MetaData of type "jdo" for class "my.company.domain.User" NOT found at /META-INF/package.jdo

same for many different locations

18:3811,724 DEBUG [DataNucleus.MetaData] - Class "my.company.domain.User" has been specified with JDO annotations so using those.
18:3811,743 DEBUG [DataNucleus.MetaData] - Populating Meta-Data for class my.company.domain.User.
18:3811,743 DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "my.company.domain.User" NOT found at /META-INF/package.orm

same for many different locations

18:3811,755 DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
18:3811,772 DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "appengine"
18:3811,773 DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "appengine-nontx"
18:3811,804 DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
18:3811,805 DEBUG [DataNucleus.Datastore] - StoreManager : "appengine" (com.google.appengine.datanucleus.DatastoreManager)
18:3811,805 DEBUG [DataNucleus.Datastore] - AutoStart : mechanism=None, mode=Quiet
18:3811,805 DEBUG [DataNucleus.Datastore] - Datastore : read-write
18:3811,805 DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(None), Validate(None)
18:3811,805 DEBUG [DataNucleus.Datastore] - Query Languages : [JDOQL, JPQL]
18:3811,805 DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
18:3811,805 DEBUG [DataNucleus.Datastore] - ===========================================================
18:3811,805 DEBUG [DataNucleus.Datastore] - StorageVersion : READ_OWNED_CHILD_KEYS_FROM_PARENTS
18:3811,805 DEBUG [DataNucleus.Datastore] - Default Relation Mode : owned
18:3811,805 DEBUG [DataNucleus.Datastore] - ===========================================================
18:3811,819 DEBUG [DataNucleus.Datastore] - StoreManager now created
18:3811,819 DEBUG [DataNucleus.Persistence] - ================= Persistence Configuration ===============
18:3811,819 DEBUG [DataNucleus.Persistence] - DataNucleus Persistence Factory - Vendor: "DataNucleus"  Version: "3.1.0.m5"
18:3811,819 DEBUG [DataNucleus.Persistence] - DataNucleus Persistence Factory initialised for datastore URL="appengine" driver="" userName=""
18:3811,819 DEBUG [DataNucleus.Persistence] - JDK : 1.7.0_05 on Windows 7
18:3811,819 DEBUG [DataNucleus.Persistence] - Persistence API : JDO
18:3811,819 DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
18:3811,820 DEBUG [DataNucleus.Persistence] - Standard Options : pm-singlethreaded, retain-values, nontransactional-read, nontransactional-write, serverTimeZone=UTC
18:3811,820 DEBUG [DataNucleus.Persistence] - Persistence Options : reachability-at-commit managed-relations(checked) deletion-policy=JDO2
18:3811,820 DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL mode=datastore isolation=read-committed
18:3811,820 DEBUG [DataNucleus.Persistence] - Value Generation : txn-isolation=read-committed connection=New
18:3811,820 DEBUG [DataNucleus.Persistence] - ClassLoading : jdo
18:3811,820 DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
18:3811,820 DEBUG [DataNucleus.Persistence] - ===========================================================
18:3811,823 DEBUG [DataNucleus.Cache] - Level 2 Cache of type "soft" initialised
18:3811,849 DEBUG [DataNucleus.Persistence] - Implementation creator not configured. Due to that, support for 'persistent interfaces' ("PersistenceManager.newInstance()") was disabled!
18:3811,851 DEBUG [DataNucleus.Cache] - Level 1 Cache of type "soft" initialised
18:3811,855 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@3e5b3b80" opened for datastore "com.google.appengine.datanucleus.DatastoreManager@579f707b" with txn="org.datanucleus.TransactionImpl@2491c82e"
18:3811,859 DEBUG [DataNucleus.MetaData] - Initialising Meta-Data for class my.company.domain.User.
18:3811,860 DEBUG [DataNucleus.Persistence] - Making object persistent : "my.company.domain.User@78871dc5"
18:3811,882 INFO  [DataNucleus.MetaData] - Performing appengine-specific metadata validation for my.company.domain.User
18:3811,883 INFO  [DataNucleus.MetaData] - Finished performing appengine-specific metadata validation for my.company.domain.User
18:3811,904 DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : my.company.domain.User [Table : my.company.domain.User, InheritanceStrategy : new-table]
18:3811,918 DEBUG [DataNucleus.Connection] - Created ManagedConnection using DatastoreService = com.google.appengine.api.datastore.DatastoreServiceImpl@79e479a3
18:3811,919 DEBUG [DataNucleus.Connection] - Connection added to the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@7303d690 for key=org.datanucleus.ObjectManagerImpl@3e5b3b80 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3811,921 DEBUG [DataNucleus.Datastore.Native] - Putting entity of kind User with key User(no-id-yet) as {tenantId[0], password[password], name[johnDoe], adminPrivileges[false], key[0], }
Okt 11, 2012 6:38:11 PM com.google.appengine.api.datastore.dev.LocalDatastoreService init
INFO: Local Datastore initialized: 
    Type: Master/Slave
    Storage: In-memory
18:3812,064 DEBUG [DataNucleus.Cache] - Object "my.company.domain.User@78871dc5" (id="my.company.domain.User:1") added to Level 1 cache (loadedFlags="[YYYYY]")
18:3812,064 DEBUG [DataNucleus.Connection] - Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@7303d690 for key=org.datanucleus.ObjectManagerImpl@3e5b3b80 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,064 DEBUG [DataNucleus.Persistence] - ObjectManager.internalFlush() process started using ordered flush - 1 dirty objects
18:3812,066 DEBUG [DataNucleus.Cache] - Query Cache of type "org.datanucleus.query.cache.SoftQueryCompilationCache" initialised
18:3812,067 DEBUG [DataNucleus.Cache] - Query Cache of type "org.datanucleus.store.query.cache.SoftQueryDatastoreCompilationCache" initialised
18:3812,068 DEBUG [DataNucleus.Cache] - Query Cache of type "org.datanucleus.store.query.cache.SoftQueryResultsCache" initialised
18:3812,068 DEBUG [DataNucleus.Persistence] - ObjectManager.internalFlush() process finished
18:3812,070 DEBUG [DataNucleus.Cache] - Object "my.company.domain.User@78871dc5" (id="1") added to Level 2 cache (fields="[0, 1, 2, 3, 4]", version="")
18:3812,070 DEBUG [DataNucleus.Lifecycle] - Object "my.company.domain.User@78871dc5" (id="my.company.domain.User:1") has a lifecycle change : "P_NEW"->"P_NONTRANS"
18:3812,070 DEBUG [DataNucleus.Transaction] - Object "my.company.domain.User@78871dc5" (id="my.company.domain.User:1") being evicted from transactional cache
18:3812,071 DEBUG [DataNucleus.Persistence] - Detaching copy of object : "my.company.domain.User@78871dc5" (depth=0) - will be "my.company.domain.User@43ae24e3"
18:3812,073 DEBUG [DataNucleus.Connection] - Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@7303d690 for key=org.datanucleus.ObjectManagerImpl@3e5b3b80 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee] but owner object closing so closing connection
18:3812,073 DEBUG [DataNucleus.Connection] - Connection removed from the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@7303d690 for key=org.datanucleus.ObjectManagerImpl@3e5b3b80 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,073 DEBUG [DataNucleus.Persistence] - Disconnecting my.company.domain.User@78871dc5 from StateManager[pc=my.company.domain.User@78871dc5, lifecycle=P_NONTRANS]
18:3812,073 DEBUG [DataNucleus.Cache] - Object with id="my.company.domain.User:1" being removed from Level 1 cache [current cache size = 1]
18:3812,073 DEBUG [DataNucleus.Cache] - Level 1 Cache cleared
18:3812,074 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@3e5b3b80" closed
18:3812,075 DEBUG [DataNucleus.Cache] - Level 1 Cache of type "soft" initialised
18:3812,075 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@1f6aa236" opened for datastore "com.google.appengine.datanucleus.DatastoreManager@579f707b" with txn="org.datanucleus.TransactionImpl@11bf9757"
18:3812,077 DEBUG [DataNucleus.Cache] - Object with id "my.company.domain.User:1" not found in Level 1 cache [cache size = 0]
18:3812,077 DEBUG [DataNucleus.Cache] - Object "my.company.domain.User@6ccc45d2" (id="my.company.domain.User:1") added to Level 1 cache (loadedFlags="[NNYNN]")
18:3812,079 DEBUG [DataNucleus.Cache] - Object with id="my.company.domain.User:1" taken from Level 2 cache (fields="[0, 1, 2, 3, 4]", version="") - represented as "my.company.domain.User@6ccc45d2"
18:3812,079 DEBUG [DataNucleus.Lifecycle] - Object "my.company.domain.User@6ccc45d2" (id="my.company.domain.User:1") has a lifecycle change : "P_CLEAN"->"P_NONTRANS"
18:3812,079 DEBUG [DataNucleus.Transaction] - Object "my.company.domain.User@6ccc45d2" (id="my.company.domain.User:1") being evicted from transactional cache
18:3812,079 DEBUG [DataNucleus.Transaction] - Object "my.company.domain.User@6ccc45d2" (id="my.company.domain.User:1") is not transactional
18:3812,079 DEBUG [DataNucleus.Connection] - Created ManagedConnection using DatastoreService = com.google.appengine.api.datastore.DatastoreServiceImpl@18d1287b
18:3812,079 DEBUG [DataNucleus.Connection] - Connection added to the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@4bb8aff7 for key=org.datanucleus.ObjectManagerImpl@1f6aa236 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,080 DEBUG [DataNucleus.Datastore.Native] - Getting entity of kind User with key User(1)
18:3812,088 DEBUG [DataNucleus.Persistence] - Detaching copy of object : "my.company.domain.User@6ccc45d2" (depth=0) - will be "my.company.domain.User@13997783"
18:3812,088 DEBUG [DataNucleus.Connection] - Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@4bb8aff7 for key=org.datanucleus.ObjectManagerImpl@1f6aa236 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee] but owner object closing so closing connection
18:3812,088 DEBUG [DataNucleus.Connection] - Connection removed from the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@4bb8aff7 for key=org.datanucleus.ObjectManagerImpl@1f6aa236 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,088 DEBUG [DataNucleus.Persistence] - Disconnecting my.company.domain.User@6ccc45d2 from StateManager[pc=my.company.domain.User@6ccc45d2, lifecycle=P_NONTRANS]
18:3812,088 DEBUG [DataNucleus.Cache] - Object with id="my.company.domain.User:1" being removed from Level 1 cache [current cache size = 1]
18:3812,088 DEBUG [DataNucleus.Cache] - Level 1 Cache cleared
18:3812,089 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@1f6aa236" closed
18:3812,090 DEBUG [DataNucleus.Cache] - Level 1 Cache of type "soft" initialised
18:3812,090 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@5244c8cc" opened for datastore "com.google.appengine.datanucleus.DatastoreManager@579f707b" with txn="org.datanucleus.TransactionImpl@21daf346"
18:3812,107 DEBUG [DataNucleus.Query] - JDOQL Query : Compiling "SELECT UNIQUE FROM my.company.domain.User WHERE name == nameParam PARAMETERS String nameParam"
18:3812,115 DEBUG [DataNucleus.General] - Class String was resolved to be java.lang.String. It wasnt defined fully-qualified so had to be looked up; you can avoid the lookup (and improve performance) by fully-qualifying the class in the query.
18:3812,122 DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time = 15 ms
18:3812,123 DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{name}  =  ParameterExpression{nameParam}}]
  [symbols: nameParam type=java.lang.String, this type=my.company.domain.User]
18:3812,123 DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT UNIQUE FROM my.company.domain.User WHERE name == nameParam PARAMETERS String nameParam" ...
18:3812,125 DEBUG [DataNucleus.Query] - Query compiled as : Kind=my.company.domain.User Filter : name=johnDoe
18:3812,130 DEBUG [DataNucleus.Datastore.Native] - Executing query in datastore for SELECT UNIQUE FROM my.company.domain.User WHERE name == nameParam PARAMETERS String nameParam
18:3812,146 DEBUG [DataNucleus.Connection] - Created ManagedConnection using DatastoreService = com.google.appengine.api.datastore.DatastoreServiceImpl@3e36cb
18:3812,146 DEBUG [DataNucleus.Connection] - Connection added to the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@747f498c for key=org.datanucleus.ObjectManagerImpl@5244c8cc in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,146 DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 23 ms 
```

（我删除了几个重复的行）

亲切的问候，迈克尔

# c# - 在 VisualStudio 2012 中运行到光标处

> ID：12795919
> 
> 赞同：1
> 
> 时间：2012-10-09T08:32:12.877
> 
> 标签：c#, visual-studio-2010, debugging

当我在 C# 中开发时，我在 VS 2012 中看不到 Run To Cursor。我检查了工具栏和调试菜单，在这两个地方都没有这样的条目。我在哪里可以找到这个选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:37:07.087

您仍然可以使用键盘快捷键 Ctrl+F10。否则，您可以右键单击要运行的行并选择运行到光标。

您可以通过在“调试”工具栏上选择“添加”或“删除”按钮，然后选择“自定义”来将按钮添加到工具栏。

# java - 休眠：获取太多行

> ID：12795921
> 
> 赞同：5
> 
> 时间：2012-10-09T08:32:19.053
> 
> 标签：java, hibernate, persistence, criteria

我在使用 Hibernate 从数据库中获取行时遇到问题。当我只想得到一行时，我收到了 20 行。当我想从大约 1.5k 行的表中获取所有行时，我正好收到 15.2k 行。该表的实体类具有复合主键。

这是我获取所有行的代码：

```
Criteria criteria = getSession().createCriteria(type);
criteria.setCacheable(true).setCacheRegion(BaseEntity.PACKAGE);
criteria.list(); 
```

这是我的实体类：

```
@javax.persistence.Entity
@Table(name = "my_table")
public class My extends MyEntity<MyPK> {

    @EmbeddedId
    private MyPK id;

    @Column(name = "text", nullable = false)
    protected String text;

    @ManyToOne
    @JoinColumn(name = "property", nullable = false, insertable = false, updatable = false)
    protected Option option;

    @Override
    public MyPK getId() {
        return id;
    }

    @Override
    public void setId(MyPK id) {
        this.id = id;
    }

    //getters and setter
} 
```

这是`MyPK`类：

```
@Embeddable
public class MyPK implements Serializable {

   @Column(name = "qwerty")
   protected String qwerty;

   @Column(name = "property")
   protected String property;

   //constructors, getters and setters
} 
```

`MyEntity`类是带有`@MappedSuperclass`注释的抽象类。这是这个类头：

```
@MappedSuperclass
public abstract class MyEntity<T extends Serializable> 
```

我究竟做错了什么？有这个问题`EmbeddedId`吗？

**编辑#1** 我已经意识到这是问题所在：

```
@ManyToOne
@JoinColumn(name = "property", nullable = false, insertable = false, updatable = false)
protected Option option; 
```

此对象包含另一个表的外键。而这个另一个表引用了另一个。最后一张表有 10 行用于上一张表。结果我得到了行数量 * 10。问题可能出在我的实体中的 Hibernate 注释上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T22:23:10.790

看起来您可能正在某个地方急切地加入多对一关系。默认行为是为数据库返回的每一行获取一个实体。如果您不想更改急切获取，但确实想删除结果中的重复项，则需要使用此`ResultTransformer`：

```
criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:05:53.627

***@Embeddable*** 仅表示**MyPK**的列将是**My**类中的列。您的问题可能是 `@ManyToOne @JoinColumn(name = "property")` 因为它与 MyPK 中***的“属性”相同***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:54:11.497

您可以通过使用以下方法在条件上设置它来设置结果的最大数量：[setMaxResults(int maxResults)](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-3.1/api/org/hibernate/Criteria.html#setMaxResults%28int%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:44:22.870

主键类需要根据聚合值定义 equals() 和 hashCode()（`qwerty`这里是和`property`）。很可能在处理 ResultSet 时，Hibernate 不会将多行中的实体键视为相等。

从 JPA 2.0 规范的第 2.4 节（如果有帮助的话）：

> 主键类必须定义 equals 和 hashCode 方法。这些方法的值相等的语义必须与键映射到的数据库类型的数据库相等一致

# iphone - UIImagePickerController 如何进行从后置摄像头到前置摄像头的动画切换？

> ID：12795926
> 
> 赞同：21
> 
> 时间：2012-10-09T08:32:34.267
> 
> 标签：iphone, camera, uiimagepickercontroller, uiviewanimation

我一直在为`UIImagePickerController`控制器使用自定义叠加层，一切正常。我添加了按钮以通过 - 在前后摄像头之间切换 -

```
 - (IBAction)changeCamera:(id)sender {
if (self.imagePicker.cameraDevice == UIImagePickerControllerCameraDeviceRear) {
    self.imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceFront;
}
else {
    self.imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
}
} 
```

问题是，开关没有动画。我一直在使用基于 UIImagePicker 构建的苹果相机应用程序，并且切换正在发生动画。我该怎么做呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-12T04:57:57.490

我今天尝试这样做，并且能够使用以下代码使其工作：

```
[UIView transitionWithView:imagePickerController.view duration:1.0 options:UIViewAnimationOptionAllowAnimatedContent | UIViewAnimationOptionTransitionFlipFromLeft animations:^{
            imagePickerController.cameraDevice = UIImagePickerControllerCameraDeviceRear;
        } completion:NULL]; 
```

我希望这对遇到这个问题的人有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-08T07:26:56.590

如果有人需要，这是已接受答案的 Swift 代码：

```
UIView.transitionWithView(imagePickerController.view!, duration: 1.0, options: [.AllowAnimatedContent, .TransitionFlipFromLeft], animations: {() -> Void in
            imagePickerController.cameraDevice = .Rear
            }, completion: nil) 
```

谢谢巴勃罗！

# c# - 自动补全方法输入参数的快捷方式VS10

> ID：12795927
> 
> 赞同：0
> 
> 时间：2012-10-09T08:32:38.037
> 
> 标签：c#, visual-studio-2010

在**VisualStudio 2010**中，当我有这样的方法（使用 n 参数）时，我想创建一个键盘快捷键

```
public void MyMethod(type Parameter1, type Parameter2,..., type ParamenterN){    
      _object.MyMethod(type Parameter1, type Parameter2,..., type ParamenterN);
} 
```

而MyMethod是这样的

```
public void MyMethod(type Parameter1, type Parameter2,..., type ParamenterN){
     // Some code
} 
```

其中方法*名称/类型参数*与调用的方法相同，当我编写**_object.MyMethod** **(**

# java - Java btree 和空指针异常

> ID：12795930
> 
> 赞同：1
> 
> 时间：2012-10-09T08:32:49.987
> 
> 标签：java, nullpointerexception, binary-search-tree

我正在`NullPointerException`排队

```
GUI getText (tr.search(tr, txtFindf.getText().charAt(0),txtFindf.getText()) 
```

并与equals一致。我的程序是一个二叉树实现：

```
public class BTree {

private char value;
private BTree left;
private BTree right;
private String indent;  
private boolean cheak;
private String searchres; 

public BTree pushInTree (BTree node,char leter,String word) {
    if(node == null){
    node = new BTree();
    node.value = leter;
    node.indent = word;
    return node;
    }
    else 
        if (node.value > leter) node.left = pushInTree(node.left, leter, word);
        else node.right = pushInTree(node.right, leter, word);
    return node;
}
public void output(BTree node) {
    if (node == null) return;
    System.out.println(node.indent+"");
    if (node.left != null ) output(node.left);
    if (node.right != null ) output(node.right);
}
    public void output2(BTree node) {   
    System.out.print(node.value+" ");
    if (node.left != null ) output2(node.left);
    if (node.right != null ) output2(node.right);

}
public boolean search (BTree node,char leter,String word){
    if (node == null)return cheak;
    if (node.indent.equals(word)){ \\error here !!!
        cheak=true;
        searchres = node.indent;
    }
    if (node.value > leter) search(node.left, leter,word);
    else search(node.right, leter,word);
    return cheak;
}
public String result() {
    return searchres;   
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:34:51.980

当`if (node.indent.equals(word))`抛出一个空指针时，这意味着以下三件事之一：

```
1\. node is null
2\. indent is null
3\. word is null.

1\. cannot be (because you have a null check).
2\. possible
3\. possible 
```

所以你有两种可能。检查它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:36:58.867

找出哪个变量为空。

如果在没有帮助的情况下无法完成，请使用调试器并在未捕获的 NullPointerExceptions 上停止。

# eclipse - Checkstyle Eclipse 插件不起作用

> ID：12795935
> 
> 赞同：57
> 
> 时间：2012-10-09T08:32:58.027
> 
> 标签：eclipse, eclipse-plugin, checkstyle

我正在使用带有 Juno Eclipse 发行版的 eclipse checkstyle 插件。每当检查代码是否存在 checkstyle 错误时，我都会收到以下错误：

```
cannot initialize module TreeWalker - Unable to instantiate DoubleCheckedLocking 
```

有谁知道如何解决这个问题？是插件兼容性问题还是其他问题？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-09T11:12:37.710

DoubleCheckedLocking 检查已在 Checkstyle 5.6 中删除，必须从您的 Checkstyle 配置中手动删除。

另见： http: [//sourceforge.net/tracker/index.php ?func=detail&aid=3571442&group_id=29721&atid=397078](http://sourceforge.net/tracker/index.php?func=detail&aid=3571442&group_id=29721&atid=397078)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-24T22:22:18.047

打开 Checkstyle 首选项，创建您自己的 Check Configuration，进入您自己的 Check Configuration，找到 TreeWalker 模块，单击它，然后取消选中 DoubleCheckedLocking。就如此容易。

![在此处输入图像描述](../Images/96867444a0dfcbaaa9481a6e90579423.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T13:39:46.903

只需从 checkstyle 文件中注释或删除“DoubleCheckedLocking”即可

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:17:30.593

*   在 Eclipse 工作区下搜索文件**internal_config__*.xml**
*   从文件中删除以下行

    <module name="DoubleCheckedLocking"/>

*   重新加载工作区。

这将适用于任何产生错误消息“无法实例化”的已停产模块

# wso2 - 在 wso2 中创建一个虚拟目录

> ID：12795938
> 
> 赞同：0
> 
> 时间：2012-10-09T08:33:04.917
> 
> 标签：wso2, wso2carbon

我在 Linux 上使用 wso2 应用服务器 v4.0。

我有一个 webapp，我想有一个文件夹来存储文件。文件夹大小可能很大，应用程序也可以重新部署，因此目录不在 webapp 内。

如何在 wso2 中创建虚拟目录或类似目录？该目录可以是通用的，我的意思是它不需要与 webapp 示例相关：localhost:80/ **myDirectory** / 和 localhost:80/ **myApplication** / **myDirectory** / 对我来说是有效的方法。

在 tomcat 中有一些明确的说明，但我不知道如何在 wso2 中将其转换为 tomcat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:02:21.037

请在此处查看可用的示例[。](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/products/as/5.0.0/modules/samples/product/VirtualDirectoryListing)

# visual-studio-2012 - 如何防止 Visual Studio 2012 自动关闭预览文件？

> ID：12795944
> 
> 赞同：19
> 
> 时间：2012-10-09T08:33:28.707
> 
> 标签：visual-studio-2012

Visual Studio 2012 似乎有一个新功能，可以区分已显式打开以进行编辑的文件和已导航到的文件（这些“预览”文件默认位于环境顶部文件选项卡的右侧，并且具有默认选项卡颜色为紫色）。

虽然可以通过单击选项卡中的“保持打开”按钮保持预览文件打开，但我发现自己正在寻找我希望打开的文件，但在没有我直接输入的情况下被 Visual Studio 关闭。

是否有可用的设置自动将预览文件转换为打开文件（即完全跳过预览模式）？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-09T11:26:50.360

您可以关闭预览选项卡，转到工具/选项/环境/选项卡和 Windows 并取消选中“允许在预览选项卡中打开新文件”，如下图所示：

![在此处输入图像描述](../Images/aa5fd814e3de90e7c73695eb1c72b06d.png)

# php - 用于对称绑定的 WSF/PHP 错误颁发者序列号参考 2147483647

> ID：12795947
> 
> 赞同：2
> 
> 时间：2012-10-09T08:33:36.637
> 
> 标签：php, wso2, wsh

我在使用 WSF/PHP 使用 Metro Java Web 服务时遇到问题。该方案是使用对称密钥的示例用户名身份验证。Java 客户端工作正常，但 WSF/PHP 发送错误的序列号 2147483647。

**带有 php 客户端的框架：错误的序列号（32 位整数限制？）**

```
<xenc:EncryptedKey
                    xmlns:xenc="http://www.w3.org/2001/04/xmlenc#"
                    Id="EncKeyID-91d4e3a6-11e7-1e21-30a3">
                    <xenc:EncryptionMethod
                        Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p">
                        </xenc:EncryptionMethod>
                    <ds:KeyInfo
                        xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                        <wsse:SecurityTokenReference>
                            <ds:X509Data>
                                <ds:X509IssuerSerial>
                                    <ds:X509IssuerName>
                                        C=FR, ST=Some-State, O=kasstore/emailAddress=admin@kasstore.
                                        </ds:X509IssuerName>
                                    <ds:X509SerialNumber>
                                        2147483647
                                        </ds:X509SerialNumber>
                                    </ds:X509IssuerSerial> 
```

**带有java客户端的框架：好的序列号**

```
<xenc:EncryptedKey
                    xmlns:ns18="http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512"
                    xmlns:ns17="http://www.w3.org/2003/05/soap-envelope"
                    Id="_5002">
                    <xenc:EncryptionMethod
                        Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p"/>
                    <ds:KeyInfo
                        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                        xsi:type="KeyInfoType">
                        <wsse:SecurityTokenReference>
                            <ds:X509Data>
                                <ds:X509IssuerSerial>
                                    <ds:X509IssuerName>
                                        EMAILADDRESS=admin@kasstore.com, O=kasstore, ST=Some-State, 
                                        </ds:X509IssuerName>
                                    <ds:X509SerialNumber>
                                        18002984546126232115
                                        </ds:X509SerialNumber>
                                    </ds:X509IssuerSerial> 
```

**上下文：wsf/php 客户端：wso2 wsf php2.1.0 / Debian 32bits**

**上下文：wsf/php 客户端：Policy.xml**

```
<sp:SymmetricBinding>
                    <wsp:Policy>
                        <sp:ProtectionToken>
                                <wsp:Policy>
                                        <sp:X509Token sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/Never">
                                                <wsp:Policy>
                                                        <sp:WssX509V3Token10/>
                                                      <sp:RequireIssuerSerialReference/>
                                                    </wsp:Policy>
                                            </sp:X509Token>
                                    </wsp:Policy>
                            </sp:ProtectionToken>
                            <sp:Layout>
                                <wsp:Policy>
                                    <sp:Strict/>
                                </wsp:Policy>
                            </sp:Layout>
                            <sp:IncludeTimestamp/>
                            <sp:OnlySignEntireHeadersAndBody/>
                            <sp:AlgorithmSuite>
                                <wsp:Policy>
                                        <sp:Basic128/>
                                    </wsp:Policy>
                            </sp:AlgorithmSuite>
                    </wsp:Policy>
                </sp:SymmetricBinding>
                <sp:Wss11>
                    <wsp:Policy>
                        <sp:MustSupportRefIssuerSerial/>
                            <sp:MustSupportRefThumbprint/>
                            <sp:MustSupportRefEncryptedKey/>
                    </wsp:Policy> 
```

**上下文：wsf/php 客户端：client.php**

```
 private function callWebService()
    {
                // create ssecurity context
                $kasstoreServerFidelityCertificate = ws_get_cert_from_file("ksfidelity.pem");
                $kasstoreClientFidelityCertificate = ws_get_cert_from_file("ksfidelity.pem");
                if (is_null($kasstoreServerFidelityCertificate) or strlen($kasstoreServerFidelityCertificate)<1)
                {
                        error_log("Unknown certificate");
                        return;
                }
    $fidelityPolicyXml = file_get_contents("policy.xml", true);
    $fidelityPolicy = new WSPolicy($fidelityPolicyXml);
                $fidelitySecurityToken = new WSSecurityToken(array(
                "certificate" => $kasstoreClientFidelityCertificate,
                "receiverCertificate" => $kasstoreServerFidelityCertificate,
                "user" => "dummyuser@Anonymous",
            "password" => "dummypassword",
            "passwordType" => "Digest"
                ));
                try
                {
$reqPayloadString = <<<XML
<ns1:computeActions xmlns:ns1="http://ws.kasstore.com"><MyActionparams></MyActionpartams></ns1:computeActions>
XML;
$reqMessage = new WSMessage($reqPayloadString,
                                array("to" => "http://ws.kasstore.com/PosnFidelityWS/FidelityManagerPHPService",
                                "action" => "http://ws.kasstore.com/FidelityManagerPHPService/computeActionsRequest"));
 $client = new WSClient(array (
                        "policy" => $fidelityPolicy,
                        "securityToken" => $fidelitySecurityToken,
                        "useSOAP" => "1.1",
                        "CACert" => "./ksfidelity.pem",
                        "useWSA" => TRUE
                        ));
    $resMessage = $client->request($reqMessage); 
```

**证书：证书：**

```
Data:
    Version: 3 (0x2)
    Serial Number:
        f9:d7:73:0f:90:b3:7a:36
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=FR, ST=Some-State, O=kasstore/emailAddress=admin@kasstore.com
    Validity
        Not Before: Oct  8 08:48:05 2012 GMT
        Not After : Sep 21 08:48:05 2023 GMT
    Subject: C=FR, ST=Some-State, O=KasStore, OU=Kas'Fidelity, CN=KasStore Fidelity Service Certificate/emailAddress=admin@kasstore.com
    Subject Public Key Info: 
```

# c++ - 在具有动态路径 C++ 的文件夹中写入文件

> ID：12795954
> 
> 赞同：0
> 
> 时间：2012-10-09T08:33:58.507
> 
> 标签：c++, ubuntu, ofstream

我成功写入运行示例的文件夹中的文件：

```
// I run "test" executable file in "TestWrite File" folder
const char *path="/home/kingfisher/Desktop/TestWrite File/xml/kingfisher.txt";
std::ofstream file(path); //open in constructor
std::string data("data to write to file");
file << data; 
```

但是，如果我尝试使用动态路径： 编写`*path = "/xml/kingfisher.txt"`，它会出错（在`Windows`，它会很好）！我如何使用上面的动态路径（不是特定路径）编写？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:41:22.373

如果动态是指相对的，则需要去掉前导`/`，因为这使它成为绝对路径：

```
path = "xml/kingfisher.txt"; 
```

请注意，此文件与您当前的工作目录相关，因此您可能需要确保将其设置`/home/kingfisher/Desktop/TestWrite File`为才能正常工作。

如果动态，你的意思是*可变的，*你可以随时改变它：

```
const char *path = "/tmp/dummy";
:
path = "/home/.profile";          // Note path, NOT *path 
```

这`const`只是意味着您不允许更改指针*后面的数据。*您可以随意更改指针本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:37:58.650

```
*path = "/xml/kingfisher.txt" 
```

这是不正确的，因为它试图取消引用您`const char*`并修改内容。这是未定义的行为，因为数据是 const。

只需声明您的路径为 a`std::string`开始：

```
std::string path = "/home/kingfisher/Desktop/TestWrite File/xml/kingfisher.txt"; 
```

然后稍后您可以为 std 字符串分配您喜欢的任何其他值，它`operator=`会为您动态更改其内部结构：

```
path = "my/new/path"; 
```

你可以`ofstream`像以前一样使用它，如果你需要将它传递给一个需要`const char *`just pass的函数`path.c_str()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:42:13.217

不确定“动态路径”是什么意思；动态路径是动态读取的路径（因此可能在 中`std::string`）。

另一方面，您似乎混淆了绝对路径和相对路径。如果文件名以 a 开头`'/'`（在 Unix 下），或者以 a`'/'` 或 a开头，在 Windows 下`'\\'`可能在前面，它是绝对的；文件搜索将从文件系统的根目录开始（在 Windows 的情况下在指定的驱动器上）。在所有其他情况下，它是相对的；文件的搜索将从当前工作目录开始。在您的示例中， 和 都是绝对的。如果当前工作目录是，那么 应该找到第一个绝对路径名指定的文件。`"*d*:"``"/home/kingfisher/Desktop/TestWrite File/xml/kingfiger.txt"``"/xml/kingfisher.txt"``"/home/kingfisher/Desktop/TestWrite File"``"xml/kingfisher.txt"`

# ruby-on-rails - RSpec：如何测试调用了静态方法但阻止它实际运行？

> ID：12795955
> 
> 赞同：10
> 
> 时间：2012-10-09T08:34:03.810
> 
> 标签：ruby-on-rails, rspec

我有一个静态方法正在对远程服务器进行 HTTP POST。

我想测试是否在需要时使用正确的参数调用此方法，但我也想阻止它实际运行，因此它不会在测试时执行实际的 HTTP 请求。

我如何在全局范围内对该方法进行存根，这样我就不必在每个测试用例中都这样做以防止它实际运行？如果这样做，我如何为测试实际方法的特定测试用例取消存根？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T09:12:59.843

如果您只是想在所有规范中对方法进行存根，并在调用它时检查它是否接收到正确的参数（假设它们在每种情况下都是相同的），您可以`spec_helper`在`before(:each)`块中添加一个存根：

```
RSpec.configure do |config|
  ...
  config.before(:each) do
    SomeClass.stub(:some_static_method).with(...).and_return(...)
  end
  ...
end 
```

如果使用您指定的参数以外的任何参数调用存根，这将失败。请注意，您也可以`should_receive`按照@appneadiving 的建议使用，但您必须调用它`any_number_of_times`以确保如果您不调用它不会失败，这与使用存根基本相同（请参阅[此讨论](http://www.ruby-forum.com/topic/213055)） .

另一种方法是使用[webmock](https://github.com/bblimke/webmock) gem 来存根对给定 URL 的请求。使用这种方法，您不需要（必然）存根您的方法，您可以让它像往常一样运行，并且可以肯定的是，每当它尝试使用您指定的参数访问服务器时，它都会得到给定的响应。

要在整个规范中使用 webmock，您必须`spec_helper`像上面那样添加一行，调用该`stub_request`方法，例如：

```
stub_request(:any, "www.example.com").with(:query => { :a => "b"}).to_return(...) 
```

希望有帮助。

# spring - 如何在 Liferay 中部署 MessageBus？

> ID：12795957
> 
> 赞同：2
> 
> 时间：2012-10-09T08:34:05.180
> 
> 标签：spring, liferay, configuration-files, message-bus

写在 Liferay Documentation 6.1 关于使用消息总线，

> 消息总线的配置是使用以下文件完成的： WEB-INF/src/META-INF/messaging-spring.xml - 指定您的目的地、侦听器以及它们之间的映射 WEB-INF/web.xml - 保存一个列表插件的部署描述符。确保将 messinging-spring.xml 添加到此文件中的 Spring 配置列表中。

messing-spring.xml 如何在 web.xml 中列出？

我试过这个

```
<?xml version="1.0" encoding="UTF-8"?><web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5"> 
<listener>    
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>  </listener>             
<context-param><param-name>contextConfigLocation</param-name>          
     <param-value>/WEB-INF/classes/META-INF/messaging-spring.xml</param-value>       </context-param>
 </web-app> 
```

但是tomcat登录了

> org.apache.catalina.core.standardcontext start 严重错误 listenerstart

当我删除

```
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

tomcat 登录

> 容器 org.apache.catalina.core.ContainerBase.[Catalina].[localhost]。尚未开始

只想尝试消息总线，当使用发送消息时我无法调用侦听器

```
 Message message = new Message();        
message.put("slogan", "Procurement");        
MessageBusUtil.sendMessage("inkwell/slogan", message); 
```

我正在 Liferay 6.0.5 中开发 感谢您的帮助

# lisp - 这个 Lisp 代码是如何工作的？

> ID：12795962
> 
> 赞同：-3
> 
> 时间：2012-10-09T08:34:26.837
> 
> 标签：lisp, common-lisp

下面的这个函数检查列表中的数字。例如，这里它正在寻找 12。如果 12 存在，则返回`T`(true)，如果不存在，则返回 `NIL`。我试图理解语法，但这让我感到困惑。有没有人可以帮助并用简单的英语描述这段代码的作用？

```
1> (defun an (&rest n)
    (block nil
      (setq x (car n))
      (setq n (cdr n))
      (loop (< x 100)
      (setq n (cdr n))
      (if (eq x 2) (return (eq (car n) 12))) (setq x (1- x)))))
AN
2> (an 2 3 4 5 66 7)
NIL
3> (an 2 3 12 3 4 5)
T 
```

附加问题：它是如何`&rest`工作或做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:51:35.947

如果您使用的是 SLIME，您可以`M-x``slime-macroexpand-all`在该点位于块形式的最后一个括号上时执行此操作。你会得到这样的东西：

```
(BLOCK NIL
  (SETQ X (CAR N))                      ; save the first element in X, while declaring
                                        ; a special variable by that name
  (SETQ N (CDR N))                      ; set N to the second cons of the list
  (BLOCK NIL
    (TAGBODY
     #:G892
      (PROGN
       (< X 100)                        ; Useless, has no impact on your code
       (SETQ N (CDR N))                 ; set N to the third cons of the list
       (IF (EQ X 2)
           (RETURN-FROM NIL (EQ (CAR N) 12))) ; return from the innermost block NIL
                                        ; however, since there's no more code in the
                                        ; outermost block NIL, this will return from
                                        ; it too.
       (SETQ X (1- X)))                 ; decrement value in X. It may happen so by
                                        ; chance that, if initially X was larger than 2
                                        ; the above condition will trigger
      (GO #:G892)))) 
```

也许，如果你解释了你想要做什么，你会得到更好的运气，这个功能非常错误，以至于它在乞求这个问题。

# css - 设置相对于元素边缘的背景渐变位置？

> ID：12795964
> 
> 赞同：2
> 
> 时间：2012-10-09T08:34:35.187
> 
> 标签：css

我有一个 CSS 元素，它需要一个背景元素，从左边框开始一个像素，从上边框开始一个像素

并且从右边界结束一个像素，距离上边界两个像素

这是可行的吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:36:16.310

您可以使用 CSS 属性来执行此操作`background-position: 1px 1px;`

编辑：你也可以这样做`background-position: right top;`

或者你可以这样做

```
<div class="container">
    <div class="background"></div>
</div>

.container {
    position: relative;
}

.background {
    position: absolute;
    right: /*Whatever*/;
    z-index: -1;
} 
```

# java - 如何在 IDEA 中正确运行 maven web 项目？

> ID：12795965
> 
> 赞同：0
> 
> 时间：2012-10-09T08:34:35.217
> 
> 标签：java, maven, intellij-idea

我是使用 maven 和想法的新手。我通过了所有直观的步骤来运行 web 项目，但得到了 404 页面（如果我在 Idea 中用作简单的 web 项目，这个应用程序运行良好）。pom文件如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.home.myapp</groupId>
 <artifactId>MyApp</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>
  <name>MyApp</name>
  <url>http://maven.apache.org</url>
  <properties>
<spring.version>3.1.1.RELEASE</spring.version>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
  <dependencies>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency> 
    <groupId>org.springframework</groupId> 
    <artifactId>spring-webmvc</artifactId> 
    <version>${spring.version}</version> 
</dependency> 
<dependency>    
    <groupId>commons-logging</groupId>  
    <artifactId>commons-logging</artifactId>  
    <version>1.1.1</version>  
</dependency>
<dependency>    
    <groupId>commons-io</groupId>  
    <artifactId>commons-io</artifactId>  
    <version>2.3</version>  
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.4</version>
</dependency>
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
  </dependency>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency>
  </dependencies>
  <build>
  <pluginManagement>
  <plugins>
      <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>tomcat-maven-plugin</artifactId>
          <configuration>
                  <server>apache-tomcat-7.0.25</server>
                  <url>http://localhost:8080/manager</url>
                  <path>/</path>
              </configuration>
          </plugin>
      </plugins>
  </pluginManagement> 
```

你能告诉我我的错还是建议一篇我可以找到解释的文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:47:26.040

不太确定这个想法，但通常一个 web 项目将有包装类型的战争，而不是 jar。

还要研究 maven war 插件，这样你就知道要添加哪些文件以及要添加到哪些文件夹中。

您可以通过使用 maven 原型创建示例应用程序来研究这一点。然后使用一个工具来比较示例源和您自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:46:09.133

正如其他人提到的，你需要一个战争包装。可以肯定的是，使用 maven 原型开始您的项目，请参阅[http://maven.apache.org/guides/mini/guide-webapp.html](http://maven.apache.org/guides/mini/guide-webapp.html)

```
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-webapp -DarchetypeArtifactId=maven-archetype-webapp 
```

确保你可以建立一场战争：

```
mvn clean install 
```

现在在 IDEA 中导入你的项目：文件，新建项目，从外部模型导入项目，Maven，选择你的 pom.xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:00:19.820

如果您有 404，我想问题出在您尝试访问您的应用程序的 URL 上。

尽管如此，请检查您的工件和库的内容 (Ctrl+Shift+Alt+s)。另外，尝试将这样的 Maven 插件添加`maven-compiler-plugin`到`maven-war-plugin`您的`pom.xml`.

# mysql - Mysql 将巨大的 db 从 innodb 迁移到 ndbcluster 错误：表已满

> ID：12795967
> 
> 赞同：2
> 
> 时间：2012-10-09T08:34:40.173
> 
> 标签：mysql, innodb, cluster-computing

我正在尝试使用以下命令将旧数据库迁移到 mysql 集群（4 个数据节点）：

```
ALTER TABLE sample ENGINE=NDBCLUSTER 
```

但我收到以下错误：

```
The table '#sql-7ff3_3' is full 
```

此表中大约有 3 亿行。这是我的配置文件：

```
/mysql-cluster/config.ini
[NDBD DEFAULT]
NoOfReplicas=2
DataDir=/data/mysql-cluster/ndb/
BackupDataDir=/data/mysql-cluster/backup/
DataMemory=10G
IndexMemory=5G
TimeBetweenLocalCheckpoints=6
FragmentLogFileSize=256MB
NoOfFragmentLogFiles=50
MaxNoOfOrderedIndexes=8000
MaxNoOfConcurrentOperations=100000
MaxNoOfTables = 10000
RedoBuffer=128M
MaxNoOfAttributes=5000
MaxNoOfUniqueHashIndexes=1024

/etc/my.cnf
[mysqld]
basedir=/usr/local/mysql
datadir=/data/mysql-cluster/mysqld/
event_scheduler=on
default-storage-engine=ndbcluster
ndbcluster
ndb-connectstring=192.168.x.x,192.168.x.x
innodb_file_per_table
innodb_buffer_pool_size = 512MB
key_buffer = 512M
key_buffer_size = 512M
sort_buffer_size = 512M
table_cache = 1024
read_buffer_size = 512M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:38:32.120

您达到了临时表的限制，无论是 num_rows、磁盘空间还是表空间。

尝试将 'MAX_ROWS=1000000000' 添加到您的更改表中。

检查“tmpdir”是否指向有足够空间的磁盘。

然后查看'tmp_table_size'的值。 [http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_tmp_table_size](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_tmp_table_size) 如果不能进一步增加，请在 [http://dev.mysql.com/doc/中挖掘refman/5.5/en/table-size-limit.html](http://dev.mysql.com/doc/refman/5.5/en/table-size-limit.html)

最后，MySQL Cluster 表空间和日志文件组不是作为文件实现的。您是否使用 CREATE/ALTER TABLESPACE 分配了足够的空间？ [http://dev.mysql.com/doc/refman/5.5/en/mysql-cluster-disk-data-objects.html](http://dev.mysql.com/doc/refman/5.5/en/mysql-cluster-disk-data-objects.html)

# php - 使用 ext.data.store 上的新数据自动更新

> ID：12795974
> 
> 赞同：2
> 
> 时间：2012-10-09T08:34:55.850
> 
> 标签：php, javascript, jquery, ajax, extjs

我有这个 extjs 数据存储

```
 mystore= Ext.create('Ext.data.Store', {
        id: 'store_id',
        fields: ['label', 'value', 'id', 'type'],
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'url/to/controller',
            reader: {
                type: 'json',
                root: 'MyModel'
            }
        }
    }); 
```

是否可以使用 extjs 配置使该商店在某个时间间隔（例如 5 秒）自动发送新数据的 ajax 请求？

我想使用 extjs 可以提供的所有功能，以便我不使用 php 或其他 javascript。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T09:06:10.047

您可以使用[TaskManager](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.TaskManager)类来帮助执行重复性任务。

```
var task = {
    run: function() {
        mystore.load();
    },
    interval: 5000
}

// This will reload your store every 5 seconds
Ext.TaskManager.start(task);

// Call when you want to stop polling the server
Ext.TaskManager.stop(task); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T18:13:50.503

在我的网格代码中，我将函数放在下面并且它起作用了：

```
setInterval(function() // IN YOUR CASE, IT RELOADS EACH 5 SECONDS
{
    storeReload = Ext.getStore("YourStoreHere");
    storeReload.load();
}
,5000); 
```

我希望这有帮助！

# python - 在不使用任何 webapp/javascript 的情况下访问 facebook

> ID：12795976
> 
> 赞同：0
> 
> 时间：2012-10-09T08:35:04.030
> 
> 标签：python, facebook, facebook-graph-api

对于基于控制台的小型通知脚本，我想显示来自 facebook 的未读消息和通知计数。目前我坚持使用 Facebook API。显然，使用 OAuth2 和 Graph API，如果没有一些使用 javascript 左右的 webapp，就无法访​​问 Facebook。[无限会话密钥方式](https://stackoverflow.com/questions/5190346/facebook-api-and-python)似乎已被弃用，Facebook [for devices](https://developers.facebook.com/docs/authentication/devices/)方式尚未向公众开放。

有什么方法可以通过纯 python 脚本向 facebook 验证自己（并且，只有我！）？我可以访问一些 url 并获取一次性身份验证令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:46:34.170

无论您将应用分类为基于 Web 还是基于桌面，用户都需要使用 OAuth 进行身份验证。如果您愿意，可以使用调试控制台执行此操作。然后为了进行 API 调用，您只需要之后的 access_token。

无限会话密钥已被弃用，但您可以改用[长期会话](http://developers.facebook.com/roadmap/offline-access-removal/)。

# java - GridBagLayout - JFormattedTextFields 太少？

> ID：12795978
> 
> 赞同：0
> 
> 时间：2012-10-09T08:35:09.567
> 
> 标签：java, eclipse, swing, user-interface, gridbaglayout

我在 SWING 中编写一个 gui：

```
 JLabel tLabel1 = new JLabel("Name: ");
    JFormattedTextField tTextField1 = new JFormattedTextField();
    textBoxes.add(tTextField1);
    JLabel tLabel2 = new JLabel("Maximaler Preis: ");
    JFormattedTextField tTextField2 = new JFormattedTextField();
    textBoxes.add(tTextField2);

        GridBagLayout tLayout = new GridBagLayout();
        mainFrame.getContentPane().setLayout(tLayout);
//      tLayout).setAutoCreateGaps(true);
//      tLayout.setAutoCreateContainerGaps(true);

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        gbc.anchor = GridBagConstraints.WEST;

        mainFrame.add(new JLabel("Geben sie bitte die Kriterien für die Suche an:"), gbc);

        gbc.gridwidth = 1;
        gbc.gridy++;
        mainFrame.add(tLabel1, gbc);
        gbc.gridy++;
        mainFrame.add(tLabel2, gbc);
        gbc.gridy++;
        mainFrame.add(tLabel3, gbc);
        gbc.gridy++;
        mainFrame.add(tLabel4, gbc);

        gbc.gridx++;
        gbc.gridy = 1;
        mainFrame.add(tTextField1, gbc);
        gbc.gridy++;
        mainFrame.add(tTextField2, gbc);
        gbc.gridy++;
        mainFrame.add(tTextField3, gbc);    
        gbc.gridy++;
        mainFrame.add(tCombo, gbc);
        gbc.gridy++;
        mainFrame.add(searchButton, gbc);

        gbc.gridy++;
        gbc.gridx = 0;
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        gbc.fill = GridBagConstraints.HORIZONTAL;

        mainFrame.add(tTable, gbc); 
        mainFrame.setSize(800, 500);
        mainFrame.pack(); 
```

我的文本字段如下所示：

> |

如何在 GridBagLayout 中给它们一个宽度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:38:55.180

见[`JTextField.setColumns(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#setColumns%28int%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T08:39:44.747

您在这里有几个选择：

1.  设置 JFormattedTextField 的 columns 属性（这最终会影响文本字段的首选大小）
2.  通过更改 GridBagConstraint
    *   将 weightx 属性设置为大于 0 的值
    *   将填充属性设置为`HORIZONTAL`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T08:41:45.107

您需要在约束中为它们分配*权重。*权重决定了剩余空间的分配方式，如果您不对任何组件设置权重，那么它们都将获得最小尺寸，并且剩余空间将完全超出布局。

# jquery-ui - jQuery UI 对话框按钮不可见

> ID：12795981
> 
> 赞同：2
> 
> 时间：2012-10-09T08:35:20.833
> 
> 标签：jquery-ui, jquery-ui-dialog

具有以下代码：

```
$('#feedback_dialog_container').dialog({
        modal: true,
        closeOnEscape: false,
        title: "Title",
        height: 650,
        width: 600,
        buttons: [{
            text: "Send",
            click: function() {
                // ...
            }
        }]
}); 
```

该按钮在对话框中不可见。任何提示或提示，我错过了什么吗？

PS：我也从@palmplam 尝试了这个例子，也没有工作：

```
$('#feedback_dialog_container').dialog({
    modal: true,
    closeOnEscape: false,
    title: "Title",
    height: 650,
    width: 600,
    buttons: {"Send" : function() {
            // ...
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:41:04.420

尝试添加这样的按钮：

```
buttons : {text:function},{secondtext:secondfunction},... 
```

使用您的代码，它是这样的：

```
$('#feedback_dialog_container').dialog({
    modal: true,
    closeOnEscape: false,
    title: "Title",
    height: 650,
    width: 600,
    buttons: {"Send" : function() {
            // ...
        }
    }
}); 
```

或者您可以在对话框初始化后添加按钮，如下所示：

```
$('#feedback_dialog_container').dialog('option', 
                                       'buttons', 
                                       {"Send" : function() {
                                           // ...
                                       }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-03T05:06:47.527

你错过了这个'jquery-1.8.2.min.js'。只需将其添加到您的代码中即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:10:17.063

已经几个月了，你现在可能已经继续前进了，但是 FWIW：

我不是 jQuery UI 内部的专家，但我一直在努力解决按钮不显示的时间超过我愿意承认的问题，这是我从 1.8.23 升级到 1.10.0（然后回滚到 1.9.2，但问题仍然存在）。我相信我现在有一个线索。

您应该初始化对话框一次且仅一次。如果你想重复使用，那么你应该（1）初始化 autoOpen 设置为 false；当您想（重新）打开时，如果需要重置选项并调用“打开”；或（2）在您的对话框上调用“destroy”，以便您可以在再次需要时重新初始化它，而不会遇到麻烦。

所以，看起来我一直在做“错误”，但直到版本 > 1.8.23 才成功。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T09:56:49.910

```
$('#feedback_dialog_container').dialog({    
    height:auto,                                
    width:auto,
    modal:true,
    buttons:{"Send":send}//function call send
});
function send()  {
    //function code here
} 
```

# cherokee - 特定文件的切诺基访问日志

> ID：12795984
> 
> 赞同：1
> 
> 时间：2012-10-09T08:36:05.653
> 
> 标签：cherokee

**上下文：**我正在监视在 Cherokee 上运行的 APT 存储库镜像服务器。
**目标：**知道有多少计算机在它们的sources.list 中有镜像
**方法：**跟踪“dists/[..]/Release”的GET 请求
对于Debian Wheezy，这将是dists/wheezy/Release。

从一般访问日志中提取行是不可行的，镜像足以使访问日志在短短几天内增长到 2 GB。只是想知道有多少不同的 IP 使用 APT 镜像，而 Perl 正则表达式对我来说仍然很痛苦。

是否可以让 Cherokee 只记录与请求条件匹配的访问权限（以及如何）？

**后备解决方案：**什么样的重定向可以将“Release”GET 传递给 PHP 脚本（谁可以对 IP 地址进行 sha1 哈希并作为文件名放在文件夹中，很容易计数），然后谁重定向回实际的 Release 文件？（没有重定向循环，并且考虑到镜像 rsync 每次同步后谁必须重置它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T13:15:47.670

使用 cherokee-admin，您可以添加与“dists/[..]/Release”请求匹配的行为规则。然后转到“vServers/Behavior/Rule Management”并在“Security”选项卡上选中“Skip Logging”选项，禁用除您添加的规则之外的所有规则的日志记录。

> 什么样的重定向可以将“Release”GET 传递给 PHP 脚本（谁可以对 IP 地址进行 sha1 哈希并作为文件名放在文件夹中，很容易计数），然后谁重定向回实际的 Release 文件？

PHP 可以发送 X-Sendfile（或 X-Accel-Redirect）标头，告诉 Cherokee 发送 Release 文件。

# c++ - 为什么实例化数组比 glDrawElement 慢？

> ID：12795986
> 
> 赞同：4
> 
> 时间：2012-10-09T08:36:13.640
> 
> 标签：c++, opengl, glsl

在我的程序中，我想绘制许多球体。首先，我为球体创建顶点、索引，然后将它们绑定到 voa/vbo/ibo。之后，我创建了 1000 个随机模型矩阵。现在我有两种方法来绘制网格。

1.  只需通过 ModelMatrices 调用列表循环 1000 次`glDrawElements`。在 CPU 上计算矩阵 MVP 并像统一一样发送到着色器。
2.  将所有矩阵绑定到额外的 VBO 并将它们像“in”变量一样发送到着色器。然后用 调用一次`glDrawElementsInstanced`。

在测试程序中，我绘制了 1000 个球体（大约 2000 万个顶点）当我使用第一种方法时，我得到大约 27FPS，而第二种方法将性能降低到 19FPS。理论上第二种方法应该比第一种方法实现更好的性能。

这是代码。

*   将矩阵绑定到 VBO [http://pastebin.com/iX9tUWfY](http://pastebin.com/iX9tUWfY)
*   绘图[http://pastebin.com/FsSXcnqK](http://pastebin.com/FsSXcnqK) [http://pastebin.com/8WMrUiu1](http://pastebin.com/8WMrUiu1)
*   顶点着色器[http://pastebin.com/39m34PZk](http://pastebin.com/39m34PZk)

我认为瓶颈是顶点着色器中的这种乘法`(VP * ModelMatrix)`，因为它需要为每个（网格中的顶点）* 1000 完成。

什么可以升级，我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T14:45:22.900

实例化并不总是胜利。这是您必须分析的那种优化，看看它是否值得做。

一般来说，如果您要渲染大量实例（1000 相当多，但还不够。想想 10,000），其中包含适度数量的顶点（20,000 可能太多了。更多地查看 100-3000 或所以）。此外，您的每个实例的数据不必要地大；当您可以轻松使用向量和四元数时，您会使用矩阵。

实例化的目的是减少*CPU 开销*。特别是每次绘制调用的 CPU 开销和状态更改。总共有 2000 万个顶点，1000 次绘制调用和状态更改的 CPU 开销很有可能不是您最大的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T09:46:58.163

因为你有旋转不变的球体，你可以用一个简单的平移 vec3 替换你的矩阵（也许用 w = uniform scale ？）。我不确定它会改变什么，不过，你很少受 ALU 约束。但是 20M 的顶点是相当多的。

1000 draw call / frame 完全在 PC 可以处理的范围内（一般应该 < 3000 ），这解释了简单版本并不太慢的事实。

至于实例化的性能不佳，我真的不知道，但我怀疑这与你高达 20k 的顶点/网格有关。实例化是为相当小的网格设计的，所以 GPU 可能无法处理得很好。您可以尝试在关闭 Vsync 的情况下与较小的网格（200 个顶点）进行比较吗？我很好奇。

# python - Python、Django 和标准输出的奇怪问题

> ID：12795987
> 
> 赞同：1
> 
> 时间：2012-10-09T08:36:14.960
> 
> 标签：python, mysql, django, linux, unix

我想知道是否可以对下面粘贴的代码获得一些帮助。现在它运行并完成了 ping 任务，但是它遇到了以下错误。任何帮助都会很棒，因为我已经为此工作了一段时间。

错误：

```
 Server.objects.filter(pk=id[0]).update(online=1)
TypeError: 'builtin_function_or_method' object has no attribute '__getitem__' 
```

代码：

```
import subprocess
from django.db import models
from networkstats.models import Server

query = Server.objects.values_list('id', 'ip_address')
for ip_address in query:
    print 'Server ID: ' + str(ip_address[0])
    print 'Server IP: ' + str(ip_address[1])
    command = ['ping -t 200 -c 1 ' + ip_address[1]]
    ping = subprocess.Popen(command, stdout=subprocess.PIPE, shell = True)
    if "100% pocket loss" in ping.stdout.read():
        Server.objects.filter(pk=id[0]).update(online=0)
    else:
        Server.objects.filter(pk=id[0]).update(online=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:39:16.553

看起来像一个错字。你想写`ip_address[0]`而不是`id[0]`？

`id`是一个[内置函数](http://docs.python.org/library/functions.html#id)，因此您会收到此错误。

还要看看你的代码片段可能更好的实现：

```
for server in Server.objects.only('ip_address', 'id').all():
    print 'Server ID: ' + str(server.id)
    print 'Server IP: ' + str(server.ip_address)

    command = ['ping -t 200 -c 1 ' + server.ip_address]
    ping = subprocess.Popen(command, stdout=subprocess.PIPE, shell=True)

    online = 1
    if "100% pocket loss" in ping.stdout.read():
        online = 0

    server.update(online=online) 
```

这将只获取需要的行（如果还有其他行）并减少到数据库的流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:03:18.130

不是你要找的吗`ip_address[0]`？`id[0]`

# asp.net-mvc-3 - 如何在一个简单的博客站点中为登录用户显示特定的帖子？

> ID：12795989
> 
> 赞同：0
> 
> 时间：2012-10-09T08:36:14.693
> 
> 标签：asp.net-mvc-3, linq, list

场景是，我有简单的 Post 表，只有标题和故事。发布新帖子后，我想使用我的视图页面显示帖子。我已经编写了显示帖子的方法，如下所示：

```
 \\Post is the class name & item is the obj to bind it from the view form.
public List<Post> ViewPost(Post item)
    {
        using(var context=new TourBlogEntities1())
        {
            var post= from s in context.Posts
                      where s.PostID=item.PostID //showing error here.
                      select s;

            return post.ToList<Post>();
        }
    } 
```

我收到一条错误消息，提示“无法将 lambda 表达式转换为字符串类型，因为它不是委托类型”。

需要做什么？更多信息也会有所帮助，比如我在 post 表中有一个字段名称 userid，我想使用日志信息自动填充它。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:38:21.817

在您的 LINQ 查询中替换：

```
where s.PostID = item.PostID 
```

和：

```
where s.PostID == item.PostID 
```

LINQ 运算符需要一个布尔条件而`where`不是赋值。

# ios - iOS 带注释的 UILabel 设计模式

> ID：12795991
> 
> 赞同：0
> 
> 时间：2012-10-09T08:36:21.253
> 
> 标签：ios, uilabel

一位客户要求我在应用程序中包含文本，其中一小部分应该是超链接的，这样当点击它时，它就会显示有关他们产品的更多事实。

通常的设计模式是什么？超链接似乎不适合手机应用程序环境，但按钮似乎破坏了文本的流动。任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:41:39.087

您应该使用 a`UIWebView`来显示该信息。只需格式化一些简短的 html 以显示您的文本和超链接并实现`UIWebViewDelegate`，以便在链接操作系统被点击时得到通知。

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:45:27.427

您可以使用 TTTAttributedLabel 组件，它接受 NSAttributesString 作为文本，因此您可以以任何您想要的方式格式化文本。它还自己处理文本中的链接，使其可点击。要处理超链接点击，您需要实现 TTTAttributedStringDelegate 协议。这比仅仅实现 UIWebView （尤其是 NSAttributedString 格式化部分）更难，但它要快得多。

请注意，TTTAttributedLabel 是第 3 方组件，因此您需要在此处获取它：[https ://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)

# google-apps-script - 编辑字幕面板

> ID：12795994
> 
> 赞同：0
> 
> 时间：2012-10-09T08:36:41.250
> 
> 标签：google-apps-script

**不知道为什么会发生返回意外错误：**

*我正在尝试编辑字幕面板，但如果我制作“返回应用程序”，则会出现错误。我的功能面板管理员创建我的标题面板，我的功能 createActivatePanelAdmin 获取标题面板并尝试编辑内容，因为如果选择了一个项目栏，标题面板的内容必须更改。*

```
function panelAdmin(){

  var app = UiApp.getActiveApplication();
  var ss = SpreadsheetApp.openById(LOGS_SHEET_ID);
  var verticalPanelAdmin = app.createVerticalPanel().setId("verticalPanelAdmin");
  var mainPanelIndex = app.createCaptionPanel().setText("Index");

  var menuBar = app.createMenuBar().setId("menuBar").setAnimationEnabled(true);//For vertical menubar(true)

  var hdPanelAdminIndex = app.createServerHandler("createPanelAdminIndex").addCallbackElement(mainPanelIndex);
  var hdPanelCreateUserPanel = app.createServerHandler("createUserPanelAdmin").addCallbackElement(mainPanelIndex);
  var hdPanelActive = app.createServerHandler("createActivatePanelAdmin").addCallbackElement(mainPanelIndex);
  var hdPanelDeleteUserPanel = app.createServerHandler("deleteUserPanel").addCallbackElement(mainPanelIndex);
  var hdPanelSearchUserPanel = app.createServerHandler("searchUserPanel").addCallbackElement(mainPanelIndex);
  var hdPanelExitUserPanel = app.createServerHandler("ExitUserPanel").addCallbackElement(mainPanelIndex);

  var menuItem0 = app.createMenuItem('Inicio ', hdPanelAdminIndex);
  var menuItem1 = app.createMenuItem('Crear Usuarios', hdPanelCreateUserPanel);
  var menuItem2 = app.createMenuItem('Activar Usuarios', hdPanelActive);
  var menuItem3 = app.createMenuItem('Borrar Usuarios', hdPanelDeleteUserPanel);
  var menuItem4 = app.createMenuItem('Buscar', hdPanelSearchUserPanel);
  var menuItem5 = app.createMenuItem('Salir', hdPanelExitUserPanel);
  //top level menu items

  //create menuItem separators
  var separator0 = app.createMenuItemSeparator();
  var separator1 = app.createMenuItemSeparator();
  var separator2 = app.createMenuItemSeparator();
  var separator3 = app.createMenuItemSeparator();
  var separator4 = app.createMenuItemSeparator();
  var separator5 = app.createMenuItemSeparator();

  //Add the menu item separators and menuItem to the MenuBar
  menuBar.addSeparator(separator0).addItem(menuItem0).addSeparator(separator1)
    .addItem(menuItem1).addSeparator(separator2)
    .addItem(menuItem2).addSeparator(separator3)
    .addItem(menuItem3).addSeparator(separator4)
    .addItem(menuItem4).addSeparator(separator5)
    .addItem(menuItem5).addSeparator(separator0);
  verticalPanelAdmin.add(menuBar);
  verticalPanelAdmin.add(mainPanelIndex);
  app.add(verticalPanelAdmin);

  return app;

}; 
```

* * *

```
 function createActivatePanelAdmin(){

  var ss = SpreadsheetApp.openById(LOGS_SHEET_ID);
  var app = UiApp.getActiveApplication();
  var verticalPanelAdmin = app.getElementById("verticalPanelAdmin");

  var menuBar = app.getElementById("menuBar");
  var mainPanelIndex = app.getElementById("mainPanelIndex");
      mainPanelIndex.setText("Sistema de creación de usuarios");

  var mainPanelActivateAdmin = app.createHorizontalPanel().setId("mainPanelActivateAdmin");

      /*FROM HERE WORKS CORRECTLY (TESTED)*/

  var lastCol = ss.getLastColumn();
  var rowsToConfirm = confirmReg();
  var lastRow = numRows(rowsToConfirm);

  if (rowsToConfirm != null){
    var flexTableRegAdmin = app.createFlexTable().setId("flexTableRegAdmin").setBorderWidth(1);
    flexTableRegAdmin.setText(0, 0, "ID");
    flexTableRegAdmin.setText(0, 1, "NOMBRE");
    flexTableRegAdmin.setText(0, 2, "PASS");
    flexTableRegAdmin.setText(0, 3, "EMAIL");
    flexTableRegAdmin.setText(0, 4, "ESTADO");
    flexTableRegAdmin.setText(0, 5, "ACTIVAR");

    var check = new Array(lastRow);

    for(var r = 0; r < lastRow; r++){
      for(var c = 0; c < lastCol; c++){
        var text = rowsToConfirm[r][c].toString();

        flexTableRegAdmin.setText(r+1, c, text);

      }
      var id = rowsToConfirm[r][0];
      check[r] = app.createCheckBox().setName("chk_"+id).setId("chk_"+id);
      flexTableRegAdmin.setWidget(r+1, lastCol, check[r]);
    }//end fors
  }//end if

  var botMod = app.createButton().setText("Activar").setId("botStatus");
  var botHandle = app.createServerHandler("changeStatus").addCallbackElement(mainPanelActivateAdmin);
  botMod.addClickHandler(botHandle);

  /*TO HERE*/

  mainPanelActivateAdmin.add(flexTableRegAdmin);
  mainPanelActivateAdmin.add(botMod);

  mainPanelIndex.add(mainPanelActivateAdmin);
  return app;
  }; 
```

**感谢帮助！而且我不得不说 flextable 没问题，我是在其他站点上构建的，所以不要花时间尝试查看错误是否在 Flextable 或 botton_send 中**

问题出在面板中（我试图清除代码）

![那是](../Images/5eb216c159023af18a5a0d9345b26716.png)

编辑：（我只是想删除标题面板，但我不能。意外错误）

```
function createActivatePanelAdmin(){

  var app = UiApp.getActiveApplication();
  var verticalPanelAdmin = app.getElementById("verticalPanelAdmin");
  var mainPanelIndex = app.getElementById("mainPanelIndex");
  verticalPanelAdmin.remove(mainPanelIndex);
  return app;
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:42:23.127

很难说问题到底出在哪里。您可以通过注释部分代码来调试您的应用程序，以便您可以缩小问题所在的区域。我多次遇到此类错误并遵循这种方法。希望这对你也有帮助。

快乐的应用程序脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:39:31.720

我同意 Waqar，您的代码不可测试，因为它调用在其外部定义的变量。

当您尝试通过 ID 获取具有错误 ID（即不存在的 ID）的东西时，通常会发生这些错误，因此我建议您仔细检查您使用的每个面板和小部件的每个 ID，可能存在拼写错误某处...

编辑：我想我（也许）发现了一个错误：

在您编写的代码的第一部分：

```
 var verticalPanelAdmin = app.createVerticalPanel().setId("verticalPanelAdminIndex"); 
```

在第二个函数中，您使用以下命令调用此面板：

```
 var verticalPanelAdmin = app.getElementById("verticalPanelAdmin"); 
```

身份证不一样……正常吗？

**编辑2**：这里也是一个问题......第一个功能：

```
 var mainPanelIndex = app.createCaptionPanel().setText("Index");// no ID is defined 
```

然后你用

```
 var mainPanelIndex = app.getElementById("mainPanelIndex"); 
```

请尝试并继续检查自己...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:36:05.623

**问题是：**

* * *

1 - 你不能编辑面板（创建和显示）

2 - 必须为每个选项菜单创建一个新面板。

* * *

**解决方案：**

* * *

1 - 明确应用（在我的情况下，我更喜欢清除绝对面板：我之前添加的）。

2 - 创建一个新的垂直面板（“V”）

3 - 创建一个新的绝对面板（“A”）

4 - 通过 ID 获取菜单栏（这是可能的，因为您不打算更改它）

5 - 创建一个新的字幕面板（“captionActivePanel”）。

```
 UiApp.getActiveApplication app = var ();
    app.getElementById absolutePanel = var ("absolutePanel");
    app.remove (absolutePanel);
    var a = app.createAbsolutePanel().setId("a");
    var v = app.createVerticalPanel().setId("v");
    var menuBar = app.getElementById("menuBar");
    var captionActivePanel = app.createCaptionPanel().setId(captionActivePanel).setText("Bienvenido al sistema de activación de usuarios"); 
```

一旦我们有了您要介绍的面板（在本例中为“flexTableRegAdmin”和一个简单的按钮，例如）在 CAPTION PANEL 中介绍它

```
 v.add (flexTableRegAdmin);
    v.add (botMod);
    captionActivePanel.add (v)

    a.add (menuBar);
    a.add (captionActivePanel);
    app.add (a); 
```

***Waqar Ahmad 感谢您让我看到有必要发表评论以使事情正常进行！我想我可以报告这个错误，因为它需要编辑面板的内容***

# java - 如果 ACE 服务器已关闭，如何启动目标

> ID：12795996
> 
> 赞同：0
> 
> 时间：2012-10-09T08:36:42.013
> 
> 标签：java, apache, osgi, provisioning

我有以下内容：

*   一台机器上的 ACE 0.81 服务器，具有启动目标所需的所有捆绑包（我的意思是所有捆绑包）
*   另一台机器上只有 managementagent.jar 的目标容器。当目标启动时，它的所有包都从 ACE 服务器下载。

问题是没有制作所述包的“硬拷贝”，所以如果我在 ACE 服务器关闭时尝试启动目标容器，只有管理代理启动，但我需要目标从*最后一个已知的包*开始。

有没有办法只通过配置来做到这一点，还是我需要编写一些代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:15:29.243

OSGi 框架应该支持持久的捆绑缓存。使用它将在框架重新启动时恢复所有已安装的捆绑包和捆绑包状态。默认情况下，这在 Felix 中是启用的，所以如果你使用 ace-launcher 作为目标，这可以开箱即用。

对于 Equinox，这有时会被禁用。有一个属性 -osgi.clean=false 可以确保包缓存在重新启动后仍然存在。

# apache-flex - 滚动 STOPS 时触发的事件 - flex

> ID：12795999
> 
> 赞同：0
> 
> 时间：2012-10-09T08:36:47.870
> 
> 标签：apache-flex, scroll

当 mx textarea 中的垂直滚动条停止滚动时，有没有办法启动事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:04:13.107

我想出了以下解决方案：

```
 private function init():void{
            area.addEventListener(ScrollEvent.SCROLL,onScroll)
            timer = new Timer(1000);
            timer.addEventListener(TimerEvent.TIMER, startFun);
            timer.start();  
        }

        private function onScroll(e:Event):void{
            timer.stop()    
            colored=false
            timer.start()   
        }

        private function startFun(e:Event):void{

            while(!colored){

                    area.text="Bye Bye cruel world !"
                    colored=true;
            }
        } 
```