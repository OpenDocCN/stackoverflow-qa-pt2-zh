# StackOverflow 问答 13077000-13077999

# c# - 使用 Linq 删除和添加搜索过滤器

> ID：13077007
> 
> 赞同：0
> 
> 时间：2012-10-25T20:48:08.847
> 
> 标签：c#, asp.net, linq

我有一个搜索字段，它使用下拉列表按部门过滤搜索结果。

我终于让它工作得很好，但现在我想做出一个 ALL 选项来否定它。下拉值等于 int。我仍在学习，所以我唯一可以解决这个问题的方法是在 where 查询中使用 if else 语句。当我这样做时，我看到了很多红色。

下拉列表中有 5 个选项。值是 1 到 5。5 = 全部。我想基本上停止按部门搜索或消除`t0.DivisionID == DDLInt &&`

```
string DDL = DDLAddDivision.SelectedValue;
int DDLInt;
if (int.TryParse(DDL, out DDLInt))
{
    int searchID;
    if (!int.TryParse(txtSearch.Text.Trim(), out searchID))
        searchID = -1;  // set to an invalid ID

    ItemContext db = new ItemContext();
    var q = (from t0 in db.Item
             join t1 in db.Categories on t0.CategoryID equals t1.CategoryID
             join t2 in db.Divisions on t0.DivisionID equals t2.DivisionID

             where

              t0.DivisionID == DDLInt &&

                 //Contains

            (
             t0.ItemName.Contains(txtSearch.Text.Trim()) ||
             t0.Email.Contains(txtSearch.Text.Trim()) ||
             t0.Description.Contains(txtSearch.Text.Trim()) ||
             t0.Phone.Contains(txtSearch.Text.Trim()) ||
             t0.ItemID.Equals(searchID)
             )
             group t0 by new
             {
                 t0.ItemID,
                 t0.ItemName,
                 t0.Description,
                 t0.Phone,
                 t0.Email,
                 t0.DivisionID,
                 t0.CategoryID,
                 t1.CategoryName,
                 t2.DivisionName

             } into i

             select new
             {
                 i.Key.ItemID,
                 i.Key.ItemName,
                 i.Key.Description,
                 i.Key.Email,
                 i.Key.Phone,
                 i.Key.CategoryName,
                 i.Key.DivisionName,
                 i.Key.CategoryID,
                 i.Key.DivisionID

             });

    if (q.Any() == false)
    {
        ResultsLabelId.Visible = true;
    }
    else
    {
        ResultsLabelId.Visible = false;
    }

    //bind and return
    lv.DataSource = q.ToList();
    lv.DataBind(); 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:50:25.387

如何将该行替换为：

```
(DDLInt == 5 || t0.DivisionID == DDLInt) && 
```

# java - Java：当 B 扩展 A 时 A x = new A() 和 A x = new B() 之间的区别

> ID：13077009
> 
> 赞同：18
> 
> 时间：2012-10-25T20:48:14.067
> 
> 标签：java, inheritance

> **可能重复：**
> [java继承-请解释](https://stackoverflow.com/questions/1738148/java-inheritance-please-explain)

我正在学习 Java，我有两个问题：

1.  有什么区别：

    ```
    A x = new A(); 
    ```

    和

    ```
    A x = new B(); 
    ```

    考虑到：

    ```
    class A
    class B extends A 
    ```

2.  有什么区别：

    ```
    A x = new B();
    (A)x.run_function(); 
    ```

    假设 A 和 B 都有函数`run_function`，将执行哪一个？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T22:01:05.687

最重要的区别在于对象的静态和动态类型以及对对象的引用。

假设 B 扩展 A，C 扩展 B。

对象的动态类型（new 中使用的类型）是它的实际运行时类型：它定义了对象的实际方法。

对象引用（变量）的静态类型是编译时类型：它定义或者更确切地说声明了可以在变量引用的对象上调用哪些方法。

变量的静态类型应该始终是它所引用对象的动态类型的相同类型或超类型。

因此在我们的示例中，具有静态类型 A 的变量可以引用具有动态类型 A、B 和 C 的对象。具有静态类型 B 的变量可以引用具有动态类型 B 和 C 的对象。具有静态类型 C 的变量只能引用具有动态型 C.

最后，在对象引用上调用方法是静态和动态类型之间微妙而复杂的交互。（如果您不相信我，请阅读 Java 语言规范中的方法调用。）

例如，如果 A 和 B 都实现了方法 f()，并且方法调用的静态类型为 A，而涉及的动态类型为 C，则将调用 Bf()：

```
B extends A, C extends B
public A.f() {}
public B.f() {}
A x = new C(); // static type A, dynamic type C
x.f(); // B.f() invoked 
```

大大简化：首先，接收者（类型 A）和参数（无参数）的静态类型用于确定该特定调用的最佳匹配（最具体）方法签名，这是在编译时完成的。在这里，这显然是 Af()。

然后，在运行时的第二步中，动态类型用于定位我们方法签名的实际实现。我们从类型 C 开始，但没有找到 f() 的实现，所以我们向上移动到 B，在那里我们有一个与 Af() 的签名匹配的方法 Bf()。所以 Bf() 被调用。

在我们的示例中，我们说方法 Bf() 覆盖了方法 Af()。在类型层次结构中覆盖方法的机制称为子类型多态性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T20:52:54.813

**1.**在

```
A x = new A(); 
```

`x`是`A`和 类型的实例化`A`。

而在

```
A x = new B(); 
```

`x`是*`B`*和 类型的实例化`A`。

* * *

**2.**这里要注意的重要一点是（在第二种情况下）如果调用`x.someMethod()`，***`B`***将调用的方法，而不是方法`A`（这称为*动态绑定*，与*静态绑定*相反）。此外，强制转换只会改变*type*，所以

```
A x = new B();
((A)x).run_function();  // Need extra parenthesis! 
```

仍然会调用`B`'s 方法。

* * *

正如我上面所说，你需要包括那些额外的括号，因为

```
(A)x.run_function(); 
```

相当于

```
(A)(x.run_function()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-25T20:49:07.187

**情况1：**

**当您在B**中有一个不在**A**中的方法时，您会看到差异。

当您尝试使用引用“x”调用该方法时，它将不可见。

**案例二：**

由于多态性，所有方法调用都将基于对象类型而不是引用类型（静态方法除外）

```
A x = new B(); 
```

在这种情况下，`B`类`run_function`将被执行。

```
A x = new A(); 
```

在这种情况下，`A`类`run_function`将被执行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-25T20:54:46.457

此外：

```
A x = new B() 
```

您将无法执行在 中定义`B`和未在 中定义的方法`A`。但是，如前所述，由于 Java 中的多态性，如果您确实执行任何方法并`B'`覆盖了这些方法，那么它将使用`B`'s 实现。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-25T20:56:07.707

```
1.What is the difference between: A x = new A();and A x = new B(); 
```

不同之处在于，在第一种情况下，您正在实例化一个类型为 A 的类。因此，您将只能调用在 A 中定义的方法。在第二种情况下，如果 A 和 B 中都存在相同名称的方法，则B 实现将在运行时调用。

但是，在第二种情况下，使用反射，也可以调用在 B 类中定义而不在 A 类中定义的方法。

> `A x = new B(); (A)x.run_function();`假设A和B都有函数run_function，会执行哪一个？

请记住 - 覆盖是在运行时决定的，而重载是在编译时决定的。

所以B类中的方法会在运行时基于动态绑定被调用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T20:51:10.423

1.  没有真正的区别。实际上对于第二种情况，A 旧了 B 对象，但 B 是 A，所以没问题。在这种情况下，B 的行为类似于 A。

2.  它将调用 B 的 run_function()

# c# - 如何修改文本框控件，以便按退格键删除整个单词而不是一次只删除一个字符？

> ID：13077010
> 
> 赞同：0
> 
> 时间：2012-10-25T20:48:18.540
> 
> 标签：c#, winforms, textbox

我想修改常规 WinForms C# 文本框控件的默认行为，以便按下`backspace`删除**整个单词**而不是单个字符。

理想情况下，我希望**仅**当插入符号位置位于空白字符前面时才具有这种特殊行为。例如; 当插入符号位于“hello world|”时按`backspace`一次 仍然应该只删除一个导致“hello worl|”的字符 - 但如果插入符号位于“hello world |” 当我按 时`backspace`，结果应该是“你好 |”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:14:34.170

首先，您需要为您`KeyEventHandler`的`KeyDown`事件添加`TextBox`

```
this.textBox1.KeyDown += new System.Windows.Forms.KeyEventHandler(this.textBox1_KeyDown); 
```

之后，您可以像这样处理事件：

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e)
        {
            TextBox t = (TextBox)sender;
            if (e.KeyCode == Keys.Back)
            {
                int carretIndex = t.SelectionStart;
                if (carretIndex>0 && carretIndex == t.Text.Length && t.Text[carretIndex-1] == ' ')
                {
                    int lastWordIndex = t.Text.Substring(0, t.Text.Length - 1).LastIndexOf(' ');
                    if (lastWordIndex >= 0)
                    {
                        t.Text = t.Text.Remove(lastWordIndex + 1);
                        t.Select(t.Text.Length, 0);
                    }
                    else
                    {
                        t.Text = string.Empty;
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:51:20.727

看看 keypress/keydown 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:25:12.243

给你，我测试了它，它工作正常：

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        String[] chars = new String[1]{" "};

        if(e.KeyValue == 8)
        {
            var temp = (from string s in textBox1.Text.Split(chars, StringSplitOptions.None)
                             select s).ToArray();

            temp[temp.Length-1] = "";

            textBox1.Text = String.Join(" ",temp).ToString();
            SendKeys.Send("{END}");
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:01:44.467

它是一个伪代码，希望对您有所帮助：

```
// check backspace is pressed
if keycode==keycode(backspace) then
    // testing cursor is just after space(113) character
    if string[string length] == keycode(space) then
    // loop through string in reverse order
    loop each character in reverse
        // start removing each character 
        remove the characters
    till find 2nd space

    end if
end if 
```

# php - 从多维数组中获取唯一数组

> ID：13077011
> 
> 赞同：0
> 
> 时间：2012-10-25T20:48:19.190
> 
> 标签：php, arrays

我有以下数组：

```
Array
(
    [0] => Array
        (
            [126] => stdClass Object
                (
                    [term_id] => 126
                    [name] => Pine
                    [slug] => pine
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 129
                    [taxonomy] => wood_types
                    [description] => Pine
                    [parent] => 0
                    [count] => 6
                    [object_id] => 890
                )

            [131] => stdClass Object
                (
                    [term_id] => 131
                    [name] => PVC
                    [slug] => pvc
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 134
                    [taxonomy] => wood_types
                    [description] => PVC
                    [parent] => 0
                    [count] => 6
                    [object_id] => 890
                )

            [137] => stdClass Object
                (
                    [term_id] => 137
                    [name] => Special Order
                    [slug] => special-order
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 143
                    [taxonomy] => wood_types
                    [description] => 
                    [parent] => 0
                    [count] => 6
                    [object_id] => 890
                )

        )

    [1] => Array
        (
            [137] => stdClass Object
                (
                    [term_id] => 137
                    [name] => Special Order
                    [slug] => special-order
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 143
                    [taxonomy] => wood_types
                    [description] => 
                    [parent] => 0
                    [count] => 6
                    [object_id] => 865
                )

        )

    [2] => Array
        (
            [125] => stdClass Object
                (
                    [term_id] => 125
                    [name] => Oak
                    [slug] => oak
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 128
                    [taxonomy] => wood_types
                    [description] => Oaker
                    [parent] => 0
                    [count] => 3
                    [object_id] => 871
                )

        )

    [3] => Array
        (
            [137] => stdClass Object
                (
                    [term_id] => 137
                    [name] => Special Order
                    [slug] => special-order
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 143
                    [taxonomy] => wood_types
                    [description] => 
                    [parent] => 0
                    [count] => 6
                    [object_id] => 867
                )

        )

    [4] => Array
        (
            [137] => stdClass Object
                (
                    [term_id] => 137
                    [name] => Special Order
                    [slug] => special-order
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 143
                    [taxonomy] => wood_types
                    [description] => 
                    [parent] => 0
                    [count] => 6
                    [object_id] => 864
                )

        )

    [5] => Array
        (
            [125] => stdClass Object
                (
                    [term_id] => 125
                    [name] => Oak
                    [slug] => oak
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 128
                    [taxonomy] => wood_types
                    [description] => Oaker
                    [parent] => 0
                    [count] => 3
                    [object_id] => 771
                )

            [126] => stdClass Object
                (
                    [term_id] => 126
                    [name] => Pine
                    [slug] => pine
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 129
                    [taxonomy] => wood_types
                    [description] => Pine
                    [parent] => 0
                    [count] => 6
                    [object_id] => 771
                )

            [131] => stdClass Object
                (
                    [term_id] => 131
                    [name] => PVC
                    [slug] => pvc
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 134
                    [taxonomy] => wood_types
                    [description] => PVC
                    [parent] => 0
                    [count] => 6
                    [object_id] => 771
                )

        )

    [6] => 
    [7] => Array
        (
            [126] => stdClass Object
                (
                    [term_id] => 126
                    [name] => Pine
                    [slug] => pine
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 129
                    [taxonomy] => wood_types
                    [description] => Pine
                    [parent] => 0
                    [count] => 6
                    [object_id] => 894
                )

            [131] => stdClass Object
                (
                    [term_id] => 131
                    [name] => PVC
                    [slug] => pvc
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 134
                    [taxonomy] => wood_types
                    [description] => PVC
                    [parent] => 0
                    [count] => 6
                    [object_id] => 894
                )

        )

    [8] => Array
        (
            [137] => stdClass Object
                (
                    [term_id] => 137
                    [name] => Special Order
                    [slug] => special-order
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 143
                    [taxonomy] => wood_types
                    [description] => 
                    [parent] => 0
                    [count] => 6
                    [object_id] => 873
                )

        )

    [9] => Array
        (
            [137] => stdClass Object
                (
                    [term_id] => 137
                    [name] => Special Order
                    [slug] => special-order
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 143
                    [taxonomy] => wood_types
                    [description] => 
                    [parent] => 0
                    [count] => 6
                    [object_id] => 869
                )

        )

    [10] => Array
        (
            [143] => stdClass Object
                (
                    [term_id] => 143
                    [name] => base
                    [slug] => base-2
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 149
                    [taxonomy] => wood_types
                    [description] => 
                    [parent] => 0
                    [count] => 1
                    [object_id] => 892
                )

            [138] => stdClass Object
                (
                    [term_id] => 138
                    [name] => Test Child
                    [slug] => test-child
                    [term_group] => 0
                    [term_order] => 0
                    [term_taxonomy_id] => 144
                    [taxonomy] => wood_types
                    [description] => 
                    [parent] => 126
                    [count] => 1
                    [object_id] => 892
                )

        )

    [11] => 
) 
```

这些来自带回附加到它的术语对象数组的单个项目（这就是为什么有些项目有多个条目）。你可以看到，有许多`term_id`是相同的——我只是在寻找一种方法来使它带回一个唯一的数组（而不是多维的）。我看过这样的文章[，](https://stackoverflow.com/questions/4585208/how-can-you-make-a-multidimensional-array-unique)但到目前为止还没有这样的运气。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:55:07.377

像这样的东西？

```
$out = array();

foreach($data as $row){
    if(is_array($row)){
        foreach($row as $id=>$term){
            if(!isset($out[$id])){
                $out[$id] = $term;
            }
        }
    }
}
print_r($out); 
```

# perl - Jenkins 启动了一个包含 ANT 的 Perl 脚本，但 ANT 无法读取 .properties 文件

> ID：13077012
> 
> 赞同：1
> 
> 时间：2012-10-25T20:48:19.997
> 
> 标签：perl, ant, jenkins

以前我让 Jenkins 启动了一个 perl 构建脚本，在脚本执行过程中的某个时间点会打开一个 .bat 文件来启动我们的 ANT 作业。我正在尝试合并和删除 .bat 文件并直接从 perl 脚本启动 ANT。我已经能够成功地做到这一点，但问题是 ANT 脚本查看其变量的 .properties 文件不再像 .bat 文件启动 ANT 脚本时那样正确导入。

目前我只是被称为“Exec（“ant -buildfile C:\project\buildfile.xml”），它会触发蚂蚁，但它会返回一个错误，“找不到 ${script.dir}/barbuildfile .xml”。“script.dir”被定义在一个 .properties 文件中，该文件与构建文件位于同一目录中。当它由 .bat 文件启动时，它可以完美运行，但只要通过 Perl 调用它就会失败. 有什么原因吗？或者更好的是，如何解决？

我还尝试通过启动强制它加载属性文件。"Exec("ant -buildfile C:\project\buildfile.xml -Dpropertyfile=C:\project\build.properties")" 并收到相同的错误。

编辑：这是 .bat 文件

```
set project.name=%1

set environment=%2

set version.tag=%3

set build.list=%4

set JAVA_HOME=C:\ProgramFiles\IBM\jdk

set ANT_HOME=C:\ProgramFiles\IBM\IMShared\plugins\org.apache.ant_1.7.1.v20100518-1145

set PATH=C:\Program Files (x86)\IBM\IMShared\plugins\org.apache.ant_1.7.1.v20100518-1145\bin

CALL ant -buildfile C:\scripts\build_service.xml 
```

Perl 脚本：

```
system("set project.name=$project");
system("set environment=$environment");
system("set version.tag=$version");
system("set build.list=$service");
system("set JAVA_HOME=C:\ProgramFiles\IBM\jdk");
system("set ANT_HOME=C:\ProgramFiles\IBM\IMShared\plugins\org.apache.ant_1.7.1.v20100518-1145");
system("set PATH=C:\Program Files (x86)\IBM\IMShared\plugins\org.apache.ant_1.7.1.v20100518-1145\bin");
exec("CALL ant -buildfile C:\\scripts\\build_service.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:58:13.027

首先，请考虑
通过专用的[ANT 插件](https://wiki.jenkins-ci.org/display/JENKINS/Ant+Plugin)直接从 Jenkins 调用 ANT ，如[Demnogonis 所述](https://stackoverflow.com/users/912500/demnogonis)。

其次，它当前的编写方式，每个`system(...)`命令都在自己的 CMD 窗口中运行，
而不知道在它之前运行的其他*系统*命令
（那些先前的命令已经超出范围），例如 -

*   在“my_setup.bat”中所做的更改不适用于“ANT”：

    ```
    exec("my_setup.bat");
    # at this point, 'my_setup.bat' is forgotten
    exec("ANT ..."); 
    ```

    或者

    ```
    system("my_setup.bat");
    # at this point, 'my_setup.bat' is forgotten
    exec("ANT ..."); 
    ```

*   'run_my_ant.bat' 中的设置对于 ANT 来说是已知的，假设在 BAT 文件中调用 ANT，
    在进行更改后：

    ```
    exec("run_my_ant.bat"); 
    ```

要克服这个问题，请使用`%ENV`哈希在您的环境中设置变量，
以使它们可用于脚本中的其他命令：

```
$ENV{'project.name'} = $project;
$ENV{'environment'}  = $environment;
$ENV{'version.tag'}  = $version;
$ENV{'build.list'}   = $service;
$ENV{'JAVA_HOME'}    = "C:\\ProgramFiles\\IBM\\jdk";
$ENV{'ANT_HOME'}     = "C:\\ProgramFiles\\IBM\\IMShared\\plugins\\org.apache.ant_1.7.1.v20100518-1145";
$ENV{'PATH'}         = "C:\\Program Files (x86)\\IBM\\IMShared\\plugins\\org.apache.ant_1.7.1.v20100518-1145\\bin";
exec("CALL ant -buildfile C:\\scripts\\build_service.xml ..."); 
```

另请参阅此处：

*   [如何在 Perl 中设置环境变量](https://stackoverflow.com/questions/1747796/how-do-i-set-an-environment-variable-in-perl)

*   [我们可以将 perl 脚本中使用的变量设置为环境变量吗](https://stackoverflow.com/questions/12406152/can-we-set-a-variable-used-in-perl-script-as-environment-variable)

祝你好运！

# ruby-on-rails-3.1 - 如何在从旧版本升级到 3.1 的 Rails 项目中启用资产管道？

> ID：13077014
> 
> 赞同：0
> 
> 时间：2012-10-25T20:48:34.593
> 
> 标签：ruby-on-rails-3.1, asset-pipeline, sprockets

我认为这与在创建的项目中启用资产管道相同`--skip-sprockets`- 我可能弄错了。

我正在尝试运行`rake assets:precompile`测试，现在，因为我已经添加`require 'sprockets/railtie'`到我的 config/application.rb - 它至少找到了任务 - 但它说：

`no such table: app_configs`

**更新：**我发现这个错误来自我们应用程序中一个名为 AppConfig 的模型——所以我正在研究这部分。我不知道为什么它只发生在运行这个 rake 任务时......

**更新：**似乎这个特殊的 rake 任务假设我在生产环境中，即使我在我的开发环境中。其他 rake 任务似乎没有这个问题... ? 它表明它实际运行的任务是：`/home/.../bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUP=assets`

所以它没有找到表是有道理的，因为它正在查找错误的数据库（可能甚至不存在的数据库）。但是它是如何（错误地）确定它在生产环境中的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:35:27.390

事实证明：

我确实几乎正确地设置了资产管道：您所要做的就是运行`rake rails:update`以确保您的项目文件全部更新以与您当前的 Rails gem (3.1.x) 兼容。它会在覆盖文件时警告您，您可以查看更改并自己编辑文件（遗憾的是没有合并选项）。这些更改包括特定于资产管道（在`config`目录中）的几个配置指令。

这篇文章解决了我遇到的一个特殊问题：[如何构建任务'assets：precompile'](https://stackoverflow.com/questions/7205964/dont-know-how-to-build-task-assetsprecompile) -（我不需要`rails/all`，所以我必须添加链轮需要）

做完这一切后，我遇到了生产环境问题。assets:precompile 任务有意使用生产环境，以便生成可用于生产的资产；如果您使用开发环境，它会根据配置编译资产，`environments/development.rb`其中通常不包含摘要 URL。所以这是故意的 - 那么问题是当它初始化生产环境时，它试图访问一个在开发环境中不存在的数据库。解决这个问题的方法（出于测试目的）是将其添加到您的`config/application.rb`文件中：

`config.assets.initialize_on_precompile = false`

这可以防止它初始化应用程序，*瞧*，在资产预编译期间不再出现初始化错误:) **但是：**没有理由将此设置为 false，除非您出于某种原因打算在非生产环境中预编译所有资产（像 Heroku 一样）而不是允许 Capistrano 或其他一些部署工具在部署应用程序时在生产中编译它们。initialize_on_precompile 实际上允许您在资产模板中使用模型和其他应用程序资源，这可能是一个有用的功能。

**另一个有用的帖子：** [从 Rails 3 升级到 Rails 3.1](https://stackoverflow.com/questions/5968131/upgrading-from-rails-3-to-rails-3-1)

# jquery - jQuery块元素

> ID：13077015
> 
> 赞同：0
> 
> 时间：2012-10-25T20:48:38.387
> 
> 标签：jquery, overlay, prepend

似乎无法使此代码正常工作：

[http://jsfiddle.net/fxBEg/13/](http://jsfiddle.net/fxBEg/13/)

我想要做的只是将 ... 覆盖到名为“footer”的 DIV 区域上，但它似乎根本没有这样做？

JS代码：

```
$('#enableOverlay').live('click',function(event){
    var $overlay = $('<div id="overlay"><div id="overlayText"><img src="/img/sendingData.gif"><p class="overlaytxt1">Your data is being saved</p><p class="overlaytxt2">Please wait...</p></div></div>').prependTo('#footer');
    var $footer = $('#footer');
    var $enable = $('#enableOverlay');

    $enable.addClass('active');
    $overlay.fadeIn();
}); 
```

HTML 代码：

```
<link type="text/css" rel="stylesheet" href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700'>

<p>Curabitur vel nulla ac justo pharetra aliquet. Phasellus dictum porttitor metus, ut mattis eros sagittis sit amet. Aliquam bibendum velit vitae nisi porttitor sollicitudin. Proin pretium sapien eu lorem tempus convallis. In tincidunt erat quis neque dapibus id lobortis mauris placerat. Aliquam tellus sem, consequat ac faucibus ac, rhoncus eu nunc. Nulla pulvinar malesuada viverra.</p><p>In atat turpis mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus a.at turpis mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus  Cat turpis mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus atat turpis mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus  tat turpis mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus urat turpis mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus piat turpis mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus s at turpis mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus mi, ac luctus quam. In hac habitasse platea dictumst. In hac habitasse platea dictumst. Integer ac eros felis. In ac eros elit, vitae faucibus nibh. Pellentesque eget ipsum in metus vulputate consequat. Nam odio neque, ullamcorper quis molestie a, eleifend sed diam. Nam tellus ante, venenatis et sodales non, ultrices vel neque. Pellentesque vehicula vulputate condimentum. Integer non leo elit, eget cursus um sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Curabitur semper, neque ac placerat suscipit, dolor justo vulputate purus, at tristique sem nisl nec orci.</p>

<div id="footer" style="width: 150px; height: 250px;">
    <a id="enableOverlay" style="color: #39F;">CLICK TO Overlay</a>
    This is a normally placed footer somewhere in your html
    gdf
    gsdfgsdfg
    fgs
    dgf
    dgf
</div> 
```

和 CSS：

```
#overlay {
display: none;
position: absolute;
top: 0;
height: 100%;
width: 100%;
background: white;
opacity: 0.9;
z-index: 20000;
}

#overlayText {
    text-align:center;
    padding-top: 150px;
    z-index:8001;
}

p.overlaytxt1 {
    line-height:70%;
    font-family: 'PT Sans Narrow', sans-serif;
    font-size: 1.5em;
    line-height: 1.4;
    font-weight: bold;
    top: 5px;
    position:relative;
    color: #fff;
    background-color: #47c3d3;
    width: 240px;
    margin-left: 43%;
}

p.overlaytxt2 {
    line-height:70%;
    font-family: 'PT Sans Narrow', sans-serif;
    font-size: 1.5em;
    line-height: 1.4;
    font-weight: bold;
    color: #fff;
    position:relative;
    background-color: #47c3d3;
    width: 140px;
    margin-left: 51%;
    top: -22px;
} 
```

​</p>

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:53:29.780

绝对定位的元素相对于最近的定位父元素定位，在您的情况下是文档。

要解决您的问题，您需要定位页脚元素，这将导致`#overlay`' `top:0`，`left:0`参考`#footer`.

```
#footer{
    position:relative;
} 
```

我已[将此添加到您的小提琴](http://jsfiddle.net/fxBEg/14/)中，以便您可以看到它的实际效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:26:41.787

如果我们从上一个问题中获取一些代码，从这个问题中获取一些代码，我们会得到这个[**fiddle**](http://jsfiddle.net/PcQm3/)。我们使用纯 js 设置大小，这次还设置了叠加层的位置。这需要一个新功能：

```
function findPos(obj) {
    var curleft = curtop = 0;
    if(obj.offsetParent){
        do {
            curleft += obj.offsetLeft;
            curtop += obj.offsetTop;
        } while (obj = obj.offsetParent);
    }
    return [curleft,curtop];
} 
```

​我们用它来确定页脚的位置。小提琴很短，可能不言自明。如果不在评论中发表，我会提供更多详细信息。

注意：这样做意味着无论您如何放置和/或调整页脚的大小，叠加层都会跟随它。这也将在所有主要浏览器上正常工作。

编辑：

这是一个[**小提琴**](http://jsfiddle.net/xZ3WH/)，它可以像您在评论中要求的那样从 js 添加它。

# java - 如何建立仿真架构，OO设计

> ID：13077023
> 
> 赞同：3
> 
> 时间：2012-10-25T20:49:16.093
> 
> 标签：java, model-view-controller, design-patterns, simulation, oop

我正在用 Java 构建一个模拟。所以，我将把我的模拟分成两部分：

1) 仿真引擎

2) 仿真模型

基本上我想要一些关于如何拆分它的帮助（提示/建议），即去哪里。

所以我认为引擎会跟踪时间。它会监听事件，当事件到达时它会更新模拟的状态（我正在构建一个离散事件模拟）。仿真模型将具有 GUI，它将从实际引擎中获取逻辑和数据。我认为该模型将提供实际事件作为引擎的输入。我一直在考虑一个汽车类比，其中发动机是汽车的车身，模型是驾驶员。所以我希望它表现得像司机（模型）告诉汽车（发动机）做什么，即什么时候转弯，什么时候休息，以什么速度行驶等

你认为我以正确的方式解决这个问题吗？我能感觉到我听起来有点混乱，而且不是很清楚。所以我要澄清一下，我正在寻找的只是一些关于我应该如何拆分它以及引擎和模型的责任实际上应该是什么的输入。

另外，我想知道，如果我要实现 MVC 设计模式，这将如何适应我试图打破它的方式？

编辑：

通过模型，我的意思是我希望模拟具有一组特定的规则，然后引​​擎会遵循这些规则。当我正在构建一个道路交通模拟器时，规则可能是，汽车的分布，驾驶员资料，汽车可以做什么和不可以做什么（例如红灯停车）等。所以模型就像“大脑”如果你明白我的意思，那么模拟，然后引擎是模型指定的一组“规则”的实际模拟。我希望这更有意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:33:35.160

可能不是很适用，但是对于相当广泛和接受的 MVC 方法（模型-视图-控制器），控制器似乎对应于您所说的引擎。而模型就是这样——一堆简单的转储 Java 对象，逻辑尽可能少，只包含它们所代表的真实世界对象的属性。

因此，使用 MVC 进行类比，您将获得模型作为一组道路、汽车，仅包含对象的坐标，并且引擎将移动汽车、检测碰撞等。

一轮移动完成后，您将获得模型的更新版本（一些汽车以新的速度处于新位置，一些建筑物正在燃烧（呵呵）等）。您将处理这个更新的模型到您的视图（无论它可能是什么）以进行渲染。

我在这里唯一不确定的是系统的哪个部分将提供输入事件。在通常的 MVC 中，这是一些外部实体（通常是人工操作员）。如果事件是指人工输入，那么对于您的应用程序也是如此。如果您的意思是诸如由于汽车运动而引起的碰撞之类的事件，那么引擎本身将根据模拟的每个步骤的计算结果来产生此类事件。

虽然，这不是很经典的 OO 设计。在经典的 OO 设计中，您会得到具有内部逻辑的模型类，例如汽车，这将定义，例如，汽车突然改变它的速度。我不会走这条路，因为它使您的代码逻辑分布在模型类和控制器类之间。您在世界开始时拥有一组模型对象，前进的唯一方法是通过引擎决策来影响它们或拥有真正的外部输入（例如来自人类的 GUI 输入）。如果你需要模型对象来改变它的行为，它应该是引擎代码的责任，而不是模型代码。

对不起，这个相当不连贯的猜测，这是一个相当广泛的话题，有很多关于这些事情的书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:30:51.170

您没有给我们足够的信息来真正帮助您勾画出您的模拟，但这里有一个很好的提示：任何您可以识别为事物的东西都应该是一个对象。所以做一个类`Car`。还有一类`TrafficLight`。然后做一个类`Driver`，每个类`Car`都有一个字段`Driver`。并且 a`Road`会有一个`List<Car>`

在开始考虑如何实现 MVC 框架之前，请确保您了解[它是什么。](http://www.larryullman.com/2009/10/08/understanding-mvc/). MVC 最重要的是它是关于用户如何与 Universe 交互的。因此，例如，如果您正在编写一个名为 SimTraffic 的游戏，您会需要 MVC，因为您不仅需要交通模拟，而且用户也需要以某种方式控制它。如果您只是观看模拟的发生（没有交互），请不要担心 MVC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:47:40.503

忘记图形用户界面。请从物理开始——有数十种交通模拟；我假设您至少已经阅读过一本关于该主题的书，如果没有，现在是时候阅读了：起点可以是 Springer 出版的关于各种现代模型的论文集，称为交通模拟基础 (ISBN 1441961410)，Jaume巴塞罗（编辑）（2010 年）。

编辑：建议首先确定您的模拟范围；什么是不变的假设？它将在什么时间段内进行调整？路网会改变吗？你允许车祸、酒后驾车的白痴、围观者从车祸现场为 Youtube 拍摄电影吗？

您需要从 sim 获得什么精度 - 您希望将其用于城市规划、环境控制或交通管理吗？你设置的变量和参数是什么？您是否有统计数据来验证您的模拟和测试预测？您是否有关于您的模型宇宙/城市中汽车/驾驶员物理特征的现成数据（加速度、线性大小、违反交通规则的倾向）？在您坐下来编写代码**之前**，应该回答很多问题......

编辑#2：从您对@Victor Sorokin 的回答的评论中，我认为您有一个很好的想法，将驾驶员的期望添加到模型中 - 将使驾驶员的 AI 成为编码的第一件事：是的，最短路径，但解决方案最短路径问题来自陈旧数据（可能存在可变延迟）。如果你给司机完美的远见，就不会有任何碰撞；如果你让它们变得不完美，你将不得不对感觉输入进行建模，也许可以归结为检测到来车的特定方向的概率。当然，这会消耗大量的 CPU 周期。

# jquery-plugins - Bootstrap 的最佳 jQuery 轮播？

> ID：13077032
> 
> 赞同：0
> 
> 时间：2012-10-25T20:49:38.070
> 
> 标签：jquery-plugins, twitter-bootstrap, carousel

我们正在一个新站点中使用 Twitter Bootstrap。对于这个站点，我们需要一个可以处理缩略图的 Carousel，并且我们还可以添加 html 内容（作为 Flash 电影）。

有人对我们有推荐吗？是否有推荐的 jQuery Carousel 来扩展实际的 Bootstrap Carousel？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:54:13.163

我实际上找到了一个很棒的纯 CSS 轮播；[这个](http://iamceege.com/pure-css3-content-slider/)在这里。如果你真的想使用 jquery，我会说 Bootstrap 可以满足你的需要 - 但你也可以[在这里](http://labs.juliendecaudin.com/barousel/)尝试这个。祝你好运！

# java - 使用 Java 向网页发送 post 请求

> ID：13077035
> 
> 赞同：-2
> 
> 时间：2012-10-25T20:49:53.233
> 
> 标签：java, post

我正在尝试编写一个 java 程序，它允许我向网站发送发布命令，而不必自己填写表格。但是，我现在拥有的当前代码不起作用，仅返回响应代码 200。它显然应该提交并移至下一页，但它不是基于响应代码。表单html是：

```
<div id="email" class="required"><label for="email" >Email Address</label><input  name="email"  value=""  /></div><div id="keyword" class="required"><label for="keyword" >Weekly Keyword</label><input  name="keyword"  value=""  /></div><div id="login" class="required"><label for="login" ></label><input type="image" src="public/images/btn_enter_now.png" name="login" value="Login" /></div> 
```

到目前为止我写的代码如下：

```
import javax.net.ssl.HttpsURLConnection;
   import javax.net.ssl.SSLContext;
   import javax.net.ssl.TrustManager;
   import javax.net.ssl.X509TrustManager;
   import java.security.cert.X509Certificate;  
    import java.io.*;
   import java.net.*;
    import javax.net.ssl.*;
    import java.security.*;

   public class CssAttack {

         public static void test() throws NoSuchAlgorithmException, KeyManagementException {
         TrustManager trm = new X509TrustManager() {
               public X509Certificate[] getAcceptedIssuers() {
                  return null;
               }

               public void checkClientTrusted(X509Certificate[] certs, String authType) {

               }

               public void checkServerTrusted(X509Certificate[] certs, String authType) {
               }
            };

         SSLContext sc = SSLContext.getInstance("SSL");
         sc.init(null, new TrustManager[] { trm }, null);
         HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
      }

      public static void main(String[] args) throws IOException {
            try{
                test();
         }
            catch(Exception e){

            }

         String httpsURL = "website";

         String query = "email="+URLEncoder.encode("blah@blah.com","UTF-8"); 
         query += "&";
         query += "keyword="+URLEncoder.encode("PRETZEL","UTF-8");
            query += "&";
            query += "login="+URLEncoder.encode("Login","UTF-8");

         URL myurl = new URL(httpsURL);
         HttpsURLConnection con = (HttpsURLConnection)myurl.openConnection();
         con.setRequestMethod("POST");

         con.setRequestProperty("Content-length", String.valueOf(query.length())); 
         con.setRequestProperty("Content-Type","application/x-www-form-urlencoded"); 
         con.setRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 5.0;Windows98;DigExt)"); 
         con.setDoOutput(true); 
         con.setDoInput(true); 

         DataOutputStream output = new DataOutputStream(con.getOutputStream());  

         output.writeBytes(query);

         output.close();

         DataInputStream input = new DataInputStream( con.getInputStream() );  

         System.out.println("Resp Code:"+con .getResponseCode()); 
         System.out.println("Resp Message:"+ con .getResponseMessage()); 
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:54:35.430

检查类[HttpUrlConnection](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)。

您可以查看[以下问题以获取简短示例](https://stackoverflow.com/questions/5531099/java-httpurlconnection-post-with-cookie?rq=1)。

# git - 有没有办法递归合并然后重新调整所有分支？

> ID：13077040
> 
> 赞同：3
> 
> 时间：2012-10-25T20:50:18.423
> 
> 标签：git, merge, git-rebase

假设我有这样的 git repo：

```
master
webapp-1252
webapp-1285
webapp-1384
webapp-1433
webapp-1524
webapp-824
x_____jira_
x_webapp-11
x_webapp-11
x_webapp-11
z_____jira_ 
```

我已经更新了所有这些，并准备将它们全部推送到 svn 或其他东西。然后有人进行了快速更改，这将需要我基本上通过所有这些来合并等。

是否有一条捷径可以遍历我在这里拥有的所有分支，将它们与获取的任何工作合并，然后重新设置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:56:17.967

有关类似问题的解决方案，请参阅这些答案：

*   [重新定位一个分支，包括它的所有子分支](https://stackoverflow.com/questions/5600659/rebasing-a-branch-including-all-its-children)
*   [Git：如何一次重新设置多个分支（具有相同的基本提交）？](https://stackoverflow.com/questions/866218/git-how-to-rebase-many-branches-with-the-same-base-commit-at-once)

我相信它们都可以用来解决您的问题。

# c++ - 条件运算符中的未定义行为

> ID：13077042
> 
> 赞同：4
> 
> 时间：2012-10-25T20:50:28.520
> 
> 标签：c++, iterator, valgrind, undefined-behavior, conditional-operator

我不得不分享这个：

由于以下涉及条件运算符的**琐碎**错误，我被挂断了整整 2 天。

这是一个简单的更正，但我想知道：

1.  为什么错误的代码会编译？
2.  虫子在做什么？
3.  为什么追查这么难？

错误代码：

```
 std::map<int, some_class>   my_map;
int key_ctr = 0;
 //...
std::map<int, some_class>::iterator it_next   =  
                                            key_ctr == 0  ?
                                 it_next  =  my_map.begin()      // BUG!!!
                                 :
                                 it_next  =  --my_map.end();     // BUG!!!!

  // ..... 
```

显然，我写错了条件运算符。当我终于找到并纠正了这个错误时，一切都很好：

正确的代码：

```
 std::map<int, some_class>   my_map;
int key_ctr = 0;
 //...
std::map<int, some_class>::iterator it_next   =  
                                            key_ctr == 0  ?
                                 my_map.begin()              // CORRECTED!
                                 :
                                 --my_map.end();             // CORRECTED! 
```

我的程序在接近错误部分时刚刚挂起 - 就好像它处于无限循环中。当我用**valgrind**运行它时，我得到了类似的东西

```
....
==24570== Warning: set address range perms: large range [0x1a7731000, 0x1c5f79000) (defined)
==24570== Warning: set address range perms: large range [0x1c5f79000, 0x1e47c1000) (defined)
==24570== Warning: set address range perms: large range [0x1e47c1000, 0x203009000) (defined)
==24570== Warning: set address range perms: large range [0x203009000, 0x221851000) (defined)
.....
==3733== More than 10000000 total errors detected.  I'm not reporting any more. 
```

这完全没有帮助，并把我指向了错误的导演（我以为我在堆上分配了太多，不知何故）。

再次，

1.  为什么错误的代码会编译？
2.  虫子在做什么？
3.  为什么追查这么难？

谢谢孩子们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T20:53:11.787

1) 编译器只检查语法和格式良好的程序。找出逻辑错误由您决定。

2）这是未定义的行为。这就是为什么：

* * *

```
whatever_non_POD_type it_next = condition ? it_next = whatever1 : 
                                            it_next  = whatever2; 
```

实际上，您可以将其缩小为：

```
It it_next = it_next = whatever; 
```

不管是什么都不重要。重要的是，在完整的语句执行（`;`到达）之前，`it_next` **它是 uninitialized**。这就是

```
It it_next = ... 
```

部分尝试做。**但**首先，它会尝试评估右侧的内容。这是`it_next = whatever`。哪个电话`it_next.operator = (whatever)`。所以**你在一个未初始化的对象上调用一个成员函数**。这是未定义的行为。达达！！！

3) 所有未定义的行为都很难追踪。这就是为什么您至少应该了解常见情况的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T20:59:02.987

> > 3 为什么追查这么难？

因为您没有打开编译器警告？

```
$ g++ -std=c++0x -pedantic -Wall -Werror -g    m.cc   -o m
cc1plus: warnings being treated as errors
m.cc:10: error: operation on ‘it_next’ may be undefined
m.cc: In function ‘void __static_initialization_and_destruction_0(int, int)’:
m.cc:6: error: operation on ‘it_next’ may be undefined
make: *** [m] Error 1 
```

# regex - 使用正则表达式 Perl 匹配单词的不同变体

> ID：13077043
> 
> 赞同：1
> 
> 时间：2012-10-25T20:50:29.710
> 
> 标签：regex, perl

我在单个空格字符处拆分句子，然后将这些术语与哈希键进行匹配。只有当术语 100% 相似时，我才会得到匹配，并且我正在努力寻找一个完美的正则表达式，它可以匹配多个相同单词的出现。例如。让我们考虑一下我有一个术语“拮抗剂”，现在它与术语“拮抗剂”完全匹配，但无法与拮抗剂、拮抗剂或前拮抗剂、水拮抗剂等匹配。我还需要一个正则表达式来匹配诸如 MCF 之类的词的出现-7 配合MCF7或MC-F7消音特殊字符等效果。

这是我到目前为止的代码；thr 评论部分是我苦苦挣扎的地方。

（注意：散列中的术语是词根形式）。

```
 use warnings;
    use strict;
    use Drug;
    use Stop;
    open IN,  "sample.txt"   or die "cannot find sample";
    open OUT, ">sample1.txt" or die "cannot find sample";

    while (<IN>) {
        chomp $_;
        my $flag = 0;
        my $line = lc $_;
        my @full = ();
        if ( $line =~ /<Sentence.*>(.*)<\/Sentence>/i ) {
            my $string = $1;
            chomp $string;
            $string =~ s/,/ , /g;
            $string =~ s/\./ \. /g;
            $string =~ s/;/ ; /g;
            $string =~ s/\(/ ( /g;
            $string =~ s/\)/ )/g;
            $string =~ s/\:/ : /g;
            $string =~ s/\::/ :: )/g;
            my @array = split / /, $string;

            foreach my $word (@array) {
                chomp $word;
                if ( $word =~ /\,|\;|\.|\(|\)/g ) {
                    push( @full, $word );
                }
                if ( $Stop_words{$word} ) {
                    push( @full, $word );
                }

                if ( $Values{$word} ) {
                    my $term = "<Drug>$word<\/Drug>";
                    push( @full, $term );
                }
                else {
                    push( @full, $word );
                }

                # if($word=~/.*\Q$Values{$word}\E/i)#Changed this
                # {
                # $term="<Drug>$word</$Drug>";
                # print $term,"\n";
                # push(@full,$term);
                # }
            }
        }
        my $mod_str = join( " ", @full );
        print OUT $mod_str, "\n";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:06:42.717

> 我需要一个正则表达式来匹配 MCF-7 与 MCF7 或 MC-F7 等单词的出现

最直接的方法就是去掉连字符，即

```
my $ignore_these = "[-_']"
$word =~ s{$ignore_these}{}g; 
```

我不确定您的 Value 哈希中存储了什么，因此很难说出您期望发生的事情

```
if($word=~/.*\Q$Values{$word}\E/i) 
```

但是，我想你想要的那种东西是（稍微简化你的代码）

```
#!/usr/bin/perl
use strict;
use warnings;
use utf8;
use 5.10.0;
use Data::Dumper;

while (<>) {
    chomp $_;
    my $flag = 0;
    my $line = lc $_;
    my @full = ();
    if ( $line =~ /<Sentence.*>(.*)<\/Sentence>/i ) {
        my $string = $1;
        chomp $string;
        $string =~ s/([,\.;\(\)\:])/ $1 /g; # squished these together 
        $string =~ s/\:\:/ :: )/g;          # typo in original
        my @array = split /\s+/, $string;   # split on one /or more/ spaces

        foreach my $word (@array) {
            chomp $word;
                        my $term=$word;
                        my $word_chars = "[\\w\\-_']";
                        my $word_part  = "antagon";
                        if ($word =~ m{$word_chars*?$word_part$word_chars+}) {
                            $term="<Drug>$word</Drug>";
                        }
                        push(@full,$term); # push 

        }
    }
    my $mod_str = join( " ", @full );
        say "<Sentence>$mod_str</Sentence>";
} 
```

这给了我以下输出，这是我对您期望的最佳猜测：

```
$ cat tmp.txt 
<Sentence>This in antagonizing the antagonist's antagonism pre-antagonistically.</Sentence>
$ cat tmp.txt | perl x.pl
<Sentence>this in <Drug>antagonizing</Drug> the <Drug>antagonist's</Drug> <Drug>antagonism</Drug> <Drug>pre-antagonistically</Drug> .</Sentence>
$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:18:50.483

```
perl -ne '$things{$1}++while s/([^ ;.,!?]*?antagon[^ ;.,!?]++)//;END{print "$_\n" for sort keys %things}' FILENAME 
```

如果文件包含以下内容：

```
he was an antagonist
antagonize is a verb
why are you antagonizing her?
this is an alpha-antagonist 
```

这将返回：

```
alpha-antagonist
antagonist
antagonize
antagonizing 
```

以下是常规（非单行）版本：

```
#!/usr/bin/perl
use warnings;
use strict;
open my $in, "<", "sample.txt" or die "could not open sample.txt for reading!";
open my $out, ">", "sample1.txt" or die "could not open sample1.txt for writing!";

my %things;

while (<$in>){
    $things{$1}++ while s/([^ ;.,!?]*?antagon[^ ;.,!?]++)//
}

print $out "$_\n" for sort keys %things; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:59:25.483

您可能想再看看您对方法的假设。在我看来，您正在寻找在单词列表一定距离内的单词。看看[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)公式，看看这是否是你想要的。但是请注意，计算这可能需要指数级的时间。

# php - 通过贝宝重定向时无法通过 POST 数据

> ID：13077049
> 
> 赞同：1
> 
> 时间：2012-10-25T20:50:46.913
> 
> 标签：php, javascript, html, paypal

我建立了一个网站，客户可以在其中输入他们的信息（姓名、地址等），并希望他们能够通过贝宝使用信用卡付款。效果很好。我已经设置了 Paypal 即时付款通知，并通过 paypal 设置客户被重定向到我的页面。除了数据没有被传递并保存到我的 SQL 数据库之外，这一切都正常工作。我知道将数据插入数据库的代码可以正常工作。问题是数据没有被传递到该页面，因为贝宝页面介于两者之间。

这是我的php

```
if (isset($_POST['child_name'])
    && isset($_POST['age'])
    && isset($_POST['hometown'])
    && isset($_POST['boy_girl'])
    && isset($_POST['email'])
    && isset($_POST['first_name'])
    && isset($_POST['last_name'])
    && isset($_POST['address1'])
    && isset($_POST['address2'])
    && isset($_POST['city'])
    && isset($_POST['state'])
    && isset($_POST['zip'])
    && isset($_POST['country']))  {
        $child_name = $_POST['child_name'];
        $age = $_POST['age'];
        $hometown = $_POST['hometown'];
        $boy_girl = $_POST['boy_girl'];
        $email = $_POST['email'];
        $first_name = $_POST['first_name'];
        $last_name = $_POST['last_name'];
        $address1 = $_POST['address1'];
        $address2 = $_POST['address2'];
        $city = $_POST['city'];
        $state = $_POST['state'];
        $zip = $_POST['zip'];
        $country = $_POST['country'];
} 
```

这是HTML

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="NT2YC6LP7SWBE">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<input type="hidden" name="child_name" id="child_name" value ="<? echo $child_name; ?>" maxlength="20"/>
<input type="hidden" name="age" id="age" value ="<? echo $age; ?>" maxlength="4"/>
<input type="hidden" name="hometown" id="hometown" value ="<? echo $hometown; ?>" maxlength="32"/>
<input type="hidden" name="boy_girl" id="boy_girl" value ="<? echo $boy_girl; ?>" maxlength="4"/>
<input type="hidden" name="first_name" id="first_name" value ="<? echo $first_name; ?>" maxlength="32"/>
<input type="hidden" name="last_name" id="last_name" value ="<? echo $last_name; ?>" maxlength="32"/>
<input type="hidden" name="email" id="email" value ="<? echo $email; ?>" maxlength="64"/>
<input type="hidden" name="address1" id="address1" value ="<? echo $address1; ?>" maxlength="64"/>
<input type="hidden" name="address2" id="address2" value ="<? echo $address2; ?>" maxlength="32"/>
<input type="hidden" name="city" id="city" value ="<? echo $city; ?>" maxlength="32"/>
<input type="hidden" name="state" id="state" value ="<? echo $state; ?>" maxlength="20"/>
<input type="hidden" name="zip" id="zip" value ="<? echo $zip; ?>" maxlength="10"/>
<input type="hidden" name="country" id="country" value ="<? echo $country; ?>" maxlength="32"/>
<input type="hidden" name="payment_type" id="payment_type" value ="paypal" maxlength="6"/>
<input type="hidden" name="paid" id="paid" value ="yes" maxlength="3"/>
<input type="hidden" name="mailed" id="mailed" value ="no" maxlength="3"/>
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

我只是采用了贝宝给我的表格并添加了隐藏的输入。这在另一个页面上完美运行，但这是因为 action 属性直接指向将插入数据的页面。在这里，操作将它们发送到贝宝的网站，而数据永远不会进入我的网站。我该如何调整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:05:48.230

由于流量，您无法执行此操作。两种解决方案：

*   尝试`custom`使用分隔符将所有信息存储在 Paypal 的字段（255 个字符）中

*   使用唯一键将自定义信息存储在数据库中，并将唯一键存储在`custom`字段中，以便稍后使用 IPN 响应检索它

在收到 IPN 响应之前，您不应该做任何与数据库相关的事情，这就是 IPN 的意义所在。您在这里描述的是 PDT，它依赖于客户在付款过程后返回您的页面，但这种情况并不总是发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:05:07.583

正如 kalpaitch 建议的那样，您应该将数据保存到会话中，并在访问者从贝宝页面返回时将其拉回。

# excel - 无法弄清楚为什么以下 VBA 宏失败

> ID：13077058
> 
> 赞同：0
> 
> 时间：2012-10-25T20:51:19.143
> 
> 标签：excel, vba

我正在尝试为从特定单元格开始的列中的每个单元格创建一个下拉列表。以下是我制作的：

```
Public Sub Dropdown()
    Dim dvList As String

    dvList = "Option1, Option2, Option3"

    With ActiveSheet.Range("C25").Resize(50, 1).Validation
        .Delete
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
        xlBetween, Formula:=dvList
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With
 End Sub 
```

我对这条线有疑问：

```
.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
            xlBetween, Formula:=dvList 
```

当我运行这段代码时，我不断得到：

```
Run-time error '1004':

Application-defined or object-defined error 
```

我不知道为什么会这样，看来这就是这样做的方法。有人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:34:31.657

尝试将其更改为`Formula1:=dvList`

# jquery - 仅适用于 300 像素高的页脚的视差效果？

> ID：13077065
> 
> 赞同：0
> 
> 时间：2012-10-25T20:51:22.840
> 
> 标签：jquery, css, parallax

我想在其余内容后面显示一个页脚，但我遇到的问题是我的网站继续滚动整个屏幕，而不仅仅是页脚的 300 像素高度。这是我到目前为止所拥有的：

[http://everetdale.com/starfalling.ca/](http://everetdale.com/starfalling.ca/)

如您所见，页脚已显示，但其上方的大量空白区域也是如此。这是一个做我想做的网站：

[http://ideaware.co/](http://ideaware.co/)

我怎样才能使它在页脚显示后停止滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:06:13.630

/ ***根据评论更新答案*** /

由于没有其他东西会移动，只有背景图像会“显示”视差类型的效果，我建议只使用 HTML/CSS 来演示，这里可以演示：

[http://jsfiddle.net/VyQdY/](http://jsfiddle.net/VyQdY/)

HTML 代码：

```
<div id="one">
     <p> Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. </p>
</div>
<div id="two">
    <p> Two Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text.     </p>
</div>
<div id="three">
    <p> And finally three Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. Lorem ipsum and other text. </p>
</div> 
```

以及各自的CSS：

```
#one, #two, #three {height: 600px; width:100%;}

#one {background: url(http://placekitten.com/600/800) top center fixed;}
#two {background: url(http://placekitten.com/700/800) center center fixed;}
#three {background: url(http://placekitten.com/600/850) top center fixed;} 
```

​ ​</p>

（*请原谅占位符小猫的背景图片*，**我什至不喜欢小猫**）

/ ***原始答案*** /

在不了解更多信息或查看您的代码的情况下，我可以说问题与整个页面的高度有关（可能是页脚上方的 div）。

您需要确保高度在到达页脚顶部时“停止滚动”。

如果您将代码粘贴到 jsfiddle 中，我可以帮助解释更多（甚至演示）。

此外，您似乎正在使用 javascript 来执行其中的一些操作 - 您是否计划在滚动时让不同的背景和图像在不同的时间移动，或者一切都是“静态的”并且只有在滚动时才“显示”？如果是这样，您只需使用 HTML 和 CSS 即可完成所有这些工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:03:03.433

javascript 计算两个主要 ol>li 的组合高度，并使用函数 setBodyHeight() 设置身体高度。因为您在顶部 li (#section-1) 中的内容要高得多，所以这个计算失败了。你应该开始检查这个...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:08:14.273

我已经阅读了你的源代码，我可以看到你有一个`li`元素来包含我假设的主要内容。现在这个元素正在动态地将它的`margin-top`CSS 规则从 0 更改为大约 600。我想知道这是否是你的问题，因为当你向下滚动时，由于这种`margin-top`变化，这个元素被迫变得非常高。

我无法准确找到您的问题，因为我以前没有使用`curtain.js`过，但也许可以尝试查看为什么您的元素获得如此高的值`margin-top`，看看您是否可以删除它。

我希望这有帮助！

# ms-access-2007 - 在验证规则中使用 LIKE 运算符

> ID：13077067
> 
> 赞同：0
> 
> 时间：2012-10-25T20:51:45.150
> 
> 标签：ms-access-2007

我有一个名为 TableA 和 TableB 的表。

表 A（fieldID、fieldType、fieldNo）

表 B（字段编号、字段 1、字段 2）

TableA - fieldNo 是一个 FK。TableB - fieldNo 是一个 PK。fieldType 是一个由 value1 和 value2 组成的组合框

我希望它只填写 fieldNo （在 TableA 中）的记录，其中 fieldType Like "value1" 使用验证规则。我尝试使用“如果”，但它不起作用。

# git - 将代码推送到多个来源

> ID：13077081
> 
> 赞同：2
> 
> 时间：2012-10-25T20:52:46.153
> 
> 标签：git, githooks, git-push

我想做一个*git push*，并且应该将更改推送到两个不同的来源。有没有办法用 git 的一个命令推送到多个来源？也许是一个不错的钩子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T23:12:35.147

我使用了两种方法来做到这一点。当我有一个分叉存储库和一个上游远程时，我发现一种方便的方法是使用远程`pushurl`上的配置选项。对于起源，它看起来像这样：

```
[remote "origin"]
    url = git@github.com:user/repo.git
    pushurl = git@github.com:user/repo.git
    pushurl = git@github.com:me/repo.git
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

在分叉存储库的情况下，我使用远程`pushurl`中的技巧`upstream`，并将其推送到我的分叉和上游存储库。它有助于使主分支保持同步而不必大惊小怪。

我还在我的基础架构上托管的存储库上使用了接收后挂钩，以将它们镜像到其他地方（如 GitHub）。post-receive 钩子如下所示：

```
nohup git push --mirror git@github.com:user/repo.git &> ~/.mirror.log 
```

然后我推送到我的服务器上的仓库，然后服务器推送到 GitHub 克隆。您需要确保正确设置了 SSH 密钥，但除此之外，这很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:58:33.533

也许将此添加到您的`.git/config`

```
[alias]
push2 = ! git push remote1 && git push remote2 
```

# erlang - Erlang中的函数相等和排序

> ID：13077084
> 
> 赞同：10
> 
> 时间：2012-10-25T20:52:59.827
> 
> 标签：erlang, undefined-behavior, ambiguity

`=:=`将 Erlang 中的函数与运算符, `==`, `<`, `>`, `=<`,进行比较是什么意思`>=`？

我正在和解释器一起玩，得到了这些结果：

```
Eshell V5.9.2  (abort with ^G)
1> X = fun() -> {} end.
#Fun<erl_eval.20.82930912>
2> Y = fun() -> {} end.
#Fun<erl_eval.20.82930912>
3> 
3> {X == X, X =:= X}.
{true,true}
4> {X >= X, X =< X}.
{true,true}
5> {X > X, X < X}.
{false,false}
6> 
6> {X == Y, X =:= Y}.
{true,true}
7> {X >= Y, X =< Y}.
{true,true}
8> {X > Y, X < Y}.
{false,false} 
```

这是有道理的。它看起来像是在比较两个函数的抽象语法树。

但是在本次会议中`X`，`Y`再次定义相同但不同，现在也一样`X<Y`吗？

```
Eshell V5.9.2  (abort with ^G)
1> X = fun() -> {} end.
#Fun<erl_eval.20.82930912>
2> 
2> {X == X, X =:= X}.
{true,true}
3> {X >= X, X =< X}.
{true,true}
4> {X > X, X < X}.
{false,false}
5> 
5> Y = fun() -> {} end.
#Fun<erl_eval.20.82930912>
6> 
6> {X == Y, X =:= Y}.
{false,false}
7> {X >= Y, X =< Y}.
{false,true}
8> {X > Y, X < Y}.
{false,true} 
```

所以看起来它没有比较 AST**或**任何类型的唯一引用。也许它正在比较参考，只是一些优化正在发生并`X`绑定`Y`到相同的参考？如果对此有一些解释，不同的虚拟机或不同的节点会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:57:48.680

shell中2次求值的区别来自于空行6>。如果您使用函数 erlang:fun_info/1 查看乐趣，您会看到在这种情况下，子句以不同的数字存储（即 2 而不是 1）。

如果你再次输入 Y 的定义（没有空行）你会得到一个不匹配的结果，如果你之前输入一个空行，就可以了。

我认为这是使用 shell 的副作用，但行为在程序中是一致的。当然 > 或 < 的含义并不明显，但 == 是的。还有一件好事是定义了 Erlang 术语的顺序，因此可以对具有可预测行为的任何术语列表进行排序：

```
number < atom < reference < fun < port < pid < tuple < list < bit string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-23T11:55:21.953

这种行为在 shell 和编译模块中是不同的。至于**模块**`==`中的and`=:=`运算符，我很确定这些运算符返回iff：**`true`**

 ***   这两个函数都在代码中的相同位置定义（在 shell 中不是这样！）
*   根据各自的 ( `==`/ `=:=`) 运算符，它们的有效闭包相等。

例如用代码

```
test(A, B) ->
  fun(C) -> {A, C} end. 
```

应满足以下条件：

```
> test(1, x) == test(1, y).
true.
> test(1, x) =:= test(1, y).
true.
> test(1, x) == test(1.0, y).
true.
> test(1, x) =:= test(1.0, y).
false. 
```

注意`B`不*属于*内部函数的闭包因此不影响比较结果。**

# c++ - 小缓冲区优化和对齐

> ID：13077086
> 
> 赞同：10
> 
> 时间：2012-10-25T20:53:04.063
> 
> 标签：c++, c++11

我正在围绕遗留 API编写*C++包装器。*这个 API 为我提供了一个指针值来保存额外的数据，我想用它来实现*小缓冲区优化*。

我已经实现了一个`is_small_pod` *元函数*来检查给定类型是否是*POD*并且它是否适合`void*`：

```
template< typename Type >
struct is_small_pod
  : std::integral_constant<
        bool
      , std::is_pod< Type >::type::value
        && sizeof( Type ) <= sizeof( void* )
    >
{}; 
```

我正在设置这样的值：

```
// void*& param;
if( detail::is_small_pod< Type >() )
{
    *static_cast< Type* >( &param ) = value;
} else {
    param = new Type( value );
} 
```

我是否正确实施了这种优化？*我相信当值对齐与指针的对齐*不兼容时，这将失败（可能是奇怪的角落情况）。这种情况甚至可能，还是我只是想多了？我应该如何扩展我的*元功能*以检查兼容的*对齐方式*？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T21:14:46.190

类型的对齐方式不可能大于该类型的大小。

> ### 3.11 对齐[basic.align]
> 
> [...]*对齐*是实现定义的整数值，表示可以分配给定对象的连续地址之间的字节数。
> 
> ### 5.3.3 大小[expr.sizeof]
> 
> *2 - [...] n*元素数组的大小是元素大小的*n*倍。

因此，您的代码只能中断 if `alignof(void *) < sizeof(void *)`，而在大多数平台上并非如此。

为了安全起见，你可以写：

```
template< typename Type >
struct is_small_pod
  : std::integral_constant<
        bool
      , std::is_pod< Type >::type::value
        && sizeof( Type ) <= sizeof( void* )
        && alignof( Type ) <= alignof( void* )
    >
{}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:17:58.033

就像一般方法一样，您始终可以尝试测试您的理论。我想你会做这样的事情：

```
template< class Type >
bool TestAlignmentSanity( Type value )
{
    // This function is only valid for small POD types
    if( !detail::is_small_pod< Type >() )
        return false;

    // Temporary space covering alignments spanning the size of a void*
    const int nBytes = sizeof(void*);
    char buffer[sizeof(Type) + nBytes - 1];

    // For each target alignment, test that a copy is successful.
    for( int i = 0; i < nBytes; i++ )
    {
       Type * target = static_cast< Type* >( &buffer[i] );

       // Sanity-check that the pointer was actually aligned as we requested
       if( (char*)target != &buffer[i] ) return false;

       // Copy and test that the result is as expected.  Assumes '==' operator
       // is defined...  Otherwise, implement with byte comparisons.
       *target = value;
       if( !(*target == value) ) return false;
    }

    return true;
} 
```

在这里，我测试了数据类型可以复制到任何跨越 a 大小的对齐方式中`void*`。这只是一个想法。=)

# ruby-on-rails-3 - 学习铁轨，尝试建立博客分类

> ID：13077087
> 
> 赞同：0
> 
> 时间：2012-10-25T20:53:08.033
> 
> 标签：ruby-on-rails-3

我正在建立一个分类的博客。我对如何在表单中实现分类有点坚持。我已经设置了一个有很多直通关系，并希望添加复选框以将博客与多个类别相关联。到目前为止，我将类别传递给视图，我可以将它们列出来，但是由于某种原因我无法让 form_for 方法工作。

这是我的代码。

博客模型

```
class Blog < ActiveRecord::Base
  attr_accessible :body, :title, :image
  has_many :categorizations
  has_many :categories, through: :categorizations
  has_attached_file :image, :styles => { :medium => "300x300>", :thumb => "100x100>" }

  validates :title, :body, :presence => true

end 
```

类别模型

```
class Category < ActiveRecord::Base
  has_many :categorizations
  has_many :blogs, through: :categorizations
  attr_accessible :name
end 
```

分类模型

```
class Categorization < ActiveRecord::Base
  attr_accessible :blog_id, :category_id
  belongs_to :blog
  belongs_to :category
end 
```

博客新控制器

```
 def new
    @blog = Blog.new
    @categories = Category.all

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @blog }
    end
  end 
```

博客新表单视图

```
<%= form_for(@blog, :url => blogs_path, :html => { :multipart => true }) do |f| %>
  <% if @blog.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@blog.errors.count, "error") %> prohibited this blog from being saved:</h2>

      <ul>
      <% @blog.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
   <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
   <div class="field">
    <%= f.file_field :image %>
  </div>
  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </div>
  <div class="field">
    Categories:
    <% @categories.each do |category| %>
      <% fields_for "blog[cat_attributes][]", category do |cat_form| %>
        <p>
          <%= cat_form.check_box :name %>
        </p>
      <% end %>
    <% end %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

这段代码是我的失败点

```
<% @categories.each do |category| %>
          <% fields_for "blog[cat_attributes][]", category do |cat_form| %>
            <p>
              <%= cat_form.check_box :name %>
            </p>
          <% end %>
        <% end %> 
```

尽管我并不积极，但由于我目前正在学习，我正在接近其中的任何一个。关于如何实现这一点的任何建议。

谢谢，CG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:14:47.610

首先，您可能不需要单独`Categorization`的模型，除非有您未在此处描述的用例。您可以像这样设置多对多关系：

```
class Blog < ActiveRecord::Base
  has_and_belongs_to_many :categories
end

class Category < ActiveRecord::Base
  has_and_belongs_to_many :blogs
end 
```

你应该有一个这样的数据库表：

```
class CreateBlogsCategories < ActiveRecord::Migration
  def change
    create_table :blogs_categories, id: false do |t|
      t.references :blog
      t.references :category
    end
  end
end 
```

然后你可以像这样构造视图：

```
<div class="field">
  Categories:
  <% @categories.each do |category| %>
    <%= label_tag do %>
      <%= check_box_tag 'blog[category_ids][]', category.id, @blog.category_ids.include?(category.id) %>
      <%= category.name %>
    <% end %>
  <% end %>
</div> 
```

最后，在您的`form_for`, 您指定`url: blogs_path`- 如果您也计划将此表单用于`edit`操作，则应将其删除，因为这应该生成对`/blogs/:id`. 假设您`resources :blogs`在 routes.rb 中使用，Rails 将根据用于呈现表单的操作为您确定正确的路径。

# json - f# 类构造函数格式化

> ID：13077088
> 
> 赞同：3
> 
> 时间：2012-10-25T20:53:09.563
> 
> 标签：json, visual-studio, constructor, f#

我正在创建一个接收电子邮件并将其转换为 json 的程序。为了学习函数式语言，我认为这将是学习 F# 的好机会。所以首先我想要一个可以轻松序列化为 json 的消息类。这个类将有一些可以为空的成员。由于这些可选参数，我使用以下格式

```
type Email(from:string, recipient:string, ?cc:string .........) =
    member x.From = from
    member x.Recipient = recipient..... 
```

这个类实际上有很多成员，因为我想存储电子邮件可能包含的每条信息。如果我尝试通过将构造函数拆分为多行来自己格式化构造函数，会发生什么情况，我会收到警告。人们如何在 f# 中让如此庞大的构造函数看起来不错？有一个更好的方法吗？

在类似的说明中，我没有发现 Visual Studio 对 f# 很有帮助，其他人用什么来编码？例如，我认为emacs有一种模式......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:59:13.113

如果所有“换行符”参数都从同一列开始，则不应出现任何警告。例如：

```
type Email(from:string, recipient:string,
           ?cc:string) =
    member x.From = from
    member x.Recipient = recipient 
```

（我个人喜欢使用 Visual Studio for F#。我怀疑是否有支持更完整的 IDE。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:03:31.147

*作为创建将所有*属性作为参数的构造函数的替代方法，您还可以创建具有可变属性的对象，然后仅指定要在构造中设置的那些：

```
type Email(from:string, recipient:string) =
  member val From = from with get, set
  member val Recipient = recipient with get, set
  member val Cc = "" with get, set
  member val Bcc = "" with get, set

let eml = Email("me@me.com", "you@you.com", Cc="she@she.net") 
```

这是使用`member val`F# 3.0 的新功能。在 F# 2.0 中编写相同的代码会很烦人，因为您必须手动定义 getter 和 setter。

# android - JQueryMobile - 通过滑动更改页面

> ID：13077091
> 
> 赞同：0
> 
> 时间：2012-10-25T20:53:26.897
> 
> 标签：android, jquery, html, jquery-mobile, launcher

有谁知道我是否可以通过使用滑动事件并在手指滑动的同时移动页面来更改页面？谢谢！

我已经用谷歌搜索了它，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:40:18.950

会有 JQM 1.0b2[分页](http://filamentgroup.com/examples/jqm-pagination/demo/)（待更新 - 见[这里](https://forum.jquery.com/topic/jqm-pagination-plugin)）

当您浏览它们时，插件会更改页面。也许是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:47:48.630

我只是在寻找同样的东西。看看这个：[http ://www.idangero.us/sliders/swiper/](http://www.idangero.us/sliders/swiper/)

# java - 自定义摇摆 JTextComponent

> ID：13077106
> 
> 赞同：-3
> 
> 时间：2012-10-25T20:54:19.590
> 
> 标签：java, swing, jtextarea, nimbus, jtextcomponent

我想创建一个 JTextArea，它看起来像 JTextArea，行为像 JTextArea，响应像 JTextArea，说话像 JTextArea，移动像 JTextArea 等，但不是 JTextArea。

简而言之，我想创建一个 100% 基于 JTextArea 的自定义摆动组件。一旦我这样做了，我将能够更改 JTextArea 的其他硬编码属性并制作我自己的自定义 JTextArea。没有按我需要的方式设计的预定义摆动组件，但 JTextArea 是最接近的，这就是我选择它的原因。

我想更改 JTextArea 行之间的间距。不，我不想使用 JtextPane，我已经尝试过了，它不适用于我的程序，它计算它的位置不同，看起来也不同，并且应用 JtextArea 边框只会让事情变得更糟。

**我不是在尝试扩展 JTextArea，而是在尝试创建一个自定义 JTextArea，就像在[自定义 swing 组件](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)中一样，使用更改的硬编码属性，这些属性通过 JTextAreas 方法无法配置。**

但是，我不知道该怎么做。我一直在互联网上查找它，但只有一个关于从 strath 构建自己的组件的广泛指南......

弄清楚这将花费很多时间，并且不会真正解决我的问题。

我唯一要做的就是创建一个类（或几个类），其中包含构建 JTextArea 的所有内容。从 JTextComponent 级别开始，复制所有用于创建 JTextArea 的较低级别的类。我还想指出，我使用 Nibus 的外观和感觉，我认为可能需要包含一些类才能使自定义 JTextArea 在该 LAF 下正常运行。

我查看了 swing 的源代码，里面充满了一切。考虑到我对核心挥杆结构和机制一无所知，弄清楚在创建 JTextArea 时使用了哪些类或其部分将是一个耗时的噩梦。

这就是为什么我要求有知识的人至少列出我需要复制 JTextArea 的类，然后我会弄清楚如何组合它们。

因为，如果我现在开始学习挥杆核心机制，可能需要几天和几周的时间才能弄清楚，但是对于知道的人来说，只需几分钟就可以列出我需要集中精力的所有课程注意。

我想在这里走捷径。我不想完全理解摇摆，我只是想让这个东西工作。默认间距太低一个像素，我想做的就是让它高那个像素。我不想知道画家是如何将组件绘制到屏幕上的，我只想知道它是从哪里调用的以及它自称为什么......

感谢任何花时间的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T21:56:56.953

> 我想更改 JTextArea 行之间的间距

我的第一个想法是覆盖`javax.swing.JTextArea#getRowHeight`就足够了。javadoc明确指出

> 定义行高的含义。这默认为字体的高度。

所以我希望通过覆盖这个方法，你可以调整定义，你会得到更多的行间距。糟了，没用。快速搜索 JDK 中该方法的用法也发现了同样的情况。主要是用来计算一些尺寸的，但是在组件内部绘制文字的时候肯定不会用到。

通过查看该`javax.swing.text.PlainView#paint`方法的源代码，我看到`FontMetrics`使用了 ，并且您可以在`JTextArea`. 所以第二种方法是扩展`JTextArea`（bwah，扩展 Swing 组件，但它是为了概念验证）

```
 private static class JTextAreaWithExtendedRowHeight extends JTextArea{
    private JTextAreaWithExtendedRowHeight( int rows, int columns ) {
      super( rows, columns );
    }

    @Override
    public FontMetrics getFontMetrics( Font font ) {
      FontMetrics fontMetrics = super.getFontMetrics( font );
      return new FontMetricsWrapper( font, fontMetrics );
    }
  } 
```

该类`FontMetricsWrapper`基本上代表了除`getHeight`方法之外的所有内容。在那个方法中，我在委托的结果中添加了 10

```
@Override
public int getHeight() {
  //use +10 to make the difference obvious
  return delegate.getHeight() + 10;
} 
```

这会导致更多的行间距（以及一个太长的插入符号，但可能可以调整）。

一个小屏幕截图来说明这一点（不像其他一些那样好，但它表明这种方法可能有效）：

![普通文本区域和扩展文本区域之间的区别](../Images/c472b579aa469670ea2c245b4f574669.png)

小免责声明：这感觉就像一个丑陋的黑客，可能会导致意想不到的问题。我确实希望有人提出更好的解决方案。

# python - 如何创建一个加密的 django 字段，在从数据库中检索数据时转换数据？

> ID：13077109
> 
> 赞同：18
> 
> 时间：2012-10-25T20:54:30.277
> 
> 标签：python, django, pycrypto

我有一个自定义的 EncryptedCharField，我希望在连接 UI 时基本上显示为 CharField，但在数据库中存储/检索之前，它会对其进行加密/解密。

自[定义字段文档](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)说：

1.  添加`__metaclass__ = models.SubfieldBase`
2.  覆盖 to_python 以将数据从其原始存储转换为所需的格式
3.  覆盖 get_prep_value 以在存储数据库之前转换值。

所以你认为这很容易 - 2\. 只需解密值，3\. 只需加密它。

松散地基于[django 片段](http://djangosnippets.org/snippets/1095/)，该字段的文档如下所示：

```
class EncryptedCharField(models.CharField):
  """Just like a char field, but encrypts the value before it enters the database, and    decrypts it when it
  retrieves it"""
  __metaclass__ = models.SubfieldBase
  def __init__(self, *args, **kwargs):
    super(EncryptedCharField, self).__init__(*args, **kwargs)
    cipher_type = kwargs.pop('cipher', 'AES')
    self.encryptor = Encryptor(cipher_type)

  def get_prep_value(self, value):
     return encrypt_if_not_encrypted(value, self.encryptor)

  def to_python(self, value):
    return decrypt_if_not_decrypted(value, self.encryptor)

def encrypt_if_not_encrypted(value, encryptor):
  if isinstance(value, EncryptedString):
    return value
  else:
    encrypted = encryptor.encrypt(value)
    return EncryptedString(encrypted)

def decrypt_if_not_decrypted(value, encryptor):
  if isinstance(value, DecryptedString):
    return value
  else:
    encrypted = encryptor.decrypt(value)
    return DecryptedString(encrypted)

class EncryptedString(str):
  pass

class DecryptedString(str):
  pass 
```

加密器看起来像：

```
class Encryptor(object):
  def __init__(self, cipher_type):
    imp = __import__('Crypto.Cipher', globals(), locals(), [cipher_type], -1)
    self.cipher = getattr(imp, cipher_type).new(settings.SECRET_KEY[:32])

  def decrypt(self, value):
    #values should always be encrypted no matter what!
    #raise an error if tthings may have been tampered with
    return self.cipher.decrypt(binascii.a2b_hex(str(value))).split('\0')[0]

  def encrypt(self, value):
    if value is not None and not isinstance(value, EncryptedString):
      padding  = self.cipher.block_size - len(value) % self.cipher.block_size
      if padding and padding < self.cipher.block_size:
        value += "\0" + ''.join([random.choice(string.printable) for index in range(padding-1)])
      value = EncryptedString(binascii.b2a_hex(self.cipher.encrypt(value)))
    return value 
```

保存模型时，由于尝试解密已解密的字符串，会发生错误，即奇数长度字符串。调试时，显示为 to_python 最终被调用了两次，第一次使用加密值，第二次使用解密值，但实际上不是作为 Decrypted 类型，而是作为原始字符串，导致错误。此外，永远不会调用 get_prep_value。

我究竟做错了什么？

这不应该那么难 - 有没有人认为这个 Django 字段代码写得很糟糕，尤其是在自定义字段方面，而且没有那么可扩展？简单的可覆盖 pre_save 和 post_fetch 方法可以轻松解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T14:20:22.007

我认为问题是当您为自定义字段分配值时也会调用 to_python （作为验证的一部分，基于[此链接](https://docs.djangoproject.com/en/dev/ref/forms/validation/)）。所以问题是在以下情况下区分to_python调用：

1.  当 Django 将数据库中的值分配给该字段时（那是您要解密该值的时候）
2.  当您手动为自定义字段分配值时，例如 record.field = value

您可以使用的一种技巧是向值字符串添加前缀或后缀并进行检查，而不是进行*isinstance*检查。

我打算写一个例子，但我发现了这个（更好:)）。

检查**BaseEncryptedField**： [https://github.com/django-extensions/django-extensions/blob/2.2.9/django_extensions/db/fields/encrypted.py](https://github.com/django-extensions/django-extensions/blob/2.2.9/django_extensions/db/fields/encrypted.py)（链接到旧版本，因为该字段在 3.0.0 中被删除；有关弃用的原因，请参见[问题 #1359 ）](https://github.com/django-extensions/django-extensions/issues/1359)

*来源*： [Django 自定义字段：仅对 DB 中的值运行 to_python()？](https://stackoverflow.com/questions/4510162/django-custom-field-only-run-to-python-on-values-from-db)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T20:56:49.887

你应该覆盖`to_python`，就像片段一样。

如果您查看`CharField`该类，您会发现它没有`value_to_string`方法：

*   [`django/db/models/fields/__init__.py`](https://github.com/django/django/blob/master/django/db/models/fields/__init__.py#L621)

[文档](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.to_python)说该方法`to_python`需要处理三件事：

*   正确类型的实例
*   一个字符串（例如，来自反序列化器）。
*   无论数据库为您使用的列类型返回什么。

您目前只处理第三种情况。

处理此问题的一种方法是为解密的字符串创建一个特殊类：

```
class DecryptedString(str):
   pass 
```

然后你可以检测到这个类并处理它`to_python()`：

```
def to_python(self, value):
    if isinstance(value, DecryptedString):
        return value

    decrypted = self.encrypter.decrypt(encrypted)
    return DecryptedString(decrypted) 
```

这可以防止您多次解密。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T21:44:54.897

您忘记设置元类：

```
class EncryptedCharField(models.CharField):
    __metaclass__ = models.SubfieldBase 
```

自[定义字段文档](https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/#the-subfieldbase-metaclass)解释了为什么这是必要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-27T21:50:26.560

由于最初回答了这个问题，因此已经编写了许多包来解决这个确切的问题。

例如，截至 2018 年，包[django-encrypted-model-fields](https://pypi.org/project/django-encrypted-model-fields/)使用如下语法处理此问题

```
from encrypted_model_fields.fields import EncryptedCharField

class MyModel(models.Model):
    encrypted_char_field = EncryptedCharField(max_length=100)
    ... 
```

根据经验，当存在更成熟的解决方案时，推出自己的解决方案来应对安全挑战通常是一个坏主意——社区是比你更好的测试人员和维护人员。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T21:50:14.160

您需要添加一个处理多种情况的 to_python 方法，包括传递已解密的值

（警告：片段是从我自己的代码中截取的——仅用于说明）

```
def to_python(self, value):
    if not value:
        return
    if isinstance(value, _Param): #THIS IS THE PASSING-ON CASE
        return value
    elif isinstance(value, unicode) and value.startswith('{'):
        param_dict = str2dict(value)
    else:
        try:
            param_dict = pickle.loads(str(value))
        except:
            raise TypeError('unable to process {}'.format(value))
    param_dict['par_type'] = self.par_type
    classname = '{}_{}'.format(self.par_type, param_dict['rule'])
    return getattr(get_module(self.par_type), classname)(**param_dict) 
```

顺便一提：

而不是`get_db_prep_value`您应该使用`get_prep_value`（前者用于特定于数据库的转换 - 请参阅[https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/#converting-python-objects-to-query-values](https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/#converting-python-objects-to-query-values)）

# visual-studio-2010 - Visual Studio 2010 支持的代码模型

> ID：13077112
> 
> 赞同：1
> 
> 时间：2012-10-25T20:54:40.513
> 
> 标签：visual-studio-2010

我正在为 Visual Studio 2010 开发一个插件，对于某些功能，我需要访问与项目项关联的 FileCodeModel 提供的事件。到目前为止，这已经过测试，并且在 C#、VB.Net 和 C++ 中运行良好（尽管每个模型都有其陷阱）。

我试图为 F# 项目重用相同的代码，但似乎代码模型机制中不支持 F#。通过调试器，我看到相应 ProjectItem 的 FileCodeModel 属性为空。

所以我的问题是，Visual Studio 2010 中支持 CodeModel 机制的语言有哪些？它适用于 F# 吗？Javascript 呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:03:18.847

[此处记录了](http://msdn.microsoft.com/en-us/library/envdte.codemodel.language%28v=vs.110%29.aspx#Y0)该`CodeModel.Language`属性。它有**C#、C++、F#、JScript**和**VB.NET**中的代码示例。

 ****Visual Studio[中的每种语言都不支持](http://msdn.microsoft.com/en-us/library/envdte.codemodel%28v=vs.110%29.aspx)CodeModel 对象的某些成员。****

# jquery - Lightview 使用 jQuery 在页面加载时打开链接

> ID：13077115
> 
> 赞同：0
> 
> 时间：2012-10-25T20:54:50.810
> 
> 标签：jquery, load, lightbox

我想让 jQuery 在使用 Lightview 插件加载页面时打开一个特定的 YouTube 视频：( [http://projects.nickstakenburg.com/lightview](http://projects.nickstakenburg.com/lightview) )。

有关执行此操作的代码的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:12:01.553

这很简单，使用这种形式的代码：

```
$(function(){
    //Your lightbox code
}); 
```

`function`当页面完成加载时，将调用其中的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:21:09.483

这成功了。

```
<script>
$(document).ready(function()
     {

    Lightview.show({
url: 'http://www.youtube.com/embed/kBqj7GjN4Mo?autoplay=1&autohide=1&border=0&egm=0&showinfo=0&showsearch=0',
type: 'iframe',
options: {
width: 638,
height: 360,
viewport: 'scale'
}
});

    });

</script> 
```

# javascript - 为什么我不能在 Javascript 深度克隆数组上执行 forEach？

> ID：13077116
> 
> 赞同：1
> 
> 时间：2012-10-25T20:54:53.883
> 
> 标签：javascript, arrays, clone

这给了我一个关于数字 1、2 和 3 的警报。

```
[1,2,3].forEach(alert); 
```

这给了我一个错误：

```
$.extend(true, {}, [1,2,3]).forEach(alert); 
```

错误：

```
TypeError: Object #<Object> has no method 'forEach' 
```

为什么会发生这种情况，如何循环克隆对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:57:08.933

您的`.extend()`调用是创建一个普通对象，而不是一个数组。（也就是说，您实际上并没有创建“深度克隆数组”。）没有像`.forEach`普通对象那样的迭代器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:00:53.560

原因很简单，因为数组`[]`有`forEach`方法，而对象`{}`没有。

如果你有一个对象数组，你可以`forEach`通过数组。
如果你有一个对象，它的一个属性是一个数组，你可以`forEach`像`obj.arr.forEach`.
如果你有一个数组数组，每个数组都有对象，数组作为属性，你可以设置一个函数，`forEach`通过外部数组，然后`forEach`通过内部数组的对象，然后访问保存数组的对象的属性，然后`forEach`通过那个。

但是你不能`{}.forEach`使用 vanilla JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:56:25.813

我认为你想要的方法是**.each()**

没关系，我看错了你的问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T17:02:48.197

如果要循环遍历对象数组，可以使用，

```
var numbs = $.extend(true, {}, [1,2,3]);

for (var numb in numbs){
    alert(numbs[numb]);
} 
```

在小提琴中工作。 [http://jsfiddle.net/v6KFn/](http://jsfiddle.net/v6KFn/)

# ssl - 来自受信任的 CA 列表的证书未由服务器返回给客户端

> ID：13077120
> 
> 赞同：3
> 
> 时间：2012-10-25T20:55:07.733
> 
> 标签：ssl, certificate, ssl-certificate

我有一个托管需要客户端证书的 SSL 网站的 W2K8 R2 SP1 服务器。我们有一个根证书（自签名），保存在本地机器受信任的 CA 存储中。在客户端，浏览器要求提供客户端证书，并且工作正常。

现在，我们有另一个根证书，它也保存在本地机器受信任的 CA 存储中。问题是浏览器不提供选择由该根 CA 颁发的客户端证书。

浏览器不提示的原因是服务器已配置（默认选项）向客户端返回受信任的根 CA 列表，以帮助它限制可供选择的客户端证书列表。如果我们将服务器配置为不提供此列表（HKLM/system/currentcontrolset/control/securityproviders/schannel/sendtrustedissuerlist=0），则浏览器没有线索并显示所有客户端证书，然后它就可以正常工作。

过去我们遇到过这样的问题，因为受信任的 CA 列表太长，因此在返回给客户端时被截断，但这里不是这种情况，只返回 8 个受信任的 CA。

此外，如果我在另一个（非常相似的）服务器上注册这个新的根 CA，它可以正常工作，返回的受信任列表包含新的 CA。

我真的不知道为什么这个特定的服务器在 SSL 协商期间拒绝在列表中返回我的根 CA，有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-18T23:40:24.713

不确定这是否对您或其他人有帮助，但根据 Microsoft 及其 Windows Server 2012 文档，您的问题似乎与此有关：

“如果使用的**受信任的根证书颁发机构**存储包含根（自签名）和证书颁发机构 (CA) 颁发者证书的混合，则默认情况下仅将 CA 颁发者证书发送到服务器”。

请记住，您可以为“证书信任列表”（CTL）使用不同的存储。“**客户端身份验证颁发**者”存储首先被检查/使用（默认情况下在 Windows Server 2012 上），然后如果为空“**受信任的根证书颁发机构**”存储。

如果您在 2012 年，您可以手动配置 CTL 存储，但我认为 2008 R2 上不存在该选项（尽管我可能弄错了）。

# jquery - 一次加载一个标签页

> ID：13077126
> 
> 赞同：1
> 
> 时间：2012-10-25T20:55:37.920
> 
> 标签：jquery, tabs

我需要加载每个选项卡的内容，一次一个，直到用户单击每个表单上的提交按钮。

我知道这已经解决了好几次，但我找不到关于如何在标签中加载我的内容的具体答案。所以这里是：

父页面 HTML

```
<!--Content Area -->
<div id="tab-container">
<!--Tabs Area -->
<div id="tabs">
    <ul>
                <li><a href="#tabs-1">PAGE1</a></li>
                <li><a href="#tabs-2">PAGE2</a></li>
                <li><a href="#tabs-3">PAGE3</a></li>
                <li><a href="#tabs-4">PAGE4</a></li>
                <li><a href="#tabs-5">PAGE5</a></li>
                <li><a href="#tabs-6">PAGE6</a></li>
    </ul>
<!--End Tabs Area -->
<!--Tabs Content Area -->
    <div id="tab-content">
            <div id="tabs-1">
            </div>
            <div id="tabs-2">
            </div>
            <div id="tabs-3">
            </div> 
            <div id="tabs-4">
            </div>        
            <div id="tabs-5">
            </div>  
            <div id="tabs-6">
            </div>  
    </div>            
</div>
<!--End Tabs Content Area-->
</div>
<!--End Content Area-->
</div> 
```

JAVASCRIPT

```
$(function() {

    $("#tabs").tabs({disabled: [0,1,2,3,4,5]});

)};

        $('#tabs-1').load('data/PAGE1.htm');
        $('#tabs-2').load('data/PAGE2.htm');
        $('#tabs-3').load('data/PAGE3.htm');
        $('#tabs-4').load('data/PAGE4.htm');
        $('#tabs-5').load('data/PAGE5.htm');
        $('#tabs-6').load('data/PAGE6.htm'); 
```

带表格的子页面

JAVASCRIPT

```
$(function() {
    $('#submit1').click(function() {
        var name= $("#firstname").val();
        var genderx= $("#gender").val();
        $.ajax({
            async : "false",
            type: "POST", 
            url: "http://localhost/test/ActionServlet",
            data: { step : 1, firstname: name, gender: genderx },
            success: function(data) {
                var $emptabs = $('#tabs').tabs();
                var selected = $emptabs.tabs('option', 'selected');
                $emptabs.tabs("option", "disabled", []);
                $emptabs.tabs('select', selected+1);
                $emptabs.tabs("option", "disabled", [0,2,3,4,5]);
                $("h2").html(data);
            }

        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:19:01.257

好的，我已经找到了解决方案，并将与大家分享。这实际上是 - 从我看到其他人所做的 - 一种更简单的方法来做到这一点。

回顾一下 - 每个选项卡都有一个表单，并且只有具有焦点的选项卡被启用 - 所有其他选项卡都被禁用。每次提交表单时，服务器都会进行回调以验证是否收到了数据，并显示一条显示已收到信息的消息 - 这是为了确保不会将重复的信息提交到数据库，但不会将任何信息添加到此时的数据库。在流程结束时，有一个最终提交按钮，它将提交所有表单以最终包含到数据库中。

在我们尝试一次加载一个页面而不是同时加载所有页面之前，所有这些都运行良好。从父页面加载到第一个选项卡的内容出现之间存在严重延迟——这就是所有这一切的开始。不管出于什么原因，可以在 HTML 中工作的解决方案在 JSP 中不起作用，但我们最终想出了以下在这两种情况下都可以工作的解决方案。

父页面 -

JAVASCRIPT - HEAD 标记中的页面顶部

```
var $emptabs;
$(function() {
    $("#tabs").tabs({disabled: [0,1,2,3,4,5]});
    $emptabs = $('#tabs').tabs();
}); 
```

HTML

```
<!--Tabs Area -->
    <div id="tabs">
        <ul>
                <li><a href="#tabs-1">Personal</a></li>
                <li><a href="#tabs-2">Emergency</a></li>
                <li><a href="#tabs-3">Job Related</a></li>
                <li><a href="#tabs-4">Salary</a></li>
                <li><a href="#tabs-5">Miscellaneous</a></li>
                <li><a href="#tabs-6">Dependents</a></li>
        </ul>
<!--End Tabs Area -->
<!--Tabs Content Area -->
    <div id="tab-content">
            <div id="tabs-1">
            </div>
            <div id="tabs-2">
            </div>
            <div id="tabs-3">
            </div>
            <div id="tabs-4">
            </div>       
            <div id="tabs-5">
            </div> 
            <div id="tabs-6">
            </div> 
        </div>           
    </div>
<!--End Tabs Content Area--> 
```

JAVASCRIPT - 页面底部必须在标签代码之后

```
 $('#tabs-1').load('tabeedata/EmployeeGenInfo.htm'); 
```

这是子页面的代码 - 带有表单的页面。

JAVASCRIPT -

```
$(function() {
    $('#submit1').click(function() {
        var name= $("#firstname").val();
        var genderx= $("#gender").val();
        $.ajax({
            async : "false",
            type: "POST",
            url: "http://localhost/test/ActionServlet",
            data: { step : 1, firstname: name, gender: genderx },
            success: function(data) {       
                var selected = $emptabs.tabs('option', 'selected');
                $emptabs.tabs("option", "disabled", []);
                $('#tabs-2').load('tabeedata/EmployeeEmergInfo.htm');
                $emptabs.tabs('select', selected+1);
                $emptabs.tabs("option", "disabled", [0,2,3,4,5]);   
                $("h2").html(data);
            }     
        });
    });
}); 
```

正如亚当斯建议的那样

```
$('#tabs-1').load('page.htm'); 
```

在成功处理程序中，除非我们摆脱了个人，否则它不会起作用

```
$emptabs = $('#tabs').tabs(); 
```

调用并在父页面上进行全局调用，如下所示：

```
var $emptabs;
$(function() {
    $("#tabs").tabs({disabled: [0,1,2,3,4,5]});
    $emptabs = $('#tabs').tabs();
}); 
```

然后我们就可以调用提交按钮上的每个页面。

# php - 组合出生日期字段以保存到数据库中

> ID：13077128
> 
> 赞同：0
> 
> 时间：2012-10-25T20:55:43.713
> 
> 标签：php, mysql, date

我目前有一个表格，要求在单独的下拉列表中输入每一个。

天 | 月 | 年

当我插入数据库时​​，我执行以下操作，但它插入的只是 00-00-0000。

```
$_POST['date'] = $_POST['dob_day'].'-'.$_POST['dob_month'].'-'.$_POST['dob_year'];

//I then do my insert and I'm inserting this..

mysql_real_escape_string($_POST['date']) 
```

似乎是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:58:05.330

1.  不要为 $_POST 分配任何东西，这是非常糟糕的做法。
2.  mySQL 中的日期应该被格式化`YYYY-MM-DD`。

`$date = $_POST['dob_year'] . '-' . $_POST['dob_month'] . '-' . $_POST['dob_day'];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:57:22.130

您将数据分配给不正确的 POST。

`$date = $_POST['dob_day'].'-'.$_POST['dob_month'].'-'.$_POST['dob_year'];`

然后插入`$date`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:00:03.183

如果您的值在此之后为空，则说明您没有正确使用 POST。我对其进行了一些更改以使其更具可读性：

```
$day = $_POST['dob_day'];
$month = $_POST['dob_month'];
$year = $_POST['dob_year'];

$date = $day . '/' . $month . '/' . $year;
$insert = "INSERT INTO table('dob') VALUES('$date')";
// then run $insert 
```

# tridion - 使用代码的 Tridion 发布 (PublisherFramework)

> ID：13077129
> 
> 赞同：4
> 
> 时间：2012-10-25T20:55:44.780
> 
> 标签：tridion

我正在尝试在工作流程期间发布页面。在工作流程过程中，我们要发布两种环境：一种用于*测试*，一种用于*生活*。在我们发布进行*测试*的第一个自动活动期间，在该过程中，页面上的组件不需要获得批准。我们让它发挥作用。

但是，当我们批准页面并且页面正在发布到*live*时，我们需要确保我们只发布批准的组件（即主要版本）。

在我的代码中，我使用的是 Page.Publish 方法，但是我不能指定它应该只发布已批准的项目。

publish 方法接受一个名为 的参数`activateWorkflow`。设置为`True`它会发布已批准和未批准的项目；但是当设置为`False`它时，它会被添加到队列中，我们会收到一条成功消息，但没有任何内容被发布。

任何人有任何想法我可以如何解决这个问题，使用发布方法而不需要手动检查？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T01:27:08.947

在通过组件工作流并且必须发布静态页面（没有动态组件演示）时，我遇到了类似的问题。

正如您所提到的，在发布测试时，只需执行 activateWorkflow=true。对于您的 Live 环境，您需要在工作流程完成后开始发布。我已经通过事件系统解决了这个问题。这里有一篇文章更详细地讨论了这一点，可能会对您有所帮助：

[http://www.tridiondeveloper.com/autopublishing-on-workflow-finish](http://www.tridiondeveloper.com/autopublishing-on-workflow-finish)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:10:55.660

不清楚您在哪里执行活动，您是在 Visio 中的工作流活动中执行此操作吗？

发布将始终仅发布处于该目标的已批准状态的项目和已完成工作流的项目（主要版本）。

综上所述，我相信您获得空 PublishTransacctions 的原因是因为您在完成页面工作流活动之前对新项目调用 Publish() 方法（这意味着您的新项目仍在工作流中，因此 false 值意味着存在没有什么可发布的不在工作流程中）。尝试在调用 Publish() 方法之前调用 FinishActivity()。

也许您可以从最后一步发布您的代码，以便我们可以准确地看到您在做什么。

# ios - 如何将填充有十六进制值的 NData 转换为 NSString

> ID：13077136
> 
> 赞同：0
> 
> 时间：2012-10-25T20:56:10.323
> 
> 标签：ios, nsstring, nsdata, nslog

我有一个 NSdata 对象，其中填充了一堆以十六进制格式格式化的信息。我正在尝试将其转换为正确的字符串表示形式，但正在努力取得任何成功。

我尝试过的一件事是简单地将其放入 NSString 中，然后使用特殊字符标识符对其进行 NSLog 操作 .. 忘记了单词 (%02x)，但是要做到这一点，我将其编码为 NSUTF16 .. 我不想做.. 我很想看看我得到的数据到底是什么样的一个 NSString。

我这样做的原因是因为稍后在我的代码中我的编码出现了一些问题，我不确定是因为我收到的数据不正确，还是我在处理它的某个时候把它填满了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:26:21.900

您可以像这样获得 NSData 的字符串表示形式：

```
NSData *data = (your data)
NSString *string = [NSString stringWithCString:[data bytes] encoding:NSUTF8StringEncoding]; 
```

这是否回答你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:22:59.963

试试这个——

```
-(NSString*)hexToString:(NSData*)data{
    NSString *hexString = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
    if (([hexString length] % 2) != 0)
        return nil;

    NSMutableString *string = [NSMutableString string];

    for (NSInteger i = 0; i < [hexString length]; i += 2) {

        NSString *hex = [hexString substringWithRange:NSMakeRange(i, 2)];
        NSInteger decimalValue = 0;
        sscanf([hex UTF8String], "%x", &decimalValue);
        [string appendFormat:@"%d", decimalValue];
    }

    return string;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:19:55.520

也许我还没有理解，但是像这样：

```
NSData *yourData;
NSLog(@"%@", [yourData description]); 
```

不符合您的需要？

# algorithm - 我可以使用什么算法来构建调查？

> ID：13077138
> 
> 赞同：0
> 
> 时间：2012-10-25T20:56:18.677
> 
> 标签：algorithm

我想了解用于构建可以根据先前答案跳过问题的调查的算法、数据结构。一个关键要求是算法必须允许一个问题节点可以有多个条目（如下所示，问题 5 可以从问题 1 或问题 3 跳转到）。此外，该算法应该允许插入另一个问题（在 3 和 4 之间插入新问题）

例如

1.  你是男的吗？（如果是，请跳至 5）。
2.  你今年多大？
3.  你有……的历史吗？（如果是，请跳至 5）。
4.  你住在……附近吗？
5.  你经历...？
6.  ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:58:36.983

你想要的是一个图表。每个图边都有一个遍历条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:12:01.567

你需要一个树状结构。这是描述此树中任意节点的简单类：

```
class Question {
   String questionText;
   List<String> possibleAnswers;
   int answer;
   List<Question> childQuestions;
} 
```

在开始时，您会显示`questionText`给用户和可能的答案列表。当用户选择答案时，您将结果保留在`answer`变量中。然后，基于此变量，您从`childQuestions`列表中选择下一个问题。

此解决方案的一个限制：您必须静态定义此树。

# netbeans - Toplink 和 CMT 消息驱动 bean

> ID：13077139
> 
> 赞同：0
> 
> 时间：2012-10-25T20:56:22.830
> 
> 标签：netbeans, message-driven-bean, toplink

我正在尝试将 Toplink 与 CMT 消息驱动 bean 集成。我的 MDB 是 CMT。当我尝试使用 unitofwork 提交时，它会出错，说存在全局事务，因此无法进行本地提交。在研究了 toplink 之后，他们提出了以下建议。使用外部连接池并使用 getactiveUnit 的工作来提交。我们使用 oracle 10.1.3 容器进行连接池和外部事务控制器（OC4J 事务控制器）。当我更改为 getActiveUnitWork().commit 时，由于活动工作单元为空，我得到空指针。我的理解是容器在执行 MDB 消息时启动事务。因此toplink getactive 工作单元应该将一个工作单元与外部事务相关联。仅当不存在外部事务时，Toplink GetActive 工作单元方法才应返回 null。我不知道如何解决这个问题或出了什么问题。我很感激这方面的任何帮助。

谢谢。太极

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:18:33.160

确保您在会话上正确设置了 ExternalTransactionController，并且有一个活动的 JTA 事务。

# maven - 如何 OSGFy 库

> ID：13077141
> 
> 赞同：7
> 
> 时间：2012-10-25T20:56:28.857
> 
> 标签：maven, osgi, apache-camel, bnd

我正在开发一个项目，它是集成项目，我们正在使用 Apache Camel 和 Apache Karaf。在项目中，我需要使用[Jira REST Java 客户端库。](https://studio.atlassian.com/wiki/display/JRJC/Home)

所以我已经阅读了很多关于如何将非 OSGI 库包装到 OSGI 包的各种文章和线程，但我真的不确定我是否做对了。

所以，我创建了一个 POM 文件，它依赖于所需的库。做了一个包，尝试部署到 Karaf，当然，Karaf 抱怨缺少包。

所以，我找到了相应的 maven 依赖项，添加了它，包进入`<Import-Package>`和依赖项进入`<Embed-Dependency>`.

另一轮，部署，查找依赖项，添加，......一次又一次，直到 Karaf 对捆绑包很好。

这真的正确吗？在我看来这很疯狂，所以我想我没有像往常一样得到它:)

最后，我的工作计算机上的包稳定了，我快速检查并回家，在那里我继续但是，奇怪的是，相同的 POM / 包，在我的个人计算机上编译不工作，再次抱怨缺少包，但是这一次，这个包肯定在 POM 文件中，并且肯定是嵌入到包中的，我可以在那里看到它。

这次丢失的包是 org.apache.commons.codec。

```
org.osgi.framework.BundleException: Unresolved constraint in bundle jiraclient.bundle [134]: Unable to     resolve 134.0: missing requirement [134.0] osgi.wiring.package; (osgi.wiring.package=org.apache.commons.codec)
    at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3826)[org.apache.felix.framework-4.0.3.jar:]
    at org.apache.felix.framework.Felix.startBundle(Felix.java:1868)[org.apache.felix.framework-4.0.3.jar:]
    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:944)[org.apache.felix.framework-4.0.3.jar:]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.startBundle(DirectoryWatcher.java:1247)[6:org.apache.felix.fileinstall:3.2.6]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.startBundles(DirectoryWatcher.java:1219)[6:org.apache.felix.fileinstall:3.2.6]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.startAllBundles(DirectoryWatcher.java:1208)[6:org.apache.felix.fileinstall:3.2.6]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:503)[6:org.apache.felix.fileinstall:3.2.6]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:291)[6:org.apache.felix.fileinstall:3.2.6] 
```

所以，现在我很困惑，怎么了:(

很漂亮，伙计们，帮帮我。谢谢！

POM 文件很长，所以我想链接更好： http: [//pastebin.com/j5cmWveG](http://pastebin.com/j5cmWveG)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T06:46:52.857

是的，就其部署模型而言，OSGi 恕我直言“远非易于使用”，需要 100% 捆绑 MANIFEST.MF 文件中的 osgi 元数据。你需要数学博士学位才​​能理解 BND 工具。不幸的是，许多 JAR 不是 OSGi 包。

查看包含所有导入|导出的 pom.xml 文件，以及“不容易理解”的语法，任何普通工程师只需要 5 秒即可理解“某些东西是写在丹麦州的”；例如OSGi！=我们生活的世界。恕我直言，这必须而且应该更容易。

**您可以使用wrap** url 处理程序 在 Karaf 中安装普通 JAR ：http: [//karaf.apache.org/manual/latest/developers-guide/creating-bundles.html](http://karaf.apache.org/manual/latest/developers-guide/creating-bundles.html)

另一个技巧是创建一个**uber JAR**，例如将它全部放在一个 JAR 文件中，然后您可以部署它。

还有**FAB**（Fuse Bundles），它使 OSGi 部署更容易，因为它在部署时为您处理了大部分这种疯狂，而不是您必须处理 OSGi MANIFEST.MF 的疯狂：[http ://www.davsclaus.com /2012/08/osgi-deployment-made-easy-with-fab.html](http://www.davsclaus.com/2012/08/osgi-deployment-made-easy-with-fab.html)

# c# - 实体未回发

> ID：13077146
> 
> 赞同：0
> 
> 时间：2012-10-25T20:56:58.637
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

这是调用视图的控制器方法：

```
[HttpGet]
        public ActionResult Edit(int? paramid)
        {
            var document = documentRepository.DocumentsWithEmpty.FirstOrDefault(c => c.ID == paramid.Value);
            RC rc = new RC(document);
            return View("RC", rc);
        } 
```

这是视图（目前很空）

```
@model RC

@{
    Layout = null;
}
@using (Html.BeginForm()) //I've also tried by specifying the method/controller/param
{
   //I've also tried with some @Html.EditorFor items
} 
```

以及控制器中的方法来捕捉发布的`RC`

```
[HttpPost]
public ActionResult Edit(RC rc) //If I put no parameter, it gets called correctly
{
    throw new Exception("x");
} 
```

它是唯一不能正常工作的实体/地方。可能是因为 RC 不是我数据库中的实体吗？

Firebug 将这些用于 GET 和 POST 请求（POST 请求为红色）。很简单

```
http://localhost:58136/Documents/Edit/23?_=1351197746968 
```

# asp.net-mvc - 如何使用 Html.ActionLink 传递多个参数（一些复杂的对象）

> ID：13077150
> 
> 赞同：6
> 
> 时间：2012-10-25T20:57:04.940
> 
> 标签：asp.net-mvc, razor, actionlink

我正在.net 4.0 中使用 MVC。我有一个基本的 Html.ActionLink，我希望将多个参数传递给控制器​​/动作。

每次我调试 ActionResult 时，只有一个参数通过，另一个为空（取决于哪个是第一个）。现在我知道我可以传入复杂的对象，因为我可以让“联盟”对象通过。但是，我不确定为什么在任何时候只有一个参数可以通过。

Code in View：（不要因为 ViewBag 而骚扰我。我知道它不流行。另外，League 是一个复杂的对象）

```
@Html.ActionLink("Sort By WeeK", "Sort", "Schedule",
                 new { league = ViewBag.League, sortType = "Week" }, null) 
```

控制器中的代码：（这里没有惊喜）

```
public ActionResult Sort(League league, string sortType)
{
    //Do some stuff here
    return View("Schedule");
} 
```

我猜答案将围绕路由展开。这让我想到了第二个问题。如何在不不断添加新地图路由的情况下让这种类型的 ActionLink（动作/控制器/复杂和简单对象的集合）工作。是否有我可以添加的通用/通配符 RouteMap，这样我就不必不断地将解剖学上相同的路由图添加到 global.asax。或者，也许我希望传递给 Action 的对象类型具有一定的灵活性，因此我无法预定义确切的签名。

我看过很多关于这个主题的帖子，但没有一个回答我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:50:35.080

我认为它可能会因为 null 参数而感到困惑。试试这个：

```
@Html.ActionLink("Sort By WeeK", actionName:"Sort", controllerName: "Schedule", routeValues: new { league = ViewBag.League, sortType = "Week" }, htmlAttributes:null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T20:52:25.837

我尝试了很多方法，但没有人不帮助我，最终我自己解决了这个问题，只需将你的对象“解包”到来自对象的变量上，就像这样：

```
@{ var sendObject = (MyObject) ViewData["SendObject"]; }
...
@Html.ActionLink("Description", "MyActionName", "MyController", new { sendObject.var1, sendObject.var2, sendObjec.var3, sortType = "Week" }, new { @style = "color: white" }) 
```

控制器：

```
public ActionResult MyActionName(MyObject sendObject, string sortType)
{
...
} 
```

框架自己会绑定你的对象`SendObject`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-05T14:47:34.967

只需这样做：

```
VIEW:
@Html.ActionLink("Link text", "Action name", "Controller name",
                        new { paramName1 = @modelDataItem.value, paramName2 = @modelDataItem.value}, null)

CONTROLLER:
public ActionResult ActionName(string paramName1 , string paramName2 ) 
```

注意：确保控制器动作上的参数名称与动作链接中使用的参数名称相同。如果这些值未传递给操作参数，则检查视图的模型是否包含您要查找的值。也许它从未被发送到视图。

# java - 对话框 - 打开一个关闭的对话框而不创建一个新的对话框

> ID：13077153
> 
> 赞同：0
> 
> 时间：2012-10-25T20:57:10.167
> 
> 标签：java, dialog, swt

这是一个简单得多的问题。

```
private static AplotBaseDialog dlg; 

public Object execute(final ExecutionEvent event) throws ExecutionException {
  if (dlg == null){
     try {
          Shell shell = HandlerUtil.getActiveWorkbenchWindowChecked(event).getShell();
          dlg = new AplotBaseDialog(shell, session);  
     }
     catch {
     }
     dlg.open();
     return null;
 } 
```

好的，上面的代码检查并查看 dlg 是否为空。如果为空，则创建一个新对话框。然后它打开对话框。

这在 dlg 为空时有效。但是如果 dlg 不为空，我会在 dlg.open() 行得到一个错误。错误指向对话框类中的此代码

```
 @Override
  protected Control createContents(Composite parent) {
     Control contents = super.createContents(parent); <==== Right Here
     setTitle("Title");
     setMessage("Message");
     if (image != null) {
        setTitleImage(image);
     }
     return contents;
  } 
```

所以我的问题是当 dlg != null 时如何打开对话框？

***编辑*** 添加一些错误信息

![在此处输入图像描述](../Images/0e86011b8efabc69d53bf7d8dc9ce6bf.png)

AplotBaseDialog 中的第 110 行

```
Control contents = super.createContents(parent); 
```

AplotDialogHandler 中的第 48 行

```
dlg.open(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:44:28.507

> java.lang.IllegalArgumentException：参数无效
> 
> ...
> 
> 在 org.eclipse.swt.widgets.Label.setImage(Label.java:337)

JavaDoc[`Label`](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Label.html)告诉您以下内容：

> IllegalArgumentException -
> 
> ERROR_INVALID_ARGUMENT - 如果图像已被处理

因此，您似乎已经处理了您要设置的图像。

* * *

有两种解决方案：

1.  等待处理图像，直到您的主应用程序关闭。
2.  在对话框关闭时处理图像，但在重新打开它时创建一个新图像。

# php - Windows、NetBeans：php.ini 在哪里？

> ID：13077154
> 
> 赞同：4
> 
> 时间：2012-10-25T20:57:15.283
> 
> 标签：php, netbeans

我已经离开 PHP 很长一段时间了，所以希望这是一个简单的疏忽。但是，我无法包含 MySQL 扩展。

**设置**

*   Windows 8 专业版 64 位
*   NetBeans 7.2.1（内置 PHP Web 服务器）
*   MySQL
*   PHP 5.4.8

**问题**

致命错误：调用未定义函数 mysql_connect()

**尝试解决**

*   将*php.ini-development*复制到*php.ini*（文件是我安装 PHP 的位置，E:\Software\php-5.4.8-Win32-VC9-x86）
*   通过取消注释行来 编辑*php.ini*
    *   extension_dir = "分机"
    *   扩展=php_mysqli.dll
*   在项目属性中的 NetBeans PHP 包含路径中添加了 E:\Software\php-5.4.8-Win32-VC9-x86\ext

仍然失败并出现相同的错误

**诊断输出**

在页面顶部添加了对*phpinfo()的调用。*这表明：

配置文件 (php.ini) 路径**C:\Windows**

*但是*，C:\Windows 中没有*php.ini*。事实上，我搜索了所有磁盘，只找到了我之前编辑的一个*php.ini文件。*

**问题**

当我运行我的项目时，NetBeans / PHP 从哪里提取配置，如何编辑该配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:04:16.847

重新启动 Web 服务器/netbeans :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:06:50.233

如果没有列出正在加载的 php.ini 文件，`phpinfo()`则没有。在这种情况下，PHP 将为所有内容使用默认值。任何需要被覆盖的东西都可以放在一个新的 php.ini 中，该文件位于`phpinfo()`被扫描的 ini 文件指定的位置之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:21:39.763

根据您对*php.ini*所做的描述（摘录）：

```
extension=php_mysqli.dll
                   ^ 
```

但是在您的问题中，您写道：

> 致命错误：调用未定义函数 mysql_connect()

这是一个不同的扩展，即在 Windows 上：

```
extension=php_mysql.dll 
```

（没有`i`）

可能这只是您在这里遗漏的一个小疏忽。那么你有两个选择：

1.  将代码移植到`mysqli_*`函数（推荐用于新代码）
2.  激活旧`php_mysql.dll`扩展（用于旧代码）

做适合你的需要。在 Windows 上，以下文件名（搜索您的磁盘）很有趣：

*   `php.ini`- 通常在您找到的目录中`php.exe`
*   `php_mysql.dll`- 通常在`ext`刚才所说的目录的子目录中。

# php - 在 array_merge 下拉列表中添加值以充当中断

> ID：13077155
> 
> 赞同：0
> 
> 时间：2012-10-25T20:57:16.360
> 
> 标签：php, sql, wordpress, array-merge

我有三个数组获得不同的帖子类型，然后将它们合并以在 Wordpress 管理员中进行下拉。我正在尝试插入空值/中断以使下拉列表更易于阅读。

这是数组和array_merge：

```
// creating an array of pages

$featpages = array();
$pages = get_pages();
$pages[""] = "";
foreach ($pages as $page) {
$featpages[ $page->post_title ] = $page->ID;    
}

// creating an array of posts

$postargs = array('numberposts' => 0);
$featposts = array();
$posts = get_posts($postargs);
$posts[""] = "";
foreach ($posts as $post) {
$featposts[ $post->post_title ] = $post->ID;
}

// creating an array of activities

$actargs = array('post_type' => 'activity', 'numberposts' => 0);
$featacts = array();
$acts = get_posts($actargs);
$acts[""] = "";
foreach ($acts as $act) {
$featacts[ $act->post_title ] = $act->ID;
}

// creating a combined array of pages and tours

$links = array_merge((array)$featpages, (array)$featacts, (array)$featposts); 
```

我希望`[""] = "";`for each 会在每组之间添加一个空行，但它只适用于一个 - 我猜是因为它们看起来与 array_merge 相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:10:57.433

`[""] = "";`将覆盖下一个

`[] = '';`改为使用

# c# - 将数字四舍五入为 10

> ID：13077157
> 
> 赞同：1
> 
> 时间：2012-10-25T20:57:26.353
> 
> 标签：c#, numbers, rounding

我正在尝试将数字四舍五入到 10

前任：

6变成10

4变成0

11变成10

14变成10

17变成20

我该怎么做？据我所知，Math.Round 不适用于此。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T20:58:26.203

对于`double`（`float`并且`decimal`需要额外的转换）：

```
value = Math.Round(value / 10) * 10; 
```

对于`int`：

```
value = (int) (Math.Round(value / 10.0) * 10); 
```

# c++ - 重载赋值运算符：如果我们返回 (*this)，它是指针/地址处的值，赋值运算符的正确语法是什么？

> ID：13077158
> 
> 赞同：0
> 
> 时间：2012-10-25T20:57:34.757
> 
> 标签：c++, operator-overloading, pass-by-reference, assignment-operator

以这两个前面的线程为例

第一个线程： [为什么重载的赋值运算符返回对类的引用？](https://stackoverflow.com/questions/7360775/why-does-overloaded-assignment-operator-return-reference-to-class)

第二个线程： [为什么复制赋值运算符必须返回一个引用/常量引用？](https://stackoverflow.com/questions/3105798/why-must-the-copy-assignment-operator-return-a-reference-const-reference)

重载赋值运算符的返回类型是类还是对类的引用？我都见过：

```
Point& Point::operator = (const Point& sourcePoint)
{
// As in the first thread I pasted above
return *this;
} 
```

和

```
Point Point::operator = (const Point& sourcePoint)
{
// As in the second thread I pasted above
return *this;
} 
```

哪个是对的？

同样，有什么区别：

```
int exFunction()
{
     int i = 5;
     int* iPtr = &i;
     return *iPtr;
} 
```

相对：

```
int& exFunction2()
{
     int j = 5;
     int* jPtr = &j;
     return *jPtr;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:13:14.537

这两件事根本不“相似”。

首先，赋值运算符。它们应该返回对对象本身的引用，以便您可以在链中使用它们：

```
Foo x, y, z;

x = y = z;   // makes y equal to z and returns a reference to self,
             // which is assigned to x 
```

所以总是这样：

```
Foo & operator=(Foo const &) { /* ... */  return this; }  // copy-assignment

Foo & operator=(/* any other signature */) { /* ... */   return this; } 
```

现在，第二个问题：你`exFunction2`是完全错误和破碎的。它具有未定义的行为，因为它返回对局部变量的引用，该引用在函数返回时超出范围。（它本质上说`return j;`; 记住取消引用的结果是一个左值。）编写该函数的唯一明智的方法是 like `exFunction`，可以缩短为`int exFunction() { return 5; }`.

这是有关此主题[的相关问题。](https://stackoverflow.com/q/13077979/596781)

# jquery - 选择菜单项后如何避免浏览器地址栏中的#

> ID：13077160
> 
> 赞同：2
> 
> 时间：2012-10-25T20:57:50.017
> 
> 标签：jquery, html

我有一个菜单栏。菜单栏上的每个项目都是一个超链接：

```
 <a href="#" title="item1"> 
```

根据菜单选择，我显示了一些 div 并隐藏了剩余的 div。一切正常。如果我单击菜单项，结果显示在同一页面上，这很好，但在浏览器地址栏`#`上显示的符号就像`localhost/abc#`这会导致激活浏览器返回（<--）按钮，这可能会给出错误的假设用户可以单击浏览器上的后退按钮。

**有没有办法避免`#`在地址栏中显示？**

我正在使用`return false;`事件处理函数中的语句来禁用 href 链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T20:58:43.500

***有没有办法避免在地址栏中显示#？***

是的，您可以`#`通过更改

```
<a href="#" title="item1"> 
```

至

```
<a href="javascript:void(0)" title="item1"> 
```

**为什么显示#？**（来自 MDN）

> **href** - 这是定义超文本源链接的锚的唯一必需属性。它指示链接目标，可以是 URL 或 URL 片段。URL 片段是前面**带有井号 (#) 的名称，它指定当前文档中的内部目标位置（ID）。**URL 不限于基于 Web (HTTP) 的文档。URL 可以使用浏览器支持的任何协议。例如，file、ftp 和 mailto 在大多数用户代理中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:00:52.500

如果您按照您所说的结束事件处理程序，`return false`它将不会出现在您的地址栏中。`return false`基本上，在被调用的事件处理程序和（因为它没有返回）之间，有些事情并没有按照应有的方式进行。确保您的 JavaScript 没有错误。

# jquery - 创建 JQM 自定义加载消息

> ID：13077161
> 
> 赞同：2
> 
> 时间：2012-10-25T20:57:51.273
> 
> 标签：jquery, jquery-mobile

我在下面有一个有效的 Jquery Mobile 加载消息：

```
$.mobile.showPageLoadingMsg("a", "Fetching Operators"); 
```

但是我希望这样做，

```
$.mobile.showPageLoadingMsg("a", "<div class='clearfix'>Fetching Operators</div><a href='default.aspx'>Use Simple Site</a>"); 
```

因此，如果用户的连接速度较慢，他们可以选择单击指向简单站点的链接。

然而，HTML 不会呈现，而只是显示为文本。谁能告诉我如何实现上述目标？

非常感谢您的帮助。

问候德文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:08:43.723

看起来jQuery Mobile默认不允许使用HTML（`.text()`方法很可能在内部使用而不是`.html()`方法），并且每次调用`$.mobile.loading()`方法时（您正在运行的方法的新版本） ) 加载程序的文本被重置。

这是 jQuery Mobile 1.2 的快速（肮脏）解决方案：

```
//show the loader, specifying to show the text message
$.mobile.loading( 'show', { textVisible : true } );

//now find the loader widget, find the text within it, and then set it's HTML
$("body").find(".ui-loader").find("h1").html("<div class='clearfix'>Fetching Operators</div><a href='default.aspx'>Use Simple Site</a>"); 
```

这是一个演示：http: [//jsfiddle.net/nABCq/](http://jsfiddle.net/nABCq/)

# javascript - 使用查询字符串过滤流沙

> ID：13077171
> 
> 赞同：0
> 
> 时间：2012-10-25T20:58:37.743
> 
> 标签：javascript, jquery, parameters, quicksand

仅供参考，我在 javascript 上很烂，无法将我的头绕在查询字符串上。

我的问题是关于流沙 [http://razorjack.net/quicksand/index.html](http://razorjack.net/quicksand/index.html)

如何使用 javascript 修改[http://razorjack.net/quicksand/scripts/main.js](http://razorjack.net/quicksand/scripts/main.js)以允许通过传入 URL 根据给定过滤器进行排序。

演示的给定过滤器：

**按类型过滤：** 一切、应用程序、实用程序

**排序方式：** 名称、大小

因此，根据您使用的参数，传入的 URL 可能看起来像这样，覆盖默认视图：

razorjack.net/quicksand/index.html?Type=Everything&Sort=Size

razorjack.net/quicksand/index.html?Type=Utilities&Sort=Name

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:05:34.833

Quick Sand Plugin 不会对对象进行排序或过滤，它所做的只是用另一个对象列表替换一个对象列表，它的重点是很酷的动画。

因此，您需要在其他地方进行排序和/或过滤，如果结果来自数据库，最好在服务器端进行，然后将它们放入列表中，然后调用 Quick Sand 插件以替换当前列表你刚刚创建

```
 function loadPageVar (sVar) {  
  return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(sVar).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
}  

// Would alert the value of QueryString-variable called name  
alert(loadPageVar("Type")); 
```

这是如何从[This Question获取 javascript 中的查询字符串值的示例](https://stackoverflow.com/questions/9870512/obtaining-querystring-from-current-url-in-javascript)

如果您的列表中没有那么多项目，那么您可以提前在 HTML 中输入所有列表，并将类设置为隐藏，然后根据查询字符串您将知道要显示哪一个

# objective-c - 如何防止在Objective-C中舍入浮点数？

> ID：13077172
> 
> 赞同：0
> 
> 时间：2012-10-25T20:58:41.177
> 
> 标签：objective-c, macos, cocoa

也许这是一个愚蠢的问题，但我真的无法理解。由于某种原因，我的程序中的浮点值在赋值语句期间被四舍五入。

这是代码：

```
Float64 time,test;

for( Shot *sh in _arrayOfShots)
{
    time = sh.bFrameTime; 
    // right here time variable gets value rounded up to 2 decimal places
    // for example: if sh.bFrameTime = 81.919998 => time = 81.92

    NSNumber *num = [NSNumber numberWithFloat:time];

    test = [num floatValue];

    [edgeTime addObject:num];
}

// this is my Shot object structure

@interface Shot : NSObject
{
    int bFrame;
    int eFrame;

     Float64 bFrameTime;
} 
```

如果有人知道如何处理这个问题，请给我提示！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:48:33.313

> 81.919998 => 时间 = 81.92

不是“四舍五入到小数点后两位”。两者之差为 0.000002，幅度变化 0.0000000244，即小数点后 8 位左右。如果您的源值是单精度浮点数，那么它只有 7 个小数位的精度。（但是您没有显示该声明，因此我们无法确定。）

差异也可能与您显示这两个值的方式有关，因为 NSLog 会进行少量舍入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:01:59.113

添加一个 if 语句，检查四舍五入的数字是否大于初始数字，如果是，则将其减去 1

# javascript - HTML5 - 如何绘制完成的画布/图像

> ID：13077181
> 
> 赞同：0
> 
> 时间：2012-10-25T20:59:13.923
> 
> 标签：javascript, image, html, canvas, game-engine

我正在用 HTML5 和 MooTools 制作一个小游戏，但我在 Firefox 上遇到了性能问题。我已经实现了一个计数器来确定我的`update`方法被调用的频率，它每秒返回 64 次。结果似乎慢得多（如 30 FPS）。我认为我的问题实际上是在这篇文章[http://blog.sethladd.com/2011/03/measuring-html5-browser-fps-or-youre.html](http://blog.sethladd.com/2011/03/measuring-html5-browser-fps-or-youre.html)中描述的。我找不到直接解决这个问题的方法，但我认为我可以优化性能。

我认为我的逻辑中的一个大问题是我直接在画布上绘制每个对象。我之前用 Java 做过一些游戏，并且在处理图像（在内存中绘图）和仅绘制最终图像方面有很大的性能改进。这样浏览器就会有更少的请求来绘制一些东西，并且可能会更快地绘制。

有没有办法做到这一点？我在 JavaScript 中找到了一些用于图像处理的库，但我想自己做。

我不能给你看完整的代码，因为这个项目是为学校设计的，而且它太大了（大约 1500 行代码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:10:22.040

[http://www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)

也许这会有所帮助。它向您展示了如何通过使用屏幕外画布来渲染场景来提高性能。

# ios - UIWebView 链接在滚动视图内点击

> ID：13077199
> 
> 赞同：1
> 
> 时间：2012-10-25T21:00:27.560
> 
> 标签：ios, xamarin.ios

我正面临一个有趣的问题。我有从 Web 服务获得的 HTML 数据，这些数据显示在 UIWebView 中，并且我想在用户点击链接时在 Safari 中打开超链接。

我的代码非常适合在 Web 视图中立即可见的任何链接。我在视图上有一个滚动条，当我点击它们时，可见区域下方的链接（即我必须滚动到的链接）不起作用。

请注意，我正在使用如下逻辑禁用 WebView 中的所有滚动条：

```
DescriptionWebView = new UIWebView(new RectangleF(0, separator.Frame.Bottom + 1, 320, 140));
        DescriptionWebView.DataDetectorTypes = UIDataDetectorType.All;
        DescriptionWebView.UserInteractionEnabled = true;
        DescriptionWebView.Delegate = new PlanDescriptionWebViewDelegate(this);

        foreach(UIView subview in DescriptionWebView.Subviews)
        {                   
                    if(subview is UIScrollView)
                        (subview as UIScrollView).ScrollEnabled = false;
        } 
```

我正在使用委托内部的逻辑根据内容大小调整 WebView 的大小，如下所示：

```
 public override bool ShouldStartLoad(UIWebView webView, MonoTouch.Foundation.NSUrlRequest request, UIWebViewNavigationType navigationType)
                 {
                            NSUrl url = request.Url;
                            if(navigationType == UIWebViewNavigationType.Other)
                            {
                                      if(url.Scheme.ToString().Equals("ready"))
                                      {

                                                 float contentHeight = Convert.ToInt32(url.Host);
                                                 if(contentHeight < _infoView.DescriptionWebView.Frame.Height)
                                                            contentHeight = _infoView.DescriptionWebView.Frame.Height;
                                                 RectangleF scrollViewFrame = _infoView.ScrollView.Frame;
                                                 RectangleF descriptionViewFrame = _infoView.DescriptionWebView.Frame;
                                                 BeginInvokeOnMainThread(() => 
                                                 {
                                                            _infoView.DescriptionWebView.Frame = new RectangleF(descriptionViewFrame.X, descriptionViewFrame.Y, descriptionViewFrame.Width, contentHeight + 10);
                                                            //_infoView.ScrollView.ContentSize =  new SizeF(scrollViewFrame.Size.Width, contentHeight + scrollViewFrame.Y + scrollViewFrame.Height - descriptionViewFrame.Height);
                                                            _infoView.ScrollView.ContentSize = new SizeF(scrollViewFrame.Size.Width, contentHeight + scrollViewFrame.Height + 20 - descriptionViewFrame.Height);
                                                 });
                                                 return false;       
                                      }

                            } else if(navigationType == UIWebViewNavigationType.LinkClicked)
                            {
                                      UIApplication.SharedApplication.OpenUrl(url);
                                      return false;
                            }
                            return true;
                 } 
```

我完全不知所措。为什么视图中顶部的链接会起作用，而我必须滚动的底部的链接不起作用？

任何帮助将不胜感激。

# wcf - 使用不同的终结点地址调用 WCF 工作流服务

> ID：13077201
> 
> 赞同：2
> 
> 时间：2012-10-25T21:00:29.350
> 
> 标签：wcf, workflow-foundation

我创建了一个 Workflow Foundation 工作流，它最终将调用另一个 Workflow Service。我通过将适当的形状从工具箱拖到设计器上来添加对该服务的调用。该形状可用，因为我按照建议将工作流服务添加为服务引用。

如何为此 Web 服务指定特定的端点地址？我找不到以编程方式指定地址的方法。工作流始终使用 web.config 中指定的地址。但基于某些条件，我想使用不同的地址。

**编辑**

这是我为说明问题而创建的图片：

![在此处输入图像描述](../Images/6c85bc62250067637e6f29337ef32045.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T07:04:56.980

查找调用 Workflow Service 的位置。在那里你定义了一个客户。它应该看起来像这样：

```
client.InvokeService(); // or whatever method you call; 
```

如果要更改地址，则应在此调用之前更改端点地址，理想情况下是在定义客户端时：

```
client.ChannelFactory.Endpoint.Address = new EndpointAddress("http://something.com/service.wsdl"); 
```

但请记住，这不是推荐的做法。如果您打算以编程方式更改它，最好完全摆脱 web.config 中的服务部分，并在创建客户端时以编程方式设置属性。

# android - 如何从字符串数组中获取字符串？

> ID：13077203
> 
> 赞同：0
> 
> 时间：2012-10-25T21:00:33.830
> 
> 标签：android, arrays, listview

在我的应用程序中，我有一个 ListView，其中填充了来自字符串数组的 URL。当用户在此 ListView 中选择某个项目时，应用程序应打开一个 WebView 并加载所选 URL。

字符串数组是这样的：

```
<string-array name="app_urls">
    <item>http://www.google.com</item>
    <item>http://www.android.com/</item>
    <item>http://www.youtube.com</item>
</string-array> 
```

我正在尝试以这种方式获取 url 的字符串值：

```
Resources res = getResources();
String[] url = res.getStringArray(R.array.app_urls);
webView = new WebView(view.getContext());
webView.loadUrl("http://" + url); 
```

如何正确获取 url 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:09:46.860

我对android不太了解，但最后一行你可能想要类似的东西

webView.loadurl(url[你要使用的url的索引]);

因为 A) 你的数组定义中已经有 http://'s，所以你的方式是多余的，

B）正如上面的海报所说，您必须按索引引用您的数组项。想象一个像火车一样的数组，其中每个“索引”都是一辆装有一些数据的汽车。数组是 0 索引的，所以第一个插槽是 [0]，第二个是 [1]，依此类推。

因此，如果您想将 google 从您的第一个数组中取出，您可以调用 bookmark_urls[0]，如果您想离开，可以使用 bookmark_urls[2]。

我不确定你为什么定义你的字符串数组然后声明另一个字符串数组并且（据我所知）让它等于第一个。你不能只引用'bookmark_urls []'吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:02:16.337

您必须访问数组中的元素..例如 url[0] 如果第一个元素等等....您不能以这种方式调用数组....

# iphone - 根据手指路径隐藏/显示 UIImage？

> ID：13077204
> 
> 赞同：0
> 
> 时间：2012-10-25T21:00:36.030
> 
> 标签：iphone, objective-c, ios, uiimage, core-graphics

我希望这是有道理的。我会试着解释一下。

我在屏幕上有一个 UIImageView，我想知道如何在用手指“绘制”后获取该区域，然后从 UImage 中删除该部分，或者从选择中创建一个单独的 UIImage。

我不是在寻找代码（除非你有它 =]），只是想知道如何去做。如果您有建议，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:41:53.843

所以基本上你想实现图像的徒手擦除？您将需要使用核心图形和各种 CGContext 方法（混合模式设置为清除）来实现这一点。有两种方法，但都从将图像绘制为的第一部分开始`drawRect`，然后

1）将您的笔画存储在一个数组中，并将所有笔画都放在图像的顶部。

2）在图像上划一划，然后将生成的图像存储到`UIImage`. 将此`UIImage`用作您在 drawRect 中绘制的下一个图像。这对于撤消/重做功能很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:20:09.473

我最近自己实现了这一点，并在[此处](https://bitbucket.org/nwoolls/simpledrawing/wiki/Home)提供了源代码。基本上，在设置图形上下文时，我使用了[此处](https://stackoverflow.com/questions/5076622/iphone-smooth-sketch-drawing-algorithm)描述的相同方法进行此更改：

```
CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:26:22.423

如果我理解你的问题，我想我会在 UIImageView 的顶部添加一个透明的 UIView 作为子视图。并以此为基础。然后，您可以在完成后删除/隐藏子视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:31:10.777

你需要创建一个`UIGestureRecognizer`with 目标和一个类似的动作`-imageIsPressed`，在这个`-imagePressed`方法中你可以调用一些东西来使图像消失。我建议将 UIImage 放入 UIImageView 并调用`imageview.hidden = YES;`以隐藏图像，一旦手指没有握住它，就将其设置回“NO”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T22:33:28.830

您需要实现一些东西来捕获用户“选择”的区域（可能正在创建一个`CGPath`。然后创建一个 imageView 大小的 CALayer。在其中创建、绘制并用一些任意颜色填充捕获的路径，同时让其余部分透明。最后，您将生成的 CALayer 作为蒙版应用到 UIImageView：

```
imageView.layer.mask = maskLayer; 
```

希望这能让你开始。

有关如何绘制自定义 CALayer 的更多信息，请参阅[Quartz Programming Guide](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)

# wix - WiX：如果虚拟目录包含嵌套目录，如何跳过删除 iis:WebVirtualDir？

> ID：13077205
> 
> 赞同：2
> 
> 时间：2012-10-25T21:00:40.067
> 
> 标签：wix

我的 msi 安装和卸载共享资源：IIS 虚拟目录“MyTeamServices”。它工作得很好，只是它在卸载过程中删除了该虚拟目录，即使有人创建了嵌套的虚拟目录（不是通过使用安装程序，只是“手动”）。当我希望看到 WiX 处理 HDD 文件夹的标准行为时：如果里面有“未计入”的文件 - 不要删除文件夹。

你能告诉我如何解决这个小问题（而不是使用“永久”属性）吗？

特别：

1）如何使用 WiX 源来了解卸载 WebVirtualDir 期间的标准行为（并且可能会对其进行修补）？我看到 ParseWebVirtualDirElement 但这并没有让我更接近 IIS 管理操作。它们在哪里，如何挖出来？

2）我还可以编写自定义操作，如果虚拟目录包含意外的“内部”内容，则可以发出警报，但是在哪里调用它，然后如何跳过 WebVirtualDir 卸载？可以卸载组件，但应该跳过 WebVirtualDir 卸载过程的操作......或者我应该在那里玩 msi“功能”，例如将此组件移动到功能，然后以某种方式跳过功能的卸载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T09:08:53.747

请参阅链接问题中的答案。它将引用计数带入 IIS 虚拟目录 - 如果它被其他产品使用，它们不会被删除。

# c# - 在执行过程中更改 Web 服务地址

> ID：13077206
> 
> 赞同：2
> 
> 时间：2012-10-25T21:00:42.993
> 
> 标签：c#, web-services

使用我使用向导添加的 Web 服务（Visual Studio 2012）（右键单击添加 Web 服务参考）我添加了以下 URL“http://onwww.org:8086/Plugins/Misc.onwww/Remote/NopService.svc”

我有另一个使用相同 api 的 web 服务，web 服务在各个方面都是相同的，相同的合同相同的一切。

“http://yadisrael.org:8086/Plugins/Misc.onwww/Remote/NopService.svc”

我想在执行期间将代码中的域名更改为另一个域，我将如何更改该值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:10:27.123

您可以在配置文件中指定两个不同的端点配置，然后在为每个不同的端点实例化服务客户端时，调用构造函数，该构造函数采用[接受 endpointConfigurationName 的重载](http://msdn.microsoft.com/en-us/library/ms574925.aspx)。或者，您可以指定一个端点配置，然后调用[采用 remoteAddress 或 endpointAddress 和端点配置名称的重载之一。](http://msdn.microsoft.com/en-us/library/ms574922.aspx)

# c - 我无法将 char 字符串分配给 char 数组

> ID：13077207
> 
> 赞同：1
> 
> 时间：2012-10-25T21:00:45.590
> 
> 标签：c, arrays, char, assign

这就是我现在所拥有的。

```
void insert(char Table[][81], char Key[81]){
    int index;
    index = search(Table, Key); 
    // This is another function used to find an empty 'slot'
    // in the table
    if(Table[index] == '\0')
    Table[index] = Key; 
    // <-- This is the line that contains some sort of error.
    else
    printf("ERROR: Key already in Table\n");
} 
```

它抛出的错误是：

> 从类型“char *”分配给类型“char[81]”时类型不兼容。

我不知道如何修复或抛出此错误的原因。如果有人需要我的程序中的更多信息来得出结论，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:02:32.773

您不能分配数组，但可以使用[`strcpy()`](http://en.cppreference.com/w/c/string/byte/strcpy)or[`memcpy()`](http://en.cppreference.com/w/c/string/byte/memcpy)代替：

```
if (Table[index][0] == '\0')
    memcpy(Table[index], Key, sizeof(Key));
else
    printf("ERROR: Key already in Table\n"); 
```

# objective-c - 这两个枚举定义有什么区别？

> ID：13077213
> 
> 赞同：1
> 
> 时间：2012-10-25T21:01:05.853
> 
> 标签：objective-c, enums

> **可能重复：**
> [枚举值：NSInteger 或 int？](https://stackoverflow.com/questions/8496903/enum-values-nsinteger-or-int)

这两个枚举定义有什么区别？

```
typedef enum : NSUInteger {
    Honda = 1,
    Chevrolet = 2,
    Mercedes = 3,
    Volvo = 4
} CarManufacturer; 
```

和

```
enum {
    HarleyDavidson = 1,
    BMW = 2,
    Yamaha = 3,
    Kawasaki = 4,
};
typedef NSUInteger MotorcycleManufacturer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:14:03.427

它们本质上是一样的。不同之处在于第一个更“C++ 风格”，而第二个更“C 风格”。

C++ 产生了一些语义差异，但您可以编写 C 样式枚举（存在于整个 Cocoa 框架中）以实现向后兼容性。

# javascript - 在 ko.applyBindings 中排除 html 元素

> ID：13077214
> 
> 赞同：1
> 
> 时间：2012-10-25T21:01:09.973
> 
> 标签：javascript, knockout.js, viewmodel

这是问题的简化版本：

```
<div id="model-one-container" data-bind="css: {foo: someModelOneProperty}">
    <div id="model-two-container" data-bind="text: someModelTwoProperty"></div>
    <div data-bind="text: anotherModelOneProperty"></div>
</div> 
```

.

```
ko.applyBindings(viewModelOne, document.getElementById("model-one-container"));
ko.applyBindings(viewModelTwo, document.getElementById("model-two-container")); 
```

如果我这样做，淘汰赛会抱怨 viewModelOne 中没有“someModelTwoProperty”，所以我需要从第一个 applyBindings 中排除#model-two-container div。
有没有办法在不改变视图模型的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T21:16:54.073

这是[答案](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)。

自淘汰赛 2.0 以来，有一个 controlsDescendantBindings 标志，您可以使用它来创建自定义绑定，然后阻止 KO 绑定到元素或其任何子元素。

# asp.net - 如何以编程方式从 ObjectDataSource 中分离 ListView

> ID：13077215
> 
> 赞同：1
> 
> 时间：2012-10-25T21:01:10.953
> 
> 标签：asp.net, listview

我有一个 ListView 控件和 2 个 ObjectDataSource。默认情况下，ListView 不通过 DataSourceID 属性链接到 ObjectDataSources。这样当页面加载时，我什么都没有显示。

根据在页面上单击的按钮，我以编程方式将 ListView 附加到一个 ObjectDataSource 或另一个。我可以在 ObjectDataSources 之间来回切换，它工作正常。

但是还有一个按钮可以将 ListView 与 ObjectDataSource 完全分离。我试图 ListView.DataSourceID = "" 并没有奏效。DataSourceID 属性不会被清空并且保持不变。

如何以编程方式从 ObjectDataSource 中分离 ListView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:18:19.557

怎么样：

```
DataTable dt = new DataTable();
ListView.DataSource = dt;
ListView.DataBind(); 
```

这是最简单的方法：

```
ListView.DataSource = null
ListView.DataBind() 
```

# java - 加速毕氏三元计算器

> ID：13077218
> 
> 赞同：0
> 
> 时间：2012-10-25T21:01:32.890
> 
> 标签：java

到目前为止，我的代码运行良好，但我需要一种方法来加速它。当用户输入 max_values 为 25000 时，大约需要 1.81 秒，我需要它小于一秒。我尽力优化我的三元组方法，但我不知道还能做什么。

```
import java.util.InputMismatchException;
import java.util.Scanner;

public class Pythagorean {

public static void triples(int max_values){
    int x = 0;
    for(int c = 5; c <= max_values; c++){
        int cTwo = c * c;
        int b = c - 1;
        for (int a = 0;a <= cTwo - b*b;a++){
            if (a*a + b*b == cTwo){
                x++;
                System.out.println(x + ") " + a + " " + b + " " +c);
            }
        }
    }
}

public static void main(String[] args){
    System.out.println("--- Pythagorean Triple Generator ---");
    System.out.println();
    Scanner input = new Scanner(System.in);
    int max_value = 0;
    System.out.print("Enter max value for c: ");
    try{
        max_value = input.nextInt();
    } catch (InputMismatchException ime) {
        input.nextLine();
        System.err.println("Error: Input is not an integer.");
        System.exit(1);
    }
    input.close();
    long start = System.currentTimeMillis();
    triples(max_value);
    double elapsed = (System.currentTimeMillis() - start)/ 1000.0;
    System.out.println("Searching complete...");
    System.out.printf("Elpased time: %.3f\n", elapsed);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:22:12.380

这仅在我的 PC 上运行了 0.999 秒。

它使用一个`StringBuilder`来收集所有输出，然后`println`在最后只做一个。

```
public static void triples(final int max_values)
{
    int x = 0;
    final StringBuilder sb = new StringBuilder(24000);
    for (int c = 5; c <= max_values; c++)
    {
        final int cTwo = c * c;
        final int b = c - 1;
        final int bTwo = b * b;
        final int cTwoLessB = cTwo - bTwo;

        for (int a = 0; a <= cTwoLessB; a++)
        {
            if (a * a + bTwo == cTwo)
            {
                x++;
                sb.append(x);
                sb.append(") ");
                sb.append(a);
                sb.append(" ");
                sb.append(b);
                sb.append(" ");
                sb.append(c);
                sb.append("\n");
            }
        }
    }
    System.out.println(sb.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:04:03.353

瓶颈是最有可能的`System.out.println`。写入控制台通常需要时间。

```
 for (int a = 0;a <= cTwo - b*b;a++){
            if (a*a + b*b == cTwo){
                x++;
                System.out.println(x + ") " + a + " " + b + " " +c);//Do you really need this?
            }
        } 
```

也许您可以将其存储在一个集合中，并在循环完成后进行打印（或按照建议使用 Stringbuilder）。

一些优化：

```
int multiplyB = b*b ;//multiplication can also be slow. 
for (int a = 0;a <= cTwo - multiplyB;a++){
            if (a*a + multiplyB == cTwo){
                ++x;//use preincrement operator
              str.append(x ).append(") ").append(a).append( " ").append(b).append(" ").append(c).append("\n");

            }
 } 
```

# c# - C# WinForms 标签将显示，但不显示文本

> ID：13077219
> 
> 赞同：7
> 
> 时间：2012-10-25T21:01:37.887
> 
> 标签：c#, winforms, user-interface, label

我正在设计一个 GUI，并且我有一个标签，在我调用一个往往需要一段时间的操作后，我可以有效地将其用作“请稍候”消息。标签的文本是静态的，我在VS2010的属性中设置了标签控件。

当我在表单上点击该操作时，我 .Show() 通常隐藏的控件，直到耗时的过程完成，然后 .Hide() 它。当它点击 .Show() 时，标签会弹出（我知道这一点，因为我将 BorderStyle 设置为 Fixed3D，所以我看到标签的边框出现了），但其中没有任何文字。我尝试将标签设置为自动调整大小但无济于事，我的文本设置为灰色上的黑色，因此没有隐形墨水，一切都可见，字体已设置。代码按照我的意愿执行，标签中没有文本。我不知所措。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T21:06:34.100

如果耗时过程发生在同一线程上，则可能是刷新/重绘问题（处理器太忙而无法处理 UI 请求）。尝试在启动长时间运行的进程之前刷新窗口，或者更恰当地，将耗时的进程放在 BackgroundWorker 中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T21:06:47.470

如果耗时过程未在后台线程中执行，则您的 UI 不会更新，因为没有进行消息处理。控件在 WM_Paint 消息中重绘自己。

在更改其状态后，尝试在控件或其窗口句柄父级（窗体）上调用 Refresh，然后再进入漫长的过程。

或者，将长时间运行的进程移至后台线程（请参阅 .NET 4.0 任务）以释放 UI 线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T21:03:51.943

也许我错过了一些东西，但你为什么不直接设置`label.Visible`？

# dns - 点状子域名还是新域名？

> ID：13077222
> 
> 赞同：1
> 
> 时间：2012-10-25T21:01:44.627
> 
> 标签：dns, seo, subdomain, hostname

我有一个托管在 www.BRAND.com 的公司网站（其中 BRAND 是通用名称）。

该公司希望为他们的一项活动开发一个“微型网站”，名为“Inspired By BRAND”。

我有两个方向：

*   spired.by.BRAND.com - 我个人不太喜欢。我不知道为什么，但我不记得有任何类似于这个 subdomain.subdomain.domain.com 的网址。
*   灵感.BRAND.com - 我最适合它。更少的点，类似于“更友好”的地址 subdomain.domain.com。

任何提示，指导方针，任何想法都非常感谢。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:05:59.573

就个人而言，我可能会去`inspiredby.BRAND.com`。它反映了您的微型网站的名称，对我来说听起来不错，并且可以通过电话轻松沟通，因为它没有任何连字符或下划线等......

# c - C通过Makefile设置可执行权限

> ID：13077223
> 
> 赞同：1
> 
> 时间：2012-10-25T21:01:46.760
> 
> 标签：c, makefile, setuid

我正在使用 Makefile 来编译我的 C 程序并想要制作可执行的 setuid。如何使用 Makefile 设置权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:03:27.193

与您在命令行 ( `chmod u+s .....`) 中的方式相同 - 只需在创建可执行文件后将其作为行

另请注意，您还可以执行`sudo chown root:root .....`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T02:18:55.923

如果您的环境有`install`实用程序，您可以这样做：

```
install: program
    install -m 4755 -o root program /usr/local/bin

.PHONY: install 
```

# android - Fragment 中 CONNECTIVITY_SERVICE 的上下文是什么？

> ID：13077227
> 
> 赞同：2
> 
> 时间：2012-10-25T21:01:56.540
> 
> 标签：android

Fragmet 中 CONNECTIVITY_SERVICE 的上下文是什么，我也检查了 getActivity 但它给出了错误。

```
public boolean isOnline() {
            ConnectivityManager connectionManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            try {
                if (connectionManager.getActiveNetworkInfo().isConnected()) {
                    Log.d("ConStatus", "Data Connection On");
                    return true;
                } else {
                    Log.d("ConStatus", "Data Connection off");
                    return false;
                }
            } catch (NullPointerException e) {
                Log.i("ConStatus", "No Active Connection");
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T06:29:27.303

`getSystemService()`是一种方法`Context`。A`Fragment`会使用`getActivity()`：

```
getActivity().getSystemService(Context.CONNECTIVITY_SERVICE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-19T08:06:48.393

我在尝试在片段中实现谷歌地图离线图块提供程序时遇到了类似的问题（基于 0ne_Up 的回答[here](https://stackoverflow.com/questions/48938723/google-maps-offline-mode-on-android-application?rq=1)）。我通过使用以下方法解决了它：

```
private ConnectivityManager connectivityManager;
...
connectivityManager = (ConnectivityManager) getActivity().
    getSystemService( getActivity().CONNECTIVITY_SERVICE ); 
```

# java - Java Tokenizer，分隔字符串

> ID：13077232
> 
> 赞同：4
> 
> 时间：2012-10-25T21:02:01.587
> 
> 标签：java, stringtokenizer

我不知道为什么我为此苦苦挣扎，但任何帮助将不胜感激。

我正在创建自己的标记器，它接收一个包含命令、分隔符和值列表的文件。然后它输出每个“令牌”以及它的类型。

输入：`AND 3, 4, 5 ; some comments`

我需要输出：

```
AND --- command
3 --- value
, --- delimiter
4 --- value
, --- delimiter
5 --- value 
```

我现在让它工作到我输出的地方：

```
AND 3, 4, 5 --- delimiter 
```

但我需要进一步分解它。

这是我目前所在的位置：

```
ArrayList<Token> tokenize(String[] input) {
    ArrayList<Token> tokens = new ArrayList<Token>();
    for (String str : input) {
        Token token = new Token(str.trim());
        //Check if int
        try{
            Integer.parseInt(str);
            token.type = "number";
        } catch(NumberFormatException e) {

        }
        if (token.type == null) {
            if (commands.contains(str))
                token.type = "command";
             else if (str.contains(",")) {
                token.type = "delimiter";
            } else if (destValues.contains(str))
                token.type = "destination";
            else
                token.type = "unknown";
        }

        if(! token.type.equals("unknown"))
            tokens.add(token);
    }
    return tokens;
} 
```

我对这个任务的唯一真正限制是无法使用 StringTokenizer 和正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:26:27.027

您的输入似乎不正确。试试这个来分割输入，然后使用你的标记化方法。

```
import java.util.*;

public class Foo {

    public static void main( String[] args ) {

        String input = "AND 3,    4, 5   ; some comments";
        List<String> parts = new ArrayList<String>();

        // removing comments
        input = input.split( ";" )[0];

        // splits using spaces
        String[] firstPass = input.trim().split( " " );

        for ( String s : firstPass ) {

            // the current part cannot be empty
            if ( !s.trim().isEmpty() ) {

                // splits using comma
                String[] secondPass = s.split( "," );

                for ( String ss : secondPass ) {
                    parts.add( ss.replace( ",", "" ) );
                }

                // verifies if the current part has a comma
                // and if so, inserts it as a part
                if ( s.contains( "," ) ) {
                    parts.add( "," );
                }

            }

        }

        for ( String a : parts ) {
            System.out.println( a );
        }

    }

} 
```

**编辑：当我的第一个答案起作用时，这是一个完整的示例，其中包含一些重构......**

```
import java.util.*;

public class MyTinyParser {

    private static final String COMMANDS = "AND OR FOO BAR";

    private List<String> extract( String input ) {

        List<String> parts = new ArrayList<String>();

        // removing comments
        input = input.split( ";" )[0];

        // splits using spaces
        String[] firstPass = input.trim().split( " " );

        for ( String s : firstPass ) {

            // the current part cannot be empty
            if ( !s.trim().isEmpty() ) {

                // splits using comma
                String[] secondPass = s.split( "," );

                for ( String ss : secondPass ) {
                    parts.add( ss.replace( ",", "" ) );
                }

                // verifies if the current part has a comma
                // and if so, inserts it as a part
                if ( s.contains( "," ) ) {
                    parts.add( "," );
                }

            }

        }

        return parts;

    }

    public List<Token> tokenize( String input ) {

        List<Token> tokens = new ArrayList<Token>();

        for ( String str : extract( input ) ) {

            Token token = new Token( str );

            // check if int
            try{
                Integer.parseInt( str );
                token.type = "number";
            } catch(NumberFormatException e) {
            }

            if ( token.type == null ) {

                if ( COMMANDS.contains(str)){
                    token.type = "command";
                } else if (str.contains(",")) {
                    token.type = "delimiter";
                } else {
                    token.type = "unknown";
                }

            }

            if( !token.type.equals( "unknown" ) ) {
                tokens.add( token );
            }

        }

        return tokens;

    }

    private class Token {

        String value;
        String type;

        Token( String value ) {
            this.value = value;
        }

        @Override
        public String toString() {
            return String.format( "Token[%s, %s]", value, type );
        }

    }

    public static void main( String[] args ) {

        MyTinyParser mtp = new MyTinyParser();
        List<Token> tokens = mtp.tokenize( "AND 3,    4, 5   ; some comments" );

        for ( Token t : tokens ) {
            System.out.println( t );
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:37:57.513

如果你被允许使用谷歌的 api，你也可以尝试类似下面的方法。

```
import com.google.common.base.Splitter;

public class Tmp {

    public static void main(String[] args) {
        String str = "AND 3, 4, 5 ; some comments";

        Iterable<String> stringIterable = Splitter.on(' ').trimResults()
                .omitEmptyStrings()
                .split(str);

        for (String str1 : stringIterable) {
            int commaIndex = str1.indexOf(",");
            if (commaIndex > 0) {
                System.out.println(str1.subSequence(0, commaIndex));
                System.out.println(",");
            } else {
                System.out.println(str1);
            }
        }

    }

} 
```

**它打印**

```
AND
3
,
4
,
5
;
some
comments 
```

PS不是最好的代码。有待进一步完善，欢迎大家多多指教。

# linux - 在一行中执行组合多个 Linux 命令

> ID：13077241
> 
> 赞同：347
> 
> 时间：2012-10-25T21:02:46.943
> 
> 标签：linux, command-line

我正在尝试将多个 linux 命令合并在一行中以执行部署操作。例如

```
cd /my_folder
rm *.jar
svn co path to repo
mvn compile package install 
```

* * *

## 回答 #1

> 赞同：754
> 
> 时间：2012-10-25T21:08:15.817

如果您只想在前一个命令成功的情况下执行每个命令，则使用`&&`运算符将​​它们组合起来：

```
cd /my_folder && rm *.jar && svn co path to repo && mvn compile package install 
```

如果其中一个命令失败，那么它后面的所有其他命令都不会被执行。

如果要执行所有命令而不管前面的命令是否失败，请用分号分隔它们：

```
cd /my_folder; rm *.jar; svn co path to repo; mvn compile package install 
```

在您的情况下，我认为您想要第一种情况，即下一个命令的执行取决于前一个命令的成功。

您还可以将所有命令放在脚本中并执行它：

```
#! /bin/sh

cd /my_folder \
&& rm *.jar \
&& svn co path to repo \
&& mvn compile package install 
```

行尾的反斜杠是为了防止 shell 认为下一行是新命令；如果省略反斜杠，则需要将整个命令写在一行中。

与在任何地方使用反斜杠相比，更方便的方法`&&`是在任何命令失败时指示 shell 退出脚本。您可以使用`set`带有参数的内置函数来执行此操作`-e`。有了它，您可以以更自然的方式编写脚本：

```
#! /bin/sh
set -e

cd /my_folder
rm *.jar
svn co path to repo
mvn compile package install 
```

将其保存到文件中，例如`myscript`，并使其可执行：

```
chmod +x myscript 
```

您现在可以像机器上的其他程序一样执行该脚本。但是，如果您没有将它放在`PATH`环境变量中列出的目录中（例如`/usr/local/bin`，或在某些 Linux 发行版上`~/bin`），那么您将需要指定该脚本的路径。如果它在当前目录中，则使用以下命令执行它：

```
./myscript 
```

脚本中的命令的工作方式与第一个示例中的命令相同；下一个命令仅在前一个命令成功时执行。对于所有命令的无条件执行，只需不要调用`set -e`：

```
#! /bin/sh

cd /my_folder
rm *.jar
svn co path to repo
mvn compile package install 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-07-15T04:37:13.403

我发现使用 ; 分隔命令仅在前台有效。例如：

`cmd1; cmd2; cmd3 &` - 只会`cmd3`在后台执行，而 `cmd1 && cmd2 && cmd3 &`- 如果没有错误，则会在后台执行整个链。

为了满足无条件执行，使用括号解决了这个问题：

`(cmd1; cmd2; cmd3) &`- 将在后台执行命令链，即使任何步骤失败。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-25T21:06:16.623

您可以使用分号分隔命令：

```
cd /my_folder;rm *.jar;svn co path to repo;mvn compile package install 
```

那是你的意思吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-19T21:49:27.783

要一次运行它们，您可以使用管道键“|” 像这样：

```
$ cd /my_folder | rm *.jar | svn co path to repo | mvn compile package install 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T21:05:32.397

```
cd /my_folder && rm *.jar && svn co path to repo && mvn compile package install 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-14T05:58:46.607

如果要执行所有命令，无论前一个是否执行，都可以使用分号（;）分隔命令。

```
cd /my_folder; rm *.jar; svn co path to repo; mvn compile package install 
```

如果您只想在上一个命令成功的情况下执行下一个命令，那么您可以使用 && 分隔命令。

```
cd /my_folder && rm *.jar && svn co path to repo && mvn compile package install 
```

在您的情况下，连续命令的执行似乎取决于先前的命令，因此请使用第二个示例，即使用 && 加入命令。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-18T17:59:36.230

只有一个＆符号有什么用处？今天早上，我在 XFCE 面板（在 Manjaro+XFCE 中）做了一个启动器来同时启动 2 个密码管理器：

```
sh -c "keepassx && password-gorilla"
or
sh -c "keepassx; password-gorilla" 
```

但它不像我想要的那样工作。IE，第一个应用程序启动，但第二个应用程序仅在前一个关闭时启动

但是，我发现（只有一个＆符号）：

```
sh -c "keepassx & password-gorilla" 
```

它现在可以按我的意愿工作...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-28T17:08:00.137

1.  利用`;`

*   无论第一个命令 cmd1 是否成功运行，始终运行第二个命令 cmd2：
    *   `$ cd myfolder; ls # no matter cd to myfolder successfully, run ls`

2.  利用`&&`

*   只有当第一个命令 cmd1 运行成功时，才运行第二个命令 cmd2：

    *   `$ cd myfolder && ls # run ls only after cd to myfolder`

3.  利用`||`

*   只有当第一个命令cmd1运行失败时，才运行第二个命令cmd2：

    *   `$ cd myfolder || ls # if failed cd to myfolder, `ls` will run`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-08-28T18:33:45.607

我发现很多此类问题的答案具有误导性

从这篇文章修改： [https ://www.webmasterworld.com/linux/3613813.htm](https://www.webmasterworld.com/linux/3613813.htm)

以下代码将创建 bash 窗口并完全作为 bash 窗口工作。希望这可以帮助。那里有太多错误/无效的答案......

```
 Process proc;
            try {
                //create a bash window
                proc = Runtime.getRuntime().exec("/bin/bash");
                if (proc != null) {
                       BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));
                       PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(proc.getOutputStream())), true);
                       BufferedReader err = new BufferedReader(new InputStreamReader(
                       proc.getErrorStream()));
                       //input into the bash window
                       out.println("cd /my_folder");
                       out.println("rm *.jar");
                       out.println("svn co path to repo");
                       out.println("mvn compile package install");
                       out.println("exit");
                       String line;
                        System.out.println("----printing output-----");
                          while ((line = in.readLine()) != null) {
                             System.out.println(line);
                          }
                          while((line = err.readLine()) != null) {
                             //read errors
                          }
                          proc.waitFor();
                          in.close();
                          out.close();
                          err.close();
                          proc.destroy();
                }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-04-10T13:33:54.657

您可以使用以下代码；

```
cd /my_folder && \
rm *.jar && \
svn co path to repo && \
mvn compile package install 
```

有用...

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-03-17T03:25:37.480

仅供参考，如果您需要在 if-else 的一行中运行多个命令，您可以用括号将命令分组。有关详细信息，请参阅此[页面。](https://www.gnu.org/software/bash/manual/html_node/Command-Grouping.html)

您可以将分号 ( **;** )替换为**&&**或**||** 取决于你需要什么。请注意，括号会创建一个子 shell 来执行命令。

如果存在名为**file_name**的文件，则以下命令执行 cmd1、cmd2 和 cmd3 命令；否则，cmd4、cmd5 和 cmd6。

```
[ -f file_name ] && (cmd1; cmd2; cmd3) || (cmd4; cmd5; cmd6) 
```

# redirect - 批处理脚本输入重定向

> ID：13077242
> 
> 赞同：2
> 
> 时间：2012-10-25T21:02:51.017
> 
> 标签：redirect, input, batch-file

尝试在 Windows shell 中运行程序并向程序发送更多输入并跟踪输出。当前，当运行程序并发送更多输入时，它会在期望输入的程序中停止，然后脚本在程序退出后发送输入。

```
cd \Users\user\Desktop\program
@echo "To start program, type "program -a [ipaddress] -r [port number] (EG: program -a          xx.xx.xx.xx -r 99)"
program -a xx.xx.xx.xx
show devs 
```

在程序退出之前，“show devs”命令不会出现。我将如何正确调用它以在程序实例中调用“show devs”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:23:11.317

管它！

```
echo "show devs" | program -a xx.xx.xx.xx 
```

查看[此管道中的信息并重定向参考](http://www.lagmonster.org/docs/DOS7/pipes.html)。

此外，享受 1995 年以来的疯狂配色方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:43:40.567

正如@Frozig 所说，如果从批处理文件运行，请记住转义管道。

```
echo "show devs" ^| program -a xx.xx.xx.xx 
```

如果这不起作用，那么如果您能够让批处理创建一个小的临时文件，则可以完成输入重定向。

```
cd \Users\user\Desktop\program
echo show devs>tmp.tmp
@echo "To start program, type "program -a [ipaddress] -r [port number] (EG: program -a xx.xx.xx.xx -r 99)"
program -a xx.xx.xx.xx<tmp.tmp
pause
del tmp.tmp 
```

# git - Github WebHooks 和 ssh

> ID：13077243
> 
> 赞同：0
> 
> 时间：2012-10-25T21:02:51.200
> 
> 标签：git, github, ssh

为了在 Github 中使用 WebHook URL，我需要使用 ssh 登录到我的 Web 服务器吗？我似乎无法让 WebHooks 工作，我想这可能是个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:11:12.333

并不真地。这就是 Github 对 Webhooks 的评价。

> 当您向我们推送时，我们将通过 POST 请求访问这些 URL，并传递有关推送的信息。

也许您没有正确处理从 Github 收到的 JSON。要进行测试，您只需在[RequestBin](http://requestb.in/)上创建一个临时 bin ，将其添加为您的 Github 存储库中的 Webhook URL，然后单击`Test Hook`按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T21:11:27.707

我找到了一些工具来帮助您从 Github 或 Gitlab 部署代码，因此我创建了 Deepl.io 来处理 Web-Hooks 并调用脚本以部署在您自己的服务器上。这会处理从 github 或 gitlab 发送的 JSON，并使用您自己的脚本做出反应。收到拉取通知后，您可以使用自己的 PHP 或 shell 脚本...查看：[http ://deepl.io](http://deepl.io)

# php - 使用 PHP 在 HTML 文件中操作 Javascript

> ID：13077244
> 
> 赞同：0
> 
> 时间：2012-10-25T21:02:51.573
> 
> 标签：php, javascript, html, regex, dom

> **可能重复：**
> [PHP 正则表达式提取 javascript 变量](https://stackoverflow.com/questions/11378690/php-regex-extract-a-javascript-variable)

这实际上可能只是一个简单的字符串操作问题，需要一个好的正则表达式解决方案。

我在 HTML 页面中定义了一些 javascript 变量。我想将页面读入 PHP，确定我要更改的变量；并更新它。变量看起来像：

```
rsp.pageId = 'sports' 
```

为了清楚起见，我的脚本不知道值是什么，所以在示例中“运动”可以是任何东西；所以它是一个通配符，其中字符串的其余部分是一致的。我不知道在 var/value 周围加上一些注释是否更容易获得它？

我很感激帮助。我正在玩一个 DOM 操作库，所以我考虑将脚本标签包装在每个变量周围并在每个变量上放置一个 ID。我认为这可行，但似乎输出有点荒谬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:11:57.417

你需要等号周围的空格吗，如果不是在这里 -`preg_replace( "/rsp\.pageId='([a-zA-Z0-9])+'/", "rsp.pageId='blah'" );` 如果是的话，试试这里 -`preg_replace( "/rsp\.pageId\s?=\s?'([a-zA-Z0-9])+'/", "rsp.pageId='blah'" );`

# c++ - 将用户模式 dll 中的高级函数映射到 NTDLL.dll

> ID：13077245
> 
> 赞同：1
> 
> 时间：2012-10-25T21:02:56.103
> 
> 标签：c++, api, dll, ntdll, nt-native-api

《[Windows NT/2000 Native API Reference](https://rads.stackoverflow.com/amzn/click/com/1578701996) 》一书提供了未记录的（由 Microsoft 提供的）Native API 的综合文档（即使已过时）。但我很好奇，有没有找到在 ntdll.dll 中声明的低级函数与 kernel32.dll、advapi.dll 等中的用户模式函数之间的映射。

例如：

我知道函数`CreateFile`映射到`NtCreateFile`. `MoveFileWithProgressW`但是对于kernel32.dll中的函数，我不知道 ntdll.dll 中的确切函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:20:44.553

与标准 Windows（用户模式）API 相比，NT 本机 API 是较低级别的 API。所以很多情况下没有一一对应的关系。我猜这`MoveFileWithProgress`是使用较低级别的打开/读取/写入/关闭例程在用户空间中实现的。

换句话说，如果你想使用 Native API，你需要重新实现一堆方便的函数，比如`MoveFileWithProgress`.

Wine 项目重新实现了 Windows API。您可以查看[他们的实现](http://source.winehq.org/git/wine.git/blob/HEAD:/dlls/kernel32/path.c)以了解它是如何完成的。（在页面中搜索“MoveFileWithProgress”）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T21:21:14.973

`dumpbin.exe`您可以使用Windows SDK/Visual Studio 中的实用程序从用户模式系统 DLL 转储导出并查找转发函数：

`dumpbin -exports kernel32.dll | find/I "forwarded" > fwd.txt`

这将创建`fwd.txt`包含转发函数列表的文件，如下所示：

```
151   96  EnterCriticalSection (forwarded to NTDLL.RtlEnterCriticalSection)
361  168  GetLastError (forwarded to NTDLL.RtlGetLastWin32Error)
518  205  HeapAlloc (forwarded to NTDLL.RtlAllocateHeap)
524  20B  HeapFree (forwarded to NTDLL.RtlFreeHeap)
528  20F  HeapReAlloc (forwarded to NTDLL.RtlReAllocateHeap)
530  211  HeapSize (forwarded to NTDLL.RtlSizeHeap) 
```

等等

# mysql - 我应该给以 JSON 格式存储签名的 MYSQL VARCHAR 字段的长度是多少？

> ID：13077251
> 
> 赞同：3
> 
> 时间：2012-10-25T21:03:10.843
> 
> 标签：mysql, json, digital-signature, varchar

我正在尝试将签名存储在数据库中。我正在使用签名板插件（[signaturePad](http://thomasjbradley.ca/lab/signature-pad/)），它从 转换`canvas`为`JSON`现在想要将签名存储在`MySQL`.

我正在使用一个`VARCHAR`字段，但我不确定我应该允许哪个长度。我尝试了几次，通常最终得到一个 2000 到 3000 个字符之间的字符串。

**问题：**
我应该在 MYSQL 中使用什么字段长度？我不知道`CANVAS=>JSON`转换是如何完成的，所以也许有人可以告诉我会发生什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:05:58.563

我不会用`VARCHAR`，我会用`TEXT`。这样做可能会牺牲性能，但不必担心大小限制。

编辑：

此外，最大值`VARCHAR`是`VARCHAR(65535`)。只是在那里做个笔记..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:05:52.370

不要使用`VARCHAR`. 使用`TEXT`.

文档中概述[了 signaturePad 插件](http://thomasjbradley.ca/articles/saving-signatures-php-mysql/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T21:10:01.480

使用其中一种 TEXT 数据类型可能会更好。

```
TINYTEXT    256 bytes    
TEXT    65,535 bytes    ~64kb
MEDIUMTEXT   16,777,215 bytes   ~16MB
LONGTEXT    4,294,967,295 bytes ~4GB 
```

它还取决于您的 MySQL 版本。

请参阅：[VARCHAR(20000) 在 MySQL 中有效吗？](https://stackoverflow.com/questions/1303476/is-a-varchar20000-valid-in-mysql)

# php - 海量电子邮件脚本需要大量内存

> ID：13077252
> 
> 赞同：0
> 
> 时间：2012-10-25T21:03:14.930
> 
> 标签：php, email

我用 PHP 编写了一个简单的脚本，它获取我客户的电子邮件地址并向他们发送 HTML 电子邮件。我已经正确设置了标头并使用了 base64 编码。它使用有效的 SMTP 帐户发送电子邮件。但问题是它一直在消耗内存，我增加“memory_limit”的次数越多，它请求的内存就越多并且永远不会运行！并且没有电子邮件也被发送出去。它一一向每个客户发送电子邮件。

请指教。我可以为此使用哪种策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:05:32.707

我建议您将电子邮件添加到数据库表或 csv（一推）

然后编写一个 cron 作业/计划任务，逐步将这些电子邮件发送出去。这样负载平衡并且服务器断电〜（等）不会导致电子邮件被“遗忘”。

发送邮件后，您将记录标记为已发送（或将其删除）并且您的队列正在工作。

# objective-c - 编译器如何确定哪些消息可以发送到 id 类型变量？

> ID：13077256
> 
> 赞同：2
> 
> 时间：2012-10-25T21:03:33.263
> 
> 标签：objective-c, ios, compiler-construction

我在 Xcode 中尝试使用 TabBarController 模板做一些事情时遇到了这个“问题”（这不是一个真正的问题，我只是很惊讶这是可能的）。如果您使用没有故事板的模板，则基本设置如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
self.tabBarController = [[UITabBarController alloc] init];

self.tabBarController.viewControllers = @[viewController1, viewController2];

self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES;
} 
```

tabBarController 的 viewControllers 属性是一个 NSArray。因此`[self.tabBarController objectAtIndex:0]`返回一个`id`.

所以我一直在想，如果我想调用我在 FirstViewController 类中声明的方法，我必须这样做：

```
FirstViewController *firstVC = (FirstViewController *)[self.tabBarController objectAtIndex:0];
[firstVC someMethod]; 
```

但事实证明，这是不必要的，编译器也会让我执行以下操作 - 只要我导入一个声明的头文件`someMethod`（当然它不一定会增加可读性，但无论如何）：

```
[[self.tabBarController objectAtIndex:0] someMethod]; 
```

我完全没想到会这样。所以我假设编译器将允许调用任何方法，`id`只要该方法在当前类范围内的任何类中声明（我的意思是，它的头文件被导入到当前类中）。如果`someMethod`未导入声明的类，编译器将抛出错误（但我必须补充一点，我在使用 ARC 时对此进行了测试。很有可能，编译器不会抱怨在`id`何时调用“未导入”方法不使用ARC）...

这个假设正确吗？如果可能的话，您能否提供有关 id 类型的更多信息或参考？

或者编译器是否允许在 ARC 之前调用任何方法`id`（是否导入），而现在对未导入方法的抱怨只是 ARC 的结果？

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:16:54.720

对象（类型`id`通常是从​​ 继承的任何对象的任何实例`NSObject`）具有方法。一个对象要么响应方法签名，要么不响应。

XCode 可能会向您发出警告，说明这不会通过类型检查响应该方法，但代码仍将运行。如果你在一个不支持它的对象上执行一个方法，你会得到一个运行时异常。您可以将任何对象转换为任何其他类型的完全不兼容的对象，并且仍然在运行时调用该对象的方法。

```
// This should work at runtime, but generate warning when compiled
// Don't do this, obviously, but it should "work"
NSNumber *array = [NSArray arrayWithObject:@"foobar"];
NSLog([array objectAtIndex:0]); // "foobar" 
```

类型检查实例和在它们上调用的方法在编译时对程序员来说是一个好处，但对运行时编译的应用程序来说却没有那么多好处。

所以回答你的问题：

> 编译器如何确定哪些消息可以发送到对象？

它在运行时询问对象。

```
[myObj myMethod:123]; 
```

在 ObjC 运行时触发类似这样的伪代码：

```
if myObj responds to the message with signature "myMethod:"?
  send myObj the "myMethod:" message with arguments [123]
else
  throw an exception 
```

变量声明的类型实际上在运行时根本不重要，因为变量只是一个指向对象的指针。确定该对象是否响应某个方法并不是在编译时完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:45:56.940

> 或者编译器是否允许在 ARC 之前调用 id 上的任何方法（是否导入），而现在对未导入方法的投诉只是 ARC 的结果？

这是对的。没有 ARC，这是一个警告。使用 ARC，这是一个错误（因为如果 ARC 在这里猜错了，它可能会遇到严重的问题）。

在某些情况下，这种行为可能会导致一些非常微妙的错误，无论是否使用 ARC。如果有多个方法签名与选择器匹配，那么编译器可能会选择错误的返回类型，这会导致非常令人惊讶的运行时行为。[Matt Gallagher 在“Objective-C 的弱类型化的一大弱点”](http://www.cocoawithlove.com/2011/06/big-weakness-of-objective-c-weak-typing.html)中对此提供了很好的解释。我遇到了他描述的同样的错误，这是 ObjC 开发人员应该注意的事情，即使它不经常出现。

# android - 大型应用程序中的 onSaveInstanceState()/onRestoreInstanceState()

> ID：13077257
> 
> 赞同：0
> 
> 时间：2012-10-25T21:03:39.417
> 
> 标签：android

我有一个复杂的应用程序：一个 Application 类和一堆 Activity 类，它们从一个通用 Activity 开始作为 Intent。

根据日志，该进程正在死亡。当我运行我的应用程序，回家，启动一大堆其他应用程序然后返回我的应用程序时，就会发生这种情况。

在日志中，我看到：

10-25 12:11:08.195: I/ActivityManager(2492): 进程 my.awesome.app (pid 20860) 已经死亡。

my.awesome.app 然后在应用程序重新启动时通过主 Activity 的 onCreate() 方法。

但是，我最终出现在错误的屏幕上，因为将我引导到正确屏幕的实例变量没有保留它在应用程序死亡时的值。实际上，我希望该应用程序没有死，因为它被系统杀死然后又复活了。

查看代码，我没有看到 onSaveInstanceState()/onRestoreInstanceState() 方法，所以我很确定我需要提供它们。

问题是哪些活动需要提供 onSaveInstanceState()/onRestoreInstanceState()/对他们所做的事情做出反应？

假设我有几个活动很深——也就是说，我的应用程序类已经启动了一个活动类，它启动了一个线程来运行一个活动，并且它本身正在通过一个意图运行另一个活动。

是否所有涉及的类都需要提供/响应 onSaveInstanceState()/onRestoreInstanceState()？它只是 Application 类，因为我在那里检测到将我发送到错误屏幕的不正确值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:09:43.050

onSave/onRestoreInstanceState 并不是真正适用于应用程序范围的设置。更多的是针对单个活动的设置。

如果您总是想在进程被杀死后返回某个活动，您可能应该将上次打开状态保存到首选项中，然后在您的主启动器活动的 onCreate 中，根据保存的偏好。

# java - Jasper with Spring——来自 org.apache.commons.digester 的大量日志

> ID：13077258
> 
> 赞同：2
> 
> 时间：2012-10-25T21:03:41.750
> 
> 标签：java, spring, tomcat, logging, jasper-reports

我在[这里](https://stackoverflow.com/questions/12943030/outofmemoryerror-permgen-space-jasper-report-with-spring-running-on-tomcat)有一个线程来演示 Spring 中的当前问题与 Jasper 报告。在 SO 的所有天才的帮助下，我已经解决了大部分问题，但仍然坚持解决花费在`org.apache.commons.digester`.

这种情况在连接 jasper 报告 bean 时很常见，如果我们打开调试日志模式，会有大量来自`org.apache.commons.digester.Digiester.sax`,的日志信息`EVEN CURRENT PAGE HAS NOTHING TO DO WITH JASPER REPORT`。所以在我看来，jasper bean 的连线不好，所以当应用程序运行时，容器一直试图帮助 bean 连线。

这是运行时的一些正常日志（当视图上没有 jasper 报告时发生），说明 tld jar 混淆，但应用程序仍然可以继续运行。

```
Oct 17, 2012 3:42:27 PM org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time. 
```

这是applicationContext配置文件中的bean，这是一个很常见的bean

```
<bean id="pdfStandard" class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
    <property name="url" value="classpath:/META-INF/jasperReports/pdf_stardard.jrxml" />
    <property name="reportDataKey" value="datasource" />
    <property name="headers">
        <props>
            <prop key="Content-Disposition">attachment; filename=standard.pdf</prop>
        </props>
    </property>
</bean> 
```

这是调试级别的千兆字节日志文件的一小部分`looks like it is parsing the template all the time without a rest`，或者尝试从 jasper 库解析 XML？

```
 2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester.sax -- startElement(http://jasperreports.sourceforge.net/jasperreports,textElement,textElement)
    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   Pushing body text ''
    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   New match='jasperReport/summary/band/textField/textElement'
    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester --   Fire begin() for FactoryCreateRule[className=net.sf.jasperreports.engine.xml.JRTextElementFactory, attributeName=null, creationFactory=net.sf.jasperreports.engine.xml.JRTextElementFactory@12dc6007]
    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester -- [FactoryCreateRule]{jasperReport/summary/band/textField/textElement} New net.sf.jasperreports.engine.design.JRDesignTextField
    2012-10-17 15:29:12,025 -- DEBUG -- org.apache.commons.digester.Digester.sax -- ignorableWhitespace() 
```

现在的问题是：

1.  为什么`org.apache.commons.digester`保留“摘要”jasper 报告组件，甚至当前视图与 Jasper 报告无关？

2.  仍然非常困惑是碧玉 bean 没有很好地连接还是有什么问题，`digester`以便保持碧玉报告 bean/模板如此活跃。我尝试节省一些不必要的内存消耗，但我想只关闭日志`digester`可能不是解决方案，因为它们可能仍在后台运行。

3.  我非常有信心在 tomcat/vfabbric 上启动应用程序时，jasper 报告在编译时而不是加载时编译。那么为什么看起来“消化器”仍然在努力解析 jasper 模板呢？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-21T15:13:00.643

我在 Spring 上进行单元测试时遇到了同样的问题。要在测试中关闭日志记录，您应该在类路径 (src/test/resources) 中创建一个 logback-test.xml 文件，其中包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <include resource="org/springframework/boot/logging/logback/base.xml" />
    <logger name="org.apache.commons.digester" level="OFF"/>
</configuration> 
```

# c# - 异步套接字：在发送所有数据之前阻塞该线程

> ID：13077260
> 
> 赞同：0
> 
> 时间：2012-10-25T21:03:53.153
> 
> 标签：c#, .net, sockets, asynchronous, iasyncresult

关于`asynchronious sockets`，我想知道在发送所有数据之前是否可以保留线程？

随着使用[`Socket.BeginSend`](http://msdn.microsoft.com/en-us/library/7h44aee9.aspx)

```
public IAsyncResult BeginSend(
byte[] buffer,
int offset,
int size,
SocketFlags socketFlags,
AsyncCallback callback,
Object state 
```

我在缓冲区参数内发送数据。我想知道是否有可能在所有数据真正从这里发送之前以某种方式阻塞线程（不考虑另一端是否收到数据）？所以我可以调用一个`Socket.BeginReceive`方法？

--

使用委托是否足够好`ManualResetEvent`（我称之为“sendDone”）？

例子：

```
 private static ManualResetEvent sendDone = new ManualResetEvent(false);
 //inisde a method call WaitOne() method:
 sendDone.WaitOne(); 
```

这够好吗？或者有没有更好的替代方案？

谢谢ans

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:12:54.737

最简单的方法是使用[class](http://msdn.microsoft.com/en-us/library/attbb8f5.aspx)上的[`Send`方法](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.send.aspx)，因为它会阻塞调用线程，如下所示：[`Socket`](http://msdn.microsoft.com/en-us/library/attbb8f5.aspx)

```
byte[] buffer = ...;

int bytesSent = socket.Send(bytes); 
```

请注意，如果您真的想阻止对 BeginSend 的调用，您可以使用 Task Parallel Library 创建一个[`Task<TResult>`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)您可以等待的，如下所示：

```
Task<int> task = Task.Factory.FromAsync(
    socket.BeginSend(buffer, offset, size, socketFlags, null, null), 
    socket.EndSend);

// Wait on the task.
task.Wait();

// Get the result.
// Note, you can omit the call to wait above, the call to 
// Result will block.
int bytesSent = task.Result; 
```

# python - 使用 Python 直接访问单个像素

> ID：13077263
> 
> 赞同：0
> 
> 时间：2012-10-25T21:04:04.603
> 
> 标签：python, image-processing, pixel, imaging

Python有什么方法可以直接从图像（如果可能的话压缩格式）中直接获取（只获取，不修改）单个像素（以获取其RGB颜色），而无需将其加载到RAM中或处理它（以节省CPU )?

* * *

更多细节：

我的应用程序有一个庞大的图像数据库，而且只有图像。

所以我选择的是直接将图像存储在硬盘上，这样可以避免 DBMS 的额外工作量。

但是我想进行更多优化，我想知道是否有一种方法可以直接访问图像中的单个像素（我的应用程序对图像执行的唯一操作），而无需将其加载到内存中。

PIL 像素访问是否允许这样做？还是有其他方法？

图像的编码是我自己的选择，所以我可以随时更改。目前我正在使用PNG或JPG。我也可以以原始格式存储，但如果可能的话，我更愿意将图像压缩一点。但我认为硬盘驱动器比 CPU 和 RAM 便宜，所以即使图像必须保持 RAW 才能做到这一点，我认为它仍然是一个更好的选择。

谢谢你。

**更新**

因此，正如我所担心的那样，似乎不可能使用可变压缩格式，例如 PNG。

我想完善我的问题：

*   是否有一个恒定的压缩格式（不一定特定于图像格式，我将以编程方式访问它），它允许通过读取标题来访问任何部分？
*   从技术上讲，如何使用 Python 有效地（阅读：快速且非阻塞）访问文件中的字节？

**解决方案**

多亏了大家，我已经成功地实现了我描述的功能，方法是在每一行上使用游程编码，并将每一行填充到与最大行相同的长度。

这样，通过为每行准备一个描述固定列数的标题，我可以先使用 file.readline() 轻松访问该行以获取标题数据，然后使用 file.seek(headersize + fixedsize*y, 0 ) 其中 y 是当前选定的行。

文件被压缩，在内存中我只获取一行，我的应用程序甚至不需要解压缩它，因为我可以通过迭代每个 RLE 值来计算像素的确切位置。所以在 CPU 周期上也很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:30:54.390

如果要保留压缩文件格式，可以将每个图像分成较小的矩形并分别存储。使用固定大小的矩形将更容易计算出你需要哪个。当您需要像素值时，计算它所在的矩形，打开该图像文件，并偏移坐标以获得正确的像素。

这并不能完全优化对单个像素的访问，但它可能比打开整个大图像更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:01:27.310

为了评估文件，您必须加载到内存中。但是，根据文件格式，您可能能够弄清楚如何只读取文件的一部分。例如，PNG 文件指定大小为 8 字节的标头。但是，由于压缩，块是可变的。但是如果你想以原始格式存储所有像素，你可以直接访问每个像素，因为你可以计算文件的地址和适当的偏移量。无法预测 PNG、JPEG 将如何处理原始数据。

根据文件的结构，您可能能够计算出有效的哈希值。我想有很多研究，如果你想真正进入这个，例如： http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber= [899541](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=899541)

“本文介绍了一种新的图像索引技术，可以称为图像哈希函数。该算法使用随机信号处理策略将图像不可逆地压缩为随机二进制字符串，并显示出对压缩引起的图像变化具有鲁棒性、几何变形和其他攻击"

# global-variables - 在 RPG 游戏中存储世界信息

> ID：13077267
> 
> 赞同：1
> 
> 时间：2012-10-25T21:05:03.223
> 
> 标签：global-variables, state, flags

我正在开发一款 RPG 游戏，我想知道存储游戏世界状态信息的方法，例如“与角色 X 对话”标志、已完成任务的标志等。典型的 RPG 可能有数百个这样的 - 比方说 -全局变量来保存所有状态信息，但是变量是要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:09:00.590

这有一些很好的信息。

[http://www.eurogamer.net/articles/digitalfoundry-does-fallout-nv-lag-explain-skyrim-issues](http://www.eurogamer.net/articles/digitalfoundry-does-fallout-nv-lag-explain-skyrim-issues)

> “这是一个引擎级别的问题，与主 .esm + DLC .esms 中放置的实例相比，保存游戏数据如何存储为位标志差异，”Sawyer 解释说，引用了 Fallout 3/New 使用的数据库文件维加斯引擎，留在天际。
> 
> “当游戏修改任何放置的对象实例时，这些更改将存储到本质上是另一个 .esm 文件中。当您加载保存游戏时，您会将所有这些差异加载到常驻内存中。”

# javascript - 当用户未授权应用程序时如何从 Facebook 注销用户

> ID：13077268
> 
> 赞同：0
> 
> 时间：2012-10-25T21:05:02.350
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我有 ASP.NET Web 应用程序

1.  在公共计算机上运行
2.  允许用户使用他们的 Facebook 帐户进行注册。
3.  注册完成后，必须始终从 Facebook 注销用户。

注册过程包含以下步骤：

1.  注册页面显示有 Facebook 图标。
2.  当用户点击 Facebook 图标时，他会被重定向到 Facebook 网站。
3.  在 Facebook 网站上，用户输入他的电子邮件和密码，然后单击登录。
4.  在 Facebook 站点上，用户单击允许以授权我的应用程序。
5.  用户被重定向到我的应用程序。
6.  数据库中使用的应用程序寄存器。
7.  应用程序调用 FB.logout 以从 Facebook 注销。因此，当新用户开始注册时，他不能使用以前用户的帐户。

该应用程序运行完美，直到用户在第 4 步单击“取消”。发生这种情况时，浏览器被重定向到我的应用程序，用户保持登录到 Facebook，但该应用程序未经该用户授权。这意味着应用程序无法使用 FB.logout 方法从 Facebook 注销该用户，因为应用程序没有访问令牌。

在这种情况下如何从 Facebook 注销？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:33:42.490

> 在这种情况下如何从 Facebook 注销？

根本不可能。

*如果可以在**没有*有效访问令牌的情况下将用户注销，那么我访问的*每个*网站都可以在他们喜欢的情况下这样做——我相信你可以看到这对用户来说有多烦人，因此这是不可能的。

# objective-c - 使用位操作设置一些标志的最佳实践

> ID：13077271
> 
> 赞同：5
> 
> 时间：2012-10-25T21:05:12.433
> 
> 标签：objective-c, ios, bit-manipulation

我想打开/关闭代表难度级别的 3 颗星。我不想使用几个 if 条件，是否可以通过按位运算来做到这一点？

假设我已经声明了一个这样的枚举：

```
enum 
{
    EASY = 0,
    MODERATE,
    CHALLENGING
} Difficulty; 
```

我想找一个位操作，让我找到要打开或关闭的星星：

例如：

```
level 2 (challenging)
star 0 -> 1
star 1 -> 1
star 2 -> 1

level 1 (moderate)
star 0 -> 1
star 1 -> 1
star 2 -> 0

level 0 (easy)
star 0 -> 1
star 1 -> 0
star 2 -> 0 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T21:33:36.550

在这种情况下，如果您想使用 3 位来保存您的星星状态，而不是使用三个布尔标志，那么您应该这样做：

```
typedef enum 
{
    DifficultyEasy = 1 << 0,
    DifficultyModerate = 1 << 1,
    DifficultyChallenging = 1 << 2
} Difficulty;

Difficulty state = 0; // default 
```

设置简单：

```
state |= DifficultyEasy; 
```

添加挑战：

```
state |= DifficultyChallenging; 
```

轻松重置：

```
state &= ~DifficultyEasy; 
```

要知道是挑战集：

```
BOOL isChallenging =  DifficultyChallenging & state; 
```

在这种情况下，有人需要解释它是如何工作的：

```
1 << x means set x bit to 1 (from right);
// actually it means move 0b00000001 left by x, but I said 'set' to simplify it 

1 << 5 = 0b00100000; 1 << 2 = 0b00000100; 1 << 0 = 0b00000001;

0b00001111 | 0b11000011 = 0b11001111 (0 | 0 = 0, 1 | 0 = 1, 1 | 1 = 1)

0b00001111 & 0b11000011 = 0b00000011 (0 & 0 = 0, 1 & 0 = 0, 1 & 1 = 1)

~0b00001111 = 0b11110000 (~0 = 1, ~1 = 0) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T21:29:21.593

你会想做这样的事情：

```
typedef enum Difficulty : NSUInteger
{
    EASY = 1 << 0,
    MODERATE = 1 << 1,
    CHALLENGING = 1 << 2
} Difficulty; 
```

然后检查它：

```
- (void) setStarsWithDifficulty:(Difficulty)diff
{
    star0 = (diff & (EASY | MODERATE | CHALLENGING));
    star1 = (diff & (MODERATE | CHALLENGING));
    star2 = (diff & CHALLENGING);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:13:33.657

你在谈论类似的东西：

```
star0 = 1
star1 = value & CHALLENGING || value & MODERATE
star2 = value & CHALLENGING 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:40:15.720

```
#define STAR0 1
#define STAR1 2
#define STAR2 4

#define  EASY   STAR0
#define  MODERATE  STAR1|STAR0
#define  CHALLENGING STAR0|STAR1|STAR2 
```

用 and 检测一个值 d 并与 0 进行比较将产生所需的映射，上面的一些示例将为您提供映射值，看看：

```
 int d = EASY;
  NSLog(@"Star 0 %d",(d&STAR0)!=0);
  NSLog(@"Star 1 %d",(d&STAR1)!=0);
  NSLog(@"Star 2 %d",(d&STAR2)!=0);
  d=MODERATE;
  NSLog(@"Star 0 %d",(d&STAR0)!=0);
  NSLog(@"Star 1 %d",(d&STAR1)!=0);
  NSLog(@"Star 2 %d",(d&STAR2)!=0);
  d=CHALLENGING;
  NSLog(@"Star 0 %d",(d&STAR0)!=0);
  NSLog(@"Star 1 %d",(d&STAR1)!=0);
  NSLog(@"Star 2 %d",(d&STAR2)!=0); 
```

# java - 使用 Java GUI 从数据库中删除或插入数据库

> ID：13077275
> 
> 赞同：-1
> 
> 时间：2012-10-25T21:05:29.480
> 
> 标签：java, mysql, sql, user-interface, insert

我的代码可以很好地执行选择语句，但由于某种原因，我无法让插入和删除段工作。我相信他们应该是一样的吧？我只是不知道我的代码有什么问题。

```
 else if (e.getSource() == executeButton) {
        //Create a statement
        if (enterSQLText.getText().toLowerCase().contains("select")){
            try{
                String commandString = enterSQLText.getText();
                Statement statement = conn.createStatement();
                //Execute a statement
                ResultSet resultSet = statement.executeQuery(commandString);
                //Process query results
                ResultSetMetaData metaData = resultSet.getMetaData();
                int numberOfColumns = metaData.getColumnCount();

                for(int i = 1; i<= numberOfColumns; i++){
                  executionResultText.append(metaData.getColumnName(i) + "\t");
                  System.out.printf("%20s\t", metaData.getColumnName(i));
                }
                executionResultText.append("\n");
                System.out.println();

                while (resultSet.next()){
                    for (int i = 1; i <= numberOfColumns; i++){
                        executionResultText.append(resultSet.getObject(i).toString() + "\t");
                        System.out.printf("%20s\t", resultSet.getObject(i));
                    }
                    executionResultText.append("\n");
                    System.out.println();
                 }
                 System.out.println("Execute Button Works!");
              }
              catch (Exception h){
                h.printStackTrace();
              }
        }
        else if (enterSQLText.getText().toLowerCase().contains("delete") || enterSQLText.getText().toLowerCase().contains("insert")) {
            try {
                String commandString = enterSQLText.getText();
                Statement statement = conn.prepareStatement(commandString);
                ResultSet resultSet = statement.executeUpdate(commandString);
            }
            catch (Exception l){
                l.printStackTrace();
            }
        }
        else {
            executionResultText.setText("Sorry, that is not a valid command");
            System.out.println("Not a vilid command.");
        }
    } 
```

在 else if 语句中是我遇到问题的地方。如果我尝试运行插入或删除语句，它通常只会引发堆栈跟踪错误。有人可以帮忙吗？

编辑：

为了让代码执行，我必须将 else if 段更改为以下内容：

```
else if (enterSQLText.getText().toLowerCase().contains("delete") || enterSQLText.getText().toLowerCase().contains("insert")) {
                try {
                    String commandString = enterSQLText.getText();
                    Statement statement = conn.prepareStatement(commandString);
                    @SuppressWarnings("unused")
                    int resultSet = statement.executeUpdate(commandString);
                }
                catch (Exception l){
                    l.printStackTrace();
                }
            } 
```

当我尝试执行插入或删除命令时，我得到一个像这样的堆栈跟踪：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'Mark Renshaw' for key 'PRIMARY'
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1040)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2728)
    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1811)
    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1725)
    at ConnectToDB.actionPerformed(ConnectToDB.java:203)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

无论我对该段做什么，它要么阻止我连接到数据库，要么引发错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:19:37.207

> com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：重复条目 'Mark Renshaw' 键 'PRIMARY'

是相当明显的。您正在尝试为主键插入重复条目。主键是唯一的，您不能两次使用相同的键。

您可能不希望您的 name 列成为主键。为此使用自动生成的 ID 列。

否则，删除包含“Mark Renshaw”的列并再次运行您的代码。但是，当您以相同的名称运行两次时遇到冲突时，它只会工作一次。

# haskell - 为什么我不能用这种未参数化的类型创建实例？

> ID：13077280
> 
> 赞同：6
> 
> 时间：2012-10-25T21:05:39.813
> 
> 标签：haskell, typeclass

为什么这段代码是正确的

```
instance Functor IO where -- note that IO isn't parametrized, and it's correct
    fmap f action = do
        result <- action
        return (f result) 
```

但是下面的代码有编译错误？

```
class Print a where
    print :: a -> String

data A t = A t
instance Print A where  -- error: expecting one more argument to `A'
    print a = "abc" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T21:27:37.683

这是因为[种类](http://www.haskell.org/haskellwiki/Kind)不匹配。常规类型有 kind `*`，而类型构造函数如`A`or`IO`有 kind `* -> *`，表明它们需要一个类型参数才能返回一个类型。

在`Print`类的定义中，编译器推断由于`a`用作普通类型，因此它必须具有 kind `*`。但是，`Functor`适用于 kind 的类型构造函数`* -> *`：

```
class Functor f where
  fmap :: (a -> b) -> f a -> f b 
```

在这里，`f`不是用作普通类型，而是用作类型构造函数，因此推断 kind is `* -> *`。`:kind`您可以使用GHCi中的命令验证这一点：

```
> :kind Print
Print :: * -> Constraint
> :kind Functor
Functor :: (* -> *) -> Constraint 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T21:13:42.260

当你说

```
class Print a where
   print' :: a -> String 
```

你确保它`a`必须是一种类型，但是当你说

```
data A t = A t 
```

您创建`A`了一个类型构造函数 -`A`不是类型，而是`A Int`，例如。`A`是类型上的一种函数，但`a`Print 类中的 必须是类型值，而不是类型函数。

你可以做

```
instance Print (A Int) where
  print' a = "abc" 
```

没关系，`IO`因为`Functor`该类要求类型构造函数。

```
class Functor f where
  fmap :: (a -> b) -> f a -> f b 
```

可以看到，since `f a`is a type，`f`is a type constructor，就像`IO`and `A`are一样。你将能够做到

```
instance Functor A where  -- OK, A is a constructor, Functor needs one
  fmap f (A x) = A (f x) 
```

你将无法做到

```
instance Eq IO where -- not OK - IO is a constructor and Eq needs a type
    (==) = error "this code won't compile" 
```

（为了避免与标准函数发生冲突，我使用`print'`了not 。）`print``print`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T04:29:21.173

尝试在心里（或使用文本编辑器）用您在实例中使用的类型填充类定义中给出的类型。

从：

```
class Print a where
    print :: a -> String 
```

和

```
data A t = A t 
```

我们想要

```
instance Print A 
```

所以，`a`在类型类定义中替换`A`我们所说的是一个实例，我们得到这个：

```
class Print A where
    print :: A -> String 
```

哦哦。`A -> String`作为一种类型没有意义，因为函数类型箭头在左边接受一个类型，在右边接受一个类型，并为您提供函数类型。但`A`不是类型，因为您`A`使用`data A t`;声明 `A t`是任何类型的类型`t`，但是`A`是*类型构造函数*。如果将它应用于类型，它可以创建类型，但`A`它本身是不同的。因此，您可以制作`A t`的实例`Print`，但不能制作`A`它本身。

那么为什么`instance Functor IO`起作用呢？让我们看一下类定义：

```
class Functor f where
    fmap :: (a -> b) -> f a -> f b 
```

`IO`现在让我们尝试替换`f`：

```
class Functor IO where
    fmap :: (a -> b) -> IO a -> IO b 
```

s最终`IO`应用于类型参数，所以一切正常。在这里，如果我们尝试创建一个具体类型`Int`，`A t`例如`Functor`.

# html - 嵌入式设备的服务器端应用程序

> ID：13077283
> 
> 赞同：2
> 
> 时间：2012-10-25T21:05:46.017
> 
> 标签：html, tcp, embedded, websocket, firewall

我想要一些关于可以处理来自设备的实时数据并根据输入做出决策的最佳服务器端代码的建议。一个简单的例子：假设我有一个支持网络的温度计，运行一个轻型 TCP/IP 客户端堆栈。当温度达到 30 度时，我希望设备与服务器联系，然后我希望服务器向我发送电子邮件。我还希望服务器能够发送打开加热器的命令。

这里的问题是能够从服务器启动 TCP 消息，并通过各种任意防火墙和路由器，一直到客户端设备。我知道有一些“解决方法”，比如轮询服务器以获取更新，或者我调用服务器的“长轮询”，并保持连接打开以防它有东西要发送。这里的问题是带宽。消息很少见，但很重要，因此标头和握手占流量的 98%。

我一直在阅读 WebSockets，似乎它们正是我所需要的，尤其是与 HTML5 搭配使用时。

有谁知道可以在云服务器上运行并使用一些标准化方法将数据推送到我的设备的现成服务器软件包？我真的不想在这里重新发明轮子，我不敢相信我是第一个尝试这个的人。我看到一些人使用他们自己的专有解决方案来做这件事，但我对购买一站式服务包更感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:39:38.657

WebSocket 是一种将嵌入式设备连接到后端基础设施的有效选择，因为它具有低开销、低延迟以及与 Web 和通用网络基础设施的兼容性。有多种可用的服务器实现，例如 Jetty、基于 node.js 等。

例如，这是一个将 Arduino 设备连接到 WebSocket 服务器和浏览器客户端的演示，在图表中显示实时数据：

*   [https://github.com/tavendo/AutobahnPython/tree/master/examples/wamp/serial2ws](https://github.com/tavendo/AutobahnPython/tree/master/examples/wamp/serial2ws)
*   [http://www.youtube.com/watch?v=va7j86thW5M](http://www.youtube.com/watch?v=va7j86thW5M)

那里使用的技术 AutobahnPython 是基于 Python/Twisted 的 WebSocket 实现，

*   提供服务器和客户端实现
*   直接在 RasperryPi 等嵌入式设备上运行
*   可以轻松访问通过串行或 CANbus 连接的传感器（因为 Twisted 非常支持）
*   在 WebSocket 之上提供 RPC 和 PubSub 消息传递模式

该技术是开源的，因此您可以推出自己的解决方案。如果您需要帮助/服务来为您完成它，请联系我；）我们还提供 Tavendo WebMQ，这是一个虚拟设备（VMware、EC2），它添加了功能、管理 UI 等，还包括一个 REST API 来将数据推送到 WebSocket客户。

免责声明：我是 Autobahn 的作者，为 Tavendo 工作。

# java - 如何在签名中使用泛型正确覆盖抽象方法

> ID：13077304
> 
> 赞同：3
> 
> 时间：2012-10-25T21:07:40.087
> 
> 标签：java, generics, inheritance

我以为我知道如何做到这一点，但我得到了一些意想不到的行为，所以显然我错过了一些东西。这里的问题归结为。

基类：

```
public abstract class Base<T>
{
    abstract public void foo(List<? extends T> l);
} 
```

派生类：

```
public class Derived<T> extends Base
{
    @Override
    public void foo(List<? extends T> l) { return; }
} 
```

Base 类符合要求，但是当我编译 Derived 类时，我得到：

> Derived.java:3：Derived 不是抽象的，不会覆盖 Base 中的抽象方法 foo(java.util.List)
> 
> 公共类 Derived 扩展 Base
> ^
> Derived.java:5：方法不会覆盖或实现超类型中的方法
> 
> ```
> @Override  
> ^ 
> ```
> 
> 2 个错误

参数的泛型`List<? extends T>`似乎是问题的原因。如果我用基本类型替换两个签名中的那个部分，`int`它就可以很好地完成。

谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T21:09:55.080

你应该做

```
public class Derived<T> extends Base<T> 
```

您需要指定`<T>`for`Base`否则您将不得不通过简单地声明`List`iewithout generics来覆盖方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:24:45.937

您还可以像这样在类声明中传递类型参数：

```
 public class Derived extends Base<SomeConcreteType> {

        @Override
        public void foo(List<SomeConcreteType> l) {
            // ...
        }
    } 
```

如果您不再需要抽象类的泛型部分，因为您将在派生类中使用具体类型。否则，您必须按照其他答案所述进行操作。

# php - 通过 php exec 函数传递 $_SERVER 数组

> ID：13077305
> 
> 赞同：2
> 
> 时间：2012-10-25T21:07:41.900
> 
> 标签：php, exec

> **可能重复：**
> [安全执行 shell 脚本；在执行前转义变量](https://stackoverflow.com/questions/2624616/safe-executing-shell-scripts-escaping-vars-before-execution)

我想`$_SERVER`通过 php`exec()`函数传递数据来为后台进程运行另一个脚本。
传递一个简单的参数，我这样做：

```
exec("/usr/bin/php -f bg.php parameter1 > /dev/null &"); 
```

但我认为不可能直接将数组传递给这个函数。所以我尝试了*`serialize($_SERVER)`*。但现在有一个更大的问题。引号、分号和许多其他字符会破坏 shell 命令，并且无法正常工作。

那么解决这个问题有什么办法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:09:07.313

也许您正在寻找的是： http: [//php.net/manual/en/function.escapeshellarg.php](http://php.net/manual/en/function.escapeshellarg.php)

# java - Java Deflater 总是返回 0 问题

> ID：13077306
> 
> 赞同：1
> 
> 时间：2012-10-25T21:07:48.143
> 
> 标签：java

所以我有一个输入流，我从中读取一个较小的固定大小缓冲区，我试图在 Runnable 类中放气。

```
randomClass implements Runnable {
    public void run() {
        ...
        byte[] output = new Byte[FIXED];
        Deflater deflater = new Deflater();
        deflater.setInput(uncompressed);
        deflater.setLevel(Deflater.DEFLATED);
        int length = deflater.deflate(output);
        ...
    } 
} 
```

我遇到的问题是长度总是返回 0，这意味着根据文档我需要更多输入？但是，我检查了未压缩的不是空的。如何从输出中获取字节？

此外，我相信我应该只在最后一个块调用 deflater.finish() 。它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:17:57.097

我认为`compresser.finish();`应该在之后调用`deflater.setInput(uncompressed);`。然后继续下一步，应该没问题。

[**以下文档**](http://docs.oracle.com/javase/6/docs/api/java/util/zip/Deflater.html)中也提到了相同的内容：

```
 byte[] output = new byte[100];
 Deflater compresser = new Deflater();
 compresser.setInput(input);
 compresser.finish();  //<-- finished is called here
 int compressedDataLength = compresser.deflate(output); 
```

另外，请在初始化时设置级别，例如

```
 Deflater compresser = new Deflater(Deflater.DEFLATED, false); //<-set the level
 byte[] output = new byte[100];
 compresser.setInput(input);
 compresser.finish();  //<-- finished is called here
 int compressedDataLength = compresser.deflate(output); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:35:38.550

您需要调用`compresser.finish()`以获取最终输出。请参阅 Javadoc。如果您有多个缓冲区，最好使用`DeflaterInputStream`.

# javascript - 经过身份验证的 JavaScript AJAX 请求

> ID：13077308
> 
> 赞同：0
> 
> 时间：2012-10-25T21:08:01.010
> 
> 标签：javascript, ajax, jquery, authentication

我正在开发一个需要用户登录的移动应用程序，然后他们才能使用该应用程序。应用程序将在提交时向服务器提交数据。这是我的问题：如果我希望即使在没有互联网连接的情况下用户也可以使用该应用程序，我将允许他们绕过登录屏幕并在不登录的情况下使用该应用程序。但是，一旦互联网连接可用，并且应用程序知道这一点，并尝试将信息提交到服务器（通过 jQuery AJAX），我如何验证请求？似乎如果有人真的想要，他们可以建立自己的网页，并使用我的应用程序使用的相同 AJAX URL 和数据格式将自己的 [虚构] 数据提交到我的服务器。什么会阻止他们？如何在我的服务器端（AJAX 请求的接收端）确保传入的唯一数据属于我的应用程序，而不是简单地模仿我的 AJAX 请求的人？

我唯一能想到的是当应用程序检测到互联网连接恢复时，立即向用户显示登录屏幕，然后使用过期的 cookie/票证来验证 AJAX 请求。

有什么建议吗？谢谢！

# clojure - lein test 没有这样的文件或目录是什么意思？

> ID：13077313
> 
> 赞同：2
> 
> 时间：2012-10-25T21:08:29.307
> 
> 标签：clojure, leiningen

我无法理解为什么我得到`(No such file or directory)`如下上下文所示：

```
$ lein test

Testing rexfer.test.core
 (No such file or directory)

Ran 1 tests containing 1 assertions.
0 failures, 0 errors. 
```

这是我在测试目录中的 core.clj：

```
(ns rexfer.test.core
  (:use [rexfer.core])
  (:use [clojure.test])
  (:require [util.core :as utl]))

(deftest gen-test-1
  (let [data-col-nams (first (utl/fetch-csv-data "columns.csv"))
        assess-rpt (utl/fetch-csv-data "")]
    (is (= 122 (count data-col-nams))))) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:50:05.370

事实证明，这是由于以下映射导致的错误。一旦添加了一个值，消息就消失了。

`assess-rpt (utl/fetch-csv-data "")]`

# excel - 有没有办法将范围批量写入文本/CSV 文件？

> ID：13077317
> 
> 赞同：3
> 
> 时间：2012-10-25T21:08:37.827
> 
> 标签：excel, file, vba, csv

我习惯使用 VBA 中的 write 命令将一系列单元格的内容（值）写入文本文件，例如：

`write #myfile, Range("A1").value, Range("A2).value, Range("A3).value`

是否存在更优雅和方便的内置方法将整个范围直接转储到分隔文件，甚至可能一次转储多行？或者有没有人想出一个定制的解决方案？我认为这将非常有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:20:07.843

我给你写了这个它仍然可以改进，但我认为它已经足够好了：

```
Sub SaveRangeAsCSV(r As Range, filename As String, overwrite As Boolean)
    Dim wB As Workbook
    Dim c As Range
    Dim usedRows As Long
    If overwrite Then
        If Dir(filename) <> "" Then Kill filename
        If Err.Number <> 0 Then
            MsgBox "Could not delete previously existing file." & vbNewLine & Err.Number & ": " & Err.Description
            Exit Sub
        End If
    End If
    If Dir(filename) <> "" Then
        Set wB = Workbooks.Open(filename)
    Else
        Set wB = Workbooks.Add
    End If

    With wB.Sheets(1)
        usedRows = .UsedRange.Rows.Count
        'Check if more than 1 row is in the used range.
        If usedRows = 1 Then
            'Since there's only 1 row, see if there's more than 1 cell.
            If .UsedRange.Cells.Count = 1 Then
                'Since there's only 1 cell, check the contents
                If .Cells(1, 1) = "" Then
                      'you're dealing with a blank workbook
                      usedRows = 0
                End If
            End If
        End If
        'Check if range is contigious
        If InStr(r.Address, ",") Then
            For Each c In r.Cells
                .Range(c.Address).Offset(usedRows, 0).Value = c.Value
            Next
        Else
            .Range(r.Address).Offset(usedRows, 0).Value = r.Value
        End If
    End With
    wB.SaveAs filename, xlCSV, , , , False
    wB.Saved = True
    wB.Close
End Sub
Sub Example()
    'I used Selection here just to make it easier to test.
    'Substitute your actual range, and actual desired filepath
    'If you pass false for overwrite, it assumes you want to append
    'It will give you a pop-up asking if you want to overwrite, which I could avoid
    'by copying the worksheet and then closing and deleting the file etc... but I
    'already spent enough time on this one.
    SaveRangeAsCSV Selection, "C:\proofOfConcept.csv", False
End Sub 
```

使用它时，只需提供实际范围、实际文件名以及是否要覆盖文件。:) 这已更新为允许不连续的范围。对于合并的单元格，它最终会将值放在合并范围的第一个单元格中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T22:01:25.127

这是我自己提出的解决方案，据我所知最适合我的需求：

```
Sub DumpRangeToTextFile(filehandle As Integer, source As Range)
Dim row_range As Range, mycell As Range
For Each row_range In source.rows
    For Each mycell In row_range.cells
        Write #filehandle, mycell.Value;
    Next mycell
    Write #filehandle,
Next row_range
End Sub 
```

又短又甜！;)

我仍然给予 Daniel Cook 的解决方案，这也是它应得的功劳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-28T22:29:00.000

上面的这些方法遍历单元格范围以导出数据。由于所有错误检查，任何与循环工作表中的一系列单元格有关的事情都非常慢。

这是我在没有迭代的情况下做到的一种方式。基本上，它利用内置函数“Join()”来完成繁重的工作，这将是您的迭代循环。这要快得多。

我在另一篇文章中详述的相关**Read()子例程：** [https ://stackoverflow.com/a/35688988/2800701](https://stackoverflow.com/a/35688988/2800701)

这是**Write()**子例程（注意：这假定您的文本在导出之前已在工作表中预先格式化为正确的规范；它仅适用于单个列...而不适用于多个列范围）：

```
Public Sub WriteRangeAsPlainText(ExportRange As Range, Optional textfilename As Variant)
   If IsMissing(textfilename) Then textfilename = Application.GetSaveAsFilename(FileFilter:="Text Files (*.txt), *.txt")
   If textfilename = "" Then Exit Sub

   Dim filenumber As Integer
   filenumber = FreeFile
   Open textfilename For Output As filenumber

   Dim textlines() As Variant, outputvar As Variant

   textlines = Application.Transpose(ExportRange.Value)
   outputvar = Join(textlines, vbCrLf)
   Print #filenumber, outputvar
   Close filenumber
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T23:41:55.560

从我的文章[使用 Excel VBA 创建和写入 CSV 文件](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_3509-Creating-and-Writing-to-a-CSV-File-Using-Excel-VBA.html)

本文提供了两个 VBA 代码示例来创建和写入 CSV 文件：

1.  使用 Open For Output as FreeFile 创建 CSV 文件。
2.  使用 FileSystemObject 对象创建 CSV 文件。

我更喜欢后一种方法，主要是因为我使用 FileSystemObject 进行进一步编码，例如递归处理子文件夹中的所有文件（尽管本文中没有使用该技术）。

**代码注释**

> 此代码必须从常规 VBA 代码模块运行。否则，如果用户在使用 Const 的情况下尝试从 ThisWorkbook 或 Sheet Code 窗格运行该代码，则会导致错误。
> 
> 值得注意的是，ThisWorkbook 和 Sheet 代码部分应仅保留用于事件编码，“正常”VBA 应从标准代码模块运行。
> 
> 请注意，出于示例代码的目的，CSV 输出文件的文件路径被“硬编码”为：代码顶部的 C:\test\myfile.csv。您可能希望以编程方式设置输出文件，例如作为函数参数。
> 
> 如前面提到的; 例如，此代码转置列和行；也就是说，输出文件包含所选范围内每一列的一个 CSV 行。通常，CSV 输出将是逐行的，与屏幕上可见的布局相呼应，但我想证明使用 VBA 代码生成输出提供的选项超出了可用的选项，例如，使用另存为... CSV 文本菜单选项。

**代码**

```
Const sFilePath = "C:\test\myfile.csv"
Const strDelim = ","

'Option 1
Sub CreateCSV_Output()
Dim ws As Worksheet
Dim rng1 As Range
Dim X
Dim lRow As Long
Dim lCol As Long
Dim strTmp As String
Dim lFnum As Long

lFnum = FreeFile
Open sFilePath For Output As lFnum

For Each ws In ActiveWorkbook.Worksheets
    'test that sheet has been used
    Set rng1 = ws.UsedRange
    If Not rng1 Is Nothing Then
        'only multi-cell ranges can be written to a 2D array
        If rng1.Cells.Count > 1 Then
            X = ws.UsedRange.Value2
            'The code TRANSPOSES COLUMNS AND ROWS by writing strings column by column
            For lCol = 1 To UBound(X, 2)
                'write initial value outside the loop
                 strTmp = IIf(InStr(X(1, lCol), strDelim) > 0, """" & X(1, lCol) & """", X(1, lCol))
                For lRow = 2 To UBound(X, 1)
                    'concatenate long string & (short string with short string)
                    strTmp = strTmp & (strDelim & IIf(InStr(X(lRow, lCol), strDelim) > 0, """" & X(lRow, lCol) & """", X(lRow, lCol)))
                Next lRow
                'write each line to CSV
                Print #lFnum, strTmp
            Next lCol
        Else
            Print #lFnum, IIf(InStr(ws.UsedRange.Value, strDelim) > 0, """" & ws.UsedRange.Value & """", ws.UsedRange.Value)
        End If
    End If
Next ws

Close lFnum
MsgBox "Done!", vbOKOnly

End Sub

'Option 2
Sub CreateCSV_FSO()
Dim objFSO
Dim objTF
Dim ws As Worksheet
Dim lRow As Long
Dim lCol As Long
Dim strTmp As String
Dim lFnum As Long

Set objFSO = CreateObject("scripting.filesystemobject")
Set objTF = objFSO.createtextfile(sFilePath, True, False)

For Each ws In ActiveWorkbook.Worksheets
    'test that sheet has been used
    Set rng1 = ws.UsedRange
    If Not rng1 Is Nothing Then
        'only multi-cell ranges can be written to a 2D array
        If rng1.Cells.Count > 1 Then
            X = ws.UsedRange.Value2
            'The code TRANSPOSES COLUMNS AND ROWS by writing strings column by column
            For lCol = 1 To UBound(X, 2)
                'write initial value outside the loop
                strTmp = IIf(InStr(X(1, lCol), strDelim) > 0, """" & X(1, lCol) & """", X(1, lCol))
                For lRow = 2 To UBound(X, 1)
                    'concatenate long string & (short string with short string)
                    strTmp = strTmp & (strDelim & IIf(InStr(X(lRow, lCol), strDelim) > 0, """" & X(lRow, lCol) & """", X(lRow, lCol)))
                Next lRow
                'write each line to CSV
                objTF.writeline strTmp
            Next lCol
        Else
            objTF.writeline IIf(InStr(ws.UsedRange.Value, strDelim) > 0, """" & ws.UsedRange.Value & """", ws.UsedRange.Value)
        End If
    End If
Next ws

objTF.Close
Set objFSO = Nothing
MsgBox "Done!", vbOKOnly

End Sub 
```

# javascript - 如何将一个javascript数组映射到另一个javascript数组

> ID：13077318
> 
> 赞同：12
> 
> 时间：2012-10-25T21:08:37.640
> 
> 标签：javascript, arrays

我在 JavaScript 中有一个构造函数，其中包含 2 个属性`Key`和 `Values array`：

```
function Test(key, values) {
    this.Key = key;
    this.Values = values.map(values);
} 
```

然后我创建了一个数组`Test objects`：

```
 var testObjectArray = [];
 testObjectArray.push(new Test(1, ['a1','b1']), new Test(2, ['a1','b2'])); 
```

现在我想将类似于的`testObjectArray`单对数组映射到：`key-value`

```
[
    { "Key" : "1", "Value" : "a1" },
    { "Key" : "1", "Value" : "b1" },
    { "Key" : "2", "Value" : "a2" },
    { "Key" : "2", "Value" : "b2" },
] 
```

如何使用数组的`map`功能实现这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T21:39:16.007

我猜你误解了map()。这是一个非常简单的例子：

```
a = [1, 2, 3]
b = a.map(function (i) { return i + 1 })
// => [2, 3, 4] 
```

这是地图的 MDN 文档：[https](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map) ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map 。因此，您应该重新考虑在您的情况下使用 map 。顺便说一句-您的示例不起作用，因为值不是函数。

这是一个可能的解决方案：

```
res = [];
a = [['a1','b1'],['a1','b2']];

for (var i = 0; i < a.length; ++i) {
  for(var j = 0; j < a[i].length; ++j) {
    res.push({"Key": i + 1 , "Value" : a[i][j]});
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:21:44.553

我敢肯定还有其他方法，但这里有一些简单的 Javascript 可以满足您的需求：

[http://jsfiddle.net/KXBRw/](http://jsfiddle.net/KXBRw/)

```
function Test(key, values) {
    this.Key = key;
    this.Values = values;//values.map(values);
}

function getCombinedTests(testObjectArray) {
    var all = [];
    for (var i = 0; i < testObjectArray.length; i++) {
        var cur = testObjectArray[i];
        for (var j = 0; j < cur.Values.length; j++) {
            all.push({"Key": ""+cur.Key, "Value": cur.Values[j]});
        }
    }
    return all;
}

var testObjectArray1 = [];
testObjectArray1.push(new Test(1, ['a1','b1']), new Test(2, ['a1','b2']));

var combined = getCombinedTests(testObjectArray1);

console.log(combined); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:20:06.607

您可以使用`.reduce()`,`.concat()`并`.map()`为此。

```
var result = testObjectArray.reduce(function(res, obj) {
    return res.concat(obj.Values.map(function(val) {
        return {"Key":obj.Key, "Value":val};
    }));
}, []); 
```

* * *

不知道`values.map(values);`应该做什么。

***演示：http:*** [//jsfiddle.net/BWNGr/](http://jsfiddle.net/BWNGr/)

```
[
    {
        "Key": 1,
        "Value": "a1"
    },
    {
        "Key": 1,
        "Value": "b1"
    },
    {
        "Key": 2,
        "Value": "a1"
    },
    {
        "Key": 2,
        "Value": "b2"
    }
] 
```

* * *

如果您对不创建不必要的数组非常严格，您可以稍微调整一下并使用`.push()`而不是`.concat()`.

```
var result = testObjectArray.reduce(function(res, obj) {
    res.push.apply(res, obj.Values.map(function(val) {
        return {"Key":obj.Key, "Value":val};
    }));
    return res;
}, []); 
```

***演示：http:*** [//jsfiddle.net/BWNGr/1/](http://jsfiddle.net/BWNGr/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:25:51.923

您可以通过对每个键值对将被推送到数组的每个循环使用以下内容来实现此目的。

```
var mapped = [];
$.each(testObjectArray, function(key, value) { 
  for(x in value.Values) {
    mapped.push({
      Key: value.Key,
      Value: x
    });
  }
}); 
```

# angularjs - AngularJS - 选择单选按钮时触发

> ID：13077320
> 
> 赞同：121
> 
> 时间：2012-10-25T21:08:56.053
> 
> 标签：angularjs

我搜索并尝试了许多 ng-xxxx 类型的选项，但找不到一个。我只想在选择单选按钮时调用控制器中的某些功能。

所以它可能类似于以下..（当然，下面的代码不起作用）

```
<input type="radio" ng-model="value" value="one" ng-click="checkStuff()"/> 
```

有什么方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-10-25T21:38:13.703

在单选按钮选择上调用函数至少有 2 种不同的方法：

1）使用`ng-change`指令：

```
<input type="radio" ng-model="value" value="foo" ng-change='newValue(value)'> 
```

然后，在控制器中：

```
$scope.newValue = function(value) {
     console.log(value);
} 
```

这是 jsFiddle：http: [//jsfiddle.net/ZPcSe/5/](http://jsfiddle.net/ZPcSe/5/)

2）观察模型的变化。这不需要输入级别的任何特殊内容：

```
<input type="radio" ng-model="value" value="foo"> 
```

但在控制器中会有：

```
$scope.$watch('value', function(value) {
       console.log(value);
 }); 
```

还有 jsFiddle：http: [//jsfiddle.net/vDTRp/2/](http://jsfiddle.net/vDTRp/2/)

更多地了解您的用例将有助于提出适当的解决方案。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-25T21:28:40.553

如果触发源不是来自单击，则应使用 ngChange 而不是 ngClick。

下面是你想要的吗？在您的情况下到底有什么不起作用？

```
var myApp = angular.module('myApp', []);

function MyCtrl($scope) {
    $scope.value = "none" ;
    $scope.isChecked = false;
    $scope.checkStuff = function () {
        $scope.isChecked = !$scope.isChecked;
    }
}

<div ng-controller="MyCtrl">
    <input type="radio" ng-model="value" value="one" ng-change="checkStuff()" />
    <span> {{value}} isCheck:{{isChecked}} </span>
</div> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-01T02:12:22.107

In newer versions of angular (I'm using 1.3) you can basically set the model and the value and the double binding do all the work this example works like a charm:

```
angular.module('radioExample', []).controller('ExampleController', ['$scope', function($scope) {
  $scope.color = {
    name: 'blue'
  };
}]);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
<html>
<body ng-app="radioExample">
<form name="myForm" ng-controller="ExampleController">
  <input type="radio" ng-model="color.name" value="red">  Red <br/>
  <input type="radio" ng-model="color.name" value="green"> Green <br/>
  <input type="radio" ng-model="color.name" value="blue"> Blue <br/>
  <tt>color = {{color.name}}</tt><br/>
 </form>
  </body>
</html>
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-06-12T15:08:12.503

对于动态值！

```
<div class="col-md-4" ng-repeat="(k, v) in tiposAcesso">
    <label class="control-label">
        <input type="radio" name="tipoAcesso" ng-model="userLogin.tipoAcesso" value="{{k}}" ng-change="changeTipoAcesso(k)" />              
        <span ng-bind="v"></span>
    </label>
</div> 
```

在控制器中

```
$scope.changeTipoAcesso = function(value) {
    console.log(value);
}; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-05T19:09:37.160

另一种方法是使用在控制器范围内`Object.defineProperty`设置`value`为 getter setter 属性，然后对 value 属性的每次更改都会触发 setter 中指定的函数：

HTML 文件：

```
<input type="radio" ng-model="value" value="one"/>
<input type="radio" ng-model="value" value="two"/>
<input type="radio" ng-model="value" value="three"/> 
```

javascript文件：

```
var _value = null;
Object.defineProperty($scope, 'value', {
  get: function () {
    return _value;
  },         
  set: function (value) {
    _value = value;
    someFunction();
  }
}); 
```

看到这个[plunker](http://plnkr.co/edit/tf27iTBfyeJighNT8hMp?p=preview)的实施

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-24T03:50:45.440

我更喜欢将 ng-value 与 ng-if 一起使用，[ng-value] 将处理触发器更改

```
<input type="radio"  name="isStudent" ng-model="isStudent" ng-value="true" />

//to show and hide input by removing it from the DOM, that's make me secure from malicious data

<input type="text" ng-if="isStudent"  name="textForStudent" ng-model="job"> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-12-06T11:04:14.627

```
 <form name="myForm" ng-submit="submitForm()">
   <label data-ng-repeat="i in [1,2,3]"><input type="radio" name="test" ng-model="$parent.radioValue" value="{{i}}"/>{{i}}</label>
   <div>currently selected: {{radioValue}}</div>
   <button type="submit">Submit</button>
</form> 
```

# c++ - 使用自由函数声明 unordered_set 用于用户定义的哈希和比较

> ID：13077321
> 
> 赞同：2
> 
> 时间：2012-10-25T21:08:58.173
> 
> 标签：c++, c++11

此代码可与 g++ 4.4 和“-std=c++0x”一起正常编译。

```
#include <unordered_set>

namespace
{

size_t IntHash ( int i )
{
    return i;
}

bool IntComp ( int i, int j )
{
    return i == j;
}

}

int main ( int argc, char* argv[] )
{
    typedef std::pointer_to_unary_function<int, size_t> CustomHash;
    typedef std::pointer_to_binary_function<int, int, bool>
        CustomComp;

    typedef std::unordered_set<int, CustomHash, CustomComp> DeprecatedSet;

    DeprecatedSet deprecatedSet ( 10, std::ptr_fun ( IntHash ), std::ptr_fun ( IntComp ) );

    deprecatedSet.insert ( 5 );
    deprecatedSet.insert ( 10 );
} 
```

但是，说，我不想使用已弃用的 std::pointer_to_unary_function 和 std::ptr_fun，但仍然使用免费函数：

```
#include <unordered_set>
#include <functional>

namespace
{

size_t IntHash ( int i )
{
    return i;
}

bool IntComp ( int i, int j )
{
    return i == j;
}

}

int main ( int argc, char* argv[] )
{
    typedef std::unordered_set<int /*, UserDefinedHash?, UserDefinedComparison? */> NewSet;

    NewSet newSet (
        10,
        std::bind ( IntHash, std::placeholders::_1 ),
        std::bind ( IntComp, std::placeholders::_1, std::placeholders::_2 ) );

    newSet.insert ( 5 );
    newSet.insert ( 10 );
} 
```

这不会编译，我假设是因为我不确定要为**UserDefinedHash**和**UserDefinedComparison**输入什么。

看起来 std::bind 没有定义**绑定**对象本身类型的成员类型。

我知道还有其他方法可以定义自定义哈希函数和比较，只是好奇是否可以在不弃用标准库类型和函数的情况下使用免费/类函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T21:18:30.747

您可以使用：

```
std::unordered_set<int, size_t(*)(int), bool(*)(int, int)> my_set;
my_set s( 10, &IntHash, &IntComp ); 
```

为了使用`std::bind`，您可以使用`decltype`或`std::function`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:22:40.680

`std::function`是 等的替代品`std::pointer_to_unary_function`：

```
typedef std::unordered_set<int, 
                std::function<size_t(int)>,
                std::function<bool(int,int)>> NewSet; 
```

所有这些仿函数已被`std::function`. （尽管如评论等中所述，常规函数指针在这里更可取，因为`std::function`它旨在存储任何类型的可调用实体）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:25:30.310

绑定对象可以存储在`std::function`：

```
typedef std::unordered_set<int,
    std::function<size_t(int)>, std::function<bool(int, int)>> NewSet;

NewSet newSet (
    10,
    std::bind ( IntHash, std::placeholders::_1 ),
    std::bind ( IntComp, std::placeholders::_1, std::placeholders::_2 ) ); 
```

# memcached - 将“incr”与 spymemcached 客户端一起使用

> ID：13077324
> 
> 赞同：5
> 
> 时间：2012-10-25T21:09:09.017
> 
> 标签：memcached, counter, increment, spymemcached, hitcounter

我正在尝试使用 spymemcached-2.8.4 客户端在 memcached 中设置一个非常基本的命中率监视器，但是存储在 memcached 中的值实际上似乎从未增加......这是一个错误还是我错过了什么？

```
public static void checkHitRate(String clientId) throws FatalException, ForbiddenException {
    MemcachedClient memcachedClient;
    try {
        memcachedClient = new MemcachedClient(new InetSocketAddress("localhost", 11211));

        Integer hitRate = (Integer) memcachedClient.get(clientId);

        if (hitRate == null) {
            memcachedClient.set(clientId, 1800, 1);
        } else if (hitRate > 500) {
            throw new ForbiddenException("Hit rate too high. Try again later");
        } else if (hitRate <= 500) { 
            memcachedClient.incr(clientId, 1);
        } 

    } catch (IOException e) {
        throw new FatalException("Could not read hit rate from Memcached.");
    }
} 
```

我知道它在 memcached 中是可能的：

（TELENT 输出）

```
set clientId_1 0 200 1
1
STORED
incr clientId_1 1
2
get clientId_1
VALUE clientId_1 0 1
2
END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-31T10:33:24.760

对于 incr/decr memcached 服务器将存储的值视为整数的字符串表示，

添加一个项目，如

```
 memcachedClient.set(clientId, 1800, 1); 
```

将值添加为整数，这就是 memcached 无法增加它的原因。

利用

```
 memcachedClient.set(clientId, 1800, "1"); 
```

反而。它会根据您的需要工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:11:29.343

您可以使用另一个 incr 签名：

```
System.out.println("Incr result: " + memcachedClient.incr("testIncrKey", 1, 1)); 
```

这适用于 spymemcached-2.8.4 客户端。

[此外， incr spymemcached](https://stackoverflow.com/questions/5928964/spymemcached-get-and-incr-methods-give-wholly-different-results)似乎存在问题。

您不应该使用 Integer，因为它将被转换回 String 并作为 String 存储在 memcached 服务器上。

如果您使用[xmemcached](http://code.google.com/p/xmemcached/wiki/Getting_Started)打开，那么您可以使用特定的 Counter 构造，例如

```
Counter counter=client.getCounter("counter",0);
counter.incrementAndGet();
counter.decrementAndGet();
counter.addAndGet(-10); 
```

在 xmemcached[文档](http://code.google.com/p/xmemcached/wiki/Getting_Started#Use_Counter_to_incr/decr)中阅读更多内容：

# python - Python 语法问题

> ID：13077327
> 
> 赞同：1
> 
> 时间：2012-10-25T21:09:31.573
> 
> 标签：python

以下代码有什么问题，它不断给出错误“并非所有参数都在字符串格式化期间转换”：

```
mealPrice = raw_input ("How much did you pay for your meal?: ")

hst1 = 0.13
hst1 = int(hst1)
totalprice = (float(mealPrice) * hst1)

print "Cost of meal", mealPrice
print "Taxes", hst
print "-------------------------------"
print "Total", totalPrice 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:11:23.690

首先，您需要做的就是指定税率：

```
hst1 = 0.13 
```

看起来你正试图用那个数字制作一个字符串，然后把它变成一个整数。不要那样做；只需制作一个浮点值并使用它。

其次， raw_input 将返回一个字符串值。在使用它之前，您需要将其转换为数字：

```
mealPrice = float(mealPrice) 
```

在那之后，你的缩进看起来很遥远——也许这只是因为你粘贴代码的方式，但你所有的行都应该从同一列开始。

最后，最后一行是“end”——这不是 python 语法，不应该在那里。删除那个。

# c# - 具有一对多关系的实体框架对象的序列化

> ID：13077328
> 
> 赞同：34
> 
> 时间：2012-10-25T21:09:36.737
> 
> 标签：c#, entity-framework, .net-4.5

我正在尝试将 EF 与 Code First 和 Web API 一起使用。在我开始序列化多对多关系之前，我没有任何问题。当我尝试执行下面的以下 web api 方法时，我收到以下错误消息：

```
public class TagsController : ApiController
{

        private BlogDataContext db = new BlogDataContext();

        // GET api/Tags
        public IEnumerable<Tag> GetTags()
        {
            return db.Tags.AsEnumerable();
        }
} 
```

我收到以下错误：

> ：“System.Data.Entity.DynamicProxies.Tag_FF17EDDE6893000F7672649A39962DB0CA591C699DDB73E8C2A56203ED7C7B6D”数据合同名称“Tag_FF17EDDE6893000F7672649A39962DB0CA591C699DDB73E8C2A56203ED7C7B6D [http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies](http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies)预计不会”。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

我已经阅读了一些 SO 文章（[文章 1](https://stackoverflow.com/questions/11315311/using-navigation-properties-in-entity-framework-code-first)、[文章 2](https://stackoverflow.com/questions/9071118/efcf-many-to-many-in-a-detached-context)），修复方法是添加以下属性：

> [DataContract (IsReference=true)]

但这没有任何效果。也使用 [IgnoreDataMember] 没有效果。唯一可行的选项是将 Configuration.ProxyCreationEnabled 设置为 false。这是我唯一的选择吗？我错过了什么吗？

***示例 POCO 对象：***

**标签**

```
[DataContract(IsReference = true)]
public class Tag
{
        public Tag()
        {
            this.Blogs = new HashSet<Blog>();
        }

        [Key]
        [DataMember]
        public int Id { get; set; }

        [DataMember]
        public string Name { get; set; }

        [IgnoreDataMember]
        public virtual ICollection<Blog> Blogs { get; set; }
} 
```

**博客**

```
[DataContract(IsReference = true)]
public class Blog
{
    public Blog()
    {
        this.Tags = new HashSet<Tag>();
    }

    [Key]
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [IgnoreDataMember]
    public virtual ICollection<Tag> Tags { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-25T21:34:57.433

当你看到这样的对象时：

> System.Data.Entity.DynamicProxies.Tag_FF17EDDE6893000F7672649A39962DB0CA591C699DDB73E8C2A56203ED7C7B6D

它是通常被视为 POCO 对象的*代理*的运行时 EF 生成版本。

Entity Framework 已创建此对象，因为它会跟踪对象何时更改，因此当您调用`.SaveChanges()`它时可以优化要执行的操作。这样做的缺点是您实际上并没有使用您定义的特定对象，因此数据合同和框架（Json.net）不能像使用原始 POCO 对象那样使用它们。

要防止 EF 返回此对象，您有两种选择（ATM）：

首先，[尝试关闭 DbContext 上的代理对象创建](https://stackoverflow.com/a/9577852/209259)。

```
DbContext.Configuration.ProxyCreationEnabled = false; 
```

这将完全禁用为特定 DbContext 的每个查询创建代理对象。（这不会影响 ObjectContext 中的*缓存*对象）。

其次，将**EntityFramework 5.0+**与[AsNoTracking()](http://msdn.microsoft.com/en-us/library/gg679352(v=vs.103).aspx)一起使用 （ProxyCreationEnabled 在 EF 5.0 中仍然可用）

你也应该能够

```
DbContext.Persons.AsNoTracking().FirstOrDefault(); 
```

或者

```
DbContext.Persons.
  .Include(i => i.Parents)
  .AsNoTracking()
  .FirstOrDefault(); 
```

而不是*全局*禁用 DbContext 的代理创建，这只会在每次查询时关闭它。（这*确实*会影响 ObjectContext 中的*缓存*对象，它不会被缓存）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-16T13:50:40.297

我想让代理创建保持不变，并发现使用`ProxyDataContractResolver`似乎可以解决我的问题。有关如何在 wcf 中使用它的参考，请参阅[msdn](http://msdn.microsoft.com/en-us/library/vstudio/ee705457(v=vs.100).aspx)，这不完全是 WebAPI，但应该让您走上正确的道路。

# php - 用 PHP 打印 Excel 文件

> ID：13077331
> 
> 赞同：0
> 
> 时间：2012-10-25T21:09:42.603
> 
> 标签：php, excel, xls

因此，我运行了一个应用程序的多个实例，一个用于 2008、2009、2010.. 2012 年。所有这些都有一个功能，您可以下载一组数据的 .XLS 报告。由于某种原因，XLS 文件在通过应用程序下载时被破坏。您可以将 pdf 移动到 webroot，下载它，它会很好地打开，但是当您尝试通过 下载它时`download.php?file=29320f9je`，Excel 说它无法识别文件的格式，并吐出垃圾（应该是我们的数据，只是在 unicode 垃圾中）

除了应用程序和标头之外，任何人都遇到过这个问题并有其他建议要检查吗？因为 2010 和 2012 之间的代码应该没问题。

## 使用示例：

用户生成报告。可以通过以上方法正常查看。实际方法如下：

用户点击“下载文件”链接 ( `report.retrieve.download.htm?file=2390jsf`)

报告.retrieve.download.htm

```
$file = $_GET['file'];

$tempfile = new tempfile(''); // open tempfile class, argument is name of report

if ($tempfile->set_filename($file) === false)
        $tempfile->error_report('4026','',"Filename: $file",'Y');

if ($tempfile->send_file() === false)
        $tempfile->error_report('4027','',"Filename: $file",'Y'); 
```

关联功能

```
public function send_file() {
            $file = $this->get_full_filename();
            if (file_exists($file)===FALSE)
                    return FALSE;
            if ($this->send_headers($file)===FALSE)
                    return FALSE;
            $this->output_file($file);
            return TRUE;
    } 
```

并且所有重要的标题功能..

```
public function send_headers($filename) {
            if (headers_sent()===TRUE)
                    return FALSE;
            if (isset($_SERVER['HTTP_USER_AGENT']) && preg_match("/MSIE/", $_SERVER['HTTP_USER_AGENT'])) {
                    // IE Bug in download name workaround
                    ini_set( 'zlib.output_compression','Off' );
            }
            /*
            $fInfo = new finfo(FILEINFO_MIME);
            $type = $fInfo->file($filename);
            $stats = stat($filename);
            $size = $stats['size'];
            */
            $output_filename = $this->get_output_filename();

            if (eregi('csv$', $this->get_output_filename())) {
                    header("Content-type: text/csv");
                    //header("Content-Size: $size");
                    header("Pragma: public");
                    header("Content-Disposition: attachment; filename=$output_filename");
            }
            elseif (eregi('htm$', $this->get_output_filename()))
                    header("Content-type: text/html");
            else {
                    header("Content-type: application/vnd.ms-excel");
                    //header("Content-Size: $size");
                    header("Pragma: public");
                    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
                    header("Content-Disposition: attachment; filename=$output_filename");
            }
            return TRUE;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:15:07.560

一个不同的文件有一个尾随换行符；一个是包含的包含的包含的。我没有编写此应用程序，但确实选择使用关闭 PHP 标记 (?>) 的人最终遇到了这些愚蠢的错误之一。

```
zipp@zeratul htdocs]# echo '<?php foreach (glob("*.php") as $file){if (preg_match( "/\\?".">\\s\\s+\\Z/m", file_get_contents($file))) echo("$file\n");} ?>' | php
config.class.php 
```

# notepad++ - Notepad++ 用户定义语言十六进制数字

> ID：13077332
> 
> 赞同：4
> 
> 时间：2012-10-25T21:09:46.363
> 
> 标签：notepad++

我有 Notepad++ 的用户定义语言。数字有问题。我将数字设置为突出显示为 0xFF0000（亮红色）。这对于 5、844、108293 等数字非常有效。问题在于 0x50、0x83 等十六进制数字。对于十六进制数字，0 正确突出显示，然后 x50 将显示为默认颜色。

我知道这可以正确设置以突出显示整个 0x50，就像我切换到 C++ 一样，数字被正确突出显示。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T13:06:11.813

在 Notepad++ 6.2.2 中，您可以为十六进制数字定义样式，如下面的 UDF 对话框所示：

![在此处输入图像描述](../Images/3eef1d38696674fd765baa1e54031601.png)

但是，我发现对于 UDF 词法分析器中的许多选项都适用的一个警告是，除了行尾的数字之外，词法分析器需要在数字后面有一个空格才能确定它是一个数字。

例如，0xFF 和 0x00 将被视为数字，而 0x9F 不会：

```
white = 0xFF
black = 0x00
SetColor(i, x, r.Min.Y, 0x9F) 
```

# iphone - 如何将 NSArray 更改为 MKPolyline polylineWithCoordinates 兼容类型？

> ID：13077334
> 
> 赞同：5
> 
> 时间：2012-10-25T21:09:52.270
> 
> 标签：iphone, objective-c

我添加了一个 NSTimer 来记录来自位置管理器的位置，并将任何位置放入 NSMutableArray。

```
-(void)OnTimer:(NSTimer *)param{
     [self.locationRecoder addObject:self.manager.location];
} 
```

我向 UI 添加了一个按钮，当我单击该按钮时，它会调用此方法

```
-(IBAction)Click:(id)sender(){
   NSArray *coordinateArray = [self.locationRecorder valueForKeyPath:@"coordinate"];
   MKPolyline *lines = [MKPolyline ploylineWithCoordinates:(CLLocationCoordinate2D *)coordinateArray count:coordinateArray.count];
   [self.map addOverlay:lines];
} 
```

然后没有绘制任何东西。我在类型转换中做错了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T01:29:48.043

该`polylineWithCoordinates`方法需要一个简单的 C 类型结构数组`CLLocationCoordinate2D`。

在调用`valueForKeyPath`,之后是`coordinateArray`一个对象。 这与 C 结构数组不同。`NSArray``NSValue`

将其转换`NSArray`为`(CLLocationCoordinate2D *)`不会将其转换为 C 结构数组。

相反，您必须使用`malloc`并循环遍历数组手动创建 C`locationRecoder`数组：

```
CLLocationCoordinate2D *coordinateArray 
    = malloc(sizeof(CLLocationCoordinate2D) * locationRecorder.count);

int caIndex = 0;
for (CLLocation *loc in locationRecorder) {
    coordinateArray[caIndex] = loc.coordinate;
    caIndex++;
}

MKPolyline *lines = [MKPolyline polylineWithCoordinates:coordinateArray 
                        count:locationRecorder.count];

free(coordinateArray);

[self.map addOverlay:lines]; 
```

# ruby-on-rails - 我的 Rails 路径及其路由的奇怪问题

> ID：13077339
> 
> 赞同：2
> 
> 时间：2012-10-25T21:10:19.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3, path, routing

我的路由出现了一个奇怪的错误。我已经安装了 blogit gem，但我认为这不会导致这个问题。

```
undefined local variable or method `locations_path' 
```

这是我的路线文件：

```
AppName::Application.routes.draw do

devise_for :users

root :to => 'locations#index'

mount Blogit::Engine => "/blog", :as => "blog" 

resources :locations do
  collection do
  get 'location'
 end
end 
```

这是我的耙子路线：

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
        user_session POST   /users/sign_in(.:format)       devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
       user_password POST   /users/password(.:format)      devise/passwords#create
   new_user_password GET    /users/password/new(.:format)  devise/passwords#new
   edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                     PUT    /users/password(.:format)      devise/passwords#update
 cancel_user_registration GET    /users/cancel(.:format)            devise/registrations#cancel

    user_registration POST   /users(.:format)               devise/registrations#create
new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                     PUT    /users(.:format)               devise/registrations#update
                     DELETE /users(.:format)               devise/registrations#destroy

                root        /                              locations#index
                blog        /blog                          Blogit::Engine
  location_locations GET    /locations/location(.:format)  locations#location
           locations GET    /locations(.:format)           locations#index
                     POST   /locations(.:format)           locations#create
        new_location GET    /locations/new(.:format)       locations#new
       edit_location GET    /locations/:id/edit(.:format)  locations#edit
            location GET    /locations/:id(.:format)       locations#show
                     PUT    /locations/:id(.:format)       locations#update
                     DELETE /locations/:id(.:format)       locations#destroy

Routes for Blogit::Engine:
                     /posts/page/:page(.:format)            blogit/posts#index
   tagged_blog_posts        /posts/tagged/:tag(.:format)           blogit/posts#tagged
   post_comments POST   /posts/:post_id/comments(.:format)     blogit/comments#create
   post_comment DELETE /posts/:post_id/comments/:id(.:format) blogit/comments#destroy
   posts GET    /posts(.:format)                       blogit/posts#index
        POST   /posts(.:format)                       blogit/posts#create
   new_post GET    /posts/new(.:format)                   blogit/posts#new
   edit_post GET    /posts/:id/edit(.:format)              blogit/posts#edit
   post GET    /posts/:id(.:format)                   blogit/posts#show
         PUT    /posts/:id(.:format)                   blogit/posts#update
              DELETE /posts/:id(.:format)                   blogit/posts#destroy
   root        /                                      blogit/posts#index 
```

关于为什么会发生这种情况的任何建议都会很棒。

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:39:57.303

这是我的 blogit 配置的问题。

人们可以在这里找到完整的线程：

[https://github.com/KatanaCode/blogit/issues/8](https://github.com/KatanaCode/blogit/issues/8)

感谢你的帮助！

詹姆士

# jquery - Jquery TypeError：obj在一项传递给车把时为空

> ID：13077343
> 
> 赞同：3
> 
> 时间：2012-10-25T21:10:31.133
> 
> 标签：jquery, handlebars.js

单击时，我的一个锚点出现问题，它会抛出`TypeError: obj is null`一个项目。所有其他都完美地工作，正在传递的对象没有差异。在 4 个相同项目的列表中，只有一个错误。全部`console.logs`显示没有未设置的数据。我已经到了完全被调试困住的地方。

```
 $('.admin-user-list-click').live('click', function(evt) {
        evt.preventDefault();
        var user_id = $(this).attr('user_id');
        var screen_id = $(this).attr('screen_id');
        var href = $(this).attr('href');
        var last_updated = $(this).attr('updated');
        var last_login = $(this).attr('last_login');
        var user_data = [];
        var template_structure = {logged_in: 'last_login', last_updated: 'last_updated', user_data: user_data, screen_id: screen_id, screen_data: [], identifier: 'screen'};
        var displayContainer = $(this).closest('.admin-page').find('.admin-display');
        $.ajax({
            url: href + '/index/'+user_id,
            success: function(data){
                //Basic user information
                var result = $.parseJSON(data);
                $.each(result, function(k, v) {
                    user_data.push({identifier: k, data: v});
                });
                $.ajax({
                    url: href + '/get_user_data/'+user_id,
                    success: function(data){
                        //Question and answers from registeration
                        var decode = $.parseJSON(data);
                        template_structure.screen_data = decode;
                        console.log(displayContainer)
                        console.log(pending_template)
                        console.log(template_structure)
                        console.log(pending_template(template_structure))
                        displayContainer.html(pending_template(template_structure));
                    }
                })

            }// closure of success
        })

}); //closure of click event 
```

* * *

console.log(displayContainer) 的输出`[div.admin-display]`

* * *

console.log(pending_template) 的输出`function()`

* * *

console.log(template_structure) 的输出`Object { logged_in= "2012-10-26 08:40:16", user_data=[14], screen_id= "0001", more...}`

* * *

console.log(pending_template(template_structure)) 的输出**什么也不显示**

有问题的*行在 jquery.1.8.2 中的 583 上*

```
// args is for internal usage only
each: function( obj, callback, args ) {
    var name,
        i = 0,
        length = obj.length, //this is the line that errors 
```

* * *

当`console.log(obj)`它显示 **出错时** ![Jquery 登录出错](../Images/5dc8c445ed40a0e35c694dee5bfe5f0c.png)

**当它工作时** ![Jquery登录工作](../Images/2af319cae880b9baf5fc3edfa6b31574.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:39:11.703

问题是由于我创建的车把助手

```
Handlebars.registerHelper('json_check', function(answer, answer_type) {
    if(answer_type == 'json' && answer !== ''){
        text = '';
        var response = $.parseJSON(answer);
        $.each(response, function(key, value) {
            text += "<p>"+key+"</p><p>"+value+"</p>";
        });
        return new Handlebars.SafeString(text);
    } else {
        return answer;
    }
}); 
```

问题是起初我没有检查答案是否为空字符串。所以试图 parseJson 一个空字符串会引发错误。

# ruby - 使用捆绑器验证最低版本要求

> ID：13077344
> 
> 赞同：2
> 
> 时间：2012-10-25T21:10:35.330
> 
> 标签：ruby, bundler

我维护一个gem，其依赖项存储在 a`Gemfile`中，例如：

```
gem 'foo', '~> 1.5'
gem 'bar', '~> 2.0.5' 
```

由于[悲观的版本限制](http://docs.rubygems.org/read/chapter/16#page74)， bundler将默认安装*最新* `1.x`版本的`foo``foo =1.6.2`

问题：有没有一种简单的方法可以让 bundler 安装我的依赖项的所有*最低*版本（在这种情况下，`foo =1.5.0`和`bar =2.0.5`），以便我可以测试，在我编写一些新功能之后，我的 gem 是否仍然可以与其他使用那些较低版本的环境？

或者，是我手动重新安装所有最低版本然后运行测试的唯一方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:46:57.330

因为我们决定使用 Rubygems 的 Requirement 类，所以无法指定最低版本。我隐约记得有一个自动化测试工具可以帮助您迭代要测试的依赖版本，但是自动化非常困难，因为可能的版本组合数量呈指数级增长。我建议使用您要测试的最旧版本创建第二个 Gemfile，并使用 BUNDLE_GEMFILE 在额外的 CI 构建中针对该 Gemfile 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:26:35.157

我在 IRC 中看到了您的问题...据我了解，如果不更改您的 Gemfile，就无法做到这一点。对不起。:(

[https://github.com/carlhuda/bundler/blob/master/lib/bundler/cli.rb](https://github.com/carlhuda/bundler/blob/master/lib/bundler/cli.rb)供参考

# sql - 如何衡量数据库索引的成本？

> ID：13077345
> 
> 赞同：9
> 
> 时间：2012-10-25T21:10:40.273
> 
> 标签：sql, database, postgresql, indexing

是否有一个好的方法来判断在 Postgres 中创建数据库索引的成本（较慢`INSERTS`，构建索引的时间，重新索引的时间）是否值得性能提升（更快`SELECTS`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T06:56:10.193

我实际上不同意Hexist。PostgreSQL 的规划器非常好，它支持基于物理顺序扫描对表文件的良好顺序访问，因此索引不一定有帮助。此外，在许多情况下，规划者必须选择一个索引。此外，您已经在为唯一约束和主键创建主键。

我认为 PostgreSQL 的一个很好的默认位置（MySQL btw 完全不同！）是等到你需要一个索引来添加一个，然后只添加你最需要的索引。然而，这只是一个起点，它假设要么缺乏查看查询计划的经验，要么缺乏对应用程序可能去向的了解。在这些领域拥有经验很重要。

通常，如果您的表可能跨越 10 页以上（即 40kb 的数据和标题），则使用外键是一个好主意。这些可以被认为是明确需要的。跨越 1 页的小型查找表不应该*有*非唯一索引，因为这些索引永远不会用于选择（没有查询计划胜过单页的顺序扫描）。

除此之外，您还需要查看数据分布。索引布尔列通常是一个坏主意，并且有更好的方法来索引与布尔搜索相关的事物（部分索引就是一个很好的例子）。类似地，索引常用函数输出有时似乎是个好主意，但情况并非总是如此。考虑：

```
CREATE INDEX gj_transdate_year_idx ON general_journal (extract('YEAR' FROM transdate)); 
```

这不会有太大作用。但是，如果通过递归 CTE 与稀疏索引扫描配对，则 transdate 上的索引可能会很有用。

一旦基本索引到位，那么问题就变成了您需要添加哪些其他索引。这通常比最初设计的更好留给以后的用例审查。人们发现在 PostgreSQL 上减少索引可以显着提高性能的情况并不少见。

要考虑的另一件主要事情是您创建的索引类型，这些索引通常是特定于用例的。例如，如果序数对域很重要，并且如果您经常根据初始元素进行搜索，但如果序数不重要，我建议使用 GIN 索引，因为 btree 会做的很少（当然这是一个原子性危险信号，但有时这在 Pg 中是有意义的）。即使序数很重要，有时您仍然需要 GIN 索引，因为您需要能够进行交换扫描，就好像序数不重要一样。如果使用 ip4r 例如存储 cidr 块并使用 EXCLUDE 约束以确保没有块包含任何其他块，则这是正确的（实际扫描需要使用重叠运算符而不是包含运算符，因为您不这样做'

同样，这在某种程度上是特定于数据库的。例如，在 MySQL 上，Hexist 的建议是正确的。但是，在 PostgreSQL 上，观察问题是件好事。

就测量而言，最好的工具是`EXPLAIN ANALYZE`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T22:26:55.840

一般来说，除非您有一个日志或存档表，您不会在其中非常频繁地进行选择（或者如果它们需要一段时间运行也没关系），您应该索引您的 select/update/deelete 语句将在 where 中使用的任何内容条款。

然而，这并不总是像看起来那么简单，仅仅因为列在 where 子句中使用并被索引，并不意味着 sql 引擎将能够使用索引。使用 postgresql 的`EXPLAIN`和`EXPLAIN ANALYZE`功能，您可以检查在选择中使用了哪些索引，并帮助您确定列上的索引是否会对您有所帮助。

这通常是正确的，因为如果没有索引，您的选择速度会从一些 O(log n) 查找操作下降到 O(n)，而您的插入速度只会从 cO(log n) 提高到 dO(log n)，其中 d 是通常小于 c，也就是说，您可以通过没有索引来稍微加快插入速度，但是如果没有索引，您将降低选择速度，因此在数据上建立索引几乎总是值得的如果你要选择反对它。

现在，如果你有一些小表，你做了很多插入和更新，并且经常删除所有条目，并且只定期进行一些选择，那么没有任何索引可能会更快。但是那会是一个相当特殊的情况，因此您必须进行一些基准测试并确定它在您的特定情况下是否有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T07:41:33.490

Nice question. I'd like to add a bit more what @hexist had already mentioned and to the info provided by @ypercube's link.

By design, database don't know in which part of the table it will find data that satisfies provided [predicates](http://en.wikipedia.org/wiki/Where_%28SQL%29). Therefore, DB will perform a full or sequential scan of all table's data, filtering needed rows.

Index is a special data structure, that for a given `key` can precisely specify in which rows of the table *such* values will be found. The main difference when index is involved:

1.  there is a cost for the index scan itself, i.e. DB has to find a value in the index first;
2.  there's an extra cost of reading specific data from the table itself.

Working with index will lead to a random IO pattern, compared to a sequential one used in the full scan. You can google for the comparison figures of random and sequential disk access, but it might differ up to an order of magnitude (random being slower of course).

Still, it's clear that in some cases Index access will be cheaper and in others Full scan should be preferred. This depends on how many rows (out of all) will be returned by the specified predicate, or it's selectivity:

1.  if predicate will return a relatively small number of rows, say, less then 10% of total, then it seems valuable to pick those directly via Index. This is a typical case for Primary/Unique keys or queries like: `I need address information for customer with internal number = XXX`;
2.  if predicate has no big impact on the selectivity, i.e. if 30% (or more) rows are returned, then it's cheaper to do a Full scan, 'cos sequential disk access will beat random and data will be delivered faster. All reports, covering big areas (like a month, or all customers) fall here;
3.  if there's a need to obtain an ordered list of values and there's an index, then doing Index scan is the fastest option. This is a special case of #2, when you need report data ordered by some column;
4.  if number of *distinct* values in the column is relatively small compared to a total number of values, then Index will be a good choice. This is a case called [Loose Index Scan](http://wiki.postgresql.org/wiki/Loose_indexscan), and typical queries will be like: `I need 20 most recent purchases for each of the top 5 categories by number of goods`.

How DB decides what to do, Index or Full scan? This is a runtime decision and it is based on the statistics, so make sure to keep those up to date. In fact, numbers provided above have no real life value, you have to evaluate each query independently.

All this is a very rough description of what happens. I would very much recommended to look into [How PostgreSQL Planner Uses Statistics](http://www.postgresql.org/docs/current/interactive/row-estimation-examples.html), this best what I've seen on the subject.

# maven - nexus maven 域后缀不正确

> ID：13077351
> 
> 赞同：1
> 
> 时间：2012-10-25T21:11:00.467
> 
> 标签：maven, nexus

**建筑学：**

公司关系设置在 box1:8081
Hudson 设置在 box1:8090

上述两个系统都有代理并且可以成功访问公共互联网（通过 Nexus 的远程浏览能力确认，并且 Hudson 能够按预期构建一个 maven 项目，填充 hudson 正在使用的新 .m2/repository）

但是 - 当我编辑 settings.xml 以使用 nexus 镜像时（根据行上的多个指令，即：[here](http://www.andrejkoelewijn.com/wp/2010/03/09/getting-started-with-nexus-maven-repository-manager/)），将我的存储库重命名为 repository_old （这样我可以在有问题时跟踪获取的新依赖项），然后运行简单的 Maven 目标，如 clean 或 install，我遇到了一个奇怪的情况。

命令终端会输出

```
Downloading: http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom
4 KB   
[WARNING] Checksum validation failed, expected <!DOCTYPE but is f91612c35130352fb87d878ad11e365864726080 for http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom
4 KB
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 45ab043cf424aacf8b314b01bdae110516db8d1f for http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom
Downloaded: http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom (4 KB at 1.0 KB/sec)
[WARNING] The POM for org.apache.maven.plugins:maven-dependency-plugin:jar:2.1 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
Downloading: http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.jar
4 KB   
[WARNING] Checksum validation failed, expected <!DOCTYPE but is ac40ff8e0340bd60e08433c1440a699049d77126 for http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.jar
4 KB   
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 11b860e6a486fb2e5c1ffcc56d9240139dcfb2f0 for http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.jar
Downloaded: http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.jar (4 KB at 13.3 KB/sec) 
```

而且，在这个例子中 - 网址

```
http://box1:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom 
```

是准确的，并且可以从我的本地工作站和 box1 环境中解决。

然而。当我挖掘 org/apache/maven/plugins/maven-dependency-plugin/2.1/ 的新存储库文件夹（和子文件夹）并打开 maven-dependency-plugin-2.1.pom 我看到网络错误

```
The page http://www.box1.com/nexus/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom Cannot be found 
```

**注意以下问题：**
www 前缀
.com 后缀
no nexus 端口

知道什么是错误配置吗？感觉就像 nexus 服务器试图按摩传入的请求 URL 并假设（错误地）域后缀和端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:06:43.980

在与镇上的一些 devop 类型的朋友讨论后，我能够通过在我的 maven settings.xml 中添加完全限定的域名来解决这个问题

我将其编辑为

```
<mirror>
   <id>nexus</id>
   <mirrorOf>*</mirrorOf>
   <url>http://box1.companyName.corp:8081/nexus/content/groups/public</url>
</mirror> 
```

而不是

```
<mirror>
   <id>nexus</id>
   <mirrorOf>*</mirrorOf>
   <url>http://box1:8081/nexus/content/groups/public</url>
 </mirror> 
```

我的问题得到了解决。

# c++ - 生成唯一的多个随机数

> ID：13077356
> 
> 赞同：0
> 
> 时间：2012-10-25T21:11:11.850
> 
> 标签：c++, arrays, qt, random

我想生成唯一的随机数并根据这些随机数添加项目。这是我的代码：

问题是当我使用代码验证数组中是否存在生成的数字时`results.contains(randomNb)`：

```
 int nbRandom = ui->randoomNumberSpinBox->value();
   //nbRandom is the number of the random numbers we want
   int i = 1;
   int results[1000];
   while ( i < nbRandom ){
       int randomNb = qrand() % ((nbPepoles + 1) - 1) + 1;
       if(!results.contains(randomNb)){
           //if randomNb generated is not in the array...
           ui->resultsListWidget->addItem(pepoles[randomNb]);
           results[i] = randomNb;
           //We add the new randomNb in the array
           i++;
       }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:28:08.187

`results`是一个数组。那是一个内置的 C++ 类型。它不是类类型，也没有方法。所以这是行不通的：

```
results.contains(randomNb) 
```

您可能想改用 QList。像：

```
QList<int> results; 
```

向其中添加元素：

```
results << randomNb; 
```

此外，您的代码中有一个错误。您从 1 ( `i = 1`) 而不是 0 开始计数。这将导致丢失最后一个数字。您应该将`i`初始化更改为：

```
int i = 0; 
```

通过这些更改，您的代码将变为：

```
int nbRandom = ui->randoomNumberSpinBox->value();
//nbRandom is the number of the random numbers we want
int i = 0;
QList<int> results;
while ( i < nbRandom ){
    int randomNb = qrand() % ((nbPepoles + 1) - 1) + 1;
    if(!results.contains(randomNb)){
        //if randomNb generated is not in the array...
        ui->resultsListWidget->addItem(pepoles[randomNb]);
        results << randomNb;
        //We add the new randomNb in the array
        i++;
    }
} 
```

# d3.js - 为什么我的更新函数会创建一个全新的力导向图？

> ID：13077357
> 
> 赞同：2
> 
> 时间：2012-10-25T21:11:18.733
> 
> 标签：d3.js, force-layout, directed-graph

我正在查看[另一个问题](https://stackoverflow.com/questions/9539294/adding-new-nodes-to-force-directed-layout)以及该问题中提供的[这个示例](http://bl.ocks.org/1095795)，但我无法完全让自己的更新功能正常工作：

```
update = function() {
    path = svg.append("svg:g").selectAll("path")
        .data(force.links());
    path.enter().append("svg:path")
        .attr("class", "link")
        .attr("fill", "none")
        .attr("stroke", "#666")
        .attr("stroke-width",
              function(d) {
                  return (Math.floor(Math.log(d.value - min_val) / Math.log(2)) + 1) + "px"
              })
        .attr("marker-end", "url(#generic_arrow_marker)")
        .on("mouseover",
            function(d, i) {
                if(d3.select(this).attr("stroke") != "#666") {
                    mousedOut = false;
                }
            })
        .on("mouseout",
            function(d, i) {
                if(d3.select(this).attr("stroke") != "#666") {
                    mousedOut = true;
                    restoreGraph();
                }
            });
    path.exit().remove();
    circle = svg.append("svg:g").selectAll("circle")
        .data(force.nodes());
    circle.enter().append("svg:circle")
        .attr("r",
              function(d) {
                  return (20 + Math.floor(Math.log(d.pagerank) / Math.log(2)) * 2) + "px"
              })
        .attr("fill", "#ccc")
        .attr("stroke", "#333")
        .attr("stroke-width", "1.5px")
        .on("mouseover", // select relevant data nodes on click
            function(d, i) {
                mousedOut = false;
                d3.select(this).attr("class", "selected");
                transitions(d);
                $("span#user").text(d.name)
                $("span#pagerank").text(d.pagerank)
            })
        .on("click",
            function(d, i) {
                incoming = !incoming;
                transitions(d);
            })
        .on("mouseout",
            function(d, i) {
                mousedOut = true;
                d3.select(this).attr("class", "");
                restoreGraph();
            })
        .call(force.drag);
    circle.exit().remove();
    text = svg.append("svg:g").selectAll("g")
        .data(force.nodes());
    textEnter = text.enter().append("svg:g");
    textEnter.append("svg:text")
        .attr("x", 8)
        .attr("y", ".31em")
        .attr("class", "shadow")
        .text(function(d) { return d.name; })
    textEnter.append("svg:text")
        .attr("x", 8)
        .attr("y", ".31em")
        .text(function(d) { return d.name; })
    text.exit().remove();
    force.start();
} 
```

每当我调用`update()`时，它都会创建现有 D3 图的全新副本，即使我没有更改任何内容。

关于我可能做错了什么的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:14:32.633

我一发问题就想通了...

这是因为我有`svg.append("svg:g")`for `path`,`circle`和`text`.

我想我会留下这个问题，以防它帮助其他人......

# jquery - jQuery 仅将样式应用于第一个元素

> ID：13077361
> 
> 赞同：2
> 
> 时间：2012-10-25T21:11:32.773
> 
> 标签：jquery, each

在下面的代码中，我试图让最后一个 if 语句只减去`margin-top`FIRST 中的`div.wigDiv` `parent`。一切正常，除了将负边距应用于所有`div.wigDiv`父母。有任何想法吗？

```
$('.wigCont').each(function() {

   //some other code here

   if ($('div.wigDiv', this).hasClass('noMargin')) {
      if (wigCount == 1) {
         var width = $('div.wigDiv', this).width();
         $('div.wigDiv', this).css({'margin-left':'-18px', 'width': width+36});

         if ($('div.wigDiv', this).parent().first()) {
            $('div.wigDiv', this).parent().css('margin-top','-20px');
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:14:22.500

试试这个代码：

```
$('.wigCont').each(function() {

   //some other code here

   if ($('div.wigDiv', this).hasClass('noMargin')) {
      if (wigCount == 1) {
         var width = $('div.wigDiv', this).width();
         $('div.wigDiv', this).css({'margin-left':'-18px', 'width': width+36});

         if ($('div.wigDiv', this).parent().is(':first-child')) {
            $('div.wigDiv', this).parent().css('margin-top','-20px');
         }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:14:33.490

你只需要`.first`在那种`if`情况下使用。此外，您不需要 if 条件，因为它仅在找到匹配元素时才适用。

```
$('div.wigDiv', this).parent().first().css('margin-top','-20px'); 
```

**完整代码：**

```
$('.wigCont').each(function() {

   if ($('div.wigDiv', this).hasClass('noMargin')) {
      if (wigCount == 1) {
         var width = $('div.wigDiv', this).width();
         $('div.wigDiv', this).css({'margin-left':'-18px', 'width': width+36});

         //below is the modified code
         $('div.wigDiv', this).parent().first().css('margin-top','-20px');
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:15:07.063

你正在做的

```
$('div.wigDiv', this).parent().css('margin-top','-20px'); 
```

需要做的`parent().first().css`:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:15:08.417

回答前的快速说明：您的最后一个 if 语句将始终为真，因为`$('div.wigDiv', this).parent().first()`返回一个对象。

要仅过滤到第一个选定元素，请使用`.first()`

```
$('div.wigDiv', this).parent().first().css('margin-top','-20px'); 
```

# facebook - Facebook Canvas 应用程序：强制 SSL

> ID：13077363
> 
> 赞同：0
> 
> 时间：2012-10-25T21:11:41.417
> 
> 标签：facebook, ssl, canvas

在网上搜索了一段时间后，我仍然无法找到解决问题的正确方法；如何确保浏览器被重定向到 https 应用程序 url。由于画布应用程序是 iframe，我们无权将 window.top.location 更改为 https 等效项。

如果访客来到

[http://apps.facebook.com/app_name/](http://apps.facebook.com/app_name/)

我希望他重定向到

[https://apps.facebook.com/app_name/](https://apps.facebook.com/app_name/)

完全无法在画布中加载的应用程序中使用 javascript 修复它，因为 top.location 由于跨域起源规则而无法篡改。它可以通过 Facebook 实施的重定向规则轻松修复，我很惊讶它不是 Facebook 应用程序设置中用于强制 SSL 的复选框。我们不希望我们的游戏可以通过 http 访问。

我已经测试将 Canvas URL 和 Secure Canvas URL 都设置为指向 https url，但这会产生此错误（跨域问题）：不安全的 JavaScript 尝试使用 URL [http://apps.facebook.com/app_name访问框架/](http://apps.facebook.com/app_name/)来自带有 URL [https://s-static.ak.facebook.com/的框架](https://s-static.ak.facebook.com/)

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:27:41.760

好的，所以*可以*重定向顶部窗口。我第一次测试时一定有错字。这个小脚本可以解决问题：

```
<script>
if ( window.location.protocol == 'http:' ) {
    window.top.location = 'https://apps.facebook.com/app_name/';
}
</script> 
```

但是，我仍然不明白为什么这不是 Facebook 应用设置中的选项。使用服务器端重定向规则会更加高效和用户友好。

# html - 网站高度问题

> ID：13077368
> 
> 赞同：0
> 
> 时间：2012-10-25T21:12:04.960
> 
> 标签：html, css

我正在创建一个已创建结构的站点，但我正面临着高度问题。这是我所期待的

![期待](../Images/7082335928e4f17d488831479e72406f.png)

但这就是我得到的

![最终的](../Images/ce0bcf4d4d9815613a37b504a4377657.png) 下面是CSS：

```
html {height:100%!important;}
body {
    margin:0;
    font:12px/15px "Lucida Sans Unicode", "Lucida Grande", sans-serif;
    color:#8a8a8a;
    min-width:1000px;
    background:#fff;
    min-height:100%!important;
}

#wrapper {
    position:relative;
    min-height:100%;
    overflow:hidden;
    background:url(../images/wrapper.jpeg) repeat-y;
}
#content {
    float:left;
    width:100%;
    min-height:100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:14:48.000

100% 只是设置为其中内容的 100%，请尝试使用像素高度

```
#content {
    float:left;
    width:100%;
    min-height:500px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T03:47:56.703

我会`min-height`在你的包装上放一个像素。由于 #content 设置为 100% 高度，它将填充所有包装。

这样，如果内容少于填充浏览器的整个高度所需的内容，页面将在您的内容下方添加空白以填充浏览器高度。我在第一次构建新页面时经常这样做，因为我没有任何内容，但想了解填充浏览器窗口时它的外观。

我建议做这样的事情：

```
#wrapper {
    position: relative;
    min-height: 600px;
    overflow: hidden;
    background: url(../images/wrapper.jpeg) repeat-y;
} 
```

您可能需要调整`min-height`像素以适合您的站点 - 使其填充浏览器窗口所需的一切。

# c - 在定义的以太网接口上发送数据包

> ID：13077370
> 
> 赞同：3
> 
> 时间：2012-10-25T21:12:09.547
> 
> 标签：c, sockets, packets

我在我的 Linux 机器中配置了 2 个以太网接口。让我们说接口A和接口B。

我正在编写一个 tcp 客户端套接字程序，需要在定义的接口上发送数据包。

例如。

./client -intf 接口 A/B

如果输入是接口 A，那么客户端只能通过接口 A 发送数据包，反之亦然。

任何人都可以提供一些关于如何实现这一点的提示吗？

提前致谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T21:24:20.600

您可以`bind()`在调用之前使用`connect()`将您的客户端套接字绑定到特定的 IP 地址。您可以使用`getifaddrs()`列出接口及其关联的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:15:08.137

以前必须做类似的事情，你试过吗？ [https://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/](https://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/)

# .net - 如果用户没有安装所需的 .NET 版本，是否可以显示干净的错误？

> ID：13077372
> 
> 赞同：4
> 
> 时间：2012-10-25T21:12:18.840
> 
> 标签：.net, vb.net, visual-studio, error-handling

我已经完成并且找不到任何答案，但是如果用户没有安装所需的 .NET 版本而不是标准的纯异常窗口，是否可以显示一个干净的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:21:50.653

不，不是——您的应用程序没有机会运行，因为没有可用于运行它的 .Net 框架，因此除了正常的 Windows 错误对话框外，没有其他方法可以显示任何内容。

一种解决方法是在 .Net 2.0 中创建一个引导程序（启动可执行文件）——这是在 Windows XP 的服务包中提供的，并且自此包含在每个操作系统中。然后，这个引导程序可以检查所需的 .Net 框架安装，如果它不存在，则显示一个很好的错误消息 - 你甚至可以为用户安装它（我们有一个完全以这种方式运行的自定义安装程序，我们提供.Net 框架可再发行组件作为软件包的一部分，因此我们可以安装它们并在用户愿意时启动所需的重启）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T03:45:55.713

有用的解决方法：创建一个检查 .NET 运行时的安装程序应用程序。然后，如果未找到，请为最终用户下载并安装 .NET Framework。

可以使用 Inno Setup 创建可能的解决方案。请参阅：以 Inno Setup为起点[下载和安装 .NET 4.0 。](http://www.stintercorp.com/articles/developer/innosetup_dotnetinstaller.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:18:43.557

您始终可以检查是否安装了 .NET。这是描述如何做到这一点的文章。 [http://www.codeproject.com/Articles/18574/Is-NET-Framework-installed-on-this-machine](http://www.codeproject.com/Articles/18574/Is-NET-Framework-installed-on-this-machine)

当然，您需要在非托管代码中执行此操作。

# apache - 通配符 sub.domain.tld 重定向到 domain.tld/sub

> ID：13077375
> 
> 赞同：2
> 
> 时间：2012-10-25T21:12:39.697
> 
> 标签：apache, apache2, subdomain, wildcard-subdomain

我目前在 apache 上有一个通配符子域：

```
<VirtualHost xxx.xxx.xxx.xxx:80>
    DocumentRoot /home/web/domaine.tld/www
    ServerName domaine.tld
    ServerAlias *.domaine.tld
    VirtualDocumentRoot /home/web/domaine.tld/%1
    CustomLog /var/log/apache2/domaine.tld/access.log combined
    ErrorLog /var/log/apache2/domaine.tld/error.log
</VirtualHost> 
```

并且需要将任何子域（如 sub.domain.tld）重定向到 domain.tld

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:07:00.787

您可以通过 .htaccess 使用重定向

```
Redirect http://sub.domain.tld http://domain.tld 
```

# sql - 如何进行自我加入

> ID：13077377
> 
> 赞同：3
> 
> 时间：2012-10-25T21:12:48.767
> 
> 标签：sql, nested

我有下表包含 3 列，这只是一个示例（不是真实的）

```
Number Decription Value
1 Green 100
1 Yellow 101
1 Blue 102
2 Chair 200
2 Table 101
2 Green 150
3 Car 200
3 plane 205
3 green 105 
```

我的第一个查询是查找包含值“101”的任何记录或行在这种情况下没问题我找到 2 条记录 [1, Yellow,101] 和 [2, table, 101] 以及编号为 3 的所有记录，其余记录被忽略只是完美的。现在我需要根据 FIRST 查询的 RESULT 选择其他记录，数字 1 和 2 是真实结果。因此，在这种情况下，我从列 [number] 中找到了 [1 和 2]，我想搜索并添加任何 description = [green] 的值。仍然忽略具有 NO [101] 值的 [3]。

我想要显示的理想结果是

```
[1, yellow, 101] and Green is 100
[2, table, 101] and Green is 150 
```

到目前为止，我很难让它工作，没有好的结果。如果有人知道如何为这种情况制作脚本，请告诉我。我希望问题很清楚。

PS表格的内容是假的，只是为了得到一个印象，它是SQL + PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:18:10.517

尝试这个：

```
select 
  concat('[', concat_ws(', ', s1.number, s1.description, s1.value), '] and ', s2.description, ' is ', s2.value)
from 
  sample s1
inner join 
  sample s2 on s2.number = s1.number
where 
  s1.value = 101 and 
  s2.description = 'Green' 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/58f0a/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:22:12.197

我已经看到了很多，但它显示了 blanco 领域:(.. 但是今天早上我在喝了这么多咖啡后做了很多测试，我认为我想做的事情没有意义。因为如果我找到记录 [1 , yellow, 101] 基于条件值“101”，那么不可能按照我的意愿添加内容字段 [Green]，因为 number[1] 匹配 [101] 和 [Green]。我尝试了“OR”但它也发现记录 [3 green, 105] 不好，因为 3 没有 [101] 数据。我知道这是一个疯狂的谜题。所以现在我想添加另一个表，该表将具有唯一编号 1,2 和3 并且该数字应对应于表样本的第一列，只有样本具有 1 的 2 和 3 等的重复项。如果我这样做，可能会有一个可行的条件，我可以在一行或列表中显示数据，如下所示==> 1，黄色，101，绿色，100。我不想放弃:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:27:04.460

尝试这个。我认为这就是你想要做的。

编辑。您是否只想获得“绿色”？

```
SELECT * from table WHERE table.Number IN (
    SELECT Number FROM table WHERE table.Value = 101
) AND table.Description = "Green"; 
```

# python - 地理编码非地址：Geopy

> ID：13077380
> 
> 赞同：2
> 
> 时间：2012-10-25T21:13:04.973
> 
> 标签：python, google-maps, geopy

使用 geopy 对新西兰的酒类商店进行地理编码。

我遇到的问题是有些地方没有街道地址，而是谷歌地图中的地方。例如，插入：

```
Furneaux Lodge, Endeavour Inlet, Queen Charlotte Sound, Marlborough 7250 
```

通过浏览器 GUI 进入谷歌地图给了我

![](../Images/c4b997391aceee9c3ab70d7b4f9ca067.png) 但是，在 Geopy 中使用它我得到一个 GQueryError 说这个地理位置不存在。

这是地理编码的代码：

```
def GeoCode(address):
    g=geocoders.Google(domain="maps.google.co.nz") 
    geoloc = g.geocode(address, exactly_one=False)
    place, (lat, lng) = geoloc[0]
    GeoOut = []
    GeoOut.extend([place, lat, lng])
    return GeoOut

GeoCode("Furneaux Lodge, Endeavour Inlet, Queen Charlotte Sound, Marlboroguh 7250") 
```

同时，我注意到“埃菲尔铁塔”运行良好。有没有办法解决这个问题，有人可以解释谷歌“位置”内的埃菲尔铁塔和弗诺旅馆之间的区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:56:38.770

也许这是 Google Maps API 的限制。[但是GeoNames](http://www.geonames.org/)似乎知道`Furneaux Lodge`，因此如果 Google Maps 查询未返回答案，您可以将其用作 Google Maps 的后备：

```
>>> from geopy import geocoders
>>> gn = geocoders.GeoNames()  
>>> place, (lat, lng) = gn.geocode('Furneaux Lodge')
>>> print('{}: {:.5f}, {:.5f}'.format(place, lat, lng))
Furneaux Lodge, F4, NZ: -41.08826, 174.18019 
```

# php - IP 地址转换为与特定邮政编码的距离

> ID：13077384
> 
> 赞同：0
> 
> 时间：2012-10-25T21:13:44.817
> 
> 标签：php, javascript, mysql, geolocation

我想做的是能够获取用户的 IP 地址并辨别它距我的固定位置大约多少英里。我意识到通过使用服务或数据库，我可以找到城市和邮政编码，但我还想找出用户 ZIP 和我的 ZIP 之间的大致距离。

我已经看到了从用户 IP 获取 Zip/City/Country 的服务和数据库。我还使用了一些 PHP 类来获取从一个邮政编码到另一个邮政编码的距离。假设我可以使用一个数据库来获取 zip，另一个来比较两个 zip 之间的距离，但这似乎非常耗费资源（至少 2 个查询加上处理）。

如果用户在 100 英里左右（基于 IP），我只想显示博物馆展览的广告。如果不是，我不会展示它，因为看起来它们离得太远了。

有没有更简单的方法来实现这一点？

此外，我不希望浏览器询问用户是否可以通过使用新的 HTML5 内容在我的应用程序中使用他们的地理位置。我宁愿这一切都在没有基于位置的意识（和用户选择加入）的情况下发生在幕后，除非有压倒性的理由使用它。

我愿意接受任何解决方案，但希望在 PHP/MYSQL/jQuery/Javascript 领域找到一个。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:54:51.837

我公司使用的一项服务称为邮政编码服务。它位于[https://www.zipcodeservices.com](https://www.zipcodeservices.com)。它可以完成您在问题中突出显示的所有内容。

1.  您可以获得 2 个邮政编码之间的距离。

2.  您可以传入一个 IP 地址和一个整数作为半径，它将为您提供该 IP 地址半径中的所有邮政编码。

我们实际上使用邮政编码服务 IP 地址和邮政编码服务向我们的网站查看者显示地理定位广告。

很酷的是它都是基于服务的（Rest/JSON、XML 或 SOAP - 你可以选择），而且它也非常便宜——每月大约 15 美元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:20:48.653

您可以使用[http://www.geoiptool.com/](http://www.geoiptool.com/)之类的服务或其他类似服务（甚至是 Google API 之一）。

然后因为它提供纬度/经度坐标，只需使用以下函数将距离映射到您自己的距离。不过要小心 - IP 地址的一些纬度/经度坐标偏离目标，根本与手机/小区无关。IP 不能很好地漫游：

```
function distance($lat1, $lng1, $lat2, $lng2, $miles = true)
{
        $pi80 = M_PI / 180;
        $lat1 *= $pi80;
        $lng1 *= $pi80;
        $lat2 *= $pi80;
        $lng2 *= $pi80;

        $r = 6372.797; // mean radius of Earth in km
        $dlat = $lat2 - $lat1;
        $dlng = $lng2 - $lng1;
        $a = sin($dlat / 2) * sin($dlat / 2) + cos($lat1) * cos($lat2) * sin($dlng / 2) * sin($dlng / 2);
        $c = 2 * atan2(sqrt($a), sqrt(1 - $a));
        $km = $r * $c;

        return ($miles ? ($km * 0.621371192) : $km);
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:21:39.743

有两个问题要为您解决，（1）获取用户的纬度/经度和（2）计算距离。对于 (2)，您想使用半正弦公式：

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

```
a = sin²(Δφ/2) + cos(φ1).cos(φ2).sin²(Δλ/2)
c = 2.atan2(√a, √(1−a))
d = R.c
where   φ is latitude, λ is longitude, R is earth’s radius (mean radius = 6,371km)
note that angles need to be in radians to pass to trig functions! 
```

# objective-c - 目标C中的“this.x = x”等效？

> ID：13077388
> 
> 赞同：-1
> 
> 时间：2012-10-25T21:14:17.533
> 
> 标签：objective-c, cocoa, scope

这是Java中的示例构造函数：

```
public Board(int row, int column)
{
    this.row = row;
    this.column = column;
}

...

int row;
int column; 
```

这是我在 Objective CI 中的方法，我正在尝试做同样的事情：

```
- (void) setSquares: (int) row:(int) column
{
    self.row = row; // <-- Error
    self.column = column;// <-- Error
}

...

int row;
int column; 
```

如您所见，我收到 2 个错误，因为编译器认为我正在尝试访问 2 个属性，一个称为行，一个称为列。我知道这是您假设访问属性的方式，但是您假设如何“更改范围”以便我可以将局部变量设置为方法的参数？我如何在 Objective C 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:23:26.123

只需重命名方法参数：

```
- (void)setSquares:(int)newRow col:(int)newColumn
{
    row = newRow;
    column = newColumn;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:19:54.833

您在 Objective C 中的例程编写不正确。

它应该是：

```
-(void)setSquares:(int)row col:(int)column{
    self.row = row;
    self.column = column;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:22:22.230

该 Java 构造函数通常会这样翻译：

```
@interface Board : NSObject

@property (nonatomic, assign) int row;
@property (nonatomic, assign) int column;

@end

@implementation Board

- (id)initWithRow:(int)row andColumn:(int)column {
    if (self = [super init]) {
        self.row = row;
        self.column = column;
    }
    return self;
}

@end 
```

# http - 跨标签浏览器缓存，强制刷新

> ID：13077393
> 
> 赞同：1
> 
> 时间：2012-10-25T21:14:43.060
> 
> 标签：http, caching, http-headers, browser-cache

我有一个 JSON 资源，我们称之为 /game/1，它被长期公开缓存。基于一些客户端逻辑，我想偶尔刷新这个资源（例如，当我知道服务器端应该发生某些事情时——在我的例子中是游戏结束）。

刷新后，我希望所有下游缓存都使用新内容进行更新，因此对 /game/1 的任何请求都将获取刷新后的内容。在这种情况下，附加带有随机参数的查询字符串将不起作用。

我尝试**在 request 上**添加以下标头，这似乎在 IE 以外的浏览器中以一种气质的方式工作：

```
 headers['Cache-Control'] = 'max-age=0, no-cache';
    headers['Pragma'] = 'no-cache'; 
```

使用这些标头，Chrome 似乎*有时会*刷新内容，大概是基于一些内部启发式方法。

有没有人对我想要实现的目标有更好的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T11:48:00.583

尝试将 meta http-equiv="expires" 内容设置为零。

将“过期”元标记设置为零应强制浏览器在每次访问页面时重新加载所有内容。强制不断删除缓存显然会减慢页面加载速度（如果所有浏览器都遵守它！）但也许这是一个可以接受的权衡。然而，这对下游缓存没有帮助，因此它远非一个完整的解决方案。

# c - gcc警告易失性双数组

> ID：13077405
> 
> 赞同：0
> 
> 时间：2012-10-25T21:15:30.480
> 
> 标签：c, linux, gcc

嗨，我对以下用真正的 C 语言编写的代码片段有疑问

```
 volatile double samp[256]; 
```

当我尝试编译它时，gcc 给了我以下警告：

```
 array 'samp' assumed to have one element 
```

我的问题是 C++ 数组声明风格在真正的 C 中是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:54:38.433

“*假定有一个元素*”的语言来自[技术勘误 1](http://www.open-std.org/jtc1/sc22/wg14/www/docs/tc1.htm)到 ISO/IEC 9899:1990 (C90)：

> `int i[];`
> 如果在包含数组的翻译单元的末尾`i`仍然有不完整的类型，则假定该数组只有一个元素。此元素在程序启动时初始化为零。

这表明您已经声明了一个没有数组绑定的数组：

```
volatile double samp[]; 
```

你应该检查所有的定义`samp`。

# dns - 跨域重定向跟踪流量来源

> ID：13077406
> 
> 赞同：2
> 
> 时间：2012-10-25T21:15:53.990
> 
> 标签：dns, google-analytics, cross-domain, analytics, tracking

我有一个用于营销应用程序的域*AAAA.com 。*它重定向到另一个域上的页面：BBBB.com/buy-app.php，其中设置了 Google Analytics。

我如何在*BBBB.com/buy-app.php*上跟踪流量的来源？

* * *

例如：

用户点击 Facebook 上指向*AAAA.com*的链接，该链接重定向到*BBBB.com/buy-app.php——*我如何知道用户来自哪里？

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:27:33.627

您正在谈论“跟踪多个域”：[Google Analytics for Developers：跟踪多个域](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

对于同样的用例，我更喜欢在 Steroids 上使用 Google Analytics：[Google Analytics on Steroids：Cross Domain Tracking](https://github.com/CardinalPath/gas#cross-domain)

```
_gas.push(['_setAccount', 'UA-XXXXX-1']);
_gas.push(['_setAllowLinker', true]);
_gas.push(['_setDomainName', 'AAAA.com']);
_gas.push(['_setDomainName', 'BBBB.com']);
_gas.push(['_gasMultiDomain', 'mousedown']); 
```

**注意*`_setDomainName`：只支持多次调用`_gas`，默认不支持`_gaq`。

# html - 防止在浏览器中窃取 HTML5 视频？

> ID：13077408
> 
> 赞同：0
> 
> 时间：2012-10-25T21:15:57.140
> 
> 标签：html, video-streaming, html5-video

我正在寻找一种将视频安全地传送到移动设备的方法。有两种选择：

1.  **标记中的 HLS**。这对 iOS 非常有效，并且支持自适应比特率，非常适合移动设备。但是，似乎只在 iOS 上运行良好。在 Android 上似乎只有零散的支持。我读过 Android 从 3.0 开始正式支持它，但是在我测试过的所有 android 设备（>3.0）上，HLS 没有在浏览器上播放。

2.  **标签中的渐进式下载**。这将在 iOS 和 Android 设备上运行良好，但令人担忧的是，由于它只是视频的渐进式下载，一旦浏览器完成下载，用户就会找到一种方法来抓取该视频。这在 iOS 上可能会更困难，但我确信找出浏览器将视频下载存储在某个 tmp 文件夹中的位置并不难。

我所说的任何一种方法都可以通过使用过期令牌方法来防止深度链接，其中令牌是使用只有内容服务器知道的密钥在服务器端生成的。视频请求只会在 5 或 10 分钟内有效，会扼杀深度链接。

有人知道解决这些问题的任何方法吗？即使我能够阻止深度链接，用户仍然可以获取视频本身并重新分发。也许这是不可能的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:18:13.587

**互联网规则#1：**

如果您不希望有人窃取它，请不要将其放到网上。

欢迎参加规避军备竞赛。[由DownloadHelper](http://www.downloadhelper.net/)带给您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:24:51.380

您无法阻止真正想盗版您视频的人。有各种措施，就像你提到的那样，使它变得更加困难，但真正想要复制它的人可以找到一种从记忆中捕捉它的方法，甚至只是将相机对准屏幕并记录视频的播放.

这与保护汽车的方式相同。你安装了一个转向锁、一个警报器和一个发动机防盗器，然后有人过来把车拉到一辆平板卡车上，然后把它开走。

底线 - 你无法阻止一个坚定的小偷，但你可以让盗窃变得更加困难，这样你就不是最有吸引力的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T00:14:10.963

当我阅读以上内容时，我可以轻松快速地通过所有这些技术。

对于一个我不能描述太多的项目，因为 nda，我们创建了我们自己的协议，基于一种众所周知的加密方法也不能提到，军用级），在服务器上将数据包编码到协议，并在协议上解码设备。不幸的是，这也不是完美的，因为很多移动应用程序都可以重新设计，一旦你完成了关键游戏，在 android 上非常容易，当然你可以定期回收密钥，在这种情况下，即使他们反编译了android应用程序并获得了密钥，它不会工作很长时间。

这是很多工作，不能用 html5 或 hLS 或事件 rtsp 来实现。

它还需要一个自定义服务器应用程序，该应用程序采用自定义协议重新传输视频流。

另一方面，该协议与传输无关，这意味着我们可以使用各种传输、tcp、IAP 和蓝牙。也适用于所有移动/桌面平台。

另一个小要求是不能使用浏览器，必须是自定义应用程序。

# matlab - 避免 MatLab 代码中的循环（重心权重）

> ID：13077409
> 
> 赞同：4
> 
> 时间：2012-10-25T21:16:17.037
> 
> 标签：matlab, loops, interpolation, vectorization

在学习了 Java 的基本编程之后，我发现对于当前的算法课程过渡到 MatLab 最困难的部分是避免循环。我知道在 MatLab 中有很多巧妙的方法可以对操作进行矢量化，但是我的思维是如此“卡在”循环思维中，以至于我发现很难直观地了解如何对代码进行矢量化。一旦向我展示了它是如何完成的，这对我来说很有意义，但我自己并不那么容易看到它。目前，我有以下代码用于查找拉格朗日插值中使用的重心权重：

```
function w = barycentric_weights(x);
% The function is used to find the weights of the
% barycentric formula based on a given grid as input.

n = length(x);
w = zeros(1,n);

% Calculating the weights
for i = 1:n
    prod = 1;
    for j = 1:n
        if i ~= j
            prod = prod*(x(i) - x(j));
        end
    end
    w(i) = prod;
end
w = 1./w; 
```

我很确定在 MatLab 中一定有更聪明的方法可以做到这一点，但我就是想不出。如果有人有任何提示，我将非常感激:)。而我在 MatLab 中学习所有矢量化技巧的唯一方法就是看看它们是如何在各种场景中使用的，例如上述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:48:57.907

在matlab中必须有创意以避免for循环：

```
[X,Y] =meshgrid(x,x)
Z = X - Y
w =1./prod(Z+eye(length(x))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T22:08:32.940

Kristian，有*很多*方法可以对代码进行矢量化。你已经得到了两个。（我同意 shakinfree 的观点：你应该始终考虑 1）以非矢量化形式运行需要多长时间（这样你就会知道通过矢量化可以节省多少时间）；2）矢量化可能需要多长时间（这样你会更好地了解它是否值得你花时间；3）你会调用它多少次（再次：是否值得做）；3) 可读性。正如 shakinfree 建议的那样，您不想在一年后回到您的代码并为您已实现的内容挠头。至少要确保你的评论很好。

但是在元级别上，当您决定需要通过矢量化来提高运行时性能时，首先从小（3x1 ？）数组开始，并确保您准确了解每次迭代发生的情况。然后，花一些时间阅读本文档，并点击相关链接：

[http://www.mathworks.com/help/releases/R2012b/symbolic/code-performance.html](http://www.mathworks.com/help/releases/R2012b/symbolic/code-performance.html)

它将帮助您确定何时以及如何进行矢量化。

快乐的 MATLABbing！

布雷特

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T21:47:12.490

我可以看到矢量化的吸引力，但我经常问自己，当我在一个月后回到代码并不得不破译所有那些 repmat 乱码时，它实际上节省了多少时间。我认为您当前的代码干净清晰，除非性能非常关键，否则我不会乱用它。但在这里回答你的问题是我的最大努力：

```
function w = barycentric_weights_vectorized(x)
    n = length(x);
    w = 1./prod(eye(n) + repmat(x,n,1) - repmat(x',1,n),1);
end 
```

希望有帮助！

我假设`x`这里是一个行向量。

# lua - 字符串从 C++ 代码消失到 Lua 脚本

> ID：13077410
> 
> 赞同：1
> 
> 时间：2012-10-25T21:16:17.363
> 
> 标签：lua, cryengine

我对 CryEngine 和 Lua 脚本完全陌生，所以如果我遗漏了一些非常明显的东西，请原谅我。

我正在尝试将命令从 Flash 动画传递到 Lua 脚本。该脚本将依次调用另一个 Flash 动画以显示在主窗口中。该过程在一种情况下运行良好，但我们正试图将其移至更通用的解决方案。（这会产生无数其他问题，但它们在这里不相关。）

工作正常的是：使用从 flash actionscript 发送的命令调用正确的 C++ 函数。此外，当直接调用时，Lua 脚本正确地使用命令调用第二个 Flash 动画并显示它。

问题出在中间。

```
void HUD::AlternateCommand(const char* command)
{
   // Code to select the proper Lua script and function
   Script::Call(ss, ssf, command);
} 
```

这应该将命令传递给 Lua 脚本。但是，当字符串到达​​脚本时，它突然为零。我完全不知道为什么会发生这种情况，特别是因为其他类似的命令已经正确通过。

有任何想法吗？

# robots.txt - 搜索引擎会为作为另一个站点下的虚拟目录的单独站点提供 robots.txt 吗？

> ID：13077411
> 
> 赞同：0
> 
> 时间：2012-10-25T21:16:18.577
> 
> 标签：robots.txt

我有一个网站（例如：www.examplesite.com），并且我正在创建另一个站点作为 IIS 中的一个单独的独立站点。第二个站点的 URL 将使它看起来像是我的主站点的一部分：www.examplesite.com/anothersite。这是通过在我的主站点下创建一个指向第二个站点的虚拟目录来完成的。

我允许我的主站点 (www.examplesite.com) 在搜索引擎中被索引，但我**不**希望我的第二个虚拟目录站点被搜索引擎看到。我可以允许我的第二个站点拥有自己的 robots.txt 文件，并禁止该站点的所有页面吗？还是我需要修改我的主站点的 robots.txt 文件并告诉它禁止虚拟目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:35:13.470

您不能拥有自己的 robots.txt 目录。只有“主机”可以拥有自己的 robots.txt：example.com、www.example.com、sub.example.com、sub.sub.example.com、...</p>

所以如果你想为 设置规则`www.example.com/anothersite`，你必须使用 robots.txt 在`www.example.com/robots.txt`。

如果要屏蔽子站点的*所有页面，只需添加：*

```
User-agent: *
Disallow: /anothersite 
```

这将阻止所有以“另一个站点”*开头*的URL 路径。例如，这些链接都被阻止了：

*   `www.example.com/anothersite`
*   `www.example.com/anothersite.html`
*   `www.example.com/anothersitefoobar`
*   `www.example.com/anothersite/foobar`
*   `www.example.com/anothersite/foo/bar/`
*   …</li>

注意：如果您的 robots.txt 已经包含`User-agent: *`，则必须`Disallow`在此块中添加该行而不是添加新块（机器人一旦找到与其匹配的块就会停止读取 robots.txt）。

# c++ - 在 C++ 中，将动态分配的对象传递给函数（总是）是个坏主意吗？

> ID：13077413
> 
> 赞同：3
> 
> 时间：2012-10-25T21:16:31.873
> 
> 标签：c++, function, pointers

我知道这个问题的标题看起来有点伤脑筋，但我真的不知道如何用一句话来问这个问题。我只会告诉你我的意思：

```
void f(T *obj)
{
    // bla bla
}
void main()
{
    f(new T());
} 
```

据我所知，（几乎）每个新的都需要一个删除，这需要一个指针（由新返回）。在这种情况下，new 返回的指针不会存储在任何地方。那么这会是内存泄漏吗？

C++ 是否有某种魔法（程序员不可见）在函数结束后删除对象，或者这种做法总是一个坏主意？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T21:21:24.347

没有特别的魔法，删除不会被自动调用。

这绝对不是“总是一个坏主意” - 如果函数以某种形式获得对象的所有权，那么它是调用此类函数的完全有效方式：

```
container.AddAndTakeOwnership(new MyItem(42)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T21:27:06.580

是的，这总是一个坏主意。函数和构造函数应该明确它们的所有权语义，并且如果它们期望获取或共享传递的指针的所有权，它们应该分别接收`std::unique_ptr`或共享`std::shared_ptr`。

有许多遗留 API 采用具有所有权语义的原始指针，即使在标准库中也是如此（例如，[`locale`](http://en.cppreference.com/w/cpp/locale/locale/locale)构造函数采用`Facet *`所有权），但任何新代码都应该避免这种情况。

即使在构造 a `unique_ptr`or时，`shared_ptr`您也可以避免使用`new`关键字，在后一种情况下使用`make_shared`，在前一种情况下编写[应该很快](https://stackoverflow.com/a/9657991/567292)添加到语言中的`make_unique`函数模板。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T21:33:15.597

> 在这种情况下，new 返回的指针不会存储在任何地方。那么这会是内存泄漏吗？

不，它不一定是内存泄漏。指针作为参数存储为`f`：

```
void f(T *obj)
//        ^^^  here pointer is "stored"
{
    // bla bla
    delete obj; // no memory leak if delete will be called on obj
}
void main()
{
    f(new T());
  //  ^^^^^^^  this "value" will be stored as an argument to f
} 
```

> C++ 是否有某种魔法（程序员不可见）在函数结束后删除对象，或者这种做法总是一个坏主意？

在你的例子中没有魔法。正如我所展示的 - 必须明确调用删除。

更好的是使用智能指针，然后 C++“魔术”工作，并且不需要删除。

```
void f(std::unique_ptr<T> obj)
{
    // bla bla
}
void main()
{
    f(new T());
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-25T21:29:50.760

显示的代码将导致内存泄漏。C++ 没有垃圾收集，除非您明确使用专门的框架来提供它。

其原因与 C/C++ 中管理内存的方式有关。对于局部变量，例如您的示例，直接从操作系统（malloc）请求对象的内存，然后指向对象的指针存在于堆栈中。由于 C/C++ 可以进行任意复杂的指针运算，编译器无法知道是否存在指向该对象的其他指针，因此在函数 f() 结束时无法回收内存。

为了自动防止泄漏，必须从托管堆中分配内存，并且必须仔细跟踪对该堆的每个引用以确定何时不再使用给定对象。为了获得这种能力，你必须放弃 C 的指针算术能力。

例如，假设编译器可以神奇地发现对 obj 的所有正常引用都已失效并删除了该对象（释放了内存）。如果你有一些非常复杂的 RUNTIME DEPENDENT 表达式，比如 void* ptr = (&& *&&*****(&&&** *obj)/2++ - currenttime() - 567 + 3^2 % 52) 等；编译器如何知道这个 ptr 是否指向 obj？没有办法知道。这就是没有垃圾收集的原因。您可以进行垃圾收集或复杂的运行时指针运算，而不是两者兼而有之。**

 *** * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T21:20:53.207

这通常在您的函数 f() 将对象存储在某处时使用，例如数组（或任何其他数据容器）或简单的类成员；在这种情况下，删除将（并且必须）在其他地方进行。

否则不是一个好主意，因为无论如何您都必须在函数结束时手动删除它。在这种情况下，您只需声明一个自动（在堆栈上）对象并通过指针传递它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T21:21:09.903

没有魔法。在您的情况下， f 被称为 main 返回 CRT 的 main 后，操作系统最终将清理“泄漏”。这不一定是一个坏主意，它可能会赋予 f 所有权，并且由 f 来做事并最终删除。有些人称之为不好的做法，但它可能在野外。

编辑：虽然我认为该代码不比以下更危险：

```
void f(T *obj)
{
    // bla bla
}
void main()
{
    T* test = new T ();
    f(test);
} 
```

主要是一样的。它对 f 说，这是一个指向某个内存的指针，它是你的，你现在照顾它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-25T21:49:47.120

在 C++ 中，不鼓励传递指针，因为没有相关的所有者语义（即，您无法知道谁拥有指针，因此谁负责删除指针）。因此，当您确实有一个函数（需要一个指针）时，您需要非常清楚地记录该函数是否负责清理指针。当然，像这样的文档很容易出错，因为用户必须阅读它。

在 C++ 程序中，传递描述事物所有权语义的对象更为正常。

1.  通过引用传递
    函数没有取得对象的所有权。它只会使用该对象。
2.  传递一个 std::auto_ptr (或 std::unique_ptr)
    函数正在传递指针和指针的所有权。
3.  传递一个 std::shared_ptr
    函数正在传递指针的共享所有权。

通过使用这些技术，您不仅可以记录所有权语义，而且使用的对象还将自动控制对象的生命周期（从而使您的函数免于调用 delete）。

`delete`因此，在现代 C++ 代码中很少看到手动调用。

所以我会这样写：

```
void f(std::unique_ptr<T> obj)
{
    // bla bla
}
int main()
{
    f(std::unique_ptr<T>(new T()));
} 
```**

# android - 无法让自定义 ListAdapter 工作

> ID：13077418
> 
> 赞同：0
> 
> 时间：2012-10-25T21:16:56.570
> 
> 标签：android, listview, adapter, listadapter

我已经遵循了各种“如何”的例子（或者我认为），但我仍然无法让我的自定义 ListAdapter 工作。我有一个包含字符串的列表视图对话框，这些字符串是对对象数组（“Notam”类）的引用。我想根据引用对象的属性设置每个列表项的颜色。

（在阅读我的代码之前，我有一个怪癖，即大括号必须对齐，否则我看不到块在哪里。我不喜欢在同一行末尾放置左大括号的约定。）

这是自定义类的代码（就像我试图将每个项目的文本颜色设置为洋红色的测试一样）：

```
private class GotoAdapter extends ArrayAdapter<String>
{
    private ArrayList<String> items;

    public GotoAdapter(Context context, int textViewResourceId, ArrayList<String> items)
    {
        super(context, textViewResourceId, items);
        this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View v = convertView;
        if (v == null)
        {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.goto_row, null);
        }
        String s = items.get(position);
        if (s != null)
        {
            TextView tt = (TextView) v.findViewById(R.id.text1);
            if (tt != null)
            {
                String s1 = (String)tt.getText(); // this is always an empty string!
                tt.setTextColor(0xFF00FF); // this has no effect!
            }
        }
        return v;
    }
} 
```

使用这个派生类时，String s 有预期的显示文本（除了在屏幕上看不到），但返回的 TextView 中的文本始终为空字符串，设置颜色没有效果。

这是在我的主视图中单击“转到”按钮时显示对话框的代码：

```
mGotoButton.setOnClickListener(new View.OnClickListener()
{
    public void onClick(View v)
    {
        // The pre-loaded array gets round a problem which I read about somewhere else
        // (the ArrayList gets cleared again below)
        String[]    array = {"one", "two", "three"};
        ArrayList<String> lst = new ArrayList<String>();
        lst.addAll(Arrays.asList(array));

        // custom dialog
        final Dialog dialog = new Dialog(context);

        dialog.setContentView(R.layout.goto_dialog);
        dialog.setTitle("Choose Notam");

        // Create the list view and adapter
        final ListView list = (ListView) dialog.findViewById(R.id.goto_list);

        // If I replace this reference to my custom adapter...
        final GotoAdapter adapter = new GotoAdapter
                (mContext, R.layout.goto_row, lst);

        // ... with this normal one, everything works!
        // (but of course now I can't get access to the objects.)
//      final ArrayAdapter<String> adapter = new ArrayAdapter<String>
//              (mContext, R.layout.goto_row, lst);

        list.setAdapter(adapter);

        // Populate the adapter
        adapter.clear();        // first clear the silly preset strings

        // Notam is my object class.
        // Spine.mNotamsDisplayed is a public static NotamArray.
        // class NotamArray extends ArrayList<Notam>
        // Spine is my main activity where I keep my global (app-wide) stuff.

        for (Notam notam : Spine.mNotamsDisplayed)
        {
            // This gets the reference string from the Notam object.
            // This is what goes into the list.
            String s = notam.getReference();
            adapter.add(s);
        }

        // Sort into alphabetical order
        adapter.sort(new Comparator<String>()
        {
            public int compare(String arg0, String arg1)
            {
                return arg0.compareTo(arg1);
            }
        });

        list.setOnItemClickListener(new AdapterView.OnItemClickListener()
        {
            public void onItemClick(AdapterView<?> a, View v, int pos, long id)
            {
                String  s;
                int     i;

                s = (String)a.getItemAtPosition(pos);

                // This static function returns the index in Spine.mNotamsDisplayed
                // which is referenced by the reference string s.
                // I have to do this because I lost the one-for-one correlation of page
                // indexes with list view entries when I did the sort.
                i = NotamArray.findNotamIndexByReference(Spine.mNotamsDisplayed, s);
                if (i >= 0)
                {
                    // This is what the Goto button and dialog is all about: this
                    // just moves my main view's pager to the page that was selected.
                    mPager.setCurrentItem(i);
                }
                dialog.dismiss();
            }
        });

        dialog.show();
    }
}); 
```

这是我用于对话框的 xml (goto_dialog.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView 
        android:id="@+id/goto_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</RelativeLayout> 
```

这是我的列表视图行的 xml (goto_row.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="#00FF00"
    android:gravity="center_vertical"
     android:textAppearance="?android:attr/textAppearanceMedium"
    android:padding="2dp" 
    android:textSize="20dp"
/> 
```

（我将文本颜色设置为绿色，因此如果我使用标准列表视图适配器，我可以看到该位正在工作。（果然每个条目的文本都是绿色的。但是，如果我使用自定义适配器，则看不到任何文本，虽然它在那里 - 我认为黑色是黑色的。）

一定有人能发现我犯的一个小错误——拜托！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:36:02.550

根据我的阅读，您似乎想设置每个列表项的文本颜色以匹配您在数组中的颜色。

> 我想根据引用对象的属性设置每个列表项的颜色。

但是，您的初始数组设置为

```
String[] array = {"one", "two", "three"}; 
```

因此，稍后当您根据数组动态设置文本颜色时，这将导致问题。但我敢肯定你打算稍后改变它。

当您使用标准数组适配器时，它只是将数组中的项目显示为文本，这就是为什么：

> 如果我使用标准列表视图适配器。（果然每个条目的文本都是绿色的。但是，如果我使用自定义适配器，则看不到任何文本

要查看您的自定义适配器是否正常工作（更改颜色），您可以通过在 goto_row.xml 文件的 TextView 中添加一行来开始：

```
android:text="Test String" 
```

现在它将以不同的颜色显示“测试字符串”，并且

```
String s1 = (String)tt.getText(); 
```

上面的行将得到“测试字符串”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:51:37.823

我发现了我在问题末尾暗示的微不足道的错误。这是自定义适配器中的这一行：

```
tt.setTextColor(0xFF00FF); 
```

似乎 0xFF00FF 不是一个有效的颜色值，这就是为什么我在屏幕上什么也看不到的原因。将其更改为：

```
tt.setTextColor(Color.rgb(255, 0, 255); 
```

修复了问题，默认的绿色变为洋红色，**我**可以将文本设置为我想要的值。所以我现在可以将各个行的颜色设置为他们需要的颜色。

感谢@LukasKnuth 和@tigerpenguin 为我指明了正确的方向。

# python - BeautifulSoup 是否理解相对 URL？

> ID：13077419
> 
> 赞同：2
> 
> 时间：2012-10-25T21:16:59.750
> 
> 标签：python, beautifulsoup, urllib2

我正在尝试抓取一个使用大量相对 URL 的网站。一个存档页面包含指向许多单独条目的链接，但 URL 的格式类似于“../2011/category/example.html”

对于每个条目，我想打开页面并抓取它，但我不确定最有效的处理方法是什么。我正在考虑用“/”拆分起始 URL，弹出最后一项并重新加入它们，以获得基本 URL。

不过，这似乎是一个障碍。有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:37:36.960

要从相对 URL 构造绝对 URL，请使用`urlparse.urljoin`（[此处的文档](http://docs.python.org/library/urlparse.html#urlparse.urljoin)）。

但是，如果您正在使用诸如`mechanize`爬网之类的浏览系统，则可以简单地首先获取绝对 url，然后再将相对 url 提供给浏览器。浏览器将跟踪状态并自动从与先前请求相同的域中获取 URL。

# android - 如何通过设置按钮壁纸设置壁纸？

> ID：13077420
> 
> 赞同：0
> 
> 时间：2012-10-25T21:17:05.523
> 
> 标签：android, android-layout, android-viewpager, wallpaper

我想从 viewpager 设置壁纸（选定的图像，壁纸按钮）。我有不同的图片（R.drawable.a1,R.drawable.a2,R.drawable.a3,R.drawable.a4,R.drawable.a5,R.drawable.a6 ...... ..)我的问题，id没有改变（总是相同的图片，R.drawable.a1）问题出在哪里？， 谢谢

应用程序类；

```
public class App extends Activity  implements OnPageChangeListener {
protected static final Context Context = null;

private Integer[] ListOfID = {
        R.drawable.a1, R.drawable.a2, R.drawable.a3, R.drawable.a4, R.drawable.a5,     R.drawable.a6, R.drawable.a7,
        R.drawable.a8, R.drawable.a9, R.drawable.a10, R.drawable.a11, R.drawable.a12, R.drawable.a13, R.drawable.a14, R.drawable.a15,
        R.drawable.a16, R.drawable.a17, R.drawable.a18, R.drawable.a19, R.drawable.a20};
private static final int count = 22;

View view=null;
Integer imageId;
final Activity act = this;  
private int indexOfImage = 0;
    public LinearLayout layout;

public void onCreate(Bundle savedInstanceState)
{       
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

     MyPagerAdapter adapter = new MyPagerAdapter();
       final ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
         myPager.setAdapter(adapter);
         myPager.setCurrentItem(12); 
         myPager.setOnPageChangeListener(this);

         Button next = (Button) findViewById(R.id.buttonnext);
         next.setOnClickListener(new View.OnClickListener(){

             public void onClick(View v) {
                 myPager.setCurrentItem(myPager.getCurrentItem()+1);
             }
         }); 

         Button previous = (Button) findViewById(R.id.buttonprevious);
         previous.setOnClickListener(new View.OnClickListener(){

             public void onClick(View v) {
                 myPager.setCurrentItem(myPager.getCurrentItem()-1);
             }
         }); 

         Button duvarbtn = (Button) findViewById(R.id.button1);
         duvarbtn.setOnClickListener(new View.OnClickListener(){
            int id=ListOfID[indexOfImage];
             public void onClick(View v) {

                WallpaperManager myWallpaperManager
                 = WallpaperManager.getInstance(getApplicationContext());
                try {                                                                      
                    myWallpaperManager.setResource(id);                       
                } catch (IOException e) {
                 // TODO Auto-generated catch block
                 e.printStackTrace();
                }
             }          
         }); 
}

public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int position, float arg1, int arg2) {
    // TODO Auto-generated method stub

        }

public void onPageSelected(int position) {
    // TODO Auto-generated method stub

    indexOfImage = position;
    switch (position) {
    case 0:
   firstpage(position);       
        break;

    case 21:
        firstpage(position);
        break;
    }

}

public void firstpage(int position) {
    // TODO Auto-generated method stub
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
     int pageCount = getCount();
     if (position == 0){
         //
         myPager.setCurrentItem(pageCount-2,false);
     } else if (position == pageCount-1){
        //ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
         myPager.setCurrentItem(1,false);
     }
}

private int getCount() {
    // TODO Auto-generated method stub
     return count;
}
public void onClick(View v) {
    // TODO Auto-generated method stub
    //Filter f = (Filter) v.getTag();
   // MyPagerAdapter.show(this, input, f);
}
 public void onDestroy()
    {
     super.onDestroy();
    }   
} 
```

# playframework - 资产不更新 - 玩！2.0

> ID：13077421
> 
> 赞同：0
> 
> 时间：2012-10-25T21:17:14.300
> 
> 标签：playframework, playframework-2.0, refresh, template-engine, assets

我在做一个 Hello World 应用程序时遇到了麻烦，我尝试了一下 CSS，但它不起作用，它不会更新，我不知道为什么。当我在开发控制台中从浏览器（Chrome）查看源代码时，CSS 甚至不包含在 html 中

```
<style type="text/css"></style> 
```

实际上，当我右键单击时，整个和部分都像这样被省略

```
<h1>My Blog</h1>
<ul>

    <li>
        <h2>
            <a href="/posts/1" >Post #1</a>
        </h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis a pulvinar massa. Nullam gravida rhoncus quam non aliquam. Donec vitae orci at nibh scelerisque.</p>

    </li>   

    <li>
        <h2>
            <a href="/posts/2" >Post #2</a>
        </h2>
        <p>Suspendisse leo ante, ornare et ultrices nec, commodo vitae neque. Proin dictum diam quis nibh elementum et consequat ipsum aliquam. Vestibulum ante ipsum.</p>

    </li>   

</ul>     

<form action="/posts/create" method="POST" >

    <input type="text" name="title" /> </br>
    <input type="text" name="content" /> </br>
    <input type="submit" value="Post" />

</form> 
```

main.css

```
p {
    background-color: #FFAABB;
} 
```

main.scala.html

```
@(title: String)(content: Html)

<!DOCTYPE html>

<html>
    <head>
        <title>@title</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    </head>
    <body>
        @content
    </body>
</html> 
```

我被困在这里，我不知道为什么。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:01:58.153

找到答案：错过在页面模板中调用 @main("some title"){ here are your contents}。

# mongodb - 没有查询生成器有什么方法可以删除

> ID：13077422
> 
> 赞同：1
> 
> 时间：2012-10-25T21:17:14.843
> 
> 标签：mongodb, mongodb-.net-driver

没有查询生成器有什么方法可以删除？

var query = Query.EQ("_id", id); 集合.删除（查询）；

我将我的解决方案更新到 1.6 以使用 Linq 查询，但我发现我仍然需要使用查询生成器来执行删除。文档说对查询生成器的支持将在 2.0 之后删除。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:45:28.677

你可以像这样构建它

```
var query = new QueryDocument("_id", id);
collection.Remove(query); 
```

也就是说，您应该使用 Query.EQ。只有 DeprecatedQueryBuilder 正在消失。

# keyboard-shortcuts - 如何在 Adob e Dreamweaver 中导入键盘快捷键

> ID：13077424
> 
> 赞同：0
> 
> 时间：2012-10-25T21:17:16.257
> 
> 标签：keyboard-shortcuts, dreamweaver

我最近升级到 Adob​​e Dreamweaver CS6。

我已从编辑菜单 > 键盘快捷键选项将我的 CS5 键盘快捷键备份到“dreamweaver 快捷方式.htm”文件中，但我无法在 cs6 或任何旧的dreamweaver 版本中找到导入选项，也无法导入我的旧版本新版本的快捷方式。

如果有人知道 Dreamweaver 中键盘快捷键的导入方法，请告诉我。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T14:53:36.803

这在 Win7 中对我有用：（将 [your_profile] 替换为您用于登录此计算机的名称。如果您不使用英语版本，您也需要将 en_US 更改为您的本地变体。）

去：

> C:\Users[your_profile]\AppData\Roaming\Adobe\Dreamweaver CS5\en_US\Configuration\Menus\Custom Sets

您应该在那里找到两个文件：active **set.txt**（其中仅包含您正在使用的键盘快捷键集的名称）和包含您精心制作的快捷键的 xml 文件。

将 xml 文件（或两者，如果您愿意，在这种情况下 CS6 将从该集合开始）复制到：

> C:\Users[your_profile]\AppData\Roaming\Adobe\Dreamweaver CS6\en_US\Configuration\Menus\Custom Sets

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:21:35.673

似乎 Adob​​e 没有提供将导出的键盘快捷键导入回来的选项。

我从 Adob​​e 创意云资源之一获得以下几行，我假设 Dreamweaver 没有提供任何内置命令来导入快捷方式，而是手动执行。

```
Export keyboard shortcuts
Before upgrading to Creative Cloud, do the following:
1\.  Select Edit > Keyboard Shortcuts
2\.  Click "Export Set As HTML" button.
After you upgrade, refer to the exported file to set the shortcuts again. 
```

[参考 - http://helpx.adobe.com/pdf/dreamweaver_reference.pdf](http://helpx.adobe.com/pdf/dreamweaver_reference.pdf)

# eclipse - 共享一个现有的 svn 项目

> ID：13077429
> 
> 赞同：0
> 
> 时间：2012-10-25T21:17:43.753
> 
> 标签：eclipse, svn, import, google-code

我实际上有一个由谷歌代码托管的现有 svn 项目。现在我在租用的 vServer 上创建了一个新的 svn 存储库。现在我想分享/复制我的

```
https://myproject.googlecode.com/svn/trunk/ 
```

进入我的新仓库，可在

```
https://mydomain.com/svn/client/android/ 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:22:58.527

如果你想将你的项目迁移到你的 vserver，我想我[如何将一个 SVN 存储库迁移到另一个 SVN 存储库？](https://stackoverflow.com/questions/939963/how-to-migrate-svn-to-another-repository)是给你的。如果这是您的解决方案，则问题是完全重复的。

# activerecord - Rails 3.2 中的日期比较

> ID：13077439
> 
> 赞同：0
> 
> 时间：2012-10-25T21:18:19.313
> 
> 标签：activerecord, ruby-on-rails-3.2, active-record-query

**阶段**：

我有这个模型：

```
Promo(id: integer, start_date: datetime, end_date: datetime) 
```

我想知道目前有哪些促销活动。可能我们的查询应该是这样的：

```
SELECT * FROM promos WHERE now BETWEEN start_date AND end_date; 
```

**问题**：

我应该如何在 Ruby 中制作它？哪个是正确的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:48:40.060

Rails 是智能的。如果您检索日期/时间，它将转换为 DateTime 对象。相反，将 DateTime 对象传递给 where 子句（对于 Rails 3.x），它将正确构建 where 子句。

传递给 where 子句的字符串将被传递给 SQL where 子句。如果你传递一个数组，第二个和后面的元素将被替换为“？” 第一个元素中的字符。

因此，对于您的情况：

```
Promo.where(["? between start_date and end_date", DateTime.now]) 
```

作品。我在我的 Rails 模型（位置）上验证了它恰好有 start_date 和 end_date，并且工作正常：

```
[1] pry(main)> Position.where(["? between start_date and end_date", DateTime.now]).count
=> 2914 
```

它在带有 PostgreSQL 的 Rails 3.2.8 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:56:23.857

尚未对此进行测试，但请尝试以下操作：

```
currentTime = Time.now()
Promo.find(
     :all,
     :conditions => ['start_date < ? AND end_date > ?', currentTime, currentTime]
) 
```

`Date`如果`Time`课程不起作用，您可能需要使用该课程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T04:43:45.830

是的，您可以使用比较运算符来比较日期，例如：

```
irb(main):018:0> yesterday = Date.new(2009,6,13)
=> #<Date: 4909991/2,0,2299161>
irb(main):019:0> Date.today > yesterday
=> true 
```

但是您是否尝试将日期与日期时间进行比较？

如果是这种情况，您需要将日期时间转换为日期，然后进行比较。

或者

```
Date.parse('2010-11-01') < Date.today 
```

如果 '2010-11-01' 已经过去，将返回 true

我希望这有帮助。

# c# - SQLite DLL 无法从 WPF 应用程序加载

> ID：13077440
> 
> 赞同：1
> 
> 时间：2012-10-25T21:18:21.823
> 
> 标签：c#, sqlite, dll, reference

我已经对这个问题进行了一些研究，并看到了一些可能的解决方案，但没有什么对我有用。

> 无法加载文件或程序集“System.Data.SQLite.dll”或其依赖项之一。指定的模块无法找到。

我有一个使用 SQLite 的 WPF 应用程序。在我的开发机器（Windows 7、64 位、Visual Studio 2010）上，一切正常。在 QA 部门，一切正常。但是在构建机器（Windows Server 2008，64 位）和客户服务（32 位）上，它给出了错误。

我的 .sln 包含 3 个项目 - 两个 .exe 和一个 lib（由两个 .exe 项目使用并包含 SQLite 逻辑）。这 3 个都有 2 个配置，Debug 和 Release，每个版本都编译为 x86。SQLite dll 位于执行目录中。

我的 GAC 中有 3 个 System.Data.SQLite 条目，这已被验证为为什么我在我的计算机上取得了成功但不是某些其他的，而不是我知道为什么它不会使用在执行目录中找到的 dll . 所有 GAC 条目都是 1.0.66.0 版本，具有相同的公钥令牌，并分别与 MSIL、x86 和 AMD64 相关联。从 GAC 中删除文件允许我重现错误，直到我将项目引用更改为“复制本地”，此时它再次在我的计算机上工作（但仍然不能在其他计算机上工作）。

不确定这有多聪明，但我决定尝试动态加载 dll（同时仍在我的项目中使用引用），检查我是在 32 位还是 64 位环境中运行，并使用 Assembly.LoadFrom 来为正确的位加载 SQLite dll。该代码成功执行并适用于我的 64 位机器上的 32 位版本，我认为这是因为 x86 编译平台。无论如何，它并没有改变我在其他机器上看到的错误。

关于如何解决此问题的建议？

**已编辑：从 GAC 中删除引用后反映结果**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:55:49.327

我过去也有同样的问题。我构建版本：一个引用 System.Data.SQLite x32，另一个引用 x64。

# jquery - 当用户按下回车键时，如何根据鼠标位于哪个表单上来控制提交哪个表单？

> ID：13077441
> 
> 赞同：0
> 
> 时间：2012-10-25T21:18:28.813
> 
> 标签：jquery, forms, submit, mouseevent, keyevent

我在一个页面上有三个表格。每个表单都有一个用户名和密码字段，以及一个复选框。检测用户何时按下回车键并提交适当的表单不是问题：

```
$("input[type='text'], input[type='password'], input[type='checkbox']").keypress(function(event) {
    if ( event.which == 13 ) {
        event.preventDefault();
        $(this).closest("form").submit();
    }
}); 
```

但是，问题是如果未选中该复选框，则按 Enter 不会提交表单。我的解决方案：如果鼠标悬停在表单上，​​那么当用户按下回车键时，我会提交该表单。但我不知道如何实施这个解决方案。

我如何允许用户提交适当的表单，具体取决于鼠标是否悬停在该表单上，或者用户是否选择了文本字段或复选框？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:47:39.463

向表单添加输入`type="submit"`，将其样式设置为`visibility: hidden`. 默认情况下，当在属于同一表单的字段中按 Enter 时，浏览器将使用提交按钮。无需 JavaScript。

# c# - 在 C#.net 中为电子邮件添加签名

> ID：13077443
> 
> 赞同：0
> 
> 时间：2012-10-25T21:18:35.800
> 
> 标签：c#, asp.net, email, gmail

今天我遇到了一个问题，我正在尝试为从我的 web 应用程序发送的电子邮件添加签名，我正在使用 System.Net.Mail。

PS：我不知道这是否有帮助，但我正在使用客户端连接 Gmail 并从 gmail 帐户发送邮件。

```
 public string Notify(   int iduser, int idcompany)
    {
        var us = new Users(iduser);
        var emp = new Company(idcompany);
        var super_user = new Users(emp.iduser);

        body = "The Company " + emp.Name + "Has sent their questions.\n Administrator: " + us.Login;
        name = us.Login;
        subject = "Send questions [" + emp.Comercial_Name + "] - " + us.Login;
        to.Add(super_user.Email);
        replyTo = us.Email;
        return Send();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:27:56.663

签名只是电子邮件正文的一部分，因此您可以简单地执行以下操作：

```
body = body + signature; 
```

您之前定义的位置`signature`。

尽管您在这里连接了很多字符串，但使用 a`StringBuilder`会更有效。

# javascript - 如何确定宽高比是否 > 1:5？

> ID：13077445
> 
> 赞同：0
> 
> 时间：2012-10-25T21:18:43.430
> 
> 标签：javascript, algorithm, aspect-ratio

假设我要定位页面上的所有图像，并希望确保它们都通过 > 1:5 的测试...

这会给我纵横比（来自：[here](https://stackoverflow.com/questions/1186414/whats-the-algorithm-to-calculate-aspect-ratio-i-need-an-output-like-43-169)）：

```
function gcd(a, b) {
    return (b == 0) ? a : gcd(b, a % b);
}

var image = document.getElementById('image');
var w = image.width;
var h = image.height;
var r = gcd(w, h); 
```

演示：http: [//jsfiddle.net/f8LwL/](http://jsfiddle.net/f8LwL/)

但是我怎样才能确保它总是 > 1:5 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:20:45.377

你为什么要找gcd？你的纵横比是你的宽高比..即`w/h`..所以要确保你的纵横比> 1：5（即> .2），只需检查`(w/h) > (1/5)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:22:34.423

怎么样

```
if(w/h > 1/5 ) {
    alert("Aspect ratio is fine");
} else {
    alert("Aspect ratio is too low");
} 
```

# python - PyMongo 导入连接 - 导致 ImportError

> ID：13077446
> 
> 赞同：4
> 
> 时间：2012-10-25T21:18:49.353
> 
> 标签：python, mongodb, import, pymongo

我正在调用以下简单脚本以通过 Python 连接到 mongo 数据库。

这是[10gen 教育课程 M101 - MongoDB for Developers](https://education.10gen.com/courses/10gen/M101/2012_Fall/about)中的一个示例，根据论坛，我不是唯一遇到此问题的人。

```
import pymongo

from pymongo import Connection
connection = Connection('localhost', 27017) 
```

[我按照此处所述使用 pip](http://api.mongodb.org/python/current/)安装了 pymongo ，一切正常。现在，当我尝试导入 Connection 类时，它给了我以下错误：

```
ImportError: cannot import name Connection 
```

到目前为止，我已经查看了以下线程： [pymongo installed but import failed](https://stackoverflow.com/questions/10743630/pymongo-installed-but-import-fails)

但它不适用于我的环境，因为我使用的是 Python 2.7.1，而且我使用的是 Mac OS 而不是 CentOS。我也对谷歌做了一些研究，但到目前为止我发现的唯一一件事是验证 PyMongo 是否安装正确，我已经完成并返回：

```
Requirement already satisfied 
```

任何帮助将不胜感激，以便继续学习。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T10:19:46.850

确保没有文件被调用`pymongo.py`或`pymongo.pyc`在您正在执行脚本的路径中。我将我的测试脚本命名为`pymongo.py`，这导致 Python 尝试从同一个文件中导入 Connection。将其重命名为`pymongo-test.py`并删除自动创建`pymongo.pyc`的解决了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T09:54:54.057

利用 ：

```
from flask.ext.pymongo import MongoClient 
```

作为 ：

```
from pymongo import Connection 
```

已弃用。

MongoClient 的工作方式与 Connection 几乎相同。

# jquery - 动画回到原始位置

> ID：13077448
> 
> 赞同：1
> 
> 时间：2012-10-25T21:18:53.790
> 
> 标签：jquery, html, css

我正在尝试创建一个粘性手风琴菜单，其中背景根据单击的按钮滚动，但菜单仍保留在其位置。由于它很粘，我正在使用`position:fixed`. 这是 HTML：

```
<div id="nav">
<ul>
    <li><a id="home" class="menu-link" href="#section0"><img src="images/home.png" /></a></li>
    <li><a id="aboutus" class="menu-link" href="#section1"><img src="images/aboutus.png" /></a>
        <ul class="submenu">
        <li><a id="submenu1" class="menu-link" href="submenu1.php"><img src="images/submenu1.jpg" /></a></li>
        <li><a id="submenu2" class="menu-link" href="submenu2.php"><img src="images/submenu2.jpg" /></a></li>
        </ul>
    </li>
    <li><a id="dances" class="menu-link" href="#section2"><img src="images/dances.png" /></a></li>
    <li><a id="packages" class="menu-link" href="#section3"><img src="images/packages.png" /></a>
        <ul class="submenu">
        <li><a id="submenu3" class="menu-link" href="submenu3.php"><img    src="images/submenu3.jpg" /></a></li>
        <li><a id="submenu4" class="menu-link" href="submenu4.php"><img src="images/submenu4.jpg" /></a></li>
        </ul>
    </li>
    <li><a id="gallery" class="menu-link" href="#section4"><img src="images/gallery_menu.png" /></a>
        <ul class="submenu">
        <li><a id="submenu5" class="menu-link" href="submenu5.php"><img src="images/submenu5.jpg" /></a></li>
        <li><a id="submenu6" class="menu-link" href="submenu6.php"><img src="images/submenu6.jpg" /></a></li>
        </ul>
    </ul>
</div> 
```

我正在寻找手风琴（[像这样](http://www.designchemical.com/lab/jquery/demo/jquery_simple_accordion_menu.htm)），但我无法使用 slideUP、slideToggle 等（可能是因为`position:fixed`）。因此，我尝试计算单击的菜单项具有的子项数量，并将其下方的所有其余菜单移动适当的数量。代码是这样的：

```
$('#nav ul li a').bind('click',function(event){
    var no_of_child=$(this).parent('li').children('ul').index()+1;
    var clicked_position=$(this).position();
    if(no_of_child>0){
        var top_rel=60*no_of_child;
        $(this).parent('li').nextAll().children('a').animate({
        top: "+="+top_rel,
    }); 
```

菜单移动得很好，但是当单击不同的菜单项时，我坚持让它回到原来的位置。

注意：我认为我“必须”使用`position:fixed`菜单，因为我的背景不断上下滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:43:14.383

将 div包裹`<div id="nav">`在固定的 div 中，并将导航 div 更改为相对定位。

# gwt - 集成 Bootstrap 和 GWT

> ID：13077450
> 
> 赞同：6
> 
> 时间：2012-10-25T21:18:59.827
> 
> 标签：gwt, twitter-bootstrap, gwt-bootstrap

我正在研究将[Bootstrap](http://twitter.github.com/bootstrap/)库与 GWT 一起使用的最佳实践。我不喜欢使用[GWT-Bootstrap](https://github.com/gwtbootstrap/gwt-bootstrap)项目，而是喜欢在我的 GWT 应用程序中使用纯 css 和 js Bootstrap 库。

我正在搜索如何将 Bootstrap 样式应用于 GWT UI 组件？我是否需要通过处理 GWT 组件的 DOM 元素在 UI 视图代码中执行此操作？或者有没有其他干净的方法来实现 GWT 和 Bootstrap 的这种集成？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T10:33:50.547

不，没有办法简单地将引导样式添加到 gwt 组件。您将不得不处理 DOM，删除一些 GWT CSS 类并添加 GWT 类，并且，至少您将代码从一个地方复制到任何地方，您将创建一个扩展原始组件的类并在任何地方使用这个新类，这基本上就是 GWT-Bootstrap 所做的。

我知道这一点是因为大约一年前，我想做你现在所说的：以一种干净的方式将引导样式应用于 GWT 组件，然后，我设法让它工作，并开始 GWT-Bootstrap 开发。

GWT-Bootstrap 实际上已经解决了大部分 gwt+bootstrap 集成错误，并且基本上适用于任何项目。我知道有些组件还没有实现或者有错误，但是，也许你可以修复一些并提出一个请求，恕我直言，这比重建所有的东西要好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-18T10:52:56.033

您当然可以在没有第三方包装库的情况下使用 Bootstrap 和 GWT，`addStyleNames`在 UiBinder XML 中添加具有属性的 Bootstrap 的 CSS 类或在 Java 代码中使用相同的方法。但 Bootstrap 也大量使用自定义数据属性`data-toggle`，例如让“魔法”发生。由于 GWT 的默认小部件（`FlowPanel`等）不提供这些自定义属性的设置器，因此您无法在 UiBinder XML 中设置它们并发现自己编写了很多

```
getElement().setAttribute(...) 
```

在您的 Java 代码中。

这就是[GWT-Bootstrap](https://github.com/gwtbootstrap/gwt-bootstrap)或[GwtBootstrap3](https://github.com/svenjacobs/gwtbootstrap3)等包装库的用途。它们提供包装这些功能的自定义小部件，以便您可以像使用默认 GWT 小部件一样使用 Bootstrap 小部件。

# jquery - Internet Explorer 8 错误 - 对象不支持此属性或方法

> ID：13077451
> 
> 赞同：0
> 
> 时间：2012-10-25T21:19:00.450
> 
> 标签：jquery, forms, internet-explorer, submit

当我尝试提交表单时，我在 IE 上遇到错误。错误如下，但我不知道如何修复它。

IE 错误 - 对象不支持此属性或方法 -mailbox-details.php - line:397 - Char:5

下面是一个片段...

第 397 行是倒数第三行... jQuery_1_7_1("#store_notes").val( "" );

```
 <script>
/*
$("input").click( function(e) {
    alert();
    e.preventDefault();
})
*/
jQuery(document).ready(function( $ ) {
    jQuery( "#renewal_date" ).datepicker({ dateFormat: "mm-dd-yy" });       
    //alert(jQuery_1_7_1.ui);
});

    ///////////////////////////////////////////////////////////
    // save
    ///////////////////////////////////////////////////////////
    jQuery_1_7_1("#save_button").click( function() {
        var lErrorMsg = checkMandatoryFields();
        // if there's no errors, submit
        if ( lErrorMsg == '' ) {
            saveData();
        } else {
            // if not, show errors
            jQuery_1_7_1(".formRowError").html( lErrorMsg + '<br><br>' );
            jQuery_1_7_1(".formRowError").fadeIn();
            var new_position = jQuery_1_7_1('.formRowError').offset();
        window.scrollTo(new_position.left,new_position.top);
        }
    });

    function saveData() {   
        // check checkbox values
        if ( jQuery_1_7_1("#notify_email_package").attr("checked") == "checked" )
            notify_email_package = 1;
        else
            notify_email_package = 0;
        if ( jQuery_1_7_1("#notify_text_package").attr("checked") == "checked" )
            notify_text_package = 1;
        else
            notify_text_package = 0;
        if ( jQuery_1_7_1("#notify_email_mail").attr("checked") == "checked" )
            notify_email_mail = 1;
        else
            notify_email_mail = 0;
        if ( jQuery_1_7_1("#notify_text_mail").attr("checked") == "checked" )
            notify_text_mail = 1;
        else
            notify_text_mail = 0;

        // check radio values
        if ( jQuery_1_7_1("#rental_status_rented").attr("checked") == "checked" )
            rental_status = 1;
        else if ( jQuery_1_7_1("#rental_status_vacant").attr("checked") == "checked" )
            rental_status = 0
        else
            rental_status = '';

        var dataString = 'id_mailbox=<?php echo $lIdMailbox; ?>' +
                                            '&mailbox_no=<?php echo $row['mailbox_no']; ?>' +
                                            '&customer_name=' + jQuery_1_7_1("#customer_name").val() + 
                                            '&customer_address=' + jQuery_1_7_1("#customer_address").val() +
                                            '&customer_zip=' + jQuery_1_7_1("#customer_zip").val() +
                                            '&customer_home_phone=' + jQuery_1_7_1("#customer_home_phone").val() +
                                            '&customer_mobile_phone=' + jQuery_1_7_1("#customer_mobile_phone").val() +
                                            '&customer_email=' + jQuery_1_7_1("#customer_email").val() +
                                            '&business_name=' + jQuery_1_7_1("#business_name").val() +
                                            '&business_address=' + jQuery_1_7_1("#business_address").val() +
                                            '&business_zip=' + jQuery_1_7_1("#business_zip").val() +
                                            '&business_phone=' + jQuery_1_7_1("#business_phone").val() +
                                            '&notify_email_package=' + notify_email_package +
                                            '&notify_text_package=' + notify_text_package +
                                            '&notify_email_mail=' + notify_email_mail +
                                            '&notify_text_mail=' + notify_text_mail +
                                            '&id_mailbox_size=' + jQuery_1_7_1("#id_mailbox_size").val() +
                                            '&rental_status=' + rental_status +
                                            '&id_rental_period=' + jQuery_1_7_1("#id_rental_period").val() +
                                            '&renewal_date=' + jQuery_1_7_1("#renewal_date").val() +
                                            '&price_override=' + jQuery_1_7_1("#price_override").val() +
                                            '&store_notes=' + jQuery_1_7_1("#store_notes").val();
        jQuery_1_7_1.ajax({
            type: "POST",
            url: "data/update-mailbox.php",
            data: dataString,
            success: function(data) {
                // go back to list
                window.location = "manage-mailboxes.php";
            }
        });
    }

    function checkMandatoryFields() {
        var lOk = true;
        var lErrorMsg = "";

        // check if email is valid
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var lEmailValid = emailReg.test( jQuery_1_7_1('#customer_email').val() );
        // if email is not valid
        if (!lEmailValid) {
            lOk = false;
            lErrorMsg = lErrorMsg + "<br>The email address is not valid.";
        }

        // check if email notification is active but there's no email
        if ( ( ( jQuery_1_7_1("#notify_email_package").attr("checked") == "checked" ) || ( jQuery_1_7_1("#notify_email_mail").attr("checked") == "checked" ) ) && 
        ( ( jQuery_1_7_1("#customer_email").val() == undefined ) || ( jQuery_1_7_1("#customer_email").val() == '' ) ) ) {
            lOk = false;
            lErrorMsg = lErrorMsg + "<br>You must enter an email address or uncheck the email alert settings.";
        }

        // check if email notification is active but there's no email
        if ( ( ( jQuery_1_7_1("#notify_text_package").attr("checked") == "checked" ) || ( jQuery_1_7_1("#notify_text_mail").attr("checked") == "checked" ) ) && 
        ( ( jQuery_1_7_1("#customer_mobile_phone").val() == undefined ) || ( jQuery_1_7_1("#customer_mobile_phone").val() == '' ) ) ) {
            lOk = false;
            lErrorMsg = lErrorMsg + "<br>You must enter a mobile number or uncheck the sms alert settings.";
        }

        return lErrorMsg;
    }

    ///////////////////////////////////////////////////////////
    // if user changes to vacant, clear all info
    ///////////////////////////////////////////////////////////
    jQuery_1_7_1("#rental_status_vacant").click( function() {
        jQuery_1_7_1("#customer_name").val( "" ) + 
        jQuery_1_7_1("#customer_address").val( "" ) +
        jQuery_1_7_1("#customer_zip").val( "" ) +
        jQuery_1_7_1("#customer_home_phone").val( "" ) +
        jQuery_1_7_1("#customer_mobile_phone").val( "" ) +
        jQuery_1_7_1("#customer_email").val( "" ) +
        jQuery_1_7_1("#business_name").val( "" ) +
        jQuery_1_7_1("#business_address").val( "" ) +
        jQuery_1_7_1("#business_zip").val( "" ) +
        jQuery_1_7_1("#business_phone").val( "" ) +
        jQuery_1_7_1("#notify_email_package").attr("checked", false ) +
        jQuery_1_7_1("#notify_text_package").attr("checked", false ) +
        jQuery_1_7_1("#notify_email_mail").attr("checked", false ) +
        jQuery_1_7_1("#notify_text_mail").attr("checked", false ) +
        jQuery_1_7_1("#id_mailbox_size").val( "" ) +
        jQuery_1_7_1("#id_rental_period").val( "" ) +
        jQuery_1_7_1("#renewal_date").val( "" ) +
        jQuery_1_7_1("#price_override").val( "" ) +
        jQuery_1_7_1("#store_notes").val( "" );
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-25T17:45:47.457

如果您对项目使用编译，则可以考虑在入口点顶部添加

```
import 'core-js' 
```

目前[core-js polyfill 库](https://www.npmjs.com/package/core-js)是实现跨浏览器支持的最简单方法

# iphone - _NSCFConstantString CGImage]：发送到实例的无法识别的选择器

> ID：13077460
> 
> 赞同：1
> 
> 时间：2012-10-25T21:20:00.137
> 
> 标签：iphone, ios6

应用程序因错误而崩溃`_NSCFConstantString CGImage]: unrecognized selector sent to instance`

尝试使用此代码的应用程序将图像保存到相册时

```
int currentimage = _imageScrollView.contentOffset.y / [pictures count];
UIImage *imageToShow = [pictures objectAtIndex:currentimage];

UIImageWriteToSavedPhotosAlbum(imageToShow, self, @selector(image: didFinishSavingWithError:contextInfo:), nil); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:46:51.447

根据您在评论中提供的信息，您正在使用指向 NSString（数组中的元素）的 UIImage 引用（“imageToShow”），这就是当 imageToShow 收到 CGImage 选择器时崩溃的原因。

要解决这个问题，您必须将 UIImage 引用放入数组中的 UIImage 对象。

```
UIImage *image0 = [UIImage imageWithContentsOfFile:"image0FullPath.png"];
UIImage *image1 = [UIImage imageWithContentsOfFile:"image1FullPath.png"];
pictures = [[NSArray alloc] initWithObjects:image0, image1, nil]; 
```

如果图像在 mainbundle 中，您可以使用 imageNamed 代替 imageWithContentsOfFile。imageNamed 仅接收文件名作为输入，并在 mainbundle 中搜索它。imageWithContentsOfFile 需要完整路径。

祝你好运！

# c# - 如何在 C# 中编辑其他表单的属性？

> ID：13077464
> 
> 赞同：-2
> 
> 时间：2012-10-25T21:20:30.757
> 
> 标签：c#

在 Form1 上，我想制作一个按钮来打开/关闭 Form2 的标签的可见性（可见真或假）。非常感谢，我是初学者！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:54:45.877

首先，在 Form2 上，将标签更改`Modifiers`为`public`.

此代码假定同时打开的只有 Form1 和 Form2。该`Application.OpenForms[]`数组包含当前打开的表单，因此您可以从其他表单对象访问它们。

如果您想要一个开关按钮，则创建一个按钮单击事件处理程序，例如：

```
 public partial class Form1 : Form
 {
    Namespace.Form2 form2 = (Namespace.Form2)Application.OpenForms[1];

    //Single Button event handler    
    private void onOffClick(object sender, EventArgs e)
    {
           form2.LableName.Visible = !form2.LabelName.Visibility;
    }
} 
```

现在，如果您想要一个开和一个关按钮，那么为每个按钮创建一个事件处理程序。

```
public partial class Form1 : Form
{
    Namespace.Form2 form2 = (Namespace.Form2)Application.OpenForms[1];

    //On Button event handler    
    private void onClick(object sender, EventArgs e)
    {
           form2.LableName.Visible = true; 
    }

    //off Button event handler    
    private void offClick(object sender, EventArgs e)
    {
           form2.LableName.Visible = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:55:38.033

那么这就是你应该做的。更简单但不推荐的解决方案。我写它只是为了展示它是多么简单：

```
 public partial class Form1 : Form
 {
        Form2 form2;
        public Form1()
        {
            InitializeComponent();
            form2 = new Form2();
            form2.Show();
        }
        private void button1_Click(object sender, EventArgs e)
        {
            bool labelVisible = form2.ToggleLabelVisibility();
        }
 }
public partial class Form2 : Form
{
     public Form2()
     {
        InitializeComponent();
     }

     public bool ToggleLabelVisibility()
     {
         label1.Visible = !label1.Visible;
         return label1.Visible;
     }
} 
```

更好的解决方案应该在 Form2 上调用委托：在 Form1 中仅更改此：

```
private void button1_Click(object sender, EventArgs e)
{
      bool labelVisible = (bool)form2.Invoke(form2.ToggleVisibility);
} 
```

表格2：

```
public partial class Form2 : Form
{
    public delegate bool visibilityToggler();
    public visibilityToggler ToggleVisibility;

    public Form2()
    {
        InitializeComponent();
        ToggleVisibility = new visibilityToggler(ToggleLabelVisibility);
    }
    public bool ToggleLabelVisibility()
    {
        label1.Visible = !label1.Visible;
        return label1.Visible;
    }
} 
```

我必须说这是老派，我相信还有很多其他方法可以做到这一点，特别是从 C# 4.0 开始，但这就是我多年来的做法。

# mysql - 在 Windows Azure 网站上增加 ClearDB MySQL 的 max_user_connections

> ID：13077465
> 
> 赞同：3
> 
> 时间：2012-10-25T21:20:34.297
> 
> 标签：mysql, azure

目前，带有来自**ClearDB的****MySQL**数据库的**Windows Azure 网站**似乎有4 个限制。这似乎很愚蠢。**您可以扩展大型**服务器的多个实例（4 核，7GB 内存），但有什么意义呢？**如果将其设置为可怜的值 4**，您的瓶颈几乎总是 max_user_connections 。这可以改变吗？****`max_user_connections`****

 ******* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T22:28:09.923

我没有使用 Azure 和 cleardb，但是当我查看 cleardb 网站时，我看到最多 4 个用户在使用免费计划。也许你需要一个更高的计划？

[https://www.cleardb.com/store/azure](https://www.cleardb.com/store/azure)

```
mercury plan: Connections up to 4 (free)
venus plan: Connections up to 15
saturn plan: Connections up to 30
jupiter plan: Connections up to 40 
```******

# php - 如果 $var 仅包含（AZ、az、0-9 和 -），则使用 preg_match 返回 true

> ID：13077468
> 
> 赞同：0
> 
> 时间：2012-10-25T21:20:44.007
> 
> 标签：php, preg-match

> **可能重复：**
> [字母、数字和 - _ 的正则表达式](https://stackoverflow.com/questions/3028642/regular-expression-for-letters-numbers-and)

**如果 $var 仅包含（ AZ**、**az**、**0-9**和**-**） ，我想返回 true

类似的东西：（这个 preg_match 是检查 $var 是否是邮件，但我需要上面的）

```
if (!preg_match("/^[-!#$%&\'*+\\.\/0-9=?A-Z^_`{|}~]+@([-0-9A-Z]+\.)+([0-9A-Z]){2,4}$/i", $var))
    return false;
return true; 
```

有任何想法吗？我是 preg_match 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:24:53.503

您需要将此 preg_match 与您提供的代码一起使用：

```
preg_match("/^[A-Z0-9-]+$/i", $var) 
```

`$var`如果仅包含*（AZ、az、0-9 和 -）*并且长度至少为 1 个字符，它将匹配。如果您还想匹配空字符串，请将`+`.`*`

# r - hclust 大小限制？

> ID：13077476
> 
> 赞同：2
> 
> 时间：2012-10-25T21:20:59.057
> 
> 标签：r, cluster-analysis, data-mining, hclust

我是 R 新手。我正在尝试在大约 50K 项上运行 hclust()。我有 10 列要比较和 50K 行数据。当我尝试分配距离矩阵时，我得到：“无法分配 5GB 的向量”。

这个有大小限制吗？如果是这样，我该如何去做这么大的事情？

**编辑**

我最终增加了 max.limit 并将机器的内存增加到 8GB，这似乎已经修复了它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T06:41:10.087

经典的层次聚类方法具有`O(n^3)`运行时和`O(n^2)`内存复杂性。所以是的，它们对大型数据集的扩展性非常糟糕。显然，任何需要实现距离矩阵的东西都在`O(n^2)`或更糟。

请注意，有一些层次聚类的特殊化，例如在 中运行的 SLINK 和 CLINK `O(n^2)`，并且根据实现也可能只需要`O(n)`内存。

您可能想研究更现代的聚类算法。任何运行`O(n log n)`或更好的东西都应该适合你。*不*使用层次聚类有很多充分的理由：通常它对噪声相当敏感（即它并不真正知道如何处理异常值）并且对于大型数据集很难解释结果（树状图很好，但是仅适用于小型数据集）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T22:03:31.210

大小限制是由你的硬件和软件设置的，你没有给出足够的细节来说明更多。在具有足够资源的机器上，您不会收到此错误。为什么不在潜入泳池深处之前尝试 10% 的样本呢？也许从以下开始：

```
reduced <- full[ sample(1:nrow(full), nrow(full)/10 ) , ] 
```

# javascript - 使用 busterjs 进行测试时如何触发 DOM 事件

> ID：13077477
> 
> 赞同：0
> 
> 时间：2012-10-25T21:20:58.577
> 
> 标签：javascript, unit-testing, dom-events, buster.js

在无头浏览器中运行时如何触发元素上的 DOM 事件。我知道我可以使用 jQuery `trigger`，但由于我不用于这个项目，我也不想在测试中使用它。

# html - 仅将文本与带有阴影框和角的图标垂直对齐

> ID：13077478
> 
> 赞同：0
> 
> 时间：2012-10-25T21:21:01.337
> 
> 标签：html, css

我已经创建了一个按钮，这就是 HTML 的显示方式，如下所示：

```
<div class="blue_text"><button class="blue_small" id="blue_small"></button> View this video instead.</div> 
```

**CSS如下。**在不更改现有标记的情况下垂直对齐的文本：

```
#blue_text{ color:#48c4d2; font-size:15px; font-family:opensansitalic;} 
```

使用它来垂直对齐按钮而不更改现有标记。

```
​button {
vertical-align:middle;
} 
```

按钮 CSS 总数：

```
.blue_small {
 height: 40px;
width: 40px;
margin-left:16px;
margin-bottom:1px;
background-color:#fff;
-moz-border-radius: 50%;
-webkit-border-radius: 50%;
border-radius: 50%;
border: 3px solid #fff;
background:url(../images/index_video_small2.svg) no-repeat 5px 7px;
-webkit-box-shadow: 0px 2px 6px rgba(64,80,85,0.8);  
-moz-box-shadow: 0px 2px 6px rgba(64,80,85,0.8);
box-shadow: 0px 2px 6px rgba(64,80,85,0.8);
color:#48c4d2; font-size:15px;
    font-family:opensansitalic;} 
```

我想将以上所有内容与青色阴影框组合成 CSS 如下？我从来没有试过这个。

[对齐顶部 http://www.kerrydeaf.com/shade2.png](http://www.kerrydeaf.com/shade2.png "工具提示")

更新：我在另一个容器的底部有这个 < div ></ div > 但有可见的间隙并试图缩小间隙但没有成功？我正在使用当前的 < div ></ div >，如下所示。

```
<div class="blue_text"><button class="blue_small" id="blue_small"></button> View this video instead.</div> 
```

这是一个可见的差距，如下所示：

[对齐顶部 http://www.kerrydeaf.com/shade4.png](http://www.kerrydeaf.com/shade4.png "工具提示")

我希望改用这个**< div class="blue_text" > 查看这个视频。</div >**用边距“0”来缩小差距，如下所示。

[对齐顶部 http://www.kerrydeaf.com/shade3.png](http://www.kerrydeaf.com/shade3.png "工具提示")

更新星期五下午 2 点：谢谢你，这是一种享受。它转到浏览器窗口的底部。我希望蓝色框在 DIV 标签之间关闭，例如下面的这个 DIV 标签。这个**div class="toogle_wrap"**是一个 DIV 容器，我在其中突出显示了一个要关闭的间隙，如下所示。将至少有五个**div class="toogle_wrap"**，这是下面的一个**div class="toogle_wrap"**，因此每个差距都需要缩小。

```
 <div class="toogle_wrap">
    <div class="trigger"><a href="#"><span class="trig">1.</span> Deaf person's attention</a></div>
    <div class="toggle_container"> 
    <ul class="lists">
    <li>Learn <span class="bold">how to get</span> a Deaf person's attention.</li>
    <li>Take a step-by-step process.</li>
    <li>Approaching a Deaf and your approach may suggest your intention to communicate.</li>
    <li>You can also <span class="bold">wave</span> to get eye contact or <span class="bold">tap</span> the person gently on the shoulder.</li>
    <!--<li><span class="bold">Watch a video instead:</span> <span class="typicons">Z</span>  <span class="typicn"<h5>Z</h5></span> </li>-->
    </ul>
    <div class="blue_text"><button class="blue_small" id="blue_small"></button> Available in video.</div>
            <<<<<<<<<< The gap is here to close here >>>>>>>>.
            <<<<<<<<<< The gap is here to close here >>>>>>>>.
            <<<<<<<<<< The gap is here to close here >>>>>>>>.
            <<<<<<<<<< The gap is here to close here >>>>>>>>.
            <<<<<<<<<< The gap is here to close here >>>>>>>>.
    </div>
  </div> 
```

周五晚上 10 点更新。这是 DIV 的示例。哪个DIV是**位置：相对**应该进入？

[对齐顶部 http://www.kerrydeaf.com/div.png](http://www.kerrydeaf.com/div.png "工具提示")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:32:30.417

在这里查看我的工作示例：http: [//jsfiddle.net/2x6ub/3/](http://jsfiddle.net/2x6ub/3/)

```
div.toggle_container { 
   position: relative;  // this makes the blue_text div being able to align to bottom
   border: 1px solid #000; height: 300px; // this is just to test, remove or adjust
}

.blue_text{ 
    background:#48c4d2; 
    color:#fff; 
    font-size:20px; 
    font-family:opensansitalic; 
    width:400px; 
    font-style:italic; 
    padding:20px; 
    border-top-left-radius:20px;
    border-top-right-radius:20px;
    -moz-border-top-left-radius:20px;
    -moz-border-top-right-radius:20px;
    -webkit-border-top-left-radius:20px;
    -webkit-border-top-right-radius:20px;

    /* to align to bottom of parent container */
    position: absolute; 
    bottom: 0px;

 } 
```

# java - 有效地计算乘积 a * b² * c³ ...

> ID：13077487
> 
> 赞同：13
> 
> 时间：2012-10-25T21:21:43.773
> 
> 标签：java, math, biginteger, arbitrary-precision

计算产品的最有效方法是什么

> *a ¹ b ² c ³ d ⁴ e ⁵ ...*

假设平方的成本大约是乘法的一半？操作数的数量小于 100。

对于乘法时间与操作数长度的平方成正比（如`java.math.BigInteger`）的情况，是否还有一种简单的算法？

* * *

第一个（也是唯一的）答案是完美的操作数量。

有趣的是，当应用于 sizable 时`BigInteger`，这部分根本无关紧要。即使在没有任何优化的情况下计算*abbcccddddeeeee 也*需要大约相同的时间。

大部分时间花在最后的乘法上（`BigInteger`没有实现更智能的算法，如 Karatsuba、Toom-Cook 或 FFT，所以时间是二次的）。重要的是确保中间被乘数的大小大致相同，即给定数字*p, q, r, s*的大小大致相同，计算*(pq) (rs)*通常比*((pq) r) s*快。对于几十个操作数，速度比似乎约为 1:2。

### 更新

在 Java 8 中，在`BigInteger`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T22:01:38.200

我绝对不知道这是否是最佳方法（尽管我认为它是渐近最佳的），但是您可以通过`O(N)`乘法来完成所有操作。您将`a * b^2 * c^3`这样的参数分组：`c * (c*b) * (c*b*a)`. 在伪代码中：

```
result = 1
accum = 1
for i in 0 .. arguments:
  accum = accum * arg[n-i]
  result = result * accum 
```

我认为它是渐近最优的，因为你必须使用`N-1`乘法来乘以`N`输入参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-21T07:12:20.133

如[2012 年 10 月 26 日编辑中所述](https://stackoverflow.com/revisions/13077487/3)：
由于操作数大小的乘法时间超线性，保持操作数大小以进行类似的长操作将是有利的（特别是如果唯一可用的 Tom-Cook 是 tom-2 （唐叶））。如果不进行全面优化，将操作数放入队列中，允许按增加（显着）长度的顺序弹出它们，看起来不错。
再说一次，有一些特殊情况：0，2 的幂，乘法，其中一个因子（否则）是“微不足道的”（“long-by-single-digit multiplication”，与因子长度之和成线性关系）。
并且平方比一般乘法更简单/更快（问题建议假设 ½），这将建议以下策略：

*   在预处理步骤中，
    如果遇到 0，则计算由指数结果 0 加权的尾随零
*   删除尾随零，
    如果没有剩余值，则丢弃 1 结果 1 的结果值
*   查找并组合多次出现的值
*   设置允许提取“最短”号码的队列。对于每一对（数字，指数），插入乘方乘[幂的因子](https://en.m.wikipedia.org/wiki/Exponentiation_by_squaring)
*   可选：结合“微不足道的因素”（见上文）并重新插入
    不知道如何去做。假设长度为 12 的因子是微不足道的，初始因子的长度为 1、2、…、10、11、12、…、n。最佳情况下，您将 1+10、2+9、... 组合为 12 中的 7 个微不足道的因素。组合最短为 3、6、9、12 为 12 中的 8
*   提取最短的因子对，相乘并在只有一个数字时重新插入
    ，结果是在第一步中添加零

（如果因式分解很便宜，那么它必须尽早进行才能从便宜的平方中获得最大收益。）

# python - python中的数字金字塔

> ID：13077491
> 
> 赞同：2
> 
> 时间：2012-10-25T21:22:02.333
> 
> 标签：python, numbers

编写一个程序，提示用户输入一个从 1 到 15 的整数并显示一个金字塔，如以下示例运行所示：

```
 1

          2 1 2

        3 2 1 2 3

      4 3 2 1 2 3 4 

    5 4 3 2 1 2 3 4 5

  6 5 4 3 2 1 2 3 4 5 6 

7 6 5 4 3 2 1 2 3 4 5 6 7 
```

我有以下内容：

```
num = eval(raw_input("Enter an integer from 1 to 15: "))

if num < 16:

      for i in range(1, num + 1):
          # Print leading space
          for j in range(num -  i,  0,  -1):
               print(" "),
          # Print numbers      
          for j in range(i, 0, -1):
               print(j),
          for j in range(2, i + 1):
               print(j),
           print("") 
else: 
 print("The number you have entered is greater than 15.") 
```

对于大于或等于 10 的数字，这会产生错位。

我试过 print(format(j, "4d")) 并且所有的数字都没有对齐。

有小费吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:43:04.523

为数字使用前导空格（“01” - “09”、“10”、...）

```
num = eval(raw_input("Enter an integer from 1 to 15: "))                                                                                           

def as_str(i):
    s = ""
    if i <10: s = " "
    return s + str(i)

#num = 15                                                                                                                                           

allrows = ""
for j in range(1,num+2):

    #leading spaces                                                                                                                                 
    row = " "*3*(num-j+1)

    #backward                                                                                                                                       
    for i in range(j-1,1,-1):
        s = as_str(i)
        row+=s + " "

    #forward                                                                                                                                        
    for i in range(1,j):
        s = as_str(i)
        row+=s + " "

    row +="\n"
    allrows +=row

print allrows 
```

输出

```
 1 
                                        2  1  2 
                                     3  2  1  2  3 
                                  4  3  2  1  2  3  4 
                               5  4  3  2  1  2  3  4  5 
                            6  5  4  3  2  1  2  3  4  5  6 
                         7  6  5  4  3  2  1  2  3  4  5  6  7 
                      8  7  6  5  4  3  2  1  2  3  4  5  6  7  8 
                   9  8  7  6  5  4  3  2  1  2  3  4  5  6  7  8  9 
               10  9  8  7  6  5  4  3  2  1  2  3  4  5  6  7  8  9 10 
            11 10  9  8  7  6  5  4  3  2  1  2  3  4  5  6  7  8  9 10 11 
         12 11 10  9  8  7  6  5  4  3  2  1  2  3  4  5  6  7  8  9 10 11 12 
      13 12 11 10  9  8  7  6  5  4  3  2  1  2  3  4  5  6  7  8  9 10 11 12 13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:01:43.127

使用字符串格式，它适用于任何值`n>=1`：

```
num=int(raw_input())

max_width=len(" ".join(map(str,range(num,0,-1)))+" ".join(map(str,range(2,num+1))))+1
#max_width is the maximum width, i.e width of the last line

print "{0:^{1}}".format("1",max_width)      #print 1 , ^ is used to place the
                                            #string in the center of the max_width
for i in range(2,num+1):   #print rest of the numbers from 2 to num
    range1=range(i,0,-1)
    strs1=" ".join(map(str,range1))
    range2=range(2,i+1)
    strs2=" ".join(map(str,range2))
    print "{0:^{1}}".format(" ".join((strs1,strs2)),max_width) # use ^ again with max_width 
```

**输出：**

```
monty@monty-Aspire-5050:~$ python so27.py
5
        1        
      2 1 2      
    3 2 1 2 3    
  4 3 2 1 2 3 4  
5 4 3 2 1 2 3 4 5
monty@monty-Aspire-5050:~$ python so27.py
10
                   1                   
                 2 1 2                 
               3 2 1 2 3               
             4 3 2 1 2 3 4             
           5 4 3 2 1 2 3 4 5           
         6 5 4 3 2 1 2 3 4 5 6         
       7 6 5 4 3 2 1 2 3 4 5 6 7       
     8 7 6 5 4 3 2 1 2 3 4 5 6 7 8     
   9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9   
10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10
monty@monty-Aspire-5050:~$ python so27.py
20
                                                 1                                                 
                                               2 1 2                                               
                                             3 2 1 2 3                                             
                                           4 3 2 1 2 3 4                                           
                                         5 4 3 2 1 2 3 4 5                                         
                                       6 5 4 3 2 1 2 3 4 5 6                                       
                                     7 6 5 4 3 2 1 2 3 4 5 6 7                                     
                                   8 7 6 5 4 3 2 1 2 3 4 5 6 7 8                                   
                                 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9                                 
                              10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10                              
                           11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11                           
                        12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12                        
                     13 12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12 13                     
                  14 13 12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12 13 14                  
               15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15               
            16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16            
         17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17         
      18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18      
   19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19   
20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:04:22.343

这是更紧凑的解决方案：

```
num = eval(raw_input("Enter an integer from 1 to 15: "))                                                                                           
allrows = ""
for j in range(1,num+2):

    #leading spaces                                                                                                                                 
    formatter = lambda x: str(x).ljust(3)
    #shift to left
    row =  " "*4*(num+2-j)
    #count backward
    row+=" ".join(map(formatter, range(1,j)[-1::-1])) + " "
    #count forward
    row+= " ".join(map(formatter, range(2,j))) + '\n'
    allrows +=row

print allrows 
```

此代码输出：

```
 1   
                                        2   1   2  
                                    3   2   1   2   3  
                                4   3   2   1   2   3   4  
                            5   4   3   2   1   2   3   4   5  
                        6   5   4   3   2   1   2   3   4   5   6  
                    7   6   5   4   3   2   1   2   3   4   5   6   7  
                8   7   6   5   4   3   2   1   2   3   4   5   6   7   8  
            9   8   7   6   5   4   3   2   1   2   3   4   5   6   7   8   9  
        10  9   8   7   6   5   4   3   2   1   2   3   4   5   6   7   8   9   10 
    11  10  9   8   7   6   5   4   3   2   1   2   3   4   5   6   7   8   9   10  11 
12  11  10  9   8   7   6   5   4   3   2   1   2   3   4   5   6   7   8   9   10  11  12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:43:12.940

num = eval(raw_input("输入一个 1 到 15 的整数："))

如果数字 < 16：

```
for i in range(1, num + 1):
    # Print leading space
    for j in range(num -  i,  0,  -1):
        print("    "),
    # Print numbers      
    for j in range(i, 0, -1):
        print(format(j, "4d")),
    for j in range(2, i + 1):
        print(format(j, "4d")),
    print 
```

else: print("您输入的数字大于15。")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T22:14:46.083

这不是代码高尔夫条目，但它确实显示了两个基地。注意十进制版本有 3 个空格缩进，而十六进制版本只有 2 个空格缩进。

```
def triangle(n):
    def indent(i):
        return ' '*3*(n-(i+1))
    def row(i):
        lhs = ['%2d' % j for j in range(i,0,-1)]
        rhs = lhs[:-1]
        rhs.reverse()
        return lhs+rhs
    rows = [indent(i)+' '.join(row(i)) for i in range(n)]
    return '\n'.join(rows)

def triangle_hex(n):
    def indent(i):
        return ' '*2*(n-(i+1))
    def row(i):
        lhs = ['%x' % j for j in range(i,0,-1)]
        rhs = lhs[:-1]
        rhs.reverse()
        return lhs+rhs
    rows = [indent(i)+' '.join(row(i)) for i in range(n)]
    return '\n'.join(rows)

if __name__=='__main__':
    print triangle(11)
    print triangle_hex(15) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-26T12:34:19.640

这是最干净，最快捷的方法：

```
num = 5
space = " "

for i in range(1, num+1):
    for num_of_spaces in range(i+1, 1, -num):
        x = (i-1)
        spaces = space*(num-x)
        print(spaces, end="")
    for inv_rec in range(i, 1, -1):
        print(inv_rec, end="")
    for rec in range(1, i+1):
        print(rec, end="")
    print("") 
```

输出是：

```
 1
   212
  32123
 4321234
543212345 
```

65432123456 7654321234567 876543212345678

进程以退出代码 0 结束

# c# - C# 表单中的 SQL 搜索

> ID：13077497
> 
> 赞同：0
> 
> 时间：2012-10-25T21:22:27.703
> 
> 标签：c#, sql

我正在尝试设置一个简单的 c# 表单来搜索我们的一个 SQL 数据库。当我尝试调试时，我不断收到“SQLException was Unhandled”错误。我知道 SQL 语句有效，我可以在我的服务器上正常运行它。我认为这是我尝试从文本框中输入数据的方式的问题。有人可以给我一些指导吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace USER_Lookup
{
    public partial class Search : Form
    {
        DataSet ds = new DataSet();
        SqlConnection cs = new SqlConnection("Data Source=PC01; Initial Catalog=DB01; Integrated Security=TRUE");
        SqlDataAdapter da = new SqlDataAdapter();

        public Search()
        {
            InitializeComponent();
                    }

        private void button_Search_Click(object sender, EventArgs e)
        {
            string badgeCode = textBox_badgeCode.Text.Trim();
            da.SelectCommand = new SqlCommand
                ("SELECT db01.dbo.staff.lastname AS 'Last Name', db01.dbo.staff.firstname AS 'First Name', db01.dbo.staff.badgecode AS 'User ID', db01.dbo.staffrole.name AS 'Role' FROM db01.dbo.staff, db01.dbo.staffrole, db01.dbo.staff_staffrole WHERE db01.dbo.staff.badgecode =" + badgeCode + "AND db01.dbo.staff.id = db01.dbo.staff_staffrole.staff_id AND db01.dbo.staff_staffrole.staffrole_id = db01.dbo.staffrole.id", cs);
            ds.Clear();
            da.Fill(ds);

            dg.DataSource = ds.Tables[0];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:24:41.490

我相信您需要在 badgeCode 周围加上单引号。此外，您在下一个*AND*之前缺少一个空格。试试这个：

```
...staff.badgecode = '" + badgeCode + "' AND... 
```

请记住，您的代码包含 SQL 注入攻击漏洞。您应该使用参数来提供徽章代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:25:03.080

这里没有空间

```
... db01.dbo.staff.badgecode =" + badgeCode + "AND db01.dbo.staff.id ....
                                              ^^^^ 
```

您也在这里使用`maclive.dbo.staff.lastname`，但该数据库没有 FROM 或 JOIN
（错字？）

而且，如果`db01.dbo.staff.badgecode`是一个 varchar 字段，那么您需要在您的 badgeCode 变量周围加上单引号。但是，字符串连接形成 SQL 命令是[Sql Injection 攻击的必经之路。](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)
更改代码以使用参数

```
da.SelectCommand = new SqlCommand 
    ("SELECT maclive.dbo.staff.lastname AS 'Last Name', " + 
     "db01.dbo.staff.firstname AS 'First Name', db01.dbo.staff.badgecode AS 'User ID',  "+ 
     "db01.dbo.staffrole.name AS 'Role' " + 
     "FROM db01.dbo.staff, db01.dbo.staffrole, db01.dbo.staff_staffrole " + 
     "WHERE db01.dbo.staff.badgecode =@badge AND db01.dbo.staff.id = " + 
     "db01.dbo.staff_staffrole.staff_id AND db01.dbo.staff_staffrole.staffrole_id = " + 
     "db01.dbo.staffrole.id", cs);

da.SelectCommand.Parameters.AddWithValue("@badge", badgecode); 
```

# php - 在表单发布完成对目标执行文件上传后，从 iframe 获取数据

> ID：13077499
> 
> 赞同：6
> 
> 时间：2012-10-25T21:22:33.163
> 
> 标签：php, javascript, html, iframe

我有一个表单，当表单发布到 PHP 脚本时，它使用 target 属性来定位 iframe。这部分工作正常，但我需要根据 php 脚本将放入 iframe 的几个结果来做一些事情。

我正在考虑做的是当 PHP 脚本完成发布后，它会回显一些包含各种元素的隐藏输入字段，例如帖子的状态，是否成功以及如果成功发布最终结果是什么。

但是，如果我这样做，它会将其放入 iframe 中，因此主网页将无法访问隐藏的输入字段。

主网页如何能够访问这些隐藏的输入字段，以便主网页可以执行某些操作，即使网页中的 div 显示特定的错误消息或其他内容。

另一件事是，一旦我知道如何从隐藏的输入字段中获取数据，我怎么知道何时可以去获取值。我在想，当表单通过 JavaScript`document.forms["myform"].submit()`代码发布时，我可以做一个 while 循环并检查另一个隐藏输入字段状态是否设置为完成，一旦它说完成，我就可以从隐藏输入字段中获取值.

我不确定我建议的方式是否正确或做我想要实现的目标，或者是否有更好的方法。

**更新**

我已经尝试过@lanzz 的建议，但似乎没有奏效。以下是我尝试过的。

```
$("iframe#image_upload_frame").on('load', function()
{
   var iframeBody = this.contentDocument.body;

   var data = $(iframeBody).find("#imageDirectory");
   alert("data: " + data);
}); 
```

以下是 iframe 的定义方式

```
<iframe id="image_upload_frame" name="image_upload_frame"></iframe> 
```

我在 iframe 内的 php 脚本中回显了一个隐藏的输入字段。

```
echo '<input type="hidden" id="imageDirectory" value="'.$imageDirectory.'" />'; 
```

回声确实有效，因为当我看到查看 iframe 源时，我可以看到隐藏的输入，但是，警报对话框永远不会显示，好像某些东西不工作一样。谷歌浏览器开发控制台也没有报告错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:59:21.603

如果我理解正确 - 一旦将值加载到 iframe 中，您需要父窗口中 iframe 中的值。我会将javascript添加到调用父级并执行函数的iframe中。

在主框架中：

```
function incomingValue(val) {
   alert(val)
} 
```

在生成的 iframe 中的某处：

```
<script type="text/javascript">
 parent.incomingValue("Hello world");
</script> 
```

假设两个帧源共享相同的域，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:28:52.743

您可以使用[postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)在 iframe 与其父级之间进行跨文档通信。

看：

[http://viget.com/extend/using-javascript-postmessage-to-talk-to-iframes](http://viget.com/extend/using-javascript-postmessage-to-talk-to-iframes)

[http://javascript.info/tutorial/cross-window-messaging-with-postmessage](http://javascript.info/tutorial/cross-window-messaging-with-postmessage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:10:01.983

由于您在同一个域上运行，因此您的主页的 Javascript 可以轻松访问以下内容`<iframe>`（示例使用 jQuery，您可以重写为您计划使用的任何库）：

```
$('iframe#the-id-of-the-iframe').on('load', function() {
    var iframeWin = this.contentWindow;
    var iframeBody = this.contentDocument.body;

    // access global JS vars defined in the iframe:
    var someIframeVariable = iframeWin.globalIframeVariable;

    // or, directly access elements in the iframe:
    var someIframeElement = $(iframeBody).find('#element-id-inside-iframe');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:16:29.007

不久前，我写了一段代码来使用一些 javascript 和两个 iframe 上传图片。对我来说最重要的是预览图片。也许它会帮助你：

HTML：

```
<div id='fakebutton' onclick='select_pic()'>Just a button to select a pic</div>
<iframe src='uploadform.php' name'pic_frame'></iframe>
<iframe src='#' name='target_frame'></iframe> 
```

两个 iframe 都是隐藏的。目标框架没有源（或空页面，如果您愿意）。

uploadform.php 包含一个表单：

```
<form id='upload_form' action='dosomething.php' method='post' enctype='multipart/form-data' target='target_frame' onsubmit=''>
<input id='realfoto' name='realfoto' type='file' onchange='parent.foto_upload(window.frameElement.id)'>
</form> 
```

然后是一些javascript：首先当用户点击假的时候触发文件浏览器

```
function select_pic(){
   b=window.frames['pic_frame'];
   b.document.upload_form.realfoto.click();
   } 
```

然后是实际上传图片的部分，由输入元素中的 onchange() 触发：

```
function foto_upload(o){
  var b=o;
  o=getElementById(o);
  if(o.contentDocument ) {o = o.contentDocument;}
  else if(o.contentWindow ){o = o.contentWindow;}
  else{return false;}
  if(test_pic(o,b)){ //test if it is really a pic
     getObj('foto_tmpdir').value=o.getElementById('tmp_dir').value;
     o.getElementById('doctype_nr').value=b;
     o.fotoform.submit();
     }
  else{
return false;}
} 
```

在 dosomething.php 中，我对上传的图片执行操作（重命名、调整大小等）。它包含几行javascript：

```
$a = 'upload was succes';
$b = 'my_image_name';
$c = 'whatever you want to put here';  
?>
  <script type="text/javascript">
  window.top.window.smurf(<?php echo "'$a','$b','$c'" ?>);</script>
  <?php 
```

如果您在 javascripty 中创建一个名为 smurf(a,b,c) 的函数，您可以通过 php 脚本传递您想要的任何内容。对我来说最重要的事情之一是我现在可以将上传图片的文件名传递给 javascript，并使用它来更改 image.src 以进行预览。希望你可以使用它的一些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T15:52:56.757

您的 iframe 源页面应该有一个 javascript 调用函数，而不是隐藏字段。该函数将调用打开器窗口（您的主页），然后执行您想要的任何功能。作为蓝图，请看以下内容：

```
//in iframe src.php

<?php
if ($something){
?>
<script>
function doSomethingWithOpenerWindow(){
opener.document.write('hi);
}
doSomethingWithOpenerWindow()
</script>
<?php
}
else{
?>
<script>
function doAnotherSomethingWithOpenerWindow(){
opener.document.write('hi);
}
doAnotherSomethingWithOpenerWindow()
</script>  

<?php
}
?> 
```

# javascript - 服务器端函数由客户端调用，无论 TRUE 或 FALSE

> ID：13077504
> 
> 赞同：0
> 
> 时间：2012-10-25T21:22:53.097
> 
> 标签：javascript, asp.net, vb.net

在gridview 中，我有一个模板列，其中有一个linkBut​​ton 列。单击链接按钮列时，它会触发客户端，如果为 TRUE，则应调用服务器端事件。但不知何故，在这两种情况下都调用了服务器端事件 - TRUE 或 FALSE。请让我知道，如果我错过了什么......

标记代码如下 -

```
<asp:TemplateField HeaderText="Disable/Enable" ItemStyle-Width="10%"  HeaderStyle-HorizontalAlign="Left"#
    <ItemTemplate>
        <asp:LinkButton runat="server" ID="ableDisableLaborCode" CommandName="linkButtonClick" CommandArgument='#%# Eval("coLaborCodeID") %#'##/asp:LinkButton#
    </ItemTemplate>
</asp:TemplateField> 
```

这是注册客户端事件的地方

```
Private Sub gridVwCoLaborCodes_RowDataBound(sender As Object, e As     System.Web.UI.WebControls.GridViewRowEventArgs) Handles gridVwCoLaborCodes.RowDataBound
    If (e.Row.RowType = DataControlRowType.DataRow) Then
        Dim _lnk As LinkButton = DirectCast(e.Row.FindControl("ableDisableLaborCode"), LinkButton)
        Dim _drv As DataRowView = DirectCast(e.Row.DataItem, DataRowView)
        _lnk.Text = If(CBoolBit(_drv(Fields.NAME_FIELD_IS_ENABLED_FLAG)), "Disable", "Enable")
        _lnk.OnClientClick = String.Format("return confirm('Are you sure you want to deactivate this labor code ?');")
    End If
End Sub 
```

以下是服务器端事件的代码——

```
Private Sub gridVwCoLaborCodes_RowCommand(sender As Object, e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles gridVwCoLaborCodes.RowCommand
    If e.CommandName = "linkButtonClick" Then
        CoLaborCodeId = CIntNull(e.CommandArgument.ToString())
    End If
End Sub 
```

感谢所有查看和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:31:36.987

尝试以不同的方式分配 javascript 事件：

```
Private Sub gridVwCoLaborCodes_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gridVwCoLaborCodes.RowDataBound
    If (e.Row.RowType = DataControlRowType.DataRow) Then
        Dim _lnk As LinkButton = DirectCast(e.Row.FindControl("ableDisableLaborCode"), LinkButton)
        Dim _drv As DataRowView = DirectCast(e.Row.DataItem, DataRowView)
        _lnk.Attributes.Add("onclick", "return confirm('Are you sure you want to deactivate this labor code ?');")
        lnk.Text = If(CBoolBit(_drv(Fields.NAME_FIELD_IS_ENABLED_FLAG)), "Disable", "Enable")
    End If
End Sub 
```

# asp.net - html text is not properly formatted

> ID：13077505
> 
> 赞同：0
> 
> 时间：2012-10-25T21:22:53.567
> 
> 标签：asp.net, html

I am looking for an output like below using html

Creative agency:(?) *

I am writing the code something like below...

```
 <td class="TextLabelForHeader" width="300px">

     Creative Agency:<h6 id="/contracts/HelpContent/Creative%20Agency.txt">()</h6>
     <asp:RequiredFieldValidator ID="RequiredFieldValidatorCreativeAgency" runat="server"
                                 ControlToValidate="txtCreativeAgency" ErrorMessage="*"  ValidationGroup="VGPageGeneral">
</asp:RequiredFieldValidator>
     </td> 
```

But I am getting the output something like below in broswer...

Creative agency: (?) *

Can please someone help me with this....

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:26:51.970

Header tags, such as `H6` are block elements. Block elements take up the entire width of their containers.

Either:

Make `H6` an inline element using CSS: `h6 {display:inline};`

or

Use the semantically-correct HTML element for this purpose, in this case a `<label>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:39:43.397

You can also replace your h6 with an inline element e.g `<span>`

```
Creative Agency:<span style="font-weight:bold; font-size:14pt" id="/contracts/HelpContent/Creative%20Agency.txt">()</span>
 <asp:RequiredFieldValidator ID="RequiredFieldValidatorCreativeAgency" runat="server"
                             ControlToValidate="txtCreativeAgency" ErrorMessage="*"  ValidationGroup="VGPageGeneral"> 
```

`h1..h6` are block element and they occupy all available space of their container forcing other elements in the container to go to next line.

If I may ask why do you have such a funny `id` on your h6?

# zend-studio - Zend Studio 和 PHPCloud

> ID：13077508
> 
> 赞同：0
> 
> 时间：2012-10-25T21:23:00.510
> 
> 标签：zend-studio

我从头开始创建了一个云应用程序，位于：http: [//jimszend.my.phpcloud.com/](http://jimszend.my.phpcloud.com/)

我的本地驱动器上有零个文件，但我正在尝试使用 Zend Studio 从服务器获取它们。

我发现此页面可以完成此操作，但它不起作用： [http ://www.phpcloud.com/help/studio-remote-system](http://www.phpcloud.com/help/studio-remote-system)

步骤 1\. 我相信是正确的。但我无法确定。步骤 2\. 打开要上传到应用程序容器的 PHP 或 Zend Framework 项目，或创建一个新项目。<--- 我想在我的硬盘上创建一个新项目。

所以第 2 步不知何故不起作用，所以我从 Zend Developer Cloud 转到 File -> New -> PHP Project。

所以我给项目起一个名字：说 ABC 位置是：C:\Users\Jim\Zend\workspaces\DefaultWorkspace 下拉列表中的容器是：[http](http://jimszend.my.phpcloud.com:10082) ://jimszend.my.phpcloud.com:10082 (Id: 4_0 )

现在我点击下方的刷新，我什么也没得到，所以现在我点击添加目标并输入用户名和密码。这个对话框屏幕就是问题所在。我不知道在这里输入什么。这意味着我已经尝试了数百种不同的方法，但我被困在这里。我总是最终单击生成新密钥，然后单击测试连接，由于没有错误，我认为这是正确的。

然后我关闭该屏幕，现在当我单击应用程序的下拉菜单时，没有任何内容被填写。但有时这确实有效，我发现我的应用程序显示“jimszend zend 框架” - 类似这样，但即使我得到这个到目前为止，当我单击完成时，我会遇到某种 Git 故障。

有谁知道使用 PHP Cloud 中的 Zend Studio 下拉“我的文件”的完整证明方法？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:16:49.047

我怀疑您可能没有设置您的公钥/私钥，或者您在此过程中没有提供正确的凭据。我做了以下。

请密切关注此帮助文档。这是来自 phpcloud 人的非常好的文档。

[http://www.phpcloud.com/help/putty-ssh-debug-tunnel](http://www.phpcloud.com/help/putty-ssh-debug-tunnel)

使用 phpcloud 管理员，我创建了一个新的公钥/私钥对（Zend Studio 类型，以 .pem 结尾）。然后我将 .pem 下载到我的 Windows 7 机器上的文件夹中。

接下来从[putty 网站](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)下载这三个应用程序，以帮助您在 putty 和 Zend Studio 中匹配您的私钥/公钥对。对我来说，我希望一切都连接起来，包括 Putty 和 Zend Studio。

-PuttyGen -Pageant -Putty

注意 putty 使用 .ppk 文件类型（不是 .pem），因此我使用 PuttyGen 打开了 .pem 文件并将私钥保存到我从 php 云中保存 .pem 文件的同一位置。我保持相同的文件命名约定，以使事情保持直截了当。所以这两个文件之间的唯一区别是 .pem 和 .ppk。

接下来我打开 Pageant 并使用 Pageant 打开一个存储我的 .ppk 文件。我了解 Pageant 是 Putty 将检查的密钥库，因为它需要打开上锁的门。

接下来，我按照上面 phpcloud 链接中的指南，仔细地建立了一个隧道。

隧道打开后，我启动了 Zend Studio。

从那里我转到 Windows-> 首选项并搜索 SSH2。打开 SSJ2 对话框后，在常规选项卡下，我将 .pem 和 .ppk 添加到路径中。然后在“密钥管理”选项卡对话框下，我使用“加载现有密钥”并加载了我的 .pem 文件。然后我点击了应用。

然后使用 Zend Studio，我创建了一个新的“来自远程服务器的 PHP 项目”。我完成了单击“管理远程服务器”的步骤。对于服务器连接，我输入了以下内容。

JAZZFINGERS.MY.PHPCLOUD.COM

如果系统提示您输入凭据，请不要使用容器凭据，除非它们与您的其他凭据相同。

从那里您还可以测试您的连接。对我来说，这很有效。希望这可以帮助。哦，是的，也读过这个。非常重要和有帮助。

www.phpcloud.com/help/studio-remote-system

-最好的祝愿

# ruby-on-rails - Rails + Amazon s3 + jquery 文件上传：上传进度条不起作用？

> ID：13077509
> 
> 赞同：5
> 
> 时间：2012-10-25T21:23:07.760
> 
> 标签：ruby-on-rails

嗨，我目前正在使用 railscasts jquery 文件上传教程的进度条码 ( [http://railscasts.com/episodes/381-jquery-file-upload](http://railscasts.com/episodes/381-jquery-file-upload) )，在添加 Amazon S3 之前它工作正常。我只使用没有 UI 的 jquery 文件上传的基本版本。

该栏出现了，但它只是一个空的灰色栏（尽管图片完全上传）。这背后有什么原因吗？还有另一种方法可以做到这一点（以便它起作用）？

照片/new.html.erb

```
<div class="clearfix">

<div class="uploadreminder">
    Upload multiple pictures at once or drag them directly to the browser!
</div>
<%= form_for([@user, @album, @photo], :html => { :multipart => true }) do |f| %>

<%= f.file_field :avatar, multiple: true, name: "photo[avatar]" %>

<% end %>

<div class="finisheduploading">
    <%= link_to "Back to album", user_album_path(@user, @album) %>
</div>

<div id="pics">
    <%= render :partial => "photo", :collection => @photos %>
</div>

    #this is the part that is supposed to make the progress bar
<script id="template-upload" type="text/x-tmpl">
<div class="upload">
  {%=o.name%}
  <div class="progress"><div class="bar" style="width: 0%"></div></div>
</div>
</script>
</div> 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require fancybox
//= require 'js/bootstrap.js'
//= require jquery-fileupload/basic
//= require jquery-fileupload/vendor/tmpl
//= require_tree .

$(document).ready(function() {

  $("a.fancybox").fancybox();
  $("a.fancybox").attr('rel', 'gallery').fancybox();

}); 
```

照片.js.coffee

```
jQuery ->
$('#new_photo').fileupload
  dataType: "script"
  add: (e, data) ->
    types = /(\.|\/)(gif|jpe?g|png)$/i
    file = data.files[0]
    if types.test(file.type) || types.test(file.name)
      data.context = $(tmpl("template-upload", file))
      $('#new_photo').append(data.context)
      data.submit()
    else
      alert("#{file.name} is not a gif, jpeg, or png image file")
  progress: (e, data) ->
    if data.context
      progress = parseInt(data.loaded / data.total * 100, 10)
      data.context.find('.bar').css('width', progress + '%') 
```

我的完整代码在这里：[https ://github.com/EdmundMai/pholderbeta/blob/master/app/views/photos/new.html.erb](https://github.com/EdmundMai/pholderbeta/blob/master/app/views/photos/new.html.erb)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:36:01.400

如果有帮助，我写了一个教程：http: [//pjambet.github.com/blog/direct-upload-to-s3/](http://pjambet.github.com/blog/direct-upload-to-s3/)，还有一个现场演示：[http ://direct-upload.herokuapp.com /photos](http://direct-upload.herokuapp.com/photos)代码托管在 github 上：[https ://github.com/pjambet/direct-upload](https://github.com/pjambet/direct-upload)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T07:09:50.890

Ryan 错过了一件事，告诉你必须在你的 css 文件中添加一个样式，如果你查看他的代码，你会在他的 painting.css 文件中找到以下样式。

```
.upload .progress .bar {
  background: none repeat scroll 0 0 #3EC144;
  height: 100%;
} 
```

# c# - 从结构/列表中删除重复项，保留最好的一项

> ID：13077511
> 
> 赞同：1
> 
> 时间：2012-10-25T21:23:14.097
> 
> 标签：c#, .net, linq, duplicate-removal

我有一个经典的从列表/嵌套列表问题中删除重复项。但是，由于我试图遵循的特定规则，解决方案并不简单。我编写了一个可以按需要工作的示例应用程序。但它似乎很笨拙。我正在寻找更多的优雅，如果可能的话，效率更高。也许 LINQ/扩展方法可以提供帮助。有什么建议么？

* * *

```
class Program
{
    static void Main(string[] args)
    {
        var sellers = new List<Seller>()
        {
            new Seller()
            {
                Id = 1,
                Products = new List<Product>()
                {
                    new Product() { Sku = "Alpha", Price = 5.0, Shipping = 2.0 },
                    new Product() { Sku = "Beta", Price = 5.0, Shipping = 2.0 }, // more expensive sku within same seller
                    new Product() { Sku = "Beta", Price = 4.0, Shipping = 2.0 },
                    new Product() { Sku = "Gamma", Price = 8.0, Shipping = 2.0 }
                }
            },
            new Seller()
            {
                Id = 2,
                Products = new List<Product>()
                {
                    new Product() { Sku = "Alpha", Price = 5.0, Shipping = 1.0 },
                    new Product() { Sku = "Beta", Price = 5.0, Shipping = 1.0 },
                    new Product() { Sku = "Gamma", Price = 8.0, Shipping = 2.0 }
                }
            }
        };

        // Eliminate duplicate Products amongst all sellers that have matching "Sku".
        // Rules: 
        // Keep the Product with the lowest price. 
        // If price is equal, keep the product with lower shipping.
        // If shipping is also equal, then keep the product with lowest seller Id.
        // If at the end of all comparisons, a seller ends up with no products, then remove that seller.

        // In this example, I expect to have (not necessarily in this order):
        // 1.{Beta, 4.0, 2.0} // Fred.Beta has a lower price than Bob.Beta
        // 1.{Gamma, 8.0, 2.0} // Fred.Gamma is an identical deal to Bob, but Fred is first in the list
        // 2.{Alpha, 5.0, 1.0} // Bob.Alpha has a lower shipping cost than Fred.Alpha

        var newSellers = new List<Seller>();

        foreach (var seller in sellers)
        {
            foreach (var product in seller.Products)
            {
                // TODO: Possible performance improvement? Check for existing seller & product in newSellers before calling any code below.
                var bestSeller = seller;
                var bestProduct = product;
                FindBestSellerAndProduct(sellers, ref bestSeller, ref bestProduct);
                AddIfNotExists(newSellers, bestSeller, bestProduct);
            }
        }

        newSellers.Sort((x, y) => x.Id.CompareTo(y.Id)); // Ensures the list is sorted by seller id... do I really care?
    }

    private static void FindBestSellerAndProduct(IList<Seller> sellers, ref Seller seller, ref Product product)
    {
        string sku = product.Sku;

        foreach (var s in sellers)
        {
            foreach (var p in s.Products.Where(x => x.Sku == sku))
            {
                if ((product.Price > p.Price) ||
                    (product.Price == p.Price && product.Shipping > p.Shipping) ||
                    (product.Price == p.Price && product.Shipping == p.Shipping && seller.Id > s.Id))
                {
                    seller = s;
                    product = p;
                }
            }
        }
    }

    private static void AddIfNotExists(IList<Seller> sellers, Seller seller, Product product)
    {
        var newSeller = sellers.SingleOrDefault(x => x.Id == seller.Id);
        if (newSeller == null)
        {
            // Add input seller and product if seller doesn't already exist in our list.
            newSeller = new Seller() { Id = seller.Id, Products = new List<Product>() };
            newSeller.Products.Add(product);
            sellers.Add(newSeller);
        }
        else
        {
            var newProduct = newSeller.Products.Find(x => x.Sku == product.Sku);
            if (newProduct == null)
            {
                // Add input product if it doesn't already exist in our list
                newSeller.Products.Add(product);
            }
        }
    }

}

// I cannot modify the below classes.
public sealed class Seller
{
    public int Id;
    public List<Product> Products;
}

public sealed class Product
{
    public string Sku;
    public double Price;
    public double Shipping;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T23:29:57.957

此查询将完成这项工作

```
var query = sellers.SelectMany(s => s.Products.Select(p => new { 
                                                   SellerId = s.Id, 
                                                   Product = p })) // 1
                   .OrderBy(x => x.Product.Price) // 2
                   .ThenBy(x => x.Product.Shipping)
                   .ThenBy(x => x.SellerId)
                   .GroupBy(x => x.Product.Sku) // 3
                   .Select(g => g.First()) // 4
                   .GroupBy(x => x.SellerId) // 5
                   .Select(g => new Seller() {  
                        Id = g.Key,
                        Products = g.Select(x => x.Product).ToList() })
                   .ToList(); 
```

这个怎么运作：

1.  第一步 - 将您的序列展平为匿名类型列表`{ settlerId, product }`
2.  根据您的条件订购顺序 - `price`, `shipping`,`settlerId`
3.  按产品对有序序列进行分组`sku`。它将产生 组`{ settlerId, product }`，其中产品具有相同的`sku`，但可能属于不同的卖家。
4.  从每个组中选择第一个项目。因此，所有组都按您的条件排序，它将为我们提供相同的畅销产品`sku`。
5.  现在我们需要再次创建层次结构。进行分组，并使用所有最畅销的产品（如果有）`sellerId`创建对象。`Seller`如果某个卖家没有畅销产品，则该卖家不会有群组，卖家将被从结果中删除。

# ruby-on-rails-3 - Rails 合并标签

> ID：13077512
> 
> 赞同：1
> 
> 时间：2012-10-25T21:23:18.400
> 
> 标签：ruby-on-rails-3

我需要在文本中插入一个合并标签。例如我有合并标签|NAME|，所以，我想替换|NAME| 在段落的任何部分。例如，如果 |NAME| = 卡洛斯

Lorep ipsum |名称| dorel pored = Lorep ipsum Carlos dorel pored

或者

|姓名| Lorep ipsum dorel 多孔 = Carlos Lorep ipsum dorel 多孔

我怎么能用rails做到这一点？rails 中有一些插件吗？提前致谢

* * *

## 更新

对不起，我想我解释得不好。这不必是硬编码的。用户有一个文本框，他可以在其中决定将合并标签放置在输入文本的任何位置的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:29:04.483

在**控制器**中：

```
@name = 'Carlos' 
```

鉴于：**_**

```
Lorep ipsum <%= @name %> dorel pored 
```

# javascript - Javascript 未定义错误（在 HTML 页面中加载 JSONP）

> ID：13077513
> 
> 赞同：1
> 
> 时间：2012-10-25T21:23:19.010
> 
> 标签：javascript, html, load, jsonp, undefined

我有一个关于将 JSONP 加载到 HTML 中的问题。

这是我的 JSONP 文件：

```
myCallback({
"news": {
    "item": [
        {
            "Title": "IceBridge Preparations Continue",
            "Author": "George Hale, IceBridge Science Outreach Coordinator",
            "Date": "14/09/2012",
            "Intro": "The work of installing IceBridge's science instruments on the NASA DC-8 airborne laboratory continued this week.",
            "Content": "People from the Center for the Remote Sensing of Ice Sheets at the University of Kansas (CReSIS) and from Sander Geophysics Limited (SGL) spent the week installing the aircraft's various radar instruments and the AirGrav gravimeter. With the last of the instruments installed and operational, IceBridge is now ready to start test flights next week. Monday afternoon's schedule includes pilot proficiency flights and on Tuesday and Wednesday IceBridge will carry out instrument check flights."
        },
        {
            "Title": "Preparing the DC-8 for Antarctica 2012",
            "Author": "George Hale, IceBridge Science Outreach Coordinator",
            "Date": "20/09/2012",
            "Intro": "Over the next few weeks the IceBridge team will prepare NASA's DC-8 airborne laboratory for the 2012 Antarctic campaign.",
            "Content": "Long hours in the hangar at NASA's Dryden Flight Research Facility mean that the MCoRDS antenna and Airborne Topographic Mapper have been installed and all ground tests for ATM are complete. Next week, the radar and gravimeter teams will begin their preparation work."
        },
        {
            "Title": "Q&A: Michael Studinger",
            "Author": "Maria-Jose Viñas, Cryospheric Sciences Laboratory Outreach Coordinator",
            "Date": "30/09/2012",
            "Intro": "Michael Studinger is Operation IceBridge’s project scientist.",
            "Content": "He trained as a geophysicist in Germany, his home country, before moving to the U.S. to take a position at the Lamont-Doherty Earth Observatory and then transferring to NASA Goddard Space Flight Center in 2010\. Studinger has been studying polar regions for 18 years, expanding his initial focus on the geology and tectonics of the Antarctic continent to the overall dynamic of polar ice sheets."
        }
    ]
} 
```

})

现在我想将它加载到 HTML 页面中。

我用 Javascript 做到这一点：

```
<script type="text/javascript">

function myCallback(data)
{
    var htmlContent;
    $.each(data.news.item,function(index, item)
    {
    htmlContent += "<article>" + "<h1>" + item.Title + "</h1>";
    htmlContent += "<h2>" + item.Author + "</h2>";
    htmlContent += "<p><i>" + item.Date + "</i></p>";
    htmlContent += "<p>" + item.Intro + "</p>";
    htmlContent += "<p>" + item.Content + "</p>" + "</article>";
    });
    $("#main").html(htmlContent);
} 
```

在我的身体里`<div id="main"></div>`。

这一切都是正确的，但我总是在 html 页面的顶部得到未定义，然后是我的 json 文件中的文本。有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:28:14.423

这个：

```
var htmlContent; 
```

应该是这样的：

```
var htmlContent = ''; 
```

没有值的声明变量是`undefined`. 发生的事情是，当您这样做时：

```
htmlContent += "<article>"; 
```

你基本上是在做`htmlContent = undefined + "<article>"`。JS 强制`undefined`转换为一个字符串以将其添加到另一个字符串。

将变量初始化为空字符串可防止这种形式发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:29:35.193

我不确定这是否会解决它，但您可能需要先初始化 htmlContent 字符串`htmlContent ="";`，然后再附加到它。

# mysql - Pinterest 上的分片 - 究竟是如何完成的

> ID：13077515
> 
> 赞同：3
> 
> 时间：2012-10-25T21:23:27.593
> 
> 标签：mysql, scalability, sharding

我想了解 Pinterest 如何根据[此视频](http://www.youtube.com/watch?v=GW2cnp2tdh8)进行分片，但似乎无法完全了解如何进行。我很感兴趣，因为我想将相同的策略应用于我的应用程序并在 Amazon RDS 之上构建自己的分片。

据我了解：

*   他们决定创建 4096 个虚拟分片
*   多个分片可以映射到一个或多个物理服务器。因此，例如，您可以在刚开始时将所有分片映射到一台服务器

如果我假设以下映射表：

虚拟分片 1 -> 127.0.0.1

虚拟分片 2 -> 127.0.0.1

……

看看他们是如何构建他们的唯一 ID（Shard ID + Type + Local Auto Increment）的，如果我决定添加另一台服务器 12.0.0.2，因为 127.0.0.1 的数据容量越来越大，我想添加更多机器到增加容量？

如何将分片准确映射到新服务器？我知道数据不会根据讲座移动，所以他们怎么可能没有热点。我真的无法理解它是如何完成的，有人可以给我一个好的一步一步的解释吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:27:01.223

[Tumblr 有一个名为Jetpants](https://github.com/tumblr/jetpants)的开源库来处理他们的分片需求。你可以看看他们是如何处理所有这些事情的。据我所知，Pinterest 还没有发布他们的具体实现。

不过，正如我在评论中指出的那样，在大多数情况下，“我应该如何分片”的答案是“不要分片，几乎所有网站都有更好的选择”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T06:16:08.490

[pinterest 工程博客描述它](https://engineering.pinterest.com/blog/sharding-pinterest-how-we-scaled-our-mysql-fleet)

“增加更多容量

在我们的系统中，可以通过三种主要方式来增加容量。最简单的方法是升级机器（更多空间、更快的硬盘驱动器、更多 RAM，无论您的瓶颈是什么）。

增加更多容量的下一个方法是开辟新的范围。最初，即使我们的分片 ID 是 16 位（总共 64k 个分片），我们也只创建了 4,096 个分片。只能在这些前 4k 分片中创建新对象。在某个时候，我们决定创建具有 4,096 到 8,191 分片的新 MySQL 服务器并开始填充这些分片。

我们增加容量的最后一种方法是将一些分片移动到新机器上。如果我们想为 MySQL001A（具有 0 到 511 的分片）添加更多容量，我们创建一个具有下一个最大名称（例如 MySQL009A 和 B）的新主-主对，并从 MySQL001A 开始复制。"

# php - 使用子模式订购 Preg_Match_All 数组

> ID：13077517
> 
> 赞同：1
> 
> 时间：2012-10-25T21:23:39.557
> 
> 标签：php, regex, preg-match

是否可以对子模式数组键进行排序，以便 Gender 排在第一位，Name 排在第二位，Age 排在第三位，而不是 Name、Age、Gender

另外，是否可以使用数字键和值，而只保留关联的键和值？

```
Array
(
    [categoryOne] => Array
        (
            [0] => Array
                (
                    [0] => Dave | 12 | M
                    [Name] => David 
                    [1] => David 
                    [Age] => 12
                    [2] => 12
                    [Gender] => M
                    [3] => M
                )

            [1] => Array
                (
                    [0] => Lisa | 44 | F
                    [Name] => Lisa 
                    [1] => Lisa 
                    [Age] => 44
                    [2] => 44
                    [Gender] => F
                    [3] => F
                )

        )

    [categoryTwo] => Array
        (
            [0] => Array
                (
                    [0] => Ann | 32 | F
                    [Name] => Ann 
                    [1] => Ann 
                    [Age] => 32
                    [2] => 32
                    [Gender] => F
                    [3] => F
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:46:39.340

您可以使用[`uksort()`](http://php.net/manual/en/function.uksort.php)按键对数组进行排序，并使用给定的函数实现任意排序顺序。

[`array_diff_key()`](http://www.php.net/manual/en/function.array-diff-key.php)数字键可以用和的组合过滤掉[`array_filter()`](http://www.php.net/manual/en/function.array-filter.php)；尽管最有可能使用循环更容易做到这一点。

`array_map()`如果外部“类别”级别是任意长度，则可以使用 , 遍历数组两次。

```
$categoryMatches = array(...);

$categoryMatches = array_map(function($cCategory) {
    return array_map(function($cEntry) {
        $cEntry = array_diff_key($cEntry, array_flip(array_filter(array_keys($cEntry), "is_integer")));
        $fieldSortOrder = array_flip(array('Gender', 'Name', 'Age'));
        uksort($cEntry, function($aKey, $bKey) {
            return ($fieldSortOrder[$aKey] < $fieldSortOrder[$bKey] ? -1 : ($fieldSortOrder[$aKey] > $fieldSortOrder[$bKey] ? 1 : 0));
        });
        return $cEntry;
    }, $cCategory);
}, $categoryMatches); 
```

以上内容未经测试，但应该给出粗略的想法。

# date - Highstock 图表无缘无故地抵消了日期

> ID：13077518
> 
> 赞同：2
> 
> 时间：2012-10-25T21:23:43.663
> 
> 标签：date, highcharts, highstock

我在使用 highstock.js 时遇到问题

没有明显的原因，它似乎在生成图表时中途偏移了日期。

发生这种情况是因为 3 月 25 日的日期在图表中显示了两次，其中 x 轴上的第二个条目的值为 0。没有数据支持第二次错误的日期输入。

我在这里做了一个jsfiddle：http: [//jsfiddle.net/DZGz7/](http://jsfiddle.net/DZGz7/)

```
chart = new Highcharts.StockChart({
chart: {
            renderTo: 'containerchart',
            alignTicks: false
        },
        rangeSelector: {
            selected: 0
        },
        title: {
            text: 'New Members'
        },
        yAxis: {
            allowDecimals: false
        },
        xAxis: {
               minTickInterval: 24 * 3600 * 1000
        },
        plotOptions:{
           line:{
              dataGrouping:{enabled:false}
           }
        },
        series: [{
            type: 'column',
            name: 'New Members',
            data: ([
[1322611200000,3],[1322697600000,40],[1322784000000,21],[1322870400000,14],[1322956800000,5],     [1323043200000,6],[1323129600000,11],[1323216000000,14],[1323302400000,16],[1323388800000,11],[1323475200000,9],[1323561600000,8],[1323648000000,8],[1323734400000,3],[1323820800000,5],[1323907200000,5],[1323993600000,4],[1324080000000,4],[1324166400000,5],[1324252800000,3],[1324339200000,5],[1324425600000,4],[1324512000000,5],[1324598400000,0],[1324684800000,1],[1324771200000,1],[1324857600000,2],[1324944000000,9],[1325030400000,4],[1325116800000,5],[1325203200000,9],[1325289600000,0],[1325376000000,6],[1325462400000,4],[1325548800000,3],[1325635200000,4],[1325721600000,6],[1325808000000,8],[1325894400000,4],[1325980800000,4],[1326067200000,6],[1326153600000,6],[1326240000000,2],[1326326400000,6],[1326412800000,5],[1326499200000,3],[1326585600000,3],[1326672000000,5],[1326758400000,5],[1326844800000,1],[1326931200000,9],[1327017600000,11],[1327104000000,6],[1327190400000,0],[1327276800000,2],[1327363200000,4],[1327449600000,4],[1327536000000,5],[1327622400000,3],[1327708800000,5],[1327795200000,8],[1327881600000,3],[1327968000000,6],[1328054400000,3],[1328140800000,2],[1328227200000,2],[1328313600000,3],[1328400000000,4],[1328486400000,0],[1328572800000,2],[1328659200000,3],[1328745600000,8],[1328832000000,2],[1328918400000,5],[1329004800000,2],[1329091200000,2],[1329177600000,10],[1329264000000,5],[1329350400000,2],[1329436800000,3],[1329523200000,4],[1329609600000,0],[1329696000000,2],[1329782400000,13],[1329868800000,5],[1329955200000,6],[1330041600000,6],[1330128000000,4],[1330214400000,5],[1330300800000,3],[1330387200000,5],[1330473600000,3],[1330560000000,2],[1330646400000,5],[1330732800000,2],[1330819200000,8],[1330905600000,1],[1330992000000,3],[1331078400000,3],[1331164800000,3],[1331251200000,8],[1331337600000,5],[1331424000000,3],[1331510400000,2],[1331596800000,2],[1331683200000,3],[1331769600000,1],[1331856000000,6],[1331942400000,1],[1332028800000,3],[1332115200000,2],[1332201600000,3],[1332288000000,6],[1332374400000,2],[1332460800000,4],[1332547200000,2],[1332633600000,7],[1332716400000,0],[1332802800000,5],[1332889200000,1],[1332975600000,4],[1333062000000,4],[1333148400000,1],[1333234800000,8],[1333321200000,1],[1333407600000,4],[1333494000000,3],[1333580400000,3],[1333666800000,4],[1333753200000,1]
])
}]
}); 
```

（放大 3 月 25 日左右，看到数据偏移量开始）

日期对应于截至 2012 年 3 月 25 日的正确数据，之后将其移动 1 天。通过将工具提示数据与 x 轴标签进行比较，您将能够看到发生的偏移。显然，这似乎是加载到图表中的数据的问题，但我已经检查过了，它应该显示的下一个日期是 3 月 26 日。数据看起来还不错。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T17:27:21.917

来自[http://api.Highcharts.com/highcharts#global.useUTC](http://api.Highcharts.com/highcharts#global.useUTC)：

> 使用UTC：布尔值
> 
> 是否在 Highcharts.dateFormat 中使用 UTC 时间进行轴缩放、刻度线位置和时间显示。
> 
> 使用 UTC 的优点是无论用户代理的时区设置如何，时间显示均等。当实时加载数据或需要正确的夏令时转换时，可以使用本地时间。默认为真。

因此，如果您希望您的图表以浏览器的本地时间显示，您需要在您的 javascript 中执行以下操作：

```
Highcharts.setOptions({
    global: {
        useUTC: false
    }
}); 
```

据推测，这应该在您创建图表之前设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:53:40.243

必须关闭UTC，然后才能正常工作。

```
global:{
    useUTC: false
} 
```

# javascript - jQuery .load() 函数（不完全加载文件）

> ID：13077519
> 
> 赞同：0
> 
> 时间：2012-10-25T21:23:45.187
> 
> 标签：javascript, jquery, html

我一直在努力查询一段时间。我有一个想在我的网站上使用的 CMS，但我不能使用 PHP 包含，所以我决定使用 jquery。我已经做了所有必要的包含，当我打开网页时它不会加载所有文件...... load() 函数很少加载每个文件。任何解决问题的想法或替代方案？谢谢。

```
<script type="text/javascript">
    $(document).ready(function () {
        // find element with ID of "target" and put file contents into it
        $('#welcome-container').load('admin/data/blocks/Slider/Text.html');
        $('#slides').load('admin/data/blocks/Slider/Imagini.html');
        $('#acasa-continut').load('admin/data/blocks/Acasa/Continut.html');
        $('#sidebar').load('admin/data/blocks/Sidebar/Continut.html');
        $('#sidebar-v1').load('admin/data/blocks/Sidebar/Video-1.html');
        $('#sidebar-v2').load('admin/data/blocks/Sidebar/Video-2.html');
        $('#principii').load('admin/data/blocks/Despre/Principii.html');
        $('#echipa').load('admin/data/blocks/Despre/Echipa.html');
        $('#echipament').load('admin/data/blocks/Despre/Echipament.html');
        $('#contact-t').load('admin/data/blocks/Contact/Contact.html');
    });
</script> 
```

# php - 选择链接表中缺少的行

> ID：13077522
> 
> 赞同：4
> 
> 时间：2012-10-25T21:23:58.937
> 
> 标签：php, mysql, join

我有 3 张桌子。一个是服务表。每个服务都可以有一些选项，这些选项在选项表中。第三个表是链接到每个选项的联系人列表。

因此，表格如下所示：

**服务**

```
serviceID
   100
   101 
```

**选项**

```
optionID    serviceID    price
    1         100        10.5
    2         100        100
    3         101        25.25
    4         101        67.90 
```

**联系人选项**

```
contactID     optionID     serviceID     priceOverride
    10            1           100              NULL
    10            2           100              NULL
    10            3           101              30
    10            4           101              100
    11            1           100              12
    11            3           101              NULL
    12            2           100              55
    12            3           101              NULL
    12            4           101              NULL
    13            1           100              NULL
    13            2           100              66
    13            4           101              NULL 
```

如您所见，contactID 10 的所有 4 个选项都与他相关联。11 只有 2 与她相关联，而 12 和 13 都只有 3。

我正在尝试找到一种方法来获取没有全部 4 个选项的联系人 ID，以及他们缺少哪些选项。

我试过（SQL Fiddle：[http](http://sqlfiddle.com/#!2/ca937/7) ://sqlfiddle.com/#!2/ca937/7 ）：

```
SELECT *
FROM contactOptions
LEFT JOIN options
  ON options.optionID = contactOptions.optionID
  AND options.serviceID = contactOptions.serviceID 
```

但这只是返回我所有的 12 行，我想要相反的，*不存在*的行。

如何返回没有全部 4 个选项的联系人以及他们没有的选项？

返回的行应该是：

```
contactID    optionID    serviceID
  11           2            100
  11           4            101
  12           1            100
  13           3            101 
```

我最终想找出哪些服务（以及哪些选项）没有与之关联的联系人。

**编辑**：我已经越来越近了，这就是我现在所拥有的

```
SELECT contactID,
  contactOptions.serviceID,contactOptions.optionID AS x,
  options.optionID AS y
FROM contactOptions
JOIN options
  ON options.serviceID = contactOptions.serviceID
HAVING x != y 
```

这是我当前的 SQL Fiddle：[http ://sqlfiddle.com/#!2/ca937/35](http://sqlfiddle.com/#!2/ca937/35)

这将返回：

```
CONTACTID    SERVICEID    X    Y
  10           100        1    2
  10           100        2    1
  10           101        3    4
  10           101        4    3
  11           100        1    2
  11           101        3    4
  12           100        2    1
  12           101        3    4
  12           101        4    3
  13           100        1    2
  13           100        2    1
  13           101        4    3 
```

这包含我想要的行，但它也包含我不想要的行。从这个结果中，我基本上需要删除联系人具有相同 X 和 Y 值的所有行，然后剩余的行是正确的。

**编辑 2**：我现在更接近了（[http://sqlfiddle.com/#!2/ca937/53](http://sqlfiddle.com/#!2/ca937/53)）：

```
SELECT contactID,
  contactOptions.serviceID,contactOptions.optionID AS x,
  options.optionID AS y
FROM contactOptions
JOIN options
  ON options.serviceID = contactOptions.serviceID
GROUP BY contactID,serviceID
HAVING x != y 
```

这给了我：

```
CONTACTID    SERVICEID    X    Y
  12            100       2    1
  13            101       4    3 
```

现在我有我想要的 2 行。我只需要弄清楚如何获取 11 的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:07:31.843

```
SELECT contacts_options_full.contactID, contacts_options_full.optionID, options.serviceID
FROM
(
  SELECT contactID, optionID
  FROM (SELECT optionID FROM options) o
  CROSS JOIN
  (SELECT DISTINCT contactID FROM contactOptions) co
) contacts_options_full
LEFT JOIN contactOptions ON contacts_options_full.contactID = contactOptions.contactID
AND contactOptions.optionID = contacts_options_full.optionID
JOIN options ON contacts_options_full.optionID = options.optionID
WHERE contactOptions.serviceID IS NULL
ORDER BY contacts_options_full.contactID, contacts_options_full.optionID 
```

在[sqlfiddle上](http://sqlfiddle.com/#!2/ca937/78)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:30:56.767

```
SELECT *,COUNT(contactID)as cc
FROM contactOptions
GROUP BY contactID
HAVING cc < 4 
```

当然要计算所有选项，只需执行以下操作：

```
SELECT COUNT(*) FROM options 
```

## 编辑评论：

在您拥有之前查询的所有contactID 之后，您可以为每个contactID 运行此查询：

```
SELECT optionID FROM options WHERE optionID NOT IN (SELECT optionID FROM contactOptions WHERE contactID = 11) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T23:59:32.820

我在这方面做了更多的工作，我想出了自己的答案。

```
SELECT serviceContact.contactID, options.optionID,
serviceContact.serviceID

FROM options
JOIN(
  SELECT DISTINCT contactID, services.serviceID, GROUP_CONCAT(optionID) as options
  FROM contactOptions
  JOIN services ON services.serviceID = contactOptions.serviceID
  GROUP BY contactID, services.serviceID
) serviceContact ON serviceContact.serviceID = options.serviceID

WHERE NOT FIND_IN_SET(optionID,serviceContact.options) 
```

这里的诀窍是`GROUP_CONCAT`与`NOT FIND_IN_SET`. 这让我得到*不在*链接表中的选项。

演示：[http ://sqlfiddle.com/#!2/ca937/87](http://sqlfiddle.com/#!2/ca937/87)

# java - 设置自定义字体时列表视图慢

> ID：13077525
> 
> 赞同：6
> 
> 时间：2012-10-25T21:24:27.390
> 
> 标签：java, android, android-layout, truetype, android-fonts

我在 xml 文件中有一些数据，将其放在 /res/values/mydata.xml 中。我想用自定义字体在列表视图中显示数据。模拟器中的一切都很棒，但在真实设备中（使用带有 android 4.0.3 的三星 Galaxy Tab 10.1 2）滚动列表视图时速度太慢。实际上它适用于默认字体，但设置自定义字体时会出现问题。

这是我的java代码：

```
public class ShowFoodCalorie extends ListActivity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // reading data from xml file
    setListAdapter(new MyAdapter(this, android.R.layout.simple_list_item_1,
            R.id.textView1,  getResources().getStringArray(R.array.food_cal)));
}
private class MyAdapter extends ArrayAdapter<String> {
    public MyAdapter(Context context, int resource, int textViewResourceId,
            String[] string) {
        super(context, resource, textViewResourceId, string);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater)
getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View row = inflater.inflate(R.layout.show_all, parent, false);
        String[] item = getResources().getStringArray(R.array.food_cal);
        TextView tv = (TextView) row.findViewById(R.id.textView1);
        try {
            Typeface font = Typeface.createFromAsset(getAssets(),"myFont.ttf");
            tv.setTypeface(font);
        } catch (Exception e) {
            Log.d("Alireza", e.getMessage().toString());
        }

        tv.setText(item[position]);
        return row;
    }
} 
```

这是什么问题？是关于我的设备的吗？任何解决方案都可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T21:28:29.803

你的问题是那一行：

```
Typeface font = Typeface.createFromAsset(getAssets(),"myFont.ttf"); 
```

您应该在适配器的构造函数中这样做一次，创建`font`一个成员变量，而不仅仅是使用该变量来调用`setTypeface(font)`您的`TextView`.

`getView()`应防止该方法中的重载。

另请阅读有关适配器的 convertView / ViewHolder 模式，这也将给您带来性能提升。

更新示例：

```
private class MyAdapter extends ArrayAdapter<String> {
    Typeface font;

    public MyAdapter(Context context, int resource, int textViewResourceId,
            String[] string) {
        super(context, resource, textViewResourceId, string);
        font = Typeface.createFromAsset(context.getAssets(),"myFont.ttf");
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater)
getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View row = inflater.inflate(R.layout.show_all, parent, false);
        String[] item = getResources().getStringArray(R.array.food_cal);
        TextView tv = (TextView) row.findViewById(R.id.textView1);
        try {
            tv.setTypeface(font);
        } catch (Exception e) {
            Log.d("Alireza", e.getMessage().toString());
        }

        tv.setText(item[position]);
        return row;
    }
} 
```

# python - 稀疏矩阵是否有 numpy.delete() 等效项？

> ID：13077527
> 
> 赞同：25
> 
> 时间：2012-10-25T21:24:32.940
> 
> 标签：python, numpy, scipy

假设我有一个二维矩阵作为 numpy 数组。如果我想删除此矩阵中具有特定索引的行，我使用[`numpy.delete()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html?highlight=delete#numpy.delete). 这是我的意思的一个例子：

```
In [1]: my_matrix = numpy.array([
   ...:     [10, 20, 30, 40, 50],
   ...:     [15, 25, 35, 45, 55],
   ...:     [95, 96, 97, 98, 99]
   ...: ])
In [2]: numpy.delete(my_matrix, [0, 2], axis=0)
Out[2]: array([[15, 25, 35, 45, 55]]) 
```

我正在寻找一种方法来使用[`scipy.sparse`](http://docs.scipy.org/doc/scipy/reference/sparse.html)包中的矩阵执行上述操作。我知道可以通过将整个矩阵转换为一个 numpy 数组来做到这一点，但我不想这样做。有没有其他方法可以做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-25T23:21:58.297

对于 CSR，这可能是最有效的就地方式：

```
def delete_row_csr(mat, i):
    if not isinstance(mat, scipy.sparse.csr_matrix):
        raise ValueError("works only for CSR format -- use .tocsr() first")
    n = mat.indptr[i+1] - mat.indptr[i]
    if n > 0:
        mat.data[mat.indptr[i]:-n] = mat.data[mat.indptr[i+1]:]
        mat.data = mat.data[:-n]
        mat.indices[mat.indptr[i]:-n] = mat.indices[mat.indptr[i+1]:]
        mat.indices = mat.indices[:-n]
    mat.indptr[i:-1] = mat.indptr[i+1:]
    mat.indptr[i:] -= n
    mat.indptr = mat.indptr[:-1]
    mat._shape = (mat._shape[0]-1, mat._shape[1]) 
```

在 LIL 格式中，它甚至更简单：

```
def delete_row_lil(mat, i):
    if not isinstance(mat, scipy.sparse.lil_matrix):
        raise ValueError("works only for LIL format -- use .tolil() first")
    mat.rows = np.delete(mat.rows, i)
    mat.data = np.delete(mat.data, i)
    mat._shape = (mat._shape[0] - 1, mat._shape[1]) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-10-22T10:04:35.900

Pv.s 的答案是一个良好而可靠的就地解决方案，需要

```
a = scipy.sparse.csr_matrix((100,100), dtype=numpy.int8)
%timeit delete_row_csr(a.copy(), 0)
10000 loops, best of 3: 80.3 us per loop 
```

对于任何数组大小。由于布尔索引适用于稀疏矩阵，至少在 中`scipy >= 0.14.0`，我建议在要删除多行时使用它：

```
def delete_rows_csr(mat, indices):
    """
    Remove the rows denoted by ``indices`` form the CSR sparse matrix ``mat``.
    """
    if not isinstance(mat, scipy.sparse.csr_matrix):
        raise ValueError("works only for CSR format -- use .tocsr() first")
    indices = list(indices)
    mask = numpy.ones(mat.shape[0], dtype=bool)
    mask[indices] = False
    return mat[mask] 
```

此解决方案需要更长的时间来移除单行

```
%timeit delete_rows_csr(a.copy(), [50])
1000 loops, best of 3: 509 us per loop 
```

但是对于删除多行更有效，因为执行时间几乎不会随着行数的增加而增加

```
%timeit delete_rows_csr(a.copy(), numpy.random.randint(0, 100, 30))
1000 loops, best of 3: 523 us per loop 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-03T13:55:49.967

除了@loli 版本的@pv 答案之外，我还扩展了它们的功能以允许**通过 CSR 矩阵上的索引删除****行*和/或***列。

```
import numpy as np
from scipy.sparse import csr_matrix

def delete_from_csr(mat, row_indices=[], col_indices=[]):
    """
    Remove the rows (denoted by ``row_indices``) and columns (denoted by ``col_indices``) from the CSR sparse matrix ``mat``.
    WARNING: Indices of altered axes are reset in the returned matrix
    """
    if not isinstance(mat, csr_matrix):
        raise ValueError("works only for CSR format -- use .tocsr() first")

    rows = []
    cols = []
    if row_indices:
        rows = list(row_indices)
    if col_indices:
        cols = list(col_indices)

    if len(rows) > 0 and len(cols) > 0:
        row_mask = np.ones(mat.shape[0], dtype=bool)
        row_mask[rows] = False
        col_mask = np.ones(mat.shape[1], dtype=bool)
        col_mask[cols] = False
        return mat[row_mask][:,col_mask]
    elif len(rows) > 0:
        mask = np.ones(mat.shape[0], dtype=bool)
        mask[rows] = False
        return mat[mask]
    elif len(cols) > 0:
        mask = np.ones(mat.shape[1], dtype=bool)
        mask[cols] = False
        return mat[:,mask]
    else:
        return mat 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-25T21:34:13.490

`0 < i < X.shape[0] - 1`您可以从 CSR 矩阵`X`中删除行

```
scipy.sparse.vstack([X[:i, :], X[i:, :]]) 
```

您可以分别用`X[1:, :]`或删除第一行或最后一行。`X[:-1, :]`一次删除多行可能需要滚动您自己的函数。

对于 CSR 以外的其他格式，这可能不一定有效，因为并非所有格式都支持行切片。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-16T00:12:33.060

要从 A 中删除第 i 行，只需使用左矩阵乘法：

```
B = J*A 
```

其中 J 是删除第 i 行的稀疏单位矩阵。
左乘 J 的转置将在 B 的第 i 行插入一个零向量，这使得这个解决方案更通用一些。

```
A0 = J.T * B 
```

为了构造 J 本身，我在稀疏对角矩阵上使用了 pv. 的解决方案，如下所示（对于这种特殊情况，可能有更简单的解决方案？）

```
def identity_minus_rows(N, rows):
    if np.isscalar(rows):
        rows = [rows]
    J = sps.diags(np.ones(N), 0).tocsr()  # make a diag matrix
    for r in sorted(rows):
        J = delete_row_csr(J, r)
    return J 
```

您还可以通过右乘以适当大小的 JT 来删除列。
最后，在这种情况下，乘法是有效的，因为 J 非常稀疏。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-26T10:07:02.193

请注意，稀疏矩阵在某种程度上支持花式索引。所以你可以做的是：

```
mask = np.ones(len(mat), dtype=bool)
mask[rows_to_delete] = False
# unfortunatly I think boolean indexing does not work:
w = np.flatnonzero(mask)
result = s[w,:] 
```

delete 方法也没有真正做任何其他事情。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-30T00:42:06.630

使用@loli 实现，在这里我留下一个删除列的函数：

```
def delete_cols_csr(mat, indices):
    """
    Remove the cols denoted by ``indices`` form the CSR sparse matrix ``mat``.
    """
    if not isinstance(mat, csr_matrix):
        raise ValueError("works only for CSR format -- use .tocsr() first")
    indices = list(indices)
    mask = np.ones(mat.shape[1], dtype=bool)
    mask[indices] = False
    return mat[:,mask] 
```

# java - 实现accept(SocketImpl s)和对象复制

> ID：13077529
> 
> 赞同：3
> 
> 时间：2012-10-25T21:24:34.000
> 
> 标签：java, sockets, copy

我正在根据*RAW 套接字实现**肯定确认和重传*传输协议，在这种情况下需要一个子类。在实现方法时，我需要这样的东西：*`SocketImpl``accept`*

 *```
protected void accept(SocketImpl s) {
    ...
    s.copy(socket);
} 
```

哪里是一个必须复制到**已经初始化**的对象`socket`的已经计算的对象。即我需要一个**可变的复制方法**，它将源复制到目标。我知道存在，但它返回一个新对象，我需要的是 mutate 。`SocketImpl` **`SocketImpl``s` **`s.copy(socket)``socket``s``Object clone()``s`****

 ****顺便说一句，你们中的一些人认为在这种情况下**改变**`s`参数是一个**错误的设计**。它不是 Java 标准库中的唯一示例。`implAccept(Socket s)`类`ServerSocket`是另一个例子。但这就是 Sun/Oracle 工程师设计它的方式。我想知道**为什么这是一个糟糕的设计**

乍一看，提供一个通用的 shallow `target.copy(source)`where`target = souce.clone()`相当于`target = new TheClass(); target.copy(source)`;似乎是有道理的。但由于它不存在（可能有充分的理由，请解释）唯一的方法是**编写一个自定义的逐字段复制方法**。

我对吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:48:29.137

您误解了此方法的用途和工作原理。我已经做过很多次了。`SocketImpl`提供给`implAccept()`新接受的套接字，而不是`ServerSocket`. 所以你*不需要*第二个副本。您需要做的就是将其包装`SocketImpl`在`Socket`. 或您自己的派生类中`Socket`。`Socket`奇怪的是，甚至为此目的提供了一个构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:13:31.030

我想**没有标准`target.copy(source)`（即可变复制方法）**，因为它比克隆更少需要：

*   您需要单独决定（针对您的情况和所有领域），它们是否应该被复制或相同（就像克隆与深度克隆一样）；
*   您通常可以进行设计，以便您只需切换您在外部持有的引用，因此在您的情况下，您可以切换为使用引用`s`而不是到处使用当前对象，这更简单，更有效。如果您需要复制值，这对应于克隆（或使用复制构造函数）；
*   `s`您可以通过包装参数（在您的情况下为对象）轻松实现它。

最后一点也回答**了您的第二个问题**：除了逐字段复制之外，您还可以实现一个转发类，将 SocketImpl 的所有导出方法转发到包装的核心 SocketImpl：

*   使用你当前的实现类`C`作为私有实现，`protected void accept(SocketImpl s)`只抛出一个异常；
*   编写一个转发`D`类
    *   包装一个 SocketImpl（例如 的对象`C`），保存在私有字段中`wrapped`
    *   扩展 SocketImpl 并转发其所有方法，`accept`但`wrapped`
    *   用;¹`protected void accept(SocketImpl s)`简单地实现`{ s.wrapped = this; }`
*   如果您希望在某些情况下复制所有字段，请提供`accept`一个复制的参数，例如 via `accept(s.clone())`（`accept`如果您希望在所有情况下都复制，则可以在其中复制）；
*   只给出类型的对象`D`，这样`C`就不会抛出异常。

* * *

¹ 此实现`accept`仅适用于 类型的参数`D`。否则，这种可怕的设计（必须改变作为参数给出的 SocketImpl）需要`accept`使用丑陋的技术，例如反射（参见例如[http://www.docjar.com/上的 org.apache.harmony.luni.net.PlainSocketImpl html/api/org/apache/harmony/luni/net/PlainSocketImpl.java.html](http://www.docjar.com/html/api/org/apache/harmony/luni/net/PlainSocketImpl.java.html)）。*****

# sql-server - 如何使 SQLDataSource 插入视图而不是基础表？

> ID：13077537
> 
> 赞同：1
> 
> 时间：2012-10-25T21:24:53.627
> 
> 标签：sql-server, sqldatasource, .net-datasourcecontrol

我们已将 20 个表替换为一个合并表，该表通过“set id”分隔每组数据（表“A”的所有记录的 set_id 为 1，表“B”为 2，等等）。

然后，我们在表上构建视图，并重命名每个视图，使视图与原始 20 个表具有相同的名称，并在 WHERE 中添加 set_id。最终结果 - 视图的插入/更新/选择仍然有效

我们这样做是为了让我们的网页（使用带有“sql 命令生成器”的 sqldatasource）不必更改。我们在每个视图上添加了一个 INSTEAD OF INSERT 触发器，这样当您插入视图时，它会添加 set_id 并插入到统一表中。到目前为止，一切都很好。

它部分有效：更新和删除有效，因为它们知道记录的实际 ID。

但是 INSERT 不会 - 当命令实际执行时，我们会看到“exec sp_executesql 插入到统一表中” - 而不是点击视图，数据源控件会找到基础表，然后直接插入其中。如果我们尝试将字段添加到视图中，它们会显示在数据源控件中，但网页随后会显示一个可配置的字段。

有没有办法改变数据库端的东西以强制它使用视图？在这一点上，我唯一的其他选择是用表替换视图，添加一个 AFTER INSERT、UPDATE、DELETE 触发器以便更新合并，然后是一个确保它们同步并且没有问题的过程。

提前谢谢了。

# drupal-7 - Drupal 7：文件字段导致 Dependable Dropdowns 错误

> ID：13077538
> 
> 赞同：1
> 
> 时间：2012-10-25T21:24:56.207
> 
> 标签：drupal-7, drupal-modules, drupal-fapi, drupal-forms

我正在使用表单 API 在模块中构建表单。我有几个相关的下拉菜单一直运行良好。代码如下：

```
$types = db_query('SELECT * FROM {touchpoints_metric_types}') -> fetchAllKeyed(0, 1);
$types = array('0' => '- Select -') + $types;
$selectedType = isset($form_state['values']['metrictype']) ? $form_state['values']['metrictype'] : 0;
$methods = _get_methods($selectedType);
$selectedMethod = isset($form_state['values']['measurementmethod']) ? $form_state['values']['measurementmethod'] : 0;
$form['metrictype'] = array(
    '#type' => 'select',
    '#title' => t('Metric Type'),
    '#options' => $types,
    '#default_value' => $selectedType,
    '#ajax' => array(
        'event' => 'change',
        'wrapper' => 'method-wrapper',
        'callback' => 'touchpoints_method_callback'
    )
);

$form['measurementmethod'] = array(
    '#type' => 'select',
    '#title' => t('Measurement Method'),
    '#prefix' => '<div id="method-wrapper">',
    '#suffix' => '</div>',
    '#options' => $methods,
    '#default_value' => $selectedMethod,
); 
```

以下是 _get_methods 和 touchpoints_method_callback 函数：

```
function _get_methods($selected) {
    if ($selected) {
        $methods = db_query("SELECT * FROM {touchpoints_m_methods} WHERE mt_id=$selected") -> fetchAllKeyed(0, 2);
    } else {
        $methods = array();
}
    $methods = array('0' => "- Select -") + $methods;
    return $methods;
}

function touchpoints_method_callback($form, &$form_state) {
    return $form['measurementmethod'];
} 
```

这一切都很好，直到我在表单中添加了一个文件字段。这是我用于此的代码：

```
$form['metricfile'] = array(
    '#type' => 'file',
    '#title' => 'Attach a File',
); 
```

现在，如果我更改第一个下拉列表，则添加了该文件，它旁边会显示“请稍候”消息，而不会加载第二个下拉列表的内容。我的 JavaScript 控制台中也出现以下错误：

“未捕获的 TypeError：对象函数 (a,b){return new p.fn.init(a,b,c)} 没有方法 'handleError'”

我在这里做错了什么？

# c# - 如何创建一定大小的 IHTMLWindow2 对象？

> ID：13077539
> 
> 赞同：0
> 
> 时间：2012-10-25T21:24:55.733
> 
> 标签：c#, window, mshtml, ihtmldocument2

我能够使用 C# 中的 mshtml 库创建文档和窗口。但是当我这样做时，窗口的高度和宽度似乎为 0。

我可以使用`window.open("about:blank", null, "height=1000,width=1000")`，但它实际上会弹出一个新窗口，我想要的应该都是代码。

我的问题是，如何将原始窗口创建为特定大小？window.resizeTo(1000, 1000) 完全没有效果。

```
var document = (IHTMLDocument2)new HTMLDocument();
var window = document.parentWindow;
window.resizeTo(1024, 768); // has no effect

document.write(new object[] { html });
document.close();
window.execScript(script, "javascript"); // error in my script due to window size 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:12:55.490

诀窍是只使用`WebBrowser`在 WinForms (System.Windows.Forms) 或 WPF (System.Windows.Controls) 中找到的控件。然后你可以把它放到一个合适的窗口中， Show() 它然后所有的大小和布局都按预期发生。

# sql - 条件字段选择oracle

> ID：13077540
> 
> 赞同：0
> 
> 时间：2012-10-25T21:25:02.347
> 
> 标签：sql, oracle

我知道我可以用我的编程语言做到这一点，但我想尝试在 SQL 中做到这一点，这样我就不必打扰任何前端代码。

我有一个包含三个名称字段的表 - name1、name2、name3。

任何或所有这些字段中可能有随机值。

我想要一个返回三个字段的查询，

它将检查 name1,name2,name3 - 哪个第一个字段有值进入 first_name，哪个第二个字段有值进入 second_name，然后是 third_field。

我可以轻松地编写一个 CASE-END 语句来填充 first_name，但是当我开始编写 second_name 的逻辑时，它变得更加复杂。

SQL：

```
SELECT 
  CASE
    WHEN NAME1 IS NOT NULL
    THEN NAME1
    ELSE
      CASE
        WHEN NAME2 IS NOT NULL
        THEN NAME2
        ELSE
          CASE
            WHEN NAME3 IS NOT NULL
            THEN NAME1
            ELSE ''
          END
      END
  END FIRST_NAME
  FROM TABLE_NAME 
```

现在，我该如何处理 second_name 和 third_name？还是他们更简单的方法？

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:43:16.457

你可能会做类似的事情

```
SELECT coalesce( name1, name2, name3 ) first_name,
       (case when name1 is not null 
             then nvl( name2, name3 )
             when name2 is not null
             then name3
             else null
         end) second_name,
       (case when name1 is not null and
                  name2 is not null
             then name3
             else null
         end) third_name
  FROM your_table 
```

然而，这样做的愿望似乎表明您有一个需要解决的数据模型问题。如果您有三列显然都存储相同的数据，则该表未正确规范化。如果将名称存储在与现有表具有 1:n 关系的单独表中，这将是一个更好的数据模型（并且更容易查询）。

# svn - svn irksomeness ...总结 HEAD 和旧的非工作副本之间的差异？

> ID：13077546
> 
> 赞同：0
> 
> 时间：2012-10-25T21:25:32.783
> 
> 标签：svn, diff

如何总结 SVN 中源代码树的当前修订版与已删除所有 .svn 文件的大约一个月大的源代码树副本之间的更改？

我通过执行 --depth=empty checkout 将文件复制到空目录中，然后执行 svn add *. 只有大约 20% 的文件应该已更改。我似乎无法找出获得差异摘要的咒语。

svn diff --summarize 看起来很有希望，但它说“只能将存储库与存储库进行比较”？

在我从头顶划出一个整体之前，有人可以提供帮助吗？:-)

```
 ... hippo-dancer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:23:17.247

总结变化的方式是什么？

您可以使用多种`diff`命令来显示两个目录之间的差异。你在什么操作系统上？看看[超越比较](http://scootersoftware.com)。这是我个人的最爱。

除此之外，您无能为力。这些`.svn`目录的存在是有原因的。他们跟踪更改、修订和各种其他信息。它们永远不应该被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:43:48.293

Unversion 旧 WC 通常是错误的 - 使用 WC 元数据，您可以识别源 URL 和修订。但是，现在，如果 --summarize 仅适用于 URL，您必须...从未版本化的源创建第二个 URL 作为“某个分支”，是吗？

简短的伪指南：

```
svn copy .../trunk .../tempbranch
mkdir newWC
cd newWC
svn co .../tempbranch .
<copy from unversioned locations, sync trees, don't touch .svn>
svn ci -m "Sync with old sources"
svn diff --summarize .../trunk .../tempbranch 
```

# php - 将别名重定向到特定文件夹

> ID：13077553
> 
> 赞同：0
> 
> 时间：2012-10-25T21:25:54.443
> 
> 标签：php, .htaccess, dns

我需要将特定域别名重定向到主域中的特定文件夹。好吧，我将只有一台具有主域数据的主机，我需要这样做：

```
http://a.com/
-> redirect automatically to: http://a.com/project-a
-> currently done

http://a.com/project-a
http://a.com/project-b
-> no redirect, it is the final folder
-> currently done

### HERE: ###
http://b.com/
-> redirect transparently to: http://a.com/project-b
-> I need do that! 
```

请注意：`b.com/...`需要将所有重定向到`a.com/project-b/...`透明。因此，例如：

```
http://b.com/ => http://a.com/project-b/
http://b.com/news => http://a.com/project-b/news 
```

我需要知道如何在 .htaccess 文件中做到这一点。域别名没问题，但目前两者都`a.com`重定向`b.com`到`a.com`主机（这是正确的），但`b.com`需要在特定文件夹中工作。

我不知道这是否是一个问题，但该`/project-b`文件夹不存在，它`mod_rewrite`只是一个`index.php`。

我不想通过 301 重定向，我需要透明地做所有事情（用户会认为他们在`b.com`托管）。

# axapta - 如何在表单上添加/保存临时表

> ID：13077554
> 
> 赞同：1
> 
> 时间：2012-10-25T21:25:58.307
> 
> 标签：axapta

我们创建了特殊的表格来为供应商创建采购价格。

新表单具有与原始表单几乎相同的字段（因此我们使用`PriceDiscTable`了 ），但记录/数据源设置为临时表。用户填写必填字段后，将单击按钮，（后面的额外逻辑）并记录将插入数据库（实际 priceDiscTable）。

这个想法是让不一定能获得购买价格的用户获得交易价格。理论上一切正常，但是当用户无权`PriceDiscTable`打开新表单时，会显示错误*“Not enougt right to use table 'Price agreement'”*。

我们尝试在 formDatasource 中设置`AllowCheck`为`false`，但这仅允许我们打开表单，但用户仍然无法添加或修改记录。

**有没有办法强制系统允许用户在临时表中写入数据？**
禁用安全密钥或对真实表的全面访问不是一种选择。
重复表并使用相同的字段创建很麻烦（如果我们使用相同的表，我们可以使用`data()`方法来分配字段）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:27:17.457

我认为用[几乎]相同的字段创建一个新的临时表将是最好的解决方案。

如果您反对这种方法的唯一原因是您无法使用`data()`将数据从一个表复制到另一个表，则可以`buf2BufByName()`按照此处所述使用：http: [//mybhat.blogspot.co.uk/2012/07/动力学-ax-buf2buf-and-buf2bufbyname.html](http://mybhat.blogspot.co.uk/2012/07/dynamics-ax-buf2buf-and-buf2bufbyname.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T23:36:00.640

您可以使用[RunAs](http://msdn.microsoft.com/en-us/library/aa893873.aspx)来模拟另一个用户……也许是系统用户。我并不完全遵循您正在尝试做的事情，但如果您确切地知道您的自定义代码正在做什么并且能够做什么，那么听起来这个解决方案对您有用。

看`Classes\AifOutboundProcessingService\runAsWrapper`一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T02:52:13.577

如果不给用户至少“查看”访问权限或编辑 Classes\FormRun 以某种方式绕过内核级别的安全密钥，您将无法显示 PriceDiscTable，因此它也是不可能的。

我同意 10p，您应该在其中创建一个临时表，然后创建一个与`buf2bufbyname()`or结合使用的自定义方法处理程序`buf2buf()`。

**如果您**真的想使用 .data() ，您可以使用的****另一个选项**是使用 Common 作为数据源。你可以在网格上添加你想要的字段，然后你可以来回传递一个共同的。这有大量的表单设置来让它工作，但它最终可以产生你想要的东西，我认为。**

 **```
static void Job8(Args _args)
{
    Common common;
    salesTable salesTable;
    ;

    common = new DictTable(366).makeRecord();

    select firstonly common where common.RecId == 5637145357;

    salesTable.data(common);

    info(strfmt("%1 - %2", salesTable.SalesId, salesTable.SalesName));
} 
```**

# java - 变换+缩放一组点

> ID：13077555
> 
> 赞同：2
> 
> 时间：2012-10-25T21:26:15.217
> 
> 标签：java, javascript, math, vector, matrix

我写了一个 gui，用户在 (640x480) 窗口中绘制了一些东西。它使该绘图成为存储在 Vector 数组中的一组点。**现在，我如何将这些点集转换为原点（窗口左上角的 0,0）或将其放在指定的位置？**我想要的窗口的宽度和高度也是640x480。

**解决之后，如何将新的点集缩放到我想要的大小？**

**更新 1**

我解决了规模问题，但没有解决定位问题。这幅画没有去我告诉它的地方。下面是我到目前为止所拥有的代码。

```
float scaleX = (float)width/boundingPoints.width;
float scaleY = (float)height/boundingPoints.height;
for(int i = 0; i < cg_points.size()-1; i++){
    Point p1 = cg_points.get(i);
    Point p2 = cg_points.get(i+1);
    g.drawLine((int)(p1.x*scaleX) + pos.x, (int)(p1.y*scaleY) + pos.y, (int)(p2.x*scaleX) + pos.x, (int)(p2.y*scaleY) + pos.y);
} 
```

我希望绘图从 pos [x, y] 所在的位置开始。目前的问题是这个。它确实遵循 pos.x 和 pos.y 的做法，但它离我们很远，并且不是从 pos[x,y] 开始的。

**这是该问题的屏幕截图** ![转换问题的图像](../Images/67ebd4033374d8c6a30492de630d0cc5.png)

正如您从图片中看到的那样，盒子应该是星星所在的位置。如您所见，缩放是正确的，而不是位置。那是因为绘图中的点可能**不是**从 (0,0) 开始的。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:32:44.863

要翻译图纸，只需

```
foreach point in array
    point.x += translate.x
    point.y += translate.y 
```

如果您要将绘图居中，请选择一个中心（例如平均所有点），否定该值，然后按该值转换所有点。

要缩放绘图：

```
foreach point in array
    point.x *= scale
    point.y *= scale 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:29:23.910

所以我解决了它......耶！这是下面的代码，以防您遇到与我相同的问题。

```
 float scaleX = (float)width/boundingPoints.width;
    float scaleY = (float)height/boundingPoints.height;
    int bx = boundingPoints.x;
    int by = boundingPoints.y;
    for(int i = 0; i < cg_points.size()-1; i++){
            Point p1 = cg_points.get(i);
            Point p2 = cg_points.get(i+1);
            int x1 = (int) ((p1.x-bx)*scaleX);
            x1 += pos.x;
            int y1 = (int) ((p1.y-by)*scaleY);
            y1 += pos.y;
            int x2 = (int) ((p2.x-bx)*scaleX);
            x2 += pos.x;
            int y2 = (int) ((p2.y-by)*scaleY);
            y2 += pos.y;

            g.drawLine(x1, y1, x2, y2);
        } 
```

# ruby-on-rails-3 - 部署到 heroku 资产管道 Sprockets::fileNotFound

> ID：13077564
> 
> 赞同：12
> 
> 时间：2012-10-25T21:26:57.260
> 
> 标签：ruby-on-rails-3, configuration, heroku, asset-pipeline

我正在尝试将我的应用程序部署到*Heroku*。Heroku 没有加载我的*js*和*css*文件

我跑了`RAILS_ENV=production bundle exec rake assets:precompile` ，它仍然没有工作。

然后我跑了 `heroku rake assets:precompile`

我在 Heroku 日志中收到此错误：

```
Error compiling asset application.css:
 Sprockets::FileNotFound: couldn't find file 'jquery.ui.datepicker'
 (in /app/app/assets/stylesheets/application.css.scss:13)

Served asset /application-989f5e5266d9b066eb316183d7db5c77.css - 500 Internal Server Error

 Error compiling asset application.js:
 Sprockets::FileNotFound: couldn't find file 'jquery.ui.datepicker'
 (in /app/app/assets/javascripts/application.js:16)
Served asset /application-d81c946c6f47242e5e97de9bca4938be.js - 500 Internal Server Error 
```

配置生产.rb：

```
config.cache_classes = true
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true
  config.serve_static_assets = true
  config.assets.compress = true
  config.assets.compile = true
  config.assets.initialize_on_precompile = false

  config.assets.digest = true 
```

在资产应用程序.css.scss

```
 *= require_self
 *= require bootstrap_and_overrides
 *= require jquery.ui.datepicker
 *= require bootstrap-timepicker
 *= require jquery.fileupload-ui
 *= require_tree .
*/ 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require jquery.ui.datepicker
//= require bootstrap-timepicker
//= require jquery-fileupload/basic
//= require jquery-fileupload/vendor/tmpl
//= require_tree . 
```

知道如何解决这个问题吗？提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-27T03:42:21.347

我认为这个问题与未预编译的资产有关。

在您的终端中，如果您运行：

```
 $ >>> rake assets:precompile 
```

然后做你的添加和提交：

```
$ >>> git add .
$ >>> git commit -m 'Added precompiled assets for Heroku' 
```

假设您的遥控器称为“heroku”：

```
$ >>> git push heroku master 
```

它应该正确部署，而不必弄乱您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:36:47.507

路径出现两次混乱`/app/app/assets/javascripts/application.js`。`/app`这可能会导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:44:58.453

试试这个并按照源代码的步骤

在你的`application.js`添加`jquery-ui`

```
//= require jquery
//= require jquery-ui 
```

然后尝试

来源：[https ://github.com/joliss/jquery-ui-rails](https://github.com/joliss/jquery-ui-rails)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-06T12:04:43.003

如果 rake 预编译资产对任何人都不起作用，我正在和一位程序员同事一起工作并问他（他在我们的项目上修复了它，而不是我，我被难住了。）

他不是以英语为母语的人，但这里有：

“我已经分析，导致您目前失败的原因是未找到文件 jquery-ui-datepicker 的预编译时推送到 Heroku 错误，这是由于 sprocket 调用 jquery ui 版本 4.0.12 的 js 和 css 的变化最新的 rails 5.0.0，我现在已经通过 Gemfile 中的固定版本进行了修复，并替换了 js 和 css 中的调用。”

瞧，它在之后起作用了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-11T15:48:43.203

1.  首先清理和预编译资产

    > $ rake assets:clean
    > $ rake assets:precompile

2.  更新存储库

    > $ git add -A
    > $ git commit -m "消息"

3.  推送到heroku

    > $ git push heroku

# c# - 寻找在 c# 中处理通用集合的非类型特定方法

> ID：13077568
> 
> 赞同：0
> 
> 时间：2012-10-25T21:27:06.550
> 
> 标签：c#, generics, collections, overloading, generic-collections

我的情况是这样的。我需要在多种不同类型的对象上运行一些验证和按摩类型代码，但是为了清洁（和代码重用），我想让这个验证的所有调用看起来基本相同，无论对象如何。我试图通过重载来解决这个问题，在我得到 Generic Collection 对象之前它工作得很好。

下面的例子应该澄清我在这里谈论的内容：

```
private string DoStuff(string tmp) { ... }

private ObjectA DoStuff(ObjectA tmp) { ... }

private ObjectB DoStuff(ObjectB tmp) { ... }

...

private Collection<ObjectA> DoStuff(Collection<ObjectA> tmp) {
    foreach (ObjectA obj in tmp) if (DoStuff(obj) == null) tmp.Remove(obj);
    if (tmp.Count == 0) return null;
    return tmp;
}

private Collection<Object> DoStuff(Collection<ObjectB> tmp) {
    foreach (ObjectB obj in tmp) if (DoStuff(obj) == null) tmp.Remove(obj);
    if (tmp.Count == 0) return null;
    return tmp;
}

... 
```

`Collection<T>`这似乎是一种真正的浪费，因为我必须为每种不同的类型复制完全相同的代码。我想制作一个`DoStuff`处理 any的单个实例`Collection<T>`，而不是为每个实例制作一个单独的实例。

我试过使用`ICollection`，但这有两个问题：第一，`ICollection`不暴露`.Remove`方法，我不能写`foreach`循环，因为我不知道列表中对象的类型。使用更通用的东西，比如`object`，不起作用，因为我没有`DoStuff`接受的方法`object`- 我需要它为实际对象调用适当的方法。编写一个`DoStuff`方法，它需要一个`object`并执行某种巨大的 if 语句列表来选择正确的方法并适当地进行转换，这违背了摆脱冗余代码的整个想法——我还不如复制和粘贴所有这些`Collection<T>`方法。

我尝试过使用通用`DoStuff<T>`方法，但这在`foreach`循环中有同样的问题。因为我在设计时不知道对象类型，所以编译器不会让我调用`DoStuff(obj)`.

从技术上讲，编译器应该能够在编译时判断需要进行哪个调用，因为这些都是私有方法，并且在调用中传递的对象的特定类型在方法被调用时都是已知的。该知识似乎并没有出现在此方法调用的后续方法中。

我真的不想在这里使用反射，因为这会使代码比复制和粘贴所有`Collection<T>`方法更加复杂，并且会降低性能。有任何想法吗？

--- 编辑 1--- 我意识到我的通用方法引用没有正确显示，因为我没有使用尖括号的 html 代码。现在应该解决这个问题。

--- 编辑 2 --- 根据下面的回复，我将`Collection<T>`方法更改为如下所示：

```
private Collection<T> DoStuff<T>(Collection<T> tmp) {
    for (int i = tmp.Count - 1; i >= 0; i--) if (DoStuff(tmp[i]) == null) tmp.RemoveAt(i);
    if (tmp.Count == 0) return null;
    return tmp;
} 
```

但是，这仍然不起作用，因为当我调用`DoStuff(tmp[i])`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-27T18:10:48.527

您需要将要调用的方法作为参数传递给泛型方法。这样，重载决议发生在编译器知道期望什么类型的地方。

或者，您需要使每个项目的 DoStuff 方法通用（或对象）以支持集合中任何可能的项目。

（我还将 RemoveItem 调用与第一个循环分开，这样它就不会试图从被迭代的同一个列表中删除一个项目。）

```
private Collection<T> DoStuff<T>(Collection<T> tmp, Func<T, T> stuffDoer)
{
    var removeList = tmp
        .Select(v => stuffDoer(v))
        .Where(v => v == null)
        .ToList();

    foreach (var removeItem in removeList) tmp.Remove(removeItem);

    if (tmp.Count == 0) return null;
    return tmp;
}

private class ObjectA { }
private class ObjectB { }

private string DoStuff(string tmp) { return tmp; }

private ObjectA DoStuff(ObjectA tmp) { return tmp; }

private ObjectB DoStuff(ObjectB tmp) { return tmp; } 
```

使用此代码调用：

```
var x = new Collection<ObjectA>
{
    new ObjectA(),
    new ObjectA(),
    null
};

var result = DoStuff(x, DoStuff); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T21:30:29.497

像这样的东西？：

```
private Collection DoStuff<T>(Collection tmp) 
{
    // This will probably assert as you are modifying a collection while looping in it.
    foreach (T obj in tmp) if (DoStuff(obj) == null) tmp.Remove(obj); 
    if (tmp.Count == 0) return null;
    return tmp;
} 
```

其中 T 是集合中对象的类型。

请注意，您有一条很可能会断言的行。所以：

```
private Collection DoStuff<T>(Collection tmp) 
{
    // foreach doesn't work if you are modifying the collection.
    // Looping backward with an index, so we never encounter an invalid index.
    for (int i = tmp.Count - 1; i >= 0; i--) if (DoStuff(tmp[i]) == null) tmp.Remove(tmp[i]);
    if (tmp.Count == 0) return null;
    return tmp;
} 
```

但是在这一点上......为什么让它通用，因为你不再使用 T 了？

```
private Collection DoStuff(Collection tmp) 
{
    // DoStuff can be generic, but you shouldn't need to explicitly pass it a type...
    for (int i = tmp.Count - 1; i >= 0; i--) if (DoStuff(tmp[i]) == null) tmp.Remove(tmp[i]);
    if (tmp.Count == 0) return null;
    return tmp;
} 
```

# javascript - Parse (Parse.com) 中的角色分配、管理和权限

> ID：13077571
> 
> 赞同：4
> 
> 时间：2012-10-25T21:27:22.903
> 
> 标签：javascript, backbone.js, acl, roles

[Parse](http://parse.com)中的[角色](http://www.parse.com/docs/js/symbols/Parse.Role.html)使用[ACL](http://www.parse.com/docs/js/symbols/Parse.ACL.html)获取权限。

为了在注册表中向用户添加角色，我的理解是该角色需要可读写。我担心的是，公众可以写访问意味着任何人都可以从这个角色中删除用户。

这是真的吗？如果是这样，我该如何解决？一些关于角色分配和管理的可靠示例将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:25:37.903

对于正在寻找解决方案的任何人，Parse 网站上都已对此进行了回答：

> 角色不需要是可公开写入的。如果您想在注册时自动为用户分配角色，您可以 `afterSave`在 Cloud Code 中添加一个处理程序，该处理程序使用主密钥来修改角色。
> 
> afterSave：[https ://www.parse.com/docs/cloud_code_guide#save](https://www.parse.com/docs/cloud_code_guide#save)
> 
> useMasterKey： [https ://parse.com/docs/cloud_code/symbols/Parse.Cloud.html#.useMasterKey](https://parse.com/docs/cloud_code/symbols/Parse.Cloud.html#.useMasterKey)

[https://www.parse.com/questions/role-assignment-management-and-permissions#answer-the-role-does-not-need-to-be-public-writable-if-you](https://www.parse.com/questions/role-assignment-management-and-permissions#answer-the-role-does-not-need-to-be-public-writable-if-you)

# php - 需要高效重组复杂的 PHP assoc 数组

> ID：13077578
> 
> 赞同：0
> 
> 时间：2012-10-25T21:28:05.133
> 
> 标签：php, arrays, multidimensional-array, associative-array

在我的数据挖掘项目中，我得到了一个复杂的、巨大的多维数组，其中包含我需要的所有信息，除了我必须在处理它之前对其执行“修复”。我已经编写了一些代码来解决这个问题，但是对于我必须“修复”的大量数据来说，它花费的**时间**太长了，我希望有人可以帮助我找到更有效的解决方案。

本质上，我正在使用的数组类型首先由整数索引，就像任何普通数组一样，即`$x[0], $x[1], $x[2]`，除了每个元素都是包含我需要的键对值的关联数组（例如`$x[0]['item'], $x[0]['price']`)，但是其中一个键存储得更深一些，即 ID。

ID 号存在于数组中`$x[0]['@attributes']['id']`，我想通过复制此信息以及其他密钥对来简化结构，例如`$x[0]['id']`.

我正在使用的数据集很大，但这是我的情况的简化示例：

```
$attrib1 = array('id'=>'101');
$item1 = array('@attributes'=>$attrib1, 'item'=>'milk', 'price'=>'3.50');
$attrib2 = array('id'=>'102');
$item2 = array('@attributes'=>$attrib2, 'item'=>'butter', 'price'=>'2.45');
$attrib3 = array('id'=>'103');
$item3 = array('@attributes'=>$attrib3, 'item'=>'bread', 'price'=>'1.19');
$items = array($item1, $item2, $item3);
echo "Starting data - items using itemid as attribute:\n";
print_r($items);

# set item numbers by key instead of attribute
$i=0;
while(isset($items[$i]['@attributes']['id'])) {
   $items[$i]['itemid'] = $items[$i]['@attributes']['id'];
   #unset($items[$i]['@attributes']);
   $i++;
} # while
echo "\nDesired result - items using itemid as key:\n";
print_r($items); 
```

以下是上述示例的输出：

```
Starting data - items using itemid as attribute:
Array
(
    [0] => Array
        (
            [@attributes] => Array
                (
                    [id] => 101
                )

            [item] => milk
            [price] => 3.50
        )

    [1] => Array
        (
            [@attributes] => Array
                (
                    [id] => 102
                )

            [item] => butter
            [price] => 2.45
        )

    [2] => Array
        (
            [@attributes] => Array
                (
                    [id] => 103
                )

            [item] => bread
            [price] => 1.19
        )

)

Desired result - items using itemid as key:
Array
(
    [0] => Array
        (
            [@attributes] => Array
                (
                    [id] => 101
                )

            [item] => milk
            [price] => 3.50
            [itemid] => 101
        )

    [1] => Array
        (
            [@attributes] => Array
                (
                    [id] => 102
                )

            [item] => butter
            [price] => 2.45
            [itemid] => 102
        )

    [2] => Array
        (
            [@attributes] => Array
                (
                    [id] => 103
                )

            [item] => bread
            [price] => 1.19
            [itemid] => 103
        )

) 
```

请注意在所需结果中添加的 [itemid] 键值对。有没有更快/更优雅的方式来实现这一点？我已经查看了 PHP 的一些花哨的数组函数，但我无法绕过这种更复杂的情况来使用它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:37:16.470

### 内存效率

[PHP DOC 评论](http://php.net/manual/en/class.splfixedarray.php)：内存占用`splFixedArray`大约`37%`是相同大小的常规“数组”。

`splFixedArray`还实现`Iterator`了这意味着它封装了列表并一次暴露一个元素的可见性，从而使它们更加高效。

`foreach`循环复制传递给它的任何数组。如果您正在处理大量数据，直接将其与我们的数组一起使用可能会导致性能问题

[另请参阅 PHP 数组（和值）到底有多大？（提示：大！）](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)

你可以试试

```
$it = SplFixedArray::fromArray($items);
foreach ( $it as $value ) {
    // Play with big array
} 
```

### 速度

这是一个简单的基准

```
set_time_limit(0);
echo "<pre>";

$total = 10000;
$item = array("milk","butter","bread");
$items = array();

// Generating Random Data
for($i = 0; $i < $total; $i ++) {
    $att = array('id' => $i);
    $items[] = array('@attributes' => $att,'item' => $item[$i % 3],'price' => mt_rand(100, 5000) / 100);
}
// Pure array no copy
function m1($array) {
    foreach ( $array as $k => $v ) {
        isset($v['@attributes']) and $array[$k]['id'] = $v['@attributes']['id'];
        unset($array[$k]['@attributes']);
    }
    return $array;
}

// Array clean copy
function m2($array) {
    $items = array();
    foreach ( $array as $k => $v ) {
        isset($v['@attributes']) and $items[$k]['id'] = $v['@attributes']['id'];
        $items[$k]['item'] = $v['item'];
        $items[$k]['price'] = $v['price'];
    }
    return $items;
}

// Array Iterator
function m3($array) {
    $it = new ArrayIterator($array);
    $items = array();
    foreach ( $it as $k => $v ) {
        isset($v['@attributes']) and $items[$k]['id'] = $v['@attributes']['id'];
        $items[$k]['item'] = $v['item'];
        $items[$k]['price'] = $v['price'];
    }
    return $items;
}

// SplFixedArray Array
function m4($array) {
    $it = SplFixedArray::fromArray($array);
    $items = array();
    foreach ( $it as $k => $v ) {
        isset($v['@attributes']) and $items[$k]['id'] = $v['@attributes']['id'];
        $items[$k]['item'] = $v['item'];
        $items[$k]['price'] = $v['price'];
    }
    return $items;
}

// Array Map
function m5($array) {
    $items = array_map(function ($v) {
        isset($v['@attributes']) and $v['id'] = $v['@attributes']['id'];
        unset($v['@attributes']);
        return $v;
    }, $array);
    return $items;
}

// Array Walk
function m6($array) {
    array_walk($array, function (&$v, $k) {
        isset($v['@attributes']) and $v['id'] = $v['@attributes']['id'];
        unset($v['@attributes']);
        return $v;
    });
    return $array;
}

$result = array('m1' => 0,'m2' => 0,'m3' => 0,'m4' => 0,'m5' => 0,'m6' => 0);

for($i = 0; $i < 1; ++ $i) {
    foreach ( array_keys($result) as $key ) {
        $alpha = microtime(true);
        $key($items);
        $result[$key] += microtime(true) - $alpha;
    }
}

echo '<pre>';
echo "Single Run\n";
print_r($result);
echo '</pre>';

$result = array('m1' => 0,'m2' => 0,'m3' => 0,'m4' => 0,'m5' => 0,'m6' => 0);

for($i = 0; $i < 2; ++ $i) {
    foreach ( array_keys($result) as $key ) {
        $alpha = microtime(true);
        $key($items);
        $result[$key] += microtime(true) - $alpha;
    }
}

echo '<pre>';
echo "Dual Run\n";
print_r($result);
echo '</pre>'; 
```

***它有一个非常有趣的结果***

**PHP 5.3.10**

```
Single Run
Array
(
    [m1] => 0.029280185699463 <--------------- fastest
    [m2] => 0.038463115692139
    [m3] => 0.049274921417236
    [m4] => 0.03856086730957
    [m5] => 0.032699823379517
    [m6] => 0.032186985015869
)

Dual Run
Array
(
    [m1] => 0.068470001220703
    [m2] => 0.077174663543701
    [m3] => 0.085768938064575
    [m4] => 0.07695198059082
    [m5] => 0.073209047317505
    [m6] => 0.065080165863037 <--------------- Fastest after in 2 loops
) 
```

**PHP 5.4.1**

```
Single Run
Array
(
    [m1] => 0.029529094696045
    [m2] => 0.035377979278564
    [m3] => 0.03830099105835
    [m4] => 0.034613132476807
    [m5] => 0.031363010406494
    [m6] => 0.028403043746948  <---------- fastest
)

Dual Run
Array
(
    [m1] => 0.072367191314697
    [m2] => 0.071731090545654
    [m3] => 0.078131914138794
    [m4] => 0.075049877166748
    [m5] => 0.065959930419922
    [m6] => 0.060923099517822  <---------- Fastest
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:33:52.643

看起来它来自 XML，所以我要补充一点，@attributes 中可能不仅仅包含 ID。但假设不会发生这种情况，您可以尝试使用 foreach 代替，尽管我不确定速度增益。

可能会产生影响，因为您正在修改您正在循环的同一个数组（虽然我找不到这方面的证据，所以需要进行实验）

```
$cleanedArray = array();
foreach($bigArray as $subArray)
{
  if(isset($subArray['@attributes']))
  {
     $subArray['itemid'] = $subArray['@attributes']['id'];
    unset($subArray['@attributes']); //Optional
    $cleanedArray[] = $subArray;
  }
} 
```

抱歉，如果这最终*变慢*

编辑：添加了缺少的索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:54:09.147

这与其说是一个答案，不如说是对所提供方法的比较：

我使用这个脚本来平均算法所花费的时间：

```
<?php
//base data
$attrib1 = array('id'=>'101');
$item1 = array('@attributes'=>$attrib1, 'item'=>'milk', 'price'=>'3.50');
$attrib2 = array('id'=>'102');
$item2 = array('@attributes'=>$attrib2, 'item'=>'butter', 'price'=>'2.45');
$attrib3 = array('id'=>'103');
$item3 = array('@attributes'=>$attrib3, 'item'=>'bread', 'price'=>'1.19');
$results = array('test1'=>array(),'test2'=>array(),'test3'=>array());

//set trials
$trials=1000;

//test 1
for($count=0;$count<$trials;$count++){
unset($items);
$items = array($item1, $item2, $item3);
$timer1=microtime();
$i=0;
while(isset($items[$i]['@attributes']['id'])) {
   $items[$i]['itemid'] = $items[$i]['@attributes']['id'];
   $i++;
}
$timer1=microtime()-$timer1;
$results['test1'][$count]=$timer1;
}

//test 2
for($count=0;$count<$trials;$count++){
unset($items);
unset($cleanedArray);
$items = array($item1, $item2, $item3);
$cleanedArray = array();
$timer2=microtime();
foreach($items as $subArray)
{
  if(isset($subArray['@attributes']))
  {
    unset($subArray['@attributes']);
    $cleanedArray[] = $subArray;
  }
}
$timer2=microtime()-$timer2;
$results['test2'][$count]=$timer2;
}

//test 3
for($count=0;$count<$trials;$count++){
unset($items);
unset($it);
$items = array($item1, $item2, $item3);
$it = SplFixedArray::fromArray($items);
$timer3=microtime();
foreach($it as $subArray)
{
  if(isset($subArray['@attributes']))
  {
    unset($subArray['@attributes']);
    $cleanedArray[] = $subArray;
  }
}
$timer3=microtime()-$timer3;
$results['test3'][$count]=$timer3;
}

//results
$factor=pow(10,-6);
echo "Test 1 averaged " . round(array_sum($results['test1']) / count($results['test1'])/$factor,1) . " µs, with range: " . round((max($results['test1'])-min($results['test1']))/$factor,1) . " µs - (min: " . (min($results['test1'])/$factor) . ", max: " . (max($results['test1'])/$factor) . ")<br/>";

echo "Test 2 averaged " . round(array_sum($results['test2']) / count($results['test2'])/$factor,1) . " µs, with range: " . round((max($results['test2'])-min($results['test2']))/$factor,1) . " µs - (min: " . (min($results['test2'])/$factor) . ", max: " . (max($results['test2'])/$factor) . ")<br/>";

echo "Test 3 averaged " . round(array_sum($results['test3']) / count($results['test3'])/$factor,1) . " µs, with range: " . round((max($results['test3'])-min($results['test3']))/$factor,1) . " µs - (min: " . (min($results['test3'])/$factor) . ", max: " . (max($results['test3'])/$factor) . ")<br/>";

echo "<pre>";
var_dump($results);
echo "</pre>"; 
```

此处的结果在试验次数较少时变化很大，但如果基本数组较大且运行的试验次数较多，则结果应该会变得更加偏斜。

# mysql - 从几何类型表中检索坐标

> ID：13077583
> 
> 赞同：1
> 
> 时间：2012-10-25T21:28:18.617
> 
> 标签：mysql, geometry, geospatial

我用来插入坐标的查询：

```
INSERT INTO `area` VALUES (PolygonFromText('POLYGON((".$polygon."))'))") 
```

我用来获取坐标的查询：

```
SELECT CAST(AsText(polygon) AS char) AS p from `area` 
```

What I got back is: POLYGON((40.6524347950336 22.9509570396729,40.6304214047297 22.9454638756104,40.6123102760868 22.9640033043213,40.6113980749889 22.9895808494873,40.6524347950336 22.9509570396729))

有没有更好的方法或另一种方法，也许改变我的查询只得到坐标？

# xaml - 如何将控件高度数据绑定到另一个控件的高度？

> ID：13077585
> 
> 赞同：7
> 
> 时间：2012-10-25T21:28:27.100
> 
> 标签：xaml, data-binding, windows-runtime, winrt-xaml

我试图让 2 个控件具有相同的高度。我可以只使用 XAML 吗？

如果我做了类似的事情`<Canvas Height="{Binding Height, ElementName=AnotherControl}" />`它实际上并没有做任何事情并且高度变为零。输出面板不会抱怨任何绑定错误，因此 AnotherControl.Height 确实存在。我尝试绑定到 ActualHeight 但它也没有做任何事情。

还有什么我错过的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T21:38:38.117

我的猜测是你`AnotherControl`没有明确地给出一个`Height`. 不幸的是，在 WinRT 中（与 WPF 不同，但与 Silverlight 相同），`ActualWidth`并且`ActualHeight`是所谓的“计算属性”。这意味着属性更改事件在更改时不会在内部引发。结果，绑定到它们是不可靠的，并且正如您所注意到的，它不会完全起作用。

旁注：它可能会不时起作用，但这纯粹是因为绑定框架对`ActualHeight`.

就目前而言，您**不能**仅使用 XAML 来执行此操作。您必须`ActualControl.SizeChanged`在代码隐藏中处理事件，并显式设置`Height`为`AnotherControl.ActualHeight`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T21:58:43.810

正如 Kshitij Mehta 所提到的，在 WinRT 中绑定到 ActualHeight 和 ActualWidth 是不可靠的。但是有一个很好的解决方法，您不必使用 SizeChanged-Event：

添加这个类：

```
public class ActualSizePropertyProxy : FrameworkElement, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public FrameworkElement Element
    {
        get { return (FrameworkElement)GetValue(ElementProperty); }
        set { SetValue(ElementProperty, value); }
    }

    public double ActualHeightValue
    {
        get { return Element == null ? 0 : Element.ActualHeight; }
    }

    public double ActualWidthValue
    {
        get { return Element == null ? 0 : Element.ActualWidth; }
    }

    public static readonly DependencyProperty ElementProperty =
        DependencyProperty.Register("Element", typeof(FrameworkElement), typeof(ActualSizePropertyProxy),
                                    new PropertyMetadata(null, OnElementPropertyChanged));

    private static void OnElementPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ((ActualSizePropertyProxy)d).OnElementChanged(e);
    }

    private void OnElementChanged(DependencyPropertyChangedEventArgs e)
    {
        FrameworkElement oldElement = (FrameworkElement)e.OldValue;
        FrameworkElement newElement = (FrameworkElement)e.NewValue;

        newElement.SizeChanged += new SizeChangedEventHandler(Element_SizeChanged);
        if (oldElement != null)
        {
            oldElement.SizeChanged -= new SizeChangedEventHandler(Element_SizeChanged);
        }
        NotifyPropChange();
    }

    private void Element_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        NotifyPropChange();
    }

    private void NotifyPropChange()
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs("ActualWidthValue"));
            PropertyChanged(this, new PropertyChangedEventArgs("ActualHeightValue"));
        }
    }
} 
```

将其放在资源中：

```
<UserControl.Resources>
    <c:ActualSizePropertyProxy Element="{Binding ElementName=YourElement}" x:Name="proxy" />
</UserControl.Resources> 
```

并绑定到它的属性：

```
<TextBlock x:Name="tb1" Text="{Binding ActualWidthValue, ElementName=proxy}"  /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-20T18:58:05.333

这个问题很老，但这是我的解决方案。您可以使用此代码

```
<!--First Button-->
<Button x:Name="button1" Height="50" Width="100"/>

<!--Second Button-->
<Button x:Name="button2" Height="50" Width="{Binding ElementName=button1, Path=Width}"/> 
```

我已经在我的 Windows / Windows Phone 8.1 设备上对其进行了测试，效果很好。

# mule - 如何在 MEL 中使用 XPath 从有效负载中提取文本节点值

> ID：13077588
> 
> 赞同：2
> 
> 时间：2012-10-25T21:28:32.207
> 
> 标签：mule

我想从消息的 XML 有效负载中提取一些文本值，以便可以在 jdbc 查询中使用它们。

给定下面的测试 XML 文件，我想获取第一本书的作者文本节点的字符串值。

就像是：

```
INSERT INTO books VALUES (#[xpath('/catalog/book[0]/author/text()')]) 
```

为了测试表达式，我只是使用了一个记录器，但似乎无法正确提取它。

```
<logger message="#[xpath('/catalog/book[0]/author/text()')]" level="DEBUG" doc:name="Logger"/> 
```

```
<?xml version="1.0"?>
<catalog>
    <book id="bk101">
        <author>Gambardella, Matthew</author>
        <title>XML Developer's Guide</title>
        <genre>Computer</genre>
        <price>44.95</price>
        <publish_date>2000-10-01</publish_date>
   </book>
   <book id="bk102">
       <author>Ralls, Kim</author>
       <title>Midnight Rain</title>
       <genre>Fantasy</genre>
       <price>5.95</price>
       <publish_date>2000-12-16</publish_date>
   </book>
</catalog> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T22:03:54.043

这是正确的 MEL 表达式：

```
#[xpath('/catalog/book[1]/author/text()').text] 
```

注意在 XPath 中，第一个节点是 1 而不是 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T03:31:57.393

大卫的回答很好，除了一件事。对我来说，**.text**不起作用。我不得不使用**.wholeText**。这可能是因为我在工作项目的某处使用了 xerces 实现。

# visual-studio-2012 - Web Essentials .Less 编译器“堆栈空间不足”

> ID：13077589
> 
> 赞同：1
> 
> 时间：2012-10-25T21:28:37.547
> 
> 标签：visual-studio-2012, less

您好，我在 Visual Studio 的[Web Essentials 2012](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)扩展中遇到此错误：

```
/*
ERROR: ERROR:
  type: Syntax
  message: Out of stack space
  filename: C:\Users\username\myproject\style.less
  column: -1
  extract: ,,@media screen and (max-width:1124px) 

*/ 
```

less 文件中的违规行是这样的：

```
@media screen and (max-width:1124px) 
{
} 
```

所以 Web Essentials 不喜欢媒体查询还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:55:47.640

该错误来自 LESS 编译器本身，而不是直接来自 Web Essentials。编译器是 1.3.1 版本，但您可能拥有旧版本的编译器，具体取决于您的 Web Essentials 版本。在此处获取最新的夜间版本：http: //madskristensen.net/custom/webessentials2012.vsix? [1.8.9.1](http://madskristensen.net/custom/webessentials2012.vsix?1.8.9.1)

# tridion - 无法通过 GUI 扩展弹出窗口获取元素错误的唯一 ID

> ID：13077591
> 
> 赞同：4
> 
> 时间：2012-10-25T21:28:49.043
> 
> 标签：tridion, tridion-2011

我正在构建一个 GUI 扩展，其中包括一个弹出窗口，该弹出窗口在单击功能区栏中的新按钮时打开。弹出窗口包括一个下拉列表，其中动态填充了使用核心服务从系统收集的一些信息。至少是这样的想法。我能够让按钮出现，它会打开弹出窗口，但是一旦我从弹出窗口的 javascript 开始，我就会收到一个错误`Unable to get unique id for element`，并且 CME 没有完成加载。这是我到目前为止所拥有的：

**弹出 ASPX**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="SwitchUserPopup.aspx.cs" Inherits="SwitchUser.Popups.SwitchUserPopup" %>
<%@ Import Namespace="Tridion.Web.UI.Core" %>
<%@ Import Namespace="Tridion.Web.UI" %>
<%@ Import Namespace="System.Web" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:c="http://www.sdltridion.com/web/ui/controls">
<head runat="server">
    <title>Select User</title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <h1>Select User</h1>
            <c:dropdown id="SwitchUserDropdown" runat="server" nullable="false"/>
        </div>
    </form>
</body>
</html> 
```

**弹出 ASPX 代码**

```
namespace SwitchUser.Popups
{
    [ControlResourcesDependency(new [] { typeof(Popup),
                                         typeof(Tridion.Web.UI.Controls.Button),
                                         typeof(Stack),
                                         typeof(Dropdown),
                                         typeof(List) })]
    [ControlResources("SwitchUser.Resources")]
    public partial class SwitchUserPopup : TridionPage
    {
        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);

            TridionManager tm = new TridionManager();

            tm.Editor = "SwitchUser";
            System.Web.UI.HtmlControls.HtmlGenericControl dep =
                    new System.Web.UI.HtmlControls.HtmlGenericControl("dependency");
            dep.InnerText = "Tridion.Web.UI.Editors.CME";
            tm.dependencies.Add(dep);

            System.Web.UI.HtmlControls.HtmlGenericControl dep2 =
                    new System.Web.UI.HtmlControls.HtmlGenericControl("dependency");
            dep2.InnerText = "Tridion.Web.UI.Editors.CME.commands";
            tm.dependencies.Add(dep2);

            //Add them to the Head section
            this.Header.Controls.Add(tm); //At(0, tm);
        }
    }
} 
```

**弹出式JS**

```
Type.registerNamespace("SwitchUser.Popups");

SwitchUser.Popups.SwitchUser = function (element) {
    Type.enableInterface(this, "SwitchUser.Popups.SwitchUser");
    this.addInterface("Tridion.Cme.View");
};

SwitchUser.Popups.SwitchUser.prototype.initialize = function () {
    $log.message("Initializing Switch User popup...");
    this.callBase("Tridion.Cme.View", "initialize");

    var p = this.properties;
    var c = p.controls;

    c.UserDropdown = $controls.getControl($("#SwitchUserDropdown"), "Tridion.Controls.Dropdown");
};

$display.registerView(SwitchUser.Popups.SwitchUser); 
```

扩展名已正确配置`System.config`- 我可以在 javascript 控制台中看到日志消息。但是，我还看到此`Unable to get unique id for element`错误以及以下附加信息：

> 匿名(object{..})
> WebRequest.completed(object{..})
> Net.loadFile$onComplete(object{..})
> Net.loadFile$onOperationCompleted()
> Xml.loadXmlDocuments$onSuccess(array [1](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/Example/ "示例 PowerTool") )
> Xml.loadXmlDocument$ onSuccess(array [1](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/Example/ "示例 PowerTool") )
> Dropdown.setup$filesLoaded(object{..})
> setupDone()
> anonymous(function: DisplayController$start())
> DisplayController.start()
> anonymous()
> anonymous(undefined, "Tridion.Controls.Dropdown")
> Tridion.Assert$raiseError("无法获取元素的唯一 ID。")

从记录的信息来看，问题似乎出在下拉菜单上。如果我注释掉我的 JS 中注册视图的行，那么我不会收到错误消息，但我也不会收到日志消息，所以我怀疑这是一个强制调用。谁能解释为什么会发生这种情况？我一直在使用[示例 PowerTool 代码](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/Example/ "示例 PowerTool")作为参考，我相信我已经复制了那里的内容......

**更新**

我试图单步执行代码 - 我找到了合适的行并在那里放置了一个断点。然后我重新加载了 CME，突然我的断点在与我的代码无关的行上，我找不到任何与我的代码相关的东西。但是，根据控制台，它仍在执行中。

因此，我将日志消息放在我的初始化方法中，如下所示：

```
SwitchUser.Popups.SwitchUser.prototype.initialize = function () {
    $log.message("Initializing Switch User popup...");
    this.callBase("Tridion.Cme.View", "initialize");
    $log.message("Tridion.Cme.View callBase done");
    var p = this.properties;
    var c = p.controls;
    $log.message("Set properties and controls");
    c.UserDropdown = $controls.getControl($("#SwitchUserDropdown"), "Tridion.Controls.Dropdown");
    $log.message("Got UserDropdown control");
}; 
```

我可以在控制台中看到它记录到`Set properties and controls`然后我得到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:52:20.883

我在 getControl 方法中放置了一个断点，并且能够确定我收到错误的原因。`$("#SwitchUserDropdown")`没有找到任何东西，所以当下面的代码运行时它抛出了错误：

```
var id = Tridion.Utils.Dom.getUniqueID(element);
if (id)
{
    var control = instances[id];
    if (!control)
    {
        control = instances[id] = new ctor(element, settings);
        if (Tridion.Type.isFunction(control.initialize))
        {
            control.initialize();
        }
    }
}
else
{
    Tridion.Utils.Assert.raiseError("Unable to get unique id for element.");
}
return control; 
```

现在似乎很明显，我知道为什么会发生代码在错误的时间运行。我相信它不应该在 CME 加载时运行，而只能在打开弹出窗口时运行。这导致我查看编辑器配置文件中的资源配置。我之前已将弹出窗口的 JS 与与功能区工具栏按钮关联的其他资源分组。通过将弹出的特定资源放在他们自己的资源组中，我能够停止错误并成功获得控制权。

# mercurial - 当多个可用时在 Mercurial 中推送单个变更集

> ID：13077593
> 
> 赞同：6
> 
> 时间：2012-10-25T21:28:56.180
> 
> 标签：mercurial

我有 5 个可从本地 Mercurial 存储库推送的传出变更集，我现在只想推送其中一个。这一变更集位于所有可用变更集的中间。

例如，我有以下修订：

*   6639
*   6546
*   6545
*   6544
*   6543

我只想推6545。有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T21:32:42.073

您只能将连续的变更集列表推送到所需的值。

所以

```
hg push -r 6545 
```

会推`6543..6545`。

而且你不能仅仅`6545`因为没有预先的变更集而推动它的变化是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:02:37.740

您可以使用[Mercurial Queues](http://mercurial.selenic.com/wiki/MqExtension)扩展来执行此操作。您可能需要启用链接页面上详细说明的 mq 扩展。

您可以将所有修订导入队列，将它们全部从堆栈中弹出，然后在推送之前应用您想要的修订，然后再应用其余的。像这样的东西：

```
> hg qimport --rev 6639
> hg qimport --rev 6543:6546
> hg qpop --all
> hg qpush --move 6545.diff

Here you might have to resolve conflicts

> hg qfinish --applied
> hg push
> hg qpush --all

Again, might need to resolve conflicts here. 
```

这使您的存储库`6545`应用并推送了修订版（但现在使用了不同的修订版号），并且您的其余更改已应用但未推送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T22:56:24.903

你想要的是不可能的。修订必须使存储库处于确定状态，但如果您可以推送 6545 并将远程存储库更新到它，它将不包括来自早期（未推送）修订集的更改。这违背了 mercurial 的核心设计。你可以做的是：

a) 分发包含与 6545 版相同更改的差异（补丁）。您可以通过`hg diff`或以其他方式执行此操作，但应用补丁与您的 6545 版没有内在联系：它是一个单独的修订版，“发生”到做同样的改变。如果幸运的话，它们将来可以毫无问题地合并。或者

b) 临时（使用 mq 扩展）或永久（使用帮助`rebase`或其他扩展）重写您的历史记录，以便在已经提交的修订之后立即放置 6545。然后，您可以像任何其他已推送其祖先的修订版一样推送它。

# android - 从 iOS 到 Android 的资产映射？

> ID：13077594
> 
> 赞同：0
> 
> 时间：2012-10-25T21:28:56.107
> 
> 标签：android, ios, resolution, porting, assets

我基本上正在将应用程序从 iOS 移植到 Android，并且对带来资产的一般策略感到好奇。

我们的 iOS 项目基本上有 3 类资产：
* 小 = 480 x 320 (163 dpi)
* 大 = 960 x 640 (326 dpi)
* 高 = 1136 x 640 (326 dpi)

我认为小型资产将适用于 ldpi 和 mdpi Android 设备，而大型资产将适用于 hdpi 和 xhdpi Android 设备。但是，我不确定这是否足够精细，并且想知道我们是否应该为每个密度桶（ldpi、mdpi、hdpi 和 xhdpi）请求单独的资产类别。

哪位有这方面的经验，请提供一些意见！

# wpf - 将列表绑定到 xaml (wpf) (Application.Resources) 中的对象列表属性

> ID：13077597
> 
> 赞同：0
> 
> 时间：2012-10-25T21:29:10.723
> 
> 标签：wpf, list, xaml, bind

我一直在互联网上搜索很多来解决这个问题，但找不到合适的解决方案。这就是问题所在：（这是一个 WPF 应用程序，在 VS2010 中）假设我有这个类：

```
public class Airplane
{
   public string AirplaneName{get;set;}
   public ObservableCollection<People> myPeopleList {get;set;}
}
public class People
{
   public string Name{get;set;}
   public string SeatNumber{get;set;}   
} 
```

现在我想创建一个 Airplane 类的实例，包括文件 App.xaml 中的人员列表。也就是创建自己的资源（Application.Resources）。我试过了，但我得到了一个例外：

```
<lcl:AirPlaneCollection x:Key="apCollection" >
            <lcl:Airplane  Name="airbus-780" myPeopleList="{StaticResource pList}" >
</lcl:AirPlaneCollection>
        <lcl:PeopleCollection x:Key="pList">
            <lcl:People  Name="name1" SeatNumber="1"/>
           <lcl:People  Name="name2" SeatNumber="2"/>
        </lcl:PeopleCollection> 
```

AirPlaneCollection 和 PeopleCollection 只是一个简单的类，它继承自`ObservableCollection<Airplane>`并且`ObservableCollection<Poeple>` 当我尝试使用该资源时 (Application.Current.Resources["appCollection"] 它编译但我在运行时遇到异常。我的 TreeView DataTemplate 表现良好，因为如果我实例化代码隐藏中的类作为常规列表（添加等）它完美地工作..我做错了什么？？提前感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:13:24.610

found the solution at last!! in the Application.Resources the "pList" needs to be declare above "apCollection". probably the declaration order is important..

# java - 如何使用 opensearch 和 Lucene 发送搜索查询？

> ID：13077599
> 
> 赞同：0
> 
> 时间：2012-10-25T21:29:22.883
> 
> 标签：java, lucene

我有一个 opensearch 描述，应该使用它以编程方式发送我的查询。不幸的是，我对这一切都很陌生——有没有使用 Lucene 和 Java 的例子？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:43:46.173

我什么都不知道，`OpenSearch`但我可以给你一些提示`Lucene`。要进行`Lucene`搜索，您必须首先对`Lucene`数据（文本文件、xml 文件、数据库等）进行索引。

有很多例子如何`Lucene`在互联网上使用。[这](http://www.lucenetutorial.com/sample-apps/textfileindexer-java.html)看起来很好的例子如何制作`Lucene`索引。

[这](http://www.lucenetutorial.com/lucene-in-5-minutes.html)涵盖了所有内容：索引、搜索和显示结果（这是一个非常简单的示例）。因为您的问题不是很具体，所以我可以提供帮助。如果您有特定的问题，我很乐意提供帮助。

# asp.net-mvc-3 - IIS 中的 ReportViewer 和 ASP.NET MVC 3 不起作用

> ID：13077600
> 
> 赞同：0
> 
> 时间：2012-10-25T21:29:27.853
> 
> 标签：asp.net-mvc-3, reportviewer

我有一个应用程序将 webforms 与 IIS 中托管的 mvc3 结合起来。

对应于 MVC 3 的内容在 IIS 中完美运行，但是当我尝试访问页面时**.aspx**不起作用

错误：

**解析器错误消息：无法识别的属性“targetFramework”。请注意，属性名称区分大小写。**

```
<compilation debug="true" targetFramework="4.0"> 
```

我已经使用 .NET 4 配置了应用程序池。仅当我尝试访问页面 .aspx 时才会出现该错误。其余的工作完美。

注意：使用 VS 2010 运行 alplicacion 时，一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:55:42.917

## 修复“targetFramework”问题

您需要使用 Asp.net v 4.0 注册 IIS。
使用命令提示符执行`C:\Windows\Microsoft.NET\Framework\v4.0.30319>aspnet_regiis.exe -i`
~~您`application pool`托管的应用程序可能不在`Asp.net v 4.0`。~~创建一个新的 Asp.net 版本的应用程序池`v 4.0`和`managed pipeline mode`- `Integrated`。并在其下托管您的应用程序。

## 修复报告查看器的问题

为了解决报告查看器的问题，您应该在服务器中安装[Microsoft Report Viewer 2010 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=6442)。（还需要在服务器中安装 ASp.Net MVC 3）

# c# - 为什么在 main() 退出之前调用 Dispose()？

> ID：13077601
> 
> 赞同：11
> 
> 时间：2012-10-25T21:29:32.580
> 
> 标签：c#, .net, dispose, handle, resource-leak

我的 .net 服务通过在 Main() 循环退出之前在 finally 块中调用 resourceName.Dispose() 来清理其所有非托管资源。

**我真的必须这样做吗？**

我认为我不能因为进程结束而泄漏任何资源是正确的吗？Windows 将关闭不再使用的所有句柄，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T22:15:40.270

对象可以封装的资源类型没有限制`IDisposable`。绝大多数被`IDisposable`对象封装的资源都会在进程关闭时被操作系统清理掉，但有些程序可能会使用操作系统一无所知的资源。例如，需要底层数据库不支持的锁定模式的数据库应用程序可能会使用一个或多个表来跟踪“签出”的内容以及由谁“签出”。使用此类表“检查”资源的类可以确保其`Dispose`方法，一切都被重新签入，但如果程序关闭而类没有机会清理表，则由该表保护的资源将悬空。由于操作系统不知道这些表中的任何一个是什么意思，所以它无法清理它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T21:32:27.603

在那种特定情况下，跳过这个可能是可以的。

首先要了解的是，虽然结束进程本身应该足以清理大多数事情，但一些非托管资源可能会处于不良或未关闭状态。例如，您可能有一个按席位获得许可的应用程序，当应用程序关闭时，您需要在某处更新数据库记录以释放您的许可。如果进程错误地终止，则不会发生任何更新，并且您最终可能会将人们锁定在您的软件之外。仅仅因为您的进程终止并不是不进行清理的借口。

但是，在具有 IDisposable 模式的 .Net 世界中，您可以获得更多保障。当进程退出时，所有剩余的终结器都将运行。*如果*Dispose() 模式被正确实现（这是一个比它应该的更大的“如果”），终结器仍然在那里为他们的对象处理任何剩余的非托管资源......

但是，最好始终养成自己*正确*处理这些东西的习惯。FWIW，仅调用 .Dispose() 不足以正确执行此操作。您的 .Dispose() 调用*必须*包含在 finally 块中（包括通过`using`语句获得的隐式 finally 块）。

# esb - Mule ESB 动态设置端点路径

> ID：13077603
> 
> 赞同：0
> 
> 时间：2012-10-25T21:29:39.787
> 
> 标签：esb, mule

我正在尝试构建一个 Web 服务，该服务接受许多用于构建 Bing 查询 API 路径的变量。出于某种原因，如果我构建 URI，我的流程会识别出新的 URI 已正确分配给有效负载，但是当我将有效负载分配给出站 HTTP 端点时，它会失败。

```
<flow name="BingQuery" doc:name="BingQuery">
        <http:inbound-endpoint exchange-pattern="one-way" host="localhost" port="8082" doc:name="HTTP" />
       <set-variable variableName="query" doc:name="Variable" value="#[header:INBOUND:query]"/>
       <set-variable variableName="numResults" doc:name="Variable" value="#[header:INBOUND:top]"/>
       <set-variable variableName="offsetResults" doc:name="Variable" value="#[header:INBOUND:offset]"/>
       <scripting:component doc:name="Groovy">
           <scripting:script engine="Groovy">
               <scripting:text><![CDATA[def query = message.getInvocationProperty("query")
                def numResults = message.getInvocationProperty("numResults")
                def offsetResults = message.getInvocationProperty("offsetResults")
                def path = "Data.ashx/Bing/Search/v1/Web?Query=" + "$query" + "&amp;WebFileType=%27PDF%27&amp;\$top=" + "$numResults" + "&amp;\$skip=" + "$offsetResults" + "&amp;\$format=Json"
                    println "$path"
                    message.setProperty("pathVar","$path")
                    return null;]]></scripting:text>
           </scripting:script>
       </scripting:component> 
       <logger level="INFO" doc:name="Logger" message="#[header:OUTBOUND:pathVar]"/> 
        <https:outbound-endpoint exchange-pattern="request-response"
            host="api.datamarket.azure.com" port="443" path="#[header:OUTBOUND:pathVar]"
            user="*****" password="******"
            doc:name="Bing" /> ... 
```

我得到的例外是

```
ERROR 2012-10-25 14:14:26,250 [[poll_directory].BingQuery.stage1.02] org.mule.exception.DefaultMessagingExceptionStrategy: 
********************************************************************************
Message               : Failed to transform from "json" to "java.util.Map"
Code                  : MULE_ERROR-65110
--------------------------------------------------------------------------------
Exception stack is:
1\. Unexpected character ('T' (code 84)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
at [Source: java.io.InputStreamReader@73b62d67; line: 1, column: 2] (org.codehaus.jackson.JsonParseException)
 org.codehaus.jackson.JsonParser:1291 (null)
2\. Failed to transform from "json" to "java.util.Map" (org.mule.api.transformer.TransformerException)
 org.mule.module.json.transformers.JsonToObject:136 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/transformer/TransformerException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
org.codehaus.jackson.JsonParseException: Unexpected character ('T' (code 84)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
at [Source: java.io.InputStreamReader@73b62d67; line: 1, column: 2]
    at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1291)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportUnexpectedChar(JsonParserMinimalBase.java:306)
   + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

它不能正常工作肯定有一个简单的原因，我确信这只是因为我还不知道 Mule 中的正确语法。我也知道使用 MEL 和 Groovy 可能有更好的方法来做到这一点，但我对 MEL 还不够熟悉，无法做到这一点。

**解决方案**

原来 User 属性和 Password 属性的某些字符在发送之前已被编码。在传递给用户和密码属性之前将该密钥放入变量中可以防止这种情况并导致成功。

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:json="http://www.mulesoft.org/schema/mule/json"
    xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:http="http://www.mulesoft.org/schema/mule/http"
    xmlns:https="http://www.mulesoft.org/schema/mule/https" xmlns:file="http://www.mulesoft.org/schema/mule/file"
    xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core"
    version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd 
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/current/mule-https.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <configuration doc:name="Configuration">
        <expression-language>
            <import class="org.mule.util.StringUtils" />
        </expression-language>
    </configuration>
    <flow name="BingQuery" doc:name="BingQuery">
        <http:inbound-endpoint exchange-pattern="one-way" host="localhost" port="8082" doc:name="HTTP" />
       <set-variable variableName="query" doc:name="Variable" value="#[header:INBOUND:query]"/>
       <set-variable variableName="numResults" doc:name="Variable" value="#[header:INBOUND:top]"/>
       <set-variable variableName="offsetResults" doc:name="Variable" value="#[header:INBOUND:offset]"/>
        <scripting:component doc:name="Groovy">
          <scripting:script engine="Groovy">
              <scripting:text><![CDATA[def query = message.getInvocationProperty("query")
               def numResults = message.getInvocationProperty("numResults")
               def offsetResults = message.getInvocationProperty("offsetResults")
               def path = "Data.ashx/Bing/Search/v1/Web?Query=" + "$query" + "&WebFileType=%27PDF%27&\$top=" + "$numResults" + "&\$skip=" + "$offsetResults" + "&\$format=Json"
                   println "$path"
                   message.setProperty("pathVar","$path")
                   message.setProperty("APIIdentifier","*****")
                   return null;]]></scripting:text>
          </scripting:script>
      </scripting:component>
        <https:outbound-endpoint exchange-pattern="request-response"
            host="api.datamarket.azure.com" port="443" path="#[header:OUTBOUND:pathVar]"
            user="#[header:OUTBOUND:APIIdentifier]" password="#[header:OUTBOUND:APIIdentifier]"
            doc:name="Bing" />
        <json:json-to-object-transformer
            returnClass="java.util.Map" doc:name="JSON to Object" />
        <expression-transformer expression="#[message.payload.d.results]"
            doc:name="Expression" />
        <collection-splitter doc:name="Collection Splitter" />
        <vm:outbound-endpoint exchange-pattern="one-way"
            path="fileWriter" doc:name="VM" />
    </flow>
    <flow name="RestProcessor" doc:name="RestProcessor">
        <vm:inbound-endpoint exchange-pattern="one-way"
            path="fileWriter" doc:name="VM" />
        <set-variable variableName="fileName" value="#[message.payload.ID].pdf"
            doc:name="Variable" />
        <http:rest-service-component
            serviceUrl="#[joinChar=message.payload.Url.contains('?')?'&amp;':'?' ; StringUtils.join(new String[]{message.payload.Url,(String)joinChar,'followRedirects=true'})]"
            httpMethod="GET">
           <http:error-filter> 
               <expression-filter expression="#[Integer.valueOf(message.inboundProperties['http.status']) &gt;= 400]"></expression-filter> 
           </http:error-filter>
        </http:rest-service-component>
        <file:outbound-endpoint path="/home/administrator/Documents"
            outputPattern="#[flowVars.fileName]" responseTimeout="10000"
            mimeType="application/pdf" doc:name="File" />
    </flow>
</mule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:10:34.637

这是用 MEL 重写的流程的开始（这对我有用，尽管我针对测试端点而不是 Bing 进行了测试）。

请注意，我还在出站 HTTPS 端点上将方法设置为 GET：

```
<flow name="BingQuery">
    <http:inbound-endpoint exchange-pattern="one-way"
        host="localhost" port="8082" />
    <set-variable variableName="query"
        value="#[message.inboundProperties.query]" />
    <set-variable variableName="numResults"
        value="#[message.inboundProperties.top]" />
    <set-variable variableName="offsetResults"
        value="#[message.inboundProperties.offset]" />
    <expression-component>
        flowVars['bingQuery'] =
            'Data.ashx/Bing/Search/v1/Web?Query=' + query
          + '&amp;WebFileType=%27PDF%27&amp;$top=' + numResults
          + '&amp;$skip=' + offsetResults
          + '&amp;$format=Json';
        payload = null;
    </expression-component>
    <logger level="ERROR" message="#[bingQuery]" />
    <http:outbound-endpoint exchange-pattern="request-response"
        method="GET"
        host="api.datamarket.azure.com" port="443" path="#[bingQuery]"
        user="*****" password="******" /> 
```

如果`query`,`numResults`和`offsetResults`变量没有在流程的其他地方使用，我建议在`expression-component`.

# vb.net - 不同控件之间的事件检测 vb

> ID：13077606
> 
> 赞同：0
> 
> 时间：2012-10-25T21:29:51.997
> 
> 标签：vb.net, oop

我有一个 A 类，其中包含声明为的 2 个用户控件

```
Friend WithEvents CustInfo1 As WindowsApplication1.CustInfo
Friend WithEvents ServiceLocation1 As WindowsApplication1.ServiceLocation 
```

两者都有文本框。如果 custInfo1 中 textBoxA 的值发生变化，那么如何使 SeviceLocation1 中的 textBoxB 值也发生变化

如果有人能帮助我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:27:35.337

您需要执行以下操作：

1.  在 CustInfo 用户控件中，您需要在 textBoxA Changed 事件中编写代码，该事件引发来自 CustInfo 用户控件的事件（例如 TextBoxChanged 事件）。[提升事件声明](http://msdn.microsoft.com/en-us/library/fwd3bwed%28v=vs.71%29.aspx)

2.  在 ServiceLocation 用户控件中，为您的 textBoxB.Text 创建一个公共属性 getter 和 setter

3.  在包含两个用户控件的窗体上，在新的 CustInfo TextBoxChanged 事件中创建代码并在 ServiceLocation1 用户控件上设置新属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:29:31.677

所有控件（也包括自定义控件）都具有属性[`Controls`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)，您可以通过该属性访问该控件的（子）控件。现在您可以通过调用`.Item(key)`它的方法来检索您的文本框。然后，您可以在表单或类中为其分配事件处理程序。

```
Dim key As String = "textBoxA" 'Or simply the name of that TextBox in your CustInfo
Dim textboxA As TextBox = CustInfo1.Controls.Item(key)
AddHandler textBoxA.TextChanged, AddressOf mytextchangedhandler 
```

`mytextchangedhandler`处理该 TextBox 的 TextChanged 事件的位置。

我个人不太喜欢这种方法，因为您依赖于知道 TextBox 的名称或用户控件的 Controls 列表中的索引。

我肯定会选择在您的用户控件上创建自己的事件。它甚至很容易做到！下面怎么做。在用户控件背后的代码中，您必须添加一个事件声明：

```
Event MyTextBoxChanged(sender As Object, e As EventArgs) 
```

现在我们必须提出它，我们通过在您的用户控件中实现`TextChanged`事件来做到这一点`TextBoxA`（正如您所解释的那样）：

```
Private Sub TextBoxA_TextChanged(sender As System.Object, e As System.EventArgs) Handles TextBoxA.TextChanged
    RaiseEvent MyTextBoxChanged(Me, EventArgs.Empty)
End Sub 
```

现在我们可以`MyTextBoxChanged`在您的表单中简单地实现这个事件（），如下所示：

```
Private Sub CustInfo1_MyTextBoxChanged(sender As System.Object, e As System.EventArgs) Handles CustInfo1.MyTextBoxChanged
    ' Do something
End Sub 
```

显然我们仍然需要获取更新后的文本，现在我们可以创建自己的 EventArgs，它将为我们提供您想要的新（和/或旧值）。我们可以简单地继承`System.EventArgs`该类并添加一些属性（例如`OldText`保存旧文本值的属性`NewText`和保存新文本值的属性）：

```
Public Class MyEventArgs
    Inherits System.EventArgs

    Private _OldText As String
    Public ReadOnly Property OldText() As String
        Get
            Return _OldText
        End Get
    End Property

    Private _NewText As String
    Public ReadOnly Property NewText() As String
        Get
            Return _NewText
        End Get
    End Property

    Public Sub New(oldText As String, newText As String)
        _OldText = oldText
        _NewText = newText
    End Sub
End Class 
```

现在我们必须更改事件定义并引发以使用`MyEventArgs`：

```
Event MyTextBoxChanged(sender As Object, e As MyEventArgs)

Private Sub TextBoxA_TextChanged(sender As System.Object, e As System.EventArgs) Handles TextBoxA.TextChanged
    RaiseEvent MyTextBoxChanged(Me, New MyEventArgs(TextBoxA.Text))
End Sub 
```

并更改表单中的实现：

```
Private Sub CustInfo1_MyTextBoxChanged(sender As System.Object, e As MyEventArgs) Handles CustInfo1.MyTextBoxChanged
    MessageBox.Show(e.Text)
End Sub 
```

有关活动的更多信息可以在我们最喜欢的地点[**MSDN**](http://msdn.microsoft.com/en-us/library/ms172877.aspx)上找到。

# javascript - 如何通过带有easyXDM的AJAX帖子将javascript对象/数组作为键值对发送？

> ID：13077607
> 
> 赞同：8
> 
> 时间：2012-10-25T21:30:03.407
> 
> 标签：javascript, jquery, ajax, json, xmlhttprequest

最近我意识到我需要使用[easyXDM](https://github.com/oyvindkinsey/easyXDM)而不是 jQuery`$.ajax`来进行跨域发布请求。设置 easyXDM 后，我看到功能排列相当紧密：

jQuery：

```
$.ajax({
    url: "/ajax/",
    method: "POST",
    data: myData
}); 
```

易XDM：

```
xhr.request({
    url: "/ajax/",
    method: "POST",
    dataType: 'json', // I added this trying to fix the problem, didn't work
    data: myData
}); 
```

myData 设置如下：

```
myData = {};
myData[1] = 'hello';
myData[2] = 'goodbye';
myData[3] = {};
myData[3][1] = 'sub1';
myData[3][2] = 'sub2';
myData[3][3] = 'sub3'; 
```

当我使用 jQuery 发出请求时，它会正确处理子字段，但不能使用 easyXDM。

下面是 POST 请求如何通过 jQuery 进入服务器：

[屏幕截图与阴影.png http://img37.imageshack.us/img37/4526/screenshotwithshadow.png](http://img37.imageshack.us/img37/4526/screenshotwithshadow.png)

下面是easyXDM的用法：

[screenshot-with-shadow.png http://img204.imageshack.us/img204/4526/screenshotwithshadow.png](http://img204.imageshack.us/img204/4526/screenshotwithshadow.png)

如何像 jQuery 一样通过 easyXDM / XHR 请求发送 javascript 对象/键值对数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:11:55.637

鉴于评论中讨论的easyXDM的局限性，您可以使用它的唯一方法是将数据传递给.request时手动序列化数据，即

```
xhr.request({
    url: "/ajax/",
    method: "POST",
    data: {jsonData: JSON.stringify(myData)}
}); 
```

或者，您可以创建自己的 postMessage 解决方案，但您将排除 IE7 及以下版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T14:22:15.453

我认为您对通过 AJAX 发送跨域请求是错误的。无论 JavaScript API 是什么，您都可以通过 AJAX 跨域发送请求。但是，为了跨域接收响应，响应需要是[JSONP](http://en.wikipedia.org/wiki/JSONP)数据类型。

JSONP 只是带有填充的 JSON，例如：

**JSON：**

```
{ Key: "Hello", Value: "World" } 
```

**JSONP：**

```
callback({ Key: "Hello", Value: "World" }) 
```

这是一个细微的区别，但 JSONP 绕过浏览器同源策略并允许您使用由另一台服务器提供的 JSON 数据。

要通过 jQuery AJAX 使用来自另一台服务器的 JSON 数据，请尝试以下操作：

```
$.ajax({
    url: "http://mydomain.com/Service.svc/GetJSONP?callback=callback",
    dataType: "jsonp",
    data: myData,
    success: function(data) {
        alert(data);
    }
}); 
```

为此，您必须确保您的 Web 服务以 JSONP 而不是 JSON 的形式返回结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T06:27:43.003

由于 easyXDM 无法正确序列化，您需要手动序列化数据：

```
JSON.stringify(myData) 
```

由于请求现在将包含 json 字符串而不是对象，因此 Index.html 不应解析属性以创建 json 结构。进入easyXDM自带的index.html，找到如下代码：

```
var pairs = [];
for (var key in config.data) {
    if (config.data.hasOwnProperty(key)) {
        pairs.push(encodeURIComponent(key) + "=" + encodeURIComponent(config.data[key]));
    }
}
data = pairs.join("&"); 
```

不要在 POST 请求的情况下执行此代码。只需将 config.data 分配给数据：

```
data = config.data; 
```

# javascript - 猫鼬填充嵌入式

> ID：13077609
> 
> 赞同：32
> 
> 时间：2012-10-25T21:30:13.057
> 
> 标签：javascript, node.js, mongodb, mongoose, nosql

我使用 Mongoose.js，无法解决 3 级层次结构文档的问题。

有两种方法可以做到这一点。

**首先**- 没有参考。

```
C = new Schema({
    'title': String,
});

B = new Schema({
    'title': String,
    'c': [C]
});

A = new Schema({
    'title': String,
    'b': [B]
}); 
```

我需要显示 C 记录。我如何填充/找到它，只知道 C 的 _id？

我尝试使用：

```
A.findOne({'b.c._id': req.params.c_id}, function(err, a){
    console.log(a);
}); 
```

但我不知道如何从 returnet 中获取我需要的仅 c 对象。

**其次**，如果使用 refs：

```
C = new Schema({
    'title': String,
});

B = new Schema({
    'title': String,
    'c': [{ type: Schema.Types.ObjectId, ref: 'C' }]
});

A = new Schema({
    'title': String,
    'b': [{ type: Schema.Types.ObjectId, ref: 'B' }]
}); 
```

如何填充所有 B、C 记录以获得层次结构？

我试图使用这样的东西：

```
A
.find({})
.populate('b')
.populate('b.c')
.exec(function(err, a){
    a.forEach(function(single_a){
        console.log('- ' + single_a.title);
        single_a.b.forEach(function(single_b){
            console.log('-- ' + single_b.title);
            single_b.c.forEach(function(single_c){
                console.log('--- ' + single_c.title);
            });
        });
    });
}); 
```

但它会为 single_c.title 返回 undefined。我有办法填充它吗？

谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-08-14T15:11:38.880

从 Mongoose 3.6开始，添加了在查询中[递归填充相关文档的功能。](https://github.com/LearnBoost/mongoose/wiki/3.6-Release-Notes#added-documentpopulatedpath)以下是您可以如何执行此操作的示例：

```
 UserList.findById(listId)
         .populate('refUserListItems')
         .exec(function(err, doc){
             UserListItem.populate(doc.refUserListItems, {path:'refSuggestion'},
                   function(err, data){
                        console.log("User List data: %j", doc);
                        cb(null, doc);
                   }
             );     
          }); 
```

在这种情况下，我在 'refUserListItems' 中用他们引用的文档填充了一个 id 数组。然后，查询的结果被传递到另一个填充查询，该查询引用我想要填充的原始填充文档的字段 - 'refSuggestion'。

注意第二个（内部）填充——这就是魔法发生的地方。您可以继续嵌套这些填充并添加越来越多的文档，直到您按照需要的方式构建图表。

需要一点时间来消化它是如何工作的，但如果你通过它，它是有道理的。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-12-23T22:22:01.910

在 Mongoose 4 中，您可以像这样填充多级（即使在不同的数据库或实例中）

```
A
.find({})
.populate({
  path: 'b', 
  model: 'B',
  populate: {
    path: 'c',
    model: 'C'
  }
})
.exec(function(err, a){}); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-10-31T17:44:31.463

在 Mongoose 4 中，您可以跨多个级别填充文档：

假设您有一个跟踪用户朋友的**用户模式。**

```
var userSchema = new Schema({
  name: String,
  friends: [{ type: ObjectId, ref: 'User' }]
}); 
```

首先`populate()`让您获得用户朋友列表。但是，如果您还想要用户的朋友的朋友怎么办？在这种情况下，您可以指定一个`populate`选项来告诉 mongoose 填充`friends`所有用户朋友的数组：

```
User.
  findOne({ name: 'Val' }).
  populate({
    path: 'friends',
    // Get friends of friends - populate the 'friends' array for every friend
    populate: { path: 'friends' }
  }); 
```

取自： http: [//mongoosejs.com/docs/populate.html#deep-populate](http://mongoosejs.com/docs/populate.html#deep-populate)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-10T19:44:06.640

我迟到了，但我写了一个[Mongoose 插件](https://www.npmjs.com/package/mongoose-deep-populate)，它使得执行深度模型填充变得非常简单。对于您的示例，您可以这样做来填充`b`和`c`：

```
A.find({}, function (err, docs) {
  A.deepPopulate(docs, 'b.c', cb)
} 
```

您还可以为每个填充路径指定[Mongoose 填充选项](http://mongoosejs.com/docs/api.html#model_Model.populate)，如下所示：

```
A.deepPopulate(docs, 'b.c', {
  b: { 
    select: 'name'
  }
}, cb) 
```

查看插件[文档](https://github.com/buunguyen/mongoose-deep-populate)以获取更多信息。

# java - 如何在 Java 中检索本机字体名称？

> ID：13077611
> 
> 赞同：4
> 
> 时间：2012-10-25T21:30:22.167
> 
> 标签：java, fonts

Java中有没有办法从`Font`对象中获取本机字体名称？

我使用此代码获取我的字体`Font.decode("Serif")`，出于调试目的，我想知道使用的本机字体。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T22:50:52.843

可能没那么简单。有些字体是由很多物理字体组成的，不同的字形使用不同的物理字体。

例如，在我的 Windows 系统上，Serif 字体使用 12 种物理字体：

*   ** TrueType 字体：Family=Times New Roman 名称=Times New Roman 样式=0 文件名=C:\Windows\Fonts\TIMES.TTF
*   ** TrueType 字体：Family=Wingdings 名称=Wingdings 样式=0 文件名=C:\Windows\Fonts\WINGDING.TTF
*   ** TrueType 字体：Family=Symbol Name=Symbol style=0 fileName=C:\Windows\Fonts\SYMBOL.TTF
*   ** TrueType 字体：Family=Lucida Sans 名称=Lucida Sans 常规样式=0 文件名=C:\Java\jdk\jdk1.6.0_37\jre\lib\fonts\LucidaSansRegular.ttf
*   ** TrueType 字体：Family=MingLiU 名称=MingLiU 样式=0 文件名=C:\Windows\Fonts\MINGLIU.TTC
*   ** TrueType 字体：Family=Lucida Sans 名称=Lucida Sans 常规样式=0 文件名=C:\Java\jdk\jdk1.6.0_37\jre\lib\fonts\LucidaSansRegular.ttf
*   ** TrueType 字体：Family=SimSun 名称=SimSun 样式=0 文件名=C:\Windows\Fonts\SIMSUN.TTC
*   ** TrueType 字体：Family=Lucida Sans 名称=Lucida Sans 常规样式=0 文件名=C:\Java\jdk\jdk1.6.0_37\jre\lib\fonts\LucidaSansRegular.ttf
*   ** TrueType 字体：Family=MS Mincho 名称=MS Mincho 样式=0 文件名=C:\Windows\Fonts\MSMINCHO.TTC
*   ** TrueType 字体：Family=Batang 名称=Batang 样式=0 文件名=C:\Windows\Fonts\batang.TTC
*   ** TrueType 字体：Family=MingLiU-ExtB 名称=MingLiU-ExtB 样式=0 文件名=C:\Windows\Fonts\MINGLIUB.TTC
*   ** TrueType 字体：Family=SimSun-ExtB 名称=SimSun-ExtB 样式=0 文件名=C:\Windows\Fonts\SIMSUNB.TTF

以下代码可以将字体分解为其物理组件。它使用反射黑客来访问`sun.awt.Font2D`对象，因此使用风险自负（适用于 Oracle Java 6u37）：

```
import java.awt.Font;
import java.lang.reflect.Method;
import java.util.Locale;

import sun.font.CompositeFont;
import sun.font.Font2D;
import sun.font.PhysicalFont;

public class FontTester
{
    public static void main(String... args)
    throws Exception
    {
        Font font = new Font("Serif", Font.PLAIN, 12);
        describeFont(font);
    }

    private static void describeFont(Font font)
    throws Exception
    {
        Method method = font.getClass().getDeclaredMethod("getFont2D");
        method.setAccessible(true);
        Font2D f = (Font2D)method.invoke(font);

        describeFont2D(f);
    }

    private static void describeFont2D(Font2D font)
    {
        if (font instanceof CompositeFont)
        {
            System.out.println("Font '" + font.getFontName(Locale.getDefault()) + "' is composed of:");

            CompositeFont cf = (CompositeFont)font;
            for (int i = 0; i < cf.getNumSlots(); i++)
            {
                PhysicalFont pf = cf.getSlotFont(i);
                describeFont2D(pf);
            }
        }
        else
            System.out.println("-> " + font);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-11T18:00:31.647

[prunge](https://stackoverflow.com/users/523391/prunge)的答案几乎是完美的，只是它实际上并没有公开原生（物理）字体的名称。对 describeFont2D 方法的以下微小更改通过再次利用 Java 反射来解决问题：

不要忘记导入 java.lang.reflect.Field；

```
private static void describeFont2D( Font2D font ) throws Exception{
    if( font instanceof CompositeFont ){
        System.out.println( "Font '"+font.getFontName( Locale.getDefault() )+"' is composed of:" );
        CompositeFont cf = ( CompositeFont )font;
        for( int i = 0; i<cf.getNumSlots(); i++ ){
            PhysicalFont pf = cf.getSlotFont( i );
            describeFont2D( pf );
        }
    }else if( font instanceof CFont ){
        Field field = CFont.class.getDeclaredField( "nativeFontName" );
        field.setAccessible( true );
        String nativeFontName = ( String )field.get( font );                
        System.out.println( "-> "+nativeFontName );
    }else
        System.out.println( "-> "+font );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T22:45:09.897

如果系统字体可用，此代码将获取系统字体，如果由于某种原因它们不可用，则将获取默认系列：

```
static String[] AS_System_Fonts = null;
public static String[] getFontFamilies(){
    if( AS_System_Fonts != null ) return AS_System_Fonts;
    java.awt.GraphicsEnvironment gEnv = java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment();
    AS_System_Fonts = gEnv.getAvailableFontFamilyNames();
    if( AS_System_Fonts == null ){ // should not happen
        AS_System_Fonts = new String[8];
        AS_System_Fonts[0] = "Serif";
        AS_System_Fonts[1] = "Sans-Serif";
        AS_System_Fonts[2] = "Monospaced";
        AS_System_Fonts[3] = "Dialog";
        AS_System_Fonts[4] = "Dialog Input";
        AS_System_Fonts[5] = "Lucida Bright";
        AS_System_Fonts[6] = "Lucida Sans";
        AS_System_Fonts[7] = "Lucida Sans Typewriter";
    }
    return AS_System_Fonts;
} 
```

# jquery - ie7中未调用ajax成功函数

> ID：13077616
> 
> 赞同：1
> 
> 时间：2012-10-25T21:30:48.500
> 
> 标签：jquery, ajax, internet-explorer

很抱歉发布一个已经发布过很多次的问题。但我找不到我的具体问题的答案。我有一个通过 jQuery ajax() 方法提交的表单。它在 Firefox 和 Safari 中完美运行。但在 Internet Explorer 7 中，没有执行成功功能。

我的 javascript 代码如下所示：

```
/* FORM SCRIPT */
$('#creactform').submit( submitForm ); 

$('a.vrzknoplink').click(function(){
    alert('stap 1');
    var contactForm = $('#creactform');
    // Submit the form to the PHP script via Ajax
    $('ul#vrzknop').fadeOut(function() {
        $('p#wachttext').fadeIn();
    });

    // Actually send the form info to PHP script
    $.ajax( {
      url: contactForm.attr( 'action' ) + "?ajax=true",
      type: contactForm.attr( 'method' ),
      dataType: 'json',
      data: contactForm.serialize(),
      success: submitFinished   
    } );

    // Handle the Ajax response     
    function submitFinished( response ) {
        alert(response.Result);

        if ( response.Result == "OK" ) {
            $('div#formdiv').fadeOut("fast",function() {
                $('div#successmessage').show();
                $('p#wachttext').fadeOut();
            });
            $('.formfields').val( "" );
            $('.inputtextarea').val( "" );
            $('div#successmessage').delay(6000).fadeOut("fast",function() {
                $('div#formdiv').show();
                $('ul#vrzknop').show();
            });                 
        } 
        else if (response.Result == "ERROR" && response.ErrorCode == "missing_fields") {
            alert("De velden met een * zijn verplicht om de aanvraag te versturen.");
            $('ul#vrzknop').show();
        }
    };
    return false;
});

function submitForm() {
  return false;
}; 
```

我发现了这个问题的帖子，问题是尾随逗号，我发现解决方案将缓存设置为 false 的帖子

那对我不起作用。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:39:44.423

万岁！！有用！我已将数据类型从“json”更改为“jsonp”。那成功了。

对于可能有相同问题的任何人的一些背景信息。我正在使用 tectite 的 Formmail PHP 脚本来处理表单并将其发送到我的邮箱。老实说，我不太清楚为什么它现在可以工作，我只是网络编程的初学者。

感谢wirey，您对本帖的回复！

# jquery - 如何将表单序列化为 div

> ID：13077621
> 
> 赞同：0
> 
> 时间：2012-10-25T21:31:04.303
> 
> 标签：jquery, serialization

我正在尝试将表单序列化为 div，但它不起作用，我不知道为什么。

我有这个：

```
<div id="dialog-form">
   <form>

<LABEL for="firstname">First name: </LABEL>
          <INPUT type="text" id="firstname"><BR>
<LABEL for="lastname">Last name: </LABEL>
          <INPUT type="text" id="lastname"><BR>
<LABEL for="email">email: </LABEL>
          <INPUT type="text" id="email"><BR>
<INPUT type="radio" name="sex" value="Male"> Male<BR>
<INPUT type="radio" name="sex" value="Female"> Female<BR>
<INPUT type="submit" value="Send"> <INPUT type="reset">

    </form>
</div> 
```

我试试这个：

```
jQuery("#dialog-form").find("form").serialize() 
```

但它返回一个空字符串，即使文本字段包含数据。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:40:21.493

您的元素没有`name`属性。`<input>`序列化（实际上是常规的 HTTP 表单提交）需要命名您的输入元素，因为它的全部目的`serialize`是将您的元素`name=value`成对。

为您的标签添加`name="..."`属性：`<input>`

```
<input type="text" name="firstname" id="firstname"><br> 
```

如果未选中，您的单选按钮也将从序列化字符串中省略。

# uitableview - 无法调整 UITableView xcode 4.5.1 IOS 5.0 的大小

> ID：13077625
> 
> 赞同：0
> 
> 时间：2012-10-25T21:31:15.857
> 
> 标签：uitableview, resize

首先，当我说我已经尝试了所有建议时，请相信我。但我愿意再试一次，所以随时评论/回答。目前我的代码如下所示：

```
- (void) viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    CGRect frame = CGRectMake(tblView.frame.origin.x, tblView.frame.origin.y, tblView.frame.size.width, tblView.contentSize.height);

    [tblView setFrame:frame];
    [tblView reloadData];

    CGRect contentRect = CGRectZero;
    for (UIView *view in scrollView.subviews)
        contentRect = CGRectUnion(contentRect, view.frame);

    [scrollView setContentSize:contentRect.size];

    scrollView.frame = CGRectMake(scrollView.frame.origin.x, scrollView.frame.origin.y, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height);
} 
```

我的@interface 是：

```
@interface VH_HotelsListViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> {
    IBOutlet UIScrollView *scrollView;
    IBOutlet UIImageView *imageView;
    IBOutlet UITableView *tblView;
    NSMutableArray *hotelArray;
} 
```

我已将我的故事板表视图绑定到上面的 tblView 中。我的表视图是在运行时从我的数据库中填充的，所以我知道那里没有问题。

正如您从上面看到的，我正在获取表格视图的内容大小并尝试将框架调整到相同的高度。不过，我准确地获得了内容大小，因为它将我的滚动视图调整到那个高度。不幸的是，它对表格视图没有任何作用。虽然如果我`NSLog(@"Table View Height: %g", tblView.frame.size.height)`只是在设置之后，我会得到与 content size 相同的数字`Table View Height: 3166`。所以它就像它在工作，但实际上并没有扩展它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:07:40.257

好吧，我没有答案，所以我更新了我的项目。我已经`UITableView`完全取消了我的故事板，现在只需在代码中创建它：

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
    tblView = [[UITableView alloc] initWithFrame:CGRectMake(0, 150, 320, 500) style:UITableViewStyleGrouped];
    tblView.dataSource = self;
    tblView.delegate = self;

    [scrollView addSubview:tblView];
} 
```

然后在`viewDidAppear`：

```
- (void) viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    CGRect frame = CGRectMake(tblView.frame.origin.x, tblView.frame.origin.y, tblView.frame.size.width, tblView.contentSize.height);
    tblView.frame = frame;
    [tblView reloadData];
} 
```

这似乎奏效了。

# java - Java基本循环

> ID：13077626
> 
> 赞同：0
> 
> 时间：2012-10-25T21:31:16.853
> 
> 标签：java, loops

我不知道为什么我的第二个 for 循环不会执行。它编译但是当我运行它时它不起作用〜_〜

```
import java.util.Scanner;

public class ranges
{

 public static void main (String[] args)

  {

 Scanner scan = new Scanner (System.in);

       int size;
       int input;
       int count = 0;
       int occurence = 0;
       System.out.print ("Please enter the size of your array: ");
       size = scan.nextInt();
       int[] list = new int[size];

       for (int index = 0 ; index < list.length ; index++)
       {
           System.out.print ("Please enter an integer between 0 to 50: ");
           input = scan.nextInt();

           if ( input >= 0 && input <= 50 )
           {
               list[index] = input;
            }
           else
           {
               System.out.println ("Invalid output, please try again");
               index--;
           }
        }

       int right = (list.length)-1;
       int left = 0;

        for (int counter = left ; counter < list.length ; counter++)
        {
            while ( right >= left )
            {
                if ( list[left] == list[right] )
                {
                    occurence++;
                    right--;
                }
            }
           right = (list.length)-1;
           System.out.println ("The number " + list[left] + " was added " + occurence + "4 times");
        }

         for (int value : list)
        {
            System.out.print (value + " ");
        }
       ;

    }
} 
```

我更新的 for 循环以评估发生情况

> for (int left = 0 ; left < list.length ; left++)
> 
> {

```
 while ( right >= left )
        {
            if ( list[left] == list[right] )
            {
                occurence++;

            }
            right--;
        }

       System.out.println ("The number " + list[left] + " was added " + occurence + " times");
       right = (list.length)-1;
       occurence = 0;
    } 
```

我已经清理了一下，现在出现的情况与输入相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:39:58.280

你第二个`for`也在工作。问题在于`while`循环条件，即`while ( right >= left )`。如果`list[left] == list[right]`不相等，它会进入无限循环，因为在这种情况下`right`不会`left`发生变化。

我认为，您需要更改`while`如下（移出`right--`条件`if`）：

```
 while ( right >= left )
   {
     if ( list[left] == list[right] )
      {
        occurence++;
      }
      right--;
    } 
```

还有两个问题：

请在 while 循环之前**重新初始化** `occurence =0;`，以便计算每个数字的出现次数并`4`从`System.out.println()`下面的示例中删除：

```
for (int counter = left ; counter < list.length ; counter++)
{ 
  occurence = 0; //< initialize to 0
  while ( right >= left )
  {
      if ( list[left] == list[right] )
      {
         occurence++;
       }
           right--;
   }
   right = (list.length)-1;
       //remove 4 after "occurance +"
   System.out.println ("The number " + list[left] + 
                                            " was added " + occurence + " times");
 } 
```

编辑：使用 HashMap 的工作示例：

```
 Map<Integer, Integer> scannedNums = new HashMap<Integer, Integer>();
        for (int counter = left ; counter < list.length ; counter++)
        {
            if(scannedNums.get(list[counter]) == null){
                scannedNums.put(list[counter], 1);
            }else{
                int currentCount = scannedNums.get(list[counter]);
                scannedNums.put(list[counter], currentCount+1);
            }
        }

        Set<Integer> nums = scannedNums.keySet();
        Iterator<Integer> numIter = nums.iterator();
        while(numIter.hasNext()){
            int number = numIter.next();
            System.out.println ("The number " + number + 
                    " was added " + scannedNums.get(number) + " times");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:37:34.280

快速浏览一下，并对未来提出建议。

这段代码：

```
 while ( right >= left )
    {
        if ( list[left] == list[right] )
        {
            occurence++;
            right--;
        }
    } 
```

建议如果 list[left] != list[right]，但 right 仍然 >= left，则此循环将永远不会停止。如果您想要的只是计算找到的次数，您可能想要移动 if 语句的右侧 - OUTSIDE。

最后，当您说“循环不起作用”时，这并没有什么帮助。也许显示你的输出，或者它不起作用的方式会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:37:45.977

它给出了什么错误？

我看到的一个直接问题是，如果没有发生，while 循环将永远运行。第一个 for 循环也可能使索引超出范围。

对于第一个循环，而不是：

```
 for (int index = 0 ; index < list.length ; index++)
   {
       System.out.print ("Please enter an integer between 0 to 50: ");
       input = scan.nextInt();

       if ( input >= 0 && input <= 50 )
       {
           list[index] = input;
        }
       else
       {
           System.out.println ("Invalid output, please try again");
           index--;
       }
    } 
```

我会做：

```
 for (int index = 0 ; index < list.length ; ++index)
    {
         while(true)
         {
             System.out.print ("Please enter an integer between 0 to 50: ");
             input = scan.nextInt();
             if ( input >= 0 && input <= 50 )
             {
                list[index] = input;
                break;
             }
             System.out.println ("Invalid output, please try again");
         }
     } 
```

对于第二个循环：

```
 for (int counter = left ; counter < list.length ; counter++)
    {
        occurence = 0;
        for( int i = counter; i <= right; ++i)
        {
            if( list[left] == list[i] )
                 ++occurence;
        }
       System.out.println ("The number " + list[left] + " was added " + occurence + " times");
    } 
```

# awk - 是否可以使用 awk 将不同的行打印到不同的输出文件

> ID：13077631
> 
> 赞同：22
> 
> 时间：2012-10-25T21:31:36.520
> 
> 标签：awk

我想根据不同的条件，使用 awk 将不同的行打印到不同的输出文件，比如

```
awk '{if($2>10) print > outfile1; else print > outfile2}' infile 
```

但是这个脚本不起作用如何修改它？谢谢！>

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T21:34:28.977

您需要用双引号关闭文件名：

```
awk '{if($2>10) {print > "outfile1"} else {print > "outfile2"}}' infile 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T21:33:44.083

尝试这样做：

```
awk '{if($2>10) print > "outfile1"; else print > "outfile2"}' infile 
```

如果您 ommit `"`，您将重定向到（可能不存在的）变量。就我而言，我重定向到文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T22:05:30.377

```
awk '{print > "outfile" ($2>10 ? 1 : 2)}' infile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:33:34.763

你可以只复习两次。

```
cat infile | awk '{if($2>10) print}' > outfile; cat infile | awk '{if($2<=10) print}' > outfile2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T21:35:28.320

用双引号引用您的目标文件名，您就可以开始了。

# php - 无法在 magento 管理员中访问系统 > 配置 > 高级 > 系统选项卡？

> ID：13077635
> 
> 赞同：1
> 
> 时间：2012-10-25T21:31:56.003
> 
> 标签：php, magento

当我尝试访问 magento admin 中的 System > Configuration > Advanced > System 选项卡时，它给了我以下错误：

```
Notice: Trying to get property of non-object  in /app/code/core/Mage/Adminhtml/Block/System/Config/Form.php on line 526

#0 /app/code/core/Mage/Adminhtml/Block/System/Config/Form.php(526): mageCoreErrorHandler(8,'Trying to get p...', '/app/code/c...', 526, Array)
#1 [internal function]: Mage_Adminhtml_Block_System_Config_Form->_sortForm('1', 'text')
#2 /app/code/core/Mage/Adminhtml/Block/System/Config/Form.php(266): usort(Array, Array)
#3 /app/code/core/Mage/Adminhtml/Block/System/Config/Form.php(210): Mage_Adminhtml_Block_System_Config_Form->initFields(Object(Varien_Data_Form_Element_Fieldset), Object(Mage_Core_Model_Config_Element), Object(Mage_Core_Model_Config_Element))
#4 /app/code/core/Mage/Adminhtml/Block/System/Config/Edit.php(92): Mage_Adminhtml_Block_System_Config_Form->initForm()
#5 /app/code/core/Mage/Adminhtml/controllers/System/ConfigController.php(102): Mage_Adminhtml_Block_System_Config_Edit->initForm()
#6 /app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Adminhtml_System_ConfigController->editAction()
#7 /app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('edit')
#8 /app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#9 /app/code/local/Mage/Core/Model/App.php(348): Mage_Core_Controller_Varien_Front->dispatch()
#10 /app/Mage.php(640): Mage_Core_Model_App->run(Array)
#11 index.php(80): Mage::run('', 'store')
#12 {main} 
```

我尝试验证源文件，但源代码没有变化。提前致谢。

谢谢，基米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:29:18.577

确保文件 magento/var/.htaccess、目录 magento/app/etc、magento/var 以及 magento/media 下的所有目录都可被 Web 服务器写入。

或者看这个

[Magento 管理员 > 系统 > 配置 > 高级 > 系统 - 致命错误](https://stackoverflow.com/questions/10891826/magento-admin-system-configuration-advanced-system-fatal-error/10898159#10898159)

[Magento 管理员 > 系统 > 配置 > 高级 > 系统 - 致命错误](https://stackoverflow.com/questions/10891826/magento-admin-system-configuration-advanced-system-fatal-error/10898159#10898159)

# sql-server-2008 - 参数化使用 NOT LIKE、“^”通配符的 SQL 查询？

> ID：13077636
> 
> 赞同：1
> 
> 时间：2012-10-25T21:32:00.653
> 
> 标签：sql-server-2008, wildcard, sql-like

如何参数化以下查询？（顺便说一句，我使用的是全文索引表，因此`CONTAINS()`）

```
SELECT * FROM Table WHERE CONTAINS(Column, 'cat OR dog') 
and ((column NOT LIKE '%[^ cat OR dog]%')); 
```

这没有用：

```
 DECLARE @term1 VARCHAR(10);

 DECLARE @term2 VARCHAR(10);

 SET @term1 = 'cat';

 SET @term2 = 'dog';

SET @term3 = @term1 + ' ' + 'OR' + ' ' + @term2;

SET @term4 = '[^ @term1  OR  @term2 ]' ;

SELECT * FROM table WHERE CONTAINS(column, @term3) <--up to this point works
AND (column NOT LIKE '%[@term4]%'); <--this part doesn't include the second term (@term2) 
```

如果您想最终解决这个问题，我的全文索引表如下所示：

```
 animalListID     AnimalsList
       1           cat dog
       2           cat
       3           cat dog bird 
```

（基本上我需要`SELECT`返回带有'cat dog'和'cat'而不是'cat dog bird'的行的语句的参数化版本）

**这是我数据的一个非常简化的版本，但问题与我试图实现的概念完全匹配。该表将有数百万行，每行中有许多术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:03:35.643

你应该做

```
SET @term4 = '[^ ' + @term1 + ' OR ' + @term2 + ' ]'; 
```

和

```
column NOT LIKE '%' + @term4 + '%' 
```

* * *

或者，您可以初始化`@term4`以包括`%`标志：

```
SET @term4 = '%[^ ' + @term1 + ' OR ' + @term2 + ' ]%'; 
```

然后将`LIKE`语句简化为：

```
column NOT LIKE @term4 
```

# python - 使用正则表达式的 Python XML 重建

> ID：13077638
> 
> 赞同：3
> 
> 时间：2012-10-25T21:32:02.297
> 
> 标签：python, xml, regex

我有这个部分 XML

```
 string = ''' 
   <x:root>
       <x:tag1 x:anyAttrib="anyValue" x:anyAttrib="anyValue" x:anyAttrib="anyValue" />
       <x:tag2 x:anyAttrib="anyValue" x:anyAttrib="anyValue" x:anyAttrib="anyValue">
          someValue
       </x:tag2>
       <x:tag3> someValue
    ''' 
```

现在我想“愚蠢地”修复它。我想到了一种方法——正则表达式所有的开始元素和结束元素——>检查哪个元素丢失并添加它。当然不会涉及太多细节。到目前为止我得到的是（这不起作用）：

```
import re
starts = re.compile('(?<=<)x:\w+(?=>)|(?<=<)x:\w+(?! .+ />)')
print(start.findall(string)) 
```

我期望的是 x:root ， x:tag2 ， x:tag3 的列表

我一直在谷歌搜索并尝试了很多，但找不到答案。我从这个表达式中得到的唯一东西是 x:root 、 x:tag1 、 x:tag3。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:56:48.170

[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)或许可以修复它：

```
import BeautifulSoup

content = ''' 
<x:root>
   <x:tag1 x:anyAttrib="anyValue" x:anyAttrib="anyValue" x:anyAttrib="anyValue" />
   <x:tag2 x:anyAttrib="anyValue" x:anyAttrib="anyValue" x:anyAttrib="anyValue">
      someValue
   </x:tag2>
   <x:tag3> someValue
'''

soup = BeautifulSoup.BeautifulStoneSoup(content)
print(soup.prettify()) 
```

产量

```
<x:root>
 <x:tag1 x:anyattrib="anyValue" x:anyattrib="anyValue" x:anyattrib="anyValue">
  <x:tag2 x:anyattrib="anyValue" x:anyattrib="anyValue" x:anyattrib="anyValue">
   someValue
  </x:tag2>
  <x:tag3>
   someValue
  </x:tag3>
 </x:tag1>
</x:root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:48:24.860

使用`sgmlib`默认python附带的... 输入1

```
string1 = '''
   <root xmlns:x='www.test.com'>
       <x:tag1 x:anyAttrib="anyValue" x:anyAttrib="anyValue" x:anyAttrib="anyValue" />
       <x:tag2 x:anyAttrib="anyValue" x:anyAttrib="anyValue" x:anyAttrib="anyValue">
          someValue
       </x:tag2>
       <x:tag3> someValue
    '''

import re
import sgmllib
sgmllib.tagfind = re.compile('[a-zA-Z][-_.:a-zA-Z0-9]*')
starts = re.findall(sgmllib.tagfind, string1)
print starts 
```

输出1

```
['root', 'xmlns:x', 'www.test.com', 'x:tag1', 'x:anyAttrib', 'anyValue', 'x:anyAttrib', 'anyValue', 'x:anyAttrib', 'anyValue', 'x:tag2', 'x:anyAttrib', 'anyValue', 'x:anyAttrib', 'anyValue', 'x:anyAttrib', 'anyValue', 'someValue', 'x:tag2', 'x:tag3', 'someValue'] 
```

或输入2

```
starts1 = re.finditer(sgmllib.tagfind, string1)
for x in starts1:
    print x.start(), x.end(), x.group(0) 
```

输出2：

```
5 9 root
10 17 xmlns:x
19 31 www.test.com
42 48 x:tag1
49 60 x:anyAttrib
62 70 anyValue
72 83 x:anyAttrib
85 93 anyValue
95 106 x:anyAttrib
108 116 anyValue
129 135 x:tag2
136 147 x:anyAttrib
149 157 anyValue
159 170 x:anyAttrib
172 180 anyValue
182 193 x:anyAttrib
195 203 anyValue
216 225 someValue
235 241 x:tag2
251 257 x:tag3
259 268 someValue 
```

或使用`elementTree`默认python附带的。[http://docs.python.org/2/library/xml.etree.elementtree.html](http://docs.python.org/2/library/xml.etree.elementtree.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:56:30.280

感谢亚历克西斯帮助我。

正确的表达是：

```
re.findall(r'<\s*(w:\w+)[^>]*(?<!/)>', string) 
```

使用此表达式，您将能够提取两种情况：

第一的`<tag>`

第二`<tag attrib1="value" attrib2="value" attribN="value"/>`

我尝试使用一些内置的 python 解析器，但没有成功，包括 Beautifulsoup，不幸的是它没有完全按照我预期的方式修复 XML。

祝你有个好的一天！:)

# sql - 我将如何使用 SELECT 语句将此数据从两列转换为三列？

> ID：13077645
> 
> 赞同：1
> 
> 时间：2012-10-25T21:32:52.897
> 
> 标签：sql, sql-server, sas, pivot-table

我继承了一个设计糟糕的表格，其中数据存储如下：

```
Period |  Identifier |   Value
----------------------------------
1      | AB1         | some number
1      | AB2         | some number
1      | AB3         | some number
1      | AB4         | some number
1      | AB5         | some number
1      | A1          | some number
1      | A2          | some number
1      | A3          | some number
1      | A4          | some number
1      | A5          | some number
2      | AB1         | some number
2      | AB2         | some number
2      | AB3         | some number
2      | AB4         | some number
2      | AB5         | some number
2      | A1          | some number
2      | A2          | some number
2      | A3          | some number
2      | A4          | some number
2      | A5          | some number 
```

我正在尝试使用 SELECT 语句将数据转换为这种格式：

```
Row # | First value | Second value
1     | A1's number | AB1's number     // The next 5 rows are data from period 1
2     | A2's number | AB2's number
3     | A3's number | AB3's number
4     | A4's number | AB4's number
5     | A5's number | AB5's number
6     | A1's number | AB1's number     // These 5 rows are from period 2
7     | A2's number | AB2's number
8     | A3's number | AB3's number
9     | A4's number | AB4's number
10    | A5's number | AB5's number 
```

`AB%`并且`A%`是该格式的两个单独的ID `WHERE LIKE ...`，我认为这会稍微挫败条款。我不完全确定可以将数据强制转换为所需的格式，但我的主管要求我进行调查。

我不知道 SQL 代码的最初尝试是查看行号本身并使用，但正如我所说，我不确定如何沿着这条路线前进。

目前，数据在 SQL Server 中，但将使用`proc sql`. 我认为这些标准在很大程度上符合 SQL Server，即使`DECLARE`不受支持。

不，我不知道以这种方式存储数据的是谁的想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:45:01.493

如果您使用的是 SAS，那么我只会使用 PROC TRANSPOSE。获取数据以包含标签变量，该变量确定数据将移动到哪个变量：

```
data datatable;
infile datalines dlm='|';
input
Period Identifier $ Value $;
datalines;
1      | AB1         | some number
1      | AB2         | some number
1      | AB3         | some number
1      | AB4         | some number
1      | AB5         | some number
1      | A1          | some number
1      | A2          | some number
1      | A3          | some number
1      | A4          | some number
1      | A5          | some number
2      | AB1         | some number
2      | AB2         | some number
2      | AB3         | some number
2      | AB4         | some number
2      | AB5         | some number
2      | A1          | some number
2      | A2          | some number
2      | A3          | some number
2      | A4          | some number
2      | A5          | some number
;;;
run;

data have;
set datatable;
idlabel = compress(identifier, ,'d');
byval = compress(identifier,,'kd');
run;

proc sort data=have;
by period byval;
run;
proc transpose data=have out=want;
by period byval;
id idlabel;
var value;
run; 
```

如果出于某种原因您必须在 SQL 中执行此操作，则最好将其作为自身的连接来执行。您想为 AB 和 A 加入 period=1 和 compress(identifier,,'kd')=1 的行，因此您可以这样做：

```
proc sql;
  create table want as 
    select A.period, AB.value as AB, A.value as A
    from (select * from have where compress(identifier,,'d')='AB') AB, 
         (select * from have where compress(identifier,,'d')='A') A
    where AB.period=A.period
    and compress(AB.identifier,,'kd') = compress(A.identifier,,'kd');
quit; 
```

但我认为 PROC TRANSPOSE 选项可能比自连接更有效（如果您的数据不如您显示的那么漂亮，则更灵活）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:42:06.257

如果标识符中的“B”*仅*用于区分类型 A 和类型 AB 标识符，那么您可以简单地删除该字母并加入结果：

```
SELECT ROW_NUMBER() OVER(ORDER BY AData.Period, AData.[Identifier]) AS [Row #]
    , AData.[Identifier] AS [First Value]
    , ABData.[Identifier] AS [Second Value]
FROM YourTable AData
-- Change to a LEFT JOIN if not all A's have AB's.
JOIN YourTable ABData
    -- NOTE: Assumes that 'B' is the only differentiator between
    -- AData and ABData's Identifier column and that it is
    -- not repeated as part of the common identifier.
    ON AData.[Identifier] = REPLACE(ABData.[Identifier], 'B', '') 
```

你是绝对正确的——它不是一个非常好的模式——这可能需要一个全表扫描。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T21:55:07.933

忽略在特定时期内将 A 与 AB 关联一秒钟的技巧，如果数据能够以某种方式关联，我将通过在表上对其自身进行内部连接来选择您正在寻找的格式，因此：

```
SELECT row_number() OVER(ORDER BY a.Period, a.Identifier, b.Identifier), 
       a.Value, 
       b.Value 
FROM TableName a 
  INNER JOIN TableName b ON join_mechanism 
ORDER BY a.Period, a.Identifier, b.Identifier 
```

现在，要填写连接机制，很明显的部分是有 a.Period = b.Period。有问题的部分是如果此文本是静态的，您可能会尝试字符串替换。所以 REPLACE(a.Identifier, 'A', 'AB') = b.Identifier.

因此，总而言之，您将拥有：

```
SELECT row_number() OVER(ORDER BY a.Period, a.Identifier, b.Identifier), 
       a.Value, 
       b.Value 
FROM TableName a 
  INNER JOIN TableName b ON a.Period = b.Period AND REPLACE(a.Identifier, 'A', 'AB') = b.Identifier 
ORDER BY a.Period, a.Identifier, b.Identifier 
```

注意：SELECT 语句尚未经过测试，我假设您使用的是支持 row_number 的相对较新版本的 MSSQL。

# java - 如何将数组列表的成员与字符串进行比较？

> ID：13077650
> 
> 赞同：1
> 
> 时间：2012-10-25T21:33:22.987
> 
> 标签：java, string, arraylist

对于这个简单的问题，我感到非常抱歉（我只使用了一点 java）。

我有一个复选框的数组列表，它们有一个来自另一个数组列表的相应标签。

我希望能够根据所选复选框的标签将字符串变量设置为某个值。我需要比较最多四个选定的复选框。因此，如果复选框 A 带有标签 A = X，则该设备的序列号 = Y。

我尝试使用 contains() 方法，但它返回 null。我曾尝试使用 get(index).getText()，但这仅适用于单个索引（当我需要评估多达四个时）。

欢迎任何想法和建议。

谢谢！！

铁螳螂7x

==================================================== ==================

这是我的代码的一部分，建议如下：

```
 if (PlatformPanel.Android.isSelected() == true)
        {
            Iterator<JCheckBox> listIter = Devices.selectedDevices.iterator();
            while(listIter.hasNext())
            {
                JCheckBox nextItemInList = listIter.next();
                if (nextItemInList.toString().equals("HTC Droid Eris"))         
                //if (Devices.selectedDevices.iterator().toString() .equals("HTC Droid Eris"))
                 {
                    selectedSerial = "A100000DA78159";
                    System.out.println(selectedSerial);
                    System.out.println(Devices.selectedDevices.get(0));
                 }

                if (nextItemInList.toString().equals("Asus Transformer Prime (#1)"))            
                //if (Devices.selectedDevices.iterator().toString() .equals("Asus Transformer Prime (#1)"))
                {
                    selectedSerial = "BKOKAS127271";
                    System.out.println(selectedSerial);
                    System.out.println(Devices.selectedDevices.get(0));
                }
            }            
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:13:53.440

我会使用一个静态映射（`static`意味着它是一个类字段，而不是一个实例字段，所以所有实例都可以重用一个映射）：

```
public class MyClass {

    private static Map<String, String> serialNumbers = new HashMap<String, String>() {{
        put("HTC Droid Eris", "A100000DA78159");
        put("Asus Transformer Prime (#1)", "BKOKAS127271");
        // etc
    }};

    // rest of class
} 
```

然后在您的代码中，它是单行的：

```
String selectedValue = ...; // get it directly from the drop down
String selectedSerial = serialNumbers.get(selectedValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:34:30.163

您可以遍历数组列表并与字符串进行比较。

示例：假设您的列表类型为`String`.

```
Iterator<String> listIter = yourList.iterator();
while(listIter.hasNext())
{
String nextItemInList = listIter.next();
if(nextItemInList.equals("YourOtherString")
{
//Do your logic.
}
} 
```

# dos - 使用 MS DOS 搜索目录中的文件

> ID：13077651
> 
> 赞同：4
> 
> 时间：2012-10-25T21:33:24.113
> 
> 标签：dos

如何在目录及其子目录中搜索文件并以简洁的格式显示文件名及其创建时间。

我试过`dir sam.csv /b /s /a-d`

但不起作用。

输出应该看起来像

```
c:\Data\Sam.txt 10/10/2012 10.00 AM

c:\Data\1\Sam.txt 11/10/2012 10.00 AM

c:\Data\2\Sam.txt 12/10/2012 10.00 AM 
```

或者我可以在 for 循环中做同样的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T21:52:18.133

试试这个：

```
for /f %f in ('dir sam.txt /s/b') do @echo %f  %~tf 
```

这是它在运行。

```
C:\data>for /f %f in ('dir sam.txt /s/b') do @echo %f  %~tf
C:\data\Sam.txt  26/10/2012 10:49 a.m.
C:\data\1\Sam.txt  26/10/2012 10:49 a.m.
C:\data\2\Sam.txt  26/10/2012 10:49 a.m. 
```

您可以在命令提示符下使用***help for***[获得有关 FOR 命令的更多帮助](http://www.robvanderwoude.com/ntfor.php)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:41:45.903

`dir sam.csv /s /4`显示您在问题中提出的问题。如果还有其他问题，请将其添加到您的问题中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:44:01.667

/b 选项正在删除日期信息。你可以在这里获得一些很棒的 DOS 语法帮助：

[http://www.computerhope.com/msdos.htm](http://www.computerhope.com/msdos.htm)*

# c# - 在有约束的目录中搜索文件

> ID：13077652
> 
> 赞同：1
> 
> 时间：2012-10-25T21:33:28.087
> 
> 标签：c#, sql, algorithm, datetime

我有一个文件列表，它们的名称表明它们是何时创建的。他们的名字有约定“yyyyMMdd.txt”。yyyy 是年，MM 是月，dd 是日期。我正在尝试编写一个函数，该函数只能打开在 C# 的时间范围内创建的那些文件。

例如：我想访问在 2012 年 10 月 20 日到 2012 年 10 月 25 日之间创建的文件。任何名称属于该时间间隔的文件都将被访问。

函数签名与此类似：void dosomething (DateTime from, DateTime to)

有什么好的方法可以完成这个功能吗？任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:50:28.480

您描述的文件名格式是词法（有序），因此您可以使用以下方法：

1.  将 DateTime 输入转换为与文件名相同的格式 (yyyyMMdd)

2.  读取文件名并将它们转换为整数，如 20121026

3.  以相同的方式将输入转换为整数

4.  现在使用普通的大于 >、小于 < 测试来确定日期是否在范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:04:45.343

这样的事情应该做你：

```
public static Regex rxFileName = new Regex( @"^\d{4}\d{2}\d{2}\.txt$" , RegexOptions.IgnoreCase ) ;
public static IEnumerable<FileInfo> FindFiles( this DirectoryInfo root , DateTime dtFrom , DateTime dtThru )
{
    string pfxFrom = dtFrom.ToString( "yyyyMMdd" ) ;
    string pfxThru = dtThru.ToString( "yyyyMMdd" ) ;

    foreach ( FileInfo fi in root.EnumerateFiles() )
    {
        if ( !rxFileName.IsMatch( fi.Name ) ) continue ;
        if ( fi.Name.CompareTo( pfxFrom ) < 0 ) continue ;
        if ( fi.Name.CompareTo( pfxThru ) > 0 ) continue ;
        yield return fi ;
    }

} 
```

# c# - Web 服务请求返回 null

> ID：13077653
> 
> 赞同：1
> 
> 时间：2012-10-25T21:33:32.663
> 
> 标签：c#, .net, web-services

我正在尝试调用托管在 Java 服务器上的 Web 服务。我通过 Visual Studio 提供的 Web 服务创建工具创建了这些类。当我调用该方法时，我可以在 Fiddler 中看到它正在返回有效数据。但是，在我的 C# 代码中，我的结果为空。

任何帮助，将不胜感激。

C#调用代码：

```
RuleValidationResponseRule[] ruleResponse = rulesWebService.RuleValidation(ruleData, "LO"); 
```

Web服务生成代码：

```
[System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://www.example.org/LathamInt/RuleValidation", 
    RequestNamespace="http://www.example.org/LathamInt/", 
    ResponseNamespace="http://www.example.org/LathamInt/", 
    Use=System.Web.Services.Description.SoapBindingUse.Literal, 
    ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
[return: System.Xml.Serialization.XmlArrayAttribute("ruleValidationResp", 
    Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
[return: System.Xml.Serialization.XmlArrayItemAttribute("rule", 
    Form=System.Xml.Schema.XmlSchemaForm.Unqualified, 
    IsNullable=false)]
public RuleValidationResponseRule[] RuleValidation([System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)] 
    RuleValidationRuleData ruleData, 
    [System.Xml.Serialization.XmlAttributeAttribute()] string company) {
    object[] results = this.Invoke("RuleValidation", new object[] {
                ruleData,
                company});
    return ((RuleValidationResponseRule[])(results[0]));
} 
```

XML 传递给 web 服务（来自 Fiddler）：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <RuleValidation company="LO" xmlns="http://www.example.org/LathamInt/">
            <ruleData xmlns="">
                <rule ruleID="GDSP" />
                <varData varName="GuideSpace" varValue="3" />
            </ruleData>
        </RuleValidation>
    </soap:Body>
</soap:Envelope> 
```

从服务返回的 XML（来自 Fiddler）：

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:lat="http://www.example.org/LathamInt/">
    <soapenv:Header/>
    <soapenv:Body>
        <RuleValidationResponse>
            <ruleValidationResp>
                <rule result="0" ruleId="GDSP" status="success">
                    <expression pre="@GuideSpace > 3" post="3 > 3"/>
                </rule>
            </ruleValidationResp>
        </RuleValidationResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

C# 生成代码中的响应定义：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://www.example.org/LathamInt/")]
public partial class RuleValidationResponseRule {

    private RuleValidationResponseRuleExpression expressionField;

    private string resultField;

    private string ruleIdField;

    private string statusField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public RuleValidationResponseRuleExpression expression {
        get {
            return this.expressionField;
        }
        set {
            this.expressionField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string result {
        get {
            return this.resultField;
        }
        set {
            this.resultField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string ruleId {
        get {
            return this.ruleIdField;
        }
        set {
            this.ruleIdField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string status {
        get {
            return this.statusField;
        }
        set {
            this.statusField = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T22:24:14.240

我相信我已经解决了。

在返回 XML 中，这一行

```
<RuleValidationResponse> 
```

表示返回标签没有命名空间。它需要更改为

```
<lat:RuleValidationResponse> 
```

要么，要么修改行

```
[System.Web.Services.Protocols.SoapDocumentMethodAttribute ("http://www.example.org/LathamInt/RuleValidation", 
    RequestNamespace="http://www.example.org/LathamInt/", 
    ResponseNamespace="http://www.example.org/LathamInt/",  //<-- ** Change this line
    Use=System.Web.Services.Description.SoapBindingUse.Literal, 
    ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)] 
```

到

```
[System.Web.Services.Protocols.SoapDocumentMethodAttribute ("http://www.example.org/LathamInt/RuleValidation", 
    RequestNamespace="http://www.example.org/LathamInt/", 
    ResponseNamespace="",  //<-- ** Change this line
    Use=System.Web.Services.Description.SoapBindingUse.Literal, 
    ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)] 
```

# postgresql - 在postgresql中基于每N天分组

> ID：13077664
> 
> 赞同：4
> 
> 时间：2012-10-25T21:34:03.007
> 
> 标签：postgresql, time, aggregation, window-functions

我有一个包含 ID、日期、值（温度）和其他一些东西的表。我的表如下所示：

```
+-----+--------------+------------+
| ID  |  temperature |    Date    |
+-----+--------------+------------+
|  1  |  26.3        | 2012-02-05 |
|  2  |  27.8        | 2012-02-06 |
|  3  |  24.6        | 2012-02-07 |
|  4  |  29.6        | 2012-02-08 |
+-----+--------------+------------+ 
```

我想每 10 天执行一次聚合查询，例如 sum 和 mean。

我想知道是否可以在 psql 中使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T22:17:29.790

[SQL小提琴](http://sqlfiddle.com/#!1/822fb/1)

```
select
    "date",
    temperature,
    avg(temperature) over(order by "date" rows 10 preceding) mean
from t
order by "date" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T22:07:38.253

```
select id, 
       temperature, 
       sum(temperature) over (order by "date" rows between 10 preceding and current row)
from the_table; 
```

它可能不完全是您想要的，因为它会对最后 10 行进行移动总和，这不一定与过去 10 天相同。

* * *

从 Postgres 11 开始，您现在可以使用基于间隔的范围

```
select id, 
       temperature, 
       avg(temperature) over (order by "date" 
                                range between interval '10 days' preceding and current row)
from the_table; 
```

# ios - 从移动网站上传 Facebook 图片

> ID：13077674
> 
> 赞同：0
> 
> 时间：2012-10-25T21:35:27.403
> 
> 标签：ios, facebook

有谁知道 facebook 移动网站如何允许用户从移动文件系统上传图像？看起来 Twitter 也在这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:39:48.727

iOS6 支持标准`<input type="file">`字段。

# ajax - 添加 Ajax 后如何初始化 Bootstrap 处理程序？

> ID：13077678
> 
> 赞同：3
> 
> 时间：2012-10-25T21:35:56.990
> 
> 标签：ajax, twitter-bootstrap, modal-dialog

我有一个页面，该页面收集了对该页面内容的一组用户评论。通过单击按钮并填写通过 Bootstrap 模式显示的表单，可以将新评论添加到页面中。然后通过 ajax 将结果插入到页面中。这一切都很好。

添加到页面的“结果”包括另一个引导按钮/链接，如下所示：

```
<a tabindex='-1' href='#' class='ajax-modal btn btn-small' 
      data-target='modal_my-modal' data-backdrop='true' 
      data-controls-modal='res-modal' data-keyboard='true' 
      url='/somewhere'>Click me</a> 
```

该链接的外观和行为就像一个按钮（感谢 Bootstrap！），但是，当单击时，它不会像它应该的那样触发模态。但是，如果我在浏览器中刷新页面，以便重新绘制此评论以及页面上的其他评论，则按钮/链接现在可以正常工作。

由于该按钮在重绘页面时起作用，因此我假设在页面加载并设置所有链接以执行其操作时运行一些 Bootstrap 初始化代码，并且我需要在添加新按钮后调用它到页面。这是正确的，如果是这样，我应该调用什么来正确初始化链接？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:19:42.103

简短的回答：确实有一个函数在绘制页面时被调用并设置点击处理程序——这是我自己的函数，负责设置模态。我在包含按钮/链接的 html 之后添加了对该函数的调用，一切都很好。我确定有一个 Bootstrap init 函数被调用，但调用我自己的函数是需要的。

# javascript - 在 Javascript 中抛出自定义异常。使用哪种风格？

> ID：13077681
> 
> 赞同：24
> 
> 时间：2012-10-25T21:36:13.687
> 
> 标签：javascript, exception, exception-handling, custom-exceptions

Douglas Crockford 建议这样做：

```
throw {
    name: "System Error",
    message: "Something horrible happened."
}; 
```

但你也可以这样做：

```
function IllegalArgumentException(message) {
    this.message = message;
}

throw new IllegalArgumentException("Argument cannot be less than zero"); 
```

然后做：

```
try {
    //some code that generates exceptions
} catch(e) {    
    if(e instanceof IllegalArgumentException) {
        //handle this
    } else if(e instanceof SomeOtherTypeOfException) {
        //handle this
    }
} 
```

我想你可以`type`在 Crockford 的实现中包含一个属性，然后检查它而不是做一个`instanceof`. 做一个与另一个相比有什么优势吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-06-06T09:06:57.437

请注意，同时大多数 JavaScript 环境都提供[Error 对象](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)作为异常的基础。它已经允许您定义消息，而且还提供了有用的堆栈属性来跟踪异常的上下文。您可以使用原型继承创建自己的异常类型。已经有几个stackoverflow讨论（例如：[here](https://stackoverflow.com/questions/1382107/whats-a-good-way-to-extend-error-in-javascript)），如何正确地做到这一点。但是，在找到正确且现代的方法之前，我不得不进行一些研究。请注意，stackoverflow 社区不喜欢 Mozilla 文档（见上文）中建议的方法。经过大量阅读后，我得出了从 Error.prototype 继承的方法：

```
function IllegalArgumentException(sMessage) {
    this.name = "IllegalArgumentException";
    this.message = sMessage;
    this.stack = (new Error()).stack;
}
IllegalArgumentException.prototype = Object.create(Error.prototype);
IllegalArgumentException.prototype.constructor = IllegalArgumentException; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T21:46:08.560

我赞成第二个，因为它在代码纯度方面更具可重用性。准确地说，如果我要在几个地方抛出相同的异常（甚至是具有不同消息的相同异常类型），我的代码会在第一种方法中变得混乱（巨大）。

# javascript - webkitAudioContext 播放base64 WAV

> ID：13077682
> 
> 赞同：0
> 
> 时间：2012-10-25T21:36:17.560
> 
> 标签：javascript, google-chrome, webkit, webkitaudiocontext

我有一个 wav 文件，其中包含：**ffmpeg -i my.wav**

给出输出：

```
output:   Duration: 00:00:12.63, bitrate: 352 kb/s
    Stream #0.0: Audio: pcm_s16le, 22050 Hz, 1 channels, s16, 352 kb/s 
```

这在 JavaScript 中存储为 base64 字符串，作为下面列出的 base64 变量加载到内存中。

这是代码：

```
byte_str = Base64.decode(base64)
buffer = new ArrayBuffer(byte_str.length*2)
buffer_view = new Uint16Array(buffer)
/* this is coffeescript */
for i in [0..byte_str.length]
   buffer_view[i] = byte_str.charCodeAt(i)
console.log(byte_str.length)
console.log(buffer_view)
console.log(buffer_view.buffer)
context = new webkitAudioContext()
context.decodeAudioData(buffer,function (buffer) {
    /* never gets hit */
    source = @context.createBufferSource()
    source.buffer = buffer
    source.connect(@context.destination)
    source.noteOn(0)
}); 
```

输出：

```
108185
[82, 73, 70, 70, 36, 128, 87, 65, 86, 69, 102, 109, 116, 32, 16, 0, 0, 0, 1, 0, 1, 0, 34, 86, 0, 0, 68, 49152, 2, 0, 16, 0, 100, 97, 116, 97, 0, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,....]
ArrayBuffer {byteLength: 216370} 
```

如果您查看此演示文稿，它有一个 WAV 标题： [http ://html5-demos.appspot.com/static/html5-whats-new/template/index.html#29](http://html5-demos.appspot.com/static/html5-whats-new/template/index.html#29)

```
var header = new Uint8Array([
    0x52,0x49,0x46,0x46, // "RIFF"
    0, 0, 0, 0,          // put total size here
    0x57,0x41,0x56,0x45,
    ...
]); 
```

如果您将第一个值转换为十六进制，这与我的相同，但在我的情况下，回调永远不会为 decodeAudioData 触发。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:38:28.080

事实证明这是使用此库的编码问题： [http](http://www.webtoolkit.info/javascript-base64.html) ://www.webtoolkit.info/javascript-base64.html 我删除了 _utf8_decode 步骤，效果很好！

# sql - 两个表的唯一约束

> ID：13077685
> 
> 赞同：0
> 
> 时间：2012-10-25T21:36:32.613
> 
> 标签：sql, sql-server, unique-constraint

我有两个表：：
`Country`有 ID，名称
`State` ：有 ID，名称，CountryID

我定义`Country.Name`为独特的。

我还想将*每个国家*`State.Name`定义为唯一- 即我不能将其定义为唯一，因为两个国家可能具有相同的状态。但对于一个国家来说，每个州都是独一无二的。

 *我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:38:59.203

尝试`UNIQUE`为两列定义`Name`，`CountryID` 如下所示：

```
CREATE UNIQUE INDEX uix ON State( Name, CountryID) 
```*

# javascript - 用jquery匹配分割宽度

> ID：13077687
> 
> 赞同：0
> 
> 时间：2012-10-25T21:36:49.680
> 
> 标签：javascript, jquery

这是一个关于用 jquery 匹配分割宽度的问题。这是我正在使用的 html 代码。

```
<ul class="thumbs_container">
<li class="thumbs">
    <a class="fancybox" href="" >
        <div class="thumbs_image_container">
            <img src="" />
        </div>
        <div class="caption">
            caption
        </div>
    </a>
</li>
    <li class="thumbs">
    <a class="fancybox" href="" >
        <div class="thumbs_image_container">
            <img src="" />
        </div>
        <div class="caption">
            caption
        </div>
    </a>
</li>
</ul> 
```

我将有多个带有“thumbs”类的列表项。我想要做的是将具有“标题”类的 div 的宽度与具有“thumbs_image_container”类的 div 的宽度相匹配，但分别处理每个列表项。

有人可以给我一些关于如何做到这一点的指示吗？我知道如何匹配宽度，但是在弄清楚如何分别处理每个列表项时遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:41:22.100

使用 jQuery `each`（[Jquery $.each 选择器](https://stackoverflow.com/q/3450635/1026459)）

此代码将获取带有类 thumbs 的元素集，然后检查每个元素是否包含名为 caption 的类，如果该元素确实包含标题，则它采用 class = thumbs_image_container 元素上的相关宽度并将其应用于迭代元素。

```
$('.thumbs').each(function( location, element ){
 if( $(this).find('.caption').length){  
  var w = $(this).find('.thumbs_image_container')[0].width();
  $(this).width(w);
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:42:34.617

尝试使用 `$.each()`

```
var $ulWidth = $('thumbs_container').width();

$('li.thumbs').each( function() {

      var $divWidth = $(this).find('div.caption').width(); //Width of div inside Current li..

      if( parseInt($ulWidth) == parseInt($divWidth) ) {
           // Do Something
      }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:20:39.597

感谢 Sushanth 和 Travis，jquery 每个人都成功了，经过试验，这就是我最终想要做的事情，

```
$('li.thumbs').each( function() {
var $divWidth = 0;  
$divWidth = $(this).find('img').width(); 
$(this).find('div.caption').width($divWidth);
}); 
```

事实证明，这是我需要匹配“标题”宽度的图像宽度。

谢谢您的帮助

# ios - 删除文件时从分支中提取更改

> ID：13077690
> 
> 赞同：0
> 
> 时间：2012-10-25T21:37:09.693
> 
> 标签：ios, xcode, git

我想不出最好的方法来做到这一点，它已经发生了几次，我把自己搞砸了，很高兴知道一个可能的好方法。在master上，我有我们的主要项目。我们终于获准在 iOS 中使用 ARC，我为此创建了一个新分支，以免与主要的工作主分支混淆。我还花时间在我的 ARCBranch 中删除了一些不需要的文件。我想要做的是使用这个分支来开发下一个版本。我想将更改从 master 拉到 ARCBranch。所以我切换到了ARCBranch，并且做了

```
git pull origin master 
```

我遇到了冲突，其中一些很简单，因为我可以看到代码，另一些是 pbxproj 文件中的更改，我不知道是什么。我确实看到了<<< HEAD ==== >>>。我不知道我需要在这里做什么。我无法在 Xcode 中打开它，只能在文本编辑器中打开它。我试着删除那些 <<< === >>> 字符，因为我看到一个人在 SO 上说你通常想要两个更改并且你总是可以这样做。这对我不起作用。我想知道是否有更好的方法来进行此更改。也许在某个地方我可以看到每一个变化发生的变化？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:45:11.590

相反，您可以尝试

```
git rebase master 
```

这将通过提交应用更改提交。如果有冲突，它会停在那里，这样你就可以解决它们并做

```
git rebase --continue 
```

完成所有补丁的应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:42:13.760

它未能自动合并，因此它标记了冲突的代码块并将它们都保留下来，这样您就可以自己决定和删除一个。

# dynamics-crm - 并非所有在插件中的 `new ColumnSet(true)` 上检索到的列

> ID：13077691
> 
> 赞同：0
> 
> 时间：2012-10-25T21:37:13.407
> 
> 标签：dynamics-crm, dynamics-crm-2011, query-expressions

我正在构建以下查询。出于某种原因，它并没有给我带来所有领域。我检查了拼写，当我为这些字段赋值时，我什至切换了名称，导致异常。所以我确定它们存在并被使用。我在更新步骤中添加了一个包含所有数据的前映像，以确保。

```
QueryExpression request = new QueryExpression
{
  EntityName = "myLogicalName",
  ColumnSet = new ColumnSet { AllColumns = true },
  Criteria =
  {
    Filters =
    {
      new FilterExpression
      {
        FilterOperator = LogicalOperator.Or,
        Conditions =
        {
          new ConditionExpression("someField", ConditionOperator.NotEqual, someValue),
          new ConditionExpression("someField", ConditionOperator.Equal, somValue)
        }
      }
    }
  }
};

EntityCollection result = Service.RetrieveMultiple(request); 
```

我可能会错过什么？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:29:35.917

可能是因为；该字段没有值或正在应用字段级别安全性。

作为一个方面，你通常应该避免使用`AllColumns = true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:43:50.960

将属性设置为 true 与在 sql`AllColumns`中执行 a 基本相同。`Select *`这些列不会添加到 ColumnSet，但它们将在查询表达式的结果中返回。

# java - 在 O(n) 中返回文档中最常用的 10 个单词

> ID：13077693
> 
> 赞同：4
> 
> 时间：2012-10-25T21:37:19.563
> 
> 标签：java, algorithm, complexity-theory, time-complexity

如何设计一种算法，可以在 O(n) 时间内返回文档中最常用的 10 个单词？如果可以使用额外的空间。

我可以使用 count 解析单词并将其放置在哈希图中。但接下来我必须对值进行排序以获得最常见的值。此外，我必须有一个映射 btw 值 -> 键，因为值可能重复，所以无法维护。

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:44:57.057

这是一个简单的算法：

*   通过文档一次阅读一个单词。**在）**
*   使用每个单词构建一个 HashTable。**在）**
    *   用这个词作为关键。**O(1)**
    *   使用您看到这个词的次数作为值。**O(1)**
    *   （例如，如果您将键添加到哈希表，则值为 1；如果您已经在哈希表中拥有键，则将其关联值增加 1）**O(1)**
*   创建一对大小为10的数组（即String words[10] / int count[10]，或者使用<Pair>），在下一步中使用这对来跟踪10个最频繁的单词及其单词数. **O(1)**
*   遍历完成的 HashTable 一次：**O(n)**
    *   如果当前单词的字数高于数组对中的条目，则替换该特定条目并将所有内容向下移动 1 个插槽。**O(1)**
*   输出这对数组。**O(1)**

**O(n)**运行时间。

**哈希表 + 数组的O(n)**存储

（旁注：您可以将 HashTable 视为字典：一种存储键值对的方法，其中键是唯一的。从技术上讲，HashMap 意味着异步访问，而 HashTable 意味着同步。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:48:59.743

如果您使用正确的数据结构，它可以在 O(n) 中完成。

考虑 a `Node`，由两件事组成：

*   一个计数器（最初设置为 0）。
*   一个包含 255 个（或任意数量的字符）指针的数组`Node`。所有指针最初都设置为`NULL`.

创建一个根节点。定义一个“当前”`Node`指针，最初将其设置为根节点。然后遍历文档的所有字符并执行以下操作：

*   如果下一个字符不是空格 - 从当前节点的数组中选择适当的指针。如果是`NULL`- 分配它。当前`Node`指针被更新。
*   如果它是一个空格（或任何单词分隔符） - 增加 "current" 的计数器`Node`。然后重置“当前”`Node`指针以指向根节点。

通过这样，您可以在 O(n) 中构建一棵树。每个元素（节点和离开）都表示一个特定的单词，以及它的计数器。

然后遍历树以找到具有最大计数器的节点。它也是 O(n)，因为树中的元素数量不大于 O(n)。

**更新：**

最后一步不是强制性的。实际上，最常用的词可能会在字符处理过程中被更新。下面是一个伪代码：

```
struct Node
{
    size_t m_Counter;
    Node* m_ppNext[255];
    Node* m_pPrev;

    Node(Node* pPrev) :m_Counter(0)
    {
        m_pPrev = pPrev;
        memset(m_ppNext, 0, sizeof(m_ppNext));
    }
    ~Node()
    {
        for (int i = 0; i < _countof(m_ppNext) i++)
            if (m_ppNext[i])
                delete m_ppNext[i];
    }

};

Node root(NULL);
Node* pPos = &root;
Node* pBest = &root;
char c;

while (0 != (c = GetNextDocumentCharacter()))
{
    if (c == ' ')
    {
        if (pPos != &root)
        {
            pPos->m_Counter++;

            if (pBest->m_Counter < pPos->m_Counter)
                pBest = pPos;

            pPos = &root;
        }
    } else
    {
        Node*& pNext = pPos->m_ppNext[c - 1];
        if (!pNext)
            pNext = new Node(pPos);
        pPos = pNext;
    }
}

// pBest points to the most common word. Using pBest->m_pPrev we iterate in reverse order through its characters 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T21:55:52.553

最快的方法是使用基数树。您可以将单词数存储在基数树的叶子上。保留一个单独的 10 个最常用词及其出现次数的列表，以及一个存储进入该列表所需的阈值的变量。将项目添加到树中时更新此列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:45:11.993

维护 (word,count) 的映射将是 O(n)。

构建地图后，遍历键并检索十个最常用的键。

O(n) + O(n)

-- 但对这个解决方案并不完全满意，因为需要额外的外部内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T21:50:34.577

我会使用 ArrayList 和 HashTable。

这是我正在考虑的算法，

```
Loop through all the word in the document.

if (HashTable.contains(word) )
    increment count for that word in the HashTable;
else
    ArrayList.add(word);
    HashTable.add(word);
    word count in HashTable = 1; 
```

遍历整个文档后，

```
Loop through ArrayList<word>
    Retrieve the word count for that word from the HashTable;
    Keep a list of the top 10 words; 
```

构建 HashTable 和 ArrayList 的运行时间应该是 O(n)。制作前 10 个列表应该是 O(m)，其中 m 是唯一单词的数量。O(n+m) 其中 n>>m --> O(n)

# groovy - 在 Gradle 中创建多个具有不同依赖项的 .WAR 文件

> ID：13077694
> 
> 赞同：13
> 
> 时间：2012-10-25T21:37:23.890
> 
> 标签：groovy, gradle, dependency-management

我正在使用 war 插件为我的 gradle 项目生成一个简单的 .WAR 文件。我想知道如何配置 gradle 以便我可以创建 4 个具有不同依赖项的不同 .WAR 文件。

我已经使用进入发行版所需的 jar 配置了依赖项编译配置。src 中的任何代码都不依赖于其中的几个 jar，但我想知道如何配置项目以创建

*   一个包含依赖关系图中所有 jar 的 standard.WAR 文件（即使它们没有被使用——没关系——我正在测试一些东西）
*   另一个仅包含 qas.jar 的 standard-qas-only.WAR 文件
*   另一个包含 qas.jar 和 log4j 的标准 qas-log4j.WAR 文件

我配置了哪些任务以使生成的工件使用特定的依赖配置？

仅供参考：在这种情况下，编译所需的唯一 jar 是 qas.jar。

我下面的示例创建了一个仅包含一个 jar 的 war 文件，但我希望使用不同的 jar 生成 5 个不同的 .war 文件。

**构建.gradle**

```
apply plugin: 'java'
apply plugin: 'war'

dependencies {
    compile files('/lib/qas.jar','/lib/axis1-1.4.jar','/lib/axis2-kernel-1.3.jar','/lib/dom4j-1.6.1.jar','/lib/log4j-1.2.14.jar')
    providedCompile files('/lib/j2ee-1.4.03.jar')
}

war {
    classpath = ['/lib/qas.jar']
}

task dist(dependsOn: 'war') << {
    copy {
        from war.archivePath
        into "dist/"
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-29T17:44:27.577

我对您实际尝试构建多少个 WAR 发行版感到有些困惑。您可以轻松地对其进行修改以创建其他 WAR 文件。这是实现这一目标的一种方法：

```
task createStandardWar(type: War, dependsOn: classes) {
    baseName = 'standard'
    destinationDir = file("$buildDir/dist")
}

task createStandardWarQasOnly(type: War, dependsOn: classes) {
    baseName = 'standard-qas-only'
    destinationDir = file("$buildDir/dist")
    classpath = war.classpath.minus(files('/lib/axis1-1.4.jar','/lib/axis2-kernel-1.3.jar','/lib/dom4j-1.6.1.jar','/lib/log4j-1.2.14.jar'))
}

task createStandardWarQasAndLog4J(type: War, dependsOn: classes) {
    baseName = 'standard-qas-log4j'
    destinationDir = file("$buildDir/dist")
    classpath = war.classpath.minus(files('/lib/axis1-1.4.jar','/lib/axis2-kernel-1.3.jar','/lib/dom4j-1.6.1.jar'))
}

task createDists(dependsOn: [createStandardWar, createStandardWarQasOnly, createStandardWarQasAndLog4J]) 
```

[此构建脚本摘录通过声明War](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.bundling.War.html)类型的增强任务来创建三个不同的 WAR 文件。它假定您仍然希望将已编译的源文件放在`WEB-INF/classes`WAR 文件中，因此我没有将其从类路径中删除。分发最终在目录中`build/dist`。该任务`createDists`创建了所有这些。

# jquery - 全屏幻灯片上的背景图案问题

> ID：13077700
> 
> 赞同：0
> 
> 时间：2012-10-25T21:37:38.867
> 
> 标签：jquery, z-index, slideshow, fullscreen

我想在这个全屏幻灯片的主体标签上添加一个 png 覆盖：[演示页面](http://www.loop-branding.com/DPM2/)

但我无法解决这个问题。除了加载第一个图像时，我将一个类“光栅”添加到正文中。

```
if(photoObject.image == "home.jpg" ) {
    $("body").removeClass("raster");
    }
    else {
        $("body").addClass("raster");
    } 
```

问题是即使我设置了高 z-index raster.png 也不会出现。

有什么猜测吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:42:04.770

您不能在`z-index`上设置 a `body`，它必须是块元素。尝试为栅格创建一个 div。

```
<div id="raster"></div> 
```

CSS：

```
#raster {
    display: none;
    background: url(../images/raster2.png) repeat;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 2;
} 
```

然后不是将类添加到正文，而是显示/隐藏 div。

```
if(photoObject.image == "home.jpg" ) {
    $('#raster').hide();
} else {
    $('#raster').show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:49:46.907

你应该创建一个 div，作为 body 的 HTML 的覆盖层：

```
<body>
<img class="ac_bgimage" alt="Background" src="img/default.jpg" style="width: 1600px; height: 1062.29px; left: 0px; top: -310.643px; display: inline;">
<div class="ac_overlay"></div>
<div class="ac_loading" style="display: none;"></div>
</body> 
```

div 的 CSS 将是：

```
.ac_overlay {
background: url("img/pattern.png") repeat scroll left top transparent;
height: 100%;
left: 0;
position: fixed;
top: 0;
width: 100%;
} 
```

享受 :D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:50:12.287

另一种解决方案是将 div 隐藏在主体上，并在必要时使它们出现。

# php - 在安装期间将用户数据库信息写入文件

> ID：13077702
> 
> 赞同：0
> 
> 时间：2012-10-25T21:37:51.607
> 
> 标签：php, installation, fwrite

我正在尝试为我的应用创建安装向导。在其中一个步骤中，我尝试将用户连接详细信息写入/存储到文件中。有谁知道更好的方法来做到这一点。我的代码在到达 $ 符号时显然会中断。

```
 $myFile = "../functions/config2.php";
    $fh = fopen($myFile, 'w') or die("can't open file");

    $stringData = "<? #DATABASE CONNECTIONS\n";
    fwrite($fh, $stringData);

    $stringData = "$dbservertype='mysql';\n";
    fwrite($fh, $stringData);

    $stringData = "$servername='".$_POST['host']."';\n";
    fwrite($fh, $stringData);

    $stringData = "$dbusername='".$_POST['dbusername']."';\n";
    fwrite($fh, $stringData);

    $stringData = "$dbpassword='".$_POST['dbpass']."';\n";
    fwrite($fh, $stringData);

    $stringData = "$dbname='".$_POST['dbname']."';\n";
    fwrite($fh, $stringData);

    $stringData = "global $link;\n";
    fwrite($fh, $stringData);

    $stringData = "$link=mysql_connect ('$servername','$dbusername','$dbpassword');\n";
    fwrite($fh, $stringData);

    $stringData = "if(!$link){die('Could not connect to MySQL');}\n";
    fwrite($fh, $stringData);

    $stringData = "mysql_select_db('$dbname',$link) or die ('could not open db'.mysql_error());\n";
    fwrite($fh, $stringData);

    fclose($fh); 
```

我希望书面文件最终看起来像这样

```
 <?
    //DATABASE CONNECTIONS
    $dbservertype='mysql';
    $servername='posted_server';
    $dbusername='posted_user';
    $dbpassword='posted_pass';
    $dbname='posted_dbname';

    global $link;
    $link=mysql_connect ("$servername","$dbusername","$dbpassword");
    if(!$link){die("Could not connect to MySQL");}
    mysql_select_db("$dbname",$link) or die ("could not open db".mysql_error());
    ?> 
```

我现在的输出看起来像这样

```
 <? #DATABASE CONNECTIONS
    ='mysql';
    ='host';
    ='user';
    ='pass';
    ='dbname';
    global ;
    =mysql_connect ('','','');
    if(!){die('Could not connect to MySQL');}
    mysql_select_db('',) or die ('could not open db'.mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:46:23.133

如果在双引号中包含有效变量名的内容，则在 php 中使用双引号 "，php 将插入该变量，如果它不存在，它将解析为空，或抛出错误。[请参见此处](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

您应该转义 $ 符号，例如：

```
$stringData = "\$dbservertype='mysql';\n"; 
```

# c# - WPF绑定RelativeSource

> ID：13077703
> 
> 赞同：1
> 
> 时间：2012-10-25T21:37:53.953
> 
> 标签：c#, wpf, binding, relativesource

只是在这里做一个小测试。只有这两个文本框中的第一个显示值“123”。第二个怎么没有？

```
<Window x:Class="Test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:diag="clr-namespace:System.Diagnostics;assembly=WindowsBase"
    Title="MainWindow" Height="350" Width="525">
<StackPanel Width="123" x:Name="Panel1">
    <TextBox Text="{Binding ElementName=Panel1, Path=Width, diag:PresentationTraceSources.TraceLevel=High}"></TextBox>
    <TextBox Text="{Binding Source={RelativeSource AncestorType={x:Type StackPanel}}, Path=Width, diag:PresentationTraceSources.TraceLevel=High}"></TextBox>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:40:42.907

而不是`Source`take `RelativeSource`，像这样：

```
<TextBox Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type StackPanel}}, Path=Width, diag:PresentationTraceSources.TraceLevel=High}"></TextBox> 
```

# sql - 约束具有特定值的多列

> ID：13077710
> 
> 赞同：2
> 
> 时间：2012-10-25T21:38:24.780
> 
> 标签：sql, sql-server, database, constraints

我的架构有 3 列：`ID1`, `ID2`,`Status`

上述每一列都是一个字符串。

我想创建一个约束，如下所示：

不能有多个具有相同`ID1`且`ID2`处于“未处理”状态的记录。如果有多个记录相同`ID1`且未`ID2`处于 UNPROCESSED 状态，则可以。

是否可以在 SQL Server 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T07:09:18.930

假设您使用的是 SQL Server 2008 或更高版本，您可以应用[过滤索引](http://technet.microsoft.com/en-us/library/cc280372%28v=sql.100%29.aspx)：

```
CREATE UNIQUE INDEX UQ_Unprocessed_IDs ON UnnamedTable (ID1,ID2)
WHERE (Status='Unprocessed') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:43:42.930

我不相信你可以在约束的情况下做到这一点。您需要在插入/更新操作上实现触发器。SQL Server 的问题在于触发器是“AFTER”触发器。没有“BEFORE”触发器之类的东西（尽管有“INSTEAD OF”触发器类型。

因此，您需要完成所有工作来执行事务，如果约束失败，则对其进行审查并回滚，而不是简单地检查事务是否会导致违反约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T07:17:39.487

您可以使用一个视图来执行此操作，该视图是两个基础表的联合，一个用于已处理的记录，一个用于未处理的报告。

但是，视图本身无法更新，如果记录曾经从已处理变回未处理，并且经常这样做，这将表现不佳。

它还会使您对并行处理场景的思考更加复杂。

上述两个限制都是因为您正在通过删除+插入替换一些更新。

如果您至少拥有 SQL Server 2008，则筛选索引通常是更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T22:07:13.113

我会做一些事情，比如有一个名为 ProcessedId（而不是 Status）的列，并根据是否正在处理的 ID1 和 ID2 分配值。为了澄清，见下文

[ID1, ID2, 进程 ID]

SomeId1, SomeId2, -1
SomeOtherId1, SomeOtherId2, 100304

因此，任何未处理的 Id 集将始终具有 -1 的 ProcessId，阻塞和重复，并且任何已处理的 Id 集将被分配某种序列号，允许重复。说得通？

所以继续我上面的例子，如果记录集再次进入未处理，它的 ProcessId 将是 -1 并导致 PK 违规。

# php - 会话在新页面视图上被破坏

> ID：13077714
> 
> 赞同：4
> 
> 时间：2012-10-25T21:38:42.097
> 
> 标签：php, session, session-variables

成功登录后，我正在保存会话变量。

当用户转到应用程序中的不同页面时，即使我没有明确销毁会话，会话也会消失。我该如何解决？

这是会话似乎消失的页面。

```
<?php
include 'core/init.php';
include 'core/sendmessage.php';
$user_info = $_SESSION['user_id'];
$getUser = mysql_query("SELECT * FROM users WHERE user_id = ".$uid);

$user_info = array();

while($currentRow = mysql_fetch_array($getUser)){
    $user_info['firstname'] = $currentRow['first_name'];
    $user_info['lastname'] = $currentRow['last_name'];
    $user_info['username'] = $currentRow['username'];
}
?> 
```

在`core/init.php`我有会话开始方法。

```
<?php
session_start();
require 'database/connect.php';
require 'functions/users.php';
require 'functions/general.php';

if (logged_in() === true) { 
$user_data = user_data($_SESSION['user_id'],'first_name','last_name','username');
}

$errors = array();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T23:47:46.563

> session_start()根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话或**恢复当前会话。**（访问**[PHP： session_start](http://php.net/manual/en/function.session-start.php)**）

添加`session_start()`在每个页面的开头（在您的`<?php`标签之后）。

在你的情况下：

```
<?php
if(!isset($_SESSION)) session_start(); //--> ADD this line

include 'core/init.php';
include 'core/sendmessage.php';
$user_info = $_SESSION['user_id'];

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:49:21.040

您应该尝试为所有这些使用不同的名称，因为我认为将您用于会话的值用于另一个值（因为它将替换您的旧值）并使会话消失并不是一个好习惯下次访问该页面时。一个会话只被创建一次。

```
<?php
include 'core/init.php';
include 'core/sendmessage.php';
$user_info = $_SESSION['user_id'];
$getUser = mysql_query("SELECT * FROM users WHERE user_id = ".$uid);

$userinfo = array(); //I changed $user_info to $userinfo so it doesn't get mixed with the session.

while($currentRow = mysql_fetch_array($getUser)){
    //I removed the underscore
    $userinfo['firstname'] = $currentRow['first_name'];
    $userinfo['lastname'] = $currentRow['last_name'];
    $userinfo['username'] = $currentRow['username'];
}
?> 
```

现在应该没问题，即使我还没有测试过。我只是将数组更改为，`$userinfo`因此您仍然可以始终使用会话，而无需将其与某些东西混合。

# linux - 如何从 IntelliJ / WebStorm / PhpStorm 中的“外部工具”运行 sudo 脚本？

> ID：13077715
> 
> 赞同：6
> 
> 时间：2012-10-25T21:38:47.127
> 
> 标签：linux, intellij-idea, sudo, phpstorm, webstorm

我希望从**IntelliJ/WebStorm运行***需要 root 的*bash 脚本，并在运行时询问我的 root 密码。在脚本中硬编码我的根密码当然是个坏主意。

 ****IntelliJ/WebStorm**实际上有一个 $Prompt$ 宏，原因如下，它会提示您并将您的输入用作值。

所以我尝试使用*$Prompt$*以及[use-sudo-with-password-as-parameter](https://stackoverflow.com/questions/11955298/use-sudo-with-password-as-parameter)*`echo YOURPASSWORD | sudo -S yourcommand`*中的描述。

然后我将 passwd & script 传递给一个`sudorun.sh`脚本`echo -e $1 | sudo -S $2 $3 $4`（因为`echo`不能是“程序”行），虽然它可以在 CLI 上运行，但它无法在 IntelliJ 控制台上读取 echo-stdin。

理想情况下，我希望仅在 IntelliJ 内配置解决方案，而不需要在 IntelliJ 之外更改特定的操作系统配置。

也许还有其他方法可以解决这个问题，所以让我们即兴发挥吧！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-17T02:20:31.897

我也遇到了同样的问题，但是我在我的开发机器上处理敏感数据，并且删除 sudoers 的密码要求不是一个选择。

我可以通过使用 sudo 命令从命令行启动实际的 WebStorm 应用程序来解决此问题，如下所示：

`sudo /Applications/WebStorm.app/Contents/MacOS/webide`

以这种方式启动 WebStorm/PhpStorm 后，您可以运行具有 root 访问权限的脚本，而无需提供 root 凭据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T03:47:42.763

使用 的`NOPASSWD`功能`sudo`。将这样的规则添加到`sudoers`（通过`visudo`或类似）：

```
someuser      ALL = NOPASSWD: /usr/bin/interesting_program
%somegroup    ALL = NOPASSWD: /usr/bin/interesting_program 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-04T08:01:38.820

我发现自己自动化了很多工作流程，并遇到了同样的问题。我不想在我的 sudoer 权限上打一个洞，我也不想以 root 身份运行我的 IDE。我发现的一个很好的解决方案是`gksudo`，在 Ubuntu 和许多其他 Linux 变体上，您会发现它默认安装。它的作用是让您`gksudo`提示用户（您自己）使用图形覆盖输入您的密码，就像 Ubuntu/KDE/等一样。当您需要以 root 身份执行更新等操作时执行此操作。

然后，这将提示您提供密码以提升权限，然后以 root 身份执行给定的命令/程序。

在*编辑工具窗口*中：

1.  将**程序**设置为`/usr/bin/gksudo`
    *   gksudo 可能位于不同的路径，尝试：`whereis gksudo`找到它的路径
2.  将参数设置为要在*引号中执行的所有命令*
    *   前任。`"mongod --fork --config /etc/mongodb.conf; service elasticsearch start"`
    *   确保你有报价！
3.  设置工作目录（如果需要）**

# html - 如何使用 CSS 居中 XHTML 内容？

> ID：13077717
> 
> 赞同：-3
> 
> 时间：2012-10-25T21:38:52.883
> 
> 标签：html, css, xhtml

所以我最近将我的一个网站从表格内容格式转换为 div 内容格式。

**表格格式版本：**

网站的表格版本：[here](http://www.xodusen.com/home/)。

表格版本样式 CSS：

```
body {
    width: 1020px;
    margin: 0 auto;
    background-image: url(images/bg.png);
    }

.logo{
    width:301px;
    height:151px;
    background:url(images/logo.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.logo:hover {
    opacity:0.9;
}

.signin{
    width:69px;
    height:30px;
    background:url(images/signin.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.signin:hover {
    opacity:0.9;
}

.register{
    width:79px;
    height:30px;
    background:url(images/register.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.register:hover {
    opacity:0.9;
}

.Contact_Us{
    width:53px;
    height:9px;
    background:url(images/Contact_Us.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.Contact_Us:hover {
    opacity:0.9;
}

.Code_of_Conduct{
    width:84px;
    height:9px;
    background:url(images/Code_of_Conduct.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.Code_of_Conduct:hover {
    opacity:0.9;
}

.Privacy_Policy{
    width:65px;
    height:12px;
    background:url(images/Privacy_Policy.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.Privacy_Policy:hover {
    opacity:0.9;
}

.Copyright{
    width:149px;
    height:9px;
    background:url(images/Copyright.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.Copyright:hover {
    opacity:0.9;
}

.slideshow{
    width:301px;
    height:151px;
    background: url(slideshow.png),
      url(minecraft.png),
      url(tf2.png),
      url(CSS.png),
      url(GM.png),
      url(aos.png),
      url(CSGO.png),
      url(voip.png),
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.slideshow:hover {
    opacity:0.9;
} 
```

表格版本来源：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head profile="http://www.w3.org/2005/10/profile">
<link rel="icon" type="image/png" href="http://www.xodusen.com/resources/images/favicon.png">
<title>Welcome to XodusEN</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">
 $(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
});
</script>
<meta name="description" content="This is the homepage of XodusEN. Xodus Entertainment Network is a unique & friendly Gaming Community that welcomes & realises the potential, and value within any user regardless of their origin. " >
<meta name="keywords" content="XeN, Xodus, XEN, xen, Xodus Entertainment Network, gaming, community, PC, Steam, XBL, Xbox 360, PSN, Playstation, games, Gaming, Community, XodusEN, Gaming Network, Network, TF2, Server, CS:S, Minecraft, premium, servers, Counter-Strike: Source, Website, Homepage, Minecraftia" >
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="style.css" rel="stylesheet" type="text/css">
<!--[if IE]>
<script type="text/javascript">
    window.location = "http://www.xodusen.com/ie/";
</script>
<![endif]-->
</head>
<body bgcolor="#d7d7d7">
<table id="Table_01" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="18">
            <img src="images/index_01.png" width="1020" height="9" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="9" alt=""></td>
    </tr>
    <tr>
        <td colspan="11" rowspan="2">
            <img src="images/index_02.png" width="826" height="252" alt=""></td>
        <td>
        <a id="signin" class="signin" href="http://s.xodusen.com/VrtqYm">
                <img src="images/signin.png" width="69" height="30" border="0" alt=""></a>
        <td rowspan="6">
            <img src="images/index_04.png" width="3" height="643" alt=""></td>
        <td colspan="3">
        <a id="register" class="register" href="http://s.xodusen.com/WW3rpZ">
                <img src="images/Register.png" width="79" height="30" border="0" alt=""></a>
        <td colspan="2" rowspan="6">
            <img src="images/index_06.png" width="43" height="643" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="30" alt=""></td>
    </tr>
    <tr>
        <td rowspan="5">
            <img src="images/index_07.png" width="69" height="613" alt=""></td>
        <td colspan="3" rowspan="5">
            <img src="images/index_08.png" width="79" height="613" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="222" alt=""></td>
    </tr>
    <tr>
        <td colspan="5">
            <img src="images/index_09.png" width="385" height="53" alt=""></td>
        <td>
            <img src="images/index_10.png" width="250" height="53" alt=""></td>
        <td colspan="5">
            <img src="images/index_11.png" width="191" height="53" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="53" alt=""></td>
    </tr>
    <tr>
        <td colspan="4" rowspan="3">
            <img src="images/index_09-13.png" width="360" height="338" alt=""></td>
        <td colspan="3">
        <a id="logo" class="logo" href="http://www.xodusen.com/community">
                <img src="images/logo.png" alt=""></a>
        </td>
        <td colspan="4" rowspan="3">
            <img src="images/index_11-15.png" width="165" height="338" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="151" alt=""></td>
    </tr>
    <tr>
        <td rowspan="2">
            <img src="images/index_09-16.png" width="25" height="187" alt=""></td>
        <td>
            <img src="images/index_16.png" width="250" height="46" alt=""></td>
        <td rowspan="2">
            <img src="images/index_11-18.png" width="26" height="187" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="46" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/index_12.png" width="250" height="141" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="141" alt=""></td>
    </tr>
    <tr>
        <td rowspan="7">
            <img src="images/index_13.png" width="27" height="548" alt=""></td>
        <td colspan="16" id="slideshow" class="slideshow">
        <a href="http://www.xodusen.com/community"><img src="images/slideshow.png" width="960" height="305" alt=""></a>
        <a href="http://www.xodusen.com/mcurl"><img src="images/minecraft.png" width="960" height="305" alt=""></a>
        <a href="steam://connect/74.121.188.194:27015"><img src="images/tf2.png" width="960" height="305" alt=""></a>
        <a href="steam://connect/74.121.188.195:27015"><img src="images/CSS.png" width="960" height="305" alt=""></a>
        <a href="steam://connect/74.121.188.197:27015"><img src="images/GM.png" width="960" height="305" alt=""></a>
        <a href="aos://3267131722:32887"><img src="images/aos.png" width="960" height="305" alt=""></a>
        <a href="steam://connect/74.121.188.196:27015"><img src="images/CSGO.png" width="960" height="305" alt=""></a></td>
        <td rowspan="7">
            <img src="images/index_15.png" width="33" height="548" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="305" alt=""></td>
    </tr>
    <tr>
        <td colspan="16">
            <img src="images/index_16-23.png" width="960" height="155" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="155" alt=""></td>
    </tr>
    <tr>
        <td rowspan="5">
            <img src="images/index_17.png" width="38" height="88" alt=""></td>
        <td rowspan="2">
            <a id="Copyright" class="Copyright" href="http://www.xodusen.com/community">
                <img src="images/Copyright.png" width="149" height="9" border="0" alt=""></a></td>
        <td colspan="14">
            <img src="images/index_25.png" width="773" height="5" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="5" alt=""></td>
    </tr>
    <tr>
        <td colspan="5" rowspan="4">
            <img src="images/index_20.png" width="527" height="83" alt=""></td>
        <td rowspan="3">
            <a id="Privacy_Policy" class="Privacy_Policy" href="http://s.xodusen.com/VhGEkH">
                <img src="images/Privacy_Policy.png" width="65" height="12" border="0" alt=""></a></td>
        <td rowspan="4">
            <img src="images/index_28.png" width="8" height="83" alt=""></td>
        <td colspan="3" rowspan="2">
            <a id="Code_of_Conduct" class="Code_of_Conduct" href="http://s.xodusen.com/Tf5Gz7">
                <img src="images/Code_of_Conduct.png" width="84" height="9" border="0" alt=""></a></td>
        <td rowspan="4">
            <img src="images/index_30.png" width="6" height="83" alt=""></td>
        <td rowspan="2">
            <a id="Contact_Us" class="Contact_Us" href="http://s.xodusen.com/T5EYsG">
                <img src="images/Contact_Us.png" width="53" height="9" border="0" alt=""></a></td>
        <td colspan="2" rowspan="4">
            <img src="images/index_26.png" width="30" height="83" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="4" alt=""></td>
    </tr>
    <tr>
        <td rowspan="3">
            <img src="images/index_27.png" width="149" height="79" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="5" alt=""></td>
    </tr>
    <tr>
        <td colspan="3" rowspan="2">
            <img src="images/index_28-35.png" width="84" height="74" alt=""></td>
        <td rowspan="2">
            <img src="images/index_29.png" width="53" height="74" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="3" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/index_30-37.png" width="65" height="71" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="71" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/spacer.gif" width="27" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="38" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="149" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="146" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="25" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="250" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="26" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="80" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="65" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="8" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="12" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="69" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="3" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="6" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="53" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="20" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="10" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="33" height="1" alt=""></td>
        <td></td>
    </tr>
</table>
</body>
</html> 
```

**div格式版本：**

网站的 div 版本：[here](http://www.xodusen.com/beta/)。

div 版本样式 CSS：

```
body {
    width: 1020px;
    margin: 0 auto;
    background-image: url(images/bg.png);
    }

#Table_01 {
    position:absolute;
    left:0px;
    top:0px;
    width:1020px;
    height:1200px;
}

#index-01_ {
    position:absolute;
    left:0px;
    top:0px;
    width:1020px;
    height:9px;
}

#index-02_ {
    position:absolute;
    left:0px;
    top:9px;
    width:826px;
    height:305px;
}

#Signin_ {
    position:absolute;
    left:826px;
    top:9px;
    width:69px;
    height:30px;
}

#index-04_ {
    position:absolute;
    left:895px;
    top:9px;
    width:3px;
    height:643px;
}

#Register_ {
    position:absolute;
    left:898px;
    top:9px;
    width:79px;
    height:30px;
}

#index-06_ {
    position:absolute;
    left:977px;
    top:9px;
    width:43px;
    height:643px;
}

#index-07_ {
    position:absolute;
    left:826px;
    top:39px;
    width:69px;
    height:613px;
}

#index-08_ {
    position:absolute;
    left:898px;
    top:39px;
    width:79px;
    height:613px;
}

#index-09_ {
    position:absolute;
    left:0px;
    top:314px;
    width:360px;
    height:338px;
}

#Logo_ {
    position:absolute;
    left:360px;
    top:314px;
    width:301px;
    height:151px;
}

#index-11_ {
    position:absolute;
    left:661px;
    top:314px;
    width:165px;
    height:338px;
}

#index-12_ {
    position:absolute;
    left:360px;
    top:465px;
    width:301px;
    height:187px;
}

#index-13_ {
    position:absolute;
    left:0px;
    top:652px;
    width:27px;
    height:548px;
}

#Slideshow_ {
    position:absolute;
    left:27px;
    top:652px;
    width:960px;
    height:305px;
}

#index-15_ {
    position:absolute;
    left:987px;
    top:652px;
    width:33px;
    height:548px;
}

#index-16_ {
    position:absolute;
    left:27px;
    top:957px;
    width:960px;
    height:155px;
}

#index-17_ {
    position:absolute;
    left:27px;
    top:1112px;
    width:39px;
    height:88px;
}

#Copyright_ {
    position:absolute;
    left:66px;
    top:1112px;
    width:148px;
    height:13px;
}

#index-19_ {
    position:absolute;
    left:214px;
    top:1112px;
    width:773px;
    height:5px;
}

#index-20_ {
    position:absolute;
    left:214px;
    top:1117px;
    width:526px;
    height:83px;
}

#Privacy-Policy_ {
    position:absolute;
    left:740px;
    top:1117px;
    width:68px;
    height:23px;
}

#index-22_ {
    position:absolute;
    left:808px;
    top:1117px;
    width:6px;
    height:83px;
}

#Code-of-Conduct_ {
    position:absolute;
    left:814px;
    top:1117px;
    width:84px;
    height:23px;
}

#index-24_ {
    position:absolute;
    left:898px;
    top:1117px;
    width:2px;
    height:83px;
}

#Contact-Us_ {
    position:absolute;
    left:900px;
    top:1117px;
    width:57px;
    height:23px;
}

#index-26_ {
    position:absolute;
    left:957px;
    top:1117px;
    width:30px;
    height:83px;
}

#index-27_ {
    position:absolute;
    left:66px;
    top:1125px;
    width:148px;
    height:75px;
}

#index-28_ {
    position:absolute;
    left:740px;
    top:1140px;
    width:68px;
    height:60px;
}

#index-29_ {
    position:absolute;
    left:814px;
    top:1140px;
    width:84px;
    height:60px;
}

#index-30_ {
    position:absolute;
    left:900px;
    top:1140px;
    width:57px;
    height:60px;
}

.logo{
    width:301px;
    height:151px;
    background:url(images/logo.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.logo:hover {
    opacity:0.9;
}

.signin{
    width:69px;
    height:30px;
    background:url(images/signin.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.signin:hover {
    opacity:0.9;
}

.register{
    width:79px;
    height:30px;
    background:url(images/register.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.register:hover {
    opacity:0.9;
}

.contact_Us{
    width:53px;
    height:9px;
    background:url(images/Contact_Us.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.contact_Us:hover {
    opacity:0.9;
}

.code_of_Conduct{
    width:84px;
    height:9px;
    background:url(images/Code_of_Conduct.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.code_of_Conduct:hover {
    opacity:0.9;
}

.privacy_policy{
    width:65px;
    height:12px;
    background:url(images/Privacy_Policy.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.privacy_policy:hover {
    opacity:0.9;
}

.copyright{
    width:148px;
    height:13px;
    background:url(images/Copyright.png);
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.copyright:hover {
    opacity:0.9;
}

.slideshow{
    width:301px;
    height:151px;
    background: url(slideshow.png),
      url(minecraft.png),
      url(tf2.png),
      url(CSS.png),
      url(GM.png),
      url(aos.png),
      url(CSGO.png),
      url(voip.png),
    text-indent:-9999px;
    border:none;
    cursor:pointer;
}
.slideshow:hover {
    opacity:0.9;
} 
```

div版本来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript">
//<![CDATA[
window.__CF=window.__CF||{};window.__CF.AJS={"vig_key":{"sid":"c6d1454039dd49b1c8400bbfdf74df7a"},"trumpet":{"message":"XodusEN is undergoing background maintenance, that will provide performance & graphical improvements to our system, but will not hinder your experience across our services."},"ga_key":{"ua":"UA-35779435-1","ga_bs":"2"},"exprmntly":{"service_id":"7967"},"cdnjs":{"__h":"1","cdnjs":"MO,GF,FX,CS,JS"},"abetterbrowser":{"ie":"10"}};
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) { var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",mirage:{responsive:0,lazy:0},oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/aav=1870252173/"},atok:"d6e39f49946fcb6d690f0d10d5a963f3",zone:"xodusen.com",rocket:"a",apps:{"vig_key":{"sid":"c6d1454039dd49b1c8400bbfdf74df7a"},"trumpet":{"message":"XodusEN is undergoing background maintenance, that will provide performance & graphical improvements to our system, but will not hinder your experience across our services."},"ga_key":{"ua":"UA-35779435-1","ga_bs":"2"},"exprmntly":{"service_id":"7967"},"cdnjs":{"__h":"1","cdnjs":"MO,GF,FX,CS,JS"},"abetterbrowser":{"ie":"10"}}}];document.write('<script type="text/javascript" src="//ajax.cloudflare.com/cdn-cgi/nexp/aav=4114775854/cloudflare.min.js"><'+'\/script>')}}catch(e){};
//]]>
</script>
<script type="text/javascript" src="//ajax.cloudflare.com/cdn-cgi/nexp/aav=1566821048/appsh.min.js"></script><script type="text/javascript">__CF.AJS.inith();</script><link rel="icon" type="image/png" href="http://www.xodusen.com/resources/images/favicon.png">
<title>Welcome to XodusEN</title>
<meta name="description" content="This is the homepage of XodusEN. Xodus Entertainment Network is a unique & friendly Gaming Community that welcomes & realises the potential, and value within any user regardless of their origin. ">
<meta name="keywords" content="XeN, Xodus, XEN, xen, Xodus Entertainment Network, gaming, community, PC, Steam, XBL, Xbox 360, PSN, Playstation, games, Gaming, Community, XodusEN, Gaming Network, Network, TF2, Server, CS:S, Minecraft, premium, servers, Counter-Strike: Source, Website, Homepage, Minecraftia">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="style.css" rel="stylesheet" type="text/css">
<script type="text/rocketscript" data-rocketsrc="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/rocketscript" data-rocketsrc="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/rocketscript">
 $(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
});
</script>
<!--[if IE]>
<script type="text/javascript">
    window.location = "http://www.xodusen.com/ie/";
</script>
<![endif]-->
<script type="text/javascript">
/* <![CDATA[ */
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-35779435-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

(function(b){(function(a){"__CF"in b&&"DJS"in b.__CF?b.__CF.DJS.push(a):"addEventListener"in b?b.addEventListener("load",a,!1):b.attachEvent("onload",a)})(function(){"FB"in b&&"Event"in FB&&"subscribe"in FB.Event&&(FB.Event.subscribe("edge.create",function(a){_gaq.push(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){_gaq.push(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){_gaq.push(["_trackSocial","facebook","send",a])}));"twttr"in b&&"events"in twttr&&"bind"in twttr.events&&twttr.events.bind("tweet",function(a){if(a){var b;if(a.target&&a.target.nodeName=="IFRAME")a:{if(a=a.target.src){a=a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);b=0;for(var c;c=a[b];++b)if(c.indexOf("url")===0){b=unescape(c.split("=")[1]);break a}}b=void 0}_gaq.push(["_trackSocial","twitter","tweet",b])}})})})(window);
/* ]]> */
</script>
<meta name="pinterest" content="nopin"/></head>
<body style="background-color:#d7d7d7;"><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="www.xodusen.com",d="/cdn-cgi/cl/",e="618e40fe1e01787d9cb9aa2f8abc52caf8a32796.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>
<div id="Table_01">
<div id="index-01_">
<img id="index_01" src="images/index_01.png" width="1020" height="9" alt=""/>
</div>
<div id="index-02_">
<img id="index_02" src="images/index_02.png" width="826" height="305" alt=""/>
</div>
<div id="Signin_">
<a href="http://s.xodusen.com/VrtqYm">
<img id="Signin" class="signin" src="images/Signin.png" width="69" height="30" border="0" alt=""/></a>
</div>
<div id="index-04_">
<img id="index_04" src="images/index_04.png" width="3" height="643" alt=""/>
</div>
<div id="Register_">
<a href="http://s.xodusen.com/WW3rpZ">
<img id="Register" class="register" src="images/Register.png" width="79" height="30" alt=""/></a>
</div>
<div id="index-06_">
<img id="index_06" src="images/index_06.png" width="43" height="643" alt=""/>
</div>
<div id="index-07_">
<img id="index_07" src="images/index_07.png" width="69" height="613" alt=""/>
</div>
<div id="index-08_">
<img id="index_08" src="images/index_08.png" width="79" height="613" alt=""/>
</div>
<div id="index-09_">
<img id="index_09" src="images/index_09.png" width="360" height="338" alt=""/>
</div>
<div id="Logo_">
<a href="http://s.xodusen.com/WW3rpZ">
<img class="logo" src="images/Logo.png" width="301" height="151" alt=""></a>
</div>
<div id="index-11_">
<img id="index_11" src="images/index_11.png" width="165" height="338" alt=""/>
</div>
<div id="index-12_">
<img id="index_12" src="images/index_12.png" width="301" height="187" alt=""/>
</div>
<div id="index-13_">
<img id="index_13" src="images/index_13.png" width="27" height="548" alt=""/>
</div>
<div id="Slideshow_" class="slideshow">
<a href="http://www.xodusen.com/community">
<img src="images/slideshow.png" width="960" height="305" alt=""></a>
<a href="http://www.xodusen.com/mcurl">
<img src="images/minecraft.png" width="960" height="305" alt=""></a>
<a href="steam://connect/74.121.188.194:27015">
<img src="images/tf2.png" width="960" height="305" alt=""></a>
<a href="steam://connect/74.121.188.195:27015">
<img src="images/CSS.png" width="960" height="305" alt=""></a>
<a href="steam://connect/74.121.188.197:27015">
<img src="images/GM.png" width="960" height="305" alt=""></a>
<a href="aos://3267131722:32887">
<img src="images/aos.png" width="960" height="305" alt=""></a>
<a href="steam://connect/74.121.188.196:27015">
<img src="images/CSGO.png" width="960" height="305" alt=""></a>
</div>
<div id="index-15_">
<img id="index_15" src="images/index_15.png" width="33" height="548" alt=""/>
</div>
<div id="index-16_">
<img id="index_16" src="images/index_16.png" width="960" height="155" alt=""/>
</div>
<div id="index-17_">
<img id="index_17" src="images/index_17.png" width="39" height="88" alt=""/>
</div>
<div id="Copyright_">
<a href="http://www.xodusen.com/community">
<img id="Copyright" src="images/Copyright.png" width="148" height="13" alt=""></a>
</div>
<div id="index-19_">
<img id="index_19" src="images/index_19.png" width="773" height="5" alt=""/>
</div>
<div id="index-20_">
<img id="index_20" src="images/index_20.png" width="526" height="83" alt=""/>
</div>
<div id="Privacy-Policy_">
<a href="http://s.xodusen.com/VhGEkH">
<img id="Privacy_Policy" src="images/Privacy_Policy.png" width="68" height="23" alt=""></a>
</div>
<div id="index-22_">
<img id="index_22" src="images/index_22.png" width="6" height="83" alt=""/>
</div>
<div id="Code-of-Conduct_">
<a href="http://s.xodusen.com/Tf5Gz7">
<img id="Code_of_Conduct" src="images/Code_of_Conduct.png" width="84" height="23" alt=""></a>
</div>
<div id="index-24_">
<img id="index_24" src="images/index_24.png" width="2" height="83" alt=""/>
</div>
<div id="Contact-Us_">
<a href="http://s.xodusen.com/T5EYsG">
<img id="Contact_Us" src="images/Contact_Us.png" width="57" height="23" alt=""></a>
</div>
<div id="index-26_">
<img id="index_26" src="images/index_26.png" width="30" height="83" alt=""/>
</div>
<div id="index-27_">
<img id="index_27" src="images/index_27.png" width="148" height="75" alt=""/>
</div>
<div id="index-28_">
<img id="index_28" src="images/index_28.png" width="68" height="60" alt=""/>
</div>
<div id="index-29_">
<img id="index_29" src="images/index_29.png" width="84" height="60" alt=""/>
</div>
<div id="index-30_">
<img id="index_30" src="images/index_30.png" width="57" height="60" alt=""/>
</div>
</div>
<script type="text/javascript" src="//ajax.cloudflare.com/cdn-cgi/nexp/aav=4188748942/apps1.min.js"></script><script type="text/javascript">__CF.AJS.init1();</script></body>
</html> 
```

我的问题是，如何在网站的 div 格式中实现与网站的表格格式相同的“居中”结果？

我做了一些研究无济于事，所以我想考虑到这个网站的声誉，我会在这里发布我的问题。

**编辑**

好的，谢谢你的建议。我将尝试与他们合作以实现我想要实现的结果。

先感谢您，

* * *

## ～梦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:33:28.027

没关系，我结合了这样一个问题背后的理论（我已经知道），并将其与 body 标签中的某些 CSS 元素结合起来，以实现特定于我的网站的居中外观。

我从这里更改了 style.css 的 body 标记中的 CSS 代码；

```
body {
    width: 1020px;
    margin: 0 auto;
    background-image: url(images/bg.png);
    } 
```

对此；

```
body{
   left:50%;
   width:1020px;
   margin:0 auto;
   margin-left:510px;
   background-image:url(images/bg.png);
   } 
```

感谢您的所有建议！

* * *

## ～梦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:52:29.537

将事物居中并在所有imo中进行布局的最简单方法是避免绝对定位。不使用绝对定位时，可以使用

```
#div {margin-left: auto; margin-right: auto} 
```

作为将布局的特定部分居中的一种相当可靠的粗略方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:12:07.443

尝试给包含 div 的“最高”宽度，然后是用户边距：0 auto;

```
<style>
#wrapper { width: 1024px; margin: 0 auto; }
</style>
<body>
<div id="wrapper"></div>
</body> 
```

# javascript - 从标准 HTML 页面预填充没有代码的 ASP 表单

> ID：13077721
> 
> 赞同：0
> 
> 时间：2012-10-25T21:39:13.230
> 
> 标签：javascript, forms, asp-classic

我被分配了一项任务，我相信我的雇主只是在我面前放了一根胡萝卜，看看我能跑多远。

供应商向我们提供了表单应用程序。此应用程序在 ASP 中。我的任务是查看是否可以预填充此 ASP 应用程序，因为我们想在我们的网站上托管一个小的“迷你向导”问卷，当您单击“迷你向导”上的提交时，它会预填充一些字段在应用程序上。

我向他提出的第一个问题是“我们是否可以访问背后的 ASP 代码来查找通过 Get/Post 传递的参数。 - 否

我想，好吧，所以没有办法做到这一点。然后他说你也许可以用javascript来做。我可以看到是否可以将 JS 放在应用程序页面上，但我也不能这样做。

我的最终想法是对该页面进行 ajax 调用，修改内容，然后将其显示在我们的网站上。我不确定这是否可行，从未尝试过从非 asp 站点对 ASP 页面进行 AJAX 调用。

可以做到吗，或者这是某种形式的新开发者欺侮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:41:09.787

是的，它可以做到。当您将使用客户端 ajax 时，该页面将只为您提供该页面的 HTML 输出。所以你只需要知道你需要传递给那个页面的参数。甚至可能不需要传递参数。所以，拿一个你自己的asp页面并进行ajax调用

# android - Android 应用程序被错误配置为 Facebook 登录

> ID：13077724
> 
> 赞同：0
> 
> 时间：2012-10-25T21:39:21.080
> 
> 标签：android, facebook, eclipse

我正在尝试为我的 android 应用程序集成 FB 登录，并且**已经按照前面问题中的步骤进行操作，所以请不要投反对票或尝试重复**，当弹出窗口时，我在对话框中收到错误消息，说应用程序配置错误

我正在通过以下方式生成我的密钥

```
C:\Program Files\Adobe\Adobe Dreamweaver CS6\JVM\bin>keytool -exportcert -alias
androiddebugkey -keystore "C:\Users\Marc\.android\debug.keystore" | "C:\Users\Ma
rc\openssl\bin\openssl" sha1 -binary | "C:\users\marc\openssl\bin\openssl" base6
4
Enter keystore password:  android
THIS SHOWS A KEY 
```

在我的 facebook 应用程序配置面板中，选项设置如下：

包名：app.android.amazingjobs

类名：app.android.amazingjobs.activity_mainmenu**这应该是 .java 类还是 XML 活动名称？**

密钥哈希：我的密钥

代码如下：

```
package app.android.amazingjobs;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.view.View.OnClickListener;

public class Mainmenu extends Activity {
    private static final String FACEBOOK_APPID = "123456789";
    private static final String FACEBOOK_PERMISSION = "email, publish_stream";
    private final Handler mFacebookHandler = new Handler();
    private TextView loginStatus;
    private FacebookConnector facebookConnector;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mainmenu);
        Button Searchbutton = (Button) findViewById(R.id.JobSearchButton);
        Searchbutton.setOnClickListener(StartSearch);
        this.facebookConnector = new FacebookConnector(FACEBOOK_APPID, this, getApplicationContext(), new String[] {FACEBOOK_PERMISSION});

        if (facebookConnector.getFacebook().isSessionValid()) {
        } else {
          facebookConnector.login();
        }

    }

    private OnClickListener StartSearch = new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(Mainmenu.this, SearchForJobs.class);
            startActivity(intent);

        }
    };

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_mainmenu, menu);
    return true;
} 
```

}

编辑

我在 eclipse 中的 logcat 在加载 facebook 登录时显示以下消息：

```
10-28 19:37:27.596: D/ATRecorder(12643): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@405279f0
10-28 19:37:27.616: D/WindowManagerImpl(12643): addView, new view, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@40522bf0
10-28 19:37:31.220: D/ATRecorder(12643): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4053b308
10-28 19:37:31.340: D/Facebook-Util(12643): GET URL: https://graph.facebook.com/414522241948993?format=json&fields=supports_attribution
10-28 19:37:32.381: D/WindowManagerImpl(12643): finishRemoveViewLocked, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@40522bf0
10-28 19:37:33.082: D/dalvikvm(12643): GC_CONCURRENT freed 250K, 47% free 3036K/5639K, external 0K/0K, paused 6ms+3ms
10-28 19:37:34.483: D/NativeCrypto(12643): returned from sslSelect() with result 1, error code 2
10-28 19:37:34.673: D/Facebook-publish(12643): Unsupported get request.
10-28 19:38:50.817: D/WindowManagerImpl(12643): addView, new view, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@4052d1d8
10-28 19:38:54.221: W/KeyCharacterMap(12643): Can't open keycharmap file
10-28 19:38:54.221: W/KeyCharacterMap(12643): Error loading keycharmap file '/system/usr/keychars/atmel-touchscreen.kcm.bin'. hw.keyboards.65537.devname='atmel-touchscreen'
10-28 19:38:54.221: I/KeyCharacterMap(12643): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-28 19:38:54.571: D/WindowManagerImpl(12643): finishRemoveViewLocked, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@4052d1d8 
```

更新：

是的，似乎 Jesse 是对的，这是使用错误密钥的情况，即使 keytool 要求我输入密码我仍然使用错误的密码，但不知道为什么我没有收到 logcat 消息，我已经实现来自这里的代码：

[http://p-xr.com/implementing-facebook-into-your-app-invalid-key-with-keytool/](http://p-xr.com/implementing-facebook-into-your-app-invalid-key-with-keytool/)

这会在 logcat 中输出正确的密钥，以在您的应用配置中使用。

感谢杰西的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:11:21.547

> 类名：app.android.amazingjobs.activity_mainmenu 这应该是 .java 类还是 XML 活动名？

它是 .java 类，所以类似于“app.android.amazingjobs.MainActivity”。

此外，其他人似乎无法使用终端命令获取正确的哈希键。我建议尝试这种更友好的方式来获取正确的哈希键。

在此处查看答案：[Android：Facebook 登录不起作用](http://facebook.stackoverflow.com/questions/13049346/android-facebook-login-doesnt-work/13059177#13059177)

# javascript - 另一个对象中的 Javascript 对象

> ID：13077727
> 
> 赞同：1
> 
> 时间：2012-10-25T21:39:39.490
> 
> 标签：javascript

我现在搜索了一个小时（没有任何成功），我如何在另一个对象中定义一个对象（在 javascript 中）：

```
function UserStat(arr) {
    var arrx = arr;
    this.day = function(dateofday) {
        //Some code going here which results will be stored variables like:
        this.a = someInnerFunction();
        this.b = someOtherFunction();
    }
} 
```

当我创建外部函数的实例时，我想访问这些变量，如果可能的话，就像这样：

```
var value = new UserStat(arr1).day('2012-10-20').a 
```

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:51:01.660

我不确定您想如何使用 dateofday 变量，但这会起作用：

```
function UserStat(arr) {
    var arrx = arr;
    this.day = {
        a: someInnerFunction,
        b: someOtherFunction
    };
}

new UserStat().day.a(); 
```

也可以这样：

```
function UserStat(arr) {
    var arrx = arr;
    this.day = (function(date){
        var obj = {};
        obj.a = someInnerFunction;
        obj.b = someOtherFunction;
        return obj;
    }(dateofday));
} 
```

甚至这样：

```
function UserStat(arr) {
    var arrx = arr;
    this.day = new function() {
        this.a = someInnerFunction,
        this.b = someOtherFunction
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:53:26.273

```
function UserStat(arr) {
    var arrx = arr;
    this.day = function(dateofday) {
        //Some code going here which results will be stored variables like:
        var dayFunc = {
            a: someInnerFunction,
            b: otherFunc           
        }
        return dayFunc;
    }
}
​ 
```

# mscorlib - 无法将程序加载到客户计算机上，不断出错。

> ID：13077735
> 
> 赞同：0
> 
> 时间：2012-10-25T21:40:04.620
> 
> 标签：mscorlib

我正在尝试解决这个问题，因为我没有遇到过这个问题。我正在尝试在运行 Windows XP 的客户计算机上加载我的 HVAC 线圈选择软件，无论我尝试什么，我都会遇到相同的错误。我的 IT 部门说这是我客户计算机上的病毒，据他说他已经清理了它。我希望您能提供帮助，因为这是一个很好的客户，而且我认为我的 IT 部门很懒惰。以下是错误的完整详细信息。谢谢你提供的所有帮助。

```
System.IO.FileNotFoundException: The specified module could not be found. (Exception from HRESULT: 0x8007007E)
   at System.Management.ThreadDispatch.Start()
   at System.Management.ManagementScope.Initialize()
   at System.Management.ManagementObjectSearcher.Initialize()
   at System.Management.ManagementObjectSearcher.Get()
   at Microsoft.VisualBasic.Devices.ComputerInfo.get_OSManagementBaseObject()
   at Microsoft.VisualBasic.Devices.ComputerInfo.get_OSFullName()
   at TotPackage.Login.btnLogin_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3634 (GDR.050727-3600)
    CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
The TOTAL PACKAGE
    Assembly Version: 9.12.2012.2
    Win32 Version: 1.0.0.1
    CodeBase: file:///C:/Documents%20and%20Settings/bhearn/Local%20Settings/Apps/2.0/PKLPRNX9.DOY/ONT96PNM.EH6/thet..tion_a6332c07e9ae935a_001a.0000_1afb0bd62aad833e/The%20TOTAL%20PACKAGE.exe
----------------------------------------
Microsoft.VisualBasic
    Assembly Version: 8.0.0.0
    Win32 Version: 8.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/Microsoft.VisualBasic/8.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3634 (GDR.050727-3600)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3637 (GDR.050727-3600)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3639 (GDR.050727-3600)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Runtime.Remoting
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Runtime.Remoting/2.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll
----------------------------------------
System.Data
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_32/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3082 (QFE.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
Accessibility
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/Accessibility/2.0.0.0__b03f5f7f11d50a3a/Accessibility.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Web.Services
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Web.Services/2.0.0.0__b03f5f7f11d50a3a/System.Web.Services.dll
----------------------------------------
lwdnwexc
    Assembly Version: 9.12.2012.2
    Win32 Version: 2.0.50727.3634 (GDR.050727-3600)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Transactions
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_32/System.Transactions/2.0.0.0__b77a5c561934e089/System.Transactions.dll
----------------------------------------
System.EnterpriseServices
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_32/System.EnterpriseServices/2.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll
----------------------------------------
Rae.Core
    Assembly Version: 2007.4.9.1
    Win32 Version: 2007.04.09.01
    CodeBase: file:///C:/Documents%20and%20Settings/bhearn/Local%20Settings/Apps/2.0/PKLPRNX9.DOY/ONT96PNM.EH6/thet..tion_a6332c07e9ae935a_001a.0000_1afb0bd62aad833e/Rae.Core.DLL
----------------------------------------
System.Management
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Management/2.0.0.0__b03f5f7f11d50a3a/System.Management.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:20:39.163

我们的一位客户遇到了完全相同的问题。我得到了他们的 IT 专家的帮助，我们通过修复 WMI 解决了这个问题。

我使用这篇文章解决了它： [System.Management.ManagementException：未找到](https://stackoverflow.com/questions/7165174/system-management-managementexception-not-found)

# iphone - iOS 5 UIWindow makeKeyAndVisible 关闭模式

> ID：13077737
> 
> 赞同：6
> 
> 时间：2012-10-25T21:40:10.847
> 
> 标签：iphone, ios5, uiwindow

我有一个场景，我从主窗口的 rootViewController 呈现一个模式视图控制器。在加载此模式的内容时，我正在切换到另一个加载窗口，我将其设置为关键且可见。

此窗口充当加载指示器，不允许用户与应用程序交互。加载完成后，我将其设置为关键且可见，从而切换回主窗口。当我这样做时，模态被强制关闭，应用程序不再能够呈现模态。

有趣的是，如果我在切换回主窗口时执行 [UIWindow makeKeyWindow]，则没有问题。[UIWindow makeKeyAndVisible] 是导致问题的原因。[UIWindow makeKeyWindow] 是可接受的替代方案吗？

这仅适用于 iOS 5。iOS 6 没有问题。我不支持 iOS 4。有谁知道这里可能会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T13:30:00.793

我得到了相同的行为，并且正如文档所述，该`makeKeyAndVisible`方法是*一种方便的方法*，在我看来，`makeKeyAndVisible`用工作代码替换调用是合法的：

```
[window makeKeyWindow];
window.hidden = NO; 
```

不知道出了什么问题，但它看起来像一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:24:37.883

它在 iOS 5 UIWindow 实现中绝对是错误。我遇到了这种奇怪的行为，Aleksey 的回答就是要走的路。

# excel - 从 Excel 电子表格中的每一行创建文本文件

> ID：13077740
> 
> 赞同：5
> 
> 时间：2012-10-25T21:40:15.913
> 
> 标签：excel, file, text, rows

我需要帮助从名为“工作表”的 Excel 电子表格中的每一行创建单独的文本文件。我希望文本文件以 A 列的内容命名，以 BG 列为内容，最好在文本文件的每一列之间有一个双硬返回，因此每一列之间都有一个空行。

这可能吗？我该怎么办。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:46:09.000

附加的 VBA 宏将执行此操作，将 txt 文件保存在 C:\Temp\

```
Sub WriteTotxt()

Const forReading = 1, forAppending = 3, fsoForWriting = 2
Dim fs, objTextStream, sText As String
Dim lLastRow As Long, lRowLoop As Long, lLastCol As Long, lColLoop As Long

lLastRow = Cells(Rows.Count, 1).End(xlUp).Row

For lRowLoop = 1 To lLastRow

    Set fs = CreateObject("Scripting.FileSystemObject")
    Set objTextStream = fs.opentextfile("c:\temp\" & Cells(lRowLoop, 1) & ".txt", fsoForWriting, True)

    sText = ""

    For lColLoop = 1 To 7
        sText = sText & Cells(lRowLoop, lColLoop) & Chr(10) & Chr(10)
    Next lColLoop

    objTextStream.writeline (Left(sText, Len(sText) - 1))

    objTextStream.Close
    Set objTextStream = Nothing
    Set fs = Nothing

Next lRowLoop

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T00:56:51.790

@nutsch 的回答非常好，应该在 99.9% 的时间内有效。在 FSO 不可用的极少数情况下，这里有一个没有依赖项的版本。照原样，它确实要求源工作表在内容部分中没有任何空白行。

```
Sub SaveRowsAsCSV()

Dim wb As Excel.Workbook, wbNew As Excel.Workbook
Dim wsSource As Excel.Worksheet, wsTemp As Excel.Worksheet
Dim r As Long, c As Long

    Set wsSource = ThisWorkbook.Worksheets("worksheet")

    Application.DisplayAlerts = False 'will overwrite existing files without asking

    r = 1
    Do Until Len(Trim(wsSource.Cells(r, 1).Value)) = 0
        ThisWorkbook.Worksheets.Add ThisWorkbook.Worksheets(1)
        Set wsTemp = ThisWorkbook.Worksheets(1)

        For c = 2 To 7
            wsTemp.Cells((c - 1) * 2 - 1, 1).Value = wsSource.Cells(r, c).Value
        Next c

        wsTemp.Move
        Set wbNew = ActiveWorkbook
        Set wsTemp = wbNew.Worksheets(1)
        'wbNew.SaveAs wsSource.Cells(r, 1).Value & ".csv", xlCSV 'old way
        wbNew.SaveAs "textfile" & r & ".csv", xlCSV 'new way
        'you can try other file formats listed at http://msdn.microsoft.com/en-us/library/office/aa194915(v=office.10).aspx
        wbNew.Close
        ThisWorkbook.Activate
        r = r + 1
    Loop

    Application.DisplayAlerts = True

End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-18T17:37:37.543

为了他人的利益，我解决了这个问题。我用“Chr(13) & Chr(10)”替换了“Chr(10) & Chr(10)”，效果很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-18T16:49:24.060

很长一段时间以来，我使用下面的简单代码将我的 excel 行保存为文本文件或许多其他格式，它一直对我有用。

Sub savemyrowsastext()
Dim x

For Each cell In Sheet1.Range("A1:A" & Sheet1.UsedRange.Rows.Count)
' 您可以将 sheet1 更改为您自己的选择
saveText = cell.Text
Open "C:\wamp\ www\GeoPC_NG\sogistate\igala_land\" & saveText & ".php" For Output As #1
Print #1, cell.Offset(0, 1).Text
Close #1
For x = 1 To 3 ' 循环 3 次。
Beep ' 发出声音。
下一个 x
下一个单元格
End Sub

注意：

1\. A1 列 = 文件标题
2\. B1 列 = 文件内容
3\. 直到最后一行包含文本（即空行）

以相反的顺序，如果你想这样;

1\. A1 列 = 文件标题
2\. A2 列 = 文件内容
3\. 直到最后一行包含文本（即空行），只需将***Print #1, cell.Offset(0, 1).Text*** 更改为 ***Print #1, cell .Offset(1, 0).Text***

我的文件夹位置 = C:\wamp\www\GeoPC_NG\kogistate\igala_land\
我的文件扩展名 = .php，您可以将扩展名更改为您自己的选择（.txt、.htm & . csv 等）我在每次保存结束时都包含了 bip 声音，以了解我的工作是否正在进行
Dim x
For x = 1 To 3 ' 循环 3 次。
Beep ' 发出声音。

# php - 每页的 PHP/AJAX 帖子限制

> ID：13077743
> 
> 赞同：1
> 
> 时间：2012-10-25T21:40:23.110
> 
> 标签：php, xml, ajax

于是我开始为自己开发博客，遇到了第一个挫折。我想用下一个 10 替换这个函数用 ajax 返回的帖子。我非常了解 javascript，但我对 ajax 不太了解（我只知道它向服务器发送请求，结果被发回，然后您可以将数据替换为您网站上的新数据）

```
function get_posts($i = 0,$max = 10) {
global $con;
$query = 'SELECT * FROM post';
$result = mysqli_query($con, $query);
$rows = mysqli_num_rows($result);
for (;$i < $rows&&$i < $max;$i++) {
    $row_res=mysqli_fetch_array($result);
    printf("<h1>%s</h1><p class='user'>Posted By: %s</p>
            <p class='date'>%s</p>
            <p>%s</p>", 
            $row_res["title"],$row_res["user"],$row_res["date"],$row_res["content"]);
}
} 
```

这回报很好。我创建了执行 AJAX 函数的链接，该函数应该返回下一个十个。这是功能：

```
function func1() {
 var xmlhttp;
 if (window.XMLHttpRequest) {
 xmlhttp=new XMLHttpRequest();
 }

xmlhttp.onreadystatechange=function() {
 if (xmlhttp.readyState==4 && xmlhttp.status==200) {
   document.getElementById("test").innerHTML=xmlhttp.responseText;
 }
}
xmlhttp.open("GET","connect.php?func=1",true);
xmlhttp.send(); 
```

connect.php?func=1 指向一个 if，它使用新的 args 执行 get_posts() 函数。但它不显示任何内容，或者它在页面顶部显示第一篇文章，在内容部分显示另一个第一篇文章。

# c# - 正则表达式获取文件扩展名前的最后 6 个字符

> ID：13077744
> 
> 赞同：2
> 
> 时间：2012-10-25T21:40:24.300
> 
> 标签：c#, regex

我需要一个 C# 正则表达式来提取字符串的最后 6 个字母并在它们中间添加一个正斜杠。例如：

```
xx_xxxx_xxxABCXYZ.Something.csv 
```

我需要`ABC/XYZ`

3 个字母的组成部分可以是任何东西，前面 x 的数量会有所不同。但是，我需要的 6 个字母总是在第一个句点之前。

我没有附加代码的选项，因为我需要将模式和替换输入到 GUI 中。

非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:53:30.453

用这个：

```
^.*?(\w{3})(\w{3})\..*$ 
```

用。。。来代替：

```
$1/$2 
```

该模式匹配整个字符串，因此所有内容最终都会被删除，但它会在捕获组中捕获两个字符串，每个字符串包含 3 个字符。`$1`然后使用和访问并放回原位`$2`。模式后面也跟着`\.`，所以这六个字符后面必须有一个点。`?`之后`.*`确保您找到第一个可能出现的位置（而不是）`ething`。

请注意，这允许数字、字母和下划线组成六个字符。如果您只想要字母，请使用`[a-zA-Z]`or`[A-Z]`仅用于大写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T21:44:12.023

我会使用[Path.GetFileNameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension%28v=vs.71%29.aspx)然后[string.Insert](http://msdn.microsoft.com/en-us/library/system.string.insert%28v=vs.71%29.aspx)添加斜杠

# sql-server - SQL Server：将数据从一个表复制到另一个表

> ID：13077746
> 
> 赞同：0
> 
> 时间：2012-10-25T21:40:41.313
> 
> 标签：sql-server

我想用匹配 ID`Table2`的名称更新名称`Table1`

我在每个表中有大约 100 行。

这是我的示例表。

**表格1**

*   ID
*   姓名

**表2**

*   ID
*   姓名

样本数据

**表格1**

```
 ID |Name
    --------
     1 |abc
     2 |bcd 
```

**表2**

```
 ID |Name
    --------
     1 |xyz
     2 |OOS 
```

预期结果

**表2**

```
 ID |Name
    --------        
     1 |abc
     2 |bcd 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:42:49.437

您可以在字段上使用`UPDATE`两个`JOIN`表中的一个`id`：

```
update t2
set t2.name = t1.name
from table2 t2
inner join table1 t1
  on t2.id = t1.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2a109/2)

# php - 迭代包含字母和数字的变量 (q1)

> ID：13077752
> 
> 赞同：-1
> 
> 时间：2012-10-25T21:41:27.393
> 
> 标签：php

我对编码相当陌生...

我希望能够在循环中将 PHP 变量从保持值“q1”更改为“q2”、“q3”等。

q1 ect 与数据库中的问题 id 相关，我希望能够实现的最终结果是增加 qnumber 以便为正确的问题编号记录下一个问题的答案。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:44:38.127

```
for($i=1; $i<=$limit; $i++) {
  $var = 'q'.$i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:44:47.077

在伪代码中：

```
$var = "q"; 
$i = 1;
for $i to N-1 
  $var.$i//do whatever. $var.i concatenates. 
```

# objective-c - 需要使用自签名证书和 http 身份验证查看网站

> ID：13077753
> 
> 赞同：1
> 
> 时间：2012-10-25T21:41:28.797
> 
> 标签：objective-c, ios, uiwebview, ssl-certificate, http-authentication

我无法查看具有自签名证书且还需要 HTTP 身份验证的网站。目前我正在尝试通过使用[如何在 UIWebView 中显示身份验证挑战来实现它？](https://stackoverflow.com/questions/1769888/how-to-display-the-authentication-challenge-in-uiwebview)和[UIWebView 来查看自签名网站（没有私有 api，不是 NSURLConnection） - 有可能吗？](https://stackoverflow.com/questions/11573164/uiwebview-to-view-self-signed-websites-no-private-api-not-nsurlconnection-i)作为如何实现这一点的指南。我也在尝试使用绕过自签名证书的私有 api 方法，但我无法找到指向它的链接。但私有 api 标头是：

```
@interface NSURLRequest (DummyInterface)
+ (BOOL)allowsAnyHTTPSCertificateForHost:(NSString*)host;
+ (void)setAllowsAnyHTTPSCertificate:(BOOL)allow forHost:(NSString*)host;
@end 
```

然后我将这些作为重要功能：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
{
    NSLog(@"Did start loading: %@ auth:%d", [[request URL] absoluteString], _authenticated);

      [NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[URL host]];

   _request=[NSURLRequest requestWithURL:URL];

    if (!_authenticated) {
        _authenticated = NO;

        [NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[URL host]];

        _urlConnection = [[NSURLConnection alloc] initWithRequest:_request delegate:self];

        [_urlConnection start];

       [mainWebView loadRequest:_request];

        return NO;
    }

    return YES;

} 
```

基本上调用 nsurl 连接来传递登录凭据。

```
 #pragma mark - NURLConnection delegate

    - (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;
    {

        NSLog(@"WebController Got auth challange via NSURLConnection");

        [NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[URL host]];

        if ([challenge previousFailureCount] == 0)
        {
            _authenticated = YES;

            NSURLCredential *credential = [NSURLCredential credentialWithUser:@"username"
              password:@"password"
                                                                   persistence:NSURLCredentialPersistenceForSession];

           [challenge.sender useCredential:credential forAuthenticationChallenge:challenge];

        NSLog(@"credential created");

    } else
    {
        NSLog(@"previous authentication failure");
        [[challenge sender] cancelAuthenticationChallenge:challenge];
    }
} 
```

和

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;
{
    NSLog(@"WebController received response via NSURLConnection");

    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
     NSLog(@"remote url returned error %d %@",[httpResponse statusCode],[NSHTTPURLResponse localizedStringForStatusCode:[httpResponse statusCode]]);

    NSLog(@"The response is =%@",response);

   _authenticated = YES;

  [NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[URL host]];

    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:URL];

    [mainWebView loadRequest:urlRequest];

    [_urlConnection cancel];    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T19:07:43.923

使用以下两种方法，我们可以允许自签名证书

```
-(BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace;

-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge; 
```

[我在这里](https://stackoverflow.com/a/20789128/730807)使用这些方法进行了深入回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:14:41.300

这很容易使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)
实现 我通过子类化`AFHTTPRequestOperation`并将此代码添加到 init 来实现

```
// SSL Support
[self setAuthenticationChallengeBlock:^(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge) {
    if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) {
        [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
    }
}];
[self setAuthenticationAgainstProtectionSpaceBlock:^BOOL(NSURLConnection *connection, NSURLProtectionSpace *protectionSpace) {
    if([[protectionSpace authenticationMethod] isEqualToString:NSURLAuthenticationMethodServerTrust]) {
        if(shouldAllowSelfSignedCert) {
            return YES; // Self-signed cert will be accepted
        } else {
            return NO;  // Self-signed cert will be rejected
        }
        // Note: it doesn't seem to matter what you return for a proper SSL cert
        //       only self-signed certs
    }
    // If no other authentication is required, return NO for everything else
    // Otherwise maybe YES for NSURLAuthenticationMethodDefault and etc.
    return NO;
}]; 
```

您还可以将您的授权标头添加到子类中，这使得在应用程序的各个部分中使用连接非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T04:52:42.730

覆盖 NSURLConnectionDelegate 的

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge; 
```

以下将接受任何未经主机验证的 SSL 证书，因此不安全。您应该有一个包含所有有效主机的资源文件，并使用安全框架比较证书。

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) {
        [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
    } else {
        [challenge.sender performDefaultHandlingForAuthenticationChallenge:challenge];
    }
} 
```

您是否考虑过使用 ASIHTTPRequest？我相信它有简化这一点的方法。

# objective-c - 使用 UITabBarController 从presentingViewController 调用方法

> ID：13077760
> 
> 赞同：2
> 
> 时间：2012-10-25T21:41:48.013
> 
> 标签：objective-c, ios, uitabbarcontroller

我有一个控制器，让我们称它`mainController`属于我的`UITabNarController`. 现在，在内部`mainController`，我加载了一个新的 viewController，让我们`secondViewController`这样称呼它：

```
UIStoryboard *storyboard = self.storyboard;
secondViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"secondViewController"];
[self presentViewController:svc animated:YES completion:nil]; 
```

哪个工作正常。但是在内部`secondViewController`，我希望从 调用一个方法`mainController`，如下所示：

```
 [((mainController*)self.presentingViewController) aMethod]; 
```

过去，我从来没有使用过 UITabBarController，这很好用。但是，现在我得到一个错误

```
[UITabBarController aMethod:]: unrecognized selector sent to instance 
```

为什么`presentingViewController`用 回应`UITabBarController`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:34:06.370

这感觉有点骇人听闻，但您可以使用 [(UITabBarController *)self.presentingViewController selectedViewController] 获得对 mainController 的引用。如果这不起作用，或者您不想那样做，那么使用委托就是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:21:36.270

似乎是因为您的 mainController 没有设置为提供演示上下文，并且搜索会沿着层次结构上升，直到找到提供它的 UITabBarController 之类的东西。

在调用之前尝试将`definesPresentationContext`您的设置为 YES 。如果那没有帮助，请尝试设置为`mainController``presentViewController``modalPresentationStyle``UIModalPresentationCurrentContext`

请参阅以下文档：

> 一个布尔值，指示当视图控制器或其后代之一呈现视图控制器时是否覆盖此视图控制器的视图。
> 
> @property(nonatomic, assign) BOOL 定义PresentationContext
> 
> 讨论
> 
> 当一个视图控制器被呈现时，iOS 从呈现视图控制器开始并询问它是否想要提供呈现上下文。如果呈现视图控制器不提供上下文，则 iOS 会询问呈现视图控制器的父视图控制器。iOS 向上搜索视图控制器层次结构，直到视图控制器提供表示上下文。如果没有视图控制器提供上下文，则窗口的根视图控制器提供表示上下文。
> 
> 如果视图控制器返回 YES，那么它会提供一个表示上下文。由视图控制器的视图覆盖的窗口部分决定了呈现的视图控制器视图的大小。此属性的默认值为 NO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:29:53.470

下面的输出是什么？

```
NSLog(@"呈现视图控制器：%@", [self.presentingViewController 类]);
```

# vbscript - VBScript FileCopy 但不覆盖 1 个文件

> ID：13077762
> 
> 赞同：1
> 
> 时间：2012-10-25T21:41:54.993
> 
> 标签：vbscript, windows-xp-sp3

我有一个问题（显然哈哈）...

在 stackoverflow.com 和各种网站的帮助下，下面的代码终于对我有用了……

我现在要做的就是确保一个文件不会被更新\覆盖？

我该如何做到这一点？

在源文件中，我有各种文件，其中的“sample.ini”是用户名和密码部分。

当人们在我创建的 HTA 文件中单击我的“更新按钮”时，我不想在他们的 PC 上更新该文件，一切都可以覆盖吗？

还...如果您看到我可以改进的地方，请告诉我...

* * *

* * *

```
Set objFSO = CreateObject("Scripting.FileSystemObject")

' -------------------------------------------------------------

   If Not objFSO.FolderExists("H:\Pavles Program") Then
Set FinalLoc = objFSO.CreateFolder("H:\Pavles Program")
   End If

' -------------------------------------------------------------

 SourceServer = "\\VBScript_Source\"
  FinalLoc = "H:\Pavles Program\"

For Each x In objFSO.GetFolder(SourceServer).Files

   If Not objFSO.FileExists(FinalLoc & "\" & objFSO.GetFileName(x)) Then

 objFSO.GetFile(x).Copy (FinalLoc & "\" & objFSO.GetFileName(x)), True

Wscript.Echo "Files Copied"

Else

Wscript.Echo "Files Exist"

End If

Next

   set WshShell = WScript.CreateObject("WScript.Shell")
      strDesktop = WshShell.SpecialFolders("Desktop")

   Set objShell = WScript.CreateObject("WScript.Shell")
   Set lnk = objShell.CreateShortcut(strDesktop & "\Pavs Shortcuts.lnk")

   lnk.TargetPath = "H:\Pavles Program\NewMenu.hta"
   lnk.Arguments = ""
   lnk.Description = "Created Shortcut with VBScript By Pavle"
   lnk.HotKey = "CTRL+SHIFT+F"
   lnk.WindowStyle = "1"
   lnk.WorkingDirectory = "H:\Pavles Program\"
   lnk.IconLocation = Windir & "\System32\shell32.dll,43"
   lnk.Save

   Set lnk = objShell.CreateShortcut(strDesktop & "\READ ME.lnk")

   lnk.TargetPath = "H:\Pavles Program\Read Me.txt"
   lnk.Arguments = ""
   lnk.Description = "Created Shortcut with VBScript By Pavle"
   lnk.WindowStyle = "1"
   lnk.WorkingDirectory = "H:\Pavles Program\"
   lnk.IconLocation = Windir & "\System32\shell32.dll,40"
   lnk.Save

' -------------------------------------------------------------

' -------------------------------------------------------------

MsgBox ("Installed Updates"), vbSystemModal

' ------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:58:57.957

我不确定是否理解您的问题，但如果您不想在 FinalLoc 中覆盖 sample.ini，我认为您应该添加如下内容：

```
If objFSO.GetFileName(x) <> "sample.ini" Then
    objFSO.GetFile(x).Copy (FinalLoc & "\" & objFSO.GetFileName(x)), True 
```

# java - 编辑和搜索字符串数组

> ID：13077767
> 
> 赞同：-1
> 
> 时间：2012-10-25T21:42:15.803
> 
> 标签：java, arrays, string, search, edit

对格式化灾难感到抱歉，我是 stackoverflow 和 Java 的新手。我在应该包含两个名称列表和相应目录#s 的代码中有两个问题。在代码中，我应该能够搜索、显示、编辑和退出。显示和退出已经工作，但我在搜索和编辑时遇到问题。我已经强调了问题所在的信息。我将不胜感激任何帮助。

```
public static void Search(String[] arr, String find) {

    for (int i = 0; i < 10; i++) { 
```

//首要问题！！这是我稍后调用的在字符串数组中搜索代码位的方法。我需要能够在数组中搜索某些字符（数组是名称，所以“mith”会调出“smith”。稍后在代码中我在开关内部调用它。我想我需要类似“ arr[i].equals(find)" 但我不知道语法

```
 }
}

public static void main(String[] args) {

    Scanner inp = new Scanner(System.in);
    String userInput1 = "";
    String userInput2 = "";
    String userInput3 = "";

    // Ask User to chose between faculty and students
    System.out.println("Are you searching for Students or Faculty? ");
    userInput1 = inp.nextLine().toLowerCase();

    if (userInput1.startsWith("f")) {

        //Block 1 for faculty
        do {

            String[] Faculty = {"0\. Jack Kerouac", "1\. Les Claypool", "2\. Tom Waits", "3\. Kurt Vonnegut",
                "4\. Hunter Thompson", "5\. Princess Bubblegum", "6\. John Smith", "7\. Jack Thompson", "8\. Jeff Dahmer", "9\. Martin King"};

            System.out.println("What would you like to do?");
            System.out.println("S: Search");
            System.out.println("E: Edit");
            System.out.println("D: Display");
            System.out.println("Q: Quit");

            // user input
            userInput2 = inp.nextLine().toLowerCase();
            System.out.println("");

            // Respond based on user input
            switch (userInput2.charAt(0)) {
                case 's':
                    System.out.println("Type part of the persons name: ");
                    String x = inp.nextLine().toLowerCase();
                    String[] y = Faculty;
                    Search(y, x);
                break;
                case 'e': 
```

//这是我的编辑数组问题。我尝试了几种不同的方法来使其工作，但是在重新分配 Faculty[q] 时，每一种方法都遇到了问题。当您运行程序时，它会从“输入新目录信息”跳回主循环。如何更改数组中的字符串？

```
 System.out.println("Enter the catalog number of the entry trying to edit: ");
                    int q = inp.nextInt();
                    System.out.println(Faculty[q]);
                    System.out.println("Enter new catalog information: ");                       
                    String NewFac = inp.nextLine();
                    Faculty[q] = String NewFac;
                    System.out.println(Faculty[q]);

                    break;
                case 'd':
                    System.out.println("Enter a catalog number between 0-9: ");
                    int o = inp.nextInt();
                    System.out.println(Faculty[o]);
                    break;

            }

            // Blank line, for formatting
            System.out.println("");

        } while (!userInput2.equals("q"));
        System.out.println("Done.");

    } else {
        //block 2 for students
        do {

            String[] Student = {"0\. Alice Johnson", "1\. Johnny Marr", "2\. Johnny Johnson", "3\. Robert Smith",
                "4\. Ian Curtis", "5\. Luke Shapiro", "6\. David Newman", "7\. Ren Newman", "8\. Camille Kaslan", "9\. Alexander Shulgin"};

            System.out.println("What would you like to do?");
            System.out.println("S: Search");
            System.out.println("E: Edit");
            System.out.println("D: Display");
            System.out.println("Q: Quit");

            // user input
            userInput3 = inp.nextLine().toLowerCase();
            System.out.println("");

            // Respond based on user input
            switch (userInput3.charAt(0)) {
                case 's':
                    System.out.println("Type part of the persons name: ");
                    String x = inp.nextLine().toLowerCase();
                    String[] y = Student;
                    Search(y, x);
                break;
                case 'e':
                    System.out.println("Enter the catalog number of the entry trying to edit: ");
                    int r = inp.nextInt();
                    System.out.println(Student[r]);
                    System.out.println("Enter new catalog information: ");
                    Student[r] = inp.nextLine();
                    System.out.println(Student[r]);
                    break;
                case 'd':
                    System.out.println("Enter a catalog number between 0-9: ");
                    int n = inp.nextInt();
                    System.out.println(Student[n]);
                    break;

            }

            // Blank line, for formatting
            System.out.println("");

        } while (!userInput3.equals("q"));
        System.out.println("Done.");

    } 
```

如果不清楚，第一个问题是在我的搜索方法中的 for 循环中放入什么，称为“搜索”。第二个问题是如何从用户那里获取新信息并将其替换为名称数组（编辑功能）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:47:03.490

如果我很好理解你需要的是：

```
"string1".equalsIgnoreCase("string2"); 
```

这将比较 2 个字符串，忽略它们是大写还是小写。现在您要做的是循环数组并将每个索引与您要比较的字符串进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:54:59.000

第一个问题，也许是这样的？

```
public static void Search(String[] arr, String find) {
    for (int i = 0; i < 10; i++) {
        if (arr[i].toLowerCase().contains(find.toLowerCase())) {
             System.out.println(String.format("found name: %s", arr[i]));
             return;
        }
    }
    System.out.println("Name not found!");
} 
```

第二个问题是 SO 上一直出现的一个常见问题，您需要在 nextInt 之后使用 nextLine 来吃换行符：

```
System.out.println("Enter the catalog number of the entry trying to edit: ");
int q = inp.nextInt();
inp.nextLine();
System.out.println(Faculty[q]); 
```

# php - 通过 php 中的 fb 应用程序更新 Facebook 页面状态

> ID：13077773
> 
> 赞同：1
> 
> 时间：2012-10-25T21:42:50.610
> 
> 标签：php, facebook

我一直在尝试通过在我的网络服务器上运行的 PHP 脚本将状态发布到我的 Facebook 页面。我已成功通过应用程序发布它，即创建一个应用程序并使用其应用程序 ID 和密码。

**这是它的代码片段：**

```
$pgid="############";
$token="###############################";
$this->tasks = new Facebookclass(array(
  'appId'  => '##########',
  'secret' => '##########',
  'cookie' => true,
));
$post = array('access_token' => $token, 'message' => $message);
try{
  $res = $this->tasks->api('/'.$pgid.'/feed','POST',$post);
} catch (Exception $e){
  echo $e->getMessage();
  die();
} 
```

它工作正常并更新了我的 facebook 页面的状态，但是该更改/更新仅对管理员（即：我）可见，而对查看该页面的其他任何人都不可见。

如果我通过 FB 日志记录正常更新状态，那么它对所有人可见，但不是通过此应用上传的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T12:47:48.513

它仅对管理员可见的原因是启用了沙盒设置。禁用沙箱应该使帖子可见。

# google-analytics - 使用 Google Analytics 进行文档跟踪

> ID：13077782
> 
> 赞同：0
> 
> 时间：2012-10-25T21:43:21.573
> 
> 标签：google-analytics, web-analytics

> **可能重复：**
> [谷歌分析跟踪 pdf 下载](https://stackoverflow.com/questions/8829655/google-analytics-track-pdf-downloads)

我可以使用谷歌分析跟踪文档吗？

我尝试将代码添加到链接到文档的网页（如下），但这没有给我任何东西......我只相信我可以跟踪的只是一个带有谷歌代码的 HTML 页面

我尝试的代码

```
http://www.whatever.com/TestDoc.doc?utm_source=blank&utm_medium=email&utm_campaign=demo 
```

到目前为止，如果 second=clicked 页面也有 Google 脚本，我只能看到人们在我的网站上打卡的时间。但如果只是PDF或DOC，我看不到有多少点击！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:22:39.990

Google Analytics 在浏览器中运行。因此，无法像您希望的那样跟踪直接指向 .doc 的链接。如果您想跟踪页面上点击的链接的下载量，Google Analytics on Steroids 提供了一个简单的 _gasTrackDownloads 挂钩，用于根据上面@AllInOne 的评论进行“事件跟踪”。

代码示例：

```
<script type="text/javascript">
var _gas = _gas || []; // _gas instead of _gaq
_gas.push(['_setAccount', 'UA-YYYYYY-Y']); // REPLACE WITH YOUR GA NUMBER
_gas.push(['_setDomainName', '.mydomain.com']); // REPLACE WITH YOUR DOMAIN
_gas.push(['_trackPageview']);
_gas.push(['_gasTrackForms']);
_gas.push(['_gasTrackOutboundLinks']);
_gas.push(['_gasTrackMaxScroll']);
_gas.push(['_gasTrackDownloads']); // track downloads
_gas.push(['_gasTrackYoutube', {force: true}]);
_gas.push(['_gasTrackVimeo', {force: true}]);
_gas.push(['_gasTrackMailto']);

(function() {
var ga = document.createElement('script');
ga.type = 'text/javascript';
ga.async = true;
ga.src = '//cdnjs.cloudflare.com/ajax/libs/gas/1.10.1/gas.min.js'; // new url
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(ga, s);
})();
</script> 
```

链接：[类固醇的谷歌分析](https://github.com/CardinalPath/gas)

# java - 使用休眠/数据字典的DB（oracle）列描述

> ID：13077784
> 
> 赞同：2
> 
> 时间：2012-10-25T21:43:39.747
> 
> 标签：java, oracle, hibernate, database-schema, hbm2ddl

我们使用 Hibernate 来创建 DB 模式并作为 ORM。我们喜欢在 Postgres、Oracle 和 HSQLDB 之间交换持久层。

由于 Oracle 也有一个 DB 团队，所以很多时候都会出现诸如“此列是什么意思？”之类的问题。答案在 Java 类中作为 JavaDoc。所以我正在寻找的是通过使用类属性中的文本向列添加描述的可能性（最好是java doc）。然而，谷歌没有发现任何有用的东西，除了这个：

[https://hibernate.onjira.com/browse/HHH-4369](https://hibernate.onjira.com/browse/HHH-4369)

我怀疑这个请求是否会得到执行。

一个想法可能是编写我自己的注释 @ColumnDesc("my description") 并编写一个库，该库扫描此注释的类并为列描述生成额外的 DDL（更改表）脚本并执行此脚本。这似乎有点复杂，因为我需要获取表名和列名。

所以我的问题是：

使用 Hibernate Tools (hbm2ddl) 创建数据库时，是否有解决方法或其他简单方法可以在数据库 (oracle) 中创建列描述？

替代方案：是否有一种简单的方法可以为 hibernate 生成的表和列生成数据字典？（请不要说JavaDoc，DBA看不懂JavaDocs）

我们使用注解 hibernate 定义（无 XML）。

感谢您的任何提示！

问候，

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:15:51.080

自定义注释听起来对我来说是正确的方法。

然后，您可以扫描自定义注释和 Hibernate/JPA 注释，并输出更改表以创建列描述的 DDL。

您可能必须对 hibernate 如何形成表名和列名进行逆向工程，或者可能要弄清楚如何重用 hibernate 中的相关类来生成它们。

# kendo-ui - 如何使用 Kendo UI 动态插入元素

> ID：13077785
> 
> 赞同：1
> 
> 时间：2012-10-25T21:43:40.880
> 
> 标签：kendo-ui

我正在尝试[使用移动剑道 ui 创建一个动态列表视图](http://docs.kendoui.com/api/mobile/listview)。我知道当我将东西附加到 DOM 时，我必须初始化元素，如果我要使用 jQuery，我会做类似的事情

```
$('#list').append(newElementStr);
$('#list').trigger('create'); 
```

这是我在这里尝试做的一个例子：http: [//jsfiddle.net/Ab3Yu/](http://jsfiddle.net/Ab3Yu/)

您可以看到动态插入的元素看起来与其他列表项不同，我该如何初始化它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T11:51:17.800

您始终可以在列表的 DataSource 上添加数据。这是我将所有项目从一个列表转移到另一个列表的方法

```
function moveAllLeft() {
    var listView2 = $("#listView2").data("kendoListView");
    listView2.element.children().each(function() {
        listView2.remove($(this));
        var that = $(this);
        dataSource.add({
            ProductName : that[0].innerText
        });
    });
}

function moveAllRight() {
    var listView = $("#listView").data("kendoListView");
    listView.element.children().each(function() {
        listView.remove($(this));
        var that = $(this);
        dataSource2.add({
            ProductName : that[0].innerText
        });
    });
} 
```

其中 dataSource 是第一个列表的数据源，dataSource2 是第二个列表的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:37:14.967

该课程缺少[http://jsfiddle.net/Ab3Yu/2/](http://jsfiddle.net/Ab3Yu/2/)

```
$('#list').append('<li><a href="#" class="km-listview-link" data-role="listview-link">' + 'Dynamic Item' + '</a></li>');
$('#list').append('<li><a href="#">' + 'Dynamic Item' + '</a></li>');​ 
```

## 关于向 ListView 添加项目的演示

关于[我如何使用 kendo-ui-web](http://docs.kendoui.com/howto/howto-use-the-listview-of-kendo-ui-web) 的 listtview 链接到[将 twitter 数据加载到 web-listview 的演示](http://jsfiddle.net/jbristowe/3w7ru/light/)。由于移动列表视图也有一个[数据源属性](http://docs.kendoui.com/api/mobile/listview)，这也适用于移动列表视图

# android - 致命信号 7 (SIGBUS) 在 0x00000000 (code=2)

> ID：13077791
> 
> 赞同：12
> 
> 时间：2012-10-25T21:43:59.683
> 
> 标签：android, osgi, runtime-error, apache-felix, libc

在 Android 上使用 OSGi 平台时，我收到了以下错误消息：

![致命信号 7 (SIGBUS) 在 0x595302e0 (code=2)](../Images/f91dc5f98df61098861ece6616460be9.png)

致命信号 7 (SIGBUS) 在 0x595302e0 (code=2)

我不认为我的应用程序需要那么多内存空间或需要大量计算能力。它只是具有 20 个捆绑包的 OSGi 平台。

之后我的应用程序总是重新启动。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T17:36:17.933

我有同样的问题。它是由可绘制文件夹中的 png 文件引起的。刚才去看了，最大的图是什么，找到了，删了，换成更小的，问题就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T19:04:23.527

甚至我也发现了一个类似的问题，并且恰好是（代码= 128）与错误有关。似乎是数据对齐错误。为了解决这个问题，我尝试了这样的代码：

```
 *Data = (*Data)(Temp+i) becomes     
    Temp1 = *(Temp+i);     
    *Data = Temp1; 
```

在函数调用之前和进入函数调用并使用上述相同的方法传回数据。碰巧NDK编译器的工作方式有所不同。NDK 用于混合 c 和 c++ 的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:33:38.137

这是[数据对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)的问题，如[错误代码](http://publib.boulder.ibm.com/infocenter/realtime/v1r0/index.jsp?topic=%2Fcom.ibm.rt.doc.10%2Fuser%2Fsighand.html)所示。您的代码的某些部分或您正在使用的库中的代码可能无法将数据结构放在正确的位置 - 但是，这可能是由很多事情引起的，例如应该返回某些内容但没有返回的函数不。

# php - CodeIgniter tankauth 不适用于 GMail

> ID：13077795
> 
> 赞同：2
> 
> 时间：2012-10-25T21:44:22.463
> 
> 标签：php, codeigniter, smtp, tankauth

我在本地开发环境中设置了 WAMP 服务器（启用了 php_openssl 扩展）。我安装了 Code Igniter 并尝试配置 TankAuth，我想在其中使用 GMail（实际上是 Google Apps）发送测试邮件。

我通过以下 URL 进行配置

*   [http://ellislab.com/codeigniter/forums/viewthread/84689/P15（CI2](http://codeigniter.com/forums/viewthread/84689/P15)评论 30）
*   [使用 CodeIgniter 向 gmail 发送电子邮件显示“已发送消息”但收件箱中没有任何内容？](https://stackoverflow.com/questions/3422564/sending-email-to-gmail-with-codeigniter-displays-message-sent-but-there-nothin)
*   [如何配置 WAMP (localhost) 以使用 Gmail 发送电子邮件？](https://stackoverflow.com/questions/600725/how-to-configure-wamp-localhost-to-send-email-using-gmail)

根据上面的输入，我更新`_send_email`了 tank auth 的功能如下

```
function _send_email($type, $email, &$data)
{
    $this->load->library('email');

    $config['protocol'] = "smtp";
    $config['smtp_host'] = "ssl://smtp.googlemail.com";
    $config['smtp_port'] = "465";
    $config['smtp_user'] = "mymail@youthpark.org";//also valid for Google Apps Accounts
    $config['smtp_pass'] = "mypass";
    $config['charset'] = "utf-8";
    $config['mailtype'] = "html";
    $config['newline'] = "\r\n";

    $this->email->initialize($config); 

    $this->email->from($this->config->item('webmaster_email', 'tank_auth'), $this->config->item('website_name', 'tank_auth'));
    $this->email->reply_to($this->config->item('webmaster_email', 'tank_auth'), $this->config->item('website_name', 'tank_auth'));
    $this->email->to($email);
    $this->email->subject(sprintf($this->lang->line('auth_subject_'.$type), $this->config->item('website_name', 'tank_auth')));
    $this->email->message($this->load->view('email/'.$type.'-html', $data, TRUE));
    $this->email->set_alt_message($this->load->view('email/'.$type.'-txt', $data, TRUE));
    //$this->email->send();

    if ( ! $this->email->send())
    {
        show_error($this->email->print_debugger());
    } else {
        //echo('DONE');        
    } 
} 
```

我收到消息`mail sent..`，但实际上邮件没有发送。有人可以指出我在哪里做错了吗？

**在 Gmail 设置中也启用了弹出窗口**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:40:06.670

不要在 Tank Auth 中编辑 _send_email 功能。而是添加

```
$config['protocol'] = "smtp";
$config['smtp_host'] = "ssl://smtp.googlemail.com";
$config['smtp_port'] = "465";
$config['smtp_user'] = "mymail@youthpark.org";//also valid for Google Apps Accounts
$config['smtp_pass'] = "mypass"; 
```

到“config”文件夹中的文件“email.php”。

这对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T01:03:56.213

我有同样的问题。以下`_send_email`功能以及删除`/application/config/email.php`对我有用：

```
function _send_email($type, $email, &$data)
{       
    $config['protocol'] = 'smtp'; 
    $config['smtp_host'] = 'ssl://smtp.googlemail.com'; 
    $config['smtp_port'] = 465; 
    $config['smtp_user'] = 'my.email.address@gmail.com'; 
    $config['smtp_pass'] = 'NiceTry'; 
    $config['mailtype'] = 'html';

    $this->load->library('email', $config); 

    $this->email->set_newline("\r\n"); 

    $this->email->from($this->config->item('webmaster_email', 'tank_auth'), $this->config->item('website_name', 'tank_auth'));
    $this->email->reply_to($this->config->item('webmaster_email', 'tank_auth'), $this->config->item('website_name', 'tank_auth'));
    $this->email->to($email);
    $this->email->subject(sprintf($this->lang->line('auth_subject_'.$type), $this->config->item('website_name', 'tank_auth')));
    $this->email->message($this->load->view('email/'.$type.'-html', $data, TRUE));
    $this->email->set_alt_message($this->load->view('email/'.$type.'-txt', $data, TRUE));

    if ($this->email->send()) { 
        echo "Sent!"; 
    } else { 
        echo "FAILED"; 
    } 

} 
```

[Tank Auth 电子邮件问题](http://ellislab.com/forums/viewthread/180170/#852896)让我走上了正确的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:56:33.350

您是否检查日志以查看是否记录了错误？

我使用邮戳来处理所有邮件传递，他们有一些免费发送，并且 CI 也有火花。

我在我的设置开始中使用新项目。核实：

[https://github.com/ramirors/DD-Auth](https://github.com/ramirors/DD-Auth)

# sql - Determine which join added row to result set

> ID：13077797
> 
> 赞同：0
> 
> 时间：2012-10-25T21:44:28.920
> 
> 标签：sql, join

I started out with a question in this thread: [Need SQL guru for a complex query](https://stackoverflow.com/questions/12737572/need-sql-guru-for-a-complex-query)

I now have that solved (thanks to SO), but now need to extract a bit more data.

Let's say I have a query that joins 2 other tables, where criteria in each of the three tables can cause a row to be added to the result set. Something like:

```
 SELECT a.*
    FROM tableA a
    LEFT JOIN tableB b on a.b_id = b.id
    LEFT JOIN tableC c on a.c_id = c.id
    WHERE a.creator_id = 5 OR b.is_active = 1 OR c.can_attend = 1 
```

Whatever the data is... basically what I need to do is determine, for each row in the result set, which criteria allowed it in. Was it because creator_id was 5, or because it was active, etc.

From this overly simplified example, you could say just look at the data, but notice the data for tables b and c are not being returned, and note that there are a variety of ways in which the join may add the row to the result set.

What I am looking for, I think, is a way to inject a value when a row is added to the result set, or something to that effect. Will make more sense if you look at the accepted answer in the linked question above.

Thanks for any input!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:46:58.710

You can do this using a case statement:

```
SELECT a.*,
       (case when b.id is not null and c.id is not null then 'BOTH'
             when b.id is not null and c.id is null then 'B'
             when b.id is null and c.id is not null then 'C'
             else 'A'
        end) as WhereFrom
FROM tableA a
LEFT JOIN tableB b on a.b_id = b.id
LEFT JOIN tableC c on a.c_id = c.id
WHERE a.creator_id = 5 OR b.is_active = 1 OR c.can_attend = 1 
```

# c++ - 具有纯虚函数析构函数的多态 C++

> ID：13077803
> 
> 赞同：1
> 
> 时间：2012-10-25T21:44:57.843
> 
> 标签：c++, qt

我不确定以下代码是否可以避免内存泄漏。

```
#ifndef RENDERABLE_H
#define RENDERABLE_H

class QGLShaderProgram;
class GLWidget;
class BoundingBox;

class Renderable{

public:
    virtual void update(float duration) = 0;
    virtual void render(QGLShaderProgram& shader, float duration) = 0;
    virtual BoundingBox* getBBox() const = 0;
    virtual void translate(float xx, float yy, float zz) = 0;
    virtual void rotate(float degrees_x, float degrees_y, float degrees_z) = 0;
    virtual void scale(float xx, float yy, float zz) = 0;
};

#endif // RENDERABLE_H 
```

上面的“接口”是由object3d.cpp实现的。然后，如果它们属于同一个场景，我们可以将许多 Object3D 对象添加到一个场景对象中。但是，在场景结束时，我想确保没有内存泄漏，所以我会在所有内容上调用 delete。但是，在场景对象中，我有以下变量：

```
QVector<Renderable*>* sceneObjects;
QVector<GLTexture2D*>* sceneTextures;
QMap<QString, Material*>* sceneMaterials; 
```

如你看到的，

```
delete sceneObjects;
delete sceneTextures;
delete sceneMaterials; 
```

应该删除 QVector 并且根据 Qt，它应该调用其中那些对象的析构函数。然而，Qt 文档并不清楚对象指针。Qt 会使用适当的析构函数删除对象指针吗？此外，Renderable 指针会发生什么？从“接口”可以看出它没有析构函数。

感谢您的任何意见。ChaoSX恶魔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:48:29.130

首先，您的`Renderable`类必须有一个虚拟析构函数，因为调用`delete`指向派生对象的基指针是未定义的行为。

其次，不，您需要在每个容器中循环并调用`delete`每个指针（或者，[正如 Nikos 指出](https://stackoverflow.com/a/13077915/726361)的那样，[`qDeleteAll`](http://doc.qt.digia.com/qt/qtalgorithms.html#qDeleteAll-2)只要容器中的*每个*对象都分配有普通的`new`（而不是`new[]`或`malloc`其他任何东西）），以确保它们的内存被回收（Qt 怎么知道指针是否指向由 分配的东西`new`？它们可以指向由 分配的`new[]`东西、堆上的东西、堆栈或其他地方）。

如果您不想这样做，您可以将`unique_ptr`s 存储在容器中，然后在容器`unique_ptr`中调用 s的析构函数`delete`，这些析构函数将释放它们拥有的内存。无需手动释放它们或使用`qDeleteAll`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:55:45.797

您需要手动删除每个指针。不过，您不需要手动迭代每一个。你可以很容易地做到这一点：

```
qDeleteAll(*sceneObjects);
delete sceneObjects; 
```

其他容器也是如此。`qDeleteAll`记录在这里：[http ://doc.qt.digia.com/qt/qtalgorithms.html#qDeleteAll-2](http://doc.qt.digia.com/qt/qtalgorithms.html#qDeleteAll-2)

正如 Seth Carnegie 所提到的，还要添加一个虚拟 dtor。

# java - Android动画错误，滑出并消失

> ID：13077804
> 
> 赞同：0
> 
> 时间：2012-10-25T21:44:59.547
> 
> 标签：java, android

我的动画只是滑出然后消失了？有人可以帮我解决我的问题吗？

在顶部我声明了这一点

```
private RelativeLayout buttonContainer;
   buttonContainer = (RelativeLayout) sidebar.getParent(); 
```

这是我的功能部分代码：

```
 private RelativeLayout.LayoutParams params;

   public void startTapped(View view) {
       sideBar(44, 0);
   }

   public void sideBar(final int translateX, final int translateY)
   {
       TranslateAnimation translate = new TranslateAnimation(0, translateX, 0, translateY);
       translate.setDuration(1500);
       translate.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            buttonContainer.removeView(sidebar);
            sidebar = new ImageView(Game.this);
            sidebar.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                }
            });
            if(out == 0)
            {
            params.leftMargin = translateX + params.leftMargin;
            params.topMargin = translateY + params.topMargin;
            params.rightMargin = 0 + params.rightMargin;
            params.bottomMargin = 0 + params.bottomMargin;
            sidebar.setLayoutParams(params);
            buttonContainer.addView(sidebar);
            out=1;
            }
            else if(out == 1)
            {
                params.leftMargin = translateX - params.leftMargin;
                params.topMargin = translateY - params.topMargin;
                params.rightMargin = 0 - params.rightMargin;
                params.bottomMargin = 0 - params.bottomMargin;
                sidebar.setLayoutParams(params);
                buttonContainer.addView(sidebar);
                out=0;
            }
        }

@Override
public void onClick(View v) {

    switch(v.getId())
    {

        case R.id.sidebar:
            startTapped(sidebar);
        break;
    }       
} 
```

它像它应该的那样滑出并消失了，但是！我仍然可以点击它，但它只是看不见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:46:57.750

你的大量代码在这里丢失了。你并没有很好地描述你的目标。但看起来你已经把事情复杂化了。尝试这个：

```
public void startTapped(View view) {
    if (view.getVisibility() == View.GONE) {
        view.startAnimation(sideBar(context.getResources()
               .getDimensionPixelOffset(R.dimen.side_bar_width)*-1, 0));
        view.setVisibility(View.VISIBLE);
    } else {
        view.setVisibility(View.GONE);
        view.startAnimation(sideBar(0, context.getResources()
               .getDimensionPixelOffset(R.dimen.side_bar_width)*-1));
    }
}

public Animation sideBar(int start, int finish) {
    TranslateAnimation translate = new TranslateAnimation(start, finish, 0, 0);
    translate.setDuration(1500);
    return translate;
} 
```

将`dimens.xml`文件添加到您的`values`文件夹是`res`：

```
<resources>
    <dimen name="side_bar_width">44dp</dimen>
</resources> 
```

您还需要将侧边栏视图设置为，`android:visibility="gone"`以便在应用程序启动时不打开菜单。

# php - PHP 创建一个新的 在while循环中的每五个元素之后

> ID：13077808
> 
> 赞同：1
> 
> 时间：2012-10-25T21:45:26.080
> 
> 标签：php, mysqli, while-loop

您好我正在尝试将 MySQL 查询结果作为列表输出，以便在每第五行之后我想创建一个新列表。我按照之前对我的一个类似问题提出的相同方式进行了操作，它将第五行之后的结果分开，但在每个新列表中，第一个元素与前一个列表中的最后一个元素相同。

我使用了这段代码：

```
/*there is a mysqli query before this*/
$i = 0;
$count = $res->num_rows;
echo '<ul>';
while($obj = $res->fetch_object()){
    $i++;
    $exturl = $obj->link;
    $extname = utf8_encode($obj->title);
    echo '<li><a class="URL" title="'.$extname.'" href="'.$exturl.'" target="_blank">'.$extname.'</a></li>';
    if($i % 5 == 0 && $i < $count){
        echo '</ul><ul><li><a class="URL" title="'.$extname.'" href="'.$exturl.'" target="_blank">'.$extname.'</a></li>';
    }
}
echo '</ul>'; 
```

问题是，我怎样才能避免重复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:47:29.387

在条件句中附加最后一个 li 有什么意义？

```
while($obj = $res->fetch_object()){
    $i++;
    $exturl = $obj->link;
    $extname = utf8_encode($obj->title);
    echo '<li><a class="URL" title="'.$extname.'" href="'.$exturl.'" target="_blank">'.$extname.'</a></li>';
    if($i % 5 == 0 && $i > 0 && $i < $count){
        echo '</ul><ul>';
    }
} 
```

由于您已经在 if $i % 5 语句上方回应了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:49:34.473

解决方案（取决于返回的行数）可能是[`array_chunk`](http://php.net/manual/en/function.array-chunk.php)在呈现列表之前对您的结果进行处理，从而产生一种简单的分页形式。

```
$results = array();

while ($obj = $res->fetch_object()) {
  $results[]= $obj;
}

// Break results into sub-lists of 5 items
$lists = array_chunk($results, 5);

foreach ($lists as $list) {
  echo "<ul>"
  foreach ($list as $obj) {
    $exturl = $obj->link;
    $extname = utf8_encode($obj->title);
    echo '<li><a class="URL" title="',$extname,'" href="', $exturl, '"  target="_blank">', $extname, '</a></li>';
  }
  echo "</ul>"
} 
```

这需要您将整个结果集加载到内存中，但它比尝试在单个循环中有条件地关闭和重新打开列表要清晰得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T13:18:52.343

```
$args=array('orderby' => 'title','order' => 'ASC','posts_per_page'=>-1 ,'post_type'=>'Product');
$loop = new WP_Query($args);'
$counter = 1;
$reccounter=1;
$total_items = count($loop);
$ColCounter=($loop->post_count)/3;
if(!empty($loop)){ 
print '<ul style="float:left;list-style:none;" class="productList">';
while ( $loop->have_posts() ) : $loop->the_post(); 
$reccounter++;
$this_char=strtoupper(substr($loop->post->post_title,0,1));                         
if ($this_char != $last_char) { $last_char = $this_char;
$counter++;
echo '<h2 class="productTitle">'.$last_char.'</h2>';
} 
if( $ColCounter<=$reccounter){echo "</ul><ul style='float:left;list-style:none;' class='productList'>";
$reccounter=1;
}   
echo"<li class='productListpad'><a href=".get_permalink($loop->post->ID).   "title=".esc_attr($loop->post->post_title ? $loop->post->post_title :        $loop->post->ID).">".esc_attr($loop->post->post_title ? $loop->post->post_title : $loop->post->ID)."</a></li>";
endwhile; echo"</ul>";
}wp_reset_query(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T21:54:44.453

解决方案是在循环中移动 if 语句：

改成这样：

```
while($obj = $res->fetch_object()){
$i++;
$exturl = $obj->link;
$extname = utf8_encode($obj->title);
    if($i % 5 == 0 && $i < $count){
        echo '</ul><ul><li><a class="URL" title="'.$extname.'" href="'.$exturl.'" target="_blank">'.$extname.'</a></li>';
} else { 
echo '<li><a class="URL" title="'.$extname.'" href="'.$exturl.'" target="_blank">'.$extname.'</a></li>'; 
}
} 
```

# asp.net-mvc - Oracle 序列、实体框架和在 MVC3 视图中获取 nextval

> ID：13077810
> 
> 赞同：1
> 
> 时间：2012-10-25T21:45:39.367
> 
> 标签：asp.net-mvc, oracle, entity-framework

我目前在 MVC3 应用程序中使用实体框架来连接到 Oracle 数据库。我想将一条新记录写入 Oracle 数据库中的一个表，其中包含一个定义它的主键的序列。当然，主键被定义为不为空。我所有的观点都是用 ASP.Net 而不是 Razor 编写的。

我看到那里的大多数帖子都建议直接在 edmx 模型上设置 StoreGeneratedPattern。但是，我注意到大多数 edmx 模型示例都像这样：[VS 实体框架中的 Oracle 实体不更新代码中的主键](https://stackoverflow.com/questions/7351260/oracle-entity-in-vs-entity-framework-doesnt-update-the-primary-key-in-code) 包括使用 EntityTypes 定义的表 - 我要执行此操作的相关表实际上包含在 EntitySet 中：

```
<EntitySet Name="REGISTERED_PERSON" EntityType="Model.Store.REGISTERED_PERSON" store:Type="Tables" Schema="MYSCHEMA" /> 
```

当我尝试在此设置 StoreGeneratedPattern=Identity 时，我收到一个错误，即不允许使用 StoreGeneratedPattern 属性，可能是因为它不是 EntityType。我原本想着只是获得最大值。register_person_id 通过 LINQ 语句从数据库中获取，然后将其分配到模型中，但随之而来的问题是，如果同时执行两个插入操作，您将获得重复的 ID。

我还检查了数据库，没有编写任何触发器。我知道在 Oracle 中，您可以选择从 dual 中选择以获取序列生成的下一个值，如下图所示：
select MY_SEQ.nextval,'some value' from dual

这篇文章在这里：[关于序列的 postgresql nextval question](https://stackoverflow.com/questions/2189114/postgresql-nextval-question-on-sequences)有一个很好的标题，但问题是我没有使用 postgresql 或 PHP，所以很遗憾它对我没有帮助。我也没有编写任何触发器来在插入记录时触发序列。

如何从序列中获取下一个值并将其分配给我的 Registered_Person_Id，最好是在整个模型对象被传递回控制器以插入数据库之前的视图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T02:52:43.143

我发现您确实需要触发器和序列才能在 Oracle 中完成这项工作。这是我在生产中使用的触发模式：

```
CREATE OR REPLACE TRIGGER MYSCHEMA.TRIGGER_NAME 
BEFORE INSERT ON MYSCHEMA.REGISTERED_PERSON
FOR EACH ROW
WHEN ( NEW.REGISTERED_PERSON_ID IS NULL )
BEGIN
  SELECT MY_SEQUENCE.NEXTVAL INTO :NEW.REGISTERED_PERSON_ID FROM dual;
END; 
```

# android - 隐藏 ViewFlipper 视图

> ID：13077816
> 
> 赞同：0
> 
> 时间：2012-10-25T21:46:35.223
> 
> 标签：android, views, scrollview

我有一个 ViewFlipper，里面有几个 ScrollView。在第一个 ScrollView 我有一个单选按钮组。

在启动时未选中单选按钮时，我想隐藏所有 ScrollViews 并禁止滑动。当单选按钮 1 被选中时，我希望只有某些 ScrollViews 可见并且向左或向右滑动应该只显示那些。对于单选按钮 2，它是其他 ScrollViews 等。

这可能吗？

我尝试将滚动视图的可见性设置为 View.GONE，但这并不能阻止向它们滑动。

如果这是可能的，我会很棒。

- 编辑 -

我设法找到

```
viewFlipper.removeViewAt(1); 
```

但现在我被困在不重新启动活动的情况下恢复视图的问题上。有没有办法强制活动重新加载它的布局？或者我不应该使用 RemoveViewAt(..) 而是另一种方式来禁用视图。

rg，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:13:19.103

解决了...

而不是使用

```
viewFlipper.next(); 
```

我先检查一下 whick 单选按钮是否被选中，然后使用

```
viewFlipper.setDisplayedChild( viewnumber ); 
```

使其成为该单选按钮允许的视图。

# javascript - $.each + json + 点击事件 + 对象输出

> ID：13077819
> 
> 赞同：1
> 
> 时间：2012-10-25T21:46:49.653
> 
> 标签：javascript, jquery, json, each

我真的希望这没有一个简单的解释，因为这将意味着很多很多时间的损失（尽管这不会改变他们已经丢失的事实。）一些帮助或朝着正确的方向踢会成为最后期限的节省者。请。

我正在努力实现以下目标；

1.）创建一个由 JSON 文件填充的链接列表（有效）
2.）在每个 li 或 a 上绑定一个单击事件，将类别对象传递给构建器函数（认为这有效）
3.）用户反对做一些很酷的事情

但是，一旦我达到我的构建器功能，就会发生一些奇怪的重复。

考虑我的名为 categories.json 的 JSON 文件：

```
[
{   
    "category": [
        {
            "id": "1",
            "title": "Title 1",
            "values": [
                {
                    "eg": [
                        {
                            "number": "12000000"
                        }
                    ]
                }
            ]
        }
    ]
},
{   
    "category": [
        {
            "id": "2",
            "title": "Title 2",
            "values": [
                {
                    "eg": [
                        {
                            "number": "37000000"
                        }
                    ]
                }
            ]
        }
    ]
},
{   
    "category": [
        {
            "id": "3",
            "title": "Title 3",
            "values": [
                {
                    "eg": [
                        {
                            "number": "37000000"
                        }
                    ]
                }
            ]
        }
    ]
}
] 
```

然后我肯定会出错，我的JS：

```
$(document).ready(function() {

//Get the necessary data from the JSON file
$.getJSON("categories.json", function(categories) {
    $.each(categories, function(c, category) {
        var link = new Nav(category.category);
    });
});

Nav = function(groups){
    $.each(groups, function(g, group) {
        //console.log(group);
        $('#categories').append('<li><a href="#">'+group.title+'</a></li>').data(group);
        $('#categories li a').on('click', function(){
            var builder = new Builder(group);
        });
        //$('#categories').append('<li><a href="#">'+this.title+'</a></li>');
        //$('#categories').append(
        //    $("<li/>", { id: links.id, text: links.title}).data('navver', links)
        //);

    });
};

Builder = function(builder){
    console.log(builder);
};

}); 
```

正如你所看到的，还有一些其他的“尝试”被注释掉了。所以当我点击第一个生成的链接时，我会在 console.log 中得到这个输出：

```
Object { id="1", title="Title 1", values=[1]}
Object { id="2", title="Title 2", values=[1]}
Object { id="3", title="Title 3", values=[1]} 
```

这是整个数组，而不仅仅是第一项。当我点击第二个链接时：

```
Object { id="2", title="Title 2", values=[1]}
Object { id="3", title="Title 3", values=[1]} 
```

当我点击第三个链接时：

```
Object { id="3", title="Title 3", values=[1]} 
```

我想要发生的是，当我单击相应的链接时，会返回正确的对象。

是否有任何聪明的家伙有一些时间可以帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:09:00.873

您应该替换绑定事件的以下行：

```
 $('#categories').append('<li><a href="#">'+group.title+'</a></li>').data(group);
    $('#categories li a').on('click', function(){
        var builder = new Builder(group);
    }); 
```

具有以下内容：

```
 var li = $('<li><a href="#">' + group.title + '</a></li>');
        $('#categories').append(li ).data(group);
        li.find('a').on('click', function() {
            var builder = new Builder(group);
        }); 
```

问题是您`$('#categories li a')`每次在添加其中一个元素后都使用选择器，因此第一个`<a>`添加的处理程序绑定了三次，第二次绑定了两次，第三次绑定了第三次。

[您可以在此处](http://jsfiddle.net/9T594/2/)找到使用此修改的代码的修改版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:08:31.703

啊……就是这样。这是因为您将事件多次绑定到所有 li 一遍又一遍。

[***看看这个小提琴***](http://jsfiddle.net/Qszr6/1/)

我唯一的改变就是这个。所以点击事件被绑定到新添加的 li 而不是全部。

```
 $('#categories li:last a').on('click', function(){
            var builder = new Builder(group);
        }); 
```

# javascript - 在集合中创建或增加项目？

> ID：13077821
> 
> 赞同：0
> 
> 时间：2012-10-25T21:46:52.117
> 
> 标签：javascript, underscore.js

我正在使用 Underscore.js。假设我有以下 JavaScript 数组：

```
var birds = [
  { name: 'pigeon', count: 2 },
  { name: 'swallow', count: 6 }
]; 
```

我想取一个任意的鸟名。如果它已经在数组中，我想将计数增加 1。如果不是，我想添加它，计数为 1。使用 Underscore 执行此操作的最佳方法是什么？

目前我正在做：

```
var mybird = 'swan';
var bird_present = _.find(birds, function(b) { return b.name === mybird) });
if (!bird_present) {
   birds.append({ name: mybird, count: 1});
} else { 
  _.each(birds, function(b){
    if (b.name === mybird) { 
       b.count += 1;
    }
  });
} 
```

但是 .find 和 .each 的使用感觉很混乱。有没有更紧凑的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T22:00:06.183

`_.find()`返回对数组中“鸟”对象的引用。通过该引用，您可以直接操作对象：

```
var mybird = 'swallow';

var bird = _.find(birds, function(b) { return b.name === mybird; });

if (!bird) {
    birds.push({ name: mybird, count: 1 });
} else {
    // updating our reference to the bird object in "birds" arr
    bird.count += 1;
} 
```

您的`_.find()`线路上也有语法错误。追加到数组的正确方法是`.push()`.

通过这些调整，我觉得您的代码已经简洁易读。​</p>

**[http://jsfiddle.net/Sf4xc/1/](http://jsfiddle.net/Sf4xc/1/)**

# unix - 在使用 sed 或 awk 或 grep 搜索复杂字符串时需要帮助

> ID：13077822
> 
> 赞同：0
> 
> 时间：2012-10-25T21:46:52.970
> 
> 标签：unix, sed, awk

我有一个巨大的文本文件，其中包含大量多行记录的一些页面视图和不同用户的购买。每条记录由五个破折号分隔，例如“-----”并以字符串“完成”结尾。每条记录都包含用户 ID 字符串，如“xyz”，购买字符串为“已购买”。相同的用户 ID 也可能包含不同的记录

我正在尝试查找购买该商品的特定用户的所有记录，例如“xyz”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:08:16.707

尝试这个：

```
gawk 'BEGIN{RS=ORS="\n-----"} /xyz/ && /purchased/' file 
```

如果这不能满足您的要求，请发布一些 SMALL 示例输入和该输入的预期输出。

# javascript - Javascript 中的 For 循环仅输出上次迭代的值

> ID：13077828
> 
> 赞同：4
> 
> 时间：2012-10-25T21:47:27.540
> 
> 标签：javascript, jquery, for-loop, settimeout

我有这个 Javascript 代码，它按预期工作：

```
<div class="test"></div>

<script>
setTimeout(function(){$(".test").append("test1")},1000);
setTimeout(function(){$(".test").append("test2")},2000);
</script>
<script src="js/jquery.min.js"></script> 
```

它首先显示“test1”，然后在一秒钟后显示“test2”，例如：“test1test2”，这就是我想要的。

当我尝试在 FOR 循环中执行此操作时，如下所示：

```
var timeInterval = 1000;
for (var i = 0, l = 2; i < l; i++ ) {
    setTimeout(function(){$(".test").append("test" + i)},timeInterval);
    timeInterval += 1000;
} 
```

然后我先得到“test2”，然后一秒钟后得到“test2”，例如：“test2test2”，这不是我想要的。

事实上，如果 l = 3，那么我得到“test3test3test3”而不是“test1test2test3”。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:52:02.957

var`i`在执行函数时递增到 2 `setTimeout`，因此它只是将`i`值打印为 2，从而导致`test2test2`.

您应该使用闭包来使用`i`print的实例`test1test`。

**演示：http:** [//jsfiddle.net/mBBJn/1/](http://jsfiddle.net/mBBJn/1/)

```
var timeInterval = 1000;
for (var i = 0, l = 2; i < l; i++) {
    (function(i) {
        setTimeout(function() {
            $(".test").append("test" + (i+1))
        }, timeInterval);
        timeInterval += 1000;
    })(i);
} 
```

**编辑：**使用函数参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T21:50:47.903

for 循环不会创建新范围，您可以使用另一个函数来执行此操作：

```
var timeInterval = 1000;
for (var i = 0, l = 2; i < l; i++) {
    setTimeout((function(i) {
        return function() {
            $(".test").append("test" + i);
        }
    })(i), timeInterval);
    timeInterval += 1000;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T21:51:01.447

在这种情况下，变量`i`将始终引用的当前值`i`（而不是`i`调用时的值）。

这就是作用域在 JavaScript 中的工作方式。

请参阅@Esailija 的答案以获取解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:51:54.800

这是因为您没有`i`从 for 循环中捕获 的值。您可以将代码调整为此以使其工作：

```
var timeInterval = 1000;
for (var i = 0, l = 2; i < l; i++ ) {
    (function(i2, timeInterval2) {
        setTimeout(function() {
            $(".test").append("test" + i2);
        }, timeInterval2);
    })(i, timeInterval);
    timeInterval += 1000;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T22:14:14.860

保持范围最明显的方法`i`是在其他答案中解决，但是由于您使用的是 jQuery，因此您还有其他选择。

1.  使用`$.each`而不是`for`循环，这样您就`i`可以在该范围内的任何地方访问变量。

2.  使用`delay`而不是`setTimeout`. 为此，您需要先触发队列：`$(".test").show(0).delay(timeInterval).append("test" + i)`

# linux - FUSE 文件系统上的 Linux 功能

> ID：13077830
> 
> 赞同：1
> 
> 时间：2012-10-25T21:47:29.340
> 
> 标签：linux, fuse, linux-capabilities, xattr

我有一个 FUSE 文件系统，我在其中编写了`getxattr`和`setxattr`这样的代码：

```
int mfs_setxattr(const char *path, const char *name, const char *value, size_t size, int flags)
{
  ... /* some translation processing of path to rpath */

  int ret = lsetxattr(rpath, name, value, size, flags);

  ... /* some logging works */

  if (ret == -1) {
    return -errno;
  }

  return 0;
} 
```

和

```
int mfs_getxattr(const char *path, const char *name, char *value, size_t size)
{
  ... /* some translation processing of path to rpath */

  int ret = lgetxattr(rpath, name, value, size);

  ... /* some logging works */

  if (ret == -1) {
    return -errno;
  }

  return ret;
} 
```

我已经对此进行了测试，除了功能之外它工作得很好：当我使用 setcap 为程序设置功能并运行它时，程序无法执行特权工作。尽管 getcap 返回了我之前设置的功能。

有人可以告诉我一种跟踪问题的方法或给我一些关于正在发生的事情的指示吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T18:28:23.710

我认为一个好的起点是 init 函数。在那里你得到一个论点

`struct fuse_conn_info *conn`

该结构包含以下字段

1.  proto_major：FUSE 的主要版本
2.  proto_minor：FUSE 的次要版本
3.  async_read：如果此条目 > 0，则您的 FS 支持异步读取
4.  max_write：支持的最大写入量是多少。如果您输入的值小于 4K，它将直接将该值恢复为 4K
5.  max_readahead：最大预读值
6.  能力：这是 FUSE 内核模块支持的能力 它被编码为位标志
7.  想要：FUSE 客户端想要什么功能，再次进行位编码

现在我还没有尝试过这个，但我敢打赌“**想要**”字段是你需要修改的。您拥有的选项如下

*   FUSE_CAP_DONT_MASK：如果设置，umask 不会应用于创建操作的文件。网上的一些说法没有真正实现
*   FUSE_CAP_EXPORT_SUPPORT：表示您的客户端是否处理“。” 或“..”本身或 FUSE 需要执行陷阱并处理它
*   FUSE_CAP_ASYNC_READ：如果你基本上使用异步读取，默认启用
*   FUSE_CAP_BIG_WRITES：如果 FS 可以处理大于 4KB 的写入，则应设置
*   FUSE_CAP_POSIX_LOCKS：如果 FS 客户端支持通过**lock**系统调用从远程实体锁定，则应设置
*   FUSE_CAP_ATOMIC_O_TRUNC：如果 FS 支持 O_TRUNC 作为打开标志，则应设置此项

我不确定这有多大帮助，但这是一个开始。有人说，如果您实际上可以以某种方式禁用这些功能，您将获得巨大的性能提升。但我仍然没有找到如何做到这一点。

# android - 如何动态替换/隐藏 ActionBar 中的项目

> ID：13077833
> 
> 赞同：0
> 
> 时间：2012-10-25T21:48:05.610
> 
> 标签：android, android-actionbar, menuitem

我正在使用一个显示一些 MenuItems 图标的 ActionBar。我需要的是能够在活动打开时替换或隐藏一些菜单项。我的问题是我找不到在 onCreateOptionsMenu() 方法之外获取 MenuItem 引用的方法......关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:19:56.117

您可以使用[`onPrepareOptionsMenu (Menu menu)`](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)在活动中显示/隐藏菜单项：

```
@Override
public boolean onPrepareOptionsMenu (Menu menu) {
    menu.getItem(0).setVisible(false);
    return super.onPrepareOptionsMenu(menu);
} 
```

# php - 从 PHP 循环生成 RTF 表行

> ID：13077836
> 
> 赞同：0
> 
> 时间：2012-10-25T21:48:28.227
> 
> 标签：php, document, rtf, dynamically-generated

我正在尝试生成 RTF 文档。我有一个具有第一行表格（标题）的 RTF 模板。其余的行是从 PHP 动态生成的。我查看了 RTF 文档的源代码并复制了特定行的代码，我用一些可变类型的名称替换了文本：

```
%%a%% - means that in my PHP code, it looks for %%a%% and replaces with some text 
```

该脚本有效，PHP 端一切正常，它生成替换变量。但是，当我尝试打开生成的 RTF 文档时，我得到一个错误：

> 此文档中的表已损坏。

我在 PHP 循环中生成的 RTF 代码是这样的：

```
\trowd \irow1\irowband1\ts18\trgaph108\trleft-813\trbrdrt\brdrs\brdrw10 \trbrdrl\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrh\brdrs\brdrw10 \trbrdrv\brdrs\brdrw10 
\trftsWidth3\trwWidth10795\trftsWidthB3\trftsWidthA3\trpaddl108\trpaddr108\trpaddfl3\trpaddft3\trpaddfb3\trpaddfr3\tbllkhdrrows\tbllklastrow\tbllkhdrcols\tbllklastcol \clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr
\brdrs\brdrw10 \cltxlrtb\clftsWidth3\clwWidth1728\clshdrawnil \cellx915\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb\clftsWidth3\clwWidth1620\clshdrawnil \cellx2535\clvertalt\clbrdrt
\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb\clftsWidth3\clwWidth1260\clshdrawnil \cellx3795\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 
\cltxlrtb\clftsWidth3\clwWidth1440\clshdrawnil \cellx5235\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb\clftsWidth3\clwWidth1440\clshdrawnil \cellx6675\clvertalt\clbrdrt\brdrs\brdrw10 
\clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb\clftsWidth3\clwWidth1440\clshdrawnil \cellx8115\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 
\cltxlrtb\clftsWidth3\clwWidth1867\clshdrawnil \cellx9982\row }\pard\plain \qj \li0\ri0\sl360\slmult1\widctlpar\intbl\aspalpha\aspnum\faauto\adjustright\rin0\lin0\pararsid9917761\yts18 \fs24\lang1033\langfe1033\cgrid\langnp1033\langfenp1033 {
\f37\fs20\insrsid5056707 %%a%%}{\f37\fs20\ul\cf6\insrsid5335176\charrsid15606364 \cell }{\f37\fs20\insrsid5056707 %%b%%}{\f37\fs20\ul\cf6\insrsid5335176\charrsid15606364 \cell }{\f37\fs20\insrsid5056707 %%c%%}{
\f37\fs20\ul\cf6\insrsid5335176\charrsid15606364 \cell }{\f37\fs20\insrsid5056707 %%d%%}{\f37\fs20\ul\cf6\insrsid5335176\charrsid15606364 \cell }{\f37\fs20\insrsid5056707 %%e%%}{\f37\fs20\ul\cf6\insrsid5335176\charrsid15606364 \cell }{
\f37\fs20\insrsid5056707 %%f%%}{\f37\fs20\ul\cf6\insrsid5335176\charrsid15606364 \cell }{\f37\fs20\insrsid5056707 %%g%%}{\f37\fs20\ul\cf6\insrsid5335176\charrsid15606364 \cell }\pard\plain 
\ql \li0\ri0\widctlpar\intbl\aspalpha\aspnum\faauto\adjustright\rin0\lin0 \fs24\lang1033\langfe1033\cgrid\langnp1033\langfenp1033 {\b\f37\fs28\ul\cf6\insrsid5335176 
```

如果有人知道 RTF 语法，我在某处有语法错误吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:21:53.327

您 `RTF`根本无效，缺少标题、字体定义、未关闭`}`等。..

尝试

```
$template = "test/hey_main.rtf";
$newfile = "test/hey_x.rtf";

$rtf = file_get_contents($template);

$replace = array("%%no%%"=>1,"%%name%%"=>"Giorgi","%%Value%%"=>"Sample RTF");
$rtf = str_replace(array_keys($replace), array_values($replace), $rtf);

file_put_contents($newfile, $rtf) 
```

`hey_main.rtf`RTF 示例

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1033\deflangfe1033{\fonttbl{\f0\froman\fprq2\fcharset0 Times New Roman;}{\f1\fswiss\fprq2\fcharset0 Calibri;}}
\viewkind4\uc1\trowd\trgaph108\trleft-108\trbrdrl\brdrs\brdrw10 \trbrdrt\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trpaddl108\trpaddr108\trpaddfl3\trpaddfr3
\clbrdrl\brdrw10\brdrs\clbrdrt\brdrw10\brdrs\clbrdrr\brdrw10\brdrs\clbrdrb\brdrw10\brdrs \cellx3084\clbrdrl\brdrw10\brdrs\clbrdrt\brdrw10\brdrs\clbrdrr\brdrw10\brdrs\clbrdrb\brdrw10\brdrs \cellx6276\clbrdrl\brdrw10\brdrs\clbrdrt\brdrw10\brdrs\clbrdrr\brdrw10\brdrs\clbrdrb\brdrw10\brdrs \cellx9468\pard\intbl\b\f1\fs22 No\b0\cell\b Name\b0\cell\b Value\b0\cell\row\trowd\trgaph108\trleft-108\trbrdrl\brdrs\brdrw10 \trbrdrt\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trpaddl108\trpaddr108\trpaddfl3\trpaddfr3
\clbrdrl\brdrw10\brdrs\clbrdrt\brdrw10\brdrs\clbrdrr\brdrw10\brdrs\clbrdrb\brdrw10\brdrs \cellx3084\clbrdrl\brdrw10\brdrs\clbrdrt\brdrw10\brdrs\clbrdrr\brdrw10\brdrs\clbrdrb\brdrw10\brdrs \cellx6276\clbrdrl\brdrw10\brdrs\clbrdrt\brdrw10\brdrs\clbrdrr\brdrw10\brdrs\clbrdrb\brdrw10\brdrs \cellx9468\pard\intbl %%no%%\cell %%name%%\cell %%Value%%\cell\row\pard\sa200\sl276\slmult1\par
} 
```

*   [下载 hey_main.rtf](http://bayfiles.com/file/pa9x/aypfrw/hey_main.rtf)
*   [下载 hey_x.rtf](http://bayfiles.com/file/paa3/MJCcMS/hey_x.rtf)

# c# - 使用动态对象从方法返回不同的类型

> ID：13077838
> 
> 赞同：0
> 
> 时间：2012-10-25T21:48:42.907
> 
> 标签：c#, .net, dynamicobject

如果您需要测试来自另一个项目的非公共属性，Microsoft 单元测试向导会创建 Accessor 对象。在我的单元测试中，我创建了辅助函数，这样我就不会在每个单元测试方法中重复相同的代码。目前我有两个几乎相同的测试，除了一个采用标准公共对象，另一个采用 Accessor 版本。由于访问器基于标准版本，我应该能够拥有一个功能。

我曾假设我可以使用泛型来完成一个简单的演员表。但在[发布问题](https://stackoverflow.com/questions/12998916/update-two-common-functions-to-use-generics)后，我发现需要做更多的工作，包括必须更新底层对象。当我询问是否存在任何其他方法时，这一点得到了证实。有人建议[Dynamic 对象可能会起作用](https://stackoverflow.com/questions/13054481/best-way-to-update-two-common-functions-to-use-shared-function)。我不熟悉动态对象，有人可以发布一个示例，让我拥有一个共享功能并在运行时确定对象吗？

以下是现有的两个功能：

```
// Common function to create a new test record with standard Account object
internal static Account CreateAccount(bool saveToDatabase)
{
    DateTime created = DateTime.Now;
    string createdBy = _testUserName;

    Account account = new Account(created, createdBy);

    account.Notes = Utilities.RandomString(1000);

    if (saveToDatabase)
        account.Create();
}

// Common function to create a new test record with Account_Accessor
internal static Account_Accessor CreateAccount(bool saveToDatabase)
{
    DateTime created = DateTime.Now;
    string createdBy = _testUserName;

    Account_Accessor account = new Account_Accessor(created, createdBy);

    account.Notes = Utilities.RandomString(1000);

    if (saveToDatabase)
        account.Create();
} 
```

我有两打这样的单元测试，真实对象平均有 10 个属性，我在这里简化了示例。

这是单元测试 API 创建的访问器代码（再次，我已将其缩减以简化示例）：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.Collections.ObjectModel;
using System.Data;

namespace NameHere.Bll
{
    [Shadowing("NameHere.Bll.Account")]
    public class Account_Accessor : ProjectBase_Accessor<Account>
    {
        protected static PrivateType m_privateType;

        public Account_Accessor(PrivateObject value);
        [Shadowing(".ctor@2")]
        public Account_Accessor(DateTime created, string createdBy);

        [Shadowing("_notes")]
        public string _notes { get; set; }

        public static Account_Accessor AttachShadow(object value);

        [Shadowing("Create@0")]
        public override void Create();
    }
}

using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.ComponentModel;
using System.Linq.Expressions;

namespace NameHere.Bll
{
    [Shadowing("NameHere.Bll.ProjectBase`1")]
    public class ProjectBase_Accessor<T> : BaseShadow, INotifyPropertyChanged
    {
        protected static PrivateType m_privateType;

        public ProjectBase_Accessor(PrivateObject value);

        [Shadowing("Created")]
        public DateTime Created { get; set; }
        public static PrivateType ShadowedType { get; }

        [Shadowing("add_PropertyChanged@1")]
        public void add_PropertyChanged(PropertyChangedEventHandler value);
        public static ProjectBase_Accessor<T> AttachShadow(object value);

        [Shadowing("Create@0")]
        public virtual void Create();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:07:13.917

这是我第一次尝试使用动态对象的共享函数。它根据布尔值 useAccessor 参数返回 Account 或 Account_Accessor：

```
internal static dynamic CreateAccount(bool saveToDatabase, bool useAccessor)
{
    DateTime created = DateTime.Now;
    string createdBy = _testUserName;
    dynamic account;

    if (useAccessor)
         account = new Account_Accessor(created, createdBy);
    else
         account = new Account(created, createdBy);    

    account.Notes = Utilities.RandomString(1000);

    if (saveToDatabase)
        account.Create();
} 
```

对这种方法有什么建议或意见吗？

# javascript - 从多个 AJAX 页面收集数据（使用浏览器插件？）

> ID：13077839
> 
> 赞同：1
> 
> 时间：2012-10-25T21:48:47.747
> 
> 标签：javascript, css, google-chrome-extension, firefox-addon, web-mining

我想从某个网站收集许多日期和目的地的机票价格。我可以在 URL 上指定来源、目的地和日期，但网站使用 AJAX 获取数据，因此页面响应中的价格并不容易获得。在这种情况下，我可以使用任何编程语言来获取数据。

我认为使用 Web 浏览器一个接一个地加载每个 URL，让它呈现页面，然后我只查找所需的标签（我猜是使用 CSS 选择器或 JS）并保存它，可以更好地完成这项任务到某个文件或日志，然后移动到下一个 URL。稍后我可以查看数据并找到最优惠的价格。

但不幸的是，我找不到任何浏览器扩展/插件来完成这项任务（任何 Linux 浏览器都可以，Firefox 和 Chrome 更有可能）。我已经熟悉 GreaseMonkey，但这不是他设计的任务，但我想这将是一个类似的工具或以类似的方式操作。

有人知道我可以用来完成这项任务的工具吗？也欢迎其他方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:56:49.623

我会使用 cURL，检查页面来源以查看传递给页面的 post/get 数据，然后构建自己的 gui 来显示数据。您可以使用 php curl 非常轻松快捷地在您自己的 Web 服务器上运行它。

# heroku - Heroku Resque Redis::TimeoutError：连接超时

> ID：13077840
> 
> 赞同：3
> 
> 时间：2012-10-25T21:48:54.047
> 
> 标签：heroku, redis, resque, redistogo

我们有一个配置了 Redis To Go (Small) 的 Heroku 应用程序，运行一些 Resque 工作程序。最近我们注意到 Airbrake 中有很多错误说“Redis::TimeoutError: Connection timed out”（见下面的截图）。我们没有接近 256 个 Redis 连接的连接限制或 100MB 的数据限制。查看这些异常的回溯，似乎它们可能发生在 Resque 代码尝试调用 Redis 的任何地方。没有一个特定的代码行会导致这个错误，尽管最终所有的回溯都会到达这行代码，这会引发 TimeoutError：

```
vendor/bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:198:in `rescue in io' 
```

有任何想法吗？

![空气制动错误](../Images/82d23d2d0892cef7e966b2d7ccea3807.png)

# jsf-2 - JFreeChart - 饼图缺失值

> ID：13077841
> 
> 赞同：1
> 
> 时间：2012-10-25T21:48:56.297
> 
> 标签：jsf-2, jfreechart

我有 jsf 的 web 应用程序。

出于某种原因，使用相同的代码从 1.0.0 – 1.0.14 版本升级 jfreechart 后，我​​看不到 PieChart 中的值。

```
// create a dataset...
    DefaultPieDataset dataset = new DefaultPieDataset();
    dataset.setValue("Category 1", new Integer(2));
    dataset.setValue("Category 2", new Double(27.9));
    dataset.setValue("Category 3", new Double(79.5));
 // create a chart...
    JFreeChart jfreechart = ChartFactory.createPieChart(
            "Sample Pie Chart",
            dataset,
            true, // legend?
            true, // tooltips?
            false // URLs?
            );

 <h:panelGrid style=" margin:0px auto">
    <p:graphicImage value="#{chartBean.jfreeContent}"/> 
</h:panelGrid> 
```

知道为什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:59:08.050

我更改了第 89 行，[`PieChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/PieChartDemo1.html#line.60)并没有看到明显的区别。

```
dataset.setValue("Two", new Integer(10)); 
```

# ios - 如何检测设备上是否安装了 AppSync？

> ID：13077843
> 
> 赞同：1
> 
> 时间：2012-10-25T21:48:58.977
> 
> 标签：ios, security, jailbreak

AppSync 会导致 iCloud 和应用内购买出现一些问题，所以我想检测设备上是否存在它来处理 iCloud 和 IAP 的奇怪行为。有没有办法知道这一点？

没关系设备是否越狱，但AppSync阻止我的应用程序正常工作，而且这显然是“黑客的痕迹”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:29:08.863

我已经搜索并找到了 AppSync 的痕迹，这是找出它是否存在于设备上的代码。是的，它比需要的时间长一点，但我想确定一下。当然在发布代码中你应该以某种方式混淆字符串，但就是这样：

```
bool isAppSyncExist()
{
    BOOL isbash = NO;
    BOOL isappsync = NO;
    FILE *f = fopen("/bin/bash", "r");
    if (f != NULL)
    {
        //Device is jailbroken
        isbash = YES;
        fclose(f);
    }

    if (isbash)
    {
        f = fopen("/Library/MobileSubstrate/DynamicLibraries/AppSync.plist", "r");
        if (f != NULL)
        {
            isappsync = YES;
            fclose(f);
        }
        if (isappsync == NO)
        {
            NSError *err;
            NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"/private/var/lib/dpkg/info" error:&err];

            for (int i = 0; i < files.count; i++)
            {
                NSString *fname = [files objectAtIndex:i];
                if ([fname rangeOfString:@"appsync" options:NSCaseInsensitiveSearch].location != NSNotFound)
                {
                    isappsync = YES;
                    break;
                }
            }
        }
        if (isappsync == NO)
        {
            NSError *err;
            NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"/var/lib/dpkg/info" error:&err];

            for (int i = 0; i < files.count; i++)
            {
                NSString *fname = [files objectAtIndex:i];
                if ([fname rangeOfString:@"appsync" options:NSCaseInsensitiveSearch].location != NSNotFound)
                {
                    isappsync = YES;
                    break;
                }
            }
        }
    }

    return isappsync == YES;
} 
```

# mongodb - 使用 composer 为 Symfony2 设置 MongoDb

> ID：13077845
> 
> 赞同：3
> 
> 时间：2012-10-25T21:48:59.477
> 
> 标签：mongodb, symfony, annotations

我对 Symfony2 很陌生，我按照 Symfony2 网站上的指南使用 composer 安装了 MongoDb Doctrine 包（这也是我安装 Symfony2 的方式）

[http://symfony.com/doc/master/bundles/DoctrineMongoDBBundle/index.html](http://symfony.com/doc/master/bundles/DoctrineMongoDBBundle/index.html)

我将这些行添加到 app/autoload.php 中：

```
use Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver;
AnnotationDriver::registerAnnotationClasses(); 
```

和 app/AppKernal.php

```
new Doctrine\Bundle\MongoDBBundle\DoctrineMongoDBBundle(), 
```

这是指南中建议的，但是当我尝试加载 Symfony 应用程序（这只是演示应用程序）时，我收到以下错误：

```
InvalidArgumentException: The service definition "doctrine_mongodb.odm.document_manager" does not exist. 
```

[还有更多的痕迹，让我知道这是否有用]

如果我注释掉我添加到 app/AppKernal.php 中的行，那么 Symfony Demo 应用程序加载没有问题。

我已经运行 app/check.php 并注意到以下警告：

```
WARNING  When using annotations you should have at least PHP 5.3.8 due to PHP bug #55156
          Install PHP 5.3.8 or newer if your project uses annotations. 
```

我目前正在使用 Ubuntu (5.3.5-1ubuntu7.11) 附带的 PHP 版本，看起来上面的 composer/mongodb 位使用注释。

当我进行谷歌搜索时，我找不到任何明显的东西，并假设如果我的 PHP 版本真的有问题，这会更常见。

据我所知，我需要：

*   从源代码编译 PHP 升级到 5.3.8
*   不使用 composer 安装 Symfony2，因为它看起来像安装 MongoDB 包的旧方法不使用注释
*   我完全错过了一些东西，因为我不知道 Symfony2 是如何工作的：D

有没有人有任何建议或其他更容易的解决方案？如果可以的话，我真的很想坚持作曲家。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T14:57:58.640

我不知道 PHP 版本（那里可能存在问题，但您得到的错误并没有明确说明），但您的问题是 config.yml 中缺少配置。

即使您现在不使用该服务，也必须添加它。它甚至不必是有效信息，它必须存在。

将以下内容添加到您的 config.yml（从[此处](http://symfony.com/doc/master/bundles/DoctrineMongoDBBundle/index.html#configuration)复制）：

```
# app/config/config.yml
doctrine_mongodb:
    connections:
        default:
            server: mongodb://localhost:27017
            options: {}
    default_database: test_database
    document_managers:
        default:
            auto_mapping: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:22:38.750

Symfony 与通过 composer 安装的 DoctrineMongoDBBundle 配合得很好。使用 composer 安装依赖项是最佳实践。

您必须将您的 php[更新到 5.4。](https://askubuntu.com/questions/109404/how-do-i-install-php-5-4-0)

# osgi - OSGi 容器

> ID：13077848
> 
> 赞同：0
> 
> 时间：2012-10-25T21:49:28.263
> 
> 标签：osgi, containers, apache-karaf

什么是最有用的 OSGi 容器？我最近一直在使用[Apache Karaf](http://karaf.apache.org/)，但我想知道根据您的经验，您最推荐哪种容器？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:01:37.743

Apache Karaf 是我最喜欢的，因为它有很棒的控制台和来自 maven repos 的部署。它也很好地与其他 apache 项目集成。所以安装camel、cxf或者activemq真的很简单。

# jax-ws - jax-ws webmethod 响应 - 编码特殊字符

> ID：13077853
> 
> 赞同：0
> 
> 时间：2012-10-25T21:50:09.460
> 
> 标签：jax-ws, special-characters

我的 jax-ws webmethods 之一返回哈希 - 带有特殊字符的字符串。

我收到不完整的响应 XML。

当我返回正常字符串例如“TEST”时，webmethod 工作正常。

如何编码响应？我希望j2ee5.0、jdk6.0库就足够了。

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:47:00.013

java类中重要的是：

```
@XmlElementRef(name = "Hash", type = JAXBElement.class)
@XmlMixed
protected List<Serializable> content; 
```

在 xsd 中对生成很重要的是混合 =“true”：

```
<xsd:complexContent mixed="true">
        <xsd:extension base="common:Request">
            <xsd:sequence>

                <xsd:element name="Hash"
                             type="xsd:string"
                             minOccurs="1"
                             maxOccurs="1"
                             > 
```

# java - Java 图形图像

> ID：13077858
> 
> 赞同：-1
> 
> 时间：2012-10-25T21:50:30.803
> 
> 标签：java, image, graphic

嘿，我在 Jpanel 中添加以下图像：[msu-footprints.org/2011/Aditya/map.jpg](http://msu-footprints.org/2011/Aditya/map.jpg)

**然后添加多边形**：

```
int[] x = new int[]{65, 122, 77, 20}; 
int[] y = new int[]{226, 258, 341, 310}; 
g.setColor(Color.RED); 
g.drawPolygon(x, y, x.length); 
```

多边形应该与构建 GER 重合，但有一点偏移。我的教授说坐标没问题。我如何放置图像位置有什么问题吗？——</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:05:17.123

如果直接绘制到顶层容器（JFrame），那么坐标空间会出错，内容窗格实际上是偏移的，考虑到框架的边框和菜单栏。

如果您覆盖任何框架的`paint`方法或使用该`getGraphics`方法，就会发生这种情况。

![JFrame 显示原点坐标和（偏移）内容](../Images/aeab053da5b7ce3b171aaad60e6a574b.png)

创建一个自定义组件（从类似的东西扩展`JPanel`）并覆盖它的`paintComponent`方法并将图像和矩形直接呈现给它。坐标空间将是正确的（左上角为 0x0）

# python - 如何重命名 Python Pyramid 响应对象中的文件？

> ID：13077867
> 
> 赞同：2
> 
> 时间：2012-10-25T21:51:37.633
> 
> 标签：python, response, pyramid

> **可能重复：**
> [如何设置文件名作为响应](https://stackoverflow.com/questions/9991292/how-to-set-file-name-in-response)

我将文件存储在 MongoDB 中。为了从 Pyramid 提供文件，我这样做：

```
# view file
def file(request):
    id = ObjectId(request.matchdict['_id'])
    collection = request.matchdict['collection']
    fs = GridFS(db, collection)
    f = fs.get(id)
    filename, ext = os.path.splitext(f.name)
    ext = ext.strip('.')
    if ext in ['pdf','jpg']:
        response = Response(content_type='application/%s' % ext)
    else:
        response = Response(content_type='application/file')
    response.app_iter = FileIter(f)
    return response 
```

使用这种方法，文件名默认为`ObjectId`文件的字符串，它不漂亮并且缺少正确的文件扩展名。我查看了文档以了解如何/在何处重命名`Response`对象内的文件，但我看不到它。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T22:20:16.747

没有 100% 万无一失的方法来设置文件名。由浏览器决定文件名。

也就是说，您可以使用`Content-Disposition`标题来指定您希望浏览器*下载*文件而不是*显示*它，并且您还可以*建议*文件的文件名以用于该文件。它看起来像这样：

```
Content-Disposition: attachment; filename="fname.ext" 
```

但是，**没有可靠的跨浏览器方法来指定具有非 ascii 字符的文件名**。有关更多详细信息，请参阅[此 stackoverflow 问题](https://stackoverflow.com/questions/93551/how-to-encode-the-filename-parameter-of-content-disposition-header-in-http)。您还必须小心使用`quoted-string`文件名的编码；您应该构造一个文件名，删除所有非 ascii 字符并`"`用`\"`.

现在是金字塔特定的东西。只需`Content-Disposition`在您的回复中添加一个标题。（请注意，这`application/file`不是[有效的 mime 类型](http://www.iana.org/assignments/media-types/application/index.html)。`application/octet-stream`用作“通用”字节袋类型。）

```
# "application/file" is not a valid mime type!
content_subtype = ext if ext in ['jpg','pdf'] else 'octet-stream'

# This replaces non-ascii characters with '?'
# (This assumes f.name is a unicode string)
content_disposition_filename = f.name.encode('ascii', 'replace')

response = Response(content_type="application/%s" % content_subtype,
                    content_disposition='attachment; filename="%s"' 
                      % content_disposition_filename.replace('"','\\"')
           ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T21:57:41.293

看起来你必须设置`Content-Disposition`标题：

```
response.content_disposition = 'attachment; filename=%s' % filename 
```

# regex - 转义通配符文件路径 perl

> ID：13077868
> 
> 赞同：0
> 
> 时间：2012-10-25T21:51:42.227
> 
> 标签：regex, perl, escaping

我有一个文件数组：

```
my @plistFiles = glob('Logs/*/*.plist'); 
```

我需要转义，它将包含“（”和“）”以及通常的空格。

这是@plistFiles 将返回的文件路径之一：

```
Logs/Run 1 (13)/Automation Results.plist 
```

我目前有此代码用于转义文件路径中的空格，我将其传递给 OSX 终端中的命令：

```
$plistFile =~ s/\ /\\\ /g; 
```

那么我怎样才能编辑这个正则表达式来转义（和）？

这对于转义 ( 和 ) 是否正确？：

```
$plistFile =~ s/\(\d)/\\\(\d\\\)/g; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:44:53.063

我不明白为什么一个电话是`quotemeta`不够的。是的，它也会避开斜线和圆点，但这没关系。

然而，只转义空格和括号也很简单。

该程序显示了这两种技术

```
use strict;
use warnings;

use feature 'say';

my $path = 'Logs/Run 1 (13)/Automation Results.plist';
my $escaped = quotemeta $path;
say $escaped;

$escaped = $path =~ s/([\s()])/\\$1/gr;
say $escaped; 
```

**输出**

```
Logs\/Run\ 1\ \(13\)\/Automation\ Results\.plist

Logs/Run\ 1\ \(13\)/Automation\ Results.plist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:53:30.597

使用正则表达式，您可以添加转义斜杠

```
s/[() ]/\\$&/g; 
```

请参阅**[此演示](http://ideone.com/zRIyb5)**。

或者

```
s/(?=[() ])/\\/g; 
```

请参阅**[此演示](http://ideone.com/Dx6Xxl)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:17:10.800

您会发现使用 {} 来分隔您的正则表达式更容易。节省一些\眼睛晃动。

```
#!/usr/bin/perl
use strict;
use warnings;
use utf8;
use 5.10.0;
use Data::Dumper;

my $to_match = "( this dreadful ) filename";
$to_match =~ s{([\(\)])}{\\$1}g;
say $to_match; 
```

这是这样做的：

```
$ perl x.pl
\( this dreadful \) filename 
```

如果您需要转义空格以及 ()s 然后

```
$to_match =~ s{([\(\s\)])}{\\$1}g; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T22:20:00.777

要将例如转换`(13)`为`\(13\)`，您可以编写：

```
$plistFile =~ s/ /\\ /g;
$plistFile =~ s/\((\d+)\)/\\($1\\)/g; 
```

但我认为你最好只转义and的*所有*实例，无论它们是否围绕数字：`(``)`

```
$plistFile =~ s/([ ()])/\\$1/g; 
```

# mysql - 如何为用户添加积分行？

> ID：13077875
> 
> 赞同：0
> 
> 时间：2012-10-25T21:52:27.367
> 
> 标签：mysql, sql, database, points

我正在尝试在我的网站上的当前用户表中添加一个点行，但是`#1062 - Duplicate entry '10' for key 'PRIMARY'` 当我尝试将所有用户的默认点设置为 10 时，我不断收到错误消息。当两个用户最终达到相同的分数 150 等时，我认为这是一个问题。这是我的表的设置

![在此处输入图像描述](../Images/1fc0ae18b320e66b8daa2f67029b086e.png)

![在此处输入图像描述](../Images/c7faf0b73dd756d539d927903fb1e094.png)

![在此处输入图像描述](../Images/ad4025dd589d31c06ba60cd3068d1d80.png)

这是我的查询

```
<?php

session_start();
$db = mysqli_connect("host", "username", "password", "db_name");

$username = $_SESSION['username']; 

mysqli_query($db, 'UPDATE login_users SET Points=Points+1 WHERE username=$username');

?> 
```

允许将相同的数字存储在点行中的任何想法？它似乎将其视为“ID”而不仅仅是一个数字。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:29:15.713

看起来您`UNIQUE`在该列上有一个索引`Points`，因此您可能应该删除它，因为这没有任何意义。

您可能想要粘贴`SHOW CREATE TABLE login_users`您使用的数据库编辑器的结果而不是屏幕截图。

# jquery - JQuery Mobile 多次执行委托

> ID：13077880
> 
> 赞同：0
> 
> 时间：2012-10-25T21:52:57.060
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery Mobile 创建一个网站，其中包含不同 html 文件中的多个页面。在一个文件中，我有这个 DIV：

```
<div data-role="page" id="page3" style="overflow-x: hidden !important;">
 <div data-role="content">...
 </div>
</div> 
```

我在第一页的标题中定义了一个委托：

```
$(document).delegate('[id="page3"]', 'pageshow', function () {
    alert('page3');
}; 
```

问题是该委托在第一次加载页面时被触发，第二次被触发两次，等等......每次您访问该页面时，委托被触发一次。

过程是这样的：

> 访问第1页->第3页（一个警报）->第1页->第3页（两个警报）....

`$('#page3')`我试图检查在萤火虫控制台上是否有多个具有该 ID 的元素正在执行，但我只得到一个项目。

我不确定我还能检查什么来调试问题。

**编辑：**

page1.html

```
<html>
    <head>
        <script type="text/javascript" src="assets/js/delegation.js"></script>   
        <script type="text/javascript">
           delegation.delegate3()
        </script>  
    </head>
    <body> .... 
```

page3.html

```
<html>
    <head>
        <script type="text/javascript" src="assets/js/delegation.js"></script>     
    </head>
    <body> 
       <div data-role="page" id="page3" style="overflow-x: hidden !important;">
          <div data-role="content">...
           </div>
       </div>.... 
```

委托.js

```
var delegation = (function () {
  return {
     delegate3:function delegate3() {
    $(document).delegate('[id="page3"]', 'pageshow', function () {
           alert('page3');
         };
   }
 })(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:17:17.320

您的页面每次都会重建，因此它会找到另一个页面并在新旧页面上执行事件。

尝试这个：

```
$(document).on("pageshow", "#page3", function () {
    alert('page3');
}; 
```

或替换`on`为`one`执行一次；

# x86 - TLB invlpg 指令延迟时间长

> ID：13077883
> 
> 赞同：3
> 
> 时间：2012-10-25T21:53:20.977
> 
> 标签：x86, virtual-memory, tlb

所以我正在研究这个内核模块，它进行一些页表操作，我注意到刷新 TLB 条目很慢。你问有多慢？每次调用 invlpg 超过 100 ns！那是280个周期或更多。我愿意接受这一点……但对于硬件支持的分页和地址转换，这似乎违反直觉。有谁知道为什么这么糟糕？

我在 4 核 2.8 Ghz Intel core i5 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-26T03:39:14.607

我的猜测是，像这样的特权指令很少占任何实际工作负载的总 CPU 时间的重要部分，因此不值得花费大量的硅来使它们更快。

使它们非序列化意味着无序的微指令调度逻辑将必须跟踪页表修改作为每个内存微指令的依赖项之一。这将对功耗产生负面影响，因为重新排序缓冲区已经需要跟踪很多东西，并且每个周期支持 4 个输入和更多的输出。

由于 virt 开销在某些工作负载中是一个问题，因此虚拟化的广泛使用在最近的设计中导致了这些指令的性能改进。我想情况并非如此`invlpg`。

# iphone - 如何成功地将 JSON 数据转换为 Objective-C 对象？

> ID：13077886
> 
> 赞同：3
> 
> 时间：2012-10-25T21:53:25.033
> 
> 标签：iphone, objective-c, ios, xcode, json

所以我正在做的事情很简单，从服务器以 JSON 格式获取一些数据。我正在使用 Objective-C 中的默认类（特别是 NSJSONSerialization）将得到的 responseData 转换为 JSON 格式。

所以基本上——

```
 NSString* testURL=@"http://ws.audioscrobbler.com/2.0/?method=track.getsimilar&artist=Kendrick+Lamar&track=A.D.H.D&api_key=e3f53f2f2896b44ff158a586b8ee15c7&format=json";

   NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:testURL]];

   NSDictionary* json = [NSJSONSerialization
                      JSONObjectWithData:responseData //1
                      options:kNilOptions
                      error:&error];

   NSArray* songList = [json objectForKey:@"similartracks"]; 
```

问题是，稍后当我尝试访问 JSOn 数据数组中的单个对象时，就像这样，

```
 NSDictionary* song1 = [songList objectAtIndex:0]; 
```

它给了我这个错误，

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary objectAtIndex:]：无法识别的选择器发送到实例 0x96e2b60”

关于为什么会发生这种情况的任何想法？

我很感激你的帮助，coffeejay

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T22:10:23.613

似乎`[json objectForKey:@"similartracks"]`返回一个 NSDictionary，尝试这样的事情：
`NSArray* songList = [[json objectForKey:@"similartracks"] objectForKey:@"track"]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T22:21:36.400

在处理此类事情时，您应该始终在尝试对其进行处理之前验证您的响应，您永远不应该相信任何输入。在您的情况下，您正在尝试向实例发送`objectAtIndex:`消息`NSDictionary`，这会引发无法识别的选择器异常。

避免此类崩溃的一种简单方法是检查返回对象的类，例如：

```
id song1 = json[@"similartracks"]
if([song1 isKindOfClass:[NSArray class]])
{
    //Now we're sure it's an array
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:57:38.750

您将返回的数据声明为`data`，但您正在向方法传递`NSJSONSerialization`一个名为 的变量`responseData`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T22:00:06.140

您的 json 可能不会在 yhat 点返回数组，而是返回字典。显示 json 内容，以便我们进一步提供帮助。

（NsJSonSerialization 返回 id 并且可以是数组或字典。内容再次将是数组或字典）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T23:51:42.227

您的错误消息说 songList 是字典而不是数组。检查数据结构。

# c++ - c Allegro ISO 错误使用 & 和整数但不工作

> ID：13077888
> 
> 赞同：0
> 
> 时间：2012-10-25T21:53:33.257
> 
> 标签：c++, allegro

我正在使用自己的逻辑和原始引擎制作快板游戏。我试图使重力和接触阵列中的瓷砖。为了能够从另一个类更改一个类的值，我必须使用引用符号“&”。编译后我收到此错误 **ISO C++ 禁止在gravity.cpp 的第29 行进行指针和整数之间的比较** 这是gravity 类和gravity.cpp 以及player.h 和player.cpp 的头文件。

重力.h

```
#ifndef GRAVITY_H
#define GRAVITY_H
#include<allegro.h>
#include<fstream>
#include "Global.h"

class Gravity
{
public:
    Gravity();
    ~Gravity();
    bool canJump,JumpAgain,OnSolidTile,Collision;
    int GravSpeed;
    void LoadMap(const char*filename);
    void Init();
    void Grav_Collision(int &x,int &y,int &x2,int &y2,int Gravspeed,bool canJump,bool JumpAgain,bool OnSolidTile,bool Collision);
    private:
    int loadCounterX,loadCounterY;
    int ColMap[100][100];
    int MapSizeX,MapSizeY;
    };

    #endif // GRAVITY_H 
```

Gravity.cpp **Error is on this file** #include "gravity.h" // 类的头文件

```
Gravity::Gravity()
{

}

Gravity::~Gravity()
{

}
void Gravity::Init()
{
 loadCounterX = loadCounterY = 0;
};
void Gravity::Grav_Collision(int &x,int &y,int &x2,int &y2,int Gravspeed,bool canJump,bool JumpAgain,bool OnSolidTile,bool Collision)
{
 for(int i = 0;i < MapSizeX;i++)
 {
     for(int j = 0;j < MapSizeY;j++)
     {
      if(ColMap[i][j] = 1)
      {
          //Collision
          if(&y2 < j*BlockSize)--**This IS where the error is found **--
          {
            Collision = true;       
          }
          else
          {
           Collision = false;    
          }      
      }        
     }        
 }
};
 void Gravity::LoadMap(const char*filename)
 {
 std::ifstream openfile (filename);
 if (openfile.is_open())
 {
 openfile >> MapSizeX >> MapSizeY;
 while (!openfile.eof())
 {
     openfile >> ColMap[loadCounterX][loadCounterY];   
     loadCounterX ++;
     if (loadCounterX >= MapSizeX)
     {
        loadCounterX = 0;
        loadCounterY ++;
     }
 }                       
   loadCounterX = loadCounterY = 0;
 } 
 else
 {
 allegro_message ("NO Collision FILE");    
 } 
 }; 
```

播放器.h

```
#ifndef PLAYER_H
#define PLAYER_H
#include <allegro.h>
#include "Global.h"

class player
{
public:
    player();
    ~player();
    void Init();
    void Update();
    void Draw(BITMAP*buffer,int c1,int c2,int c3);
    void Input();
    //Variable
    int x;
    int x2;
    int y;
    int y2;
    int speed;
    char dir;
    BITMAP*buffer;
    private:
    int c1;
    int c2;
    int c3;
    };

   #endif // PLAYER_H 
```

播放器.cpp

```
#include "player.h" // class's header file

// class constructor
player::player()
{
// insert your code here
}

// class destructor
player::~player()
{
// insert your code here
}
void player::Init()
{
 x = 9;
 y = 9;
 speed = 1;
 dir = 0;
};
void player::Draw(BITMAP*buffer,int c1,int c2,int c3)
{
 textprintf(buffer, font, x-30, y-10, makecol(255,0,0), "x: %03i", x);
 textprintf(buffer, font, x-30, y-20, makecol(255,0,0), "y: %03i", y);
 rectfill(buffer,x,y,x + 5,y + 5,makecol(c1,c2,c3));
};
void player::Input()
{
 //Input
 if(KLeft && x >= 0)
 {
         dir = 'l'; 
 }
 else if(KRIGHT && x <= SW)
 {
       dir = 'r';      
 }
 else if(KUP && y >= 0)
 {
       dir = 'u';      
 }
 else if(KDOWN && y <= SH)
 {
       dir = 'd';      
 }
 else
 {
       dir = 'e';
 }
 //Output

 if(dir == 'l')
 {
     x += -speed;       
 }
 if(dir == 'r')
 {
   x  += speed;   
 }
 if(dir == 'u')
 {
     y += -speed;       
 }
 if(dir == 'd')
 {
   y  += speed;   
 }

};
void player::Update()
{
 player::Input();

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:59:10.927

错误消息清楚地告诉您出了什么问题。

在这一行：

```
if(&y2 < j*BlockSize) 
```

因为`y2`是一个整数`&y2`产生一个指针并且`j*BlockSize`是一个整数。因此，编译器告诉您比较整数和指针是没有意义的。只需放下`&`：

```
if(y2 < j*BlockSize) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:59:18.827

在错误行，您可能指的是`y2 < j*BlockSize`而不是`&y2 < j*BlockSize`. 您正在将整数与变量 y 的地址（即指针）进行比较。这正是编译器所抱怨的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T22:00:25.890

编译器告诉你你需要知道的每一件事，在那一行`&y2`获取地址，`y2`你正在将它与它进行比较，`j*BlockSize`这是一个整数，编译器说你为什么要将地址与数字进行比较？

老实说，我没有阅读您的代码，也不知道您在那里做什么，所以如果您想比较 的值`y2`与`j*BlockSize`只是 do it as `y2 < j*BlockSize`，在 C++ 中引用不需要访问器，您可以正常读取/写入它们的值价值

# css - 如何正确覆盖外部文件中的 CSS

> ID：13077890
> 
> 赞同：0
> 
> 时间：2012-10-25T21:53:38.600
> 
> 标签：css, xhtml

有很多问题看起来像这个，但没有一个真正回答我的问题。

我的情况如下：

我需要更改很多元素的显示，以便它们在页面中正确显示并且语义正确。
我有点有js版本和nojs版本。有些元素只有在用户使用 js 时才能看到，而有些元素只有在 js 关闭时才能看到。

我有具有很好特异性的选择器（不要争论，它们在上下文中确实有意义，我只是在这里更改了类，以免放开原始代码所在的位置）

```
.imagesContainer div.imageContainer  .imagedata 
```

然后这个元素意味着当用户没有js时隐藏。所以我做了类似的事情：

```
.nojs{
    display:none;
} 
```

我在与 HTML 相同的文件中尝试了它，期望优先级是外部文件 < 相同文件 < 内联。但似乎现在是外部文件=相同文件<内联（外部文件和内联之间没有优先级）。

处理这个问题的最佳方法是什么？

更改我展示的第一个选择器的特异性不是解决方案。
我也不想将 CSS 内联。这很痛苦，在标记中占用了太多空间并使其更难阅读。
我也不想使用！important。这被认为不是解决此类问题的正确方法，我同意。
我正在使用 XHTML，所以没有在 DTD 中定义 noscript 标签（我需要根据我所遵守的规则使用 XHTML），

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:03:21.190

好吧，如果您`display`已经设置了一个属性，`.imagesContainer div.imageContainer .imagedata`那么由于特定性，简单地添加`nojs`到元素不会被覆盖。你必须：

`.imagesContainer div.imageContainer .imagedata.nojs { display: none; }`

或者`nojs`添加任何元素。

如果我是你，我会完全扭转这一点。对于没有启用 js 时不显示的元素，我会将它们设置为`display: none`默认值。然后，对于头部中的任何样式/链接或其他脚本，我将使用一些 js 来`js`分配给`body`or`html`元素。然后在 css 中，我将更改显示属性以显示`.js <the rest of the selector>`要显示的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T07:12:09.957

正如@prodigitalson 正确指出的那样，您的`nojs`课程总是没有您详细的课程定义那么具体。

据我所知，`!important`这确实是实现您想要做的事情的唯一方法，而无需创建大量更具体的类定义。

可以说，这样的案例`!important`是最初设计的，并且完全可以使用它。`!important`当它被滥用来覆盖特异性时会变得有问题，因为您无法弄清楚如何以“正确”的方式达到所需的特异性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T19:20:24.117

所以......如何解决这个问题......这并不容易，但在 w3c 和你的答案的帮助下，我能够得到正确的结果。

在尝试了多种可能解决此问题的路径（包括以编程方式添加样式或链接标签）之后，我得到了我需要的答案。
为了以最简单的方式执行此操作，您至少需要有 2 个样式表。一个用于这个系统，另一个作为您的“常规”样式表（包含页面所有 CSS 的那个）。

然后将 .nojs 类放置到您希望仅在用户不使用 js 时出现的所有 (x)HTML 元素，而 .js 用于您希望仅在用户使用 js 时出现的元素。

将以下内容放在此系统的样式表中：

```
.js{
    display:none !important;
} 
```

然后使用这个js代码在完成后执行。最好在调度 DOMContentLoaded 事件时。

```
var jsNojsStyleSheet = document.styleSheets[1]; // change this index depending on your needs
if(jsNojsStyleSheet.deleteRule){
    jsNojsStyleSheet.deleteRule(0);
    jsNojsStyleSheet.insertRule('.nojs{ display:none !important; }', 0);
}else{
    // IE8 has his own way of dealing with this situation
    jsNojsStyleSheet.removeRule(0);
    jsNojsStyleSheet.addRule('.nojs', 'display:none !important', 0);
} 
```

不要忘记根据您的需要更改列表中的索引。

现在你可以去测试一下了。
这应该删除 .js 规则并插入 .nojs 规则，替换之前的规则。

对我来说，这是完成这项工作的最干净的方式。欢迎对此技术提出任何批评或改进。

注意：IE 需要你做一些事情来刷新页面的解析。我使用了一个代码，可以两次切换复选框的选中状态，发挥创意并找到自己的解决方案。

编辑：我还发现这要快得多，并且不像其他使用 jQuery 和其他技术来解决这个问题的技术那样没有轻弹。所有更改都是使用浏览器自己适应 CSS 更改时的更改进行的，而不是逐个更改每个 HTML 节点。

该系统适用于 IE8，但不确定 IE7。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T07:30:34.083

有关计算特异性的确切方法，请参见[http://www.w3.org/TR/CSS2/cascade.html#specificity](http://www.w3.org/TR/CSS2/cascade.html#specificity)。

根据本节：

```
count 1 if the declaration is from is a 'style' attribute rather than a rule with a selector, 0 otherwise (= a) (In HTML, values of an element's "style" attribute are style sheet rules. These rules have no selectors, so a=1, b=0, c=0, and d=0.)
count the number of ID attributes in the selector (= b)
count the number of other attributes and pseudo-classes in the selector (= c)
count the number of element names and pseudo-elements in the selector (= d) 
```

您对`.imagesContainer div.imageContainer .imagedata`0031 的特殊性（0 没有内联，0 没有 id，3 个类，1 个元素）。您必须超过此数字才能覆盖显示。

假设您的`body`标签看起来像这样，`<body id="foobar">`这应该会覆盖示例元素上的显示设置：

```
#foobar .nojs { display: none; } 
```

因为它的特殊性是 0110 并且 110 大于 31。（0 没有内联，1 id，1 类，0 个元素）

（并不是说我必须提倡 id'ing 你的 body 标签，这只是选择器嵌套的一个例子，它会覆盖你给的 css 选择器）

编辑：查看这个小提琴以获得更具体的解决方案：http: [//jsfiddle.net/KAuAx/](http://jsfiddle.net/KAuAx/)

# java - Java 电子邮件地址验证

> ID：13077897
> 
> 赞同：-1
> 
> 时间：2012-10-25T21:54:20.907
> 
> 标签：java, validation, email

我将如何编写一个程序，该程序接受从键盘输入的电子邮件地址，然后循环查找@符号以查看它在打印之前是否正好有一个@字符，“有效”，如果电子邮件地址有一个@符号并且“无效”，如果电子邮件地址有多个@？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T21:56:35.300

使用官方的 java email 包是最简单的：

```
public static boolean isValidEmailAddress(String email) {
   boolean result = true;
   try {
      InternetAddress emailAddr = new InternetAddress(email);
      emailAddr.validate();
   } catch (AddressException ex) {
      result = false;
   }
   return result;
} 
```

（编辑）或简化：

```
public static boolean isValidEmailAddress(String email) {
   try {
      new InternetAddress(email).validate();
   } catch (AddressException ex) {
      return false;
   }
   return true;
} 
```

# android - 开始使用 Android 片段

> ID：13077899
> 
> 赞同：0
> 
> 时间：2012-10-25T21:54:43.090
> 
> 标签：android, fragment, tablet

我正在尝试开发一个由主要由片段组成的 UI 组成的平板电脑应用程序。

我没有使用片段的经验，而且我只是一名学生，所以我的编程知识非常有限，但我快到了！

基本上我只是在寻找任何有使用片段经验的人的建议，如果有人知道任何好的在线资源或教程（我试过谷歌但没有找到那么多！）如果你能发布它们，我将不胜感激。

我想我发现很难理解的一件事是你如何实例化一个片段，你需要创建一个 Main Activity 类，然后创建片段对象并定位它们还是什么？...

非常感谢！

# ruby-on-rails - factory_girl 4.1 中的 has_and_belongs_to_many 关联

> ID：13077902
> 
> 赞同：4
> 
> 时间：2012-10-25T21:54:46.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot

我是 factory_girl 的新手，并试图弄清楚如何为以下模型有效地生成工厂：

```
class Company < ActiveRecord::Base
    has_and_belongs_to_many :tags
end

class Tags < ActiveRecord::Base
    has_and_belongs_to_many :companies

    validates :type , :inclusion => { :in => %w(market location) } 
end 
```

我已经查看了 StackOverflow 上的先前答案（包括[这个](https://stackoverflow.com/questions/1484374/how-to-create-has-and-belongs-to-many-associations-in-factory-girl)答案），但是其中大多数已经过时和/或对问题没有正确的答案。有没有人可以帮助用 Factorygirl 为这两个对象定义工厂？

**更新**

到目前为止，这是我想出的

```
FactoryGirl.define do
factory :tag do
    id  448
        trait :market do
        type "market"
    end
    trait :location do
        type "location"
    end
    name "software"
end

factory :company do
    id  1234
    name "Apple Inc."
    factory :company_with_tags do
        #setting the default # of tags for companies
        ignore do
            tag_count   2
        end

            after(:create) do |company , evaluator|
                FactoryGirl.create_list(:tag , evaluator.tag_count , company: company)
            end 
    end
end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T03:18:07.187

我认为问题在于关联名称指定不正确。A`Tag`有很多公司，而不是一个，所以：

```
after(:create) do |company , evaluator|
  FactoryGirl.create_list(:tag , evaluator.tag_count , companies: [company])
end 
```

作为旁注，您要避免`type`用作列名，除非您尝试建立多态关系。

# c++ - 在 Switch 案例中标记字符串

> ID：13077903
> 
> 赞同：0
> 
> 时间：2012-10-25T21:54:53.957
> 
> 标签：c++, boost-tokenizer

我正在基于分隔符（使用 Boost Tokenizer）对字符串进行标记，然后根据状态变量的值对标记进行处理。

我遇到的问题：其中一种情况需要进一步标记字符串。这会导致错误，因为在 case 中声明了 tok1 和 token 迭代器变量。我试过在开关之外声明它们，然后在机箱内分配它们，但这不起作用。

有谁知道我可以如何完成这项工作，或者是否有更好的方法来进一步标记案例内的字符串？谢谢！

下面的示例代码：

```
 boost::char_separator<char> sep(TOKEN_DELIMETER_NEWLINE);                  
 boost::char_separator<char> sep2(TOKEN_DELIMETER_SPACE);                  
 tokenizer tok(_text, sep);

while(lineToken!=tok.end())
{
    switch(state)
    {
        case FIRST_STATE:

            lineToken++;
            tokenizer tok1(*lineToken, sep2);
            tokenizer::iterator token=tok1.begin();  

        break;
    // Other Cases follow...
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:52:07.213

填补空白后，我编译了以下内容：

```
std::string _text1 = "The rain,In Spain,Lies Mainly,On the plain";

boost::char_separator<char> sep(",");                  
boost::char_separator<char> sep2(" ");                  
boost::tokenizer<boost::char_separator<char>> tok(_text1,sep);
boost::tokenizer<boost::char_separator<char>>::iterator lineToken = tok.begin();
unsigned int state = 0;

while(lineToken!=tok.end())
{
    switch(state)
    {
    case 0:
     lineToken++;
     boost::tokenizer<boost::char_separator<char>> tok1(*lineToken, sep2);
     boost::tokenizer<boost::char_separator<char>>::iterator token=tok1.begin();  

    break;
    // Other Cases follow...
}
} 
```

哪个对我有用-它可以编译和标记化....请注意，我的示例与您的示例不同，因为迭代器的增量将在结束前导致崩溃，因为我不进行任何检查.....

也许您没有使用模板或错过了它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:11:05.293

尝试将“{}”放在新的堆栈变量周围，就像这样，

```
 case FIRST_STATE: 
```

{

```
 lineToken++;
        tokenizer tok1(*lineToken, sep2);
        tokenizer::iterator token=tok1.begin(); 
```

}

```
 break; 
```

# php - PHP：如何创建 html 容器助手？

> ID：13077905
> 
> 赞同：0
> 
> 时间：2012-10-25T21:54:57.667
> 
> 标签：php, html

例如，我有一个具有非常特定格式的列表，我想一遍又一遍地放入不同的内容。

所以我可能有一个功能：

```
<?
function fancy_container (contents_array) {
  <?
    <ul>
      <? for($contents_array as $content) { ?>
        <li class='special'><? echo $content ?><div class='other-specials'></div></li>
      <? } ?>
    </ul>
  ?>
}
?> 
```

这行得通，但我想这样称呼它：

```
<?
  fancy_container(array(?>
    <div class='whatever'>hi there</div>
    <div class='whatever'>hi there</div>
    <div class='whatever'>hi there</div>
  <?), ?>
    <div class='other-junk'>hiya</div>
    <div class='other-junk'>hiya</div>
    <div class='other-junk'>hiya</div>
  <?))
?> 
```

我想出了如何使用heredoc来做到这一点，但这似乎有点讨厌。我会以错误的方式解决这个问题吗？我不是 php 人，所以我不熟悉正常的做事方式或限制。我知道如何使用 ruby​​ yield 来做到这一点，但在 php 中不知道。

我只想将 html 内容注入一个容器（或多个容器）中，并且我想让 html 成为 html，而不是 heredoc 文本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:58:24.560

你为什么不把 div 标签放在那里，而不是放在你的 php 函数中？如果你必须有受 PHP 影响的样式，我推荐一个 PHP 函数，它会吐出一个类`<div class="<?php echo getClass();?>">..content..</div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:52:55.620

就像 Martin Lyne 提到的那样，这有点倒退，我猜这是一种奇怪的做事方式。可能更是如此，因为您故意不显示最终使用的全部范围。这是您的代码清理并变得更加理智。您有语法错误，并且 PHP 中不允许使用一些东西，例如您调用函数的方式。

```
<?php

function fancy_container ($contents_array) {

    if (!is_array($contents_array) || empty($contents_array)) {
        return '';
    }

    $output = '';
    $output .= '<ul>'.PHP_EOL;
    foreach ($contents_array as $content) {
        $output .= '<li class="special">'.$content.'<div class="other-specials"></div></li>'.PHP_EOL;
    }
    $output .= '</ul>'.PHP_EOL;

    return $output;

}

$contents = array();

ob_start();
?>

    <div class="whatever">hi there</div>
    <div class="whatever">hi there</div>
    <div class="whatever">hi there</div>

<?php

$contents[] = ob_get_contents();
ob_end_clean();
    ob_start();
?>

    <div class="other-junk">hiya</div>
    <div class="other-junk">hiya</div>
    <div class="other-junk">hiya</div>

<?php
$contents[] = ob_get_contents();

ob_end_clean();

echo fancy_container($contents);

?> 
```

## 输出标记

```
<ul>
<li class="special">
    <div class="whatever">hi there</div>
    <div class="whatever">hi there</div>
    <div class="whatever">hi there</div>

<div class="other-specials"></div></li>
<li class="special">    
    <div class="other-junk">hiya</div>
    <div class="other-junk">hiya</div>
    <div class="other-junk">hiya</div>

<div class="other-specials"></div></li>
</ul> 
```

# gmail - POP3、IMAP 和 Exchange 有什么区别？

> ID：13077907
> 
> 赞同：2
> 
> 时间：2012-10-25T21:55:09.613
> 
> 标签：gmail, imap, exchange-server, pop3

我正在尝试在索尼 xperia sl 上设置 Gmail 帐户，它要求我在 POP3、IMAP 或 Exchange 之间进行选择。我应该使用哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:04:23.190

这是 OT，我已经投票结束。无论如何，这里是一个扩展。（注意这些天在 Wikipedia 上可以找到多少通用计算信息！）

[电子邮件客户端](http://en.wikipedia.org/wiki/Email_client)是用于连接电子邮件服务器（例如 gmail）的电子邮件程序（例如访问 Sony Xperia 中的电子邮件的程序）。[POP3](http://en.wikipedia.org/wiki/Post_Office_Protocol)、[IMAP](http://en.wikipedia.org/wiki/IMAP)和 Exchange（主要与 Outlook 一起使用）是用于电子邮件客户端和电子邮件服务器进行通信的 3 种不同协议。

Gmail 仅支持 POP3 和 IMAP，并且必须先“激活”这些。有关如何启用 Gmail 访问和配置电子邮件客户端的说明，请参阅[Gmail：IMAP 和 POP3 入门。](http://support.google.com/mail/bin/static.py?hl=en&page=ts.cs&ts=1668960&from=12103&rd=1)

# ios - 对于 iOS，一个应用程序何时会使用多个窗口？

> ID：13077908
> 
> 赞同：1
> 
> 时间：2012-10-25T21:55:14.483
> 
> 标签：ios, cocoa-touch, uiview

在 iOS 的视图编程指南中，它声明“每个 iOS 应用程序至少需要一个窗口——一个 UIWindow 类的实例——而且有些可能包含多个窗口。”

有哪些示例应用程序需要多个窗口？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:03:18.527

需要将视频输出到第二个屏幕的应用程序可能会使用多个窗口。 [在这里](https://stackoverflow.com/questions/2660473/using-uiscreen-to-drive-a-vga-display-doesnt-seem-to-show-the-uiwindow)，您有关于该特定主题的问题。

您也可以使用多个窗口来实现其他目标，但 Apple 不建议这样做。一般来说，如果您发现需要 2 个或更多窗口，我建议您的方法有问题。

我在一个测试项目中使用了 2 个窗口来集成 cocos2d 和 uikit，代码非常干净，想法是在窗口之间切换，根据需要使用可见性和关键窗口。它有效，但有时在将应用程序发送到后台时，由于某种神奇的原因，活动的关键窗口会变得不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:05:54.480

Afaik 唯一需要多个窗口的情况是，如果您将另一个屏幕（如电视）连接到您的设备。在这种情况下，您可以为第二个屏幕提供完全独立的 UI。当您将另一个屏幕连接到设备时，iPad 上的 Keynotes 应用程序会执行此操作。

您可以注册 UIScreenDidConnectNotification 并像这样处理它：

```
- (void)screenDidChange:(NSNotification *)notification
{
    if ([UIScreen screens] count] > 1)
    {
        UIScreen *extScreen = [[UIScreen screens] objectAtIndex:1];
        UIWindow *extWindow = [[UIWindow alloc] initWithFrame:[extScreen bounds]];
        //add some subviews to the window
        extWindow.screen = extScreen;
        [extWindow makeKeyAndVisible];
    }
} 
```

# jquery - jquery/javascript 冲突

> ID：13077911
> 
> 赞同：0
> 
> 时间：2012-10-25T21:55:31.757
> 
> 标签：jquery, menu, conflict

只是为了得到它，我对 jquery/javascript 一无所知。我唯一知道怎么做的就是将它安装到我的站点中。这里说的是我的问题。

我的主页上有超大的完整背景幻灯片，可以旋转图像。但是，当我安装这个特定的 jquery 菜单时，它会停止播放幻灯片。

我该如何解决这个问题才能使这两个功能很好地结合在一起？

你可以在这里查看我的网站：http: [//test.theflyphoto.com](http://test.theflyphoto.com)

# entity-framework - 使用实体框架不考虑更新到数据库

> ID：13077918
> 
> 赞同：0
> 
> 时间：2012-10-25T21:55:49.340
> 
> 标签：entity-framework

以下代码不会为找到的记录更新我的数据库，并且在查看 Azure SQL Profiler 时，我只看到此更新语句。

```
update [dbo].[Identities]
set @p = 0
where ([Id] = @0) 
```

和代码：

```
using (var db = new context())
{
    var member = db.Identities.Include("Member").Include("Roles")
                   .FirstOrDefault(i => id.Value == i.nameidentifier && i.identityprovider == provider.Value);

    if (member != null)
    {
        member.LastLoggedIn = DateTime.UtcNow;
        db.SaveChanges();
    }
} 
```

# zend-framework2 - Zend Framework 2，Zend_Mail：如何发送带有 html 和 text 部分的电子邮件？

> ID：13077920
> 
> 赞同：4
> 
> 时间：2012-10-25T21:55:54.747
> 
> 标签：zend-framework2

```
$html = new MimePart($email->getBodyHtml());
$html->type = 'text/html';
    ...
$text = new MimePart($email->getBodyText());
$text->type = 'text/plain';
    ...
$mimeParts = array($html, $text);
    ...
$body->setParts($mimeParts); 
```

这很好用，但我收到的电子邮件同时包含 html 和文本部分 - 我的意思是它们都显示了。

Gmail 首先显示 HTML，然后在此处显示纯文本部分。显然，我希望只显示 HTML 部分，仅当 HTML 在电子邮件客户端中不可用时才使用文本部分。

干杯，安德鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:39:25.950

[Rob Allen 的开发笔记](http://akrabat.com/zend-framework-2/sending-an-html-with-text-alternative-email-with-zendmail/)

很简单……当你知道怎么做的时候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:24:05.517

该文档仅提及`http://framework.zend.com/manual/2.0/en/modules/zend.mail.introduction.html`. 没有`setParts`方法。

# ios - 如何将对象从一个视图发送到另一个视图？

> ID：13077922
> 
> 赞同：0
> 
> 时间：2012-10-25T21:56:04.733
> 
> 标签：ios, xcode, saslidemenu

我已经为侧边菜单实现[了 SASlideMenu](http://www.cocoacontrols.com/platforms/ios/controls/saslidemenu)，除了一件事之外，一切都很出色。我不知道如何发送对象。

这是正在发生的切换视图：

```
-(void) switchToContentViewController:(UIViewController*) content{

    CGRect bounds = self.view.bounds;
    if (selectedContent) {

        //Animate out the currently selected UIViewController
        [UIView animateWithDuration:kSlideOutInterval delay:0.0 options:UIViewAnimationCurveEaseInOut animations:^{
            selectedContent.view.frame = CGRectMake(bounds.size.width,0,bounds.size.width,bounds.size.height);
        } completion:
         ^(BOOL completed) {

             [selectedContent willMoveToParentViewController:nil];
             [selectedContent.view removeFromSuperview];
             [selectedContent removeFromParentViewController];

             content.view.frame = CGRectMake(bounds.size.width,0,0,bounds.size.height);
             [self addChildViewController:content];
             [self.view addSubview:content.view];
             [UIView animateWithDuration:kSlideInInterval delay:0.0 options:UIViewAnimationCurveEaseInOut animations:^{
                 content.view.frame = CGRectMake(0,0,bounds.size.width,bounds.size.height);

             } completion:^(BOOL completed){
                 selectedContent = content;
                 [content didMoveToParentViewController:self];
                 [self.shield removeFromSuperview];
             }];
         }];
    }else{
        [self addChildViewController:content];
        [self.view addSubview:content.view];
        content.view.frame = CGRectMake(0,0,bounds.size.width,bounds.size.height);
        selectedContent = content;
        [self.shield removeFromSuperview];
        [content didMoveToParentViewController:self];
    }
} 
```

我想要的是在这里获取标识符（NSString）（我会知道如何解决），然后发送到这个将打开的新视图控制器。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:02:15.950

您可以为“内容”视图控制器使用 UIViewController 的子类，而不是使用现有的 UIViewController 类。在这个子类上，您可以添加一个

```
@property (strong, nonatomic) NSString *stringForContentView; 
```

然后，就在您将“内容”视图控制器添加为当前视图控制器的子项的行上方，

```
content.stringForContentView = @"A string that you already have"; 
```

# javascript - 如何在javascript中将字符串转换为数学运算符

> ID：13077923
> 
> 赞同：55
> 
> 时间：2012-10-25T21:56:16.200
> 
> 标签：javascript

如果我有一个数学方程的字符串，我想拆分它然后计算它。我知道我可以使用 eval() 函数来执行此操作，但我很感兴趣是否有其他方法可以执行此操作 - 特别是首先拆分字符串。所以我有类似的东西

```
var myString = "225 + 15 - 10"
var newString = myString.split(" "); 
```

这会将 myString 变成一个数组：

```
["225", "+", "15", "-", "10"]; 
```

我的下一个任务是将所有奇数字符串转换为整数，我想我可以使用 parseInt(); 为了。我的问题是，如何将“+”和“-”变成实际的算术运算符？所以最后我留下了一个我可以计算的数学表达式？

这可能吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-10-25T21:59:22.210

```
var math_it_up = {
    '+': function (x, y) { return x + y },
    '-': function (x, y) { return x - y }
}​​​​​​​;

math_it_up['+'](1, 2) == 3; 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2014-10-24T15:19:17.620

Oliver Morgan 在评论中提到了JavaScript 的`eval`功能，我只是想说明如何将`eval`其用作解决问题的方法。

该`eval`函数接受一个字符串，然后返回该字符串的值，该字符串被视为数学运算。例如，

```
eval("3 + 4") 
```

将返回 7 作为 3 + 4 = 7。

这对您的情况很有帮助，因为您有一个字符串数组，您希望将其视为数学运算符和它们所代表的操作数。

```
myArray = ["225", "+", "15", "-", "10"]; 
```

无需将数组中的任何字符串转换为整数或运算符，您就可以编写

```
eval(myArray[0] + myArray[1] + myArray[2]); 
```

这将转化为

```
eval("225" + "+" + "15"); 
```

这将转化为

```
eval("225 + 15"); 
```

这将返回 240，即 225 与 15 相加的值。

或者更通用：

```
eval(myArray.join(' ')); 
```

这将转化为

```
eval("225 + 15 - 10"); 
```

这将返回 230，将 15 加到 225 并减去 10 的值。因此，您可以看到，在您的情况下，可以跳过将数组中的字符串转换为整数和运算符，正如 Oliver Morgan 所说，只是`eval`它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:00:04.800

考虑将`isNaN(Number(array[x]))`and a`switch`用于不满足条件的任何内容。

# python - 替换字符串中的项目，Python

> ID：13077925
> 
> 赞同：0
> 
> 时间：2012-10-25T21:56:29.913
> 
> 标签：python, string, replace

我正在尝试在 python 中定义一个函数来替换字符串中的某些项目。我的字符串是一个包含度分秒的字符串（即 216-56-12.02）

我想替换破折号以便获得正确的符号，所以我的字符串看起来像 216° 56' 12.02"

我试过这个：

```
def FindLabel ([Direction]):
  s = [Direction]
  s = s.replace("-","° ",1) #replace first instancwe of the dash in the original string
  s = s.replace("-","' ") # replace the remaining dash from the last string

  s = s + """ #add in the minute sign at the end

  return s 
```

这似乎不起作用。我不确定出了什么问题。欢迎任何建议。

干杯，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:01:06.670

老实说，我不会为更换而烦恼。只是`.split()`它：

```
def find_label(direction):
    degrees, hours, minutes = direction.split('-')

    return u'{}° {}\' {}"'.format(degrees, hours, minutes) 
```

如果你愿意，你可以进一步压缩它：

```
def find_label(direction):
    return u'{}° {}\' {}"'.format(*direction.split('-')) 
```

如果您想修复当前代码，请参阅我的评论：

```
def FindLabel(Direction):  # Not sure why you put square brackets here
  s = Direction            # Or here
  s = s.replace("-",u"° ",1)
  s = s.replace("-","' ")

  s += '"'  # You have to use single quotes or escape the double quote: `"\""`

  return s 
```

您可能还必须`utf-8`使用注释在 Python 文件的顶部指定编码：

```
# This Python file uses the following encoding: utf-8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:00:32.987

这就是我通过拆分成一个列表然后重新加入来做到这一点的方式：

```
s = "{}° {}' {}\"".format(*s.split("-")) 
```

# mysql - MySql 例程的问题

> ID：13077934
> 
> 赞同：0
> 
> 时间：2012-10-25T21:57:21.923
> 
> 标签：mysql, routines

我在制作 MySql 例程时遇到问题。

这是代码：

```
DELIMITER '$$';
CREATE PROCEDURE User.Login(IN UserName CHAR(32), IN PWord CHAR(32))
BEGIN
Select `userID`, `userType`, `userMainEmail`, `groupID`
    From `at_users`
    Where `userName` = UserName And `userPass` = PWord
    LIMIT 1
FOR UPDATE;

    Update `at_users`
    Set `lastLoginAt` = now()
    Where `userName` = UserName And `userPass` = PWord;
END$$ 
```

它应该做的是一个简单的登录任务，几乎无处不在......获取用户记录，然后使用 now() 更新表

我正在创建这个是：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your     MySQL server version for the right syntax to use near '' at line 12 
```

第 12 行是 END$$ 之前的行

是的，所有字段和表格都存在。:)

编辑：新代码

```
DELIMITER //;
CREATE PROCEDURE User.Login(IN UserName CHAR(32), IN PWord CHAR(32))
BEGIN
Select `userID`, `userType`, `userMainEmail`, `groupID`
    From `at_users`
    Where `userName` = UserName And `userPass` = PWord
    LIMIT 1
FOR UPDATE;

    Update `at_users`
    Set `lastLoginAt` = now()
    Where `userName` = UserName And `userPass` = PWord;
END//
DELIMITER ; 
```

在登录并选择要使用的正确数据库后，我正在从命令行尝试这个确切的代码。

在最后一行 'DELIMITER ;' 之后 什么都没有发生，我留在 -> 线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:01:16.760

知道了。

这是我最终不得不使用的代码：

```
DELIMITER //
CREATE PROCEDURE UserLogin(IN UserName CHAR(32), IN PWord CHAR(32))
    BEGIN
        Select `userID`, `userType`, `userMainEmail`, `groupID`
        From `at_users`
        Where `userName` = UserName And `userPass` = PWord
        LIMIT 1
        FOR UPDATE;

        Update `at_users`
        Set `lastLoginAt` = now()
        Where `userName` = UserName And `userPass` = PWord;
    END//
DELIMITER ; 
```

# java - Android中的倒数计时器不同步？

> ID：13077935
> 
> 赞同：0
> 
> 时间：2012-10-25T21:57:31.290
> 
> 标签：java, android, calendar, count

我正在尝试制作倒数计时器。我想出了这段代码，最初我认为它有效。但是，当我运行该应用程序时，发生了两件事，我不知道如何解决...

1.  它不同步，虽然它是系统时间和日期，它说只剩下 60 天而不是 61 天，而我知道它是 61！
2.  如果我关闭应用程序并返回它会重置计数器...

对此的任何帮助将不胜感激，它不是针对任何特定的个人项目。

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final TextView dateBx = (TextView) findViewById(R.id.textView1);
        final TextView mTextField = (TextView) findViewById(R.id.mTextField);
        final TextView minBx = (TextView) findViewById(R.id.minBx);
        final TextView hourBx = (TextView) findViewById(R.id.hourBx);

        //set todays date
        DateFormat dateFormat1 = new SimpleDateFormat("dd/MM/yyyy");
        Calendar cal1 = Calendar.getInstance();
        //target date
        DateFormat dateFormat2 = new SimpleDateFormat("dd/MM/yyyy");
        Calendar cal2 = Calendar.getInstance();
        cal2.set(2012,11,25);
        //set maths
        long time1 = cal1.getTimeInMillis();
        long time2 = cal2.getTimeInMillis();
        //difference variable
        long diff = time2 - time1;
        //equations
        long diffSec = diff / 1000;
        long dMins = diff / (60 * 1000);
        long dHour = diff / (60 * 60 * 1000);
        long dDay = diff / (24 * 60 * 60 * 1000);

       new CountDownTimer(diff, 1000) 
       {

             public void onTick(long millisUntilFinished) 
             {
                 mTextField.setText("Seconds remaining: " + millisUntilFinished / 1000);
                 dateBx.setText("Days remaining: " + millisUntilFinished / (24 * 60 * 60 * 1000));
                 minBx.setText("Minutes remaining: " + millisUntilFinished / (60 * 1000));
                 hourBx.setText("hours remaining: " + millisUntilFinished / (60 * 60 * 1000));
             }

             public void onFinish() {
                 mTextField.setText("done!");
             }
          }.start();

} 
```

我的代码是我在 java 和 android 中学到的一些东西的组合，如果你想出更好的方法来一起做，请告诉我:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:04:09.977

Android 不是实时操作系统，因此您可以计算出您的计时器将精确地每 1000 毫秒运行一次。

最实用的方法是，对于每次调用，获取当前日期，获取目标日期，并重新计算剩余的天数/小时/分钟/秒（就像您在应用程序开始时所做的那样）。

在关闭/打开您的应用程序时，这也将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T01:16:35.590

这是一个如何同步 countDownTimer 的示例。

（因为“onTick()”根据 Android 不准确）

诀窍是只使用“onFinish()”并使用接口启动一个新计时器。

做一个 countDownTimer 的扩展类：

```
public class oneShotTimer extends CountDownTimer {
    TickListener invokeOnFinish;    // Interface

public oneShotTimer (Context parent, int tickTime, TickListener contextPointer) {
    super(tickTime, tickTime);          // DEBUG: (/60)
....
} 
```

在 OnFinish() 处：

```
 public void onFinish() {
     invokeOnFinish.restartTimer();    
 }
 public void onTick() {
     Log.e("Timer", "Not suppose to happen");
 } 
```

定义一个接口：

```
public interface TickListener {
    public void restartTimer();
} 
```

现在在父对象执行以下操作：

1) 在启动定时器之前，在 MillinSecond -> "startTime" 中获取时间；

2）为“TickListener::restartTimer”创建方法（我写了psadu代码）

```
@Override
public void restartTimer() {
    // check if timer is done (make your own variable to monitor that)

    // get the currentTime in MilliSecond

    // calc TickTime , if we know that 30 tick are already counted 
    // there for ((30+1) x wantedTickTime) give us the target time for the next tick.
    // TickTime = (31 x wantedTickTime) - (currentTime - startTime)  
    // for example, we want 1sec ticks, after 30 ticks it finished at 30.2 sec
    // => (31 x 1) - (40.2 - 10)  = 0.8 is the time we need to re start timer.

    // re-run a new Timer with the new TickTime 
} 
```

现在让我们看看 Java 垃圾收集将如何处理它。

# python - 将海量文本转换为 utf-8

> ID：13077939
> 
> 赞同：4
> 
> 时间：2012-10-25T21:57:36.520
> 
> 标签：python, utf-8

我正在接收产品信息的 xml 提要。信息为英文，但未编码`utf-8`（智能引号、版权符号等）。要处理信息，我需要将其转换为`utf-8`.

我试过做以下变化：

```
u'%s' % data
codecs.open(..., 'utf-8')
unicode(data) 
```

但是对于我尝试过的每一个，我都会得到一个`UnicodeDecodeError`（各种）。

我将如何将所有这些文本转换为`utf-8`？

**更新**

感谢您的帮助，这是最终的工作：

```
encoded_data = data.decode('ISO 8859-1').encode('utf-8').replace('Â','') 
```

我不确定它`Â`来自哪里，但我看到了一些版权符号旁边的那些。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T22:04:35.933

为了将其转换为 UTF-8，您需要知道它的编码。根据您的描述，我猜它是 Latin-1 变体之一，ISO 8859-1 或 Windows-1252。如果是这种情况，那么您可以将其转换为 UTF-8，如下所示：

```
data = 'Copyright \xA9 2012'  # \xA9 is the copyright symbol in Windows-1252

# Convert from Windows-1252 to UTF-8
encoded = data.decode('Windows-1252').encode('utf-8')

# Prints "Copyright © 2012"
print encoded 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T22:54:40.130

[您可以让chardet](http://pypi.python.org/pypi/chardet)代您猜测，而不是猜测编码：

```
import chardet

def read(filename, encoding=None, min_confidence=0.5):
    """Return the contents of 'filename' as unicode, or some encoding."""
    with open(filename, "rb") as f:
        text = f.read()
    guess = chardet.detect(text)
    if guess["confidence"] < min_confidence:
        raise UnicodeDecodeError
    text = unicode(text, guess["encoding"])
    if encoding is not None:
        text = text.encode(encoding)
    return text 
```

# c++ - 创建 SolidColorBrush 时出错

> ID：13077942
> 
> 赞同：1
> 
> 时间：2012-10-25T21:57:41.650
> 
> 标签：c++, direct2d

在我的代码中，我试图像这样创建一个 Direct2D SolidColorBrush

```
ID2D1SolidColorBrush *pBgBrush;
D2D1::ColorF color = D2D1::ColorF(0x9ACD32, 1.0f);
pRenderTarget->CreateSolidColorBrush(color, &pBgBrush); 
```

当函数被调用时，头文件中`CreateSolidColorBrush`会抛出一个错误`d2d1.h`

```
First-chance exception at 0x012519C0 in 2012_10_22__WICBitmapRenderTargetExploration.exe:
0xC0000005: 
Access violation reading location 0x00000000. 
```

这是什么原因造成的？我如何解决它？

# emacs - 我编写的 Emacs 函数上的“错误类型参数”

> ID：13077943
> 
> 赞同：3
> 
> 时间：2012-10-25T21:57:42.740
> 
> 标签：emacs, elisp

我希望我的 tab 键执行以下操作：

*   如果我在迷你缓冲区中，请使用单词完成。
*   否则，如果选择了一个区域，则缩进它。
*   否则，在该点缩进该行（使用制表符到制表位）。

这是代码，其中一些是基于我在 Internet 上其他地方找到的片段：

```
(defun my-tab ()
  "If region is selected, indent it and keep it selected, else indent current line."
  (interactive)
       (if (use-region-p)
           (increase-left-margin (region-beginning) (region-end) nil)
           (tab-to-tab-stop))
        (setq deactivate-mark nil))
(defun my-untab ()
  "If region is selected, unindent it and keep it selected, else unindent current line."
  (interactive)
       (if (use-region-p)
           (decrease-left-margin (region-beginning) (region-end) nil)
         (indent-rigidly (line-beginning-position) (line-end-position) (- tab-width)))
        (setq deactivate-mark nil))
;; AJF: wrote this one myself
(defun ajf-tab-fun ()
   (if (minibufferp)
     (minibuffer-complete)
     (my-tab)))

(global-set-key (kbd "TAB") 'ajf-tab-fun) 
```

问题是当我按下 tab 键时，我得到一个错误：

```
Wrong type argument: commandp, ajf-tab-fun 
```

我将 debug-on-error 设置为 t 以便进行调试。这是输出：

```
Debugger entered--Lisp error: (wrong-type-argument commandp ajf-tab-fun)
  call-interactively(ajf-tab-fun nil nil) 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:40:58.893

```
(defun ajf-tab-fun ()
  (interactive)     ; add interactive to let emacs know to call it interactively
   (if (minibufferp)
     (minibuffer-complete)
     (my-tab))) 
```

你只是忘记了`(interactive)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:11:09.957

实际上，您描述的行为几乎已经是默认行为，除了“缩进”，其中默认是“根据主要模式缩进规则缩进”而不是“将文本向右（或向左）移动固定数量” .

# java - eclipse中的Android源代码导入

> ID：13077944
> 
> 赞同：4
> 
> 时间：2012-10-25T21:57:43.413
> 
> 标签：java, android, eclipse

我已经从 android master 分支下载了 android 源代码。我按照网站上给出的程序来构建它。当我从终端运行它时，一切都很好，没有错误。当我按照程序导入这个时，我 eclipse 它给我抛出了大约 2000 个错误，这些错误基本上包括 `IRemoteService cannot be resolved`， `IRemoteServiceCallback cannot be resolved.` 有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:51:52.253

之前在 StackOverflow 上已经提出过这个错误 - 试试这个线程，看看它是否有帮助：

[编译和运行 ApiDemos](https://stackoverflow.com/questions/4298155/compiling-and-running-apidemos)

否则，查看您的代码或指向您正在使用的站点的链接以尝试重现错误并提供更具体的答案会很有帮助。我的第一个想法是你的构建路径在你的项目属性中存在一些问题，它没有找到合适的库。

# soundcloud - 我可以使用 URL 与文件数据通过 api 将音频文件导入或上传到 soundcloud 吗？

> ID：13077946
> 
> 赞同：1
> 
> 时间：2012-10-25T21:57:49.680
> 
> 标签：soundcloud

我正在尝试通过他们的 api 将曲目上传/导入到 soundcloud。

现在，您似乎只能上传音频文件，但您只能通过 POST 文件数据来完成。

我的问题是，是否可以从 URL 导入 soundcloud（通过 api）？

有点像他们在这里做的：http: [//importer.soundcloudlabs.com](http://importer.soundcloudlabs.com)

但是通过soundcloud api。

有任何想法吗？我真的不想把它变成一个两条腿的过程（下载音频文件，然后将文件数据上传到 soundcloud）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:27:53.963

我不认为这是可能的。在导入器上，您可能会发现在幕后，它本身就是在做这两个步骤。用户输入 url，后端服务器下载文件，然后上传到 SoundCloud API。

# django - Django 以复数和单数形式翻译一个单词的奇怪行为

> ID：13077949
> 
> 赞同：3
> 
> 时间：2012-10-25T21:58:04.343
> 
> 标签：django, internationalization, translation, pluralize

在我们的代码中，我们将单词“Photo”标记为单数翻译。在代码的不同位置，我们有这个词的复数翻译“照片”/“照片”，如下所示：

```
1 {% trans 'Photo' %}
2 {% trans 'Photos' %} 
```

和

```
{{ x }} {% blocktrans count counter=x %}Photo{% plural %}Photos{% endblocktrans %} 
```

*可能，我们必须在*翻译字符串中使用我们的计数器变量 x 。但是，我在文档中找不到有关此类要求的任何信息。无论如何，使用我们的代码，我们在 PO 文件中得到的只是：

```
msgid "Photos"
msgstr ""

msgid "Photo"
msgid_plural "Photos"
msgstr[0] ""
msgstr[1] "" 
```

“照片”没有 msgid，导致根本不翻译“照片”，因为实际的翻译字符串不存在 - 除非在 * *n* *gettext 中使用，但在 {% trans 'Photo' %} 中不存在。

我在这里做错了吗？它是一个 Django 错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T23:26:08.297

这不是 Django 中的错误——您试图在两个不同的地方以两种不同的方式翻译术语“照片”。一次是一个普通的（与数字无关的）术语，一次是一个数字感知术语。没有办法在 PO 文件中表示它，它只能有一个带有 msgid "Photo" 的条目。

（请注意，在您的情况下，“照片”的处理方式不同，因为就 gettext 而言，它只翻译一次，作为一个简单的术语。）

复数形式在不同语言中可能有很大不同，在这种情况下，您不应该只尝试本地化单个名词“照片”。相反，您应该将术语“x Photo(s)”本地化为每种语言中的单数和复数大小写。

（在英语中，这将是“1 照片”和“{x} 照片”，但在其他语言中，您可以拥有多于或少于两个，并且数字本身甚至可能不会放在“照片”一词之前，这这就是为什么你必须本地化整个术语）

那么，在您的模板中，您应该有：

```
{% blocktrans count counter=x %}{{ count }} Photo{% plural %}{{ count }} Photos{% endblocktrans %} 
```

然后你的 PO 文件应该包含这样的行：

```
msgid "%(count)s Photo"
msgid_plural "%(count)s Photos"
msgstr[0] ""
msgstr[1] "" 
```

您可以为每种语言本地化`msgstr[0]`（单数）和（复数）。`msgstr[1]`某些语言需要的不仅仅是 [0] 和 [1]，但是当 gettext 为该语言生成 PO 文件时，它应该为您处理好这些。

# javascript - Qooxdoo ComboBox 标签功能

> ID：13077951
> 
> 赞同：0
> 
> 时间：2012-10-25T21:58:20.583
> 
> 标签：javascript, qooxdoo

我正在使用 Qooxdoo 2.0`ComboBox`和`SelectBox`组件。我正在寻找一种解决方案来以编程方式定义每个组合条目的标签。类似于Flex *（或 spark ）组件中的`labelFunction`or`labelField`属性的东西。`ComboBox``DropDownList`

谢谢大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:45:20.367

我想用具有 2 个属性的列表 ob 对象填充`ComboBox`, 或`SelectBox`，然后将 Combobox 设置为使用第一个属性作为标签，第二个作为值。

最后我使用了来自 qx.ui.form.ListItem 类的模型属性。存储每个选择的附加数据。

这就是我填充 ComboBox 项的方式。

```
for(var x in data){
    var tempItem = new qx.ui.form.ListItem(data[x]["name"]);
    tempItem.model=data[x];
    combo.add(tempItem);
} 
```

这就是我如何从选择中获得附加值：

```
combobox.getSelection()[0].model.id 
```

戴维德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:01:25.653

我不太确定您在寻找什么，但数据绑定控制器可能是您需要的东西。只需查看以下演示 [1]，它显示了一个绑定到包含字符串的数组的选择框。选择框也可以替换为组合框。

[1] [http://demo.qooxdoo.org/current/demobrowser/#data~SelectBox.html](http://demo.qooxdoo.org/current/demobrowser/#data~SelectBox.html)

# ruby-on-rails - Ransack 在其搜索中是否支持与 MetaSearch 相同的多态 belongs_to 关联？

> ID：13077954
> 
> 赞同：4
> 
> 时间：2012-10-25T21:58:35.267
> 
> 标签：ruby-on-rails, polymorphic-associations, meta-search, ransack

我正在从 MetaSearch gem 迁移到 Ransack gem 以升级到 Rails 3.1，但我在搜索多态关联时遇到了问题。现有的 MetaSearch 语法不适用于 Ransack，但我找不到任何提及任何语法更改的文档。或者 Ransack 是否支持此功能。

例如，从 MetaSearch github 页面，给定以下类：

```
class Article < ActiveRecord::Base
  has_many :comments, :as => :commentable
end

class Post < ActiveRecord::Base
  has_many :comments, :as => :commentable
end

class Comment < ActiveRecord::Base
  belongs_to :commentable, :polymorphic => true
  validates_presence_of :body
end 
```

您可以像这样在表单中创建一个搜索字段（这显然是从 Searchlogic 借来的约定）：

```
<%= f.text_field :commentable_article_type_body_contains %> 
```

我正在使用这种类型的语法，它在 MetaSearch 中运行良好，但是使用 Ransack，当查询参数包含此字段时，我的应用程序会引发异常。例外是：

```
ActiveRecord::EagerLoadPolymorphicError (Can not eagerly load the polymorphic association :ownable) 
```

有谁知道如何在 Ransack 中进行此类搜索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T16:24:37.183

我一直在努力解决同样的问题（尽管我的错误不同）。我认为您的代码需要是：

```
<%= f.text_field :commentable_of_Article_type_body_contains %> 
```

注意大写A

这对我有用。[您可以在此处查看](https://github.com/ernie/ransack/commit/c156fa4a7ac6e1a8d730791c49bf4403aa0f3af7)Ernie 的多态关联测试（这是页面上的最后一个文件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-13T03:47:38.003

在我的特殊情况下，即使使用适当的 ransack 语法，我仍会继续收到 NameError（未初始化的常量）。

# 看法

```
# NAME ERROR

<div class="form-group col-xs-12 col-sm-12 col-md-4 col-lg-4">
  <%= f.label :identifiable_of_Drug_type_name_or_description_cont %>
  <%= f.search_field :identifiable_of_Drug_type_name_or_description_cont, class: 'form-control form-control-bb' %>
</div> 
```

我可以通过使用 ransack 别名来解决这个问题：

# 模型

```
class Identifier < ApplicationRecord
  # note the missing 'cont' predicate
  ransack_alias :name_or_description, :identifiable_of_Drug_type_name_or_description
end 
```

# 看法

```
# NO ERROR

<div class="form-group col-xs-12 col-sm-12 col-md-4 col-lg-4">
  # 'cont' predicate is declared in the view
  <%= f.label :name_or_description_cont %>
  <%= f.search_field :name_or_description_cont, class: 'form-control form-control-bb' %>
</div> 
```

# c# - Exchange 托管 API - 所有返回的 EmailMessages 都具有相同的唯一 ID 字符串

> ID：13077962
> 
> 赞同：4
> 
> 时间：2012-10-25T21:59:13.407
> 
> 标签：c#, email, exchange-server

我正在使用 C# 中的 Exchange Managed API 访问来自 Exchange 2010 的数据。我正在尝试返回返回的电子邮件项目的唯一标识符，以便稍后在单独的调用中通过该 ID 检索它们（即第一次调用返回所有邮件项目，然后再次调用以检索单个项目以将其标记为已读等）。我遇到的问题是作为每个邮件项目的 UniqueId 返回的字符串是相同的。最重要的是，每个附件项目的 Id 也是相同的字符串。

我正在使用此代码从收件箱文件夹中检索未读邮件。

```
var maxItems = 10;
var searchFilter = new SearchFilter.IsEqualTo(EmailMessageSchema.IsRead, false);
var itemView = new ItemView(maxItems);
FindItemsResults<Item> mailItems = service.FindItems(WellKnownFolderName.Inbox, searchFilter, itemView); 
```

当我解析 mailItems 集合中的每个项目时，每个项目的 Id.UniqueId.ToString() 都是相同的。

我在这里想念什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T19:16:40.847

在深入挖掘之后，似乎为了获取特定邮件项目的唯一标识符，您需要 Id 的 UniqueId 和 ChangeKey 属性。使用 Exchange Web 服务时，这两个都是必需的。

但是，在托管 API 中，当您创建 ItemId 对象时，它只接受 UniqueId 属性并且不提供 ChangeKey 属性的设置器。

因此，经过一番思考，我能够设置该属性，然后绑定到该项目。

```
var itemId = new ItemId(uniqueId);
PropertyInfo prop = typeof(ItemId).GetProperty("ChangeKey");
prop.SetValue(itemId, changeKey, null);
var emailMessage = EmailMessage.Bind(service, itemId); 
```

我观察到的行为是多个项目的“UniqueId”属性可能相同。但是，“UniqueId”和“ChangeKey”的组合从未重复（即使我复制了一个邮件项目，这两个单独的项目具有不同的 ChangeKey 值）。

为什么 API 不允许您在新的 ItemId 对象上设置 ChangeKey，这超出了我的理解。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-18T18:36:16.223

唯一 ID 对于 EWS 项目是唯一的。我遇到了这个问题，因为我认为我遇到了同样的问题。事实证明，它们只是区分大小写。

如果要将 id 保存在 db 中，则需要确保 id 的列排序规则区分大小写。我把我的从`SQL_Latin1_General_Cp1_CI_AS`改为`SQL_Latin1_General_Cp1_CS_AS`。其中 CI 不区分大小写，CS 区分大小写。

您根本不必使用 ChangeKey。

有关详细信息，请参阅[Exchange 中的 EWS 标识符。](https://msdn.microsoft.com/en-us/library/office/dn605828(v=exchg.150).aspx)

要记住的一件事，即链接中的内容，是 id 在移动时可能会发生变化。这是因为它们被复制到新位置而原始位置被删除。

# php - 插入 MySQL x 次？

> ID：13077965
> 
> 赞同：0
> 
> 时间：2012-10-25T21:59:20.790
> 
> 标签：php, phpquery

我想在 MySQL 中创建一个临时数据库。该行的内容取自我使用 PHPQuery 解析的外部页面。for`for`循环运行的次数也取自该页面，运行该页面上存在元素的次数。

以下代码几乎无法正常工作。我假设它会运行`$number`时间代码，`$i`每次运行时都会增加一。这样，它将`$new[0]`, `$new[1]`,`$new[2]`等插入到数据库中。问题是，它只插入最后一个实例。

说`$number`是11，它只会插入`$new[11]`到数据库中。

```
$server = "localhost";
$username = "***";
$password = "***";
$database = "***";
$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

$number = pq('.trafficbriefs:contains(\'SCHOOLS\')') -> parent() -> find('.maintext') -> length();
for ($i = 0; $i < $number; $i++) {
    $test = pq('.trafficbriefs:contains(\'SCHOOLS\')') -> parent() -> find('.maintext') -> eq($i) -> text();
    $new[$i] = $test;
    $sql = "INSERT INTO Temp (School) ";
    $sql .= "VALUES ('$new[$i]')";
}

if (!mysql_query($sql, $con)) {
        die('Error: ' . mysql_error());
    } else {
        echo "Added to database.";
    }

mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:02:12.780

无论做什么，`mysql_query`也需要在该循环内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:09:53.027

我不知道这是否是您需要的，但这段代码将首先构建一个查询，然后执行一次。Y他的查询将一次性插入您想要插入的所有内容。如果它很大，这将快得多`$number`。

```
$server = "localhost";
$username = "***";
$password = "***";
$database = "***";
$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

$number = pq('.trafficbriefs:contains(\'SCHOOLS\')')->parent()->find('.maintext')->length();
$queryParts = array();
for ($i = 0; $i < $number; $i++) {
    $test = pq('.trafficbriefs:contains(\'SCHOOLS\')')->parent()->find('.maintext')->eq($i)->text();
    $queryParts[] = '("' . $test . '")';
}
if (empty($queryParts)) {
    throw new Exception('Nothing to insert');
}
$query = 'INSERT INTO Temp (School) VALUES ' . implode(', ', $queryParts);
if (!mysql_query($query, $con)) {
    die('Error: ' . mysql_error());
} else {
    echo "Added to database.";
}
mysql_close($con); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:10:03.033

试试这个：

```
$sql = "";
for ($i = 0; $i < $number; $i++) 
{
    $test = pq('.trafficbriefs:contains(\'SCHOOLS\')') -> parent() -> find('.maintext') -> eq($i) -> text();
    $new[$i] = $test;
    $sql .= "INSERT INTO Temp (School) ";
    $sql .= "VALUES ('$new[$i]');";
} 
```

连接每个语句并用分号分隔它们

# php - PremiumPress 支付网关问题：MD5 不起作用

> ID：13077968
> 
> 赞同：1
> 
> 时间：2012-10-25T21:59:44.333
> 
> 标签：php, wordpress, payment-gateway

在 wordpress 插件 Premium Press 中，我集成了 payson 支付网关，但有一个小问题：该`MD5`字段无法接收任何值并且无法正常工作。请帮我解决一下这个。

这是在表单中输入`MD5`值的代码：

```
<input type="hidden" name="MD5" value=" < ?php echo get_option('gateway_payson_receiver');('SellerEmail'); ('OkUrl'); ('GuaranteeOffered'); ('ExtraCost'); ('Cost'); ?>"/> 
```

这是必须在另一个文件中计算的内容*`send.php`*：

```
 $MD5string = $SellerEmail . ":" . $Cost . ":" . $ExtraCost . ":" . $OkUrl . ":" . $GuaranteeOffered . $Key;
 $MD5Hash = md5($MD5string);

 ('ExtraCost'); ('Cost'); ?>"/> 
```

我正在尝试对其进行测试：[https](https://www.payson.se/testagent/default.aspx) ://www.payson.se/testagent/default.aspx 但对于 MD5，它不计算任何值。

如果可能，请帮助我。

编辑：我在 value=" 和 < ?php 之后放置了额外的空格，因为 stackoverflow 没有识别代码并且没有显示，这不是问题。在实际代码中没有空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:11:41.447

你没有提供很多细节，但我不禁注意到这一点：

```
...me="MD5" value=" < ?php echo get_option('gateway_payson_receiver');('SellerEmail'); ('OkUrl'); ('GuaranteeOffered'); ('ExtraCost'); ('Cost'); ?> 
```

*   打开引号后有一个额外的空格`value="`。
*   由于 < 和 ? 之间的空格，里面的代码不是 PHP，而是文本。
*   没有分隔符，在计算中您似乎使用了 : 分隔符。

根据您提供的 Payson 页面，

> *MD5 - Obligatorisk - Du saknar alla parametrar för att beräkna MD5, du skall ha med: SellerEmail,Cost,ExtraCost,OkUrl,GuaranteeOffered samt din nyckel*

当您显示该表单时，您应该已经可以使用以下变量：

```
$SellerEmail
$Cost
$ExtraCost
$OkUrl
$GuaranteeOffered
$Key 
```

并输出一个隐藏的表单字段，如

```
<input type="hidden" name="MD5" value="<?php echo md5("$SellerEmail:$Cost:$ExtraCost:$OkUrl:$GuaranteeOffered$Key"); ?>"/> 
```

# c# - 如何检查此数组中的重复答案？C＃

> ID：13077969
> 
> 赞同：8
> 
> 时间：2012-10-25T21:59:44.660
> 
> 标签：c#, arrays, duplicates

对不起新手问题。有人可以帮我吗？这里的简单数组。检查所有用户输入是否唯一且不重复的最佳/最简单方法是什么？谢谢

```
 private void btnNext_Click(object sender, EventArgs e)
    {

        string[] Numbers = new string[5];

        Numbers[0] = txtNumber1.Text;
        Numbers[1] = txtNumber2.Text;
        Numbers[2] = txtNumber3.Text;
        Numbers[3] = txtNumber4.Text;
        Numbers[4] = txtNumber5.Text;

        foreach (string Result in Numbers)
        {
            lbNumbers.Items.Add(Result);
        }

        txtNumber1.Clear();
        txtNumber2.Clear();
        txtNumber3.Clear();
        txtNumber4.Clear();
        txtNumber5.Clear();
    }
} 
```

}

我应该添加我需要在输出数字之前检查是否发生。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T22:01:23.100

一种简单的方法是通过 LINQ：

```
bool allUnique = Numbers.Distinct().Count() == Numbers.Length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T22:04:56.960

另一种方法是使用`HashSet<string>`：

```
var set = new HashSet<string>(Numbers);
if (set.Count == Numbers.Count)
{ 
    // all unique
} 
```

或与`Enumerable.All`：

```
var set = new HashSet<string>();
// HashSet.Add returns a bool if the item was added because it was unique
bool allUnique = Numbers.All(text=> set.Add(text)); 
```

[`Enunmerable.All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)当序列非常大时效率更高，因为它不会完全创建集合，而是一个接一个地创建，并且`false`一旦检测到重复就会返回。

这是此效果的演示：http: [//ideone.com/G48CYv](http://ideone.com/G48CYv)

*   `HashSet`构造函数内存消耗：50 MB，持续时间：00：00：00.2962615
*   `Enumerable.All`内存消耗：0 MB，持续时间：00:00:00.0004254

微软

> 该类[`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)提供高性能的集合操作。集合是不包含重复元素且其元素没有特定顺序的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T22:04:22.280

在我看来，最简单的方法是**将所有值插入到一个集合中**，然后**检查它的大小是否等于数组的大小**。集合不能包含重复值，因此如果任何值重复，则不会将其插入集合中。

如果您没有数百万个值，这在复杂性上也是可以的，因为在集合中的插入是`O(logn)`及时完成的​​，因此总检查时间将为`O(nlogn)`.

如果您想要复杂性最佳的东西，您可以`O(n)`通过遍历数组来及时做到这一点，**并将找到的每个值放入哈希映射**中，同时增加其值：如果值在集合中不存在，则将其添加为 count = 1 . 如果它确实存在，则增加它的计数。然后，您**遍历哈希映射并检查所有值的计数是否为 1**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T22:06:22.007

如果你只是想确保你的列表框没有重复，那么使用这个：

```
if(!lbNumbers.Items.Contains(Result))    
    lbNumbers.Items.Add(Result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-18T21:04:20.423

那这个呢：

```
public bool arrayContainsDuplicates(string[] array) {
  for (int i = 0; i < array.Length - 2; i++) {
    for (int j = i + 1; j < array.Length - 1; j++) {
      if (array[i] == array[j]) return true;
    }
  }
  return false;
} 
```

# r - 尝试使用 R 包中的 C 文件在独立的 C 程序中实现

> ID：13077976
> 
> 赞同：1
> 
> 时间：2012-10-25T22:00:07.887
> 
> 标签：r, calloc

我最近下载了这个 R 包（[http://cran.r-project.org/web/packages/energy/index.html](http://cran.r-project.org/web/packages/energy/index.html)）并且能够成功地安装它并在我的系统上运行它并计算距离相关性。

问题是 R 中的循环需要永远，我是 R 新手。源代码实际上是写在 C 中的一些文件中，R 使用这些文件来评估。`src`我在包的文件夹中有这两个文件`utilities.c`，`dcov.c`其中有我需要实现的功能。

我试图编译`dcov.c`哪些用途`rmath.h`，`r.h`显然我得到了一堆关于程序中使用的 Calloc/Free 的错误。

知道如何编译 C 程序吗？

# c++ - 返回参考是一个好主意吗？

> ID：13077979
> 
> 赞同：1
> 
> 时间：2012-10-25T22:00:15.783
> 
> 标签：c++, reference, ownership

我们都知道[返回对局部变量的引用是个坏主意](https://stackoverflow.com/questions/4643713/c-returning-reference-to-local-variable)。但是，我想知道返回引用是否真的是一个好主意，以及是否有可能确定一些关于何时或何时不这样做的好规则。

我返回引用的问题是调用函数需要关心对象的生命周期，这不应该是它的责任。作为一个人为的例子：

```
#include <vector>

const int& foo() {
  std::vector<int> v = {1, 2, 3, 4, 5};
  return v[0];
}

int main(int argc, const char* argv[])
{
  const int& not_valid = foo();
  return 0;
} 
```

在这里，`vector`末尾的 超出范围`foo`，破坏其内容并使对其元素的任何引用无效。`vector::operator[]`返回对元素的引用，因此当进一步从 中返回此引用时`foo`，引用 in`main`悬空。我不相信 const 引用会延长这里的生命周期，因为它不是对临时的引用。

正如我所说，这是一个人为的例子，作者`foo`可能不会那么愚蠢地尝试返回`v[0]`作为参考。但是，很容易看出返回引用如何要求调用者关心它不拥有的对象的生命周期。将一个元素推入一个`vector`副本中，然后由`vector`它负责。传递引用参数不存在此问题，因为您知道函数将在调用者继续并销毁对象之前完成。

我可以看到返回引用允许一些不错的类似数组的语法`v[0] = 5`- 但是拥有这样的成员函数有什么不好`v.set(index, value)`？至少这样我们就不会暴露内部对象。我知道返回引用也可能会提高性能，但是对于[RVO](http://en.wikipedia.org/wiki/Return_value_optimization)、命名 RVO (NRVO) 和移动语义，它要么可以忽略不计，要么不存在。

所以我一直试图想象在哪些情况下返回引用是真正安全的，但我无法理解它可能涉及的所有不同的所有权语义排列。关于何时执行此操作有什么好的规则吗？

注意：我知道在 s 中处理所有权的更好方法`vector`是使用智能指针，但是使用不同的对象会遇到同样的问题——谁拥有智能指针？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T22:09:28.093

返回参考有很多很好的用途。如您所说，一种是模拟本机取消引用运算符之类的东西：

```
struct Goo
{
    int & operator[](size_t i) { return arr[i]; }
    int & front()              { return arr[0]; }

    // etc.

private:
    int * arr;
}; 
```

另一个用例是当您返回对传入事物的引用时。典型示例是可链接操作，例如`<<`：

```
std::ostream & operator<<(std::ostream & os, Goo const & g)
{ 
    return os << g[3];
} 
```

作为最后一个示例，这是一个线程安全的全局对象：

```
Goo & get_the_object()
{
    static Goo impl;
    return impl;
} 
```

引用是语言的一个组成部分，它们很可能由函数调用返回。正如您所说，了解对象的生命周期很重要，但这始终是正确的，而不是*返回*引用的特定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:15:30.063

就个人而言，当我想实现单例模式时，我喜欢返回对静态变量的引用

```
SomeClass& getTheSingleton()
{
    static SomeClass theInstance;
    return theInstance;
} 
```

我不必编写任何涉及是否初始化某个指针的逻辑，它使我可以控制静态初始化的顺序

# asp.net - ASP / ASP.net 回发问题 VB.net 2010

> ID：13077988
> 
> 赞同：1
> 
> 时间：2012-10-25T22:01:03.393
> 
> 标签：asp.net, html, vb.net, web-applications, vb.net-2010

我正在开发一个网络应用程序，并且我的 vb.net 代码在网络表单中工作，只在我的控件中加载设置一次。但我使用的是谷歌地图控件，每次我的计时器运行时，该控件都会重新加载它的设置并清除我推入的任何数据。我想我需要在 asp.net/html 方面提供一些帮助才能停止回发重新加载控制。

这是我的 asp.net/html 代码。

```
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<table style="width:100%;">
    <tr>
        <td style="width: 668px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<artem:GoogleMap ID="GoogleMap1" runat="server"

    DefaultAddress="999 main st, new york NY, 10541" 
    EnableMapTypeControl="True" EnableOverviewMapControl="False" 
    EnableReverseGeocoding="True" EnableStreetViewControl="False" MapType="Roadmap" 
    MaxZoom="25" MinZoom="12" ShowTraffic="False" Zoom="18" Height="380px" 
    Width="550px" Key="13123123132132132132132123" >
</artem:GoogleMap>
<br />
        </td>
        <td>
            <asp:Button ID="Button1" runat="server" Text="Button" />
            <br />
            <br />

        </td>

    </tr>
  <tr>
  <td style="width: 668px">
  <asp:GridView ID="GridView1" runat="server">
            </asp:GridView>
      <asp:Timer ID="tmUpdateAlarms" runat="server" Enabled="False" Interval="30000">
      </asp:Timer>
  </td>
  </tr>
</table> 
```

我的计时器代码

```
 Protected Sub tmUpdateAlarms_Tick(sender As Object, e As System.EventArgs) Handles tmUpdateAlarms.Tick
    tmUpdateAlarms.Enabled = False
    Try
        Dim lqFireFighterconnect As New lqFireFighterConnectDataContext
        Dim lqGetAlarms As New lqAlarmAndGoDataContext
        Dim getDeptGUID = From r In lqFireFighterconnect.tbDeptToPublics
                          Where r.PublicGUID = Request.QueryString("PUBGUID")
                          Select r
        If getDeptGUID.Count = 0 Then
            Exit Sub
        End If
        For Each foundGUID In getDeptGUID.Take(1)
            gotDeptGUID = foundGUID.DeptGUID
        Next
        Dim GetAlarms = From r In lqGetAlarms.AlarmDrops
                            Where r.DeptGUID = gotDeptGUID
                            Order By r.TimeDate Descending
                            Select r
        If GetAlarms.Count = 0 Then
            Exit Sub
        End If
        Dim myCBTable As New DataTable()
        With myCBTable.Columns
            .Add("DateTime", GetType(String))
            .Add("Address", GetType(String))
            .Add("AlarmType", GetType(String))
            .Add("CrossStreet", GetType(String))
            .Add("Status", GetType(String)) '<<<< change the type of this column to what you actually need instead of integer.
        End With
        For Each FoundAlarm In GetAlarms.Take(1)
            If Not GridView1.Rows(0).Cells(1).Text.ToString = FoundAlarm.AlarmAddress Then
                For Each updateAlarm In GetAlarms.Take(3)
                    myCBTable.Rows.Add(updateAlarm.TimeDate.ToString, updateAlarm.AlarmAddress, updateAlarm.AlarmType, updateAlarm.AlarmCrossStreets, updateAlarm.AlarmStatus)
                Next
                With GridView1
                    .DataSource = myCBTable
                    .DataBind()
                End With
                Dim objmar As New Artem.Google.UI.Marker
                objmar.Address = GridView1.Rows(0).Cells(1).Text.ToString
                'objmar.Animation = Artem.Google.UI.MarkerAnimation.Drop
                objmar.Visible = True
                objmar.Title = GridView1.Rows(0).Cells(1).Text.ToString
                objmar.Icon = "/Images/fire_c.png"
                GoogleMap1.Markers.Add(objmar)
                objmar = Nothing
                GoogleMap1.Address = GridView1.Rows(0).Cells(1).Text.ToString
            End If
        Next

        '  LoadHydrants()
    Catch ex As Exception

    End Try

    tmUpdateAlarms.Enabled = True
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:22:52.900

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
             <ContentTemplate>
              <artem:GoogleMap ID="GoogleMap1" runat="server"

    DefaultAddress="999 main st, New York ny, 10541" 
    EnableMapTypeControl="True" EnableOverviewMapControl="False" 
    EnableReverseGeocoding="True" EnableStreetViewControl="False" MapType="Roadmap" 
    MaxZoom="25" MinZoom="12" ShowTraffic="False" Zoom="18" Height="380px" 
    Width="550px" Key="1231231231231231231231321231313213" >
</artem:GoogleMap>
              </ContentTemplate>
            </asp:UpdatePanel> 
```

# c# - C#：如何使用数组、字符和字符串？需要清理

> ID：13077997
> 
> 赞同：2
> 
> 时间：2012-10-25T22:01:36.353
> 
> 标签：c#

我是编程新手，我的算法课上有一个项目。我们要做的是决定一个问题并解决它。除了 string、char 和 WriteLine，我们还没有学到更多。我们确实添加了一些东西，你很快就会看到！

我决定我要解决这个问题：用户插入一个单词，无论多长，程序都会自动将第一个字母变成大写字母。到目前为止，这就是我所拥有的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {
    start:
        Console.WriteLine("Please enter a word below:");
        Console.WriteLine("");
        string str = Console.ReadLine();
        char char1;
        if (str[0] >= 97)
        {
            char1 = (char)(str[0] - 32);
        }
        else
        {
            char1 = (char)(str[0] + 32);
        }

        char char2 = (char)(str[1]);
        char char3 = (char)(str[2]);
        char char4 = (char)(str[3]);
        char char5 = (char)(str[4]);
        Console.WriteLine("");
        Console.Write(char1);
        Console.Write(char2);
        Console.Write(char3);
        Console.Write(char4);
        Console.WriteLine(char5);
        goto start;
}
}
} 
```

该代码的问题是任何少于 5 个字母的单词都会导致程序崩溃。任何超过 5 个字母的东西都会在第 5 个字母处被删除……有人告诉我，使用数组应该可以解决这个问题。鉴于我在这方面完全是新手，我需要将其分解并尽可能简单地告知！

任何帮助使它工作将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:05:10.283

```
Console.WriteLine("Enter a word:");
string str = Console.ReadLine();
Console.WriteLine(str[0].ToString().ToUpper() + str.Substring(1)); 
```

这将起作用。

或者...如果您需要遍历整个字符串并找到第一个实际的字母字符，您可以执行以下操作：

```
Console.WriteLine("Please enter a word:");
string s = Console.ReadLine();
bool found = false;
char[] chars = new char[s.Length];
for (int i = 0; i < s.Length; i++)
{
    if (Char.IsLetter(s[i]) && !found)
    {
         chars[i] = s[i].ToString().ToUpper()[0];
         found = true;
    }
    else
    {
        chars[i] = s[i];
    }
}
s = new String(chars);
Console.WriteLine(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:15:42.563

在将 char1 写入控制台后使用这样的 for 循环：

```
if (str.Length > 1)
{
    for (int i = 1; i < str.Length; i++)// Start at 1 to skip char1
    {
        Console.Write(str[i]);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T22:35:04.540

您可以调用一些[`string`](http://msdn.microsoft.com/en-us/library/system.string.aspx)有用的方法：

*   `Substring`
*   `ToUpper`

实际上，您不必担心字符；仅使用字符串即可解决此问题。

还要注意检查您的代码是否处理了字符串为空的情况（使用`if`语句），如果用户只是按下`Enter`而不输入任何内容，就会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T22:39:39.570

您正在学习算法课程，他们让您选择要解决的问题？对学习的人来说听起来很危险。

```
Console.WriteLine("Please enter a word below:");
Console.WriteLine("");
string inputString = Console.ReadLine();    // try to use meaningful variable names

// shorthand for the if ... else block:
// type variableName = (true/false condition) ? "is true" : "is false";
char firstChar = inputString[0] >= 97 ? (char)(inputString[0] - 32) : (char)(inputString[0] + 32);

Console.WriteLine("");
Console.Write(firstChar);

for (int i = 1; i < inputString.Length; i++)    // skip firstChar
{
    Console.Write(inputString[i]);
} 
```

正如其他人所提到的，如果您想要任何类似于通用解决方案的东西，则需要为此使用循环。

此外，您需要避免使用 goto 语句。有很多原因，一个是它们（在我看来）使代码难以阅读和维护。

此外，如果您的代码按照编写的方式运行，它将永远不会结束。您编写的程序将执行，然后重新开始，永不停止。如果您想要这种行为，那么您应该将您的代码包装在一个无限循环中，该循环会在某些条件下退出。这可能看起来像：

```
bool keepRunning = true;
while(keepRunning){
    //code here
    Console.Write("go again? (y/n) ");
    keepRunning = (string)(Console.ReadLine()).equals("y") ? false : true;  
} 
```

[在最后一条语句中，我忘记了在调用.equals](http://msdn.microsoft.com/en-us/library/858x0yyx.aspx)方法之前是否需要将 ReadLine 的输出转换为字符串……我没有启动 IDE。我想你应该已经明白了。

编辑：我看到另一个关于使用该`.ToUpper`方法的回应。我想到了这一点，但假设您可能需要使用该`char`类型。