# StackOverflow 问答 15589000-15589999

# c++ - 将数组分散到仅工作任务

> ID：15589000
> 
> 赞同：1
> 
> 时间：2013-03-23T16:14:32.610
> 
> 标签：c++, mpi, scatter

我有一个存储数组的数组（称为 sendbuff），我想使用 MPI::Scatter 将这些数组发送到其他线程。

```
 sendbuff
   #####    ###############################
p  # 0 # -> # -1 # -1 # -1 # -1 # -1 # -1 # (values)
o  #####    ###############################
s  # 1 # -> # -1 # -1 # -1 # -1 # -1 # -1 # (values)
   #####    ############################### 
```

可以看出，`sendbuff[0]`包含一个大小为 6 的数组，该数组有 6 个值（全 -1）并且`sendbuff[1]`具有相同的内容。我想将这些 -1 数组发送到其他线程，并将它们保存在一个名为 recvbuff 的数组中，该数组用 0 填充：

```
 recvbuff
#########################
# 0 # 0 # 0 # 0 # 0 # 0 #
######################### 
```

我研究了操作系统的答案，我找到了一些，但他们使用 MPI_Datatype 但我想避免它。为了尝试实现这个目标，我制作了以下不起作用的代码：

```
int main( int argc, char *argv[]){

    //variable innitialization
    int taskid, ntasks, buffsize, **sendbuff, *recvbuff;

    MPI::Init(argc, argv);

    taskid = MPI::COMM_WORLD.Get_rank();
    ntasks = MPI::COMM_WORLD.Get_size();    

    buffsize = 6;

    //memory innitialization
    recvbuff = new int[buffsize];
    sendbuff = new int*[ntasks];
    for(int i = 0; i < ntasks; i++){
        sendbuff[i] = new int[buffsize];
    }

    //array innitialization
    for(int i = 0; i < buffsize; i++){
        recvbuff[i] = 0;
    }
    for(int i = 0; i < ntasks; i++){
        for(int j = 0; j < buffsize; j++){
            sendbuff[i][j] = -1;
        }
    }

    //communication
    MPI::COMM_WORLD.Scatter(sendbuff[0], buffsize, MPI::INT, recvbuff, buffsize,
        MPI::INT, 0);

    //output
    for(int i = 0; i < buffsize; i++){
        cout<<"Task"<<taskid<<" recvbuff["<<i<<"] = "<<recvbuff[i] << endl;
    }

    //cleaning
    for(int i = 0; i < ntasks; i++){
            delete[] sendbuff[i];
    }
    delete[] sendbuff;
    delete[] recvbuff;

    MPI::Finalize();

    return EXIT_SUCCESS;
} 
```

使用 scatter 后，我希望他`recvbuff`的变量填充 -1 值，但是我得到了 -1 和垃圾的混合，如下所示：

```
$ mpirun -np 3 a.out 
Task0 recvbuff[0] = -1
Task0 recvbuff[1] = -1
Task0 recvbuff[2] = -1
Task0 recvbuff[3] = -1
Task0 recvbuff[4] = -1
Task0 recvbuff[5] = -1    
Task1 recvbuff[0] = 33
Task1 recvbuff[1] = 0
Task1 recvbuff[2] = -1
Task1 recvbuff[3] = -1
Task1 recvbuff[4] = -1
Task1 recvbuff[5] = -1
Task2 recvbuff[0] = -1
Task2 recvbuff[1] = -1
Task2 recvbuff[2] = 33
Task2 recvbuff[3] = 0
Task2 recvbuff[4] = 1768975727
Task2 recvbuff[5] = 7496543 
```

我做错了什么？在此先感谢佩德罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:26:18.167

[此答案](https://stackoverflow.com/questions/9269399/sending-blocks-of-2d-array-in-c-using-mpi/9271753#9271753)中详细描述了分散和聚集。Scatter 拆分数据并将碎片分散到其他任务，但数据必须存储在连续内存中 - MPI_Scatter 无法知道它需要跟随指针，如果需要，有多少 - 以及分配 sendbuff 的方式：

```
sendbuff = new int*[ntasks];
for(int i = 0; i < ntasks; i++){
    sendbuff[i] = new int[buffsize];
} 
```

不同行的 sendbuff 可能分散在整个系统内存中。如果你连续分配数据，你就快到了：

```
sendbuff = new int*[ntasks];
sendbuff[0] = new int[ntasks * 6];
for(int i = 1; i < ntasks; i++){
    sendbuff[i] = &(sendbuff[0][i*6];
} 
```

现在你应该可以散布了，但要注意第 0 行将变为第 0 行；也就是scatter去通信器中的*所有*进程。如果您只是尝试发送到非零级任务，最简单的做法是在 sendbuff 中为 0 级保留一行虚拟数据，以便正常分散正常工作：

```
#include <iostream>
#include <mpi.h>

int main(int argc, char **argv)
{
    int rank, size;
    const int nelem = 6;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    int **sendbuff = new int*[size];
    int *recvbuff  = new int[nelem];

    if (rank == 0) {
        sendbuff[0] = new int[nelem * size];
        for (int i=0; i<size; i++)
            sendbuff[i] = &(sendbuff[0][nelem*i]);

        for (int i=0; i<size; i++)
            for (int j=0; j<nelem; j++)
                sendbuff[i][j] = i-1;
    }

    MPI_Scatter(sendbuff[0], nelem, MPI_INT, recvbuff, nelem, MPI_INT, 0, MPI_COMM_WORLD);

    if (rank != 0) {
        std::cout << "Scatter: [ " << rank << "]: ";
        for (int i=0; i<nelem; i++)
            std::cout << recvbuff[i] << " ";
        std::cout << std::endl;

        for (int i=0; i<nelem; i++)
            recvbuff[i] *= recvbuff[i];
    }

    MPI_Gather(recvbuff, nelem, MPI_INT, sendbuff[0], nelem, MPI_INT, 0, MPI_COMM_WORLD);
    if (rank == 0) {
        for (int j=1; j<size; j++) {
            std::cout << "Gather: [ " << j << "]: ";
            for (int i=0; i<nelem; i++)
                    std::cout << sendbuff[j][i] << " ";
            std::cout << std::endl;
        }
    }

    delete [] recvbuff;
    if (rank == 0)
        delete [] sendbuff[0];
    delete [] sendbuff;

    MPI_Finalize();
} 
```

请注意，我们正在分散数据，工人正在对数字进行平方，而主人将其收集回来。编译和运行给出：

```
$ mpic++ -o intercomm intercomm.cxx
$ mpirun -np 4 ./intercomm
Scatter: [ 2]: 1 1 1 1 1 1
Scatter: [ 1]: 0 0 0 0 0 0
Scatter: [ 3]: 2 2 2 2 2 2
Gather: [ 1]: 0 0 0 0 0 0
Gather: [ 2]: 1 1 1 1 1 1
Gather: [ 3]: 4 4 4 4 4 4 
```

如果您希望避免 0 级的虚拟数据（可能很大），您可以将任务分成两组，即主任务和辅助任务，并设置一个允许它们之间进行集体通信的[互通器。](http://www.mpi-forum.org/docs/mpi-11-html/node111.html)这是一个简单的程序，它就是这样做的：

```
#include <iostream>
#include <mpi.h>

int main(int argc, char **argv)
{
    MPI_Comm   localComm;    /* intra-communicator of local sub-group */
    MPI_Comm   interComm;    /* inter-communicator */
    int masterworker;
    int rank, size;
    const int nelem = 6;
    int rootrank;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    masterworker = (rank == 0 ? 0 : 1);
    MPI_Comm_split(MPI_COMM_WORLD, masterworker, rank, &localComm);

    if (masterworker == 0)
    {
        MPI_Intercomm_create( localComm, 0, MPI_COMM_WORLD, 1, 1, &interComm);
        rootrank = ( rank == 0 ? MPI_ROOT : MPI_PROC_NULL );
    }
    else {
        MPI_Intercomm_create( localComm, 0, MPI_COMM_WORLD, 0, 1, &interComm);
        rootrank = 0;
    }

    int **sendbuff = new int*[size-1];
    int *recvbuff  = new int[nelem];

    if (rank == 0) {

        sendbuff[0] = new int[nelem * (size-1)];
        for (int i=1; i<size-1; i++)
            sendbuff[i] = &(sendbuff[0][nelem*i]);

        for (int i=0; i<size-1; i++)
            for (int j=0; j<nelem; j++)
                sendbuff[i][j] = i;
    }

    MPI_Scatter(sendbuff[0], nelem, MPI_INT, recvbuff, nelem, MPI_INT, rootrank, interComm);

    if (masterworker == 1) {
        std::cout << "Scatter: [ " << rank << "]: ";
        for (int i=0; i<nelem; i++)
            std::cout << recvbuff[i] << " ";
        std::cout << std::endl;

        for (int i=0; i<nelem; i++)
            recvbuff[i] *= recvbuff[i];
    }

    MPI_Gather(recvbuff, nelem, MPI_INT, sendbuff[0], nelem, MPI_INT, rootrank, interComm);
    if (masterworker == 0) {
        for (int j=0; j<size-1; j++) {
            std::cout << "Gather: [ " << j << "]: ";
            for (int i=0; i<nelem; i++)
                    std::cout << sendbuff[j][i] << " ";
            std::cout << std::endl;
        }
    }

    MPI_Comm_free(&interComm);
    MPI_Comm_free(&localComm);
    delete [] recvbuff;
    if (rank == 0)
        delete [] sendbuff[0];
    delete [] sendbuff;

    MPI_Finalize();
} 
```

同样，编译和运行给出：

```
$ mpic++ -o intercomm intercomm.cxx
$ mpirun -np 4 ./intercomm
Scatter: [ 1]: 0 0 0 0 0 0
Scatter: [ 2]: 1 1 1 1 1 1
Scatter: [ 3]: 2 2 2 2 2 2
Gather: [ 0]: 0 0 0 0 0 0
Gather: [ 1]: 1 1 1 1 1 1
Gather: [ 2]: 4 4 4 4 4 4 
```

或者，如果您不想搞乱交互器，只需在 sendbuff 中为 0 级保留一行虚拟数据，以便正常分散正常工作：

```
#include <iostream>
#include <mpi.h>

int main(int argc, char **argv)
{
    int rank, size;
    const int nelem = 6;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    int **sendbuff = new int*[size];
    int *recvbuff  = new int[nelem];

    if (rank == 0) {
        sendbuff[0] = new int[nelem * size];
        for (int i=0; i<size; i++)
            sendbuff[i] = &(sendbuff[0][nelem*i]);

        for (int i=0; i<size; i++)
            for (int j=0; j<nelem; j++)
                sendbuff[i][j] = i-1;
    }

    MPI_Scatter(sendbuff[0], nelem, MPI_INT, recvbuff, nelem, MPI_INT, 0, MPI_COMM_WORLD);

    if (rank != 0) {
        std::cout << "Scatter: [ " << rank << "]: ";
        for (int i=0; i<nelem; i++)
            std::cout << recvbuff[i] << " ";
        std::cout << std::endl;

        for (int i=0; i<nelem; i++)
            recvbuff[i] *= recvbuff[i];
    }

    MPI_Gather(recvbuff, nelem, MPI_INT, sendbuff[0], nelem, MPI_INT, 0, MPI_COMM_WORLD);
    if (rank == 0) {
        for (int j=1; j<size; j++) {
            std::cout << "Gather: [ " << j << "]: ";
            for (int i=0; i<nelem; i++)
                    std::cout << sendbuff[j][i] << " ";
            std::cout << std::endl;
        }
    }

    delete [] recvbuff;
    if (rank == 0)
        delete [] sendbuff[0];
    delete [] sendbuff;

    MPI_Finalize();
} 
```

再次编译和运行给出：

```
$ mpic++ -o intercomm intercomm.cxx
$ mpirun -np 4 ./intercomm
Scatter: [ 2]: 1 1 1 1 1 1
Scatter: [ 1]: 0 0 0 0 0 0
Scatter: [ 3]: 2 2 2 2 2 2
Gather: [ 1]: 0 0 0 0 0 0
Gather: [ 2]: 1 1 1 1 1 1
Gather: [ 3]: 4 4 4 4 4 4 
```

# json - 带有 json 数据的 highstock

> ID：15589001
> 
> 赞同：1
> 
> 时间：2013-03-23T16:14:34.093
> 
> 标签：json, highstock

我想用highstock在网上显示我的数据，但是我的json数据有问题，basic-line的例子：[http ://www.highcharts.com/stock/demo/basic-line](http://www.highcharts.com/stock/demo/basic-line)

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/basic-line/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/basic-line/) 我将javascript文件更改为

```
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?',  function(data) 
```

到

```
$.getJSON('data.json',  function(data) 
```

我想在我的 web 文件夹中使用 json 数据，并将数据放入 json 文件中，例如：

```
[[1143072000000,60.16],

[1143158400000,59.96],
[1143417600000,59.51],
[1143504000000,58.71],
[1143590400000,62.33],
[1143676800000,62.75],
[1143763200000,62.72],

/* Apr 2006 */
[1144022400000,62.65],
[1144108800000,61.17],
[1144195200000,67.21],
[1144281600000,71.24]] 
```

但我在我的网络上什么也看不到，我怎么了？是json数据格式不对吗？还是谢谢大家帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:17:56.800

将您的文件重命名为 data.js 。对于 javascript 文件而不是 JSON。对我来说就是这样:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:59:15.273

如果你使用 JSON，那么你应该去掉所有的注释。

所以 JSON 应该是这样的：

```
[[1143072000000,60.16],
[1143158400000,59.96],
[1143417600000,59.51],
[1143504000000,58.71],
[1143590400000,62.33],
[1143676800000,62.75],
[1143763200000,62.72],
[1144022400000,62.65],
[1144108800000,61.17],
[1144195200000,67.21],
[1144281600000,71.24]] 
```

和图表代码：

```
 $.getJSON('data.json', function(data) {

    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        series : [{
            name : 'AAPL',
            data : data
        }]
    });
}); 
```

# android - 意图过滤 android 与所有 gps 应用程序

> ID：15589002
> 
> 赞同：0
> 
> 时间：2013-03-23T16:14:37.653
> 
> 标签：android, gps

我想对设备中安装的所有 gps 应用程序进行意图过滤。

我找到[了这个](https://stackoverflow.com/questions/4068910/android-intent-filter)，但是现在，我如何在设备中安装 gps 应用程序？

有谁知道？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:17:01.173

一种粗略但唯一的方法是扫描所有软件包以查找请求`ACCESS_FINE_LOCATION`许可的应用程序。

这将为您提供*可以*使用 GPS 的应用程序列表。它不能保证他们*确实*使用 GPS。

```
PackageManager p = context.getPackageManager(); 
final List<PackageInfo> apps = p.getInstalledPackages(PackageManager.GET_PERMISSIONS);
for (PackageInfo pkg : apps) {
    for (String permission : pkg.requestedPermissions) {
        // Check if permission is the ACCURACY FINE permission
    }
} 
```

# python - 创建条目列表

> ID：15589003
> 
> 赞同：0
> 
> 时间：2013-03-23T16:14:42.610
> 
> 标签：python, user-interface, button, tkinter

我有一个带有 x 个条目的 GUI。我希望输出类似于所有条目的列表。我有以下代码：

```
from Tkinter import *
master = Tk()
lijst=[]
x=0
while x<3:
    a="e"+str(x)
    lijst.append(a)
    x=x+1
x=0

labels=[]
x=1
while x<4:
    a="File"+str(x)+":"
    labels.append(a)
    x=x+1

x=0
while x<3:
    a=labels[x]
    b=Label(master,text=a)
    b.grid(row=x+1, column=0)

    x=x+1

x=0
while x<3:
    a=lijst[x]
    b=Entry(master)
    b.grid(row=x+1, column=1)
    c=Label(master, text=".txt            ")
    c.grid(row=x+1, column=1,sticky=E)
    x=x+1

Button(master, text='Enter', command=???,width=20).grid(row=4, column=2, sticky=W, pady=4,padx=20)

mainloop()   

output: list=[e0.get(),e1.get(),etc... 
```

如何创建一个看起来像输出并且不依赖于条目数量的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:53:54.207

您可以使用理解列表更轻松地创建条目列表：

```
entries = [Entry(master) for i in range(3)]

for i, entry in enumerate(entries):
    label_text = "File%s:" % (i+1)
    Label(master, text=label_text).grid(row=i, column=0)
    entry.grid(row=i, column=1)
    Label(master, text=".txt").grid(row=i, column=2, padx=(0, 15)) 
```

创建该列表后，打印`get()`每个条目的调用很简单：

```
def print_entries():
    print [entry.get() for entry in entries]

Button(master, text='Enter', width=20, command=print_entries).grid(row=4, column=3, sticky=W, pady=4,padx=20) 
```

`".txt"`我已经用正确的填充替换了字符串的尾随空格，如此处所述[，](https://stackoverflow.com/questions/4174575/adding-padding-to-a-tkinter-widget-only-on-one-side)这更清楚。

# php - 将php表单中的变量传递到另一个页面

> ID：15589011
> 
> 赞同：0
> 
> 时间：2013-03-23T16:15:12.243
> 
> 标签：php, forum

我对 PHP 和表单有点陌生。我正在尝试以 PHP 形式将一些变量从一个页面发送到另一个页面。

这是表格：

```
<form name="dates" action="document_creation/7bform.php" method="post"  onsubmit="return mandatoryFields()">
  <table width="748" border="0" cellspacing="2" cellpadding="2">
    <tr>
      <td class="main_text">
        <div align="right" class="main_text">*Contract Start Date:</div>
      </td>
      <td>
        <input name="start_date" type="text" value="YYYY-MM-DD" maxlength="100" class="datepick" id="date1" />
      </td>
    </tr>
    <tr>
      <td class="main_text">
        <div align="right" class="main_text">*Contract End Date:</div>
      </td>
      <td>
        <input name="end_date" type="text" value="YYYY-MM-DD" maxlength="100" class="datepick" id="date2" />
      </td>
    </tr>
    <tr>
      <td height="36" colspan="2">
        <table width="100" border="0" align="center" cellpadding="2" cellspacing="2">
          <tr>
            <td width="68"> <input name="submit" type="submit" id="Submit" value="Generate 7B Form" <?php if($disable ==1){?>disabled<?php }?>/></td>
            <td width="48">
              <label><input type="reset" name="reset" value="Reset" /></label>
            </td>
            <td width="46"><div align="center"><a href="javascript:history.go(-1);">Back</a></div></td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</form> 
```

我想通过`start_date`并`end_date`转到另一个页面`document_creation/7bform.php`，但它不起作用。**document_creation/7bform.php**看起来像这样：

```
<?php
     $start_date = ($_POST['start_date']);
     $end_date = ($_POST['end_date']); 
```

当我尝试打印这些变量时，它们显示为空白。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:21:37.427

一切看起来都很好，所以我认为你的函数`mandatoryFields()`返回 false。

除此之外，您可能希望在检索页面上使用它：

```
if(isset($_POST['start_date']) && !empty($_POST['start_date'])){
 // now assign values
}

if(isset($_POST['end_date']) && !empty($_POST['end_date'])){
 // now assign values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:22:11.540

另外，只是一个有用的提示...

* * *

```
<?php if($disable ==1){?>disabled<?php }?> 
```

* * *

那很混乱......你应该使用短标签

* * *

```
<?=($disable==1 ? " disabled" : "")?> 
```

* * *

更进一步，1 是 TRUE，所以你实际上并不需要它......

* * *

```
<?=($disable ? " disabled" : "")?> 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:29:35.963

删除 $_POST 调用周围的括号。此外，您可能需要考虑对字符串进行消毒。我知道你是新手，但每当我教别人 PHP 表单时，我总是首先描述卫生程序。在@rckhoe，不要使用短标签。短标签非常容易出错并且依赖于浏览器变量。

[您可以在此处](http://www.php.net/manual/en/function.htmlspecialchars.php)阅读有关清理您的输入的信息。`htmlspecialchars()`使用和使用[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)总是很好的做法。阅读更多关于 PHP/SQL 的内容也不会有什么坏处。

```
$start_date = $_POST['start_date'];
$end_date = $_POST['end_date']; 
```

# html - 在 CSS 中选择每个第二层

> ID：15589015
> 
> 赞同：6
> 
> 时间：2013-03-23T16:15:22.927
> 
> 标签：html, css, css-selectors

您将如何仅使用 CSS选择**无限**级别堆栈中的每**一级？**

 **示例代码：

```
<div>
    1
    <div>
        2
        <div>
            3
            <div>
                4
                <div>
                    5
                    <div>
                        [...]
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

首选结果的视觉**示例**：

![在此处输入图像描述](../Images/2c9e2765c1f2215ee2799a02b03f86da.png)

**注意：**不需要 JavaScript 帮助；当级别数已知时，没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T16:19:17.973

虽然知道级别数时没有问题，但如果*不*知道级别数，那么仅使用 CSS 就变得不可能，即使您能够`div`使用选择器将最顶层锚定到其他一些元素也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:08:52.030

那么不同的标签呢，比如第二级的 span 和 CSS div span 中的 target。

是什么造成了这种无限迭代？**

# html - 尝试在 html 中添加图像

> ID：15589016
> 
> 赞同：0
> 
> 时间：2013-03-23T16:15:29.903
> 
> 标签：html, hyperlink, image, href, src

我刚刚在我的博客中添加了一个新的小部件，使用标签搜索 url 来提取特定的帖子。这工作得很好。

但是，我想在链接旁边添加一张图片，这*不起作用*。我的页面上出现了一个讨厌的蓝色问号，而不是我的照片。我查看了我正在使用的所有属性，我认为我的语法没问题，所以我很难过。有人可以指出我做错了什么吗？

谢谢

毫米

```
<!-- Navigation2 tabs start -->
<div id='georgetownlist'>
<a    
href="http://s1275.photobucket.com/user/MaddyMarcel/media/DCgraffiti_zps23603274.jpg.html"     
imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img 
src="http://s1275.photobucket.com/user/MaddyMarcel/media/DCgraffiti_zps23603274.jpg.html" 
alt="DC" border="0" height="40" /> 
<a href="http://proustscookies.blogspot.com/search/label/Georgetown%20favorites"    
class="georgetowntab" title="Georgetown favorites">MY GEORGETOWN</a>
</a></div>
<!-- Navigation2 tabs end --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:16:58.873

您的 src 属性末尾有 .html。图片源应以 .jpg 结尾，而不是 .jpg.html。

```
src="http://s1275.photobucket.com/user/MaddyMarcel/media/DCgraffiti_zps23603274.jpg.html 
```

应该

```
src="http://i1275.photobucket.com/albums/y449/MaddyMarcel/DCgraffiti_zps23603274.jpg 
```

# python - 为cherrypy创建一个猎豹工具

> ID：15589019
> 
> 赞同：2
> 
> 时间：2013-03-23T16:15:46.070
> 
> 标签：python, cherrypy, cheetah

我刚开始玩cherrypy，想用cheetah作为模板引擎。

因此我想创建一个工具，这样我就可以使用注释功能指向我的模板

就像是

```
import cherrypy

class Root(object):
    @cherrypy.expose()
    @cherrypy.tools.cheetah(template="index")
    def index(self):
        title = "Demo"
        content = "Stuff"
        return {'title': title, 'content': content} 
```

我已经在cherrypywiki上找到了可以使用编译模板的东西：

[CherryPy Cheeta 工具](http://tools.cherrypy.org/wiki/Cheetah_Tool)

但我不想先编译模板。我想从我暴露的网站返回我的内容。我的 cheetah 工具现在应该拦截该内容并创建模板

我知道如何创建模板：

```
from Cheetah.Template import Template
....
 cherrypy.expose()
 def demo(self):
    filename = os.path.join(APPDIR, "index.tmpl")
    template = Template(file = filename)

    template.content = "bla"
    template.title = "Test"
    return str(template)
 .... 
```

现在基本上在我的页面处理程序中，我只返回我的内容字典，我的工具创建模板并动态填充属性。因为我也是 Python 的新手，所以我不知道如何动态地做到这一点。

我希望我可以遍历我的字典并在我的工具中做类似的事情：

```
template = Template(file = filename)
for key, value in data:
    setattr(template, key, value) 
```

但我已经通过一个简短的演示尝试了这个。`setattr`不管用。我试过这样：

```
template = Template(file = filename)
for key, value in data:
    setattr(template, 'title', 'Test') 
```

有人可以指出我正确的方向吗？

# python - 组合自定义 Python 日志处理程序

> ID：15589020
> 
> 赞同：0
> 
> 时间：2013-03-23T16:15:46.930
> 
> 标签：python, logging, twitter, python-2.7

我正在编写一个简短的脚本，它会定期轮询一个网站，并在推特上发布轮询的结果。

我认为使用 python 的内置日志记录机制来做到这一点很聪明：

```
# Main Script
twitter_handler = TwitterHandler(config=args.get('twitter-config'))
logger.addHandler(twitter_handler)

logger.debug('Debug', extra={'tweet': True})

# Handler
class TwitterHandler(logging.Handler):
    def __init__(self, config=None):
        logging.Handler.__init__(self, **kwargs)
        # Do whatever setup is necessary

    def emit(self, record):
        if getattr(record, 'tweet', False):
            # tweet 
```

我还想介绍更复杂的日志处理，比如在条件没有改变的情况下才经常发推文。

那时，我想我应该把它分成三种类型的处理程序来解耦它们：

*   `TweetHandler`: 实际发推文
*   `ConditionalHandler`：仅在满足某些条件时记录
*   `PeriodicHandler`: 只根据一些周期性规则记录

假设我将功能分解为这些不同的处理程序，我该如何组合它们？某种元类或类装饰器？

# iphone - presentViewController SIGABRT

> ID：15589021
> 
> 赞同：-1
> 
> 时间：2013-03-23T16:16:03.770
> 
> 标签：iphone, ios, ipad, sigabrt, ios-universal-app

当我试图从设备库中选择一张照片时，我正在开发一个通用应用程序

iPad 我收到 SIGABRT 错误，但它在 iPhone 上运行良好

```
 picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
   [self presentViewController:picker animated:YES completion:nil];  //the culprit, why? 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:28:55.060

请阅读以下文档`UIImagePickerViewController`：

> 该表表明，在 iPad 上，如果您指定源类型`UIImagePickerControllerSourceTypePhotoLibrary`或`UIImagePickerControllerSourceTypeSavedPhotosAlbum`，则必须使用弹出框控制器呈现图像选取器，如`UIPopoverController`类参考中的“呈现和关闭弹出框”中所述。如果您尝试以模态方式（全屏）显示图像选择器以在保存的图片和电影中进行选择，系统会引发异常。
> 
> 在 iPad 上，如果您指定源类型为`UIImagePickerControllerSourceTypeCamera`，则可以模态（全屏）或使用弹出框呈现图像选择器。但是，Apple 建议您仅全屏显示相机界面。

您必须使用 a`UIPopoverController`来呈现 iPad 上照片库的图像选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:32:06.517

```
 // While showing UIImagePickerController in iPad, you must do it using UIPopoverController as follow 

        // Declare UIPopoverController and present your UIImagePickerController using it
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        [imagePicker setDelegate:self];
        [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        [imagePicker setAllowsEditing:YES];

        popOverController = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
        [popOverController presentPopoverFromRect:self.view.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

# active-directory - 存储 Active Directory 的管理员密码

> ID：15589024
> 
> 赞同：0
> 
> 时间：2013-03-23T16:16:21.730
> 
> 标签：active-directory, ldap

我在春天设置 AD(LDAP)；我已经看到将 LDAP 服务器的管理员（管理员）密码存储在属性文件中的示例，以便可以在启动期间实例化 LDAPContextSource；对于 AD，我有点害怕/害怕将经理的（管理员）密码存储在属性中；我可以考虑将密码存储在系统的数据库中；但谁能告诉我这样做的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:11:31.020

无论你把它放在哪里，你都会遇到同样的问题。您可以将其放入数据库，但随后您可能想要对其进行加密，因此您遇到了存储密钥的位置等问题。*除了将它放入应用程序配置（不是*源代码，例如 .properties 文件）之外，我不会考虑。服务器的物理安全是真正的答案。

# python - 隔离其他地方包含的字符串

> ID：15589026
> 
> 赞同：0
> 
> 时间：2013-03-23T16:16:30.683
> 
> 标签：python

我正在设置一个脚本来根据文件名中包含的文本合并 PDF。我这里的问题是“Violin I”也包含在“Violin II”中，“Alto Saxophone I”也包含在“Alto Saxophone II”中。我该如何设置，所以 tempList 将只包含来自“Violin I”的条目并排除“Violin II”，反之亦然？

```
pdfList = ["01 Violin I.pdf", "02 Violin I.pdf","01 Violin II.pdf", "02 Violin II.pdf",  ]
instruments = ["Soprano", "Tenor", "Violin I", "Violin II", "Viola", "Cello", "Contrabass", "Alto Saxophone I", "Alto Saxophone II", "Tenor Saxophone", "Baritone Saxophone"]

# create arrays for each instrument that can be used for merging/organization
def organizer():
    for fileName in pdfList:
        for instrument in instruments:
            tempList = []
            if instrument in fileName:
                tempList.append(fileName)
        print tempList

print pdfList
organizer() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:28:22.980

避免包含子字符串的一种方法是使用正则表达式，例如：

```
import re

pdfList = ["01 Violin I.pdf", "02 Violin I.pdf","01 Violin II.pdf", "02 Violin \
II.pdf",  ]
instruments = ["Soprano", "Tenor", "Violin I", "Violin II", "Viola", "Cello", "\
Contrabass", "Alto Saxophone I", "Alto Saxophone II", "Tenor Saxophone", "Barit\
one Saxophone"]

# create arrays for each instrument that can be used for merging/organization   
def organizer():
    for fileName in pdfList:
        tempList = []
        for instrument in instruments:
            if re.search(r'\b{}\b'.format(instrument), fileName):
                tempList.append(fileName)
        print tempList

print pdfList
organizer() 
```

这将包含您的搜索词，`\b`以便它仅在开头和结尾在单词边界上时匹配。此外，也许显而易见但值得指出的是，这也会使您的乐器名称成为正则表达式的一部分，因此请注意，如果您使用的任何字符也是正则表达式元字符，它们将被解释为此类（现在您不是）。更通用的方案需要一些代码来查找和正确转义这些字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T16:25:50.630

尝试进行此更改：

```
...
if instrument+'.pdf' in fileName:
... 
```

这会涵盖所有情况吗？

# java - scrollingtabs 和 viewpager

> ID：15589027
> 
> 赞同：1
> 
> 时间：2013-03-23T16:16:32.823
> 
> 标签：java, android, menu, tabs, android-tabs

我正在使用标签和 viewpager。标签是特价和朋友，我想添加新标签（签到）。所以新的标签会是这样的，签到-特价-朋友。当然，新选项卡将有自己的布局和类。问题是，我应该怎么做（添加新标签）？我的意思是在代码中。

[我的家.java](https://www.dropbox.com/s/94nujxc2pibi16o/Home.java)

[我的主页.xml](https://www.dropbox.com/s/61y1saf7ewl6t78/home.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:03:22.827

您可以使用 onCLickListener 并在其中添加一个意图。

# layout - ExtJS 布局，水平然后垂直增长

> ID：15589028
> 
> 赞同：5
> 
> 时间：2013-03-23T16:16:34.980
> 
> 标签：layout, extjs4, extjs4.1

我有一个 Ext.panel.Panel，我想在其中动态添加其他代表我的应用程序中不同“事物”的“较小”面板。此面板位于网格的顶部，与网格的宽度相同。当“较小”面板动态添加到此“容器面板”时，如果所有“小”面板的总宽度大于容器的宽度，我希望面板水平添加，然后垂直添加。

我试过'fit'，'hbox'，'vbox'，一切。

我错过了布局类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-06T01:56:44.130

我发现在 ExtJS 4.2.2 中使用上面的示例时，面板是垂直堆叠的。

我需要补充：

```
style: {
    float: 'left'
}, 
```

到每个项目，然后一切都很好。

我使用静态配置（如上面的示例）和动态添加/删除（为每个子项使用自定义容器）进行了测试。容器面板每次都以类似流的方式重新渲染。在调整浏览器窗口大小时也更正 - 移动子项以适应新的面板大小。

默里

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T21:22:21.410

你所追求的通常被称为`flow`布局，ExtJS 没有开箱即用（如果你问我，他们不这样做有点傻，因为它是一种非常常见的布局，实际上是应用在他们的大多数数据视图示例，但使用 css 而不是布局）。

但是它可以很容易地使用没有`columnWidth`定义的列布局来实现。复制[这个答案](https://stackoverflow.com/questions/6181354/how-to-implement-a-flowlayout-in-extjs-4)：

```
 Ext.create('Ext.Panel', {
        width: 500,
        height: 280,
        title: "ColumnLayout Panel",
        layout: 'column',
        renderTo: document.body,
        items: [{
            xtype: 'panel',
            title: 'First Inner Panel',
            width:  250,
            height: 90
        },{
            xtype: 'panel',
            title: 'Second Inner Panel',
            width: 200,
            height: 90
        }, {
            xtype: 'panel',
            title: 'Third Inner Panel',
            width: 150,
            height: 90
        }]
  }); 
```

![在此处输入图像描述](../Images/1fee31d4408910134446d5363378f362.png)

# eclipse - 修复双 Eclipse 菜单栏

> ID：15589031
> 
> 赞同：0
> 
> 时间：2013-03-23T16:16:42.513
> 
> 标签：eclipse, menubar

我什至不确定到底该怎么称呼它，但是我该如何解决呢？显然，我只需要在 Eclipse 菜单栏中为这些选项放置一个位置。它不复制整个事情，只是这一部分。如果我删除所有语言选项（Java、Debug、C++），它就会消失，但我需要能够切换视图。建议？ ![在此处输入图像描述](../Images/3b8936714df3927b2885c0098a689883.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:22:08.710

**窗口**→**自定义透视**→**菜单可见性**

在那里您应该能够*删除/添加*菜单项。

# .net - 输入到非活动窗口

> ID：15589034
> 
> 赞同：0
> 
> 时间：2013-03-23T16:16:54.887
> 
> 标签：.net, vb.net, visual-studio-2010

我有以下 Visual Basic 2010 代码：

```
Function GetScreenPixel(ByVal Location As Point) As Color
    Dim C As Color
    Using Bmp As New Bitmap(1, 1)
        Using G As Graphics = Graphics.FromImage(Bmp)
            G.CopyFromScreen(Location, Point.Empty, Bmp.Size)
            C = Bmp.GetPixel(0, 0)
        End Using
    End Using
    Return C
End Function 
```

获取屏幕上像素的颜色。

然后我使用类似的东西：

```
Public Declare Sub mouse_event Lib "user32" Alias "mouse_event" (ByVal dwFlags As Integer, ByVal dx As Integer, ByVal dy As Integer, ByVal cButtons As Integer, ByVal dwExtraInfo As Integer)

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    If GetScreenPixel(New Point(650, 728)).ToString = "Color [A=255, R=255, G=255, B=255]" Then
        Cursor.Position = New Point(955, 548)
        mouse_event(&H2, 0, 0, 0, 0)
        mouse_event(&H4, 0, 0, 0, 0)
    End If
End Sub 
```

获取屏幕上的某个按钮是否显示并处于活动状态（如果为 true，则像素 650、728 将为白色），如果是，则单击它。

这工作正常。我的问题是，如果我能以某种方式扩展代码，以便获取像素颜色的函数和单击鼠标的代码都可以应用于非活动窗口。这样我就可以让我的应用程序运行并在必要时单击按钮，并且我还可以同时将我的计算机用于其他事情。

我听说过一种叫做：

```
Public Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
(ByVal lpClassName As String, ByVal lpWindowName As String) As IntPtr 
```

但是，我很难让它与上面显示的示例代码一起工作 - 它仍然没有提供在非活动窗口上获取像素颜色的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T20:43:03.920

为了**激活其他窗口**，必须在 Mouse DOWN 和 UP 之间进行**睡眠**以模拟真实点击

```
mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_ABSOLUTE,
     (uint)Convert.ToInt32(position.X * (65535.0 / System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width)),
    (uint)Convert.ToInt32(position.Y * (65535.0 / System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height)), 0, 0);

Thread.Sleep(400);

mouse_event(MOUSEEVENTF_LEFTUP | MOUSEEVENTF_ABSOLUTE,
     (uint)Convert.ToInt32(position.X * (65535.0 / System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width)),
    (uint)Convert.ToInt32(position.Y * (65535.0 / System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height)), 0, 0); 
```

此外，您可能对鼠标移动功能感兴趣 - 应使用 MOUSEEVENTF_ABSOLUTE 标志在 0 - 65535 范围内设置位置

```
mouse_event(MOUSEEVENTF_MOVE | MOUSEEVENTF_ABSOLUTE,
                    (uint)Convert.ToInt32(position.X * (65535.0 / System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width)),
                    (uint)Convert.ToInt32(position.Y * (65535.0 / System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height)), 0, 0); 
```

# php - PHP exec() 运行但提前中止

> ID：15589042
> 
> 赞同：0
> 
> 时间：2013-03-23T16:17:43.373
> 
> 标签：php, unix, web, webserver

作为我正在进行的模拟项目的一部分，我必须生成一些图像。这些需要根据用户输入生成。我正在使用 PHP 的`exec`函数，它在很大程度上就像一个魅力。但是，我的程序以退出代码 134 退出，据我所知，这意味着它正在中止。据我所知，我已经设置了所有适当的权限。会不会是内存问题？任何帮助表示赞赏。如有必要，我可以提供更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:21:35.557

由于您使用的是 PHP exec 命令，这意味着它不是 PHP 错误，我搜索了 shell/bash 错误并发现：

```
Exit code 134 means your program was aborted (received SIGABRT), 
perhaps as a result of a failed assertion. 
```

如果您使用断言进行编程并想要调试，我建议将以下重定向 stderr 到 stdout：

```
dup2(STDOUT_FILENO, STDERR_FILENO); 
```

# c++ - 在 C++ 中随机播放一个 3d 数组

> ID：15589044
> 
> 赞同：0
> 
> 时间：2013-03-23T16:17:48.037
> 
> 标签：c++, magic-square

我有这段代码创建一个 3d 数组并将 1-9 放在一个 3x3x3 框中。我需要找到一种方法来打乱这个数组的元素，以比较新打乱的数组与幻方的接近程度。任何想法表示赞赏！谢谢！

```
 for(i = 0; i < x; i++)
{
    cout << "Finding a Magic Square..." << endl;

    for(j = 0; j < y; j++)
    {
        cout << endl;

        for(k = 0; k < z; k++)
        {
            array3D[i][j][k] = (i+1) + (j * z) + k;
            cout << '\t' << array3D[i][j][k];
        }
    }

    cout << endl << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:08:29.350

您可以使用[`std::random_shuffle(...)`](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)，但必须正确使用它才能获得真正的随机排列。在 2D 数组上迭代地使用 random_shuffle 将产生每行的相关条目。

```
#include <algorithm>
#include <iterator>
#include <iostream>
#include <cstdlib>
#include <ctime>

int main () {
    std::srand(std::time(NULL)); // initialize random seed

    // shuffle a 2D array
    int arr[3][3] = {
        {0, 1, 2},
        {3, 4, 5},
        {6, 7, 8}
    };

    // Shuffle from the first member to the last member.
    // The array is interpreted as a 9 element 1D array.
    std::random_shuffle(&arr[0][0], &arr[2][3]);

    // print the result
    for (int row = 0; row < 3; ++row) {
        for (int col = 0; col < 3; ++col) {
            std::cout << arr[row][col] << ' ';
        }
        std::cout << std::endl;
    }
    return 0;
} 
```

在线演示：http: [//ideone.com/C4PlRs](http://ideone.com/C4PlRs)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T16:19:26.273

您可以使用[`std::random_shuffle`](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)shuffle 数组。

# javascript - Javascript-使用不同的图像播放和暂停不同的音频文件

> ID：15589048
> 
> 赞同：1
> 
> 时间：2013-03-23T16:18:13.437
> 
> 标签：javascript, html, dom

嗨，我正在尝试允许多个图像播放和暂停不同的歌曲，直到现在我已经在选择图像时实现了歌曲的播放，但是当我暂停并尝试通过单击另一张图像恢复时，前一个文件被恢复而不是所需的文件下面是代码

Javascript

```
function StartOrStop(audioFile)
  {
    var audie = document.getElementById("myAudio");
    if(!audie.src || audie.src !== audioFile) 
       audie.src = audioFile;
    if(audie.paused == false)
     {
        audie.pause();
     }
     else
     {
       audie.play();
     }
  } 
```

HTML

```
<img src="images/play.png" alt="Play Button" width="57" height="50" onclick="StartOrStop('RWY.mp3')">

<img src="images/play.png"  alt="Play Button" width="57" height="50" onclick="StartOrStop('EL.mp3')">

    <audio controls id="myAudio" ></audio> 
```

关于如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:53:39.970

嗨，不知道为什么这不起作用。我已经修改了你的代码，所以试试这个

```
 function StartOrStop(audioFile)
{
var audie = document.getElementById("myAudio");
//logs to see filenames
console.log("audio src " ,audie.src); //this will output a full url e.g with www.example.com/file.mp3
console.log("file ", audioFile); // this only outputs what you pass in e.g "file.mp3"
//with the www.example.com the if statement below will be false as www.example.com/file.mp3 is not equal to file.mp3\. Either change the onclick event of the images to include the full path or edit the if statement to
// if(audie.src.indexOf(audioFile) != -1){

if( audie.src == audioFile){ 
   audie.paused ? audie.play() : audie.pause();
}else{
     audie.src = audioFile;
     audie.play();
}

} 
```

我已经在我的机器上本地运行了它，它可以按照你想要的方式工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T14:44:06.903

试试这个，现在它正在运行
希望它可以帮助你......

JAVASCRIPT代码

```
function Start(audioFile)
{
var audie = document.getElementById("myAudio");
    console.log("audio src " ,audie.src);
    console.log("file ", audioFile); 

    if( audie.src == audioFile){
       audie.paused ? audie.play() : audie.pause();
    }else{
     audie.src = audioFile;
     audie.play();
}

}

 function Stop(audioFile)
{
var audie = document.getElementById("myAudio");

console.log("audio src " ,audie.src);
console.log("file ", audioFile);

if( audie.src == audioFile){
   audie.paused ? audie.play() : audie.pause();
}else{
     audie.src = audioFile;
     audie.Pause();
}

} 
```

==================================================== =====
HTML 代码

```
<img src="images/play.png" alt="Play Button" width="57" height="50" onclick="Start('RWY.mp3')">
<br>
<img src="images/stop.png"  alt="StopButton" width="57" height="50" onclick="Stop('EL.mp3')">
<br>
    <audio controls id="myAudio" ></audio><br> 
```

# c# - 如何找出程序集的项目目录？

> ID：15589054
> 
> 赞同：0
> 
> 时间：2013-03-23T16:18:34.880
> 
> 标签：c#, projects-and-solutions, .net-assembly

为了启用复杂的调试方案，我需要我的程序集找出源文件在运行时的位置。

`Assembly`对象不知道这些信息，而且它可能不应该知道。该`.pdb`文件显然知道，但我不知道如何解析它。所以我想也许我可以在构建时使用属性标记我的程序集，效果如下：

```
[assembly: AssemblyMetadata("ProjectDirectory", $(ProjectDir))] 
```

我不能使用*当前*目录，因为它是由 IIS 在调试期间设置为某个临时目录的。我也不想对目录进行硬编码。

到目前为止，我在解决这个问题方面最接近的是使用该`Assembly.CodeBase`属性。它指向构建 IIS 解决方案的目录（`Solution/IISProject/bin/Debug/`而不是`/Solution/source/MyLibrary/`），但不是我的项目目录。一个 hacky 解决方案是从那里上升几级，然后再下降几级回到项目文件夹。如果可能的话，我非常想避免这种黑客攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:46:02.343

经过一番深思熟虑，我设法收集到足够的[灵感](http://uss.codeplex.com)来撰写以下片段。这个想法是使用`.pdb`文件来发现源代码的位置。您需要`ISymWrapper.dll`在 32 位模式下引用和编译。如果有更简单的方法，我会很高兴听到它。

```
using System;
using System.Diagnostics.SymbolStore;
using System.IO;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Linq;
public static class AssemblyDirectoryInfo
{
    private const string
        ImporterId = "7DAC8207-D3AE-4c75-9B67-92801A497D44",
        DispenserId = "809c652e-7396-11d2-9771-00a0c9b4d50c",
        DispenserClassId = "e5cb7a31-7512-11d2-89ce-0080c792e5d8";

    [Guid(ImporterId), InterfaceType(ComInterfaceType.InterfaceIsIUnknown), ComVisible(true)]
    public interface IMetaDataImport{}

    [Guid(DispenserId), InterfaceType(ComInterfaceType.InterfaceIsIUnknown), ComVisible(true)]
    interface IMetaDataDispenser
    {
        void DefineScope();

        void OpenScope([In, MarshalAs(UnmanagedType.LPWStr)] String szScope, [In] Int32 dwOpenFlags,
                       [In] ref Guid riid, [Out, MarshalAs(UnmanagedType.IUnknown)] out Object punk);
    }

    [DllImport("ole32.dll")]
    private static extern int CoCreateInstance([In] ref Guid guid,
        [In, MarshalAs(UnmanagedType.IUnknown)] Object pUnkOuter,
        [In] uint dwClsContext,
        [In] ref Guid riid,
        [Out, MarshalAs(UnmanagedType.Interface)] out Object ppv);

    public static DirectoryInfo GetAssemblyCodeBase(Assembly assembly)
    {
        var file = new FileInfo(assembly.Location);

        Guid dispenserClassId = new Guid(DispenserClassId),
             importerIid = new Guid(ImporterId),
             dispenserIid = new Guid(DispenserId);

        object dispenser, importer;

        CoCreateInstance(ref dispenserClassId, null, 1, ref dispenserIid, out dispenser);
        ((IMetaDataDispenser)dispenser).OpenScope(file.FullName, 0, ref importerIid, out importer);

        var ptr = Marshal.GetComInterfaceForObject(importer, typeof(IMetaDataImport));
        var reader = new SymBinder().GetReader(ptr, file.FullName, file.DirectoryName);
        return reader.GetDocuments()
                     .Select(d => d.URL)
                     .Where(v => !string.IsNullOrEmpty(v))
                     .OrderBy(v => v.Length)
                     .Select(v => new FileInfo(v).Directory)
                     .First();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:22:04.377

要启用这些类型的方案，最佳实践通常是将这些目录放在 web.config 中的设置中。所以你可以根据给定的情况说，使用这个目录而不是这个目录。人们经常使用 if (IsDebugging) 使用这个目录，否则使用这个目录。

# php - 使用 codeigniter htaccess 在整个站点上强制使用 ssl

> ID：15589057
> 
> 赞同：0
> 
> 时间：2013-03-23T16:18:47.583
> 
> 标签：php, apache, .htaccess, ssl

我有一个 codeigniter 站点，我希望它一直强制使用 ssl。我正在使用 htaccess 文件删除丑陋的 index.php

这是我现在拥有的 htacces 文件的内容...

```
 RewriteEngine on
 RewriteCond $1 !^(index\.php|static|robots\.txt)
 RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我该怎么做才能让它始终使用 ssl？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:31:28.613

尝试这个：

```
RewriteEngine On
#RewriteCond %{HTTPS} !=on
RewriteCond %{HTTPS} off
#RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
RewriteCond $1 !^(index\.php|static|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:31:30.210

尝试这个：

* * *

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^domain.com [NC]
RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ https://www.domain.com/$1 [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) index.php?/$1 
```

* * *

# iphone - 从地图坐标获取 CGPoint 或从 MKMapPoint iphone 获取 CGPoint

> ID：15589059
> 
> 赞同：2
> 
> 时间：2013-03-23T16:18:54.490
> 
> 标签：iphone, ios, core-graphics, mkmapview, cgpoint

您好，对于基于导航的应用程序，我需要`CGPoint`从坐标或 MKMapPoint 中获取`MKMapView`。我想在这些点之间画一条线，而不是一条折线。

我了解 MKPolyLine 和其他自定义折线，但由于某些特定条件，我必须从坐标或 MKMapPoint 获取 CGPoint。

我知道如何从 CGPoint 获取坐标

```
CLLocationCoordinate2D touchMapCoordinate 
    = [mapView convertPoint:touchPoint toCoordinateFromView:mapView]; 
```

但我也想要反向....我知道如何获得 MKMapPoint

```
MKMapPoint  mp = MKMapPointForCoordinate(aCoordinate); 
```

但不知道如何将 MKMapPoint 转换为 CGPoint。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:10:53.373

要将坐标转换为`CGPoint`，请使用以下方法

```
CGPoint point = [mapView convertCoordinate:location toPointToView:overlayView]; 
```

这里的位置是`CLLocationCoordinate2D`具有地图的对象，`latitude`并且`longitude`是`overlayView`您需要绘制折线的视图。

# android - Google Play - 零支持设备

> ID：15589061
> 
> 赞同：4
> 
> 时间：2013-03-23T16:19:01.877
> 
> 标签：android, google-play

我知道这里有类似的问题，但似乎没有一个令人满意的答案。

我正在尝试发布应用程序，但无论我尝试什么，开发者控制台都报告说支持的设备为零

![开发控制台截图](../Images/04266d71562269c891e8d464f0c2d34c.png)

这是我的完整清单；

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.blah.blahpro"
    android:versionCode="6"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="5" android:targetSdkVersion="17"/>

     <supports-screens
        android:anyDensity="true"

        android:xlargeScreens="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:resizeable="true"   />

    <compatible-screens>

    <!-- small size screens -->
     <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />

    <!--Only hdpi and xhdpi for normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />

    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />

    <!-- all xlarge size screens -->
    <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />

    <!-- Special case for Nexus 7 -->
    <screen android:screenSize="large" android:screenDensity="213" />

    </compatible-screens>        

    <uses-feature android:name="android.hardware.location" android:required="false"/>
    <uses-feature android:name="android.hardware.camera" android:required="false"/>

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-feature android:name="android.hardware.CAMERA" />
    <uses-permission android:name="android.permission.CAMERA" />

    <application
        android:icon="@drawable/blahicon"
        android:label="@string/app_name"
        android:allowBackup="false">

        <activity
            android:label="@string/app_name"
            android:name="com.blah.blahpro.Main" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:label="@string/app_name"
            android:name="com.blah.satcalcpro.Find"
            >

            <intent-filter >
                <action android:name="com.blah.lookangles.FIND" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>        

    </application>

</manifest> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T17:44:50.460

问题已排序，但不确定如何...我尝试删除所有兼容屏幕和支持屏幕代码，但没有太大区别。我唯一能想到的是我删除了这条线；

```
<uses-feature android:name="android.hardware.CAMERA" /> 
```

反正不应该在那里。现在支持 2522 设备，非常高兴。

无论如何，这是新的清单：

```
<uses-sdk android:minSdkVersion="5" android:targetSdkVersion="17"/>

<uses-feature android:name="android.hardware.location" android:required="false"/>
<uses-feature android:name="android.hardware.camera" android:required="false"/>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CAMERA" />

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light"
    android:allowBackup="false">

    <activity
        android:label="@string/app_name"
        android:name="com.blah.blahpro.Main" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:label="@string/app_name"
        android:name="com.blah.blahpro.Find"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        >

        <intent-filter >
            <action android:name="com.blah.blahactivity.FIND" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>        

</application> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-07T20:00:38.933

似乎`uses-feature`是区分大小写的。

您在清单中编写了两个功能：

```
<uses-feature android:name="android.hardware.camera" android:required="false"/>
<uses-feature android:name="android.hardware.CAMERA" /> 
```

第一个没问题。您想使用相机，但这不是必需的。

问题是第二个需要一个`android.hardware.CAMERA`，这在任何 Android 设备中都不存在。他们有一个`camera`，而不是一个`CAMERA`。

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:36:10.940

我建议在清单中注释掉 compatible-screens 和 support-screens，看看上传 apk 时会发生什么。我希望您在执行此操作时会看到允许使用许多设备。

然后，一次添加一些这些要求，每次上传 apk 并查看哪些限制导致设备数量下降。一旦确定了哪些限制导致了问题，就可以将这些限制排除在最终构建之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-13T11:41:18.003

我知道现在回答已经晚了，我面临同样的问题。将所有用户功能设置为 false 后，Play 商店仍显示支持的设备为零。

这是解决方案，希望对某人有所帮助

```
<uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" /> 
```

还

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true"
        android:xlargeScreens="true" /> 
```

# php - php mysql_select_db 不工作

> ID：15589064
> 
> 赞同：-2
> 
> 时间：2013-03-23T16:19:19.287
> 
> 标签：php, mysql-select-db

我创建了一个名为“class.admin.php”的类，它进行了一些检查。我有一个调用类的文件，该类在尝试选择数据库时工作正常。

当我运行时，`mysql_select_db() or die`我收到错误“未选择数据库”。

类.admin.php

```
class admin {

    ### Function that check for the connect file (if it exists)
    public function checkConnector() {
        if(file_exists(CONN)) { return true; } else { return false; }
    }

    ### Check connection to MYSQL
    public function checkConnection() {
        global $cn; if(mysql_connect()) { return true; } else { return false; }
    }

    ### Check connection to database
    public function checkDB() { 
        global $db; if(mysql_select_db()) { return true; } else { return false; } 
    } 
```

索引.php

```
$admin = new admin();

# Check the connect file exists
if($admin->checkConnector() === true) {

    # Check connection to MYSQL server
    if($admin->checkConnection()  === true) {

        ### Check selection of DB
        if($admin->checkDB() === true) {

            print 'Selection of database is fine.';

        } else {

            print 'Selection of database is not working.';

        }

    } else {

        print '<p>I\'m sorry, could not connect to MYSQL.</p>';

    };

} else {

    print '<p>I\'m sorry the connection file does not exist. Please install accordingly.</p>';

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T16:21:55.587

对于`SELECT`a `DB`，您必须提供其名称

```
mysql_select_db();   // wrong, which database to select? 
```

正确的是

```
mysql_select_db("MyDatabaseName"); 
```

参考：[mysql_select_db](http://php.net/manual/en/function.mysql-select-db.php)

# css - 使用带有溢出的 div 构建一个长表。（推特引导）

> ID：15589068
> 
> 赞同：3
> 
> 时间：2013-03-23T16:19:30.010
> 
> 标签：css, html, twitter-bootstrap

我正在尝试用 div 构建一个表。表格应该很长，所以我必须使用溢出自动/隐藏。

这是结果[http://jsfiddle.net/gj7vm/](http://jsfiddle.net/gj7vm/)

问题是，当我尝试为`.group`div 添加标题时，一切都突然中断（[http://jsfiddle.net/ata5U/1/](http://jsfiddle.net/ata5U/1/)）。（每个`.group`div 应该包含其他 div，就像表格一样，但这里我只是从简单的`.title`div 开始，它应该有固定的高度）

如何解决这个问题？此外，是否有任何类似于我正在尝试构建的东西的好例子（一个带有溢出的长 html 表：hidden/auto）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:50:46.940

如果你尝试用 div 构建表格，为什么不使用 CSS 表格显示值呢？它们会让你的 div 表现得像表格单元格。

下面是一个 CSS 示例：

```
div#screen {
  height: 120px;
  display: table;
}
#screen .row {
  display: table-row;
}
.group {
  width: 400px;
  height: 100px;
  color: #468847;
  background-color: #dff0d8;
  border-color: #d6e9c6;
  display: table-cell;
} 
```

和 HTML：

```
<div id="screen" class="well well-large">
  <div class="row">
    <div class="group">
        <div class="group-title">foobar</div>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque et diam risus. Proin eu pellentesque massa. Sed non turpis nunc, ultrices lacinia risus. Nunc et massa nec nulla commodo fermentum. Ut sit amet est id erat auctor pellentesque id non neque. Aliquam lacinia luctus condimentum. Phasellus fringilla metus at lectus auctor venenatis. Phasellus nec nulla at risus elementum feugiat ut sit amet tortor. Mauris egestas sapien non purus eleifend suscipit. Cras tortor metus, porta ac ultrices eget, sagittis a augue. Nullam facilisis, lacus iaculis condimentum placerat, mi metus pretium justo, a scelerisque enim felis id eros. Integer dictum, mi et posuere dapibus, risus ante ullamcorper tortor, sit amet adipiscing libero massa ut neque.
    </div>
    <div class="group">
      <div class="group-title">foobar</div>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque et diam risus. Proin eu pellentesque massa. Sed non turpis nunc, ultrices lacinia risus. Nunc et massa nec nulla commodo fermentum. Ut sit amet est id erat auctor pellentesque id non neque. Aliquam lacinia luctus condimentum. Phasellus fringilla metus at lectus auctor venenatis. Phasellus nec nulla at risus elementum feugiat ut sit amet tortor. Mauris egestas sapien non purus eleifend suscipit. Cras tortor metus, porta ac ultrices eget, sagittis a augue. Nullam facilisis, lacus iaculis condimentum placerat, mi metus pretium justo, a scelerisque enim felis id eros. Integer dictum, mi et posuere dapibus, risus ante ullamcorper tortor, sit amet adipiscing libero massa ut neque.  </div>
    <div class="group">
      <div class="group-title">foobar</div>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque et diam risus. Proin eu pellentesque massa. Sed non turpis nunc, ultrices lacinia risus. Nunc et massa nec nulla commodo fermentum. Ut sit amet est id erat auctor pellentesque id non neque. Aliquam lacinia luctus condimentum. Phasellus fringilla metus at lectus auctor venenatis. Phasellus nec nulla at risus elementum feugiat ut sit amet tortor. Mauris egestas sapien non purus eleifend suscipit. Cras tortor metus, porta ac ultrices eget, sagittis a augue. Nullam facilisis, lacus iaculis condimentum placerat, mi metus pretium justo, a scelerisque enim felis id eros. Integer dictum, mi et posuere dapibus, risus ante ullamcorper tortor, sit amet adipiscing libero massa ut neque. 
    </div>
  </div>
</div> 
```

这是一个小提琴：http: [//jsfiddle.net/8g8sw/1/](http://jsfiddle.net/8g8sW/1/)

当你使用这些时，你不需要溢出：自动，因为 div 会像表格单元格一样自动拉伸以适应它们的内容。

欲了解更多信息：[http ://www.vanseodesign.com/css/tables/](http://www.vanseodesign.com/css/tables/)

如果有理由不想使用 CSS 表格（例如浏览器支持），请说出来，但它们似乎是最简单和最明显的选择。

# android - Android自定义GIFView调整大小？

> ID：15589074
> 
> 赞同：0
> 
> 时间：2013-03-23T16:19:51.553
> 
> 标签：android, xml, gif, android-custom-view, animated-gif

我目前正在构建一个需要使用 gif 的 android 应用程序，并且我有一个自定义`GIFView`来显示动画 gif。我想设置这个视图的大小，但是用像素写下大小不是很好，因为它在设备之间发生了巨大的变化。所以我认为将它们都设置为`wrap_content`可以解决这个问题，但事实并非如此。设置`layout_width`为`wrap_content`一切正常，但设置`layout_height`为`wrap_content`整个视图时消失。我该如何解决这个问题？

这是`GIFView`：

```
package XXX.XXX.XXX;

import java.io.InputStream;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Movie;
import android.net.Uri;
import android.util.AttributeSet;
import android.view.View;

public class GIFView extends View {

    private Movie movie;
    private int gifId;
    private long movieStart;

    public GIFView(Context context) {
        super(context);
        initializeView();
    }

    public GIFView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setAttrs(attrs);
        initializeView();
    }

    public GIFView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setAttrs(attrs);
        initializeView();
    }

    public void setGIFResource(int resId) {
        this.gifId = resId;
        initializeView();
    }

    public int getGIFResource() {
        return this.gifId;
    }

    private void initializeView() {
        if (gifId != 0) {
            InputStream is = getContext().getResources().openRawResource(gifId);
            movie = Movie.decodeStream(is);
            movieStart = 0;
            this.invalidate();
        }
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.TRANSPARENT);
        super.onDraw(canvas);
        long now = android.os.SystemClock.uptimeMillis();
        if (movieStart == 0) {
            movieStart = now;
        }
        if (movie != null) {
            int relTime = (int) ((now - movieStart) % movie.duration());
            movie.setTime(relTime);
            movie.draw(canvas, getWidth() - movie.width(), getHeight() - movie.height());
            this.invalidate();
        }
    }

    private void setAttrs(AttributeSet attrs) {
        if (attrs != null) {
            TypedArray a = getContext().obtainStyledAttributes(attrs, R.styleable.GIFView, 0, 0);
            String gifSource = a.getString(R.styleable.GIFView_src);
            //little workaround here. Who knows better approach on how to easily get resource id - please share
            String sourceName = Uri.parse(gifSource).getLastPathSegment().replace(".gif", "");
            setGIFResource(getResources().getIdentifier(sourceName, "drawable", getContext().getPackageName()));
            a.recycle();
        }
    }

} 
```

我的 XML 文件：

```
 <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/course_title"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="30dp"
            android:padding="5dp"
            android:background="#A47D42">

            <XXX.XXX.XXX.GIFView
                android:id="@+id/animation_1"
                android:layout_width="240px"
                android:layout_height="200px"
                android:layout_gravity="center_horizontal"
                app:src="@drawable/someanimation" >
            </XXX.XXX.XXX.GIFView>
        </LinearLayout> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-23T16:37:05.977

使用 Imageview 代替 view 并从 java 代码启动 GIFview 而不是将其设置为 xml。

# html - 基于百分比宽度的水平导航

> ID：15589082
> 
> 赞同：0
> 
> 时间：2013-03-23T16:20:44.573
> 
> 标签：html, css, navigation, html-lists

我需要帮助弄清楚如何构建基于 ul-li 的水平导航。棘手的部分是，**所有**尺寸都必须以百分比表示。没有像素，没有时间。此外，所有列表项的宽度应相等并填充整个 ul。另一个问题是，至少在我的尝试中，有 7 个列表项，每个项都给我一个丑陋的 14.28...% - 在我迄今为止的尝试中，导致主要内容区域约为 1- 2px 关闭，取决于浏览器窗口大小。

这是我正在处理的布局草图： [链接到图像（因为我还没有足够的声誉）](http://img.flashtux.org/img1332a1329f8fxfc69fca8.png)

我现在在哪里：

```
<ul id="#main_menu">
    <li class="main_menu_li"><a href="#">One</a></li><li class="main_menu_li"><a href="#">Two</a></li><li class="main_menu_li"><a href="#">Three</a></li><li class="main_menu_li"><a href="#">Four</a></li><li class="main_menu_li"><a href="#">Five</a></li><li class="main_menu_li"><a href="#">Six</a></li><li class="main_menu_li"><a href="#">Seven</a></li>
</ul>

#main_menu{
width: 100%;
list-style: none;
margin: auto 0;
padding: 0;
text-align: left;
overflow: auto;
}

.main_menu_li{
display: inline;
text-align: center;
margin: 0;
padding: 0;
width: 14.28%;
}

.main_menu_li>a{
text-decoration: none;
border: 1px solid #fff;
width: auto;
display: inline-block;
} 
```

这段代码的问题是，在 ul 的右侧仍有空间。

我希望你能帮帮我！提前感谢您的努力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:34:57.290

尝试使用`display: table`：

```
#main_menu{
    display: table;
}

.main_menu_li{
    display: table-cell;
    width: 14.28%;
}

.main_menu_li>a{
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:17:43.490

好的，所以这是另一种选择。这个更不兼容，但只是为了向您展示并且因为您对使用感到不舒服`display: table`：

```
#main_menu
{
    width: 100%;
    display: flex;
    flex-direction: row;
    table-layout: auto;
}

#main_menu > li
{
    flex: 1 1 auto;
    width: 14.28%;
}

#main_menu > li > a
{
    display: block;
} 
```

这是一个[小提琴](http://jsfiddle.net/5QRCT/2/)（在 Chrome 中测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:10:59.533

借助一点**CSS3 魔法**，这很有可能。

这是[小提琴](http://jsfiddle.net/7D2hB/1/)。重要的 CSS：

```
nav > ul > li {
    float: left;
    width: 12.28%; /* for older browsers that don't support calc */
    width: -webkit-calc(100% / 7);
    width: -moz-calc(100% / 7);
    width: calc(100% / 7);
    background: white;
    color: #333;
} 
```

如您所见，我添加了一个 jQuery 后备。不幸的是，JSFiddle 似乎在 IE10 的 IE8 模式下不起作用，所以我无法测试它是否有效。但是，应该！

正如您[在此处](http://caniuse.com/calc)看到的，以下浏览器支持`calc()`：

*   FF4.0 及更高版本（`-moz-`前缀）
*   IE9.0 及更高版本
*   Chrome 19.0 及更高版本（`-webkit-`前缀）
*   Opera 不**支持**其`calc`最现代的浏览器 (12.1)
*   请参阅链接以获取更多信息

# vb.net - 如何在 VB.Net 中使 GridView 可见

> ID：15589083
> 
> 赞同：1
> 
> 时间：2013-03-23T16:20:49.437
> 
> 标签：vb.net, gridview

我有`GridView`一个表单，即使`Visible`已`True`在属性窗口中设置为，它在浏览器中也不可见。更重要的是，我有以下代码可以使数据在 的列中可见`GridView`，但似乎对我没有任何作用。如果有人可以帮助我，我会很高兴。

```
Sub showgrid()
     Try
         ds.Clear()
         ada = New SqlDataAdapter("Select SubjectCode'Subject Code',SubjectName'Subject Name',SubjectType'Subject Type',UserId'User Id',Password from ProgramDetails.Subjects", cn)
         ada.Fill(ds, "ProgramDetails.Subjects")
         cmd = New SqlCommand("Select SubjectCode'Subject Code',SubjectName'Subject Name',SubjectType'Subject Type',UserId'User Id',Password from ProgramDetails.Subjects", cn)
         ada.SelectCommand = cmd
         ada.Fill(ds)
         GridView1.DataSource = ds.Tables(0)
     Catch ex As Exception
     End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:25:51.047

似乎您缺少`DataBind()`.`GridView`

```
GridView1.DataSource = ds.Tables(0)
GridView1.DataBind()   // Add this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:21:57.367

```
 Try
        ds.Clear()
        ada = New SqlDataAdapter("Select SubjectCode'Subject Code',SubjectName'Subject Name',SubjectType'Subject Type',UserId'User Id',Password from ProgramDetails.Subjects", cn)
        ada.Fill(ds, "ProgramDetails.Subjects")
        cmd = New SqlCommand("Select SubjectCode'Subject Code',SubjectName'Subject Name',SubjectType'Subject Type',UserId'User Id',Password from ProgramDetails.Subjects", cn)
        ada.SelectCommand = cmd
        ada.Fill(ds)
        GridView1.DataSource = ds.Tables(0)
        GridView1.DataBind()'binds the datasource to the GridView
    Catch ex As Exception
    End Try 
```

# asp.net - MVC4 - 绑定嵌套集合

> ID：15589086
> 
> 赞同：1
> 
> 时间：2013-03-23T16:21:34.713
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, collections, model-binding

我有两节课：

```
public class Exercise
{
  public Guid Id {get;set;}
  public string Name {get;set;}
  public List<ExerciseItem> Items {get;set;}
}

public class ExerciseItem
{
  public Guid Id {get;set;}
  public string Name {get;set;}
  public string Content {get;set;}
} 
```

我对创建一个练习对象也有我的看法。该视图上有一个名为“添加锻炼项目”的按钮，我在其中动态调用 ajax 方法以返回锻炼项目对象的部分视图。正确返回视图。这种观点如下：

```
@model Elang.Models.ExerciseItem
<div>
   <input type="hidden" name="Items.Index" value="@Model.Id" />
   <input type="hidden" id="Items@(Model.Id)__Id" name="Items[@Model.Id].Id" value="@Model.Id" />
   <input type="text" id="Items@(Model.Id)__Content" name="Items[@Model.Id].Content" class="inputText"/>
</div> 
```

问题是当我提交表单并调用我的“创建”方法时：

```
[HttpPost]
public ActionResult Create(Exercise exercise)
{
    //add exercise to db
    //HOWEVER!!
    //exercise.Items is empty
} 
```

我的项目为空。我究竟做错了什么？有人可以给我一些建议，我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T16:59:43.973

我真的不知道为什么这么多人坚持不使用辅助方法，并且想要自己完成所有表单字段。只要您正确使用它们，助手就会确保您的格式正确。

但是，您的真正问题是您的 ActionMethod 所需的运动模型与`ExerciseItem`您的 PartialView 使用的模型之间的阻抗不匹配。您将 Partial 用作 EditorTemplate，这会导致问题。

相反，使用 EditorTemplate，并使用辅助方法，一切都会正常进行。

在视图路径（本地文件夹或共享视图中）创建一个名为 EditorTemplates 的文件夹，并添加一个名为`ExerciseItem.cshtml`. 在该文件中，使用以下代码：

```
@model Elang.Models.ExerciseItem
<div>
    @Html.Hidden(m => m.Id)
    @Html.TextBoxFor(m => m.Content)
</div> 
```

然后，在您的父视图中，只需使用以下内容，它将自动遍历所有集合并生成正确命名的字段：

```
@Html.EditorFor(m => m.Items) 
```

如果您仍想使用 Ajax 检索项目，则将 EditorFor 放在局部视图中，并让局部视图采用练习模型。

**简单地说，在渲染集合时，使用编辑器/显示模板。它将使您的生活变得如此轻松，并避免以模型绑定器期望的正确格式获取表单字段命名约定的麻烦。**

我认为这里至少有 50% 的问题是关于“我的模型是空的！” 如果他们正确使用 EditorTemplates，就不会发生变化

# hibernate - Hibernate 在映射类中定义数据类型（对象/基元）的最佳方式

> ID：15589095
> 
> 赞同：-1
> 
> 时间：2013-03-23T16:22:35.603
> 
> 标签：hibernate

我正在使用休眠 3.3 开发 Struts2。当我从 oracle DB 对我的表进行逆向工程时，我得到了使用 BigDecimal、Long、Boolean 等在类中映射的表的所有表编号字段，所有都映射为对象，而不是像（long、boolean 等）这样的原始数据类型。现在在这种情况下，我没有遇到任何问题。但我想知道的是，当我网站的用户数量增加并且执行更多操作时会导致 JVM 内存不足问题吗？我应该将映射变量名称更改为原始类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:25:46.037

如果列不可为空，则应使用原始类型，如果列可空，则应使用包装对象。

您不应该根据它使用的内存来选择字段的类型。您应该根据需要在现场存储的内容来选择它。

# apache - 禁止使用 .htaccess 从空白或“-”引荐来源访问特定页面

> ID：15589100
> 
> 赞同：0
> 
> 时间：2013-03-23T16:23:13.177
> 
> 标签：apache, .htaccess, mod-rewrite

我最近又遇到了一些 DDOS 攻击问题。基本上我想禁止访问某个路径。

来自日志文件的示例：

> 109.242.25.254 - - [23/Mar/2013:16:09:35 +0100] "GET /?op=my_account HTTP/1.1" 200 4218 "-" "Mozilla/5.0 (X11; U; Linux i686; en-美国；rv:1.9.0.10) Gecko/2009042523 Ubuntu/9.04 (jaunty) Firefox/3.0.10

所以我想禁止空白引用者或“-”引用者访问路径“？op = my_account”并将它们发送到403页面。

我用htaccess这样开始：

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_REFERER} !^http(s)?://(www.)?mysite.com [NC]
RewriteRule ^\?op=my_account$ - [F] 
```

所以基本上我不允许所有其他引用者访问这个页面，除了我的页面。但不知何故，这行不通。我想我在第二行遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:01:39.830

您不能使用`\?op=my_account`in [`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)，因为那里没有查询字符串，只有 URL 路径。您必须[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)与 a 一起`%{QUERY_STRING}`使用

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mysite\.com [NC]
RewriteCond %{QUERY_STRING} ^op=my_account$
RewriteRule ^$ - [F] 
```

# c - 这个反转字符串代码有什么问题（C）

> ID：15589101
> 
> 赞同：1
> 
> 时间：2013-03-23T16:23:33.263
> 
> 标签：c, malloc

这是一个返回反向字符串的代码，如“ABC”返回“CBA”，但它返回这个“CBA═²²²²ß♣Y*&s”。怎么了？

```
char* inv(char* C)
{
    int lenght = strLenght(C)-1;
    int idx=0;

    char* tempStr = (char*)malloc(lenght+2);
    for (;lenght>=0;lenght--,idx++)
    {
        tempStr[idx] = C[lenght];
    }
    return tempStr;
}
int strLenght(char* str)
{
    int lenght=0;
    while(str[lenght] != '\0')
        lenght++;
    return lenght;
}

int main(int argc, char *argv[])
{
    char* st= "ABC";
    char* sr = inv(st);
    printf("%s",sr);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T16:26:01.833

你`tempStr`的不是空终止的。[strlen()](http://www.cplusplus.com/reference/cstring/strlen/)也是c 中的一个集成函数，您不必自己编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T16:28:43.530

就像评论说我错过了'\ 0'，谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:44:39.467

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void reverse(char *des, char *src)
{
    int len = strlen(src) + 1;      //strlen() can't calculate the '\0'
    int i, j;
    for (i = 0, j = strlen(src) - 1;
         i < len; i++, j--) {
        des[i] = src[j];
    }
    des[i] = '\0';      //important!!
}
int main(int argc, char *argv[])
{
    char* st= "ABC";
    char  sr[strlen(st) + 1];
    reverse(sr, st);
    printf("%s",sr);
} 
```

# rss - 能够阅读外部 RSS 提要，但未找到本地提要

> ID：15589102
> 
> 赞同：0
> 
> 时间：2013-03-23T16:23:35.383
> 
> 标签：rss, dotnetnuke, asp.net-4.5

我有 DNN 6.x 和 7.x 站点和 asp.net 4.5。我已经测试了一些 RSS 阅读器模块。

如果我包含来自另一个站点的 RSS 提要，它们可以正常工作，但是当我尝试从同一站点上的另一个页面读取 RSS 提要时，它会失败。

我已经测试了本地 RSS 提要并且它是有效的。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:18:21.727

我建议在这种情况下使用提琴手。您可以安装并启动 fiddler 并导航到安装模块且未加载提要的页面。

您将看到提要 url 请求和状态代码，这将帮助您调试/解决问题。

# android - 是否有一种字体可以填充按钮中的内容区域？

> ID：15589104
> 
> 赞同：1
> 
> 时间：2013-03-23T16:24:21.370
> 
> 标签：android, android-layout

下面的草图说明了我的问题。 ![在此处输入图像描述](../Images/a6ab20a9d218713ab8a4c79859609656.png)

顶部草图是内容、填充和边框的标准模型。我想要的显示在底部草图中。我想制作一个字母周围几乎没有多余空间的按钮，可以全部是大写。我能用标准的东西做的最好的事情是填充设置为 0 的中间草图。我发布了一个关于如何获得负填充的问题，但它没有在 Android 中定义，所以它已经过时了。我可以做图像按钮，但是对于我的特定问题有一组要求，这使得我需要在按下按钮时更改按钮中的文本，并在按钮有时更改背景颜色重点。

我开始意识到问题不在于在 Android 模型中设置参数，问题在于内容没有填满可用空间。

我的想法是，如果有一组字体不允许字体基线下方的下降或字母上方的重​​音标记，换句话说，字母填充内容区域或几乎​​填充它，那么我我回家了。显然我可以创建自定义字体，但如果我可以避免尝试找到字体编辑器并了解我很想知道它。我已经看过了，找不到。我检查了所有的 Unicode 字体，但找不到。我检查了在线字体选择器网站。我认为问题在于我想要的字体会使连续的文本行相互碰撞或几乎相互碰撞。

如果我需要创建自己的字体，我应该使用什么字体编辑器？也许有一种方法可以拉伸字体。我只想知道如何获得用大写字母填充内容区域的字体。

编辑添加这个：

只是为了澄清。我需要以编程方式更改文本。例如，按钮显示“ON”，按下时显示“OFF”。我使用蓝牙遥控器，因此需要在按钮获得焦点时更改按钮背景颜色。这两个要求使使用图像成为问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:49:06.873

字体的问题是，要填充该区域，字体需要一直到重音区域的顶部，一直到下降区域的底部。我所做的是找到了一个由 CR8Software Solutions 开发的名为 Type 3.2 的程序。您加载您最喜欢的字体并复制其中一个缩放操作以获得大约 1.56 的比例因子，对基线和字体边缘进行一些调整并保存它。试用版可让您节省最多大约大写的 R，所以在我的情况下，我只需要几个字母就可以了。现在我将字体加载到“assets”文件夹中，并在代码的 onCreate 部分添加代码，如下所示：

```
 Typeface tf = Typeface.createFromAsset(this.getAssets(), "startline.ttf");
    Button button = (Button) findViewById(R.id.buttonSync);
    button.setTypeface(tf);
    Button button2 = (Button) findViewById(R.id.buttonSetTgt);
    button2.setTypeface(tf);
    etc... 
```

现在我得到了一个按钮的所有行为，但背景按钮对字体很紧。我比图像更喜欢这个，因为我可以轻松调整大小并更改文本，而无需为我想做的每件事创建新图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:30:14.500

您可以扩展 a`view`并将其设置`background`为您的按钮`onDraw()`。在该视图（背景）的方法中，您可以绘制任何大小、边距、...的文本。也**可以**通过更改按钮的样式来实现。

# facebook - facebook ios sdk 3.2 是否需要应用程序密码

> ID：15589109
> 
> 赞同：6
> 
> 时间：2013-03-23T16:24:56.877
> 
> 标签：facebook, facebook-ios-sdk

我正在遵循 ios sdk 安装步骤，并注意到没有添加应用程序密钥的步骤。我错过了一步吗？他们如何保护应用程序身份并禁止其他人冒充另一个应用程序的应用程序 ID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T16:19:01.777

不要将您的应用程序机密放在您的 iOS 应用程序（或任何移动应用程序）中。配置 iOS 应用程序时，您需要指定捆绑 ID，该 ID 用作身份验证流程的一部分。

# android - 来自 Facebook 的内部服务器 500，具有特定的 IP/用户代理组合

> ID：15589114
> 
> 赞同：1
> 
> 时间：2013-03-23T16:25:56.580
> 
> 标签：android, facebook, login, ip, block

我正在手机上运行来自 Facebook 的 Android 应用 HelloFacebookSample。

未安装本机 Facebook 应用程序。

当我尝试通过我的 WiFi 网络登录时，登录过程停止在 > D/FacebookSDK.WebDialog(6404): Webview loading URL: [https://m.facebook.com/dialog/oauth?display=touch&client_id=XXX38988221028&scope=&type= user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess](https://m.facebook.com/dialog/oauth?display=touch&client_id=XXX38988221028&scope=&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess) <

...我得到的只是这个空白的白色对话框弹出窗口，左上角有关闭按钮 (x)。

到目前为止很糟糕，但是当我关闭手机上的无线并通过 3G 强制连接时，它可以工作。

我知道这听起来很疯狂，但事实就是如此。如果我切换到 Wi-Fi，它会停止，使用 3G 它会再次工作。

如果我在移动 Chrome 中输入“ [https://m.facebook.com/dialog/](https://m.facebook.com/dialog/) ...”网址，当我在 Wi-FI 上时，我会收到内部服务器错误 500，当我在上时，我会收到预期的登录页面3G。

现在我只是在寻找关于为什么会这样的想法。

*   会不会是 Facebook 屏蔽了我的 IP？（我做了很多重复测试，允许，删除应用程序等）

*   注意：“ [https://m.facebook.com/dialog/](https://m.facebook.com/dialog/) ...”网址可通过我的桌面浏览器通过所述 Wi-Fi 连接工作。因此，如果有任何形式的阻止，则必须针对 IP 和用户代理的组合。

**更新**：我也从另一个 Wi-Fi 网络尝试过，它按预期工作。所以看起来我真的从那个 IP/设备从 Facebook 获得了一个特定的“内部服务器 500”？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-01T12:38:00.163

就我而言，原因一定是被 Facebook 列入黑名单的 IP/User-Agent 组合：

当我尝试使用来自另一个 Wi-Fi 网络（即使用另一个 IP）的同一设备时，与 Facebook 的连接按预期工作。

或者，如果我将相同的 Wi-Fi 与另一个用户代理（即其他浏览器）一起使用，那么它也会按预期工作。

# algorithm - 在不同楼层寻找 A 到 B 的路径

> ID：15589119
> 
> 赞同：2
> 
> 时间：2013-03-23T16:26:24.973
> 
> 标签：algorithm, dijkstra, a-star

我有这个问题，关于我将考虑使用什么算法或方法来解决从 A 点到 B 点的路径的特定问题，其中两个点不在同一平面上（位于复合的不同楼层/楼层 - 可能不是在同一栋楼上）。

我正在考虑[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)和[Dijkstra 的](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)算法。然而，仅基于此算法（如果我错了，请纠正我）仅关注单个地图图。具有不同的地图图（由于许多楼层和许多建筑物）对于上述两种算法可能会有不同的故事。

根据困难，我为我的所有地图设计了一种格式，以遵循数据的一致性。在每张地图中，都有建筑物名称、楼层号和每层楼可能具有的部分以及平面图（转换为二维单字符数组）的数据。例如（两个地图都在不同的文件上）：

```
//MainFloor1             //MainFloor2
Main                    Main
1st                     2nd
1:Wall                  1:Wall
2:Door                  2:Door
3:Elevator              3:Elevator
#                       4:Room1
1111441111              5:Room2
1        1              #
1        1              1111441111
1        1              1552  2441
1111221111              1551  1441
#                       1551  1441
//End-MainFloor1        1111221111
                        #
                        //End-MainFloor2 
```

从给定的地图中，如果我想考虑从 A 点（MainFloor1 的第一个“2”下方）到 B 点（MainFloor2 左上角的第一个“4”）将返回结果。

```
 // X is the path from Point A to Point B
1111X41111 1111X41111
1   X    1 1552XXXB41 
1   X    1 1551  1441 
1   X    1 1551  1441 
1111A21111 1111221111 
```

我将考虑或采取什么方法从给定的地图输入中产生这样的结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:35:08.903

```
// X is the path from Point A to Point B

1111B11111
1   X    1
1   X    1
1   X    1
1111A11111 
```

这是一个仅适用于单层的解决方案，

机器人只能在 4 个方向移动..

**建议的解决方案是使用禁忌列表的 BFS（广度优先搜索）**

使用这些类：[https ://stackoverflow.com/a/15549604/2128327](https://stackoverflow.com/a/15549604/2128327)

```
class Floor
{
    public ArrayList<Point> points;

    public int minX, minY, maxX, maxY;

    public Floor ()
    {
        p = new ArrayList<Point>();
    }
} 
```

单层解决方案：

```
class PathFinder
{
    public static Floor floor;

    public static Point location;

    public static void search (Floor floor, Point dest, Point initial_location)
    {
        QueueSet<Point> fringe = new QueueSet<Point>();

        ArrayList<Point> taboo = new ArrayList<Point>();

        boolean solution_found = false;

        Point p = null;

        fringe.enqueue(initial_location);

        while (fringe.size() > 0)
        {
            p = fringe.dequeue();
            taboo.add(p);

            if (p.x == dest.x && p.y == dest.y)
            {
                    solution_found = true;
                    break;
            }

            if (p.x > floor.minX && !taboo.contains(new Point(p.x-1,p.y))
                fringe.enqueue(new Point(p.x-1,p.y));

            if (p.x < floor.maxX && !taboo.contains(new Point(p.x+1,p.y))
                fringe.enqueue(new Point(p.x+1,p.y));

            if (p.y > floor.minY && !taboo.contains(new Point(p.x,p.y-1))
                fringe.enqueue(new Point(p.x,p.y-1));

            if (p.y < floor.maxY && !taboo.contains(new Point(p.x,p.y+1))
                fringe.enqueue(new Point(p.x,p.y+1));
        }

        // taboo list represent the path taken so far

        fringe.clear();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:11:01.233

A*、BFS 等都是适用于[图](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)的算法。如果两个节点*（顶点）*相邻且位于同一楼层，**或者**它们代表同一电梯但位于不同楼层，则可以将您的问题视为一个图。

请注意，您可以在内存中显式构建图形，但您不必这样做 - 您可以简单地将其视为从探路者的角度来看的图形。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T01:43:52.567

根据您的实施，应该可以将多个地图与特定点的互连组合在一个图形中。我认为这就是 BlueRaja 一直试图解释的想法。

A* 算法（以及 Djkstra）基于查询离开图节点的边及其各自的权重。在大多数语言中，这个图形对象可以被抽象为一个不透明类型和一组操作来查询它的内容：例如，在 Java 中，一组操作将构成一个接口，而不透明类型则将实现接口的类转换回到那个界面。其他语言可能会以不同的方式提供这种机制，例如在具有结构、签名和函子的机器学习方言中。

如果算法是围绕这个接口构建的，那么应该很容易将实现图形接口的楼层地图类替换为另一种类型，其内容将是几个楼层地图，以及在楼层内传达统一规则边缘的必要函数或方法，和地板之间的特殊边缘。有了这个新的建筑类，人们可以想象封装（遵循相同的模式）几个建筑实例，并使用 ad hoc 代码提供建筑内部和外部连接作为图形边缘。

A*算法的实现，如果抽象得好，应该与图、节点和边的实现细节完全正交，并且应该能够与任何支持图接口的对象一起执行。

例如，这里是一个可能的 Graph 接口：

```
interface Graph<Node, Scalar> {
    int compare(Node n1, Node n2);
    Collection<Node> getNeighbourgs(Node n);
    Scalar getCost(Node n1, Node n2);
} 
```

其中`Node`是图中的一个节点，`Scalar`类型表示节点之间的成本（或距离）。

```
class Cell<Position extends Comparable<Position>> implements Comparable<Cell<Position>> {
    private Position position;
    public Cell(Position p){
         position = p;
    }
    Position getPosition(){
         return position;
    }
    int compareTo(Cell<Position> c){
         return position.compareTo(c.getPosition());
    }
}

abstract class WorldCell extends Cell<Position> {
    public WorldCell(Position p){
        super(p);
    }
}

abstract class World implements Graph<WorldCell, Integer> {
     private Building [] buildings;
     private HashMap<WorldCell, LinkedList<WorldCell>> gateways;
     int compare(WorldCell n1, WorldCell n2){
           return n1.compareTo(n2);
     }
     public Collection<WorldCell> getNeighbourgs(WorldCell c){
           // build the collections of cells from the building it belongs to
           // and the gateways (connections between buildings
     }
     Scalar getCost(Node n1, Node n2){
           // compute the cost based on the node positions in space
     }       
}

abstract class Building implements Graph<WorldCell, Integer> {
     private Floor [] floors;
     private HashMap<WorldCell, LinkedList<WorldCell>> gateways;
     int compare(WorldCell n1, WorldCell n2){
           return n1.compareTo(n2);
     }
     public Collection<WorldCell> getNeighbourgs(WorldCell c){
           // build the collections of cells from the floor it belongs to
           // and the gateways (connections between floors)
     } 
```

这个部分类集提供了一个多重实现的初始草图`Graph`。该类`Floor`将复制或多或少与在类实例数组中`World`或`Building`与`Room`类实例数组中相同的代码。

当然，我们可以在这里看到类似容器的“俄罗斯娃娃”模式，当然可以以某种方式抽象出来，但这个例子的目的是展示相同的接口如何在你打算建模的世界的不同地方实现.

# asp.net - DataBinding：“System.Data.DataRowView”不包含名为“BookName”的属性

> ID：15589121
> 
> 赞同：0
> 
> 时间：2013-03-23T16:27:14.540
> 
> 标签：asp.net

```
public partial class _bookstore : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    {
        if (Page.IsPostBack == false)
        {
        //    SqlConnection cn = new SqlConnection("trusted_connection=true;" +                                                   
        //                                           "database=Test1; " +
        //                                           "server=.\\sqlexpress");
            SqlConnection cn = new SqlConnection("trusted_connection=true;Database=Test1;server=.\\sqlexpress;");
            cn.Open();
            SqlCommand cmd = new SqlCommand();
            DataSet ds = new DataSet();
            SqlDataAdapter da = new SqlDataAdapter("select * from dbo.BookDetails", cn);
            da.Fill(ds, "e");
            DropDownList1.DataSource = ds.Tables[0];
            DropDownList1.DataValueField = "BookId";
            DropDownList1.DataTextField = "BookName";
            DropDownList1.DataBind();
            DropDownList1.Items.Insert(0, new ListItem("--Select--", "-1"));
        }

    }
    }
    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        SqlConnection cn = new SqlConnection("trusted_connection=true;Database=Test1;server=.\\sqlexpress;");
        SqlCommand cmd = new SqlCommand();
        SqlDataReader dr;
        cn.Open();
        cmd.Connection = cn;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "select * from dbo.BookDetails where BookName='" + DropDownList1.SelectedItem.Text + "'";
        dr = cmd.ExecuteReader();
        if (dr.Read())
        {
            TextBox1.Text = dr["BookId"].ToString();
            TextBox2.Text = dr["BookAuthorName"].ToString();
            TextBox3.Text = dr["Address"].ToString();
        }

        else
        {
            Label1.Text = "Please select Book";
            TextBox1.Text = "";
            TextBox2.Text = "";
            TextBox3.Text = "";

        }

    }
} 
```

# android - Android init shell 和子进程

> ID：15589124
> 
> 赞同：0
> 
> 时间：2013-03-23T16:27:50.790
> 
> 标签：android, shell, init

```
#!/system/bin/sh

(
    lCount=0

    while :; do
        sleep 1

        lCount=$(($lCount + 1))

        log -p v -t test "Running test number $lCount"
    done
) & 

lPid=$!

log -p v -t test "Started at $lPid"

exit 0 
```

你好。如果我将此代码放入 Android 设备上的文件中并从 shell 手动执行，该文件将完美退出，同时保持子进程运行并每 1 秒打印一次 logcat。但是，如果我将它放入 init.d 文件夹并重新启动手机，脚本将不会被释放，并且取决于 init.d 的实现，手机将无法启动。

```
#!/system/bin/sh

(
    lCount=0

    while :; do
        sleep 1

        lCount=$(($lCount + 1))

        log -p v -t test "Running test number $lCount"
    done
) & 

lPid=$!

log -p v -t test "Started at $lPid"

sleep 10

kill -9 $lPid

exit 0 
```

如果我将此代码放入 init.d 中，则脚本将在 10 秒后释放，因此脚本确实在子进程下方继续。因此，如果脚本确实在下面继续，为什么它直到子进程被杀死后才到达退出命令（并继续启动）？

还有什么方法可以重写它，以便它做我想做的事情，而不添加要执行的额外文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T21:24:36.963

尝试添加：

```
# wait for android os
until [ `pidof com.android.systemui` != "" ]; do
  sleep 1
done;
sleep 35; 
```

脚本将首先等待 os。

# ms-access - 对访问中的计算字段求和

> ID：15589126
> 
> 赞同：0
> 
> 时间：2013-03-23T16:27:59.793
> 
> 标签：ms-access, vba, ms-access-2010

我已经生成了一份访问报告，其中显示了我们在组织中不同位置的流程评论。我需要做的是统计我每天生成的每日报告的评论总数。

我在 gourp 页脚下使用了一个带有表达式“=Count([Comment])”的文本框。可以很好地计算每个组下的评论数。

我需要为报告生成一个总计，将文本框的值与上述表达式相加。

此外，有没有一种方法可以将文本字段一次计算为报告的总计。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:21:04.840

您可以像使用组页脚框一样进行操作。只需将属性设置为 Over All 而不是 over group。

# c# - ConfigurationSettings.AppSettings 已过时

> ID：15589129
> 
> 赞同：15
> 
> 时间：2013-03-23T16:28:08.533
> 
> 标签：c#, methods, obsolete

以下代码工作正常：

```
string api_url = ConfigurationSettings.AppSettings["api-url"].ToString(); 
```

带有如下警告消息：

> 'System.Configuration.ConfigurationSettings.AppSettings' 已过时：'"此方法已过时，已被 System.Configuration!System.Configuration.ConfigurationManager.AppSettings 取代"'

正如警告消息所建议的那样，我尝试替换`ConfigurationSettings.AppSettings`为`ConfigurationManager.AppSettings`

```
string api_url = ConfigurationManager.AppSettings["api-url"].ToString(); 
```

现在出现一条错误消息，指出：

> 当前上下文中不存在名称“ConfigurationManager”

这些是导入的命名空间：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Configuration; 
```

请帮我。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-23T16:32:09.370

不仅需要`System.Configuration`在前面添加，`ConfigurationManager.AppSettings["api-url"].ToString();`还必须添加对程序集的引用`System.Configuration.dll`。

这是类似问题[的链接当前上下文中不存在名称“ConfigurationManager”](https://stackoverflow.com/questions/1274852/the-name-configurationmanager-does-not-exist-in-the-current-context)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T16:40:34.627

添加对`System.Configuration`. 已弃用的位于`System.dll`但相同的命名空间中`System.Configuration`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T16:38:44.007

添加对 System.Configuration 的引用。

# jquery - Jquery，使用每个但将其限制为 div

> ID：15589130
> 
> 赞同：-1
> 
> 时间：2013-03-23T16:28:12.747
> 
> 标签：jquery, jquery-selectors

我确信这是微不足道的，但我就是找不到合适的搜索词。

假设我在页面上有很多 .field-item div，并且我只想在容器 div 内的 .field-item 实例上使用 each()。

```
<div class='container'>
    <div class='items'>
        <div class="field-item"></div>
        <div class="field-item"></div>
        <div class="field-item"></div>
    </div>
</div> 
```

如何限制 each() 的范围？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:29:15.907

您可以使用[后代选择器](http://api.jquery.com/descendant-selector/)

[**现场演示**](http://jsfiddle.net/bAUXE/)

```
$('.container .field-item').each(function(){
    alert($(this).text());
}); 
```

# webserver - 找出站点在哪个 Web 服务器上运行

> ID：15589132
> 
> 赞同：0
> 
> 时间：2013-03-23T16:28:18.823
> 
> 标签：webserver

我在这里发现了一些关于如何找出页面使用的技术的问题；然而，没有一个解决方案提出了如何确定页面是在例如 Apache HTTP 服务器上还是在 Microsoft ISS 上运行的。

有可能找出来吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:33:12.060

这不是普遍可能的，不。在某些特定情况下，您可以查看[`Server`HTTP 标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Responses)，但它不是无懈可击的，实际上取决于服务器发送到“诚实”标头。没有什么可以说 IIS 服务器无法将其发回：

```
Server: Apache-Coyote/1.1 
```

此外，代理/负载平衡器/等。理论上可以完全剥离这些信息。

# .net - 隐藏验证错误

> ID：15589135
> 
> 赞同：0
> 
> 时间：2013-03-23T16:28:21.027
> 
> 标签：.net, silverlight, validation, wcf-ria-services, ria

在我的`Metadata`班级中，有一个`Person`具有以下属性的班级：

```
Public Property Name As String 
```

在我的实体模型中，此属性已`Nullable`设置为`False`. 我将`Name`new绑定`Person`到`TextBox`我的 Silverlight 应用程序上的 a。当为空白时，框的边框变为红色，并且一条错误消息悬停在上面，上面写着“名称字段是必需的”。

**我希望边框变红，但我不希望错误消息悬停。**我怎样才能做到这一点？

我试过一个属性

`<Required(allowemptystrings:=False, ErrorMessage:=Nothing)>`

但消息仍然显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:38:20.377

如果验证状态在正确的时间显示，但您不想显示验证消息，则必须修改文本框的控件模板。

默认情况下，TextBox 控件模板有一个名为 ValidationErrorElement 的边框。该边框有一个显示错误消息的工具提示。您只需要删除工具提示。

```
<ControlTemplate TargetType="TextBox" x:Name="customTextBox">
    <Grid x:Name="RootElement">
        <VisualStateManager.VisualStateGroups>
            ...
        </VisualStateManager.VisualStateGroups>
        ...
        <Border x:Name="ValidationErrorElement" BorderThickness="1" CornerRadius="1" BorderBrush="#FFDB000C" Visibility="Collapsed"> 
            <!-- Remove the tooltip here -->

            <!-- 
            <ToolTipService.ToolTip>
                <ToolTip x:Name="validationTooltip" ...
                </ToolTip>
            </ToolTipService.ToolTip>
            -->

            <Grid Width="12" Height="12" HorizontalAlignment="Right" Margin="1,-4,-4,0" VerticalAlignment="Top" Background="Transparent">
                <Path Margin="1,3,0,0" Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" Fill="#FFDC000C"/>
                <Path Margin="1,3,0,0" Data="M 0,0 L2,0 L 8,6 L8,8" Fill="#ffffff"/>
            </Grid>
        </Border>
    </Grid>
</ControlTemplate> 
```

然后将模板应用到您的 TextBox

```
<TextBox Template="{StaticResource customTextBox}" ... /> 
```

# c# - 反射 C#：创建没有默认构造函数的对象的实例

> ID：15589136
> 
> 赞同：2
> 
> 时间：2013-03-23T16:28:21.510
> 
> 标签：c#, object, reflection, xna

我知道`FormatterServices.GetUninitializedObject`可以做到这一点，但 xbox 的核心库不包含该类。

我正在开发一款 XNA 游戏，我正试图在那里完成这项工作。`Activator.CreateInstance`是可用的，但我需要一个默认构造函数，这很丑陋。

我想如果没有默认构造函数，我取最短并传入任何值（例如，当它需要 an`int`和 an时`object`，我传入`0`and `null`）。但问题在于，如果构造函数与传入的对象一起工作，它可能会抛出异常。好吧，我仍然可以将它写在 try catch 块中，也许它可以这样工作。但我真的不太可能这样做。还有其他解决方案吗？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T16:36:36.323

不，这*完全*是错误的解决方案。

您*肯定*需要一个默认构造函数，否则您将无法以这种方式构造对象。

请注意，您*可以*使用“非默认”（我在这里将“默认”作为“无参数”的意思）构造函数，但您仍然应该传递所需的参数，不仅仅是按类型，还应按含义传递。

由于您使用`Activator.CreateInstance`，我假设您对所讨论的类型知之甚少，除了它的`Type`对象。在这种（一般）情况下，您不应该只将一些奇怪的值传递给构造函数，以希望它对所讨论的类型有意义。

另一方面，如果你有某种合约，你可以说“我知道这种类型支持合约 X”，你可能会考虑使用接口，并在构造对象后调用该接口上的方法。然后，该接口将具有一个已知方法（对于需要构造实例的代码而言是已知的），您将使用已知的（称为知道有多少、它们的类型以及*它们的含义*）参数调用该方法。

只是随机地（传入 0 并且`null`只是为了满足签名与传入 42 和一些奇怪的对象一样任意）将参数传递给构造函数根本*不安全*。

接口示例：

```
object instance = Activator.CreateInstance(someTypeObject);
((ISomeInterface)instance).Initialize(your, specific, parameters, here); 
```

您可能需要一个 IoC 框架，这样您就可以说“每当有人需要此类的实例时，以下是构建它的方法”。

抬头：

*   [控制反转 (IOC) - 维基百科](http://en.wikipedia.org/wiki/Inversion_of_control)
*   [自动法](https://code.google.com/p/autofac/)
*   [忍者](http://www.ninject.org/)
*   [统一](http://unity.codeplex.com/)
*   [温莎城堡](http://www.castleproject.org/container/index.html)
*   还有更多，[搜索控制反转C#](https://www.google.com/search?q=inversion+of+control+C%23&aq=f&oq=inversion+of+control+C%23&sourceid=chrome&ie=UTF-8)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T16:37:59.030

您*不需要*默认构造函数，我认为您可以在其中传递参数的重载

```
Activator.CreateInstance (typeof (Foo), new object []{  args}); 
```

也就是说，您也可以使用反射来获取构造函数并调用它。

编辑：等等 - 重读这个问题，你是说你不知道要传递什么吗？那你为什么要创造它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:33:07.047

您声明您的目标类没有默认（或“无参数”）构造函数。换一种方式; 您的类的构造函数包含“依赖项”。在满足这些依赖关系之前，它不能（也不应该！）构建。

您需要的是一个[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)（或控制反转）容器。我建议[查看 Ninject](http://www.ninject.org/)，以获得恰好与 XNA 兼容的出色实现。

依赖注入框架允许您指定通用“规则”，这样当您遇到需要构造函数中的参数的对象时，DI 容器可以“填补空白”。例如，创建 Foo 类型的 DI 规则示例：“当您尝试创建具有带参数 (int, object) 的构造函数的 Foo 类型对象时，将这些值传递给构造函数：(0, null)。 "

花一点时间浏览提供的链接上的一些示例，了解如何使用 Ninject 库来实现您的要求。

# android - 安卓随机倒计时应用

> ID：15589138
> 
> 赞同：-1
> 
> 时间：2013-03-23T16:28:23.683
> 
> 标签：android, random, numbers

我之前在我的 TI 84 计算器上制作了简单的反应时间应用程序，并意识到它是如此简单，我也应该能够为 android 制作它。

但是我对android并不是很熟练，因此不知道某些程序部分，而且我真的不知道如何将它们组合在一起..

这就是我想做的：一个应用程序，当按下开始按钮时，选择一个随机数（从 1000 到 4000）然后从 6000 毫秒倒计时到 x(1000-4000)

虽然我不知道如何做到这一点，也找不到如何使随机数与互联网上的毫秒数相同..

您能否给出随机数和倒计时部分的示例代码？例如如何使随机数计数与毫秒相同？我不知道android计算有多快..

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:35:50.677

要创建随机数，您可以这样做：

```
Random random=new Random();
int var=random.nextInt(maxRange-minRange)+minRange; 
```

`maxRange`并`minRange`定义数字范围，在您的情况下为 4000 和 1000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:40:38.710

处理按钮单击。单击按钮时，获取一个随机数并启动计时器。在计时器到时，做任何你需要做的事情。

```
// Get your button
Button btnStartCounting = (Button) findViewById(R.id.btnStartCounting);

btnStartCounting.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        Random r= new Random();
        int number = 6000 - (r.nextInt(3000) + 1000);

        CountDownTimer timer = new CountDownTimer(number, number) {

            @Override
            public void onTick(long arg0) {

            }

            @Override
            public void onFinish() {
               // Time Up. Do Sth!

            }
        };
        timer.start();

    }

}); 
```

# asp.net - AJAX 更新面板不工作

> ID：15589144
> 
> 赞同：0
> 
> 时间：2013-03-23T16:28:58.217
> 
> 标签：asp.net, ajax

由于某种原因，更新面板没有更新标签或图像文件......任何帮助将不胜感激。该方法正在调用并且正在上传文件。

ASP：

```
<asp:UpdatePanel runat="server" UpdateMode="Conditional" ID="UpdateTest">
            <ContentTemplate>
                <asp:Label ID ="lblTemp" runat="server">test</asp:Label>
                <asp:AsyncFileUpload ID="ImageUpload" runat="server" OnUploadedComplete="ImageUpload_UploadedComplete" />

                <label>Image</label><br />
                <div style="height:60px; padding-bottom:10px; padding-top:5px; ">
                <div style="width:55px; float:left;margin-right:10px;">
                    <asp:Image src="../images/menu_bkg.gif" ID="smallImage" runat="server" Height="60" Width="60" />
                </div> 
            </ContentTemplate>
        </asp:UpdatePanel> 
```

C＃：

```
protected void ImageUpload_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    string filename = System.IO.Path.GetFileName(ImageUpload.FileName);
    ImageUpload.SaveAs(Server.MapPath("../Uploads/") + filename);
    smallImage.ImageUrl = "../uploads/" + filename;
    lblTemp.Text = "hellllo";

    UpdateTest.Update();
} 
```

编辑：

我一直在运行更多测试，似乎这可能是 AsyncFileUpload 的问题。我在 UpdatePanel 中放置了一个按钮，并让它更改图像 URL 和标签文本。标签文本工作正常，但是当调用 update() 函数时，它会将 asyncfileupload 擦除干净。似乎 lbltemp 和 smallImage 可能无法更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:04:28.963

答案就在这里 - 看起来 Asyncfileupload 需要回发整页才能更改内容，请通过以下链接。

[http://forums.asp.net/p/1576992/3975535.aspx#3964776](http://forums.asp.net/p/1576992/3975535.aspx#3964776)

# angularjs - 自动刷新过滤器

> ID：15589145
> 
> 赞同：10
> 
> 时间：2013-03-23T16:29:04.607
> 
> 标签：angularjs

我正在使用过滤器来显示自添加内容以来的时间：

```
angular.module('filters').('fromNow', function () {
    return function (date) {
        return moment(date).fromNow();
    }
}); 
```

如何每分钟自动触发过滤器，以便刷新之前的时间。我可以在过滤器中使用 $timeout 来实现这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-23T21:04:40.617

事实上，您的功能实际上已经在 Angular Docs 上进行了非常详细的描述。

对于这类事情，您需要使用指令。您可以选择将过滤逻辑保留在您的过滤函数中，或者您可以将整个“时间前”逻辑放在指令中。随心所欲。

JS：

```
app.filter('fromNow', function () {
  return function (date) {
    return moment(date).fromNow();
  };
});

app.directive('time', 
  [
    '$timeout',
    '$filter',
    function($timeout, $filter) {

      return function(scope, element, attrs) {
        var time = attrs.time;
        var intervalLength = 1000 * 10; // 10 seconds
        var filter = $filter('fromNow');

        function updateTime() {
          element.text(filter(time));
        }

        function updateLater() {
          timeoutId = $timeout(function() {
            updateTime();
            updateLater();
          }, intervalLength);
        }

        element.bind('$destroy', function() {
          $timeout.cancel(timeoutId);
        });

        updateTime();
        updateLater();
      };

    }  
  ]
); 
```

HTML：

```
<div ng-controller="AppController">
  Time: <span time="2013-03-23 21:56"></span>
</div> 
```

[普朗克](http://plnkr.co/edit/RfDKxXrTblrKuBiVlddq)

同样，如果您查看[Directive Docs](http://docs.angularjs.org/guide/directive)，您会发现该解决方案几乎完全抄袭了该页面上的指令示例。

# autocomplete - vim html自动关闭标签，不同的扩展文件

> ID：15589146
> 
> 赞同：4
> 
> 时间：2013-03-23T16:29:06.783
> 
> 标签：autocomplete, vim, omnicomplete

我正在使用[HTML AutCloseTag](http://www.vim.org/scripts/script.php?script_id=2591)，它在扩展名为 .html 的文件中完美运行。但是我正在使用模板并且文件以 php 扩展名命名，然后自动关闭标签不起作用。

在我的 vimrc 文件中，我更改了

```
autocmd FileType html,markdown setlocal omnifunc=htmlcomplete#CompleteTags 
```

至

```
autocmd FileType html,markdown,php setlocal omnifunc=htmlcomplete#CompleteTags 
```

但这并不能解决问题。

我需要额外的配置吗？

多谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T01:48:27.427

文档已经说过，要添加对 xhtml 和 xml 的支持，请添加

```
au FileType xhtml,xml so ~/.vim/ftplugin/html_autoclosetag.vim 
```

因此，对于您的问题，解决方案是在 vimrc 中简单地添加这一行：

```
au FileType php so ~/.vim/ftplugin/html_autoclosetag.vim 
```

或者如果您使用 Pathogen 安装插件，请使用此插件的特定路径。

# xcode - 如何在 Xcode 中访问被遮挡的对象

> ID：15589147
> 
> 赞同：0
> 
> 时间：2013-03-23T16:29:06.780
> 
> 标签：xcode, interface-builder, storyboard

在 Xcode 故事板中，有没有办法用鼠标移动视图，例如，被另一个视图遮挡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:32:37.950

在左侧的文档导航器中选择它。双击，您可以使用箭头键来微调位置。

# jquery - 带有 jQ uery 验证插件的自定义方法

> ID：15589152
> 
> 赞同：5
> 
> 时间：2013-03-23T16:29:43.180
> 
> 标签：jquery, jquery-validate

我试图在 Jquery 中使用自定义验证。所有的编码部分都是正确的，但我不知道哪里出错了……这是代码的一部分。

```
Password:<input type="password" id="pnameTxt" name="pnameTxt" placeholder="Enter Password" size=12 class='required'><br>
Confirm Password:<input type="password" id="pnameTxt2" name="pnameTxt2" placeholder="Retype Password" size=15 class='required passwordCheck'><br> 
```

自定义验证方法：

```
 $.validator.addMethod("passwordCheck",function (value,element){
          return value==$("#pnameTxt").val(); 

        }, 'Password and Confirm Password should be same'); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-23T20:32:21.247

您的代码正在运行。当您使用 初始化插件时，您还必须将规则分配给您的字段`.validate()`。

**工作演示：http: [//jsfiddle.net/KrLkF/](http://jsfiddle.net/KrLkF/)**

```
$(document).ready(function () {

    $.validator.addMethod("passwordCheck", function (value, element) {
        return value == $("#pnameTxt").val();
    }, 'Password and Confirm Password should be same');

    $('#myform').validate({ // initialize the plugin
        rules: {
            pnameTxt2: {
                passwordCheck: true
            }
        }
    });

}); 
```

* * *

**但是**，您不需要为此功能编写自定义方法。jQuery Validate 插件已经有一个[`equalTo`规则](http://docs.jquery.com/Plugins/Validation/Methods/equalTo#other)，这里是如何使用它。

**工作演示：http: [//jsfiddle.net/tdhHt/](http://jsfiddle.net/tdhHt/)**

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            pnameTxt2: {
                equalTo: "#pnameTxt" // using `id` of the other field
            }
        },
        messages: {
            pnameTxt2: {
                equalTo: "Password and Confirm Password should be same"
            }
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T16:43:16.630

您是否正确初始化了验证插件？当我将 html 放入 a`form`然后`initialize the plugin`它按预期工作时。

```
<form id="test">
Password:<input type="password" id="pnameTxt" name="pnameTxt" placeholder="Enter Password" size=12 class='required'><br>
Confirm Password:<input type="password" id="pnameTxt2" name="pnameTxt2" placeholder="Retype Password" size=15 class='required passwordCheck'><br>
<input type="submit">
</form> 
```

```
$.validator.addMethod("passwordCheck",function (value,element){
      return value==$("#pnameTxt").val(); 

    }, 'Password and Confirm Password should be same');

$('#test').validate(); 
```

# linux - CPAN 安装模块显示正常，但该模块编译失败

> ID：15589154
> 
> 赞同：1
> 
> 时间：2013-03-23T16:30:10.943
> 
> 标签：linux, perl, cpan

我正在尝试按照[此处](http://search.cpan.org/~dskoll/MIME-tools-5.504/lib/MIME/Parser/Filer.pm)`MIME::Parser::FileUnder`的说明进行子类化。所以我安装了这个模块：

```
$ sudo cpan install MIME::Parser::FileUnder
[...]
Result: PASS
  DSKOLL/MIME-tools-5.504.tar.gz
  /usr/bin/make test -- OK
Running make install
Manifying blib/man3/MIME::Decoder::Gzip64.3pm
Appending installation info to /usr/local/lib/perl/5.14.2/perllocal.pod
  DSKOLL/MIME-tools-5.504.tar.gz
  sudo /usr/bin/make install  -- OK 
```

看起来安装正确，但是

```
$ ./test_gmail.pl
Can't locate MIME/Parser/FileUnder.pm in @INC (@INC contains: /etc/perl /usr/local/lib/perl/5.14.2 /usr/local/share/perl/5.14.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14 /usr/local/lib/site_perl .) at GMailMIMEParser.pm line 4.
BEGIN failed--compilation aborted at GMailMIMEParser.pm line 4.
Compilation failed in require at ./test_gmail.pl line 13.
BEGIN failed--compilation aborted at ./test_gmail.pl line 13. 
```

如果我尝试`MIME::Parser::FileUnder`再次安装，它会奇怪地安装它，而不是像任何其他模块一样告诉我它是最新的。

这是我的子类`GMailMIMEParser`：

```
package GMailMIMEParser;

use strict;
use MIME::Parser::FileUnder;

our @ISA = qw(MIME::Parser::FileUnder);

my $cur = 0;

sub output_path
{
    my $class = shift;
    my $head = shift;
    print(STDERR $head);
    $cur++;
    return "./$cur";
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:04:36.540

我只是在做错事。我必须子类`MIME::Parser::Filer`而不是子类`MIME::Parser::FileUnder`，它本身就是一个`MIME::Parser::Filer`子类。

```
package GMailMIMEParser;

use strict;
use MIME::Parser::Filer;

our @ISA = qw(MIME::Parser::Filer);

my $cur = 0;

sub output_path
{
    my $class = shift;
    my $head = shift;
    print(STDERR $head);
    $cur++;
    return "./$cur";
} 
```

# csh - 如何允许在从另一个 csh 脚本调用的 csh 脚本中使用变量？

> ID：15589155
> 
> 赞同：1
> 
> 时间：2013-03-23T16:30:11.337
> 
> 标签：csh

我有一个脚本`caller.csh`，我在其中调用另一个脚本`called.sh`。我在（例如）中使用`set`命令声明了一些变量。我如何在（例如）中使用它们而不将它们作为命令行参数传递？`caller.csh``set alpha = 10``called.sh``echo $alpha`

请注意，脚本`called.sh`可以独立运行，并且变量也在其中定义。我希望这些变量值被`caller.sh`. 所以我会使用类似`if not defined $alpha, then set alpha =`in 的东西`called.sh`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:39:59.397

一种方法是将它们设置为环境变量（使用`setenv`）。

但是，这不是一个好方法。将变量传递给 shell 脚本的接口应该通过命令行选项/参数。如果它是一个 shell 脚本，它应该是独立的。直接从命令行运行它时，您将如何传递相同的参数？

编辑：在更新问题的第二部分之后。使用`getopt`. 您可以将变量设置为默认值，然后用于`getopt`覆盖这些值，以防用户将它们作为命令行选项/参数传递。这种方法优于任何类型的全局定义变量。

# forms - AngularJS 根据 ng-repeat 输入中的条目从对象中检索

> ID：15589156
> 
> 赞同：1
> 
> 时间：2013-03-23T16:30:12.127
> 
> 标签：forms, angularjs, angularjs-directive, lookup-tables

此应用程序用于举办写作比赛。协调员将条目分配给评委，让他们评判。我从服务器检索到三组数据，一个裁判列表、一个条目列表和一个将两者联系在一起的分配列表。可以有可变数量的输入字段...如果法官同意判断 4 个条目，则将有 4 个输入...如果 7，则 7。我所有这些都可以正常工作，但仅限于条目可以输入数字并更新数据。
现在我想通过检查列表来确认 entryID 是一个有效的 ID，并在屏幕上显示一个或两个字段，以便协调员知道他们输入了正确的条目。

HTML 的相关部分

```
<div ng-app>
   <div id="assignment" ng-controller="AssignData" ng-init="JudgeID=107;CategorySelect='MS';PublishSelect='P'">
      <div ng-show="loaded">
         <form class="entryform ng-cloak" name="assignform" ng-submit="sendForm()">
            <p>Entry numbers assigned to this judge</p>
            <p ng-repeat="assign in (formassigns =(assigns | filter:AssignedJudge))">
               <input type="text" ng-model="assign.entryid" required/>
               {{entries.authorname}} {{entries.entrytitle}} 
            </p>
            <button type="submit">Save Assignments</button>
            <p>This will keep the assignments attached to this judge. 
               You will be able to send all of your assignments to all
               of your judges when you are finished.</p>
         </form>
      </div>
   </div>
</div> 
```

我无法弄清楚的部分是如何在用户输入entryid 中的entryid 时显示entry.authorname 和entry.entrytitle。

assigns 和 entries 都是使用 JSON 的记录数组

assigns 是由 assigns.id、assigns.judgeid、assigns.entryid 组成的 JSON。

entries 是由 entries.entryid、entry.entrytitle、entry.authorname 组成的 JSON

当assigns到达时，entryid为空。该表格用于填写 entryid，填写后，我希望能够在其旁边显示该条目的标题和作者姓名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:46:22.260

注意：我在这个答案的末尾添加了一些重要信息。所以在你决定你要做什么之前，请阅读到最后。

你将不得不做一些事情来进行查找。

我还要添加一些其他更改，主要是为了您可以实际验证重复中的项目。

（下面是我在伪代码之后所做的总结）。

```
<div ng-app>
   <div id="assignment" ng-controller="AssignData" 
        ng-init="JudgeID=107;CategorySelect='MS';PublishSelect='P'">
      <div ng-show="loaded">
         <form class="entryform ng-cloak" name="assignform" ng-submit="sendForm()">
            <p>Entry numbers assigned to this judge</p>
            <p ng-repeat="assign in (formassigns =(assigns | filter:AssignedJudge))"
               ng-form="assignForm">
               <input type="text" ng-model="assign.entryid" 
                  ng-change="checkEntryId(assign, assignForm)"
                  name="entryid" required/>
               <span ng-show="assignForm.entryid.$error.required">required</span>
               <span ng-show="assignForm.$error.validEntry">
                   {{assignForm.$error.validEntry[0]}}</span>
               {{assign.entry.authorname}} {{assign.entry.entrytitle}} 
            </p>
            <button type="submit">Save Assignments</button>
            <p>This will keep the assignments attached to this judge. 
               You will be able to send all of your assignments to all
               of your judges when you are finished.</p>
         </form>
      </div>
   </div>
</div> 
```

然后在您的控制器中，您将添加一个这样的函数（确保注入 $http 或您编写的服务以从服务器中提取值）：

```
$scope.checkEntryId = function(assign, form) {
   $http.get('/CheckEntry?id=' + assign.entryid,
      function(entry) {
         if(entry) {
           assign.entry = entry;
           form.$setValidity('validEntry', true);
         } else {
           form.$setValidity('validEntry', false, 'No entry found with that id');
         }
      }, function() {
           form.$setValidity('validEntry', true, 'An error occurred during the request');
           console.log('an error occurred');
      });
}; 
```

上面的基本思路：

*   在重复元素上使用 ng-form 以允许验证这些动态部分。
*   创建一个函数，您可以将您的项目和嵌套表单传递给该函数。
*   在该函数中，进行 AJAX 调用以查看条目是否有效。
*   根据响应检查有效性，并在传递给函数的嵌套表单上调用 $setValidity。
*   在嵌套表单中的跨度（或其他东西）上使用 ng-show 来显示验证消息。
*   此外，将选中的条目分配给重复的对象以进行显示。（我想，如果你愿意，你可以使用单独的数组，但这可能会变得不必要地复杂）。

我希望这会有所帮助。

**编辑：其他想法**

1.  您可能希望将调用包装在 $timeout 或某种限制函数中，以防止条目 ID 检查向 yoru 服务器发送垃圾邮件。这是一个完全取决于您的实现细节。
2.  如果这是您到处进行的检查，您可能需要创建一个指令来执行此操作。这个想法将非常相似，但您将在 ngModelController 上的 $parser 内部进行检查。
3.  我上面展示的方法实际上仍然会更新模型的 entryid，即使它是无效的。这*通常*不是什么大问题。如果是这样，您将希望采用我在“其他想法#2”中的建议，这是一个自定义验证指令。

如果您需要有关通过自定义指令进行验证的更多信息，[我不久前写了一篇博客文章](http://www.benlesh.com/2012/12/angular-js-custom-validation-via.html)

# php - 使用左连接从选择查询更新

> ID：15589158
> 
> 赞同：0
> 
> 时间：2013-03-23T16:30:19.027
> 
> 标签：php, mysql, select, sql-update

我以有限的 SQL 理解问这个问题，如果很明显，请提前道歉。我有一个选择查询，它返回一个“未读”消息的结果集，并与我正在处理的简单 Web 应用程序的用户表（称为作者）中的发件人 ID 匹配。下表描述如下：

作者：

```
aId int(20) NO  PRI NULL    auto_increment
aUser   varchar(30) NO  UNI NULL    
aPass   varchar(40) NO      NULL    
aEmail  varchar(30) NO  UNI NULL    
aBio    mediumtext  YES     NULL    
aReg    datetime    NO      NULL 
```

留言：

```
msgId   int(20) NO  PRI NULL    auto_increment
mSender int(20) NO  MUL NULL    
mReciever   int(20) NO  MUL NULL    
mTitle  tinytext    NO      NULL    
mBody   mediumtext  NO      NULL    
mRead   tinyint(4)  NO      NULL    
mDate   datetime    NO      NULL 
```

我正在使用的选择查询是（Tks martina）：

```
 SELECT messages.mTitle, messages.mBody, messages.mDate, authors.aUser 
 FROM messages LEFT JOIN authors on aId=mSender WHERE mReciever = '$aId' AND mRead = '0' 
```

$aId 是一个 php 会话变量，其中包含活动用户的用户 ID。我的 php 应用程序将假定，因为此“未读”消息已被处理，它现在已被读取，任何人都可以协助修改上述查询以将 mRead 更新为 1，表明它已被读取，从这里的现有帖子我读到你可以't SELECT with UPDATE 在同一个 SQL 语句中，是否有另一种方法来解决这个问题，我是否远离正确的解决方案？非常感谢任何帮助。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:37:36.353

你听到的是正确的。您不能在一个语句中选择和更新。您的 PHP 代码必须执行两个不同的 SQL 命令。选择后，使用 PHP 和您的结果来确定您返回的消息的 ID，然后在消息表上执行 UPDATE 语句，例如“UPDATE messages SET mRead=1 WHERE msgId IN (?)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:41:03.683

您可以`JOIN`在`UPDATE`:

```
UPDATE table1
LEFT JOIN table2 ON(table1.id = table2.id)
SET ...
WHERE ... 
```

并选择`WHERE`语句中的记录。

相关：[https ://stackoverflow.com/a/806925/1815881](https://stackoverflow.com/a/806925/1815881)

我的博文：http: [//athlan.pl/mysql-update-join/](http://athlan.pl/mysql-update-join/)

第二种方法是选择要更新和执行的记录 ID：

```
UPDATE table
SET ...
WHERE id IN( ...your select... ) 
```

# html - 淘汰动态在表中添加一行

> ID：15589160
> 
> 赞同：3
> 
> 时间：2013-03-23T16:30:40.470
> 
> 标签：html, knockout.js

**问题描述：**

我正在使用淘汰赛，我有一张桌子。在这张表中，我有 3 列。第一列有一个下拉列表。每当用户从下拉列表中选择一个值时，我想生成一个新行。

这是我的小提琴：http: [//jsfiddle.net/JPVUk/10/](http://jsfiddle.net/JPVUk/10/)

```
<table class="table table-bordered">
<thead class="mbhead">
    <tr class="mbrow">
        <th>Type</th>
        <th>Comment</th>
        <th>Amount</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
           <select class="input-small">
           <option value="">Type</option>
           <option value="">One</option>
           <option value="">Two</option>
           <option value="">Three</option>
           </select>
        </td>
        <td><input class="input-small"/></td>
        <td><input class="input-small"/></td>
    </tr>

</tbody>
  </table>
 <button id="saveButton">save</button>` 
```

我想用淘汰赛来完成这个。有没有办法使用淘汰赛来完成它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T18:45:31.433

如果我正确理解您的问题，您希望每次更改下拉列表中的选择时都添加一个新行。

您可以通过使用包含项目的可观察数组创建视图模型来做到这一点。然后，只要选择更改，您就可以在下拉列表中插入项目。请参阅以下内容：

```
var ViewModel = function() {
    var self = this;
    self.items = ko.observableArray([{comment:'first comment', amount:0}]);
    self.addNewItem = function(){
        self.items.push(new Item('',0));
    };
}

var Item = function(comment, amount) {
    var self = this;
    self.comment = ko.observable(comment);
    self.amount = ko.observable(amount);   
}; 

vm = new ViewModel()
ko.applyBindings(vm); 
```

如果您随后将以下内容添加到表标记中：

```
<tbody data-bind="foreach: items">
    <tr>
        <td>
           <select class="input-small" data-bind="event: { change: $root.addNewItem }">
               <option value="">Type</option>
               <option value="">One</option>
               <option value="">Two</option>
               <option value="">Three</option>
           </select>
        </td>
        <td><input class="input-small" data-bind="value: comment"/></td>
        <td><input class="input-small" data-bind="value: amount"/></td>
    </tr>
</tbody> 
```

[我在这里](http://jsfiddle.net/JPVUk/13/)更新了你的 JsFiddle

# c# - ASP.Net webform 生成 Excel 文件到本地 PC 而不是服务器

> ID：15589162
> 
> 赞同：2
> 
> 时间：2013-03-23T16:31:04.897
> 
> 标签：c#, asp.net, excel, webforms

继有关生成 Excel 文件的问题之后，我需要能够在 webform 应用程序位于远程 Web 服务器上时在本地创建文件。这不是我以前处理过的任何事情，所以我发现很难确切地问什么。我在带有 c# 的 VS2010 上使用 WebForms。[eanderson](https://stackoverflow.com/users/408182/eandersson)向我指出了[Michael Stum的](https://stackoverflow.com/users/91/michael-stum)[Simplexcel](https://github.com/mstum/Simplexcel)方向， 这似乎可以解决问题，但文件是在服务器上生成的（或者我应该说“尝试”，因为它是不允许的！！！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:06:41.033

您应该能够执行与此类似的操作来生成和下载`Excel Sheet`.

```
protected void generateExcelSheet_click(object sender, EventArgs e)
{
    // Create Excel Sheet
    var sheet = new Worksheet("Hello, world!");
    sheet.Cells[0, 0] = "Hello,";
    sheet.Cells["B1"] = "World!";
    var workbook = new Workbook();
    workbook.Add(sheet);

    // Save
    Response.ContentType = "application/vnd.ms-excel";
    Response.AppendHeader("Content-Disposition", "attachment; filename=MyExcelSheet.xls");
    workbook.Save(Response.OutputStream, CompressionLevel.Maximum);

    Response.End();
} 
```

在`designer.aspx`：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="FileDownload.Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Button ID="btnExcel" runat="server" Text="Download Excel Sheet" onclick="generateExcelSheet_click" />
    </form>
</body>
</html> 
```

我将此代码基于[本](http://www.c-sharpcorner.com/uploadfile/afenster/how-to-download-a-file-in-asp-net/)教程。

# javascript - 是否可以在 jQuery/Javascript 中存储有关非实例化对象的信息？

> ID：15589163
> 
> 赞同：1
> 
> 时间：2013-03-23T16:31:06.867
> 
> 标签：javascript, jquery, string, instantiation, jquery-data

我通过连接字符串元素在 Javascript 中创建 HTML 标记。像这样的东西：

```
var makeButton = function (el) {
    'use strict';
    var config = el.attr("data-config"),
        dyn = $.parseJSON(config),
        hover = false,
        state = 'up',
        hrf = '',
        ...

  if (dyn.href) {
      hrf = 'href="' + dyn.href + '" ';
  }
  ...

  // when all variables have been set, concat  
  iconspan = dyn.icon ? '<span class="ui-icon ' + icn + icp + ics + '">&nbsp;</span>' : '';
  textspan = '<span class="ui-btn-text">' + txt + '</span>';
  innerspan = '<span class="ui-btn-inner">' + textspan + iconspan + '</span>';
  btn = '<a data-role="button" data-wrapperels="span" class="ui-btn ' + hvr + cls + '" ' + data_icp + data_thm + data_min + data_inl + '>' + innerspan + '</a>';
  return btn;
}; 
```

当一切都设置好后，我将字符串返回给调用函数，在那里它被插入到正在创建的其他字符串中。我想知道是否有可能存储有关我正在创建的内容的任何信息。由于我没有实例化为 jQuery (= `$( btn )`)，因此我无法使用`data()`.

**问题：**
所以如果我有一个普通的“字符串”，我有什么替代方案（如果有的话）来存储关于该字符串的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:12:59.630

> 因此，如果我有一个普通的“字符串”，我有什么替代方法（如果有的话）来存储该字符串上的信息？

没有任何。*原始值*可以没有属性，因此您不能*在*它们上存储任何内容。要么切换到对象，要么将信息存储在由字符串值标识的其他静态结构中（当然，您的函数需要返回独特的字符串，并且垃圾收集有些复杂）。

所以你可以只使用`String`包装你想要返回的字符串的对象。它们在原始操作（例如连接）中具有相同的行为，但您可以在它们上存储其他信息：

```
btn = new String(btn);
btn.data = …;
return btn; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:47:09.667

我不完全确定您要实现什么（可能值得考虑像[mustache.js](https://github.com/janl/mustache.js)或[下划线模板](http://www.bennadel.com/blog/2411-Using-Underscore-js-Templates-To-Render-HTML-Partials.htm)这样的模板语言，而不是连接字符串），但是如果您想在两个分散的数据位之间创建关系，那么[关联数组](http://en.wikipedia.org/wiki/Associative_array)应该可以完成这项工作。

```
// Use a JavaScript object as an Associative Array.
dataByButtonMarkupMap = {};

// Build your button markup as before.
btnMarkup = "..."

// Use the markup as a Key in the associative array, don't worry that it's massive, as long
// as it's a string (or can be coerced to one), it can be used as a key.
dataByButtonMarkupMap[btnMarkup] = "some data";

// You can now retrieve that data via the button markup
var myData = dataByButtonMarkupMap[btnMarkup]; 
```

可能值得考虑重构您的设计，以便您返回一个封装模板字符串和数据的对象，而不是传递字符串，例如：

```
function makeButton() { 
    // ...

    // Return an object instead of a string so you can encapsualte
    // additional data alongside the template string.
    return {
        template: btn,
        data: "some data"
    }
} 
```

希望有帮助。

# ios - 在 UIAlertView 中设置 UITextField 的最大长度

> ID：15589164
> 
> 赞同：0
> 
> 时间：2013-03-23T16:31:24.460
> 
> 标签：ios, objective-c, uitextfield, uialertview

我想为我的设置一个最大长度，`UITexField`但它被插入了`UIAlertView`，我试图在这个美丽的网站上找到解决这个问题的正确信息，但什么都没有。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:18:28.947

我认为这是 UITextFieldDelegate 方法的更好实现，因为它不会删除用户眼前的文本结尾，它只是阻止用户输入更多文本。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

    if (newString.length > MAXLENGTH)
    {
        return NO;
    }

    return YES;
} 
```

不要忘记实现`UITextFieldDelegate`协议，并将您的控制器设置为文本字段的代表（请参阅 Anoop Vaidya 答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:57:29.610

您可以通过以下方式访问 alertView 的 textField

```
UITextField *theTitleTextField = [alertView valueForKey:@"_bodyTextLabel"]; 
```

如果您想找到添加的文本字段，请按照*Martin R*`textFieldAtIndex:`的建议使用。

 *然后实现`UITextFieldDelegate`协议。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    if ([textField.text length] > MAXLENGTH) {
        textField.text = [textField.text substringToIndex:MAXLENGTH-1];
        return NO;
    }
    return YES;
} 
```*

# mysql - 如何以手动指定的顺序检索项目

> ID：15589165
> 
> 赞同：0
> 
> 时间：2013-03-23T16:31:25.490
> 
> 标签：mysql

我在 PHP 中有一个 id 列表。例如：

```
$id = (4,6,3,2,5,1) 
```

当我执行这样的查询时：

```
$query = mysql_query("SELECT * FROM table WHERE ID IN ($id)"); 
```

它检索我想要的结果，但项目按插入顺序返回。

相反，我想按数组中给定的顺序检索结果：

```
information 4, information 6, information 3, information 2, information 5, information 1 
```

我怎样才能做到这一点？

多谢你们！解决方案是 ORDER BY FIELD (ID, $id);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:36:23.520

尝试这个

```
$query = "SELECT * FROM table WHERE ID IN ($id) ORDER BY FIELD(ID,$id) "; 
```

你可以看到这个[http://marco-pivetta.com/mysql-custom-sorting-rule-mysql/](http://marco-pivetta.com/mysql-custom-sorting-rule-mysql/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T16:35:24.693

```
$query = "SELECT * FROM table WHERE ID IN ($id) ORDER BY ";

foreach ($id as $i) {
   $query .= "ID = $i,";
}
$query = mysql_query(rtrim($query, ',')); 
```

* * *

您的代码容易被注入。您应该对 PDO 或 mysqli 使用正确的参数化查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T16:36:00.287

```
$query="SELECT * FROM table WHERE ID IN ($id) ORDER BY FIND_IN_SET(ID,$id) DESC"; 
```

还要检查这个

[使用 IN() 选择查询且不进行任何排序](https://stackoverflow.com/questions/13657859/select-query-without-any-sorting)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T16:36:46.823

你可以用`FIELD`这个，

```
SELECT * 
FROM table 
WHERE ID IN (4,6,3,2,5,1)
ORDER BY FIELD(ID, 4,6,3,2,5,1) 
```

*   [使用 FIELD() 示例自定义排序](http://www.electrictoolbox.com/mysql-order-specific-field-values/)

# java - 在relativelayout android中动态地将textview放在另一个视图之上

> ID：15589171
> 
> 赞同：2
> 
> 时间：2013-03-23T16:32:03.020
> 
> 标签：java, android, layout

嗨，通过执行 java 代码，我已经成功地在 BOTTOM|RIGHT 等相对布局中添加了 textview

但我想将 textview 放在底部栏布局之上

这是图像 ![在此处输入图像描述](../Images/6e610ba0517f3f281fd8ccd52890c072.png)

在这里你可以看到有一个带有白色背景图像的textview，它的背面有黑色底栏我想把textview放在底部栏上方

下面是我的java代码

```
 LinearLayout bottomBar = (LinearLayout)findViewById(R.id.bottomBar);
    RelativeLayout.LayoutParams params1 = new RelativeLayout.LayoutParams(150, 70);
    params1.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
    params1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE);
    params1.addRule(RelativeLayout.ABOVE, bottomBar.getId());
    butAddText.setLayoutParams(params1); 
```

通过这样做，我添加了左下角，但最后两行不起作用我无法在底栏上方添加 textview ..

任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:04:07.453

我怀疑问题在于您设置了 2 个相互冲突的规则。

尝试删除下一行：

```
params1.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE); 
```

原因：您试图将视图设置为其父视图的底部，以及另一个视图的上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:38:55.717

最简单的方法可能是**模拟**嵌套布局：

```
<LinearLayout ...>
<TextView/>
<RelativeLayout/>
</LinearLayout> 
```

但它可能会降低性能。

**编辑：**

首先膨胀你的LinearLayout（它的方向是垂直的）然后添加你的TextView和你的底栏。另外，如果你想对齐TextView，你可以使用a`RealtiveLayout`而不是外部LinearLayout。

# php - 处理我的登录页面上的错误

> ID：15589178
> 
> 赞同：0
> 
> 时间：2013-03-23T16:33:05.000
> 
> 标签：php

当我单击提交按钮而不输入任何字段时，我的错误处理似乎不起作用，我仍然可以登录我到底错过了什么？？看来我的验证不起作用，这是我在 login.php 下面的代码

```
<?php
include 'core/init.php';
    if (empty($_post) === false) {
    $username = $_post['username'];
    $password = $_post['password'];

    if (empty($username) === true  || empty($password) === true) {
      $errors[] = 'You need to enter a username and password';

    } else if (user_exists($username) === false ) {

      $errors[] = 'Username not found';

    } else if (user_active($username) === false ){

       $errors[] = 'You haven\' activated your account';

    } else {

        if (strlen($password) > 32){
          $errors[] = 'Password too long';

        }

        $login = login($username, $password);

        if($login === false){

         $errors[] = 'That username/password combination is incorrect';

        } else {

        $_session['user_id'] = $login;
        header('location: index.php');
        exit();

        }

    }
} else {

  $errors[] = 'No data recieved';
}

include 'includes/overall/header.php';
if (empty($errors) === false){
?>
<h2> we tried to log you in, but...</h2>
<?php
echo output_errors($errors);

}
include 'includes/overall/footer.php';

?> 
```

我的 init.php

```
<?php
 session_start();
 require 'database/connect.php';
 require 'functions/general.php';
 require 'functions/users.php';
 $errors = array();
?> 
```

通用.php

```
<?php
function sanitize($data){
return mysql_real_escape_string($data);
}
function output_errors($errors) {

 return '<ul><li>' . implode('</li><li>', $errors) . '</li></ul>';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:21:38.533

使用 $_POST 而不是 $_post，它们都是不同的变量，因为 php 对变量名区分大小写。

# nosql - 对于 NoSQL 数据库来说，无模式意味着什么？

> ID：15589184
> 
> 赞同：28
> 
> 时间：2013-03-23T16:33:42.797
> 
> 标签：nosql, schema

Schemaless 是目前在 NoSql 世界中流传的一个术语。

1.  这是什么意思 ？
2.  我今天有一个包含 3 个属性的文档，我使用它开始生产，那么当我需要向我的文档中添加另外 2 个属性时，我的数据会发生什么？
3.  这纯粹是一个迁移问题，我需要管理我的数据迁移，还是 NoSql 数据库可以像 RDBMS 一样产生摩擦，或者以某种方式让它变得更容易？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-23T16:58:37.860

Schema-less 有点用词不当，最好将其视为：

*   SQL = 写入时由 RDBMS 强制执行的模式
*   NoSQL = 写入时由 DBMS 强制执行的部分模式，读取时由应用程序完全强制执行的 PLUS 模式（外部化模式）

因此，虽然假设的无模式 NoSQL 数据存储在理论上允许您在不事先了解键或数据类型的情况下存储您喜欢的任何数据（通常是文档中的键值对），但除非您有一些机制来检索和使用数据。所以本质上，模式部分地从 RDBMS 移动到应用程序代码中。我说部分是因为您将向文档集合添加索引和/或对数据进行分区以提高性能，因此 NoSQL DBMS 将在本地定义部分模式，并可能通过唯一约束强制执行。

至于向商店中的文档/对象添加其他属性。根据文档周围有多少填充（未使用空间），在其物理数据块中，向文档添加更多键值对可能导致文档必须物理移动到更大的连续存储块，并重新构建相关的索引。如果您计划在经常使用的查询中使用新键，那么您还需要添加一个合适的新索引，这显然需要一些物理存储，最初构建需要一段时间，并且可能会导致您要求系统管理员为 DBMS 分配更多内存，以允许缓存新索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T18:49:11.500

有点晚了，但是在再次搜索该主题时，我发现了这篇文章

[http://tech.pro/tutorial/1189/basics-of-ravendb-nosql](http://tech.pro/tutorial/1189/basics-of-ravendb-nosql)

请参阅文章中的第 3 节，为方便起见，我将再次引用它。

> 向 RavenDB 添加和更改数据模型再简单不过了。由于它是一个 NoSQL 数据库，它可以非常简单地处理对模型的添加和删除。如果一个属性被添加到你的类中，它将被设置为该类型的默认值。如果一个属性被删除，那么在反序列化时该值将被忽略。不再使用 SQL 脚本。

这似乎是 RavenDB 的逻辑答案。

# java - Lucene 4 分页

> ID：15589186
> 
> 赞同：7
> 
> 时间：2013-03-23T16:33:45.677
> 
> 标签：java, lucene, pagination

我正在使用 Lucene 4.2 并正在实现结果分页。

`IndexSearcher.searchAfter`提供了一种实现“下一页”功能的有效方法，但是实现“上一页”甚至“转到页面”功能的最佳方法是什么？没有`IndexSearcher.searchBefore`例子。

我正在考虑确定给定页面大小的总页数，并保留一个`ScoreDoc[]`数组来跟踪每个页面的“之后” `ScoreDoc`（该数组将在结果被分页时填充）。这将允许我使用“最接近的”`ScoreDoc`用于`IndexSearcher.searchAfter`（或在最坏的情况下为 null）。

这有意义吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-02T14:11:17.457

我一直在使用 Lucene 4.8 并且一直在研究一个包含分页的 REST 接口。我的解决方案是使用 TopScoreDocCollector 并调用 topDocs(int startIndex, int numberOfhits) 方法。起始索引是通过将基于零的页码乘以命中数来计算的。

```
...
DirectoryReader reader = DirectoryReader.open(MMapDirectory.open( java.io.File(indexFile) );
IndexSearcher searcher = new IndexSearcher(reader);
TopScoreDocCollector collector = TopScoreDocCollector.create(MAX_RESULTS, true);  // MAX_RESULTS is just an int limiting the total number of hits 
int startIndex = (page -1) * hitsPerPage;  // our page is 1 based - so we need to convert to zero based
Query query = new QueryParser(Version.LUCENE_48, "All", analyzer).parse(searchQuery);
searcher.search(query, collector);
TopDocs hits = collector.topDocs(startIndex, hitsPerPage);
... 
```

所以我的 REST 接口接受页码和每页点击数作为参数。所以前进或后退就像为页面提交具有适当值的新请求一样简单

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-26T09:04:34.187

我同意 Jaimie 解释的解决方案。但我想指出您必须注意的另一个方面，它有助于理解搜索引擎的一般机制。

使用 TopDocCollector，您可以定义在按分数或其他排序标准对结果进行排序之前，您希望收集多少匹配您的搜索查询的命中。

请参见以下示例：

```
collector = TopScoreDocCollector.create(9999, true);
searcher.search(parser.parse("Clone Warrior"), collector);
// get first page
topDocs = collector.topDocs(0, 10);
int resultSize=topDocs.scoreDocs.length; // 10 or less
int totalHits=topDocs.totalHits; // 9999 or less 
```

我们在这里告诉 Lucene 最多收集 9999 个包含搜索短语“Clone Warrior”的文档。这意味着，如果索引包含超过 9999 个包含此搜索短语的文档，则收集器将在 9999 个命中填满后停止！

这意味着，您选择的 MAX_RESULTS 越大，您的搜索结果就越好。但这仅在您期望有大量点击时才有意义。另一方面，如果您搜索“luke skywalker”并且您预计只有一次命中，那么 MAX_RESULTS 也可以设置为 1。

因此，更改 MAX_RESULTS 会影响返回的 scoreDocs，因为将对收集的命中执行排序。实际上，将 MAX_RESULTS 设置为足够大的大小，以便人类用户不会争辩错过特定文档。这个概念与 SQL 数据库的行为完全相反，它总是考虑完整的数据池。

但是lucene也支持另一种机制。您可以不为收集器定义 MAX_RESULTS，而是定义您希望等待结果集的时间量。因此，例如，您可以定义始终希望在 300 毫秒后停止收集器。这是保护您的应用程序的性能问题的好方法。但是，如果要确保计算所有相关文档，则必须将 MAX_RESULTS 参数或最大等待时间设置为无限值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-24T07:24:44.263

我正在使用 lucene 8.2.0。我已经使用 indexSearcher.searchAfter() 实现了分页，如下所示。searchAfter() 将 ScoreDoc 作为第一个参数，所以我需要创建 ScoreDoc 的对象。要创建 ScoreDoc 对象，您需要维护之前 ScoreDoc 结果中的三件事 1.doc、2.score、3.shardIndex，这将有助于创建 ScoreDoc 对象

```
 ScoreDoc scoreDoc = new ScoreDoc(53, 2.4933066f,0);
 TopDocs hits3 =  indexSearcher.searchAfter(scoreDoc,query3,10); 
```

我也使用了上面提到的答案，并且使用 TopScoreDocCollector 可以正常工作，但是 indexSearcher.searchAfter 的性能比 TopScoreDocCollector 方法好 3 到 4 倍。

# firefox - facebook iframe 之类的按钮没有出现在 FF 中，在 IE 和 Chrome 中很好

> ID：15589188
> 
> 赞同：1
> 
> 时间：2013-03-23T16:33:55.223
> 
> 标签：firefox, facebook-like, facebook-iframe

下面的代码在 IE 和 Chrome 中运行良好。src 在 FF 浏览器中运行良好。但是，当我将 FF 中的代码包含在 div 标签内时，它不会显示

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.example.com&amp;send=false&amp;layout=button_count&amp;width=50&amp;show_faces=false&amp;colorscheme=light&amp;action=like&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:50px; height:21px;" allowTransparency="true" /> 
```

# c# - 将非静态类声明为静态

> ID：15589190
> 
> 赞同：0
> 
> 时间：2013-03-23T16:33:59.997
> 
> 标签：c#, static, static-methods, non-static

我有一个名为的静态类`A`：

```
public static class A
{
} 
```

还有另一个名为 的类`B`，它不是静态的：

```
public class B
{
} 
```

之后，我将非静态类声明`B`为静态：

```
public class c
{
    // declare a non static class (B) as static
    public static B b = new B();
} 
```

`A`（静态类）和`b`（声明为静态类的非静态类）有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:35:06.610

在 a`static class`中，您*只能*声明静态成员（方法、字段、属性）。在非静态类中，您可以声明静态成员和实例（非静态）成员。

此外，您不能从静态类派生类、实例化它或将其用作类型参数。

* * *

定义静态成员时：

```
public static B b = new B(); 
```

...然后你说这个类型的字段`b`只`B`属于你声明它的类型。非静态字段属于该类型的一个实例。

* * *

例如，如果您有：

```
class MyClass
{
    public static string myStaticString = "";

    public string myInstanceString = "";
} 
```

然后，如果您更改`myInstanceString`，其值只会针对该特定实例更改：

```
MyClass myInstance1 = new MyClass();
MyClass myInstance2 = new MyClass();
myInstance1.myInstanceString = "1";
myInstance2.myInstanceString = "2";
Console.WriteLine(myInstance1.myInstanceString);  // Prints: 1
Console.WriteLine(myInstance2.myInstanceString);  // Prints: 2 
```

但是，如果您更改`myStaticString`，它的值对于使用该类型的每个人都会改变：

```
MyClass.myStaticString = "1";
MyClass.myStaticString = "2";
Console.WriteLine(MyClass.myStaticString);        // Prints: 2 
```

这与`string`（或`B`在您的示例中）是否被声明为`static`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:35:14.870

区别在于**[静态变量](http://msdn.microsoft.com/en-us/library/aa691162%28v=vs.71%29.aspx)**和**[静态类](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)**之间的区别。`b`是非静态类型的静态变量`B`，但是`A`是静态类。

# python - 如何在 django ORM 中查询某一天（DateField）

> ID：15589193
> 
> 赞同：0
> 
> 时间：2013-03-23T16:34:19.280
> 
> 标签：python, django, django-models, django-views

我有一个应用程序，我需要在其中查询数据库的某个日期，以检查用户 y 的日期 x 是否已经存在条目。

我有一个具有以下字段的模型：

```
class MyModel(models.Model):
    user = models.ForeignKey(User)
    day = models.DateField()
    info = models.CharField(max_length=100) 
```

在 forms.py 我有：

```
class MyForm(forms.ModelForm):

    class Meta:
        model = MyModel 
```

在 views.py 代码中，我想检查数据库中是否存在这一天，所以我运行：

```
from datetime import date
from myapp.models import MyModel
from myapp.forms import MyForm
...
#inside the view function
form = MyForm(request.POST)
day = date(form.day)
if days.objects.filter(user=request.user, day=bookday).exists():
... do stuff 
```

它给了我：

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/test_url/

Django Version: 1.5
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'south',
 'myapp')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/django/env/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/django/env/lib/python2.7/site-packages/django/contrib/auth/decorators.py" in _wrapped_view
  25\.                 return view_func(request, *args, **kwargs)
File "/django/env/myproject/myapp/views.py" in test_url
  26\.             bookday = date(form.day)

Exception Type: AttributeError at /test_url/
Exception Value: 'MyForm' object has no attribute 'day' 
```

尽管它显然确实将日期形式作为 DateField。在这种情况下，我该怎么做？

POST数据：

```
POST
Variable    Value

csrfmiddlewaretoken =    u'blahblah'

day =   u'03/27/2013'

user =  u'2' 
```

HTML 模板表单：

```
<form method="post" action="." >
{{ form.user }}
{{ form.day}}

<input type="submit" value="Submit" />
{% csrf_token %}
</form> 
```

编辑：我澄清了代码并放置了堆栈跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:08:36.323

我得到了这个工作。修复非常简单。在我需要获取 POSTed day 值的行中，我只使用：

```
day = form.cleaned_data['day'] 
```

而不是我以前拥有的：

```
day = date(form.day) #WRONG CODE 
```

然后将其作为正常的 days.objects.filter(user=request.user, day=day) 行传递给数据库。

# javascript - 通过 javascript/Internet Explorer 设置下拉列表 onclick 的值

> ID：15589195
> 
> 赞同：0
> 
> 时间：2013-03-23T16:34:33.087
> 
> 标签：javascript, internet-explorer, drop-down-menu, return-value

我在页面上有一个下拉列表，用户可以从中选择某个值，然后显示某个图形（取决于选择）。

该图形有一个 id-tag，其中包含一个值，单击时，脚本会按该值的名称加载另一个图形。

在点击事件上，下拉列表的值由

```
 menu.property("value", this.id); 
```

随后调用该函数。

这在 Firefox 中运行良好，但不知何故它在 Internet Explorer（9 和 10）中不起作用，因为没有传递任何值。“this.id”有效，menu.property.value 也设置正确，但资源管理器只是没有传递这个值，我最终得到一个空白页 - 所以我会感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:41:15.137

每个浏览器都有不同的 JavaScript 和 DOM 实现。你最好的选择是开始使用一个库，比如[jQuery](http://jquery.com/)，它可以“规范化”大多数浏览器的差异。

# iphone - 了解 iPhone 应用程序后台状态

> ID：15589196
> 
> 赞同：0
> 
> 时间：2013-03-23T16:34:37.533
> 
> 标签：iphone, xcode, background, states

我有一个棘手的问题。在我的应用程序中，用户可以更改是否希望应用程序在后台运行。如果是 - 它应该工作，直到用户杀死它。如果不是 - 它应该在用户按下主页按钮之前工作，并且应该在使用顶部按钮锁定屏幕后工作。

因此，plist 文件中有一行名为“应用程序不在后台运行”。如果我让它“是” - 应用程序运行直到按下主页按钮，并且在锁定屏幕后仍然工作。完美的。如果我将其设为“否”-应用程序一直在运行，直到我将其杀死。完美的。

但我猜你不能从应用程序更改 plist 值。好吧，我找到了一种使用 applicationDidEnterBackground 的方法：

```
if (userDontWantItRunInBackground) { exit(0); } 
```

但这有一个问题（Apple不推荐除外）：

```
if "application does not run in background" = YES:

applicationDidEnterBackground is NOT CALLED on locking the screen

if "application does not run in background" = NO:

applicationDidEnterBackground is CALLED on locking the screen 
```

这没有道理！这不允许我让应用程序在锁定屏幕上运行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:46:02.053

在 iOS 4 中，如果您的应用程序愿意，您无法避免空闲时间睡眠。

```
 [[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

**以下是有关 iOS 后台执行的更多信息：**

![在此处输入图像描述](../Images/cb77cf3b8da7792ba8db40dde02481a1.png)

[更多的：](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# c++ - 更改鼠标钩子中的光标

> ID：15589197
> 
> 赞同：0
> 
> 时间：2013-03-23T16:34:38.637
> 
> 标签：c++, c, winapi

我需要在鼠标钩子程序中更改光标，但找不到方法

如果我用函数更改光标`SetSystemCursor`，它会改变，但每当它移动到不同的窗口（比如说一个将光标更改为 的窗口`IDC_ARROR`，`IDC_HAND`或类似的东西）时，puff，光标再次改变。

在我的鼠标钩子程序中，即使我`SetCursor`在程序开始时调用函数，也没有任何变化。（虽然我不使用函数调用`CallNextHook`和设置光标位置）。`SetCursorPos`

我该怎么办，有什么想法吗？

# ruby-on-rails - 设计可跟踪无法保存用户，RuntimeError

> ID：15589201
> 
> 赞同：2
> 
> 时间：2013-03-23T16:35:02.760
> 
> 标签：ruby-on-rails, devise

仅在某些用户登录时（heroku 生产）才会发生这种情况 从日志中：

```
 Started POST "/users/sign_in?locale=en"

     RuntimeError (Devise trackable could not save #<User id:

    cache: [POST /users/sign_in?locale=en] invalidate, pass 
```

5 个设计可跟踪数据库列位于用户模型上，并且对于该用户具有有效的外观值。用户无法登录

这是从 1.x 升级到设计 2.2.3 后发生的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:30:42.990

同时保存的关联模型存在活动记录验证错误

# c - 处理矩阵的边界单元

> ID：15589203
> 
> 赞同：1
> 
> 时间：2013-03-23T16:35:05.557
> 
> 标签：c, multidimensional-array

我想处理*nxn*矩阵的每个边界单元格。例如对于*int array[5][5];* 算法应该处理每个*x*元素，所以它有形式

```
 x x x x x 
   x - - - x
   x - - - x
   x - - - x
   x x x x x 
```

处理这些细胞的最佳方法是什么？如果它是一个 3 维数组呢？在此先感谢，并为矩阵表示感到抱歉。

**编辑我**只想使用一个循环以避免嵌套循环或递归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:01:36.480

想象一下，触摸每个元素都有其成本，而您只想触摸边框元素。

显然，这不是一般的优化。但在图像处理方面，我有很好的表现。**我的意思是，这取决于，在你的情况下测试它并决定。**

在二维数组中，您可以`ptr`指向矩阵并逐步进行。

```
void process(char i)
{
    cout << i;
}

int main()
{
    const int N = 5;
    char mat[N][N] = {
        {'a', 'b', 'c', 'd', 'e'},
        {'f', '-', '-', '-', 'g'},
        {'h', '-', '-', '-', 'i'},
        {'j', '-', '-', '-', 'k'},
        {'l', 'm', 'n', 'o', 'p'}
    };

    char *ptr = (char*) mat;

    for (int i = 0; i < N - 1; ++i) // Process first row
        process(*ptr++);

    for (int i = 0; i < N - 2; ++i) // Process column borders
    {
        process(*ptr);
        process(*(ptr + 1));
        ptr += N;
    }

    for (int i = 0; i <= N; ++i)    // Process last row
        process(*ptr++);

    cout << endl;
} 
```

输出：

> abcdefghijklmnop

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T16:42:00.853

您基本上想要处理数组中每个维度的`index == 0`情况`index == size`。假设`process()`是您的处理函数并采用 int 参数。

```
void processNXNBorders(int** twoDArray, int dimonesize, int dimtwosize) {
    for (int i = 0; i < dimonesize; i++) {
        if (i == 0 || i == dimonesize-1) {
            // Process entire row
            for (int j = 0; j < dimtwosize; j++) {
                 process(twoDArray[i][j]);
            }
        } else {
            // Only first and last elements in this row.
            process(twoDArray[i][0]);
            process(twoDArray[i][dimtwosize-1]);
        }
    }
} 
```

因此，对于 5x5 数组，调用将是：

```
processNXNBorders(arr, 5, 5); 
```

# paperclip - 样式选项打破回形针

> ID：15589209
> 
> 赞同：2
> 
> 时间：2013-03-23T16:35:35.803
> 
> 标签：paperclip

在我的 gemfile 中，我有`gem "paperclip", :git => "git://github.com/thoughtbot/paperclip.git"` 和`gem "cocaine", "~> 0.5.1"`（报告可卡因破坏回形针的其他问题已在此版本中修复）在我的模型`has_attached_file :photo , :styles => { :thumb => "32x32#" }` 中 在我的 development.rb`Paperclip.options[:command_path] = "/user/local/bin"`

`Photo Paperclip::Errors::NotIdentifiedByImageMagickError`尝试上传时出现错误。

但是，如果我将模型更改为`has_attached_file :photo`删除样式属性，则一切正常。我需要能够调整我的图像大小，为什么样式属性会破坏我的上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T09:16:33.037

看起来你没有安装[ImageMagick](http://www.imagemagick.org/)。

当回形针尝试创建缩略图时，它需要 ImageMagick 来调整图像大小。如果没有**:styles，**回形针只会保存原始图像，不需要 ImageMagick。

# intellij-idea - Intellij 12 和 websphere liberty 8.5 next beta - 找不到应用程序服务器库

> ID：15589211
> 
> 赞同：1
> 
> 时间：2013-03-23T16:35:44.443
> 
> 标签：intellij-idea, websphere, websphere-liberty

我在 Mac 上安装了最新的 WebSphere 自由配置文件：

```
wlp-developers-runtime-8.5.next.beta.jar 
```

WebSphere 版本`8.5.next.beta`在 Intellij 中显示。

在 Intellij 12 中，我尝试添加这个 WebSphere Application Server，我得到：

> 无法保存设置：未找到应用程序服务器库

如果我查看文件系统，它的位置似乎是：

*   `com.ibm.ws.javaee.jsp.2.2_1.0.0.0.jar`
*   `com.ibm.ws.javaee.servlet.3.0_1.0.0.jar`

变化从`/dev/spec`到`/dev/api/spec`

我不确定这是否是根本原因，但 Intellij 似乎将这些添加到以前版本的类路径中。有没有办法让 intellij 启动并运行，例如我可以更改它查找库的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:14:56.893

有同样的问题。有两种方法。

将 wlp 8.5 解压到您想要安装 wlp 8.5.next 的文件夹中。解压后，将 IntelliJ 指向该文件夹，它将检测到它。一旦检测到，只需删除 wlp 文件夹并在其中解压缩 8.5.next。完成后，更正库路径。

或者; 打开 IntelliJ 的 other.xml 文件（通常在 ~/.IntelliJIDEA12/config/options/other.xml 中）并修改如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<application>
  <!-- other stuff -->
  <component name="AppserversManager">
    <LibraryTable>
      <library name="WebSphere 8.5.Next.Beta">
        <CLASSES>
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.annotation.1.1_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.cdi.1.0_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.ejb.3.1_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.el.2.2_1.0.1.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.interceptor.1.1_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jaxb.2.2_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jaxrs.1.1_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jaxws.2.2_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jms.1.1_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jsf.2.0_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jsf.tld.2.0_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jsp.2.2_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jsp.tld.2.2_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.jstl.1.2_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.persistence.2.0_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.servlet.3.0_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.transaction.1.1_1.0.0.jar!/" />
          <root url="jar:///opt/wlp/dev/api/spec/com.ibm.ws.javaee.validation.1.0_1.0.0.jar!/" />
        </CLASSES>
        <JAVADOC />
        <SOURCES />
      </library>
    </LibraryTable>
    <ServerDK NAME="WebSphere 8.5.Next.Beta">
      <option name="SOURCE_INTEGRATION_NAME" value="WebSphere Server" />
      <DATA>
        <state>
          <option name="home" value="/opt/wlp" />
          <option name="version" value="8.5.next.beta" />
        </state>
      </DATA>
    </ServerDK>
  </component>
  <!-- rest -->
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T17:39:04.967

此问题现已在 Intelli 12.1.2 及更高版本中正式修复。发行[说明](http://confluence.jetbrains.com/display/IDEADEV/IntelliJ+IDEA+12.1.2+Release+Notes)和[原始票证](http://youtrack.jetbrains.com/issue/IDEA-103787)有更多详细信息。

# jquery - Lof Slider - 悬停时暂停

> ID：15589212
> 
> 赞同：1
> 
> 时间：2013-03-23T16:35:48.460
> 
> 标签：jquery, hover, slider, mouseover

我正在使用 jQuery Lof 滑块版本：3.0.2。没有类似的选项：

```
PauseOnHover: true 
```

如何直接在插件代码中执行此操作？

[插件代码](http://jsfiddle.net/nRBPq/)

[现场示例](http://ingozoell.de/lof/)

谢谢奥尼
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:13:21.780

我不确定这个滑块是如何工作的，因为我只能看到插件 JavaScript 而不是一个工作示例。但这应该很容易自己实现。

您可以在幻灯片中添加一个简单的`hover()`处理程序来调用该`stop()`函数并快速浏览我认为调用了动画开始函数`fxStart()`。这只是一个想法，但请参阅下面的类似可能有效的方法。

```
$('#SlideshowArea').hover(
   function(){
      $('#slideshow').stop();
   },
   function(){
      $('#slideshow').fxStart();
   }
); 
```

# objective-c - 如何让图像数组动画在 Xcode 中仅循环一个循环？

> ID：15589215
> 
> 赞同：0
> 
> 时间：2013-03-23T16:35:49.100
> 
> 标签：objective-c, xcode, arrays, animation

我有一个图像数组动画，但它是一个连续循环。如何让它只循环一个循环并在最后一帧停止？

```
- (void) balloonAnimation
{
    NSMutableArray *balloonAnimationImages = [NSMutableArray arrayWithCapacity:27];

   for (NSInteger i = 0; i < 27; i++) {
       NSString *nameOfImage = [NSString stringWithFormat:@"balloons%d.png", i+1];
       UIImage *image = [UIImage imageNamed:nameOfImage];
       [balloonAnimationImages addObject:image];       
    }

    //animate here
    self.imgBalloon.animationImages = balloonAnimationImages;
    self.imgBalloon.animationDuration = 5.0f;
    [self.imgBalloon startAnimating];    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:40:46.683

尝试这个：

```
self.imgBaloon.animationRepeatCount = 1; 
```

编辑：正如@Elliott Perry 在他的回答中所说，您需要将最后一帧分配给该`image`属性。这是代码：

```
self.imgBalloon.animationImages = balloonAnimationImages;
self.imgBalloon.animationDuration = 5.0f;
self.imgBaloon.animationRepeatCount = 1;
self.imgBaloon.image = [balloonAnimationImages lastObject];
[self.imgBalloon startAnimating]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T17:37:03.430

从[我可以在最后一帧停止 UIImageView 动画吗？](https://stackoverflow.com/questions/2776516/can-i-stop-uiimageview-animation-at-last-frame)

> UIImageView 类的图像属性具有以下文档：“如果动画图像属性包含 nil 以外的值，则不使用此属性的内容。”
> 
> 因此，在 iOS4+ 中保持动画最后一帧的技巧是首先将 image 属性设置为最后一帧（而 animationImages 仍为 nil），然后设置 animationImages 属性并调用 startAnimating。动画完成后，将显示图像属性。无需回调/委托。

# assembly - 在汇编代码中调用 C 函数（gas）

> ID：15589226
> 
> 赞同：1
> 
> 时间：2013-03-23T16:36:23.167
> 
> 标签：assembly, x86-64, gnu-assembler

我找到了一个例子，并正在编辑它的气体。

```
extern printf
.global _start
.data
hello:
db "Hello", 0xa, 0
.text
_start:
mov %rdi, hello
mov %rax, 0
call printf
mov %rax, 0
ret 
```

但它不起作用。怎么了？这是什么意思：

```
 hello:
db "Hello", 0xa, 0 
```

我明白它的内存范围，但我不明白这个字符串

```
db "Hello", 0xa, 0 
```

和这里

```
_start:
mov %rdi, hello
mov %rax, 0
call printf
mov %rax, 0
ret 
```

操作系统：Linux（debian）。英特尔 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:08:19.617

它是[**空字节终止符**](http://en.wikipedia.org/wiki/Null-terminated_string)。众所周知的 C 字符串。字符串末尾的此类字节表示字符串的结束位置。例如，您将指向您的字符串的指针传递给一个例程，该例程将理解该字符串在内存中的区域是从乞求`a[0]`（用 C 术语来说）直到`a[x] == 0`被看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:44:04.890

所做的只是将字节放入程序中。字节是字符“Hello”，然后是 0xa（这是行终止符），最后是 NULL 字节。在 C 语言中，它类似于 "char *hello = "Hello\n";"

在您的 _start: 标签处，将`hello`标签的地址放入寄存器 %rdi，将 0 放入 %rax，然后调用该`printf`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:01:13.023

下面声明了一个带有 Hello 的字符串，后跟换行符和空终止符。C 字符串需要空终止符

```
db "Hello", 0xa, 0 
```

要调用 printf，您需要在堆栈上传递参数，因此它类似于

```
mov hello, (%esp)
call printf 
```

据我所知，约定是 mov source, destination。您似乎以相反的方式对其进行了编码。

# loops - 使用 Unity3D Freezing PC 构建的程序 - 零星

> ID：15589230
> 
> 赞同：1
> 
> 时间：2013-03-23T16:36:39.110
> 
> 标签：loops, memory, system, unity3d, freeze

我使用构建的程序`Unity3D`偶尔会冻结，此操作会冻结我的计算机。我无法查明根本原因。我在整个项目中都放置了日志，但游戏无法冻结。

是否有任何`Unity3D`开发人员以我所描述的方式经历过他们的应用程序偶尔冻结的情况？有没有人有任何想法或建议？

由于 30K 字符限制，以下对象已稍作修改。这是我认为包含缺陷的对象，但我无法识别此缺陷。

```
public class gamePlayController : MonoBehaviour {
    void Start () { 
        int i = 0;
        int selectedPlayers = PlayerPrefs.GetInt("TotalPlayers");

        foreach( GameObject touchable in GameObject.FindGameObjectsWithTag("Touchable") )
        {   
            touchable.SetActive(false);
            touchable.AddComponent(typeof(PlayerCollisionDispatcher));
            PlayerCollisionDispatcher nextDispatcher = touchable.GetComponent<PlayerCollisionDispatcher>();
            nextDispatcher.currentGameObject = touchable;
            nextDispatcher.gameObject.AddComponent("AudioSource");

            for(i = 0; i < this.m_Players.Count; i++)
            {
                if(string.Compare(touchable.name, this.m_Players[i].name) < 0)
                {
                    break;
                }
            }

            if(i < this.m_Players.Count)
            {
                this.m_Players.Insert(i, touchable);
            }
            else
            {
                this.m_Players.Add(touchable);
            }
        }

        while(this.m_Players.Count > selectedPlayers)
        {
            this.m_Players.RemoveRange(selectedPlayers, this.m_Players.Count - selectedPlayers);
        }   

        this.restartGame();
    }

    void OnGameTimer(object sender, ElapsedEventArgs e)
    {
    }

    void Update() {
        Vector3 vector = m_ArialCamera.camera.transform.position;

        vector.x = Mathf.Abs((1500 * this.m_ArialView.x) - 1500) + 250;
            vector.y = (600 * this.m_ArialView.y) + 100;
            vector.z = (1500 * this.m_ArialView.z) + 250;
            m_ArialCamera.camera.transform.position = vector;

        if(this.m_IsGameOver)
        {
            Application.LoadLevel("Replay Screen");
        }
        else if(this.m_SimulateCamera)
        {
            this.SimulateCamera();
        }
        else if(m_AutoPluck)
        {
            this.AutoPluck();
        }
        else if(Time.timeScale != 0.0f && this.m_Dispatcher && this.m_Dispatcher.didObjectStop)
        {
            this.determineTurnOutcome();                                
        }
        else if(Time.timeScale != 0.0f && this.m_Dispatcher && this.m_Dispatcher.didObjectMove)
        {
            this.m_Dispatcher.trackMovementProgress();
        }
        else if(Time.timeScale != 0.0f && this.m_Dispatcher 
            && this.m_Players[this.m_PlayerIndex].rigidbody.velocity.magnitude > 15.0f 
            && this.m_Dispatcher.didPluck)
        {
            this.m_Dispatcher.didObjectMove = true;
        }
    }

    void restartGame()
    {
        this.m_PlayerIndex = -1;
        foreach( GameObject touchable in this.m_Players)
        {
            GameObject startField = GameObject.FindWithTag ("StartField");      
                    touchable.SetActive(false);
            touchable.rigidbody.useGravity = false;
            touchable.rigidbody.velocity = Vector3.zero;
            touchable.rigidbody.AddForce(Vector3.zero);
            touchable.rigidbody.AddTorque(Vector3.zero);

            if(startField)
            {
                Vector3 nextPoint = startField.renderer.bounds.center;
                nextPoint.y = 11.0f;
                touchable.transform.position = nextPoint;
            }

            touchable.rigidbody.useGravity = true;
        }
        this.startNextPlayer();
    }

    void startNextPlayer()
    {
        bool isActivePlayerReady = true;        

        do{
            if(this.m_PlayerIndex != -1)
            {
                audioPlayer.PlayAudio("Audio/Next Player");
            }

            this.m_PlayerIndex = (this.m_PlayerIndex + 1)%this.m_Players.Count;
            this.m_Dispatcher = this.m_Players[this.m_PlayerIndex].GetComponent<PlayerCollisionDispatcher>();
            if(this.m_Dispatcher && !this.m_Dispatcher.isGameOver && !this.m_Dispatcher.didEnterMud)
            {
                if(!this.m_Players[this.m_PlayerIndex].activeSelf)
                {
                    this.m_Dispatcher.startGame();
                    this.m_Players[this.m_PlayerIndex].SetActive(true);
                }

                this.m_Dispatcher.startTurn();
            }
        }
        while(!isActivePlayerReady);

        Vector3 vector = this.m_Players[this.m_PlayerIndex].transform.position;             
        vector.x = (1500 * this.m_ArialView.x) + 250;
        vector.y = 300;
            vector.z = (1500 * this.m_ArialView.z) + 250;
        m_ArialCamera.camera.transform.position = vector;

        this.setAnnouncement("Player " + this.m_Players[this.m_PlayerIndex].name + "'s Turn");

        if(this.m_PlayerIndex != 0)
        {
            this.m_IsSimulating = PlayerPrefs.GetInt("SimulatePlayer" + this.m_Players[this.m_PlayerIndex].name);
            this.m_IsSimulating = 1;
        }
        else
        {
            this.m_IsSimulating = 0;
        }   

        GameObject mainCamera = GameObject.FindWithTag ("MainCamera");              
        MouseOrbit mo = null;   
        if(mainCamera)
        {
            mo = mainCamera.GetComponent<MouseOrbit>();
        }   

        if(this.m_IsSimulating >= 1)
        {           
            this.StartSimulation();

            if(mo)
            {
                mo.DoFreeze = true;
            }                   
        }
        else
        {
            if(mo)
            {
                mo.DoFreeze = false;
            }
        }       
    }

    void StartSimulation()
    {
        System.Random random = new System.Random();
        StringBuilder sb = new StringBuilder();
        int randomNumber = 0;

        //determine either the player object or the next block
        if(this.m_Dispatcher.isKiller)
        {
            m_SimulateToObject = this.m_Players[randomNumber%this.m_Players.Count];                 
            randomNumber = random.Next(0, 100);
        }
        else
        {
            sb.AppendFormat("{0:D2}", this.m_Dispatcher.targetScore);
            Debug.Log("target score=" + sb.ToString());

            foreach(GameObject scoreField in GameObject.FindGameObjectsWithTag("ScoreField"))
            {
                if(scoreField.name == sb.ToString())
                {
                    m_SimulateToObject = scoreField;
                    break;
                }
            }
        }

        this.m_IsTargetInitiallyVisible = false;                
        this.m_SimulationTimer = new System.Timers.Timer();
        this.m_SimulationTimer.Elapsed+=new ElapsedEventHandler(TriggerCameraSimulation);
        this.m_SimulationTimer.Interval=2500;
        this.m_SimulationTimer.Enabled=true;
    }

    void TriggerCameraSimulation(object sender, ElapsedEventArgs e)
    {
        this.m_SimulationTimer.Enabled = false;
        this.m_SimulationTimer.Dispose();
        this.m_SimulateCamera = true;
    }

    void SimulateCamera()
    {
        GameObject mainCamera = GameObject.FindWithTag ("MainCamera");              
        MouseOrbit mo = null;   
        this.m_SimulationTimer.Enabled = false;
        this.m_SimulationTimer.Dispose();

        if(mainCamera)
        {
            mo = mainCamera.GetComponent<MouseOrbit>();

            if(!this.m_IsTargetInitiallyVisible)
            {
                mo.IsManualMove = true;
                mainCamera.transform.position = this.m_Players[this.m_PlayerIndex].transform.position;
                mainCamera.transform.LookAt(this.m_SimulateToObject.transform, Vector3.up);
                this.m_IsTargetInitiallyVisible = true; 
            }
            else if(this.m_SimulateCamera)
            {
                if(mo.getDistance() >= 10.0f)
                {
                    this.m_SimulateCamera = false;
                }
                mo.setDistance(-0.001f);
            }
        }

        if(!this.m_SimulateCamera)
        {               
                this.m_SimulationTimer = new System.Timers.Timer();
            this.m_SimulationTimer.Elapsed+=new ElapsedEventHandler(TriggerSimulatedPluck);
            this.m_SimulationTimer.Interval=2000;
            this.m_SimulationTimer.Enabled=true;
        }
    }

    void TriggerSimulatedPluck(object sender, ElapsedEventArgs e)
    {
        this.m_SimulationTimer.Enabled = false;
        this.m_SimulationTimer.Dispose();
        this.m_AutoPluck = true;
    }

    void AutoPluck()
    {
        System.Random random = new System.Random();
        GameObject mainCamera = GameObject.FindWithTag ("MainCamera");              
        MouseOrbit mo = null;   
        float applyForce = 0.0f;
        float slope = 0.00028648399272739457f;
        float y_int = 0.2908366193449838f;
        Vector3 vTorque = Vector3.zero;
        int simulateId = PlayerPrefs.GetInt("SimulatePlayer" + this.m_Players[this.m_PlayerIndex].name);
        int seed = (5 * ((int)(SimulationOptions.Pro) - simulateId));
        int xSeed = 0;
        int ySeed = 0;
        int zSeed = 0;
        int sign = random.Next(1, 1000)%2;
        int range = random.Next(1, 1000)%seed;
        int myValue = 0;

        this.m_SimulationTimer.Enabled = false;
        this.m_SimulationTimer.Dispose();

        if(mainCamera)
        {
            mo = mainCamera.GetComponent<MouseOrbit>();
            mo.IsManualMove = false;
        }

        this.m_AutoPluck = false;

        if(simulateId >= 1)
        {
            float distance = Vector3.Distance(this.m_Players[this.m_PlayerIndex].transform.position,
                this.m_SimulateToObject.transform.position);

            if(simulateId != (int)(SimulationOptions.Pro))
            {
                myValue = random.Next(1, 6);
                seed = (int)(myValue * ((int)(SimulationOptions.Pro) - simulateId));
                sign = random.Next(1, 2);
                range = random.Next(1, seed);

                if(random.Next(1, 1000)%3 == 0)
                {
                    distance += (sign == 1 ? range : -range);
                }
            }

            vTorque.x = (float)(random.Next(1, 90));
            vTorque.y = (float)(random.Next(1, 90));
            vTorque.z = (float)(random.Next(1, 90));

            applyForce = (slope * distance) + y_int;
            this.m_Dispatcher.pluckObject(applyForce, vTorque);
        }
    }

    void determineTurnOutcome()
    {
        int number = -1;
        bool canActivePlayerContinue = false;
        bool isAutoReward = false;
        bool didElinimatePlayer = false;

        foreach(GameObject nextObject in this.m_Players)
        {
            PlayerCollisionDispatcher nextDispatcher = nextObject.GetComponent<PlayerCollisionDispatcher>();

            if(nextObject.activeSelf && !nextDispatcher.isGameOver && !nextDispatcher.isActive)
            {
                if(nextDispatcher.currentScore == nextDispatcher.targetScore)
                {
                    nextDispatcher.totalScore = nextDispatcher.targetScore;
                    int.TryParse(nextDispatcher.name, out number);
                    nextDispatcher.targetScore++;

                    if(nextDispatcher.totalScore >= 13 || nextDispatcher.targetScore > 13)
                    {
                        nextDispatcher.totalScore = 13;
                        nextDispatcher.targetScore = 13;
                        nextDispatcher.isKiller = true;
                        this.setMaterial(nextDispatcher.renderer, "killers", nextDispatcher.name);
                    }
                    else
                    {
                        this.setMaterial(nextDispatcher.renderer, "numbers", nextDispatcher.name);
                    }
                }
                else if(nextDispatcher.didKillerCollide && (nextDispatcher.didLeaveBoard || nextDispatcher.didLeaveBounds))
                {
                    this.setMaterial(nextDispatcher.renderer, "eliminated", nextDispatcher.name);
                    nextDispatcher.isGameOver = true;
                    didElinimatePlayer = true;
                }
                else if(nextDispatcher.didPlayerCollide && (nextDispatcher.didLeaveBoard || nextDispatcher.didLeaveBounds))
                {
                    if(int.TryParse(nextDispatcher.name, out number))
                    {
                        nextDispatcher.targetScore = 1;
                        nextDispatcher.totalScore = 0;
                    }
                }
                else if(nextDispatcher.didEnterMud)
                {
                    this.setMaterial(nextDispatcher.renderer, "mudd", nextDispatcher.name);
                    nextDispatcher.isKiller = false;
                }
                else if(nextDispatcher.isInMud && !nextDispatcher.didEnterMud)
                {
                    isAutoReward = true;
                }
                else
                {
                    this.setMaterial(nextDispatcher.renderer, "numbers", nextDispatcher.name);
                }
            }

            nextDispatcher.transferStates();
        }

        if(this.m_Dispatcher.isKiller && !didElinimatePlayer)
        {
            this.setMaterial(this.m_Dispatcher.renderer, "numbers", this.m_Dispatcher.name);
            this.m_Dispatcher.totalScore = 0;
            this.m_Dispatcher.targetScore = 1;
            this.m_Dispatcher.isKiller = false;
        }
        else if(this.m_Dispatcher.didEnterMud)
        {
            this.setMaterial(this.m_Dispatcher.renderer, "mud", this.m_Dispatcher.name);
        }

        else if(this.m_Dispatcher.currentScore == this.m_Dispatcher.targetScore || isAutoReward)
        {
            this.m_Dispatcher.totalScore = this.m_Dispatcher.targetScore;
            canActivePlayerContinue = true;
            this.m_Dispatcher.consecutivePops++;
            int.TryParse(this.m_Dispatcher.name, out number);
            this.m_Dispatcher.targetScore++;
            this.setMaterial(this.m_Dispatcher.renderer, "numbers", this.m_Dispatcher.name);
        }
        else
        {
            this.setMaterial(this.m_Dispatcher.renderer, "numbers", this.m_Dispatcher.name);
        }

        this.isWinnerAnnounced();

        if(!this.m_IsGameOver && !canActivePlayerContinue)
        {
            this.m_Dispatcher.endTurn();
            this.startNextPlayer();
        }
        else if(canActivePlayerContinue)
        {
            this.m_Dispatcher.transferStates();
            this.m_Dispatcher.isActive = true;
            this.m_Dispatcher.didObjectMove = false;
            this.m_Dispatcher.didObjectStop = false;

            if(this.m_IsSimulating >= 1)
            {           
                this.StartSimulation();
            }
        }

        this.m_ForceValue = 0.0f;   
    }

    void isWinnerAnnounced()
    {
        StringBuilder sb = new StringBuilder();
        int totalPlayers = 0;
        string winner = string.Empty;
        int number = -1;
        int totalPlayersInMud = 0;

        foreach(GameObject nextObject in this.m_Players)
        {
            PlayerCollisionDispatcher nextDispatcher = nextObject.GetComponent<PlayerCollisionDispatcher>();

            if(!nextDispatcher.isGameOver)
            {
                totalPlayers++;
                winner = nextObject.name;
            }
            if(nextDispatcher.isInMud)
            {
                totalPlayersInMud++;
            }
        }

        if(totalPlayers == 1)
        {
            if(winner != string.Empty && int.TryParse(winner, out number))
            {
                sb.AppendFormat("Congratulations Player {0}", number);
                PlayerPrefs.SetString("WinningPlayer", sb.ToString());
            }
            else
            {
                PlayerPrefs.SetString("WinningPlayer", "Congratulations");
            }
            this.m_IsGameOver = true;
        }
        else if(totalPlayersInMud == this.m_Players.Count)
        {
            PlayerPrefs.SetString("WinningPlayer", "All players are stuck in the mud!");
            this.m_IsGameOver = true;
        }
    }

    void setMaterial(Renderer renderer, string state, string playerId)
    {
        StringBuilder sbNextImage = new StringBuilder();

        sbNextImage.AppendFormat("Materials/playerObjects/{0}/{1}", state, playerId);

        Material newMat = Resources.Load(sbNextImage.ToString(), typeof(Material)) as Material;
        if(newMat)
        {
            renderer.material = newMat;
        }
        else
        {
            Debug.Log("FAILED to set material: " + sbNextImage.ToString());
        }
    }

    void setAnnouncement(string text)
    {
        this.m_IsAnnouncement = true;
        this.m_AnnouncementHeight = (int)(Screen.height * 0.5);
        this.m_AnnouncementText = text;
    }

    void OnGUI() {
        GUIStyle labelStyle = GUI.skin.label;
        int number = -1;
        StringBuilder scoreDetails = new StringBuilder();
        StringBuilder turnDetails = new StringBuilder();
        float x = 0;
        float y = 0;
        float w = 64.0f;
        float h = 32.0f;
        float alpha = 1.0f;

        if(this.m_IsAnnouncement)
        {
            this.displayAnnouncement();
        }

        labelStyle.normal.textColor = new Color(1.0f, 1.0f, 1.0f, alpha);

        Texture2D texture = new Texture2D(32, 32, TextureFormat.ARGB32, false);

        for(int i = 0; i < 32; i++)
        {
            for(int j = 0; j < 32; j++)
            {
                texture.SetPixel(i, j, new Color(0.0f, 0.0f, 0.0f, 0.25f));
            }
        }

        texture.Apply();
        labelStyle.normal.background = texture;

        if(this.m_DoShowScore)
        {
            foreach(GameObject nextObject in this.m_Players)
            {
                PlayerCollisionDispatcher nextDispatcher = nextObject.GetComponent<PlayerCollisionDispatcher>();

                int.TryParse(nextDispatcher.name, out number);

                if(nextDispatcher.isGameOver)
                {
                    scoreDetails.AppendFormat("\tPlayer {0}: Game Over\n", number);
                }
                else if(nextDispatcher.didEnterMud)
                {
                    scoreDetails.AppendFormat("\tPlayer {0}: In The Mudd\n", number);
                }
                else if(nextDispatcher.isKiller)
                {
                    scoreDetails.AppendFormat("\tPlayer {0}: Killer\n", number);
                }
                else
                {
                    scoreDetails.AppendFormat("\tPlayer {0}: {1}\n", number, nextDispatcher.totalScore);
                }
            }                   

            GUI.Label (new Rect (0, 0, 225, 100), scoreDetails.ToString());
        }

        w = 64.0f;
        h = 32.0f;
        x = Screen.width - w;
        y = Screen.height - h;
        if(GUI.Button (new Rect (x, y, w, h), "Menu"))
        {
            audioPlayer.PlayAudio("Audio/Click");
            this.m_IsMenuShowing = !this.m_IsMenuShowing;
        }

        if(this.m_IsMenuShowing)
        {
                w = (64.0f * this.m_MenuText.Length);
            h = 32.0f;
            x = Screen.width - w - 64.0f;
            y = Screen.height - h;
            int selOption = GUI.Toolbar(new Rect(x, y, w, h), this.m_MenuOption, this.m_MenuText);

            if(selOption != this.m_MenuOption)
            {
                audioPlayer.PlayAudio("Audio/Click");
                this.m_MenuOption = -1;
                this.m_IsMenuShowing = !this.m_IsMenuShowing;
                switch(selOption)
                {                           
                case (int)(MenuOptions.ArialViewOption):    //arial
                    this.m_ArialCamera.SetActive(!this.m_ArialCamera.activeSelf);
                    break;
                case (int)(MenuOptions.VolumeOption):   //mute
                    int muteVolume = PlayerPrefs.GetInt("MuteVolume");
                    muteVolume = (muteVolume + 1)%2;
                    PlayerPrefs.SetInt("MuteVolume", muteVolume);
                    if(muteVolume == 0)
                    {
                        this.m_MenuText[(int)(MenuOptions.VolumeOption)] = "Mute";
                    }
                    else
                    {
                        this.m_MenuText[(int)(MenuOptions.VolumeOption)] = "Volume";
                    }
                    break;
                case (int)(MenuOptions.PauseOption):    //pause
                    if(Time.timeScale == 0.0f)
                    {
                        this.setAnnouncement("Continuing Game Play");
                        Time.timeScale = this.m_Speed;
                        this.m_MenuText[(int)(MenuOptions.PauseOption)] = "Pause";
                    }
                    else
                    {
                        this.setAnnouncement("Game Is Paused");
                        Time.timeScale = 0.0f;
                        this.m_MenuText[(int)(MenuOptions.PauseOption)] = "Play";
                    }
                    break;
                case (int)(MenuOptions.ScoresOption):   //scores
                    this.m_DoShowScore = !this.m_DoShowScore;
                    break;
                case (int)(MenuOptions.RestartOption):  //restart
                    Time.timeScale = this.m_Speed;
                    this.restartGame();
                    break;
                case (int)(MenuOptions.QuitOption): //quit
                    Application.LoadLevel("Opening Screen");
                    break;
                default:
                    break;
                }
            }
        }

        if(this.m_ArialCamera.activeSelf)
        {
            x = Screen.width * 0.7f - 10.0f;
            y = 0;
            w = 10.0f;
            h = Screen.height * 0.3f;
            this.m_ArialView.z = GUI.VerticalSlider (new Rect(x, y, w, h), this.m_ArialView.z, 1.0f, 0.0f);

            x = Screen.width * 0.7f;
            y = Screen.height * 0.3f;
            w = Screen.width * 0.3f;
            h = 10.0f;
            this.m_ArialView.x = GUI.HorizontalSlider (new Rect(x, y, w, h), this.m_ArialView.x, 1.0f, 0.0f);

            x = Screen.width * 0.7f;
            y = Screen.height * 0.3f + 12.0f;
            w = Screen.width * 0.3f;
            h = 10.0f;
            this.m_ArialView.y = GUI.HorizontalSlider (new Rect(x, y, w, h), this.m_ArialView.y, 1.0f, 0.0f);
        }

        int.TryParse(this.m_Players[this.m_PlayerIndex].name, out number);

        turnDetails.AppendFormat("\tPlayer {0}'s Turn\n", number); 
        turnDetails.AppendFormat("\tNext Goal: {0}\n", this.m_Dispatcher.targetScore); 

        GUI.Label (new Rect (0, Screen.height - 100, 225, 100), turnDetails.ToString());

        if(!this.m_Dispatcher.didObjectMove && m_IsSimulating == 0)
        {
            x = 250.0f;
            y = Screen.height - 190.0f;
            w = 30.0f;
            h = 150.0f;
            this.m_ForceValue = GUI.VerticalSlider (new Rect(x, y, w, h), m_ForceValue, 1.0f, 0.0f);

            x = 250.0f;
            y = Screen.height - 30.0f;
            w = 100.0f;
            h = 30.0f;
            if(GUI.Button (new Rect(x, y, w, h), "Pluck!")) 
            {
                System.Random random = new System.Random();
                Vector3 vTorque = Vector3.zero;
                int xSeed = 0;
                int ySeed = 0;
                int zSeed = 0;

                xSeed = (random.Next(1, 45));
                ySeed = (random.Next(1, 45));
                zSeed = (random.Next(1, 45));

                vTorque = new Vector3(xSeed, ySeed, zSeed);
                this.m_Dispatcher.pluckObject(this.m_ForceValue, vTorque);
            }
        }   
    }   

    void displayAnnouncement()
    {
        float x = 0;
        float y = 0;
        float w = 0;
        float h = 0;
        float alpha = 1.0f;     
        GUIStyle announcementStyle = null;
        GUIStyle labelStyle = null;

        announcementStyle = new GUIStyle();
        labelStyle = GUI.skin.label;
        labelStyle.normal.textColor = new Color(1.0f, 1.0f, 1.0f, alpha);

        x = (int)(Screen.width * 0.25);
        y = (int)m_AnnouncementHeight;
        w = (int)(Screen.width * 0.5);
        h = 100;
        alpha = (float)m_AnnouncementHeight/(float)(Screen.height * 0.5);
        announcementStyle.fontSize = 32;
        announcementStyle.alignment = TextAnchor.MiddleCenter;
        announcementStyle.fontStyle = FontStyle.BoldAndItalic;
        announcementStyle.normal.textColor = new Color(1.0f, 1.0f, 1.0f, alpha);                

        GUI.Label (new Rect (x, y, w, h), this.m_AnnouncementText, announcementStyle);

        if(Time.timeScale != 0.0f)
        {
            if((this.m_AnnouncementHeight + h) <= 0)
            {
                this.m_IsAnnouncement = false;
                this.m_AnnouncementHeight = (int)(Screen.height * 0.5);
            }
            else
            {
                this.m_AnnouncementHeight -= 1;
            }
        }
    }
}

----------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:14:07.130

我相信我已经缩小了冻结范围。模拟测试结果让我相信我的问题出在 OnGUI() 方法中。我已经把这个方法全部注释掉了，我的应用程序运行顺利。我会弄清楚这一点，除非有人在根本原因和解决方案上击败我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:04:55.517

我解决了...

我最初的怀疑是正确的：问题确实出在 OnGUI() 方法中。我将以下源代码移至 Start() 方法。这是有道理的，因为我只构建了一次透明背景纹理。：

```
Texture2D texture = new Texture2D(32, 32, TextureFormat.ARGB32, false);

for(int i = 0; i < 32; i++)
{
    for(int j = 0; j < 32; j++)
    {
        texture.SetPixel(i, j, new Color(0.0f, 0.0f, 0.0f, 0.25f));
    }
}

texture.Apply(); 
```

# android - 列表视图项的自定义布局中的滚动问题

> ID：15589231
> 
> 赞同：0
> 
> 时间：2013-03-23T16:36:39.693
> 
> 标签：android, android-widget

我正在为列表视图中的 eack 项目使用自定义布局。每个项目看起来像

```
--------------------
Image|filename|image
     |fileinfo|
-------------------- 
```

我使用 textview 来显示文件名和文件信息。如果内容超过长度，要在文件名文本视图中进行水平滚动，我用水平滚动视图包围它。但 listitem 点击不起作用。这是我的精简项目布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:padding="8dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imgIcon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentTop="true"
            android:layout_marginBottom="5dp"
            android:layout_marginRight="15dp"
            android:layout_marginTop="5dp"
            android:gravity="center_vertical"
            android:src="@drawable/file" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.17"
            android:orientation="vertical" >

            <HorizontalScrollView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/fileName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentTop="true"
                    android:layout_marginBottom="5dp"
                    android:layout_marginTop="5dp"
                    android:gravity="center_vertical"
                    android:textColor="@color/white"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </HorizontalScrollView>

            <TextView
                android:id="@+id/fileInfo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentTop="true"
                android:layout_marginBottom="5dp"
                android:layout_marginTop="5dp"
                android:gravity="center_vertical"
                android:textColor="@color/white"
                android:textSize="10dp" />
        </LinearLayout>

        <ImageView
            android:id="@+id/navIcon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentTop="true"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="5dp"
            android:gravity="center_vertical"
            android:src="@drawable/arrow" />
    </LinearLayout>

</LinearLayout> <!-- $Id:$ --> 
```

这是我的商品点击代码

```
 private static FileListAdapter fileListAdapter; //extends from array adapter
 private static ListView fileListView;
fileListAdapter =new FileListAdapter(EditorActivity.getActivity(), R.layout.listview_item_row, localFiles);     
        fileListView.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
            {

            }
        }); 
```

请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:48:35.173

虽然我不确定，但我认为您应该在水平视图中包含整个列表视图，而不是单个滚动视图。

对于您的问题，最好使用 edittext view 而不是 Text view 。请记住，您的编辑文本将不可聚焦且不可编辑，并且背景将是透明的

将此部分转换为

> ```
>  <TextView
>                 android:id="@+id/fileName"
>                 android:layout_width="wrap_content"
>                 android:layout_height="wrap_content"
>                 android:layout_alignParentBottom="true"
>                 android:layout_alignParentTop="true"
>                 android:layout_marginBottom="5dp"
>                 android:layout_marginTop="5dp"
>                 android:gravity="center_vertical"
>                 android:textColor="@color/white"
>                 android:textSize="15dp"
>                 android:textStyle="bold" />
>         </HorizontalScrollView> 
> ```

```
<EditText
                    android:id="@+id/fileName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentTop="true"
                    android:layout_marginBottom="5dp"
                    android:layout_marginTop="5dp"
                    android:gravity="center_vertical"
                    android:textColor="@color/white"
                    android:textSize="15dp"
                    android:textStyle="bold" 

android:background="#00000000"
 android:focusable="false"
  android:focusableInTouchMode="false"
  android:editable="false"
  android:clickable="false"
  android:scrollHorizontally="true"
  android:singleLine="true"

                    /> 
```

# c# - LINQ 表达式。从范围引用的类型的变量“p”，但未定义

> ID：15589239
> 
> 赞同：21
> 
> 时间：2013-03-23T16:37:45.437
> 
> 标签：c#, linq, expression-trees

我正在使用此代码动态构建 LINQ 查询。它似乎有效，但是当我的搜索中有多个 searchString 时，（所以当添加多个表达式时，我收到以下错误：

> 从范围引用的类型的变量“p”，但未定义**

我想我只能定义/使用 p 一次。但是，如果是这样，我需要稍微修改一下我的代码。谁能在这里指出我正确的方向？

```
 if (searchStrings != null)
    {
        foreach (string searchString in searchStrings)
        {
            Expression<Func<Product, bool>> containsExpression = p => p.Name.Contains(searchString);
            filterExpressions.Add(containsExpression);
        }
    }

    Func<Expression, Expression, BinaryExpression>[] operators = new Func<Expression, Expression, BinaryExpression>[] { Expression.AndAlso };
    Expression<Func<Product, bool>> filters = this.CombinePredicates<Product>(filterExpressions, operators);

    IQueryable<Product> query = cachedProductList.AsQueryable().Where(filters);

    query.Take(itemLimit).ToList();  << **error when the query executes**

    public Expression<Func<T, bool>> CombinePredicates<T>(IList<Expression<Func<T, bool>>> predicateExpressions, Func<Expression, Expression, BinaryExpression> logicalFunction)
    {
        Expression<Func<T, bool>> filter = null;

        if (predicateExpressions.Count > 0)
        {
            Expression<Func<T, bool>> firstPredicate = predicateExpressions[0];
            Expression body = firstPredicate.Body;
            for (int i = 1; i < predicateExpressions.Count; i++)
            {
                body = logicalFunction(body, predicateExpressions[i].Body);
            }
            filter = Expression.Lambda<Func<T, bool>>(body, firstPredicate.Parameters);
        }

        return filter;
    } 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-23T22:03:52.570

简化，这里有几行你正在尝试做（我使用字符串而不是 Product 等，但想法是一样的）：

```
 Expression<Func<string, bool>> c1 = x => x.Contains("111");
        Expression<Func<string, bool>> c2 = y => y.Contains("222");
        var sum = Expression.AndAlso(c1.Body, c2.Body);
        var sumExpr = Expression.Lambda(sum, c1.Parameters);
        sumExpr.Compile(); // exception here 
```

请注意我如何将您的 foreach 扩展为两个带有 x 和 y 的表达式 - 这正是编译器的样子，它们是*不同*的参数。

换句话说，你正试图做这样的事情：

```
x => x.Contains("...") && y.Contains("..."); 
```

和编译器想知道那个'y'变量是什么？

要修复它，我们需要对所有表达式使用完全相同的参数（不仅是名称，还包括引用）。我们可以像这样修复这个简化的代码：

```
 Expression<Func<string, bool>> c1 = x => x.Contains("111");
        Expression<Func<string, bool>> c2 = y => y.Contains("222");
        var sum = Expression.AndAlso(c1.Body, Expression.Invoke(c2, c1.Parameters[0])); // here is the magic
        var sumExpr = Expression.Lambda(sum, c1.Parameters);
        sumExpr.Compile(); //ok 
```

所以，修复你的原始代码就像：

```
internal static class Program
{
    public class Product
    {
        public string Name;
    }

    private static void Main(string[] args)
    {
        var searchStrings = new[] { "111", "222" };
        var cachedProductList = new List<Product>
        {
            new Product{Name = "111 should not match"},
            new Product{Name = "222 should not match"},
            new Product{Name = "111 222 should match"},
        };

        var filterExpressions = new List<Expression<Func<Product, bool>>>();
        foreach (string searchString in searchStrings)
        {
            Expression<Func<Product, bool>> containsExpression = x => x.Name.Contains(searchString); // NOT GOOD
            filterExpressions.Add(containsExpression);
        }

        var filters = CombinePredicates<Product>(filterExpressions, Expression.AndAlso);

        var query = cachedProductList.AsQueryable().Where(filters);

        var list = query.Take(10).ToList();
        foreach (var product in list)
        {
            Console.WriteLine(product.Name);
        }
    }

    public static Expression<Func<T, bool>> CombinePredicates<T>(IList<Expression<Func<T, bool>>> predicateExpressions, Func<Expression, Expression, BinaryExpression> logicalFunction)
    {
        Expression<Func<T, bool>> filter = null;

        if (predicateExpressions.Count > 0)
        {
            var firstPredicate = predicateExpressions[0];
            Expression body = firstPredicate.Body;
            for (int i = 1; i < predicateExpressions.Count; i++)
            {
                body = logicalFunction(body, Expression.Invoke(predicateExpressions[i], firstPredicate.Parameters));
            }
            filter = Expression.Lambda<Func<T, bool>>(body, firstPredicate.Parameters);
        }

        return filter;
    }
} 
```

但请注意输出：

```
222 should not match
111 222 should match 
```

不是你所期望的。这是在 foreach 中使用 searchString 的结果，应该用以下方式重写：

```
 ...
        foreach (string searchString in searchStrings)
        {
            var name = searchString;
            Expression<Func<Product, bool>> containsExpression = x => x.Name.Contains(name);
            filterExpressions.Add(containsExpression);
        }
        ... 
```

这是输出：

```
111 222 should match 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-05T00:47:14.593

恕我直言，无需列出清单：

```
var filterExpressions = new List<Expression<Func<Product, bool>>>() 
```

您可以轻松地在访客类中使用以下内容：

```
public class FilterConverter : IFilterConverterVisitor<Filter> {

    private LambdaExpression ConditionClausePredicate { get; set; }
    private ParameterExpression Parameter { get; set; }

    public void Visit(Filter filter) {

        if (filter == null) {
            return;
        }

        if (this.Parameter == null) {
            this.Parameter = Expression.Parameter(filter.BaseType, "x");
        }

        ConditionClausePredicate = And(filter);
    }

    public Delegate GetConditionClause() {

        if (ConditionClausePredicate != null) {

            return ConditionClausePredicate.Compile();
        }

        return null;
    }

    private LambdaExpression And(Filter filter) {

        if (filter.BaseType == null || string.IsNullOrWhiteSpace(filter.FlattenPropertyName)) {

            //Something is wrong, passing by current filter
            return ConditionClausePredicate;
        }

        var conditionType = filter.GetCondition();
        var propertyExpression = filter.BaseType.GetFlattenPropertyExpression(filter.FlattenPropertyName, this.Parameter);

        switch (conditionType) {

            case FilterCondition.Equal: {

                var matchValue = TypeDescriptor.GetConverter(propertyExpression.ReturnType).ConvertFromString(filter.Match);
                var propertyValue = Expression.Constant(matchValue, propertyExpression.ReturnType);
                var equalExpression = Expression.Equal(propertyExpression.Body, propertyValue);
                if (ConditionClausePredicate == null) {
                    ConditionClausePredicate = Expression.Lambda(equalExpression, this.Parameter);
                } else {
                    ConditionClausePredicate = Expression.Lambda(Expression.And(ConditionClausePredicate.Body, equalExpression), this.Parameter);
                }
                break;
            }
        // and so on...
    }
} 
```

代码不是最优的，我知道，我是一个初学者，还有很多要实现的东西......但是这些东西确实有效。这个想法是每个访问者类都有唯一的 ParameterExpression，然后使用这个参数构造表达式。之后，只需将每个 LambdaExpression 子句的所有表达式连接起来，并在需要时编译为委托。

# database - 何时应该运行 lobos 迁移？

> ID：15589243
> 
> 赞同：0
> 
> 时间：2013-03-23T16:38:17.250
> 
> 标签：database, clojure, database-migration

由于没有用于 lobos 的 leiningen 插件，我应该在哪里运行代码来部署 lobos 迁移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:26:40.777

我认为它必须是`lein repl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T19:48:17.353

如果您正在制作一个网络应用程序，您可能正在使用 compojure 和 ring。在这种情况下，最好的方法是使用该`:init`字段，使用 ring 插件。

否则，您当然可以设置自己的 init 方法在应用程序逻辑之前调用。

# javascript - Javascript ai 跳跃平台游戏

> ID：15589244
> 
> 赞同：0
> 
> 时间：2013-03-23T16:38:38.493
> 
> 标签：javascript, artificial-intelligence

所以我正在尝试制作一个 2d 平台游戏，但我在使用 ai 时遇到了问题。当我们从同一个平台开始时，我可以让敌人完美地跟随我，但当我们从地图的另一侧开始时就不行了。

[http://imgur.com/t1Xw9lx](http://imgur.com/t1Xw9lx)

所以我想让敌人跳，因为下面没有平台。让人工智能知道何时何地跳跃的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:44:11.473

只需将平台视为连接的节点。如果你有一个底部平台，当它到达左/右平台的边缘时，顶部和底部都是 AI 的“选择”。在那里，您的平台应该包含它连接到的平台的数据。

你可能想在你的平台上添加一些数据，比如水平/高度，这样人工智能就知道当它从一个平台转换到另一个平台时它应该做什么，是应该跳到下一个平台还是只是下降。

# javascript - 打开 窗口宽度 => 768px 时的元素

> ID：15589248
> 
> 赞同：3
> 
> 时间：2013-03-23T16:38:48.983
> 
> 标签：javascript, html, details-tag, summary-tag

我正在开发一个响应式网站，我在其中使用`<details> <summary>`元素在服务部分显示附加信息。

**当窗口宽度 > 768px 时，如何更改详细信息“打开”属性？
可以只用css吗？**

这是html代码：

```
<section id="services">
    <section>
        <details>
            <summary>info</summary>
            <p>A paragraph with especific information</p>
        </details>
   </section>
</section> 
```

我可以使用这样的javascript代码，但更喜欢css：

```
 var desplegable = $("#services section details");
if ($(window).width() > 768) {
    if (desplegable.attr("open") != "open"){ 
        desplegable.attr('open','true');

    }
} 
```

任何想法？谢谢

Spetec： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-details-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-details-element)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-14T12:02:06.593

到目前为止，还没有办法`<details>`通过 CSS 修改内容的显示（例如：`details > * { display: block; }`用于媒体查询。），因为似乎没有规范。

正如[Amelia Bellamy-Royds 所说](https://css-tricks.com/quick-reminder-that-details-summary-is-the-easiest-way-ever-to-make-an-accordion/#comment-1618353)：

> 您实际上无法用 CSS 模型描述它的基本行为。显示/隐藏的部分不在任何特定元素中。这意味着没有办法实现媒体查询覆盖，如果屏幕足够大，则一直显示。所以它不会取代你所有的显示/隐藏导航小部件。
> 因为打开/关闭是通过一个简单的属性完成的，并且没有伪类，如果你想（a）打开一些元素开始，（b）改变打开和关闭的样式，你可能需要一些脚本支持测试所以您的 details[open] 选择器在不支持的浏览器上不匹配。

我想这就是问题所在。

[您可以通过应用丑陋的复选框黑客](https://css-tricks.com/the-checkbox-hack/)来处理这种行为（仅在某些媒体查询上完全基于 CSS 的隐藏/显示切换）。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-23T16:44:05.430

您可以使用媒体查询通过纯 CSS 来实现这一点。这是一些示例的链接[http://www.techrepublic.com/blog/webmaster/how-to-create-media-queries-in-responsive-web-design/1789](http://www.techrepublic.com/blog/webmaster/how-to-create-media-queries-in-responsive-web-design/1789)

# ravendb - RavenDb：查找演员 X 未出演的电影

> ID：15589251
> 
> 赞同：3
> 
> 时间：2013-03-23T16:38:57.173
> 
> 标签：ravendb

我是 RavenDb 的新手，遇到了以下问题，这在 SQL 数据库中很容易解决，但在 RavenDb 中并不容易（似乎）。

鉴于我的课程：

```
//document collection
public class Movie
{
    public string Id { get; set; }
    public string Title { get; set; }
    public List<MovieActor> Actors { get; set; }
}

public class MovieActor
{
    public string ActorId { get; set; }
    public string CharacterName { get; set; }
    public DateTime FirstAppearance { get; set; }
}

//document collection
public class Actor
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

使用以下地图索引查找莱昂纳多·迪卡普里奥出演的每一部电影非常简单有效：

```
public class Movies_ByActor : AbstractIndexCreationTask<Movie>
{

    public Movies_ByActor()
    {
        Map = movies => from movie in movies
                        from actor in movie.Actors
                        select new
                        {
                            MovieId = movie.Id,
                            ActorId = actor.ActorId
                        };
    }
} 
```

但这不是我想要达到的，我想要相反的……找到莱昂纳多·迪卡普里奥没有演的所有电影。

我还尝试了以下查询：

```
 var leonardoActorId = "actor/1";
 var movies = from movie in RavenSession.Query<Movie>()
              where !movie.Actors.Any(a => a.ActorId.Equals(leonardoActorId))
              select movie; 
```

但这只会给我一个例外：

```
System.InvalidOperationException: Cannot process negated Any(), see RavenDB-732 http://issues.hibernatingrhinos.com/issue/RavenDB-732 
```

任何人都知道如何在 RavenDb 中以正确的方式实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:53:18.003

使用我的博客文章中描述的方法：

[http://www.philliphaydon.com/2012/01/18/ravenb-searching-across-multiple-properties/](http://www.philliphaydon.com/2012/01/18/ravendb-searching-across-multiple-properties/)

您可以使用一组 ActorIds 创建索引：

```
public class Movies_ByActor : AbstractIndexCreationTask<Movie>
{
    public Movies_ByActor()
    {
        Map = movies => from s in movies
                        select new
                        {
                            Actors = s.Actors.Select(x => x.ActorId)
                        };
    }

    public class ActorsInMovie
    {
        public object[] Actors { get; set; }
    }
} 
```

然后您可以搜索电影不包含您想要的演员的位置：

```
var result = session.Query<Movies_ByActor.ActorsInMovie, Movies_ByActor>()
                    .Where(x => x.Actors != (object)"actors/1")
                    .As<Movie>(); 
```

由于我们查询的对象与结果不同，我们需要指定`As<T>`告诉 RavenDB 实际返回的对象的类型是什么。

工作样本： http: [//pastie.org/7092908](http://pastie.org/7092908)

# visual-studio-2010 - 从 Visual Studio 连接到 SQL Server 时，为什么会出现权限错误？

> ID：15589253
> 
> 赞同：2
> 
> 时间：2013-03-23T16:38:58.743
> 
> 标签：visual-studio-2010, sql-server-2005-express

我有 SQL Server 2005 SP4 Express，当我尝试建立从 VS2010 到我的数据库的连接时，出现错误：

> 您无权打开此文件
> 
> 联系文件所有者或管理员以获得许可。

我正在使用 Windows 身份验证，我是唯一的用户。

请帮助我克服这个错误。

有时，它显示文件已经打开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T11:36:10.740

首先关闭视觉工作室。现在打开以管理员身份运行的visual studio。如果它没有解决您的问题，请打开 sql server management studio 并按照步骤操作。

1.  扩展您的数据库。
2.  右键单击您的数据库并选择属性选项。
3.  弹出窗口打开，选择选项菜单位于左侧。
4.  使自动关闭选项位于自动窗格中。

我相信你的问题现在已经解决了......

干杯.....

# ios - 从 iOS 将数据发布到 PHP 脚本

> ID：15589255
> 
> 赞同：9
> 
> 时间：2013-03-23T16:39:14.470
> 
> 标签：ios, objective-c

我正在尝试在用户在字段（标题、描述、城市）中输入数据然后单击保存后执行的以下代码。

```
- (IBAction)saveDataAction:(id)sender {
    NSString *lEventTitle = [NSString stringWithFormat:@"var=%@",eventTitle.text];
    NSString *lEventDesc = [NSString stringWithFormat:@"var=%@",eventDescription.text];
    NSString *lEventCity = [NSString stringWithFormat:@"var=%@",eventCity.text];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://mydomain.com/ios/form.php"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
    //this is hard coded based on your suggested values, obviously you'd probably need to make this more dynamic based on your application's specific data to send

    NSString *postString = [[NSString alloc] initWithFormat:@"title=%@&description=%@&city=%@", lEventTitle, lEventDesc, lEventCity];
    NSString *clearPost = [postString
                                     stringByReplacingOccurrencesOfString:@"var=" withString:@""];
    NSLog(@"%@", clearPost);
    [request setHTTPBody:[clearPost dataUsingEncoding:NSUTF8StringEncoding]];
    [request setValue:clearPost forHTTPHeaderField:@"Content-Length"];
    [NSURLConnection connectionWithRequest:request delegate:self];
    NSLog(@"%@", request);
} 
```

当我 NSLog clearPost 字符串（包含要发送到服务器的变量的字符串）时，它显示：

```
title=xmas&description=Celebration&city=NY 
```

在 PHP 端，我有简单的：

```
<?php
 $title = $_POST['title'];
 $description = $_POST['description'];
 $city = $_POST['city'];

 echo "Title: ". $title;
 echo "Description: ". $description;
 echo "City: ". $city;
?> 
```

只是想在 PHP 上获取数据，以便稍后我可以操作它。现在当我执行

domain.com/ios/form.php，它显示标题、描述和城市为空。

抱歉，我对 iOS 和 Objective-C 很陌生。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-23T17:16:51.887

**目标 C**

```
// Create your request string with parameter name as defined in PHP file
NSString *myRequestString = [NSString stringWithFormat:@"title=%@&description=%@&city=%@",eventTitle.text,eventDescription.text,eventCity.text];

// Create Data from request
NSData *myRequestData = [NSData dataWithBytes: [myRequestString UTF8String] length: [myRequestString length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: @"http://www.youardomain.com/phpfilename.php"]];
// set Request Type
[request setHTTPMethod: @"POST"];
// Set content-type
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
// Set Request Body
[request setHTTPBody: myRequestData];
// Now send a request and get Response
NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: nil];
// Log Response
NSString *response = [[NSString alloc] initWithBytes:[returnData bytes] length:[returnData length] encoding:NSUTF8StringEncoding];
NSLog(@"%@",response); 
```

**迅速**

```
// Create your request string with parameter name as defined in PHP file
var myRequestString: String = "title=\(eventTitle.text!)&description=\(eventDescription.text!)&city=\(eventCity.text!)"
// Create Data from request
var myRequestData: NSData = NSData.dataWithBytes(myRequestString.UTF8String(), length: myRequestString.characters.count)
var request: NSMutableURLRequest = NSMutableURLRequest(URL: NSURL(string: "http://www.youardomain.com/phpfilename.php")!)
// set Request Type
request.HTTPMethod = "POST"
// Set content-type
request.setValue("application/x-www-form-urlencoded", forHTTPHeaderField: "content-type")
// Set Request Body
request.HTTPBody = myRequestData
// Now send a request and get Response
var returnData: NSData = NSURLConnection.sendSynchronousRequest(request, returningResponse: nil, error: nil)
// Log Response
var response: String = String(bytes: returnData.bytes(), length: returnData.characters.count, encoding: NSUTF8StringEncoding)
NSLog("%@", response) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-16T23:24:39.170

NSURLConnection 自 IOS 9.0 起已被弃用。请使用 NSURLSesstion：

```
-(void) httpPostWithCustomDelegate
{
NSURLSessionConfiguration *defaultConfigObject = [NSURLSessionConfiguration defaultSessionConfiguration];
NSURLSession *defaultSession = [NSURLSession sessionWithConfiguration: defaultConfigObject delegate: nil delegateQueue: [NSOperationQueue mainQueue]];

NSURL * url = [NSURL URLWithString:@"http://hayageek.com/examples/jquery/ajax-post/ajax-post.php"];
NSMutableURLRequest * urlRequest = [NSMutableURLRequest requestWithURL:url];
NSString * params =@"name=Ravi&loc=India&age=31&submit=true";
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]];

NSURLSessionDataTask * dataTask =[defaultSession dataTaskWithRequest:urlRequest
                                    completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                                      NSLog(@"Response:%@ %@\n", response, error);
                                      if(error == nil)
                                      {
                                          NSString * text = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];
                                          NSLog(@"Data = %@",text);
                                      }

                                  }];
[dataTask resume];

} 
```

[参考](http://hayageek.com/ios-nsurlsession-example/#get-post)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:44:48.223

请试试这个：

```
[request setValue:[NSString stringWithFormat:@"%d",[clearPost length]]  forHTTPHeaderField:@"Content-Length"]; 
```

好的，我正在添加我的请求代码：它可能会有所帮助

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                        initWithURL:[NSURL
                                                     URLWithString:@"http://www.sth.com/action/verify.php"]];

        [request setHTTPMethod:@"POST"];
        [request setValue:[NSString stringWithFormat:@"%i",[sent length]]  forHTTPHeaderField:@"Content-length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:[sent dataUsingEncoding:NSASCIIStringEncoding]]; 
```

# php - How to render comments in Drupal 7

> ID：15589258
> 
> 赞同：1
> 
> 时间：2013-03-23T16:39:23.607
> 
> 标签：php, drupal-7, comments, drupal-theming, drupal-comments

I have a template file **node-contenttype.tpl.php**. There I´m trying to print the comments of that node via

```
print render($content['comments']); 
```

but only the comment form is rendered. So im looking into the comment-wrapper.tpl.php and the comment.tpl.php. When im writing something in the **comment-wrapper.tpl.php**, for example a little bit of dummy text, it is printed. But when im doing this in the **comment.tpl.php**, nothing happens.

Inside the **comment-wrapper.tpl.php** is the call

```
print render($content['comments']); 
```

but no comment is rendered.

So the problem seems to bee that the **comment.tpl.php** is not called. I have find out that the comment Array in **comment-wrapper.tpl.php** is empty, too.

Can anybody help please?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:30:15.510

Maybe Not the best way forward, but you can also use this in node-contenttype.tpl.php

```
<?php 
echo "<pre>";
$node_view = node_view($node);
foreach($node_view['comments']['comments'] as $key=>$value)
{
    if(is_numeric($key))
    {
        print_r($value['comment_body']['#object']->comment_body['und'][0]['safe_value']);
    }
}
echo "</pre>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:28:02.070

It was a language problem. The language was set to "english", i have set to undefined and now the comments are rendered.

But i have no idea why..

# android - webview如何使用另一个页面的javascript

> ID：15589260
> 
> 赞同：0
> 
> 时间：2013-03-23T16:39:38.567
> 
> 标签：android, webview

```
mWebView = (WebView) findViewById(R.id.htmlview);
WebSettings webSettings = mWebView.getSettings();
webSettings.setJavaScriptEnabled(true);
mWebView.addJavascriptInterface(new DemoJavaScriptInterface(),
      "demo"); mWebView.loadUrl("file:///android_asset/demo.html"); 
```

* * *

我知道如何调用页面的javascript，但是如果页面没有我需要的js。如果我可以调用我写的js？

android的webview；

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:03:32.867

在您的网络视图中调用 javascript 的方式有很多

```
myWebView.loadUrl("javascript:testEcho('Hello World!')"); 
```

或者

```
public void run(final String scriptSrc) { 
    webView.post(new Runnable() {
        @Override
        public void run() { 
            webView.loadUrl("javascript:" + scriptSrc); 
        }
    }); 
} 
```

或者

```
public void run(final String scriptSrc) { 
    webView.post(new Runnable() {
        @Override
        public void run() { 
            webView.loadUrl("javascript:" + scriptSrc); 
        }
    }); 
} 
```

[这个](https://stackoverflow.com/questions/4325639/android-calling-javascript-functions-in-webview)问题可以帮助我为我完成这项任务。

您还可以使用 [WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)来调用 java 脚本。

```
webView.setWebViewClient(new WebViewClient(){
   @Override
  public void onPageFinished (WebView webView, String url)
  {

         webView.loadUrl("javascript:document.getElementById('login_player').value='"+username+"';javascript:document.getElementById('login_passwd').value = '"+Password+"';");
      }
     }); 
```

如需更多帮助，您还可以查看[此链接](https://stackoverflow.com/questions/10472839/using-javascript-in-android-webview)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T16:50:33.433

以前没有这样做过，但这对我来说看起来不错：[How to append additional text with existing html content in android?](https://stackoverflow.com/questions/7525196/how-to-append-additional-text-with-existing-html-content-in-android)

它说，将页面加载到您的 WebView 后，您可以通过调用来执行 JavaScript `myWebView.loadUrl("javascript:alert('My JavaScript Call')");`

# java - Java Thread Affinity lib：为什么将 Affinity 设置为 1 << 3？

> ID：15589263
> 
> 赞同：0
> 
> 时间：2013-03-23T16:39:57.767
> 
> 标签：java

我正在查看 Java Thread Affinity 库（下面的链接），在一个示例中，亲和力是使用`1 << 3`. 有人知道为什么是这样吗？

```
AffinitySupport.setAffinity(1 << 3); 
```

我原以为它会设置为 1 或 2，例如在 2 核机器上说停留在核心 1 或 2 上。我显然在这里遗漏了一些东西。

链接：[https ://github.com/peter-lawrey/Java-Thread-Affinity](https://github.com/peter-lawrey/Java-Thread-Affinity)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:44:43.073

此语法使用左移运算符： http: [//processing.org/reference/leftshift.html](http://processing.org/reference/leftshift.html) 所以基本上是二进制的`1 << 3`意思`1000`，所以这是`8`十进制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:45:55.460

to 的参数`AffinitySupport.setAffinity()`是一个位掩码。

将关联设置为`1 << 3`允许线程在逻辑 CPU #3 上运行。

# c# - 我的文本框的文本没有改变（里面的信息）

> ID：15589277
> 
> 赞同：0
> 
> 时间：2013-03-23T16:40:54.113
> 
> 标签：c#

我正在构建一个语音控制的应用程序，我想在用户说出他的用户名和密码时设置文本框的文本，但是这没有发生，但是如果我显示使用消息识别的字符串

```
 public Form1()
    {
        InitializeComponent();

        GrammarBuilder g = new Choices("wissam.h44", "jordan_6");
        Grammar g1 = new Grammar(g);
        Grammar g2 = new Grammar(g);
        InitializeComponent();
        this.Shown += new System.EventHandler(this.Form1_Shown);
        Recognizer1.LoadGrammar(g1);
        Recognizer2.LoadGrammar(g2);

   }
    private void Form1_Shown(Object sender, EventArgs e)
    {
        Synthesizer1.Speak("Application is loaded.");
        Synthesizer1.Speak("Please Enter Your Email: ");
        Recognizer1.SpeechRecognized +=
        new EventHandler<SpeechRecognizedEventArgs>(recognizer1_SpeechRecognized);
        Recognizer1.SetInputToDefaultAudioDevice();
        Recognizer1.Recognize();
        Synthesizer1.Speak("Please Enter Your Password: ");
        Recognizer2.SpeechRecognized +=
        new EventHandler<SpeechRecognizedEventArgs>(recognizer2_SpeechRecognized);
        Recognizer2.SetInputToDefaultAudioDevice();
        Recognizer2.Recognize();

    }
    void recognizer1_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
    {
        string eml = e.Result.Text;
        txtemail.Text = eml;
    }
    void recognizer2_SpeechRecognized(object sender, SpeechRecognizedEventArgs r)
    {
        txtpwd.Text = r.Result.Text;
    } 
```

所以在语音识别事件中，如果我把 MessageBox.Show(eml) 电子邮件正确显示，但文本框的文本没有改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:06:12.117

最有可能识别的文本包含换行符，或类似的东西。

要隔离这一点，请尝试在 *SpeechRecognized 事件中指定具体字符串，例如

```
txtemail.Text = "recognized text"; 
```

它会起作用吗？如果是，请在调试器中检查字符串以查找特定字符。

# java - 线程 OutOfMemoryError，强制关闭

> ID：15589281
> 
> 赞同：1
> 
> 时间：2013-03-23T16:41:00.937
> 
> 标签：java, android, handler, out-of-memory

每次我运行这段代码时，我都会强制关闭，我不明白。我是Android开发新手，有人可以帮忙吗？我真的很感谢你们的任何提示。到目前为止，我只是明白，内存空间快用完了，但是我怎样才能防止内存不足呢？

**我的代码：**

```
 Boolean start = true;
    HttpPost httppost;
    StringBuffer buffer;
    HttpResponse response;
    HttpClient httpclient;
    List<NameValuePair> nameValuePair;
    TextView txtEntries;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_screen);
        txtEntries = (TextView)findViewById(R.id.txtEntries);
        SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        String User = p.getString("User", "");
        String Password = p.getString("Password", "");
        txtEntries.setText("user:" + User + "Passwort:" + Password);
        getEntries.start();
        start = true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main_screen, menu);
        return true;
    }

    Thread getEntries = new Thread() {
        public void run() {
            //while(!login_thread.isInterrupted()) {
            while (getEntries.isInterrupted() == false) {
                try {
                    sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                if (start) {
                    //Code for login+Action from saved text
                    SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
                    String User = p.getString("User", "");
                    String Password = p.getString("Password", "");
                    login("Entries", User, Password);
                }
            }
            //while (start == true){
            //login(box_User.getText().toString(), box_Password.getText().toString());
            //}
            //}
        }
    };

    //implement Handler

    Handler handler = new Handler() {
          @Override
          public void handleMessage(Message msg) {
              getEntries.interrupt();
             txtEntries = (TextView)findViewById(R.id.txtEntries);
             txtEntries.setText("Handler");
              Bundle bundle = msg.getData();
              Boolean Connection = bundle.getBoolean("Connection");
              String response = bundle.getString("Entries");
              if (Connection) {
                 // Toast.makeText(getBaseContext(), "Connection", 5000).show();
                  if (response != "") {
                      //Code which shows all entries
                      Toast.makeText(getBaseContext(), "Response", 5000).show();
                      txtEntries.setText(response);

                  } else {
                      txtEntries.setText("Empty");
                  }
              }else {
                  txtEntries.setText("No connection");
                  getEntries.interrupt();
              }
          }
    };

    // getData method
    private void login(String Action, String User, String Password) {
        // TODO Auto-generated method stub
            start = false;
            Message msg = handler.obtainMessage();
            Bundle bundle = new Bundle();
            httppost = new HttpPost("http://10.0.2.2/KHG/api/check-login.php");
            HttpParams httpParameters = new BasicHttpParams();
            // Set the timeout in milliseconds until a connection is established.
            // The default value is zero, that means the timeout is not used. 
            int timeoutConnection = 15000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            // Set the default socket timeout (SO_TIMEOUT) 
            // in milliseconds which is the timeout for waiting for data.
            int timeoutSocket = 15000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            httpclient = new DefaultHttpClient(httpParameters);
            nameValuePair = new ArrayList<NameValuePair>(1);
            nameValuePair.add(new BasicNameValuePair("User", User));
            nameValuePair.add(new BasicNameValuePair("Password", Password));
            nameValuePair.add(new BasicNameValuePair("Action", Action));
            try {
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePair));
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                e.printStackTrace();
                bundle.putBoolean("Connection", false);
                bundle.putString("Entries", "");
                msg.setData(bundle);
                handler.sendMessage(msg);
            }
            try {
                response = httpclient.execute(httppost);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                bundle.putBoolean("Connection", false);
                bundle.putString("Entries", "");
                msg.setData(bundle);
                handler.sendMessage(msg);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                bundle.putBoolean("Connection", false);
                bundle.putString("Entries", "");
                msg.setData(bundle);
                handler.sendMessage(msg);
            } 
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String response;
            try {
            //  Toast.makeText(getBaseContext(), "test", Toast.LENGTH_LONG).show();
                response = httpclient.execute(httppost, responseHandler);
                SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
                p.edit().putString("Data", response).commit();
                bundle.putBoolean("Connection", true);
                bundle.putString("Entries", "ok");
                msg.setData(bundle);
                handler.sendMessage(msg);

            }
            catch (Exception e) {
                e.printStackTrace();
                bundle.putBoolean("Connection", false);
                bundle.putString("Entries", "");
                msg.setData(bundle);
                handler.sendMessage(msg);
            //  Toast.makeText(getBaseContext(), "exception", Toast.LENGTH_LONG).show();
            }

        }
} 
```

**还有我的日志：**

```
03-23 16:32:22.683: D/dalvikvm(741): GC_FOR_ALLOC freed 135K, 4% free 8821K/9159K, paused 60ms
03-23 16:32:22.822: W/SingleClientConnManager(741): Invalid use of SingleClientConnManager: connection still allocated.
03-23 16:32:22.822: W/SingleClientConnManager(741): Make sure to release the connection before allocating another one.
03-23 16:32:23.012: W/System.err(741): java.lang.InterruptedException
03-23 16:32:23.012: W/System.err(741):  at java.lang.VMThread.sleep(Native Method)
03-23 16:32:23.012: W/System.err(741):  at java.lang.Thread.sleep(Thread.java:1214)
03-23 16:32:23.022: W/System.err(741):  at java.lang.Thread.sleep(Thread.java:1196)
03-23 16:32:23.022: W/System.err(741):  at com.shr.khg.MainActivity$2.run(MainActivity.java:109)
03-23 16:32:25.342: D/dalvikvm(741): GC_FOR_ALLOC freed 80K, 3% free 9148K/9415K, paused 60ms
03-23 16:32:25.442: W/SingleClientConnManager(741): Invalid use of SingleClientConnManager: connection still allocated.
03-23 16:32:25.442: W/SingleClientConnManager(741): Make sure to release the connection before allocating another one.
03-23 16:32:25.822: D/dalvikvm(741): GC_CONCURRENT freed 40K, 3% free 9558K/9799K, paused 21ms+9ms
03-23 16:32:25.942: D/dalvikvm(741): GC_FOR_ALLOC freed 123K, 5% free 9629K/10119K, paused 68ms
03-23 16:32:25.952: I/dalvikvm-heap(741): Grow heap (frag case) to 9.770MB for 262160-byte allocation
03-23 16:32:26.092: D/dalvikvm(741): GC_FOR_ALLOC freed 0K, 6% free 9885K/10439K, paused 69ms
03-23 16:32:26.262: D/dalvikvm(741): GC_FOR_ALLOC freed 132K, 7% free 9757K/10439K, paused 55ms
03-23 16:32:26.262: I/dalvikvm-heap(741): Grow heap (frag case) to 10.145MB for 524304-byte allocation
03-23 16:32:26.412: D/dalvikvm(741): GC_FOR_ALLOC freed 0K, 7% free 10269K/11015K, paused 57ms
03-23 16:32:26.682: D/dalvikvm(741): GC_CONCURRENT freed 262K, 10% free 10014K/11015K, paused 13ms+3ms
03-23 16:32:26.852: D/dalvikvm(741): GC_FOR_ALLOC freed 1K, 10% free 10013K/11015K, paused 71ms
03-23 16:32:26.872: I/dalvikvm-heap(741): Grow heap (frag case) to 10.895MB for 1048592-byte allocation
03-23 16:32:27.042: D/dalvikvm(741): GC_FOR_ALLOC freed 0K, 9% free 11037K/12103K, paused 63ms
03-23 16:32:27.302: D/dalvikvm(741): GC_CONCURRENT freed 518K, 14% free 10526K/12103K, paused 26ms+5ms
03-23 16:32:28.212: D/dalvikvm(741): GC_FOR_ALLOC freed 9K, 14% free 10525K/12103K, paused 102ms
03-23 16:32:28.242: I/dalvikvm-heap(741): Grow heap (frag case) to 12.395MB for 2097168-byte allocation
03-23 16:32:28.562: D/dalvikvm(741): GC_FOR_ALLOC freed 0K, 12% free 12573K/14215K, paused 89ms
03-23 16:32:28.912: D/dalvikvm(741): GC_CONCURRENT freed 1030K, 19% free 11550K/14215K, paused 18ms+23ms
03-23 16:32:31.352: D/dalvikvm(741): GC_FOR_ALLOC freed 26K, 19% free 11549K/14215K, paused 79ms
03-23 16:32:31.412: I/dalvikvm-heap(741): Grow heap (frag case) to 15.395MB for 4194320-byte allocation
03-23 16:32:31.723: D/dalvikvm(741): GC_FOR_ALLOC freed 0K, 15% free 15645K/18375K, paused 87ms
03-23 16:32:31.932: D/dalvikvm(741): GC_CONCURRENT freed 2054K, 27% free 13598K/18375K, paused 19ms+4ms
03-23 16:32:38.491: D/dalvikvm(741): GC_FOR_ALLOC freed 59K, 27% free 13597K/18375K, paused 67ms
03-23 16:32:38.621: I/dalvikvm-heap(741): Grow heap (frag case) to 21.395MB for 8388624-byte allocation
03-23 16:32:39.031: D/dalvikvm(741): GC_FOR_ALLOC freed 0K, 19% free 21789K/26631K, paused 98ms
03-23 16:32:39.341: D/dalvikvm(741): GC_CONCURRENT freed 4101K, 34% free 17694K/26631K, paused 17ms+11ms
03-23 16:32:52.093: D/dalvikvm(741): GC_FOR_ALLOC freed 124K, 34% free 17693K/26631K, paused 79ms
03-23 16:32:52.093: I/dalvikvm-heap(741): Forcing collection of SoftReferences for 16777232-byte allocation
03-23 16:32:52.242: D/dalvikvm(741): GC_BEFORE_OOM freed 8K, 34% free 17685K/26631K, paused 142ms
03-23 16:32:52.242: E/dalvikvm-heap(741): Out of memory on a 16777232-byte allocation.
03-23 16:32:52.242: I/dalvikvm(741): "Thread-12" prio=5 tid=10 RUNNABLE
03-23 16:32:52.251: I/dalvikvm(741):   | group="main" sCount=0 dsCount=0 obj=0x408b9158 self=0x16f860
03-23 16:32:52.251: I/dalvikvm(741):   | sysTid=752 nice=0 sched=0/0 cgrp=default handle=1669016
03-23 16:32:52.251: I/dalvikvm(741):   | schedstat=( 5912317448 1115812658 845 ) utm=511 stm=80 core=0
03-23 16:32:52.251: I/dalvikvm(741):   at org.apache.http.util.CharArrayBuffer.expand(CharArrayBuffer.java:~59)
03-23 16:32:52.251: I/dalvikvm(741):   at org.apache.http.util.CharArrayBuffer.append(CharArrayBuffer.java:77)
03-23 16:32:52.251: I/dalvikvm(741):   at org.apache.http.util.EntityUtils.toString(EntityUtils.java:136)
03-23 16:32:52.251: I/dalvikvm(741):   at org.apache.http.util.EntityUtils.toString(EntityUtils.java:146)
03-23 16:32:52.251: I/dalvikvm(741):   at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:76)
03-23 16:32:52.251: I/dalvikvm(741):   at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:59)
03-23 16:32:52.251: I/dalvikvm(741):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
03-23 16:32:52.262: I/dalvikvm(741):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
03-23 16:32:52.262: I/dalvikvm(741):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
03-23 16:32:52.262: I/dalvikvm(741):   at com.shr.khg.MainScreen.login(MainScreen.java:170)
03-23 16:32:52.262: I/dalvikvm(741):   at com.shr.khg.MainScreen.access$0(MainScreen.java:118)
03-23 16:32:52.262: I/dalvikvm(741):   at com.shr.khg.MainScreen$1.run(MainScreen.java:79)
03-23 16:32:55.752: W/dalvikvm(741): threadid=10: thread exiting with uncaught exception (group=0x40014760)
03-23 16:32:55.772: E/AndroidRuntime(741): FATAL EXCEPTION: Thread-12
03-23 16:32:55.772: E/AndroidRuntime(741): java.lang.OutOfMemoryError
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.util.CharArrayBuffer.expand(CharArrayBuffer.java:59)
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.util.CharArrayBuffer.append(CharArrayBuffer.java:77)
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.util.EntityUtils.toString(EntityUtils.java:136)
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.util.EntityUtils.toString(EntityUtils.java:146)
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:76)
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:59)
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
03-23 16:32:55.772: E/AndroidRuntime(741):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
03-23 16:32:55.772: E/AndroidRuntime(741):  at com.shr.khg.MainScreen.login(MainScreen.java:170)
03-23 16:32:55.772: E/AndroidRuntime(741):  at com.shr.khg.MainScreen.access$0(MainScreen.java:118)
03-23 16:32:55.772: E/AndroidRuntime(741):  at com.shr.khg.MainScreen$1.run(MainScreen.java:79)
03-23 16:32:59.012: I/Process(741): Sending signal. PID: 741 SIG: 9 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:47:17.297

这是一个众所周知的问题....首先您应该在 AsyncTask 中实现您的 http 请求....然后您就不会再看到这个错误了！！！！！！！！！！！！！！！

# javascript - D3.js 键盘控件（选项卡）

> ID：15589282
> 
> 赞同：0
> 
> 时间：2013-03-23T16:41:01.557
> 
> 标签：javascript, d3.js

是否可以使用 TAB 导航 D3 可折叠树？因此，对每个节点进行制表符并按 Enter 以展开。只是考虑可访问性。

目前 TAB 只是突出显示画布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:11:44.373

您需要手动添加此功能。也就是说，为 TAB 创建一个事件侦听器，并在其中将特定节点标记为“活动”。类似于 Enter 展开。因此，您的问题的答案是“是”，但这并不完全简单。

# iphone - 点击状态栏时滚动到顶部

> ID：15589292
> 
> 赞同：5
> 
> 时间：2013-03-23T16:41:53.140
> 
> 标签：iphone, ios, objective-c, uitableview, uiviewcontroller

我有一个视图控制器（让我们称之为`MainViewContoller`），它存在 3 个不同的表（一次一个），用户可以点击一个段控件在这些表之间切换。

为了呈现这 3 个表，`MainViewContoller`有 3 个其他视图控制器（A、B 和 C），每个都有一个`UITableView`作为子视图并处理它自己的数据。
当 a`MainViewContoller`被加载时，它会启动控制器 A、B 和 C，并将它们的 tableViews 添加到它的视图中：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    ViewControllerA *vcA = [ViewControllerA alloc] init];
    [self.view addSubview:vcA.view];

    ViewControllerB *vcB = [ViewControllerB alloc] init];
    [self.view addSubview:vcB.view];

    ViewControllerC *vcC = [ViewControllerC alloc] init];
    [self.view addSubview:vcC.view];
} 
```

因此，例如，当用户点击段控件并选择 A 时，`MainViewContoller`隐藏表 B 和 C，并取消隐藏表 A。像这样：

```
if (userTapOnA) {
    self.viewControllerA.tableView.hidden = NO;
    self.viewControllerB.tableView.hidden = YES;
    self.viewControllerC.tableView.hidden = YES;
} 
```

**问题：**

当用户点击状态栏时，我希望当前可见表格滚动到顶部。
这种行为是非常基本的，使用常规视图控制器时可以免费获得它，但正如您所见，我的视图控制器不是常规的。
我想通过使用其他控制器视图作为`MainViewContoller`视图我打破了默认行为，所以我`MainViewContoller`不处理状态栏点击。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-23T16:51:12.517

这直接来自 UIScrollView 头文件：

> /* 当用户点击状态栏时，最靠近状态栏的触摸下方的滚动视图将滚动到顶部，但只有当它的`scrollsToTop`属性为YES时，它的delegate才不会从返回NO `shouldScrollViewScrollToTop`，并且它还没有在顶部。在 iPhone 上，只有当屏幕上有一个带有`scrollsToTop`== YES 的滚动视图时，我们才会执行此手势。如果找到多个，则不会滚动任何一个。*/
> 
> @property(nonatomic) BOOL scrollsToTop; //默认是YES。

因此，在您的情况下，将所有 scrollsToTop 设置为 NO，除了您要在该特定时刻启用的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T16:45:55.923

您应该将嵌套控制器注册为子控制器。

```
[self addChildViewController:vcA];
[self addChildViewController:vcB];
[self addChildViewController:vcC]; 
```

我不确定这是否有助于解决您的问题，但这是正确的方法。

# jquery - Jquery隐藏大型下拉菜单

> ID：15589295
> 
> 赞同：1
> 
> 时间：2013-03-23T16:42:00.433
> 
> 标签：jquery, drop-down-menu, slidetoggle, slideup, navbar

我正在尝试构建一个大型下拉导航栏。Jquery 不是我的强项，但我需要使用它来实现我正在寻找的东西。我知道关于类似问题的各种主题，但没有一个完全符合我的要求（请记住，我不是 JQuery 的专家，我只会将它用于我网站的这个小部分）。

到目前为止，我有这个 HTML 布局：

```
<div class = "header-wrapper">
            <div class = "header">
                <ul id = "navbar">
                    <li class = "toggle">Navbar Option 1
                        <ul class = "dropdown">
                            <li class = "dropdown-inner">
                                Dropdown 1
                            </li>
                        </ul>
                    </li>
                    <li class = "toggle">Navbar Option 2
                        <ul class = "dropdown">
                            <li class = "dropdown-inner test">
                                Dropdown 2
                            </li>
                        </ul>
                    </li>

                </ul>
            </div>
        </div> 
```

这是我的jQuery：

```
<script type="text/javascript">
            window.onload = function(){
                var $dd = $(".dropdown");

                $('.toggle').click(function() {
                    $('.toggle').not(this).children('ul').slideUp("slow");
                    $(this).children('ul').slideToggle("slow");

                });

                /* Don't hide the dropdown when clicking inside */
                $dd.on("click", function(evt) {
                    evt.stopPropagation();
                });

            } 
            </script> 
```

我的 .dropdown div 确实按预期显示和隐藏。但是我需要添加一个功能，如果在下拉菜单之外单击它会隐藏它。现在我可以收听文档上的单击事件，但是单击我的 .toggle 导航栏选项也不起作用。

因此，我想保持 .toggle 链接的功能并拥有它，以便您可以在 .dropdown ul 内部单击而不会关闭它，但是如果您单击页面上的其他任何位置，.dropdown 应该是 .slideUp("slow")。

有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:58:17.470

您可以使用 jquery event.target 检查启动该事件的原因并可以相应地工作。像下面的东西

```
 $(document).ready(function () {
    $("#navbar").click(function (event) {
        var check = $(event.target).attr('class');
        alert(check);
        if (check == 'toggle') {
            //do something
        }

        if (check == 'dropdown') {
            //do something
        }
    });
}); 
```

在这里查看工作[jsfiddle](http://jsfiddle.net/3WEwn/)

# c# - 如何将 WPF 页面添加到 tabcontrol？

> ID：15589298
> 
> 赞同：8
> 
> 时间：2013-03-23T16:42:18.157
> 
> 标签：c#, wpf, xaml

我有这个主 wpf 窗口 ![WPF 主窗口](../Images/73283e70f4524a0e9c30fdd07994364e.png)

和这个 WPF 页面

![WPF 页面](../Images/4e66820536d3e3ba14a92a1e05711aac.png)

我需要将此页面添加到主窗口中的 tabcontrol

这是我的 OnRender 方法

```
 protected override void OnRender(DrawingContext drawingContext)
    {
        if (ISFirstRender)
        {
            TabItem tabitem = new TabItem();
            tabitem.Header = "Tab 3";
            pan1.Items.Add(tabitem);
            Page1 page1 = new Page1();
            tabitem.Content = new Page1();

            ISFirstRender = false;
        }

        base.OnRender(drawingContext);
    } 
```

在应用程序运行后，我在选择新选项卡时遇到了这个异常 ![添加 tab3 后的主 WPf 窗口](../Images/c4783f553da6d731294b21d0b6655cf8.png)

![选择选项卡 3 后出错](../Images/e199eebc131b82d02cffc8e671429be3.png)

我需要知道如何将 wpf 页面添加到现有的 tabcontroll

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T16:51:24.113

如果你想添加一个新的`Page`，而不是一个`UserControl`，你可以创建一个新的`Frame`对象并将页面放在那里。

```
 if (ISFirstRender)
    {
        TabItem tabitem = new TabItem();
        tabitem.Header = "Tab 3";
        Frame tabFrame = new Frame();
        Page1 page1 = new Page1();
        tabFrame.Content = page1;
        tabitem.Content = tabFrame;
        pan1.Items.Add(tabitem);

        ISFirstRender = false;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T16:43:16.200

您可以将用户控件添加到`TabControl`. 因此，转到添加新项目并选择用户控件并制作您想要的（就像您在页面中拥有的一样）。然后将该用户控件的实例添加到`TabControl`.

```
protected override void OnRender(DrawingContext drawingContext)
{
    if (ISFirstRender)
    {
        TabItem tabitem = new TabItem();
        tabitem.Header = "Tab 3";
        pan1.Items.Add(tabitem);

        MyUserControl userControl = new MyUserControl();
        tabitem.Content = userControl;

        ISFirstRender = false;
    }

    base.OnRender(drawingContext);
} 
```

# java - 相机没有返回我捕获的图像

> ID：15589299
> 
> 赞同：1
> 
> 时间：2013-03-23T16:42:25.823
> 
> 标签：java, android, image-processing

我正在开发一个在图像中产生效果的 android 应用程序。我希望我的应用程序的用户有两个选择。

1）他们可以从图库中选择图片

2）他们可以从相机拍摄新照片

以下是我完成上述两项任务的方式：

```
Button takePhotoFromCameraButton;
Button chooseFromGalleryButton;

String imagePath = Environment.getExternalStorageDirectory().getAbsolutePath() + System.currentTimeMillis() + "_image.jpg";
File imageFile = new File(imagePath);
imageUri = Uri.fromFile(imageFile); 
```

在这两个按钮中，我传递了相同的 onClickListner。

```
 @Override
public void onClick(View clickedView) {

    int clickedViewId = clickedView.getId();

    switch(clickedViewId) {
        case R.id.takeFromCamera:
            Intent imageCaptureIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            imageCaptureIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, imageUri);
            startActivityForResult(imageCaptureIntent,0);
            break;
        case R.id.chooseFromGallery:
            Intent choosePictureIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(choosePictureIntent, 1);
            break;
        default:
            // As we have only two buttons, and nothing else can be clicked except the buttons. So no need to put
            // code in the "DEFAULT CASE"
    }
} 
```

我正在通过以下方式捕获两者的结果：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    switch(requestCode) {
        case 0:
            Intent cameraIntent = new Intent(MainOptionsActivity.this,ApplyEffectsActivity.class);
            cameraIntent.putExtra("imageFileUri", imageUri);
            startActivity(cameraIntent);
            break;
        case 1:
            Uri imageUriForGallery = intent.getData();
            Intent galleryIntent = new Intent(MainOptionsActivity.this,ApplyEffectsActivity.class);
            galleryIntent.putExtra("imageFileUri", imageUriForGallery);
            startActivity(galleryIntent);
            break;
    }

} 
```

}

图库图像的按钮工作正常。但是当我通过按下第二个按钮调用相机并捕捉图像时，什么也没有发生。它一直在那里，直到我取消相机并回到我的应用程序。我没有收到任何图像返回！我哪里错了？不要介意这个愚蠢的问题，我只是android的初学者！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T07:20:12.810

当我实现我的时，我通过一个片段使它以这种方式工作：

```
public class ConcertFragment extends Fragment implements SurfaceHolder.Callback {

ImageView toto;
ToggleButton btnFlashlight;
RayMenu menu;
View rootView;

private Camera cam;
boolean hasCamera;
Parameters params;
private int REQUEST_IMAGE_CAPTURE;
Bitmap photo;
Uri imageUri;

public ConcertFragment() {
}

public void startCameraIntent() {
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
    startActivityForResult(cameraIntent, REQUEST_IMAGE_CAPTURE); 
}

@Override
public void onStart() {
    super.onStart();
    SurfaceView preview = (SurfaceView)getView().findViewById(R.id.background);
    SurfaceHolder mHolder = preview.getHolder();
    mHolder.addCallback(this);
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.concert, menu);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getCamera();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    rootView = inflater.inflate(R.layout.fragment_concert, container, false); 
    toto = (ImageView) rootView.findViewById(R.id.toto);
    return rootView;
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode != 0)
    {
        if (requestCode == REQUEST_IMAGE_CAPTURE) {
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            toto.setImageBitmap(photo);

            View content = rootView.findViewById(R.id.toto);
            content.setDrawingCacheEnabled(true);

                Bitmap bitmap = content.getDrawingCache();
                File root = Environment.getExternalStorageDirectory();
                File cachePath = new File(root.getAbsolutePath() + "/DCIM/Camera/image.jpg");
                try {
                    cachePath.createNewFile();
                    FileOutputStream ostream = new FileOutputStream(cachePath);
                    bitmap.compress(CompressFormat.JPEG, 100, ostream);
                    ostream.close();
                } catch (Exception e) {
                    e.printStackTrace();
                }

                Intent share = new Intent(Intent.ACTION_SEND);
                share.setType("image/*");
                share.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(cachePath));
                startActivity(Intent.createChooser(share,"Share via"));
        }
        else {
            cam.release();
        }
    }
}    

// Get the camera
   private void getCamera() {
        if (cam != null) {
            try {
                cam = Camera.open();
                params = cam.getParameters();
                cam.startPreview();
                hasCamera = true;

            } catch (RuntimeException e) {
                Log.e("Camera Error. Failed to Open. Error: ", e.getMessage());
                cam.release();
            }
        }
   } 
```

希望这会有所帮助:) 只需询问您是否需要更多信息。

**如何使用活动而不是片段来做到这一点**

```
public class MyCameraActivity extends Activity {
    private static final int CAMERA_REQUEST = 1888; 
    private ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.imageView = (ImageView)this.findViewById(R.id.imageView1);
        Button photoButton = (Button) this.findViewById(R.id.button1);
        photoButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                startActivityForResult(cameraIntent, CAMERA_REQUEST); 
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            imageView.setImageBitmap(photo);
        }  
    } 
} 
```

# php - 下载带有大小和访问令牌的用户个人资料照片

> ID：15589300
> 
> 赞同：0
> 
> 时间：2013-03-23T16:42:28.567
> 
> 标签：php, facebook-graph-api

我正在使用以下脚本下载照片。

```
$data = file_get_contents($photos->pic_big);
$file = fopen($image_save, 'w+');
fputs($file, $data);
fclose($file); 
```

但我现在想下载根据我的使用调整大小的图像。Facebook为此提供了一个选项。

```
https://graph.facebook.com/shaverm/picture?width=200&height=200 
```

我可以用用户 ID 替换用户名以获取重新调整大小的图片吗？如何在 PHP 中编写脚本，将照片下载到我的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:48:02.197

是的，您可以将用户名替换为用户 ID。

用户名实际上是 Facebook Graph 中对象 ID 的别名。试试这个：[https ://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

您可以使用 curl 下载前任照片：[https](https://stackoverflow.com/a/6476232/1815881) ://stackoverflow.com/a/6476232/1815881 。

# java - Primefaces selectOneMenu 不会在更改时执行

> ID：15589305
> 
> 赞同：4
> 
> 时间：2013-03-23T16:42:58.677
> 
> 标签：java, jsf-2, primefaces

我正在编写一个 PrimeFaces 应用程序。我的 XHTML 中有以下代码：

```
<p:selectOneMenu value="#{lottoCheckerBean.selectedPowerBallDrawingDate}">
    <f:selectItems value="#{lottoCheckerBean.powerBallDrawingDates}" />
</p:selectOneMenu> 
```

我期待在`LottoCheckerBean`选择一个值时在我的值中执行以下代码：

```
public void setSelectedPowerBallDrawingDate(String selectedPowerBallDrawingDate) {
    //get drawing
    PowerBallDrawing currentDrawing = null;
    for (int d = 0; d < powerBallDrawings.size(); d++) {
        if (powerBallDrawings.get(d).getDrawingDate().equals(selectedPowerBallDrawingDate)) {
            currentDrawing = powerBallDrawings.get(d);
            break;
        }
    }
    if (currentDrawing == null) {
        try {
            //create new drawing;
            currentDrawing = new PowerBallDrawing(selectedPowerBallDrawingDate);
            powerBallDrawings.add(currentDrawing);
            Arrays.sort(powerBallDrawings.toArray());
        } catch (Exception ex) {
            //will not happen so ignore
        }
    }
    this.selectedPowerBallDrawingDate = selectedPowerBallDrawingDate;
} 
```

但是，如果我在上述方法的开头设置了断点，则没有到达断点。

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T17:39:29.893

*当您提交*放置您的表单时，将调用您希望在*更改*时执行的代码。那是来自 的值将传递给您的 bean 的时间。*`selectOneMenu``selectOneMenu`*

 *如果您想对任何其他事件执行某些操作，例如*change*，您需要启用**ajax**：

```
<p:selectOneMenu value="#{lottoCheckerBean.selectedPowerBallDrawingDate}"  >
    <f:selectItems value="#{lottoCheckerBean.powerBallDrawingDates}" />
    <p:ajax event="change" listener="#{lottoCheckerBean.someMethod}" />
</p:selectOneMenu> 
```

当后台 bean 中的值发生变化时，`someMethod()`将被调用。

我建议您`setSelectedPowerBallDrawingDate(String selectedPowerBallDrawingDate)`仅将其用作设置值的设置器，而不是包含任何业务逻辑。然后让您调用的方法`<p:ajax/>`执行业务逻辑。*

# java - java - 垃圾回收

> ID：15589307
> 
> 赞同：-2
> 
> 时间：2013-03-23T16:43:04.300
> 
> 标签：java, garbage-collection

为什么方法调用`System.gc()`不能保证垃圾收集器算法在那一刻运行？为什么在调用它时它肯定不能回收所有未使用的对象的内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T16:46:24.057

1.  强制对象销毁是错误编码的标志，因此 Java 可能希望避免开发人员沉迷于它。
2.  如果 Java 为您提供强制对象销毁的自由，那么不当使用它可能会对应用程序性能产生不利影响。
3.  这个限制允许你（强迫你）把更多的注意力放在业务逻辑上而不是内存管理上
4.  JVM 是决定何时需要内存管理以及如何进行管理的最佳人选。
5.  您可以（应该）信任 JVM 并让它以比我们更好的方式处理事情。
6.  还是真的要强制对象销毁？如果是，为什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:00:26.950

为了保证程序在 JVM 内顺利运行，JVM 自己管理垃圾回收。垃圾收集已经变得相当复杂。当您要求系统运行 GC 时，您期望使用哪种算法？一个“完整的GC”？还有多个堆；你关心的垃圾是哪一个？你不知道，这个方法没有说明。

假设调用`System.gc()`总是触发完整的 GC。错误的程序很容易使 JVM 性能陷入停顿。出于防御目的，JVM 希望限制它响应此类调用的频率。

如果您在非嵌入式系统（例如服务器或台式计算机）上的 JVM 中运行，则除了监控它和有效地编码之外，您没有理由关心内存管理的任何方面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:15:02.733

有几个指标可用于评估垃圾收集器的性能，其中一些是：

*   **吞吐量**——在很长一段时间内没有花在垃圾收集上的总时间的百分比。
*   **垃圾收集开销**——吞吐量的倒数，即垃圾收集所花费的总时间的百分比。
*   **暂停时间**——垃圾收集发生时应用程序执行停止的时间长度。
*   **收集频率——**收集发生的频率，相对于应用程序执行。
*   **占用**空间——大小的度量，例如堆大小。
*   **即时**性——从对象变成垃圾到内存可用之间的时间。

现在如果 JVM 监听`System.gc()`like good pet 并保证每次`System.gc()`调用都执行操作，想象一下如果在程序中多次调用应用程序的性能会是什么。！！？？

1.  吞吐量将下降
2.  垃圾收集开销会增加。
3.  应用程序将暂停很多次，因为它正忙于回忆内存。
4.  如果 Footprint 很大，垃圾收集器必须扫描所有内存区域以恢复内存，无论是否有适合垃圾收集的对象。

因此，在查看了这些要点之后，我想它为 JVM 提供了足够的理由不响应`System.gc`应用程序的选择，而是响应它自己的算法。Garbage Collection 肯定会回收所有未使用对象的内存，但它的调用完全取决于 JVM 自己的算法，而不是用户的选择。

资料来源：*Java HotSpot™ 虚拟机中的内存管理 - Sun Microsystems*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T17:01:40.510

> 每当调用它时，它肯定不能回收所有未使用的对象的内存

你的这个假设是错误的。在大多数情况下，垃圾收集器*可以*在任何时间点回收所有未使用的对象。但是，如果标准 Java 库提供了一种方法来*保证*这一点，它将给 GC 子系统带来完全不合理的负担，以提供大部分时间无用甚至可能具有破坏性的服务。

# c# - 由于保护级别而无法访问的财产？

> ID：15589312
> 
> 赞同：0
> 
> 时间：2013-03-23T16:43:19.857
> 
> 标签：c#

这是显示错误的行：

```
public IOAuth2ServiceProvider<IElance> ElanceServiceProvider { get; set; } 
```

它在该行的 Type 上显示错误`IElance`，但这是界面：

```
public interface IElance : IApiBinding
    {
        /// <summary>
        /// Search all jobs, list jobs associated with an employee or a freelancer, and retrieve information for a specific job.
        /// </summary>
        IJobOperations JobOperations { get; }

        /// <summary>
        /// Access all messages, users, messages, and Work View™ data associated with an Elance Workroom.
        /// </summary>
        IWorkRoomOperations WorkroomOperations { get; }

        /// <summary>
        /// View all of the information associated with an employee or a freelancer.
        /// </summary>
        IProfileOperations ProfileOperations { get; }

        /// <summary>
        /// View detailed information on freelancers, and retrieve a list of all freelancers employed by an employer.
        /// </summary>
        IFreelancerOperations FreelancerOperations { get; }

        /// <summary>
        /// List Elance groups, and retrieve lists of members and jobs belonging to a group.
        /// </summary>
        IGroupOperations GroupOperations { get; }

        /// <summary>
        /// Obtain ancillary Elance information, such as the current list of all job categories.
        /// </summary>
        IUtilityOperations UtilityOperations { get; }
    } 
```

我一辈子都想不通它为什么要告诉我这个。我错过了一些明显的东西吗？我将不胜感激有关此错误的任何方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:46:10.493

这可能是由于`IApiBinding`其基本接口之一不是`public`. 另一种可能性是接口成员使用的类型之一不是公共的。

# c# - 关于我们在具有多个客户端的分布式应用程序中的验证方法的思考

> ID：15589316
> 
> 赞同：4
> 
> 时间：2013-03-23T16:43:59.453
> 
> 标签：c#, wcf, validation, domain-driven-design

我来这里是想听听您对我们迄今为止所采取的验证方法的看法。我们仍处于开发过程的早期，所以我们仍然可以改变它。验证对于这个应用程序和我们的客户来说非常重要，所以我们需要找到最优化的方法。让我描述一下我们到目前为止所做的事情......

我们正在构建这个应用程序，它将被不同的客户使用。我们不控制所有客户端，因此对所有层的验证都有严格的要求。我们确实控制了一些客户端应用程序，其中一个是大约 100 个用户使用的 WPF 应用程序。在此应用程序中，工作流程如下：

```
|                     Client                   |                                 Backend Service                             |
ViewModel -> ClientRepository -> ServiceClient -> Service (WCF) -> ApplicationService -> DomainModel -> Repository -> Database 
```

我们将以下内容视为执行验证的候选者。

*   客户端：ViewModel 验证，用于支持带有必填字段、长度等的 UI。
*   后端：服务请求 DTO 验证，因为我们不能依赖客户端始终提供 100% 有效值。
*   后端：域模型实体验证。我们不希望我们的实体最终处于无效状态，因此每个实体在执行操作时都会包含不同的检查。
*   后端：数据库验证，例如失败的约束（FK、唯一性、长度等）

客户端 ViewModel 验证非常明显，对于我们自己的客户端，应在到达服务之前纠正尽可能多的错误。但不能代表其他使用我们服务的应用程序，应该假设最坏的情况。

服务请求 DTO 应主要针对第三方应用程序和我们自己客户端中的错误进行验证。确保请求正确，可以防止稍后在处理请求时弹出错误，从而保证更有效的服务。与 ViewModel 验证一样，这归结为不同属性的必填字段、长度和格式（例如电子邮件）。

领域模型中的实体本身应该确保它们始终具有完全有效的属性/属性，我们就是这样实现的，以`Customer`实体为例。

```
public class Customer : Entity
{
    private Customer() : base() { }

    public Customer(Guid id, string givenName, string surname)
        : this(id, givenName, null, surname) { }

    public Customer(Guid id, string givenName, string middleName, string surname)
        : base(id)
    {
        if (string.IsNullOrWhiteSpace(givenName))
            throw new ArgumentException(GenericErrors.StringNullOrEmpty, "givenName");
        if (string.IsNullOrWhiteSpace(surname))
            throw new ArgumentException(GenericErrors.StringNullOrEmpty, "surname");

        GivenName = givenName.Trim();
        Surname = surname.Trim();

        if (!string.IsNullOrWhiteSpace(middleName))
            MiddleName = middleName.Trim();
    }
} 
```

现在，虽然这确保了属性是有效的，但一个`CustomerValidator`类作为一个整体验证了 Customer 类，确保它处于有效状态并且不仅具有有效的属性。这`CustomerValidator`是使用 FluentValidation 框架实现的。它在将客户对象提交到数据库之前在应用程序服务中调用。

到目前为止，您如何看待我们的方法？

我有点担心的是，到处都在使用异常。例如`ArgumentException`上面的示例，但`InvalidOperationException`在调用对象当前状态中不允许的某些方法的情况下也是如此。

希望这些异常很少被抛出，因为服务请求 DTO 已经过验证，因此我认为它可能没问题？例如，当验证服务请求 DTO 时，绝不应引发参数异常，除非验证中的某处出现错误。因此，您可以说域模型中的这些参数检查充当了额外的安全层。`InvalidOperationException`另一方面，如果客户端调用了一个服务方法，该服务方法调用了在其当前状态下不可用的 Customer 对象上的方法（因此它应该失败），则可以引发。

你怎么看？如果听起来一切正常，当出现故障时，如何通过 WCF 适当地通知用户？无论是`ArgumentException`,`InvalidOperationException`还是包含错误列表的异常（由 ApplicationService 在使用 CustomerValidator 类验证客户对象后抛出）。我是否应该以某种方式捕获所有这些异常并将它们转换为 WCF 抛出的一些一般错误异常，从而客户端可以对其做出反应并通知用户发生了什么？

我很想听听您对我们方法的看法。我们正在开始构建这个相当大的应用程序，我们真的想找到一种执行验证的好方法。在我们的应用程序中有一些非常关键的部分，其中数据的正确性非常重要，因此验证很重要！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:56:17.890

我自己的观点是域的一致性应该由域来处理。所以不需要`CustomerValidator`各种。

至于例外，您应该考虑到，`ArgumentNullException`它们应该是普遍存在的语言的术语（有关更深入的解释，请参见[http://epic.tesio.it/2013/03/04/exceptions-are-terms-ot-the -ubiquitous-language.html](http://epic.tesio.it/2013/03/04/exceptions-are-terms-ot-the-ubiquitous-language.html)）。

顺便说一句，即使您的所有 DTO 之前都已经过验证，您也不应该从域中删除正确的验证。业务不变量是它自己的责任。

至于性能：异常是有计算成本的，但在我目前看到的大多数 DDD 场景中，它们都不是问题。特别是当命令来自人类时，它们不是问题。

**编辑**
验证始终是域的责任。取一个`ISIN`值对象：由它的构造函数通过抛出适当的异常来确保[它自己的不变量。](http://en.wikipedia.org/wiki/International_Securities_Identification_Number)在编码良好的域中，您不能保存无效对象的实例。因此，您不需要任何验证器来累积错误。

同样，工厂可以确保业务不变量当且仅当它们是获取实例的唯一方式。技术不变量，例如 db column lenght，应该不在这个领域，因此工厂可能是他们的好位置。这也将具有启用异常链接的优势：SqlExceptions 对客户来说没有太多的表现力。

对于表达性异常，客户端只需尝试/捕获他们可以处理的异常（并记住向用户呈现异常是一种处理方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:53:48.193

数据进入您的系统的某个时刻。这可能是动作参数（视图模型）或服务层中的参数的形式。此时您必须始终进行超验证（使所有内容都可以为空，然后禁止为空，检查整数上的负数等）并保证在这些入口点一切都是 100% 正确的。然后系统的其余部分不必担心它，除非验证是针对特定的边缘情况。客户端验证很好，但你绝不能完全依赖它。验证有时可能会断开连接。此外，没有保证调用您的操作的客户就是您认为的客户（例如，我们都更改了 url 中的查询参数以查看会发生什么）。

我对您发布的代码的问题是，在这一点上，您的域中的数据可能有效也可能无效。如果您总是在流程的外部边界执行验证，您永远不必担心。此外，您永远不会想知道“我将验证放在哪里？”

# iphone - 为什么我的 tableView 是空白的？我没有正确重新加载我的数据源吗？

> ID：15589319
> 
> 赞同：0
> 
> 时间：2013-03-23T16:44:05.450
> 
> 标签：iphone, ios, objective-c

两个 NSLog 都在`viewWillAppear`显示`numberOfRowsInSection`我想在 tableView 中填充的数据。

我认为这个问题与返回正确的计数有关，但是由于 NSLogs 匹配，我不确定这是问题所在。

另外，我认为这是问题所在，因为`cellForRowAtIndexPath`没有被调用。

我没有正确重新加载我的 tableView 吗？非常感谢帮忙。

```
#import "MainQueryViewController.h"
#import <Parse/Parse.h>
#import "SVProgressHUD.h"
#import "HHPanningTableViewCell.h"
#import "HHInnerShadowView.h"
#import "HHDirectionPanGestureRecognizer.h"

@interface MainQueryViewController () <PFLogInViewControllerDelegate, PFSignUpViewControllerDelegate, HHPanningTableViewCellDelegate>

@end

@implementation MainQueryViewController

@synthesize listArray;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {

        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    PFLogInViewController *login = [[PFLogInViewController alloc] init];
    login.fields = PFLogInFieldsFacebook;
    login.delegate = self;
    login.signUpController.delegate = self;
    [self presentModalViewController:login animated:NO];

}

-(void)viewWillAppear:(BOOL)animated {
    PFQuery *query = [PFQuery queryWithClassName:@"ListItem"];

    [query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
        if (!error) {
            [query whereKey:@"listName" equalTo:[PFUser currentUser]];
            listArray = [objects mutableCopy];
            NSLog(@"I'm about to show you an array");
            NSLog(@"%@", listArray);
        }
        else {
            NSLog(@"Error: %@ %@", error, [error userInfo]);
        }
    }];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    HHPanningTableViewCell *cell = (HHPanningTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    NSInteger directionMask = indexPath.row % 5;
    if (cell == nil) {
        NSLog(@"Cell = nil.");
        cell = [[HHPanningTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    UIView *drawerView = [[UIView alloc] initWithFrame:cell.frame];

    drawerView.backgroundColor = [UIColor greenColor];
    cell.textLabel.text =  [listArray objectAtIndex:indexPath.row];
    cell.drawerView = drawerView;

    // Configure the cell...

}
    if (directionMask < 3) {
        cell.directionMask = directionMask;
    }
    else {
        cell.directionMask = HHPanningTableViewCellDirectionLeft + HHPanningTableViewCellDirectionRight;

        if (directionMask == 4) {
            cell.delegate = self;
        }
    }

    cell.textLabel.text = [self.listArray objectAtIndex:directionMask];

    return cell;
}

#pragma mark - PFLogInViewController delegate

- (void)logInViewController:(PFLogInViewController *)logInController didLogInUser:(PFUser *)user
{
    [self dismissViewControllerAnimated:YES completion:^{
        NSLog(@"Successfully logged in.");
        [SVProgressHUD showSuccessWithStatus:@"Success!"];

    }];

}

- (void)logInViewControllerDidCancelLogIn:(PFLogInViewController *)logInController
{
    [self dismissModalViewControllerAnimated:YES];
    NSLog(@"Login was cancelled!");
}

- (void)signUpViewController:(PFSignUpViewController *)signUpController didSignUpUser:(PFUser *)user
{
    [self dismissModalViewControllerAnimated:YES];
    NSLog(@"Successfully signed up.");
}

- (void)signUpViewControllerDidCancelSignUp:(PFSignUpViewController *)signUpController
{
    [self dismissModalViewControllerAnimated:YES];
    NSLog(@"Sign up was cancelled!");
}

#pragma mark - Table view delegate

- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    if ([cell isKindOfClass:[HHPanningTableViewCell class]]) {
        HHPanningTableViewCell *panningTableViewCell = (HHPanningTableViewCell*)cell;

        if ([panningTableViewCell isDrawerRevealed]) {
            return nil;
        }
    }

    return indexPath;
}

- (void)panningTableViewCellDidTrigger:(HHPanningTableViewCell *)cell inDirection:(HHPanningTableViewCellDirection)direction
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Custom Action"
                                                    message:@"You triggered a custom action"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
}

#pragma mark - UITableViewDelegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    PFQuery *query = [PFQuery queryWithClassName:@"ListItem"];

    [query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
        if (!error) {
            [query whereKey:@"listName" equalTo:[PFUser currentUser]];
            listArray = [objects mutableCopy];
            NSLog(@"I'm about to show you an array");
            NSLog(@"%@", listArray);
        }
        else {
            NSLog(@"Error: %@ %@", error, [error userInfo]);
        }
    }];

    NSLog(@"This is a count of listArray");
    NSLog(@"%@", listArray);
    return [listArray count];
}

@end 
```

![在此处输入图像描述](../Images/5e6fa1c62117befd3dc3446ec822ff72.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:35:12.863

数组末尾的计数是`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`多少？

因为如果我查看[PFQuery](https://parse.com/docs/ios/api/Classes/PFQuery.html#//api/name/findObjectsInBackgroundWithBlock%3a)的文档，我必须说我从未使用过。

> **findObjectsInBackgroundWithBlock：**
> 异步查找对象并使用结果调用给定块。
> - (void)findObjectsInBackgroundWithBlock:(PFArrayResultBlock)block 参数
> block
> 要执行的块。该块应具有以下参数签名：（NSArray 对象，NSError 错误）
> 讨论
> 异步查找对象并使用结果调用给定块。

描述会建议在您的方法结束时，数组的计数为“0”。只有稍后当`block`您通过该方法运行时，您才会拥有一个包含数据的数组。那时你需要保存你的数组并调用`[tableView reloadData]`.

这可以解释这一点：

> 另外，我认为这是问题所在，因为没有调用 cellForRowAtIndexPath。

这可能是 row in section 为 0 的结果，因为如果您的`numberOfRowsInSection` 方法被调用，则意味着您`dataSource`的设置正确。

**但是您的代码还有另一个更大的问题。**
因为每次表视图想要重新加载它的数据时，你发出一个获取请求，这将要求表视图重新加载自己，这反过来又会要求一个新的查询，这将要求 tableView 重新加载自己，这反过来......你明白了。

您应该在 viewDidLoad、viewWillAppear 或 viewController 生命周期中的其他位置进行查询，这取决于数据的波动性、需要进行调用的频率等。

还要记住，更新 tableView 必须在主线程上完成。PFQuery 的文档没有指定当块运行时您将在哪个线程上运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T16:49:33.117

获取数据后重新加载表视图：添加以下行：

```
listArray = [objects mutableCopy];
[tableView reloadData] 
```

# html - 标记搜索结果的最佳方式？

> ID：15589326
> 
> 赞同：0
> 
> 时间：2013-03-23T16:44:33.143
> 
> 标签：html, list, search

目前我正在使用： `<dl> <dt>Title/Link</dt> <dd>Description</dd> </dl>`

但我希望我的结果被编号。我应该通过在生成结果的 PHP 循环中包含一个递增的变量来做到这一点，还是可以使用`<ol> <li>Title<br />Description</li></ol>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:49:09.573

使用`list-style-type:decimal;` [css 属性](http://www.w3.org/wiki/CSS/Properties/list-style-type)获取数字。

`<ul>`并且`<dl>`很有意义。我个人对搜索结果使用无序列表，除非枚举添加了图解上下文。

# php - 是否可以将 NewRelic Web 监控拆分为两个应用程序，Mobile 和 Non-Mobile

> ID：15589333
> 
> 赞同：1
> 
> 时间：2013-03-23T16:44:49.273
> 
> 标签：php, asp.net, newrelic

在 .Net 和 PHP 世界中使用 NewRelic。是否可以手动检测应用程序，以便我们的 /m/（移动）站点被检测为一个应用程序，而我们的 /（非移动）站点被单独检测？

我已经阅读了一些线程，这些线程显示了如何忽略事务和/或仅手动检测您要跟踪的站点部分。理想情况下，我想手动检测整个站点并使用两个不同的 NewRelic 应用程序 ID，以便我们可以看到一个应用程序中的移动性能（移动 = HTML 5 应用程序，非本机）和另一个应用程序中的桌面性能。

现在 iPhone Safari 将我的性能从 2 秒提高到 7 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:34:52.983

在 PHP 中，您可以使用新的 relic PHP API 设置应用名称

newrelic_set_appname（名称）

那不应该工作吗？

有关详细信息，请参阅[https://newrelic.com/docs/php/the-php-api](https://newrelic.com/docs/php/the-php-api)

您还可以在您的网络服务器设置（例如 apache）中设置 PHP ini 值，具体取决于您的 URL 是否以 /m/ 开头。（这里描述了 ini 设置[https://newrelic.com/docs/php/php-agent-phpini-settings](https://newrelic.com/docs/php/php-agent-phpini-settings)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T19:05:51.157

在 .Net 中，您可以获得的最精细的应用程序名称分配是在 App.config 级别。如果移动站点和根站点从同一配置层次结构中提取，我认为您无能为力。

您可以监控关键事务，而较少关注整体应用程序响应时间，而只关注那些特定于应用程序每个部分的事务。

[https://newrelic.com/docs/transactions-dashboards/key-transactions](https://newrelic.com/docs/transactions-dashboards/key-transactions)

# python - Python函数解释

> ID：15589335
> 
> 赞同：0
> 
> 时间：2013-03-23T16:45:17.273
> 
> 标签：python

这部分程序有什么作用（在[Nubela 的 guthub](https://github.com/nubela/nus-cs5215-constraint-programming/blob/master/assignment2/solver.py)上找到）？

```
def product(*args, **kwds):
    """
    for py2.6< support (they lack itertools lib)
    - http://docs.python.org/2/library/itertools.html#itertools.permutations
    """
    pools = map(tuple, args) * kwds.get('repeat', 1)
    result = [[]]
    for pool in pools:
        result = [x+[y] for x in result for y in pool]
    for prod in result:
        yield tuple(prod) 
```

后来在程序中：

```
list(set((product(*[range(2) for _ in range(length)])))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:49:08.883

它实现[`itertools.product`](http://docs.python.org/2/library/itertools.html#itertools.product)了向后兼容。请参阅文档`product`：

> itertools.product(*iterables[, 重复])
> 
> 输入迭代的笛卡尔积。
> 
> 等效于生成器表达式中的嵌套 for 循环。例如，product(A, B) 返回与 ((x,y) for x in A for y in B) 相同的结果。
> 
> 嵌套循环像里程表一样循环，每次迭代时最右边的元素都会前进。此模式创建一个字典顺序，以便如果输入的可迭代项已排序，则产品元组按排序顺序发出。
> 
> 要计算可迭代对象与自身的乘积，请使用可选的 repeat 关键字参数指定重复次数。例如，product(A, repeat=4) 与 product(A, A, A, A) 的含义相同。
> 
> 这个函数等价于下面的代码，只是实际的实现不会在内存中建立中间结果：
> 
> ```
> def product(*args, **kwds):
>     # product('ABCD', 'xy') --> Ax Ay Bx By Cx Cy Dx Dy
>     # product(range(2), repeat=3) --> 000 001 010 011 100 101 110 111
>     pools = map(tuple, args) * kwds.get('repeat', 1)
>     result = [[]]
>     for pool in pools:
>         result = [x+[y] for x in result for y in pool]
>     for prod in result:
>         yield tuple(prod) 
> ```

请注意文档中的代码如何与您找到的内容相匹配。

我不明白他们为什么在文档中引用`itertools.permutations`...代码：

```
list(set((product(*[range(2) for _ in range(length)])))) 
```

AFAIK它相当于：

```
list(product(*[range(2) for _ in range(length)])) 
```

它只是计算`length` `range(2)`迭代的乘积。

# ios - 使用 MobileSubstrate 挂钩 App Delegate 以将新方法添加到所有应用程序中

> ID：15589336
> 
> 赞同：2
> 
> 时间：2013-03-23T16:45:18.800
> 
> 标签：ios, jailbreak, uiapplicationdelegate, proximity, cydia-substrate

我正在使用 Logos 构建一个 MobileSubstrate 调整，并且我正在尝试添加一种新方法来将设备锁定到设备上的每个应用程序中，这将在接近更改通知之后运行。到目前为止，我的代码是

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>
#import <SpringBoard/SpringBoard.h>
#import <SpringBoard/UIApplicationDelegate.h>
#import <GraphicsServices/GSEvent.h>
#include <notify.h>

@interface suspendresume : NSObject 

@property(nonatomic, readonly) BOOL proximityState;

@end

@implementation suspendresume

BOOL tweakOn;

@end

static NSString *settingsFile = @"/var/mobile/Library/Preferences/com.matchstick.suspendresume.plist";

%hook SpringBoard

-(void)applicationDidFinishLaunching:(id)application {
    // Allow SpringBoard to initialise
    %orig;

    // Set up proximity monitoring
    [[UIDevice currentDevice] setProximityMonitoringEnabled:YES];
    [[UIDevice currentDevice] proximityState];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(proximityChange:) name:@"UIDeviceProximityStateDidChangeNotification" object:nil];
}

%new

// Add new code into SpringBoard
-(void)proximityChange:(NSNotification*)notification {
    [[UIDevice currentDevice] setProximityMonitoringEnabled:YES];

    // Check if tweak is on
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:settingsFile];
    tweakOn = [[dict objectForKey:@"enabled"] boolValue];

    // Only run if tweak is on
    if (tweakOn) {

        // Get first proximity value
        if ([[UIDevice currentDevice] proximityState] == YES) {

            // Wait a few seconds TODO allow changing of wait interval from prefrences FIXME causes a lockup of interface whilst sleeping
            [self performSelector:@selector(lockDeviceAfterDelay) withObject:nil afterDelay:1.0];
        }
    }
}

%new

-(void)lockDeviceAfterDelay {

    // Second proximity value
    if ([[UIDevice currentDevice] proximityState] == YES) {

        // Lock device
        GSEventLockDevice();
    }
}

%end 
```

它可以按我在 SpringBoard 中的要求工作，但不能在设备上安装的任何其他应用程序中工作 - 测试时发生的所有事情都是当接近传感器被触发时显示器关闭，并且不会锁定设备。

我正在考虑使用 UIApplicationDelegate `-(void)applicationDidFinishLaunching:(id)application`并`UIApplication`在应用程序中实现与 SpringBoard 相同的功能，但不知道如何做到这一点。

这种方法的想法[来自这个项目](https://github.com/DHowett/theos-logos-examples/blob/master/logos.uiapplicationdelegate/Tweak.xm)

我是否需要将在 SpringBoard 中运行的相同代码添加到新方法中`UIApplication`？

我是否需要为每个应用程序重新设置接近度监控，以及在收到接近度更改通知后如何调用这些新方法运行？

另外，[我的 GitHub 上有完整的源代码](https://github.com/matchstick-dev/SuspendResume)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:56:22.460

事实证明这不是正确的方法。反而，

```
// Get the topmost application
SBApplication *runningApp = [(SpringBoard *)self _accessibilityFrontMostApplication];
// We're in application, resign app
[runningApp notifyResignActiveForReason:1]; 
```

成功了。

# mysql - Google Script 使用 jdbc 和数 据库 mysql

> ID：15589339
> 
> 赞同：0
> 
> 时间：2013-03-23T16:45:40.697
> 
> 标签：mysql, jdbc, google-apps-script

我使用谷歌脚本和我的 MySQL 数据库的 JDBC 连接器。我想使用变量运行查询，例如：

```
var rs = stmt.executeQuery("select*from Comuni where nomeComune=v"); 
```

如何让 JDBC 将`v`末尾的 解释为变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:27:37.613

我会使用常规的字符串连接——这只是 JavaScript。

为什么不尝试以下方法：

```
var rs = stmt.executeQuery( "select * from Comuni where nomeComune={0}".format( value ) ); 
```

# php - php curl超长url格式错误

> ID：15589345
> 
> 赞同：0
> 
> 时间：2013-03-23T16:46:13.967
> 
> 标签：php, curl, malformed

我有一个长 url 嵌套在一个变量中：$mp4，并尝试使用 curl 下载它，但我收到格式错误的错误。如果可以，请帮助我，提前谢谢！

以下是我的 php 脚本中的内容：

```
exec("curl -o $fnctid.mp4 \"$mp4\""); 
```

错误信息：

```
curl: (3) <url> malformed 
```

测试下载的示例网址：

```
http://f26.stream.nixcdn.com/6f4df1d8c248cf149b846c24d32f1c35/514e0209/PreNCT5/22-TaylorSwift-2426783.mp4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:06:42.223

如果已修复，当前 url 将返回`408 - Request Timeout`，您是这个简单的代码：

```
$url = 'http://f26.stream.nixcdn.com/6f4df1d8c248cf149b846c24d32f1c35/514e0209/PreNCT5/22-TaylorSwift-2426783.mp4';
$useragent = 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.2 (KHTML, like Gecko) Chrome/5.0.342.3 Safari/533.2';

$file = __DIR__ . DIRECTORY_SEPARATOR . basename($url);
$fp = fopen($file, 'w+');
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_TIMEOUT, 320);
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
echo curl_exec($ch);

var_dump(curl_getinfo($ch));   // return request information 

curl_close($ch);
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:10:49.883

可以通过使用 urlencode 解决此错误

```
 $url = urlencode ( $url ) 
```

当对要在 URL 的查询部分中使用的字符串进行编码时，此函数很方便，作为传递变量的便捷方式。

希望这能解决答案

# function - tkinter 命令从另一个 Python 脚本调用函数

> ID：15589351
> 
> 赞同：0
> 
> 时间：2013-03-23T16:46:42.947
> 
> 标签：function, python-3.x, tkinter

我有一些问题，使用 tkinter 调用在另一个脚本中定义的 Python 函数。我希望有一个单独的脚本用于 GUI 在需要时使用的函数。目前我正在这样做。

```
ttk.Button(mainframe, text="1", command=one).grid(column=1, row=1, sticky=NW)

def one():
    code_entry.insert(END,"1") 
```

上面在按钮单击时调用命令 one，它将使用 GUI 在输入字段中打印字符 one。我想我可以创建一个单独的脚本来保存我的函数并像这样调用它们：

```
ttk.Button(mainframe, text="1", command=functions.one()).grid(column=1, row=1, sticky=NW) 
```

然后只需在我的 GUI 顶部添加一个导入语句，如下所示：

```
import functions 
```

这不起作用，正在寻找一些关于如何解决这个问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:07:22.570

您没有指定任何错误消息，但很可能您正在执行此操作 - 实际上*是在创建 Button 之前*`fuctions.one()`调用该模块的 one() 函数。只需删除 () 部分即可解决此问题 - 当您指定不带 () 的函数时，您传递的是函数对象的引用。

 *还要记住`code_entry`变量的范围 - 如果您之前将它用作模块级全局（或函数本地，如果`one()`与您的调用在同一个函数内`ttk.Button`），当您将它移动到新的时它将不可用没有`code_entry`.

要解决这个问题，您应该将`code_entry`作为参数传递给回调**而不**首先调用`one()`。通常的方法是创建一个 lambda - 本质上是创建一个在原来的相同范围内工作的函数，可以`one()`访问变量`code_entry`，但也可以调用不同模块中的函数。

```
ttk.Button(mainframe, text="1", command=lambda: functions.one(code_entry)) 
```

请注意，这与以下内容基本相同：

```
def some_anonymous_function():
    functions.one(code_entry)
ttk.Button(mainframe, text="1", command=some_anonymous_function) 
```

这两个示例都创建了一个函数对象并将该对象作为引用传递 - lambda 的`functions.one()`调用实际上是在 lambda 函数的主体内部，稍后将由 tkinter 调用。

当然，您还必须重新定义 one() 以接受这个新参数：

```
def one(code_entry):
    code_entry.insert(END,"1") 
```*

# java - 避免代码重复的 Android 类

> ID：15589353
> 
> 赞同：0
> 
> 时间：2013-03-23T16:47:01.777
> 
> 标签：java, android, performance

我的 android 项目的 2 个类中有相同的代码。我刚刚开始学习java / android，所以请你给我一些提示吗？我是否设置了新课程？感谢您的帮助！

主.java

```
public class Main extends Activity {

private static int RESULT_LOAD_IMAGE = 1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btnGallery = (Button) findViewById(R.id.btnGallery);
    btnGallery.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent i = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

            startActivityForResult(i, RESULT_LOAD_IMAGE);
        }
    });
}

 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);

if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
    Uri selectedImage = data.getData();
    String[] filePathColumn = { MediaStore.Images.Media.DATA };

    Cursor cursor = getContentResolver().query(selectedImage,
            filePathColumn, null, null, null);
    cursor.moveToFirst();

    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
    String picturePath = cursor.getString(columnIndex);

    Intent uploadActivity = new Intent(Main.this, Upload.class);
    uploadActivity.putExtra("picturePath", picturePath);
    startActivity(uploadActivity);
    cursor.close();
}

 }
 } 
```

和 Upload.java

```
 public class Upload extends Activity {

private static int RESULT_LOAD_IMAGE = 1;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_upload);
    Bundle extras = getIntent().getExtras();
    String picturePathView = extras.getString("picturePath");
    ImageView imageView = (ImageView) findViewById(R.id.imgView);
    findViewById(R.id.imgView).setScrollBarStyle(
            View.SCROLLBARS_INSIDE_INSET);
    imageView.setImageBitmap(BitmapFactory.decodeFile(picturePathView));

    Button btnGallery = (Button) findViewById(R.id.btnGallery);
    btnGallery.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent i = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

            startActivityForResult(i, RESULT_LOAD_IMAGE);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
            && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        findViewById(R.id.imgView).setScrollBarStyle(
                View.SCROLLBARS_INSIDE_INSET);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
        cursor.close();
    }

}
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:03:20.070

这实际上是 hasanghaforian 所说的，但更准确一点。

您启用的抽象 Activity 包含与 Upload 和 Main 相同的属性可能如下

```
public abstract class AbstractMediaPickerActivity extends Activity {

    protected static int RESULT_LOAD_IMAGE = 1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    protected void startMediaPicker() {
        Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        startActivityForResult(i, RESULT_LOAD_IMAGE);
    }

    protected abstract void onImagePicked(String picturePath);

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);

            cursor.close();

            onImagePicked(picturePath);

        }

    }
} 
```

您的其他两个类都由 AbstractMediaPickerActivity 继承

```
public class MainActivity extends AbstractMediaPickerActivity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button btnGallery = (Button) findViewById(R.id.btnGallery);
        btnGallery.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                startMediaPicker();
            }
        });
    }

    protected void onImagePicked(String picturePath) {
        Intent uploadActivity = new Intent(Main.this, Upload.class);
        uploadActivity.putExtra("picturePath", picturePath);
        startActivity(uploadActivity);
    }

}

public class Upload extends AbstractMediaPickerActivity {

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_upload);
        Bundle extras = getIntent().getExtras();
        String picturePathView = extras.getString("picturePath");
        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        findViewById(R.id.imgView).setScrollBarStyle(
                View.SCROLLBARS_INSIDE_INSET);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePathView));

        Button btnGallery = (Button) findViewById(R.id.btnGallery);
        btnGallery.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                startMediaPicker();
            }
        });
    }

    @Override
    protected void onImagePicked(String picturePath) {
           ImageView imageView = (ImageView) findViewById(R.id.imgView);
            findViewById(R.id.imgView).setScrollBarStyle(
                    View.SCROLLBARS_INSIDE_INSET);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));    
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:52:16.950

创建一个扩展 Activity 的类（例如 SuperActivity）并向其添加重复代码。然后创建扩展 SuperActivity 的活动 A、B。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:57:34.313

当然，您可以将所有代码放在一个类中。我不会编写所有代码，但您会了解如何在代码中进行重构。

对于`onClickListner`，您可以执行以下操作：

```
@Override
public void onClick(View clickedView) {

    int clickedViewId = clickedView.getId();

    switch(clickedViewId) {
        case R.id.firstItem:
            // code when first view is clicked
        case R.id.secondItem:
            // code when second view is clicked
        default:
            // optional
    }
} 
```

然后`onClickListner`为两个视图设置相同的值。

您可以在`onActivityResult`方法中使用相同类型的 switch 语句。我希望现在你可以将这两个类合二为一。

# python - pandas 中的频率表（如 R 中的 plyr）

> ID：15589354
> 
> 赞同：14
> 
> 时间：2013-03-23T16:47:03.057
> 
> 标签：python, group-by, pandas

我的问题是如何计算 pandas 中多个变量的频率。我有这个数据框：

```
d1 = pd.DataFrame( {'StudentID': ["x1", "x10", "x2","x3", "x4", "x5", "x6",   "x7",     "x8", "x9"],
                       'StudentGender' : ['F', 'M', 'F', 'M', 'F', 'M', 'F', 'M', 'M', 'M'],
                 'ExamenYear': ['2007','2007','2007','2008','2008','2008','2008','2009','2009','2009'],
                 'Exam': ['algebra', 'stats', 'bio', 'algebra', 'algebra', 'stats', 'stats', 'algebra', 'bio', 'bio'],
                 'Participated': ['no','yes','yes','yes','no','yes','yes','yes','yes','yes'],
                  'Passed': ['no','yes','yes','yes','no','yes','yes','yes','no','yes']},
                  columns = ['StudentID', 'StudentGender', 'ExamenYear', 'Exam', 'Participated', 'Passed']) 
```

到以下结果

```
 Participated  OfWhichpassed
 ExamenYear                             
2007                   3              2
2008                   4              3
2009                   3              2 
```

(1) 我尝试的一种可能性是计算两个数据帧并绑定它们

```
t1 = d1.pivot_table(values = 'StudentID', rows=['ExamenYear'], cols = ['Participated'], aggfunc = len)
t2 = d1.pivot_table(values = 'StudentID', rows=['ExamenYear'], cols = ['Passed'], aggfunc = len)
tx = pd.concat([t1, t2] , axis = 1)

Res1 = tx['yes'] 
```

(2) 第二种可能性是使用聚合函数。

```
import collections
dg = d1.groupby('ExamenYear')
Res2 = dg.agg({'Participated': len,'Passed': lambda x : collections.Counter(x == 'yes')[True]})

 Res2.columns = ['Participated', 'OfWhichpassed'] 
```

至少可以说这两种方式都很尴尬。 **这是如何在 pandas 中正确完成的？**

PS：我也尝试了*value_counts*而不是*collections.Counter*但无法让它工作

供参考：几个月前，我 [在这里](https://stackoverflow.com/questions/11852408/)向 R 提出了类似的问题，**plyr**可以提供帮助

**- - 更新 - - -**

用户**DSM**是对的。所需的表格结果有误。

(1) 选项一的代码是

```
 t1 = d1.pivot_table(values = 'StudentID', rows=['ExamenYear'], aggfunc = len)
 t2 = d1.pivot_table(values = 'StudentID', rows=['ExamenYear'], cols = ['Participated'], aggfunc = len)
 t3 = d1.pivot_table(values = 'StudentID', rows=['ExamenYear'], cols = ['Passed'], aggfunc = len)

 Res1 = pd.DataFrame( {'All': t1,
                       'OfWhichParticipated': t2['yes'],
                     'OfWhichPassed': t3['yes']}) 
```

它会产生结果

```
 All  OfWhichParticipated  OfWhichPassed
ExamenYear                                         
2007          3                    2              2
2008          4                    3              3
2009          3                    3              2 
```

(2) 对于选项 2，感谢用户**h​​errfz**，我想出了如何使用 value_count 并且代码将是

```
Res2 = d1.groupby('ExamenYear').agg({'StudentID': len,
                                 'Participated': lambda x: x.value_counts()['yes'],
                                 'Passed': lambda x: x.value_counts()['yes']})

Res2.columns = ['All', 'OfWgichParticipated', 'OfWhichPassed'] 
```

这将产生与 Res1 相同的结果

我的问题仍然存在：

使用选项 2，是否可以两次使用相同的变量（用于另一个操作？）可以为结果变量传递自定义名称吗？

**----一个新的更新----**

我终于决定使用**我**理解的更灵活的应用程序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T09:38:12.973

我最终决定使用**apply**。

我正在发布我想出的东西，希望它对其他人有用。

根据我从 Wes 的《Python for Data analysis》一书中的理解

*   **apply**比 agg 和 transform 更灵活，因为您可以定义自己的函数。
*   唯一的要求是函数返回一个*pandas 对象*或一个*标量值*。
*   内部机制：在分组对象的每一块上调用该函数 abd 结果使用**pandas.concat粘合在一起**
*   最后需要“硬编码”你想要的结构

这是我想出的

```
def ZahlOccurence_0(x):
      return pd.Series({'All': len(x['StudentID']),
                       'Part': sum(x['Participated'] == 'yes'),
                       'Pass' :  sum(x['Passed'] == 'yes')}) 
```

当我运行它时：

```
 d1.groupby('ExamenYear').apply(ZahlOccurence_0) 
```

我得到正确的结果

```
 All  Part  Pass
ExamenYear                 
2007          3     2     2
2008          4     3     3
2009          3     3     2 
```

这种方法还可以让我将频率与其他统计数据结合起来

```
import numpy as np
d1['testValue'] = np.random.randn(len(d1))

def ZahlOccurence_1(x):
    return pd.Series({'All': len(x['StudentID']),
        'Part': sum(x['Participated'] == 'yes'),
        'Pass' :  sum(x['Passed'] == 'yes'),
        'test' : x['testValue'].mean()})

d1.groupby('ExamenYear').apply(ZahlOccurence_1)

            All  Part  Pass      test
ExamenYear                           
2007          3     2     2  0.358702
2008          4     3     3  1.004504
2009          3     3     2  0.521511 
```

我希望其他人会发现这很有用

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-19T05:59:41.527

您可以使用 pandas[交叉表](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.crosstab.html)函数，该函数默认计算两个或多个变量的频率表。例如，

```
> import pandas as pd
> pd.crosstab(d1['ExamenYear'], d1['Passed'])
Passed      no  yes
ExamenYear         
2007         1    2
2008         1    3
2009         1    2 
```

`margins=True`如果您还想查看每行和每列的小计，请使用该选项。

```
> pd.crosstab(d1['ExamenYear'], d1['Participated'], margins=True)
Participated  no  yes  All
ExamenYear                
2007           1    2    3
2008           1    3    4
2009           0    3    3
All            2    8   10 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-23T17:41:51.737

这：

```
d1.groupby('ExamenYear').agg({'Participated': len, 
                              'Passed': lambda x: sum(x == 'yes')}) 
```

恕我直言，看起来并不比 R 解决方案更尴尬。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-06T09:02:33.713

我喜欢使用另一种方法来解决类似问题，它使用`groupby`and `unstack`：

```
d1 = pd.DataFrame({'StudentID': ["x1", "x10", "x2","x3", "x4", "x5", "x6",   "x7",     "x8", "x9"],
                   'StudentGender' : ['F', 'M', 'F', 'M', 'F', 'M', 'F', 'M', 'M', 'M'],
                   'ExamenYear': ['2007','2007','2007','2008','2008','2008','2008','2009','2009','2009'],
                   'Exam': ['algebra', 'stats', 'bio', 'algebra', 'algebra', 'stats', 'stats', 'algebra', 'bio', 'bio'],
                   'Participated': ['no','yes','yes','yes','no','yes','yes','yes','yes','yes'],
                   'Passed': ['no','yes','yes','yes','no','yes','yes','yes','no','yes']},
                  columns = ['StudentID', 'StudentGender', 'ExamenYear', 'Exam', 'Participated', 'Passed']) 
```

（这只是上面的原始数据）

```
d2 = d1.groupby("ExamenYear").Participated.value_counts().unstack(fill_value=0)['yes']
d3 = d1.groupby("ExamenYear").Passed.value_counts().unstack(fill_value=0)['yes']
d2.name = "Participated"
d3.name = "Passed"

pd.DataFrame(data=[d2,d3]).T
            Participated  Passed
ExamenYear                      
2007                   2       2
2008                   3       3
2009                   3       2 
```

这个解决方案比上面使用 apply 的解决方案稍微麻烦一些，但我觉得这个解决方案更容易理解和扩展。

# android - ImageView 的 Android AlertDialog 问题

> ID：15589355
> 
> 赞同：0
> 
> 时间：2013-03-23T16:47:06.700
> 
> 标签：android, android-alertdialog

我正在制作一个具有一个图像的自定义警报对话框。我面临的问题如下：

1) 对于小屏幕设备，此警告对话框似乎太大。aletdialog 按钮退出屏幕（正面和负面按钮）。

2) alertdialog 被绘制了两次。即有 2 个警报对话框一个在另一个上，我必须单击两次肯定按钮才能关闭它们。

这是警报对话框的代码：-

```
AlertDialog.Builder alertdialog = new AlertDialog.Builder(
                    Activity.this);
            alertdialog.setTitle("Title ");
            alertdialog.setMessage("The MEssage ");

            LayoutInflater layoutinf= LayoutInflater.from(Activity.this);
            final View view = layoutinf.inflate(R.layout.layoutfile, null);
            alertdialog.setView(view);
            alertdialog.setPositiveButton("Button1",
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            //do something 
                        }
                    });
    alertdialog.show(); 
```

任何指针都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:51:16.270

对于第二个问题警报对话框应该是这样的：

```
AlertDialog.Builder alertdialog= new AlertDialog.Builder(this);
alertdialog.setTitle("Title");
alertdialog.setPositiveButton("OK", okListener); 
alertdialog.setNegativeButton("Cancel", cancelListener); 
AlertDialog alertdialogDlg = alertdialog.create(); 
alertdialogDlg.show(); 

 public DialogInterface.OnClickListener okListener = new      
 DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            //do something
        }
    }; 
```

# c# - 为什么我可以在运行时从泛型类型继承，但不能在编译时继承？

> ID：15589356
> 
> 赞同：0
> 
> 时间：2013-03-23T16:47:07.227
> 
> 标签：c#, generics, reflection, reflection.emit

所以我做了一些实验，我发现虽然这样：

```
public class SelfOfT
{
    // This won't compile
    public class FailureOf<T> : T
    {

    }
} 
```

另一方面，失败了：

```
public class SelfOfT
{
    public interface IMyInterface
    {

    }

    public static void Second()
    {
        // This works fine, and achieves the same end as what I'm trying to do with FailureOf<T>
        AssemblyName name = new AssemblyName("Dynamics");
        AssemblyBuilder asmBuilder = AssemblyBuilder.DefineDynamicAssembly(name, AssemblyBuilderAccess.Run);
        ModuleBuilder modbuilder = asmBuilder.DefineDynamicModule("MyModule");
        TypeBuilder typeBuild = modbuilder.DefineType("SuccessfulOf", TypeAttributes.Public);

        typeBuild.AddInterfaceImplementation(typeof(IMyInterface));
        var TParam = typeBuild.DefineGenericParameters(new String[] { "T" }).First();
        TParam.SetGenericParameterAttributes(GenericParameterAttributes.None);

        Type myType = typeBuild.CreateType();
        Type genericMyType = myType.MakeGenericType(typeof(IMyInterface));

        IMyInterface my = (IMyInterface)Activator.CreateInstance(genericMyType);

    }
} 
```

工作正常。如果我无论如何都可以在运行时做到这一点，那么在编译时让它可用似乎会节省很多麻烦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T16:51:08.740

嗯，你也不允许在运行时这样做。

请注意，在您的情况下，您**没有**指定要继承的类。

为此，您需要使用[DefineType](http://msdn.microsoft.com/en-us/library/system.reflection.emit.modulebuilder.definetype.aspx)的重载之一，该重载采用`Type`要继承的参数。

但是，在运行时，您不能`T`为该参数指定任何一个，您必须指定*特定*类型，这与编译时没有区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T16:50:56.960

您使用反射的代码实际上定义了这一点：

```
public class SuccessfulOf<T> : IMyInterface
{

} 
```

你不能做你想做的事 ( `class FailureOf<T> : T`) 因为`T`在编译时必须知道基本类型。在运行时反射你仍然不能这样做，因为`T`必须知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T16:54:22.617

因为在第二个代码中您声明的是类型`public class FailureOf<T> : IMyInterface`，而不是`public class FailureOf<T> : T`。

即使你在周围的类中声明了泛型类型，你仍然不能从它继承，因为你不能继承类型参数。

# backbone.js - 在 Backbone.js 中，当循环获取模型时，单个模型的成功仅在循环结束时执行

> ID：15589360
> 
> 赞同：1
> 
> 时间：2013-03-23T16:47:14.783
> 
> 标签：backbone.js

集合模型和视图代码

```
Backbone.Collection.extend({
    model: xModel,

    initialize: function(url) {
        this.targetUrl = url;
    },

    url: function () {
         return this.targetUrl;
    },

    parse: function (data) {
        return data.instances;
    }
}

Backbone.Model.extend({

    defaults: {
        location: '',
        xyz: ''
    },

    initialize: function (options) {

    },

    url: function () {
            return this.get('location');
        }
    }
}

renderInstances: function () {           
    this.collection = new xyzInstanceCollection(instPath);

        this.collection.fetch({
             success: _.bind(
                   function (data) {

                     for (var i = 0; i < this.collection.length; ++i) {
                     var model = this.collection.at(i);
                     model.fetch({
                          success: _.bind(
                               function (data) {
                                    /*Call a subView to run the data over a template
                                    and display the instance fetched*/                 
                                }, this),
                          error:
                               function (e, response) {
                                    /*Do Something else*/ 
                               }
                          });
                     }
             }, this),
             error:
                    function (e, response) {
                        /*Do Something*/
                    }
             }
    });

 } 
```

问题 1：现在我期望从成功回调调用的实例的视图将在该模型的获取获取数据后立即开始呈现，但我看到的是 Backbone.js 首先将所有 ajax 调用排队的完整循环，然后一旦所有这些调用都返回了数据，然后视图才开始渲染，无论同步还是异步获取都会发生这种情况，为什么会这样？

问题 2：如果在从此循环中获取所有模型之前按下刷新按钮，浏览器会返回通信错误。当用户想要路由到另一个页面而不关心查看结果时如何中止这些调用，模型获取循环可能返回 1000 个 xhr，我无法将它们全部收集并对其执行中止，有没有更好的方法，请建议。

# r - 生成包含 R 中给定术语的 DocumentTermMatix

> ID：15589362
> 
> 赞同：2
> 
> 时间：2013-03-23T16:47:19.697
> 
> 标签：r, data-mining, text-mining, tm

我正在使用`tm`语料库生成 DocumentTermMatrix，仅使用经常出现的术语。（即 MinDocFrequency=50）

现在我想生成一个具有不同语料库的 DTM，但计数与前一个完全相同的术语，不多也不少。（交叉验证）

如果我使用与第一个语料库相同的方法来生成 DTM，我最终会包含更多或更少的术语，或者只是不同的术语，因为它们与原始语料库的频率不同。

我该怎么做呢？我需要指定以某种方式计算哪些术语，但我不知道如何计算。

感谢任何可以为我指明正确方向的人，

-N

编辑：我被要求提供一个可重现的示例，所以我在这里粘贴了一些示例代码[http://pastebin.com/y3FDHbYS](http://pastebin.com/y3FDHbYS) 重新编辑：

```
 require(tm)
 text <- c('saying text is good',
          'saying text once and saying text twice is better',
          'saying text text text is best',
          'saying text once is still ok',
          'not saying it at all is bad',
          'because text is a good thing',
          'we all like text',
          'even though sometimes it is missing')

validationText <- c("This has different words in it.",
                     "But I still want to count",
                     "the occurence of text",
                     "for example")

TextCorpus <- Corpus(VectorSource(text))
ValiTextCorpus <- Corpus(VectorSource(validationText))

Control = list(stopwords=TRUE, removePunctuation=TRUE, removeNumbers=TRUE, MinDocFrequency=5)

TextDTM = DocumentTermMatrix(TextCorpus, Control)
ValiTextDTM = DocumentTermMatrix(ValiTextCorpus, Control) 
```

然而，这只是显示了我已经熟悉的生成语料库的方法，因此两个 DTM（TextDTM 和 ValiTextDTM）包含不同的术语。我想要实现的是在两个语料库中计算相同的术语，即使它们在验证语料库中的频率要低得多。在示例中，我将尝试计算单词“text”的出现次数，即使这会在验证案例中产生一个非常稀疏的矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:19:38.620

这是一种方法......它适用于您的数据吗？**有关包含 OP 数据的详细信息，请参阅下文**

```
# load text mining library    
library(tm)

# make first corpus for text mining (data comes from package, for reproducibility) 
data("crude")
corpus1 <- Corpus(VectorSource(crude[1:10]))

# process text (your methods may differ)
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, 
              stripWhitespace, skipWords, MinDocFrequency=5)
crude1 <- tm_map(corpus1, FUN = tm_reduce, tmFuns = funcs)
crude1.dtm <- TermDocumentMatrix(crude1, control = list(wordLengths = c(3,10))) 

# prepare 2nd corpus
corpus2 <- Corpus(VectorSource(crude[11:20]))

# process text as above
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, stripWhitespace, skipWords)
crude2 <- tm_map(corpus2, FUN = tm_reduce, tmFuns = funcs)
crude2.dtm <- TermDocumentMatrix(crude1, control = list(wordLengths = c(3,10))) 

crude2.dtm.mat <- as.matrix(crude2.dtm)

# subset second corpus by words in first corpus
crude2.dtm.mat[rownames(crude2.dtm.mat) %in% crude1.dtm.freq, ]
    Docs
 Terms    reut-00001.xml reut-00002.xml reut-00004.xml reut-00005.xml reut-00006.xml
 oil                 5             12              2              1              1
 opec                0             15              0              0              0
 prices              3              5              0              0              0
    Docs
Terms    reut-00007.xml reut-00008.xml reut-00009.xml reut-00010.xml reut-00011.xml
oil                 7              4              3              5              9
opec                8              1              2              2              6
prices              5              1              2              1              9 
```

**提供数据和评论后更新**我认为这更接近你的问题。

这是使用*文档术语矩阵*而不是 TDM 的相同过程（正如我在上面使用的，略有不同）：

```
# load text mining library    
library(tm)

# make corpus for text mining (data comes from package, for reproducibility) 
data("crude")
corpus1 <- Corpus(VectorSource(crude[1:10]))

# process text (your methods may differ)
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, stripWhitespace, skipWords)
crude1 <- tm_map(corpus1, FUN = tm_reduce, tmFuns = funcs)
crude1.dtm <- DocumentTermMatrix(crude1, control = list(wordLengths = c(3,10))) 

corpus2 <- Corpus(VectorSource(crude[11:20]))

# process text (your methods may differ)
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, 
              stripWhitespace, skipWords, MinDocFrequency=5)
crude2 <- tm_map(corpus2, FUN = tm_reduce, tmFuns = funcs)
crude2.dtm <- DocumentTermMatrix(crude1, control = list(wordLengths = c(3,10))) 

crude2.dtm.mat <- as.matrix(crude2.dtm)
crude2.dtm.mat[,colnames(crude2.dtm.mat) %in% crude1.dtm.freq ]

Terms
Docs             oil opec prices
reut-00001.xml   5    0      3
reut-00002.xml  12   15      5
reut-00004.xml   2    0      0
reut-00005.xml   1    0      0
reut-00006.xml   1    0      0
reut-00007.xml   7    8      5
reut-00008.xml   4    1      1
reut-00009.xml   3    2      2
reut-00010.xml   5    2      1
reut-00011.xml   9    6      9 
```

**这是使用添加到 OP 问题中的数据的解决方案**

```
text <- c('saying text is good',
          'saying text once and saying text twice is better',
          'saying text text text is best',
          'saying text once is still ok',
          'not saying it at all is bad',
          'because text is a good thing',
          'we all like text',
          'even though sometimes it is missing')

validationText <- c("This has different words in it.",
                    "But I still want to count",
                    "the occurence of text",
                    "for example")

TextCorpus <- Corpus(VectorSource(text))
ValiTextCorpus <- Corpus(VectorSource(validationText))

Control = list(stopwords=TRUE, removePunctuation=TRUE, removeNumbers=TRUE, MinDocFrequency=5)

TextDTM = DocumentTermMatrix(TextCorpus, Control)
ValiTextDTM = DocumentTermMatrix(ValiTextCorpus, Control)

# find high frequency terms in TextDTM
(TextDTM.hifreq <- findFreqTerms(TextDTM, 5))
[1]   "saying"    "text"     

# find out how many times each high freq word occurs in TextDTM
TextDTM.mat <- as.matrix(TextDTM)
colSums(TextDTM.mat[,TextDTM.hifreq])
saying   text 
6        9 
```

**以下是关键行**，根据来自第一个 DTM 的高频词列表对第二个 DTM 进行子集化。在这种情况下，我使用了该`intersect`函数，因为高频词的向量包含一个根本不在第二个语料库中的词（并且`intersect`似乎比 处理得更好`%in%`）

```
# now look into second DTM
ValiTextDTM.mat <- as.matrix(ValiTextDTM)
common <- data.frame(ValiTextDTM.mat[, intersect(colnames(ValiTextDTM.mat), TextDTM.hifreq) ])
names(common) <- intersect(colnames(ValiTextDTM.mat), TextDTM.hifreq)
     text
1    0
2    0
3    1
4    0 
```

如何找到第二个语料库中**高频词的总数：**

```
colSums(common)
text 
   1 
```

# android - 从联系人内容提供商获取联系人“发送结果失败”

> ID：15589363
> 
> 赞同：1
> 
> 时间：2013-03-23T16:47:23.903
> 
> 标签：android, android-contentprovider, android-contacts

我现在是 android 和学习内容提供商的新手。

尝试掌握它的基本窍门，但有一个错误，不太确定如何解决。

当一个按钮被点击时，这个函数被调用

```
public void getContact(View v){
    Intent i=new Intent(Intent.ACTION_GET_CONTENT);
    i.setType((ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE));
    startActivityForResult(i, this.contactActId);
} 
```

和 onActivityResult 函数

```
public void onActivityResult(int requestCode,int resultCode,Intent data){

        if(requestCode==this.contactActId){
            if(data!=null){
                Uri uri=data.getData();
                if(uri!=null){
                    Cursor c=null;
                    c=getContentResolver().query(uri, new String[]{
                            ContactsContract.CommonDataKinds.Phone.NUMBER,
                            ContactsContract.CommonDataKinds.Phone.TYPE
                    }, null, null, null);

                    if(c!=null){
                        String number=c.getString(0);//EXCEPTION COMES HERE
                        int type=c.getInt(1);
                        Toast t=Toast.makeText(this, "The number is"+number+"of type"+type,Toast.LENGTH_LONG);
                        t.setGravity(Gravity.CENTER_HORIZONTAL, 0, 0);
                        t.show();
                    }
                }

            }
        }
} 
```

日志猫

```
03-23 21:45:04.460: E/AndroidRuntime(1362): FATAL EXCEPTION: main
03-23 21:45:04.460: E/AndroidRuntime(1362): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=4, result=-1, data=Intent { dat=content://com.android.contacts/data/1744 flg=0x1 }} to activity {com.example.contentproviderstest/com.example.contentproviderstest.MainActivity}: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2985)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3028)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.app.ActivityThread.access$1100(ActivityThread.java:128)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1182)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.os.Looper.loop(Looper.java:137)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.app.ActivityThread.main(ActivityThread.java:4453)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at java.lang.reflect.Method.invokeNative(Native Method)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at java.lang.reflect.Method.invoke(Method.java:511)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at dalvik.system.NativeStart.main(Native Method)
03-23 21:45:04.460: E/AndroidRuntime(1362): Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:400)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.database.CursorWrapper.getString(CursorWrapper.java:114)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at com.example.contentproviderstest.MainActivity.onActivityResult(MainActivity.java:62)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.app.Activity.dispatchActivityResult(Activity.java:4651)
03-23 21:45:04.460: E/AndroidRuntime(1362):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2981)
03-23 21:45:04.460: E/AndroidRuntime(1362):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:19:34.113

您必须将光标移动到第一个位置，才能获得第一个数据集。说类似

```
if(c!=null && c.moveToFirst()){
..
} 
```

还要确保你`<uses-permission android:name="android.permission.READ_CONTACTS" />`的清单中有。

# c++ - Qt 插槽未被调用

> ID：15589367
> 
> 赞同：0
> 
> 时间：2013-03-23T16:47:52.280
> 
> 标签：c++, qt, signals

我有一个程序，在该程序中，我将 QSignalMapper 多个信号从对象连接到主程序中的插槽：

```
class A()
{
    private:
        QSignalMapper * signalMapperRead_;
        std::vector<Service*> services_;
    public:
    void initConnection()
    {
        signalMapperRead_ = new QSignalMapper();

        connect(signalMapperRead_, SIGNAL(mapped(int)), this, SLOT(readyToSendToService(int)));

        for ( size_t i = 0 ; i < services_.size() ; ++i )
        {
            connect(services_.at(i), SIGNAL(readyToSendToServer()), signalMapperRead_, SLOT(map()));
            signalMapperRead_->setMapping(services_.at(i), (int)i);
        }
    }

    int run()
    {
        initConnection();
        for(;;)
        {
             //do stuff;
        }
    }

};

int main()
{
    QApplication app(argc, argv);
    A * a  = new A();
    a->run();
    return app.exec
} 
```

然后，由于程序是一种服务器，我让他循环，等待新客户端，...

但是插槽永远不会被调用。我在想这可能是因为程序始终处于循环中，并且从不检查是否已发出信号。

你能帮我么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:53:01.957

不要使用自己的循环，创建一个 QApplication 并调用它的 exec() 方法。

您必须调用[QApplication::exec()](http://qt-project.org/doc/qt-4.8/qapplication.html#exec "QApplication::exec()")才能让 Qt 传递信号。

编辑更改的代码：只需删除 for(;;)-Loop，这是不必要的。QApplication::exec() 有自己的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:33:21.083

> 但是插槽永远不会被调用。

关于 Qt 的文档[`QApplication::exec`](http://qt-project.org/doc/qt-4.8/qapplication.html#exec)说：

> 进入主事件循环并等待直到 exit() 被调用 [...]。需要调用此函数来启动事件处理。主事件循环从窗口系统接收事件并将这些事件分派给应用程序小部件。[...] **通常，在调用 exec() 之前不能进行任何用户交互**。[...]

这意味着它是`exec` 处理信号槽系统的方法。您正在调用`A::run`（在`exec`函数之前），其中包含一个`for(;;)`无限循环，该循环将阻止执行真正的循环，从而导致您的信号丢失。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T17:38:10.043

我找到了解决方法。除了我不确定它是否非常有效之外，我的解决方案是`QEventLoop`在循环的每个循环中启动一个`for(;;)`，并且我在超时时`QEventLoop`退出`QTimer`

# javascript - 使用 JavaScript 在 asp.net 文本框中显示货币符号 ($)

> ID：15589370
> 
> 赞同：0
> 
> 时间：2013-03-23T16:48:03.690
> 
> 标签：javascript, asp.net

我正在使用 asp.net 文本框

我想以正确的货币格式显示用户输入的值，例如，如果用户输入 10000，我希望它的格式如下：10,000 $

如何在不使用 ajaxtool 工具包的情况下通过 javascript 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:19:44.270

您可以使用 javascript 来实现这一点。以下代码将在用户键入时更改该值：

javascript:

```
 function fnCurrencyOnly(o) {
        var sValue = o.value;
        var sKey = String.fromCharCode(window.event.keyCode);
        if (document.selection.createRange().text == sValue) {
            sValue = sKey;
        } else {
            sValue = sValue + sKey;
        }
        var re = new RegExp("^\\d+(?:\\.\\d{0,2})?$");
        if (!sValue.match(re))
            window.event.returnValue = false;
    } 
```

html:

```
<div>
   <asp:textbox runat="Server" ID="text" onchange="fnCurrencyOnly(this);" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:30:33.070

尝试这样的事情

```
 function formatText(txt)
    { 
 txt.value = '$' + txt.value;

    }

<asp:textbox onchange="javascript:formatText(this);"/> 
```

# c++ - 带有 FPS 校正的 cocos2d 回放系统

> ID：15589371
> 
> 赞同：0
> 
> 时间：2013-03-23T16:48:05.367
> 
> 标签：c++, cocos2d-iphone, cocos2d-x, game-physics

我正在为我的 cocos2d-x 游戏构建一个回放系统，它也使用 box2d。

游戏是不确定的，因此我无法存储用户操作并重播它们，所以我正在做的是将每个时间步长的精灵的位置和角度存储到流中。

现在我有以下格式的重播文件

```
x,y,angle\r\n 
```

每条线代表精灵在给定时间步的状态。

现在，当我在同一台设备上回放时，一切都很完美，但生活当然不是那么容易，所以如果我想以不同的帧速率回放，问题就来了，怎么会这样呢？

有没有聪明的方法来处理这个问题？

我也没有固定的时间步长，我会尽快实现，所以你可以在你的答案中考虑一个固定的时间步长:)

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:16:40.187

好的，您记录增量时间以及每个记录的帧。最好以 0 的增量时间开始记录第一帧，并假设回放的第一帧相同。

然后在您的更新方法中累积当前的增量时间：

```
-(void) update:(ccTime)delta
{
    if (firstFrame) 
    {
        totalTime = 0;
        totalRecordedTime = 0;
        firstFrame = NO;
    }
    else
    {
        totalTime += delta;
    }

    totalRecordedTime += [self getRecordedDeltaForFrameIndex:recordedFrameIndex];
    if (totalTime > totalRecordedTime)
    {
        [self advanceRecordedFrameIndex];
    }

    // alternative:
    id recordedFrameData = [self getRecordedFrameForDeltaTime:totalTime];
    // apply recorded data ...
} 
```

替代方案：创建一个基于当前时间增量返回或“应用”记录帧的方法。选择记录的总增量时间等于或低于当前总增量时间的帧。

为了更快地搜索帧，请记住最近记录的帧的索引并从那里开始搜索（比较每个帧的增量时间），始终包括最近的帧。

有时这会多次显示相同的记录帧，或者它可能会跳过记录的帧 - 取决于实际的设备帧率和录制期间的帧率。

# list - 如何添加到方案中的嵌入列表？

> ID：15589374
> 
> 赞同：0
> 
> 时间：2013-03-23T16:48:16.480
> 
> 标签：list, recursion, functional-programming, lisp, scheme

我正在尝试在方案中生成符号表，但我被困在 set-symbol 函数上。该数字对应于代码的块级别或“范围”。

```
First symbol it reads in
((c class 0))
Next symbols 
(((c class 0) (a int 0) (b float 0)))
We read a bracket and read the next variables to a new scope.
(((a char 1) (d int 1)) ((c class 0) (a int 0) (b float 0)))
We leave that scope and "pop the stack".
(((c class 0) (a int 0) (b float 0))) 
```

如何始终添加到范围内第一个列表的最深列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:42:11.880

我怀疑你最好使用不同的表示。众多的其中之一是：

```
(define (make-symbol-table parent alist)
  `(SYMBOL-TABLE ,parent ,@alist))
(define symbol-table-parent cadr)
(define symbol-table-alist  cddr)

(define (symbol-table-depth table)
  (let ((parent (symbol-table-parent table)))
    (if (not parent)
        1
        (+ 1 (symbol-table-depth parent))))

(define (symbol-table-lookup table name)
  (cond ((assoc name (symbol-table-alist table)) => cdr)
        (else (let ((parent (symbol-table-parent table)))
                (and parent (symbol-table-lookup parent name)))))) 
```

# websocket - Tomcat7 Websocket Chat 示例：如何加载 Websocket Server？

> ID：15589375
> 
> 赞同：4
> 
> 时间：2013-03-23T16:48:24.847
> 
> 标签：websocket, tomcat7

我正在尝试使用 websockets 制作自己的聊天客户端，并认为我将从[Tomcat 7 websocket 聊天示例代码开始。](http://svn.apache.org/viewvc/tomcat/trunk/webapps/examples/WEB-INF/classes/websocket/). 我已经`ChatAnnotation`使用 Eclipse 成功编译和部署了该类，但是当我将 chat.html 文件重定向到我认为应该是端点时，什么也没有发生。

[在示例类](http://svn.apache.org/viewvc/tomcat/trunk/webapps/examples/WEB-INF/classes/websocket/chat/ChatAnnotation.java?view=co)中，它们有一个`@ServerEndpoint(value = "/websocket/chat")`注释，我不确定我需要做什么（即在 web.xml 中）以使该类在服务器启动时加载并绑定该端点。

我已经在构造函数中放置了断点，以查看它是否在我部署时被创建，而事实并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-27T08:09:54.807

这是“小魔法”：

您的类路径中**必须**有接口的实现[`ServerApplicationConfig`](https://tomcat.apache.org/tomcat-7.0-doc/websocketapi/javax/websocket/server/ServerApplicationConfig.html)：

> 应用程序可以提供此接口的实现来过滤已部署的已发现 WebSocket 端点。此类的实现**将**通过 ServletContainerInitializer 扫描发现。

如果您使用 Tomcat 示例，则存在一个类`{CATALINA_BASE}\webapps\examples\WEB-INF\classes\websocket\ExamplesConfig.java`（带有已编译的 .class）

* * *

**最后但同样重要的是：**当 Tomcat**发现**事物时，您不必在`WEB-INF/web.xml`. 该文件必须存在，但内容最少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T20:10:05.713

您不需要 web.xml 中的任何特殊配置。您是否在本地正确版本的 Tomcat 上运行它？此注解仅适用于 Tomcat 7.0.47。此外，如果您使用的是 Maven，这是我使用的依赖项 - 它指定了 websocket-api，因此代码可以编译，但假设运行时环境会提供必要的库。你会在 tomcat-7.0.47/lib 中找到 websocket-api.jar 和 tomcat7-websocket.jar

```
 <dependency>
        <groupId>javax.websocket</groupId>
        <artifactId>javax.websocket-api</artifactId>
        <version>1.0</version>
        <scope>provided</scope>
    </dependency> 
```

# objective-c - 可可应用程序偶尔崩溃无法重现

> ID：15589377
> 
> 赞同：0
> 
> 时间：2013-03-23T16:48:44.463
> 
> 标签：objective-c, xcode, cocoa

我有时会遇到一个奇怪的错误。我做了几次同样的事情，然后有时程序就崩溃了。大多数情况下，当我尝试打开文件对话框或尝试确定随机数时会发生这种情况。我不知道它可能是什么。如果有人能指出我正确的方向，那就太好了。

这是我得到的日志和图像：

> 2013-03-23 17:40:11.040 ImageSorter[38065:303]-[ **NSMallocBlock** openFirstFile:]：无法识别的选择器发送到实例 0x10015b170 2013-03-23 17:40:11.041 ImageSorter[38065:303]-[ **NSMallocBlock** openFirstFile: ]：无法识别选择器发送到实例0x10015B170 2013-03-23 17：40：11.046 Imageorter [38065：303]（0
> Corefoundation 0x00007FFF8CE4FB06 ExceptionProprocess **+ 198 1 Libobjc.a.dylib
> 0x00007FFF93B913F0 Objc_excepion_Throw + 43 2
> Corefoundation 0x00007FFF8CE640A - [NSObject（NSObject） doesNotRecognizeSelector:] + 186 3 CoreFoundation 0x00007fff8ce3e02e ___forwarding_**+ 414 4的CoreFoundation 0x00007fff8ce3de18 _CF_forwarding_prep_0 + 232 5了AppKit
> 0x00007fff8b141989 - [的NSApplication sendAction：为：从：] + 342 6
> 了AppKit 0x00007fff8b1417e7 - [的NSControl sendAction：至：] + 85 7了AppKit
> 0x00007fff8b14171b - [的NSCell _sendActionFrom：] + 138 8了AppKit
> 0x00007fff8b13fc03 -[NSCell tr​​ackMouse:inRect:ofView:untilMouseUp:] + 1855 9 AppKit 0x00007fff8b13f451 -[NSButtonCell tr​​ackMouse:inRect:ofView:untilMouseUp:] + 504 10 AppKit 0x00007fff8b13ebcc -[NSControl mouseDown:] + 820 11 AppKit
> 0x00007f sendEvent8 ] + 6853 12 应用套件
> 0x00007FFF8B132674 - [nsapplication sendevent：] + 5761 13
> appkit 0x00007fff8b04824a - [nsapplication运行] + 636 14
> appkit 0x00007FF8AFECC06 NSApplicationMain + 869 15 Imablosorter
> 0x0000000100001142 Main + 34 16 LibdyLD.Dylib
> 0x00007FFF93B107E1 START + 0）（LLDB）

![屏幕错误](../Images/ab22d60357db31d4b5a296f4ca6ba564.png)

## -------------------------------------------------- --------------------------------------

在 gaige 和 Joshua Nozzi 的第一个答案之后发生了以下情况：

## -------------------------------------------------- --------------------------------------

我启用了 Zombie Objects，当我第一次运行它时它告诉我：

> _NSZombie_NSIBUserDefinedRuntimeAttributesConnector 类在两者中都实现了？？和 ？？。将使用两者之一。哪一个是未定义的。

和

> CoreAnimation：警告，删除了未提交 CATransaction 的线程；在环境中设置 CA_DEBUG_TRANSACTIONS=1 以记录回溯。

所以我设置 CA_DEBUG_TRANSACTIONS=1。第二个警告可能是因为我在后台线程中运行打开的对话框吗？

我现在运行了几次，又遇到了几个错误，但我真的看不出问题出在哪里，以及为什么在执行相同任务时并不总是出现相同的错误。我不希望任何人真正阅读所有错误消息（它们更多地说明了我的问题），但如果有人能展示我如何阅读和理解它们会很棒（有没有很好的教程？）：

错误一：

> CoreAnimation：警告，删除了未提交 CATransaction 的线程；0 QuartzCore 0x00007fff89727959 _ZN2CA11Transaction4pushEv + 219 1 QuartzCore 0x00007fff89727531 _ZN2CA11Transaction15ensure_implicitEv + 273 2
> ：通过创建[NSScrollerImp _updateLayerGeometry] + 67 5 - + 38 4了AppKit 0x00007fff81099ede：QuartzCore 0x00007fff897273ce _ZN2CA11Transaction9set_valueEj12_CAValueTypePKv + 40 3 QuartzCore 0x00007fff89727362 + [CATransaction setDisableActions]了
> AppKit 0x00007fff810994bd - [NSScroller（NSInternal2 ) _replaceScrollerImp] + 368 6 AppKit 0x00007fff81131778 -[NSScroller initWithCoder:] + 305 7 基础
> 0x00007fff85886fe9 _decodeObjectBinary + 2741 8基金会
> 0x00007fff85887dc6 - [NSKeyedUnarchiver _decodeArrayOfObjectsForKey：] + 1189 9基金会0x00007fff85888338 - [NSArray的（NSArray的）的initWithCoder：] + 538 10基金会0x00007fff85886fe9 _decodeObjectBinary + 2741 11基金会
> 0x00007fff85886394 _decodeObject + 226 12了AppKit
> 0x00007fff80fb3631 - [的NSView的initWithCoder：] + 976 13 AppKit
> 0x00007fff8112ed17 -[NSScrollView initWithCoder:] + 335 14 基础 0x00007fff85886fe9 _decodeObjectBinary + 2741 15 基础
> 0x00007fff85886394 _decodeObject + 226

错误2：

> ***-[ **NSArrayM removeObjectAtIndex:]：索引 19 超出范围 [0 .. 18] 2013-03-24 11:48:25.953 程序 [8316:303] (0 CoreFoundation
> 0x00007fff82e07b06 __exceptionPreprocess + 198 1 libobjc.A.dylib
> 0x00007fff89b49 objc_exception_throw + 43 2的CoreFoundation
> 0x00007fff82da4a04 - [__ NSArrayM removeObjectAtIndex：] + 276 3
> 了AppKit 0x00007fff8114915f - [NSBinder _updateObservingRegistration：] + 258 4了AppKit 0x00007fff8115619c - [NSBinder breakConnection] + 97 5了AppKit
> 0x00007fff8114155d - [NSObject的（NSKeyValueBindingCreation）结合：toObject：withKeyPath：选项：] + 277 6 FinderKit
> 0x00007fff89e4d570 - [FI_TListViewController privateBindSettings] + 528 7 FinderKit 0x00007fff89e38598 - [FI_TBrowserViewController（配置）bindViewSettings] + 83 8 FinderKit 0x00007fff89ec17b7 - [FIFinderViewGutsController commonFinishInitialization] + 33 9 FinderKit 0x00007fff89ebb439 - [FIFinderViewGutsController createBrowserViewWithViewStyle：] + 516 10 FinderKit 0x00007fff89ebd48a - [FIFinderViewGutsController buildBrowserView： ] + 211 11 FinderKit 0x00007fff89ebd931 -[FIFinderViewGutsController _internalSetTargetPath:withViewStyle:] + 615 12 FinderKit 0x00007fff89ebceb2 -[FIFinderViewGutsController setTargetNode:withViewStyle:] + 523 13 查找器套件
> 0x00007fff89ebe584 - [FIFinderViewGutsController deferredRetargetAndReloadForNode：] + 381 14 FinderKit
> 0x00007fff89ebe957 - [FIFinderViewGutsController urlResolutionCompleted：] + 158 15的CoreFoundation
> 0x00007fff82db9eda _CFXNotificationPost + 2554 16基金会
> 0x00007fff85880e26 - [NSNotificationCenter postNotificationName：对象：USERINFO：] + 64 17基金会
> 0x00007fff858cad3a __NSThreadPerformPerform + 225 18的CoreFoundation 0x00007fff82d86b31 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION** + 17 19 CoreFoundation 0x00007fff82d86455 __CFRunLoopDoSources0 + 245 20 CoreFoundation 0x00007fff82da97f5 __CFRunLoopRun + 789 21 CoreFoundation
> 0x00007fff82da90e2 CFRunLoopRunSpecific + 290 22使HIToolbox
> 0x00007fff81f41eb4 RunCurrentEventLoopInMode + 209 23使HIToolbox
> 0x00007fff81f41c52 ReceiveNextEventCommon + 356 24使HIToolbox
> 0x00007fff81f41ae3 BlockUntilNextEventMatchingListInMode + 62 25了AppKit 0x00007fff81009563 _DPSNextEvent + 685 26了AppKit 0x00007fff81008e22 - [的NSApplication nextEventMatchingMask：untilDate：inMode：出队：] + 128 27了AppKit 0x00007fff810001d3 - [ NSApplication 运行] + 517 28 AppKit 0x00007fff80fa4c06 NSApplicationMain + 869 29 JsonAnalyzer
> 0x000000010000ce82 main + 34 30 JsonAnalyzer
> 0x0000000100001604 开始 + 52 31 ???
> 0x0000000000000003 0x0 + 3)

错误 3：

> 2013-03-24 11:50:13.096 程序 [8369:6b0b] *** 断言失败 -[FI_TSidebarView _expandItemEntry:expandChildren:startLevel:], /SourceCache/AppKit/AppKit-1187.37/TableView.subproj/NSOutlineView.m:1309 2013 -03-24 11:50:13.097 Program[8369:6b0b] 引发了未捕获的异常 2013-03-24 11:50:13.098 Program[8369:6b0b] (null) 不应该已经扩展！2013-03-24 11：50：13.106计划[8369：6B0B]（0
> Corefoundation 0x00007FFF82E07B06 __ExceptionProcess + 198 1 Libobjc.a.Dylib 0x00007FFF89B493F0 Objc_exception_Throw + 43 2
> Corefoundation 0x00007FFF82E07948 + [NSException Reading：Format：Arguments：] + 104 3
> 基础0x00007fff85844c82 - [NSAssertionHandler handleFailureInMethod：对象：文件：LINENUMBER：描述：] + 189 4
> 了AppKit 0x00007fff81158900 - [NSOutlineView _expandItemEntry：expandChildren：STARTLEVEL：] + 1153 5了AppKit 0x00007fff8113eb92 - [NSOutlineView _uncachedNumberOfRows] + 379 6
> 了AppKit 0x00007fff8113e9c8 - [NSTableView的_totalHeightOfTableView ] + 187 7 AppKit 0x00007fff8113e798 -[NSTableView _minimumFrameSize] + 74 8 AppKit
> 0x00007fff8109f0e1 -[NSClipView _minimumFrameSize] + 36 9 AppKit
> 0x00007fff8109e44e -[NSScrollView tile] + 1883 10AppKit
> 0x00007fff8109dc56 - [NSScrollView _tileWithoutRecursing] + 49 11了AppKit 0x00007fff810a0b89 - [NSScrollView reflectScrolledClipView：] + 879 12了AppKit
> 0x00007fff810324eb - [NSClipView _selfBoundsChanged] + 689 13了AppKit 0x00007fff810a4a76 - [NSClipView setBoundsSize：] + 59 14了AppKit
> 0x00007fff810a4915 - [的NSView的setBounds：] + 153 15 应用套件
> 0x00007fff810a47f1 - [NSScrollView viewDidChangeBackingProperties] + 173 16了AppKit 0x00007fff815cef69 - [的NSView（NSInternal）_recursiveSendViewDidChangeBackingPropertiesFrom：toScaleFactor：色空间：invokingForSurfacePropertiesChange：alreadyUpdatedSurfaceProperties：] + 1206 17了AppKit 0x00007fff815cf020 - [的NSView（NSInternal）_recursiveSendViewDidChangeBackingPropertiesFrom：toScaleFactor：色空间：invokingForSurfacePropertiesChange：alreadyUpdatedSurfaceProperties：] + 1389 18 AppKit 0x00007fff815cf020-[NSView(NSInternal)_recursiveSendViewDidChangeBackingPropertiesFrom:toScaleFactor:colorSpace:invokingForSurfacePropertiesChange:alreadyUpdatedSurfaceProperties:] + 1389 19了AppKit 0x00007fff815cf020 - [的NSView（NSInternal）_recursiveSendViewDidChangeBackingPropertiesFrom：toScaleFactor：色空间：invokingForSurfacePropertiesChange：alreadyUpdatedSurfaceProperties：] + 1389 20了AppKit 0x00007fff815cf020 - [的NSView（NSInternal）_recursiveSendViewDidChangeBackingPropertiesFrom：toScaleFactor：色空间：invokingForSurfacePropertiesChange：alreadyUpdatedSurfaceProperties：] + 1389 21了AppKit 0x00007fff815cf020 -[NSView(NSInternal) _recursiveSendViewDidChangeBackingPropertiesFrom:toScaleFactor:colorSpace:invokingForSurfacePropertiesChange:alreadyUpdatedSurfaceProperties:] + 1389 22 AppKit 0x00007fff815cf020 -[NSView(NSInternal)_recursiveSendViewDidChangeBackingPropertiesFrom:toScaleFactor:colorSpace:invokingForSurfacePropertiesChange:alreadyUpdatedSurfaceProperties:] + 1389 23 AppKit 0x00007fff80fdd001 -[NSView addSubview:] + 1777 24 AppKit 0x00007fff80f1962a -[NSBox setContentView:] + 81 25 AppKit
> 0x00007fff80f18be0 - [NSSavePanel（NSSavePanelLayout）_layoutViewsVerticallyAndResizeWindowToLastExpandedSize：accessoryViewHeight：] + 4370 26了AppKit 0x00007fff80f14a8b - [NSSavePanel _initPanelCommon] + 484 27了AppKit 0x00007fff80f0f490 - [NSSavePanel initWithContentRect：styleMask：背衬：延迟：] + 334 28了AppKit
> 0x00007fff80f0d1f7 + [NSSavePanel _crunchyRawUnbonedPanel] + 187 29 jsonanalyzer 0x00000001000226d1 - [OpenFile Openfile] + 49 30 JSonanalyzer
> 0x0000000100002266 - [AppController OpenMethod] + 182 31
> Fourction 0x00007FF858CDCD2 __nsthread__main__ + 1345 32 libsystem_c.dylib
> 0x00007fff845f67a2 _pthread_start + 327 33 libsystem_c.dylib
> 0x00007fff845e31e1 thread_start + 13 ) 2013-03-24 11:50:13.109 Program[8369:6b0b] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“（null）不应该已经扩展！” ***第一掷调用堆栈：（0的CoreFoundation 0x00007fff82e07b06 **exceptionPreprocess + 198 1 libobjc.A.dylib
> 0x00007fff89b493f0 objc_exception_throw + 43 2的CoreFoundation
> 0x00007fff82e07948 + [NSException提高：格式：参数：] + 104 3
> 基金会0x00007fff85844c82 - [NSAssertionHandler handleFailureInMethod：对象：文件：行号：描述：] + 189 4
> 了AppKit 0x00007fff81158900 - [NSOutlineView _expandItemEntry：expandChildren：STARTLEVEL：] + 1153 5了AppKit 0x00007fff8113eb92 - [NSOutlineView _uncachedNumberOfRows] + 379 6
> 了AppKit 0x00007fff8113e9c8 - [NSTableView的_totalHeightOfTableView] + 187 7了AppKit 0x00007fff8113e798 - [NSTableView的_minimumFrameSize] + 74 8了AppKit
> 0x00007fff8109f0e1 - [NSClipView _minimumFrameSize] + 36 9 AppKit
> 0x00007fff8109e44e -[NSScrollView 磁贴] + 1883 10 AppKit
> 0x00007fff8109dc56 -[NSScrollView _tileWithoutRecursing] + 49 11 AppKit 0x00007fff810a0b89 -[NSScrollView reflectScrolledClipView:]
> 0x00007fff810324eb -[NSClipView _selfBoundsChanged] + 689 13 AppKit 0x00007fff810a4a76 -[NSClipView setBoundsSize:] + 59 14 AppKit
> 0x00007fff810a4915 -[NSView setBounds:] + 153 15 AppKit
> 0x00007fff810a47f1 - [NSScrollView viewDidChangeBackingProperties] + 173 16了AppKit 0x00007fff815cef69 - [的NSView（NSInternal）_recursiveSendViewDidChangeBackingPropertiesFrom：toScaleFactor：色空间：invokingForSurfacePropertiesChange：alreadyUpdatedSurfaceProperties：] + 1206 17了AppKit 0x00007fff815cf020 - [的NSView（NSInternal）_recursiveSendViewDidChangeBackingPropertiesFrom：toScaleFactor：色空间：invokingForSurfacePropertiesChange：alreadyUpdatedSurfaceProperties：] + 1389 18 AppKit 0x00007fff815cf020-[NSView(NSInternal)_recursiveSendViewDidChangeBackingPropertiesFrom:toScaleFactor:colorSpace:invokingForSurfacePropertiesChange:alreadyUpdatedSurfaceProperties:] + 1389 19了AppKit 0x00007fff815cf020 - [的NSView（NSInternal）_recursiveSendViewDidChangeBackingPropertiesFrom：toScaleFactor：色空间：invokingForSurfacePropertiesChange：alreadyUpdatedSurfaceProperties：] + 1389 20了AppKit 0x00007fff815cf020 - [的NSView（NSInternal）_recursiveSendViewDidChangeBackingPropertiesFrom：toScaleFactor：色空间：invokingForSurfacePropertiesChange：alreadyUpdatedSurfaceProperties：] + 1389 21了AppKit 0x00007fff815cf020 -[NSView(NSInternal) _recursiveSendViewDidChangeBackingPropertiesFrom:toScaleFactor:colorSpace:invokingForSurfacePropertiesChange:alreadyUpdatedSurfaceProperties:] + 1389 22 AppKit 0x00007fff815cf020 -[NSView(NSInternal)_recursiveSendViewDidChangeBackingPropertiesFrom:toScaleFactor:colorSpace:invokingForSurfacePropertiesChange:alreadyUpdatedSurfaceProperties:] + 1389 23 AppKit 0x00007fff80fdd001 -[NSView addSubview:] + 1777 24 AppKit 0x00007fff80f1962a -[NSBox setContentView:] + 81 25 AppKit
> 0x00007fff80f18be0 - [NSSavePanel（NSSavePanelLayout）_layoutViewsVerticallyAndResizeWindowToLastExpandedSize：accessoryViewHeight：] + 4370 26了AppKit 0x00007fff80f14a8b - [NSSavePanel _initPanelCommon] + 484 27了AppKit 0x00007fff80f0f490 - [NSSavePanel initWithContentRect：styleMask：背衬：延迟：] + 334 28了AppKit
> 0x00007fff80f0d1f7 + [NSSavePanel _crunchyRawUnbonedPanel] + 187 29 jsonanalyzer 0x00000001000226d1 - [OpenFile Openfile] + 49 30 JSonanalyzer
> 0x0000000100002266 - [AppController OpenMethod] + 182 31
> Fourcite 0x00007FF858CDCD2 __nsthread__main** + 1345 32 libsystem_c.dylib
> 0x00007fff845f67a2 _pthread_start + 327 libsystem_c.dylib
> 0x00007fff845e31e1 thread_start + 13）libc++abi.dylib：终止调用抛出异常（lldb）

错误 4：

> 2013-03-24 12:07:53.299 程序 [9024:6d0b] 引发未捕获的异常 2013-03-24 12:07:53.301 程序 [9024:6d0b] endUpdates 调用时没有 beginUpdates 2013-03-24 12:07 ：53.309程序[9024：6d0b]（0的CoreFoundation 0x00007fff82e07b06 **exceptionPreprocess + 198 1点libobjc.A.dylib 0x00007fff89b493f0 objc_exception_throw + 43 2了AppKit
> 0x00007fff8118421b - [NSTableRowData endUpdates] + 205 3
> 的CoreFoundation 0x00007fff82db9eda _CFXNotificationPost + 2554 4基金会0x00007fff85880e26 - [NSNotificationCenter postNotificationName：对象:userInfo:] + 64 5 AppKit
> 0x00007fff80ff216e -[NSView _postFrameChangeNotification] + 259 6
> 了AppKit 0x00007fff80fdc843 - [的NSView setFrameSize：] + 1352 7了AppKit
> 0x00007fff81031cb1 - [NSClipView setFrameSize：] + 394 8了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 9了AppKit
> 0x00007fff8109fa2f - [NSScrollView _setContentViewFrame：] + 596 10了AppKit 0x00007fff8109e43a - [NSScrollView瓦] + 1863 11了AppKit
> 0x00007fff8109dc56 - [NSScrollView _tileWithoutRecursing] + 49 12了AppKit 0x00007fff8109dbda - [NSScrollView _Update] + 30 13了AppKit 0x00007fff80fdc748 - [的NSView setFrameSize：] + 1101 14了AppKit
> 0x00007fff810a2e7c - [NSScrollView setFrameSize：] + 1131 15了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 16了AppKit
> 0x00007fff810311f2 - [的NSView resizeWithOldSuperviewSize：] + 1502 17了AppKit 0x00007fff81030337 - [的NSView resizeSubviewsWithOldSize：] + 318 18了AppKit
> 0x00007fff80fdc748 - [的NSView setFrameSize：] + 1101 19了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME： ] + 299 20 FinderKit
> 0x00007fff89ec91aa - [FI_TSidebarSplitterController SPLITVIEW：resizeSubviewsWithOldSize：] + 1232 21了AppKit
> 0x00007fff811fdc70 - [NSSplitView resizeSubviewsWithOldSize：] + 717 22了AppKit 0x00007fff80fdc748 - [的NSView setFrameSize：] + 1101 23了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 24应用套件
> 0x00007fff810311f2 - [的NSView resizeWithOldSuperviewSize：] + 1502 25了AppKit 0x00007fff81030337 - [的NSView resizeSubviewsWithOldSize：] + 318 26了AppKit
> 0x00007fff80fdc748 - [的NSView setFrameSize：] + 1101 27了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 28了AppKit
> 0x00007fff810311f2 - [的NSView resizeWithOldSuperviewSize： ] + 1502 29 AppKit 0x00007fff81030337 -[NSView resizeSubviewsWithOldSize:] + 318 30 AppKit
> 0x00007fff80fdc748 -[NSView setFrameSize:] + 1101 31 AppKit
> 0x00007fff80fdbf8e -[NSView setFrame:] + AppKit 299 3
> 0x00007fff810311f2 - [的NSView resizeWithOldSuperviewSize：] + 1502 33了AppKit 0x00007fff81030337 - [的NSView resizeSubviewsWithOldSize：] + 318 34了AppKit
> 0x00007fff80fdc748 - [的NSView setFrameSize：] + 1101 35了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 36了AppKit
> 0x00007fff80f13bea - [NSNavFinderViewFileBrowser setFrameSize： ] + 152 37 AppKit 0x00007fff80fdbf8e -[NSView setFrame:] + 299 38 AppKit
> 0x00007fff81118692 -[NSBox _tile:] + 243 39 AppKit
> 0x00007fff80f1964b -[NSBox setContentView:] + 114 40 AppKit
> 0x00007fff80f18be0 - [NSSavePanel（NSSavePanelLayout）_layoutViewsVerticallyAndResizeWindowToLastExpandedSize：accessoryViewHeight：] + 4370 41了AppKit 0x00007fff80f14a8b - [NSSavePanel _initPanelCommon] + 484 42了AppKit 0x00007fff80f0f490 - [NSSavePanel initWithContentRect：styleMask：背衬：延迟：] + 334 43了AppKit
> 0x00007fff80f0d1f7 + [NSSavePanel _crunchyRawUnbonedPanel] + 187 44 jsonanalyzer 0x00000001000226d1 - [Openfile Openfile] + 49 45 jsonanalyzer
> 0x0000000100002266 - [AppController OpenMethod] + 182 46 Foundation
> 0x00007FFF858CDCD2 __nsthread__main** + 1345 47 Libsystem_C.Dylib
> 0x00007FFF845F67A2 _Pthread_start + 327 48 LibSystem_C.Dylib
> 0x00007fff845e31e1 thread_start + 13 ) 2013-03-24 12:07:53.315 程序 [9024:6d0b] *** 由于未捕获的异常“NSTableViewException”而终止应用程序，原因：“没有 beginUpdates 调用的 endUpdates”***第一次抛出调用堆栈：( 0 CoreFoundation 0x00007fff82e07b06 **exceptionPreprocess + 198 1 libobjc.A.dylib
> 0x00007fff89b493f0 objc_exception_throw + 43 2了AppKit
> 0x00007fff8118421b - [NSTableRowData endUpdates] + 205 3
> 的CoreFoundation 0x00007fff82db9eda _CFXNotificationPost + 2554 4基金会0x00007fff85880e26 - [NSNotificationCenter postNotificationName：对象：USERINFO：] + 64 5 AppKit的
> 0x00007fff80ff216e - [的NSView _postFrameChangeNotification] + 259 6
> 了AppKit 0x00007fff80fdc843 - [的NSView setFrameSize：] + 1352 7了AppKit
> 0x00007fff81031cb1 - [NSClipView setFrameSize：] + 394 8了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 9了AppKit
> 0x00007fff8109fa2f - [NSScrollView _setContentViewFrame：] + 596 10 Appkit 0x00007FFF8109E43A - [NSScrollView Tile] + 1863 11 AppKit
> 0x00007FFF8109DC56 - [NSScrollView _TileWithoutRecursing] + 49 12 AppKit 0x00007FFF8109DBDA - [NSScrollView _Update] + 30 13 AppKit 0x00007FFF80FDC748 - [NSView SetFramesize：] + 1101 14 AppKit
> 0x00007fff810a2e7c - [NSScrollView setFrameSize：] + 1131 15了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 16了AppKit
> 0x00007fff810311f2 - [的NSView resizeWithOldSuperviewSize：] + 1502 17了AppKit 0x00007fff81030337 - [的NSView resizeSubviewsWithOldSize：] + 318 18了AppKit
> 0x00007fff80fdc748 - [的NSView setFrameSize： ] + 1101 19了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 20 FinderKit
> 0x00007fff89ec91aa - [FI_TSidebarSplitterController SPLITVIEW：resizeSubviewsWithOldSize：] + 1232 21了AppKit
> 0x00007fff811fdc70 - [NSSplitView resizeSubviewsWithOldSize：] + 717 22了AppKit 0x00007fff80fdc748 - [的NSView setFrameSize：] + 1101 23应用套件
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 24了AppKit
> 0x00007fff810311f2 - [的NSView resizeWithOldSuperviewSize：] + 1502 25了AppKit 0x00007fff81030337 - [的NSView resizeSubviewsWithOldSize：] + 318 26了AppKit
> 0x00007fff80fdc748 - [的NSView setFrameSize：] + 1101 27了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME： ] + 299 28 AppKit
> 0x00007FFF810311F2 - [NSView ResizeWithOldSuperViewSize：] + 1502 29 AppKit 0x00007FFF81030337 - [NSView ResizativeUbViewSwitholdsize：] + 318 30
> Appkit 0x00007FFF80FDC748 - [NSView SetFramesize：] + 1101 31 AppKit
> 0x00007FFF80FDBF8E - [NSView SetFrame：] + 299 32 AppKit
> 0x00007fff810311f2 - [的NSView resizeWithOldSuperviewSize：] + 1502 33了AppKit 0x00007fff81030337 - [的NSView resizeSubviewsWithOldSize：] + 318 34了AppKit
> 0x00007fff80fdc748 - [的NSView setFrameSize：] + 1101 35了AppKit
> 0x00007fff80fdbf8e - [的NSView SETFRAME：] + 299 36了AppKit
> 0x00007fff80f13bea - [NSNavFinderViewFileBrowser setFrameSize： ] + 152 37 AppKit 0x00007fff80fdbf8e -[NSView setFrame:] + 299 38 AppKit
> 0x00007fff81118692 -[NSBox _tile:] + 243 39 AppKit
> 0x00007fff80f1964b -[NSBox setContentView:] + 114 40 AppKit
> 0x00007fff80f18be0 - [NSSavePanel（NSSavePanelLayout）_layoutViewsVerticallyAndResizeWindowToLastExpandedSize：accessoryViewHeight：] + 4370 41了AppKit 0x00007fff80f14a8b - [NSSavePanel _initPanelCommon] + 484 42了AppKit 0x00007fff80f0f490 - [NSSavePanel initWithContentRect：styleMask：背衬：延迟：] + 334 43了AppKit
> 0x00007fff80f0d1f7 + [NSSavePanel _crunchyRawUnbonedPanel] + 187 44 jsonanalyzer 0x00000001000226d1 - [Openfile Openfile] + 49 45 jsonanalyzer
> 0x0000000100002266 - [AppController OpenMethod] + 182 46 Foundation
> 0x00007FFF858CDCD2 __nsthread__main** + 1345 47 Libsystem_C.Dylib
> 0x00007FFF845F67A2 _Pthread_start + 327 48 LibSystem_C.Dylib
> 0x00007fff845e31e1 thread_start + 13）libc++abi.dylib：终止调用抛出异常（lldb）

错误 5：

> 2013-03-24 12:07:01.791 程序[8985:303] *** -[__NSDictionaryI countByEnumeratingWithState:objects:count:]: 消息发送到已释放实例 0x106b80490 (lldb)

错误6：

> 2013-03-24 12:13:05.343 程序 [9236:6d0b] 启动 objc [9236]：类 _NSZombie_NSIBUserDefinedRuntimeAttributesConnector 在两者中都实现？和 ？？。将使用两者之一。哪一个是未定义的。2013-03-24 12:13:05.580 程序 [9236:6d0b] *** -[__NSDictionaryM 计数]：发送到已释放实例 0x106b70080 (lldb) 的消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:45:06.583

这几乎可以肯定是您的内存管理错误。无论您希望指向您向其发送 -openFirstFile: 消息的对象的任何指针都不再存在，因为该对象已被释放，而另一个对象现在位于其地址 - 您不应该触摸的地址，因为它不再属于您的应用程序。

使用仪器（僵尸仪器）来追踪错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:50:48.907

这里的关键很可能在第一行：`-[NSMallocBlock openFirstFile:]`. 在这种情况下，很明显`-openFirstFile:`消息正在从响应者发送到预期是其他东西但已被重用的块。

根据`-[NSControl sendAction:to:]`堆栈跟踪的后面部分，这是响应某些操作（可能单击标准文件窗口中的“打开”按钮）而发生的。

在这种情况下，似乎某个 IBOutlet 的委托正在指向某些东西并正在被释放。

我会考虑使用 Zombies（在 Instruments 中，或者只是在正常运行时通过`Enable Zombie Objects`在 Scheme 的 Run 区域的 Diagnostics 部分中使用它们来启用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T23:26:15.227

对于那些在 tableview 上查看错误 4 的“没有 beginUpdates 调用的 endUpdates”的人，这可能是由于在主线程之外发生的视图更新（例如 [tableview reloadData] 调用）。

有关更多信息，请参阅此类似问题：[NSArrayController 重新排列对象错误](https://stackoverflow.com/questions/12094894/nsarraycontroller-rearrangeobjects-error)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-23T17:30:37.513

错误的访问错误通常发生在您试图到达范围之外的东西时，即 8 数组中 7 的位置。您确定不是这种情况吗？这将是我的第一个检查点，确保您不超过限制:)

# android - 在 Zxing 中为 QR 码定制相机视图和旋转？

> ID：15589379
> 
> 赞同：9
> 
> 时间：2013-03-23T16:48:51.277
> 
> 标签：android, qr-code, zxing

我正在使用这样一个很棒的库 zxing 来读取 QR 码。我已经成功获取了二维码。

现在，我的应用程序以横向模式运行，相机占据整个屏幕，红色 QR 检测矩形框位于中间。我想将其更改为纵向模式并仅用红色 QR 检测矩形框替换相机视图。

我更改了 zxing 库清单文件中的 CaptureActivity 标记。

`android:screenOrientation="portrait"`.

但没有找到我真正想要的东西。我不知道我必须在哪里更改/编写代码才能得到这个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T23:14:59.410

首先，请不要完全复制我们的应用程序。在这种情况下，无论如何您都需要编写自己的应用程序；这绝对不是改变布局方向那么简单。不仅 UI 不是为肖像而编写的，应用程序代码也不是。

如果您只想使用*固定*人像模式，那么这并不难。完全支持所有 4 个旋转，带有前置/后置摄像头，很难做到正确。但不仅仅是1个案例。

首先，您需要设计一个纵向模式的 UI。（请不要复制红线设计。）

实际的应用程序代码不关心 QR 码的方向。你根本不需要在那里做任何事情。但是您确实需要进行更改才能正确显示屏幕。

您将需要查询`Camera.getOrientation()`以检测相机的安装方式。通常情况下，“向上”在您的右侧，我认为几乎每个设备都以这种方式工作以实现兼容性。但从技术上讲，您需要知道如何旋转预览图像。

然后，您`Camera.setDisplayOrientation()`可以告诉它旋转图像的程度，以使其在纵向模式屏幕上正确旋转。这通常是“90”。

最后，您需要选择预览尺寸，`Camera.Parameters.setPreviewSize()`但可能需要翻转您选择的值（480x800 vs 800x480），因为您是纵向的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T13:48:06.177

我遇到了同样的问题，并且被卡住了大约 2 天。实际上，您必须完成一些任务才能实现目标。

1.  下载 Zxing 库以读取二维码..（希望你已经拥有）
2.  创建一个项目并添加 Zxing 库。
3.  您的 main.xml 文件应如下所示：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <FrameLayout
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:layout_gravity="center_horizontal">
        <include layout="@layout/capture"/>
    </FrameLayout>

    </LinearLayout> 
    ```

4.  您的主要活动应如下所示：

    ```
     public class ScannerActivity extends CaptureActivity {

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

            }

            @Override 
            public void handleDecode(Result rawResult, Bitmap barcode) 
            {
       Toast.makeText(this.getApplicationContext(), "Scanned code " + rawResult.getText(), Toast.LENGTH_LONG).show();
            }
        } 
    ```

5.  在清单文件中添加以下权限：

    ```
     <uses-permission android:name="android.permission.CAMERA"/> 
    ```

6.  最后是非常重要的任务，您需要为相机旋转问题做，将以下方法替换为

CameraManager.java（在 com.google.zxing.client.android.camera 包中）

```
@SuppressLint("NewApi") public void startPreview() {
    Camera theCamera = camera;
    if (theCamera != null && !previewing) {
        theCamera.setDisplayOrientation(90);
      theCamera.startPreview();
      previewing = true;
    }
  } 
```

就这样 。跑步和享受:-)

谢谢..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T20:00:41.797

出于同样的原因，我从这个图书馆获得了非常糟糕的经历。似乎即使您成功以纵向模式显示相机，它也会被拉伸（或者输出图像会被拉伸，或者无法感应到条形码，或者某些设备可以正常工作而其他设备没有）。

我怀疑Android只是“喜欢”相机预览处于横向模式，因为这是用户拍照时的自然方向。

最后，我所做的是使用横向模式并旋转其他所有内容，因此用户认为这是纵向模式，但事实并非如此。我认为许多应用程序都使用这种技术。

我建议，如果您设法解决了这个问题，请在尽可能多的设备上进行测试。

# c - 从c中的字符串中删除标点符号和空格？

> ID：15589382
> 
> 赞同：0
> 
> 时间：2013-03-23T16:49:09.570
> 
> 标签：c, arrays, string, input, getchar

这是学校的家庭作业。我不是要求正确的答案，只是朝着正确的方向前进。关于为什么会出错的解释以及对正确方法的解释会很好。这个 C 程序应该做的是在没有空格和标点符号的情况下读取用户输入并将其分配给字符数组字符串。然后应该将该数组传递给函数回文。回文应该是字符串的长度，如果等于 1 或 0，则返回 TRUE 或 1，否则继续检查字符串的第一个和最后一个字符。如果它们匹配，则检索倒数第二个和第二个字符，以及它们之间的所有字符，并将其传递给函数 palindrome。

```
#include<stdio.h>
#include<ctype.h>
#include<string.h>

#define TRUE 1
#define FALSE 0
typedef int Bool;

Bool palindrome(char str[]);
main()
{
char string[1000], ch;
int i = 0;

printf("Enter a message: ");
while((ch = getchar()) != '\n'){
  if(isspace(ch)==FALSE || ispunct(ch)==FALSE);
    string[i] = tolower(ch);
    i++;
}

string[i] = '\0';

printf("\n");
if(palindrome(string))
  printf("Palindrome\n");
else
  printf("Not a palindrome\n);

return 0;
}

Bool palindrome(char str[])
{
   int length = strlen(str);
   if((length == 1) || (length == 0))
     return TRUE;
   else
   {
     if((str[0] == str[length - 1])
       {
         char str_new[length-1];
         int i, j;
         for(i = 1, j = 0; str[i]!=str[length-1]; i++, j++)
           str_new[j] = str[i];

         str_new[i] = '\0';
         palindrome(str_new);
       }
       else
         return FALSE;

   }
} 
```

不管输入是什么，它总是打印给定的字符串不是回文。例如当我输入

> 他像魔鬼一样生活，嗯？

它打印出来

> 不是回文

此外，当我编辑程序以使用先前的输入检查数组字符串中的内容时，它是

> 他像魔鬼一样生活，嗯？

如果您看到代码使用改进，请随意评论我的代码的任何其他方面。他们真的不提供任何东西，除了“是”它是正确的或“不是”它与我们的代码无关。

编辑：
我确实检查了 char 数组字符串中的值是什么。我在最后一个引用之前说这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:51:56.333

看看这里...

```
while((ch = getchar()) != '\n'){
  if(isspace(ch)==FALSE || ispunct(ch)==FALSE);
    string[i] = tolower(ch);
    i++;
} 
```

注意';' 在 if 语句的末尾。那 ';' 导致 string[i] = tolower(ch) 始终执行。另外，您的逻辑不正确，如果字符不是空格并且不是标点符号，您希望代码执行。

此外，注意你的缩进。i++ 也应该在 if 语句中，但是它周围没有大括号。因此，即使您确实删除了 ';'，i++ 仍将始终执行。所以...

```
while((ch = getchar()) != '\n'){
  if(isspace(ch)==FALSE && ispunct(ch)==FALSE)
  {
    string[i] = tolower(ch);
    i++;
  }
} 
```

或者……甚至更好……

```
while((ch = getchar()) != '\n'){
  if(isspace(ch)==FALSE && ispunct(ch)==FALSE)
    string[i++] = tolower(ch);
} 
```

样式注释也是如此……为了维护和可读性，从函数中设置一个退出点通常是个好主意。其他人可能会有不同的看法，但这是我在过去 30 年从事国防部工作时所遵循的硬性规定。看看这个可读性，看看它是否对你更有意义。

```
Bool palindrome(char str[])
{
   Bool result = TRUE;
   int length = strlen(str);

   if( length > 1 && str[0] == str[length-1] )
   {
     char str_new[length-1];
     int i, j;

     for(i = 1, j = 0; str[i]!=str[length-1]; i++, j++)
        str_new[j] = str[i];

     str_new[i] = '\0';
     result = palindrome(str_new);
   }

   return result;
} 
```

最后...从效率的角度来看，您可以轻松地对其进行索引，而不是复制字符串...

```
Bool palindrome(char str[])
{
    Bool result = TRUE;
    int length = strlen(str);

    if( length > 1 && str[0] == str[length-1] )
    {
       str[length-1] = '\0';
       result = palindrome(&str[1]);
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T16:53:20.317

```
if(isspace(ch)==FALSE || ispunct(ch)==FALSE); 
```

这是你的错误。首先，结尾不应有分号 ( `;`)。

其次，您不应该使用 OR，而应该使用 AND，因为您要确保过滤除字母表之外的所有内容：

```
if(isspace(ch)==FALSE && ispunct(ch)==FALSE) 
```

还：

```
for(i = 1, j = 0; str[i]!=str[length-1]; i++, j++) 
```

在这里，布尔表达式是错误的。您应该评估`j`：

```
for(i = 1, j = 0; j < length - 1; i++, j++) 
```

最后，`i++`当您将字符附加到新字符串时，您对语句的定位是不正确的。将其隔开，以便编译器知道它需要成为 while 循环体的一部分并且位于 if 块之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:58:40.400

一些明显的点：

*   问题中的代码无法编译。
*   您的主要声明不标准。
*   该`if`语句在行尾有一个错误的分号。
*   if 语句中的逻辑不正确。逻辑或测试将始终评估为真，因为字符不能同时是空格和标点符号。
*   您的回文检查功能远比它需要的复杂。

要做的关键改变是你的`if`陈述应该是这样的：

```
if (!isspace(ch) && !ispunct(ch)) 
```

一个完整的工作程序如下所示：

```
#include<stdio.h>
#include<string.h>

#define TRUE 1
#define FALSE 0
typedef int Bool;

Bool palindrome(char str[]);

int main(void)
{
    char string[1000], ch;
    int i = 0;

    printf("Enter a message: ");
    while((ch = getchar()) != '\n'){
        if (!isspace(ch) && !ispunct(ch))
        {
            string[i] = tolower(ch);
            i++;
        }
    }

    string[i] = '\0';
    printf("string = %s\n", string);
    if(palindrome(string))
        printf("Palindrome\n");
    else
        printf("Not a palindrome\n");

    return 0;
}

Bool palindrome(char str[])
{
   int left = 0;
   int right = strlen(str)-1;
   while (left<right)
   {
       if(str[left] != str[right])
           return FALSE;
       left++;
       right--;
   }
   return TRUE;
} 
```

这是输出：

```
输入一条消息：他像魔鬼一样生活，嗯？
字符串 = helivedasadevileh
回文

```

# c++ - Qt 中的共享库

> ID：15589385
> 
> 赞同：0
> 
> 时间：2013-03-23T16:49:18.543
> 
> 标签：c++, qt, shared-libraries

基本上我想做的是以下几点：

我有一个`Core.cpp`加载共享库（SDL 库、Ncurses 库和 Qt 库）...

这是`main`：

```
 int main(int argc, char **argv, char **env)
  {
     Core                  *core;
     LibGestionnary        gestionnary;
     IDisplay              *display;
     display = gestionnary.loadLibFromName(std::string(argv[3]));
     display->Boucle(core);
  } 
```

这是 DisplaySDL、DisplayNcurses 和 DisplayQT 继承的接口：

```
#ifndef IDISPLAY_HH__
# define IDISPLAY_HH__

#include "../Core/Core.hh"

class IDisplay
{
public:
  virtual ~IDisplay() { }
  // virtual void dispSnake(Snake snake) = 0;                                   
  // virtual void dispBlock(Block block) = 0;                                   
  // virtual void dispMap(Map map) = 0;                                         
  virtual void Boucle(Core *core) = 0;
  virtual void displayEnd(Core *core) = 0;
};

#endif 
```

我可以轻松加载我的`libsdl.so`and `libndk.so`，并且一切正常。问题是，Qt 需要`argc`并且`argv`为了创建`QApplication`.

我怎么能做到这一点，知道我无权访问`argv`和`argc`在我的共享库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:57:50.947

`QApplication`需要`argc`并`argv`寻找特定于 Qt 的选项，并确定应用程序路径。如果您不想从真实命令行解析这些选项，您可以构建自己的`argc`并`argv`传递给`QApplication`构造函数。

# visual-studio-2010 - NUnit 测试用例输入问题

> ID：15589386
> 
> 赞同：0
> 
> 时间：2013-03-23T16:49:18.870
> 
> 标签：visual-studio-2010, c#-4.0, nunit

我的代码从文件中获取输入。如果我必须为它编写 NUnit 测试用例，我是否必须更改我的代码并从测试用例而不是文件中获取输入，或者我是否有可能不必更改我的代码。？

请帮忙。

下面给出的是我必须测试的功能之一。

```
 public void CLEAN_Discipline(string disp)
    {
        //////////////////////////////////////////////////////SQL CONNECTION////////////////////////////////////////////////

        string sqlconnectionString = "server=localhost;" + "database=fastdata;" + "uid=dwh;" + "password=dwh;";
        MySqlConnection cnMySQL = new MySqlConnection(sqlconnectionString);
        MySqlCommand cmdMySQL = cnMySQL.CreateCommand();
        cmdMySQL.CommandText = "Select * from single";
        MySqlDataReader reader;
        String query;
        MySqlCommand cmd2;
        cnMySQL.Open();
        reader = cmdMySQL.ExecuteReader(); 

        while (reader.Read())
        {
            string disp = reader["Discipline"].ToString();

            disp = disp.ToUpper();
            disp = disp.Replace("MS", "");
            disp = disp.Replace("-", "");
            disp = disp.Replace(" ", "");

            string roll = reader["RollNumber"].ToString();

            MySqlConnection cnMySQL2 = new MySqlConnection(sqlconnectionString);
            cnMySQL2.Open();
            query = "UPDATE single SET Discipline = ('" + disp + "')  where RollNumber = '" + roll + "' ";
            cmd2 = new MySqlCommand(query, cnMySQL2);
            cmd2.ExecuteNonQuery();
            cnMySQL2.Close();
        }
        cnMySQL.Close();

        cnMySQL.Open();
        reader = cmdMySQL.ExecuteReader();
        while (reader.Read())
        {
            string roll = reader["RollNumber"].ToString();
            string disp = reader["Discipline"].ToString();
            string degree = reader["Degree"].ToString();
            if (degree == "MS")
            {
                if (roll[0] == 'I')
                {
                    if (disp != "CS" && disp != "SPM" && disp != "")
                    {
                        disp = "UNKNOWN";
                    }
                }
                else if (roll[0] == 'K')
                {
                    if (disp != "CS" && disp != "SPM" && disp != "TC" && disp != "NW")
                    {
                        disp = "UNKNOWN";
                    }
                }
                else if (roll[0] == 'P')
                {
                    if (disp != "CS" && disp != "TC")
                    {
                        disp = "UNKNOWN";
                    }
                }
                else if (roll[0] == 'L')
                {
                    if (disp != "CS" && disp != "SPM" && disp != "TC" && disp != "NW")
                    {
                        disp = "UNKNOWN";
                    }
                }
            }
            if (disp == "UNKNOWN")
            {
                MySqlConnection cnMySQL2 = new MySqlConnection(sqlconnectionString);
                cnMySQL2.Open();
                query = "UPDATE single SET Discipline = ('" + disp + "')  where RollNumber = '" + roll + "' ";
                cmd2 = new MySqlCommand(query, cnMySQL2);
                cmd2.ExecuteNonQuery();
                cnMySQL2.Close();
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:56:04.997

我建议你将你的函数分解成更小的函数，这样你就可以只测试包含逻辑的部分。

在您的情况下，也许您应该提取替换要检查的字符串的各个方面的逻辑，并将其放入一个接受字符串的函数中。然后，您可以在没有所有其他依赖项（数据库读取和写入）的情况下测试该函数。

[Michael Feathers 的《有效使用遗留代码》](https://rads.stackoverflow.com/amzn/click/com/0131177052)是一个很好的资源，用于解释如何在代码中创建允许测试的接缝。

# php - 将 Aptana Studio 与 php 项目一起使用时出现语法错误

> ID：15589387
> 
> 赞同：1
> 
> 时间：2013-03-23T16:49:21.210
> 
> 标签：php, aptana

我正在尝试使用 Aptana 3 在 php 中打开一个工作项目，但我不断收到有关 [] 的错误消息。这是 aptana 抱怨的代码：

```
render("../templates/buy_search.php", ["title" => "Buy"] ); 
```

它正在抱怨打开 [ 并且它说语法错误。不知道为什么它会给出错误，因为该项目运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:50:19.873

```
render("../templates/buy_search.php", ["title" => "Buy"] ); 
```

应该

```
render("../templates/buy_search.php", array("title" => "Buy")); 
```

**适用于5.4**之前的所有 PHP 版本

# python - 无法使用 Python 套接字编程在计算机之间发送文件

> ID：15589392
> 
> 赞同：0
> 
> 时间：2013-03-23T16:50:12.197
> 
> 标签：python, sockets, file-io

我用 Python 编写了一个套接字编程代码。它应该能够在不同的计算机之间发送文件。我在同一台计算机上测试了我的代码（即通过从 2 个不同的文件夹发送文件）并且它可以工作。但是，当我尝试通过将文件从我的计算机发送到我朋友的计算机来测试代码时，我不断收到此错误：

```
 WindowsError: [Error 3] The system cannot find the path specified: 'C://Users//Admin//Desktop//SharedFiles/*.*' 
```

当我的 Python 程序尝试访问该`client_side_folder`变量时发生错误，如下所示：

```
client_side_folder = "C://Users//Admin//Desktop//SharedFiles" 
```

我还尝试将其替换`client_side_folder`为“C:/Users/Admin/Desktop/SharedFiles”和“C:\Users\Admin\Desktop\SharedFiles”。但是两者仍然有相同的错误。

这个错误是否与 Python 如何处理 Windows 地址有关？如果是这样，当我尝试将文件从 1 个文件夹发送到同一台计算机上的另一个文件夹时，它是如何工作的？有什么想法可以解决这个问题吗？

**编辑：**

代码在遇到以下代码时崩溃：

```
 def listOfFiles(directory): 
                list_dir = os.listdir(directory) 
                return list_dir 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:44:29.763

**问题**

正在破坏的代码是：

```
list_dir = os.listdir(directory) 
```

`directory`这意味着您的本地计算机中不存在指向的目录。

在您的代码中，您有

```
client_files = listOfFiles(client_side)
server_files = listOfFiles(server_side) 
```

这是行不通的。

如果不`os.listdir`使用类似`\\hostname\\path`.

当您在同一台机器上运行服务器和客户端时，它都指向本地机器。

**解决方案**

方法 1：停止尝试获取远程机器的列表，让该机器上运行的代码为您完成。

方法2：使用远程访问URL（共享文件夹什么的）来访问远程机器的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:03:32.863

您可能会发现通过 os.path 模块在 python 中处理路径更容易。例如，如果您想访问用户主目录中的文件：

```
from os.path import expanduser, join

userhome = expanduser( '~' )
desktop = join( userhome, 'Desktop' )
shared_dir = join( desktop, 'SharedFiles' )
file_list = os.listdir( shared_dir ) 
```

这也意味着执行脚本的用户对您尝试访问的任何路径都具有访问权限。

**附录 1**：

假设您使用的是 tcp 套接字，这是客户端和服务器的示例代码：

在您朋友的主机上运行的服务器：

```
import socket
serversocket = socket.socket( socket.AF_INET, socket.SOCK_STREAM )
serversocket.bind( ( 'localhost', 13000 ) )
serversocket.listen(5) # 5 is the number of client connections that can be queued
while 1:
    #accept connections from outside
    (clientsocket, address) = serversocket.accept()
    # processing of the incoming connection
    .... 
```

在您的主机上运行的客户端：

```
import socket
s = socket.socket( socket.AF_INET, socket.SOCK_STREAM )
s.connect( ( 'friendshost', 13000 ) )
s.send( .... ) 
```

# javascript - 更改窗口位置，然后等待窗口加载？

> ID：15589401
> 
> 赞同：3
> 
> 时间：2013-03-23T16:51:18.483
> 
> 标签：javascript, function

请耐心等待，我完全是 Javascript 的菜鸟：P。所以，我想做的是使用一个函数来加载一个网页。而且，在该功能完成后，我希望能够获取页面上某个元素的 HTML 代码。到目前为止，这是我的代码：

```
function change(){
    window.location = "www.aWebPage.com"
    window.onload = function() {
     return document.ID_HERE.outerHTML;
    }   
} 
```

无论出于何种原因，HTML 代码的返回都不起作用，但重定向可以。我是否正确地将值返回给函数？是否有另一种方法可以使用仅在重定向窗口后才执行的多个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:59:44.807

window.location 之后的代码将不会被执行，因为该文档不再存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T16:57:57.857

每个页面加载都会擦除所有以前的 JavaScript，所以你不能这样做。您最好的机会是使用 ajax 加载新页面*而不卸载当前*页面。但是，由于[安全限制](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)，这只有在两个页面都来自同一个域时才有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T16:58:25.830

这是因为一旦 javascript 读取 window.location 页面就会刷新，并且所有后续代码都不会执行。为了解决这个问题，我们使用哈希标签和查询字符串。例如，您可以将位置更改为 www.awebpage.com#id。然后使用 javascript 检测查询字符串中的“#id”并执行您的代码。我在下面写了一个示例：

```
function change(id){
    window.location = "www.aWebPage.com#id=" + id;
}

window.onload = function() {
    var hash = window.location.hash;
    if (hash.length > 0)
    {
    var id = hash.replace('#id=','');
    return document.id.outerHTML;
    }  
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-08T12:59:39.893

在 html 文件中编写脚本并在包含 jquery js 文件后添加它。

将以下代码保存在 js 文件中，例如-test.js

```
function change(id){
    window.location = "www.aWebPage.com#id=" + id;
} 
```

并在 html-

```
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="/test.js"></script>
<script>
      var hash = window.location.hash;
      if (hash.length > 0) {
      var id = hash.replace('#id=','');
      return document.id.outerHTML;
      }  
</script> 
```

# c++ - c++ 中有没有一种方法可以在不使用 windows api 的情况下使用按钮和滚动条制作自定义 gui？

> ID：15589404
> 
> 赞同：0
> 
> 时间：2013-03-23T16:51:31.283
> 
> 标签：c++, user-interface

我知道有像 QT、GTK 和 wxwidgets 这样的软件，但是有没有办法在不使用 c++ 中的 windows api 的情况下在 windows 上制作一个带有按钮的窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:53:55.463

使用 C++ 创建可视化表单包括：

*   工具包，例如 QT、GTK 或 wxWidgets，或
*   原生 OS API 的原始使用

如果你想在没有任何这些东西的情况下做到这一点，那么你基本上就不走运了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T16:57:33.083

是的，您也可以构建自己的 UI 解决方案，您可以使用它为您喜欢的软件制作 GUI（没什么大不了的！），除了上面提到的那些之外，还有很多其他选项可用，即

1.  Juce 图形库

2.  米桂

3.  SDL

4.  终极++

ETC

如果您分享您的标准和用例，我们可能会根据您的需要向您推荐更好的选择。

# java - 电子邮件中的 Itext PDF 附件

> ID：15589409
> 
> 赞同：2
> 
> 时间：2013-03-23T16:51:59.363
> 
> 标签：java, itext, jakarta-mail, attachment

我无法打开作为电子邮件附件发送的 PDF。PDF 是使用 iText 和 Flying Saucer 创建的，并使用 Java 中的 MimeMessage 发送。我很确定在尝试下载附件时存在编码问题，因为创建 PDF 时它看起来很好。只是当作为附件发送时，打开它时出现问题。例如，在 Chrome 中，它会发送“无法加载 PDF 文档”错误。它会在其他浏览器和 Adob​​e Reader 中发送类似的错误。谢谢。

```
//creates the pdf
        DocumentBuilder builder =  DocumentBuilderFactory.newInstance().newDocumentBuilder();
        byte[] bytes              = buf.toString().getBytes("iso-8859-1");
        ByteArrayInputStream baos = new ByteArrayInputStream(bytes);

        Document doc = builder.parse(baos);

        ITextRenderer renderer = new ITextRenderer();
        renderer.setDocument(doc, null);
        renderer.layout();
        OutputStream os = new ByteArrayOutputStream();
        os = response.getOutputStream();
        renderer.createPDF(os);
        os.close();

        //email
        MimeMessage msg = new MimeMessage(session);
        Multipart multipart = new MimeMultipart();
        MimeBodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText("This is a test");
        multipart.addBodyPart(messageBodyPart);

        messageBodyPart = new MimeBodyPart();
        //construct the pdf body part
        DataSource dataSource = new ByteArrayDataSource(bytes, "application/pdf");
        messageBodyPart.setHeader("Content-Transfer-Encoding", "base64");
        messageBodyPart.setDataHandler(new DataHandler(dataSource));
        messageBodyPart.setFileName("test.pdf");

        multipart.addBodyPart(messageBodyPart);

        //construct message
        msg.setHeader("Content-Type", "multipart/mixed");
        msg.setFrom(new InternetAddress(user));
        msg.setReplyTo(InternetAddress.parse(replyEmail,false));
        msg.setSubject("Test");
        msg.setRecipients(Message.RecipientType.TO, to);
        msg.setSentDate(new java.util.Date());
        msg.setContent(multipart);

        //send email
        Transport.send(msg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:19:27.697

问题是我正在设置

`os=response.getOutputStream`

相反，我摆脱了这条线并创建了

```
byte[] outputBytes = os.toByteArray(); 
```

这就是我在数据源中使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:42:53.803

什么是“buf”？为什么要将其转换为字符串，然后假设它以 iso-8859-1 编码，然后从字符串中提取字节？

看起来 PDF 正在创建为“os”，它没有保存在任何地方，也没有用于附件。

# android - Android 远离热门活动

> ID：15589413
> 
> 赞同：2
> 
> 时间：2013-03-23T16:52:11.653
> 
> 标签：android, android-activity

我怎样才能使一个活动保持在所有其他应用程序的顶部？

像这样的东西

[https://play.google.com/store/apps/details?id=com.gooutnplay.antsinmypants&hl=en](https://play.google.com/store/apps/details?id=com.gooutnplay.antsinmypants&hl=en)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:27:20.640

这可能是对权限的破解[`SYSTEM_ALERT_WINDOW`](http://developer.android.com/reference/android/Manifest.permission.html#SYSTEM_ALERT_WINDOW)，它允许应用程序在任何其他应用程序之上绘制。

# php - 哪个更快：in_array 或数据库查询？

> ID：15589416
> 
> 赞同：1
> 
> 时间：2013-03-23T16:52:20.753
> 
> 标签：php, mysql, performance

哪个更快？

1.  我将 SQL 结果存储在一个数组中——这意味着 1000 个或更多 ID。然后我使用 in_array() 函数 30 次找出 MyID 在数据库中。

2.  我检查 MyID 是否在数据库中并重复 30 次。

### 试验结果：

```
48 records (MyID)

Array count: 1704 (ID) (Table size: 100 000)

Delta time:

Method 1: 0.0075759887695312

Method 2: 0.0038831233978271 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:54:35.877

我肯定会说一次将所有 ID 放入数组中会比查询 MySQL 服务器 30 次要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:36:58.930

改用（键，值）关联数组（实际上所有数组在 PHP 中都是关联的，但这不是重点）。将数组的*键*设置为 ID，每个值为（例如）1。

```
$ids = array();
For all ID from database {
   $ids[ ID ] = 1;
} 
```

测试 ID 是否在数组中

```
if (isset($ids[ ID ])) {
   // yes it is 
} 
```

以这种方式使用数组非常快，因为键在内部存储为树 -[搜索复杂度约为 O(1)](https://stackoverflow.com/questions/2473989/list-of-big-o-for-php-functions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:13:29.407

您提出的解决方案似乎都不正确。您应该查看 MySQL 的[IN 子句](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)。有了这个，您可以`WHERE`在单个查询中获取多个值，如下所示：

```
SELECT something FROM table WHERE id IN(1, 4, 5, ...) 
```

# c# - WPF DataBinding：对象不包含我在文本框中输入的内容

> ID：15589419
> 
> 赞同：0
> 
> 时间：2013-03-23T16:52:37.683
> 
> 标签：c#, wpf, xaml, data-binding, inotifypropertychanged

我是 WPF 的新手，我想测试`DataBinding`，所以我写了下面的代码：

```
<Window x:Class="testdatabindingcustomobject.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid x:Name="masterGrid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="100"/>
        <ColumnDefinition Width="100"/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="50"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <TextBlock Text="Montant:" Grid.Column="0" Grid.Row="0" VerticalAlignment="Center"/>
    <TextBox x:Name="txt" Text="{Binding Path=Montant}" Grid.Column="1" Grid.Row="0"  VerticalAlignment="Center" Margin="10,0,0,0"/>
</Grid>
</Window> 
```

后面的c#代码是：

```
namespace testdatabindingcustomobject
{

public class DataBindingTest : INotifyPropertyChanged
{
    double montant;
    public event PropertyChangedEventHandler PropertyChanged;

    public double Montant
    {
        get 
        {return montant;}
        set
        {
            montant = value;
            OnPropertyChanged("Montant");            
        }
    }

    public  DataBindingTest()
    {
        Montant = 0.000;
    }

public void OnPropertyChanged(string mm)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs(mm));
    }
}

public partial class MainWindow : Window
{
    public DataBindingTest myObject;
    public MainWindow()
    {
        InitializeComponent();
        txt.KeyDown += txt_KeyDownHandler;
        myObject = new DataBindingTest();
    }

    public void txt_KeyDownHandler(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
            MessageBox.Show(myObject.Montant.ToString());
    }
} 
```

}

例如，当我输入 1500`TextBox`并键入返回键时，`MessageBox`不会反映文本中输入的值。

为什么我的文本框不显示值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:58:37.083

您需要`DataContext`在窗口上设置 才能为您完成绑定工作 -

```
public MainWindow()
{
    InitializeComponent();
    txt.KeyDown += txt_KeyDownHandler;
    myObject = new DataBindingTest();
    DataContext = myObject;
} 
```

有关绑定概述，请参阅[此处](http://msdn.microsoft.com/en-us/library/ms752347.aspx)的此链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:01:10.340

除了像 RV1987 写的那样设置 DataContext 之外，您还需要将 UpdateSourceTrigger 设置为 PropertyChanged，因为您不会失去通常会更新源的焦点。

```
Text="{Binding Path=Montant, UpdateSourceTrigger=PropertyChanged}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:03:15.690

您需要将 MainWindow 或 masterGrid 的 DataContext 设置为 myObject

# javascript - 由于内容不同，流星重复模板

> ID：15589427
> 
> 赞同：2
> 
> 时间：2013-03-23T16:53:27.160
> 
> 标签：javascript, meteor

我有一个菜单栏，我有 3 个不同的页面。根据我所在的页面，菜单栏中的内容会有所不同。由于内容不同，我创建了 3 个不同的模板。但是，菜单栏的结构除了内容是一样的，所以我发现我有很多重复的代码。有没有办法只有一个模板并且仍然根据您所在的页面以不同的方式填充菜单栏中的内容？

设置模板 1 的内容（我对其他两个模板做同样的事情，只是名称不同）：

```
Template.pictureMenu.contents = function(){
  ...
}; 
```

实际模板（我对其他两个模板做同样的事情，只是名称不同）：

```
<template name="pictureMenu">
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse"> <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Media Menu</a>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <li>
                <a href="#">Upload</a>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Playlists<b class="caret"></b></a>
              <ul class="dropdown-menu">
                **{{#each contents}} <!-- This is the only thing that changes-->
                  <li>
                      <a href="#" class="viewPlaylist">{{this}}</a>
                  </li>
              {{/each}}**
              </ul>
            </li>
            <li>
                <a href="#">Share</a>
            </li>
          </ul>
          <form action class="navbar-search pull-right">
              <input class="search-query span2" placeholder="Search" type="text">
          </form>
        </div>
      </div>
    </div>
  </div>
</template> 
```

我如何将它减少到 1 个模板并且仍然有不同的内容传递给它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:08:20.427

您可以将模板重命名为“菜单”，然后在内容变化的位置插入特定内容：

```
<template name="menu">
  ...
  <ul class="dropdown-menu">
    {{#each currentMenu}}
      <li>{{itemName}}</li>
    {{/each}}
  </ul>
  ...
</template>

Template.menu.currentMenu = function() {
  return Session.get("currentMenu");
} 
```

然后，当您更改站点中的位置并想要更新菜单时，只需更新会话：

```
var newMenu = [{itemName: "item1"}, {itemName: "item2"}, {itemName: "etc"}];
Session.set("currentMenu", newMenu); 
```

# ruby-on-rails - 水豚不能点击按钮

> ID：15589428
> 
> 赞同：0
> 
> 时间：2013-03-23T16:53:33.560
> 
> 标签：ruby-on-rails

更新：

“RackTest 驱动程序无法单击不在表单中的按钮。” 通过 jnicklas

参考：[https ://groups.google.com/forum/?fromgroups=#!topic/ruby-capybara/ECc4U_dux08](https://groups.google.com/forum/?fromgroups=#!topic/ruby-capybara/ECc4U_dux08)

起源：

我已经为这个问题苦苦挣扎了几个小时，但不明白为什么。请你帮助我好吗？

index.html.haml

```
.welcome.ac
    %h1.brand.text-info GroupMeal
        %h2.tagline
        The simplest way of scheduling meals with your groups and friends
    %p
        - if !current_user
            %button#fblogin.btn.btn-info.btn-large Login with Facebook
        - else
            %a.btn.btn-info.btn-large{:href => '/signout'} Sign out\ 
```

authentications_spec.rb

```
describe "page" do
  before do
    visit root_path
  end
  it { should have_button('Login with Facebook') } # 1\. This case is passed
  describe "with valid information" do
    before do
      click_button('Login with Facebook') # 2\. But this line is broken
    end
    it { should have_link('Sign out', href: '/signout') } 
  end
end 
```

案例 1：验证“使用 Facebook 登录”按钮是否存在 --> 通过。
案例 2：click_button --> 失败并收到以下错误。

```
Failure/Error: click_button('Login with Facebook')
NoMethodError:
    undefined method `node_name' for nil:NilClass 
```

我不明白为什么该按钮存在但无法单击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:35:53.950

每个**describe**块都会创建一个新范围，因此 RSpec 不再位于第二个应用程序的根页面上。您要么必须指示 RSPec 再次访问根目录，要么将第一个**before**块更改为**before(:each)**块，以便它在每次测试之前运行。

RSpec 以这种方式设置每个**描述**块，因为在编写测试时，每个测试都应该能够独立运行——测试的顺序不重要，因此让一个测试为另一个测试设置条件是个坏主意.

如果我是你，我会这样写，假设你在**描述“页面”**块中放置的所有测试都应该测试根页面上的功能（如果是这样，我会将“页面”更改为“根页面“所以很清楚正在测试什么）：

```
describe 'root page' do
  before(:each) do
    visit '/'
  end

  # Calling subject will allow you to keep using "it" 
  # in case you want to test other aspects of the root 
  # page here. It's worth noting that click_button
  # will tell you if it can't find the button you're
  # asking for, so you don't really need the next two
  # lines as things currently stand.
  subject { page }

  it { should have_button('Login with Facebook') }

  describe 'signing in with valid information' do
    specify do
      click_button('Login with Facebook')
      page.should have_link('Sign out', href: '/signout' )
    end
  end
end 
```

# java - 使用jackson读取json树时忽略一些节点

> ID：15589431
> 
> 赞同：2
> 
> 时间：2013-03-23T16:53:51.080
> 
> 标签：java, android, json, performance, jackson

在使用 Jackson 从 URL 读取 json 时，我必须提高性能。解决方案是忽略一些不需要处理之后的节点，我不知道怎么做？

更具体地说，这种方法在 AVG 上需要 1.4 秒，因为它会探索所有节点，有时只需要一个（url 示例中的流派）。

```
public static JsonNode readFromURL() throws JsonParseException, JsonMappingException,        MalformedURLException, IOException
{
    return mapper.readValue(new URL("http://api.mixotv.com/2/guide/now"), JsonNode.class);
} 
```

谢谢。

# c# - 应用程序变慢

> ID：15589434
> 
> 赞同：1
> 
> 时间：2013-03-23T16:54:01.010
> 
> 标签：c#, winforms

用 C# (Forms) 编写的应用程序在一段时间后会变慢（特别是在从睡眠模式醒来后，也可能在 30 分钟后）。

该应用程序具有以下结构：

![在此处输入图像描述](../Images/6efb2322655123ccc9e552a665f3ac10.png)

按下按钮 1 或按钮 2 时主面板会发生变化。如果单击按钮 2，则实际面板中会显示子菜单和子面板：

![在此处输入图像描述](../Images/6c46db560b9eab012dd234de028a4263.png)

有趣的是，应用程序只需要很长时间就可以在面板 1 和面板 2 之间切换（即按下按钮 1 或按钮 2）。按下按钮 2 并加载面板后，子面板之间的切换（如果按下按钮 2a、2b 和 2c）很快。

正如 Davin Tryon 在他对这篇文章的回答中所建议的那样 >[长时间运行的应用程序变慢了](https://stackoverflow.com/questions/9444386/long-running-application-slows-down)< 我已经检查了 CPU、内存、磁盘和网络。

![在此处输入图像描述](../Images/6d6a794bf4c03823bc31c1d06855078b.png)

但是这些值对我来说似乎并不高......

**编辑 2013 年 3 月 23 日下午 6:11：** DasKrümelmoster 询问按钮/面板 1 和按钮/面板 2 之间的切换代码：

```
activePanel.Hide();
activePanel = getPanelFromSelectedMenuElement(selectedMenuElement); // would return "panel2"; 
```

在子面板之间切换时基本相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:58:56.567

您可以查看使用 Red Gate Antz 分析器）[http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)）来检查内存等方面的任何问题。您将有 14 天的时间评估期也。

另外，也许看看对应用程序使用 Windows 性能计数器：http: [//www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters](http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:04:24.400

如果您在运行时按需创建控件：控件的创建速度很慢，而隐藏/显示它们却足够快。您可以将等待时间转移到应用程序的启动，因为它不太明显并在启动时创建所有内容。

请参阅此控件以帮助设计页面而不在运行时显示页面：[https ://stackoverflow.com/a/6954785/1974021](https://stackoverflow.com/a/6954785/1974021)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T23:17:42.287

您的问题可能没有足够的信息供人们回答。

有一些关键的事情：

1.  您在主面板上附加控件的方法是什么

2.  您是否处理了附加到主面板的子控件？如何？

3.  根据您代码的非常少的信息

    ```
    activePanel.Hide();
    activePanel = getPanelFromSelectedMenuElement(selectedMenuElement); 
    ```

    下次会`getPanelFromSelectedMenuElement`返回以前隐藏面板的相同实例吗？如果没有，您是否处理了未引用的面板？

4.  控件管理的代码级别层次结构是什么？

您需要将此信息提供给可以获得有用答案的人。或者，也许您只需通过查看设计即可找到原因。

如果这些都没有问题，并且正如您所说，不会是由 CPU 负载、内存使用、页面交换、磁盘访问和网络流动引起的；只有一件事你没有提到：显卡性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T16:59:26.300

这可能与 C#、winforms 或您的应用程序无关。Windows 可能会将应用程序的内存部分交换到磁盘，因为其他应用程序需要它。当您在长时间延迟后访问应用程序的某些部分时，交换的内存将从磁盘加载回来，这可能需要一些时间。

# php - 单击时，在更新 MySQL 数据库时隐藏 DIV

> ID：15589435
> 
> 赞同：1
> 
> 时间：2013-03-23T16:54:02.563
> 
> 标签：php, jquery, mysql, ajax

我有一个 DIV，我想：

1.  当用户点击它时隐藏 div (display:none) (我已经解决了这部分)
2.  更新 MySQL 数据库（这是我的问题所在）

我在 SO [here](https://stackoverflow.com/a/13801257/2202638)上找到了这个脚本，我坐在文档的开头：

```
<script>
    function myScript(imageID)  { 
      url="updateDatabase.php?imageID=" + imageID;
      objX=new XMLHttpRequest();
      objX.open("GET",url,false);
      objX.send(null);
      response=objX.responseText;
      document.getElementById('image' + imageID).innerHTML=response;
    }
</script> 
```

这是页面中的 DIV 代码，它使用代码中其他位置设置的 imageID 来确定要加载并传递给脚本的图像：

```
echo "
<div id=\"image".$imageID."\">
    <img
        src=\"images/".$imageID.".png\" 
        onclick=\"myScript(".$imageID.");
            document.getElementById('image".$imageID."').style.display = 'none'
    \">
</div>"; 
```

这是脚本引用的 updateDatabase.php 页面。这是 PHP 的一行代码，它引用了在我的代码中其他地方定义的函数，该函数在同一站点的其他地方成功使用。它运行一系列 MySQL 查询/插入/更新。

```
updateImage($_GET['imageID']); 
```

我已经成功地让 DIV 在被点击时隐藏起来，但我似乎无法让它在同一步骤中更新数据库——这是我这里缺少的部分。

我知道我成功地传递了所需的 imageID，因为如果我选择的话，我可以在这个 updateDatabase.php 页面上正确地输出它。但是，我不能让它发生任何数据库活动。

据我所知，这需要混合使用 JQuery 和/或 AJAX。虽然我对 PHP/MySQL 有基本的了解，但这对我来说是全新的领域，因此非常感谢任何澄清。我也是 SO 的新手，如果我遗漏了重要信息或忽略了发布约定，请提前道歉 - 如果是这种情况，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:05:07.417

使用 jQuery。

```
onclick="myScript('.$imageID.')" 
```

和功能：

```
function myScript(imageID) {
    $('#image'+imageID).hide();
    $.ajax({
      url: 'updateDatabase.php?imageID='+imageID;
      async: true,
      type: 'get',
      success: function(data) {
           $('#image'+imageID).html(data);
            $('#image'+imageID).show();
      },
      error: function(jqXHR,error, errorThrown) {  
           if(jqXHR.status&&jqXHR.status==400){
                alert(jqXHR.responseText); 
           }else{
               alert("Something went wrong");
           }
      }
   }); 
```

现在，data.response 将取决于返回的 JSON 的确切性质。如果不是 JSON 而是原始 HTML，那也没什么不同。查看[http://api.jquery.com/jQuery.ajax/上的文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:05:37.890

试试jquery

```
$.ajax({
 url:"updateDatabase.php?imageID=" + imageID,
 type:"GET",//Default
 success:function(data, status){
   if(status){
     $("#'image"+ imageID).html(data);
     // do as per need
   }else{
    // else part
   }
 },
 error:function(-----){
--------------
 }
}); 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:56:44.947

我能够通过剖析本教程中的代码来解决这个问题，[该](http://www.w3schools.com/PHP/php_ajax_database.asp)教程准确地演示了如何布置此类操作的“移动部分”。任何与我有类似问题的人都应该以此作为参考；它为每个示例页面提供了完整的无错误代码。

# ruby-on-rails - 在一个简单的铁路应用程序中启动一个守护进程

> ID：15589436
> 
> 赞同：0
> 
> 时间：2013-03-23T16:54:11.143
> 
> 标签：ruby-on-rails, ruby, controller, ruby-daemons

我有一个简单的控制器，我希望该控制器启动一个守护程序来执行后台工作（它读取连接到计算机的 Arduino 板提供的 sstdin 数据）。

```
class DaemonController < ApplicationController
  def index
    require 'rubygems'
    require 'daemons'

    options = {
      :app_name => "collectTemperature",
      :multiple => true
    }
    readtty = Daemons.call(options) do
    loop {
      sleep 10
    }
    end
  end # def                                                                      
end # class 
```

它确实创建了一个进程（从现在开始它只是休眠，但是一旦这个简单的代码可以工作，我就会进入它）但是当我通过浏览器上的 rails 框架调用控制器时，我在浏览器指针中收到一条错误消息，指向该行守护进程调用（第 14 行）。

```
SystemExit in DaemonController#index

daemons (1.1.9) lib/daemons/daemonize.rb:65:in `exit'
daemons (1.1.9) lib/daemons/daemonize.rb:65:in `call_as_daemon'
daemons (1.1.9) lib/daemons/application.rb:259:in `start_proc'
daemons (1.1.9) lib/daemons/application.rb:296:in `start'
daemons (1.1.9) lib/daemons.rb:252:in `call'
app/controllers/daemon_controller.rb:14:in `index' 
```

我将不胜感激任何帮助，如果这是一个愚蠢的问题，我感到非常抱歉；-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:32:56.237

`Daemons.call(options) begin`而不是`Daemons.call(options) do`

# playframework - 如何在我的html页面中显示中文帮助信息？

> ID：15589437
> 
> 赞同：0
> 
> 时间：2013-03-23T16:54:15.660
> 
> 标签：playframework, playframework-2.0

```
@Required
@MinLength(12)
@MaxLength(12)
@Id
@Column(length = 12)
public String id;

@Min(17)
@Max(30)
public Integer age;

@inputText(studentForm("id"), '_label -> "学号")
@inputText(studentForm("age"), '_label -> "年龄") 
```

在我输入错误信息后，例如 id="1" 和 age=10 我得到两条不同的错误信息，但一个是中文的，另一个是英文的：

1.  id 的错误：最小长度为 12
2.  年龄错误：最小小于17

我怎么能把它们都换成中文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:18:21.890

Play 不会自动翻译消息，因此很可能您`conf/messages.xx`只更改了部分内容。

找到它并完成翻译。可以从以下位置复制正确的错误键：[https ://github.com/playframework/Play20/blob/2.0.4/framework/src/play/src/main/resources/messages](https://github.com/playframework/Play20/blob/2.0.4/framework/src/play/src/main/resources/messages)

# android - 无法为自动完成文本打开软键盘

> ID：15589439
> 
> 赞同：1
> 
> 时间：2013-03-23T16:54:21.920
> 
> 标签：android, keyboard, autocompletetextview

在 Eclipse 中测试自动完成文本控件时，我无法在三星手机上显示软键盘。我点击物理触摸自动完成文本控件以调出键盘。不允许显示软键盘的 AutoCompleteText 控件有什么不同吗？下面是我活动的 onCreate 方法中的代码。我将不胜感激。

```
 autoComplete = (AutoCompleteTextView) findViewById(R.id.suggest);
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(autoComplete, InputMethodManager.SHOW_FORCED);
        if (imm != null){
            imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0);
              } 
    //    imm.toggleSoftInput(0, 0);

        autoComplete.addTextChangedListener(new TextWatcher(){

            public void afterTextChanged(Editable editable) {
                // TODO Auto-generated method stub

            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                // TODO Auto-generated method stub

            }

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                String newText = s.toString();
                int len = newText.length();
           //     Toast.makeText(getApplicationContext(), "Text changed count = " + String.valueOf(len), Toast.LENGTH_LONG).show();
                if(len > 1)
                    new getData().execute(newText);
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:27:59.960

试试这个

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

这将强制键盘显示

# javascript - 不包括周末和节假日的高级日期范围计算

> ID：15589442
> 
> 赞同：1
> 
> 时间：2013-03-23T16:54:31.907
> 
> 标签：javascript, date, range

我已经让我的脚本从开始到结束日期进行计算，但是我这样做的次数越多，我就越意识到必须计算什么......

我写这篇文章的公司有一个“请求关闭”页面。两个文本框允许客户端以 mm/dd/yyyy 格式输入开始和结束日期。我目前有它调用`dateRange()`函数onchange。这会处理两个日期，然后更新 SPAN 中的打印计数。

现在是挑战。在这个范围内，我必须排除周末，这是我见过的例子，但无法理解。我还必须排除这家公司认为的带薪假期，如果他们降落在范围内，但在周末，也必须避免。

Javascript函数：

```
function dateRange() {
  var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
  var firstDate = new Date(document.getElementById('start').value);
  var secondDate = new Date(document.getElementById('end').value);
  var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)-1));
  // holDays = ?????;
  // vacDays = diffDays - holDays;
  document.getElementById("holDays").innerHTML = diffDays || 0;
  document.getElementById("vacDays").innerHTML = diffDays || 0;
} 
```

HTML 日期输入：

```
From: <INPUT type="text" name="start" id="start" value="" onchange="dateRange()" class="datepicker" />
To: <INPUT type="text" name="end" id="end" value="" onchange="dateRange()" class="datepicker" /> 
```

保持剩余计数的位置：

```
Paid Off Days: <SPAN id="holDays">0</SPAN> of the days in your range are Paid Holidays and will not be charged Vacation Days.
Vacation Days: You will be using <SPAN id="vacDays">0</SPAN> Day(s) of vacation. 
```

所以，需要原始计数，不包括周末。该范围内的假期天数，而不是周末。原始计数 - 假期计数 = 假期天数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:37:11.207

好吧，我在这里没有得到任何回应，但是为了提供我的结果，用一组假期日期来完成这样的工作......

```
function dateCount() {
  var startDate = new Date(document.getElementById('start').value);
  var endDate = new Date(document.getElementById('end').value);
  var holiDates = [];
  holiDates[0] = new Date("01/16/2013");
  holiDates[1] = new Date("04/20/2013");
  holiDates[2] = new Date("01/16/2014");
  var length = holiDates.length, fullCount = 0, paidCount = 0, vacDays = 0;
  for (var i = 0; i < length; i++) {
    holiday = holiDates[i].getDay();
    if(holiDates[i] >= startDate && holiDates[i] <= endDate && holiday != 0 && holiday != 6) {
      paidCount++;
    }
  }
  while (startDate <= endDate) {
    var day = startDate.getDay();
    if(day != 0 && day != 6) {
      fullCount++; 
    }
    startDate.setDate(startDate.getDate() + 1); 
  }
  document.getElementById("holDays").innerHTML = paidCount || 0;
  vacDays = fullCount - paidCount;
  document.getElementById("vacDays").innerHTML = vacDays || 0;
} 
```

# git - GIT HTTPS 连接问题

> ID：15589446
> 
> 赞同：3
> 
> 时间：2013-03-23T16:54:51.087
> 
> 标签：git, ssl, curl, libcurl, opensuse

我在 stackoverflow 上四处搜索，但没有找到任何可以准确回答这个问题的东西，所以我想在这里问它，并提供尽可能多的关于我的问题的详细信息。

我刚刚安装了 openSUSE 12.3，安装了 git 并尝试使用 https 克隆到我的一个存储库中。以下命令可在 Ubuntu、Mac 和其他操作系统上正常运行，但由于某种原因，我在 SUSE 上遇到了问题。

当我运行时：

```
git clone https://username@mysite.com/git/myrepo.git 
```

当“克隆到'myrepo'时它挂起

我已经禁用了 sslverify，这就是它在其他机器上的工作方式。我不认为这是一个 sslverify 问题，因为当我在其他机器上没有 sslverify 时，我会收到关于此的特定错误消息。在这种情况下，我只是挂在“克隆到...”上

我运行以下命令以获取更多信息：

```
GIT_CURL_VERBOSE=1 git clone https://username@mysite.com/git/myrepo.git 
```

输出是：

```
Cloning into 'myrepo'...
* Couldn't find host mysite.com in the .netrc file; using defaults
* About to connect() to mysite.com port 443 (#0)
*   Trying x.x.x.x...
* Connected to mysite.com (x.x.x.x) port 443 (#0)
* Connected to mysite.com (x.x.x.x) port 443 (#0)
* successfully set certificate verify locations:
*   CAfile: none
  CApath: /etc/ssl/certs/
* Unknown SSL protocol error in connection to mysite.com:443 
* Closing connection #0
error: Unknown SSL protocol error in connection to mysite.com:443  while accessing https://username@mysite.com/git/myrepo.git/info/refs?service=git-upload-pack
fatal: HTTP request failed 
```

为了这个问题，我显然更改了用户名、IP 和 DNS 名称。

我听说旧版本的 curl 有问题，但这个版本是较新的版本之一。Ubuntu 上的 libcurl 版本实际上更旧，所以我仍然不认为这是一个错误，但不能完全确定。我没有将其从 HTTPS 更改为 SSH 的特权，因此这不是替代方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:23:27.450

我认为关键是 SSL 库（版本），而不是特别是 libcurl 版本。看起来您可能正在使用 OpenSSL，所以在这方面比较工作版本和非工作版本......

# linux-kernel - Exynos4_PPMU 结构说明

> ID：15589449
> 
> 赞同：1
> 
> 时间：2013-03-23T16:55:25.083
> 
> 标签：linux-kernel, arm, driver, linux-device-driver

我正在查看 Linux 内核（drivers/devfreq）中的 exynos4_bus.c 文件并遇到了这个结构：

```
struct exynos4_ppmu {
    void __iomem *hw_base;
    unsigned int ccnt;
    unsigned int event;
    unsigned int count[PPMU_PMNCNT_MAX];
    bool ccnt_overflow;
    bool count_overflow[PPMU_PMNCNT_MAX];
}; 
```

我想知道是否有人可以向我大致解释一下 PPMU 到底是什么以及它在这段代码中的用途。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:15:55.297

请参阅：[内核文档](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/devicetree/bindings/arm/exynos/power_domain.txt)和[提交消息](http://lkml.org/lkml/2013/1/9/175)

根据[消息来源](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/drivers/devfreq/exynos4_bus.c)，这似乎是三星 ARM 处理器的[DVFS（动态电压和频率缩放）](http://en.wikipedia.org/wiki/Voltage_and_frequency_scaling) IP，与内存/总线频率有关。统计数据以这种结构收集，例如。`exynos4_read_ppmu()`, 以确定电压和频率的性能。参见例如，`exynos4_get_busier_dmc()`。如果 DVFS 是由控制器或软件自动化的，我看不到手头。我找不到公开的数据表。

# extjs - 如何计算网格中的行数，但只能使用真标志？

> ID：15589451
> 
> 赞同：0
> 
> 时间：2013-03-23T16:55:32.313
> 
> 标签：extjs, grid

例如，我有一个包含一些数据的网格：

```
ID | name | is_active
1  | lala |     1
2  | 1ala |     1
3  | 2ala |     1
4  | 3ala |     0 
```

我想要`getCount()`那些具有真正标志的元素：在我的情况下将有 3 个。

```
Active = 3
Inactive = 1 
```

如何在 extjs 网格中计算这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:37:53.853

您可以使用 store 的查询方法根据任何属性过滤掉所需的记录，这是即时完成的，并且过滤不会永久应用于 store

```
var store = gridpanel.getStore();
var collection = store.query('is_active', 1);
return collection.getCount(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:15:44.307

也许你可以使用这个想法：

```
var total = 0;
store.each(function(r){
    if(r.data.is_active) {
        total++;
    }
}); 
```

# css - 在下拉菜单中调整子菜单的宽度

> ID：15589452
> 
> 赞同：0
> 
> 时间：2013-03-23T16:55:32.440
> 
> 标签：css, drop-down-menu

在我基于 wp 的网站中，子菜单继承了主菜单的宽度。但我需要让它大一点，以便子菜单中的文本适合它。我怎样才能做到这一点 ？

这是我的 CSS

```
#edited_menubar {

    width: 620px;
    height:22px;
    /*
    margin-left: 528px;
    padding-left: 10px;
    margin-right: 10px;

    margin-bottom:5px ;
    */

    padding-left: 360px;
    padding-top:35px;

}

#mainmenu {
    margin: 30px 20px 0px 0px;
    word-wrap: break-word;

}

ul#mainmenu-menu {
    position: relative;

    background: rgb(247,247,247);
    background: -moz-linear-gradient(top, rgba(247,247,247,1) 0%, rgba(244,244,244,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(247,247,247,1)), color-stop(100%,rgba(244,244,244,1)));
    background: -webkit-linear-gradient(top, rgba(247,247,247,1) 0%,rgba(244,244,244,1) 100%);
    background: -o-linear-gradient(top, rgba(247,247,247,1) 0%,rgba(244,244,244,1) 100%);
    background: -ms-linear-gradient(top, rgba(247,247,247,1) 0%,rgba(244,244,244,1) 100%);
    background: linear-gradient(top, rgba(247,247,247,1) 0%,rgba(244,244,244,1) 100%);
    border: 1px solid #E2E2E2;
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f7f7f7', endColorstr='#f4f4f4',GradientType=0 );
}

ul#mainmenu-menu li {
    width: 100px;
}

ul#mainmenu-menu li.menu-item {
    position: relative;

    border-right: 1px solid #E2E2E2;
    display: block;
    float: left;
    font-size: 11px;
    font-weight: bold;
}

ul#mainmenu-menu > li:nth-child(6) {
    border-right: none;
}

ul#mainmenu-menu li.menu-item a {
    color: #5e5e5e;
    display: block;
    padding: 5px 8px;
    text-decoration: none;
}

ul#mainmenu-menu li.menu-item a:hover {
    background: #F9F9F9;
}

/* =Main Menu  : Scaled Menu 
-------------------------------------------------------------- */

#mainmenu.scaled .container > div {
    width: 100%;
    height: 32px;

    display: table;
}

#mainmenu.scaled ul#mainmenu-menu {
    height: 32px;

    display: table-row;
}

#mainmenu.scaled li.menu-item {
    width: auto;
    height: 52px;

    border: none;
    display: table-cell;
    float: none;
}

#mainmenu.scaled li.menu-item a {
    border: 1px solid #E2E2E2;
    border-width: 1px 1px 1px 0;
    text-align: center;
}

#mainmenu.scaled li.menu-item:first-child a {
    border-left-width: 1px;
}
#mainmenu.scaled li.menu-item:first-child a {
    border-right-width: none;
}

#mainmenu.scaled ul#mainmenu-menu ul.sub-menu li {
    border-width: 0;
    display: block;
}

#mainmenu.scaled ul#mainmenu-menu ul.sub-menu a {
    border: none;
}
#mainmenu ul li > ul li {

    width:300px;
}
/* =Main Menu  : Main Dropdown 
-------------------------------------------------------------- */

ul#mainmenu-menu li.menu-item a {
    height: 28px;

    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    color: #5e5e5e;
    display: block;
    padding: 10px 20px; /*spacing between list item */
    text-decoration: none;
}

ul#mainmenu-menu ul.sub-menu {
    position: absolute;
    top: 27px;
    left: 0px;
    width: 100%;

    background: white;
    border: none;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    display: none;
    z-index: 99;
}

ul#mainmenu-menu li:hover ul.sub-menu {
    display: block;
}

ul#mainmenu-menu ul.sub-menu li {
    border: none;
    display: block;
    float: none;
    font-weight: normal;
    white-space: nowrap;

}

ul#mainmenu-menu ul .sub-menu.li a {
    height: auto;

    line-height: 15px;
    padding: 15px 15px 15px 15px;
} 
```

我的工作网站：[aniyanetworks.net/Blog](http://aniyanetworks.net/Blog/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:15:10.483

首先删除/更改`ul.sub-menu`. 您可以看到那里的宽度设置为 100 像素。您可以更改该值或将其删除并将其添加到 css 代码中：

```
ul#mainmenu-menu ul.sub-menu { /*This is on line 474 in your style.css */
width: 160px !important; 
/* Or whichever value fits, I also added the 
"!important rule if you don't know how to remove 
the inline styles */
} 
```

# java - 通过解析网页获得的数据构建列表视图

> ID：15589454
> 
> 赞同：0
> 
> 时间：2013-03-23T16:55:46.617
> 
> 标签：java, android, parsing, html-parsing, jsoup

我是 android 的新手，所以我的问题可能听起来很不成熟。我想制作此页面上显示的表格的列表视图： [http ://www.medicalmnemonics.com/cgi-bin/return_browse.cfm?discipline=Rheumatology%20%2F%20Allergy&browse=1](http://www.medicalmnemonics.com/cgi-bin/return_browse.cfm?discipline=Rheumatology%20%2F%20Allergy&browse=1)

我尝试使用 Jsoup 进行解析，但不知道该怎么做。有人可以解释我如何使用 Jsoup 或任何其他解析器来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:15:25.423

[http://jsoup.org/cookbook/extracting-data/attributes-text-html](http://jsoup.org/cookbook/extracting-data/attributes-text-html)

[http://www.mkyong.com/java/jsoup-html-parser-hello-world-examples/](http://www.mkyong.com/java/jsoup-html-parser-hello-world-examples/)

要从标签中获取数据，请使用以下代码。

```
<strong>Joint pain causes</strong>

public void getDataurl()
{

    URL url;
    try {

        url = new URL("http://www.medicalmnemonics.com/cgi-bin/return_browse.cfm?discipline=Rheumatology%20%2F%20Allergy&browse=1");
        Document doc = Jsoup.parse(url, 30000);

        Elements elements = doc.select("strong");

        for( Element e : elements )
        {

          System.out.println(e.text());
        }

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# c++ - 如何将用户定义的字段存储在任何文件的元数据中？

> ID：15589456
> 
> 赞同：0
> 
> 时间：2013-03-23T16:55:51.697
> 
> 标签：c++, linux, filesystems, metadata, boost-filesystem

我正在开发一个同步应用程序，当将它们放入我的应用程序时，我需要在每个文件的元数据中存储唯一的 id，这样我就可以在服务器和客户端之间匹配相似的文件，（使用名称匹配相似的文件不好,name 可以随时更改，但如果每个文件都有唯一的 id，即使文件被修改或重命名，我也可以识别相似的文件）

所以我需要知道如何将我的自定义属性（唯一 id）插入到 linux 和 windows 中的文件元数据中？是否有任何 c/c++ 库可以做到这一点？（我的应用程序是用 c++ 开发的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:10:31.823

我们的软件遇到了类似的问题，但在我们的案例中元数据很多，共享以防万一您也可以将它用于您的案例......

我们的每个文件现在都有一个元数据部分，并且它需要不由用户手动编辑该元数据，它由实用程序自动生成，如下所述（在每个文件的末尾）......

```
#if 0
/** METADATA **/
/**
   <root>
         <element1 attr1="" attr2=""....>
                   <subEleme1 attr1="" attr2="".../>
         </element1>
         <element2 attr1="" attr2=""..../>
   </root>
**/
#endif 
```

给你一个粗略的想法，在我们的例子中这个元数据太复杂了，你可以使用类似的东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:59:37.460

我不确定我是否完全理解您的问题，但我相信您可以使用[`setxattr`](http://man7.org/linux/man-pages/man2/setxattr.2.html)系统调用系列来定义文件的扩展属性。

# javafx - 如何修复 javafx-8 中的 NullPointerException

> ID：15589459
> 
> 赞同：2
> 
> 时间：2013-03-23T16:56:06.743
> 
> 标签：javafx, java-8

JavaFX`NullPointerexception`在将文本设置为文本字段时产生。此代码产生此异常：

```
public void invalidate() {
    model.getLock().lock();
    try {
        memoryDisplayTextField.setText(model.getMemory() != 0 ? "M" : "");
        mainDisplayTextField.setText(model.getDisplayText());
    } finally {
        model.getLock().unlock();
    }
} 
```

堆栈跟踪如下：

```
java.lang.NullPointerException
at com.sun.javafx.text.TextLayout.layout(TextLayout.java:1365)
at com.sun.javafx.text.TextLayout.ensureLayout(TextLayout.java:174)
at com.sun.javafx.text.TextLayout.getBounds(TextLayout.java:197)
at javafx.scene.text.Text.getLogicalBounds(Text.java:387)
at javafx.scene.text.Text.impl_computeGeomBounds(Text.java:1182)
at javafx.scene.Node.updateGeomBounds(Node.java:3322)
at javafx.scene.Node.getGeomBounds(Node.java:3275)
at javafx.scene.Node.getLocalBounds(Node.java:3257)
at javafx.scene.Node.updateTxBounds(Node.java:3335)
at javafx.scene.Node.getTransformedBounds(Node.java:3175)
at javafx.scene.Node.updateBounds(Node.java:504)
at javafx.scene.Parent.updateBounds(Parent.java:1643)
at javafx.scene.Parent.updateBounds(Parent.java:1643)
at javafx.scene.Parent.updateBounds(Parent.java:1643)
at javafx.scene.Parent.updateBounds(Parent.java:1643)
at javafx.scene.Scene$ScenePulseListener.pulse(Scene.java:2268)
at com.sun.javafx.tk.Toolkit.firePulse(Toolkit.java:352)
at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:511)
at com.sun.javafx.tk.quantum.QuantumToolkit$12.run(QuantumToolkit.java:379)
at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
at com.sun.glass.ui.win.WinApplication.access$300(Unknown Source)
at com.sun.glass.ui.win.WinApplication$3$1.run(Unknown Source)
at java.lang.Thread.run(Thread.java:722) 
```

有什么解决方法吗？还是我应该等到发布？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T01:16:44.023

据我了解，问题是由调用`setText`JavaFX 应用程序线程中的方法引起的，因此包装它可以`Platform.runLater()`解决这个问题。

```
 public void invalidate() {
    Platform.runLater(() -> {
        model.getLock().lock();
        try {
            memoryDisplayTextField.setText(model.getMemory() != 0 ? "M" : "");
            mainDisplayTextField.setText(model.getDisplayText());
        } finally {
            model.getLock().unlock();
        }
    });
} 
```

PS感谢***jewelsea***的帮助。

# c - 是否有一种机制可以尝试锁定几个互斥锁之一？

> ID：15589465
> 
> 赞同：3
> 
> 时间：2013-03-23T16:57:02.983
> 
> 标签：c, multithreading, pthreads, mutex

程序如何尝试同时锁定多个互斥锁，并知道它最终解锁了哪个互斥锁。本质上，我正在寻找的是`select()`互斥锁的等价物。这样的事情存在吗？如果没有，是否有任何实现它的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:28:11.207

我（几乎）确定这种功能应该使用监视器（以及使用信号/等待/广播的条件变量）来实现，但我认为您可以通过一个额外的信号量来解决您的问题。

假设所有互斥对象都以“锁定”状态开始，创建一个初始值为 0 的信号量。每当互斥对象解锁时，递增 (V) 信号量。然后，`select()`像这样实现：

```
 // grab a mutex if possilbe
Mutex select(Semaphore s, Mutex[] m) {
    P(s); // wait for the semaphore
    for (Mutex toTry : m) {
        boolean result = try_unlock(m);
        if (result) return m;
    }
} 
```

本质上，信号量会跟踪可用锁的数量，因此每当 P(s) 停止阻塞时，必须至少有一个可用的互斥量（假设当互斥量可用时正确地增加信号量！）

我没有试图证明这个代码是正确的，也没有测试过它......但我看不出它不应该工作的任何原因。

再一次，您可能想要使用显示器！

# python - 如何使用python运行多个文件

> ID：15589473
> 
> 赞同：0
> 
> 时间：2013-03-23T16:57:40.047
> 
> 标签：python, python-2.7

我正在尝试从桌面上的文件夹中运行多个文本文件，我必须从中搜索单词 olympic，如果它在这 50 个文本文件中找到 olympic，则应该将其保存在 output.txt 中，例如 textfile1 = 2 textfile2 = 1 和依此类推，直到 texfile=50

```
import glob
import re
write_file = open("output.txt")
flist = glob.glob("./*.py")   # adjust glob pattern as desired
print flist
print " lines : path to file"
for fpath in flist:
    with open(fpath) as f: #open files
        lines = f.readlines()
        if (lines == 'olympic'):
            write_file.write("%s" % lines) #write the results
        print "%6d : %s" % (len(lines),fpath)
        #with open securely opens and closes the file
write_file.close() # close file 
```

这就是我想要做的，但是是的，我知道它充满了错误:)

我正在尝试运行多个文件，但不是手动运行，我希望它自动运行整个目录/文件夹的文件并将它们的输出保存在一个文本文件中..'`I have 50 text files and all files have word olympic , some have 1 some have 2/3 etc , i want to count the words from each text file and than save their output in one text file , like textfile1 = 2 , textfile2 = 3 etc in output.txt`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:12:13.010

尝试这个

```
import os
import re

filelist = [file for file in os.listdir('.') if '.py' in file]

for file in filelist:
  f = open(file,"r")
    lines = f.readlines()
    sum=0
    sum1=0
    for line in lines:
      if "olympics" in line:
        len(re.findall('\Wolympics\W', line))
        sum=sum+1
        print sum
      elif "Olympics" in line:
        sum1=sum1+1
        print sum1
    print "%6d : %s" % (len(line),file.name)
    f.close() 
```

不太确定你想做什么，但我试了一下......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:58:10.947

类似的东西：

**获取.py**

```
#! /usr/bin/env python
import os
import sys

def get_counts(filepath, niddle):
    with open(filepath, 'rb') as f:
        return f.read().count(niddle)

if __name__ == '__main__':
    folder = sys.argv[1]
    niddle = sys.argv[2]
    assert os.path.isdir(folder), "Not a folder"
    output = open('results.txt', 'w')
    for dirpath, dirnames, filenames in os.walk(folder):
        for filename in filenames:
            if not filename.endswith('.html'): # or whatever
                continue
            filepath = os.path.abspath('%s/%s' % (dirpath, filename))
            result = '%s = %d' % (filepath, get_counts(filepath, niddle))
            output.write(result)
    output.close() 
```

用于：

`$ python fetch.py /path/to/search olimpic`

# ruby-on-rails - 遍历模型列

> ID：15589476
> 
> 赞同：0
> 
> 时间：2013-03-23T16:57:53.337
> 
> 标签：ruby-on-rails

我不确定遍历我的 Day 模型中的所有列以受益于简化的格式化方案的最佳方法。

`index.html.erb`

```
<% @day.each do |u| %>
    <li id="date"><%= clean_date(u.date) %></li>
    <li><b>Morning</b>: <%= u.morning %></li>
    <% unless u.morning_notes.blank? %><li><b>Morning Notes</b>: <%= u.morning_notes %><% end %></li>
    <li><b>Afternoon</b>: <%= u.afternoon %></li>
    <% unless u.afternoon_notes.blank? %><li><b>Afternoon Notes</b>: <%= u.afternoon_notes %><% end %></li>
    <li><b>Evening</b>: <%= u.evening %></li>
    <% unless u.evening_notes.blank? %><li><b>Evening Notes</b>: <%= u.evening_notes %><% end %></li>
    <li><b>Night</b>: <%= u.night %></li>
    <% unless u.night_notes.blank? %><li><b>Night Notes</b>: <%= u.night_notes %><% end %></li>
<% end %> 
```

理想情况下，它会是这样的：

```
<% @day.each do |u| %>
    <li id="date"><%= clean_date(u.date) %></li>
    <li><b>TimeOfDay</b>: <%= u.TimeOfDay %></li>
    <% unless u.TimeOfDay_notes.blank? %>
      <li><b>TimeOfDay Notes</b>: <%= u.TimeOfDay_notes %>
    <% end %></li>
<% end %> 
```

TimeOfDay 遍历 Morning、Afternoon、Evening 和 Night。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:17:22.483

也许是这样的：

```
<% @day.each do |u| %>
<li id="date"><%= clean_date(u.date) %></li>
<% ["morning", "afternoon", "evening", "night"].each do |t| %>
    <li><b><%= t.capitalize %></b>: <%= u.send(t) %></li>
    <% notes = u.send("#{t}_notes") %>
    <% unless notes.blank? %>
        <li><b><%= t.capitalize %> Notes</b>: <%= notes %></li>
    <% end %>
<% end %> 
```

# c# - 在 C# 中控制随机数

> ID：15589477
> 
> 赞同：2
> 
> 时间：2013-03-23T16:57:57.570
> 
> 标签：c#

如果我使用两个随机数，如何确保生成的这些数字中的第一个总是大于第二个，以便向用户展示减法或除法测验？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T16:59:17.567

你没有。

只需检查哪个更大并相应地呈现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:00:07.870

您生成第二个随机数并将其添加到第一个随机数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:14:34.183

```
var max = 1000;
var rnd = new Random();
int a, b;
do
{
    a = rnd.Next(max);
    b = rnd.Next(max);
} while (a <= b); 
```

您也可以对更复杂的条件使用类似的方法（例如，如果您的任务是生成 2 个总和超过 100 的数字，等等）。

如果满足您的条件的随机数的概率太小以至于生成需要太多时间，那么您将不得不使您的代码更智能，但是对于这个特定的任务，这种方法已经足够好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T17:05:02.593

您可以生成这样的数字（伪代码）：`(int)(a*rand()+b)`其中 a 和 b 控制随机数的范围和起点。

例如，如果`a1=10, b1=1`您得到一个`1-10`. 使用`a2=10`and`b2=11`你会得到 range 中的数字`11-20`，这可能对简单的减法问题有好处。

# ruby - 我如何从字符串中提取单词？

> ID：15589479
> 
> 赞同：0
> 
> 时间：2013-03-23T16:58:02.770
> 
> 标签：ruby

我正在使用 Ruby 1.9.3，并想从这些字符串中提取“Post”和“Topic”词：

```
"[MediaExecsTech] New Topic Creation in Open Technology forum"
"[MediaExecsTech] New Post Creation in Open Technology forum" 
```

有我可以使用的正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:57:12.610

有很多方法可以找到字符串是否包含“主题”或“帖子”，将其打印出来，或返回信息以进行进一步处理，或者使用一些逻辑来单独处理它们。

以下是我可能会做的一些不同的方法：

```
REGEX = /\b(#{ Regexp.union(%w[Topic Post]) })\b/
=> /\b((?-mix:Topic|Post))\b/

ARRAY = [
  "[MediaExecsTech] New Topic Creation in Open Technology forum",
  "[MediaExecsTech] New Post Creation in Open Technology forum"
]

ARRAY.each do |s|
  puts s[REGEX, 1]
end
=> Topic
=> Post 
```

那只是打印找到的单词。

```
ARRAY.map { |s|
  s[REGEX, 1]
}
=> [
     [0] "Topic",
     [1] "Post"
   ] 
```

这将为搜索的每个字符串返回一个数组。如果单词没有出现，则数组元素将是`nil`.

```
ARRAY.each do |s|
  case s[REGEX, 1]
  when 'Topic'
    puts "#{ s } contains Topic"
  when 'Post'
    puts "#{ s } contains Post"
  end

  case s
  when /\bTopic\b/i
    puts "#{ s } contains Topic"
  when /\bPost\b/i
    puts "#{ s } contains Post"
  end
end
=> [MediaExecsTech] New Topic Creation in Open Technology forum contains Topic
=> [MediaExecsTech] New Topic Creation in Open Technology forum contains Topic
=> [MediaExecsTech] New Post Creation in Open Technology forum contains Post
=> [MediaExecsTech] New Post Creation in Open Technology forum contains Post 
```

这些只是打印出字符串以及是否找到了“主题”或“帖子”。您可以进行进一步处理，而不是打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:02:39.453

这将提取主题或帖子标题：

```
thestring.match(/New (Topic|Post) (.+)/)[2] 
```

我相信我误解了你的问题。我认为您确实想要“帖子”和“主题”这两个词。在这种情况下，像 joeframbach 建议的东西应该可以工作：

```
thestring.match(/post|topic/i)[0] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T17:02:45.500

```
yourstring.match(/post|topic/i) 
```

# android - Android Phonegap 上的应用程序错误

> ID：15589482
> 
> 赞同：2
> 
> 时间：2013-03-23T16:58:22.220
> 
> 标签：android, cordova, apk, screen-rotation

我正在测试一个带有一些输入字段和两个按钮的简单 html 文件，在我的 android 设备上安装 apk 文件后，一切似乎都很好，但是当我旋转屏幕时，我收到以下错误 ![在此处输入图像描述](../Images/009ba3e998cb4767fe8af6b8fd285c76.png)

我使用的是带有 android 4.1.2 的三星 Galaxy s3 mini。

我正在使用最新的 phonegap 和 eclipse juno。

如何修复（或隐藏）此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:12:39.690

您应该`android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"`在 AndroidManifest.xml 中添加您的活动，如[PhoneGap API 文档中推荐的那样](http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html)

# c# - SQL注入，使用参数化查询

> ID：15589485
> 
> 赞同：0
> 
> 时间：2013-03-23T16:58:26.887
> 
> 标签：c#, asp.net, mysql, sql, sql-injection

我有一些关于如何在参数化查询的帮助下防止 sql 注入的问题

```
sqlQuery="SELECT * FROM usersTbl WHERE username=@uname AND password=@passwd";
SqlCommand cmd = new SqlCommand(sqlQuery, conn);

SqlParameter[] par = new MySqlParameter[2];

par[0] = new SqlParameter("@uname ", SqlDbType.VarChar,25);
par[1] = new SqlParameter("@passwd", SqlDbType.VarChar, 45); 
```

然后我将它们附加到 SqlCommand 和 ExecuteScalar 上。

例如，客户端`;DROP --`在密码变量中插入字符串，*参数化查询会阻止`DROP`查询被执行*吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:00:48.000

当然，当客户端`';DROP --`在密码字段中传值时，这个会被解析成

```
SELECT * 
FROM usersTbl 
WHERE username=@uname AND password=''';DROP --' 
```

该`command`对象将自动转义在该值上找到的任何单引号。

**更新 1**

正如我已经告诉过你的那样，它不会。因为引号将通过加倍引号来转义。例子，

```
string pass_val = "'; DROP usersTbl;--"; 
```

当你将它传递给命令并且它的值被参数化时，这将变成

```
SELECT * FROM usersTbl WHERE ... AND password='''; DROP usersTbl;--' 
```

并不是

```
SELECT * FROM usersTbl WHERE ... AND password=''; DROP usersTbl;-- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:00:05.060

是的，参数化查询将正确转义任何允许这种情况发生的字符。

# c# - C# PDF 删除 - 文件“被另一个进程使用”

> ID：15589493
> 
> 赞同：1
> 
> 时间：2013-03-23T16:58:58.930
> 
> 标签：c#, pdf, itextsharp, ioexception, delete-file

我已经广泛搜索了这个问题的答案。我知道为什么我会收到异常，但我无法在我的代码中找到它的原因。

基本上，我的代码创建了四个单独的 PDF 文件，将它们加入到大 PDF 文件中，然后删除原始的四个文件。一切都很好，除了我在尝试删除文件时收到 IOException，因为它们“被另一个进程使用”。

这是我用来合并文件的代码：

```
private static Document MergeFiles(string[] fileNames, string finalFileName)
{
    Document doc = new Document(PageSize.A4, 20, 20, 25, 25);
    if (fileNames.Length > 0)
    {
        int a = 0;
        PdfReader reader = new PdfReader(fileNames[a]);
        int n = reader.NumberOfPages;
        FileStream output = new FileStream("C:\\temp\\" + finalFileName, FileMode.Create);
        PdfWriter writer = PdfWriter.GetInstance(doc, output);
        doc.Open();
        PdfContentByte cb = writer.DirectContent;
        PdfImportedPage page;
        int rotation;

        while (a < fileNames.Length)
        {
            int i = 0;
            while (i < n)
            {
                i++;
                doc.SetPageSize(reader.GetPageSizeWithRotation(i));
                doc.NewPage();
                page = writer.GetImportedPage(reader, i);
                rotation = reader.GetPageRotation(i);
                if (rotation == 90 || rotation == 270)
                    cb.AddTemplate(page, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(i).Height);
                else
                    cb.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);
            }
            a++;
            if (a < fileNames.Length)
            {
                reader = new PdfReader(fileNames[a]);
                n = reader.NumberOfPages;
            }
        }
    }
    doc.Close();
    return doc;
} 
```

这是删除文件的代码：

```
private static void DeleteFile(string[] fileNames)
{
    if (fileNames != null)
    {
        for (int x = 0; x < fileNames.Length; x++)
        {
            if(!fileNames[x].Equals(""))
                System.IO.File.Delete(fileNames[x]);
        }
    }
} 
```

任何帮助将不胜感激。当我合并文档时，我认为循环中的某个地方没有关闭（阅读器/作者），但我尝试了很多不同的组合，但似乎没有任何效果。这真的开始让我烦恼了。

**更新** 谢谢大家的评论。我已将我的代码修改为：

```
private static Document MergeFiles(string[] fileNames, string finalFileName)
{
    Document doc = new Document(PageSize.A4, 20, 20, 25, 25);
    if (fileNames.Length > 0)
    {
        while (a < fileNames.Length)
        {
            using (PdfReader reader = new PdfReader(fileNames[a]))
            using (FileStream output = new FileStream("C:\\temp\\" + finalFileName, FileMode.Create))
            using (PdfWriter writer = PdfWriter.GetInstance(doc, output))
            {
                int n = reader.NumberOfPages;
                doc.Open();
                PdfContentByte cb = writer.DirectContent;
                PdfImportedPage page;
                int rotation;

                int i = 0;
                while (i < n)
                {
                    i++;
                    doc.SetPageSize(reader.GetPageSizeWithRotation(i));
                    doc.NewPage();
                    page = writer.GetImportedPage(reader, i);
                    rotation = reader.GetPageRotation(i);
                    if (rotation == 90 || rotation == 270)
                        cb.AddTemplate(page, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(i).Height);
                    else
                        cb.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);
                }
                a++;
                if (a < fileNames.Length)
                {
                    n = reader.NumberOfPages;
                }
            }
        }
    }
    doc.Close();
    return doc;
} 
```

它可以编译，但在运行时出现错误，指向 Using 循环的右括号：

```
System.ObjectDisposedException was unhandled
  Message=Cannot access a closed file. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:07:30.100

你没有处理你的*任何*资源。

`PdfReader`, `PdfWriter`, 和`FileStream`所有实现`IDisposable`。这些都需要被`Dispose`d 或包裹在一个`using`块中（最好是后者）。

我的猜测是`PdfReader`保持这些文件打开的实例。

PS 在方法结束时仅使用它们是不够`Close`的，因为如果在这些调用执行之前发生任何异常，这将使它们“永久”打开（或只要进程运行）。要么将你的清理工作放在一个`finally`块中，要么只使用`using`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:03:49.163

尽管您正在关闭文档 ( `doc.Close();`)，但您并没有关闭文件流、写入器和读取器。

在之后添加`doc.Close();`：

```
writer.Close();
output.Close();
reader.Close(); 
```

# python - 在 Python 中使用哪种数据结构来存储这样的数据？

> ID：15589494
> 
> 赞同：0
> 
> 时间：2013-03-23T16:59:06.227
> 
> 标签：python

我想存储数据[年][月] = 日

年份和月份都可以是字典的键。

像 data[year][month].append(day) 这样的操作是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:03:08.973

您可以使用嵌套字典：

```
data[year] = {}
data[year][month] = [day] 
```

为了使这更容易一点，您可以使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

data = defaultdict(dict)

data[year][month] = [day] 
```

甚至：

```
def monthdict():
    return defaultdict(list)
data = defaultdict(monthdict)

data[year][month].append(day) 
```

后一种结构的演示：

```
>>> from collections import defaultdict
>>> def monthdict():
...     return defaultdict(list)
... 
>>> data = defaultdict(monthdict)
>>> data[2013][3].append(23)
>>> data
defaultdict(<function monthdict at 0x10c9d0500>, {2013: defaultdict(<type 'list'>, {3: [23]})}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:02:25.970

你可以使用 dict-of-dicts-of-lists 吗？

```
data = {'1972' :  {
                   '01': ['a', 'list', 'of', 'things'],
                   '02': ['another', 'list', 'of', 'things'],
                  },
        '1973' :  {
                   '01': ['yet', 'another', 'list', 'of', 'things'],
                  },
        }        

>>> data['1972']['02']
['another', 'list', 'of', 'things']

>>> data['1972']['01'].append(42)
>>> data
{'1972': {'01': ['a', 'list', 'of', 'things', 42],
  '02': ['another', 'list', 'of', 'things']},
 '1973': {'01': ['yet', 'another', 'list', 'of', 'things']}} 
```

# python - Unicode 和语言环境问题

> ID：15589496
> 
> 赞同：2
> 
> 时间：2013-03-23T16:59:09.667
> 
> 标签：python, unicode, python-2.7, locale

我正在努力编写一个使用一些 unicode 属性的 Python（2.7 版）脚本。当我尝试使用嵌入式语言环境包时出现问题。这是我遇到问题的代码片段：

```
# -*- coding: utf-8 -*-
import datetime
import os
import locale
locale.setlocale(locale.LC_ALL, 'greek')
day = datetime.date.today()
dayFull = day.strftime('%A')
myString = u"ΚΑΛΗΜΕΡΑ"
print myString
print dayFull 
```

虽然`dayFull`打印当前日期名称很好（希腊字母），但`myString`在控制台中显示为问号字符。我该如何解决它，有人可以在这里指出我的错误吗？

PS我的系统是Windows 7机器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:45:32.803

在控制台中使用正确的希腊代码页，以及支持希腊字符的字体，例如`Consolas`. 这在 Windows 7 和 Python 2.7.3 中对我有用：

```
C:\>chcp 1253
Active code page: 1253

C:\>python temp.py
ΚΑΛΗΜΕΡΑ
Σάββατο 
```

仅供参考，Python 3.3 与（也是希腊语）737 代码页一起正常工作，但 Python 2.7 打印：

```
C:\>temp.py
????????
Σάββατο 
```

# mysql - 语法中的 SQL 错误

> ID：15589498
> 
> 赞同：-3
> 
> 时间：2013-03-23T16:59:16.260
> 
> 标签：mysql, sql, sql-insert

`INSERT`陈述，

```
INSERT INTO `admin` (`id`,`username`,`password`,`access`) 
VALUES (?,?,?,?); 
```

我收到这个错误

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '?,?,?,?)' 附近使用正确的语法

关于如何解决这个问题的任何想法？

```
sql = "INSERT INTO `admin` (`id`,`username`,`password`,`access`) VALUES (?,?,?,?);";
prepState = DBconnection.prepareStatement(sql);
prepState.setInt(1, newIdNum);
prepState.setString(2, addedUsername);
prepState.setString(3, addedPassword);
prepState.setString(4, addedAccess);
prepState.executeUpdate(sql); 
```

我试图在java中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:02:28.660

很简单，您不是`BINDing`该 SQL 的值，这意味着您的问号不会被替换。看到错误消息中的问号了吗？`?,?,?,?)`

# javascript - 如何将哈希值从页面传递到 URL 到 iframe？

> ID：15589500
> 
> 赞同：0
> 
> 时间：2013-03-23T16:59:20.077
> 
> 标签：javascript, html, iframe

我有一个类似这样的页面：

```
http://mypage.com/about#peter 
```

在该页面的 html 中，我有一个 iframe：

```
<iframe src="doit" /> 
```

我希望#peter 转到 iframe。也就是说，我希望渲染的 iframe 是

```
<iframe src="doit#peter /> 
```

关于如何实现这一点的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:02:53.393

您可以在页面运行时以编程方式创建 iframe 并将哈希标记附加到它。

```
var hash = window.location.hash;
var ifrm = document.createElement("IFRAME"); 
ifrm.setAttribute("src", "http://mypage.com/about" + hash); 
document.body.appendChild(ifrm); 
```

# scala - Scala Parallel Mergesort - 内存不足

> ID：15589502
> 
> 赞同：0
> 
> 时间：2013-03-23T16:59:34.710
> 
> 标签：scala, concurrency, parallel-processing, future

我尝试使用 Scala Futures 编写并行合并排序。但是，当我在 Eclipse 的解释器中对大小为 100 000 的列表运行我的算法时，一切都变得非常缓慢，最终我收到一条错误消息，告诉我内存不足。当我从命令行在解释器中运行它时，它已经挂在大小为 10 000 的列表中（但现在我没有收到错误消息）。

为什么会发生这种情况，有解决办法吗？

```
import scala.actors.Future
import scala.actors.Futures._

object MergeSort{
    def sort[T <% Ordered[T]](toBeSorted :List[T]) :List[T] = toBeSorted match{
      case Nil => Nil
      case List(x) => List(x)
      case someList =>
        val (left, right) = someList splitAt someList.length/2
        val sortedLeft = future { sort(left) }
        val sortedRight = sort(right)
        merge(sortedLeft(), sortedRight, Nil)
    }

    def merge[T <% Ordered[T]](a :List[T], b :List[T], Ack: List[T]) :List[T] = (a, b) match {
      case (Nil, ys) => Ack.reverse ++ ys
      case (xs, Nil) => Ack.reverse ++ xs
      case (x::xs, y::ys) if x < y => merge(xs, y::ys, x::Ack)
      case (x::xs, y::ys) => merge(x::xs, ys, y::Ack)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:06:17.413

您应该尝试使用 Akka 未来并根据您的需要调整 ExecutionContext：

*   [http://doc.akka.io/docs/akka/2.0.1/scala/futures.html](http://doc.akka.io/docs/akka/2.0.1/scala/futures.html)

看起来 std-lib 没有为您提供像这样的用例的良好默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:49:04.187

正如 Rex 所指出的，（任何）Future API 的开销是相当大的，不应被忽略。

不要在上下文切换开销上浪费宝贵的 CPU 和内存。您应该将列表拆分成合理大小的块，并在同一个线程中执行排序。

例如，如果您的机器上有 4 个内核和 4GB 内存。您可以将其拆分为 500MB 的块并同时运行多达 4 个合并排序。这将使您的吞吐量和并行度最大化。

您可以使用 SIP-14 的 ExecutionContext 来限制使用的线程数。

```
private val GLOBAL_THREAD_LIMIT = Runtime.getRuntime.availableProcessors()
private lazy implicit val executionContext =
   ExecutionContext.fromExecutorService(
       Executors.newFixedThreadPool(GLOBAL_THREAD_LIMIT)
) 
```

顺便说一句，我在 SIP-14 中实现了并行外部合并排序。我已经在我的博客上解释了实现细节：http: [//blog.yunglinho.com/blog/2013/03/19/parallel-external-merge-sort/](http://blog.yunglinho.com/blog/2013/03/19/parallel-external-merge-sort/)

# asp.net-mvc-3 - MVC 从外键填充下拉列表

> ID：15589507
> 
> 赞同：2
> 
> 时间：2013-03-23T16:59:52.990
> 
> 标签：asp.net-mvc-3, foreign-keys, html.dropdownlistfor

我已经为此苦苦挣扎了好几天。我需要用流派填充下拉列表。

我的 MovieRepository 来获取类型：

```
public IQueryable<Movies> MoviesAndGenres
{
        get { return db.Movies.Include(m => m.parentGenre); }
} 
```

我的电影模特

```
public virtual Genres parentGenre { get; set; } 
```

流派型号：

```
public class Genres
{
    public Genres()
    {
        this.movies = new HashSet<Movies>();
    }

    [Key]
    public int genreId { get; set; }

    [Required(ErrorMessage = "A genre name is required")]
    [StringLength(25)]
    public String genreName { get; set; }

    public ICollection<Movies> movies { get; set; }
} 
```

我正在尝试使用选择列表传递流派，但我得到的 LINQ to Entities 无法识别 System.String To String() 方法，并且此方法无法转换为存储的表达式。

电影控制器，addMovie 动作：

```
ViewBag.Genres = movieRepository.MoviesAndGenres.Select(m => new SelectListItem 
        {
            Text = m.parentGenre.genreName,
            Value = m.parentGenre.genreId.ToString()
        }).ToList();

        return View(); 
```

看法：

```
@Html.DropDownListFor(m => m.parentGenre, (SelectList)ViewBag.Genres) 
```

任何帮助将不胜感激！

* * *

更新：

存储库：

```
public IQueryable<Genres> MoviesAndGenres
{
        get { return db.Genres; }
} 
```

控制器：

```
var x = movieRepository.MoviesAndGenres.Select(m => new 
        {
            Text = m.genreName,
            Value = m.genreId
        });

        ViewBag.Genres = new SelectList(x);
        return View(); 
```

看法：

```
 @Html.DropDownListFor(m => m.parentGenre, (SelectList)ViewBag.Genres) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:15:40.787

由于无论如何您都在检索所有记录，因此您可以这样做。

```
ViewBag.Genres = movieRepository.MoviesAndGenres.AsEnumerable()
    .Select(m => new SelectListItem 
    {
        Text = m.parentGenre.genreName,
        Value = m.parentGenre.genreId.ToString()
    }); 
```

您还需要将视图更改为：

```
@Html.DropDownListFor(m => m.parentGenre, new SelectList(ViewBag.Genres)) 
```

实际上，更好的方法可能是这样，因为它只检索您需要的特定列：

```
var x = movieRepository.MoviesAndGenres.Select(m => new 
    {
        Text = m.parentGenre.genreName,
        Value = m.parentGenre.genreId
    });

ViewBag.Genres = new SelectList(x) 
```

此外，不再需要 ToList()，因为它已经处于即时状态。

# ruby-on-rails - 从哈希中删除重复项？

> ID：15589509
> 
> 赞同：0
> 
> 时间：2013-03-23T17:00:02.680
> 
> 标签：ruby-on-rails, ruby

我有一个像这样的数组：

```
[
  #<ArtLookup ARL_ART_ID: 1248525, ARL_SEARCH_NUMBER: "4502696", ARL_KIND: 3, ARL_BRA_ID: 569, ARL_DISPLAY_NR: "4502696", ARL_DISPLAY: nil, ARL_BLOCK: 1, ARL_SORT: 1>, 
  #<ArtLookup ARL_ART_ID: 1248525, ARL_SEARCH_NUMBER: "5009285", ARL_KIND: 3, ARL_BRA_ID: 525, ARL_DISPLAY_NR: "5009285", ARL_DISPLAY: nil, ARL_BLOCK: 1, ARL_SORT: 1>,
  #<ArtLookup ARL_ART_ID: 1248525, ARL_SEARCH_NUMBER: "5016786", ARL_KIND: 3, ARL_BRA_ID: 525, ARL_DISPLAY_NR: "5016786", ARL_DISPLAY: nil, ARL_BLOCK: 2, ARL_SORT: 1>,
  ...
] 
```

如何从这个哈希数组中删除重复值？

`arr.uniq`没有帮助我。

我需要按`ARL_DISPLAY_NR` 字段删除重复项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:02:09.527

这不是哈希的用途，您最终可能会遇到`O(n)`复杂的情况来完成它。要求这样做可能表明您的模型中存在设计问题。

也就是说，您可以使用以下内容：

```
hash = {key1: 'val1', key2: 'val2', key3: 'val3', repkey: 'val1'}
uniquevalues = {}
hash.each do |key, value|
  uniquevalues[value] = key
end 
```

获得独特的价值。

{"val1"=>:repkey, "val2"=>:key2, "val3"=>:key3}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:15:24.283

假设您可以从这样的实例中检索`ARL_DISPLAY_NR`字段：`art``ArtLookup`

```
art[:ARL_DISPLAY_NR] 
```

然后您可以通过以下方式根据`ARL_DISPLAY_NR`字段删除重复项：

```
hash_array = [ artLookup_foo, artLookup_bar, ... ]

# this will keep the last one in a group of duplicates
Hash[ hash_array.map{|h| [h[:ARL_DISPLAY_NR], h]} ].values

# or keep the first one
Hash[ hash_array.reverse.map{|h| [h[:ARL_DISPLAY_NR], h]} ].values 
```

但是，它不能保证保持前一个数组中的原始顺序。

# jquery - 响应式花式框但固定导航

> ID：15589515
> 
> 赞同：0
> 
> 时间：2013-03-23T17:00:37.607
> 
> 标签：jquery, fancybox-2

是否可以保持下一个/上一个按钮的位置（横向和纵向相同），即固定位置但保持fancybox的响应能力？

# eclipse - Eclipse 是否默认使用 ant 构建系统？

> ID：15589516
> 
> 赞同：4
> 
> 时间：2013-03-23T17:00:38.770
> 
> 标签：eclipse, ant, build-system

我在 Eclipse 项目中看到一个 .classpath 文件，它似乎不是一个 ant 构建描述文件。所以默认情况下，eclipse是否使用ant来构建它的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T17:06:44.670

不，它没有。您可以通过右键单击项目资源管理器中的项目然后转到 Export --> Ant Buildfile 来创建一个 Ant 构建文件，但 Eclipse 默认情况下不使用它。

# python - 如何使用 Python 在 OpenCV 中裁剪图像

> ID：15589517
> 
> 赞同：343
> 
> 时间：2013-03-23T17:00:43.490
> 
> 标签：python, opencv

如何使用 OpenCV 裁剪图像，就像我之前在 PIL 中所做的那样。

PIL 的工作示例

```
im = Image.open('0.png').convert('L')
im = im.crop((1, 1, 98, 33))
im.save('_0.png') 
```

但是我如何在 OpenCV 上做到这一点？

这是我尝试过的：

```
im = cv.imread('0.png', cv.CV_LOAD_IMAGE_GRAYSCALE)
(thresh, im_bw) = cv.threshold(im, 128, 255, cv.THRESH_OTSU)
im = cv.getRectSubPix(im_bw, (98, 33), (1, 1))
cv.imshow('Img', im)
cv.waitKey(0) 
```

但它不起作用。

我想我错误地使用了`getRectSubPix`. 如果是这种情况，请解释我如何正确使用此功能。

* * *

## 回答 #1

> 赞同：726
> 
> 时间：2013-03-23T17:26:58.580

这很简单。使用 numpy 切片。

```
import cv2
img = cv2.imread("lenna.png")
crop_img = img[y:y+h, x:x+w]
cv2.imshow("cropped", crop_img)
cv2.waitKey(0) 
```

* * *

## 回答 #2

> 赞同：153
> 
> 时间：2013-05-29T20:21:12.630

我有这个问题，在这里找到了另一个答案：[复制感兴趣的区域](https://stackoverflow.com/questions/9084609/how-to-copy-a-image-region-using-opencv-in-python)

如果我们将 (0,0) 视为图像`im`的左上角，则从左到右为 x 方向，从上到下为 y 方向。并且我们将 (x1,y1) 作为左上角顶点，将 (x2,y2) 作为该图像中矩形区域的右下角顶点，然后：

```
roi = im[y1:y2, x1:x2] 
```

[这是一个关于numpy 数组索引和切片](https://web.archive.org/web/20171229114756/https://docs.scipy.org/doc/numpy-dev/user/quickstart.html)的综合资源，它可以告诉你更多关于裁剪图像的一部分的信息。图像将作为一个 numpy 数组存储在 opencv2 中。

:)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2018-12-31T09:44:39.730

此代码将图像从 x=0,y=0 裁剪到 h=100,w=200。

```
import numpy as np
import cv2

image = cv2.imread('download.jpg')
y=0
x=0
h=100
w=200
crop = image[y:y+h, x:x+w]
cv2.imshow('Image', crop)
cv2.waitKey(0) 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2018-11-27T10:03:13.810

请注意，图像切片不是创建 的副本，而是`cropped image`创建. 如果您要加载这么多图像，用切片裁剪图像的相关部分，然后附加到列表中，这可能会浪费大量内存。`pointer``roi`

假设您每个加载 N 个图像，`>1MP`并且您只需`100x100`要从左上角开始的区域。

`Slicing`：

```
X = []
for i in range(N):
    im = imread('image_i')
    X.append(im[0:100,0:100]) # This will keep all N images in the memory. 
                              # Because they are still used. 
```

或者，您可以通过 复制相关部分`.copy()`，因此垃圾收集器将删除`im`。

```
X = []
for i in range(N):
    im = imread('image_i')
    X.append(im[0:100,0:100].copy()) # This will keep only the crops in the memory. 
                                     # im's will be deleted by gc. 
```

发现这一点后，我意识到[user1270710](https://stackoverflow.com/users/1270710/user1270710)[的评论](https://stackoverflow.com/questions/15589517/how-to-crop-an-image-in-opencv-using-python#comment92938795_15589825)之一提到了这一点，但我花了很长时间才发现（即调试等）。所以，我认为值得一提。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-06-21T07:26:52.970

具有 opencv 复制边框功能的稳健裁剪：

```
def imcrop(img, bbox):
   x1, y1, x2, y2 = bbox
   if x1 < 0 or y1 < 0 or x2 > img.shape[1] or y2 > img.shape[0]:
        img, x1, x2, y1, y2 = pad_img_to_fit_bbox(img, x1, x2, y1, y2)
   return img[y1:y2, x1:x2, :]

def pad_img_to_fit_bbox(img, x1, x2, y1, y2):
    img = cv2.copyMakeBorder(img, - min(0, y1), max(y2 - img.shape[0], 0),
                            -min(0, x1), max(x2 - img.shape[1], 0),cv2.BORDER_REPLICATE)
   y2 += -min(0, y1)
   y1 += -min(0, y1)
   x2 += -min(0, x1)
   x1 += -min(0, x1)
   return img, x1, x2, y1, y2 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-04-17T05:29:43.427

下面是裁剪图像的方法。

**image_path：**要编辑的图像的路径

**coords：** x/y 坐标元组 (x1, y1, x2, y2)[在 mspaint 中打开图像并检查视图选项卡中的“标尺”以查看坐标]

**saved_location**：保存裁剪图像的路径

```
from PIL import Image
    def crop(image_path, coords, saved_location:
        image_obj = Image.open("Path of the image to be cropped")
            cropped_image = image_obj.crop(coords)
            cropped_image.save(saved_location)
            cropped_image.show()

if __name__ == '__main__':
    image = "image.jpg"
    crop(image, (100, 210, 710,380 ), 'cropped.jpg') 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-04-23T14:09:13.537

这是一些用于更强大的 imcrop 的代码（有点像 matlab 中的）

```
def imcrop(img, bbox): 
    x1,y1,x2,y2 = bbox
    if x1 < 0 or y1 < 0 or x2 > img.shape[1] or y2 > img.shape[0]:
        img, x1, x2, y1, y2 = pad_img_to_fit_bbox(img, x1, x2, y1, y2)
    return img[y1:y2, x1:x2, :]

def pad_img_to_fit_bbox(img, x1, x2, y1, y2):
    img = np.pad(img, ((np.abs(np.minimum(0, y1)), np.maximum(y2 - img.shape[0], 0)),
               (np.abs(np.minimum(0, x1)), np.maximum(x2 - img.shape[1], 0)), (0,0)), mode="constant")
    y1 += np.abs(np.minimum(0, y1))
    y2 += np.abs(np.minimum(0, y1))
    x1 += np.abs(np.minimum(0, x1))
    x2 += np.abs(np.minimum(0, x1))
    return img, x1, x2, y1, y2 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-31T11:02:00.920

或者，您可以使用 tensorflow 进行裁剪，使用 openCV 从图像制作数组。

```
import cv2
img = cv2.imread('YOURIMAGE.png') 
```

现在`img`是一个 (imageheight, imagewidth, 3) 形状数组。使用 tensorflow 裁剪数组：

```
import tensorflow as tf
offset_height=0
offset_width=0
target_height=500
target_width=500
x = tf.image.crop_to_bounding_box(
    img, offset_height, offset_width, target_height, target_width
) 
```

用 tf.keras 重新组装图像，这样我们就可以查看它是否有效：

```
tf.keras.preprocessing.image.array_to_img(
    x, data_format=None, scale=True, dtype=None
) 
```

这会在笔记本中打印出图片（在 Google Colab 中测试）。

* * *

整个代码在一起：

```
import cv2
img = cv2.imread('YOURIMAGE.png')

import tensorflow as tf
offset_height=0
offset_width=0
target_height=500
target_width=500
x = tf.image.crop_to_bounding_box(
    img, offset_height, offset_width, target_height, target_width
)

tf.keras.preprocessing.image.array_to_img(
    x, data_format=None, scale=True, dtype=None
) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-12T19:48:11.523

为了让您更轻松，这里是我使用的代码：

```
 top=514
    right=430
    height= 40
    width=100
    croped_image = image[top : (top + height) , right: (right + width)]
    plt.imshow(croped_image, cmap="gray")
    plt.show() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-02T06:18:42.880

通过使用此功能，您可以轻松裁剪图像

```
def cropImage(Image, XY: tuple, WH: tuple, returnGrayscale=False):
    # Extract the x,y and w,h values
    (x, y) = XY
    (w, h) = WH
    # Crop Image with numpy splitting
    crop = Image[y:y + h, x:x + w]
    # Check if returnGrayscale Var is true if is then convert image to grayscale
    if returnGrayscale:
        crop = cv2.cvtColor(crop, cv2.COLOR_BGR2GRAY)
    # Return cropped image
    return crop 
```

**希望这可以帮助**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-18T05:15:47.280

在代码下方裁剪或感兴趣区域（ROI）以供面部使用

```
import cv2 
face_cascade = cv2.CascadeClassifier('haarcascade_frontalface_default.xml')
image=cv2.imread("ronaldo.jpg")
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
faces = face_cascade.detectMultiScale(gray, 1.3, 5)
for (x,y,w,h) in faces:
     cv2.rectangle(img,(x,y),(x+w,y+h),(255,255,0),2) 
     roi_image = gray[y:y+h, x:x+w]
cv2.imshow("crop/region of interset image",roi_image) 
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

[检查参考](https://www.geeksforgeeks.org/opencv-python-program-face-detection/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-07T14:38:18.937

```
# Import packages
import cv2

import numpy as np
img = cv2.imread('skewness.png')
print(img.shape) # Print image shape

cv2.imshow("original", img)

# Cropping an image
cropped_image = img[80:280, 150:330]

# Display cropped image
cv2.imshow("cropped", cropped_image)

# Save the cropped image
cv2.imwrite("Cropped Image.jpg", cropped_image)

#The function waitKey waits for a key event infinitely (when \f$\texttt{delay}\leq 0\f$ ) or for delay milliseconds, when it is positive
cv2.waitKey(0)

#The function destroyAllWindows destroys all of the opened HighGUI windows.
cv2.destroyAllWindows() 
```

# vba - 带有 Unix 文件的 VBA 脚本运行时库 - LF 作为行尾而不是 CRLF 问题

> ID：15589518
> 
> 赞同：1
> 
> 时间：2013-03-23T17:00:45.710
> 
> 标签：vba

我正在编写一个非常简单的解析器来将文本文件读入 Excel。文件超出了 Excel 2012 中的可用行数，因此我必须采用逐行方法。

我已经测试了 Microsoft Scripting Runtime Library、TextStream Object 和 ReadLine 方法。

就我将 CRLF 作为行尾的 Windows 文件而言，它工作正常，而当只有 LF 标记行尾时它会失败。

我在 VBA 之外看到了很多解决方案，在 VBA 中是否有任何可行的解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:48:36.593

Start by making with a test file that uses only LFs as line endings in c:\temp\lfs.txt

This will read the file into a string:

```
Dim FileNum As Integer
Dim sBuf As String
Dim sTemp As String

 FileNum = FreeFile
 Open "c:\temp\lfs.txt" For Input As FileNum

 While Not EOF(FileNum)
     Line Input #FileNum, sBuf
     sTemp = sTemp & sBuf
 Wend

 Close FileNum

' Now, what do we have?  First the string itself:
Debug.Print sTemp
' Are there any CRs in it?  
Debug.Print Replace(sTemp, vbCr, "CR")
' LFs?
Debug.Print Replace(sTemp, vbLf, "LF")
' Replace the LFs with CRLFs:
Debug.Print Replace(sTemp, vbLf, vbCrLf)

Now if you write it back out to file, you should be able to use it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:06:34.587

我使用了以下由 LF 分隔的非常简单的文本文件。以下 vba 代码对我有用。也许您可以在 TextStream.ReadLine 方法失败的地方发布文本文件数据的简短示例？

![在此处输入图像描述](../Images/17967361b6ae210a11d88ba099f9727b.png)

```
Private Const TEXT_FILE_PATH As String = "C:\Temp\VBA\textFileForUnix.txt"

Public Sub test()
    Dim targetSheet As Worksheet
    Set targetSheet = ThisWorkbook.ActiveSheet
    ReadText sheet:=targetSheet, textFilePath:=TEXT_FILE_PATH
End Sub

Private Sub ReadText(ByRef sheet As Worksheet, ByRef textFilePath As String)
    Dim scriptingFileSystem As Scripting.FileSystemObject
    Dim scriptingFile As Scripting.File
    Dim scriptingStream As Scripting.TextStream

    Set scriptingFileSystem = New Scripting.FileSystemObject
    Set scriptingFile = scriptingFileSystem.GetFile(textFilePath)

    Set scriptingStream = scriptingFile.OpenAsTextStream(ForReading)
    Dim r As Long
    Dim c As Byte
    With scriptingStream
        r = 1
        c = 1
        Do While Not .AtEndOfStream
          sheet.Cells(r, c).Value = .ReadLine
          r = r + 1
        Loop
       .Close
    End With

    Set scriptingFile = Nothing
    Set scriptingFileSystem = Nothing
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-08T13:29:27.060

这个单行将修复我遇到的任何“不寻常”的行尾，以实现正确的 CRLF。特别是它会修复单个 LF 或单个 CR 或 LF-CR。

```
 result$ = Replace(Replace(Replace(Replace(Replace(txt$, vbLf & vbCr, vbLf), vbCrLf, vbLf), vbLf, vbCrLf), vbCr, vbCrLf), vbCrLf & vbLf, vbCrLf) 
```

# c# - DbContext 查询性能比 ObjectContext 差

> ID：15589520
> 
> 赞同：18
> 
> 时间：2013-03-23T17:00:50.433
> 
> 标签：c#, .net, entity-framework

我最近将我的实体模型从使用 4.1 的 ObjectContext 移动到使用 5.0 的 DbContext。我开始后悔这样做，因为我注意到使用 DbContext 与 ObjectContext 的查询性能很差。这是测试场景：

两种上下文都使用具有大约 600 个表的相同数据库。两者都关闭了 LazyLoading 和 ProxyCreation（代码示例中未显示）。两者都有预先生成的视图。

测试首先进行 1 次调用以加载元数据工作区。然后在一个执行 100 次的 for 循环中，我新建一个上下文并进行一次调用，该调用采用前 10 次。（我在 for 循环内创建上下文，因为这模拟了在 WCF 服务中使用，这将创建每次的上下文）

```
for (int i = 0; i < 100; i++)
{
    using (MyEntities db = new MyEntities())
    {
        var a = db.MyObject.Take(10).ToList();
    } 
} 
```

当我使用 ObjectContext 运行它时，大约需要 4.5 秒。当我使用 DbContext 运行它时，大约需要 17 秒。我使用 RedGate 的性能分析器对此进行了分析。对于 DbContext，罪魁祸首似乎是一个名为 UpdateEntitySetMappings 的方法。这在每个查询中都会调用，并且似乎检索元数据工作空间并循环遍历 OSpace 中的每个项目。AsNoTracking 没有帮助。

编辑：为了提供更好的细节，问题与 DbSet 与 ObjectSet 的创建\初始化有关，而不是实际查询。当我使用 ObjectContext 进行调用时，创建 ObjectSet 平均需要 42 毫秒。当我使用 DbContext 进行调用时，创建内部数据库集大约需要 140 毫秒。ObjectSet 和 DbSet 都从元数据工作区进行一些实体集映射查找。我注意到的是，DbSet 为工作区中的所有类型执行此操作，而 ObjectSet 没有。我猜（还没有尝试过）具有较少表的模型的性能差异较小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T20:06:37.130

我也一直担心代码优先方法的性能不佳，并且我在与您类似的场景中执行了一些基准测试

[http://netpl.blogspot.com/2013/05/yet-another-orm-micro-benchmark-part-23_15.html](http://netpl.blogspot.com/2013/05/yet-another-orm-micro-benchmark-part-23_15.html)

结果并不令人惊讶，因为 DbContext 是 ObjectContext 的包装器，它必须为了简单而牺牲性能。但是，我的测试表明：

*   您检索的记录越多，差异就越小
*   您检索的记录越多，如果您想更快，关闭跟踪就越重要

例如，仅检索 10 条记录

![在此处输入图像描述](../Images/27e02882c6ad691cec81801c0a6038a8.png)

请注意，代码优先比模型优先慢得多，并且跟踪和不跟踪之间没有明显的区别 - 两种观察结果都与您的完全一样。

但是，在检索 10000 行时，您有

![在此处输入图像描述](../Images/e0690793e6eca29309623f5ba244f6f3.png)

请注意，在 nottracking 版本中，代码优先和模型优先几乎没有区别。此外，两者的性能都出奇的好，几乎与原始的 ado.net 数据读取器一样快。

请关注我的博客条目以获取更多详细信息。

这个简单的基准帮助我首先接受了代码的本质。由于两个功能，我仍然更喜欢它用于较小的项目：poco 实体和迁移。另一方面，对于性能是关键要求的项目，我永远不会选择两者中的任何一个。这实际上意味着我可能永远不会再使用模型优先的方法了。

（附注：我的基准测试还显示 nHibernate 存在问题。尽管我咨询了两个每天使用 NH 的独立开发人员，但我仍然没有找到任何人来帮助我解释这一点）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:11:23.290

DbContext 是 ObjectContext 的包装器。这是关于您的问题的好[答案](https://stackoverflow.com/a/10480101/1803269)。有可能是为了更容易使用，他们牺牲了性能。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-01T19:31:17.577

我使用[Simple.Data](http://goo.gl/5WMZl)来查询数百万条记录，它运行得非常好和快。

# php - 这样的token方式合理吗？

> ID：15589527
> 
> 赞同：-2
> 
> 时间：2013-03-23T17:01:23.623
> 
> 标签：php, mysql, token

登录成功后，创建token，记录在mysql中。创建的令牌通过会话进一步传递。

首先，受密码保护的页面检查会话令牌是否与 mysql 中的令牌相同。

其他受密码保护的页面只能通过第一页（例如，称为菜单）获得。

在第一个受密码保护的页面中创建额外的令牌，称为 page_token（也记录在 mysql 中？；没有 mysql 是否有更好/更快的方法？；可能是这样的：

```
(isset($_SESSION) == $_SESSION['page_token'])) 
```

会话令牌保持不变，page_token 在每次页面重新加载后都会更改。

在所有其他页面上检查会话令牌和 page_token 是否与 mysql 中的令牌相同。

这样的方法好吗？可能存在更好的方法（一些链接）？

谢谢

**更新**

网上搜的。理解上述方法是不合理的。足以检查会话登录。

但要尽可能确定特定密码保护页面的访问者与输入正确用户名和密码的访问者相同。

所以接下来的问题

1) 你觉得这个教程怎么样[http://wblinks.com/notes/secure-session-management-tips](http://wblinks.com/notes/secure-session-management-tips)

2）你对代码有什么看法？普通用户可以在一个会话期间更改任何以下 HTTP 吗？

```
if( $_SESSION['loggedin'] != 1 or $_SESSION['time_when_form_submitted'] > date("Y-m-d H:i:s")
or
$_SESSION['_USER_LOOSE_IP'] != long2ip(ip2long($_SERVER['REMOTE_ADDR']) & ip2long("255.255.0.0"))
or
$_SESSION['HTTP_USER_AGENT'] != $_SERVER['HTTP_USER_AGENT']
or
$_SESSION['HTTP_ACCEPT_LANGUAGE'] != $_SERVER['HTTP_ACCEPT_LANGUAGE']
or
$_SESSION['HTTP_ACCEPT'] != $_SERVER['HTTP_ACCEPT']
or
$_SESSION['HTTP_ACCEPT_ENCODING'] != $_SERVER['HTTP_ACCEPT_ENCODING']
 ) {
header('Refresh: 0; URL=http://www.domain.com/login.php');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:22:29.770

如果你想在登录表单中使用令牌，我记得我在这里看过一个很好的教程[http://www.youtube.com/watch?v=nNU1CYryF_8](http://www.youtube.com/watch?v=nNU1CYryF_8)

在您检查用户和密码是否正确后，如果您不想检查每个页面，请加载登录详细信息，您可以创建一个会话变量来存储用户 ID 或类似的东西，这样您就可以将其用于 is_loggedin( ） 功能

# twitter - 正在搜索带有 Unicode 字符/Apple 表情符号的推文？

> ID：15589533
> 
> 赞同：8
> 
> 时间：2013-03-23T17:01:42.650
> 
> 标签：twitter

我正在编译一个推文语料库以进行情绪分析，并试图用 Apple Emoji 字符抓取推文。

我发现其中一张脸的 unicode 字符为：U+1F604 (U+D83D U+DE04), UTF-8: F0 9F 98 84

到目前为止，我还没有得到任何有意义的结果。如果我搜索`\ud83d\ude04`我会得到一些推文，但没有任何用处。 `\U0001f604`搜索时不返回任何内容。

我有什么办法可以在 Twitter 上查询这些字符吗？

我正在为 API 使用 python-twitter 包装器，但如果存在更好的替代方案，我愿意使用其他东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-29T12:04:41.483

正如@Terence Eden 指出的那样，twitters REST 搜索 api 不适用于表情符号字符，但流 API 可以（截至 2016 年 1 月）。

有一些工具可以在 python 中访问 twitters API。我用得最多的那个`tweepy`。它可以安装`pip`。

[关于设置流 api](http://docs.tweepy.org/en/latest/streaming_how_to.html)的tweepy 文档很容易理解。您过滤的字符串需要包含实际的表情符号字符（例如：''）。

请注意，这会将表情符号搜索为“单词”：即被空白包围。找不到像“免费”这样的东西！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-26T13:08:36.830

这是可能的 - 但它有点棘手......

您不能使用标准的 Twitter 搜索 - 但可以使用流式搜索。

Ruby 和 Node中的[https://github.com/mroth/emojitrack-feeder](https://github.com/mroth/emojitrack-feeder)提供了开源库。

# css - CSS3：基本状态、动画和返回

> ID：15589534
> 
> 赞同：0
> 
> 时间：2013-03-23T17:01:42.760
> 
> 标签：css

基本上，我有一个给定宽度和高度的元素。当我向它添加“缩放”类时，我希望它改变它的大小和位置。我让它与适当的 webkit 动画（关键帧）一起工作。

问题是当我删除“缩放”类时，它突然恢复到原始大小和位置，我很想用动画来做。

请注意，这是一个可以通过使用过渡属性来解决的示例，但在我的实际情况中，它不能，因为我有一个相当复杂的关键帧动画。

那么，如何有一个基本状态，当一个类被添加时动画到一个新状态，当类被移除时将动画反转到基本状态呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:05:52.413

您遇到的问题不会通过过渡来解决。

使转换以两种方式起作用的原因通常是您通常在一个类中设置它，并在一个状态中更改属性。这样，您就可以一直设置转换，并且只更改属性。

如果仅将转换设置为更改状态，则一旦将其删除，转换就不再存在于元素中，因此更改是立即的。

如果添加课程确实是您想要的程序（出于其他原因），那么您有 3 个可能性

1.  正如评论中所建议的，在更改为基本状态时，您应该添加另一个类，该类仅具有反向播放动画的属性。

2.  在基本元素中设置反向动画，在添加的类中设置动画。

3.  转到一个精心设计的系统，在该系统中您真正删除了动画结束事件中的类，并且您所做的事情会触发它（我认为太复杂了）

    元素不可能被*动画 - 过渡 -*一旦你从元素中删除它

# ruby-on-rails - 升级 Shoulda gem 会导致 RSpec 和 Ruby on Rails 出错

> ID：15589536
> 
> 赞同：0
> 
> 时间：2013-03-23T17:01:43.890
> 
> 标签：ruby-on-rails, rspec, rspec-rails, shoulda

在我将我的 shoulda gem 升级到 3.4.0 后，我的测试将不再运行。

语境：

*   红宝石 1.9.3-p392
*   导轨 3.2.12
*   Rspec 2.13.0 Mac
*   OS X 10.8.3

当我设置我的 Gemfile 并运行时，`bundle exec rspec spec`我收到以下错误：

```
#Gemfile #1
group :test do
  gem 'rspec-rails', '2.13.0'
  gem 'shoulda', '3.4.0'
end 
```

错误：`gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- rspec (LoadError)`

```
#Gemfile #2
group :test do
  gem 'factory_girl_rails', '4.2.1'
  gem 'rspec-rails', '2.13.0'
  gem 'shoulda-matchers', '1.5.0'
end 
```

错误：`gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- rspec (LoadError)`

```
#Gemfile #3 
group :test do
  gem 'factory_girl_rails', '4.2.1' 
  gem 'rspec', '2.13.0'
  gem 'shoulda', '3.4.0'
end 
```

错误：`/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- rspec/rails (LoadError)`

这些是唯一有效的 Gemfile 版本，但它们似乎不是正确的设置：

```
#Gemfile #4
group :test do
  gem 'factory_girl_rails', '4.2.1'
  gem 'rspec', '2.13.0'
  gem 'rspec-rails', '2.13.0'
  gem 'shoulda-matchers', '1.5.0'
end

#Gemfile #5
group :test do
  gem 'factory_girl_rails', '4.2.1'
  gem 'rspec', '2.13.0'
  gem 'rspec-rails', '2.13.0'
  gem 'shoulda', '3.4.0'
end 
```

完整错误跟踪示例（典型）：

```
/Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- rspec (LoadError)
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/shoulda-matchers-1.5.0/lib/shoulda/matchers/integrations/rspec.rb:2:in `<top (required)>'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/shoulda-matchers-1.5.0/lib/shoulda/matchers.rb:5:in `<top (required)>'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/shoulda-matchers-1.5.0/lib/shoulda-matchers.rb:1:in `<top (required)>'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
    from /Users/wrburgess/dev/jbrb/league-server/config/application.rb:8:in `<top (required)>'
    from /Users/wrburgess/dev/jbrb/league-server/config/environment.rb:2:in `require'
    from /Users/wrburgess/dev/jbrb/league-server/config/environment.rb:2:in `<top (required)>'
    from /Users/wrburgess/dev/jbrb/league-server/spec/spec_helper.rb:3:in `require'
    from /Users/wrburgess/dev/jbrb/league-server/spec/spec_helper.rb:3:in `<top (required)>'
    from /Users/wrburgess/dev/jbrb/league-server/spec/config/initializers/app_settings_spec.rb:1:in `require_relative'
    from /Users/wrburgess/dev/jbrb/league-server/spec/config/initializers/app_settings_spec.rb:1:in `<top (required)>'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `load'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `block in load_spec_files'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `each'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/rspec-core-2.13.1/lib/rspec/core/configuration.rb:819:in `load_spec_files'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/rspec-core-2.13.1/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/rspec-core-2.13.1/lib/rspec/core/runner.rb:80:in `run'
    from /Users/wrburgess/.rvm/gems/ruby-1.9.3-p392@league/gems/rspec-core-2.13.1/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:09:04.870

> 将 shoulda-matchers 升级到 1.5.4 并将 gem 组更改为开发和测试

从 1.5.X 到 1.5.4 有一个回归。我遇到了同样的问题。

# java - 在 Java 中向/在单独的类中发送/创建对象

> ID：15589540
> 
> 赞同：0
> 
> 时间：2013-03-23T17:02:02.127
> 
> 标签：java

如何在一个类中使用方法在单独的类中创建对象？

IE：我有一个类`JFrame`在`ActionListener`里面扩展。单击按钮时，`ActionListener`应该在 Main 类而不是`JFrame`类中创建一个对象。这可能吗？如果是这样，这是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:08:31.983

在主类中创建一个静态方法（或者如果您可以访问 jframe 中的主类对象，即使是实例方法也可以），它会创建该类的对象。然后从你的动作监听器中调用它。

# mercurial - mercurial + bitbucket + windows 7，如何设置？

> ID：15589543
> 
> 赞同：0
> 
> 时间：2013-03-23T17:02:15.233
> 
> 标签：mercurial, push, windows-7-x64, bitbucket

感谢 Stackoverflow 的帮助，我能够在 bitbucket 上设置一个帐户和存储库，并使用密码手动将我的本地存储库推送到云端。我找不到有关如何使用 Windows 7 在 mercurial 和 bitbucket 之间设置 SSH 的正确教程，也找不到有关如何自动化推送命令以避免始终编写每个的完整路径的正确教程存储库。任何人都可以帮助解决这两个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:01:34.427

> 找到有关如何在 mercurial 和 bitbucket 之间设置 SSH 的适当教程

关键词：plink, 选美

> 关于如何自动化推送命令以避免始终编写每个存储库的完整路径的正确教程

*本地或远程*仓库的“完整路径” ？

如果

*   本地和使用`-R "path/to/local/repo"`- 只是`cd`在使用 HG 之前总是回购
*   远程 - 将所有需要的存储库添加到存储库的 .hgrc 中（来自 repo-dir 根目录的 .hg\hgrc）`[paths]`

`[paths]`

```
default = git+ssh://git@github.com/lazybadger/Fiver-l10n.git

sf = ssh://bigbadger@hg.code.sf.net/u/bigbadger/code 
```

使用这些名称，我可以从默认值拉/推到默认值 || sf as URLs: `hg push sf`, "default" 作为默认目标可以完全省略

# php - Extracting mysql data from other server

> ID：15589553
> 
> 赞同：2
> 
> 时间：2013-03-23T17:03:14.347
> 
> 标签：php, mysql

I have seen a few websites which are allowing live status of indianrail.gov. Status such as real-time availability is visible in their websites. My question is how do they do this? As we are not knowing the mysql user name, database name and password of other servers then how we can extract data in real-time. Here is one example: this website clearly states in the top that we are not affilated to indian railway then also they are able to show data, any light will be appreciated

```
 http://indiarailinfo.com/     the website which is showing other data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:11:14.393

If I understood you correctly, you are asking How site `A` can display information from site `B`? Usually, this is all done in site `B` - this site has a web service that site `A` calls to get the data. All site `A` needs is the url to the service. In order for the service to work with site `A`, it should have its set of requirements and format, and site `B`'s service should conform to that format.

# haskell - 为什么差异列表不是可折叠的实例？

> ID：15589556
> 
> 赞同：10
> 
> 时间：2013-03-23T17:03:20.020
> 
> 标签：haskell, church-encoding, difference-lists

dlist[包](http://hackage.haskell.org/packages/archive/dlist/0.5/doc/html/Data-DList.html)包含`DList`数据类型，它有很多实例，但没有`Foldable`or `Traversable`。在我看来，这是两个最“类似列表”的类型类。是否存在`DList`不是这些类的实例的性能原因？

此外，该包确实实现了`foldr`and `unfoldr`，但没有实现其他折叠功能。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-23T23:38:56.243

您应该考虑的一种替代方法`DList`是使用 Church 编码的列表。这个想法是您将列表表示为一个不透明的值，该值知道如何`foldr`在列表上执行 a。这需要使用`RankNTypes`扩展：

```
{-# LANGUAGE RankNTypes #-}

import Prelude 
import Control.Applicative
import Data.Foldable (Foldable)
import qualified Data.Foldable as F
import Data.Traversable (Traversable)
import qualified Data.Traversable as T

-- | Laws:
--
-- > runList xs cons nil == xs
-- > runList (fromList xs) f z == foldr f z xs
-- > foldr f z (toList xs) == runList xs f z
newtype ChurchList a = 
    ChurchList { runList :: forall r. (a -> r -> r) -> r -> r }

-- | Make a 'ChurchList' out of a regular list.
fromList :: [a] -> ChurchList a
fromList xs = ChurchList $ \k z -> foldr k z xs

-- | Turn a 'ChurchList' into a regular list.
toList :: ChurchList a -> [a]
toList xs = runList xs (:) []

-- | We can construct an empty 'ChurchList' without using a @[]@.
nil :: ChurchList a 
nil = ChurchList $ \_ z -> z

-- | The 'ChurchList' counterpart to '(:)'.  Unlike 'DList', whose
-- implementation uses the regular list type, 'ChurchList' doesn't
-- rely on it at all.
cons :: a -> ChurchList a -> ChurchList a
cons x xs = ChurchList $ \k z -> k x (runList xs k z)

-- | Append two 'ChurchList's.  This runs in O(1) time.  Note that
-- there is no need to materialize the lists as @[a]@.
append :: ChurchList a -> ChurchList a -> ChurchList a
append xs ys = ChurchList $ \k z -> runList xs k (runList ys k z)

-- | Map over a 'ChurchList'.  No need to materialize the list.
instance Functor ChurchList where
    fmap f xs = ChurchList $ \k z -> runList xs (\x xs' -> k (f x) xs') z

-- | The 'Foldable' instance is trivial, given the 'ChurchList' law.
instance Foldable ChurchList where
    foldr f z xs = runList xs f z

instance Traversable ChurchList where
    traverse f xs = runList xs step (pure nil)
        where step x rest = cons <$> f x <*> rest 
```

这样做的缺点是没有有效`tail`的操作 a `ChurchList`——折叠 a`ChurchList`很便宜，但重复反尾很昂贵......

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-23T17:34:30.953

`DList a`是一个围绕 的新类型包装器`[a] -> [a]`，它具有`a`一个逆变位置，因此它不能实现`Foldable`or `Traversable`，甚至不能`Functor`直接实现。实现它们的唯一方法是在常规列表之间进行转换（参见`foldr`实现），这破坏了差异列表的性能优势。

# events - 看似多余的事件和事件处理程序

> ID：15589559
> 
> 赞同：2
> 
> 时间：2013-03-23T17:03:26.317
> 
> 标签：events, gwt, event-handling

我会用一个例子来解释。我的 GWT 项目有一个公司模块，允许用户添加、编辑、删除、选择和列出公司。

其中，添加、编辑和删除操作将用户返回到 CompanyList 页面。因此，拥有三个不同的事件 -`CompanyAddedEvent, CompanyUpdatedEvent and CompanyDeletedEvent`以及它们各自的事件处理程序 - 对我来说似乎有点矫枉过正，因为它们的功能绝对没有区别。

让一个事件管理三个操作可以吗？我认为另一种选择是使用一些事件，例如`CompanyListInvokedEvent`. 但是，在我认为不合适的地方，事件实际上不是被调用的列表，而是被添加/更新/删除的公司。

如果它只是一个模块，我会通过三个单独的事件来完成任务。但其他 10 个这样的模块正面临这种困境。这意味着 10x3 = 30 个事件类以及它们各自的 30 个处理程序。这个数字足够大，我可以重新考虑。什么是一个好的解决方案？

**更新 -**

@ColinAlworth 的回答让我意识到我可以轻松地使用泛型而不是愚蠢的解决方案。以下代码表示一个事件 EntityUpdatedEvent，每当更新实体时都会引发该事件。

事件处理程序类 -

```
public class EntityUpdatedEvent<T> extends GwtEvent<EntityUpdatedEventHandler<T>>{

    private Type<EntityUpdatedEventHandler<T>> type;
    private final String statusMessage;

    public EntityUpdatedEvent(Type<EntityUpdatedEventHandler<T>> type, String statusMessage) {
        this.statusMessage = statusMessage;
        this.type = type;
    }

    public String getStatusMessage() {
        return this.statusMessage;
    }

    @Override
    public com.google.gwt.event.shared.GwtEvent.Type<EntityUpdatedEventHandler<T>> getAssociatedType() {
        return this.type;
    }

    @Override
    protected void dispatch(EntityUpdatedEventHandler<T> handler) {
        handler.onEventRaised(this);
    }
} 
```

事件处理程序接口 -

```
public interface EntityUpdatedEventHandler<T> extends EventHandler {
    void onEventRaised(EntityUpdatedEvent<T> event);
} 
```

将处理程序添加到事件总线 -

```
eventBus.addHandler(CompanyEventHandlerTypes.CompanyUpdated, new EntityUpdatedEventHandler<Company>() {

    @Override
    public void onEventRaised(EntityUpdatedEvent<Company> event) {
        History.newItem(CompanyToken.CompanyList.name());
        Presenter presenter = new CompanyListPresenter(serviceBundle, eventBus, new CompanyListView(), event.getStatusMessage());
        presenter.go(container);
    }
}); 
```

同样，我还有另外两个已添加和已删除的通用事件，从而消除了与事件相关的代码库中的全部冗余。

对此解决方案有什么建议吗？

PS >[这个讨论](http://www.mail-archive.com/google-web-toolkit-contributors@googlegroups.com/msg11692.html)提供了关于这个问题的更多见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T18:32:39.193

为了回答这个问题，让我首先提出另一种思考同一类问题的方式——我们将使用方法而不是事件。

在我的分层应用程序中，两个模块通过一个接口进行通信（请注意，这些方法都是`void`，所以它们很像事件 - 调用者不希望得到回复）：

```
package com.acme.project;

public interface CompanyServiceInteface {
  public void addCompany(CompanyDto company) throws AcmeBusinessLogicException;

  public void updateCompany(CompanyDto company) throws AcmeBusinessLogicException;

  public void deleteCompany(CompanyDto company) throws AcmeBusinessLogicException;
} 
```

这对我来说似乎有点矫枉过正——为什么不把这个 API 的大小减少到一种方法，并添加一个 enum 参数来简化它。这样，当我构建一个替代实现或需要在我的单元测试中模拟它时，我只有一个构建方法而不是三个。当我制作应用程序的其余部分时，这显然是多余的——为什么不只`ObjectServiceInterface.modify(Object someDto, OperationEnum invocation);`为所有 10 个模块工作呢？

* * *

一个答案是，您可能想要彻底修改其中一个的实现，而不是其他的 - 现在您已将其简化为仅一种方法，所有这些都属于该 switch 案例。另一个是，一旦以这种方式简化，往往会进一步简化——也许将其合并`create`为`update`一种方法。完成此操作后，所有调用点都必须确保履行该方法合同的所有可能细节，而不仅仅是一个特定的细节。

如果这些事件的接收者很简单并且仍然如此，那么可能没有充分的理由不只拥有一个对于所有可能的用例来说显然足够通用的 ModelModifiedEvent - 也许只是包装 ID 以请求所有客户端模块刷新它们该对象的视图。如果将来出现只有一种事件很重要的用例，那么现在必须更改该事件，所有导致该事件被创建的站点也必须更改，以便它们正确填充这个新字段。

Java 商店通常不使用 Java，因为它是最漂亮的语言，或者因为它是最容易编写或找到开发人员的语言，而是因为它相对容易维护和重构。在设计 API 时，重要的是要考虑未来的需求，还要考虑修改当前 API 需要什么——你的 IDE 几乎肯定有一个快捷键来查找特定方法或构造函数的所有调用，允许你轻松找到所有使用它的地方并更新它们。因此，请考虑您期望的其他用例，以及更新代码库的其余部分的难易程度。

最后，不要忘记泛型——对于我上面的例子，我可能会做一个 DtoServiceInterface 来简化事情，所以我只用三个方法声明一个接口，并实现它并根据需要引用它。以同样的方式，您可以制作一组三种`GwtEvent`类型（带有`*Handler`接口，也可能`Has*Handlers`有），但保持它们对所有可能的类型都是通用的。在这里考虑`com.google.gwt.event.logical.shared.SelectionEvent<T>`一个示例-在您的情况下，您可能希望将模型对象类型设置为参数，以便处理程序可以检查他们正在处理的事件类型（请记住，泛型在 Java 中被删除），或者从一个`EventBus`为每个模型类型。

# fixtures - jasmine-jquery 固定装置未加载

> ID：15589560
> 
> 赞同：3
> 
> 时间：2013-03-23T17:03:27.800
> 
> 标签：fixtures, jasmine-jquery

问题是**jasmine-jquery没有从****spec/fixtures**文件夹中加载我的灯具。现在，当我查看 jasmine-jquery 源代码时，fixture 的默认路径是**spec/javascripts/fixtures**。在我拥有的版本中，没有**spec/javascripts/fixtures**文件夹。这似乎是 Ruby gem 的东西。我还尝试创建该**javascripts 文件夹**，但仍然无法加载它。当我将我的夹具片段放在 SpecRunner.html 正文中时 - 它可以工作。

这是我的html片段：

```
<ul class="fr">
    <li></li>
</ul> 
```

规格文件：

```
describe("something to describe", function() {

    it("should see a DOM element", function() {
        loadFixtures("custom.html");
        expect($(".fr")).toExist();
    });
}); 
```

这是一个错误或路径的东西吗？

**已解决：这是 google-chrome 的问题。默认情况下，它不允许通过同源策略访问其他域。解决方案是从本地服务器运行应用程序，或使用 firefox。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-25T21:38:49.763

它确实与 Chrome 有关。这是一个称为[同源策略](http://en.wikipedia.org/wiki/Same-origin_policy)的安全概念。

您仍然可以在禁用该安全检查的情况下使用 Chrome，而不是从本地服务器运行 Firefox 或应用程序。

只需使用命令行参数运行 Chrome/Chromium `--allow-file-access-from-files`：

```
google-chrome --allow-file-access-from-files 
```

**记住！**由于这是一项安全功能，因此禁用它会使您的计算机处于危险之中。建议仅在测试本地网站/应用程序时使用此参数（通过不同的快捷方式/别名）。

# perl - 使用 Strawberry Perl 抓取以特定单词开头的行

> ID：15589566
> 
> 赞同：0
> 
> 时间：2013-03-23T17:04:07.180
> 
> 标签：perl

这可能是微不足道的，但我是 Perl 的新手，需要帮助。我有一个巨大的文本文件，其中包含

```
 .
        .
    TOTAL REVENUE 416917.000000 
        .
        .
        .
    TOTAL REVENUE 415870.000000
        .
        .
        . 
```

我只是想将以 'TOTAL' 开头的行复制到另一个文件中。我怎样才能在草莓 Perl 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:22:46.130

假设你在 Windows 上？您是否尝试过 DOS 提示符下的“findstr”命令？像：

```
findstr /B "TOTAL" your_file_name > matches.txt 
```

/B 修饰符将匹配所有以“TOTAL”开头的行。'>' 会将所有匹配的行保存到 'matches.txt' 文件中。

# scala - 匿名函数缺少参数

> ID：15589567
> 
> 赞同：0
> 
> 时间：2013-03-23T17:04:19.853
> 
> 标签：scala, parameters, anonymous

编译器抱怨下面的代码，说：缺少扩展函数的参数类型

我不知道如何让它快乐。有任何想法吗？

```
def unwrapMap(m: Map[_, _]) =
  { (vcType: String) =>
    m.map {
      case (k, v) => {
        (k,v)  // echo the map for sample purposes
      }
    }.toMap
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:08:28.813

您应该为 Map 提供具体类型，而不是使用“_”丢弃它们：

```
 def unwrapMap[A, B](m: Map[A, B]) =
  { (vcType: String) =>
    m.map {
      case (k, v) => {
        (k,v)  // echo the map for sample purposes
      }
    }.toMap
  } 
```

这样，编译器可以推断在方法“.map”中创建的匿名函数的类型。

# jquery - jQuery .animate() 具有多个值的单个 CSS 属性

> ID：15589569
> 
> 赞同：0
> 
> 时间：2013-03-23T17:04:31.713
> 
> 标签：jquery, css, jquery-animate, background-position

我正在尝试使用 jQuery 的 .animate() 方法为元素的背景位置设置动画。通过定义 x 和 y 值来设置 background-position 属性，如下所示：

```
background-position: 100px 100px; 
```

Webkit 现在支持`background-position-x`and `background-position-y`，但在 Firefox 中尚不支持。如果我只为一个值设置动画——

例如。 `$(div).animate({'background-position':'200px'}, 1000);`— 它自动为 X 值而不是方式设置动画。我找不到独立动画 Y 值的方法。

语法正确吗？串联的一些技巧？

注意：我确实使用 background-position-y 让它在 webkit 中工作，但也希望 FF 支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:07:25.223

只需使用以下内容：

```
background-position:0 200px; 
```

其中 0 是 x，200 是 y：

```
background-position:x y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:36:37.900

我相信这需要一个 jQuery 扩展。它有点笨重，但这[是一个工作示例](http://jsfiddle.net/BPxhG/)

```
/**
 * @author Alexander Farkas
 * v. 1.02
 *
 * Edited by Nelson Wells for jQuery 1.8 compatibility
 */
(function($) {
    $.extend($.fx.step,{
        backgroundPosition: function(fx) {
            if (fx.pos === 0 && typeof fx.end == 'string') {
                var start = $.css(fx.elem,'backgroundPosition');
                start = toArray(start);
                fx.start = [start[0],start[2]];
                var end = toArray(fx.end);
                fx.end = [end[0],end[2]];
                fx.unit = [end[1],end[3]];
            }
            var nowPosX = [];
            nowPosX[0] = ((fx.end[0] - fx.start[0]) * fx.pos) + fx.start[0] + fx.unit[0];
            nowPosX[1] = ((fx.end[1] - fx.start[1]) * fx.pos) + fx.start[1] + fx.unit[1];
            fx.elem.style.backgroundPosition = nowPosX[0]+' '+nowPosX[1];

            function toArray(strg){
                strg = strg.replace(/left|top/g,'0px');
                strg = strg.replace(/right|bottom/g,'100%');
                strg = strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");
                var res = strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);
                return [parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];
            }
        }
    });
})(jQuery);

$('.test').animate({
  'background-position-x': '100px',
  'background-position-y': '200px',
   backgroundPosition:"+100px 200px"
}, 400, 'linear'); 
```

# jquery - qtips2 导致空白屏幕，而不是在 IE9 中显示工具提示

> ID：15589570
> 
> 赞同：1
> 
> 时间：2013-03-23T17:04:32.543
> 
> 标签：jquery, asp.net-mvc, tooltip, qtip2

我有一个 MVC 应用程序，它广泛使用[qtips2](http://craigsworks.com/projects/qtip2/)来显示气泡工具提示。显示的内容包括`Cufon`字体。工具提示在和中完美显示`Chrome`，但是当我将鼠标悬停在应该弹出工具提示而不是显示工具提示的文本上时，整个屏幕变白。如果我右键单击空白屏幕并转到源代码，那么我会看到以下内容而不是页面内容：`Firefox``Safari``IE 9`

```
<style type="text/css">cufoncanvas{text-indent:0!important;}@media screen{cvml\:shape,cvml\:rect,cvml\:fill,cvml\:shadow{behavior:url(#default#VML)!important;display:block!important;antialias:true!important;position:absolute!important;}cufoncanvas{position:absolute!important;text-align:left!important;}cufon{display:inline-block!important;position:relative!important;vertical-align:text-bottom!important;}cufon cufontext{position:absolute!important;left:-10000in!important;font-size:1px!important;}a cufon{cursor:pointer}}@media print{cufon cufoncanvas{display:none!important;}}</style> 
```

这个样式标签是源代码中*唯一*显示的东西。

以下是源中工具提示的示例：

```
<mark data-url="../Tooltips/Tourism">tourism</mark> 
```

并且初始化qtips的源码如下：

```
$(function () {
     $('[data-url]').each(function (i) {
         var element = $(this);
         element.qtip({
             content: {
                 text: "Loading...",
                 ajax: {
                     url: element.data('url')
                 }
             },
             position: {
                 viewport: $(window)
             }
         });
     });
}); 
```

有谁知道为什么会出错`IE 9`并知道解决此问题的方法？如果做不到这一点，有没有人有其他`jQuery`工具提示插件的经验，这些插件可以很好地处理`Cufon`字体并在所有现代浏览器中可靠地工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:43:39.387

这也发生在我身上，这是因为我两次包含 jQuery 库。不用说删除其中一个参考可以解决问题。

# delphi - Delphi 2010：TListview 的分组项

> ID：15589571
> 
> 赞同：1
> 
> 时间：2013-03-23T17:04:34.867
> 
> 标签：delphi, listview, grouping, listitem

我正在开发我的一个项目（仅供我个人使用），以创建类似“ **MediaStore** ”的东西来管理我在 MySQL 数据库中的媒体文件（DVD 和 CD 内容）。

（见下一张图片预览我的应用程序）

![我的申请预览](../Images/d4f0e409b9bc42bd7ca113c1540398d3.png)

但问题是我想将每个 subFolder 分组在分组的 listItems 中（如下所示的示例）......我不确定在 delphi 中是否可能（使用 listview 或任何其他组件）。

![我的应用程序列表视图应该是什么样的](../Images/38082ce6eb570a19bcd383f24ad9e811.png)

**那么在delphi中有没有可能实现这个目标呢？**

并提前感谢。

# windows - Windows 上 Dia 中的字体已更改，我的图表已损坏

> ID：15589572
> 
> 赞同：0
> 
> 时间：2013-03-23T17:04:35.480
> 
> 标签：windows, dia

突然，我所有图表中的字体都有字体，破坏了其中一些的布局。我尝试删除 Dia 的配置，但没有帮助。

我能想到的唯一可能导致它的原因是昨天安装了 LibreOffice。Dia 如何决定使用哪些字体以及从哪里获得它们？我没有更改 Dia 中的任何字体设置，我的图表都使用默认字体。

我正在使用直径 0.97.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:29:10.477

Dia 使用操作系统提供的标准字体。

*   您是否在第二个系统上检查了您的图表？
*   您是否尝试卸载触发您的问题的软件？
*   你能举一个你正在使用的字体的例子吗？

# c - 从C中的函数获取返回值

> ID：15589578
> 
> 赞同：0
> 
> 时间：2013-03-23T17:05:13.200
> 
> 标签：c, function, pointers

考虑这两个功能：

```
int add1(int x,int y)
{
return x+y;
}

void add2(int x,int y,int *sum)
{
*sum=x+y;
} 
```

我通常使用 add1 形式的函数，但我发现一些代码使用 add2 形式的函数。
即使大小返回值很大（如数组或结构），我们也可以返回它的指针
我想知道是否有任何理由使用第二种形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:11:44.953

还有返回成功状态的原因。

有很多功能，例如：

```
bool f(int arg1, int arg2, int *ret)
{
} 
```

where `bool`（或`enum`）返回函数的成功。而不是检查`if ret is null...`（如果你有超过 1 个变量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:07:24.437

如果你想从你的函数中返回两个值，那么 C 是无能为力的，除非你像你的函数 add2 一样使用指针。

```
void add2()
{

 /* Some Code */

 *ptr1=Something;
 *ptr2=Something;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:10:26.490

形式 2 对于 C 中的“多次返回”非常常见。一个典型的例子是将地址返回到缓冲区和缓冲区的长度：

```
/* Returns a buffer based on param. Returns -1 on failure, or 0 on success.
Buffer is returned in buf and buflen. */
int get_buffer(void *param, char **buf, int *buflen); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T17:08:14.660

当你使用像`int`. 事实上，在这种情况下，第二个更慢，因为您必须**取消引用**传递的指针。只有在您的目标是传入一组值时，它才在这种情况下有用）

**除非您想向函数传递非常大的数据**，否则请始终使用形式 1的函数。在这种情况下，表格 2 会更快。

我们使用第二种形式的原因是因为对于大对象，我们希望避免复制它们。我们可以将它们的**内存地址**传递给函数，而不是**复制它们。**这就是指针进来的地方。因此，与其给函数**所有数据**，不如告诉它**这些数据在哪里**。（我希望这个比喻足够好）

 ******* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T17:09:13.777

这在很大程度上取决于偏好和当地惯例。第二种形式可能与一堆其他类似的函数一起使用，其中每个函数中的第三个参数总是作为指向返回值的指针传递。

就个人而言，我几乎所有目的都喜欢第一种形式：它不需要传递指针，并且在处理返回值时允许某种类型的灵活性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-23T17:17:10.687

当返回的对象很大时，或者当函数的返回值用于其他目的（例如，发出错误信号）时，通过指针传递的写入内存来返回值是合理的。在您显示的代码中，这两种情况都不是，所以我会选择第一个实现。

从函数返回指针时，必须确保指向的内存在函数调用后有效。这意味着，指针必须指向堆，因此需要在堆上进行分配。这给来电者带来了负担；他必须释放他没有明确分配的内存。******

# jsf - 如何将 JSF 导航规则与 ResourceBundle 内容一起使用

> ID：15589583
> 
> 赞同：1
> 
> 时间：2013-03-23T17:05:27.043
> 
> 标签：jsf, internationalization

我有一个多语言网站，其内容由 ResourceBundles 管理。如何使用 JSF 导航插入到使用段落内容的网站部分的链接。

**示例 1：所需的 HTML 输出**

```
<p>Simply <a href="contact.xhtml">contact us</a> to find out more.</p> 
```

**示例 2：实现上述目的的简单 facelt**

```
<p>Simply <h:link outcome="contact" value="contact us"/> to find out more.</p> 
```

**期望的结果：相同但使用 ResourceBundle**

小面

```
<p>
    <h:outputText value="${template['paragraph']}">
        <f:param>
            <h:link outcome="contact" value="${template['contactUs']}"/>
        </f:param>
    </h:outputText>
</p> 
```

资源包

```
paragraph=Simply {0} to find out more.
contactUs=contact us 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T19:57:17.310

问题不完全是 JSF 导航规则，而是您不能使用`<f:param>`将 JSF 组件指定为捆绑参数，更不用说普通的普通 HTML 子项了。另外，请注意您不能使用`<f:param>`in `<h:outputText>`，而只能使用 in `<h:outputFormat>`。

`<f:param value>`无论如何，为了实现功能要求，您必须像自己一样以转义的方式写下 HTML 。

```
<h:outputFormat value="#{template['paragraph']}" escape="false">
    <f:param value="&lt;a href='#{request.contextPath}/contact.xhtml'&gt;#{template['contactUs']}&lt;/a&gt;" />
</h:outputFormat> 
```

或者，如果您想像对其属性`ViewHandler#getBookmarkableURL()`一样使用 JSF，`<h:link>``outcome`

```
<h:outputFormat value="#{template['paragraph']}" escape="false">
    <f:param value="&lt;a href='#{facesContext.application.viewHandler.getBookmarkableURL(facesContext, '/contact', null, false)}'&gt;#{template['contactUs']}&lt;/a&gt;" />
</h:outputFormat> 
```

由于您不是第一个偶然发现此问题的人，而且变通办法也很尴尬，因此 JSF 实用程序库[OmniFaces](http://omnifaces.org)最近更新了其`<o:param>`组件，支持在未指定值时将子项编码为参数值。从 OmniFaces 1.5 开始，您应该可以按如下方式使用它：

```
<h:outputFormat value="#{template['paragraph']}" escape="false">
    <o:param><h:link outcome="contact" value="#{template['contactUs']}" /></o:param>
</h:outputFormat> 
```

# .htaccess - 基本 URL 重写：如何有一个 css 链接、img src 等，忽略它？

> ID：15589584
> 
> 赞同：1
> 
> 时间：2013-03-23T17:05:28.213
> 
> 标签：.htaccess, mod-rewrite

我有一个网站正在运行，`localhost/pm`并且 RewriteBase 正确设置为`/pm/`. 我的文档中有一个链接标签：`<link ... href="themes/default/css/default.css">`.

当 url`localhost/pm`或`localhost/pm/foo`CSS 工作正常时。但是，当 URL 中有更多斜杠时，例如`localhost/pm/foo/bar`样式表更改为`foo/themes/default/css/default.css`.

我如何让它工作而不必在链接标签中放置某种 PHP 路径解析？

```
# invoke rewrite engine
RewriteEngine On
RewriteBase /pm/

# Protect application and system files from being viewed
RewriteRule ^(?:system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

编辑：

基本上我现在需要的是：如果请求包含文件夹名称`/themes/`，则废弃之前的所有内容`/themes/`并将其余部分重写为`/pm/themes/...`

我像这样尝试过：`RewriteRule ^.*(/themes/.*)$ /pm/themes/$1`但我得到一个内部服务器错误。为什么？

如果我这样做：（`RewriteRule ^.*(/themes/.*)$ /pm/themes/`即，只需从末尾删除 $1 ）并使用 URL`http://localhost/pm/foo/themes/foo/`生成的物理位置`http://localhost/pm/themes`也是预期的，这反过来意味着至少我的正则表达式是正确的。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:18:06.967

RewriteRule 几乎是正确的

```
RewriteRule ^.*(/themes/.*)$ /pm/themes/$1 
```

这重写`http://localhost/pm/foo/themes/default/css/default.css`为`http://localhost/pm/themes/themes/default/css/default.css`，这`themes`太过分了。改用这个

```
RewriteRule /themes/(.*)$ /pm/themes/$1 [L] 
```

但是现在你有一个无限的重写循环，因为`/pm/themes/..`一次又一次地重写。为了防止这种情况，您需要`RewriteCond`排除`/pm/themes`

```
RewriteCond %{REQUEST_URI} !^/pm/themes/
RewriteRule /themes/(.*)$ /pm/themes/$1 [L] 
```

现在请求只被重写一次，你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:09:15.593

您可能需要在您的之前添加以下行`RewriteRule`：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

如果请求的文件或目录不存在，它只会评估您的重写规则。

您应该发布您的`.htaccess`文件，以便我们提供更好的建议

# ruby-on-rails - Doorkeeper - 点击授权导致错误 auth = nil

> ID：15589591
> 
> 赞同：1
> 
> 时间：2013-03-23T17:06:06.987
> 
> 标签：ruby-on-rails, oauth, oauth-2.0, omniauth, doorkeeper

当点击“授权”按钮时，我得到“Called id for nil”

这是我的授权控制器中出现问题的行：

```
 46             auth = authorization.authorize 
```

Auth 在错误页面上显示为零：

```
Local Variables
auth    nil 
```

这是我的请求参数：

```
{"utf8"=>"✓", "authenticity_token"=>"0m07v0jefxjeMOMt7U5rjRMJj0qhA27nBsamwKvHSMw=",
"client_id"=>"159c4b355fdef4a8e2887734f2f95af42d6b1199ddf94bb8a0fffb10bd3de0c4",
"redirect_uri"=>"http://localhost:3001/users/auth/provider/callback",
"state"=>"3b654057f568f5f542bfea92f07c9403fcfdc80a7a3208e4", "response_type"=>"code",
"scope"=>"public_read", "commit"=>"Authorize", "action"=>"create",
"controller"=>"oauth/authorizations"} 
```

此外，查看授权/拒绝表单时，@pre_auth 变量包含以下内容：

```
#<Doorkeeper::OAuth::PreAuthorization:0x007fc83c8d7a28 @server=
<Doorkeeper::Config:0x007fc83c0a3640 @orm=:active_record, @authenticate_resource_owner=
<Proc:0x007fc83c0a34d8@/Users/austen/sites/provider/config/initializers/doorkeeper.rb:7>,
@access_token_expires_in=nil, @enable_application_owner=true,
@confirm_application_owner=true, @default_scopes=public_read,
@optional_scopes=public_write private_read private_write, @scopes=public_read public_write
private_read private_write>, @client=#<Doorkeeper::OAuth::Client:0x007fc83c8d7a78
@application=#<Doorkeeper::Application id: 1, name: "WhiteDeals", uid:
"159c4b355fdef4a8e2887734f2f95af42d6b1199ddf94bb8a0f...", secret:
"d21e16cc50873d60a3f3aacf421c84766e9c183ea7d989f70e6...", redirect_uri:
"http://localhost:3001/users/auth/provider/callback", created_at: "2013-03-22 02:15:55",
updated_at: "2013-03-23 06:33:29", owner_id: 1, owner_type: "User">>,
@response_type="code", @redirect_uri="http://localhost:3001/users/auth/servant/callback",
@scope=nil, @state="3b654057f568f5f542bfea92f07c9403fcfdc80a7a3208e4", @error=nil> 
```

# r - 在R中的同一行打印字符串和变量内容

> ID：15589601
> 
> 赞同：235
> 
> 时间：2013-03-23T17:07:06.747
> 
> 标签：r, printing

有没有办法在同一行打印文本和变量内容？例如，

```
wd <- getwd()
print("Current working dir: ", wd) 
```

我找不到任何有关允许我执行此操作的语法的信息。

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2013-03-23T17:08:41.047

你可以`paste`使用`print`

```
print(paste0("Current working dir: ", wd)) 
```

或者`cat`

```
cat("Current working dir: ", wd) 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-03-23T17:18:12.117

> {glue} 提供了更好的字符串插值，请参阅[我的其他答案](https://stackoverflow.com/a/56119797/946850)。此外，正如 Dainis 正确提到的，`sprintf()`并非没有问题。

还有`sprintf()`：

```
sprintf("Current working dir: %s", wd) 
```

要打印到控制台输出，请使用`cat()`or `message()`：

```
cat(sprintf("Current working dir: %s\n", wd))
message(sprintf("Current working dir: %s\n", wd)) 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-03-23T17:14:02.127

或使用`message`

```
message("Current working dir: ", wd) 
```

@agstudy 的回答在这里更合适

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-02-21T20:39:13.273

最简单的方法是使用`paste()`

```
> paste("Today is", date())
[1] "Today is Sat Feb 21 15:25:18 2015" 
```

`paste0()`将导致以下结果：

```
> paste0("Today is", date())
[1] "Today isSat Feb 21 15:30:46 2015" 
```

请注意，字符串和 x 之间没有默认分隔符。在字符串末尾使用空格是一种快速修复：

```
> paste0("Today is ", date())
[1] "Today is Sat Feb 21 15:32:17 2015" 
```

然后将任一功能与`print()`

```
> print(paste("This is", date()))
[1] "This is Sat Feb 21 15:34:23 2015" 
```

或者

```
> print(paste0("This is ", date()))
[1] "This is Sat Feb 21 15:34:56 2015" 
```

正如其他用户所说，您也可以使用`cat()`

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-05-13T20:59:30.697

[{glue} 包](https://glue.tidyverse.org/)提供字符串插值。在示例中，`{wd}`用变量的内容替换。还支持复杂的表达式。

```
library(glue)

wd <- getwd()
glue("Current working dir: {wd}")
#> Current working dir: /tmp/RtmpteMv88/reprex46156826ee8c 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.2.1）于 2019 年 5 月 13 日创建)

请注意打印输出如何不包含`[1]`工件和`"`引号，其他答案使用`cat()`.

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-06-21T14:38:15.687

正如其他用户所说， cat() 可能是最好的选择。

@krlmlr 建议使用 sprintf() ，它目前是排名第三的答案。sprintf() 不是一个好主意。来自 R 文档：

> 格式字符串传递给操作系统的 sprintf 函数，不正确的格式会导致后者使 R 进程崩溃。

没有充分的理由使用 sprintf() 而不是 cat 或其他选项。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-29T11:37:11.863

您可以使用 paste0 或 cat 方法将字符串与 R 中的变量值结合起来

例如：

```
paste0("Value of A : ", a)

cat("Value of A : ", a) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-25T08:42:28.273

一个技巧是将您的代码包含在`()`这样的中：

```
(wd <- getwd()) 
```

这意味着将当前工作目录分配给`wd`然后打印。

# android - 全屏表格布局

> ID：15589602
> 
> 赞同：0
> 
> 时间：2013-03-23T17:07:12.803
> 
> 标签：android, android-layout

我有 12 个基本相同的视图，我想将它们排列在一个覆盖整个屏幕的网格中。根据设备的方向，我想使用 3x4 或 4x3 网格。

据我了解，这个主题基本上有三种方法：

1.  用一个`GridView`
2.  使用嵌套`LinearLayout`实例
3.  用一个`TableLayout`

我想要一个布局

1.  自动适应方向变化（就像`GridView`这样）
2.  使用所有可用的屏幕空间（就像嵌套`LinearLayout`实例一样）
3.  不允许滚动（并且没有“不能再滚动”的效果`GridView`）
4.  允许我在我的所有物品上强制使用相同的尺寸

默认情况下，`GridView`具有滚动功能并且不会填满屏幕，而`LinearLayout`不会`TableLayout`自动适应方向变化。

目前我正在使用`GridView`禁用[滚动](https://stackoverflow.com/questions/4852867/how-to-disable-gridview-scrolling-in-android)和[自定义适配器](https://stackoverflow.com/a/11101422/857390)，它根据方向和容器的高度设置项目视图的最小高度以强制填充屏幕。这可行，但感觉就像一个非常丑陋的黑客。

根据方向动态构建嵌套`LinearLayout`实例也可能有效，尽管我没有尝试过。

这似乎是一个常见的目标（[1](https://stackoverflow.com/questions/7067449/android-how-to-stretch-rows-in-the-gridview-to-fill-screen) , [2](https://stackoverflow.com/questions/5690144/how-can-i-force-a-gridview-to-use-the-whole-screen-regardless-of-display-size?rq=1) , [3](https://stackoverflow.com/questions/9310606/make-full-screen-grid-on-android) , [4](https://stackoverflow.com/questions/8697681/android-gridview-adjusting-to-screen-size)），但所有建议的解决方案要么像我的一样老套，要么不满足我的一些要求。

由于我是 Android 开发的新手，我不确定我是否遗漏了一些东西。

**实现这一点的最佳方式是什么？**

我的目标是 API 8 级及以上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:27:33.130

> 使用 GridView

A`GridView`是一个小部件，当您想以类似网格的方式显示具有更大数据集的数据时，您将使用该小部件（因为`GridView`的回收机制将提供比正常构建的层次结构更高的性能）。这不是您的情况，因为您希望从一开始就看到所有视图，并且从我的角度来看， a 的开销`GridView`并不值得。

> 使用嵌套的 LinearLayout 实例

一个不错的选择，但要避免嵌套权重。您可以使用两个`LinearLayout`在最长方向上的权重（纵向为垂直，横向为水平）放置在`RelativeLayout`一个居中的锚视图中。

> 使用表格布局

另外一个选项。使用`stretchColumns`宽度选项和`weight`高度`TableRows`选项。

> 根据设备的方向，我想使用 3x4 或 4x3 网格。实现这一点的最佳方式是什么？

没有最优的方式，以上两种方案都可以，也可以 [自己做布局](https://stackoverflow.com/questions/12512773/set-the-height-of-view-to-make-it-square-by-knowing-only-its-width-weight)。

# android - Android：无法将新值存储到 Arraylists

> ID：15589610
> 
> 赞同：0
> 
> 时间：2013-03-23T17:07:29.937
> 
> 标签：android, static, arraylist, return

我试图为 Android 设备做一个 XML 文件资源管理器，并根据用户选择的文件，打开并读取该文件。但是，当我解析 XML 并将这些值发送到显示这些值的类时遇到问题。我有一些解析值的列表，但这些值仅存储在第一个读取文件中。如果我选择另一个文件，在窗口中它总是显示相同的值（第一次读取的值）。我认为有一个问题，因为我使用静态在 2 个类之间传输这些值，并且永远不会存储新值。如果这是问题，将值传递给这两个类的解决方案是什么？谢谢 这是我解析不同文件并将这些值存储到列表中的代码。

```
public class XMLPullParserHandler {
    static List<Puntuacion> puntuaciones;
    private static Puntuacion puntuacion;
    static List<String> nombres = new ArrayList<String>();
    static List<String> a = new ArrayList<String>();
    static List<String> e = new ArrayList<String>();
    static List<String> sr = new ArrayList<String>();
    static List<String> pc = new ArrayList<String>();
    static List<String> ps = new ArrayList<String>();
    static List<String> ir = new ArrayList<String>();
    static List<String> ip = new ArrayList<String>();
    static List<String> por = new ArrayList<String>();

    private static String text;

    public XMLPullParserHandler() {
        puntuaciones = new ArrayList<Puntuacion>();
    }

    public static List<Puntuacion> getPuntuacion() {
        return puntuaciones;
    }

    public List<Puntuacion> parse(InputStream is) {

        XmlPullParserFactory factory = null;
        XmlPullParser parser = null;
        try {
            factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
            parser = factory.newPullParser();

            parser.setInput(is, null);

            int eventType = parser.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                String tagname = parser.getName();
                switch (eventType) {
                case XmlPullParser.START_TAG:
                    if (tagname.equalsIgnoreCase("TEST")) {
                        // create a new instance of puntuacion

                        puntuacion = new Puntuacion();
                    }
                    break;

                case XmlPullParser.TEXT:
                    text = parser.getText();
                    break;

                case XmlPullParser.END_TAG:
                    if (tagname.equalsIgnoreCase("TEST")) {

                        puntuaciones.add(puntuacion);
                    } else if (tagname.equalsIgnoreCase("Nom_Test")) {
                        puntuacion.setValor((text));
                        nombres.add(text);
                    } else if (tagname.equalsIgnoreCase("NUMERO_ACIERTOS")) {
                        puntuacion.setValor_Transformado((text));

                        a.add(text);
                    } else if (tagname.equalsIgnoreCase("NUMERO_ERRORES")) {
                        puntuacion.setValor_PS((text));
                        e.add(text);

                } else if (tagname.equalsIgnoreCase("VALOR_PC")) {
                    puntuacion.setValor_PS((text));
                    pc.add(text);

                } else if (tagname.equalsIgnoreCase("VALOR_PS")) {
                    puntuacion.setValor_PS((text));
                    ps.add(text);

            } else if (tagname.equalsIgnoreCase("VALOR_IP")) {
                puntuacion.setValor_PS((text));
                ip.add(text);

        } else if (tagname.equalsIgnoreCase("VALOR_IR")) {
            puntuacion.setValor_PS((text));
            ir.add(text);

        }
        else if (tagname.equalsIgnoreCase("VALOR_POR")) {
            puntuacion.setValor_PS((text));
            por.add(text);

        }
                    break;

                default:
                    break;
                }
                eventType = parser.next();
            }

        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return puntuaciones;
    }

    public static String getNombre(int posicion){
        String[] ListN = new String[nombres.size()];
        ListN = nombres.toArray(ListN);
        return ListN[posicion];
    }
    public  static String getA(int posicion){
        String[] ListA = new String[a.size()];
        ListA = a.toArray(ListA);
        return ListA[posicion];
    }
    public  static String getE(int posicion){
        String[] ListE = new String[e.size()];
        ListE = e.toArray(ListE);
        return ListE[posicion];
    }
    public  static String getPC(int posicion){
        String[] ListPC = new String[pc.size()];
        ListPC = pc.toArray(ListPC);
        return ListPC[posicion];
    }
    public  static String getPS(int posicion){
        String[] ListPS = new String[ps.size()];
        ListPS = ps.toArray(ListPS);
        return ListPS[posicion];
    }
    public  static String getIP(int posicion){
        String[] ListIP = new String[ip.size()];
        ListIP = ip.toArray(ListIP);
        return ListIP[posicion];
    }
    public  static String getIR(int posicion){
        String[] ListIP = new String[ir.size()];
        ListIP = ir.toArray(ListIP);
        return ListIP[posicion];
    }
    public static String getP(int posicion){
        String[] ListIP = new String[por.size()];
        ListIP = por.toArray(ListIP);
        return ListIP[posicion];
    }

} 
```

我将 Arraylists 检索到另一个类中的方式类似于以下示例：

```
PS1.setText(XMLPullParserHandler.getPS(0));
IR1.setText(XMLPullParserHandler.getIR(0)); 
```

感谢您的时间

编辑：这是在 XMLPullParserActivity 中生成 XMLPullParserHandler 的新实例的代码：

```
 public class XMLPullParserActivity {

        public static  void Parse(Context context){

            List<Puntuacion> puntuacion = null;
            try {
                XMLPullParserHandler parser = new XMLPullParserHandler();
                puntuacion = parser.parse(context.getAssets().open(MainActivity.fileName()));

            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    } 
```

MainActivity 当我调用 Parse() 方法时：

```
file = new File(path.get(position));
                file.getName();
                XMLPullParserHandler parser = new XMLPullParserHandler();

                XMLPullParserActivity.Parse(this);
                    Intent i = new Intent(MainActivity.this, Correccion.class);
                     startActivity(i);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:19:20.823

实际上，问题在于使用`static`字段。当类加载时，您`ArrayLists`只初始化一次。`XMLPullParserHandler`之后，您只需调用`add()`这些列表。因此，当您解析新文件时，您只是在为以前的文件添加值。我建议您重新设计您的应用程序：

*   返工您`XMLPullParserHandler`以解析文件并返回您`List`的自定义项目。它不应该存储任何信息，只是解析并返回
*   `XMLPullParserHandler`每次需要解析文件时创建一个新实例，调用它的`parse()`方法，它会返回一个项目列表，然后显示这些项目

希望这可以帮助。

# java - Java 单线程聊天应用程序

> ID：15589612
> 
> 赞同：1
> 
> 时间：2013-03-23T17:07:35.350
> 
> 标签：java, swing, timer, network-programming, client-server

我正在尝试学习网络编程。我的任务是使用 java swing 创建一个单线程客户端服务器聊天应用程序。我在更新 GUI 时遇到问题。我采用了一个 textarea 来显示消息和另一个 textarea 来发送消息。有一个按钮，您单击以发送消息。我正在使用计时器每 5 秒更新一次 GUI。应用程序运行。GUI 最初更新，然后屏幕冻结。谁能帮我？我想知道我哪里出错了。

```
package chattingapplication;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.Timer;

/**
 *
 * @author Qanita
 */
public class ServerMessenger extends javax.swing.JFrame {
    private int port;
    private ServerSocket server;
    private Socket client;
    private BufferedReader clientMessage;
    private PrintWriter serverMessage;
    private Timer timer;
    private ActionListener updateDisplay;
    private String receivingMessage;
    private String sendingMessage;

/**
 * Creates new form ServerMessenger
 */
public ServerMessenger() {
    initComponents();
    port = 13;
    try {
        server = new ServerSocket(port);
        client = null;
        client = server.accept();
        clientMessage = new BufferedReader(new InputStreamReader(client.getInputStream()));
        serverMessage = new PrintWriter(client.getOutputStream(), true);
        updateDisplay = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent evt) {
                receiveMessage();
                displayClientMessage();
                System.out.println("\nin timer");
            }
        };
        timer = new Timer(5000, updateDisplay);
        timer.setRepeats(true);
        timer.start();
    }
    catch (Exception e) {
        System.err.println(e);
    }
}

private void displayClientMessage()
{
    if ( receivingMessage != null )
    {
        receivingMessage = "\nClient : " + receivingMessage;
        displayArea.setText( displayArea.getText() + receivingMessage );
    }
}
private void displayServerMessage()
{
    sendingMessage = "\nServer : " + sendingMessage;
    displayArea.setText( displayArea.getText() + sendingMessage );
}
private void sendMessage()
{
    sendingMessage = writingArea.getText();
    serverMessage.println(sendingMessage);
}
private void receiveMessage()
{
    try {
        receivingMessage = clientMessage.readLine();
    } catch (IOException ex) {
        Logger.getLogger(ServerMessenger.class.getName()).log(Level.SEVERE, null, ex);
    }
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jScrollPane2 = new javax.swing.JScrollPane();
    displayArea = new javax.swing.JTextArea();
    jScrollPane1 = new javax.swing.JScrollPane();
    writingArea = new javax.swing.JTextArea();
    enter = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("Server");
    setResizable(false);

    displayArea.setEditable(false);
    displayArea.setColumns(20);
    displayArea.setLineWrap(true);
    displayArea.setRows(5);
    jScrollPane2.setViewportView(displayArea);

    writingArea.setColumns(20);
    writingArea.setRows(5);
    jScrollPane1.setViewportView(writingArea);

    enter.setText("Send");
    enter.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            enterActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jScrollPane2)
        .addGroup(layout.createSequentialGroup()
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 186, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(enter, javax.swing.GroupLayout.PREFERRED_SIZE, 61, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(0, 0, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 420, Short.MAX_VALUE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                .addComponent(enter, javax.swing.GroupLayout.PREFERRED_SIZE, 55, javax.swing.GroupLayout.PREFERRED_SIZE)))
    );

    pack();
}// </editor-fold>                        

private void enterActionPerformed(java.awt.event.ActionEvent evt) {                                      
    sendMessage();
    writingArea.setText("");
    displayServerMessage();
}                                     

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(ServerMessenger.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(ServerMessenger.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(ServerMessenger.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(ServerMessenger.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new ServerMessenger().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JTextArea displayArea;
private javax.swing.JButton enter;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JScrollPane jScrollPane2;
private javax.swing.JTextArea writingArea;
// End of variables declaration 
```

}

客户端类在逻辑上几乎相同，但有细微差别。但逻辑几乎相同。我想问题出在计时器上，但我无法弄清楚到底是什么问题。在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:28:34.843

BufferedReader.readLine() 在内部调用 java.io.Reader.read(char[], int, int)。因此，使用 Reader.read javadoc：“此方法将阻塞，直到某些输入可用”。

您应该冻结，因为 updateDisplay() 调用了调用 readLine() 的 receiveMessage() 并且没有数据可用。

# verilog - 如何为多维阵列的端口编写测试台

> ID：15589613
> 
> 赞同：0
> 
> 时间：2013-03-23T17:07:39.133
> 
> 标签：verilog

我有一个用 Verilog 代码编写的 7 位向上/向下计数器：

```
module updowncount_7bit  (clock,reset,hold,up_down,q);
input clock,reset,hold,up_down;
output reg [6:0] q;
integer direction;

    always @(posedge clock)
    begin
        if(up_down)
            direction = 1;
        else
            direction = -1;
        if (!reset)
            q <= 0;                 
        else if (!hold)         
            q <= q + direction;

    end
endmodule 
```

我试图编写一个测试台代码，但似乎输出不起作用，我不知道为什么！任何人都可以帮忙！？

测试台结果：

在模型模拟中：![http://i1114.photobucket.com/albums/k533/omegakd/222_zps6d406e8b.png](../Images/595d2920f073c0dc322233d9d3b341c8.png)

在 Quartus 中的 Vector-waveform ：![在此处输入图像描述](../Images/4df2d2d3f8de32648e5099a723b8f5a9.png)

```
module counter_7bit_tb;
  wire [6:0]f_tb;
  reg  clock_in_tb, reset_tb, hold_tb, up_down_tb;
 updowncount_7bit dut(clock_in_tb, reset_tb,hold_tb, up_down_tb, f_tb);

  initial begin
    clock_in_tb = 0;reset_tb= 1; hold_tb = 0;up_down_tb=1;
    #10; 
    forever begin
     #10 clock_in_tb= ~clock_in_tb ;
    end

  end

endmodule 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:42:58.647

您似乎没有`reset`从测试平台应用到您的模块。因此`q`将永远是`X`，这看起来就像您所看到的那样。

# html - 可以完全避免 CSS 边距以支持填充吗？

> ID：15589615
> 
> 赞同：0
> 
> 时间：2013-03-23T17:07:52.680
> 
> 标签：html, css, margin, padding

由于我对感官超载很敏感并且对太多的视觉细节感到困惑，我想将我的 CSS 功能调色板简化为一个可管理的工具包，但又不会真正牺牲太多的美学吸引力。鉴于此，我似乎在HTML 元素的**边距和填充之间失去了平衡。**

所以我打算完全停止使用边距来支持填充。对我来说，无论如何都不是视觉/HTML 专家（根据经验，我更像是后端程序员），这似乎是可行的，但是，我确信存在这种区别是有原因的。

在这篇文章中，我要求专家解释使用和不使用边距和填充的缺点，以及是否可以通过仅使用两者之一来完成合理优雅的设计。如果有人可以[提交示例](http://jsfiddle.net/)来说明可以用一个而不是另一个来完成的事情，那也很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:20:15.093

不，不是在各个方面。

边距和填充是两个完全不同的东西。填充将添加到对象宽度或高度的整体大小，而边距不会。

想象一下，您有一组向左浮动的链接。仅在链接上使用填充将导致锚元素非常大，很可能不是您想要的。而使用一点填充和边距来增加锚点之间的空间会更合适。

使用边距可确保某物与其他物相距甚远。

使用填充可确保某物的内容远离其自身的边缘。

如果您在页面上有一个盒子布局，并且您希望每个盒子之间有间距以及边框，那么仅使用填充是不够的，因此您还必须使用边距。

作为一般规则，在需要时使用每个。我知道你的意思是事情变得混乱，`css`但有一些方法可以简化事情。对于一个简单的站点，我之前已经完成了以下操作。

**css**

```
.leftMargin {margin-left: 10px;}
.rightMargin {margin-right: 10px;}
.topMargin {margin-top: 10px;}
.bottomMargin {margin-bottom: 10px;}
.leftPadding {padding-left: 10px;}
.rightPadding {padding-right: 10px;}
.topPadding {padding-top: 10px;}
.bottomPadding {padding-bottom: 10px;} 
```

然后您可以轻松设置通用`padding`和`margin`规则，而无需太多麻烦。但是话又说回来，您可能会争辩说这会产生难以管理的`html`标记。

这确实是您必须自己解决的问题。需要考虑的事情是只使用`margins`会产生非常不良的影响！更重要的是折叠边距[为什么这种 CSS 边距顶部样式不起作用？](https://stackoverflow.com/questions/9519841/why-does-this-css-margin-top-style-not-work).

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:24:42.777

好吧，我想说你不能避免使用保证金，而且它们有不同的用途。

应使用填充在元素的边缘和内容之间创建空间，而应使用边距来分隔元素。

如果您从不使用边框，那么可以说您可以取消其中的 1 个，但如果您有 2 个彼此相邻的 div，两者都有边框但您不希望它们接触，您打算如何将它们分开？可以定位它们，但通常边距是最好的方法。

还要考虑总元素宽度是宽度 + 填充，而您可能会争辩说边距大小在元素“外部”，尽管在技术上仍然是元素的一部分。

我有很多样式标记，并且同样使用填充和边距

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:43:13.583

为了向您展示这两个概念之间的区别，我可以做的最简单的例子就是[这个](http://jsfiddle.net/xvGaq/)。

请注意，这`margin`是`border`（红色）和周围环境`padding`之间的空间，而是内容（在示例中是文本）和`border`.

通常你需要同时使用它们。但是，在您根本不需要使用边框的少数情况下，您只需设置其中一个就可以很好地管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T17:57:06.897

不，如果你想做复杂的设计，就不行

网页设计的[圣杯](http://alistapart.com/article/holygrail)使用边距和内边距的组合

尽管`margin`有时`padding`可以做类似的事情，但每个人的目的是不同的。

*   `margin`指一个元素的侧面**相对于其他元素所需的空间**
*   `padding`指元素内容与其边框之间的空间

当您一起使用时，可以实现具有边距和填充的功能。

# xml - 格式化 XML 文件

> ID：15589616
> 
> 赞同：0
> 
> 时间：2013-03-23T17:07:53.050
> 
> 标签：xml, unix, sed, awk, grep

原始数据：

```
<?xml version="1.0"?>
<CascadedExtractFileData>
<Country>
<IsoCountryCode>IN</IsoCo
untryCode>
<Provider>
<ItuCode>CASCADED_PROV</ItuCode>
<AccessInterconnect>
<CASCADE
D_INTERCONNECT_ID>50</CASCADED_INTERCONNECT_ID>
<TailTechnology>
<CASCADED_ACCESS_
METHOD_ID>1</CASCADED_ACCESS_METHOD_ID>
</TailTec
hnology></Access
Interconnect></
Provider><
/Country>
</C
ascad
edExtractFileData> 
```

需要像：

```
<?xml version="1.0"?>
<CascadedExtractFileData>
<Country>
<IsoCountryCode>
IN
</IsoCountryCode>
<Provider>
<ItuCode>
CASCADED_PROV
</ItuCode>
<AccessInterconnect>
<CASCADED_INTERCONNECT_ID>
50
</CASCADED_INTERCONNECT_ID>
<TailTechnology>
<CASCADED_ACCESS_METHOD_ID>
1
</CASCADED_ACCESS_METHOD_ID>
</TailTechnology>
</AccessInterconnect>
</Provider>
</Country>
</CascadedExtractFileData> 
```

我需要每个标签`<>`和`</>`一个新的行和数据之间的数据，`<>IN</>`例如`IN`也在一个新的行上。我需要一个结构完美的 XML 格式。

我需要使用 Unix 工具的解决方案`grep`：`sed`或`awk`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:37:59.733

此行将修复无效 xml 文件中的问题：

```
awk '{s=s $0}END{gsub(/></,">\n<",s);s=gensub(/>([^ \n>]*)</,">\n\\1\n<","g",s);print s}' file 
```

输出：

```
<?xml version="1.0"?>
<CascadedExtractFileData>
<Country>
<IsoCountryCode>
IN
</IsoCountryCode>
<Provider>
<ItuCode>
CASCADED_PROV
</ItuCode>
<AccessInterconnect>
<CASCADED_INTERCONNECT_ID>
50
</CASCADED_INTERCONNECT_ID>
<TailTechnology>
<CASCADED_ACCESS_METHOD_ID>
1
</CASCADED_ACCESS_METHOD_ID>
</TailTechnology>
</AccessInterconnect>
</Provider>
</country>
</cascadedExtractFileData> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T23:07:33.913

以下命令删除换行符（以修复 XML 标记），然后将结果通过管道传输到可以格式化结果的 xmllint：

```
cat data.xml | tr -d '\n' | xmllint -format - 
```

以下输出：

```
<?xml version="1.0"?>
<CascadedExtractFileData>
  <Country>
    <IsoCountryCode>IN</IsoCountryCode>
    <Provider>
      <ItuCode>CASCADED_PROV</ItuCode>
      <AccessInterconnect>
        <CASCADED_INTERCONNECT_ID>50</CASCADED_INTERCONNECT_ID>
        <TailTechnology>
          <CASCADED_ACCESS_METHOD_ID>1</CASCADED_ACCESS_METHOD_ID>
        </TailTechnology>
      </AccessInterconnect>
    </Provider>
  </Country>
</CascadedExtractFileData> 
```

## 更新

我的结果文件的格式与您的要求不同，但是我会提交更清晰的格式。

从命令行操作 XML 时，xmllint 程序是一个非常有用的工具。除了能够验证和格式化 XML 之外，它还可以用于使用[xpath](http://en.wikipedia.org/wiki/XPath)进行搜索。

# java - 如何在不将所有文件 jar 加载到内存中的情况下检索 jar 中的方法列表？

> ID：15589625
> 
> 赞同：1
> 
> 时间：2013-03-23T17:08:33.157
> 
> 标签：java, list, methods, jar

如何在不将所有文件 jar 加载到内存中的情况下检索 jar 中的类中的方法列表？该应用程序在通用 PC 中运行。我找到了这个：[http](http://www.rgagnon.com/javadetails/java-0513.html) ://www.rgagnon.com/javadetails/java-0513.html 在这个源代码中，程序在 jar 中找到类列表，但没有找到每个类的方法列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:41:57.093

您可以从 JAR 中提取相应的 .class 文件并使用[ASM](http://asm.ow2.org/)等字节码工具对其进行分析。

# printing - 如何设置 Notepad++ 变量？

> ID：15589628
> 
> 赞同：2
> 
> 时间：2013-03-23T17:08:39.720
> 
> 标签：printing, notepad++

由于语法高亮，使用 Notepad++ 打印代码非常方便。
不幸的是，我遇到了打印问题。

`$(FULL_CURRENT_PATH)`现在打印在页面的左上方，也就是说，`D:\cppWorkspace\project1\display\GUI\main.cpp`
我不希望打印到项目的整个路径。然而，它也不应该只打印文件名。
在这种情况下，它应该是，`display\GUI\main.cpp`。（它们是项目内部的包和文件本身）

我试图编辑或设置一个 Notepad++ 变量，但我找不到这样做的方法。

希望有人知道如何解决这个问题。

在此先感谢，
丹尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:20:49.607

不幸的是，变量是固定的，不能“设置”——至少从当前版本（6.3.1）开始。它们是简单的替换，在`expandNppEnvironmentStrs`方法中处理`RunDlg.cpp`

欢迎您在 IdeaTorrent 上提出一个想法（请参阅 Sourceforge 项目上的托管应用程序菜单），或者如果有类似的想法，请投票赞成。

# c# - 如何在不污染方法的情况下登录？

> ID：15589631
> 
> 赞同：5
> 
> 时间：2013-03-23T17:08:58.057
> 
> 标签：c#, c#-4.0, logging

我知道 AOP 和 Postsharp，但这里的限制是我不能使用 postsharp，并且使用属性进行日志记录会产生性能开销。

但是现在我必须再次将日志代码放入每个方法中，大量复制粘贴，而且它也不是方法的一部分。所以，我的职能不止一项工作。将业务逻辑和日志放在一起有点不太好。

反正有没有，比如让类开放式并且可以从类或函数的外部添加日志。或者我只需要使用传统的日志记录方式。

请让我知道是否需要任何进一步的信息。也欢迎任何好的/另一种记录方式的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:02:45.040

嗨，正如 Peter Ritchie 所说， http: [//msdn.microsoft.com/en-us/magazine/gg490353.aspx](http://msdn.microsoft.com/en-us/magazine/gg490353.aspx)是一个很好的解决方案。您还可以查看[http://www.microsoft.com/en-us/download/details.aspx?id=17866](http://www.microsoft.com/en-us/download/details.aspx?id=17866)或其他 DI 框架，如 Ninject，这对于 MVC 项目来说是一个很好的框架。无论如何，这是关于 DI 性能的好文章[http://www.palmmedia.de/Blog/2011/8/30/ioc-container-benchmark-performance-comparison](http://www.palmmedia.de/Blog/2011/8/30/ioc-container-benchmark-performance-comparison)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:03:51.310

企业库和 Unity。您可以使用组合来围绕其他类创建日志装饰器，这些类记录然后传递给其他类。

查看[msdn.microsoft.com/en-us/magazine/gg490353.aspx](http://msdn.microsoft.com/en-us/magazine/gg490353.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T20:28:45.657

你可以为你的类创建装饰器，看看[http://en.wikipedia.org/wiki/Decorator_pattern](http://en.wikipedia.org/wiki/Decorator_pattern)

# c++ - 传递给函数时如何使结构为空？

> ID：15589632
> 
> 赞同：2
> 
> 时间：2013-03-23T17:09:06.773
> 
> 标签：c++, pointers, reference, struct, null

如果 head->next 为 NULL，我想将 head 结构设为 NULL。但是，当我将它传递给一个函数以使其为空时，它不起作用。

```
void remove(struct node* head)
{
 int val;

 cout << "Enter a value to delete: ";
 cin >> val;

 if (head->next == NULL)
  if (head->data == val)
   head = NULL;
} 
```

虽然它在不传递给函数时工作正常，但直接在主函数中完成。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:10:38.063

作为参数传递的指针`remove`被复制到函数中。`head`函数内部是该指针的副本。您将该副本设置为`NULL`，而外面的副本保持不变。您可以简单地通过引用获取指针：

```
void remove(struct node*& head)
{
  // ...
} 
```

注意类型中的和号`head`。这意味着它是“对指针的引用`node`”，让您可以精确地引用传递的对象，而不是它的副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T17:19:27.347

问题是您传递的指针允许您修改`node`它指向的指针，但您不能修改指针本身，因为指针本身是按值传递的。所以你不能在你的`remove`函数中这样做：

```
node = NULL; 
```

人们给你的一个解决方案是将它作为对指针的引用传递，就像 in 一样`node *&head`，这工作得很好。但是我相信你想知道这种事情的一般约定（修改指针本身）是通过传递一个双指针（即指向指针的指针`node`）：

```
void remove(node **head) { ... } 
```

然后在 main 中将指针的地址传递给它：

```
node *theHead = blah;
remove(&theHead); 
```

然后在`remove`你可以改变指针的值：

```
*head = NULL; 
```

当然，您也可以取消引用它：

```
(*head)->next; // etc 
```

# c++ - 查找预编译头使用时跳过头文件

> ID：15589636
> 
> 赞同：3
> 
> 时间：2013-03-23T17:09:32.110
> 
> 标签：c++

你能帮我理解问题是什么吗？我似乎已经包括`stdafx.h`. 然后我试图重建解决方案。试图清洁溶液。无论如何我得到这个：

```
c:\...\tetris\figure_factory.cpp(2): warning C4627: '#include "figure_factory.h"': skipped when looking for precompiled header use
1>          Add directive to 'StdAfx.h' or rebuild precompiled header
1>c:\...\tetris\tetris\figure_factory.cpp(3): warning C4627: '#include "figure.h"': skipped when looking for precompiled header use
1>          Add directive to 'StdAfx.h' or rebuild precompiled header 
```

当然还有由于缺少头文件而导致的全套错误。

我的文件：

```
figure_factory.cpp

#pragma once
#include "figure_factory.h"
#include "figure.h"
#include "stdafx.h"
#define stop __asm nop

Figure I;
I.shape = {
            {{0, 0, 0, 0}, 
             {1, 1, 1, 1},
             {0, 0, 0, 0},
             {0, 0, 0, 0}},
......

figure_factory.h

#pragma once
#include "figure.h"
#include "stdafx.h"
#define stop __asm nop

class Figure_Factory{
    const int figure_number = 5; 
    const int colour_number = 5; 

    public:
        Figure get_figure(int type, int colour);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T17:14:38.037

`stdafx.h`如果您使用预编译头文件和 Microsoft 编译器，则必须作为第一个包含文件。并且您不得将其包含在其他包含文件中。并且`#pragma once`在`.cpp`文件中没用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T10:54:15.330

这是另一种可能性：您有一个标为源文件的头文件。在 Visual Studio 中，右键单击头文件，然后在配置属性 > 常规 > 项目类型中检查您是否有“C/C++ 头文件”，而不是“C/C++ 编译器”。

在手动编辑 .vcxproj 文件时，通过键入 <ClCompile> 而不是 <ClInclude>，这是一个容易犯的错误。

# c++ - 函数 A 调用函数 B 调用函数 A，你怎么称呼它？

> ID：15589640
> 
> 赞同：2
> 
> 时间：2013-03-23T17:09:47.730
> 
> 标签：c++, c

我知道当函数调用自己时，它被称为递归。但是，当函数 A 调用调用 A 的函数 B 直到有一个 IF 语句停止整个过程时，你如何调用它。从一本 C 书看这个练习（顺便说一句，我能更好地解决这个问题吗？）

> 编写一个函数，显示一个包含四个编号选项的菜单并要求您选择一个。（输出应该与前面类似。）
> 
> 编写一个有两个 int 参数的函数：一个下限和一个上限。该函数应该从输入中读取一个整数。如果整数超出限制，则该函数应再次打印菜单（使用此问题“a”部分中的函数）以重新提示用户，然后获取新值。当输入适当范围内的整数时，函数应将该值返回给调用函数。
> 
> 使用本题“a”和“b”部分的函数编写一个最小程序。最少，我们的意思是它不需要实际执行菜单承诺的操作；它应该只显示选择并获得有效响应。

```
#include <stdio.h>

void Display(void);
int Limits(int a, int b);

int main(void)
{
    Display();
    return 0;
}
void Display()
{
    int y = 0;
    printf("1 - 2 - 3 - 4\n");
    y = Limits(0, 100);
    if(y < 100 && y > 0)
        printf("%d\n", y);
}
int Limits(int a, int b)
{
    int x;
    scanf("%d", &x);
    if(x < a || x > b)
        Display();
    return x;
} 
```

输出：

```
1 - 2 - 3 - 4
1234
1 - 2 - 3 - 4
34456
1 - 2 - 3 - 4
123
1 - 2 - 3 - 4
-34
1 - 2 - 3 - 4
-23
1 - 2 - 3 - 4
88
88
Press [Enter] to close the terminal ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:15:40.500

这称为相互递归或（较少见）交叉递归。

至于如何干净地解决它，在我看来它大致符合以下模式：

```
namespace {
    int show_menu() { 
        printf("1 - 2 - 3 - 4");
        int n;
        std::cin >> n;
        return n;
    }
}

int menu() { 
    int value;
    do { 
        value = show_menu();
    } while (value <1 || value > 4);
    return value;
} 
```

# python - 在 Matplotlib 中的 x 和基线 x 位置之间填充

> ID：15589643
> 
> 赞同：16
> 
> 时间：2013-03-23T17:10:11.137
> 
> 标签：python, matplotlib, plot, fill

我正在寻找一种在 matplotlib 中使用 fill_between 来在 x1 和 x2 之间而不是 y1 和 y2 之间着色的方法。

我有一系列对数图，深度在 Y 轴上，测量变量在 x 轴上，并且希望在绘制线的左侧或右侧（而不是上方或下方）着色。

我确信这应该可以通过 fill_between 实现，但不能使其工作。

举个例子：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec

gs = gridspec.GridSpec(3, 3)
ax1 = plt.subplot(gs[0, :])
ax2 = plt.subplot(gs[1:, 1])

y=np.random.uniform(0,1,30)
x=np.arange(30)

ax1.set_ylabel('Plot 1')
ax1.plot(x,y)
ax1.fill_between(x,y,0.5,where=y>0.5,interpolate=True)

ax2.set_ylabel('Plot 2')
ax2.plot(y,x)
ax2.set_ylim(30,0)

plt.show() 
```

我附上了这产生的图像：本质上我想在情节 2 位置绘制类似情节 1 的内容 ![在此处输入图像描述](../Images/596f3e8c8816e36282fe66de317510a3.png)

谢谢你的任何建议

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-23T17:33:49.577

您可以使用[`fill_betweenx`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.fill_betweenx)

```
ax2.fill_betweenx(y,x, x2=0.5, where=x>0.5,interpolate=True) 
```

# math - 优化三次贝塞尔曲线的参数化算法

> ID：15589648
> 
> 赞同：2
> 
> 时间：2013-03-23T17:10:42.367
> 
> 标签：math, graphics

除了使用查找表之外，还有其他方法可以优化像这样的三次贝塞尔曲线的参数化算法吗？（对于较慢的 PC 来说，5000 步进行良好的参数化实在是太多了，因为我需要在 1 秒内多次调用此函数）：

```
function parameterizeCurve(path, partArc, initialT)
{
   // curve length is already known and globally defined
   // brute force
   var STEPS = 5000; // > precision
   var t = 1 / STEPS;
   var aX=0;
   var aY=0;
   var bX=path[0], bY=path[1];
   var dX=0, dY=0;
   var dS = 0;
   var sumArc = 0;
   var arrT = new Array(Math.round(partArc)); 
   var z = 1;
   arrT[0] = -1;

   var oldpartArc = partArc;
   partArc = partArc - initialT;

   var j = 0;

   for (var i=0; i<STEPS; j = j + t) {
      aX = bezierPoint(j, path[0], path[2], path[4], path[6]);
      aY = bezierPoint(j, path[1], path[3], path[5], path[7]);

      dX = aX - bX;
      dY = aY - bY;
      // deltaS. Pitagora
      dS = Math.sqrt((dX * dX) + (dY * dY));
      sumArc = sumArc + dS;
      if (sumArc >= partArc) {
         arrT[z] = j; // save current t
         z++;
         sumArc = 0;
         partArc = oldpartArc;
      }
      bX = aX;
      bY = aY;
      i++;
   }

   return arrT;
}

    function bezierPoint(t, o1, c1, c2, e1) {
        var C1 = (e1 - (3.0 * c2) + (3.0 * c1) - o1);
        var C2 = ((3.0 * c2) - (6.0 * c1) + (3.0 * o1));
        var C3 = ((3.0 * c1) - (3.0 * o1));
        var C4 = (o1);

        return ((C1*t*t*t) + (C2*t*t) + (C3*t) + C4)
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:54:35.813

如果我猜对了，您正在尝试提出一个三次贝塞尔曲线参数化，它以恒定的速度沿曲线移动。

那么，为什么需要 5000 步？可以沿着曲线移动的最小值是一个像素。贝塞尔曲线停留在其四个控制点的凸包内，因此曲线的长度将小于折线的长度`P0 -> P1 -> P2 -> P3`。所以找到以像素为单位的长度，并使用它（而不是 5000）。

让我知道这是否足够加快速度。

# java - 无法在 AMD 64 位平台 JMyron.dll 上加载 IA 32 位 .dll

> ID：15589651
> 
> 赞同：1
> 
> 时间：2013-03-23T17:10:53.893
> 
> 标签：java

我已经为 java 示例的[http://webcamxtra.sourceforge.net/download.shtml](http://webcamxtra.sourceforge.net/download.shtml)中给出的示例导入了整个代码，但是上面给出的错误即将到来。请任何人就如何在 eclipse juno 上通过 java 启动网络摄像头给出明确的指导？是否选择处理库中给出的 .dll 或上述站点的 Java 部分中的那些？我最近发布了一个程序，但该程序拒绝工作 这是上一个问题的链接 [Can't run webcam in Eclipse](https://stackoverflow.com/questions/15577002/cant-run-webcam-in-eclipse) 我的机器是 64 位的，Windsows 7

# python - 关于如何编写一个好的 python 包装器 LSF 的建议

> ID：15589653
> 
> 赞同：3
> 
> 时间：2013-03-23T17:11:04.240
> 
> 标签：python, wrapper, lsf

我正在创建一个 python 包装脚本，并且想知道创建它的好方法是什么。

我想连续运行代码。例如：

步骤 1\. 运行相同的程序（并行 - 并行化很容易，因为我使用的是 LSF 系统，所以我只提交三个不同的作业）。

我并行运行程序，每次运行一个fin.txt并输出一个fout.txt，即当它们都运行时，它们将从三个输入文件f1in.txt、f2in.txt、f3in中产生3个输出文件。 txt、f1out.txt、f2out.txt、f3out.txt。

（在 LSF 系统中）当程序每次运行成功完成后，都会产生一个日志文件输出，f1log.out、f2log.out、f3log.out。

日志文件输出是这种形式，即，如果 f1log.out 成功运行，它将看起来像这样。

```
------------------------------------------------------------
# LSBATCH: User input
------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time   :     86.20 sec.
    Max Memory :       103 MB
    Max Swap   :       881 MB

    Max Processes  :         4
    Max Threads    :         5

The output (if any) is above this job summary. 
```

因此，我希望我的包装器检查（每 5 分钟左右）每次运行（1、2、3）是否已创建日志文件，如果已创建，我希望包装器检查是否它已成功完成（也就是，如果字符串成功完成出现在日志文件中）。

此外，如果其中一个运行完成并生成一个未成功完成的日志文件，我希望我的包装器结束并报告运行 (k=1,2,3) 未完成。

在那之后，

第2步。如果所有三个运行都成功完成，我将运行另一个将这三个文件作为输入的程序......否则我会打印一个错误。

基本上在我的问题中，我正在寻找两件事：

这听起来像是编写包装器的好方法吗？

如何在 python 中检查文件的存在，并以一种好的方式每隔一定时间搜索一个模式？

笔记。我知道 LSF 具有工作依赖性，但我发现这种方式更清晰且易于使用，尽管可能不是最佳的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T13:38:50.493

我是 LSF 系统的用户，我主要的抱怨是出口处理和清理。我认为一个好主意是发送一个批处理作业数组，例如：初始化任务、腿部工作任务、清理任务。LSF 可以完成所有三个并向等待的头节点发送返回码。很多时候 LSF 非常适合发送一项作业或命令，但它并没有真正设置为处理系统处理。

除此之外，我祝你好运:)

# cmd - Windows Server 2008 中文件夹下超过 7 年的总文件大小

> ID：15589659
> 
> 赞同：1
> 
> 时间：2013-03-23T17:11:37.083
> 
> 标签：cmd, windows-server-2008, filesize, timestamp

我需要在包含数千个文件的文件夹下找到所有超过 7 年的文件的总大小。

有什么快速的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:30:07.240

```
FORFILES /D -23-03-2006 /C "cmd /c echo @fsize" > sizes.txt

set sz=0

for /f %a in (sizes.txt) do set /a sz=sz+%a

echo size: %sz% 
```

# android - 将文件上传到 GoogleDrive 会导致 NullPointerException

> ID：15589660
> 
> 赞同：0
> 
> 时间：2013-03-23T17:11:38.717
> 
> 标签：android, google-drive-api

我正在开发一个 android 应用程序，我正在尝试将 Google Drive 集成到我的应用程序中。该程序允许同步，因此它会在 SD 卡上创建一个文件，然后将该文件上传到 Google Drive。我成功地进行了身份验证，但是当我使用该`insert`函数上传时，我得到一个 NullPointerException 并且我看不到值在哪里为 null，因为当我逐步完成所有内容时，似乎没有任何内容为 null。

下面是我用来执行上传的代码。

```
private void uploadToDrive()
    {
        Thread thread = new Thread(new Runnable() {

            public void run() {
                try
                {
                    SharedPreferences settings = context.getSharedPreferences("prefs", 0);

                    GoogleAccountCredential credential = GoogleAccountCredential.usingOAuth2(context, DriveScopes.DRIVE);

                    credential.setSelectedAccountName(settings.getString("google_drive_account_name", ""));
                    Drive service = getDriveService(credential);

                    String storageDir = Environment.getExternalStorageDirectory().getPath();
                    Uri fileUri = Uri.fromFile(new java.io.File(storageDir + "/folder/drive_sync.xml"));
                    java.io.File fileContent = new java.io.File(fileUri.getPath());
                    FileContent mediaContent = new FileContent("text/xml", fileContent);

                    com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
                    body.setTitle("My App Title");
                    body.setMimeType("text/xml");

                    com.google.api.services.drive.model.File file = service.files().insert(body, mediaContent).execute();
                    if (file == null)
                    {
                        Log.e("UploadFile", "File was empty after insert");
                    }
                }
                catch (UserRecoverableAuthIOException e)
                {
                    activity.startActivityForResult(e.getIntent(), SynchronisationSettings.REQUEST_ACCOUNT_PICKER);
                }
                catch (IOException ex)
                {
                    Log.d("Upload Drive", ex.toString());
                    ex.printStackTrace();
                }
                catch (Exception ex)
                {
                    Log.d("Upload File", ex.toString());
                    ex.printStackTrace();
                }
            }
        });
        thread.start();
    } 
```

以下是我如何获得驱动服务

private Drive getDriveService(GoogleAccountCredential credential) { return new Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(), credential).build(); }

下面是从异常输出的堆栈跟踪

```
> 03-23 17:05:00.050: W/System.err(21664):
> java.lang.NullPointerException 03-23 17:05:00.055:
> W/System.err(21664):  at java.net.URI.parseURI(URI.java:353) 03-23
> 17:05:00.055: W/System.err(21664):    at
> java.net.URI.<init>(URI.java:204) 03-23 17:05:00.060:
> W/System.err(21664):  at
> com.google.api.client.http.GenericUrl.<init>(GenericUrl.java:100)
> 03-23 17:05:00.065: W/System.err(21664):  at
> com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:269)
> 03-23 17:05:00.065: W/System.err(21664):  at
> com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:408)
> 03-23 17:05:00.065: W/System.err(21664):  at
> com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
> 03-23 17:05:00.070: W/System.err(21664):  at
> com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
> 03-23 17:05:00.070: W/System.err(21664):  at
> com.BoardiesITSolutions.PasswordManager.Classes.DriveSync$1.run(DriveSync.java:85)
> 03-23 17:05:00.070: W/System.err(21664):  at
> java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:06:48.017

我找到了原因，这是因为我使用的是不同的开发 PC，忘记添加 SHA1 指纹并添加到 Drive API 的开发人员 API 控制台。

# asp.net - 将带有数据库的 Asp.net 网站托管到托管服务器

> ID：15589662
> 
> 赞同：0
> 
> 时间：2013-03-23T17:11:52.083
> 
> 标签：asp.net, sql, web, hosting, uploading

我在 asp.net 中开发了一个使用 sql server 作为数据库的电子商务网站。现在我想将该网站与数据库上传到托管服务器。

这是我的第一个虚拟主机，我不知道该怎么做。

我已经创建了数据库脚本来在托管服务器上重新创建数据库，但我不知道如何在服务器上运行它。请告诉我如何做到这一点。

请告诉我需要在 web.config 文件中的连接字符串中进行哪些更改以连接将在托管服务器上的数据库。

我的连接字符串是：

```
<add name="DBCS" connectionString="data source=(local)\SQLEXPRESS;database=LAAFOOD;Integrated Security=SSPI;" providerName="System.Data.SqlClient"/> 
```

我还有 ftp 客户端“Filezilla”，我可以使用它在服务器上上传静态 html 页面。

还请告诉我，是否有任何类型的免费托管服务可用于在线测试我的 E-comm 网站？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:22:58.967

您需要将 web.config 中的连接字符串从本地数据库更改为远程数据库的连接字符串。上传您的 web.config。或者，您可以注释掉本地字符串和远程连接字符串。这样，您可以在本地测试时根据需要进行切换。

您还需要创建远程数据库。您可以使用 Sql Management Studio 连接到远程数据库并运行 sql 脚本来创建数据库。

# android - 如何使用 OnSizeChanged 适配 MapView 大小？

> ID：15589663
> 
> 赞同：1
> 
> 时间：2013-03-23T17:11:53.080
> 
> 标签：android

我会尽量清楚我正在尝试做的事情。我有 MapView，它首先在 Geopoint 的帮助下居中。然后，在这个 MapView 之上，我有一个 LinearLayout，它显示一些信息（linearlayout 部分覆盖了 mapview）。它的宽度根据其内容而变化。为了让我的 MapView 居中，我希望能够获取线性布局的宽度，然后动态滚动该宽度的地图视图（使用 ScrollBy 方法）（每次线性布局的内容发生变化时，都会滚动地图视图）。

这是我到目前为止所做的：

我的 main.xml 的摘录（它由我的 Activity 使用）包含 mapview 和自定义线性布局：

```
<com.mikecorp.weather.tab.myframe
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
>
<com.google.android.maps.MapView
android:id="@+id/mapView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:apiKey="@string/mapKey"
android:clickable="true"/>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="right"
android:gravity="right"
android:orientation="horizontal">
<com.mikecorp.weather.tab.PanelLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/panel_weather_city"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:layout_gravity="right"
android:gravity="right"
android:orientation="vertical"
android:background="#FF4B4B4B" >
<TextView
android:id="@+id/curr_weather_city"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:layout_marginBottom="5dip"
android:layout_marginRight="20dip"
android:paddingLeft="5dip"
android:gravity="center"
android:textSize="35dip"
android:textStyle="bold" >
</TextView>
<View android:id="@+id/divider_h"
android:background="@drawable/black_white_gradient"
android:layout_width="fill_parent"
android:layout_height="2dp"
/>
<TextView
android:id="@+id/curr_weather_desc"
android:layout_width="wrap_content"
android:layout_height="wrap_content"           
android:textSize="20dip"
android:textStyle="bold"
android:paddingLeft="5dip"
android:paddingRight="20dip"
android:paddingTop="10dip" 
android:paddingBottom="20dip"
>               
</TextView>
<TextView
android:id="@+id/curr_weather"
android:layout_width="wrap_content"
android:layout_height="wrap_content"              
android:paddingLeft="5dip"
android:layout_marginRight="20dip" >
</TextView>     
</com.mikecorp.weather.tab.PanelLayout>
</LinearLayout>
</com.mikecorp.weather.tab.myframe> 
```

如您所见，我有一个自定义的 LinearLayout (PanelLayout)，在其中定义了 onLayout 和 onSizeChanged 方法，以便获得正确的布局宽度。这很好用。我可以看到正确的尺寸。

```
public class PanelLayout extends LinearLayout {

private MapView mview;
private MapController controller;

public PanelLayout(Context context) {
    super(context);

}

public PanelLayout(Context context, AttributeSet attrs){
    super(context, attrs);
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);
    Log.d("TEST", "onLayout:" + String.format("%s-%d,%d,%d,%d", changed, l, t, r, b));
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    Log.d("TEST", "onSizeChanged:" + String.format("%d,%d,%d,%d", w, h, oldw, oldh));

    mview = (MapView) findViewById(R.id.mapView);

    controller = mview.getController();
    controller.scrollBy(w, 0);
} 
```

}

但是，当我运行程序时，我有一个 NULL 指针异常（mview 为空）。

在此之前，我尝试在活动本身中获取线性布局的宽度（getWidth 方法），但由于尚未创建线性布局，因此它没有给出正确的值。这就是为什么我决定在自定义 LinearLayout 中使用 onSizeChanged 方法。但是，在这里，我被阻止了。

我还考虑过使用包含我的 LinearLayout 和 MapView 的 ViewGroup（及其 onLayout 方法），但是我不知道何时更改 LinearLayout 的宽度。

希望所有这些对你们都有意义，并且你们将有足够的信息来帮助我；）

# shell - 每小时计算日志文件中字符串的出现次数（使用 shell 脚本）

> ID：15589665
> 
> 赞同：1
> 
> 时间：2013-03-23T17:12:20.273
> 
> 标签：shell

我想制作一个脚本来计算每小时从日志文件（邮件日志）中出现的特定字符串（域名），以检查他们每小时发送了多少封电子邮件。

我知道有许多简单而不同的方法可以将脚本查找到文件中（如 grep 等）并计算行数（如 wc -l），但我不知道如何每小时执行一次。

是的，我可以通过 cron 作业每 60 分钟调用一次脚本，但这会从头开始读取日志文件，直到脚本执行的那一刻......而不是过去 60 分钟内的行，我不知道如何克服这一点。

笔记：

我正在使用的命令显示每个域发送的所有电子邮件是：

```
\# cat /usr/local/psa/var/log/maillog | grep -i qmail-remote-handlers \
| grep from | awk {' print $6 '} | gawk -F@ '{ print $2 }' \
| sort | uniq -c | sort -n | tail 
```

结果是这样的：

```
 8 domain1.tld
     45 domain34.tld
    366 domain80948.tld
etc etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:36:29.210

问题的重点是这个：

```
Yes I can call the script every 60 minutes via a cron job but this would read the log file
from the beginning till the moment the script was executed..and not the lines made in the
last 60 minutes, and I don't know how to overcome this. 
```

你怎么能解决这个问题？

1.  您可以在处理它时保存日志文件中的行数。之后使用 . 跳过这些行`sed`。
2.  与 1 相同，但保存已处理文件中的字节数；然后使用 . 跳过它`dd`。
3.  您可以在处理后旋转（重命名）文件（此方法的缺点是您需要重新配置系统以进行日志处理）

我个人会选择方法2。它非常高效且实现起来非常简单。

# c++ - 堆内存分配异常

> ID：15589669
> 
> 赞同：0
> 
> 时间：2013-03-23T17:12:41.973
> 
> 标签：c++, sockets, memory-management, ftp

我正在使用 Windows 套接字将一些文件上传到 FTP 服务器。我正在搜索具有特定关键字的文件，如果文件名包含该关键字，则将其发送到服务器。代码是这样的：

```
void FTPUpload(const char* path, const char* name)
{
    SOCKET s1 = ConnectFTP("111.111.111.111", 21);
    Receive(s1);
    Send(s1, "USER user", true);
    Receive(s1);
    Send(s1, "PASS password", true);
    Receive(s1);
    Send(s1,"PWD", true);
    Receive(s1);
    Send(s1,"TYPE I", true);
    Receive(s1);
    Send(s1, "PASV", true);
    char szString[1000];
    Receive(s1, szString);
    char szIP[40];
    char* start = strchr(szString, '(' );
    char* end   = strchr(szString, ')' );
    int num = end - start;
    char str[30] = {'\0'};
    strncpy( str, start + 1, num - 1 );
    char* token = strtok( str , "," );
    strcpy(szIP, "");
    strcat(szIP, token);
    strcat(szIP, ".");
    token = strtok( NULL, "," );
    strcat(szIP, token);
    strcat(szIP, ".");
    token = strtok( NULL, "," );
    strcat(szIP, token);
    strcat(szIP, ".");
    token = strtok( NULL, "," );
    strcat(szIP, token);
    token = strtok( NULL, "," );
    int intA = atoi(token);
    token = strtok( NULL, "," );
    int intB = atoi(token);
    int port = (intA * 256) + intB;
    sprintf(buf, "IP %s, Port %d", szIP, port);

//connect to FTP Server Data Connection
SOCKET s2 = ConnectFTP(szIP, port);
string command = "STOR " + string(name);
Send(s1, &command[0], true);
Receive(s1);

//Send the found file
long Begin;
long End;
char * block;
ifstream myfile;
myfile.open(path, ios::in | ios::binary);
Begin = myfile.tellg();
myfile.seekg(0,ios::end);
End = myfile.tellg();
unsigned long size = End - Begin;
int Div = (int)size / 1024;
int Mod = (int)size % 1024;
for (int i=0; i<Div; i++)
{
    block = new char[1024];
    myfile.seekg(i*1024);
    myfile.get(block,1024+1);
    Send(s2,block, false);
}
if (Mod != 0)
{
    block = new char[Div];
    myfile.seekg(Div*1024);
    myfile.get(block,Mod+1);
    Send(s2,block, false);
}
closesocket(s2);
myfile.close();
Receive(s1);
Send(s1, "QUIT", true);
Receive(s1);
closesocket(s1);
}

void FindFile()
{
    string keyword = "key";
    string path = "C:\\";
    string ipath = path+"*";
    WIN32_FIND_DATA file;
    HANDLE search_handle = FindFirstFile(ipath.c_str(),&file);
    if (search_handle != INVALID_HANDLE_VALUE)
    {
        do
        {
            string cpath = path + file.cFileName;
            DWORD attr = GetFileAttributes(cpath.c_str());
            if ((attr & (0x10)) != (0x10))
            {
                if ((cpath.find(keyword)) != (string::npos))
                    FTPUpload(cpath.c_str(), file.cFileName);
            }
        }
        while(FindNextFile(search_handle,&file));
        FindClose(search_handle);
    }
} 
```

当目录中有 2 个文件与关键字匹配时，程序运行正常。在第三个文件中，我在 dbgheap.c 中得到了 bad_alloc 异常，即我在从堆中分配和释放内存时遇到了麻烦。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:18:52.543

这是错误的

```
block = new char[1024];
myfile.seekg(i*1024);
myfile.get(block,1024+1); 
```

块是 1024 字节，但 get 读取 1024 个字符，然后附加一个 '\0' 字符。也许您打算使用`read`not `get`。

这是错误的

```
block = new char[Div];
myfile.seekg(Div*1024);
myfile.get(block,Mod+1); 
```

块是 Div 字节，但您读取 Mod 字节。

可能对解决这个问题没有帮助，但尝试摆脱分配数组的习惯。使用`std::string`and`std::vector`是一种更安全、更容易的选择。例如

```
myfile.seekg(i*1024);
vector<char> block(1024);
myfile.read(&block[0],block.size()); 
```

# javascript - 键盘上/下箭头自动滚动

> ID：15589670
> 
> 赞同：4
> 
> 时间：2013-03-23T17:12:55.480
> 
> 标签：javascript, jquery, html, css

我希望能够用我的键盘键滚动浏览 ul 列表。经过几次尝试，我得到了这个工作。

不幸的是，我面临一个很长列表的问题。我希望能够通过提供 css 规则溢出来滚动它们：auto;

键盘输入仍然被正确评估，但滚动条没有滚动。有人可以指定我如何在需要时使用键盘输入找到自动滚动的解决方案吗？

我的html：

```
<div class="btn-group">
<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
Inch                            
</a>

<ul class="dropdown-menu">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
    <li>9</li>
    <li>10</li>
    <li>11</li>
    <li>12</li>
    <li>13</li>
    <li>14</li>
    <li>15</li>
    <li>16</li>
    <li>17</li>
    <li>18</li>
    <li>19</li>
</ul>
</div> 
```

我的CSS：

```
ul{
    list-style-type:none;
    max-height:110px;
    overflow:auto;
    text-align:center;
}

.selected{
    background:#ff0000;
} 
```

我设置了一个 jsfiddle 环境来显示我的代码：

[http://jsfiddle.net/Ugkxk/6/](http://jsfiddle.net/Ugkxk/6/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T17:30:45.937

这个 jQuery [.scrollTo(): 插件](http://lions-mark.com/jquery/scrollTo/)应该可以帮到你。

您可以做的一些示例：

```
$('body').scrollTo('#target'); // Scroll Screen to Target Element

$('body').scrollTo(500); // Scroll Screen 500px Down

$('#scrollable').scrollTo(100); // Scroll Individual Element 100px Down 
```

最后一个例子可能是你需要的。

# c++ - 模拟逗号/点按键

> ID：15589672
> 
> 赞同：1
> 
> 时间：2013-03-23T17:12:57.523
> 
> 标签：c++, keyboard, simulation

使用标题 cctype 我可以在 c++ 中模拟按键：

```
void keyDownZ()
{
    keyboardInput.ki.wVk = 0x05A;
    keyboardInput.ki.dwFlags = KEYDOWN;
    SendInput(1, &keyboardInput, sizeof(INPUT));
} 
```

但是我在任何地方都找不到关于如何模拟逗号键或点键的按键。这些键的十六进制代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:21:24.703

我的意思是，根据[http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)

```
 VK_OEM_COMMA ( 0xBC ) 
```

> 虚拟键代码 下表显示系统使用的虚拟键代码的符号常量名称、十六进制值以及鼠标或键盘等效项。代码按数字顺序列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:21:39.263

试试这个：

```
HTML Entity (decimal)   &#44;  
HTML Entity (hex)   &#x2c;
UTF-8 (hex)     0x2C (2c)  
UTF-8 (binary)  00101100  
UTF-16 (hex)    0x002C (002c)  
UTF-16 (decimal)    44  
UTF-32 (hex)    0x0000002C (2c)  
UTF-32 (decimal)    44  
C/C++/Java source code  "\u002C"  
Python source code  u"\u002C" 
```

我认为这就是您需要的：
**UTF-8 (hex) 0x2C (2c)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:37:52.210

有[2 个值](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)：

```
VK_OEM_COMMA  0xBC
VK_OEM_PERIOD 0xBE 
```

根据[这个线程](http://forums.codeguru.com/showthread.php?275945-Virtual-Key-Code-for-VK_DECIMAL)，你也可以测试`VK_DELETE`。

# python - 在另一个线程中加载图像，在 QML 中取得进展

> ID：15589675
> 
> 赞同：0
> 
> 时间：2013-03-23T17:13:01.867
> 
> 标签：python, qt, qml

我使用 QML 和 PyQt。我使用 Python 中的模型，并使用委托在 QML 中查看它的数据。

```
import QtQuick 1.0

Rectangle {
    id: container

    ListView {
        id: tweetListView
        anchors.fill: parent;
        clip: true
        model: mymodel
        delegate: TweetDelegate {
        //...
        }
} 
```

我需要在 QML 中打开图像，所以我使用

```
Image {
   //...
   source: url
   OnClicked: {
       busy_icon = true;
       // mainWindow is a Python object
       mainWindow.fetch_and_open(url);
       busy_icon = false;
   }
} 
```

但是当`fetch_and_open()`运行时，UI 会冻结，所以我们永远不会是忙图标。我需要打开忙碌图标，在另一个线程中获取图像，`LoadFinished`并向委托发送信号以关闭忙碌图标。

但是我如何与委托之外的委托进行沟通呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:25:16.987

不幸的是，您的代码需要变得更加复杂。QML 在单线程中运行，对 python 的任何调用都是同步和阻塞的。答案是让你的 python 代码首先创建一个新线程。然后在该新线程中执行您的 fetch 和 open 操作。棘手的部分是现在您需要一种方法来告诉您的 busy_icon 何时完成。这是通过在您的 mainWindow 对象中创建一个可以在加载完成时触发的信号来实现的。从那里连接一个信号处理程序来告诉你的忙碌图标停止是微不足道的。

# git - ssh：连接到主机 github.com 端口 22：连接超时

> ID：15589682
> 
> 赞同：280
> 
> 时间：2013-03-23T17:13:26.600
> 
> 标签：git, ssh

我在代理下，我正在成功推进 git 很长一段时间。
现在我无法突然进入 git。
我已经设置了 RSA 密钥和代理并仔细检查了它们，但无济于事，git 向我抛出了页面标题中显示的错误。

* * *

## 回答 #1

> 赞同：431
> 
> 时间：2018-10-15T12:41:17.490

对于我的情况，建议的解决方案都不起作用，所以我尝试自己修复它并解决了它。

对我来说，我在我的 AWS EC2 UBUNTU 实例上遇到了这个错误，我解决它的方法是编辑 ssh 配置（或者如果它不存在则添加它）。

`sudo nano ~/.ssh/config`

我添加了以下内容

```
Host github.com
 Hostname ssh.github.com
 Port 443 
```

然后，运行命令`ssh -T git@github.com`以确认问题是否已解决。

据此[_](https://help.github.com/articles/using-ssh-over-the-https-port/)

> 有时，防火墙完全拒绝允许 SSH 连接。如果无法使用带有凭据缓存的 HTTPS 克隆，您可以尝试使用通过 HTTPS 端口建立的 SSH 连接进行克隆。大多数防火墙规则应该允许这样做，但代理服务器可能会干扰

希望这可以帮助遇到与我相同问题的其他人。

* * *

## 回答 #2

> 赞同：298
> 
> 时间：2013-03-23T17:13:26.600

原因可能是您在网络下的防火墙修改。（在这种情况下，他们可能会故意阻止某些端口）
仔细检查这是否是原因......做

```
ssh -T git@github.com 
```

这应该超时。如果是这种情况，请使用 http 协议而不是 ssh，
只需将配置文件中的 url 更改为 http。
方法如下：-

```
git config --local -e 
```

更改条目

```
 url = git@github.com:username/repo.git 
```

到

```
url = https://github.com/username/repo.git 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2014-01-29T06:19:29.207

# 基本 URL 重写

Git 提供了一种使用 git config 重写 URL 的方法。只需发出以下命令：

```
git config --global url."https://".insteadOf git:// 
```

现在，就像变魔术一样，所有 git 命令都会执行`git://`to的替换`https://`

*来源：* [git:// 协议被公司阻止，我该如何解决？](https://stackoverflow.com/questions/4891527/git-protocol-blocked-by-company-how-can-i-get-around-that/10729634#10729634)

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2019-03-13T19:32:23.197

在 .ssh 文件夹中创建“config”文件

```
Host github.com
User git
Hostname ssh.github.com
PreferredAuthentications publickey
IdentityFile ~/.ssh/id_rsa
Port 443

Host gitlab.com
Hostname altssh.gitlab.com
User git
Port 443
PreferredAuthentications publickey
IdentityFile ~/.ssh/id_rsa 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-07-21T14:10:41.110

我遇到了同样的问题，找不到有效的解决方案。我在设置本地服务器时遇到了这个问题，git 无法通过我的代理网络连接，但我的工作站可以。这是我运行命令时的输出 `ssh -vT git@github.com`

```
ubuntu@server:~$ ssh -vT git@github.com
OpenSSH_7.2p2 Ubuntu-4ubuntu2.8, OpenSSL 1.0.2g  1 Mar 2016
debug1: Reading configuration data /home/ubuntu/.ssh/config
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug1: Connecting to github.com [13.234.176.102] port 22. 
```

因此，我尝试通过编辑配置文件 `~/.ssh/config`来使用通过 HTTPS 端口建立的 SSH 连接，但无济于事。

```
Host github.com
 Hostname ssh.github.com
 Port 443 
```

最后，我发现这篇[文章](https://pcarleton.com/2016/11/10/ssh-proxy/)解决并暴露了真正的问题。

```
# github.com
Host github.com
    Hostname ssh.github.com
    ProxyCommand nc -X connect -x <PROXY-HOST>:<PORT> %h %p
    Port 443
    ServerAliveInterval 20
    User git 
```

这是我的配置文件，现在 git 通过 ssh 运行良好！

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-09-19T12:41:33.757

**快速解决方法：尝试切换到不同的网络**

我在使用热点（3/4G 连接）时遇到了这个问题。切换到不同的连接（WiFi）解决了它，但这只是一种解决方法 - 我没有机会找到问题的根源，因此其他答案可能更有趣以确定潜在问题

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-11-26T15:13:54.793

执行：

```
nc -v -z <git-repository> <port> 
```

您的输出应如下所示：

```
"Connection to <git-repository> <port> port [tcp/*] succeeded!" 
```

如果你得到：

```
connect to <git-repository> <port> (tcp) failed: Connection timed out 
```

您需要编辑 ~/.ssh/config 文件。添加如下内容：

```
Host example.com
Port 1234 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-10-13T12:11:51.060

对我来说，问题出在 ISP 方面。Internet 服务提供商未启用端口号。所以要求他们通过我的网络启用端口号并开始工作。
仅用于测试：连接到移动热点并键入`ssh -T git@bitbucket.org or git pull.`
如果它有效，然后请您的 ISP 启用该端口。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-05-31T19:20:06.800

我遇到了同样的问题，但我找到的答案不同，认为有人可能会遇到这个问题，所以这是我的解决方案。

我必须将端口、、、和的 2 个 IP`22`列入`80`白`443`名单`9418`：

*   `192.30.252.0/22`

*   `185.199.108.0/22`

如果这些 IP 不起作用，可能是因为它们已更新，您可以在[此页面](https://help.github.com/articles/github-s-ip-addresses/)上找到最新的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-04-19T17:02:02.810

在与 Ludder 类似的故障模式中，当我还没有登录到正确的公司 VPN 时，我收到了这个错误。:facepalm:

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-04-30T22:51:28.333

上面的答案为我提供了解决此问题所需的信息。在我的情况下，网址错误地以 ssh:/// 开头

要检查 git config 中的 url 是否正确，请打开 git config 文件：-

```
git config --local -e 
```

检查 url 条目。它不应该在开头有 ssh:///。

输入错误：

```
 url = ssh:///git@github.com:username/repo.git 
```

正确输入：

```
 url = git@github.com:username/repo.git 
```

如果您的 url 是正确的，那么下一步将是尝试上面建议将协议更改为 http 的答案。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-06-07T20:18:19.477

当我不小心切换到*访客*wifi 网络时，我收到了这个错误。不得不切换回我的**默认**wifi网络。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-05-10T22:49:58.440

将 repo url 从 ssh 更改为 https 对我来说意义不大。因为我不想放弃一些额外的好处，所以`ssh`我更喜欢。`https`上面的答案非常好和准确。如果您在 GitLab 中遇到此问题，请转到他们的官方文档[页面](https://about.gitlab.com/blog/2016/02/18/gitlab-dot-com-now-supports-an-alternate-git-plus-ssh-port/)并像这样更改您的配置文件。

```
Host gitlab.com
  Hostname altssh.gitlab.com
  User git
  Port 443
  PreferredAuthentications publickey
  IdentityFile ~/.ssh/gitlab 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-07-12T03:04:49.320

重新启动计算机为我解决了它。
Git 版本：`2.27.0.windows.1`
操作系统版本：`Windows 10`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-08-25T07:15:55.667

主要原因是公司最近安装的代理发生了变化，它阻止了除公司域之外的其他ssh连接。

我能够按照以下步骤成功连接：

1.  仔细检查问题是我所假设的 `ssh -T git@github.com`

它应该以超时结束。

2.  通过编辑本地远程 URL

`ssh config --local -e`

并从

`url=git@github.com:asheeshjanghu/Journal.git`

到

`url=https://github.com/asheeshjanghu/Journal.git`

重要的一点是，您必须在 url 中更改 2 个位置。

从`git@`到`https://` 和从`github:username`到`github/username`

最后通过做一个验证`git fetch`

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-12-12T04:04:13.200

好的试试这个`ssh -T -p 443 git@ssh.github.com`而不是`ssh -T git@github.com`

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-12-30T10:53:20.030

就我而言，问题是由我前一天在路由器上更改的设置引起的。所以在我的路由器上，我只需将设置恢复**为**禁用**，** 它就解决了我的问题。

[![在此处输入图像描述](../Images/867bf7d6aa90d51c1360288ee38ae049.png)](https://i.stack.imgur.com/o9hZS.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-11-28T10:51:50.493

我有这个问题 2 小时，结果是从 https 中删除“s”，然后执行以下操作：

`git clone -b <branchName> http:<projecturl>`

修复。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-01-27T16:54:05.000

**ISSUE：** 产生问题的步骤：git clone git@github.com:sramachand71/test.git 首次在新笔记本电脑中 **错误** ssh：连接到主机 github.com 端口 22：连接超时致命：无法从远程读取存储库。

请确保您具有正确的访问权限并且存储库存在。 **SOLUTION** 在系统中第一次克隆我们需要给克隆命令加上双引号。$ git clone "git@github.com:sramachand71/test.git" 我在系统中遇到了这个问题，即使一切都正确，但最后注意到双引号对于第一次或新用户的 url "repository_url.git" 是必须的在系统中。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-09-11T20:14:45.430

我在使用常规 IP 和故障转移 IP 设置的服务器上遇到了这个问题。此时故障转移 IP 未指向服务器。我不得不从`/etc/netplan/01-netcfg.yaml`. 将故障转移 IP 指向该服务器可能也可以解决问题。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-09T09:34:27.277

我的电脑在连接到 Github 时无法连接端口 22。我从来没有遇到过bitbucket的这个问题。如果您同时拥有 GitHub 和 bitbucket，那么

```
Host bitbucket.org
Hostname  altssh.bitbucket.org
Port  443

Host github.com
Hostname ssh.github.com
Port 443 
```

[参考](https://stackoverflow.com/questions/52057705/how-to-resolve-port-22-connection-timeout)

它基本上在 443 端口而不是 22 端口连接 SSH。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2021-07-26T08:49:27.993

刷新我的 Internet 连接和终端的 git **reload**功能对我有用。

# ruby-on-rails - Spree Rails 应用程序的 capistrano 部署期间的 Procfile 错误

> ID：15589685
> 
> 赞同：1
> 
> 时间：2013-03-23T17:13:34.527
> 
> 标签：ruby-on-rails, ruby, capistrano, spree, procfile

我已经解决了很多问题，但是在这个问题上很挣扎。

部署环境：ubuntu 12.10 rvm 1.18.21（稳定版）ruby 1.9.3p392

得到这个错误

```
cap deploy:cold 
```

错误：

```
 * 2013-03-23 18:01:27 executing `deploy:start'
    triggering before callbacks for `deploy:start'
  * 2013-03-23 18:01:27 executing `foreman:export'
  * executing "cd /home/gwuix2/picurwebaruhaz/current && bundle exec foreman export bluepill /data/picurwebaruhaz/shared/config"
    servers: ["198.211.117.84"]
    [198.211.117.84] executing command
 ** [out :: 198.211.117.84] ERROR: Procfile does not exist.
 ** [out :: 198.211.117.84] 
    command finished in 1430ms 
```

我的 deploy.rb： [https ://gist.github.com/gwuix2/5228473](https://gist.github.com/gwuix2/5228473)

[宝石文件： https](https://gist.github.com/gwuix2/5228488) ://gist.github.com/gwuix2/5228488

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:26:21.343

根据 Spree 的文档，看起来您需要在部署之前在您的应用程序中生成一个`Procfile`（由[Foreman使用）。](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)

> [申请流程大礼包指南](http://guides.spreecommerce.com/deployment_application_processes.html)

该指南显示了一个 default`Procfile`的内容，您可以使用它。Spree 还有一个[部署服务](http://guides.spreecommerce.com/deployment_service.html)，它可以为您生成一些东西，包括`Procfile`：

> 每台服务器都会获得一些基本配置，例如 Rails 环境变量、Spree 应用程序的占位符目录、自动生成的 database.yml 和 Procfile 文件等等。

所以这可能值得研究，因为即使您能够`Procfile`手动生成，您也可能会因缺少配置文件而遇到更多问题，而他们的部署服务可能会自动为您处理所有这些问题。

# jquery - 如何在 mvc3 中使用日期时间选择器

> ID：15589687
> 
> 赞同：2
> 
> 时间：2013-03-23T17:13:40.320
> 
> 标签：jquery, asp.net-mvc-3, jquery-plugins, datetimepicker

我是 MVC 和 Jquery 的新手。我需要选择日期时间，我选择了以下方式，但它只允许选择日期，我也需要选择时间。

```
<script type="text/javascript">
 $(document).ready(function () {
    $("#date").datepicker(
    { 
    dateFormat: 'dd/mm/yy',
    showAnim: 'slideDown'
     });
 });
 </script>

 @Html.TextBoxFor(m => m.StartTime, new {id = "date"}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:44:56.490

如果你想同时拥有日期和时间选择器，你可以使用这个附加组件

[Jquery UI 时间选择器插件](http://trentrichardson.com/examples/timepicker/jquery-ui-timepicker-addon.js)

它适用于现有的 jquery datepicker。

您应该按以下顺序引用脚本文件

```
<script src="jquery.min.js"></script>
<script src="jquery-ui.min.js"></script>
<script src="jquery-ui-timepicker-addon.js"></script> 
```

现在只需调用函数

```
<script type="text/javascript">
 $(document).ready(function () {
    $("#date").datetimepicker({
         dateFormat: 'dd-mm-yy', timeFormat: 'hh:mm:ss' 
    });
 });
 </script>

 @Html.TextBoxFor(m => m.StartTime, new {id = "date"}) 
```

检查此以获取更多[参考](http://trentrichardson.com/examples/timepicker/)

# jquery - 添加淡入/淡出以添加/删除类

> ID：15589690
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:14:09.230
> 
> 标签：jquery, css, fadein, fade, fadeout

下面的代码通过添加/删除类名来改变我的导航方向。当方向发生时，如何使它淡入淡出？这是我的代码：

```
$(window).scroll(function() {
    ($("#another-reason-to-attend").offset().top <= window.pageYOffset) ? $("#prim").addClass("horizontal") : $("#prim").removeClass("horizontal");
    ($("#another-reason-to-attend").offset().top <= window.pageYOffset) ? $("#logo").addClass("small") : $("#logo").removeClass("small");
}); 
```

**编辑**

我尝试将 .fadeIn 和 .fadeOut 添加到上面的行中，但它只是中断了。

例子：

```
 ($("#another-reason-to-attend").offset().top <= window.pageYOffset) ? $("#prim").addClass.fadeIn("horizontal") : $("#prim").removeClass.fadeOut("horizontal"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:19:28.713

不知道你想淡入和淡出什么..假设这是你想要的

尝试这个

```
 ($("#another-reason-to-attend").offset().top <= window.pageYOffset) ? $("#prim").addClass("horizontal").hide().fadeIn() : $("#prim").removeClass("horizontal").fadeOut();
  ... 
```

由于 fadeIn() 仅适用于隐藏元素，因此首先隐藏它（如果没有隐藏）

# solr - solr 中的任何短语索引功能

> ID：15589691
> 
> 赞同：1
> 
> 时间：2013-03-23T17:14:11.733
> 
> 标签：solr

Solr 中是否有一个标记器/过滤器可以将一些短语（我猜是文件的形式）索引为单个标记？此外，任何关于将其放在分析器链中的位置的建议都将非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:29:46.873

SynonymFilterFactory应该对您有所帮助[。](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory)这是该页面的示例：

```
#Explicit mappings match any token sequence on the LHS of "=>"
#and replace with all alternatives on the RHS.  These types of mappings
#ignore the expand parameter in the schema.
#Examples:
i-pod, i pod => ipod
sea biscuit, sea biscit => seabiscuit 
```

在索引时，左侧的短语被右侧的单个标记替换。将您的映射存储在一个名为的文件中`syn.txt`，您可以拥有如下分析器链（再次来自 solr wiki 链接）：

```
<fieldtype name="syn" class="solr.TextField">
      <analyzer>
          <tokenizer class="solr.WhitespaceTokenizerFactory"/>
          <filter class="solr.SynonymFilterFactory" synonyms="syn.txt" 
                  ignoreCase="true" expand="false"/>
      </analyzer>
</fieldtype> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:04:11.490

为此，您将需要使用[TokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#TokenFilterFactories)。

如果您也想检测句子，那么您可以查看 solr.UAX29URLEmailTokenizerFactory。

如果输入是特定模式，您可以使用 solr.PatternTokenizerFactory。

如果要将整个输入索引为一个字段，可以使用 solr.KeywordTokenizerFactory。

# python - sustring在python列表中的位置

> ID：15589694
> 
> 赞同：0
> 
> 时间：2013-03-23T17:14:46.980
> 
> 标签：python, string, list

我有两个列表，一个是德文的，另一个是英文的。我想在英语列表中找到德语单词/短语的翻译位置。

例如

```
german = ['Der', 'Hund', 'ist', u'groß', 'und', 'freundlich']
english = ['The', 'dog' , 'is', 'big', 'and', 'friendly'] 
```

我想找到子字符串“ist Gross”，它被翻译为“大”，它的位置和它的翻译位置，并检查是否：

1.  他们都在开始
2.  他们俩都在最后
3.  德语短语在开头，英语短语在结尾
4.  德语短语在结尾，英语短语在开头

我尝试使用德语和英语中的第一个单词，并检查两者是否都在开头。我还检查了德语和英语的最后一个单词是否都在末尾。我被困在 3 和 4。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:40:21.177

在这种特殊情况下，相应单词在它们各自列表中的位置是相同的。所以你可以`zip()`把它们放在一起；

```
In [1]: german = ['Der', 'Hund', 'ist', u'groß', 'und', 'freundlich']

In [2]: english = ['The', 'dog' , 'is', 'big', 'and', 'friendly']

In [3]: zip(german, english)
Out[3]: [('Der', 'The'), ('Hund', 'dog'), ('ist', 'is'), (u'gro\xdf', 'big'), ('und', 'and'), ('freundlich', 'friendly')] 
```

您的问题 #1 的答案是：

```
In [4]: together = zip(german, english)

In [5]: together[0][0] == 'ist'
Out[5]: False 
```

对于#2：

```
In [6]: together[-1][0] == u'groß'
Out[6]: False 
```

问题#3和#4违反了建立列表的前提，因此不能直接根据列表来回答。

**编辑：** 要回答您最后的问题，您需要建立一本德英词典。Python 恰好有一个内置的[字典类型。](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)

```
In [3]: ge = {}

In [4]: for g, e in zip(german, english):
   ...:     ge[g] = e
   ...:     

In [5]: ge
Out[5]: {'Der': 'The', 'ist': 'is', 'und': 'and', u'gro\xdf': 'big', 'Hund': 'dog', 'freundlich': 'friendly'} 
```

问题＃3现在一般变成：

```
In [6]: german[0] == 'ist' and german[1] == u'groß' and english[-2] == ge['ist'] and english[-1] == ge[u'groß']
Out[6]: False 
```

问题 #4：

```
In [16]: german[-2] == 'ist' and german[-1] == u'groß' and english[0] == ge['ist'] and english[1] == ge[u'groß']
Out[16]: False 
```

# pug - 将 Jade Mixin 输出与模板中的前一个标签结合起来

> ID：15589697
> 
> 赞同：1
> 
> 时间：2013-03-23T17:14:53.453
> 
> 标签：pug

说我的玉模板看起来像这样：

```
mixin foo(bar)
 .fizzle=bar

#baz.mixin foo('beef') //this isn't the right way 
```

我希望结果输出是：

```
<div id='baz' class='fizzle'>beef</div> 
```

将mixin的输出与当前标签组合的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:27:39.863

恐怕你不能那样做。或者你可以尝试如下：

```
mixin foo(bar)
 #baz.fizzle= bar

mixin foo('beef') 
```

或者

```
mixin foo(bar)
  | #{bar}

#baz.fizzle
  mixin foo('beef') 
```

# javascript - 在 JavaScript 中读取本地文本文件

> ID：15589700
> 
> 赞同：2
> 
> 时间：2013-03-23T17:15:13.453
> 
> 标签：javascript, html, hta

我刚开始学习 JavaScript，遇到了一个小问题。我有一个包含一些文本的文本文件。我可以在浏览器中读取文本文件的内容（我的意思是在 .hta 中），但文本显示为单行。我想为每一行添加换行符。我怎么做？

**文本文件内容：**
我想生活在灵魂与肉体相遇的地方
让阳光拥抱我
......

**JS：**

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var txtFile = fso.OpenTextFile("C:\\myJS\\test.txt", 1, false, 0);
var fText = txtFile.Read(1000);
document.write(fText);
txtFile.Close();
fso = null; 
```

**输出：**
我想生活在灵魂与身体相遇的地方，让太阳用双臂环绕我......

任何建议，建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T18:03:18.073

发生这种情况是因为 HTML 无法识别文本文件中的换行符。您需要在输出中添加一些 HTML。像这样的东西：

```
function readFile (path) {
    var fso = new ActiveXObject('Scripting.FileSystemObject'),
        iStream=fso.OpenTextFile(path, 1, false);
    while(!iStream.AtEndOfStream) {
        document.body.innerHTML += iStream.ReadLine() + '<br/>';
    }        
    iStream.Close();
} 
```

此函数读取整个文件。如果您想准确读取 1000 行，可以使用`for`循环，但您需要使用`AtEndOfStream`属性检查文件是否不短于 1000 行。

只需注意在`body`标记或`window.onload`处理程序中调用此函数即可。请注意，我的代码使用 DOM 操作而不是`document.write()`.

# c# - 隐藏字段不发送服务？

> ID：15589702
> 
> 赞同：0
> 
> 时间：2013-03-23T17:15:16.050
> 
> 标签：c#, asp.net-mvc, submit, hidden-field

我有一个 ASP.NET MVC 4 网页，在其中使用以下 HTML 代码为最终用户生成表单：

```
@using (Html.BeginForm("JEdit", "Post", FormMethod.Post, new { id = "frmEditPost" }))
{

    <div id="postListEditor" class="regularContainer" style="position:relative;">

        @Html.ValidationSummary(false)
        @Html.HiddenFor(c=> c.Id, false)
        <div class="floatLeft">
            @Html.LabelFor(c => c.Title, true)
            @Html.TextBoxFor(c => c.Title, new { @class = "tb1", @Style = "width:400px;" })
            @Html.ValidationMessageFor(model => model.Title)
        </div>
        <br style="clear:both;" />
        <div class="floatLeft">
            @Html.LabelFor(c => c.Text, true)
            @Html.TextAreaFor(c => c.Text, new { @class = "tb1", @Style = "width:400px; height:200px" })
            @Html.ValidationMessageFor(model => model.Text)
        </div>
        <div style="clear:both;"></div>
        @Html.Raw(@Html.SubmitButton("Posta", "btPost", "", "", "ValidateFormAndAjaxSubmit('frmEditPost', this);"))
    </div>
} 
```

单击提交按钮时，将运行以下 javascript：

```
function ValidateFormAndAjaxSubmit(formId, callingElement) {

    if (IsNotDblClick(callingElement.id)) {
        var _form = $("#" + formId);

        var validator = _form.validate();
        var anyError = false;

        anyError = !_form.valid();

        if (anyError) {
            window.latestClick = '';
            return false; // exit if any error found    
        }

        $.post(_form.attr("action"), _form.serialize(), function (data) {

            if (data.success && data.redirectUrl.length > 0) {
                window.location.href = data.redirectUrl;
            }
            else {

                var isValid = validateResponse(_form, data);

                window.latestClick = '';
            }
        })
    }
} 
```

问题是 hiddenFor 永远不会被送回，但所有其他成员都是？我可以在生成的 HTML 中看到 hitten 字段设置如下：

```
<input data-val="true" data-val-number="The field Int32 must be a number." data-val-required="The Int32 field is required." id="Id" name="Id" type="hidden" value="21"> 
```

那么为什么这个 hittenField 没有发送回服务呢？

**Edit1：** 这是根据 Chrome 中的 dev 发送的

```
Request URL:http://localhost:5215/Post/JEdit
Request Headersview source
Accept:*/*
Content-Type:application/x-www-form-urlencoded
Origin:http://localhost:5215
Referer:http://localhost:5215/Post/Edit/42
User-Agent:Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
X-Requested-With:XMLHttpRequest
Form Dataview sourceview URL encoded
Id:42
Title:testar3532
Text:testas3532
Url:http://test.se
Tags: 
```

**编辑2：**

这就是 ViewModel 的样子：

```
public class EditPostViewModel
    {
        public int Id = -1;

        public EditPostViewModel() { }
        public EditPostViewModel(string title, string text, string url)
        {
            Title = title;
            Text = text;
            Url = url;
        }

        [Display(Name = "Titel"/*Description = "..."*/)]
        [StringLength(100, MinimumLength = 3, ErrorMessage = "...")]
        [Required(ErrorMessage="...")]
        public string Title { get; set; }

        [Display(Name = "Text")]
        [StringLength(2500, MinimumLength = 3, ErrorMessage = "...")]
        public string Text { get; set; }

        [StringLength(100, MinimumLength = 3, ErrorMessage = "...")]
        [Display(Name = "Länk")]
        [RegularExpression(@"^(http(s)?://([\w-]+.)+[\w-]+(/[\w- ./?%&=])?)?$", ErrorMessage="...")]
        public string Url { get; set; }

        [Display(Name = "Tags")]
        [TagAttribute(ErrorMessage="...a")]
        public string Tags { get; set; }

        public List<int> TagIdList { get; set; }

        public string CustomError { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:18:17.680

默认情况下，ASP.NET MVC 无法绑定到字段。只有属性。因此，将您的`Id`成员更改为属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:35:27.880

尝试做 @Html.HiddenFor(c => c.Id, new { Value = Model.Id })

# php - /?q=#/ 在 URL 查询字符串中？

> ID：15589706
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:15:25.687
> 
> 标签：php, javascript, url

`/?q=#/`在查询字符串中，有时我在 facebook 和 twitter 的 URL 中看到它是什么以及为什么使用它？

请详细说明。我大部分时间在谷歌查询它，但没有找到满意的结果。

**我认为它用于基于 Ajax 的框架中。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:22:29.703

它用于在不完全重新加载页面的情况下更新页面的 URL。`/?q=`只是查询字符串中的一个空变量。但是，a 之后的所有`#`内容实际上都在 URL 的哈希部分中。这最初用于自动将页面滚动到锚点 ( `<a name="blah">`)。它可以通过 JavaScript 访问，并且因为它不会重新加载页面，所以它非常适合在复制粘贴到 URL 框时工作的 URL，当您在页面上执行操作时更改，但仍然保持所有内容加载。

很快：`/?q=`是查询字符串中的一个空变量，`#/`之后的所有内容都是 JavaScript 要处理的数据。哈希字符串中的斜杠使它看起来也是目录结构的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:36:00.830

[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#page-16)的第 3 节可能会有所帮助。

这`/?q=`是一个查询字符串，其中命名的参数为`q`空白/空。

之后的所有`#`内容都称为片段。有时它用于跳转到页面上的书签，但通常它只是浏览器中运行的 Javascript 可以使用的一些数据。如果您更改`#`URL 后面的部分，您的页面不会重新加载，但您的浏览器中的 Javascript 可以对其做出反应。

# ios - iOS 单像素程序化截图

> ID：15589713
> 
> 赞同：1
> 
> 时间：2013-03-23T17:15:50.820
> 
> 标签：ios, screenshot, getpixel

我正在尝试在 iOS 设备上以编程方式获取单个像素的 RGBA 颜色。我目前有一个方法，但是它涉及截取整个屏幕，然后找到中心像素的 RGB 颜色，因为我想在游戏的每个时间步找到中心像素，这会导致性能有很大的滞后生成屏幕截图时的应用程序。出于这个原因，我希望只截取屏幕的单个像素，但在网上任何地方都找不到此方法...这是我目前的方法：

```
UIImage *screenImage = [self screenshot];

CGPoint pointToCheck = CGPointMake(0.5 , 0.5);

UIColor *color = [self colorFromImage:screenImage sampledAtPoint:pointToCheck];

- (UIColor*)colorFromImage:(UIImage*)image sampledAtPoint:(CGPoint)p {
    CGImageRef cgImage = [image CGImage];
    CGDataProviderRef provider = CGImageGetDataProvider(cgImage);
    CFDataRef bitmapData = CGDataProviderCopyData(provider);
    const UInt8* data = CFDataGetBytePtr(bitmapData);
    size_t bytesPerRow = CGImageGetBytesPerRow(cgImage);
    size_t width = CGImageGetWidth(cgImage);
    size_t height = CGImageGetHeight(cgImage);
    int col = p.x*(width-1);
    int row = p.y*(height-1);
    const UInt8* pixel = data + row*bytesPerRow+col*4;
    UIColor* returnColor = [UIColor colorWithRed:pixel[0]/255\. green:pixel[1]/255\. blue:pixel[2]/255\. alpha:1.0];
    CFRelease(bitmapData);
    return returnColor;
}

- (UIImage *) screenshot
{
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows])
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return image;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:04:24.070

按照此处的代码获取单个像素的颜色：

[iOS——检测像素的颜色？](https://stackoverflow.com/questions/4616778/ios-detect-the-color-of-a-pixel)

希望能帮助到你 ：）

# asp.net - 根据单元格文本过滤 Gridview

> ID：15589716
> 
> 赞同：1
> 
> 时间：2013-03-23T17:16:17.417
> 
> 标签：asp.net, gridview

我应该如何编写代码来按 Order_status 过滤 gridview，其中 text= Pending 和 Paid ？这是我的模板字段

```
<asp:TemplateField HeaderText="Order Status" SortExpression="Order_status">
    <EditItemTemplate>
    <asp:DropDownList ID="DropDownList1" runat="server" SelectedValue='<%# Bind("Order_status") %>' > 
         <asp:ListItem>Pending</asp:ListItem>
         <asp:ListItem>Paid</asp:ListItem>
         <asp:ListItem>Shipped</asp:ListItem>
         <asp:ListItem>Cancelled</asp:ListItem>
     </asp:DropDownList>
    </EditItemTemplate>
    <ItemTemplate>
         <asp:Label ID="Label4" runat="server"Text='<%# Bind("Order_status") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

这是我的实体数据源

```
<asp:EntityDataSource ID="EDS_Orders" runat="server" EnableUpdate="true" EnableFlattening="False"  OrderBy="it.Order_date DESC"
                      ConnectionString="name=Bohemian1Entities" DefaultContainerName="Bohemian1Entities" EntitySetName="t_customer_orders"
                      where="it.Order_status = Pending and paid">       

</asp:EntityDataSource> 
```

# c# - 当我在模型中定义了外键时，如何让 MVC 使用 Code First 在我的视图中自动创建 DropDownList？

> ID：15589717
> 
> 赞同：0
> 
> 时间：2013-03-23T17:16:25.057
> 
> 标签：c#, asp.net-mvc, entity-framework, code-first, foreign-key-relationship

我有一个对模型 RawValues 进行强类型化的视图。在这个视图中，我想要一个 DropDownList 包含一个胶囊列表（它们在不同的模型中定义，胶囊模型）。我想将选定的 Capsule 绑定到我的 RawValues 模型中的 CapsuleFk 属性。

我试图弄清楚当我搭建 RawValues 模型时，如何让包含不同 Capsules 的 DropDownList (@Html.DropDownListFor) 自动生成到我的视图中。我的 DropDownList 中的项目将来自 Capsule 表，其中包含 4 条记录。下面，您将看到我如何`ForeignKey`为我的属性设置`public int? CapsuleFk`属性。这是我在视图中显示的模型，在这个模型下方，您将看到 Capsule 模型：

```
namespace CapWorx.QuikCap.Models
{
    public class RawValues
    {
        [Key]
        public int Pk { get; set; }

        public int? FillerFk { get; set; }
        [ForeignKey("FillerFk")]
        public virtual Filler Filler { get; set; }

        public int? CapsuleFk { get; set; }
        [ForeignKey("CapsuleFk")]
        public virtual Capsule Capsule { get; set; }

        public int Active1 { get; set; }
        public int Active2 { get; set; }
        public int Active3 { get; set; }
        public int Active4 { get; set; }
        public int Active5 { get; set; }
        public int KeyActive { get; set; }
        public int KeyActivePackStat { get; set; }
        public bool E4M { get; set; }
        public bool K100M { get; set; }
        public string CreatedBy { get; set; }
        public DateTime CreatedDate { get; set; }
    }
} 
```

这是胶囊模型：

```
namespace CapWorx.QuikCap.Models
{
    public class Capsule
    {
        [Key]
        public int Pk { get; set; }
        public string Name { get; set; }
    }
} 
```

我希望有一些明显的事情我做的不对。当我运行我的应用程序时，它会自动在我的本地环境中创建我的 SQL 数据库（如预期的那样）。这是直接来自 SQL Server Management Studio 的我的外键关系的屏幕截图，这似乎是正确的。注意我的外键基表是正确的（RawValues），我的主键基表也是正确的（Capsule）：

![在此处输入图像描述](../Images/0e90d5fbea342490549565c9b1aeffcc.png)

你能帮我确定我做错了什么，以便我可以在我的 RawValues 视图上创建一个 DropDownList ，其中包含一个胶囊列表，然后我可以将选定的胶囊绑定到我的 RawValues 模型中的 CapsuleFk 属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:57:14.687

当您尝试将业务或数据对象直接绑定到视图时，您会遇到常见问题。这是一个 MUUUUCH 更清洁的解决方案，用于创建您的 View 绑定到的“ViewModel”，并且此 ViewModel 将包含 View 为其 UI 所需的所有内容。

这是我使用的模式。首先，ViewModel：

```
public class RawValuesEditingViewModel
{
    // Your primary ID
    public int Pk { get; set; }

    [Required]
    public int? SelectedCapsulePk { get; set; }

    // Other basic fields as needed for editing on this screen
    public int Active1 { get; set; }
    public int Active2 { get; set; }
    public int Active3 { get; set; }
    public int Active4 { get; set; }
    public int Active5 { get; set; }
    public int KeyActive { get; set; }
    // blah blah blah....

    // Use this as the source for your Dropdown List for the capsule choice
    public IEnumerable<SelectListItem> CapsulesToSelectFrom
    {
        get
        {
            return from cap in DatabaseRepository.GetAllCapsules() // or some kind of Repo here.
                   select new SelectListItem {
                       Text = cap.Name,
                       Value = cap.Pk.ToString(),
                       Selected = (cap.Pk == this.SelectedCapsulePk), 
                   };
        }
    }

    public RawValuesEditingViewModel()
    {
        // This constructor is parameter-less because the MVC model binder needs it this way to bind on post back.
        // You can alter this behavior, but it gets hairy.
    }

    // Call this method from your Controller to populate the ViewModel fields. 
    public void LoadModelFieldsFromDataObject(int pkToLoadFrom)
    {
        // get the underlying database object, from EF in your case.
        var rawValuesObj = DatabaseRepository.GetRawValueObjectById(pkToLoadFrom);

        // Map your RawValues data object fields to the RawValuesEditingViewModel fields as needed.
        // Only map the fields you want to present for editing.
        // Check out "AutoMapper" if you are tired of writing this kind of code :)
        this.Pk = rawValuesObj.Pk;
        this.SelectedCapsulePk = rawValuesObj.CapsuleFk; 
        // etc etc etc
    }

    public void ExecuteRawValuesUpdate(int pk)
    {
        // code to persist back to database goes here.
        // probably you will re-fetch the database object, update its fields from this ViewModels fields, then persist it back thru EF.
    }
} 
```

您将拥有一个数据库存储库类，它通过一些干净的方法为您获取这些 EF 实体：

```
public static class DatabaseRepository
{
    public static List<Capsule> GetAllCapsules()
    {
        // your EF calls/whatever go here.
    }

    public static RawValues GetRawValueObjectById(int pk)
    {
        // your EF calls/whatever go here.
    }
} 
```

不确定您是如何决定传递您关心的“RawValues”实体的 ID，但这里有一对通过 QueryString 来的控制器操作：

```
public ActionResult RawValues(int pk) 
{
    var rawValuesVM = new ViewModels.RawValuesEditingViewModel();
    try
    {
        rawValuesVM.LoadModelFieldsFromDataObject(pk);
    }
    catch (Exception ex)
    {
        // however you wish to handle a bad lookup
    }
    return View(rawValuesVM);
}

[HttpPost]
public ActionResult RawValues(ViewModels.RawValuesEditingViewModel rawValuesVM, int pk)
{
    if (ModelState.IsValid)
    {
        try
        {
            rawValuesVM.ExecuteRawValuesUpdate(pk);
            // Redirect or something here.
        }
        catch (Exception ex)
        {
            ModelState.AddModelError(string.Empty, ex);
        }
    }
    return View(rawValuesVM);
} 
```

最后，您的 View 将被强绑定到`RawValuesEditingViewModel`，并且您将显示普通字段，并且对于所选 Capsule 的下拉列表，它将如下所示：

```
@Html.DropdownListFor(mode => model.SelectedCapsulePk, Model.CapsulesToSelectFrom) 
```

# python - Python：计算每个循环的总和

> ID：15589718
> 
> 赞同：0
> 
> 时间：2013-03-23T17:16:36.347
> 
> 标签：python, loops, nested, sum

如何找到嵌套循环中的数字列表的总和？

```
 s=0
    people=eval(input())
    for i in range(people):
        firstn=input()
        lastn=input()
        numbers=(eval(input()))

        print(firstn, lastn, numbers)
        for b in range(numbers):

        numbers=eval(input())
        s+=numbers

        print(b) 
```

输入如下：

```
 5 #nubmer of people I need to calculate
    Jane #firstname
    Doe #lastname
    4 #number of floats for each person, pretty sure this is for the second loop
    38.4 #these are the floats that i need to calculate for each person to find their sum
    29.3
    33.3
    109.74
    William #loop should reset here as this is the next person's first name
    Jones
    2
    88.8
    99.9
    firstname
    lastname
    number of floats
    float1
    float2... 
```

我需要找到如何计算每个循环的不确定数字的总和，我现在遇到的问题是循环没有为每个人重置每个值，我得到了一个总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:29:29.520

```
s = []
people = int(raw_input())
for i in range(people):
    firstn = raw_input()
    lastn = raw_input()
    numbers = int(raw_input())

    print(firstn, lastn, numbers)
    temp = 0
    for b in range(numbers):
        numbers = float(raw_input())
        temp += numbers
    s.append(temp)
print(s) 
```

我认为，如果您想记录内部循环的所有结果并且不打印，则需要一个列表。我已经测试了你给定的输入，Python2.7 没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:59:59.867

这是我能想到的最简单的解决方案：

```
nop=int(input())
for _ in range(nop):
    fname,lname=input(),input()
    n=int(input())
    summ=sum(float(input()) for _ in range(n))
    print("For {0} {1} the sum is {2}".format(fname,lname,summ)) 
```

**输出：**

```
$ python3 foo.py < abc
For Jane Doe the sum is 210.74
For William Jones the sum is 188.7 
```

其中`abc`包含：

```
2
Jane
Doe
4
38.4
29.3
33.3
109.74
William
Jones
2
88.8
99.9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:26:31.663

您的问题措辞不佳，但如果我理解正确，这可能会奏效。

```
people = int(input('Enter number of people: ')) # eval is generally not a good idea
for i in range(people):
    firstn = input()
    lastn = input()

    numbers= int(input('Enter number: '))

    print(firstn, lastn, numbers)

    print(sum(numbers)) # prints sum of 0,1,2...numbers-1 
```

这是假设您使用的是 Python 3。对于 Python 2.7，`input()`将`raw_input()`

希望这能回答你的问题

# ios - iOS - 随机动画颜色

> ID：15589722
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:17:10.133
> 
> 标签：ios, objective-c, animation, uiview

我正在为一些子视图制作动画，动画的步骤之一是更改视图背景颜色。但是，尽管我有一个返回随机颜色的函数，但一旦设置了背景颜色，在动画定义期间，它就不会再次调用我的函数来获取另一种颜色。

有什么方法可以强制动画在每次执行动画时调用我的函数？

* * *

片段：

```
for (UIView* subView in self.view.subviews) {
    dispatch_async(dispatch_get_main_queue(), ^{
                    [UIView animateWithDuration:1.0f
                          delay:0.0f
                        options: UIViewAnimationOptionRepeat
                     animations:^{
                         subView.backgroundColor = getRandomColor();
                     }
                     completion:nil];
                     });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:05:01.397

`getRandomColor();`只会被调用一次，并且`subView`每 1 秒将其背景颜色设置为该颜色（因此它会从原始背景颜色设置为动画，然后每 1 秒设置为相同的颜色）。

你需要做的是把它放在一个方法中， remove `UIViewAnimationOptionRepeat`，然后在 UIView 动画中添加一个完成块，再次调用该方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-23T18:39:10.297

如果你想要的只是切换背景颜色，这里是另一种方法：

*   不需要做for循环
*   不需要做 dispatch_async

    ```
    NSArray *animationImages = [[NSArray alloc] initWithObjects:
    [UIImage imageNamed:@"image1.png"],    
    [UIImage imageNamed:@"image2.png"],
        ....
    [UIImage imageNamed:@"imagen.png"], nil];

    self.imageView.animationImages=animationImages;
    self.imageView.animationDuration=1.0;  //set duration
    [self.imageView startAnimating]; 
    ```

每个 image1..imageN.png 由您想要的颜色组成，imageView 是您的背景颜色占位符视图。

**免责声明：**背景颜色作为动画属性本身可能有更好的解决方案。这只是为了让您免于对 GCD 的未知数，以防您可能在不知道为什么要以这种方式使用它的情况下使用它。

# javascript - 同一页面上的多个 Google CSE（自定义搜索引擎）框

> ID：15589725
> 
> 赞同：3
> 
> 时间：2013-03-23T17:17:13.273
> 
> 标签：javascript, google-custom-search

我正在尝试在同一页面上实现两个（不同的）Google CSE 搜索框。问题是只有第一个实例可以正常工作。例如，标题中的站点范围搜索框，然后在某些页面上，在站点的狭窄筒仓内搜索的第二个搜索框等。

这不能正常工作，因为每个框都使用谷歌生成的代码，它们都获得相同的表单 ID，这显然是无效的。这会导致 google 水印品牌无法出现在框 #2 中，并且一些自动/google 生成的变量也无法为第二框生成，例如 ss 参数（搜索会话）。

现在，搜索本身在两个框中都起作用，例如用户搜索，被带到正确的结果页面，并显示正确的结果。

我只是想解决这个问题：如何使第二个表单获得不同的 ID 值（并且仍然可以正常工作 - 因为谷歌的 javascript 会查找 ID `cse-search-box`）我尝试向 ID 和 NAME 属性添加唯一标识符元素，`<form>`但这导致 google.com javascript 发生故障（因为我相信它只查找“cse-search-box”）

代码如下：

搜索框 1：

```
<form id="cse-search-box" name="cse-search-box" class="search searchHeader" method="get" action="/search">
<input type="hidden" name="cx" value="partner-pub-0000000000000000:000" />
<input type="hidden" name="cof" value="FORID:10" />
<input type="hidden" name="ie" value="UTF-8" />
<input type="text" name="q" id="q" class="text_input" />
<input type="submit" name="sa" value="Search" class="submit" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script> 
```

搜索框 2：

```
<form id="cse-search-box" name="cse-search-box" class="search searchWebDirectory" method="get" action="/search">
    <input type="hidden" name="cx" value="partner-pub-0000000000000000:111" />
    <input type="hidden" name="cof" value="FORID:10" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" id="q" class="text_input" />
    <input type="submit" name="sa" value="Search" class="submit" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:28:12.390

**来自：[http ://www.google.com/cse/docs/cref.html](http://www.google.com/cse/docs/cref.html)**

/coop/cse/brand 中名为“form”的参数输出代码中的第一个 getElementById。因此，使用[http://www.google.com/coop/cse/brand?form=cse-search-box&lang=en](http://www.google.com/coop/cse/brand?form=cse-search-box&lang=en)将创建一个`cse-search-box`-targetted 代码，同时`box2`将在不同的 ID 上触发。关键字`searchbox_demo`是保留的。

如果您愿意，请试一试：http: [//jsfiddle.net/JTV6f/1/](http://jsfiddle.net/JTV6f/1/)。但是，考虑到您在做什么，如果我是您，我会切换到 V1 或 V2 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T14:19:04.573

这是一个经过测试的解决方案。花了我一段时间，但我很慢，而且我并不一直使用 CSS。

使用 V1 代码。当您在设置屏幕上选择获取代码时，有一个 V1 代码选项。

将您的搜索代码放在一个 div 中

```
div tag

searchcode

end div tag 
```

使您的 cse 变量独一无二。那将是代码顶部的两个位置。

```
div id='cse' 
```

再低一点

```
customSearchControl.draw('cse', options); 
```

对于每个搜索，这些应该与其他搜索相同但不同。我使用了 cse0、cse1、cse2。

这将修复搜索，因此每个搜索都将按指定工作，但它们仍将共享相同的 CSS。

因此，使用 scoped 属性限定您的样式。

```
style type='text/css' scoped 
```

对每个搜索代码执行此操作。现在您的搜索可以有自己的外观和感觉、颜色等。

[http://deltaboogie.com/search](http://deltaboogie.com/search)

谢谢，毛茸茸的拉里

# jakarta-ee - wicket 组件 - 发布者 - 订阅者模式

> ID：15589730
> 
> 赞同：1
> 
> 时间：2013-03-23T17:17:50.147
> 
> 标签：jakarta-ee, wicket

发布者 - 订阅者模式是一个非常知名的模式我想知道是否有检票口的接口可以使用这种模式

我的目标是

假设有人将商品添加到购物车然后 sum 组件 draw 本身因为它订阅了由 cart 组件 ad draw 本身发布的事件

我可以使用检票口中的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:45:25.780

我认为最简单的方法是使用 Wicket 的内置事件机制 - 请查看相应的[示例](http://www.wicket-library.com/wicket-examples/events/)以查看它是否适合您的需求。

# c++ - Lambda 函数作为构造函数中 std::function 的默认参数

> ID：15589731
> 
> 赞同：5
> 
> 时间：2013-03-23T17:17:52.393
> 
> 标签：c++, c++11, lambda, default-arguments

我想在类的构造函数中为仿函数参数设置一个默认仿函数。作为一个最小的例子，我想出了一个应该作为过滤器服务的类，如果过滤`T`器函数返回 true，它会过滤 i 类型的元素。过滤器函数应该在构造函数中提供，默认为“全部接受”过滤器函数：

```
template<class T>
class Filter
{
public:
    typedef std::function<bool(const T&)> FilterFunc;

    Filter(const FilterFunc & f = [](const T&){ return true; }) :
        f(f)
    {
    }

private:
    FilterFunc f;
}; 
```

我实例化模板类，如下所示：

```
int main() {
    Filter<int> someInstance;  // No filter function provided    (<-- line 19)
} 
```

但是，[gcc 4.7 似乎不喜欢这段代码](http://ideone.com/mylbU0)：

```
prog.cpp: In constructor ‘Filter<T>::Filter(const FilterFunc&) [with T = int; Filter<T>::FilterFunc = std::function<bool(const int&)>]’:
prog.cpp:19:17: internal compiler error: in tsubst_copy, at cp/pt.c:12141
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.7/README.Bugs> for instructions.
Preprocessed source stored into /home/g9i3n9/cc82xcqE.out file, please attach this to your bugreport. 
```

怎么了？我的代码标准是否符合（所以 GCC 在这里真的有问题或者没有实现这个）还是我做错了什么？

作为一种解决方法，我目前使用默认构造`std::function`，并且只有在设置时才调用它（我想调用它的地方）：

```
 Filter(const FilterFunc & f = FilterFunc) :
        f(f)
    {
    }

    // When using it:
    void process() {
        if (!f || f(someItem)) {    // <-- workaround
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:26:47.843

这是一个错误：编译器崩溃或在处理源代码时发生致命的内部错误，并且消息本身诚恳地邀请您将错误视为：

> “请提交完整的错误报告，并在适当的情况下提供预处理源。”

这是另一种可能的解决方法：

```
template<class T>
class Filter
{
public:
    typedef std::function<bool(const T&)> FilterFunc;

    Filter() { }
    Filter(FilterFunc const& f) : f(f) { }

private:
    FilterFunc f = [](const T&){ return true; };
}; 
```

作为另一种选择，GCC 支持*委托构造函数*，您可能需要考虑：

```
#include <functional>

template<class T>
class Filter
{
public:
    typedef std::function<bool(const T&)> FilterFunc;

    Filter() : Filter([](const T&){ return true; }) { }
    Filter(FilterFunc const& f) : f(f) { }

private:
    FilterFunc f;
}; 
```

# java - 为什么这两个节点在红黑树中不是黑色的？

> ID：15589734
> 
> 赞同：2
> 
> 时间：2013-03-23T17:18:12.500
> 
> 标签：java, data-structures, collections, tree, red-black-tree

据我了解，在红黑树中，当我插入一个新节点时，当我遇到一个带有 2 个红色子节点的黑色节点时，我需要翻转颜色，即使父节点变为红色，并将其 2孩子黑色（从根除外）。

我在维基百科上看到了这张图片：

![在此处输入图像描述](../Images/404e47b2baf0c53f1447700e52e1f9c1.png)

为什么8和17不是黑色的？

我还签入了一个来自[Lafore](http://mainline.brynmawr.edu/Courses/cs206/spring2004/WorkshopApplets/Chap09/RBTree/RBTree.html)的“Java 中的数据结构和算法”的小程序；同样的事情，这些节点变成黑色。

这棵红黑树有多个版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:57:30.183

实际上很可能使这些节点变黑。可能有几种不同的方法来为树的节点着色，以使生成的树服从红/黑树的结构约束。例如，任何完美的二叉树都可以被着色，使得所有节点都是黑色的，或者可以让行在红色和黑色之间交替，等等。

在红/黑树中重新着色和旋转节点的特定规则并不是唯一可能的规则。它们只是碰巧正确有效地工作的那些。我们原则上可以更改它们，以便树以不同的方式着色和旋转，这可能会为具有相同节点的树产生不同的颜色或形状。

希望这可以帮助！

# perl - 分隔值的制表符

> ID：15589735
> 
> 赞同：1
> 
> 时间：2013-03-23T17:18:12.567
> 
> 标签：perl, bash, shell

我在 txt 文件中存储的列中有一组值，

```
A13R
W234H
Q1H 
```

我想要的是用制表符分隔第一个字符和最后一个字符，就像这样

```
A "\t" 13 "\t" R
W "\t" 234 "\t" H 
```

我尝试过的当然失败了

```
tr "" "\t" <test.txt>test2.txt 
```

你能在bash中提出一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:23:13.293

这行得通吗？

```
sed 's/^./&\t/;s/.$/\t&/' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:01:55.293

纯重击；使用子字符串扩展：

```
while read line ; do
  echo -e "${line:0:1}\t${line:1:-1}\t${line: -1:1}"
done < data.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T17:23:07.580

由于它在您的问题中被标记，您可以`perl`像这样的用户：

```
perl -pi -e 's/(.)(.*)(.)/\1\t\2\t\3/' < in.txt > out.txt 
```

小心使用相同的文件进行输入和输出，如您的`tr`示例。请记住，您的 shell 将在执行命令*之前*打开输入和输出文件。输出文件是*clobbered*，因此当您的命令运行时，它会找到一个空文件。有一些工具可以解决这个问题，比如`sponge`，但是使用两个不同的文件名同样容易。

# c++ - 适用于 iOS 的 OpenCV 构建错误

> ID：15589736
> 
> 赞同：0
> 
> 时间：2013-03-23T17:18:18.010
> 
> 标签：c++, iphone, objective-c, opencv

我正在尝试从[这个 github 项目](https://github.com/foundry/OpenCVStitch)导入文件以启用图像拼接

我的应用程序。我下载了这个项目，然后在手机上运行它，效果很好。然而，

将其文件添加到我的 XCode 项目中后，出现以下两个错误：

```
Undefined symbols for architecture armv7:
"cv::_InputArray::_InputArray(std::vector<cv::Mat, std::allocator<cv::Mat> > const&)", referenced from:

Unable to open executable '...' 
```

最初我有 40 多个错误，我通过这样做解决了[这些](https://stackoverflow.com/a/14864321)错误。

```
I've modified my new XCode project to reflect the OpenCV github project. Thoughts? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:30:22.330

确保您是否已将 OpenCV 框架正确地包含到您的 Xcode 项目中。

[链接](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/2.4.4/opencv2.framework.zip/download)下载最新的opencv框架源代码。

只需将此文件夹作为框架包含到您的项目中即可。

# sql - Informix DB - 按年、月、周、日、小时进行 SQL 分组

> ID：15589737
> 
> 赞同：1
> 
> 时间：2013-03-23T17:18:28.270
> 
> 标签：sql, informix

我想在 Informix db 中编写 sql 查询以返回按年/月/周/日/小时分组的结果（我将为每个查询编写 5 个 sql 查询）。

我的情况如下：

*   我有两个表格，比赛表格（包含有关比赛名称、描述、开始日期、提交日期、审核日期、结果日期的信息），另一个表格是提交表格（包含提交给比赛的内容，例如提交 ID、提交者 ID、提交日期..等）。
*   我想要实现的是通过按天（sql返回关于每天提交的提交数量的统计信息）、按周、按月或按年..等分组的提交来获得比赛的进展。

我熟悉在 Informix DB 中编写 sql 查询，但这种情况对我来说非常复杂，我不知道该怎么做。

您能否为我提供一个完成上述场景的示例查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:07:28.600

如果这不是您所需要的，它可能会帮助您取得一些进展，或者给您一些想法：

```
SELECT contest_id, YEAR(submission_date) AS submission_period, COUNT(*),
       "Y" AS sub_type
  FROM submissions
  GROUP BY 1, 2
UNION ALL
SELECT contest_id, MONTH(submission_date) AS submission_period, COUNT(*),
       "M" AS sub_type
  FROM submissions
  GROUP BY 1, 2
UNION ALL
SELECT contest_id, DAY(submission_date) AS submission_period, COUNT(*),
       "D" AS sub_type
  FROM submissions
  GROUP BY 1, 2
ORDER BY 1, 4, 2 
```

但是，如果您正在逐年查看月份而不是孤立地查看月份或年份中的每周，那么我强烈建议您查看创建“时间维度”，例如在数据仓库应用程序中使用的。这是一张包含每天记录的表格，看起来有点像这样：

```
Date         Year   Month     Week      Quarter  Day    MthName
2013-01-01 | 2013 | 2013-01 | 2013W01 | 2013Q1 | Tues | January
2013-01-02 | 2013 | 2013-01 | 2013W01 | 2013Q1 | Wed  | January
..
2013-03-20 | 2013 | 2013-03 | 2013W12 | 2013Q1 | Wed  | March
..
2013-05-01 | 2013 | 2013-05 | 2013W18 | 2013Q2 | Wed  | May 
```

通过将提交日期加入此表，您可以按适合您要求的任何列进行分组。

*专业提示：不要称它们为我标记的那些标题，使用保留字会让你痛苦:-)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:30:31.083

根据文档，informix 具有执行此操作的功能。您只是不要对每个日期组件使用相同的功能。

具有讽刺意味的是，要获取小时，您使用日期函数 - to_char()。小时可能有一个合适的面具。如果没有，您将不得不使用子字符串。

对于日期组件，您将使用时间组件 year()、month() 以及 day() 或 weekday()。这周你可能不走运。

请参阅这些参考页面：

*   [时间函数](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqlt.doc/sqltmst88.htm)

*   [日期转换函数 (IDS)](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqlt.doc/sqltmst89.htm)

**编辑**

这是一个简单的例子，使用 year 函数。

```
select year(resultdate) resultyear, count(*) results
from etc
group by year(resultdate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T18:37:59.333

当我运行此查询时，我收到一个错误：“错误：发生语法错误。（状态：37000，本机代码：FFFFFF37）”您必须将组更改为列号，即

select year(resultdate) as resultYear, count(*) as resultCount from caa44340 group by 1

让它正确运行！

# c# - ASP.Net MVC 实体框架关系

> ID：15589742
> 
> 赞同：0
> 
> 时间：2013-03-23T17:18:56.647
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

据我了解，我这样做是正确的。我在表 Category 的 id 字段上有一个与 CategoryId 关系的博客表。但是当我使用 .include() 命令时，我无法在我的控制器中解决它。这是代码。

博客.cs

```
public class Blog
{
    [Key]
    public int Id { get; set; }
    [Required, StringLength(50)]
    public string Title { get; set; }
    [DataType(DataType.Date)]
    public DateTime PostedDate { get; set; }
    [Required]
    public string Meat { get; set; }
    [Required, StringLength(25)]
    public int CategoryId { get; set; }
    public string FriendlyUrl { get; set; }

    public virtual ICollection<Category> Category { get; set; }
}

public partial class BlogDbContext : DbContext
{
    public DbSet<Blog> Blogs { get; set; }
} 
```

类别.cs

```
public class Category
{
    [Key]
    public int Id { get; set; }
    [Required, StringLength(50)]
    public string Title { get; set; }
    public string FriendlyUrl { get; set; }
}

public partial class BlogDbContext : DbContext
{
    public DbSet<Category> Categories { get; set; }
} 
```

博客控制器

```
public class BlogController : Controller
{
    private readonly BlogDbContext _db = new BlogDbContext();

    public ActionResult Index()
    {
        var blogs = _db.Blogs.Include(c => c.Category); //This is where the error occurs
        return View(blogs.ToList());
    }
} 
```

![我的 SQL Server 2012 数据库中的关系](../Images/efda24ff10a5a9c603ce2b58019e879d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:26:39.223

```
var blogs = _db.Blogs.Include("Category"); 
```

应该工作得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:33:48.763

代替

```
public virtual ICollection<Category> Category { get; set; } 
```

我认为应该是

```
public virtual Category Category { get; set; } 
```

# facebook - 封面图片 offset_y 太大

> ID：15589743
> 
> 赞同：1
> 
> 时间：2013-03-23T17:19:06.360
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook Graph 的 API 来获取封面图片并将它们放在我的应用程序中。

我使用 offset_y 属性来定位图片，几乎所有时间都可以使用，但在其他一些情况下，API 返回的值似乎太大，例如有时它返回 78、82 甚至 100。

我错过了什么吗？我知道这些值是百分比，那么偏移量怎么可能是 100%？

感谢您的回答

# css - Bootstrap：电子邮件字段的高度小于文本字段

> ID：15589746
> 
> 赞同：0
> 
> 时间：2013-03-23T17:19:22.420
> 
> 标签：css, twitter-bootstrap

我有一个包含文本和电子邮件字段的表单。Bootstrap 始终以小于文本或密码字段的高度呈现电子邮件字段。知道如何解决这个问题吗？我正在使用 rails 标签“text_field”和“email_field”来生成表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:35:01.000

`font-size`尝试使用 css属性显式设置每个字段的 div 的字体大小。

示例（在您的 css 文件中）：

```
div.email_field {
    font-size: 16px;
}
div.text_field {
    font-size: 12px;
} 
```

# ruby-on-rails - Ruby on Rails：生成 erb html 网页并可以访问数据库

> ID：15589749
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:19:31.730
> 
> 标签：ruby-on-rails

我对 Ruby on Rails 很陌生，很多简单的事情我都做不到。这是我面临的问题。在rails中，当我生成一个数据库时，rails会为这个数据库生成一堆erb html文件。（查看、编辑、添加、删除等）。

现在，我想添加另一个 erb 文件并满足两个条件。首先，它可以使用这个数据库。有关更多详细信息，它可以使用此结构而无需对其进行配置：

```
<% @products.each do |product| %> 
# product is a row in table products 
```

其次，浏览器可以浏览到这个erb html文件。例如：

```
http://localhost:3000/products/myfile 
```

我认为那些动作真的很容易，但是因为我是通过教程学习 ruby​​ on rails 的，所以我不能做那些事情。请帮我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:28:37.220

你的问题很难理解，但如果我理解正确，那么你需要：

*   将新的成员路由添加到 Products 资源`routes.rb`- 请参阅[本指南](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)
*   创建一个`app/views/products`与新路由名称匹配的新视图

# jquery - 将页面加载到 div

> ID：15589751
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:19:38.350
> 
> 标签：jquery, jquery-load

当页面第一次加载时，我在 Jquery.ready 上加载的页面内容完美运行，然后当我使用 ajax 做一些事情并尝试再次加载页面时，javascript 在我尝试加载的第二个页面上不起作用。我试图通过使用`live()`/`on()`方法来解决这个问题，但没有奏效。

```
$(document).ready(function () {
    $("#grupyonetimarea").load("/Panel/MusteriSourcePages/mus_grup_add.aspx");
});

$('#btnekleme').live('click', function () {
    $.ajax({
        type: "POST",
        url: "/Panel/MusteriSource/mus_kisiadd.aspx/mus_kisi_kaydet",
        data: "{ad:'" + $.trim($("#txtalt_mus_adi").val()) + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        cache: false,
        before: $("#btnekleme").hide(),
        success: function (msg) {
            if (msg.d == "ok") {
                $("#grupyonetimarea").load("/Panel/MusteriSourcePages/mus_grup_add.aspx");
            } else $("#loaded").html(msg.d).show(500);
        },
        error: function (x, e) {
            alert("The call to the server side failed. " + x.responseText);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:23:05.773

`live`已弃用，因此使用`on()`委托事件.. 将其委托给最近的静态父级.. （这可能不是问题，但如果您想在不久的将来更新您的 jquery，则可以安全地使用 on() 以备将来...）..如果您想了解更多信息，请点击此处的[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)`on()`

```
 $(document).on('click','#btnekleme', function () {.. //using closest static parent element is preferred here than the document 
```

你可以在ajax中将数据作为对象发送

```
var inputValue= $.trim($("#txtalt_mus_adi").val());
data: {ad:inputValue}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:16:04.237

> 非常感谢您的所有回答。我就是这样做的，当我运行该函数时，我只是创建了一个函数，即 kontrolet()，它可以很好地工作，这是我想要的。

```
 $(document).on('click', '#btnekleme', function () {
                    $("#grupyonetimarea").load("/Panel/MusteriSourcePages/mus_grup_add.aspx");
                });

 function kontrolet() {
         $.ajax({
                            type: "POST",
                            url: "/Panel/MusteriSource/mus_kisiadd.aspx/mus_kisi_kaydet",
                            data: "{ad:'" + $.trim($("#txtalt_mus_adi").val()) + "'}",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            async: true,
                            cache: false,
                            before: $("#btnekleme").hide(),
                            success: function (msg) {
                                if (msg.d == "ok") {
                                    $("#grupyonetimarea").load("/Panel/MusteriSourcePages/mus_grup_add.aspx");
                                    alert("Kayıt işlemi başarılıdır.!");
                                    TextArealariClearET();
                                    $("#btnekleme").show();
                                }
                                else
                                    $("#loaded").html(msg.d).show(500);
                            },
                            error: function (x, e) {
                                alert("The call to the server side failed. " + x.responseText);
                            }
                        });
        } 
```

# actionscript-3 - 错误 #1009 在 ActionScript 3 中，当我尝试移除子弹击中敌人时

> ID：15589754
> 
> 赞同：0
> 
> 时间：2013-03-23T17:20:14.593
> 
> 标签：actionscript-3, flash, actionscript, game-development

嗨，我有一个问题，我想我可能知道是什么原因造成的，但我不知道如何解决。我任何人都可以帮我解决这个问题，它会很棒......错误是

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 Bullet/removeSelf()[C:\Users\Alan\Desktop\game copy\Bullet.as:56] 在 Bullet/loop()[C:\Users\Alan\Desktop\game copy\Bullet.as:44]

这是删除子弹 ps 的主要操作的代码。对不起帽子。

```
 stage.addEventListener(Event.ENTER_FRAME, testCollisions);

//Check for collisions between an enemies array and a Lasers array
function testCollisions(e:Event):void
{

    var tempEnemy:MovieClip;
    var tempLaser:MovieClip;

    for (var i:int=enemies.length-1; i >= 0; i--)
    {
        tempEnemy = enemies[i];
        for (var j:int=bullets.length-1; j>=0; j--)
        {
            tempLaser = bullets[j];
            if (tempLaser.hitTestObject(tempEnemy))
            {

                removeChild(tempEnemy);
                removeLaser(j);

            } 
        }
    }
}

function removeLaser(idx:int)
{
    parent.removeChild(bullets[idx]);
    bullets.splice(idx,1);
} 
```

这是删除它的子弹类的代码

```
 public class Bullet extends MovieClip {

        private var speed:int = 30;
        private var initialX:int;
        public var eligableForRemove:Boolean = false;

        public function Bullet(playerX:int, playerY:int, playerDirection:String) {

            // constructor code
            if(playerDirection == "left") {
                speed = -30; //speed is faster if player is running
                x = playerX - 25;
            } else if(playerDirection == "right") {
                speed = 30;
                x = playerX + 25
            }
            y = playerY - 75;

            initialX = x; //use this to remember the initial spawn point

            addEventListener(Event.ENTER_FRAME, loop);
        }

        public function loop(e:Event):void
        {
            //looping code goes here
            x += speed;

            if(speed > 0) { //if player is facing right
                if(x > initialX + 640) { //and the bullet is more than 640px to the right of where it was spawned
                    removeSelf(); //remove it
                    eligableForRemove = true;
                }
            } else if (speed < 0) { //else if player is facing left
                if(x < initialX - 640) {  //and bullet is more than 640px to the left of where it was spawned
                    removeSelf(); //remove it
                    eligableForRemove = true;
                } else {
                    eligableForRemove = false;
                    }
            }
        }

        public function removeSelf():void
        {
            if(eligableForRemove == true){trace("remove self");
            removeEventListener(Event.ENTER_FRAME, loop); //stop the loop
            this.parent.removeChild(this); //tell this object's "parent object" to remove this object
            //in our case, the parent is the background because in the main code we said:
            //back.addChild(bullet);
            }

        }

    }

} 
```

我认为是什么导致了它，当没有什么要删除时，它调用了一个空函数 removeSelf。所以我添加了 eligableForRemove 变量，但我可能没有正确放置它，所以如果有人能帮我解决这个问题，我将不胜感激......另外，如果我尝试从主要操作中删除项目符号，它会给我它必须是调用者错误的孩子。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:59:28.987

您是对的，这可能是由于尝试两次删除孩子而导致的，并且您在调用`eligableForRemove` *后进行*`removeSelf()`了设置，因此`removeSelf()`看不到更新的值。

但是，我认为问题在于您正在移除子弹`removeLaser()`，但*没有*告诉子弹它已经死了，所以它继续运行循环，最终它超出了界限并尝试再次移除自己。

您应该能够摆脱`eligableForRemove`，只需更改`removeLaser()`为：

```
function removeLaser(idx:int)
{
    (bullets[idx] as Bullet).removeSelf();
    bullets.splice(idx,1);
} 
```

（或者如果`bullets`是 a`Vector.<Bullet>`你可以这样做`bullets[idx].removeSelf()`，因为运行时已经知道它是 a `Bullet`。）

# dart - Dart Web UI - 将对象数据传递给组件

> ID：15589757
> 
> 赞同：2
> 
> 时间：2013-03-23T17:20:18.147
> 
> 标签：dart, dart-webui

我正在尝试将数据传递给自定义组件。[http://www.dartlang.org/articles/web-ui/#pass-data-to-component](http://www.dartlang.org/articles/web-ui/#pass-data-to-component)上的示例效果很好。

但我正在尝试传递一个 JsonObject var，它会因以下消息而崩溃：

```
Exception: type 'String' is not a subtype of type 'JsonObject' of  'value'. 
```

所以看起来我只能传递字符串和数字数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:21:36.990

通过 Map 类时，这对我有用。也许您可以更改代码以使用[dart:json](http://api.dartlang.org/docs/releases/latest/dart_json.html)库和核心库 Map 类，而不是第三方[JsonObject](https://github.com/chrisbu/dartwatch-JsonObject)。

JsonObject 还使用 dart2js 尚不支持的 mirrors 库，因此可能不适合基于浏览器的开发。

# http - Charles 代理可以从头开始编写 HTTP 请求吗？

> ID：15589759
> 
> 赞同：7
> 
> 时间：2013-03-23T17:20:22.583
> 
> 标签：http, request, fiddler, charles-proxy

我一直在寻找解决方案，也许我太累了，错过了解决方案。

一个人如何使用 Charles Proxy 手动编写 HTTP GET 或 POST 请求？

与 Fiddler 中的功能一样，我正在寻找手动打开编辑器并输入请求的正文和标头的能力。这是我对查尔斯的主要兴趣。

捕获、编辑和执行实时请求的能力几乎相同，但我在 Charles 之外捕获了数据，并希望使用这些 headers+query+body。

搜索 SO 和网络并没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:00:48.943

我认为在 Charles 中，您必须结合使用重复工具和编辑工具，而不是使用单个工具。（[http://www.charlesproxy.com/documentation/tools/edit/](http://www.charlesproxy.com/documentation/tools/edit/)）

如果您在 Mac 上运行并且不能使用 Fiddler，还有其他选项，例如[http://www.wiztools.org/](http://www.wiztools.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-15T03:56:34.233

从 3.11 版开始，Charles Proxy 具有 Compose 功能（Edit --> Compose 或 cmd-m）。它仍然不如 Fiddler，但如果你需要它，它就在那里。

# c# - 如何在任务栏中的选项卡更改时刷新 C# Windows 应用程序中的 UI

> ID：15589760
> 
> 赞同：-2
> 
> 时间：2013-03-23T17:20:24.140
> 
> 标签：c#, user-interface, refresh

如何在 c# windows 应用程序中在任务栏中更改选项卡时刷新 UI，当它处于长时间的过程中或至少从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:21:49.880

您必须异步执行长过程（即在单独的线程中）。这使 GUI 线程可以自由地绘制界面。

例如，查看该 MSDN 页面底部的[`BackgroundWorker`类和示例。](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)它将允许您在后台执行任务。

# android - 如何在 android 应用程序中分配超过 25MB，api 级别 8？

> ID：15589761
> 
> 赞同：0
> 
> 时间：2013-03-23T17:20:33.013
> 
> 标签：android, memory-management

我正在尝试编写一个快速的 android 应用程序来对我正在调试的另一个应用程序施加内存压力，我遇到了一个大问题，即我不能分配超过 25MB，即使我分配的内存小至 4k 块.

我发现有一个清单属性可以添加到应用程序标记中，`android:largeHeap="true"`但显然直到 API 级别 11 才添加，我需要针对 API 级别 8。

然而我*知道*这是可能的，因为 Firefox 经常占用*60-80MB*的 RAM，这是我的测试应用程序能够占用的 2-3 倍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:22:06.193

在设备上分配超过堆限制的唯一方法是在堆外分配。也就是说，您需要使用 NDK 为您的应用程序分配更多内存，这正是 Firefox 所做的。

除此之外，您不能分配更多。在 99% 的情况下，您不需要分配更多。你只需要更有效地使用你所拥有的。

# drupal - 在 Block Drupal 上显示外部网站文章

> ID：15589763
> 
> 赞同：0
> 
> 时间：2013-03-23T17:20:57.273
> 
> 标签：drupal, feed, drupal-blocks

我试图弄清楚如何在 Drupal 标准块中显示来自外部网站（在同一服务器上）的帖子。假设像“recent_blog_posts”，但来自外部来源。

有没有关于这个主题的教程？找不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T17:36:28.670

如果外部网站可以提供其最近内容的 RSS 提要（如果它是博客，它很可能会这样做），那么您可以使用 Drupal 的聚合器模块（在 Drupal 的核心中，但默认情况下禁用）在一个块。

您可以阅读[http://drupal.org/node/289](http://drupal.org/node/289)作为起点。

# javascript - 如何在员工接受 HIT 之前在 HIT 中隐藏指向外部网页的链接

> ID：15589764
> 
> 赞同：1
> 
> 时间：2013-03-23T17:20:58.620
> 
> 标签：javascript, amazon-web-services, mechanicalturk

在 Amazon Mechanical Turk 上，我在 HIT 中包含一个指向外部网页的链接，工作人员将在该网页上进行实际的 HIT。但是，我想对工人隐藏链接，直到他们接受 HIT。

这可以通过在创建 HIT 时在页面上添加一些 JavaScript 来完成吗？或者这必须通过 MTurk API 或库来完成，例如`Boto`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:00:14.557

打开您的外部网页时，亚马逊将在 url 查询字符串中传递变量。对于这个用例，您想查看`assignmentId`. 如果工作人员`assignmentId`正在`ASSIGNMENT_ID_NOT_AVAILABLE`预览 HIT。（更多信息见[mturk 文档](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_ExternalQuestionArticle.html#ApiReference_ExternalQuestionArticle-the-external-form-preview-mode)。）

您可以使用以下 javascript 获取这些变量：

```
var assignmentId = $.getUrlVar('assignmentId');
var workerId = $.getUrlVar('workerId');
var hitId = $.getUrlVar('hitId');
if (assignmentId == "ASSIGNMENT_ID_NOT_AVAILABLE"){
  // Worker is previewing the HIT
}
else {
  // Worker has accepted the HIT
} 
```

哪里`$getUrlVar`是一个简单的 jquery 插件：

```
$.extend({
  getUrlVars: function(){
    // From http://code.google.com/p/js-uri/source/browse/trunk/lib/URI.js
    var parser = /^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/;
    var result = window.location.href.match(parser);
    var scheme    = result[1] || null;
    var authority = result[2] || null;
    var path      = result[3] || null;
    var query     = result[4] || null;
    var fragment  = result[5] || null;

    if (query === null || query === undefined) {
      return {};
    }
    var vars = [], hash;
    var hashes = query.split('&');
    for(var i = 0; i < hashes.length; i++)
    {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    return vars;
  },
  getUrlVar: function(name){
    return $.getUrlVars()[name];
  }
}); 
```

# uitabbarcontroller - 如何通过选项卡式导航视图补偿模态视图中的隐藏状态栏

> ID：15589765
> 
> 赞同：0
> 
> 时间：2013-03-23T17:21:06.767
> 
> 标签：uitabbarcontroller, modalviewcontroller, uistatusbar

我有一个有 4 个视图的 UiTabbar 控制器。我还添加了一个按钮（添加到标签栏）。这提供了一个模态视图控制器。在我的模态视图控制器的 viewDidAppear 方法中，我有以下代码

```
[self setWantsFullScreenLayout:YES];
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:YES]; 
```

出于某种原因，第一次加载时，视图向下移动了 20 像素。如果我关闭视图控制器，然后再次显示它，则视图处于所需位置。我应该在哪里放置此代码，以便视图始终位于正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:36:55.300

首先我们通过 来检查 statusBar 是否已经隐藏`[[UIApplication sharedApplication] isStatusBarHidden]`，如果它没有隐藏（== 被显示），我们隐藏它！否则，另当别论！

*   要在显示状态时修复 20px - 但导航未正确下推，只需将 20 点添加`origin.y`到`self.navgigationController.navigationBar.frame`.

*   当我们想要隐藏状态栏时也这样做，只需删除那个 20 点就可以`origin.y`了。`self.navgigationController.navigationBar.frame``0`

我也遇到了同样的问题，下面是我的示例代码，你可以随意配置：

```
@implementation SomeViewController {
    BOOL isStatusBarEnabled;
}

// ...

- (void)toggleStatusBar
{
    UINavigationBar *navBar = self.navigationController.navigationBar;

    if ([[UIApplication sharedApplication] isStatusBarHidden]) {

        // Change to regular mode
        // Show status bar
        [[UIApplication sharedApplication] setStatusBarHidden:NO
                                                withAnimation:UIStatusBarAnimationSlide];
        [UIView animateWithDuration:0.3
                         animations:^{
                             navBar.frame = CGRectMake(navBar.frame.origin.x, 20, navBar.frame.size.width, navBar.frame.size.height);
                         } completion:nil];

    } else if (![[UIApplication sharedApplication] isStatusBarHidden]) {
        // Change to fullscreen mode
        // Hide status bar
        [[UIApplication sharedApplication] setStatusBarHidden:YES
                                                withAnimation:UIStatusBarAnimationSlide];
        [UIView animateWithDuration:0.4
                         animations:^{
                             navBar.frame = CGRectMake(navBar.frame.origin.x, 0, navBar.frame.size.width, navBar.frame.size.height);
                         } completion:nil];
    }

}

// ... 
```

...然后，就我而言，我有一个设置键让用户选择切换显示/隐藏状态栏。

```
// ...

- (void)onDefaultsChanged:(NSNotification*)aNotification
{

    NSUserDefaults *standardDefaults = [NSUserDefaults standardUserDefaults];
    isStatusBarEnabled = [standardDefaults boolForKey:kStatusBar];

    if (isStatusBarEnabled) {

      if ([[UIApplication sharedApplication] isStatusBarHidden]) {

          // Change to regular mode
          // Show status bar
          [self toggleStatusBar];   

    } else {

        // Change to fullscreen mode
        // Hide status bar
        [self toggleStatusBar];

  }

  // ...
} 
```

而已！

# iphone - 应用程序再次启动

> ID：15589766
> 
> 赞同：1
> 
> 时间：2013-03-23T17:21:22.843
> 
> 标签：iphone, ios, ipad

我不确定为什么会这样，但我想一个建议会对我有所帮助。

我有 4 个视图控制器。每当我退出应用程序（应用程序进入后台）并再次打开应用程序时，我的应用程序就会打开，因为它再次启动，它应该打开视图控制器，从那里我关闭了应用程序。

PS：我没有完全关闭应用程序，我只是点击主页按钮，应用程序进入后台。

我还没有在 appdelegate 上写任何东西，这使得这发生了。有什么建议么？

```
Thanks 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T18:11:50.407

根据我的说法，当您的应用每次“重新启动”时，有两种情况

-->**如果您的应用程序在 iphone 上按下主页按钮时崩溃**。
检查您的应用程序在进入非活动模式时是否正在执行任何操作。为此，请检查您的`applicationWillResignActive`方法。

-->**如果您在文件中设置`UIApplicationExitsOnSuspend`了标志`.plist`**。
当用户切换到另一个应用程序时，这将导致应用程序不会进入后台。

如果您仍然不明白问题所在，那么我建议您在`applicationDidFinishLaunching`这样的方法中添加异常处理程序

```
- (void)applicationDidFinishLaunching:(UIApplication *)application { 
    NSSetUncaughtExceptionHandler(&uncaughtExceptionHandler);
    // The rest if you code  ....
}

void uncaughtExceptionHandler(NSException *exception) {
    // You code here, you app will already be unload so you can only see what went wrong.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T17:25:58.190

当应用程序进入后台时，您可能会遇到异常，因此它会被杀死。也许一些错误的释放？

将您的设备连接到调试器并观察应用程序进入后台时发生的情况。您应该很快就会看到问题所在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T17:45:39.663

发生这种情况的原因很少。

应用程序在后台运行时可能会崩溃，也许您在应用程序上运行某些代码会在应用程序委托中进入后台，从而导致崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T19:09:21.883

我想我得到了答案，我检查了 plist，我有

> 应用程序不在后台运行：是

我将其更改为 NO 并且它起作用了。

# canvas - 如何在多个阶段覆盖 tick() 以降低 FPS

> ID：15589776
> 
> 赞同：0
> 
> 时间：2013-03-23T17:22:47.463
> 
> 标签：canvas, html5-canvas, easeljs, createjs

假设我们有 2 个阶段，并且`Ticker.setFPS(30)`，我怎样才能覆盖第二阶段的代码让我们说 15fps？

```
// Targeting 30fps
Stage['GUI'] = new createjs.Stage(gui_canvas);
createjs.Ticker.useRAF = true;
createjs.Ticker.setFPS(30);
createjs.Ticker.addEventListener('tick', Stage['GUI']);
// Targeting 15fps
Stage['Background'] = new createjs.Stage(bg_canvas);
/* Overriding ticker goes here */
createjs.Ticker.addEventListener('tick', Stage['Background']); 
```

**使用markE的解决方案解决**

```
stage['background'] = new createjs.Stage(bg_canvas);

var delay = 3;
var ticker = function(params){
  if(delay===0){
    delay = -1;
    stage['background'].update();
    delay = 3;
  }
  delay--;
};
createjs.Ticker.addEventListener('tick', ticker); 
```

**获得目标 FPS 的另一种解决方案**

```
stage['background'] = new createjs.Stage(bg_canvas);

var timestamp = new Date().getTime();
var ticker = function(){
  var now = new Date().getTime();
  if ((now - timestamp) > (1000/15)){
      stage['background'].update();
      timestamp = new Date().getTime();
  }
};
createjs.Ticker.addEventListener('tick', ticker); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:54:54.093

由于 EaselJS 有 1 个（只有 1 个）中央 Ticker 发出“tick”事件，因此您将不得不限制您的第二个 tick 函数。

为此，您只需设置倒计时延迟并等待实际执行动画，直到倒计时达到 0。

```
// make tickGUI() the tick handler for stage['GUI']
createjs.Ticker.addEventListener('tick', tickGUI);

// make tickBackground() the tick handler for stage['Background']
createjs.Ticker.addEventListener('tick', tickBackground);

// tickGUI animates on every tick
function tickGUI(){
    // do your animating stuff for GUI now
}

// tickBackground has a "2 ticks=1 animation" throttle
var tickBackgroundDelay=1;

function tickBackground(){
    if(tickBackgroundDelay==0){

        // [optionally] turn off this ticker until you process your animation
        tickBackgroundDelay=-1;  

        // do your animating stuff for Background now

        // turn on this ticker with delay=1
        tickBackgroundDelay=1;
    }
    // countdown the delay ticker
    tickBackgroundDelay--;
} 
```

# php - WordPress：

> ID：15589781
> 
> 赞同：7
> 
> 时间：2013-03-23T17:23:16.587
> 
> 标签：php, html, css, wordpress

很简单，我想从`<body>`. 我现在正在搜索一段时间，找不到它是在哪里生成的。

我想使用 Ajax 包含脚本（动态驱动器）和 CORS 将内容从一个站点嵌入到另一个站点，所以我需要`<body>`用其他东西替换它的 CSS，否则它会与站点的 CSS 混淆，它们会合并在一起。

当我`<body>`用`<abody>`它替换时，会在上面创建另一个`<body>`级别，只有`"customize-support"`类。

也许还有另一种解决方案？上面的方法是我唯一能想到的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T18:28:27.120

我花了一段时间试图找到这个，理想情况下通过覆盖钩子或其他东西来解决它，但没有运气。

在 wp-includes/theme.php 文件末尾有一个名为“wp_customize_support_script”的函数，它是在 WP 3.4.0 中引入的。

如果您查看该函数，您会看到内联 Javascript 添加了类名。更具体地说，是 JS 的最后一行，所以：

```
b[c] += ( window.postMessage && request ? ' ' : ' no-' ) + cs; 
```

如果课程真的让您感到困扰，您可以将其注释掉，但我建议您不要编辑 WP 核心文件。因为它是内联 JS，所以我还没有找到真正改变它的方法（*无需编辑核心，ofc*）。希望会出现一个更优雅的解决方案，但在那之前，我将只使用 jQuery 来删除类并保存我的理智。

请注意，仅当您登录后端时才会添加此类，并且您的用户可以编辑主题。

**编辑 -**

**如果您删除前端的管理栏，则不会添加该类。例如，在我的functions.php中，我有：**

```
// Removing front end admin bar because it's ugly
add_filter('show_admin_bar', '__return_false'); 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-06T14:48:36.583

请注意，您是以管理员身份登录的，本课程不提供给网站访问者。如果您仍想删除它，您可以禁用管理栏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-22T10:20:37.180

此类由`wp-includes/admin-bar.php`（如果用户有权自定义）通过以下操作添加：

```
add_action( 'wp_before_admin_bar_render', 'wp_customize_support_script' ); 
```

此函数添加导致 CSS 类添加到正文的 JavaScript。`body_class()`正如其他答案所述，从您的模板中删除没有任何区别。

仅当管理栏可见时才添加该类，但您可以删除 JS，因此使用以下内容删除 css 类：

```
add_action('admin_bar_menu', function() {
    remove_action('wp_before_admin_bar_render', 'wp_customize_support_script');
}, 50); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-23T18:06:15.673

可能是由于functions.php

它包含要执行的所有运行时函数。

在 functions.php 或类似 page.php 或 single.php 中搜索提到的类

根据我的个人经验，应该有类似的东西

```
<body <?php some_class(); ?>> 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-11-03T17:32:29.310

我知道我在这里有点晚了，但人们可能仍然会遇到这个问题，而且这些解决方案过于复杂。只需进入您的主题并找到 body 标签将其更改为 body class="whatever"

然后在 CSS 中将边距设为 0px。

完毕。您的 CSS 会覆盖另一个。

# html - jQuery Mobile 表单提交导致“未定义”提交页面

> ID：15589784
> 
> 赞同：1
> 
> 时间：2013-03-23T17:23:32.787
> 
> 标签：html, jquery, css, jquery-mobile

我有一个希望使用 jQuery Mobile 提交的表单。但是，当您提交表单时，页面会更改为提交页面并显示“未定义”。页面上没有其他内容。

这是 jquery/ajax：

```
$("#submit_comment").click(function() {

            var formData = $("#comment_form").serialize();

            $.ajax({
                type: "POST",
                url: "forms/comment_form.php",
                cache: false,
                data: formData,
                success: onSuccess,
                error: onError          

            });

            return false;

        }); 
```

这是 HTML 表单：

```
<form id="comment_form" action="forms/comment_form.php" method="POST" style="display:none";>
                    <input type="hidden" name="user_id" value="<?php echo $session_user_id; ?>">
                    <textarea id="text_area_input" name="comment" placeholder="Enter a comment here."></textarea>
                    <input type="submit" id="submit_comment" name="submit_comment" value="Post Comment">

                </form> 
```

这是提交页面：

```
if (empty($_POST['submit_comment']) === false) {
    if (empty($_POST['user_id']) === true) {
        $comment_errors[] = 'Sorry, there was an error submitting your comment. Please try again.';
    }
    if (empty($_POST['comment']) === true) {
        $comment_errors[] = 'You must enter something into the comment field.'; 
    } 
    if (empty($comment_errors) === false) { 
        echo "<div id='comment_errors'><?php echo output_comment_errors($comment_errors);?></div>";
    } else if (empty($comment_errors) === true) {
        $comment = $_POST['comment'];
        $user_id = $_POST['user_id'];       
        echo "ok";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:41:13.407

工作示例：http: [//jsfiddle.net/Gajotres/B8mrX/](http://jsfiddle.net/Gajotres/B8mrX/)

HTML：

```
<form id="comment_form">
        <input type="hidden" name="user_id" value=""/>
        <textarea id="text_area_input" name="comment" placeholder="Enter a comment here."></textarea>
        <input type="submit" id="submit_comment" name="submit_comment" value="Post Comment"/>
 </form> 
```

JS：

```
$('#comment_form').on('submit', function(e){       
    e.preventDefault();

    var formData = $("#comment_form").serialize();

    $.ajax({
        type: "POST",
        url: "forms/comment_form.php",
        cache: false,
        data: formData,
        success: function (result) {
            alert('Success');
        },
        error: function (request,error) {
            alert('Network error has occurred please try again!');
        }        

    });    

    return false;
}); 
```

如您所见，我已删除表单属性方法和操作。

我使用的是表单提交事件，而不是按钮单击事件。**使用e.preventDefault()**阻止提交事件；并**返回 false**并休息在 ajax 上。我在 ajax 调用中添加了成功和错误回调函数，但您可以按照自己的意愿进行操作。

**编辑 ：**

这是一个工作示例，只需将其放入新的 HTMl 中并对其进行测试。我在 jsFiddle 示例中忘记了两件事。首先提交事件需要在正确的 jQuery Mobile 页面事件中（没有它提交事件将不会绑定到表单），我们需要通过向表单标签添加 data-ajax="false" 属性来关闭经典的 jQuery Mobile 表单提交.

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>      
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
    <script>
        $(document).on('pagebeforeshow', '#index', function(){      
            $('#comment_form').on('submit', function(e){

                e.preventDefault();

                var formData = $("#comment_form").serialize();

                $.ajax({
                    type: "POST",
                    url: "forms/comment_form.php",
                    cache: false,
                    data: formData,
                    success: function (result) {
                        alert('Success');
                    },
                    error: function (request,error) {
                        alert('Network error has occurred please try again!');
                    }        

                });    

                return false;
            }); 
        });         
    </script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <form id="comment_form" data-ajax="false">
                    <input type="hidden" name="user_id" value=""/>
                    <textarea id="text_area_input" name="comment" placeholder="Enter a comment here."></textarea>
                    <input type="submit" id="submit_comment" name="submit_comment" value="Post Comment"/>
             </form>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

# html - 在 div 中居中 h2 - 非常基础

> ID：15589785
> 
> 赞同：5
> 
> 时间：2013-03-23T17:23:32.680
> 
> 标签：html, css, text, margin, text-align

我想将 h2 居中在 #top 内，但 vert-aliignt middle 不能使用相同的自动边距......我不知道该怎么做！

```
#top {
    display: block;
    position: relative;
    height: 100px;
    background-color: rgba(89,144,222,.6);
}
#top h2{
    text-shadow: 2px 2px black;
    text-align: center;
    color: white;
    font-family:"Impact";
    font-size: 50px;
} 
```

效果是——![在此处输入图像描述](../Images/4e1380a01798b5b21aa072fcb1d6c3ba.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T17:25:25.003

设置`line-height:100px; vertical-align:middle`在#top。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:33:14.213

您可以将`display:table`and`display:table-cell`与[vertical-aling](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)属性一起使用。

**HTML**

```
<div id="table">
    <div id="top">  
        <h2>Personal webpage</h2>
    </div>
</div> 
```

**CSS**

```
#table{
    width:100%;
    display:table;
}

#top {
    display: table-cell;
    position: relative;
    width:100%;
    height: 100px;
    background-color: rgba(89,144,222,.6);
    vertical-align:middle;
}

#top h2{
    text-shadow: 2px 2px black;
    text-align: center;
    color: white;
    font-family:"Impact";
} 
```

[JSF](http://jsfiddle.net/hzGWk/)中。

# windows-server-2003 - Oracle VM 安装错误

> ID：15589786
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:23:38.353
> 
> 标签：windows-server-2003, virtual-machine, virtualbox

我正在尝试在安装在 Windows 7 上的 Oracle VM 上安装 Windows Server 2003。我已经在 Windows 7 上安装了 64 位的 Oracle VM 和扩展包。我按照创建 Windows 2003 的步骤操作，当尝试启动它时，我收到消息说“找不到可启动媒体，系统已停止”。我找到了一些线程，它说我需要 ISO 映像。我已经从[http://www.microsoft.com/en-us/download/confirmation.aspx?id=21700](http://www.microsoft.com/en-us/download/confirmation.aspx?id=21700)下载了 ISO，但仍然没有运气。你能告诉我从哪里可以得到它，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:52:50.183

您必须先安装 OVM Server（物理服务器），然后在 Linux 机器上安装 OVM Manager，然后使用 OVM Manager 创建 VM。以下是以下文档的链接：

[http://docs.oracle.com/cd/E35328_01/index.html](http://docs.oracle.com/cd/E35328_01/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T15:31:28.587

由于不共享 OVM 版本（认为它是最新版本，即 OVM 3.4.1），因此仅支持 Microsoft Windows Server 2003 R2 SP2。请看下面：

[http://docs.oracle.com/cd/E64076_01/E64077/html/vmrns-guest-os-x86.html](http://docs.oracle.com/cd/E64076_01/E64077/html/vmrns-guest-os-x86.html)

除此之外，“未找到可启动媒体，系统已停止”仅表示未找到引导加载程序。在这种情况下，您可以检查一些东西，例如损坏的 ISO 映像，或者 ISO 映像是否正确附加到来宾 VM 并使其成为主要的可启动设备。

请遵循以下流程： 1\. 检查下载的iso是否完整。通过匹配 md5 sum 再次确认。

2.  将 ISO 放在 http/ftp 位置并将其导入 Oracle VM Manager。

3.  将 ISO 附加到来宾 VM 并使其成为主要的可启动设备。 [http://docs.oracle.com/cd/E64076_01/E64082/html/vmusg-svrpools-vm-create.html](http://docs.oracle.com/cd/E64076_01/E64082/html/vmusg-svrpools-vm-create.html)（步骤 6,7）

4.  启动来宾虚拟机

# c# - 为什么从数据库中检索到的值没有显示在文本框中？

> ID：15589789
> 
> 赞同：0
> 
> 时间：2013-03-23T17:23:53.223
> 
> 标签：c#, .net

为什么我从数据库中检索到的值没有显示在文本框中？我已经编写了以下代码，但它不起作用。我记住，这段代码是在表单加载事件上编写的。请告诉我我做错了什么？

```
using (SqlConnection myConnection = new SqlConnection(Common.GetDBConnectionString()))
{
    using (SqlCommand cmd = new SqlCommand("P.ID from dbo.Tb_Patient", myConnection))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        myConnection.Open();

        //SqlParameter custId = (cmd.Parameters.AddWithValue("@dbo.Tb_Patient", 10));

        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            if (reader.Read())
            {
                string nameValue = reader["P.ID"].ToString();
                MessageBox.Show("value is:",nameValue);

                txtid.Text = nameValue;

            }
            else {

                MessageBox.Show("Data is not retrived");
            }
      }
  }
} 
```

从评论更新：

`CREATE TABLE [dbo].[Tb_Patient]( [P.Id] [int] IDENTITY(1,1) NOT NULL, [P.Name] [nvarchar](50) NOT NULL, [P.Age] [nvarchar](50) NOT NULL, [P.Contact] [nvarchar](50) NOT NULL, [P.Date] [datetime] NULL, [P.Occupation] [nvarchar](50) NOT NULL, [P.Gender] [nvarchar](50) NOT NULL, CONSTRAINT [PK_Tb_Patient] PRIMARY KEY CLUSTERED ( [P.Id] ASC )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] ) ON [PRIMARY]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:26:44.100

此行似乎不是有效的 SQL 查询，也不是存储过程的名称：

```
using (SqlCommand cmd = new SqlCommand("P.ID from dbo.Tb_Patient", myConnection)) 
```

可能正确的文字是：

```
using (SqlCommand cmd = new SqlCommand("select [P.ID] from dbo.Tb_Patient", myConnection)) 
```

当然，它不是存储过程，而是普通的命令文本：

```
cmd.CommandType = CommandType.Text; 
```

**编辑：**看到你的表的架构后，我已经更正了答案。唯一的错误是传递给数据库引擎的命令文本开头缺少 SELECT 子句。但是，您需要将字段名称括在方括号中`P.ID`。

我建议更改字段名称。这种命名模式确实令人困惑，因为当您需要为存在于多个连接在一起的表中的名称添加前缀时使用它。

[请参阅：名称的别名](http://www.w3schools.com/sql/sql_alias.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:43:12.233

*   如果您不确定数据库是否不区分大小写，请始终使用与创建时相同的名称。`CREATE TABLE [dbo].[Tb_Patient]( [P.Id] [int] ...`
*   用 终止命令字符串 `;`。

试试看

```
using (SqlConnection myConnection = new SqlConnection(connectionString))
{
    SqlCommand cmd = new SqlCommand();
    cmd.CommandText = "SELECT [P.Id] from dbo.Tb_Patient;";
    cmd.CommandType = CommandType.Text;
    cmd.Connection  = myConnection;
    myConnection.Open();
    SqlDataReader reader = cmd.ExecuteReader();

    if (reader.Read())
        {
            string nameValue = reader["P.Id"].ToString();
            MessageBox.Show("value is:",nameValue);
            txtid.Text = nameValue;
        }
        else {
            MessageBox.Show("Data is not retrieved");
        }

    reader.Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:28:25.027

使用存储过程或有效的 SQL 语句

```
select P.ID from dbo.Tb_Patient as P 
```

# unsafe - 未经检查或不安全的操作，即使在指定类型之后

> ID：15589791
> 
> 赞同：0
> 
> 时间：2013-03-23T17:23:58.987
> 
> 标签：unsafe, unchecked-exception

我收到以下警告

注意：com.......\BeerSelect.java 使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。

我也指定了类型。我想知道原因而不是使用@SupressWarning 选项。

我也检查了其他线程是 [什么导致 javac 发出“使用未经检查或不安全的操作”警告](https://stackoverflow.com/questions/197986/what-causes-javac-to-issue-the-uses-unchecked-or-unsafe-operations-warning/197993#197993)

下面是一段代码..

```
 package com.example.web;

    import com.example.model.*;
    import javax.servlet.*;
    import javax.servlet.http.*;
    import java.io.*;
    import java.util.*;

    public class BeerSelect extends HttpServlet{
public void doPost(HttpServletRequest request, HttpServletResponse response) throws     IOException, ServletException{
    String c = request.getParameter("color");
    BeerExpert be = new BeerExpert();
    List<String> result = be.getBrands(c);
    ServletContext sc = this.getServletConfig.getServletContext();

    request.setAttribute("styles",result);
    RequestDispatcher view =    getServletConfig.getServletContext().getRequestDispathcer("result.jsp");

    view.forward(request,response); 
} 
```

}

任何形式的帮助表示赞赏..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:26:11.700

尝试使用

```
Iterator<String> 
```

而不是 Iterator 发生这种情况是因为 Iterator 接口是通用的。顺便说一句，这不是一个错误，而只是一个警告。希望这可以帮助

嗨，我稍微修改了你的代码，它应该可以在没有警告的情况下编译：

```
public class BeerSelect extends HttpServlet{
public void doPost(HttpServletRequest request, HttpServletResponse response) throws     IOException, ServletException{
    String c = request.getParameter("color");
    BeerExpert be = new BeerExpert();
    List<String> result = be.getBrands(c);
    ServletContext sc = this.getServletConfig().getServletContext();
    request.setAttribute("styles",result);
    RequestDispatcher view = sc.getRequestDispatcher("result.jsp");

    view.forward(request,response);
} 
```

}

我认为在这里获得此类警告的唯一方法是来自 BeerExpert 类，例如，如果它返回 List 而不是 List 像这样：

```
public class BeerExpert {

public List getBrands(String color) {
    return new ArrayList(); // really dumb implementation, you should have something smarter here
} 
```

}

我建议您检查一下，如果需要更改为：

```
public class BeerExpert {

public List<String> getBrands(String color) {
    return new ArrayList<String>();
} 
```

}

希望这可以帮助

# javascript - 在我所有的执行正确之前调用 gapi.client.load(...) 吗？

> ID：15589794
> 
> 赞同：4
> 
> 时间：2013-03-23T17:24:07.203
> 
> 标签：javascript, google-drive-api

我不确定我是否理解正确，是否需要创建这样的函数：

```
function execute(callback) {
    gapi.client.load('drive', 'v2', function() {
      callback();
    });
} 
```

然后对于我所有的电话都这样称呼它？

```
function retrieveAllFiles() {
    execute(function(){
      var request = gapi.client.drive.files.list();
      request.execute(function(resp) { 
          console.log(resp);
      }
    }
}

function deletefile() {
    execute(function(){ 
    ... 
```

它工作正常，但我不确定这是否是正确的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:28:13.770

是的，这可能是最简单的方法。这当然是一种可以接受的方式。

# asp.net-mvc - MVC 4 / EF 5 中的数据库上下文和异步函数

> ID：15589796
> 
> 赞同：1
> 
> 时间：2013-03-23T17:24:12.497
> 
> 标签：asp.net-mvc, entity-framework, asynchronous, dbcontext, lifetime

我没有为我的目的找到类似的问题/答案。

在我的控制器（MVC 4/EF 5 应用程序）的一些操作中，我有更新数据库的功能，但这些功能不影响用户输出（选择后更新信息的功能）。我想在异步线程中发送这些函数（这将在用户获得渲染页面后完成）。我不想等待线程完成并渲染页面。在这种情况下，数据库上下文呢？我的上下文生命周期是“每个请求”，它在 Application_EndRequest 中删除：

```
protected virtual void Application_EndRequest()
{
    var entityContext = HttpContext.Current.Items["_Context"] as DbContext;
    if (entityContext != null)
        entityContext.Dispose();
} 
```

我在线程中使用自己的上下文（使用块进行正确处理）。

```
using (DbContext db = new DbContext())
{
    ....
} 
```

但是，如果我想在线程中将实体附加到 DbContext，我会在几种情况下收到错误消息“ObjectStateManager 中已存在具有相同键的对象”。这很奇怪，因为我使用带有 AsNoTracking() 选项的加载，并且实体状态在调用新线程之前在主上下文中“分离”。在其他情况下，当我在线程中再次尝试来自数据库的请求实体并对其进行修改（而不是附加）时，我多次出现错误“对象处于分离状态” Context 的两个实例是否使用一个 ObjectStateManager？并且错误的出现取决于主线程上下文处理的时间。我的意思是在处理主上下文之前或之后我在线程中使用上下文......

在这种情况下，如何使用具有自己的上下文的异步线程？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:47:13.850

你在这里有几个问题：

1）如果您使用属于一个上下文的对象或导航属性并尝试在另一个上下文中使用它们，您将得到您所看到的错误。

2）一旦您的请求完成，IIS 就可以自由地回收`AppDomain.`当这种情况在生产中发生时，您的工作线程将因极端偏见而中止。这意味着您根本不能依赖工作线程做任何事情。

如果你想推迟一些昂贵的工作，你应该将工作传递给在另一个进程中实现的某种消息队列——很可能是一个 Windows 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:44:54.233

我找到了答案并且一切正常。 [启动长时间后台任务](https://stackoverflow.com/a/9684261/1647138)。您可以向 Task StartNew() 方法传递一个参数，该参数指示您正在启动的任务是“长时间运行”的，它为任务调度程序提供了在新线程上启动任务的提示。

```
var task = Task.Factory.StartNew(Stuff, TaskCreationOptions.LongRunning); 
```

谢谢，medkg15

# javascript - 如何根据表中的行数动态地将列添加到表布局中？

> ID：15589800
> 
> 赞同：4
> 
> 时间：2013-03-23T17:24:20.383
> 
> 标签：javascript, html, css

我有一个表格，它可能有足够的行来填满屏幕，我希望能够添加另一列而不是占用页面上的垂直空间。在某个点（8 行？）我希望其余的行转移到一个新列中。

我现在拥有的：

![在此处输入图像描述](../Images/b64fef9d9be3767563dc9b315113ca01.png)

我想要的是： ![在此处输入图像描述](../Images/859e6ae5d9c8440202263ca3301c1a9d.png)

这是表格的html示例：

```
<table class="base-table">
    <thead>
        <td></td>
        <td></td>
        <td></td>
        <td>min</td>
        <td>avg</td>
        <td>max</td>
    </thead>
    <tbody>
        <tr>
            <td><input type="checkbox"></td>
            <td><div style="border:1px solid #ccc;padding:1px;background: white;"><div style="width:4px;height:0;border:5px solid rgb(255, 0, 0);overflow:hidden"></div></div></td>
            <td class="disabled"> stuff </td>
            <td class="disabled"> stuff </td>
            <td class="disabled"> stuff </td>
            <td class="disabled"> stuff </td>
            <td><button id="refresh-stats">Refresh</button></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:46:22.957

您需要做的基础是计算您要附加的当前单元格编号，并在每 8 次添加后重置它。这至少应该让你开始；一些附加对您来说可能会更复杂：

```
var row = 1, table = document.querySelector('table');
document.querySelector('input').addEventListener('click', function () {
    if (!table.rows[row % 8]) {
        table.appendChild(document.createElement('tr'));
    }
    table.rows[row++ % 8].appendChild(document.createElement('td'));
}); 
```

[http://jsfiddle.net/ExplosionPIlls/kVmgm/](http://jsfiddle.net/ExplosionPIlls/kVmgm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:55:49.280

当您达到所需的最大行数时，只需创建一个新表。如果您将它们向左浮动，您将获得所需的效果

# c++ - 确定光线是否与三角形碰撞以及到碰撞点的距离，以 3D 形式显示

> ID：15589803
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:24:40.573
> 
> 标签：c++, 3d, raytracing

我正在寻找一种方法来确定光线是否与三角形碰撞以及到 3D 碰撞点的距离。

像下面的代码或类似的方法

```
float GetCollisionsoint(Vector3 RayPosition, Vector3 RayDirection, Vector3 a1, Vector3 a2, Vector3 a3)
    { 
    } 
```

提前致谢！

哦，如果你现在想投票给我，请评论为什么我知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:43:15.847

[在http://www.lighthouse3d.com/tutorials/maths/ray-triangle-intersection/](http://www.lighthouse3d.com/tutorials/maths/ray-triangle-intersection/)上有一篇关于这个主题的很好的文章，以及一些示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:45:27.913

Dan Sunday 介绍了一种[算法](http://geomalgorithms.com/a06-_intersect-2.html)和参考实现。如果三角形的法线 和`u`,`v`向量是预先计算的，则算法会简化为内（点）积。如果预先计算的`u`, `v`,`n`被归一化，还有进一步的优化：即`<u,u> = <v,v> = 1`.

# xml - 使用 XQuery 搜索具有特定详细信息的节点

> ID：15589805
> 
> 赞同：0
> 
> 时间：2013-03-23T17:24:59.567
> 
> 标签：xml, xpath, xml-parsing, xquery

我不是 XQuery 方面的专家，我不得不搜索大量文件，XML 文档有这样的结构，

```
<files>
<file>
    <name>1</name>
    <contents>
        <content>games</content>
        <content>movies</content>
    </contents>
</file>
<file>
    <name>2</name>
    <contents>
        <content>games</content>
        <content>picture</content>
        <content>work</content>
    </contents>
</file> 
```

它就像用户我有一组可能的内容（“游戏”，“电影”），我必须返回名称

到目前为止我只写了这个

```
for $x in /files/file
    return $x/content 
```

我想知道 XQuery 是否可以做到这一点？如果可能的话，给我一些指导，我不知道所有的 xquery 结构，这是我的主要缺点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:36:20.180

您还必须`contents`在 xpath 中提供元素，因为它包含`content`元素值。如果你只想要的值，你可以试试这个`content`

```
for $x in /files/file/contents/content
return xs:string($x) 
```

你也可以试试这个

```
for $x in /files/file/contents/content
return $x/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-13T13:16:06.837

你可以试试这个：

```
let $data:=
<files>
<file>
    <name>1</name>
    <contents>
        <content>games</content>
        <content>movies</content>
    </contents>
</file>
<file>
    <name>2</name>
    <contents>
        <content>games</content>
        <content>picture</content>
        <content>work</content>
    </contents>
</file>
</files>

for $cont in $data//content
return element contents{$cont} 
```

# javascript - 使用 onSubmit 时提交表单

> ID：15589808
> 
> 赞同：1
> 
> 时间：2013-03-23T17:25:09.353
> 
> 标签：javascript, jquery

我的 onSubmit 表格正在调用：

```
onsubmit="validate(this); return false;" 
```

验证（）如下：

```
function validate(obj) {
    $.ajax({
        url : "ajax/validate_check.php",
        type : "POST",
        data : $("#" + obj.id).serialize(),
        success : function(data) {
            $('#' + obj.id + ' :input.form_errors').removeClass('form_errors')
            data = $.parseJSON(data);
            if(data['error_count'] >= 1) {
                $.each(data, function(i, item) {
                    $('#' + i).addClass('form_errors');
                });
            } else {
                $('#' + obj.id).submit();
            }
        }
    });
} 
```

当我有 0 个错误时，它正在尝试提交表单，但我得到了一个无限循环。我意识到它正在发生，因为我的 onSubmit 再次调用了该函数。准备好后如何实际提交表格？解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:28:27.817

您的验证函数应根据错误返回 true 或 false。

```
 onsubmit = "return validate(this)"

  function validate(obj){
     ...
     if(data['error_count'] >= 1) {
            $.each(data, function(i, item) {
                $('#' + i).addClass('form_errors');
            });
            return false; //stop submitting
        } else {
            return true;//continue submitting
        }
  } 
```

虽然，由于您使用的是 jquery：

```
 $("#formid").submit(function(){
           //your validation code
     }); 
```

可能更好。

查看[此页面](http://api.jquery.com/submit/)了解更多详情。有一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:51:49.550

You are already submitting the form for validation.

On `} else {` you can't submit it again, as you noticed. You should call a function to submit it to `whatever_process_the_validated_data.php`

Though I'd suggest having the same `.php` to validate and process data - a class or function to each. That way you can:

```
$('.forms_that_need_validation').submit(function() {
$.ajax({
    url : "ajax/data_validation_and_processing.php",
    type : "POST",
    data : $(this).serialize(),
    success : function(data) {
        $(this + ' :input.form_errors').removeClass('form_errors')
        data = $.parseJSON(data);
        if(data['error_count'] >= 1) {
            $.each(data, function(i, item) {
                $('#' + i).addClass('form_errors');
            });
        } else {
            location.reload();
        }
    }
});
return false;
}); 
```

What happens is, if the data fails to be validated, it returns an error - you should code you `.php` in order not to process the data if it's not validated. Otherwise, the data was validated and processed already, then it just reloads the page.

# xaml - 如何在 ConverterParameter 中使用实际屏幕高度？

> ID：15589811
> 
> 赞同：0
> 
> 时间：2013-03-23T17:25:42.283
> 
> 标签：xaml, winrt-xaml

```
 <Image Source="{Binding Image}" HorizontalAlignment="Center" 
      VerticalAlignment="Center" 
      Height = "<Get current Height - some layout pixels>"
      Width="{Binding Size, Converter={StaticResource WidthConverter}, 
      ConverterParameter=<Get current Height - some layout pixels>" /> 
```

我想在加载图像之前计算图像的高度和宽度。如何将当前屏幕高度传递给`ConverterParameter`？

更新：可以使用`Window.Current.Bounds.Height`in`IValueConverter`所以现在不需要将它作为参数传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:59:21.180

ConverterParameter 不是 silverlight 中的依赖属性。

首先检查它是否是 WinRT 的依赖属性。如果它不是依赖属性，则不能使用绑定。

正如我所看到的，您正在尝试拉伸某些东西。也许您所在区域存在“ViewBox”类，如果您在 ViewBox 中放置一个控件，它会自动拉伸。

# python - 为什么我的 %s 格式说明符没有出现在这个片段中？

> ID：15589812
> 
> 赞同：0
> 
> 时间：2013-03-23T17:25:49.433
> 
> 标签：python, format-specifiers

```
mconfigQuantity = int(raw_input('Enter the number of (m)achine-configurations that you will need: '))
numberOfmconfig = 1

for mconfigs in range(1,mconfigQuantity+1):
    # %s conditional for mcidentifier
    STRINGnumberOfmconfig = str(numberOfmconfig)
    if STRINGnumberOfmconfig[-1] == '1':
        suffix = 'st'
    elif STRINGnumberOfmconfig[-1] == '2':
        suffix = 'nd'
    elif STRINGnumberOfmconfig[-1] == '3':
        suffix = 'rd'
    else: suffix = 'th'
    finalConfigName = STRINGnumberOfmconfig + suffix
    mcidentifier = raw_input('Enter the letter of your %s (m)achine-configuration: ') % (finalConfigName)
    numberOfmconfig = numberOfmconfig + 1

print mconfig() 
```

我已经多次编写并重写了此代码段，但对于我为什么要打印“%s”而不是用我为它指定的数据替换它是没有意义的。我找不到任何表明它为什么不起作用的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T17:28:23.147

它应该是

```
mcidentifier = raw_input(
    'Enter the letter of your %s (m)achine-configuration: ' % finalConfigName) 
```

您关闭了运算符之前的括号，`%`以便将其应用于结果字符串，即 . 返回的字符串`raw_input`。

另请注意，在新代码中，建议使用新的字符串格式化语法：

```
mcidentifier = raw_input(
 'Enter the letter of your {} (m)achine-configuration: '.format(finalConfigName)) 
```

# java - 如何构建超图

> ID：15589814
> 
> 赞同：2
> 
> 时间：2013-03-23T17:25:51.423
> 
> 标签：java, graph, jung

我正在开发一种使用超图的图像检索方法

在谷歌上快速搜索后，我找到了处理超图的 Jung Library，但它最关注可视化，

所以任何人都知道如何开始，任何构造超图的教程或算法

谢谢

# search - 狮身人面像搜索和主管

> ID：15589818
> 
> 赞同：2
> 
> 时间：2013-03-23T17:26:09.927
> 
> 标签：search, sphinx, supervisord

我正在使用 supervisord 来控制我的流程。Supervisord 要求它运行的程序[不进行守护进程](http://supervisord.org/subprocess.html#nondaemonizing-of-subprocesses)。

我通过这样的节来解决这个问题：

```
[program:sphinx_search]
command=searchd -c /usr/local/etc/sphinx.conf --nodetach
...
... 
```

但 sphinx 搜索文档指出 nodetach 选项应仅用于调试：

> `--nodetach`开关（仅限 Linux）
> 告诉 searchd 不要分离到后台。这也将导致日志条目被打印到控制台。查询处理照常进行。这是一个调试选项。

想知道其他人是如何解决这个问题的。

# c# - 无法解析程序集或 Windows 元数据文件“System.Data.dll”

> ID：15589820
> 
> 赞同：5
> 
> 时间：2013-03-23T17:26:17.123
> 
> 标签：c#, mongodb, windows-8, microsoft-metro

我刚刚在 c#/XML 中创建了一个新的 windows 8 应用程序并下载 了[mongodb c# 驱动程序](http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-csharp-driver/)并将其引用添加到我的项目中并遵循[教程](http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-csharp-driver/)的其余部分，但是当我现在尝试运行我的应用程序时它说

```
Cannot resolve Assembly or Windows Metadata file 'System.Data.dll'

Type universe cannot resolve assembly: System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089. 
```

请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:35:00.683

Metro 应用程序似乎`system.data`无法使用。普遍的共识似乎是您必须创建一个中间“中间人”层（使用 WCF 等技术）以允许您的 Metro 应用程序与数据库进行通信。

参考：

*   [使用 C# Metro App 从 SQL 检索数据](https://stackoverflow.com/questions/11947078/retrieving-data-from-sql-using-c-sharp-metro-app)
*   [使 System.Data 可用于 Metro 风格的应用程序](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2759791-make-system-data-available-to-metro-style-apps)
*   [WinRT System.Data - 连接到 SQL](https://stackoverflow.com/questions/10193999/winrt-system-data-connect-to-sql)

尽管这些链接的标题中有 SQL，但它们确实解决了将 Metro 应用程序直接连接到任何数据库的问题。

以下是上述链接之一的答案：

> 你是对的，System.Data 不存在（当我第一次开始使用 WinRT 时，我也在寻找同样的东西）。您也将无法引用它。如果您想与 SQL 数据库通信，您将需要使用某种其他协议（WebService、SOAP、WCF 等）。

* * *

评论中的后续问题：

> 我正在尝试连接 mongodb ，而不是 sql 。是否有必要为此目的拥有 system.data ？

当我尝试这个时，我可以`MongoDB.Bson.dll`自己引用并构建项目，但是一旦我引用`MongoDB.Driver.dll`了我得到的信息和你一样。

似乎 sql 驱动程序和 mongodb 驱动程序都需要`System.Data.dll`，您可以在标准的 winforms/wpf 应用程序中直接引用它（但可能不应该），但您不能在 Metro 应用程序中直接引用它。

我想说，`System.Data`如果你想使用 MongoDB，就必须有权访问。因此，您必须创建一个单独的项目，该项目引用 MongoDB 驱动程序并实际执行与数据库的连接，并通过 WCF 调用或 Web 服务使您的 Metro 应用程序可以访问该项目。您只需要在 Metro 应用程序和数据库之间放置一些东西，因为您无法直接连接到它。

我知道这似乎让事情变得更加复杂，特别是如果你只是想玩玩，但这显然是微软就他们的 Metro 应用程序做出的设计决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:33:05.557

看看这些帖子，它提到 DLL 尚不可用：[Using NHibernate in a Metro](https://stackoverflow.com/questions/12926502/using-nhibernate-in-a-metro) & [http://social.msdn.microsoft.com/Forums/en-US/DataMarket/thread/385475ce-edf9-416f -b0f7-1369760aa73b/](http://social.msdn.microsoft.com/Forums/en-US/DataMarket/thread/385475ce-edf9-416f-b0f7-1369760aa73b/)

# c# - Visual Studio 2012 中的 DllImport 方法引发错误

> ID：15589826
> 
> 赞同：1
> 
> 时间：2013-03-23T17:27:03.090
> 
> 标签：c#, visual-studio, dll, dllimport

我试图将 DLL 导入到我的项目中，但它一直将代码视为存在语法错误。这没有任何意义，因为我使用的是[DLLImport](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute%28v=vs.71%29.aspx)网站上的示例代码。我只是想看看它是否会起作用，但它不起作用。这是代码：

```
[DllImportAttribute("KERNEL32.DLL", EntryPoint="MoveFileW",SetLastError=true,CharSet=CharSet.Unicode, ExactSpelling=true,
        CallingConvention=CallingConvention.StdCall)]
public static extern bool MoveFile(String src, String dst); 
```

有人可以向我解释发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:30:58.963

也许您可以在此处发布完整的源代码和错误消息？

该测试程序编译并运行良好：

```
using System;
using  System.Runtime.InteropServices;

class App
{

[DllImportAttribute("KERNEL32.DLL", EntryPoint="MoveFileW",SetLastError=true,CharSet=CharSet.Unicode, ExactSpelling=true,
        CallingConvention=CallingConvention.StdCall)]
public static extern bool MoveFile(String src, String dst);

static void Main()
 {
   MoveFile("import.cs","D:\\aa.cs");
 }
} 
```

# actionscript-3 - 如何查找鼠标是否悬停在特定帧的按钮上

> ID：15589832
> 
> 赞同：0
> 
> 时间：2013-03-23T17:27:48.193
> 
> 标签：actionscript-3, flash

如何在不附加类似这样的事件侦听器的情况下查找鼠标是否悬停在特定帧的按钮上（第 5 帧中的代码）：

```
on(button1.MOUSEOVER){
  //do some staff
} 
```

或类似的东西（第 5 帧中的代码）：

```
button1.MouseEvent.MOUSE_OVER = function() {
    //do some staff
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:20:18.587

**好的！我找到了答案**（第 5 帧中的代码）：

```
trace(button1.hitTestPoint(mouseX, mouseY, false)); 
```

超过 button1 返回 true 否则返回 false

```
if (button1.hitTestPoint(mouseX, mouseY, false)) {
   //do some staff
} 
```

# javascript - JavaScript 基于原型而不是面向对象的优点是什么

> ID：15589833
> 
> 赞同：4
> 
> 时间：2013-03-23T17:27:51.460
> 
> 标签：javascript

我做了几年的 JavaScript 开发人员，我不时听说 JavaScript 非常棒，因为它是基于原型的。但是，在编写大型 JavaScript 应用程序时，我经常发现自己在模拟面向对象的行为。

一个问题可能是，正如 Douglas Crockford 所说，“JavaScript 本身与其原型性质存在冲突”（[http://javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)）。JavaScript 是我使用过的唯一一种基于原型的语言。

我也知道存在在下一个 EcmaScript 版本（[http://wiki.ecmascript.org/doku.php?id=harmony:classes](http://wiki.ecmascript.org/doku.php?id=harmony:classes)）中添加类的提议。

不要误会我的意思，我喜欢 JavaScript。我只是想了解基于原型的 OOP 有哪些优势（如果有的话）。

# mysql - 只需将mysql数据库中的5位数字转换为日期

> ID：15589834
> 
> 赞同：2
> 
> 时间：2013-03-23T17:28:09.527
> 
> 标签：mysql, excel, date, format

我一直在网上寻找这个答案，但不理解所写的所有内容。我尝试从 unix_timestamp() 执行，但它返回错误的日期。我所做的是将一个 xls 文件导入数据库。它将日期转换为 5 位数字。有简单的方法吗？任何帮助都会很棒。这是我尝试过的。我尝试将 excel 文件中的日期格式更改为 YYYY-MM-DD，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:54:53.593

要使用 Excel 值，请尝试以下操作：

```
select date('1899-12-30') + interval <number> days 
```

例如：

```
select date('1899-12-30') + interval 40000 days 
```

返回 2009 年 7 月 6 日，就像在 Excel 中一样。

换句话说，您可以将值作为整数带入，然后在 SQL 中进行转换。

我实际上有点惊讶，因为 Excel 上的 0 日期本质上是 1900 年 1 月 0 日，即 1899 年 12 月 31 日。我怀疑 1900 年缺少闰年存在问题。Excel 的值为“60”表示为 1900 年 2 月 29 日。这很有趣，我没有意识到 Excel 有这个错误。

因此，上面的代码适用于所有大于 61 的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-25T06:42:17.547

尝试这个

```
 $date_format = floor($excelDateTime);
        $time_format = $excelDateTime - $date_format;
        $mysql_strdate = ($date_format > 0) ? ( $date_format - 25569 ) * 86400 + $time_format * 86400 :    $time_format * 86400;
        $mysql_date_format = date("Y-d-m", $mysql_strdate); 
```

# c++ - 不知道出了什么问题——两次程序段错误

> ID：15589841
> 
> 赞同：0
> 
> 时间：2013-03-23T17:28:37.823
> 
> 标签：c++, class, pointers, vector, segmentation-fault

我正在使用 SDL 创建一个非常简单的 Pong 游戏。对于碰撞检测，我有一个名为 DetectCollision 的类，如下所示：

```
class DetectCollision {
    public:
        std::vector<Object*> objects;
        int numOfObjects;

        DetectCollision();
        ~DetectCollision();

        void takeObjs(Object &);
        void handleCollision();
}; 
```

所以发生的事情是 takeObjs(Object &) 函数获取 Object 类的一个对象并将其存储在一个向量中。takeObjs(Object &) 看起来像这样：

```
void DetectCollision::takeObjs(Object &obj1){
    objects.push_back(&obj1);
} 
```

到目前为止一切正常。我可以访问向量“对象”来检测所有的碰撞，它工作正常，但是当我试图删除向量时问题就来了。如果我没记错的话，它是一个指针向量。所以我删除它是在类析构函数中：

```
DetectCollision::~DetectCollision(){
    for (unsigned int i = 0; i < objects.size(); ++i){
        delete objects[i];
    }
    objects.clear();
} 
```

根据使用 GCC 编译器的 Code::Blocks IDE，它在“delete objects[i];”上出现了段错误。线。它还会在程序的另一部分出现段错误，以尝试 SDL_FreeSurface() 类持有的皮肤，但我认为我可以很容易地修复这个问题。这个向量是主要问题。如果您需要查看完整的源代码以帮助我了解如何解决问题，我可以提供。我非常感谢任何帮助。感谢和 DFTBA！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:31:22.997

一个潜在的问题是`DetectCollision`违反了[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。如果复制了一个实例，则该副本将获得相同`Object`指针的向量，最终导致 double `delete`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:32:49.587

您的应用程序出现段错误，因为调用析构函数时对象不再存在。

该`takeObjs`方法接收对对象的引用，然后将指向该对象的指针存储在向量中。该对象在其他地方定义。当该对象超出范围时，它会自动销毁。

当您到达析构函数时，该对象已被销毁。该应用程序出现段错误，因为您试图再次销毁它。

您应该阅读 C++ 中对象的范围（[阅读此问题的答案](https://stackoverflow.com/q/10080935/80003)），还应该阅读[C++ 中的对象破坏](https://stackoverflow.com/q/6403055/80003)。

编辑：添加简短示例来说明崩溃

```
#include <iostream>
#include <vector>
using namespace std;

class Object {
public:
    int a;
    int b;

    Object(int a, int b)
    {
        this->a=a;
        this->b=b;
    }
};

class Test
{
    std::vector<Object*> objects;
public:
    Test(){}

    void Add(Object &obj)
    {
        objects.push_back(&obj);
    }

    void Print()
    {
        for(unsigned int i=0;i<objects.size();i++)
        {
            cout<<objects[i]->a<<" "<<objects[i]->b<<endl;
        }
    }

    ~Test()
    {
        for (unsigned int i = 0; i < objects.size(); ++i){
            delete objects[i];
        }
        objects.clear();
    }
};

void AddNewObjects(Test &t)
{
    Object x(1,2);
    Object y(3,4);
    t.Add(x);
    t.Add(y);
    // you can access your objects here
    t.Print();
}

int _tmain(int argc, _TCHAR* argv[])
{
    Test t;
    AddNewObjects(t);
    // but if you try to access the objects here, you get a crash
    // because the objects were destroyed when exiting "AddNewObjects"
    t.Print();
    return 0;
    // your destructor tries to access the objects here (in order to destroy them)
    // and that's why it crashes
} 
```

这是您可以用来解决问题的一种解决方案：

```
#include <iostream>
#include <vector>
using namespace std;

class Object {
public:
    int a;
    int b;

    Object(int a, int b)
    {
        this->a=a;
        this->b=b;
    }
};

class Test
{
    std::vector<Object*> objects;
public:
    Test(){}

    void Add(Object *pObj)
    {
        objects.push_back(pObj);
    }

    void Print()
    {
        for(unsigned int i=0;i<objects.size();i++)
        {
            cout<<objects[i]->a<<" "<<objects[i]->b<<endl;
        }
    }

    ~Test()
    {
        for (unsigned int i = 0; i < objects.size(); ++i){
            delete objects[i];
        }
        objects.clear();
    }
};

void AddNewObjects(Test &t)
{
    Object* x = new Object(1,2);
    Object* y = new Object(3,4);
    t.Add(x);
    t.Add(y);
    // you can access your objects here
    t.Print();
}

int _tmain(int argc, _TCHAR* argv[])
{
    Test t;
    AddNewObjects(t);
    // you can also access the objects here
    // because they are not destroyed anymore when exiting "AddNewObjects"
    t.Print();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:33:01.570

您可能有双重删除，因为传递给您的 DetectCollision 类的对象在其他地方被删除，可能是因为它们超出了范围。

您必须考虑谁将“拥有”这些对象。只有所有者才能删除它们。

# c++ - 右值引用可以绑定到函数吗？

> ID：15589842
> 
> 赞同：12
> 
> 时间：2013-03-23T17:28:38.197
> 
> 标签：c++, function, c++11, language-lawyer, rvalue-reference

我用 GCC、Clang、ICC 和 VS 测试了以下代码：

```
void f() {}

void g(void (&&)()) { }

int main() {
    g(f);
} 
```

正如我们所看到的，`g`它接受一个右值引用，但`f`它是一个左值，通常，右值引用不能绑定到左值。这正是**ICC所抱怨**的：

```
error: an rvalue reference cannot be bound to an lvalue 
```

**VS 也给出了一个错误**，但出于另一个原因：

```
error C2664: 'void h(void (__cdecl &&)(void))' : cannot convert parameter 1 from 'void (__cdecl *)(void)' to 'void (__cdecl &&)(void)' 
```

这表明 VS 会立即执行函数到指针的转换，而不是直接将引用绑定到`f`. 值得一提的是，如果我替换`g(f)`为`g(&f)`then 四个编译器会产生同样的错误。

最后，**GCC 和 Clang 接受了代码**，我相信它们是正确的。我的推理基于 8.5.3/5

> 对“cv1 T1”类型的引用由“cv2 T2”类型的表达式初始化为
> 
> — 如果引用是左值引用 [...]
> 
> — 否则，[...]**引用应为右值引用**。
> 
>      — 如果**初始化表达式是**[...]**函数左值**[...]
> 
>      然后**引用绑定到初始化表达式的值**[...]

我的解释是否正确（即 Clang 和 GCC 因给定原因而合规）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T17:49:11.727

> Is my interpretation correct [...]?

**Yes.**

Your interpretation is correct because of the Paragraph of the Standard that you quoted. A further confirmation comes from Paragraph 13.3.3.1.4/3 on reference binding:

> Except for an implicit object parameter, for which see 13.3.1, a standard conversion sequence cannot be formed if it requires binding an lvalue reference other than a reference to a non-volatile const type to an rvalue **or binding an rvalue reference to an lvalue *other than* a function lvalue**. [...]

Paragraph 13.3.3.2/3 contains a further (indirect) confirmation:

> [...] Standard conversion sequence S1 is a better conversion sequence than standard conversion sequence S2 if
> 
> — [...]
> 
> — S1 and S2 are reference bindings (8.5.3) and S1 binds an lvalue reference to a function lvalue **and S2 binds an rvalue reference to a function lvalue**. [ *Example*:
> 
> ```
> int f(void(&)()); // #1
> int f(void(&&)()); // #2
> void g();
> int i1 = f(g); // calls #1 
> ```
> 
> —<em>end example ]

# android - android : 媒体播放器 - 在状态 8 中调用暂停

> ID：15589845
> 
> 赞同：4
> 
> 时间：2013-03-23T17:29:05.150
> 
> 标签：android

我在我的应用程序中使用媒体播放器播放一些简短的声音。虽然我在我的应用程序中没有发现任何问题/崩溃，但我可以看到以下一些错误消息。请帮我解决这个问题。

```
03-23 22:53:16.229: E/MediaPlayer(19185): pause called in state 8
03-23 22:53:16.229: E/MediaPlayer(19185): error (-38, 0) 
03-23 22:53:16.449: E/MediaPlayer(19185): Error (-38,0)
03-23 22:53:16.449: D/OpenGLRenderer(19185): Flushing caches (mode 0) 
03-23 22:53:16.459: D/OpenGLRenderer(19185): Flushing caches (mode 0)
03-23 22:53:17.759: D/OpenGLRenderer(19185): Flushing caches (mode 0) 
03-23 22:53:17.809: W/MediaPlayer-JNI(19185): MediaPlayer finalized without being released
03-23 22:53:17.809: W/MediaPlayer-JNI(19185): MediaPlayer finalized without being released
03-23 22:53:17.809: W/MediaPlayer-JNI(19185): MediaPlayer finalized without being released 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-14T10:20:05.777

您可以使用简单的 if-check 来处理暂停。尝试这个：

```
MediaPlayer mp = MediaPlayer.create(this, Uri.parse(Environment.getExternalStorageDirectory().getPath()+ "/Music/jaihind.mp3"));
if(mp.isPlaying()) {
    mp.pause();
} else {
    mp.start();
} 
```

**笔记：**

```
mp = MediaPlayer.create(...); 
```

已经在准备返回的 MediaPlayer，因此您不能`prepare`再次调用（或其变体）（也不需要 onPreparedListener）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:58:45.043

我认为你必须使用这个

```
 public class Sound extends Activity{

MediaPlayer mp;

    @Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    mp.release();
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T02:16:39.100

`mp.release();` does the trick. [ instead of `mp.pause();` ]

# java - 带有 sqlite db 的 Android 小部件更新异常

> ID：15589847
> 
> 赞同：0
> 
> 时间：2013-03-23T17:29:16.753
> 
> 标签：java, android, sqlite, widget

所以我正在制作一个从 sqlite 数据库中提取信息的排序计时器小部件。当数据库中只有 1 个条目时看起来按预期工作，但当有超过 1 个条目时，小部件似乎在值之间闪烁。例如 1 秒，您将看到第一个值，然后下一个 2 秒将是下一个值等。这是代码，请注意查看提醒值的命令 fetchDecks(5)，如果它超过当前时间，则不会显示。因此，一旦条目 1 时间到了，它应该移动到条目 2。

```
public class MyWidgetProvider extends AppWidgetProvider {
    private DBadapter mDbHelper;
    Cursor note;
    private long reminder;
    private String title, summary;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {  
        mDbHelper = new DBadapter(context);
        mDbHelper.open();
        note = mDbHelper.fetchDecks(5);
        note.moveToFirst();
        reminder = note.getLong(
                note.getColumnIndexOrThrow(mDbHelper.KEY_REMINDER));
        title = note.getString(
                note.getColumnIndexOrThrow(mDbHelper.KEY_TITLE));
        summary = note.getString(
                note.getColumnIndexOrThrow(mDbHelper.KEY_SUMMARY));  
        Timer timer = new Timer();
        timer.scheduleAtFixedRate(new MyTime(context, appWidgetManager), 1, 1000);
    }

    private class MyTime extends TimerTask {
        RemoteViews remoteViews;
        AppWidgetManager appWidgetManager;
        ComponentName thisWidget;

    public MyTime(Context context, AppWidgetManager appWidgetManager) {
        this.appWidgetManager = appWidgetManager;
        remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        thisWidget = new ComponentName(context, MyWidgetProvider.class);
    }

    @Override
    public void run() {
        long current = System.currentTimeMillis(); 
        long diff = reminder - current;
        remoteViews.setTextViewText(R.id.TextView01, countDown(diff));
        remoteViews.setTextViewText(R.id.update, title);
        appWidgetManager.updateAppWidget(thisWidget, remoteViews);          
    }

    private String countDown(long result) {
        String mMinutes,mSeconds,mHours, mDays;
        int seconds = (int) (result / 1000) % 60 ;
        if (seconds == 0) {
            mSeconds = "0" + Integer.toString(seconds);
        } 
        else if (seconds <= 9) {
            mSeconds = "0" + Integer.toString(seconds);
        } else {
            mSeconds = Integer.toString(seconds);
        }

        int minutes = (int) ((result / (1000*60)) % 60);
        if (minutes == 0) {
            mMinutes = "0" + Integer.toString(minutes);
        } 
        else if (minutes <= 9) {
            mMinutes = "0" + Integer.toString(minutes);
        } else {
            mMinutes = Integer.toString(minutes);
        }

        int hours   = (int) ((result / (1000*60*60)) % 24);
        if (hours == 0) {
            mHours = "0" + Integer.toString(hours);
        } 
        else if (hours <= 9) {
            mHours = "0" + Integer.toString(hours);
        } else {
            mHours = Integer.toString(hours);
        }

        int days = (int) (result / (1000*60*60*24));
        if (days == 0) {
            mDays = "0" + Integer.toString(days);
        } 
        else if (days <= 9) {
            mDays = "0" + Integer.toString(days);
        } else {
            mDays = Integer.toString(days);
        }
        String tRemaining = mDays + " days | " + mHours + " hours | " + mMinutes + " mins | " + mSeconds + " secs";     
        return tRemaining;
    }

    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:13:32.423

弄清楚了。是导致它的 xml 文件中的问题。

# ios - TableView 没有在删除时选择新行

> ID：15589852
> 
> 赞同：0
> 
> 时间：2013-03-23T17:29:41.240
> 
> 标签：ios, uitableview

当我删除 tableView 中的一行时，我希望选择它上面的行。这不会发生...

这是代码：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        if (indexPath.section == 0) {
            Formula *toDelete = (Formula *)[self.userFRMList objectAtIndex:indexPath.row];
            NSManagedObjectContext *context = (NSManagedObjectContext *)[(PSAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
            NSError *error = nil;
            [context deleteObject:toDelete];
            [context save:&error];
            [self updateDataSource];
            [tableView beginUpdates];
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            if ([self.userFRMList count] != 0) {

                if (indexPath.row == 0) {
                    [self.tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:0  inSection:0] animated:YES scrollPosition:UITableViewScrollPositionNone];
                    self.crtFormula = [self.userFRMList objectAtIndex:0];
                    [self.delegate theFormulaIs:self.crtFormula];

                } else {
                    [self.tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:indexPath.row - 1  inSection:indexPath.section] animated:YES scrollPosition:UITableViewScrollPositionNone];
                    self.crtFormula = [self.userFRMList objectAtIndex:indexPath.row - 1];
                    [self.delegate theFormulaIs:self.crtFormula];

                }
            }else {
                self.crtFormula = nil;
                [self.delegate showBlank];
            }
            [tableView endUpdates];
        }

    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:32:46.097

至少，选择部分需要在更新块*之外！*把它放在你的`endUpdates`电话之后。

如果这不起作用，请更进一步：尝试使用延迟性能（例如`dispatch_after`）进行选择部分。现在，您正在尝试执行选择，而我们仍在响应中`commitEditingStyle`- 我们甚至还没有删除该行。延迟性能让接口在删除后稳定下来。

您将需要使用与删除*后情况相对应的索引编号。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:13:15.190

```
// For example I have set deletedRowIndex to 10, and next Line will select Row Number 9 in tableview
int deletedRowIndex = 10;
[tblViewList selectRowAtIndexPath:[NSIndexPath indexPathWithIndex:deletedRowIndex-1] animated:YES scrollPosition:UITableViewScrollPositionMiddle]; 
```

# android - 将内容加载到 WebView

> ID：15589855
> 
> 赞同：0
> 
> 时间：2013-03-23T17:29:45.287
> 
> 标签：android, android-webview

我想[将此内容](http://href.hu/x/jk1i)加载到 WebView：

当我这样尝试时：

```
myWebView.loadUrl(myUrlAdress); 
```

它正在加载内容，但所有的 html 格式都是可见的，所以我可以看到所有的段落标签和 css 样式定义，所以它就像一个纯文本。

当我这样尝试时：

```
myWebView.loadDataWithBaseURL(myUrlAdress, null, "text/html", "UTF-8", null); 
```

根本没有任何反应，webview 保持空白，没有任何数据。

我尝试的最后一种方法是：

```
myWebView.loadDataWithBaseURL(myUrlAdress, myUrlAdress, "text/html", "UTF-8", null); 
```

这一次，webview 只是打印我尝试获取数据的链接，仅此而已。

有人能告诉我要走哪条路，有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:38:29.720

问题是服务器返回内容类型 text/json，所以带有 loadUrl 的 WebView 不知道它应该解析和显示 HTML。当您使用 loadDataWithBaseUrl 时，数据字符串必须是实际的 HTML，而不仅仅是您提供的 URL。如果您无法控制服务器输出，则需要将数据下载到字符串并将该字符串作为数据加载到 webview，就像这样作为活动的内部类：

```
public class WebLoader extends AsyncTask<String, String, String> {

    @Override
    protected String doInBackground(String... params) {
        try {
            final HttpClient client = new DefaultHttpClient();
            final HttpGet request = new HttpGet(params[0]);
            BasicResponseHandler handler = new BasicResponseHandler();
            return client.execute(request, handler);
        }
        catch (Exception e) {
            // do something
            return null;
        }
    }

    @Override
    protected void onPostExecute(String html) {
        webview.loadDataWithBaseURL(url, html, "text/html", "UTF-8", null);
    }

} 
```

# css - 如何在 8.5x11 纸的中心打印 div 内容？

> ID：15589860
> 
> 赞同：6
> 
> 时间：2013-03-23T17:30:14.523
> 
> 标签：css, html, printing

我将信息回显到一个 div 中，并且我有一个 jQuery 打印元素来打印该 div。但纸张总是偏离中心打印。如何设法设计要在页面中心打印的 div？是否有确切的高度/宽度可以遵循？

这是我的 div css 类

```
.contract {
   align: 0 auto;
   text-align: center;  
   width: 800px;
   background-color: #fff;
   clear: both;
   display: block;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:55:09.993

使用这个 CSS

```
@media print {
    #printDiv{
         position:absolute;
         width:300px;
         height:300px;
         z-index:15;
         top:50%;
         left:50%;
         margin:-150px 0 0 -150px;
    }
} 
```

Margin 的值应该是宽度和高度值的 50%

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T08:40:12.437

没有CSS`align`属性。尝试`margin:0 auto;`，但是如果没有看到您的文档的其余部分，这是完全不可能的。

# mysql - 唯一键不起作用

> ID：15589861
> 
> 赞同：0
> 
> 时间：2013-03-23T17:30:27.993
> 
> 标签：mysql, sql, unique

我有一个表 cars，其中填充了表 cars1 和 cars2 的连接数据。架构如下所示：

```
 CREATE TABLE `cars` (
   `id` int(10) NOT NULL AUTO_INCREMENT,
   `uniqueid` varchar(10) NOT NULL,
   `name` varchar(20) NOT NULL
   UNIQUE KEY `uniqueid` (`uniqueid`)
 ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1 
```

但是，我的表中的 uniqueid 字段有重复的条目：

```
 ID     UNIQUEID     NAME
 1      1            Mercedes
 2      2            Audi
 3      2            Chevrolet 
```

使用简单的 INSERT IGNORE INTO SELECT FROM 语句将数据从 cars1 和 cars2 填充到该表中。

这怎么可能？会不会是表的索引损坏了？我通过执行以下操作遇到了重复的行：

```
 SELECT uniqueid, COUNT(uniqueid) FROM cars GROUP BY uniqueid HAVING(COUNT(uniqueid)>1); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:17:09.520

`uniqueid`字段的类型是`VARCHAR(10)`，这意味着它可以包含`'1'`,`'1 '`或`'1 '`，所有这些值看起来都一样，但它们并不相同。

将字段设为`uniqueid`INT；问题就会消失。

# git - 如何在 master 中找到所有未合并的提交，这些提交按创建它们的分支分组？

> ID：15589862
> 
> 赞同：18
> 
> 时间：2013-03-23T17:30:28.383
> 
> 标签：git, branch, commit, branching-and-merging

我必须从未合并的分支创建一些代码审查。

在寻找解决方案时，我们不要去解决本地分支上下文问题，因为这将在服务器上运行；将只有**origin**远程，我总是在其他命令之前运行**git fetch origin**命令，当我们谈论分支时，我们将参考**origin/branch-name**。

如果设置很简单，并且源自 master 的每个分支都以自己的方式继续，我们可以运行：

```
git rev-list origin/branch-name --not origin/master --no-merges 
```

对于每个未合并的分支，并将生成的提交添加到每个分支的每个审查中。

当 2-3 个分支之间存在合并并且其中一些分支继续工作时，就会出现问题。正如我所说，对于每个分支，我想以编程方式创建代码审查，并且我不想在多个审查中包含提交。

主要是在为每个提交找到原始分支时问题减少了。
或者更简单地说……找到所有未合并的提交，这些提交按*最可能*创建它们的分支分组。

让我们关注一个简​​单的例子：

```
 *    b4 - branch2's head
   *  |    a4 - branch1's head
   |  *    b3
   *  |    merge branch2 into branch1
*  |\ |    m3 - master's head
|  * \|    a3
|  |  |
|  |  *    b2
|  *  |    merge master into branch1
* /|  |    m2
|/ |  *    merge branch1 into branch2
|  * /|    a2
|  |/ |
|  |  *    b1
|  | /
|  |/
| /|
|/ |
|  *       a1
* /        m1
|/
|
*          start 
```

我想要得到的是：

*   分支 1：a1、a2、a3、a4
*   分支 2：b1、b2、b3、b4

到目前为止，我发现的最佳解决方案是运行：

```
git show-branch --topo-order --topics origin/master origin/branch1 origin/branch2 
```

并解析结果：

```
* [master] m3
 ! [branch1] a4
  ! [branch2] b4
---
  + [branch2] b4
  + [branch2^] b3
 +  [branch1] a4
 ++ [branch2~2] b2
 -- [branch2~3] Merge branch 'branch1' into branch2
 ++ [branch2~4] b1
 +  [branch1~2] a3
 +  [branch1~4] a2
 ++ [branch1~5] a1
*++ [branch2~5] m1 
```

输出解释是这样的：

1.  前*n*行是分析的*n 个*分支
2.  一行与----
3.  如果该提交在第 n 个分支上，则每个提交在第 n 个缩进字符上带有一个加号（或在合并提交的情况下为减号）。
4.  最后一行是分析的所有分支的合并基础

对于第 3 点，提交名称解析以分支名称开头，据我所见，此分支对应于在其上创建提交的分支，可能是通过促进第一父级到达的路径。

由于我对合并提交不感兴趣，因此我将忽略它们。

然后我将解析每个分支路径提交以使用 rev-parse 获取它们的哈希。

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T15:36:02.963

可以克隆存储库，`--mirror`从而创建一个裸存储库，该存储库可以用作原始存储库的镜像，并且可以进行更新，`git remote update --prune`之后应删除此功能的所有标签。

我是这样实现的：
1\. 获取未合并到 master 的分支列表

```
git branch --no-merged master 
```

2.为每个分支获取该分支而不是主分支的修订列表

```
git rev-list branch1 --not master --no-merges 
```

如果列表为空，则从分支列表中删除分支
3\. 对于每个修订，确定原始分支

```
git name-rev --name-only revisionHash1 
```

并匹配正则表达式`^([^\~\^]*)([\~\^].*)?$`。第一个模式是分支名称，第二个是分支的相对路径。
如果找到的分支名称不等于初始分支，则从列表中删除修订。

最后，我获得了一个分支列表和每个分支的提交列表。

* * *

经过一些更多的 bash 研究，它可以通过以下方式完成：

```
git rev-list --all --not master --no-merges | xargs -L1 git name-rev | grep -oE '[0-9a-f]{40}\s[^\~\^]*' 
```

结果是形式的输出

```
hash branch 
```

可以读取、解析、排序、分组或其他任何内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T14:49:47.870

这个问题没有正确的答案，因为它没有被详细说明。

Git 历史只是一个有向无环图 (DAG)，通常不可能确定 DAG 中两个任意节点之间的语义关系，除非这些节点被充分标记。除非您可以保证示例图中的提交消息遵循可靠的、机器可解析的模式，否则提交没有充分标记——如果没有额外的上下文（例如，保证您的开发人员遵循），不可能自动识别您感兴趣的提交某些最佳实践）。

这是我的意思的一个例子。您说 commit`a1`与 相关联`branch1`，但这不能仅通过查看示例图的节点来确定。曾几何时，您的示例存储库历史可能看起来像这样：

```
 *    merge branch1 into branch2 - branch2's head
      |\
     _|/
    / *    b1
   |  |
   |  |
  _|_/
 / |
|  *       a1
* /        m1
|/
|
*          start - master's head 
```

请注意，`branch1`上图中甚至还不存在。上图可能源于以下一系列事件：

1.  `branch2``start`在共享存储库中创建
2.  用户#1`a1`在他/她的本地`branch2`分支上创建
3.  同时，用户#2在他/她的本地分支上创建`m1`和`b1``branch2`
4.  user#1 将他/她的本地`branch2`分支推送到共享存储库，导致共享存储库中的`branch2`ref 指向`a1`
5.  用户#2 尝试将他/她的本地`branch2`分支推送到共享存储库，但这失败并出现非快进错误（`branch2`当前指向`a1`且无法快进到`b1`）
6.  用户#2 运行`git pull`，合并`a1`到`b1`
7.  用户#2`git commit --amend -m "merge branch1 into branch2"`出于某种莫名其妙的原因运行
8.  用户#2 推送，共享存储库历史最终看起来像上面的 DAG

一段时间后，user#1 创建`branch1`off`a1`并创建`a2`，而 user#2 快进合并`m1`到`master`，导致以下提交历史记录：

```
 *    merge a1 into b1 - branch2's head
   *  |\   a2 - branch1's head
   | _|/
   |/ *    b1
   |  |
   |  |
  _|_/
 / |
|  *       a1
* /        m1 - master's head
|/
|
*          start 
```

鉴于这一系列事件在技术上是可能的（尽管不太可能），人类怎么能更不用说 Git 告诉你哪些提交“属于”哪个分支？

## 解析合并提交消息

如果可以保证用户不会更改合并提交消息（他们始终接受 Git 默认的），并且 Git 从未也永远不会更改默认的合并提交消息格式，那么合并提交的提交消息可以作为线索`a1`开始`branch1`于. 您必须编写一个脚本来解析提交消息——没有简单的 Git 单行程序可以为您执行此操作。

## 如果合并总是有意的

或者，如果您的开发人员遵循最佳实践（每次合并都是有意的，并且旨在引入一个不同名称的分支，从而导致存储库中没有[由 创建的那些愚蠢的合并提交`git pull`](https://stackoverflow.com/a/15316602/712605)），并且您对来自已完成子项的提交不感兴趣分支，然后您感兴趣的提交位于第一父路径上。如果您知道哪个分支是您正在分析的分支的父分支，则可以执行以下操作：

```
git rev-list --first-parent --no-merges parent-branch-ref..branch-ref 
```

此命令列出可访问的提交的 SHA1 标识符，`branch-ref`排除可访问的提交`parent-branch-ref`和从子分支合并的提交。

在上面的示例图中，假设父顺序由您的注释确定，而不是由进入合并提交的行的顺序决定，`git rev-list --first-parent --no-merges master..branch1`将打印提交 a4、a3、a2 和 a1 的 SHA1 标识符（按该顺序；使用`--reverse`if您想要相反的顺序），并`git rev-list --first-parent --no-merges master..branch2`会打印提交 b4、b3、b2 和 b1 的 SHA1 标识符（同样，按该顺序）。

## 如果分支机构有明确的父/子关系

如果您的开发人员没有遵循最佳实践，并且您的分支中到处都是由`git pull`（或等效操作）创建的愚蠢合并，但您有明确的父/子分支关系，那么编写脚本来执行以下算法可能对您有用：

1.  查找所有从感兴趣的分支可达的提交，不包括来自其父分支、其父的父分支、其父的父分支等的所有提交，并保存结果。例如：

    ```
    git rev-list master..branch1 >commit-list 
    ```

2.  对感兴趣分支的所有子、孙等分支执行相同的操作。例如，假设`branch2`被认为是 的孩子`branch1`：

    ```
    git rev-list ^master ^branch1 branch2 >commits-to-filter-out 
    ```

3.  从步骤#1 的结果中过滤掉步骤#2 的结果。例如：

    ```
    grep -Fv -f commits-to-filter-out commit-list 
    ```

这种方法的问题在于，一旦子分支合并到其父分支中，即使子分支上的开发继续进行，这些提交也会被视为父分支的一部分。尽管这在语义上是有意义的，但它不会产生你想要的结果。

## 一些最佳实践

这里有一些最佳实践，可以让这个特定问题在未来更容易解决。大多数（如果不是全部）这些都可以通过巧妙地使用共享存储库中的钩子来实施。

1.  每个分支只有一个任务。禁止多任务。
2.  *一旦子分支合并到其父分支，***决不允许继续在子分支上进行开发。***合并意味着任务完成，故事结束。对预期问题的回答：

    *   问：如果我在子分支中发现错误怎么办？A：从父级开始一个新的分支。不要在子分支上继续开发。
    *   问：如果新功能还没有完成怎么办？A：那你为什么要合并分支？也许你合并了一个完整的子任务；如果是这样，剩余的子任务应该在他们自己的分支上离开父分支。不要在子分支上继续开发。* 
**   [禁止使用`git pull`](https://stackoverflow.com/a/15316602/712605)*   除非所有子分支都已合并到其中，否则不得将子分支合并到其父分支中。*   如果分支没有任何子分支，请考虑[在合并之前将其重新定位到父分支`--no-ff`](https://stackoverflow.com/a/15721436/712605)。如果它确实有子分支，您仍然可以变基，但请保留`--no-ff`子分支的合并（这比应有的更棘手）。*   经常将父分支合并到子分支中，使合并冲突更容易解决。*   避免将祖父分支直接合并到其孙分支中——先合并到子分支中，然后将子分支合并到孙子分支中。*

 *如果您的所有开发人员都遵循这些规则，那么很简单：

```
git rev-list --first-parent --no-merges parent-branch..child-branch 
```

您只需要查看在该分支上所做的提交减去在其子分支上所做的提交。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T15:26:20.210

如果我掌握了你的问题空间，认为你可以使用*--sha1-name*

> git show-branch --topo-order --topics --sha1-name origin/master origin/branch1 origin/branch2

列出您感兴趣的内容，然后通过*git-what-branch运行提交*

> **[git-what-branch](http://github.com/SethRobertson/git-what-branch)**：发现提交在哪个分支上，或者它是如何到达指定分支的。这是来自[Seth Robertson的](http://github.com/SethRobertson)[Perl 脚本](http://github.com/SethRobertson/git-what-branch)

并格式化报告以满足您的需求？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-30T03:47:44.863

我建议按照您描述的方式进行操作。但我会处理 的输出`git log --format="%H:%P:%s" ^origin/master origin/branch1 origin/branch2`，所以你可以做更好的树行走。

1.  从输出中构建适当的树结构，标记父母和孩子。
2.  从头开始走（从 获取他们的 SHA `git rev-parse`）。用你来自的头部的名称和距离标记每个提交。
    *   对于非第一父步骤（合并的另一部分），我会在距离上加 100。
    *   如果您遇到合并提交，请检查它对哪个分支合并到哪个分支的说明。在跟踪两个父链接时使用此信息：如果您要访问的分支的解析名称与您当前的 HEAD 不匹配，则将距离添加 10000。
    *   对于父母**双方**：你现在知道他们的名字了。将他们作为第一父母的所有孩子添加到 dict: `commit -> known-name`。
3.  带着你的已知提交的字典，开始走上树（走向孩子，而不是父母）。从合并到分支的距离中减去 10000。在进行此步行时，不要进行您不是第一父母的提交，并在您到达分支点（有两个孩子的提交）时立即停止。如果你碰到你的一个分支头，也要停下来。

现在，对于您的每个提交，您将获得到分支头的距离值列表（可能为负数）。对于每个提交，距离最短的分支是最有可能在其上创建提交的分支。

如果你有时间，你可能想遍历整个历史，然后减去 master 的历史——如果你的分支之前已经合并到 master，这可能会产生更好的结果。

* * *

无法抗拒：制作了一个执行我描述的python脚本。但是有一个变化：每正常一步，距离不是增加，而是减少。这样做的效果是，在合并点之后寿命更长的分支是首选，我个人更喜欢这一点。这是：[https ://gist.github.com/Chronial/5275577](https://gist.github.com/Chronial/5275577)

用法：只需运行`git-annotate-log.py ^origin/master origin/branch1 origin/branch2`检查结果的质量（将输出带有注释的 git 日志树）。*

# java - 递归xml解析并获取数据java

> ID：15589865
> 
> 赞同：0
> 
> 时间：2013-03-23T17:30:35.473
> 
> 标签：java, xml, parsing, xml-parsing, playframework-2.0

再会！我找不到正常的算法来处理 xml 并为我的实体获取数据。所以我有这样的xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<export>
    <categories>
        <category>
            <idgr xmlns:type="string">bd72d90d-55bc-11d9-848a-00112f43529a</idgr>
            <namegr xmlns:type="string">Обувь</namegr>
            <categories>
                <category>
                    <idgr xmlns:type="string">bd72d90e-55bc-11d9-848a-00112f43529a</idgr>
                    <namegr xmlns:type="string">Женская обувь</namegr>
                    <categories>
                        <category>
                            <idgr xmlns:type="string">bd72d910-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Женские ботфорты коричневые</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">bd72d913-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Ботинки женские демисезонные</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">bd72d916-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Ботинки женские натуральная кожа</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">bd72d91b-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Женские босоножки</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">dee6e178-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Женские модельные туфли</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">dee6e17b-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Женские сапоги с искусственным мехом</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71f9a-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Женские туфли-мокасины</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71fa7-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Женские сапоги с натуральным мехом</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71fa9-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Сапоги жен. низкие</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71faf-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Сапоги жен высокие</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71fb3-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Женские туфли</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71fb7-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Полусапожки на шнурках</namegr>
                        </category>
                    </categories>
                </category>
                <category>
                    <idgr xmlns:type="string">dee6e186-55bc-11d9-848a-00112f43529a</idgr>
                    <namegr xmlns:type="string">Мужская обувь</namegr>
                    <categories>
                        <category>
                            <idgr xmlns:type="string">dee6e187-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Мужские мокасины</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">dee6e18a-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Мужские ботинки демисезонные</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71fab-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Мужские сапоги с натуральным мехом</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71fad-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Мужские туфли нубук</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71fb1-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Мужские сапоги с искуственным мехом</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">e8a71fb5-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Ботинки мужские</namegr>
                        </category>
                    </categories>
                </category>
                <category>
                    <idgr xmlns:type="string">dee6e1cf-55bc-11d9-848a-00112f43529a</idgr>
                    <namegr xmlns:type="string">Кроссовки</namegr>
                    <categories>
                        <category>
                            <idgr xmlns:type="string">dee6e1d0-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Кроссовки "ADIDAS"</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">dee6e1d3-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Кроссовки "REEBOK"</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">dee6e1d6-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Кроссовки высокие нат. кожа</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">dee6e1d9-55bc-11d9-848a-00112f43529a</idgr>
                            <namegr xmlns:type="string">Кроссовки мужские, кожа</namegr>
                        </category>
                    </categories>
                </category>
                <category>
                    <idgr xmlns:type="string">05e26d88-01e4-11dc-a411-00055d80a2d1</idgr>
                    <namegr xmlns:type="string">Аксессуары</namegr>
                    <categories>
                        <category>
                            <idgr xmlns:type="string">05e26d89-01e4-11dc-a411-00055d80a2d1</idgr>
                            <namegr xmlns:type="string">Крем для обуви</namegr>
                        </category>
                        <category>
                            <idgr xmlns:type="string">05e26d8b-01e4-11dc-a411-00055d80a2d1</idgr>
                            <namegr xmlns:type="string">Щетка для обуви</namegr>
                        </category>
                    </categories>
                </category>
            </categories>
        </category>
</categories>
</export> 
```

（对不起代码中的俄语文本）我试图解析它

```
public class ParseXmlData {
    public final static String FILE_PATH = "public/1cimport/export.xml";
    private DocumentBuilderFactory dbfactory;
    private DocumentBuilder documentBuilder;
    private Document doc;

    public final static String CATEGORIES_LABEL = "categories";

    private Integer levelCounter = 0;
    public ParseXmlData(){
        File xmlFile = new File(FILE_PATH);

        dbfactory = DocumentBuilderFactory.newInstance();
        try {
            documentBuilder = dbfactory.newDocumentBuilder();
            doc = documentBuilder.parse(FILE_PATH);
            final List<String> l  = new ArrayList<String>();

            parse(doc, l, doc.getDocumentElement());
        } catch (Exception e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }

    }
    public void parse(final Document doc, final List<String> list, final Element element){

        final NodeList nodeChildrenList = element.getChildNodes();

        for(int i = 0; i<nodeChildrenList.getLength(); i++){
            final Node node = nodeChildrenList.item(i);
            if(node.getNodeType() == Node.ELEMENT_NODE){
               list.add(node.getNodeName());
               if(node.getNodeName().toUpperCase().equals(ParseXmlData.CATEGORIES_LABEL.toUpperCase())){
                   CategoryParseXml categoryParseXml = new CategoryParseXml();
                   categoryParseXml.parseCategory(doc,list,(Element) node);
               }
               parse(doc,list,(Element) node);
            }
        }

    }
} 
```

还有一个班级

```
public class CategoryParseXml {
    public static Integer levelCounter = 0;
    public final static String IDGR_LABEL = "IDGR";
    public final static String NAMEGR_LABEL = "NAMEGR";

    private List<CategoryEntity> categoryEntities = new ArrayList<CategoryEntity>();

    public void parseCategory(final Document doc, final List<String> list, final Element element){
        final NodeList nodeChildrenList = element.getChildNodes();

        CategoryEntity categoryEntity = new CategoryEntity();
        categoryEntity.setLevel(levelCounter);

        for(int i = 0; i<nodeChildrenList.getLength(); i++){
            final Node node = nodeChildrenList.item(i);
            if(node.getNodeType() == Node.ELEMENT_NODE){
                list.add(node.getNodeName());
                if(node.getNodeName().toUpperCase().equals(ParseXmlData.CATEGORIES_LABEL.toUpperCase())){
                    CategoryParseXml.levelCounter++;
                    parseCategory(doc,list,(Element) node);
                }
                if(node.getNodeName().toUpperCase().equals(CategoryParseXml.IDGR_LABEL.toUpperCase())){
                    categoryEntity.setCategoryId(node.getNodeValue());
                }
                if(node.getNodeName().toUpperCase().equals(CategoryParseXml.NAMEGR_LABEL.toUpperCase())){
                    categoryEntity.setName(node.getNodeValue());
                }

                parseCategory(doc,list,(Element) node);
            }
        }

    }

} 
```

我使用 play framework 和 ebean 作为 ORM 支持。所以实体看起来像

```
@Entity
public class CategoryEntity extends Model {
    @Id
    private String categoryId;

    private String Name;
@OneToMany(targetEntity = CategoryEntity.class, cascade = CascadeType.ALL)
private List<CategoryEntity> categories;
    private Integer level;
} 
```

我找不到需要获取子类别列表以及需要创建它并添加到类别的时刻。请提供一些想法来从这个 xml 填充这个类实体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:48:31.977

If I were you I would try a different approach:

1.  Create a XSD schema supporting recursion See this [Recursion in an XML schema?](https://stackoverflow.com/questions/148988/recursion-in-xsd-schemas)
2.  From that xsd schema use JAXB to create classes you can serialize to XML and de-serialize from XML See this too [JAXB endless data structure, recursive binding?](https://stackoverflow.com/questions/9421704/jaxb-endless-data-structure-recursive-binding)
3.  I would not recommend it but you can annotate that same JAXB generated classes as JPA entities and use them directly for persistence. An alternative approach would be to create different separated classes for JPA entities and moving values between JPA and JAXB classes using reflection for instance

# java - 如何使因“SSL 对等方错误关闭”而导致 SSL 连接失败的 Java 6 像 Java 7 一样成功？

> ID：15589880
> 
> 赞同：28
> 
> 时间：2013-03-23T17:31:56.300
> 
> 标签：java, ssl, handshake, sslhandshakeexception

我看到来自运行 Java 6 的客户端的 SSL 连接失败，出现如下异常：

```
Caused by: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:882)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1188)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1215)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1199)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:434)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:133)
    ... 35 more
Caused by: java.io.EOFException: SSL peer shut down incorrectly
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:462)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:863)
    ... 41 more 
```

该服务器是一个基于 Tomcat 7 的应用程序，在 Java 7、Linux 和 Amazon EC2 上运行，物有所值。

我发现了很多关于可能原因的建议，包括意外连接到非 SSL 端口等。我相信我已经排除了这一切，主要是因为*完全相同的客户端在运行 Java 7 时工作而没有任何变化*。（在这两种情况下都是 OS X。）

下面我包括 Java 6 和 Java 7 的 SSL 连接过程的调试输出。我对专家的问题是，**这是否表明可以在 Java 6 中启用某些可能的密码或协议设置（可能是 Java 7 中的默认设置）以使其工作**？

爪哇 6：

```
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
%% No cached client session
*** ClientHello, TLSv1
RandomCookie:  GMT: 1363993281 bytes = { 77, 153, 100, 72, 45, 178, 253, 243, 195, 167, 17, 151, 39, 247, 148, 102, 213, 129, 39, 17, 26, 139, 157, 154, 63, 88, 41, 160 }
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
***
main, WRITE: TLSv1 Handshake, length = 81
main, WRITE: SSLv2 client hello message, length = 110
main, received EOFException: error
main, handling exception: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
main, SEND TLSv1 ALERT:  fatal, description = handshake_failure
main, WRITE: TLSv1 Alert, length = 2
main, called closeSocket() 
```

爪哇 7：

```
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
main, setSoTimeout(0) called
%% No cached client session
*** ClientHello, TLSv1
RandomCookie:  GMT: 1363993435 bytes = { 131, 83, 80, 186, 215, 90, 171, 131, 231, 18, 184, 183, 249, 155, 197, 204, 73, 1, 74, 79, 32, 142, 236, 28, 111, 37, 58, 255 }
Session ID:  {}
Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_RC4_128_MD5, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
Extension elliptic_curves, curve names: {secp256r1, sect163k1, sect163r2, secp192r1, secp224r1, sect233k1, sect233r1, sect283k1, sect283r1, secp384r1, sect409k1, sect409r1, secp521r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, sect163r1, secp192k1, sect193r1, sect193r2, secp224k1, sect239k1, secp256k1}
Extension ec_point_formats, formats: [uncompressed]
Extension server_name, server_name: [host_name: ec2-xx-xx-xx-xx.compute-1.amazonaws.com] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-31T16:08:05.090

布鲁诺的答案最终是正确的。这最容易由`https.protocols`系统属性控制。这就是您能够控制工厂方法返回的内容的方式。例如，设置为“TLSv1”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T18:05:50.780

似乎在调试日志中请求的格式 `Java 6`是发送的。`SSLv2`

> 主要，写入：SSLv2 客户端问候消息，长度 = 110

这在 Java 7 中默认未提及。
将客户端更改为使用 SSLv3 及更高版本以避免此类互操作性问题。

查找[Java 7](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)和[Java 6](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)`JSSE`中提供程序的差异

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T23:48:55.833

从客户端 SSLSocket 或 HttpsURLConnection 上启用的协议中删除“SSLv2ClientHello”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-05T21:54:40.873

将服务器参数从 -Dhttps.protocols=SSLv3 更新为 -Dhttps.protocols=TLSv1,SSLv3

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-27T10:18:53.940

像这样做：

```
SSLSocket socket = (SSLSocket) sslFactory.createSocket(host, port);
socket.setEnabledProtocols(new String[]{"SSLv3", "TLSv1"}); 
```

# php - mysql查询中的foreach

> ID：15589885
> 
> 赞同：-2
> 
> 时间：2013-03-23T17:32:23.843
> 
> 标签：php, mysql, foreach

我是 php 新手，正在尝试动态创建一个查询。这是我得到 foreach 语法错误的一段代码。你能帮我修复这个错误吗？

```
 $select = "SELECT pmid FROM articles WHERE pmid IN 
("
    foreach($results as $result) {
        $select .= $result['pmid'] . ',';
    }
    $select = trim($select,','); . 
")
           "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:36:50.010

您在第 2 行末尾缺少一个分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:38:04.320

```
$pmids = array();
foreach($results as $result) {
    $pmids[] = $result['pmid'];
}

if (!empty($pmids)) {
  $select = 'SELECT pmid FROM articles WHERE pmid IN (' . join(',',$pmids) . ')';
} else {
  $select = 'SELECT pmid FROM articles WHERE 1 = 0';
} 
```

您必须确保`$result['pmid']`在数据库查询中可以安全地使用这些值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:39:41.877

您没有使用正确的方式编写 sql 查询..

正确写

```
foreach($results as $result) {
    $select .= $result['pmid'] . ',';
}
$select = trim($select,',');

$query = "SELECT pmid FROM articles WHERE pmid IN ($select)"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T17:40:21.723

看看这个

```
$results = array(1,5,6,7);
$select = "SELECT pmid FROM articles WHERE pmid IN (".implode(",", $results).")";
echo $select; 
```

# php - 将 jquery 对象转换为字符串

> ID：15589886
> 
> 赞同：0
> 
> 时间：2013-03-23T17:32:32.110
> 
> 标签：php, jquery, html

这是我的对象数组

```
 [Object { qe="1-5",  result="0"}, Object { qe="1-5",  result="1"}, Object { qe="8+9",  result="0"}] 
```

我需要将此数组作为 href 链接发送

像这样的东西：

index.php?mode=result&link= 对象

现在我需要知道如何将这种特定类型的数组转换为字符串

我在这里有一个演示，但没有用：

[http://jsfiddle.net/fkling/bchG5/](http://jsfiddle.net/fkling/bchG5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:38:05.403

似乎您可以将其作为 JSON 字符串发送。您可以`JSON.stringify`在对象上使用：

```
encodeURIComponent(JSON.stringify(value)); 
```

在 php 方面，`json_decode($_REQUEST['link'])`将其转换为可用的 PHP 结构（数组、对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:47:09.590

尝试以下

```
var obj= [Object { qe="1-5",  result="0"}, Object { qe="1-5",  result="1"}, Object { qe="8+9",  result="0"}]
alert(JSON.stringify(obj)); 
```

# java - 如何在小部件和活动之间共享私人文件？

> ID：15589888
> 
> 赞同：0
> 
> 时间：2013-03-23T17:32:37.860
> 
> 标签：java, android, file, widget

我知道我可以在活动中使用 getFilesDir() 和文件名来保存/读取文件。但是，当我尝试从小部件中调用 getFilesDir() 时，出现错误。我希望能够从小部件和活动中访问相同的文本文件。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:40:07.223

您可以`getFilesDir()`从任何使用因此您可以从[Application](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CDEQFjAA&url=http://developer.android.com/reference/android/app/Application.html&ei=3OlNUZjxCunR0QX6lIH4BQ&usg=AFQjCNHlOiaTSPSHtnZxHDzwp7YJYgf5OA&sig2=1nd1_BV9FW2SgENfuWlP3Q&bvm=bv.44158598,d.d2k)`Context`保存\读取您的文件。

**编辑：**

您必须从[Application](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CDEQFjAA&url=http://developer.android.com/reference/android/app/Application.html&ei=3OlNUZjxCunR0QX6lIH4BQ&usg=AFQjCNHlOiaTSPSHtnZxHDzwp7YJYgf5OA&sig2=1nd1_BV9FW2SgENfuWlP3Q&bvm=bv.44158598,d.d2k)扩展一个类并使用它的上下文：

```
public class App extends Application{

    private static Context mContext;

    @Override
    public void onCreate() {
        super.onCreate();
        mContext = this;
    }

    public static Context getContext(){
        return mContext;
    }
} 
```

然后在`manifest`您的应用程序中，使用该类的名称设置标签的`name`属性`Application`，例如：

```
android:name="App" 
```

注意： App 是扩展[Application](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CDEQFjAA&url=http://developer.android.com/reference/android/app/Application.html&ei=3OlNUZjxCunR0QX6lIH4BQ&usg=AFQjCNHlOiaTSPSHtnZxHDzwp7YJYgf5OA&sig2=1nd1_BV9FW2SgENfuWlP3Q&bvm=bv.44158598,d.d2k)的类的名称。

现在您可以使用它的上下文来保存\读取：

```
App.getContext().getFilesDir(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:40:29.270

为此，您可以使用[AssetManager 。](http://developer.android.com/reference/android/content/res/AssetManager.html)这是一个简短的示例：

```
AssetManager assetManager = getAssets(); 
String[] files = assetManager.list("Files");
InputStream input = assetManager.open("helloworld.txt");
int size = input.available();
byte[] buffer = new byte[size];
input.read(buffer);
input.close();
String text = new String(buffer); 
```

**更新：**抱歉，忘记了您希望在小部件中使用它。[您可以从此答案](https://stackoverflow.com/a/12244647/1292652)中尝试此代码：

```
InputStream is = mContext.getAssets().open(someFile);
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8")); 
```

**警告：**不要按原样使用此代码。您应该使用正确的代码来捕获错误和边缘情况。

# .htaccess - 将旧 wordpress ?page_id= 重定向到非 wordpress 站点

> ID：15589889
> 
> 赞同：0
> 
> 时间：2013-03-23T17:32:45.037
> 
> 标签：.htaccess, redirect

我曾经有一个 WP 网站，我将其转换为标准的 html 网站。问题是我发现做谷歌搜索，而不是[http://www.genealogyinc.com](http://www.genealogyinc.com)它返回[http://www.genealogyinc.com/?page_id=21](http://www.genealogyinc.com/?page_id=21)，我不知道有多少页面是这样的，但我正在尝试要找到 htaccess 解决方法，我在网上找到的所有解决方法都给了我 500 个服务器错误。需要重写任何 ?page_id= 因为我不知道还有多少其他数字。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:54:31.410

在我的脑海中，未经测试，它会是这样的。第一行查找 page_id 查询字符串参数，如果符合，则应传递到第二行。我在下面的重写规则可能需要一些调整，但我希望这对你有所帮助。

RewriteCond %{QUERY_STRING} page_id=(.*)$

重写规则 $/? [R=301,L]

# java - Java与List有关系

> ID：15589891
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:32:48.490
> 
> 标签：java, list, object, inheritance, relationships

因此，我试图弄清楚类和 Id 之间的 has-a 关系，希望对一个实例有一些帮助：

```
public class Test{
List<ObjectA> list;
} 
```

此测试是否有 -a List 或
Test has-a List<> 或
Test has-a ObjectA 或
Test has-a List<> and has-a ObjectA

欢迎任何帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:48:23.060

Test has a List and list can contain Objects. We cannot say Test has an Object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:34:31.777

我会说“ `Test`has-a List of references to `ObjectA`”。

如果`Test`拥有这些对象，更好的方法可能是“`Test`拥有零个或多个`ObjectA`”。

# perl - Perl 模板工具包传递给 Jquery 工具覆盖？

> ID：15589893
> 
> 赞同：1
> 
> 时间：2013-03-23T17:32:49.667
> 
> 标签：perl, jquery-tools, template-toolkit

我正在使用 Template::Toolkit 来构建我的页面。我在页面上有一个链接列表，每个链接都使用 Jquery 工具触发覆盖。我想将一些 CGI 变量传递给它，但它表现得很奇怪。我在模板中的代码是：

```
[% FOREACH dvd IN dvd_chart %]

<div class="thumbnail">
<a href="popup.pl?overview=[% dvd.overview %]" rel="#overlay" style="text-decoration:none"><img  src="[% dvd.thumbnail %]" /></a>
<br />

</div>
[% END %] 
```

问题是概述并没有进入叠加层。事实上，覆盖显示为空白。如果我更改字符串的模板变量，该字符串确实会出现在模板中。有谁知道是否需要进行一些转义才能传递模板变量？顺便说一句，[% dvd.overview %] 变量是有效的，因为我可以将它转储到屏幕上并查看字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T13:15:16.343

模板工具包有针对这种情况的内置过滤器（[特别是 html 和 html_entity ）。](http://www.template-toolkit.org/docs/manual/Filters.html#section_html)特别是在此处使用它们是一个好主意，因为即使未转义的内容正确呈现，正如您提到的，这些是从客户端传递的 CGI 变量。渲染未转义的客户端提供的数据是危险的。

下面是一个示例，说明如何适当地逃避，而不会用多余的代码弄乱您的业务逻辑。只需添加`| html`到变量输出。

```
[% FOREACH dvd IN dvd_chart %]

<div class="thumbnail">
<a href="popup.pl?overview=[% dvd.overview | html %]" rel="#overlay" style="text-decoration:none"><img  src="[% dvd.thumbnail |html %]" /></a>
<br />

</div>
[% END %] 
```

# jquery - .click() 在 div 中无法正常运行

> ID：15589894
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:32:54.720
> 
> 标签：jquery

我正在开发一个列出某些产品的网站。在我使用 jQuery 分页对结果进行分页的页面上。我为此目的使用[了这个](http://www.9lessons.info/2010/10/pagination-with-jquery-php-ajax-and.html)脚本。

所以所有的产品细节都显示在`class="data"`一个`<li></li>`

```
<div class="content">
    <div id="loading"></div>
<div id="container">
       <div class="data"></div>
    <div class="pagination"></div>
</div> 
```

在这些产品中，我有允许将产品添加到列表中的链接。

```
<span class="addlist">
<a id="id_1249" class="m-btn" onclick="return false" href="http://index.php/action/add/">Add</a>
</span> 
```

我创建了一个简单的函数来检查点击事件

```
$(".addlist").click(function() {
   alert("clicked."); 
 }); 
```

问题是当我点击添加链接时没有任何反应，也没有提示消息。

经过长时间的测试，我注意到，当我在点击事件`<a href="index.php" class="addlist">Visible Text</a>`之外放置一个链接 ()时`<div id="container">`效果很好。但如果它放在里面`<div id="container">`它不起作用。我`$.noConflict();`在 jQuery 函数中添加了，但仍然没有用。

有人可以告诉我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T17:35:43.437

由于您`addlist`是动态添加的，因此您需要使用`on()`委托事件..

```
$("#container").on('click',".addlist",(function(e) {
    e.preventDefault();
    alert("clicked."); 
 }); 
```

[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)以阅读有关 on() 委托事件的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:36:46.363

我认为你返回 false 太快了。

尝试做：

HTML

```
<span class="addlist">
<a id="id_1249" class="m-btn" href="http://index.php/action/add/">Add</a>
</span> 
```

JS

```
$(".addlist").click(function(event) {
   event.preventDefault();
   alert("clicked."); 
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:35:36.633

尝试

```
$('#parent').on('click', '.addlist', function() {
   alert("clicked."); 
}); 
```

准备好的文档中可能不存在这些元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T17:38:11.613

这可能是因为您`return false`在锚点上有一个点击处理程序。删除它，它应该可以工作。

# java - 在 Java 中运行另一个类中的对象的方法

> ID：15589898
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:33:05.600
> 
> 标签：java, swing

我在扩展 JFrame 的类中有一个 ActionListener。单击按钮时，我需要设置在 Main 类中创建的 JFrame 扩展对象的可见性。在此示例中，单击按钮将使带有该按钮的现有对象变为不可见，并且将使另一个 JFrame 对象变为可见。

ActionListener 在一个 JFrame 类中，对象是在 Main 类中创建的。如何从 JFrame 类中的 ActionListener 运行 Main 类中该特定对象的方法？

我已经有一个 setVisibility 方法，但不清楚如何指示 ActionListener 在另一个类中存在的对象上运行此方法。

在主类中：

```
Object1 jFrameObj1 = new Object1();

Object2 jFrameObj2 = new Object2(); 
```

* * *

在 Object1 类中（内部动作监听器）：

```
if(event.getSource() == button){

  jFrameObj1.setVisible(false);

  jFrameObj2.setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:49:58.887

首先，您应该尊重 Java 命名约定，并为您的类和变量选择更好的名称。当你想调用一个对象的方法时，你需要一个对该对象的引用。所以 main 方法只需要将第二帧的引用传递给第一帧：

```
Object2 frame2 = new Object2();
Object1 frame1 = new Object1(frame2); 
```

然后在 Object1 类中：

```
private Object2 frameToDisplayWhenButtonIsClicked;

public Object2(frameToDisplayWhenButtonIsClicked) {
    this.frameToDisplayWhenButtonIsClicked;
}

...

public void actionPerformed(ActionEvent e) {
    setVisible(false);
    frameToDisplayWhenButtonIsClicked.setVisible(true);
} 
```

# jquery - 如何使用 ajax 上传来改善我的照片库？

> ID：15589901
> 
> 赞同：1
> 
> 时间：2013-03-23T17:33:11.927
> 
> 标签：jquery, photo-gallery

我正在尝试为我的网站制作照片库（我是一名摄影师），但是当我放置照片（一张有 7-8 mb，4300x3000）时，它们的加载速度非常慢。我在网上搜索了我应该怎么做，我发现了一些关于 ajax 上传的东西（Facebook 正在使用同样的东西，ajax）。实际上，我的画廊与 FB 照片画廊非常相似，但没有评论之类的东西。我只需要照片的小缩略图，以及当您单击缩略图时照片恢复正常尺寸的效果。我创建了一个这样的照片库，唯一的问题是加载时间，它几乎让我的电脑崩溃，而且我没有时间手动调整每张照片的大小。那么，关于这个 ajax 上传，我应该知道些什么呢？如何调用自动调整照片大小的函数，像脸书一样吗？这就是我在照片库中所取得的成就（我放了一些网络照片作为示例）[http://jsfiddle.net/EChhQ/4/](http://jsfiddle.net/EChhQ/4/)

HTML

```
<a class="fancybox-thumbs" data-fancybox-group="thumb" href="http://1.bp.blogspot.com/_CWcsH3xUmrE/TOWrqLVp--I/AAAAAAAAAG0/hN0hBxYVyTo/s1600/Poze%252520Roz%252520Dragalase.jpg"><img  id="imgredus" src="http://1.bp.blogspot.com/_CWcsH3xUmrE/TOWrqLVp--I/AAAAAAAAAG0/hN0hBxYVyTo/s1600/Poze%252520Roz%252520Dragalase.jpg" alt="" /></a>
                        <a class="fancybox-thumbs" data-fancybox-group="thumb" href="http://www.zega.ro/imagini/produse/mici/pulover-carina-portocaliu__azz53218_50_extra.jpg"><img id="imgredus" src="http://www.zega.ro/imagini/produse/mici/pulover-carina-portocaliu__azz53218_50_extra.jpg" alt="" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:52:03.493

您可以按如下方式实现图像大小调整功能：

```
var max_w = 600; // set the image maximum width
var max_h = 300; // set the image maximum height
$("img").each(function(i) { // match all img elements
    var this_w = $(this).height();
    var this_h = $(this).width();
    // check which side of the image needs to be kept to the maximum 
    if (this_w/this_h < max_w/max_h) {
        var h = max_h;
        var w = Math.ceil(max_h/this_h * this_w);
    } else { // calculate proportionally
        var w = max_w;
        var h = Math.ceil(max_w/this_w * this_h);
    }
    // assign new height and width values using CSS
    $(this).css({ height: h, width: w });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:47:08.557

我认为您正在寻找类似[http://www.no-margin-for-errors.com/projects/prettyPhoto-jquery-lightbox-clone/#prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyPhoto-jquery-lightbox-clone/#prettyPhoto)

# url-rewriting - nginx 配置文件重定向到子文件夹

> ID：15589903
> 
> 赞同：0
> 
> 时间：2013-03-23T17:33:20.917
> 
> 标签：url-rewriting, nginx, subdomain

我目前正在尝试在两个目录中部署一个网站。尽管有很多文档，但我无法获得我希望的行为。这是网站的架构：

*   主网站页面存储在 /opt/www/mainsite/index.html
*   第二个网站（使用 CodeIgniter）存储在 /opt/www/apps/myapp/index.php

我希望配置 nginx 来获得这种行为：

*   http中的所有请求都必须重定向到https
*   www.mydomain.com 必须指向 /opt/www/mainsite/index.html
*   www.mydomain.com/myapp 必须指向 /opt/www/apps/myapp/index.php

目前，我的配置文件包含：

```
# redirect http to https
server {
    listen 80;
    rewrite ^(.*) https://$host$1 permanent;
}

# main webiste
server {
    listen 443;

    # ssl elements...  
    root   /opt/www/mainsite;
    index index.html;
    server_name             www.mydomain.com;

    location / {
            try_files $uri $uri/ /index.html;
    }
} 
```

在此[页面上](http://wiki.nginx.org/Codeigniter)，我找到了为 CodeIgniter 设置配置文件的所有信息。但我不知道如何创建规则以将 mydomain.com/myapp 指向 CodeIgniter 文件夹以及如何配置 CodeIgniter 以设置正确的配置。

有人可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T23:43:36.413

*   您需要[http://wiki.nginx.org/HttpFastcgiModule](http://wiki.nginx.org/HttpFastcgiModule)来设置 CodeIgniter。
*   使用 2 个服务器块比使用 if 块进行重定向更好。参见[IF 是邪恶的](http://wiki.nginx.org/IfIsEvil)。
*   不要使用 $host，因为该变量值是从请求的 HOST 标头中获得的，并且很容易被伪造。始终设置 server_name 指令并改用该名称。
*   使用“return 301”指令比重写更好。节省 CPU 时间（正则表达式很慢）并且易于理解。请注意，302 重定向（rewrite...redirect）有副作用，因为 302 会将所有 POST 请求转换为 GET 请求，这在您的情况下不好。
*   您不需要在主站点中使用 try_files，因为主站点只提供静态文件。但是你可以使用'expires'指令来允许浏览器缓存静态文件。

> ```
> server {
>     listen 80;
>     server_name www.mydomain.com;
>     return 301 https://$server_name$request_uri;
>  }
> 
>  server {
>     listen 443;
>     server_name www.mydomain.com;
>     # ssl elements...  
> 
>     location / {
>         root   /opt/www/mainsite;
>         index index.html;
>         expires max;
>     }
> 
>     location /myapp {
>         root /opt/www/apps/myapp;
>         # fastcgi module goes here...
>     }
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:17:05.930

```
server {
    listen 80;
    listen 443 ssl;
    …
    if ($scheme != "https") {
        rewrite ^ https://$server_name$request_uri? redirect;
    }
    root /opt/www/mainsite/;
    location /myapp {
        root /opt/www/apps/myapp/;
    }
} 
```

您可以将您所需的任何配置放在`myapp`for`location`中`myapp`。

`Host`顺便说一句，由于 XSS 问题，在单个 中托管多个独立应用程序通常是一个坏主意。

# python - 立即封闭顶级函数的命名空间（用于解析非本地）？

> ID：15589910
> 
> 赞同：0
> 
> 时间：2013-03-23T17:34:22.620
> 
> 标签：python, python-3.x

我对 python`nonlocal`关键字的行为感到困惑。

所以标准的例子就是[这个问题](https://stackoverflow.com/questions/1261875/python-nonlocal-statement)：有一个`def outerfoo():`包含变量定义的块`outvar = 0`，里面`outerfoo()`有一个`def innerfoo():`包含的块`nonlocal outvar`，使得`outvar`in`outerfoo():`的命名空间的值可以通过里面发生的事情来改变`innerfoo()`。

到目前为止，一切都很好。但是，以下代码失败并显示`SyntaxError`：

```
outvar = 0 #not in any function
def foo():
    nonlocal outvar
    outvar += 1
foo() 
```

解析器正在查找什么名称空间，但没有找到`outvar`？

# dokuwiki - dokuwiki：如何隐藏非登录用户的媒体管理器链接

> ID：15589912
> 
> 赞同：6
> 
> 时间：2013-03-23T17:34:24.677
> 
> 标签：dokuwiki

在 dokuwiki 中，如何向未登录的用户隐藏“媒体管理器”链接或顶部的任何其他链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:49:39.013

一种方法是像这样更改模板：在 /lib/tpl/dokuwiki/tpl_header.php 中：

```
 <?php
                if ($INFO['isadmin']) {
                    tpl_action('recent', 1, 'li'); //recent changes
                    tpl_action('media', 1, 'li'); //media manager
                    tpl_action('index', 1, 'li'); //sitemap
                }
            ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-30T23:36:22.963

不完全是您要查找的内容（无论如何可能有点晚了），但这是一种`Media Manager`为所有（包括登录）用户禁用链接的方法：

*   转到管理面板，*配置设置*；
*   搜索*禁用 DokuWiki 操作*（选项名称：） `disableactions`；
*   在*其他操作*中，添加关键字`media`（请[参阅此处](https://www.dokuwiki.org/devel:action_modes)的参考）。

请注意，这将为所有人隐藏链接，但具有写入权限的用户仍然可以通过在编辑页面时单击相应按钮来启动媒体管理器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-26T11:58:38.203

如果没有用户登录，$INFO["userinfo"] 为空

在 /lib/tpl/dokuwiki/tpl_header.php 替换

```
tpl_toolsevent('sitetools', array(
                    tpl_action('recent', true, 'li', true),
                    tpl_action('media', true, 'li', true),
                    tpl_action('index', true, 'li', true)
                )); 
```

和

```
 if(!empty($INFO["userinfo"]))  {
                tpl_toolsevent('sitetools', array(
                    tpl_action('recent', true, 'li', true),
                    tpl_action('media', true, 'li', true),
                    tpl_action('index', true, 'li', true)
                ));
             } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-18T11:10:18.663

我的“grebo”解决方案

*   找到 inc/Action/Media.php
*   编辑方法 tplContent():

```
public function tplContent() {
    global $INFO;
    if ( empty($INFO['userinfo']) ) {
                echo "<p>No way</p>";  
                return;
    }
    tpl_media();
} 
```

因此，只有用户（而非匿名用户）才能看到媒体管理器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-24T17:12:11.557

创建一个插件。假设插件名称是`nositetoolsanon`，所以您需要在`lib/plugins/nositetoolsanon/action.php`.

```
<?php
if(!defined('DOKU_INC')) die();

class action_plugin_nositetoolsanon extends DokuWiki_Action_Plugin {
    public function getInfo(){
        return array('date'=>'2017-08-25', 'name'=>'No sitetools for anonymous users', 'author'=>'Phy25');
    }

    public function register(Doku_Event_Handler $controller) {
        $controller->register_hook('TEMPLATE_SITETOOLS_DISPLAY', 'BEFORE', $this, 'action_link');
    }

    public function action_link(&$event, $param){
        global $INFO;
        if(empty($INFO["userinfo"])){
            // more robust check by ACL: global $ID; if (auth_quickaclcheck($ID) < AUTH_READ)
            $event->preventDefault();
        }
    }
} 
```

此方法适用于任何模板，不会被更新覆盖。

提示：如果您想为无法读取的用户隐藏命名空间，请尝试`$conf['sneaky_index'] = 1`在配置文件中进行设置，但[如果更深的命名空间具有比上述更高的权限可能会导致问题](https://www.dokuwiki.org/config:sneaky_index)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-17T19:52:15.563

我最近自己也有这个问题，发现选择的答案对我来说是不够的。我很确定它不起作用，因为我使用的是 Codowik 模板而不是默认模板。这就是我使用 sivann 的答案想出的。

我编辑`/lib/tpl/codowik/tpl_header.php`并在顶部添加了这个：

```
<?php
  if (!$INFO['isadmin']) {
    echo "<script>
        var newStyle = document.createElement('Style');
        newStyle.innerHTML = '#codowiki_search_ul a {display: none;}';
        document.head.appendChild(newStyle);
      </script>";
  }
?> 
```

它相当 hackish，但我没有时间深入研究模板是如何实现的，而且它可以工作！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-20T00:09:38.213

我只希望访问者和注册用户可以看到站点地图（我将该站点用作博客），因此只希望我（管理员）可以看到最近的更改和媒体链接。

这是我在“Greebo”中更改的代码，位于 inc/Menu/SiteMenu.php

```
 protected $types = array(
        //'Recent', // comment out stuff not required
        //'Media',
        'Index'     // leave sitemap for spiders
    );

    // add this function
    // remove the "&& $INFO['isadmin']" to allow all logged in users to see options
    public function __construct(){
        global $INPUT;
        global $INFO;
        if($INPUT->server->str('REMOTE_USER') && $INFO['isadmin']){
            $this->types = array( 'Recent', 'Media', 'Index' );
        }
    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-11-21T11:09:43.443

我的解决方案可能会隐藏太多信息，但我们开始吧：

1.  以管理员身份登录
2.  进入管理部分
3.  滚动到 ACL（访问控制列表）管理
4.  将用户/组“@all”权限设置为“无”

# java - PropertyAccess：有没有办法动态创建访问函数？

> ID：15589918
> 
> 赞同：1
> 
> 时间：2013-03-23T17:34:38.523
> 
> 标签：java, gwt, extjs

事情是这样的。我想在网站的一些图表中画一些线。这些图表有时会有一两条线。但有时会多几条线，每条线都由任意数学函数定义。

至于现在，我只知道画三条线的可能性：

```
public class ArbitraryFunctionData {

  private double x1;
  private double x2;
  private double x3;
  private double y;

  public ArbitraryFunctionData(double x1, doouble x2, double x3, double y) {
    this.x1 = x1;
    this.x2 = x2;
    this.x3 = x3;
    this.y = y;
  }

  public double getX1() {
    return x1;
  }

  public double getX2() {
    return x2;
  }

  public double getX3() {
    return x3;
  }

  public double getY() {
    return y;
  }

  public void setX1(double x1) {
    this.x1 = x1;
  }

  public void setX2(double x2) {
    this.x2 = x2;
  }

  public void setX3(double x3) {
    this.x3 = x3;
  }

  public void setY(double y) {
    this.y = y;
  }
} 
```

某个地方需要定义这个接口：

```
 public interface ArbitraryFunctionAccess extends
      PropertyAccess<ArbitraryFunctionData> {

    ValueProvider<ArbitraryFunctionData, Double> x1();
    ValueProvider<ArbitraryFunctionData, Double> x2();
    ValueProvider<ArbitraryFunctionData, Double> x3();

    @Path("x")
    ModelKeyProvider<ArbitraryFunctionData> xKey();
  } 
```

所以我可以将这些访问函数作为字段添加到图表中：

```
horizontalAxis.addField(arbFuncAccess.x1());
horizontalAxis.addField(arbFuncAccess.x2());
horizontalAxis.addField(arbFuncAccess.x3()); 
```

* * *

这是创建图表的一种非常不舒服的方式。有没有更好的方法来做到这一点？ `ArbitraryFunctionData`需要预先定义，并且需要手动添加每种访问方法。我宁愿做这样的事情：

```
ArbitraryFunction f1 = new ArbitraryFunction(0, 5, 0, 5) {

  @Override
  public double f(double x) {
    return x+1;
  }

};

ArbitraryFunction f2 = new ArbitraryFunction(0, 5, 0, 5) {

  @Override
  public double f(double x) {
    return x+2;
  }

};

store.add(0, f1.getData()); // a line
store.add(1, f2.getData()); // another line 
```

其中 ArbitraryFunctions 函数`public double f(double x)`需要被覆盖并`ArbitraryFunction.getData()`定义为`public List<ArbitraryFunctionData> getData()`. 这会给整个事情增加更多的动态，但问题是，我不能将字段添加到图表中，因为它们需要在`public interface ArbitraryFunctionAccess`.

我希望我正确地描述了我的需求。有谁知道可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:27:14.007

`PropertyAccess`这不是重点 -`ValueProvider`是。该`PropertyAccess`类型只是自动生成一堆非常无聊的`ValueProvider`/ `ModelKeyProvider`/`LabelProvider`类型的好方法，您可以轻松地手动完成。您的时间很宝贵，所以我们不会让您手工完成。

这意味着您可以手动实现`ValueProvider`它，做任何您想做的事情。我不太清楚`0,5,0,5`f1.getData() 是什么意思或打算返回/做什么，但是您可以将 f1 定义为可以在该列表中找到对象的 ValueProvider 类型。

```
public class AribtraryDataVP implements 
        ValueProvider<ArbitraryFunctionData, Double>() {
  private final int index;
  public AribtraryDataVP(int index) {
    this.index = index;
  }
  public Double getValue(ArbitraryFunctionData object) {
    return object.getData().get(index);
  }
  public void setValue(ArbtraryFunctionData object, Double value) {
    object.getData().set(index, object);
  }
  public String getPath() {
    return "data[" + index + "]";
  }
} 
```

类型的目的`ValueProvider`是允许访问对象的读写属性。在您的情况下，您可能不关心`setValue`，但通常最好实现它或至少抛出异常，这样您就知道有人试图调用它并且它不起作用。同样，该`getPath`方法用于区分属性，有时用于调试目的，有时用于在服务器上进行排序或过滤，这需要它应该排序/过滤的属性的名称。同样，在您的情况下可能不需要，但做对通常是件好事。

我认为这将做你想做的事情，将那些 ValueProviders（即属性，现在映射到列表项）添加到图表中。

```
//f1, f2
axis.addField(new AribtraryDataVP(1));
axis.addField(new AribtraryDataVP(2)); 
```

# wordpress - 命名自定义分类的模板

> ID：15589919
> 
> 赞同：1
> 
> 时间：2013-03-23T17:34:44.430
> 
> 标签：wordpress, templates, custom-taxonomy

如果我创建了 1 个名为**`cars`**.

该分类法由几个职位组成，其工作方式如下：

*   如果用户进入上述分类的页面，则会显示作为图像的汽车列表。

*   通过单击汽车图像，他将被转发到一个新页面，其中包含包含特定汽车型号（品牌）的图像列表。

我的目标是创建模板层次结构引入的 2 个页面模板：

```
taxonomy-cars.php
taxonomy-?.php 
```

第一个模板将命名为`taxonomy-cars.php`.
我的问题是我不知道如何命名第二层页面模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:24:20.280

分类由术语组成。我想在你的情况下，你有`cars`“品牌”是可能的术语之一的分类法。

从[模板层次结构文档](http://codex.wordpress.org/Template_Hierarchy#Custom_Taxonomies_display)：

> `taxonomy-{taxonomy}-{term}.php`- 如果分类是`sometax`，并且分类的术语是`someterm`WordPress 会寻找`taxonomy-sometax-someterm.php`.

所以，试试`taxonomy-cars-ford.php`。

# synchronization - 单处理器和多处理器中的自旋锁

> ID：15589923
> 
> 赞同：1
> 
> 时间：2013-03-23T17:35:05.877
> 
> 标签：synchronization, kernel, multiprocessing, spinlock

我阅读并研究了自旋锁是如何工作的。现在我有一个问题，我找不到详尽的答案：

它们如何在 UP（单处理器）环境和 SMP（对称多处理器）环境中工作？有什么区别和问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:39:02.923

自旋锁在 UP 情况下基本上是无用的。他们只会烧掉他们的时间片。他们最好睡在UP。在 SMP 的情况下，自旋锁*可能*比睡眠更可取，如果预期的等待时间低于为该线程再次获取时间片所需的平均时间。

回答您的问题“它们是如何工作的”？到处都是一样的，只是在他们的时间片上花费了 CPU 时间。

# ckeditor - 为什么ckfinder在编辑时会破坏图像标签？

> ID：15589925
> 
> 赞同：0
> 
> 时间：2013-03-23T17:35:10.780
> 
> 标签：ckeditor, ckfinder

我已经正确配置了ckeditor和ckfinder，当我插入图片时它可以工作，但是当我添加一些样式时，它会打印样式标签之外的样式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:13:20.833

我发现我的问题是我的 php 安装启用了 magic_quotes，所以这就是我的 ckeditor 的问题。

# git - 使用 gitolite 的 git 存储库和用户访问

> ID：15589929
> 
> 赞同：1
> 
> 时间：2013-03-23T17:35:33.380
> 
> 标签：git, gitolite

首先，我是 GIT 和 gitolite 的新手。但是我已经阅读了足够的内容并清除了我的基本概念。我正在关注 Sitaram 的教程[https://github.com/sitaramc/gitolite](https://github.com/sitaramc/gitolite "gitolite回购")我想问几个问题来澄清和怀疑。

1.  我有一个用户 git。git 用户是否真的需要没有密码（使用`--disabled-password`选项创建的用户（我不能让它在 RHEL 上工作。但它在 ubuntu 上工作））？我知道 git 用户必须可以通过 ssh 访问。

2.  假设我有一个 GIT 服务器和三个客户端 gitadmin、cleintA 和 clientB。现在为了使 gitolite 工作，在 gitadmin 上我将 clientA.pub、ClientB.pub （公钥）复制到`keydir`然后我编辑我`conf/gitolite.conf`的如下：

    ```
     repo phpsite
           RW+         =   clientA

     repo javasite
           RW+         = clientB 
    ```

现在我的问题是当我提交这些文件并将它们推送到服务器上时。那会发生什么？这些回购是如何创建的？我必须手动创建它们还是 gitolite 会创建它？

现在，当 clientA 需要克隆/签出 repo 时，它将使用什么 url？

`git@server.com:phpsite`还是会`clientA@server:phpsite`。

我知道这个问题可能有点愚蠢，但我真的需要清除这些疑虑

任何帮助或提示都是非常可观的。

* * *

**编辑**

在 VonC 回答之后，我实施了 gitolite 并绕过了另一个怀疑。假设我有一台机器现在`clientA`有两个用户`alice,bob`理想情况下公钥应该是`alice.pub and bob.pub`给这些用户的。`alice`现在的问题是我可以为like生成并命名一个公钥`alice-clientA.pub`吗？据我了解，不同的文件名不应该成为身份验证的问题。但是 `conf/gitolite.conf`repo 下的用户名应该是什么样的

```
repo phpsite
   RW+     =  alice-clientA 
```

或者

应该和以前一样

```
 repo php:site
   RW+    =   alice 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:40:48.090

> git用户是否真的需要没有密码（使用--disabled-password选项创建的用户）

没有。' `git`'是一个普通帐户。

> 当我提交这些文件并将它们推送到服务器时。然后会发生什么

Gitolite 将创建裸仓库`phpsite.git`并`javasite.git`在 ​​中`~git/repositories/`，它会修改`~git/.ssh/authorized_keys`以使用公钥和参数`clientA`调用gitolite 脚本。 它利用了 ssh 机制**[强制命令](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)**。`clientB`

[在“ gitolite 之类的程序如何工作？](https://stackoverflow.com/questions/13318715/how-do-programs-like-gitolite-work/13320256#13320256) ”中查看更多信息。

您*始终*以用户身份使用 ssh 连接`git`：

```
git@server.com:phpsite 
```

您永远不会尝试使用 ssh `clientA`：ssh 将`clientA`根据您的`clientA`公共/私人 ssh 密钥对您进行身份验证。

# facebook-graph-api - 由于“不支持的 GET 请求”，无法通过 Facebook Graph Explorer 检索公共帖子

> ID：15589933
> 
> 赞同：0
> 
> 时间：2013-03-23T17:35:43.767
> 
> 标签：facebook-graph-api

我正在尝试通过图形资源管理器界面从 facebook 检索一些公共帖子，并且遇到了“不支持的获取请求”异常。

StackOverflow 上的很多帖子都说这是因为您需要获得一些 user_access 权限，但据我了解，这里不应该是这种情况。

我试图访问的帖子之一的 ID 是：

```
224393774239629_508106655868338 
```

如果它受到限制，我应该无法在不登录 facebook 的情况下在这里看到帖子：

[http://www.facebook.com/224393774239629/posts/508106655868338](http://www.facebook.com/224393774239629/posts/480858081926529)

所以这应该排除限制访问的问题。

那么这是 facebook 图形浏览器中的错误吗？

还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:53:50.087

好吧，奇怪。

我输入的 facebook 链接*实际上*需要您登录 facebook。但是，如果您将链接复制粘贴到地址栏中，您显然会绕过该限制，这使我相信该链接不需要登录。

所以我想我又要重新解决访问限制问题了。

# perl - Perl 闭包和引用

> ID：15589934
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:35:47.817
> 
> 标签：perl

你好我正在尝试编写一个简单的子程序，它将比较两个数字，看看一个是否大于另一个，小于或等于。到目前为止，我有以下代码：

```
sub Value
{  my $num = $_[0];

   my ($last) = shift;

  my $compare = sub {    
 if ($last < $last) {print "Less than \n"; } else {print "Greater than \n";};};

 my $hashtable; 
 $hashtable->{"compare"} = $compare;
 $hashtable; }

#Execute Statement
my $num1 = Value(57.8);
my $num2 = Value(129.6);

print  "Check: ",  $num1->{"compare"}->($num2); 
```

有没有人建议我如何让它正常工作？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:53:43.913

1.  你把你的论点拆开包装弄乱了`Values`。您将第一个参数分配给`$num`，然后`shift`将第一个参数分配给`$last`，因此`$num`和`$last`将始终具有相同的值。
2.  您与 进行比较`$last`，`$last`这没有用。
3.  您将闭包放入`$hashtable->{compare}`，但执行该`check`字段的内容，即`undef`.
4.  您的闭包将数据打印到当前选定的文件句柄，但不返回任何有用的信息。打印返回值似乎并不明智。
5.  `$num1`并且`$num2`是闭包，而不是数字。将参数传递给闭包不会做任何事情，因为您的闭包不会解压缩任何参数。

这是一个应该解决您的问题的实现：

```
use strict; use warnings;
use Test::More;

sub create_closure {
  my ($x) = @_;
  my $operations = {
    compare => sub { my ($y) = @_; return $x <=> $y },
    add     => sub { my ($y) = @_; return $x  +  $y },
    value   => $x,
  };
  return $operations;
}

# some tests
my $ops = create_closure(15);
ok( $ops->{compare}->(15) ==  0, "compare to self" );
ok( $ops->{compare}->(20) <   0, "compare to larger");
ok( $ops->{add}->(5)      == 20, "add");
ok( $ops->{value}         == 15, "value");

my $ops1 = create_closure(150);
ok( $ops1->{compare}->($ops->{value}) > 0, "compare to smaller value");

done_testing; 
```

### 编辑

您不能直接比较两个`$ops`，但我们可以创建一个返回原始值的字段。

但是，如果您打算更频繁地执行此类操作，则可能需要使用对象和运算符重载：

```
use strict; use warnings; use Test::More;

{
  package Ops;
  sub new {
    my ($class, $val) = @_;
    if (ref $val eq __PACKAGE__) {
      ($val, $class) = ($$val, __PACKAGE__);
    }
    bless \$val => $class;
  }
  use overload
    # overload numeric coercion
    '0+' => sub { ${ $_[0] } },
    # overload addition. Take care to dereference to avoid infinite loops.
    '+'  => sub {
      my ($self, $other) = @_;
      Ops->new($$self + $other);
    },
    # overload numeric comparision. Take care to swap the args if neccessary.
    '<=>' => sub {
      my ($self, $other, $swapped) = @_;
      (my $val, $other) = $swapped ? ($other, $$self) : ($$self, $other);
      Ops->new($val <=> $other);
    }
}

my $ops1 = Ops->new( 15);
my $ops2 = Ops->new(150);

# some tests
ok( ($ops1 <=> 15)   ==  0, "compare to self" );
ok( ($ops1 <=> 20)   <   0, "compare to larger");
ok( ($ops1  + (5))   == 20, "add");
ok(  $ops1           == 15, "value");
ok( ($ops2 <=> $ops1) >  0, "compare to smaller value");

done_testing; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:47:45.773

像这样做：

```
 our $last;

 sub compare
 {
    my ($x, $y) = @_;
    if( $x > $y )
    {
       print("$x is greater than $y\n");
    }
    elsif( $x == $y )
    {
       print("$x is equal to $y\n");
    }
    else
    {
       print("$x is less than $y\n");
    }

    $last = ($x, $y);
 };
 my $lastValues = compare(3, 4); # pass numbers which you want to compare instead of 3 and 4

 print("last compared value = $lastValues"); 
```

# objective-c - UICollectionView 的延迟加载技术

> ID：15589939
> 
> 赞同：5
> 
> 时间：2013-03-23T17:36:30.540
> 
> 标签：objective-c

我有一个 IOS 应用程序，它使用 UICollectionView 来显示单元格的水平网格。我所需要的只是一种在用户到达我的 UICollectionView 末尾时（懒惰）加载数据的聪明方法。我现在使用的代码是：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    GridCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:Cell forIndexPath:indexPath];

    /**
     TODO
     - Find a good way to check if the user has reach the end of the grid
     - This next piece of code is for demonstration purposes. A real check has to be
     done yet!!!
     **/

    // releases is my datasource //

    if(indexPath.row == (releases.count - 1)) {
        [self getNextListData];
    }

    return cell; // <-- finally return the cell

} 
```

这段代码的问题是：如果用户滚动到最后，他必须来回滚动才能加载更多项目。这真的不是用户友好的，我需要一种更好的方法来在需要时加载项目。

有没有人有什么建议？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T18:10:19.710

`UICollectionView`继承自`UIScrollView`。`UIScrollView`有一个委托，`UIScrollViewDelegate`它有一堆与滚动相关的方法。在这些委托方法之一（例如`scrollViewDidBeginDecelerating:`）中，您可以使用`contentOffset`和`contentSize`属性检查您在页面上的距离。如果您即将结束（由任何 % 定义为您的结束），请获取更多数据。

使用滚动视图方法的一个优点是它不会导致`collectionView:cellForItemAtIndexPath:`变慢（通过强制它不必要地为每个集合视图运行代码）。

这与 Apple 建议的延迟加载 UITableView 数据的技术基本相同，但应用略有不同。他们也有一些示例代码（例如[LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:02:01.203

当我遇到表视图的这个问题时，我不得不做一些用户测试。我发现如果我在表格结束前开始加载 10 个单元格，那么新单元格应该准备好了。假设您正在后台加载数据，那就是。

```
if (indexPath.row >= [releases count] - 10)
    [self getNextListData]; 
```

您需要进行一些测试，看看哪个数字适合您。

此外，我还有一个加载指示单元。在我的节回调行数中，我总是额外返回 1 个。

```
return [releases count] + 1; 
```

在我的行回调单元格开始时，我返回了一个特殊的加载指示器单元格。

```
if (indexPath.row == [releases count])
    return [JLTActivityCell sharedInstance]; 
```

我不确定该建议将如何应用于集合视图，但希望它能为您指明一个好的方向。

# c# - 异构瓦片和柏林噪声

> ID：15589941
> 
> 赞同：0
> 
> 时间：2013-03-23T17:36:41.790
> 
> 标签：c#, unity3d, perlin-noise

我正在尝试使用异构瓷砖实现平铺游戏；不同大小的瓷砖。所有的瓷砖尺寸都是四舍五入的（到一米），以使其更容易。我正在寻找一种以伪随机顺序拟合瓷砖的算法，要求当然所有东西都必须平铺。

下面是我写的几行，但它不能按需要工作。不知何故，瓷砖之间的间距没有得到尊重。

首先，我生成了一个在旅途中创建的 perlin 噪声图。我为我的瓷砖地图使用字典。

瓷砖的对象米变量是方形瓷砖的宽度和深度，以米为单位。瓦片数组中的第一个瓦片是一个空瓦片，用于指定跳过。

编辑：我现在看到 Unity 中存在缩放问题，当我将比例 1 应用于游戏中的平面时，它会导致大小为 10。有人可以对此提供解释吗？

```
 for(int i=-viewSpreadMeters;i<=viewSpreadMeters;i++)
        {
            for(int j=-viewSpreadMeters;j<=viewSpreadMeters;j++)
            {   
                int x = currentTerrainID[0] + i;
                int y = currentTerrainID[1] + j;

                if (!tileMap.ContainsKey(x, y)) {
                    int id = noiseMap[x, y];
                    int iteratedTiles = 0;
                Restart:
                    for (int k = 1; k < tiles[id].meters; k++) {
                        for (int l = 1; l < tiles[id].meters; l++) {
                            int x2 = x + k;
                            int y2 = y + l;
                            if (tileMap.ContainsKey(x2, y2)) {
                                int prevMeters;
                                do {
                                    iteratedTiles++;
                                    print ("Iterated tiles" + iteratedTiles);
                                    if (iteratedTiles >= tiles.Length - 1) {
                                        id = 0;
                                        goto EndLoop;
                                    }
                                    prevMeters = tiles[id].meters;
                                    id++;
                                    id %= tiles.Length;
                                    if (id == 0) id++;
                                } while(tiles[id].meters >= prevMeters);                            
                                goto Restart;
                            }
                        }
                    }
                EndLoop:
                    tileMap.Add(x, y, id);
                    for (int k = 1; k < tiles[id].meters; k++) {
                        for (int l = 1; l < tiles[id].meters; l++) {
                            int x2 = x + k;
                            int y2 = y + l;
                            tileMap.Add(x2, y2, 0);
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:15:24.040

缩放问题取决于您如何导入资产。如果以编程方式创建图块，则它们的比例应为 1:1；但是，如果您从 Max 或 Maya 等 DCC 工具导入它们，则需要检查模型导入设置中的“全局比例”设置 - 根据源应用程序和那里的设置，全局比例可能会设置为放大或将进口单位从 1:100 缩小到 100:1。

异构图块很棘手，因为您必须管理沿部分边缘的边缘匹配。你确定你需要不同的尺寸吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:42:57.387

上面的代码有一个错误，缺少继续。此外，我需要块来使异构瓷砖工作。

# c++ - 将视图坐标转换为窗口坐标 SFML

> ID：15589943
> 
> 赞同：1
> 
> 时间：2013-03-23T17:36:46.837
> 
> 标签：c++, view, window, sfml

我有一个使用 SFML 编写的应用程序，顶部有一个菜单栏，还有一个小框可以让你在它下面移动东西。我需要将我在框中使用的视图中的坐标转换为窗口坐标，以便检查它们是否在框内。我知道 convertcoords 将窗口坐标转换为视图坐标，但是有没有办法反过来呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T21:10:13.897

使用最新的 SFML 版本（即直接来自[GitHub](https://github.com/LaurentGomila/SFML)或我的[Nightly Builds](http://sfml.my-gate.net/nightly/)），您将获得两个函数[mapPixelToCoords](https://github.com/LaurentGomila/SFML/blob/master/include/SFML/Graphics/RenderTarget.hpp#L151)（以前称为 convertCoords ）和[mapCoordsToPixel](https://github.com/LaurentGomila/SFML/blob/master/include/SFML/Graphics/RenderTarget.hpp#L202)，这正是您要寻找的。这两个函数都在 上定义`sf::RenderTarget`，您可以让它使用渲染目标的视图或提供自定义视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:53:55.397

...嗯什么？我不确定“查看坐标”是什么意思。我认为您需要的是 CWnd:: **MapWindowPoints**，您可以在其中阅读[here](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145046%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:07:12.733

嗯......我认为没有这样的功能，你必须手动完成

[http://en.sfml-dev.org/forums/index.php?topic=3257.0](http://en.sfml-dev.org/forums/index.php?topic=3257.0)

# c++ - Spurios 唤醒和条件变量

> ID：15589945
> 
> 赞同：2
> 
> 时间：2013-03-23T17:36:50.710
> 
> 标签：c++, boost-thread, condition-variable

我正在阅读 A Williams 的这篇不错的博客：

[http://www.justsoftwaresolutions.co.uk/threading/condition-variable-spurious-wakes.html](http://www.justsoftwaresolutions.co.uk/threading/condition-variable-spurious-wakes.html)

有一件事让我很烦恼：当线程因为虚假唤醒而唤醒时，它是否锁定了互斥锁？

```
boost::mutex::scoped_lock lock(the_mutex);
while(the_queue.empty())
{
    the_condition_variable.wait(lock);
} 
```

我想是这样，因为否则调用 .empty 将是不安全的，但我不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:45:41.360

是的，它确实锁定了互斥锁。基本上，只有当线程被阻塞时，互斥锁才会被释放`the_condition_variable.wait()`。无论是否虚假唤醒，互斥锁在您显示的代码中的其他任何地方都被锁定。

从[文档](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition_variable.wait)中`boost::condition_variable::wait()`：

> **后置条件：**
> 
> `lock`被当前线程锁定。

# bundle - 部署 - Java 应用程序

> ID：15589948
> 
> 赞同：1
> 
> 时间：2013-03-23T17:37:17.727
> 
> 标签：bundle, java, launch4j

我创建了一个 Java 应用程序。并准备好部署。

我已经从我的代码中制作了 jar 文件。使用launch4j包装它并与它捆绑jre并访问我的exe文件（由launch4j生成）。因此，无需安装 JRE，一切正常。

但是一个小问题是我的 Exe 文件必须位于捆绑 JRE 的某个预定义的相对路径中。

例如，假设用户已将其安装在 E:/(My Soft) 中，其中我的软件包含 JRE 文件和我的 Exe 文件。现在如果用户将 exe 文件复制到他的桌面，那么他将无法执行它。

所以，我想有什么办法可以将 jre 捆绑在我的 exe 或任何其他 tweek 中，以便用户可以从他的电脑上的任何地方执行 exe 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:42:18.063

尝试为您的程序使用 jnlp starter。在官方 oracle 文档[JNLP中阅读更多信息](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/jnlp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:10:52.250

将 JRE 与 exe 捆绑在一起的一种选择是使用例如[jPortable](http://portableapps.com/apps/utilities/java_portable)创建一个 Portable Edition 应用程序。所以你可以在PC上的任何地方执行exe，而无需安装JRE。但更好的选择是创建一个自定义安装程序，它将检查客户端 PC 中 JRE 的当前安装，如果没有找到其他兼容的 JRE，则将其作为必需选项安装。

# sql-server - 如何使用 SQL Server 连续读取文本文件？

> ID：15589950
> 
> 赞同：1
> 
> 时间：2013-03-23T17:37:28.103
> 
> 标签：sql-server, import, text-files

任何人都会知道如何从 SQL Server 读取文本文件（即连续填充的日志文件）并将其**连续**导入 SQL Server 表中？

例如，我只想在存储过程中使用**T-SQL 。**

除了一次读取整个文件之外，`BULK INSERT`我还没有找到任何选项。`OPENROWSET`我将不得不一次又一次地重复并寻找尚未导入的行。如果文件变大，这是一种可能性，但效率不高。

是否可以在每次运行时只读取最新的行？

谢谢 ！菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:58:15.997

您可以使用`FileSystemWatcher`以便在日志文件更改时收到通知

```
FileSystemWatcher watcher = new FileSystemWatcher();

watcher.Path = @"C:\PathOfTheLogfile";
watcher.Filter = "MyLogfile.txt"; // You can also use wildcards here.

watcher.NotifyFilter = NotifyFilters.LastWrite;
watcher.Changed += new FileSystemEventHandler(Watcher_Changed);
watcher.Created += new FileSystemEventHandler(Watcher_Changed);

watcher.EnableRaisingEvents = true; // Start watching.

...

private static void Watcher_Changed(object source, FileSystemEventArgs e)
{
    if (e.ChangeType == WatcherChangeTypes.Created) {
        //TODO: Read log from beginning
    } else {
        //TODO: Read log from last position
    }
    //TODO: write to MSSQL
    //TODO: remember last log file position
} 
```

有时，`FileSystemWatcher`当文件仍在被写入时，事件会触发。您可能必须在读取日志文件之前添加延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:19:05.807

如果您的文件可由 Jet 提供程序解析，您可能能够使用[链接服务器到文本文件。](http://msdn.microsoft.com/en-us/library/ms190479.aspx)

# haskell - Haskell中的汉明数

> ID：15589951
> 
> 赞同：2
> 
> 时间：2013-03-23T17:37:31.133
> 
> 标签：haskell, factors, hamming-numbers

我需要定义其唯一素因数为 2、3 和 5 的数字列表，即汉明数。（即2^i * 3^j * 5^k形式的数字。序列以1、2、3、4、5、6、8、9、10、12、15、...开头）

我可以使用该`factors`功能或​​其他方式来做到这一点。下面`factors`应该返回其参数的因素。我相信我已经正确实施了它。

```
 factors :: Int -> [Int]
   factors n = [x | x <- [1..(div n 2) ++ n], mod n x == 0] 
```

我尝试使用列表推导来制作 2^i * 3^j * 5^k 的列表，但在编写守卫时遇到了困难：

```
hamming :: [Int]
hamming = [n | n <- [1..], „where n is a member of helper“]

helper :: [Int]
helper = [2^i * 3^j * 5^k | i <- [0..], j <- [0..], k <- [0..]] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T17:52:29.130

> I may do it using the `factors` function, or otherwise.

I recommend doing it otherwise.

One simple way is to implement a function getting the prime factorization of a number, and then you can have

```
isHamming :: Integer -> Bool
isHamming n = all (< 7) $ primeFactors n 
```

which would then be used to filter the list of all positive integers:

```
hammingNumbers :: [Integer]
hammingNumbers = filter isHamming [1 .. ] 
```

Another way, more efficient is to avoid the divisions and the filtering, and create a list of only the Hamming numbers.

One simple way is to use the fact that a number `n` is a Hamming number if and only if

*   `n == 1`, or
*   `n == 2*k`, where `k` is a Hamming number, or
*   `n == 3*k`, where `k` is a Hamming number, or
*   `n == 5*k`, where `k` is a Hamming number.

Then you can create the list of all Hamming numbers as

```
hammingNumbers :: [Integer]
hammingNumbers = 1 : mergeUnique (map (2*) hammingNumbers)
                                 (mergeUnique (map (3*) hammingNumbers)
                                              (map (5*) hammingNumbers)) 
```

where `mergeUnique` merges two sorted lists together, removing duplicates.

That’s already rather efficient, but [it can be improved by avoiding producing duplicates from the beginning](https://stackoverflow.com/a/12482407/1011995).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:51:29.140

请注意，`hamming`集合是

```
{2^i*3^j*5^k | (i, j, k) ∈ T} 
```

在哪里

```
T = {(i, j, k) | i ∈ [0..], j ∈ [0..], k ∈ [0..]} 
```

但是我们不能使用 [(i, j, k) | i <- [0..]，j <- [0..]，k <- [0..]]。因为这个列表以无限多的三元组开头，比如`(0, 0, k)`.
给定 any `(i,j,k)`，`elem (i,j,k) T`应该在有限时间内返回 True 。
听起来很熟悉？你可以回忆一下你之前问过的问题： [haskellinfinite list of incrementing pairs](https://stackoverflow.com/questions/15583975/haskell-infinite-list-of-incrementing-pairs)

在那个问题中，哈马尔给出了配对的答案。我们可以将其推广到三元组。

```
triples = [(i,j,t-i-j)| t <- [0..], i <- [0..t], j <- [0..t-i]]
hamming = [2^i*3^j*5^k | (i,j,k) <- triples] 
```

# sql-server - SQL Server IDE 中 MDX 查询图标的含义

> ID：15589953
> 
> 赞同：3
> 
> 时间：2013-03-23T17:37:49.377
> 
> 标签：sql-server, ssas, mdx

我在我们的 IDE (SQL Server) 中打开了一个 MDX 查询，并希望将多维数据集实体的图标与我正在阅读的名称相匹配。

*   三轴的小立方体一定是Dimension的图标？
*   6个蓝色小正方形的长方形是多少？
*   6个蓝色小方块组成的小三角形是什么？

![在此处输入图像描述](../Images/8196b410170afe8baea310920ffe965c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T04:33:39.977

1.  3 轴立方体代表`Dimension`.

2.  带有 6 个小立方体的矩形代表`Attribute Hierarchy`它只不过是一个层次结构，它由一个`Single Attribute`

3.  第三个代表`User Hierarchy`由多个组成`attribute`

# c# - 将检索到的部门的 SQL 值分配给 Session["UserAuthentication"]

> ID：15589955
> 
> 赞同：0
> 
> 时间：2013-03-23T17:37:53.027
> 
> 标签：c#, asp.net, mysql

我正在使用 C# 中的以下 SQL 查询从表 ts_dept 中检索 dept 的值 - 我将如何将其分配给`Session["UserAuthentication"]`when `(CurrentName != null)`？

```
 protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
    {
        string username = Login_Box.UserName;
        string pwd = Login_Box.Password;

        string strConn;
        strConn = WebConfigurationManager.ConnectionStrings["team13ConnectionString"].ConnectionString;
        SqlConnection Conn = new SqlConnection(strConn);
        Conn.Open();

        string sqlUserName;
        sqlUserName = "SELECT dept FROM ts_dept WHERE id=@username AND pass=@pwd";

        SqlCommand com = new SqlCommand(sqlUserName, Conn);
        com.Parameters.Add("@username", username);
        com.Parameters.Add("@pwd", pwd);

        string CurrentName;
        CurrentName = (string)com.ExecuteScalar();

        if (CurrentName != null)
        {
            Session["UserAuthentication"] = username;
            Session.Timeout = 1;
            Response.Redirect("Default.aspx");
        }
        else
        {
            Session["UserAuthentication"] = "";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:07:58.503

只是从这里的内存（不是在我的 C# 机器上），但试试这个：

```
object CurrentName = com.ExecuteScalar();
if (CurrentName != null && CurrentName != System.DBNull.Value) {
    {
        Session["UserAuthentication"] = (string)CurrentName;
        Session.Timeout = 1;
        Response.Redirect("Default.aspx");
    }
    else
    {
        Session["UserAuthentication"] = "";
    }
} 
```

如果我没记错的话，如果查询没有返回结果，CurrentName 将为 null，如果查询返回结果但 ts_dept.dept 为 null，则为 System.DBNull.Value。

还要注意关于使用 Session 进行身份验证的评论——如果你在一个负载平衡的集群中，它根本就不起作用。开始将此切换到表单身份验证。

# php - 将 jQuery VAR 字符串传递给 PHP

> ID：15589965
> 
> 赞同：-4
> 
> 时间：2013-03-23T17:38:17.030
> 
> 标签：php, jquery, submit

我在 jQuery 中有一些 var，我想在提交表单时发送到 PHP，这将是最好的方法吗？有没有比仅使用隐藏输入并使用 jQuery 强制其值更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:46:16.060

是的...除了隐藏输入之外，您还可以使用 jquery [ajax](http://api.jquery.com/jQuery.ajax/)或[发布](http://api.jquery.com/jQuery.post/)或[获取](http://api.jquery.com/jQuery.get/)..

这是一个示例（使用 $.post）让您继续前进..

```
 var test=firstData;
  var test2=secondData;
  $.post('url(test.php)',{data1:test,data2:test2},function(result){
      alert("posted");
  }) 
```

从上面..

url ：是您要发送数据的位置（php）；
第二个参数是您要发送到服务器端脚本（php）的数据
，第三个是服务器的响应。

测试.php

```
$data1=$_POST['data1']; //gives you firstData
$data2=$_POST['data2'];  //gives you secondData 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:47:52.327

您可以使用 Ajax 提交表单。序列化表格如下。

```
$('form').submit(function() {
    var data = $('form').serialize();
}); 
```

数据的值将采用查询字符串的形式

将 var 附加到数据并在 ajax 中提交。您将在 php 中同时获得表单数据和 var 值

# java - 如何限制 Java 方法调用仅适用于任何事件的第一次发生？

> ID：15589970
> 
> 赞同：0
> 
> 时间：2013-03-23T17:38:59.343
> 
> 标签：java, methods, invoke

通过使 addButton 返回一个布尔值（单击时为真，未单击时为假）来解决方法，然后我这样做了：`if (addButton) { doSomething(); }`

（抱歉，标题可能会产生误导。无法编造更好的标题）

我得到了这个方法（我们称之为method1，它在循环中也一直被调用），它添加了一个自定义按钮，我希望那个按钮（当点击时）只运行一次指定的方法（让我们称之为method2）。我希望在几个不同的类中使用 method1，但要触发不同的操作。

```
public void addButton(Graphics2D g2d, int x, int y, AttributedCharacterIterator atstr, Method method)
{
    BufferedImage img = Sprites.button;

    x -=img.getWidth()/2;
    y -=img.getHeight()/2;
    int border = 10;

    g2d.drawImage(img, null, x, y);
    g2d.drawString(atstr, x + (img.getWidth()/2) - border, y + (img.getHeight()/2) + 10);
    Rectangle getBounds = new Rectangle(x, y, img.getWidth(), img.getHeight());
    if (MouseInput.getBounds().intersects(getBounds) && MouseInput.mouseClickedPressed == true)
    {
        try {
            method.invoke(this);
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

它是这样调用的：

```
addButton(g2d, 200, 200, Template.atstr(g2d, "Siege!", Color.BLACK, "Times New Roman", 20, doSomething()));
        public Method doSomething()
        {
            //Action.....
            return null;
        } 
```

我的问题是method2一直被调用，我已经知道为什么了，但是有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:46:14.657

如果你希望它只被调用一次，你需要在第一次调用时`boolean invoked`设置为的标志/字段`true`，并防止以后被调用——只要写一些如果：`if(!invoked) { invoke... }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:46:15.780

我试图理解您的代码但失败了......但是我相信我可以建议您创建特殊标志（例如`buttonClicked`）。这个变量的值将是`false`。

当用户单击按钮时，流程应到达如下代码：

```
if (buttonClicked) {
    return;
}
buttonClicked = true;
// do other stuff hrere 
```

请不要忘记同步这段代码。否则，如果用户点击速度足够快，它可以同时执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:46:30.057

基本上你需要一个标志变量，它是在方法 2 运行时设置的。检查方法2`if(!flag) method2();`

# scala - 将 Char 转换为字符串

> ID：15589978
> 
> 赞同：7
> 
> 时间：2013-03-23T17:39:49.440
> 
> 标签：scala

鉴于`s : String`我怎样才能转换结果

```
s.first() 
```

变成一个`String`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T17:46:52.033

您可以使用以下方法`take`：

```
scala> val s = "abcdef"
s: String = abcdef

scala> val first = s.take(1)
first: String = a

scala> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T17:42:10.203

字符串没有`.first()`功能。你的意思是`.head`？

使用`head`和返回一个字符串很简单：

```
s.head.toString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-20T10:08:47.000

另外一个选项：

```
val s : String = "hello"
val first : String = s(0)+"" 
```

# excel - 错误：无法访问 Excel 中的文件发布到网页设置

> ID：15589983
> 
> 赞同：0
> 
> 时间：2013-03-23T17:40:09.410
> 
> 标签：excel, webpage, publish

我在 Windows XP/Office 2003(Excel) 上运行了一个非常重要的设置

这是一个电子表格，当您点击保存时，它会将单元格范围从 2 张纸发布到 html 文件。

然后有 HTML 代码每 10 秒刷新一次发布网页。

布局：

```
 Spreadsheet >>> htm output >>> html file refreshing output every 10 secs to display any changes.
    Book1.xls       output.htm     refresh.html 
```

这是我用来刷新输出的 HTML

```
 <html>
    <meta http-equiv="refresh" content="10">

     <TITLE> None </TITLE>

     <frameset rows="80%,*" cols="20%" bordercolor="#0099FF" id="message" name="message">
<frame id="motd1" scrolling=no name="motd1" src="output.htm"  border="1" frameborder="0" framespacing="0" noresize>

    <frame src="UntitledFrame-7.html">

    </frameset>
    <noframes></noframes>
    </html> 
```

我最近尝试将系统升级到 Win 7/Office 2010。

由于某种原因，当 HTML 刷新输出 html 并同时在电子表格上点击保存时，会生成错误（因为文件已在使用中）

```
 ERROR: Cannot access specified file, output.htm 
```

有什么建议吗？（不升级不是一种选择！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-11T16:15:20.990

我也有这个问题。通过在后台运行带有“pre”文件的递归 .bat 文件，我稍微减少了我的错误。像这样的东西。

```
REM ***********COMPARE AND COPY 1Mo MT1 RESULTS*********************
REM FILE COMPARE 7 DAY WIP(used by other sheets) WITH PRE 7 DAY WIP
FC "PATH\PREFILE.MHT" "PATH\FILE.MHT" > nul

REM IF THE FILES ARE NOT THE SAME, COPY PRE 1Mo MT1 RESULTS TO 1Mo MT1 RESULTS
IF %ERRORLEVEL% == 1 (
copy /y "PATH\PREFILE.MHT" "FILE.MHT"
ECHO 1Mo MT1 Results updated at %time%
)

REM ******YOUR 10 SECOND TIMER******
TIMEOUT 10 /NOBREAK (w/out nobreak you can 'press any key to continue' past the timeout)

"PATH\THISFILE.BAT" (windows automatically opens .bats in cmd) 
```

如果路径中有空格，则需要双引号。您可以删除文件比较，因为长文件可能需要几秒钟。

希望这能让更多人关注此问题以获得更好的答案，或者这在 Office 16 中可能不是问题。

# c - 在 C 中执行程序

> ID：15589984
> 
> 赞同：0
> 
> 时间：2013-03-23T17:40:15.683
> 
> 标签：c, fork, stdout, stdin

在我的程序的某个时刻，我想运行另一个程序（从标准输入获取参数），其中的参数是我在文本文件中准备的。然后，我想将程序的输出写入另一个文件。

我是 linux、fork 等的新手。试图打破我的头 HOURS 没有成功。我读到我应该将我的输入文件与标准输入相关联，将输出文件与标准输出相关联，类似的东西。

这是我写的代码：

```
//move on all sub-directories .....
while((indir=readdir(dir))!=NULL)
{
    pid_t pid;
    DIR *currDir;
    struct dirent *cfile;
    char *fullpath, *outpath, *outputpath;

    //ignore hidden files
    if(indir->d_name[0]=='.')
        continue;

    //create the full path of c file
    fullpath=(char*)calloc(strlen(dirpath)+strlen(indir->d_name)+1,sizeof(char));
    strcpy(fullpath,dirpath);
    fullpath=strcat(fullpath,indir->d_name);
    fullpath=strcat(fullpath,"/");
    //open current directory
    currDir=opendir(fullpath);
    //get the c file, ignore hidden files
    while((cfile=readdir(currDir))!=NULL)
    {
        if(cfile->d_name[0]!='.')
            break;
    }
    /*compile c file*/

    //child process
    if((pid=fork())==0)
    {
        fullpath=realloc(fullpath, sizeof(char)*(strlen(fullpath)+strlen(cfile->d_name)+1));
        outpath=(char*)calloc(strlen(fullpath)+strlen(OUT_NAME)+1,sizeof(char));
        strcpy(outpath,fullpath);
        strcat(fullpath,cfile->d_name);
        strcat(outpath,OUT_NAME);
        execl("/usr/bin/gcc", "/usr/bin/gcc", "-o", outpath, fullpath,NULL);
    }
    else
    {
        wait(NULL);
    }

    //create output file path
    outputpath=calloc(strlen(fullpath)+strlen(OUTPUTFILE_NAME)+1,sizeof(char));
    strcpy(outputpath,fullpath);
    strcat(outputpath,OUTPUTFILE_NAME);

    inputpath=(char*)calloc(strlen(buff)+1,sizeof(char));
    //get input file path from buffer
    for(j=0,buffIndex++;buff[buffIndex]!='\n';buffIndex++,j++)
    {
        inputpath[j]=buff[buffIndex];
    }

////Untill here works perfectly////
    //child process
    if((pid=fork())==0)
    {
        fullpath=realloc(fullpath, sizeof(char)*(strlen(fullpath)+strlen(OUT_NAME)+1));
        strcat(fullpath, OUT_NAME);
        //re-open input file and associate it with stdin
        freopen(inputpath, "r", stdin);
        //re-open output file and associate it with stdout
        freopen(outputpath, "w", stdout);
        execl(fullpath,inputpath, NULL);
    }
    else
    {
        wait(NULL);
    }

} 
```

*inputpath 是我为程序输入准备的文件的完整路径。

*outputpath 是我要保存程序输出的文件的完整路径。

我肯定做错了什么，因为我收到以下错误：

```
/home/aviad/workspace/test/dean/input.txt~: file not recognized: File truncated
collect2: error: ld returned 1 exit status
/home/aviad/workspace/test/jjang/fileoutput.txt: file not recognized: File truncated
collect2: error: ld returned 1 exit status 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:58:50.873

您的帖子中没有足够的信息来确认，但我怀疑您选择了与构建工具相同的名称，例如`ld`，为您的程序名称而被咬。如果你这样做并运行

```
ld 1.txt 2.txt 
```

很有可能您没有执行*您的* `ld`，而是执行 GNU 链接器或类似的 ( `/usr/bin/ld`)。通常系统目录之前搜索`.`，如果`.`在`PATH`所有。这避免了一些令人不快的意外，比如如果你`ls`在一个目录中运行了一个名为二进制文件的目录`ls`，你可能仍然想要`/bin/ls`.

这就是为什么最好在你的 cwd 中运行以 为前缀的东西`./`，所以你会说：

```
./ld 1.txt 2.txt 
```

并且该系统`ld`将不再是候选者。您可以使用`which ld`和来确定将运行哪一个`which ./ld`。

所以，实际上你根本没有运行你的程序。这咬伤了我认识的几个人，包括我自己。我的第一个 unix 程序被命名为“test”；）。

编辑：根据输出，名称`cc`可能比 更好`ld`，但想法相同。

编辑：

根据您的更新，看来您`gcc`毕竟是通过读取目录内容来调用的。似乎没有任何检查您正在编译的文件甚至是一个`.c`文件，您确定您没有在这些文本文件所在的目录中调用此代码吗？

# lua - Lua 中的范围规则

> ID：15589988
> 
> 赞同：6
> 
> 时间：2013-03-23T17:40:30.193
> 
> 标签：lua, scope

我正在测试 Lua 的作用域，并发现了一些意想不到的东西。以下代码不打印 localMainVariable。

```
function functionScope()
    print( "\nIn function")
    print( "globalMainVariable: " .. globalMainVariable )
    if (localMainVariable ~= nil) then print( "localMainVariable: " .. localMainVariable ) end
end

globalMainVariable = "Visible"
local localMainVariable = "Visible"
functionScope() 
```

但是下面的代码确实打印了 localMainVariable。

```
globalMainVariable = "Visible"
local localMainVariable = "Visible"

function functionScope()
    print( "\nIn function")
    print( "globalMainVariable: " .. globalMainVariable )
    if (localMainVariable ~= nil) then print( "localMainVariable: " .. localMainVariable )  end
end

functionScope() 
```

我知道这与声明 localMainVariable 的位置有关，但我认为将其设为本地会限制变量的范围。实际的规则是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T17:43:50.053

> 局部变量的范围从其声明后的第一条语句开始，一直持续到包含该声明的最内层块的最后一个非 void 语句。

[Lua手册](http://www.lua.org/manual/5.2/manual.html#3.5)

# browser - 从浏览器（扩展）启动 TCP 连接？

> ID：15589990
> 
> 赞同：1
> 
> 时间：2013-03-23T17:40:40.307
> 
> 标签：browser, tcp, google-chrome-extension, firefox-addon

是否可以从浏览器发起 TCP 连接？

如果是这样，是否已经存在执行此操作的浏览器（尤其是 Firefox 和 Chrome）扩展？如果还没有扩展，您知道创建 Firefox/Chrome 浏览器发起的 TCP 连接的核心元素/功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T09:43:01.547

Chrome 浏览器（我认为是从 v24 开始的稳定通道）允许您托管 TCP 服务器，并且示例表明它可以连接到 telnet 服务器，这意味着它也能够成为 TCP 客户端。

[https://github.com/GoogleChrome/chrome-app-samples/tree/master/tcpserver](https://github.com/GoogleChrome/chrome-app-samples/tree/master/tcpserver)

[https://github.com/GoogleChrome/chrome-app-samples/tree/master/telnet](https://github.com/GoogleChrome/chrome-app-samples/tree/master/telnet)

但是这些都不是标准化的，所以，如果你可以使用 websockets，那就更喜欢了。

[http://developer.chrome.com/apps/socket.html](http://developer.chrome.com/apps/socket.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:44:19.533

有 Websocket，但它们仅限[于 RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)中概述的 websocket 协议。

到目前为止，大多数现代网络浏览器[都支持它](http://caniuse.com/websockets)

# android - 安卓做家用手机

> ID：15589991
> 
> 赞同：0
> 
> 时间：2013-03-23T17:40:41.793
> 
> 标签：android

当我给 number="05338830967"; 就像它正在工作但是当我给这个数字时 number="03926502323"; 它没有运行，电话告诉我创建互联网电话是什么？

```
 private void makePhoneCall(String number) {
      try {

          for (int i = 0; i < number.length(); i++) {
                if ( number.contains("-")) {
                 String[] numaraduzelt = number.split("-");  
                 number= numaraduzelt[0]+numaraduzelt[1];
                }
            }
            number="tel:+9"+number;

        Intent intent = new Intent(Intent.ACTION_CALL);
        intent.setData(Uri.parse(number));
                 }
                  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T16:36:54.947

您可能希望使用 Google 提供的出色的[libphonenumber](http://libphonenumber.googlecode.com)库，该库在任何地方都在使用，包括用于解析和格式化电话号码的 Android 框架。这将允许您在尝试发送拨号意图之前验证电话号码。

# javascript - 如何根据Javascript中的单选按钮检查更新选择框

> ID：15589994
> 
> 赞同：-3
> 
> 时间：2013-03-23T17:40:48.913
> 
> 标签：javascript, radio-button, html-select

当我单击“非技术”单选按钮时，我想将选择框的选项更新为“英语”、“历史”、“数学”。单选按钮和选择框都在表单内。这是我在下面给出的 HTML 代码。

我需要一个 JavaScript 验证：

```
<tr>
    <td>Category:</td>
    <td>
        <input type="radio" name="category" value="1" checked="yes" />Technical
        <input type="radio" name="category" value="2" />Non-technical</td>
</tr>
<tr>
    <td>Branch</td>
    <td>
        <select id="techy">
            <option>Hardware</option>
            <option>Networking</option>
            <option>Linux</option>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:52:44.413

You can have both of the select lists in your markup and only show the relevant one depending on the radio button that is chosen. That's better than manipulating the contents of the `<select>`.

[jsFiddle](http://jsfiddle.net/Tyriar/9NJ6t/2/)

**HTML**

```
<table>
    <tr>
        <td>Category:</td>
        <td>
            <input id="radio-techy" type="radio" name="category" value="1" checked="yes" />Technical
            <input id="radio-non-techy" type="radio" name="category" value="2" />Non-technical
        </td>
    </tr>
    <tr>
        <td>Branch</td>
        <td>
            <div id="select-div" class="tech">
                <select id="techy">
                    <option>Hardware</option>
                    <option>Networking</option>
                    <option>Linux</option>
                </select>
                <select id="non-techy">
                    <option>English</option>
                    <option>History</option>
                    <option>Maths</option>
                </select>
            </div>
        </td>
    </tr>
</table> 
```

**CSS**

```
#select-div select {
    display:none;
}

#select-div.tech #techy {
    display:block;
}

#select-div.non-tech #non-techy {
    display:block;
} 
```

**JS**

```
var techButton = document.getElementById('radio-techy');
var nonTechButton = document.getElementById('radio-non-techy');

techButton.onclick = function () {
    document.getElementById('select-div').className = 'tech';
}
nonTechButton.onclick = function () {
    document.getElementById('select-div').className = 'non-tech';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:12:08.860

我在想你可以尝试这样的事情：

**HTML**

```
<table>
    <tr>
        <td>Category:</td>
        <td>
            <input type="radio" id="radioTech" name="category" value="1" checked="yes" />Technical
            <input type="radio" id="radioNonTech" name="category" value="2" />Non-technical</td>
    </tr>
    <tr>
        <td>Branch</td>
        <td>
            <select id="options"></select>
        </td>
    </tr>
</table> 
```

**在脚本标签或 file.js 中**

```
// This is a literal object (JSON), if you want to add more items you just have to add them here.
options = {
    'technical': [
        'Hardware',
        'Networking',
        'Linux'
     ],
    'ntechnical': [
        'English',
        'History',
        'Maths'
     ]
};

var renderItems = function( arrItems, selectElement ){

  selectElement.innerHTML = '';

    for( var i = 0, l = arrItems.length; i < l; i++ )
    {
        var item = document.createElement( 'option' );
            item.innerHTML = arrItems[i];
        selectElement.appendChild( item );
    }

};

window.onload = function() {

    var radioTechnical = document.getElementById( 'radioTech' );
    var radioNonTechnical = document.getElementById( 'radioNonTech' );
    var selectElement = document.getElementById( 'options' );

    radioTechnical.onclick = function(){ renderItems( options.technical, selectElement ) };
    radioNonTechnical.onclick = function(){ renderItems( options.ntechnical, selectElement ) };

    radioTechnical.click();

}; 
```

在此示例中，您将动态添加项目，如果需要，它使您可以从外部资源获取数据并将其添加到 JSON 对象，之后完成其余工作以及数组中的项目显示=D

# haskell - 在 Haskell 中创建特定类型的小写常量

> ID：15589995
> 
> 赞同：0
> 
> 时间：2013-03-23T17:41:08.507
> 
> 标签：haskell, types, constants, lowercase

例如，如何定义一个已经存在的数据类型 [Vegetables] 的小写常量“corn”？

我试过使用

```
type corn = [Vegetables] 
```

但它产生了一个“格式错误的类型和/或类声明头”......

我想收到一些建议。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T17:52:41.797

Types have to start with a capital letter. See [http://www.haskell.org/haskellwiki/Programming_guidelines#Naming_Conventions](http://www.haskell.org/haskellwiki/Programming_guidelines#Naming_Conventions).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T18:22:37.390

合理猜测你的意思，以及`Vegetables`类型的构造函数......

```
corn :: [Vegetables]
corn = [Corn] 
```

这与任何其他顶级绑定相同。类型签名甚至不是必需的，只是通常方便的文档。

# php - 在 MySQL 中更改文本的特定字符

> ID：15589997
> 
> 赞同：3
> 
> 时间：2013-03-23T17:41:13.343
> 
> 标签：php, mysql

所以我有一个 625 位长的数字要存储在 MySQL 中，它只包含 0 1 和 2 位数字。到目前为止，我发现存储它的最佳方式是 VARCHAR(625)。我怀疑有更好的方法来做到这一点，我只是不确定如何。

我想运行诸如“将文本的第 128 个字符更改为 1”之类的查询，而不必将文本查询到 PHP，从那里进行更改，然后将新文本写入数据库。

所以问题是：最简单的方法是什么，什么字段类型最适合这种东西？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:48:52.517

如果您要执行“将文本的第 128 个字符更改为 1”之类的操作，那么我建议将数据类型保留为 VARCHAR(625)。如果长度*始终*为 625，那么您可以使用 CHAR。

这会将 MySQL 中的第 128 个字符更改为 1：

```
UPDATE your_table set your_column =
  CONCAT(SUBSTRING(your_column, 1, 127), '1', SUBSTRING(your_column, 129)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:50:34.350

您可以使用 INSERT() 字符串函数

试试看

```
UPDATE tbl set field = INSERT(field,128,1,'1') where id = primary key 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:49:25.603

如果您只存储数字，为什么不使用 int(625) 而不是 varchar？

您可以使用替换命令，但您必须知道用什么替换

```
update TABLE_NAME set FIELD_NAME = replace(FIELD_NAME, ‘find this string’, ‘replace found string with this string’); 
```

如果您不知道要替换的确切内容，可以将“用此字符串替换找到的字符串”替换为子查询。使用 length 和 substr 来拆分，替换你想要的，然后重新连接在一起。

这个例子应该使我所说的更有意义 [http://sqlfiddle.com/#!2/dbc21/2/0quey](http://sqlfiddle.com/#!2/dbc21/2/0quey)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-13T04:56:36.943

一个复杂的替代方案：

将第 5 个字符替换为 'r'，其中主键为 30：

```
update `myTable` set `myField`= regexp_replace(`myField`, '.', 'r', 5, 1) where `id`=30 limit 1 
```